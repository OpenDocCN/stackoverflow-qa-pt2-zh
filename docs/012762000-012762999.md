# StackOverflow 问答 12762000-12762999

# ruby-on-rails - Windows 中 rspec 的 rbconfig 设置

> ID：12762004
> 
> 赞同：0
> 
> 时间：2012-10-06T17:19:18.767
> 
> 标签：ruby-on-rails, ruby, windows, rspec

在 Windows 中设置 rspec 后。我收到以下消息；

```
C:\Sites\rails_projects\sample_app>bundle exec rspec spec/
C:/Sites/rails_projects/sample_app/rspec-core/ruby/1.9.1/gems/autotest-4.3.2/lib
/autotest.rb:77: Use RbConfig instead of obsolete and deprecated Config. 
```

windows环境下如何切换到RbConfig？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:24:51.650

此警告出现在`autotest`gem 中，它是您应用程序的第三方：它使用`Config`类而不是`RbConfig`. 您可以：

*   简单地忽略它，
*   尝试升级到[更新版本`autotest`](https://rubygems.org/gems/autotest/versions)以查看此警告是否消失，如果没有，可能会为该`autotest`项目打开一张票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:27:27.330

其实答案再简单不过了。正如消息所示，我刚刚转到 autotest.rb 中的第 77 行，并将配置更改为 RbConfig。

进入下一个错误！

# css - 100% div 宽度上的 CSS 背景图像

> ID：12762005
> 
> 赞同：1
> 
> 时间：2012-10-06T17:19:33.327
> 
> 标签：css

![这就是它的样子][1]

我不知道如何为需要在 bcg 或 div 中的图像编写 CSS，这将与内容和标题的右侧对齐。此图像必须从内容的右侧转到浏览器窗口的左侧。

假设浏览器窗口宽 1900 像素，内容中心对齐 1100 像素。图像与浏览器窗口的右侧对齐。

当您更改浏览器窗口的宽度时，我想以这样的方式编写它，图像需要保持右对齐，左侧部分需要“消失”，就像您使用背景图像和更改 div 的大小时一样。

没有声音拉伸图像，也没有水平滚动。

它需要看起来像这样[http://city.tolteam.com/2.html](http://city.tolteam.com/2.html) - 网站看起来像这样[http://city.tolteam.com/ac.jpg](http://city.tolteam.com/ac.jpg)

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T16:38:28.643

利用 `float:right; width:50%; /* or a fixed width if you dont want the image to shrink or stretch */`

说喜欢

```
float:right; width:400px; /* The actual image width */ 
```

这将始终保持不变的大小不规则的浏览器调整大小。

# php - 在zend框架中将验证错误从模型传递到控制器

> ID：12762006
> 
> 赞同：0
> 
> 时间：2012-10-06T17:19:44.930
> 
> 标签：php, oop, zend-framework

在 Zend Framework 中，我在我的模型类中验证用户提供的数据，例如

```
public function valiateRegisterForm($regisInfo)
{
   //validating with zend_filter_input which on failure returns array of arrays i.e
  //(error code to array of error messages) 
} 
```

现在我又创建了一个方法 getErrorMessage() 让控制器从模型中获取错误消息，但是我必须在我的每个模型类中创建这个方法，这会导致冗余，所以我应该创建另一个像 ErrorManager 这样的对象吗？

在我看来，好像我只是没有以正确的方式遵循事情，
请建议一些好的方法来处理 zend 框架中的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T05:27:29.710

可能我不理解您的问题，但我会从您的“validateRegisterFrom”方法返回 Zend_Filter_Input 对象。该对象有一个“getMessages”方法，它返回验证错误。

```
public function valiateRegisterForm($regisInfo)
{
      $filters = array();
      $validators = array();

      $input = new Zend_Filter_Input($filters, $validators, $regisInfo);

      // do validating

      return $input;
 } 
```

在你的控制器中

```
public function whateverAction()
{
     $result = $My_Model_Register->validateRegisterForm($data);

     if ($result->hasInvalid()) {
         $errors = $result->getMessages();
     }
} 
```

# android - Android Seekbar 在方向更改时停止更新

> ID：12762007
> 
> 赞同：1
> 
> 时间：2012-10-06T17:19:48.257
> 
> 标签：android, event-handling, seekbar

我有一个媒体播放器搜索栏，它工作正常，直到我旋转屏幕。我想看到的是 seekbar 的进展继续。但是它重置为零并且不再响应触摸事件。

这是 oncreate 中的代码：

```
mSeekBar.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            seekChange(v);
            return false;
        }
    }); 
```

在主要课程中：

```
private final Runnable updatePositionRunnable = new Runnable() {
    public void run() {
        updatePosition();
    }
};
private void updatePosition() {
    handler.removeCallbacks(updatePositionRunnable);
    try{
        if (mp != null) mSeekBar.setProgress(mp.getCurrentPosition());
    } catch (Exception ex) {
        mSeekBar.setProgress(0);
        handler.removeCallbacks(updatePositionRunnable);
    }
    handler.postDelayed(updatePositionRunnable, 100);
}

//seekbar re-position track
private void seekChange(View v) {
    try{
        if (mp != null) mp.seekTo(mSeekBar.getProgress());
    } catch (Exception ex) {
    }
} 
```

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:24:40.397

最后自己想通了：

添加

> android:configChanges="keyboardHidden|orientation"

到您需要更新的每个活动的清单。

# vim - 从 Nagios 到 check_mk 配置分三步，我怎么能做得更好？

> ID：12762009
> 
> 赞同：1
> 
> 时间：2012-10-06T17:20:00.970
> 
> 标签：vim, awk

我正在使用 OMD 和 check_mk 设置新的 Nagios 安装，而不是这次手动完成所有操作。交换机在 DNS 中没有正确的主机名，因此 check_mk 提供了一种在配置文件中指定 IP 的方法。昨晚我正在转换一些交换机的配置文件，我尝试了几分钟来一次完成，但后来认输了。

示例输入：

```
define host{
    use         generic-switch
    host_name   BAR.MDF.MODEL
    alias       BAR.MDF.MODEL
    parents     FOO.MDF.MODEL.01
    address     10.1.1.1
    } 
```

所需输出：

```
ipaddresses = {
  "BAR.MDF.MODEL" : "10.1.1.1",
} 
```

这就是我所做的。

我知道 IP**总是**在 host_name 之后，所以它相当安全/一致

```
{ awk '/host_name/ || /address/ { print $2 }' < switch.cfg; } >> out.txt 
```

这让我

```
BAR.MDF.MODEL
10.1.1.1 
```

然后我做了这个

```
{ awk '!/^1/{ getline ip; print $0, ip; next }' < out.txt; } >> out2.txt 
```

得到这个：

```
BAR.MDF.MODEL 10.1.1.1 
```

其余的格式化是通过“规范”和宏等在 vim 中完成的

```
 "BAR.MDF.MODEL" : "10.1.1.1", 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:31:27.527

试试这是否适合你。只有`awk`.

假设以下数据`infile`

```
define host{
    use         generic-switch
    host_name   BAR.MDF.MODEL
    alias       BAR.MDF.MODEL
    parents     FOO.MDF.MODEL.01
    address     10.1.1.1
    }
define host{
    use         generic-switch
    host_name   BAR.MDF.MODEL.2
    alias       BAR.MDF.MODEL
    parents     FOO.MDF.MODEL.01
    address     10.1.1.2
    }
define host{
    use         generic-switch
    host_name   BAR.MDF.MODEL.3
    alias       BAR.MDF.MODEL
    parents     FOO.MDF.MODEL.01
    address     10.1.1.3
    } 
```

运行此`awk`脚本：

```
awk '
    BEGIN { print "ipaddresses = {"; } 
    $1 == "host_name" { 
        hostname = "\"" $2 "\""; 
        next; 
    } 
    $1 == "address" { 
        address = "\"" $2 "\"";
        printf "\t%s : %s,\n", hostname, address;
    } 
    END {
        printf "}\n";
    }
' switch.cfg 
```

这会产生：

```
ipaddresses = {
        "BAR.MDF.MODEL" : "10.1.1.1",
        "BAR.MDF.MODEL.2" : "10.1.1.2",
        "BAR.MDF.MODEL.3" : "10.1.1.3",
} 
```

# javascript - Redis MULTI 事务在 NodeJS 中的 EXEC 回调中随机返回 null

> ID：12762016
> 
> 赞同：1
> 
> 时间：2012-10-06T17:20:59.550
> 
> 标签：javascript, node.js, transactions, redis, node-redis

我有一个问题，EXEC 的回调随机返回一些值作为`null`s.

该代码在大多数情况下都可以正常工作，但是它会随机失败（或者如果我反复刷新浏览器）...

这是代码减少到失败的程度：

```
var transaction = client.multi();
reply.forEach(function (id) { // reply always equals [ 'mykey1', 'mykey2' ]
  transaction.hgetall(namespace + ":" + id);
});
transaction.exec(function (err, replies) {
  // 'replies' sometimes returns all the responses properly,
  // other times it returns some of the values as null
  // See the examples I wrote below
}); 
```

当它工作正常时， exec 回调将返回：

```
[{
  owner: '123',
  id: 'asdasdasd',
  name: 'asdasdasd',
  created_at: '2012-10-06T09:26:25.596Z',
  updated_at: '2012-10-06T09:28:54.929Z'
},
{
  owner: '456',
  id: 'asdfsdfasdf',
  name: 'asdfsdfasdf',
  created_at: '2012-10-06T09:27:19.251Z',
  updated_at: '2012-10-06T09:28:03.116Z'
}] 
```

当它不起作用时，它会返回：（注意`null`值）

```
[{
  owner: '123',
  id: 'asdasdasd',
  name: 'asdasdasd',
  created_at: '2012-10-06T09:26:25.596Z',
  updated_at: '2012-10-06T09:28:54.929Z'
}, null] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:05:33.810

你的redis版本是多少？

即使某些命令未能排队，2.6.5 之前的版本也会执行事务 - 您需要检查事务块内的每个命令是否失败（使用回调的错误参数）。

如果您使用的是 redis 2.6.5 或更高版本，带有未正确排队的命令的事务的 EXEC 命令将返回错误，所以这不应该是您的情况，并且可能的解释是某些竞争条件或不存在的键，如上面推荐中所暗示的. hgetall 的“null”回复意味着密钥不存在 - 所以在执行事务时它可能真的不存在？

# php - 注意：我的数据库中所有字段的未定义索引

> ID：12762017
> 
> 赞同：0
> 
> 时间：2012-10-06T17:21:02.250
> 
> 标签：php, database, undefined

我的脚本有问题，它是几年前在 Uni 中为作业创建的，当时它运行良好，但我没有收到此通知，现在对于每个字段，我都会收到“通知：未定义索引”。

我读过这与未能声明变量有关，我需要起诉 isset 吗？但我仍然不确定如何在代码中实现它。

这是代码：

```
<?php
require 'server.php';

$results = $dbh->prepare('SELECT * FROM details WHERE id = :id');
$results->execute(array(
     ':id' => $_GET['id'],
     ));

if (isset($_POST['submit'] )) header("Location: template/header.php"); {
    $update = $dbh->prepare('UPDATE details SET firstname = :firstname, surname = :surname, houseno = :houseno, street = :street, town= :town,
           county = :county, postcode = :postcode,  mobile = :mobile, nickname = :nickname, website = :website,
           homephone = :homephone WHERE id = :id');
    $update->execute(array(
        ':id' => $_POST['id'],
        ':firstname' => $_POST['firstname'],
        ':surname' => $_POST['surname'],
        ':houseno' => $_POST['houseno'],
        ':street' => $_POST['street'],
        ':town' => $_POST['town'],
        ':county' => $_POST['county'],
        ':postcode' => $_POST['postcode'],
        ':mobile' => $_POST['mobile'],
        ':nickname' => $_POST['nickname'],
        ':website' => $_POST['website'],
        ':homephone' => $_POST['homephone'],    
    ));

    $row = $results->fetch();
}

require 'template/header.php';
?> 
```

关于如何解决问题的任何想法？图片在这里：

[https://dl.dropbox.com/u/10062971/phpnotice.JPG](https://dl.dropbox.com/u/10062971/phpnotice.JPG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:15:26.843

在使用或`isset`上的任何索引之前，用于检查它们是否存在。 `$_POST``$_GET`

```
if (isset($_GET['id'])) {
  $results->execute(array(
    ':id' => $_GET['id'],
  ));
}

...

':id' => isset($_POST['id']) ? $_POST['id'] : '',
':firstname' => isset($_POST['firstname']) ? $_POST['firstname'] : '',
// and so on
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:27:32.713

您的代码没有任何意义：`$_POST['submit'] )`设置时，您重定向到另一个页面，因此使用`POST`变量的代码将在`$_POST['submit'] )`未设置时运行。

这就是 php 的样子：

```
if (isset($_POST['submit'] ))
{
   header("Location: template/header.php");
}

$update = $dbh->prepare('UPDATE details SET firstname = :firstname, surname = :surname, houseno = :houseno, street = :street, town= :town,
       county = :county, postcode = :postcode,  mobile = :mobile, nickname = :nickname, website = :website,
       homephone = :homephone WHERE id = :id');
$update->execute(array(
    ':id' => $_POST['id'],
    ':firstname' => $_POST['firstname'],
    ':surname' => $_POST['surname'],
    ':houseno' => $_POST['houseno'],
    ':street' => $_POST['street'],
    ':town' => $_POST['town'],
    ':county' => $_POST['county'],
    ':postcode' => $_POST['postcode'],
    ':mobile' => $_POST['mobile'],
    ':nickname' => $_POST['nickname'],
    ':website' => $_POST['website'],
    ':homephone' => $_POST['homephone'],    
));

$row = $results->fetch(); 
```

究竟是什么`header`呼吁？

顺便说一句，你可能想要这样的东西：

```
require 'server.php';

if (isset($_POST['submit'] ))
{
  $update = $dbh->prepare('UPDATE details SET firstname = :firstname, surname = :surname, houseno = :houseno, street = :street, town= :town,
       county = :county, postcode = :postcode,  mobile = :mobile, nickname = :nickname, website = :website,
       homephone = :homephone WHERE id = :id');
  $update->execute(array(
    ':id' => $_POST['id'],
    ':firstname' => $_POST['firstname'],
    ':surname' => $_POST['surname'],
    ':houseno' => $_POST['houseno'],
    ':street' => $_POST['street'],
    ':town' => $_POST['town'],
    ':county' => $_POST['county'],
    ':postcode' => $_POST['postcode'],
    ':mobile' => $_POST['mobile'],
    ':nickname' => $_POST['nickname'],
    ':website' => $_POST['website'],
    ':homephone' => $_POST['homephone'],    
  ));

  // show message or something
}
else
{
  // normal get request, nothing posted
  $results = $dbh->prepare('SELECT * FROM details WHERE id = :id');
  $results->execute(array(':id' => $_GET['id'],
     ));
  $row = $results->fetch();

  // show rest of the page
} 
```

# php - 如何在 PHP 的特定行中插入值

> ID：12762022
> 
> 赞同：0
> 
> 时间：2012-10-06T17:21:19.423
> 
> 标签：php, insert

我有以下数组描述我的表头：

```
$aColumns = array( 'time1.Time', 'time2.Time' , 'time1.id' , 'time1.Signal' , 'v.Name' , 'v.Lastname'  ); 
```

我想在`time1.id`列中插入新值。

当我处理以下代码时，我的数据显示在第一列中`time1.Time`，我需要它在列中，`time1.id`为什么会发生这种情况？

这是代码：

```
if ( mysql_num_rows( $rResult ) > 0 )
    {
        $aCols = array_keys( mysql_fetch_assoc( $rResult ) );
        mysql_data_seek($rResult, 0);
        $id= array_search( 'time1.id', $aCols );        
        $value= "NEW_VALUE";

        while ( $aRow = mysql_fetch_row( $rResult ) ) 
        { 
            $aRow[$id] = $value;
            $aOutput['aaData'][] = $aRow; 
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:07:01.030

尝试使用`id`作为列名而不是`time1.id`. 通常只有列名作为结果数组中的键返回，即使您已在选择字段中指定了表名。

```
$id= array_search( 'id', $aCols ); 
```

# adobe-analytics - 为什么我们的 SiteCatalyst 搜索报告显示“N/A”值

> ID：12762026
> 
> 赞同：1
> 
> 时间：2012-10-06T17:21:38.737
> 
> 标签：adobe-analytics

我们公司有一个“流量来源”报告，显示“搜索关键字 - 全部”按转换变量分解，该变量使用 crossVisitParticipation 和 channelManager 插件/功能从搜索引擎“堆叠”关键字。转换变量和引用 url 正确传输到 Omniture（我通过 SC 调试器验证了这一点）。

问题是当我们选择“搜索”指标时，值显示为“N/A”。为什么会发生这种情况？我们有什么配置错误吗？

这是我们报告的照片：

[http://i.imgur.com/79x3g.jpg](http://i.imgur.com/79x3g.jpg)

这是一个类似的报告，其中包含按页排列的关键字堆栈。它有同样的问题。

[http://i.imgur.com/iQhbK.jpg](http://i.imgur.com/iQhbK.jpg)

这是设置转换变量的 javascript 代码片段：

```
var o=s.channelManager(false);
if(typeof o != 'undefined' && o.keyword != 'n/a' && o) {
s.eVar24=s.crossVisitParticipation(o.keyword,'s_kw','90','9',' > ','event4,purchase,1'); 
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:15:16.853

The issue is exactly what Adam Greco wrote up there. The 'Searches' metric is the same as the instances metric. Neither of which are subrelated, which means the metric relates only to the conversion variable it is set against.

So when you do a breakdown on your Search Keywords by the Keyword Stack the Searches metric doesn't apply to the Stack values on rows below - thus n/a, or 'not applicable'.

Try adding the Visits metric instead.

# ios - NSURLConnection JSON 提交到服务器

> ID：12762027
> 
> 赞同：10
> 
> 时间：2012-10-06T17:21:48.617
> 
> 标签：ios, ruby, json, nsurlconnection

我在这里不知所措，我想我会为我的应用程序尝试一些新的网络服务。

我可以将数据拉下来没问题，但我正在尝试发布到服务器并且似乎可以让它甚至触发。

我打算发生的是在提交按钮上按下动作被触发：

```
- (IBAction)didPressSubmit:(id)sender {

     //JSON SERIALIZATION OF DATA
     NSMutableDictionary *projectDictionary = [NSMutableDictionary dictionaryWithCapacity:1];
    [projectDictionary setObject:[projectName text] forKey:@"name"];
    [projectDictionary setObject:[projectDescShort text] forKey:@"desc_short"];
    [projectDictionary setObject:[projectDescLong text] forKey:@"desc_long"];

    NSError *jsonSerializationError = nil;
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:projectDictionary options:NSJSONWritingPrettyPrinted error:&jsonSerializationError];

    if(!jsonSerializationError) {
        NSString *serJSON = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
        NSLog(@"Serialized JSON: %@", serJSON);
    } else {
        NSLog(@"JSON Encoding Failed: %@", [jsonSerializationError localizedDescription]);
    }

    // JSON POST TO SERVER
    NSURL *projectsUrl = [NSURL    URLWithString:@"http://70.75.66.136:3000/projects.json"];
    NSMutableURLRequest *dataSubmit = [NSMutableURLRequest requestWithURL:projectsUrl cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];
    [dataSubmit setHTTPMethod:@"POST"]; // 1
    [dataSubmit setValue:@"application/json" forHTTPHeaderField:@"Accept"]; // 2
    [dataSubmit setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"]; // 3
    [dataSubmit setHTTPBody: jsonData];

     [[NSURLConnection alloc] initWithRequest:dataSubmit delegate:self];
} 
```

之后它运行：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    NSLog(@"DidReceiveResponse");

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
    NSLog(@"DidReceiveData");
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
   [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    UIAlertView *errorView = [[UIAlertView alloc] initWithTitle:@"Error" message:@"BLAH CHECK YOUR NETWORK" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [errorView show];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

我显然错过了一些东西，但我什至不知道在哪里看。我所需要的只是指向正确的方向，任何帮助都会很棒。

**更新**

我能够通过以下方式获得触发请求。

好的，我能够使用以下命令触发请求：

```
- (IBAction)didPressSubmit:(id)sender {

    NSMutableDictionary *projectDictionary = [NSMutableDictionary dictionaryWithCapacity:1];
    [projectDictionary setObject:[projectName text] forKey:@"name"];
    [projectDictionary setObject:[projectDescShort text] forKey:@"desc_small"];
    [projectDictionary setObject:[projectDescLong text] forKey:@"desc_long"];

    NSError *jsonSerializationError = nil;
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:projectDictionary options:NSJSONWritingPrettyPrinted error:&jsonSerializationError];

    if(!jsonSerializationError) {
        NSString *serJSON = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
        NSLog(@"Serialized JSON: %@", serJSON);
    } else {
        NSLog(@"JSON Encoding Failed: %@", [jsonSerializationError localizedDescription]);
    }

    NSURL *projectsUrl = [NSURL URLWithString:@"http://70.75.66.136:3000/projects.json"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:projectsUrl cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];
    [request setHTTPMethod:@"POST"]; // 1
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"]; // 2
    [request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"]; // 3
    [request setHTTPBody: jsonData]; // 4

    (void) [[NSURLConnection alloc] initWithRequest:request delegate:self];

} 
```

但由于某种原因，post 方法只收到了一堆 nil 值，我是从服务器端得到的。`Processing by ProjectsController#create as JSON Parameters: {"{\n \"desc_long\" : \"a\",\n \"name\" : \"a\",\n \"desc_small\" : \"a\"\n}"=>nil}`

**更新 2**

从这里读一点： http: [//elusiveapps.com/blog/2011/04/ios-json-post-to-ruby-on-rails/](http://elusiveapps.com/blog/2011/04/ios-json-post-to-ruby-on-rails/)

我能够查看是否错过了以下行。 `[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];`

所以最终的 didPressSubmit 代码如下；

```
- (IBAction)didPressSubmit:(id)sender {

    NSMutableDictionary *projectDictionary = [NSMutableDictionary dictionaryWithCapacity:1];
    [projectDictionary setObject:[projectName text] forKey:@"name"];
    [projectDictionary setObject:[projectDescShort text] forKey:@"desc_small"];
    [projectDictionary setObject:[projectDescLong text] forKey:@"desc_long"];

    NSError *jsonSerializationError = nil;
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:projectDictionary options:NSJSONWritingPrettyPrinted error:&jsonSerializationError];

    if(!jsonSerializationError) {
        NSString *serJSON = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
        NSLog(@"Serialized JSON: %@", serJSON);
    } else {
        NSLog(@"JSON Encoding Failed: %@", [jsonSerializationError localizedDescription]);
    }

    NSURL *projectsUrl = [NSURL URLWithString:@"http://70.75.66.136:3000/projects.json"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:projectsUrl cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];
    [request setHTTPMethod:@"POST"]; // 1
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"]; // 2
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"]; // 3
    [request setHTTPBody: jsonData]; // 4

    (void) [[NSURLConnection alloc] initWithRequest:request delegate:self];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:23:32.163

我遇到了同样的问题，但我通过将选项设置为 nil 来解决它。

代替

```
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:projectDictionary options:NSJSONWritingPrettyPrinted error:&jsonSerializationError]; 
```

经过

```
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:projectDictionary options:nil error:&jsonSerializationError]; 
```

如果您正在向服务器发送 json，请使用选项 to `nil`，如果您正在显示 json use `NSJSONWritingPrettyPrinted`。

希望这会帮助你。

# ios - GKTurnBasedMatch：无法获取/设置匹配结果

> ID：12762029
> 
> 赞同：0
> 
> 时间：2012-10-06T17:22:06.447
> 
> 标签：ios, xcode, cocoa-touch, game-center

我正在开发基于游戏中心的棋盘游戏。一切似乎都在运行，到处都有一些错误和怪癖。这些怪癖中最令人讨厌的是，在观看已结束的比赛时，似乎总是认为观看的玩家输了。

当我以赢得比赛的举动结束比赛时，我运行以下命令：

```
// Act if the game is over because of that move
if ([board playerHasWon:activePlayer]) {
    board.canMove = NO;
    match = [CNFTurnBasedMatchHelper sharedInstance].currentMatch;
    NSUInteger currentIndex = [match.participants indexOfObject:match.currentParticipant];
    NSUInteger nextIndex = (currentIndex == 0 ? 1 : 0);
    GKTurnBasedParticipant *nextParticipant = [match.participants objectAtIndex:nextIndex];
    match.currentParticipant.matchOutcome = GKTurnBasedMatchOutcomeWon;
    nextParticipant.matchOutcome = GKTurnBasedMatchOutcomeLost;
    [match endMatchInTurnWithMatchData:[[board stringValue] dataUsingEncoding:NSUTF8StringEncoding] completionHandler:nil];
} 
```

但是，我怀疑真正的问题在于我对 matchOutcome 的检索。

加载比赛时，如果不是当前玩家轮到，我会运行它：

```
if (match.status == GKTurnBasedMatchStatusEnded) {
    // These lines get the board to show the winning line
    [board playerHasWon:1];
    [board playerHasWon:2];
    board.canMove = NO;
    if (match.currentParticipant.matchOutcome == GKTurnBasedMatchOutcomeWon) statusLabel.text = @"You won!";
    else statusLabel.text = @"You lost!";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:33:11.497

好吧，我只是通过真正的布局解决了我自己的问题。

```
if ([((GKTurnBasedParticipant*)[match.participants objectAtIndex:0]).playerID isEqualToString:[GKLocalPlayer localPlayer].playerID]) {
    if ([board playerHasWon:1]) statusLabel.text = @"You won!";
    else statusLabel.text = @"You lost!";
}
else {
    if ([board playerHasWon:2]) statusLabel.text = @"You won!";
    else statusLabel.text = @"You lost!";
} 
```

# vb.net - 从“DBNull”类型到“Decimal”类型的转换无效。- Datagridview 从数据库加载数据时的问题

> ID：12762034
> 
> 赞同：0
> 
> 时间：2012-10-06T17:22:25.660
> 
> 标签：vb.net

我正在尝试将数据加载到 Visual Basic 中的 datagridview 中，但出现此错误。

从“DBNull”类型到“Decimal”类型的转换无效。- Datagridview 从数据库加载数据时出现问题，

请在写回复时记住我是一个完整的新手。

顺便说一句，我尝试在某些 .ToString 的 Value 之后添加

```
Private Sub DataGridView1_CellContentClick(sender As Object, e As DataGridViewCellEventArgs) Handles DataGridView1.CellContentClick
    Dim i As Integer

    Me.TextBox1.Text = DataGridView1.Item(0, i).Value.ToString
    Me.TextBox8.Text = DataGridView1.Item(1, i).Value.ToString
    Me.TextBox9.Text = DataGridView1.Item(2, i).Value.ToString
    Me.TextBox11.Text = DataGridView1.Item(3, i).Value.ToString
    'valoren_code'
    Me.TextBox3.Text = DataGridView1.Item(4, i).Value.ToString
    Me.TextBox13.Text = DataGridView1.Item(5, i).Value.ToString
    Me.TextBox15.Text = DataGridView1.Item(6, i).Value.ToString
    Me.TextBox14.Text = DataGridView1.Item(7, i).Value.ToString
    Me.NumericUpDown6.Value = DataGridView1.Item(8, i).Value.ToString
    Me.DateTimePicker2.Text = DataGridView1.Item(9, i).Value.ToString
    Me.ComboBox1.SelectedItem = DataGridView1.Item(10, i).Value.ToString
    Me.ComboBox8.SelectedItem = DataGridView1.Item(11, i).Value.ToString
    Me.ComboBox2.SelectedItem = DataGridView1.Item(12, i).Value.ToString
    Me.ComboBox3.SelectedItem = DataGridView1.Item(13, i).Value.ToString
    Me.ComboBox4.SelectedItem = DataGridView1.Item(14, i).Value.ToString
    Me.ComboBox5.SelectedItem = DataGridView1.Item(15, i).Value.ToString
    Me.ComboBox6.SelectedItem = DataGridView1.Item(16, i).Value.ToString
    Me.ComboBox7.SelectedItem = DataGridView1.Item(17, i).Value.ToString
    Me.ListBox1.SelectedItem = DataGridView1.Item(18, i).Value.ToString
    Me.NumericUpDown8.Text = DataGridView1.Item(19, i).Value.ToString
    Me.NumericUpDown7.Text = DataGridView1.Item(20, i).Value.ToString
    Me.NumericUpDown5.Text = DataGridView1.Item(21, i).Value.ToString
    Me.NumericUpDown13.Text = DataGridView1.Item(22, i).Value.ToString
    Me.NumericUpDown14.Value = DataGridView1.Item(23, i).Value.ToString
    'mid_trade_clean_price_proximity
    Me.NumericUpDown15.Value = DataGridView1.Item(24, i).Value.ToString
    Me.NumericUpDown16.Value = DataGridView1.Item(25, i).Value
    Me.TextBox2.Text = DataGridView1.Item(26, i).Value.ToString
    Me.ListBox3.SelectedItem = DataGridView1.Item(27, i).Value.ToString
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:25:20.933

`DBNull.Value`表示数据库已返回`NULL`特定行/列。

这不是可以分配给 a 的值`Decimal`，因此会出现错误。

现在，您可以`Nothing`在 get 时使用`DBNull.Value`，但同样，这不是您可以分配给 a 的东西，`Decimal`因为它是一个值类型（并且所有值类型都有一个值并且不能分配给 a `Nohthing`）。

使用*可空* `Decimal`值-`Decimal?`它*可以*取值`Nothing`。或者，测试返回的值以查看它是否是`DBNull.Value`，如果是，请不要分配给您的`Decimal`（默认为`0.0`，因此您需要确定您的应用程序的正确行为是什么）。

# c# - datagridview 单元格点击事件

> ID：12762036
> 
> 赞同：8
> 
> 时间：2012-10-06T17:22:35.910
> 
> 标签：c#, datagridview, cell

我有一个数据网格视图中的单元格单击事件，以在消息框中显示单击的单元格中的数据。我将其设置为仅适用于特定列并且仅当单元格中有数据时

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if (dataGridView1.CurrentCell.ColumnIndex.Equals(3))
        if (dataGridView1.CurrentCell != null && dataGridView1.CurrentCell.Value != null)
            MessageBox.Show(dataGridView1.CurrentCell.Value.ToString());
} 
```

但是，每当我单击任何列标题时，都会出现一个空白消息框。我不知道为什么，有什么提示吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-06T18:18:14.580

您还需要检查单击的单元格不是列标题单元格。像这样：

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if (dataGridView1.CurrentCell.ColumnIndex.Equals(3) && e.RowIndex != -1){
        if (dataGridView1.CurrentCell != null && dataGridView1.CurrentCell.Value != null)
            MessageBox.Show(dataGridView1.CurrentCell.Value.ToString());   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T17:33:30.930

检查那`CurrentCell.RowIndex`不是标题行索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T21:25:01.240

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{    
    if (e.RowIndex == -1) return; //check if row index is not selected
        if (dataGridView1.CurrentCell.ColumnIndex.Equals(3))
            if (dataGridView1.CurrentCell != null && dataGridView1.CurrentCell.Value != null)
                MessageBox.Show(dataGridView1.CurrentCell.Value.ToString());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-19T18:12:28.060

接受的解决方案抛出“对象未设置为对象的实例”异常，因为空引用检查必须在检查变量的实际值之前进行。

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{    
    if (dataGridView1.CurrentCell == null ||
        dataGridView1.CurrentCell.Value == null ||
        e.RowIndex == -1) return;
    if (dataGridView1.CurrentCell.ColumnIndex.Equals(3))
        MessageBox.Show(dataGridView1.CurrentCell.Value.ToString());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-16T03:17:17.970

试试这个

```
 if(dataGridView1.Rows.Count > 0)
            if (dataGridView1.CurrentCell.ColumnIndex == 3)
                MessageBox.Show(dataGridView1.CurrentCell.Value.ToString()); 
```

# c - 获取C中变量的最大值

> ID：12762040
> 
> 赞同：12
> 
> 时间：2012-10-06T17:23:01.847
> 
> 标签：c

C 中是否有一个函数可以返回像这样的变量的最大值（我将在下面的示例中将函数命名为“maxvalue”）？

```
int a;
printf("%d", maxvalue(a)); // 32767
unsigned int b;
printf("%d", maxvalue(b)); // 65535 
```

因此，基本上该函数返回值，例如`INT_MAX`当变量是有符号 INT 时，UINT_MAX 时是无符号 int 等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T17:28:23.200

C 标准库没有定义这样的函数。您可以尝试定义一个计算它的宏：

```
#define MAX_VALUE(a) (((unsigned long long)1 << (sizeof(a) * CHAR_BIT)) - 1) 
```

使用它时，请注意将其分配给足够大的类型。例如：

```
#include <stdlib.h>
#include <stdio.h>
#include <limits.h>

#define IS_TYPE_SIGNED(a) ((a-1) < 0)
#define MAX_VALUE_UNSIGNED(a) (((unsigned long long)1 << \
        (sizeof(a) * CHAR_BIT)) - 1)
#define MAX_VALUE_SIGNED(a) (MAX_VALUE_UNSIGNED(a) >> 1)
#define MAX_VALUE(a) (IS_TYPE_SIGNED(a) ? \
        MAX_VALUE_SIGNED(a) : MAX_VALUE_UNSIGNED(a))

int main(void)
{
    unsigned int i = 0;
    signed int j = 0;

    printf("%llu\n", MAX_VALUE(i));
    printf("%llu\n", MAX_VALUE(j));
    return EXIT_SUCCESS;
} 
```

这打印出来：

```
4294967295
2147483647 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-06T17:31:00.860

[您可以使用C11 类型泛型表达式](http://en.wikipedia.org/wiki/C11_%28C_standard_revision%29#Changes_from_C99)很容易地做到这一点：

```
#define maxvalue(type) _Generic(type, int: INT_MAX, \
                                      unsigned int: UINT_MAX) 
```

它不是一个功能，但我认为它可以满足您的需求。这是一个简单的示例程序：

```
#include <stdio.h>
#include <limits.h>

#define maxvalue(type) _Generic(type, int: INT_MAX, \
                                      unsigned int: UINT_MAX)

int main(void)
{
    int i;
    unsigned int ui;

    printf("%u\n", maxvalue(i));
    printf("%u\n", maxvalue(ui));

    return 0;
} 
```

及其输出：

```
$ clang -Wall -Werror -Wextra -pedantic -std=c11 example.c -o example
$ ./example 
2147483647
4294967295 
```

我的答案比你的大，因为我的系统有 32 位整数。您似乎有一台 16 位机器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-06T20:24:42.423

以下是我的库中适用于类型而不是变量的宏：

```
/* min and max integer values.  T is a signed or unsigned integer type. */

/* Returns 1 if T is signed, else 0\. */
#define INTTYPE_SIGNED(T) ((T)-1 < (T)0)

/*
 * Returns (T)(maximum value of a T).
 *
 * Pains are taken (perhaps unnecessarily) to avoid integer overflow
 * with signed types.
 */
#define INTTYPE_MAX(T)                      \
    (((T)1 << (CHAR_BIT*sizeof(T)-INTTYPE_SIGNED(T)-1)) - 1 +   \
     ((T)1 << (CHAR_BIT*sizeof(T)-INTTYPE_SIGNED(T)-1)))

/*
 * Returns (T)(minimum value of a T).

 * Pains are taken (perhaps unnecessarily) to avoid integer overflow
 * with signed types.
 * assert: twos complement architecture
 */
#define INTTYPE_MIN(T) ((T)(-INTTYPE_MAX(T)-1)) 
```

编辑：使这些适应问题：

```
/* min and max integer values.  V is a signed or unsigned integer value. */

/* Returns 1 if V has signed type, else 0\. */
#define INT_VALUE_SIGNED(V) ((V)-(V)-1 < 0)

/*
 * Returns maximum value for V's type.
 *
 * Pains are taken (perhaps unnecessarily) to avoid integer overflow
 * with signed types.
 */
#define INT_VALUE_MAX(V)                        \
    (((V)-(V)+1 << (CHAR_BIT*sizeof(V)-INT_VALUE_SIGNED(V)-1)) - 1 +    \
     ((V)-(V)+1 << (CHAR_BIT*sizeof(V)-INT_VALUE_SIGNED(V)-1)))

/*
 * Returns minimum value for V's type.

 * Pains are taken (perhaps unnecessarily) to avoid integer overflow
 * with signed types.
 * assert: twos complement architecture
 */
#define INT_VALUE_MIN(V) (-INT_VALUE_MAX(V)-1) 
```

事后思考：如果 V 是一个变量，或者一个包含变量的表达式，这些变量没有被赋值，那么这些调用 UB ......这就是所问问题的情况。它们可能适用于许多实现，但 C 标准不保证这一点，并且它们肯定会在使用陷阱值初始化未初始化变量的实现上失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-28T08:40:25.870

可以使用 ANSI C 89 轻松完成：

```
 #include<stdio.h>
    #include<limits.h>

int main(void) {

printf("Max value of char: %d\n", CHAR_MAX);
printf("Min value of char: %d\n", CHAR_MIN);

printf("Max value of short: %d\n", SHRT_MAX);
printf("Min value of short: %d\n", SHRT_MIN);

printf("Max value of int: %d\n", INT_MAX);
printf("Min value of int: %d\n", INT_MIN);

printf("\n\n");
return 0;
} 
```

请注意，您可以包含 float.h 然后使用：

```
printf("Max value of Double: %d\n", DBL_MAX); 
```

虽然，它不太推荐。

祝你好运，罗恩

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T17:25:22.280

不，标准 C 实现中不存在这样的功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T17:53:40.787

您无法创建执行此操作的函数，但您可以创建一些执行此操作的宏。

如果你有 C11，你可以使用[_Generic](http://www.robertgamble.net/2012/01/c11-generic-selections.html)：

```
#define maxvalue(x) \
  _Generic(x, \
      char: 127, short: 32767, int: INT_MAX, \
      unsigned char: 255, unsigned short: 65535, unsigned int: UINT_MAX) 
```

如果您需要 C89，如果您可以区分有符号/无符号，则可以这样做：

```
#define maxvalue_unsigned(x) ((1<<(8*sizeof(x)))-1)
#define maxvalue_signed(x) ((1<<((8*sizeof(x)-1)))-1) 
```

如果您愿意要求 typename （或使用 GCC-specific `typename`），您可以使用字符串：

```
#define maxvalue_type(x) maxvalue_helper(#x "----------")
unsigned long long maxvalue_helper(const char *s) {
  switch(*s){
  char 'c': /* char */ return 127;
  char 's': /* short */ return 32767;
  char 'i': /* int */ return INT_MAX;
  /* ... */
  case 'u': /* unsigned */
    switch(9[s]) {
    case 'c': /* unsigned char */ return 255;
    char 's': /* unsigned short */ return 65535;
    char 'i': /* unsigned int */ return UINT_MAX;
    /* ... */ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-07T13:58:10.527

看起来我已经能够想出一个相对易于使用的宏，`SIGNED_VAR(VAR)`来测试给定的整数变量是否通过修改、比较和恢复变量的值来签名（所有这些只对小于的类型是必需的`int`）同时避免未定义的行为，特别是与有符号溢出和序列点相关的类型。或者看起来是这样。至少，gcc（用 调用`-Wall`）并没有抱怨我在`&&`and`||`运算符之间做疯狂的事情，尽管它不喜欢在三元`?:`运算符周围做同样的事情。

这个宏的好处是它应该与 C89 和 C99 编译器一起使用（如果您的 C89 编译器没有 C99 的扩展类型，`1LL`则可以替换为`1L`，`long long`也可以替换为 just `long`（当然，也可以`"%ll"`替换为））而且它也正确支持小于(和) 的类型。`"%l"``long long``int``char``short`

一旦我们知道变量是否有符号，构造最小值和最大值就很简单了，许多人已经展示了如何做到这一点。宏`VAR_MAX()`并`VAR_MIN()`构造这些值并将它们作为最长的 C99 整数类型返回`long long`。在将无符号值转换为有符号时，我选择返回有符号类型以避免潜在的溢出/UB 问题。由于返回的类型`long long`不能直接将`unsigned long long`( `ULLONG_MAX`) 的最大值表示为有符号值，因此如果需要返回该值，则返回一个 -1 ，在强制转换为之后`unsigned long long`将产生`ULLONG_MAX`。你需要在这里小心一点。

丑陋就在这里。希望，我没有错过任何错误。

哦，当然，有符号类型（例如 min=-128，max=+127）支持 2 的补码的整个不对称范围。

**编辑**：我忘了提到`SIGNED_VAR()`期望变量被初始化。否则，读取它可能会导致未定义的行为。

```
// file: IntVarMinMax.c
// compile: gcc -Wall -std=c99 -O2 IntVarMinMax.c -o IntVarMinMax.exe
#include <stdio.h>
#include <stdlib.h>
#include <limits.h>

int SignTestTestVal;
unsigned char SignTestOriginalXchar;
unsigned short SignTestOriginalXshort;

signed char SignTestRestoreOriginalXchar(void)
{
  if (SignTestOriginalXchar < SCHAR_MAX + 1u)
    return (signed char)SignTestOriginalXchar;
  return (signed char)(SignTestOriginalXchar - SCHAR_MAX - 1) - SCHAR_MAX - 1;
}

short SignTestRestoreOriginalXshort(void)
{
  if (SignTestOriginalXshort < SHRT_MAX + 1u)
    return (short)SignTestOriginalXshort;
  return (short)(SignTestOriginalXshort - SHRT_MAX - 1) - SHRT_MAX - 1;
}

#define IFELSE(E1,E2,E3) (((E1) && (E2)) || (!(E1) && (E3)))
#define SEQ(E1,E2) (((E1) && (E2)) || (E2))

#define SIGNED_VAR(VAR)                                     \
(                                                           \
  IFELSE                                                    \
  (                                                         \
    sizeof(VAR) >= sizeof(int),                             \
    ((VAR) - (VAR) - 1 < 0),                                \
    IFELSE                                                  \
    (                                                       \
      sizeof(VAR) == sizeof(short),                         \
      SEQ(SignTestOriginalXshort = (VAR),                   \
          SEQ(SignTestTestVal = (VAR) = -1,                 \
              SEQ((VAR) = SignTestRestoreOriginalXshort(),  \
                  SignTestTestVal < 0))),                   \
      IFELSE                                                \
      (                                                     \
        sizeof(VAR) == sizeof(char),                        \
        SEQ(SignTestOriginalXchar = (VAR),                  \
            SEQ(SignTestTestVal = (VAR) = -1,               \
                SEQ((VAR) = SignTestRestoreOriginalXchar(), \
                    SignTestTestVal < 0))),                 \
        (fprintf(stderr, "unsupported type!"), exit(-1), 0) \
      )                                                     \
    )                                                       \
  )                                                         \
)

#define VAR_MAX(SIGNED,VAR)                                     \
(                                                               \
  SIGNED ?                                                      \
    ((1ll << (sizeof(VAR) * CHAR_BIT - 2)) - 1 +                \
     (1ll << (sizeof(VAR) * CHAR_BIT - 2))) :                   \
    (                                                           \
      (sizeof(VAR) < sizeof(long long)) ?                       \
        ((1ll << (sizeof(VAR) * CHAR_BIT - 1)) - 1 +            \
         (1ll << (sizeof(VAR) * CHAR_BIT - 1))) :               \
        (                                                       \
          (sizeof(VAR) == sizeof(long long)) ?                  \
            -1ll :                                              \
            (fprintf(stderr, "unsupported type!"), exit(-1), 0) \
        )                                                       \
    )                                                           \
)

#define VAR_MIN(SIGNED,VAR)                          \
(                                                    \
  SIGNED ?                                           \
    (-((1ll << (sizeof(VAR) * CHAR_BIT - 2)) - 1 +   \
       (1ll << (sizeof(VAR) * CHAR_BIT - 2))) - 1) : \
    0                                                \
)

int main(void)
{
  signed char sc = 1; char c = 2; unsigned char uc = 3;
  short ss = 4; unsigned short us = 5;
  int si = 6; unsigned int ui = 7;
  long sl = 8; unsigned long ul = 9;
  long long sll = 10; unsigned long long ull = 11;

#define PRINT_VARS()                             \
  printf("sc=%hhd, c=%hhu, uc=%hhu, "            \
         "ss=%hd, us=%hu, si=%d, ui=%u, "        \
         "sl=%ld, ul=%lu, sll=%lld, ull=%llu\n", \
         sc, c, uc,                              \
         ss, us, si, ui,                         \
         sl, ul, sll, ull)

#define TEST_VAR(VAR)                                       \
  {                                                         \
    int varIsSigned = SIGNED_VAR(VAR);                      \
    if (varIsSigned)                                        \
      printf("%lld <= " #VAR " <= %lld\n",                  \
             VAR_MIN(varIsSigned,VAR),                      \
             VAR_MAX(varIsSigned,VAR));                     \
    else                                                    \
      printf("%lld <= " #VAR " <= %llu\n",                  \
             VAR_MIN(varIsSigned,VAR),                      \
             (unsigned long long)VAR_MAX(varIsSigned,VAR)); \
  }

  PRINT_VARS();

  TEST_VAR(sc);
  TEST_VAR(c);
  TEST_VAR(uc);
  TEST_VAR(ss);
  TEST_VAR(us);
  TEST_VAR(si);
  TEST_VAR(ui);
  TEST_VAR(sl);
  TEST_VAR(ul);
  TEST_VAR(sll);
  TEST_VAR(ull);

  PRINT_VARS();

  return 0;
} 
```

输出（[ideone](http://ideone.com/anl4a)）：

```
sc=1, c=2, uc=3, ss=4, us=5, si=6, ui=7, sl=8, ul=9, sll=10, ull=11
-128 <= sc <= 127
-128 <= c <= 127
0 <= uc <= 255
-32768 <= ss <= 32767
0 <= us <= 65535
-2147483648 <= si <= 2147483647
0 <= ui <= 4294967295
-2147483648 <= sl <= 2147483647
0 <= ul <= 4294967295
-9223372036854775808 <= sll <= 9223372036854775807
0 <= ull <= 18446744073709551615
sc=1, c=2, uc=3, ss=4, us=5, si=6, ui=7, sl=8, ul=9, sll=10, ull=11 
```

# java - 了解两个不同的 pdf 是否是同一篇研究论文

> ID：12762045
> 
> 赞同：1
> 
> 时间：2012-10-06T17:23:06.677
> 
> 标签：java, pdf, hash

我正在考虑写一个简单的研究论文管理器。这个想法是有一个存储库，其中包含每篇论文的元数据

```
paper_id -> [title, authors, journal, comments...] 
```

由于有可能导入朋友的纸质转储会很好，我正在考虑如何生成论文的 paper_id：恕我直言，应该由 pdf 的文本生成，以保证两个不同的集合有相同的 ID 仅适用于相同的论文。目前，我使用 iText 库提取第一页的文本（删除可能的注释），并从文本中计算 simhash 足迹。主要问题是有时文本略有不同（是的，它发生了！例如[this](http://www.chato.cl/papers/boldi_2008_query_flow_graph.pdf)和[this](http://vigna.di.unimi.it/ftp/papers/QueryFlowGraph.pdf)）所以我想宽容。使用 simhash 我可以计算出与原始文档有多少相似之处，因此如果足迹不在 repo 中，我将不得不遍历集合以寻找“接近”的足迹。

我不相信这种方法，你能建议一些更好的方法来为这类文件生成签名（短的、数字的或字母数字的）吗？

**更新**我有这个想法：将第一页分成 8 个（或多或少）不重叠的正方形，覆盖所有页面，然后考虑每个正方形中的文本并生成一个 simhash 签名。最后，我将得到一个 8x64=512 位的签名，如果两篇论文的 simhash 签名集之间的差异之和低于某个阈值，我可以认为它们是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:46:44.233

如果您实际上有一个输入两个文本并返回其相似性度量的函数，则不必迭代整个存储库。给定一篇不在存储库中的文章，您可以只迭代*长度*大致相同的文章。例如，给定一篇有 1000 个字符的文章，您会将其与 950 到 1050 个字符的文章进行比较。为此，您需要有一个将范围映射到文章的数据结构，并且您必须微调范围的大小。范围太大 - 每个范围内的项目太多。范围太小 - 错过的可能性更高。

当然，这在某些极端情况下会失败。例如，如果您有两个文档，而第二个文档只是第一个被复制粘贴了两次：您可能希望它们被视为相等，但您甚至不会比较它们，因为它们的长度相差太大。也有一些方法可以解决这个问题，但你可能“不需要它”。

# java - 表达式 MVC2

> ID：12762049
> 
> 赞同：1
> 
> 时间：2012-10-06T17:23:33.233
> 
> 标签：java, spring-mvc

我在 Java MVC 中使用表达式
`<p>${i}</p>`
我定义了一个方法

```
public static String test(int i) {
    //
} 
```

我无法`test`在表达式中 调用方法`${test(i)}` 如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:54:50.550

这样做的方法是创建一个自定义标记库并创建一个表达式语言。

因此，您必须在 WEB-INF 文件夹中定义一个 tld（例如 /WEB-INF/my-functions.tld）

这个文件是一个 xml，它看起来像这样：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<taglib xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd"
    version="2.0">
   <tlib-version>1.0</tlib-version>
   <uri>http://www.your-domain.com/taglib</uri>
   <short-name>my-functions</short-name>
   <description>Whatever</description>
   <function>
       <name>writeHello</name>
       <function-class>your.package.YourClass</function-class>
       <function-signature>java.lang.String writeHello(java.lang.String)</function-signature>
   </function>   
</taglib> 
```

使用以下 java 代码：

```
package your.package;

public class YourClass {

    public static String writeHello(String name) {
         return "Hello " + name;
    }

} 
```

在你的 JSP 中你不能做这样的事情：

```
<%@ taglib prefix="my" uri="/WEB-INF/my-functions.tld" %>
...
${my:writeHello('toto')} 
```

将在您的页面上呈现“Hello toto”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:36:42.753

看看这个[例子](http://java.dzone.com/articles/calling-static-method-el)你就会知道你错过了什么。

# c# - 如何遍历整个gridview行，包括其他页面中的行？

> ID：12762051
> 
> 赞同：1
> 
> 时间：2012-10-06T17:23:45.227
> 
> 标签：c#, asp.net, loops, gridview, data-paging

我知道如何遍历网格视图行：

* * *

```
foreach (GridViewRow oItem in GridView1.Rows)
{
    //
} 
```

* * *

但我想要做的是循环整个gridview，包括其他页面中的行，如果我启用`paging`. 这个怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:36:29.827

@just_name，您需要记住，对 GridViewRow 等服务器端对象的任何操作都是处理数据的最糟糕方式。如果您需要任何数据驱动的操作 - 在数据源中进行，而不是在视图中进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T17:26:28.117

您可以使用`Cast<T>`或`OfType<T>`转换为`IEnumerable<T>`：

```
foreach (GridViewRow oItem in GridView1.Rows.OfType<GridViewRow>())
{
} 
```

或者：

```
foreach (GridViewRow oItem in GridView1.Rows.Cast<GridViewRow>())
{
} 
```

在这种情况下，两者都使用是正确的，因为`Rows`只包含`GridViewRow`. 但是您不应该注意到两种方法之间的区别：

1.  [`Cast<T>`](http://msdn.microsoft.com/en-us/library/bb341406.aspx)：*将*元素转换为指定的类型。

2.  [`OfType<T>`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)：根据指定类型*过滤元素。*

# jquery - 将imgs的宽度变量计算为div

> ID：12762052
> 
> 赞同：0
> 
> 时间：2012-10-06T17:24:10.370
> 
> 标签：jquery, wordpress, variables, width

我想用 Jquery 做一个轮播，而 img 的宽度是可变的。

我知道如何使用**FIX**宽度计算多个 img，但我不知道如何使用**VARIABLE**宽度计算以分配 div（在本例中为 sub_container）。

这是一个例子：

```
 <div id="container">
          <div id="sub_container" style="width:WIDTH FROM VARIABLE WIDTH OF IMAGES">          
             <img id="#number" width="200px" src="#">
             <img id="#number" width="240px" src="#">
             <img id="#number" width="150px" src="#">
             <img id="#number" width="500px" src="#">
          </div>
    </div> 
```

*记住*：容器的宽度来自窗口/浏览器的宽度。

你能帮助我吗？：/

非常非常感谢你！:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:27:23.693

你可以这样做：

```
$(function() {
   var width = 0;
   // Get all images in the sub container
   $("img","#sub_container").each(function () {
       // Add the width of each image
       width += $(this).width();
   });
   // Do whatever you want with the width
   $("#sub_container").width(width);
}); 
```

**工作示例：http:** [//jsfiddle.net/DZ9rF/](http://jsfiddle.net/DZ9rF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:28:36.703

尝试这个：

```
$.fn.sumWidths = function() {
    var sum = 0; 
    this.each(function() {
        sum += $(this).width();
    });
    return sum;
}; 
```

然后

```
$('#sub_container').width( $('#sub_container img').sumWidths() ); 
```

# asp.net - ASP.Net 如何杀死未使用的会话

> ID：12762054
> 
> 赞同：2
> 
> 时间：2012-10-06T17:24:26.260
> 
> 标签：asp.net, session

我们可以编写代码，当用户单击注销按钮或单击浏览器的关闭按钮时，我们可以终止会话，但有时用户可能会从我的站点转到另一个站点，或者突然浏览器崩溃并关闭，有时断电所以机器关闭. 如何处理这种情况并终止该特定用户的会话。什么是大型门户网站会话管理的最佳策略。如果有经验的开发人员指导我如何杀死未使用的会话并指导我为大型门户网站制定最佳策略和会话管理，我将很高兴。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:27:30.700

就我个人而言，我不会担心这些情况，而是让`IIS`处理会话以及何时超时。

您可以在`Web.Config`文件中更改它并更改`<sessionState>`超时属性。

```
<sessionState timeout="10"> 
```

[http://msdn.microsoft.com/en-us/library/h6bb9cz9(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/h6bb9cz9(v=vs.90).aspx)

[http://technet.microsoft.com/en-us/library/cc725820(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc725820(v=ws.10).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:29:56.073

您可以使用 Session.Abandon() 方法来终止会话，但是当用户离开您的站点时很难捕捉到。最好的方法之一是在 document.unload 事件上发送客户端请求。

# php - PHP：一个名为“静态”的类

> ID：12762064
> 
> 赞同：-1
> 
> 时间：2012-10-06T17:25:16.423
> 
> 标签：php, class, static

有没有办法解决以下问题：

```
class static extends parents {
    // etc
} 
```

其中“static”是类名，“parents”是合法的扩展类名。

以下引发此错误：

```
Parse error: syntax error, unexpected T_STATIC, expecting T_STRING 
```

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T17:29:10.443

static 是一个**关键字**。您不能将它们用作类名。在[php.net](http://php.net/manual/en/reserved.keywords.php)中明确说明。

> 这些词在 PHP 中具有特殊的含义。其中一些代表看起来像函数的东西，一些看起来像常量，等等——但实际上它们不是：它们是语言结构。您不能将以下任何单词用作**常量、类名、函数或方法** **名称**。将它们用作变量名通常是可以的，但可能会导致混淆。

# c# - 为什么在便携式库类中我无法实例化 ValidationContext 以及如何修复它？

> ID：12762071
> 
> 赞同：3
> 
> 时间：2012-10-06T17:25:37.490
> 
> 标签：c#, mvvm, inotifypropertychanged, portable-class-library, inotifydataerrorinfo

我正在便携式库类中创建我的域对象。那些应该实施`INotifyPropertChanged`和`INotifyDataErrorInfo`

所以，我的域类应该实现这个基类

```
public abstract class DomainObject : INotifyPropertyChanged, INotifyDataErrorInfo
{
    private ErrorsContainer<ValidationResult> errorsContainer;

    protected DomainObject() {}

    public event PropertyChangedEventHandler PropertyChanged;
    public event EventHandler<DataErrorsChangedEventArgs> ErrorsChanged;

    public bool HasErrors
    {
        get { return this.ErrorsContainer.HasErrors; }
    }

    protected ErrorsContainer<ValidationResult> ErrorsContainer
    {
        get
        {
            if (this.errorsContainer == null)
            {
                this.errorsContainer =
                    new ErrorsContainer<ValidationResult>(pn => this.RaiseErrorsChanged(pn));
            }

            return this.errorsContainer;
        }
    }

    public IEnumerable GetErrors(string propertyName)
    {
        return this.errorsContainer.GetErrors(propertyName);
    }

    protected void RaisePropertyChanged(string propertyName)
    {
        this.OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
    }

    protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        var handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, e);
        }
    }

    protected void ValidateProperty(string propertyName, object value)
    {
        if (string.IsNullOrEmpty(propertyName))
        {
            throw new ArgumentNullException("propertyName");
        }

        this.ValidateProperty(new ValidationContext(this, null, null) { MemberName = propertyName }, value);
    }

    protected virtual void ValidateProperty(ValidationContext validationContext, object value)
    {
        if (validationContext == null)
        {
            throw new ArgumentNullException("validationContext");
        }

        List<ValidationResult> validationResults = new List<ValidationResult>();
        Validator.TryValidateProperty(value, validationContext, validationResults);

        this.ErrorsContainer.SetErrors(validationContext.MemberName, validationResults);
    }

    protected void RaiseErrorsChanged(string propertyName)
    {
        this.OnErrorsChanged(new DataErrorsChangedEventArgs(propertyName));
    }

    protected virtual void OnErrorsChanged(DataErrorsChangedEventArgs e)
    {
        var handler = this.ErrorsChanged;
        if (handler != null)
        {
            handler(this, e);
        }
    }
} 
```

但我意识到在这一行

```
 this.ValidateProperty(new ValidationContext(this, null, null)
           { MemberName = propertyName }, value); 
```

我无法创建对象 ValidationContext 因为它没有任何构造函数。我该怎么做才能创建新的？

**更新** 根据我的智能感知，这包含。

```
#region Assembly System.ComponentModel.DataAnnotations.dll, v2.0.5.0
// C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETPortable\v4.0\Profile\Profile46\System.ComponentModel.DataAnnotations.dll
#endregion

using System;
using System.Collections.Generic;

namespace System.ComponentModel.DataAnnotations
{
    // Summary:
    //     Describes the context in which a validation check is performed.
    public sealed class ValidationContext
    {
        // Summary:
        //     Gets or sets the name of the member to validate.
        //
        // Returns:
        //     The name of the member to validate.
        public string DisplayName { get; set; }
        //
        // Summary:
        //     Gets the dictionary of key/value pairs that is associated with this context.
        //
        // Returns:
        //     The dictionary of the key/value pairs for this context.
        public IDictionary<object, object> Items { get; }
        //
        // Summary:
        //     Gets or sets the name of the member to validate.
        //
        // Returns:
        //     The name of the member to validate.
        public string MemberName { get; set; }
        //
        // Summary:
        //     Gets the object to validate.
        //
        // Returns:
        //     The object to validate.
        public object ObjectInstance { get; }
        //
        // Summary:
        //     Gets the type of the object to validate.
        //
        // Returns:
        //     The type of the object to validate.
        public Type ObjectType { get; }

        // Summary:
        //     Returns the service that provides custom validation.
        //
        // Parameters:
        //   serviceType:
        //     The type of the service to use for validation.
        //
        // Returns:
        //     An instance of the service, or null if the service is not available.
        public object GetService(Type serviceType);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:40:09.413

这是我们错过的。在 Visual Studio 2012 的早期版本中，IServiceProvider 不可用，因为它已从 Windows 应用商店应用程序中删除。由于便携式在下面建模的方式，这意味着没有其他平台组合可以公开它。这导致任何对它有依赖关系的东西都被删除，因此是 ValidationContext 构造函数。后来我们又把 IServiceProvider 加回来了，错过了这个构造函数。我已经在内部提交了一个错误，我们将看看是否可以在未来的版本中重新添加它。

要解决此问题，您有几个选择：

1) 面向 .NET Framework 4.5 和 Silverlight 5。这些版本添加了不依赖于 IServiceProvider 的新构造函数。

2）使用反射调用构造函数。请注意，这仅适用于 .NET Framework 和 Silverlight。它在 Windows 应用商店应用程序中不起作用，因为它不公开此构造函数（它将抛出 InvalidOperationException）。

3) 让平台特定项目（即 .NET Framework 4.0 或 Silverlight 4）项目自己创建 ValidationContext，并将其注入可移植库中。您可以通过某种依赖注入来完成此操作，也可以通过我在***将现有库转换为 PCL***部分下的[使用可移植类库创建连续客户端中调用的平台适配器模式来做到这一点。](http://msdn.microsoft.com/en-us/magazine/hh852593.aspx)

# mysql - MySQL 按中间表中的匹配数排序

> ID：12762073
> 
> 赞同：5
> 
> 时间：2012-10-06T17:26:06.153
> 
> 标签：mysql, database

所以我有一个查询试图抓取“相关帖子”。

类别与帖子具有一对多的关系。标签具有多对多的关系。所以我的表大致是这样的：

```
posts table:
id | category_id | ... | ...

tags table:
id | ... | ...

post_tag intermediate table:
id | post_id | tag_id | ... | ... 
```

因此，如果我已经有一个帖子行，以及获取其“相关”帖子的内容。我的逻辑大致是我只想抓取同一类别的帖子，但要按照与原始帖子匹配的标签数量对这些帖子进行排序。因此，与原始帖子具有完全相同标签的同一类别中的另一篇帖子应该是非常高的匹配，而仅匹配 3/4 的标签的帖子将在结果中显示较低。

这是我到目前为止所拥有的：

```
SELECT *
FROM posts AS p
WHERE p.category_id=?
ORDER BY ( SELECT COUNT(id) 
           FROM post_tag AS i 
           WHERE i.tag_id IN( ? )
         )
LIMIT 5 
```

绑定：初始帖子类别 ID；初始帖子标签 ID；

显然，这实际上不会按子选择中的正确值对结果进行排序。我在尝试考虑如何加入这一点以获得正确的结果时遇到了麻烦。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:56:44.823

试试这个，

```
SELECT posts.* 
FROM   posts,(SELECT p.id, 
                     Count(pt.tag_id) AS count_tag 
              FROM   posts AS p, 
                     post_tag AS pt 
              WHERE  p.category_id = '***' 
                     AND pt.post_id = p.id 
                     AND pt.tag_id IN(SELECT tag_id 
                                      FROM   post_tag 
                                      WHERE  post_tag.post_id = '***') 
              GROUP  BY p.id 
              ) temp

WHERE  posts.id =temp.id ORDER  BY temp.count_tag desc 
```

您可以在哪里填写`***`，因为您已经有 1 个帖子行

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:05:42.900

如果我正确地理解了您的问题，这就是您要寻找的：

```
SELECT p.*, 
       Count(pt.tag_id) AS ord 
FROM   posts AS currentpost 
       JOIN posts AS p 
         ON p.category_id = currentpost.category_id 
            AND p.id != currentpost.id 
       JOIN post_tag AS pt 
         ON pt.post_id = p.id 
            AND pt.tag_id IN (SELECT tag_id 
                              FROM   post_tag 
                              WHERE  post_id = currentpost.id) 
WHERE  currentpost.id = ? 
GROUP  BY p.id 
ORDER  BY ord DESC 
```

绑定：初始`posts.id`；

并且您只需在我的版本中指定当前帖子的 id，这样您就不必事先获取帖子标签并为 in 子句适当地格式化它们

编辑：通过避免双重加入帖子，这应该是一个更快的查询，如果您不喜欢用户变量，只需将所有 currentpostid 替换为 ? 和三重绑定 post_id：

```
set @currentpostid = ?;
select p.*, count(pt.tag_id) as ord
from posts as p, 
join post_tag as pt
    on pt.post_id = p.id
    and pt.tag_id in (select tag_id from post_tag where post_id = @currentpostid)
where p.category_id = (select category_id from posts where id=@currentpostid)
    and p.id != @currentpostid
group by p.id
order by ord desc; 
```

# sql - 创建以 SQL 表为后端的队列时如何处理并发

> ID：12762081
> 
> 赞同：0
> 
> 时间：2012-10-06T17:26:48.547
> 
> 标签：sql, sql-server, azure-sql-database

我想创建一个以 sql 数据库作为后端的简单队列。该表具有字段、id、taskname、runat(datetime) 和 hidden(datetime)。

我想确保队列项目不会运行一次且仅运行一次。

这个想法是当客户端想要出列时，存储过程选择第一项（按 runat 和 hidden < now 排序），将隐藏字段设置为当前时间 + 2 分钟并返回该项目。

MS Sql（准确地说是Azure）wokr，两个客户端如何能够同时运行并且都将相同的项目设置为隐藏并返回它？或者我可以确定它们一个一个地运行，而第二个不会返回与第一个更改隐藏字段相同的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T21:46:04.560

关键是在您接收的队列项目上获得锁定（行或表）。您可以使用几种方法，我最喜欢的是 UPDATE with OUTPUT 子句。两者都将产生对表的序列化访问。

例子：

```
CREATE PROCEDURE spGetNextItem_output
BEGIN
    BEGIN TRAN

    UPDATE TOP(1) Messages
    SET [Status] = 1
    OUTPUT INSERTED.MessageID, INSERTED.Data
    WHERE [Status] = 0

    COMMIT TRAN
END

CREATE PROCEDURE spGetNextItem_tablockx
BEGIN
    BEGIN TRAN

    DECLARE @MessageID int, @data xml

    SELECT TOP(1) @MessageID = MessageID, @Data = Data
    FROM Messages WITH (ROWLOCK, XLOCK, READPAST) --lock the row, skip other locked rows
    WHERE [Status] = 0

    UPDATE Messages
    SET [Status] = 1
    WHERE MessageID = @MessageID

    SELECT @MessageID AS MessageID, @Data as Data

    COMMIT TRAN
END 
```

表定义：

```
CREATE TABLE [dbo].[Messages](
    [MessageID] [int] IDENTITY(1,1) NOT NULL,
    [Status] [int] NOT NULL,
    [Data] [xml] NOT NULL,
     CONSTRAINT [PK_Messages] PRIMARY KEY CLUSTERED 
    (
        [MessageID] ASC
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:33:15.580

Windows Azure SQL 数据库在并发方面的行为就像 SQL Server 数据库一样。这是一个数据库问题，而不是 Windows Azure 问题。

现在：如果您使用 Windows Azure 队列（或服务总线队列）而不是实现自己的，那么该行为有据可查。例如：使用 Azure 队列，先入者获取队列项目，然后将该项目标记为*不可见*，直到它被删除或达到超时期限。

# c++ - 错误：'operator==' 不匹配

> ID：12762082
> 
> 赞同：1
> 
> 时间：2012-10-06T17:26:50.883
> 
> 标签：c++, data-structures

我在使用[这本数据结构书](http://people.cs.vt.edu/~shaffer/Book/)的基本代码实现链接列表的搜索功能时遇到了一些麻烦。这是我得到的错误：

```
llist.h: In member function 'void LList<E>::search(const E&, bool&) [with E = Int]':
Llistmain.cpp:31:1:   instantiated from here
llist.h:119:3: error: no match for 'operator==' in '((LList<Int>*)this)->LList<Int>::curr->Link<Int>::element == value' 
```

这是我的搜索成员函数的实现：

```
void search(const E& value, bool& found) {
    if (curr->element == value)
        found = true;
    else if (curr != NULL) {
        curr = curr->next;
        search(value, found);
    }
    else found = false;
} 
```

为什么我收到关于 的错误`== operator`？`curr->element`和都是`value`Int 类型。我应该以不同的方式检查平等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:30:34.950

你的类型`Int`有比较运算符吗？如果有，它是否将它的两个论点都视为`const`？特别是，如果您比较运算符是成员，很容易忘记将其设为`const`成员：

```
bool Int::operator== (Int const& other) const {
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:29:13.710

根据错误，`element`is not an `int`but a `Link<Int>`。您需要`Int`摆脱`Link`并将其变成具有`operator==`（注意`Int`不是`int`）的东西。

# scala - 从列表中过滤最小值

> ID：12762095
> 
> 赞同：0
> 
> 时间：2012-10-06T17:27:54.607
> 
> 标签：scala, playframework

```
case class DataItem(name: String, timestamp: Long, value: String)
val dataitems = List(DataItem(SpindleSpeed, 1223334444, 20.3333),
                     DataItem(SpindleSpeed, 1223334450, 21.3333),
                     DataItem(SpindleSpeed, 1223334460, 19.3333),
                     DataItem(Load, 1223334444, 70.0023),
                     DataItem(Load, 1223334446, 72.0023),
                     DataItem(Pressure, 1223334444, 20.3333)) 
```

我有一个有点像这样的列表，我需要过滤掉最低的数据项`timestamp`。可以有多个日期项具有相同的时间戳，在这种情况下，我需要所有这些数据项。

在上述情况下，我希望过滤后的列表是，

```
List(DataItem(SpindleSpeed, 1223334444, 20.3333),
     DataItem(Load, 1223334444, 70.0023),
     DataItem(Pressure, 1223334444, 20.3333)) 
```

这样做的功能性方式是什么？我尝试对列表进行排序并返回头部。但这只会返回一个似乎不正确的数据项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T17:41:49.370

```
scala> val SpindleSpeed = "S"
SpindleSpeed: java.lang.String = S

scala> val Pressure = "P"
Pressure: java.lang.String = P

scala> val Load = "L"
Load: java.lang.String = L

scala> case class DataItem(name: String, timestamp: Long, value: Double)
defined class DataItem

scala> val dataitems = List(DataItem(SpindleSpeed, 1223334444, 20.3333),
     |                      DataItem(SpindleSpeed, 1223334450, 21.3333),
     |                      DataItem(SpindleSpeed, 1223334460, 19.3333),
     |                      DataItem(Load, 1223334444, 70.0023),
     |                      DataItem(Load, 1223334446, 72.0023),
     |                      DataItem(Pressure, 1223334444, 20.3333))
dataitems: List[DataItem] = List(DataItem(S,1223334444,20.3333), DataItem(S,1223334450,21.3333), DataItem(S,1223334460,19.3333), DataItem(L,1223334444,70.0023), DataItem(L,1223334446,72.0023), DataItem(P,1223334444,20.3333))

scala> dataitems.groupBy(_.timestamp).minBy(_._1)._2
res2: List[DataItem] = List(DataItem(S,1223334444,20.3333), DataItem(L,1223334444,70.0023), DataItem(P,1223334444,20.3333))

scala> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:38:50.077

分两遍很容易做到：

```
val least = dataitems.minBy(_.timestamp).timestamp
val smalls = dataitems.filter(_.timestamp == least) 
```

一次性完成它不那么有趣：

```
(List[DataItem]() /: dataitems){ (xs,x) => xs match {
  case Nil => x :: Nil
  case x0 :: more =>
    if (x0.timestamp < x.timestamp) xs
    else if (x0.timestamp > x.timestamp) x :: Nil
    else x :: x0
}} 
```

这些都比按时间戳分组所有内容然后将除第一个之外的所有内容都扔掉更有效。

# php - PHP 回显表格式。第 1 行下出现的第 3 列。Echo 可以吗？

> ID：12762097
> 
> 赞同：0
> 
> 时间：2012-10-06T17:28:08.610
> 
> 标签：php, html, html-table, formatting

我正在使用 PHP 从 MySQL 中提取数据。我的基本网页和查询大部分工作正常。我正在使用 echo 将结果转储到屏幕上的表格中。代码如下：

```
 foreach ($dbh->query($sql) as $row){ 
          echo "<tr>"; 
          echo "<td'>".$row['DATAA']."</td>"; 
          echo "<td'>".$row['DATAB']."</td>"; 
          echo "<td'>".$row['DATAC']."</td>";
          echo "</tr>"; 
      } 
      $sql->closeCursor(); 
```

我想对表格进行一些稍微高级的格式化，如下所示：

![](../Images/dc33618fd6005a8b65cd296aee15a89e.png)

有谁知道这是否可以通过 PHP Echo 命令实现？

由于 PHP 和 HTML 表与 MySQL 表以及行和列都在搜索结果中混淆，我在互联网上查找建议时遇到问题。

因此，任何帮助或代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:32:21.903

与回声无关。你需要格式化你的 html ( `Use colspan`) 如下

```
foreach ($dbh->query($sql) as $row){ 
          echo '<tr>';
          echo '<td>'.$row['DATAA'].'</td>';
          echo '<td>'.$row['DATAB'].'</td>';
          echo '</tr>';
          echo '<tr>';
              echo '<td colspan="2">'.$row['DATAC'].'</td>';
          echo '</tr>';
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T17:32:34.120

您必须使用表的 colspan 属性：

```
foreach ($dbh->query($sql) as $row){ 
  echo "<tr>"; 
  echo "<td'>".$row['DATAA']."</td>"; 
  echo "<td'>".$row['DATAB']."</td>"; 
  echo "</tr>";
  echo "<tr colspan=\"2\">";      
  echo "<td'>".$row['DATAC']."</td>";
  echo "</tr>"; 
} 
$sql->closeCursor(); 
```

# java - 在运行时从 XSD 创建 Java 类

> ID：12762110
> 
> 赞同：1
> 
> 时间：2012-10-06T17:29:16.387
> 
> 标签：java, xsd, xjc, xsd2code

我有一个要求，我的前端屏幕在运行时创建一个 XSD。

之后我需要为其创建Java类，然后将其压缩到一个war文件中。所有这些都需要在运行时和在 JVM 中完成。

我对此进行了研究，发现**xjc** ( *xjc -p foo myschema.xsd* ) 工具命令。不幸的是，该工具似乎无法从我的 java 应用程序中运行。

有一个 Process API 可以从 Java 运行该工具，但我认为它会使其依赖于操作系统。

请帮我。

我需要在运行时从 XSD 生成 Java 源代码或直接二进制文件（类文件）并将其打包到 EAR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:35:49.030

您绝对可以从您的 Java 程序中运行该工具，就像可以通过这种方式调用任何其他应用程序一样。

您甚至可以在[`exec`使用`Process`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5B%5D,%20java.io.File%29).

只要你不做任何依赖于操作系统的事情，那么你就不会让你的应用程序依赖于操作系统。这在提供路径时尤其重要。如果它们是相对的，则使用 Linux 样式路径（并避免路径中的空格）以保持安全。

完成此操作后，您可以将`*.java`和`*.class`文件分组并使用常规 Java 工具对它们进行 Jar。从那里，您可以使用一些 API 将 EAR 加载到您的 Java EE 环境中。

# backbone.js - 如果另一个事件触发重新渲染，Backbone.js 会“吞下”点击事件

> ID：12762111
> 
> 赞同：3
> 
> 时间：2012-10-06T17:29:20.823
> 
> 标签：backbone.js, backbone-events

我想要实现的是，在表单更改时，应该重新渲染整个视图。这是为了提供刚刚编辑的数据的预览，并在勾选复选框时隐藏表单中的某些元素。

当用户编辑字段并在不离开字段的情况下单击按钮时，会同时触发前两个事件：更改，单击。更改处理程序首先更新模型，这会触发表单的重新呈现。当点击事件发生时，什么也没有发生。我想这与重新渲染有关，因为当我注释掉

```
@model.on 'change', @render, @ 
```

两个事件处理程序都按原样执行。

可能由于单击目标已从 dom 中删除并添加了新按钮，因此未执行单击处理程序？我将如何解决这个问题？我在想我写的代码是'惯用的'Backbone.js，但我还在学习:-)

这是我的代码的简化版本，显示了问题： [jsbin](http://jsbin.com/oviruz/1/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:10:40.473

让我们添加一些东西，以便我们可以看到发生了什么。首先，我们将使用唯一 ID标记*Save按钮：*

```
render: ->
  id = "b#{Math.floor(Math.random() * 1000)}"
  console.log('button id = ', id)
  #... 
```

然后我们可以看到点击了哪个按钮：

```
save: ->
  console.log('pressed = ', @$('button').attr('id'))
  #... 
```

我们还将添加一个全局点击处理程序来观察`<button>`Backbone 的外部内容：

```
$(document).on('click', 'button', ->
  console.log('global click = ', @id)
) 
```

现场版：http: [//jsbin.com/oviruz/6/edit](http://jsbin.com/oviruz/6/edit)

稍微玩一下那个版本，你可能会看到发生了什么：

1.  更改`<input>`.
2.  尝试单击*保存*。
3.  一旦`<input>`失去焦点，就会触发更改事件。
    1.  该事件调用`fieldChanged`which does `@model.set(...)`。
    2.  该`@model.set`调用触发 Backbone 的事件，特别是`@model.on(...)`来自视图的`initialize`.
    3.  Backbone 事件将我们发送到`render`which do a`@$el.html(...)`替换 the`<input>`和 the `<button>`。
    4.  该[`html`](http://api.jquery.com/html/)调用会杀死视图中的所有 DOM 元素`el`。*但是*，这是一个很大的问题，浏览器需要在此过程完成之前再次获得控制权。
4.  现在我们回到事件队列来处理点击*Save*。但是`<button>`我们点击的是一个僵尸，因为浏览器的工作队列是这样的：处理点击事件，替换**3.4**中的 DOM 元素。此处**3.4**中的工作尚未完成，因此`<button>`您单击的内容一半在 DOM 中，一半已死，并且不会响应任何事件。

您有两个相互竞争的事件队列；您的 Backbone 事件正在更改浏览器背后的 DOM，并且由于 JavaScript 是单线程的，因此浏览器正在丢失并变得混乱。

如果您延迟`@$el.html`调用足够长的时间让浏览器赶上：

```
set_html = =>
  @$el.html """
    <input type="text" id="text" value="#{@model.get('foo')}"/>
    <button class="save" id="#{id}">Save</button>
  """
setTimeout(set_html, 1000) # Go higher if necessary. 
```

你会得到你期望的行为。但这是一个可怕的、可怕的、讨厌的和可耻的组合。

当您仍在处理这些 DOM 元素上的事件时，乱搞 DOM 是充满危险的，而且只不过是一种伤害自己的复杂方法。

如果您想在字段更改时验证字段并将视图绑定`render`到`"change"`模型上的事件，那么我认为您必须手动进行验证并使用静默`set`调用：

```
fieldChanged: (e) ->
  field = @$(e.currentTarget)
  @model.set({ foo: field.val() }, { silent: true })
  // @model.validate(@model.attributes) and do something with the return value 
```

如果您`@model.save()`在*Save*按钮的回调中执行 a，则静默更改将被批量验证并发送到服务器。像这样的东西：http: [//jsbin.com/oviruz/7/edit](http://jsbin.com/oviruz/7/edit)

或者您跳过`@model.set`内部`fieldChanged`并使用`@model.validate`：

```
fieldChanged: (e) ->
  val = @$(e.currentTarget).val()
  // @model.validate(foo: val) and do something with the return value 
```

并将所有设置内容留给`save`：

```
save: ->
  @model.save(foo: @$('#text').val()) 
```

像这样的东西：http: [//jsbin.com/oviruz/8/edit](http://jsbin.com/oviruz/8/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:57:34.073

您可以在更新模型之前添加一点延迟`fieldChange`，您可以将`change`事件替换为`keyup`. 可能有很多解决方法，但最好的办法是不要重新渲染模型更改的整体视图。

# java - SpriteSheet 缓冲图像数组

> ID：12762116
> 
> 赞同：0
> 
> 时间：2012-10-06T17:29:51.960
> 
> 标签：java, image, bufferedimage, sprite-sheet

```
public BufferedImage[] sprites1()
{
    BufferedImage[] sprites = new BufferedImage[6];
    for (int i = 0; i < 3; i++)
    {
        for (int j = 0; j < 2; j++)
        {
            sprites[(i * 2) + j] = bigImg.getSubimage(j * 64, i * 64, 64, 64);
        }
    }
    return sprites;
}

public BufferedImage[] sprites1Fliped()
{
    BufferedImage[] sprites = new BufferedImage[6];
    for (int i = 0; i < 3; i++)
    {
        for (int j = 0; j < 2; j++)
        {
            BufferedImage dimg = new BufferedImage(64, 64, sprites1()[i].getType());  
            Graphics2D g = dimg.createGraphics();  
            g.drawImage(sprites1()[i], 0, 0, 64, 64, 64, 0, 0, 64, null);  
            g.dispose();
            sprites[i] = dimg;
        }
    }
    return sprites;
}

ImageIcon img1a = new ImageIcon(images.sprites1()[5]);
ImageIcon img2a = new ImageIcon(images.sprites1()[2]);
ImageIcon img3a = new ImageIcon(images.sprites1()[3]);
ImageIcon img4a = new ImageIcon(images.sprites1()[0]);
ImageIcon img5a = new ImageIcon(images.sprites1()[1]);
ImageIcon img6a = new ImageIcon(images.sprites1()[4]);

    setLayout(new GridBagLayout());
    layout.add(l1); //l1 is a label with img1a, l2 img2a, ect.
    layout.add(l2);
    layout.add(l3);
    layout.add(l4);
    layout.add(l5);
    layout.add(l6);
    add(layout);
    GridBagConstraints c = new GridBagConstraints();
    c.weighty = 1.0;
    c.weightx = 0;
    c.anchor = GridBagConstraints.PAGE_END;
    add(b1, c); 
```

![框架](../Images/ac48adf94e7c19a2d0dcea4e2e1bf0a0.png)

问题是面板应该显示精灵表中的橙色、黄色和蓝色龙。相反，它显示了一条翻转的橙色龙、一条橙色的龙和一条翻转的蓝色龙。

![精灵表](../Images/929342237981a5d5e46b4674fe25f002.png) （这是 128x192）（每个都是 64x64）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:34:27.183

我通过将图像放在正确的文件夹中来解决我自己的问题，替换旧的精灵图像表。

# hadoop - 如何配置 Hadoop，以便一个特定节点将所有数据存储在 HDFS 上？

> ID：12762118
> 
> 赞同：1
> 
> 时间：2012-10-06T17:29:58.660
> 
> 标签：hadoop

我们有一台非常稳定的机器，我们想将它用作 Namenode。同时，我们还有很多其他高度不稳定的机器，我们希望它们成为 Datanodes。现在我们想要配置 Hadoop，使 Namenode（在这种情况下也作为 Datanode）拥有 HDFS 上整个数据的副本，以便集群始终可以从中恢复数据。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:44:00.250

这不能以直接的方式完成。有一种方法，但它很乱，充满各种问题，不值得。

在您的实际数据节点和名称节点上运行数据节点守护程序。在您的拓扑文件中，将所有真实数据节点作为一个逻辑机架 (R1) 的一部分，并将 NN+DN 机器作为不同的机架 (R2)。确保您的 NN+DN 有超过 2*（所有 DN 的总磁盘容量）的空间。确保 HDFS 配置为复制因子为 3。

创建块时，HDFS 会将 2 个副本放在一个机架上，将第三个副本放在另一个机架上。所以你所有的数据肯定会在 NN+DN 单主机上。这将对您的集群性能产生什么影响，这是我不想讨论的。

甚至不要考虑在生产环境中这样做。事实上，你的要求是完全有缺陷的。跨数据节点拥有多个副本是 Hadoop 解决数据节点可靠性的方式。假设数据节点将不断失败，但数据不应该丢失 - 这已融入 Hadoop 设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T21:58:15.937

这种方法本质上不是不可扩展的——系统将受到只有一个节点的数据量的限制。
我也遇到过类似的需求，解决方案是构建具有大量存储空间和少量 CPU 和内存的更小的 HDFS 集群（以节省资金）。然后我们可以定期将数据DISTCP到这个集群作为备份。

# c++ - 无法打开使用 ofstream 创建的文件

> ID：12762119
> 
> 赞同：0
> 
> 时间：2012-10-06T17:30:01.950
> 
> 标签：c++, ofstream

无法在 Ubuntu 11.10 上的 gedit 编辑器中打开 .cpp 文件。该文件是在我用 C++ 编写的程序中使用 ofstream 对象创建的。程序编译并运行没有任何错误，之后它打开一个文件，逐行读取（将每一行附加到 std::string 对象）直到到达末尾，然后将字符串返回给 main()，然后将其输出到它在硬盘驱动器上创建的单独文件。但是，当尝试在 gedit 中打开和显示文件时，编辑器只是挂起，无论我等待多长时间都不会显示任何文本，如果等待时间过长，当我尝试关闭它时，它会说它没有响应并且我必须强制退出它。在 nautilus 文件浏览器中文件的预览图标中，它显示输出文件只有一行文本，而输入文件当然会显示整个页面都充满了文本。情况并非如此，因为输出文件应该包含与输入文件相同的行数，唯一的区别是更改了几行文本。

有人知道是什么原因造成的吗？

请注意，输入文件很长，包含 136871 行代码，所以可能与它有关。

以下是创建输出文件的程序代码：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

string fixIssue_SegmentationFault(ifstream& file_handle);

int main() {

cout<< "Thank you for running FixC_html4_tagsIssues.\n"
       "This little program has been written with the intent of fixing\n"
       "the issues in the C_html4_tags.h file of the MAW programming project.\n"
    << endl
    << "Please hit Enter to fix the detected issues." <<endl;
cin.get();

cout<< "Thank you. Please wait as it fixes the issues..." <<endl;
ifstream C_html4_tags_file_handle("/home/mobilexman/Documents/Programming_Projects/MAW/Modules/core/WebCoder_mod/modules/Html_coder/C_html4_coder/C_html4_elements/C_html4_tags/C_html4_tags.cpp");
string output_str = fixIssue_SegmentationFault(C_html4_tags_file_handle);
C_html4_tags_file_handle.close();

ofstream C_html4_tags_replacement_file_handle("/home/mobilexman/Documents/Programming_Projects/MAW/Modules/core/WebCoder_mod/modules/Html_coder/C_html4_coder/C_html4_elements/C_html4_tags/C_html4_tags_replacement.cpp");
C_html4_tags_replacement_file_handle<< output_str.c_str();
C_html4_tags_replacement_file_handle.close();

cout<< "Congratulations. The issues have been fixed." <<endl;

return 0;

}

string fixIssue_SegmentationFault(ifstream& file_handle) {

//////////////////
//Cause of issue:
/////////////////
///////////////////////////////////////////////////////////////////
//map<S_browser, TYPE_attr_values> attr_supported_attr_values_map;
//...
//TYPE_attr_values& attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser];
//...
//attr_supported_attr_values.clear();
//attr_supported_attr_values_map.clear();
//...
//attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser];
/////////////////////////////////////////////////////////////////////////////
//Explanation:
//Inside constructor of C_html4_tags, I created a map for the supported attr values of each Html attribute I created for each Html tag in the constructor.
//The map uses an S_browser object for its key and an object of TYPE_attr_values (which is a typedef of std::vector<S_html_attr_value>) for its mapped value.
//Therefore, I created a TYPE_attr_values& called 'attr_supported_attr_values' to reference the associated mapped value vector of the 'dummy_browser' object,
//which is just a dummy browser object I created so I could create a list of standard Html 4.01 attributes which exist in the specification for now, and later
//create a list of attributes from that list for each browser, according to which attribute values each browser supports (note: this will be done at the
//next level up: C_html4_elements). The code line
////////////////////////////////////////////////////////////////////////////////////////////////
//TYPE_attr_values& attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser];
///////////////////////////////////////////////////////////////////////////////////////////////
//is where I first create that reference and initialize it to the returned reference of the [] operator of the map, which performs an insert operation if the key passed does not already exist inside the map.
//And the code line
//////////////////////////////////////////////////////////////////////////////
//attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser];
/////////////////////////////////////////////////////////////////////////////
//is where I reinitialize (or at least that's what I thought it did when I first wrote the code...) the reference to the returned reference again, for each Html attribute after the first attribute.
//I then attempt to clear after each attribute operations both the referenced vector and then the map before reusing the reference 'attr_supported_attr_values'.
//However, that is what created the segmentation fault. It turns out you cannot use the same reference on more than one object, unlike pointers. So it is invalid to reinitialize that reference
//to point to a new object for each attribute, thus creating the problem. Oddly enough, though, doing this didn't actually produce any compiler errors. It compiles ok, but when attempting to run the program,
//it will return a message saying the program unexpectedly exited when running it normal, and you only get the extra info about the segmentation fault when running the debugger on it.  I'm not sure why
//that is, but its probably by design. And so it did take me a bit to figure out why the 'attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser];' lines was producing the segmentation
//fault, especially since the attribute it ended on was not actually the second attribute of the first tag, but rather the first attribute of the second tag. I still don't know why that is, but at any rate,
//I believe that after I change the 'attr_supported_attr_values' identifier to a pointer instead of a reference, and adjust all lines using it to treat it as a pointer instead of a reference, the problem
//SHOULD be fixed. But we'll certainly see how it goes...

//////////////////////////
//Steps for fixing issue:
////////////////////////
//1\. Read each line of C_html4_tags.cpp until reaching the end, checking each line as we go to see if it contains the target string content. In addition, add the content of each line (regardless of whether it contains the target or not)
//to output_str. Note that the target string content is first "TYPE_attr_values& attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser];" which needs to be changed to
//"TYPE_attr_values* attr_supported_attr_values = &attr_supported_attr_values_map[dummy_browser];", and then is the
/////////////////////////////////////
//attr_supported_attr_values.clear();
//attr_supported_attr_values_map.clear();
/////////////////////////////////////////
//lines which needs to be changed to
///////////////////////////////////////
//attr_supported_attr_values->clear();
//attr_supported_attr_values_map->clear();
//////////////////////////////////////////
//2\. If the target is found in the current line, perform the necessary changes to the line's content (i.e. buffer_str) before adding it to output_str.
//3\. Return output_str.
string output_str;
string buffer_str;
string search_str1 = "TYPE_attr_values& attr_supported_attr_values = attr_supported_attr_values_map[dummy_browser];";
string replacement_str1 = "TYPE_attr_values* attr_supported_attr_values = &attr_supported_attr_values_map[dummy_browser];";
string search_str2 = "attr_supported_attr_values.clear();";
string replacement_str2 = "attr_supported_attr_values->clear();";
string search_str3 = "attr_supported_attr_values_map.clear();";
string replacement_str3 = "attr_supported_attr_values_map->clear();";
size_t pos;
while (getline(file_handle, buffer_str)) {
     if (file_handle.good()) { //i.e. no errors while reading lines
        if ((pos = buffer_str.find(search_str1, 0)) != string::npos) {
           buffer_str.replace(pos, search_str1.size(), replacement_str1);
        }

        else if ((pos = buffer_str.find(search_str2, 0)) != string::npos) {
           buffer_str.replace(pos, search_str2.size(), replacement_str2);
        }

        else if ((pos = buffer_str.find(search_str3, 0)) != string::npos) {
           buffer_str.replace(pos, search_str3.size(), replacement_str3);
        }
        output_str += buffer_str;
     }
}

return output_str;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:34:11.647

您的问题是`getline` *提取并丢弃*行终止符，这意味着您最终在输出中没有一个换行符。这很可能会让 GEdit 非常不高兴（导致您看到的行为），因为它必须计算一个巨大文件的换行。

因此，您应该在构建输出字符串时为每一行添加一个换行符。

# asp.net-mvc-3 - SimpleMembership MVC3 无法加载文件或程序集 WebMatrix.Data

> ID：12762125
> 
> 赞同：4
> 
> 时间：2012-10-06T17:30:47.670
> 
> 标签：asp.net-mvc-3, azure, simplemembership

我正在使用 SimpleMembership.MVC3 包来管理成员资格。在开发中一切正常，但是当我部署到我的 Azure Web 角色时，它会引发以下异常：

> 无法加载文件或程序集 'WebMatrix.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）
> 
> 堆栈跟踪：[FileLoadException：无法加载文件或程序集“WebMatrix.Data，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）]
> WebMatrix.WebData.PreApplicationStartCode.Start() +0
> 
> [InvalidOperationException：WebMatrix.WebData.PreApplicationStartCode 类型的预应用程序启动初始化方法 Start 引发异常并显示以下错误消息：无法加载文件或程序集 'WebMatrix.Data，版本 = 1.0.0.0，文化 = 中性，PublicKeyToken = 31bf3856ad364e35' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）。]
> System.Web.Compilation.BuildManager.InvokePreStartInitMethods（ICollection`1 方法）+11711966
> System.Web.Compilation.BuildManager.CallPreStartInitMethods() +465
> System.Web.Hosting.HostingEnvironment.Initialize（ApplicationManager appManager，IApplicationHost appHost，IConfigMapPathFactory configMapPathFactory，HostingEnvironmentParameters hostingParameters，PolicyLevel policyLevel，异常 appDomainCreationException）+1167
> 
> [HttpException (0x80004005)：WebMatrix.WebData.PreApplicationStartCode 类型上的预应用程序启动初始化方法 Start 引发异常并显示以下错误消息：无法加载文件或程序集 'WebMatrix.Data，版本 = 1.0.0.0，文化 = 中性, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）。]
> System.Web.HttpRuntime.FirstRequestInit（HttpContext context）+11700896 System.Web.HttpRuntime.EnsureFirstRequestInit（HttpContext context）+141 System.Web.HttpRuntime.ProcessRequestNotificationPrivate（IIS7WorkerRequest wr，HttpContext context）+ 4869125

安装 Nuget 包时没有下载 WebMatrix.Data 程序集。我已经手动添加了在我的 Program Files/Microsoft ASP.NET 目录中找到的 WeBMatrix.Data.DLL，但是这个程序集的版本是 2.x，而缺少的是版本 1.x

什么不见​​了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T16:10:20.150

我遇到过同样的问题。我右键单击项目中的引用并转到属性。将 CopyToLocal 设置从 True 更改为 False 并重建项目。解决了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-29T02:04:59.677

尝试从 Nuget 添加引用而不是本地引用。这解决了我的问题。

这是包：[https ://www.nuget.org/packages/WebMatrix.Data/](https://www.nuget.org/packages/WebMatrix.Data/)

# java - 调试到 eclipse/jdt jar 文件中的类方法

> ID：12762130
> 
> 赞同：1
> 
> 时间：2012-10-06T17:31:15.413
> 
> 标签：java, eclipse, debugging, jar

我需要调试到 elcipse jar 文件，因为我一直都有 null 返回值。

![在此处输入图像描述](../Images/d5fac7560e61cf5319ae1152e4c688f2.png)

我需要为需要调试的 jar 附加源文件。由于eclipse是开源的，我想我可以找到源代码，但是我怎样才能得到我正在调试的jar文件的源代码呢？

![在此处输入图像描述](../Images/2c9a58047cfc3b5bcab76cdb7b951685.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:21:02.037

我可以按照以下页面调试核心文件：

*   [http://www.vogella.com/articles/EclipseCodeAccess/article.html](http://www.vogella.com/articles/EclipseCodeAccess/article.html)
*   [如何在eclipse中浏览JDT源代码？](https://stackoverflow.com/questions/3745495/how-do-i-browse-jdt-source-code-in-eclipse?rq=1)

# jquery - 从 json 动态加载数据时，克隆表标题列宽和原始 tbody 列宽未对齐

> ID：12762131
> 
> 赞同：0
> 
> 时间：2012-10-06T17:31:19.380
> 
> 标签：jquery, css, fixed-header-tables

我正在使用 html、jQuery、JSON 并遇到以下需要冻结表头的任务。我已经尝试了许多插件来冻结标题，但问题是当 tbody 通过 jQuery 中的 ajax 调用填充 json 数据时，克隆表标题的宽度和 tbody 中列的原始宽度没有对齐..我我在下面发布代码，请有人告诉我哪里出错了。

HTML部分：

```
<div style="width:300px">
<table border="1" width="100%" id="tblNeedsScrolling">
<thead>
<tr>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>
<th> Column</th>                
</tr>
</thead>
<tbody id="table_body">
</tbody>
</table>
</div> 
```

使用的 CSS 样式：

```
#tblNeedsScrolling {
font-weight: normal;
text-align: center;
border-collapse: collapse;
}
#tblNeedsScrolling td, #tblNeedsScrolling th {
width:50px;
    font-size: 11px;
    border: 1px solid #B9B9B9;
    padding: 3px 7px 2px 7px;
}
#tblNeedsScrolling th {
width:50px;
    font-size: 12px;
    text-align: center;
    padding-top: 5px;
    padding-bottom: 4px;
    background-color: #A7C942;
}
#tblNeedsScrolling tr.alt td {
    color: #000000;
    background-color: #EAF2D3;
} 
```

jQuery脚本：

```
function scrolify(tblAsJQueryObject, height) {
    var oTbl = tblAsJQueryObject;
    var oTblDiv = $("<div/>");
    oTblDiv.css('height', height);
    oTblDiv.css('overflow', 'scroll');
    oTbl.wrap(oTblDiv);
    // save original width
    oTbl.attr("data-item-original-width", oTbl.width());
    oTbl.find('thead tr td').each(function() {
        $(this).attr("data-item-original-width", $(this).width());
    });
    oTbl.find('tbody tr:eq(0) td').each(function() {
        $(this).attr("data-item-original-width", $(this).width());
    });
    // clone the original table
    var newTbl = oTbl.clone();
    oTbl.parent().parent().prepend(newTbl);
    newTbl.wrap("<div/>");
    // remove table header from original table
    oTbl.find('thead tr').remove();
    // remove table body from new table
    newTbl.find('tbody tr').remove();
    // replace ORIGINAL COLUMN width                
    newTbl.width(newTbl.attr('data-item-original-width'));
    newTbl.find('thead tr td').each(function() {
        $(this).width($(this).attr("data-item-original-width"));
    });
    oTbl.width(oTbl.attr('data-item-original-width'));
    oTbl.find('tbody tr:eq(0) td').each(function() {
        $(this).width($(this).attr("data-item-original-width"));
    });
}
$(document).ready(function() {
    $.ajax({
        type: "GET",
        url: url,
        dataType: "json",
        success: function(data) {
            var addition = '';
            $.each($(data.response), function(i, d) {
                var row = '<tr>';
                $.each(d, function(j, e) {
                    row += '<td>' + e + '</td>';
                });
                row += '</tr>';
                $('#table_body').append(row);
            });
            scrolify($('#tblNeedsScrolling'), 160);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:47:45.443

尝试进行以下更改，在

HTML部分：-

```
 <div style="width:1000px; height:400px; overflow:scroll">
    <table border="1" width="100%" id="tblNeedsScrolling">
    <tr>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>
    <th> Column</th>                
    </tr>
    <tbody id="table_body">
    </tbody>
    </table>
    </div> 
```

CSS部分：-

```
#tblNeedsScrolling {
table-layout: fixed;
font-weight: normal;
text-align: center;
border-collapse: collapse;
}
#tblNeedsScrolling tr td, #tblNeedsScrolling td {
font-size: 11px;
border: 1px solid #B9B9B9;
padding: 3px 7px 2px 7px;
}
#tblNeedsScrolling thead td {
font-size: 12px;
text-align: center;
padding-top: 5px;
padding-bottom: 4px;
}
#tblNeedsScrolling tr.alt td {
color: #000000;
background-color: #EAF2D3;
}

#tblNeedsScrolling thead tr td
{
width:50px ! important;
}

#tblNeedsScrolling tbody tr td
{
width:50px ! important;
} 
```

# php - 如何检查列表中的一个变量？并且不在列表中

> ID：12762134
> 
> 赞同：0
> 
> 时间：2012-10-06T17:31:43.827
> 
> 标签：php, for-loop

我有以下数组。

```
$ar = array("apple:3","banana:2","canopule:6","grapes:5","cherry:8"); 
```

如何检查以下变量是否

```
$a = "grapes"; 
```

是否在数组中（在这种情况下`grapes:5`），如果是，则返回匹配的字符串。即，“葡萄：5”

如果它不在列表中（例如，匹配“草莓”），则返回“草莓：未找到”。

我有这个：

```
for($i = 0; $i < count($ar); $i++) {
    list($name,$count)=explode(":",$ar[$i]);
    if($a==$name)
        echo "$a : $count";
    else
        echo "$a : not found!";
} 
```

如果匹配，则工作正常。但如果没有，我得到

> 草莓：未找到！草莓：未找到！草莓：未找到！草莓：未找到！草莓：未找到！

它返回每个错误的情况，而不仅仅是一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:35:48.780

试试这样：

```
$ar=array("apple:3","banana:2","canopule:6","grapes:5","cherry:8");
$a = "strawberry";
$result = '';
for($i=0;$i<count($ar);$i++){
    list($name,$count)=explode(":",$ar[$i]);
    if($a == $name){
        $result = "$a : $count";
        break;
    }
}

if($result){
    echo $result;
} else {
    echo $a." : Not found";
} 
```

如果是打印结果，只需检查循环中是否有东西，如果没有找到添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T18:11:53.407

好吧，如果您没有被迫使用这样的数组并且您要求用于教育目的，那么请尝试关联数组：那么代码看起来非常简单：

```
$ar = array("apple" => 3,"banana" => 2,"canopule" => 6,"grapes" => 5,"cherry" => 8);
$a = "grapes";

echo isset($ar[$a]) ? "$a : ".$ar[$a] : "$a : not found"; 
```

I know that you were not asking exactly about this but I wanted to say that sometimes it is simpler to think of way of storing the data rather than coming up with new algorithms.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T17:41:55.397

`foreach`使用and的另一种方式`substr`。

```
$ar = array("apple:3","banana:2","canopule:6","grapes:5","cherry:8");
$a = "cherry";    
$result = $a . ": not found";

foreach ($ar as $fruit) {
    if (substr($fruit,0,strpos($fruit,":")) == $a) {
        $result = $a . ": " . substr($fruit,strpos($fruit,":") + 1);
        break;
    } 
}

echo $result; 
```

`foreach`遍历数组中的每个元素（也可以用于`foreach ($ar as $num => $fruit)`区分键和值）。使用`substr`而不是`explode`只是为了说明另一种拆分像您这样的复合值的方法。寻找冒号的出现，通过使用从开头到 n 的字符来分割字符串，用于提取水果名称的 run1，并使用从字符 n+1 到结尾的用于提取计数值的 run2。请记住，字符串中字符的索引从位置 0 开始。

# iphone - 检测耳机按钮按下

> ID：12762135
> 
> 赞同：0
> 
> 时间：2012-10-06T17:31:50.570
> 
> 标签：iphone, objective-c, xcode, ipad

我需要在我的应用程序上使用耳机按钮而不是多媒体。这是我到目前为止所拥有的，但它不起作用。当我按下耳机按钮时，我的应用程序没有响应，而是播放音乐......

```
- (BOOL)canBecomeFirstResponder {

return YES;
}

- (void)viewDidAppear:(BOOL)animated {

[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
if ([self canBecomeFirstResponder]) {
    [self becomeFirstResponder];
    NSLog(@"became first responder");
}

}

 - (void)remoteControlReceivedWithEvent:(UIEvent *)theEvent
 {
if (theEvent.type == UIEventTypeRemoteControl) {
    switch(theEvent.subtype) {
        case UIEventSubtypeRemoteControlTogglePlayPause:
            NSLog(@"Hello");

        case UIEventSubtypeRemoteControlPlay:
            NSLog(@"Hello 2");
            break;
        case UIEventSubtypeRemoteControlPause:
            NSLog(@"Hello 3");
            break;
        case UIEventSubtypeRemoteControlStop:
            NSLog(@"Hello 4");
            break;
        default:
            return;
    }
}
 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T05:01:07.383

@user1724494 您使用的代码仅在应用程序在后台运行时才有效，因为该事件是我们只能在后台操作中处理的远程事件。

请参考苹果文档[http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/Introduction/Introduction.html)

# iphone - 更改 UITableview 的显示

> ID：12762137
> 
> 赞同：0
> 
> 时间：2012-10-06T17:31:57.683
> 
> 标签：iphone, xcode, uitableview, ios5, ios6

当我在 iOS6 上启动我的应用程序时，UITableview 的显示是我想要的，这与邮件应用程序表视图相同，但是当我在 iOS5 模拟器上启动它时，表视图对应于设置应用程序之一。如何获取两个 iOS 版本的邮件应用程序表格视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:47:37.980

你设置的表视图属性“style”有2个：UITableViewStylePlain、UITableViewStyleGrouped。plain 是白色行的常规行，分组是您在设置应用程序中看到的行。

```
tableView.style = UITableViewStylePlain; 
```

您也可以在 IB/StoryBoard 中设置它，方法是单击表格视图，然后右键单击属性检查器并查找选项样式。

![在此处输入图像描述](../Images/683df634d85225d749f3a8dd97a6be47.png)

# sql - 运行此代码时出现数据类型转换错误

> ID：12762138
> 
> 赞同：1
> 
> 时间：2012-10-06T17:32:01.600
> 
> 标签：sql, database, vba, ms-access

但我确信这些数据类型可以一起使用，1 个表中的 ItemID 是 AutoNumber，另一个表中是一个数字。

```
Private Sub Command17_Click()

Dim cmbItem As String

cmbItem = "SELECT ItemID FROM Items WHERE Items.Name = " & Me.Combo0.Value & ";"

Dim sc1 As DAO.Recordset
Set sc1 = CurrentDb.OpenRecordset("Buy", dbOpenDynaset)

sc1.AddNew
sc1.Fields("ItemID").Value = cmbItem
sc1.Fields("BuyPrice").Value = Me.Text13.Value
sc1.Fields("Notes").Value = Me.Text18.Value
sc1.Update

End Sub 
```

在此先感谢，鲍勃 P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:48:34.223

如果这是触发您的错误的行...

```
sc1.Fields("ItemID").Value = cmbItem 
```

...请注意，这`cmbItem`是一个包含`SELECT`语句 ( `SELECT ItemID FROM ...`) 的字符串。您告诉我们“ *1 个表中的 ItemID 是 AutoNumber 和另一个表中的数字*”。因此，您尝试将字符串值分配给数字字段。此外，该字符串不能转换为有效数字。它必须失败。

只是在这里猜测，但也许你想要这样的东西......

```
Dim cmbItem As Long
cmbItem = DLookup("ItemID", "Items", "[Name]=" & Me.Combo0.Value) 
```

如果`[Name]`是文本字段，请在您与之比较的值周围添加引号...

```
cmbItem = DLookup("ItemID", "Items", "[Name]='" & Me.Combo0.Value & "'") 
```

如果这很接近，您可以将变量重命名为，`lngItem`这样代码就不太可能让您的协作者感到困惑。

如果`DLookup()`可能返回 Null，请考虑将其提供给`Nz()`表达式。

# html - 如何在html中链接图像和文本？

> ID：12762146
> 
> 赞同：0
> 
> 时间：2012-10-06T17:33:21.443
> 
> 标签：html, css

我想将图像与文本链接起来，因此当我调整窗口大小时，文本将随图像一起移动。这是一个示例[google.de](http://www.google.de/)。如您所见，在调整窗口大小时，谷歌徽标下的文本会随着图像一起移动。

这是我尝试过的。

HTML

```
<div class="logo"><img src="here is my logo" width="350"></div>
<div class="textlogo">Here is the text</div> 
```

CSS

```
.logo
{
    text-align:center;
}
.logo img
{
    position:relative;
}
.textlogo 
{
    position:absolute;
    top:25%;
    left:64%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:43:36.677

希望这将帮助您理解方式（没有火箭科学）

[http://jsfiddle.net/MVYGd/1/](http://jsfiddle.net/MVYGd/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T17:42:54.690

这就是谷歌实际上所做的

```
<div title="Google" align="left" id="hplogo" style="background:url(images/srpr/logo3w.png) no-repeat;background-size:275px 95px;height:95px;width:275px">
<div nowrap="nowrap" style="font-size:16px;position:relative;left:214px;top:70px">Deutschland</div>
</div> 
```

你可以用同样的方法

# python - Python：“import ... as”导致不正确的引用

> ID：12762153
> 
> 赞同：2
> 
> 时间：2012-10-06T17:34:44.000
> 
> 标签：python, import, module

我注意到 python 如何处理模块名称的一种特殊行为。

如果我写：

```
import a.b
import a 
```

然后尝试引用模块 ab 中的某些内容，它可以正常工作。

但是，如果我尝试一些稍微不同的东西：

```
import a.b
import c as a 
```

然后尝试在模块 ab 中引用某些东西，我得到一个错误，说：

> AttributeError：“模块”对象没有属性“b”

我知道显而易见的解决方案就是不使用两个我用相同名称引用的不同模块。但是，我仍然很好奇是什么导致了这种行为变化。为什么一个有效而另一个无效？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T17:38:30.573

你为什么期望它起作用？您的所有 4 个 import 语句都是对变量的赋值`a`。因此，如果您分配`c`给`a`，它会用没有`.b`属性的东西覆盖内容。

* * *

这是第一种情况下发生的情况：

1.  运行时`import a.b`，Python 会加载模块`a`，然后将模块`a.b`加载到加载`a`模块的属性`b`中。然后它将结果分配给变量`a`。
2.  `import a`不会导入任何新内容，因为模块已经`a`加载。它只是将相同的模块从 重新分配`sys.modules['a']`到`a`。

以下是第二种情况发生的情况：

1.  运行时`import a.b`，Python 会加载模块`a`，然后将模块`a.b`加载到加载`a`模块的属性`b`中。然后它将结果分配给变量`a`。
2.  运行时`import c as a`，它加载模块`c`，然后将该模块分配给变量`a`，*覆盖*内容（`a = sys.modules['c']`）。`sys.modules['a']`您可以通过将 的内容与 的内容进行比较来验证这一点`a`- 在这种情况下它们会有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T17:38:22.367

如果你`import c as a`

它会覆盖你以前的`a`

所以如果你试着打电话`a.b`你真的打电话`c.b`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T17:39:24.403

在第一种情况下，`a`指的是实际的包`a`（包含模块`b`）。这意味着 that`a.b`指的是由`a`.

在第二种情况下，`a`指的是 module `c.py`。好像你试过了`import c; a = c`。现在，如果`c`没有属性`b`，它将失败。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-06T22:38:08.077

当您执行“import as”语句时，您实际上是在执行任务。所以如果你这样做

```
import matplotlib as mp 
```

您正在为`matplotlib`to分配命名空间`mp`。

这包含了分配的所有通常含义。

# c++ - 函数错误/头文件/内联的多重定义

> ID：12762154
> 
> 赞同：0
> 
> 时间：2012-10-06T17:34:53.050
> 
> 标签：c++, header, inline, multiple-definition-error

抱歉，如果这是重复的，但是我发现的那些...好吧，我以为我尝试了相同的解决方案，但无济于事。无论如何，我最近尝试将我常用的随机函数的实现移动到一个头文件中：我知道这些函数是如何工作的，我怀疑我会很快改变它们，所以我想，文件越少越好（以及功能很短）。

所以，我试了一下。将 .cpp 文件的内容粘贴到一个新文件中，并添加保护。然后只需包含它，瞧，它就可以了。不幸的是，我将它包含了两次，然后发现，我将相同函数的副本分发到每个文件，因此出现了错误。（仍然会有点困惑，为什么这是标题保护，因为无论如何你最终都会得到一份副本，但我想确实如此）。无论如何，我用谷歌搜索（和 SO'ed），并发现如果你将它们声明为内联 - 这在这种情况下是有意义的 - 那么预处理器（或者这也是链接器？）会做对。现在我想到了......作为一个小问题，DEFINES 是文件本地的，还是全局范围的？（即，如果我在两个文件中包含一个标题，并且标题保护定义......两个文件都包含它，因为定义发生在不同的文件中，还是只有一次？如果它确实被包含两次，您将获得（但未定义）相同函数/类/结构的多个声明，我认为这会引发错误，但我猜它不会在不同的文件中？但是，否则，它可能不会被包括在内，并且它不知道它是什么。那么，重新问一下，DEFINES 是文件本地的吗？)

这是我在文件中的功能被重复的内容（认为只包含一个功能）

```
#ifndef RANDOM_H
#define RANDOM_H

//needed for getting system time and for random generation functions rand and srand
#include <time.h>
#include <stdlib.h>

//this function returns a random number between an inclusive range
inline int randomRange(const int & min, const int & max)
{
    if (max >= min)
        return ((rand() % (max+1-min))+min);
    else
        return ((rand() %  (min+1-max))+max);
}

#endif 
```

然后我在这个文件（即“random.h”）上的两个文件中有#includes

我错过了什么？

编辑：错误消息是：

`randomRange(int const&, int const&)'的多重定义|

在稍作休息的同时，我关闭了 IDE。重新打开后，一切都已修复。显然，添加内联 DID 可以修复它，但是，与运行时的 cpp 文件不同，头文件（如果未添加到项目中）不会更新，除非您手动保存它们。保存后，成功了。对不起，大家。

每日一课：修复此类错误时，请确保您的文件已更新...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:45:19.473

宏定义在翻译单元中是本地的：编译源文件时，预处理器扩展各种预处理器指令（`#define`、`#include`等）并将结果传递给实际的编译器。这对每个文件执行一次，而不仅仅是一次。使用包含守卫的原因是同一个标题很可能会在同一个翻译单元中包含两次。例如，如果您有类型，比如说，，`Point`它被类使用`Rectangle`，`Triangle`并且您包含两个和的标题`Rectangle`，`Triangle`您最终会得到一个包含`Point`两次标题的翻译单元。

当你在头文件中定义一个函数时，你需要向编译器表明它不应该使它成为一个全局可见的定义。正常的方法是使用`inline`它，这也向编译器表明它应该尽量不调用该函数，如果这是有意义的。使用的替代方法`inline`是制作函数`static`，但在这种情况下，您实际上最终会在最终可执行文件中获得该函数的多个副本：即使编译器可能`inline`在每个翻译单元中使用该函数的一个版本，在链接时从任何地方选择和使用（希望所有其他副本都被丢弃）。可以看到差异，例如，当您`static`的函数中有一个局部变量时：

```
inline int f() {
    static int rc(0);
    return ++rc;
}
static int g() {
    static int rc(0);
    return ++rc;
} 
```

当您从不同的翻译单元调用这些函数时`f()`，`g()`后者每个文件都有一个计数器，而前者有一个全局计数器。

# ubuntu - c++0x_warning.h:31:2: 错误：

> ID：12762155
> 
> 赞同：4
> 
> 时间：2012-10-06T17:34:57.767
> 
> 标签：ubuntu, g++

我正在尝试制作文件并收到此错误。我是新手。有人能帮我一下吗。

```
/usr/include/c++/4.6/bits/c++0x_warning.h:32:2: error: #error This
file requires compiler and library support for the upcoming ISO C++
standard, C++0x. This support is currently experimental, and must be
enabled with the -std=c++0x or -std=gnu++0x compiler options. 
```

如何启用`-std=c++0x`？我在我的makefile中使用了它，`#CXX_VERSION_FLAG = -std=c++0x`但没有用。

谢谢，阿迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:37:30.380

不，只需将这些标志（又名选项）传递给编译器。而不是运行`gcc ...`，运行`gcc -std=c++0x ...`（或`-std=c++11`用于较新的编译器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T17:37:51.143

Makefile 中以“#”开头的行是注释行。尝试删除“#”。

# python - Django 模板错误：“category_list 需要 2 个参数”

> ID：12762158
> 
> 赞同：0
> 
> 时间：2012-10-06T17:35:18.253
> 
> 标签：python, django

Django 模板未从数据库加载

我正在将模板更改为新设计。在此过程中，类别列表停止加载。

> “category_list 有 2 个参数”</p>

在 html 文件中，“category_list”正在加载：

```
{% category_list request.path %} 
```

有人可以解释在这种情况下“接受 2 个参数”是什么意思吗？

编辑：这是自定义模板标签：

```
def category_list(request_path):
    list_cache_key = 'active_category_link_list'
    active_categories = cache.get(list_cache_key)
    if not active_categories:
        active_categories = Category.active.all()
        cache.set(list_cache_key, active_categories, CACHE_TIMEOUT)
    return {
        'active_categories': active_categories,
        'request_path': request_path
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:40:10.603

`category_list`必须是带有两个参数的[Django 自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags)。

在您当前的模板语法中，您的第一个参数是`request.path`. 在您的代码中查找函数的定义`category_list`并检查它应该接收哪些参数并添加第二个参数。

# listview - 幻灯片动画，如通知或三星联系人应用程序

> ID：12762160
> 
> 赞同：2
> 
> 时间：2012-10-06T17:35:28.300
> 
> 标签：listview, notifications, slide, gesture

我有一个列表视图，我希望能够像通知栏一样滑动和删除它。我对它有点菜鸟，我很感激你详细解释它。

谢谢

# java - 第 n 次调用函数

> ID：12762165
> 
> 赞同：0
> 
> 时间：2012-10-06T17:36:02.083
> 
> 标签：java, recursion, map

我似乎无法理解如何实现此功能。原型如下：

```
public static <K> K nthGet (Map<K,K> m, K k, int n); 
```

它应该做的是获取一个映射 m，并从该映射返回从 k 开始的第 n 个键。因此，如果 n 为 3，则返回 m.get(m.get(m.get(k)))。

我有一种感觉，我必须使用对 nthGet 的递归调用来从 n 返回键的最终值，但我不太确定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T17:38:47.440

您可以简单地循环 n 次：

```
for (int i = 0; i < n; i++) {
    k = m.get(k);
}
return k; 
```

如果映射中不存在一个值作为键，这可能会返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:41:20.920

如果要使用递归，则应首先考虑*基本情况*，然后考虑*归纳情况*。

这里的基本情况是`n=0`. 这很容易：我们不必在地图中查找，所以只需`return k`.

归纳案例只是返回`m.get(nthGet(m, k, n-1))`，因为我们每次调用都进行一次查找。

因此，代码非常简单：

```
K nthGet (Map<K,K> m, K k, int n) {
    if(n == 0) return k;
    return m.get(nthGet(m, k, n-1));
} 
```

# javacard - Sim Application Toolkit - 选择时无法显示文本（实际上什么也没有）

> ID：12762167
> 
> 赞同：5
> 
> 时间：2012-10-06T17:36:08.313
> 
> 标签：javacard, sim-toolkit

我尝试开发一个 Sim Application Toolkit Applet.. 在互联网上找到了许多简单的示例，但没有成功..

问题是; 我的菜单条目出现在 STK 菜单中，但如果我选择它，什么也不会发生。我尝试在事件 EVENT_MENU_SELECTION 上显示文本。（其实不光显示文字，短信、ussd、子项也不行..）

*   我有制造商提供的真实 sim 卡，可以使用身份验证密钥开发和测试一些小程序。
*   我在 Android 2.3 NFC 智能手机上对其进行了测试。
*   要将小程序加载到 SIM 中，我使用 ACR1281U 作为读取器，使用 Giesecke & Devrient JLoad 2.3.0 作为加载器。
*   在 Sim Toolkit 中默认是一个菜单项，工作正常。

这是我的示例代码..希望有人有想法..（也许加载小程序时有一些特定的安装参数？）

提前致谢， 库奇卡

```
package proactive_cmd;

import javacard.framework.*;
import sim.access.*;
import sim.toolkit.*;

public class display_text extends Applet 
  implements ToolkitConstants, ToolkitInterface
{
  private static final byte CMD_QUALIFIER = (byte)0x80;

  private byte[] menuEntry = {'M','y','M','e','n','u'};
  private byte[] textBuf = {'H','e','l','l','o'};

  private ToolkitRegistry reg;
  private SIMView gsmFile;

  public display_text() {
    //Get the GSM application reference
    gsmFile = SIMSystem.getTheSIMView();

    reg = ToolkitRegistry.getEntry();

    reg.initMenuEntry(menuEntry,
                      (short) 0, 
                      (short) menuEntry.length,
                      PRO_CMD_DISPLAY_TEXT,
                      false,
                      (byte) 0,
                      (short) 0);
  }

  public static void install(byte[] bArray, short bOffset, byte bLength)
    throws ISOException
  {

    display_text dt = new display_text();
    dt.register();
  }

  public void processToolkit(byte event)
    throws ToolkitException
  {
    ProactiveHandler ph = ProactiveHandler.getTheHandler();

    if (event == EVENT_MENU_SELECTION) {

       ph.init((byte) PRO_CMD_DISPLAY_TEXT, (byte) CMD_QUALIFIER, DEV_ID_DISPLAY);
       ph.appendTLV((byte)(TAG_TEXT_STRING | TAG_SET_CR),
                    textBuf,
                    (short) 0, 
                    (short) textBuf.length);
      ph.send();
    }
  }

  public void process(APDU apdu) {
    if (selectingApplet()) {
      return;
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:19:39.293

为了使用 STK 命令，您必须正确安装您的小程序。对于 SIM Toolkit，它必须是 INSTALL MAKE SELECTABLE 命令中的 CA 标签。如果您要使用 UICC 工具包，则必须使用 EA 标签。详情请参阅[ETSI 102 226 标准](http://www.etsi.org/deliver/etsi_ts/102200_102299/102226/06.08.00_60/ts_102226v060800p.pdf)。

# javascript - 如何使用 javascript 更改文本选择样式

> ID：12762168
> 
> 赞同：0
> 
> 时间：2012-10-06T17:36:13.563
> 
> 标签：javascript, css, textselection

> **可能重复：**
> [从 JavaScript 设置 CSS 伪类规则](https://stackoverflow.com/questions/311052/setting-css-pseudo-class-rules-from-javascript)

你如何做等同于：

```
::selection {
    color: #FFF;
} 
```

在javascript中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:37:23.250

```
.foobar::selection {
    color: #FFF;
} 
```

* * *

```
element.className += " foobar"; 
```

# android - 编辑文本中样式的实现

> ID：12762169
> 
> 赞同：-1
> 
> 时间：2012-10-06T17:36:21.823
> 
> 标签：android, android-edittext

是否有任何java代码在编辑文本而不是文本视图中实现样式（即粗斜体等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:45:55.610

EditText 继承自 TextView

```
editText.setTypeface(null, Typeface.BOLD_ITALIC);
editText.setTypeface(null, Typeface.BOLD);
editText.setTypeface(null, Typeface.ITALIC); 
```

使用你想要的。

# drupal-7 - 在 drupal fullcalendar 或日历模块视图上创建摘要聚合？

> ID：12762179
> 
> 赞同：1
> 
> 时间：2012-10-06T17:37:00.357
> 
> 标签：drupal-7, fullcalendar

在 drupal 7 中，更改基本查询以返回基于分类术语（或任何字段）的项目摘要的最佳方法是什么。聚合似乎不适用于日历模块。fullcaendar 模块似乎根本无法处理它，而 calendar 模块似乎在尝试，但它不能正常工作。我熟悉模块编程，但在这方面不是很有经验，所以我想获得一些指导来覆盖或挂钩以操纵查询以提供任一模块需要的结果来支持这一点并在现有模块逻辑中工作。

# html - 带有嵌入图像的 HTML 部分显示 0 高度

> ID：12762181
> 
> 赞同：0
> 
> 时间：2012-10-06T17:37:13.583
> 
> 标签：html, image

我正在编写一个网站并且很困惑，因为当我在 m 浏览器中打开文件时，以下代码没有给出高度。我正在网上搜索是否有原因，但我一直找不到任何东西。

**当每个图像都显示时，为什么以下部分（或 div）显示为 0 高度？**

```
<section class = "class">
        <img class = "class" src = "url" alt = "alt" />
        <img class = "class" src = "url" alt = "alt" />
        <img class = "class" src = "url" alt = "alt" />
        <img class = "class" src = "url" alt = "alt" />
        <img class = "class" src = "url" alt = "alt" />
        <img class = "class" src = "url" alt = "alt" />
        <img class = "class" src = "url" alt = "alt" />
        <img class = "class" src = "url" alt = "alt" />
</section> 
```

上面这段代码是：

```
<section class = "class">
        <span class = "class">Insert Text Here</span>
</section> 
```

这表明具有正确的高度。

在没有高度的部分之后是以下代码：

```
<section class = "class">
        <div class = "class"> Insert Code Here </div>
</section> 
```

它给出了包括所有图像部分的高度。这导致我在为网站的其余部分设置样式时变得非常混乱。

我会声明一个固定的高度量，但它将是一个移动站点，并且每个图像都需要具有百分比宽度，这意味着高度将根据移动设备而变化。

任何帮助或澄清将不胜感激！谢谢！

以下代码与我设置的完全一样，只是没有页眉或页脚：

```
 <style>
 body
 {
 max-width:640px;
 margin:0 auto;
 font-family: helvetica;
 }
 image
 {
 border:none;
 padding:0px;
 margin:0px;
 height:auto;
 }
 div
 {
 display:block;
 }
 a
 {
 text-decoration:none;
 }
 a:hover
 {
 text-decoration:none;
 }
 .club_options .beer, .club_options .flower, .club_options .cigar, .club_options .chocolate
 {
 float: left;
 margin-left: 4%;
 width: 44%;
 margin-bottom: 4%;
 }
 .club_options .wine, .club_options .fruit, .club_options .coffee, .club_options .pizza
 {
 float: right;
 margin-right: 4%;
 width: 44%;
 margin-bottom: 4%;
 }
 .club_options .wine, .club_options .beer
 {
 margin-top: 4%;
 }
 p
 {
 margin:0px;
 padding:0px;
 }
 .content_wrapper .top_banner
 {
 width: 100%;
 background-color: #A43309;
 font-size: 38px;
 text-align: center;
 padding-top: 15px;
 padding-bottom: 15px;
 }
 .content_wrapper  .top_banner .banner
 {
 color: white;
 }
 .content_wrapper .top_banner img
 {
 padding-bottom: 4px;
 }
 .bottom_banners .social_media
 {
 width: 100%;
 background-color: #EAEAEA;
 }
 .bottom_banners .social_media a img
 {
 padding-top: 15px;
 padding-bottom: 15px;
 padding-right: 2%;
 padding-left: 2%;
 width: 19%;
 }
 .bottom_banners .social_media img
 {
 padding-bottom: 6px;
 }
 </style>
 <section class = "content_wrapper">
    <section class = "top_banner">
        <span class = "banner"> Shop our Gourmet Clubs</span>
        <img src = "../images/arrow.jpg" alt = "Arrow" />
    </section>
    <section class = "club_options">
        <img class = "beer" src = "../images/beer.jpg" alt = "Beer of the Month Club" />
        <img class = "wine" src = "../images/wine.jpg" alt = "Wine of the Month Club" />
        <img class = "flower" src = "../images/flower.jpg" alt = "Flower of the Month Club" />
        <img class = "fruit" src = "../images/fruit.jpg" alt = "Fruit of the Month Club" />
        <img class = "cigar" src = "../images/cigar.jpg" alt = "Cigar of the Month Club" />
        <img class = "coffee" src = "../images/coffee.jpg" alt = "Coffee of the Month Club" />
        <img class = "chocolate" src = "../images/chocolate.jpg" alt = "Chocolate of the Month Club" />
        <img class = "pizza" src = "../images/pizza.jpg" alt = "Pizza of the Month Club" />
    </section>
    <section class = "bottom_banners">
        <!--wall street-->
        <div class = "wall_street_banner">
            <img src = "../images/wall_street_journal_logo.jpg" alt = "Wall Street Journal" />
            <div class = "quote">
                <span class = "apostrophe">&ldquo;</span>
                <span class = "text">Best Overall, Best Value with generous shipments</span>
                <span class = "apostrophe">&rdquo;</span>
            </div>
        </div>
        <!--social media-->
        <section class = "social_media">
            <a href = "#" target = "_blank">
                <img src = "../images/facebook.jpg" alt = "Like us on Facebook" />
            </a>
            <img src = "../images/social_media_separator.jpg" alt = "" />
            <a href = "#" target = "_blank">
                <img src = "../images/twitter.jpg" alt = "Follow us on Twitter" />
            </a>
            <img src = "../images/social_media_separator.jpg" alt = "" />
            <a href = "#" target = "_blank">
                <img src = "../images/google_plus.jpg" alt = "Find us on Google+" />
            </a>
            <img src = "../images/social_media_separator.jpg" alt = "" />
            <a href = "#" target = "_blank">
                <img src = "../images/pinterest.jpg" alt = "Pin it on Pinterest" />
            </a>
        </section>
    </section>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:29:24.953

`section.club_options`仅包含浮动元素，因此需要 clearfix 或`overflow:hidden;`.

为了避免另一个问题（可能是众多问题之一），我认为`image`选择器不会很好地工作。

# java - 在 Java 中调用静态目录复制方法

> ID：12762185
> 
> 赞同：0
> 
> 时间：2012-10-06T17:37:32.713
> 
> 标签：java, static, directory, ioexception

我尝试使用此问题中的示例：[如何将文件夹及其所有子文件夹和文件复制到另一个文件夹中](https://stackoverflow.com/questions/5368724/how-to-copy-a-folder-and-all-its-subfolders-and-files-into-another-folder)

我让他成为静态的，当我调用 copyDirectory() 时，我在程序运行期间出现异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.Error: Unresolved compilation problem: 
Unhandled exception type IOException 
```

在使用此方法的每一行。

我添加了

```
 throws IOException 
```

对于每个使用 copyDirectory() 的方法

Error 的计数已被缩短，但它们仍保留在本地 java 类中。而且我无法编辑它们：这将是一个无限的编辑递归:)）

提前我很抱歉英语不好。

UPD：（使用 ApacheCommonsIO）

```
import org.apache.commons.io.FileUtils;
// the rest import
public class MyClass{
  public myMethod(){
   String src = "/home/user/dir_src";
   String dst = "/home/user/dir_dst";
   FileUtils.copyDirectory(new File(src), new File(dst)); 
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:01:07.613

2 这里的东西

1.  您应该像这样格式化您的方法 copyDirectory ，这样它就不会抛出所有这些异常：

```
 public static boolean copyDirectory(File source, File destination) {
      try{
        // Copy Stuff
        return true;
      catch(IOException e){
        // Your way of ErrorLogging
        return false;
      }
    } 
```

1.  对于所有 IO-Stuff，例如复制删除等，我建议您使用 ApachCommonIO：[http](http://commons.apache.org/io/) ://commons.apache.org/io/ 。

编辑：

请立即尝试此代码，这至少应该可以编译并提示您出了什么问题：

```
import org.apache.commons.io.FileUtils;
// the rest import
public class MyClass{
  public myMethod(){
   String src = "/home/user/dir_src";
   String dst = "/home/user/dir_dst";
   try{
      FileUtils.copyDirectory(new File(src), new File(dst)); 
   catch(IOException e){
      e.printStackTrac();
   }
  }
} 
```

# php - PHP 会话变量正在重置

> ID：12762190
> 
> 赞同：0
> 
> 时间：2012-10-06T17:38:00.503
> 
> 标签：php, session-variables, overwrite

我一直在查看在 PHP 4 服务器上运行的脚本中的问题（我知道......他们正在升级，但他们需要修复仍在 PHP 4 上的服务器。）

我在下一页开始时将会话变量重置为不同的值时遇到问题。这是我为达到这一点而进行的测试，现在我不确定发生了什么。

页面结构：main.php -> 首先调用 start_page.inc。main.php -> 最后调用 footer.inc。

这是正在发生的步骤以及我无法弄清楚的步骤：

`start_page.inc: echos 'test2'`（起始页打印出 的值`$_SESSION['test']`）

`default.php: echos 'test2'`（default.php 打印出 的值`$_SESSION['test']`）

`default.php: SET 'test2'`（default.php 将值设置`$_SESSION['test']`为`test2`）

`footer.inc: SET 'test'`（footer.inc 将值设置`$_SESSION['test']`为`test`）

`footer.inc: echos 'test'`（footer.inc 打印出 的值`$_SESSION['test']`）

无论我刷新页面多少次，它总是以这种方式出现，只有一个例外。第一次设置会话变量时，它`test`会在下一次刷新时回显。

任何人都了解为什么/如何发生这种情况以及我如何解决这个问题？我在 PHP 5 服务器上测试了这些文件，实际上得到了相同的结果。

前两个回声应该始终是`test`，除非我遗漏了什么。

我已经尝试将其剥离到没有附加值的测试页面，并且似乎无法重现它......测试变量没有被覆盖。我专门为此测试创建了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:42:47.407

我记得的可能问题是：您没有使用`session_start()`或远程端不支持或禁用 cookie，如果是第二种情况，您必须使用另一种方式通过`PHPSESSID`（通常虽然`$_GET`）。

# jquery - 试图操纵类属性

> ID：12762201
> 
> 赞同：0
> 
> 时间：2012-10-06T17:38:47.047
> 
> 标签：jquery, twitter-bootstrap

有人可以告诉我我在这里做错了什么。尝试将类属性删除/添加到 li 以便在单击时激活正确的属性：http: [//jsfiddle.net/cyberpuunk/D2RLR/2372/](http://jsfiddle.net/cyberpuunk/D2RLR/2372/)

```
<div class="container">        
          <div class="span8">
              <ul class="nav nav-tabs gallery-nav">
                <li class="active">
                  <a href="#"<strong>All</strong></a>
                </li>
             <li><a href="#"><strong>link1</strong></a></li>
           <li><a href="#"><strong>link2</strong></a></li>
             </ul>
              </div>
   <div class="row">
       <div class="span12">
           <div class="page1">qwer</div>
            <div class="page1">asdf</div>
            <div class="page1">zxcv</div>
       </div>  
    </div>    
</div> 
```

```
$('.page1:gt(0)').hide();

$('ul.gallery-nav li').click(function(e) {
    e.stopPropagation();
    var liIndex = $(this).index();
    $('.page1').hide().eq(liIndex).show();
    $(this).removeClass("active");
    eq(liIndex).addClass("active");
}); // end click 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:43:25.990

```
$('ul.gallery-nav li').click(function(e) {
    e.stopPropagation();
    $('.page1').hide().eq($(this).index()).show();
    $('ul.gallery-nav li').removeClass("active");
    $(this).addClass("active");
}); 
```

[**小提琴**](http://jsfiddle.net/D2RLR/2373/)

你有一个语法错误

```
eq(liIndex).addClass("active"); 
```

[`.eq()`](http://api.jquery.com/eq/)是一个 jQuery 对象方法，而不是一个可以单独使用的函数。这可以通过使用来解决，`$('ul.gallery-nav li').eq(liIndex).addClass("active");`但是仍然会有一个逻辑缺陷：

```
$(this).removeClass("active"); 
```

您应该`add`而不是`remove`类，因为`this`引用单击`li`而不是您将处理程序附加到的整个列表项组。话虽如此，您的代码的固定版本是：

```
 $('ul.gallery-nav li').removeClass("active");
    $(this).addClass("active");
//as $(this) references the clicked li, you don't need $('ul.gallery-nav li').eq(liIndex) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T17:43:34.787

出于一个奇怪的原因，您正在编码`$(this).removeClass('active')`，请注意您应该首先创建一个 jQuery 对象然后调用`eq`方法，请尝试以下操作。

```
$('ul.gallery-nav li').click(function(e){
     e.stopPropagation();
     var liIndex = $(this).index();
     $('.page1').hide().eq(liIndex).show();
     $(this).addClass("active").siblings().removeClass('active')
}); 
```

[http://jsfiddle.net/54Xdr/](http://jsfiddle.net/54Xdr/)

# android - 仅更新 google play 中应用程序的描述？

> ID：12762203
> 
> 赞同：0
> 
> 时间：2012-10-06T17:38:56.140
> 
> 标签：android, google-play

我只想在 Google Play 上更新我的应用程序的描述，而没有其他更改。我在开发者控制台中进行了更改，但更新描述从未出现在我的应用程序的 google play 中。我是否有取消发布和重新发布应用程序？谢谢，-v-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:14:12.863

Google Play 通常需要 2-24 小时来更新应用说明、标题、屏幕截图等。请稍等。

# c++ - 映射/设置迭代器在 std::map 中不可递增

> ID：12762207
> 
> 赞同：2
> 
> 时间：2012-10-06T17:39:22.663
> 
> 标签：c++, std, stdmap

何时`it`是循环的最后一次迭代，在该迭代结束时将抛出此错误。

```
std::map<std::string,std::shared_ptr<Entity>> entities;
typedef std::map<std::shared_ptr<Entity>,std::vector<std::pair<std::shared_ptr<Entity>,const MTV*>>> colmap; 
```

```
std::map<std::string,std::shared_ptr<Entity>>::iterator it;
for(it = entities.begin();it!=entities.end();++it){
    std::map<std::string,std::shared_ptr<Entity>>::iterator it2;
    for(it2 = entities.begin();it2!=entities.end();++it2){
        MTV* mtv = new MTV(1,sf::Vector2f(1,0));
        collisions[it->second].push_back(std::make_pair(it2->second,mtv));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:24:24.797

迭代器不可能从显示的代码中突然变得不可增加。必须有其他代码导致错误。

# java - autowire 不适用于基于 jpa tomcat 和 jersey xml

> ID：12762209
> 
> 赞同：0
> 
> 时间：2012-10-06T17:39:24.000
> 
> 标签：java, spring, tomcat, jpa, jersey

我现在卡住了。

首先，我制作了从控制台运行的 Java 应用程序，它是基于注释的配置。
**从控制台运行**时，以下配置有效

```
@Configuration
public class JpaConfiguration {

  @Value("#{dataSource}")
  private javax.sql.DataSource dataSource;

  @Bean
  public Map<String, Object> jpaProperties() {
    Map<String, Object> props = new HashMap<String, Object>();
    props.put("hibernate.dialect", MySQL5Dialect.class.getName());
    props.put("javax.persistence.validation.factory", validator());
    props.put("hibernate.ejb.naming_strategy", ImprovedNamingStrategy.class.getName());
    return props;
  }

  @Bean
  public LocalValidatorFactoryBean validator() {
    return new LocalValidatorFactoryBean();
  }

  @Bean
  public JpaVendorAdapter jpaVendorAdapter() {
    HibernateJpaVendorAdapter hibernateJpaVendorAdapter = new HibernateJpaVendorAdapter();
    hibernateJpaVendorAdapter.setGenerateDdl(true);
    hibernateJpaVendorAdapter.setDatabase(Database.MYSQL);
    hibernateJpaVendorAdapter.setShowSql(false);
    return hibernateJpaVendorAdapter;
  }

  @Bean
  public PlatformTransactionManager transactionManager() {
    return new JpaTransactionManager(
        localContainerEntityManagerFactoryBean().getObject());
  }

  @Bean
  public LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean() {
    LocalContainerEntityManagerFactoryBean lef = new LocalContainerEntityManagerFactoryBean();
    lef.setDataSource(this.dataSource);
        lef.setPackagesToScan("domain");
    lef.setJpaPropertyMap(this.jpaProperties());
    lef.setJpaVendorAdapter(this.jpaVendorAdapter());
    return lef;
  }
}

@Configuration
@ImportResource("classpath:root-context.xml")
@PropertySource("classpath:database.properties")
public class DataSourceConfig {

    public DataSourceConfig() {}

} 
```

这是我的 root-context.xml，它位于 src/main/resources 包中

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/jdbc 
        http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
        http://www.springframework.org/schema/data/jpa 
        http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

    <context:property-placeholder location="classpath:database.properties" />

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close" 
        p:driverClass="com.mysql.jdbc.Driver"
        p:jdbcUrl="${jdbc.url}" 
        p:user="${jdbc.username}" 
        p:password="${jdbc.password}"
        p:initialPoolSize="0" 
        p:minPoolSize="0" 
        p:maxPoolSize="10"
        p:maxIdleTime="300" />

    <jpa:repositories base-package="domain" />
    <tx:annotation-driven transaction-manager="transactionManager" />
</beans> 
```

我的主要方法

```
public class ConsoleRun {

    public static void main(String[] args) throws Exception {

        final Logger log = LoggerFactory
                .getLogger("ConsoleRun");

        log.info("Starting application");

        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext();
        ctx.scan("*");
        ctx.refresh();

        TestDao testDao = ctx.getBean(TestDao.class);
        testDao.testUsersList();

        log.info("========GETTING ALL RESULTS==============");
        testDao.testResultsList();
    }
} 
```

我的用于访问控制台包中 DAO 的服务类

```
@Service
public class TestDao {

    static final Logger log = LoggerFactory.getLogger("TestDatabase");

    @Autowired
    private UserDao userDao;

    @Autowired
    private ResultDao resultDao;

    @Autowired
    private GameDao gameDao;

    public List<User> testUsersList() {
        log.info("Getting all users");
        List<User> users = userDao.findAll();
        for (User u : users) {
            log.info("User: {}", u);
        }
        return users;
    }

    public void testResultsList() {
        List<Result> results = resultDao.findAll();
        for (Result r : results) {
            log.info("Result: {}", r);
        }
    }

    public User findUserById(Long id) {
        return userDao.findById(id);
    }
} 
```

**从控制台开始时，上述代码有效**

**下面的代码不起作用**

现在我想在 Tomcat 容器中运行它时遇到问题。我正在尝试不同的方式来配置它。
如何为 Tomcat 重用我的 JpaConfiguration 类和 root-context.xml？

这是我目前在我的 web.xml 中的内容

```
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>Restful Web Application</display-name>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/app-config.xml</param-value>
    </context-param>

    <servlet>
        <servlet-name>jersey-serlvet</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>api</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jersey-serlvet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

我的 app-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                            http://www.springframework.org/schema/jdbc
                            http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
                            http://www.springframework.org/schema/tx
                            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                            http://www.springframework.org/schema/context
                            http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <jpa:repositories base-package="domain" />
    <context:component-scan base-package="domain,api,config" />

    <!-- Weaves in transactional advice around @Transactional methods -->
    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="dataSource" class="config.DataSourceConfig" />
    <bean id="JpaConfiguration" class="config.DataSourceConfig" />

</beans> 
```

**这是 userDao 不自动装配并抛出空指针异常的主要问题 Authresource**在 api 包中

```
@Component
@Path("/auth")
public class AuthResource {

    @Autowired
    UserDao userDao;

    @Autowired
    TestDao testDao;

    @GET
    @Path("/users")
    @Produces(MediaType.APPLICATION_JSON)
    public List<User> getAllUsers() {

        return userDao.findAll();
    }
} 
```

我的休息工作正常，我有简单的 REST 服务类，可以在 url localhost:8080/application/rest/hello/message 上运行

```
@Path("/hello")
public class HelloResource {
    @GET
    @Path("/{param}")
    public Response getMsg(@PathParam("param") String msg) {

        String output = "Jersey say : " + msg;
        return Response.status(200).entity(output).build();
    }
} 
```

tomcat 是否有可能直接从 java 配置文件加载配置？这就是我在 app-config.xml中所拥有的`<context:component-scan base-package="domain,api,config" />` 还有哪里可能是问题所在以及为什么我在 AuthResource 类中为 userDao 获得空指针异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:35:13.983

我认为您需要`ContextLoaderListener`将`web.xml`

```
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener> 
```

# ruby-on-rails-3 - 没有要加载的文件——使用 apache 乘客的带有 rails 应用程序的捆绑器

> ID：12762210
> 
> 赞同：0
> 
> 时间：2012-10-06T17:39:25.067
> 
> 标签：ruby-on-rails-3, apache, passenger

我正在使用 apache 乘客在本地开发中运行 rails 应用程序。我已经成功安装了 apache 乘客、mysql 和所有相关的东西。这是我的 appache/httpd.conf 文件代码

```
 LoadModule passenger_module /var/lib/gems/1.8/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
     PassengerRoot /var/lib/gems/1.8/gems/passenger-3.0.17
     PassengerRuby /usr/bin/ruby1.8

  NameVirtualHost *:80

  <VirtualHost *:80>
    ServerName foo.local
    DocumentRoot "/home/kashif/sunsspot_search/public"
    RailsEnv development

   <directory "/home/kashif/sunsspot_search/public">
Order allow,deny
Allow from all
   </directory>
</VirtualHost> 
```

我使用这个命令启动 apache sudo /etc/init.d/apache2 restart

然后这个消息来了

```
 [warn] NameVirtualHost *:80 has no VirtualHosts 
```

当我访问 foo.local/posts 然后我有这个错误

```
 no such file to load -- bundler 
```

请帮助。为什么会发生此错误，还请查看我的 apache 配置是否正确？

谢谢

# ios - 故事板、视图控制器和分段控件

> ID：12762212
> 
> 赞同：4
> 
> 时间：2012-10-06T17:39:36.620
> 
> 标签：ios

我在情节提要中有一个带有分段控件的视图控制器。分段控制从三种不同类型的显示器切换视图。为此，我隐藏/取消隐藏各种视图元素。这可行，但很难在 Xcode 故事板编辑器中编辑。我希望能够根据我正在处理的视图部分来打开和关闭图层。

有没有办法做到这一点？有没有更好的办法？

**更新：**

我倾向于在单独的 xib 文件中创建三个视图，并根据需要将它们加载到视图控制器视图中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:47:17.800

您可以在一个 Storyboard 文件中创建三个不同的 ViewController，并为每个视图控制器指定一个 Storyboard ID。不要将它们与 segue 连接。然后，您将容器视图拖放到您希望它们显示的位置，并删除自动生成的 ViewController。

然后，对我来说，以下代码有效：

```
-(void)loadSubviewAtIndex:(NSUInteger)idx;
{
    [self.subviewController.view removeFromSuperview];
    [self.subviewController removeFromParentViewController];

    NSString* subviewIdentifier = [self.subviewIdentifiers objectAtIndex:idx];
    subviewController = [self.storyboard instantiateViewControllerWithIdentifier:subviewIdentifier];
    CGRect frame = self.view.bounds;
    subviewController.view.frame = frame;

    [self.view addSubview:self.subviewController.view];
    [self addChildViewController:self.subviewController];
} 
```

在这里，我假设您有一个属性`subviewIdentifiers`，它是一个 NSArray 和一个分段控件索引到 Storyboard ID 的隐式映射，以及`IBOutlet UIViewController* subviewController`您将容器视图链接到的一个。只需从分段控制操作中调用此方法。

# java - 从包内部访问父文件夹包

> ID：12762216
> 
> 赞同：3
> 
> 时间：2012-10-06T17:40:00.370
> 
> 标签：java, packages

如果我在包中有一个类，`mypackage.myclass`并且想要访问与包的根目录（不在包内）位于同一文件夹中的包的类，那么`anothepackage.anotherclass`我该怎么做？

代码中的示例：

```
// directories are preceeded by a DIR, files are precedded by a CLASS
// any level deeper is preceeded by a [Tab]
DIR mypackage
    CLASS myclass
    DIR myinnerpackage
        CLASS myinnerclass
DIR anotherpackage
    CLASS anotheclass
CLASS yetanotherclass
DIR org
    DIR apache
        DIR commons
            DIR exec
                CLASS DefaultExecutor 
```

在文件 myclass 中：

```
package mypackage;

public class myclass{
    // simplest example  code I can come up with
    org.apache.commons.exec.DefaultExecutor exec = new org.apache.commons.exec.DefaultExecutor();
} 
```

为什么这段代码对我不起作用？

通常如何`myclass`访问`anotherclass`或`yetanotherclass`如何`myinnerclass`访问它们？尽量避免导入，因为我只想使用每个类的某些成员（某些变量具有相同的名称并且会搞砸）！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:41:49.310

使用相对路径：

```
String dir = "../anotherpackage/anotheclass";
              ^
              |
              -- (go one level up) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T17:50:18.010

爪哇对吗？

在我的班级里面

```
import anotherPackage.anotherClass; 
```

然后在你的 myClass 里面你可以使用

```
 anotherClass ac=new anotherClass(); 
```

然后使用对象“ac”，您可以访问任何 anotherClass 属性。

您可能想阅读有关包和导入的信息

在不使用导入的情况下进行编辑我可以使用完全限定名称的概念试试

```
anotherPackage.anotherClass ac=new anotherPackage.anotherClass() 
```

然后使用 ac toacees anotherClass 属性

顺便说一句，不同的类有一些相同的变量，导入可能会搞砸。Java 围绕对象工作，相同的名称不会真的搞砸。即使某些变量是静态的，您也将使用 classnames.staticVar 进行访问。所以没有太多的混乱。:-)

更新：下面的讨论已移至聊天，因为它从聊天中获得了一些有用的片段

Askee 面临类路径问题

CLASSPATH ，顾名思义，它是类的路径。当我们编译一个java文件时，编译器会在当前目录和类路径中寻找类需要的资源。一切都不能在同一个目录中（实际上可以，:-)），所以我们使用

```
set CLASSPATH 
```

设置类路径以及在哪里寻找类

在问题中，ckass myClass 没有被编译为

```
org.apache.common.exec.DefaultExecutor was not in classpath 
```

建议在类路径上设置父目录以使其工作

```
javac -classpath %cd%\.. myclass.java 
```

# android - NFC 标签未在 Android 上的浏览 器中打开 URL

> ID：12762220
> 
> 赞同：2
> 
> 时间：2012-10-06T17:40:19.460
> 
> 标签：android, nfc, ndef

我在包含以下 URL 的 Mifare Classic 标签上记录了 NDEF 消息：

```
http://192.168.195.104/micha/?id=1234 
```

它链接到我的网络服务器，我想从我的 Android 手机上的数据库中读取数据。当我在浏览器中键入该地址时，请求的页面会按原样打开。但是当我尝试使用 NFC 标签打开它时，会出现一个白屏，其中显示：

```
Arguments: http://192.168.195.104/micha/?id=1234 
```

存储其他地址（我试过 google.com）工作得很好。所以我想知道在 NDEF 记录中使用 PHP 或 IP 地址是否存在任何已知问题？或者任何其他想法为什么它不起作用？

这里是消息的十六进制代码：

```
00 00 03 34 d1 01 1f 55 03 31 30 02 2e 31 36 38
2e 31 39 35 2e 31 30 34 2f 6d 69 63 68 61 2f 3f
69 64 3d 31 32 33 34 fe 00 00 00 00 00 00 00 00 
```

这真的很紧急，如果有人可以提供帮助，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:57:27.740

这应该只是工作。事实上，我只是自己尝试了一个类似的 URL，它可以在我的设备上运行。所以我的猜测是你手机上的另一个应用程序正在干扰和接收意图，而不是浏览器。您可以通过检查“adb logcat”来查看意图发送到哪个包。

# c++ - 将值添加到 .h 中的映射时出现 C++ 错误

> ID：12762221
> 
> 赞同：0
> 
> 时间：2012-10-06T17:40:28.437
> 
> 标签：c++, stl

我有一个 .h 文件，我在其中创建了一个字典，如下所示：-

```
map < char, string > mydictionary; 
```

我继续将值填充为：-

```
string t = "test";
mydictionary['a'] = "asdf";
mydictionary['b'] = t; 
```

当我尝试构建项目时，我收到上面提到的两行错误`C++ requires a type specifier for all declarations`。不幸的是，我发现错误消息非常神秘，并且不确定如何处理/解决它。

为什么会发生此错误？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T17:48:21.697

您不能将语句放在全局范围内；语句只能进入函数。（请注意，这与变量初始化程序不同，变量初始化程序可以进入全局范围）。

您将需要在函数中初始化映射，或者（在 C++11 中）使用初始化列表：

```
map < char, string > mydictionary {{'a', "asdf"}, {'b', t}}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T17:46:54.667

你不能拥有这些

```
mydictionary['a'] = "asdf";
mydictionary['b'] = t; 
```

在函数之外。您需要将它们移动到一个函数内（在其他函数中`main`或其他函数中并调用它）。

任何与定义或声明不同的东西都必须放在函数内。

# javascript - Knockout.js 中的 $index 以显示字母而不是数字

> ID：12762223
> 
> 赞同：1
> 
> 时间：2012-10-06T17:40:48.463
> 
> 标签：javascript, html, knockout.js

我想在 KnockoutJS 中使用 $index 来显示字母而不是数字。例如，

A.项目 1
B. 项目 2
C. 项目 3

我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:09:21.730

如果适合您的需要，您可以使用`ol`with a`list-style-type`来执行此操作。`upper-alpha`例如：

**HTML：**

```
​&lt;ol data-bind​​​​​​​​​​​="foreach: items" class="alpha">
    <li data-bind="text: $data"></li>
</ol>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS：** ​​​</p>

```
.alpha {
    list-style-type: upper-alpha;
}​ 
```

**JavaScript：**

```
function ViewModel() {
    this.items = ko.observableArray([
        "Apples",
        "Oranges",
        "Bananas"
    ]);
}
var model = new ViewModel();

ko.applyBindings(model);​ 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/CCNtR/1/](http://jsfiddle.net/andrewwhitaker/CCNtR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:11:24.520

看看这个小提琴：http: [//jsfiddle.net/jearles/RhmTb/19/](http://jsfiddle.net/jearles/RhmTb/19/)

关键是编写一个视图模型方法来将索引转换为字母。

```
<div data-bind="foreach: names">
  <div>
    <span data-bind="text: $root.indexLetter($index())"></span>.
    <span data-bind="text: $data"></span>
  </div>      
</div> 
```

--

```
var viewModel = {
  names : ['one', 'two', 'three', 'four', 'five', 'six'],
  indexLetter : function(index) {
    return String.fromCharCode(65 + index);
  }
}

ko.applyBindings(viewModel); 
```

# iphone - 我怎么知道我是否应该继续支持 OS 4.3 等？

> ID：12762225
> 
> 赞同：0
> 
> 时间：2012-10-06T17:40:53.387
> 
> 标签：iphone, ios

我现在写了一些应用程序，我一直支持 iOS 4.3+ 但是，现在苹果已经到了 iOS 6，我想知道我是否应该继续支持旧的 iOS？

有没有办法告诉我的应用程序用户正在使用哪些 iOS（计数），以便我可以确定要支持什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:48:35.093

如果没有关于您的用户使用的 iOS 版本的数据，您最好的选择是查看其他人的数据。David Smith 的应用有声读物显示 3.9% 的用户使用的是 iOS 4.3。

[http://david-smith.org/iosversionstats/](http://david-smith.org/iosversionstats/)

# c# - Windows Phone：如何在指定范围内使用我的应用程序查找人员或电话？

> ID：12762228
> 
> 赞同：0
> 
> 时间：2012-10-06T17:41:18.687
> 
> 标签：c#, silverlight, windows-phone-7, location

我创建了一个类似于社交网络的应用程序。现在，如果我在我的应用程序中点击“搜索朋友”按钮，我应该能够在 5 英里半径范围内找到正在使用此应用程序的其他人（朋友）。我该怎么做呢？

顺便说一句，我正在使用 Windows Phone 7.1.1 sdk。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:15:52.730

正如迈克尔建议的那样，您需要在服务器端管理它。定期收集坐标（[http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinatewatcher%28VS.92%29.aspx](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinatewatcher%28VS.92%29.aspx)）并将它们推送到服务（WCF、REST 或否则）您在您控制的服务器上公开。在服务器上，将坐标存储在某种数据库中。支持空间查询的一种是最简单的，但不是必需的。MSSQL 允许定义可以存储纬度/经度元组的地理类型列。

然后，当您的成员之一查询附近的用户时，收集该用户的当前位置，将其推送到服务器，并运行查询以查找具有当前距离内的点的其他用户。有关SQL Server 的示例，请参阅[http://msdn.microsoft.com/en-us/library/ff929109.aspx 。](http://msdn.microsoft.com/en-us/library/ff929109.aspx)

相同的信息集可以存储在 MySQL 或任何其他 RDBMS 中，但根据它们的功能集，您可能需要自己进行计算。如果你想做一个很大的圆距离，这是一个有趣的问题，可以归结为短距离的勾股定理或一些三角函数。有关更多信息，请参见[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)。

# android - 调试模式下的安卓apk

> ID：12762234
> 
> 赞同：0
> 
> 时间：2012-10-06T17:41:49.067
> 
> 标签：android, debugging

我对调试模式有一些疑问。我有带有文件 buildconfig.debug 的应用程序在哪里

`debug = true`

1.  这是否意味着，我的应用程序处于调试模式
2.  如何在 debug=false 中更改它
3.  我可以在清单中设置 android:debuggable="false" 以便我的应用程序处于发布模式吗

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:55:06.917

编辑：如果您使用带有 ADT 插件的 Eclipse，创建签名 apk 的最简单方法，只需单击 File->Export，Export Wizard 将引导您完成整个过程。

“要从 Eclipse 中导出未签名的 APK，请右键单击 Package Explorer 中的项目，然后选择 Android Tools > Export Unsigned Application Package。” 然后您必须使用 Jarsigner 工具等对其进行签名。请参阅下面的说明链接。如果您不使用 Eclipse，也有说明。

[链接到说明](http://developer.android.com/tools/publishing/app-signing.html#releasecompile)

确保在安装发布模式 apk 之前从设备上卸载调试模式 apk，否则您可能会遇到问题。

# shell - grep/sed : 忽略一个数字

> ID：12762239
> 
> 赞同：0
> 
> 时间：2012-10-06T17:42:23.687
> 
> 标签：shell, sed

例如，当我使用命令时

```
grep -c "a" output output2 | sed 's/[^0-9]//g' 
```

结果是因为`0`它`output`的名字。我想以 的名义忽略它。例如，知道名称可能不同，我该怎么做？`20``output2``2``output2``output3`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:49:27.283

把所有东西都删掉，除了最后的数字。

```
grep -c "a" output output2 | sed 's/^.*:\([0-9]*\)/\1/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:45:44.640

不要使用`sed`. 对于不起作用的情况，您应该使用`tr`. （例如，替换`sed 's/[^0-9]//g'`为`tr -dc 0-9`，这几乎是相同的，但也会删除尾随的换行符。这并不能解决您的问题；我只是指出您不应该`sed`用来做`tr`更好的工作。）冒号分隔输出的第二个字段，使用`cut`：

```
grep -c a output output2 | cut -d: -f2 
```

# websocket - WebSockets - 一个还是多个？

> ID：12762250
> 
> 赞同：3
> 
> 时间：2012-10-06T17:43:55.370
> 
> 标签：websocket, tomcat7

我正在玩 WebSockets 来获得乐趣，在后端运行 Tomcat。如果我想与客户端共享多个数据流，是每个流都有一个 WebSocket 还是在一个共享的 WebSocket 上多路复用它们？

每个流都有一个 WebSocket 似乎更容易。我不需要客户端和服务器上的高级逻辑将所有数据集中到一个管道中，并且我不需要数据格式中的任何开销来指示每个帧的源/目标。

但是在一个客户端页面上使用多个 WebSockets (5-10) 有什么缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T20:50:59.177

当您想允许多个同时使用的用户时，您应该尽量减少每个用户的连接数，因为 TCP/IP 服务器可以同时打开的连接数不是无限的。在 webservers 配置中，同时连接的数量受到操作系统的限制，最后但并非最不重要的是 IP 协议本身的架构（只有 2^16 个端口）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T18:41:20.527

我听说过一些浏览器可能会限制从同一选项卡/页面快速创建 Websocket 连接的谣言（但从未实际测试过）。如果它是真的，它会阻止恶意 Javascript 尝试使用 WebSockets 进行端口扫描。但是，除此之外应该没有任何问题。

但是，由于 WebSockets 是基于消息的（而不是原始流），因此通过一个连接对流量进行复用/解复用并不难。您可以在每条消息的开头添加一个字符以指示哪个流（或者如果您正在发送/接收 JSON 映射，则只需向每条消息添加另一个字段）。

# php - 删除了 .php 的 url 扩展名，但在右键单击时不起作用

> ID：12762251
> 
> 赞同：0
> 
> 时间：2012-10-06T17:44:02.077
> 
> 标签：php, .htaccess, mod-rewrite, right-click

通过编写以下代码，我成功地编辑了我的**.htaccess文件：**

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

这使我能够摆脱`.php`我的 url 上的扩展名。现在的问题是，如果我右键单击我网站的某个元素，我仍然会看到 .php 网址。如果我手动删除它，该站点仍然可见，所以我猜代码工作得很好，但是我怎样才能解决“右键单击问题”呢？

**PS：第二个问题......这会以任何方式影响我网站的搜索引擎优化吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:48:33.707

听起来您页面的代码仍然包含指向您页面的*链接*`.php`，其中包含扩展名。`.php`您可以通过修改自己的代码以从链接或资产名称的末尾删除来轻松摆脱它们。（不，这根本不会影响 SEO。）

# ios - 在 SKRecognizer 中检测到无语音

> ID：12762252
> 
> 赞同：1
> 
> 时间：2012-10-06T17:44:10.433
> 
> 标签：ios, cocoa, speech-recognition

我正在使用 Nuance 的 SpeechKit（特别是 SKRecognizer 类）来检测用户单击按钮时的语音。但是，如果他们在预定的时间内（3 秒左右）没有说话，我想取消录制会话。在 init 函数中传递“SKShortEndOfSpeechDetection”似乎不起作用，它只会在用户已经说出某些内容时停止录音。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T00:33:53.023

我以前使用过 Nuance 的 SpeechKit，不幸的是它缺少一些东西，我记得这就是其中之一。

您可以尝试使用一个完全免费的、开源的 iOS 语音框架[OpenEars](http://www.politepix.com/openears/)。

* * *

但是，如果您仍要尝试使用 SpeechKit，我能看到完成您想要的唯一方法是通过监视`audioLevel`. `SKRecognizer`根据[SpeechKit Docs](http://dragonmobile.nuancemobiledeveloper.com/public/Help/SpeechKitFrameworkReference_iOS/Classes/SKRecognizer.html#audioLevel)，这个属性描述：

> 录制期间最近音频的平均功率。

我已经检查过了，它不符合 KVO，所以你不能简单地添加一个观察者来监控它的变化。要监控其中的变化，您只需添加一个`NSTimer`每隔一段时间检查一次值即可。

```
NSTimer *timer = [NSTimer timerWithTimeInterval:0.1 target:self selector:@selector(monitorAudioLevel:) userInfo:nil repeats:YES];
[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

...

```
-(void)monitorAudioLevel:(NSTimer *)timer {

    float audioLevel = speechRecognizer.audioLevel;

    NSLog(@"level: %f", audioLevel);

    if(audioLevel > THRESHOLD) {
        //user has spoken
        [timer invalidate];
    }
    else {
        //user has not spoken
    }
} 
```

需要进行一些实验才能找到一个好的阈值。使用这种方法，您只需要跟踪用户是否说过话，然后使用另一个计时器来查看他们是否在您预定的截止时间之前说过话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:16:40.783

我有 bbodayle 推荐的类似实现，它确实有效。一些好的阈值是 0.4，这意味着带有一些远程背景噪音的静音。

# java - 在作业调度程序中使用 wait() 时出现 IllegalMonitorStateException

> ID：12762253
> 
> 赞同：4
> 
> 时间：2012-10-06T17:44:11.370
> 
> 标签：java, illegalmonitorstateexcep

我正在开发一个基于 Java RMI 的项目，该项目具有`Client-->Job Scheduler--> Server structure`.

我在作业调度程序类中有两种方法，如下所示。注释解释了每一行代码的用途。

```
private ConcurrentLinkedQueue<Job> jobQueue;
private ConcurrentLinkedQueue<ComputeServerRef> serverQueue;    
private final Object lock = new Object();
   /**
     * Accepts newly generated job from client and schedule it with idle Compute
     * Server or queue it in JobQueue depending on the availability of idle 
     * Compute Server in serverQueue.
     *
     * @param  job Job object 
     * 
     * @exception  RemoteException
     *     Thrown if any remote remote error occurred.
     */
    public Job acceptJob(Job job) throws RemoteException
    {           
        // Report a "Job scheduled" to all Loggers.        
        eventGenerator.reportEvent(new JobSchedulerEvent 
                ("Job "+job.getJobName()+" scheduled"));
        synchronized(lock)
        {
            while(true)
            {   
                if (!serverQueue.isEmpty())
                {
                    // If serverQueue is not empty then get one server from it,   
                    // remove it from the server queue and assign it a new job. 
                    ComputeServerRef csr = serverQueue.poll();
                    try
                    {                       
                        job = csr.performJob(job);                      
                        updateServerStatus(csr);
                        break;
                    }
                    catch(RemoteException re)
                    {                                               
                        continue;
                    }                                   
                }   
                else
                {           
                    jobQueue.add(job);  
                    try{
                        Thread.currentThread().wait();
                    }catch(InterruptedException e){
                        e.printStackTrace();
                        System.out.println("Thread Interrupted");
                    }               
                    // Check if it's the turn of current thread's job. 
                    // If not then goto wait();
                    while (!jobQueue.peek().getJobName().equals(job.getJobName()))
                    {
                        try{
                            Thread.currentThread().wait();
                        }catch(InterruptedException e){
                            e.printStackTrace();
                            System.out.println("Thread Interrupted");
                        }                   
                    }               
                    job=jobQueue.poll();                    
                }
            }
        }
        return job;
    }   

    /**
     * Adds newly started compute server to serverQueue
     *
     * @param  csr reference of the remote object ComputeServer.
     * 
     * @exception RemoteException
     *            Thrown if any remote remote error occurred
     */
    public void updateServerStatus(ComputeServerRef csr)throws RemoteException
    {       
        synchronized(lock)
        {
            serverQueue.add(csr);    
            Thread.currentThread().notifyAll();
        }
    } 
```

我在第一次调用`wait()`in 方法时收到 IllegalMonitorStateException `acceptJob()`。任何想法，如何解决这个问题。

谢谢，吉腾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:07:18.583

我不知道您的应用程序在逻辑上是否正确，但正在改变

```
Thread.currentThread().wait(); 
```

至

```
lock.wait(); 
```

应该使异常不被抛出。请反馈。

编辑：

在这两个地方，也改变

```
Thread.currentThread().notifyAll(); 
```

编辑^2：

解释看[这里](https://stackoverflow.com/questions/1537116/illegalmonitorstateexception-on-wait-call)和[这里](http://javarevisited.blogspot.com/2011/05/wait-notify-and-notifyall-in-java.html)

简而言之：

```
synchronized(object) {                        //1
   object.{wait(),notify(),notifyAll()};      //2
} 
```

第 1 行中的对象必须与第 2 行中的对象**相同**，[因为](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/IllegalMonitorStateException.html)如果它们不同，则会抛出 IllegalMonitorStateException

> 抛出以指示线程已尝试在对象的监视器上等待，或通知其他线程在对象的监视器上等待而不拥有指定的监视器。

*拥有监视器*意味着它需要在同步块内（如第 1,2 行所示）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:22:26.637

```
synchronized(lock) {
    Thread.currentThread().wait();
} 
```

您遇到异常是因为，您只能调用`wait`已锁定的对象..在这里您已锁定对象`lock`..所以应该在锁定时调用等待..

所以，你应该改变你的`wait`电话`lock.wait()`

```
synchronized(lock) {
        lock.wait();
} 
```

同样的情况是`notify`，你需要在你拥有的对象上调用它`locked`..

# php - 使用 PHP 检查 MySQL 数据库是否为空

> ID：12762254
> 
> 赞同：3
> 
> 时间：2012-10-06T17:44:36.213
> 
> 标签：php, mysql, database

创建数据库后，如何使用 PHP 检查数据库是否包含表或表结构？

**设想：**

当用户第一次访问系统时，它会创建一个没有表的默认数据库，然后在下一步中，用户应该通过上传`.sql`文件来导入自定义的数据库结构。我需要通过检查之前自动创建的默认数据库是否具有任何表结构来检查他们是否已导入数据库或已跳过该步骤。

当我执行`mysql_list_tables(defaultDBName)`它只返回*“**您的 SQL 查询已成功执行**” ，但在***phpMyAdmin**中没有结果集。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T17:47:17.450

```
<?php
$dbname = 'mysql_dbname';

if (!mysql_connect('mysql_host', 'mysql_user', 'mysql_password')) {
    echo 'Could not connect to mysql';
    exit;
}

$sql = "SHOW TABLES FROM $dbname";
$result = mysql_query($sql);

if (!$result) {
    echo "DB Error, could not list tables\n";
    echo 'MySQL Error: ' . mysql_error();
    exit;
}

while ($row = mysql_fetch_row($result)) {
    echo "Table: {$row[0]}\n";
}

mysql_free_result($result);
?> 
```

来自文档[http://php.net/manual/en/function.mysql-list-tables.php](http://php.net/manual/en/function.mysql-list-tables.php)

您可以使用`if(mysql_num_rows($result) > 0)`而不是循环通过 $result..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T17:55:06.043

不鼓励使用 mysql_query 和 mysql_list_tables。相反，建议您使用 mysqli 函数。

```
<?php
    $link = mysqli_connect("localhost", "my_user", "my_password", "world");

    if ($result = mysqli_query($link,"SHOW TABLES [FROM db_name] [LIKE 'pattern']")) {
        // Check mysqli_num_rows($result). 0 means you do not have your table.
    }

 ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T17:53:54.053

如果您觉得将来需要一些 where 子句或类似的东西，请使用：

```
SELECT table_name FROM information_schema.tables WHERE table_schema = 'somedbname' 
```

如果您正在寻找特定的表格或表格，您可以使用

```
SELECT table_name FROM information_schema.tables WHERE table_schema = 'dbname' AND table_name = 'tablename' 
```

如果您想了解更多信息，请查看

```
SELECT * FROM information_schema.tables WHERE table_schema = 'somedbname' 
```

返回

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T17:46:24.323

您可以使用该`show tables`命令检查数据库中有哪些表。如果返回为空，则数据库为空。

# android - 处理来自异步 Http 请求的 UTF-8 响应

> ID：12762255
> 
> 赞同：0
> 
> 时间：2012-10-06T17:44:43.723
> 
> 标签：android, json, asynchronous, utf-8

我一直在努力解决这个问题。我有一个返回基于 UTF 的数据的 json 提要

例如：

{"statusCode":200,"body":[{"wall_id":889370,"posted_by":"nicol","poster_id":1113,"poster_image_thumbnail":"http://www.mface.me/images/头像/thumb_f713034d70bcd5e4d68b5ed5.jpg","post_type":"profile","post_content":[{"text":"咯....等

我可以成功地将它读入一个 json 对象，但是当我显示“文本”中的值时，我得到的只是问号，当我打印到控制台时也是一样的。

相同的提要适用于我的 iPhone 应用程序，没有任何问题。

任何建议都非常感谢

编辑：

我可以肯定地说，我正在测试的手机正在运行 Ginger bread，并且显示 UTF-8 字符没有问题。它一定是异步 http 读取 UTF 字符的方式。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:04:46.757

感谢您的回复，我想我已经弄清楚了。好吧，至少我是这么认为的。文本似乎以 UTF 正确显示。

对于其他想知道答案的朋友，这就是我所做的

```
tmpPostContent.text=new String(postContentRecord.getString("text").getBytes("UTF-8"), "UTF-8"); 
```

我不确定这是否确实是正确的解决方案，但似乎可行。如果我错了，请纠正我。

# keyboard - 键入时禁用快捷方式

> ID：12762256
> 
> 赞同：0
> 
> 时间：2012-10-06T17:44:57.087
> 
> 标签：keyboard, automation, shortcut, autohotkey

我使用以下 AutoHotKey 代码在 Adob​​e Reader 中显示“转到页面”对话框：

```
SetTitleMatchMode, 2

#ifWinActive Adobe Reader
    p:: Send ^+n
#ifWinActive 
```

问题是它阻止我`P`在查找文本框中键入密钥。如何在键入时禁用该快捷方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:32:55.917

这将允许您在 Acrobat Reader 中按 p 并跳转到下一页。当您按 ^f 进行搜索时，按`p`只会导致 ap 被发送，直到您按 Enter，这将返回按`p`行为再次发送 ^N。

```
SetTitleMatchMode, 2 ; Put this line in the beginning of your script to allow flexible searching in the window title.

#ifWinActive Adobe Reader ; The following lines ONLY work inside Acrobat Reader.
    ~^f::ARSearchActive = 1 ; Let ^f go through to the O/S and set a variable.
    ~Enter::ARSearchActive = 0 ; Let Enter go through to the O/S and reset the variable.

    p:: ; Action to do when p is pressed
    If (ARSearchActive = 1) ; This is true AFTER you pressed ^f.
        Send, p ; If search has been activated, just send p
    else ; This is true after you pressed Enter.
        Send, ^+n ; If search is not activated, send ^N
    Return
#ifWinActive ; End of Adobe Reader specific portion. 
```

我没有使用 Acrobat Reader 对此进行测试，因为我使用的是 Foxit，但我使用记事本对其进行了测试，并按预期执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T16:49:22.040

这是基于您使用`Ctrl`+`F`打开搜索框、键入文本并按 Enter 键结束的评论：

**根据 OPs 注释**编辑了代码：****

 **```
SetTitleMatchMode, 2

mode := "hotkey_mode"

#If, WinActive("Adobe Reader") && mode = "hotkey_mode"
    p:: Send ^+n

    ~^f::
        Hotkey If, WinActive("Adobe Reader") && mode = "hotkey_mode"
        Hotkey p, off
    return

    ~Enter::
    ~Esc::
        Hotkey IfWinActive, Adobe Reader
        Hotkey p, on
    return

    ^t::mode := "typing_mode"   

#If, WinActive("Adobe Reader") && mode = "typing_mode"
    ^t::mode := "hotkey_mode" 
#If 
```

我添加了一个`ESC`热键来做同样的事情`Enter`，因为你可能会用它`ESC`来退出查找对话框。此外，在我的 Adob​​e Reader 版本中，按下`Enter`也用作*Find Next*的快捷方式，所以如果我是你，我会禁用`Enter`热键并仅`ESC`用于转义查找对话框。

`Ctrl`最后，一般提示：使用+之类的热键通常`P`比`p`避免此类并发症更容易。实际上，如果您不使用`Ctrl`+`P`触发的打印命令，您可能会考虑使用`Ctrl`+`P`而不是`p`作为您的热键（或者即使您打印，但很少，因为您仍然可以从菜单）**

# opengl - OpenGL GL_POLYGON 无法正常运行

> ID：12762257
> 
> 赞同：1
> 
> 时间：2012-10-06T17:45:15.690
> 
> 标签：opengl, glsl, polygon, fragment-shader, vertex-buffer

我有一个与 OpenGL 相关的问题。每当我尝试使用顶点缓冲区中的四个顶点绘制一个简单的多边形时......什么都没有发生。但是，它会在 GL_TRIANGLES 或 GL_TRIANGLE_STRIP 模式下绘制形状，尽管会变形。难道我做错了什么？

相关代码：

顶点数组：http: [//i.imgur.com/nEcbw.png](http://i.imgur.com/nEcbw.png)

GL_POLYGON：http: [//i.imgur.com/idfFT.png](http://i.imgur.com/idfFT.png)

GL_TRIANGLES：http: [//imgur.com/84ey3,idfFT,nEcbw#0](http://imgur.com/84ey3,idfFT,nEcbw#0)

GL_TRIANGLE_STRIP：http: [//i.imgur.com/JU3Zl.png](http://i.imgur.com/JU3Zl.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T18:23:43.387

> 我正在使用向前兼容的 3.2 核心配置文件

首先，*永远不要*使用“向前兼容的核心配置文件”。您应该只使用核心配置文件；停止使用前向兼容性位。这是毫无意义。

更重要的是，`GL_POLYGON`它不是核心 OpenGL 配置文件的一部分。它[在 3.1 中被删除。](http://www.opengl.org/wiki/History_of_OpenGL#Deprecation_Model)因此，您的代码可能会给您一个`GL_INVALID_ENUM`您忽略的错误。

最后，始终在您的问题中发布您的 OpenGL 版本和配置文件。

# java - 在 Struts 中运行拦截器

> ID：12762259
> 
> 赞同：1
> 
> 时间：2012-10-06T17:45:22.733
> 
> 标签：java, struts2, web

我一直在尝试在我的项目中运行以下代码。整个项目工作正常，但拦截器部分没有显示任何结果。我是拦截器部分的新手，所以如果我的代码缺少某些东西，请告诉我。我也想知道如果要运行拦截器的唯一更改是通过添加拦截器标签在 struts.xml 文件中完成？

```
enter code here  
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
<constant name="struts.devMode" value="true"/>
<package name="default" namespace="/" extends="struts-default">
   <interceptors>  
   <interceptor name="timer" class=".."/>
   <interceptor name="logger" class=".."/>
   </interceptors>
   <action name="HelloWorld">
      <result>/HelloWorld/HelloWorld.jsp</result>
      <interceptor-ref name="timer"/>
      <interceptor-ref name="logger"/>
    </action>
    <action name="SayHello" class="com.sapient.test.HelloAction">

        <result name="SUCCESS">/HelloWorld/DisplayHello.jsp</result>
        <result name="INPUT">/HelloWorld/HelloWorld.jsp</result>
           <interceptor-ref name="timer"/>
           <interceptor-ref name="logger"/>

    </action>
</package> 
```

请注意，当我添加拦截器代码时，Web 应用程序的其余部分工作正常。Web 应用程序的其余部分在运行时运行，但拦截器部分不起作用。这不是缓存问题，因为我尝试多次清理服务器和目录但没有效果。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:19:09.093

请在 struts.xml 中配置拦截器，如下所示，

```
 <interceptor name="loginInterceptor" class="......." />
        <interceptor-stack name="loginInterceptorStack">
          <interceptor-ref name="loginInterceptor" />
          <interceptor-ref name="defaultStack" />
    </interceptors> 
```

然后将您的拦截器堆栈应用于操作，

```
 <action name="..." class=".....">
        <interceptor-ref name="loginInterceptorStack"></interceptor-ref>
        <result name="input">.....</result>
        <result name="success">...../result>
    </action> 
```

在操作配置的结果之前添加拦截器。还要在你的拦截器中添加正确的日志记录，这样你就可以在调用默认堆栈之前知道你的拦截器被调用了。

# apache - 在 wordpress 中使用 .htaccess 将域子文件夹重定向到域

> ID：12762261
> 
> 赞同：0
> 
> 时间：2012-10-06T17:45:28.233
> 
> 标签：apache, redirect, dns

我有一个在 example1.com/folder 或 www.example1.com/folder 上运行的 wordpress 博客。现在我必须将其重定向到 example2.com 或 www.example2.com 。如何使用 .htaccess 执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:52:01.160

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^((www.)?)example1.com [NC]
RewriteRule ^folder/(.*)$ http://www.example2.com/$1 [R=301,L] 
```

这将检查它是否接收到流量，`www.example1.com`或者如果接收到`example.com`，则发送任何内容到`/folder/.*`例如`www.example2.com/.*`：

`www.example1.com/folder/blah.html`变成`www.example2.com/blah.html`

# c# - 查找字符串是否为数组的替代方法

> ID：12762265
> 
> 赞同：-4
> 
> 时间：2012-10-06T17:45:59.267
> 
> 标签：c#

我不知道这个问题以前是否被问过。我知道这样做的方式有时并不方便。

```
string[] exts = { "png", "jpg", "gif" };
if (exts.Contains(Path.GetExtension(filename)))
{
} 
```

我想改变变量的位置

```
if(Path.GetExtension(filename) is in exts)
{

} 
```

无论如何，将不胜感激，LINQ，数组函数等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:49:53.630

您可以在其上编写一个扩展方法`string`，`string[]`并测试字符串是否在数组中（使用`Contains`）-然后您将拥有`"aString".IsIn(myArray)`.

```
public static bool IsIn(this string toTest, string[] exts)
{
  return exts.Contains(toTest);
}

if(Path.GetExtension(filename).IsIn(exts))
{

} 
```

# ruby-on-rails - Rspec测试在错误的环境中运行？

> ID：12762267
> 
> 赞同：5
> 
> 时间：2012-10-06T17:46:08.113
> 
> 标签：ruby-on-rails, selenium, solr, rspec, sunspot

我有一个使用硒运行的集成测试。在我之前，我使用 solr 构建了一些对象和索引。我可以在我的 subnsspot solr 测试日志中看到该活动。然后在我的测试中，我执行搜索并得到一个错误，因为我的 sunspot solr 服务器没有运行。那是因为它使用 RAILS_ENV = test 运行。

这是我之前的每个：

```
before :each do
 Sunspot.remove_all!(Residential)
 Sunspot.commit

  @prop1 = FactoryGirl.create(:residential, { subdivision: "Steiner Ranch", street_name: "propone" })
  @prop1.index!
  @prop2 = FactoryGirl.create(:residential, { subdivision: "Jester Estates", street_name: "proptwo" })
  @prop2.index!
  @prop3 = FactoryGirl.create(:residential, { subdivision: "Cypress Ranch", street_name: "propthree" })
  @prop3.index!
end 
```

这是我的测试：

```
it "single word", :js => true do
  visit '/'
  fill_in 'subdivision', :with => 'cypress'
  page.should_not have_content('propone')
  page.should_not have_content('proptwo')
  page.should have_content('propthree')
end 
```

知道为什么搜索在开发环境而不是测试环境中运行吗？我有 ENV["RAILS_ENV"] ||= 'test' 作为我的 spec_helper 的第一行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T17:59:31.683

我有同样的问题。事实证明，我运行的 Rails 应用程序实际上在配置文件中指定了 ENV["RAILS_ENV"] = 'development'（一个 Apache 配置文件，因为我们使用的是乘客）。

如果你是这种情况，那么你可以更换

```
ENV["RAILS_ENV"] ||= 'test' 
```

和

```
ENV["RAILS_ENV"] = 'test' 
```

在你的 spec_helper 中。

从那以后我就这样做了

1.  我们的生产机器上没有 RSpec
2.  我们不在生产环境中运行测试。

# android - android CountDownTimer - 滴答之间的额外毫秒延迟

> ID：12762272
> 
> 赞同：9
> 
> 时间：2012-10-06T17:47:13.037
> 
> 标签：android

根据我的观察，滴答之间的 android CountDownTimer countDownInterval 恰好不准确，countDownInterval 通常比指定的长几毫秒。我的特定应用程序中的 countDownInterval 是 1000 毫秒，只是以一秒的步长倒计时一定的时间。

由于这个延长的滴答声，当倒计时计时器运行足够长的时间时，我最终得到的滴答声比想要的要少，这会破坏显示的时间倒计时（当累积足够多的额外毫秒时，UI 级别会发生 2 秒的步骤）

查看 CountDownTimer 的来源，似乎可以对其进行扭曲，以便纠正这种不必要的不​​准确性，但我想知道 java/android 世界中是否已经有更好的 CountDownTimer 可用。

谢谢各位大侠指点...

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-06T18:06:28.950

**改写**

正如您所说，您还注意到下一次输入`onTick()`是根据上一次运行的时间计算的，这会在*每个*滴答声`onTick()`中引入一个微小的错误。我将 CountDownTimer 源代码更改为从开始时间开始以指定的时间间隔调用每个。*`onTick()`*

 *我在 CountDownTimer 框架上构建它，因此将[源代码](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/os/CountDownTimer.java/?v=source)剪切并粘贴到您的项目中，并为该类指定一个唯一的名称。（我叫我的 MoreAccurateTimer。）现在做一些改变：

1.  添加一个新的类变量：

    ```
    private long mNextTime; 
    ```

2.  改变`start()`：

    ```
    public synchronized final MoreAccurateTimer start() {
        if (mMillisInFuture <= 0) {
            onFinish();
            return this;
        }

        mNextTime = SystemClock.uptimeMillis();
        mStopTimeInFuture = mNextTime + mMillisInFuture;

        mNextTime += mCountdownInterval;
        mHandler.sendMessageAtTime(mHandler.obtainMessage(MSG), mNextTime);
        return this;
    } 
    ```

3.  更改处理程序的`handlerMessage()`：

    ```
    @Override
    public void handleMessage(Message msg) {
        synchronized (MoreAccurateTimer.this) {
            final long millisLeft = mStopTimeInFuture - SystemClock.uptimeMillis();

            if (millisLeft <= 0) {
                onFinish();
            } else {
                onTick(millisLeft);

                // Calculate next tick by adding the countdown interval from the original start time
                // If user's onTick() took too long, skip the intervals that were already missed
                long currentTime = SystemClock.uptimeMillis();
                do {
                    mNextTime += mCountdownInterval;
                } while (currentTime > mNextTime);

                // Make sure this interval doesn't exceed the stop time
                if(mNextTime < mStopTimeInFuture)
                    sendMessageAtTime(obtainMessage(MSG), mNextTime);
                else
                    sendMessageAtTime(obtainMessage(MSG), mStopTimeInFuture);
            }
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T19:35:06.557

所以这就是我想出的。它是对原始 CountDownTimer 的一个小修改。它添加的是一个变量 mTickCounter，它计算调用的刻度数。此变量与新变量 mStartTime 一起使用，以查看我们的刻度有多准确。基于此输入，调整到下一个刻度的延迟......它似乎做了我一直在寻找的事情，但我相信这可以改进。

寻找

```
// ************AccurateCountdownTimer*************** 
```

在源代码中找到我添加到原始类的修改。

```
package com.dorjeduck.xyz;

import android.os.Handler;
import android.os.Message;
import android.os.SystemClock;
import android.util.Log;

/**
 * Schedule a countdown until a time in the future, with regular notifications
 * on intervals along the way.
 * 
 * Example of showing a 30 second countdown in a text field:
 * 
 * <pre class="prettyprint">
 * new CountDownTimer(30000, 1000) {
 * 
 *  public void onTick(long millisUntilFinished) {
 *      mTextField.setText(&quot;seconds remaining: &quot; + millisUntilFinished / 1000);
 *  }
 * 
 *  public void onFinish() {
 *      mTextField.setText(&quot;done!&quot;);
 *  }
 * }.start();
 * </pre>
 * 
 * The calls to {@link #onTick(long)} are synchronized to this object so that
 * one call to {@link #onTick(long)} won't ever occur before the previous
 * callback is complete. This is only relevant when the implementation of
 * {@link #onTick(long)} takes an amount of time to execute that is significant
 * compared to the countdown interval.
 */
public abstract class AccurateCountDownTimer {

    /**
     * Millis since epoch when alarm should stop.
     */
    private final long mMillisInFuture;

    /**
     * The interval in millis that the user receives callbacks
     */
    private final long mCountdownInterval;

    private long mStopTimeInFuture;

    // ************AccurateCountdownTimer***************
    private int mTickCounter;
    private long mStartTime;

    // ************AccurateCountdownTimer***************

    /**
     * @param millisInFuture
     *            The number of millis in the future from the call to
     *            {@link #start()} until the countdown is done and
     *            {@link #onFinish()} is called.
     * @param countDownInterval
     *            The interval along the way to receive {@link #onTick(long)}
     *            callbacks.
     */
    public AccurateCountDownTimer(long millisInFuture, long countDownInterval) {
        mMillisInFuture = millisInFuture;
        mCountdownInterval = countDownInterval;

        // ************AccurateCountdownTimer***************
        mTickCounter = 0;
        // ************AccurateCountdownTimer***************
    }

    /**
     * Cancel the countdown.
     */
    public final void cancel() {
        mHandler.removeMessages(MSG);
    }

    /**
     * Start the countdown.
     */
    public synchronized final AccurateCountDownTimer start() {
        if (mMillisInFuture <= 0) {
            onFinish();
            return this;
        }

        // ************AccurateCountdownTimer***************
        mStartTime = SystemClock.elapsedRealtime();
        mStopTimeInFuture = mStartTime + mMillisInFuture;
        // ************AccurateCountdownTimer***************

        mHandler.sendMessage(mHandler.obtainMessage(MSG));
        return this;
    }

    /**
     * Callback fired on regular interval.
     * 
     * @param millisUntilFinished
     *            The amount of time until finished.
     */
    public abstract void onTick(long millisUntilFinished);

    /**
     * Callback fired when the time is up.
     */
    public abstract void onFinish();

    private static final int MSG = 1;

    // handles counting down
    private Handler mHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {

            synchronized (AccurateCountDownTimer.this) {
                final long millisLeft = mStopTimeInFuture
                        - SystemClock.elapsedRealtime();

                if (millisLeft <= 0) {
                    onFinish();
                } else if (millisLeft < mCountdownInterval) {
                    // no tick, just delay until done
                    sendMessageDelayed(obtainMessage(MSG), millisLeft);
                } else {
                    long lastTickStart = SystemClock.elapsedRealtime();
                    onTick(millisLeft);

                    // ************AccurateCountdownTimer***************
                    long now = SystemClock.elapsedRealtime();
                    long extraDelay = now - mStartTime - mTickCounter
                            * mCountdownInterval;
                    mTickCounter++;
                    long delay = lastTickStart + mCountdownInterval - now
                            - extraDelay;

                    // ************AccurateCountdownTimer***************

                    // take into account user's onTick taking time to execute

                    // special case: user's onTick took more than interval to
                    // complete, skip to next interval
                    while (delay < 0)
                        delay += mCountdownInterval;

                    sendMessageDelayed(obtainMessage(MSG), delay);
                }
            }
        }
    };
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T17:54:29.460

在大多数系统中，计时器从来都不是完全准确的。系统只有在没有其他事情可做时才执行计时器。如果 CPU 正忙于后台进程或不同的线程，那么它在完成之前不会调用计时器。

您可能会更幸运地将间隔更改为更小的值，例如 100 毫秒，然后仅在发生更改时才重新绘制屏幕。使用这种方法，计时器不会直接导致任何事情发生，它只是定期重绘屏幕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-27T06:37:57.037

我知道它很旧，但它是你永远需要的东西。我编写了一个名为 TimedTaskExecutor 的类，因为我需要每隔 x 毫秒运行一个特定命令，持续时间未知。我的首要任务之一是使 x 尽可能准确。我尝试使用 AsyncTask、Handlers 和 CountdownTimer，但都给了我不好的结果。这是课程：

```
package com.example.myapp;

import java.util.concurrent.TimeUnit;

/*
 * MUST RUN IN BACKGROUND THREAD
 */
public class TimedTaskExecutor {
// ------------------------------ FIELDS ------------------------------

/**
 *
 */
private double intervalInMilliseconds;

/**
 *
 */
private IVoidEmptyCallback callback;

/**
 *
 */
private long sleepInterval;

// --------------------------- CONSTRUCTORS ---------------------------

/**
 * @param intervalInMilliseconds
 * @param callback
 */
public TimedTaskExecutor(double intervalInMilliseconds, IVoidEmptyCallback callback, long sleepInterval) {
    this.intervalInMilliseconds = intervalInMilliseconds;
    this.callback = callback;
    this.sleepInterval = sleepInterval;
}

// --------------------- GETTER / SETTER METHODS ---------------------

/**
 * @return
 */
private IVoidEmptyCallback getCallback() {
    return callback;
}

/**
 * @return
 */
private double getIntervalInMilliseconds() {
    return intervalInMilliseconds;
}

/**
 * @return
 */
private long getSleepInterval() {
    return sleepInterval;
}

// -------------------------- OTHER METHODS --------------------------

/**
 *
 */
public void run(ICallback<Boolean> isRunningChecker) {

    long nanosInterval = (long) (getIntervalInMilliseconds() * 1000000);

    Long previousNanos = null;

    while (isRunningChecker.callback()) {

        long nanos = TimeUnit.NANOSECONDS.toNanos(System.nanoTime());

        if (previousNanos == null || (double) (nanos - previousNanos) >= nanosInterval) {

            getCallback().callback();

            if (previousNanos != null) {

                // Removing the difference
                previousNanos = nanos - (nanos - previousNanos - nanosInterval);

            } else {

                previousNanos = nanos;

            }

        }

        if (getSleepInterval() > 0) {

            try {

                Thread.sleep(getSleepInterval());

            } catch (InterruptedException ignore) {
            }

        }

    }

}

// -------------------------- INNER CLASSES --------------------------

/**
 *
 */
public interface IVoidEmptyCallback {
    /**
     *
     */
    public void callback();
}

/**
 * @param <T>
 */
public interface ICallback<T> {
    /**
     * @return
     */
    public T callback();
} 
```

}

以下是如何使用它的示例：

```
private boolean running;

Handler handler = new Handler();

handler.postDelayed(
    new Runnable() {
        /**
         *
         */
        @Override
        public void run() {
            running = false;
        }
    },
    5000
);

HandlerThread handlerThread = new HandlerThread("For background");
handlerThread.start();

Handler background = new Handler(handlerThread.getLooper());

background.post(
    new Runnable() {
        /**
         *
         */
        @Override
        public void run() {

            new TimedTaskExecutor(
                    10, // Run tick every 10 milliseconds
                    // The callback for each tick
                    new TimedTaskExecutor.IVoidEmptyCallback() {
                        /**
                         *
                         */
                        private int counter = 1;

                        /**
                         *
                         */
                        @Override
                        public void callback() {
                            // You can use the handler to post runnables to the UI
                            Log.d("runTimedTask", String.valueOf(counter++));
                        }
                    },
                    // sleep interval in order to allow the CPU to rest
                    2
            ).run(
                    // A callback to check when to stop
                    new TimedTaskExecutor.ICallback<Boolean>() {
                        /**
                         *
                         * @return
                         */
                        @Override
                        public Boolean callback() {
                            return running;
                        }
                    }
            );

        }
    }
 ); 
```

运行此代码将产生 500 次或多或少准确 x 的调用。（降低睡眠因子使其更准确）

*   编辑：似乎在带有 Lollipop 的 Nexus 5 中，您应该在睡眠因子中使用 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-18T14:07:14.353

正如 Nathan Villaescusa 之前所写，好的方法是减少“滴答”间隔，然后通过检查这是否实际上是新的秒来每秒触发所需的 ACTIONS。

伙计们，看看这种方法：

```
new CountDownTimer(5000, 100) {

     int n = 5;
     Toast toast = null;

     @Override
     public void onTick(long l) {

         if(l < n*1000) {
             //
             // new seconds. YOUR ACTIONS
             //
             if(toast != null) toast.cancel();

             toast = Toast.makeText(MainActivity.this, "" + n, Toast.LENGTH_SHORT);
             toast.show();

             // this one is important!!!
             n-=1;
         }

     }

     @Override
     public void onFinish() {
         if(toast != null) toast.cancel();
         Toast.makeText(MainActivity.this, "START", Toast.LENGTH_SHORT).show();
     }
}.start(); 
```

希望这对某人有帮助；p

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-04-20T06:16:30.150

我写了一个库来防止这种现象。
[https://github.com/imknown/NoDelayCountDownTimer](https://github.com/imknown/NoDelayCountDownTimer)

使用核心代码：

```
private long howLongLeftInMilliSecond = NoDelayCountDownTimer.SIXTY_SECONDS;

private NoDelayCountDownTimer noDelayCountDownTimer;
private TextView noDelayCountDownTimerTv;

NoDelayCountDownTimer noDelayCountDownTimer = new NoDelayCountDownTimerInjector<TextView>(noDelayCountDownTimerTv, howLongLeftInMilliSecond).inject(new NoDelayCountDownTimerInjector.ICountDownTimerCallback() {
    @Override
    public void onTick(long howLongLeft, String howLongSecondLeftInStringFormat) {
        String result = getString(R.string.no_delay_count_down_timer, howLongSecondLeftInStringFormat);

        noDelayCountDownTimerTv.setText(result);
    }

    @Override
    public void onFinish() {
        noDelayCountDownTimerTv.setText(R.string.finishing_counting_down);
    }
}); 
```

主要基本逻辑代码：

```
private Handler mHandler = new Handler(new Handler.Callback() {
    @Override
    public boolean handleMessage(Message msg) {

        synchronized (NoDelayCountDownTimer.this) {
            if (mCancelled) {
                return true;
            }

            final long millisLeft = mStopTimeInFuture - SystemClock.elapsedRealtime();

            if (millisLeft <= 0 || millisLeft < mCountdownInterval) {
                onFinish();
            } else {
                long lastTickStart = SystemClock.elapsedRealtime();
                onTick(millisLeft);

                // take into account user's onTick taking time to execute
                long delay = lastTickStart + mCountdownInterval - SystemClock.elapsedRealtime();

                // special case: user's onTick took more than interval to complete, skip to next interval
                while (delay < 0) {
                    delay += mCountdownInterval;
                }

                mHandler.sendMessageDelayed(mHandler.obtainMessage(MSG), delay);
            }
        }

        return true;
    }
}); 
```

[![记录](../Images/001dec0cb5394476c1cfc7d7249e0c48.png)](https://i.stack.imgur.com/9h1Cw.gif)*

# vector - 带有 WFS 协议的矢量图层

> ID：12762275
> 
> 赞同：0
> 
> 时间：2012-10-06T17:47:26.970
> 
> 标签：vector, gis, openlayers, geoserver

在向量层中是否必须使用带有 WFS 协议的 BBOX 策略？

如果没有 BBOX 策略，我无法显示此图层：

```
vLayer = new OpenLayers.Layer.Vector("Test", { 

    styleMap: new OpenLayers.StyleMap({ 
        "default": style 
    }), 
      maxExtent: new OpenLayers.Bounds(-180, -90, 180, 90).transform(geographic,mercator), 
      sphericalMercator: true,   
      protocol:  new OpenLayers.Protocol.WFS({   
      url: 'http://myDomain/geoserver/wfs', 
      featureType: "Layer_1",   
      featureNS: "http://mapmap.org", 
      srsName: "EPSG:3857", 
      version: "1.1.0", 
      extractAttributes: true, 
      isBaseLayer: false, 

        }) 
      }); 
```

我在萤火虫中没有收到任何请求。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:14:35.400

你试过 OpenLayers.Strategy.Fixed 吗？这应该请求您的数据一次，并且不会对缩放或边界的更改做任何事情。

顺便说一句：您有一个悬空逗号错误（`isBaseLayer: false,`），但这很可能不太相关。

# iframe - 如何在重定向时使 iFrame 扩展到整个页面大小？

> ID：12762278
> 
> 赞同：0
> 
> 时间：2012-10-06T17:47:55.547
> 
> 标签：iframe

我目前在我的 Moonfuit 网站上使用 iFrame 小部件从 TrafficWave 提交表单。但是，表单会正确重定向，不会扩展到全屏以容纳重定向 url，而是仅与 iFrame 小部件一样大。

我尝试过其他 html 提交表单，发现 JotForm 可以正确重定向和扩展 iFrame。我会使用 JotForm，但他们不使用自动回复器，我也无法将它们连接到我选择的外部 A/R。

如果您需要比较它们，我有这两种形式的代码。提前感谢您分享您对此问题的任何见解。:0)

珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:00:46.023

要使 iframe 像目标 url html 文档一样大，您需要告诉包含 iFrame 的页面内容的大小，然后您可以调整 iFrame 的大小。我遇到了类似的问题，我建议你使用这个插件：

[postMessage 插件](http://benalman.com/projects/jquery-postmessage-plugin/)

这里有一个针对您的案例的示例：

[我框架调整大小](http://benalman.com/code/projects/jquery-postmessage/examples/iframe/)

# javascript - Jquery - 将变量文本添加到滑块

> ID：12762291
> 
> 赞同：4
> 
> 时间：2012-10-06T17:50:02.400
> 
> 标签：javascript, jquery, jquery-ui, slider, jquery-ui-slider

```
$('#slider').slider({
    range: "min",
    value: 20,
    step: 5,
    min: 20,
    slide: function( event, ui ) {
        $( "#amount1" ).val( "$" + ui.value );
    }
}); 
```

这就是我现在拥有的，它是一个显示值的滑块。HTML部分如下：

```
<label for="amount">Offer:</label>
<input type="text" id="amount1" />
<div id="slider"></div> 
```

我想要的是在它下面有一个带有文本块的表格；除了我希望文本随着值的增加而改变。说，如果是的话`>= 20`，它会说“blah2”`< 40``"Blah1" =>40`

但是我在向幻灯片功能添加另一个事件时遇到了麻烦。

非常感谢您的帮助，我可以将它应用到很多事情上。通常每个脚本只有一个函数，我从来没有像这样对它们分层。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T17:56:00.830

您所要做的就是在现有函数中添加一段额外的代码来评估 的值`ui.value`：

```
$('#slider').slider({
    range: "min",
    value: 20,
    step: 5,
    min: 20,
    slide: function(event, ui) {
        $("#amount1").val("$" + ui.value);

        if (ui.value >= 20 && ui.value < 40) {
            $("#message").text("greater than or equal to 20 and less than 40");
        } else if (ui.value >= 40) {
            $("#message").text("greater than or equal to 40");
        }
    }
}); 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/WP29E/16/](http://jsfiddle.net/andrewwhitaker/WP29E/16/)

# django - 创建多个对象的字符串

> ID：12762293
> 
> 赞同：0
> 
> 时间：2012-10-06T17:50:07.817
> 
> 标签：django

我有这样的事情：

```
class Basket(models.Model):
    owner = models.ForeignKey(User, related_name='user_basket', verbose_name='Owner')
    name = models.CharField("Basket_Name", max_length=30)
    products = models.ManyToManyField('Product', through='BasketProduct', blank=True, null=True)

class BasketProduct(models.Model):
    product = models.ForeignKey('Product')
    basket = models.ForeignKey('Basket')
    quantity = models.IntegerField() 
```

我尝试从用户那里获取所有产品，`Basket`并以“笔记本 - 2，PC - 5，电话 - 1”的形式使用他们的价格和名称字符串创建

我的尝试：

```
user = request.user
b = Basket.objects.filter(owner=user)
bp = BasketProduct.objects.filter(basket=b)

for a in bp:
    a = '%s - %s' % (a.product, a.quantity)
    print a 
```

这会在 shell 中返回如下内容：

```
[06/Oct/2012 19:44:41] "GET /list/ HTTP/1.1" 200 0
PC - 3 #single object
Notebook - 1 #second single object 
```

我需要：字符串 =“PC - 3，笔记本 - 1”

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:53:05.053

您可以执行您已经在执行的前三个语句。然后[加入](http://docs.python.org/library/stdtypes.html#str.join)通过循环前三个语句产生的查询集返回的中间结果数组：

```
', '.join(['%s - %s' % (a.product, a.quantity) for a in bp]) 
```

# matlab - 如何根据特定行条件的最小值返回整个列？

> ID：12762300
> 
> 赞同：2
> 
> 时间：2012-10-06T17:50:42.633
> 
> 标签：matlab, matrix

我有以下内容：

一个=

```
 5     1     4
 2     1     1
 5     2     8 
```

我正在寻找返回第三行的最小值

`b = min(a(3,:));`

b =

```
 2 
```

我如何能够返回整个列（即 (1;1;2)），然后从矩阵中~~减去~~删除该列？

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T17:58:21.370

如果您想从整个矩阵中减去具有最小值的列（如最初询问的那样），请使用[bsxfun](http://www.mathworks.com/help/techdoc/ref/bsxfun.html)，如下所示：

```
[v, i] = min(a(3,:));
a = bsxfun(@minus, a, a(:, i)); 
```

更新：您可以像这样提取和消除该列`a`：

```
[v, i] = min(a(3,:));
col = a(:, i);
a(:, i) = []; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:02:31.493

为了删除列，使用

```
a(:,i) = []; 
```

`i`列的索引在哪里

# java - 不可序列化对象异常

> ID：12762301
> 
> 赞同：0
> 
> 时间：2012-10-06T17:51:02.067
> 
> 标签：java, serialization, memcached

我正在尝试在 Memcached 客户端中设置对象列表（可序列化）。我正在使用 set 方法进行操作。我收到此错误消息：

> 目标 VM 中发生异常：不可序列化对象

所以它不允许我在`MemcachedClient`对象中设置值。这是我的代码：

```
MemcachedClient client = CacheConnectionUtil.connectToCacheServer(this.applicationEnv);
client.set(generateCacheKey(namespace, key), expireInSeconds, value);
// value is a list of objects that implements serializable 
```

为什么我会收到此错误消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T18:20:53.503

从`Serializable`javadocs：

> 遍历图时，可能会遇到不支持`Serializable`接口的对象。在这种情况下，`NotSerializableException`将抛出并标识不可序列化对象的类。

Memcached 似乎隐藏了异常消息的其余部分，因此您必须自己识别不可序列化的对象。

你说那`values`是你自己的对象的列表。我的猜测是您的对象包含的东西不是也`Serializable`，或者它包含的东西*包含其他*不是的东西`Serializable`。遍历列表中对象的类，并确保它下面的每个对象都实现了`Serializable`.

例如，如果我有`A`工具`Serializable`：

```
public class A implements Serializable {
    private B b;
    // ...
} 
```

并且`B`没有：

```
public class B { ... } 
```

`A`然后，任何使用 an进行序列化的尝试`ObjectOutputStream`（这可能是 Memcached 库中的默认序列化程序正在执行的操作）都会抛出 a `NotSerializableException`，因为它的字段 ,`private B b`是不可序列化的类型，这就是您所得到的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:02:20.327

也许你的`MemcachedClient`类中的一个对象不能被序列化。您有 2 个选项来解决问题：

1.  确保那里的所有类都实现了`Serializable`接口。

    ```
    public class MemcachedClient {

        //AnotherClass must implement Serializable too.
        private AnotherClass anotherClassInstance;
    } 
    ```

2.  如果另一个类没有实现`Serializable`（并且你不能修改这些类来创建它们`Serializable`），那么添加`transient`关键字，这样这些对象就不会被序列化

    ```
    public class MemcachedClient {

        //AnotherClass doesn't implement Serializable.
        private transient AnotherClass anotherClassInstance;
    } 
    ```

如果您`AnotherClass`在反序列化`MemcachedClient`对象时必须有一个实例，那么您可以编写根据`readObject(ObjectInputStream is)`需要创建一个实例：

```
public class MemcachedClient {

    //AnotherClass doesn't implement Serializable.
    private transient AnotherClass anotherClassInstance;

    private void writeObject(ObjectOutputStream os) throws IOException, ClassNotFoundException {
        os.defaultWriteObject();
    }

    private void readObject(ObjectInputStream is) throws IOException, ClassNotFoundException {
        is.defaultReadObject();
        anotherClassInstance = new AnotherClass();
        //more logic to get a consistant AnotherClass instance.
    }
} 
```

* * *

根据 Brian 的评论，假设此类`MemcachedClient`来自第三方库并且您无法修改它，您将遇到第 2 点中描述的场景：

```
public class MyClass {

    //MemcachedClient can't be modified and doesn't implement Serializable interface
    //the only solution would be using the transient modifier
    private transient MemcachedClient memcachedClient;

    //MyClass attributes and methods...

    //If you need to keep a MemcachedClient instance when deserializing the object
    //just write the readObject method

    private void writeObject(ObjectOutputStream os) throws IOException, ClassNotFoundException {
        os.defaultWriteObject();
    }

    private void readObject(ObjectInputStream is) throws IOException, ClassNotFoundException {
        is.defaultReadObject();
        memcachedClient= new MemcachedClient();
        //more logic to get a consistant MemcachedClient instance.
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T17:56:00.283

确保您的对象实现`Serializable`（甚至是从您的对象引用的所有对象）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-25T11:47:45.710

我在序列化列表时遇到了类似的问题。我的问题原来是我使用的是 List.subList，即使 List 只包含可序列化的项目，subList 返回的 List 也不是可序列化的。一个快速的解决方案是做类似的事情

```
List mySublist = new ArrayList().addAll(originalList.subList(...)); 
```

# templates - 一个带有两个不同模板的 Symfony 2.0 Controller-Action

> ID：12762305
> 
> 赞同：2
> 
> 时间：2012-10-06T17:51:54.630
> 
> 标签：templates, view, symfony, twig

是否可以在 Symfony 2.0 中为一个动作分配两个不同的模板？在下面的代码中，我想用两个不同的模板渲染 IF 部分和 ELSE 部分。

```
 /**
 *
 * @Route("/", name="search")
 * @Template("Bundle:Search:search.html.twig")
 */
public function indexAction()
{
    if ($searchText == null) {

        return array('form' => $form->createView(), 'form2' => $form2->createView());

    } else {

        return array('applicants' => $appCount, 'pagination' => $pagination, 'form' => $form->createView(),'form2' => $form2->createView());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T17:59:17.610

您不能使用`@Template`注释来做到这一点，但您可以手动渲染每个：

```
if ($someCondition) {
    return $this->render('Bundle:Controller:template.html.twig', array(
        'some' => $thing,
    );
}

return $this->render('Bundle:Controller:another.html.twig', array(
    'another' => $thing,
); 
```

# objective-c - 如何使两个输入显示为一个输出？

> ID：12762308
> 
> 赞同：1
> 
> 时间：2012-10-06T17:52:18.930
> 
> 标签：objective-c

我有这两个输入

```
// @property (strong, nonatomic) IBOutlet UILabel *userOutput;
@property (strong, nonatomic) IBOutlet UITextField *userInput;
@property (strong, nonatomic) IBOutlet UITextField *userSecondInput; 
```

我希望发件人将两个输入结合起来，以单行形式出现在输出中

```
- (IBAction)setOutput:(id)sender {
    self.userOutput.text=self.userInput.text;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:57:14.903

尝试

```
self.userOutput.text = [self.userInput.text stringByAppendingString:self.userSecondInput.text]; 
```

# wpf - 获取数据网格行

> ID：12762310
> 
> 赞同：13
> 
> 时间：2012-10-06T17:52:24.530
> 
> 标签：wpf, datagrid, visibility, datagridrowheader

如何获取 DataGrid 中的行列表？不是绑定的项目，而是 `DataGridRows`列表。

我需要控制这些行的可见性，并且只能将其控制为 a`DataGridRow`而不是数据对象。

谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-06T18:34:52.437

[您可以使用ItemContainerGenerator](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainergenerator.aspx "项目容器生成器")获取该行。这应该工作 -

```
for (int i = 0; i < dataGrid.Items.Count; i++)
{
    DataGridRow row = (DataGridRow)dataGrid.ItemContainerGenerator
                                               .ContainerFromIndex(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:02:33.153

我建议为它定义一个样式`DataGridRow`，它将其可见性绑定到是否应该显示。正如我在@RV1987 的回答中提到的那样，仅遍历行是不够的。

```
<DataGrid>
    <DataGrid.Resources>
        <Style TargetType="DataGridRow">
            <Setter Property="Visibility" Value="{Binding ...}" />
        </Style>
    </DataGrid.Resources>
</DataGrid> 
```

**编辑：**

您绑定的内容取决于您保存是否应该显示该行的信息。例如，如果绑定集合中的每个数据对象都有一个`bool ShouldBeDisplayed`属性，那么您将拥有如下内容：

```
<DataGrid>
    <DataGrid.Resources>
        <BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter" />

        <Style TargetType="DataGridRow">
            <Setter Property="Visibility" Value="{Binding Path=ShouldBeDisplayed, Converter={StaticResource booleanToVisibilityConverter}}" />
        </Style>
    </DataGrid.Resources>
</DataGrid> 
```

# excel - 如何使用 VBA 在 Excel 中引用 Google 电子表格？

> ID：12762311
> 
> 赞同：1
> 
> 时间：2012-10-06T17:52:25.723
> 
> 标签：excel, vba, spreadsheet, google-docs

我有一个为我的公司维护的 Excel 程序，需要不时更新。目前，我通过电子邮件附件发送任何新版本的 Excel 程序。但是，人们很少检查他们的电子邮件，恐怕大多数人使用的是过时的版本。我将当前版本号保存在 Google 电子表格中。我想在 Excel 中创建一个在工作簿打开时运行的宏，它引用包含正确版本号的 Google 电子表格中的单元格值，并检查它是否高于用户的版本。这可能吗？

# python - IndentationError: unindent 不匹配 else 块中的任何外部缩进级别

> ID：12762312
> 
> 赞同：0
> 
> 时间：2012-10-06T17:52:32.053
> 
> 标签：python, block, indentation, if-statement

```
def extract_names(filename):
  """
  Given a file name for baby.html, returns a list starting with the year string
  followed by the name-rank strings in alphabetical order.
  ['2006', 'Aaliyah 91', Aaron 57', 'Abagail 895', ' ...]
  """
  # +++your code here+++
  f = open(filename,'rU')
  for line in f.readlines():
      match = re.search(r'(\d\d\d\d)(</h2)',line)
      if match:
          year = match.group(1)
          print line
          print year
       else:
            match = re.search(r'<td>(\d+)</td><td)(\w+)</td><td>(\w+)</td)',line)
            if match:
                rank = match.group(1)
                boyn = match.group(2)
                girln = match.group(3)
                print rank, boyn, girln
                print year

  f.close()
  return 
```

收到以下错误，

```
 ./babynames.py baby2008.html
  File "./babynames.py", line 51
    else:
        ^
IndentationError: unindent does not match any outer indentation level 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-24T18:16:55.543

只需在您之前删除***一个额外的空格字符`else:`***并确保两者（`if`和对应`else`的）具有**完全相同的缩进**。

```
if match:
   #...
 else:    # This has only ONE EXTRA 'SPACE' at start!
   #... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:54:00.823

您的 else 语句中的缩进已关闭。尝试这个：

```
def extract_names(filename):
  """
  Given a file name for baby.html, returns a list starting with the year string
  followed by the name-rank strings in alphabetical order.
  ['2006', 'Aaliyah 91', Aaron 57', 'Abagail 895', ' ...]
  """
  # +++your code here+++
  f = open(filename,'rU')
  for line in f.readlines():
      match = re.search(r'(\d\d\d\d)(</h2)',line)
      if match:
          year = match.group(1)
          print line
          print year
      else:
          match = re.search(r'<td>(\d+)</td><td)(\w+)</td><td>(\w+)</td)',line)
          if match:
              rank = match.group(1)
              boyn = match.group(2)
              girln = match.group(3)
              print rank, boyn, girln
              print year

  f.close()
  return 
```

# asp.net-mvc - Razor 视图 (MVC .NET 4.0) 和 Microsoft.IdentityModel

> ID：12762313
> 
> 赞同：0
> 
> 时间：2012-10-06T17:52:32.603
> 
> 标签：asp.net-mvc, wif

我遇到了使用 Microsoft.IdentityModel 命名空间中的类/接口的 ASP.NET MVC Razor wiews 的问题，在设计和运行时模式下都抱怨如下：

“命名空间‘Microsoft’中不存在类型或命名空间名称‘IdentityModel’（您是否缺少程序集引用？）”

与 HttpCompileException 似乎也出现在运行时。

如果从同一项目的控制器或视图模型中引用，上述不是问题。

下面给出了代码示例（下面代码中的IdentityModel第2行在设计中用红色下划线）：

```
@using System.Security.Principal;
@using Microsoft.IdentityModel.Claims;

@model IPrincipal

@{
    ViewBag.Title = "Claims";
    Layout = null;
}

@if (Model is IClaimsPrincipal)
{
    IClaimsIdentity identity = Model.Identity as IClaimsIdentity;
    ... 
```

上下文如下

*   asp.net 4.0 MVC Web 应用程序
*   VS2010
*   WIF 3.5

我将 Microsoft.IdentityModel.dll 程序集（预先安装了 WIF SDK）添加到我的 asp.net mvc 4 web 项目中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:23:23.080

你可以在你的服务器（和你的开发者电脑）上安装 wif。有人说它可以二进制部署，但在我们的项目中我们做不到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:21:30.880

如果找不到命名空间，请像这样添加：

```
<add namespace="System.Security.Principal" />
<add namespace="Microsoft.IdentityModel.Claims" /> 
```

在您的意见文件夹中的 web.config 中找到它。

我找到了另一种可能的解决方案：

[http://social.msdn.microsoft.com/Forums/en/wcf/thread/f7fbcd78-48a0-4877-af47-2f5a1af6cc14](http://social.msdn.microsoft.com/Forums/en/wcf/thread/f7fbcd78-48a0-4877-af47-2f5a1af6cc14)

> 为了使 Microsoft.IdentityModel.dll 程序集正常工作，您必须确保项目的目标框架不是 .NET Framework Client Profile。
> 
> 项目-> 项目名称属性...
> 
> 似乎 VS2010 默认使用此目标框架。

另一个在这里：[http ://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/97cb3c15-9253-4ff1-a690-b203a65c0dfd](http://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/97cb3c15-9253-4ff1-a690-b203a65c0dfd)

重新引用了他的 dll 并且它起作用了。（不是原来的问题 - 往下看）

# android - 使用 Intent 的 putExtra 方法的跨应用程序

> ID：12762315
> 
> 赞同：0
> 
> 时间：2012-10-06T17:52:53.890
> 
> 标签：android, android-intent

我正在编写一个显示谷歌地图的活动，并通过在调用意图上获得额外的价值，在地图上的给定地理点上放置一些叠加层。

我所做的是创建一个包装类来保存 (lat,lng) 对并实现 Parcelable，这样我可以将 Intent 上的“geopoint”实例从其他应用程序中的其他活动传递给该活动。

现在我坚持的是我应该把什么作为放置和获取这个地理点的关键值？

我可以像这样使用它：

```
i.putExtra("myGeoPoint", myGeoPoint); 
```

但我猜这将是不好的做法，我可以有一个最终的静态 String 类成员对象作为键值，但是我不能 100% 确定我可以从其他应用程序中的其他活动访问它...

它是如何正确完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:05:27.980

> 但我猜这将是不好的做法

嗯，它必须是一个字符串。

> 我可以有一个最终的静态 String 类成员对象作为键值，但是我不能 100% 确定我可以从其他应用程序中的其他活动访问它...

100% 确定您*不能*“从其他应用程序中的其他活动访问它”。

因此，使用众所周知的字符串。如果需要，这些应用程序中的每一个都可以将该字符串保存在“最终静态字符串类成员对象”中以供其本地使用。或者，您可以创建一个所有这些项目都使用的小 JAR 文件，也许除其他外，它提供了一个规范的“最终静态 String 类成员对象”供他们参考。

# java - 扫描仪不让接受循环最后一次运行的输入

> ID：12762316
> 
> 赞同：0
> 
> 时间：2012-10-06T17:53:02.503
> 
> 标签：java, java.util.scanner

> **可能重复：**
> [在 nextInt 之后使用 nextLine 时的扫描仪问题](https://stackoverflow.com/questions/7056749/scanner-issue-when-using-nextline-after-nextint)

下面是我的代码：

```
import java.util.Scanner;

public class Test{
    public static void main(String args[])
    {
        Scanner sc=new Scanner(System.in);
        int n=sc.nextInt();
        StringBuilder sb=new StringBuilder();
        int count=0;
        for(int i=0;i<n;i++)
        {
            count++;
            sb.append(sc.nextLine());
            sb.append("\n");
        }
        System.out.println(sb);
        System.out.println(count);

    }
} 
```

我无法为循环的最后一次运行（即何时）编写输入`i==n-1`，尽管变量最后`count`等于`n`。错误在哪里？

# css - 用于订购 div 的 z-index 无法按预期工作

> ID：12762319
> 
> 赞同：1
> 
> 时间：2012-10-06T17:53:15.187
> 
> 标签：css, html, z-index

我有这个页面： http: [//quaaoutlodge.com/drupal-7.14/](http://quaaoutlodge.com/drupal-7.14/?q=specials_events) ?q=specials_events不，如果您现在预订，则会出现输入预订详细信息的 div，但提交按钮仍保留在 div 后面，内容甚至我将“淡入淡出”潜水的 z-index 设置为 99。这是为什么呢？

谢谢你，罗恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:00:53.320

您只能在`position: relative`or`position: absolute`元素上使用 z-index。如果您将标题设置为相对位置，它将解决问题：

```
#HeaderBar {
  position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T17:59:40.080

```
#book{
  z-index: 1000;
} 
```

这将解决问题。

# php - Joomla！PHP 代码嗅探器

> ID：12762324
> 
> 赞同：0
> 
> 时间：2012-10-06T17:54:05.247
> 
> 标签：php, joomla, codesniffer

我使用 PHP 代码嗅探器收到此消息：

`Expected "if (...)\n"; found "if (...)"`

我的代码：

`<?php if ($user->authorise('core.admin')): ?> <li><a href="<?php echo $this->baseurl; ?>/index.php?option=com_affiliates&amp;view=config"><?php echo JText::_('COM_AFFILIATES_LINK_GLOBAL_CONFIG'); ?></a></li> <?php endif; ?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T23:23:16.617

我假设您正在使用 Joomla 代码样式嗅探。您是使用 CMS 的嗅探器还是平台的嗅探器？在平台上你永远不会使用 if (..): .... endif; 代码样式，但它是布局的首选样式（在 CMS 中）。所以我很确定如果您有以下内容并且正在使用 CMS 样式检查器，您应该不会收到错误消息。你当然应该有 *nix 风格的行尾，如图所示

```
<?php if ($user->authorise('core.admin')): ?> 
<li><a href="<?php echo $this->baseurl; ?>/index.php?option=com_affiliates&amp;view=config"><?php echo JText::_('COM_AFFILIATES_LINK_GLOBAL_CONFIG'); ?></a></li> 
<?php endif; ?> 
```

# php - 如何在 javascript 标签中放置 Adsense 广告（脚本标签）？

> ID：12762325
> 
> 赞同：-1
> 
> 时间：2012-10-06T17:54:08.040
> 
> 标签：php, javascript

如何将 Adsense 广告放入 javascript 标签中？

```
<script type="text javascript">
var ad = "<script type="text/javascript"><!--
          google_ad_client = "ca-pub-12345";
          google_ad_slot = "12345";
          google_ad_width = 728;
          google_ad_height = 90;
          //-->
          </script>
          <script type="text/javascript"
          src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
          </script>";
</script> 
```

以上显然是行不通的。但是，它展示了我正在尝试做的事情。任何人都可以弄清楚如何有效地做到这一点？谢谢。

**更新** 这仍然给我一个语法错误

```
var ad = "<script type='text/javascript'><!--
                            google_ad_client = 'ca-pub-12345';
                            /* plastic surgery body large banner */
                            google_ad_slot = '12345';
                            google_ad_width = 728;
                            google_ad_height = 90;
                            //-->
                            </script>
                            <script type='text/javascript'
                            src='http://pagead2.googlesyndication.com/pagead/show_ads.js'>
                            </script>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T17:56:52.797

嗯，第一部分是您的发布者身份信息。那只是脚本，所以要么直接放入：

```
google_ad_client = "ca-pub-12345";
google_ad_slot = "12345";
google_ad_width = 728;
google_ad_height = 90; 
```

...或者您可以使用 eval：

```
var ad = [
  'google_ad_client = "ca-pub-12345";',
  'google_ad_slot = "12345";',
  'google_ad_width = 728;',
  'google_ad_height = 90;' ].join('');
eval(ad); 
```

`document.write()`可用于创建`<script>`标签，但要注意：MSIE 有一个扫描单词的错误，`<script>`因此请始终将其分解为表达式：

```
<script>
document.write('<scr'+ 'ipt type="text/javascript" ');
document.write(' src="http://pagead2.googlesyndication.com/pagead/show_ads.js">');
document.write('</scri' + ' ipt>');
</script> 
```

实际上，如果您已经将所有内容都放入`ad`变量中，您可以简单地：

```
document.write(ad); 
```

您可能遇到的唯一问题是您不能通过 Ajax 调用来执行此操作。如果您使用的是[jQuery](http://jquery.com/)，则可以执行以下操作：

```
$.ajax('//host/my/tag.js', {
  dataType: 'text',
  success: function(text) {
    $('#target-id').html(text);
  }
}); 
```

jQuery 将自动计算出如何将脚本标签激活到这些位置，但这可能不适用于某些类型的富媒体广告素材。

# perl - 从散列引用中复制散列

> ID：12762340
> 
> 赞同：2
> 
> 时间：2012-10-06T17:55:33.983
> 
> 标签：perl, hash

我有一个对哈希哈希的哈希引用。

ref -> hash1
hash2
等...

我正在尝试复制 2 个哈希值以用于相互比较。

```
 my %hash1 = %$ref->{ $name1}; // but I can't get it to work.  
   my %hash2 = %$ref->{ $name2}; 
```

我得到：在预期大小均匀的列表中找到参考。

我知道我没有声明这是正确的，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T18:17:02.267

你在这里有错误：`%$ref->{ $name1};`，这是不正确的尊重。请在下面查看我的示例。

```
#!/usr/bin/perl

use strict;
use Data::Dumper;

my $ref = {
    hash1 => { a => 1, b => 2 },
    hash2 => { c => 3, d => 3 },
};

my $name = 'hash1';
my %hash = %{ $ref->{$name} }; # right dereference
print Dumper(\%hash); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:47:50.583

由于运算符优先级，您需要这样做：

```
my %hash1 = %{ $ref->{$name} }; 
```

# assembly - 语法错误 MIPS 汇编语言

> ID：12762342
> 
> 赞同：0
> 
> 时间：2012-10-06T17:55:39.757
> 
> 标签：assembly, syntax-error, mips

我正在尝试制作一个汇编程序，但出现以下错误。

这是我第一次使用 QTSimp Simulator。

![错误打印屏幕](../Images/d846932ec3608ef208828f2b79c9dd3b.png)

我的文件以

```
.data

N: .word 5

X: .word 2,4,6,8,10

SUM: .word 0 
```

* * *

另一个语法错误

![在此处输入图像描述](../Images/67090ddb3fe04ad0fe400711852706a3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:13:55.720

您需要完成该程序。试试这个：

```
.data

N:   .word 5
X:   .word 2,4,6,8,10
SUM: .word 0

     .text
     .globl main

main:

     #your code here

li $v0, 10
syscall
.end 
```

# apache-pig - 使用 Pig 处理平面文件

> ID：12762346
> 
> 赞同：2
> 
> 时间：2012-10-06T17:56:17.567
> 
> 标签：apache-pig

如何使用 Pig 处理平面文件？例如，如果您有一条记录，其中前四个位置是年份，接下来的 5 个是产品代码，最后 8 个包含 MSRP，您将如何使用 Pig 查询此数据？我可能遗漏了一些简单的东西，但到目前为止我发现的所有内容都需要在使用 Pig 加载数据时使用分隔符。

下面提供了一些示例数据：

```
1999ABCDE12234.00
2000DCEFS00020.00
2012FFEWS00005.55 
```

提前致谢。

杰里米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T18:45:27.500

根据位置拆分线的一种方法是使用[REGEX_EXTRACT_ALL](http://pig.apache.org/docs/r0.10.0/func.html#regex-extract-all)。

例如：

```
A = LOAD 'flat.txt' as (line:chararray);
B = FOREACH A GENERATE FLATTEN(REGEX_EXTRACT_ALL(line, 
      '^(.{1,4})(.{1,5})(.*)$')) AS (year:int, prod_code:chararray, msrp:double);
dump B;
(1999,ABCDE,12234.00)
(2000,DCEFS,00020.00)
(2012,FFEWS,00005.55) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T05:14:18.313

此外，还有一个内置的 SUBSTRING 函数，

```
A = LOAD 'flat.txt' as (line:chararray);

B = FOREACH A GENERATE SUBSTRING(line,0,3),SUBSTRING(line,4,8),SUBSTRING(line,9,16);

dump B; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T10:52:59.027

之前的两个答案都很棒。此外，如果您的输入字符串很复杂或需要条件解析，您可以实现自己的 UDF

# jquery - 水平滚动jQuery

> ID：12762348
> 
> 赞同：0
> 
> 时间：2012-10-06T17:56:33.747
> 
> 标签：jquery, jquery-ui

我的水平滚动有问题。当我在 chrome 中检查时，我没有看到错误。你能告诉我问题出在哪里，因为我找不到吗？

```
<html>
    <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>

    <script>
        $('#right-button').click(function() {
        $('#content').animate({
        marginRight: marginRight -"200px"
        }, "fast");
        });
        $('#left-button').click(function() {
        $('#content').animate({
        marginLeft: marginLeft +"200px"
        }, "fast");
        });
    </script>
    <style type="text/css">
        #browser {
            float: left;
            width: 300px;
            overflow: hidden;
            white-space: nowrap;
        }
    </style>
    ​
</head>
<body>
    <div id="browser">
        <a href="#" id="left-button">BACK</a>
        <div id="content">
            This is the content of the text which should be scrolled.
        </div>
        <a href="#" id="right-button">NEXT</a>
    </div>
    ​
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T17:59:41.490

您指的是`marginRight`哪个不是您的页面中定义的变量。

代替

```
$('#content').animate({
    marginRight: marginRight -"200px" 
```

经过

```
$('#content').animate({
    marginRight: "-=200" 
```

从[文档中](http://api.jquery.com/animate/)：

> 动画属性也可以是相对的。如果为值提供了前导 += 或 -= 字符序列，则通过从属性的当前值中加上或减去给定数字来计算目标值。

如果我猜到你的意图，还有另一个逻辑问题：你不能在左右边距的情况下这样玩。请参阅[**演示**](http://jsfiddle.net/9hubz/)以了解可行的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:04:49.697

未来的JSFiddle请：http: [//jsfiddle.net/ryanwheale/P7HvH/](http://jsfiddle.net/ryanwheale/P7HvH/)

此外，您不能像现在这样添加字符串：

```
marginLeft +"200px" 
```

首先添加整数...然后附加字符串后缀：

```
(marginLeft + 200) + "px"; 
```

此外，您的示例没有定义`marginLeft`变量。将此添加到顶部：

```
var marginLeft = 10; 
```

# wcf-data-services - 如何从 WCF 数据服务响应中提取 ETAG？

> ID：12762351
> 
> 赞同：1
> 
> 时间：2012-10-06T17:56:49.503
> 
> 标签：wcf-data-services, datacontext, etag, azure-table-storage, wcf-data-services-client

很长一段时间以来，我一直在努力寻找这个问题的答案。由于 WCF 数据服务不是线程安全的，并且通常需要重新创建，一旦我查询我的数据存储以获取记录，如何从该响应中提取 ETAG，以便在我重建数据上下文时使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:20:33.940

这取决于您在客户端上使用的语言/库以及在线上使用的格式（ATOM 与 JSON）。ETag 存储在有效负载中，如果是单个实体有效负载，也存储在 HTTP 标头中。一些库会为您提取它并让您直接访问（例如 ODataLib 或 WCF 数据服务客户端）。如果您自己解析有效负载，则需要自己提取它。

在 WCF 数据服务客户端中，可以通过`DataServiceContext.GetEntityDescriptor(entity).ETag`.

在 ODataLib 中，ETag 通过`ODataEntry.ETag`.

在 ATOM 的有效负载中，ETag 存储为 atom:entry 元素上的一个属性，称为`m:etag`（m 是元数据名称空间）[，如下所述](http://www.odata.org/media/30002/OData%20Atom%20Format.html#themetadata%3aetagattribute)：

在 Verbose JSON 的有效负载中，ETag 存储为条目元数据的一部分。所以在入口对象中有一个属性__metadata，它的值是一个具有称为etag的属性的对象。见[章节 4.1.1](http://www.odata.org/media/30002/OData%20JSON%20Verbose%20Format.html)

# php - 无法加载css

> ID：12762360
> 
> 赞同：0
> 
> 时间：2012-10-06T17:58:50.127
> 
> 标签：php, css, smarty

我正在开发一个使用 PHP、Smarty、MySQL 组合的网站。在我的网站 css 文件没有加载。请检查网址

```
http://jobsgang.com/a9bb95450204a98e47881081/Kerala/Alappuzha/Alappuzha_city/sslc_diploma_plustwo/Experienced/Sunil_Kumar.html 
```

实际上在指定位置有一个 CSS 文件（您可以在查看页面源代码中看到该位置）。

我无法找出原因，

真挚地，

苏尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:15:50.173

![在此处输入图像描述](../Images/93650d6da0aa883d42698da389a79920.png)

您的 css 链接重定向到另一个页面.. 检查它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:26:21.800

这是您的 CSS Url 的问题。[http://jobsgang.com/themes/development/templates/resumes/classic_gray/css/style.css](http://jobsgang.com/themes/development/templates/resumes/classic_gray/css/style.css)
正在重定向 到[http://jobsgang.com/themes/development/templates/resumes/classic_gray/css/employerDashBoard.php](http://jobsgang.com/themes/development/templates/resumes/classic_gray/css/employerDashBoard.php)一条错误消息“此网页导致重定向过多”。查出来。

# java - SQLSyntaxErrorException：不支持左操作数类型为“VARCHAR”且右操作数类型为“VARCHAR”的“+”运算符

> ID：12762363
> 
> 赞同：2
> 
> 时间：2012-10-06T17:59:28.160
> 
> 标签：java, sql, jdbc, derby

请看下面的代码。我使用 Apache Derby 作为嵌入式数据库

```
public List getDetails(String name)
    {
        List details = new ArrayList();

        name = name.replaceAll("\\s+", "").toUpperCase();
        try
        {
            createConnection();

            PreparedStatement ps = con.prepareStatement("select * from PhoneData where upper(rtrim(NULLIF(names,''))) + upper(rtrim(NULLIF(middleName,''))) +  upper(rtrim(NULLIF(lastName,'')))=?");
            ps.setString(1, name);

            ResultSet rs = ps.executeQuery();

          // System.out.println("First Mobile Number: "+rs.getInt(3));
            while(rs.next())
            {
                details.add(rs.getInt(1));
                details.add(rs.getString(2));
                details.add(rs.getString(3));
                details.add(rs.getString(4));
                details.add(rs.getString(5));
                details.add(rs.getString(6));
                details.add(rs.getString(7));
                details.add(rs.getString(8));
                details.add(rs.getString(9));
                details.add(rs.getString(10));
                details.add(rs.getString(11));
                details.add(rs.getString(12));
                details.add(rs.getString(13));
                details.add(rs.getString(14));
            }

            for(int i=0;i<details.size();i++)
            {
                System.out.println(details.get(i));
            }
            System.out.println("------------Database handler Done------------");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            closeConnection();
        }

        return details;
    } 
```

此代码发出以下错误

```
java.sql.SQLSyntaxErrorException: The '+' operator with a left operand type of 'VARCHAR' and a right operand type of 'VARCHAR' is not supported.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement20.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement30.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement40.<init>(Unknown Source)
    at org.apache.derby.jdbc.Driver40.newEmbedPreparedStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
    at normal.DatabaseHandler.getDetails(DatabaseHandler.java:150)
    at normal.UpdateDeleteForm$DetailsLoader.itemStateChanged(UpdateDeleteForm.java:417)
    at javax.swing.JComboBox.fireItemStateChanged(JComboBox.java:1225)
    at javax.swing.JComboBox.selectedItemChanged(JComboBox.java:1282)
    at javax.swing.JComboBox.contentsChanged(JComboBox.java:1329)
    at javax.swing.AbstractListModel.fireContentsChanged(AbstractListModel.java:118)
    at javax.swing.DefaultComboBoxModel.setSelectedItem(DefaultComboBoxModel.java:94)
    at javax.swing.JComboBox.setSelectedItem(JComboBox.java:578)
    at javax.swing.JComboBox.setSelectedIndex(JComboBox.java:624)
    at javax.swing.plaf.basic.BasicComboPopup$Handler.mouseReleased(BasicComboPopup.java:835)
    at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:290)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at javax.swing.plaf.basic.BasicComboPopup$1.processMouseEvent(BasicComboPopup.java:499)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Caused by: java.sql.SQLException: The '+' operator with a left operand type of 'VARCHAR' and a right operand type of 'VARCHAR' is not supported.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
    ... 56 more
Caused by: ERROR 42Y95: The '+' operator with a left operand type of 'VARCHAR' and a right operand type of 'VARCHAR' is not supported.
    at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
    at org.apache.derby.impl.sql.compile.BaseTypeCompiler.resolveArithmeticOperation(Unknown Source)
    at org.apache.derby.impl.sql.compile.BinaryArithmeticOperatorNode.bindExpression(Unknown Source)
    at org.apache.derby.impl.sql.compile.BinaryOperatorNode.bindExpression(Unknown Source)
    at org.apache.derby.impl.sql.compile.BinaryArithmeticOperatorNode.bindExpression(Unknown Source)
    at org.apache.derby.impl.sql.compile.BinaryOperatorNode.bindExpression(Unknown Source)
    at org.apache.derby.impl.sql.compile.BinaryComparisonOperatorNode.bindExpression(Unknown Source)
    at org.apache.derby.impl.sql.compile.SelectNode.bindExpressions(Unknown Source)
    at org.apache.derby.impl.sql.compile.DMLStatementNode.bindExpressions(Unknown Source)
    at org.apache.derby.impl.sql.compile.DMLStatementNode.bind(Unknown Source)
    at org.apache.derby.impl.sql.compile.CursorNode.bindStatement(Unknown Source)
    at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)
    at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)
    at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)
    ... 50 more
Exception in thread "AWT-EventQueue-0" java.lang.IndexOutOfBoundsException: Index: 6, Size: 0
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.get(ArrayList.java:382)
    at normal.UpdateDeleteForm$DetailsLoader.itemStateChanged(UpdateDeleteForm.java:435)
    at javax.swing.JComboBox.fireItemStateChanged(JComboBox.java:1225)
    at javax.swing.JComboBox.selectedItemChanged(JComboBox.java:1282)
    at javax.swing.JComboBox.contentsChanged(JComboBox.java:1329)
    at javax.swing.AbstractListModel.fireContentsChanged(AbstractListModel.java:118)
    at javax.swing.DefaultComboBoxModel.setSelectedItem(DefaultComboBoxModel.java:94)
    at javax.swing.JComboBox.setSelectedItem(JComboBox.java:578)
    at javax.swing.JComboBox.setSelectedIndex(JComboBox.java:624)
    at javax.swing.plaf.basic.BasicComboPopup$Handler.mouseReleased(BasicComboPopup.java:835)
    at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:290)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at javax.swing.plaf.basic.BasicComboPopup$1.processMouseEvent(BasicComboPopup.java:499)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
BUILD SUCCESSFUL (total time: 7 seconds) 
```

在这里，我要做的是获取全名，该全名以 FirstName、MiddleName 和 LastName 的形式存储在数据库中。

示例：名字 - 彼得，中间名 - Metae，姓氏 - 约翰逊

然后我想得到“PeterMetaeJohnson”。这就是为什么我使用 + 运算符来组合 3 列中的值。

为什么我收到此错误？这在 MSSQL Server 中有效，但在 Derby 中失败。请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T18:14:19.150

在 Derby 中，字符串连接运算符不是 + 而是 ||

[http://db.apache.org/derby/docs/10.2/ref/rrefsqlj40899.html](http://db.apache.org/derby/docs/10.2/ref/rrefsqlj40899.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:14:01.673

根据 Derby 文档 ( [http://db.apache.org/derby/docs/10.4/ref/rrefsqlj40899.html)，Derby](http://db.apache.org/derby/docs/10.4/ref/rrefsqlj40899.html)中的连接运算符是 || - 与 Oracle 类似，因此将 '+' 替换为 '||'。

# vb.net - VB 2010 '.ctor' 不是有效的标识符

> ID：12762370
> 
> 赞同：0
> 
> 时间：2012-10-06T17:59:51.247
> 
> 标签：vb.net

所以我在 VB.Net 课程中，我正在编写一个程序。昨晚在浏览了我的所有代码并测试了我的程序后，我收到了一条错误消息。当我尝试查看我的设计器时会发生这种情况，它是一个显示“'.ctor 不是有效标识符”的屏幕，它为我提供了显示调用堆栈的选项。我是 VB.Net 的新手，所以我不完全确定这向我展示了什么，而且它似乎与我编码的内容无关。

有人知道吗？你能告诉我在哪里看吗？我有点失落。我打印了我的代码，在我的书面代码中看不到任何东西，我可以很好地运行程序。

它确实说修复此问题将防止可能的数据丢失，如果我忽略它，我会收到一个消息框，告诉我我可能会失去所有控制权（这很奇怪，我的意思是我还没有失去控制权，即使我喝了很多今天的山露和咖啡）

我找到了另一个帖子，但到目前为止它对我没有帮助。

我没有看到需要粘贴我的所有代码，只是因为我在代码中的任何地方都没有看到这个“.ctor”，我只是有点好奇我还能在哪里看。

好的，所以我刚刚在网上找到了一些内容，说我可能错误地编写了这行代码。

```
 Private Sub Pollys_Flooring_Load(ByVal sender As Object, ByVal e As System.EventArgs)   Handles Me.Load

    PineRadioButton.Checked = True

End Sub 
```

我的表单名为 Pollys_Flooring，然后它说我应该有 _Load 。我这样做对吗？

该程序是一个地板估算器，因此它为用户提供了选择他们想要的木材类型的选项。这是我处理单选按钮的代码。

```
 Private Sub RadioButton_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles PineRadioButton.CheckedChanged, _
CedarRadioButton.CheckedChanged, OakRadioButton.CheckedChanged, PressBoardRadioButton.CheckedChanged

    Dim SelectedRadioButton As RadioButton

    SelectedRadioButton = CType(sender, RadioButton)

    If PineRadioButton.Checked Then
        FlooringPriceDecimal = PineDecimal

    ElseIf CedarRadioButton.Checked Then
        FlooringPriceDecimal = CedarDecimal

    ElseIf OakRadioButton.Checked Then
        FlooringPriceDecimal = OakDecimal

    ElseIf PressBoardRadioButton.Checked Then
        FlooringPriceDecimal = PressboardDecimal

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-29T15:58:18.047

我点击类图，它说 slnFutureValue.frm 不存在。所以我允许 Visual Studio 删除它，然后我的真实 .frm 不仅显示出来，而且“.ctor 不是有效标识符”错误也消失了！

所以似乎正在发生的是 VB 找不到对象 slnFutureValue.frm 的构造函数，因此错误消息“.ctor 不是有效标识符”可能是由于对构造函数名称的引用方式造成的在字符串中被编码。

# winforms - Visual Basic : 表单记忆设置

> ID：12762372
> 
> 赞同：0
> 
> 时间：2012-10-06T17:59:57.393
> 
> 标签：winforms, visual-studio-2012, remember-me

嗨，伙计们，当我只想让屏幕启动一次然后转到主屏幕时，我被困在程序的一部分，这是我的表格 1 的代码

```
Public Class Form1

Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    My.Settings.Done = "Finished"
    My.Settings.Save()
    Me.Hide()
    Form2.Show()
End Sub

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    If My.Settings.Done = "Finished" Then
        Me.Hide()
        Form2.Show()
    Else

    End If
End Sub 
```

结束类

我也将字符串变量放在表单属性的设置中但是每次我在第一次之后尝试运行它时总是会得到两个表单我怎样才能让它只在用户第一次点击后才显示第二个表单按钮？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:23:53.587

这是 Winforms 的一个怪癖。Form.Hide() 方法将 Visible 属性设置为 False。Visible 属性在 Winforms 中非常重要。在典型的 .NET 样式中，表单的本机窗口以惰性方式创建，尽可能晚。正是 Visible 属性使马车滚动，将其设置为 true 会触发一大串代码。包括为表单创建原生窗口，以及为所有控件创建原生窗口，根据需要进行任意自动缩放。并触发 Load 事件。

这就是怪癖发挥作用的地方，Load 事件被触发，因为 Visible 被设置为 True。在 Load 事件处理程序中将其设置为 False 无效，这将“撤消”它最初被触发的原因。像这样解释时有点道理，当你遇到这种行为时当然没有什么意义。

即使您的代码确实有效，也会导致更多问题。你还有一个隐藏的表格。即使用户关闭了唯一可见的窗口，它也能让您的程序继续运行。这不好。

有效的一件事是*关闭*表单。您需要更改设置。项目 + 属性，应用程序选项卡。将关闭模式选项更改为“最后一个表单关闭时”。现在你可以这样写：

```
Private Sub Form1_Load(ByVal sender As Object, ByVal e As EventArgs) Handles MyBase.Load
    If My.Settings.Done = "Finished" Then
        Form2.Show()
        Me.Close()
    End If
End Sub 
```

但*更*简洁的解决方案是选择正确的第一个表单来显示。项目+属性，应用程序选项卡，单击“查看应用程序事件”按钮。添加启动事件：

```
 Private Sub MyApplication_Startup(ByVal sender As Object, ByVal e As Microsoft.VisualBasic.ApplicationServices.StartupEventArgs) Handles Me.Startup
        If My.Settings.Done = "Finished" Then Me.MainForm = New Form2()
    End Sub 
```

# iphone - 从子 UIViewController 呈现 UIActionSheet

> ID：12762373
> 
> 赞同：3
> 
> 时间：2012-10-06T18:00:07.733
> 
> 标签：iphone, ios, cocoa-touch, ios5, uiactionsheet

我的容器视图控制器呈现了一系列子视图，每个子视图都有自己的`UIViewController`. `UIActionSheet`当按下这些子视图之一上的按钮时，我需要显示一个。

从父视图控制器的工具栏中显示此操作表的正确方法是什么？iOS 5 的新容器视图控制器支持是否提供了一种简单的方法来做到这一点？或者我应该使用委托让容器控制器知道按钮被按下了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:27:43.120

我在这个问题上不是很有经验，但你不能将`parentViewController`属性作为 UIActionSheet 的代表传递吗？并且在呈现操作表时，传递 的属性`parentViewController`，例如它的视图或工具栏？

不过，从工程的角度来看，我更喜欢您使用委托的想法。阅读充当 UIActionSheet 代表的视图控制器的代码似乎很奇怪，但不知道为什么首先显示它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-01T16:40:54.373

我在容器 ViewController的`topViewController`（称为）中遇到了同样的问题。`FavoritosViewController`

在实现容器 ViewController 之前，我`FavoritosViewController`在 a中使用并使用以下方法从选项卡栏中 `UITabBarViewController;`显示了一个：`UIActionSheet``[actionSheet showFromTabBar:self.tabBarController.tabBar];`

当我修改项目的结构以使用容器 ViewController 而不是 tabBar 时，它崩溃了。但可能是因为现在没有 tabBar。用这种方法代替前一种方法可以正常工作： `[actionSheet showInView:self.view];`

希望有用。新年快乐。

# php - json编码数据

> ID：12762375
> 
> 赞同：-3
> 
> 时间：2012-10-06T18:00:31.140
> 
> 标签：php, json

当我在页面加载时将 JSON 数据视为警报时，我看到：

```
[
    "Ankida Ridge Vineyards &#8211; The Vrooman Family Vineyard &#038; Winery",
    37.69603499999999,
    -79.17580859999998,
    "<div id=\"post-45\"><a href=\"http://localhost/jhtwp/business/ankida-ridge-vineyards-the-vrooman-family-vineyard-winery/\">Ankida Ridge Vineyards &#8211; The Vrooman Family Vineyard &#038; Winery</a></div>"
] 
```

它通过 JSONlint。然而，在我的源数据中，我看到了这一点：

```
/* <![CDATA[ */
var busipress_map_vars = [];
busipress_map_vars = {"default_map_icon":"http:\/\/localhost\/jhtwp\/wp-content\/plugins\/busipress\/img\/red-dot.png","default_map_icon_width":32,"default_map_icon_height":32,"active_map_icon":"http:\/\/localhost\/jhtwp\/wp-content\/plugins\/busipress\/img\/blue-dot.png","active_map_icon_width":32,"active_map_icon_height":32,"map_icon_shadow":"http:\/\/localhost\/jhtwp\/wp-content\/plugins\/busipress\/img\/msmarker.shadow.png","map_icon_shadow_width":59,"map_icon_shadow_height":32,"center_lat":-34.397,"center_long":150.644,"path_start":"35.7719444, -78.6388889","path_end":"32.7763889,  -79.9311111","locations":"[\"Ankida Ridge Vineyards &#8211; The Vrooman Family Vineyard &#038; Winery\",37.69603499999999, -79.17580859999998, \"<div id=\\\"post-45\\\"><a href=\\\"http:\/\/localhost\/jhtwp\/business\/ankida-ridge-vineyards-the-vrooman-family-vineyard-winery\/\\\">Ankida Ridge Vineyards &#8211; The Vrooman Family Vineyard &#038; Winery<\/a><\/div>\"]"};;
/* ]]> */
</script> 
```

这是转义双引号（那里还有一些其他数据可以正常工作）。我有以下生成每个位置的函数：

```
function busipress_business_teaser($echo = true, $zindex) {

    $location = get_field('address');

    $location_array = explode(',',$location['coordinates']);

    ob_start();
    echo '["';
    echo get_the_title();
    echo '",';
    echo $location_array[0] . ', ';
    echo $location_array[1] . ', ';
    echo '"<div ';
    echo 'id=\"post-'.get_the_ID().'\">';
    echo '<a href=\"'.get_permalink().'\">';
    echo get_the_title();
    echo '</a>';
    echo '</div>"';
    echo ']';
    $display = ob_get_contents();

    ob_end_clean();

    if($echo) {
        echo $display;
    }
    else {
        return $display;
    }

} 
```

我是否以错误的方式创建这些数据？将此与 Google Maps API v3 一起使用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:12:58.210

我认为你的功能应该是这样的

```
function busipress_business_teaser($echo = true, $zindex) {
    $location = get_field('address');
    list($lat,$log) = explode(',',$location['coordinates']);

    $json = array();
    $json[]=  get_the_title();
    $json[] = $lat ;
    $json[] = $log ;
    $json[] = sprintf('<div id=\"post-%d\"><a href=\"%s\">%s</a></div>',get_the_ID(),get_permalink(),get_the_title());
    return json_encode($json);
} 
```

如果您想使用 Goolge MAP，那么 PHP 类就足以做到这一点

*   [PHP-Display-Maps-using-Google-Maps-API-version-3](http://www.phpclasses.org/package/6588-PHP-Display-Maps-using-Google-Maps-API-version-3.html)
*   [PHP-Display-world-locations-using-Google-maps](http://www.phpclasses.org/package/3801-PHP-Display-world-locations-using-Google-maps.html)

# arrays - 在 Visual Basic (2010) 赋值中使用数组

> ID：12762382
> 
> 赞同：2
> 
> 时间：2012-10-06T18:01:50.060
> 
> 标签：arrays, vb.net, visual-studio, arraylist

我正在为我的 VB 课程做作业，我真的很难用它，我真的很感谢一些帮助、指示和/或示例。我不希望只给出确切的答案，但类似的例子会非常好。

该`CSV`文件有 5 列，每列 25 行。主要的是我需要取最后两列并计算最后两行的标记，它们都是十进制整数，并将其放入输出中。换句话说，我有点需要合并这两列并将计算结果放在该列中。

这是作业：

**应用程序标题：**库存控制

**目的：**

此 Windows MDI 应用程序允许用户显示整个库存并计算售价，或显示库存中的选定项目及其售价。

**程序：**

从主文档中，用户将从菜单中选择 All 或 Select。相应的表格将显示在 MDI 窗口中。如果用户选择了所有，库存项目将简单地出现，按列排列，最后一列是售价。如果用户选择了选择，将出现一个选中的列表框，允许用户选择她希望查看的库存项目。然后，所选项目将显示在最后一列的售价中。然后，用户应该能够使用 File Exit 菜单项退出程序。

**算法、处理和条件：**

1.  用户从“显示”菜单中选择他们想要显示库存的方式
2.  将适当的表格加载到 MDI 中
3.  程序从文件中读取数据
4.  程序通过将成本乘以 1 加上加价百分比来计算售价。
5.  该程序格式化标题和详细信息行，并在列表框中的列中显示信息。

**程序要求：**

1.  必须使用多文档界面
2.  必须为库存项目使用一个类
3.  必须使用父 MDI 表单上的菜单
4.  必须使用至少 1 个数组 OTHER，而不是您在读取记录时使用的 strRec 数组。
5.  可以使用数组列表和列表来处理数据。

这是我到目前为止的代码：

```
Public Class frmMain

Private Sub mnuFileExit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles mnuFileExit.Click 
    'Close the program
    Me.Close()
End Sub

Private Sub mnuHelpAbout_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles mnuHelpAbout.Click
    'Simple help box
    MessageBox.Show("Inventory control program. Version 1.0")
End Sub

Private Sub mnuInvenListAll_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles mnuInvenListAll.Click
    'Create the child form the form
    Dim mdiChild1 As New frmAll
    'Set form as parent.
    mdiChild1.MdiParent = Me
    'display the form as Show
    mdiChild1.Show()
End Sub

Private Sub mnuInvenSelect_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles mnuInvenSelect.Click
    'Create the child for the form
    Dim mdiChild2 As New frmSelect
    'Set form as parent.
    mdiChild2.MdiParent = Me
    'display the form as Show
    mdiChild2.Show()
End Sub

Private Sub frmMain_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.LayoutMdi(MdiLayout.TileHorizontal)
End Sub

End Class

=-=-=-=-=

Imports System.IO
Imports System.Convert

Public Class frmAll
'Declare Streamreader
Private objReader As StreamReader

'Declare arrays to hold the information
Private strNumber(24) As String
Private strName(24) As String
Private strSize(24) As String

Private Sub frmAll_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    'Set objReader
    objReader = New StreamReader("products.csv")
    Call FillArray()
End Sub

Private Sub FillArray()
    'Declare variables and arrays

    Dim decCost(24, 1) As Decimal
    Dim strFields() As String
    Dim strRec As String
    Dim intCount As Integer = 0
    Dim chrdelim As Char = ToChar(",")
    'Set strRec to read the lines

    strRec = objReader.ReadLine

    'Do while loop to fill array.
    Do While strRec <> Nothing
        strFields = strRec.Split(chrdelim)
        strNumber(intCount) = strFields(0)
        strName(intCount) = strFields(1)
        strSize(intCount) = strFields(2)
        decCost(intCount, 0) = ToDecimal(strFields(3))
        decCost(intCount, 1) = ToDecimal(strFields(4))
        'Set strRec to read the lines again
        strRec = objReader.ReadLine
        'increment the index
        intCount += 1
    Loop
    Call Calculate(decCost)
End Sub

Private Sub Calculate(ByVal numIn(,) As Decimal)
    'Define arrays to hold total cost
    Dim decRowTotal(24) As Decimal

    'Define variables to hold the counters for rows and columns
    Dim intR As Integer
    Dim intC As Integer

    'Calcualte total cost
    For intC = 0 To numIn.Length
        For intR = 0 To decRowTotal.Length
            decRowTotal(intR) += numIn(intR, intC) * 1
        Next
    Next

    Call Output(numIn, decRowTotal)

End Sub

Private Sub Output(ByVal NumIn(,) As Decimal, ByVal RowTotalIn() As Decimal)
    Dim strOut As String

    Dim intR As Integer = 0
    Dim intC As Integer = 0

    strOut = "ID" & vbTab & "Item" & vbTab & "Size" & vbTab & "Total Price" & vbCrLf & vbCrLf

    For intR = 0 To 24
        strOut &= strNumber(intC) & vbTab
        strOut &= strName(intC) & vbTab
        strOut &= strSize(intC) & vbTab

        For intC = 0 To 1
            strOut &= NumIn(intR, intC).ToString
        Next

        strOut &= vbTab & RowTotalIn(intR) & vbCrLf
    Next

    rtbAll.Text = strOut

End Sub

End Class

-=-=-=-=-=

'Imports
Imports System.IO
Imports System.Convert

Public Class InventoryItems

'Declare ItemList Array
Private ItemList As New ArrayList
'IItem declared as new Object.
Private IItem As New Object

Public Function Reader() As ArrayList
    'Declare variables for reading the file.
    Dim chrDelim As Char = Convert.ToChar(",")
    Dim strRec As String
    Dim strFields() As String
    Dim objReader As StreamReader
    objReader = New StreamReader("products.csv")
    strRec = objReader.ReadLine
    'Declares a new instance of the InvenItems class
    'and stores each of the items in their own instance
    'of the class
    Do While strRec <> Nothing
        IItem = New InvenItems
        strFields = strRec.Split(chrDelim)
        IItem.Number = strFields(0)
        IItem.Name = strFields(1)
        IItem.Size = strFields(2)
        IItem.Price = ToDecimal(strFields(3))
        IItem.MarkUp = ToDecimal(strFields(4))
        ItemList.Add(IItem)
        strRec = objReader.ReadLine
    Loop

    Return ItemList
End Function

Public Class InvenItems
    'Declare class variables.
    Private strNumber As String
    Private strName As String
    Private strSize As String
    Private decCost As Decimal
    Private decMarkUp As Decimal
    'Create constructor
    Public Sub New()

    End Sub
    'Create override function
    Public Overrides Function ToString() As String
        Return strNumber
    End Function
    'Create property for Number.
    Public Property Number As String
        Set(ByVal value As String)
            strNumber = value
        End Set
        Get
            Return strNumber
        End Get
    End Property
    'Create property for Name.
    Public Property Name As String
        Set(ByVal value As String)
            strName = value
        End Set
        Get
            Return strName
        End Get
    End Property
    'Create property for size.
    Public Property Size As String
        Set(ByVal value As String)
            strSize = value
        End Set
        Get
            Return strSize
        End Get
    End Property
    'Create property for cost.
    Public Property Cost As Decimal
        Set(ByVal value As Decimal)
            decCost = value
        End Set
        Get
            Return decCost
        End Get
    End Property

    Public Property MarkUp As Decimal
        Set(ByVal value As Decimal)
            decMarkUp = value
        End Set
        Get
            Return decMarkUp
        End Get
    End Property

End Class

End Class 
```

感谢您提供任何指示、建议和示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:00:25.653

使用[Option Strict On](http://support.microsoft.com/kb/311329)。

这将显示您需要`Dim IItem = New InvenItems`在 InventoryItems.Reader 中使用，这将显示另一个问题。

# c++ - 在函数内部初始化浮点矩阵

> ID：12762385
> 
> 赞同：1
> 
> 时间：2012-10-06T18:02:09.720
> 
> 标签：c++, arrays, visual-studio-2010

尝试在函数内初始化全局 c++ 矩阵（二维数组）时遇到了这个问题：

这就是我正在做的

```
#include <iostream>
#include <math.h>
#include <Windows.h>

using namespace std;

float matrix[5][5];

void setIR(){
    matrix[5][5]= {
        { 17.2, 22.75, 2.5, -9.15, 0.2},
        { 22.75, 145.5, 9.25, 20.75, 5.25 },
        { 2.5, 9.25, 76.5, -15.5, -6.0 },
        { -9.15, 20.75, -15.5, 37.3, -25.65 },
        { 0.2, 5.25, -6.0, -25.65, 41.2 }
        };

int main(){
//rest of the code
......
} 
```

我只得到一堆

```
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(46): error C2059: syntax error : '{'
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(46): error C2143: syntax error : missing ';' before '{'
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(47): error C2143: syntax error : missing ';' before '}'
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(47): error C2143: syntax error : missing ';' before ','
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(48): error C2143: syntax error : missing ';' before '{'
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(48): error C2143: syntax error : missing ';' before '}'
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(48): error C2143: syntax error : missing ';' before ','
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(49): error C2143: syntax error : missing ';' before '{'
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(49): error C2143: syntax error : missing ';' before '}'
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(49): error C2143: syntax error : missing ';' before ','
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(50): error C2143: syntax error : missing ';' before '{'
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(50): error C2143: syntax error : missing ';' before '}'
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(50): error C2143: syntax error : missing ';' before ','
1>c:\users\apple\documents\visual studio 2010\projects\jcb\jcb\jcbPIO.cpp(51): error C2143: syntax error : missing ';' before '{'
1>c:\users\apple\documents\visual studio2010\projects\jcb\jcb\jcbPIO.cpp(51): error C2143: syntax error : missing ';' before '}' 
```

我做错了什么或 C++ 限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:10:06.310

You can only use the `{}` initialiser syntax on initialisation, and you can only initialise a global variable at its definition.

For this situation, you could initialise a different matrix and then just copy the contents:

```
void setIR(){
    static const float init[5][5]= {
        { 17.2, 22.75, 2.5, -9.15, 0.2},
        { 22.75, 145.5, 9.25, 20.75, 5.25 },
        { 2.5, 9.25, 76.5, -15.5, -6.0 },
        { -9.15, 20.75, -15.5, 37.3, -25.65 },
        { 0.2, 5.25, -6.0, -25.65, 41.2 }
    };
    memcpy(matrix, init, sizeof(matrix));
} 
```

If you're not a fan of things like `memcpy` then you could manually copy by looping, or try to use the STL, but in my opinion this is the simplest and shortest solution in this case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:09:25.397

这种“列表赋值”语法仅适用于初始化（即在您定义变量的地方），不适用于赋值。您的赋值语句试图做的是将`matrix[5][5]`花括号列表给出的值分配给单个元素（实际上并不存在），这不是值的有效语法。

您可以按如下方式分配矩阵：

```
float matrix[5][5];

void setIR()
{
  static float const values[5][5]= {
        { 17.2, 22.75, 2.5, -9.15, 0.2},
        { 22.75, 145.5, 9.25, 20.75, 5.25 },
        { 2.5, 9.25, 76.5, -15.5, -6.0 },
        { -9.15, 20.75, -15.5, 37.3, -25.65 },
        { 0.2, 5.25, -6.0, -25.65, 41.2 }
        };
  for (int i = 0; i < 5; ++i)
    for (int j = 0; j < 5; ++j)
      matrix[i][j] = values[i][j];
} 
```

Of course, given that your values are constants anyway, the best solution is to just give them in the definition of `matrix` itself. That also saves the time to copy all the data.

# c# - 集合上的数据模板

> ID：12762387
> 
> 赞同：2
> 
> 时间：2012-10-06T18:02:15.037
> 
> 标签：c#, wpf, xaml, custom-controls

我在这里有一个名为 DockGroup 的自定义控件类。我想为 DockGroup 应用样式模板并将数据绑定到 Items 依赖属性（使用自定义数据模板）。

```
[ContentProperty(@"Items")]
public class DockGroup : Control
{
    public static readonly DependencyProperty ItemsProperty =
        DependencyProperty.Register("Items", typeof(ObservableCollection<UIElement>), typeof(DockGroup), new PropertyMetadata(default(ObservableCollection<UIElement>)));

    public ObservableCollection<UIElement> Items
    {
        get { return (ObservableCollection<UIElement>)GetValue(ItemsProperty); }
        set { SetValue(ItemsProperty, value); }
    }

    public DockGroup()
    {
        Items = new ObservableCollection<UIElement>();
        DataContext = Items;
    }
} 
```

这里是 DockGroup 的样式，也包含 DataTemplate。

```
<Style TargetType="{x:Type local:DockGroup}">
    <Style.Resources>
        <DataTemplate x:Key="Items" DataType="{x:Type UIElement}">
            <Label>I DON'T KNOW WHAT TO PUT IN DATATEMPLATE</Label>
        </DataTemplate>
    </Style.Resources>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:DockGroup}">
                <ContentPresenter ContentSource="{Binding}"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这是我想测试的示例 XAML。

```
<local:DockGroup>
     <Label Background="#FFF0F077">Hello World!</Label>
     <Label Background="#FFF0F077">Hello World 2!</Label>
</local:DockGroup> 
```

当我运行该项目时，我得到一个空白窗口。而且，我似乎无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:07:27.980

您可以使用 ItemsControl 设置控件的样式以使其工作：

```
<Style TargetType="{x:Type local:DockGroup}">
<Setter Property="Template">
  <Setter.Value>
    <ControlTemplate>
      <ItemsControl ItemsSource="{Binding Items, RelativeSource={RelativeSource TemplatedParent}}"/>
    </ControlTemplate>
  </Setter.Value>
</Setter> 
```

# php - PHP foreach 为空时抛出错误

> ID：12762389
> 
> 赞同：-1
> 
> 时间：2012-10-06T18:02:20.483
> 
> 标签：php

我有返回一些数据的 JSON 脚本，但有时它是空的，我的 foreach 循环在它为空时抛出一个错误这是我的代码

```
<?php
$planItems = getJSON('getPlanItems');
foreach ((array)$planItems->items as $item){
?> 
```

我注意到它是因为

> $planItems->项目

删除 -> 不会抛出错误，但我无法从 JSON 数据中正确读取结果。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:06:31.630

当然，当`$planItems->items`未设置或不是数组时会出错。这不是很方便，但就是`foreach`这样。为了防止它，您需要在循环之前检查，例如：

```
if (isset($planItems->items) && is_array($planItems->items)) {
    foreach ($planItems->items as $item) {
        // ....
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:10:13.403

你的鼻子很好，确实有问题的部分是：

```
$planItems->items 
```

这只有在`$planItems`是一个对象并且有`items`成员时才有效。您需要先检查一下，很可能您错过了检查`getJSON`错误条件的返回值。

```
$planItems = getJSON('getPlanItems');

if ($planItems === ???) { # do your error condition checking here
    throw new UnexpectedValueException('Remove Json Request error.');
} 
```

如果您在代码中添加适当的错误处理，问题就会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T18:06:21.463

您可以使用带有第二个参数 true 的[json_decode](http://php.net/manual/en/function.json-encode.php) PHP 函数将 JSON 转换为数组。然后在 foreach 写入条件之前`if (!empty($planItems ))`

这将是

```
<?php
$planItems = json_decode(getJSON('getPlanItems'),true);
if (!empty($planItems['items'] ))
foreach ($planItems['items'] as $item){
?> 
```

# linux - 使用 clock_gettime 时出现链接器错误

> ID：12762391
> 
> 赞同：1
> 
> 时间：2012-10-06T18:02:42.997
> 
> 标签：linux, linker-errors, standard-library, gettickcount

要使用`clock_gettime`我需要链接什么库？我收到`clock_gettime`未定义的链接器错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T18:06:07.417

尝试链接到`librt`：

```
gcc -o myprog myprog.c -lrt 
```

（另请注意，您必须在指定源文件`-lrt`后放置标志！）`myprog.c`

# php - 使用表单的 action 属性重定向页面，但仅在检查 php 中的服务器端验证之后

> ID：12762396
> 
> 赞同：0
> 
> 时间：2012-10-06T18:03:34.533
> 
> 标签：php, redirect, server-side-validation

假设我有一个如下的简单表单，它只有一个文本字段和一个提交按钮。

```
<form id="dataForm" name="dataForm" method="post">      

  <?php
    if(isset($_POST['btnSubmit']))
    {
        if(isset($_POST['txtName'])&&!is_null($_POST['txtName'])&&$_POST['txtName']!="")    
        {
            header("location:Home.php");    
        }
        else
        {
            echo "<font style='color:red'>Name is mandatory.</font>";   
        }
    }
 ?>

    <input type="text" id="txtName" name="txtName" /><br/>
    <input type="submit" value="Submit" id="btnSubmit" name="btnSubmit" />        
</form> 
```

`Home.php`如果在给定的文本字段中输入了一些文本`txtName`并单击了提交按钮，则页面将重定向到。如果文本字段留空并单击提交按钮，则会显示错误消息。

但是我不想使用重定向页面`header("lcation:Home.php");`（在这种情况下我根本不想使用该`GET`方法。无论如何该方法必须是`POST`）。我只想使用表单的操作属性进行重定向，但只有在检查（服务器端）验证以查看文本字段是否留空之后。*如果它满足给定的服务器端验证，它应该只被重定向*。这可能吗？

```
<form id="dataForm" name="dataForm" method="post" action="Home.php">

    <input type="text" id="txtName" name="txtName" /><br/>
    <input type="submit" value="Submit" id="btnSubmit" name="btnSubmit" />        

</form> 
```

# javascript - jquery.countdown.js 给出了真正的结果。

> ID：12762398
> 
> 赞同：0
> 
> 时间：2012-10-06T18:04:05.577
> 
> 标签：javascript, jquery

我真的很赶时间，所以我要在这里问。写这篇文章的时间是 2012-10-06。我正在尝试使用一个名为 /jquery.countdown.js 的 jquery 插件。看起来很简单。任何人都可以看到我做错了什么吗？我只是想测试一个倒计时到明天。

```
 <script>
             $(function(){
            var d = new Date(2012, 10, 07, 15, 4);
              $('#compact').countdown({until:d , compact: true,
                description: ''});

                    });

                    </script> 
```

它返回 32 天 ++ 在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:08:34.623

月份是从 0 开始的，而不是从 1 开始的（一月是 0 月）。明天的日期是：

```
 var d = new Date(2012, 9, 7, 15, 4); 
```

由于您要求 2012 年 11 月 7 日，因此它正确地返回了 32 天之后。

# ef-code-first - 如何创建和使用泛型类 EntityTypeConfiguration

> ID：12762404
> 
> 赞同：2
> 
> 时间：2012-10-06T18:05:15.767
> 
> 标签：ef-code-first, entity-framework-5, entity-framework-migrations

# 代码

我的应用程序中有两个非常简单的接口

**表示保存在数据库中的实体**

```
public interface IEntity
{
    int Id { get; set; }
} 
```

**只有`Nome`字段作为必填字段来保存实体的实体**

```
public interface IEntityName : IEntity
{
    string Nome { get; set; }
} 
```

**以及许多实现这个接口的类**

```
public class Modalidade : IEntityName
{
    public int Id { get; set; }
    public string Nome { get; set; }
}
public class Nacionalidade : IEntityName
{
    public int Id { get; set; }
    public string Nome { get; set; }
}

public class Profissao : IEntityName
{
    public int Id { get; set; }
    public string Nome { get; set; }
}

public class TipoPessoa : IEntityName
{
    public int Id { get; set; }
    public string Nome { get; set; }
} 
```

**尽管它们具有相同的结构，但在此类中使用的字段却完全不同**

```
public class Pessoa : IEntity
{
    public int Id { get; set; }

    public string CPF { get; set; }
    public string PIS { get; set; }
    public string RG { get; set; }
    public string OrgaoExpedidor { get; set; }
    public string TipoDocumento { get; set; }
    public DateTime? DataEmissao { get; set; }

    public virtual Nacionalidade Nacionalidade { get; set; }
    public virtual Profissao Profissao { get; set; }

    public virtual TipoPessoa Tipo { get; set; }

    ....
} 
```

# 问题

为了方便（并且不必为每个新类创建配置类）创建了一个通用类配置：

```
internal class EntityNameConfiguracao<TEntity> : EntityTypeConfiguration<TEntity>
    where TEntity: class, IEntityName
{
    public EntityNameConfiguracao()
    {
        Property(p => p.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        Property(p => p.Nome).IsRequired().HasMaxLength(255);
    }
} 
```

**这样，我的设置会**

```
modelBuilder.Configurations.Add(new EntityNameConfiguracao<Modalidade>());
modelBuilder.Configurations.Add(new EntityNameConfiguracao<TipoPessoa>());
modelBuilder.Configurations.Add(new EntityNameConfiguracao<Nacionalidade>());
modelBuilder.Configurations.Add(new EntityNameConfiguracao<Profissao>()); 
```

# 错误

但是，在尝试添加新迁移时，会出现以下错误：

**命令**

包管理器控制台中的命令：`Add-Migration PessoaDadosAdicionais`

**错误**

```
The property 'Id' is not a declared property on type 'Modalidade'. Verify that the property has not been explicitly excluded from the model by using the Ignore method or NotMappedAttribute data annotation. Make sure that it is a valid primitive property. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T21:32:06.367

我无法解释为什么它不起作用。它只是没有。它也不适用于 EF 4.1。

这尤其令人惊讶，因为它在您将接口转换为抽象基类时起作用：

```
public abstract class BaseEntity
{
    public int Id { get; set; }
}

public abstract class BaseEntityName : BaseEntity
{
    public string Nome { get; set; }
}

public class Modalidade : BaseEntityName
{
} 
```

然后将通用配置更改为：

```
internal class EntityNameConfiguracao<TEntity> : EntityTypeConfiguration<TEntity>
    where TEntity: BaseEntityName
{
    public EntityNameConfiguracao()
    {
        Property(p => p.Id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        Property(p => p.Nome).IsRequired().HasMaxLength(255);
    }
} 
```

现在，向模型构建器添加具体配置不会引发异常：

```
modelBuilder.Configurations.Add(new EntityNameConfiguracao<Modalidade>()); 
```

（您不能将`BaseEntity`and添加`BaseEntityName`到模型中，例如通过将`DbSet`这些类的 s 添加到上下文中或提供它们自己的配置类，否则您将再次遇到相同的异常。）

也许，抽象基类是您的替代品。否则，恐怕您需要为每个实体创建具体的配置类才能摆脱异常。

# qt - Qt - 经过多次尝试后静态链接失败

> ID：12762407
> 
> 赞同：1
> 
> 时间：2012-10-06T18:05:33.363
> 
> 标签：qt, static, compilation

几周以来，我一直在尝试为 Qt 进行静态链接，但我一直在失败。我遵循了很多文章和步骤，但没有一个适合我。我为命令提示符下载了最新的 Qt SDK 和 msvc2010 库。我究竟做错了什么？

在我的 Qt Creator 中，我的编译器设置为发布 msvc2010，我在 Qt 命令提示符和 nmake 中做了“configure -platform win32-msvc2010”。但这没有用。我将其设置为 MingW 并尝试过，但仍然失败。请帮我！如果您需要任何信息，请直接询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:30:39.807

1.  从他们的网站下载 Qt 源代码。
2.  配置它`configure -static`
3.  然后用nmake编译

# c - 如何在另一个线程完成其工作之前挂起一个线程

> ID：12762411
> 
> 赞同：1
> 
> 时间：2012-10-06T18:06:10.530
> 
> 标签：c, multithreading, pthreads, posix

嗨，我正在研究 POSIX 线程，我有一个类似的工作

*   我们有 5 个线程，每个线程将使用相同的函数分别打印 'a'、'b'、'c'、'd、'e'
*   必须按字母顺序创建线程。
*   每个字符必须在屏幕上打印 50 次
*   'a' 只能在打印完所有 'c' 后打印
*   'b' 只能在打印完所有 'd' 后才能打印
*   'c' 只能在打印完所有 'd' 后打印

所以在我显示我的代码之前，我必须解释我做了什么。首先，我有 5 个全局变量（它们是标志，它们最初都设置为 1）并且我将它们分配给 pthread_create() 函数返回的值。然后在主函数中，我在加入线程之前使用了 if() 条件。但我想我正在尝试错误的方式。问题是我无法处理“在 thread_a 之前，thread_d 必须完成其工作”的过程。如果您能提供帮助并提出一些更好的想法，我将不胜感激。这是我的代码，

```
#include <pthread.h>
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>

int counter = 0;

int flag_a = 1;
int flag_b = 1;
int flag_c = 1;
int flag_d = 1;
int flag_e = 1;

pthread_mutex_t mymutex=PTHREAD_MUTEX_INITIALIZER;

void* thread_function(void* str);
void print_char(char* ch);

int main(){

    pthread_t thread_a, thread_b, thread_c, thread_d, thread_e;

    char* a = "a";
    char* b = "b";
    char* c = "c";
    char* d = "d";
    char* e = "e";

    flag_a = pthread_create( &thread_a, NULL, thread_function, (void*) a );
    flag_b = pthread_create( &thread_b, NULL, thread_function, (void*) b );
    flag_c = pthread_create( &thread_c, NULL, thread_function, (void*) c );
    flag_d = pthread_create( &thread_d, NULL, thread_function, (void*) d );
    flag_e = pthread_create( &thread_e, NULL, thread_function, (void*) e );

    if(flag_c==0)
        pthread_join( thread_a, NULL );

    pthread_join( thread_b, NULL );

    if(flag_d==0)
        pthread_join( thread_c, NULL );

    if(flag_d==0)
        pthread_join( thread_d, NULL );

    pthread_join( thread_e, NULL );

    printf("\nCounter = %d\n", counter);

    return 0;
}

void* thread_function(void* str) {

    int i;
    char* msg = (char*) str;

        for(i=0; i<50; i++) {

            pthread_mutex_lock(&mymutex);
            counter++;  
            print_char(msg);
            pthread_mutex_unlock(&mymutex);

        }
    }

void print_char(char* ch){

    int i;

    for(i=0; i<1; i++) {
        printf("%s --> ", ch);
        fflush(stdout);
        sleep(1);
    }
} 
```

编辑：我找到了一个可以正确打印字符的解决方案，但问题是我无法异步打印它们。我的意思是每当我运行代码时，它都有相同的输出，例如：

e-->d-->c-->b-->a （每个字符打印 50 次）

这是 thread_function() 的编辑部分

```
void* thread_function(void* str) {

    int i;
    char* msg = (char*) str;

        while( (strcmp(msg,"a") == 0) && (counter_c < 5) ){
        ;;
    }

        while( (strcmp(msg,"c") == 0) && (counter_d < 5) ){
        ;;
    }

        while( (strcmp(msg,"b") == 0) && (counter_d < 5) ){
        ;;
    }

        for(i=0; i<5; i++) {

            pthread_mutex_lock(&mymutex);               
            counter++;

                if( strcmp(msg,"d") == 0 )
                    counter_d++;

                if( strcmp(msg,"c") == 0 )
                    counter_c++;

            print_char(msg);
            pthread_mutex_unlock(&mymutex);

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:03:56.260

从逻辑上讲，您有一个依赖图，并且您需要一种方法让每个线程a）在开始打印它的东西之前等待某些条件发生，并且b）发出它已经完成打印的信号，以便其他等待的线程可以开始。在 pthreads 中，这可以通过*条件变量来完成*. 因此，您可以做什么，而不是将指针传递给要打印的字符，而是将指针传递给包含要打印的字符的结构，在开始打印之前等待的条件变量（和关联的互斥体），以及另一个条件变量相关联的互斥体在完成时发出信号。然后在主线程中，在创建线程之前，您当然需要适当地设置所有这些结构，并且在创建线程之后，主线程应该发出那些位于末尾（或开头，取决于您如何看看它..) 的依赖链，以便启动整个过程。

有关如何使用条件变量的介绍，请参见例如[https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables](https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:26:22.133

// 先打印 d 然后打印 b 或 c 在 c 完成后它会打印 a。然后 main 函数将等待

```
#include <pthread.h>
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>

int counter = 0;

int flag_a = 1;
int flag_b = 1;
int flag_c = 1;
int flag_d = 1;
int flag_e = 1;

pthread_mutex_t mymutex=PTHREAD_MUTEX_INITIALIZER;

void* thread_function(void* str);
void print_char(char* ch);

int main(){

    pthread_t thread_a, thread_b, thread_c, thread_d, thread_e;

    char* a = "a";
    char* b = "b";
    char* c = "c";
    char* d = "d";
    char* e = "e";

    flag_d = pthread_create( &thread_d, NULL, thread_function, (void*) d );
        pthread_join( thread_d, NULL );
    flag_b = pthread_create( &thread_b, NULL, thread_function, (void*) b );
    flag_c = pthread_create( &thread_c, NULL, thread_function, (void*) c );

  pthread_join( thread_c, NULL );

    flag_a = pthread_create( &thread_a, NULL, thread_function, (void*) a );
    flag_e = pthread_create( &thread_e, NULL, thread_function, (void*) e );

    //if(flag_c==0)
     //   pthread_join( thread_a, NULL );

   // pthread_join( thread_b, NULL );

    //if(flag_d==0)
      //  pthread_join( thread_c, NULL );

//    if(flag_d==0)
  //      pthread_join( thread_d, NULL );

    //pthread_join( thread_e, NULL );

    printf("\nCounter = %d\n", counter);
pthread_exit(NULL);  //or you can join thread e before printf() statement 
    return 0;
}

void* thread_function(void* str) {

    int i;
    char* msg = (char*) str;

        for(i=0; i<50; i++) {

            pthread_mutex_lock(&mymutex);
            counter++;  
            print_char(msg);
            pthread_mutex_unlock(&mymutex);

        }
    }

void print_char(char* ch){

    int i;

    for(i=0; i<1; i++) {
        printf("%s --> ", ch);
        fflush(stdout);
  //      sleep(1);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:03:43.140

实际上，您想要的是在开始工作之前暂停线程，直到给定线程完成。

*   线程 A：打印 A
*   线程 B：打印 B 的
*   线程 C：打印 C 的
*   线程 D：打印 D's

在您的情况下，您希望 A 等待 C，B 和 C 等待 D 并启动 D。为此，您需要[semaphores](https://stackoverflow.com/questions/2065747/pthreads-mutex-vs-semaphore)，因为 semaphore 会阻塞线程，直到它被注意到唤醒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T19:52:12.033

也许我误解了要求？伪：

```
Start Ethread('e'); // can run async, since no contraints on 'e'
Start Dthread('d'); // print 'd' and 
Join Dthread;       // wait for 'd' to finish
Start Bthread('b'); // now start on the 'b'
Start Cthread('c'); // and the 'c'
Join Cthread;       // but just wait for the 'c' to finish
Start Athread('a'); // and then print the 'a' 
```

每个线程打印其传递的字符 50 次。如果通用输出例程需要互斥体，OK。

这不满足要求吗？

# ruby-on-rails - Accepts_nested_attributes 和验证的边缘案例

> ID：12762414
> 
> 赞同：0
> 
> 时间：2012-10-06T18:06:24.633
> 
> 标签：ruby-on-rails, ruby, validation, activerecord, associations

我有一个`Account`接受用户模型嵌套属性的模型。一个帐户`has_many users`。因此，没有帐户，用户就无法存在。我写了这个验证：

```
# users.rb
validates :account_id, presence: true, numericality: { only_integer: true } 
```

在注册期间，用户填写帐户表单和嵌套用户表单。但是，由于该帐户尚不存在，因此我的测试因以下错误而失败：

```
#<ActiveModel::Errors: ... @base=#<Account id: nil, title: "ACME Corp", subdomain: "acme1", created_at: nil, updated_at: nil>, @messages={:"users.account_id"=>["can't be blank"]}> 
```

我总是希望确保用户存在有效的帐户 ID，除非用户是通过`Accounts#new`. 换句话说，当`Account`同时创建一个帐户时，在这种情况下，还没有帐户 ID 可以提供给用户。

有没有办法做到这一点？

这可能是一个有争议的问题，因为所有新用户都将通过 current_account 对象 a la 创建`current_account.users.build`。但我想确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:44:49.873

在用户模型中：

```
validates :account, :presence => true 
```

在帐户模型中：

```
has_many :users, :inverse_of => :account 
```

这只是验证父*对象*是否存在 - 即使它尚未保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:17:55.573

我会考虑：

```
validates_presence_of :account_id, only => :create
validates_numericality_of_account_id:, :null => true # or :only => :create 
```

两种情况的分离和特殊助手的使用有助于立即阅读。

# ios - 如何在 IOS 应用程序中启用 SIGFPE 信号除以零？

> ID：12762418
> 
> 赞同：4
> 
> 时间：2012-10-06T18:06:32.260
> 
> 标签：ios, xcode, exception-handling, divide-by-zero

我在 Xcode 4.5（llvm 4.1 编译器）中为 ios 5/6 开发了一个应用程序，并使用信号和异常处理程序来记录错误。但是我发现除以零永远不会引发 SIGFPE 信号。在 linux 系统上，我可以使用 feenableexcept 来设置陷阱。但这在ios中没有定义。

将适当的位设置为 fenv_t.__fpscr 不起作用，至少对于 iphone 4 和 3gs 而言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T19:15:28.703

该`feenableexcept`函数是一个不属于标准 C 或 POSIX 的 linux 函数。没有可移植的方式来启用`SIGFPE`.

实际上，您需要`SIGFPE`在 iOS 模拟器和 iOS 设备上启用不同的代码，因为模拟器运行 x86 而设备运行 ARM。

我认为（但尚未测试）您可以`SIGFPE`通过`fenv_t`使用该`fegetenv`功能，打开或关闭 中的一些位`fenv_t`，然后将其传递给该`fesetenv`功能来启用。的定义`fenv_t`是特定于处理器的。看看`fenv.h`。

对于 ARM，`fenv_t`包含一个名为`__fpscr`. 这是[浮点状态和控制寄存器](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0473c/Bcfhfbga.html)。您可以切换的位被列举`fenv.h`为`__fpscr_trap_invalid`、`__fpscr_trap_divbyzero`等。大概您想要打开该`__fpscr_trap_divbyzero`位。

对于 x86，`fenv_t`包含两个感兴趣`__control`的字段：（x87 控制字）和`__mxcsr`（SSE 控制/状态寄存器）。

您可以切换的位`__control`由 中定义的`FE_INEXACT`、`FE_UNDERFLOW`等常量定义`fenv.h`。我认为您必须关闭这些位*才能*启用`SIGFPE`这些异常。 [检查处理器手册，§8.1.5](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)。

可以切换的位`__mxcsr`由 中的`_MM_MASK_INVALID`、`__MM_MASK_DENORM`等常量定义`xmmintrin.h`。我认为您需要关闭这些位*才能*启用`SIGFPE`. 检查处理器手册，§10.2.3。

```
 fenv_t fe;
    if (fegetenv(&fe) != 0) {
        // error
    }

#if defined __arm__
    fe.__fpscr |= __fpscr_trap_divbyzero;
#elif defined __i386__
    fe.__control &= ~FE_DIVBYZERO;
    fe.__mxcsr &= ~_MM_MASK_DIV_ZERO;
#else
#error unknown processor architecture
#endif

    if (fesetenv(&fe) != 0) {
        // error
    } 
```

您可能还需要`#pragma STDC FENV_ACCESS ON`为所有处理器执行此操作。

同样，我还没有测试过这些。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:21:22.680

您解决此问题的选择是：

按照 Rob 所说的，使用一个函数启用浮点除以零陷阱，然后定期检查标志：

```
#include "fenv.h"
#include <iostream>
#include <csignal>
void CheckForDivideByZeroException()
{
    int set_excepts;
    set_excepts = fetestexcept(FE_DIVBYZERO);

    if (set_excepts & FE_DIVBYZERO) {
        cerr<<"Divide by zero!!!"<<endl;
        feclearexcept(FE_DIVBYZERO);
    }
}
void EnableDivideByZeroExceptions()
{
    fenv_t fe;
    if (fegetenv(&fe) != 0) {
        cerr<<"ERROR - Unable to get floating point status and control register"<<endl;
        raise(SIGINT);
    }

#if defined __arm__
    fe.__fpscr |= __fpscr_trap_divbyzero;
#elif defined __i386__
    fe.__control &= ~FE_DIVBYZERO;
    fe.__mxcsr &= ~_MM_MASK_DIV_ZERO;
#else
#error unknown processor architecture
#endif

    if (fesetenv(&fe) != 0) {
        cout<<"ERROR - Unable to trap div by zero errors"<<endl;
        raise(SIGINT);
    }
}
#endif 
```

或者您的另一个选择是通过将以下内容添加到您的 OTHER_CFLAGS 构建设置来启用 xcode 中的标志，该标志将引发具有所有未定义行为的异常

```
-fcatch-undefined-behavior 
```

# spring - 无法在托管 bean 中注入 @Resource 注解

> ID：12762419
> 
> 赞同：0
> 
> 时间：2012-10-06T18:06:58.930
> 
> 标签：spring, managed-bean

我试图使用 spring @Resource Annotation 将 util 类注入托管 bean，但是当我运行应用程序时，我得到了这个错误。

```
 Caused by: com.sun.faces.spi.InjectionProviderException: javax.naming.NameNotFoundException: Name com.web.bean.Bond is not bound in this Context
    at com.sun.faces.vendor.Tomcat6InjectionProvider.inject(Tomcat6InjectionProvider.java:84)
    at com.sun.faces.mgbean.BeanBuilder.injectResources(BeanBuilder.java:205)
    ... 37 more
Caused by: javax.naming.NameNotFoundException: Name com.web.bean.Bond is not bound in this Context
    at org.apache.naming.NamingContext.lookup(NamingContext.java:770)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:153)
    at org.apache.catalina.util.DefaultAnnotationProcessor.lookupFieldResource(DefaultAnnotationProcessor.java:278)
    at org.apache.catalina.util.DefaultAnnotationProcessor.processAnnotations(DefaultAnnotationProcessor.java:187)
    at com.sun.faces.vendor.Tomcat6InjectionProvider.inject(Tomcat6InjectionProvider.java:82) 
```

我的弹簧配置

```
 <context:annotation-config/>
 <context:component-scan base-package="com.web.bean"/> 
```

我使用注释的托管bean

```
 package com.web.bean;
  @ManagedBean
  @SessionScoped

@Resource
private MailSender mail; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T03:08:45.310

我在不使用@Resource Annotation 的情况下解决了这个问题

```
private MailSender mail = (MailSender) SpringWrapper.getInstance().getBean("mail"); 
```

# unit-testing - Wicket 和 Guice，网页中的注入，以及可测试性

> ID：12762423
> 
> 赞同：4
> 
> 时间：2012-10-06T18:07:15.343
> 
> 标签：unit-testing, wicket, guice

我一直在尝试让 wicket 和 guice 一起工作，更具体地说，使用 guice 将外观（或控制器，等等）注入网页。问题似乎是我不能在网页中进行除现场注入之外的任何其他注入。如果我尝试使用 setter 注入，则不会调用 setter。构造函数注入网页似乎是不可能的（或者我没有找到如何）。

因此，在网页中注入时，我似乎将现场注入作为唯一的可能性。

首先，任何人都可以确认这是正确的吗？我似乎在 apache 的网站上发现，从 wicket 1.5 开始，setter injection 不起作用（顺便说一句，我在 6 上），但没有找到更多关于它的信息。

其次，如果确实只能在网页中进行字段注入，我怎么能用 guice 干净地对字段注入进行单元测试？（我正在考虑一个模拟测试，我只需要知道在按下按钮后使用正确的参数正确调用了有问题的外观，外观本身可以在另一个单元测试中进行测试）。

没有提供任何代码，因为这个问题似乎相当基本。如果需要，我会放一些片段

卡斯帕

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T17:00:53.907

我也一直在为此苦苦挣扎。集成最终非常顺利：

[http://software.danielwatrous.com/wicket-guice-including-unittests/](http://software.danielwatrous.com/wicket-guice-including-unittests/)

按照这种方法，注入器被注入，这提供了充分的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:31:19.787

据我所知，wicket IoC 模块只为组件提供字段注入，因此没有简单的方法可以从 setter 向组件注入一些东西。您可以通过阅读 Wicket-IoC/Wicket-Guice 源代码来确认这一点。

要清除注入的字段，您可以使用 Java reflation API 将其设为 field `null`。但是，Page 在测试后可能会有一些状态。所以我建议在每次测试后简单地重新创建页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T07:45:58.397

我使用 Wicket 和 Guice 进行模拟测试。您可以在此处查看我如何绑定所有内容[http://blog.yanivkessler.com/2010/05/wicket-and-guice-alternate-route.html](http://blog.yanivkessler.com/2010/05/wicket-and-guice-alternate-route.html)（我在 Gaetan 下发表评论）

测试不是问题，因为注入是由 Component 构造函数完成的。就我而言，我对 Component 进行了小型测试，根据用户交互检查模拟服务的调用。

这是我的测试初始化​​的简化版本。

```
 @BeforeClass
  public void buildMockedTester() {
    List<Module> modules = buildModules();
    injector = Guice.createInjector(modules);
    MyApplicationFactory instance = injector.getInstance(MyApplicationFactory.class);
    WebApplication application = instance.buildWebApplication();
    tester = new WicketTester(application);
} 
```

# web-scraping - 来自多个网站的给定查询的数据聚合

> ID：12762425
> 
> 赞同：1
> 
> 时间：2012-10-06T18:07:47.897
> 
> 标签：web-scraping

嗨，我将从事一个项目，其中我想查询几个网站并从中获取类似的数据并将其呈现给用户。例如：如果用户的查询名称为“reebok shoes”，大小为“9.0”，范围在“$30 到 $75”之间，我的应用程序应该为这些查询跳过几个网站（我将提供这些网站）并获取相关的来自他们的数据。不将数据保存在数据库中，我需要格式化并将其获取给用户。我是新手，所以需要关于选择哪个框架或哪个工具或任何我应该知道的关于网络抓取的重要内容的指针。我确实研究了一些工具和框架，但不确定哪一个能够处理特定于查询的网络抓取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:24:40.617

在做了很好的研究之后，我终于选择了 SimplehtmlDom (PHP)parser，它有助于提取 html 标签并将其存储到 JSON 文件中。然后我执行一些数据格式化功能并将格式化的 JSON 文件转发到前端，然后使用 HTML 我代表数据。我还尝试了 Scrapy (Python)，它比 simplehtmldom 容易得多。让我知道是否有人有任何疑问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:20:43.020

尝试[Crowbar](http://simile.mit.edu/wiki/Crowbar)解释远程网站上的所有 Javascript 以获取真实内容（如果它不是静态的）。然后要么使用 Crowbar 本身来实现你的抓取，但如果你发现 Javascript 很麻烦（像我一样），你可以使用 Perl 并`HTML::TagParser`从网站获取内容。

例如，我必须从电子连锁店获取商店地址和商店名称，所以我做了：

```
my $html = HTML::TagParser->new($html);
my $address = $html->getElementsByClassName("mystoremystorecontentcontainer")->innerText();
my $shopname = $html->getElementsByClassName("mystoremystorecontentmiddle text_headline")->innerText(); 
```

（`$html`是一个包含完整网站的字符串。）

如果你知道数据是如何排列的——意味着标签有什么 id 或类名，它保存了数据——这很容易。

一点警告：该方法`innerText()`实施不当。如果文本中的特殊字符不干净（例如，杂散的 ' `Ä`' 而不是`&Auml;`），那么所有的地狱都会失败。祝你好运...

# java - 无法更改 Libgdx 中的字体颜色

> ID：12762426
> 
> 赞同：21
> 
> 时间：2012-10-06T18:08:06.493
> 
> 标签：java, fonts, libgdx

我正在尝试更改我在应用程序中使用的字体颜色。但无论我尝试什么字体都是黑色的。我使用 Hiero 字体工具制作了这个字体。

我的代码是这样的：

```
SpriteBatch batch = new SpriteBatch();
BitmapFont font = new BtimapFont( Gdx.files.internal(MainAssets.pathToAssets + "font/comic.fnt"), Gdx.files.internal(MainAssets.pathToAssets +  "font/comic.png"), false ); 
```

在我绘制字体的渲染中：

```
batch.begin();
font.setColor(1, 0, 0, 1);
font.draw(batch, "Hello World!", 0, 0);
batch.end(); 
```

我发现了一个与我类似的问题，但仍然没有解决方案。

[http://code.google.com/p/libgdx/issues/detail?id=370](http://code.google.com/p/libgdx/issues/detail?id=370)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-21T17:18:49.183

您需要设置具有 32 位深度的输出格式和带有 alpha 的白色（如果您使用的是[BMFont](http://www.angelcode.com/products/bmfont/)工具，则不了解 Hiero ）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-08T14:28:11.020

如果您的字体是黑色的，那么它不会被着色（这是您在调用 setColor 时所做的）。尝试在 Hiero 中再次生成白色字体。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-10-05T11:13:33.060

你可以用这个

```
font.setColor(Color.BLUE); 
```

最简单的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-06T10:33:06.860

最新的 libGDX 也有同样的问题，就我而言，它与字体图像格式有关。有关详细信息，请查看此消息：

[在 libGDX 更新到最新版本后 font.setColor 方法不起作用](https://stackoverflow.com/questions/41487053/font-setcolor-method-not-working-after-libgdx-update-to-latest-version)

# semantics - 在 Google Refine 中提取 Freebase 数据

> ID：12762428
> 
> 赞同：1
> 
> 时间：2012-10-06T18:08:28.197
> 
> 标签：semantics, freebase, google-refine

我对 Google Refine 和 Frebase 还很陌生。我想使用互联网/网站列表，但转储不包含网站 URL，但是可以在相关的“官方网站”对象中访问。

在 Refine 中，如何根据网站 ID (/m/02nqp6l) 获取这些数据？

# 数据集（互联网/网站）

[http://download.freebase.com/datadumps/latest/browse/internet/website.tsv](http://download.freebase.com/datadumps/latest/browse/internet/website.tsv)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:34:18.253

您引用的主题实际上没有官方网站的链接。您最好查看同一公司的[http://www.freebase.com/inspect/en/hubpages_inc](http://www.freebase.com/inspect/en/hubpages_inc)之类的主题，并查看网站 URL 的连接方式（通过 /common/topic/webpage [http://www.freebase.com/inspect/m/03gnm5n](http://www.freebase.com/inspect/m/03gnm5n)的财产）

# php - 将多个表单传递给单个 MYSQL UPDATE 查询

> ID：12762430
> 
> 赞同：0
> 
> 时间：2012-10-06T18:08:37.333
> 
> 标签：php, mysql

第一次处理将多个表单传递给单个 UPDATE 查询（php 新手）

该脚本从数据库表行中提取并显示所有数据，并通过 textarea 中的 $currentadcode 显示它取决于数据库中有多少行，它一遍又一遍地重复此代码以显示数据限制然后下一页查看其余部分。

文本区域名称 adcode$ID 变为 adcode1 adcode2 adcode3，提交按钮名称 editad$ID 变为 editad1 editad2 editad3。

```
echo "<div class=\"adcodearea\">";
echo "<h2>$ID : $adname</h2><a href=\"?action=deletead&IDnum=$ID\">Delete Ad</a><br />\n";
echo "Preview :<br /><div class=\"adcode\">$currentadcode</div><br /> \n";
//echo "<br />\n";
echo "<form action=\"editad.php?action=editad\" name=\"addAD$ID\" method=\"post\">\n";
echo "AD code (can be any type of script) text link, javascript or banner :<br />\n";
echo "Current AD Code :<br /><textarea name=\"adcode$ID\" wrap=\"physical\" cols=\"72\" rows=\"6\" onKeyDown=\"textCounter(document.addAD$ID.adcode$ID,document.addAD$ID.remLen$ID,5000)\" onKeyUp=\"textCounter(document.addAD$ID.adcode$ID,document.addAD$ID.remLen$ID,5000)\">$currentadcode</textarea>";
echo "<br /><input readonly type=\"text\" name=\"remLen$ID\" class=\"adcountdown\" size=\"2\" maxlength=\"3\" value=\"5000\">Characters Left \n";
echo "<input type=\"submit\" name=\"editad$ID\" class=\"adsubmit\" value=\"Edit AD Code\"></form>\n";
echo "</div>";
echo "<br /><hr />";
//echo "$letknownedited"; 
```

它将 textarea 中的数据传递给此代码接收的 editad.php。

```
if ($_GET['action'] == "editad") {  // Edit AD
    $newadcode = mysql_real_escape_string($_POST['adcode' . $ID]);
    $doedit = "UPDATE `adgate`.`ads` SET `ads`.`adcode` = '$newadcode' WHERE `ads`.`ID` = '$ID' LIMIT 1" or die(mysql_error());
    $retval = mysql_query( $doedit, $connection );
    if(! $retval )
    {
        die('Could not update data: ' . mysql_error());
    }
    echo "Updated data successfully\n";
    //header("Location: displayads.php"); 
```

但它只获取页面上第一个 textarea 的数据/最低的 adcode$ID - 即使您编辑页面上的最后一个。如果您尝试编辑页面上除第一个广告 (adcode8) 之外的任何其他广告，则会抛出此

*   注意：未定义索引：第 29 行 C:\Program Files (x86)\Zend\Apache2\htdocs\adgate\editad.php 中的 adcode8

当前页面上的第一个广告 (adcode8)。

所以我的想法可能是将代码传递给 IF、ELSEIF、ELSE 但这行不通，因为它可能是无限数量的广告。

这样就留下了 HIDDEN 表单字段，我认为我不需要这样做，因为我将一个唯一的 name=\"editad$ID\" 传递给

```
$newadcode = mysql_real_escape_string($_POST['adcode' . $ID]); 
```

那条线是错误的还是我试图做的不可能并且需要尝试隐藏表单字段？这里是变量

1.  $ID（唯一）
2.  $adname（唯一，但作为特定的广告名，例如：Google Banner）
3.  $currentadcode（唯一但作为特定代码）

然后..

*   如果需要隐藏表单字段并且无法传递动态提交按钮名称来执行更新，那么...

如果隐藏表单字段是这样的

```
<input type="hidden" name="$ID" value="$ID"> 
```

我将如何调整此代码，我什至会通过

$newadcode = mysql_real_escape_string($_POST['adcode' . $ID]);

目标：允许任何 TEXTAREA 的可食用性和只更新 MYSQL 数据库中的代码/行

# r - 这是将数据从 EUROSTAT 获取到 R 的解决方案吗？

> ID：12762431
> 
> 赞同：7
> 
> 时间：2012-10-06T18:08:37.897
> 
> 标签：r

我经常使用来自 EUROSTAT 的数据，发现无法将数据直接加载到 R 中非常烦人。我编写了这个片段来获取 EUROSTAT [http://epp.eurostat.ec 的批量下载工具提供的任何数据集。 europa.eu/NavTree_prod/everybody/BulkDownloadListing?sort=1&dir=dic%2Fen](http://epp.eurostat.ec.europa.eu/NavTree_prod/everybody/BulkDownloadListing?sort=1&dir=dic%2Fen)

有没有更好的办法？..这个对我有用：

```
 #this library is used to download data from eurostat and to find datasets
#later extend to extend to find datasets with certain dimensions

#download data from eurostat
#unpack and convert to dataframe
#load label descriptions
#load factors
#save as r data object

datasetname="ebd_all"

LANGUAGE="en"

install.packages("RCurl")
library(RCurl)
library(data.table)
library(reshape)
library(stringr)

baseurl="http://epp.eurostat.ec.europa.eu/NavTree_prod/everybody/BulkDownloadListing?sort=1&file=data%2F"

fullfilename=paste(datasetname,".tsv.gz",sep="")
temp <- paste(tempfile(),".gz",sep="")
download.file(paste(baseurl,fullfilename,sep=""),temp)
dataconnection <- gzfile(temp)
d=read.delim(dataconnection)
longdata=melt(d,id=colnames(d)[1])

firstname=colnames(d)[1] # remove .time and count how many headings are there 
firstname=substr(firstname,1,nchar(firstname)-nchar(".time"))
headings=toupper(strsplit(firstname,".",fixed=TRUE)[[1]])
headingcount=length(headings)
colnames(longdata)=c("dimensions","time","value")

#get the data on the dimension tables
df=data.frame(dimensions=as.character(longdata[,"dimensions"]))
df = transform(df, dimensions= colsplit(dimensions, split = "\\,",names=headings))
dimensions=data.table(df$dimensions)

#download the dimension labels - save headings as better variable
dimfile=paste("http://epp.eurostat.ec.europa.eu/NavTree_prod/everybody/BulkDownloadListing?sort=1&file=dic%2F",LANGUAGE,"%2Fdimlst.dic",sep="")

temp <- paste(tempfile(),".gz",sep="")
download.file(dimfile,temp)
dataconnection <- gzfile(temp)
dimdata=read.delim(dataconnection,header=FALSE)
colnames(dimdata)=c("colname","desc")
lab=dimdata$desc
names(lab)=dimdata$colname

#create  headings that speak for themselves for columns
speakingheadings=as.character(lab[headings])

#download factors for each heading and add
for(heading in headings){
  factorfile=paste("http://epp.eurostat.ec.europa.eu/NavTree_prod/everybody/BulkDownloadListing?sort=1&file=dic%2F",LANGUAGE,"%2F",tolower(heading),".dic",sep="")
  temp <- paste(tempfile(),".gz",sep="")
  download.file(factorfile,temp)
  dataconnection <- gzfile(temp)
  factordata=read.delim(dataconnection,header=FALSE)
  colnames(factordata)=c(heading,paste(heading,"_desc",sep=""))
  #join the heading to the heading dataset
  dimensions=merge(dimensions,factordata,by=heading,all.x=TRUE)
}

  #at the end at speaking headings
setnames(dimensions,colnames(dimensions)[1:length(speakingheadings)],speakingheadings)

  #add data columns by writing and reading again---FASTER ;-)
temp=tempfile()
values=data.frame(value=as.character(longdata$value))
values = transform(values, value= colsplit(value, split = "\\ ",names=c("value","flag")))
values=values$value
values=data.table(values)

values$value=as.character(values$value)
values$flag=as.character(values$flag)
values[value==flag,flag:=NA]
values$value=as.double(values$value)

eurostatdata=cbind(dimensions,time=longdata$time,values) 
save(eurostatdata,file=paste(datasetname,".RData")) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T13:57:25.600

Check out **SmarterPoland** package, there are functions to download (and get into R) data directly from EUROSTAT.

here is example:

```
library(SmarterPoland)
# info about passagers
grepEurostatTOC("split of passenger transport")
## get table
tmp <- getEurostatRCV("tsdtr210")
summary(tmp)

##     vehicle         geo            time          value     
##  BUS_TOT:756   AT     :  63   1990   : 108   Min.   : 0.0  
##  CAR    :756   BE     :  63   1991   : 108   1st Qu.: 6.9  
##  TRN    :756   BG     :  63   1992   : 108   Median :12.9  
##                CH     :  63   1993   : 108   Mean   :33.6  
##                CY     :  63   1994   : 108   3rd Qu.:77.4  
##                CZ     :  63   1995   : 108   Max.   :93.4  
##                (Other):1890   (Other):1620   NA's   :397 
```

source: www.smarterpoland.pl

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-26T13:24:16.233

欧盟统计局以 SDMX 格式传播其统计数据。在 R 中，您可以使用[rsdmx](https://github.com/opensdmx/rsdmx)包来读取它们的数据。请参见下面的示例：

```
#in case you want to install rsdmx from Github
#(otherwise you can install it from CRAN)
require(devtools)
install_github("rsdmx", "opensdmx")
require(rsdmx)

#read EUROSTAT dataset
dataURL <- "http://ec.europa.eu/eurostat/SDMX/diss-web/rest/data/cdh_e_fos/..PC.FOS1.BE/?startperiod=2005&endPeriod=2011 "
sdmx <- readSDMX(dataURL)
stats <- as.data.frame(sdmx)
head(stats) 
```

注意：您可以从[CRAN](http://cran.r-project.org/web/packages/rsdmx/index.html)找到 rsdmx，也可以直接从 GitHub 存储库安装它。[https://github.com/opensdmx/rsdmx](https://github.com/opensdmx/rsdmx)

rsdmx 不仅可以读取 SDMX `datasets`，还可以读取所有 SDMX 文档、数据或元数据，包括`data structures`和`codelists`. 如果您需要更多示例，我邀请您查看[rsdmx wiki 。](https://github.com/opensdmx/rsdmx/wiki)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-20T22:47:03.067

**修订答案**

RJSDMX[包](https://github.com/amattioc/SDMX/)也可用于将数据从 Eurostat 检索到 R 中。示例如下所示。

```
library(RJSDMX)
data <- getTimeSeries("EUROSTAT","nama_gdp_c/.EUR_HAB.B1GM.DE") 
```

* * *

**初步答案**（留在这里供参考）

更好的方法可能是使用[Eurostat Web Service 工具](http://epp.eurostat.ec.europa.eu/portal/page/portal/sdmx_web_services/about_this_service)，该工具提供对 Eurostat 数据的编程访问。Web Service 工具是 Eurostat 提供的另一项服务——除了批量下载工具——用于从其数据库中提取数据。要使用该服务，您需要发送 REST 或 SOAP 请求。从服务器检索到的数据是一种分层数据结构——一种 XML 文档，可以使用 XML 包对其进行解析。

在查看下面的快速示例之前，我建议阅读一些有关 Eurotat 提供的服务的信息，可以在这里找到：[http ://epp.eurostat.ec.europa.eu/portal/page/portal/sdmx_web_services/ getting_started/a_few_useful_points](http://epp.eurostat.ec.europa.eu/portal/page/portal/sdmx_web_services/getting_started/a_few_useful_points)

```
# Step 0: Load the XML package.
# This is used later on to parse the XML retrieved from Eurostat.
# For a tutorial on XML and parsing XML documents, read this: http://www.w3schools.com/xpath/default.asp

library(XML)

# Step 1: Construct the appropriate REST query.
# First read this:     http://epp.eurostat.ec.europa.eu/portal/page/portal/sdmx_web_services/getting_started/a_few_useful_points

# Specify the data to be retrieved.

resource    <- "data"
dataflow    <- "nama_gdp_c"
key         <- ".EUR_HAB.B1GM.DE"
time_filter <- "?startPeriod=2010"

# Construct the query

partial_url <- paste(paste(resource, dataflow, key, sep="/"), time_filter, sep="")
base_url    <- "http://ec.europa.eu/eurostat/SDMX/diss-web/rest/"
rest_query  <- paste(base_url, partial_url, sep="")

# Step 2: Make the request using cURL (that is, retrieve the data)
# For information about cURL, read this: http://curl.haxx.se/
# For information about the curl command, check out the man pages: http://curl.haxx.se/docs/manpage.html

command   <- paste("curl", rest_query)
raw_data  <- system(command, intern=TRUE)

# Note: at this stage, the data is a character object.

class(raw_data)

# View the data, which can be found commented out at the bottom of this script. Note that it is a hierarchical data structure. 

# Step 3: Parse the data
# Here we use functions from the XML package - one could, of course, use base package functions, but why?

data <- xmlParse(raw_data)

# Parsing the data returns an object of class: "XMLInternalDocument" and "XMLAbstractDocument"

class(data)

# Step 4: Extract the numerical data 

# Data can be found using getNodeSet(), but the data remains stuck between "tags" - we just want the numbers.

getNodeSet(data,"//generic:ObsValue")

# The numbers we want to extract are, in this case, value "attributes". We can target these values as follows.

xpathApply(data, "//generic:ObsValue", xmlGetAttr, name="value")

# That does the job, but really we'd like those numbers in a vector rather than a list object.

numbers <- as.numeric(xpathApply(data, "//generic:ObsValue", xmlGetAttr, name="value"))

# Step 5: Extract the dates (years) - i.e. get some metadata.
# This is similar to above.

years <- as.numeric(xpathApply(data, "//generic:ObsDimension", xmlGetAttr, name="value"))

# Step 6 and on-wards:
#
# Enter your code here... =)
#
#
# 
```

作为参考，原始数据如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<message:GenericData xmlns:footer="http://www.sdmx.org/resources/sdmxml/schemas/v2_1/message/footer" xmlns:generic="http://www.sdmx.org/resources/sdmxml/schemas/v2_1/data/generic" xmlns:common="http://www.sdmx.org/resources/sdmxml/schemas/v2_1/common" xmlns:message="http://www.sdmx.org/resources/sdmxml/schemas/v2_1/message" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <message:Header>
    <message:ID>13e08b8d24936d75b3a6fa1b9c632e22</message:ID>
    <message:Test>false</message:Test>
    <message:Prepared>2014-10-20T21:10:50</message:Prepared>
    <message:Sender id="ESTAT">
      <common:Name xml:lang="en">Eurostat</common:Name>
      <message:Timezone>+01:00</message:Timezone>
    </message:Sender>
    <message:Receiver id="RECEIVER"/>
    <message:Structure structureID="ESTAT_DSD_nama_gdp_c_1_0" dimensionAtObservation="TIME_PERIOD">
      <common:Structure>
        <Ref agencyID="ESTAT" id="DSD_nama_gdp_c" version="1.0"/>
      </common:Structure>
    </message:Structure>
    <message:DataSetAction>Append</message:DataSetAction>
    <message:DataSetID>nama_gdp_c</message:DataSetID>
  </message:Header>
  <message:DataSet structureRef="ESTAT_DSD_nama_gdp_c_1_0">
    <generic:Series>
      <generic:SeriesKey>
        <generic:Value id="UNIT" value="EUR_HAB"/>
        <generic:Value id="INDIC_NA" value="B1GM"/>
        <generic:Value id="GEO" value="DE"/>
        <generic:Value id="FREQ" value="A"/>
      </generic:SeriesKey>
      <generic:Obs>
        <generic:ObsDimension value="2013"/>
        <generic:ObsValue value="33300.0"/>
      </generic:Obs>
      <generic:Obs>
        <generic:ObsDimension value="2012"/>
        <generic:ObsValue value="32600.0"/>
      </generic:Obs>
      <generic:Obs>
        <generic:ObsDimension value="2011"/>
        <generic:ObsValue value="31900.0"/>
      </generic:Obs>
      <generic:Obs>
        <generic:ObsDimension value="2010"/>
        <generic:ObsValue value="30500.0"/>
      </generic:Obs>
    </generic:Series>
  </message:DataSet>
</message:GenericData> 
```

注意事项：我使用 cURL 发送请求，但这可以通过许多其他方式完成，例如使用 Wget、Perl、PHP 等。只要您愿意（并且能够）使用该系统() 命令，以编程方式从 Eurostat 将数据导入 R 应该足够简单（参见下面的编辑）。将数据转换为 ts 对象（或 mts 对象，具体取决于您发送的查询）也应该足够简单。最后，我使用的是 Linux 操作系统（Ubuntu 发行版），所以如果您使用的是 Windows，上面的示例可能不适合您。

我希望这有帮助！

编辑：我刚刚注意到你加载了 RCurl 包，所以如果你愿意，你可以用我使用的系统命令替换该包提供的任何工具。

# c++ - 编译器在模板类中实例化函数，即使没有调用它

> ID：12762432
> 
> 赞同：2
> 
> 时间：2012-10-06T18:09:05.717
> 
> 标签：c++, templates, compiler-errors, instantiation

我错误地认为`template`a 中的函数`class`只有在被调用时才会被实例化。请看下面的简单代码：

```
template<typename T>
struct A
{
  T *p; 
  T& operator * () { return *p; }
};

int main ()
{
  A<int> ai;   // ok
  int i = *ai;  // works fine
  A<void> av;  // compiler complains even "*av" is not called
} 
```

就在声明时`A<void>`，编译器错误为：

```
error: forming reference to void 
```

我尝试专门针对`void`模板外部的功能，如下所示：

```
template<>
void A<void>::operator * () {} 
```

但它没有帮助并给出错误：

```
error: no member function ‘operator*’ declared in ‘A<void>’ 
```

有没有办法用 C++03 解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T18:21:25.417

关于什么

```
template < typename T >
struct ReferenceOrVoid
{ typedef T& Value; };

template < >
struct ReferenceOrVoid < void >
{ typedef void Value; };

template<typename T>
struct A
{
    T *p; 
    typename ReferenceOrVoid < T > :: Value
    operator * () { return *p; }
}; 
```

当然，这取决于您`A`在. 当然，您也可以将整个结构专门化为。`T``void``A``void`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:19:34.050

我认为如果你给函数一个不同的返回类型就足够了`void`：

```
template <typename T>
struct is _void {
    enum { value = false };
};
template <>
struct is_void<> {
    enum { value = true };
};

struct A {
    ...
    typename enable_if<!is_void<T::value>, T&>::type
    operator*() {
        ...
    }
}; 
```

由于仍然可以检查签名，因此您可能需要使用条件类型，例如，`void`在使用 实例化时进行`void`：

```
template <bool, typename T1, typename>
struct conditional {
    typedef T1 type;
};
template <typename T1, typename T2>
struct conditional<false, T1, T2> {
    typedef T2 type;
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T18:20:05.537

函数的签名将被实例化，函数的主体不会。`T`在整个类定义中被替换，无论您是否使用该函数。请注意：

```
template<typename T>
struct A
{
  T *p; 
  T *operator * () { return p->aklsdjlkasjd(); }
};

int main ()
{
  A<void> av;  
} 
```

将编译，因为您不使用`operator*`.

# java - 在 Netty 4.x 中实现引导池

> ID：12762443
> 
> 赞同：2
> 
> 时间：2012-10-06T18:10:24.073
> 
> 标签：java, netty

我正在尝试使用 netty 4.x 实现异步 redis 客户端。在阅读了 netty 源代码和文档之后，使用我在 ServerBootstrap 中用作 childEventLoop 的相同 NioEventLoop[s] 似乎更有效。问题是我似乎需要在`RedisClientPool`每个. 我试图扩展并覆盖 newChild 以返回一个带有字段的自定义（只是复制了代码，因为它被声明为 final），这样我就可以通过它共享一些对象。`NioChildEventLoop``AttributeMap``NioEventLoop``NioChildEventLoop``AttributeMap`

```
public class NioChildEventLoopWithAttributeMap extends SingleThreadEventLoop {

    private AttributeMap map = new DefaultAttributeMap();

    public <T> Attribute<T> attr(AttributeKey<T> key) {
        return map.attr(key);
    }

    //.... omit the copied codes
} 
```

和

```
public class CustomNioEventLoop extends NioEventLoop {
    public EventExecutor newChild() {
        return new NioChildEventLoopWithAttributeMap();
    }
} 
```

但在`AbstractChannel`它检查 EventLoop

```
protected boolean isCompatible(EventLoop loop) {
    return loop instanceof NioChildEventLoop;
} 
```

我现在不知道该怎么办，有什么建议吗？对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:45:25.940

只是为了记录，github上有一个用于netty4和netty3的redis-codec：

[https://github.com/spullara/redis-protocol](https://github.com/spullara/redis-protocol)

# iphone - 为什么我的字符串比较在 iOS 6 中不起作用？

> ID：12762444
> 
> 赞同：-3
> 
> 时间：2012-10-06T18:10:29.553
> 
> 标签：iphone, ios6

> **可能重复：**
> [了解 Objective-C 中的 NSString 比较](https://stackoverflow.com/questions/3703554/understanding-nsstring-comparison-in-objective-c)

我已经在应用程序的多个版本中使用了这个简单的代码，并且在 iOS 6 之前，字符串比较已经起作用，但现在它失败了 - 为什么？

```
if(selectedCell.textLabel.text==@"Font"){
    NSLog(@"going to dofontpicker");
    [self doFontPicker];
}else if(selectedCell.textLabel.text==@"Color"){
    NSLog(@"going to do colorpicker");
    [self doColorPicker];
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T18:13:24.023

因为它从来没有真正起作用。使用运算符比较字符串不起作用`==`，因为字符串（NSString 对象）是指针 - 进行数字比较只比较它们的地址，而不是它们的内容。你需要写

```
if ([someString isEqualToString:@"Font"]) {
    // do stuff
} 
```

编辑：我听到你在尖叫“但它有效！直到 iOS 6 才真正有效！” - 没有。没有，只是意外而已。

# php - 为什么我的 codeigniter 数据库查询在它成功搜索的字段上返回 NULL

> ID：12762447
> 
> 赞同：1
> 
> 时间：2012-10-06T18:10:37.557
> 
> 标签：php, sql, codeigniter, activerecord

我真的很困惑为什么我的 item_id 得到一个 NULL 值，这是我表中的必填字段，也是我首先要搜索的内容，

这是我的控制器的相关部分：

```
$item_id=$this->uri->segment(4);
$page_data['row'] = $this->item_model->get_item($item_id, TRUE);
var_dump($page_data['row']); 
```

这是我的模型：

```
function get_item($id, $admin=FALSE){
        $this->db
            ->select('*')
            ->from('item_entries')
            ->where('item_entries.item_id', $id)
            ->join('item_categories_rel', 'item_categories_rel.item_id = item_entries.item_id')
            ->join('item_descriptions', 'item_descriptions.item_id = item_entries.item_id')
            ->join('ratings_total', 'ratings_total.item_id = item_entries.item_id')
            ->join('item_categories', 'item_categories.cat_id = item_categories_rel.cat_id');
        if($admin==TRUE){
            $this->db
                ->join('admin_item_alerts', 'admin_item_alerts.item_id = item_entries.item_id')
                ->join('item_object_code', 'item_object_code.item_id = item_entries.item_id', 'left');
        }
        $query = $this->db->get();
        return $query->row_array();
    } 
```

这是 var_dump 的输出：

```
array(21) { ["item_id"]=> NULL ["item_name"]=> string(9) "MediaInfo" ["item_img"]=> string(13) "mediaInfo.gif" ["item_link"]=> string(42) "http://sourceforge.net/projects/mediainfo/" ["is_code"]=> string(1) "n" ["is_pick"]=> string(1) "n" ["is_quicklink"]=> string(1) "n" ["date_added"]=> string(19) "2010-10-01 00:03:04" ["rel_id"]=> string(3) "132" ["cat_id"]=> string(2) "10" ["item_desc"]=> string(9) "desc_here" ["site_rating"]=> string(3) "3.0" ["urate_ave"]=> string(3) "0.0" ["parent_id"]=> string(1) "2" ["gparent_id"]=> string(1) "0" ["sort_order"]=> string(1) "0" ["cat_name"]=> string(2) "PC" ["cat_slug"]=> string(2) "pc" ["date_checked"]=> string(19) "0000-00-00 00:00:00" ["UpCode"]=> string(1) "N" ["item_code"]=> NULL } 
```

有谁知道它为什么对我这样做:(？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:44:37.680

您遇到的问题是您选择了几个具有名称的列，`item_id`因此结果将获取名称为 item_id 的最后一列。要针对问题使用，您需要不选择连接表的 item_id 或为主表 item_id 使用别名：

```
 $this->db->select('item_entries.item_id AS the_id') 
```

（当然，您还需要使用 table.* 语法在此处包含其他列）

# ruby-on-rails - 在提交表单 ROR 之前添加参数

> ID：12762455
> 
> 赞同：0
> 
> 时间：2012-10-06T18:11:06.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, submit

可以在提交表单之前添加一些参数吗？

我的问题是我需要将票证 ID 发送到我的支付控制器。

一种可能性是通过隐藏的输入字段发送它，但是还有其他安全的方法可以实现这一点吗？

任何帮助将不胜感激。

谢谢。

**购票过程** 0) 选择活动 1) 用户选择他想购买的票种。2）用户添加他的个人信息 3）最后结帐（支付控制器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:46:42.343

因此，您正在生成您需要在以下表单中提交的票证 ID。是**的，最好将其保存在形式中的隐藏变量**中。

但除此之外，您可以**将生成的票证 ID 存储在会话中**，并在使用后销毁。

如果此票证 ID 对于特定会话一次是唯一的，那么您可以**使用会话 ID 的键将其存储在数据库中，**并且可以在提交表单时检索和清除 ID。

如果可能，则**在提交表单时生成票证 ID**。通过这种方式，无需将票证 ID 存储在隐藏变量或会话或数据库中。

实际上可能还有很多其他方法，但**对于完整和具体的建议，请分享更多**您的场景。

* * *

**更新：**

根据您的更新，我认为您需要维护一张`running_transactions`表格。

它将有

*   `event_id`（指向选定的事件）
*   `ticket_type_id`（指向用户想要购买的票种）
*   `ticket_id`（由您的算法生成的唯一 ID）
*   `person_details`（指向用户提供的详细信息）
*   等等（可能包括其他付款或交易状态相关信息）
*   **`id`**：此表的唯一标识符。

现在开始购买过程

*   创建一个`running_transaction`几乎为空的条目。
*   将此表的 id 保存在会话中。`running_transaction`因此，对于每个后续请求，您都会通过此 ID找到相应的条目。
*   此条目将在购买门票的每个阶段更新为更多值。就像，*在“第 1 步”之后，您将有一个票证 id*。
*   最终，当您成功购票并收到付款确认时，您将其标记`running_transaction`为`completed`。

可能您已经有一些东西可以跟踪这些信息，因此您也可以在该表中适应上述方式。也许你会找到比我提供的更好的名字:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:35:15.157

我已经在我拥有的应用程序中完成了此操作。

```
<td><%= @competencys[index].name %></td>
<%= f.hidden_field :student_id %>
<td>
  <%= f.radio_button :score, '4' %>
  <%= f.hidden_field :rating_id, :value => @competencys[index].ratings[0].id %>
  <%= @competencys[index].ratings[0].description %>
</td> 
```

这可能有点难以理解，但在这种情况下，我正在创建一个结果，它有一个 student_id 字段和一个 rating_id 字段。在 student_id 的情况下，这个字段已经与 :student_id 符号（来自控制器）相关联，所以我只是用 f.hidden_​​field 将它分配到“幕后”

在 rating_id 的情况下，我无法在控制器中分配它，需要“即时”进行，因此代码......

```
<%= f.hidden_field :rating_id, :value => @competencys[index].ratings[1].id %> 
```

所以在这里你可以看到我正在使用这个 :value 符号来直接在视图中分配 rating_id。不确定这是否有帮助，但我想我会分享。祝你好运！

# python - python - 多线程 - join() 方法

> ID：12762456
> 
> 赞同：1
> 
> 时间：2012-10-06T18:11:10.427
> 
> 标签：python, multithreading, join, exit

```
import threading, time

class test(threading.Thread):                 

    def __init__(self,name,delay):
        threading.Thread.__init__(self)
        self.name = name
        self.delay = delay

    def run(self):
        c = 0
        while True:
            time.sleep(self.delay)            
            print 'This is thread %s on line %s' %(self.name,c)
            c = c + 1 
            if c == 15:
                print 'End of thread %s' % self.name
                break

one = test('one', 1).start()
two = test('two', 3).start()

one.join()
two.join()

print 'End of main' 
```

问题：无法让 join() 方法正常工作，出现以下错误：

```
Traceback (most recent call last)line 29, in <module> join() NameError: name 'join' is not defined 
```

如果我删除：

```
one.join
two.join 
```

代码工作得很好。

我想打印最后一行，

```
print 'End of main' 
```

两个线程结束后。我似乎无法理解为什么 join() 不是两个实例的属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T18:24:30.227

```
one = test('one', 1).start()
two = test('two', 3).start() 
```

你的问题是`start()`不做`return self`. `one`并且`two`不是线程。它们是`None`或实际的返回值`start()`是什么。

这有效：

```
one = test('one', 1)
one.start()
two = test('two', 3)
two.start() 
```

# google-drive-api - Google Drive 回归：上传 .docx 失败，状态为 400

> ID：12762459
> 
> 赞同：1
> 
> 时间：2012-10-06T18:12:01.580
> 
> 标签：google-drive-api, google-docs-api

看起来过去 24 小时内的某个服务器更新破坏了 .docx 文件上传。这是一个已知的问题？客户端代码几个月没有改变，到目前为止一切正常。这是一个示例跟踪：

```
2012-10-06 17:55:22 +0000
Request: POST https://docs.google.com/feeds/default/private/full/folder%3A0B2KcmAEFPLoOTDViQlZVYlpQQmc/contents
Request headers:
  Accept: application/atom+xml, text/xml
  Authorization: GoogleLogin auth=_snip_
  Cache-Control: no-cache
  Content-Length: 1770
  Content-Type: multipart/related; boundary="END_OF_PART"
  GData-Version: 3.0
  Mime-Version: 1.0
  User-Agent: LumenSpark-DailyTracker GData-ObjectiveC/1.12 iPhone_Simulator/6.0 (gzip)

Request body: (1770 bytes)

--END_OF_PART
Content-Type: application/atom+xml; charset=UTF-8

<entry xmlns="http://www.w3.org/2005/Atom" xmlns:gd="http://schemas.google.com/g/2005" xmlns:app="http://www.w3.org/2007/app" xmlns:docs="http://schemas.google.com/docs/2007"><category term="http://schemas.google.com/docs/2007#document" scheme="http://schemas.google.com/g/2005#kind"/><title>Test</title><published>2012-10-06T10:54:42-07:00</published></entry>
--END_OF_PART
Content-Transfer-Encoding: binary
Content-Type: application/msword
<<1241 bytes>>
--END_OF_PART--

Response: status 400
Response headers:
  Cache-Control: private, max-age=0
  Content-Encoding: gzip
  Content-Type: application/vnd.google.gdata.error+xml
  Date: Sat, 06 Oct 2012 17:55:20 GMT
  Expires: Sat, 06 Oct 2012 17:55:20 GMT
  Server: GSE
  Transfer-Encoding: Identity
  X-Content-Type-Options: nosniff
  X-Frame-Options: SAMEORIGIN
  X-XSS-Protection: 1; mode=block

Response body: (217 bytes)
<errors xmlns='http://schemas.google.com/g/2005'><error><domain>GData</domain><code>InvalidEntryException</code><internalReason>We're sorry, a server error occurred. Please try again.</internalReason></error></errors> 
```

# php - 在数据库模式中实现标签

> ID：12762460
> 
> 赞同：0
> 
> 时间：2012-10-06T18:12:30.147
> 
> 标签：php, mysql, tags

我正在现有应用程序中实现标记方案。为了简单起见，我们可以假设使用如下表结构

```
table comments
-id
-name

table tags
id
name

table comment_tag
comment_id
tag_id 
```

因此，当一条评论被保存（可能是创建或更新）时，我们会得到一堆需要从 post_tag 表中创建、插入或删除的标签。事实上，有3种可能的情况：

*   comment_tag 已经存在；无需采取任何行动
*   comment_tag 尚不存在；在 comment_tag 表中插入
*   删除了评论标签；从 comment_tag 表中删除

这样做的最佳/最佳方式是什么？

选项 1：循环遍历每个 POSTed 标签并采用上述 3 条路线之一，具体取决于 comment_tag 状态。

选项2从comment_tag中删除comment_id ='123'的所有记录，然后进行插入？

这些似乎都不是最理想的。我希望有更好的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T18:26:56.057

这应该以最佳方式执行，并显示如何插入***或***更新其他字段：

```
START TRANSACTION;

INSERT INTO comments (name,created) VALUES ('comment', NOW())
ON DUPLICATE KEY UPDATE updates = updates + 1;

INSERT INTO tags (name,created) VALUES
('tag1', NOW()),
('tag2', NOW()),
('tag3', NOW())
ON DUPLICATE KEY UPDATE updates = updates + 1;

DELETE
comment_tag
FROM
comment_tag
INNER JOIN
comments c ON c.id = comment_tag.comment_id
LEFT JOIN
tags t ON t.id = comment_tag.tag_id
WHERE
c.name = 'comment' AND
t.name NOT IN ('tag1','tag2','tag3');

INSERT INTO comment_tag (comment_id, tag_id ,created) 
SELECT
c.id AS comment_id,
t.id AS tag_id,
NOW() AS created
FROM
comments c,
tags t
WHERE
c.name = 'comment' AND
t.name IN ('tag1','tag2','tag3')
ON DUPLICATE KEY UPDATE comment_tag.updates = comment_tag.updates + 1;

COMMIT; 
```

有关交互式示例，请参见[http://sqlfiddle.com/#!2/81f58/1 。](http://sqlfiddle.com/#!2/81f58/1)

# typescript - Visual Studio 中的 Typescript AMD 模块

> ID：12762462
> 
> 赞同：5
> 
> 时间：2012-10-06T18:12:38.037
> 
> 标签：typescript

我从使用 Visual Studio 2012 Ultimate 的 TypeScript 开始。我已经更改了我的 MSBuild，包括编译器命令中的 --module amd 标记。编译器开始生成 AMD 模块。

我在我的项目 RequireJS 中包含了来自 Nuget Packages 的内容，并在我的主 HTML 中包含了这一行：

```
<script type="text/javascript" data-main="scripts/SiteMaster"  src="scripts/require.min.js"></script> 
```

我有两个模块 SiteMaster 和 Authenticate。SiteMaster 模块很简单：

```
export module SiteMaster {
    import auth = module("Authenticate");
    auth.Authenticate.run();
} 
```

它只是导入 Authenticate 模块并调用函数 run()。SiteMaster的js是这样的：

```
define(["require", "exports"], function(require, exports) {
(function (SiteMaster) {
    var auth = __auth__;

    auth.Authenticate.run();
})(exports.SiteMaster || (exports.SiteMaster = {})); 
```

})

问题是，当我浏览解决方案时，我收到错误：

```
Microsoft JScript runtime error: '__auth__' is undefined 
```

我怎么解决这个问题 ？？？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T21:51:17.967

感谢您提出这个 mvbaffa！

如果您将 SiteMaster.ts 更改为：

```
import auth = module("Authenticate");
export module SiteMaster {
    auth.Authenticate.run();
} 
```

通过将 import 语句移出模块声明，它将生成正确的 js 代码。我将在 TypeScript codeplex 网站上打开一个错误并确保它得到修复。如果这对您来说是一个阻塞问题，您可以在当前编译器 [v0.8] 上执行解决方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T20:10:18.687

我非常确信这是编译器中的错误。我已使用以下源文件重现了该问题：

**验证.ts**

```
export var Authenticate = { 
    run : function() {
        console.log("Run!");
    }
} 
```

**站点管理员.ts**

```
export module SiteMaster {
    import auth = module("Authenticate");
    auth.Authenticate.run();
} 
```

**测试.html**

```
<html>
    <head>
        <script type="text/javascript" data-main="SiteMaster"  src="http://requirejs.org/docs/release/2.1.0/minified/require.js"></script>
    </head>
    <body>
        <p>Test</p>
    </body>
</html> 
```

我使用编译打字稿

```
tsc --module amd SiteMaster.ts Authenticate.ts 
```

当我`test.html`在 Firefox 中使用 Firebug 打开时，出现以下错误：

```
ReferenceError: __auth__ is not defined
var auth = __auth__; 
```

编译后的代码`SiteMaster.js`如下：

```
define(["require", "exports"], function(require, exports) {
    (function (SiteMaster) {
        var auth = __auth__;

        auth.Authenticate.run();
    })(exports.SiteMaster || (exports.SiteMaster = {}));

}) 
```

从 TypeScript 的语言规范第*9.4.3 AMD 模块*部分来看，我预计会出现以下情况：

```
define(["require", "exports", "authenticate"], function(require, exports, authenticateModule) {
    (function (SiteMaster) {
        var auth = authenticateModule;

        auth.Authenticate.run();
    })(exports.SiteMaster || (exports.SiteMaster = {}));

}) 
```

这与语言规范中的示例一致。如果其他人同意，我们可能会向 TypeScript 团队提交一个错误。

# objective-c - 带有 2 个步骤的 CATransform3D 动画不起作用

> ID：12762471
> 
> 赞同：1
> 
> 时间：2012-10-06T18:13:19.380
> 
> 标签：objective-c, ios, animation

我有一个我正在尝试做的序列动画。它有两个步骤。

第 1 步：我选择图层并稍微改变视角，使图层的顶部看起来向后移动。`sourceViewController.view.layer.transform CATransform3DMakePerspective(0, 0.003, CATransform3DIdentity);`

第 2 步：我将比例更改为 80%，并将视角恢复正常。这使它像一个轻微的摆动缩小动画。

`sourceViewController.view.layer.transform = CATransform3DScale(sourceViewController.view.layer.transform, 0.8, 0.8, 1);`

`sourceViewController.view.layer.transform CATransform3DMakePerspective(0, 0, sourceViewController.view.layer.transform);`

我最大的问题是这个。我不能同时在图层上做 2 个动画。它会在第一次转换结束时自动开始，而不是同时进行。这可以通过 concat 解决，但由于我希望第 1 步顶部发生，因此该层将其保存状态，以便第 2 步可以发生，我不能将所有三个都连接起来。

如何创建在同一层上具有 1 个或多个变换的多步动画？就像我在下面的示例中所说的那样，它将跳过第 1 步并开始，就好像该步骤已经完成一样。我知道解释起来有点混乱。这是我的动画。

```
[UIView animateWithDuration:2.0
                        延迟：0.0
                        选项：UIViewAnimationCurveEaseIn
                     动画：^{
                         sourceViewController.view.layer.transform = CATransform3DMakePerspective(0, 0.003, sourceViewController.view.layer.transform);
                         [UIView animateWithDuration:1.0
                                               延迟：1.0
                                             选项：UIViewAnimationCurveEaseOut
                                          动画：^{
                                              sourceViewController.view.layer.transform = CATransform3DConcat(CATransform3DScale(sourceViewController.view.layer.transform, 0.8, 0.8, 1),CATransform3DMakePerspective(0, 0, sourceViewController.view.layer.transform));

                                          }
                                          完成：无]；
                     }
                     完成：^（布尔完成）{
                     }];
```

我已经用谷歌搜索并尝试了一切。必须有一种方法可以在同一层上执行连续动画，从最后一个精灵离开的地方开始。我传入的是图层而不是 CATransform3DIdentity，因为我读到身份恢复到起始状态，而不是图层转换到的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:20:37.913

在第一个动画完成之前，您不想开始第二个动画。这就是完成块的用途。

```
[UIView animateWithDuration:2 delay:0 options:UIViewAnimationCurveEaseIn animations:^{
    sourceViewController.view.layer.transform = CATransform3DMakePerspective(
        0, 0.003, sourceViewController.view.layer.transform);
} completion:^(BOOL finished) {
    [UIView animateWithDuration:1 delay:0 options:UIViewAnimationCurveEaseOut animations:^{
        sourceViewController.view.layer.transform = CATransform3DConcat(
            CATransform3DScale(sourceViewController.view.layer.transform, 0.8, 0.8, 1),
            CATransform3DMakePerspective(0, 0, sourceViewController.view.layer.transform));
    } completion:nil];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:21:30.897

您需要将第二个动画嵌套在第一个的完成处理程序中

```
[UIView animateWithDuration:2.0
                        delay:0.0
                      options:UIViewAnimationCurveEaseIn 
                   animations:^{
                         sourceViewController.view.layer.transform = CATransform3DMakePerspective(0, 0.003, sourceViewController.view.layer.transform);
                     } 
                     completion:^(BOOL finished){
                                        [UIView animateWithDuration:1.0
                                                              delay:0.0
                                                            options:UIViewAnimationCurveEaseOut 
                                                         animations:^{
                                                               sourceViewController.view.layer.transform = CATransform3DConcat(CATransform3DScale(sourceViewController.view.layer.transform, 0.8, 0.8, 1),CATransform3DMakePerspective(0, 0, sourceViewController.view.layer.transform));
                                          } 
                                          completion:nil];
                     }]; 
```

# javascript - 正文 onclick 转到 textarea

> ID：12762472
> 
> 赞同：1
> 
> 时间：2012-10-06T18:13:20.940
> 
> 标签：javascript, onclick, textarea

这可能看起来不是一个有用的脚本，但我需要一些基本上允许用户单击页面上的任何位置并且光标将转到文本区域的东西。

我如何想象这种情况的发生是因为拥有但我对 javascript 了解不多。

当用户点击正文、段落、图像或正文中的任何内容时，光标将自动转到文本区域，他将能够在其中输入。

我知道这似乎对任何事情都没有用，但相信我，我有它的用处。谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T18:15:07.327

用 jquery 很容易。但有多大用处，我不知道。

```
$('body').on('click', function(){
  $('textarea').focus();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:16:47.617

香草JS：

```
document.onclick = function(){ document.getElementById('yourIDHere').focus(); } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T18:17:16.663

没有 jQuery（纯 JS）：

```
document.body.addEventListener('click', 
function(){
  document.getElementsByTagName('textarea')[0].focus();
}); 
```

# java - Android“在 __ms 内加载 en 的时区名称。”

> ID：12762478
> 
> 赞同：1
> 
> 时间：2012-10-06T18:14:16.263
> 
> 标签：java, android, rss, simpledateformat

我正在编写的应用程序使用[HorrorRSS 库](http://code.google.com/p/horrorss/)加载 RSS 提要。我面临的问题是，在查看日志时，我看到了很多垃圾：

```
10-06 12:58:36.939: I/global(3159): Loaded time zone names for en in 624ms.
10-06 12:58:37.329: I/global(3159): Loaded time zone names for en in 368ms.
10-06 12:58:37.709: I/global(3159): Loaded time zone names for en in 370ms.
10-06 12:58:38.149: I/global(3159): Loaded time zone names for en in 403ms.
10-06 12:58:38.589: I/global(3159): Loaded time zone names for en in 420ms.
10-06 12:58:39.039: I/global(3159): Loaded time zone names for en in 446ms.
10-06 12:58:39.449: I/global(3159): Loaded time zone names for en in 393ms.
10-06 12:58:39.859: I/global(3159): Loaded time zone names for en in 396ms.
10-06 12:58:40.269: I/global(3159): Loaded time zone names for en in 401ms.
10-06 12:58:40.749: I/global(3159): Loaded time zone names for en in 459ms.
10-06 12:58:41.159: I/global(3159): Loaded time zone names for en in 404ms.
10-06 12:58:41.549: I/global(3159): Loaded time zone names for en in 380ms.
10-06 12:58:41.919: I/global(3159): Loaded time zone names for en in 366ms.
10-06 12:58:42.289: I/global(3159): Loaded time zone names for en in 363ms.
10-06 12:58:42.659: I/global(3159): Loaded time zone names for en in 368ms.
10-06 12:58:43.109: I/global(3159): Loaded time zone names for en in 437ms.
10-06 12:58:43.489: I/global(3159): Loaded time zone names for en in 377ms.
10-06 12:58:43.879: I/global(3159): Loaded time zone names for en in 387ms.
10-06 12:58:44.279: I/global(3159): Loaded time zone names for en in 387ms.
10-06 12:58:44.649: I/global(3159): Loaded time zone names for en in 367ms.
10-06 12:58:45.029: I/global(3159): Loaded time zone names for en in 379ms.
10-06 12:58:45.469: I/global(3159): Loaded time zone names for en in 438ms. 
```

我意识到这个问题`SimpleDateFormat`中描述的类存在[问题](https://stackoverflow.com/questions/8880525/loaded-time-zone-names-for-en)，看起来[RssParser.getDate() 函数使用它从 RSS 提要中提取日期](http://code.google.com/p/horrorss/source/browse/trunk/src/org/horrabin/horrorss/RssParser.java#600)。

这些语句似乎在我加载提要后立即发生，即：

```
RssParser rss = new RssParser();
RssFeed feed = rss.load("some feed url");
// This is where the log statements begin appearing. 
```

我可以理解为什么他们会在第一次调用`SimpleDateFormat`. 但是有谁知道为什么这些语句被一遍又一遍地记录下来，以及如何防止它们？他们使我的应用程序无法运行，因为 Android 系统认为它过于占用资源并在加载 UI 之前将其杀死。

如果时区名称仅在第一次调用时加载一次，`SimpleDateFormat`那将是完全可以接受的。但是*每次*我加载一个 RSS 提要时，我都会得到几十个这样的日志。有没有办法打开缓存之类的？

任何帮助将不胜感激。在我弄清楚这一点之前，我基本上已经死在水中了。

更新：我已向 HorrorRSS 项目提交了一个问题，以使他们的 RssParser.getDate() 方法受保护或公开。然后，我将能够提供我自己的使用 JodaTime 之类的实现。我认为这会奏效。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:09:35.643

我最终将 HorroRSS 源代码树导入我的并修改了`RssParser`类以使其`RssParser.getDate()`受到保护。然后我添加了我自己的`RssParser`子类，它`RssParser.getDate()`使用我自己的`DateParser`使用 JodaTime 的实用程序类覆盖：

```
@Override    
protected Date getDate(String dateString, int rssType)
{
     return DateParser.getDate(dateString, rssType);
} 
```

HorroRSS 的维护者将进行修改`RssParser`以接受自定义日期解析器实现，因此将来无需修改供应商代码。在那之前，我的修改只是权宜之计。

# ruby - QtRuby 绘画在 Windows 但不是 Linux 上崩溃

> ID：12762481
> 
> 赞同：3
> 
> 时间：2012-10-06T18:14:37.360
> 
> 标签：ruby, qt, qt4, qt4.8, qtruby

我是 QT 新手，在尝试创建自定义绘制事件时在 Windows 7 x64 上发生崩溃。我正在使用 Ruby 1.9.3p125 和 qtbindings-4.8.3.0-x86-mingw32。在我的工作机器 Redhat Linux 上使用 Ruby 1.9.2p180 和 qtbindings-4.6.3.4 时不会出现此崩溃

我最初在遵循“C++ Gui Programming with QT 4”（移植到 Ruby）中的 IconEditor 示例时遇到了这个问题，但在下面的示例中简化了这个问题。

此示例代码创建了一个计时器，用于在子类 QWidget 中重复绘制一条简单的线。在 Windows 上，在 Ruby 给出分段违规之前，paintEvent 会触发约 440 次。这是代码：

```
#!/usr/bin/env ruby

require 'Qt'

class Painter < Qt::Widget
  slots :startTimer

  def initialize(parent=nil)
    super(parent)
    setAttribute Qt::WA_StaticContents
    setSizePolicy(Qt::SizePolicy::Minimum, Qt::SizePolicy::Minimum)

    @counter = 0
    @timer = Qt::Timer.new(self)
    connect(@timer, SIGNAL('timeout()'), self, SLOT(:startTimer))
    startTimer
  end

  def sizeHint
    Qt::Size.new(200,200)
  end

  def paintEvent(event)
    puts "DEBUG: paintEvent #{@counter += 1} #{event.inspect}"
    painter = Qt::Painter.new(self)
    painter.setPen(palette.foreground.color)
    painter.drawLine(0, 0, 200, 200)
  end

  def startTimer
    @timer.start(5)
    update
  end

end

app = Qt::Application.new(ARGV)
painter = Painter.new
painter.show
app.exec 
```

这是回溯：

```
DEBUG: paintEvent 440 #<Qt::PaintEvent:0x3328938>
DEBUG: paintEvent 441 #<Qt::PaintEvent:0x3327de0>
DEBUG: paintEvent 442 #<Qt::PaintEvent:0x3327420>
DEBUG: paintEvent 443 #<Qt::PaintEvent:0x3326928>
./main.rb:27: [BUG] Segmentation fault
ruby 1.9.3p125 (2012-02-16) [i386-mingw32]

-- Control frame information -----------------------------------------------
c:0008 p:---- s:0024 b:0024 l:000023 d:000023 CFUNC  :method_missing
c:0007 p:0107 s:0022 b:0022 l:000021 d:000021 METHOD ./main.rb:27
c:0006 p:---- s:0017 b:0017 l:000016 d:000016 FINISH
c:0005 p:---- s:0015 b:0015 l:000014 d:000014 CFUNC  :method_missing
c:0004 p:0013 s:0011 b:0011 l:000010 d:000010 METHOD C:/Ruby193/lib/ruby/gems/1.9.1/gems/qtbindings-4.8.3.0-x86-mingw32/lib/Qt/qtruby4.rb:469
c:0003 p:0098 s:0008 b:0008 l:001aec d:0023bc EVAL   ./main.rb:41
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:0000 s:0002 b:0002 l:001aec d:001aec TOP

-- Ruby level backtrace information ----------------------------------------
./main.rb:41:in `<main>'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/qtbindings-4.8.3.0-x86-mingw32/lib/Qt/qtruby4.rb:469:in `exec'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/qtbindings-4.8.3.0-x86-mingw32/lib/Qt/qtruby4.rb:469:in `method_missing'
./main.rb:27:in `paintEvent'
./main.rb:27:in `method_missing'

-- C level backtrace information -------------------------------------------
C:\Windows\SysWOW64\ntdll.dll(ZwWaitForSingleObject+0x15) [0x77d5f8b1]
C:\Windows\syswow64\kernel32.dll(WaitForSingleObjectEx+0x43) [0x76c01194]
C:\Windows\syswow64\kernel32.dll(WaitForSingleObject+0x12) [0x76c01148]
C:\Ruby193\bin\msvcrt-ruby191.dll(rb_vm_bugreport+0xf9) [0x62e5c61d]
C:\Ruby193\bin\msvcrt-ruby191.dll(rb_name_err_mesg_new+0x17a) [0x62d3a6fa]
C:\Ruby193\bin\msvcrt-ruby191.dll(rb_bug+0x2f) [0x62d3b45b]
C:\Ruby193\bin\msvcrt-ruby191.dll(rb_check_safe_str+0x1a4) [0x62dee1a0]
 [0x004011e6]
C:\Windows\syswow64\kernel32.dll(GetProfileStringW+0x12aa3) [0x76c4003f]
C:\Windows\SysWOW64\ntdll.dll(RtlKnownExceptionFilter+0xb7) [0x77db74df]

-- Other runtime information -----------------------------------------------

* Loaded script: ./main.rb

* Loaded features:

    0 enumerator.so
    1 C:/Ruby193/lib/ruby/1.9.1/i386-mingw32/enc/encdb.so
    2 C:/Ruby193/lib/ruby/1.9.1/i386-mingw32/enc/iso_8859_1.so
    3 C:/Ruby193/lib/ruby/1.9.1/i386-mingw32/enc/trans/transdb.so
    4 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/defaults.rb
    5 C:/Ruby193/lib/ruby/1.9.1/i386-mingw32/rbconfig.rb
    6 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/deprecate.rb
    7 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/exceptions.rb
    8 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/defaults/operating_system.rb
    9 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb
   10 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems.rb
   11 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/version.rb
   12 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb
   13 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/platform.rb
   14 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb
   15 C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/path_support.rb
   16 C:/Ruby193/lib/ruby/gems/1.9.1/gems/qtbindings-4.8.3.0-x86-mingw32/lib/Qt/qtruby4.rb
   17 C:/Ruby193/lib/ruby/gems/1.9.1/gems/qtbindings-4.8.3.0-x86-mingw32/lib/1.9/qtruby4.so
   18 C:/Ruby193/lib/ruby/gems/1.9.1/gems/qtbindings-4.8.3.0-x86-mingw32/lib/Qt4.rb
   19 C:/Ruby193/lib/ruby/gems/1.9.1/gems/qtbindings-4.8.3.0-x86-mingw32/lib/Qt.rb
   20 C:/Ruby193/lib/ruby/1.9.1/i386-mingw32/enc/utf_16le.so
   21 C:/Ruby193/lib/ruby/1.9.1/i386-mingw32/enc/trans/single_byte.so
   22 C:/Ruby193/lib/ruby/1.9.1/i386-mingw32/enc/trans/utf_16_32.so 
```

**编辑::** 没有什么比回答你自己的问题...

paintEvent 类需要包含“painter.end”语句。我找不到这方面的文档，但它在 qtbindings 包含的示例中，我只是错过了它。毫无疑问，这会调用 QPainter 对象析构函数来防止内存泄漏导致程序崩溃。

这是更正后的代码：

```
def paintEvent(event)
  puts "DEBUG: paintEvent #{@counter += 1} #{event.inspect}"
  painter = Qt::Painter.new(self)
  painter.setPen(palette.foreground.color)
  painter.drawLine(0, 0, 200, 200)
  painter.end
end 
```

# javascript - jquery用img替换span并检查img的加载

> ID：12762482
> 
> 赞同：2
> 
> 时间：2012-10-06T18:14:49.193
> 
> 标签：javascript, jquery, css, image

> **可能重复：**
> [jQuery 检查图像是否已加载](https://stackoverflow.com/questions/5404335/jquery-check-if-image-is-loaded)

我有以下标记的情况：

```
<div class="image">
    <img class="" src="content-images/1.jpg">
    <span class="slide" rel="content-images/2.jpg"></span>
    <span class="slide" rel="content-images/3.jpg"></span>
    <span class="slide" rel="content-images/4.jpg"></span>
</div> 
```

现在在 CSS 中，所有的子`div.image`元素都是绝对定位的，所以它们彼此堆叠在一起。

我正在做的是，在某个触发器上，假设当在页面上的其他位置单击按钮时，将`span`'s更改为 ' `img`s 并在每个跨度中`src`设置为 the 。`rel`这些图像是大型高分辨率图像，因此它们可能需要一段时间才能完全加载。

使用 javascript / jQuery 我需要显示从单击按钮到所有`span`' 被替换为`img`' 完成加载的加载消息/指示器。

`.load()`由于图像和缓存等方面的已知问题，我无法使用 jQuery 。

我尝试使用[imagesloaded](https://github.com/desandro/imagesloaded)但它似乎没有做我需要的。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:39:10.900

我不太确定，如果这是你想要实现的，但你可以试一试......

```
$("#button").click(function(){
    console.log("Started loading...");
    // Get all spans to replace, and count them
    var imgSpans = $("div.image span.slide"), 
        toLoad = imgSpans.length,
        loaded = 0;
    // Now load each image
    for (var i = 0; i < toLoad; ++i) {
        // Closure to keep correct value of i
        (function(i){
            // Preload image
            var img = new Image();
            img.src = imgSpans.eq(i).attr("rel");
            img.onload = function(){
                // When loading has finished, replace span with img...
                imgSpans.eq(i).replaceWith(img);
                if (++loaded == toLoad) {
                    // ...and check if all images have been loaded by now
                    console.log("Finished loading...");
                }
            };
        })(i);
    }
}); 
```

[**演示**（JSFiddle）](http://jsfiddle.net/LcctJ/)

# facebook - 将帖子从我的网站分享到 Facebook 时隐藏帖子图片之外的文本

> ID：12762483
> 
> 赞同：0
> 
> 时间：2012-10-06T18:14:52.070
> 
> 标签：facebook, post, text, share, sharing

这是我的网站： http: [//www.hotaphrodite.com/](http://www.hotaphrodite.com/)

当有人试图将帖子分享到 facebook 时，总会有一个奇怪的文本（我猜是元标签）与帖子一起出现。我想知道如何隐藏它。这就是我所说的：[https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.hotaphrodite.com%2F%3Fp%3D297&t](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.hotaphrodite.com%2F%3Fp%3D297&t) 我想隐藏文本出现在图片旁边：“发布于 2012 年 10 月 3 日，热阿芙罗狄蒂推文此条目发布在黑发中并标记美丽、黑发、女孩、华丽、热、女人来自热阿芙罗狄蒂。为永久链接添加书签。”

我已经联系了一些 wordpress 开发人员，我被告知这是 facebook 的问题，而不是 wordpress，所以解决它的唯一方法是通过 facebook，但我想也许我可以在 wordpress 上进行一些代码编辑以避免这种情况有人分享帖子时出现的文字。那么，有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:58:03.190

我弄乱了共享 URL，例如：

[https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.hotaphrodite.com%2F%3Fp](https://www.facebook.com/sharer/sharer.php?u=http://www.hotaphrodite.com/?p)

但它似乎抹去了网站非常漂亮的画面。

# css - 在 HTML5 中隐藏正文的滚动条

> ID：12762489
> 
> 赞同：3
> 
> 时间：2012-10-06T18:15:28.793
> 
> 标签：css, html

在 html5 中，`scroll="no"`元素主体的属性已被删除。

什么是替代方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T18:20:00.927

尝试这个：

```
<body style="overflow: hidden"> 
```

# c++ - socket接收到大数据后recv()返回0

> ID：12762491
> 
> 赞同：2
> 
> 时间：2012-10-06T18:15:44.457
> 
> 标签：c++, sockets, send, recv

我的服务器需要向客户端发送两个大小为 500kb 的图像。客户端接收到第一张图片没有丢失任何数据，但是当服务器将另一张图片发送给客户端时，recv()在服务器发送数据之前返回0，然后服务器send()返回-1 .

这是我的 send() 和 recv() 代码：

**服务器：**

```
 fp2 = fopen(totaldir2,"rb");
if(fp1==NULL)
{
    cout<<"ERROR while openning: "<<totaldir2<<endl;
    getchar();
    exit(1);
}

fseek (fp2, 0 , SEEK_END);
IFileSize2 = ftell (fp2);
rewind (fp2);
picture2 = new char[sizeof(char)*IFileSize2+1];
if (picture2 == NULL) {exit (2);}
itoa (IFileSize2,CFileSize2,10);
countData = 0;
do{
sentData = send(sConnect,CFileSize2,strlen(CFileSize2)+1,NULL);
countData+=sentData;
}while(countData<strlen(CFileSize2)+1);
read = fread_s(picture2, IFileSize2, sizeof(char),IFileSize2, fp2);
countData = 0;
do{
sentData = send(sConnect, picture2, read, 0);
countData += sentData ;
}while(countData<read); 
```

此代码运行两次以发送两个图像。

**客户：**

```
recv(sConnect, len2, sizeof(len2) ,NULL); \\recv returns 0 here before server sends the data.
FileSize2 = atoi(len2);
picture2 = new char[sizeof(char)*FileSize2+1];
fp2 = fopen("temp\\image2.bin","wb");
if(fp2==NULL)
{
     closesocket(sConnect);
     WSACleanup();
     exit(1);
    }

recv(sConnect, picture2, FileSize2, 0); \\same here
fwrite(picture2, sizeof(char), Received2, fp2); 
```

此代码运行两次以接收两个图像。

当我在服务器中的 send() 之后放置 Sleep() 时，客户端会收到所有数据和所有图像，但 Sleep 取决于客户端网络。并且服务器获得了很多客户端。该连接与 TCP 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:34:52.647

`recv()`当对方正常断开连接时返回 0。请记住，TCP 是一个字节流。它没有像 UDP 那样的消息概念。最有可能的是，您的第二张图像存储在您用于第一次调用的同一缓冲区中`recv()`. 您需要对数据进行框架化，例如在发送文件数据之前发送文件的长度。这样，接收器可以先读取长度，然后只读取长度所规定的字节数。您正在尝试这样做，但是您没有很好地管理它。对于初学者，您使用可变长度字符串来发送文件长度。这不是一个好主意，因为您没有发送字符串长度，并且接收方没有寻找空终止符，因此接收方不知道字符串有多长并且可能读取了太多字节。您应该将文件长度作为固定长度的 4 字节`int`或 8 字节发送`__int64`。这对于接收者来说将更容易阅读。

# mootools - 访问子窗口元素事件和属性 mootools

> ID：12762495
> 
> 赞同：0
> 
> 时间：2012-10-06T18:16:13.490
> 
> 标签：mootools, mootools-events

我有一个**弹出窗口**，我需要访问单击、更改或任何其他事件以及用于输入的元素值并将它们移动到父窗口元素

**示例弹出窗口html：**

```
<a href="#" class="button">Add image</a>

<input type="text" id="imagelink" value="link_to_image" /> 
```

**父窗口html：**

```
<img id="logo_image" src="default_image_link" /> 
```

**启动js：**

```
window.addEvent('domready', function(){ 

   $$('.button').addEvent('click', function(){
   var img_src =  $('imagelink').get('value');
    $('logo_image').set('src',img_src);

   });

}); 
```

当用户单击子窗口中的 a.button 时，我需要将父窗口 #logo_image 的 src 属性替换为输入 #imagelink 中的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:21:57.140

您可以通过访问`window.opener`指向父窗口的弹出窗口的属性来做到这一点：

```
window.opener.document.getElementById('logo_image').setAttribute('src', img_src); 
```

或者，如果您在父窗口中也有 MooTools：

```
window.opener.$('logo_image').set('src',img_src); 
```

# python - curses getch() 在 python 中为主窗口和填充返回不同的值

> ID：12762496
> 
> 赞同：3
> 
> 时间：2012-10-06T18:16:41.243
> 
> 标签：python, curses, getch

`getch()`如果按下的键不是 ASCII，则该方法会为主窗口和填充键返回不同的值。例如，按箭头键，我在主窗口中得到预期`KEY_UP`的`KEY_DOWN`等，但在键盘中，我得到`65`向上箭头和`66`向下箭头。为什么会这样，有没有办法让键盘中的特殊键值大于 255？

我正在使用 Python 2.6.5。

以下代码演示了该问题：

```
import curses

def main(stdscr):
    c = None
    while c != curses.KEY_RIGHT:
        c = stdscr.getch()
        stdscr.addstr(0, 0, "%3d" % c)
        stdscr.refresh()
    pad = curses.newpad(20, 20)
    while True:
        c = pad.getch()
        pad.addstr(0, 0, "%3d" % c)
        pad.refresh(0, 0, 1, 0, 20, 20)

if __name__ == '__main__':
    curses.wrapper(main) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-08T21:13:19.057

你试过了吗 `pad.keypad(1)`

这是我第一次需要在 Python 中处理 curses，今天早上我也遇到了同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:17:24.430

我没有直接回答你的问题，但我观察到 65 和 66 是 'A' 和 'B' 的 ASCII 值，它们恰好是向上和向下箭头使用的 CSI 或 SS3 命令。

# ruby-on-rails - Michael Hartl Ruby on rails 教程第 9 章 - 测试失败

> ID：12762498
> 
> 赞同：0
> 
> 时间：2012-10-06T18:16:54.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在研究 hartl 的教程。目前第 9 章。当我运行测试时，我收到此错误：

```
c:\rails_project\sample_app>bundle exec rspec spec/

Failures:

1) Authentication authorization for non-signed-in users when attempting to visit a
protected page after signing in should render the desired protected page
Failure/Error: visit edit_user_path(user)NameError:undefined local variable or
method `requests' for #<UsersController:0x37cff38>
# ./app/helpers/sessions_helper.rb:36:in `store_location'
# ./app/controllers/users_controller.rb:44:in `signed_in_user'
# ./spec/requests/authentication_pages_spec.rb:57:in `block (5 levels)
in <top (required)>'

2) Authentication authorization in the Users controller visiting the edit page
Failure/Error: before { visit edit_user_path(user) }
NameError:undefined local variable or method `requests' for 
#<UsersController:0x439d430>
# ./app/helpers/sessions_helper.rb:36:in `store_location'
# ./app/controllers/users_controller.rb:44:in `signed_in_user'
# ./spec/requests/authentication_pages_spec.rb:75:in `block (5 levels)
in <top (required)>'

3) Authentication authorization in the Users controller Submitting to the update
action Failure/Error: before { put user_path(user) } NameError: undefined local
variable or method `requests' for #<UsersController: 0x44f78d0>
# ./app/helpers/sessions_helper.rb:36:in `store_location'
# ./app/controllers/users_controller.rb:44:in `signed_in_user'
# ./spec/requests/authentication_pages_spec.rb:80:in `block (5 levels)
in <top (required)>'

Finished in 9.33 seconds
70 examples, 3 failures, 3 pending 
```

我的 Authentication_pages_spec.rb 文件：

```
require 'spec_helper'

describe "Authentication" do
    subject { page }

    describe "signin page" do
      before { visit signin_path }

      it { should have_selector('h1', text: 'Sign in') }
      it { should have_selector('title', text: 'Sign in') }
    end

    describe "signin" do

      before { visit signin_path } 

      describe "with invalid information" do
        before { click_button "Sign in" }

        it { should have_selector('title', text: 'Sign in') }
        it { should have_selector('div.alert.alert-error', text: 'Invalid') }

        describe "after visiting another page" do
          before { click_link "Home"}
          it { should have_selector('div.alert.alert-error') }
        end
     end

     describe "with valid information" do     
       let(:user) { FactoryGirl.create(:user) } 
       before do
       fill_in "Email",    with: user.email
       fill_in "Password", with: user.password
       click_button "Sign in"
    end

    it { should have_selector('title', text: user.name) }
    it { should have_link('Profile', href: user_path(user)) }
    it { should have_link('Settings', href: edit_user_path(user)) }
    it { should have_link('Sign out', href: signout_path) }
    it { should_not have_link('Sign in', href: signin_path) }

    describe "followed by signout" do
      before { click_link "Sign out" }
      it { should have_link('Sign in') }
    end
  end
end

describe "authorization" do

  describe "for non-signed-in users" do
    let(:user) { FactoryGirl.create(:user) }

    describe "when attempting to visit a protected page" do
      before do
        visit edit_user_path(user)
        fill_in "Email",    with: user.email
        fill_in "Password", with: user.password
        click_button "Sign in"
      end

      describe "after signing in" do

        it "should render the desired protected page" do
          page.should have_selector('title', text: 'Edit user')
        end
      end
    end
  end

  describe "in the Users controller" do

    describe "visiting the edit page" do
      before { visit edit_user_path(user) }
      it { should have_selector('title', text: "Sign in") }
    end

    describe "Submitting to the update action" do
      before { put user_path(user) }
      specify { response.should redirect_to(signin_path) }
    end
  end

  describe "as wrong user" do
    let(:user) { FactoryGirl.create(:user) }
    let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
    before { sign_in user }

    describe "visiting User#edit page" do
      before { visit edit_user_path(wrong_user) }
      it { should_not have_selector('title', text: full_title('Edit user')) }
    end

    describe "submitting a PUT request to the User#update action" do
      before { put user_path(wrong_user) }
      specify { response.should redirect_to(root_path) } 
    end
  end    
 end
end 
```

我发现这个问题类似于[Michael Hartl 的 Ruby on Rails 教程中显示的问题。第 9 章中的测试失败，](https://stackoverflow.com/questions/11154967/michael-hartls-ruby-on-rails-tutorial-failed-test-in-chapter-9) 但这个解决方案在我的情况下不起作用。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:32:08.573

也许只是空虚，但您在 SessionsHelper.store_location 中有错字。将“请求”更改为“请求”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:53:01.960

您的`sessions_helper.rb`文件包含一个错字： `requests`而不是`request`.

请参阅： http: [//guides.rubyonrails.org/action_controller_overview.html#the-request-and-response-objects](http://guides.rubyonrails.org/action_controller_overview.html#the-request-and-response-objects)

# eclipse - 从 Maven 的运行时类路径中排除目标/类

> ID：12762499
> 
> 赞同：0
> 
> 时间：2012-10-06T18:16:55.477
> 
> 标签：eclipse, maven

我在 Eclipse 中使用默认架构创建了一个新的 maven 项目。我想在使用特定配置文件构建时执行 rhino javascript。我的项目有以下几个方面：Dynamic Web Project 2.5、Java 和 Javascript。我没有课程，只有静态网页文件。

当我尝试使用 Maven 运行时类路径编译以下配置文件时，我收到一条错误消息：

```
Unable to access jarfile C:\Users\Francis\workspace\bulle\target\classes;C:\Users
\Francis\.m2\repository\rhino\js\1.7R2\js-1.7R2.jar. 
```

为什么要尝试打开目标/类？如何从 Maven 的类路径中排除它？

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-antrun-plugin</artifactId>
  <version>1.7</version>
  <executions>
    <execution>
      <phase>compile</phase>
      <configuration>
        <target>
          <property name="runtime_classpath" refid="maven.compile.classpath" />
          <java jar="${runtime_classpath}" 
              classpath="org.mozilla.javascript.tools.shell.Main"
              fork="true" failonerror="true">
            <arg value="src/main/script/concat-all.js" />
          </java>
        </target>
      </configuration>
      <goals>
        <goal>run</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:43:22.647

`${runtime_classpath}`将插入 Maven 使用的整个“运行时”类路径字符串，而不是单个 JAR 文件。

尝试

```
 <java classpath="${runtime_classpath}" 
          classname="org.mozilla.javascript.tools.shell.Main"
          fork="true" failonerror="true">
        <arg value="src/main/script/concat-all.js" />
      </java> 
```

请参阅[Ant Java 任务文档](https://ant.apache.org/manual/Tasks/java.html)

# javascript - jQuery幻灯片不起作用

> ID：12762501
> 
> 赞同：0
> 
> 时间：2012-10-06T18:17:07.863
> 
> 标签：javascript, jquery, joomla, jquery-slide-effects

我对 jQuery 有疑问，我不知道从哪里来，这是控制台中的内容：

```
Uncaught TypeError: Object [object Object] has no method 'getElement'
script_16.js:46Uncaught TypeError: Object [object Object] has no method 'getElement'
script_16.js:46Uncaught TypeError: Object [object Object] has no method 'getElement'
script_16.js:46Uncaught TypeError: Object [object Object] has no method 'getElement'
script_16.js:46Uncaught TypeError: Object [object Object] has no method 'getElement'
homepage:321GET http://shoppingkatalog.com/modules/mod_ice_jshopping_categories/assets/images/next.png 404 (Not Found)
all.js:54FB.getLoginStatus() called before calling FB.init().
beacon.js:1GET http://b.scorecardresearch.com/b?c1=8&c2=2101&c3=1234567891234567891&ns__t=1349547316971&ns_c=ISO-8859-1&c8=&c7=http%3A%2F%2Fdg.specificclick.net%2F%3Fy%3D3%26t%3Dh%26u%3Dhttp%253A%252F%252Fshoppingkatalog.com%252Fhomepage%26r%3D&c9=http%3A%2F%2Fshoppingkatalog.com%2Fhomepage 
homepage:113Uncaught ReferenceError: checkCookie is not defined
homepage:392Uncaught TypeError: Object [object Object] has no method 'getElements' 
```

[这是页面上的链接](http://shoppingkatalog.com/homepage)，请帮我解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:29:10.383

发生该错误是因为在执行时找不到该函数。因此，请尝试将文件 script_16.js 移到页面上调用的 JS 文件列表的下方。我认为这是在页面前面定义功能的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:46:52.457

修复了安装[此](http://extensions.joomla.org/extensions/core-enhancements/performance/jquery-scripts/18327)joomla 插件的问题。谢谢大家！

# c# - 字节操作 c#

> ID：12762508
> 
> 赞同：1
> 
> 时间：2012-10-06T18:18:22.777
> 
> 标签：c#, byte, operation, threshold

我有一个应该计算阈值的表达式。原始代码是：

```
float threshold = vertHist.min + ((vertHist.max - vertHist.min)/2); 
```

但后来被修改为：

```
retVal.threshold = (byte)(minValue + ((maxValue - minValue) >> 1)); 
```

我可以理解原始代码及其背后的逻辑，但是有人可以带我看一下后者的代码，它是前者的修订版吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:23:25.833

`>>`是按位右移运算符。对于正整数（您期望`maxValue - minValue`是），它具有除以（的幂）2 的效果，编译器实际上有时会用右移替换除以 2，因此您应该避免替换除非您特别需要轮班行为，否则请使用轮班进行除法。

# mysql - 数据转置和连接，如何遵循内连接条件？

> ID：12762512
> 
> 赞同：2
> 
> 时间：2012-10-06T18:19:18.423
> 
> 标签：mysql, inner-join, group-concat

我有许多表在它们之间与外键和主键（基本）系统相关。

我想根据某些条件连接（逗号分隔）最后一个“深入”表的值。

因为这很难解释，所以我画了一个平局，我认为它非常明确： [![图片](../Images/46d7624b73d8ece2bb0fed1fdd3299e1.png)](https://i.stack.imgur.com/cSztd.jpg)

更大的图像可以在这里找到：http: [//tinypic.com/r/2ngdaah/6](http://tinypic.com/r/2ngdaah/6)

注意：**tableE**已经创建，列名对应于**tableD中显示的名称**

谢谢！

## 编辑（小提琴）：

[http://sqlfiddle.com/#!2/f28c8/1/0](http://sqlfiddle.com/#!2/f28c8/1/0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:58:09.327

我做了一个查询，但我不确定是否正确。原因是您描述的条件使用了符号 <= （小于或等于）并且它似乎只是 = （等于），因为它们下面的结果。

但是，试试这个：

```
select * 
    from (select id, 
                   name,
                   max(case when e.tableD_id = 1 then  e.agg_values else null end) alpha,
                   max(case when e.tableD_id = 2 then e.agg_values else null end) beta,
                   max(case when e.tableD_id = 3 then e.agg_values else null end) gamma
            from tableA a, 
                (select b.tableA_id, 
                       b.tableD_id, 
                       group_concat(cast(c.value as char) order by c.id asc) agg_values
                  from tableB b,
                       tableC c
                 where c.tableB_id = b.id
                 group by b.tableD_id,b.tableA_id
                 having count(*) >= 3) e
              where a.id = e.tableA_id
              group by id, name
          ) n
          where n.alpha is not null 
            and n.beta is not null 
            and n.gamma is not null 
```

**编辑：**

修改了查询以支持使用 >= 而不是 <= 的条件。

SQLFIDDLE：[http ://sqlfiddle.com/#!2/f28c8/1/0](http://sqlfiddle.com/#!2/f28c8/1/0)

SQLFIDDLE，仅第一个条件：[http ://sqlfiddle.com/#!2/f28c8/4](http://sqlfiddle.com/#!2/f28c8/4)

# android - 在扫描 nfc 标签时启动活动/应用程序

> ID：12762514
> 
> 赞同：0
> 
> 时间：2012-10-06T18:19:29.497
> 
> 标签：android, manifest, nfc, android-2.3-gingerbread

我正在尝试使用 NFC 标签为 android 开发应用程序。当我找到一个标签时，一个活动应该启动，即使该活动不是活动活动。目前它需要是活动活动，在所有其他情况下，它将为 nfc 标签启动默认应用程序。

我怀疑我需要更改清单中的某些内容来完成此操作？给予我的应用程序高优先级

它适用于 android 2.3 顺便说一句

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:03:08.830

你的目标当然是可能的。Android 对此提供了相当复杂的支持，尽管通常解决方案很简单：您需要为所需的 NFC 标签类型添加一个意图过滤器。请查看在线文档以了解所需内容，尤其是[本节](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#filtering-intents)。关于如何强制启动您的应用程序的[这一部分](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#aar)可能也很有趣。

# ruby-on-rails-3 - 回形针 gem 验证错误 - 'identify' 命令无法识别'filename'

> ID：12762515
> 
> 赞同：0
> 
> 时间：2012-10-06T18:19:32.007
> 
> 标签：ruby-on-rails-3, imagemagick, paperclip

我正在尝试让回形针 gem 在我的生产服务器（ubuntu 12.0.4、apache2、phusion 乘客和 rvm）上上传图像，并且对于每个附件，我都会收到三个这样的验证错误：

> “识别”命令无法识别图像之一 /tmp/villa-0520121006-4333-hdo9wv.jpeg。

ImageMagick 已正确安装，libmagickwand-dev 软件包、Rmagick 和回形针也是如此。我已经将正确的 command_path 设置为 identify 和 convert 在我的 production.rb 配置文件中的位置。

如果有帮助，这是我的模型：

```
class Property < ActiveRecord::Base
    attr_accessible :img_one, :img_two, :img_three, :img_four, :img_five, :img_six, :price, :title, :description, :location, :beds, :property_type, :agreement_type, :featured  
    has_attached_file :img_one, :styles => { :medium => "420x280>", :mobile => "300x220", :thumb => "100x80>" }
    has_attached_file :img_two, :styles => { :medium => "420x280>", :mobile => "300x220", :thumb => "100x80>" }
    has_attached_file :img_three, :styles => { :medium => "420x280>", :mobile => "300x220", :thumb => "100x80>" }
    has_attached_file :img_four, :styles => { :medium => "420x280>", :mobile => "300x220", :thumb => "100x80>" }
    has_attached_file :img_five, :styles => { :medium => "420x280>", :mobile => "300x220", :thumb => "100x80>" }
    has_attached_file :img_six, :styles => { :medium => "420x280>", :mobile => "300x220", :thumb => "100x80>" }

    validates_presence_of :title, :description, :location, :beds, :property_type, :agreement_type, :price
    validates :price, :numericality => { :greater_than => 0 }
    validates :beds, :numericality => { :only_integer => true, :greater_than => 0 }
end 
```

我真的为这个摸不着头脑，任何帮助或建议将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:39:18.637

这显然是由可卡因宝石 0.4.0 破坏回形针引起的（我使用的是回形针 3.2.0）。为了解决这个问题，我通过执行以下操作恢复到该 gem 的旧版本：

> gem 卸载可卡因

将此添加到 gemfile

> 宝石“可卡因”，“0.3.2”

然后捆绑安装

> 捆绑安装

[“识别”命令无法识别图像文件。(heroku)](https://stackoverflow.com/questions/12750737/image-file-is-not-recognized-by-the-identify-command-heroku) [https://github.com/thoughtbot/paperclip/issues/1038](https://github.com/thoughtbot/paperclip/issues/1038)

# ruby-on-rails - Linode 设置查询

> ID：12762517
> 
> 赞同：0
> 
> 时间：2012-10-06T18:19:47.137
> 
> 标签：ruby-on-rails, vps, linode

我对 VPS 的世界非常陌生，所以想知道是否有人链接到有关在 Linode VPS 上安装以下内容的任何指南？

我可以在一个指南中找到说明如何设置部分内容的指南，但不是所有这些内容。我只是不想出错。

RVM、Rails、Nginx、PostgreSQL

也许是乘客，但不是 100% 乘客是什么，或者我是否需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:32:44.520

Linode 为您提供多种 Linux 风格的服务器。正确的问题应该是如何在 Debian 或 CentOs 或您希望使用的任何发行版中安装您需要的工具。乘客用于部署 Ruby 应用程序，而不是设置服务器。

# android - 是否有关于带有 Fragments 的 android zxing 库的教程

> ID：12762522
> 
> 赞同：6
> 
> 时间：2012-10-06T18:20:11.047
> 
> 标签：android, zxing

我正在寻找一些教程或示例如何在 android 的 Fragment 中使用 Zxing 库。

更新：

使用 IntentIntegratorSupportV4 如果扫描仪安装在设备上或我自己的应用程序中，我可以只使用它吗？因为我想在我自己的有两个标签的应用程序中使用 QR 扫描仪。首先必须是这个扫描仪。我该如何处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T18:53:58.327

[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Camera/ZXing)演示了 的使用，您将在项目目录`IntentIntegrator`中找到包含该类的已编译 JAR 。`libs/`

实际上只有两个步骤：

1.  打电话`(new IntentIntegrator(this)).initiateScan();`调出扫描仪。

2.  实现`onActivityResult()`和使用`IntentIntegrator`来帮助解析结果：

    ```
    public void onActivityResult(int request, int result, Intent i) {
        IntentResult scan=IntentIntegrator.parseActivityResult(request, result, i);

        if (scan!=null) {
            format.setText(scan.getFormatName());
            contents.setText(scan.getContents());
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T03:21:53.680

这是将其集成到您自己的应用程序中的教程。虽然不推荐这样做

[http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)

# java - 邮件发件人活动：无法启动活动 ComponentInfo 和 Resources$NotFound 异常

> ID：12762524
> 
> 赞同：0
> 
> 时间：2012-10-06T18:20:15.060
> 
> 标签：java, android, ftp-client

我正在开发一个将图片发送到 url 的应用程序。目前，一旦我将我的应用程序发送到 MailSenderActivity java 类，我就会遇到问题。每次运行它时，我都会收到一条错误消息，提示我有资源未找到异常。我试图通过有根据的猜测和注释掉部分来在我的代码中找到此错误的来源，但我无法找到错误的来源或解决方案。非常欢迎任何帮助。我已经添加了我的 LogCat、java 类和我的清单。

MailSenderActivity 类

```
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.inputmethod.InputMethodManager;
import android.widget.Button;
import android.widget.Toast;
import android.widget.EditText;
import android.telephony.TelephonyManager;

public class MailSenderActivity extends Activity implements OnClickListener {
    public String subj;
    public String body;
    public String from;
    public String toList;
    public String ptName;
    public String ptDesc;
    public String ptType;
    public String ptURL;
    private String ptURL_noFTP;
    private String ptLat;
    private String ptLng;
    private String item_sep;
    private Context c;
    private Button send;
    private Button button_return;
    private MailSenderActivity self = this;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        c = super.getApplicationContext();
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        body = "Body.";
        /*ptLat = Globals.lat;
        ptLng = Globals.lng;
        final LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        final LocationListener mlocListener = new MyLocationListener();
        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                (long) 2000, (float) 1.0, mlocListener); // (provider,*/
                                                            // time
                                                            // (ms),
                                                            // distance
                                                            // (m),
                                                            // listener)
        Intent thisIntent = getIntent();
        ptType = thisIntent.getStringExtra("Type");
        ptURL = "urlIsHere"
                + thisIntent.getStringExtra("Filename");

        ptURL_noFTP = "urlIsHere"
                + thisIntent.getStringExtra("Filename");
        ptName = thisIntent.getStringExtra("Filename");
        setContentView(R.layout.mail_prep_apv);
        setLayout(ptType);
        send = (Button) findViewById(R.id.Send);
        send.setOnClickListener(this);
    }

    public void onClick(View v) {
        switch (v.getId()) {
        case (R.id.Send):
            InputMethodManager inputManager = (InputMethodManager) c
                    .getSystemService(Context.INPUT_METHOD_SERVICE);
            inputManager.hideSoftInputFromWindow(this.getCurrentFocus()
                    .getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);
            from = "email";
            toList = "email";
            EditText etName = (EditText) findViewById(R.id.pointName);
            ptName = etName.getText().toString();
            EditText etDesc = (EditText) findViewById(R.id.pointDesc);
            ptDesc = etDesc.getText().toString();
            item_sep = getResources().getString(R.string.item_separator);
            subj = "POINT: " + ptName + item_sep + /*ptLat +*/ item_sep /*+ ptLng*/
                    + item_sep + ptType + item_sep + ptDesc;
            new MyAsyncTask(this).execute();
            setContentView(R.layout.sent);
            button_return = (Button) findViewById(R.id.Return);
            button_return.setOnClickListener(self);
            break;
        case (R.id.Return):
            send.setClickable(true);
            finish();
            break;
        }
    }

    public void setLayout(String type) {
        if (type.equals(getResources().getString(R.string.type_comment)))
            setContentView(R.layout.mail_prep_comment);
        else if (type.equals(getResources().getString(R.string.type_android))) {
            setContentView(R.layout.mail_prep_android);
            /*EditText pointName = (EditText) findViewById(R.id.pointName);
            TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
            pointName.setText(telephonyManager.getDeviceId());*/
        } else if (type.equals(getResources().getString(R.string.type_audio))
                || type.equals(getResources().getString(R.string.type_picture))
                || type.equals(getResources().getString(R.string.type_video))) {
            setContentView(R.layout.mail_prep_apv);
            EditText pointDesc = (EditText) findViewById(R.id.pointDesc);
            pointDesc.setText(ptURL_noFTP);
            EditText pointName = (EditText) findViewById(R.id.pointName);
            pointName.setText(ptName);
        }
    }

    /*private class MyLocationListener implements LocationListener {
        public void onLocationChanged(Location loc) {
            Toast.makeText(c, "Getting Location.", Toast.LENGTH_SHORT).show();
            ptLat = "" + loc.getLatitude();
            ptLng = "" + loc.getLongitude();
        }

        public void onProviderDisabled(String provider) {
            Toast.makeText(c, "GPS Disabled", Toast.LENGTH_SHORT).show();
        }

        public void onProviderEnabled(String provider) {
            Toast.makeText(c, "GPS Enabled", Toast.LENGTH_SHORT).show();
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    }*/

    public void onBackPressed() {
        setResult(Activity.RESULT_CANCELED, null);
        finish();
    }

    private class MyAsyncTask extends AsyncTask<Integer, String, Boolean> {
        private Context context;

        public MyAsyncTask(Context context) {
            this.context = context;
        }

        protected Boolean doInBackground(Integer... params) {
            try {
                GMailSender sender = new GMailSender(
                        "urlIsHere", "EmbraceChaos");
                sender.sendMail(subj, body, from, toList);
            } catch (Exception e) {
                System.out.println("EXCEPTION: " + e);
                setContentView(R.layout.send_failed);
            }
            return true;
        }

        protected void onPostExecute(Boolean result) {
            Toast.makeText(context,
                    "Latest media was uploaded to Virtual Command Center.",
                    Toast.LENGTH_LONG).show();
        }
    }
} 
```

日志猫

```
10-06 14:05:19.131: E/AndroidRuntime(5576): FATAL EXCEPTION: main
10-06 14:05:19.131: E/AndroidRuntime(5576): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cameratest/com.cameratest.MailSenderActivity}: android.content.res.Resources$NotFoundException: Resource ID #0x7f030003
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.os.Looper.loop(Looper.java:137)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.app.ActivityThread.main(ActivityThread.java:4745)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at java.lang.reflect.Method.invokeNative(Native Method)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at java.lang.reflect.Method.invoke(Method.java:511)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at dalvik.system.NativeStart.main(Native Method)
10-06 14:05:19.131: E/AndroidRuntime(5576): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f030003
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.content.res.Resources.getValue(Resources.java:1013)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:2098)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.content.res.Resources.getLayout(Resources.java:852)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.app.Activity.setContentView(Activity.java:1867)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at com.cameratest.MailSenderActivity.onCreate(MailSenderActivity.java:65)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.app.Activity.performCreate(Activity.java:5008)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-06 14:05:19.131: E/AndroidRuntime(5576):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-06 14:05:19.131: E/AndroidRuntime(5576):     ... 11 more 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.cameratest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.RECORD_VIDEO" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="sate2012.avatar.android.UploadMedia"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
        </activity>
        <activity
            android:name="sate2012.avatar.android.MailSenderActivity"
            android:label="Upload Data Point" >
            <intent-filter>
                <action android:name="android.intent.action.MAILSENDERACTIVITY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="sate2012.avatar.android.GMailSender"
            android:label="@string/title_mail_sender_activity"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="sate2012.avatar.android.GMAILSENDER" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="sate2012.avatar.android.UploadData"
            android:label="UploadData" >
            <intent-filter>
                <action android:name="sate2012.avatar.android.UPLOADDATA" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".UploadMedia"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.UPLOAD_MEDIA" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Photographer"
            android:label="photoclass" >
            <intent-filter>
                <action android:name="android.intent.action.PHOTOGRAPHER" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".UploadFTP"
            android:label="photoclass" >
            <intent-filter>
                <action android:name="android.intent.action.UPLOAD_FTP" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MailSenderActivity"
            android:label="photoclass" >
            <intent-filter>
                <action android:name="android.intent.action.MAILSENDERACTIVITY" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:55:17.203

我已经解决了我的问题，发现源是对 xml 文件的缺失。不正确的引用。我修复了它，错误不再发生。

# java - 使用正则表达式拆分字符串

> ID：12762528
> 
> 赞同：-1
> 
> 时间：2012-10-06T18:21:01.620
> 
> 标签：java, regex, string, expression

我需要对我的 Java 正则表达式进行一些刷新。

我基本上想检测一个无效的字符串输入，如果它是有效的，我会用它做一些事情。

数据可以是任何一种形式

```
New York,Los Angeles 
```

要不就

```
New York 
```

城市的名称当然各不相同，所以我可以有其他形式，例如

```
Orlando,West Palm

Miami,Stuart

Stuart

Pompano, Satellite Beach 
```

所以基本上我想检测这两种类型的字符串格式

*   任何长度的只有大小写字母和空格的字符串，后跟一个逗号，然后是另一个任何长度的只有大小写字母和空格的字符串，它和逗号之间没有空格。
*   任何长度的单个字符串，只有大写和小写字母

除了第一个字符串中的单个逗号外，任何一个字符串中都不能有数字或标点符号。所以额外的逗号也是被禁止的。

这是我到目前为止所尝试的：

```
 try
{
    file = new Scanner(new File(f));
    int i = 1;
    while(file.hasNext())
    {
        String[] cities;
        String data = file.nextLine();

        if(data.matches("[a-z A-Z]+,[a-z A-Z]+$"))
        {
            cities = data.split(",");
            flightLog.addPath(cities[0], cities[1]);
        }
        else if(data.matches("[a-z A-Z]$"))
        {
            flightLog.addCity(data);
        }
        else
            System.out.println("Line" + i + " is invalid\n");
        ++i;
    }
}
catch (FileNotFoundException e)
{
    System.out.println("File does not exist");
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:24:41.130

你试过[String.split() 吗？](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)

```
"New York,Los Angeles".split(",") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:15:21.847

你几乎明白了，但你需要一个正则表达式“[环顾四周](http://www.regular-expressions.info/refadv.html)”来断言虽然字符串可能*包含*空格，但空格可能不与逗号相邻。

试试这个作为你的第一个条件：

```
data.matches("^[a-z A-Z]+(?<! ),(?! )[a-z A-Z]+$") 
```

# c++ - 类型未声明错误

> ID：12762530
> 
> 赞同：0
> 
> 时间：2012-10-06T18:21:11.583
> 
> 标签：c++, class, linked-list

我收到一条错误消息，说“T”没有命名类型。我对这意味着什么感到困惑。我以为我在课堂上宣布它说 Virtual T？

```
template <class T>
class ABList : public ABCList<T> {
private:
    T    a [LIST_MAX];
    int  size;

public:
         ABList ();

    virtual bool isEmpty ();
    virtual int  getLength ();
    virtual void insert (int pos, T item);
    virtual T    remove (int pos);
    virtual T    retrieve (int pos);
}; 
```

.

```
T  ABList::retrieve (int pos) throw (ListException)
{
    if (pos <= 0 || pos >= count)
        throw new ListException();
    return item[pos – 1];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:23:16.530

你必须写成：

```
template<typename T>
T  ABList<T>::retrieve (int pos) throw (ListException)
{
  //...
} 
```

因为`ABList`一个类模板。

请注意，您必须在定义类模板的同一文件中定义成员函数。在文件中定义类模板`.h`，而在模板中定义成员函数`.cpp`将**不起作用**。

# c# - 多语言 Telerik Windows 窗体

> ID：12762540
> 
> 赞同：0
> 
> 时间：2012-10-06T18:23:03.050
> 
> 标签：c#, telerik, multilingual, windows-forms-designer

我有一个由 Telerik 用 Ribbons 制作的完整 Windows 应用程序，我想让它成为多语言界面（英语和阿拉伯语）我将 localizable 属性设置为 true 并更改了每种语言的界面......并创建了一个循环的方法表单中的控件并使用所选语言应用资源问题是我找不到通用方法来循环 Telerik 控件以应用每个 Rad 控件的资源请帮助

或者如果有其他方法可以制作多语言界面，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:05:35.117

我找到了解决方案：我将保存的语言保存在 App.config 中，然后在 Program.cs 中检查保存的语言并将其保存在名为 Common.cs 的类中的静态值中，然后在 Program.cs 中运行以下代码：

```
 switch (Common.ApplicationLanguage)
            {
                case Common.Languages.Arabic:
                    System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("ar-EG");
                    System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("ar-EG");
                    break;
                case Common.Languages.English:
                    System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en-GB");
                    System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("en-GB");
                    break;
                default:
                    break;
            } 
```

# android - 通过上下文菜单发送数据

> ID：12762541
> 
> 赞同：0
> 
> 时间：2012-10-06T18:23:03.597
> 
> 标签：android, contextmenu

我有一个 android 应用程序，其中屏幕分为水平布局，其中显示数据。当用户按下其中一个布局并保持一段时间时，我需要应用程序打开一个上下文菜单，我需要通过该菜单将布局中显示的数据发送到另一个活动。如何通过上下文菜单发送数据？预先感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:40:05.477

您可以使用以下方法：

```
void writeMyInt(int value) {
    Editor editor = getSharedPreferences("myState", MODE_MULTI_PROCESS)
        .edit();
    editor.clear();
    editor.putInt("myInt", state);
    editor.commit();
}

int getMyInt() {
    return getApplicationContext().getSharedPreferences("myState",
            MODE_MULTI_PROCESS).getInt("myInt", 0);
} 
```

# installation - 如何在 Woocommerce 中安装 Cloud Zoom

> ID：12762545
> 
> 赞同：0
> 
> 时间：2012-10-06T18:23:17.703
> 
> 标签：installation, cloud, zooming, woocommerce

今天我为 Woocommerce 购买了插件 CLoudzoom，但我已经启用了插件，但我看到单个产品不起作用。谁用过这个插件，请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:41:30.510

我们是 Cloud Zoom (V2.0+) 的开发人员，并创建了一个新模块来将插件集成到 WooCommerce/WordPress 中。在 WooCommerce 中，链接到产品的附加图像将成为功能性 CloudZoom 画廊图像。

更新：V1.1 现在适用于产品变体图像。

[http://www.starplugins.com/cloudzoom/woocommerce](http://www.starplugins.com/cloudzoom/woocommerce)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:51:31.727

在 WooCommerce-> 设置-> 常规下，请参阅“在产品页面上启用 WooCommerce 灯箱”。- 确保选中该框。

如果未选中此框，CloudZoom 将不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T18:28:58.390

Cloud Zoom 是否适用于 WordPress 色板？如果我换出图像并将鼠标悬停在换出的图像上，它只会显示“特征图像”。非常令人沮丧！![在此处输入图像描述](../Images/8bbcf2b36ef99b7015788f69325e720d.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T18:38:30.483

WooCommerce Cloud Zoom Image Plugin 似乎不适用于变体图像。它总是被放大的特色图像。

# javascript - Javascript鸭子打字的例子？

> ID：12762550
> 
> 赞同：10
> 
> 时间：2012-10-06T18:23:32.087
> 
> 标签：javascript

一些程序员建议不要在 Javascript 中使用伪经典继承，但建议使用鸭子类型并为每个对象提供一组功能。

有没有一个很好的例子来说明如何做到这一点？我在下面有一个示例，但它一次只分配一个功能。我们能不能给一个对象分配一整组方法，比如我们能不能设置一个`OceanAnimal`可以“游泳”、“潜水”和“上升”的原型，一个`LandAnimal`“跑步”、“步行”和“跳跃”的原型"，并让一个对象从其中一个或两个继承？（所以 fish 对象可以继承或获得 的能力`OceanAnimal`，而乌龟可以同时获得 和 的能力`OceanAnimal`？`LandAnimal`）

```
var yoyo = {
    name: "Yoyo",
    type: "turtle"
}

var simba = {
    name: "Simba",
    type: "lion"
}

var dolphy = {
    name: "Dolphy",
    type: "dolphin"
}

function swim(n) {
    console.log("My name is", this.name, ", I am a", this.type, "and I just swam", n, "feet")
}

function run(n) {
    console.log("My name is", this.name,  ", I am a", this.type, "and I just ran", n, "feet")
}

Object.prototype.respondTo = function(method) {
    return !!(this[method] && (typeof this[method] === "function"));
}

yoyo.swim = swim;
yoyo.swim(10);

dolphy.swim = swim;
dolphy.swim(80);

simba.run = run;
simba.run(200);

yoyo.run = run;
yoyo.run(2);

yoyo.walk = run;
yoyo.walk(1);

console.log(simba.respondTo("swim"));
console.log(simba.respondTo("run"));
console.log(simba.respondTo("walk"));

console.log(yoyo.respondTo("run"));
console.log(yoyo.respondTo("walk"));
console.log(yoyo.respondTo("fly"));

if(dolphy.respondTo("run")) {
    dolphy.run(10);
}

if(dolphy.respondTo("swim")) {
    dolphy.swim(10);
} 
```

输出：

```
My name is Yoyo , I am a turtle and I just swam 10 feet 
My name is Dolphy , I am a dolphin and I just swam 80 feet 
My name is Simba , I am a lion and I just ran 200 feet 
My name is Yoyo , I am a turtle and I just ran 2 feet 
My name is Yoyo , I am a turtle and I just ran 1 feet 
false 
true 
false 
true 
true 
false 
My name is Dolphy , I am a dolphin and I just swam 10 feet 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-07T09:07:02.727

JavaScript 中的函数是通用的。它们可以用作[子例程](http://en.wikipedia.org/wiki/Subroutine)、[方法](http://en.wikipedia.org/wiki/Method_%28computing%29)、[构造函数](http://en.wikipedia.org/wiki/Constructor_%28object-oriented_programming%29)、[命名空间](http://en.wikipedia.org/wiki/Namespace_%28computer_science%29)、[模块](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)等等。

人们反对在 JavaScript 中使用伪经典继承的原因是因为它隐藏了 JavaScript 的真正威力。如果不比对象更具表现力，函数也同样具有表现力。这已被[Alonzo Church](http://en.wikipedia.org/wiki/Alonzo_Church)证明，他的工作[Lambda Calculus](http://en.wikipedia.org/wiki/Lambda_calculus)是[图灵完备](http://en.wikipedia.org/wiki/Turing_completeness)的。

为了直接回答您的问题，我将使用函数来创建 a `Turtle`、 a`Lion`和 a `Dolphin`。然后我将演示乌龟如何是一个`OceanAnimal`和一个`LandAnimal`，狮子如何只是一个`LandAnimal`，海豚如何只是一个`OceanAnimal`。最后，我将解释什么是鸭式打字。

首先让我们为 an 创建构造函数`OceanAnimal`：

```
function OceanAnimal() {
    this.swim = function (n) {
        return "I am " + this.name + ", the " + this.type +
               ", and I just swam " + n + " meters.";
    };
} 
```

接下来，我们将为 a 创建构造函数`LandAnimal`：

```
function LandAnimal() {
    this.walk = function (n) {
        return "I am " + this.name + ", the " + this.type +
               ", and I just walked " + n + " meters.";
    };
} 
```

好吧。所以现在让我们为 a 创建构造函数`Turtle`：

```
Turtle.prototype.type = "turtle";

function Turtle(name) {
    this.name = name;
    LandAnimal.call(this);
    OceanAnimal.call(this);
} 
```

这里发生了什么事？好的，我们想`Turtle`从两者继承`OceanAnimal`和`LandAnimal`。所以我们调用`LandAnimal.call(this)`and `OceanAnimal.call(this)`。通过这种方式，我们将`OceanAnimal`and`LandAnimal`构造函数用作[mixins](http://en.wikipedia.org/wiki/Mixin)。因此`Turtle`继承自两者`OceanAnimal`，`LandAnimal`但实际上并没有成为`OceanAnimal`or类型`LandAnimal`。

需要注意的另一件事是，我们将`type`属性设置在`prototype`of 上`Turtle`而不是内部。这是因为`type`所有海龟都是一样的。因此它是共享的。`name`另一方面，每只海龟的 可能会有所不同，因此它被设置在构造函数中。

现在让我们类似地为 a 创建构造函数`Lion`：

```
Lion.prototype.type = "lion";

function Lion(name) {
    this.name = name;
    LandAnimal.call(this);
} 
```

由于`Lion`是 a`LandAnimal`我们只在`LandAnimal`构造函数中混合。

同样对于 a `Dolphin`：

```
Dolphin.prototype.type = "dolphin";

function Dolphin(name) {
    this.name = name;
    OceanAnimal.call(this);
} 
```

现在我们已经创建了所有的构造函数，让我们创建一只乌龟、一只狮子和一只海豚：

```
var yoyo = new Turtle("Yoyo");
var simba = new Lion("Simba");
var dolphy = new Dolphin("Dolphy"); 
```

Awww，现在让我们释放它们：

```
alert(yoyo.walk(10));
alert(yoyo.swim(30));   // turtles are faster in the water
alert(simba.walk(20));
alert(dolphy.swim(20)); 
```

哈哈。那很有趣。我个人最喜欢yoyo。

好的，那么鸭子打字是什么？我们知道 yoyo 是 an`OceanAnimal`和 a `LandAnimal`。但是，如果我们这样做`yoyo instanceof OceanAnimal`，`yoyo instanceof LandAnimal`它就会返回`false`。什么？

*   **你：**愚蠢的 JavaScript。A`Turtle`是一个`OceanAnimal`和一个`LandAnimal`！
*   **JavaScript：**不是从我站的地方。我只知道它是一个`Turtle`.
*   **你：**但是如果它会游泳，那么它就是一个`OceanAnimal`，如果它会走路，那么它就是一个`LandAnimal`。

因此，由于 JavaScript 是个大杂烩，我们必须创建自己的测试来检查对象是否为 an`OceanAnimal`以及是否为`LandAnimal`.

让我们从一个开始`OceanAnimal`：

```
function isOceanAnimal(object) {
    if (typeof object !== "object") return false;
    if (typeof object.swim !== "function") return false;
    return true;
} 
```

同样，对于 a `LandAnimal`：

```
function isLandAnimal(object) {
    if (typeof object !== "object") return false;
    if (typeof object.walk !== "function") return false;
    return true;
} 
```

所以现在我们可以使用`isOceanAnimal(yoyo)`代替`yoyo instanceof OceanAnimal`，和`isLandAnimal(yoyo)`代替`yoyo instanceof LandAnimal`; 这两个功能都将返回`true`给我们心爱的悠悠球。耶！

这是一个在 JavaScript 中进行鸭式输入的简单示例。总结：

> 当我看到一只像鸭子一样走路、像鸭子一样游泳、像鸭子一样叫的鸟时，我称那只鸟为鸭子。

相似地：

> 当我看到一种像海洋动物一样游泳的动物时，我称它为海洋动物；当我看到一种像陆地动物一样走路的动物时，我称它为陆地动物。

**编辑：**你可以在这里看到上面的代码：http: [//jsfiddle.net/aaditmshah/X9M4G/](http://jsfiddle.net/aaditmshah/X9M4G/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-06T19:26:13.280

与其尝试子类化，不如使用鸭子类型倡议来扩展组件和依赖注入？

```
var Duck = function (flyable, movable, speakable) {

    this.speak = speakable.speak;
    this.fly = flyable.fly;
    this.position = movable.position;

    flyable.subscribe("takeoff", movable.leaveGround);
    flyable.subscribe("land",    movable.hitGround);

}

var duck = new Duck(new BirdFlier(), new BirdWalker(), new Quacker());

var plane = new Duck(new VehicleFlier(), new Drivable(), new Radio());

duck.speak(); // "quack"
plane.speak(); // "Roger" 
```

请注意，`plane`它愉快地使用与`duck`.

他们甚至一开始就不需要构造函数。
工厂也可以。

DuckTyping 的重点是对象构造不是使用对象的程序所关心的。

只要它具有相同的方法/属性名称，程序就会使用它们，而不管子/超/静态继承。

**编辑：** *添加示例组件*

这里有几个不同的想法，我将它们结合在一起。所以一次一个点：

一、duck-typing的基本前提：

```
// the basic nature of duck-typing
var sheriff = {
    gun : {
        aim : function () { /* point gun somewhere */ },
        bullets : 6,
        fire : function () {
            if (this.bullets === 0) { return; }
            this.bullets -= 1;
            /* ... et cetera */
        }
    },
    draw : function () {
        this.gun.aim();
        this.gun.fire();
    }
},

cartoonist = {
    pen : { scribble : function () { /* ... */ } },
    draw : function () { this.pen.scribble(); }
},

graphicsCard = {
    pixels : [ /* ... */ ],
    screen : { /* ... */ },
    draw : function () {
        pixels.forEach(function (pixel) { screen.draw(pixel); });
    }
};

// duck-typing at its finest:
sheriff.draw();
cartoonist.draw();
graphicsCard.draw(); 
```

目标是编写不需要检查它是什么类型的对象的函数：

```
function duckDraw (array) { array.forEach(function (obj) { obj.draw(); }); }
duckDraw([ sheriff, cartoonist, graphicsCard ]); 
```

因此，如果您有海龟、海豚、鲸鱼、潜艇和小鱼，您的程序就不必关心它们游泳***方式的差异。***它只关心他们都可以`.swim();`。每个项目都可以担心自己，以及它做它需要做的特殊方式。

***鸭子打字***

接下来是***依赖注入***。在某种程度上，依赖注入也使用鸭子类型，但在你的类***内部***，而不是外部（或者如果你像我在上面那样做，它从内部开始，然后允许鸭子类型在外面也是如此）。

可以这样想：与其让一个人继承某些东西，不如把它交给他们。

如果您有 a `soldier`、 a `sniper`a`plane`和 a `tank`，则每个都需要 a `gun`。与其尝试子类化以便他们都能开火……为什么不制造不同种类的枪来满足您的需求，并把他们需要的一切都交给他们呢？

```
var Rifle = function () {
    this.reload = function () {};
    this.fire = function () { /* ... */ };
},

SniperRifle = function () {
    this.reload = function () {};
    this.fire = function () {};
},

MachineGun = function () {
    this.reload = function () {};
    this.fire = function () {};
},

Cannon = function () {
    this.reload = function () {};
    this.fire = function () {};
}; 
```

所以现在我们有了不同种类的枪......你可能会认为因为它们有相同的函数名称，而且它们都处理子弹，所以你可以尝试子类......但你没有不需要 - 这些枪在开火或重装时都不会做同样的事情......所以你最终会用其他语言写`overrides`一个方法/属性，这将是无用的。`abstract virtual`

所以现在我们已经有了它们，我们可以看到我们如何“注入”它们，以及这对我们有什么作用：

```
var Soldier = function (gun) {
    this.currentGun = gun;
    this.inventory = {
        guns : [ gun ]
    };
    this.attack = function () { this.currentGun.fire(); };
};

var Sniper = function (gun) {
    this.currentGun = gun;
    this.inventory = {
        guns : [ gun ]
    };
    this.attack = function () { this.currentGun.fire(); };
};

var Plane = function (gun) {
    this.currentGun = gun;
    this.inventory = {
        guns : [ gun ]
    };
    this.attack = function () { this.currentGun.fire(); };
};

var Tank = function (gun) {
    this.currentGun = gun;
    this.inventory = {
        guns : [ gun ]
    };
    this.attack = function () { this.currentGun.fire(); };
};

var soldier = new Soldier( new Rifle() ),
    sniper  = new Sniper( new SniperRifle() ),
    plane   = new Plane( new MachineGun() ),
    tank    = new Tank( new Cannon() ); 
```

所以现在我们有了这些他们称之为枪的课程——他们不在乎什么样的枪，它只是工作，因为枪知道枪是如何工作的，战斗人员知道如何开枪，而且程序知道如何告诉战斗人员开火。

但如果你仔细观察，现在每个战斗员的内部代码都是 100% 相同的。

那么，为什么不拥有一个可以提供特殊组件的“战斗者”呢？

```
var Combatant = function (gun) {
    this.currentGun = gun;
    this.inventory = {
        guns : [ gun ]
    };
    this.attack = function () { this.currentGun.fire(); };
};

var soldier = new Combatant( new Rifle() ); 
```

所以构造函数的内部是鸭式类型`gun`，如果你有不同的战斗员类，并且每个类都有一个`fire`方法，那么你也可以在游戏逻辑中对你的单位进行鸭式类型。

最终，构造函数将只保存模块：一个处理射击的模块，一个处理地面移动的模块，一个用于绘图的模块，一个用于玩家控制的模块，等等......构造函数不需要做任何事情，除了让各个部分接触彼此之间，您可以通过赋予它们不同种类的枪、不同种类的运动或不同种类的健康来使单位变得特别，它们在内部运作不同，但具有相同的属性和方法名称以供公众访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T18:41:14.363

所以你有这两个功能：

```
function make ( props ) {
    var obj = Object.create( {} );
    Object.keys( props ).forEach(function ( key ) {
        obj[ key ] = props[ key ];
    });
    return obj;
};

function addMethods ( obj, methods ) {
    var proto = Object.getPrototypeOf( obj );
    Object.keys( methods ).forEach(function ( key ) {
        proto[ key ] = methods[ key ];
    });        
} 
```

用法：

```
var simba = make({
    name: "Simba",
    type: "lion"
});

addMethods( simba, {
    swim: function () {},
    run: function () {}
});

addMethods( simba, {
    hunt: function () {},
    kill: function () {}
}); 
```

**现场演示：http:** [//jsfiddle.net/UETVc/](http://jsfiddle.net/UETVc/)

# .net - 在form1在同一页面上发布成功将数据返回到同一模型后，Net mvc4 form2以空模型提交

> ID：12762557
> 
> 赞同：0
> 
> 时间：2012-10-06T18:24:14.260
> 
> 标签：.net, asp.net-mvc-4

我正在使用一种表格，其中包含两个表格帖子。第一个表单（“frmTemps”）成功检索数据并将其显示在表单上。我可以向您保证，当返回视图显示数据时，通过调试数据在模型中。

一旦数据返回，另一个按钮显示在同一个视图上，但第二个表单（“frmProcess”）用于对从第一个表单（“frmTemps”）返回的选定数据进行一些处理。我知道您可以在 sme View 上有多个表单。这都是 MVC 为您提供的控制的一部分。

问题是，一旦我发布我的第二个表单（“ **frmProcess** ”）**并立即在该操作结果中设置断点**并检查模型的内容，我发现模型中**的所有项目要么为空，零，或假。**通过对模型对象进行调试。

```
[HttpPost]
public ActionResult GeneratePDF(ViewModelTemplate_Guarantors model) { 
```

我在表格 2 中使用与表格 1 相同的模型。

我认为在表单上填写数据并提交数据并让您的模型类型在操作方法中接收数据之后，这是被理解的，这是做事的标准方式。

下面是我的 ViewModel。

```
public partial class ViewModelTemplate_Guarantors
{
    public int SelectedTemplateId { get; set; }
    public IEnumerable<PDFTemplate> Templates { get; set; }

    public int SelectedGuarantorId { get; set; }
    public IEnumerable<tGuarantor> Guarantors { get; set; }

    public string LoanId { get; set; }
    public string SelectedDeptText { get; set; }
    public string SelectedDeptValue { get; set; }
    public string LoanType { get; set; }

    public bool ShowTemps { get; set; }
    public string Error { get; set; }
    public string ErrorT { get; set; }
    public string ErrorG { get; set; }
    public bool ShowGeneratePDFBtn { get; set; }
} 
```

以下是我的观点：

```
@model PDFConverterModel.ViewModels.ViewModelTemplate_Guarantors

@{
    ViewBag.Title = "BHG :: PDF Generator";
}
<h2>@ViewBag.Message</h2>

<div>

    <table style="width: 1000px">
        <tr>
            <td colspan="5">
                <img alt="BHG Logo" src="~/Images/logo.gif" />
            </td>
        </tr>

        @using (Html.BeginForm("Refresh", "Home", FormMethod.Post, new { id = "frmTemps" }))
        {  
            <tr>
                <td>
                @*@(Html.Kendo().NumericTextBox<int>()
                        .Name("txtLoanID")
                        .Placeholder("Enter numeric value")
                )*@

                @Html.LabelFor(model => model.LoanId)
                @Html.TextBoxFor(model => model.LoanId)
                @Html.ValidationMessageFor(model => model.LoanId)
                <td colspan="3">
                    <input type="submit" id="btnRefresh" value='Refresh' />
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model => model.LoanType)
                    @Html.TextBox("SBA", "SBA")
                    @Html.ValidationMessageFor(model => model.LoanType)
                    @*@Html.TextBoxFor(model => model.LoanType)*@
                </td>
                <td>
                    <label for="ddlDept">Department:</label>
                    @(Html.Kendo().DropDownListFor(model => model.SelectedDeptText)
                            .Name("ddlDept")
                            .DataTextField("DepartmentName")
                            .DataValueField("DepartmentID")
                            .Events(e => e.Change("Refresh"))
                            .DataSource(source =>
                            {
                                source.Read(read =>
                                {
                                    read.Action("GetDepartments", "Home");
                                });
                            })
                    )
                    @Html.ValidationMessageFor(model => model.SelectedDeptText)
                </td>
            </tr>
        }

        @using (Html.BeginForm("GeneratePDF", "Home", FormMethod.Post, new { id = "frmProcess" }))
        {
            if (Model.ShowGeneratePDFBtn == true)
            {
                if (Model.ErrorT != string.Empty)
                {
            <tr>
                <td colspan="5">
                    <u><b>@Html.Label("Templates:")</b></u>
                </td>
            </tr>
            <tr>
                @foreach (var item in Model.Templates)
                {
                    <td>
                        @Html.CheckBoxFor(model => item.IsChecked)
                        @Html.DisplayFor(model => item.TemplateName)
                    </td>
                }
            </tr>
                }
                else
                {
                    Model.Error = Model.ErrorT;
                }

                if (Model.ErrorG != string.Empty)
                {
            <tr>
                <td colspan="5">
                    <u><b>@Html.Label("Guarantors:")</b></u>
                </td>
            </tr>
            <tr>
                @foreach (var item in Model.Guarantors)
                {
                    <td>
                        @Html.CheckBoxFor(model => item.isChecked)
                        @Html.DisplayFor(model => item.GuarantorFirstName)&nbsp;@Html.DisplayFor(model => item.GuarantorLastName)
                    </td>
                }
            </tr>
                }
                else
                {
                    Model.Error = Model.ErrorG;
                }
            <tr>
                <td>
                    <input type="submit" id="btnGeneratePDF" value='Generate PDF' />
                </td>
            </tr>
            <tr>
                <td colspan="5">
                    @Model.Error
                </td>
            </tr>
            }
        }
    </table>

</div>

<script type="text/javascript">

    $('btnRefresh').on('click', '#btnRefresh', function () {
        Refresh();
    });

    function Refresh() {

        var LoanID = $("#LoanID").val();

        if (LoanID != "") {
            document.forms["frmTemps"].submit();
        }
    }
</script> 
```

下面，是我的控制器的相关部分：

```
[HttpPost]
        public ActionResult GeneratePDF(ViewModelTemplate_Guarantors **model**)
        {
            try
            {
                int FolderNo, GuarantorNum = 0;
                string Folder, LoanFolder = String.Empty;
                string FormId, FormName, GuarantorName = String.Empty;

                int LoanId = Convert.ToInt32(model.LoanId);
                LoanFolder = LoanId.ToString().PadLeft(8, '0');

                //To calculate FolderId based on LoanId
                if ((LoanId > 0) && (LoanId < 99000))
                {
                    FolderNo = ((int)(LoanId / 10000) * 10000);
                }
                else
                {
                    FolderNo = ((int)(LoanId / 1000) * 1000);
                }

                Folder = ((int)FolderNo).ToString();
                Folder = Folder.PadLeft(8, '0'); 
```

`A`我通过按钮 1提交了表单。模型返回并填充了我的`View A`. 现在我想`View A`用按钮 2 再次提交到同一控制器中的不同 Action 方法。

当我以我的模型作为接收参数再次将表单提交到同一个控制器时，我的模型在到达操作方法时为空。我知道我的模型在第一步返回上面时有数据。

对于 MVC 来说相对较新，我的印象是，如果您的 View 填充了数据并且您将表单提交给 Controller，那么您的 Model 中应该有数据。我现在意识到，模型不是持久的。一旦你将模型传递给视图，反之亦然，它就消失了。我得到它。

我只想知道如何在将模型提交到控制器之前用数据填充模型，以便将数据发送到控制器并填充模型以呈现视图？就是这么简单。不是 ehtat 我的模型是强类型模型。我觉得这是理解如何在视图和控制器之间提交数据的主要基石，并且对于理解 MVC 的工作原理非常重要。

当我的数据再次到达我的控制器时，我的数据为空，我做错了什么。在我提交模型将在其中包含数据的位置以便进行一些处理并再次呈现视图之前，如何将视图中的数据返回模型内部。

如果以前回发的表单上已经存在数据，那么当我通过第二个按钮再次发布时，为什么 MVC 不使用模型绑定器来创建包含表单数据的模型并发布它。

我知道 loanid 和 ddl 不会出现在数据中（因为它没有包裹在第二种形式中），但我对它的工作方式感到非常困惑。我期待它将驻留在表单上的数据发布回模型中。为什么不这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:40:43.977

尽管表单共享一个模型，但提交给 GeneratePDF 操作的唯一值是包含在“frmProcess”表单中的值。如果您需要将“frmTemps”中的值（例如 LoanId）重新提交到 GeneratePDF 操作，则需要将它们作为隐藏字段包含在“frmProcess”表单中。

```
@Html.HiddenFor(m => m.LoanId) 
```

因此，您的数据流是：

*   在“frmTemps”中填充值
*   将数据从“frmTemps”发布到“刷新”操作
*   返回带有更新模型的视图
*   更新模型中的值填充为“frmProcess”中的隐藏字段
*   将所有数据从“frmProcess”发布到“GeneratePDF”操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:54:13.993

有些事情要记住。

首先，表单只会发布提交的表单元素中的值。如果您在一个页面上有多个表单，则其他表单中的数据不会发布。仅来自“活动”表单的数据。

如果您想往返数据，即发布数据然后返回一个表单，那么当发布第二个表单时包含原始数据（即使它是同一个视图），那么您需要有元素来保存该数据，以便它将以新形式再次发布。隐藏字段通常用于此目的。

最后，通常最好有单独的视图，而不是在一个页面上组合多个表单。您可以这样做，并且在某些情况下（例如在页面上有一个搜索框）是有意义的，但总的来说它会令人困惑。

# iphone - 尽管已获得授权，但 CLAuthorizationStatus 返回 kCLAuthorizationStatusNotDetermined

> ID：12762559
> 
> 赞同：1
> 
> 时间：2012-10-06T18:24:27.103
> 
> 标签：iphone, ios, core-location

我在这里对授权状态有些麻烦，我不确定发生了什么。

```
 if(sender.on == TRUE)
{
    [self.locationManager startUpdatingLocation];
    [self.locationManager startUpdatingHeading];

    CLAuthorizationStatus authStatus = [CLLocationManager authorizationStatus];
    bool headingStatus = [CLLocationManager headingAvailable];

    if( !(authStatus == kCLAuthorizationStatusAuthorized))
    {
        [self processFailedAuthorization:authStatus];
        [locationManager stopUpdatingHeading];
        [locationManager stopUpdatingLocation];
        sender.on = FALSE;

    } 
```

`kCLAuthorizationStatusNotDetermined`尽管刚刚提示用户进行授权，但似乎 authStatus 有时会显示。

我已经在调试器中逐步完成了代码，似乎如果我在检查之前等待一小段时间，`CLAuthorizationStatus`那么它确实会按授权返回，而如果我立即检查则不会。

我知道我可以等待一秒钟左右然后继续，但文档中没有任何关于需要延迟的内容。

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:29:46.233

[CLLocationManagerDelegate](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intf/CLLocationManagerDelegate)有一个回调，locationManager [:didChangeAuthorizationStatus:](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidChangeAuthorizationStatus%3a)，让您知道授权状态何时发生变化。它将新状态传递给您的代表。这就是要查看的状态。就像位置一样，CLLocationManager 对象中的状态也可以改变。

# ios - 只允许在文本字段中输入 1 - 9 位数字

> ID：12762561
> 
> 赞同：2
> 
> 时间：2012-10-06T18:24:29.813
> 
> 标签：ios

我只需要允许最终用户输入 1-9 位数字：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
        NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
        if([newString length]>=1)
        {
            NSString *sepStr=[newString substringToIndex:1];
            return !([sepStr length]>1);
        }

        if ([string length] == 0 && range.length > 0){
            textField.text = [textField.text stringByReplacingCharactersInRange:range withString:string];
            return NO;
        }
        NSCharacterSet *nonNumberSet = [[NSCharacterSet characterSetWithCharactersInString:@"0123456789"] invertedSet];
        if ([string stringByTrimmingCharactersInSet:nonNumberSet].length > 0)return YES;
        return NO;
    } 
```

但仍然可以输入超过 1 个数字。请帮助查找错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T18:43:52.927

只需将其添加到您的第一个测试中：

```
if ([newString length] > 1)
    return NO; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T18:29:16.937

为什么不为此字段指定最大长度为 1 的数字键盘/小键盘？

UITextField 对象有一个keyboardType 属性。将其设置为 UIKeyboardTypeDecimalPad

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T19:16:03.030

Cyrille 有正确的答案，但只是为了让您知道为什么它目前不起作用：

当您输入第二个数字时，代码将进入此 if 语句：

```
if([newString length]>=1)
{
    NSString *sepStr=[newString substringToIndex:1];
    return !([sepStr length]>1);
} 
```

这总是会返回 YES，因为 sepStr 的长度总是 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-11T10:15:35.430

使用此代码它将为我工作（工作代码）

#define ACCEPTABLE_CHARACTERS @"0123456789"

-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string { if ([textField isEqual:zipCode]) {

```
 NSCharacterSet *cs = [[NSCharacterSet characterSetWithCharactersInString:ACCEPTABLE_CHARACTERS] invertedSet];
    NSString *filtered = [[string componentsSeparatedByCharactersInSet:cs] componentsJoinedByString:@""];
    return [string isEqualToString:filtered];

}

return YES; 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T15:02:41.327

```
NSString *number = @"[0-9]"; 
NSPredicate *numbertest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", number]; 
if ([numbertest evaluateWithObject:yourtextfield.text] != YES)
{
// Display error message
} 
```

只需使用此代码

# php - 用可变数量的数组参数实例化一个对象

> ID：12762563
> 
> 赞同：0
> 
> 时间：2012-10-06T18:24:41.287
> 
> 标签：php

我试图将数组分解为单独的参数并将其传递给类的构造函数。call_user_func_array() 如何做到这一点？

我见过使用反射类的方法，但想知道是否有更直接的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:37:09.347

call_user_func_array()，因为（顾名思义）它调用函数/方法，但不打算创建对象，使用 ReflectionClass

```
$refClass = new ReflectionClass($class);
$object = $refClass->newInstanceArgs($args); 
```

另一个（更多基于设计的）解决方案是静态工厂方法

```
class Demo () {
  public static function set_args ($args) {
    return new self($args[0],$args[1],$args[2]);
  }
} 
```

然后就

```
$object = $class::set_args($args); 
```

它更干净，因为更少的魔法和更多的控制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:31:52.373

这[`ReflectionClass`](http://php.net/manual/en/class.reflectionclass.php)是最好的方法，最直接的方法，但还有*另*一种方法：

```
function call_new_array($klass, $args)
{
  $vars = array();
  $loads = array();
  foreach($args as $i => $x) {
    $vars[] = '$v' . $i;
    $loads[] = '$v' . $i . ' = $args[' . $i . ']';
  }
  return eval(implode(";",$loads) .
              ";return new $klass(" . implode(",", $vars) . ");");
} 
```

# magento - Magento 电子邮件布局翻译

> ID：12762567
> 
> 赞同：1
> 
> 时间：2012-10-06T18:25:43.267
> 
> 标签：magento

嗨，我翻译了 magento 系统，但我不知道在哪里可以找到当我订购小计（不含税）、小计（含税）、运输和处理（不含税）、运输和处理（含）等产品时出现的文本.Tax），总计（不含税）。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T19:28:45.597

有两种方法可以编辑 Magneto 电子邮件模板。

1.  粗暴的方法是编辑`/app/locale/[language]-[country]/template/email/`我不推荐的文件，因为这些文件可能会被 Magento 更新或语言包更新覆盖。

2.  更文明的方法是创建自己的电子邮件模板并将其分配给相应的操作。

    要创建新的电子邮件模板，请转到`Admin\System\Transactional Emails`添加新模板并从下拉列表中选择一个基本模板。例如，对于订单确认电子邮件，您需要选择一个合适的基本模板，然后将其加载到编辑器区域。进行必要的更改并保存电子邮件模板。

    现在您必须将您的模板分配给相应的操作。例如，对于订单确认电子邮件，您必须转到`Admin\System\Configuration\Sales\Sales Emails`。在那里你会发现两个字段`New Order Confirmation Template`和`New Order Confirmation Template for Guest`。

    就这样。我不确定电子邮件模板是否缓存在 Magento 中，因此请刷新您的缓存以确定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T23:12:05.800

Tim 关于 Mage_Sales.csv 的假设部分正确。让我们看看最新的 Magento 版本 (1.7.0.2)：app/locale/[Locale_Code]/template/email/sales/order_new.html

```
{{layout handle="sales_email_order_items" order=$order}} 
```

这会将我们发送到 app/design/frontend/[Your_Package]/[Your_Theme]/layout/sales.xml

```
<sales_email_order_items>
    <block type="sales/order_email_items" name="items" template="email/order/items.phtml">
        <action method="addItemRender"><type>default</type><block>sales/order_email_items_order_default</block><template>email/order/items/order/default.phtml</template></action>
        <action method="addItemRender"><type>grouped</type><block>sales/order_email_items_order_grouped</block><template>email/order/items/order/default.phtml</template></action>
        <block type="sales/order_totals" name="order_totals" template="sales/order/totals.phtml">
            <action method="setLabelProperties"><value>colspan="3" align="right" style="padding:3px 9px"</value></action>
            <action method="setValueProperties"><value>align="right" style="padding:3px 9px"</value></action>
            <block type="tax/sales_order_tax" name="tax" template="tax/order/tax.phtml">
                <action method="setIsPlaneMode"><value>1</value></action>
            </block>
        </block>
    </block>
    <block type="core/text_list" name="additional.product.info" />
</sales_email_order_items> 
```

所以你可以找到所有加载的模板

email/order/items.phtml 定义所有订购产品列表的视图

email/order/items/order/default.phtml 标准价格（公司，不含税）和礼品信息

sales/order/totals.phtml、tax/order/tax.phtml 总计、总计、税金等

您可以查看这些模板以查找使用过的帮助程序和 csv 文件：Mage_Sales.csv、Mage_Tax.csv、Mage_Weee.csv。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-24T15:04:39.003

Magento 电子邮件模板使用 trans 指令。它的意思是。

```
{{trans "Text in english"}} 
```

你必须翻译为

```
{{trans "Text in your language"}} 
```

# javascript - angularjs中的骨干风格模型？

> ID：12762574
> 
> 赞同：7
> 
> 时间：2012-10-06T18:26:56.143
> 
> 标签：javascript, model-view-controller, backbone.js, angularjs

如果这个问题已经在其他地方得到回答，我深表歉意，但我找不到一个完整的、明显的（至少对我来说）解决方案。

我对主干模型的想法有经验。在我看来，它类似于任何其他 OOP 语言中的类——使用 Backbone.Model.extend() 创建一个“类”，并在需要该类的新实例时调用它。如果我有一个应用程序命名空间，我可以在那里存储我的所有对象，并执行类似 App.getAllThisOrThatTypeModel() 之类的操作。

这是有角度的服务吗？拥有大量服务（每种类型的模型一个），基本上用“服务”模仿“类”，这是一个好的“最佳实践”吗？

当我尝试从骨干迁移到 Angular 进行实验时，我只是想围绕处理模型的最佳方法来思考 - 任何向这个方向迁移的人的建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:07:06.090

在 Angular 中，模型只是一个 POJO（普通的旧 javascript 对象）。

服务有所不同，但您通常会使用服务获取模型。拥有更多服务是一种很好的做法，因此您可以在整个应用程序中重用它们。服务的一大优点是，它们可以进行单元测试。和软件工程中的所有其他事情一样，将应用程序拆分为比一大堆代码更容易维护的小模块总是更好。

您不需要将模型模仿为服务。您可以稍后向它们添加一些功能，并将您的域逻辑保留在这些服务中。

我不是 Angular 专家，但我希望这能有所帮助。

# directx-11 - DirectX 11 Sprite Alpha 混合在另一个 Sprite 之上

> ID：12762577
> 
> 赞同：1
> 
> 时间：2012-10-06T18:27:28.483
> 
> 标签：directx-11

我已经学习了一些关于使用 DirectX 11 进行 Sprite Rendering 的教程，并且理解了它们，但是所有教程和示例似乎都以绘制 1 个精灵为中心。我正在尝试扩展它，并且对批处理友好。

到目前为止的结果是，如果我在另一个上面绘制一个精灵，Alpha Transparency 会渲染背景颜色而不是下面的精灵。有谁知道如何正确设置？

基本上，这是我的渲染循环：

 ````
void SpriteManager::render(){
    ID3D11DeviceContext* deviceContext;
    m_d3dDevice->GetImmediateContext(&deviceContext);
    unsigned int stride = sizeof( Vertex );
    unsigned int offset = 0;
    float blendFactor[4] = { 0.0f, 0.0f, 0.0f, 0.0f };
    deviceContext->OMSetBlendState( m_alphaBlendState, blendFactor, 0xFFFFFFFF );
    deviceContext->IASetInputLayout( m_inputLayout );
    deviceContext->IASetVertexBuffers( 0, 1, &m_vertexBuffer, &stride, &offset );
    deviceContext->IASetPrimitiveTopology( D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST );
    deviceContext->VSSetShader( m_vShader, 0, 0 );
    deviceContext->PSSetShader( m_pShader, 0, 0 );
    deviceContext->PSSetSamplers( 1, 1, &m_sampler ); //Using S1 Register
    for( unsigned int i = 0; i != m_sprites.size(); ++i )
    {
        deviceContext->PSSetShaderResources( 1, 1, &(m_sprites[i]->m_textureRV) );
        XMMATRIX& world = m_sprites[i]->getWorldMatrix();
        XMMATRIX& mvp = XMMatrixMultiply( world, vpMatrix_ );
        mvp = XMMatrixTranspose( mvp );
        deviceContext->UpdateSubresource( mvpCB_, 0, 0, &mvp, 0, 0 ); //Update ViewProjection Matrix in Shader
        deviceContext->Draw( 6, 0 );
    }
} 
````  `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:52:46.943

我解决了这个问题，结果发现我错过了 1 件，它在我的渲染循环中设置深度模板状态并将其添加到 SpriteManager 类。我正在研究《Beginning DirectX 11 Game Programming》一书中的一个示例，它根本没有在 Sprite 示例中设置深度模板状态。希望这对其他人也是有用的信息。

```
D3D11_DEPTH_STENCIL_DESC dsDesc;

dsDesc.DepthEnable = FALSE;
dsDesc.DepthWriteMask = D3D11_DEPTH_WRITE_MASK_ALL;
dsDesc.DepthFunc = D3D11_COMPARISON_LESS;
dsDesc.StencilEnable = false;
dsDesc.StencilReadMask = D3D11_DEFAULT_STENCIL_READ_MASK;
dsDesc.StencilWriteMask = D3D11_DEFAULT_STENCIL_WRITE_MASK;
dsDesc.FrontFace.StencilDepthFailOp = D3D11_STENCIL_OP_KEEP;
dsDesc.FrontFace.StencilFailOp = D3D11_STENCIL_OP_KEEP;
dsDesc.FrontFace.StencilPassOp = D3D11_STENCIL_OP_REPLACE;
dsDesc.FrontFace.StencilFunc = D3D11_COMPARISON_ALWAYS;
dsDesc.BackFace = dsDesc.FrontFace;

device->CreateDepthStencilState(&dsDesc, &m_depthStencilState); 
```

在渲染循环中，我现在在设置混合状态后立即调用它：

```
deviceContext->OMSetDepthStencilState(m_depthStencilState, 0); 
````

# java - Java 向量集

> ID：12762579
> 
> 赞同：-1
> 
> 时间：2012-10-06T18:27:40.113
> 
> 标签：java, vector, set

有人可以解释一下这两个程序之间的区别，基本上是泛型和对象之间的区别。还有为什么 System.out.println("add 1 to the set:" + vs.add(new String("Hello"))); 仅适用于第一个程序

第一个向量集程序

```
import java.util.Vector;

class VectorSet1 {
boolean add(Object obj) {
        if (contains(obj)) return false;
    v.add(obj);
    return true;
}

boolean contains(Object obj) {return v.contains(obj);}

public String toString() {return v.toString();}

void clear() {v.clear();}

int size() {return v.size();}

boolean isEmpty() {return v.isEmpty();}

Vector v = new Vector();

public static void main(String [] args) {
    VectorSet1 vs = new VectorSet1();

    System.out.println("set: " + vs);

    System.out.println("adding 1 to the set: " + vs.add(1));
    System.out.println("adding 5 to the set: " + vs.add(5));
    System.out.println("adding 17 to the set: " + vs.add(17));
    System.out.println("adding 1 to the set: " + vs.add(1));
    //System.out.println("adding 1 to the set: " + vs.add(new   String("Hello")));

    System.out.println("set: " + vs);

    System.out.println("testing if 1 s in the set: " + vs.contains(1));
    System.out.println("testing if 17 is in the set: " + vs.contains(17));
    System.out.println("testing if 6 is in the set: " + vs.contains(6));

    System.out.println("set is empty: " + vs.isEmpty());
    System.out.println("size of set: " + vs.size());

    vs.clear();

    System.out.println("after invoking clear");

    System.out.println("set: " + vs);

    System.out.println("set is empty: " + vs.isEmpty());
    System.out.println("size of set: " + vs.size());
}
} 
```

第二个向量集程序

```
import java.util.Vector;
import java.util.Iterator;

class VectorSet2<E> {
boolean add(E e) {
        if (contains(e)) return false;
    v.add(e);
    return true;
}

boolean contains(E e) {return v.contains(e);}

public String toString() {return v.toString();}

void clear() {v.clear();}

int size() {return v.size();}

boolean isEmpty() {return v.isEmpty();}

Vector<E> v = new Vector<E>();

public static void main(String [] args) {
    VectorSet2<Integer> vs = new VectorSet2<Integer>();

    System.out.println("set: " + vs);

    System.out.println("adding 1 to the set: " + vs.add(1));
    System.out.println("adding 5 to the set: " + vs.add(5));
    System.out.println("adding 17 to the set: " + vs.add(17));
    System.out.println("adding 1 to the set: " + vs.add(1));
    //System.out.println("adding Hello to the set: " + vs.add("Hello"));

    System.out.println("set: " + vs);

    System.out.println("testing if 1 s in the set: " + vs.contains(1));
    System.out.println("testing if 17 is in the set: " + vs.contains(17));
    System.out.println("testing if 6 is in the set: " + vs.contains(6));

    System.out.println("set is empty: " + vs.isEmpty());
    System.out.println("size of set: " + vs.size());

    vs.clear();

    System.out.println("after invoking clear");

    System.out.println("set: " + vs);

    System.out.println("set is empty: " + vs.isEmpty());
    System.out.println("size of set: " + vs.size());
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:42:03.773

创建 VectorSet2 时，需要为其元素指定类型。在第二个程序的情况下，该类型是整数。字符串不是整数，因此不能将字符串添加到 VectorSet2。

但是，VectorSet1 可以包含任何类型的元素（任何可以被视为对象的元素）。因此，如果您有一个 VectorSet1，您可以向其中添加任何对象，无论是字符串、整数还是任何其他类型的对象。

# ruby-on-rails-3 - 使用 filepicker-rails gem，我如何向我的用户显示他们的头像已成功上传的确认信息？

> ID：12762581
> 
> 赞同：1
> 
> 时间：2012-10-06T18:28:15.543
> 
> 标签：ruby-on-rails-3, rubygems, filepicker.io

使用 filepicker.io（filepicker-rails gem）上传头像后，我没有收到任何确认文件选择器服务器已接受它。任何人都知道向我的用户显示他们的头像已上传并且他们可以继续填写他们的个人资料表格的技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:41:11.487

您应该能够在 javascript 中将 onchange 事件附加到将在上传头像时触发的输入类型，并且表单的其余部分可以继续

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:35:27.250

`onchange`在 gem 的选项中触发一个 javascript 函数作为事件`filepicker-rails` ，然后继续进一步集成：

```
<%= p.filepicker_field :coverimage_url,dragdrop: true, mimetypes:'image/*', onchange:'sample()' %>` 
```

# javascript - Javascript - 在函数 1 中调用函数 2，然后继续

> ID：12762582
> 
> 赞同：0
> 
> 时间：2012-10-06T18:28:19.443
> 
> 标签：javascript, function

是否可以？这该怎么做？单击按钮时，我调用`function1`. 如果条件为真（`i==1`），则`function1`暂停和以下代码将仅在`function2`完全执行后执行。例子：

```
function1(i){
    //some code here
    if(i == 1){
        function2(i);  // call function2 and waits the return to continue
    }
    //the following code
}

function2(i){
    //do something here and returns
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:42:06.763

干得好：

```
function1(i){
    //some code here
    if(i == 1){
        function2(i);  // call function2 and waits the return to continue
    }
    //the following code
}

function2(i){
    //do something here and returns
} 
```

如果您的意思`function2`是实际上以某种方式异步：

```
function1(i){
    //some code here
    if(i == 1){
        // call function2 and waits for return to continue
        function2(i, function() {
            // the following code
        });  
    }
    else {
        //the following code
    }
}

function2(i, callback){
    //do something async here and return when complete
    setTimeout(callback, 1000);
} 
```

# c# - 解析密封类的命名空间有什么特殊要求吗？

> ID：12762586
> 
> 赞同：0
> 
> 时间：2012-10-06T18:28:48.683
> 
> 标签：c#

我用一些静态方法创建了一个名为 Transactions 的密封类并成功编译它。然后我创建了一个测试项目来测试我所有方法的功能，并添加了对 Sealed Class 的 dll 文件的引用。

当我开始在我的测试项目中键入类的命名空间时，intellisense 会解析引用并添加它。

我什至可以键入类名，intellisense 提供类的公共方法和属性的完整列表，但是当我尝试编译项目时，我收到错误“找不到类型或命名空间名称‘事务’（你是缺少 using 指令或程序集引用？）”

当我双击错误时，它指向代码顶部的命名空间引用。如果我删除命名空间，当我将鼠标悬停在我的方法调用上时会得到一个问号，提示添加我刚刚删除的命名空间。什么？？？

因此，一方面它抱怨它在编译期间找不到命名空间，另一方面，如果我删除命名空间，它会识别方法的依赖关系并希望我将其添加回来。我真的被困在一块岩石和一个坚硬的地方之间。

我唯一的怀疑是使用导致问题的密封类，因为如果我创建另一个类（不是密封）并添加相同的方法，问题就会消失。

想法或建议将不胜感激。这是 .NET 4.0 框架

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:48:16.747

如果它们都使用相同的框架“风格”（客户端配置文件/完整的框架，不同版本的框架），请检查您的项目属性。这通常是您的问题的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:53:09.640

好的，所以我想通了这个问题。事实证明，我的测试应用程序自动设置为使用 .NET 4 客户端配置文件。当我注意到其中一个警告指出由于对 System.Web 的依赖而无法解析对我的 Transactions dll 的引用时，我发现了这一点。

当我尝试添加参考时，我找不到它，并看到可用程序集的结果是根据 .NET 4 客户端配置文件过滤的。在我更改配置文件以匹配我的程序集（.NET 4.0）的配置文件之后，我能够添加对 System.Web 程序集的所需引用，并且我的代码编译没有问题。

对我来说，这种经验的道德是不要将环境中出现的警告视为理所当然，因为尽管大多数时候它们可能会被忽略，但在某些情况下它们实际上也有助于解决错误。

希望这篇文章对其他人有所帮助，但问题的标题可能会产生误导，因为我在发布它时处于错误的假设之下。

谢谢

# macos - 使用 gcc 内联汇编程序（64 位）调用系统调用失败

> ID：12762587
> 
> 赞同：1
> 
> 时间：2012-10-06T18:28:52.443
> 
> 标签：macos, gcc, assembly, inline-assembly

我正在尝试`write`使用内联汇编程序（gcc 4.2.1，Mac OS 10.7.5）调用系统调用，代码编译成功，但根本没有任何输出。这是完整的代码：

```
int main()
{
    char s[] = "Test\n";
    // write(1, s, 5);
    asm(
        "movq $1, %%rax;"
        "movq $1, %%rdi;"
        "movq %0, %%rsi;"
        "movq $5, %%rdx;"
        "syscall;"
        :
        : "r"(s)
        : "%rax", "%rdi", "%rsi", "%rdx"
    );
} 
```

使用 gcc 编译：

```
$ gcc main.c -o test 
```

跑：

```
$ ./test 
```

通过使用 Xcode 4.5 调试器运行代码，我收到此错误：

```
Thread 1: EXC_SYSCALL (code=1, subcode=0x1) 
```

代码有什么问题？它在 Ubuntu 12.04 LTS 上成功运行。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T18:39:33.150

正如我在上面的评论中提到的，系统调用号是不同的。你需要输入这个程序才能在 Mac OS X 上运行`0x2000004`。`%rax`

我也不确定您的程序如何在 Ubuntu 上运行，因为您在示例中使用的是`exit`系统调用号`1`，而不是`4`for `write`。

# c++ - 带有0x00字符的c ++数据数组

> ID：12762595
> 
> 赞同：0
> 
> 时间：2012-10-06T18:30:02.603
> 
> 标签：c++, null, character, byte, winsock

我正在尝试通过带有winsock的套接字发送一些数据。我遇到的问题是我的数据（实际上是一个 char 数组）可能包含一些零，但 char 0x00 代表空字符，并且所有后续字符都被剪切，因为它代表终止字符。有谁知道我应该如何解决这个问题？我可以使用什么替代方案？

我想做的是用winsock发送字节，它可能代表整数、字符数组或其他东西。接收部分将负责正确阅读，但这不是这篇文章的关注点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:37:58.313

我想你可能正在做这样的事情：`

字符 [100];

//用s做事

发送（袜子，s，strlen（s），标志）；`

strlen 通过计算有多少个字符来找到字符串的长度，直到它找到 NULL (0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T22:26:15.800

使数据流中的前两个字节成为您要发送的缓冲区的长度。然后发送那么多字节。

在另一端，读取这两个字节，然后您就知道应该收到多少字节了。

这将让你解决这个问题。

也是谷歌网络字节顺序。有一些方便的函数调用，使可移植性变得容易。

# php - Instagram 喜欢使用 php、curl 或 json 的照片

> ID：12762596
> 
> 赞同：0
> 
> 时间：2012-10-06T18:30:08.730
> 
> 标签：php, curl, instagram

我正在编写一个 instagram 网络应用程序，我正在查看 Instagram 的开发人员详细信息，而我正处于一个被卡住的阶段。

我正在使用 json 来检索我的提要的图像，我已经成功地登录到我的 instagram 应用程序。

现在我想做的是能够查看图像并“喜欢”它们。Instagram 似乎只向我显示以下详细信息

```
curl -F 'access_token=11208672.f59def8.d78b9193a13d4e79a5bdb985ce73831d' \
    https://api.instagram.com/v1/media/{media-id}/likes 
```

有人可以帮助我了解如何点赞 Instagram 图像或将上述内容转换为使用 json/php 发布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:13:24.927

也许您可以使用[Instagram-PHP-API](https://github.com/cosenary/Instagram-PHP-API)包装器。[您可以在此页面](https://gist.github.com/3287237)
上找到如何“喜欢”图像的示例。 另请查看[Instagram 类的](https://github.com/cosenary/Instagram-PHP-API/blob/master/instagram.class.php)[_makeCall](https://github.com/cosenary/Instagram-PHP-API/blob/master/instagram.class.php#L329)方法，了解如何使用[PHP cURL](http://php.net/manual/en/book.curl.php)函数进行 API 调用并解析 json 响应的示例。

# c++ - 更简洁的 C++ 版本可能吗？

> ID：12762597
> 
> 赞同：1
> 
> 时间：2012-10-06T18:30:16.717
> 
> 标签：c++, stl

我只是写了一些C++代码，大致如下：—</p>

```
int i;
string out;
map<char, string>::const_iterator it;

for (i = 0; i < inp.size(); ++i) {
    it = mydict.find(inp[i]);
    if (it != mydict.end())
        out += mydict[inp[i]];
    else
        out += inp[i];
} 
```

我没有写很多 C++ 代码，我正在寻找改进的建议。我尝试了以下操作，但出现`incompatible operand types ('mapped_type' (aka 'std::basic_string<char>') and 'char')`错误：

```
int i;
string out;
map<char, string>::const_iterator it;

for (i = 0; i < inp.size(); ++i) {
    it = mydict.find(inp[i]);
    out += (it != mydict.end() ? mydict[inp[i]] : inp[i]);
} 
```

有什么建议可以纠正上述错误吗？或者有什么更好的编码方式的建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T18:49:03.270

在 C++11 中，您可以简化循环结构本身：

```
for (char c: inp) {
    auto it = mydict.find(c);
    it != mydict.end() ? out += it->second : out += c; // little known use ;)
} 
```

除此之外，我建议您使用而不是再次`it->second`执行查找。`c`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:38:11.010

您需要确保条件赋值运算符的两个选项返回相同的类型。试试这个将字符 inp[i] 更改为字符串：

```
out += (it != mydict.end() ? mydict[inp[i]] : string(1, inp[i])); 
```

# jquery - 动态添加按钮（jquery）

> ID：12762598
> 
> 赞同：0
> 
> 时间：2012-10-06T18:30:24.630
> 
> 标签：jquery

我想用 jquery 和 Ajax 进行分页。我遇到的第一个问题是如何添加按钮

```
<div class="btn-group" id="pagination_group">
        <button class="btn" disabled="disabled">First</button>
        <button class="btn" disabled="disabled">Prev</button>
        <button class="btn btn-primary" id="p1">1</button>
        <button class="btn" id="p2">2</button>
        <button class="btn" id="p3">3</button>
        <button class="btn" id="p4">4</button>
        <button class="btn" id="p5">5</button>
        <button class="btn" id="next">Next</button>
        <button class="btn" id="last">Last</button>
    </div> 
```

append() 的东西？但是如何把它放在正确的地方呢？这个想法是在单击 Next 删除 id="p1" 的 btn 之后（没问题）并在 button5 和按钮 Next 之间添加 id="p6" 的按钮。

感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:33:23.060

```
$("#next").click(function(){
    $("#p1").remove();
    $("#next").before($('<button class="btn" id="p6">6</button>'));
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:45:31.617

可能有几种方法来实现这一点。请参阅此[工作示例](http://jsfiddle.net/Ey6ww/5/)

# ada - Ada：其中一部分案例共享共同属性的变体记录

> ID：12762603
> 
> 赞同：2
> 
> 时间：2012-10-06T18:30:54.097
> 
> 标签：ada

我有以下代码，我只希望前两种情况共享一个公共属性；但是，`"id" conflicts with the declaration at line 11`当我尝试使用此语法时出现错误：

```
 type Shape (Which : Shape_Type := SQUARE) is
      record
      case Which is
         when Square =>
            id : Natural;   -- Line 11
         when Turnout =>
            id : Natural;   -- Line that causes error to be thrown
         when Invalid =>
            null;
      end case;
      end record; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T19:32:20.860

这：

```
type Shape (Which : Shape_Type := SQUARE) is
   record
      case Which is
         when Square | Turnout =>
            id : Natural;
         when Invalid =>
            null;
      end case;
   end record; 
```

如果您以后希望`Turnout`case 有一个额外的属性，您可以使用嵌套来做到这一点`case`（但您仍然必须涵盖所有替代方案）：

```
type Shape (Which : Shape_Type := SQUARE) is
   record
      case Which is
         when Square | Turnout =>
            id : Natural;
            case Which is
               when Square =>
                  null;
               when Turnout =>
                  Deg : Natural;
               when Invalid =>
                  null;
            end case;
         when Invalid =>
            null;
      end case;
   end record; 
```

# asp.net - 带有键的填充网格视图如何来自会话

> ID：12762604
> 
> 赞同：0
> 
> 时间：2012-10-06T18:31:14.090
> 
> 标签：asp.net, .net, arraylist

我想创建一个在线商店网站。

我创建了一个数据列表，在我的网站中显示我的产品，我将 LinkBut​​ton 放在我的数据列表中，以获取用户选择的产品的 productID 并将其添加到购物车。

```
 <asp:LinkButton ID="LinkButton1" runat="server" Text="Add To Cart" CommandName="addtocart" CommandArgument='<%# Eval("id")%>' > 
```

当用户单击链接按钮时，会触发此事件：

```
protected void theDataList_ItemCommand(object source, DataListCommandEventArgs e)
{
//this add the selected product-id to the list<int> and put it in the 
//  session["addtocart"]
        if (e.CommandName == "addtocart")
        {                                 
            int productid = Convert.ToInt32(e.CommandArgument);
            Label6.Text = productid.ToString();

            List<int> productsincart = (List<int>)Session["addtocart"];
            if (productsincart == null)
            {
                productsincart = new List<int>();
            }

            productsincart.Add(productid);

            Session["addtocart"] = productsincart;
} 
```

之后当用户点击文本为“显示购物车”的按钮时，用户将看到shoppingcart.aspx页面

```
 Response.Redirect("shoppingcart.aspx"); 
```

在此页面中，我有一个 gridview，我想将其绑定到 session["addtocart"]; 当页面加载 gridview 时，会显示其 id 在 session["cart"] 中的所选产品，但它不起作用并且发生此错误：System.InvalidCastException：对象必须实现 IConvertible。

这是相关代码：

```
 <asp:GridView ID="GridView3" runat="server"  
            DataSourceID="SqlDataSource1"   >

           <columns>
            <asp:BoundField DataField="id" HeaderText="id" SortExpression="id" />
            <asp:BoundField DataField="name" HeaderText="post" SortExpression="post" />
            <asp:BoundField DataField="price" HeaderText="salary" 
                SortExpression="salary" />
            <asp:BoundField DataField="color" HeaderText="years" SortExpression="years" />

        </columns>

    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:employeeConnectionString4 %>" 
        SelectCommand="SELECT * FROM [products] WHERE ([productid] = @productid)">
        <SelectParameters>
            <asp:SessionParameter DefaultValue="7" Name="cart" SessionField="cart" 
                Type="Int32" />
        </SelectParameters> 
```

我知道问题与 GridView3 和 Session["addtocart"] 有关，我认为 GridView3 无法将存储在 Session["addtocart"] 中的整数列表对象的值转换为整数，似乎我的错误来自从会话对象到整数列表的转换，但如果有人帮助我，我不知道如何解决这个问题，我变得非常感激。

The Session["cart"] 中的对象是一个整数列表，其中包含用户选择购买的产品 ID 列表。它给了我这个错误：

对象必须实现 IConvertible。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidCastException：对象必须实现 IConvertible。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[InvalidCastException: Object must implement IConvertible.]
System.Convert.ChangeType(Object value, TypeCode typeCode, IFormatProvider provider)   +2880621
System.Web.UI.WebControls.Parameter.GetValue(Object value, String defaultValue, TypeCode type, Boolean convertEmptyStringToNull, Boolean ignoreNullableTypeChanges) +141
System.Web.UI.WebControls.Parameter.GetValue(Object value, Boolean ignoreNullableTypeChanges) +63
System.Web.UI.WebControls.ParameterCollection.GetValues(HttpContext context, Control control) +301
System.Web.UI.WebControls.SqlDataSourceView.InitializeParameters(DbCommand command, ParameterCollection parameters, IDictionary exclusionList) +264
System.Web.UI.WebControls.SqlDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) +472
System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) +19
System.Web.UI.WebControls.DataBoundControl.PerformSelect() +142
System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +73
System.Web.UI.WebControls.GridView.DataBind() +4
System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +82
System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls() +72
System.Web.UI.Control.EnsureChildControls() +87
System.Web.UI.Control.PreRenderRecursiveInternal() +44
System.Web.UI.Control.PreRenderRecursiveInternal() +171
System.Web.UI.Control.PreRenderRecursiveInternal() +171
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +842 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:17:57.103

The problem is in your Sql Parameter. It can't cast type `List<int>` into Int32 as you're trying to do. And it looks like the List object does not implement iConvertible anyway, so you'll need a different approach.

I don't normally use SqlDataSource as you are doing, but here is a way you can build the proper syntax for the query you want:

Update your markup to this:

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:employeeConnectionString4 %>" /> 
```

Then on Page_Load, build your connection string like this:

```
public void Page_Load(object sender, EventArgs e)
{
    this.SqlDataSource1.SelectCommand = String.Format("SELECT * FROM [products] WHERE [productid] in ({0}))", GetInValues(Session["cart"] as List<int>));
}
public string GetInValues(List<int> lst)
{
    System.Text.StringBuilder sValues = new System.Text.StringBuilder();
    if (i == null)
        sValues.Append(0);
    else
    {
        foreach (int i in lst)
        {
            if (sValues.Length > 0)
                sValues.Append(", ");
            sValues.Append(i);
        }
    }
    return sValues.ToString();
} 
```

Like I said, there may be a way to do this in the Markup, but it's not something I'm familiar with.

You could also create a class that inherits List and implement iCovertible, but I can't think of a way that's going to work as a SqlParameter. Plus the iConvertible interface is like 15 functions if I remember correctly, so it seems like a lot of work for just this one instance.

# javascript - <* text-align:justify *> 功能 用于 div（框）

> ID：12762605
> 
> 赞同：0
> 
> 时间：2012-10-06T18:31:18.607
> 
> 标签：javascript, html, css

我有很多不同尺寸的盒子；尺寸未知。我想使用与`text-align:justify`单词相同的 CSS 规范。例如：

![在此处输入图像描述](../Images/ab4245dba03623f6b79669cf23e2c9bd.png)

我想有一个 CSS 或 CSS3 的解决方案。如果不可能，JS 是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:59:40.623

**可能的 CSS 解决方案**

如果这些框设置为`display:inline-block`，您可以`text-align:justify`像处理文本一样应用。但是请注意，这`text-align:justify`对文本的最后一行没有任何影响。因此，如果只有一条线需要被证明是合理的，那么什么都不会发生。

如果您可以修改 HTML，则一种解决方法是添加一个 100% 宽度的尾随元素，以确保您要证明的内容不是最后一行。如果您无法修改源 HTML，则可以使用 JavaScript 附加尾随元素。

这是一个展示这一点的[jsfiddle](http://jsfiddle.net/Matt_Coughlin/ne7xR/4/)。在 IE6/7/8/9、Firefox、Chrome、Safari 中测试。（注意：必须`&nbsp;`在框之间添加一个才能使其在 IE6/7 中工作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T21:51:09.237

这是一个小例子：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style type="text/css">
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        #container {
            width: 500px;
            margin: 0 auto;
            font-size: 0; /* Fixed space caused by line breaks */
        }
        #container .inner {
            display: inline-block;
            background: red;
            width: 25%;
            border: 10px rgba(255,255,255,1) solid;
            padding: 5px;
            text-align: center;
            font-size: 16px;
        }
    </style>
</head>
<body>

<div id="container">
    <div class="inner">Lorem</div>
    <div class="inner">Ipsum</div>
    <div class="inner">Dolor</div>
    <div class="inner">Sit</div>
</div>

</body>
</html> 
```

这被认为是轻微作弊。我使用白色边框作为元素之间的边距。仅当您在父项上有纯色背景时，它才能正常工作。

### 注意事项：

*   `box-sizing: border-box`在所有元素上，确保`width: 25%`包括内边距和边框。
*   使用白色边框来模拟边距的效果。
*   `font-size: 0`在父级和子级上使用`font-size: 16px`，消除了由内联块元素之间的换行符引起的空白。

# jquery - 单击正文时隐藏 div 无法正常工作

> ID：12762607
> 
> 赞同：0
> 
> 时间：2012-10-06T18:31:27.803
> 
> 标签：jquery

这是一个愚蠢的问题，但我想不通，说我有两个 div：

```
<div class="one"></div>
<div class="two"></div> 
```

div 1 是一个按钮，div 2 是一个盒子。

现在，当我单击 div 时，`one`div`two`应该是可见的（默认情况下不可见）

当我再次单击 div`one`时，div`two`消失了，依此类推...

这是我的代码：

```
$(".one").live("click", function(){
    state = $(this).attr("state");

    if(state == "active"){
        $(this).attr("state", "inactive");
        $(".two").css("display", "none");
    }else{
        $(this).attr("state", "active");
        $(".two").css("display", "block");
    }
}); 
```

`two`现在我的问题是，当我单击页面中的任何位置时，我也希望 div消失，所以这就是我所做的：

```
$(document).click(function(){
     $(".one").attr("state", "inactive");
     $(".two").css("display", "none");
}); 
```

现在发生的事情可能是在单击 div 之后发生文档上的单击事件，并且它不允许我打开框。

我知道的一种解决方案是检查是否`(event.target.className != "one")`但我真的想避免这种情况，因为在我的实际项目中，我在该按钮中有很多其他元素，所以我需要包括所有这些元素，我想避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:37:10.853

`return false;`从绑定的`.live()`处理程序。您想停止事件传播，这就是打破实时事件链（已经冒泡）的方法。

# php - 如何将 PHP 变量获取到 AJAX？

> ID：12762609
> 
> 赞同：2
> 
> 时间：2012-10-06T18:31:35.917
> 
> 标签：php, jquery, ajax, server-side-scripting

我不认为我在单独的 PHP 和 AJAX 文件之间以正确的方式传递变量。

我通过触发`$status = 'info';`我的 PHP 文件中的第二个条件来调试它。

目前，`status`即将出现“未定义”`alert(data.status);`

注册进程.php

```
if (condition){

   $status = 'success';

else {

    $status = 'info';

    } 
```

AJAX

```
function send() {
var data = $('#signup_form').serialize();
    $.ajax({
        type: "POST",
        url: "signup_process.php",
        data: data,
        success: function (data) {
        alert(data.status);
            if (data.status == 'success') {
                // everything went alright, submit
                $('#signup_form').submit();
            } else if (data.status == 'info')
            {
                console.log(data.status);
                $("label#email_error").show(); 
                return false; 
            }
        }
    });
    return false;
}; 
```

我知道第二个条件正在被触发，因为我在那里放置了一个标头重定向只是为了测试并且它工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T18:44:39.543

在将数据从 php 返回到 ajax 时使用**json很好。**

```
$return_data = array();
if (condition){
   $return_data['status'] = 'success';
} else {
    $return_data['status'] = 'info';
}

echo json_encode($return_data);
exit(); 
```

现在，如果您要将 json 数据返回给 ajax，那么您需要在ajax调用中**指定返回数据类型，如下所示**

```
function send() {
var data = $('#signup_form').serialize();
    $.ajax({
        type: "POST",
        url: "signup_process.php",
        data: data,
        dataType: 'json', 
        success: function (data) {
        alert(data.status);
            if (data.status == 'success') {
                // everything went alright, submit
                $('#signup_form').submit();
            } else if (data.status == 'info')
            {
                console.log(data.status);
                $("label#email_error").show(); 
                return false; 
            }
        }
    });
    return false;
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T18:35:25.050

您应该从 php 发回一个 JSON 对象：

```
$data = array();
if (condition){
   $data['status'] = 'success';
else {
   $data['status'] = 'info';
}

header('Content-type: application/json');
echo json_encode($data); 
```

[json_encode()](http://php.net/manual/en/function.json-encode.php)方法将数组转换为 JSON 对象，因此您可以在 js 端按名称访问每个数组键。

# java - 计算没有变量的递归调用

> ID：12762612
> 
> 赞同：-5
> 
> 时间：2012-10-06T18:31:55.653
> 
> 标签：java

是否可以计算没有变量的递归深度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:43:16.153

在java中，

```
Thread.currentThread().getStackTrace() 
```

可用于确定调用深度。递归调用的数量是堆栈长度和第一帧位置之间的差异。

或抛出异常，然后从最顶层的函数中检索堆栈：

```
Throwable.getStackTrace() 
```

> 返回堆栈跟踪元素的数组，每个元素代表一个堆栈帧。数组的第零个元素（假设数组的长度不为零）表示堆栈的顶部，这是序列中的最后一个方法调用。通常，这是这个 throwable 被创建和抛出的点。数组的最后一个元素（假设数组的长度不为零）表示堆栈的底部，这是序列中的第一个方法调用。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Throwable.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Throwable.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:38:53.413

你在寻找这样的东西吗？

```
public int foo(int count) {
    if (exitCondition) return count; 
    foo(count+1);
} 
```

计算调用的其他方法将涉及反射或使用字节码修改库（即 AoP）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:00:13.030

你的问题非常模糊，所以我做了几个假设：

1.  “递归调用次数”是指“递归深度”
2.  函数的原始调用者想知道深度，所以递归方法返回它
3.  通过“无变量”，这意味着您甚至不能使用局部变量来跟踪深度

因此，如果您使用某种随机方法并调用递归函数：

```
public void randomMethod() {
    Something somethingToRecurseOn = ... ;
    int depth = recurse(somethingToRecurseOn);
} 
```

这是我的解决方案的预期用途。这是`recurse`方法：

```
public int recurse(Something s) {
    Something subS = s.getSubS();
    if (subS == null) { // Exit condition
        return 1;
    }
    // Do something with subS
    return recurse(subS) + 1;
} 
```

您将深度集成到函数的返回值中，并为退出条件假设深度为 1。

这实际上与我过去问过的一个面试问题有关，您必须在递归序列中返回元素的数量，签名是：

```
public int collatz(int n) 
```

`n`您正在操作以查找序列的下一个数字的数字在哪里，该数字在 1 处停止。如果它是用递归而不是迭代实现的，它本质上会返回递归深度。

# iphone - 如何将触摸的标签文本传递给手势识别器选择器方法

> ID：12762613
> 
> 赞同：0
> 
> 时间：2012-10-06T18:31:58.263
> 
> 标签：iphone, objective-c, ios, uitableview, uigesturerecognizer

我有一个 UITableView 并且我正在为单元格使用 UITableViewCell 类。在单元格内，我使用标签来显示公司数据。

我需要的是当用户点击公司标题时在浏览器中打开公司网站，或者当用户点击显示的电子邮件地址时打开邮件应用程序（但当用户触摸单元格的任何其他部分时不会发生任何事情）。

除了一件“小”事情外，我在技术上一切正常（手势识别器、打开 Safari 和邮件等）。我不知道如何将这些 url（网络或电子邮件）传递给 touchrecognizer 选择器方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T07:03:19.177

```
- (void)tapAction:(UITapGestureRecognizer *)tap {
UILabel *currentLabel = (UILabel *) tap.view;
NSString *labelText= currentLabel.text;
   } 
```

你可以试试这个..这对我有用！！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T19:01:04.887

我认为您可以在表格视图中获取点击位置，并进一步获取该位置的 indexPath。

```
- (void) handleGestureRecognizer:(UIGestureRecognizer *)recognizer {
    CGPoint tapPoint = [recognizer locationInView:self.tableView];
    NSIndexPath * indexPath = [self.tableView indexPathForRowAtPoint:self.tableView];
    // Do whatever you want with indexPath.section, indexPath.row information
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T06:50:04.213

由于您的数据是静态的，您可以在公司标题标签上放置一个不可见的按钮。

并在动作中为每个按钮添加一个等于 rowAtIndexPath 的标签。

这里你的 int tag=button.tag;

现在，如果您在数组中获取您的网站链接，那么：

在按钮操作中获取链接为

```
NSString *urlString=[websteArray objectAtIndex:tag];
                    OR
NSString *urlString=[NSString stringWithFormat:@"http://%@",[websteArray objectAtIndex:indexPath.row]];

NSLog(@"the strurl is %@",urlString);

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:urlString]]; 
```

# ide - ⎋键是什么

> ID：12762616
> 
> 赞同：6
> 
> 时间：2012-10-06T18:32:42.530
> 
> 标签：ide, intellij-idea

我是 IntelliJ 的新手，我看到一个启动提示说：“任何工具窗口中的 ⎋ 键都会将焦点移至编辑器。” 但是，我不知道 ⎋ 键是什么。我已经编程很长时间了。这些年来我的键盘上是否有一个键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T18:42:21.900

`⎋</kbd> relates to **Escape** on Macintosh keyboards. [Here is some documentation showing such.](http://guides.macrumors.com/Image:224px-Mac_keyboard_symbols.jpg)`

# c# - 如何获取 DevExpress XtraGrid 的选定行值？

> ID：12762617
> 
> 赞同：18
> 
> 时间：2012-10-06T18:32:42.093
> 
> 标签：c#, winforms, devexpress, xtragrid

考虑下图

![在此处输入图像描述](../Images/f54992472415ecee025d5fc8e712f9d2.png)

当我使用以下代码单击单元格时，我在图中所示的三个文本框中获得了选定的行值。

```
void dataGridView1_CellClick_1(object sender, DataGridViewCellEventArgs e) {
    TBGRNo.Text = dataGridView1.Rows[e.RowIndex].Cells[0].Value.ToString();
    TBSName.Text = dataGridView1.Rows[e.RowIndex].Cells[1].Value.ToString();
    TBFName.Text = dataGridView1.Rows[e.RowIndex].Cells[2].Value.ToString();
} 
```

我的问题是：我将如何在 DevExpress XtraGrid 控件中做同样的事情？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-15T16:52:11.427

这是我遵循的方式，

```
int[] selRows = ((GridView)gridControl1.MainView).GetSelectedRows();
DataRowView selRow = (DataRowView)(((GridView)gridControl1.MainView).GetRow(selRows[0]));
txtName.Text = selRow["name"].ToString(); 
```

您还可以使用 selRows 数组遍历选定的行。这里的代码描述了如何只从第一个选定的行获取数据。您可以插入这些代码行来单击网格的事件。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-08T07:52:52.360

您可以通过多种方式做到这一点。您可以使用数据绑定（通常在 InitializeComponent(); 之后初始化）

```
textBox1.DataBindings.Add(new Binding("Text", yourBindingSource, 
                    "TableName.ColumnName", true, DataSourceUpdateMode.OnPropertyChanged)); 
```

或者使用 DataLayoutControl （如果你打算使用文本框进行编辑，我真的建议花一些时间来学习如何使用这个组件。

或在 FocusedRowChanged 中通过以下方法之一进行分配：

```
textBox1.Text = gridView1.GetDataRow(e.FocusedRowHandle)["Name"].ToString();
textBox1.Text = gridView1.GetFocusedDataRow()["Name"].ToString();
textBox1.Text = (gridView1.GetFocusedRow() as DataRowView).Row["Name"].ToString();
textBox1.Text = gridView1.GetFocusedRowCellValue("Name").ToString(); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-07T19:33:43.533

我发现解决方案如下：

```
private void gridView1_RowCellClick(object sender, DevExpress.XtraGrid.Views.Grid.RowCellClickEventArgs e)
{
    TBGRNo.Text = gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "GRNo").ToString();
    TBSName.Text = gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "SName").ToString();
    TBFName.Text = gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "FName").ToString();            
} 
```

![在此处输入图像描述](../Images/69fcc6f9b25dcbf1150e846a0863be17.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-07T16:13:31.680

您使用的是他们的哪一个网格？XtraGrid 还是 AspXGrid？这是从我的一个使用 XtraGrid 的应用程序中截取的片段。

```
private void grdContactsView_RowClick(object sender, DevExpress.XtraGrid.Views.Grid.RowClickEventArgs e)
{
    _selectedContact = GetSelectedRow((DevExpress.XtraGrid.Views.Grid.GridView)sender);
}

private Contact GetSelectedRow(DevExpress.XtraGrid.Views.Grid.GridView view)
{
    return (Contact)view.GetRow(view.FocusedRowHandle);
} 
```

我的网格有一个绑定到它的联系人对象列表。每次单击一行时，我都会将选定的行加载到 _selectedContact 中。希望这可以帮助。您会在访问他们的支持和文档网站时找到很多关于使用他们的控件的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-14T16:25:49.407

对于 VB.Net

```
CType(GridControl1.MainView, GridView).GetFocusedRow() 
```

对于 C#

```
((GridView)gridControl1.MainView).GetFocusedRow(); 
```

示例通过 linq 绑定数据所以使用

```
Dim selRow As CUSTOMER = CType(GridControl1.MainView, GridView).GetFocusedRow() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-05T04:12:01.910

您所要做的就是使用gridView 控件的**GetFocusedRowCellValue**方法并将其放入RowClick 事件中。

例如：

```
private void gridView1_RowClick(object sender, DevExpress.XtraGrid.Views.Grid.RowClickEventArgs e)
{
    if (this.gvCodigoNombres.GetFocusedRowCellValue("EMP_dni") == null)
        return;
    MessageBox.Show(""+this.gvCodigoNombres.GetFocusedRowCellValue("EMP_dni").ToString());            
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-01-05T16:07:05.190

```
var rowHandle = gridView.FocusedRowHandle;

var obj = gridView.GetRowCellValue(rowHandle, "FieldName");

//For example  
int val= Convert.ToInt32(gridView.GetRowCellValue(rowHandle, "FieldName")); 
```

# javascript - 计算机挂起在浏览器中运行此 javascript 代码

> ID：12762623
> 
> 赞同：1
> 
> 时间：2012-10-06T18:33:34.613
> 
> 标签：javascript

我试图在 JavaScript 中创建一个函数以进行练习，但以下代码似乎没有正确执行或在浏览器中没有按预期执行。浏览器只是一直显示忙碌的标志，而计算机实际上是挂起的。任何人都可以帮我解决thius 代码或问题所在：

```
function recluse() {
  return " It is\ncalled Data.\n\nData is made of merely bits, yet it takes complex forms. Control\nconsists only of simple instructions, yet it performs difficult\ntasks. From the small and trivial, the large and complex arise.\n\nThe program source is Data. Control arises from it. The Control\nproceeds to create new Data. The one is born from the other, the\nother is useless without the one. This is the harmonious cycle of\nData and Control.\n\nOf themselves, Data and Control are without structure. The programmers\nof old moulded their programs out of this raw substance. Over time,\nthe amorphous Data has crystallised into data types, and the chaotic\nControl was restricted into control structures and functions.\n\n%% Short Sayings\n\nWhen a student asked Fu-Tzu about the nature of the cycle of Data and\nControl, Fu-Tzu replied 'Think of a compiler, compiling itself.'\n\nA student asked 'The programmers of old used only simple machines and\nno programming languages, yet they made beautiful programs. Why do we\nuse complicated machines and programming languages?'. Fu-Tzu replied\n'The builders of old used only sticks and clay, yet they made\nbeautiful huts.'\n\nA hermit spent ten years writing a program. 'My program can compute\nthe motion of the stars on a 286-computer running MS DOS', he proudly\nannounced. 'Nobody own a 286-computer or uses MS DOS anymore.', Fu-Tzu\nresponded.\n\nFu-Tzu had written a small program that was full of global state and\ndubious shortcuts. Reading it, a student asked 'You warned us against\nthese techniques, yet I find them in your program. How can this be?'\nFu-Tzu said 'There is no need to fetch water hose when the house is\nnot on fire.'{This is not to be read as an encouragement of sloppy\nprogramming, but rather as a warning against neurotic adherence to\nrules of thumb.}\n\n%% Wisdom\n\nA student was complaining about digital numbers. 'When I take the root\nof two and then square it again, the result is already inaccurate!'.\nOverhearing him, Fu-Tzu laughed. 'Here is a sheet of paper. Write down\nthe precise value of the square root of two for me.'\n\nFu-Tzu said 'When you cut against the grain of the wood, much strength\nis needed. When you program against the grain of a problem, much code\nis needed.'\n\nTzu-li and Tzu-ssu were boasting about the size of their latest\nprograms. 'Two-hundred thousand lines', said Tzu-li, 'not counting\ncomments!'. 'Psah', said Tzu-ssu, 'mine is almost a *million* lines\nalready.' Fu-Tzu said 'My best program has five hundred lines.'\nHearing this, Tzu-li and Tzu-ssu were enlightened.\n\nA student had been sitting motionless behind his computer for hours,\nfrowning darkly. He was trying to write a beautiful solution to a\ndifficult problem, but could not find the right approach. Fu-Tzu hit\nhim on the back of his head and shouted '*Type something!*' The student\nstarted writing an ugly solution. After he had finished, he suddenly\nunderstood the beautiful solution.\n\n%% Progression\n\nA beginning programmer writes his programs like an ant builds her\nhill, one piece at a time, without thought for the bigger structure.\nHis programs will be like loose sand. They may stand for a while, but\ngrowing too big they fall apart{Referring to the danger of internal\ninconsistency and duplicated structure in unorganised code.}.\n\nRealising this problem, the programmer will start to spend a lot of\ntime thinking about structure. His programs will be rigidly\nstructured";
}

var para=recluse().split("\n\n");
function reduce(func,length,array)
{
    array.forEach(function(c)
                           {
                               length=func(length,c);
                           });
    return length;
}

<!---TOP LEVEL FUNCTION FOR PROCESSING A VALUE WITH A FUNCTION AND CREATING  AN ARRAY OF TH RESULTS------------>

function map(func,array)
{
    var result_array=[];

    array.forEach(function(c)
                           {
                               result_array.push(func(c));
                           });
   return result_array;
}

<!-------------THE ALGORITHM FOR FINDING THE EMPHASISED TEXT AND THE FOOTNOTES WITHIN THE TEXT---->

function fragmenter(text)
{
                var fragments=[];

                function indexing(char)
                {
                    var index=text.indexOf(char);
                    if(index==-1)
                    {
                        return text.length;
                    }
                    else
                    return index;
                }

                function ifAtStart(char)
                {
                    var end=(char,1);
                       if(end==-1)
                       {
                           throw Error("No enclosing "+char);
                       }
                    var part=text.slice(1,end);
                    text=text.slice(end+1);
                    return part;
                }

                function normalText(text)
                {
                    var end=reduce(Math.min,text.length,map(indexing,["*","{"]));//to check that the index is within the text only
                    var part=text.slice(0,end);
                    var text=text.slice(end);
                    return part;
                }

                while(text!="")        <!---4------> 
                {
                    if(text.charAt(0)=="*")
                    {
                        fragments.push({type:"emphasised",
                                       content:isAtFirst("*")});
                    }
                    else if(text.charAt(0)=="{")
                    {
                        fragments.push({type:"footnotes",
                                       content:isAtFirst("}")});
                    }
                    else
                    {
                        fragments.push({type:"Normal",
                                       content:normalText(text)});
                    }
                }
return fragments;               
}

console.log(fragmenter(para[1])); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T18:35:14.923

那里 ：

```
while(text!="")
{
     // some code that doesn't change "text"
} 
```

循环中的文本无法更改，因此您的代码无法完成。

如果您尝试遍历字符，您可以这样做：

```
for (var i=0; i<text.length; i++) {
     if (text.charAt(i)=="*") 
```

但是我想知道您是否错过了这样一个事实，即当您调用 时`normalText(text)`，该`normalText`函数无法更改它拥有的变量，而只能更改它自己的变量。您必须共享文本。一个解决方案是这样的：

```
 function normalText() // REMOVED text SO IT USES THE ONE OF THE ENCLOSING SCOPE
            {
                var end=reduce(Math.min,text.length,map(indexing,["*","{"]));//to check that the index is within the text only
                var part=text.slice(0,end);
                var text=text.slice(end);
                return part;
            }

 while(text!="")        
            {
                if(text.charAt(0)=="*")
                {
                    fragments.push({type:"emphasised",
                                   content:isAtFirst("*")});
                }
                else if(text.charAt(0)=="{")
                {
                    fragments.push({type:"footnotes",
                                   content:isAtFirst("}")});
                }
                else
                {
                    fragments.push({type:"Normal",
                       content:normalText()}); // REMOVED PASSING TEXT
                }
            } 
```

# android - 如果调用 requestLocationUpdates 来获取用户的新位置，应用程序会崩溃

> ID：12762624
> 
> 赞同：1
> 
> 时间：2012-10-06T18:33:38.340
> 
> 标签：android, gps, xamarin.android

我正在使用 MonoDroid 平台开发 android 应用程序。这个应用中有两个模块，一个是司机模块，一个是乘客模块。每当乘客预订出租车时，他/她将能够在地图上查看出租车的位置。

在驱动模块中，我实现了两个类，一个是 GPSTracker 类，另一个是 NorthStarBackgroundService 类。（下面给出的代码）。

NorthStarBackgroundService 上名为 UpdatePosition 的方法负责更新数据库中的驾驶员位置，乘客模块从中获取坐标并在地图中显示驾驶员位置。方法 UpdatePosition 从实现 ILocationListener 的 GPSTracker 类中获取驱动程序的坐标。

正如您在代码中看到的，我已注释掉 RequestLocationUpdates。每当我在没有注释掉那行代码的情况下运行应用程序时，我的应用程序就会崩溃。但是当我用注释运行它时它不会崩溃。我不知道这个问题。驱动程序移动时位置也不会更新。

可能熟悉单机器人环境的人，请帮我解决这个问题。我试图解决这个问题已经 5 天了，但我无法做到。

我使用网络提供商只是为了获得粗略的位置。如果这个工作完美，我将扩展到 Gps 提供商。

**GPSTracker 的代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.Locations;
using Java.IO;

namespace NorthStar.Driver
{
    public class GPSTracker : Service, ILocationListener

    {

        public readonly Context mContext;

       // flag for network status
        Boolean isNetworkEnabled = false;

        Location location; // location
        public double latitude; // latitude
        public double longitude; // longitude

        public LocationManager locationManager;

        public GPSTracker(Context context)
        {
            this.mContext = context;
            getLocation();

        }

        public Location getLocation()
        {
            locationManager = (LocationManager)mContext.GetSystemService(Context.LocationService);

            // getting network status
            isNetworkEnabled = locationManager.IsProviderEnabled(LocationManager.NetworkProvider);

            if (isNetworkEnabled)
            {
                // locationManager.RequestLocationUpdates(LocationManager.NetworkProvider, 1000, 10, this);

                if (locationManager != null)
                {
                    location = locationManager.GetLastKnownLocation(LocationManager.NetworkProvider);
                    if (location != null)
                    {
                        latitude = location.Latitude;
                        longitude = location.Longitude;
                    }
                }
            }

            return location;
        }

        /**
        * Function to get latitude
        * */
        public double getLatitude()
        {

            latitude = location.Latitude;
            // return latitude

            return latitude;
        }

        /**
         * Function to get longitude
         * */
        public double getLongitude()
        {
            latitude = location.Longitude;
            // return latitude

            return longitude;           
        }

        public void OnLocationChanged(Location location)
        {
        }

        public void OnProviderDisabled(String provider)
        {
        }

        public void OnProviderEnabled(String provider)
        {
        }

        public void OnStatusChanged(string provider, Availability status, Bundle extras)
        {
        }

        public override IBinder OnBind(Intent arg0)
        {
            return null;
        }

    }
} 
```

**NorthStarBrackgroundService 的代码**

UpdatePosition 每 20 秒调用一次，因为为此设置了计时器。我已经创建了 GPSTracker 类的对象并设置了发送到数据库的纬度和经度的值。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using Android.App;
using Android.Content;
using Android.OS;
using Android.Preferences;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using NorthStar.Driver.Application;
using TheNorthStar.Api.Requests;
using TheNorthStar.Api.Results;

namespace NorthStar.Driver
{
    [Service]
    public class NorthStarBackgroundService : Service
    {
        private string driverId;
        private System.Timers.Timer timer;

        public override IBinder OnBind(Intent intent)
        {
            return null;
        }

        public override void OnCreate()
        {
            base.OnCreate();
            timer = new System.Timers.Timer(20000);
            timer.Elapsed += TimerElapsed;              
        }

        void TimerElapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            ThreadPool.QueueUserWorkItem(UpdatePosition);
        }

        public override void OnStart(Intent intent, int startId)
        {
            base.OnStart(intent, startId);

            driverId = intent.GetStringExtra("driverId");

            timer.Start();
        }

        public override void OnDestroy()
        {
            base.OnDestroy();
            timer.Stop();
        }

        private void UpdatePosition(object data)
        {

            ConnectToSever api = new ConnectToSever(Helper.GetServer(ApplicationContext));

            GPSTracker gps = new GPSTracker(ApplicationContext);

            var pos = new DriverPosition() { Latitude = gps.latitude, Longitude = gps.longitude, DriverId = driverId };
            try
            {
                api.UpdatePosition(pos);
            }
            catch
            {
                Android.Util.Log.Info("EXC_update1", "update driver failed");
            }
        }
    }
} 
```

我不知道哪一点出错导致应用程序崩溃。对此的任何提示将不胜感激。

**日志猫输出**

```
I/EXC_logstart(  306): **************** starting driver module ****************
I/ActivityManager(   60): Displayed activity MyDriver_Driver.MyDriver_Driver/northstar.driver.Activity1: 6632 ms (total 6632 ms)
D/dalvikvm(  128): GC_EXPLICIT freed 201 objects / 9848 bytes in 188ms
D/dalvikvm(  120): GC_EXTERNAL_ALLOC freed 3163 objects / 207880 bytes in 144ms
D/dalvikvm(  120): GC_EXTERNAL_ALLOC freed 935 objects / 60072 bytes in 172ms
W/KeyCharacterMap(  306): No keyboard for id 0
W/KeyCharacterMap(  306): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
I/ARMAssembler(   60): generated scanline__00000077:03515104_00000000_00000000 [ 33 ipp] (47 ins) at [0x3bce60:0x3bcf1c] in 8041202 ns
I/ActivityManager(   60): Starting activity: Intent { cmp=MyDriver_Driver.MyDriver_Driver/northstar.driver.MainActivity (has extras) }
I/ActivityManager(   60): Displayed activity MyDriver_Driver.MyDriver_Driver/northstar.driver.MainActivity: 1216 ms (total 1216 ms)
E/mono    (  306): 
E/mono    (  306): Unhandled Exception: Java.Lang.NullPointerException: Exception of type 'Java.Lang.NullPointerException' was thrown.
E/mono    (  306):   at Android.Runtime.JNIEnv.CallNonvirtualObjectMethod (IntPtr jobject, IntPtr jclass, IntPtr jmethod, Android.Runtime.JValue[] parms) [0x00000] in <filename unknown>:0 
E/mono    (  306):   at Android.Content.ContextWrapper.GetSystemService (System.String name) [0x00000] in <filename unknown>:0 
E/mono    (  306):   at NorthStar.Driver.GPSTracker.getLocation () [0x00000] in <filename unknown>:0 
E/mono    (  306):   at NorthStar.Driver.GPSTracker..ctor (Android.Content.Context context) [0x00000] in <filename unknown>:0 
E/mono    (  306):   at NorthStar.Driver.MainActivity.RequestWork () [0x00000] in <filename unknown>:0 
E/mono    (  306):   at NorthStar.Driver.MainActivity.<OnCreate>b__2 (System.Object x) [0x00000] in <filename unknown>:0 
E/mono    (  306):   --- End of managed exception stack trace ---
E/mono    (  306): java.lang.NullPointerException
E/mono    (  306):  at android.content.ContextWrapper.getSystemService(ContextWrapper.java:363)
E/mono    (  306):  at dalvik.system.NativeStart.run(Native Method)
E/mono    (  306): 
D/Zygote  (   33): Process 306 exited cleanly (255)
I/ActivityManager(   60): Process MyDriver_Driver.MyDriver_Driver (pid 306) has died.
I/WindowManager(   60): WIN DEATH: Window{45103638 MyDriver_Driver.MyDriver_Driver/northstar.driver.Activity1 paused=false}
I/WindowManager(   60): WIN DEATH: Window{4511aac0 MyDriver_Driver.MyDriver_Driver/northstar.driver.MainActivity paused=false}
W/ActivityManager(   60): Scheduling restart of crashed service MyDriver_Driver.MyDriver_Driver/northstar.driver.NorthStarBackgroundService in 5000ms
I/ActivityManager(   60): Start proc MyDriver_Driver.MyDriver_Driver for activity MyDriver_Driver.MyDriver_Driver/northstar.driver.Activity1: pid=320 uid=10042 gids={3003, 1015}
I/UsageStats(   60): Unexpected resume of MyDriver_Driver.MyDriver_Driver while already resumed in MyDriver_Driver.MyDriver_Driver
I/ActivityThread(  320): Publishing provider MyDriver_Driver.MyDriver_Driver.__mono_init__: mono.MonoRuntimeProvider
D/dalvikvm(  320): Trying to load lib /data/data/MyDriver_Driver.MyDriver_Driver/lib/libmonodroid.so 0x44edf660
D/dalvikvm(  320): Added shared lib /data/data/MyDriver_Driver.MyDriver_Driver/lib/libmonodroid.so 0x44edf660
E/mono    (  320): WARNING: The runtime version supported by this application is unavailable.
E/mono    (  320): Using default runtime: v2.0.50727
I/monodroid-gc(  320): environment supports jni NewWeakGlobalRef
W/monodroid-gc(  320): GREF GC Threshold: 1800
I/EXC_logstart(  320): **************** starting driver module ****************
W/InputManagerService(   60): Got RemoteException sending setActive(false) notification to pid 306 uid 10042
I/ActivityManager(   60): Displayed activity MyDriver_Driver.MyDriver_Driver/northstar.driver.Activity1: 4214 ms (total 4214 ms)
I/MonoDroid(  320): UNHANDLED EXCEPTION: System.NullReferenceException: Object reference not set to an instance of an object
I/MonoDroid(  320): at NorthStar.Driver.NorthStarBackgroundService.OnStart (Android.Content.Intent,int) <0x00038>
I/MonoDroid(  320): at Android.App.Service.n_OnStart_Landroid_content_Intent_I (intptr,intptr,intptr,int) <0x00067>
I/MonoDroid(  320): at (wrapper dynamic-method) object.0333e05f-221e-4109-91bd-6a13aa2251bd (intptr,intptr,intptr,int) <0x0003b>
E/mono    (  320): 
E/mono    (  320): Unhandled Exception: System.NullReferenceException: Object reference not set to an instance of an object
E/mono    (  320):   at NorthStar.Driver.NorthStarBackgroundService.OnStart (Android.Content.Intent intent, Int32 startId) [0x00000] in <filename unknown>:0 
E/mono    (  320):   at Android.App.Service.n_OnStart_Landroid_content_Intent_I (IntPtr jnienv, IntPtr native__this, IntPtr native_intent, Int32 startId) [0x00000] in <filename unknown>:0 
E/mono    (  320):   at (wrapper dynamic-method) object:0333e05f-221e-4109-91bd-6a13aa2251bd (intptr,intptr,intptr,int)
D/Zygote  (   33): Process 320 exited cleanly (1)
I/ActivityManager(   60): Process MyDriver_Driver.MyDriver_Driver (pid 320) has died.
W/ActivityManager(   60): Scheduling restart of crashed service MyDriver_Driver.MyDriver_Driver/northstar.driver.NorthStarBackgroundService in 20000ms
I/WindowManager(   60): WIN DEATH: Window{45127238 MyDriver_Driver.MyDriver_Driver/northstar.driver.Activity1 paused=false}
I/UsageStats(   60): Unexpected resume of com.android.launcher while already resumed in MyDriver_Driver.MyDriver_Driver
W/InputManagerService(   60): Got RemoteException sending setActive(false) notification to pid 320 uid 10042
I/ActivityManager(   60): Start proc MyDriver_Driver.MyDriver_Driver for service MyDriver_Driver.MyDriver_Driver/northstar.driver.NorthStarBackgroundService: pid=327 uid=10042 gids={3003, 1015}
I/ActivityThread(  327): Publishing provider MyDriver_Driver.MyDriver_Driver.__mono_init__: mono.MonoRuntimeProvider
D/dalvikvm(  327): Trying to load lib /data/data/MyDriver_Driver.MyDriver_Driver/lib/libmonodroid.so 0x44edf580
D/dalvikvm(  327): Added shared lib /data/data/MyDriver_Driver.MyDriver_Driver/lib/libmonodroid.so 0x44edf580
E/mono    (  327): WARNING: The runtime version supported by this application is unavailable.
E/mono    (  327): Using default runtime: v2.0.50727
I/monodroid-gc(  327): environment supports jni NewWeakGlobalRef
W/monodroid-gc(  327): GREF GC Threshold: 1800 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:56:46.080

我认为你的做法是错误的。

发生了什么，您是否在每次需要位置时都实例化一个新的 GPSTracker，然后尝试检索恰好为空的位置的属性。

相反，我会直接在您的*NorthStarBackgroundService中实现**ILocationListener*。

 *Greg Shackles 的这种听众的例子[应该](https://github.com/gshackles/Sample-Projects/blob/master/MonoDroid/MonoDroidSamples/MonoDroidSamples/DemoActivities/LocationDemo/LocationActivity.cs)有你需要的一切。

具体来说，获取最后一个已知位置并请求更新，如示例中所示：

```
_locationManager = (LocationManager)GetSystemService(LocationService);
Location lastKnownLocation = _locationManager.GetLastKnownLocation(bestProvider);

if (lastKnownLocation != null) ... // Set your instance variable for location.

// You can set the thresholds that suit you here.
_locationManager.RequestLocationUpdates(bestProvider, 5000, 2, this); 
```

然后实现：

```
public void OnLocationChanged(Location location)
{
    // Update your instance variable for location
} 
```

在此之后，您可以让*UpdatePosition()使用**OnLocationChanged()*中写入的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T00:21:28.700

从堆栈跟踪来看，OnStart() 中似乎存在 NullReferenceException。

我不熟悉服务 - 但可能是 Intent 为空 - 当然[这个参考](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)说：

> 给定的提供给 startService(Intent) 的 Intent。如果服务在其进程消失后重新启动，并且它之前返回了除 START_STICKY_COMPATIBILITY 之外的任何内容，则这可能为 null。*

# c# - .Net C# 远程方法调用 (RMI)（客户端/服务器通信）

> ID：12762627
> 
> 赞同：0
> 
> 时间：2012-10-06T18:34:27.137
> 
> 标签：c#, asp.net-mvc, c#-4.0, client-server, .net-remoting

> **可能重复：**
> [远程方法调用的 .NET 标准是什么？](https://stackoverflow.com/questions/3560107/what-the-net-standard-for-remote-method-invocation)

**Java RMI的****C#**版本到底是什么？

 **我想从服务器调用客户端的方法，从服务器ping客户端等。

如何使用 c# 完成此服务器和客户端通信？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:45:33.740

您可以在远程处理和 WCF 之间进行选择

远程处理是最古老的技术，但并未被弃用，可能对您来说已经足够了。

WCF 是较新的并且具有更多可能性（用于安全性、身份验证以及消息传输和协议）。

您可以轻松找到这两种解决方案的教程。**

# android - 在 Google Maps MapView - Android 中显示船只路线

> ID：12762633
> 
> 赞同：1
> 
> 时间：2012-10-06T18:35:07.670
> 
> 标签：android, google-maps, android-mapview

我目前需要在 MapView 中显示一条船/游轮路线，像这样 ![邮轮航线](../Images/90c8da4da97e6ecefb9964c268bd89bc.png)

我开始编写我的版本，但由于我看到的每个水路示例都是相同的，我开始想知道是否有“标准”方法来做这件事。我一直在寻找几个小时，还没有找到任何东西，所以我决定在这里问。

这是我到目前为止所拥有的：

```
Point point2 = new Point();
projection.toPixels(gp2, point2);
paint.setStrokeWidth(5);
paint.setPathEffect(new DashPathEffect(new float[] {8,12}, 5));
paint.setAlpha(defaultColor==Color.parseColor("#6C8715")?200:100);
canvas.drawLine(point.x, point.y, point2.x,point2.y, paint); 
```

它正在工作，唯一要做的就是在每次用户缩放时调整线条。这是这样做的方法，还是有一种标准的方法？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:48:44.500

如果您将代码移动到[叠加层](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Overlay)，那么您不必担心在用户缩放/平移时调整线条。由于您可能有两个以上的点要绘制，您还可以利用[Path](http://developer.android.com/reference/android/graphics/Path.html)类。

```
import com.google.android.maps.Overlay;

class PathOverlay extends Overlay {

    private void List<GeoPoint>geoPoints;

    public PathOverlay(List<GeoPoint> points) {
        this.geoPoints = geoPoints;
    }   

    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapv, shadow);

        Paint paint = new Paint();
        paint.setStrokeWidth(5);
        paint.setPathEffect(new DashPathEffect(new float[] {8,12}, 5));
        paint.setAlpha(defaultColor==Color.parseColor("#6C8715")?200:100);

        Path path = new Path();
        boolean isFirst = true;
        for (GeoPoint geoPoint : this.geoPoints) {
            Point point = new Point();
            mapView.getProjection().toPixels(geoPoint, point);
            if (isFirst) {
                isFirst = false;
                path.moveTo(point.x, point.y);
            }
            else {
                path.lineTo(point.x,point.y);
            }
        }
        canvas.drawPath(path, paint);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:43:10.697

扩展 Overlay 并覆盖其中的 draw() 方法。然后做你之前做的同样的事情。您将在移动/缩放中自动重绘

这个答案对您[有用 如何使用 kml 文件在地图上绘制路径？](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723)

# drupal-7 - 使用 Drupal 开发在线商店的好资源

> ID：12762636
> 
> 赞同：0
> 
> 时间：2012-10-06T18:35:25.393
> 
> 标签：drupal-7

我必须开发一个在线商店来销售一些休息 api 的访问权限。我不是 Drupal 开发人员，在哪里可以找到好的资源或开源项目来学习？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:40:11.147

Übercart，基于 Drupal 的开源电子商务项目，帮助您开发在线商店，也支持 D7。[http://ubercart.org](http://ubercart.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T18:44:52.483

Ubercart 是使用 drupal 开发在线商店的最佳模块。

请找到有助于集成和开发的链接。
1\. [http://www.ubercart.org/docs](http://www.ubercart.org/docs)
2\. [http://www.freelancedrupaldeveloper.ca/ubercart-tutorial-part-1](http://www.freelancedrupaldeveloper.ca/ubercart-tutorial-part-1)

您也可以使用[Drupal Commerce](http://drupal.org/project/commerce)。
链接：- [http://chicago2011.drupal.org/sessions/drupal-commerce-setting-shop-drupal-7](http://chicago2011.drupal.org/sessions/drupal-commerce-setting-shop-drupal-7)

干杯！！！

# python - 如何在python中替换方程中的变量

> ID：12762638
> 
> 赞同：1
> 
> 时间：2012-10-06T18:35:45.837
> 
> 标签：python, equation, replace

我有一些方程的字符串，其中包括变量。例如：

```
eq='(a+1)*c-d' 
```

我也有带有变量值的字典。例如：

```
val={'a':5,'c':'k','d':'300n'} 
```

如您所见，在相同情况下，变量的值可以是其他变量，并且在某些情况下，并非所有来自 eq 的变量都在 val 中。

我需要用 val 中的值替换 eq 中的所有变量。当然，直接的代码将类似于：

```
for v in val.keys():
  eq=re.sub(v,val[v],eq) 
```

但此代码在某些情况下会失败。例如，在变量列表中将是变量“n”和“nn”

那么，有人可以考虑更好的解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:53:50.173

尝试：

```
for k,v in val.items():
    eq = re.sub(r'\b' + k + r'\b', v, eq) 
```

这将按变量的全名搜索变量，即如果`val = {'x': '5'}`和 等式包含像“xx”、“x2”甚至“2x”这样的子字符串，这些字符串将不会被替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:02:37.943

另一种方法需要稍微改变公式并使用字符串函数“格式”。

使用关键字参数（不是很编程）：

```
>>> '({a}+1)*{c}-{d}'.format(a=5, c='k', d='300n')
'(5+1)*k-300n' 
```

或者使用字典：

```
>>> '({a}+1)*{c}-{d}'.format(**{'a': 5, 'c': 'k', 'd': '300n'})
'(5+1)*k-300n' 
```

这样做可以帮助用户识别某些东西什么时候没有被替换，或者什么时候应该被替换，并大大简化了代码。

# objective-c - 带有完成块的自定义 xml 解析器类

> ID：12762642
> 
> 赞同：3
> 
> 时间：2012-10-06T18:36:13.770
> 
> 标签：objective-c, ios, xml, objective-c-blocks

我正在使用 TBXML 创建一个 xml 解析器类。我希望该类加载一个 xml 文档，遍历它，并返回一个字符串数组来填充一个表。这应该发生在后台线程中，因此它确实会阻塞 UI。我想添加一个完成块，以便在 xml 解析完成时设置表的数据源数组。

如何实现完成块？这是我到目前为止所拥有的：

解析器

```
- (NSMutableArray *)loadObjects
{
    // Create a success block to be called when the asyn request completes
    TBXMLSuccessBlock successBlock = ^(TBXML *tbxmlDocument) {
        NSLog(@"PROCESSING ASYNC CALLBACK");

        // If TBXML found a root node, process element and iterate all children
        if (tbxmlDocument.rootXMLElement)
            [self traverseElement:tbxmlDocument.rootXMLElement];
    };

    // Create a failure block that gets called if something goes wrong
    TBXMLFailureBlock failureBlock = ^(TBXML *tbxmlDocument, NSError * error) {
        NSLog(@"Error! %@ %@", [error localizedDescription], [error userInfo]);
    };

    // Initialize TBXML with the URL of an XML doc. TBXML asynchronously loads and parses the file.
    tbxml = [[TBXML alloc] initWithURL:[NSURL URLWithString:@"XML_DOC_URL"]
                               success:successBlock
                               failure:failureBlock];
    return self.array;
}

- (void)traverseElement:(TBXMLElement *)element
{    
    do {
        // if the element has child elements, process them
        if (element->firstChild) [self traverseElement:element->firstChild];

        if ([[TBXML elementName:element] isEqualToString:@"item"]) {
            TBXMLElement *title = [TBXML childElementNamed:@"title" parentElement:element];
            NSString *titleString = [TBXML textForElement:title];
            [self.array addObject:titleString];
        };

        // Obtain next sibling element
    } while ((element = element->nextSibling));
} 
```

表视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    Parser *parser = [[Parser alloc] init];
    self.products = [parser loadObjects]; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:35:11.953

像这样，你会得到一个空数组，对吧？那是因为`loadObjects`在它完成任务之前没有阻塞并返回。

现在，您希望您`viewDidLoad`立即返回，以便您的表格可以显示。因此，在您的 中`TableViewController`，您需要一个在显示空表后被调用并管理更新的回调。标准技术是使用委托。在`Parser.h`定义中

```
@protocol ParserProtocol <NSObject>
-(void)parserDidFinishLoading;
@end 
```

在解析器接口中添加

```
@property id<ParserProtocol> delegate; 
```

`successBlock`用线完成你

```
[self.delegate parserDidFinishLoading]; 
```

然后使 TableViewController 符合`ParserProtocol`并将 Parser 添加为属性：

```
@property Parser* parser; 
```

在 TableViewController.m 中替换

```
Parser *parser = [[Parser alloc] init];
self.products = [parser loadObjects]; 
```

和

```
self.parser = [[Parser alloc] init];
self.products = [self.parser loadObjects]; 
```

并添加

```
-(void)parserDidFinishLoading{
    [self.tableView reloadData];
} 
```

`self.products`指向现在修改的`array`属性`Parser`。所以不需要额外的设置。

祝你好运，彼得。

# php - 使用php显示上传的图像时出现权限错误

> ID：12762643
> 
> 赞同：0
> 
> 时间：2012-10-06T18:36:16.903
> 
> 标签：php, wamp

我正在使用 WAMP 服务器，我想显示上传到服务器上的图像..我已经成功实现了图像的上传..但是在显示它时使用 -

```
echo ' < img src=\"'.$p.'\" alt=\"Cover\" > '; 
```

其中 $p 包含图像的路径，我得到一个损坏的图像。当我右键单击并选择在新选项卡中打开图像时，将显示以下内容..

> 禁止的
> 
> 您无权访问此服务器上的 /"c:/wamp/www/folders/shubhi/My。

此外，此错误未显示应为的完整路径`"c:/wamp/www/folders/shubhi/My pics/1.jpg"` 但是当我打印时`$p`，它显示正确的位置。

我应该怎么做才能解决这个问题？或者有没有其他方法可以显示上传的图像，其位置存储在 php 变量中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:48:44.253

您正在使用**绝对路径**来显示错误的图像。

要在网页上显示图像，您需要**为该图像提供 http url，**如下所示

```
$p = 'http://example.com/shubhi/My pics/1.jpg';

echo ' < img src=\"'.$p.'\" alt=\"Cover\" > '; 
```

# css - 位置按钮距右侧 8px

> ID：12762644
> 
> 赞同：2
> 
> 时间：2012-10-06T18:36:25.990
> 
> 标签：css

我正在构建一个宽度为 100% 的菜单 - 我试图将一个按钮放在左侧，一个放在右侧。

[这就是我所拥有的](http://jsfiddle.net/zPkH8/)，但是您可以看到该按钮未放置在距右侧 8px 的位置。

我该怎么办？谢谢！

```
#options-buttons {
    height: 40px;
    width: 100%;
}

.okay_button
{
  position: relative;
  top: 3px;
  right: 8px;
  background-image:url('http://i.imgur.com/RIIV8.png');
  float: left;
  display: block;
  width: 68px;
  height: 34px;
  background-repeat: no-repeat;
  outline: none;
}

.okay_button:hover
{
  background-position: 0 -34px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T18:37:43.183

使用左右浮动； [jsFiddle](http://jsfiddle.net/zPkH8/4/)

```
.okay_button
{ 
  top: 3px;
  right: 8px;
  background-image:url('http://i.imgur.com/RIIV8.png');
  float: right;
  display: block;
  width: 68px;
  height: 34px;
  background-repeat: no-repeat;
  outline: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:44:28.493

您只需要更改`position: relative;`为`position: absolute;`on your `.okay_button`，因为这将强制它相对于其容器，而不是相对于其正常位置。

工作示例：http: [//jsfiddle.net/zPkH8/3/](http://jsfiddle.net/zPkH8/3/)

```
.okay_button
{
  position: absolute;

  ...

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T18:41:42.413

[工作示例](http://jsfiddle.net/zPkH8/2/)（出于演示目的，我用文本替换了背景）：

您混合浮动、显示和位置不正确。

# python - Python：HTTP 服务器和命令执行

> ID：12762645
> 
> 赞同：0
> 
> 时间：2012-10-06T18:36:35.930
> 
> 标签：python, python-2.7

我需要在我的 RS232 端口上控制一个设备，并且我想为此目的使用一个网站。
Python 可以创建一个小型网络服务器和一个显示设备状态和一些额外信息的 HTTP 页面。
如果我需要更改 RS232 设备上的某些内容，我还想使用网页（POST 值）。
提出此类申请的正确方法是什么？

我在 debian 上可以使用 python 2.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:12:36.920

对于您的需要，像[http://webob.org/](http://webob.org/)这样的最小库将是理想的。你只需要做这样的事情：

```
if request.method == 'POST':
    do_stuff(req.POST.get['var1'])
return 'Status: %s' % get_status() 
```

它在 Debian 中可用：[http ://packages.debian.org/squeeze/python/python-webob](http://packages.debian.org/squeeze/python/python-webob)

# flash - Flex 应用程序在 swf 文件上具有透明背景

> ID：12762648
> 
> 赞同：0
> 
> 时间：2012-10-06T18:36:55.813
> 
> 标签：flash, apache-flex, transparency

我需要制作一个透明的网络浏览器。我将其作为弹性项目进行，但如果需要，可以选择其他内容。透明度工作，但不适用于 swf 文件。它在默认情况下透明的 swf 文件上放置黑色背景。这是我的代码： browser.mxml - pastebin.com/WcJ0yJVs browser-app.xml - pastebin.com/1UWzx2kZ 这是我尝试完全透明的 HTML（包括 swf 文件） - [http://pastebin.com/ WS9JJSah](http://pastebin.com/WS9JJSah) 这是 HTML 链接到的 swf 文件 - [http://www.aleosoft.com/res/flashtutorial_transparent.swf](http://www.aleosoft.com/res/flashtutorial_transparent.swf) 此外，如果您尝试直接通过浏览器打开 swf，例如在 flex 浏览器中键入“http://www.aleosoft.com/res/flashtutorial_transparent.swf”，它根本不会显示。目前其他一切正常，只是 HTML 页面中的 swf 文件存在问题。我在 Adob​​e® Flash® Builder™ 4.6 中构建它，但也不适用于 Adob​​e Flex Builder 3。编辑：我的意思是透明，而不是页面的背景，我希望它显示弹性窗口后面的所有内容，以前的窗口/桌面必须是可点击/可用的。

提前致谢。

# ruby-on-rails - 如何访问 CarrierWave 上传器中的请求参数？

> ID：12762650
> 
> 赞同：2
> 
> 时间：2012-10-06T18:36:59.343
> 
> 标签：ruby-on-rails, carrierwave

```
class PictureUploader < CarrierWave::Uploader::Base
  # Is it possible to access the request params from here?
end 
```

我让用户对图像进行一些自定义，因此用户将在表单中指定一些选项，然后选择一个文件，然后点击上传。在服务器端，如何从 CarrierWave 上传器中的表单访问这些参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:44:23.243

不，我不认为这是可能的，或者即使是 - 这应该被视为一种不好的做法。但是，您可以像这样访问您的模型属性：

```
class PictureUploader < CarrierWave::Uploader::Base
  version :preview do
    process :user_resize
  end

  protected

  def user_resize
    if model.user_width and model.user_height
      #do something here
    end
  end
end 
```

# javascript - javascript中的实时文本颜色变化

> ID：12762654
> 
> 赞同：3
> 
> 时间：2012-10-06T18:37:25.570
> 
> 标签：javascript, jquery, text, effects

> **可能重复：**
> [使用 Jquery 更改 Textarea 中某些单词的颜色？](https://stackoverflow.com/questions/2990157/change-the-color-of-certain-words-in-textarea-using-jquery)

我现在正在做一个小项目。我有一个文本区域，用户可以在其中输入单词。当用户键入时，如果他们使用某些单词，我需要文本更改颜色。例如，当 lucy 输入句子“The brown cow jumped over the moon”时，文本会将“brown”这个词变成棕色，但在她输入“brown”后面的空格后立即生效。我希望你理解 :P 哦，jquery 是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:49:49.217

使用 textarea 的当前技术无法做到这一点。您可以更改 textarea 中所有内容的颜色，但 textareas 无法选择性地设置某些单词的样式，而不能选择性地设置其他单词的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T04:41:49.513

如前所述，不可能在常规文本区域中实现对呈现的所需控制级别。

这里有几个关于这个问题的stackoverflow问题：

*   [可以即时进行语法突出显示的文本区域？](https://stackoverflow.com/questions/1619167/textarea-that-can-do-syntax-highlighting-on-the-fly)
*   [https://stackoverflow.com/questions/1505761/textarea-with-syntax-code-highlighting](https://stackoverflow.com/questions/1505761/textarea-with-syntax-code-highlighting)

您可以考虑使用[codepress](http://codepress.sourceforge.net/)之类的东西并编辑源代码以突出显示您想要的单词。

或者，如果您想从头开始，您可以使用 <div contentEditable="true"></div> 而不是这里建议的 textarea：
[colorize text in textarea with jQuery](https://stackoverflow.com/questions/5498005/colorize-text-in-textarea-with-jquery)

这是一些没有 jquery span 替换的示例代码：http:
[//jsfiddle.net/s5uaJ/](http://jsfiddle.net/s5uaJ/)

祝你好运

# objective-c - iOS目标c将csv文件上传到ftp服务器

> ID：12762655
> 
> 赞同：0
> 
> 时间：2012-10-06T18:37:35.303
> 
> 标签：objective-c, ios, ios5

我使用 iOS simpleFTP 示例作为将文件上传到我的 ftp 服务器的指南（[http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Listings/Read_Me_About_SimpleFTPSample_txt.html](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Listings/Read_Me_About_SimpleFTPSample_txt.html)）。该文件在本地包含数据，但在我的应用程序将文件上传到我的 ftp 服务器后，它显示为空（0 字节）。谁能在我的代码中看到为什么会这样？这是代码：

```
 NSString *resultLine = [NSString stringWithFormat:@"%@,%@,%@",
                            aField.text, bField.text, cField.text];

    NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSString *csvFileName = [NSString stringWithFormat:@"%@.csv",aField.text];

    NSString *reportsCSV = [docPath stringByAppendingPathComponent:csvFileName];

    if([[NSFileManager defaultManager] fileExistsAtPath:reportsCSV])
    {
        [[NSFileManager defaultManager] removeItemAtPath:reportsCSV error:NULL];
    } else{
        [[NSFileManager defaultManager] createFileAtPath:reportsCSV contents:nil attributes:nil];
    }

    NSFileHandle *fileHandle = [NSFileHandle fileHandleForUpdatingAtPath:reportsCSV];
    [fileHandle seekToEndOfFile];
    [fileHandle writeData:[resultLine dataUsingEncoding:NSUTF8StringEncoding]];
    [fileHandle closeFile];

    if([[NSFileManager defaultManager] fileExistsAtPath:reportsCSV])
    {
        NSLog(@"File report type CSV: %@", reportsCSV);
        if ( ! self.isSending ) {
            [self startSend:reportsCSV];
        }

    } 
```

startSend 方法：

```
 - (void)startSend:(NSString *)filePath
{
BOOL                    success;
NSURL *                 url;

assert(filePath != nil);
//assert([[NSFileManager defaultManager] fileExistsAtPath:filePath]);
//assert( [filePath.pathExtension isEqual:@"png"] || [filePath.pathExtension isEqual:@"jpg"] );

assert(self.networkStream == nil);      // don't tap send twice in a row!
assert(self.fileStream == nil);         // ditto

// First get and check the URL.

url = [[NetworkManager sharedInstance] smartURLForString:@"ftp.fooftp.com"];
success = (url != nil);

if (success) {
    // Add the last part of the file name to the end of the URL to form the final 
    // URL that we're going to put to.

    url = CFBridgingRelease(
                            CFURLCreateCopyAppendingPathComponent(NULL, (__bridge CFURLRef) url, (__bridge CFStringRef) [filePath lastPathComponent], false)
                            );
    success = (url != nil);
}

// If the URL is bogus, let the user know.  Otherwise kick off the connection.

if ( ! success) {
    self.sendingLabel.text = @"Invalid URL";
} else {

    // Open a stream for the file we're going to send.  We do not open this stream; 
    // NSURLConnection will do it for us.

    self.fileStream = [NSInputStream inputStreamWithFileAtPath:filePath];
    assert(self.fileStream != nil);

    [self.fileStream open];

    // Open a CFFTPStream for the URL.

    self.networkStream = CFBridgingRelease(
                                           CFWriteStreamCreateWithFTPURL(NULL, (__bridge CFURLRef) url)
                                           );
    assert(self.networkStream != nil);

        success = [self.networkStream setProperty:@"user" forKey:(id)kCFStreamPropertyFTPUserName];
        assert(success);
        success = [self.networkStream setProperty:@"pass" forKey:(id)kCFStreamPropertyFTPPassword];
        assert(success);

    self.networkStream.delegate = self;
    [self.networkStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [self.networkStream open];

    // Tell the UI we're sending.

    [self sendDidStart];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:12:06.217

我处于同样的情况，但是有 txt 文件和图像文件......我有一个用于上传文件的类，这个类基于视图控制器示例，并且在同一个项目中也有来自示例的视图控制器，上传的文件是空的（0字节），但视图控制器不会发生这种情况，这会正确上传文件......

# c# - 何时使用 Visual Studio C#“验证”/“验证”事件

> ID：12762657
> 
> 赞同：5
> 
> 时间：2012-10-06T18:38:06.583
> 
> 标签：c#, visual-studio

在 Visual Studio C# 中，何时将“Validated”或“Validating”事件用于表单上的文本框，而不仅仅是编写 try-catch 语句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-06T19:45:35.307

当您通过使用键盘（TAB、SHIFT+TAB 等）、调用 Select 或 SelectNextControl 方法或将 ContainerControl.ActiveControl 属性设置为当前窗体来更改焦点时，焦点事件按以下顺序发生：

*   进入
*   获得焦点
*   离开
*   证实
*   **已验证**
*   失去焦点

当您使用鼠标或调用 Focus 方法更改焦点时，焦点事件按以下顺序发生：

*   进入
*   获得焦点
*   失去焦点
*   离开
*   证实
*   **已验证**

如果 CausesValidation 属性设置为 false，则会抑制 Validating 和 Validated 事件。

我为你注意到了这一点，因为它们的顺序不同......仅供参考......

无论如何...然后您将在验证/验证事件处理程序中使用 try catch 以确保不会向屏幕抛出异常并设置消息等。

希望这有助于解决问题？

马修

# javascript - KnockoutJS 中的 3 级嵌套 foreach

> ID：12762660
> 
> 赞同：3
> 
> 时间：2012-10-06T18:38:27.217
> 
> 标签：javascript, knockout.js, nested-loops

我在 Knockout 中有 3 个级别的数据要管理，但在添加新数据时只有前两个级别会更新。第三级没有更新。

到目前为止，这是我的代码：http: [//jsfiddle.net/26medias/Zy8Wr/](http://jsfiddle.net/26medias/Zy8Wr/)

有测验，每个都包含问题，其中包含答案。我可以添加测验，我可以添加问题，但答案不会更新。

我在网上和 stackoverflow 上找到的所有示例仅适用于 2 级数据。

我怎样才能将第 3 级作为 Observable 以使 [+] 按钮起作用？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T18:59:44.187

对于您希望能够绑定到的*每一层嵌套，您需要将每一层映射到一个可观察对象。*

您只映射到一组可观察的问题。但是，您也应该映射问题中的每个答案。

```
scope.quizzes = ko.observableArray(
    ko.utils.arrayMap(quizzes, function(quiz) {
        return {
            name:      quiz.name,
            questions: ko.observableArray(quiz.questions) // not far enough
        };
    })
); 
```

由于您似乎希望能够编辑测验和问答文本的名称，因此您也应该使这些属性可观察。

```
scope.quizzes = ko.observableArray(
    ko.utils.arrayMap(quizzes, function(quiz) {
        return {
            name:      ko.observable(quiz.name),
            questions: ko.observableArray(
                ko.utils.arrayMap(quiz.questions, function (question) {
                    return {
                        text:    ko.observable(question.text),
                        answers: ko.observableArray(
                            ko.utils.arrayMap(question.answers, function (answer) {
                                return {
                                    text:  ko.observable(answer.text),
                                    valid: ko.observable(answer.valid)
                                };
                            })
                        )
                    };
                })
            )
        };
    })
); 
```

这可能看起来很多，但这就是您必须做的才能绑定到这些对象。您可以使用[映射插件简化](http://knockoutjs.com/documentation/plugins-mapping.html)此过程，它会为您完成此映射。

```
scope.quizzes = ko.mapping.fromJS(quizzes); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:01:11.593

您的答案数组只是一个数组，而不是 observableArray。您需要将您的数组定义为 ko.observableArray。请注意，下面的代码片段对所有 3 级数组都使用了 observableArray。

```
var initialData = ko.observableArray([
    {
        name:    "Quiz #1",
        questions:    ko.observableArray([
            {
                text: "Question #1.1?",
                answers: ko.observableArray([
                    {
                        text:     "Yes",
                        valid:    true
                    },
                    {
                        text:     "No",
                        valid:    false
                    }
                ])
            }, 
```

# javascript - 防止scrollTop调用滚动事件

> ID：12762661
> 
> 赞同：8
> 
> 时间：2012-10-06T18:38:33.707
> 
> 标签：javascript, jquery

我正在尝试创建这种行为：当用户滚动鼠标滚轮（或按下`↓</kbd>) the webpage is scrolled down by the height of the window.`

我最终得到了以下代码：

```
var newScrollTop,
    oldScrollTop = $(window).scrollTop(),
    preventScroll = false;
$(window).scroll(function() {
    if (!preventScroll) {
        preventScroll = true;
        newScrollTop = $(this).scrollTop();
        if (newScrollTop > oldScrollTop) {
            $(this).scrollTop( oldScrollTop + $(window).height() );
        }
        else {
            $(this).scrollTop( oldScrollTop - $(window).height() );
        }
        oldScrollTop = newScrollTop;
        preventScroll = false;
    }
}); 
```

但这并不像我预期的那样工作：在滚动事件页面上滚动到最边缘（底部或顶部）。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T21:16:31.240

问题是您正在使用`scrollTop()`哪个触发窗口滚动事件本身内的滚动事件。

因此，基本上，使用您编写的代码，您会陷入无限循环，因为一旦触发第一个滚动事件，就会触发另一个滚动事件，`scrollTop()`而您的`preventScroll`变量仍未设置为 false 等等。

要使您的代码正常工作，您必须将`preventScroll`变量设置`false`为 setTimeout 函数内部，如下所示：

```
var newScrollTop,
    oldScrollTop = $(window).scrollTop(),
    preventScroll = false;

$(window).scroll(function() {
    if (!preventScroll) {
        preventScroll = true;
        newScrollTop = $(this).scrollTop();
        if (newScrollTop > oldScrollTop) {
            $(this).scrollTop( oldScrollTop + $(window).height() );
        }
        else {
            $(this).scrollTop( oldScrollTop - $(window).height() );
        }
        oldScrollTop = newScrollTop;

        setTimeout(function(){ preventScroll = false; }, 0);
    }
}); 
```

我们在设置`preventScroll`为之前添加了一些“延迟” `false`。这样，当您调用`scrollTop()` `preventScroll`variable 时，仍将设置为 true ！

这是一个工作小提琴： http: [//jsfiddle.net/J6Fcm/](http://jsfiddle.net/J6Fcm/)（我修改了一点你的代码，让滚动步骤按预期工作）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T20:27:18.660

没有简单的方法可以覆盖默认浏览器滚动功能。这是一种做你想做的事情的方法，但它需要 Brandon Aaron 的[jquery-mousewheel 插件](https://github.com/brandonaaron/jquery-mousewheel/blob/master/jquery.mousewheel.js)来管理鼠标滚轮：

```
$(function() {
    // Ugly hack to disable browser scrolling (downside: hides scrollbar!!!)
    $('html').css('overflow', 'hidden');

    // Get viewport height by which to scroll (up or down)
    var viewportHeight = $(window).height();

    // Recache viewport height on browser resize
    $(window).on('resize', function() {
        viewportHeight = $(window).height();
    });

    // Scroll on mousewheel
    $('html').on('mousewheel', function(event, delta, deltaX, deltaY) {
        // scroll down
        if (deltaY < 0)
            window.scrollBy(0, viewportHeight);
        // scroll up
        else
            window.scrollBy(0, -viewportHeight);
    });

    // Disable document keypress event
    // which would scroll the content even with "overlow: hidden"
    $(document).on('keypress', function(){
        return false;
    });

    // Scroll on arrow up/down keys
    $(document).on('keydown', function(event){
        // arrow down key
        if (event.which == 40)
            window.scrollBy(0, viewportHeight);
        // arrow up key
        if (event.which == 38)
            window.scrollBy(0, -viewportHeight);
    });
}); 
```

这是演示代码的[小提琴。](http://jsfiddle.net/62WLN/)除了我的解决方案有一个丑陋的缺点外，这一切都很好。`$('html').css('overflow', 'hidden');`正在删除浏览器滚动条。

# jquery - Jquery没有滚动到div id

> ID：12762662
> 
> 赞同：0
> 
> 时间：2012-10-06T18:38:45.050
> 
> 标签：jquery

我目前正在尝试使用 jquery 滚动到某个 div id。

代码如下。

```
jQuery(document).ready(function($){
    var prevScrollTop = 0;
    var $scrollDiv    = jQuery('div#container');
    var $currentDiv   = $scrollDiv.children('div:first-child');

    var $sectionid    = 1;
    var $numsections  = 5;

    $scrollDiv.scroll(function(eventObj)
    {
        var curScrollTop = $scrollDiv.scrollTop();
        if (prevScrollTop < curScrollTop)
        {
        // Scrolling down:
            if ($sectionid+1 > $numsections) {
                console.log("End Panel Reached");
            }
            else {
                $currentDiv = $currentDiv.next().scrollTo();
                console.log("down");
                console.log($currentDiv);
                $sectionid=$sectionid+1;
                console.log($currentDiv.attr('id'));
                var divid =$currentDiv.attr('id');
                jQuery('html, body').animate({scrollTop:jQuery('#'+divid).position().top}, 'slow');
                }
        }
        else if (prevScrollTop > curScrollTop)
        {
        // Scrolling up:
            if ($sectionid-1 == 0) {
                console.log("Top Panel Reached");
            }
            else {
                $currentDiv = $currentDiv.prev().scrollTo();
                console.log("up");
                console.log($currentDiv);
                $sectionid=$sectionid-1;
                var divid =$currentDiv.attr('id');
                jQuery('html, body').animate({scrollTop:jQuery('#'+divid).position().top}, 'slow');

                }
        }
        prevScrollTop = curScrollTop;
    });
}); 
```

我可以从 chrome 控制台验证所有值（即 div id）是否正确。然而，根本没有动画。

网站是这样的。

```
<div id="header">
<!-- Floating Header -->
</div>
<div id="container">
    <div id="panel1">
        <!--content of panel1 -->
    </div>
    <div id="panel2">
       <!--content of panel2 -->
    </div>
    <div id="panel3">
        <!--content of panel3 -->
    </div>
</div> 
```

需要滚动的部分是 100% 宽度/高度的面板，它们位于容器内部，是一个滚动的 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:18:14.433

解决它。

仅供参考，因为 div 在容器 div 中...

```
jQuery('html, body').animate({scrollTop:jQuery('#'+divid).position().top}, 'slow'); 
```

应该

```
jQuery('#container').animate({scrollTop:jQuery('#'+divid).position().top}, 'slow'); 
```

# javascript - 当模型在范围内更新时，$watch 不起作用。指令中的 $apply

> ID：12762666
> 
> 赞同：17
> 
> 时间：2012-10-06T18:39:00.200
> 
> 标签：javascript, angularjs, watch

我有一个指令，我在指令范围的“现有文件”模型上添加了一个监视。当模型通过 scope.$apply 发生变化时，watch 中不会调用 listener。

这是指令代码，如果我在这里遗漏了什么，请告诉我，

```
 directive('fileuploadPlugin', function() {
    var linkFn;
    linkFn = function(scope, element, attrs) {
        angular.element(element).ready(function() {
            jQuery('#fileupload').fileupload({
                done: function (e, data) {
                    scope.$apply(function(scope) {
                        for(var i=0; i < data.result.filesuploaded.length; i++){
                                      scope.existingfiles.push(data.result.filesuploaded[i]);
                    };                              
                    });
                }
        });
        scope.$watch('existingfiles', function(newValue, oldValue) {
                element.imagesLoaded(function() {
                scope.$apply( function() {
                    element.masonry({
                        itemSelector : '.box'
                    });
                });
            });
        });
    };
    return {
        templateUrl : 'templates/fileupload_plugin.htm',
        restrict    : 'A',
        scope       : {
            existingfiles   : '=ngModel',
        },
        link        : linkFn
    };  
     }) 
```

这是我对指令的调用，

```
<div fileupload-plugin ng-model="existingfiles"></div> 
```

请让我知道如何确保正确观看该模型

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-07T12:41:54.487

通过将“true”作为 $watch 调用的第三个参数，问题已得到解决。请在此处找到有关第三个参数的更多信息，

[$rootScope 上的 Angular 文档](http://docs.angularjs.org/api/ng.$rootScope.Scope#$watch)

# c# - 具有隔离存储的数据绑定

> ID：12762667
> 
> 赞同：0
> 
> 时间：2012-10-06T18:39:06.113
> 
> 标签：c#, windows-phone-7, data-binding

我正在开发一个应用程序，其中我将设置存储在`IsolatedStorage`. 我在我的代码中访问当前值：

```
currentSettings = this.Resources["saveSettings"] as SaveSettings;
MessageBox.Show(currentSettings.AltitudeIndex.ToString()); 
```

这很好用，但是当某些设置更新时，我需要重新启动应用程序（或重新加载页面）以反映更改。但我希望在不重新启动应用程序的情况下立即显示更改。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:18:06.353

您的可绑定对象应实现 INotifyPropertyChanged 接口，以便能够提供即时 UI 更新。

# javascript - Javascript：验证字段：非空且仅包含数字

> ID：12762671
> 
> 赞同：4
> 
> 时间：2012-10-06T18:40:05.513
> 
> 标签：javascript

> **可能重复：**
> [在 JavaScript 中验证数字 - IsNumeric()](https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric)

您好我正在尝试使用 javascript 验证字段以确保该字段不为空且仅包含数字

我正在使用 document.getElementById 来获取字段的值，然后使用这个函数来验证它：

```
function isNumeric(elem, message, messsage2)
{
   if(isNaN(elem))
   { 
    alert(message2); 
    return false; 
   }
   else if (elem == null || elem =="")
   {
    alert(message);
    return false;
   }
return true;
} 
```

但是这个功能仍然允许我输入字母作为应该有数字的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:43:41.270

```
function isNonEmptyNumber (str) {
  if(!str.length) return false;
  var num = +str;
  return isFinite(num) && !isNaN(num);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:47:19.467

使用正则表达式：

```
value.match(/^\d+$/) 
```

# java - 从子文件夹外部在 java 中导入用户定义的包

> ID：12762676
> 
> 赞同：1
> 
> 时间：2012-10-06T18:40:50.397
> 
> 标签：java, packages

我在 c:\world 中创建了一个包，我想将它导入到存储在 d:\java 中的 java 源文件中。它说无法访问包 c:\world\Balance.class。我需要做什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:47:15.437

在编译类和运行代码时，您需要在类路径中找到导入类的位置。

根据您的描述和评论，听起来您有一个名为 的包，其中包含一个名为`world`的类`Balance`，`Balance.class`位于*c:\world*中。这应该从*d:\java*开始工作：

```
javac -cp %CLASSPATH%;c:\ SomeClass.java 
```

替换`SomeClass.java`为您尝试在*d:\java*中编译的类的名称（一个或多个） 。

运行代码时，您还需要在类路径中包含*c:\*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:44:20.620

如果您看到的是我认为您看到`c:\world`的内容（具体错误消息中没有），那么这很容易。您需要添加`c:\world`到您的 CLASSPATH 设置。

在那之后，一个简单的`import Balance`（或其他的）就足够了。

否则，说明问题的 MWE（最小工作示例）以及您收到**的确切错误消息**会有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-06T18:45:30.700

你有两种方法可以解决这个问题：

1.  使包在单个项目中可用，这意味着两个包将位于同一源目录中。

2.  制作一个包含您的`world`包裹的罐子。将此jar复制到项目中的lib文件夹并将其添加到类路径中，现在`world.Balance`可以在当前项目中访问该类。

# eclipse - 不小心删除了eclipse上配置github的项目。我如何取回它？

> ID：12762680
> 
> 赞同：1
> 
> 时间：2012-10-06T18:41:13.977
> 
> 标签：eclipse, git

我“提交”了我的 java 项目 - 或试图这样做。我只是为 eclipse 下载了 egit 并试图配置它。我意识到我的项目尚未上传，所以试图删除我重新开始所做的事情。

我以为我只是在删除提交，但它在本地删除了整个项目！它也不在我的垃圾箱里。

有人知道如何取回它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:49:18.657

基本上，如果您没有将文件推送到远程仓库并删除了整个项目，那么您就丢失了本地 git 仓库。如果幸运的话，请检查您的回收站，或者尝试进行硬盘恢复。否则... **SOL**对不起:-(

# nhibernate - 如何使用 NHibernate 联合子类映射抽象属性？

> ID：12762682
> 
> 赞同：3
> 
> 时间：2012-10-06T18:41:25.763
> 
> 标签：nhibernate, orm, union-subclass

在这里参考 Ayende 的帖子：http: [//ayende.com/blog/3941/nhibernate-mapping-inheritance](http://ayende.com/blog/3941/nhibernate-mapping-inheritance)

我有类似的情况，可以通过向 Party 添加抽象的 Name-property 来扩展上述帖子的 union-subclass 映射。该模型如下：

```
public abstract class Party
{
    public abstract string Name { get; }
}

public class Person : Party
{
    public override string Name { get { return this.FirstName + " " + this.LastName; } }

    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
}

public class Company : Party
{
    public override string Name { get { return this.CompanyName; } }
    public virtual string CompanyName { get; set; }
} 
```

我正在寻找一个允许我以下列方式查询各方的映射：

```
session.QueryOver<Party>().Where(p => p.Name.IsLike("firstname lastname")).List(); 
```

我正在使用的映射：

```
<class name="Party" table="`party`" abstract="true">
<id access="backfield" name="Id">
  <column name="Id" />
  <generator class="sequence">
    <param name="sequence">party_id_seq</param>
  </generator>
</id>
<union-subclass name="Person" table="`person`">
  <property name="Name" formula="first_name || ' ' || last_name" update="false" insert="false" access="readonly">
  </property>
  <property name="FirstName">
    <column name="first_name" />
  </property>
  <property name="LastName">
    <column name="last_name" />
  </property>
</union-subclass>
<union-subclass name="Company" table="`company`">
  <property name="Name" access="readonly" update="false" insert="false">
    <column name="company_name" />
  </property> 
  <property name="CompanyName">
    <column name="company_name" />
  </property>
</union-subclass> 
```

对彼此而言

```
session.QueryOver<Person>().Where(p => p.Name.IsLike("firstname lastname")).List(); 
```

和

```
session.QueryOver<Company>().Where(p => p.Name.IsLike("companyName")).List(); 
```

这符合我的预期，我可以查询名称并获得匹配的结果。但是，当我这样做时

```
session.QueryOver<Party>().Where(p => p.Name.IsLike("firstname lastname")).List(); 
```

该查询根本不匹配 Persons，而是使用来自公司联合子类的映射。因此，当使用 Party 进行参数化时，查询似乎与使用 Company 进行参数化时基本相同（查询的 WHERE 子句是：WHERE this_.company_name = ((E'firstname lastname')::text)）

关于我可能出错的地方以及如何实现我所追求的任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:17:26.373

那是因为您使用了 NHibernate 无法确定的属性内部的逻辑。由于您已经为 Name 字段定义了公式，因此最好将它们保留为标准属性。因此，如果您按如下方式更正实体，它应该可以工作

```
public abstract class Party
{
    public abstract string Name { get; }
}

public class Person : Party
{
    public virtual string Name { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
}

public class Company : Party
{
    public virtual string Name { get; set; }
    public virtual string CompanyName { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T13:52:44.370

显然这是 NHibernate 3.x 的一个已知问题： [https ://nhibernate.jira.com/browse/NH-2354?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://nhibernate.jira.com/browse/NH-2354?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

# html - 面向对象的 CSS - 定义颜色

> ID：12762689
> 
> 赞同：0
> 
> 时间：2012-10-06T18:42:31.230
> 
> 标签：html, css

我正在尝试转换为面向对象的 CSS。我正在寻找定义颜色：

```
/* COLOURS */
.gray5: { color: #4C4C4C; }
.gray4: { color: #333333; }
.gray3: { color: #999999; }
.gray2: { color: #808080; }
.gray1: { color: #F5F5F5; }
.white: { color: #FFFFFF; } 
```

问题是，我想像这样定义我的颜色，但我只能像这样定义文本颜色。是否不可能这样做，所以我可以在文本或 div 上使用这个“颜色”定义？我宁愿不必这样做......：

```
/* DIV COLOURS */
.gray5: { background-color: #4C4C4C; }
.gray4: { background-color: #333333; }
.gray3: { background-color: #999999; }
.gray2: { background-color: #808080; }
.gray1: { background-color: #F5F5F5; }
.white: { background-color: #FFFFFF; }

/* TEXT COLOURS */
.tgray5: { color: #4C4C4C; }
.tgray4: { color: #333333; }
.tgray3: { color: #999999; }
.tgray2: { color: #808080; }
.tgray1: { color: #F5F5F5; }
.twhite: { color: #FFFFFF; } 
```

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:42:47.750

目前有一个 CSS 变量规范正在经历早期规范阶段，它将帮助您处理这类事情（与 SASS 或 LESS 相同）。

然而，在任何浏览器支持它之前还需要一段时间，甚至在足够多的浏览器支持它以在现实世界中使用之前更长时间。在那之前，SASS 和 LESS 是您最好的选择。

参考：

*   [http://www.w3.org/TR/css-variables/](http://www.w3.org/TR/css-variables/)
*   [http://www.xanthir.com/blog/b4KT0](http://www.xanthir.com/blog/b4KT0)

# syslog-ng - 使用 syslog-ng 解析结构化 syslog

> ID：12762694
> 
> 赞同：0
> 
> 时间：2012-10-06T18:43:15.677
> 
> 标签：syslog-ng

我正在尝试利用`syslog-ng`. 从我的防火墙，我转发以下消息：

> <14>1 2012-10-06T11:03:56.493 SRX100 RT_FLOW - RT_FLOW_SESSION_CLOSE [junos@2636.1.1.1.2.36 reason="TCP FIN" source-address="192.168.199.207" source-port="59292" destination-address ="184.73.190.157" 目标端口="80" 服务名称="junos-http" nat-source-address="50.193.12.149" nat-source-port="19230" nat-destination-address="184.73 .190.157" nat-destination-port="80" src-nat-rule-name="source-nat-rule" dst-nat-rule-name="None" protocol-id="6" policy-name="信任到不信任”源区域名称 =“信任”目标区域名称 =“不信任”会话 ID-32 =“9375”数据包来自客户端 =“9”字节来自客户端 =“4342 " 来自服务器的数据包="7"bytes-from-server="1507" elapsed-time="1" application="UNKNOWN" nested-application="UNKNOWN" username="N/A" roles="N/A" packet-incoming-interface="vlan .0"]

根据 IETF 日志的格式，它似乎是正确的，但由于某种原因，结构化数据实际上被解析为日志的消息部分，而不是被解析为结构化数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:12:49.013

在 syslog-ng 方面，您需要使用 syslog() 源或设置了 flags(syslog-proto) 的 tcp() 源，然后这些东西最终会出现在 ${.SDATA.junos@ 这样的变量中2636.1.1.1.2.36.reason} 以此类推，然后您可以根据需要使用它们。

# javascript - JavaScript 同步

> ID：12762696
> 
> 赞同：1
> 
> 时间：2012-10-06T18:43:15.997
> 
> 标签：javascript, jquery

我不知道如何同步下一个代码：

```
javascript: (function() {
    var s2 = document.createElement('script');
    s2.src = 'http://192.168.0.100/jquery.js';
    document.body.appendChild(s2);
    s = document.createElement('link');
    s.rel = "stylesheet";
    s.href = "http://192.168.0.100/1.css";
    s.type = "text/css";
    document.body.appendChild(s);
})();
//var startTime = new Date().getTime();
//while (new Date().getTime() < startTime + 1000);
$(document).ready(function(){
    b="c:\\1.txt";
    var fso, f1; 
    fso = new ActiveXObject("Scripting.FileSystemObject");
    f1 = fso.CreateTextFile(b, true);
    f1.WriteLine("Testing") ;
    document.writeln("File " + b + " is created.");
}); 
```

当我第一次运行这个脚本时，我得到一个错误`SCRIPT5009: '$' is undefined`。我认为这是因为尚未加载 jQuery 库。当我在出现错误后尝试运行相同的脚本时 - 它的行为是正确的。对于同步，我尝试使用上面列表中注释的代码。有效（并非总是如此）。但我知道这不是严格的同步（它取决于具体情况）。如何使用更智能的同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:48:37.257

```
(function($){
  //use $ now

  $(function(){
    //dom ready
  });

})(jQuery); 
```

请务必在 jquery 库下方的页脚中加载此库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:51:58.910

这是因为`script`通过 dhtml 方法放入标签`appendChild`使其评估异步。当你在文档上做这件事时，要听它“准备好”——遵循这个模式

```
(function() {
    var s2 = document.createElement('script');
    s2.src = 'http://192.168.0.100/jquery.js';
    document.body.appendChild(s2);
    s2.onload = s2.onreadystatechange = function(){
      if(s2.readyState == "complete") $(document).ready(function(){
        b="c:\\1.txt";
        var fso, f1; 
        fso = new ActiveXObject("Scripting.FileSystemObject");
        f1 = fso.CreateTextFile(b, true);
        f1.WriteLine("Testing") ;
        document.writeln("File " + b + " is created.");
      });
    }
    s = document.createElement('link');
    s.rel = "stylesheet";
    s.href = "http://192.168.0.100/1.css";
    s.type = "text/css";
    document.body.appendChild(s);
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T18:49:28.110

问题是，在`$`添加脚本标记但在下载文件之前，会遇到带有 的行。通常浏览器在加载 JavaScript 时会阻塞，从而防止此问题，但由于您以编程方式执行此操作，因此您无法获得标准同步。

您最好的选择是等待脚本加载。这里有资料：

[动态的跨浏览器脚本加载](https://stackoverflow.com/questions/6725272/crossbrowser-script-load-event)

捕获加载事件以完成脚本下载。然后，您可以调用现有的`$`ready 函数作为对该事件的回调。我建议使用为这些东西制作的加载器，或者只在 DOM 中使用标准脚本标记，除非你有令人信服的理由不这样做。

# android - 带有 json 的 android ListView - Howto AsyncTask？

> ID：12762698
> 
> 赞同：1
> 
> 时间：2012-10-06T18:43:24.187
> 
> 标签：android, json, listview, android-asynctask

我是安卓新手。我想要一个 ListView 并从 json 获取数据。我发现了很多教程，但他们没有 AsyncTask。我不知道，我如何将 AsyncTask 添加到该代码中！？

```
package de.test.ListView;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.ListActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;

public class MeinListViewActivity extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        JSONObject json = jsonFunctions.getJSONfromURL("http://api.geonames.org/earthquakesJSON?north=44.1&south=-9.9&east=-22.4&west=55.2&username=demo");

        try{

            JSONArray  earthquakes = json.getJSONArray("earthquakes");

            for(int i=0;i<earthquakes.length();i++){                        
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = earthquakes.getJSONObject(i);

                map.put("id",  String.valueOf(i));
                map.put("name", "Earthquake name:" + e.getString("eqid"));
                map.put("magnitude", "Magnitude: " +  e.getString("magnitude"));
                mylist.add(map);            
            }       
        }catch(JSONException e)        {
             Log.e("log_tag", "Error parsing data "+e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                        new String[] { "name", "magnitude" }, 
                        new int[] { R.id.item_title, R.id.item_subtitle });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                Toast.makeText(MeinListViewActivity.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

            }
        });
    }
} 
```

和 jsonFunctions

```
package de.test.ListView;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class jsonFunctions {

    public static JSONObject getJSONfromURL(String url){
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;

        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

        }catch(Exception e){
                Log.e("log_tag", "Error in http connection "+e.toString());
        }

      //convert response to string
        try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();
        }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
        }

        try{

            jArray = new JSONObject(result);            
        }catch(JSONException e){
                Log.e("log_tag", "Error parsing data "+e.toString());
        }

        return jArray;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:57:59.803

你可以使用我的代码来获取 Gson 的东西

```
public void executeHttpGet() throws Exception {

    BufferedReader in = null;
    try {
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        request.setURI(new URI(
                "http://cardsplatform.appspot.com/cardeckplatform_details"));
        HttpResponse response = client.execute(request);
        in = new BufferedReader(new InputStreamReader(response.getEntity()
                .getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();
        String json = sb.toString();
        System.out.println(json);
        Gson gson = new Gson();
        Type collectionType = new TypeToken<MyClass>() {
        }.getType();
        MyClass myclass= gson.fromJson(json, collectionType);
        GameEnvironment.get().getHandler().post(new Runnable() {

            @Override
            public void run() {
                addElementsToTableLayout();                 
            }
        });
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

现在，如果您希望使用异步任务来完成它，您应该做的就是将它放在 onBackground 方法上

例如

```
private class DownloadFile extends
        AsyncTask<PluginDetails, Integer, MyBoolean> {
    MyBoolean downloaded;
    ProgressDialog mProgressDialog;
    boolean canceled=false;
    public DownloadFile(MyBoolean downloaded) {
        this.downloaded=downloaded;
    }
    @Override
    protected MyBoolean doInBackground(PluginDetails... pluginDetail) {
        try {

            URL url = new URL("http://cardsplatform.appspot.com"
                    );
            URLConnection connection = url.openConnection();
            connection.connect();
            // this will be useful so that you can show a typical 0-100%
            // progress bar
            long fileLength = getSize();

            // download the file
            InputStream input = new BufferedInputStream(
                    connection.getInputStream());
            FileOutputStream output = StaticFunctions
                    .getPluginOutputStream(pluginDetail[0].getFilename());

            byte data[] = new byte[4096];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1 && !canceled) {
                total += count;
                System.out.println((int) (total * 100 / fileLength));
                // publishing the progress....
                publishProgress((int) (total * 100 / fileLength));
                output.write(data, 0, count);
            }
            output.flush();
            output.close();
            input.close();
            if(!canceled)
                downloaded.setFlag(true);
            else{//case its was canceled

            }
        } catch (Exception e) {
            cannotMakeConnection();
            e.printStackTrace();
        }
        return null;
    }
enter code here 
```

# php - 访问未定义为全局的 PHP 类中的全局字符串

> ID：12762701
> 
> 赞同：0
> 
> 时间：2012-10-06T18:43:29.853
> 
> 标签：php, class, global-variables

我有一个很难调试的独特情况。

我需要在未严格定义为全局的 php 类中设置一个全局字符串，该类必须在另一个文件中。

带有字符串的`file.php`只是这样：

```
//this cannot be changed
$foo_version = '1.1.1'; 
```

`example.php`试图访问此字符串的文件必须使用一个类：

```
class Bar extends Task {

      public function main() {

           require_once('../file.php');
           //global $foo_version; this doesn't work
           // update the database with this string, does not work

           update_option( 'db_field', $foo_version );

          }
      } 
```

我怎样才能`$foo_version`在课堂上返回一些东西？

在课堂之外也无法定义/完成任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:47:38.210

如果包含文件，并且变量在包含文件中，则可以使用它。

```
class Bar extends Task 
{
    public function main() {
       require_once('../file.php');
       update_option( 'db_field', $foo_version );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:44:46.370

你所拥有的是一个变量`$foo_version`，它可以很容易地改变。您可以使用`define`使其成为常量而不是[查看 PHP DOC](http://php.net/manual/en/function.define.php)

```
define("FOO_VERSION", "1.1.1");

class Bar extends Task {
    public function main() {
        require_once ('../file.php');
        update_option('db_field', FOO_VERSION);
    }
} 
```

如果您坚持`require_once`用`require`您的代码替换将起作用，因为 PHP 将检查文件是否已被包含，如果是，则不再包含（要求）它。

如果您在另一个课程中使用过它，那肯定是行不通的。将您的代码更改为以下内容

```
class Bar extends Task {
    public function main() {
        require ('../file.php');
        update_option('db_field', $foo_version);
    }
} 
```

# c++ - C++ 递归栈

> ID：12762702
> 
> 赞同：1
> 
> 时间：2012-10-06T18:43:31.597
> 
> 标签：c++, recursion

我很困惑递归在这个例子中是如何工作的。如果输入'ABC\n'，则输出CBA。如果有人可以逐步完成该过程，我将不胜感激。

1.  在 main() 中，调用了 ReverseLine()
2.  本地自动 myInput 接受 'ABC\n'

3.  然后它检查 myInput 的 '\n' 和 EOF，这就是我开始感到困惑的地方

我认为它说， A != '\n' 和 A != EOF 所以 ReverseLine() 再次被调用，但是然后呢？？？

递归是如何工作的，我只是想了解一下过程

谢谢

```
 using namespace std;

    void ReverseLine(){
       int myInput;

       myInput = cin.get();

       if (myInput != '\n' && myInput != EOF)
        ReverseLine();

       if (myInput != EOF)
        cout.put(myInput);
    }

    int main(){

       ReverseLine();
       return 0;

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T18:52:07.320

当您调用 ReverseLine 时，它​​会读取一个字符。如果字符不是换行符或 EOF，它会再次调用自身（递归）以读取下一个字符，直到遇到换行符，此时它打印刚刚读取的字符，然后返回到 ReverseLine 打印它读取的字符和以此类推，直到它返回对 ReverseLine 的初始调用，打印读取的第一个字符，然后退出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-06T18:51:28.027

也许扩展它会帮助你理解？

```
void ReverseLine() {
   int myInput = 'a'

   if (myInput != '\n' && myInput != EOF) {
       int myInput = 'b'

       if (myInput != '\n' && myInput != EOF) {
           int myInput = 'c'

           if (myInput != '\n' && myInput != EOF) {
               int myInput = '\n'
               if (myInput != '\n' && myInput != EOF)
                   ReverseLine(); // doesn't get called
               cout.put(myInput);
           }
           if (myInput != EOF)
               cout.put(myInput);
       }

       if (myInput != EOF)
        cout.put(myInput);
   }

   if (myInput != EOF)
    cout.put(myInput);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T18:55:35.810

正如 Basile 所说，递归可能很难理解。这个例子依赖于局部变量的概念。它将到达递归层的末尾，然后开始打印`myInput`从最深递归调用到第一个的局部变量。

假设您输入“123”。每个缩进都是`ReverseInput()`.

```
myInput = 1
ReverseLine()
  myInput = 2
  ReverseLine()
    myInput = 3
    ReverseLine()
      myInput = \n
    prints 3
  prints 2
prints 1 
```

这是以相反方式做事的常见技巧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T19:00:35.727

这真的很简单。ReverseLine 函数在返回*之前*打印其输出。这是事件的顺序，如果输入* *ABC\n*

```
1\. First call to ReverseLine.
1.a **A** is typed.
1.b myInput is not equal to **\n or EOF**, so
   2\. Second call to ReverseLine
   2.a **B** is typed.
   2.b myInput is not equal to **\n** or **EOF**, so
      3\. Third call to ReverseLine
      3.a **C** is typed.
      3.b myInput is not equal to **\n** or **EOF**, so
         4\. Fourth call to ReverseLine
         4.a **\n** is typed.
         4.b myInput is equal to **\n**, so
         4.c ReverseLine is **not** called
         4.d myInput is **not** equal to **EOF**, so
         4.e myInput (**\n**) is printed
         4.f Fourth call to ReverseLine returns
      3.c myInput is **not** equal to **EOF**, so
      3.d myInput (**C**) is printed
      3.e Third call to ReverseLine returns
   2.c myInput is **not** equal to **EOF**, so
   2.d myInput (**B**) is printed
   2.e Second call to ReverseLine returns
1.c myInput is **not** equal to **EOF**, so
1.d myInput (**A**) is printed
1.e First call to ReverseLine returns 
```

然后程序结束。

# iphone - 如何使用 RubyMotion 检测 UISlider 是否被点击？

> ID：12762703
> 
> 赞同：2
> 
> 时间：2012-10-06T18:43:31.163
> 
> 标签：iphone, ruby, uigesturerecognizer, uislider, rubymotion

我有 UISlider：

```
slider = UISlider.alloc.initWithFrame([[20, 70)], [260, 40]]) 
```

我希望能够检测到用户何时点击它并知道在哪里。我认为我需要使用`UITapGestureRecognizer`或类似的东西，但我很陌生，对这一切一无所知。

我可以找出何时点击滑块：

```
slider.addTarget(self, action:'sliderTaped', forControlEvents:UIControlEventTouchDown) 
```

...但它只适用于拇指，所以这不是很有用，我宁愿抓住滑块上的任何水龙头。

任何指向文档的指针或链接将不胜感激。

* * *

*相关问题/答案，但使用objective-c：[可点击的UISlider](https://stackoverflow.com/questions/10249510/clickable-uislider)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:13:59.063

要在滑块更改时收到通知，您需要设置`target/action`. 是包含您要调用的`target`方法的对象， 是您要调用`action`的方法。我打电话给我的`action` `sliderValueChanged:`。你可以选择任何东西。一定要在名称后面加上冒号，因为这会告诉它向作为`UISlider`对象的发送者发送一个指针。您需要发件人，以便您可以询问滑块的值。

如果您没有为滑块设置 a`minimumValue`和`maximumValue`，则值的范围为`0.0`到`1.0`。

```
def viewDidLoad
    slider = UISlider.alloc.initWithFrame([[20, 70], [260, 40]])
    slider.addTarget(self, action:'sliderValueChanged:', forControlEvents:UIControlEventValueChanged)
    self.view.addSubview(slider)
end

def sliderValueChanged(sender)
    puts sender.value
end 
```

如图所示，`sliderValueChanged`将在用户移动滑块时连续调用。要仅在用户停止触摸滑块时收到通知，请设置：

```
slider.continuous = no 
```

现在，如果您想要一个可点击的滑块，将拇指移动到您点击的位置，那么您需要`UITapGestureRecognizer`在滑块上添加一个。此代码演示了这一点：

```
def viewDidLoad
    slider = UISlider.alloc.initWithFrame([[50, 50], [200, 40]])
    tapGestureRecognizer = UITapGestureRecognizer.alloc.initWithTarget(self, action:'sliderTapped:')
    tapGestureRecognizer.numberOfTapsRequired = 2
    slider.addGestureRecognizer(tapGestureRecognizer)

    slider.continuous = false
    slider.minimumValue = 77
    slider.maximumValue = 129
    slider.addTarget(self, action:'sliderValueChanged:', forControlEvents:UIControlEventValueChanged)
    self.view.addSubview(slider)
end

# This is called when the slider changes either from taps or from moving the thumb
def handle_new_slider_value(value)
    puts "New slider value: #{value}"
end

def sliderValueChanged(slider)
    handle_new_slider_value(slider.value)
end

# These were determined empirically by setting the thumb to the minimum and
# then clicking on the center and printing out gestureRecognizer.locationInView(slider).x
# and then repeating for the maximum.
SLIDER_MIN = 11
SLIDER_MAX = 189

def sliderTapped(gestureRecognizer)
    if gestureRecognizer.state == UIGestureRecognizerStateEnded
        slider = gestureRecognizer.view
        x = gestureRecognizer.locationInView(slider).x
        # Uncomment this to determine values for SLIDER_MIN/SLIDER_MAX
        # puts x
        x = SLIDER_MIN if x < SLIDER_MIN
        x = SLIDER_MAX if x > SLIDER_MAX
        slider_min_val = slider.minimumValue
        slider_max_val = slider.maximumValue

        # Convert from the location in the view to the slider value
        slider.value = slider_min_val + (x - SLIDER_MIN) / (SLIDER_MAX - SLIDER_MIN) * (slider_max_val - slider_min_val)
        handle_new_slider_value(slider.value)
    end
end 
```

请注意，此代码通过双击移动滑块。只需轻按一下，我就遇到了麻烦，因为如果您快速移动拇指，代码会将其视为轻按并将拇指弹回其起始位置。设置`tapGestureRecognizer.numberOfTapsRequired = 1`为单击一下。

# jquery - 带有FF / IE的jquery backstretch背景图像

> ID：12762705
> 
> 赞同：0
> 
> 时间：2012-10-06T18:43:32.973
> 
> 标签：jquery, jquery-backstretch

我有一个简单的页面结构，其中一个大图像作为“正在进行的工作”页面的背景。

问题是在 Firefox 的 1152x864 分辨率下，背景图像被“截断”，而在 Internet Explorer（和相同的分辨率）下，一切似乎都正常。

“截断”的意思是徽标，特别是“创意摄影师”一词，似乎非常靠近显示器的左侧。

对于其他屏幕分辨率（1200x800、800x600），图像对我来说也很好！

该网站是公开的，网址为[http://www.antoniafiore.com](http://www.antoniafiore.com)

我有什么不对吗？你能建议我哪里错了吗？

感谢您的回复！

这里有一些截图

*   带有命令栏的 Firefox（好）：[http ://bit.ly/SKser1](http://bit.ly/SKser1)
*   没有命令栏的 Firefox（坏）：[http ://bit.ly/QFPCIk](http://bit.ly/QFPCIk)
*   带有命令栏的 IE（好）：[http ://bit.ly/Q2m8Ub](http://bit.ly/Q2m8Ub)
*   没有命令栏的 IE（坏）：[http ://bit.ly/VxGgD4](http://bit.ly/VxGgD4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T01:22:37.153

如果您可以使用 CSS 3，我建议您将这样的样式应用于您的背景：

```
div#bg
{
    background-image: url('bg.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    height: 100%;
    width: 100%;
} 
```

这将确保无论当前屏幕分辨率如何，您的图像都能正确缩放。我用它来在我的网站上显示我不想被错误地缩放或切碎的高分辨率图像。

background-size 属性是特定于 CSS 3 的，但其余属性与 CSS 2 兼容。此外，您不需要为此使用 jQuery。它可以用直接的 CSS 3 来完成。

# javascript - 值不存储在隐藏字段中

> ID：12762710
> 
> 赞同：-1
> 
> 时间：2012-10-06T18:44:16.060
> 
> 标签：javascript, jquery

我有一个 js 函数，它使用 $.post 来获取数据并将值存储在函数中的隐藏字段中，它工作正常，但在调用函数后在函数之外它将不起作用，但如果我只使用 alert('sometext'); 在警告隐藏字段的值之前，它将存储值并给出正确的输出代码看起来像

```
function abc(){
    $.post('sch.php',{begin:'he'},function(data){
        $('#g').attr('value',data);
    });
}
//call a function
abc();
alert($('#g').attr('value'));
//won't alert stored value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:48:09.853

$.post 是异步的。尝试访问时数据不可用。您应该使用同步调用或将所有依赖的代码放在回调方法中。修改代码：

```
function abc(callback ){
    $.post('sch.php',{begin:'he'},function(data){
        $('#g').attr('value',data); 
        callback ();
    });
}
//call a function
abc(function(){
alert($('#g').attr('value')); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:46:33.313

使用 .val() 设置一个值。

```
$("#g").val(data); 
```

# java - 在 Java 中使用 switch 的问题

> ID：12762712
> 
> 赞同：1
> 
> 时间：2012-10-06T18:44:21.213
> 
> 标签：java, logic, switch-statement

我不明白为什么它总是返回 arg1 的值。我正在构建一个重量转换器。

```
public double convert(double arg1,int arg2,int arg3) {
    // arg1 = amount, arg2 = from, arg3 = to
    double milligram = 1;
    double gram = 1000;
    double ounce = 28349.5;
    double pound = 453592;
    double answer = 0;
    switch(arg2) {
    case 0: switch(arg3) { // if milligram
            case 0: answer = (arg1 * milligram) / milligram;
            case 1: answer = (arg1 * milligram) / gram;
            case 2: answer = (arg1 * milligram) / ounce;
            case 3: answer = (arg1 * milligram) / pound;
    }
    case 1: switch(arg3) { // if gram
            case 0: answer = (arg1 * gram) / milligram;
            case 1: answer = (arg1 * gram) / gram;
            case 2: answer = (arg1 * gram) / ounce;
            case 3: answer = (arg1 * gram) / pound;
    }
    case 2: switch(arg3) { // if ounce
            case 0: answer = (arg1 * ounce) / milligram;
            case 1: answer = (arg1 * ounce) / gram;
            case 2: answer = (arg1 * ounce) / ounce;
            case 3: answer = (arg1 * ounce) / pound;
    }
    case 3: switch(arg3) { // if pound
            case 0: answer = (arg1 * pound) / milligram;
            case 1: answer = (arg1 * pound) / gram;
            case 2: answer = (arg1 * pound) / ounce;
            case 3: answer = (arg1 * pound) / pound;
    }
    } // end arg2 switch
    return answer;
} 
```

我在逻辑的某个地方搞砸了，但我看不到在哪里。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-06T18:46:05.157

您缺少`break`陈述：

```
case 0: 
   answer = (arg1 * milligram) / milligram;
   break;
   ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T18:47:20.403

像这样重写每个案例

```
case 2: switch(arg3) { // if ounce
        case 0: answer = (arg1 * ounce) / milligram;break;
        case 1: answer = (arg1 * ounce) / gram;break;
        case 2: answer = (arg1 * ounce) / ounce;break;
        case 3: answer = (arg1 * ounce) / pound;break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T18:46:14.083

嵌套的 case 语句很难阅读，也很难调试。将您需要的功能封装到方法调用中会是一个更好的主意。

话虽如此，`break`您的开关中没有任何声明。无论哪种情况，它都会落到最后一种情况（设置答案等于案例的底部）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T18:47:27.590

你应该`break`在 switch 语句中使用，否则你的结果可能会被破坏

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T18:52:28.270

除了 using `break`， using`return`语句也可以做到这一点，它还可以防止案例失败。

```
case 2: switch(arg3) { // if ounce
    case 0: return (arg1 * milligram) / milligram; 
```

# c# - 如何检查用户是否是管理员

> ID：12762715
> 
> 赞同：0
> 
> 时间：2012-10-06T18:44:33.550
> 
> 标签：c#, sql-server

如果用户不是管理员，我想阻止我的客户端应用程序的功能。但问题是如何检查登录名和密码是管理员的程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:48:45.740

我假设两件事：

1.  您想知道登录用户是否是 SQL Server 上下文中的管理员。
2.  所有“管理员”用户都属于某个角色，例如`db_owner`. （抱歉，我面前没有 SQL Server，也不记得我脑海中的所有角色名称，所以我从 MSDN 文档页面示例中提取了一个足够接近的角色名称。）

如果这些假设成立，那么它看起来[`IS_MEMBER`](http://msdn.microsoft.com/en-us/library/ms186271%28v=sql.90%29.aspx)会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:50:46.850

在 ASP.Net 中，您将使用 Page.User.IsInRole("RoleName") 或在 Windows 中，您可以使用 System.Threading.Thread.CurrentPrincipal.IsInRole("RoleName")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T02:35:21.037

```
SELECT IS_SRVROLEMEMBER('sysadmin', 'YourLogin') 
```

或运行以下存储过程，它将为您提供与任何用户关联的所有权限。

```
sp_helprotect @username = 'guest' 
```

# bash - 使用 bash 进行有条件的网站抓取

> ID：12762727
> 
> 赞同：0
> 
> 时间：2012-10-06T18:45:36.233
> 
> 标签：bash, curl, scrape

以下脚本从网站上抓取电影标题

```
#!/bin/bash
parse_url() {
ids=$(curl -s "$1" | grep -o -P '(?<=list.php\?mid=)\d+')
for id in $ids
do 

titles=$(curl -s "http://subtitle.co.il/view.php?id=$id&m=subtitles#${id#1}" | grep -o -P '(?<=style="direction:ltr;" title=")(.*?)(?=">)')
for title in $titles 
if [[ "$title" == *720p* ]]
then
echo "$title"
fi
done
done
echo "done"
} 
```

我只想在 $title 包含“720p”时回显它。当我运行脚本时，它返回以下错误： 意外标记 'if' 附近的语法错误 if [[ "$title" == *720p* ]]' 我哪里出错了？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:25:02.647

你忘记了之前的`do`之后`for`。

# ruby-on-rails - 如何使用 Rails、Carrierwave 和 Minimagick 在上传时裁剪图像？

> ID：12762728
> 
> 赞同：6
> 
> 时间：2012-10-06T18:45:39.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, minimagick

我读过了：

*   [未定义的方法裁剪！在 Rails 3.1.3 上使用带有 MiniMagick 的 Carrierwave](https://stackoverflow.com/questions/8418973/undefined-method-crop-using-carrierwave-with-minimagick-on-rails-3-1-3)
*   [载波裁剪](https://stackoverflow.com/questions/6757359/carrierwave-cropping)
*   [http://pastebin.com/ue4mVbC8](http://pastebin.com/ue4mVbC8)

所以我尝试了：

```
# encoding: utf-8

class ProjectPictureUploader < CarrierWave::Uploader::Base
  include CarrierWave::MiniMagick

  storage :file
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  version :thumb do
    process :cropper
    # process :crop
    process resize_to_fit: [200, 200]
  end

  def cropper
    manipulate! do |img| 
      # if model.crop_x.present?
        image = MiniMagick::Image.open(current_path)
        crop_w = (image[:width] * 0.8).to_i
        crop_y = (image[:height] * 0.8).to_i
        crop_x = (image[:width] * 0.1).to_i
        crop_y = (image[:height] * 0.1).to_i
      # end
      img = img.crop "#{crop_x}x#{crop_y}+#{crop_w}+#{crop_h}"
      img
    end 
  end

  def crop
    if model.crop_x.present?
      resize_to_limit(700, 700)

      manipulate! do |img|
        x = model.crop_x
        y = model.crop_y
        w = model.crop_w
        h = model.crop_h

        w << 'x' << h << '+' << x << '+' << y

        img.crop(w)
        img
      end
    end
  end

end 
```

然后我使用**cropper** : undefined local variable or method `crop_h' for /uploads/tmp/20121006-2227-4220-9621/thumb_Koala.jpg:#

然后**裁剪**：未定义的方法 `crop_x' for #

模型：

```
class Project < ActiveRecord::Base
  ...
  mount_uploader :picture, ProjectPictureUploader
end 
```

导轨 3.2，Win7，

convert -version 版本：ImageMagick 6.7.9-4 2012-09-08 Q16 [http://www.imagemagick.org](http://www.imagemagick.org) 版权所有：版权所有 (C) 1999-2012 ImageMagick Studio LLC 功能：OpenMP

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T20:45:25.367

我已经明白了。

```
 version :thumb do    
    process resize_to_fit: [300, nil]
    process crop: '300x150+0+0'
    #process resize_and_crop: 200
  end

private

  # Simplest way
  def crop(geometry)
    manipulate! do |img|      
      img.crop(geometry)
      img
    end    
  end

  # Resize and crop square from Center
  def resize_and_crop(size)  
    manipulate! do |image|                 
      if image[:width] < image[:height]
        remove = ((image[:height] - image[:width])/2).round 
        image.shave("0x#{remove}") 
      elsif image[:width] > image[:height] 
        remove = ((image[:width] - image[:height])/2).round
        image.shave("#{remove}x0")
      end
      image.resize("#{size}x#{size}")
      image
    end
  end 
```

从这里调整大小和裁剪：

[http://blog.aclarke.eu/crop-and-resize-an-image-using-minimagick/](http://blog.aclarke.eu/crop-and-resize-an-image-using-minimagick/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T20:20:58.973

在 #cropper 中，您的cropper_h 未初始化（您改为双重初始化cropper_y）。在#crop 中，错误正是错误消息所说的 - 您没有为 Project 类定义crop_x。

# c# - 无法从用法中推断出方法的类型参数

> ID：12762731
> 
> 赞同：1
> 
> 时间：2012-10-06T18:45:56.170
> 
> 标签：c#, methods, arguments, grasshopper

我收到带有以下代码的以下错误消息。我不确定这是否与 Grasshopper 内核有关，或者我没有`DataAccess.GetDataList()`正确编写方法。我希望你能帮忙。

`The type arguments for method 'Grasshopper.Kernel.IGH_DataAccess.GetDataList<T>(int, System.Collections.Generic.List<T>)' cannot be inferred from the usage. Try specifying the type arguments explicitly.`

代码：

```
protected override void RegisterInputParams(GH_Component.GH_InputParamManager pManager)
{
pManager.AddTextParameter("SomeString", "SS", "Send Some String Somwhere", GH_ParamAccess.list); //0
}
protected override void SolveInstance(IGH_DataAccess DA)
{

string SomeString = default(string);
DA.GetDataList(0, ref SomeString);

if (!DA.GetDataList(0, ref SomeString)) return;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:50:19.927

该错误表明该函数需要 an`int`和 a`List<T>`但您提供的是 an`int`和 a `string`。您也不需要`ref`修饰符。

你需要做这样的事情：

```
List<string> someStrings = new List<string>();
if(! DA.GetDataList(0, someStrings)) return; 
```

# c++ - 使用 I/O 比较文件，不断收到运行时错误

> ID：12762732
> 
> 赞同：0
> 
> 时间：2012-10-06T18:45:58.153
> 
> 标签：c++, input, io, compare

我有一个任务要求

```
a.) Prompts the user to input the names of 3 files: two input files
and an output file.  
b.) Reads in the two input files line by line and compares the two
lines.
c.) For each line in the inputs, the output should have the line
number, a colon (':'), and either "OK" if the lines match or "DIFF" if
the lines are different.
The input files may be of different lengths. 
- Your program should be case-sensitive, so you do NOT need to worry about converting 

text to lowercase or uppercase.

For example:

input1:
abc
def
g h i

input2:
abc
DEf
ghi
uub

output:
1:OK
2:DIFF
3:DIFF
4:DIFF 
```

基本上我已经编写了代码，但是每次我尝试在 Putty 上运行它时，它都能正确编译。

```
:: a.out
Please enter input file name: abc
terminate called after throwing an instance of 'std::runtime_error'
  what():  Can't open input file: abc
Abort (core dumped) 
```

所以在我输入我的文件名之前，它得到了返回错误，我根据 Stroustrup 的书写了我输入和输出的每一部分。我到底错过了什么，或者我只是做错了？谢谢你。

```
#include "std_lib_facilities_3.h"

int main()
{
    //Input 1
    cout  << "Please enter input file name: ";
    string name;
    cin >> name;
    ifstream ist1(name.c_str());
    if (!ist1) error("Can't open input file: ",name);

    //Input 2
    cout << "Please enter another input file name: ";
    string name2;
    cin >> name2;
    ifstream ist2(name2.c_str());
    if (!ist2) error("Can't open input file name: ",name2);

    //Output
    cout << "Please enter name of output file: ";
    string oname;
    cin >> oname;
    ofstream ost(oname.c_str());
    if (!ost) error("Can't open output file: ",oname);

    string s, t;
    int i = 1;
    int flag = 1;
    while(true) 
    {
        if (!getline(ist1, s)) {flag = 1; break;}
        if (!getline(ist2, t)) {flag = 2; break;}
        ost << i;
        if (s == t)
            ost << ": OK\n";
        else
            ost << ": DIFF\n";
        i++;
    }

    if (flag == 2) {
        ost << i << ": DIFF\n"; 
        i++;
        while (getline(ist1, s)) {ost << i << ": DIFF\n"; i++;}
    }

    if (flag == 1) {
        while (getline(ist2, t)) {ost << i << ": DIFF\n"; i++;}
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:27:56.937

你的程序没问题，但你需要确保你输入了整个文件名，包括文件扩展名。我能够使用这些文件成功运行您的程序：

*   `program.cc`——你的程序源
*   `program`— 你的程序，编译
*   `file-a.txt`— 一个文本文件：

    ```
    Hello, world!
    This is a file.
    This line is different.
    But same again. 
    ```

*   `file-b.txt`— 另一个文本文件：

    ```
    Hello, world!
    This is a file.
    This line differs from file A.
    But same again. 
    ```

然后我能够成功运行您的程序：

```
$ ./program
Please enter input file name: file-a.txt
Please enter another input file name: file-b.txt
Please enter name of output file: diffed.txt 
```

`diffed.txt`它使用以下输出成功创建：

```
1: OK
2: OK
3: DIFF
4: OK 
```

# c# - 使用什么是结合 Autofac 和 Dapper 的首选方式

> ID：12762733
> 
> 赞同：5
> 
> 时间：2012-10-06T18:46:03.360
> 
> 标签：c#, inversion-of-control, ioc-container, autofac, dapper

我们一直在使用 EF 作为当前应用程序中大多数数据访问的主干，我们正在慢慢地从它转移到一些服务器密集型查询，并用 Dapper 代替它。

考虑到这一点，实现与 Autofac 连接的首选方式是什么？是注入 IDBConnection 还是连接字符串？IDBConnection 对我来说感觉更好，但如果您使用“使用”，它会被丢弃，后续调用无法访问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-05T04:05:06.813

我们有同时使用 EF 和 Dapper 的项目。我们正在像这样注册 IDbConnection：

```
 builder.Register(c =>
            {
                var db = c.Resolve<MyDbContext>();
                if (db.Database.Connection.State != ConnectionState.Open)
                {
                    db.Database.Connection.Open();
                }
                return db.Database.Connection;
            })
               .As<IDbConnection>()
               .ExternallyOwned() // DbContext owns connection and closes him when disposing.
               .InstancePerHttpRequest(); 
```

并在我们的控制器中注入 IDbConnection。

# sublimetext2 - 如何将 tmlanguage 文件加载到 SubLime Text 2 中？

> ID：12762736
> 
> 赞同：21
> 
> 时间：2012-10-06T18:46:11.847
> 
> 标签：sublimetext2

我已经下载了 typescript.tmlanguage，以便我可以在 Sublime Text 2 编辑器中突出显示 typescript 语法。如何在编辑器中加载此文件？（我已经搜索了编辑手册，但没有明确的答案）谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-06T19:24:00.540

您应该`Typescript`在目录中创建目录`Packages`并将其放入`typescript.tmLanguage`。

包目录可以通过 menu 找到`Preferences/Browse Packages...`。

# php - 第1行Mysql语法错误

> ID：12762744
> 
> 赞同：0
> 
> 时间：2012-10-06T18:46:55.950
> 
> 标签：php, mysql, yii

我在使用 yii 进行敏捷 Web 应用程序开发教程时写了一个查询。我试图用这个查询改变一个表，并在 phpmyadin 中得到这个错误

```
ALTER TABLE 'tbl_issue' ADD CONSTRAINT 'FK_issue_project' FOREIGN KEY
('project_id') REFERENCES 'tbl_project' ('id') ON DELETE CASCADE ON
UPDATE RESTRICT

> #1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use
> near ''tbl_issue' ADD CONSTRAINT 'FK_issue_project' FOREIGN KEY
> ('project_id') REFERE' at line 1 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:55:02.423

问题可能是您使用单引号而不是反引号作为表、字段和索引名称的封闭字符。

尝试：`ALTER TABLE `myTable` ADD CONSTRAINT `myConstraint`...`

（如果发布的代码实际上是您用于通过 phpMyAdmin 执行的语句的代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:10:05.447

SQL 在指定表名时不需要任何单引号标记。这也是插入和更新创建等的情况。删除引号，它应该被修复

# wpf - WPF RibbonTextBox 数据绑定到双倍

> ID：12762746
> 
> 赞同：1
> 
> 时间：2012-10-06T18:47:14.117
> 
> 标签：wpf

我使用 VS2012 Express 附带的默认 WPF 功能区。
当 RibbonTextBox 数据绑定到由值 1.75 初始化的视图模型中的 double 属性时，它会显示它并允许修改小数点分隔符周围的数字，而不会像输入非数字字符（如“x”等）时那样将其**框为红色**
。 但是一旦小数点分隔符已删除，无法将其键入回 RibbonTextBox。它接受无意义的字符，但不接受小数分隔符。换句话说，删除小数点分隔符后，它的行为更像是数据绑定到 int。

**XAML**

```
xmlns:rib="http://schemas.microsoft.com/winfx/2006/xaml/presentation/ribbon"
...
<StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" >
<Label Content="Source Gamma " />
<rib:RibbonTextBox Text="{Binding SrcGamma, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="50"/>
</StackPanel> 
```

**后面的 C# 代码**

```
public double SrcGamma { get; set; } // initialised to 1.75d 
```

*注1*：首先，我怀疑这是一个文化问题。我的 Windows 文化 (cs-CZ) 使用“，”小数点分隔符，但我的应用程序显示“。” 分隔器。
a) 将 Windows 文化分隔符设置为“。” 没有帮助。
b）根据[此](https://stackoverflow.com/questions/8855272/binding-double-to-textbox)SO question 覆盖应用程序区域设置后，将显示正确的 Windows 文化分隔符，但也无法输入。

*注意 2*：在我的调查中，我添加了一个标准的 TextBox（在功能区之外）。在向其添加自定义双重验证规则后，它开始表现与提到的 RibbonTextBox **相同的方式。**

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:05:09.597

答案隐藏在这篇[SO 文章](https://stackoverflow.com/questions/4712917/why-does-binding-setup-behave-differently-in-net-4-vs-net-3-5)中。

奇怪的行为是由我曾经在 .NET 3.5 中使用的**UpdateSourceTrigger=PropertyChanged引起的，它以预期的方式运行。**删除后，现在可以毫无问题地添加小数分隔符。

好吧，MS 有理由进行此更改，所以让我们牢记这一点。

# linux - 使用hrtimer回调函数，是否可以给函数参数？

> ID：12762753
> 
> 赞同：2
> 
> 时间：2012-10-06T18:47:24.727
> 
> 标签：linux, parameters, callback

所以如果我像这样使用：

```
.............................

enum hrtimer_restart my_hrtimer_callback( struct hrtimer *timer )

.............................

hr_timer.function = &my_hrtimer_callback;
...............................
hrtimer_start(hr_timer,ktime,HRTIMER_MODE_REL);
............................... 
```

是否可以在计时器启动期间将任何参数传递给回调函数？我谷歌了一下，但没有找到线索。怎么用？

谢谢；>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T01:42:08.663

将 嵌入到`struct hrtimer`您的创作结构中，其中包含您可能需要的任何其他信息。然后用于[`container_of()`](http://www.kroah.com/log/linux/container_of.html)从参数中获取指向包含结构的指针`timer`。

# c# - 调试时跳过 Debug.WriteLine

> ID：12762756
> 
> 赞同：8
> 
> 时间：2012-10-06T18:47:30.990
> 
> 标签：c#, debugging

我正在编写一个简单的 C# 代码，但是`Debug.WriteLine("..");`出现的部分被跳过了。例如：

```
WebClient wc = new WebClient();

        wc.Encoding = System.Text.Encoding.GetEncoding("ISO-8859-1");
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(SearchWordsDownloaded);

        Debug.WriteLine("test");
        wc.DownloadStringAsync(new Uri("SomeURL")); 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-28T13:40:12.103

我看到了这个 - Debug.WriteLine() 语句被跳过以进行带有调试器的调试构建。不知道为什么，但没有设置调试编译符号。转到项目属性页面的构建部分，然后在“条件编译符号”字段中输入“调试”（不带引号）。这导致调试器再次开始输入 Debug 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T19:38:17.803

可以跳过它的唯一方法是在发行版中运行它。

尝试清理解决方案，并确保它处于调试模式并在此代码段中添加一个断点并按 F5。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-27T19:14:20.937

如果 Active Solution 平台设置为 x86 或 x64，我已经让它跳过 Debug.Writeline 语句。似乎它们只有在您将配置管理器设置为“任何 CPU”时才能被击中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-12T11:30:15.190

This is an old post and I had the problem in Diagnostics using Debug class and Trace class in 64bit console app in Visual Studio 2017\. For some who are experiencing this problem in Visual Studio 2017\. What I did was to copy the configuration of a console app project properties Build->General setting.

[![enter image description here](../Images/463561dc292803900cc4a8d406c1beae.png)](https://i.stack.imgur.com/APmqc.jpg)

# python - 如何使用 python/mysql 处理重复项？

> ID：12762757
> 
> 赞同：0
> 
> 时间：2012-10-06T18:47:30.090
> 
> 标签：python, mysql

我有一个 sql 查询，它从我的表 Person 中返回一个带有 id 的重复项列表：

```
1   hudson
43  hudson
67  hudson
34  roger
79  roger
89  kerry
403 kerry 
```

使用 Python 脚本，我想自动化这种查询，例如“hudson”案例：

```
UPDATE Customer SET person_id = 1 WHERE person_id = 43; 
```

当设置重复的数量（例如 2）时，我认为我们可以执行以下操作：

```
cursor.execute(*myquery that returns list of duplicates*)
rows=cursor.fetchmany(2)
row1=rows[1] #??
row2=rows[2] #??
cursor.execute('UPDATE Customer SET person_id = row1[0] WHERE person_id = row2[0];') 
```

当重复的数量可变时，我真的不知道该怎么做。

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:55:20.547

按名称分组并从每个组中选择最小的人员 ID。

还可以考虑使用[Python Pandas](http://pandas.pydata.org/)并将所有数据转储到 Pandas DataFrame 中，然后您就可以使用该`drop_duplicates`函数。我发现创建自己的 SQL-to-h5 和 SQL-to-Pandas 后端代码让我在 Pandas 中完成我所有的 Python 工作并且永远不会直接弄乱 SQL 是非常值得的。

# java - java.util.Currency 和 ISO 4217 标准

> ID：12762759
> 
> 赞同：1
> 
> 时间：2012-10-06T18:47:39.890
> 
> 标签：java, currency

继我之前的问题[java-util-currency-getinstance-throwing-illegalargumentexception](https://stackoverflow.com/questions/12761846/java-util-currency-getinstance-throwing-illegalargumentexception)之后，我正在查看[java.util.Currency的源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Currency.java#Currency.0instances)

我看到了以下代码片段：

```
static {
  AccessController.doPrivileged(new PrivilegedAction() {
    public Object run() {
      String homeDir = System.getProperty("java.home");
      try {
        String dataFile = homeDir + File.separator +
        "lib" + File.separator + "currency.data";
        DataInputStream dis = new DataInputStream(
        new BufferedInputStream(
        new FileInputStream(dataFile)));
        if (dis.readInt() != MAGIC_NUMBER) {
          throw new InternalError("Currency data is possibly corrupted");
        }
        ....
        ....
        ....
        ....
        if (false) {
          // look for the properties file for overrides
          try {
            File propFile = new File(homeDir + File.separator +
            "lib" + File.separator +
            "currency.properties");
            //more code 

          } 
```

我想知道它的位置，`currency.data`或者`currency.properties`因为我无法在里面找到任何此类文件`C:\Program Files\Java\jre6\lib`。

在 rt.jar 下查看时，我可以看到一个类 ，`CurrencyData`它定义了一些条目，但不确定它与`java.util.Currency`.

我正在`public static Currency getInstance(String currencyCode) {}`查看它如何检查给定的货币代码是否在 ISO 4217 列表中。 `CurrencyData.properties`看起来像用于存储和传递此信息的文件 将[货币数据更新为最新的 ISO 4217 标准](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7066203)

希望能得到更多这方面的信息。目前我正在使用以下Java版本：

```
java version "1.6.0_21"
Java(TM) SE Runtime Environment (build 1.6.0_21-b07)
Java HotSpot(TM) 64-Bit Server VM (build 17.0-b17, mixed mode) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:42:38.617

您链接到的源代码是 OpenJDK 6，但是您使用的是 Oracle Java 6。Oracle Java 6 的源代码不引用这些货币文件，因此它们不会出现在您的安装中。

请记住，OpenJDK 是从 Oracle Java 7 分支出来的（它*确实*引用了`Currency`类中的这些文件）。OpenJDK 6 是通过从 OpenJDK 7 中剥离代码创建的，直到它与 Java 6 规范匹配（[有关信息，请参阅此链接](http://www.infoq.com/news/2009/01/jdk-openjdk-icedtea)）。很明显，这个特定的代码块在反向移植中幸存下来。

我怀疑如果您安装 OpenJDK 6，您会找到这些文件。同样，我的 Oracle Java 7 安装也有这些文件。

请注意，Oracle Java 6 似乎将货币数据存储在包私有`java.util.CurrencyData`类中。

# php - 登录无效，注册时是

> ID：12762761
> 
> 赞同：-2
> 
> 时间：2012-10-06T18:48:05.333
> 
> 标签：php, mysql, login

我已经做了足够的研究，登录时它不会将我重定向到资源页面，以防密码正确。我之前尝试过密码的 SHA1，但首先处理更简单的情况，我删除了它。当我问 NAME = '$usr'，因为我有用户作为用户名，如果我也输入用户，它不会显示错误的用户名，如果我们尝试这个，在终端上，对于用户名 'user' 或 'User'，它显示一样。

```
<?php
    $con = mysql_connect("localhost","root","*****");
    session_start();
if(isset($_POST['submit1']))
    {
            if (!$con)
            {
                    die("OOPS!Could not connect to server".mysql_error());
            }
                    $passwd = $_POST['password'];
                    $usr=$_POST['username'];
                    mysql_select_db('USERS',$con) or die(mysql_error());
                    $result = mysql_query("SELECT PASSWD FROM USERS WHERE USERNAME='$usr'",$con) Or die(mysql_error());
                    $pass = mysql_result($result,0);
                    if ($pass==$passwd) {
                            header('Location : resource.html');}
                    else
                            {echo "sorry $usr wrong username or password"; }

    }
else if(isset($_POST['submit2']))
    {
            $usr = $_POST['user'];
            $passwd = $_POST['password1'];
            $name = $_POST['fullname'];
            mysql_select_db('USERS',$con) or die(mysql_error());
            $result = mysql_query("SELECT * FROM USERS WHERE USERNAME='$usr'",$con) Or die(mysql_error());
            $num = mysql_num_rows($result);
            if ($num==0) {
            mysql_query("INSERT INTO USERS(NAME,USERNAME,PASSWD) VALUES('$name','$usr','$passwd')");
            echo "congrats! you have been added.Go back to resources and log in";
            }
            else echo "Someone already has that username. Go back and try with another username";
    }

 mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T18:49:46.183

你在回声前少了一个分号

```
mysql_query("INSERT INTO USERS(NAME,USERNAME,PASSWD) VALUES('$name','$usr','$passwd')");//<-- right here
echo "congrats! you have been added.Go back to resources and log in"; 
```

另外，您没有清理用户输入，请查看准备好的语句（[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)，[mysqli](http://www.php.net/manual/en/book.mysqli.php)）

# svn - 如何在工作副本中递归列出切换的 svn 目录？

> ID：12762766
> 
> 赞同：1
> 
> 时间：2012-10-06T18:48:24.507
> 
> 标签：svn, recursion, svn-switch

我已经从存储库中签出了一个工作副本，并将一些目录切换到不同的 URL，但在同一个 repo（相同的主机和 svn 服务器）上。

我如何列出这些切换的目录？

我们为内部目的使用了许多切换，这将有助于在工作副本中轻松列出所有这些，直到消除这种快速而肮脏的切换使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T21:35:50.943

(1) @ks1322 提供的答案很简洁，除了一个小调整外它工作正常：应该使用“^URL”而不是“URL”，因为有些文件也会报告`Copied from URL`一行。这是我系统上的一些示例输出，显示了这个小问题：

```
URL: file:///C:/usr/tmp/SvnSandbox/branches/sub-branch1
URL: file:///C:/usr/tmp/SvnSandbox/branches/sub-branch1/commands
URL: file:///C:/usr/tmp/SvnSandbox/branches/sub-branch1/commands/show%20test.cmd
URL: file:///C:/usr/tmp/SvnSandbox/trunk/commands/subdir
URL: file:///C:/usr/tmp/SvnSandbox/trunk/commands/subdir/stuff.txt
URL: file:///C:/usr/tmp/SvnSandbox/branches/sub-branch1/commands/reversion_test.txt
URL: file:///C:/usr/tmp/SvnSandbox/branches/sub-branch1/file-on-branch1.txt
Copied From URL: file:///C:/usr/tmp/SvnSandbox/branches/branch1/file-on-branch1.txt
URL: file:///C:/usr/tmp/SvnSandbox/branches/sub-branch1/externals
URL: file:///C:/usr/tmp/SvnSandbox/branches/sub-branch1/file-on-branch-and-subbranch.txt
URL: file:///C:/usr/tmp/SvnSandbox/branches/sub-branch1/file-on-sub-branch1.txt 
```

* * *

(2) 对于 Windows 系统，一个等效的命令（使用 PowerShell）是：

```
svn info --depth=infinity | Select-String ^URL 
```

* * *

(3) 但对于具有更高信噪比的输出，请尝试以下操作：

```
Get-SvnInfo . -Recurse -ContainersOnly Path, URL | 
Format-Table Path, `
    @{ n='Branch'; `
       e={$_.URL -replace ".*(trunk|branches/[^/]*).*", '$1'} } 
```

该序列的输出一目了然地向您展示了您需要了解的内容。从我的第一个示例中使用的同一示例树中，它揭示了以下内容：

```
Path                              Branch
----                              ------
commands                          branches/sub-branch1
externals                         branches/sub-branch1
commands\subdir                   trunk
externals\commonlib               trunk
externals\commonlib\textfiles     trunk 
```

（该`Get-SvnInfo`cmdlet 可从我的开源 PowerShell 库中获得——有关详细信息，请参阅我的[API 书架](http://cleancode.sourceforge.net/wwwdoc/APIbookshelf.html)上的 PowerShell 书籍。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T19:23:46.857

您可以使用以下命令递归地列出工作副本中所有文件和目录的 URL：

```
svn info --depth=infinity|grep URL 
```

您将在输出中看到切换的 URL，因此也会看到切换的目录。

# latex - 使用 pandoc 修改 rst 中的变量

> ID：12762767
> 
> 赞同：4
> 
> 时间：2012-10-06T18:48:36.087
> 
> 标签：latex, restructuredtext, pandoc

我正在将`.rst`文档转换为`.tex`with`pandoc`并且我想修改变量，例如`$date`在`.rst`文档中。我正在使用：

```
============
My doc title
============

:Date: October

My first title
==============

Lipsum… 
```

该变量确实被覆盖了，但是使用这样的字段列表会在生成的 LaTeX 文档中生成一个定义部分：

```
\title{My doc title}
\date{Octobre}

\begin{document}
\maketitle

\begin{description}
\end{description} 
```

这个空`description`使得 LaTeX 编译失败。当我不使用字段列表时，它会消失。

`description`在我的 RST 文档中使用字段列表时如何避免此部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T03:10:25.300

这是 pandoc 中的一个错误，我刚刚修复了它。（修复将在下一个版本中，但如果您现在需要它，您可以编译开发版本：请参阅[此处](https://github.com/jgm/pandoc/wiki/Installing-the-development-version-of-pandoc-1.10)获取说明。）

另请注意，pandoc 目前仅将作者、标题和日期识别为元数据字段。如果您期望其他字段设置模板变量，您会感到失望。

# c++ - 为变量和激活记录保留空间

> ID：12762772
> 
> 赞同：-1
> 
> 时间：2012-10-06T18:48:45.500
> 
> 标签：c++, c, memory, stack

只声明一个变量是否会在程序内存中为它保留一个空间？如果没有，请考虑以下代码段：

```
void foo(int bar, int baz){
int a;
char b[4];
} 
```

此代码一进入 foo 就会在堆栈中分配一个空间并创建如下激活记录：

* * *

## | 巴兹 |

* * *

## | 酒吧 |

* * *

## | 保存的电脑 |

* * *

## | 一个 |

* * *

## | 乙 |

那么，这个激活记录如何为 a 和 b 分配空间，即使它们只是声明而没有定义呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:12:23.687

`a`并且`b`已定义但未使用。由于程序无法判断它们是否被创建，编译器可以自由地忽略它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:59:53.070

不一定，在某些优化条件下编译器可能会选择丢弃未初始化变量占用的空间。但是始终建议从代码中删除从未使用过的变量。

在一般情况下，假设 32 位系统，您的编译器将在堆栈中清除至少 4+4 字节的空间，以保存将来可能使用的变量数据。

# mysql - 从mysql中的2行合并搜索

> ID：12762774
> 
> 赞同：0
> 
> 时间：2012-10-06T18:48:45.010
> 
> 标签：mysql

我进行了一项调查，其中所有答案都存储在“调查”表的单独行中。我的表如下所示：

```
(ID,user_id,Q,A)
(1,10,'laundry','oxiclean')
(2,10,'laundry','tide')
(3,10,'laundry','pods')
(4,11,'laundry','spray n wash')
(5,11,'laundry','resolve')
(6,12,'laundry','oxiclean')
(7,13,'laundry','oxiclean') 
```

我现在需要提取仅选择特定产品的用户 ID 计数。

```
"SELECT *, count(user_id) FROM survey WHERE Q='laundry' GROUP BY a" 
```

以上将给出一个总体计数，但我需要根据仅选择“oxiclean”的用户来获取我的计数。这应该返回 2。

或仅选择“oxiclean”和“潮”的用户。

如何执行从不同行提取的结果的这种“组合”？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T20:13:45.167

```
select user_id from survey group by user_id having count(user_id) = 1 
```

这将检索在调查中只有一个答案的用户列表。将其用作过滤条件：

```
select q,a,count(user_id) 
from survey
where a = 'oxiclean'
and user_id in (select user_id from survey group by user_id having count(user_id) = 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:24:30.643

您可以使用[子查询](http://dev.mysql.com/doc/refman/5.0/en/subqueries.html)来实现这一点，对于您的情况，它将是这样的：

```
SELECT *, COUNT(user_id)
FROM survey AS s
WHERE Q = 'laundry'
AND A = 'oxiclean'
AND user_id NOT IN (SELECT user_id FROM survey WHERE Q = s.Q AND A != s.A); 
```

`s.Q`并`s.A`参考父字段，这样您就不必再次重新注入名称。
缺点：只有当您想要一个特定的答案时，该查询才有效。

如果您想要一个查询来检索总计数，这个应该可以解决问题：

```
SELECT A, COUNT(user_id)
FROM (
  SELECT A, user_id
  FROM survey
  WHERE Q='laundry'
  GROUP BY user_id
  HAVING COUNT(user_id) = 1
  ) AS t
GROUP BY A 
```

缺点：查询只给出只有至少一个唯一 user_id 的答案，如此处所示[，](http://sqlfiddle.com/#!2/86270/1)并且这种语法会创建一个临时表，出于性能原因要避免这种情况。

# php - 在 PHP 中使用正则表达式删除嵌套括号

> ID：12762778
> 
> 赞同：4
> 
> 时间：2012-10-06T18:49:15.737
> 
> 标签：php, regex

> **可能重复：**
> [可以使用正则表达式匹配嵌套模式吗？](https://stackoverflow.com/questions/133601/can-regular-expressions-be-used-to-match-nested-patterns)

我有一个这样的字符串：

```
$string = "Hustlin' ((Remix) Album Version (Explicit))"; 
```

我想基本上删除括号中的所有内容。在上面带有嵌套括号的情况下，我只想在顶层删除它。

所以我希望结果只是`"Hustlin' "`.

我尝试了以下方法：

```
preg_replace("/\(.*?\)/", '', $string);| 
```

它返回奇数结果：`"Hustlin' Album Version )"`。

有人可以解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-06T19:17:16.603

您的模式`\(.*?\)`与 a 匹配`(`，然后将找到第一个`)`（以及介于两者之间的所有内容）：模式将如何“理解”以匹配平衡括号？

但是，您可以使用 PHP 的递归模式：

```
$string = "Hustlin' ((Remix) Album Version (Explicit)) with (a(bbb(ccc)b)a) speed!";
echo preg_replace("/\(([^()]|(?R))*\)/", "", $string) . "\n"; 
```

会打印：

```
Hustlin'以速度！
```

模式的简短分解：

```
\(         # match a '('
(          # start match group 1
  [^()]    #   any char except '(' and ')'
  |        #   OR
  (?R)     #   match the entire pattern recursively
)*         # end match group 1 and repeat it zero or more times
\)         # match a ')' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:01:16.340

用内部的正则表达式替换做一个简单的循环。

仅替换第一次出现的

```
/\([^()]*\)/ 
```

使用空字符串并重复此操作，直到找不到匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:12:09.537

回答您的问题：您的正则表达式语句使用`preg_replace` *匹配并删除第一次出现的括号序列及其内部的所有内容*- 无论是否出现另一个左括号。

# c++ - STL 中的 VS 编译器错误 C2752（“多个部分特化匹配”）

> ID：12762781
> 
> 赞同：6
> 
> 时间：2012-10-06T18:49:23.310
> 
> 标签：c++, visual-c++, stl

不知何故，我喜欢这些显示（基本？）问题的“最短”程序。在 VS2008 中测试一些模板代码时出现此错误（VS2010 和 VS2012 也已确认，见下文）：

> c:\program files (x86)\microsoft visual studio 9.0\vc\include\xmemory(225) : error C2752: 'std::_Ptr_cat_helper<_T1,_T2>' : 多个部分特化匹配模板参数列表
> 
> ```
>  with
>    [
>        _T1=const float (**),
>        _T2=const float (**)
>    ] 
> ```

我可以将问题归结为以下三行：

```
#include <vector>
typedef float TPoint[3];
std::vector<TPoint const*> points; // error C2752 
```

注意以下都可以

```
#include <vector>
#include <list>
typedef float TPoint[3];
// these similar usages of TPoint are all ok:
std::vector<TPoint*> points; // no error
TPoint const* points1[2];
std::list<TPoint const*> points2; 
```

我试图通过为 struct _Ptr_cat_helper 提供额外的模板特殊化来修复 xutility - 没有运气。任何想法出了什么问题？或者如何在不丢失的情况下解决`const`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T21:36:24.753

这个问题确实是部分专业化的模棱两可：

在内部，分配器使用一些元编程（`_Ptr_cat`）来确定是否要在向量的元素上调用 dtor（或什么都不做）。这种元编程试图通过使用部分特化来区分某些情况。`_Ptr_cat`使用`_Ptr_cat_helper`which 专门用于向量的分配器的指针类型 - 向量的`value_type`is `TPointer const* == const float (*)[3]`，因此向量的分配器具有指针类型`const float(**)[3]`。

使用`std::vector < const float(*)[3] >`时，错误消息包含`[3]`部分，而使用`std::vector < TPoint const* >`时，`[3]`不显示 oO

`_Ptr_cat`期望两个相同类型的模板参数，可能具有不同的 c 限定符，例如`float*, float const*`. 现在，这两种输入类型都是`const float (**)[3]`. MSVC 将它们模糊地解析为`_Ptr_cat_helper`:`Ty**, Ty const**`和/或`Ty**, Ty**`. 我通过编写一个模仿部分专业化的小示例来验证这一点`_Ptr_cat_helper`（只是普通模板，不涉及 Std Lib）。

然而，我无法解释为什么会发生这种情况。奇怪的是，在仅使用一个专业化参数设置示例时没有歧义——按预期`const float(**)[3]`解析为`Ty const**`with 。`Ty = float const[3]`

感谢 Peter Alexander，我还用 g++ 尝试了我的简单示例（2 个模板参数），它按预期工作，没有歧义。也许这可能是编译器问题？

让我提出一些解决方法：

*   如果您真的想修改 MSVC 标准库，您可以添加一个`_Ptr_cat_helper < const Ty (**)[3], const Ty (**)[3] >`完全适合并解决歧义的专业化。不幸的是，您必须明确提供维度 (3)。
*   不要*在这里*使用数组。使用`std::array`（`tr1`在 VS08 中可用）或结构或普通指针（`float const*`而不是`float const[3]`）
*   使用一个简单的包装器：

    ```
    template < typename T > struct wrapper { T wrapped; }
    std::vector < wrapper < TPoint > const* > m; 
    ```

    对我来说很好。

编辑：这是我使用的示例：

```
#include <typeinfo>
#include <iostream>

template < typename T1,  typename T2 >
struct Spec
{
    static const char* check() { return "plain"; }
    typedef void Value;
};

#define MAKE_SPEC(ARG0, ARG1) \
template < typename T > \
struct Spec < ARG0, ARG1 > \
{ \
    static const char* check() { return #ARG0 ", " #ARG1; } \
    typedef T Value; \
}

MAKE_SPEC(T**, T**);
MAKE_SPEC(T**, T const**);
// can do more, but need not to..

int main()
{
    typedef Spec < const float(**)[3], const float(**)[3] > MySpec;

    std::cout << MySpec::check() << " -- " << typeid(MySpec :: Value).name();
} 
```

# c# - 如何在 c# 中显示图像或文件而不将其复制到应用程序（资源）？

> ID：12762786
> 
> 赞同：0
> 
> 时间：2012-10-06T18:50:11.797
> 
> 标签：c#, .net

我是 C# 的新手，我真的很喜欢它，但我想知道我是否将文件（例如图像文件）添加到我的项目中，如果不将其复制到应用程序文件夹，我该如何使用它？例如，文件的名称是 file.jpg，我为按钮编写了这个事件处理程序：

```
picturebox1.image=image.FromFile(@"file.jpg") 
    // it won't show me because it is not copied to app folder. 
```

如何在不复制的情况下使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:55:37.560

显然，您必须以某种方式分发图片。它可以作为资源（然后图片将被复制到 exe 中）或作为内容（文件将被复制到应用程序的文件夹中）。

如果您使用 Contents 解决方案，则不应假定当前目录是应用程序的目录。然后，您应该编写如下内容：

```
pictureBox1.ImageLocation = Path.Combine(
  Path.GetDirectoryName(Application.ExecutablePath),
  "file.jpg"); 
```

否则，您必须知道图像文件的完整路径。

# http - 配置 IIS 以通过 301 重定向传递 POST 数据

> ID：12762789
> 
> 赞同：0
> 
> 时间：2012-10-06T18:50:15.853
> 
> 标签：http, iis, redirect, iis-7

我目前正在为客户端开发一个托管在 IIS 7 上的站点，该站点配置为重定向任何裸域请求以重定向到“www”子域。但是，这会导致网站上的某些表单出现问题，这些表单指向裸域。提交表单时，它会转发到“www”子域上的正确页面，但 POST 参数丢失 - 无论原始请求的请求类型如何，都使用 HTTP GET 请求请求“www”子域上的页面.

我对 IIS 及其配置非常不熟悉，所以我想这很容易解决，但是如何确保通过 IIS 上的 301 重定向保留 POST 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:55:58.793

如果您通过 301 发帖，则帖子数据将被删除。您需要创建重新解析数据并再次发送的 eq php 脚本

```
/* FOR test */

$_POST['value'] = 123;
$_POST['key']  = 888;
# Online $_POST check
$_GET['redirect'] = 'https://posttestserver.com/post.php'; 
/* END: FOR test */

if( filter_var($_GET['redirect'], FILTER_VALIDATE_URL) ) {

    if ( is_array($_POST) ) :

        echo '<form method="post" action="'. $_GET['redirect'] .'" name="f">';

        foreach($_POST as $i => $v){
            echo '<input type="hidden" name="'. $i .'" value="'. $v .'">';
        }

        echo '</form> <script> document.f.submit(); </script>';

    else : // IF _GET

        $tmp = $_GET['redirect'];
        unset($_GET['redirect']);
        $ur = http_build_query($_GET);
        header("Location: " . $tmp . '?' . $ur);
    endif;
} 
```

# vb.net - 在 vb.net 中使用 webbrowser 将 PDF 保存到文件

> ID：12762794
> 
> 赞同：0
> 
> 时间：2012-10-06T18:51:02.563
> 
> 标签：vb.net, pdf, browser

我有一个动态生成的 PDF，我希望将其下载到硬盘上。文件下载由 vb.net 代码启动：

```
WebBrowser1.Navigate("javascript:fnSubmitPDFForm('modalDivpdf')") 
```

我目前获得了带有打开保存取消选项的普通 Internet Explorer“文件下载”窗口。我想指定一个文件夹和文件名并自动下载 PDF。这可能吗？

这是一个更好的链接示例，该链接会引发“文件下载”窗口。我想自动保存 PDF：

```
WebBrowser1.Navigate("http://www2.hungryhorse.co.uk/index.php/download_file/view/838/71/") 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:41:04.290

您既不能自动下载文件，也不能指定路径。但是，您可以提供建议的文件名：

```
context.Response.ContentType = "application/octet-stream"                                                         
context.Response.AddHeader("content-disposition", "attachment; filename=""" & "yourFilename.pdf & """")
context.Response.TransmitFile(actualFile) 
```

其中 yourFilename.pdf 是建议的文件名，actualFile 是要发送的文件的完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-27T16:24:32.020

我知道这是一个旧线程，但我昨天发现它试图解决同样的问题。可能消息来源说不可能做到这一点，但*可以*通过一种解决方法来做到这一点。需要这样做的原因有很多；其他论坛中的一些俏皮话诉诸“但你为什么需要它”。

我必须补充一点，下面的解决方案不是最优雅的，但也许是最简单的，它让我可以在几个小时内解决问题。

有两个步骤：

1.  这将导致 PDF 链接自动触发对话框，询问您是否要保存文件（默认为“取消”）。我通过安装然后删除 Adob​​e Reader 来做到这一点。我知道必须通过查看注册表中的某些键或配置 Web 浏览器来解决它，但我没有时间解决这个问题。

2.  将击键发送到弹出对话框。

代码如下所示：

```
Public Sub YourFunction()
    '...
    WebBrowser1.Navigate("https://... your URL")
    Wait(2)
    ' Accept question to save
    SendKeys.SendWait("{LEFT}")
    Wait(0.5)
    SendKeys.SendWait("{ENTER}")
    Wait(0.5)
    ' Actually save the file 
    SendKeys.SendWait("{ENTER}")
    Wait(0.5)
    '...
End Sub 
```

需要“等待”函数来让 WebBrowser 控件有时间实际导航到目标 URL；在您的情况下，这可能会有所不同。代码是：

```
Public Sub Wait(ByVal seconds As Double)
   Static start As Date
   start = Now()
   Do While Now() < start.AddSeconds(seconds)
       System.Windows.Forms.Application.DoEvents()
   Loop 
End Sub 
```

有用。我刚刚下载了 1,700 个 PDF（出于我自己的目的，不打算解释）。不过，这花了一点时间。

# ios - cocos2d中的数值输入

> ID：12762796
> 
> 赞同：-1
> 
> 时间：2012-10-06T18:51:20.390
> 
> 标签：ios, user-interface, cocos2d-iphone

我使用 cocos2d 菜单为我的游戏创建了一个配置场景，但我希望能够允许用户输入数值。

菜单非常适合多选内容，但我如何添加值框或其他方式让用户输入数值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T03:47:18.033

一种方法是在你的 cocos2d 场景中使用 UIKit 元素（是的，你可以混合它们）。特别是，您可以在游戏层中使用 UITextField：

```
@interface MyLayer : CCLayer<UITextFieldDelegate> {
    UITextField *myTextField;
} 
```

然后在 MyLayer.m 的 init 函数中：

```
myTextField = [[UITextField alloc] initWithFrame:CGRectMake(..,..,..,..)];
myTextField.delegate = self; //set the delegate of the textfield to this layer
[myTextField becomeFirstResponder];

// Configure some of your textfield properties as appropriate...
[myTextField.keyboardType = UIKeyboardTypeDefault;
[myTextField.returnKeyType = UIReturnKeyDone;
[myTextField.autocorrectionType = UITextAutocorrectionTypeNo;
[myTextField.autocapitalizationType = UITextAutocapitalizationTypeNone;

[[[CCDirector sharedDirector] openGLView] addSubview: myTextField]; 
```

然后，您可以通过实现以下内容在用户完成后获取文本字段值：

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    NSString* myValue = myTextField.text; // get the value and do something
    return YES;
} 
```

# java - 使用 apache httpclient 的非 HTTP-Chunked Multipart POST

> ID：12762799
> 
> 赞同：0
> 
> 时间：2012-10-06T18:51:28.300
> 
> 标签：java, android, apache-httpclient-4.x

有没有办法通过不使用分块 HTTP 编码的 Apache HTTPClient 库发送多部分 POST 请求？

我正在尝试将文件上传到 Wikimedia Commons，但他们仍在使用 HTTP/1.0 - 所以我实际上无法上传任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:22:05.220

您所要做的就是将 HttpClient 配置为使用 HTTP/1.0。这将自动禁用实体关闭请求的块编码传输编码。

# java - 将字符串参数添加到数组末尾

> ID：12762800
> 
> 赞同：0
> 
> 时间：2012-10-06T18:51:31.267
> 
> 标签：java, arrays, string

我必须在数组末尾添加一个字符串参数。如果 String 已经存在于数组中，则抛出异常。我不知道。任何人都可以帮忙吗？这是我到目前为止所拥有的

```
public static void addCity (String city) throws Exception
{
    for (int i = 0; i < MAX_CITIES;i++)
    {
        if (city == cityNames[i])
            throw new Exception("This city already exists");
    }

    String [] temp = new String[cityNames.length+1];
    for (int i = 0; i < cityNames.length;i++) {
        temp[i] = cityNames[i];
    }
    temp[temp.length-1] = city;
    cityNames = temp;

    manyItems++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T18:52:57.057

要测试是否`String a`等于`String b`，请使用`a.equals(b)`，而不是`a == b`。

（`a == b`适用于 C++，而不是 Java。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:55:08.727

使用列表会更容易：

```
List<String> cityNames = new ArrayList<String>();

if(cityNames.contains(city)) {
    throw new Exception("This city already exists");
}
cityNames.add(city); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T18:54:04.773

除了`String`比较之外，您的代码看起来不错：

```
if (city == cityNames[i]) 
```

这不会进行正确的`String`比较：它只会比较对象引用，通常是`false`.

用于`String.equals`此：

```
if (city.equals(cityNames[i])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T18:54:51.497

什么是 MAX_CITIES？我认为您的第一个循环应该是直到 i < cityNames.length，而不是 MAX_CITIES，因为当您增加数组的大小时，您似乎没有更新 MAX_CITIES。

您应该使用 equals() 方法来比较 String 对象，而不是 ==。

如果不只是将新数组增大一个元素，而是将大小增加一倍，那也可能会很好。这样，您不必在每次添加新元素时都完成复制数组的所有工作。您需要一个变量来跟踪数组中的下一个空白点，它看起来像这样：

```
if (nextEmptyIndex == cityNames.length)
{
    String [] temp = new String[cityNames.length*2];
    for (int i = 0; i < cityNames.length;i++) {
        temp[i] = cityNames[i];
    }
}
temp[nextEmptyIndex] = city;
nextEmptyIndex++;
manyItems++; 
```

# java - 如何使用 java 和 tomcat 在本地将战争作为 Web 服务运行？

> ID：12762803
> 
> 赞同：0
> 
> 时间：2012-10-06T18:51:50.420
> 
> 标签：java, web-services, cxf, tomcat6

我有一些 Java 客户端代码正在远程服务器上的战争中连接到 Web 服务。我正在使用 myeclipse 10.0、java 1.6、cxf 2.2、嵌入式 tomcat 6 localhost 服务器，并且我在命令行下运行 tomcat 6，两个 tomcat 都在同一台机器上运行。

当我的 wsdl 文件指向远程服务器上的服务时，一切正常，但是，当我在一台机器上设置所有内容时，当我尝试访问该服务时出现 java.io 异常。

我在不同的端口上设置了两个 tomcat 实例，我可以看到使用 ProcessExplorer 一切正常，使用 netstat 我可以看到这些端口正在与它们的侦听器一起工作，没有冲突。我使用此[链接](http://archive.gria.org/docs/5.0/user-guide/installation/services/two-JVMs.html)中的信息来设置 tomcat 实例。然后我将war文件复制到webapps目录，我看到tomcat分解了类并加载了它们。我们还使用 cacerts 文件进行 ssl 身份验证，我验证它位于 jvm 中的正确位置。

这是错误： 由：java.io.IOException：//在 org.apache.cxf.transport.http 的 org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:2071) 引起。 HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:2022) 在 org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1947) 在 org.apache.cxf.transport.AbstractConduit.close(AbstractConduit. java:66) 在 org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:632) 在 org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62) 在 org.apache .cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236) 在 org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:472) 在 org.apache.cxf.endpoint。ClientImpl.invoke(ClientImpl.java:302) 在 org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:254) 在 org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:73) 在 org .apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:123) 在 $Proxy71.get(未知来源)

我正在使用这个 url 来访问 webservice 端点：

```
http://localhost:7070/<root context>/<serviceName> 
```

任何想法为什么这不起作用或者是否有更好的方法来做到这一点？

**后果：**

我正在使用的战争文件来自一个仓库，并在我下载它时将日期添加到它的名称中。我通过剥离日期更改了战争的名称以匹配上下文根，重新部署它，一切都开始工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:55:26.587

我正在使用的战争文件来自一个回购，它在我下载它时将日期添加到它的名称中。当我重新审视我所做的事情时，我意识到了这个问题，所以我通过剥离日期更改了战争的名称以匹配上下文根，重新部署它，一切都开始工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T21:01:24.220

只需复制`war`tomcat`webapps`目录下的文件，然后重启Tomcat即可。该`war`文件将自动转换为`app folder`

# python - 蟒蛇导入变量

> ID：12762808
> 
> 赞同：1
> 
> 时间：2012-10-06T18:52:08.240
> 
> 标签：python, variables, import

有2个文件：

首先被称为：main.py

```
import side

var = 1

side.todo() 
```

第二个叫做：side.py

```
import main

def todo():
    print "printing variable from MAIN: %s" %(main.var) 
```

当我运行 main.py 时出现错误：

```
AttributeError: 'module' object has no attribute 'todo' 
```

在python中，你不允许以这种方式借用和使用变量吗？

我试图搜索与此相关的文档，但找不到与此问题相关的任何内容。

当然，有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:03:51.527

问题*不是*“你不能有循环导入”，而是**你不能在定义之前使用一个名字**。将调用移至`side.todo()`脚本运行后不会立即发生的地方，或移至`main.var`第三个模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:07:38.057

一个快速而丑陋的解决方案是将 import 语句移动到在 side.py 中需要它之前不会执行的位置

```
def todo():
    import main
    print "printing variable from MAIN: %s" %(main.var) 
```

我会建议反对它。该示例是人为设计的，但我相信您可以为您的具体情况找到更好的解决方案。

# c++ - 通过对立方体应用变换来创建 3D 平截头体？

> ID：12762809
> 
> 赞同：2
> 
> 时间：2012-10-06T18:52:15.233
> 
> 标签：c++, opengl, graphics, glut, glu

我想知道是否可以通过对`glutSolidCube(GLDouble size)`. 我猜测涉及某种剪切矩阵，据我所知，这不是内置转换。

请注意，我根本不关心视锥体（正如您可能想象的那样，它会使任何 Google 搜索出现偏差）。我只是想在我的场景中有一个 3D 方形平截头体。任何关于如何从立方体中产生一个的想法都将不胜感激！

![方形平截头体](../Images/bfd2d81962479f08936413fe67c19243.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:07:18.413

它不是剪切矩阵，它是透视投影的投影矩阵。您将单位立方体顶点的坐标乘以逆投影矩阵以获得平截头体顶点的坐标。要在世界空间中获得截锥体的坐标，您还需要通过逆相机矩阵（视图矩阵）对顶点进行多重处理。

在这里查看详细的公式： http: [//www.songho.ca/opengl/gl_projectionmatrix.html](http://www.songho.ca/opengl/gl_projectionmatrix.html)

要使立方体变形，最好创建具有​​所需顶点的 VBO，或者只渲染一些变形的四边形，如果您想使用固定功能管道进行一些快速的'n'dirty 实现。

附言

有一个代码提取来计算平截头体的角：[http ://www.gamedev.net/topic/606716-frustum-corners-from-view-projection/](http://www.gamedev.net/topic/606716-frustum-corners-from-view-projection/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T11:49:54.003

是的，给定一个非常投影矩阵，可以将您的立方体转换为平截头体。首先定义一个焦距 d，它是平截头体边缘会聚的点。然后将体积的所有角乘以这个矩阵：

```
P = [ 1   0   0   0
      0   1   0   0
      0   1  1/d  0
      0   0   1   0 ] 
```

# php - 带数组的 PHP 重定向（不工作？）

> ID：12762813
> 
> 赞同：0
> 
> 时间：2012-10-06T18:52:53.963
> 
> 标签：php, arrays

我制作了一个如下所列的重定向脚本...无论传递什么 p 值，即使有效，它也会被重定向到 default.htm 页面...本质上它是跳过 if/else 部分并始终转到别的。

php header 函数有什么特别之处吗？它忽略了条件语句？

```
<?php

/*
Use the following link format:
<a href="goto.php?p=XXXXXX">XXXXXX</a>
*/

$p = $_GET['p'];
$link = array(

/*Links*/
'link1'=>'/link1.htm',
'link2'=>'/link2.htm',

);

/*Send Headers*/

header('Content-Type: text/html; charset=utf-8');
header('X-Robots-Tag: noindex, nofollow, noarchive', true);

if (in_array($p, $link))
{
    header('Location: '.$link[$p]); // Valid p
}  
else
{
    header('Location: /default.htm'); // Invalid p
}

exit();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:02:43.740

使用 array_key_exists 一些像这样的东西

```
if ((array_key_exists('p', $_GET) && isset($link[$p]))
{
    header('Location: '.$link[$p]); // Valid p
}  
else
{
    header('Location: /default.htm'); // Invalid p
} 
```

以上对我有用，而且由于您使用 array_key 存在，它也不会显示索引未定义警告

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T18:59:31.733

代替：

```
if (in_array($p, $link)) 
```

你要：

```
if (array_key_exists($p, $link)) 
```

第一个检查值（`=>`s 的右侧）。第二个检查键（`=>`s 的左侧）。

见： http: [//php.net/manual/en/function.array-key-exists.php](http://php.net/manual/en/function.array-key-exists.php)

您的情况的简短版本是：

```
$link = @$link[$p] ?: '/default.htm';
header("Location: $link"); 
```

这可以让你省去`if`and `else`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T18:56:41.100

您正在检查 的值`$_GET['p']`是否在 的值列表中`$link`，但随后您将其用作`header()`调用中的键。看起来你的意思是 if`$_GET['p']`是数组中的*一个键。*`$link`

为此，请使用[`isset()`](http://php.net/isset)而不是`in_array()`检查数组的键（`in_array()`将检查数组的值）：

```
if (isset($link[$p])) {
    header('Location: '.$link[$p]); // Valid p
} 
```

# android - 读取 cookie httpurlconnection android

> ID：12762816
> 
> 赞同：0
> 
> 时间：2012-10-06T18:53:03.800
> 
> 标签：android, cookies, httpurlconnection

我想从服务器读取所有 cookie，但出现以下错误：

```
java.lang.IllegalStateException: Connection already established 
```

如何在连接前读取 cookie？我尝试在定义连接之前放置 cookie 读取代码，但是在我定义建立连接的连接之前它不起作用，这会阻止我读取 cookie ......有什么帮助吗？

这是我的代码：

```
package com.example.read;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

List<String> cookies = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button btn = (Button)findViewById(R.id.button1);
    btn.setOnClickListener(l);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

View.OnClickListener l = new View.OnClickListener() {

    public void onClick(View v) {
        EditText edt = (EditText)findViewById(R.id.editText1);
        if(!edt.getText().toString().equals("")){
            readData(edt.getText().toString());
        }
    }
};

void readData(String text){
    URL url;
    HttpURLConnection conn;
    DataOutputStream out;
    DataInputStream in;

    try{
        url = new URL("http://"+text);
        conn = (HttpURLConnection)url.openConnection();
         if(cookies==null){
               conn.getHeaderField("Set-Cookie");
            }
            if(cookies!=null){
                for(String cookie : cookies){
                    conn.setRequestProperty("Cookie", cookie);
                }
            }
        conn.setDoOutput(true);
        String post = "mobile_app="+URLEncoder.encode("1","UTF-8");
        out = new DataOutputStream(conn.getOutputStream());
        out.writeBytes(post);
        out.flush();
        out.close();
        in = new DataInputStream(conn.getInputStream());
        String line = "";
        String data = "";
        while((line=in.readLine())!=null){
            data+=line;
        }
        TextView tv = (TextView)findViewById(R.id.textView1);
        tv.setText(data);
    } catch(Exception e){
        System.out.println(e);
        TextView tv = (TextView)findViewById(R.id.textView1);
        tv.setText(e.toString());
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:59:47.920

你的问题听起来有点奇怪。作为客户端，您在建立连接之前设置 cookie - 如果您知道它们。服务器返回的 Set-Cookie 标头只有在服务器的应答返回后才能读取。那么当然设置任何客户端cookie为时已晚:-)

换句话说：在发送请求之前，您根本无法从服务器读取 cookie。

服务器发送“ `Set-Cookie`”标头，*然后*客户端在每个*后续*请求中发送这些 cookie。因此，您`Cookie`只能从第二个请求开始设置您的“”标头。

# cassandra - Astyanax 键范围查询

> ID：12762818
> 
> 赞同：3
> 
> 时间：2012-10-06T18:53:23.453
> 
> 标签：cassandra, range, astyanax

尝试编写一个查询，该查询将使用 astyanax 客户端和 RowSliceQuery 对列族中的所有行进行分页。

```
keyspace.prepareQuery(COLUMN_FAMILY).getKeyRange(null, null, null, null, 100); 
```

使用 hector 成功完成此操作，其中第一次调用是使用 null 开始和结束键完成的。检索第一页后，我使用结果中的最后一个键来查询第二页等。这是使用赫克托的第一页的代码。

```
HFactory.createRangeSlicesQuery(keyspace,
LongSerializer.get(), new CompositeSerializer(),
BytesArraySerializer.get())
.setColumnFamily(COLUMN_FAMILY)
.setRange(null, null, false, 100).setRowCount(100); 
```

现在，当我尝试使用 astyanax 执行此操作时，我收到有关 null 和非 null 键和令牌的错误。不确定令牌在此查询中的作用。我也可以使用 allRows()，但我想使用键范围查询来做到这一点，因为它给了我更多的灵活性。

有人有使用 astyanax 的键范围查询示例吗？我在“入门”文档或网络上的任何其他地方都找不到示例。

谢谢！安东

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-01T19:13:50.650

你指的是`getRowRange`方法：

```
keyspace.prepareQuery(CF_STANDARD1)
  .getRowRange(startKey, endKey, startToken, endToken, count) 
```

但是请注意，这仅在使用[ByteOrderedPartitioner](http://www.datastax.com/documentation/cassandra/2.1/cassandra/architecture/architecturePartitionerBOP_c.html)时有效。由于默认情况下 Cassandra 使用 Murmur3Partitioner，这通常不起作用。建议使用索引来执行此操作。Astyanax 还提供了[反向索引搜索](https://github.com/Netflix/astyanax/wiki/Reverse-Index-Search)配方，它利用了第二个列族，它将您的键存储为列，以允许对原始数据进行有效的范围搜索。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T09:35:00.413

检查此示例代码。我希望这段代码能帮助你进行分页。

```
IndexQuery<String, String> query = keyspace
   .prepareQuery(CF_STANDARD1).searchWithIndex()
   .setRowLimit(10).autoPaginateRows(true).addExpression()
   .whereColumn("Index2").equals().value(42); 
```

最好的，

# list - 方案：在某个点组合列表

> ID：12762819
> 
> 赞同：1
> 
> 时间：2012-10-06T18:53:32.893
> 
> 标签：list, scheme

我正在尝试定义一个过程，该过程采用 2 个列表和一个非负整数的参数。假设完美输入。我希望它构造第一个列表中的元素列表，直到它达到给定的元素整数，此时我想用第二个列表中的其余元素完成它。让我演示一下。

```
~(combine '(a b c d e) '(w x y z) 2)
(a b y z) 
```

请注意，第二个列表从下一个索引继续，就好像它一直被制作成 cdr 一样。

这就是我所拥有的。当然，它不起作用，我想我可能使用了错误的逻辑。

```
(define (combine seq1 seq2 point)
 (if (null? (or seq1 seq2))
   '()
   (if (equal? point 0)
       (cons seq2 '())
       (cons (car seq1) (combine (cdr seq1) (cdr seq2) (- point 1) ))))) 
```

所有帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:19:21.797

好吧，这条线不符合您的要求：

```
(if (null? (or seq1 seq2)) 
```

在 Scheme 中，空列表为**真**值；Scheme中*唯一*的错误值是**#f**。这意味着

```
(or '() '(a)) 
```

返回**'​​()**但是

```
(or '(a) '()) 
```

返回**'（一）**

因此，您对 null 的检查将仅在一半的时间内返回 #t 。（如果*'()*是一个错误值，就像在常规 Lisp 中一样，那么它*永远不会*起作用，所以我不确定你在想什么）。

如果您希望该行在任何一个列表为空的情况下返回 true，您将不得不重新考虑它。

然后是线

```
(cons seq2 '()) 
```

尝试自行测试该功能，看看会发生什么 - 这不是您需要的。如果您考虑一下，那条线应该会更简单。那时您实际上需要返回什么？

# grails - scribe oauth linkedin 创建令牌

> ID：12762821
> 
> 赞同：2
> 
> 时间：2012-10-06T18:53:37.490
> 
> 标签：grails, oauth-2.0, scribe

我正在尝试使用 scribe oAuth 插件（在 grails 环境中）。我能够让用户授权我的应用程序并进行身份验证。然后我可以得到 xml 响应。不过，我的问题是如何重新查询用户个人资料，而不必让他们重新授权我的应用程序。一旦他们第一次授权，我就会捕获他们的令牌和密钥。那么，我是否应该能够重新查询个人资料（只要他们不撤销授权。）？我可以使用旧版本的插件来做到这一点。问题在于创建新令牌。如果没有验证者和请求令牌，我看不到创建授权令牌的方法（这不会存在，因为我的代码在他们的许可下代表他们执行查询。）

如果我尝试像这样创建令牌：

```
Token accessToken = new Token()
accessToken.secret="XXX"
accessToken.token = "YYY" 
```

我收到初始化错误。

我不能这样创建它，因为我没有请求令牌和验证器：

```
Token accessToken = service.getAccessToken(requestToken, verifier);
accessTokenSecret = accessToken.secret
accessTokenKey = accessToken.token 
```

如果我没有访问令牌对象，我将无法签署我的请求。完整的代码如下所示（假设它们是请求令牌和验证器）

```
 OAuthService service=new ServiceBuilder()
    .provider(LinkedInApi.class)
    .apiKey(apiKey)
    .apiSecret(apiSecret)
    .build();

    Verifier v = new Verifier(ver);

    Token accessToken = service.getAccessToken(rt, v);
    accessTokenSecret = accessToken.secret
    accessTokenKey = accessToken.token

    OAuthRequest request = new OAuthRequest(Verb.GET, apiUrl);
    service.signRequest(accessToken, request);
    Response response = request.send();
    xmlString=response.getBody(); 
```

感谢您的帮助杰森

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T21:48:41.953

好吧，过了一段时间，我得到了这个工作：

```
 public getProfileWithTokens(getAccessToken, getAccessTokenSecret){

    Token newAccessToken = new Token(getAccessToken, getAccessTokenSecret);

    String xmlString =""

    OAuthService service=new ServiceBuilder()
    .provider(LinkedInApi.class)
    .apiKey(apiKey)
    .apiSecret(apiSecret)
    .build();   

    OAuthRequest request = new OAuthRequest(Verb.GET, apiUrl);
    service.signRequest(newAccessToken, request);
    Response response = request.send();
    xmlString=response.getBody();           

} 
```

# c# - 如何检索和保存所选图像到/从列表框到/从隔离存储

> ID：12762822
> 
> 赞同：0
> 
> 时间：2012-10-06T18:53:40.437
> 
> 标签：c#, windows-phone-7, isolatedstorage

我正在将媒体库中的图像检索到包装面板内的列表框中，现在我想将所选图像（它是一个多选列表框）保存到隔离存储中。

列表框的xml

```
 <ListBox Name="vaultbox" SelectionMode="Multiple" 
                ItemContainerStyle="{StaticResource ListBoxItemStyle1}">
     <TextBlock Text="It is so lonely here..." Visibility="Collapsed" />
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel ItemWidth="200" ItemHeight="200"/>
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Image Name="image2" 
                               Stretch="Fill" 
                               VerticalAlignment="Top" Source="{Binding}" />
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

**我在这里迷路了。**我试图这样做。

```
 List<BitmapImage> vltBitmapImage = new List<BitmapImage>();

        foreach (string fileName in fileStorage.GetFileNames("images//*.*"))
        {
            if (fileName == null)
                break;
            string filepath = System.IO.Path.Combine("images", fileName);
            using(IsolatedStorageFileStream imageStream =        
                          fileStorage.OpenFile(filepath,FileMode.Open,FileAccess.Read))
            {
                var imageSource=PictureDecoder.DecodeJpeg(imageStream);
                BitmapImage bitmapImage = new BitmapImage();
                bitmapImage.SetSource(imageStream);
                vltBitmapImage.Add(bitmapImage);
            }
        }

        this.vaultbox.ItemsSource = vltBitmapImage; 
```

使用上面的代码我得到了这个异常

> 'System.Invalid.Operation.Exception Items 集合在使用 ItemsSource 之前必须为空'

不知道为什么它的代码几乎与我从媒体库显示图片到列表框的代码相同。

也从上面的类似列表框中，但不同的列表框中，我尝试将文件保存到隔离存储，但我似乎可以找出如何获取图像名称......请参见此处。目前正在使用“名称”我该怎么办？

```
foreach (BitmapImage item in lstImageFromMediaLibrary.SelectedItems)
{     
    string filepath =System.IO.Path.Combine("images", "name");
    IsolatedStorageFileStream ifs = fileStorage.CreateFile(filepath);
            {
                var bmp = new WriteableBitmap(item);
                bmp.SaveJpeg(ifs,item.PixelWidth,item.PixelHeight,0,90);
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:42:05.430

我想推荐您使用 MVVM 模式：创建 ViewModel 并将集合属性放入其中。此外，在这个 ViewModel 类中拥有“选定项”属性并将选定项绑定到它非常方便`ListBox`。

似乎有必要介绍一下图像项表示：它是带有名称的图像。

```
public class ImageViewModel : ViewModelBase
{
    public ImageViewModel(string name, string image)
    {
        Name = name;
        Image = image;
    }

    // Name or Path? Please make the choice by yourself! =)
    public string Name { get; private set; }
    public BitmapImage Image { get; private set; }
} 
```

`ViewModelBase`类（实现`INotifyPropertyChanged`接口）：

```
public abstract class ViewModelBase : INotifyPropertyChanged
{
    protected ViewModelBase()
    {
    }

    #region Implementation of INotifyPropertyChanged interface

    public event PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            var args = new PropertyChangedEventArgs(propertyName);
            handler(this, args);
        }            
    }

    #endregion
} 
```

主（根）视图模型。

```
public class MainViewModel : ViewModelBase
{
    public MainViewModel()
    {            
        // Call this directly:
        // var images = LoadImages();
        // Images = images;

        // or bind the Command property of Button to the LoadImagesCommand.
        LoadImagesCommand = new RelayCommand((param) => 
            {
                var images = LoadImages();
                Images = new ObservableCollection<ImageViewModel>(images);
            });
    }

    private ObservableCollection<ImageViewModel> _images;
    public ObservableCollection<ImageViewModel> Images
    {
        get { return _images; }
        private set
        {
            if (value == _images)
                return;
            _images = value;
            RaisePropertyChanged("Images");
        }
    }

    private ImageViewModel _selectedImage;
    public ImageViewModel SelectedImage
    {
        get { return _selectedImage; }
        set
        {
            if (value == _selectedImage)
                return;
            _selectedImage = value;
            RaisePropertyChanged("SelectedImage");
        }
    }

    public ICommand LoadImagesCommand { get; private set; }

    private List<ImageViewModel> LoadImages()
    {
        List<ImageViewModel> images = new List<ImageViewModel>();

        // Part of the original code.
        foreach (string fileName in fileStorage.GetFileNames("images//*.*"))
        {
            if (fileName == null)
                break;
            string filepath = System.IO.Path.Combine("images", fileName);
            using (IsolatedStorageFileStream imageStream = fileStorage.OpenFile(filepath,FileMode.Open,FileAccess.Read))
            {
                var imageSource = PictureDecoder.DecodeJpeg(imageStream);
                BitmapImage bitmapImage = new BitmapImage();
                bitmapImage.SetSource(imageStream);

                ImageViewModel imageViewModel = new ImageViewModel(fileName, bitmapImage);
                images.Add(imageViewModel);
            }
        }
    }
} 
```

窗户。

```
public class MainView : Window
{
    public MainView()
    {
        InititializeComponent();
        // It is just for simplicity. It would be better to use MVVM Light framework: ViewModel Locator!
        DataContext = new MainViewModel();
    }
} 
```

XAML：

```
<!-- Please correct the binding for the Image property inside the ItemStyle -->
<ListBox Name="vaultbox"
         ItemsSource="{Binding Images}"
         SelectedItem={Binding SelectedImage}"
         ItemContainerStyle="{StaticResource ListBoxItemStyle1}"
         Height="493"
         HorizontalAlignment="Left"
         Margin="0,0,0,0"
         VerticalAlignment="Top"
         Width="442"
         SelectionMode="Multiple">
    ...
</ListBox> 
```

另外，请考虑异步加载：它不会冻结 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:45:40.857

由于这一行而发生异常：

```
 <TextBlock Text="It is so lonely here..." /> 
```

你有一个 ListBox 的孩子。你尝试添加更多。

# c++ - 在 MSVC 2010 中编译 64 位应用程序

> ID：12762829
> 
> 赞同：0
> 
> 时间：2012-10-06T18:54:17.817
> 
> 标签：c++, visual-studio-2010, visual-c++, 64-bit

我们需要在支持 64 位的 MSVC++ 2010 中编译我们的库。在阅读了[这个问题](https://stackoverflow.com/questions/1865069/how-to-compile-a-64-bit-application-using-visual-c-2010-express)的答案后，我仍然不明白为什么需要将平台工具集从“v100”更改为“Windows7.1SDK”。

是否只需要 MSVC Express 或完整的 MSVC 版本？它有什么变化？如果您不更改工具集，会有什么风险？

我的意思是，我可以使用默认的 v100 工具集成功生成 64 位二进制文​​件，这有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T21:26:51.207

**Visual Studio 2010 Express**需要该设置。这不附带 64 位编译器，因此您必须告诉它使用 SDK 编译器。付费版本包含一个 64 位编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T21:55:18.550

解决 Express 版本的限制是一种技巧，在其许可限制的南端。当您拥有付费版本时，您只需添加 x64 配置即可获得应用程序的 64 位版本。使用 Build + Configuration manager，右上角的组合框标记为“Active Solution Platform”。从该组合框中选择“新建”。在弹出窗口中选择“x64”。完毕。

如果没有出现“x64”，则重新运行安装程序并选择安装 64 位编译器的选项。

# java - 在java中从数据库中检索值

> ID：12762835
> 
> 赞同：0
> 
> 时间：2012-10-06T18:55:02.940
> 
> 标签：java, mysql

我正在制作一个程序，从我创建的数据库中检索输入的字段数据/值。但是当我运行它时，输出始终为空。我想知道怎么了？这是我的代码：

```
import java.sql.*;

public class GuestsInfo
{
private String  firstName, lastName;
private int  age;
private Connection con;
private PreparedStatement statement;

public GuestsInfo()
{
    try {
         Class.forName("com.mysql.jdbc.Driver");
         con = DriverManager.getConnection(
                        "jdbc:mysql://localhost:3306/3moronsdb","root","");
    } catch (Exception e) {
         e.printStackTrace();
    }
}
public GuestsInfo(String firstName, String lastName, int age)
{
    this();
    try
    {   
        statement = con.prepareStatement("Insert into guest(firstName,lastName,age)values(?,?,?)");

        statement.setString(1, firstName);
        statement.setString(2, lastName);
        statement.setInt(3, age);

        statement.executeUpdate();
        con.close();
    }
    catch(Exception e)
    {
        e.printStackTrace();
        return;
    }   
}

public void setFirstName(String firstName)
{

    try{
        statement= con.prepareStatement("SELECT * FROM guest WHERE firstName = ?");
        statement.setString(1, firstName);
        ResultSet rs = statement.executeQuery();
        while(rs.next()){
            firstName = rs.getString(1);
        }
    }catch(Exception e){
        System.out.print(e);
    }
}

public String getFirstName(){
    return firstName;
}

public void setLastName(String lastName)
{

    try{
        statement= con.prepareStatement("SELECT * FROM guest WHERE lastName = ?");
        statement.setString(2, lastName);
        ResultSet rs = statement.executeQuery();
        while(rs.next()){
            lastName = rs.getString(2);
        }
    }catch(Exception e){
        System.out.print(e);
    }
}

public String getLastName(){
    return lastName;
}

public void setAge(int age){
    try{
        statement = con.prepareStatement("SELECT * FROM guest WHERE age=?");
        statement.setInt(3, age);
        ResultSet rs = statement.executeQuery();
        while(rs.next()){
            age = rs.getInt(3);
        }
    }catch(Exception e){
        System.out.print(e);
    }
}

public int getAge(){
    return age;
} 
```

在我的主要课程中，我有以下代码：

```
 public class TestMain {
public static void main(String [] args){

    GuestsInfo gi = new GuestsInfo();
    gi.setFirstName("Ericka");
    System.out.println(gi.getFirstName());

}
 } 
```

我想知道为什么当我运行它时它总是说 null 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:02:49.723

你实际上并没有在你的二传手中“设置”任何东西。

```
public void setFirstName(String firstName)
{

    try{
    // Here you create a READing statement.
        statement= con.prepareStatement("SELECT * FROM guest WHERE firstName = ?");
        statement.setString(1, firstName);
        ResultSet rs = statement.executeQuery();
        while(rs.next()){
    // Here you set the >>method param<< to a non-existing String
            firstName = rs.getString(1);
        }
    }catch(Exception e){
       System.out.print(e);
    }
}
// After the method is done you have done nothing because you didn't even set your class member variable "firstName", which you would have set using "this.firstName". 
```

最重要的是：我对 getter 和 setter 的理解是，您可以在 getter 中进行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:58:47.363

您似乎没有在 main 方法中插入任何数据。您的无参数构造函数不会创建任何数据。setFirstName 方法使用了一个 select 语句，所以它不会这样做。数据库中是否已经有一个名为 Ericka 的用户？因为如果没有，您将没有任何数据可以返回。

我认为您的意思是使用带有多个参数的构造函数：

```
GuestsInfo gi = new GuestsInfo("Ericka", "Something", 30); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T18:59:19.563

```
GuestsInfo gi = new GuestsInfo(); 
```

你没有在你的 0-arg 构造函数中填充你的数据库......你只是用它来初始化`connection`......所以，你也不会得到任何数据......

尝试通过调用您的 3-arg 构造函数来创建对象..

```
 GuestsInfo gi = new GuestsInfo("Ericka", "lastName", 23); 
```

# scala - scala：无法从根范围导入对象

> ID：12762837
> 
> 赞同：11
> 
> 时间：2012-10-06T18:55:05.833
> 
> 标签：scala, import, packages

我有以下代码：（src/main/scala/coins/coins.scala）

```
object Main extends App { 

  def countChange(money: Int, coins: List[Int]): Int = {
  [...] 
```

我试图从这样的测试中引用它：(src/test/scala/coins/CoinsSuite.scala)

```
package coins

import org.scalatest.FunSuite

class CoinsSuite extends FunSuite {

  import Main.countChange
  test("only onw way to pay $0") {
  [...] 
```

我收到以下错误：

未找到：值 Main [错误] 导入 Main.countChange

但另一方面，从 sbt 控制台它工作正常

如果我在主文件中声明任何包，比如

```
package x

object Main extends App { 
  Console.println("Hello World!") 
```

然后我可以正确地发出 import x.Main.countChange

我不知道对根包或单例对象可见性是否有限制？

- 添加

只是为了完成答案，SO上有几个有用的链接

[https://stackoverflow.com/a/2030159/47633](https://stackoverflow.com/a/2030159/47633)

[https://stackoverflow.com/a/9822212/47633](https://stackoverflow.com/a/9822212/47633)

[https://stackoverflow.com/a/9822227/47633](https://stackoverflow.com/a/9822227/47633)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T20:25:08.000

Java（和 Scala 根据相同的约定）对于在未命名的包中导入东西很生气，这与根包不同。放入`Main`一个包中。

如果我的对象在单独的源文件中，请参阅[为什么我的对象不是包 <root> 的成员？](https://stackoverflow.com/questions/9822008)

# java - 银行账户转账项目 Java

> ID：12762839
> 
> 赞同：0
> 
> 时间：2012-10-06T18:55:12.533
> 
> 标签：java, class, bank

我正在用 Java 做一个项目，我被困在其中的一部分上。我在 SavingsAccount 类中有存款功能，但我似乎无法弄清楚如何在引擎类中调用它。对于我们的项目，我们必须允许用户使用 BlueJ 虚拟机创建多个银行账户并在它们之间转移资金。我将发布我的引擎类和储蓄账户类的相关代码......谢谢，任何帮助将不胜感激！

问题：我无法将钱从一个帐户转移到另一个帐户，我在引擎类上收到一条错误消息。我想我汇款到的账户有问题...

**储蓄账户代码**

```
public class SavingsAccount extends BankAccount
public void transfer (BankAccount that, double amount) 
 {
   if 
   (balance-amount < -80)
   balance = balance ;
   else
   {
       if 
       (amount <= balance)
            {
                this.balance = this.balance - amount;
                that.balance = that.balance + amount;
            }
       else
            {
               this.balance = this.balance - amount-20;
               that.balance = that.balance + amount;
            }
    }
 } 
```

**引擎类**

```
public class engine
{
 SavingsAccount savings1 = new SavingsAccount();
 savings1.balance = 0;

 //code for other choices, such as deposit and withdraw... 

    if (selection2 == 3)
       {
          System.out.println ("How much would you like to transfer?");
          int transferAmount = in.nextInt ( );
          System.out.println ("Which account would you like to transfer the money to?");
          String thatAccount = in.next();
          savings1.withdraw (transferAmount);
          thatAccount.deposit (transferAmount);
          System.out.println ("You account balance is " + savings1.getBalance () + "!");

      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:19:59.020

我有一些观察/建议如下：

您的 transferAccount`thatAccount`是一个 String `String thatAccount = in.next();`。你怎么能调用`deposit ()`方法呢？

我在课堂上没有看到`deposit()`和`withdraw()`方法`SavingsAccount`，希望`BankAccount`课堂上有。

现在确定您如何将余额初始化为`saving1.balance=0;`. 它应该通过一些类方法来完成，例如`setBalance`as `saving1.setBalance(0);`。

当您调用`savings1.withdraw()`方法时，余额为`0`.

希望这些将帮助您确定问题并纠正程序。

# java - JLabel 中的 ImageIcon 不起作用

> ID：12762845
> 
> 赞同：0
> 
> 时间：2012-10-06T18:55:50.917
> 
> 标签：java, swing, jlabel, imageicon, absolutelayout

我已经在这个问题上苦苦挣扎了好几个星期，但无济于事。其他 Java 论坛无法帮助我解决这个问题，所以我希望我能在这里找到有新眼光的人。我有一个`JFrame`，除其他外，我正在尝试插入图像。我已经整理了一个重现问题的 SSCCE。

```
 public class ImageTest {
   public static void main(String[] args) {
    SplashScreen.ShowWindow();
   }
    }

    public class SplashScreen {

private JFrame frmKcbsEventsSearch;

public SplashScreen() {
    initialize();
}

public static void ShowWindow() {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                SplashScreen window = new SplashScreen();
                window.frmKcbsEventsSearch.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

public void initialize() {
    frmKcbsEventsSearch=new JFrame();
    frmKcbsEventsSearch.getContentPane().setBounds(new Rectangle(200, 200, 520, 450));
    frmKcbsEventsSearch.getContentPane().setFont(new Font("Times New Roman", Font.PLAIN, 16));
    frmKcbsEventsSearch.setTitle("KCBS Events Search");
    frmKcbsEventsSearch.setBounds(200,200,520,450);
    frmKcbsEventsSearch.getContentPane().setLayout(new FlowLayout());
    frmKcbsEventsSearch.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    JLabel logo;
    java.net.URL logoURL=getClass().getResource("KCBSLogo.jpg");
    if (logoURL!=null) {
        try {
            logo = new JLabel();
            logo.setIcon(new ImageIcon(logoURL));
        }
        catch (Exception e) {
            logo = new JLabel("KCBS Logo");
        }
    }
    else {
        logo = new JLabel("KCBS Logo missing");
    }
    logo.setHorizontalAlignment(SwingConstants.CENTER);
    logo.setVerticalAlignment(SwingConstants.CENTER);
    frmKcbsEventsSearch.getContentPane().add(logo);
}
    } 
```

在其他地方已经提到，布局对于完成这项工作很重要。我没有太多运气让布局管理器做我想做的事，但在这种情况下，我只想让图像显示。一旦我有了它，我将按照我想要的方式对其进行格式化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:53:40.750

这段代码工作得很好！我将 KCBSLogo.jpg 更改为我命名为 tile.png 的源。当我运行它时显示完美。确保 KCBSLogo.jpg 位于项目的 SRC 文件夹中。

[http://i.stack.imgur.com/sYfYF.png](http://i.stack.imgur.com/sYfYF.png)

如您所见，显示了平铺图像。

# iphone - 类之间传递数据的差异

> ID：12762846
> 
> 赞同：1
> 
> 时间：2012-10-06T18:56:06.410
> 
> 标签：iphone, ios, xcode

代码的第 1 部分工作正常。第 2 部分显示了代码中的微小更改，这些更改会导致代码按预期停止工作（没有错误/警告）。

第 1 部分：（作品）

```
#import "ClassA.h"
#import "ClassB.h"

@implementation ClassA

- (void) sendData
{
    NSString *temp = [NSString stringWithFormat:@"HI!"];
    ClassB *classBObject = [[ClassB alloc] init];
    classBObject.dataToDisplay = temp;
    self.view = classBObject.view;
}

@end 
```

B类接口：

```
#import <UIKit/UIKit.h>

@interface ClassB : UIViewController

@property (weak, nonatomic) IBOutlet UILabel *textLabel;
@property NSString * dataToDisplay;

@end 
```

B类的实现：

```
#import "ClassB.h"

@implementation ClassB

@synthesize dataToDisplay, textLabel;

- (void)viewDidLoad
{
    [super viewDidLoad];

    textLabel.text = dataToDisplay;
}

@end 
```

第2部分：

但是，如果我将`- (void)sendData`ClassA 更改为以下内容：

```
- (void) sendData
    {
        NSString *temp = [NSString stringWithFormat:@"HI!"];
        ClassB *classBObject = [[ClassB alloc] init];
        classBObject.textLabel.text = temp; // statement changed from Part 1.
        self.view = classBObject.view;
    } 
```

`textLabel.text = dataToDisplay;`并从中删除`implementation`，视图控制器`ClassB`的`textLabel`视图控制器`ClassB`不会更新。你能建议一下吗，为什么会这样？

谢谢！

编辑1：

在声明中： ，我在复制粘贴`classBObject.textLabel.text = temp; // statement changed from Part 1.`时错过了。`.text`请原谅我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:18:10.650

第二种技术不正确的原因（除了`.text`末尾的缺失`textLabel`）是当您从 B 类初始化程序返回时，无疑还没有创建`UILabel`对应的底层。`textLabel`如果您查看此[图](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW2)，您会发现视图配置并未在初始化方法结束时完成，而是在访问时完成。因此，您必须推迟对用户界面控件的任何访问，直到`viewDidLoad`.

* * *

**更新：**

当我运行以下代码时，我在日志中得到“0x0”，证明`UILabel`我的第二个视图仍然`nil`没有初始化，正如我所预料的那样。当`viewDidLoad`我的第二个控制器中的 设置`self.textLabel.text = self.dataToDisplay`为 时`viewDidLoad`，它就像一个冠军一样工作（就像它为你所做的那样）。但该`UILabel` `IBOutlet`属性只是不可靠，直到`viewDidLoad`。

```
SecondViewController *controller = [[SecondViewController alloc] init];

NSLog(@"%p", controller.textLabel);

controller.dataToDisplay = @"from first view";

[self presentViewController:controller animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:03:11.923

您正在将 UITextLabel 设置为 NSString。尝试

```
classBObject.textLabel.text = temp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T19:05:25.760

改变这一行...

```
 classBObject.textLabel = temp; // statement changed from Part 1. 
```

到

```
 classBObject.textLabel.text = temp; // statement changed from Part 1. 
```

另外，你应该做

```
 [self.view addSubView:classBObject.view]; //using navigation controller or presenting modal viewcontroller would be recommended. 
```

代替

```
 self.view = classBObject.view; 
```

在此行之后，使用您的值更新标签的文本。

```
 classBObject.textLabel.text = temp; // statement changed from Part 1. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T19:48:07.317

我注意到您`UILabel`在`classB`界面中使用了对 的弱引用。你有什么理由不使用`strong`参考？您想使用`weak`引用的唯一时间是避免保留循环。最有可能的`UILabel`是，您没有被保留。

你在哪里初始化你的`UILabel`？

# objective-c - 尝试在objective-c中读取文件的创建日期属性时出错

> ID：12762849
> 
> 赞同：-2
> 
> 时间：2012-10-06T18:56:45.413
> 
> 标签：objective-c, cocoa

我试图在我的计算机中读取文件的创建日期属性我正在使用以下代码行：

```
NSError *error = [[NSError alloc] init];
NSDictionary *localFileProperties = [[NSFileManager defaultManager] attributesOfFileSystemForPath:path error:&error];
NSLog(@"file date: %@",[localFileProperties fileModificationDate]); 
```

但是我得到一个 (null) 作为答案，我不知道我做错了什么，我没有收到错误，当我检查 NSDictionary 描述时，它只有这 5 个键：

```
Printing description of localFileProperties:
{
    NSFileSystemFreeNodes = 113416750;
    NSFileSystemFreeSize = 464555008000;
    NSFileSystemNodes = 121886742;
    NSFileSystemNumber = 16777218;
    NSFileSystemSize = 499248103424;
} 
```

我的代码中是否缺少某些内容？或者它有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:18:15.160

查看方法名称或[文档](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/doc/uid/20000305-SW9)。`attributesOfFileSystemForPath:`用于**文件系统**，而不是单个文件。

你想要[`attributesOfItemAtPath:error:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/doc/uid/20000305-SW8)。

# php - 如何检查所有值是仅文本还是仅整数？

> ID：12762851
> 
> 赞同：-2
> 
> 时间：2012-10-06T18:57:06.877
> 
> 标签：php

我试图通过著名的“1 OR 1”技术防止 sql 注入 url，使用 get 变量来检查 id 是否只是字符串 ex:(page.php?id=abc) 或整数 ex:(page.php?id= 12)

所以，我使用 is_string() 函数来检查字符串和 is_numeric 的数字，但它所做的只是检查第一个字母。因此，如果 ( ?id=ab345 ) 它仍然会返回 true。

那么，有没有办法检查所有值是否都是字符串，并且所有值都只是整数？

这是链接： `<a href="site.com/page.php?id=MyProfile"> My Profile </a>`

此页面获取 id 并进行数据库查询 `if(isset($_GET['id']) {**AND IF ID IS TEXT ONLY**} {Perform code}` 我缺少的是介于两者之间的 ** **

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:22:24.063

您的问题的许多可能答案之一是；

```
$id = isset(isset($_GET['id'])) ? (int) $_GET['id'] : 0;    //force to integer, or 0 if not set 
```

这会将 id 的值强制为整数，如果未在 URL 中设置，则强制为零（不要忘记讨厌的脚本小子，他们会手动更改 URL 以尝试破坏您的网站！）

但是......说实话......我有点担心你甚至认为这会阻止 SQL 注入攻击。我强烈建议您花更多时间进一步阅读该主题，这可能就是您的问题被否决的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:06:15.667

`// Request: _GET['id'] = ab345
var_dump(is_numeric($_GET['id'])); // false
var_dump(is_string($_GET['id'])); // true`

`// Request: _GET['id'] = 345
var_dump(is_numeric($_GET['id'])); // true
var_dump(is_string($_GET['id'])); // false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:13:05.303

默认情况下，PHP 中的所有这些输入都是*string*。如果您需要更具体的值，可以使用 PHP 具有的过滤器和验证功能（[数据过滤器^(*文档*)](http://php.net/manual/en/book.filter.php)），例如查看默认可用的过滤器：[http ://www.php.net/manual/en/过滤器.filters.php](http://www.php.net/manual/en/filter.filters.php)

# algorithm - 树中的最小成本边缘删除以分离树中的所有叶子

> ID：12762853
> 
> 赞同：3
> 
> 时间：2012-10-06T18:57:23.010
> 
> 标签：algorithm, graph, tree

这是一个更大的问题，我归结为以下问题。给定一个具有正边权重的加权树，并且有 k 个叶子。叶子是在树中恰好有一个相邻节点的节点。我需要从树中删除一些边，以便树分成 k 个组件，每个组件都包含原始树中的一个叶节点。换句话说，我需要删除边，以便原始树中的所有叶子都与原始树的所有其他叶子分开/断开。

我需要这样做，以使已删除边的权重（成本）之和最小化。证明需要删除 k-1 条边是微不足道的。所以我需要最小化这些 k-1 边的权重之和。

执行此操作的最佳方法是什么？任何提示将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:31:18.190

我认为贪心算法在这里有效。

即删除生成新分量的最低权重边并重复k-1次。

请注意，您必须小心以下图表：

D<-A->B->C

如果先删除 B->C，那么删除 A->B 并不会生成新的组件，因为 B 不是叶子，所以不需要分离。

换句话说，在选择权重最低的边时，不要包括任何仍不通向叶节点的边。

# ruby-on-rails - Rails 回形针处理器：shell 命令失败

> ID：12762858
> 
> 赞同：1
> 
> 时间：2012-10-06T18:58:05.933
> 
> 标签：ruby-on-rails, ruby, shell, ubuntu, paperclip

我的 rails 应用程序中的自定义回形针处理器有问题。我上传了一个声音文件，处理器通过 shell 命令创建了一个波形图像（由这个[gem](https://github.com/benalavi/waveform)提供）

我在 Ubuntu 12.04（生产环境）上运行 RoR 3.2.7 / Ruby 1.9.3。我的带有回形针附件的模型如下所示：

```
# encoding: utf-8
class Track < ActiveRecord::Base
  has_attached_file :original_file,
                    :styles => { :waveform_image => { :waveform => true } },
                    :processors => [:sound_processor],
                    :storage => :s3,
                    :s3_credentials => "#{Rails.root.to_s}/config/s3.yml",
                    :url  => ":s3_eu_url",
                    :path => "sounds/:id/:five_digit_id_:basename_:style.:extension"
end 
```

对应的回形针处理器：

```
class Paperclip::SoundProcessor < Paperclip::Processor

  def initialize file, options = {}, attachment = nil
    # cut for brevity
  end

  def make
    src = @file
    dst = Tempfile.new([@basename, @current_format])
    dst.binmode

    if @waveform
      cmd = "waveform #{File.expand_path(src.path)} #{File.expand_path(dst.path)}"
      Paperclip.log(cmd)
      out = `#{cmd}`
      dst = File.open "#{File.expand_path(dst.path)}"
    end

    dst
  end
end 
```

当命令

```
waveform #{File.expand_path(src.path)} #{File.expand_path(dst.path)} 
```

在生产机器（Ubuntu 12.04）上执行，出现以下错误：

```
/usr/bin/env: ruby: No such file or directory 
```

然而 usr/bin/env 是一个文件而不是一个目录。由于没有 ruby​​ 可执行文件，我如何在执行 shell 命令时传递正确的位置？

PS：在我的开发机器（OSX）上，usr/bin/env 是我的 rails app 目录的副本。它在开发中就像一个魅力。我感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:42:41.210

错误消息表明找不到 ruby​​ 可执行文件。它与您现在包含在问题中的代码无关。

错误来自包含该`waveform #{File.expand_path(src.path)} #{File.expand_path(dst.path)}`行的脚本文件。

查看这些问题的答案： - [https://stackoverflow.com/a/6126419/429758](https://stackoverflow.com/a/6126419/429758) - [https://stackoverflow.com/a/5241638/429758](https://stackoverflow.com/a/5241638/429758) - [https://stackoverflow.com/a/5241593/429758](https://stackoverflow.com/a/5241593/429758) - [https://stackoverflow.com/a/1064319/429758](https://stackoverflow.com/a/1064319/429758)

他们应该让您了解为什么在您的生产环境中找不到 ruby​​ 可执行文件。

# delegates - 如何从 UIImagePickerController 接收照片已被触摸的通知？

> ID：12762861
> 
> 赞同：0
> 
> 时间：2012-10-06T18:58:38.083
> 
> 标签：delegates, uiimagepickercontroller, nsnotifications

如何从 UIImagePickerController 接收照片已被触摸的通知？

我正在使用最好在 imagePickerController: didFinishPickingMediaWithInfo: 中停止的 SVProgresHUD：但是从哪里开始呢？

我需要的是另一个委托功能，通知应用程序用户已经触摸了选择的照片，以便可以启动 HUD。

使用 iPhone 照片库的 UIImagePickerController 是从我的 findPhotoAction 中的主线程启动的：这是我的代码中可以启动 ProgressHUD 的最后一个位置。此时启动 HUD 是错误的。用户在实际触摸所需照片（这是启动 ProgressHUD 的适当位置）之前单击以下内容。

```
 Camera Roll item in picker's UITableView
  Touch Desired Photo 
```

你能建议一个解决方案吗？我需要自定义 UIPickerController 吗？

非常感谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:12:52.363

我从 Ray Wenderlich 那里找到了我需要的一切

```
http://www.raywenderlich.com/1888/how-to-create-a-simple-iphone-app-tutorial-part-33 
```

谢谢阅读。

# c++ - 根据类型标记字符串流

> ID：12762865
> 
> 赞同：1
> 
> 时间：2012-10-06T18:59:17.987
> 
> 标签：c++, iostream, sstream

我有一个包含整数和特殊含义字符“#”的输入流。它看起来如下： `... 12 18 16 # 22 24 26 15 # 17 # 32 35 33 ...` 标记用空格分隔。'#' 的位置没有模式。

我试图像这样标记输入流：

```
int value;
std::ifstream input("data");
if (input.good()) {
  string line;
  while(getline(data, line) != EOF) {
    if (!line.empty()) {
      sstream ss(line);
      while (ss >> value) {
        //process value ...

      }
    }
  }
} 
```

此代码的问题是遇到第一个“#”时处理停止。

我能想到的唯一解决方案是将每个单独的标记提取成一个字符串（不是'#'）并使用 atoi() 函数将字符串转换为整数。但是，由于大多数令牌是整数，因此效率非常低。在令牌上调用 atoi() 会带来很大的开销。

有没有办法可以按类型解析单个令牌？即，对于整数，将其解析为整数，而对于'#'，跳过它。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:06:51.483

一种可能性是显式跳过空格 ( `ss >> std::ws`)，然后使用`ss.peek()`它来确定 a 是否`#`跟随。如果是，则用于`ss.get()`读取并继续，否则用于`ss >> value`读取值。

如果 的位置`#`无关紧要，您也可以`'#'`在用它初始化之前从行中删除所有`stringstream`内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T21:07:32.013

通常不值得对 good() 进行测试

```
if (input.good()) { 
```

除非您的下一个操作是生成错误消息或异常。如果它不好，那么所有进一步的操作都会失败。

不要针对`EOF`.

而（getline（数据，行）！= EOF）{

std::getline() 的结果不是整数。它是对输入流的引用。输入流可转换为可在 bool 上下文中使用的类似 bool 的对象（如`while` `if`等）。所以你想要做什么：

```
while(getline(data, line)) { 
```

我不确定我会读一行。您可以只阅读一个单词（因为输入是空格分隔的）。对字符串使用 >> 运算符

```
std::string word;
while(data >> word) {  // reads one space separated word 
```

现在你可以测试这个词，看看它是否是你的特殊字符：

```
if (word[0] == "#") 
```

如果不将单词转换为数字。

这就是我要做的：

```
// define a class that will read either value from a stream
class MyValue
{
  public:
    bool isSpec() const {return isSpecial;}
    int  value()  const {return intValue;}

    friend std::istream& operator>>(std::istream& stream, MyValue& data)
    {
        std::string item;
        stream >> item;
        if (item[0] == '#') {
            data.isSpecial = true;
        } else
        {   data.isSpecial = false;
            data.intValue  = atoi(&item[0]);
        }
        return stream;
    }
  private:
    bool isSpecial;
    int  intValue;
};

// Now your loop becomes:
MyValue  val;
while(file >> val)
{
    if (val.isSpec())  { /* Special processing */ }
    else               { /* We have an integer */ }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T19:09:27.490

也许您可以将所有值读取为 std::string 然后检查它是否为“#”（如果不是 - 转换为 int）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T19:50:08.197

```
int value;
std::ifstream input("data");
if (input.good()) {
    string line;
    std::sstream ss(std::stringstream::in | std::stringstream::out);
    std::sstream ss2(std::stringstream::in | std::stringstream::out);
    while(getline(data, line, '#') {
        ss << line;
        while(getline(ss, line, ' ') {
            ss2 << line;
            ss2 >> value
            //process values ...
            ss2.str("");  
        }
        ss.str("");
    }
} 
```

在这里，我们首先在第一个 while 循环中用标记 '#' 分割行，然后在第二个 while 循环中，我们用 ' ' 分割行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T19:08:46.977

就个人而言，如果您的分隔符*始终*是空格，无论后面是什么，我建议您只需将输入作为字符串并从那里解析。这样，您可以获取字符串，查看它是数字还是 # 等等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-06T19:10:19.600

我认为您应该重新检查您的前提，即“在令牌上调用 atoi() 会带来很大的开销-”

没有什么神奇的`std::cin >> val`。在引擎盖下，它最终调用（非常类似于）atoi。

如果您的令牌很大，则创建 a 可能会产生一些开销，`std::string`但正如您所说，绝大多数是数字（其余是#），因此它们应该很短。

# java - 不兼容的操作数类型 String 和 char 语法错误

> ID：12762870
> 
> 赞同：0
> 
> 时间：2012-10-06T18:59:42.860
> 
> 标签：java, eclipse, joptionpane

**太棒了，我得到这个来纠正我的比较和我的 IF 语句，但我现在正在控制台上打印文件上的信息。没有更多错误代码，但是控制台只说 java.io.PrintWriter .....关于如何使用 outputFile 和 import javax.swing.JOptionPane 的任何指针？更正代码如下

```
import java.io.File;
import java.util.Scanner;
import java.io.PrintWriter;
import javax.swing.JOptionPane;

public class StudentFile {
     public static void main(String[] args) throws Exception {
        // Declare and initialize variables
        String studentSummary = "Student Summary Report";
        String eligibleBachelorsReport = "Eligible Bachelors Report";

        // input record
        String firstName;
        String lastName;
        String gender;
        int age;
        String maritalStatus;

        // counters
        int marriedMen = 0;
        int singleMen = 0;
        int marriedWomen = 0;
        int singleWomen = 0;

        // create studentInput to read from StudentFile.txt
        File inputFile = new File("StudentFile.txt");
        Scanner input = new Scanner(inputFile);

        while (input.hasNext()) {
            // read name, gender, age, maritalStatus
            firstName = input.next();
            lastName = input.next();
            gender = input.next();
            age = input.nextInt();
            maritalStatus = input.next();

            if (gender.equals("F"))
            {
                if(maritalStatus.equals("M"))
                {
                marriedWomen = marriedWomen ++;
                }

                else {
                   singleWomen = singleWomen ++;
                 }
            }
            else if (maritalStatus.equals("M")){
                marriedMen = marriedMen++;
            }else{
                singleMen = singleMen++;
            }

                if( age > 30) {
                    eligibleBachelorsReport += " "+firstName + " "+lastName;
     }
            System.out.println(firstName + " " + lastName + " " + gender + " " + age + " "
                    + maritalStatus);
        }

        // write studentSummary, eligibleBachelorsReport to StudentReport.txt
        PrintWriter outputFile = new PrintWriter("StudentReport.txt");
        outputFile.println(studentSummary);
        outputFile.println(eligibleBachelorsReport);

        // write studentSummary, eligibleBachelorsReport to the console
        System.out.println(studentSummary);
        System.out.println(eligibleBachelorsReport);
        JOptionPane.showMessageDialog(null, outputFile);

        input.close();
        outputFile.close();
     }} 
```

我试图让这段代码工作，但我似乎无法弄清楚我做错了什么。我知道我正在尝试比较我已导入/附加到该程序的此文本文件中的字符串数据，但它似乎无法通过。

我的代码如下，我导入的 txt 文件标记为 StudentFile.txt，并按以下顺序包含三行信息：姓名、性别、年龄、婚姻状况 例如：Mick Jagger M 22 S

我做错了什么，为什么我不断收到语法错误？我正在使用简单的eclipse，我通常可以通过使用他们的调试器找到我做错了什么，但我有点卡住了。请帮忙！谢谢

```
import java.io.File;
import java.util.Scanner;
import java.io.PrintWriter;
import javax.swing.JOptionPane;

public class StudentFile {
    public static void main(String[] args) throws Exception {
        // Declare and initialize variables
        String studentSummary = "Student Summary Report";
        String eligibleBachelorsReport = "Eligible Bachelors Report";

        // input record
        String firstName;
        String lastName;
        String gender;
        int age;
        String maritalStatus;

        // counters
        int marriedMen = 0;
        int singleMen = 0;
        int marriedWomen = 0;
        int singleWomen = 0;

        // create studentInput to read from StudentFile.txt
        File inputFile = new File("StudentFile.txt");
        Scanner input = new Scanner(inputFile);

        while (input.hasNext()) {
            // read name, gender, age, maritalStatus
            firstName = input.next();
            lastName = input.next();
            gender = input.next();
            age = input.nextInt();
            maritalStatus = input.next();

            if (gender.equals(F)){
            }if maritalStatus.equals(M)){
                marriedWomen = marriedWomen ++;
                } else {
                singleWomen = singleWomen ++;
            }else{
                }if maritalStatus.equals(M)){
                marriedMen = marriedMen ++
            }else{
                singleMen = singleMen ++
                if age > 30 {
                    eligibleBachelorsReport += ""firstName + ""lastName
    }
            System.out.println(firstName + " " + lastName + " " + gender + " " + age + " "
                    + maritalStatus);
        }

        // write studentSummary, eligibleBachelorsReport to StudentReport.txt
        PrintWriter outputFile = new PrintWriter("StudentReport.txt");
        outputFile.println(studentSummary);
        outputFile.println(eligibleBachelorsReport);

        // write studentSummary, eligibleBachelorsReport to the console
        System.out.println(studentSummary);
        System.out.println(eligibleBachelorsReport);

        input.close();
        outputFile.close();
    }} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:02:06.687

查看您的性别字符串比较：

```
gender.equals(F)){
        }if maritalStatus.equals(M)){ 
```

您在这里使用裸标记，而*不是*与字符串比较`"M"`, 和`"F"`.

还要查看该代码，那里有一个语法错误 - 并且在你的许多`if`语句中 - 和一个空块 if `gender.equals("F")`，并且你将多个`else`语句串在一起，而不是使用 intermediate `else if`。

这是不正确的：

```
if (test)
{

}
else
{ ; }
else // wrong, can only have one final else
{ ; } 
```

对于三个分支，您需要一个干预`if`：

```
if (test)
{

}
else if (someOtherTest)
{

}
else // ok, one final else
{ ; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:03:04.760

```
if (gender.equals(F)) 
```

`F`在您的代码中没有变量..您应该在此处使用“F”进行比较..

另外，您将 if 用作：- `if age > 30`..这不是正确的方法..您需要将括号括起来：-`if (age > 30)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:03:42.920

你说`if (gender.equals(F))`，但什么是 F？这是您在某处定义的变量吗？我认为您的意思更可能是字符串“F”。相同`if (maritalStatus.equals(M))`（顺便说一句，缺少和左括号）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T19:15:30.140

代码有几个问题。我将尝试对到目前为止所看到的内容进行快速恢复（显示每个案例的单个示例，其余相关问题类似），如果我发现更多，我将更新答案：

```
gender.equals(F) 
```

什么是 F？，它不是定义的变量，也不是有效值。如果要与字符串进行比较，则需要使用引号，例如`"F"`.

```
if age > 30 
```

大多数语句需要`()`'s 来界定您要检查的内容。该`if`声明就是其中之一，要求它像`if(age > 30)`. 另外，请记住，如果您的 if 包含多行代码，则需要使用括号。

```
eligibleBachelorsReport += ""firstName + ""lastName 
```

不需要在`String`变量之前使用引号来连接它们。不过，如果您想在字符串之间添加一个空格，请执行`eligibleBachelorsReport += " " + firstName + " " + lastName + " - "`. 最后`-`只是一个建议。请记住，如果您要将很多东西连接在一起。此外，`\n`如果需要插入换行符，也可以使用。

```
eligibleBachelorsReport += ""firstName + ""lastName
marriedMen = marriedMen ++ 
```

除其他外，这些行的末尾没有分号。

```
singleMen = singleMen ++ 
```

本身不是问题，但没有必要。就做`singleMen++`which is same than `singleMen = singleMen + 1`or also `singleMen += 1`。

最后一点，检查你的`if`陈述。`else`per只有一个`if`，将其视为避免孤儿`else`，因为没有与它们相关的条件。结构是：

```
if(condition) {

} else {

} 
```

或者，如果`if`and/or`else`仅包含一行（我总是使用括号。它允许更清晰地划分语句并提高可读性恕我直言。）：

```
if(condition)
    //code
else
    //code 
```

或者，嵌套语句：

```
if(condition) {

} else if(condition2) {

} else if(condition3) {

} 
```

# sql - SQL：从各个起点创建数字的顺序列表

> ID：12762883
> 
> 赞同：2
> 
> 时间：2012-10-06T19:01:23.780
> 
> 标签：sql, range, sequence, sequential, gaps-and-islands

我被困在这个 SQL 问题上。

我有一列是起点列表`prevdoc`（`exdiff`

例如，这里是前几行：

```
prevdoc | exdiff
----------------    
1       | 3
21      | 2
126     | 2 
```

所以我需要一个输出看起来像：

```
2
3
4
22
23
127
128 
```

我什至不知道从哪里开始。谁能告诉我这个解决方案的 SQL 代码？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:27:26.910

```
;with a as
(
select prevdoc + 1 col, exdiff
from <table> where exdiff > 0
union all
select col + 1, exdiff - 1
from a
where exdiff > 1
)
select col 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T21:41:49.597

如果您的 exdiff 将是一个小数字，您可以使用`SELECT..UNION ALL`如下所示的方式组成一个虚拟数字表并加入它：

```
select prevdoc+number
from doc
join (select 1 number union all
      select 2 union all
      select 3 union all
      select 4 union all
      select 5) x on x.number <= doc.exdiff
order by 1; 
```

我提供了 5 个，但您可以根据需要扩展。您尚未指定您的 DBMS，但在每个 DBMS 中都会有一个序列号来源，例如在 SQL Server 中，您可以使用：

```
select prevdoc+number
from doc
join master..spt_values v on
   v.number <= doc.exdiff and
   v.number >= 1 and
   v.type = 'p'
order by 1; 
```

master..spt_values 表包含 0-2047 之间的数字（按 type='p' 过滤时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:26:53.620

如果数字不是太大，那么您可以在大多数数据库中使用以下技巧：

```
select t.exdiff + seqnum
from t join
     (select row_number() over (order by column_name) as seqnum
      from INFORMATION_SCHEMA.columns
     ) nums
     on t.exdiff <= seqnum 
```

在子查询中使用 INFORMATION_SCHEMA 列是任意的。唯一的目的是生成至少与最大 exdiff 数一样长的数字序列。

这种方法适用于任何支持排名功能的数据库。大多数数据库都有特定于数据库的生成序列的方式（例如 SQL Server 中的递归 CTE 和 Oracle 中的 CONNECT BY）。

# wpf - Windows Presentation Foundation 主机崩溃

> ID：12762884
> 
> 赞同：1
> 
> 时间：2012-10-06T19:01:27.117
> 
> 标签：wpf, windows, internet-explorer-8, presentation

我们正在使用一个使用 WPF 的 saas 应用程序。它通常在我们使用的每个浏览器上都能正常工作，但我们的一个用户最近被转移到另一个办公室，从那天起，他在 IE 8 上收到关于 WPF 遇到问题并且应用程序崩溃的错误。其他浏览器也一样。

它可以连接到他连接到的网络吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-27T01:00:08.937

我得到了同样的错误。

[![在此处输入图像描述](../Images/f63ae70a2a7e862b0072dfc67558c453.png)](https://i.stack.imgur.com/aQsl1.png)

一些论坛提出了注册表访问问题，但是当我运行该工具时，它说[![在此处输入图像描述](../Images/e00e0dfdbdad9e89131c61bd12f1023b.png)](https://i.stack.imgur.com/JCcyL.png)访问没有问题。

我猜我的网站响应是 XML，这是 IE 无法解释的。

# javascript - 如果单击“应用设置”按钮，则保存表单数据，否则恢复为旧数据

> ID：12762885
> 
> 赞同：1
> 
> 时间：2012-10-06T19:01:31.407
> 
> 标签：javascript, jquery, ajax

我正在使用 jQuery 制作搜索过滤器菜单。此表单包含多个表单元素，例如复选框和输入框。当用户对表单进行一些更改并单击`#apply-filters`按钮时，表单将被隐藏，其数据将通过 发送到服务器后端进行处理`$.post()`。

如果用户对表单进行了更改但没有单击`#apply-filters`按钮就将其关闭，则过滤器菜单`div`将被隐藏，并且下次用户重新打开过滤器菜单时，将显示初始设置，而不是用户所做的最新设置但未能点击`#apply-filters`。

**问题：**在 jQuery 中执行此操作的最佳方法是什么？

**HTML**

```
<form id="filter-menu">
    <input type="checkbox" id="free" name="free" /><label for="free">Free</label>
    <input type="checkbox" id="sale" name="sale" /><label for="sale">Sale</label>

    <input type="checkbox" id="rooms_1" name="rooms[]" value=1/><label for="rooms_1">1 Room</label>
    <input type="checkbox" id="rooms_2" name="rooms[]" value=2 /><label for="rooms_2">2 Rooms</label>

    <input type="text" id="price" val="100" />

    <button id="apply-filers">Apply Filters</button>
</form> 
```

**jQuery**

```
$('#apply-filters').click(function() {
    $('#filter-menu').serializeArray();  // Gives an empty array

    $.post('api/someplace', 
            { free: 1,
            sale: 1,
            rooms: [1, 2],
            price: 100
            }, function() {
                console.log('yay');
            });
}); 
```

* * *

## 更新

当我做

```
JSON.stringify($('filter-form').serializeArray()) 
```

我明白了

```
[{"name":"rooms[]","value":"1"},{"name":"rooms[]","value":"2"}]" 
```

但是我想通过`$.post()`like将它发送到服务器端

```
{rooms: [1,2]} 
```

这样我就可以在服务器端做（PHP，在使用框架函数处理之后）

```
$rooms = implode(',', $rooms_array)    // gives `1,2` 
```

MySQL查询可以像

```
SELECT .... WHERE rooms IN (1,2) 
```

这可能吗？发送到服务器端的好方法是什么？另外，我将如何使用输出`serializeArray()`来馈入`$.post()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:10:37.557

您的`serializeArray`方法返回空数组，因为您的表单元素没有`name`属性。

```
<input type="checkbox" id="free" name='something' /> 
```

如果要重置表单值，可以使用 JavaScript`reset`方法。

```
$('#close').click(function(){
    $('#something').hide()
    $("#filter-menu")[0].reset();
}) 
```

* * *

```
$('#apply-filters').click(function() {
     var room = $('#filter-menu input[name="rooms[]"]:checked').map(function(){
             return this.value
     }).get();  

    $.post('api/someplace', 
            { free: 1,
            sale: 1,
            rooms: room,
            price: 100
            }, function() {
                console.log('yay');
    });
}); 
```

# c# - c# 仅使用部分输入文本的自动完成文本框

> ID：12762889
> 
> 赞同：0
> 
> 时间：2012-10-06T19:02:18.340
> 
> 标签：c#, autocomplete

我想仅使用用户输入的部分文本在文本框中实现自动完成功能。例如，如果用户输入“123 abc”，我希望自动完成只使用“abc”部分。

我尝试用数据（超过 500,000 个项目）填充哈希集。然后使用正则表达式`@"^[\d]*\s*"`从字符串的开头成功删除数字和空格，所以我只剩下“abc”（但**我想将数字留在文本框中**），然后`value.StartsWith("abc")`通过遍历每个值来填充列表哈希集。最后，我将所有过滤的项目添加到组合框项目中。

这种方法非常慢，并且给我最多 5 秒或更长时间的暂停，文本框自动完成方法更快更好地实现。我可以只使用部分字符串的文本框自动完成功能，还是可以建议其他一些同样快的实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T19:29:22.907

您是否尝试过/考虑过二进制搜索方法？它可能会更快...

您只需将它们全部添加到列表中，对其进行排序，然后在搜索中使用它，如下面的代码所示......

另一种方法是将其存储在索引数据库中，这将使用文本索引非常快。

例如...

如果未找到完全匹配，List.BinarySearch 将返回比请求大的下一个项目的索引的补码。

```
//So, you can do it like this (assuming you'll never get an exact match):

var key = (cardName + Config.EditionShortToLong(edition)).ToLower();
var list = CardBase.cardList;

var index = ~list.BinarySearch(key);
return index != list.Count && list[index].StartsWith(key); 
```

祝你好运...

[http://msdn.microsoft.com/en-us/library/w4e7fxsh.aspx](http://msdn.microsoft.com/en-us/library/w4e7fxsh.aspx)

```
using System;
using System.Collections.Generic;

public class Example
{
    public static void Main()
    {
        List<string> dinosaurs = new List<string>();

        dinosaurs.Add("Pachycephalosaurus");
        dinosaurs.Add("Amargasaurus");
        dinosaurs.Add("Mamenchisaurus");
        dinosaurs.Add("Deinonychus");

        Console.WriteLine();
        foreach(string dinosaur in dinosaurs)
        {
            Console.WriteLine(dinosaur);
        }

        Console.WriteLine("\nSort");
        dinosaurs.Sort();

        Console.WriteLine();
        foreach(string dinosaur in dinosaurs)
        {
            Console.WriteLine(dinosaur);
        }

        Console.WriteLine("\nBinarySearch and Insert \"Coelophysis\":");
        int index = dinosaurs.BinarySearch("Coelophysis");
        if (index < 0)
        {
            dinosaurs.Insert(~index, "Coelophysis");
        }

        Console.WriteLine();
        foreach(string dinosaur in dinosaurs)
        {
            Console.WriteLine(dinosaur);
        }

        Console.WriteLine("\nBinarySearch and Insert \"Tyrannosaurus\":");
        index = dinosaurs.BinarySearch("Tyrannosaurus");
        if (index < 0)
        {
            dinosaurs.Insert(~index, "Tyrannosaurus");
        }

        Console.WriteLine();
        foreach(string dinosaur in dinosaurs)
        {
            Console.WriteLine(dinosaur);
        }
    }
} 
```

# java - 如何删除 JFrame 边框以让图像接触边缘

> ID：12762894
> 
> 赞同：5
> 
> 时间：2012-10-06T19:02:58.110
> 
> 标签：java, swing, graphics, jframe, border

我有一个朋友为我制作的程序制作了背景，这样看起来就不会那么简单了，我认为放置图像的最佳方法是制作一个 JLabel，用图像填充它，然后将其设置为屏幕的大小。这工作得很好，除了 JFrame 周围有一个小边框，我无法让 JLabel 触摸框架的边缘。想法？我附上了一张图片。

![边界问题](../Images/f4a0cabd30706b179b85d991157e7f17.png)

```
public class ProgramDriver extends JFrame {

private JPanel contentPane;
private static CardLayout cardLayout;
private JTextField addGradeN;
private JTextField addGradeD;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                ProgramDriver frame = new ProgramDriver();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

//Global Variables 
...
    manager = new StateManager(gb);

    //JFrame Settings
    setTitle("Grade Book");
    setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    setBounds(100, 100, 656, 530);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    cardLayout = new CardLayout(0,0);
    contentPane.setLayout(cardLayout);
    setResizable(false);

    //Home Panel 
    final JPanel Home = new JPanel();
    contentPane.add(Home, "Home");
    Home.setLayout(null);

    JButton btnSeeGrades = new JButton("See Grades");
    ...

    //Grades Panel
    JPanel Grades = new JPanel();
    contentPane.add(Grades, "Grades");
    Grades.setLayout(null);' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T20:36:52.720

问题不在于`JFrame`，问题在于您的代码。我们可以用余生来猜测问题所在，或者您可以发布一些示例代码。

现在由您决定，我们可以不断地尝试对您进行错误的猜测，让我们所有人感到沮丧，或者您可以帮助我们帮助您...

这是我做的两个例子。第一个使用 a`JLabel`作为 a 的主要内容`JPanel`，其中放置子组件。很好很简单。

第二个使用自定义`JPanel`将图像绘制到组件的背景上。然后我用它来替换框架内容窗格。这有点涉及，但它具有易于更新的额外好处（替换内容窗格不会影响程序的其余部分）

示例 1：`JLabel`用作背景

![JLabel 作为背景](../Images/52c1b152d800ac10558bb953c4e78345.png)

```
public class TestBackground {

    public static final String BACKGROUND_PATH = "/Volumes/Macintosh HD2/Dropbox/MT015.jpg";

    public static void main(String[] args) {
        new TestBackground();
    }

    public TestBackground() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setLayout(new BorderLayout());
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new LabelPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });

    }

    protected class LabelPane extends JPanel {

        public LabelPane() {

            BufferedImage bg = null;
            try {
                bg = ImageIO.read(new File(BACKGROUND_PATH));
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            JLabel label = new JLabel(new ImageIcon(bg));
            setLayout(new BorderLayout());

            add(label);

            label.setLayout(new GridBagLayout());

            JLabel lblMessage = new JLabel("Look at me!");
            lblMessage.setForeground(Color.WHITE);
            lblMessage.setFont(lblMessage.getFont().deriveFont(Font.BOLD, 48));

            label.add(lblMessage);

        }
    }
} 
```

示例 2：用作背景的图像，替换内容窗格...

![背景内容窗格](../Images/0672e92cebcdd7260b8bd64c621c52c6.png)

```
public class TestBackground {
    public static final String BACKGROUND_PATH = "/Volumes/Macintosh HD2/Dropbox/MT015.jpg";

    public static void main(String[] args) {
        new TestBackground();
    }

    public TestBackground() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setLayout(new BorderLayout());
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setContentPane(new BackgroundPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected class BackgroundPane extends JPanel {

        private BufferedImage bg = null;

        public BackgroundPane() {
            try {
                bg = ImageIO.read(new File(BACKGROUND_PATH));
            } catch (IOException ex) {
                ex.printStackTrace();
            }

            setLayout(new GridBagLayout());

            JLabel lblMessage = new JLabel("Look at me!");
            lblMessage.setForeground(Color.WHITE);
            lblMessage.setFont(lblMessage.getFont().deriveFont(Font.BOLD, 48));

            add(lblMessage);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(1153, 823);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (bg != null) {
                g.drawImage(bg, 0, 0, this);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T19:38:18.137

要扩展 Eng.Fouad 的答案，您需要使用`drawImage(...)`采用 6 个参数、图像、x 和 y 位置、图像宽度和高度以及图像观察者的方法，并在 JPanel 中像这样绘制它：

```
g.drawImage(img, 0, 0, getWidth(), getHeight(), this); 
```

例如，我的[sscce](http://sscce.org)：

```
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.*;

@SuppressWarnings("serial")
public class ExpandingImage extends JPanel {
   public static final String GUITAR = "http://duke.kenai.com/Oracle/OracleStrat.png";
   BufferedImage img;

   public ExpandingImage(String imgUrlPath) throws IOException {
      URL imgUrl = new URL(imgUrlPath);
      img = ImageIO.read(imgUrl);
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      if (img != null) {
         g.drawImage(img, 0, 0, getWidth(), getHeight(), this);
      }
   }

   private static void createAndShowGui() {
      ExpandingImage mainPanel;
      try {
         mainPanel = new ExpandingImage(GUITAR);
         JFrame frame = new JFrame("ExpandingImage");
         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         frame.getContentPane().add(mainPanel);
         frame.pack();
         frame.setLocationByPlatform(true);
         frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
         frame.setVisible(true);
      } catch (IOException e) {
         e.printStackTrace();
      }
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

**编辑**
我看到您在 contentPane 周围使用了 EmptyBorder。如果您不希望出现此边界，为什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-06T19:06:45.587

作为替代方案，您可以覆盖 JPanel 的方法[`paintComponent(Graphics g)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)（[contentPane](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html)）并[`drawImage()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.Color,%20java.awt.image.ImageObserver%29)在[Graphics](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html)对象上使用，`g`如[本例所示](https://stackoverflow.com/a/11026881/597657)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T19:07:15.820

你试过 JFrame 函数 setUndecorated() 吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-06T20:55:54.243

使框架未装饰。`frame.setUndecorated(true)`

如果你想让它动起来，你可以使用`ComponentMover`Java2S的。

确保它在可见之前是未装饰的。

接下来，使用`setContentPane(new JLabel(new ImageIcon("myimage.jpg")));`

之后，您可以照常添加内容。

# c - 我怎么知道一个点是否在三角形中？

> ID：12762898
> 
> 赞同：2
> 
> 时间：2012-10-06T19:03:12.633
> 
> 标签：c, algorithm, geometry, pixel, point

我有一个简单的二维三角形。我一直在寻找如何知道给定点是否属于该三角形。这是算法（我在这里找到了：[How to determine if a point is in a 2D triangle?](https://stackoverflow.com/questions/2049582/how-to-determine-a-point-in-a-triangle)），它非常好而且很快（根据其他人的说法）：

```
float sign(int x0, int y0, int x1, int y1, int x2, int y2){
    return (x0 - x2) * (y1 - y2) - (x1 - x2) * (y0 - y2);
}

int ptintr(int sx, int sy, int x0, int y0, int x1, int y1, int x2, int y2){
    int b1, b2, b3;

    b1 = sign(sx, sy, x0, y0, x1, y1) < 0.0f ? 1 : 0;
    b2 = sign(sx, sy, x1, y1, x2, y2) < 0.0f ? 1 : 0;
    b3 = sign(sx, sy, x2, y2, x0, y0) < 0.0f ? 1 : 0;

    if((b1) == b2 && (b2 == b3))
        return 1;
    return 0;
} 
```

我在 draw_ftriangle() 中调用这个函数：

```
void draw_ftriangle(SDL_Surface * s, int x0, int y0, int x1, int y1, int x2, int y2, unsigned color){
    int ymin = min(y0, min(y1, y2));
    int xmin = min(x0, min(x1, x2));
    int ymax = max(y0, max(y1, y2));
    int xmax = max(x0, max(x1, x2));

    draw_line(s, x0, y0, x1, y1, color);
    draw_line(s, x1, y1, x2, y2, color);
    draw_line(s, x0, y0, x2, y2, color);

    for(; ymin < ymax; ymin++)
        for(; xmin < xmax; xmin++)
            if(ptintr(xmin, ymin, x0, y0, x1, y1, x2, y2))
                put_pixel(s, xmin, ymin, color);
} 
```

这里 sx 和 sy 是给定点的坐标，x0, x1, x2, y0, y1, y2 是三角形的点。但是这个算法不起作用。每当我给这个函数一个点的坐标和三角形点的坐标时，它总是返回false。谁能告诉我这个算法是否正确，或者我在这里留下了一些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:23:46.353

我用两个输入尝试了这个算法：

`ptintr(3,2,1,1,3,4,4,1)) => returned 1`

`ptintr(2,3,1,1,3,4,4,1)) => returned 0`

他们都是正确的。

我可能错了，但是您正在测试从 (x,y) 池中采样的最小和最大坐标，这意味着它们都将位于三角形的轮廓上。该算法将轮廓上的坐标视为不属于它的一部分。

`ptintr(3,1,1,1,3,4,4,1)) => returns 0`因为点 (3,1) 在轮廓上。

尝试将`<`运算符更改为`<=`in function `ptintr`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:41:47.387

您的循环仅执行顶行，因为 xmin 未重置。

换句话说，第一次通过内部 x 循环时，您将增加 xmin 直到它变为 xmax。第二次执行内部 x 循环时，xmin 已经是 xmax，所以什么也没有发生。

尝试

```
int x;
for(; ymin < ymax; ymin++)
    for(x=xmin; x < xmax; x++)
        if(ptintr(x, ymin, x0, y0, x1, y1, x2, y2))
            put_pixel(s, x, ymin, color); 
```

# ios - 仅在拆分视图控制器的一半上呈现模态视图控制器

> ID：12762899
> 
> 赞同：2
> 
> 时间：2012-10-06T19:03:13.997
> 
> 标签：ios, uiviewcontroller, uisplitviewcontroller, modalviewcontroller, ipad

我正在调整现有的 iPhone 应用程序以在 iPad 上运行。在 iPhone 版本中，当用户点击工具栏按钮时，我会呈现一个带有`modalTransitionStyle`of的模态视图控制器`UIModalTransitionStyleFlipHorizontal`，它制作了一个非常漂亮的“卡片翻转”动画。

iPad 界面基于拆分视图（`MGSplitViewController`实际上是 ）。工具栏按钮位于详细信息窗格中，因此当我展示模态视图控制器时，它会占据整个屏幕，并且翻转过渡毫无意义。

为了获得正确的用户交互，我希望模态控制器*仅*在详细视图控制器上出现并翻转到位，而使主视图控制器保持原样。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-09T17:44:13.297

```
UIViewController *viewController = [[UIViewController alloc] init];
viewController.modalPresentationStyle = UIModalPresentationCurrentContext;

[self presentViewController:viewController animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-06T19:32:49.920

可能您可以将其视图添加为 DetailViewcontroller 的子视图并使用 UIview 动画使其看起来像模态。[参考`[UIView transitionFromView:toView:duration:options:completion]`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/transitionFromView:toView:duration:options:completion:)

**编辑** 在观看 WWDC2010 视频（第 123 节：构建动画驱动的界面）时，我意外地知道我可以以不同的方式进行相同的转换。我对编码进行了示例，它起作用了:)

它是使用另一个非常相似的 API[`[UIView transitionWithView:duration:options:animations:completion:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/transitionWithView:duration:options:animations:completion:)

我的示例代码如下

```
// Within your DetailViewController
[self.view addSubview:self.flipSideView];
[UIView transitionWithView:self.view duration:0.8 options:UIViewAnimationOptionTransitionFlipFromLeft animations:^{} completion:nil]; 
```

是的，就是这样。只需将反面视图添加为子视图并使用`transitionWithView:...`动画而不是`transitionFromView...`.

# javascript - JS：增加同级节点的选择

> ID：12762900
> 
> 赞同：1
> 
> 时间：2012-10-06T19:03:19.393
> 
> 标签：javascript, jquery

我有点坚持这个......

假设我有下一个 HTML 结构：

```
<div id="sourceText" class="cSourceText" contenteditable="true">
     some text here
     <br>
     some more text here
     <br>
</div> 
```

现在，假设我使用 js`splitText`方法将第一个文本节点的一部分存储在 var 中（即`<TextNode textContent="text here">`存储在var 中`var newNode;`）。

我想让`newNode`var 与下一个兄弟节点一起增加，直到它获得指定文本节点的指定点（这取决于用户选择）。比方说，对于我们的示例，我想`newNode=>text here <br> some more` 在最后使用 jQuery wrapp 函数用 div 包装该节点。

那可能吗？还是我走错了方向？

# c - 我无法执行程序

> ID：12762909
> 
> 赞同：-1
> 
> 时间：2012-10-06T19:04:03.017
> 
> 标签：c

当我试图运行 ac 程序时，它给了我一个错误 ./csudoku: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.14' not found (required by ./csudoku) 如何能我解决这个？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:05:20.323

要么在具有较新 glibc 的系统上运行它，要么在具有较旧 glibc 的系统上重建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:05:53.267

从您的发行版存储库安装 GLIBC_2.14

# c++ - C++：使用 dlopen() 加载共享库时未定义的符号

> ID：12762910
> 
> 赞同：3
> 
> 时间：2012-10-06T19:04:27.220
> 
> 标签：c++, shared-libraries, dlopen, undefined-symbol

当我尝试使用 dlopen() 将共享库加载到另一个共享库时遇到问题。我检查了所有关于如何正确使用 dlopen() 的教程。所以这里是简化的代码：

主共享库包含一个具有纯虚函数的类，子共享库（又名插件）必须实现该类。此外，它还有一些其他功能，这些功能是通过默认行为实现的。我创建了一个宏，它被添加到每个插件中，以便有一个符号来加载和创建类。

**主共享库**

**插件.h：**

```
Class A {
public:
  virtual int func1() = 0;
  virtual bool func2() const;
}

#define CREATE_CLASS(cls) extern "C" void *CreateClass(void) { return new cls; } 
```

**插件.cpp：**

```
bool A::func2() const {   return true; } 
```

**构建并链接 main.so**

```
g++ -g -Wall -Woverloaded-virtual -Wno-parentheses -O2 -fPIC -c -o plugin.o plugin.cpp
g++ -g -Wall -Woverloaded-virtual -Wno-parentheses -O2 -fPIC  -rdynamic -shared plugin.o -ldl -o main-plugin.so 
```

子共享库只实现纯虚拟功能。另一个函数可以被覆盖，尽管它是可选的。

**子共享库**

**插件-impl.cpp**

```
Class B : public A {
public:
  virtual int func1() { return 0; }
}

CREATE_CLASS(B) 
```

这些是构建和链接子共享库的行。

**构建和链接 sub.so**

```
g++ -g -O3 -Wall -Werror=overloaded-virtual -Wno-parentheses -fPIC -c -o subPlugin.o subPlugin.cpp
g++ -g -O3 -Wall -Werror=overloaded-virtual -Wno-parentheses -fPIC  -shared subPlugin.o  -o subPlugin.so 
```

这是打开子共享库的行。我试过 LAZY，现在，现在 | GLOBAL 等等，没有任何影响。

**dlopen() 在主共享库的某处调用：**

```
 handle = dlopen(file.c_str(), RTLD_LAZY); 
```

其中大部分工作得很好。但是，当我尝试将子共享库加载到主共享库中时，dlopen 抱怨`bool A::func2() const`. 该函数确实只存在于主共享库中，所以我想它无论如何都必须导出。请帮帮我！我很迷茫！

# **解决方案**

因为我无法更改可执行文件，所以我必须通过将以下选项添加到 g++ 来链接主共享库和子共享库：

```
-L$(PLUGINDIR) -Wl,-R$(PLUGINDIR) -lmain-shared 
```

使用此设置，无需设置`LD_LIBRARY_PATH`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:14:10.147

由于您的子库需要主库中的符号，我认为您希望它与它链接。尝试像这样链接它：

```
g++ -g -O3 -Wall -Werror=overloaded-virtual -Wno-parentheses -fPIC  -shared 
    -lmain-plugin subPlugin.o  -o subPlugin.so 
```

可能你也需要玩`-L`。

这是我尝试过的：

```
jirka@debian:/tmp$ cat executable.cpp 
#include <dlfcn.h>
#include <stdio.h>
int main()
{
  dlopen("./main-library.so", RTLD_NOW);
  void* handle=dlopen("./sub-library.so", RTLD_LAZY);
  printf("%x %s", dlsym(handle, "CreateClass"), dlerror());
}
jirka@debian:/tmp$ cat main-library.cpp 
class A {
public:
  virtual int func1() = 0;
  virtual bool func2() const;
};

#define CREATE_CLASS(cls) extern "C" void *CreateClass(void) { return new cls; }

bool A::func2() const {   return true; }
jirka@debian:/tmp$ cat sub-library.cpp 
class A {
public:
  virtual int func1() = 0;
  virtual bool func2() const;
};

#define CREATE_CLASS(cls) extern "C" void *CreateClass(void) { return new cls; }

class B : public A {
public:
  virtual int func1() { return 0; }
};

CREATE_CLASS(B)

jirka@debian:/tmp$ g++ -g -Wall -Woverloaded-virtual -Wno-parentheses -O2 -fPIC  -rdynamic -shared main-library.cpp -ldl -o main-library.so
jirka@debian:/tmp$ g++ -g -O3 -Wall -Werror=overloaded-virtual -Wno-parentheses -fPIC  -shared -l:main-library.so sub-library.cpp  -o sub-library.so
jirka@debian:/tmp$  g++ -ldl executable.cpp -o executable
jirka@debian:/tmp$ LD_LIBRARY_PATH=. ./executable 
b7713740 (null) 
```

另一种可能性是[`RTLD_GLOBAL`](http://linux.die.net/man/3/dlopen)在加载时添加`main-library`：

```
jirka@debian:/tmp$ cat executable.cpp 
#include <dlfcn.h>
#include <stdio.h>
int main()
{
  dlopen("./main-library.so", RTLD_LAZY | RTLD_GLOBAL);
  void* handle=dlopen("./sub-library.so", RTLD_LAZY);
  printf("%x %s", dlsym(handle, "CreateClass"), dlerror());
} 
```

这样，您无需将任何内容与`main-library.so`.

# sql - 消息 245，级别 16，状态 1，行 1 将 varchar 值“Ali”转换为数据类型 int 时转换失败

> ID：12762911
> 
> 赞同：-3
> 
> 时间：2012-10-06T19:04:35.673
> 
> 标签：sql

```
create table employee
(
    empID int check(empID>0),
    Fname varchar(50) check(Fname<7),
    Lname varchar(50),
    Salary int check (salary>0),
    Joining_Date date,
    DOB date, 

) ;
insert into employee values (5,'Ali','Murtaza', 30000, '2012-01-12','1984-01-20') 
```

该表给出了上述错误..我想检查 Fname 不超过 7..建议请

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T19:10:04.813

您的检查约束试图查看字符串 'Ali' 是否小于 7。那没有意义。引擎正在尝试将 ali 转换为它无法执行的 int。

我猜您的意图是检查以确保 fname 字符长度小于 7。如果是这种情况，为什么要使用 a `varchar(50)`？将其更改为 a`varchar(7)`并放弃检查。

```
fname varchar(7), 
```

如果你真的坚持做检查，那么你需要这样做：

```
fname varchar(50) check(length(fname)<7),  /* depending on sql flavor */ 
```

如果您尝试做其他事情，您的问题并不清楚。

此外，根据您的 sql 风格（tsql、plsql 等），您的检查约束的形式可能有效也可能无效，我建议您指定您的问题所引用的 sql 风格。

# jquery - MVC 4 Ajax Post 不工作

> ID：12762912
> 
> 赞同：3
> 
> 时间：2012-10-06T19:04:53.503
> 
> 标签：jquery, ajax, asp.net-mvc

```
@using(Html.BeginForm("About", "User", FormMethod.Post , new { id="aboutme"}))
{
    <fieldset>
          <ul>
            <li> <label class="block">About me</label> @Html.TextAreaFor(m=>m.About.AboutMe)</li>
            <li> <input type="button" id="submit" class="input-button" /> </li>
          </ul>
    </fieldset>
}

<script type="text/javascript">
    $(function () {
        $('#submit').click(function () {

            $.ajax({
                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                success: function (result) {
                    // The AJAX call succeeded and the server returned a JSON
                    // with a property "s" => we can use this property
                    // and set the html of the target div
                    alert(result.s);
                    $('#ShowResultHere').html(result.s);
                }
            });
            // it is important to return false in order to
            // cancel the default submission of the form
            // and perform the AJAX call
            return false;
        });
    }); 
</script> 
```

当我调试它时，操作 URL 变为`/User/undefined`.

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T19:09:52.423

`this`关键字是指事件的来源，在本例中为按钮`submit`。你想要这个表格，所以试试这个（使用[JQuery 遍历](http://api.jquery.com/closest/)）：

```
url: $(this).closest("form").prop("action"),
type: $(this).closest("form").prop("method"),
data: $(this).closest("form").serialize() 
```

另一种方法是使用`<input type='submit' class='input-button' />`而不是`button`, 并监听事件`$("#aboutme").submit`（这种方式`this`实际上是指表单，正如您的代码所假设的那样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:58:58.740

作为替代的 attr 函数，要获取属性 [http://api.jquery.com/attr/](http://api.jquery.com/attr/)的值， 并且 jQuery 有一个 ajax post 的简写，$.post [http://api.jquery.com/jQuery .post/](http://api.jquery.com/jQuery.post/) 所以你的代码可以这样结束

```
$("#submit").click(function(event){
    event.preventDefault();
    $.post($("#aboutme").attr("action"), $("#aboutme").serialize(), function (data) {
        if (data != null) {
            alert(result.s);
            $('#ShowResultHere').html(result.s);
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:21:59.397

或者，您可以改用 Ajax.BeginForm 方法，该方法允许您为返回的任何 html 设置更新目标。

示例：[将 Ajax.BeginForm 与 A​​SP.NET MVC 3 Razor 一起使用](https://stackoverflow.com/questions/5410055/using-ajax-beginform-with-asp-net-mvc-3-razor)

# list - Haskell：将函数映射到列表列表

> ID：12762913
> 
> 赞同：10
> 
> 时间：2012-10-06T19:04:57.370
> 
> 标签：list, function, haskell, map

如何映射函数以对列表中的列表进行操作？以下只是我试图做的一个例子，但我只是作为一个一般性问题提出。提前致谢！

现在，我正在尝试将一个函数 change 映射到一个列表的每个列表（由 itrCol xs 返回）。

```
evalChange xs = map change $ itrCol xs 
```

其中itrCol 返回一个列表列表，其中每个包含列表都是一列。

```
itrCol xs = [getCol x xs | x <- (take (width xs) (iterate (\x -> (x + 1)*1) 0))] 
```

getCol 列出列给定的列索引列表

```
getCol :: Int -> [t] -> [t] 
```

变化是：

```
change []     = []
change [x]    = [x]
change [x,y]  = [x,y]
change (x:y:z:ws) | x == y && y == z = 0 : y*(-1) : 0 : change ws
change (x:xs) =  x : change xs 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-06T19:31:43.233

看一下这个！

```
map           :: (a -> b) ->   [a]   ->   [b]
(map.map)     :: (a -> b) ->  [[a]]  ->  [[b]]
(map.map.map) :: (a -> b) -> [[[a]]] -> [[[b]]] 
```

等等

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-06T19:10:01.957

可以只使用柯里化和另一个调用映射。

```
map (map change) $ itrCol xs 
```

要了解更多关于 currying 的信息，请查看[Learn You A Haskell 中的那一章](http://learnyouahaskell.com/higher-order-functions#curried-functions)，这是一本很棒的 Haskell 初学者书籍。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T19:10:20.203

`map`（`fmap`更重要的是）本质上提升了一个函数来处理列表，给你一个新的函数：（我添加了多余的括号以使其更清晰）

```
map :: (a -> b) -> ([a] -> [b]) 
```

如果您映射第二个函数`([a] -> [b])`，您将获得一个适用于列表列表的函数：

```
evalChange xs = map (map change) $ itrCol xs 
```

（如果这不是您想要的，请澄清）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T22:44:24.727

的类型签名`map`是：

```
map :: (a -> b) -> [a] -> [b] 
```

一种合理的类型签名`change`是：

```
change :: [Integer] -> [Integer] 
```

现在`map`期望一个函数 from `a`to`b`作为它的第一个参数。如果我们给它`change`一个函数 from `[Integer]`to `[Integer]`, then `a = [Integer]`and `b = [Integer]`。

```
map change :: [[Integer]] -> [[Integer]] 
```

`iterCol xs`现在，如果从提供 a生成的列表理解`[[Integer]]`，那么我们可以将其应用于`map change`：

```
map change (itrCol xs) :: [[Integer]] 
```

这一切对我来说都很好。它之所以有效，是因为它`map`是多态的。如果你给它一个把 A 变成 B 的函数，那么它会给你一个把*A 的*列表变成*B*的列表的函数。A 和 B 是什么并不重要：正如您在此处看到的，它们甚至可以是列表本身！

# php - 如何调试 php-fpm 崩溃？随机 php-fpm 崩溃。

> ID：12762914
> 
> 赞同：2
> 
> 时间：2012-10-06T19:05:15.390
> 
> 标签：php

我在我们的服务器上遇到随机的 php-fpm 崩溃。PHP 版本 PHP 5.3.14。我无法找到应该从哪里开始调试以找出原因的根源？我们唯一需要注意的是：我正在使用自定义编译的 sqlite3 扩展。我们正在做自定义会话处理。

```
#0  0x00007f45c5d5d8a5 in raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00007f45c5d5f085 in abort () at abort.c:92
#2  0x00007f45c5d9afe7 in __libc_message (do_abort=2, fmt=0x7f45c5e827c0 "*** glibc detected *** %s: %s: 0x%s ***\n")
    at ../sysdeps/unix/sysv/linux/libc_fatal.c:198
#3  0x00007f45c5da0916 in malloc_printerr (action=3, str=0x7f45c5e82ab8 "free(): invalid next size (fast)", ptr=<value optimized out>)
    at malloc.c:6311
#4  0x00007f45c5da3443 in _int_free (av=0x7f45c60b9e80, p=0xdadb80, have_lock=0) at malloc.c:4811
#5  0x00000000005aba3f in _zval_dtor_func ()
#6  0x000000000059ffb9 in _zval_ptr_dtor ()
#7  0x00000000004ac917 in ?? ()
#8  0x00000000005faab8 in ?? ()
#9  0x00000000005d21f0 in execute ()
#10 0x00000000005a23fa in zend_call_function ()
#11 0x00000000004a39f0 in ?? ()
#12 0x00000000005faab8 in ?? ()
#13 0x00000000005d21f0 in execute ()
#14 0x00000000005abd4d in zend_execute_scripts ()
#15 0x0000000000558948 in php_execute_script ()
#16 0x000000000063e959 in ?? ()
#17 0x00007f45c5d49cdd in __libc_start_main (main=0x63d300, argc=3, ubp_av=0x7fff7329c8a8, init=<value optimized out>, fini=<value optimized out>, 
    rtld_fini=<value optimized out>, stack_end=0x7fff7329c898) at libc-start.c:226
#18 0x0000000000422069 in _start () 
```

第二

```
#0  0x000000000058efe8 in ?? ()
#1  0x00000000005a4452 in destroy_op_array ()
#2  0x00000000005b8cdb in zend_hash_destroy ()
#3  0x00000000005a451a in destroy_zend_class ()
#4  0x00000000005b89a5 in ?? ()
#5  0x00000000005b8aa9 in zend_hash_reverse_apply ()
#6  0x00000000005a040e in ?? ()
#7  0x00000000005acc82 in ?? ()
#8  0x00000000005593d5 in php_request_shutdown ()
#9  0x000000000063e02d in ?? ()
#10 0x00007f45c5d49cdd in __libc_start_main (main=0x63d300, argc=3, ubp_av=0x7fff7329c8a8, init=<value optimized out>, fini=<value optimized out>, 
    rtld_fini=<value optimized out>, stack_end=0x7fff7329c898) at libc-start.c:226
#11 0x0000000000422069 in _start () 
```

第三

```
#0  0x000000000058ef49 in ?? ()
#1  0x000000000058f0fb in ?? ()
#2  0x00000000004b163e in ?? ()
#3  0x00000000005ae1cc in ?? ()
#4  0x00000000005b8a94 in zend_hash_reverse_apply ()
#5  0x00000000005acbfd in ?? ()
#6  0x00000000005595b5 in php_request_shutdown ()
#7  0x000000000063e02d in ?? ()
#8  0x00007f45c5d49cdd in __libc_start_main (main=0x63d300, argc=3, ubp_av=0x7fff7329c8a8, init=<value optimized out>, fini=<value optimized out>, 
    rtld_fini=<value optimized out>, stack_end=0x7fff7329c898) at libc-start.c:226
#9  0x0000000000422069 in _start () 
```

# git - Git：看不到新的远程分支

> ID：12762922
> 
> 赞同：172
> 
> 时间：2012-10-06T19:06:02.953
> 
> 标签：git, remote-branch

一位同事将一个新的远程分支推送到 origin/dev/homepage，但我在运行时看不到它：

```
$ git branch -r 
```

我仍然看到预先存在的远程分支。

我认为这是因为我的本地远程引用不是最新的，因此当我运行 git pull 时什么也没发生，因为 git pull 只拉当前工作分支，对吗？与 git push 不同，它将所有有更改的分支推送到相应的远程分支？

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-10-06T19:08:01.283

首先，使用命令仔细检查分支是否已实际远程推送`git ls-remote origin`。如果新分支出现在输出中，请尝试给出命令`git fetch`：它应该从远程存储库下载分支引用。

如果您的远程分支仍然没有出现，请仔细检查（在`ls-remote`输出中）远程上的分支名称是什么，特别是它是否以`refs/heads/`. 这是因为，默认情况下， 的值为`remote.<name>.fetch`：

```
+refs/heads/*:refs/remotes/origin/* 
```

这样只有名称以开头的远程引用`refs/heads/`才会在本地映射为远程跟踪引用`refs/remotes/origin/`（即，它们将成为远程跟踪分支）

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2017-09-06T17:26:40.297

检查是否`.git/config`包含

```
[remote "origin"]
    url = …
    fetch = +refs/heads/master:refs/remotes/origin/master 
```

如果是这样，请更改为

```
[remote "origin"]
    url = …
    fetch = +refs/heads/*:refs/remotes/origin/* 
```

然后你应该可以使用它：

```
$ git fetch
remote: Counting objects: …
remote: Compressing objects: ..
Unpacking objects: …
remote: …
From …
 * [new branch]            branchname -> origin/branchname
$ git checkout branchname
Branch branchname set up to track remote branch branchname from origin.
Switched to a new branch 'branchname' 
```

* * *

## 回答 #3

> 赞同：89
> 
> 时间：2018-03-28T14:24:18.957

最简单的答案是：

`git fetch origin <branch_name>`

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2020-03-20T14:09:31.897

假设我们正在搜索**release/1.0.5**

何时`git fetch --all`不*工作*并且您看不到远程分支并且`git branch -r`不显示此特定分支。

**1.从远程打印所有参考（分支，标签，...）：**

`git ls-remote origin` 应该向您显示您正在搜索的远程分支。

```
e51c80fc0e03abeb2379327d85ceca3ca7bc3ee5        refs/heads/fix/PROJECT-352
179b545ac9dab49f85cecb5aca0d85cec8fb152d        refs/heads/fix/PROJECT-5
e850a29846ee1ecc9561f7717205c5f2d78a992b        refs/heads/master
ab4539faa42777bf98fb8785cec654f46f858d2a        refs/heads/release/1.0.5
dee135fb65685cec287c99b9d195d92441a60c2d        refs/heads/release/1.0.4
36e385cec9b639560d1d8b093034ed16a402c855        refs/heads/release/1.0
d80c1a52012985cec2f191a660341d8b7dd91deb        refs/tags/v1.0 
```

新分支`release/1.0.5`出现在输出中。

**2\. 强制获取远程分支：**

`git fetch origin <name_branch>:<name_branch>`

```
$ git fetch origin release/1.0.5:release/1.0.5

remote: Enumerating objects: 385, done.
remote: Counting objects: 100% (313/313), done.
remote: Compressing objects: 100% (160/160), done.

Receiving objects: 100% (231/231), 21.02 KiB | 1.05 MiB/s, done.
Resolving deltas: 100% (98/98), completed with 42 local objects.
From http://git.repo:8080/projects/projectX
 * [new branch]        release/1.0.5 -> release/1.0.5 
```

现在您在本地也有 refs，您可以检出（或其他）这个分支。

任务完成！

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2013-06-26T20:05:57.817

执行*git remote update*还将更新远程存储库中可用的分支列表。

如果您使用的是 TortoiseGit，从 1.8.3.0 版本开始，您可以执行“Git -> Sync”，在出现的窗口左下方会有一个“Remote Update”按钮。点击那个。然后您应该能够执行“Git -> Switch/Checkout”并让新的远程分支出现在您可以选择的分支下拉列表中。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-23T22:21:55.737

这听起来微不足道，但我的问题是我不在正确的项目中。确保您参与了您希望参与的项目；否则，您将无法拉下正确的分支。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-03-06T11:38:51.733

我使用蛮力并删除了遥控器然后添加了它

```
git remote rm <remote>
git remote add <url or ssh> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-05-05T03:55:43.813

最终对我有用的是将远程存储库名称添加到`git fetch`命令中，如下所示：

```
git fetch core 
```

现在你可以看到它们都是这样的：

```
git branch --all 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-16T14:20:40.377

您可以签出远程分支 /n git fetch && git checkout remotebranch

# asp.net-mvc - ASP.NET MVC 3 已经包含一个定义

> ID：12762925
> 
> 赞同：0
> 
> 时间：2012-10-06T19:06:31.243
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我和我的朋友在做作业时遇到问题。

我们制作了 4 个打印屏幕。问题是我们都得到同样的错误”

错误是： **错误 1 ​​类型“Jabber.Models.Jab”已经包含“消息”的定义**

[http://i.stack.imgur.com/lI60N.png](https://i.stack.imgur.com/lI60N.png)

[http://i.stack.imgur.com/S0dkb.png](https://i.stack.imgur.com/S0dkb.png)

[http://i.stack.imgur.com/L1Qko.png](https://i.stack.imgur.com/L1Qko.png)

[http://i.stack.imgur.com/YEW8t.png](https://i.stack.imgur.com/YEW8t.png)

![在此处输入图像描述](../Images/b56f29caec8f688d92c54e3a0010e4b4.png)

![在此处输入图像描述](../Images/4d0d8517ed94e7b048c0a7dca40406d8.png)

![在此处输入图像描述](../Images/821ce98419e59c3fa977d5aefb2a6858.png)![在此处输入图像描述](../Images/88d5b878283013f37941a29711a0fe60.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:14:23.873

您的 Jab 类被标记为部分，这意味着编译器会将其与同一命名空间中名为 jab 的任何其他类组合（只要它们也是部分的）。您的 EDMX 文件在同一个文件夹中，并且有一个名为 Jab 的实体，它将自动转换为一个类。它还有一个名为 Message 的属性，这就是您收到错误的原因。

尝试使用 MetaDataType 属性将元数据添加到消息中。

```
public class JabMetaData {
    [Display(Name = "Message")]...
    public string Message { get; set;}
}
[MetaDataType(typeof(JabMetaData)]
public partial class Jab {
} 
```

# android - 异步任务异常

> ID：12762932
> 
> 赞同：3
> 
> 时间：2012-10-06T19:07:25.877
> 
> 标签：android, exception, android-asynctask

我是 Android 开发的初学者，我正在使用我的第一个应用程序，但遇到了一个问题。我必须下载一些图片扔到互联网上，并在活动中展示它们。在下载图像之前，我有一个 UI 延迟，所以我必须使用多线程。

我阅读了更多关于它的信息，我认为最简单的是 AsyncTask，但我收到了一个例外：`Only the original thread that created a view hierarchy can touch its views.`

我需要帮助。任何人都可以帮助我吗？代码是这样的：

```
public class Main extends Activity{

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Download download = new Download();
    download.execute(null);
}

private class Download extends AsyncTask<String, Void, String>{
    ImageButtonOverloaded[] imgView = new ImageButtonOverloaded[24];
    TextView[] textView = new TextView[24];
    @Override
    protected String doInBackground(String... params) {
        try{

            URL url = null;
            url = new URL(StaticClass.URL_HOST + "front_page_last_games_plaintext.php");
            URLConnection conn = url.openConnection();
            BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            String line;

            initCovers();
            int i = 0;
            Log.d("SYNC", "i = 0");
            while((line = reader.readLine()) != null){
                String gameInfo[] = line.split("<NEXT>");
                //Log.d("SYNC", gameInfo[0]);
                //Log.d("SYNC", gameInfo[1]);
                Drawable x = ImageOperations(Main.this, StaticClass.URL_HOST + "resize.php?imagine=" + gameInfo[0] ,"image.jpg");

                Log.d("SYNC", "in while");
                imgView[i].setImageDrawable(x);
                Log.d("SYNC", "in while");
                imgView[i].setGameID(gameInfo[0]);
                imgView[i].setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        ImageButtonOverloaded temp = (ImageButtonOverloaded) v;
                        Intent intent = new Intent(Main.this, Single.class);
                        intent.putExtra("ID", temp.getGameID());
                        startActivity(intent);

                    }
                });

                textView[i].setText(gameInfo[1]);
                textView[i].setGravity(Gravity.TOP);
                textView[i].setGravity(Gravity.CENTER_HORIZONTAL);
                textView[i].setTextColor(Color.WHITE);
                i++;
            }
        }catch(Exception ex){
            Log.d("SYNC", ex.getMessage());
        }
        return null;
    }
    private Drawable ImageOperations(Context ctx, String url, String saveFilename) {
        try {
            InputStream is = (InputStream) this.fetch(url);
            Drawable d = Drawable.createFromStream(is, "src");
            return d;
        } catch (MalformedURLException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    public Object fetch(String address) throws MalformedURLException,IOException {
        URL url = new URL(address);
        Object content = url.getContent();
        return content;
    }
    private void initCovers(){
        imgView[0] = (ImageButtonOverloaded) findViewById(R.id.imageButton1);
        imgView[1] = (ImageButtonOverloaded) findViewById(R.id.imageButton2);
        imgView[2] = (ImageButtonOverloaded) findViewById(R.id.imageButton3);
        imgView[3] = (ImageButtonOverloaded) findViewById(R.id.imageButton4);
        imgView[4] = (ImageButtonOverloaded) findViewById(R.id.imageButton5);
        imgView[5] = (ImageButtonOverloaded) findViewById(R.id.imageButton6);
        imgView[6] = (ImageButtonOverloaded) findViewById(R.id.imageButton7);
        imgView[7] = (ImageButtonOverloaded) findViewById(R.id.imageButton8);
        imgView[8] = (ImageButtonOverloaded) findViewById(R.id.imageButton9);
        imgView[9] = (ImageButtonOverloaded) findViewById(R.id.imageButton10);
        imgView[10] = (ImageButtonOverloaded) findViewById(R.id.imageButton11);
        imgView[11] = (ImageButtonOverloaded) findViewById(R.id.imageButton12);
        imgView[12] = (ImageButtonOverloaded) findViewById(R.id.imageButton13);
        imgView[13] = (ImageButtonOverloaded) findViewById(R.id.imageButton14);
        imgView[14] = (ImageButtonOverloaded) findViewById(R.id.imageButton15);
        imgView[15] = (ImageButtonOverloaded) findViewById(R.id.imageButton16);
        imgView[16] = (ImageButtonOverloaded) findViewById(R.id.imageButton17);
        imgView[17] = (ImageButtonOverloaded) findViewById(R.id.imageButton18);
        imgView[18] = (ImageButtonOverloaded) findViewById(R.id.imageButton19);
        imgView[19] = (ImageButtonOverloaded) findViewById(R.id.imageButton20);
        imgView[20] = (ImageButtonOverloaded) findViewById(R.id.imageButton21);
        imgView[21] = (ImageButtonOverloaded) findViewById(R.id.imageButton22);
        imgView[22] = (ImageButtonOverloaded) findViewById(R.id.imageButton23);
        imgView[23] = (ImageButtonOverloaded) findViewById(R.id.imageButton24);

        textView[0] = (TextView) findViewById(R.id.textView1);
        textView[1] = (TextView) findViewById(R.id.textView2);
        textView[2] = (TextView) findViewById(R.id.textView3);
        textView[3] = (TextView) findViewById(R.id.textView4);
        textView[4] = (TextView) findViewById(R.id.textView5);
        textView[5] = (TextView) findViewById(R.id.textView6);
        textView[6] = (TextView) findViewById(R.id.textView7);
        textView[7] = (TextView) findViewById(R.id.textView8);
        textView[8] = (TextView) findViewById(R.id.textView9);
        textView[9] = (TextView) findViewById(R.id.textView10);
        textView[10] = (TextView) findViewById(R.id.textView11);
        textView[11] = (TextView) findViewById(R.id.textView12);
        textView[12] = (TextView) findViewById(R.id.textView13);
        textView[13] = (TextView) findViewById(R.id.textView14);
        textView[14] = (TextView) findViewById(R.id.textView15);
        textView[15] = (TextView) findViewById(R.id.textView16);
        textView[16] = (TextView) findViewById(R.id.textView17);
        textView[17] = (TextView) findViewById(R.id.textView18);
        textView[18] = (TextView) findViewById(R.id.textView19);
        textView[19] = (TextView) findViewById(R.id.textView20);
        textView[20] = (TextView) findViewById(R.id.textView21);
        textView[21] = (TextView) findViewById(R.id.textView22);
        textView[22] = (TextView) findViewById(R.id.textView23);
        textView[23] = (TextView) findViewById(R.id.textView24);

    }
}} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T19:17:34.253

`doInBackgorund()`是一个**非 UI 线程**，您无法访问其中的 UI 元素。doInBackground() 中的代码在一个单独的非 UI 线程上运行，该线程无法访问布局中定义的 UI 元素。此外，由于您通过意图调用另一个 Activity，因此您应该始终牢记 Activity 在 UI 线程上运行，因此您永远不应该从非 UI 线程内启动另一个 Activity。

因此，从 doInBackground() 内部删除访问 UI 元素的代码，然后将其放入内部**`onPostExecute()`**，这是一个 UI 线程，在 doInBackground() 完成后台处理后调用。

```
int i =0; // global variable
Drawable drawableArray []; // global array to store all the drawables 

doInBackground(String... params) {
        try{

            URL url = null;
            url = new URL(StaticClass.URL_HOST + "front_page_last_games_plaintext.php");
            URLConnection conn = url.openConnection();
            BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            String line;

            initCovers();
            while((line = reader.readLine()) != null){
                String gameInfo[] = line.split("<NEXT>");
                //Log.d("SYNC", gameInfo[0]);
                //Log.d("SYNC", gameInfo[1]);
                drawableArray[i] = ImageOperations(Main.this, StaticClass.URL_HOST + "resize.php?imagine=" + gameInfo[0] ,"image.jpg");
                i++;
}

onPostExecute()
{
   for(j=0;j<=i;j++)

                Log.d("SYNC", "in while");
                imgView[j].setImageDrawable(drawableArray[j]);
                Log.d("SYNC", "in while");
                imgView[j].setGameID(gameInfo[0]);
                imgView[j].setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        ImageButtonOverloaded temp = (ImageButtonOverloaded) v;
                        Intent intent = new Intent(Main.this, Single.class);
                        intent.putExtra("ID", temp.getGameID());
                        startActivity(intent);

                    }
                });

                textView[j].setText(gameInfo[1]);
                textView[j].setGravity(Gravity.TOP);
                textView[j].setGravity(Gravity.CENTER_HORIZONTAL);
                textView[j].setTextColor(Color.WHITE);
                j++;
            }
} 
```

**编辑：正如***@Luksprog*和*@tolgap*所指出的，主ui 线程上的图像处理部分操作很长，可能会使UI 无响应。因此，最好也在后台线程上进行图像处理，然后使用 onPostExecute() 来设置图像位图并更新其他 UI 元素。通过在后台进行处理，使用全局数组来存储 Drawable，然后在 onPostExecute() 中更新 UI。

# c# - 替换 ASP.NET MVC 中的路由解析器

> ID：12762934
> 
> 赞同：2
> 
> 时间：2012-10-06T19:07:36.307
> 
> 标签：c#, asp.net-mvc

所以我的 MVC 应用程序从刚刚浏览到 eg 的用户那里得到一个请求`/home/about`。它检查`RouteTable`匹配的模式并将其分派给正确的控制器和动作。伟大的。

如果我想接管该功能怎么办？我不想重写 URL，我不想`RouteData`在过滤器上下文中弄乱该属性或类似的东西。我想接管我的 MVC 应用程序将路由 X 转换为控制器 Y 和操作 Z 的部分。类似的东西`MyRouteResolver : IRouteResolver`（如果确实存在的话）。

我一直在 MSDN 上四处寻找，但找不到任何关于在哪里完成的提示。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:31:58.647

您可以编写一个有效地执行相同操作的 http 处理程序/模块，查看 System.Web.Routing.UrlRoutingHandler 以了解它们是如何做到的。

然而，一个问题是，在 MVC 中查找路由 url 的所有调用都不起作用（例如 UrlHelper），它们都经过硬编码以获取静态路由集合。您可以填充该路由集合以使其工作，但是我不确定您从拥有 ow 路由处理程序中获得了什么。

当前的路由处理程序相当灵活，您也许可以编写自己的路由类（参见 RouteBase）而不是替换整个处理程序。

# ruby-on-rails - Rails 开发环境即使在重新启动服务器后也不会更新 html/css/assets

> ID：12762939
> 
> 赞同：18
> 
> 时间：2012-10-06T19:08:13.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, ruby-on-rails-3.2, sprockets

我一直在用 Rails 开发一个网站，一切都比较顺利。突然间，我对视图和资产的更改不再显示。我更改了样式表或一些 html 并重新加载了我的浏览器，`http://0.0.0.0:3000`但没有任何变化。所以我重新启动了WEBrick，但仍然没有任何改变。如果我完全改变图像，情况也是如此。

获得新更改的唯一方法是预编译资产：

```
C:\Users\me\website>rake assets:precompile
C:/Ruby193/bin/ruby.exe C:/Ruby193/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets 
```

为什么将生产显示为 RAILS_ENV？也许我的开发环境不知何故变成了生产环境？但即便如此，我也不应该需要预编译资产来反映更改。无论如何在控制器和 erb 文件中`Rails.env.development?`返回`true`和`Rails.env.production?`返回。`false`

我试过删除我的 /tmp 目录无济于事。

我必须将以下行添加到 config/application.rb 以让 Heroku 使用 compass：

```
config.assets.initialize_on_precompile = false 
```

但是，无论如何，删除该行对我的问题没有帮助。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-06T19:11:32.993

删除`public/assets/`目录的内容。这就是预编译文件所在的位置，如果它们存在，它们就会被提供，而不是请求落入 Sprockets。您可以安全地对整个目录进行核对，然后事情应该会再次起作用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-07T04:36:59.043

另一种技术是将 public/assets/ 目录重命名为 public/assets_hide/。然后在运行“rake assets:precompile”并推送到服务器之前将其重命名。这减少了预编译时间，还保留了一些 gem 的资产文件权限，比如 Rich，它复制了资产。

一种更简单的方法是将 config/environments/development.rb 文件修改为：

```
config.serve_static_assets = false 
```

然后你就不需要弄乱 public/assets 目录了。但是，如果您使用回形针之类的东西来上传图像文件，这将不起作用，因为不会提供图像文件。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-01-15T07:42:11.180

我只是想添加一些可以使接受的答案更容易做的东西。这是我使用的：

```
rake tmp:cache:clear
rails server 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-30T18:53:27.657

可能对每个人都很明显，但只是想补充一点，如果删除或重命名 public/assets/ 文件夹，您可能还需要重新启动本地服务器并清除浏览器缓存:-)

# android - 为什么会出现“无法获取类型：content://contacts/”

> ID：12762940
> 
> 赞同：0
> 
> 时间：2012-10-06T19:08:17.383
> 
> 标签：android, android-contacts, android-contentresolver

我正在逐步完成“专业 Android 4 应用程序开发”中的教程。在第 5 章中，有一个简单的应用程序演示了选择联系人并打印结果。

在我进入应用程序并对其进行测试后，我收到以下错误：

> 10-06 11:29:04.596: W/ContentResolver(1073): 无法获取类型: content://contacts/ (URI: content://contacts/, 调用用户: android.uid.system:1000, 调用包是以下之一：[com.android.keychain, com.android.settings, android, com.android.providers.settings, com.android.inputdevices])

该字符串在以下方法中被引用：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_contact_picker_tester);

    Button  button  = (Button) findViewById(R.id.pick_contact_button);

    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent  intent  = new Intent(Intent.ACTION_PICK, Uri.parse("content://contacts/"));
            startActivityForResult(intent, PICK_CONTACT);
        }
    });
} 
```

我想也许我做错了什么，所以我从[书源代码](http://www.wrox.com/WileyCDA/WroxTitle/productCd-1118102274,descCd-DOWNLOAD.html)中运行了相应的示例并得到了同样的错误。任何想法这里可能有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T19:24:16.390

尝试改变

```
Intent  intent  = new Intent(Intent.ACTION_PICK, Uri.parse("content://contacts/")); 
```

至 ：

```
Intent intentContact = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI); 
```

我认为您的 uri 不正确，这就是它抛出类型错误的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T03:23:58.347

我刚刚浏览了这本书中的相同样本。内容 URI "content://contacts" 无效并且缺少[权限](http://developer.android.com/guide/topics/providers/content-provider-basics.html)。它应该被定义为

```
Intent intent = new Intent(Intent.ACTION_PICK, Uri.parse("content://picker/contacts/")); 
```

权限“选择器”是整个提供者的任意名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:10:26.133

您的 android manifest.xml 中是否有正确的权限？

你需要：

```
android.permission.READ_CONTACTS 
```

来自[http://developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)

# c - 分段错误：11

> ID：12762944
> 
> 赞同：63
> 
> 时间：2012-10-06T19:09:16.887
> 
> 标签：c, segmentation-fault

我的某个程序有问题，我搜索了分段错误，但我不太了解它们，我唯一知道的是，大概我正在尝试访问一些我不应该访问的内存。问题是我看到我的代码并且不明白我做错了什么。

```
#include<stdio.h>
#include<math.h>
#include<stdlib.h>

#define   lambda   2.0
#define   g        1.0
#define   Lx       100
#define   F0       1.0
#define   Tf       10
#define   h       0.1
#define   e       0.00001

FILE   *file;

double F[1000][1000000];

void Inicio(double D[1000][1000000]) {
int i;
for (i=399; i<600; i++) {
    D[i][0]=F0;
}
}

void Iteration (double A[1000][1000000]) {
long int i,k;
for (i=1; i<1000000; i++) {
    A[0][i]= A[0][i-1] + e/(h*h*h*h)*g*g*(A[2][i-1] - 4.0*A[1][i-1] + 6.0*A[0][i-1]-4.0*A[998][i-1] + A[997][i-1]) + 2.0*g*e/(h*h)*(A[1][i-1] - 2*A[0][i-1] + A[998][i-1]) + e*A[0][i-1]*(lambda-A[0][i-1]*A[0][i-1]);
    A[1][i]= A[1][i-1] + e/(h*h*h*h)*g*g*(A[3][i-1] - 4.0*A[2][i-1] + 6.0*A[1][i-1]-4.0*A[0][i-1] + A[998][i-1]) + 2.0*g*e/(h*h)*(A[2][i-1] - 2*A[1][i-1] + A[0][i-1]) + e*A[1][i-1]*(lambda-A[1][i-1]*A[1][i-1]);
    for (k=2; k<997; k++) {
        A[k][i]= A[k][i-1] + e/(h*h*h*h)*g*g*(A[k+2][i-1] - 4.0*A[k+1][i-1] + 6.0*A[k][i-1]-4.0*A[k-1][i-1] + A[k-2][i-1]) + 2.0*g*e/(h*h)*(A[k+1][i-1] - 2*A[k][i-1] + A[k-1][i-1]) + e*A[k][i-1]*(lambda-A[k][i-1]*A[k][i-1]);
    }
    A[997][i] = A[997][i-1] + e/(h*h*h*h)*g*g*(A[0][i-1] - 4*A[998][i-1] + 6*A[997][i-1] - 4*A[996][i-1] + A[995][i-1]) + 2.0*g*e/(h*h)*(A[998][i-1] - 2*A[997][i-1] + A[996][i-1]) + e*A[997][i-1]*(lambda-A[997][i-1]*A[997][i-1]);
    A[998][i] = A[998][i-1] + e/(h*h*h*h)*g*g*(A[1][i-1] - 4*A[0][i-1] + 6*A[998][i-1] - 4*A[997][i-1] + A[996][i-1]) + 2.0*g*e/(h*h)*(A[0][i-1] - 2*A[998][i-1] + A[997][i-1]) + e*A[998][i-1]*(lambda-A[998][i-1]*A[998][i-1]);
    A[999][i]=A[0][i];
}
}

main() {
long int i,j;
Inicio(F);
Iteration(F);
file = fopen("P1.txt","wt");
for (i=0; i<1000000; i++) {
    for (j=0; j<1000; j++) {
        fprintf(file,"%lf \t %.4f \t %lf\n", 1.0*j/10.0, 1.0*i, F[j][i]);
    }
}
fclose(file);
} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-10-06T19:14:40.850

本声明：

```
double F[1000][1000000]; 
```

在典型的 x86 系统上将占用 8 * 1000 * 1000000 字节。这大约是 7.45 GB。尝试执行代码时，您的系统可能内存不足，从而导致分段错误。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-10-06T19:18:35.270

您的数组占用大约 8 GB 内存（1,000 x 1,000,000 x sizeof(double) 字节）。这可能是您的问题的一个因素。它是一个全局变量而不是堆栈变量，所以你可能没问题，但你在这里推动了限制。

将这么多数据写入文件需要一段时间。

您没有检查文件是否已成功打开，这也可能是麻烦的根源（如果确实失败，则很可能是分段错误）。

你真的应该为 1,000 和 1,000,000 引入一些命名常量；它们代表什么？

您还应该编写一个函数来进行计算；您可以使用`inline`C99 或更高版本（或 C++）中的函数。代码中的重复令人痛苦。

您还应该使用 C99 表示法`main()`，使用显式返回类型（最好在不使用or`void`时用于参数列表）：`argc``argv`

```
int main(void) 
```

* * *

出于好奇，我复制了您的代码，将所有出现的 1000 更改为 ROWS，将所有出现的 1000000 更改为 COLS，然后创建`enum { ROWS = 1000, COLS = 10000 };`（从而将问题大小减少了 100 倍）。我做了一些小的改动，所以它可以在我喜欢的编译选项集下干净地编译（没什么严重的：`static`在函数前面，和主数组；`file`成为本地`main`；错误检查`fopen()`等）。

然后我创建了第二个副本并创建了一个内联函数来进行重复计算（以及第二个进行下标计算）。这意味着可怕的表达式只被写出一次——这是非常可取的，因为它确保了一致性。

```
#include <stdio.h>

#define   lambda   2.0
#define   g        1.0
#define   F0       1.0
#define   h        0.1
#define   e        0.00001

enum { ROWS = 1000, COLS = 10000 };

static double F[ROWS][COLS];

static void Inicio(double D[ROWS][COLS])
{
    for (int i = 399; i < 600; i++) // Magic numbers!!
        D[i][0] = F0;
}

enum { R = ROWS - 1 };

static inline int ko(int k, int n)
{
    int rv = k + n;
    if (rv >= R)
        rv -= R;
    else if (rv < 0)
        rv += R;
    return(rv);
}

static inline void calculate_value(int i, int k, double A[ROWS][COLS])
{
    int ks2 = ko(k, -2);
    int ks1 = ko(k, -1);
    int kp1 = ko(k, +1);
    int kp2 = ko(k, +2);

    A[k][i] = A[k][i-1]
            + e/(h*h*h*h) * g*g * (A[kp2][i-1] - 4.0*A[kp1][i-1] + 6.0*A[k][i-1] - 4.0*A[ks1][i-1] + A[ks2][i-1])
            + 2.0*g*e/(h*h) * (A[kp1][i-1] - 2*A[k][i-1] + A[ks1][i-1])
            + e * A[k][i-1] * (lambda - A[k][i-1] * A[k][i-1]);
}

static void Iteration(double A[ROWS][COLS])
{
    for (int i = 1; i < COLS; i++)
    {
        for (int k = 0; k < R; k++)
            calculate_value(i, k, A);
        A[999][i] = A[0][i];
    }
}

int main(void)
{
    FILE *file = fopen("P2.txt","wt");
    if (file == 0)
        return(1);
    Inicio(F);
    Iteration(F);
    for (int i = 0; i < COLS; i++)
    {
        for (int j = 0; j < ROWS; j++)
        {
            fprintf(file,"%lf \t %.4f \t %lf\n", 1.0*j/10.0, 1.0*i, F[j][i]);
        }
    }
    fclose(file);
    return(0);
} 
```

该程序写入`P2.txt`而不是`P1.txt`. 我运行了两个程序并比较了输出文件；输出是相同的。当我在一台大部分空闲的机器（MacBook Pro、2.3 GHz Intel Core i7、16 GiB 1333 MHz RAM、Mac OS X 10.7.5、GCC 4.7.1）上运行程序时，我得到了合理但不完全一致的时间：

```
Original   Modified
6.334s      6.367s
6.241s      6.231s
6.315s     10.778s
6.378s      6.320s
6.388s      6.293s
6.285s      6.268s
6.387s     10.954s
6.377s      6.227s
8.888s      6.347s
6.304s      6.286s
6.258s     10.302s
6.975s      6.260s
6.663s      6.847s
6.359s      6.313s
6.344s      6.335s
7.762s      6.533s
6.310s      9.418s
8.972s      6.370s
6.383s      6.357s 
```

然而，几乎所有的时间都花在了磁盘 I/O 上。我将磁盘 I/O 减少到最后一行数据，因此外部 I/O`for`循环变为：

```
for (int i = COLS - 1; i < COLS; i++) 
```

时间大大减少并且更加一致：

```
Original    Modified
0.168s      0.165s
0.145s      0.165s
0.165s      0.166s
0.164s      0.163s
0.151s      0.151s
0.148s      0.153s
0.152s      0.171s
0.165s      0.165s
0.173s      0.176s
0.171s      0.165s
0.151s      0.169s 
```

在我看来，从只写出可怕的表达式来简化代码是非常有益的。我当然宁愿维护那个程序而不是原来的程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-06T19:12:27.307

你在什么系统上运行？您是否可以访问某种调试器（gdb、Visual Studio 的调试器等）？

这将为我们提供有价值的信息，例如程序崩溃的代码行......此外，内存量可能令人望而却步。

此外，我可以建议您用命名定义替换数字限制吗？

像这样：

```
#define DIM1_SZ 1000
#define DIM2_SZ 1000000 
```

每当您希望参考数组维度限制时，请使用它们。这将有助于避免打字错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-06T19:15:55.223

使用链接到[efence的](http://linux.die.net/man/3/efence)[valgrind](http://linux.die.net/man/1/valgrind)运行您的程序。这将告诉您指针被取消引用的位置，并且如果您修复了它们告诉您的所有错误，则很可能会解决您的问题。

# data-oriented-design - 如何处理连续分配中的对象删除？

> ID：12762949
> 
> 赞同：5
> 
> 时间：2012-10-06T19:09:28.837
> 
> 标签：data-oriented-design

我最近发现了面向数据设计的好处。它看起来非常令人印象深刻。要点之一是按类型和访问对数据进行分组，而不是全部放在对象中，而是放在数组中，以防止缓存未命中并进行更好的处理。

所以在游戏中我们仍然有实例并且用户可以销毁它们中的任何一个（不仅仅是最后一个数组）。我不知道如何有效地处理数组中间的对象删除。

我有一个想法：`isAlive`有价值，但这会对条件数量造成相当大的影响，因为每个对象在处理，绘图，...

另一个想法是移动整个数组以填充必须删除的空间，但这会在删除时消耗大量资源。

人如何在国防部处理这个问题？

所以提出要求：

*   它必须是数组以减少 DOD 中的缓存未命中
*   它必须有快速的随机位置对象删除，最大 o(log n)
*   对象自创建以来就不能移动，因为它们可能在未知的地方被引用，因此会导致程序异常

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T14:48:08.043

这实际上很容易，不要使用直接引用。使用一个间接层，例如 ID。例如：

假设您有一个 FooManager 来管理您的所有 Foo “对象”（不是 OOP 意义上的对象，每个 Foo 属性的数组集合）。据我了解，您现在所做的只是返回一个索引。假设 Foo #42 是 Foo ，其数据位于所有数组的索引 42 处。现在你想删除 Foo #42，这会在你的数组中炸出一个洞。您可以移动所有其他数组条目，但 Foo #43 不再指向实际索引 43。

因此，我们添加了一个 ID 表，而不是返回索引，而是返回一个 ID。当您创建一个新的 Foo 时，您将其数据添加到数组中的第一个空闲索引（比如说 42）。然后生成一个新的未使用 ID（比如 1337）。现在您可以更新 ID 表（（散列）映射非常适合此操作）以说 ID 1337 指向索引 42。现在您可以将 ID 1337 返回给调用函数。（注意调用函数永远不会找到数据的实际存储位置，这是不相关的信息）

下次需要从另一段代码更新 Foo 时，将使用 ID。因此 FooManager 的 setBar 函数以 ID 1337 和新的 Bar 值作为参数调用。FooManager 在其 ID 表中查找 1337，发现它仍然位于索引 42 并使用新的 Bar 值更新 Bar 数组索引 42。

现在这是这个系统获得它的价值的地方，让我们删除 Foo 1337。FooManager 的 removeFoo 以 ID 1337 作为参数调用。它查找 1337，它位于索引 42。但是，与此同时，添加了 10 个新的 Foo。所以我们现在可以做的就是将索引 42 的值替换为 52 的值，有效地将 52 移动到 42。这在旧系统中会造成很大的问题，但是现在，我们只需要更新索引表即可。所以我们查找哪个 ID 指向 52（假设它是 1401）并将其更新为 42。下次有人尝试更新 ID 为 1401 的 Foo 时，它会在索引表中查找它并发现它位于索引 42 处。

所以我们将数据保存在连续内存中，删除只需要非常少的数据复制操作（Foo 的每个属性一个副本），而 FooManager 的“外部”代码甚至从未意识到发生了什么事。它甚至可以解决死引用问题。假设某些代码仍然具有已删除的 1337 ID（悬空引用，这很糟糕！），当它尝试访问/更改它时，FooManager 查找它，看到 1337 不存在（不再存在）并且可以生成一个很好的干净警告/error 和 callstack，它允许您直接识别哪些代码仍然有悬空引用！

只有一个缺点，那就是在 ID 表中的额外查找。现在哈希表可以非常快，但是每次修改 Foo 对象时它仍然是一个额外的操作。但是，在大多数情况下，来自管理器外部的访问远远少于管理器内部的访问。当你有一个 BulletManager 时，它会在每一帧更新每个项目符号，但访问项目符号以更改/请求某些内容以及创建/删除项目符号的调用不太可能发生。如果这是相反的情况，您可能应该更新您的数据结构以针对这种情况进行优化。再说一次，在这种情况下，数据在内存中的位置不再重要，因此您可以忍受数组中的“洞”，甚至使用完全不同的数据布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:31:19.253

它取决于约束和工作量，但一种方法是将已删除的元素与数组中的最后一个元素交换，然后从末尾删除已删除的元素 ( `pop_back`)。这假设数组的顺序不是特别重要。另一种方法是稀疏数组，它可能在内存预算固定的环境中工作。

编辑：如果您要维护指向数组的外部指针，则可以使用智能指针来管理它们，其基础地址在`shared_ptr::reset`移动数组元素时更新（）。你最终会得到 2 个相同长度的并行数组：

```
typedef std::vector<thing> thingVec;
thingVec things;

// smart pointers for each object
std::vector<boost::shared_ptr<thingVec::iterator>> references; 
```

在您的`createThing`函数中，您将返回`shared_ptr`带有自定义删除器的 a （一旦所有引用都已消失，它将自动执行数组更新）：

[http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/sp_techniques.html#static](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/sp_techniques.html#static)

智能指针可以指向具有多个字段的结构，这些字段最终存储在不同的数组中，只要自定义删除器知道在删除元素时要压缩哪些数组。

# jquery-mobile - jQuery Mobile 和谷歌分析

> ID：12762950
> 
> 赞同：0
> 
> 时间：2012-10-06T19:09:33.487
> 
> 标签：jquery-mobile, google-analytics

我看过很多解释如何将 Google 分析与您的 JQM 网站集成的帖子，但它似乎对我不起作用。我正在使用 JQM 1.2 版并且有一个包含以下代码的外部 javascript 文件：

> 变种 _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-12345678-9']);
> 
> (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore （气体）; }）（）;
> 
> $('[data-role=page]').live('pageshow', function (event, ui) { try { hash = location.hash; if (hash && hash.length > 1) { _gaq.push([ '_trackPageview', hash.substr(1)]); } else { _gaq.push(['_trackPageview']); } } catch(err) { } });

你能看出为什么这不起作用吗？我是否需要在每个页面上加载内联代码而不是将其放在外部文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:42:42.853

您必须触发“pageshow”事件的页面浏览量。

请参阅：[http ://roughlybrilliant.com/jquery_mobile_best_practices#7](http://roughlybrilliant.com/jquery_mobile_best_practices#7)

尝试这个：

```
var _gaq = _gaq || [];

    $(document).ready(function(e) {
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + 
              '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
}); 

    $('[data-role=page]').live('pageshow', function (event, ui) {
        try {
            _gaq.push(['_setAccount', 'YOUR_ANALYTICS_ID_GOES_HERE']);

            if ($.mobile.activePage.attr("data-url")) {
                _gaq.push(['_trackPageview', $.mobile.activePage.attr("data-url")]);
            } else {
                _gaq.push(['_trackPageview']);
            }
        } catch(err) {}

    }); 
```

如果将上述代码放在外部文件中，请确保代码将在正确的时间运行（在 JQM 和页面加载之后）...最好将此代码附加到主 html 文件的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T14:07:31.117

```
var _gaq = _gaq || [];

    $(document).ready(function(e) {
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + 
                  '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    }); 

    $('[data-role=page]').live('pageshow', function (event, ui) {
        try {
            _gaq.push(['_setAccount', 'YOUR_ANALYTICS_ID_GOES_HERE']);

            if ($.mobile.activePage.attr("data-url")) {
                _gaq.push(['_trackPageview', $.mobile.activePage.attr("data-url")]);
            } else {
                _gaq.push(['_trackPageview']);
            }
        } catch(err) {}

    }); 
```

警告：**live**方法重命名为**on**

可能是注入（php，jsp）页面的单独文件

**并且**您必须在关闭数据角色页面的 div 之前注入它

您可以查看 jquery mobile 最佳实践和更具体的请参阅：[http ://roughlybrilliant.com/jquery_mobile_best_practices#7](http://roughlybrilliant.com/jquery_mobile_best_practices#7)

# android - ExpandableListView 中的自动滚动

> ID：12762958
> 
> 赞同：18
> 
> 时间：2012-10-06T19:10:09.190
> 
> 标签：android, scroll, expandablelistview

我希望我`ExpandableListView`在用户展开组时自动滚动，以便展开的组标题位于屏幕顶部。我试过`smoothScrollToPosition`了，但这只是确保扩展组在屏幕上的某处可见。我想显式滚动它，使展开的组位于顶部，就像在这个例子中一样：

```
Before expanding Group 3:                After expanding Group 3:

+=================+                      +=================+
| Group 1         |                      | Group 3         |
+-----------------+                      +-----------------+
| Group 2         |                      |   Grp 3 Child 1 |
+-----------------+                      +-----------------+
| Group 3         |                      |   Grp 3 Child 2 |
+-----------------+                      +-----------------+
| Group 4         |                      | Group 4         |
+=================+                      +=================+ 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-06T19:25:55.603

```
ListView.setSelection(position) 
```

这将滚动到所选项目，当您单击组项目时调用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T12:04:56.983

以下代码是对我有用的解决方案

```
public boolean onGroupClick(ExpandableListView parent, View v,int groupPosition, long id) {
    // TODO Auto-generated method stub
    //mExpandableList.setSelectionFromTop(groupPosition, 0);

Boolean shouldExpand = (!mExpandableList.isGroupExpanded(groupPosition));        
    mExpandableList.collapseGroup(lastClickedPosition);

    if (shouldExpand){
        //generateExpandableList();
        mExpandableList.expandGroup(groupPosition);
        mExpandableList.setSelectionFromTop(groupPosition, 0);
    }                
    lastClickedPosition = groupPosition;
    return true;        
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-17T18:33:10.750

这对我有用。把它放在你的适配器中：

```
public void onGroupExpanded(final int groupPosition) {
    super.onGroupExpanded(groupPosition);

    listView.setSelectedGroup(groupPosition);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-06T20:18:33.980

将此属性添加`android:transcriptMode="disabled"`到 xml 中的 ExpandibleListView 标记。这应该有效。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-23T06:25:05.220

这个对我有用

```
expandList.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener() {
        @Override
        public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id) {

            if (!parent.isGroupExpanded(groupPosition)) {
                parent.expandGroup(groupPosition);
            } else {
                parent.collapseGroup(groupPosition);
            }
            parent.setSelectedGroup(groupPosition);

            return true;
        }
    }); 
```

由于滚动的主要工作部分是

```
parent.setSelectedGroup(groupPosition); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T16:20:28.997

设置`android:transcriptMode="disabled"`为我`ExpandibleListView`也为我工作。将参数设置为“正常”时，没有一种方法有效（`setSelectedGroup`、、`setSelectionFromTop`等）。

只能`setSmoothScroll`工作，但不喜欢这种效果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-24T12:19:50.427

下面的代码对我有用。希望它会有所帮助。在 onGroupExpand 中实现 OnGroupExpandListener 使用下面的代码

```
public void onGroupExpand(final int groupPosition) {
super.onGroupExpand(groupPosition);

expandableListView.post(new Runnable() {

    @Override
    public void run() {
        expandableListView.setSelection(groupPosition);
        if(expandableListView.getChildAt(groupPosition)!=null)
        expandableListView.requestChildRectangleOnScreen(expandableListView.getChildAt(groupPosition),
                new Rect(0, 0, expandableListView.getChildAt(groupPosition).getRight(), expandableListView.getChildAt(groupPosition).getHeight()), false);
    }
}); 
```

}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-27T14:37:21.420

`setSelectedGroup`工作，但如果你想有一个平滑的滚动效果，使用`smoothScrollToPositionFromTop`如下：

```
 expandableListView.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener() {
        @Override
        public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id) {
            parent.smoothScrollToPositionFromTop(groupPosition,0);
            if (expandableListView.isGroupExpanded(groupPosition))
                expandableListView.collapseGroupWithAnimation(groupPosition);
            else expandableListView.expandGroupWithAnimation(groupPosition);
            return true;
        }
    }); 
```

# javascript - 在 underscore.js 模板中转义 <%- %> 标记

> ID：12762961
> 
> 赞同：4
> 
> 时间：2012-10-06T19:10:20.427
> 
> 标签：javascript, underscore.js

我正在使用 underscore.js 进行模板化。在我的项目中，我在服务器（使用 Node.js）上使用它来填充几个值。我还有一个嵌入在页面标签中的模板，我想使用通过 AJAX 下载的数据多次填写该模板。

基本上，在标签中，我有这样的东西：

```
<script>
    var UserID = '<%= userID %>';
</script> 
```

我想在页面发出之前填写。

然后，我有这样的事情：

```
<script type='template' id='my_template'>
    <li><%- item %></li>
</script> 
```

我想保留该表单以供我页面上的脚本使用。

当然，您现在可能已经发现，当我在服务器上渲染页面时，它会抱怨`item`未定义。有没有办法逃避这些标签，所以下划线会忽略它并按原样发送出去？我知道我可以为其中一个定义不同的标记分隔符，但使用一致的格式似乎更简单、更清晰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:57:38.357

您可以使用`_.template`设置：

```
_.template( templateString, data, {
    escape: false, // use a false evaluated value
    evaluate: /(.)^/ // or a not matching regex
}); 
```

另请参阅[anonated source code 中的相关部分](http://underscorejs.org/docs/underscore.html#section-165)

# python - 卡在列表值的逻辑填充字典中

> ID：12762968
> 
> 赞同：0
> 
> 时间：2012-10-06T19:10:53.377
> 
> 标签：python, list, dictionary

我收到这样的清单

```
selection= [u'pSphereShape1', u'mesh', u'pSphereShape2', u'mesh', u'nurbsCircleShape1', u'nurbsCurve'] 
```

所以myDic（选择）

```
def myDic(self,selObjects):
    print "Recieved ",selObjects
    print "Length ", len(selObjects)
    self.objDic={}
    for index,each in enumerate(reversed(selObjects)):

        print index,each
        if index%2==0:
            key=each
        elif index % 2!=0:
            value=each
            self.objDic[key]=value
            #self.objDic.update({key:value})
        print "Yo",self.objDic, len(self.objDic) 
```

这确实添加了值，但是在第一个条目之后，下一个条目会覆盖现有的第一个条目......并且字典中的总项目只有一个，那就是第一个条目......

我应该如何填充字典，以便像 pSphereShape1 或 pSphereShape1 这样的每个形状节点成为键，而网格或网格分别成为它的值......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:15:45.030

self.objdict 的位置不合适，这样做可能会起作用：

```
def myDic(self,selObjects):
    print "Recieved ",selObjects
    print "Length ", len(selObjects)
    self.objDic={} # dict mus be over here or else it is overwrited to empty in every loop
    for index,each in enumerate(reversed(selObjects)):
        print index,each
        if index%2==0:
            key=each
        elif index % 2!=0:
            value=each
            self.objDic[key]=value
            #self.objDic.update({key:value})
        print "Yo",self.objDic, len(self.objDic) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:36:55.870

主要原因是您`self.objDict`在每一步都重新定义，这会删除所有以前的值。作为第一步，尝试将该定义移到`for`循环上方。

不确定您使用的是 Python 上的哪个版本，但您也可以使用理解 (>= 2.7) 填充字典：

```
pairs = zip(selObjects[0::2], selObjects[1::2])
self.objDict = {k: v for pair in pairs} 
```

抱歉，如果这不起作用 - 我目前无法对其进行测试:) 这个想法是创建一个包含您的字典的键和值的元组列表，然后从中创建字典。

在 Python < 2.6 中，这应该可以工作（`pairs`从上面使用）：

```
self.objDict = dict((k, v) for pair in pairs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T19:34:05.427

好吧，我自己修好了，实际上当我用模数运算键检查时，应该是值所在的位置

```
def myDic(self,selObjects):
        print "Recieved ",selObjects
        print "Length ", len(selObjects)
        #self.objDic={}
        for index,each in enumerate(reversed(selObjects)):
            ##print index,each
            if index%2==0:
                value=each
            elif index % 2!=0:
                key=each
                self.objDic[key]=value
                #self.objDic.update({key:value})
        print self.objDic, len(self.objDic) 
```

上面的代码从列表中生成键值对...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T19:40:23.853

用这个; 有用。

```
def funct(selObjects):
    print "Recieved ",selObjects
    print "Length ", len(selObjects)
    self.objDic={}

    for index,each in enumerate((selObjects)):
        print index,each
        if index%2==0:
            key=each
        elif index % 2!=0:
            value=each
            objDic[key]=value
        #self.objDic.update({key:value})
        print "Yo",objDic, len(objDic) 
```

# scala - Play 应用程序中的测试资源目录

> ID：12762969
> 
> 赞同：27
> 
> 时间：2012-10-06T19:11:28.303
> 
> 标签：scala, playframework, playframework-2.0, sbt

我需要一些资源（文本文件）在 Scala Play 2.0 应用程序中进行测试。我可以把这些文件放在哪里？

在一个 Maven 应用程序中，我会将它们放入`src/test/resources`中，但我在 Play 文档中找不到任何关于相等目录的内容。

我可以将它们放在`conf`目录中，但只有在测试应用程序时才需要它们。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-06T20:50:27.977

称呼

```
play "show test:resource-directory" 
```

在控制台中，它会在测试模式下向您显示资源目录的绝对路径。它将在“测试/资源”中。

"show" 是一个 sbt 命令（或任务），使您能够检索设置的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-25T07:31:06.363

提升 SathOkh 的评论以提高知名度。

使用 sbt 1.3.13：

```
$ sbt "show test:resourceDirectory"
...
[info] /path/to/project/test/resources 
```

# python - 处理 unicode

> ID：12762972
> 
> 赞同：0
> 
> 时间：2012-10-06T19:12:06.133
> 
> 标签：python, mediawiki-api

我为 runescape wiki 开发了[mwhair](http://github.com/hairr/mwhair)。不过，我一直遇到 unicode 的问题，只要有，让我们说一个看起来像这样的页面：

```
This is a page, that has words
To go here to there follow these directions:
Backwards « Forwards
That is all 
```

如果只是这样做`mwhair.edit('Page above')`，我将收到一个 unicode 错误。

我尝试通过以下方式解决此问题：

```
text = mwhair.edit('Page above').encode('ascii','xmlcharrefreplace')
mwhair.save('Page above',text=text) 
```

这似乎是一个解决方案，因为不会出现错误，但它会更改页面的某些内容，例如将行更改为：

```
Backwards &#171; Forwards 
```

这不会影响任何链接、图片或实际页面输出，但会使机器人看起来好像有错误。有什么我搞砸或不知道的吗？（我使用的是 python 2.7.3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:16:13.937

在[第 230 行](https://github.com/hairr/mwhair/blob/68b91cb048a1633455c76434488e3589e265019e/mwhair.py#L230)，你有这个：

```
'text':text, 
```

`text`那时是 Unicode，所以你可能想在那时对其进行编码。
我假设 MediaWiki 想要 UTF-8：

```
'text': text.encode('utf-8'), 
```

# c# - 如何知道两个会话是否在 ASP.NET C# 中的浏览器游戏上单击了按钮

> ID：12762974
> 
> 赞同：1
> 
> 时间：2012-10-06T19:12:16.153
> 
> 标签：c#, asp.net, session, browser, synchronization

我的浏览器游戏有两个人在不同浏览器上玩的问题。游戏状态由使用 Game Class 的 Session 变量和玩家点击的按钮控制。游戏结束时，玩家有 3 种选择，要么重新匹配同一个玩家，要么寻找另一个玩家，要么完全断开游戏。如果玩家断开连接，游戏可以彻底销毁游戏对象并恢复所有 Session 变量。

我遇到的问题是同步玩家选择的其他两个按钮。如果两个玩家都选择了相同的按钮，那么游戏将再次进行。但是，如果一名球员想要复赛而另一名球员想再次比赛，那么意见不合的球员必须都找到新球员。

我使用了两个 Session 变量，**PlayWithSamePlayer**意味着他们想要与同一个玩家重赛。我还使用**ContinueChoicesMade**来确保两个玩家都选择相同的选项。如果**ContinueChoicesMade**为假，则表示两个玩家不同意，并被放回我的游戏管理器以搜索其他玩家。*我可以弄清楚如何在我的 Game 类中使用我的两个玩家同步方法，以便可以听到两个玩家的动作*。目前，如果我运行游戏，当它到达我的方法时，它会以 NullException 的形式出现。

我希望在游戏结束时，一个玩家选择一个按钮，浏览器等待另一个浏览器点击一个按钮，然后检查他们按下的是否相同，然后是否相同；游戏继续进行，如果他们点击的内容不同；游戏继续进行。在玩家点击重新匹配或找到新玩家后，同步 Session 变量的最佳方法是什么。下面是我在处理两个玩家的游戏类中的方法，以及在我的 aspx.cs 页面上调用的方法。

```
((Game)Session["Game"]).RoundOverSynchronizing(Session);//when should I call this out? this is not apart of the game class.

    public void RoundOverSynchronizing(HttpSessionState player)
{

    if (((bool)player1["PlayWithSamePlayer"]) == true
    && ((bool)player2["PlayWithSamePlayer"]) == true)
    {
        player1["ContinueChoicesMade"] = true;
        player2["ContinueChoicesMade"] = true;
    }
    else if (((bool)player1["PlayWithSamePlayer"]) == false
  && ((bool)player2["PlayWithSamePlayer"]) == false)
    {
        player1["ContinueChoicesMade"] = true;
        player2["ContinueChoicesMade"] = true;
    }
    else
    {
        player1["ContinueChoicesMade"] = false;
        player2["ContinueChoicesMade"] = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:31:46.190

我不认为在这里使用 Session 是一个好主意。（而且我认为您不能/不应该从另一个线程读取会话的数据。也许我错了）
我认为您应该将这些数据存储在数据库（SQL/NoSQL）中，至少有两种实体：

*   一个带有 2 个 SessionId 的匹配记录
*   一个有玩家的 SessionId 和他们的选择

因此，您可以存储他们的选择并检查他们是否会参加复赛。
假设您有某种投票或彗星解决方案，如果重赛条件成功，则会创建一个桌子/游戏室，如果玩家拒绝，则会显示一条消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:38:39.730

如果要访问共享的数据，则需要使用数据存储（如另一个答案中提到的 SQL），或者可以将信息存储在应用程序缓存中。在这种情况下，您要做的是创建一个 Game 类来管理整个游戏，然后为各个用户添加/删除会话。

# java - 如何使 Google Appengine 任务可重复？

> ID：12762980
> 
> 赞同：1
> 
> 时间：2012-10-06T19:13:20.037
> 
> 标签：java, google-app-engine

这是一个家庭作业。通常我会使用 cron 来做这样的事情，但是老师希望我们创建一个任务队列，定期轮询服务器以获取信息。

到目前为止，我有这样的事情：

```
Queue queue = QueueFactory.getDefaultQueue();
queue.add(
    withUrl("/MyPage").
    method(Method.GET).
    param("user", viewModel.getUserId())); 
```

但是这只运行一次。我怎样才能让它无限期地重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:33:21.897

您可以使任务中运行的代码将另一个任务添加到队列中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:54:46.853

你可以用一种不太优雅的方式来做到这一点。如果您的任务因 RuntimeException 而失败，它将自动重新启动。您可以使用 config 来管理您希望它重复的频率。检查[https://developers.google.com/appengine/docs/java/config/queue](https://developers.google.com/appengine/docs/java/config/queue)了解详情。重要的是不要使用默认队列，因为您将需要其他参数。

这不是安排任务的自然方式，但它会为您工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T14:23:21.043

可以使用 DeferredTask 重新启动任务本身

完成任务时调用 deferSubmitTask()

```
private static class DeferredSubmitTask implements DeferredTask
{
    @Override
    public void run()
    {
        try
        {
            QueueFactory.getQueue("submitqueue").add(TaskOptions.Builder.withUrl("/tasks/submitworker").taskName("submit"));
        }
        catch (com.google.appengine.api.taskqueue.TaskAlreadyExistsException ex)
        {
            LOG.log(Level.INFO, "submit task launch failed, it is still running...");
        }
    }
}

public static void deferSubmitTask(long countdownMillis)
{
    QueueFactory.getDefaultQueue().add(TaskOptions.Builder.withPayload(new DeferredSubmitTask()).countdownMillis(countdownMillis));
} 
```

# c# - SerialPort.WriteLine(string) 有一些无效参数，无法将参数转换为字符串

> ID：12762983
> 
> 赞同：0
> 
> 时间：2012-10-06T19:13:42.157
> 
> 标签：c#, string, serial-port, arguments

我在同一行使用下面的代码得到以下两个错误`port.WriteLine(gcode);`，我是否需要为列表的每个项目创建一个 for 循环？

> 'System.IO.Ports.SerialPort.WriteLine(string)' 的最佳重载方法匹配有一些无效参数
> 
> 参数 1：无法从 'System.Collections.Generic.List' 转换为 'string'

代码：

```
//Fields
SerialPort port;
string myReceivedLines;

protected override void SolveInstance(IGH_DataAccess DA)
{
    List<string> gcode = new List<string>();
    DA.GetDataList(0, gcode);

    if (!DA.GetDataList(0, gcode)) 
        return;

    port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One); 
    port.DtrEnable = true;  
    port.Open();            
    port.DataReceived += this.portdatareceived;

    if (gcode == null)
    {
        AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, "Specify a valid GCode");
        return;
    }

    if (connecttodevice == true)
    {
        DA.SetDataList(0, myReceivedLines);
    }

    if (sendtoprint == true)
    {
        port.WriteLine(gcode);
    }
}

private void portdatareceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
    myReceivedLines = port.ReadExisting();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:25:36.187

```
foreach(string s in gcode)
{
    port.WriteLine(s);
} 
```

SerialPort 知道如何写字符串，但没有 SerialPort 方法接受`List<string>`。

编辑。尝试这个：

```
StringBuilder sb = new StringBuilder();
foreach(string s in gcode)
{
    sb.Append(s)
} 
port.WriteLine(sb.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:26:31.953

```
if (sendtoprint == true)
{
   for (int i = 0; i < gcode.Count(); i++)
   {
      port.WriteLine(gcode[i]);
   }
} 
```

你可以按你说的解决

# arrays - 就地交错字符和数字数组的算法

> ID：12762984
> 
> 赞同：5
> 
> 时间：2012-10-06T19:13:51.940
> 
> 标签：arrays, algorithm

有一个像`[a,b,2,c,3,d,4,1]`. 它必须被修改成一个数组，比如`[a,2,b,3,c,4,d,1]`就地。

也就是说，从散布字母和数字的原始数组中，修改后的版本应该包含相同的元素，使得数组具有交替的字母和数字，同时保留它们原始的相对顺序。

`O(N)`它可以很容易地完成，通过使用两个指针，并将修改后的版本输出到一个新的数组中，但它必须在时间和`O(1)`空间上就地完成。有没有可能，如果有，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:41:35.213

O(N) 就地算法是可能的。您可以从将所有字母排序到数组的开头，将所有数字排序到末尾。然后就地**转置**一个 2x( **N** /2) 矩阵，将数组前半部分的所有元素放置到偶数位置，其他元素放置到奇数位置。[这个问题](https://stackoverflow.com/q/12338654/1009831)解释了如何进行这种转置（实际上，那里描述的算法应该反向应用）。

最棘手的部分是排序。它应该既稳定又就地。

在 O( **N** ² ) 时间内排序是微不足道的。插入排序或冒泡排序会做到这一点。

O( **N** log **N** ) 时间更复杂。使用稳定的就地合并排序，如[this answer](https://stackoverflow.com/a/2571104/1009831)中所述。这个答案提供了一对链接，描述了可以用来组成 O( **N** ) 算法的想法，该算法比稳定的就地合并排序更简单，但仍然相当复杂，所以我只给出它的草图。

* * *

将阵列分成两个区域。其中之一将用于临时存储算法其他部分所需的一些数据（由于该区域仍应存储数组元素，因此任何附加信息都按这些元素的顺序编码）。其他区域被解释为一个方阵，其中元素应该被排序，首先是行，然后是列。在对两个区域进行排序后，对它们中的每一个都应用*转置*算法以将字符和数字放在适当的位置。

* * *

## 1\. 临时存储部分数组

**数组的大多数元素都组织为大小为K**的方阵。**K**是最大的偶数，因此 2 * 8 * **K** + **K** ²不大于**N**。**临时存储**的大小M = **N** - **K** ²，大约等于 2*8*sqrt( **N** )。

要准备**M**个元素用于*临时存储*，请扫描数组的前**M**个元素并确定在此范围内代表最少的元素类型。例如，让它成为“数字”。将数字打包成一个大小为**M** /2 的组。为此，迭代地交换字母和数字块，如下例所示：

```
ddaaaddddadddaaaaad
aaaDDddddadddaaaaad
aaaaDDDDDDdddaaaaad
aaaaaaaaaDDDDDDDDDd 
```

当单组至少收集到**M /2 位数时停止。****块交换**过程（也可以被称为就地子阵列旋转）可以作为[这个答案](https://stackoverflow.com/a/12378132/1009831)的第一个算法或者如下实现：

1.  反转数字块
2.  反转数字块
3.  将两个块反转在一起

例子：

```
123abcd
321abcd
321dcba
abcd123 
```

将数字打包成一组大小为**M** /2 需要移动最多 ( **M** /2) ^(2 个)数字和最多**N** /2 个字母，因此可以在 O( **N** ) 时间内完成。

准确地说，是 O( **N** log ² **U** ) 时间，对 ASCII 字符进行排序是可以的，但是如果我们需要对其他类型的值进行排序，则太大了（**U**是值集的大小）。为了将运行时间提高到 O( **N** * log **U** * log log **U** )，从大小为 2 * **K**的较小*临时存储开始，使用它对 log* **U**范围进行排序，然后将这些范围与 log 中的*块交换*过程成对合并记录**U**步骤以获得适当大小的*临时存储*。

 ********在这一点上，我们有**M** /2 大小的数字块，前面是一个字母块（可能更大）。使用*块交换*过程使两个大小相等的块**M** /2。

为了在*临时存储*中存储数据位，我们可以交换位置 i 和 i + **M** /2 的元素。如果位置 i 存储一个字母，位置 i + **M** /2 存储一个数字，我们有零位。如果数字在前，我们有非零位。8 个连续位编码单个字符。*这意味着，我们最多可以在临时存储*中记住**K 个**字符。

 **在临时存储*中存储位的其他替代方法是它的“数字”一半。每个数字可以存储为“0”..“9”（表示位 0）或“a”..“j”（表示位 1）。如果可能的字母数量至少是数字数量的 3 倍，我们可以在每个值中存储 2 位。为了从每个值中挤出 4 位，我们可以将每 2 位打包成一个字节；这给出了**M** /4 个空闲字节；所以**M**可以减少到 4 * **K**。

![在此处输入图像描述](../Images/4dcc3520ec311665eb45b143e3c941e3.png)

## 2.对矩阵的行进行排序

从这一点开始，我们应该重新排列阵列的主要区域，使用*临时存储*作为附加内存。**确定，在大小为 2 * K**的子数组中，哪种元素的表示最少。例如，让它成为“数字”。顺序扫描数组，将数字移动到*临时存储*区，并将字母打包成连续的序列。当收集到**K**个数字时，我们有 L 个字母顺序并且 L >= **K**。将最后一个 L% **K字母移动到未占用区域的末尾，并用***临时存储*中的数字填充剩余的未占用区域。然后继续顺序扫描阵列。

此过程仅将数组的每个元素复制一次或两次，因此需要 O( **N** ) 时间才能完成。最后，所有字母/数字块都对齐，以便矩阵的每一行都包含一种元素。

![在此处输入图像描述](../Images/4aea60b1e6cdc544212cbd5dd1bca1eb.png)

* * *

## 3\. 对矩阵的列进行排序

这是先前程序的简化版本。对于每个矩阵列，将数字移动到*临时存储*并将字母打包成连续的行，然后将数字从*临时存储*复制到未占用的行。

这个过程也需要 O( **N** ) 时间来完成。最后，数组的主要区域完全排序。*现在对临时存储*进行排序（将零写入其每个“位”）。

![在此处输入图像描述](../Images/c88566544c527478378d206d176b35f6.png)

## 4\. 转置数组

剩下的唯一步骤是*转置**临时存储*和数组的主要区域，以便字符和数字位于适当的位置。（请注意，不是**K** x **K**矩阵，而是两个 2 x J 矩阵，由两个子阵列组成，用算法转置，在链接答案之一中提到）。

这个过程以及整个算法需要 O( **N** ) 时间。

![在此处输入图像描述](../Images/47e0f60799118add38b28c92c7e33da3.png)

* * *

**第二种算法。**

由于 ASCII 只包含 10 个数字和 52 个字母，我们可以通过以下方式显着简化算法：

1.  使用 BASE64 编码打包最后 1/3 的值，这会提供**N** /12 字节的可用空间（用作**临时存储**）。
2.  *使用该空间作为临时存储*对前 1/3 的值进行排序：确定在大小为**N** /6的子数组中代表最少的是哪种元素；例如，让它成为“数字”；顺序扫描数组，将数字移动到*临时存储*区，并将字母打包成连续的序列；*然后将临时存储*复制到未占用的空间；对接下来的**N** /6 个元素重复此操作。
3.  解压缩最后 1/3 的值，打包前 1/3 的值。
4.  对最后 2/3 的值进行排序（对**N** /6 个元素进行 4 次排序）。
5.  解压前 1/3 的值。
6.  此时我们有 12 组字符（大小可变）。使用*块交换*程序在它们之间移动这些组的片段，并按照正确的顺序（字母、数字、...）制作 12 个大小相等的组。
7.  *转*置 6 对字符组。实际上，这里可以使用简单的转置算法。将循环引导算法应用于所有未标记的元素（第 7 位为零），当元素移动时，将其第 7 位设置为 1。完成后，清除所有标记。

* * *

**第三算法。**

解决此问题的其他方法是将所有字母排序到数组的开头，将所有数字排序到末尾，并使用（一些修改）就地稳定基数排序，如[本 pdf](http://www.cs.rutgers.edu/~muthu/soradix.pdf)中所述。排序后，应用前面提到的*转置算法。*

这里最棘手的是这个基数排序算法的压缩部分。我们不能从每个值中保存一位。相反，我们应该使用算术编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:22:35.367

我相信这个问题可以看作是两个序列的稳定就地合并。鉴于此，它*应该可以*在 O(n) 时间和 O(1) 空间内求解，因为可以在 O(n) 时间内完成等大小数组的稳定就地合并（例如，参见[http:// comjnl.oxfordjournals.org/content/38/8/681.abstract](http://comjnl.oxfordjournals.org/content/38/8/681.abstract)）。

但是，执行此操作的算法完全不是简单的实现（并且可以为 CS 本科生制作一个体面的小型研究项目）。

在任何情况下，在 O(n log n) 时间和 O(1) 时间内对数组进行稳定排序绝对是可能的（参见，例如[http://www.springerlink.com/content/d7348168624070v7/?MUD=MP](http://www.springerlink.com/content/d7348168624070v7/?MUD=MP)），其中为算法的复杂性设置了一个上限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T19:53:56.253

这是一个 O(N²) 的实现

```
def is_digit(s):
    if isinstance(s, str):
        return False
    return True

def interleave(items):
    if len(items) < 2:
        return

    loc = 1
    max_loc = len(items)
    prev_is_digit = is_digit(items[0])

    while loc < max_loc:
        if is_digit(items[loc]) == prev_is_digit:
            # proceed through the list looking for the next item that has the 
            # opposite type
            for i in xrange(loc + 1, max_loc + 1):
                if is_digit(items[i]) != prev_is_digit:
                    # found the opposite type
                    val = items[i]

                    # once the item is found, shift everything up to the item
                    # over by one
                    for j in xrange(i, loc, -1):
                        items[j] = items[j - 1]

                    # move the item to It's new place
                    items[loc] = val
                    break
            loc += 2
        else:
            # invert the type we are looking for
            prev_is_digit = not prev_is_digit
            loc += 1

items = ["a","b",2,"c",3,"d",4,1]
interleave(items)
print items 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T20:53:19.347

另一个更简单的就地 O(n2) 解决方案如下：1）使用 2 个 ptrs：src 和 dest 2）你想找到第一个非数字字符并将其放在 dest 位置 3）如果 dest 处的字符已经是非数字，然后查找第一个数字并将其与 dest+1 loc 交换

```
public static void permute_alt(char arr[]) {
    int src=0, dest=0;

    while (dest < arr.length) {
        if (isChar(arr[dest])) {   //We have a non-digit at dest idx .Now lets look for
                                       // digit and put it in dest+1 place
            dest++;
            src=dest;
            while (!Character.isDigit(arr[src])) {
                src++;
            }
            swap(arr, src, dest);
            dest++;
        } else {
            src=dest;
            while (!isChar(arr[src])) {
                src++;
            }
            swap(arr, src, dest);
            dest++;

        }
    }

} 
```

src ptr 重置为 dest+1 或 dest 以进行下一次迭代。*********

# jquery - jQuery动画背景

> ID：12762987
> 
> 赞同：0
> 
> 时间：2012-10-06T19:14:04.600
> 
> 标签：jquery, css, jquery-animate

我在悬停主 div 时使用 jquery 更改子 div 的背景。

```
$('#bottom-a .module.responsive').hover(function () {
    $('#bottom-a .responsive .mod-icon').css({
        "background-position": "left bottom"
    });
}, function () {
    $('#bottom-a .responsive .mod-icon').css({
        "background-position": "left top"
    });
}); 
```

如何在此脚本中添加动画？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:38:22.863

您可以简单地使用 css 来完成，而无需修改您的代码：

```
#bottom-a .responsive .mod-icon {
    background-image:url('imgurl.jpg');
    transition: background 2s;
    -moz-transition: background  2s; /* Firefox 4 */
    -webkit-transition: background 2s; /* Safari and Chrome */
    -o-transition: background 2s; /* Opera */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T19:22:16.790

```
$('#bottom-a .module.responsive').hover(function () {
    $('#bottom-a .responsive .mod-icon').animate({
        "background-position": "left bottom"
    },1000);
}, function () {
    $('#bottom-a .responsive .mod-icon').animate({
        "background-position": "left top"
    },1000);
}); 
```

# bapi - 不一致的测试仪器是什么意思？

> ID：12762994
> 
> 赞同：1
> 
> 时间：2012-10-06T19:14:45.060
> 
> 标签：bapi

我正在写一些 Abap 单元测试。这是一个简单的日期比较测试。但是我收到有关不一致的测试仪器的错误。

我想可能是因为我在尝试测试的实际类方法中调用了 SAP 函数模块 DATE_TO_DAY。但是，当我注释掉所有代码并只留下空的测试方法时，我仍然得到错误。

我得到两个错误：1）不一致的测试仪器（测试类 LCL_COBRA_ELIG_TEST）2）没有执行，因为实际风险太高。

这是我的测试课：

```
 CLASS lcl_cobra_elig_test DEFINITION FINAL FOR TESTING
                               "#AU risk_level harmless
                               "#AU duration short
                              .
    PRIVATE SECTION.
      CONSTANTS: from_date_invalid(20) TYPE c VALUE 'From-Date incorrect.',
                 to_date_invalid(20) TYPE c VALUE 'To-Date incorrect.'.

    DATA: subject TYPE REF TO lcl_report_range,
          date TYPE datum.

    METHODS:
      setup,
      test_from_date_when_mon FOR TESTING,
      teardown.
    Endclass.

    CLASS lcl_cobra_elig_test IMPLEMENTATION.
      METHOD  setup.
      ENDMETHOD.                    "teardown
      METHOD  teardown.
        CLEAR subject.
      ENDMETHOD.                    "teardown
      METHOD test_from_date_when_mon.
*       CREATE OBJECT subject
*         EXPORTING
*           im_date = '20121001'.
*       date = subject->get_from_date( ).
*       CALL METHOD cl_aunit_assert=>assert_equals
*         EXPORTING
*           act = date
*           exp = '20120929'
*           msg = from_date_invalid.
     ENDMETHOD.                    "test_from_date_when_mon

   ENDCLASS. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T03:26:06.617

我猜测了一下，认为属性“Risk_Level”和“Duration”可能区分大小写，因为它们在技术上是注释。这解决了我的问题——将案例修复为#AU Risk_Level Harmless 和#AU Duration Short。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:26:02.473

看看[文档](http://help.sap.com/saphelp_nw70ehp2/helpdata/en/49/25667929ac16b7e10000000a42189d/frameset.htm)：

> 在版本 < 7.00 增强包 2 的系统中，您可以使用伪注释指定本地测试类的测试属性。`CLASS ... FOR TESTING`在语句之后添加伪注释。伪注释具有以下语法：

```
SYNTAX CLASS ... FOR TESTING "#AU
Risk_Level Critical|Dangerous|Harmless "#AU Duration  
Short|Medium|Long 
```

> 您可以为每个程序行指定一个伪注释。要为一个测试类指定两个测试属性，您必须将 CLASS 语句分散到至少两行。**该字段区分大小写。**

修复案例问题应该可以解决仪器问题。功能模块对此没有任何影响。

至于风险级别问题，也可以通过案例问题解决。（文档没有说明默认风险级别是什么。）如果不是，请重新阅读风险级别的[定义](http://help.sap.com/saphelp_nw70ehp2/helpdata/en/49/25667929ac16b7e10000000a42189d/frameset.htm)，设置正确的风险级别，然后使用[SAUNIT_CLIENT_SETUP](http://help.sap.com/saphelp_nw70ehp2/helpdata/en/dc/bbcaa38b374362b627b20044c0804a/frameset.htm)允许执行测试。

# django - 如何在 Django 中使用 Font-awesome 的 Star 评级？

> ID：12762995
> 
> 赞同：25
> 
> 时间：2012-10-06T19:14:51.270
> 
> 标签：django, twitter-bootstrap, font-awesome

[Fontawesome](http://fortawesome.github.com/Font-Awesome/)有一个很棒的星级 CSS 扩展，看起来真的很棒。

然而，点击任何 span 元素并不会真正做任何事情。我不知道如何将它与我的数据库模型挂钩。假设我在 Django 中有一个 0-5 的整数字段。如何根据用户在模板中的选择设置值？

![在此处输入图像描述](../Images/83a76e7307fcbd798a1648dfaeb6b4ce.png)

```
<span class="rating">
  <span class="star"></span>
  <span class="star"></span>
  <span class="star"></span>
  <span class="star"></span>
  <span class="star"></span>
</span> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-03T13:02:04.837

我最终使用了[Raty](https://github.com/wbotelhos/raty)。如果您正在寻找一个简单而干净的解决方案，我发现这是最简单的。

```
$('#star').raty('score');                   // Get the current score. 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-12-22T02:27:35.500

我看过这篇文章，但不想使用超出我需要的插件。所以，我把这个放在一起做一个我正在做的小项目。你不需要引导程序来使用它。

HTML

```
<div class="star-rating"> 
  <span class="fa fa-star-o" data-rating="1"></span>
  <span class="fa fa-star-o" data-rating="2"></span>
  <span class="fa fa-star-o" data-rating="3"></span>
  <span class="fa fa-star-o" data-rating="4"></span>
  <span class="fa fa-star-o" data-rating="5"></span>
  <input type="hidden" name="whatever" class="rating-value" value="3">
</div> 
```

CSS

```
.star-rating {
  line-height:32px;
  font-size:1.25em;
  cursor: pointer;
} 
```

咖啡脚本

```
$star_rating = $('.star-rating .fa')

SetRatingStar = ->
  $star_rating.each ->
    if parseInt($star_rating.siblings('input.rating-value').val()) >= parseInt($(this).data('rating'))
      $(this).removeClass('fa-star-o').addClass('fa-star')
    else
      $(this).removeClass('fa-star').addClass('fa-star-o')

$star_rating.on 'click', ->
    $star_rating.siblings('input.rating-value').val $(this).data('rating')
    SetRatingStar()

SetRatingStar() 
```

Javascript：

```
var $star_rating = $('.star-rating .fa');

var SetRatingStar = function() {
  return $star_rating.each(function() {
    if (parseInt($star_rating.siblings('input.rating-value').val()) >= parseInt($(this).data('rating'))) {
      return $(this).removeClass('fa-star-o').addClass('fa-star');
    } else {
      return $(this).removeClass('fa-star').addClass('fa-star-o');
    }
  });
};

$star_rating.on('click', function() {
  $star_rating.siblings('input.rating-value').val($(this).data('rating'));
  return SetRatingStar();
});

SetRatingStar(); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-11-08T07:51:29.883

如果您使用引导程序，这是最好的星级插件：

*   2Kb 缩小
*   使用引导字形图标
*   没有额外的 CSS
*   您只需添加`class="rating"`到输入

[Github 项目](https://github.com/javiertoledo/bootstrap-rating-input)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-12-08T08:36:37.300

我没有看到仅使用引导 glyphicons 和 jquery 的简单答案。我相信其他人来这里是为了快速复制和粘贴，所以我只写了一个。

```
$(function(){
    $('.rating-select .btn').on('mouseover', function(){
        $(this).removeClass('btn-default').addClass('btn-warning');
        $(this).prevAll().removeClass('btn-default').addClass('btn-warning');
        $(this).nextAll().removeClass('btn-warning').addClass('btn-default');
    });

    $('.rating-select').on('mouseleave', function(){
        active = $(this).parent().find('.selected');
        if(active.length) {
            active.removeClass('btn-default').addClass('btn-warning');
            active.prevAll().removeClass('btn-default').addClass('btn-warning');
            active.nextAll().removeClass('btn-warning').addClass('btn-default');
        } else {
            $(this).find('.btn').removeClass('btn-warning').addClass('btn-default');
        }
    });

    $('.rating-select .btn').click(function(){
        if($(this).hasClass('selected')) {
            $('.rating-select .selected').removeClass('selected');
        } else {
            $('.rating-select .selected').removeClass('selected');
            $(this).addClass('selected');
        }
    });
});
```

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet"/>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="rating-select">
    <div class="btn btn-default btn-sm"><span class="glyphicon glyphicon-star-empty"></span></div>
    <div class="btn btn-default btn-sm"><span class="glyphicon glyphicon-star-empty"></span></div>
    <div class="btn btn-default btn-sm"><span class="glyphicon glyphicon-star-empty"></span></div>
    <div class="btn btn-default btn-sm"><span class="glyphicon glyphicon-star-empty"></span></div>
    <div class="btn btn-default btn-sm"><span class="glyphicon glyphicon-star-empty"></span></div>
</div>
```

要使用 django 模板从数据库中设置默认值，请为每个明星执行以下操作：

```
<div class="btn btn-{% if rate.value > 0 %}warning{% else %}default{% endif %}{% if rate.value == 1 %} selected{% endif %} btn-sm"><span class="glyphicon glyphicon-star-empty"></span></div> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-10-01T04:22:52.990

另一种有趣的方法。纯 CSS，保留选定值，使用单选按钮（酷！）和 FA 字体

[看演示](http://codepen.io/Funstarter/pen/pJZooM)

取自[这篇文章](http://habrahabr.ru/post/262833/)

HTML

```
<div class="star-rating">
  <div class="star-rating__wrap">
    <input class="star-rating__input" id="star-rating-5" type="radio" name="rating" value="5">
    <label class="star-rating__ico fa fa-star-o fa-lg" for="star-rating-5" title="5 out of 5 stars"></label>
    <input class="star-rating__input" id="star-rating-4" type="radio" name="rating" value="4">
    <label class="star-rating__ico fa fa-star-o fa-lg" for="star-rating-4" title="4 out of 5 stars"></label>
    <input class="star-rating__input" id="star-rating-3" type="radio" name="rating" value="3">
    <label class="star-rating__ico fa fa-star-o fa-lg" for="star-rating-3" title="3 out of 5 stars"></label>
    <input class="star-rating__input" id="star-rating-2" type="radio" name="rating" value="2">
    <label class="star-rating__ico fa fa-star-o fa-lg" for="star-rating-2" title="2 out of 5 stars"></label>
    <input class="star-rating__input" id="star-rating-1" type="radio" name="rating" value="1">
    <label class="star-rating__ico fa fa-star-o fa-lg" for="star-rating-1" title="1 out of 5 stars"></label>
  </div>
</div> 
```

CSS

```
.star-rating{
    font-size: 0;
}
.star-rating__wrap{
    display: inline-block;
    font-size: 1rem;
}
.star-rating__wrap:after{
    content: "";
    display: table;
    clear: both;
}
.star-rating__ico{
    float: right;
    padding-left: 2px;
    cursor: pointer;
    color: #FFB300;
}
.star-rating__ico:last-child{
    padding-left: 0;
}
.star-rating__input{
    display: none;
}
.star-rating__ico:hover:before,
.star-rating__ico:hover ~ .star-rating__ico:before,
.star-rating__input:checked ~ .star-rating__ico:before
{
    content: "\f005";
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-03-07T07:21:11.453

您可以查看我使用各种可配置选项创建的[Bootstrap JQuery Star 评级插件](http://plugins.krajee.com/star-rating)（其中包含场景演示）。它尽可能多地使用 CSS3，但也使用 JQuery（如果你同意的话）。您可以通过插件方法轻松获取星级或设置。

使用 Bootstrap 3.x 字形图标，包括 RTL 支持，支持插件事件和方法。该插件还支持任何部分填充的星星。你可以参考[这里的来源](https://github.com/kartik-v/bootstrap-star-rating)。

如果您热衷于使用 Font-Awesome，您可以覆盖插件 CSS 以在项目中使用 Font-Awesome 而不是 Bootstrap Glyphicons。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-09-07T16:58:39.940

[Font Awesome 和 JQuery DEMO](https://jsfiddle.net/eniebla/aha95663/4/)

HTML

```
<div>Rating Star - Function CallBack onChange</div>
<div class="well well-sm">
    <span id="rating_1" class="rating" ></span>
    <span id="result_1"></span> 
</div>
<div>Rating Star - No Editable</div>
<div class="well well-sm">
    <span id="rating_2" class="rating" data-val="2.49" data-stars='6' data-change="false"></span>
    <span>Calificaste con <b>2.49</b> de <b>6</b> Estrellas</span> 
</div>
<div>Rating Star - Tamaño - Data Html options -- Hidden input</div>
<div class="well well-sm">
   <span id="rating_3" class="rating" data-val="2.49" data-stars='10' data-input=".rating-value" data-change="true" style="font-size:35px;" >
        <input type="hidden" name="whatever3" class="rating-value" size="5"  />
   </span>
</div>
<div>Rating Star - javascript Options - input text</div>
<div class="well well-sm">
   <span id="rating_4" class="rating">
       <input type="text" name="whatever4" id="rating_val" size="1" readOnly="readOnly" />    
   </span>
    <span id="result_4"> &nbsp;&nbsp;de <b>10</b> estrellas </span> 
</div> 
```

JavaScript

```
 $('#rating_1').RatingStar(
   {callback:function(val){$('#result_1').html(" &nbsp;"+val+" estrella(s).")}}
 );

 $('#rating_2').RatingStar();

 $('#rating_3').RatingStar();

 $('#rating_4').RatingStar({
     val:4.95,
     stars:10,
     input:'#rating_val',
     change:true
 }); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-24T03:00:53.913

```
var $star_rating = $('.rating .star');

var SetRatingStar = function() {
  return $star_rating.each(function() {

var puan = document.formname.whatever.value;

    if ( parseInt($(this).data('rating')) <= puan) {
      return $(this).removeClass('star').addClass('star filled');
    } else {
      return $(this).removeClass('star filled').addClass('star');
    }
  });
};

$star_rating.on('click', function() { 

  document.formname.whatever.value=$(this).data('rating');

  return SetRatingStar();
});

.rating{unicode-bidi:bidi-override;direction:rtl;font-size:10px;}
.rating span.star{font-family:FontAwesome;font-weight:normal;font-style:normal;display:inline-block}
.rating span.star:hover{cursor:pointer}
.rating span.star:before{content:"\f006";padding-right:5px;color:#999}
.rating span.star:hover:before,.rating span.star:hover~span.star:before{content:"\f005";color:#e3cf7a}
.rating span.star.filled {}
.rating span.star.filled:before{content:"\f005";color:#e3cf7a; }

<span class="rating" style="font-size:20px;">
<span class="star" data-rating="5"></span><span class="star" data-rating="4"></span><span class="star" data-rating="3"></span><span class="star" data-rating="2"></span><span class="star" data-rating="1"></span></span> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-06T21:08:47.070

看看[django-ratings](https://github.com/dcramer/django-ratings) - 这就是你要找的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-14T05:17:21.897

考虑来自 CssTricks 的[使用很少 CSS 的星级评分。](http://css-tricks.com/star-ratings/)它不使用图像，不使用 Bootstrap，不使用 Javascript。纯 CSS 和 Unicode 星号，见[这个](http://copypastecharacter.com/)。除 IE <= 6 之外的所有浏览器都支持。

*注意：UI 不需要 Javascript，但在向服务器发送数据并在元素失去焦点后保留评分选择时需要。*

还可以看看[Accessible star rating widget with pure CSS](http://lea.verou.me/2011/08/accessible-star-rating-widget-with-pure-css/)。它也是一个纯 CSS。使用此处讨论的技术 -[使用 CSS 自定义单选和复选框输入](http://www.thecssninja.com/css/custom-inputs-using-css)。它与第一个不同之处在于，在元素失去焦点后评级保持选中状态。不幸的是，较少的浏览器支持它。

[在阅读时，关于CSS 选择器](http://www.quirksmode.org/css/selectors/)的快速说明可能会很有用。

**更新：**

刚刚重读了帖子并单击了链接。我的答案中的第一个链接与主题启动器的相同。道歉。

无论如何，我选择不删除答案，因为它包含一些我很高兴找到并且可能对其他人有用的链接。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-05T05:13:04.590

这是一个更好的解决方案。星星仅基于数字，因此搜索引擎和浏览器仅读取**4.5 分（满分 5**分），仅此而已。它使用[我自己的自定义字体](http://socialblogsitewebdesign.com/semantic-yet-seo-friendly-rating-stars/)；没有 JS，没有 SVG，没有 Flash，没有 Canvas。它也[可用作进度条](http://socialblogsitewebdesign.com/semantic-yet-seo-friendly-graph-bar/)。

[**演示/代码**](http://codepen.io/socialblogsite/pen/diBjD)

这里的代码，没有微格式标签，使其更简单：

```
Rating: <span class="star-rating-icons">
<strong>3.5</strong> out of <i>5</i>
</span> 
```

这是包含字体和相关样式的 CSS：

```
.star-rating-icons {
    font-family: seostars;
  font-size: 1.2em;
    line-height: .6em;
    position: relative;
    width: 5em;
    text-indent: -5000px;
    display: inline-block;
    font-style: normal;
}
.star-rating-icons strong {
    font-weight: normal;
    display: block;
    position: absolute;
    left: 0px;
    color: #FC0;
    font-family: seostars;
    text-indent: 0;
}
.star-rating-icons strong:first-letter {
    font-weight: bold;
    position: absolute;
    left: 0px;
    font-style: normal;
}
.star-rating-icons i {
    color: #666;
    position: absolute;
    text-indent: 0;
    color: #666;
    left: 0;
} 
```

基本上，评级的第一个字母被格式化为一个包含整颗星的字符，以及带有部分星的小数。星星的轮廓是由句号组成的，尽管它可以应用于任何其他在场的角色。（通过编辑字体或仅使用伪元素）

# xaml - 关于 xaml 页面之间的导航

> ID：12762997
> 
> 赞同：0
> 
> 时间：2012-10-06T19:15:03.687
> 
> 标签：xaml, navigation

我在 Visual Studio 2010 Express for Windows Phone 的项目中添加了一个名为“categories.xaml”的新 xaml 页面。该页面将通过单击按钮从 mainpage.xaml 导航。

我在按钮单击事件中编写了以下代码（使用 C#）：-

this.NavigationService.Navigate(new Uri("categories.xaml",UriKind.Relative));

但它没有用，所以我用以下代码替换了它： -

this.NavigationService.Navigate(new Uri("/categories.xaml",UriKind.Relative));

它奏效了。

第一行代码有什么问题？当我没有写'this'时，应用程序运行了。'this'有什么用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T05:27:59.843

两个代码之间的区别在于第二个代码有一个正斜杠。现在，使用正斜杠是为了表明该内容是 Xap 文件的本地内容。未能包含前导斜杠将导致引发 ArgumentException（详情如下）

“this.NavigationService.Navigate”中的 this 一词指的是类的当前实例。在这种情况下，您指向您的 categories.xaml 的类。