# StackOverflow 问答 15567000-15567999

# c# - MEF 作曲永无止境

> ID：15567004
> 
> 赞同：1
> 
> 时间：2013-03-22T09:38:11.737
> 
> 标签：c#, mef

我的应用程序中有一个奇怪的问题。我正在使用 MEF 从一些 Dll 加载导出。这适用于我的计算机和大多数其他计算机。但是在某些机器上，组合不起作用...... MEF 开始组合，但它永远不会结束，MEF 不会抛出异常。

我的代码：

```
var catalog = new AggregateCatalog(new DirectoryCatalog( "Plugins" ), new     
    AssemblyCatalog(Assembly.GetExecutingAssembly()));

var container = new CompositionContainer(catalog);
container.ComposeParts(this);//problem right here <- 
```

# java - Java Character vs char：内存使用情况如何？

> ID：15567005
> 
> 赞同：9
> 
> 时间：2013-03-22T09:38:11.907
> 
> 标签：java, performance, memory

在我的一个课程中，我有一个 type 字段`Character`。我更喜欢它，`char`因为有时该字段“没有价值”并且`null`对我来说是表示这种（缺乏）信息的最干净的方式。

但是我想知道这种方法的内存占用。我正在处理数十万个对象，这两个选项之间可以忽略不计的差异现在可能值得进行一些调查。

我的第一个赌注是 a`char`占用两个字节，而 a`Character`是一个对象，因此它需要更多才能支持它的生命周期。但是我知道像`Integer`,之类的盒装原语`Character`不是普通的类（想想装箱和拆箱），所以我想知道 JVM 是否可以在后台进行某种优化。

此外，`Character`s 垃圾是像其他东西一样收集还是具有不同的生命周期？它们是从共享存储库中汇集的吗？这个标准或 JVM 实现是依赖的吗？

我无法在 Internet 上找到有关此问题的任何明确信息。你能给我指出一些信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:48:39.200

如果您是`Character` 用来创建角色的，那么更喜欢使用

```
Character.valueOf('c'); // it returns cached value for 'c' 

Character c = new Character('c');// prefer to avoid 
```

以下是 javadoc 的摘录。

> 如果不需要新的 Character 实例，则`Character.valueOf()`通常应优先使用此方法而不是构造函数`Character(char)`，因为此方法可能会通过缓存频繁请求的值来显着提高空间和时间性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:07:11.340

Use `int` instead. Use `-1` to represent "no char".

Lots of precedence of this pattern, for example [`int read() in java.io.Reader`](http://docs.oracle.com/javase/6/docs/api/java/io/Reader.html#read%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:54:49.953

正如您所说，一个`Character`对象可以是`null`，因此它必须在 RAM 中占据比`char`不能为 null 的常规更多的位置：在某种程度上，`Character`s 是 s 的超集`char`。

However, in a given part of your code, the JIT compiler might be able to detect that you `Character` is never null an is always used as a regular `char` and optimize that part so that your `Character` uses no more RAM or execution is no slower. I'm just speculating on this very point, though, I don't know if a JIT can actually perform this precise optimization.

# java - Java 中 LTRIM 和 RTRIM 的一个好的替代方案是什么？

> ID：15567010
> 
> 赞同：58
> 
> 时间：2013-03-22T09:38:14.970
> 
> 标签：java, string, trim

`ltrim()`什么是 Java 中 JavaScript和`rtrim()`函数的良好替代品？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-22T09:40:28.920

使用正则表达式，您可以编写：

```
String s = ...
String ltrim = s.replaceAll("^\\s+","");
String rtrim = s.replaceAll("\\s+$",""); 
```

如果您必须经常这样做，您可以创建和编译一个模式以获得更好的性能：

```
private final static Pattern LTRIM = Pattern.compile("^\\s+");

public static String ltrim(String s) {
    return LTRIM.matcher(s).replaceAll("");
} 
```

* * *

从性能的角度来看，一个快速的微型基准测试显示（JIT 编译后）正则表达式方法比循环慢大约 5 倍（100 万个 ltrim 为 0.49 秒对 0.11 秒）。

我个人发现正则表达式方法更具可读性且不易出错，但如果性能是一个问题，您应该使用循环解决方案。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-22T09:47:39.877

使用正则表达式可能很好，但它比简单的修剪函数慢得多：

```
public static String ltrim(String s) {
    int i = 0;
    while (i < s.length() && Character.isWhitespace(s.charAt(i))) {
        i++;
    }
    return s.substring(i);
}

public static String rtrim(String s) {
    int i = s.length()-1;
    while (i >= 0 && Character.isWhitespace(s.charAt(i))) {
        i--;
    }
    return s.substring(0,i+1);
} 
```

来源：[http ://www.fromdev.com/2009/07/playing-with-java-string-trim-basics.html](http://www.fromdev.com/2009/07/playing-with-java-string-trim-basics.html)

此外，还有一些提供此类功能的库。例如，[Spring StringUtils](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/util/StringUtils.html#trimLeadingWhitespace(java.lang.String))。Apache Commons StringUtils 也提供了类似的功能：[strip、stripStart、stripEnd](http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/StringUtils.html#strip%28java.lang.String,%20java.lang.String%29)

```
StringUtils.stripEnd("abc  ", null)    = "abc" 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-06-22T20:55:54.250

```
import org.apache.commons.lang3.StringUtils;

private String rTrim(String str) {
    return StringUtils.stripEnd(str, /*stripChars*/" ");
}

private String lTrim(String str) {
    return StringUtils.stripStart(str, /*stripChars*/" ");
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-10-06T19:51:41.750

您可以简单地尝试以下

```
String s = "  Hello world  "

String ltrim = s.stripLeading();

String rtrim = s.stripTrailing(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-08-25T22:58:56.303

Guava 有[CharMatcher](http://google.github.io/guava/releases/22.0/api/docs/com/google/common/base/CharMatcher.html) trimLeadingFrom 和 trimTrailingFrom

例如`CharMatcher.whitespace.trimTrailingFrom(s)`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-04T20:12:43.617

根据@bezmax 的回答，我查看了 Spring [`StringUtils`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/util/StringUtils.html)，但它不能证明我切换到 Spring 框架的过载是合理的。因此，我决定创建一个`Characters`类来轻松地左/右修剪任何给定字符（-class）的字符串。该课程可在[GitHub](https://github.com/kristian/characters)上找到。

```
Characters.valueOf('x').trim( ... )
Characters.valueOf('x').leftTrim( ... )
Characters.valueOf('x').rightTrim( ... ) 
```

如果您想修剪空格，可以使用预定义的字符类：

```
Characters.WHITESPACE.trim( ... )
Characters.WHITESPACE.leftTrim( ... )
Characters.WHITESPACE.rightTrim( ... ) 
```

该类确实还具有其他类型的字符操作，`condense`例如`replace`或`split`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-15T11:45:15.930

可能有点便宜，但您也可以在没有任何其他库的情况下使用这些：

```
final var string = "   Hello World   ";

final var rtrimmed = ("." + string).trim().substring(1);
// => "   Hello World"

var ltrimmed = (string + ".").trim();
ltrimmed = ltrimmed.substring(0, ltrimmed.length - 1);
// => "Hello World   " 
```

我承认，这`ltrimmed`不是那么漂亮，但它会成功。

# c# - Fody 是否在最终装配中留下任何参考/痕迹？

> ID：15567023
> 
> 赞同：9
> 
> 时间：2013-03-22T09:38:47.047
> 
> 标签：c#, .net, fody, fody-propertychanged

在最终编织的程序集中是否有任何[Fody](https://github.com/Fody/Fody/wiki)或其依赖项（引用）的痕迹？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T23:55:24.150

所以这真的应该是几个问题

# Fody 是否在总装中留下任何参考资料？

No Fody 不需要任何引用，在 ILWeaving 期间不添加任何引用。它也不需要部署任何文件来使用运行时

# Fody 在总装过程中会留下任何痕迹吗？

是的。由于 MSBuild 和 Visual Studio 的性质，很难判断程序集是否已作为构建的一部分进行了更改。因此，Fody 将一个名为的内部接口注入`ProcessedByFody`到您的程序集中。这使 Fody 可以避免组件的双重处理。[https://github.com/Fody/Fody/wiki/TaskAddsAFlagInterface](https://github.com/Fody/Fody/wiki/TaskAddsAFlagInterface)

# Fody 插件会在最终组装中留下任何痕迹吗？

好吧，对此的明显答案是“是”。所有插件都以某种方式修改目标程序集。

# Fody 插件是否在最终装配中留下任何参考？

这是可选的，取决于插件的创建者。虽然许多插件都有一个 dll 来引用，但这通常只是为了提供元数据。然后插件在编译时删除引用。这意味着没有必要部署该引用 dll。例如[https://github.com/Fody/PropertyChanged/wiki/WeavingWithoutAddingAReference](https://github.com/Fody/PropertyChanged/wiki/WeavingWithoutAddingAReference)

但是，您应该检查您正在使用的特定插件的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:51:55.853

请参阅以下[博客](http://cam.macfar.net/mitigating-the-billion-dollar-mistake-fody-edition)。

> *如果我理解正确，最终结果没有对* *the Fody 的任何引用。这意味着在示例中，我看不到您* *实际上是如何定义要为第一个方法参数启用的空保护而不是第二个方法参数？*
> 
> 大图

上面的回复是：

> @Tatus 是的，最终程序集没有引用 Fody 或您使用的任何 Fody 扩展。

# java - 匿名 ActionListener 中的 Java Formatter append 方法

> ID：15567025
> 
> 赞同：0
> 
> 时间：2013-03-22T09:38:49.443
> 
> 标签：java, append, actionlistener, inner-classes, formatter

如果这已在其他地方得到回答，请提前抱歉，我可能只是在搜索错误的标签。

我希望使用实现 ActionListener 的匿名内部类创建一个包含各种变量的日志文件。这将附加到一个 JButton。

使用格式化程序，可以准确地为我提供一行所需的内容，但我想保留此事件的所有先前日志（我不在乎它是在最后一个条目之前还是之后）。

在我通过一些浏览本网站和其他网站时发现的各种方法碰壁后，您可以使用带有 Formatter 的构造函数中的 append 方法来做到这一点。

*   是否可以在带有 Formatter 的内部类中使用 append ？

*   如果不能，您能否推荐另一个仍能满足我需求的 Java 编写器？我还是个初学者，所以越简单越好……就目前而言。

*   如果内部类和格式化程序没有任何额外的导入/包是可能的，请给我们一个提示或链接，我会继续搜索。

我附上了一个小的可编译示例代码，如果有人有兴趣玩，它可能会有所帮助。

谢谢，周末战士84

```
import java.awt.FlowLayout;
import java.awt.TextField;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Formatter;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class TestProgram extends JFrame{

private FlowLayout lay;

public TestProgram(){

super("Sample Program");
    lay = new FlowLayout();  
    setLayout(lay);

    final JLabel label1 = new JLabel("Label One");      
    add(label1);           
    final TextField field1 = new TextField(8);      
    add(field1);        
    final JLabel label2 = new JLabel("Exception Label");    
    add(label2);        
    final JButton button1 = new JButton
("Log Data");                           
    add(button1);
    button1.addActionListener(
        new ActionListener(){   
            public void actionPerformed(ActionEvent e){
                if(button1.isSelected());   
                try{
                Formatter fm = new Formatter("C:\\Test\\testlog.txt");                                                              
                fm.format("%s%s%s%s", "Sample Value: ",label1.getText(),
                        "  Sample Value2: ",field1.getText());
                fm.close();
                    }                                                                       
                    catch(Exception ee){                    
                    label2.setText("Make Sure Path exists, C:\\Test\\testlog.txt");                 
                    }
            }
    }
);          
}
} 
```

主要的

```
import javax.swing.JFrame;

public class TestMain{

public static void main  (String[] args){

    TestProgram ts = new TestProgram();

    ts.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    ts.setSize(1200,500);
    ts.setVisible(true);
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:18:59.940

您是否有特定原因要使用 Formatter 执行此操作？读起来就像您想做一些非常基本的日志记录，Java 中有许多实现可以为您完成繁琐的工作。甚至[java.util.logging 包](http://docs.oracle.com/javase/7/docs/api/java/util/logging/package-summary.html)也足以在单击按钮时将日志行附加到文件中。我个人建议[logback](http://logback.qos.ch)，但这只是一种偏好。

如果您确实坚持自己进行文件操作，那么[这个问题](https://stackoverflow.com/questions/1625234/how-to-append-text-to-an-existing-file-in-java)的答案可能适合您。在将整行写入文件之前，可以使用[MessageFormat -class 完成格式化。](http://docs.oracle.com/javase/7/docs/api/index.html?java/text/MessageFormat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T21:07:21.860

正如所承诺的，它仍然是一个 WIP，但它解决了我当前的问题。主要是混淆了作者的可能性，以及我需要格式化程序的信念。

```
if(button1.isSelected());               
            String path = "C:\\Test\\testlog.txt";
            String mylog = "\r\n"+"Sample Value: " + label1.getText()+"  Sample Value2: "+field1.getText();
            File file = new File(path);
            FileWriter writer;

            try {   
            writer = new FileWriter(file,true);             
            BufferedWriter buffer  = new BufferedWriter(writer);
            writer.append(mylog);                              
            buffer.close();

            }catch (IOException e1) {                           
            label2.setText("Make Sure Path exists, C:\\Test\\testlog.txt"); 
```

# c# - 如何获取文件夹的 NTFS 文件 ID

> ID：15567027
> 
> 赞同：3
> 
> 时间：2013-03-22T09:38:57.513
> 
> 标签：c#, winapi, io, pinvoke, ntfs

如何在 c# 中为文件夹获取唯一的 NTFS 文件 ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T09:47:26.000

```
 internal static Int64 GetDirectoryId(string dir)
    {
        var handle = CreateFile(dir, FileAccess.Read, FileShare.Read, IntPtr.Zero, FileMode.Open, 0x02000000 | 0x00000080, IntPtr.Zero);
        var fileStruct = new FILE_ID_BOTH_DIR_INFO();
        GetFileInformationByHandleEx(handle, FILE_INFO_BY_HANDLE_CLASS.FileIdBothDirectoryInfo, out fileStruct, (uint)Marshal.SizeOf(fileStruct));
        CloseHandle(handle);
        var win32Error = Marshal.GetLastWin32Error();
        if (win32Error != 0)
            throw new Win32Exception();

        return fileStruct.FileId.QuadPart;
    }

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern bool GetFileInformationByHandleEx(
        IntPtr hFile,
        FILE_INFO_BY_HANDLE_CLASS infoClass,
        out FILE_ID_BOTH_DIR_INFO dirInfo,
        uint dwBufferSize);

    [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
    private static extern IntPtr CloseHandle(
        IntPtr handle);

    [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
    private static extern IntPtr CreateFile(
        string lpFileName,
        [MarshalAs(UnmanagedType.U4)] FileAccess dwDesiredAccess,
        [MarshalAs(UnmanagedType.U4)] FileShare dwShareMode,
        IntPtr lpSecurityAttributes,
        [MarshalAs(UnmanagedType.U4)] FileMode dwCreationDisposition,
        uint dwFlagsAndAttributes,
        IntPtr hTemplateFile);

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    private struct FILE_ID_BOTH_DIR_INFO
    {
        public uint NextEntryOffset;
        public uint FileIndex;
        public LARGE_INTEGER CreationTime;
        public LARGE_INTEGER LastAccessTime;
        public LARGE_INTEGER LastWriteTime;
        public LARGE_INTEGER ChangeTime;
        public LARGE_INTEGER EndOfFile;
        public LARGE_INTEGER AllocationSize;
        public uint FileAttributes;
        public uint FileNameLength;
        public uint EaSize;
        public char ShortNameLength;
        [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst = 12)]
        public string ShortName;
        public LARGE_INTEGER FileId;
        [MarshalAsAttribute(UnmanagedType.ByValTStr, SizeConst = 1)]
        public string FileName;
    }

    [StructLayout(LayoutKind.Explicit, Size=8)]
    private struct LARGE_INTEGER
    {
        [FieldOffset(0)]public Int64 QuadPart;
        [FieldOffset(0)]public UInt32 LowPart;
        [FieldOffset(4)]public Int32 HighPart;
    }

    private enum FILE_INFO_BY_HANDLE_CLASS
    {
        FileIdBothDirectoryInfo = 10
    } 
```

# android - onNewIntent is called when app is launched from background

> ID：15567032
> 
> 赞同：0
> 
> 时间：2013-03-22T09:39:40.323
> 
> 标签：android, android-intent, android-activity

I have a `singleTop` activity, this activity is launched via `Intent`:

```
 Intent intent = new Intent(GCMIntentService.this,MainActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

`onNewIntent` is called.

My problem is that then I hit home button, and then launch application again (from background) `onNewIntent` is called again with the same intent, and I can not find a way to discard this `Intent`. I tried to `putExtra` flag to this intent, but it is not persisted between application state changes.

Is it possible to stop calling `onNewIntent()` when application comes to foreground?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:49:27.657

在您的清单中，将下面的行添加到您的 MainActivity

```
android:finishOnTaskLaunch="true" 
```

# mongodb - Mongodb文本搜索，按列过滤

> ID：15567035
> 
> 赞同：1
> 
> 时间：2013-03-22T09:39:50.597
> 
> 标签：mongodb

运行 mongo 2.4 RC 并尝试文本搜索功能

如何在其他列值上进一步过滤文本搜索命令？

```
 db.Wall.runCommand("text", { search : "Bob"}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:24:45.840

它记录[在这里](http://docs.mongodb.org/manual/tutorial/limit-number-of-items-scanned-for-text-search/)。

如文档所示，您将添加一个`filter`：

```
db.inventory.runCommand( "text", {
    search: "Bob",
    filter: { "FavoriteRoom" : "kitchen" }
}) 
```

假设你有一个像这样的文件：

```
{
    "FavoriteRoom": "kitchen",
    "BlockOfText" : "Bob said he'd like to go out for dinner less often."
} 
```

为了获得更好的性能，您将添加一个索引：

```
db.inventory.ensureIndex({
                        "FavoriteRoom": 1,
                        "BlockOfText": "text"
                      }) 
```

# android - Playing mp4 file using phonegap

> ID：15567036
> 
> 赞同：1
> 
> 时间：2013-03-22T09:39:50.507
> 
> 标签：android, cordova, video-player

I have build with the following url [https://github.com/macdonst/VideoPlayer](https://github.com/macdonst/VideoPlayer) for my jqueryMobile. but the youtube/raw file is not playing from my phone. Anyone please help me to solve the issue.

# java - 错误 MVC org.springframework.validation.BeanPropertyBindingResult: 1 数组错误

> ID：15567037
> 
> 赞同：5
> 
> 时间：2013-03-22T09:39:51.513
> 
> 标签：java, spring, spring-mvc, model, javabeans

嗨，我尝试将 bean 中的数组从 jsp 传递给 java。

```
@ModelAttribute("areasActividadAdminBean")AreasActividadAdminBean areasActividadAdminBean

Agrupacion[] listaAgrupaciones = x;

model.addAttribute("areasActividadAdminBean",areasActividadAdminBean); 
```

在 JSP 中我有这个：

```
<form:form commandName="areasActividadAdminBean" .....>

<form:hidden path="listaAgrupaciones"/>

<input type="submit" value="Button"/> 
```

但我得到这个错误：

```
org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: 1 errors
Field error in object 'areasActividadAdminBean' on field 'listaAgrupaciones': rejected value 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-01T03:02:28.337

确保 BindingResult 方法参数遵循您要绑定的对象。例子

```
public String add(@Valid DomainObject domainObj, BindingResult result, ModelMap model) { 
```

# javascript - Chrome Extension sendMessage from popup.html to content.js not working

> ID：15567038
> 
> 赞同：0
> 
> 时间：2013-03-22T09:39:54.287
> 
> 标签：javascript, google-chrome-extension, communication

I'm trying to build an Extension which sends data from the popup.html to the tab dome, but I can't get the sendMessage to work and I don't understand why. I'm following this guidline: [https://developer.chrome.com/extensions/messaging.html](https://developer.chrome.com/extensions/messaging.html)

here are my sources:

```
manifest:
{
   "manifest_version": 2,
   "name": "OMG Campaign Preview Maker",
   "description": "Easy OMG Campaign Preview Maker",
   "background": {  "scripts": ["background.js"]},
   "version": "0.1",
   "content_scripts": [
        {
          "matches": ["http://*/*", "https://*/*"],
          "js": ["jquery-1.7.min.js", "content.js"]
        }
    ],
   "browser_action": {
      "default_icon": "logo_128.jpg",
      "popup": "popup.html",
      "default_popup": "popup.html"
   },
   "icons": {
      "128": "logo_128.jpg"
   }
} 
```

popup.html

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="jquery-1.7.min.js"></script>
<script type="text/javascript" src="popup.js"></script>
</head>
<body>
<h1>Clicks</h1>
<p>extra1:
  <input type="text" name="extraclicks[]" id="extra1">
  <br>
  extra2:
  <input type="text" name="extraclicks[]" id="extra2">
  <br>
  extra3:
  <input type="text" name="extraclicks[]" id="extra3">
  <br>
  <br>
  <input type="submit" name="sendclicks" id="sendclicks" value="Invia Clicks">
</p>
</body>
</html> 
```

popup.js

```
function sendClicks(){
    console.log("popup.js > sendClicks()");
    var clicksArr = new Array();

    $("input[name='extraclicks\\[\\]']").each(function(i, value){
        clicksArr.push($(this).val());
    });

    chrome.tabs.getSelected(null, function(tab) {
        console.log("popup.js > tab id: "+tab.id)
        chrome.tabs.sendMessage(tab.id, {type:"clicks" },
            function(response) {
                console.log(response.msg);
            }
        );
    });
    console.log("avra' inviato?");
}

$(function(){
    console.log("popup.js > OMD Extension ready");
    $('#sendclicks').click(function(){sendClicks();});
}); 
```

content.js

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
    console.log("content.js > onMessage");

    if (request.type == 'clicks') {
        console.log("content.js > clicks");
        sendResponse({msg: "success"});
    }
}); 
```

While I can perfectly see the logs gnerated from popup.js in the console, I don't see any of the logs launched by content.js. What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:29:47.520

好吧，我很愚蠢......错误的是......我正在观看的检查员页面。content.js 中的“console.log”在**TAB INSPECTOR CONSOLE**上打印，而不是在扩展名上！

我希望它会帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:04:40.750

哎呀，我想你只是向 popup.js 本身发送消息......

popup.js 中的 getSelected 监听弹出选项卡的活动（它也是 chrome 中的选项卡）因此，选项卡 ID 实际上是弹出选项卡，而不是插入 content.js 的选项卡

BTW getSelected 已弃用。尝试替代方案？ [http://developer.chrome.com/extensions/tabs.html#method-getCurrent](http://developer.chrome.com/extensions/tabs.html#method-getCurrent)

# iphone - How to test the timeout on posting the NSMutableURLRequest?

> ID：15567042
> 
> 赞同：1
> 
> 时间：2013-03-22T09:40:18.107
> 
> 标签：iphone, ios

I encounter a problem from our QA team, our QA team want to test the our app can manage rightly when time out happend sending the NSMutableURLRequest, according to a post on the Apple developer forum, the minimum timeout interval for POST is 240s [NSMutableURLRequest timeout interval not taken into consideration for POST requests](https://stackoverflow.com/questions/1466389/nsmutableurlrequest-timeout-interval-not-taken-into-consideration-for-post-reque)

But how can I make this request timeout, even don't change the server code.

# xml - ObservableList and StringProperty are not marshalled in xml file

> ID：15567044
> 
> 赞同：4
> 
> 时间：2013-03-22T09:40:28.090
> 
> 标签：xml, jaxb, javafx, observablecollection

I want to write/read an XML-File via JAXB using Java 1.7. In my Files I'm using StringProperty, ObservableList and SimpleObjectProperty. I have an xml adapter for each of this classes. When i try to marshall the classes i only get an neary empty xml-file.

ModelDescriptorHelper (stores the project list and marshal and unmarshall the xml file)

```
@XmlRootElement
public class ModelDescriptorHelper {

private static ModelDescriptorHelper helper = new ModelDescriptorHelper();
private File file;
@XmlTransient private ObservableList<Project> projects =       FXCollections.observableArrayList();
private SimpleListProperty<Project> projectsProperty = new SimpleListProperty(this, "projects", projects);

public ObservableList<project> getProjects() {
    return projectsProperty.get();
}

public void setCreoViewProjects(ObservableList<CreoViewProject> creoViewProjects) {
    creoViewProjectsProperty.set(creoViewProjects);
}

public SimpleListProperty<CreoViewProject> creoViewProjectsProperty()
{
    return creoViewProjectsProperty;
}

private ModelDescriptorHelper readData() {
    try {
        File file = this.file;
        helper = JAXB.unmarshal(file, ModelDescriptorHelper.class);
        helper.file = file;

    } catch (Exception ex) {
    }
    return helper;
}

public void saveData() {
    try {
        if (!file.exists())
        {
            file.getParentFile().mkdirs();

        }
        else
        {
            file.delete();
            file.createNewFile();
        }
        try (BufferedOutputStream bf = new BufferedOutputStream(new FileOutputStream(file, false))) {
            JAXB.marshal(this, bf);
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}

@XmlTransient
public File getFile() {
    return file;
}

public void setFile(File file) {
    this.file = file;
    readData();
}

public static ModelDescriptorHelper getInstance(File file) {
    helper.setFile(file);
    return helper;
}
} 
```

Project Class:

```
public class Project {

private SimpleStringProperty wtContextName = new SimpleStringProperty();
private SimpleStringProperty projectName = new SimpleStringProperty();

public String getProjectName() {
    return projectName.get();
}

public void setProjectName(String projectName) {
    this.projectName.set(projectName);
}

public StringProperty projectNameProperty() {
    return projectName;
}

public String getWtContextName() {
    return wtContextName.get();
}

public void setWtContextName(String wtContextName) {
    this.wtContextName.set(wtContextName);
}

public StringProperty wtContextNameProperty() {
    return wtContextName;
}

} 
```

StringPropertyAdapter:

```
public class SimpleStringPropertyAdatper extends XmlAdapter<String, SimpleStringProperty> {
@Override
public SimpleStringProperty unmarshal(String v) throws Exception {
    return new SimpleStringProperty(v);
}

@Override
public String marshal(SimpleStringProperty v) throws Exception {
    if(null == v) {
        return null;
    }
    return v.get(); // Or whatever the correct method is
} 
```

}

ObservableListAdatper:

```
public class ObservableListAdatper<T> extends XmlAdapter<LinkedList<T>, ObservableList<T>> {
@Override
public ObservableList<T> unmarshal(LinkedList<T> v) throws Exception {
    return FXCollections.observableList(v);
}

@Override
public LinkedList<T> marshal(ObservableList<T> v) throws Exception {
    LinkedList<T> list = new LinkedList();
    list.addAll(v);
    return list; // Or whatever the correct method is
} 
```

}

Package info:

```
@XmlJavaTypeAdapters({
@XmlJavaTypeAdapter(value=SimpleStringPropertyAdatper.class, type=String.class),
@XmlJavaTypeAdapter(value=ObservableListAdatper.class, type=ObservableList.class)})
package org.project;
import javafx.collections.ObservableList;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapters; 
```

Create Project and save data to xml:

```
ModelDescriptorHelper helper = ModelDescriptorHelper.getInstance(new File ("/test/test.xml"));
    Project project = new Project();
    project.setProjectName("Test Project");
    helper.getProjects().add(project);
    helper.getProjects().add(project);
    helper.saveData(); 
```

The Xml file after marshall:

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ModelDescriptorHelper>
     <projects/>
 </ModelDescriptorHelper> 
```

When i debug it seems that the marshaller calls 2 times the ObservableListAdatper. 1 Time the list has 2 projects, second time the list is empty.

What do i wrong?

# java - how to prevent captcha verification

> ID：15567046
> 
> 赞同：0
> 
> 时间：2013-03-22T09:40:36.487
> 
> 标签：java

I am reading Google search response in my Java code using Apache Http Client using `HttpGet` method, but after some time Google sends the captcha verification. After Google sends the Captcha verification, I get nothing rather than captcha.

How can I prevent my code from captcha verification?

# python - 删除日期时间功能中的时间？

> ID：15567052
> 
> 赞同：6
> 
> 时间：2013-03-22T09:40:57.127
> 
> 标签：python, django, templates, datetime

我 `{{value.time}}`在这个值中有一个变量执行

```
March 22, 2013, 2:30 a.m 
```

但我想 `2:30 a.m`在我的模板文件中删除这个值的（时间）。我怎么能这样做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T09:43:46.070

将日期作为扩展名

```
{{ value.time.date }} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T10:53:03.053

```
>>> from datetime import datetime,date
>>> date_str = 'March 22, 2013, 2:30 a.m'
>>> date_str = date_str.replace('a.m','AM')
>>> formatter_string = "%B %d, %Y, %I:%M %p" 
>>> datetime_object = datetime.strptime(date_str, formatter_string)
>>> date_object = datetime_object.date() # date object without '2:30 AM'
>>> date_object
datetime.date(2013, 3, 22)
>>> formatter_string = "%B %d, %Y" 
>>> datetime_string = datetime.strftime(date_object, formatter_string)
>>> datetime_string
'March 22, 2013' 
```

# d3.js - D3折线图字符串域x轴

> ID：15567054
> 
> 赞同：9
> 
> 时间：2013-03-22T09:41:09.907
> 
> 标签：d3.js, axis, linechart, ordinal

我对 D3 比较陌生，我不知道为什么有些东西不起作用。我想用 d3 画一个折线图，这很好用，但我的轴有问题。

使用以下代码，它在某处出错，我不知道如何解决......

```
var x = d3.scale.linear()
.range([0, width]);

var xAxis = d3.svg.axis()
.scale(x)
.orient("bottom");

x.domain(d3.extent(data, function(d) { return d.age; })); 
```

如果`d.age`是整数（如`1;2;3`等），则效果很好。但我想要 x 轴上的字符串。喜欢`("netherlands", "England", "Belgium")`。

所以如果`d.age`是一个整数，它可以绘制图形，如果 d.age 是一个字符串，它不会绘制任何东西。

我也尝试过使用序数而不是线性，但这给出了一个不正确的图表。（奇怪的线条......）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T14:53:03.023

如果要在轴上使用分类值，则需要分类（序数）刻度。看看[文档](https://github.com/mbostock/d3/wiki/Ordinal-Scales)。你的代码看起来像

```
var x = d3.scale.ordinal().rangeRoundBands([0, width]);
var xAxis = d3.svg.axis().scale(x).orient("bottom");

x.domain(data.map(function(d) { return d.country; })); 
```

请注意，这用于`map`提取字符串值——这可能会或可能不会在您的特定浏览器中实现，请参阅[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)了解更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-02T18:15:27.267

采用

```
var x = d3.scale.ordinal().rangePoints([0, width]); 
```

这是小提琴链接 [http://jsfiddle.net/sk2Cf/](http://jsfiddle.net/sk2Cf/)

# android - How to initiate an android app from a java web application?

> ID：15567059
> 
> 赞同：0
> 
> 时间：2013-03-22T09:41:20.297
> 
> 标签：android

I'm having a requirement as follows:

There is a web application which does some processing work and final agreement doc has to be displayed on an android device for the customer and accept his digital signature. How do I display the document on the device? Is there any way to activate android app remotely?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:43:33.337

1.  开发可以获取数字签名并将其附加到文档的 Android 应用程序。
2.  让您的客户将其安装在他/她的 Android 设备上。
3.  使用像[GCM](http://developer.android.com/google/gcm/index.html)这样的服务来远程启动你的应用程序，然后让应用程序从服务器读取文件。
4.  让您的客户签字。
5.  发回签名文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:48:59.003

您应该使用[GCM （Google Cloud Messaging）远程激活您的应用程序，有一个名为](http://developer.android.com/google/gcm/index.html)[Chrome to phone](https://code.google.com/p/chrometophone/source/checkout)的开源应用程序（由 Google 提供），它通过按浏览器中的按钮打开一个网站，您应该检查一下，我打赌稍作修改，您就可以根据自己的需要进行调整

# iphone - UINavigationBar 按钮未显示

> ID：15567063
> 
> 赞同：1
> 
> 时间：2013-03-22T09:41:31.633
> 
> 标签：iphone, objective-c, uinavigationcontroller, uinavigationitem

我有导航栏。当我将按钮添加到导航栏时，它不会显示。

代码：

```
UINavigationController *nav=[[UINavigationController alloc]init];

    [self.view addSubview:nav.view];

    UIImage *info_iphone=[UIImage imageNamed:@"infobtn_iphone.png"];
    UIButton *infobtn=[[UIButton alloc]initWithFrame:CGRectMake(0, 0, 48, 30)];
    [infobtn setBackgroundImage:info_iphone forState:UIControlStateNormal];
    [infobtn addTarget:self action:@selector(show_info) forControlEvents:UIControlEventTouchUpInside];

    self.navigationItem.rightBarButtonItem=[[UIBarButtonItem alloc]initWithCustomView:infobtn]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T06:02:12.400

```
UIButton *tempButton1 = [UIButton buttonWithType:UIButtonTypeCustom];
[tempButton1 setFrame:CGRectMake(0, 0, 34, 34)];// your image width and height
[tempButton1 addTarget:self action:@selector(btnBackClicked:) forControlEvents:UIControlEventTouchUpInside];
[tempButton1 setImage:[UIImage imageNamed:@"btn_back.png"] forState:UIControlStateNormal];
[tempButton1 setImage:[UIImage imageNamed:@"btn_back.png"] forState:UIControlStateHighlighted];
[self.navigationItem setRightBarButtonItem:[[UIBarButtonItem alloc] initWithCustomView:tempButton1]]; 
```

# ruby - 键映射到多个值

> ID：15567066
> 
> 赞同：0
> 
> 时间：2013-03-22T09:41:55.850
> 
> 标签：ruby, data-structures, hash

在 Ruby 中，我想要类似的东西

```
my_hash =  {:a => [b,c,h], :d => [e,f,g]..} 
```

而不是 `my_hash= {:a => b ,:a => c ,:a => h , :d => e , :d=> f ,:d => g }`. 我不能使用数组作为值，因为我想获取值的键，即 my_hash.key(c) 应该返回一个 . 有没有人知道如何使用 ruby​​ 哈希类来做到这一点，或者是否有任何其他数据结构。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:47:56.473

你应该有相反的键和值。

```
{b => :a, c => :a, h => :a, e => :d, f => :d, g => :d, ...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:27:38.930

反转哈希可能是你最好的选择，但是，嘿，只是为了好玩......

```
class Hash
  def key_array_with(val)
    self.keys.select { |k| k.include?(val) }.first
  end
end

h = {[:b,:c,:h] => :a, [:e,:f,:g] => :d}
h[h.key_array_with(:c)] 
```

# python - 如果不以 root 身份运行，如何跳过安装数据文件？

> ID：15567074
> 
> 赞同：3
> 
> 时间：2013-03-22T09:42:25.693
> 
> 标签：python, pip, setup.py

我必须将 Python 项目与通过命令行界面使用的脚本一起部署。为了帮助用户，我还包含一个 Bash 完成文件，该文件位于`/etc/bash_completion.d`. 不幸的是，`pip install project.tar.gz`以普通用户身份安装时，安装源代码分发失败，因为

```
error: could not delete '/etc/bash_completion.d/completion': Permission denied 
```

`pip install -e .`由于忽略了写作问题，因此安装了该项目。

现在，有没有办法告诉分发它不应该在不以root身份执行时尝试写入数据文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:57:03.133

如果您不是超级用户（但我对此表示怀疑），有一个[非 root 选项](http://pythonhosted.org/distribute/easy_install.html?highlight=root#non-root-installation)`distribute`可能足够智能以发现它无法写入。`/etc`

您没有说明如何`distribute`写信，`/etc`但是您可以将其放在`try:`and `except:`子句中（当然，如果这是自动执行的，`setup.py`则可能必须将该部分取出并手动执行）。

如果您不确定是否可以`/etc`在运行脚本之前写入（在用户案例中），您可以这样做

```
 try:
      with open('/etc/bash_completion.d/completion', 'w') eo:
          eo.write('test')
      data_files = ['completion', '/etc/bash_completion.d/completion']
 except error:
      print 'User does not have write access to /etc completion will not work'
      data_files = []

 setup(
      ...
      data_files=data_files,
      etc...
 ) 
```

# ibm-mobilefirst - Worklight 5.0.5 issue with FixedSplitter

> ID：15567075
> 
> 赞同：0
> 
> 时间：2013-03-22T09:42:34.170
> 
> 标签：ibm-mobilefirst

I'm developing a mobile app with FixedSplitter testing the screenSizeAware property for layout. With or without this property set, I get the following problem: when I test the app in browser simulation or in emulator (iOS or Android), after the heading tag there is a blank space before the content of the ScrollableViews contained in the FixedSplitter. I noticed that if I don't set the property fixed='true' in the heading tag, this blank space does not appear, but the application does not have the behavior that I would like to obtain... I post the html code and css of this part of the app:

```
<body id="content" style="display: none;">

<!-- SPLASH SCREEN -->

<div id="loader">
    <div class="loaderShadowDiv">       </div>
    <div id="webLogo" align="center">
        <img id="logo" src="images/logo.jpg">
    </div>
</div>

<div data-dojo-type="dojox.mobile.FixedSplitter" data-dojo-props="orientation:'H', screenSizeAware: true">

    <!-- MAIN SIDE VIEW -->
    <div data-dojo-type="dojox.mobile.ContentPane" style="min-width: 320px; border-right: 1px solid black;">
        <div data-dojo-type="dojox.mobile.ScrollableView" id="mainView"
            data-dojo-props="selected:true">
            <h1 data-dojo-type="dojox.mobile.Heading" fixed="top">Instance Monitor</h1>
            <div data-dojo-type="dojox.mobile.RoundRectList">
                <div data-dojo-type="dojox.mobile.ListItem"
                    data-dojo-props="label:'ORDINI',moveTo:'orderSearchView',transition:'slide'" class="deviceFont"></div>
                <div data-dojo-type="dojox.mobile.ListItem"
                    data-dojo-props="label:'LISTINI'" class="deviceFont"></div>
            </div>
        </div>
    </div>

    <!-- RIGHT-SIDE VIEW -->
    <div data-dojo-type="dojox.mobile.ContentPane" style="width: 100%;">
    <!-- <div data-dojo-type="dojox.mobile.Container" style="width: 100%;"> -->
        <div data-dojo-type="dojox.mobile.ScrollableView" id="dummy">
            <h1 data-dojo-type="dojox.mobile.Heading"></h1>
        </div>

        <div data-dojo-type="dojox.mobile.ScrollableView" id="orderSearchView" onAfterTransitionIn="setCurrentView('orderSearchView');" style="font-size: small">
            <h1 data-dojo-type="dojox.mobile.Heading"
                data-dojo-props="label:'Ricerca Ordini', selected: false, back:'Home',moveTo:'mainView'" fixed="top"></h1>
            <div data-dojo-type="dojox.mobile.Container">
                <p align="center" class="deviceFont">Inserire i parametri di ricerca:</p>
            </div>
            <div data-dojo-type="dojox.mobile.RoundRect">
                <div data-dojo-type="dojox.mobile.ListItem"
                    data-dojo-props="label:'Item'">
                    <label style="padding-left: 12px" class="deviceFont">Stato Ordine:</label>
                    <button data-dojo-type="dojox.mobile.Button" type="button" style="margin-left: 12px" id="statoBtn" onclick="openStatoSel();" class="deviceFont">Attivo</button>
                </div>
                <div data-dojo-type="dojox.mobile.ListItem"
                    data-dojo-props="label:'Item'">
                    <label style="padding-left: 12px" class="deviceFont">Data Apertura:</label>
                    <button data-dojo-type="dojox.mobile.Button" type="button" style="margin-left: 12px" id="aperturaBtn" onclick="openAperturaSel();" class="deviceFont">-- selezionare --</button>
                </div>
                <div data-dojo-type="dojox.mobile.ListItem"
                    data-dojo-props="label:'Item'">
                    <label style="padding-left: 12px" class="deviceFont">Data Chiusura:</label>
                    <button data-dojo-type="dojox.mobile.Button" type="button" style="margin-left: 12px" id="chiusuraBtn" onclick="openChiusuraSel();" class="deviceFont">-- selezionare --</button>
                </div>
            </div>
            <div data-dojo-type="dojox.mobile.Container" align="center">
                <button data-dojo-type="dojox.mobile.Button" id="searchBtn" onClick="searchOrd();" class="deviceFont">Ricerca Ordini</button>
            </div>
        </div>

        <div data-dojo-type="dojox.mobile.ScrollableView" id="ordListView"
            data-dojo-props="selected:false,scrollDir:'v'" onAfterTransitionIn="setCurrentView('ordListView');">
            <h1 data-dojo-type="dojox.mobile.Heading"
                data-dojo-props="label:'Lista Ordini',back:'Ricerca', moveTo:'orderSearchView'" fixed="top"></h1>
            <div data-dojo-type="dojox.mobile.EdgeToEdgeDataList" id="SearchOrdListETE">
            </div>
        </div>

        <div data-dojo-type="dojox.mobile.ScrollableView" id="orderDetails"
            data-dojo-props="selected:false,scrollDir:'v'" onAfterTransitionIn="setCurrentView('orderDetails');">
            <h1 data-dojo-type="dojox.mobile.Heading"
                data-dojo-props="label:'Dettaglio Ordine',back:'Lista', moveTo:'ordListView'" fixed="top"></h1>
            <div data-dojo-type="dojox.mobile.RoundRect" style="font-size: medium">
                <div data-dojo-type="dojox.mobile.ListItem"
                    style="font-size: small" id="main" data-dojo-props="rightText:''">
                    <label style="margin-left: 12px; color: #0080ff">Ordine N.</label>
                    <label id="numord" style="padding-left: 12px"></label>
                </div>
                <div data-dojo-type="dojox.mobile.ListItem"
                    style="font-size: small" data-dojo-props="variableHeight:true">
                    <table style="margin-left: 8px">
                        <tr><td>
                            <label style="color: #0080ff">Fornitore:</label>
                        </td><td>
                            <label id="fornitore" style="padding-left: 5px"></label>
                        </td></tr>
                    </table>
                </div>
                <div data-dojo-type="dojox.mobile.ListItem"
                    style="font-size: small">
                    <label style="margin-left: 12px; color: #0080ff">Aperto il:</label>
                    <label id="dataAp" style="padding-left: 12px"></label>
                </div>
                <div data-dojo-type="dojox.mobile.ListItem"
                    style="font-size: small">
                    <label style="margin-left: 12px; color: #0080ff">Aperto da:</label>
                    <label id="utenteAp" style="padding-left: 12px"></label>
                </div>
            </div>

            <h2 data-dojo-type="dojox.mobile.RoundRectCategory">Tracking</h2>
            <div data-dojo-type="dojox.mobile.RoundRectDataList" id="tracking" style="font-size: small">
            </div>
            <div data-dojo-type="dojox.mobile.Container"></div>
            <div data-dojo-type="dojox.mobile.RoundRect" style="font-size: small">

                <label style="margin-left: 12px; color: #0080ff; font-weight: bold">Istanza BPM:</label>
                <label id="idIst" style="padding-left: 12px"></label>
            </div>
        </div>

    </div> <!-- fine container destra -->

</div>

<!--application UI goes here-->
<script src="js/initOptions.js"></script>
<script src="js/InstanceMonitor.js"></script>
<script src="js/messages.js"></script> 
```

css:

```
/* Reset CSS */
a, abbr, address, article, aside, audio, b, blockquote, body, canvas, caption, cite, code, dd, del, details, dfn, dialog, div, dl, dt, em, fieldset, figcaption, figure, footer, form, h1, h2, h3, h4, h5, h6, header, hgroup, html, i, iframe, img, ins, kbd, label, legend, li, mark, menu, nav, object, ol, p, pre, q, samp, section, small, span, strong, sub, summary, sup, table, tbody, td, tfoot, th, thead, time, tr, ul, var, video {
margin: 0;
padding: 0;
}

/* Worklight container div */

#content {
height: 460px;
margin: 0 auto;
width: 320px;
}

.lorem {
margin: 0px 0px;
padding: 10px;
color: #000000;
}

#loader {
width:100%; height:100%; margin:0; padding:0;
/*background: -webkit-gradient(linear, left top, left bottom, from(#096093), to(#ffffff)) !important;*/
background: #ffffff !important;
position:absolute;
z-index:999;
}

.loaderShadowDiv {
/*
-webkit-box-shadow: 0px 5px 6px 7px rgba(50, 50, 50, 0.4);
-moz-box-shadow: 0px 5px 6px 7px rgba(50, 50, 50, 0.4);
box-shadow: 0px 5px 6px 7px rgba(50, 50, 50, 0.4);
border-radius: 15px 15px/15px 15px;
*/
width: 90%;
margin: 33% auto;
background-color: white;
font-family: Helvetica;

}

#webLogo {
position: relative;
top: -45px;
width: 90%;
margin: 0px auto;
}

#webLogo IMG {
/*width: 100%;
height: 30px;*/
}

html, body {
height: 100%;
min-height: 100%;
overflow: hidden;
/*position: relative;*/
} 
```

Any help is appreciated,

Enrico

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:02:44.637

这可能与以下问题相同：

[WL 5.0.5 EdgeToEdgeList 第一个元素不在标题下，而是在页面中间](https://stackoverflow.com/questions/15427853/wl-5-0-5-edgetoedgelist-first-element-not-under-the-header-but-in-the-middle-of)

你能试试那里给出的解决方案吗？

# android - Android：当使用 startActivity(intent) 代码执行其他

> ID：15567078
> 
> 赞同：0
> 
> 时间：2013-03-22T09:42:40.450
> 
> 标签：android, android-intent

我可能有一个微不足道的问题，但我无法解决。如果我运行这段代码：

```
Uri packageURI = Uri.parse("package:"+name);
Intent uninstallIntent = new Intent(Intent.ACTION_DELETE, packageURI);
startActivity(uninstallIntent);
boolean esiste = isPackageExists(name);
Log.i("Esiste", "Esiste il packeges? : "+esiste);
if (!esiste) { //code } 
```

一切都很好，但是当执行starActivity（）时，代码会启动应用程序但也会执行检查......我想在返回myapplication时执行检查......帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:48:06.463

由于每个应用程序都在自己的线程中运行，因此您的应用程序在调用删除操作后会继续运行。

您可以在被调用的活动关闭后进行检查，如下所示：
更改`startActivity(uninstallIntent);`为`startActivityForResult(uninstallIntent, 1);`

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == 1){
            boolean esiste = isPackageExists(name);
            Log.i("Esiste", "Esiste il packeges? : "+esiste);
            if (!esiste) { //code }
        }
    } 
```

如果通过`startActivityForResult`Method调用 Intent，`onActivityResult`则从被调用的 Activity 返回后会被调用。该变量`requestCode`用于识别请求。

# css - Images and elements on page not adjusting correctly when zooming

> ID：15567079
> 
> 赞同：0
> 
> 时间：2013-03-22T09:42:40.630
> 
> 标签：css, web

I have constructed 2 diagrams explaining my issue; [http://i.imgur.com/ocu3uyU.jpg](http://i.imgur.com/ocu3uyU.jpg)
[http://i.imgur.com/W734ij4.jpg](http://i.imgur.com/W734ij4.jpg)
I am new to css. I'm basically just trying to get everything on my page to 'stay still' when zooming. However I am having problems with this, elements on my page are adjusting/moving really wierd while zooming. Here is a snippet of my code:

```
table{width:100px;
height:60px;
margin-left:auto;
margin-right:auto;
background-color:white;
color:white;
}

body{
background: url(background.png), black;
background-position:center; 
background-repeat:repeat-y;

color:white;
}

#bannerImage{
text-align:center;
position:relative;
top:-68px;
margin-left:0px;
padding:0px
p

}

#letters{
text-align:center;
position:relative;
top:-178px;

}

audio{                        //example of element moving wierdly
position:absolute;
left:1500px;

}
div { overflow-x: hidden; } 
```

How do I postion things so that they stay still!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:20:53.790

感谢您发布图片以便更好地理解...

与其向左，不如向右

```
audio{
position:absolute;
right:50px;
} 
```

这会做:)

编辑：小提琴理解击球手

```
http://jsfiddle.net/MarmeeK/tsaB8/ 
```

# ftp - 用于复制 ftp 目录的文件和子文件夹的 FTP 命令

> ID：15567085
> 
> 赞同：2
> 
> 时间：2013-03-22T09:43:12.600
> 
> 标签：ftp, get, copy, ftp-client

如何在 Windows 操作系统中使用 ftp 命令下载或获取 ftp 文件夹的所有文件和子文件夹？如果我使用mget，那么它将复制ftp文件夹中的所有文件，但我想下载所有文件和子文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:47:06.240

在 ftp 实现中没有用于递归 slurp 漏洞服务器的显式命令。这种功能的实现必须在客户端。像 Filezilla 这样的 GUI FTP 客户端具有此功能，还有带有“mirror”命令的 cli linux 客户端 lftp。

问候。

# javascript - 使用jquery从html表生成excel表

> ID：15567086
> 
> 赞同：6
> 
> 时间：2013-03-22T09:43:12.857
> 
> 标签：javascript, jquery, html, excel

一旦用户单击按钮，我想生成一个 excel 表。基本上我想做这里讨论的事情

[如何将 html 表格值传递给 excel 工作表单元格](https://stackoverflow.com/questions/6517106/how-to-pass-html-table-values-to-excel-sheet-cells) （Kalle H. Väravas 答案）

[将 HTML 表格导出到 Excel 的 JavaScript](https://stackoverflow.com/questions/5401351/javascript-to-export-html-tables-to-excel?rq=1)

但不知何故，当我点击按钮时什么也没有发生。我正在使用 Mozilla 浏览器。我的代码需要启用 ActiveXObject。我需要做一些额外的事情来完成它吗？?

我为测试创建了这个小提琴。如果这可行，我将尝试我的真实代码。如果这对你有用，那么也请告诉我。谢谢

[小提琴](http://jsfiddle.net/LBDwP/1/)

代码 ：

JS：

```
<script type="text/javascript">
    function CreateExcelSheet() {
        var i, j, str,
                myTable = document.getElementById('mytable'),
                rowCount = myTable.rows.length,
                excel = new ActiveXObject('Excel.Application');// Activates Excel
        excel.Workbooks.Add(); // Opens a new Workbook
        excel.Application.Visible = true; // Shows Excel on the screen
        for (i = 0; i < rowCount; i++) {
            for (j = 0; j < myTable.rows[i].cells.length; j++) {
                str = myTable.rows[i].cells[j].innerText;
                excel.ActiveSheet.Cells(i + 1, j + 1).Value = str; // Writes to the sheet
            }
        }
        return;
    }
</script> 
```

网页：

```
<table id ="myTable" >
            <tr>
                <td>1</td>
                <td>Jan</td>
                <td>01/04/2012</td>
                <td>Approved</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Feb</td>
                <td>01/04/2012</td>
                <td>Approved</td>
            </tr>
        </table>
        <form>
            <input type="button" onclick="CreateExcelSheet();" value="Create Excel Sheet" >
        </form> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-22T11:03:02.573

这里是答案：[Export dynamic html table to excel in javascript in firefox browser](https://stackoverflow.com/questions/6955627/export-dynamic-html-table-to-excel-in-javascript-in-firefox-browser) by insin

```
var tableToExcel = (function() {
      var uri = 'data:application/vnd.ms-excel;base64,'
        , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
        , base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
        , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
      return function(table, name) {
        if (!table.nodeType) table = document.getElementById(table)
        var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
        window.location.href = uri + base64(format(template, ctx))
      }
    })() 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-07-14T12:50:11.617

要回答有关 IE 的问题（由于声誉限制，我无法在评论框中回答），Sharun 发布的上述代码不适用于 IE 10+（“权限被拒绝”错误）。这是一个适用于 IE 10+ 以及旧版本的 IE、Chrome 和 FF 的代码段：

```
var TableToExcel = (function () {
    var uri = 'data:application/vnd.ms-excel;base64,'
    , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table cellspacing="0" rules="rows" border="1" style="color:Black;background-color:White;border-color:#CCCCCC;border-width:1px;border-style:None;width:100%;border-collapse:collapse;font-size:9pt;text-align:center;">{table}</table></body></html>'
    , base64 = function (s) { return window.btoa(unescape(encodeURIComponent(s))) }
    , format = function (s, c) { return s.replace(/{(\w+)}/g, function (m, p) { return c[p]; }) }
    return function (table, name) {
        if (!table.nodeType) table = document.getElementById(table)
        var ctx = { worksheet: name || 'Worksheet', table: table.innerHTML }
        if (navigator.msSaveBlob) {
            var blob = new Blob([format(template, ctx)], { type: 'application/vnd.ms-excel', endings: 'native' });
            navigator.msSaveBlob(blob, 'export.xls')
        } else {
            window.location.href = uri + base64(format(template, ctx))
        }
    }
})() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-23T05:52:44.487

```
 $("#btnExport").click(function(e) {
              e.preventDefault();

            //getting data from table
            var data_type = 'data:application/vnd.ms-excel';
            var table_div = document.getElementById('table_wrapper');//table_wrapper is table id
            var table_html = table_div.outerHTML.replace(/ /g, '%20');

            var a = document.createElement('a');
            a.href = data_type + ', ' + table_html;
            a.download = 'table_name_' + Math.floor((Math.random() * 9999999) + 1000000) + '.xls';
            a.click();
          }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-15T20:46:37.437

你可以使用这个好的库：[https ://github.com/jmaister/excellentexport](https://github.com/jmaister/excellentexport)

# asp.net-mvc - EditorFor 的 Html(5) 属性

> ID：15567088
> 
> 赞同：7
> 
> 时间：2013-03-22T09:43:18.607
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html, razor

我知道这已经讨论过很多次了。

我想用

```
@Html.EditorFor(u => u.Password, new { required = "required" }) 
```

不幸的是，默认情况下这是不可能的，因为 EditorFor 会覆盖 Html 属性。

我不想使用 TextBoxFor，因为我希望根据 DisplayFormat 属性对值进行格式化。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T09:57:21.043

您可以为字符串类型 ( ) 编写自定义编辑器模板`~/Views/Shared/EditorTemplates/string.cshtml`：

```
@Html.TextBox(
    "", 
    ViewData.TemplateInfo.FormattedModelValue,
    ViewData
) 
```

接着：

```
@Html.EditorFor(u => u.Password, new { required = "required" }) 
```

将按预期工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T20:02:31.253

不确定这是一个选项，但您可以将 [Required] 作为模型上的属性装饰器。

# c# - 非字符串类型的反射

> ID：15567089
> 
> 赞同：0
> 
> 时间：2013-03-22T09:43:18.627
> 
> 标签：c#, reflection, strong-typing

给定以下代码..

```
public static class Simulate
{
    public static bool Boolean(bool b)
    {
        return b;
    }

} 
```

我想检查表达式是否使用这个静态函数。我想避免[字符串类型的](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)反射，以使代码对重构更友好，这就是为什么我要尝试执行以下操作，类似于[this](http://thecodejunkie.com/2010/04/strongly-typed-reflection-with-memberof.html)。我尝试了以下代码：

```
protected virtual Expression VisitMethodCall(MethodCallExpression m)
{

    if (m.Method == Simulate.Boolean) 
```

但这不起作用，所以我尝试了这个：

```
Expression<Action> fb = () => Simulate.Boolean(true);

string booleanName = fb.Body.ToString();

if (m.Method.DeclaringType == typeof(Simulate))
{
     if (m.Method.Name == booleanName) 
```

然而，如预期的那样，上面的代码返回**Boolean(true)**。但是有什么办法我只能得到**布尔**字符串吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:49:40.780

您可以`MethodInfo`从表达式的主体访问，然后访问它的名称，它将返回一个字符串**Boolean**：

```
Expression<Action> fb = () => Simulate.Boolean(true);

var call = fb.Body as MethodCallExpression;

if (call != null)
    Console.WriteLine (call.Method.Name); //prints "Boolean" as a string 
```

# php - 未收到来自 php JQuery 的响应

> ID：15567091
> 
> 赞同：0
> 
> 时间：2013-03-22T09:43:20.430
> 
> 标签：php, jquery

我正在尝试接收来自 php 的响应，该响应以以下格式返回响应：

PHP 响应

```
 response=1 
```

查询

```
$.get('getstate.php', {
    email: $('#game-email').val(),
    country: 'DE',
    lang: lang,
    source: 'promotion'
}, function (data) {
    console.log(data);
}); 
```

当我在浏览器中加载 php 时，它会在浏览器中给出正确的响应：

getstate.php?email=test@gmail.com&country=DE

但是当我尝试接收响应并显示变量数据中收到的值时，什么也没有出现。我可能做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:45:47.593

您必须使用 jquery 实用程序函数，例如`$.get`或`$.ajax`type as `GET`。

如果您能够在浏览器 url 中获得结果，那么结果将来自`GET`请求，并且在`jquery`代码中您正在发出发布请求。

**更新评论**

> “Access-Control-Allow-Origin 不允许 Origin null。”

当您可能正在向另一个域中的页面发出 ajax 请求时，或者当您通过双击直接加载页面而不通过主机 url 时，就会出现此问题。

即，而不是`file:///`在 url 地址中，您应该具有与您请求的 php 页面相同的域名。

## 如果您要进行跨域 AJAX 请求

如果您的 ajax 请求目标页面位于另一个域中，您可以执行跨域 ajax 请求

你应该设置

```
Access-Control-Allow-Origin: * 
```

托管 ajax 目标页面的服务器上的标头。将该值设置为`*`意味着它将允许来自任何域的请求，因此它使安全性变得可敬，如此[处](https://code.google.com/p/html5security/wiki/CrossOriginRequestSecurity)所述。

同样在客户端，您可以使用 Jquery.ajax 实用程序函数并将`crossDomain`设置设置为 true。这也将存在在 IE 版本中不起作用的问题。

请参阅一些描述此问题的[相关问题。](https://stackoverflow.com/questions/3362474/jquery-ajax-fails-in-ie-on-cross-domain-calls)

[这篇](http://forum.jquery.com/topic/cross-domain-ajax-and-ie)关于 jquery docs 的文章讨论了同样的问题，并通过包含一个我之前尝试过并开始工作的 js 修复文件提到了一个建议。

下面是一些相关链接，用于在各种服务器中设置 CORS 支持并在客户端进行 ajax 调用。

[向我的服务器添加 CORS 支持](http://enable-cors.org/server.html)

[在 JavaScript 中使用 CORS](http://enable-cors.org/client.html)

# php - 如何在 Codeigniter 中检测创建、更新、删除查询是否成功

> ID：15567097
> 
> 赞同：1
> 
> 时间：2013-03-22T09:43:36.930
> 
> 标签：php, sql-server, codeigniter

我目前正在编写这样的控制器方法：

```
public function delete($user_id) {
    if ($this->input->server('REQUEST_METHOD')=='POST') {
        $result = $this->Crm_user_model->update($user_id,
                                                array('deleted'=>true));
        if($result) {
            add_flash_message('info', 'deleted');
        } else {
            add_flash_message('alert', 'can not delete');
        }
        //redirect('user/view');
    }
} 
```

但是所有结果都没有返回，即使数据库（mssql）被更改。如何知道更新查询是否成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:54:08.343

在`crm_user_model->update()`，返回`true`或`false`取决于 CodeIgniter`update()`函数的输出：

```
if ($this->db->update('mytable', $mydata)) {
    // Do some stuff
    return true;
} else {
    // Do some stuff
    return false;
} 
```

或者，如果您不需要在模型中执行任何其他操作，只需执行以下操作：

`return $this->db->update('mytable', $mydata);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-19T23:41:21.807

我有一个担忧和一些建议。

1.  **控制器**：您不应该通过 url将`$user_id`值传递给您的控制器。`delete`（例如`site/ci/delete/99`）每当您将数据“写入”到数据库/服务器时，您应该只`$_POST`用于将数据传输到服务器端。

    ```
    public function softDeleteUser(): void
    {
        $userId = $this->input->post('user_id');
        if (!$userId) {
            add_flash_message('alert', 'Required data not supplied');
        } elseif (!$this->Crm_user_model->update($userId, ['deleted' => true])) {
            add_flash_message('alert', 'Failed to soft delete user');
        } else {
            add_flash_message('info', 'Soft deleted user');
        }
    } 
    ```

    如果没有`user_id`POST'ed，那么`$userId`将被声明为`null`.

    如果您的数据库模式不能存储布尔值 ( `true`)，那么通常使用`1`和`0`作为布尔等效项。

    在构建条件块时，我更喜欢在成功的结果之前写所有负面/错误/不成功的结果。

    建议在允许软删除用户之前进行用户身份验证/授权检查，以便只有特权用户有权执行此操作。

2.  **模型**：您的查询应该仅在模型中完成。因为查询可能没有语法错误，但也没有对数据库进行任何更改，所以您必须在两点检查过程。

    考虑以下情况：

    1.  传递给控制器​​的`$userId`那个在数据库中不存在，或者
    2.  包含 的行`$userId`已经“软删除”。

    在这两种情况下，查询都不会失败，但不会有受影响的行。这些是您的脚本与*实际*更改更新区分开来的相关事件。

    ```
    public function update(int $userId, array $newData): int
    {
        // ensure that no one can ever modify the user_id column value
        unset($newData['user_id']);

        if ($this->db->update('user_tablename', $newData, ['user_id' => $userId])) {
            $affectedRows = $this->db->affected_rows();
            if ($affectedRows) {
                // potentially log successful change if your system keeps track of change history
                // $this->Log->userChange($userId, $newData);
            }
            return $affectedRows;
        }
        return 0;
    } 
    ```

    如果有语法错误，它将出现在您的错误日志中。

# java - 将自定义 EllipsizingTextView 添加到布局

> ID：15567098
> 
> 赞同：0
> 
> 时间：2013-03-22T09:43:42.927
> 
> 标签：java, android

我遇到了android只支持用2行省略TextView的问题。我在这里找到了解决方案[android ellipsize multiline textview](https://stackoverflow.com/questions/2160619/android-ellipsize-multiline-textview)

但是我现在我的文本视图显示得很奇怪，所以不是：

```
This is a test... 
```

我的 TextView 显示

```
This
is
a 
```

此外，EllipsizingTextView 似乎会影响同一布局中的另一个 TextView，该布局尚未被声明为 EllipsizingTextView，而是常规的 TextView。无论如何，这是有问题的代码：

```
@Override
public View getView(int position, View itemView, ViewGroup parent) {
    View v = itemView;
    if (v == null) {
        LayoutInflater vi = (LayoutInflater)parent.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        v = vi.inflate(R.layout.list_item, null);
        LinearLayout layout = (LinearLayout) v.findViewById(R.id.linearLayout1);
        EllipsizingTextView desc = new EllipsizingTextView(parent.getContext());
        desc.setMaxLines(3);
        layout.addView(desc);
        ViewHolder vh = new ViewHolder();
        vh.label = (TextView) v.findViewById(R.id.label);
        vh.img = (ImageView) v.findViewById(R.id.img);
        vh.desc = (EllipsizingTextView) desc;
        vh.dateAdded = (TextView) v.findViewById(R.id.tvDateAdded);
        v.setTag(vh);
    } 
```

和 XML：

```
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_marginRight="0px"
    android:orientation="vertical" >

    <TextView android:text="@+id/TextView01" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:id="@+id/label"
    android:textSize="16sp" android:gravity="center_vertical" android:textColor="#000" android:singleLine="true"
    />
     <TextView
        android:id="@+id/tvDateAdded"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#000"
        android:textSize="13sp"

        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:11:48.363

好的，通过删除我以编程方式添加 ElipsizingTextView 的语句并通过 XML 添加视图，元素名称为`<com.example.EllipsizingTextView`

任何人都知道我在以编程方式添加视图时做错了什么？

# azure - 无法从本地计算机连接到 SQL Azure

> ID：15567099
> 
> 赞同：0
> 
> 时间：2013-03-22T09:43:45.423
> 
> 标签：azure, ado.net, connection-string, azure-sql-database

我制作了一个基于 Fluent NHibernate 的简单 SQL 生成器 XAML 应用程序，它允许我生成 DDL 以在数据库上运行。使用本地 MySQL 设置它可以正常工作。

我现在想在 SQL Azure 上运行它。

*   我创建了一个网站，将在管理门户上托管 NH 应用程序。查看！
*   我已经创建了 NH 应用程序使用的数据库。查看！
*   我已设置防火墙规则以允许我的 IP 地址连接到 SQL Azure。查看！
*   我尝试连接到 Azure 的官方数据库管理门户并使用我的凭据登录。查看！
*   我尝试使用正确的连接字符串（仔细检查密码）运行 NHibernate 模式生成器，但出现错误。繁荣！

错误（匿名）如下

```
---------------------------

---------------------------
Cannot open database "[MyDb]" requested by the login. The login failed.

Login failed for user 'mydblogin'.

This session has been assigned a tracing ID of '{{guid}}'.  Provide this tracing ID to customer support when you need assistance.
---------------------------
OK   
--------------------------- 
```

代码：

```
PersistenceConfigurer persistenceConfigurer = MsSqlConfiguration.MsSql2008
    .Dialect<MsSqlAzure2008Dialect>()
    .Driver<SqlClientDriver>()
    .FormatSql()
    .ShowSql()
    .ConnectionString(connectionString);

FluentConfiguration fc = Fluently.Configure()
    .Database(persistenceConfigurer)
    .ExposeConfiguration(
        cfg => cfg.SetProperty("hbm2ddl.keywords", "auto-quote")
                    .SetProperty("hbm2ddl.auto", "none"))
    .Mappings(
    m => m.FluentMappings.AddFromAssemblyOf<NHibernateFactory>()
    .Conventions.AddFromAssemblyOf<NHibernateFactory>());
Configuration ret = fc.BuildConfiguration();
SchemaMetadataUpdater.QuoteTableAndColumns(ret); 
```

连接字符串（混淆）

```
Server=tcp:dbhost.database.windows.net,1433;Database=[MyDb];User ID=login@dbhost;Password=password;Trusted_Connection=False;Encrypt=True;Connection Timeout=30; 
```

例外是`System.Data.SqlClient.SqlException (0x80131904)`

堆栈跟踪

```
 in System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   in System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   in System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   in System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   in System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   in System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   in System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   in System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   in System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions)
   in System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   in System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   in System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnectionOptions userOptions)
   in System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnectionOptions userOptions)
   in System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   in System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   in System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   in System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   in System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   in System.Data.SqlClient.SqlConnection.Open()
   in NHibernate.Connection.DriverConnectionProvider.GetConnection()
   in NHibernate.Tool.hbm2ddl.ManagedProviderConnectionHelper.Prepare()
   in NHibernate.Tool.hbm2ddl.SchemaMetadataUpdater.GetReservedWords(Dialect dialect, IConnectionHelper connectionHelper)
   in NHibernate.Tool.hbm2ddl.SchemaMetadataUpdater.GetReservedWords(IDictionary`2 cfgProperties)
   in NHibernate.Tool.hbm2ddl.SchemaMetadataUpdater.QuoteTableAndColumns(Configuration configuration)
   in HbmSchemaExporter.NHibernateManager.BuildNHConfig(String connectionString, DbType dbType, Dialect& requiredDialect)
   in HbmSchemaExporter.NHibernateManager.GenerateSql(MainWindowViewModel viewModel)
   in HbmSchemaExporter.MainWindow.btnGenerateSql_Click(Object sender, RoutedEventArgs e) 
```

问题很明显：代码或配置有什么问题？我确定密码输入正确，我已经复制了连接字符串的其余部分并替换了密码占位符。我已经设置了防火墙规则和没有防火墙规则的 AFAIK，你不能使用[https://yourdbhost.database.windows.net/](https://yourdbhost.database.windows.net/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:39:51.030

几个小时以来，我一直在寻找这个确切问题的答案，上面的问题评论使我从 Azure 管理门户提供的连接字符串中删除了方括号。

连接成功，没有方括号。我的连接字符串现在是（用真实细节替换粗体部分）：

Server=tcp: **SERVER** .database.windows.net,1433;Database= **MYDB** ;User ID= **USER@SERVER** ;Password= **PASSWORD** ;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:23:12.567

信不信由你，这个连接字符串与对 FNH 代码的轻微修改一起工作（只有在更改 conn 字符串后它才开始工作）

```
Data Source=xxxxx.database.windows.net;Initial Catalog=MyDb;Persist Security Info=True;User ID=zshop;Password=xxxxxxx 
```

而不是使用`Database`我不得不使用`Initial Catalog`and `Persist Security Info`。数据库名称不带括号

由于错误报告登录失败，我认为罪魁祸首是`Persist Security Info`.

现在我有另一个问题要在另一个问题中讨论

# sql-server - 如何跟踪 DDL 语句的数据库更改？

> ID：15567103
> 
> 赞同：2
> 
> 时间：2013-03-22T09:43:51.393
> 
> 标签：sql-server

我在数据库中进行了更改，但我已经有旧数据库并在新数据库中进行了更改，以便我如何识别新的数据库更改。

有没有人知道使用 sql server 与此相关的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:49:57.020

好问题哈迪克

甚至我也面临同样的问题并得到了很好的解决方案。

您可以使用的只是 sqlserver 中的 Eventdata() 函数。它提供特定数据库更改的所有信息，包括 xml 格式的 sqlcommands。有关更多信息，您可以查看此链接 [http://msdn.microsoft.com/en-IN/library/ms173781.aspx](http://msdn.microsoft.com/en-IN/library/ms173781.aspx)

在这里你可以这样做

```
DECLARE @data XML
SET @data = EVENTDATA()
INSERT INTO dbo.AdministratorLog(databasename, eventtype,objectname, objecttype,  sqlcommand, loginname)
VALUES(@data.value('(/EVENT_INSTANCE/DatabaseName)[1]', 'varchar(256)'),
@data.value('(/EVENT_INSTANCE/EventType)[1]', 'varchar(50)'),  
@data.value('(/EVENT_INSTANCE/ObjectName)[1]', 'varchar(256)'), 
@data.value('(/EVENT_INSTANCE/ObjectType)[1]', 'varchar(25)'), 
@data.value('(/EVENT_INSTANCE/TSQLCommand)[1]', 'varchar(max)'), 
@data.value('(/EVENT_INSTANCE/LoginName)[1]', 'varchar(256)')
) 
```

# php - PHP根据文件中的文本替换文本

> ID：15567106
> 
> 赞同：1
> 
> 时间：2013-03-22T09:43:57.383
> 
> 标签：php, text, replace

我有 textfile.txt：

```
aaa
bbb
...
zzz 
```

我想从 textfile.txt 中删除一些基于文本的文本

```
ex: we have aaa files ==> we have files 
```

我的代码仍然不起作用：

```
<?php
$fp = @fopen("textFile.txt", 'r'); 
$array = explode("\n", fread($fp, filesize("textFile.txt")));

if (isset($_POST['btcari'])){    
    print_r(str_ireplace($array,"", $_POST['tateks']));
}
?> 
```

谢谢你的感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:57:53.253

首先读取文件并更改其中的文本。然后将新内容写入文件。

```
$fp = @fopen("textFile.txt", 'r'); 
$array = explode("\n", fread($fp, filesize("textFile.txt")));
fclose($fp);

foreach($array as $text) {

$textall .= str_replace("aaa", "", $text);

}

$fh = fopen("textFile.txt", "w") or die("Could not open log file.");
fwrite($fh, $textall) or die("Could not write file!");
fclose($fh); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:00:07.467

您可以使用 preg_replace

```
 $replace = "/".$_POST['tateks']."/";
    $array = preg_replace($replace , '' , $array);
    print_r($array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:01:14.243

您似乎使用了错误的 post 参数进行替换。我尝试了代码，如果您使用 $_POST[btcari'] 而不是 $_POST['tateks']，它可以正常工作。

```
<?php
$fp = @fopen("textFile.txt", 'r'); 
$array = explode("\n", fread($fp, filesize("textFile.txt")));

if (isset($_POST['btcari'])){    
    print_r(str_ireplace($array,"", $_POST['btcari']));
}
?> 
```

现在，如果我发送一个名为“btcari”的帖子参数，它会正确输出替换的文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:03:29.050

尝试这个：

```
$array = file("textFile.txt");

function _trim( &$value, $key ) {
    $value = trim( $value );
}

// remove the newlines and extra spacing
array_walk( $array, '_trim' );

$replaceArray = array_fill( 0, count($array), '' );

if( isset( $_POST[ 'btcari' ] ) ) {
    echo str_replace( $array, $replaceArray, $_POST[ 'tateks' ] );
} 
```

希望能帮助到你。

# node.js - Meteor 和 Cloud9：节点 symlinkSync 不起作用？

> ID：15567108
> 
> 赞同：0
> 
> 时间：2013-03-22T09:44:07.887
> 
> 标签：node.js, meteor, cloud9-ide

我正在尝试使用 c9.io 开发 Meteor 应用程序。我想使用以下方法设置 symlinkSync：

```
var require = __meteor_bootstrap__.require;
 var fs = require('fs');

 fs.symlinkSync('../../../../_storage', '.meteor/local/build/static/s'); 
```

我得到：错误：ENOENT，没有这样的文件或目录'.meteor/local/build/static/s'

确实 static/s 文件夹不存在。但是在我本地的 Meteor 安装上，这工作得很好。如果我引用一个已经存在的文件夹，那么它会出错：文件夹已经存在！

使用 c9 构建 Meteor 应用程序的前景令人震惊！让这个工作，有人吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:46:36.857

我完全同意 c9 + Meteor = awesomeness。但是我在这个设置中遇到了很多问题，包括与你在这里的问题类似的问题。

我认为问题出在`fs`. 由于您实际上并没有完全访问您正在使用的服务器，`fs`因此功能非常有限。

目前，我通常将 c9 用于某些类型的开发。据我所见，它还没有为一切做好准备。我用它做基本的东西，把大男孩的东西留给大男孩机器。

# ios - 方法调用后重新加载tableView中的数据

> ID：15567109
> 
> 赞同：-2
> 
> 时间：2013-03-22T09:44:08.250
> 
> 标签：ios, uitableview, reloaddata

我有从服务器获取数据以在表中使用的方法问题是，如果数组中已有 3 个项目，则在获取数据时，然后在方法调用后变为 5，我们重新加载数据，然后它会重复记录

```
[self saveData];
[self setUpData];
[tableView reloadData];

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1 ;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    appDelegate = (MultipleDetailViewsWithNavigatorAppDelegate *)[[UIApplication sharedApplication] delegate];

    int count=[resultArray count];

    NSLog(@"resultArry Row Counts is %d",count);

    return [resultArray count];

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    return 70.00;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CustomCellIdentifier = @"CustomCellIdentifier";

    CustomCellF *cell = (CustomCellF *)[tableView
                                        dequeueReusableCellWithIdentifier: CustomCellIdentifier];

    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomCellF"
                                                     owner:self options:nil];
        for(id oneObject in nib)
            if ([oneObject isKindOfClass:[CustomCellF class]])
                cell = (CustomCellF *)oneObject;
        cell.selectionStyle=UITableViewCellSelectionStyleNone;
    }

    appDelegate = (MultipleDetailViewsWithNavigatorAppDelegate *)[[UIApplication sharedApplication] delegate];
    FeedbackData *theCellData = [resultArray objectAtIndex:indexPath.row];

    cell.theTitle.text =theCellData.user_Feedback;

    NSString*type=theCellData.user_Rating;

    if ([type isEqualToString:@"One Star"]) {

        cell.theCellImage1.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage2.image=[UIImage imageNamed:@"stargray.png"];
        cell.theCellImage3.image=[UIImage imageNamed:@"stargray.png"];
        cell.theCellImage4.image=[UIImage imageNamed:@"stargray.png"];
        cell.theCellImage5.image=[UIImage imageNamed:@"stargray.png"];
    }
    else if ([type isEqualToString:@"Two Stars"]) {

        cell.theCellImage1.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage2.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage3.image=[UIImage imageNamed:@"stargray.png"];
        cell.theCellImage4.image=[UIImage imageNamed:@"stargray.png"];
        cell.theCellImage5.image=[UIImage imageNamed:@"stargray.png"];
    }
    else if ([type isEqualToString:@"Three Stars"]) {

        cell.theCellImage1.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage2.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage3.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage4.image=[UIImage imageNamed:@"stargray.png"];
        cell.theCellImage5.image=[UIImage imageNamed:@"stargray.png"];
    }
    else if ([type isEqualToString:@"Four Stars"]) {

        cell.theCellImage1.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage2.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage3.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage4.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage5.image=[UIImage imageNamed:@"stargray.png"];
    }
    else {

        cell.theCellImage1.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage2.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage3.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage4.image=[UIImage imageNamed:@"starblue.png"];
        cell.theCellImage5.image=[UIImage imageNamed:@"starblue.png"];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:46:57.907

如果您想重新填充数组，请先将它们设为 nil 以避免您现在面临的情况..

```
if(dataArray!=nil){
dataArray=nil;
dataArray=[[NSMutableData alloc]init];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:48:12.070

在调用方法 (setUpData) 时，您将获得两次相同的数据，或者在其中添加新数据。

您需要它来删除所有旧数据并使用新数据集，为此您需要从数组中删除/释放所有数据并向其中添加新对象。

在方法中（如果使用 ARC）

```
-(void) setUpData{
   if(yourArray!=nil){
         yourArray=nil;
         yourArray=[NSMutableArray new];
         //fill data again here
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:46:09.950

首先释放你的数组：

```
[dataArray release]; 
```

或者如果你使用`Arc`then

```
[dataArray removeAllObjects]; 
```

然后检查并再次填写

```
if(dataArray!=nil){
    dataArray=nil;
    dataArray=[[NSMutableData alloc]init];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:01:17.207

如果你想重新填充你的数组，那么首先你必须做空。

```
 if(resultArray.count >0)
     {
              [resultArray removeAllObjects];
      } 
```

然后重新填充数组。

# java - Java根据另一个列表对列表进行排序

> ID：15567111
> 
> 赞同：0
> 
> 时间：2013-03-22T09:44:13.543
> 
> 标签：java, sorting, artificial-intelligence

我有以下类型的 ArrayList：

```
class Move
{
    int from, to;
} 
```

from 属性总是有一个值。如果未设置 to 属性，则它的值为 -1。我有以下数组：

```
int[][] history = new int[50][50]; 
```

其中尺寸对应于移动类的“从”和“到”。在我的搜索功能中，根据我需要做的某些条件：

```
List<move> moves = board.getMoves();
for (int i = 0; i < moves.size(); i++)
    history[move.from][move.to]++; 
```

因为 move.to 也可能是-1，我应该增加二维数组 1 的维度然后执行：

```
history[move.from+1][move.to+]++; 
```

另外，基于上面的移动列表和历史数组，我需要根据相应历史索引的计数器对移动列表进行降序排序。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:50:54.603

您可以将[Collections.sort(List, Comparator)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)与 Comparator 的实现一起使用，它将按照您的意愿进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:56:07.563

是的，您可以制作使用历史数组的比较器。例如，我根据另一个数组对我的 int 列表进行排序`counts`。

```
public static void main(String[] args) {
    List<Integer> list = new ArrayList<>();
    list.addAll(Arrays.asList(new Integer[]{0, 1, 2, 3, 4, 5}));
    final int[] counts = new int[] {3, 4, 1, 7, 0, 1};

    Collections.sort(list, new Comparator<Integer>() {

        @Override
        public int compare(Integer arg0, Integer arg1) {
            return counts[arg1] - counts[arg0];
        }
    });

    System.out.println(list);
} 
```

输出：`[3, 1, 0, 2, 5, 4]`

你`compare`会是这样的：

```
@Override
public int compare(Move move0, Move move2) {
    return history[move1.from+1][move1.to] - history[move0.from+1][move0.to];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:50:38.073

您可以将历史记录设置为 HashMap 或单独的类以使这更容易。但是因为您还希望能够根据频率对历史进行排序，所以我会推荐一个 History 类：

```
class Move {

   int from, to;

   @Override
   public int hashCode() {
      return from + (to * 100);
   }

   @Override
   public boolean equals(Object o) {
      return (o instanceof Move
              && ((Move) o).from == from
              && ((Move) o).to == to);
   }
}

class History extends Move implements Comparable<History> {

   int frequency;

   public History(Move m) {
      from = m.from;
      to = m.to;
      frequency = 1;
   }

   public void increment() {
      frequency += 1;
   }

   public int compareTo(History h) {
      // to be able to sort it in a TreeSet descending on frequency
      // note that it is not resorted if you change frequencies, so 
      // build the set, and then convert it to a TreeSet afterwards.
      return (frequency == h.frequency) ? 1 : (h.frequency - frequency);
   }
} 
```

然后创建一个 HashMap 来快速填充历史，并将其转换成 TreeSet 进行排序：

```
 List<Move> moves = board.getMoves();
  HashMap<History, History> fillTable = new HashMap<History, History>();
  for (Move m : moves) {
     History h = fillTable.get(m);
     if (h == null) {
        h = new History(m);
        fillTable.put(h, h);
     } else {
        h.increment();
     }
  }
  TreeSet<History> sorted = new TreeSet<History>(fillTable.values());
  .... ready to use 
```

# javascript - angularjs将绑定变量分配给html标签属性

> ID：15567113
> 
> 赞同：0
> 
> 时间：2013-03-22T09:44:14.433
> 
> 标签：javascript, angularjs

我正在[阅读官方 angularjs 网站中给出的 Angularjs tuts 和文档。](http://docs.angularjs.org/tutorial/step_04)

这里我们添加一个选择框进行排序，像这样

```
 <select ng-model="orderProp">
   <option value="name">Alphabetical</option>
   <option value="age">Newest</option>
  </select> 
```

在控制器中，我们分配`$scope.orderProp = "age"`This works fine 和 'Newest' 将是默认选择选项。

然后我尝试将订单项放入模型并像这样使用 ng-repeat 填充选择框。

```
 <select ng-model="orderProp">
    <option ng-repeat="orderby in orderProperties" value="{{orderby.criteria}}">{{orderby.property}}</option>
  </select> 
```

在哪里：

**orderProp**模型是：

```
function PhoneListCtrl($scope){

    $(document).ready($scope.orderProp = "age");

        $scope.orderProperties = [
            {"property":"Alphabetical","criteria":"name"},
            {"property":"Newest","criteria":"age"}
        ];
} 
```

在 dom 我可以看到`value="name"`and `value="age"`。但是这次默认值没有设置为“最新”。我不明白为什么硬编码`value="age"`可以工作，而`value="{{orderby.criteria}}"`不能。任何人都可以请指导我完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:20:53.330

您`select`以错误的方式使用：

```
<select ng-model="orderProp" 
    ng-options="orderby.criteria as orderby.property for orderby in orderProperties">
</select> 
```

[http://docs.angularjs.org/api/ng.directive:select](http://docs.angularjs.org/api/ng.directive:select)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:20:54.523

您应该使用[`ng-option`](http://docs.angularjs.org/api/ng.directive%3aselect)来填充选择。

# ios - 在标签栏上使用 pushViewController 加载页面

> ID：15567115
> 
> 赞同：0
> 
> 时间：2013-03-22T09:44:19.813
> 
> 标签：ios, objective-c, uinavigationcontroller, uitabbarcontroller, uitabbar

我有带有标签栏按钮的 UIViewController 以及导航栏和导航项，当我按下导航项中的按钮时，我想加载一个视图，我不知道如何在标签栏上加载这个视图，

你能帮帮我吗，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:11:06.553

您是说在导航中推送新控制器时要隐藏标签栏吗？

如果真实。UIViewController 类中有一个属性 hidesBottomBarWhenPushed。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:48:38.763

```
// Instead of adding ViewController to TabbarController, add NavigationControllers.
// Eg.

UINavigationController *NavController = [[UINavigationController alloc] initWithRootViewController:_viewCtrl1];
[watchListNavController.navigationBar setTintColor:[UIColor blackColor]];

_tabC = [[UITabBarController alloc] init];
_tabCt.viewControllers = [NSArray arrayWithObjects:NavController,_viewCtrl2,_viewCtrl3, nil];

// Now you can use Push and Pop In your _viewCtrl1\. 
// Do same with all the viewController 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:51:00.807

```
 -(IBAction) infoPage:(id)sender
      {

       InfoCtrol *i = [[InfoCtrol alloc] initWithNibName:@"InfoCtrol" bundle:nil]; 
       [self.navigationController pushViewController:i animated:YES];

      } 
```

这将加载 InfoCtrol 控制器并将 xib 中的 Touch UpInside 事件设置为 infoPage 方法

# linux - Shell 脚本：在 Ubuntu linux 下并行化 bash 脚本中的命令

> ID：15567122
> 
> 赞同：2
> 
> 时间：2013-03-22T09:44:40.443
> 
> 标签：linux, multithreading, bash, shell, ubuntu

我正在创建一个 bash 脚本来无损压缩 jpeg 和 png 文件，因此我在 Ubuntu 下使用了两个名为*jpegoptim*和*optipng*的包。A 将使用带有**2 或 4 个核心**处理器的脚本。我想使用我的 CPU 的全部容量。

问题是*optipng*默认不支持多线程（它只使用一个 CPU 内核），所以我决定启动**2 或 4 个并行进程**来更快地压缩图像。我已经将图像文件排序为 4 个几乎相等的数组（基于像素数），现在我需要并行运行这些进程。

我正在尝试将进程与`&`命令末尾的字符并行化，但它不能并行完成工作。

```
optipngout=$(optipng -$pnglevel -dir $outdir ${threaddata_1[@]} &)
optipngout=$(optipng -$pnglevel -dir $outdir ${threaddata_2[@]} &)
optipngout=$(optipng -$pnglevel -dir $outdir ${threaddata_3[@]} &)
optipngout=$(optipng -$pnglevel -dir $outdir ${threaddata_4[@]} &) 
```

我必须捕捉命令的输出，所以我认为问题出在 $() 结构上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:08:34.667

看看[Gnu 并行](http://www.gnu.org/software/parallel/)。它使您只需对现有脚本进行少量修改即可做您想做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T12:00:17.563

`taskset`我用and`&`命令解决了我的问题。感谢[@jedwards](https://stackoverflow.com/users/736937/jedwards)

最终代码如下所示：

```
outstr=$(taskset 0xFFFFFFFF optipng -$pnglevel -dir $outdir ${threaddata_1[@]}) &
outstr=$(taskset 0xFFFFFFFF optipng -$pnglevel -dir $outdir ${threaddata_2[@]}) &
outstr=$(taskset 0xFFFFFFFF optipng -$pnglevel -dir $outdir ${threaddata_3[@]}) &
outstr=$(taskset 0xFFFFFFFF optipng -$pnglevel -dir $outdir ${threaddata_4[@]}) & 
```

# asp.net - 使用 imageresizer.net 按 id 提供图像

> ID：15567127
> 
> 赞同：1
> 
> 时间：2013-03-22T09:44:54.240
> 
> 标签：asp.net, imageresizer

我在数据库中保留了 ID 和上传到服务器上的图像的文件名之间的映射。

这是因为我需要使用 ID 而不是磁盘上的实际文件名来引用 HTML 中的图像（如果图像被替换，很难有一个逻辑来替换对新图像的引用）。

所以我看到的解决方案是有一个处理程序，它根据 ID 获取虚拟图像路径，然后重定向到这个 URL。这应该使 ImageResizer.net 仍然可以工作。

```
public class Image : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        int id;
        if (int.TryParse((string)context.Request.QueryString["id"], out id))
        {
           string path = ...  // get filename from database by id and append any other query params used by imageresizer.net               
           context.Response.Redirect(path); 
        }
        else
        {
            // return error response
        }
    }
} 
```

参考图片：

```
<img src="/Image.ashx?id=1&w=100" /> 
```

我的问题是，我这样做对吗？我正在考虑诸如在客户端缓存之类的问题。另外，使用 Redirect 做一个额外的请求（但这确实是我现在最不关心的一个）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T13:32:14.273

### 它可以工作，但重定向会增加显着的延迟。如果您无法控制 HTML（这是更改文件时 URL*应*更改的位置），那么您的选择将受到限制。

如果您可以使用缓存标头从而不需要重定向，则可以使用`Config.Current.Rewrite`ImageResizer 提供的事件，或使用通用 URL 重写解决方案来简单地解析和查找文件名。

这将消除到服务器的往返 - 请记住，重定向是缓存的，因此除非您使用缓存指令解决问题，否则您将遇到同样的问题。

此外，如果您为每个请求访问数据库，请确保有某种缓存到位。

# git - 合并中可用的分支名称变量

> ID：15567130
> 
> 赞同：0
> 
> 时间：2013-03-22T09:45:10.210
> 
> 标签：git, git-merge

我正在尝试执行用于合并分支的配置命令。我看到有一些可用的变量，如 $BASE $LOCAL 和 $REMOTE 这些变量包含文件名，后跟基本、本地、远程字符串。

是否有任何变量包含这 3 个分支的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:27:54.607

可以使用指向这些提交的 Refs -`ORIG_HEAD`和`MERGE_HEAD`. [该脚本](https://gist.github.com/mrenouf/1247554)展示了如何为它们获取合适的名称，尽管这些提交可能有多个名称：

```
WORK_LOCAL="$WORK/$(git name-rev ORIG_HEAD | cut -d' ' -f 2)"
WORK_REMOTE="$WORK/$(git name-rev MERGE_HEAD | cut -d' ' -f 2)" 
```

你也可以使用`git describe --all ORIG_HEAD`.

编辑：有关如何在 Windows 下[`this page`](http://www.davesquared.net/2009/02/setting-up-diff-and-merge-tools-for-git.html)设置的示例，请参阅。`mergetool`要使用 DiffMerge，如果您的示例命令行是正确的，您将省略`mkdir`and`cp`命令并替换该行：

```
meld "$WORK_LOCAL/${FILE}" "$OUTPUT/${FILE}" "$WORK_REMOTE/${FILE}" 
```

和：

```
"C:/Program Files/SourceGear/Common/DiffMerge/sgdm.exe" --title1="$WORK_LOCAL = Current branch" --title2="$BASE = Common ancestor" --title3="$REMOTE = Merging branch" /m /r="$MERGED" "$LOCAL" "$BASE" "$REMOTE" 
```

# php - 每个月运行一个 SQL 查询 - PHP

> ID：15567132
> 
> 赞同：1
> 
> 时间：2013-03-22T09:45:11.757
> 
> 标签：php, sql, sql-server, while-loop

我正在寻找一些帮助来每月运行此查询。

```
$params = array(&$_POST['query']);

$SQL1 = "SELECT SUM(Income) AS OrderTotal 
FROM SalesDB
WHERE
SalesDB.[Posting Date] <= '2013-01-01' AND
SalesDB.[Posting Date] >= '2013-01-31'";

$options = array("Scrollable" => SQLSRV_CURSOR_KEYSET);
$getProducts1 = sqlsrv_query($conn, $SQL1, $params, $options);
if ($getProducts1 === false)
die( var_dump(sqlsrv_errors()) ); 

while ($row = sqlsrv_fetch_array( $getProducts1, SQLSRV_FETCH_ASSOC)) 
{
$row['OrderTotal'];
} 
```

这样，我得到了一月份的总收入。有没有办法做一个循环，所以它在今年每个月运行一个查询？

所以我不必这样做愚蠢的方式：

```
$params = array(&$_POST['query']);

    $SQL1 = "SELECT SUM(Income) AS OrderTotal 
    FROM SalesDB
    WHERE
    SalesDB.[Posting Date] <= '2013-01-01' AND
    SalesDB.[Posting Date] >= '2013-01-31'";

    $options = array("Scrollable" => SQLSRV_CURSOR_KEYSET);
    $getProducts1 = sqlsrv_query($conn, $SQL1, $params, $options);
    if ($getProducts1 === false)
    die( var_dump(sqlsrv_errors()) ); 

$SQL2 = "SELECT SUM(Income) AS OrderTotal 
    FROM SalesDB
    WHERE
    SalesDB.[Posting Date] <= '2013-02-01' AND
    SalesDB.[Posting Date] >= '2013-02-28'";

    $options = array("Scrollable" => SQLSRV_CURSOR_KEYSET);
    $getProducts2 = sqlsrv_query($conn, $SQL2, $params, $options);
    if ($getProducts2 === false)
    die( var_dump(sqlsrv_errors()) ); 

    while ($row1 = sqlsrv_fetch_array( $getProducts1, SQLSRV_FETCH_ASSOC) AND $row2 = sqlsrv_fetch_array( $getProducts2, SQLSRV_FETCH_ASSOC)) 
    {
    echo $row1['OrderTotal'];
echo $row2['OrderTotal'];

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:49:31.057

你需要使用`GROUP BY`. 此查询将按日期顺序获取 2013 年的所有收入总额：

```
$params = array(&$_POST['query']);

$SQL1 = "SELECT SUM(Income) AS OrderTotal
FROM SalesDB
WHERE
YEAR(SalesDB.[Posting Date]) = '2013'
GROUP BY MONTH(SalesDB.[Posting Date])
ORDER BY MONTH(SalesDB.[Posting Date])";

$options = array("Scrollable" => SQLSRV_CURSOR_KEYSET);
$getProducts = sqlsrv_query($conn, $SQL1, $params, $options);
if ($getProducts === false)
die( var_dump(sqlsrv_errors()) );

while ($row = sqlsrv_fetch_array( $getProducts, SQLSRV_FETCH_ASSOC))
{
    echo $row['OrderTotal'];
} 
```

要显示`0`而不是显示`NULL`没有任何数据的日期，您可以`COALESCE`得到结果：

```
$SQL1 = "SELECT COALESCE(0,SUM(Income)) AS OrderTotal
         FROM SalesDB
         WHERE YEAR(SalesDB.[Posting Date]) = '2013'
         GROUP BY MONTH(SalesDB.[Posting Date])
         ORDER BY MONTH(SalesDB.[Posting Date])"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:49:25.160

如果我对您的理解正确，您正在尝试按月和按年获得 SUM（收入）？

你的领域是：SalesDB.[Posting Date]？

这是我的做法：

```
$sql = "SELECT SUM(Income) AS OrderTotal, YEAR(alesDB.[Posting Date]) AS year, MONTH(alesDB.[Posting Date]) AS month
FROM SalesDB
GROUP BY YEAR(alesDB.[Posting Date]), MONTH(alesDB.[Posting Date])"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:49:25.347

您可以按月份对记录进行分组，但您需要使用`MONTH()`才能获取日期的月份值。

```
SELECT  MONTH(SalesDB.[Posting Date]) MonthNo,
        DATENAME(month, SalesDB.[Posting Date]) MonthName,
        SUM(Income) OrderTotal
FROM    SalesDB
WHERE   SalesDB.[Posting Date] BETWEEN '2013-01-01' AND '2013-12-31'
GROUP   BY  MONTH(SalesDB.[Posting Date]), 
            DATENAME(month, SalesDB.[Posting Date])
ORDER   BY MonthNo ASC 
```

# java - 错误：超出堆栈深度限制 - Java hibernate postgresql

> ID：15567133
> 
> 赞同：2
> 
> 时间：2013-03-22T09:45:18.930
> 
> 标签：java, hibernate, postgresql, stack

我在我的 jboss 5.1-java-jpa-hibernate-postgresql 应用程序中运行一个选择查询。这个查询是 arroung 10 个查询的 UNION 查询，通常现在它应该返回大约 25.000 个 BigInteger 数字（以后会更多）。昨天这个功能运行良好。今天我收到以下错误。有人可以请教吗？我找不到太多关于这个错误的信息。

```
ERROR: stack depth limit exceeded Hint: Increase the configuration parameter "max_stack_depth", after ensuring the platform's stack depth limit is adequate. 
```

如果我一个接一个地运行 10 个查询，然后将结果添加到一个 ArrayList 中会有帮助吗？

* * *

编辑：

使用的PostgreSQL版本：postgresql-9.0-801.jdbc4.jar

出于安全原因，我无法显示确切的查询。但它是这样的：

```
SELECT * FROM (
    SELECT fileId FROM table1
    UNION
    SELECT fileId FROM table2
    ...
    ...
    SELECT fileId FROM table_n
); 
```

此查询现在返回大约 25.000 个 BigInteger 条目（将来将达到 120.000 个）。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:51:42.807

问题解决了。这是由发送到 postgresql 的非常大的查询引起的。

动态创建查询的代码中有一个错误，而不是一个联合查询中的 10 个查询，它复制了它们并在一个联合查询中拥有数百个相同的查询系列。所有这些都导致数据库中的大量查询，从而导致数据库中的事务超时。

我更改了代码以自行执行每个查询并使用代码合并结果。当然，我修复了这个错误，它只生成了 10 个正确的查询。

谢谢大家的帮助。

# python - 三位数相加

> ID：15567135
> 
> 赞同：2
> 
> 时间：2013-03-22T09:45:27.180
> 
> 标签：python

所以我正在编写一个程序，输入一个 3 # 数字并将其分开。我无法弄清楚如何完全添加单独的数字？

例如：用户输入 345

我的程序会将 # 分开为 3、4、5，但我如何将这些数字加在一起？

到目前为止，这是我的代码，

```
#set variable
val = raw_input("Type your three digit number please: ")

print 'The first digit is {}'.format(val[0])
print 'The second digit is {}'.format(val[1])
print 'The third digit is {}'.format(val[2])

#set variable
total = [val[0] +val [1] + val[2]]
total_value = total

print 'The sum of the three digits is' total_value 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T09:49:09.360

将所有数字的数字相加的一种简单方法是：

```
In [3]: sum(map(int, val))
Out[3]: 12 
```

在这里，`map(int, val)`遍历 的字符`val`并将它们中的每一个转换为`int`，并将所有这些s`sum(...)`相加。`int`

这种方法的好处是它适用于任意位数。

您的原始代码不起作用的原因是`val[0]`etc 是*strings*，因此使用`+`简单地将这些字符串连接在一起。要添加数值，您必须`int`先将字符转换为：

```
In [5]: int(val[0]) + int(val[1]) + int(val[2])
Out[5]: 12 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T09:49:13.427

您必须将各个组件转换为数字才能添加它们：

```
total = int(val[0]) + int(val[1]) + int(val[2]) 
```

或者，更简洁：

```
total = sum(int(x) for x in val) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T09:48:42.067

一个优雅的解决方案是使用 python 的内置函数[map](http://docs.python.org/2/library/functions.html#map)和[sum](http://docs.python.org/2/library/functions.html#sum)：

```
val = raw_input("Type your three digit number please: ")
total = sum(map(int, val))
print 'The sum of the three digits is', total 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T09:48:13.743

你只需要这样做：

```
total = int(val[0]) + int(val[1]) + int(val[2]) 
```

由于其中的数字`val`是字符，因此必须先将它们转换为整数。请注意，您的代码中没有`[ ]`影响到的值`total`（您不需要列表，您需要单个值）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T09:48:42.460

尝试这个：

```
res = raw_input("Enter value: ")
print sum(map(int, res)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-25T10:11:51.427

我认为您要寻找的答案是这样的：

```
a = int(input("3 digit number:"))
x = a // 100
y = a // 10 % 10
z = a % 10
print (x + y + z) 
```

我是一个完全的菜鸟，它是菜鸟学习的一个 ez 问题，但是在寻找 ez 答案时，我在任何地方都找不到它（[这里](https://www.w3resource.com/python-exercises/python-basic-exercise-68.php)）问题是添加“三个”数字的总和......我挂断了如果数字是 5 或 6 长，不知道如果没有定义数字，代码会是什么样子。

回答：

```
a = int(input("enter a few numbers:"))
conversion = str(a)
number =[]
for i in conversion:
    a = int(i)
    number.append(a)
print (sum(number)) 
```

或如我面前所示：

```
number = map(int, str(input('Enter a number: ')))
print(sum(number)) 
```

但在我正确理解这一点之前，我还有很长的路要走

# php - 当有人点击它时如何获得图像预览？

> ID：15567137
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:45:38.603
> 
> 标签：php, jquery

有以下代码：

```
 <script language="javascript" type="text/javascript">
 function SetImageName(strName)
 {
 document.getElementById("ImageName").value = strName;
 }
 </script>

 <form>
 <div id="slideshow">
 <div id="Container">
 <div id="Images">
            <img src="images/image1.jpg" name="image1.jpg" onclick="SetImageName(this.name)"/>
            <img src="images/image2.jpg" name="image2.jpg" onclick="SetImageName(this.name)"/>
            <img src="images/image3.jpg" name="image3.jpg" onclick="SetImageName(this.name)"/>
            <img src="images/image4.jpg" name="image4.jpg" onclick="SetImageName(this.name)"/>
            <img src="images/image5.jpg" name="image5.jpg" onclick="SetImageName(this.name)"/>
            <div id="slideEnd"></div>
          </div>
        </div>
    </div>
        <input type="hidden" value="" id="ImageName" name="ImageName"/></form> 
```

用户可以从列表中选择图像。想要预览用户选择的图像。喜欢

```
 You are selected image is
 <?
 $image = $_POST["ImageName"];
 echo ('<img src="'.$image.'" />');
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:58:41.677

请尝试以下方法：

```
<html>
<head>
<title>sample</title>

<style type="text/css">
.hover_image a{
position:relative;
}
.hover_image a span{
position:absolute;
display:none;
z-index:99;
}
.hover_image a:hover span{
display:block;
}
</style>
</head>
<body>
<div class="hover_image">
<a href="#">Links text <span><img src="image.png" alt="image" height="100" /></span></a>
</div>
</body>
</html> 
```

将任何图像名称 image.png 放在相关目录中并将文本悬停在页面上以查看图像。

您可以编辑它以满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:11:35.567

这将适用于你..Enjot 它。我在这个练习中使用了 jQuery。

```
 <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
    $(document).ready(function()
    {
        $('div').click(function() {
            var image = $(this).text();
            $("#showImage").html("<img src='your_path/"+image+".png'>");
            // do something with the text
        });
    });
</script>
<div id="image1" >Image1</div>
<div id="image2" >Image2</div>
<div id="image3" >Image3</div>
<div id="image4" >Image4</div>

<div id="showImage"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:28:15.030

好的，那么你可以这样做：

1.  添加您的代码：- 为每个 img 标签添加标题属性，删除名称属性
2.  为要在单击事件中显示的标题属性赋予值
3.  现在添加此代码

    ```
    <script>
    $(document).ready(function()
    {
        $('img').click(function(){  
            var nameImg = $(this).attr('title');
            alert("you have selected "+nameImg);  
        });
    }); 
    ```

此代码将提醒图像的名称如果您想在其他 div 中显示此名称，则添加一个 id 为“selectedImgTag”的 div 并用此代码替换上面的代码 -

```
<script>
        $(document).ready(function()
        {
            $('img').click(function(){  
                var nameImg = $(this).attr('title');
                $("$selectedImgTag").html("you have selected "+nameImg);  
            });
        });
    </script> 
```

# tablesorter - jquery tablesorter：嵌套表

> ID：15567139
> 
> 赞同：0
> 
> 时间：2013-03-22T09:45:45.867
> 
> 标签：tablesorter

我有嵌套表，其中内部和外部表都动态添加了行。当我触发内表的更新时，内表顺序改变后，外表的顺序也改变了。我创建了一个 jsfiddle 来证明这一点：

[http://jsfiddle.net/FZLxp/](http://jsfiddle.net/FZLxp/)

这是从 OS 问题[Nested jQuery Tablesorter tables, all sortable](https://stackoverflow.com/questions/9449950/nested-jquery-tablesorter-tables-all-sortable)

要查看问题，请按 Make 对外部表进行排序，使 Toyota 位于顶部，然后单击“更新”按钮。更新按钮会触发内部 toyota 表的更新，但也会对外部表进行排序以反映 Toyota Doors 列的排序方向。

添加其他行后如何对内部表进行排序而不对外部表进行排序？

```
<script type="text/javascript">
function updateRW() {
    $("#toyota").trigger("update", [true]);
}
</script>

<table class="tablesorter">
    <thead>
        <tr>
            <th>Make</th>
            <th>Model</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Honda</td>
            <td>Accord</td>
        </tr>
        <tr class="tablesorter-childRow">
            <td colspan="2" style="padding: 0 30px 0 30px;">
                <table class="tablesorter-child">
                    <thead>
                        <tr>
                            <th>Doors</th>
                            <th>Colors</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Honda 2-Door</td>
                            <td>Honda Red</td>
                        </tr>
                        <tr>
                            <td>Honda 4-Door</td>
                            <td>Honda Blue</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
            <td>Toyota</td>
            <td>Camry</td>
        </tr>
        <tr class="tablesorter-childRow">
            <td colspan="2" style="padding: 0 30px 0 30px;">
                <table id="toyota" class="tablesorter-child">
                    <thead>
                        <tr>
                            <th>Doors</th>
                            <th>Colors</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Toyota 2-Door</td>
                            <td>Toyota Yellow</td>
                        </tr>
                        <tr>
                            <td>Toyota 4-Door</td>
                            <td>Toyota Green</td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
    </tbody>
</table>
<input type=button value="update" onclick="updateRW()">

$(document).ready(function() 
{ 
    $("table").tablesorter({selectorHeaders: '> thead > tr > th'}); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:21:56.807

这似乎是 tablesorter 中的错误！

我已经[打开了一个问题](https://github.com/Mottie/tablesorter/issues/263)，以便我们可以跟踪它，我应该在下一次更新中解决这个问题。

感谢您的报告！

# python - 安装 pytesser

> ID：15567141
> 
> 赞同：9
> 
> 时间：2013-03-22T09:45:52.687
> 
> 标签：python, python-2.7, ocr, tesseract

我是 python 新手，想安装和使用 pytesser OCR 库。我安装的所有其他模块，我都使用了easy_install，它运行良好。但是 pytesser 是我必须使用 Google Code 的 .zip 文件手动安装的第一个。

根据自述文件 ( [https://code.google.com/p/pytesser/wiki/README](https://code.google.com/p/pytesser/wiki/README) ) 中的说明，我将上下文提取到我的 C:\Python27\Scripts 文件中。但是，当我尝试：

```
from pytesser import * 
```

在 Python Shell 中，我收到以下错误：

```
Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    from pytesser import *
ImportError: No module named pytesser 
```

有任何想法吗？视窗 7。Python 2.7。我使用 PIL、S​​crapy、Numpy 等模块的其他脚本运行良好。

谢谢，汤姆

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-03T06:53:35.767

我不确定这是否是理想的解决方案，但这对我有用。如果这有任何不正确，请纠正我。

1.  解压缩文件夹并将其粘贴到您的 Python2x\Lib 文件夹中
2.  将其重命名为 pytesser （我不太确定这是否是必要的步骤）
3.  复制 tesseract.py 文件并将其重命名为**__init__.py**
4.  打开**__init__.py**
5.  将 tesseract_exe_name = "tesseract" 行更改为 tesseract_exe_name = 'C:\Python27\Lib\pytesser\tesseract'

完毕。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-23T12:18:01.670

您不应该使用`C:\Python27\Scripts`3rd 方模块，而应该使用`C:\Python27\Lib\site-packages`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-26T18:36:21.537

所以我使用的是 w10 64 位。我花了一些时间来了解如何安装它才能使用它。

如何 ：

[https://code.google.com/archive/p/pytesser/downloads](https://code.google.com/archive/p/pytesser/downloads)

download pytesser_v0.0.1.zip

unzip

move files in the project

rename import Image to "from PIL import Image" in the pytesser.py

=== Enjoy.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-01T21:33:46.923

除了 Yaitzme 的回答 - 您可能需要另一个修复（我在 Windows 7 64 位上使用 Python Tools for Visual Studio）......

一旦我将 pytesser.py 文件重命名为 __init__ 我必须在该行中添加一个双反斜杠，例如

tesseract_exe_name = 'C:\Anaconda2\Lib\site-packages\pytesser\\tesseract'</p>

因为单个反斜杠 '\tesseract' 将 '\t' 解释为新的制表符并破坏了路径！把我的安装说明[放在这里](https://rdmilligan.wordpress.com/2016/01/01/ocr-using-augmented-reality/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T12:10:37.093

我怀疑问题在于 Python 无法找到您的 C:\Python27\Scripts 目录，因为它不在您的 PYTHONPATH 中。

当您运行`import`命令时，Python 在某些目录中查找文件，它们在此处进行了描述[http://docs.python.org/2/tutorial/modules.html#the-module-search-path](http://docs.python.org/2/tutorial/modules.html#the-module-search-path)

您的主要选择是：

1) 告诉 Python 查看您的 Scripts 文件夹。这涉及将文件夹添加到您的 Python 路径，请参阅此处[如何添加到 Windows 7 中的 Python 路径？](https://stackoverflow.com/questions/3701646/how-to-add-to-the-pythonpath-in-windows-7)

2) 将您的脚本放在 Python 已经搜索过的文件夹中。这是 wRAR 的答案，要使用标准 Python 3rd-party 模块目录，请参见此处[http://docs.python.org/2/install/index.html#how-installation-works](http://docs.python.org/2/install/index.html#how-installation-works)

3) 在 Python 的当前目录中有 pytesser 文件。`import os`接下来`os.getcwd()`会显示python的当前目录，代码正在运行（在某种意义上）。`os.chdir("my/other/dir")`更改当前目录。请参阅[如何知道/更改 Python shell 中的当前目录？](https://stackoverflow.com/questions/8248397/how-to-know-change-current-directory-in-python-shell)了解更多详情。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-04-16T01:13:20.563

你可能弄错了。我昨天尝试了pytesser，也许您不应该将pytesser文件放入脚本文件夹中。尝试工作目录以及您的代码。

```
>>> import pytesser
>>> print pytesser
<module 'pytesser' from 'E:\Desktop\jiaoben\OCR\pytesser.pyc' 
```

# jquery - 将 CSS 不透明度应用于下拉菜单

> ID：15567143
> 
> 赞同：0
> 
> 时间：2013-03-22T09:45:54.283
> 
> 标签：jquery, css, drop-down-menu, menu, opacity

我有以下 jsfiddle 设置：

[http://jsfiddle.net/jMrsC/1/](http://jsfiddle.net/jMrsC/1/)

当移动到文件夹 2 > 文件夹 2.1 时，我在页面上有一个下拉菜单，如果您仔细查看不透明度（这很棘手，您可能需要一个好的监视器才能看到差异），会打开第二级子菜单第二个子菜单和第一个子菜单是有区别的。在 css 中，我有以下代码，它应用了不透明度：

```
.ddsmoothmenu ul li ul li{
  display: list-item;
  float: none;
  background: #111;
  opacity: 0.92;
} 
```

对我来说，不透明度似乎已应用于第二个子菜单两次，并使其比第一个子菜单更透明。

请任何人帮忙，我希望第一级子菜单和第二级子菜单具有相同的不透明度。

谢谢

- - - - - - - - - - - - 更新 - - - - - - - - - - -

抱歉，我之前可能不清楚，我想对所有级别的子菜单应用一致的不透明度，而不仅仅是删除它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:00:14.827

问题是不透明度也适用于元素的子元素。因此，每次创建子菜单时，每次都会获得父级不透明度的 0.92。

正如 spiel 建议的那样，简单地从该行中删除不透明度可能适用于您的情况。

但是，如果您想从第 2 级开始定位子菜单，并从那里保持一致，请尝试以下操作：

按照 spiel 的建议从当前类中删除不透明度

第一的：

```
.ddsmoothmenu ul li ul li{
display: list-item;
float: none;
background: #111;
#opacity: 0.92; <--remove
} 
```

然后（确保这是在您上面的代码之后）

```
.ddsmoothmenu ul li {
opacity: 0.50
} 
```

==== 编辑 =====

不知道这是什么礼仪，所以我只是要进行编辑。虽然我的建议可行，但下面 VenomVendor 给出的解决方案更干净、更好。`.ddsmoothmenu>ul>li>ul>li`不要像我之前建议的那样做，`.ddsmoothmenu ul li`而是使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:15:05.257

在[http://jsfiddle.net/jMrsC/5/](http://jsfiddle.net/jMrsC/5/)删除`ul li ul li`并更新它以更新`ul li`

```
/*Sub level menu list items (alters style from Top level List Items)*/
.ddsmoothmenu ul li ul li{
 display: list-item;
 float: none;
 background: #111;
 }

.ddsmoothmenu ul li{
 opacity: .5;   /* value changed to see the difference */
 }
 .ddsmoothmenu ul li ul li{
  opacity: 1;  /* this means this class is not required, since default opacity is 1 */
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:53:05.507

简单地消除该类中的不透明度

```
.ddsmoothmenu ul li ul li{
  display: list-item;
  float: none;
  background: #111;
  #opacity: 0.92;
} 
```

在你的小提琴中工作得很好。

子菜单将其读取为使用其上方级别的 0.92 不透明度。

# c# - 过滤用户角色的操作并建立菜单

> ID：15567144
> 
> 赞同：0
> 
> 时间：2013-03-22T09:45:58.183
> 
> 标签：c#, asp.net-mvc, razor

我正在为我工​​作的公司建立一个 MVC Razor (.Net) 站点。然而我对 MVC 还是很陌生，我只是想知道如何做到这一点。其实我有两个问题，但第一个更重要。

并且登录的用户存储在视图包中。用户的 emum 值包含用户的角色（例如：客户、教练、管理员）。我如何对自定义角色的操作进行过滤，例如

```
[Roles(Coach,Admin)]    
public ActionResult Index(Somemodel model)
        {
            if (ModelState.IsValid)
            {
                dosomestuff()

        }
        return View();
    } 
```

其次，这只是为了懒惰的人。是否可以从过滤器生成菜单项并且除了还给出菜单项应该显示的角色。

例子：

```
[MenuItem]
[Roles(Coach,Admin)]    
public ActionResult Index(Somemodel model)
        {
            if (ModelState.IsValid)
            {
                dosomestuff()

        }
        return View();
    } 
```

我可以创建一个结构，这将自动显示在某种菜单中，在这种情况下，只有标记为教练或管理员的用户。

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:51:38.513

> 我如何对自定义角色的操作进行过滤，例如

您可以使用`Authorize`将查询角色提供者的属性：

```
[Authorize(Roles = "Coach, Admin")]
public ActionResult Index(Somemodel model)
{
    if (ModelState.IsValid)
    {
        dosomestuff()
    }
    return View();
} 
```

> 是否可以从过滤器生成菜单项

授权过滤器应该用于执行授权而不是构建 UI。您可以考虑使用 HTML Helpers 或 Partials 来生成这些菜单项。在视图中，您始终可以使用以下命令验证用户是否处于给定角色中：

```
@if (User.IsInRole("Coach"))
{
    <li>This menu will be visible only to users in the Coach role</li>
} 
```

# ajax - 单击颜色框上的按钮后调用 ajax

> ID：15567147
> 
> 赞同：2
> 
> 时间：2013-03-22T09:46:08.933
> 
> 标签：ajax, jquery, colorbox

我在 firefox(version : 14.0.1) 上遇到以下错误，当我在单击颜色框上的按钮后调用 ajax 时。

错误 ：`NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument`

下面是我的代码：当我点击一个按钮时，会调用以下函数。

```
function addIdentifierManually(moduleName, pageNumber){
    $.colorbox({
        html : "<strong>"+moduleName+" :</strong><input class='text "+moduleName+"Text' id='identifier' value=''>"
               +"<br/><br/><center><input type='button' value='Insert' onclick='insertIdentifier("+moduleName+","+pageNumber+")'/></center>",
        width : '300px',
        height : '200px',

    });
} 
```

在上面颜色框的 html 中，这里有一个按钮和点击事件的 onclick 函数。用户在文本字段中输入输入时单击按钮。

```
function insertIdentifier(moduleName, pageNumber){
    var data ={
            moduleName : moduleName,
            pageNumber : pageNumber

    };

    $.ajax({
        url : "addIdentifierManually.htm",
        dataType : "text",
        type : "POST",
        data : data,

        success : function(data){

        },

        error : function(jqXHR, textStatus, errorThrown){
            alert(jqXHR.responseText);
        }
    });
} 
```

我在哪里失踪？任何帮助都将是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:35:11.510

你可以试试这个：

```
function addIdentifierManually(moduleName, pageNumber) {
    $.colorbox({
        html : "<strong>"+moduleName+" :</strong><input class='text "+moduleName+"Text' id='identifier' value=''>"
               +"<br/><br/><center><input type='button' value='Insert' id='insertIdent' /></center>",
        width : '300px',
        height : '200px',

    });

    $("#insertIdent").bind('click', insertIdentifier(moduleName,pageNumber));
} 
```

# vbscript - 在我的脚本中找不到错误

> ID：15567149
> 
> 赞同：0
> 
> 时间：2013-03-22T09:46:14.073
> 
> 标签：vbscript

嘿伙计们，我的 vbs 脚本有问题。我的脚本打开一个文本文件读取它并删除一些条目。我的脚本中的某个地方一定是一个错误，因为源文件的最后一行在目标文件中写入了大约 30 次。我在我的代码中没有发现错误，也许你们中的某个人看到了它。是的，我知道我不应该发布大型代码部分。这是我的代码：

```
separator = " "
x = 0

strRawPath = "C:\xampp_neu\xampp\htdocs\tc_backup\stasknoheader.txt"
strRawPathW = "C:\xampp_neu\xampp\htdocs\tc_backup\stask.txt"

Set WSHShell = WScript.CreateObject("WScript.Shell") 
Set fs = CreateObject("Scripting.FileSystemObject")
Set fsw = CreateObject("Scripting.FileSystemObject")

        ' 2 = ForWriting
        Set f = fs.OpenTextFile(strRawPath,1)
        Set w = fsw.OpenTextFile(strRawPathW,2)

            Do While f.AtEndOfStream <> True
                x = x+1
                'Anlegen des Arrays
                ReDim Preserve myArray(x)
                strLine = f.Readline
                'Speichern in Array
                myArray(x) = strLine

                'Loop so that lines that contains Microsoft or TaskName are not written
                 If InStr(strLine, "Microsoft") = 0 Then
                    If InStr(strLine, "TaskName") = 0 Then
                        If InStr(strLine, "Restart System") = 0 Then
                            If InStr(strLine, "Scheduler-HSM-mig-TC11TDrive") = 0 Then

                        strNewLine = strNewLine & strLine & vbCrLf
                        'Replace blank with " AM, "
                        strNewLine =(Replace(strLine," ",separator,1,2))
                        'Removes \ from TaskName
                        strNewLine =(Replace(strNewLine,"\","",1,1))
                        'WScript.Echo strNewLine
                            End If
                        End If
                    End If
                End If                  

                w.write strNewLine & VbCrLf
                'WScript.Echo strNewLine

            Loop 

        f.Close
        w.Close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:58:40.247

虽然这不会解决您的问题，但会减少您的 If 条件。你不需要 4 if 条件。只需使用 And 运算符，如下所示

```
If InStr(strLine, "Microsoft") = 0 And InStr(strLine, "TaskName") = 0 And InStr(strLine, "Restart System") = 0 AndA  InStr(strLine, "Scheduler-HSM-mig-TC11TDrive") = 0 Then

                    strNewLine = strNewLine & strLine & vbCrLf
                    'Replace blank with " AM, "
                    strNewLine =(Replace(strLine," ",separator,1,2))
                    'Removes \ from TaskName
                    strNewLine =(Replace(strNewLine,"\","",1,1))
                    'WScript.Echo strNewLine

End If 
```

# java - Android GridView 间距和中心问题

> ID：15567153
> 
> 赞同：3
> 
> 时间：2013-03-22T09:46:35.000
> 
> 标签：java, android

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:background="#FFFFFF"
    android:layout_gravity="center"
    android:padding="5dip" >
    <GridView
        android:id="@+id/homeGridView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:columnWidth="200dip"
        android:adjustViewBounds="true" 
        android:layout_gravity="center"
        android:gravity="center"
        android:horizontalSpacing="0dip"
        android:numColumns="2"
        android:stretchMode="spacingWidthUniform"
        android:verticalSpacing="10dip" />
</LinearLayout> 
```

1.  我的网格视图中有四个图标，但它们之间的间距太大。我想减少它。
2.  我也想让 GridView 中心到设备，但它始终保持在顶部。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T09:58:24.600

您应该使用维度来克服这个问题。只需为每个密度屏幕定义尺寸。

*   **价值观-ldpi**
*   **价值观-mdpi**
*   **价值观-hdpi**
*   **价值观-xhdpi**
*   **值-大**

值-ldpi/dimesion.xml

```
<resources>
  <dimen name="grid_vertical_space">15dp</dimen>
</resources> 
```

值-mdpi/dimesion.xml

```
<resources>
  <dimen name="grid_vertical_space">20dp</dimen>
</resources> 
```

值-hdpi/dimesion.xml

```
<resources>
  <dimen name="grid_vertical_space">30dp</dimen>
</resources> 
```

同样地..

像这样试试

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:background="#FFFFFF"
    android:layout_gravity="center"
    android:padding="5dip" >
    <GridView
        android:id="@+id/homeGridView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:columnWidth="200dip"
        android:adjustViewBounds="true" 
        android:layout_gravity="center"
        android:gravity="center"
        android:horizontalSpacing="0dip"
        android:numColumns="2"
        android:stretchMode="columnWidth"
        android:verticalSpacing="@dimen/grid_vertical_space" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:29:28.733

如果您的布局仅由 4 个图标组成，为什么不使用带有 2 个[TableRow的](http://developer.android.com/reference/android/widget/TableRow.html)[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)呢？我认为你可以更轻松地实现你想要的，因为：

1.  您可以定义项目之间的间距；
2.  您也可以将您的桌子居中。

# android - 事件提醒不适用于android中的日历事件

> ID：15567154
> 
> 赞同：5
> 
> 时间：2013-03-22T09:46:36.300
> 
> 标签：android, calendar, reminders

我的日历应用程序（2.3 版）为用户添加了日历事件，但提醒不起作用。我是这样设置`event.put("hasAlarm", 1);`的。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:00:03.020

你可以试试以下 `event.put(Events.HAS_ALARM,1);`

进口在哪里 `import android.provider.CalendarContract.Events;`

将此导入`import android.provider.Calendar.Events;`用于 2.3

# android - 如何创建具有自定义屏幕尺寸的新模拟器？

> ID：15567156
> 
> 赞同：6
> 
> 时间：2013-03-22T09:46:40.080
> 
> 标签：android, android-emulator, avd

在 avd 管理器中，当我尝试创建新的 avd 时，有皮肤部分。但是更新sdk后，我看不到这部分。如何使用我自己的屏幕尺寸而不是现有的屏幕尺寸。

这些是新模拟器屏幕的新旧外观。

旧的

![在此处输入图像描述](../Images/169628839f55113e634e6e6367c2784f.png)

新的一个

![在此处输入图像描述](../Images/2dce52e67072d98d7bcf55ecc7c933e3.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-22T09:57:07.750

如果您使用的是最新版本的 AVD Manager，您会发现一个标有 ** Device Definition** 的新选项卡。

在这里选择新设备，然后指定您的**Screen Size(in)**和**Resolution(px)**。您还可以指定**Size**、**Screen Ratio**和**Density**。

![在此处输入图像描述](../Images/eb0a0a1eb484f9e321ad126d40fd86dd.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T09:53:43.240

打开`Android Virtual Device Manger`转到`Device Definition`选项卡，创建一个新设备。然后，创建一个新模拟器并从下拉菜单中选择您的设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-27T14:02:40.180

如果从命令行运行模拟器，您可以使用以下`-skin`选项：

```
emulator @foo -skin 800x600 
```

请参阅：[从命令行启动模拟器](https://developer.android.com/studio/run/emulator-commandline)

# ruby - 无法获取下拉选项列表（对象）

> ID：15567158
> 
> 赞同：1
> 
> 时间：2013-03-22T09:46:43.153
> 
> 标签：ruby, selenium-webdriver

我正在尝试获取下拉列表的所有选项。但它正在返回 - []。实际上，我的下拉列表有 250 个选项（国家列表）

以下是我的 HTML 页面的内容 -

```
<select id="country" selected="" name="country">
  <option value="U0">Unknown</option>
  <option value="AP">Asia/Pacific Region</option>
  <option value="EU">Europe</option
  .
  .
  . 
```

为了获得所有选项，我写了以下内容 -

```
element = driver.find_element(:id, "country")
countries = element.find_elements(:tag_name, "option") 
```

但它返回空数组 - [] 实际上，它应该返回对象数组。

Selenium 是否无法从下拉列表中返回大量选项？还是 HTML 页面或 selenium 代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:18:57.620

您发布的内容没有问题，以下作品。我建议您在 html 文件中添加选项，直到出现错误。

```
require "selenium-webdriver"
require 'ap'

driver = Selenium::WebDriver.for :firefox
driver.get("file:///c:/ruby193/test/selenium/test.html")
element = driver.find_element(:id, "country")
countries = element.find_elements(:tag_name, "option") 
ap countries

# [
#     [0] #<Selenium::WebDriver::Element:0x4033eddc id="{87044904-9da3-4194-9440-b585e9dabfc2}">,
#     [1] #<Selenium::WebDriver::Element:0x..f2be9452 id="{6692657d-df40-4dd5-a8ad-a2dbadda18b5}">,
#     [2] #<Selenium::WebDriver::Element:0x..fb1e0e416 id="{8886c68e-5c4f-45a5-8220-4795a73cabbe}">
# ] 
```

这是test.html

```
<select id="country" selected="" name="country">
  <option value="U0">Unknown</option>
  <option value="AP">Asia/Pacific Region</option>
  <option value="EU">Europe</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:11:30.150

其实，这是我的错。我在 irb 上运行了这些命令，它返回 []。但是当我编写脚本并存储在一个文件中并运行该文件时，它会列出下拉选项的所有对象。

看起来 irb 限制了数组范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:07:40.980

为什么不能使用默认选择类来获取下拉列表中的所有选项？

选择班级：[链接](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Support/Select.html)

获取选项方法：[链接](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Support/Select.html#options-instance_method)

# php - 在不更改 url 的情况下将 .htaccess 重定向到子文件夹的任何好的解决方案？

> ID：15567162
> 
> 赞同：1
> 
> 时间：2013-03-22T09:46:56.973
> 
> 标签：php, .htaccess, redirect, rewrite

我正在尝试使用 .htaccess 从根目录重定向到子文件夹，我得到 500 或重定向循环。

我正在开发一个 HMVC 框架，我需要能够将站点的部分（文件夹）分解为它们自己的代码岛。有些女巫会使用框架有些会使用开源软件（OpenCart，Wordpress..）

文件夹结构（根）：

```
 /index
 /shop
 /blog
 .htaccess 
```

访问根目录时，我需要将其从 .htaccess 文件重定向到 /index（或任何其他子文件夹）而不更改 url。

这些文件夹有自己的 .htaccess 文件。

来自根目录的重定向需要在子文件夹内运行 .htaccess（大多数框架需要 mod_rewrite）

这个...

```
 RewriteRule ^(.*)$ http:\/\/radu\.koding\.com\/$1 [L,NC]
  RewriteRule ^$ index [L]
  RewriteRule ^(.*)$ index/$1 [L] 
```

似乎不起作用。我陷入了重定向循环。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:53:06.257

尝试这个：

```
RewriteCond $1 !^index/
RewriteRule ^(.*)$ index/$1 [L] 
```

此 RewriteCond 将 RewriteRule 匹配的内容与不以 开头的内容进行比较`index/`。

（我在这里跳过了原始示例中的第二个 RewriteRule - 将“nothing”重定向到`index/`应该可以正常工作。）

# jquery - 如何将javaScript（jquery-ajax）变量传回php？

> ID：15567164
> 
> 赞同：0
> 
> 时间：2013-03-22T09:46:57.373
> 
> 标签：jquery

有人可以帮我吗，我只想将变量从java传递给php。一些jQuery代码：

```
$('#').keyup(function() {
        $.ajax({
            url: url,
            type: "get",
            data: some_data_to_send_to_url,
            success: function(data){
             var javaScriptVariable = data;                
            }
        });

      }); 
```

我只想在同一个 php 文件中执行此操作：

```
$phpVariable = javaScriptVariable; 
```

然后在php中做一些操作。

提前致谢 ：）

编辑 ：

谢谢，但我对发送到 url:"data.php" 的数据没有问题，该文件接收一些数据，执行一些操作并返回新数据。我对来自这个文件的这个新数据“成功：函数（数据）”有问题，我想把这个数据分配给普通的 php 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:00:06.933

```
$('#').keyup(function() {
       $.ajax({
         url:  "data.php", // php file where you want to send data
         type: "get",
         data: {"some_data_to_send_to_url" : "yourValue"}, // this data will be sent
         success: function(data){
           // do something on success
         }
      });
  }); 
```

然后在你的“data.php”文件中

`$data = $_GET["some_data_to_send_to_url"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:56:21.090

jQuery[文档](http://api.jquery.com/jQuery.ajax/)状态：

> jqXHR.done(函数(数据, textStatus, jqXHR) {}); 成功回调选项的替代构造，.done() 方法替换了已弃用的 jqXHR.success() 方法。有关实现细节，请参阅 deferred.done()。

## Javascript

```
var some_data_to_send_to_url = {"yourDataKey" : "yourValue"};

('#yourID').keyup(function() {          //Your "#" is not a valid selector
    $.ajax({
        url: url,
        type: "get",
        data: some_data_to_send_to_url,

    }).done(function(data){             //Updated
         var javaScriptVariable = data;                
       });

 }); 
```

## php

```
$phpvariable = $_GET["yourDataKey"];
//Stuff
echo $yourReturn;       //This is what you sent == javascriptvariable 
```

无论如何，如前所述，**PHP 是服务器端专有**的，而**javascript/jQuery 是客户端专有的**。因此，您不会`data`在 jQuery 的`done()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:57:34.257

参考此代码将数据作为 json 对象发送到 php 页面。

```
function send()
    {
    var ip=new Object();
    ip.session_id="312fdfwf1343r";
    var inputParam=JSON.stringify(ip);
    var module="module1";
     $.ajax({
                         type: "POST",
                     url: phpurl
                         data: {inputParam:inputParam,module :module},   
                     dataType: "json",
                         success: function(msg)
                         {
                                 }
              });                
    } 
```

# database-design - 在 Alfresco 内容模型中创建方面

> ID：15567171
> 
> 赞同：4
> 
> 时间：2013-03-22T09:47:09.533
> 
> 标签：database-design, content-management-system, database-schema, alfresco, content-model

我目前开始使用 Alfresco CMS。我需要在我的内容模型中创建一个“方面”，它必须包含许多属性：

```
Aspect: 
    property 1 : String
    property 2 : int
    property 3 : int
    property 4 : long 
```

此外，它还必须包含另外两个属性，这些属性由以下属性组成：

```
Format: 
   FormatProperty1: int
   FormatProperty2: int
   FormatProperty3: int

Metadata:
   list1: List<String>
   list2: List<String>
   MetadataProperty 3: boolean 
```

我还没有在 Alfresco 中创建简单的内容模型或方面。根据我以前在关系数据库方面的知识，我将上述结构视为表之间的关联。如何在具有一个或更多方面的 Alfresco 内容模型中执行该操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T14:05:45.313

让我尝试根据您的评论为@Alch3mi5t 的答案添加一些额外的信息。我在这里使用了一个虚构的商业案例。

基本上，Alfresco 模型由 3 个部分组成：约束、类型和方面。另外，我将在组合中添加关联。

*   **类型**

alfresco 中的每个节点（您可能会错误地将其视为“记录”）都有一个类型。所以这种类型有属性（“列”）。所以你有你的基本类型，假设它叫做**Vendor**。它有两个道具，名称和税号（字符串和整数）。您的类型定义如下所示：

```
<type name="myCompany:vendor">
  <title>Vendor</type>
  <parent>cm:folder</parent>
  <properties>
    <property name="myCompany:vendorName">
      <title>Vendor name</title>
      <type>d:text</type>
    </property>
    <property name="myCompany:vendorTaxID">
      <title>Vendor Tax ID</title>
      <type>d:int</type>
    </property>
  </properties>
</type> 
```

这是你的类型，与包含字符串和 int 类型的 vendorName 和 vendorTaxID 列的 db 表不同。

*   **约束**

假设您现在必须在税号上添加一些约束 - 简单的正则表达式示例。所以你有一个这样定义的约束：

```
<constraint name="myCompany:taxIdConstraint" type="REGEX">
  <parameter name="expression">
    <value>^ID[1-9](\-[1-9])*</value>
  </parameter>
  <parameter name="requiresMatch">
    <value>true</value>
  </parameter>
</constraint> 
```

现在我们只需要修改 taxId 属性：

```
<property name="myCompany:vendorTaxID">
  <title>Vendor Tax ID</title>
  <type>d:int</type>
  <constraints>
    <constraint ref="myCompany:taxIdConstraint">
  </constraints>
</property> 
```

因此，您现在对该属性设置了约束。

*   **Aspect** 现在您需要一个方面 - 在 Alfresco 中，这就像您想在该表中添加一些额外的列一样。

不-更好的类比，您想要原始表中的关系。因此，如果它为空，则为空。但或者，它会创建一个 1-1（通常）关系到您的记录到另一个表。

这里的基线是你永远不会单独在方面表中添加任何东西——它只是作为基本类型的补充。一个示例方面：

```
<aspect name="myCompany:myAspect">
  <title>Address aspect</title>
  <properties>
    <property name="myCompany:city">
      <title>City</title>
      <type>d:text</type>
    </property>
  </properties>
</aspect> 
```

*如果您将其添加到您的类型定义中（就在属性*部分之后），您可以使其成为强制性方面：

```
<mandatory-aspects>
  <aspect>myCompany:myAspect</aspect>
</mandatory-aspects> 
```

现在，您可以将“记录”添加到您的基本“表”中，如果您将其添加为强制性方面，那么每条记录将有 3 个道具：姓名、税号和城市。如果不是强制性的，那么每条记录将有两个基本列，但您可以添加第三个以选择少数几个。以编程方式或手动方式都没关系。

*   **关联** 现在我们还可以在混合中添加关联：这只是两个节点（或“记录”）之间的链接。因此，在您的类型中的*属性*部分之后，您可以添加*关联*部分。假设您想将（某些）供应商与其创建者（关键帐户）联系起来。

您将其添加到您的类型中：

```
<associations>
  <association name="myCompany:keyAccountManager">
    <source>
      <mandatory>false</mandatory>
      <many>true</many>
    </source>
    <target>
      <class>cm:person</class>
      <mandatory>false</mandatory>
      <many>true</many>
    </target>
  </association>
</associations> 
```

你有它！您现在可以将供应商表中的部分或全部供应商连接到他们各自的 KAM（例如，当供应商发生某些事情时，您可以通过电子邮件发送 KAM）。基本上，您的供应商表和用户表之间的 1-n 连接。1-n 表示您可以将一个供应商连接到多个人员。您还可以将不同的供应商连接到一个人。（许多参数）。

您还可以以相同的方式将关联添加到方面：

```
<aspect name="myCompany:stateAspect">
 <properties>
 ...
 </properties>
 <associations>
  <association name="myCompany:myState">
    <source>
      <mandatory>true</mandatory>
      <many>true</many>
    </source>
    <target>
      <class>cm:folder</class>
      <mandatory>false</mandatory>
      <many>true</many>
    </target>
  </association>
 </associations>
</aspect> 
```

现在您可以创建常规的露天文件夹（cm：文件夹类型）并以州命名，并将每个城市连接到其中一个文件夹。（不是最好的方法，但说明了我的观点。）所以这个关联是强制性的，这意味着如果你添加这个非强制性的其他方面（不是原始方面），你必须创建一个关联。

所以玩组合来做你需要的。

*   **模型**

所以现在你有你的示例模型：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <model name="myCompany:myContentModel" xmlns="http://www.alfresco.org/model/dictionary/1.0">
      <description>Custom Content Model</description>
      <author>Zlatko Đurić</author>
      <published>2013-03-22</published>
      <version>1.0</version>
      <imports>
        <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d"/>
        <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm"/>
      </imports>

      <namespaces>
        <namespace uri="myCompany.model" prefix="bv"/>
      </namespaces>

      <constraints>
        <constraint name="myCompany:taxIdConstraint" type="REGEX">
          <parameter name="expression">
            <value>^ID[1-9](\-[1-9])*</value>
          </parameter>
          <parameter name="requiresMatch">
            <value>true</value>
          </parameter>
        </constraint>
      </constraints>

      <types>
        <type name="myCompany:vendor">
          <title>Vendor</type>
          <parent>cm:folder</parent>
          <properties>
            <property name="myCompany:vendorName">
              <title>Vendor name</title>
              <type>d:text</type>
            </property>
            <property name="myCompany:vendorTaxID">
              <title>Vendor Tax ID</title>
              <type>d:int</type>
              <constraints>
                <constraint ref="myCompany:taxIdConstraint">
              </constraints>
              </property>
          </properties>
          <mandatory-aspects>
            <aspect>myCompany:myAspect</aspect>
          </mandatory-aspects>
          <associations>
            <association name="myCompany:keyAccountManager">
              <source>
                <mandatory>false</mandatory>
                <many>true</many>
              </source>
              <target>
                <class>cm:person</class>
                <mandatory>false</mandatory>
                <many>true</many>
              </target>
            </association>
          </associations>
        </type>
      </types>

      <aspects>
        <aspect name="myCompany:myAspect">
          <title>Address aspect</title>
          <properties>
            <property name="myCompany:city">
              <title>City</title>
              <type>d:text</type>
            </property>
          </properties>

          <associations>
            <association name="myCompany:myState">
              <source>
                <mandatory>true</mandatory>
                <many>true</many>
              </source>
              <target>
                <class>cm:folder</class>
                <mandatory>false</mandatory>
                <many>true</many>
              </target>
            </association>
           </associations>
         </aspect>
      </aspects>
    </model>

There, I hope this helps you. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T12:29:28.227

你应该先看看[这里](http://wiki.alfresco.com/wiki/Step-By-Step%3a_Creating_A_Custom_Model)。在 Alfresco 中创建模型与数据库相去甚远。

它只是一个定义良好的 XML。您必须先编写 XML，然后通过引导程序对其进行初始化。

示例 XML 模型 cmodModel.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Definition of new Model -->
<model name="custom:custommodel" xmlns="http://www.alfresco.org/model/dictionary/1.0">
    <!-- Optional meta-data about the model -->
    <description>Custom Model</description>
    <author>Whatever</author>
    <version>1.0</version>
    <!-- Imports are required to allow references to definitions in other models -->
    <imports>
        <!-- Import Alfresco Dictionary Definitions -->
        <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d" />
        <!-- Import Alfresco Content Domain Model Definitions -->
        <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm" />
        <import uri="http://www.alfresco.org/model/system/1.0" prefix="sys" />
    </imports>
    <!-- Introduction of new namespaces defined by this model -->
    <namespaces>
        <namespace uri="custom.model" prefix="cmod" />
    </namespaces>
    <!-- Lists <String> -->
    <constraints>
        <constraint name="cmod:liststring1" type="LIST">
            <parameter name="allowedValues">
                <list>
                    <value>value 1</value>
                    <value>value 2</value>
                </list>
            </parameter>
        </constraint>
        <constraint name="cmod:liststring2" type="LIST">
            <parameter name="allowedValues">
                <list>
                    <value>value 1</value>
                    <value>value 2</value>
                </list>
            </parameter>
        </constraint>
    </constraints> 
    <types>
        <!-- Document Type -->
        <type name="cmod:customDoc">
            <title>Document</title>
            <description>Document</description>
            <parent>cm:content</parent>
            <mandatory-aspects>
                <aspect>cmod:aspectBase</aspect>
                <aspect>cmod:aspectFormat</aspect>
                <aspect>cmod:aspectMetadata</aspect>
            </mandatory-aspects>
        </type>
</types> 
    <!-- Definition of custom aspects  -->
    <aspects>
        <aspect name="cmod:aspectBase">
            <title>Aspect base properties</title>
            <properties>
                <property name="cmod:property1">
                    <title>p1</title>
                    <description>p1</description>
                    <type>d:text</type>
                </property>
                <property name="cmod:property2">
                    <title>p2</title>
                    <description>p2</description>
                    <type>d:int</type>
                </property>
                <property name="cmod:property3">
                    <title>p3</title>
                    <description>p3</description>
                    <type>d:int</type>
                </property>
                <property name="cmod:property4">
                    <title>p4</title>
                    <description>p4</description>
                    <type>d:text</type>
                </property>
            </properties>
        </aspect>
        <aspect name="cmod:aspectFormat">
            <title>Aspect Format</title>
            <properties>
                <property name="cmod:formatProperty1">
                    <title>fp1</title>
                    <description>fp1</description>
                    <type>d:int</type>
                </property>
                <property name="cmod:formatProperty2">
                    <title>fp2</title>
                    <description>fp2</description>
                    <type>d:int</type>
                </property>
                <property name="cmod:formatProperty3">
                    <title>fp3</title>
                    <description>fp3</description>
                    <type>d:int</type>
                </property>
            </properties>
        </aspect>
        <aspect name="cmod:aspectMetadata">
            <title>Aspetto Metadata</title>
            <properties>
                <property name="cmod:metadataProperty1">
                    <title>mp1</title>
                    <description>mp1</description>
                    <type>d:text</type>
                    <constraints>
                        <constraint ref="cmod:liststring1" />
                    </constraints>
                </property>
                <property name="cmod:metadataProperty2">
                    <title>mp2</title>
                    <description>mp2</description>
                    <type>d:text</type>
                    <constraints>
                        <constraint ref="cmod:liststring2" />
                    </constraints>
                </property>
                <property name="cmod:metadataProperty3">
                    <title>mp3</title>
                    <description>mp3</description>
                    <type>d:boolean</type>
                </property>
            </properties>
        </aspect>
</aspects>
</model> 
```

名为 cmod-model-context.xml 的模型上下文

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>

<beans>
    <!-- Registration of new models -->
    <bean id="extension.dictionaryBootstrap" 
        parent="dictionaryModelBootstrap" 
        depends-on="dictionaryBootstrap">
        <property name="models">
            <list>
                <value>alfresco/extension/model/cmodModel.xml</value>
          </list>
        </property>
    </bean>

</beans> 
```

希望能帮助到你。

# mysql - 从mysql中的表中获取必须在另一个表中有相应记录的数据

> ID：15567172
> 
> 赞同：0
> 
> 时间：2013-03-22T09:47:12.317
> 
> 标签：mysql

我想显示来自表名电台的记录，其中电台在歌曲表中至少有一首歌曲。表结构

```
station
station_id
stration_name
station_description

song
song_id
station_id
song_location 
```

请建议我形成查询的方式，以显示歌曲表中有歌曲的电台数据。请指定一种不返回相应歌曲零计数的记录的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:52:33.680

您正在寻找的是[INNER JOIN](http://dev.mysql.com/doc/refman/5.6/en/join.html)。`stations.station_id`您可以通过和将您的电台表与您的歌曲表连接起来`songs.station_id`。这将起作用，因为[INNER JOIN](http://dev.mysql.com/doc/refman/5.6/en/join.html)仅返回满足连接谓词的行。

我在[SQL Fiddle](http://sqlfiddle.com/#!2/7db01/9)提供了一个示例，但我建议您花几分钟时间了解[JOIN](http://dev.mysql.com/doc/refman/5.6/en/join.html)的机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:53:07.017

```
SELECT DISTINCT something 
           FROM somewhere 
           JOIN somewhere_else 
             ON somewhere_else.other_thing = somewhere.thing; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:55:20.493

您可以在 将这些表连接在一起`station_id`。
看起来每首歌都链接到一个特定的电台。意思是在这些 ID ( `station_id`) 相等的地方，电台有这首歌...

# jquery - 如何在 jQuery 中同时运行实时搜索过滤器？

> ID：15567177
> 
> 赞同：1
> 
> 时间：2013-03-22T09:47:30.560
> 
> 标签：jquery

我有几个 HTML 块，比如下面名为**recordContainer**的**记录** `<div>`块，是动态生成的。要在查询时引用整个块，我正在使用：

`$(".records div.recordContainer").each(function(){`

```
 <div id="records">
        <div class="recordContainer" id="article0">
             <div class="lineDivide"></div>
             <span class="listLeadAuthor"> Brian May</span>

  <br /> 
             <span class="listSubject">Cheese</span>
            <br />
             <span class="listDate">2008</span>
       </div> 
</div> 
```

**我只想引用各个 span 元素**，因为我有三个不同的搜索框。

这是我要完成的工作的 JSFiddle。当我在 recordContainer 中输入作者姓名时，我想隐藏不匹配的整个其他 recordContainer，而不仅仅是作者姓名。我希望能够只搜索可见元素，而不是在每次搜索时重新开始。

[JSFiddle 这里](http://jsfiddle.net/Zv5rY/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:51:49.370

ID 是 # ：

```
$("#records div.recordContainer span.listLeadAuthor") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:59:34.657

你有这个ID：

```
div id="records"> 
```

但是您在 jQuery 中使用**类表示法`'.'`**使用`'#'` **For id 表示法来引用它。**

```
$("#records div.recordContainer span.listLeadAuthor").each(function(){
//-^---this one 
```

但我认为这会表现得更好：

```
$("div.recordContainer span.listLeadAuthor").each(function(){ 
```

# c# - 实体框架 TimeSpan - 时间错误

> ID：15567178
> 
> 赞同：5
> 
> 时间：2013-03-22T09:47:31.627
> 
> 标签：c#, entity-framework, service

我正在使用 EF 5 和 c#。

在我的主项目中，我使用 CodeFirst 创建我的数据库。我得到了这个实体：

```
 public class Shift {
    public string Name { get; set; }
    public TimeSpan StartTime { get; set; }
    public TimeSpan EndTime { get; set; }
    } 
```

TimeSpan 属性在数据库中创建为 time(7)，而不是 null。

在我的 MainProject 中，一切正常。

但是，当在同一个解决方案中从 Windows 服务项目（我使用 Mainproject 中的相同上下文和模型）访问数据库时，我收到此错误：

此行（在 Mainproject 中多次使用）：

```
context.Shifts.Load(); 
```

结果是

```
There is no store type corresponding to the conceptual side type 'Edm.Time(Nullable=True,DefaultValue=,Precision=)' of primitive type 'Time'. 
```

这个问题的原因是什么？

//编辑

有趣的是，我们的主要项目在没有我们的 helo 的情况下创建了 time Column。

我用我们主项目中的配置替换了服务的 App.Config 文件，现在它可以工作了吗？

我还是想知道为什么硬...

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,Log4net" />
  </configSections>
  <connectionStrings>
    <add name="DevConnectionString" connectionString="Data Source=xxxxxxIntegrated Security=True" providerName="System.Data.SqlClient" />
    <add name="Properties.Settings.DevConnectionString" connectionString="Integrated Security=TrueMultipleActiveResultSets=True" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <log4net>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="LogFileAppender" />
    </root>
    <appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender">
      <param name="File" value="log\Error.log" />
      <param name="AppendToFile" value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%n%-5p %d{yyyy-MM-dd hh:mm:ss} – %m%n" />
      </layout>
    </appender>
  </log4net>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Windows.Interactivity" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.5.0.0" newVersion="4.5.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T09:56:08.577

实体框架版本 5 不映射时间跨度。但是无论如何，您都可以使用解决方法来使用它。

只需将时间跨度存储为 TimeSpan 以进行操作，并将时间跨度存储为 Int64 以进行映射

```
public Int64 TimeSpanTicks{ get; set; }     
[NotMapped]
public TimeSpan TimeSpanValue
{
    get { return TimeSpan.FromTicks(TimeSpanTicks); }
    set { TimeSpanTicks= value.Ticks; }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-01T20:28:48.363

您的问题可能由您的 SqlServer 版本解释。

Entity Framework 5*确实*支持`TimeSpan`. 它`time`用作 Sql 支持类型。对该`time`类型的支持始于 SqlServer 2008。您是否可以从 SqlServer 2005 实例切换到 08 或更高版本？这将导致一切突然像你所经历的那样工作。

值得一提的是，将 TimeSpan 与 EF 一起使用可能会出现问题，因为后备类型 of`time(7)`将仅保存长度小于 24 小时的时间跨度。因此，通常使用 floAr 提到的解决方法。

# android - Android等宽字体大小

> ID：15567186
> 
> 赞同：4
> 
> 时间：2013-03-22T09:47:51.233
> 
> 标签：android, scala, canvas, fonts

我正在做一个图形代码编辑器，我可以通过拖动来修改常量。我想用蓝色矩形突出显示代码中的命令，使左右边框位于字符中间，但在某些情况下蓝色矩形仍然未对齐：

![突出问题](../Images/0597d2cbd2c5d5c2b314c508e5becb63.png)

我的想法是首先计算字符宽度和字符空间，然后将它们乘以我的命令在文本中的位置。

```
val mCodePaint = new TextPaint()
mCodePaint.setTypeface(Typeface.MONOSPACE)
mCodePaint.setAntiAlias(true)
mCodePaint.setSubpixelText(true)
mCodePaint.setColor(0xFF000000)
val dimText = new Rect()
val dimText1 = new Rect()
val dimText2 = new Rect()

final val s1 = "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW"
final val s2 = "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW"
// dimText1.width() = char_length * s1.length + space_between_chars*(s1.length-1)
// dimText2.width() = char_length * s2.length + space_between_chars*(s2.length-1)
def getCharWidth(): Float = {
  mCodePaint.getTextBounds(s1, 0, s1.length, dimText1)
  mCodePaint.getTextBounds(s2, 0, s2.length, dimText2)
  (dimText2.width() * (s1.length - 1) - dimText1.width() *(s2.length - 1))/(s1.length - s2.length)
}

def getIntercharWidth(): Float = {
  mCodePaint.getTextBounds(s1, 0, s1.length, dimText1)
  mCodePaint.getTextBounds(s2, 0, s2.length, dimText2)
  (dimText1.width * s2.length - dimText2.width * s1.length)/(s1.length - s2.length)
}

// The main function that draw the text
def drawRuleCode(canvas: Canvas, ...): Unit = {
  var char_width = getCharWidth() // At run time, equals 29
  var space_width = getIntercharWidth() // At run time, equals -10

  for(action <- ...) {
    ...
    val column = action.column
    val length = action.length
    val x1 = left_x+8 + column*char_width + (column-1)*space_width - 0.5f*space_width
    val x2 = x1 + length*char_width + (length-1)*space_width + 1*space_width
    rectFData.set(x1, y1, x2, y2)
    canvas.drawRoundRect(rectFData, 5, 5, selectPaint)
  }

  for(line <- ...) {
    ...
    canvas.drawText(s, left_x + 8, ..., mCodePaint)
  } 
```

您对如何克服这个小对齐问题有任何想法吗？有时它会产生巨大的差异，尤其是当表达式很长时。

编辑：我绘制了计算的文本边界，实际上它们是错误的。文本略大于 getTextBounds 给出的矩形（紫线）： ![在此处输入图像描述](../Images/96017c56376da26494dc3660ef7d004c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:32:17.407

我需要传递 scale 参数，而不是使用 getTextBounds，因为字体大小不会随画布线性缩放： [这里的解释](https://stackoverflow.com/a/7750971/1287856)

```
 var c = new Matrix()
 val c_array = new Array[Float](9)

// The main function that draw the text
def drawRuleCode(canvas: Canvas, ...): Unit = {
  var box_width = getBoxWidth()

  canvas.getMatrix(c)
  c.getValues(c_array)
  val scale = c_array(Matrix.MSCALE_X)  // Compute the current matrix scale
  var box_width = getBoxWidth(scale)

  for(action <- ...) {
    ...
    val column = action.column
    val length = action.length
    val x1 = left_x+8 + column*box_width
    val x2 = x1 + length*box_width
    rectFData.set(x1, y1, x2, y2)
    canvas.drawRoundRect(rectFData, 5, 5, selectPaint)
  }

def getBoxWidth(scale: Float): Float = {
  mCodePaint.setTextSize(fontSize * scale)
  val result = mCodePaint.measureText(s1).toFloat / s1.length / scale
  mCodePaint.setTextSize(fontSize )
  result
} 
```

# codeigniter - 如何将递归函数的结果传递给查看

> ID：15567189
> 
> 赞同：5
> 
> 时间：2013-03-22T09:48:06.547
> 
> 标签：codeigniter

我只使用控制器和视图。
使用以下代码，我正在显示帖子和回复的帖子。
我使用以下控制器和视图来显示帖子和回复。

通过使用查询 1，我从 post 表中为主题 id.(eg.topic id=34) 选择 post 并使用此获取 post id 30 和 31 。

通过使用查询 2，我从回复表中为每个帖子 ID 选择回复。
假设帖子 ID 30 的回复 ID 为 1，
帖子 ID 31 的回复 ID 为 2。

通过使用第二个 for 循环，我正在使用回复表中的 parent_id 列选择是否有任何回复有另一个回复。（使用递归调用 showreply() 函数）

我被困在如何从递归函数 showreply() 中传递结果。

通过使用我的代码，我显示：

30号帖---第30号 帖的
第一个回复31号帖 ---31号 帖的回复

但我想表现得像。

帖子 30
---第一个回复帖子 30
---回复第一个回复
帖子 31
---第一个回复帖子 31
---回复第一个回复

我已经使用递归函数调用来获取使用父 ID 进行回复的回复，但我不知道如何将其传递给查看。

**控制器：**

```
 <?php
public function viewpost()
    {  
        //Query 1

        $topicid = trim($this->input->get('topicid'));
        $q =$this->db->select(array(
            'fp.id as id',
            'fp.postdata',
            'fp.topicid'))
            ->from('forum_post AS fp')
            ->where('fp.topicid',$topicid)
            ->order_by('fp.id DESC')->limit(0,10)->get();

        $resultq1 = $q->result_array();
        $data['resultq1'] = $resultq1;

        //$data['resultq1'] = $res;
        $resultq2 = array();
        foreach ($resultq1 as $rec)
        {
            //Query 2

            $postid = $rec['id'];
             $q1 =$this->db->select(array(
                'fr.id as id',
                'fr.reply_data'))
                ->from('forum_reply AS fr')
                ->where('fr.postid',$postid)
                ->order_by('fr.id ')->get();

            $resultq2[$postid] = $q1->result_array();
            $data["resultq2"][$postid] = $resultq2[$postid];

            foreach($q1->result_array() as $row1)
            {

                //second for loop

                  $reply_id = $row1['id'];
                  $resultq3[$reply_id] = $this->showreply($reply_id); // call to function
                  $data["resultq3"] = $resultq3[$reply_id];

            }//inner for loop
        } //outer for loop

        $this->load->view('viewpost',$data);
    }

    public function showreply($reply_id)
    {

                    $reply_id1 = $reply_id;
                     $q1 =$this->db->select(array(
                        'fr.id as id',
                        'fr.reply_data',
                        'fr.parent_id'))
                        ->from('forum_reply AS fr')
                        ->where('fr.parent_id',$reply_id1)
                        ->order_by('fr.id ')->get();

                        //print $this->db->last_query();
                         $resultq4[$reply_id1] = $q1->result_array();
                         $data["resultq4"]= $resultq4[$reply_id1];

                        $i=0;
                        foreach($q1->result_array() as $row4)
                         { 
                                print_r($q1->result_array());
                                echo "id".$id = $row4['id'];
                                $parent_id = $row4['parent_id'];
                                if($parent_id!=0)
                                {  
                                    //$data['nested'][$i] = $q1->result_array();
                                    $this->showreply($id);  //recursive call to function                        
                                    $i++;
                                }
                         }

            return  $resultq4;
    }
?> 
```

**回复表的表结构：**

```
Rep_id    rep_text                       post_id     Parent_ID
-------------------------------------------------------------------------
  1         Reply for post 30              30           null
  2         Reply for post 31              31           null
  3         reply to Rep_id 1              null           1
  4         Rep_id 3 have Rep_id 4         null           3
  5         Reply for post 31              null           2
  6         Reply for Rep_id 5             null           5

---------------------------------------------------------------------------- 
```

**帖子表：**

```
post_id  topic id   post_title   post_desc 
-----------------------------------------
  30       34         xyz         sssss
  31       34         pqr         tyyyu

---------------------------------------- 
```

****视图：* ***

```
<div>
    <?php foreach($resultq1 as $row)
    {  ?> 
       <ul>
            <li></li>      // used to display post
      </ul>
    <?php foreach($resultq2 as $rows)
    {
        foreach($rows as $row1)
        {
            if($row['id']==$row1['postid'])
            {   ?>
            <ul>
              <li></li>      // used to display reyly for post 
            </ul>
           <?php foreach($resultq3 as $rows)
            {
                foreach($rows as $row2)
                { 
                  if($row1['id']==$row2['parent_id'])
                {   ?>
                    <ul>
                       <li></li>   // used to display reply for reply
                    </ul>
                 <?php     
                 }//if 
                } //inner for  $row2
            } // outr for $resultq3 
          } //if
        } //inner for of $row1
      }//outer for $resultq2
    } ?>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:34:35.270

我很抱歉，但这是一个非常糟糕的代码:(。我建议重写整个事情..

例子

表帖：

```
ID    type    title    content  parent_id    post_id
1    post      xyx      asd       Null        1
2    comment    asd     DEMO      1           1
2    comment    com     DEMO2     2           1 
```

现在这就是我的建议，

所有帖子都应该在一张桌子上

带有列**类型**（枚举字段 [post,comment]）

**parent_id**列，将指定其在树中的位置。

和一个将它们粘合在一起的 post_id 表。

现在你所要做的就是

```
$post = $this->db->select('*')->where('post_id',$post_id)->get('posts'); 
```

现在 $post 将包含您的所有帖子及其评论和子评论以及所有内容..

在单个数据库查询中，您现在要做的就是将它们组织在一个 assoc 数组中

```
$post = $this->db->select('*')->where('post_id',$post_id)->get('posts');

if($post->num_rows==0)return false;//end if there is no post found

//step 1 find main post
$main_post=FALSE;
foreach($post as $fp){
if($fp->type=='post')$main_post=array ('id'=>$fp->id,'title'=>$fp->title,'content'=>$fp->content);
}

if($main_post==false)return false;///THERE WAS NO MAIN POST FOUND !!!

//step 2 get comments on post

$comments=array();

foreach($post as $fp){
if($fp->type=='comment' && $fp->parent_id==$main_post['id']){
$comment[$fp->id]=array('title'=>$fp->title,'content'=>$fp->content,'child'=>array());
}
}

//step 3 comments of a comment

//IF comment is not on parent so its on another comment right :) !
foreach($post as $fp){
if($fp->type=='comment' && $fp->parent_id != $main_post['id']){
$comment[$fp->parent_id]['child'][]=array('title'=>$fp->title,'content'=>$fp->content);
}
} 
```

现在你有你所有的评论和评论 inisde $comment var，很容易循环和 $main_post 中的主要帖子 :) 一个简单的视图将是

```
<h2><?=$main_post['title']?></h2>
<div class='fp_post'>
<?=$main_post['post']?>
</div>
<ul class='comments'>

<?
foreach($comment as $c){
echo "<li> $c['title'] : $c['content']";

if(!empty($c['comment'])){
//there is a comments on this comment :)
echo "<ul>";
foreach($c['comment'] as $coc){echo "<li> $coc['title']: $coc['content']</li>";}
echo "</ul>";//end of comment of comments
}
echo "</li>"//end of a comment and its comments

}

?>
</ul> 
```

我希望这个简单的代码可以帮助您解决问题，这是一种简单而有效的方法，并且我确定您可以使用一些调试 try_catch 而不是在错误时返回 false，您也可以添加一些验证但这是现在不是我们的情况。

希望这个答案对你来说足够好:)

欢呼

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T05:54:32.940

这是我的回答：

**第一的**

考虑使用 MVC 方法，在应用程序的模型部分中分离您的数据库查询。

**第二**

您应该始终检查您的查询是否有结果。当您的查询没有结果并且您尝试对它们进行查询时，这可以防止您的代码出现致命错误。：

```
<?php
public function viewpost()
{  
     //Query 1

     $topicid = trim($this->input->get('topicid'));
     $q =$this->db->select(array(
          'fp.id as id',
          'fp.postdata',
          'fp.topicid'))
           ->from('forum_post AS fp')
           ->where('fp.topicid',$topicid)
           ->order_by('fp.id DESC')->limit(0,10)->get();
     //$data['resultq1'] = $res;
     $resultq2 = array();
     if($q->num_rows() > 0) 
     {
            $resultq1 = $q->result_array();
            foreach ($resultq1 as $rec)
            {
                //Query 2

                $postid = $rec['id'];
                $q1 =$this->db->select(array(
                    'fr.id as id',
                    'fr.reply_data'))
                    ->from('forum_reply AS fr')
                    ->where('fr.postid',$postid)
                    ->order_by('fr.id ')->get();

            // the rest of your code

     }

     // the rest of your code 
```

**第三**

我假设您将显示您的第一级回复与您的第二级回复相同（而不是嵌套）：

邮政

-- 回复帖子

--回复回复

邮政

-- 回复帖子

--回复回复

```
<div>
<?php
if($resultq1) 
{
   echo '<ul>';
   foreach($resultq1 as $row)
   { 
      echo '<li>';      
      echo $row;// used to display post
      if(resultq2)
      { 
         echo '<ul>';
         foreach($resultq2 as $rows)
         {
             echo '<li>';
             echo $rows; // display reply to post
             echo '</li>';
             if($resultq3)
             {
                foreach($resultq3 as $row1)
                {
                    echo '<li>';
                    echo $row1; // display reply to reply
                    echo '</li>';
                }
             }
          }
          echo '</ul>';
       }
       echo '</li>';
    }
    echo '</ul>';
  }
  </div> 
```

到目前为止，这是我的回答，希望对你也有帮助。

# delphi - Delphi如何将当地时间转换为UTC时间？以及如何将其从 UTC 转换回本地时间？

> ID：15567194
> 
> 赞同：18
> 
> 时间：2013-03-22T09:48:22.910
> 
> 标签：delphi, datetime, time, delphi-xe2, utc

我正在使用 Delphi，我正在尝试在我的数据库中使用 UTC 日期时间存储记录，然后当客户在他的本地日期时间读取它时将其恢复回来？知道如何进行此前后转换吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-22T09:57:17.140

这是我用来从 UTC 转换为本地的函数。

```
function LocalDateTimeFromUTCDateTime(const UTCDateTime: TDateTime): TDateTime;
var
  LocalSystemTime: TSystemTime;
  UTCSystemTime: TSystemTime;
  LocalFileTime: TFileTime;
  UTCFileTime: TFileTime;
begin
  DateTimeToSystemTime(UTCDateTime, UTCSystemTime);
  SystemTimeToFileTime(UTCSystemTime, UTCFileTime);
  if FileTimeToLocalFileTime(UTCFileTime, LocalFileTime) 
  and FileTimeToSystemTime(LocalFileTime, LocalSystemTime) then begin
    Result := SystemTimeToDateTime(LocalSystemTime);
  end else begin
    Result := UTCDateTime;  // Default to UTC if any conversion function fails.
  end;
end; 
```

如您所见，该函数将 UTC 日期时间转换如下：

*   日期时间 -> 系统时间
*   系统时间 -> 文件时间
*   文件时间 -> 本地文件时间（这是从 UTC 到本地的转换）
*   本地文件时间 -> 系统时间
*   系统时间 -> 日期时间

如何扭转这一点应该很明显。

* * *

请注意，此转换将夏令时视为*现在*而不是*转换时的状态*。XE 中引入的[`DateUtils.TTimeZone`](http://docwiki.embarcadero.com/Libraries/en/System.DateUtils.TTimeZone)类型试图做到这一点。代码变为：

```
LocalDateTime := TTimeZone.Local.ToLocalTime(UniversalDateTime); 
```

在另一个方向使用`ToUniversalTime`.

这个类似乎（松散地）模仿了 .net[`TimeZone`](http://msdn.microsoft.com/en-us/library/xe5cd9e6%28v=vs.110%29.aspx)类。

一句警告。不要期望在转换时考虑夏令时的*尝试是 100% 准确的。*根本不可能做到这一点。至少没有时间机器。这只是考虑未来的时间。即使是过去的时代也很复杂。Raymond Chen 在这里讨论了这个问题：[为什么夏令时不直观](http://blogs.msdn.com/b/oldnewthing/archive/2003/10/24/55413.aspx)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-22T10:14:34.687

您可以使用 kernel32 中的 TzSpecificLocalTimeToSystemTime 和 SystemTimeToTzSpecificLocalTime。

```
var
  Form1: TForm1;

function TzSpecificLocalTimeToSystemTime(lpTimeZoneInformation: PTimeZoneInformation; var lpLocalTime, lpUniversalTime: TSystemTime): BOOL; stdcall;
function SystemTimeToTzSpecificLocalTime(lpTimeZoneInformation: PTimeZoneInformation; var lpUniversalTime,lpLocalTime: TSystemTime): BOOL; stdcall;

implementation

function TzSpecificLocalTimeToSystemTime; external kernel32 name 'TzSpecificLocalTimeToSystemTime';
function SystemTimeToTzSpecificLocalTime; external kernel32 name 'SystemTimeToTzSpecificLocalTime';

{$R *.dfm}

Function DateTime2UnivDateTime(d:TDateTime):TDateTime;
var
 TZI:TTimeZoneInformation;
 LocalTime, UniversalTime:TSystemTime;
begin
  GetTimeZoneInformation(tzi);
  DateTimeToSystemTime(d,LocalTime);
  TzSpecificLocalTimeToSystemTime(@tzi,LocalTime,UniversalTime);
  Result := SystemTimeToDateTime(UniversalTime);

end;

Function UnivDateTime2LocalDateTime(d:TDateTime):TDateTime;
var
 TZI:TTimeZoneInformation;
 LocalTime, UniversalTime:TSystemTime;
begin
  GetTimeZoneInformation(tzi);
  DateTimeToSystemTime(d,UniversalTime);
  SystemTimeToTzSpecificLocalTime(@tzi,UniversalTime,LocalTime);
  Result := SystemTimeToDateTime(LocalTime);
end;

procedure TForm1.Button1Click(Sender: TObject);
var

 Date,Univdate,DateAgain:TDateTime;

begin
  Date := Now;
  Univdate := DateTime2UnivDateTime(Date);
  DateAgain := UnivDateTime2LocalDateTime(Univdate);
  Showmessage(DateTimeToStr(Date) +#13#10 + DateTimeToStr(Univdate)+#13#10 + DateTimeToStr(DateAgain));
end; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-22T10:11:01.763

当您使用 XE2 时，您可以使用`System.DateUtils.TTimeZone`.

您可以查看这篇解释方法及其工作原理和示例的 [好帖子：](http://alex.ciobanu.org/?p=373) [http ://alex.ciobanu.org/?p=373](http://alex.ciobanu.org/?p=373)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-11-02T11:56:07.860

如果有人在 2020 年需要答案：

确保包括

```
Uses 
System.DateUtils; 
```

然后对于UTC

```
function GetUTC(dt: TDateTime): TDateTime;
begin
  result := TTimeZone.Local.ToUniversalTime(dt);
end; 
```

和当地时间

```
function GetLocalTime(dt: TDateTime):TDateTime;
begin
  result := TTimeZone.Local.ToLocalTime(dt);
end; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T09:56:22.860

如果您的客户使用本地 Delphi 应用程序，这可以通过系统日期函数来完成。

但是，如果您处于客户端/服务器环境中（例如 Delphi 应用程序是 Web 服务器，并且客户端只接收 HTML 页面），则需要以不同的方式转换为用户的本地时间。服务器需要知道用户的时区，并进行适当的转换。

如果应用程序需要转换历史数据，夏令时也会引起头疼——您需要知道用户所在地区是否有夏令时。

在这些用例中，[Delphi 时区数据库](http://code.google.com/p/delphi-tzdb/)可能会有所帮助。

> TZDB 提供了一个简单的数据库和一个专门的时区类，允许访问时区数据库项目支持的所有时区。

我不知道有 SystemTimeToTzSpecificLocalTime 但只是读到[Jon Skeet 更喜欢 TZDB](https://stackoverflow.com/a/11580459/80901)进行时区处理。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-05T11:28:38.010

```
function NowUTC: TDateTime;
Var UTC: TSystemTime;
begin
  GetSystemTime(UTC);
  Result := SystemTimeToDateTime(UTC);
end;

function UTCToLocal(UTC: TDateTime): TDateTime;
begin
  Result := IncMinute(UTC, UTCToLocalTimeOffsetMinutes);
end;

function UTCToLocalTimeOffsetMinutes: Int16;
Var UTC: TSystemTime;
    UTC2: TSystemTime;
    t  : TDateTime;
    t2 : TDateTime;
begin
  GetSystemTime(UTC);
  GetLocalTime(UTC2);
  t  := SystemTimeToDateTime(UTC);
  t2 := SystemTimeToDateTime(UTC2);
  Result := System.DateUtils.MinutesBetween(t,t2);
end; 
```

# javascript - how to send whole array to servlet and how to access it

> ID：15567218
> 
> 赞同：0
> 
> 时间：2013-03-22T09:49:40.330
> 
> 标签：javascript, jquery, ajax, servlets, jqgrid

I am trying to get all jqgrid data in one array and sending to servelet,so far I am try with this-
var rows= jQuery("#list").jqGrid('getRowData'); var paras=new Array();

```
 for(var i=0;i<rows.length;i++)
                {
                    var row=rows[i];
                    paras.push($.param(row));
                    //alert(paras[i]);
                }
                alert(paras);
                $.ajax({
                type: "POST",
                url: "JQGridServlet?action=arraydata&paras="+paras,
                data: paras.join('and'),
                success: function(msg)
                {
                  alert(msg);
                }
                 }); 
```

but it send only first 'srno'.not whole array. please any body suggest me to how to send array to servlet and how to access it on servlet.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:35:18.733

Try this:

```
 var griddata= $( "#list" ).getRowData();
                var model = {
                    grid: griddata
                };

                var paras= JSON.stringify( model );

                alert(paras);
                $.ajax({
                type: "POST",
                url: "JQGridServlet?action=arraydata&paras="+paras,
                data: paras.join('and'),
                success: function(msg)
                {
                  alert(msg);
                }
                 }); 
```

# java - Java 中的地图大小不正确。如果我将 Key 和 Value 包装在 WeakReference 中，然后添加到 HashMap 中，则打印大小与预期不同

> ID：15567221
> 
> 赞同：0
> 
> 时间：2013-03-22T09:49:45.600
> 
> 标签：java, garbage-collection, weak-references, soft-references

如果我不注释第 1 行和第 2 行，则第 1 行会导致 OutOfMemoryError。如果我做相反的事情，它不会导致 OutOfMemoryError，因为 <Key,Value> 包装在 WeakReference 中。但我无法理解第 3 行的输出 ---- `i : 3869 Size : 3870 maxSize : 3870`。

来自 Java 文档：

> 因为垃圾收集器可能随时丢弃键，所以 WeakHashMap 可能表现得好像一个未知线程正在默默地删除条目。

基于此语句大小应该减少，但第 3 行输出似乎不断增加。为什么这样 ？

```
import java.lang.ref.WeakReference;
import java.util.HashMap;
import java.util.Map;

public class WrongWeakHashMapSize {

private static Map map = new HashMap();

public static void main(String[] args) {
    for (int i = 0, maxSize = 0; i < 10000000L; ++i) {
        /*
         * Line 1 Causes java.lang.OutOfMemoryError: Java heap space Error.
         * After this line i : 244 Size : 490 maxSize : 490.
         */
        map.put(new LargeObject(i), new Integer(i)); // Line 1
        /* After Commenting Line 1 :---- 
         * Line 2 Does not Cause java.lang.OutOfMemoryError. Because of WeakReference class use.I think Line 3
         * is showing wrong Size of MAP. it printed
         * i : 3869 Size : 3870 maxSize : 3870 which seems almost impossible
         * because 3870 objects of LargeObject can not be exist at a time.
         */
        map.put(new WeakReference(new LargeObject(i)), new WeakReference(new Integer(i))); // Line 2
        maxSize = maxSize < map.size() ? map.size() : maxSize; // Line 3
        System.out.println("i : " + i + " Size : " + map.size() + " maxSize : " + maxSize); // Line 4
    }
}

public static class LargeObject {
    private final byte[] space = new byte[1024 * 1024];
    private final int id;

    public LargeObject(int id) {
        this.id = id;
    }

    public int getId() {
        return id;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:56:06.410

那是因为`map.size()`为您提供了地图中键值对的数量。`weak`引用的垃圾收集**不会从映射中删除引用**，它只会垃圾对象。

will的唯一影响`WeakReference`是一些`LargeObject`s 和`Integer`s 将有资格被丢弃，键值映射仍然在映射中，因此仍然被计算在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:54:48.307

因为 size 是 map 实现中的 int 字段，并且 GC 在删除 WeakReference 后不会减少它

查看 WeakHashMap#size() 实现的详细信息，WeakHashMap 存储收集的 WeakReferences 队列并按需重新计算大小大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:22:23.243

来源：[http](http://weblogs.java.net/blog/2006/05/04/understanding-weak-references) ://weblogs.java.net/blog/2006/05/04/understanding-weak-references 参考队列

一旦 WeakReference 开始返回 null，它指向的对象就变成了垃圾，并且 WeakReference 对象几乎毫无用处。这通常意味着需要进行某种清理；例如，WeakHashMap 必须删除这些失效的条目，以避免持有越来越多的失效 WeakReference。

ReferenceQueue 类使跟踪死引用变得容易。如果将 ReferenceQueue 传递给弱引用的构造函数，则当它指向的对象变为垃圾时，引用对象将自动插入到引用队列中。然后，您可以定期处理 ReferenceQueue 并为死引用执行所需的任何清理。

# javascript - 我正在开发游戏，但我在 JavaScript 中动态创建的 div 上的点击事件不起作用

> ID：15567222
> 
> 赞同：0
> 
> 时间：2013-03-22T09:49:48.653
> 
> 标签：javascript, javascript-events

我正在开发一个平台游戏，为此我创建了一个被调用的 window.onload 事件。

在这个事件中，我创建了一个 div 元素，设置它的 ID，然后设置它的 onclick 属性。我绝对肯定我的语法是正确的，但是当我单击 Mario div 时它不会触发警报。

```
window.onload = showChoice;

// Let the player choose a character
function showChoice() {
    var opt1 = document.createElement("div");
    opt1.setAttribute("id","opt1_mario");
    opt1.onclick = function() {
        alert("You chose Mario!");
    }
    document.getElementById("container").appendChild(opt1);

    var opt2 = document.createElement("div");
    opt2.setAttribute("id","opt2_luigi");
    opt2.onclick = function() {
        alert("You chose Luigi!");
    }
    document.getElementById("container").appendChild(opt2);
} 
```

实际的游戏玩法有效，但我被一个糟糕的点击事件拖住了。我希望有人能指出我正确的方向。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T14:15:32.400

为很晚的反应道歉。事实证明，我将一些 z 索引设置为负整数，这导致了问题。:)

当我将 z 指数更改为正指数时，一切都很好。

# linux-kernel - 关于读取函数的参数如何在简单的字符驱动程序中传递

> ID：15567225
> 
> 赞同：0
> 
> 时间：2013-03-22T09:49:52.397
> 
> 标签：linux-kernel, linux-device-driver, device-driver, kernel-module, kernel

我是驱动程序编程的新手，我开始编写简单的字符驱动程序。然后我为我的字符驱动程序**mknod /dev/simple-driver c 250 0**创建了特殊文件。当它键入**cat /dev/simple-driver**时。它显示字符串“来自内核模式的Hello world！”。我知道那个功能

```
static const char    g_s_Hello_World_string[] = "Hello world tamil_vanan!\n\0";
    static const ssize_t g_s_Hello_World_size = sizeof(g_s_Hello_World_string);

    static ssize_t device_file_read(
                   struct file *file_ptr
                , char __user *user_buffer
                , size_t count
                , loff_t *possition)
    {
       printk( KERN_NOTICE "Simple-driver: Device file is read at offset = 
           %i, read bytes count = %u", (int)*possition  , (unsigned int)count );

       if( *possition >= g_s_Hello_World_size )
          return 0;

       if( *possition + count > g_s_Hello_World_size )
          count = g_s_Hello_World_size - *possition;

        if( copy_to_user(user_buffer, g_s_Hello_World_string + *possition,         count) != 0              )
          return -EFAULT;   

       *possition += count;
       return count;
    } 
```

被调用。这被映射到我的驱动程序的 file_opreation 结构中的 (*read)。我的**问题是如何调用这个函数，如何传递 struct file、char、count、offset 等参数 bcoz 是我只是键入了 cat 命令。请详细说明这是怎么发生的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:32:25.873

在 Linux 中，所有内容都被视为文件。文件的类型，是驱动文件还是普通文件，取决于它的挂载点。例如：如果我们考虑您的情况：`cat /dev/simple-driver`遍历设备文件的挂载点。

*   它从设备文件名`simple-driver`中检索主要和次要编号。

*   从这些编号（尤其是次要编号）中，它将驱动程序文件关联到您的字符驱动程序。

*   从驱动程序中，它使用`struct file ops`结构来查找读取函数，这不过是您的读取函数：

`static ssize_t device_file_read(struct file *file_ptr, char __user *user_buffer, size_t count, loff_t *possition)`

*   User_buffer 将始终采用 sizeof( `size_t count`)。最好检查缓冲区（在某些情况下它会引发警告）
*   字符串被复制到 User_buffer（`copy_to_user`用于在复制操作期间检查内核标志）。
*   第一个副本的位置为 0，它按 count:position+=count 的顺序递增。

一旦读取函数将缓冲区返回给 cat。并且 cat 刷新 std_out 上的缓冲区内容，这不过是您的控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:26:27.390

cat 将使用来自 glibc 的一些 posix 版本的读取调用。Glibc 会将参数放在堆栈或寄存器中（这取决于您的硬件架构）并将切换到内核模式。在内核中，这些值将被复制到内核堆栈。最后你的读取函数将被调用。

# php - sabredav carddav 不能在 ios 上工作，几乎不能在 android 上工作

> ID：15567230
> 
> 赞同：0
> 
> 时间：2013-03-22T09:50:10.683
> 
> 标签：php, ios, caldav, carddav, sabredav

我正在将 sabredav 集成到我的 web 应用程序中，我的应用程序 -> sabredab 之间的连接似乎很好。使用浏览器，我可以获得所需的所有电子名片。

当我使用 url 在 Android 上

```
example.org/sabredavcontroller/index/addressbooks/principalID/addressbookID 
```

它完美同步

但是在 ios (6) 上，它位于 example.org/.well-known/carddav

我已将其重定向到 example.org/sabredavcontroller/index/ 但随后它什么也不做，并尝试其他也不起作用的 url 并出错。

这是 ios 尝试为 carddav 设置帐户时的访问日志：

```
projectnexys.com:80 192.168.125.24 - - [22/Mar/2013:10:41:58 +0100] "PROPFIND /.well-known/carddav HTTP/1.1" 302 574 "-" "iOS/6.1.2 (10B146) Preferences/1.0"
projectnexys.com:80 192.168.125.24 - - [22/Mar/2013:10:41:59 +0100] "PROPFIND /sabredavcontroller/index/ HTTP/1.1" 401 985 "-" "iOS/6.1.2  (10B146) Preferences/1.0"
projectnexys.com:80 192.168.125.24 - member2@bla.bla [22/Mar/2013:10:41:59 +0100] "PROPFIND /sabredavcontroller/index/ HTTP/1.1" 207 1423 "-" "iOS/6.1.2 (10B146) Preferences/1.0"
projectnexys.com:80 192.168.125.24 - - [22/Mar/2013:10:42:00 +0100] "PROPFIND / HTTP/1.1" 302 818 "-" "iOS/6.1.2 (10B146) Preferences/1.0"
projectnexys.com:80 192.168.125.24 - - [22/Mar/2013:10:42:01 +0100] "PROPFIND /account HTTP/1.1" 200 2107 "-" "iOS/6.1.2 (10B146) Preferences/1.0"
projectnexys.com:80 192.168.125.24 - - [22/Mar/2013:10:42:01 +0100] "PROPFIND /principals/ HTTP/1.1" 404 890 "-" "iOS/6.1.2 (10B146) Preferences/1.0" 
```

（澄清一下：第一行是通过重定向找出 sabredav 的根：301 第二行是对根的请求，但它需要用户名/密码 第三行与第二行相同，但需要身份验证，然后放弃此网址并尝试其他选项）

第三行的结果是，将 curl 与以下命令一起使用：

```
curl --header "Content-Type: text/xml" -u "member2@bla.bla:bla" --request PROPFIND  projectnexys.com/sabredavcontroller/index/ | xmllint --format - 
```

-

```
<?xml version="1.0" encoding="utf-8"?>
<d:multistatus xmlns:d="DAV:" xmlns:s="http://sabredav.org/ns" xmlns:card="urn:ietf:params:xml:ns:carddav">
  <d:response>
    <d:href>/sabredavcontroller/index/</d:href>
    <d:propstat>
      <d:prop>
        <d:getlastmodified>Fri, 22 Mar 2013 09:36:52 GMT</d:getlastmodified>
        <d:resourcetype>
          <d:collection/>
        </d:resourcetype>
      </d:prop>
      <d:status>HTTP/1.1 200 OK</d:status>
    </d:propstat>
  </d:response>
  <d:response>
    <d:href>/sabredavcontroller/index/principals/</d:href>
    <d:propstat>
      <d:prop>
        <d:getlastmodified>Fri, 22 Mar 2013 09:36:52 GMT</d:getlastmodified>
        <d:resourcetype>
          <d:collection/>
        </d:resourcetype>
      </d:prop>
      <d:status>HTTP/1.1 200 OK</d:status>
    </d:propstat>
  </d:response>
  <d:response>
    <d:href>/sabredavcontroller/index/addressbooks/</d:href>
    <d:propstat>
      <d:prop>
        <d:getlastmodified>Fri, 22 Mar 2013 09:36:52 GMT</d:getlastmodified>
        <d:resourcetype>
          <d:collection/>
        </d:resourcetype>
      </d:prop>
      <d:status>HTTP/1.1 200 OK</d:status>
    </d:propstat>
  </d:response>
</d:multistatus> 
```

谁能给我一些可能出错的提示？

附言。我正在使用 SabreDAV [http://sabre.io/](http://sabre.io/)我还不能创建一个新标签，因为声誉的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:00:20.557

您缺少 ACL 插件。CardDAV 需要它！

# android - 检查textview是否在android中是椭圆的

> ID：15567235
> 
> 赞同：20
> 
> 时间：2013-03-22T09:50:26.080
> 
> 标签：android, textview, ellipsis

我`TextView`的宽度为`wrap content`. 在此`TextView`我设置了文本，但文本每次的长度都不相同。当文本很长时，我使用单行 true 和`ellipsize`：end。但现在我有一个问题。我想设置其他布局的可见性，但这取决于我的文本长度。如果文本太长而不适合屏幕，我想将可见性设置为 true，但是当文本很短且不需要椭圆大小时，我想将可见性设置为 false。所以我需要检查我的 TextView 的状态。当它的椭圆形时我想是`setVisible`真的，当它不是`setVisible`假的时候。我怎么能做到这一点。这就是我得到的：

```
tvAle.post(new Runnable() {

        @Override
        public void run() {

            int lineCount    = tvAle.getLineCount();
            Paint paint =  new Paint();
            paint.setTextSize(tvAle.getTextSize());
            final float size = paint.measureText(tvAle.getText().toString());
            Log.v("a", ""+size+" "+tvAle.getWidth());
            if ((int)size > (tvAle.getWidth()+10)) {
                allergiesLayout.setVisibility(View.VISIBLE);
            }

            else
                allergiesLayout.setVisibility(View.GONE);

        } 
```

但这个解决方案不起作用。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-22T10:02:36.010

您可以使用提供的此方法：[getEllipsisCount](http://developer.android.com/reference/android/text/StaticLayout.html#getEllipsisCount%28int%29)

```
Layout layout = textview1.getLayout();
if(layout != null) {
    int lines = layout.getLineCount();
    if(lines > 0) {
        int ellipsisCount = layout.getEllipsisCount(lines-1);
        if ( ellipsisCount > 0) {
            Log.d(TAG, "Text is ellipsized");
        } 
    } 
} 
```

可以通过 getLineCount() 获取行的位置

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-03T12:23:01.883

好吧，公认的解决方案确实有效，但错过了一些极端情况，因为它只会检查最后一行的椭圆字符。如果我们有一个由两行组成的 TextView 并使用[TruncateAt.START](http://developer.android.com/reference/android/text/TextUtils.TruncateAt.html#START "developer.android.com - 参考 - TextUtils.TruncateAt: TruncateAt.START")在其开头截断文本，则接受的答案将失败。：-/

添加[ViewTreeObserver.OnPreDrawListener](http://developer.android.com/reference/android/view/ViewTreeObserver.OnPreDrawListener.html "developer.android.com - 参考 - ViewTreeObserver.OnPreDrawListener")对我来说似乎更像是一个非常昂贵的开销。因此，我对已接受答案的代码进行了以下改进：

```
/**
 * Checks if the text of the supplied {@link TextView} has been ellipsized.
 *
 * @param textView
 *         The {@link TextView} to check its text.
 *
 * @return {@code True} if the text of the supplied {@code textView} has been ellipsized.
 */
public static boolean isTextViewEllipsized(final TextView textView) {
    // Check if the supplied TextView is not null
    if (textView == null) {
        return false;
    }

    // Check if ellipsizing the text is enabled
    final TextUtils.TruncateAt truncateAt = textView.getEllipsize();
    if (truncateAt == null || TextUtils.TruncateAt.MARQUEE.equals(truncateAt)) {
        return false;
    }

    // Retrieve the layout in which the text is rendered
    final Layout layout = textView.getLayout();
    if (layout == null) {
        return false;
    }

    // Iterate all lines to search for ellipsized text
    for (int line = 0; line < layout.getLineCount(); ++line) {

        // Check if characters have been ellipsized away within this line of text
        if (layout.getEllipsisCount(line) > 0) {
            return true;
        }
    }

    return false;
} 
```

不过，仍有改进的余地。但是这种方法确实足以满足我的用例。更正和改进表示赞赏。:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-14T17:24:20.763

使用 getEllipsisCount 不适用于其中包含空行的文本。我使用以下代码使其工作：

```
message.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
        @Override
        public boolean onPreDraw() {

            if(m.isEllipsized == -1) {
                Layout l = message.getLayout();
                if (message.getLineCount() > 5) {
                    m.isEllipsized = 1;
                    message.setMaxLines(5);
                    return false;
                } else {
                    m.isEllipsized = 0;
                }
            }
            return true;
        }
    }); 
```

确保不要在 XML 中设置 maxLineCount。然后你可以检查代码中的lineCount，如果它大于某个数字，你可以返回false取消TextView的绘制并设置行数以及一个标志来保存textView是否太长或不是。textview 将使用正确的行数再次绘制，您将知道它是否带有标志的椭圆。

然后，您可以使用 isEllipsized 标志来执行您需要的任何操作。

# blackberry - 黑莓7开发入门？

> ID：15567248
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:51:01.340
> 
> 标签：blackberry, blackberry-webworks

有人可以为我指出学习如何为黑莓 7 开发的正确方向吗？

实际上我需要的只是实现推送通知并打开一个 Web URL 而已。

我看到这个平台有不同的框架，比如 webWorks 等。

虽然我有点困惑.. 我不想写 Javascript 或 HTML 或 CSS。

我想编写能够推送并加载我已经拥有的外部 URL 的本机代码。

任何关于那个或一些信息的教程都会很棒:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:22:49.203

试试这个 -

```
Client side code -

// Main Class-
class App extends UiApplication {
 private static App theApp;
  public App() {
       pushScreen(new register());    
    }

  public static void main(String[] args) {
          if (args.length > 0 && args[0].equals("BB_push") ){
             theApp = new App();
             theApp.enterEventDispatcher();   

            }
        else {      
            BackgroundApplication backApp=new BackgroundApplication();
            backApp.setupBackgroundApplication();
            backApp.enterEventDispatcher();

       }       
    }  
}

//Register Class-
public class register extends MainScreen{
    public register(){
    final ButtonField btn=new ButtonField("Register");
        add(btn);
 FieldChangeListener listener=new FieldChangeListener() {
               public void fieldChanged(Field field, int context) {

                   if(field==btn){

                     registerBpas();

                   }

               }};
    btn.setChangeListener(listener);

}
}

public static void registerBpas() {

    new Thread() {
        public void run() {
            try {
            final String registerUrl = formRegisterRequest(BPAS_URL, APP_ID, null) + ";deviceside=false;ConnectionType=mds-public";
            System.out.println("\n\n\n msg registerBPAS URL is:  "+ registerUrl);
            HttpConnection httpConnection = (HttpConnection) Connector.open(registerUrl);
            InputStream is = httpConnection.openInputStream();
            String response = new String(IOUtilities.streamToBytes(is));
            System.out.println("\n\n\n\n\n\n msg RESPOSE CODE :    " + response);
            httpConnection.close();
            String nextUrl = formRegisterRequest(BPAS_URL, APP_ID, response) + ";deviceside=false;ConnectionType=mds-public";
            System.out.println("\n\n\n\n\n\n msg nextUrl :    " + nextUrl);
            HttpConnection nextHttpConnection = (HttpConnection) Connector.open(nextUrl);
            InputStream nextInputStream = nextHttpConnection.openInputStream();
            response = new String(IOUtilities.streamToBytes(nextInputStream));
            System.out.println("\n\n\n\n\n\n msg RESPOSE CODE 1:    " + response);
            nextHttpConnection.close();
            if (REGISTER_SUCCESSFUL.equals(response) || USER_ALREADY_SUBSCRIBED.equals(response)) {
                Dialog.alert("msg Registered successfully for BIS push");

                System.out.println("msg Registered successfully for BIS push");
            } else {
                Dialog.alert("msg BPAS rejected registration");
                System.out.println("msg BPAS rejected registration");
            }
        } catch (final IOException e) {
            Dialog.alert("msg IOException on register() " + e + " " + e.getMessage());
            System.out.println("msg IOException on register() " + e + " " + e.getMessage());
        }
    }
    }.start();
}

private static String formRegisterRequest(String bpasUrl, String appId, String token) {
    StringBuffer sb = new StringBuffer(bpasUrl);
    sb.append("/mss/PD_subReg?");
    sb.append("serviceid=").append(appId);
    sb.append("&osversion=").append(DeviceInfo.getSoftwareVersion());
    sb.append("&model=").append(DeviceInfo.getDeviceName());
    if (token != null && token.length() > 0) {
        sb.append("&").append(token);
    }
    return sb.toString();
}
}

public static void close(Connection conn, InputStream is, OutputStream os) {
    if (os != null) {
        try {
            os.close();
        } catch (IOException e) {
        }
    }
    if (is != null) {
        try {
            is.close();
        } catch (IOException e) {
        }
    }
    if (conn != null) {
        try {
            conn.close();
        } catch (IOException e) {
        }
    }
}

//Background listener class

class BackgroundApplication extends Application {  

    public BackgroundApplication() {
        // TODO Auto-generated constructor stub
    }
    public void setupBackgroundApplication(){

        MessageReadingThread messageReadingThread = new MessageReadingThread();
        messageReadingThread.start();

    }  

    private static class MessageReadingThread extends Thread { private boolean running;
        private ServerSocketConnection socket;
        private HttpServerConnection conn;
        private InputStream inputStream;
        private PushInputStream pushInputStream;

        public MessageReadingThread() {
            this.running = true;
        }

        public void run() {

             String url = "http://:" + Port;
             url += ";deviceside=false;ConnectionType=mds-public";
             if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) && RadioInfo.areWAFsSupported(RadioInfo.WAF_WLAN)) {
                 url += ";interface=wifi";
                 }

            try {
                socket = (ServerSocketConnection) Connector.open( url );
            } catch( IOException ex ) {
                // can't open the port, probably taken by another application
                onListenError( ex );
            }

            while( running ) {
                try {
                    Object o = socket.acceptAndOpen();
                    conn = (HttpServerConnection) o;
                    inputStream = conn.openInputStream();
                    pushInputStream = new MDSPushInputStream( conn, inputStream );
                    PushMessageReader.process( pushInputStream, conn );
                } catch( Exception e ) {
                    if( running ) {
                      //  Logger.warn( "Failed to read push message, caused by " + e.getMessage() );
                        running = false;
                    }
                } finally {
                   // PushUtils.close( conn, pushInputStream, null );
                }
            }

          //  Logger.log( "Stopped listening for push messages" );
        }

        public void stopRunning() {
            running = false;
            //PushUtils.close( socket, null, null );
        }

        private void onListenError( final Exception ex ) {
           // Logger.warn( "Failed to open port, caused by " + ex );
          System.out.println(ex);
        }
    }

}
//push message reader class -

// HTTP header property that carries unique push message ID
    private static final String MESSAGE_ID_HEADER = "Push-Message-ID";
    // content type constant for text messages
    private static final String MESSAGE_TYPE_TEXT = "text";
    private static final int MESSAGE_ID_HISTORY_LENGTH = 10;
    private static String[] messageIdHistory = new String[MESSAGE_ID_HISTORY_LENGTH];
    private static byte historyIndex;

    private static byte[] buffer = new byte[15 * 1024];
public static void process(PushInputStream pis, Connection conn) {
        System.out.println("Reading incoming push message ...");

        try {

            HttpServerConnection httpConn;
            if (conn instanceof HttpServerConnection) {
                httpConn = (HttpServerConnection) conn;
            } else {
                throw new IllegalArgumentException("Can not process non-http pushes, expected HttpServerConnection but have "
                        + conn.getClass().getName());
            }

            String msgId = httpConn.getHeaderField(MESSAGE_ID_HEADER);
            String msgType = httpConn.getType();
            String encoding = httpConn.getEncoding();

            System.out.println("Message props: ID=" + msgId + ", Type=" + msgType + ", Encoding=" + encoding);

            boolean accept = true;
            if (!alreadyReceived(msgId)) {
                byte[] binaryData;

                if (msgId == null) {
                    msgId = String.valueOf(System.currentTimeMillis());
                }

                if (msgType == null) {
                    System.out.println("Message content type is NULL");
                    accept = false;
                } else if (msgType.indexOf(MESSAGE_TYPE_TEXT) >= 0) {
                    // a string
                    int size = pis.read(buffer);
                    binaryData = new byte[size];
                    System.arraycopy(buffer, 0, binaryData, 0, size);   

                    PushMessage message = new PushMessage(msgId, System.currentTimeMillis(), binaryData, true, true );
                    String text = new String( message.getData(), "UTF-8" );
                     try{
                            final Dialog screen = new Dialog(Dialog.D_OK_CANCEL, " "+text,
                                    Dialog.OK,
                                    //mImageGreen.getBitmap(),
                                    null, Manager.VERTICAL_SCROLL);
                            final UiEngine ui = Ui.getUiEngine();
                            Application.getApplication().invokeAndWait(new Runnable() {
                                public void run() {
                                    NotificationsManager.triggerImmediateEvent(0x749cb23a76c66e2dL, 0, null, null);
                                    ui.pushGlobalScreen(screen, 0, UiEngine.GLOBAL_QUEUE);

                                }
                            });
                            screen.setDialogClosedListener(new MyDialogClosedListener());
                            }
                            catch (Exception e) {
                                // TODO: handle exception
                            }

                    // TODO report message
                }  else {
                    System.out.println("Unknown message type " + msgType);
                    accept = false;
                }
            } else {
                System.out.println("Received duplicate message with ID " + msgId);
            }
            pis.accept();
        } catch (Exception e) {
            System.out.println("Failed to process push message: " + e);
        }
    }

private static boolean alreadyReceived(String id) {
        if (id == null) {
            return false;
        }

        if (Arrays.contains(messageIdHistory, id)) {
            return true;
        }

        // new ID, append to the history (oldest element will be eliminated)
        messageIdHistory[historyIndex++] = id;
        if (historyIndex >= MESSAGE_ID_HISTORY_LENGTH) {
            historyIndex = 0;
        }
        return false;
    }

public class PushMessage{

    private String id;
    private long timestamp;
    private byte[] data;
    private boolean textMesasge;
    private boolean unread;

    public PushMessage( String id, long timestamp, byte[] data, boolean textMesasge, boolean unread ) {
        super();
        this.id = id;
        this.timestamp = timestamp;
        this.data = data;
        this.textMesasge = textMesasge;
        this.unread = unread;
    }

    public String getId() {
        return id;
    }

    public long getTimestamp() {
        return timestamp;
    }

    public byte[] getData() {
        return data;
    }

    public boolean isTextMesasge() {
        return textMesasge;
    }

    public boolean isUnread() {
        return unread;
    }

    public void setUnread( boolean unread ) {
        this.unread = unread;
    }

}

public class MyDialogClosedListener implements DialogClosedListener
    {

    public void dialogClosed(Dialog dialog, int choice)
    {
        if(dialog.equals(dialog))
        {
           if(choice == -1)
            {
                //Your code for Press OK
            }
            if(choice == 1)
            {
                //Your code for Press Cancel

            }
                   }
   }
}

Server sode PHP code is given Below -

ini_set('display_errors','1');
error_reporting(E_ALL);

    // APP ID provided by RIM
$appid = 'app id';
// Password provided by RIM
$password = 'password';
//Deliver before timestamp
$deliverbefore = gmdate('Y-m-d\TH:i:s\Z', strtotime('+time minutes'));

//An array of address must be in PIN format or "push_all"
$addresstosendto[] = 'your pin';

$addresses = '';
foreach ($addresstosendto as $value) {
$addresses .= '
';
}

// create a new cURL resource
$err = false;
$ch = curl_init();
$messageid = microtime(true);

$data = '--mPsbVQo0a68eIL3OAxnm'. "\r\n" .
'Content-Type: application/xml; charset=UTF-8' . "\r\n\r\n" .
'

'
. $addresses .
'
' . "\r\n" .
'--mPsbVQo0a68eIL3OAxnm' . "\r\n" .
'Content-Type: text/plain' . "\r\n" .
'Push-Message-ID: ' . $messageid . "\r\n\r\n" .
stripslashes('r') . "\r\n" .
'--mPsbVQo0a68eIL3OAxnm--' . "\n\r";

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "https://pushapi.eval.blackberry.com/mss/PD_pushRequest");//"https://cp2991.pushapi.eval.blackberry.com/mss/PD_pushRequest"
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_USERAGENT, "Hallgren Networks BB Push Server/1.0");
curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_USERPWD, $appid . ':' . $password);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: multipart/related; boundary=mPsbVQo0a68eIL3OAxnm; type=application/xml", "Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2", "Connection: keep-alive"));

// grab URL and pass it to the browser
echo $xmldata = curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch);

//Start parsing response into XML data that we can read and output
$p = xml_parser_create();
xml_parse_into_struct($p, $xmldata, $vals);
$errorcode = xml_get_error_code($p);
if ($errorcode > 0) {
echo xml_error_string($errorcode);
$err = true;
}
xml_parser_free($p);

echo 'Our PUSH-ID: ' . $messageid . "
\n";
if (!$err && $vals[1]['tag'] == 'PUSH-RESPONSE') {
echo 'PUSH-ID: ' . $vals[1]['attributes']['PUSH-ID'] . "
\n";
echo 'REPLY-TIME: ' . $vals[1]['attributes']['REPLY-TIME'] . "
\n";
echo 'Response CODE: ' . $vals[2]['attributes']['CODE'] . "
\n";
echo 'Response DESC: ' . $vals[2]['attributes']['DESC'] . "
\n";
} else {
echo 'An error has occured
' . "\n";
echo 'Error CODE: ' . $vals[1]['attributes']['CODE'] . "
\n";
echo 'Error DESC: ' . $vals[1]['attributes']['DESC'] . "
\n";
}

?> 
```

# c++ - C++ new 和 delete 运算符重载

> ID：15567249
> 
> 赞同：0
> 
> 时间：2013-03-22T09:51:04.937
> 
> 标签：c++, overloading, operator-keyword

```
void operator delete(void *p)
{
    printf("\nDELETE");

    // code to actually delete/free object
}

int _tmain(int argc, _TCHAR* argv[])
{

    int *p = new int(10);

    delete p;

    getchar();
    return 0;
} 
```

我收到错误**运算符删除已定义**

我想全局覆盖 new 和 delete 运算符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:09:45.283

释放函数可以通过两种方式替换/重载：

在全局范围内：为了调用它，重载分配函数的签名必须在释放位置可见，隐式声明的默认释放函数除外。此分配函数将用于本地范围内当前程序中具有相应参数的所有解除分配：重载的运算符 delete 必须是类的静态公共成员函数。此释放函数将仅用于该特定类的释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:55:40.827

你是只*实现*它还是*声明*它？Afaik，您只需要*实现*它。

# html - SEO：对搜索引擎不可见的灯箱图像

> ID：15567253
> 
> 赞同：0
> 
> 时间：2013-03-22T09:51:08.903
> 
> 标签：html, ajax, seo, lightbox, google-image-search

我们有一个网站，其中大部分图像是通过 Ajax 加载加载到灯箱上的（所以最初没有加载，而是通过单击打开灯箱），因此搜索引擎在抓取此页面时无法索引这些图像。有什么方法可以改善这些灯箱图像的 SEO 吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:16:34.917

当用户点击打开灯箱时，您需要为 Googlebot 提供替代方案。我将假设您在用户单击的页面中有一个图像缩略图。在缩略图上，您有一个导致 AJAX 显示灯箱的单击事件。

您还需要将缩略图直接链接到灯箱将显示的同一图像的大版本。这是没有 Javascript 的客户端的替代方案。然后打开灯箱的 onclick 事件需要让使用 javascript 的用户*也*`return false`不要打开链接。这是它的代码：

 *```
<a onclick="lightbox('my-picture');return false;" href="/fullpics/my-picture.jpg">
    <img src="/thumbnails/my-picture.jpg" border=0>
</a> 
```

事实证明，无论您的图片是显示在页面中还是从页面链接，Googlebot 都不关心图片搜索。所以对于 Googlebot 来说，出于图像优化的目的，上述与 相同`<img src="/fullpics/my-picture.jpg">`，但它在您的页面中占用的可见空间要少得多，并且更类似于您的网站当前的设计方式。

您还应该将缩略图放入`robots.txt`其中，以便 Google 不会尝试将它们编入索引：

```
Disallow: /thumbnails/ 
```

您制作的全尺寸图像越大，它们的排名就越好。谷歌表示它更喜欢质量更好的图像。据我所知，“更好的质量”只是“更大”的委婉说法。我建议在较大的方向上至少 800 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:57:50.683

不是该主题的专家，但我的方法是始终让打开灯箱的“链接”与图像实际链接到图像。由于灯箱可能是使用 JavaScript 打开的，因此取消将浏览器指向图像的默认操作并改为打开灯箱。不用说：当您明确链接到它时，搜索引擎将能够找到您的图像。作为一个额外的好处：这也适用于关闭 JavaScript 的用户（他们不必处理什么都不做的链接）。*

# c++ - perror 和 std::cerr 使用

> ID：15567256
> 
> 赞同：5
> 
> 时间：2013-03-22T09:51:20.630
> 
> 标签：c++

谁能告诉我`std::cerr`和`perror`

```
void perror ( const char * str ); 
```

我想知道在 C++ 应用程序中哪一个更可取，以及为什么它更可取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:56:34.020

[http://www.cplusplus.com/reference/cstdio/perror/](http://www.cplusplus.com/reference/cstdio/perror/)

`perror`并且`cerr`是不同的东西。`cerr`- 是`std::ostream`与 连接的类的对象`stderr`。并`perror`打印`errno`和你的字符串在`stderr`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:00:34.447

您的问题基本上归结为 iostream 与 stdio。[此处](https://stackoverflow.com/questions/2872543/printf-vs-cout-in-c)已回答了类似的问题。

如果你在 C++ 中工作，除非你想做一些非常具体的事情，否则 cerr 绝对比 perror 更可取。唯一真正的区别是 cerr 实际上与

```
fprintf(stderr, const char*, arg1, ...); 
```

而 perror 还将根据 errno 加载并显示适当的错误消息。你也不能用 perror 显示变量，所以你不能这样做

```
perror("Something went wrong, i: %d", i); 
```

除非你预处理你的错误信息。

# bash - 根据输出将过程输出存储在文件中（BASH）

> ID：15567257
> 
> 赞同：2
> 
> 时间：2013-03-22T09:51:31.267
> 
> 标签：bash, awk, grep

这是问题所在：我的进程以以下格式将一系列数据写入标准输出：

```
[1] i: 0 X: 0 Y: 0
[1] i: 1 X: 1 Y: 0
[2] i: 0 X: 0 Y: 0
[2] i: 1 X: 1 Y: 0
[2] i: 2 X: 2 Y: 0
[4] i: 0 X: 0 Y: 0 
```

它是一个用 MPI 编写的分布式解决方案。

我想要做的是根据括号之间的值（即处理器 ID）将输出放入不同的文件中，以便我可以更轻松地找到每个进程崩溃的位置。

到目前为止，我的方法是运行

```
test.sh > out | grep '\[2\]' 
```

*然后，*我对每个感兴趣的数字使用 grep 。后来我做了这个

```
cat out | grep '\[2\]' > out.2 
```

存储每个进程的结果（提示：我是 bash 新手）。我的问题是这样的：

我该怎么做

```
test.sh > out | grep '\[${N}\]' > out.${N} 
```

每个进程的结果被发送到自己的文件中？这些进程不会写入文件，因此解决方案必须使用 bash（甚至可能是 awk）。

编辑1：
进程不相互交谈，因此无需保留每个进程写入标准输出的顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:57:16.547

您可以将您的输出通过管道`test.sh`传输到

```
..|awk -F'[][]' '{print $0 > ("out."$2)}' 
```

此行将为您生成文件。

使用您的示例输入进行测试：

```
kent$  echo "[1] i: 0 X: 0 Y: 0
[1] i: 1 X: 1 Y: 0
[2] i: 0 X: 0 Y: 0
[2] i: 1 X: 1 Y: 0
[2] i: 2 X: 2 Y: 0
[4] i: 0 X: 0 Y: 0"|awk -F'[][]' '{print $0 > ("out."$2)}'

kent$  head out*
==> out.1 <==
[1] i: 0 X: 0 Y: 0
[1] i: 1 X: 1 Y: 0

==> out.2 <==
[2] i: 0 X: 0 Y: 0
[2] i: 1 X: 1 Y: 0
[2] i: 2 X: 2 Y: 0

==> out.4 <==
[4] i: 0 X: 0 Y: 0 
```

# jquery - 存储对此 jquery 对象的引用的正确方法是什么？

> ID：15567266
> 
> 赞同：0
> 
> 时间：2013-03-22T09:51:53.687
> 
> 标签：jquery, jquery-selectors

说，我想获取几个元素的引用，我使用这样的选择器：

`$(input)`...然后用它做点什么

但是，如果我想保留该参考，其中哪一个是正确的方法？

`var el = $('input');`

`$el = $('input');`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:57:37.450

`var el = $(input);` // 创建一个局部变量`el`

`$el = $(input);` // 创建一个全局变量`$el`

`$`没有什么特别的`var`

以`$`变​​量名开头只是一种约定，表示该变量不是普通变量，而是一个 jQuery 对象（或 jQuery 对象的集合）。这不是强制性的，而是一个好习惯。

但是，如果你不放`var`，它将使变量成为全局变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:53:19.330

这将为您完成该任务

```
$('a').click(function() {
    var $anchor = $(this);
    //var anchor = $(this);
    $anchor.fadeOut();
    //anchor.fadeOut();
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T09:54:06.740

任何一个

```
var el = $(input); 
```

或者

```
var $el = $(input); 
```

始终使用`var`. 在变量名之前使用一个`$`符号只是一些人用来表示它是一个 jQuery 对象的做法，这不是必需的，但有助于使您的代码更具可读性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T09:54:57.870

两者都是正确的，但区别如下，

`var el = $(input);`这将创建变量并为其赋值。

`$el = $(input);``global`这将为先前定义的变量或`local`范围内的变量赋值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T09:55:30.563

这一切都取决于...示例

```
function A() {
    var $el = $(input);
    function B() {
        $el = $(input2);
    }

    // $el here is $(input2)
} 

function C() {
    var $el = $(input);
    function D() {
        var $el = $(input2);
    }

    // $el here is $(input)
} 
```

这一切都取决于你的范围......所以计划好......

# xpath - xpath match - 查找值不在值集中的标签是否存在

> ID：15567268
> 
> 赞同：3
> 
> 时间：2013-03-22T09:52:07.403
> 
> 标签：xpath

我有以下 XML

```
<Record>
   <subRecord>
      <Type>A</Type>
   </subRecord>
</Record>
<Record>
   <subRecord>
      <Type>B</Type>
   </subRecord>
</Record>
<Record>
   <subRecord>
      <Type>C</Type>
   </subRecord>
</Record> 
```

我想找到 if not(exists(//Record/subRecord/Type where Type not in ('A', 'B'))。通常在上面的例子中我应该得到一个 false，因为有一个 //record/subRecord /Type=C。请帮助我为这种情况提供一个 xpath。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:03:00.533

在使其成为有效的 XML 片段（根标记）时：

```
<Data>
    <Record>
        <subRecord>
            <Type>A</Type>
        </subRecord>
    </Record>
    <Record>
        <subRecord>
            <Type>B</Type>
        </subRecord>
    </Record>
    <Record>
        <subRecord>
            <Type>C</Type>
        </subRecord>
    </Record>
</Data> 
```

这个 XPATH 将返回`<Type>C</Type>`：

```
Record/subRecord/Type[not(.="A" or .="B")] 
```

如果有任何不是，则此 XPATH 将返回 True`A`或`B`。

```
count(Record/subRecord/Type[not(.="A" or .="B")])>0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:31:34.263

**利用：**

```
not(/*/*/*/Type[not(contains('|A|B|', concat('|',.,'|')))]) 
```

在要检查的值列表/集非常长的情况下，此表达式非常实用。它还可以轻松地将管道分隔的值列表作为参数传递。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "not(/*/*/*/Type[not(contains('|A|B|', concat('|',.,'|')))])"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（通过将提供的片段包装到单个顶部元素中形成）：

```
<t>
    <Record>
        <subRecord>
            <Type>A</Type>
        </subRecord>
    </Record>
    <Record>
        <subRecord>
            <Type>B</Type>
        </subRecord>
    </Record>
    <Record>
        <subRecord>
            <Type>C</Type>
        </subRecord>
    </Record>
</t> 
```

**对 XPath 表达式求值，并将该求值的结果复制到输出中：**

```
false 
```

**在*此*XML 文档上应用相同的转换时：**

```
<t>
    <Record>
        <subRecord>
            <Type>A</Type>
        </subRecord>
    </Record>
    <Record>
        <subRecord>
            <Type>B</Type>
        </subRecord>
    </Record>
</t> 
```

**再次产生正确的结果**：

```
true 
```

**说明**：

直接使用**[双重否定法](http://en.wikipedia.org/wiki/Double_negation)**。

# visual-studio-2012 - Visual Studio 2012 - 数据库项目 - 设置发布的默认配置文件

> ID：15567272
> 
> 赞同：26
> 
> 时间：2013-03-22T09:52:16.623
> 
> 标签：visual-studio-2012, publish, database-project

只是想知道是否有人知道如何将保存的发布配置文件设置为默认配置文件，即当我选择发布时自动加载的配置文件。我喜欢新的配置文件方法，但在开发过程中我不得不一遍又一遍地重新选择相同的配置文件。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-19T22:01:15.980

在 VS2012 及更高版本中，您可以通过右键单击 .xml 配置文件并单击`Set As Default Publish Profile`选项来设置默认发布配置文件。然后，当您单击发布项目时，它将自动加载。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-02T10:28:21.110

所以我刚刚发现了如何执行此操作，右键单击您希望发布的特定 .xml 文件（例如 Debug.publish.xml），它会自动加载到“发布”面板中。

双击 XML 文件也可以

最新的 Visual Studio 2012 更新现在还包括右键单击选项：

1 - 设置为默认值
2 - 发布

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-07T16:57:18.043

Rob，您可能需要考虑设置一些调用 SQLPackage 的批处理文件来使用您想要的发布配置文件。我在这里写了博客：http: [//schottsql.blogspot.com/2012/11/ssdt-publishing-your-project.html](http://schottsql.blogspot.com/2012/11/ssdt-publishing-your-project.html)

对于我们的开发团队，我们设置了一组批处理文件，可以从他们当前使用的任何分支在本地构建一个或所有数据库。这使得更新本地数据库变得更加容易。“全部发布”批处理文件需要一点时间来运行，但仍然比单独打开每个项目来发布数据库要好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-15T23:22:34.630

有点奇怪的问题：我将我的 .xml 文件重命名为 .localdev.xml ....文件名是“双扩展名”-VS/Datatools 查找“.publish.xml”而不仅仅是 .xml 文件。就我而言，我需要“*.localdev.publish.xml”。当它的名称错误时，“设置为默认发布配置文件”右键单击选项没有显示，双击也没有显示......当你需要他时， [Molder](https://en.wikipedia.org/wiki/The_X-Files)在哪里？！？！？;)

获得正确的名称，获得正确的功能......MS需要更好，更有创造力的QA人员！;)

# excel - 宏 - countif 函数检查范围是否“包含”条件

> ID：15567275
> 
> 赞同：1
> 
> 时间：2013-03-22T09:52:23.147
> 
> 标签：excel, vba

我有一个宏，它执行 countif 函数检查 A 列中范围内 B 列中的条件。两者（范围和条件）可能具有不同的大小，因此宏会一直运行到填充的最后一个单元格。但是，它会检查完全相同的匹配项。我想对其进行转换以检查范围是否包含条件。例如，如果条件是“经理”并且在我们有“营销经理”的范围内，我想计算它。下面你可以找到excel文件的截图和我的宏代码。

**截屏：**

![在此处输入图像描述](../Images/4162b44dcbd2b76c41733e215f035c48.png)

**宏代码：**

```
Sub Countif_Until_LastRow()

Dim lastRowColumnB As Long
lastRowColumnB = Range("B65000").End(xlUp).Row

For i = 2 To lastRowColumnB
Cells(i, 3) = Application.CountIf(Range("A:A"), Cells(i, 2))
Next
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:01:48.797

试试这个：

```
Cells(i, 3) = Application.CountIf(Range("A:A"), "*" & Cells(i, 2) & "*") 
```

*** (star) 像野生字符一样工作

# html - 如何仅使用 HTML 和 CSS 制作流程图/图表

> ID：15567278
> 
> 赞同：27
> 
> 时间：2013-03-22T09:52:37.607
> 
> 标签：html, css, flowchart

我需要为一个网站制作一个非常复杂的图表，其中的层次结构会有点混乱：箭头会上下移动，有时一个元素会指向其他几个元素，有时会有几个元素指向同一个元素. 我找到[了这种方法](http://thecodeplayer.com/walkthrough/css3-family-tree)，但它不允许一个元素有多个父级，因此在这种情况下不会起作用。

它必须在 HTML/CSS 中完成，因为我的目的是添加一些 Javascript 来动态更改块的内容。

这是我需要达到的复杂程度的一个示例： ![图表](../Images/17e64397c0a2624e71ab41615e71e90a.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T10:07:07.130

你可能想看看这个

[http://thecodeplayer.com/walkthrough/css3-family-tree](http://thecodeplayer.com/walkthrough/css3-family-tree)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-03T09:05:49.207

另一个要寻找的是“Nicolas Garcia Belmonte”的 SpaceTree[示例](http://philogb.github.io/jit/static/v20/Jit/Examples/Spacetree/example1.html)，但不是纯 CSS 解决方案。它与IE和大多数浏览器兼容。绝对值得一试。

# php - CKEditor 在编辑器中显示 HTML 标签

> ID：15567285
> 
> 赞同：2
> 
> 时间：2013-03-22T09:53:15.550
> 
> 标签：php, ckeditor

我正在使用 CKEditor 并将内容保存到 MySQL 数据库。当尝试在编辑器中再次编辑内容时，我将 HTML 标记显示为文本，例如：

```
my test<br />and second line 
```

如何让它再次正确显示在编辑器中？

我一直在摆弄 htmlentities 和 html_entity_decode 以及 CKEditor 相关设置一个多小时，但无济于事。

```
 $config = array();
   $config['enterMode'] = 2;
   $config['shiftEnterMode'] = 1;
   //$config['basicEntities'] = FALSE;
   //$config['entities'] = FALSE;
   //$config['entities_greek'] = FALSE;
   //$config['entities_latin'] = FALSE;
   //$config['htmlDecodeOutput'] = TRUE;

   $ck_editor->editor("sec1_content", $default_value, $config); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T11:00:51.640

似乎 CodeIgniter 的 func在某种程度上`set_value()`表现得像。`htmlspecialchars()`因此，如果您在 CKEditor 上获得 <any_tag>，此解决方法可以帮助您。改变

```
$ck_editor->editor("sec1_content", set_value('sec1_content', html_entity_decode($default_value)), $config); 
```

对此：

```
$ck_editor->editor("sec1_content", html_entity_decode(set_value('sec1_content', $default_value)), $config); 
```

> *PoloRM*
> 将 html_entity_decode 放在 set_value 周围。这样做的原因显然是因为 set_value 方法可能不使用 $default_value 参数，而是返回发布的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:46:01.603

对于可能对 CodeIgniter/CKEditor 有同样问题的人：

解决此问题并仍然使用 CodeIgniter set_value() 方法的方法如下：

```
$ck_editor->editor("sec1_content", set_value('sec1_content', html_entity_decode($default_value)), $config); 
```

做这个：

```
$ck_editor->editor("sec1_content", html_entity_decode(set_value('sec1_content', $default_value)), $config); 
```

将 html_entity_decode 放在 set_value 周围。这样做的原因显然是因为 set_value 方法可能不使用 $default_value 参数，而是返回发布的数据。

谢谢你让我意识到我的错误。

# windows - 如何创建名称超过 260 个字符的文件夹

> ID：15567288
> 
> 赞同：2
> 
> 时间：2013-03-22T09:53:29.363
> 
> 标签：windows, winapi, windows-server-2008, directory, windows-7-x64

我想务实地创建一个文件夹层次结构。但问题是在某些情况下文件夹名称超过 260 个字符并且文件夹创建失败。我已经使用 Win32 文件命名空间创建了这个文件夹层次结构。我想创建以下格式的文件夹结构。**DRIVE_LETTER:\FOLDER1\FOLDER2\FOLDER3\FOLDER4........\FOLDER(N-1)\FOLDER(N)**

FOLDER1、FOLDER2、FOLDER3 等是文件夹的名称。这些名称的长度超过 260 个字符，例如：

***FOLDER1*** name is qwertyuiopasdfghjklzxcvbnmqwertyuiopasdfghjklzxcvbnmqwertyuiopasdfghjklzxcvbnmqwertyuiopasdfghjklzxcvbnmqwertyuiopasdfghjklzxcvbnmqwertyuiopasdfghjklzxcvbnmqwertyuiopasdfghjklzxcvbnmqwertyuiopasdfghjklzxcvbnmqwertyuiopasdfghjklzxcvbnmqwertyuiopasdfghjklzxcvbnmqwertyuiopasdfghjklzxcvbnmqwertyuiopasdfghjklzxcvbnm

***FOLDER2*** name is mnbvcxzlkjhgfdsapoiuytrewqmnbvcxzlkjhgfdsapoiuytrewqmnbvcxzlkjhgfdsapoiuytrewqmnbvcxzlkjhgfdsapoiuytrewqmnbvcxzlkjhgfdsapoiuytrewqmnbvcxzlkjhgfdsapoiuytrewqmnbvcxzlkjhgfdsapoiuytrewqmnbvcxzlkjhgfdsapoiuytrewqmnbvcxzlkjhgfdsapoiuytrewqmnbvcxzlkjhgfdsapoiuytrewqmnbvcxzlkjhgfdsapoiuytrewqmnbvcxzlkjhgfdsapoiuytrewq

像这样会去。

我怎样才能克服这个文件夹名/文件名长度限制。

操作系统：Windows 7 64 位和 Windows Server 2008 R2 64 位。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:57:32.023

MSDN 的[CreateDirectory 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363855%28v=vs.85%29.aspx)向您解释了这一点：

> 要将此限制扩展到 32,767 个宽字符，请调用函数的 Unicode 版本并将`\\?\`其添加到路径之前。有关详细信息，请参阅命名文件。

另请参阅：[我应该处理超过 MAX_PATH 的文件吗？](https://stackoverflow.com/questions/2825798/should-i-deal-with-files-longer-than-max-path/2825881#2825881)

> NTFS 支持的文件名最大为 32K（32,767 个宽字符）。您只需要使用正确的 API 和正确的文件名语法。基本规则是：文件名应该以`\\?\`like开头`\\?\C:\Temp`。您可以在 UNC: 中使用相同的语法`\\?\Server\share\Path`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:00:15.213

您可以使用以下两个技巧之一：

*   要创建路径长度超过 260 个字符的文件夹结构，例如`C:\folder1\folder2\...\folder20`，您可以创建`C:\folder19`，`C:\folder20`然后将`folder20`其所有子文件夹移动到`C:\folder19`，然后创建`C:\folder18`并移动`C:\folder19`到`folder20`里面`C:\folder18`。重复，直到您完成创建此结构。
*   您可以使用该`\\?\C:\folder1\folder2\...\folder20`符号来创建您的路径。更多信息在这里：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa365247](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx) (v=vs.85).aspx （搜索单词*最大路径长度限制*）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T13:33:52.503

单个*路径组件*（例如文件夹名或文件名）受 .`MaximumComponentLength`返回的值的限制[`GetVolumeInformation`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364993)。这在理论上是特定于文件系统的，但*实际上*始终是 255。

因此，除非您制作自己的支持更长文件组件的文件系统驱动程序，否则您无法按照您的要求进行操作。但是，您*可以*做的是创建一个**总长度**超过 260 个字符的路径，就像其他答案中的指针一样。

# c# - 使用鼠标指针位置获取 WPF 列表框（ system.windows.control.listbox ）中列表框项的索引

> ID：15567291
> 
> 赞同：1
> 
> 时间：2013-03-22T09:53:44.043
> 
> 标签：c#, wpf, xaml, listbox, mouseenter

我是WPF的新手。我开发了一个 WPF UserControl 应用程序，其中有一个列表框。列表框的高度限制为 400 只是为了获得垂直滚动条。在这个列表框中，我有 100 多个项目。现在对于这些项目中的每一个，我必须显示一些工具提示，我需要在当前鼠标指针下的列表框中显示项目的索引。因此，为此我添加了一个 MouseOver 事件，例如 MouseEnter。

这是我的 Xaml 代码片段

```
<ListBox Name="AllProjects" TabIndex="0" ScrollViewer.CanContentScroll="True" ScrollViewer.VerticalScrollBarVisibility="Visible" Height="400" MouseEnter="AllProjects_MouseEnter"> </ListBox> 
```

这是后端 C# 代码

```
 private void AllProjects_MouseEnter(object sender, MouseEventArgs e)
    {
        Point Position = e.GetPosition((IInputElement)sender); 
    } 
```

因此，我得到了当前列表框中鼠标指针的位置，但真正的问题是将此位置转换为列表框中项目的索引。因为我使用的是**system.windows.control.listbox**而不是**System.Windows.Forms.listbox**，所以我没有 **IndexFromPoint**方法。由于我的列表框可以垂直滚动，如果我尝试开发一种逻辑来获取索引，它会变得混乱。我只是想知道在这种情况下是否有任何简单的方法来获取 listboxitem 索引。**AllProjects**是我的列表框的名称。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:52:50.727

而不是使用 MouseEnter 事件，您应该挂钩 SelectionChanged 事件。然后只需通过 ListBox 中的 SelectedIndex 属性获取项目的索引。

XAML：

```
<ListBox Name="AllProjects" SelectionChanged="AllProjects_SelectionChanged" /> 
```

C＃：

```
private void AllProjects_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    int index = this.AllProjects.SelectedIndex;
} 
```

但这是实现当前目标的一种“快速而肮脏”的方式。如果您真的想进入 WPF，请尝试忘记您在其他 UI 框架（例如 Windows 窗体）中使用的大多数技术，并开始了解[WPF 数据绑定的强大功能和](http://www.wpftutorial.net/DataBindingOverview.html)[XAML 数据模板](http://www.wpftutorial.net/DataTemplates.html)的美妙之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:45:52.223

您将在此处找到问题的答案：[https](https://stackoverflow.com/a/3368537/2132796)
://stackoverflow.com/a/3368537/2132796您不需要获取列表框的选定索引属性。您只需要使用上面链接的项目模板即可。
我还建议遵循 Ucodias 的建议并学习一些有关数据绑定的知识。

# orchardcms - Orchard v1.6：自定义主题

> ID：15567295
> 
> 赞同：0
> 
> 时间：2013-03-22T09:54:00.333
> 
> 标签：orchardcms, orchardcms-1.6

对 Orchard 来说是新手，因为在过去的几天里我才开始玩弄它。我的问题是关于自定义主题（在本例中是可以从图库安装的 Bootstrap 主题）

我试图看看是否有非源代码的方法，但找不到这种方法，所以我深入研究了主题文件夹并自己编辑了 Layout.cshtml 文件。这是“错误的”还是有另一种“支持”的方式？

我特别想做的是将徽标放在左侧，将菜单放在右侧（请参阅[此处](http://cssdeck.com/labs/bnpbndfx)了解 OOB 行为），[这](http://cssdeck.com/labs/zcgpfkzb)就是我实现它的方式。

我确定如果这个主题有任何更新，那么定制将被覆盖，因此关于实现这一目标的支持方式的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:30:48.263

您可能想要做的是查找派生主题，您应该根据您正在修改的主题创建一个新主题，然后您可以修改您想要的部分，如果原始主题需要更新或者您可以在不覆盖所有更改的情况下更新它。我很确定这是你应该这样做的方式。

此页面应描述如何完成 [http://docs.orchardproject.net/Documentation/Customizing-the-default-theme](http://docs.orchardproject.net/Documentation/Customizing-the-default-theme)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:00:18.330

这就是定制主题的方式。

# c# - 如何在 C# 中更新数据网格，同时更新给定的新条目将同时插入？

> ID：15567297
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:54:05.023
> 
> 标签：c#

更新我使用的过程，但使用下面的代码我只能更新现有的

```
pt.PackageTariff_Update(var, dataGridView1.Rows[i].Cells[1].Value.ToString(),   
dataGridView1.Rows[i].Cells[2].Value.ToString(), 
dataGridView1.Rows[i].Cells[3].Value.ToString(), 
int.Parse(dataGridView1.Rows[i].Cells[0].Value.ToString())); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:12:38.983

我得到了答案..我不知道这是否是正确的方法..给出了代码...

```
enter code here
         pt = new packagetariff();
         int var = int.Parse(combo_packTariffID.Text);
           for (int i = 0; i < dataGridView1.Rows.Count - 1; i++)
          {
            try
            {
                pt = new packagetariff();
                int Id = int.Parse(combo_packTariffID.Text.ToString());
                DataTable dt = pt.PackageTariff_View(Id);
                foreach (DataRow dr in dt.Rows)
                {
                    a = int.Parse(dr[0].ToString());
                }
            }
            catch { }

            if (a == dataGridView1.Rows.Count - 1)
                {

                 pt.PackageTariff_Update(var, dataGridView1.Rows[i].Cells[1].Value.ToString(), dataGridView1.Rows[i].Cells[2].Value.ToString(), dataGridView1.Rows[i].Cells[3].Value.ToString(), int.Parse(dataGridView1.Rows[i].Cells[0].Value.ToString()));

               }
        }

                if (a != dataGridView1.Rows.Count - 1)
                {
                    int Id = int.Parse(combo_packTariffID.Text.ToString());
                    pt = new packagetariff();
                    pt.delete_For_Update_tariff(Id);
                    for (int i = 0; i < dataGridView1.Rows.Count - 1; i++)
                    {
                    //pt.PackageTariff_Update(var, dataGridView1.Rows[i].Cells[1].Value.ToString(), dataGridView1.Rows[i].Cells[2].Value.ToString(), dataGridView1.Rows[i].Cells[3].Value.ToString(), int.Parse(dataGridView1.Rows[i].Cells[0].Value.ToString()));
                    pt.PackageTariff_Add(combo_packTariffID.Text,dataGridView1.Rows[i].Cells[1].Value.ToString(),dataGridView1.Rows[i].Cells[2].Value.ToString(),dataGridView1.Rows[i].Cells[3].Value.ToString(),dataGridView1.Rows[i].Cells[0].Value.ToString());
                    }
                } 
```

# ocaml - 使用 Coq 的提取机制将 Coq 中的函子提取到 OCaml

> ID：15567299
> 
> 赞同：6
> 
> 时间：2013-03-22T09:54:09.373
> 
> 标签：ocaml, coq, coq-extraction

我有一个功能`PolyInterpretation`（[http://color.inria.fr/doc/CoLoR.PolyInt.APolyInt.html](http://color.inria.fr/doc/CoLoR.PolyInt.APolyInt.html)）

```
Definition PolyInterpretation := forall f : Sig, poly (arity f). 
```

和一个模块签名`TPolyInt`（[http://color.inria.fr/doc/CoLoR.PolyInt.APolyInt_MA.html](http://color.inria.fr/doc/CoLoR.PolyInt.APolyInt_MA.html)）

```
Module Type TPolyInt.
  Parameter sig : Signature.
  Parameter trsInt : PolyInterpretation sig.
  Parameter trsInt_wm : PolyWeakMonotone trsInt.
End TPolyInt.

Module PolyInt (Export PI : TPolyInt). 
```

然后在我的文件`rainbow.v`中，我定义了一个`TPolyInt_imp`使用仿函数的模块用途`PolyInt`

```
Module TPolyInt_imp.
 Variable arity : symbol -> nat.
 Variable l : list {g : symbol & poly (arity f).
 Definition sig := Sig arity.
 Definition trsInt f := fun_of_pairs_list f l.
 ...
End TPolyInt_imp. 
```

哪里`fun_of_pairs_list`有类型：`forall f: Cpf0.symbol, list {g : symbol & poly (arity g)} -> poly (arity f)`

然后我定义一个模块`P`：

```
Module Export P := PolyInt TPolyInt_imp. 
```

`Coq`证明助理接受了上述定义`P`。

然后我使用提取来提取到`OCaml`.

我把它写在另一个文件中：`extraction.v`

```
Extraction Language Ocaml.
Set Extraction Optimize.
Set Extraction AccessOpaque.
Separate Extraction rainbow.P. 
```

它工作正常。

这是提取后的代码

```
module TPolyInt_imp = 
 struct 
  (** val arity : symbol -> int **)

  let arity =
    failwith "AXIOM TO BE REALIZED"

  (** val l : (symbol, poly) sigT list **)

  let l =
    failwith "AXIOM TO BE REALIZED"

  (** val coq_sig : coq_Signature **)

  let coq_sig =
    coq_Sig arity

  (** val trsInt : symbol -> poly **)

  let trsInt f =
    fun_of_pairs_list arity f l
 end

module P = PolyInt(TPolyInt_imp) 
```

`TPolyInt_imp`因为在他们包含`Variable`并生成的仿函数内部，`failwith AXIOM`我决定定义一个新的签名来包含所有这些变量。

```
Module Type Arity.
 Variable arity : symbol -> nat.
 Variable l : list {g : symbol & poly (arity g)}.
End Arity. 
```

`Arity`然后定义一个以 ( ) 作为参数的新函子。在这个函子中我定义了模块`TPolyInt_imp`（像`TPolyInt_imp`以前一样）。

```
Module S (Import A: Arity).

  Module TPolyInt_imp.
    Definition sig := Sig arity.
    Definition trsInt f := fun_of_pairs_list f l.
    ...
  End TPolyInt_imp.

  Module P := PolyInt TPolyInt_imp.

End S. 
```

然后我使用提取将其提取到`Ocaml`.

```
Extraction Language Ocaml.
Set Extraction Optimize.
Set Extraction AccessOpaque.
Separate Extraction S. 
```

然后我收到一条错误消息：

```
Error: Signature mismatch:
       ...
       Values do not match:
         val trsInt : Cpf0.symbol -> Polynom.poly
       is not included in
         val trsInt : APolyInt.coq_PolyInterpretation
       File "rainbow.ml", line 534, characters 8-14: Actual declaration 
```

提取后的代码：

```
module type Arity = 
 sig 
  val arity : symbol -> int
  val l : (symbol, poly) sigT list
 end

module S = 
 functor (A:Arity) ->
 struct 
  module TPolyInt_imp = 
   struct 
    (** val coq_sig : coq_Signature **)

    let coq_sig =
      coq_Sig A.arity

    (** val trsInt : symbol -> poly **)

    let trsInt f =
      fun_of_pairs_list A.arity f A.l
   end

  module P = PolyInt(TPolyInt_imp) 
```

提取有什么问题？以及他们出现此错误的原因？如何更正我的代码，以便在提取后成功编译？

另外我不想定义一个实现签名的新模块`Arity`。

我很抱歉我的代码缺少类型并且无法编译。我试图给出我的问题的想法。

# php - 在 PHP 中重现 jquery match()

> ID：15567300
> 
> 赞同：0
> 
> 时间：2013-03-22T09:54:13.430
> 
> 标签：php, javascript, jquery, match

我已经用 javascript 编写了代码，但我需要它发生在服务器端，该函数获取请求的 url 的一部分，如果它与我的开关匹配，它会更改文档标题。

这是Javascript：

```
$(document).ready(function(e){
 e=window.location.href;
 if(e.match(/\\?case=(.*)/)){
  x=e.match(/\\?case=(.*)/);
  y=x[1];
  switch(y){
  case :"t"
    document.title ="Title2";
  break;
  case :"s"
    document.title ="Title3";
  break;
  default:
    /* code ... */
  break;
}
}
 }); 
```

在此代码中，如果我的 url 是“ [http://url.com/?case=t](http://url.com/?case=t) ”，则文档的标题将更改为“Title2”。

我怎样才能在php中编写它？问题是获取 url 匹配！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T09:56:40.920

你的意思是得到可变案例？因为那是你在 JavaScript 中使用的

如果是这样，PHP 中的一个示例将在标题中包含此内容

```
<?php
$case = $_GET['case'];
switch ($case) {
  case 't':
    $title = 'Title 2';
    break;
}
echo "<title>". $title . "</title";
?> 
```

# jquery - 在 jquery 的一个函数中验证表单元素

> ID：15567301
> 
> 赞同：0
> 
> 时间：2013-03-22T09:54:13.883
> 
> 标签：jquery, forms, function, element, validating

```
var client_name     = $("#client_name");
var client_surname  = $("#client_surname");
var client_phone    = $("#client_phone");
var form            = $("#billing_form");

Validate(client_name);
Validate(client_surname);
Validate(client_phone);

form.submit(function(e){
  if(Validate(client_name) && Validate(client_surname) && Validate(client_phone)){
     e.preventDefault();
     console.log("True");
     return true;
 } else {
     console.log("False");
     return false;  
 }
});

function Validate(id){
 id.blur(function(){
  if(id.val().length <= 0){
     id.addClass("input_error").removeClass("input_apply").css("border","1px solid #ff0000");
     return false;
} else {
     id.removeClass("input_error").removeAttr("style");
     return true;
       }
   });
} 
```

我编写了这个函数来验证我在一个函数中的所有输入，但它不会在**任何时候**返回 true 。如果我填写所有输入，它会再次返回 false。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:03:17.427

您的`Validate`函数不返回任何内容。`return`从该函数内部没有语句这一事实可以看出这一点。它所做的只是`blur`在传递给它的元素上绑定一个事件处理程序；该事件的处理函数返回`true`or `false`，但这与函数完全无关`Validate`。

我怀疑`return`函数内部的缺失会隐含地导致`undefined`返回，而这反过来又会评估`false`为布尔条件，这就是为什么你永远不会看到`true`（因为它永远不会看到）。只需在您的函数中取出事件处理程序绑定`Validate`：

```
function Validate(id) {
    if (id.val().length <= 0) {
        id.addClass("input_error").removeClass("input_apply").css("border", "1px solid #ff0000");
        return false;
    } else {
        id.removeClass("input_error").removeAttr("style");
        return true;
    }
} 
```

它不会在您修改输入值时进行验证，但它应该在您提交表单时正确验证它们。

如果你想保留`blur`事件处理程序，那么你可以这样做：

```
var client_name     = $("#client_name");
var client_surname  = $("#client_surname");
var client_phone    = $("#client_phone");
var form            = $("#billing_form");

function blurValidation() {
    var $this = $(this);
    if(this.value.length <= 0) {
        $this.addClass("input_error").removeClass("input_apply").css("border","1px solid #ff0000");
        return false;
    }
    else {
        $this.removeClass("input_error").removeAttr("style");
        return true;
    }
}

client_name.blur(blurValidation);
client_surname.blur(blurValidation);
client_phone.blur(blurValidation);

form.submit(function(e){
    client_name.blur();
    client_surname.blur();
    client_phone.blur();
    if(Validate(client_name) && Validate(client_surname) && Validate(client_phone)){
        e.preventDefault();
        console.log("True");
        return true;
    } else {
        console.log("False");
        return false;  
    }
});

function Validate(id){
    return !id.hasClass("input_error");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:56:11.830

而不是这种`$("#client_name")`用途`$("#client_name").val();`

**代替**

```
if (id.val().length <= 0) { 
```

**和**

```
if (id.val() == "") { 
```

# c++ - 错误：内存位置 0x0038fd50 处的 std::bad_alloc

> ID：15567304
> 
> 赞同：0
> 
> 时间：2013-03-22T09:54:25.357
> 
> 标签：c++, memory, vector

我已经使用全局堆编写了一个代码。我需要多次重做相同的操作。每次我需要清除堆并重新分配数据时。但是 vector::clear() 函数不会释放内存。所以一段时间后内存被填满并且程序终止。

```
#include "stdafx.h"
#include <cstdio>
#include <vector>
using namespace std;

#define N 30000
typedef unsigned int uint;
class Node;
class Edge;
vector<Node*> nodes;
vector<Edge*> edges;

class Node
{
public:
    Node(uint id): id(id)
    {
        nodes.push_back(this);
    }
public:
    uint id;
};

class Edge
{
public:
    Edge(int nod1, int nod2)
        : nodH(nod1), nodT(nod2)
    {
        edges.push_back(this);
    }
    bool Connects(Node* nod1, Node* nod2)
    {
        return (
            (nod1->id == this->nodH && nod2->id == this->nodT) ||
            (nod1->id == this->nodT && nod2->id == this->nodH));
    }
public:
    int nodH;
    int nodT;
};

int _tmain(int argc, _TCHAR* argv[])
{
    Node *nd;
    for(long int i=0;i<N;i++)
    {
        for (int j=0;j<N;j++)
        {
            nd = new Node(j);
        }
        for (uint j=0;j<N;j++)
        {
            Edge* e = new Edge(j,N-j);
        }
        printf("%d %d ",nodes.size(),edges.size());

        // Do something here like calling function etc.
        nodes.erase(nodes.begin()+N/2);

        nodes.clear();
        edges.clear();
        //nodes.~vector();
        //edges.~vector();
        printf("%d %d\n",nodes.size(),edges.size());
    }
    getchar();
    return 0;
} 
```

我能做些什么？我尝试了 vector::~vector() 函数。但这没有用。谁能帮助我如何释放“已清除”的内存空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:56:08.610

`vector.clear()`不删除对象的原因是您将原始指针保留在两个向量中：

```
vector<Node*> nodes;
vector<Edge*> edges; 
```

您要么必须自己释放元素，要么更好地使用智能指针（例如，`std::unique_ptr`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:56:24.330

您正在为您的应用程序分配一大堆内存。尝试`N`一开始就减少到 100。`bad_alloc`通常意味着运行时无法保留内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:57:28.010

众所周知的技巧是将您的向量与临时创建的向量交换

```
template< class T >
void clearVector( std::vector< T > & v )
{ 
    std::vector< T > dummy;
    std::swap( v, dummy );
} 
```

顺便说一句，使用带有原始指针的向量不是一个好主意。我会建议[std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)或类似的。如果（出于某些惊人的原因）您不能使用智能指针，那么您应该像这样调用函数

```
struct die {
    template <class T> void operator()( const T * p ) const { delete p; }
};
template< class InputIterator >
inline void kill_em_all( const InputIterator & begin, const InputIterator & end )
{
    std::for_each( begin, end, die() );
}

...
kill_em_all( vector_to_clear.begin(), vector_to_clear.end() ); 
```

# .net - FileLogTraceListener 抛出 System.IO.Exceptions

> ID：15567306
> 
> 赞同：2
> 
> 时间：2013-03-22T09:54:31.293
> 
> 标签：.net, windows

我试图弄清楚为什么我们的一个遗留应用程序每天都会抛出异常。它是一个 VB.Net Windows 服务，它使用`Microsoft.VisualBasic.Logging.FileLogTraceListener`该类进行日志记录。

但是，它会引发以下异常，但我无法弄清楚导致它的原因：

```
System.IO.IOException: The handle is invalid.
at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
at System.IO.FileStream.get_Length()
at Microsoft.VisualBasic.Logging.FileLogTraceListener.ReferencedStream.get_FileSize()
at Microsoft.VisualBasic.Logging.FileLogTraceListener.ResourcesAvailable(Int64 newEntrySize)
at Microsoft.VisualBasic.Logging.FileLogTraceListener.WriteLine(String message) 
```

目前似乎每天抛出一次，问题是我需要确保所有内容都已记录。在这种情况下，我真的不能接受并吞下异常和要省略的日志。

我试图调查此 Windows 错误消息 (ERROR_INVALID_HANDLE - 0x06) 的可能原因，但我似乎找不到任何具体的内容。

任何帮助试图诊断这将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:20:03.930

为了帮助诊断问题，请检查以下内容：

*   [禁用跟踪 UseGlobalLock 以获得更好的跟踪性能](http://www.neovolve.com/post/2009/01/08/Disable-Trace-UseGlobalLock-For-Better-Tracing-Performance.aspx)

    <配置>
    <system.diagnostics>
    <trace **useGlobalLock="false"** />
    <sources>
    <source name="MySource" switchValue="All">
    <listeners> ...

*   从多线程/AppDomain/Services 中排除日志记录。

*   使用[Perfmon](http://msdn.microsoft.com/en-us/library/aa645516%28v=vs.71%29.aspx)检查是否同时发生密集的 IO 操作，例如磁盘正在备份...

*   确保驱动程序是最新的。

*   如果上述方法失败并且您想找出根本原因，则需要使用 adplus 进行内存转储并使用带有 SOS 的 [WinDBG来查看根本原因。](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)

如果所有这些都无法缩小问题范围，请[更换服务器磁盘驱动器](http://www.youtube.com/watch?v=wzGWvZAd228)。

# design-patterns - 在书籍项目中使用哪种设计模式（添加/编辑/删除）书籍？

> ID：15567309
> 
> 赞同：0
> 
> 时间：2013-03-22T09:54:39.077
> 
> 标签：design-patterns

我正在用 c# 和 asp.net mvc 制作一个 .Net 项目。这是一个用于书籍的网络应用程序。将登录的用户将能够查看书籍列表、编辑有关书籍的信息（标题、图像、流派、描述等），以及删除和添加书籍。

我是设计模式的初学者，我不知道在我的情况下使用设计模式是否聪明甚至可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:11:05.773

*设计模式*的使用上面应该有一个原则：

> **吻**
> 
> *保持简单愚蠢*。

在您的要求（简单地编辑和显示没有行为的域对象列表等）中，不建议使用*设计模式。*

随着需求的增加，您可以重构当前的代码库以使用设计模式。

但是通过使用 Web 技术，您将始终使用 Model-View-Controller（或 Model-View-Presenter-Controller 或这个方向的任何东西）。然后，此模式将使用 Observer 来更新更改。

注意：有几种类型的设计模式。从架构（例如 3 层 Web 应用程序）到实现（观察者），再到成语（for 循环）。

# linux - 使用 uuencode 发送邮件

> ID：15567310
> 
> 赞同：0
> 
> 时间：2013-03-22T09:54:40.320
> 
> 标签：linux, unix, uuencode

您好，我想发送一封电子邮件，并附上一篇我尝试使用命令 uuencode 但我的邮箱中没有可以帮助我的邮件

```
cat body.txt | uuencode /root/report-20130322.pdf | mail -s "Daily Report" user@gmail.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T19:35:01.497

不，抱歉，我们不会帮助您使用 uuencode。但我们建议您改用 MIME。这是在电子邮件中包含非文本数据的当前标准。无论您使用哪种编程语言，都有许多库可以帮助您正确使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T08:33:22.160

您要附加哪个文件？管道是从左到右的，所以这是首先完成的，这是非法的：

```
cat body.txt | uuencode /root/report-20130322.pdf 
```

也许你可以试试

```
cat body.txt > tmpfile
uuencode /root/report-20130322.pdf >> tmpfile
cat tmpfile | mail -s "Daily Report" user@gmail.com 
```

# javascript - 将脚本元素动态添加到 div 不会执行脚本

> ID：15567312
> 
> 赞同：4
> 
> 时间：2013-03-22T09:54:41.523
> 
> 标签：javascript

我正在尝试将脚本块动态添加到文档中。当我这样做时，脚本块没有被执行。

```
<body>
    <div id="dynamicDiv">
    </div>

    <script type="text/javascript">
        var elem = document.getElementById("dynamicDiv");
        var tmpStr = "<script type=\"text\/javascript\"> ";
        tmpStr += "function hello (val)";
        tmpStr += "{";
        tmpStr += "alert('hello ' + val);";
        tmpStr += "}";
        tmpStr += "<\/script>";

        elem.innerHTML = tmpStr;

        hello("World");
    </script>
</body> 
```

上面的代码不起作用。在另一篇帖子（[How do you execute a dynamic load a JavaScript block?](https://stackoverflow.com/questions/75943/how-do-you-execute-a-dynamically-loaded-javascript-block)）中，我看到一个回复​​，如果将脚本添加到innerHTML，它将不会被执行。不要直接使用innerHTML，而是使用此innerHTML 创建一个div，然后使用appendChild 添加脚本。

```
<body>
    <div id="dynamicDiv">
    </div>

    <script type="text/javascript">
        var elem = document.getElementById("dynamicDiv");
        var tmpStr = "<script type=\"text\/javascript\"> ";
        tmpStr += "function hello (val)";
        tmpStr += "{";
        tmpStr += "alert('hello ' + val);";
        tmpStr += "}";
        tmpStr += "<\/script>";

        var newdiv = document.createElement('div');
        newdiv.innerHTML = tmpStr;

        elem.appendChild(newdiv);

        hello("World");
    </script>
</body> 
```

然而，这个解决方案也对我不起作用。

在另一个回复中，我再次看到我们应该获取脚本元素并使用 eval 执行它们。

```
<body>
    <div id="dynamicDiv">
    </div>

    <script type="text/javascript">
        var elem = document.getElementById("dynamicDiv");
        var tmpStr = "<script type=\"text\/javascript\"> ";
        tmpStr += "function hello (val)";
        tmpStr += "{";
        tmpStr += "alert('hello ' + val);";
        tmpStr += "}";
        tmpStr += "<\/script>";

        var newdiv = document.createElement('div');
        newdiv.innerHTML = tmpStr;

        elem.appendChild(newdiv);

        var scripts = newdiv.getElementsByTagName('script');
        for (var ix = 0; ix < scripts.length; ix++) {
            eval(scripts[ix].text);
        }

        hello("World");
    </script>
</body> 
```

这个解决方案对我有用。

但是如果在一个函数中这样做，那么它就不起作用了。

```
<body>
    <div id="dynamicDiv">
    </div>

    <script type="text/javascript">

        function createFunction(){
            var elem = document.getElementById("dynamicDiv");
            var tmpStr = "<script type=\"text\/javascript\"> ";
            tmpStr += "function hello (val)";
            tmpStr += "{";
            tmpStr += "alert('hello ' + val);";
            tmpStr += "}";
            tmpStr += "<\/script>";

            var newdiv = document.createElement('div');
            newdiv.innerHTML = tmpStr;

            elem.appendChild(newdiv);

            var scripts = newdiv.getElementsByTagName('script');
            for (var ix = 0; ix < scripts.length; ix++) {
                eval(scripts[ix].text);
            }   
            hello("World 1");
        }

        createFunction();
        hello("World 2");
    </script>
</body> 
```

我可以看到该函数在脚本被评估后可用。并且在函数 createFunction 中可用。在 createFunction() 范围之外，hello() 不可用。

我究竟做错了什么？我错过了一些非常基本的东西吗？请检查并帮助。

谢谢，保罗

PS我不使用jQuery。我正在使用 chrome 进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:42:47.280

Would like to point out that the reason the 3rd snippet you provided works inside the for loop, but not outside is because you are using `eval`. `eval` takes a string and executes it as js, which is why it is working inside the loop, but using `eval` isn't parsing it for future use, which is causing it to be unusable elsewhere. Therefore, when you go to call it outside the loop, you get a reference error.

UPDATE:

If you are getting the string back with the `<script>` tags in it, you can just parse out the script tags.

```
var string = "<script type=\"text\/javascript\"> ";
    string += "function hello (val)";
    string += "{";
    string += "alert('hello ' + val);";
    string += "}";
    string += "<\/script>";
string = string.replace(/<(script|\/script).*?>/g,'');
function createFunction() {
    var elem = document.getElementById("dynamicDiv");
    var script = document.createElement('script');
    script.innerHTML = string;
    elem.appendChild(script);
    hello("World 1");
}
createFunction()
hello('world 2'); 
```

JSFiddle: [http://jsfiddle.net/3wYD6/](http://jsfiddle.net/3wYD6/)

I don't really see the point of this, but if you really want to do this you can create a new script element and then set it's innerHTML to the function, then append the new script to a div.

```
var elem = document.getElementById("dynamicDiv"),
    script = document.createElement('script');
script.innerHTML = 
    'function hello (val) {' +
        'alert("hello " + val);' + 
    '}';
elem.appendChild(script);
hello('world'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:20:38.917

在您的第一次尝试中，您正在创建一个字符串，js 解释器将其作为字符串处理，而不是 html 标记，因此 js 并不真正关心该字符串中显示的脚本标记。

那么当你开始使用 eval() 时它当然会起作用，因为 eval - 是邪恶的:))

毕竟，您可以动态创建脚本标签，然后用代码填充它：

```
var elem = document.getElementById("dynamicDiv"),
    scriptTag = document.createElement('script'),
    scriptTagCode = 'function hello (val){alert("hello " + val);}';

scriptTag.innerHTML = scriptTagCode;
elem.appendChild(scriptTag);
hello('foo'); 
```

# c# - WinRT 中的绑定组

> ID：15567314
> 
> 赞同：0
> 
> 时间：2013-03-22T09:54:46.620
> 
> 标签：c#, binding, windows-store-apps, winrt-xaml

有人知道[BindingGroup](http://msdn.microsoft.com/en-US/library/system.windows.data.bindinggroup.aspx)是否仍然存在于 Windows Store Apps 的开发中，使用 WinRT ？这是取消或提交编辑的非常有用的工具。我在新文档中找不到它。

如果你想了解它，[这里](http://www.scottlogic.co.uk/blog/colin/2009/01/bindinggroups-for-total-view-validation/)有一个例子。

我正在处理联系人列表，我可以编辑每个联系人。但是如果一个字段无效，我不希望它被保存。也许有一些绕过方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:18:12.590

`BindingGroup`只需检查文档，就可以肯定地说 WinRT 中没有内置支持：

*   [`Binding`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.binding.aspx)类没有[`BindingGroupName`](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.bindinggroupname.aspx)属性
*   [`Windows.UI.Xaml.Data`](http://msdn.microsoft.com/en-us/library/windows/apps/jj218365.aspx)命名空间不包含[`BindingGroup`](http://msdn.microsoft.com/en-us/library/system.windows.data.bindinggroup.aspx)类。

# css - width:*; 是什么意思？在 CSS 中做什么？

> ID：15567315
> 
> 赞同：1
> 
> 时间：2013-03-22T09:54:46.343
> 
> 标签：css

有人告诉我，我可以使用 * 来填充剩余空间，例如。`div`在另一个 s 中有几个s `div`。

当我在代码中编写它时它也可以工作，但是......在我被允许在我的学期项目中使用它之前，我需要一个相关的来源，有人可以帮助我吗？

```
div {
    width:*;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:59:23.977

使用无效`*`。请参阅[CSS3 规范](http://www.w3.org/TR/CSS21/visudet.html#propdef-width)。

您可以定义`width`为绝对值（如像素）、百分比`auto`或`inherit`.

从规范中提取：

```
Values have the following meanings:

<length> - Specifies the width of the content area using a length unit.
<percentage> - Specifies a percentage width. (...)
auto - The width depends on the values of other properties. See the sections below.

Negative values for 'width' are illegal. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:06:51.160

`*`当你试图做的时候，你不能使用规则`width:*;`

你可以在选择器中使用它。在选择器上使用时，它的意思是“任何东西”。例如，下面的目标是任何以`<li>`为祖先的东西。

```
li * { 
    /* */ 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T10:06:20.693

星号 (*) 字符是一个通配符选择器，它将一组样式应用于页面上的每个元素。例如：

```
*
{
    color:red;
} 
```

以上将页面上所有元素的文本颜色设置为“红色”。

通常使用它不是一个好主意，因为浏览器可能需要一段时间才能将此选择器应用于页面上的每个元素，尤其是当页面包含大量元素时。

# extjs - 如何在煎茶饼图上显示检索到的数据

> ID：15567317
> 
> 赞同：0
> 
> 时间：2013-03-22T09:54:48.313
> 
> 标签：extjs, pie-chart, sencha-charts

我一直在到处寻找可以帮助我的人，因为我无法展示从我为此目的创建的 JSON 数据存储发送到我的 Sencha 饼图的数据。

我正在显示包含以下值集的变量数组的打印形式的以下结果：

```
Array ([0] => Array ( [0] => 19 [nombre] => 19 [1] => Chargé de mission [type] => Charge de mission )[1] => Array ( [0] => 204 [nombre] => 204 [1] => Pré-adhérent [type] => Pre-adherent )[2] => Array ( [0] => 1 [nombre] => 1 [1] => Administrateur [type] => Administrateur )[3] => Array ( [0] => 25 [nombre] => 25 [1] => Auto-entrepreneur [type] => Auto-entrepreneur )[4] => Array ( [0] => 1157 [nombre] => 1157 [1] => Adhérent [type] => Adherent )[5] => Array ( [0] => 429 [nombre] => 429 [1] => Salarié [type] => Salarie )) 
```

同时，为了将它发送到我的煎茶派，我使用下面编码的 JSON：

```
{"success":true,"total":"0","data":[{"0":"19","nombre":"19","1":null,"type":"Charge de mission"},{"0":"204","nombre":"204","1":null,"type":"Pre-adherent"},{"0":"1","nombre":"1","1":"Administrateur","type":"Administrateur"},{"0":"25","nombre":"25","1":"Auto-entrepreneur","type":"Auto-entrepreneur"},{"0":"1157","nombre":"1157","1":null,"type":"Adherent"},{"0":"429","nombre":"429","1":null,"type":"Salarie"}]} 
```

我创建了我的 JSON 存储和饼图，如下所示：

```
var userStore = new Ext.data.JsonStore({
    url: 'rapport/chartTypeProfils.php',
    fields: [{name:'nombre', type:'int'},'type'],
    root: 'data'
    //totalProperty:'total'
});

userPie = Ext.extend( Ext.ux.Portlet,{
    constructor: function(config) {
        Ext.apply(this, {
            //width: 400,
            height: 300,
            title: 'Utilisateur',
            tools: tools,
            //renderTo: 'user',
            items: {
                itemId: 'userStore',
                store: userStore,
                xtype: 'piechart',
                dataField: 'nombre',
                categoryField: 'type',
                //extra styles get applied to the chart defaults
                extraStyle: {
                    legend: {
                        display: 'left',
                        padding: 5,
                        font: {
                           family: 'Tahoma',
                           size: 13
                        }
                    }
                }
            }
        });
        userPie.superclass.constructor.apply(this, arguments);
    }
}); 
```

但是，这不会显示饼图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:18:17.720

您使用的是哪个版本的 ExtJS 框架？我找不到关于饼图系列的 , 或 s 属性的任何文档，这让`root`我觉得您在谈论 Sencha 的其他产品之一（可能是 GXT？）`JsonStore``dataField``categoryField`

话虽如此，我想我会使用您提供的数据和 JSFiddle (4.1) 上可用的最新 ExtJS 框架来绘制一个饼图。该示例可以在此处找到：http: [//jsfiddle.net/fgX74/](http://jsfiddle.net/fgX74/)（该示例的代码在本文的底部）。

使用您的代码作为起点，这是我为使其正常工作所做的更改：

*   JsonStore的`root`属性不存在。它当然没有记录，所以我改变了进来的数据以适应。输入的数据现在只是一个对象数组（必须更改您提供的 url 才能以相同格式返回数据）。
*   我已经摆脱了 portlet 并替换为实际图表。我无权访问该`Ext.ux.Portlet`对象以扩展它。
*   `dataField`已被替换`angleField`并`categoryField`已被替换为`label`which 允许您定义实际标签中显示的内容。

最后，这是实际的示例代码：

```
Ext.onReady(function(){    
    var userStore = new Ext.data.JsonStore({
        data: [{"0":"19","nombre":"19","1":null,"type":"Charge de mission"},{"0":"204","nombre":"204","1":null,"type":"Pre-adherent"},{"0":"1","nombre":"1","1":"Administrateur","type":"Administrateur"},{"0":"25","nombre":"25","1":"Auto-entrepreneur","type":"Auto-entrepreneur"},{"0":"1157","nombre":"1157","1":null,"type":"Adherent"},{"0":"429","nombre":"429","1":null,"type":"Salarie"}],
        fields: [{name:'nombre', type:'int'},'type'],
        root: 'data'
    });

    Ext.create('Ext.chart.Chart', {
        renderTo: Ext.getBody(),
        width: 500,
        height: 350,
        animate: true,
        store: userStore,
        series: [{
            type: 'pie',
            angleField: 'nombre',
            showInLegend: true,
            label: {
                field: 'type',
                display: 'rotate',
                contrast: true,
                font: '18px Arial'
            }
        }]
    });
}); 
```

# hadoop - 如何备份 Amazon ec2 实例在运行时生成的日志

> ID：15567319
> 
> 赞同：0
> 
> 时间：2013-03-22T09:54:50.400
> 
> 标签：hadoop, amazon-ec2, virtual-machine, hive

我有 cron-jobs，它将使用 elastic-mapreduce 创建 hive 实例来运行我的查询以处理来自 amazon s3 文件夹的原始数据并将数据推送到数据库。cron-job 运行后，它将在 amazon vm 中创建一个 amazon ec2 实例。如果作业中有任何错误，日志将存储在 vm 中，并在 ec2 实例关闭后消失。有什么方法可以将这些日志发送到电子邮件或任何其他服务器，即使在虚拟机关闭后我也可以在其中调查日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:26:49.377

您可以查看日志轮换，它可以定期压缩您的日志文件，您可以选择要轮换的日志文件，也可以将 zip 文件发送到所需的电子邮件。[http://geekospace.com/using-logrotate-to-rotate-log-files/](http://geekospace.com/using-logrotate-to-rotate-log-files/)（免责声明：我写了这篇文章）

# version-control - Rational Team Concert：仅为项目区域中的一个流设置操作行为。

> ID：15567320
> 
> 赞同：1
> 
> 时间：2013-03-22T09:54:50.777
> 
> 标签：version-control, rational-team-concert, ibm-rational

我有一个场景，项目中有多个流，我必须将交付限制到特定流（只是维护流，而不是集成流）。

在 Operations Behavior-> Source Control -> Deliver(Server) 中设置的前提条件（“Work Items must match a query” for ex）似乎适用于交付到所有流中，但我希望我的前提条件仅适用于一个特定的溪流。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:10:51.240

可以为给定流设置的一个前提条件是“ **`Restrict Change set delivery to components in a stream`**”：

[您可以在“在流内的组件级别限制用户访问](https://stackoverflow.com/questions/10518954/restrict-user-access-at-component-level-within-a-stream/10519357#10519357)”中看到它。

但是，这是基于用户角色而非工作项的限制，因此它可能不是您正在寻找的那种钩子。

另外，这个钩子是在“”的自定义“流程配置”中定义的**`Team Area`**，而不是在“项目区域”本身（它不存在的地方）。

# php - 如何使用推进设置隔离级别？

> ID：15567322
> 
> 赞同：0
> 
> 时间：2013-03-22T09:55:01.043
> 
> 标签：php, mysql, innodb, propel, isolation

我在推进器上使用 mysql、php。

我在 mysql 上使用了带有本地 SQL 查询的事务行锁（例如 SELECT FOR UPDATE）。现在，我正在使用 [propel](http://propelorm.org/) 来使用 ORM。

[但是由于推进事务限制](http://propelorm.org/documentation/06-transactions.html)，推进不支持行锁定 。

这是 [MYSQL InnoDB 锁定模式](http://dev.mysql.com/doc/refman/5.0/en/innodb-lock-modes.html) 。

有什么想法可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T14:28:56.040

由于 Propel 不支持这一点，我看到的唯一解决方案是执行原始 SQL。

# windows-phone-7 - Windows phone 中的图像幻灯片放映

> ID：15567326
> 
> 赞同：1
> 
> 时间：2013-03-22T09:55:05.030
> 
> 标签：windows-phone-7, slideshow

我是 Windows Phone 开发新手。[在 Windows Phone EspnCrickinfo](http://www.windowsphone.com/en-us/store/app/espncricinfo/1e64e7de-a62c-4baf-8a66-4433bd9b648a)应用程序中使用此应用程序后，我喜欢做一个应用 程序。当我使用这个应用程序时，我在画廊左右滑动看到非常酷的羽毛。我正在尝试这个功能，但我没有成功。

我有一些 JSON 链接包含图像

作为参考，我遵循这个[MSDN](http://msdn.microsoft.com/en-us/magazine/gg232764.aspx)但我在应用栏上获取 Btns。

请任何人建议我如何使这变得容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:10:39.450

听到是这个问题的完美答案...[在 Windows Phone 中具有滑动效果的图像幻灯片放映](http://www.developer.nokia.com/Community/Wiki/Picasa_Image_Gallery_with_JSON_in_WP7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:06:10.393

好吧，如果您想获得滑动效果，请使用 microsoft 工具包并使用手势侦听器。注册一个轻弹事件，你就有了你想要的效果。此链接将为您提供帮助。

[如何在windows phone 7中滑动](https://stackoverflow.com/questions/4342326/how-to-get-swipe-in-windows-phone-7)

# scala - 如何使用 neo4j-scala 包装器从给定节点获取具有特定关系的所有节点？

> ID：15567329
> 
> 赞同：0
> 
> 时间：2013-03-22T09:55:14.397
> 
> 标签：scala, neo4j

我有一个节点（A）和关系（relation）。

```
A--> "relation" --> B 
```

如何使用 neo4j-scala wrapper 获取与给定 A 节点相关的所有 B 节点？

# java - Eclipse：将静态方法调用转换为静态导入

> ID：15567332
> 
> 赞同：46
> 
> 时间：2013-03-22T09:55:22.810
> 
> 标签：java, eclipse, automated-refactoring

有没有办法自动转换这个静态方法调用（`Arrays.asList`）：

```
import java.util.Arrays;
import java.util.List;

public class StaticImport {
    public static void main(String[] args) {
        List<String> list = Arrays.asList("hello", "world");
        System.out.println(list);
    }
} 
```

使用 a 对此调用`static import`：

```
import static java.util.Arrays.asList;

import java.util.List;

public class StaticImport {
    public static void main(String[] args) {
        List<String> list = asList("hello", "world");
        System.out.println(list);
    }
} 
```

我知道我可以按照[本答案](https://stackoverflow.com/questions/288861/eclipse-optimize-imports-to-include-static-imports)`Window » Preferences » Java » Editor » Content Assist » Favorites`中的描述使用它来配置代码完成。

我的问题是关于转换**现有的**静态方法调用。理想情况下，我不想配置“最喜欢的导入”。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-03-22T11:43:53.577

将光标放在方法名称 ( `asList`) 上并按`Ctrl-Shift-M`。

这是“添加导入”命令的默认键盘快捷键。您还可以在“源”菜单上找到该命令。

# php - PHP：使用外部连接文件时关闭mysql连接

> ID：15567334
> 
> 赞同：0
> 
> 时间：2013-03-22T09:55:25.797
> 
> 标签：php, mysql, database-connection

因此，大多数基本的 php/mysql 示例都显示出类似这样的内容（取自 W3 Schools 作为外行示例）：

```
<?php
$con=mysqli_connect("example.com","peter","abc123","my_db");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$result = mysqli_query($con,"SELECT * FROM Persons");

while($row = mysqli_fetch_array($result))
  {
  echo $row['FirstName'] . " " . $row['LastName'];
  echo "<br />";
  }

mysqli_close($con);
?> 
```

使用外部连接文件时，关闭连接的正确方法是什么（如果需要）。

例如。我们将上面的内容分成一个 connection.php 文件，其中包含

```
 <?php
    $con=mysqli_connect("example.com","peter","abc123","my_db");
    // Check connection
    if (mysqli_connect_errno())
      {
      echo "Failed to connect to MySQL: " . mysqli_connect_error();
      }

?> 
```

然后有一个 Query.php 文件，其中包含：

```
<?php
require('connection.php');
$result = mysqli_query($con,"SELECT * FROM Persons");

    while($row = mysqli_fetch_array($result))
      {
      echo $row['FirstName'] . " " . $row['LastName'];
      echo "<br />";
      }
 ?> 
```

是否有必要关闭连接。是否应该`mysqli_close($con);`在 query.php 文件的末尾有一个，或者它是否在 connection.php 文件的末尾，并且有某种方式来链接 query.php 文件将在连接关闭之前运行？

和/或是否需要关闭连接？脚本完成后它会自动关闭吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:18:52.473

*打开的连接（和类似的资源）会在脚本执行结束时自动销毁。但是，您仍应在不再需要时立即关闭或释放所有连接、结果集和语句句柄。这将有助于更快地将资源返回给 PHP 和 MySQL。*

尽管如此，如果您的 PHP 脚本需要大量时间来执行，那么当您不再需要对数据库进行任何请求时关闭连接是一个好主意——至少，如果在查询之后完成了长时间的计算。

如果您的应用程序部署在共享主机上尤其如此：您的用户帐户通常只能同时打开几个连接。（在共享主机上同时打开的连接数量可能非常少；在私人服务器上通常更大）。

***我们自己经常不关闭连接的原因是：***

*   我们通常不知道我们什么时候完成了所有查询——对于由许多小“块”组成的页面尤其如此；它们中的每一个都是独立于其他的，并且可以自己进行查询；那么，我们什么时候可以关闭连接？
*   网页的生成速度通常非常快，因此我们并不真正关心关闭与 DB 的连接。

我认为这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:16:24.470

最好使用一个可能扩展 Mysqli 的类，例如：

```
<?php

    // Database class
    class Database extends \mysqli
    {
        public function __construct($host, $user, $pass, $db)
        {
            //create connection
        }

        public function __destruct()
        {
            //close connection
            //will call this function when class closes or PHP stops
        }
    }

    //using the database
    $db = new Database('localhost', 'user', 'pass', 'db');
    $db->query("SELECT ...."); 
```

# javascript - Twitter Bootstrap 在 CodeIgniter 网站上不起作用，但在小提琴中工作

> ID：15567336
> 
> 赞同：2
> 
> 时间：2013-03-22T09:55:27.563
> 
> 标签：javascript, jquery, html, codeigniter, twitter-bootstrap

我的问题是我无法让 twitter 引导程序在我的网站上工作，而它在小提琴中工作得非常好：http: [//jsfiddle.net/Mns8q/32/](http://jsfiddle.net/Mns8q/32/)

谁能告诉我是什么问题。？提前致谢。

此代码存在于当您到达我的网站中的 url 时调用的视图中，这与 fiddle 相同：

```
<!DOCTYPE html>
<html>

  <head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="/assets/js/bootstrap.js" ></script>

<style>
@import url('http://psestest.hubvents.com/assets/css/bootstrap.css');
 body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;

  .frame {
    position: absolute;
    width: 200%;
    height: 100%;
    top: 0;
    bottom: 0;
    left: 0;

    .navbar .navbar-inner {
      border-radius: 0;
      padding-left: 5px;
    }

    .menu {
      height:100%;
      /* background-color: #3D6AA2; */

      &.collapse {
        float:left;
        height: 100% !important;
        width: auto;
      }

      &.collapse.height {
        position: relative;
        height: 0;
        overflow: hidden;
        -webkit-transition: height 0.35s ease;
        -moz-transition: height 0.35s ease;
        -o-transition: height 0.35s ease;
        transition: height 0.35s ease;
      }

      &.collapse.width {
        position: relative;
        width: 0;
        overflow: hidden;
        -webkit-transition: width 0.35s ease;
        -moz-transition: width 0.35s ease;
        -o-transition: width 0.35s ease;
        transition: width 0.35s ease;
      }

      &.collapse.in.width {
        width: auto;
      }

      &.collapse.in.height {
        height: auto;
      }

      .collapse-inner {
        position: relative;        
        width: 250px;
        height: 100%;
      }

      .navbar .navbar-inner {
        text-align: center;
        color: grey;
        font-size: 1.2em;
        line-height: 38px;
      }

      .nav-stacked {
        padding: 0 10px;
      }

    }
    .view {
      width: 50%;
      height: 100%;
      overflow: hidden;

      .navbar .navbar-inner .btn-navbar {
        display: block;
        float: left;
      }
      #contentm {
        margin: auto 15px;
        text-align: justify;
      }
    }
  }
}

</style>
<script  type="text/javascript">
$(document).ready(function() {
changeContent = function(key) {
  html = textHash[key];
  $('#contentm').html(html);
}

$("#menu a").click(function(e) {
  $('#menu').collapse('hide');
  changeContent(e.target.innerText);
});

textHash = {
  "Futurama": "<h1>Bendin' in the Wind</h1><p>Oh, but you can. But you may have to metaphorically make a deal with the devil.  And by \"devil\", I mean Robot Devil.  And by \"metaphorically\", I mean get your coat. Say what? Ok, we'll go deliver this crate like professionals, and then we'll go ride the bumper cars. Yep, I remember. They came in last at the Olympics, then retired to promote alcoholic beverages! Michelle, I don't regret this, but I both rue and lament it.</p>",
  "Star Wars": "<h1>The Empire Strikes Back</h1><p>Remember, a Jedi can feel the Force flowing through him. Look, I can take you as far as Anchorhead. You can get a transport there to Mos Eisley or wherever you're going. She must have hidden the plans in the escape pod. Send a detachment down to retrieve them, and see to it personally, Commander. There'll be no one to stop us this time!</p>",
  "Doctor Who": "<h1>The Poison Sky</h1><p>Stop talking, brain thinking. Hush. You hit me with a cricket bat. You've swallowed a planet! Stop talking, brain thinking. Hush. It's a fez. I wear a fez now. Fezes are cool. Annihilate? No. No violence. I won't stand for it. Not now, not ever, do you understand me?! I'm the Doctor, the Oncoming Storm - and you basically meant beat them in a football match, didn't you?</p>"
};
});
</script>

  </head>

  <body>
    <div class="frame">
      <div id="menu" class="menu nav-collapse collapse width">
        <div class="collapse-inner">
          <div class="navbar navbar-inverse">
            <div class="navbar-inner">
              Menu

            </div>
          </div>
          <ul class="nav nav-tabs nav-stacked">
            <li><a>Futurama</a></li>
            <li><a>Star Wars</a></li>
            <li><a>Doctor Who</a></li>
          </ul>
        </div>
      </div>
      <div class="view">
        <div class="navbar navbar-inverse">
          <div class="navbar-inner">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target="#menu">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>
        </div>
        <div id="contentm">
          Integer eu quam et lacus luctus molestie.
        </div>
      </div>
    </div>
  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:15:17.603

当您在 jsfiddle 上时，您似乎没有在您的网站上使用 SCSS。

你可以重写你的CSS如下：

```
@import url('http://psestest.hubvents.com/assets/css/bootstrap.css');

body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

.frame {
    position: absolute;
    width: 200%;
    height: 100%;
    top: 0;
    bottom: 0;
    left: 0;
}

.navbar .navbar-inner {
    border-radius: 0;
    padding-left: 5px;
}

.collapse-inner {
    position: relative;        
    width: 250px;
    height: 100%;
}

.navbar .navbar-inner {
    text-align: center;
    color: grey;
    font-size: 1.2em;
    line-height: 38px;
}

.nav-stacked {
    padding: 0 10px;
}

.view {
    width: 50%;
    height: 100%;
    overflow: hidden;
}

.navbar .navbar-inner .btn-navbar {
    display: block;
    float: left;
}

#contentm {
    margin: auto 15px;
    text-align: justify;
}

.menu {
    height:100%;
}

.collapse {
    float:left;
    height: 100% !important;
    width: auto;
}

.collapse.height {
    position: relative;
    height: 0;
    overflow: hidden;
    -webkit-transition: height 0.35s ease;
    -moz-transition: height 0.35s ease;
    -o-transition: height 0.35s ease;
    transition: height 0.35s ease;
}

.collapse.width {
    position: relative;
    width: 0;
    overflow: hidden;
    -webkit-transition: width 0.35s ease;
    -moz-transition: width 0.35s ease;
    -o-transition: width 0.35s ease;
    transition: width 0.35s ease;
}

.collapse.in.width {
    width: auto;
}

.collapse.in.height {
   height: auto;
} 
```

# asp.net-mvc - User.IsInRole 不起作用

> ID：15567338
> 
> 赞同：28
> 
> 时间：2013-03-22T09:55:33.323
> 
> 标签：asp.net-mvc, forms-authentication, simplemembership, .aspxauth

我有 ASP.NET MVC 4 应用程序。我使用 Simple Membership Provider 允许勾选登录表单下的记住我复选框。如果勾选，将创建持久性 cookie .ASPXAUTH，自登录日期起 100 天后过期。除了应用程序的主菜单外，一切正常。

菜单的某些部分仅供管理员用户使用。我用：

```
@if (User.IsInRole("Administrator")) { @Html.Partial("_MainMenuPartial") } 
```

锁定它们，使其不被呈现给普通用户。这种方法在登录系统后就可以正常工作。当我在一段时间后返回并使用持久 cookie 对我进行身份验证时，我确实登录了，但是

```
@User.IsInRole("Administrator") 
```

返回“False”，所以我看不到管理菜单项。同时

```
@User.Identity.Name 
```

返回正确的登录名和

```
@User.Identity.IsAuthenticated 
```

返回“True”，证明持久 cookie 工作正常。为什么即使用户已通过系统身份验证，我也无法访问用户角色？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-10-30T14:05:35.330

我有一个微笑的问题。就我而言，当我注销并再次登录时，问题就解决了。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-07-09T18:54:31.350

在 MVC5 中使用角色时出现问题

我找到了解决方案。在我的 web.config 中：

```
<modules>
    <remove name="FormsAuthenticationModule" />
    <remove name="RoleManager" />
</modules> 
```

我添加了 remove name="RoleManager" 行，并且新的 AspNet.Identity 代码接管了允许我使用 User.IsInRole(..)

[http://forums.asp.net/t/1952572.aspx?问题+using+roles+with+MVC5](http://forums.asp.net/t/1952572.aspx?Problem+using+roles+with+MVC5)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-05-24T11:06:59.377

老问题，但这里有一些缺失的信息。我遇到了同样的问题，还有一件事要记住。如果您在验证后（**不向客户端发送响应）测试用户身份（***如 User.IsInRole("admin")*），身份框架**尚未填充此会话信息**（或者至少，我找不到方法去做）。您请求的此信息会在您的控制器返回后的某个时间点填充。如果您希望（IE）在登录后重定向到不同的视图，根据用户角色，您必须使用自定义授权过滤器。

 ***** * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-12-26T09:17:53.917

您是否尝试过添加

```
[InitializeSimpleMembership] 
```

在您进行检查的控制器中？

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-26T23:26:46.720

`IsUserInRole`我在返回 false时遇到了类似的问题。通过将手表放在上面，我能够通过使用下面描述的过载来克服这个问题。试试看，在你出错的地方设置一个断点，看看会发生什么。

```
@if (Roles.IsUserInRole(Model.UserName, "Administrator")) 
```

我很确定您也可以`User.Identity.Name`用作第一个参数。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-23T18:45:19.627

我有一个类似的问题，似乎身份验证模块没有与 SimpleMembershipProvider 完全连接。为了解决这个问题，您可以使用 Role 类来访问所需的信息。例如，要检查是否使用角色，您可以使用以下内容：

```
Roles.GetRolesForUser("sergey").Contains("Developer") 
```

在使用 SimpleMembershipProvider 角色时，还有其他有用的方法：

```
 Roles.RoleExists("Developer")
   Roles.CreateRole("Developer");
   Roles.AddUserToRole("sergey", "Developer"); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-15T05:44:16.003

如果您使用的是最新的身份框架，请查看您是否使用以下

```
services.AddIdentity<IdentityUser,IdentityRole>()
        .AddEntityFrameworkStores<WebUserContext>()
        .AddDefaultTokenProviders(); 
```

如果您使用的是 AddDefaultIdentity，则不会填充角色。

```
services.AddDefaultIdentity<IdentityUser>()
        .AddEntityFrameworkStores<WebUserContext>()
        .AddDefaultTokenProviders(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-04-26T11:59:45.040

这个账号的“EmailConfirmed”可能还是假的，试试改成真

![数据库截图](../Images/49b263aaf39e8e6733238fa2e2768400.png)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-11-10T07:21:26.083

如果您使用 Brock Allen 的 IdentityManager 创建角色并将其分配给用户，那么您应该阅读这篇文章：[https ://github.com/IdentityManager/IdentityManager.AspNetIdentity/issues/3](https://github.com/IdentityManager/IdentityManager.AspNetIdentity/issues/3)

您需要取消注释以下行：

```
this.RoleClaimType = System.Security.Claims.ClaimTypes.Role; 
```

现在您将意识到您的用户曾经在角色中不再存在，您必须重新添加它们。如果您查看 AspNetUserClaims 表，您将看到角色的 claimType 和您想要的“ [http://schemas.microsoft.com/ws/2008/06/identity/claims/role ”。](http://schemas.microsoft.com/ws/2008/06/identity/claims/role)

执行此操作后，`User.IsInRole("rolename")`将按预期运行。

我希望这对某人有所帮助，我花了一段时间才弄清楚这一点。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-09-08T19:39:29.123

这些答案都不适合我，但我确实在这里找到了答案：[https ://thinkthencode.wordpress.com/2016/04/24/azure-ad-using-app-roles-for-authorization/](https://thinkthencode.wordpress.com/2016/04/24/azure-ad-using-app-roles-for-authorization/)

关键是将以下内容添加到`Startup.Auth.cs`：

```
TokenValidationParameters = new TokenValidationParameters
{
    RoleClaimType = "roles"
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-03-26T23:37:14.743

我有一个类似的问题，但在我的情况下，问题是会话超时未与身份验证超时同步，所以我没有被自动踢出，但我的会话已过期，并且由于我允许的操作存储在会话变量中，我无法检索当前用户的正确选项。

即使您仍然登录，请尝试检查您的会话是否未过期

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-01-02T10:09:58.030

清除所有 cookie 并尝试再次登录。如果我们改变了我们的角色，cookie 可能不会意识到这一点。重置 Cookie 并使用您的新角色创建一个 cookie，然后重试。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-10-30T12:11:37.053

相当老的话题，但可以在 vs 2015 Web 表单应用程序工作解决方案中确认：

```
<modules>
    <remove name="FormsAuthenticationModule" />
    <remove name="RoleManager" /> <!--add this to web config-->
</modules> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-29T02:14:39.470

可能会发生几件事，这里有一些一般的事情可以尝试：

1.  尝试在调试模式下运行并确保代码行被执行 - 愚蠢但可能会发生
2.  如其他答案所述，尝试注销并重新登录
3.  确保角色拼写正确
4.  确保将正确的用户分配给正确的角色 ID
5.  尝试将整个解决方案重新发布到服务器 - 在我的情况下，一切都在本地运行良好，但在服务器上没有，直到完全删除并重新发布
6.  如果一切都失败了，在增加复杂性之前尝试运行一个开箱即用的项目并对其进行测试

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-04-28T00:34:12.880

一段时间以来，我一直在为 MVC5 角色管理器而苦苦挣扎。我已经验证`User.IsInRole`可以同时返回不同的结果，显然这是因为`User`对象被缓存并且需要失效。一种方法是注销并重新登录，作为此处指定的答案之一。只需将其放入添加新角色的控制器中：

```
 UserManager.AddToRole(User.Identity.GetUserId(), "Administrator");

        var updatedUser = await UserManager.FindByNameAsync(User.Identity.Name);
        var newIdentity = await updatedUser.GenerateUserIdentityAsync(UserManager);
        AuthenticationManager.SignOut();
        AuthenticationManager.SignIn(newIdentity); 
```

但是，如果用户在其他窗口中打开了您的应用程序，则不会更新所有这些窗口。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-11-29T17:23:25.943

> 将此代码粘贴到 Global.asax

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
        {
            HttpCookie authCookie =
                Context.Request.Cookies[FormsAuthentication.FormsCookieName];
            if (authCookie != null)
            {
                FormsAuthenticationTicket authTicket =
                    FormsAuthentication.Decrypt(authCookie.Value);
                string[] roles = authTicket.UserData.Split(new Char[] { ',' });
                GenericPrincipal userPrincipal =
                    new GenericPrincipal(new GenericIdentity(authTicket.Name), roles);
                Context.User = userPrincipal;
            }
        }

        protected class RolesAttribute : AuthorizeAttribute
        {
            public RolesAttribute(params string[] roles)
            {
                Roles = String.Join(",", roles);
            }
        } 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2015-11-16T20:09:12.540

在用户前面添加页面。这有效： `Page.User.IsInRole("Administrator")`

* * *

## 回答 #18

> 赞同：-5
> 
> 时间：2015-02-13T18:17:00.247

对于我的代码，它必须是复数，而不是单数：

```
User.IsInRole("Administrators") 
```****

# php - 从数据库中获取发件人分组的最后一封邮件的查询是什么

> ID：15567339
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:55:35.263
> 
> 标签：php, mysql, select, group-by, greatest-n-per-group

我只想打印发件人的最后一封邮件。这是我的 PHP 代码，我需要在其中使用它。

```
$resultmsg=mysql_query("SELECT * FROM mails WHERE  Recieve=$AID GROUP BY Sender DESC ORDER BY ID DESC LIMIT 5 ",$con);
                            while($rowmsg=mysql_fetch_array($resultmsg) )
    {
$authormsg=$rowmsg['Sender'];
$id=$rowmsg['ID'];
$date=$rowmsg['Date'];
$state=$rowmsg['State'];
$sqlnamea=mysql_query("SELECT * FROM users WHERE ID=$authormsg");
                            $datauthor=mysql_fetch_object($sqlnamea);
$authorname=$datauthor->Lname;
$authormsgpic=$datauthor->Profpic;
echo"
<li dir='rtl' style='border-bottom:1px solid silver;";
if($rowmsg['State']=='new')echo "border-right:2px solid #FFAEAF;";
 echo"' class='postedArticle' id='$id postedArticle' ><a href='sendmsg.php?from=".$authormsg."' style='float:right;' target=home><img style='float:right;max-width:40px;max-height:40px;margin-bottom:3px;' src='images/usrimgs/".$authormsgpic."' />&nbsp".$authorname."</a>&nbsp".$rowmsg["Content_text"].""; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:07:12.330

将限制更改为 1：

SELECT * FROM mails WHERE Recieve=$AID GROUP BY Sender DESC ORDER BY ID DESC LIMIT **1**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:03:31.133

```
 SELECT x.* 
    FROM mails x
    JOIN
       ( SELECT sender,MAX(id) max_id FROM mails GROUP BY sender ) y
      ON y.sender = x.sender
     AND y.max_id = x.id; 
```

# rtf - 从 EA 生成 RTF 文档时，样板文本能否以字段值为条件？

> ID：15567342
> 
> 赞同：1
> 
> 时间：2013-03-22T09:55:42.410
> 
> 标签：rtf, enterprise-architect

使用 EA 9.3.930 我正在尝试生成一个文档，之后我不必手动编辑。

我有一个要显示的元素部分

PackageName::ElementName 扩展 BaseClasses

这在有基类的情况下很好，但是当没有定义基类时，我无法摆脱“扩展”。

我的模板字段如下所示：

{Element.ParentPackage}::{Element.Name} 扩展 {Element.BaseClasses}

是否可以使“扩展”依赖于非空 Element.BaseClasses 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:05:32.773

不在那个结构中，不。您不能根据字段是否具有值来制作固定文本。

但是，如果您更改模板以便将结果输出到表格中，那么它应该是可行的。然后，您将使用“{Element.ParentPackage}::{Element.Name} Base Classes”作为文档标题（不是表格标题行）并将 {Element.BaseClasses} 放在表格行上。我很确定，如果没有基类，则根本不会生成表——但您仍然需要手动编辑文档以删除标题。

如果您使用主文档/模型文档结构，您可以创建两个模型文档，一个具有 {Element.ParentPackage}::{Element.Name} 扩展 {Element.BaseClasses}，另一个具有 {Element.ParentPackage}::{元素名称}。

然后，您可以创建仅检索那些分别具有和不具有基类的类并将它们连接到任一模型文档的搜索。

您可以在各自的模板中设置过滤器，而不是在模型文档中使用 SearchName 标签；但是，我不确定是否在 EA 10 中引入了此功能（文档选项对话框，自定义查询选项卡）。

如果没有看到整个模板结构，很难更具体，但上述方法之一应该可以工作。在 EA 10 中，您可以使用模板片段来实现效果，但这些在 EA 9 中绝对不可用。

# javascript - Spring验证成功后如何调用JavaScript？

> ID：15567344
> 
> 赞同：1
> 
> 时间：2013-03-22T09:55:47.760
> 
> 标签：javascript, spring, spring-mvc, spring-annotations

我在 Spring 中做一个 Chat 项目。它只包含一个 JSP 页面。

在那个 jsp 中，我有两个输入文本框（名称、消息）、一个发送按钮和一个用于附加消息的文本区域。我使用 Spring Annotations 进行了文本框验证。

当弹簧控制器返回成功字符串时，我需要调用 JavaScript 函数。

当 Spring 验证返回成功时，如何调用 JavaScript 函数来执行 Ajax 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:07:02.187

在 spring 呈现的视图中只需添加一个 javascript 函数的执行

用 jquery ：

```
$(document).ready(function() {
dotheajaxcall();
}); 
```

这不是更简单吗？或者我不明白这个问题。

# wordpress - Youtube 视频未在灯箱中打开

> ID：15567355
> 
> 赞同：2
> 
> 时间：2013-03-22T09:56:14.180
> 
> 标签：wordpress, youtube, prettyphoto

嗨，我在 wordpress 中使用 prettyphoto 媒体插件在灯箱中显示我的 youtube 视频。我有三个，我将每个都发布为不同的 youtube 视频。第一篇文章使用 prettyphoto 在灯箱中显示视频。但其他两个不在灯箱中打开，只是重定向到 youtube 页面。

下面一个完美地工作

```
<a class="slid-img"  href="http://www.youtube.com/watch?feature=player_embedded" rel="prettyPhoto"><img src="http://code/wp-content/uploads/2013/02/video1.png" alt="video1" width="412" height="323" class="alignnone size-full wp-image-731" /></a> 
```

以下两个不适用于灯箱

```
<a class="slid-img" href="http://www.youtube.com/watch?v=k4QO"  rel="prettyPhoto"><img src="http://code/wp-content/uploads/2013/02/video2.png" alt="video3" width="411" height="324" class="alignnone size-full wp-image-732" /></a>

<a class="slid-img" href="http://www.youtube.com/watch?feature=player_embedded"  rel="prettyPhoto" ><img src="http://code/wp-content/uploads/2013/02/video1.png" alt="video2" width="412" height="323" class="alignnone size-full wp-image-731" /></a> 
```

谁能告诉我如何使它工作？

所有视频都设置在滑块中。其他问题是第一个视频仅在该视频未在 fancybox 中打开后的第一轮滑块中打开

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:49:20.820

以下是针对您的情况的一些基本故障排除步骤：

您是否在 PrettyPhoto 中尝试过非 YouTube 内容？尝试一些——比如从 Wordpress 加载的图像。如果图像也不起作用，您的 javascript 中的某处可能会在您第一次调用 PrettyPhoto 时触发错误。仔细查看插件生成的 javascript - 很可能是您的 wordpress 页面头部的 javascript。

否则，JetPack 可能与 PrettyPhoto 发生冲突。如果您安装并启用了此插件，请先尝试禁用它。

如果您没有发现更好的东西，请尝试禁用除 PrettyPhoto 之外的所有 wordpress 插件。如果仍然无法正常工作，请尝试恢复到默认的 wordpress 主题，例如 2010。

如果这些都不是问题，则可能是您正在运行的 jQuery 版本。我认为 PrettyPhoto 只兼容 jQuery 1.6.1。

要检查的另一件事是确保您只加载一个 jQuery 副本。查看生成的 wordpress 页面的源代码，看看是否有多个对 jquery 的引用。

# maven - 将 xhtml 页面放入 jar maven 项目中

> ID：15567356
> 
> 赞同：1
> 
> 时间：2013-03-22T09:56:18.470
> 
> 标签：maven, jsf-2, jar, war

我有 2 个 maven 项目（war 和 jar）。
我想将 jsf 页面放入将在我的 webapp 页面中使用的 jar 项目中。

这是我的罐子的结构

> > JarProject
> > |-- META-INF
> > | |-- 资源
> > | | | -- 我的页面
> > | | | | `-- pages.xhtml
> > | |-- 面孔配置.xml
> > | com
> > | |....

在我的 Web 项目中，我将 jar 放入

> WEB-INF\lib

我像这样包含了我的页面

```
<ui:include src="/myPages/pages.xhtml" /> 
```

我尝试了这个解决方案，但它没有用，你能告诉我我错过了什么

# android - 缅甸字体 (@font-face) 未在带有固件 (4.1.2) 的 Android 手机 Galaxy S3 上显示更正

> ID：15567362
> 
> 赞同：0
> 
> 时间：2013-03-22T09:56:24.647
> 
> 标签：android, font-face, android-4.2-jelly-bean, html-rendering, woff

我使用@font-face 用缅甸语测试了我的博客。它适用于 Chrome、Firefox、IE 和 Safari。我用 Window、Mac、iPhone 和 Galaxy S3 (Jelly Bean 4.1.2) 进行了测试。

我发现除 Android 设备外，其他所有设备都可以很好地显示字体。很明显，安卓手机下载的是网页字体。它虽然显示字体。它只是显示不正确。

我使用 Google 字体 API 早期访问中的“Tharlon”字体。

我的博客 ID 是[http://www.constructionforum-myanmar.com/](http://www.constructionforum-myanmar.com/)

我不是极客。我只是一名来自建筑行业的专业人士，想要剪切我的经验和知识。我在这里和那里阅读有关编码的信息并写了这个博客，我希望它能够在所有设备上阅读。不过，缅甸字体并未显示在所有设备上。

请你帮助我好吗？我应该怎么做才能解决Android上的这个字体问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:07:31.440

毕竟我发现它在其他 Andriod 手机上运行良好，例如 HTC One 和早期版本的 Galaxy S 固件。

问题是 Galaxy S 的固件版本 (4.1.2) 无法正确呈现缅甸（缅甸）字体。

# php - php注销不起作用

> ID：15567369
> 
> 赞同：2
> 
> 时间：2013-03-22T09:56:40.270
> 
> 标签：php, login

我的问题可能看起来很简单，但我不知道我的代码有什么问题。我有一个非常简单的登录系统，如下所示：

登录.php：

```
<?php  
session_start();

if ($_SESSION['loggedin'] = 1) {
   header("Location: admin.php");
}

if ($_GET['login']) {
     // Only load the code below if the GET
     // variable 'login' is set. You will
     // set this when you submit the form

     if ($_POST['username'] == 'thenemis'
         && $_POST['password'] == 'slustice') {
         // Load code below if both username
         // and password submitted are correct

         $_SESSION['loggedin'] = 1;
          // Set session variable

         header("Location: admin.php");
         exit;
         // Redirect to a protected page

     } else echo "Wrong details";
     // Otherwise, echo the error message
}
?>

<form action="?login=1" method="post" accept-charset="utf-8">  
                <fieldset>
                  <label for="username">Usermame:</label>
                  <input type="text" name="username" placeholder="username" required>
                  <label for="password">Password:</label>
                  <input type="password" name="password" placeholder="password" required>
                  <input type="submit" value="Login"> </td>
                </fieldset>
</form> 
```

这工作正常。

管理员.php：

```
<?php

    session_start();
    // Call this function so your page
    // can access session variables

    if ($_SESSION['loggedin'] != 1) {
        // If the 'loggedin' session variable
        // is not equal to 1, then you must
        // not let the user see the page.
        // So, we'll redirect them to the
        // login page (login.php).

        header("Location: login.php");
        exit;
    }

?>

<p><a href="logout.php">Log out</a></p> 
```

现在我的问题是，即使我单击了注销 URL，系统也会让我保持登录状态，如下所示：

注销.php：

```
<?php
    session_start();
    session_destroy();
    header("Location: login.php");
?> 
```

我的注销程序显然存在一些基本错误，但我似乎找不到它......提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:06:46.003

你在这里做任务：

```
if ($_SESSION['loggedin'] = 1) {
    header("Location: admin.php");
} 
```

你应该做比较

```
if ($_SESSION['loggedin'] == 1) {
    header("Location: admin.php");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:00:54.587

试试这个

```
<?php
    session_destroy();
    header('Location: index.php');
    exit();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:01:28.547

更改您的`admin.php`文件

```
<?php
    session_start();

    if (!isset($_SESSION['loggedin'])) {
        header("Location: login.php");
        exit;
    }

?>

<p><a href="logout.php">Log out</a></p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:01:42.053

在 login.php 中，您在验证用户详细信息后没有启动 session_start ......

尝试添加 session_start(); 在 $_SESSION['loggedin'] = 1 之前；

这可能对你有用...

在注销.php

在使用此行取消设置会话变量之前

未设置（$_SESSION['登录']）；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T10:04:42.167

从[php.net 手册](http://www.php.net/manual/en/function.session-destroy.php)：

> 为了完全终止会话，**例如注销用户**，还必须取消设置会话 ID。如果使用 cookie 传播会话 id（默认行为），则必须删除会话 cookie。setcookie() 可以用于此。

使用[此代码](http://www.php.net/manual/en/function.session-destroy.php#example-4632)（从 php.net 复制）安全地注销：

```
<?php
// Initialize the session.
// If you are using session_name("something"), don't forget it now!
session_start();

// Unset all of the session variables.
$_SESSION = array();

// If it's desired to kill the session, also delete the session cookie.
// Note: This will destroy the session, and not just the session data!
if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}

// Finally, destroy the session.
session_destroy();
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T10:24:23.243

***只需尝试以下更改：***

**在 login.php 中：**

```
if ($_SESSION['loggedin'] == 1) {
   header("Location: admin.php");
} 
```

**在 logout.php 中：**

```
<?php
    session_start();
    ob_start();
    session_destroy();
    $_SESSION['loggedin']=""; //Just empty that session variable
    header("Location: login.php");
?> 
```

我认为这可以帮助您解决问题。

# c++ - TBB中如何终止和停止任务？

> ID：15567370
> 
> 赞同：0
> 
> 时间：2013-03-22T09:56:40.550
> 
> 标签：c++, tbb

我面临一个问题，其中我有两个任务正在运行，一个是父任务，一个是子任务，子任务正在运行一个无限循环，并且满足某些条件我想手动终止子执行。我怎么能在待定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:11:19.837

你想突然终止任务，还是让它很好地离开循环，以便任务可以自行结束？

对于第一种情况，您可能可以使用[destroy](http://threadingbuildingblocks.org/docs/doxygen/a00337.html#dfaacf92685e5f86393bf657b2853bf8)方法

第二种情况可能是构建代码的更好方法。假设您的循环具有以下条件

```
while(!finished) {
  ...
} 
```

您可以将其更改为对`finished`变量使用锁定，这样您也可以从任务外部访问它，并在您希望任务结束时更改其值。您只需使用以下函数来读取和写入值，而不是在任务外部和内部直接访问变量。

```
tbb::mutex lock;
bool finished;

void finish() {
  lock.lock();
  finished = true;
  lock.unlock();
}

bool is_finished() {
  lock.lock();
  bool ret = finished;
  lock.unlock();
  return ret;
} 
```

所以循环条件现在是And 在你想要它结束时`while(! is_finished())` 调用的主线程中的某个地方`task.finish()`

# leaflet - 访问大型数据集以显示在 Leaflet 上的有效方法

> ID：15567378
> 
> 赞同：9
> 
> 时间：2013-03-22T09:56:54.833
> 
> 标签：leaflet

我有一个全球对象数据库（地图上的点），我想在传单地图上显示。不是一次加载所有数据库（只是太大）并在 Leaflet LayerGroup 上创建对象，有没有更有效的方法来查询数据，也许是在每个地图图块加载时，或者我正在寻找创建自定义解决方案为了这？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T07:19:36.297

您可以在 map 上观看 'moveend' 事件，在`map.on('moveend',loadstuff)`内部进行 ajax 调用`loadstuff()`以获取当前内部的标记`map.getBounds()`，然后添加/删除标记（我假设您对它们中的每一个都有某种全局标识符）它们是否在里面或在当前视图之外。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-21T01:38:50.257

有一种标准和有效的方法来做 snkashis 所说的。创建一个平铺的 geoJSON 服务，并使用[leaflet-tilelayer-geojson](https://github.com/glenrobertson/leaflet-tilelayer-geojson)插件。

然后，您在浏览器端需要的所有代码都是（来自 Github 页面）：

```
 var geojsonURL = 'http://polymaps.appspot.com/state/{z}/{x}/{y}.json';
var geojsonTileLayer = new L.TileLayer.GeoJSON(geojsonURL, {
        clipTiles: true,
        unique: function (feature) {
            return feature.id; 
        }
    }, {
        style: style,
        onEachFeature: function (feature, layer) {
            if (feature.properties) {
                var popupString = '<div class="popup">';
                for (var k in feature.properties) {
                    var v = feature.properties[k];
                    popupString += k + ': ' + v + '<br />';
                }
                popupString += '</div>';
                layer.bindPopup(popupString);
            }
            if (!(layer instanceof L.Point)) {
                layer.on('mouseover', function () {
                    layer.setStyle(hoverStyle);
                });
                layer.on('mouseout', function () {
                    layer.setStyle(style);
                });
            }
        }
    }
);
map.addLayer(geojsonTileLayer); 
```

# ios6 - 在 iOS 6.1.2 中显示 UIAlertView 时，会发生内存泄漏

> ID：15567382
> 
> 赞同：0
> 
> 时间：2013-03-22T09:57:04.707
> 
> 标签：ios6, uialertview, memory-leaks

**强文本** 在 iOS 6.1.2 中显示 UIAlertView 时，应用程序会出现如下内存泄漏：

```
__NSDictionaryM 1   0x1e5c6000  32 Bytes    TextInput   __92-[TIResourcePathManager     fetchAssetsWithNames:forInputModes:updatingDictionary:continuation:]_block_invoke_0
Malloc 16 Bytes 1   0x1e5d5320  16 Bytes    TextInput   __92-[TIResourcePathManager   fetchAssetsWithNames:forInputModes:updatingDictionary:continuation:]_block_invoke_0 
```

如下代码，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    if (indexPath.row == 1 && indexPath.section == 1) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Test" message:nil delegate:nil cancelButtonTitle:@"cancel" otherButtonTitles:@"ok", nil];
        [alert show];
        [alert autorelease];
} 
```

所以为什么？

**PS。可能我忘了说这个 UIAlertView 可能会一个一个显示很多次，所以有时候第一次显示 UIAlertView 还可以，但是当我尝试几次时，就会发生内存泄漏。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:12:50.373

代替：

`[alert autorelease];`

和：

`[alert release];`

# php - Zend 框架中的表单问题

> ID：15567386
> 
> 赞同：0
> 
> 时间：2013-03-22T09:57:16.540
> 
> 标签：php, zend-framework, zend-form, zend-framework-routing

```
I am getting the following error :
 Fatal error: Class 'Application_Form_Employee' not found in /var/www/Employee/application/controllers/EmployeeController.php on line 31 
```

我为应用程序中的表单创建了一个单独的文件夹，并将表单 Employee.php 放在 Forms 内的 Employee 文件夹中。application.ini 中的路由如下所示：resources.router.routes.employee.route = /employee

```
 resources.router.routes.employee.defaults.module = default           

  resources.router.routes.employee.defaults.controller = Employee

  resources.router.routes.employee.defaults.action = new  
   resources.router.routes.employee.route = /employee

resources.router.routes.employee.defaults.module = default           

resources.router.routes.employee.defaults.controller = Employee

resources.router.routes.employee.defaults.action = edit
resources.router.routes.employee.route = /employee

resources.router.routes.employee.defaults.module = default           

resources.router.routes.employee.defaults.controller = Employee

 resources.router.routes.employee.defaults.action = index 
```

请说明是否需要任何其他信息 //////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// ////////////////// PS：我已经尝试通过更改文件夹和路由以千种方式解决此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:02:07.213

要简单地启用表单并正确配置资源，请使用 Zend_Tool cli。

在您的命令行或者如果您的 ide 是可兼容的（Netbeans 是）输入命令：

```
zf enable form 
```

这将为应用程序级别和应用程序命名空间表单创建正确的目录。

当使用应用程序级表单时，类名将带有前缀，`Application_Form_`文件将存在于

```
/application
    /forms
        /Myform.php 
```

如果您需要模块中的表单，只需更改命令以反映模块名称：

```
zf enable form -m admin 
```

Zend_Tool cli 中的几乎所有命令都可以使用**-m**开关来指定模块名称。

ZF1 有许多预定义资源，它们有自己的命名空间，该类`Zend_Application_Module_Autoloader`具有默认命名空间的完整列表以及每个资源的默认路径。

此答案假定您的应用程序设置相当接近默认 ZF1 配置。

**PS**我注意到您所有的路线都有相同的名称“员工”。如果您希望这些路由中的每一个都真正起作用，它们需要不同的名称。各个网址应该可以工作，但“命名”路线不会。只有堆栈中的最后一条路由有效。

例如：

```
//4 lines equals one route
resources.router.routes.employee.route = /employee
resources.router.routes.employee.defaults.module = default           
resources.router.routes.employee.defaults.controller = Employee
resources.router.routes.employee.defaults.action = index

//this route might work better as
resources.router.routes.editEmployee.route = /employee/edit
resources.router.routes.editEmployee.defaults.module = default           
resources.router.routes.editEmployee.defaults.controller = Employee
resources.router.routes.editEmployee.defaults.action = edit 
```

每个“命名”路由都应该有一个唯一的名称和一个唯一的 url。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T10:26:37.797

您不应将表单类命名为**Application_Form_Employee**。

它应该被命名为**Form_Employee**。在 Zend 中，你永远不应该在你的类前面加上**Application 。**

例如，位于 application/Models/Test.php 中的模型应命名为 Model_Test 而*不是*Application_Model_Test。表格，服务也一样......

# sql - PreparedStatementCallback; 糟糕的 SQL 语法

> ID：15567388
> 
> 赞同：1
> 
> 时间：2013-03-22T09:57:17.767
> 
> 标签：sql, select

我在我的 sql 命令中收到以下 sql 错误！请谁能解释我在这里做错了什么！

```
 15:20:43,686 ERROR [PageExceptionFlowInterceptor] Exception (EJBException) while executing Action [com.jkcs.khms.web.cashiering.hotelTax.HotelTaxAction] : org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [SELECT * FROM (SELECT rs_qry.*, ROWNUM rn_qry FROM ( SELECT   ht.htl_tax_id, 
                    ht.hotel_id, 
                    ht.tax_id,
                    ht.status, 
                    ht.display_sequence, 
                    t.id, 
                    t.code, 
                    h.hotel_name, 
                    h.hotel_id
            FROM 
                    PMS_T_HTL_TAX ht, 
                    CRS_T_TAX t, 
                    CRS_T_HOTEL h WHERE ht.hotel_id IN (1) AND ht.tax_id IN (31,3,37,38,36,23,29,30,24,10,12,20,11,1,16,17,18,19,34,35,15,33,22,2,21,32) order by  ht.hotel_id, ht.htl_tax_id  ) rs_qry ) WHERE rn_qry BETWEEN 1 AND 10]; nested exception is java.sql.SQLException: ORA-00904: "T"."ID": invalid identifier 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-07T17:18:26.157

您的 CRS_T_TAX 表没有名为 ID 的列

# mysql - SQL 案例给出不一致的结果

> ID：15567391
> 
> 赞同：2
> 
> 时间：2013-03-22T09:57:20.833
> 
> 标签：mysql, sql, sql-server, oracle

我从以下两个 SQL 查询中得到不一致的结果。

查询1：`select (case when 'Abc' = null then 1 else 0 end) from dual`

查询2：`select (case when ('Abc' <> null) then 1 else 0 end) from dual`

两个查询的结果相同，即 `0`

怎么了，我错过了什么？

**注意：：** 我知道我可以使用`IS NULL and IS NOT NULL`，但我的问题是为什么上述查询的结果不一致。

**编辑**：从@ppeterka 的回答中添加。

```
select (case when null = null then 1 else 0 end) from dual 
```

这也回来`0`了。Null 甚至不等于它自己。

但是，这会返回什么呢？

```
select (case when null <> null then 1 else 0 end) from dual 
```

`0`再次

[SQLFiddle 链接](http://www.sqlfiddle.com/#!2/6bbec/8)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T09:59:36.690

因为`NULL`未知所以结果是`0`。如果要比较列或值是否为空，请使用`IS NULL`或`IS NOT NULL`。

```
select (case when 'Abc' IS null then 1 else 0 end) from dual       -- 0
select (case when ('Abc' IS NOT null) then 1 else 0 end) from dual -- 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f01ca/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:18:44.167

将任何东西与 NULL 进行比较的结果，甚至它本身，总是 NULL（不是 TRUE 或 FALSE）。

**搜索到的 CASE 表达式：**

*   如果没有 Boolean_expression 的计算结果为 TRUE，则如果指定了 ELSE 子句，数据库引擎将返回 else_result_expression，如果没有指定 ELSE 子句，则返回 NULL 值。

在您的情况下，结果始终为 0，因为 ELSE 子句中的 0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T10:19:42.110

要为此添加一些扭曲，请尝试以下操作：

```
select (case when null = null then 1 else 0 end) from dual 
```

这也回来`0`了。Null 甚至不等于它自己。

但是，这会返回什么呢？

```
select (case when null <> null then 1 else 0 end) from dual 
```

这又回来`0`了！哦，天哪……它甚至*不等于*自己，而它又不等于自己……这*是*一个可以抓住而不发疯的情况……

**为什么要记住这一切？- 有人可能会问**

一个例子是**索引**：在 Oracle 中，索引的工作方式与人们期望它们`NULL`在列允许使用该值的值上工作的方式不同。这意味着给定一个索引，如果索引中包含的行的所有值（字段、字段上的函数等）都是*all* `NULL`，则该行将不会在该给定索引中建立索引。所以这意味着一个索引，只有一个索引值（例如，直接一个字段），一个空值将意味着该行不包含在索引中。

为了克服这个

*   建议添加一个索引，该索引具有*语义上表示`NULL`含义*的不同、精确的值，例如`NVL(mynullcol,-1)`在仅包含正整数的列上以便能够快速查询它们。
*   或者您可以添加一个常量值以形成一个“半多值”索引，该索引索引所有行，其中一个可以为空，而另一个为常量。( `create index idx_myindex on table(column_with_nulls,1);`)

（[这个问题](https://stackoverflow.com/questions/1230786/when-does-oracle-index-null-column-values)和[这篇文章](http://www.dba-oracle.com/oracle_tips_null_idx.htm)更深入地详细介绍了这个主题）

另一个例子是**订购**...

```
select (case when null < null then 1 else 0 end) from dual;
select (case when null > null then 1 else 0 end) from dual; 
```

两者`0`。没关系……我们现在已经预料到了……那么这个呢？

```
select (case when 'Abc' > null then 1 else 0 end) from dual;
select (case when null > 'Abc' then 1 else 0 end) from dual; 
```

呃，哦......`0`又是。这可能是一个问题 - 订购如何运作？

```
select col_1 from
(select null as col_1 from dual)
union all (select 'Abc' as col_1 from dual)
union all (select null as col_1 from dual)
union all (select null as col_1 from dual)
order by col_1 
```

然而，这始终如一地返回：

```
Abc
null
null
null 
```

使用`... order by col_1 DESC`回报：

```
null
null
null
Abc 
```

因此，从这一点来看，根据经验，似乎确实`'Abc' < null`......但是，根据[**@ypercube**](https://stackoverflow.com/questions/15567391/sql-case-giving-inconsistent-result#comment22074803_15567903)[的宝贵评论](https://stackoverflow.com/questions/15567391/sql-case-giving-inconsistent-result#comment22074803_15567903)**：**

 **> 可以使用[`NULLS LAST`and`NULLS FIRST`](http://www.orafaq.com/wiki/NULL)修饰符设置排序顺序（至少在 Oracle 中）。当 ORDER BY 没有修饰符时，您观察到的是默认排序顺序

`NULL`是一个扭曲的业务，如果可能的话，明智的做法是远离它......（这不仅适用于 SQL，而且适用于 OOP 语言的某些情况。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:40:48.300

值 NULL 表示该列的数据值是未知的。NULL 不是零、零长度字符串或空白的同义词。

任何与 NULL 比较的结果都将导致未知 (NULL)。

请检查[此](http://en.wikipedia.org/wiki/Null_%28SQL%29#Comparisons_with_NULL_and_the_three-valued_logic_.283VL.29)以消除您的疑虑。如您所知，要获得正确的结果，请使用 IS NULL 或 IS Not NULL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T10:20:15.840

这并不矛盾。如果您有 2 个对象 A、B，那么它是以下三个对象之一：

*   A等于B

*   A不等于B

*   你不能比较 A 和 B

这就像检查 (0/0 > 0) 或 (0/0 < 0) 还是 (0/0 = 0)。你只是无法比较它们。每个选项都是错误的

对于您的示例： case 检查您的论点是否为真

*   参数 ('abc'=null) 不正确，它为空

*   参数 ('abc'<>null) 不正确，它是 null

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T10:00:06.790

您不能将 <> 或 = 与空值一起使用。你需要说

```
select (case when 'Abc' is null then 1 else 0 end) from dual 
```

和

```
select (case when 'Abc' is not null then 1 else 0 ) from dual 
```**

# ms-access - 访问表单上的动态编码过滤器

> ID：15567394
> 
> 赞同：1
> 
> 时间：2013-03-22T09:57:25.873
> 
> 标签：ms-access, filter, ms-access-2007, vba

我有一个连续的表单可以访问，标题中有 3 个组合框来过滤数据。目前我有一个相当长的嵌套 IF 来检查有多少组合框正在使用并涵盖所有 8 个渗透。有 3 个盒子还*不错*，但我可能会添加第 4 个甚至第 5 个，在这种情况下它会变得很荒谬。

有没有更简单的方法来为连续表单设置组合框过滤器？

**当前代码**

```
Private Sub filters()
    Dim fstr As String, rgS As String, piS As String, hcS As String
    rgS = "research_group_id = " & Me.fRG
    piS = "pi_id = " & Me.fPI
    hcS = "healthcat_id = " & Me.fHC
    If IsNull(Me.fRG) Then
        If IsNull(Me.fPI) Then
            If IsNull(Me.fHC) Then
                ' Do Nothing
            Else
                fstr = hcS
                Call filton(Me.Name, fstr)
            End If
        Else
            If IsNull(Me.fHC) Then
                fstr = piS
                Call filton(Me.Name, fstr)
            Else
                fstr = piS & " AND " & hcS
                Call filton(Me.Name, fstr)
            End If
        End If
    Else
        If IsNull(Me.fPI) Then
            If IsNull(Me.fHC) Then
                fstr = rgS
                Call filton(Me.Name, fstr)
            Else
                fstr = rgS & " AND " & hcS
                Call filton(Me.Name, fstr)
            End If
        Else
            If IsNull(Me.fHC) Then
                fstr = rgS & " AND " & piS
                Call filton(Me.Name, fstr)
            Else
                fstr = rgS & " AND " & piS & " AND " & hcS
                Call filton(Me.Name, fstr)
            End If
        End If
    End If
End Sub 
```

更新每个组合框后会触发上述代码。

```
Public Function filton(frmname As String, fstr As String)
        With Forms(frmname)
            .FilterOn = False
            .Filter = fstr
            .FilterOn = True
        End With
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:10:18.063

您可以在组合框上创建更新后事件。这是一个 3 层层次结构的示例，其中父和子组合框在加载时被禁用

```
Private Sub Grandfather_Combo_AfterUpdate()

    Parent_Combo.RowSource="SELECT ...."
    Parent_Combo.Enabled=True
    Child_Combo.Enabled=False     ' the child is invalid until the parent is defined

End Sub

Private Sub Parent_Combo_AfterUpdate()

    Child_Combo.RowSource="SELECT ...."
    Child_Combo.Enabled=True

End Sub 
```

这适用于单记录表单，但如果是您想要更改的组合框，应该可以帮助您入门。

如果它是您要更改的记录过滤器，则使用相同的事件，但是您更改相关字段的过滤器变量，然后调用公共子例程从所有过滤器变量的组合中重新创建表单过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:12:54.353

将每个标准添加`" AND "`到您的过滤器字符串中。之后，丢弃该字符串的前导`" AND "`。这种方法应该很容易适应任何数量的标准。

不确定我是否在下面的代码中正确匹配了所有内容，但希望模式很清楚。

```
If Not IsNull(Me.fRG) Then
    fstr = fstr & " AND " & rgS
End If
If Not IsNull(Me.fPI) Then
    fstr = fstr & " AND " & piS
End If
If Not IsNull(Me.fHC) Then
    fstr = fstr & " AND " & hcS
End If
If Len(fstr) > 0 Then
    ' discard leading " AND "
    fstr = Mid(fstr, 6)
End If 
```

# css - 强制元素水平对齐

> ID：15567395
> 
> 赞同：7
> 
> 时间：2013-03-22T09:57:27.093
> 
> 标签：css, horizontal-scrolling

假设我的 div 中有随机的孩子，它的固定高度和宽度设置为 100%，以便与布局一起呼吸。

我必须使用哪个 CSS 来强制子元素水平对齐，并且当 div 的宽度小于内容时，显示滚动条而不相互重叠？

小提琴：http: [//jsfiddle.net/GRBc6/1/](http://jsfiddle.net/GRBc6/1/)

简单的CSS：

```
.parent{
    width:500px;
    height: 50px;
    background-color: red;
}
.kid{
    width: 150px;
    height: 20px;
     background-color: green;
    float:left;
    margin-left:4px; 
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T10:05:43.610

如果你让孩子成为一个`inline-block`元素并去掉它`float:left`，你可以让父母拥有`white-space:nowrap`它，它会实现你想要的：

```
.parent{
    width:300px;
    height: 50px;
    background-color: red;
    white-space:nowrap;
    overflow-x:scroll;
}
.kid{
    width: 150px;
    height: 20px;
    background-color: green;
    display:inline-block;
    margin-left:4px;

} 
```

[http://jsfiddle.net/GRBc6/6/](http://jsfiddle.net/GRBc6/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:17:17.707

您需要将 2 个属性添加到`.parent`:`overflow-x:scroll`和`white-space:nowrap`，并将`float`kids 的属性更改为`display: inline-block`. 这是工作代码：

```
.parent{
    width:500px;
    height: 50px;
    background-color: red; 
    overflow-x: scroll;
    white-space: nowrap;
}
.kid{
    width: 150px;
    height: 20px;
    background-color: green;
    margin-left:4px; 
    display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T10:18:19.113

或者你可以只使用单行的表格，**tr** → **td** 所以它不会让里面的元素换行

# ios - 向 UILabel 插入特殊符号字符时的一些问题？

> ID：15567409
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:57:54.307
> 
> 标签：ios, xcode, uilabel

我通过 Edit->Special Characters 插入一些特殊符号（复制字符信息并粘贴到标签文本）：⇧

但是我有一些问题不知道如何解决：

如何缩放这些符号的大小？我只得到小符号也尝试增加字体大小，标签大小。

Xcode 的默认库对我的应用程序来说不够用。有没有更好的图书馆？

如果您知道，请介绍一些工具来制作它！

如何在代码中以编程方式显示它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:25:49.750

您永远不会更改 unicode/特殊值或文本的大小，而是需要更改 textField 或 textView 的字体大小。

您可以将其更改为：

```
label.font = [UIFont fontWithName:@"Arial" size:50]; 
```

供参考：[在 iOS 中设置 unicode 字符宽度](https://stackoverflow.com/questions/15171847/set-unicode-character-width-in-ios)

# sql - 如何使用 CASE 更改从数据库中检索到的数据

> ID：15567412
> 
> 赞同：2
> 
> 时间：2013-03-22T09:58:00.507
> 
> 标签：sql, postgresql

SQL初学者，我正在尝试用`CASE`它来做一些条件操作。

我有一个名为的表`MangaTable`，其中包含一些漫画（漫画）的详细信息，例如标题、作者等。我试图让`GROUP`作者看看他们有多少这样的标题：

```
SELECT AUTHOR, COUNT(AUTHOR) FROM MANGATABLE GROUP BY AUTHOR 
```

我得到这样的数据：

```
"Masashi Kishimoto" | 1
"Eiichiro Oda"      | 1
"Tsugumi Ohba"      | 1
"Kubo Tite"         | 2 
```

但我想显示“单”或“多”而不是数字。我试过这个：

```
SELECT AUTHOR, COUNT(AUTHOR) AS CAL, CASE WHEN CAL>1 THEN 'MULTIPLE' ELSE 'SINGLE' END FROM MANGATABLE GROUP BY AUTHOR 
```

但我收到一个错误：`column "cal" does not exist`

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:01:38.160

您不能使用`ALIAS`在查询的同一级别上创建的那个，

```
SELECT AUTHOR, COUNT(AUTHOR) AS CAL, 
       CASE WHEN COUNT(AUTHOR)>1 THEN 'MULTIPLE' ELSE 'SINGLE' END 
FROM MANGATABLE 
GROUP BY AUTHOR 
```

操作顺序如下：

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   选择子句
*   ORDER BY 子句

别名是在`SELECT`子句上创建的，这就是您不能使用它的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:01:49.563

您不能通过选择列表中的别名来引用选择列表中的表达式 - 如果您将其更改为：

```
SELECT AUTHOR, 
       COUNT(AUTHOR) AS CAL, 
       CASE WHEN COUNT(AUTHOR)>1 THEN 'MULTIPLE' ELSE 'SINGLE' END AS AUTHOR_TYPE
FROM MANGATABLE
GROUP BY AUTHOR 
```

不幸的是不得不再次重复该表达式 - 这是 SQL 的缺陷之一。

您有时可以使用[WITH](http://www.postgresql.org/docs/9.2/static/queries-with.html)表达式将公共部分排除在外，从而避免这种情况。

（是的，您可以通过为 case 表达式指定别名来更改列标题 - 我已将其添加到其中。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:09:57.677

使用临时表

```
SELECT CASE z.CAL WHEN 1 THEN 'MULTIPLE' ELSE 'SINGLE' END FROM (SELECT AUTHOR, 
COUNT(AUTHOR) AS CAL  FROM MANGATABLE GROUP BY AUTHOR) as z 
```

**更正**

```
 SELECT (CASE WHEN z.CAL > 1 THEN 'MULTIPLE' ELSE 'SINGLE' END) as test FROM (SELECT AUTHOR, 
COUNT(AUTHOR) AS CAL  FROM MANGATABLE GROUP BY AUTHOR) as z 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:01:36.777

你应该只需要一点点改变，见下文

```
SELECT 
    AUTHOR, 
    COUNT(AUTHOR) AS CAL, 
    CASE WHEN COUNT(AUTHOR) THEN 'MULTIPLE' ELSE 'SINGLE' END     
FROM MANGATABLE GROUP BY AUTHOR 
```

# php - Mod重写获取参数

> ID：15567414
> 
> 赞同：0
> 
> 时间：2013-03-22T09:58:05.697
> 
> 标签：php, .htaccess, mod-rewrite, get

我想在使用 mod_rewrite 时通过 url 传递数据。我在 stackoverflow 和其他网站上阅读了许多链接，但找不到解决方案。

结果网址为：

> [http://example.com/Path/logmanagement/view/1/?name=3&type=klik](http://example.com/Path/logmanagement/view/1/?name=3&type=klik)

print_r 返回： `Array ( [action] => logbeheer [do] => view [id] => 1 )`

目前我有这个htaccess：

```
Options -Indexes

ServerSignature Off

RewriteEngine On

#RewriteBase /

##this part is what I tried##

RewriteCond %{QUERY_STRING} ^name=(\d+)&type=(\w+)$
RewriteRule ^([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-+]+)/([a-zA-Z_0-9-+]+)/([a-zA-Z_0-9-+]+)$ index.php?action=$1&do=$2&id=$3&name=%1&type=%2
RewriteRule ^([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-+]+)/([a-zA-Z_0-9-+]+)/([a-zA-Z_0-9-+]+)/$ index.php?action=$1&do=$2&id=$3&name=%1&type=%2

##end this part##

# URL Filtering helps stop some hack attempts
#IF the URI contains a "http:"
RewriteCond %{QUERY_STRING} http\: [OR]
#OR if the URI contains a "["
RewriteCond %{QUERY_STRING} \[ [OR]
#OR if the URI contains a "]"
RewriteCond %{QUERY_STRING} \] [OR]
#OR if the URI contains a "<script>"
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
#OR script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
#OR any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2}) 
RewriteRule ^.*$ - [F,L] 
# END Filtering

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z_0-9-]+)$ index.php?action=$1
RewriteRule ^([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-]+)$ index.php?action=$1&do=$2
RewriteRule ^([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-+]+)$ index.php?action=$1&do=$2&id=$3
RewriteRule ^([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-+]+)/([a-zA-Z_0-9-+]+)$ index.php?action=$1&do=$2&id=$3&id2=$4

RewriteRule ^([a-zA-Z_0-9-]+)/$ index.php?action=$1
RewriteRule ^([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-]+)/$ index.php?action=$1&do=$2
RewriteRule ^([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-+]+)/$ index.php?action=$1&do=$2&id=$3
RewriteRule ^([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-+]+)/([a-zA-Z_0-9-+]+)/$ index.php?action=$1&do=$2&id=$3&id2=$4

RewriteRule ^([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-]+)/([a-zA-Z_0-9-+]+)/([a-zA-Z_0-9-+]+)/([a-zA-Z_0-9-+]+)/$ index.php?action=$1&do=$2&id=$3&name=%1&type=%2

# Fixed upload issues for the milti file upload

SetEnvIfNoCase Content-Type "^multipart/form-data;" "MODSEC_NOPOSTBUFFERING=Do not buffer file uploads" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:15:40.107

> 我想通过 URL（名称和类型）传递 2 个表单字段以将其读取为 GET。

然后您应该将 QSA 标志添加到所需的 mor_rewrite 规则。

```
RewriteRule ^(.*)/(.*)/$ /somefile.php?var1=$1&var2=$2 [QSA] 
```

*http://example.com/abc/def/?a=10&b=hello*

```
print_r($_GET);
Array(
    var1 = 'abc'
    var2 = 'def'
    a = '10'
    b = 'hello'
); 
```

希望，这就是你要找的。

# android - FacebookException：无法使用 null 调用包调用 LoginActivity。如果调用者的 launchMode 是 singleInstance，则可能会发生这种情况

> ID：15567416
> 
> 赞同：1
> 
> 时间：2013-03-22T09:58:19.747
> 
> 标签：android, facebook

我的 google play 崩溃报告中出现以下错误。

```
FacebookException : Cannot call LoginActivity with a null calling package. This can occur if the launchMode of the caller is singleInstance 
```

我无法重现此问题。有没有人遇到过这个问题并解决了。我在下面给出崩溃报告。

```
java.lang.RuntimeException: Unable to resume activity {com.games.mygame/com.facebook.LoginActivity}: com.facebook.FacebookException: Cannot call LoginActivity with a null calling package. This can occur if the launchMode of the caller is singleInstance.
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2742)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2771)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2235)
at android.app.ActivityThread.access$600(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method)
Caused by: com.facebook.FacebookException: Cannot call LoginActivity with a null calling package. This can occur if the launchMode of the caller is singleInstance.
at com.facebook.LoginActivity.onResume(LoginActivity.java:110)
at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)
at android.app.Activity.performResume(Activity.java:5182)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2732)
... 12 more 
```

提前致谢。

编辑：我从单例类中调用我的 facebook 相关函数。这会导致任何问题。

# linux - 我可以核心转储一个阻塞磁盘活动的进程（最好不杀死它）吗？

> ID：15567418
> 
> 赞同：7
> 
> 时间：2013-03-22T09:58:22.230
> 
> 标签：linux, cpu-registers, coredump

我想转储正在运行的进程的核心，根据`/proc/<pid>/status`，当前正在阻塞磁盘活动。实际上，它正忙于在 GPU 上工作（应该是 4 小时的工作，但现在花费的时间明显更长）。我想知道进程的工作完成了多少，所以最好能够转储进程的内存。但是，据我所知，“阻塞磁盘活动”意味着不可能以任何方式中断进程，并且核心转储进程（例如使用 gdb）需要中断并暂时停止进程以便通过 ptrace 附加，对吗？

我知道我可以`/proc/<pid>/{maps,mem}`以 root 身份读取以获取（可能是不一致的）内存状态，但我不知道有什么方法可以获取进程的用户空间 CPU 寄存器值......当进程在内部时它们保持不变内核，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:39:57.683

您可能可以`gcore`在您的程序上运行。它基本上是一个围绕 GDB 的包装器，它附加、使用`gcore`命令并再次分离。

这可能会中断您的 IO（就好像它收到了一个信号一样），但如果正确编写，您的程序可能会重新启动它（这在任何情况下都可能发生，由于默认处理）。

# php - 回复电子邮件

> ID：15567422
> 
> 赞同：0
> 
> 时间：2013-03-22T09:58:30.087
> 
> 标签：php, email

正是这样，我正在一个网站上工作，在我的自治市制造火

**问题是您无法回复电子邮件，因为其中一位用户必须能够使用 konakt。**

```
 <form action="#" method="post">
          <table>
             <tr>
                <td>Navn</td>
                <td><input type="text" name="navn" class="new"></td>
             </tr>
             <tr>
                <td>Efternavn</td>
                <td><input type="tel" name="efternavn" class="new" maxlength="8"></td>
             </tr>
             <tr>
                <td>Email</td>
                <td><input type="email" name="email" class="new"></td>
             </tr>
             <tr>
                <td>Tekst</td>
                <td><textarea name="tekst" cols="35" rows="10"></textarea></td>
             </tr>
             <tr>
                <td><input type="submit" name="send" value="Send" class="new"></td>
                <td></td>
             </tr>
          </table>
       </form>
       <?php
       if(isset($_POST["send"]))
       {
          $fra = $_POST["navn"] . $_POST["efternavn"] . " - <" . $_POST["email"] . ">";
          $email = "info@blablla.dk";
          $title = $_POST["navn"] . " Kontakt - Website";
          $tekst = $_POST["tekst"];

          //headers
          $headers = "MIME-Version: 1.0";
          $headers .= "Content-type: text/html; charset=UTF-8";
          $headers .= "From: " . $fra . "";

          mail($email, $title, $tekst, $til);
          echo "den er sendt nu NY";
       }
       ?> 
```

就是这样：

```
" - <" . $_POST["email"] . ">"; 
```

不会显示您写的电子邮件，以便因此在 blabla@meebox.dk 或看起来像静止的位置，但我希望是他写的用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:26:04.350

如果您希望用户可以回复您的邮件，那么您必须将其添加到您的标题代码中。

```
$headers = 'Reply-To: Your email address "\r\n" .
           'X-Mailer: PHP/' . phpversion(); 
```

这可能对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:04:06.417

您无法`name of field`在`type attribute of the field`.

```
 <form action="" method="post">
          <table>
             <tr>
                <td>Navn</td>
                <td><input type="text" name="navn" class="new"></td>
             </tr>
             <tr>
                <td>Efternavn</td>
                <td><input type="text" name="efternavn" class="new" maxlength="8"></td>
             </tr>
             <tr>
                <td>Email</td>
                <td><input type="text" name="email" class="new"></td>
             </tr>
             <tr>
                <td>Tekst</td>
                <td><textarea name="tekst" cols="35" rows="10"></textarea></td>
             </tr>
             <tr>
                <td><input type="submit" name="send" value="Send" class="new"></td>
                <td></td>
             </tr>
          </table>
       </form>
       <?php
       if(isset($_POST["send"]))
       {
          $fra = $_POST["navn"] . $_POST["efternavn"] . " - <" . $_POST["email"] . ">";
          $email = "info@blablla.dk";
          $title = $_POST["navn"] . " Kontakt - Website";
          $tekst = $_POST["tekst"];

          //headers
          $headers = "MIME-Version: 1.0";
          $headers .= "Content-type: text/html; charset=UTF-8";
          $headers .= "From: " . $fra . "";

          mail($email, $title, $tekst, $til);
          echo "den er sendt nu NY";
       }
       ?> 
```

现在试试这个，它会工作的。

# android - 如何使用 Intent 限制录音时间？

> ID：15567423
> 
> 赞同：16
> 
> 时间：2013-03-22T09:58:30.367
> 
> 标签：android, android-intent, time, limit, android-audiorecord

使用意图时如何限制录制？

我试过这段代码：

```
 Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
 intent.putExtra("android.intent.extra.durationLimit",5);    
 startActivityForResult(intent,RQS_RECORDING); 
```

当我录制视频时，此代码工作正常。时间从 5 到 0 倒计时，5 秒后录音自动停止。但是当我录制声音时，这个有限的时间不起作用。为什么？

```
Intent intent = new Intent(MediaStore.Audio.Media.RECORD_SOUND_ACTION);
intent.putExtra("android.intent.extra.durationLimit", 5);
startActivityForResult(intent, RQS_RECORDING); 
```

为什么我录制声音时这个 5 秒的时间限制不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-29T17:45:33.423

我有一个类似的问题，我使用下面的代码片段解决了我的问题：

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
cameraIntent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 5);
startActivityForResult(this, cameraIntent,CAMERA_PIC_REQUEST); 
```

其中 CAMERA_PIC_REQUEST 是我的 int 类型：

```
private static final int CAMERA_PIC_REQUEST = 1337; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-20T06:01:31.930

您应该尝试使用 MediaRecorder mRecorder = new MediaRecorder(); 和 mRecorder.setMaxDuration(5000) // 5 秒；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-13T06:10:51.670

```
private void recordVideo() {
Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
fileUri = getOutputMediaFileUri(MEDIA_TYPE_VIDEO);

// set video quality
intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
intent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 30);

intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set Video file
startActivityForResult(intent, CAMERA_CAPTURE_VIDEO_REQUEST_CODE);
} 
```

fileuri 是您的文件路径。尝试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T10:01:44.973

```
 intent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 60); 
```

# javascript - javascript中的异步播放声音？

> ID：15567426
> 
> 赞同：4
> 
> 时间：2013-03-22T09:58:47.177
> 
> 标签：javascript, jquery, audio, asynchronous

如何在 javascript 中异步加载声音？

我想在循环中同时播放多个声音和微积分。这是时间线：

```
 10 seconds           7 seconds           10 seconds
|--------------------|------------------|--------------------|--- etc
| Sound1 playing     |Sound2 playing    | Sound1 playing     |--- etc 
| Do a calculus      |Do a calculus     | Do a calculus      |--- etc 
```

Sound1 和 Sound2 持续时间少于 5 秒 Calculs 持续 1 秒。

我怎么能在 javascript 中做到这一点？

我必须在 HTML5 中使用 Workers 吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-24T23:34:48.400

在 JS 中异步播放声音其实很简单。您只需要立即创建s 和它们，而不是ing 全局对象。这是一个例子：`new [Audio](https://developer.mozilla.org/en-US/docs/Web/API/HTMLAudioElement)``play()``play()``Audio`

```
function playSoundAsync(url){
    new Audio(url).play();
} 
```

因此，在您的情况下，您的代码将如下所示（包含`setInterval`s 和`setTimeout`s 用于同步声音的hack）：

```
// For simplicity I'll use MP3 files readily available on the Internet
var sound1url = 'https://audio.code.org/win3.mp3';
var sound2url = 'https://audio.code.org/failure3.mp3';
var calculusUrl = 'https://audio.code.org/failure1.mp3';

setInterval(function() {
    new Audio(sound1url).play();
    new Audio(calculusUrl).play();
}, 17000);
setTimeout(function() {
    setInterval(function() {
        new Audio(sound2url).play();
        new Audio(calculusUrl).play();
    }, 17000);
}, 10000);
```

```
<button onclick="new Audio(sound1url).play();">Play sound1 individually</button>
<button onclick="new Audio(sound2url).play();">Play sound2 individually</button>
<button onclick="new Audio(calculusUrl).play();">Play calculus individually</button>
```

此外，当您`Play ${sound} individually`快速单击按钮时，您可能会注意到这一点： ${sound} 的新播放开始，无需等待或中断当前的 ${sound} 播放！这允许您创建这样的声学混乱：

```
var cacophony = setInterval(function(){new Audio('https://audio.code.org/win3.mp3').play();}, 25);
```

```
<button onclick="clearInterval(cacophony);">Click here to stop this cacophony</button>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-02T22:33:04.573

通过使用 JS 承诺和异步函数，您可以轻松地使您的音频异步播放（不使用计时器）。

```
// makes playing audio return a promise
function playAudio(audio){
  return new Promise(res=>{
    audio.play()
    audio.onended = res
  })
}

// how to call
async function test(){
  const audio = new Audio('<url>')
  await playAudio(audio)
  // code that will run after audio finishes...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T09:15:51.557

也许您正在寻找[`window.setInterval()`](https://developer.mozilla.org/en-US/docs/Web/API/Window.setInterval).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-08T15:52:54.653

我以 dorukayhan 的回答为基础，但我的声音会重复数千次。我担心创建多个新的音频标签最终会导致系统崩溃。

所以我创建了一个函数，循环遍历一堆现有的音频标签。

标签位于您的 HTML 中的某个位置。我把我的放在结束 </body> 标记之前。我的声音很短，所以 10 个标签足以流畅播放，但您可以尝试使用音频标签的数量。

```
<audio id="audio0"></audio>
<audio id="audio1"></audio>
<audio id="audio2"></audio>
<audio id="audio3"></audio>
<audio id="audio4"></audio>
<audio id="audio5"></audio>
<audio id="audio6"></audio>
<audio id="audio7"></audio>
<audio id="audio8"></audio>
<audio id="audio9"></audio> 
```

```
//declare a global counter in your script
<script>
var audiocount=0;
/*other code...*/

/*call to play sound*/
Playsound('mysound.wav')

/*other code*.../

/*add function to play sounds*/
function Playsound(MySoundPlay)
{
   /*id() is a shortcut for getElementById*/
   id('audio'+audiocount).src=MySoundPlay
   id('audio'+audiocount).play()
   audiocount++;
   /*reset your counter according to no. of audio tags you created*/
   if (audiocount>9){audiocount=0;}  
}

/*shortcut function for getElementById*/
function id(myID){return document.getElementById(myID)}
</script> 
```

# c - 如何根据字符串的值访问“结构”的成员？

> ID：15567435
> 
> 赞同：4
> 
> 时间：2013-03-22T09:59:05.607
> 
> 标签：c, string, struct

我想通过使用字符串的值来访问结构中的成员：

```
struct hello_world
{
           char rate;
           char ssid;
}; 
```

有一个变量让我们说

```
char *string="ssid"; 
```

我想使用这个字符串的值来引用结构中的`ssid`成员`hello_world`。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T10:01:13.470

不，不是。

你需要一个（长）`if-else`语句，它会做到这一点。喜欢：

```
struct hello_world hw;
char *string="ssid";

if( 0 == strcmp( "ssid", string ) )
{
     // use hw.ssid
}
else if ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:05:26.523

与其使用字符串，不如在所有可能的情况下使用枚举。

```
typedef enum {
    FIELD_SSID,
    FIELD_RATE,
} field_t

field_t string; 
```

然后使用开关

```
switch (string) {
    case FIELD_SSID:
        //use ssid
        break;
    case FIELD_RATE:
        //use rate
        break;
} 
```

这种方法比比较字符串要快得多。

如果您只使用一个字段**或**另一个，您可以使用联合而不是结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:02:00.640

定义一个函数，比如一个包装器来传递你想要的成员。

```
char GiveMember(struct hello_world, char* member){ } 
```

但是语言本身并没有为您提供这样的东西。

# c - MinGW 文件和文件夹列表问题

> ID：15567436
> 
> 赞同：2
> 
> 时间：2013-03-22T09:59:07.013
> 
> 标签：c, directory, mingw32, file-search

这是我要移植到最初在 Ubuntu 上编写的 windowsXp 的应用程序的部分代码。

```
#include <stdio.h>
#include <string.h>
#include <dirent.h>
#include <unistd.h>
#include <sys/stat.h>

int list_files(char *parentdir)
{
  DIR *dir;
  struct dirent *de = NULL;
  char subdirs[1000][1000];
  int isubdirs = 0;

  char rootdir[1000];
  strcpy(rootdir, parentdir);

  FILE *fp = fopen("list.txt", "w");

seek:
  dir = opendir(rootdir);
  if (!dir) {
    printf("ERROR: [ %s ]", rootdir);
    perror("Couldn't opendir: ");
  }
  else {
    de = readdir(dir);
    if (!de) {
      printf("ERROR:[ %s ]", rootdir);
      perror("Couldn't readdir ");
      goto out;
    }
    if (strcmp(de->d_name, "..") != 0 && strcmp(de->d_name, ".") != 0) {
      fprintf(fp, "%s\\%s\n", rootdir, de->d_name);
      printf("ADDED: %s\\%s\n", rootdir, de->d_name);
    }
    while ((de = readdir(dir)) != NULL)
    {
      if (!strcmp(de->d_name, "..") || !strcmp(de->d_name, "."))
        continue;
      fprintf(fp, "%s\\%s\n", rootdir, de->d_name);
      printf("ADDED: %s\\%s\n", rootdir, de->d_name);
      struct stat s;
      stat(de->d_name, &s);
      if (S_ISDIR(s.st_mode))
      {
        strcpy(subdirs[isubdirs], rootdir);
        strcat(subdirs[isubdirs], "\\");
        strcat(subdirs[isubdirs], de->d_name);
        printf("%s\n", subdirs[isubdirs]);
        isubdirs++;
      }
      /* Not working in WinXP
      if (de->d_type == 4) {
        strcpy(subdirs[isubdirs], rootdir);
        strcat(subdirs[isubdirs], "/");
        strcat(subdirs[isubdirs], de->d_name);
        isubdirs++;
      }
      */
    }
    if (isubdirs > 0) {
      strcpy(rootdir, subdirs[--isubdirs]);
      goto seek;
    }
  }
out:

  fclose(fp);

  return 0;
} 
```

现在问题出在我得到的输出文件中：

```
C:\Documents and Settings\user\Desktop\New Folder\00.txt
C:\Documents and Settings\user\Desktop\New Folder\1
C:\Documents and Settings\user\Desktop\New Folder\2 
```

仅列出了 parentdir 中的文件，但未列出子目录（1 和 2 都不是空的“文件夹”）我在 Virtualbox 中进行测试。

# sql-server - 更改 SQL Server 中的当前数据库路径

> ID：15567443
> 
> 赞同：4
> 
> 时间：2013-03-22T09:59:33.530
> 
> 标签：sql-server, sql-server-2008

我目前正在使用 SQL Server 数据库。我想通过查询将数据库路径从其默认位置更改为其他位置。

是否可以在不创建新数据库的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T10:02:35.573

hello raj 用于更改数据库路径，您需要对该目录的权限，然后在 sql server 中执行以下脚本

```
ALTER DATABASE LinkedIndb SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
ALTER DATABASE LinkedIndb SET ONLINE;

ALTER DATABASE LinkedIndb MODIFY FILE 
(
   Name = LinkedIndb,
   Filename = 'D:\DATA\LinkedIndb.MDF'
);

ALTER DATABASE LinkedIndb MODIFY FILE 
(
   Name = LinkedIndb_log, 
   Filename = 'D:\DATA\LinkedIndb_log.LDF'
);

ALTER DATABASE LinkedIndb SET ONLINE;
ALTER DATABASE LinkedIndb SET MULTI_USER; 
```

# node.js - http.request() 方法不适用于具有子域的 url

> ID：15567447
> 
> 赞同：1
> 
> 时间：2013-03-22T09:59:48.490
> 
> 标签：node.js, express

我正在尝试发布一些这样的数据

```
var options={hostname:'www.sub.domain.com',path:'post.php?'+qs.stringify(postData), method:'GET '}; 
```

然后用 http.request() 调用这个对象。它抛出这个错误

```
 events.js:71
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: Parse Error
    at Socket.socketOnData (http.js:1485:20)
    at TCP.onread (net.js:404:27) 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:38:28.280

在“选项”对象中使用主机而不是主机名。尝试如下，

```
var options = {
    host : 'www.sub.domain.com',
    path:'/post.php?'+qs.stringify(postData),
    method : 'GET'
  }; 
```

# javascript - 过滤后在数组上应用映射函数

> ID：15567448
> 
> 赞同：0
> 
> 时间：2013-03-22T09:59:55.647
> 
> 标签：javascript, html, map, filter, angularjs

在我的 html (.ng-template) 中，我有一个数组，在该数组上应用了过滤器。我想将映射函数应用于此过滤器函数的结果（在应用过滤器之前将其应用于整个数组太昂贵了）。旧版本`angularjs`允许我这样做

```
<ng-repeat = 'item in array.$filter(filterFunc).map(mapFunc).$orderBy("orderFunc()")'> 
```

但是使用新语法（v 1.0.5）我无法做到这一点。

```
<ng-repeat = 'item in array|filter:filterFunc|orderBy:"orderFunc()"'> 
```

我不明白如何将地图功能应用于此。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:06:17.287

模板很难测试，不要在模板中编写任何业务逻辑，此外，这些函数会在每个*阶段*`$digest`创建一个新的数组副本并应用 map 函数。

您应该在控制器中执行此操作并`ngRepeat`在其中使用。

```
function MyCtrl ($scope, $filter) {
  var fullArray = [1,2,3];
  var otherArray = $filter(filterFunc).map(mapFunc);
} 
```

.

```
<div ng-repeat="item in otherArray | orderBy:orderFn"></div> 
```

您还可以在控制器中订购阵列。

# c# - 在页面加载时显示网格视图

> ID：15567460
> 
> 赞同：0
> 
> 时间：2013-03-22T10:00:16.340
> 
> 标签：c#, gridview, webforms

我有一个在 SQL 中设置了存储过程的网格视图。我有三个控件 2`dropdown list's`和一个`texbox`带有 jQ​​uery 日期选择器的控件。我的问题是网格视图没有在页面加载时显示。但是，当我开始添加控件时，突然显示 gridview。从调试中，我推测带有 jQ​​uery datepicker 的文本框没有将 NULL 值传递给指定的存储过程，但我仍然想知道这是否是原因。这是代码..

**ASP 代码**：

```
<div class="datarange">
        <asp:DropDownList ID="categoryDDL" AutoPostBack="true" AppendDataBoundItems="true" runat="server">
            <asp:ListItem Text="Select Category" Value=" " />
        </asp:DropDownList>
        <asp:DropDownList ID="brokerDDL" AutoPostBack="true" runat="server"></asp:DropDownList>
        <asp:TextBox ID="openDate" AutoPostBack="true" runat="server"></asp:TextBox>

    </div>
    <br />
    <%-- SQL DATA SOURCE PARAMETERS --%>
    <asp:SqlDataSource ID="SqlRAListings" runat="server" ConnectionString="<%$ ConnectionStrings:kmc_SalesPipelineConnectionString %>" SelectCommand="RecentlyAddedListings" SelectCommandType="StoredProcedure">
        <SelectParameters>
            <asp:ControlParameter ControlID="categoryDDL" Name="Category" PropertyName="SelectedValue" Type="String" DefaultValue=" " />
            <asp:ControlParameter ControlID="brokerDDL" Name="Broker" PropertyName="SelectedValue" Type="String" DefaultValue=" Select Employee" />
            <asp:ControlParameter ControlID="openDate" Name="OpenDate" PropertyName="Text" Type="DateTime" DefaultValue="" />
        </SelectParameters>
    </asp:SqlDataSource>
    <%-- END OF SQL DATA SOURCE PARAMETERS --%>

    <%-- GRIDVIEW FOR DISPLAYING RECENTLY ADDED LISTINGS --%>
    <asp:GridView ID="ralGridView" runat="server" AllowSorting="True" AutoGenerateColumns="False" OnSelectedIndexChanged="ralGridView_SelectedIndexChanged">
        <Columns>
            <asp:TemplateField HeaderText="Opportunity">
                <ItemTemplate>
                    <a href="/management/opportunity.aspx?id=<%# Eval("ID") %>" target="_blank">
                        <%# Eval("Opportunity").ToString() != "" ? Eval("Opportunity") : "Opportunity" %>
                    </a>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="ID" HeaderText="ID"
                SortExpression="ID" InsertVisible="False" ReadOnly="True" />
            <asp:BoundField DataField="Category" HeaderText="Category"
                SortExpression="Category" />
            <asp:BoundField DataField="Contact Name" HeaderText="Contact Name"
                SortExpression="Contact Name" />
            <asp:BoundField DataField="Employee" HeaderText="Employee" SortExpression="Employee" />
            <asp:BoundField DataField="Open Date" HeaderText="Open Date" SortExpression="Open Date" />
            <asp:TemplateField HeaderText="Opportunity from">
                <ItemTemplate>
                    <%# Eval("LeadID").ToString().Length > 0 == true ? "Lead System" : "Personal Lead" %>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>

    <asp:SqlDataSource ID="SqlDbRAListings" runat="server" ConnectionString="<%$ ConnectionStrings:kmc_SalesPipelineConnectionString %>" SelectCommand="RecentlyAddedListings" SelectCommandType="StoredProcedure">
        <SelectParameters>
            <asp:ControlParameter ControlID="categoryDDL" Name="Category" PropertyName="SelectedValue" Type="String" />
            <asp:ControlParameter ControlID="brokerDDL" Name="Broker" PropertyName="SelectedValue" Type="String" />
            <asp:ControlParameter ControlID="openDate" Name="OpenDate" PropertyName="Text" Type="DateTime" />
        </SelectParameters>
    </asp:SqlDataSource>
    <%-- END OF GRID VIEW --%>
</form>

<script type="text/javascript">
    $(function () {
        var dates = $("#openDate").datepicker({
            defaultDate: "+1w",
            changeMonth: false,
            numberOfMonths: 1
        });
    });

</script> 
```

**C#代码**：

```
 namespace KMCWebLMS
{
    public partial class RecentlyAssignedLead : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                fillCategoryDropDown();
                fillBrokerDropDown();   
            }
            else
            {
                ralGridView.DataSource = SqlDbRAListings;
                ralGridView.DataBind();
            }
        }

        public void fillCategoryDropDown()
        {
            DataTable categories = new DataTable();
            string command = @"SELECT LeadCategory FROM LeadCategory ORDER BY LeadCategory";
            ConnectSQL cmd = new ConnectSQL();
            SqlDataAdapter adapter = new SqlDataAdapter(cmd.configureSQL(command));
            adapter.Fill(categories);

            try
            {
                categoryDDL.DataSource = categories;
                categoryDDL.DataTextField = "LeadCategory";
                categoryDDL.DataValueField = "LeadCategory";
                categoryDDL.DataBind();
            }
            catch
            {

            }
        }

        public void fillBrokerDropDown()
        {
            DataTable employees = new DataTable();
            string command = @"SELECT TOP 100 [Emp_Name] FROM [kmc_SalesPipeline].[dbo].[vwEmployees] ORDER BY Emp_Name";
            ConnectSQL cmd = new ConnectSQL();
            SqlDataAdapter adapter = new SqlDataAdapter(cmd.configureSQL(command));
            adapter.Fill(employees);
            try
            {
                brokerDDL.DataSource = employees;
                brokerDDL.DataTextField = "Emp_Name";
                brokerDDL.DataValueField = "Emp_Name";
                brokerDDL.DataBind();
            }
            catch
            {

            }
        }

        protected void ralGridView_SelectedIndexChanged(object sender, EventArgs e)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:15:29.300

但是从您后面的代码来看，您似乎只在回发中填充了gridview。
对于 PageLoad ，您只填充下拉菜单。

这段代码不应该来吗

```
ralGridView.DataSource = SqlDbRAListings;
                ralGridView.DataBind(); 
```

里面

```
 if (!Page.IsPostBack) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T04:43:10.947

我找到了解决问题的方法。为此，我在后面的代码中声明了存储过程所需的参数，并在此处进行了相应的设置。

```
//STORED PROCEDURE PARAMETERS
cmd.Parameters.AddWithValue("@OpenDate", OpenDate);
cmd.Parameters.AddWithValue("@Broker", broker);
cmd.Parameters.AddWithValue("@Category", category); 
```

然后程序将在 page_load 上显示默认值，显示 gridview 中的所有数据。在回发时，指定的参数将相应地设置为当前存储在特定控制参数中的值。

```
broker = brokerDDL.SelectedValue;
category = categoryDDL.SelectedValue;
ralGridView.DataSource = CreateRecentlyAddedTable();
ralGridView.DataBind(); 
```

# c# - 添加对我的项目的引用但无法使用它

> ID：15567463
> 
> 赞同：1
> 
> 时间：2013-03-22T10:00:22.540
> 
> 标签：c#, windows-ce

我正在用 C# 开发一个 Windows CE 设备应用程序。

当我将参考**System.Deployment**添加到我的项目时，它应该让我添加**Namespace: System.Drawing.Printing**。

当我展开 References 时，我可以在那里看到**System.Deployment**，但是当我想添加**Namespace: System.Drawing.Printing**时出现错误：

> *命名空间“System.Drawing”中不存在类型或命名空间名称“Printing”（您是否缺少程序集引用？）*

我究竟做错了什么？

我做了一些研究，但找不到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:02:11.017

您应该添加对`System.Drawing`程序集的引用而不是`System.Deployment`

[在 msdn System.Drawing](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)阅读有关此命名空间的更多信息

![在此处输入图像描述](../Images/6de548ea94c19975b0e8ba60f57c272a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:02:37.760

只需将[`System.Drawing`](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)命名空间添加到您的解决方案中。

# eclipse-cdt - Eclipse Juno CDT 中的选项卡完成和自动内容辅助

> ID：15567465
> 
> 赞同：0
> 
> 时间：2013-03-22T10:00:29.087
> 
> 标签：eclipse-cdt, eclipse-juno

我已经使用 Eclipse CDT 一段时间了，事实上，在 IDE 中编码可能非常慢（我将它用于调试器）。我的意思是，自动弹出（内容辅助）功能仅在输入某些字符时才有效`[::,->,.]`。在 Indigo 中，您可以配置 IDE，使其无论您键入什么都会弹出，而无需按`Ctrl`+ `SPACE`。那么，有没有办法把它带回朱诺呢？一步一步的指南将不胜感激。

其次，有没有办法在 Eclipse 中完成选项卡？我的意思是，例如，您有一个名为 的模板（片段）`cout`，它本质上向输出缓冲区添加了一些内容：

```
std::cout << ${"Hello, World"} << std::endl; 
```

第三，如果上述两个功能在eclipse中不可用，并且即使使用hack也无法实现，是否有一个IDE可以与MinGW GCC一起使用并且具有上述功能（并且免费）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:09:44.957

（我不知道如何发表评论 - 所以我正在写一个“答案”......）

由于一般的性能问题，我们已经放弃了 Juno。在经历了令人沮丧的两个月后，我们尽一切可能提高 Juno 的速度，然后又回到了 Indigo。

Eclipse 很棒，我已经使用了很多年了，通常我欢迎升级，但 Juno 是唯一给我们带来如此大问题的。

# ruby - 文件存在吗？当目录名称有特殊字符时不起作用

> ID：15567473
> 
> 赞同：1
> 
> 时间：2013-03-22T10:00:40.310
> 
> 标签：ruby

文件存在吗？不使用具有特殊字符的目录名称。对于类似下面给出的路径=“/home/cis/Desktop/'El%20POP%20que%20llevas%20dentro%20Vol.%202'/*.mp3”

它工作正常，但如果它有像​​ ñ 这样的字母，它会返回 false。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:20:46.157

尝试以下操作：

确保您运行的是 1.9.2 或更高版本，并将其放在`# encoding: UTF-8`文件的顶部（必须是 UTF-8 并且您的编辑器必须支持它）。

如果您正在运行 MRI（即不是 JRuby 或其他实现），您可以添加环境变量`RUBYOPT=-Ku`，而不是添加`# encoding: UTF-8`到每个文件的顶部。

# css - PhoneGap css媒体查询方面不起作用

> ID：15567474
> 
> 赞同：2
> 
> 时间：2013-03-22T10:00:41.897
> 
> 标签：css, cordova, media-queries, iphone-5

我已经开发了一个以 iPhone 为设计目标的应用程序（即 640x960 => 2:3），并且我已经使用布局中每个分区的百分比来完成此操作，因此 ui 会根据设备大小自行扩展。现在这适用于 iPad，但我在使用 9:16 宽高比设备时遇到问题。我已经为此目的使用了媒体查询，但这不起作用。

除法的默认代码是：

```
.top_bar {
    height: 9%;
} 
```

现在使用媒体查询纵横比：

```
@media screen and (min-device-aspect-ratio: 9/16) {
    .top_bar {
        height: 7.5%;
    }
} 
```

但这不起作用，不在浏览器上，也不在设备上。

我已将视口元标记内容值添加为

```
content="user-scalable=no, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, target-densityDpi=device-dpi" 
```

后来我尝试了多种分辨率来检测纵横比：

```
@media 
only screen and (min-device-width: 320px) and (min-device-height: 560px),
only screen and (min-device-width: 480px) and (min-device-height: 850px),
only screen and (min-device-width: 640px) and (min-device-height: 1130px),
only screen and (min-device-width: 720px) and (min-device-height: 1270px),
only screen and (min-device-width: 768px) and (min-device-height: 1360px),
only screen and (min-device-width: 800px) and (min-device-height: 1422px),
only screen and (min-device-width: 960px) and (min-device-height: 1700px),
only screen and (min-device-width: 1080px) and (min-device-height: 1910px)
{

.top_bar {
    height: 7.5%;
}
} 
```

但这也不起作用。

**更新 - 已修复**

进行一些实验，然后将**min-device-aspect-ratio: 9/16**更改为**max-aspect-ratio: 9/16** 并且现在可以正常工作了。

```
@media screen and (max-aspect-ratio: 9/16) {
    .top_bar {
        height: 7.5%;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:14:30.517

像这样放置您的元标记 `<meta name="viewport" content="width=device-width, initial-scale=1">`

并编写您的媒体查询

```
@media only screen and (min-width: 768px) and (max-width: 956px){
.top_bar { height: 7.5%;}
} 
```

# c# - 显示自跟踪实体列表，按状态过滤它们

> ID：15567477
> 
> 赞同：1
> 
> 时间：2013-03-22T10:00:54.837
> 
> 标签：c#, winforms, data-binding, entity-framework-4, self-tracking-entities

我想`entities`在表单上显示一个自跟踪列表，使用标准绑定机制。

我想要的是从列表中选择实体，更改/添加或删除它们，然后根据用户的选择提交更改或拒绝它们。

据我了解，因为`entities`应该将列表附加到上下文中，所以应该进行接受更改调用（或者不进行，如果要拒绝更改）。这意味着删除的实体也必须在列表中，标记为已删除。

但是，它们不应再显示。这意味着应该按实体的状态过滤显示。

现在，通常要进行过滤，我会将列表包装起来`BindingList`并使用 Filter 属性。另一方面，实体不会立即公开他们的状态（与键入的数据行不同）并将它们保存在`ChangeTracker.State`. 我很茫然，在这种情况下如何进行过滤，特别是考虑到状态是枚举，而不是普通类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:15:19.347

[编辑：删除包含从列表中删除实体的第一个解决方案]

您可以向您的实体添加 IsDeleted 属性

```
public bool IsDeleted
{ 
    get {
        return ChangeTracker.State == ObjectState.Deleted
    } 
} 
```

并过滤该属性。STE 是部分类，可以扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:26:35.090

想来想去，发现`BindingList`不支持过滤，技术上也是如此`BindingSource`。

因此，在没有问题的标准过滤的情况下，我编写了自己的实现，如下所示：

```
private class LivingBindingList : BindingList<Producer>
{
    public LivingBindingList(List<Producer> source)
        : base(source.Where(producer => producer.ChangeTracker.State != ObjectState.Deleted).ToList())
    {
        rem_cache = source.Where(producer => producer.ChangeTracker.State == ObjectState.Deleted).ToList();
    }
    List<Producer> rem_cache;
    protected override void RemoveItem(int index)
    {
        this.Items[index].MarkAsDeleted();
        this.rem_cache.Add(this.Items[index]);
        base.RemoveItem(index);
    }
    protected override void OnAddingNew(AddingNewEventArgs e)
    {
        e.NewObject = new Producer()
        {
            NameProducer = "Новый производитель",
            GUID = Guid.NewGuid(),
            Type = 1,
            Note = String.Empty
        };
        base.OnAddingNew(e);
    }
    internal IEnumerable<Producer> GetAllForSubmit()
    {
        return this.Items.Concat(rem_cache);
    }
} 
```

有了这个，我可以绑定到列表，根据需要添加和删除，并且提交目的使用 GetAllForSubmit() 检索所有记录，包括死记录。

# ios - Xcode ios，在运行时校验你的二进制文件

> ID：15567482
> 
> 赞同：1
> 
> 时间：2013-03-22T10:01:12.400
> 
> 标签：ios, xcode, binary, checksum

我正在尝试为我的应用程序添加一些安全性。我有一个应用程序连接到的服务器，我正在考虑在建立连接时发送二进制校验和。如果校验和与我想要的不匹配。服务器不会允许任何连接。

我已经阅读了几篇关于如何提高应用程序安全性的文章，并且许多文章提到了对二进制文件进行校验，但没有找到任何代码来解释在运行时如何实际校验二进制文件。

例如 [http://www.seoxys.com/3-easy-tips-to-prevent-a-binary-crack/#ptrace](http://www.seoxys.com/3-easy-tips-to-prevent-a-binary-crack/#ptrace)

除此之外，据我了解，由于Apple会在提交时签名，因此无法事先知道确切的校验和？但是，我可以在提交新版本时禁用服务器上的检查，然后在我知道校验和时重新启用检查。不是完美的解决方案，但解决方案是什么？

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:25:54.007

简而言之，这是一件非常困难的事情。原因是，一旦客户端代码离开您的手，您就无法控制它。即使你用校验和完美地工作，攻击者仍然可以获取二进制校验和，修改它，然后通过修改该代码让它提交以前的校验和而不是新的校验和。事实上，您可能会通过使用像 _getBinaryChecksum() 这样他可以更改的函数来让他/她轻松:-)

如果您打算这样做，请使用加密的强哈希算法，如[SHA-256](https://en.wikipedia.org/wiki/SHA-2)。没错，Apple 签名会更改哈希值，因此您需要在 Apple 签名*后*使用文件的哈希值对服务器进行编程。另外请记住，对应用程序的任何更改都会极大地影响哈希，因此您需要保留以前哈希的历史列表，这样您就不会将尚未升级的客户拒之门外。

您可能想查看这些 StackOverflow 问题，因为听起来您正在尝试做类似的事情：

[在 iPhone 应用程序中使用 REST API 时的安全性](https://stackoverflow.com/questions/15273705/security-when-using-rest-api-in-an-iphone-application/15277589#15277589)

[https://stackoverflow.com/questions/15390354/api-key-alternative/15390892#15390892](https://stackoverflow.com/questions/15390354/api-key-alternative/15390892#15390892)

# .net - 作为项目引用的程序集的运行时版本解析

> ID：15567485
> 
> 赞同：1
> 
> 时间：2013-03-22T10:01:15.627
> 
> 标签：.net, assemblies, versioning

对于我们的企业应用程序，我们有一些作为 dll 引用的程序集和其他作为项目引用的程序集。

对于被引用为 dll 的那些，我们已将“特定版本”设置更改为 false。

作为项目引用的那些没有这样的设置。如果我们必须为引用的项目程序集之一部署修复程序，运行时将如何知道要搜索的版本？我们是否也必须部署主项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T19:22:25.113

这里要理解的关键是“特定版本”与应用程序在运行时的行为方式无关——它不会影响 .net 运行时解析程序集的方式。

所有“特定版本”所做的都是告诉 Visual Studio（而不是编译器），当项目加载到 IDE 中时，如果 DLL 引用在可解析的位置不可用，是否接受同一 DLL 的不同版本。如果“特定版本”设置为 TRUE，并且您卸载/删除了项目的某些依赖项，则 Visual Studio 将在解决方案资源管理器中的该引用上放置一个小感叹号。如果“特定版本”设置为 FALSE，并且该 DLL 的另一个版本可用（假设 VS 可以找到它），那么 Visual Studio 将改为引用该 DLL。当然，这只会在您下次构建时体现出来……您的新输出将引用“备用 DLL”。

但是，生成的输出是相同的 - 因为您的项目在编译时引用的任何 DLL 版本都是运行时需要的 DLL 版本 - 它不能被另一个版本替换（当然，我只是指在这里强命名 DLL，并忽略[显式声明的版本重定向](http://msdn.microsoft.com/en-us/library/7wd6ex19.aspx)）。

这对您的特定场景意味着什么 - 在您不使用特定版本控制的情况下 - 您将需要跟踪您的项目在编译它们时具有哪些依赖项（Excel电子表格任何人？哎呀......） - 因为您不会能够保证如果您查看源代码控制，项目引用的版本是实际编译到项目中的版本。当然，您应该保留发布到野外的所有二进制文件的副本，以便您可以检查这些文件以查看部署给客户的内容......

要回答您的问题-不，您不必部署主项目-您只需要在部署它们时知道这些依赖项项目的版本，这样您就可以构建兼容的修补程序...

*   兼容：DLL 从外部看起来相同，相同的类/属性/方法等
*   热修复：保持程序集版本与野外版本相同）-

...或编写一个新的 DLL 并执行从旧版本到新版本的程序集绑定重定向。

# file - 我应该为 vim 中的笔记使用哪个扩展？

> ID：15567487
> 
> 赞同：1
> 
> 时间：2013-03-22T10:01:20.850
> 
> 标签：file, vim, syntax

我想将文本存储在文件中并使用 vim 处理它。这将是非常简单的东西，例如 Windows 上的 .txt。但我想获得基本的语法突出显示。我应该使用哪种文件扩展名和语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T22:12:16.037

VIM 理解[reStructuredText](http://en.wikipedia.org/wiki/ReStructuredText)、[Markup和其他使用纯](http://en.wikipedia.org/wiki/Markup_language)[UTF-8](http://en.wikipedia.org/wiki/UTF-8)编写结构化文本的符号（前一阵子会说“ASCII”）。

我发现纯文本*结构化*文档非常适合我的工作，除了它是[GitHub](https://github.com/)、[Bitbucket](https://bitbucket.org/)或[PyPi等网站的要求，以及](https://pypi.python.org/)*doc-comments*中的趋势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:07:38.770

我正在使用[Vim Outliner](http://www.vim.org/scripts/script.php?script_id=3515)插件，它可以方便地创建带有部分的短列表。默认样式针对不同级别有不同的颜色。

# postgresql - 将单个触发器过程应用于许多不同的表

> ID：15567503
> 
> 赞同：0
> 
> 时间：2013-03-22T10:01:59.177
> 
> 标签：postgresql, triggers, postgresql-9.1

在我的 PostgreSQL 9.1 数据库中，我有多个表和一个触发器函数。

现在，我正在使用该触发器函数为每个表创建触发器。

这种方法工作正常。我的老板要求我通过重新使用触发器功能来创建触发器（仅一次）。我的数据库中的所有表都应该使用这个触发器函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:15:25.563

您可以在PostgreSQL的[审计触发器](http://wiki.postgresql.org/wiki/Audit_trigger_91plus)示例中找到使用 PL/PgSQL 创建具有动态 SQL 的触发器的示例。相同的方法适用于任何其他 DDL。

查看and的功能和`audit.audit_table`用途。`format``EXECUTE`

也就是说，需要以程序方式创建表可能（但并不总是）是模式设计存在问题的标志。

动态 SQL 创建表的简单示例：

```
CREATE OR REPLACE FUNCTION demo_dynamic_table(tablename text) RETURNS void AS $$                                                                                      
BEGIN                                                                                                                                                                          
    EXECUTE format('CREATE TABLE %I (id serial primary key);', tablename);
END;
$$ LANGUAGE plpgsql; 
```

相同的方法适用于触发器创建等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:04:58.063

您可以为表创建创建 PL/pgSQL 过程并将触发器创建代码移到其中

# javascript - jQuery(div#id) 对无效 html 的行为

> ID：15567508
> 
> 赞同：0
> 
> 时间：2013-03-22T10:02:07.213
> 
> 标签：javascript, jquery, jquery-selectors

`jQuery("div#someid")`如果 html 无效并且有许多具有相同“someid”的 div 元素，将返回什么。它会返回第一个 div 吗？还是那是随机的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T10:10:58.390

选择器会在不同的浏览器中给出不同的结果。

一些测试显示了这些结果：

```
Firefox 19: All elements
IE 10: All elements
IE 9: All elements
IE 8: All elements
IE 7: One element
Chrome 25: All elements 
```

结果也可能因其他因素而异，例如 jQuery 版本、页面呈现模式和操作系统。您根本无法期望具有冲突 id 属性的一致结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:07:13.640

最好知道的是尝试一下，在这个小提琴[http://tinker.io/cba17](http://tinker.io/cba17)中看到它的实际效果，所以答案是它将返回一个包含所有具有该 ID 的 div 的集合。虽然请避免这种情况，因为它是无效的 html 并改用一个类。

`$('#someid'`另请注意，使用) 和之间是有区别的`$('div#someid')` ：

`$('#someid'`) 将返回具有该 id 的第一个 div。

`$('div#someid')`将返回包含所有元素的完整集合，如我在上面发布的小提琴中所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:05:36.567

具有相同的 id 是无效的......所以你应该避免这种情况......并使用类......（虽然没有抛出错误）无论如何，选择器将返回具有相同 id 的第一次出现..

# android - 如何在 Android 和 iOS 的 Phonegap API 中连接数据库

> ID：15567513
> 
> 赞同：0
> 
> 时间：2013-03-22T10:02:19.377
> 
> 标签：android, database, sqlite, cordova

您好，我正在使用 phonegap 开发应用程序，我想要一个 Html 页面，然后我会放置按钮。

单击该按钮时，它必须获取我的 sqlite3 数据库，并且很简单，它必须显示到我的下一个或同一个 html 页面。

取决于查询。

请回答我的问题以及我必须使用什么IDE.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:48:33.990

你不需要使用任何插件，因为 webkit 已经有 sqlite 可用。我已经在 phonegap 中为 sqlite 编写了一个数据访问框架，请[在此处查看](https://cordova.codeplex.com/wikipage?title=How%20to%20use%20nova.data)。

它非常易于使用，您无需编写任何 sql 脚本。它的工作方式非常类似于 asp.net 实体框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:12:40.920

要在 phonegap 应用程序上使用 sqlite3，您将需要这个[Phonegap-SQLitePlugin](https://github.com/davibe/Phonegap-SQLitePlugin)。
但是，该插件是为 Phonegap 1.7 设计的，因此您可能需要对其进行升级。

# java - 不支持的 major.minor 版本 51.0，但所有内容都设置为 JDK 1.6

> ID：15567514
> 
> 赞同：33
> 
> 时间：2013-03-22T10:02:26.913
> 
> 标签：java, unsupported-class-version

我有一个 Maven Eclipse 应用程序，我正在尝试使用以下命令通过命令提示符运行它：

```
java -cp target/classes;"target/dependency/*" com.example.Main 
```

不幸的是，它抛出了一个错误：

```
UnsupportedClassVersionError : unsupported major.minor version 51.0 
```

我进行了一些挖掘，发现它与在更新版本的 JDK 上编译的应用程序有关，而不是在其上运行的 JRE。显然 51 意味着它是为 1.7 构建的，但我的计算机上没有 JDK 7...

所以我确保一切都设置为 1.6 版：

根目录中的 system.properties 文件包含

```
java.runtime.version=1.6 
```

添加了 Maven 属性

```
<java.version>1.6</java.version> 
```

在我的 pom.xml 中指定了 maven 编译器插件

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.1</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

我使用返回的命令 java -version 检查了我的 java 版本

```
Java version "1.6.0_38"
Java(TM) SE Runtime Environment (build 1.6.0_38-b05)
Java HotSpot(TM) 64-bit Server VM (build 20.13-b02, mixed mode) 
```

在设置 maven-compiler-plugin 后更新我的项目导致 Eclipse 自动将编译器级别设置为 1.6，项目方面级别设置为 1.6，并将 JavaSE-1.6 jre 系统库添加到我的项目中。

所以我完全不知道这个 JDK 1.7 是从哪里来的。我从来没有在这台计算机上安装过 JDK 1.7...

另外，最初，maven-compiler-plugin 不存在，所以我猜它是用 1.5 构建的。但是我做了 a `mvn clean install`，然后 a `mvn package`，然后在调整了所有设置后再次尝试了该命令，但仍然抛出相同的错误。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-22T10:32:26.847

可能您有一个需要 Java 1.7 的依赖项

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-22T10:11:38.380

您可能正在使用需要 Java SE 7 的依赖项。

如果是这种情况，请升级到 Java SE 7（如果您使用 Oracle 的 JRE，但没有支持合同，建议您升级到 Java SE 6，因为 Java SE 6 已于 2 月结束生命周期）或替换此依赖项。

# c++ - 程序不运行，工作量太大？

> ID：15567517
> 
> 赞同：-6
> 
> 时间：2013-03-22T10:02:32.870
> 
> 标签：c++

当我运行它时，它只是打开命令提示符窗口，只有下划线在开始时闪烁。我等了 20 分钟，什么也没发生，没有文字/错误。

```
#include <iostream>

using namespace std;

int prime(unsigned __int64 para) {          // returns 1 if para is a prime number
    for (unsigned __int64 i = 2; i < para; i++) {
        if (para % i == 0) {
            return 0;
        }
    }
    return 1;  
}

int main()
{
    for (unsigned __int64 i = 300851475143; i > 2; i--) {
        if (prime(i) == true) {                  //  checks if i is prime
            if (600851475143 % i == 0) {         //  checks if 600851475143 is divisible by said prime, print it if so
                cout << i << endl;
                break;

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:06:01.060

该程序的复杂性是巨大的——它需要很长时间才能运行。它可能是有效的，但`for`循环中的迭代次数非常巨大。

您正在尝试运行此循环：

```
for (unsigned __int64 i = 300851475143; i > 2; i--) 
```

仅此一项就太大了，程序无法快速完成。

除此之外，在`prime()`您运行第二个循环时：

```
for (unsigned __int64 i = 2; i < para; i++) 
```

其中（因为`para`与`i`外循环相关）使得复杂度 O(n^2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:06:03.943

您知道这`300851475143`是一个巨大的数字，并且您有两个围绕这个数字工作的嵌套循环！

如果每次迭代都需要`1ns`您`300s x 300s = 25 hours`完成工作。*（这只是一个近似值）*

# vba - Excel关闭时VBA运行

> ID：15567524
> 
> 赞同：2
> 
> 时间：2013-03-22T10:02:47.053
> 
> 标签：vba, excel

我有一个挑战，至少对我来说，我显然无法应对。有人可以帮助我或建议如何在 Excel 关闭时运行宏吗？

通过 VBA 关闭 Excel 时，如何使宏运行？

```
Sub Upload0()
    ' Upload Webpage content
    Application.OnTime Now + TimeValue("00:00:15"), "Upload0"

    With ActiveSheet.QueryTables.Add(Connection:= _
        "URL;http://cetatenie.just.ro/ordine/articol-11", Destination:=Range("A1"))
        .Name = "CetatenieOrdine"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = True
        .BackgroundQuery = True
        .RefreshStyle = xlOverwriteCells
        .SavePassword = True
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 1
        .WebSelectionType = xlEntirePage
        .WebFormatting = xlWebFormattingNone
        .WebPreFormattedTextToColumns = True
        .WebConsecutiveDelimitersAsOne = True
        .WebSingleBlockTextImport = False
        .WebDisableDateRecognition = False
        .WebDisableRedirections = False
        .Refresh BackgroundQuery:=False
    End With

' Deletes empty cells
Columns("A:A").Select
Selection.SpecialCells(xlCellTypeBlanks).Select
Selection.Delete Shift:=xlUp

' Adjust column width and delet useless rows
Rows("1:31").Select
Selection.Delete Shift:=xlUp
Range("B28").Select
Selection.End(xlDown).Select
Rows("17:309").Select
Selection.Delete Shift:=xlUp

End Sub 
```

非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:15:09.600

1：在模块中定义一个布尔标志，`Public blnClosedVBA as Boolean`并在关闭工作簿之前在 VBA 例程中将其设置为 true。然后在您的 Workbook_BeforeClose 事件处理程序（在 ThisWorkbook 下）中，执行以下操作：

```
If blnClosedVBA = True Then 
Cancel = True 'Stops the workbook from closing
'Rest of your code here
blnClosedVBA = False ' Set so next time you try to close the workbook, it actually closes
'Workbook.Close or ThisWorkbook.Close - depends on your answer to my question below 
```

仅当您自己触发了关闭事件时，才会运行该例程。在例程结束时，将标志设置为 False 并触发另一个`Workbook.Close`将关闭工作簿

2：它应该适用于哪个工作簿？它应该是“ThisWorkbook”（您从中运行代码的那个）、“ActiveWorkbook”（激活的那个）还是另一个？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:59:25.727

> 1.通过VBA关闭工作簿时如何使宏运行？

简短的回答：你不能那样做。您的代码是工作簿的一部分，除非在 Excel 中加载工作簿，否则它无法运行。当 Excel 启动时，您可能能够将代码移动到您选择默认加载的单独加载项工作簿（使用“Excel 选项|加载项”）。但是 Excel 仍然需要在您计算机上的某个位置运行。

您可以编写一个完全独立的程序来执行您想要的操作，将 Web 查询的结果写入 Excel 工作簿。我在这里假设您希望工作簿在您自己（当然是在 Excel 运行时）或其他资源引用时始终包含最新数据。如果您可以获得 Visual Basic 6 的副本（可能无法合法获得），那么这在语法上与 VBA 基本相同。下一个最接近的是 VB.Net。这在技术上会有些复杂。

> 2.另外，我有问题使这个宏只适用于一个工作簿而不是活动的工作簿：

我们*可以*处理这一行：这一行：

```
With ActiveSheet.QueryTables.Add(Connection:= _ 
```

意味着以下代码将始终针对具有焦点的工作表运行（即“活动” - 如果您键入内容将接收键盘输入的工作表）。就是`ActiveSheet`这样。尝试替换``ActiveSheet with something like`ThisWorkbook.Sheet1 `, where`Sheet1` 是您在 VBA 编辑器的“属性”窗口中看到的工作表的名称，其中显示“（名称）”。

# android - ViewPager中显示片段时调用方法是什么

> ID：15567530
> 
> 赞同：1
> 
> 时间：2013-03-22T10:03:06.743
> 
> 标签：android, android-layout

我的 viewPager 有 5 个 ListFragment。

选择列表项时，转到 DetailFragment。

返回后，自动滚动记录在 Listview 上的位置。

autoScroll 方法是这样的，在 onStart() 中调用；

```
getListView.setSelection(position); 
```

但这有问题。

ViewPager 在 Fragment1 时创建 Fragment2。

当 Fragment2 尚未显示时，Fragment2 调用 onStart()。

所以，Fragment2 将滚动最后一个位置，但显示的 Fragment 是 Fragment1。

因此，App 因异常而崩溃。

```
03-22 09:39:23.711: E/AndroidRuntime(15404): java.lang.IllegalStateException: Content view not yet created
03-22 09:39:23.711: E/AndroidRuntime(15404):    at android.support.v4.app.ListFragment.ensureList(ListFragment.java:328)
03-22 09:39:23.711: E/AndroidRuntime(15404):    at android.support.v4.app.ListFragment.getListView(ListFragment.java:222) 
```

所以，我想完全调用 getListview.setSelection(position) 只显示片段。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:13:39.907

首先你为 Activity 实现 OnPageChangeListener。之后，您将处理处理这些函数的 ListFragments，

```
public void onPageScrollStateChanged(int arg0)
{
}
public void onPageScrolled(int arg0, float arg1, int arg2)
{
}
public void onPageSelected(int position) 
{
    if(position==0)
          ((ListFragment1)mPagerAdapter.getItem(position)).updateView();
//onUpdateView is a user defined public function on ListFragment that works what you need
else if(position==1)
          ((ListFragment2)mPagerAdapter.getItem(position)).updateView();
else if(position==2)
    ((ListFragment3)mPagerAdapter.getItem(position)).updateView();
else if(position==3)
          ((ListFragment4)mPagerAdapter.getItem(position)).updateView();
else if(position==4)
          ((ListFragment5)mPagerAdapter.getItem(position)).updateView();
} 
```

然后在每个 ListFragments 内部编写 onUpdateView() 的主体

```
public void onUpdateView()
{
     getListView.setSelection(position);
} 
```

# javascript - 视口参数值“设备宽度；” 对于无法识别的键“宽度”。内容被忽略

> ID：15567532
> 
> 赞同：5
> 
> 时间：2013-03-22T10:03:17.290
> 
> 标签：javascript, html, ibm-mobilefirst

我正在尝试为不同的 android 设备设置不同的视口。为此，我使用了这段代码。

```
<head>

<meta name="viewport" content="width=device-width; initial-scale=0.91; maximum-scale=0.91; user-scalable=0;target-densityDpi=device-dpi" />

<script>

if (window.devicePixelRatio == 1)
{
   document.querySelector("meta[name=viewport]").setAttribute('content', 'width=device-width, initial-scale=0.51, maximum-scale=0.51, user-scalable=0,target-densityDpi=device-dpi');

} else if (window.devicePixelRatio == 2) {

   document.querySelector("meta[name=viewport]").setAttribute('content', 'width=device-width, initial-scale=0.51, maximum-scale=0.51, user-scalable=0');

} else if (window.devicePixelRatio == .78) {

   document.querySelector("meta[name=viewport]").setAttribute('content', 'width=device-width, initial-scale=0.51, maximum-scale=0.51, user-scalable=0, target-densityDpi=device-dpi');

} else if (window.devicePixelRatio == 1.5) {

   document.querySelector("meta[name=viewport]").setAttribute('content', 'width=device-width, initial-scale=0.51, maximum-scale=0.51, user-scalable=0, target-densityDpi=device-dpi');

}

</script>

</head> 
```

现在的问题是它没有设置适当的内容值。并在 Logcat 中给出此错误

> 视口参数值“设备宽度；” 对于无法识别的键“宽度”。内容被忽略。
> 
> 视口参数值“设备宽度；” 对于无法识别的键“宽度”。内容被忽略。
> 
> 视口参数键“；初始比例”无法识别和忽略。
> 
> 视口参数值“否；” 对于无法识别的关键“用户可扩展”。内容被忽略。
> 
> 视口参数键“device-dpi”无法识别和忽略。

有什么建议么。抱歉编辑不佳，我无法编辑它。

编辑：

那时我的 Viewport 仍然无法在 android 设备上运行。我希望我应该只使用一个 css 并且 tat css 应该根据设备缩放图像。

为此，我将 Viewport 与 target-dpidensity 一起使用，并在它第一次工作时给出了初始和最大比例，但现在当我在 android 上运行这种方法时，它忽略了 Viewport。

实际上的问题是，当我在 html 的背景中设置图像并在任何 android 设备上运行此应用程序时，它会以缩放的心情提供图像。为此，我更改了我的皮肤 html 和 app.java 文件并禁用了缩放心情，还使用了 target-dpidensity 但所有方法都不起作用这是 html 代码：

![html](../Images/0f3874bfe459fc6a5f9216ea7a051d40.png)

这是css文件：

```
body {
background-repeat: no-repeat;
margin: 0; 
```

}

div {宽度：1280px；高度：670px；}

# 家 {

```
background-image: url('../images/abc_title.png');
width: 1280px;
height: 670px; 
```

}

# abc_slide {

```
position: relative; background : transparent;
width: 129px;
height: 76px;
background: transparent; width : 129px; height : 76px;
margin-top: 80px;
margin-left: 80px;
        border: thin; 
```

}

# 歌曲幻灯片{

```
position: relative;
background: transparent;
margin-top: 80px;
margin-left: 80px; width : 129px;
height: 76px;
width: 129px;
    border: thin; 
```

}

是因为droidgap还是cordove view

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-10-17T09:24:15.150

我已经通过删除逗号后的空格来解决它

```
 <meta name="viewport" content="width=device-width, initial-scale=1 ">

 <meta name="viewport" content="width=device-width,initial-scale=1"> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-23T21:06:38.273

我不确定您在一般情况下和在 if 中具体要做什么，但您可以从 HTML 中删除元标记并使用类似的东西：

```
<script>
    var viewportContent = '';
    if (window.devicePixelRatio = 1) {
        viewportContent = 'width=device-width, initial-scale=0.51, maximum-scale=0.51, user-scalable=0, target-densityDpi=device-dpi';
    } else if (window.devicePixelRatio == 2) {
        viewportContent = 'width=device-width, initial-scale=0.51, maximum-scale=0.51, user-scalable=0';
    } else if (window.devicePixelRatio == .78) {
        viewportContent = 'width=device-width, initial-scale=0.51, maximum-scale=0.51, user-scalable=0, target-densityDpi=device-dpi';
    } else if (window.devicePixelRatio == 1.5) {
        viewportContent = 'width=device-width, initial-scale=0.51, maximum-scale=0.51, user-scalable=0, target-densityDpi=device-dpi';
    }
    $('head').append('<meta name="viewport" content="' + viewportContent + '">');
</script> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-01T12:59:41.733

请注意，您必须用“，”（如上面的答案）而不是“;”来分隔视口内容的参数 （这将被视为价值的一部分，可能会导致意外行为）

# bash - 批量重命名脚本文件

> ID：15567534
> 
> 赞同：-1
> 
> 时间：2013-03-22T10:03:17.833
> 
> 标签：bash, unix, rename

在我的 nas4free (freeBSD) 中，我有一些包含照片的目录，我会使用一个 bash 脚本来重命名每个文件，并使用包含它的目录的名称和计数器。

例子：

从

```
/ path/2012-05-01 - description / DSCN4074.JPG 
```

至

```
/ path/2012-05-01 - description / 2012-05-01 - description (1 to n). jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:18:00.130

您应该只计算每个目录一次的文件数，并减少管道：

```
#!/bin/bash
EXT=.jpg

shopt -s nullglob
find . -mindepth 2 -type d | while read d
do( cd "$d"
    CURRENT=$(basename "$d")
    FILES=(*"$EXT")
    TOT=${#FILES[@]}
    COUNT=0
    for FILE in ${FILES[@]}
    do  let COUNT=COUNT+1
        mv "$FILE" "$CURRENT ($COUNT of $TOT)$EXT"
    done
)done 
```

# eclipse - eclipse - 在编辑器中显示最近访问的标签

> ID：15567536
> 
> 赞同：4
> 
> 时间：2013-03-22T10:03:21.623
> 
> 标签：eclipse, editor

是否可以将 eclipse 配置为按最近的访问时间或这些行中的某些内容对选项卡栏中的选项卡进行排序？当前的行为对我来说有点难以理解——大多数情况下，如果我从 tab1（显示 file1）切换到例如 tab2（显示 file2） tab1 会隐藏在 >> thingy 和其他一些选项卡中，比如 tab42，好久没访问了，在它的位置弹出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:53:52.073

正如@pabrantes 指出的那样，我的问题实际上是[另一个 so question](https://stackoverflow.com/questions/12578197/eclipse-juno-tabs-repositionning)的副本，由于我的问题陈述不充分，我无法自己找到。

长话短说：您只需要在当前主题的 CSS 文件部分中设置`swt-mru-visible`为。`true``.MPartStack`

# jquery - 在页面加载时隐藏同位素元素

> ID：15567538
> 
> 赞同：2
> 
> 时间：2013-03-22T10:03:24.147
> 
> 标签：jquery, css, jquery-isotope

我在加载页面时遇到了隐藏同位素元素的问题。我遵循了[https://github.com/desandro/isotope/issues/56](https://github.com/desandro/isotope/issues/56)给出的解释。然而，虽然我想隐藏的元素没有显示（在 css 中使用“opacity:0”），但它留下了一个空白区域。

你可以在[http://whatcanido.co.uk/pace/](http://whatcanido.co.uk/pace/)看到它。它是网格中的第一项。

然后，如果您将鼠标悬停在顶部菜单中的“按专业知识”项上，然后单击“架构”，它会很好。

我正在使用我正在调整的其他人的 Wordpress 主题，但无法弄清楚为什么会留下空白空间。

我需要隐藏第一个项目，直到过滤器被激活。

我将不胜感激任何帮助。

本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T10:21:53.927

你不能给所有的初始项目一个类来过滤吗？

尝试为第一页上应该可见的所有项目提供一个类`.init`并对其进行过滤：

```
$('#container').isotope({ filter: '.init' }); 
```

我从未使用过同位素，但我认为在阅读文档中的几行后它应该可以工作。

# scala - 用于统计计算和图形的 Scala 环境？

> ID：15567543
> 
> 赞同：1
> 
> 时间：2013-03-22T10:03:33.357
> 
> 标签：scala, graphics, statistics

请就类似于 R 或 Weka 的统计计算和图形的 Scala 环境提出建议。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:05:32.953

也许[Scalalab](https://code.google.com/p/scalalab/)是您正在寻找的。

> 脚本语言基于 Scala 编程语言，增强了高级科学运算符和提供类似 Matlab 工作方式的集成环境。此外，所有庞大的 Java 科学代码库都可以轻松访问（而且很多时候使用更方便的语法）。[...] ScalaLab 的一个主要设计重点是其用户友好的界面。

另请参阅[Scala 是否有一个好的数学/统计库？](https://stackoverflow.com/questions/8760925/is-there-a-good-math-stats-library-for-scala/8760991#8760991)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:56:21.567

我建议 Breeze：[http](http://www.scalanlp.org/) ://www.scalanlp.org/、https : [//github.com/dlwh/breeze/](https://github.com/dlwh/breeze/) 它有一些预定义的分类器、学习算法（SVM、回归...）、绘图库和支持矩阵乘法。

在这里您可以快速了解一下：[https ://github.com/dlwh/breeze/wiki/Quickstart](https://github.com/dlwh/breeze/wiki/Quickstart)

# symfony - 坚持时的教义@id null

> ID：15567552
> 
> 赞同：2
> 
> 时间：2013-03-22T10:04:08.780
> 
> 标签：symfony, doctrine

以下作品和一行插入到两个表中：

```
$user = new User();
$user->setId(8484);
$user->setData("user test data");

$profile = new Profile();
$profile->setBlah(8484);
$profile->setData("profile test data");

// if I leave this out it works... 
$user->setProfile($profile);

$em = $this->getDoctrine()->getEntityManager();     

$em->persist($user);
$em->flush(); 
```

但是如果省略`$user->setProfile($profile);`我会得到一个错误，因为`User`' 的 id 为空：

```
An exception occurred while executing 'INSERT INTO User (id, data) VALUES (?, ?)' with params {"1":null,"2":"user test data"} 
```

怎么可能？

```
class User
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=64)
     */
    protected $data;

    /**
     * @ORM\OneToOne(targetEntity="Profile", cascade={"persist", "remove"})
     * @ORM\JoinColumn(name="id", referencedColumnName="blah")
     */
    protected $profile;
}

class Profile
{
    /**
     * @ORM\Id
     * @ORM\Column(name="blah", type="integer")
     */
    protected $blah;

    /**
     * @ORM\Column(type="string", length=64)
     */
    protected $data;
} 
```

设置 Profile 方法：

```
/**
 * Set Profile
 *
 * @param \Test\AdminBundle\Entity\Profile $profile
 * @return User
 */
public function setProfile(\Test\AdminBundle\Entity\Profile $profile = null)
{
    $this->profile = $profile;

    return $this;
} 
```

**编辑：**

如果我将 joinColumn 名称更改为随机名称，我的对象使用 var_dump 看起来正确，但查询失败：

```
/**
 * @ORM\OneToOne(targetEntity="Profile", cascade={"persist"})
 * @ORM\JoinColumn(name="random_test", referencedColumnName="blah")
 */ 
```

给出：

```
An exception occurred while executing 'INSERT INTO User (id, data, random_test) VALUES (?, ?, ?)' with params {"1":8484,"2":"user test data","3":null}: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:27:14.700

你需要让你的 $profile 持久化，然后 Doctrine 才能成功地在你的用户和你的个人资料之间建立关系。

```
$em = $this->getDoctrine()->getEntityManager();    

$user = new User();
$user->setId(8484);
$user->setData("user test data");

$profile = new Profile();
$profile->setBlah(8484);
$profile->setData("profile test data");
$em->persist($profile);

$user->setProfile($profile); 
$em->persist($user);
$em->flush(); 
```

想想你在 MySQL 的代码中试图做什么。

原来你是说：

*插入个人资料将是 (8484) 的用户*

这导致*（错误：配置文件 8484 不存在）。*

你想说的是：

*插入配置文件 (8484)。插入个人资料为 (8484) 的用户。*

# vb.net - 根据动作连续旋转图像

> ID：15567558
> 
> 赞同：0
> 
> 时间：2013-03-22T10:04:32.030
> 
> 标签：vb.net

如果动作完成，如何在任何动作上旋转图像并关闭它。示例就像同步图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:03:03.967

我假设您正在使用 a`picturebox`来保存您的`image`，如果是这样，您可以将以下代码用于`rotate`您的`image`,

```
 'I just used a while loop here for testing purpose only, you can use a timer
    'for rotating your image smoothly. By the way, stop and start the timer
    'according to your need.
    While True
        PictureBox1.Image.RotateFlip(RotateFlipType.Rotate90FlipNone)
        PictureBox1.Refresh()
    End While 
```

## [旋转翻转](http://msdn.microsoft.com/en-IN/library/system.drawing.image.rotateflip.aspx)

# c# - WPF GroupStyle 错误

> ID：15567561
> 
> 赞同：3
> 
> 时间：2013-03-22T10:04:51.307
> 
> 标签：c#, wpf, xaml, datagrid, grouping

我有一个`GroupStyle`如下`DataGrid`所示的：

```
<DataGrid x:Name="CompassLogDataGrid"
    ItemsSource="{Binding Source={StaticResource Compasscollection}, IsAsync=True,                 Mode=OneTime}"
    Height="auto"
    AutoGenerateColumns="False"
    Style="{DynamicResource ResourceKey=Log4NetDataGridStyle}">

      <DataGrid.GroupStyle>
          <GroupStyle ContainerStyle="{StaticResource GroupHeaderStyle}" />
      </DataGrid.GroupStyle>
      ...
</DataGrid> 
```

和`GroupStyle`：

```
 <Style x:Key="GroupHeaderStyle"
       TargetType="{x:Type GroupItem}">

    <Setter Property="OverridesDefaultStyle"
            Value="False" />

    <Setter Property="Margin"
            Value="0,0,0,5" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type GroupItem}">
                <Expander IsExpanded="False"
                          Background="#FF112255"
                          BorderBrush="#FF002255"
                          Foreground="Black"
                          BorderThickness="1,1,1,5">
                    <Expander.Header>
                        <DockPanel>
                            <TextBlock FontWeight="Bold"
                                       Foreground="White"
                                       Text="{Binding Path=Name}"
                                       Margin="5,0,0,0"
                                       Width="100" />
                            <TextBlock FontWeight="Bold"
                                       Foreground="White"
                                       Text="{Binding Path=ItemCount}" />
                        </DockPanel>
                    </Expander.Header>

                    <Expander.Content>
                        <ItemsPresenter />
                    </Expander.Content>
                </Expander>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

此代码产生以下内容`Error`：

> System.Windows.Data 错误：4：找不到与引用'RelativeSource FindAncestor，AncestorType='System.Windows.Controls.DataGrid'，AncestorLevel='1''的绑定源。绑定表达式：路径=AreRowDetailsFrozen；数据项=空；目标元素是'DataGridDetailsPresenter'（名称=''）；目标属性是“SelectiveScrollingOrientation”（类型为“SelectiveScrollingOrientation”） System.Windows.Data 错误：4：找不到用于绑定参考的源“RelativeSource FindAncestor，AncestorType='System.Windows.Controls.DataGrid'，AncestorLevel='1'” . BindingExpression:Path=HeadersVisibility; 数据项=空；目标元素是'DataGridRowHeader'（名称=''）；目标属性是“可见性”（类型“可见性”）

我怎样才能解决这个问题？

# c++ - 如何在 Windows 上使用 g2o 框架进行图形优化（SLAM）？

> ID：15567563
> 
> 赞同：0
> 
> 时间：2013-03-22T10:04:54.620
> 
> 标签：c++, visual-studio-2010

我正在开发一个图形大满贯项目，我想使用 g2o 框架 ( [https://github.com/RainerKuemmerle/g2o](https://github.com/RainerKuemmerle/g2o) ) 使用 Visual Studio 2010 开发应用程序。这个框架主要在 linux 上工作，但它可以用于窗户也是如此。

谁能告诉我如何使用visual studio

谢谢，

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:16:17.560

您可以在 Windows 中使用它，因为所有要求都有一个到 Visual Studio 的端口。

*   cmake [http://www.cmake.org/](http://www.cmake.org/)
*   [特征3](http://eigen.tuxfamily.org) http://eigen.tuxfamily.org
*   套件分析 [http://www.cise.ufl.edu/research/sparse/SuiteSparse/](http://www.cise.ufl.edu/research/sparse/SuiteSparse/)
*   Qt4 [http://qt.nokia.com/](http://qt.nokia.com/)
*   libQGLViewer [http://www.libqglviewer.com/](http://www.libqglviewer.com/)

> 我们的主要开发平台是Linux。对 Mac OS X 和 Windows（MinGW 或 MSVC）的实验性支持。我们推荐所谓的 out of source build 可以通过以下命令序列来实现。[(1)](https://github.com/RainerKuemmerle/g2o)

使用[cmake](http://www.cmake.org/cmake/help/cmake_tutorial.html)构建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T09:40:30.903

我记得在 Windows 上构建 g2o 时遇到了一些问题。但是 CMake 应该运行良好。只需配置、生成，即可使用 Visual Studio 打开解决方案并进行构建。如果它说“配置完成”，它应该编译。CMake 有时很难找到 Eigen3，因为他们的 find 脚本尚未与 CMake 一起正式分发。

您可以运行（假设您在`g2o/trunk/build`文件夹中，因此`..`）：

```
cmake .. -DCMAKE_MODULE_PATH=/path/to/a/dir/containing_the_FindEigen3.cmake_file/ 
```

还有其他库可以有效地解决图形问题，例如[SLAM++](https://sourceforge.net/projects/slam-plus-plus/)、[iSAM](http://people.csail.mit.edu/kaess/isam/)或[GTSAM](http://borg.cc.gatech.edu/)，它们在 Windows 上编译时问题较少。

# java - 我如何使用他的 API 连接到 OpenCMS 服务器

> ID：15567565
> 
> 赞同：-3
> 
> 时间：2013-03-22T10:04:57.847
> 
> 标签：java, opencms

我可以使用 OpenCMS API 从 Java 独立设备连接到我的 OpenCMS 吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:21:52.150

[在这里](http://www.google.com.pk/url?sa=t&rct=j&q=connect%20to%20opencms%20using%20opencms%20api%20filetype%3Ajava&source=web&cd=3&cad=rja&ved=0CDUQFjAC&url=http%3A%2F%2Fwww.docjar.com%2Fsrc%2Fapi%2Fcom%2Fopencms%2Fboot%2FCmsSetupDb.java&ei=xC5MUZidKdH07Aa95YGADA&usg=AFQjCNHx50f3My0Z-36dj4rdOvDLO_uY7g)您可以找到一个文件，它是一个小而完整的项目，配置了 OpenCMS 使用的 JDBC。
您还可以[在此处](http://www.opencms.org/en/development/revision-control.html)找到其详细的 Githu 存储库。还可以在其存储库上查看opencms[提供的这个小型应用程序](http://code.google.com/p/opencms-backoffice/source/browse/branches/test-red5/playlist/src/org/red5/webapps/red5java/Application.java?r=166)
.下次请注意.Goodluck :)

# django - 在 django 中显示 0.00 作为 NONE 的比较？

> ID：15567568
> 
> 赞同：-3
> 
> 时间：2013-03-22T10:04:58.587
> 
> 标签：django, django-templates

我`value.discount_total`在这个值中有一个变量执行

```
None 
```

但是当我下订单时..在订单电子邮件中，我想为此值显示 0.00 而不是 NONE。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:06:07.877

试试[默认](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#default) `{{value.discount_total|default:'0.00'}}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:06:46.027

尝试`|default`过滤为

```
{{value.discount_total|default:"0.00"}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:08:52.887

您还可以在 Django 应用程序的 views.py 中设置初始值`value.discount_total = 0.`，而不是在模板中设置它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:19:24.097

更聪明的方法是制作字段模型，并将其作为`discount_total`值，这样您就不必检查模板中是否为 None 或您需要使用它的任何其他地方。`DecimalField``0.00``default``discount_total`

这是一个例子：

```
discount_total = models.DecimalField(
        max_digits=12,
        decimal_places=2,
        default=Decimal('0.00')
    ) 
```

# mysql - 我可以在 mysql 数据库列中存储 ruby 哈希吗

> ID：15567569
> 
> 赞同：0
> 
> 时间：2013-03-22T10:05:02.370
> 
> 标签：mysql, ruby, hash

我想将下面的哈希值插入到 mysql 列中，

```
{:sub => ["at","div.product-info"],
     1 => [["at","span#hs18Price"]],
     :avail => ["at","strong.out_stock"],
     :soffer =>  ["at","div.freebie"], 
     :stime =>["search","div[@class='costs']//span[@class='days']"],
     :scost => [300,30] } 
```

我试过了，它抛出以下错误，

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'costs... 
```

有什么帮助吗？

**编辑：**

忘记活动记录和序列化。我想在原始 sql 中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:09:10.783

您需要转义哈希中的单引号

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:18:51.700

如果您想在 MySQL（或 AR* 支持的任何其他数据库）的列内存储 Hash，您必须：

1）将列定义为文本

```
add_column :users, :the_whatever, :text 
```

2) 定义列的序列化，以便 ActiveRecord 知道如何处理您的数据。您可以通过将序列化选项设置为模型来做到这一点。

```
serialize :the_whatever, Hash 
```

* 一些数据库（如 PostgreSQL）还提供了一些更适合存储哈希的其他类型。请参阅[Railscasts Hstore](http://railscasts.com/episodes/345-hstore)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T11:54:44.890

If you're willing to switch the database: PostreSQL has [hstore](http://www.postgresql.org/docs/9.0/static/hstore.html) for this.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:07:52.183

您的 sql 列必须是 type `text`。您可能还需要先序列化您的哈希。

# python - 对象及其继承

> ID：15567571
> 
> 赞同：1
> 
> 时间：2013-03-22T10:05:03.003
> 
> 标签：python, python-2.7

我无法理解对象实例和对象继承实例之间的区别：

1\. `__dict__`, `__module__`, `__weakref__`- 这个属性来自哪里？

```
>>> dir(object)
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__']
>>> dir(type('tt',(object,),{}))
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__'] 
```

2.我无法为对象实例设置属性。

```
>>> b= object()
>>> b.f = 3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'object' object has no attribute 'f'
>>> b = type('tt',(object,),{})()
>>> b.f = 4 
```

这种差异是否来自内置类型构建器？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:16:19.700

首先，有些类型是不可变的。`int`并且`tuple`是不可变的，例如，一个普通的`object`实例也是如此。同样的限制不适用于子类；您可以子类`int`化并赋予它可变属性，这同样适用于`object`.

该`__dict__`属性由类构建器 ( `type()`) 添加到自定义类；它是类的命名空间映射；类上的属性查找被转换为该结构中的键查找。`object`另一方面是 Python C 类型，C 中的属性和方法的处理方式不同。Python C 类型应该实现[C Type 接口](http://docs.python.org/2/c-api/typeobj.html)。对于某些类型`.__dict__`可以取消引用，但您会发现它是一个只读代理对象，因为 C 类型不能像自定义类型那样动态更改。

该`__module__`属性在和上*可用*：`object``int`

```
>>> object.__module__
'builtins'
>>> int.__module__
'builtins' 
```

但是因为这些是内置类型，所以该属性实际上没有什么意义，并且没有在`dir()`.

该`__weakref__`属性是[`weakref`模块](http://docs.python.org/2/library/weakref.html)的实现细节。[如果没有在类上设置属性](http://docs.python.org/2/reference/datamodel.html#slots)，则构造函数与`__dict__`属性一起在自定义类上设置此属性。就像属性一样，您发现自定义类和 C 类型对象之间的另一个区别。对于 Python C 类型，[C 类型对象结构](http://docs.python.org/2/c-api/typeobj.html)中的不同条目具有相同的作用。`type()`[`__slots__`](http://docs.python.org/2/reference/datamodel.html#slots)`__dict__`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:22:59.657

1.

`__dict__`是每个 python 对象具有的存储它的变量的字典，例如。`foo.x`将查找`foo.__dict__['x']`（某些类[`__slots__`](http://docs.python.org/2/reference/datamodel.html#slots)改为使用以节省空间）

`__module__`指类的模块。

```
>>> object.__module__
'__builtin__' # object is part of the builtin module 
```

`__weakref__`是对对象的引用，`weakref`模块使用它来保持对对象的引用，而不影响引用计数垃圾收集系统。有关它的用途，请参见[此处](http://docs.python.org/2/library/weakref.html)。

2.

您不能在`object()`实例上设置属性，因为它没有`__dict__`,

```
>>> dir(object)
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__'] 
```

它仅用作其他所有类的基类，不需要一个。

像你一样使用`type`实际上创建了一个子类`object`，你也给了它一个`{}`它的属性，所以当然`b.f = 4`会起作用。

# windows - win32汇编编程显卡

> ID：15567579
> 
> 赞同：0
> 
> 时间：2013-03-22T10:05:23.997
> 
> 标签：windows, assembly, graphics

我目前正在 Windows 7 上学习汇编程序，并且我想制作一个游戏（仅用于教育目的）。我找到了有关如何在 DOS 上使用 13h 模式在汇编中对 VGA 进行编程的资源。这让我想到：有没有一种方法可以直接在 Windows 7 中对显卡进行编程而不使用高级图形库？如果这不是一个选项，你能用汇编的图形库编写图形程序吗？

提前致谢，

莱利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:20:42.040

如果您不想要高级图形库，请将自己限制在一个中的低级内容中，例如`SetPixel()`；这几乎是`int 13H`提供的服务水平。不，不可能`int 13H`在 Windows 中直接使用或使用硬件。而且您无论如何都不需要 VGA 模式 - 对于每一个明智的现代显卡来说，它都是一个巨大的功能下降。

您可以随心所欲地在汇编中编写，但这毫无意义；调用堆栈的顶部通常不是瓶颈所在。至少不适合 2D 游戏。

所以学习 GDI 和/或 DirectX。并且不要使用汇编，除非并且直到你知道你绝对必须这样做。大会不适用于教育项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:18:00.277

当您提到模式 13h 时，我假设您想做 2D 游戏。您可以自己处理屏幕缓冲区，以您选择的任何格式（256 色 RGB、调色板、24 位 ARGB 等），然后通过更高级别的库（如[libSDL](http://www.libsdl.org/)甚至是 Windows 本身的 GDI）“渲染”它。我不建议直接打显卡（非常复杂）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:16:01.607

由于 Windows 在保护模式下运行，因此您无法直接从用户模式访问硬件资源。包括显卡在内的所有硬件资源都只能从内核模式模块（即驱动程序）访问。如果您需要从用户模式访问，则需要寻址卡的驱动程序以执行请求的操作。它的接口不仅仅是发送您想要使用的汇编命令，而是一组已定义的公开函数。高级图形库可能隐藏了了解此接口及其用法的需要。寻址图形库完全取决于特定的库定义和（再次）公开的接口。基本上，它应该可以从任何语言（包括汇编语言）中寻址。

# c# - WPF 绑定 - 空字符串的默认值

> ID：15567588
> 
> 赞同：48
> 
> 时间：2013-03-22T10:05:48.123
> 
> 标签：c#, wpf, xaml, binding

如果绑定字符串为空，是否有标准方法为 WPF 绑定设置默认值或回退值？

```
<TextBlock Text="{Binding Name, FallbackValue='Unnamed'" /> 
```

`FallbackValue`唯一似乎在为空时启动，`Name`但在设置为时不启动`String.Empty`。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-22T10:21:34.193

`DataTrigger`是我这样做的方式：

```
<TextBox>
  <TextBox.Style>
        <Style TargetType="{x:Type TextBox}"  BasedOn="{StaticResource ReadOnlyTextBox}">
            <Setter Property="Text" Value="{Binding Name}"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=Name.Length, FallbackValue=0, TargetNullValue=0}" Value="0">
                    <Setter Property="Text" Value="{x:Static local:ApplicationLabels.NoValueMessage}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-03-22T10:13:26.370

我的印象是[FallbackValue](http://msdn.microsoft.com/en-GB/library/system.windows.data.bindingbase.fallbackvalue.aspx)在绑定失败时提供一个值，而[TargetNullValue](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.targetnullvalue.aspx)在绑定值为空时提供一个值。

要执行您想要的操作，您将需要一个转换器（可能带有参数）将空字符串转换为目标值，或者将逻辑放入您的视图模型中。

我可能会使用类似这样的转换器（未经测试）。

```
public class EmptyStringConverter : MarkupExtension, IValueConverter
{  
    public object Convert(object value, Type targetType, 
                          object parameter, CultureInfo culture)
    {
        return string.IsNullOrEmpty(value as string) ? parameter : value;
    }

    public object ConvertBack(object value, Type targetType, 
                              object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-22T10:15:34.020

您应该为此创建一个转换器，它实现`IValueConverter`

```
public class StringEmptyConverter : IValueConverter {

public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
      return string.IsNullOrEmpty((string)value) ? parameter : value;
    }

public object ConvertBack(
      object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
      throw new NotSupportedException();
    }

} 
```

然后在xaml中，您只需将转换器提供给绑定，（`xxx`仅代表您的`Window`/ `UserControl`/ `Style`...绑定所在的位置）

```
<xxx.Resources>
<local:StringEmptyConverter x:Key="StringEmptyConverter" />
</xxx.Resources>
<TextBlock Text="{Binding Name, Converter={StaticResource StringEmptyConverter}, ConverterParameter='Placeholder Text'}" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:15:19.540

您可以使用转换器并对其进行相应的验证。

```
Binding="{Binding Path=Name, Converter={StaticResource nameToOtherNameConverter}}" 
```

在你的转换器中

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (!string.IsNullOrEmpty(value.ToString()))
        { /*do something and return your new value*/ } 
```

# r - 函数参数作为 R 函数中的参数

> ID：15567589
> 
> 赞同：10
> 
> 时间：2013-03-22T09:33:55.687
> 
> 标签：r, confidence-interval, function, credible-interval

我正在尝试编写一个通用函数来计算 R 中二项式比例的区间估计的覆盖概率。我打算为各种置信区间方法执行此操作，例如 Wald、Clopper-Pearson、HPD 区间用于不同的先验。

理想情况下，我希望有一个函数，可以将用于计算间隔的方法作为参数。那么我的问题是：如何将一个函数作为参数包含在另一个函数中？

例如，对于 Exact Clopper-Pearson 区间，我有以下函数：

```
# Coverage for Exact interval
ExactCoverage <- function(n) {
p <- seq(0,1,.001)
x <- 0:n

# value of dist
dist <- sapply(p, dbinom, size=n, x=x)

# interval
int <- Exact(x,n)

# indicator function
ind <- sapply(p, function(x) cbind(int[,1] <= x & int[,2] >= x))

list(coverage = apply(ind*dist, 2, sum), p = p)
} 
```

其中 Exact(x,n) 只是一个计算适当间隔的函数。我想拥有

```
Coverage <- function(n, FUN, ...)
...
# interval
int <- FUN(...) 
```

这样我就有一个函数来计算覆盖概率，而不是为每种间隔计算方法提供一个单独的覆盖函数。有没有标准的方法来做到这一点？我一直无法找到解释。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T09:47:16.710

在 R 中，函数可以作为函数参数提供。语法与非函数对象之一匹配。

这是一个示例函数。

```
myfun <- function(x, FUN) {
  FUN(x)
} 
```

此函数将函数应用于`FUN`对象`x`。

一些包含从 1 到 10 的数字的向量示例：

```
vec <- 1:10 

> myfun(vec, mean)
[1] 5.5
> myfun(vec, sum)
[1] 55
> myfun(vec, diff)
[1] 1 1 1 1 1 1 1 1 1 
```

这不仅限于内置函数，还适用于任何函数：

```
> myfun(vec, function(obj) sum(obj) / length(obj))
[1] 5.5

mymean <- function(obj){
  sum(obj) / length(obj)
}
> myfun(vec, mymean)
[1] 5.5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-22T06:02:29.940

您还可以将函数名称存储为字符变量，并使用 do.call() 调用它

```
> test = c(1:5)
> do.call(mean, list(test))
[1] 3
> 
> func = 'mean'
> do.call(func, list(test))
[1] 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-03T10:33:11.763

[哈德利的文字](http://adv-r.had.co.nz/Functionals.html)给出了一个很好的（和简单的）例子：

```
randomise <- function(f) f(runif(1e3))

randomise(mean)
#> [1] 0.5059199
randomise(mean)
#> [1] 0.5029048
randomise(sum)
#> [1] 504.245 
```

# android - 如何在 android 2.3 中实现 youtube App 之类的布局？

> ID：15567603
> 
> 赞同：0
> 
> 时间：2013-03-22T10:06:36.610
> 
> 标签：android

如何在 android 2.3 中实现类似 youtube App 的布局？我的意思是点击右侧，我们可以看到我们的个人资料，历史等，右侧有一半的主屏幕。参见[图片](https://www.dropbox.com/s/qnmezbqpu53h0rs/Screenshot_2013-03-22-15-31-12.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:09:09.207

它被称为`multi pane layout`（[http://developer.android.com/design/patterns/multi-pane-layouts.html](http://developer.android.com/design/patterns/multi-pane-layouts.html)`Fragments` ），您使用（[http://developer.android.com/training/basics/fragments/index.html](http://developer.android.com/training/basics/fragments/index.html)）创建它们）。祝你好运

# twitter-bootstrap - twitter bootstrap - 响应式网页设计：移动设备上的加载时间？

> ID：15567607
> 
> 赞同：3
> 
> 时间：2013-03-22T10:06:49.040
> 
> 标签：twitter-bootstrap, responsive-design

我正在创建一个 twitter 引导页面，该页面需要能够根据手机/平板电脑用户进行自我调整……我正在使用“隐藏电话”和其他类：http: [//twitter.github.com/bootstrap/scaffolding。 html#responsive](http://twitter.github.com/bootstrap/scaffolding.html#responsive)
它可以完美运行，例如在手机上显示完全不同的风格。

我唯一担心的是移动设备上的加载时间。例如，如果我有一些带有“隐藏电话”类的代码，则必须检查它以知道它不能被渲染。那么，为移动用户创建一个单独的 .html/.php 文件会更好吗？或者有没有更好的方法来不在移动设备上加载每个 jquery、css 和其他 javascript 内容和 html 代码？

我希望问题足够清楚，如果没有，请告诉我，我会尽力解释得更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:06:42.567

您可以创建单独的文件和脚本来支持不同的设备或屏幕尺寸，但这会创建一个有点零散的代码库。

Bootstrap 内置了媒体查询，因此，您可以使用它们根据屏幕宽度扩展或限制它们使用的 CSS。*您可以*将它们拆分并执行以下操作，而不是包含每个设备的所有类和样式：

```
<link rel="stylesheet" media="screen and (min-width: 1024px)" href="default.css"/>
<link rel="stylesheet" media="screen and (max-width: 1023px)" href="tablet.css"/>
<link rel="stylesheet" media="screen and (max-width: 570px)" href="phone.css"/> 
```

用 javascript 做同样的事情也很容易。您可以为您的 JS 文件提供媒体查询样式包含。一个例子是使用脚本加载器[yepnope.js](http://yepnopejs.com/)和[Modernizr](http://modernizr.com/)。

您可以在 yepnope 中使用[mq() 媒体查询测试](http://modernizr.com/docs/#mq)，它允许您通过测试媒体查询来执行或包含 JS 函数/脚本：

```
yepnope({
    Modernizr.mq('only screen and (max-width: 485px)') // Media query test
    yep  : 'phone.js',
    nope : ['default.js', 'tablet.js'] 
}); 
```

如果你设计好你的框架/代码库，它将减少手机和所有其他设备的占用空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T16:48:15.297

如果大图像是一个问题，我会尝试通过 CSS 将它们加载为背景图像。这使您可以使用@media 请求为不同的视点指定不同的（背景）图像，例如

```
@media (min-width:980px){

.image-background{
width:800px;
height:400px;
background:url("large-image.jpg") top left no-repeat;
}
}

@media (max-width:600px){

.image-background{
width:400px;
height:200px;
background:url("phone-image.jpg") top left no-repeat;
}
}  

etc 
```

您可以通过对 .image-background div 的宽度使用百分比来进一步优化这一点，并使用新的 CSS 选项（如[覆盖或包含](http://www.w3schools.com/cssref/css3_pr_background-size.asp)）来缩放 div 内的图像。

这种方法不适用于网站上的所有图像，但是假设您在主页上有一个大的启动图像，我发现它是值得的。

**编辑**
另一个有趣的图像相关选项是[adaptive-images.com](http://adaptive-images.com/)，它根据查看者的屏幕尺寸和您设置的断点动态调整图像大小。

它可以追溯安装在响应式站点上，因此可能值得测试它是否适合您的站点。

祝你好运！

# windows-7 - 如何在 Windows 7 机器上使用 apache websocket？

> ID：15567608
> 
> 赞同：0
> 
> 时间：2013-03-22T10:06:50.000
> 
> 标签：windows-7, websocket, apache2.2

我需要开发一个程序，从服务器获取一些文件并使用它们在客户端绘制一些图形。我想在我的 Windows 7 机器上使用 Apache 2.2 并使用 html5 在浏览器中开发程序（一开始我使用客户端-服务器在同一台机器上）。我正在寻找 websockets，我发现[apache-websocket](https://github.com/disconnect/apache-websocket)似乎对我的情况很有用。但是，尽管我相信我按照所有说明进行了安装并检查了库路径是否正确，但我不断收到以下错误：

> mod_websocket.obj：错误 LNK2019：未解析的外部符号 __imp_apr_thread_mutex_create 在函数 mod_websocket_method_handler 中引用

和类似的其他行。

有人知道我为什么会收到这些错误吗？

实际上，我检查了其他 websocket 插件，在我看来，它们被引入主要用于 unix 机器，我找不到太多关于 Windows 7 的信息。如果您有任何其他建议，包括如何安装和启动使用它们，将不胜感激，谢谢，

# php - Mysql：访问 information_schema 使 mysql 服务崩溃

> ID：15567610
> 
> 赞同：0
> 
> 时间：2013-03-22T10:06:59.137
> 
> 标签：php, mysql, windows, crash, information-schema

我安装了安装了 Mysql 5.5.28 的 Windows 7 64 位，当我尝试通过 php mysql 查询访问 information_schema 表时，整个 mysql.exe 服务崩溃，我必须重新启动它。

我试图通过 Phpmyadmin 访问 information_schema，以确保我在查询中没有做错什么，但它也崩溃了。

我尝试在 information_schema db 上运行修复命令，但没有帮助。

我不知道它有什么问题。我没有在那里更改任何值，我只访问 information_schema 来读取我的表的 auto_increment 值，但就是这样。

任何建议表示赞赏，谢谢。

# android - 我们可以做些什么来从这段代码中设置文本？

> ID：15567613
> 
> 赞同：0
> 
> 时间：2013-03-22T10:07:05.303
> 
> 标签：android

我有一个问题，我有一堂课，我想把这个课上的文本放到 textview 上的 mainActivity 中。有人能帮我吗 ？我想在 main 的文本视图中调用它，我试过了，但没有用

```
private String title;
    private String   test1;
    private String Time;
    private String test2;
    private String report;

    enter code here
    public String getTime() {
        return Time;
    }    
    public void setTime(String time) {
        Time = time;
    }
    public String getScore() {
        return test2;
    }
    public void setScore(String score) {
        this.test2 = score;
    }
    public String getReport() {
        return report;
    }
    public void setReport(String report) {
        this.report = report;
    }
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:14:57.987

尝试这个

```
public void settextManually(int resourceId,String textsethere)
    View view = findViewById(resourceId);
    if (view instanceof TextView) {
        TextView text = (TextView) view;
            text .setText(textsethere));

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:09:56.420

只需使用字符串类的公共方法将文本设置到`TextView`. 例如：

```
textViewScore.setText(yourClass.getScore()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:15:56.807

在您的 mainActivity 中执行以下操作：

```
textViewTime.setText(yourClass.getTime());
textViewScore.setText(yourClass.getScore());
textViewReport.setText(yourClass.getReport());
textViewTitle.setText(yourClass.getTitle()); 
```

# orm - 未设置 Ebean/idIn 参数

> ID：15567617
> 
> 赞同：0
> 
> 时间：2013-03-22T10:07:11.467
> 
> 标签：orm, playframework-2.0, ebean

我对 Ebean 有一个奇怪的问题。

代码：

```
static <T> ImmutableMap<Long, T> getFromIdToItemMap(Iterable<SqlRow> rows, 
        Callable<Model.Finder<Long, T>> getFinder, 
        String idSqlFieldName, 
        Function<T, Long> getId) {
    List<Long> tfzIds = Lists.newArrayList();
    for (SqlRow i : rows) {
        tfzIds.add((long) i.getLong(idSqlFieldName));
    }
    Builder<Long, T> id_to_tfz = new ImmutableMap.Builder<Long, T>();
    List<T> tfzs;
    try {
        tfzs = getFinder.call().where().idIn(tfzIds).findList();
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
    for (T tfz : tfzs) {
        id_to_tfz.put(getId.apply(tfz), tfz);
    }
    return id_to_tfz.build();
} 
```

例外：

```
javax.persistence.PersistenceException: Query threw SQLException:Parameter "#1" is not set; SQL statement:
select t0.virtuelle_adresse c0, t0.reale_adresse c1, t0.betr_nr c2, t0.bemerkung c3, t0.inbetriebnahme c4, t0.dekoder_typ_id c5, t0.model_tfz_typ_id c6, t0.eigentuemer_id c7 
from tfz t0 
where t0.virtuelle_adresse in (?)  [90012-168] 
Bind values:[] 
Query was:
select t0.virtuelle_adresse c0, t0.reale_adresse c1, t0.betr_nr c2, t0.bemerkung c3, t0.inbetriebnahme c4, t0.dekoder_typ_id c5, t0.model_tfz_typ_id c6, t0.eigentuemer_id c7 
from tfz t0 
where t0.virtuelle_adresse in (?)  

    at com.avaje.ebeaninternal.server.query.CQuery.createPersistenceException(CQuery.java:815)
    at com.avaje.ebeaninternal.server.query.CQuery.createPersistenceException(CQuery.java:795)
    at com.avaje.ebeaninternal.server.query.CQueryEngine.findMany(CQueryEngine.java:210)
    at com.avaje.ebeaninternal.server.query.DefaultOrmQueryEngine.findMany(DefaultOrmQueryEngine.java:77)
    at com.avaje.ebeaninternal.server.core.OrmQueryRequest.findList(OrmQueryRequest.java:272)
    at com.avaje.ebeaninternal.server.core.DefaultServer.findList(DefaultServer.java:1502)
    at com.avaje.ebeaninternal.server.querydefn.DefaultOrmQuery.findList(DefaultOrmQuery.java:904)
    at com.avaje.ebeaninternal.util.DefaultExpressionList.findList(DefaultExpressionList.java:177)
    at controllers.Prognosis.getFromIdToItemMap(Prognosis.java:106)
    ... 26 more
Caused by: org.h2.jdbc.JdbcSQLException: Parameter "#1" is not set; SQL statement:
select t0.virtuelle_adresse c0, t0.reale_adresse c1, t0.betr_nr c2, t0.bemerkung c3, t0.inbetriebnahme c4, t0.dekoder_typ_id c5, t0.model_tfz_typ_id c6, t0.eigentuemer_id c7 
from tfz t0 
where t0.virtuelle_adresse in (?)  [90012-168]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.expression.Parameter.checkSet(Parameter.java:73)
    at org.h2.command.Prepared.checkParameters(Prepared.java:163)
    at org.h2.command.CommandContainer.query(CommandContainer.java:85)
    at org.h2.command.Command.executeQuery(Command.java:191)
    at org.h2.jdbc.JdbcPreparedStatement.executeQuery(JdbcPreparedStatement.java:109)
    at com.jolbox.bonecp.PreparedStatementHandle.executeQuery(PreparedStatementHandle.java:172)
    at com.avaje.ebeaninternal.server.query.CQuery.prepareBindExecuteQuery(CQuery.java:382)
    at com.avaje.ebeaninternal.server.query.CQueryEngine.findMany(CQueryEngine.java:174)
    ... 32 more 
```

我不明白 tfzIds 列表是如何没有插入到 EBean 构建的查询中的。

我尝试了什么：我将演员表添加到 long 以确保我不会在列表中得到空值。但这似乎不是问题所在，似乎根本没有阅读该列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:12:56.030

发生异常是因为`rows`它是空的……我很惊讶 EBean 没有检查它。我通过将这些行`hasNext()`声明为方法的第一条语句来解决这个问题，从而引发了一个更有用的异常。

# jquery - Fancybox 2.1.4 alt 属性缺失

> ID：15567620
> 
> 赞同：0
> 
> 时间：2013-03-22T10:07:13.650
> 
> 标签：jquery, attributes, fancybox, fancybox-2, alt

抱歉我的英语不好，我是法国人，我对新版本的 Fancybox 有疑问。

我的图像的 alt 属性已正确插入到我的 HTML 中，但它没有出现在 Fancybox 的 HTML 代码中：

```
<div class="fancybox-inner" style="overflow: visible; width: 521px; height: 521px;"><img alt="" src="images_produits/gigoteuse-naissance-badou-z.jpg" class="fancybox-image"></div> 
```

默认情况下，新版本模板上的 alt 属性为空：alt="" (jquery.fancybox.js) 我该如何解决这个问题？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T18:06:43.197

恐怕您必须将`alt`属性的值推送到`.fancybox-image`选择器中。

您可以从 缩略图中的`alt`属性中获取该值，例如：`img`

```
<a href="big_image.jpg" class="fancybox"><img alt="one" src="thumb_image.jpg" /></a> 
```

或来自`data`锚点中的属性，例如：

```
<a data-alt="alt for fancybox one" href="big_image.jpg" class="fancybox"><img alt="one" src="thumb_image.jpg" /></a> 
```

然后使用`beforeShow`回调来设置它们中的任何一个。您可以优先考虑`alt`缩略图中的属性或`data`锚点中的属性，只要对您更有效：

```
$(".fancybox").fancybox({
    beforeShow: function () {
        var imgAlt = $(this.element).find("img").attr("alt");
        var dataAlt = $(this.element).data("alt");
        if (imgAlt) {
            $(".fancybox-image").attr("alt", imgAlt);
        } else if (dataAlt) {
            $(".fancybox-image").attr("alt", dataAlt);
        }
    }
}); 
```

如果它们都不存在，则`alt`of`.fancybox-image`将保持为空，就像在模板中一样。

见**[JSFIDDLE](http://jsfiddle.net/rAVCU/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-14T12:28:44.647

此代码适用于每个选定（单击）的元素，采用并添加 alt 属性到 fancybox-content 中的图像

```
jQuery('a.fancybox').fancybox({'hideOnContentClick':true,
    'titleShow':true,

    'onComplete' : function(links, index){
        var self = $(links[index]);
        var imageHtml = self[0];
        var alt = $(imageHtml).find("img").attr("alt");
        jQuery("#fancybox-wrap #fancybox-content #fancybox-img").attr('alt', alt);

    },
}); 
```

# ruby-on-rails-3 - 使用多个 gem 时模块名称冲突（在我的例子中：social_stream 和 rails3_acts_as_paranoid）

> ID：15567623
> 
> 赞同：0
> 
> 时间：2013-03-22T10:07:21.803
> 
> 标签：ruby-on-rails-3, module, rubygems, social-stream, acts-as-paranoid

我正在使用这两个 gem：[social_stream](https://github.com/ging/social_stream)（rails 引擎）和[rails3_acts_as_paranoid](https://github.com/goncalossilva/rails3_acts_as_paranoid)（lib）。

当我尝试查看主页时，出现以下错误：

```
NameError in Home#index 
```

*显示 /home/pinouchon/code/sharewizz/webapp/app/views/home/index.html.erb 其中第 25 行提出： **未初始化的常量 ActsAsParanoid::Relation::Public** 提取的源（在第 25 行附近）：*

```
22: 
23: <%= 
24:     render :partial => "activities/index",
25:          :locals => { :activities => current_subject.wall(:home).page(params[:page]),
26:                             :owner => current_subject }
27:  %>
28: 
```

*完整跟踪：*

```
social_stream-base (0.21.0) app/models/relation.rb:159:in `ids_shared_with'
app/models/activity.rb:70:in `block in <class:Activity>'
activerecord (3.2.2) lib/active_record/scoping/named.rb:180:in `call'
activerecord (3.2.2) lib/active_record/scoping/named.rb:180:in `block (2 levels) in scope'
# ... 
```

* * *

我认为这是因为这些 gem 定义的 2 个模块具有相同的名称：`Relation`.

**在 /home/pinouchon/.rvm/gems/ruby-1.9.3-p392@project/gems/rails3_acts_as_paranoid-0.2.5/lib/acts_as_paranoid/relation.rb 中：**

```
module ActsAsParanoid
  module Relation
  # ... 
```

**在 /home/pinouchon/.rvm/gems/ruby-1.9.3-p392@project/gems/social_stream-base-0.21.0/app/models/relation.rb**：

```
class Relation < ActiveRecord::Base
  #...
  def ids_shared_with(subject)
      # line 159:
      ids = [Relation::Public.instance.id]
      # ... 
```

**在 /home/pinouchon/.rvm/gems/ruby-1.9.3-p392@project/gems/social_stream-base-0.21.0/app/models/relation/public.rb 中：**

```
class Relation::Public < Relation::Single
  # ... 
```

以前，我只使用社交流，没有冲突的模块名称。现在，好像`ActsAsParanoid::Relation`正在替换`Relation`，因此第`.../social_stream/.../relation.rb`159 行出现了问题。

但令人惊讶的是，Relation 模块`rails3_acts_as_paranoid`在`module ActsAsParanoid`. 所以它不应该干扰`Relation`在全局范围内定义的 social_stream ，但它确实如此。我可能错过了一些东西。

我对导致错误的原因是否正确？有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:52:04.890

通过覆盖由 social_stream 定义的模型关系（将文件复制到 app/models），并更改第 159 行：

```
ids = [Relation::Public.instance.id] 
```

至

```
ids = [::Relation::Public.instance.id] 
```

一切正常。我不知道为什么我必须在这里明确指定使用全局范围。我仍然愿意接受解释或更好的答案。

# ios - 在 iOS 的滚动视图中创建自定义视图的问题

> ID：15567625
> 
> 赞同：0
> 
> 时间：2013-03-22T10:07:31.730
> 
> 标签：ios, objective-c, uiview

我在 in 中创建自定义视图时遇到`scrollview`问题`iOS`。屏幕上只添加了一张图像，这是最后一张地图，并且只添加了一个标题。其余的不出现。我需要有 4 个图像和 4 个文本。

我的自定义类称为`mapview`.

**我的自定义视图应如下所示：**

![在此处输入图像描述](../Images/c1d256ce2b0abcec2e98b92e4df52c8b.png)

这是在**ViewController.m中设置滚动视图的方式**

```
-(void)initialiseScreen
{

    NSArray *MapGalleryArray = [[Singleton sharedManager] getMapGalleryItems];
    int yOffset = 0;
    for (int counter=0; counter < [MapGalleryArray count]; counter++)
    {
        NSString *imageName = [NSString stringWithFormat:@"%@.JPG",[[MapGalleryArray objectAtIndex:counter] objectForKey:@"Image"]];
        UIImage *MapImage = [UIImage imageNamed:imageName];

        NSString *titletext = [NSString stringWithFormat:@"%@",[[MapGalleryArray objectAtIndex:counter] objectForKey:@"Title"]];

        MapView *map = [[MapView alloc] initWithImage:MapImage label:titletext];
        [MapScrollView addSubview:map];

        yOffset +=MapScrollView.frame.size.height/MapGalleryArray count];
    }
    [MapScrollView setContentSize:CGSizeMake(MapScrollView.frame.size.width, yOffset)];
} 
```

**地图视图.h**

```
 @interface MapView : UIView
    {
        UIButton    *mapViewButton;
        UILabel     *titeLabel;
    }

    @property(nonatomic,retain)     UIButton        *mapViewButton;
    @property(nonatomic,retain)     UILabel         *titleLabel;

    -(id)initWithImage:(UIImage*)image label:(NSString*)text; 
```

**地图视图.m**

```
-(id)initWithImage:(UIImage*)image label:(NSString*)text
{
    self = [super init];
    if (self) {

        self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, image.size.width/2, image.size.height/2);

        mapViewButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
        [mapViewButton setImage:image forState:UIControlStateNormal];
        [mapViewButton setImage:image forState:UIControlStateHighlighted];
        [mapViewButton addTarget:self action:@selector(ImageButtonClicked:) forControlEvents:UIControlEventTouchUpInside];

        titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, mapViewButton.frame.size.width+5, mapViewButton.frame.size.height)];
        [titleLabel setText:text];

        [self addSubview:mapViewButton];
        [self addSubview:titleLabel];
    }
    return self;
} 
```

需要一些指导，我在哪里做错了。抱歉，这是我第一次创建自定义视图。也欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:02:51.933

您在滚动视图的同一位置添加 MapView，这就是为什么您只能看到添加的最后一个视图。增加 MapView 的 x/y 并为您的滚动视图设置新的 contentSize。尝试跟随。

```
for (int counter=0; counter < [MapGalleryArray count]; counter++)
    {
        NSString *imageName = [NSString stringWithFormat:@"%@.JPG",[[MapGalleryArray objectAtIndex:counter] objectForKey:@"Image"]];
        UIImage *MapImage = [UIImage imageNamed:imageName];

        NSString *titletext = [NSString stringWithFormat:@"%@",[[MapGalleryArray objectAtIndex:counter] objectForKey:@"Title"]];

        //horizontal scroll view    
        MapView *map = [[MapView alloc] initWithImage:MapImage label:titletext];
        float width = map.frame.size.width;    
         [map setFrame:CGRectmake((width*counter)+5, //x ,
             map.frame.origin.y, //y
             map.frame.size.width, //width
            map.frame.size.height)]; //height

        [MapScrollView addSubview:map];

   MapScrollView.contentSize =CGSizeMake((width+5)*10,
                                          MapScrollView.frame.size.height
               );
        yOffset +=MapScrollView.frame.size.height;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:05:27.560

您的代码对 MapView.m 的框架设置有问题

尝试使用此代码...

**视图控制器.m**

```
-(void)initialiseScreen
{

    NSArray *MapGalleryArray = [[Singleton sharedManager] getMapGalleryItems];
    int yOffset = 0;
    int xOffset = 0;
    for (int counter=0; counter < [MapGalleryArray count]; counter++)
    {
        NSString *imageName = [NSString stringWithFormat:@"%@.JPG",[[MapGalleryArray objectAtIndex:counter] objectForKey:@"Image"]];
        UIImage *MapImage = [UIImage imageNamed:imageName];

        NSString *titletext = [NSString stringWithFormat:@"%@",[[MapGalleryArray objectAtIndex:counter] objectForKey:@"Title"]];
        CGPoint position = CGPointMake(xOffset, yOffset);
        MapView *map = [[MapView alloc] initWithImage:MapImage label:titletext andPoint:position];
        [MapScrollView addSubview:map];

        yOffset +=MapScrollView.frame.size.height/[MapGalleryArray count];
    }
    [MapScrollView setContentSize:CGSizeMake(MapScrollView.frame.size.width, yOffset)];
} 
```

**地图视图.h**

```
@interface MapView : UIView
    {
        UIButton    *mapViewButton;
        UILabel     *titeLabel;
    }

    @property(nonatomic,retain)     UIButton        *mapViewButton;
    @property(nonatomic,retain)     UILabel         *titleLabel;

    -(id)initWithImage:(UIImage*)image label:(NSString*)text andPoint:(CGPoint)point; 
```

**地图视图.m**

```
-(id)initWithImage:(UIImage*)image label:(NSString*)text andPoint:(CGPoint)point
{
    self = [super init];
    if (self) {

        self.frame = CGRectMake(point.x, point.y, image.size.width/2, image.size.height/2);

        mapViewButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
        [mapViewButton setImage:image forState:UIControlStateNormal];
        [mapViewButton setImage:image forState:UIControlStateHighlighted];
        [mapViewButton addTarget:self action:@selector(ImageButtonClicked:) forControlEvents:UIControlEventTouchUpInside];

        titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, mapViewButton.frame.size.width+5, mapViewButton.frame.size.height)];
        [titleLabel setText:text];

        [self addSubview:mapViewButton];
        [self addSubview:titleLabel];
    }
    return self;
} 
```

这将解决您的问题....

# python - 在 Python 3.3 中提供动态图像

> ID：15567626
> 
> 赞同：2
> 
> 时间：2013-03-22T10:07:32.700
> 
> 标签：python, python-3.x, http-headers, python-imaging-library

我正在尝试将 python（3.3 版）与 PIL 一起使用来为网页生成动态图像。我已经用 Image.show() 验证了我生成的图像的内容很好，但我无法格式化输出，以便浏览器正确显示它。

我当前的代码导致浏览器什么都不做（不报告错误或导航离开当前页面），但是终端输出对我来说似乎是正确的。

```
sys.stdout.write("Content-type: image/png\r\n\r\n")
img.save(sys.stdout.buffer, "PNG") 
```

我也尝试过使用 io.BytesIO() 对象，写入该对象然后打印它，但这会产生相同的结果并且终端输出似乎是相同的。

我不知道错误在哪里，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T00:34:38.950

看起来这是一个重复的问题：

[使用 PIL 在 Python/Web.Py 中提供动态图像的正确方法](https://stackoverflow.com/questions/14957599/correct-way-to-serve-a-dynamic-image-in-python-web-py-using-pil)

另外，请记住在 : 之前包含状态代码`Content-type`：

```
sys.stdout.write('Status: 200 OK\r\n') 
```

# java - 在 Windows 7 上信任 Java 7 的自签名证书

> ID：15567631
> 
> 赞同：1
> 
> 时间：2013-03-22T10:07:47.813
> 
> 标签：java, windows, ssl, ssl-certificate

我正在尝试使用 java 7（在 Windows 7 上）中的 HttpsURLConnection 连接到远程 Web 服务器并发送发布请求。除了它不信任证书（它是自签名的）之外，一切似乎都有效。

我已经通过 chrome 导出了证书，然后将证书导入到密钥库中：

```
keytool -import -file mysslcertificate.cer 
```

如果我运行，证书就在那里`keytool -list`。

当我在导入证书后尝试运行它（使用 gradle 或 eclipse）时，我得到了这个异常：

> javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径
> 
> 原因：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径
> 
> 原因：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

有人有任何提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:29:25.930

很可能，Java 没有使用您在其中导入证书的密钥库。要告诉 Java 在哪里可以找到密钥库，请使用以下命令行参数：

`java -Djavax.net.ssl.trustStore=<path to keystore file> -Djavax.net.ssl.trustStorePassword=<keystore password>`

Eclipse 和 Gradle 可能具有将密钥库位置转发到 Java 的特定设置。

也可以看看：

*   [Java 中的密钥库配置](https://stackoverflow.com/questions/5871279/java-ssl-and-cert-keystore)
*   [Eclipse 中的密钥库配置](https://stackoverflow.com/questions/663890/how-to-set-up-java-to-use-user-specific-certificates-for-eclipse)

# android - AppWidgetProvider 如何更改背景 onclick 按钮？

> ID：15567633
> 
> 赞同：1
> 
> 时间：2013-03-22T10:07:56.487
> 
> 标签：android, android-widget, appwidgetprovider

我有这个代码

```
public class SMWidget extends AppWidgetProvider {

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIDs) {
    RemoteViews views;      
        views = new RemoteViews(context.getPackageName(), R.layout.smw_layout);

        Intent intent1 = new Intent(context, Receiver.class);
        intent1.putExtra("intent", "1");
        PendingIntent fstpendingIntent = PendingIntent.getBroadcast(context, 0,intent1, 0);
        views.setOnClickPendingIntent(R.id.box1, fstpendingIntent);

        Intent intent2 = new Intent(context, Receiver.class);
        intent2.putExtra("intent", "2");
        PendingIntent sndpendingIntent = PendingIntent.getBroadcast(context, 1, intent2, 0);
        views.setOnClickPendingIntent(R.id.box2, sndpendingIntent);
                    for (int appWidgetID : appWidgetIDs) {
        appWidgetManager.updateAppWidget(appWidgetID, views);
    }
} 
```

我想改变一个按钮 onclicklisntener 的设计，我试试这个

```
Button btn1 = (Button) findViewById(R.id.box1); 
```

但它说“findViewById(int) 方法未定义”

请帮忙 ..

# java - xp_cmdshell 将proc存储在sql server中

> ID：15567634
> 
> 赞同：0
> 
> 时间：2013-03-22T10:08:01.017
> 
> 标签：java, sql

我已将服务器映射到 z：

因此，我尝试使用以下命令从 sql server 2005 中使用 xp_cmdshell 存储的过程断开此映射驱动器

```
exec sp_configure 'show advanced options', '1'
reconfigure
exec sp_configure 'xp_cmdshell','1'
reconfigure
exec xp_cmdshell 'net use z: /d /yes 
```

我面临一个错误

```
network connection could not be found 
```

但是，当我从命令提示符执行命令“net use z: /d /yes”时，它成功执行并且驱动器断开连接。

请告诉我“xp_cmd shell”存储过程有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:15:39.373

试试这个命令

```
net use z: /d /y 
```

你也可以试试这个

```
 NET USE [driveletter:] /DELETE /Y 
```

# c# - 字符串包含引号字符 (')

> ID：15567637
> 
> 赞同：3
> 
> 时间：2013-03-22T10:08:10.140
> 
> 标签：c#, .net, sql-server

我有一个用于 where 子句的字符串，但该字符串包含引号字符 (')

例子：

```
SELECT * FROM CsCustomer WHERE Name ='SA'MIR LUBIS' 
```

我从 sql server 得到错误。有什么建议么？

我用它将结果显示到表格单元格中

```
c = new TableCell();
c.Text = Db.SingleString("SELECT Unit FROM cscustomer WHERE Name='"+ r.Name +"'");
tr.Cells.Add(c); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T10:09:18.993

您应该使用参数化查询。您可以**转义**查询中的单引号`'`（另一个单引号）

由于问题已用 C# 标记，如果您使用串联构建查询，那么您一定会遇到此类错误。如果您**使用** [**SqlParameter**](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)会更好， 例如：

```
SqlCommand cmd = new SqlCommand("SELECT * FROM CsCustomer WHERE Name =@pName");
cmd.Parameters.Add("@pName", "SA'MIR LUBIS"); //or any GUI control 
```

这也将使您免于[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:09:25.910

如果它们不应该存在，您需要将它们加倍或删除它们。

```
SELECT * FROM CsCustomer WHERE Name ='SA''MIR LUBIS' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T10:11:23.987

看一下[SqlParameter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)类。这样做：

```
var command = new SqlCommand("SELECT * FROM CsCustomer WHERE Name = @name");
command.Parameters.Add("@name", "SA'MIR LUBIS"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T10:10:01.240

改用两个引号

```
SELECT * FROM CsCustomer WHERE Name ='SA''MIR LUBIS' 
```

另外我会建议[使用参数而不是字符串连接](http://wiki.lessthandot.com/index.php/Use_Parameters_Instead_of_String_Concatenation_for_Database_Queries_in_CSharp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T10:08:59.750

在文本中使用双引号 ('')

SELECT * FROM CsCustomer WHERE Name ='SA''MIR LUBIS'

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-22T10:13:07.023

您只需要转义单引号，如下所示：

```
SELECT * FROM CsCustomer WHERE Name ='SA''MIR LUBIS' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T10:09:22.790

像这样使用它：

```
"SELECT * FROM CsCustomer WHERE Name =\'SA\'MIR LUBIS\'" 
```

或者：

```
@"SELECT * FROM CsCustomer WHERE Name ='SA'MIR LUBIS'" 
```

# iphone - 当应用程序在后台时推送通知

> ID：15567639
> 
> 赞同：1
> 
> 时间：2013-03-22T10:08:20.580
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

假设一个场景：有 2 个用户用户 A 和用户 B。用户 A 向用户 B 发送推送通知，但当时应用程序在用户 B 的后台。现在的问题是用户 B 没有收到通知，因为应用程序在后台，但是一旦应用程序再次被购买到前台，就会收到通知。有什么方法可以让用户 B 也能在后台状态下获得通知。此外，如果用户在设备的设置应用程序中将应用程序的警报样式配置为“无”，这是否会阻止他在应用程序处于后台时接收通知。？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:17:57.960

如果用户禁用警报通知，他将不会收到此类警报。否则，即使应用程序未运行，他也会立即收到警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-03T06:00:40.003

我从你的问题中了解到你想在后台模式下收到通知时运行一些代码......

首先在您的目标菜单-> 功能-> 在后台模式[![在此处输入图像描述](../Images/bc17c1f7f2837f693c395f35f9d9d3f2.png)](https://i.stack.imgur.com/qvvrD.png)

然后在您的 AppDelegate 中，在应用程序处于后台模式时将触发的方法下添加您的代码

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
fetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler {} 
```

**但请记住最重要的事情**

您的推送通知结构必须包含**content_avialable = 1**

例子：

```
 {
    aps =     {
        alert =         {
            body = "new message";
            title = "I";
        };
        "content_available" = 1;
    };
    "click_action" = "GOTO_M";
    data =     {

    };
    "gcm.message_id" = ;
    "google.c.a.e" = 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:15:34.100

这就是推送通知的真正意义所在。如果您允许应用程序向您发送推送通知，即使应用程序在后台，您也会收到它们。我建议您阅读如何发送推送通知。

另一种选择是让应用程序本身显示通知，这仍然可以在应用程序处于后台时完成。

当他们将警报样式设置为无并关闭通知时，他们将不再收到推送通知。但是话又说回来，如果他们不想，他们不应该得到任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:16:33.657

对于你的第二个问题：

> 如果用户在设备的设置应用程序中将应用程序的警报样式配置为“无”，这是否会阻止他在应用程序处于后台时接收通知？

如果用户已将“无”设置为警报样式，则将收到通知但不显示。但是，用户仍然可以在通知中心看到该推送消息。那就是手机不会在屏幕上显示警报。

现在到您的第一个问题，即使应用程序在后台，当正确实施推送通知时也会收到。

# paypal - 580022 - 收款人所在的国家/地区无法接收付款

> ID：15567640
> 
> 赞同：3
> 
> 时间：2013-03-22T10:08:23.473
> 
> 标签：paypal, chained

我正在使用 PHP 制作一个众筹网站，我正在使用预先批准和链式支付。

我能够以编程方式创建和取消预先批准的付款就好了，但是当我尝试支付其中一个时，我收到错误：

580022 - 收款人所在的国家/地区无法接收付款

我有两个接收者，主要接收者获得 95% 的金额，并且是被质押项目的所有者。剩下的 5% 作为佣金给我。

两个接收者都有英国 PayPal 帐户，我正在沙盒中工作。

知道有什么问题吗？我希望这个功能可以在英国使用，否则我一路来都是白费的！

我正在使用此 API 进行付款：[https ://github.com/angelleye/paypal/](https://github.com/angelleye/paypal/)

这是发送到贝宝的生成的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<PayRequest xmlns="http://svcs.paypal.com/types/ap">
  <requestEnvelope xmlns="">
    <detailLevel>ReturnAll</detailLevel>
    <errorLanguage>en_US</errorLanguage>
  </requestEnvelope>
  <actionType xmlns="">PAY_PRIMARY</actionType>
  <cancelUrl xmlns="">http://89.238.152.7/funding/error/cancelled</cancelUrl>
  <clientDetails xmlns="">
    <applicationId xmlns="">APP-80W284485P519543T</applicationId>
    <customerId xmlns="">1</customerId>
    <ipAddress xmlns="">92.27.172.254</ipAddress>
    <partnerName xmlns="">The Funding Forum</partnerName>
  </clientDetails>
  <currencyCode xmlns="">GBP</currencyCode>
  <feesPayer xmlns="">EACHRECEIVER</feesPayer>
  <fundingConstraint xmlns="">
    <allowedFundingType xmlns="">
      <fundingTypeInfo xmlns="">
        <fundingType xmlns="">ECHECK</fundingType>
      </fundingTypeInfo>
      <fundingTypeInfo xmlns="">
        <fundingType xmlns="">BALANCE</fundingType>
      </fundingTypeInfo>
      <fundingTypeInfo xmlns="">
        <fundingType xmlns="">CREDITCARD</fundingType>
      </fundingTypeInfo>
    </allowedFundingType>
  </fundingConstraint>
  <ipnNotificationUrl xmlns="">http://89.238.152.7/paypal/ipn.php</ipnNotificationUrl>
  <preapprovalKey xmlns="">PA-8EE05998ST379664R</preapprovalKey>
  <receiverList xmlns="">
    <receiver xmlns="">
      <amount xmlns="">0.5</amount>
      <email xmlns="">james_1351605562_per@design365.co.uk</email>
      <paymentType xmlns="">GOODS</paymentType>
      <primary xmlns="">true</primary>
    </receiver>
    <receiver xmlns="">
      <amount xmlns="">0.02</amount>
      <email xmlns="">james_1351605505_biz@design365.co.uk</email>
      <paymentType xmlns="">GOODS</paymentType>
      <primary xmlns="">false</primary>
    </receiver>
  </receiverList>
  <sender>
    <useCredentials xmlns="">
  </useCredentials>
</sender>
  <account xmlns="">
    <email xmlns="">poeljames@gmail.com</email>
    <phone xmlns="">
  </phone>
</account>
  <returnUrl xmlns="">http://89.238.152.7/funding/success/return</returnUrl>
</PayRequest> 
```

任何人都可以帮忙吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:20:54.977

请在[新的贝宝系统已停止使用我的代码](https://stackoverflow.com/questions/15552292/new-paypal-system-has-stopped-working-with-my-code/15625919#15625919)
中查看我的答案 问题在于沙盒中的 AppID。我们正在努力解决这个问题。

编辑：这应该现在解决。如果您发现任何其他问题，请告诉我。

# jquery - 使用 jQuery 获取图像属性

> ID：15567643
> 
> 赞同：0
> 
> 时间：2013-03-22T10:08:27.673
> 
> 标签：jquery, html

我想用 jQuery 获取图像的 src 属性。在下面的代码中，如果我不在`div`or`li`等​​中包装图像，那么它可以正常工作，但是如果我更改 HTML 标记，它就不起作用：

**jQuery：**

```
function setNavi( $c, $i ) {
    var title = $i.attr( 'alt' );
    $('#title').text( title );

    var $prev = ($i.is(':first-child')) ? $c.children().last() : $i.prev();
    var prev_link = $prev.attr('src').split('/large/').join('/small/');
    alert(prev_link);       /* test image src */

    var $next = $i.next();
    var next_link = $next.attr('src').split('/large/').join('/small/');
    alert(next_link);   /* test image src */
}

$(function() {
    $("#carousel").carouFredSel({
        items: 1,
        prev: '#prev',
        next: '#next',

        scroll: {
            onBefore: function( data ) {
            setNavi( $(this), data.items.visible );
        }
        },
        onCreate: function( data ) {
            setNavi( $(this), data.items );
        }
    });
}); 
```

**这有效：**

```
<div id="wrap">
    <img src="img/img1.jpg" alt="Alt text" / >
</div> 
```

**这不起作用：** 如果我将图像包装在以下 html 中，它不起作用：

```
<div id="wrap">
<ul>
        <li>
            <div class="left">
                      <div class="image">
                          <img src="img/img1.jpg" alt="Alt text" / >
                       </div>
                 </div>
            <div class="right"><div class="text">some text</div></div>
        </li>
</ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:11:47.433

这是因为您正在使用`.next()`.

`.next`会发现该`next`元素并非`child`您需要使用的全部`.find`。

# c# - 重命名已发布库中的公共类

> ID：15567648
> 
> 赞同：0
> 
> 时间：2013-03-22T10:08:38.483
> 
> 标签：c#, dll, deprecated, backwards-compatibility

我有一个已发货的库（在内部，但仍在发货），我想重命名库中的公共类。

我想要的是一种方法来确保

*   客户端代码继续工作
*   客户端代码在使用类名的编译时收到弃用警告

*   有没有办法以某种方式给类起别名，这会表现出上述属性？

*   将来有什么方法可以避免这个问题（除了确保类的命名和拼写正确？）请注意，我想保留一个公共构造函数，因此使用接口不会解决我的所有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:25:03.757

您可以为该类提供任何公共别名，但您可以将所有公共属性、方法等转发给重命名类的私有实例，并使用过时属性装饰该类：

```
[Obsolete("Please use LatestGreatest instead.")]
public class OldSchool
{
    private LatestGreatest _Target;

    public OldSchool()
    {
        _Target = new LatestGreatest();
    }

    public void DoSomething()
    {
        _Target.DoSomething();
    }

    [Obsolete("Please use LatestGreatest.DoItInSomeOtherWay()")]
    public void DoTheOldWay()
    {
        _Target.DoItInSomeOtherWay();
    }
}

public class LatestGreatest
{
    public void DoSomething()
    {
        Console.WriteLine("I'm so fresh and cool.");
    }

    public void DoItInSomeOtherWay()
    {
        Console.WriteLine("Let's do it...");
    }
} 
```

根据旧班级公共方面的规模，这项工作可能非常乏味，但您无能为力。

# javascript - jQuery Mobile - 在 changePage 上设置目标页面的滚动位置

> ID：15567650
> 
> 赞同：0
> 
> 时间：2013-03-22T10:08:47.333
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我正在使用该`$.mobile.changePage()`方法在我的 jQuery Mobile 站点中从 Page1 导航到 Page2。

我想在特定的滚动位置显示 Page2。

目前，我可以让它工作的唯一方法是`$(window).scrollTop(this.scrollPosition)` 从`pageshow`该页面的事件中调用。

问题是当显示 Page2 时，它首先显示页面顶部大约一秒钟，然后滚动到正确的位置。

我希望能够在页面显示之前设置滚动位置，以便在过渡动画发生时页面处于正确的滚动位置。我尝试将滚动位置代码放入`pagebeforeshow`事件中，但这不起作用。

有没有办法可以轻松实现这一目标？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:30:06.467

# 介绍

在我描述您需要了解的可用解决方案之前，这不是错误，也没有完美的解决方案。问题是，要动画到另一个页面的过渡，视口必须位于页面的顶部，以便当前页面和过渡的页面垂直排列。

如果您在一个页面（例如 1000 像素）上的长列表中途而您要转移到的页面只有几百像素高，那么当前页面将正确地在屏幕上显示动画，但新页面将不会显示为它会在视口上方。

有2个可行的解决方案：

## iScroll 及其 jQuery Mobile 派生 iScrollview

iScroll 主页：[http ://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

iScrollview 主页：[https ://github.com/watusi/jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)

iScroll 是一种 javascript，它可以在 Web 浏览器的窗口中滚动内容，其行为与 iPhone 和 Android 等移动设备上的原生滚动非常相似。这意味着您可以使用类似本机的滚动条和物理在浏览器中滚动窗口。

这也是我们当前问题的解决方案。因为 iScroll 实现页面会占据 100% 的页面高度，不管 listview 滚动多远。这也是返回时 listview 仍将保持在同一位置的原因。

当然，如果你想实现这个解决方案，你应该选择 iScrollview 实现。您仍然可以实现 iScroll，但它会花费您更多的时间。

## 无声滚动

官方文档：http: [//jquerymobile.com/demos/1.1.0-rc.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/api/methods.html)

这个 jQuery Mobile 功能也是我们最初遇到这个问题的原因。在触发页面转换之前，原始页面会静默滚动到顶部。

在我们的例子中，当 listview 被选中时，必须记住它的位置（这里你会找到页面转换期间存储数据/参数的解决方案，只需搜索章节：页面转换之间的数据/参数操作）在页面更改之前。在这种情况下，当我们返回上一页时，我们可以使用 pagebefpreshow 事件在页面显示之前静默滚动到底部。

```
//scroll to Y 100px
$.mobile.silentScroll(100); 
```

这是一个无声滚动的工作示例：http: [//jsfiddle.net/Gajotres/2xfrM/](http://jsfiddle.net/Gajotres/2xfrM/)

不幸的是，就像在您的示例中一样，此解决方案仅适用于 pageshow。由于 jQM 架构，只能在 pageshow 事件期间执行此操作。

## 更多信息

如果您想了解有关此主题的更多信息，请查看**[本文](http://www.gajotres.net/prevent-scroll-to-the-top-before-page-transition-in-jquery-mobile/)**，您还将找到工作示例。

# ruby-on-rails-3.1 - 使用 ruby on rails 在 S3 和 EBS 之间传输文件

> ID：15567657
> 
> 赞同：-1
> 
> 时间：2013-03-22T10:09:13.710
> 
> 标签：ruby-on-rails-3.1, amazon-web-services, amazon-s3

如何使用 ruby​​ on rails 在 amazon s3 和 amazon EBS 之间移动文件？

通过阅读[这篇文章](http://aws.amazon.com/articles/Ruby/846) ，我认为这是可能的，有没有人看过一个很好的教程来说明如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:27:37.180

这是最简单的事情之一，以确保我猜您的 EBS 卷已附加到正在运行的 aws 实例。尝试 s3cmd 或 s3fs（仅从 google 项目 repo 派生）您将能够做到。

# c# - 如何使用 c# 从 asp.net 中的 gridview 编辑选项将所选值填充到 Checkboxlist 中？

> ID：15567660
> 
> 赞同：0
> 
> 时间：2013-03-22T10:09:22.477
> 
> 标签：c#, asp.net, checkboxlist

![在此处输入图像描述](../Images/708023181f37e761545a83d38e2ea02f.png)

请参考我运行 Web 应用程序时上传的图像。

现在我想编辑我从 gridview 中选择的值，并只用数据库中的选中项目填充给定的 checkboklist 控件。

例如，当我单击`edit`id 为 5 的项目时，它有 2 个值“黄色”和“棕色”，所以现在只应检查复选框列表控件中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:38:46.093

```
string colors = "Yellow,Brown";
        string[] col = colors.Split(',');
        foreach (ListItem lst in CheckBoxList1.Items)
        {
            for (int i = 0; i <= col.Length-1; i++)
            {
                if (lst.Text == col[i])
                {
                    lst.Selected = true;
                    break;
                }
            }
        } 
```

这`string colors`是包含逗号分隔值的字符串。

# asterisk - 设置 Asterisk IVR on out call

> ID：15567665
> 
> 赞同：1
> 
> 时间：2013-03-22T10:09:26.953
> 
> 标签：asterisk, ivr, agi

我正在使用星号上的 IVR 系统进行通话创建 agi 并按预期正常工作，现在的问题是我无法做一件事，即当我从 AMI（Asterisk 管理器界面）拨打电话并且**接收者接听电话时和 ivr 开始**询问菜单，这是我无法做到的，需要帮助。

我必须在接听电话后运行 IVR。

使用星号 11。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:58:50.977

现在你已经阅读了任何星号书。只是为了了解如何为您的 ivr 创建拨号方案。

# c# - 将可见性绑定到 DependencyProperty

> ID：15567666
> 
> 赞同：0
> 
> 时间：2013-03-22T10:09:31.367
> 
> 标签：c#, wpf, xaml, user-controls

我有一个依赖属性，允许我在`UserControl`. 我没有编译错误，但关闭按钮永远不会随着以下代码消失，我错过了什么？

调用使用：

```
<Toolkit:UC_TitleBar ShowCloseButton="False"/> 
```

.cs 代码

```
public static readonly DependencyProperty ShowCloseButtonProperty = 
    DependencyProperty.Register("ShowCloseButton", 
    typeof(Boolean), 
    typeof(UC_TitleBar), 
    new FrameworkPropertyMetadata(false));

public bool ShowCloseButton
{
    get { return (bool)GetValue(ShowCloseButtonProperty); }
    set { SetValue(ShowCloseButtonProperty, value); }
} 
```

用户控件中的 XAML：

```
<UserControl ... x:Name="ucTitleBar">
<UserControl.Resources>
    <ResourceDictionary>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
    </ResourceDictionary>
</UserControl.Resources>

<Button Visibility="{Binding Path=ShowCloseButton, ElementName=ucTitleBar, Converter={StaticResource BoolToVis}}" x:Name="Button_Close"/> 
```

如果我在构造函数中手动设置`ShowCloseButton`为 false，它会像您期望的那样消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:25:51.660

我认为你必须使用元素名称绑定，如下所示。

```
<Button Visibility="{Binding ElementName=userControl1,Path=ShowCloseButton, Mode=TwoWay, Converter={StaticResource BoolToVis}}" x:Name="Button_Close"/> 
```

如果这不适合您，请与我们分享您的代码。

# android - 从内置的 Android 字典中选择随机单词

> ID：15567667
> 
> 赞同：3
> 
> 时间：2013-03-22T10:09:37.943
> 
> 标签：android, random, dictionary, word

由于 Android 在键入时建议单词，这表明系统中的所有字典单词都可用。我想从这个现有的单词列表中选择一个随机单词。

我已经谷歌了它并在stackoverflow上搜索了它。我还在 android-sdk\samples\android-14\SearchableDictionary\src\com\example\android\searchabledict 上看到了示例代码，它告诉如何创建一个`ContentProvider`并访问它来搜索单词。

另一种解决方案是创建一个带有单词的文本文件并访问它，但随后应用程序的大小变得更大。

如果我可以访问现有列表，那么大小会更小。

如果您可以将我重定向到一些教程或代码，这将有很大帮助

提前致谢。

# jquery - jQuery if/else 查看/隐藏图层

> ID：15567669
> 
> 赞同：0
> 
> 时间：2013-03-22T10:09:44.873
> 
> 标签：jquery, if-statement, width, visibility, adobe-edge

我正在边缘动画中制作一个响应式网站滑动条，并且我为 1 张幻灯片制作了 2 张幻灯片（因此他们可以负责任地调整）。如果窗口宽度低于 786 像素，我希望第二张幻灯片显示，如果高于 786 像素，我希望显示第一张幻灯片。这是我使用的代码：

```
var n = $(window).width();
if (n > 768) {
    // Show an Element.
    //  (sym.$("name") resolves an Edge Animate element name to a DOM
    //  element that can be used with jQuery)
    sym.$("#panel_01_photo").show();
    // Hide an Element.
    //  (sym.$("name") resolves an Edge Animate element name to a DOM
    //  element that can be used with jQuery)
    sym.$("#panel_02_photo").hide();
}
else {
    // Show an Element.
    //  (sym.$("name") resolves an Edge Animate element name to a DOM
    //  element that can be used with jQuery)
    sym.$("#panel_02_photo").show();
    // Hide an Element.
    //  (sym.$("name") resolves an Edge Animate element name to a DOM
    //  element that can be used with jQuery)
    sym.$("#panel_01_photo").hide();
} 
```

由于某种原因，它不起作用。感谢任何帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:27:16.070

```
$(window).on('resize', function() {
    var n = $(window).width();
    sym.$("#panel_01_photo").toggle(n > 768);
    sym.$("#panel_02_photo").toggle(n < 768);
}); 
```

# c# - 无法清除 ASP:Repeater 的项目

> ID：15567682
> 
> 赞同：3
> 
> 时间：2013-03-22T10:10:16.347
> 
> 标签：c#, asp.net, repeater

这就是我启动 ASP:Repeater 的方式：

```
var taskItemsList = new List<Task>(); 

taskItemsList = GenerateActiveList(); //generates 6 items
_taskItemsListSorted = from Task in taskItemsList
                       orderby Task.AssignedTo ascending , Task.DueDateTicks ascending
                       select Task;
taskRepeater.DataSource = _taskItemsListSorted;
taskRepeater.DataBind(); 
```

这就是我尝试让同一个中继器显示不同列表的方式（当用户单击按钮时，此代码运行）：

```
taskRepeater.DataSource = null; taskRepeater.DataBind();

var taskItemsList = new List<Task>(); 

taskItemsList = GenerateInactiveList(); //generates 5 items
_taskItemsListSorted = from Task in taskItemsList
                       orderby Task.AssignedTo ascending , Task.DueDateTicks ascending
                       select Task;
taskRepeater.DataSource = _taskItemsListSorted;
taskRepeater.DataBind(); 
```

（请注意，在第二个代码部分中，使用了一个新函数来生成不同的列表。）

问题是Repeater 控件似乎仍然包含第一个代码部分中的项目。

第 2 节中的最后一个操作 taskRepeater.DataBind(); 使 ItemDataBound 函数触发 11 次，这表明最初生成的列表项仍以某种方式包含在转发器中。

关于我哪里出错的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T11:26:06.463

您遇到的唯一问题是 OnClick 事件正在启动，执行您想做的事情，但之后页面 OnLoad 正在启动并将内容替换为原始页面。要解决这个问题，只需在 OnLoad 页面上执行此操作：

```
if (!IsPostBack)
    // Bind the repeater 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:28:23.880

在调用第 2 节代码之前，只需执行此操作，

```
 DataTable dt = new DataTable();
    taskRepeater.DataSource = dt;
    taskRepeater.DataBind(); 
```

# php - ${/*var in here*/} 做了什么。我在任何地方都找不到任何结果

> ID：15567685
> 
> 赞同：3
> 
> 时间：2013-03-22T10:10:23.000
> 
> 标签：php

这是一个非常愚蠢的问题，但对于我的生活，我无法弄清楚我们的作用。根据过去的经验，如果您不知道，请询问或永远保持愚蠢的代码，例如

```
foreach( $arr as $key => $val ) {
    ${$key.'Count'} = 0;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:14:05.787

它是一个[变量变量](http://php.net/manual/en/language.variables.variable.php)。大括号内的结果字符串用作变量的名称。因此，如果您有以下情况：

```
$arr = array('foo' => 'bar');

foreach( $arr as $key => $val ) {
    ${$key.'Count'} = 0;
} 
```

现在将有一个变量`$fooCount`，其值为`0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:16:04.523

花括号用于显式设置变量名的结尾。

在您的特定情况下，变量名称是动态创建的：

```
${$key.'Count'} // $myKeyCount 
```

它还可用于指定非动态命名变量的结尾：

```
echo "My string has {$example}00.00 things"; // where I write out a value 100 times bigger 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:12:20.760

简单的回答：

你可以用一个变量名设置一个var

```
$varName = 'test'
${$varName}  = "Hello world!";
echo $test; 
```

将会呈现

```
 Hello world! 
```

# pentaho - Pentaho Adhoc 报告 - 允许用户访问有限的数据

> ID：15567686
> 
> 赞同：1
> 
> 时间：2013-03-22T10:10:24.610
> 
> 标签：pentaho

我创建了一组元数据对象并将其公开给一组用户以创建临时报告。用户可以使用元数据对象并创建自己的报告。

但是，问题是 - 对象对应于过去 5 年具有数百万条记录的表。我希望业务用户只能访问最近 6 个月的数据，这样他们的报告就不会被过多的数据淹没。同时，我的数据库和应用服务器也不会因为负载过大而受到影响。

如何才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:57:38.793

我很确定您可以使用行级安全性来做到这一点，但您必须阅读它：

[http://wiki.pentaho.com/display/ServerDoc1x/06.+Adding+Row+Level+Security+to+a+Pentaho+Metadata+Model](http://wiki.pentaho.com/display/ServerDoc1x/06.+Adding+Row+Level+Security+to+a+Pentaho+Metadata+Model)

您应该能够添加一个条款，将日期字段限制在 6 个月内。我相信 6 个月的代码需要是一个 libformula 代码。

最新版本具有适当的限制功能，可能会有所帮助。但那是 PIR，你在用吗？如果没有，请查看 Saiku Adhoc 是否支持此功能。

# utf-8 - 法语字符的字符编码问题

> ID：15567687
> 
> 赞同：2
> 
> 时间：2013-03-22T10:10:25.237
> 
> 标签：utf-8, character-encoding, xhtml, iso-8859-15

在 Web 应用程序中，有一个具有以下编码的 HTML 页面：

```
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta content="en" http-equiv="Content-language">
<meta content="text/html; charset=UTF-8" http-equiv="Content-type"> 
```

实际发生的事情是在这个页面上我试图显示一个肥皂请求的结果。为了响应这个肥皂请求，我得到以下代码：

```
&#232;&#233;&#224;&#249;&#236;&#231;&#242; 
```

对于以下字符：

```
 èéàùìçò 
```

令人惊讶的是，除了页面编码是 UTF-8 之外，这些字符在 HTML 页面上正确显示如下：

```
èéàùìçò instead of ������� 
```

我无法理解这些代码如何正确转换为 UTF-8 格式，因为这些代码属于 ISO-8859-15。知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:19:51.457

诸如此类的字符引用`&#232;`具有基于字符的 Unicode 编号的含义，完全独立于页面的字符编码。这一直是 HTML 的原则，只有非常早期的浏览器有时会出错。这是使用字符引用的主要好处之一。

Unicode 中的前 256 个代码位置与 ISO-8859-1 代码位置相同，而 ISO-8859-15 代码位置又与 ISO-8859-15 代码位置相同，除了几个字符（不包括您的示例中的字符）。

# java - 在 Windows/Linux/OSX 上提取完整文件名

> ID：15567693
> 
> 赞同：0
> 
> 时间：2013-03-22T10:10:52.250
> 
> 标签：java, regex

我正在尝试修改以下代码：

```
 String[] sarr = (new String("a\\b\\c\\d.jar")).split("[(/)|(\\)]");
 System.out.println(sarr[sarr.length-1]); 
```

这样新字符串就可以是任何系统上 jar 文件的任何路径。使用 perl 正则表达式我会很容易地做到这一点，但使用 Java 正则表达式我没有得到想要的结果。我怎样才能做到这一点？我需要得到 d.jar。

我看到了许多不同的帖子，但它们都是具体的，而不是笼统的，或者不像我需要的那样。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:22:15.513

Java 字符串字面`"[(/)|(\\)]"`量表示正则表达式`[(/)|(\)]`，它是一个字符类，可以匹配任何单个,`(`或字符。相反，您可能需要正则表达式（匹配单个正斜杠或反斜杠），这反过来意味着作为 Java 字符串文字。`/``|``)``[/\\]``"[/\\\\]"`

```
str.split("[/\\\\]"); 
```

或者，如果您知道您将始终处理您当时正在运行的系统的本机路径（即`C:\Users\something`在 Windows 上运行时以及`/home/user`在 Linux/Mac/等上运行时），那么您可以使用`java.io.File`该类：

```
File f = new File(fullPath);
String name = f.getName(); 
```

`getName()`只返回姓氏组件，还有`getPath()`返回存储在`File`对象中的完整路径字符串（可能是相对路径）和`getAbsolutePath()`返回绝对路径（就像`getPath()`这已经是绝对路径一样，或者`getPath()`以当前工作目录为前缀如果是相对的）。

但是，如果您可能在类 Unix 系统上处理 Windows 路径，反之亦然，那么您将不得不坚持自己进行字符串操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:35:30.057

不要使用正则表达式或任何其他字符串解析机制，而是使用`java.io.File`. 它提供了很多方法，用来获取文件名`File.getName()`：

```
String file_name = new File("a\\b\\c\\d.jar").getName();
System.out.println(file_name); 
```

输出：

> d.jar

# java - 当我的应用程序收到 Intent 时，如何向 Dashclock 发布更新？

> ID：15567702
> 
> 赞同：1
> 
> 时间：2013-03-22T10:11:11.447
> 
> 标签：java, android, android-intent, dashclock

稍后我在课堂上使用 Android 的`addProximityAlert`方法添加了位置接近度`LocationManager`。

当用户的电话是特定区域时，将向我的应用程序`LocationManager`发送一个，这里是处理意图的类：`Intent``BroadcastReciver`

```
public class ProximityTrigger extends BroadcastReceiver {

    @Override
    public void onReceive(Context ctxContext, Intent ittIntent) {            
        System.out.println(ittIntent.getIntExtra(WidgetService.KEY_STOP_IDENTIFIER, -1));               
    }

} 
```

发生这种情况时，我想使用 DashClock API 来显示更新。DashClock 有一个[`publishUpdate`](http://api.dashclock.googlecode.com/git/reference/com/google/android/apps/dashclock/api/DashClockExtension.html#publishUpdate%28com.google.android.apps.dashclock.api.ExtensionData%29)可用于显示更新的方法，但我只能从扩展该类的扩展类中使用它[`DashClock`](http://api.dashclock.googlecode.com/git/reference/com/google/android/apps/dashclock/api/DashClockExtension.html)。这应该是可能的，但我似乎无法弄清楚如何。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T13:27:44.990

由于扩展服务必须发出[publishUpdate](http://api.dashclock.googlecode.com/git/reference/com/google/android/apps/dashclock/api/DashClockExtension.html#publishUpdate(com.google.android.apps.dashclock.api.ExtensionData))调用，因此您的邻近触发广播接收器应该使用**广播或事件总线**之类的东西来请求扩展发布更新。

如果扩展未初始化，这意味着用户尚未添加它或 DashClock 未运行，则不会发生任何事情，这是预期的正确行为。一旦 DashClock 启动并添加了您的扩展程序，就会调用[onUpdateData](http://api.dashclock.googlecode.com/git/reference/com/google/android/apps/dashclock/api/DashClockExtension.html#onUpdateData(int))并且您将能够发布您的更新。

有关您可以使用的实际类的一些想法，请参见下文：

*   **全局广播**，使用[Context.sendBroadcast](https://developer.android.com/reference/android/content/Context.html#sendBroadcast(android.content.Intent))以及在您`DashClockExtension`使用[Context.registerReceiver](https://developer.android.com/reference/android/content/Context.html#registerReceiver(android.content.BroadcastReceiver,%20android.content.IntentFilter))中动态注册的广播接收器。

*   **本地广播**，使用[LocalBroadcastManager](https://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)。

*   **[Otto](http://square.github.com/otto/)或[EventBus](https://github.com/greenrobot/EventBus)**，这两个框架让应用程序组件发布和订阅事件。在这种情况下，扩展订阅并且您的接近传感器发布。

全球广播的完整代码片段可以在DashClock 项目页面的第[292期中找到。](https://code.google.com/p/dashclock/issues/detail?id=292)

# android - 进入 ListNavigation 点击 操作栏

> ID：15567704
> 
> 赞同：1
> 
> 时间：2013-03-22T10:11:15.460
> 
> 标签：android, list, actionbarsherlock

我的操作栏夏洛克有一个列表。我想在用户单击该列表时得到。我不想知道用户何时单击某个项目，我已经知道（onNavigationItemSelected）。

在我的 onCreate() 中：

```
// Set action bar
final ActionBar actionBar = getSherlockActivity().getSupportActionBar();
if (actionBar.getNavigationMode() != ActionBar.NAVIGATION_MODE_LIST) {
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
}
actionBar.setDisplayShowTitleEnabled(false);
mSelectionAdapter = new SelectionAdapter(getSherlockActivity().getSupportActionBar().getThemedContext(), R.layout.sherlock_spinner_dropdown_item, kinds);
actionBar.setListNavigationCallbacks(mSelectionAdapter, this); 
```

当用户单击操作栏中的列表导航时，我想以编程方式进行检测。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:42:35.300

如果您只想在单击列表菜单等操作栏项时收到通知，则必须`onMenuItemSelected`按如下方式覆盖：

```
 @Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {
int itemId = item.getItemId();
//using logcat you may see what the list item id is?
 Log.i(TAG, "clicked actionbar itemid is: " + itemId );

//here you can setup a listener for every actionbar item selected
    switch (itemId) {
//android.R.id.list might not be the one you are searching pls check it out and compare it to logcat and put the appropriate itemId here
    case android.R.id.list:
//do whatever you want to do when list item is clicked
        break;
    }

    return true;
} 
```

# ios - Objective-C中日期的GMT偏移量

> ID：15567706
> 
> 赞同：1
> 
> 时间：2013-03-22T10:11:18.083
> 
> 标签：ios, objective-c, datetime, timezone, timezone-offset

我只需要日期的 GMT 偏移量。我正在使用这种方法

```
double numberOfHours = (double)[timeZone secondsFromGMTForDate:date]/ 3600.0; 
```

实际上在柏林，德国 DST 将在 2013 年 3 月 31 日开启，时间将在凌晨 2:00 更改。问题是我只想使用日期来偏移 GMT。如果日期 = 31-3-2013 00:00:00，则返回 +1。它在 31-3-2013 02:00:00 之后返回 +2。有没有什么方法/方式可以在不使用时间组件的情况下获得时区偏移量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:15:49.227

将约会的时间更改为中​​午并进行测试怎么样？

但是不，没有任何时间组件，日期将默认为午夜，您将获得 +1 的（**正确的**）结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:21:40.933

您可能可以将`NSDateFormatter`与自定义日期格式一起使用，例如`@"zzz"`，它将返回给定的时区偏移量`NSDate`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T08:06:09.853

如果您想避免使用时间组件。你可以使用这些方法

`nextDaylightSavingTimeTransition`和`daylightSavingTimeOffsetForDate:NSDate`

类`NSTimeZone`。

# java - 优雅关闭执行本机代码的线程

> ID：15567712
> 
> 赞同：2
> 
> 时间：2013-03-22T10:11:27.993
> 
> 标签：java, multithreading, native, macos-carbon

在我的应用程序中，我有一个`ExecutorService`固定大小的`1`.

现在线程调用一些本机代码。在本机方法内部，它被阻塞并等待需要调度的操作系统事件。问题在于`ExecutorService`.

如果我中断线程，那么线程仍然没有出来（显然）。如果我将线程设置为`daemon`. 它仍然不会让 JVM 关闭。我唯一的工作代码是使用`System.exit`它，显然我不打算使用它。还有其他出路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:50:27.490

错误在于没有返回的本机代码，真的。据我所知，通过更高级别的 java 进行此操作的唯一方法是使用线程 - 由于[几个原因](http://docs.oracle.com/javase/6/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)[`stop()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#stop%28%29)，该线程已被弃用。

为此，您需要重新设计以使用老式的`Thread`而不是`ExecutorService`. 您也可以这样做，因为大小固定为 1，因此`ExecutorService`不会给您带来很多好处。`stop()`据我从您的问题中看到的，如果您在线程中不保留任何锁，这似乎是一个可行的选择`stop()`。

编辑：

根据[Apple 的开发人员指南](http://developer.apple.com/legacy/mac/library/documentation/Carbon/Conceptual/Carbon_Event_Manager/CarbonEvents.pdf)（第 47 页），您可以`EventTimeout`在调用时指定`ReceiveNextEvent`：

> ReceiveNextEvent 运行低级事件循环，将发生的事件放入事件队列中。当您指定的事件发生**或超过指定的超时**时，该函数返回。
> 
> ```
> OSStatus ReceiveNextEvent(
> UInt32 inNumTypes,
> const EventTypeSpec *inList,
> EventTimeout inTimeout,
> Boolean inPullEvent,
> EventRef *outEvent); 
> ```

因此，如果我理解正确，在调用本机代码时设置超时将为您解决问题。

# c# - Windows Phone 8 - 导航错误

> ID：15567714
> 
> 赞同：1
> 
> 时间：2013-03-22T10:11:34.603
> 
> 标签：c#, navigation, windows-phone, isolatedstorage

我有一个文件在`IsolatedStorage`. 如果文件存在，我想重定向到登录页面或创建帐户页面。

如果该文件不存在，则应用程序转到创建页面，创建并保存密码，然后应用程序重定向到登录页面。但是，如果 IsolatedStorage 中的文件存在，则不会定向。

```
private void fileExists()
        {
            IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication();
            if (store.FileExists("passwordFile"))
            {
                //NavigationService.Navigate(new Uri("/Login.xaml", UriKind.Relative));
                MessageBox.Show("Should be redirecting here");
            }

            else
            {
                MessageBox.Show("Welcome. Please create an account. Ensure that you remember your password!");
            }
        } 
```

实际消息确实显示，因此它被调用，如果文件不存在，则执行 else，因此我的逻辑是合理的。

`FileExists()`函数在这里被调用。

```
public MainPage()
        {
            InitializeComponent();
            fileExists();
        } 
```

另一个重定向发生在这里

```
if ((password1.Password == password2.Password) & (password1.Password.Trim().Length > 0 || password2.Password.Trim().Length > 0))
            {
                byte[] PasswordByte = Encoding.UTF8.GetBytes(password1.Password);
                byte[] ProtectedPassword = ProtectedData.Protect(PasswordByte, null);
                this.WritePasswordToFile(ProtectedPassword);

                NavigationService.Navigate(new Uri("/Login.xaml", UriKind.Relative));
            } 
```

错误是一个`System.NullReferenceException`但未在用户代码中处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:49:33.303

问题是`NavigationService`仍然为空，您可以通过在重定向行上放置一个断点来验证这一点，将相同的代码放入`MainPage.Loaded`事件中，然后它会起作用，（我希望它会起作用）

正如我所料，这只是一个重定向页面，您可以在初始化中检查文件并保存 uri 以在类中重定向并在页面加载时重定向

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:36:46.387

是否尝试在 MainPage 加载时调用文件存在检查？即使它正在执行，这也可能是存储准备问题。其次，如果您可以提及确切的异常发生在哪里。还要检查这个可能对你有帮助的[链接。](https://stackoverflow.com/questions/12427601/nullreferenceexception-when-using-navigationservice)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:57:33.570

我需要将 fileExists() 从构造函数移动到一个新函数。

```
protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            base.OnNavigatedTo(e);
            fileExists();
        } 
```

# php - 如何在 Magento 仪表板图中显示挂单

> ID：15567716
> 
> 赞同：2
> 
> 时间：2013-03-22T10:11:37.543
> 
> 标签：php, mysql, magento, magento-1.7

自从从 1.4 升级到 1.7 后，我的 magento 应用程序不再像以前那样在图表中显示挂单数量和价值。

经过一番搜索，我认为它仅显示自 1.6 以来的“处理中”（已开票的订单）或“完成”订单。我意识到这在大多数情况下都是有意义的，但不幸的是，我的公司不通过 magento 处理订单——它们是通过电子邮件发送并在与 magento 平台没有任何连接的本地 ERP 上处理的。

营销部门一直在骚扰我，他们发现这张图表很有用，他们希望它恢复原来的样子。不过，我似乎无法弄清楚核心代码发生了什么变化。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-24T01:25:39.717

我们的结论是这个文件回答了问题。

```
<?php

class Mage_Reports_Model_Resource_Order_Collection extends Mage_Sales_Model_Resource_Order_Collection
{
    /**
     * Is live
     *
     * @var boolean
     */
    protected $_isLive   = false;

    /**
     * Check range for live mode
     *
     * @param unknown_type $range
     * @return Mage_Reports_Model_Resource_Order_Collection
     */
    public function checkIsLive($range)
    {
        $this->_isLive = (bool)!Mage::getStoreConfig('sales/dashboard/use_aggregated_data');
        return $this;
    }

    /**
     * Retrieve is live flag for rep
     *
     * @return boolean
     */
    public function isLive()
    {
        return $this->_isLive;
    }

    public function prepareSummary($range, $customStart, $customEnd, $isFilter = 0)
    {
        $this->checkIsLive($range);
        if ($this->_isLive) {
            $this->_prepareSummaryLive($range, $customStart, $customEnd, $isFilter);
        } else {
            $this->_prepareSummaryAggregated($range, $customStart, $customEnd, $isFilter);
        }

        return $this;
    }

    protected function _prepareSummaryLive($range, $customStart, $customEnd, $isFilter = 0)
    {
        $this->setMainTable('sales/order');
        $adapter = $this->getConnection();

        /**
         * Reset all columns, because result will group only by 'created_at' field
         */
        $this->getSelect()->reset(Zend_Db_Select::COLUMNS);

        $expression = sprintf('%s - %s - %s - (%s - %s - %s)',
            $adapter->getIfNullSql('main_table.base_total_invoiced', 'main_table.base_grand_total'),
            $adapter->getIfNullSql('main_table.base_tax_invoiced', 'main_table.base_tax_amount'),
            $adapter->getIfNullSql('main_table.base_shipping_invoiced', 'main_table.base_shipping_amount'),
            $adapter->getIfNullSql('main_table.base_total_refunded', 0),
            $adapter->getIfNullSql('main_table.base_tax_refunded', 0),
            $adapter->getIfNullSql('main_table.base_shipping_refunded', 0)
        );
        if ($isFilter == 0) {
            $this->getSelect()->columns(array(
                'revenue' => new Zend_Db_Expr(
                    sprintf('SUM((%s) * %s)', $expression,
                        $adapter->getIfNullSql('main_table.base_to_global_rate', 0)
                    )
                )
            ));
        } else {
            $this->getSelect()->columns(array(
                'revenue' => new Zend_Db_Expr(sprintf('SUM(%s)', $expression))
            ));
        }

        $dateRange = $this->getDateRange($range, $customStart, $customEnd);

        $tzRangeOffsetExpression = $this->_getTZRangeOffsetExpression(
            $range, 'created_at', $dateRange['from'], $dateRange['to']
        );

        $this->getSelect()
            ->columns(array(
                'quantity' => 'COUNT(main_table.entity_id)',
                'range' => $tzRangeOffsetExpression,
            ))
            ->where('main_table.state NOT IN (?)', array(
                    Mage_Sales_Model_Order::STATE_HOLDED,
                    Mage_Sales_Model_Order::STATE_CANCELED)
            )
            ->order('range', Zend_Db_Select::SQL_ASC)
            ->group($tzRangeOffsetExpression);

        $this->addFieldToFilter('created_at', $dateRange);

        return $this;
    }

    protected function _prepareSummaryAggregated($range, $customStart, $customEnd)
    {
        $this->setMainTable('sales/order_aggregated_created');
        /**
         * Reset all columns, because result will group only by 'created_at' field
         */
        $this->getSelect()->reset(Zend_Db_Select::COLUMNS);
        $rangePeriod = $this->_getRangeExpressionForAttribute($range, 'main_table.period');

        $tableName = $this->getConnection()->quoteIdentifier('main_table.period');
        $rangePeriod2 = str_replace($tableName, "MIN($tableName)", $rangePeriod);

        $this->getSelect()->columns(array(
            'revenue'  => 'SUM(main_table.total_revenue_amount)',
            'quantity' => 'SUM(main_table.orders_count)',
            'range' => $rangePeriod2,
        ))
            ->order('range')
            ->group($rangePeriod);

        $this->getSelect()->where(
            $this->_getConditionSql('main_table.period', $this->getDateRange($range, $customStart, $customEnd))
        );

        $statuses = Mage::getSingleton('sales/config')
            ->getOrderStatusesForState(Mage_Sales_Model_Order::STATE_CANCELED);

        if (empty($statuses)) {
            $statuses = array(0);
        }
        $this->addFieldToFilter('main_table.order_status', array('nin' => $statuses));

        return $this;
    }

    protected function _getRangeExpression($range)
    {
        switch ($range)
        {
            case '24h':
                $expression = $this->getConnection()->getConcatSql(array(
                    $this->getConnection()->getDateFormatSql('{{attribute}}', '%Y-%m-%d %H:'),
                    $this->getConnection()->quote('00')
                ));
                break;
            case '7d':
            case '1m':
                $expression = $this->getConnection()->getDateFormatSql('{{attribute}}', '%Y-%m-%d');
                break;
            case '1y':
            case '2y':
            case 'custom':
            default:
                $expression = $this->getConnection()->getDateFormatSql('{{attribute}}', '%Y-%m');
                break;
        }

        return $expression;
    }

    protected function _getRangeExpressionForAttribute($range, $attribute)
    {
        $expression = $this->_getRangeExpression($range);
        return str_replace('{{attribute}}', $this->getConnection()->quoteIdentifier($attribute), $expression);
    }

    protected function _getTZRangeOffsetExpression($range, $attribute, $from = null, $to = null)
    {
        return str_replace(
            '{{attribute}}',
            Mage::getResourceModel('sales/report_order')
                ->getStoreTZOffsetQuery($this->getMainTable(), $attribute, $from, $to),
            $this->_getRangeExpression($range)
        );
    }

    protected function _getTZRangeExpressionForAttribute($range, $attribute, $tzFrom = '+00:00', $tzTo = null)
    {
        if (null == $tzTo) {
            $tzTo = Mage::app()->getLocale()->storeDate()->toString(Zend_Date::GMT_DIFF_SEP);
        }
        $adapter = $this->getConnection();
        $expression = $this->_getRangeExpression($range);
        $attribute  = $adapter->quoteIdentifier($attribute);
        $periodExpr = $adapter->getDateAddSql($attribute, $tzTo, Varien_Db_Adapter_Interface::INTERVAL_HOUR);

        return str_replace('{{attribute}}', $periodExpr, $expression);
    }

    public function getDateRange($range, $customStart, $customEnd, $returnObjects = false)
    {
        $dateEnd   = Mage::app()->getLocale()->date();
        $dateStart = clone $dateEnd;

        // go to the end of a day
        $dateEnd->setHour(23);
        $dateEnd->setMinute(59);
        $dateEnd->setSecond(59);

        $dateStart->setHour(0);
        $dateStart->setMinute(0);
        $dateStart->setSecond(0);

        switch ($range)
        {
            case '24h':
                $dateEnd = Mage::app()->getLocale()->date();
                $dateEnd->addHour(1);
                $dateStart = clone $dateEnd;
                $dateStart->subDay(1);
                break;

            case '7d':
                // substract 6 days we need to include
                // only today and not hte last one from range
                $dateStart->subDay(6);
                break;

            case '1m':
                $dateStart->setDay(Mage::getStoreConfig('reports/dashboard/mtd_start'));
                break;

            case 'custom':
                $dateStart = $customStart ? $customStart : $dateEnd;
                $dateEnd   = $customEnd ? $customEnd : $dateEnd;
                break;

            case '1y':
            case '2y':
                $startMonthDay = explode(',', Mage::getStoreConfig('reports/dashboard/ytd_start'));
                $startMonth = isset($startMonthDay[0]) ? (int)$startMonthDay[0] : 1;
                $startDay = isset($startMonthDay[1]) ? (int)$startMonthDay[1] : 1;
                $dateStart->setMonth($startMonth);
                $dateStart->setDay($startDay);
                if ($range == '2y') {
                    $dateStart->subYear(1);
                }
                break;
        }

        $dateStart->setTimezone('Etc/UTC');
        $dateEnd->setTimezone('Etc/UTC');

        if ($returnObjects) {
            return array($dateStart, $dateEnd);
        } else {
            return array('from' => $dateStart, 'to' => $dateEnd, 'datetime' => true);
        }
    }

    public function addItemCountExpr()
    {
        $this->getSelect()->columns(array('items_count' => 'total_item_count'), 'main_table');
        return $this;
    }

    public function calculateTotals($isFilter = 0)
    {
        if ($this->isLive()) {
            $this->_calculateTotalsLive($isFilter);
        } else {
            $this->_calculateTotalsAggregated($isFilter);
        }

        return $this;
    }

    protected function _calculateTotalsLive($isFilter = 0)
    {
        $this->setMainTable('sales/order');
        $this->removeAllFieldsFromSelect();

        $adapter = $this->getConnection();

        $baseTotalInvoiced    = $adapter->getIfNullSql('main_table.base_total_invoiced', 'main_table.base_grand_total'); // This will check if there is no invoice it will calculate based on the grand totals ( so when you generate and invoice u will have no issues with the numbers also )
        $baseTotalRefunded    = $adapter->getIfNullSql('main_table.base_total_refunded', 0);
        $baseTaxInvoiced      = $adapter->getIfNullSql('main_table.base_tax_invoiced', 'main_table.base_tax_amount'); // Same here for taxes
        $baseTaxRefunded      = $adapter->getIfNullSql('main_table.base_tax_refunded', 0);
        $baseShippingInvoiced = $adapter->getIfNullSql('main_table.base_shipping_invoiced', 'main_table.base_shipping_amount'); // Same here for shipping
        $baseShippingRefunded = $adapter->getIfNullSql('main_table.base_shipping_refunded', 0);

        $revenueExp = sprintf('%s - %s - %s - (%s - %s - %s)',
            $baseTotalInvoiced,
            $baseTaxInvoiced,
            $baseShippingInvoiced,
            $baseTotalRefunded,
            $baseTaxRefunded,
            $baseShippingRefunded
        );
        $taxExp = sprintf('%s - %s', $baseTaxInvoiced, $baseTaxRefunded);
        $shippingExp = sprintf('%s - %s', $baseShippingInvoiced, $baseShippingRefunded);

        if ($isFilter == 0) {
            $rateExp = $adapter->getIfNullSql('main_table.base_to_global_rate', 0);
            $this->getSelect()->columns(
                array(
                    'revenue'  => new Zend_Db_Expr(sprintf('SUM((%s) * %s)', $revenueExp, $rateExp)),
                    'tax'      => new Zend_Db_Expr(sprintf('SUM((%s) * %s)', $taxExp, $rateExp)),
                    'shipping' => new Zend_Db_Expr(sprintf('SUM((%s) * %s)', $shippingExp, $rateExp))
                )
            );
        } else {
            $this->getSelect()->columns(
                array(
                    'revenue'  => new Zend_Db_Expr(sprintf('SUM(%s)', $revenueExp)),
                    'tax'      => new Zend_Db_Expr(sprintf('SUM(%s)', $taxExp)),
                    'shipping' => new Zend_Db_Expr(sprintf('SUM(%s)', $shippingExp))
                )
            );
        }

        $this->getSelect()->columns(array(
            'quantity' => 'COUNT(main_table.entity_id)'
        ))
            ->where('main_table.state NOT IN (?)', array(
                    Mage_Sales_Model_Order::STATE_HOLDED,
                    Mage_Sales_Model_Order::STATE_CANCELED)
            );

        return $this;
    }

    protected function _calculateTotalsAggregated($isFilter = 0)
    {
        $this->setMainTable('sales/order_aggregated_created');
        $this->removeAllFieldsFromSelect();

        $this->getSelect()->columns(array(
            'revenue'  => 'SUM(main_table.total_revenue_amount)',
            'tax'      => 'SUM(main_table.total_tax_amount_actual)',
            'shipping' => 'SUM(main_table.total_shipping_amount_actual)',
            'quantity' => 'SUM(orders_count)',
        ));

        $statuses = Mage::getSingleton('sales/config')
            ->getOrderStatusesForState(Mage_Sales_Model_Order::STATE_CANCELED);

        if (empty($statuses)) {
            $statuses = array(0);
        }

        $this->getSelect()->where('main_table.order_status NOT IN(?)', $statuses);

        return $this;
    }

    public function calculateSales($isFilter = 0)
    {
        $statuses = Mage::getSingleton('sales/config')
            ->getOrderStatusesForState(Mage_Sales_Model_Order::STATE_CANCELED);

        if (empty($statuses)) {
            $statuses = array(0);
        }
        $adapter = $this->getConnection();

        if (Mage::getStoreConfig('sales/dashboard/use_aggregated_data')) {
            $this->setMainTable('sales/order_aggregated_created');
            $this->removeAllFieldsFromSelect();
            $averageExpr = $adapter->getCheckSql(
                'SUM(main_table.orders_count) > 0',
                'SUM(main_table.total_revenue_amount)/SUM(main_table.orders_count)',
                0);
            $this->getSelect()->columns(array(
                'lifetime' => 'SUM(main_table.total_revenue_amount)',
                'average'  => $averageExpr
            ));

            if (!$isFilter) {
                $this->addFieldToFilter('store_id',
                    array('eq' => Mage::app()->getStore(Mage_Core_Model_Store::ADMIN_CODE)->getId())
                );
            }
            $this->getSelect()->where('main_table.order_status NOT IN(?)', $statuses);
        } else {
            $this->setMainTable('sales/order');
            $this->removeAllFieldsFromSelect();

            $expr = sprintf('%s - %s - %s - (%s - %s - %s)',
                $adapter->getIfNullSql('main_table.base_total_invoiced', 'main_table.base_grand_total'),
                $adapter->getIfNullSql('main_table.base_tax_invoiced', 'main_table.base_tax_amount'),
                $adapter->getIfNullSql('main_table.base_shipping_invoiced', 'main_table.base_shipping_amount'),
                $adapter->getIfNullSql('main_table.base_total_refunded', 0),
                $adapter->getIfNullSql('main_table.base_tax_refunded', 0),
                $adapter->getIfNullSql('main_table.base_shipping_refunded', 0)
            );

            if ($isFilter == 0) {
                $expr = '(' . $expr . ') * main_table.base_to_global_rate';
            }

            $this->getSelect()
                ->columns(array(
                    'lifetime' => "SUM({$expr})",
                    'average'  => "AVG({$expr})"
                ))
                ->where('main_table.status NOT IN(?)', $statuses)
                ->where('main_table.state NOT IN(?)', array(
                        Mage_Sales_Model_Order::STATE_HOLDED,
                        Mage_Sales_Model_Order::STATE_CANCELED)
                );
        }
        return $this;
    }

    public function setDateRange($from, $to)
    {
        $this->_reset()
            ->addFieldToFilter('created_at', array('from' => $from, 'to' => $to))
            ->addFieldToFilter('state', array('neq' => Mage_Sales_Model_Order::STATE_CANCELED))
            ->getSelect()
            ->columns(array('orders' => 'COUNT(DISTINCT(main_table.entity_id))'))
            ->group('entity_id');

        $this->getSelect()->columns(array(
                'items' => 'SUM(main_table.total_qty_ordered)')
        );

        return $this;
    }

    public function setStoreIds($storeIds)
    {
        $adapter = $this->getConnection();
        $baseSubtotalInvoiced = $adapter->getIfNullSql('main_table.base_subtotal_invoiced', 0);
        $baseDiscountRefunded = $adapter->getIfNullSql('main_table.base_discount_refunded', 0);
        $baseSubtotalRefunded = $adapter->getIfNullSql('main_table.base_subtotal_refunded', 0);
        $baseDiscountInvoiced = $adapter->getIfNullSql('main_table.base_discount_invoiced', 0);
        $baseTotalInvocedCost = $adapter->getIfNullSql('main_table.base_total_invoiced_cost', 0);
        if ($storeIds) {
            $this->getSelect()->columns(array(
                'subtotal'  => 'SUM(main_table.base_subtotal)',
                'tax'       => 'SUM(main_table.base_tax_amount)',
                'shipping'  => 'SUM(main_table.base_shipping_amount)',
                'discount'  => 'SUM(main_table.base_discount_amount)',
                'total'     => 'SUM(main_table.base_grand_total)',
                'invoiced'  => 'SUM(main_table.base_total_paid)',
                'refunded'  => 'SUM(main_table.base_total_refunded)',
                'profit'    => "SUM($baseSubtotalInvoiced) "
                . "+ SUM({$baseDiscountRefunded}) - SUM({$baseSubtotalRefunded}) "
                . "- SUM({$baseDiscountInvoiced}) - SUM({$baseTotalInvocedCost})"
            ));
        } else {
            $this->getSelect()->columns(array(
                'subtotal'  => 'SUM(main_table.base_subtotal * main_table.base_to_global_rate)',
                'tax'       => 'SUM(main_table.base_tax_amount * main_table.base_to_global_rate)',
                'shipping'  => 'SUM(main_table.base_shipping_amount * main_table.base_to_global_rate)',
                'discount'  => 'SUM(main_table.base_discount_amount * main_table.base_to_global_rate)',
                'total'     => 'SUM(main_table.base_grand_total * main_table.base_to_global_rate)',
                'invoiced'  => 'SUM(main_table.base_total_paid * main_table.base_to_global_rate)',
                'refunded'  => 'SUM(main_table.base_total_refunded * main_table.base_to_global_rate)',
                'profit'    => "SUM({$baseSubtotalInvoiced} *  main_table.base_to_global_rate) "
                . "+ SUM({$baseDiscountRefunded} * main_table.base_to_global_rate) "
                . "- SUM({$baseSubtotalRefunded} * main_table.base_to_global_rate) "
                . "- SUM({$baseDiscountInvoiced} * main_table.base_to_global_rate) "
                . "- SUM({$baseTotalInvocedCost} * main_table.base_to_global_rate)"
            ));
        }

        return $this;
    }

    /**
     * Add group By customer attribute
     *
     * @return Mage_Reports_Model_Resource_Order_Collection
     */
    public function groupByCustomer()
    {
        $this->getSelect()
            ->where('main_table.customer_id IS NOT NULL')
            ->group('main_table.customer_id');

        /*
         * Allow Analytic functions usage
         */
        $this->_useAnalyticFunction = true;

        return $this;
    }

    /**
     * Join Customer Name (concat)
     *
     * @param string $alias
     * @return Mage_Reports_Model_Resource_Order_Collection
     */
    public function joinCustomerName($alias = 'name')
    {
        $fields      = array('main_table.customer_firstname', 'main_table.customer_lastname');
        $fieldConcat = $this->getConnection()->getConcatSql($fields, ' ');
        $this->getSelect()->columns(array($alias => $fieldConcat));
        return $this;
    }

    /**
     * Add Order count field to select
     *
     * @return Mage_Reports_Model_Resource_Order_Collection
     */
    public function addOrdersCount()
    {
        $this->addFieldToFilter('state', array('neq' => Mage_Sales_Model_Order::STATE_CANCELED));
        $this->getSelect()
            ->columns(array('orders_count' => 'COUNT(main_table.entity_id)'));

        return $this;
    }

    public function addRevenueToSelect($convertCurrency = false)
    {
        if ($convertCurrency) {
            $this->getSelect()->columns(array(
                'revenue' => '(main_table.base_grand_total * main_table.base_to_global_rate)'
            ));
        } else {
            $this->getSelect()->columns(array(
                'revenue' => 'base_grand_total'
            ));
        }

        return $this;
    }

    public function addSumAvgTotals($storeId = 0)
    {
        $adapter = $this->getConnection();
        $baseSubtotalRefunded = $adapter->getIfNullSql('main_table.base_subtotal_refunded', 0);
        $baseSubtotalCanceled = $adapter->getIfNullSql('main_table.base_subtotal_canceled', 0);
        $baseDiscountCanceled = $adapter->getIfNullSql('main_table.base_discount_canceled', 0);

        /**
         * calculate average and total amount
         */
        $expr = ($storeId == 0)
            ? "(main_table.base_subtotal -
            {$baseSubtotalRefunded} - {$baseSubtotalCanceled} - ABS(main_table.base_discount_amount) -
            {$baseDiscountCanceled}) * main_table.base_to_global_rate"
            : "main_table.base_subtotal - {$baseSubtotalCanceled} - {$baseSubtotalRefunded} -
            ABS(main_table.base_discount_amount) - {$baseDiscountCanceled}";

        $this->getSelect()
            ->columns(array('orders_avg_amount' => "AVG({$expr})"))
            ->columns(array('orders_sum_amount' => "SUM({$expr})"));

        return $this;
    }

    public function orderByTotalAmount($dir = self::SORT_ORDER_DESC)
    {
        $this->getSelect()->order('orders_sum_amount ' . $dir);
        return $this;
    }

    public function orderByOrdersCount($dir = self::SORT_ORDER_DESC)
    {
        $this->getSelect()->order('orders_count ' . $dir);
        return $this;
    }

    public function orderByCustomerRegistration($dir = self::SORT_ORDER_DESC)
    {
        $this->setOrder('customer_id', $dir);
        return $this;
    }

    public function orderByCreatedAt($dir = self::SORT_ORDER_DESC)
    {
        $this->setOrder('created_at', $dir);
        return $this;
    }

    public function getSelectCountSql()
    {
        $countSelect = clone $this->getSelect();
        $countSelect->reset(Zend_Db_Select::ORDER);
        $countSelect->reset(Zend_Db_Select::LIMIT_COUNT);
        $countSelect->reset(Zend_Db_Select::LIMIT_OFFSET);
        $countSelect->reset(Zend_Db_Select::COLUMNS);
        $countSelect->reset(Zend_Db_Select::GROUP);
        $countSelect->reset(Zend_Db_Select::HAVING);
        $countSelect->columns("COUNT(DISTINCT main_table.entity_id)");

        return $countSelect;
    }

    protected function _initInitialFieldsToSelect()
    {
        // No fields should be initialized
        return $this;
    }

    public function addCreateAtPeriodFilter($period)
    {
        list($from, $to) = $this->getDateRange($period, 0, 0, true);

        $this->checkIsLive($period);

        if ($this->isLive()) {
            $fieldToFilter = 'created_at';
        } else {
            $fieldToFilter = 'period';
        }

        $this->addFieldToFilter($fieldToFilter, array(
            'from'  => $from->toString(Varien_Date::DATETIME_INTERNAL_FORMAT),
            'to'    => $to->toString(Varien_Date::DATETIME_INTERNAL_FORMAT)
        ));

        return $this;
    }
} 
```

其他可能有助于找到类似问题的答案的事情。

1）检查“使用聚合数据（测试版）”是否在“配置”>“销售”>“销售”选项卡中设置为“否”。此解决方案仅适用于“实时”数据（也就是说，它使用销售/订单表而不是销售/订单聚合创建）。如果没有，请将其设置为“否”。

2) 编辑 app/design/adminhtml/default/default/template/dashboard/graph.phtml 并将 getChartUrl(false) 更改为 getChartUrl(true)

3) 确保您的 Class 是实际使用的，而不是本地版本

check_class_path.php

```
<?php 
require_once ('app/Mage.php'); 
Mage::app("default"); 
$reflector = new ReflectionClass('Mage_Reports_Model_Resource_Order_Collection'); 
$t = $reflector->getFileName(); 
echo $t; 
```

4）在magento [https://github.com/netz98/n98-magerun中找到任何潜在的类冲突](https://github.com/netz98/n98-magerun)

5）清除缓存，如 apc 缓存/magento 缓存

6）如果您的 Magento 安装已升级，请比较新安装的 magento 和您的数据库模式

# vb.net - 如果我单击按钮，vb.net 如何增加 id

> ID：15567720
> 
> 赞同：0
> 
> 时间：2013-03-22T10:11:43.240
> 
> 标签：vb.net, ms-access, auto-increment

我只想增加 id 插入的限制等于其他表

对于那件事我没有任何疑问

唯一的问题是，我不能在 id 上增加代码直到限制

标识列 2

1-----------0

2-----------5

3-----------0

依此类推，像这样，通过单击插入按钮，id 应该逐个递增直到限制

谁能帮帮我吗

```
 RecordDate.Text = MyFormat

    Dim antinull As Integer = Format(0)
    BadBeg.Text = antinull
    WarePcs.Text = antinull
    CustPcs.Text = antinull
    Returned.Text = antinull
    BadEnd.Text = antinull

   Try
        Str = "insert into BadWarehouseInv values("
        Str += Id.Text.Trim()
        Str += ","
        Str += """" & RecordDate.Text.Trim() & """"
        Str += ","
        Str += """" & BadBeg.Text.Trim() & """"
        Str += ","
        Str += WarePcs.Text.Trim()
        Str += ","
        Str += CustPcs.Text.Trim()
        Str += ","
        Str += Returned.Text.Trim()
        Str += ","
        Str += """" & BadEnd.Text.Trim() & """"
        Str += ")"
        Con.Open()
        Cmd = New OleDbCommand(Str, Con)
        Cmd.ExecuteNonQuery()
        Dst.Clear()
        Dad = New OleDbDataAdapter("SELECT * FROM BadWarehouseInv ORDER BY Id", Con)
        Dad.Fill(Dst, "stock")

        Con.Close()
    Catch ex As Exception
        MessageBox.Show("Could Not Insert Record!!!")
        MsgBox(ex.Message & " -  " & ex.Source)
        Con.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:29:47.667

我不确定我是否理解您的问题，但是：-

通常，当您写入数据库时​​，您有一列是[Identity 类型，并且是表或](http://en.wikipedia.org/wiki/Identity_column)[Primary Key](http://en.wikipedia.org/wiki/Primary_key)中的唯一标识符。当添加新行时，它会自动增加。

所以当你在表中创建一个新行时，你让数据库引擎担心这个，然后使用[一种技术来读回这个值](https://stackoverflow.com/questions/9791156/return-last-id-identity-on-insert-row-vb-net-mysql)

如果您不想使用标识列，则可以使用查询来查找当前的最高数字，然后将其添加到其中。不建议这样做，因为您可能有两个客户端同时执行此操作，因此一个在尝试写入数据库时​​会失败。

# dynamics-crm-2011 - 在 CRM 2011 中自定义转换为商机对话框

> ID：15567721
> 
> 赞同：3
> 
> 时间：2013-03-22T10:11:43.597
> 
> 标签：dynamics-crm-2011

我们可以自定义转换为机会对话框吗？

假设我需要将我的一个 CRM 字段添加到对话框中，并使该字段成为必填字段，以便用户为其提供一个值，然后创造一个机会。

问这个问题的原因是：我有一个名为 Opportunity Type 的字段，并且基于该字段我定义了不同的 Opportunity 表单。因此，如果我可以将该字段放入对话框中，这对我使用加载相应的表单很有帮助我的 JavaScript。

请让我知道这是否可以实现...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T11:48:06.760

这是相当可行的。实际上，您可以实现自己的对话框，并使用它来代替标准对话框。要获取所有必要的字段，您可以使用 CRM SDK，并通过 Javascript 调用从您的页面获取所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:28:02.687

就像 Sergey 说的，如果你实现自己的对话框，这是可能的。你只需要添加一个功能区按钮来调用一个新的对话框，你可以隐藏默认按钮。请参阅[此处](http://garethtuckercrm.com/2012/04/03/building-custom-screens-using-dialogs-and-ribbon-buttons-in-crm-2011/)的示例。

# java - 是否可以在 jsf 上使用 xml-db 作为数据库

> ID：15567725
> 
> 赞同：0
> 
> 时间：2013-03-22T10:11:55.103
> 
> 标签：java, jsf, oracle-xml-db-repository

我打算使用 JSF 和 mysql 和 xml db 作为数据库创建一个应用程序。

我打算使用[exist-db](http://exist-db.org/)作为数据库。

是否可以在 jsf 上使用 xml db？

如果是，如何？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:26:19.310

在您的应用程序中，JSF 视图组件将用于屏幕渲染（视图）

所有的请求参数都将来到 JSF Backing Bean，这里是一个控制器。

和 MySql 或 XML 数据库相关的工作将在模型层。

因此，只要 XML 数据库特定的 Java Api 可用于与 eXist-db 通信，您就可以将其集成到应用程序的模型层中。

你可以得到帮助

[http://exist-db.org/exist/apps/doc/devguide_xmldb.xml](http://exist-db.org/exist/apps/doc/devguide_xmldb.xml)

因此，在基于 JSF 的 Java EE 应用程序的模型层中，您可以轻松地集成它。

# javascript - 找到后中断循环并返回结果

> ID：15567728
> 
> 赞同：1
> 
> 时间：2013-03-22T10:11:59.443
> 
> 标签：javascript, coffeescript

我有这个咖啡脚本，我从我之前问过的这个问题中得到的。

```
window.getObject = (theObject, key, val) ->
  result = null
  if theObject instanceof Array
    i = 0
    while i < theObject.length
      result = getObject(theObject[i], key, val)
      i++
  else
    for prop of theObject
      return theObject  if theObject[prop] is val  if prop is key
      result = getObject(theObject[prop], key, val)  if theObject[prop] instanceof Object or theObject[prop] instanceof Array
  result 
```

它在这里找到结果：

```
return theObject  if theObject[prop] is val  if prop is key 
```

现在它需要停止递归并返回结果。但它没有打破循环，因此将结果设置为空 agian。我确定我错过了一些愚蠢的东西！

**编辑**

现在我改变了，所以我认为这会起作用

```
window.getObject = (theObject, key, val) ->
  result = null
  if theObject instanceof Array
    i = 0
    while i < theObject.length
      result = getObject(theObject[i], key, val)
      i++
  else
    for prop of theObject
      if theObject[prop] is val and prop is key
        result = theObject 
        console.log "I found it"
        break
      console.log "I must not log after found it was logged"
      result = getObject(theObject[prop], key, val)  if theObject[prop] instanceof Object or theObject[prop] instanceof Array
    console.log "stop!!"
  result 
```

日志按顺序如下所示：

```
I must not log after found it was logged ui.js:49
I must not log after found it was logged ui.js:49
I must not log after found it was logged ui.js:49
stop!! ui.js:54
stop!! ui.js:54
I must not log after found it was logged ui.js:49
I must not log after found it was logged ui.js:49
I must not log after found it was logged ui.js:49
I found it ui.js:46
stop!! ui.js:54
I must not log after found it was logged ui.js:49
I must not log after found it was logged ui.js:49
I must not log after found it was logged ui.js:49
stop!! ui.js:54
stop!! ui.js:54
stop!! ui.js:54
stop!! ui.js:54
I must not log after found it was logged ui.js:49
stop!! ui.js:54
I must not log after found it was logged ui.js:49
stop!! ui.js:54
stop!! ui.js:54
stop!! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:01:34.423

日志是正确的，向您显示递归调用：

```
 I must not log after found it was logged ui.js:49
     I must not log after found it was logged ui.js:49
         I must not log after found it was logged ui.js:49
             stop!! ui.js:54
         stop!! ui.js:54
     I must not log after found it was logged ui.js:49
         I must not log after found it was logged ui.js:49
             I must not log after found it was logged ui.js:49
                 I found it ui.js:46
                stop!! ui.js:54
             I must not log after found it was logged ui.js:49
                 I must not log after found it was logged ui.js:49
                     I must not log after found it was logged ui.js:49
                    stop!! ui.js:54
                stop!! ui.js:54
            stop!! ui.js:54
        stop!! ui.js:54
     I must not log after found it was logged ui.js:49
        stop!! ui.js:54
     I must not log after found it was logged ui.js:49
        stop!! ui.js:54
    stop!! ui.js:54
stop!! 
```

[（忽略数组部分，在每个“我不能记录”之后调用另一个递归级别，并且每个调用都以“stopp”结束）]

如您所见，在“我找到它”之后，循环立即停止。

> 但是它没有跳出循环，因此将结果设置为空 agian

这发生在下一个更高的级别。您很高兴分配`result = getObject(…)`，但是如果递归调用导致某些事情（在数组循环中也是如此），您不会中断*。*

`result`但是，我发现早期返回更容易阅读（而且您不需要） ，而不是维护变量`break`：

```
window.getObject = (theObject, key, val) ->
  if theObject instanceof Array
    for item in theObject
      result = getObject(item, key, val)
      return result  if result
  else
    for prop, item of theObject
      return theObject  if item is val and prop is key
      result = getObject(item, key, val)  if item instanceof Object or item instanceof Array
      return result  if result
  null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:01:02.657

如果结果不为空，您似乎需要再休息一次。像这样的东西：

```
result = getObject(theObject[prop], key, val)  if theObject[prop] instanceof Object or theObject[prop] instanceof Array
break if result not null 
```

如果在此函数的递归调用中找到对象，则需要中断循环。

# ios - UIStoryboardSegue - performSegue 方法传递类而不是标识符

> ID：15567731
> 
> 赞同：0
> 
> 时间：2013-03-22T10:12:04.783
> 
> 标签：ios, xcode, interface-builder, storyboard

我正在尝试以编程方式执行 segue（因为显然 segue 动作和 IB 动作不能很好地协同工作）。因此，我设置了一个 IBAction 来做一些事情，然后发送 performSegue 方法。我能找到的唯一 performSegue* 方法是“performSegueWithIdentifier：”，这不是我需要的，因为我有一个自定义 segue，它是 UIStoryboardSegue 的子类。

有没有办法以编程方式将类作为 segue 传递（比如在 IB 中，您可以将类设置为 segue 而不是标识符）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:31:48.683

**您可以通过手动**触发 segues 来实现这一点。选择文件所有者并为手动触发的 segue 提供标识符。然后你也可以通过你喜欢的任何东西来准备 segue 方法。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"ChooseAPlayer"]) {
        chooseplayer = [segue destinationViewController];
        chooseplayer.serviceReceiver = ForNextScreen;
    }
} 
```

# php - 用于净化/过滤邪恶 html 的 PHP 模块

> ID：15567732
> 
> 赞同：2
> 
> 时间：2013-03-22T10:12:06.820
> 
> 标签：php, php-extension, htmlpurifier

我正在寻找 HTML[净化器的替代品](http://htmlpurifier.org)

关键是，我需要即时处理大量的 html 文件，而 html 净化器是相当繁重的类 - 需要大量资源和执行时间。问题是可能有用 C 语言编写的 PHP 模块/扩展，例如，它会比用 php 编写的类更快吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:28:30.650

我很确定（99%）php 没有这样的扩展。我非常熟悉 php 和安全的东西，我想我会知道是否存在这样的扩展。

# windows-phone-7 - LongListSelector - 按钮单击事件冒泡到 SelectionChanged 事件

> ID：15567737
> 
> 赞同：1
> 
> 时间：2013-03-22T10:12:20.797
> 
> 标签：windows-phone-7, windows-phone-8

这个问题[以前在 SO 上发布过，](https://stackoverflow.com/questions/5400748/windows-phone-7-button-in-longlistselector)但不幸的是没有答案。我有同样的问题。基本上我有一个 LongListSelector 并且在项目模板中我有一个按钮。当点击按钮时，会触发按钮的 Click 事件，然后触发 SelectionChanged 事件。

当我使用 ListBox 时，这种行为没有发生。知道如何防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T07:58:24.940

单击按钮时，将触发按钮事件处理程序，并且当更改长列表选择器中的项目时，如果它也已注册，则会触发相应的选择更改事件。但是在同一个选定项上单击按钮时，只会触发按钮事件处理程序。我建议只有一个按钮事件处理程序并从中获取所选项目。

```
private void ButtonEvent_Click(object sender, RoutedEventArgs e)
{
HoldingClass clicked=((sender as Button).DataContext as HoldingClass);
//Do something with the HoldingClass as this is the binding element to the long list selector
} 
```

# jquery - “闪屏”后激活jquery功能

> ID：15567740
> 
> 赞同：0
> 
> 时间：2013-03-22T10:12:33.047
> 
> 标签：jquery, navigation, concept

我正在为一个带有简单导航的站点的学校项目工作。所以我正在使用 keyup 功能进行滚动。

[演示模型在我的网页上](http://pluijlaardesign.nl/school/)

这个概念很简单，弹出一个屏幕。你输入你的名字。“登录”屏幕淡出并进入介绍文本。（对于所有非荷兰人来说，它说“嗨 $name，欢迎，让我们开始吧，你可以看到有一些按钮按下一个导航”）

唯一的问题是，我只激活了 de D 键进行测试，幸运的是我的名字是 Mike，所以没有涉及 D。但是，如果您的名字是 Dave（例如），如果您在“登录”屏幕中按 D，则页面已经滚动到导航点。

```
$(document).keyup(function(d) {
if(d.keyCode==68){
    $('body').animate({
        scrollLeft: $('#left').offset().left

    }, 'slow');
}
else {
    return false;
} 
```

这是我的击键 jquery （目前只有 D 被激活，所以我知道还有更多要遵循的）

**最后的问题：**如何“停用”按键功能，以便在登录屏幕淡出后按键功能激活，这样您就可以安全地使用导航。

小问题2：我有你名字的表格

```
<form name="myform" action="" method="get"><input id="naam" type="text" name="Naam" /> <input id="sender" type="button" name="button" value="gaan!"  />  </form> 
```

结合

```
$("#sender").click(function(){ 
$("#login").fadeOut('slow');
$("#callback").delay(900).animate(
{
    left:'40%',
    opacity:'1'
}, 'slow' );` 
```

现在我知道 .submit 函数是可能的，但是以某种奇怪的方式，它在我的页面中不起作用。我该如何解决？

# android - Green Droid：如何为 GDActivity 设置背景图片

> ID：15567741
> 
> 赞同：0
> 
> 时间：2013-03-22T10:12:40.647
> 
> 标签：android, android-activity, background, image, greendroid

`GDActivity`任何人都可以提供如何在其构造方法（或其他方式）中设置背景图片的清晰示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:05:57.460

我已经指出了如何做到这一点。

GDActivity 使用特殊的布局结构：

```
<?xml version="1.0" encoding="utf-8"?>

<view
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        class="greendroid.widget.ActionBarHost"
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gd_action_bar_host">

    <view
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            class="greendroid.widget.ActionBar"
            android:id="@+id/gd_action_bar"
            />

    <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/gd_action_bar_content_view"/>
</view> 
```

所以当我们遵循逻辑时，我们应该为内容视图框架设置背景图片，对吗？

但事实并非如此。

这不起作用：

```
Drawable mBackgroundDrawable = getResources().getDrawable(R.drawable.splash);
getContentView().setBackgroundDrawable(mBackgroundDrawable); 
```

我们必须使用标准访问窗口。

```
Drawable mBackgroundDrawable = getResources().getDrawable(R.drawable.splash);
getWindow().setBackgroundDrawable(mBackgroundDrawable); 
```

任何更正将不胜感激。

# c# - ConcurrentQueue.IsEmpty 是否需要内存屏障？

> ID：15567748
> 
> 赞同：3
> 
> 时间：2013-03-22T10:13:03.890
> 
> 标签：c#, .net, concurrency

在查看 IsEmpty 时，我在 MSDN 上注意到了这一点：

> 但是，由于此集合旨在被并发访问，因此可能会在 IsEmpty 返回后另一个线程将修改该集合，从而使结果无效。

当然这是真的，但这是否也意味着 ConcurrentQueue 在检查队列是否为空时不使用读屏障？

如果并发队列为空，我想要一段代码检查另一个线程。像这样的东西：

```
while (!queue.IsEmpty)
{
} 
```

但是.. 如果 ConcurrentQueue 不使用读取屏障，我会说我们需要添加自己的内存屏障以确保我们读取正确的数据，如下所示：

```
Thread.MemoryBarrier();
while (!queue.IsEmpty)
{
    Thread.MemoryBarrier();
} 
```

（顺便说一句：这些只是说明情况的一个最小示例，实际上还有更多代码）。

我的观察正确吗？或者 ConcurrentQueue 是否处理此问题并且第一个实现是否有效？（例如，我对“并发”的期望是什么）？

那么“伯爵”呢？我在 MSDN 上找不到答案……同样的故事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T10:15:57.147

不，这与记忆障碍无关。只是在你的测试之后，其他东西可能会在队列中添加或删除一些东西。

你不应该真的使用`IsEmpty`. 改为使用`TryDequeue`。或使用`BlockingCollection`.

你真的不想开始编写代码来“锁定”队列，而你却弄乱了`IsEmpty`or `Count`。

（我现在几乎从不使用`ConcurrentQueue`，因为`BlockingCollection`它好多了，尽管这当然取决于你想要做什么。）

# mysql - 密钥 1 的重复条目“1944994”

> ID：15567750
> 
> 赞同：0
> 
> 时间：2013-03-22T10:13:13.620
> 
> 标签：mysql

谁能给我解释一下？

```
 mysql> select * from heartbeat order by id desc limit 20;
    +---------+---------------------+---------------------------------------------------------+
    | id      | date                | node                                                    |
    +---------+---------------------+---------------------------------------------------------+
    | 1944993 | 2013-03-22 12:06:29 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944992 | 2013-03-22 12:05:59 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944991 | 2013-03-22 12:05:29 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944990 | 2013-03-22 12:05:07 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944989 | 2013-03-22 12:05:07 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944988 | 2013-03-22 12:05:07 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944987 | 2013-03-21 21:12:59 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944986 | 2013-03-21 21:12:29 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944985 | 2013-03-21 21:11:59 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944984 | 2013-03-21 21:11:29 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944983 | 2013-03-21 21:10:59 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944982 | 2013-03-21 21:10:29 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944981 | 2013-03-21 21:09:59 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944980 | 2013-03-21 21:09:29 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944979 | 2013-03-21 21:08:59 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944978 | 2013-03-21 21:08:29 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944977 | 2013-03-21 21:07:59 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944976 | 2013-03-21 21:07:29 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944975 | 2013-03-21 21:06:59 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    | 1944974 | 2013-03-21 21:06:29 | CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com |
    +---------+---------------------+---------------------------------------------------------+
    20 rows in set (0.01 sec) 
```

试图插入下一个值..

```
insert into heartbeat values(1944994, '2013-03-22 12:06:29','CN=kurian2,O=Nemesis Clinics Group,DC=nemesis,DC=com'); 
```

> 错误 1062 (23000)：密钥 1 的重复条目“1944994”

确保值不存在..

```
select * from heartbeat where id=1944994;
Empty set (0.00 sec)

    mysql> desc heartbeat;
    +-------+--------------+------+-----+---------+----------------+
    | Field | Type         | Null | Key | Default | Extra          |
    +-------+--------------+------+-----+---------+----------------+
    | id    | bigint(20)   | NO   | PRI | NULL    | auto_increment |
    | date  | datetime     | YES  |     | NULL    |                |
    | node  | varchar(255) | YES  |     | NULL    |                |
    +-------+--------------+------+-----+---------+----------------+
    3 rows in set (0.05 sec)

    mysql> SHOW VARIABLES LIKE "%version%";
    +-------------------------+-------------------------------+
    | Variable_name           | Value                         |
    +-------------------------+-------------------------------+
    | protocol_version        | 10                            |
    | version                 | 5.0.51b-community-nt          |
    | version_comment         | MySQL Community Edition (GPL) |
    | version_compile_machine | ia32                          |
    | version_compile_os      | Win32                         |
    +-------------------------+-------------------------------+
    5 rows in set (0.00 sec) 
```

有没有人遇到同样的问题？为什么我在 1944994 出现异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:21:38.023

插入行时不要为该列提供值，因为`id`它是 auto_increment。所以 MySQL 会自动分配序列号。您也可以显式地将 NULL 或 0 分配给列以生成序列号。

# google-maps-api-3 - 带有可拖动标记的谷歌地图如何在移动浏览器触摸屏上工作（拖动标记）？

> ID：15567752
> 
> 赞同：6
> 
> 时间：2013-03-22T10:13:22.347
> 
> 标签：google-maps-api-3, draggable, marker

在桌面浏览器中，使用鼠标单击拖放一切正常，但不适用于触摸屏。我需要做什么才能在移动（平板电脑和手机）浏览器中启用标记的拖动？

```
map = new google.maps.Map(document.getElementById('map_canvas'),
                mapOptions);
 google.maps.event.addListener(map, 'center_changed', function() {
   window.setTimeout(function() {
      map.panTo(marker.getPosition());
     }, 3000);
  }); 

        marker = new google.maps.Marker({
          map:map,
          draggable: true,
          animation: google.maps.Animation.DROP,
          position: parliament,
          icon: psrimage
        }); 
```

# navigation - Notepadd++：比较导航重置？

> ID：15567753
> 
> 赞同：0
> 
> 时间：2013-03-22T10:13:24.573
> 
> 标签：navigation, compare, notepad++, reset

我在 Notepad++ 中使用比较功能。我不小心放大了导航栏，使其适合整个窗口。现在我无法调整它的大小（角落里没有调整大小的箭头）。我想重置比较导航设置，但似乎没有办法做到这一点（即使通过插件>比较>选项等）。有没有人有办法解决吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:34:37.860

这是一个已知错误，尚未修复，
请检查

[http://sourceforge.net/p/notepad-plus/bugs/3386/](http://sourceforge.net/p/notepad-plus/bugs/3386/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:25:53.037

我尝试做同样的事情，但无法将导航栏扩展到全窗口。你是怎么做到的？也许它与Windows版本有关-您使用的是Win XP吗？无论如何，尝试双击 NavBar - 它应该被停靠。或者在 Win 7 中使用 [win]+[downarrow] 组合（调整大小）。

# svn - 如何在svn中重新整合分支的分支

> ID：15567755
> 
> 赞同：2
> 
> 时间：2013-03-22T10:13:28.333
> 
> 标签：svn, merge, svn-reintegrate

我正在使用 SVN。我有一个从另一个分支创建的分支，该分支又从主干创建。现在将我的分支重新整合到主干的正确程序是什么？

```
-  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  树干
   \
    \________________________ 分公司 1
              \
               \____________ 我的分行

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:05:37.393

`Mybranch`并且`Branch1`两者都使用相同的重新整合方法：标准。分支的起点不重要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:39:13.647

将 MyBranch 重新合并到 Branch1，然后将 Branch1 合并回主干，或者将 MyBranch 重新集成到 Branch1，然后将 Branch1 重新集成到主干。我不是 --reintegrate 的粉丝，我更喜欢手动合并正确的修订。

```
----(1)-------------------------------------- trunk    \
     \(2)_____(3)______________ Branch1
               \
                \(4)__________(5) MyBranch 
```

或者，如果你想走艰难的路：从 Branch1 合并到主干，从创建 Branch1 到创建 MyBranch 的 Branch1 的修订，然后将 MyBranch 合并到主干。

如果您知道 (4) 和 (5) 之间没有变化，这取决于 (2) 和 (3) 之间的变化，您可以直接将 MyBranch 合并到主干。

# php - Yii 中的多个 CJuiAutocomplete - 项目未呈现

> ID：15567762
> 
> 赞同：3
> 
> 时间：2013-03-22T10:13:42.690
> 
> 标签：php, jquery, autocomplete, yii, itemrenderer

我的视图页面上需要两个 CJuiAutocomplete 项目。不幸的是 - 其中只有一个可以正确渲染项目。另一个 - 呈现空行。我签入了萤火虫，并且正确地从数据库中检索了值。实际上，如果我更改`registerScript`- 只有最后的自动完成`registerScript`才能正确呈现项目的顺序。

这是我的代码：

```
<?php
    $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
        'name' => 'autocities',
        'sourceUrl'=>$this->createUrl('projects/dynamicGetCities'),
        'options' => array(
            'minLength' => 2,
            'select' => "js: function(event, ui) {
                        $('#lastSelectedCityId').val(ui.item.idCity);
                        var ciname = ui.item.name + ' (' + ui.item.directional + ')';
                        $('.selectedCity').html(ciname);
                    }
                "
        ),
    ));
?>
<br/><br/>
<?php
    $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
        'name' => 'autostreets',
        'sourceUrl' => 
            'js: function(request, response) {
                $.ajax({
                    url: "'.$this->createUrl('projects/dynamicGetStreets').'",
                    dataType: "json",
                    data: {
                        term: request.term,
                        idCity: $("#lastSelectedCityId").val()
                    },
                    success: function (data) {
                        response(data);
                    } 
        })}',
        'options' => array(
            'minLength' => 2,
            'select' => "js: 
                function(event, ui) 
                {
                    $('#lastSelectedStreetId').val(ui.item.idStreet);
                    $('.selectedStreet').html(ui.item.name);
                }"
        ),
    ));

    Yii::app()->clientScript->registerScript('input', '
        $("#autostreets").data("autocomplete")._renderItem = function( ul, item ) {
        return $( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<a>"+item.name+"<br/><span style=\"font-size: 9px;\">Abonentów: "+item.customCount+"</span></a>")
        .appendTo( ul );
    };');

    Yii::app()->clientScript->registerScript('input', '
        $("#autocities").data("autocomplete")._renderItem = function( ul, item ) {
        return $( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<a>"+item.name + " - " + item.directional+"<br/><span style=\"font-size: 9px;\">Abonentów: "+item.customCount+"</span></a>")
        .appendTo( ul );
    };');
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:20:52.993

如此多的搜索，在我在这里询问之后，我找到了它，呵呵。方法中的答案很简单`registerScript`——第一个参数是脚本的唯一 id。id 两次都是相同的，所以它覆盖了前一个。谢谢。

# android - 在 RelativeView 中添加的 ImageView 被缩小

> ID：15567763
> 
> 赞同：0
> 
> 时间：2013-03-22T10:13:47.627
> 
> 标签：android

我在相对布局中添加了两个图像视图并得到了一个奇怪的行为。当使用 RelativeLayout.BELOW 并以编程方式添加图像时，最后一个图像将最后一个图像之一缩小到 50%。我的一张图片显示在另一张图片下方。我使用这段代码：

```
RelativeLayout layout = new RelativeLayout(getActivity());
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    layout.setLayoutParams(params);
    layout.setId(10001);

    params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    params.addRule(RelativeLayout.CENTER_HORIZONTAL);

    _imageView = new ImageView(getActivity());
    _imageView.setId(10002);
    _imageView.setImageResource(_resource);
    layout.addView(_imageView, params);     

    params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    params.addRule(RelativeLayout.BELOW, _imageView.getId());
    params.addRule(RelativeLayout.ALIGN_LEFT, _imageView.getId());

    ImageView shadowImage = new ImageView(getActivity());
    shadowImage.setId(10003);
    shadowImage.setImageResource(R.drawable.card_shadow);
    shadowImage.setAdjustViewBounds(true);
    layout.addView(shadowImage, params); 
```

但是当我使用 xml 而不是以编程方式添加图像时，我得到了全尺寸的图像：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageView 
    android:id="@+id/cardShadow"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/cardView"
    android:layout_alignLeft="@drawable/card_01"
    android:src="@drawable/card_shadow"
    android:contentDescription=""/>

<ImageView
    android:id="@+id/cardView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:src="@drawable/card_01" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:16:45.627

如果你想重叠你的图像，那么你应该使用 FrameLayout

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:48:14.933

您在 Java 代码中为相对布局参数使用 WRAP_CONTENT，但在 XML 代码中为它使用 MATCH_PARENT。猜猜这就是问题所在。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T11:27:34.213

刚刚添加：

```
shadowImage.setScaleType(ScaleType.CENTER); 
```

这不允许缩放 ImageView。顺便感谢一些好的见解和提示。

# android - 如何在android的tabview中加载子类

> ID：15567765
> 
> 赞同：2
> 
> 时间：2013-03-22T10:14:03.170
> 
> 标签：android, tabbar

目前正在使用 android 中的 TabActivity，我有 4 个选项卡，在第 4 个选项卡中，主类是 calss A，其他类是 B 类，c 类，我的问题是当我点击我想要的第 4 个选项卡时在选项卡视图中加载 c 类。是否可能。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:21:43.530

是的你可以，

```
 TabHost mTabHost;
   TabHost.TabSpec spec; // Resusable TabSpec for each tab
   Intent intent; // Reusable Intent for each tab 
```

现在添加你的课程，

```
 mTabHost = getTabHost();
   // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, A.class);
    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = mTabHost
            .newTabSpec("Class A")
            .setIndicator("Class A", res.getDrawable(R.drawable.home_selector))
            .setContent(intent);
    mTabHost.addTab(spec); 
```

同样的方法你可以添加另一个类，这里​​我使用了drawble背景

# ruby - RestClient基本身份验证在用户名中带有#

> ID：15567768
> 
> 赞同：1
> 
> 时间：2013-03-22T10:14:10.113
> 
> 标签：ruby, basic-authentication, rest-client

我在访问 REST api 的守护程序时遇到问题。

访问需要基本身份验证。用户名和密码是固定的，不能更改。

问题似乎是，用户名看起来像这样：`#ws+R4nd0mS7r1n`

我像这样访问 API：

```
resource = RestClient::Resource.new( "#{base_url}/failover/#{failover_ip}", { :user => user_name, :password => user_password})
response = resource.get 
```

这给我带来了一个糟糕的 URI 错误：

```
bad URI(absolute but no path): https://#ws+R4nd0mS7r1n:RaNdOmPaSsWoRd@robot-ws.your-server.de/failover/11.11.11.11 
```

当我故意从用户名中删除 # 时，它可以工作，但我得到一个 NOT Authenticated 错误。

有没有办法将包含# 的用户名或密码传递给restclient？将完整的 URI 手动传递给 .get 也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:21:26.570

我没有得到同样的错误。你安装的是什么版本的`rest-client`？

您可能只需更新版本即可解决您的问题（我使用 gem 的 1.6.7 版本进行了测试）

或者，这可以通过直接写入 Authorization 标头来解决 URI 故障（无论如何，这是数据结束的地方）：

```
require 'base64'
auth = 'Basic ' + Base64.encode64( "#{user_name}:#{user_password}" ).chomp
resource = RestClient::Resource.new( "#{base_url}/failover/#{failover_ip}", { :headers => { 'Authorization' => auth } } )
resource.get 
```

# jquery - 从txt文件加载后可拖动

> ID：15567774
> 
> 赞同：0
> 
> 时间：2013-03-22T10:14:27.983
> 
> 标签：jquery, html

我有一个带有可拖动项目的 div 板。

保存时，我将 div 板的内容导出到 txt 文件。

txt 文件包含以下内容：

```
<div class="ui-draggable sleep ui-resizable" style="position: absolute; left: 450px; top: 117px;">

<img src="/media/img/badkamer/1361540973Duravit2ndFloor.jpg" class="center">

<div class="ui-resizable-handle ui-resizable-e" style="z-index: 90;"></div>

<div class="ui-resizable-handle ui-resizable-s" style="z-index: 90;"></div>

<div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se" style="z-index: 90;"></div> 
```

所以基本上它是一个可拖动和调整大小的 div 中的图像。

但是当我加载它时，我看到图像以调整 div 的大小，但我无法拖动或调整图像的大小。

我得到 txt 文件：

```
<script
$(document).ready(function() {

        $("#bord").load("/media/moodboards/1.txt");
        $(".sleep").draggable();       
});
</script> 
```

但我的问题是我无法拖动或调整 div 睡眠的大小。

有人可以帮助我吗？我发现了很多其他主题，但没有一个对我有用。

一切看起来都不错，但功能不起作用（调整大小和拖动）

有人可以帮助我使这些功能再次起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:27:32.580

首先尝试在加载后调用它：

```
$("#bord").load("/media/moodboards/1.txt", function() {
    $(".sleep").draggable();
}); 
```

如果这不起作用，请创建一个小小提琴。

# mysql - 使用组和最新条目计算平均分数

> ID：15567776
> 
> 赞同：1
> 
> 时间：2013-03-22T10:14:33.517
> 
> 标签：mysql

我希望能够获得使用 MySql 的每个联系人的最新 3 CampaignId 的平均分数。

```
 [id], [ContactId], [CampaignId], [Score]
     1    1             100             5
     2    1             100             7
     3    1             101             1
     4    1             102             3
     5    1             103             2
     6    1             103             2
     7    2             100             1
     8    2             103             2
     9    3             103             1
     10   3             104             3
     11   3             105             2
     12   3             106             4
     13   4             101             5 
```

所以结果将是： -

```
[ContactId], [AvgScore]   (worked out by)
      1          2.66     (1 + 3 + 2 + 2 ) /3 
      2          1.50     (1 + 2) / 2  (as there are only two campaigns)
      3          3.00     (3 + 2 + 4) / 3 
      4          5.00     (5) / 1  (as there is only one campaign) 
```

**编辑**我已经设法获得了单个联系人的结果，但也想尝试为所有联系人解决问题。

```
select ContactId, sum(Score), sum(Count)
from  (
  select 
    ContactId, CampaignId, sum(Score) Score, count(distinct CampaignId) Count
    from stats
  where
     ContactId = 1
  group by
      CampaignId, ContactId
order by CampaignId DESC limit 3) a; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:37:04.630

```
 DROP TABLE IF EXISTS stats;

   CREATE TABLE stats
   (id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
   ,ContactId INT NOT NULL
   ,CampaignId INT NOT NULL
   ,Score INT NOT NULL
   );

   INSERT INTO stats VALUES
   (1,1,100,5),
   (2,1,100,7),
   (3,1,101,1),
   (4,1,102,3),
   (5,1,103,2),
   (6,1,103,2),
   (7,2,100,1),
   (8,2,103,2),
   (9,3,103,1),
   (10,3,104,3),
   (11,3,105,2),
   (12,3,106,4),
   (13,4,101,5);

   SELECT x.* 
     FROM stats x 
     JOIN stats y 
       ON y.contactid = x.contactid 
      AND y.campaignid >= x.campaignid 
    GROUP 
       BY x.id 
   HAVING COUNT(DISTINCT y.campaignid) <=3;
   +----+-----------+------------+-------+
   | id | ContactId | CampaignId | Score |
   +----+-----------+------------+-------+
   |  3 |         1 |        101 |     1 |
   |  4 |         1 |        102 |     3 |
   |  5 |         1 |        103 |     2 |
   |  6 |         1 |        103 |     2 |
   |  7 |         2 |        100 |     1 |
   |  8 |         2 |        103 |     2 |
   | 10 |         3 |        104 |     3 |
   | 11 |         3 |        105 |     2 |
   | 12 |         3 |        106 |     4 |
   | 13 |         4 |        101 |     5 |
   +----+-----------+------------+-------+

   SELECT contactid
        , SUM(score)/COUNT(DISTINCT campaignid) avgscore 
     FROM 
        ( SELECT x.* 
            FROM stats x 
            JOIN stats y 
              ON y.contactid = x.contactid 
             AND y.campaignid >= x.campaignid 
           GROUP 
              BY x.id 
          HAVING COUNT(DISTINCT y.campaignid) <=3
        ) a 
    GROUP 
       BY contactid;
   +-----------+----------+
   | contactid | avgscore |
   +-----------+----------+
   |         1 |   2.6667 |
   |         2 |   1.5000 |
   |         3 |   3.0000 |
   |         4 |   5.0000 |
   +-----------+----------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:14:06.433

你可以试试下面：

```
select contactId ,sum(Score)/count(distinct CampaignId) from (
SELECT  
    @rank:= case when @a= t1.ContactId then case when @cmpId=CampaignId then @rank else @rank+1 end else 0 end as rank,
    @a:=  t1.ContactId as contactId ,
    @cmpId:=CampaignId CampaignId,
    Score

FROM stats t1 order by ContactId,CampaignId desc
) as rankorder,(Select @a:=0,@cmpId:=0,@rank=0) as temp
where rank<=2 
group by contactId 
order by contactId 
```

# asp.net - 为每个用户创建 100 万个图像文件夹而不是在 sql server 中保存图像名称是否可行？

> ID：15567780
> 
> 赞同：1
> 
> 时间：2013-03-22T10:14:40.173
> 
> 标签：asp.net, sql-server, windows, web-applications, social-networking

我们正在 ASP.NET 3.5 中创建一个社交网站。我们正在为图像创建用户特定的幻灯片。假设有 100 万用户，每个用户都会保存一些图像，现在我们将图像名称保存在数据库中。

因此，在获取下一张图像时，我们必须先到 DB，然后再到特定图像的 Image 文件夹，然后将响应发送给用户。

取而代之的是，如果我们创建用户特定文件夹并将图像保存在该文件夹中，然后查询特定用户文件夹以获取图像，这将是一个实用的解决方案，还是我们应该坚持使用上述传统数据库？

在 Web 应用程序中创建 100 万个文件夹好吗？

哪种方法在获取图像时更快（从文件夹或 SQL Server）？（我们没有将图像保存在数据库中）

感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:32:32.457

如果您希望您的系统具有可扩展性，您的 Web 应用程序不应该知道图像是如何物理存储的，或者图像的元数据是如何存储的。

有一百万用户存储图像，您的存储将需要成为一个子系统。它需要透明的故障转移、缓存策略。它的内部逻辑不应该从其他系统中得知。这将允许你调整它，改变它，增强它。

你应该有两个子系统：

*   一种用于处理图像元数据的服务接口，用于创建、更新和检索图像元数据（所有者/日期/标签/评论/...）您可以使用任何类型的数据库来处理此问题。但其他系统应该只看到一项服务。
*   一个用于处理图像二进制流（用于存储流，用于检索给定文件 ID 的流）您可以使用任何您想要的东西，从文件系统到数据库或云解决方案，它肯定是这些的混合。如上所述，其他系统应该只看到一个服务。

无论如何，要回答您的问题，拥有一百万个文件夹将是非常无效的（就像一个拥有一亿张图像的文件夹一样）但是如果您将其隐藏在服务后面，您会给自己时间在找到更好的解决方案之前找到一个更好的解决方案百万用户）

# ios - IOS 应用程序如何访问 Google Drive 文件（文件夹、图像、文档）

> ID：15567785
> 
> 赞同：0
> 
> 时间：2013-03-22T10:14:54.927
> 
> 标签：ios, google-drive-api

IOS 应用程序如何访问 Google Drive 文件（文件夹、图像、文档）

我已经通过应用程序与 Google Drives 集成。这

主要问题是我上传时可以看到文件

从我的 ios 应用程序中，当我们从

浏览器，我无法在我的应用程序中看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:32:03.220

请参阅示例[iOS 应用程序](https://developers.google.com/drive/examples/objectivec)，以及使用 Google Drive SDK的[iOS 快速入门。](https://developers.google.com/drive/quickstart-ios)

# java - 比较最终变量时如何摆脱警告？

> ID：15567794
> 
> 赞同：3
> 
> 时间：2013-03-22T10:15:20.573
> 
> 标签：java

作为一个简化的例子，我有：

```
public static final int RUN_TYPE = 1;

if(RUN_TYPE == 1)
{

} 
```

这在 if 处给了我“比较相同”的警告。如何在不全局禁用“比较相同”警告的情况下摆脱此警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:23:02.123

“比较相同”警告是因为编译器知道该值，它知道 RUNT_TYPE 的值为 1，并且您将它与没有意义的常量 1 进行比较。

如果将它与另一个不是常量的变量进行比较，则不会出现警告，因为直到运行时才能确定该值。

例子：

```
int ANOTHER_INT = 1;
if(RUN_TYPE == ANOTHER_INT {} 
```

这不会给你“比较相同”的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:20:25.113

由于您的变量是可变的`final`，因此它改变的机会很少。为什么需要测试它的值？

**编辑**

...然后使用标志在java命令行上传递一个属性`-D`并在您的代码中读取此属性，例如

```
if ( "WHATEVER".equals(System.getProperty("myproperty", "default_value"))) {
  ...
} 
```

# android - 为文件夹中的专辑创建对 MediaStore 的查询？

> ID：15567804
> 
> 赞同：1
> 
> 时间：2013-03-22T10:15:44.827
> 
> 标签：android, mediastore

谁能帮我查询Android DB。我需要选择所选文件夹中的所有专辑。对于我制作的所有歌曲：

```
 private Cursor allSongs() {
    String[] projection = {MediaStore.Audio.Media._ID,             // 0
            MediaStore.Audio.Media.ARTIST,          // 1
            MediaStore.Audio.Media.TITLE,           // 2
            MediaStore.Audio.Media.ALBUM_ID,  // 3
            MediaStore.Audio.Media.ALBUM,           // 4
            MediaStore.Audio.Media.DATA,            // 5
            MediaStore.Audio.Media.DISPLAY_NAME,    // 6
            MediaStore.Audio.Media.DURATION,     //7
            MediaStore.Audio.Media.TITLE_KEY        //8
    };

    String selection = android.provider.MediaStore.Audio.Media.DATA + " like ? ";
    String MEDIA_PATH = Environment.getExternalStorageDirectory() + "/Music/";

    Cursor musicListSDCardCursor = mQuery(
            getActivity(),
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            projection, selection, new String[]{"%" + MEDIA_PATH + "%"}, null, 0);
    return musicListSDCardCursor;
} 
```

和 mQuery 代码：

```
 public static Cursor mQuery(Context context, Uri uri, String[] projection,
                            String selection, String[] selectionArgs, String sortOrder, int limit) {
    try {
        ContentResolver resolver = context.getContentResolver();
        if (resolver == null) {
            return null;
        }
        if (limit > 0) {
            uri = uri.buildUpon().appendQueryParameter("limit", "" + limit).build();
        }
        return resolver.query(uri, projection, selection, selectionArgs, sortOrder);
    } catch (UnsupportedOperationException ex) {
        return null;
    }

} 
```

但是如何查询 MediaStore 以从该文件夹 /sdcard/Music/ 获取所有专辑？

* * *

我做到了，比如：

```
 private Cursor allAlbums() {
    Cursor cursor_albums_from_songs = allSongs();

    HashSet<String> albumsList = new HashSet<String>();
    int count = cursor_albums_from_songs.getCount();
    for (int i = 0; i < count; i++) {
        cursor_albums_from_songs.moveToPosition(i);
        albumsList.add(cursor_albums_from_songs.getString(3));
        Log.i("cursor", "" + cursor_albums_from_songs.getString(3));
    }
    Log.i("allAlbums", "" + albumsList.size());
    ArrayList<String> list = new ArrayList<String>(albumsList.size());
    list.addAll(albumsList);
    int count_ids = list.size();
    Cursor[] cursors = new Cursor[count_ids];
    for (int i = 0; i < count_ids; i++) {
        String selection = MediaStore.Audio.Albums._ID + " = ? ";
        String[] selectionArgs = new String[]{list.get(i)};

        String[] projection = {MediaStore.Audio.Albums._ID,  //0
                MediaStore.Audio.Albums.ALBUM,               // 1
                MediaStore.Audio.Albums.ALBUM_ART,           // 2
                MediaStore.Audio.Albums.ARTIST,              //3
                MediaStore.Audio.Albums.FIRST_YEAR,           //4
                MediaStore.Audio.Albums.NUMBER_OF_SONGS      //5
        };

        Cursor artistListSDCardCursor = mQuery(
                mContext,
                MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI,
                projection, selection, selectionArgs, null, 0);
        cursors[i] = artistListSDCardCursor;
    }
    MergeCursor mMergeCursor = new MergeCursor(cursors);
    return mMergeCursor;
} 
```

# php - Preg_split 或 preg_match

> ID：15567805
> 
> 赞同：0
> 
> 时间：2013-03-22T10:15:49.467
> 
> 标签：php, regex, preg-match, preg-split

我有一个小问题需要整理。我想删除字符串的一部分或拆分它。

所以基本上我有这个：One-1, Two-2, Three-3 我最终想要做的是分成 2 个变量，其中我有“一、二、三”和“1、2、3”，我没有确定我是否可以将它分成两部分，或者我是否必须先删除“-”之后的部分，然后再次删除“-”之前的位，最终得到两个变量。无论如何，我看过了，似乎 preg_split 或 preg_match 可能有效，但不知道 preg 模式。

这是我到目前为止所拥有的：

```
 $string = 'One-1, Two-2, Three-3';
        $pattern = '????????????';
        preg_match_all($pattern, $string, $matches);
        print_r($matches); 
```

编辑：对不起，我的问题措辞错误：

基本上，如果有人可以帮助我使用 preg 模式来拆分值，所以我有一个数组，一、二、三和 1、2、3

任何指导表示赞赏

伊恩

## - - - - - - - - 编辑 - - - - - - -

如果可以的话，我还有另一个问题，如果我有这个 preg_match 会如何变化：

“一个对象1，两个对象2”所以现在我在“-”之前有多个单词要存储在一起，而“1”单独存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:17:18.710

试试这个 ：

```
$string = 'One-1, Two-2, Three-3';
$pattern = '/(?P<first>\w+)-(?P<second>\w+)/';
preg_match_all($pattern, $string, $matches);

print_r($matches['first']);
print_r($matches['second']); 
```

输出：

```
Array ( [0] => One [1] => Two [2] => Three ) 
Array ( [0] => 1 [1] => 2 [2] => 3 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:19:25.497

如果您总是有“-”，请改用：

```
$string = "One-1";
$args = explode("-", $string);
// $args[0] would have One
// $args[1] would have 1 
```

您可以在此处阅读有关此功能的更多信息：http: [//php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:19:49.073

这应该有效：

```
[^-]+ 
```

但是为什么要使用正则表达式呢？你可以简单地通过“-”爆炸

# security - Xpages：搜索我无权访问的文档

> ID：15567808
> 
> 赞同：0
> 
> 时间：2013-03-22T10:15:51.833
> 
> 标签：security, xpages

我很确定这是不可能的，但我还是要问。

我正在构建一个处理患者记录的系统。新用户需要能够搜索患者，并在找到后从管理员请求访问他们的文件。

即使用户无权访问它们，我如何显示所有文档的列表？只有将它们添加到 Readers 字段后，它们才会出现在视图中，这违背了搜索的目的。

我的计划是创建 2 个文档 - 原始患者文档和包含姓名、地址的精简文档，仅用于搜索

有没有更好的方法来做到这一点，或者 2 文档方法是要走的路？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:24:10.490

使用 sessionAsSigner 获取数据库签名者权限的数据库对象并对其运行搜索。这将为您提供可以类似于使用数据表查看的文档集合。

示例（对于中等视图效果很好 - 对于较大的视图可能需要一些优化）：

```
 <xp:panel id="viewPanel" styleClass="usersPanel">
    <xp:this.dataContexts>
        <xp:dataContext var="usersList">
            <xp:this.value><![CDATA[#{javascript:               
var uview = sessionAsSigner.getCurrentDatabase().getView("someView");
uview.FTSearch("Some query");
return uview.getAllEntries();
 }]]></xp:this.value>
        </xp:dataContext>
    </xp:this.dataContexts>
    <xp:pager partialRefresh="true" layout="Previous Group Next"
        xp:key="headerPager" id="pager2" for="usersList">
    </xp:pager>
    <xp:dataTable id="usersList" rows="30"
        var="entry" value="#{usersList}">

        <xp:column id="column1">
            <xp:this.facets>
                <xp:span xp:key="header"
                    styleClass="frameworkViewColumnHeader">
                    Użytkownik
                </xp:span>
            </xp:this.facets>
            <xp:text escape="true" id="computedField1"
                value="#{javascript:entry.getColumnValues().get(0)}">
            </xp:text>
        </xp:column>
        <xp:column id="column2">
            <xp:this.facets>
                <xp:span xp:key="header"
                    styleClass="frameworkViewColumnHeader">
                    Instytucja
                </xp:span>
            </xp:this.facets>
            <xp:text escape="true" id="computedField2"
                value="#{javascript:entry.getColumnValues().get(1)}">
            </xp:text>
        </xp:column>
    </xp:dataTable>
 </xp:panel> 
```

# batch-file - 从变量中批量提取路径和文件名

> ID：15567809
> 
> 赞同：88
> 
> 时间：2013-03-22T10:15:52.920
> 
> 标签：batch-file, path

如何从变量中提取路径和文件名？

```
Setlocal EnableDelayedExpansion
set file=C:\Users\l72rugschiri\Desktop\fs.cfg 
```

我想在不使用任何功能或任何 GOTO 的情况下做到这一点。是否可以？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2013-03-22T10:32:41.343

```
@ECHO OFF
SETLOCAL
set file=C:\Users\l72rugschiri\Desktop\fs.cfg
FOR %%i IN ("%file%") DO (
ECHO filedrive=%%~di
ECHO filepath=%%~pi
ECHO filename=%%~ni
ECHO fileextension=%%~xi
) 
```

不太确定没有“功能”**是**什么意思

显然，`ECHO`改为`SET`设置变量而不是回显它们......

有关完整列表，请参阅`for` [文档](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/for)。

* * *

ceztko的测试用例（供参考）

```
@ECHO OFF
SETLOCAL
set file="C:\Users\ l72rugschiri\Desktop\fs.cfg"
FOR /F "delims=" %%i IN ("%file%") DO (
ECHO filedrive=%%~di
ECHO filepath=%%~pi
ECHO filename=%%~ni
ECHO fileextension=%%~xi
) 
```

评论：请看评论。

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2013-03-22T10:33:08.657

您只能从 (1) BAT 本身`%1`的参数或 (2) CALL 的参数`%1`或 (3) 局部 FOR 变量中提取路径和文件名`%%a`。

* * *

`HELP CALL`或者`HELP FOR`您可以找到更详细的信息：

*%~1 - 扩展 %1 删除任何周围的引号 (")
%~f1 - 将 %1 扩展为完全限定的路径名
​​ %~d1 - 将 %1 扩展为仅驱动器号
%~p1 - 将 %1 扩展为仅路径
%~n1 - 仅将 %1 扩展为文件名
%~x1 - 仅将 %1 扩展为文件扩展名
%~s1 - 扩展路径仅包含短名称
%~a1 - 将 %1 扩展为文件属性
%~t1 - 扩展 % 1 到文件
%~z1 的日期/时间 - 将 %1 扩展到文件的大小*

* * *

然后尝试以下操作：

将要解析的字符串作为参数传递给 CALL

```
call :setfile ..\Desktop\fs.cfg
echo %file% = %filepath% + %filename%
goto :eof

:setfile
set file=%~f1
set filepath=%~dp1
set filename=%~nx1
goto :eof 
```

或等效的，将文件名作为本地 FOR 变量传递

```
for %%a in (..\Desktop\fs.cfg) do (
    set file=%%~fa
    set filepath=%%~dpa
    set filename=%%~nxa
)    
echo %file% = %filepath% + %filename% 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-01-02T23:02:30.087

所有这些都对我有用：

```
@Echo Off
Echo Directory = %~dp0
Echo Object Name With Quotations=%0
Echo Object Name Without Quotes=%~0
Echo Bat File Drive = %~d0
Echo Full File Name = %~n0%~x0
Echo File Name Without Extension = %~n0
Echo File Extension = %~x0
Pause>Nul 
```

输出：

```
Directory = D:\Users\Thejordster135\Desktop\Code\BAT\

Object Name With Quotations="D:\Users\Thejordster135\Desktop\Code\BAT\Path_V2.bat"

Object Name Without Quotes=D:\Users\Thejordster135\Desktop\Code\BAT\Path_V2.bat

Bat File Drive = D:

Full File Name = Path.bat

File Name Without Extension = Path

File Extension = .bat 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-27T15:08:22.550

如果您想从实际运行的批处理文件中获取信息，请尝试以下操作：

```
@echo off
set myNameFull=%0
echo myNameFull     %myNameFull%
set myNameShort=%~n0
echo myNameShort    %myNameShort%
set myNameLong=%~nx0
echo myNameLong     %myNameLong%
set myPath=%~dp0
echo myPath         %myPath%
set myLogfileWpath=%myPath%%myNameShort%.log
echo myLogfileWpath %myLogfileWpath% 
```

更多样品？C:> 求助电话

%0 = 参数 0 = 批处理文件 %1 = 参数 1 - 1st par. 传递给批处理文件...所以你可以在第一个（例如“%”）和最后一个（例如“1”）之间尝试那些东西（例如“~dp”）作为参数

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-29T09:05:16.597

迟到的答案，我知道，但对我来说，下面的脚本非常有用 - 它也回答了这个问题，用一个标志击中两只苍蝇；-)

以下脚本在文件资源管理器的上下文菜单中展开**SendTo ：**

```
@echo off
cls
if "%~dp1"=="" goto Install

REM change drive, then cd to path given and run shell there
%~d1
cd "%~dp1"
cmd /k
goto End

:Install
rem No arguments: Copies itself into SendTo folder
copy "%0" "%appdata%\Microsoft\Windows\SendTo\A - Open in CMD shell.cmd"

:End 
```

如果您通过双击运行此脚本而没有任何参数，它将自己复制到 SendTo 文件夹并将其重命名为“A - 在 CMD shell.cmd 中打开”。之后，它在“SentTo”上下文菜单中可用。

然后，*右键单击*Windows 资源管理器中的任何文件或文件夹，然后选择*“SendTo > A - 在 CMD shell.cmd 中打开”*

该脚本会将驱动器和路径更改为包含您选择的文件或文件夹的路径，并使用该路径打开命令外壳 - 这对 Visual Studio Code 很有用，因为您只需键入“code”。在项目的上下文中运行它。

它是如何工作的？

`%0` - 批处理脚本的完整路径
`%~d1` - 第一个参数中包含的驱动器（例如“C:”​​）
`%~dp1` - 第一个参数中包含的路径
`cmd /k`- 打开一个保持打开状态的命令 shell

这里没有使用，而是`%~n1`第一个参数的文件名。

我希望这对某人有帮助。

# zfcuser - 如何将值从控制器传递到zend framework2中的视图

> ID：15567810
> 
> 赞同：1
> 
> 时间：2013-03-22T10:15:54.170
> 
> 标签：zfcuser

我是zend的初学者。我不知道如何使用zend framework2中的ZfcUser从控制器传递vale以通过表进行更新。这是我在UserController.php中的代码

公共函数 doneAction()

```
 {
    $user = "4";
    $planname="checking";
    $billamount="$89";
    $post=array("planname"=>$planname,"billamount"=>$billamount);
    $service = $this->getUserService();
    $service->done($user,$post);
    return new ViewModel();
} 
```

并在 ZfcUser/Serivce/User.php [用于将值存储在 DB 中]

公共函数完成（$user，数组 $post）

```
{

    $data=array('planname'=>$post['planname'],'billamount'=>$post['billamount']);
    $where = $user->getAdapter()->quoteInto('user_id = 4');
    $user->update($data, $where);
return true;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:16:30.163

创建新`ViewModel`实例时，您可以将值从控制器传递到视图，如下所示：-

```
 $view = new ViewModel(array(
        'user' => $user,
    ));
    return new ViewModel(); 
```

或者，您可以针对实例设置它们：-

```
 $view = new ViewModel();
    $view->user = $user;
    return $view; 
```

# jquery - AJAX 文件检查 - 长时间延迟检查

> ID：15567811
> 
> 赞同：1
> 
> 时间：2013-03-22T10:15:55.457
> 
> 标签：jquery, ajax, file, load, size

我正在尝试根据单击的项目检查视频是否存在，然后加载它。如果视频大于 10 mb，则需要很长时间。我目前已经完成了一项工作，我检查旁边有一个同名的文本文件，这需要几秒钟的时间来加载，但对于我拥有的每个视频都拥有所有这些文本文件并不理想。我正在根据单击的内容检查视频是否存在，并使用该变量来定义视频名称。

有没有办法让我在没有长时间延迟的情况下检查视频网址？

```
var my_video

$.ajax({
    async: false,
    url: "./videos/" + my_video + ".txt",
    type: "HEAD",
    error: function () {
            // Don't load video
    },
    success: function () {
            // Load video
            $('.video').show().attr("src","./videos/" + my_video + ".webm");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:15:01.507

经过大量挖掘找到了答案。我基本上可以通过使用“标题”设置加载文件的第一部分，并且只加载前几个字节。

```
$.ajax({type: "GET",
        url: url,
        headers : { "Range" : 'bytes=0-16' },
        .... 
```

# javascript - javascript 表单剩余字符数计数器 - xhtml 严格验证的修改要求

> ID：15567814
> 
> 赞同：0
> 
> 时间：2013-03-22T10:15:58.197
> 
> 标签：javascript, html, counter, w3c-validation, xhtml-1.0-strict

我在我的页面中使用[了这个 javascript 代码](https://stackoverflow.com/questions/11283244/javascript-remaining-characters-without-input)，然后检查了 w3c 验证器。我有 2 个错误，它们是：

1.  没有属性“onKeyDown”
2.  没有属性“onKeyUp”

我不会将我的 html 声明类型更改为过渡。所以我需要修改脚本。

### 脚本 HTML

```
<textarea id="message" cols="20" rows="5" name="message" onKeyDown="textCounter('message','messagecount',100);" onKeyUp="textCounter('message','messagecount',100);"></textarea>
<span id="charsleft"></span> 
```

### 脚本 Javascript：

```
<script>
    function textCounter(textarea, countdown, maxlimit) {
        var textareaid = document.getElementById(textarea);
        if (textareaid.value.length > maxlimit)
          textareaid.value = textareaid.value.substring(0, maxlimit);
        else
          document.getElementById('charsleft').innerHTML = '('+(maxlimit-textareaid.value.length)+' characters available)';
      }
</script>

<script type="text/javascript">
    textCounter('message','messagecount',100);
</script> 
```

由于我对 javascript 一无所知，所以我想问你：应该如何修改才能使我的页面经过 XHTML 1 严格验证？或者我是否必须寻找另一个经过 XHTML 1.0 Strict 验证并执行相同操作的脚本？

注意：暂时脚本是这样工作的：当你在textarea中写入时，两个span之间的部分会`<span id="charsleft"></span>`出现并实时写入剩余字符数。展示风格的方式对我来说并不重要。例如，第一个值（字符数限制）始终可见。唯一的一点是 W3C 的验证。

谢谢，BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:21:02.743

w3c 验证器在给出类似错误时包含“如何修复”提示。

在你的情况下，它说：

> 如何修复：检查元素和属性的拼写和大小写，**（记住 XHTML 都是小写的）** ...

也就是说，将属性名称更改为全部小写：

```
<textarea id="message" cols="20" rows="5" name="message" onkeydown="textCounter('message','messagecount',100);" onkeyup="textCounter('message','messagecount',100);"></textarea>
<span id="charsleft"></span> 
```

最好从脚本块中的 JS 中删除内联事件属性并添加事件处理程序，但我感觉很懒，所以我声明它超出了范围。（谷歌“unobtrusive javascript”以获得一些提示。）

# ios - 带有 UILocalisedIndexCollat ion 的 FetchedResultController

> ID：15567815
> 
> 赞同：1
> 
> 时间：2013-03-22T10:16:00.113
> 
> 标签：ios

我正在尝试实现类似的联系人页面`iPhone`。我尝试使用`fetchedResultsController`with`UILocalisedIndexCollation`但它们不能很好地协同工作。

对于 UILocalisedIndexCollat​​ion，它会在确定排序顺序时使用汉字的音名，这是我想要的。但是，在我的 fetchedResultsController 中，即使我将排序描述符设置为 localisedCaseInsensitiveCompare，汉字始终是最后一项。为什么他们的行为不同？

# jpa - JPA persist() 方法没有发挥作用

> ID：15567820
> 
> 赞同：0
> 
> 时间：2013-03-22T10:16:08.800
> 
> 标签：jpa

我正在开发一个 JPA，jsf2.0 Hibernate 项目。[它是通过您可以在此处](http://www.primefaces.org/showcase/ui/schedule.jsf)看到的 primefaces 日历对用户操作的管理。

我设法获取用户的操作并将它们显示在日历中，但是当我想添加一个新操作时，它似乎可以工作：我没有错误消息，但实际上该操作没有添加到数据库中。似乎persist方法没有完成它的工作，它没有返回任何错误消息，所以我不知道该怎么做才能看到原因。

我把这 2 个动作的 2 个函数放在这里（显示和添加）：

添加动作的方法（不起作用）

```
public void creerAction(Action action){

     Date date = action.getDateAction();
     action.setDateAction(date);

     EntityManagerFactory emf = null;

        try{
        emf = Persistence.createEntityManagerFactory("GA2010-ejbPU-dev");
        em = emf.createEntityManager();

         em.persist(action);

        FacesMessage message = new FacesMessage("Action  " + action.getTexteAction()+ " ajouté avec succès");
        FacesContext.getCurrentInstance().addMessage(null, message);

     }catch(PersistenceException e){
         System.out.println(e.getMessage());
     }

    } 
```

以及获取用户所有操作的方法（有效）

```
public List<Action> getAllAction(){
                HttpSession sess = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(true);

        String codeUser =  (String) sess.getAttribute("codeUser");

        EntityManagerFactory emf = null;

        try{
        emf = Persistence.createEntityManagerFactory("GA2010-ejbPU-dev");
        em = emf.createEntityManager();

         Query requete = em.createQuery(SELECT_ALL_ACTION);
          requete.setParameter("codeUtilisateur", codeUser);

         this.allAction= requete.getResultList();

        }catch(Exception e){

         this.message = new FacesMessage(e.getMessage())    ;
         FacesContext.getCurrentInstance().addMessage( null, message );

        }

        return allAction;

    } 
```

这是我的单位持久性的声明

```
<persistence-unit name="GA2010-ejbPU-dev" transaction-type="JTA">

        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>dev</jta-data-source>
         <class>entities.Utilisateur</class>
         <class>entities.Action</class>
        <properties>
          <property name="eclipselink.target-server" value="SunAS9"/>
          <property name="eclipselink.logging.level" value="FINE"/>
          <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
          <property name="eclipselink.ddl-generation.output-mode" value="sql-script"/>
          <property name="eclipselink.application-location" value="C:/tmp"/>
        </properties> 
```

我如何才能看到为什么坚持不坚持以及为什么我没有错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:25:00.617

持久化需要在事务中完成。在您提交事务之前，该对象不会持久化：

[Hibernate EntityManager 教程](http://docs.jboss.org/hibernate/orm/3.6/quickstart/en-US/html/hibernate-gsg-tutorial-jpa.html)

# html - 尝试在 div 中平均分配元素以填充之间的空间

> ID：15567821
> 
> 赞同：1
> 
> 时间：2013-03-22T10:16:14.013
> 
> 标签：html, css

尝试生成一个表格，该表格将在 div 中平均分配每条信息。

这就是它现在的样子，我正在尝试将事物分开： ![在此处输入图像描述](../Images/61ce360bdce0ad8b2c80e3ce5608969b.png)

```
 <section id="databox" class="databox">
     <div id="'+cursor.value.userName +'"><span>' + 
        cursor.value.userName + '</span> | <span>' + 
        cursor.value.fn+ '</span> | <span>'+ 
        cursor.value.ln+ '</span> | <span>'+ 
        cursor.value.pw+ '</span> | <span>'+ 
        cursor.value.em+ '</span> | <span>'+ 
        cursor.value.dob+ '</span> | <span>'+
        cursor.value.tel+ '</span> | <span>'+ 
        cursor.value.scl+ '</span> | <span>'+
        cursor.value.gender+ 
        ' <input type="button" onclick="removeobject(\'' + cursor.value.userName + '\')" value="remove"/></div>'
 </section> 
```

CSS：

```
 .databox{
    color:white;
    padding: 2px 10px;
}
#databox div{
    text-align: justify;
}
#databox div span{
    display: inline-block;

}
.databox div:nth-child(odd){
    padding-top: 3px;
    padding-bottom: 3px;
    background: rgba(255,255,255,0.1); 
    margin-bottom: 6px;
}
.databox div:nth-child(even){
    background:rgba(255,255,255,0.3);
    padding-top: 3px;
    padding-bottom: 3px;    
    margin-bottom: 6px;
}
#databox div:after{
    width:100%;
    display: inline-block; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:51:39.787

如果您愿意接受丑陋的解决方案，那么这里有一个：

[http://jsfiddle.net/KBZg3/](http://jsfiddle.net/KBZg3/)

占（某人）的便宜`text-align: justify`

# c - 为什么 fgets 不在 while 循环中读取整行但在 for 循环中工作？

> ID：15567823
> 
> 赞同：0
> 
> 时间：2013-03-22T10:16:19.083
> 
> 标签：c, linux, fgets

如果我的 fgets 在一个 while 循环中，它只返回一半的字符串。如果它在 for 循环中，它会返回整个字符串。知道为什么吗？

下面的代码：

```
 FILE *fp; // File pointer
    char filename[] = "results.tsv";
    fp = fopen(filename, "r"); // Open file argv[1] for READ

    char s[4096];

    int num = atoi(fgets(s, sizeof(s), fp)); // Get first line (number of units in file)

    int i;
    for(i = 0; i < num; i++)
    {
        printf("%s", fgets(s, sizeof(s), fp)); // Prints everything
    }

    while (fgets(s, sizeof(s), fp) != NULL) // Loop until no more lines
    {
        printf("%s\n", s); // Only prints the x's
    }

    fclose(fp); // Close file 
```

和文件内容：

```
1
xxxxxxxx       yyyy       eee 
```

大空格是制表符 (\t)。

如果我运行它，我会得到：

仅用于循环：

```
xxxxxxxx       yyyy       eee 
```

仅 while 循环：

```
xxxxxxxx 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:49:16.510

正如已经诊断的那样，您的代码“对我有用”。这是我为它创建的 SSCCE。如果不带参数调用，它将使用`while`循环。如果使用任何参数调用，它将使用`for`循环。无论哪种方式，它都适合我。请注意，代码不`fgets()`直接使用 from 的返回值；它在这样做之前检查输入操作是否成功。它还呼应了它正在做的事情和正在阅读的内容。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    FILE *fp;
    char filename[] = "results.tsv";

    if ((fp = fopen(filename, "r")) == 0)
    {
        fprintf(stderr, "%s: failed to open file %s\n", argv[0], filename);
        exit(1);
    }

    char s[4096];

    if (fgets(s, sizeof(s), fp) == 0)
    {
        fprintf(stderr, "Premature EOF\n");
        exit(1);
    }

    int num = atoi(s);
    printf("Num lines: %d\n", num);

    if (argc > 1)
    {
        printf("For loop:\n");
        for (int i = 0; i < num; i++)
        {
            if (fgets(s, sizeof(s), fp) == 0)
            {
                fprintf(stderr, "Premature EOF\n");
                exit(1);
            }
            printf("%d: %s", i+1, s);
        }
    }
    else
    {
        int i = 0;
        while (fgets(s, sizeof(s), fp) != NULL)
        {
            printf("While loop:\n");
            printf("%d: %s", ++i, s);
        }
    }

    fclose(fp);

    return 0;
} 
```

如果您使用此代码并且它在您的系统上失败，那么您可以提交您的证据。除其他事项外，您应该确定您正在使用的平台，并且您应该提供文件中数据的十六进制转储（或等价物）`results.tsv`。例如，我使用的数据文件包含以下字节：

```
0x0000: 31 0A 78 78 78 78 78 78 78 78 09 79 79 79 79 09   1.xxxxxxxx.yyyy.
0x0010: 65 65 65 65 0A                                    eeee.
0x0015: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:19:25.240

在使用 while 循环开始读取之前，您必须使从流（文件）读取的位置开始于 for 循环开始读取的相同位置

您可以通过以下两种方式之一来做到这一点：

1）关闭文件并重新打开它并在开始while循环之前读取第一行

2）使用 fseek （如**KiriliKirov**所说）指向 for 循环开始读取的相同位置。要做到这一点，您必须使用以下函数获取当前位置（for 循环开始读取的位置）`ftell()`：

```
int num = atoi(fgets(s, sizeof(s), fp));
long int start_read = ftell (fp); // get the current postion //add this line in your code

.....

fseek ( fp , start_read , SEEK_SET ); // add this line in your code
while (fgets(s, sizeof(s), fp) != NULL) 
```

第二种解决方案将避免关闭和重新打开文件以及读取第一行。

[`ftell()`](http://www.cplusplus.com/reference/cstdio/ftell/)返回流的位置指示符的当前值。

[`fseek()`](http://www.cplusplus.com/reference/cstdio/fseek/)将与流关联的位置指示器设置为新位置

# spring - Spring 测试上下文框架

> ID：15567826
> 
> 赞同：0
> 
> 时间：2013-03-22T10:16:25.953
> 
> 标签：spring, testing, junit

我有一个使用测试上下文框架的项目。

我正在使用 Run As -> JUnit Test 执行测试，但它显示`initializationError()`；

堆栈跟踪 ：

```
java.lang.NoSuchFieldError: NULL
    at org.junit.runners.ParentRunner.<init>(ParentRunner.java:57)
    at org.junit.runners.BlockJUnit4ClassRunner.<init>(BlockJUnit4ClassRunner.java:57)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.<init>(SpringJUnit4ClassRunner.java:104)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.junit.internal.requests.ClassRequest.buildRunner(ClassRequest.java:33)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:28)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.<init>(JUnit4TestClassReference.java:25)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:WEB-INF/spring-servlet.xml")
public class PoolRuleMappingDaoTest {

     @Autowired
     private PoolRuleDao poolRuleDao;

     public PoolRuleMappingDaoTest() {

     }

     @Before
     public void setup() {

     }

     @After
     public void tearDown() {

     }

     @Test
     public void getCountryTest() { 

     }      
} 
```

如何运行测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:16:41.277

看起来您可能正在运行不受支持的 JUnit 版本。

你用的是什么版本的`spring-test`？

你用的是什么版本的`junit`？

仅供参考：Spring 2.5 需要 JUnit 4.4；Spring 3.0 及更高版本需要 JUnit 4.5 或更高版本。

# c# - 将文件添加到 Zip 并通过 Mail 问题 C# 发送它们

> ID：15567832
> 
> 赞同：1
> 
> 时间：2013-03-22T10:16:36.057
> 
> 标签：c#, .net, zip, content-type

我创建了一种方法，可以收集文件夹中的每个文件，然后将它们插入到 zip 文件中。然后通过邮件将 zip 文件发送给客户。我的问题是我可以毫无问题地发送带有 zip 文件的邮件消息，但是如果另一个用户生成 zip 文件并发送它，它会看起来像这样。

![在此处输入图像描述](../Images/f0f1248ba2497d051f2a260c803e7ef6.png)

尝试将 excel 文件附加到邮件消息时，我遇到了同样的问题。但我发现您必须设置附加文件的 ContentType。在添加这一行之后： `ContentType ct = new ContentType("application/vnd.ms-excel");` 对于它工作的 excel 文件。

我的问题是我现在正在尝试附加一个 zip 文件，我正在使用这一行：`ContentType ct = new ContentType("application/zip"); 但这不起作用。我正在使用**DotNetZipLib-DevKit-v1.9**将文件添加到 zip 文件中。

这是我的代码：

```
public void SendMailedFilesVallensbaek()
        {
            string[] vallensbeakFileNames = Directory.GetFiles(vallensbaekFiles);
            if (vallensbeakFileNames.Count() > 0)
            {
                ContentType ct = new ContentType("application/zip");
                string zipFile = vallensbaekFiles+@"\someZipFile.zip";
                using (ZipFile zip = new ZipFile())
                {
                    foreach (string file in vallensbeakFileNames)
                    {
                            zip.AddFile(file);
                    }

                    zip.Save(zipFile);
                }
                using (System.Net.Mail.SmtpClient client = new System.Net.Mail.SmtpClient("ares"))
                {
                    using (System.Net.Mail.MailMessage msg = new System.Net.Mail.MailMessage())
                    {
                        msg.From = new MailAddress("system@mail.dk");
                        msg.To.Add(new MailAddress("lmy@mail.dk "));
                        msg.Subject = "IBM PUDO";
                        msg.Body = "Best Regards";
                        msg.Body += "<br/>";
                        msg.Body += "me";
                        msg.IsBodyHtml = true;

                        Attachment attachment = new Attachment(zipFile, ct);
                        msg.Attachments.Add(attachment);
                        //foreach (string file in sentFiles)
                        //{
                        //    Attachment attachment = new Attachment(file, ct);
                        //    msg.Attachments.Add(attachment);
                        //}

                        client.Send(msg);
                        client.Dispose();
                        msg.Dispose();
                        ct = null;
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:54:25.603

您应该检查 zip 文件是否在您的本地文件夹中创建，并且您的本地文件夹能够被 ASP.NET 用户访问。

# ios - Xcode Storyboard 和 xib 连接

> ID：15567833
> 
> 赞同：2
> 
> 时间：2013-03-22T10:16:37.180
> 
> 标签：ios, storyboard, xib, viewcontroller, xcode4.6

我有一个带有许多视图控制器的故事板项目，我创建了一个名为“connecter.h,connector.m”的类，现在我可以将这个类连接到一个 .xib 文件吗？

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T10:20:42.780

您可以在创建`XIB`时创建`connector.h`并`connector.m`选择它的子类`UIViewController`并单击复选框：“使用 XIB 用于用户界面”。如果您已经创建了 .m 和 .h 文件，那么您可以通过从窗口中选择 View 来添加一个新的 GUI 文件，最后将其 Controller Custom 类设置为`connector`You could have `StoryBoard`and `XIB`together in the same project。[查看更多帮助](https://stackoverflow.com/questions/9701873/use-storyboards-in-a-project-which-has-xib-files-iphone)。

为了呈现视图控制器，您可以使用以下代码

```
YourViewController *viewController=[[YourViewController alloc]initWithNibName:@"ViewControllerName" bundle:nil];

[self presentViewController:viewController animated:YES completion:nil]; 
```

的情况下`NavigatinController`

```
 [self.navigationController pushViewController:viewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:23:03.750

这样做可以将您的连接器类与 xib 绑定​​：[这里我将 ViewController 类与 xib 绑定​​]

![选择文件所有者并在自定义类中写下您的类名](../Images/b61f5ef2e03c7beb7dba8e75baf6dfb9.png) 并将视图与文件的所有者联系起来。并且您的连接器类必须是 ViewController 类型并且具有该方法

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:28:38.327

在编辑器中打开故事板，然后单击任何视图控制器。这样做将列出您在选择任何 xib 时用来查看的所有代理对象。下图必须帮助您更好地理解。

![在此处输入图像描述](../Images/c7225b4152882134d463c487c1da1855.png) 现在转到 Identity Inspector 选项卡并在突出显示的文本字段中输入您的班级名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:28:55.000

创建一个`Xib`文件，将`FilesOwner`类设置为`connecter.h`. 在创建连接器类的实例时

```
[[connecter alloc] initWithNibName:@"Nib_Name" bundle:nil]; 
```

# hadoop - 使用 cloudera manager 免费版配置 hadoop 多节点

> ID：15567836
> 
> 赞同：0
> 
> 时间：2013-03-22T10:16:43.143
> 
> 标签：hadoop, cloudera, cloudera-manager

谁能帮助我如何使用 cloudera manager 免费版配置 hadoop 多节点？

我有 8 个系统连接在网络中，

我的要求是一个应该是名称节点，作业跟踪器一个应该是辅助名称节点，6应该是数据节点

请帮助配置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:35:08.487

轻松配置 Hadoop 集群没有灵丹妙药。设置集群需要一些努力。[这](https://ccp.cloudera.com/display/FREE45DOC/Cloudera+Manager+Free+Edition+Installation+Guide)是设置 Cloudera 集群的文档。

# qt - 发出结构的信号

> ID：15567838
> 
> 赞同：2
> 
> 时间：2013-03-22T10:16:47.267
> 
> 标签：qt, qt-signals

这个问题在我脑海里想了很多天，但直到现在我才明白

如果我尝试发送结构信号说

```
struct radarStruct
{
    unsigned char *Data;
    unsigned int rate;
    unsigned int timeStamp;
    float timeSec;
}; 
```

我应该发出这样的信号吗

```
signals:
    void radarGeneratorData(const radarStruct &); 
```

或者

```
signals:
    void radarGeneratorData(radarStruct *); 
```

更多： unsigned char *Data 怎么样，信号是否会对其进行深层复制？

类似于 unsigned char *data 我如何发送信号。

朋友请帮我解决这个问题，通过信号和插槽机制发送结构的最佳方式..

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:34:53.383

这主要取决于您的要求。

如果要将结构发送到另一个对象并“共享”该结构，则需要将该结构作为指针发送，以便在源处反映更改。如果不是，那么您希望将其作为 const ref 发送。

对于任何一种方法，请记住您需要`Q_DECLARE_METATYPE(YourStructType)`在信号/槽参数中使用结构之前。

至于何时发生深拷贝/何时发生例程回调等效过程，您可以通读

[qt 插槽中的信号失败](https://stackoverflow.com/questions/3797447/signaling-failure-in-qt-slots)

单线程通信和跨线程通信本身不同，输出将再次取决于您的使用情况。

# mysql - MySQL 到 PostgreSQL 的 to_tsvector、@@ 和 to_tsquery？

> ID：15567839
> 
> 赞同：2
> 
> 时间：2013-03-22T10:16:53.423
> 
> 标签：mysql, sql, postgresql, full-text-search

在 PostgreSQL 中，我们可以像这样基于全文搜索来搜索表 -

```
SELECT title
FROM pgweb
WHERE to_tsvector('english', body) @@ to_tsquery('english', 'friend'); 
```

来源 - [http://www.postgresql.org/docs/current/static/textsearch-tables.html](http://www.postgresql.org/docs/current/static/textsearch-tables.html)

我们如何在 MySQL 5.5 中进行类似的搜索，这在 PostgreSQL 中很容易完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:27:36.670

您可能需要 MySQL 的[全文搜索](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)功能。本质上，您创建一个`FULLTEXT`索引，然后使用[`MATCH() ... AGAINST`](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html#function_match).

我不知道在 MySQL 中设置每个查询的搜索语言的工具，但这并不意味着不存在这样的支持。目前尚不清楚每个查询的语言设置是否是您的要求。

MySQL 的最新稳定版本支持对现代事务和崩溃安全的 InnoDB 表类型以及不安全的 MyISAM 表类型进行全文搜索。如果你的 MySQL 只在 MyISAM 上做 FTS，那么是时候升级了。5.6 支持 InnoDB 上的全文搜索。

或者，如果您真的无法升级，您可以将重要数据存储在 InnoDB 表中并运行定期查询来更新您用作物化视图的 MyISAM 表，仅用于全文搜索：

*   创建一个新的 MyISAM 表
*   `INSERT INTO ... SELECT`将 InnoDB 表中的数据放入新的 MyISAM 表中
*   `CREATE`新 MyISAM 表上的全文索引
*   `DROP`您用于全文索引的旧 MyISAM 表；和
*   最后[`ALTER TABLE ... RENAME`](http://dev.mysql.com/doc/refman/5.6/en/alter-table.html)，新的 MyISAM 表以旧表的名称命名。

在删除旧表并重新创建新表之间，您将有一个非常短的窗口，在此期间全文索引不可用。您的数据在视图刷新之间也会过时和陈旧，尽管您可以使用触发器解决这个问题（我对 MySQL 的了解不够多）。如果您无法忍受这些限制，请升级到 5.6。

MySQL 的全文搜索提供了对停用词和其他调整的控制。这是一个可靠的产品，应该可以很好地完成工作。

# sql - oracle存储过程无法运行

> ID：15567840
> 
> 赞同：1
> 
> 时间：2013-03-22T10:16:58.477
> 
> 标签：sql, oracle, plsql, oracle11g

我是oracle新手，写了一个复杂的存储过程，根据不同的条件选择不同的数据。我无法运行我的存储过程，它给出了以下错误：

```
ORA-06550: line2, column 3:
PLS-00905: object SAURAV.LOG_DETAIL is invalid
ORA-06550: line 2, column 3:
PL/SQL: Statement Ignored
ORA-06512: at line 58 
```

我的代码如下：

```
CREATE OR REPLACE
PROCEDURE LOG_DETAIL(
    startIndex IN INT
    ,pageSize IN INT
    ,branchId IN varchar2
    ,customerId IN varchar2
    ,fromDate IN DATE
    ,toDate IN DATE
    ,withDate IN INT
    ,p_cursor OUT sys_refcursor
    ) AS
BEGIN
IF withDate = 1 then
        IF branchId = NULL then
            IF customerId = 'All' then
                OPEN p_cursor
                FOR SELECT * FROM (
        SELECT ROW_NUMBER() OVER (
                ORDER BY id
                ) AS MyRows
            ,log_info.branch_id
            ,branch_name
            ,customer_id
            ,in_time
            ,out_time
            ,date_time
            ,ip
            ,(
                SELECT COUNT(id)
                FROM log_info
                WHERE date_time BETWEEN fromDate || '%' AND toDate || '%'
                ) AS RowNumber  FROM log_info,branch_info
        WHERE date_time BETWEEN fromDate || '%' AND toDate || '%'
            AND branch_info.branch_id = log_info.branch_id
        )
    WHERE MyRows BETWEEN startIndex AND startIndex + pageSize - 1;
            ELSE
            OPEN p_cursor 
            FOR SELECT * FROM (
        SELECT ROW_NUMBER() OVER (
                ORDER BY id
                ) AS MyRows
            ,log_info.branch_id
            ,branch_name
            ,customer_id
            ,in_time
            ,out_time
            ,date_time
            ,ip
            ,(
                SELECT COUNT(id)
                FROM log_info
                WHERE customer_id = customerId
                    AND date_time BETWEEN fromDate || '%'
                        AND toDate || '%'
                ) AS RowNumber
        FROM log_info,branch_info
        WHERE customer_id = customerId
            AND date_time BETWEEN fromDate || '%'
                AND toDate || '%'
            AND log_info.branch_id = branch_info.branch_id
        )
    WHERE MyRows BETWEEN startIndex
            AND startIndex + pageSize - 1;
END IF;
ELSE
    IF customerId = 'All' then
        OPEN p_cursor
        FOR SELECT * FROM (
    SELECT ROW_NUMBER() OVER (
            ORDER BY id
            ) AS MyRows
        ,log_info.branch_id
        ,branch_name
        ,customer_id
        ,in_time
        ,out_time
        ,date_time
        ,ip
        ,(
            SELECT COUNT(id)
            FROM log_info
            WHERE branch_id = branchId
                AND date_time BETWEEN fromDate || '%'
                    AND toDate || '%'
            ) AS RowNumber
    FROM log_info
        ,branch_info
    WHERE log_info.branch_id = branchId
        AND date_time BETWEEN fromDate || '%'
            AND toDate || '%'
        AND branch_info.branch_id = log_info.branch_id
    )
WHERE MyRows BETWEEN startIndex
        AND startIndex + pageSize - 1;
        ELSE
        OPEN p_cursor
        FOR SELECT * FROM (
    SELECT ROW_NUMBER() OVER (
            ORDER BY id
            ) AS MyRows
        ,log_info.branch_id
        ,branch_name
        ,customer_id
        ,in_time
        ,out_time
        ,date_time
        ,ip
        ,(
            SELECT COUNT(id)
            FROM log_info
            WHERE branch_id = branchId
                AND customer_id = customerId
                AND date_time BETWEEN fromDate || '%'
                    AND toDate || '%'
            ) AS RowNumber
    FROM log_info
        ,branch_info
    WHERE log_info.branch_id = branchId
        AND customer_id = customerId
        AND date_time BETWEEN fromDate || '%'
            AND toDate || '%'
        AND log_info.branch_id = branch_info.branch_id
    )
WHERE MyRows BETWEEN startIndex
        AND startIndex + pageSize - 1;
        END IF ;
        END IF ;
        ELSE
        IF customerId = 'All' then
            IF branchId = NULL then
                OPEN p_cursor
                FOR SELECT * FROM (
    SELECT ROW_NUMBER() OVER (
            ORDER BY id
            ) AS MyRows
        ,log_info.branch_id
        ,branch_name
        ,customer_id
        ,in_time
        ,out_time
        ,date_time
        ,ip
        ,(
            SELECT COUNT(id)
            FROM log_info
            ) AS RowNumber
    FROM log_info
        ,branch_info
    WHERE branch_ingo.branch_id = log_info.branch_id
    )
WHERE MyRows BETWEEN startIndex
        AND startIndex + pageSize - 1;
        ELSE
        OPEN p_cursor
        FOR SELECT * FROM (
    SELECT ROW_NUMBER() OVER (
            ORDER BY id
            ) AS MyRows
        ,log_info.branch_id
        ,branch_name
        ,customer_id
        ,in_time
        ,out_time
        ,date_time
        ,ip
        ,(
            SELECT COUNT(id)
            FROM log_info
            WHERE branch_id = branchId
            ) AS RowNumber
    FROM log_info
        ,branch_info
    WHERE log_info.branch_id = branchId
        AND log_info.branch_id = branch_info.branch_id
    )
WHERE MyRows BETWEEN startIndex
        AND startIndex + pageSize - 1;
        END IF ;
        ELSE
        IF branchId = NULL then
        OPEN p_cursor
        FOR SELECT * FROM (
    SELECT ROW_NUMBER() OVER (
            ORDER BY id
            ) AS MyRows
        ,log_info.branch_id
        ,branch_name
        ,customer_id
        ,in_time
        ,out_time
        ,date_time
        ,ip
        ,(
            SELECT COUNT(id)
            FROM log_info
            WHERE customer_id = customerId
            ) AS RowNumber
    FROM log_info
        ,branch_info
    WHERE customer_id = customerId
        AND branch_info.branch_id = log_info.branch_id
    )
WHERE MyRows BETWEEN startIndex
        AND startIndex + pageSize - 1;
        ELSE
        OPEN p_cursor
        FOR SELECT * FROM (
    SELECT ROW_NUMBER() OVER (
            ORDER BY id
            ) AS MyRows
        ,log_info.branch_id
        ,branch_name
        ,customer_id
        ,in_time
        ,out_time
        ,date_time
        ,ip
        ,(
            SELECT COUNT(id)
            FROM log_info
            WHERE customer_id = customerId
                AND branch_id = branchId
            ) AS RowNumber
    FROM log_info
        ,branch_info
    WHERE customer_id = customerId
        AND log_info.branch_id = branchId
        AND log_info.branch_id = branch_info.branch_id
    )
WHERE MyRows BETWEEN startIndex
        AND startIndex || pageSize - 1;
        END IF ;
    END IF ;
END IF ;
END LOG_DETAIL; 
```

我正在使用以下命令执行程序：

```
 variable z refcursor;
 LOG_DETAIL(1,20,null,'All',null,null,0,z); 
```

执行以下查询后：

```
select * from all_errors where name='LOG_DETAIL' order by sequence 
```

我得到以下结果：

```
OWNER   NAME            TYPE         SEQUENCE  LINE    POSITION       TEXT                                       ATTRIBUTE  MESSAGE_NUMBER
SAURAV  LOG_DETAIL  PROCEDURE   1   30  49  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   2   30  57  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   3   30  29  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   4   30  39  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   5   32  47  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   6   32  55  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   7   32  27  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   8   32  37  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   9   54  11  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   10  54  19  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   11  53  28  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   12  53  38  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   13  59  9   PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   14  59  17  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   15  58  26  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   16  58  36  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   17  84  10  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   18  84  18  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   19  83  27  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204
SAURAV  LOG_DETAIL  PROCEDURE   20  83  37  PLW-07204: conversion away from column type may result in sub-optimal query plan    WARNING  7204 
```

请帮我解决这个问题。

**编辑：**添加堆栈跟踪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:45:11.060

警告消息是由包含此类表达式的字符串引起的：

```
date_time BETWEEN fromDate || '%' AND toDate || '%' 
```

为什么要附加百分号？尝试删除它们并重新创建您的过程以使其有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:00:27.937

至少一个问题是读取的行

```
ELSE
  IF customerId = 'All' then 
```

这应该是

```
ELSIF customerId = 'All' then 
```

我没有去看看`ELSE IF`这段代码中是否还有更多的出现。如果有，请更正它们并重新编译。

分享和享受。

# objective-c - 在 iPhone SDK 上的 For 循环中使用 AFJSONRequestOperation

> ID：15567842
> 
> 赞同：0
> 
> 时间：2013-03-22T10:17:05.920
> 
> 标签：objective-c, xcode, loops, afnetworking, afjsonrequestoperation

我有这段代码，我想在继续 for 循环之前急切地使用`AFJSONRequestOperation`它，但不知何故它不起作用。下面的代码在我的 for 循环中。即使请求尚未完成，如何防止我的循环继续进行？这将帮助我按照我想要的顺序将从成功请求中获得的所有值放入数组中。

这是代码：

```
 NSURL *url = [NSURL URLWithString:[nowShowingTitleListArray objectAtIndex:i]];
    NSURLRequest *theRequest = [NSURLRequest requestWithURL:url];
    [AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"text/html"]];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:theRequest
    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
    {
        // Code when success
    }
    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON)
    {
        NSLog(@"Request Failed with Error: %@", [error localizedDescription]);
    }];

    [operation start]; 
```

目前，我这样做是为了确保将它们按顺序提取并添加到我的数组中：

```
 NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[nowShowingTitleListArray objectAtIndex:i]]];
        NSError *error;
        NSDictionary *JSONDict = [NSJSONSerialization JSONObjectWithData:data
                                                                 options:kNilOptions
                                                                   error:&error];

        if (!JSONDict)
        {
            NSLog(@"Request Failed with Error: %@", [error localizedDescription]);
        }
        else
        {
            // Rest of code
        } 
```

当网络连接突然断开时，这也将帮助我最大限度地减少我在请求中遇到的一些崩溃问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:06:28.850

为什么你要从同一个 URL 获取数据两次？一旦使用 AFJSONRequestOperation 然后使用 dataWithContentsOfURL: 你是否在同一个 for 循环中执行此操作？

您已经在成功块中拥有了 JSON 对象

```
success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
 {
    // Code when success
    // write success code here
 } 
```

您可以为多个网络请求循环调用 AFJSONRequestOperation。

# jquery - Jquery 的滑动问题

> ID：15567844
> 
> 赞同：1
> 
> 时间：2013-03-22T10:17:11.607
> 
> 标签：jquery, slidedown, slideup

我环顾四周，但似乎找不到与我有相同问题的其他人。我希望能够在用户单击时上下滑动一个框，该框将保存我的菜单链接。

我下面的代码可以正常工作，因为它在单击时会向下滑动，然后在再次单击时会向上滑动。但是，当您再次单击该按钮时，它不会一直向下，而是再次向上滑动！

```
$(document).ready( function() {
  $('#Link').click(function() {
      $('#Box').slideDown('slow', function() {   
      $('#Link').click(function() { $('#Box').slideUp('slow')  });   });
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:21:18.617

尝试使用切换，

```
$('#menu_button').toggle(
    function () {
        $('#playfield').animate({ left: constantMenuWidth }, 500, function (e) {
            $('#menu_button').html('<img id="menu_button" src="images/menu_button.png" width="80" height="29" />');
        });
    },
    function () {
        $('#playfield').animate({ left: 0 }, 500, function (e) {
            $('#menu_button').html('<img id="menu_button" src="images/menu_button.png" width="80" height="29" />');
        });
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:20:05.643

利用`.slideToggle()`

```
$('#Link').click(function() {
    $('#Box').slideToggle('slow', function()
    {
        // Animation complete.
    });
}); 
```

# bash - 转义单引号 ssh 远程命令

> ID：15567847
> 
> 赞同：6
> 
> 时间：2013-03-22T10:17:14.940
> 
> 标签：bash, ssh, quotes, double-quotes

我阅读了通过 ssh 在远程命令上转义单引号的任何解决方案。但任何工作狂。

我正在努力

```
ssh root@server "ps uax|grep bac | grep -v grep | awk '{ print $2 }' > /tmp/back.tmp" 
```

不要工作

```
ssh root@server "ps uax|grep bac | grep -v grep | awk \'{ print $2 }\' > /tmp/back.tmp"
....
awk: '{
awk: ^ caracter ''' inválido en la expresión 
```

并尝试将单个配额放在命令上，但也不起作用。

感激的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-02T23:05:13.543

该`ssh`命令将在主机名之后键入的所有文本视为要执行的远程命令。至关重要的是，这对您的问题意味着您不需要像您所做的那样引用整个命令。相反，您可以像在远程系统本身一样键入命令一样发送命令。

这简化了报价问题的处理，因为它减少了您需要使用的报价数量。由于您不会使用引号，因此**所有特殊的 bash 字符都需要使用反斜杠进行转义**。

在您的情况下，您需要输入，

```
ssh root@server ps uax \| grep ba[c] \| \'{ print \$2 }\' \> /tmp/back.tmp 
```

或者你可以双引号而不是转义它们（在这两种情况下，你需要转义美元符号）

```
ssh root@server ps uax \| grep ba[c] \| "'{ print \$2 }'" \> /tmp/back.tmp 
```

老实说，这感觉有点复杂，但我发现在处理向涉及更复杂使用引号的远程系统发送命令时，这些知识非常有价值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T10:22:44.947

在您的第一次尝试中，您使用双引号`"`，因此您需要转义`$`字符：

```
ssh root@server "ps uax|grep bac | grep -v grep | awk '{ print \$2 }' > /tmp/back.tmp"
                                                               ▲ 
```

此外，您可以使用：

```
 ps uax | grep 'ba[c]' | ... 
```

所以你不需要这`grep -v grep`一步。

# matlab - 如何在matlab中过滤数据以去除噪声？

> ID：15567849
> 
> 赞同：0
> 
> 时间：2013-03-22T10:17:17.153
> 
> 标签：matlab

我有 2 个系统的 800000 个输入和输出数据样本数组。一种在 0 到 10 伏之间工作的烤箱中的系统。采样时间为 0.001 秒。

我必须确定这个系统的模型，但首先，鉴于数据显然很脏，我想过滤掉噪音。

如何使用 Matlab 的系统识别工具箱做到这一点？此外，如何估计截止频率以消除噪声？

先感谢您。

PS：鉴于这有点离题，请[在此处](https://dsp.stackexchange.com/questions/8339/how-can-filter-data-to-remove-noise-in-matlab)发布您的答案，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:16:07.247

在最简单的情况下，噪声被建模为白高斯分布。如果您估计噪声能量，您可以通过调用

```
noise = A*randn(1,N); 
```

这里，A 是幅度，N 是样本数。然后只取这个信号的 fft 并从输入信号的 fft 中减去它并取反 fft (ifft)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:25:04.333

截止频率直接由您的采样时间或采样频率给出。您的采样频率为 1/（采样时间），并且必须至少是感兴趣的最高频率的 2 倍： [http ://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem](http://en.wikipedia.org/wiki/Nyquist%E2%80%93Shannon_sampling_theorem)

f_s = 1/T_s >= 2*f_cutOff

然后，在您的采样频率足够高的情况下，您可以简单地进行相同的频域处理。最简单的方法是查看频域（使用函数 fft() ）。并首先检查您有高噪声组件的位置。然后过滤掉这些分量（归零），然后将其转换回时域（使用函数 ifft() ）。

# javascript - Twitter Bootstrap：使用远程选项渲染模态时控制台 js 错误

> ID：15567853
> 
> 赞同：1
> 
> 时间：2013-03-22T10:17:26.323
> 
> 标签：javascript, jquery, twitter-bootstrap

我对[Modals](http://twitter.github.com/bootstrap/javascript.html#modals)和远程选项有疑问：如果我提供远程 href 以从该 url 加载模态弹出窗口的内容，当模态窗口出现时，我会在控制台中收到此错误：

```
"Error: Syntax error, unrecognized expression: /my/url" (jquery.min.js row2) 
```

有同样问题和/或解决方案的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T10:11:42.977

我有同样的问题。解决方案是使用**data-href**属性而不是**href**：

```
<a data-toggle="modal" data-href="http://your/link" data-target="#my-modal" >modal link</a> 
```

作为**href**值，Bootstrap 模式需要有效的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T08:36:05.373

我对 bootstrap 3 有同样的问题。它适用于内联加载（`href="#id"`）但在尝试加载远程内容时同样的错误，无论是通过`href="remote/url"`或`data-target="remote/url"`

**编辑：**

我找到了正确的方法。

Bootsrap 总是需要一个模态容器，将 ajax 加载的内容注入其中。因此，您需要为链接提供两个属性：远程目标和要显示的 div。

这是最简单的方法：

```
<!-- The modal trigger link -->
<a data-toggle="modal" href="http://your/link" data-target="#my-modal" >modal link</a>

<!-- Invisible modal to render content -->
<div class="modal fade popin" id="my-modal" tabindex="-1" role="dialog" aria-hidden="true"></div> 
```

# php - 警告：date_format() 期望参数 1 为 DateTime

> ID：15567854
> 
> 赞同：24
> 
> 时间：2013-03-22T10:17:54.783
> 
> 标签：php, date

我正在使用以下脚本从 mysql 数据库中提取日历信息并将其显示在页面上。我正在尝试从标准 Mysql 日期格式重新格式化日期，但是从数据库中检索它时出现以下错误：

```
Warning: date_format() expects parameter 1 to be DateTime, string given in C:\easyphp\www\twinfocus\managecalendar.php on line 24

Warning: date_format() expects parameter 1 to be DateTime, string given in C:\easyphp\www\twinfocus\managecalendar.php on line 24

Warning: date_format() expects parameter 1 to be DateTime, string given in C:\easyphp\www\twinfocus\managecalendar.php on line 24

Warning: date_format() expects parameter 1 to be DateTime, string given in C:\easyphp\www\twinfocus\managecalendar.php on line 24 
```

数据库（如您所见，日期已正确存储）： ![在此处输入图像描述](../Images/f72e27c4619aa89763489ff0fbf642b6.png)

剧本 ：

```
<?php
     $sql2 = <<<SQL
        SELECT *
        FROM `calendar`
    SQL;
    if(!$result2 = $db->query($sql2)){ die('There was an error running the query [' . $db->error . ']');}
    echo '<table class="admintable"> <thead>';
    echo '<tr><th>Client Names</th><th>Email</th><th>Tel</th><th>Wedding Date</th><th>Date Created</th><th>Start Time</th><th>End Time</th><th>Price</th><th>Location</th><th>Other Info</th><th>Edit</th><th>Delete</th></tr></thead>';
    while($row2 = $result2->fetch_assoc()){ 
    $weddingdate = $row2['weddingdate'];
    $formattedweddingdate = date_format($weddingdate, 'd-m-Y');
    echo '<tr><td>'.$row2['name'].'</td><td>'.$row2['email'].'</td><td>'.$row2['tel'].'</td><td style="min-width:70px;">'.$formattedweddingdate.'</td><td style="min-width:70px;">'.$row2['datecreated'].'</td><td>'.$row2['starttime'].'</td><td>'.$row2['endtime'].'</td><td>&pound;'.$row2['price'].'</td><td>'.$row2['location'].'</td><td style="min-width:400px;">'.$row2['otherinfo'].'</td><td><a href="managecalendar.php?&key='.$key.'&editwedding='.$row2['id'].'">Edit</a></td><td><a href="calenderdelete.php?&key='.$key.'&delwedding='.$row2['id'].'">Delete</a></td></tr>';}
    echo '</table>';

?> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-22T10:24:20.920

最好的方法是使用[DateTime](http://php.net/manual/en/datetime.createfromformat.php)对象来转换您的日期。

```
$myDateTime = DateTime::createFromFormat('Y-m-d', $weddingdate);
$formattedweddingdate = $myDateTime->format('d-m-Y'); 
```

**注意：**它将仅支持 PHP 5 >= 5.3.0。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-22T10:24:10.000

您需要将 DateTime 对象传递给此函数。见手册： [php](http://www.php.net/manual/ru/datetime.format.php)

```
string date_format ( DateTime $object , string $format ) 
```

您可以尝试使用：

```
date_format (new DateTime($time), 'd-m-Y'); 
```

或者你也可以使用：

```
$date = date_create('2000-01-01');
echo date_format($date, 'Y-m-d H:i:s'); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-22T10:24:11.047

你为什么不试试这样：

```
$Weddingdate = new DateTime($row2['weddingdate']);
$formattedweddingdate = date_format($Weddingdate, 'd-m-Y'); 
```

或者你也可以这样做：

```
$Weddingdate = new DateTime($row2['weddingdate']);
echo $Weddingdate->format('d-m-Y'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-23T10:07:20.857

这可能会有所帮助

```
$formattedweddingdate =date('d-m-Y',strtotime($weddingdate)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-08T08:02:27.697

试试这个

```
$start_date = date_create($_POST['start_date']);
$start_date = date_format($start_date,"Y-m-d H:i:s"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-30T20:19:16.417

我已经尝试了 sean662 的第 3 个解决方案并使用存储在 INSERT sql 中的 now() 函数，然后它在 date_create() 函数中的值。之后，变量将通过 date_format() 函数传递，您可以拥有您喜欢的日期顺序。

# ios - JSON解析后表格视图中的字符串打印不正确

> ID：15567860
> 
> 赞同：3
> 
> 时间：2013-03-22T10:18:02.617
> 
> 标签：ios, objective-c, json

我的一个应用程序，我从本地主机解析一些数据并将其打印在表格视图中。要获取数据，用户首先使用警报视图登录。然后使用输入的用户 ID 来获取我使用 JSON 解析的数据。

这个问题肯定有一个非常简单的解决方案，但我似乎无法解决它。问题是当我打印数据时，字符串以这种格式出现：

（ “细绳” ）

但我希望它只是说：字符串

在表格视图中。这是我的解析方法：

```
 - (void)updateMyBooks
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // Fetch data on a background thread:

    NSString *authFormatString =
    @"http://localhost:8888/Jineel_lib/bookBorrowed.php?uid=%@";

    NSString *string = [[NSString alloc]initWithFormat:@"%@",UserID];

    NSString *urlString = [NSString stringWithFormat:authFormatString, string];

    NSURL *url = [NSURL URLWithString:urlString];

    NSLog(@"uel is %@", url);

    NSString *contents = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];

    response1 = [contents JSONValue];

    if (contents) {

        // ... Parse JSON response and add objects to newBooksBorrowed ...
        BookName = [[NSString alloc]init];
        DateBorrowed = [[NSString alloc]init];
        BookID = [[NSString alloc]init];
        BookExtended = [[NSString alloc]init];
        BookReturned = [[NSString alloc]init];

        BookName = [response1 valueForKey:@"BookName"];
        BookID = [response1 valueForKey:@"BookID"];
        DateBorrowed = [response1 valueForKey:@"DateBorrowed"];
        BookExtended = [response1 valueForKey:@"Extended"];
        BookReturned = [response1 valueForKey:@"Returned"];

        dispatch_sync(dispatch_get_main_queue(), ^{
            // Update data source array and reload table view.
            [BooksBorrowed addObject:BookName];
            NSLog(@"bookBorrowed array = %@",BooksBorrowed);
            [self.tableView reloadData];
        });
    }
});
} 
```

这就是我在表格视图中打印它的方式：

```
NSString *string = [[NSString alloc] initWithFormat:@"%@",[BooksBorrowed objectAtIndex:indexPath.row]];

NSLog(@"string is %@",string);
cell.textLabel.text = string; 
```

当我在解析过程中使用日志时，它会显示为（“字符串”），所以问题出在解析的某个地方，至少我是这么认为的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:33:50.183

如果

```
NSString *string = [[NSString alloc] initWithFormat:@"%@",[BooksBorrowed objectAtIndex:indexPath.row]]; 
```

返回类似“（字符串）”的东西，那么最可能的原因是

```
[BooksBorrowed objectAtIndex:indexPath.row] 
```

不是*字符串*，而是包含字符串的*数组*。在这种情况下，

```
NSString *string = [[BooksBorrowed objectAtIndex:indexPath.row] objectAtIndex:0]; 
```

应该是解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:22:43.343

```
 NSString *string = [[NSString alloc] initWithFormat:@"%@",[BooksBorrowed objectAtIndex:indexPath.row]];
    string = [string stringByReplacingOccurrencesOfString:@"(" withString:@""];
    string = [string stringByReplacingOccurrencesOfString:@")" withString:@""];
    string = [string stringByReplacingOccurrencesOfString:@"\"" withString:@""];

    NSLog(@"string is %@",string);
    cell.textLabel.text = string; 
```

**编辑：**

如果它在标签中显示该格式的文本，则使用上面的代码。

如果你在里面看到它，`NSlog`那么它就在`NSString`里面`NSArray`。您需要先从数组中获取该字符串，然后显示，使用@Martin R 建议的代码行。

```
NSString *string = [[BooksBorrowed objectAtIndex:indexPath.row] objectAtIndex:0]; 
```

# java - 在 jboss 7.1.1 中无法检查 JDBC 自动提交模式异常

> ID：15567866
> 
> 赞同：2
> 
> 时间：2013-03-22T10:18:25.133
> 
> 标签：java, hibernate, jpa, jboss7.x, smooks

当我在 smooks 中使用 xml-java 转换时。出现异常是无法检查 JDBC 自动提交模式。我的应用程序与 seam 2.1.2、jap、richfaces、smooks 集成。

当我使用 smooks 检索 clob 列值时显示错误？例外是：

```
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: could not inspect JDBC autocommit mode
    at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:629) [hibernate-entitymanager.jar:4.2.2.GA (build: SVNTag=JBoss_4_2_2_GA date=200710221139)]
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:73) [hibernate-entitymanager.jar:4.2.2.GA (build: SVNTag=JBoss_4_2_2_GA date=200710221139)]
    at com.manam.mobee.telco.impl.TelcoManagerImpl.getTelcoList(TelcoManagerImpl.java:46) [classes:]
    at com.manam.mobee.customer.MobeeCustomerHome.create(MobeeCustomerHome.java:301) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_11]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_11]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_11]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_11]
    at org.jboss.seam.util.Reflections.invoke(Reflections.java:22) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:32) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:28) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.core.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:77) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.core.ConversationInterceptor.aroundInvoke(ConversationInterceptor.java:56) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.transaction.TransactionInterceptor$1.work(TransactionInterceptor.java:97) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.util.Work.workInTransaction(Work.java:47) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.transaction.TransactionInterceptor.aroundInvoke(TransactionInterceptor.java:91) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:44) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.security.SecurityInterceptor.aroundInvoke(SecurityInterceptor.java:163) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:185) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:103) [jboss-seam.jar:2.1.2]
    at com.manam.mobee.customer.MobeeCustomerHome_$$_javassist_seam_10.create(MobeeCustomerHome_$$_javassist_seam_10.java) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_11]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_11]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_11]
    at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_11]
    at org.jboss.seam.util.Reflections.invoke(Reflections.java:22) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.util.Reflections.invokeAndWrap(Reflections.java:144) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.Component.callComponentMethod(Component.java:2249) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.Component.callCreateMethod(Component.java:2172) [jboss-seam.jar:2.1.2]
    at org.jboss.seam.Component.newInstance(Component.java:2132) [jboss-seam.jar:2.1.2]
    ... 84 more
Caused by: org.hibernate.exception.GenericJDBCException: could not inspect JDBC autocommit mode
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:103) [hibernate3.jar:3.2.4.sp1]
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:91) [hibernate3.jar:3.2.4.sp1]
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43) [hibernate3.jar:3.2.4.sp1]
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:29) [hibernate3.jar:3.2.4.sp1]
    at org.hibernate.jdbc.JDBCContext.afterNontransactionalQuery(JDBCContext.java:248) [hibernate3.jar:3.2.4.sp1]
    at org.hibernate.impl.SessionImpl.afterOperation(SessionImpl.java:417) [hibernate3.jar:3.2.4.sp1]
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1126) [hibernate3.jar:3.2.4.sp1]
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79) [hibernate3.jar:3.2.4.sp1]
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:64) [hibernate-entitymanager.jar:4.2.2.GA (build: SVNTag=JBoss_4_2_2_GA date=200710221139)]
    ... 120 more
Caused by: java.sql.SQLException: Transaction cannot proceed STATUS_MARKED_ROLLBACK
    at org.jboss.jca.adapters.jdbc.WrapperDataSource.checkTransactionActive(WrapperDataSource.java:240)
    at org.jboss.jca.adapters.jdbc.WrappedConnection.checkTransactionActive(WrappedConnection.java:1599)
    at org.jboss.jca.adapters.jdbc.WrappedConnection.checkStatus(WrappedConnection.java:1614)
    at org.jboss.jca.adapters.jdbc.WrappedConnection.getAutoCommit(WrappedConnection.java:731)
    at org.hibernate.jdbc.ConnectionManager.isAutoCommit(ConnectionManager.java:189) [hibernate3.jar:3.2.4.sp1]
    at org.hibernate.jdbc.JDBCContext.afterNontransactionalQuery(JDBCContext.java:239) [hibernate3.jar:3.2.4.sp1]
    ... 124 more 
```

例子 ：

```
 private  DoCustomerChange runSmooks(MobeeCustomerChange mobeeCustomerChange) throws IOException, SAXException, SmooksException {

            // Instantiate Smooks with the config...
            Smooks smooks = new Smooks();

            try {
                smooks.getClassLoader().getResourceAsStream("/WEB-INF/smooksProfileChangeConfig_xmlToJava.xml");
                 // Create an exec context - no profiles....
                ExecutionContext executionContext = smooks.createExecutionContext();
                // The result of this transform is a set of Java objects...

                // Configure the execution context to generate a report...
                executionContext.setEventListener(new HtmlReportGenerator("target/report/report.html"));

                JavaResult result = new JavaResult();
                // Filter the input message to extract, using the execution context...
                smooks.filterSource(executionContext, new StreamSource(new ByteArrayInputStream(readInputMessage(mobeeCustomerChange))), result);
                return (DoCustomerChange) result.getBean("doCustomerChange");
            } finally {
                smooks.close();
            }
        }

        private  byte[] readInputMessage(MobeeCustomerChange mobeeCustomerChange) {
                try {                       
                    //return DatabaseUtils.getMessageString(getInstance().getProfile()).getBytes();
                    //  StreamUtils.readStream(is);
                    //StreamUtils.readStream(dEn.decrypt(DatabaseUtils.covertClobtoByte(profileAudit.getProfileChanges())));
                return   StreamUtils.readStream(mobeeCustomerChange.getProfileChanges().getAsciiStream());
                } catch (Exception e) {
                    e.printStackTrace();
                    return "<no-message/>".getBytes();
                }
           } 
```

# java - 如何解决错误 java.io.IOException: Input/output error in nativeavailable for Serial Communication？

> ID：15567869
> 
> 赞同：5
> 
> 时间：2013-03-22T10:18:37.163
> 
> 标签：java, rxtx, serial-communication

我有 Arm 处理器，它是 AllWinner A13，RAM- 512mb 和 OS- Linaro 13.01 Ubuntu（意味着 debian）。现在我正在为 /dev/ttyS0 制作串行通信程序。我用netbeans为java中的双向串行通信制作了简单的程序。在我的处理器中，我缩短了 ttyS0 的 rx-tx 用于环回连接检查。意味着我通过串行端口发送的任何东西都会返回。但我得到错误。我在我的处理器上安装了 openjdk-7、librxtx-java。我的代码和错误如下。如果有任何想法或解决方案，请向我提出建议。

```
package serialcomm_linaro;

import gnu.io.CommPort;
import gnu.io.CommPortIdentifier;
import gnu.io.SerialPort;

import java.io.FileDescriptor;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

public class TwoWaySerialComm
{
    public TwoWaySerialComm()
    {
        super();
    }

    void connect ( String portName ) throws Exception
    {
        CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
        if ( portIdentifier.isCurrentlyOwned() )
        {
            System.out.println("Error: Port is currently in use");
        }
        else
        {
            CommPort commPort = portIdentifier.open(this.getClass().getName(),2000);

            if ( commPort instanceof SerialPort )
            {
                SerialPort serialPort = (SerialPort) commPort;
                serialPort.setSerialPortParams(115200,SerialPort.DATABITS_8,SerialPort.STOPBITS_1,SerialPort.PARITY_NONE);

                InputStream in = serialPort.getInputStream();
                OutputStream out = serialPort.getOutputStream();

                (new Thread(new SerialReader(in))).start();
                (new Thread(new SerialWriter(out))).start();

            }
            else
            {
                System.out.println("Error: Only serial ports are handled by this example.");
            }
        }     
    }

    /** */
    public static class SerialReader implements Runnable 
    {
        InputStream in;

        public SerialReader ( InputStream in )
        {
            this.in = in;
        }

        public void run ()
        {
            byte[] buffer = new byte[1024];
            int len = -1;
            try
            {
                while ( ( len = this.in.read(buffer)) > -1 )
                {
                    System.out.print(new String(buffer,0,len));
                }
            }
            catch ( IOException e )
            {
                e.printStackTrace();
            }            
        }
    }

    /** */
    public static class SerialWriter implements Runnable 
    {
        OutputStream out;

        public SerialWriter ( OutputStream out )
        {
            this.out = out;
        }

        public void run ()
        {
            try
            {                
                int c = 0;
                while ( ( c = System.in.read()) > -1 )
                {
                    this.out.write(c);
                }                
            }
            catch ( IOException e )
            {
                e.printStackTrace();
            }            
        }
    }

    public static void main ( String[] args )
    {
        try
        {
            (new TwoWaySerialComm()).connect("/dev/ttyS0");
        }
        catch ( Exception e )
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

我的出在下面。在这个输出中，我只发送 123，然后我先返回 23，然后返回 1111……更多时间，然后是错误。而不是 111111.... 我只想返回 123。

```
enter code here
RXTX Warning:  Removing stale lock file. /var/lock/LCK..ttyS0
123
23
111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111

java.io.IOExcepti on: Input/output error in nativeavailable
        at gnu.io.RXTXPort.nativeavailable(Native Method)
        at gnu.io.RXTXPort$SerialInputStream.read(RXTXPort.java:1429)
        at gnu.io.RXTXPort$SerialInputStream.read(RXTXPort.java:1341)
        at serialcomm_linaro.TwoWaySerialComm$SerialReader.run(TwoWaySerialComm.java:66)
        at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T10:36:17.887

我没有尝试在环回场景中通过 RXTX 进行串行通信，但这没关系。唯一看起来有点可疑的是您将输入流的实例提供给`SerialReader`. 我建议您将`SerialPort`实例传递给两个构造函数，并且每次需要读取/写入端口的流时，请使用流 getter，例如用于读取：

```
 public static class SerialReader implements Runnable 
{
    SerialPort serialPort;

    public SerialReader ( SerialPort serialPort )
    {
        this.serialPort = serialPort;
    }

    public void run ()
    {
        byte[] buffer = new byte[1024];
        int len = -1;
        try
        {
            while ( ( len = serialPort.getInputStream().read(buffer)) > -1 )
            {
                System.out.print(new String(buffer,0,len));
            }
        }
        catch ( IOException e )
        {
            e.printStackTrace();
        }            
    }
} 
```

请反馈。

更新：

根据我的个人[经验](https://stackoverflow.com/questions/14018438/serial-port-communication-using-java-rxtx-in-eclipse/14100653#14100653)，RXTX 是一个错误的解决方案。然而，这并不意味着这种情况是由潜在的 RXTX 错误引起的。这可能是因为串行端口设置不正确，但在您的情况下，它是具有标准连接参数的标准端口名称。作为一个很长的镜头，尝试用 9600 替换波特率 115200，但这可能无济于事。我可以从这里提供三种途径：

*   尝试调试 RXTX 代码 - 您可能会更深入地了解正在发生的事情
*   阅读[串口线故障排除](http://www.cisco.com/en/US/tech/tk713/tk628/technologies_tech_note09186a00800a758d.shtml)
*   考虑其他用于串行通信的 Java 解决方案，例如[JSSC](http://code.google.com/p/java-simple-serial-connector/)而不是 RXTX。

更新：

恐怕我一不留神就往前跳了。JSSC 本机库（.so、.dll）位于 jssc.jar 中，因此它们是“自动”加载的。对于 RXTX，它们位于 jar 文件之外，因此您需要设置`java.library.path`系统属性以便 JVM 找到并加载它们，否则您将收到 UnsatisfiedLinkError。

您可以通过双击打开 JSSC jar 文件，它会在存档器中打开，因为它[实际上是一个 zip 文件](http://en.wikipedia.org/wiki/JAR_(file_format))。与 RXTX 一样，您会注意到本机 libs 文件组织在命名为操作系统的目录中（windows、linux，RXTX 也有 Mac_OS_X 和 Solaris）。

在这些目录中有本地 libs 文件、.so、dll. 和 .jnilib 类型的文件，它们以[计算机体系结构](http://en.wikipedia.org/wiki/Computer_architecture)命名。这是这个词的更广泛含义，这些是[指令集架构 (ISA)](http://en.wikipedia.org/wiki/Instruction_set_architecture)的短代码。指令集定义了 CPU 的指令集（命令）。换句话说，有许多不同的 CPU 型号（如您的 AllWinner A13）符合相同的指令集。本机库源代码被编译以生成可执行文件（.so，...），这是来自同一指令集的一堆指令。

JSSC 出现 UnsatisfiedLinkError 的原因 *可能*是因为您处于不受支持的架构上，并且正在不存在的目录中搜索相应的本机库。ISA 短代码（也是 JSSC 的这些目录的名称）是[x86](http://en.wikipedia.org/wiki/x86)和[PPC](http://en.wikipedia.org/wiki/Ppc)架构，包括 32 位和 64 位变体。RXTX 还有很多其他的，但我认为它们都不等同于[ARMv7](http://en.wikipedia.org/wiki/ARM_architecture)，后者是您的[AllWinner A13](http://en.wikipedia.org/wiki/Allwinner_A13) CPU 的 ISA。

您可以通过在终端中执行此命令来确定您的[架构：](http://en.wikipedia.org/wiki/Instruction_set_architecture)

```
uname -m 
```

在我的 linux 上，它输出：

```
x86_64 
```

这意味着它是[64 位 Intel 8086 架构](http://en.wikipedia.org/wiki/X86)。JSSC 和 RXTX 都实现了这种架构。如果您的架构未实现（支持），那么您将无法使用这些库连接到该计算机上的串行端口。在这种情况下，您必须自己编写或获得合适的实现。

如果架构匹配并且仍然存在本机错误，您可以尝试[重新编译](https://stackoverflow.com/questions/1696300/how-to-compile-c-under-ubuntu-linux)本机库源。[为RXTX](http://rxtx.qbang.org/pub/rxtx/rxtx-2.1-7r2.zip)和[JSSC](https://java-simple-serial-connector.googlecode.com/files/jSSC-0.9.0-Release.zip)提供了源代码。

更新：

如果您的架构是`armv7l`这意味着当前状态下的 JSSC、RXTX 和[JavaComm](http://en.wikibooks.org/wiki/Serial_Programming/Serial_Java#JavaComm_API)（近似表示，RXTX“祖先”）在您的场景中是无用的。

我没有找到任何其他用于串行通信的开源 Java 库。如果这是真的，您需要编写符合上述库之一的接口的自己的本机库，以使它们有用。换句话说，您需要编写一个具有[串行通信](http://digital.ni.com/public.nsf/allkb/2AD81B9060162E708625678C006DFC62)功能和Java 库的[JNI接口的](http://en.wikipedia.org/wiki/Java_Native_Interface)[C](http://en.wikipedia.org/wiki/C_(programming_language))程序（类似于：[1](http://www.codeproject.com/Answers/218934/Serial-Port-Programming-in-Linux.aspx#answer1)、[2](http://www.codeproject.com/Answers/220479/Reading-SMS-messages-from-sim-via-serial-port-in-L.aspx#answer1)） 。

在回答完整性的意义上，我会提到一个商业产品[SerialIO](http://www.serialio.com/)，它确实支持一些 ARM 架构（不知道你是否是其中之一）。但是，如果您决定采用该解决方案，您可以随时向他们的支持发送查询。

# javascript - 无法从准备好的 jquery 文档调用函数

> ID：15567876
> 
> 赞同：-1
> 
> 时间：2013-03-22T10:18:50.053
> 
> 标签：javascript, jquery

当用户单击按钮时，我有一个设置 cookie 值的功能。

在更改事件中，我从我的选择框中调用两种方法。这个函数调用正确并且工作正常。但是当我从下面的 jquery 函数调用这两个函数时我遇到了问题。 `<select NAME="the_menu" size="1" id="Item" onChange="UpdateUnitMenu(this, document.form_A.unit_menu); UpdateUnitMenu(this, document.form_B.unit_menu)">` 如果以“语言”的名称存在任何 cookie，我想调用相同的方法。这两个函数基本上根据第一个值的选择填充另外两个下拉选择框值。

我的表格

```
 <form name="property_form" >
     <select NAME="the_menu" size="1" id="Item" onChange="UpdateUnitMenu(this, document.form_A.unit_menu); UpdateUnitMenu(this, document.form_B.unit_menu)">   <optgroup label="Select Any One Type">   </optgroup>  </select>
     <input type="button" id='continue' value="Save as default value"/>
 </form> 
```

我的功能

```
<script>
        $(document).ready(function(){  
            $('#continue').click(function() {
                 var singleValues = $("#Item").val(); 
                $.cookie("language", singleValues); 
            })  
      alert($.cookie('language'));
      $('#Item').val($.cookie('language')).attr('selected', true);

      if($.cookie('language')!=null)
               {  
                 var th=$.cookie('language');
                 UpdateUnitMenu(th, document.form_A.unit_menu);//trying to call first function
                 UpdateUnitMenu(th, document.form_B.unit_menu);//trying to call first function
               } 
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:31:54.720

您在一种情况下使用元素引用调用该函数，在另一种情况下使用字符串调用。

要使函数同时使用两者，请仅从`select`if 它还不是字符串中获取值：

```
if (typeof propMenu != 'string') {
  i = propMenu.selectedIndex;
} else {
  i = propMenu;
} 
```

或者，让两个不同的函数接受不同的参数，让一个函数从 中获取值`select`，然后调用另一个函数。

# javascript - jquery 检测 div 中的新数据

> ID：15567877
> 
> 赞同：0
> 
> 时间：2013-03-22T10:18:49.607
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

在 gmail 网络聊天或任何其他网络聊天中，我们如何检测输入了一些新文本

在 gmail 中，这些是我执行检查元素时的属性

```
 <div chat-dir="f" class="km" role="chatMessage" aria-live="assertive">
  <div class="kk">
  ...
  ...
  </div>
  </div>

  <div chat-dir="t" class="km" role="chatMessage" aria-live="assertive">
  <div class="kk">
  ...
  ...
  </div>
 </div> 
```

我使用了以下内容，但没有看到 alert()。由于文本附加到以前的一些 html 中，我们如何获取聊天数据进行处理

```
$("div.km").bind("DOMSubtreeModified", function() {
  alert("tree changed");
}); 
```

或者我们可以使用 chat-dir 属性来获取数据

`EDIT 1:`

我为 gmail 聊天尝试了以下内容，即使我没有看到 alert()

```
$(".AD").bind("DOMSubtreeModified", function() {
    alert("tree changed");
});
$("div.kk").bind("DOMSubtreeModified", function() {
    alert("tree changed");
});

$('div.kk').on('webkitAnimationEnd animationend', 'div', function(e){
    console.log(e.target.tagName.toLowerCase() + ' added!');
    alert("heree")
});

$(document).ready(function() {
  alert("hello world in ready");  
    $('div.no').on('webkitAnimationEnd animationend', 'div', function(e){
        console.log(e.target.tagName.toLowerCase() + ' added!');
        alert("heree")
});
$('div.no').change(function() {
    alert('Handler for .change() called.');
});
$('div.kk').change(function() {
   alert('Handler for .change() called.');
});
$('.kk').change(function() {
  alert('Handler for .change() called.');
});
alert($('.kk').val());
$('km').bind('DOMNodeInserted DOMNodeRemoved', function(event) {
if (event.type == 'DOMNodeInserted') {
    alert('Content added! Current content:' + '\n\n' + this.innerHTML);
} else {
    alert('Content removed! Current content:' + '\n\n' + this.innerHTML);
}
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:23:27.007

最简单的方法（尽管它只适用于那些支持 CSS 的浏览器`@keyframes`）是使用 CSS 动画来为新添加的内容设置动画（但很简短），并检测`animationend`（或在 Webkit 中为 camel-cased `WebkitAnimationEnd`）事件，简单的概念验证，带有以下 HTML：

```
<button id="add">Add more content</button>
<div id="holder"></div> 
```

jQuery：

```
$('#holder').on('webkitAnimationEnd animationend', 'div', function(e){
    console.log(e.target.tagName.toLowerCase() + ' added!');
});

$('#add').click(function(){
    var addTo = $('#holder');
    $('<div />', {text: addTo.children().length})
    .appendTo(addTo);
}); 
```

CSS：

```
@-webkit-keyframes newContentAdded {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

@-moz-keyframes newContentAdded {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

@keyframes newContentAdded {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

#holder div {
    /* Firefox */
    -moz-animation: newContentAdded;
    -moz-animation-iteration-count: 1;
    -moz-animation-duration: 0.1s;
    /* Chrome, Chromium, Webkit (future-opera?) */
    -webkit-animation: newContentAdded;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-duration: 0.1s;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/CCV5f/)。

参考：

*   CSS：
    *   [`@keyframes`](https://developer.mozilla.org/en-US/docs/CSS/@keyframes).
    *   [使用 CSS 动画](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations)。
*   jQuery：
    *   [`click()`](http://api.jquery.com/click/).
    *   [`on()`](http://api.jquery.com/on/).

# php - PHP session_set_cookie_params() 问题

> ID：15567880
> 
> 赞同：4
> 
> 时间：2013-03-22T10:18:53.167
> 
> 标签：php

对于登录部分的每个页面的标题，我添加了以下代码来维护会话：

```
session_set_cookie_params(1200, '/mysystem');
session_start(); 
```

我的意图是，我将会话生命周期设置为 1200 秒，路径`/mysystem`通过函数[session_set_cookie_params()](http://php.net/manual/en/function.session-set-cookie-params.php)。使用此函数的原因是为了将会话 cookie 与同一域中的其他 PHP 脚本分开，例如[http://www.example.com/another_system/](http://www.example.com/another_system/)

问题是，会话在达到 1200 秒时过期，无论是否有活动（例如在 下加载另一个页面`/mysystem`，或刷新页面。

预期行为：当活动会话有效时进行页面活动时，会话“倒计时”会重置。

我错过了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T10:21:05.380

这就是它的工作原理。cookie 设置一次，然后开始倒计时。为了解决这个问题，每次用户与后端交互时，您都必须使用新的到期日期重置 cookie。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:29:35.603

您可以尝试 time() 函数来更新 cookie 过期时间..

尝试在每个页面中添加 time() 函数，获取当前页面加载时间并使其过期

由 $expireTime = time()+1200;

```
 <?php

          session_set_cookie_params($expireTime, '/mysystem');
          session_start()
       ?> 
```

# entity-framework - 为什么存在“DatabaseGeneratedOption.None”？

> ID：15567886
> 
> 赞同：13
> 
> 时间：2013-03-22T10:19:04.287
> 
> 标签：entity-framework, entity-framework-5, entity-framework-mapping

这与`Property(() => p).HasDatabaseGeneratedOption()`呼叫一起使用。也许是关闭默认数据库值生成？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-22T15:47:26.400

EF 用于`DatabaseGeneratedOption`确定如何处理新实体的键列的值。如果`DatabaseGeneratedOption`是`Identity`EF 知道可以忽略属性设置的值，并且应该使用来自数据库的值。如果`DatabaseGeneratedOption`是`None`EF 则将属性的值作为键列的值插入到数据库中。

在 Code First 中 - 当 Code First 约定找到一个可以作为给定实体的键属性的 int 属性时，默认情况下，它们会将此列配置为标识列（这意味着数据库将生成键列/属性的值）。`DatabaseGeneratedOption.None`如果您想自己设置键值，则允许您覆盖它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:21:13.777

其作用是将 EF 配置为在插入数据库后不获取新的标识值。

# bash - 每次创建新用户时执行 shell 脚本

> ID：15567887
> 
> 赞同：10
> 
> 时间：2013-03-22T10:19:04.793
> 
> 标签：bash, shell, ubuntu

每次添加新用户时执行命令的最简单方法是什么？

我检查过了，`/etc/adduser.conf`但里面没有任何东西看起来会这样做？

我考虑将它添加给用户`.bashrc`，以便在他们登录时执行它，但我宁愿在他们登录之前设置它。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T10:36:07.717

来自`man adduser`：

```
 If  the  file  /usr/local/sbin/adduser.local exists, it will be exe‐
   cuted after the user account has been set up  in  order  to  do  any
   local setup.  The arguments passed to adduser.local are:
   username uid gid home-directory 
```

看起来您可以在此处添加用户创建操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:30:06.257

我不知道直接的方法...但是，您可以检查`/etc/passwd`文件或`/home directrory`使用例如`inotifywait`或使用某些 cron 作业的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:35:17.700

几年前我这样做了，编写了一个自定义脚本，它可以完成我需要的所有操作，并`adduser`在脚本内部调用以将用户添加到系统中。

# android - Jenkins 使用 Android Google API 构建失败

> ID：15567889
> 
> 赞同：1
> 
> 时间：2013-03-22T10:19:07.273
> 
> 标签：android, ant, build, jenkins, continuous-integration

我有一个目标为 Google API 级别 15 的 Android 项目，我可以使用 Ant 在我的机器上成功构建它。但是，问题是，当我尝试在我的 jenkins 服务器上构建它时，出现以下异常：

```
build.xml:539: java.lang.NullPointerException
    at com.android.sdklib.SdkManager.loadPlatforms(SdkManager.java:467)
    at com.android.sdklib.SdkManager.reloadSdk(SdkManager.java:151)
    at com.android.sdklib.SdkManager.createManager(SdkManager.java:132)
    at com.android.ant.GetTargetTask.execute(GetTargetTask.java:121)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1360)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1329)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1212)
    at org.apache.tools.ant.Main.runBuild(Main.java:801)
    at org.apache.tools.ant.Main.startAnt(Main.java:218)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

我已经在我的 Jenkins 服务器上安装了 Google API 级别 15。任何想法可能会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:45:08.673

问题解决了 - 我的詹金斯用户没有获得目录所需的权限`sdk`......

# vba - 共享邮箱的 Outlook 跟踪器

> ID：15567890
> 
> 赞同：0
> 
> 时间：2013-03-22T10:19:10.863
> 
> 标签：vba, email, outlook

我们使用共享的 Outlook 邮箱，我们每天收到 1000 封电子邮件，是否有任何宏可以为我们提供何时回复的项目以及未回复的项目的详细信息。基本上，我们需要跟踪回复特定收件箱项目所花费的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T23:40:54.363

没有宏，但您可以编写自己的宏。Outlook -> 工具 -> 宏 -> Visual Basic 编辑器。

在 VBA 中，您必须启动 Outlook.MAPIFolder 对象并将其连接到所需的邮箱。

```
Dim f As MAPIFolder

Dim olns As Outlook.NameSpace
Set olns = Outlook.GetNamespace("MAPI")
Set f = olns.Folders("Mailbox - Name, Name")
Set f = f.Folders("Inbox") 
```

如果您正在检查邮箱中的子文件夹，您需要这样做：

```
Set f = f.Folders("Name of the subfolder") 
```

然后你需要遍历这些项目。

```
Dim m As MailItem
Dim i As Long
i = 1
Do Until i > f.Items.Count
    If f.Items(i).Class = olMail Then
        Set m = f.Items(i)
    End If

    ' yada yada

    i = i + 1
    DoEvents
Loop 
```

您如何检测已回复的内容取决于您使用的 Outlook 版本。对于 Outlook 2007，您可以使用[Outlook.PropertyAccessor](http://www.outlookbanter.com/outlook-vba/97898-mailitem-object-has-no-property.html)。[对于早期版本，您可以使用像Redemption](http://www.dimastr.com/redemption/home.htm)这样的第三方加载项，或者您可以诉诸比较 m.LastModificationTime 和 m.CreationTime 之类的方法。

例如：

```
 If m.LastModificationTime - m.CreationTime < 0.1 Then
            n = n + 1
            Debug.Print m.subject
        End If 
```

时间总会有一点点偏差，所以不能用“=”，要检查一下差别是不是真的很小。

这可能会提取转发的电子邮件以及回复的电子邮件；考虑这是否是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-23T11:57:41.780

如果这仍然是实际的，我建议使用 Excel 的 Power Query 来跟踪对话。基本上，您所需要的只是汇总您的项目列表，`Conversation ID`然后获取`Received Time`每个对话的第一个和第二个项目。确保按`Received Time`或对嵌套表进行排序`Conversation Index`。

# asp.net-mvc-3 - 为什么不大量使用 ViewBag？

> ID：15567891
> 
> 赞同：2
> 
> 时间：2013-03-22T10:19:11.827
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, viewbag

如果我在 MVC3 页面中使用太多 ViewBag 怎么办？如果我继续大量使用它们会出现什么极端问题。简而言之，ViewBag 的缺点是什么，它的替代方案是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T10:34:19.503

> 它的替代品是什么？

您应该只使用[**ViewModels**](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3fundamentals_topic7.aspx)，这是推荐的方法。创建强类型视图。这将使您的代码更清晰且易于维护。

> 会出现什么极端问题？

Viewbags/ViewData 的问题是编译时检查。ViewBags 只是字典，直到运行时您才会意识到任何问题，因此它使您的代码容易出错。所以总是尝试使用 ViewModels。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T10:23:59.610

我知道的两点：

1.  它使您的控制器的可测试性降低。
2.  您的视图不是强类型的

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-06-19T10:18:11.320

它有可能在运行时达到性能。

# c# - 在 C#.Net 中创建 .dll 文件

> ID：15567893
> 
> 赞同：39
> 
> 时间：2013-03-22T10:19:18.670
> 
> 标签：c#, .net, file, dll

我创建了一个项目，它是 C# 控制台应用程序项目，我需要在另一个 Windows 应用程序项目中调用这个项目 dll。我在 Visual Studio 2010 中构建了该项目并检查了`.dll`bin\debug 文件夹中的文件，但没有创建它。

但是已经创建了清单文件和`.exe`文件。请帮助我在这种情况下如何创建`.dll`？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-22T10:21:04.117

您需要创建一个类库而不是控制台应用程序。控制台应用程序被翻译成一个`.exe`，而类库将被编译成一个`dll`你可以在你的 windows 项目中引用的。

*   右键单击您的控制台应用程序 -> 属性 -> 将输出类型更改为类库

![在此处输入图像描述](../Images/c667001d095121180e8f24f4f2b763d2.png)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-22T10:25:02.823

要创建 DLL 文件，请单击新建项目，然后选择类库。

将您的代码输入到为您自动创建的类文件中，然后从“调试”菜单中单击“构建解决方案”。

现在，查看您的目录：../debug/release/YOURDLL.dll

就在那里！:)

PS DLL 文件不能像普通的应用程序 (exe) 文件一样运行。您需要创建一个单独的项目（可能是一个 win forms 应用程序），然后将您的 dll 文件作为“参考”添加到该项目中，您可以通过转到解决方案资源管理器，右键单击您的项目名称并选择添加来执行此操作参考然后浏览到您保存 dll 文件的任何位置。

更多详情请点击[这里](https://stackoverflow.com/questions/2891258/how-to-create-a-dll-file)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-22T10:21:17.723

您需要更改项目设置。右键单击您的项目，转到properites。在应用程序选项卡中，将输出类型更改为类库而不是 Windows 应用程序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-22T10:22:51.297

控制台应用程序是应用程序 (.exe)，而不是库 (.dll)。要创建一个库，请创建一个新项目，在项目类型中选择“类库”，然后将您的第一个代码的逻辑复制到这个新项目中。

*或者您可以编辑项目属性并在输出类型*中选择类库而不是控制台应用程序。

由于某些代码可能依赖于“控制台”，因此我认为如果在复制时检查逻辑，第一个解决方案会更好。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-09-23T17:39:48.183

[创建 DLL 文件](http://mauricemuteti.info/how-to-create-and-use-a-dynamic-link-library-dll-in-c-visual-studio-2010-step-by-step/)

1.  打开 Visual Studio 然后选择`File`-> `New`->`Project`

2.  选择`Visual C#`->`Class library`

3.  编译项目或构建解决方案，以创建 Dll 文件

4.  转到类库文件夹（调试文件夹）

# maven - 在我的 pom.xml 文件中配置源存储库

> ID：15567899
> 
> 赞同：0
> 
> 时间：2013-03-22T10:19:29.317
> 
> 标签：maven

在我的项目中，我使用 MVN 站点工具来生成项目站点。现在我看到一个源存储库条目，它当然是空白的。我如何为此配置我的 pom.xml？我可以使用 maven 直接提交到 git 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:26:27.807

您应该像这样在 pom 中使用[SCM 标签：](http://maven.apache.org/pom.html#SCM)

```
 <scm>
    <developerConnection>scm:git:git@github.com:khmarbaise/sapm.git</developerConnection>
    <connection>scm:git:git://github.com/khmarbaise/sapm.git</connection>
    <url>https://github.com/khmarbaise/sapm</url>
  </scm> 
```

# c++ - 动态数组释放（赋值运算符与复制构造函数）

> ID：15567907
> 
> 赞同：1
> 
> 时间：2013-03-22T10:19:58.667
> 
> 标签：c++, copy-constructor, assignment-operator

我应该在复制构造函数和/或赋值运算符中取消分配动态数组（在构造函数中分配）吗？

```
struct Test
{
  const size_t n;
  int* xs;

  Test(const size_t n)
    : n(n)
    , xs(new int[n])
  { }

  Test(const Test& other)
    : n(other.n)
    , xs(new int[n])
  {
    memcpy(xs, other.xs, n * sizeof(int));
  }

  Test& operator=(const Test& other)
  {
    n = other.n;
    delete[] xs;
    xs = new int[n];
    memcpy(xs, other.xs, n * sizeof(int));
  }

  ~Test()
  {
    delete[] xs;
  }
};

void main()
{
  Test a(10);
  Test b(a);
  Test c(20);
  c = b;
} 
```

正如您所看到的，我猜您必须`delete[]`在赋值运算符实现中使用数组（因为在构造被分配的对象期间它已经被分配到某个地方）。而且我确实认为您不需要在复制构造对象时释放数组，因为它尚未构造。

`delete[]`问题是，在 Application Verifier 下运行上面的应用程序不会显示内存泄漏，无论是否存在`operator=`。应用程序在这两种情况下都可以正常运行。

那么，我应该`delete[] xs`在复制构造函数、赋值运算符中，还是两者都没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:27:51.807

一般来说，手动内存管理是个**坏**主意。你不应该这样做，你应该更喜欢`std::vector<>`或其他容器类，除非你有充分的理由不这样做。这说...

> 那么，我应该在复制构造函数、赋值运算符中删除[] xs，还是两者都没有？

在丢失指向该数组的最后一个指针之前，您应该`delete[]`分配一个数组。`new[]`否则，你会泄漏。

实际上，由于您要删除的数组由您的类拥有和封装，这意味着您必须`delete[]`在赋值运算符重载中对其进行处理（在指针被分配给新数组之前，因此丢失对前一个）和析构函数中（当您处理对象然后丢失对封装数组的唯一现有引用时）。

正如您所说，复制构造函数是一个构造例程，并且指针以前没有引用任何分配的资源（实际上，这里没有“以前”，对象的生命周期甚至还没有开始）：因此，它不仅这里不需要`delete[]`，这是错误的。

另请注意，为了避免悬空指针和可能的未定义行为，您应该确保您的类确实是封装数组的唯一所有者。否则，类外部的代码可以`delete[]`，或者保存指向它的指针，这将变得悬空。因此，您不应该将`xs`data member 设为`public`。

# jquery - jQuery Mobile CSS 文件混淆

> ID：15567909
> 
> 赞同：2
> 
> 时间：2013-03-22T10:20:10.070
> 
> 标签：jquery, css, jquery-mobile

创建一个新的 ASP.NET MVC 4 移动应用程序后，在 Content 文件夹下有一些来自 jQuery 的 CSS 文件以及以下两个文件：

*   jquery.mobile.theme-1.3.0.css
*   jquery.mobile-1.3.0.css

现在我想知道。这两个文件的内容几乎相同。删除 jquery.mobile.theme-1.3.0.css 也不会影响应用程序的外观。

jquery.mobile.theme-1.3.0.css 的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:01:57.120

从这两个文件来看，jquery.mobile-1.3.0.css 包含 jQuery mobile 主题以及其他与 jQuery mobile 相关的样式和设置，而 jquery.mobile.theme-1.3.0.css 仅包含主题本身。 .

我认为这是出于两个原因之一。

1) 要么您只想使用主题而不是 jquery 移动样式
2) 或者您想使用 jquery.mobile.theme 文件来创建自定义主题

我想知道为什么新的 MVC 应用程序文件以该 .theme 文件开头，因为如果您查看 jquery mobile 的实际 jQuery 网站下载部分 - [http://jquerymobile.com/blog/2013/02/20/jquery-mobile- 1-3-0-released/#download](http://jquerymobile.com/blog/2013/02/20/jquery-mobile-1-3-0-released/#download) - .theme 文件甚至不是官方下载的一部分

# django - Django - 带有引用非主键的外键的表单

> ID：15567911
> 
> 赞同：1
> 
> 时间：2013-03-22T10:20:11.680
> 
> 标签：django, django-models, django-forms

我有一个 Django 模型：

```
class ObservationMedia(models.Model):
    observation = models.ForeignKey(Observation)    
    audio_file = AudioFileField   ( upload_to=audio_dir, blank=True, null=True )
    photo_file = models.ImageField( upload_to=img_dir,   blank=True, null=True )

    def __unicode__(self):
        return "obsv-media "+str(self.pk) 
```

其中观察是：

```
class Observation(GUIDModel):  
    guid = models.CharField(unique=True, max_length=36, default=uuid.uuid4)
    # many more fields here 
```

是否有可能传递给的值`ModelForm`不是其主键而是字段？我想到的解决方案是制作主键。有可能避免这种情况吗？`ObservationMedia``Observation``guid``guid`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:53:30.067

您可以执行以下操作，这并没有经过我目前能想到的测试。

```
class ObservationMediaForm(ModelForm):
    """ Observation Media Model Form """

    class Meta:
        model = models.ObservationMedia
        fields = ('observation', 'audio_file', 'photo_file')

    def __init__(self, *args, **kwargs):
        super(ObservationMediaForm, self).__init__(*args, **kwargs)
        if self.instance:
            self.fields['observation'].initial = models.Observation.objects.get(pk=self.instance.observation).guid 
```

# javascript - javascript : 覆盖浏览器的默认快捷方式 (Ctrl+anyKey)

> ID：15567912
> 
> 赞同：0
> 
> 时间：2013-03-22T10:20:12.017
> 
> 标签：javascript, javascript-events

我试图覆盖我们在浏览器中使用的默认快捷键（例如 Ctrl+1、Ctrl+2 分别转到 Tab1 和 Tab2）。我必须使用 javascript.please 来帮助我。

我尝试了下面的代码，当我使用 alert() 但没有 alert() 功能时，它工作正常。

代码 ：

```
<script language="javascript" type="text/javascript">
document.onkeydown = NavigateThrough;
function NavigateThrough (event)
{
    if (!document.getElementById) return;
    if (window.event) event = window.event;
    if (event.ctrlKey)
    {
        var link = null;
        switch (event.keyCode ? event.keyCode : event.which ? event.which : null)
        {
            case 0x31:
                //alert("hi 1 pressed");
                document.getElementById('txt').value = "Number : 1"; 
                break;
            case 0x32:
                //alert("hi 2 pressed");
                document.getElementById('txt').value = "Number : 2"
                break;
            case 0x33:
                //alert("hi 3 pressed");
                document.getElementById('txt').value = "Number : 3"
                break;
        }
    } 
}
</script>
<body >
<input type="text" id="txt">
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:36:12.543

尝试添加 event.preventDefault()？因为 ctrl + 1 将重新加载页面并中断代码。

另外，对于跨平台浏览器，ctrl 键不一定足够。考虑 jquery 或 event.metaKey

[命令键的jQuery键代码](https://stackoverflow.com/questions/3834175/jquery-key-code-for-command-key)

# c# - WPF如何将带有描述的枚举绑定到组合框

> ID：15567913
> 
> 赞同：13
> 
> 时间：2013-03-22T10:20:14.110
> 
> 标签：c#, wpf, combobox, devexpress, enumeration

如何将`enum`with `Description`( `DescriptionAttribute`) 绑定到 a `ComboBox`？

我有一个`enum`：

```
public enum ReportTemplate
{
    [Description("Top view")]
    TopView,

    [Description("Section view")]
    SectionView
} 
```

我试过这个：

```
<ObjectDataProvider MethodName="GetValues" ObjectType="{x:Type System:Enum}"
                    x:Key="ReportTemplateEnum">
    <ObjectDataProvider.MethodParameters>
        <x:Type TypeName="Helpers:ReportTemplate"/>
    </ObjectDataProvider.MethodParameters>
</ObjectDataProvider>

<Style x:Key="ReportTemplateCombobox" TargetType="dxe:ComboBoxEditSettings">
    <Setter Property="ItemsSource" 
            Value="{Binding Source={x:Type Helpers:ReportTemplate}}"/>
    <Setter Property="DisplayMember" Value="Description"/>
    <Setter Property="ValueMember" Value="Value"/>
</Style> 
```

不能成功做到这一点，任何简单的解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-15T18:06:44.633

这可以通过为您的组合框使用转换器和项目模板来完成。

这是绑定到枚举时将返回描述值的转换器代码：

```
namespace FirmwareUpdate.UI.WPF.Common.Converters
{
    public class EnumDescriptionConverter : IValueConverter
    {
        private string GetEnumDescription(Enum enumObj)
        {
            FieldInfo fieldInfo = enumObj.GetType().GetField(enumObj.ToString());

            object[] attribArray = fieldInfo.GetCustomAttributes(false);

            if (attribArray.Length == 0)
            {
                return enumObj.ToString();
            }
            else
            {
                DescriptionAttribute attrib = attribArray[0] as DescriptionAttribute;
                return attrib.Description;
            }
        }

        object IValueConverter.Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            Enum myEnum = (Enum)value;
            string description = GetEnumDescription(myEnum);
            return description;
        }

        object IValueConverter.ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return string.Empty;
        }
    }
} 
```

然后在您的 xaml 中您需要使用和项目模板。

```
<ComboBox Grid.Row="1" Grid.Column="1"  Height="25" Width="100" Margin="5"
              ItemsSource="{Binding Path=MyEnums}"
              SelectedItem="{Binding Path=MySelectedItem}"
              >
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Converter={StaticResource enumDescriptionConverter}}"/>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-01T21:46:40.290

RSmaller 有一个很好的答案，也是我使用的那个，但有一点需要注意。如果您的枚举中有多个属性，并且 Description 不是第一个列出的，那么他的“GetEnumDescription”方法将引发异常......

这是一个稍微安全一点的版本：

```
 private string GetEnumDescription(Enum enumObj)
    {
        FieldInfo fieldInfo = enumObj.GetType().GetField(enumObj.ToString());

        object[] attribArray = fieldInfo.GetCustomAttributes(false);

        if (attribArray.Length == 0)
        {
            return enumObj.ToString();
        }
        else
        {
            DescriptionAttribute attrib = null;

            foreach( var att in attribArray)
            {
                if (att is DescriptionAttribute)
                    attrib = att as DescriptionAttribute;
            }

            if (attrib != null )
                return attrib.Description;

            return enumObj.ToString();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-26T13:13:18.053

虽然已经回答，但我通常使用类型转换器执行以下操作。

1.  我向我的枚举添加了一个类型转换器属性。

    ```
    // MainWindow.cs, or any other class
    [TypeConverter(TypeOf(MyDescriptionConverter)]
    public enum ReportTemplate
    { 
         [Description("Top view")]
         TopView,

         [Description("Section view")]
         SectionView
    } 
    ```

2.  实现类型转换器

    ```
    // Converters.cs
    public class MyDescriptionConverter: EnumConverter
    {
        public MyDescriptionConverter(Type type) : base(type) { }

        public override object ConvertTo(ITypeDescriptorContext context, CultureInfo culture, object value, Type destinationType)
        {
             if (destinationType == typeof(string))
             {
                 if (value != null)
                 {
                     FieldInfo fieldInfo = value.GetType().GetField(value.ToString());

                 if (fieldInfo != null)
                 {
                     var attributes = (DescriptionAttribute[])fieldInfo.GetCustomAttributes(typeof(DescriptionAttribute), false);

                     return ((attributes.Length > 0) && (!string.IsNullOrEmpty(attributes[0].Description))) ? attributes[0].Description : value.ToString();
                 }
             }

             return string.Empty;
         }

         return base.ConvertTo(context, culture, value, destinationType);
     } 
    ```

3.  提供要绑定的属性

    ```
    // myclass.cs, your class using the enum
    public class MyClass()
    {
        // Make sure to implement INotifyPropertyChanged, but you know how to do it
        public MyReportTemplate MyReportTemplate { get; set; }

        // Provides the bindable enumeration of descriptions
        public IEnumerable<ReportTemplate> ReportTemplateValues
        {
             get { return Enum.GetValues(typeof(ReportTemplate)).Cast<ReportTemplate>(); }
        }
    } 
    ```

4.  使用枚举属性绑定组合框。

    ```
     <!-- MainWindow.xaml -->
     <ComboBox ItemsSource="{Binding ReportTemplateValues}"
               SelectedItem="{Binding MyReportTemplate}"/>

     <!-- Or if you just want to show the selected vale -->
     <TextBlock Text="MyReportTemplate"/> 
    ```

我喜欢这种方式，我的 xaml 保持可读性。如果缺少枚举项属性之一，则使用项本身的名称。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2014-07-06T08:18:12.290

```
public enum ReportTemplate
{
 [Description("Top view")]
 Top_view=1,
 [Description("Section view")]
 Section_view=2
}

ComboBoxEditSettings.ItemsSource = EnumHelper.GetAllValuesAndDescriptions(new
List<ReportTemplate> { ReportTemplate.Top_view, ReportTemplate.Section_view }); 
```

# html - 用chrome打印时表格中奇怪的单元格高度

> ID：15567919
> 
> 赞同：5
> 
> 时间：2013-03-22T10:20:38.773
> 
> 标签：html, google-chrome

我有以下 html 文件。

= 文件不再可用 =

当页面以 chrome 打印时，问题就开始了。Chrome 会随机增加预览和打印文件中某些单元格的高度。

当您使用 Internet Explorer 时，所有内容都会按原样打印。

自己尝试一下，在 chrome 中打开文件并按 ctrl + p 您可以在第 4 页和第 6 页上看到一行比其他行高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:46:51.080

根据 productforums.google.com，这是一个已知问题，Google 正在努力解决。只需要拭目以待

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-29T08:37:13.967

使用`</td>`和`</tr>`标签。您在单词后使用空格，当 chrome 计算单元格内部文本长度时，会显示这些空格。把他们赶走。还将页面结构升级为 html 标准。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-30T12:52:29.440

我找到了解决方案。设置行高属性，不要使用表格标题。我的意思是，所有的 td 标签都必须是相同的高度。

![在此处输入图像描述](../Images/bf5729066643361c0f0dbb89fce54d14.png)

# c# - 选择 TreeView 的组

> ID：15567921
> 
> 赞同：1
> 
> 时间：2013-03-22T10:20:39.740
> 
> 标签：c#, .net, xaml, binding, treeview

是否可以像列表中的项目一样在 TreeView 中选择组？

我使用 GroupStyle 并定义了一个带有一些样式的 TextBlock。所以我想了一个替代方案，我在 DataContext 中设置了类似“SelectedGroupItem”的内容，并将其与 GroupName 进行比较，以设置要显示的 TextBlock 的背景，该组已被选中，但我无法绑定“Value”-Property的DataTrigger 到TextBox 的GroupName 或Text，因为它只支持DependencyProperties。

对不起我的英语不好。我希望你能理解我的问题。

# excel - Excel函数将值放置在其下方和旁边的列中

> ID：15567922
> 
> 赞同：1
> 
> 时间：2013-03-22T10:20:40.640
> 
> 标签：excel, excel-2007

我在 B 列中有一些值，如下所示：

```
Last 20
Team1
Team2
Team3
Top
Last 50
Team1
Team2 
```

...等等

我想要的是在 A 列中的每个团队旁边放置文本“Last 20”。然后当它到达最后 50 名时，我想在最后 50 名之后的每个团队旁边放置“Last 50”。

这可能吗？我已经搞砸了 VLOOKUP，但我认为这不是正确的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:46:18.177

将以下内容放入C2并复制下来：

```
=IF(LEFT(B2;4)="Last";"";IF(LEFT(B1;4)="Last";B1;C1)) 
```

如果您需要使用逗号代替分号，请在公式中交换它们。

# xml - 如何使用 XSL 显示 RDF 节点的属性？

> ID：15567931
> 
> 赞同：1
> 
> 时间：2013-03-22T10:20:58.007
> 
> 标签：xml, xslt, rdf

我需要`rdf:resource`从下面的 XML/RDF 中显示值。

```
<?xml version="1.0" encoding="UTF-8"?><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:skos="http://www.w3.org/2004/02/skos/core#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" xmlns:owl="http://www.w3.org/2002/07/owl#">
    <skos:Concept rdf:about="http://example.com/randomurl">

        <skos:prefLabel xml:lang="en">example</skos:prefLabel>
        <skos:broader rdf:resource="http://example.com/randomurl"/>
        <skos:broader rdf:resource="http://example.com/randomurl"/>
        <owl:sameAs rdf:resource="http://example.com/randomurl"/>

    </skos:Concept>
</rdf:RDF> 
```

我试过了，但找不到正确的路径。这可能是我忽略的非常小的和值得关注的东西。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:skos="http://www.w3.org/2004/02/skos/core#"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
xmlns:owl="http://www.w3.org/2002/07/owl#">

<xsl:template match="/">
    <html>
    <body>    
    <h2><xsl:value-of select="//skos:prefLabel" /></h2>
    <br />    
    <xsl:for-each select="//skos:broader">
        Broader: <br />
    </xsl:for-each>        
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

它确实进入了 for-each 循环并显示了正确数量的节点`skos:narrower`，但是当我尝试获取`rdf:resource`with

```
<xsl:for-each select="//skos:broader">
    Broader: <xsl:value-of select="@rdf:resource" /><br />
</xsl:for-each> 
```

或选择的变体，它只是不起作用。我试图通过谷歌搜索和在 Stack Overflow 上搜索来找到解决方案，但没有找到解决方案。

那么我做错了什么？

编辑：产生以下错误：

> 警告：XSLTProcessor::transformToXml(): Undefined namespace prefix in [path] on line 57
> 
> 警告：XSLTProcessor::transformToXml(): xmlXPathCompiledEval: 第 57 行 [path] 中的评估失败
> 
> 警告：XSLTProcessor::transformToXml(): runtime error: file [path] line 25 element value-of in [path] on line 57
> 
> 警告：XSLTProcessor::transformToXml()：XPath 评估未返回任何结果。在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:50:31.537

会不会是因为您没有`rdf`在 XSLT 中声明命名空间而导致它不起作用？当这个 XSLT：

```
<xsl:stylesheet version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
      xmlns:skos="http://www.w3.org/2004/02/skos/core#"
      xmlns:dc="http://purl.org/dc/elements/1.1/"
      xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
      xmlns:owl="http://www.w3.org/2002/07/owl#"
      xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">

  <xsl:template match="/">
    <html>
      <body>
        <h2>
          <xsl:value-of select="//skos:prefLabel" />
        </h2>
        <br />
        <xsl:for-each select="//skos:broader">
          <xsl:text>Broader: </xsl:text>
          <xsl:value-of select="@rdf:resource"/>
          <br />
        </xsl:for-each>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行，结果是：

```
<html xmlns:skos="http://www.w3.org/2004/02/skos/core#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" xmlns:owl="http://www.w3.org/2002/07/owl#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <body>
    <h2>example</h2><br>
    Broader: http://example.com/randomurl<br>
    Broader: http://example.com/randomurl<br>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:12:46.593

在您的 XSLT 中，您忘记了导入 RDF 名称空间。只需添加`xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"`到您的 XSLT。它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:51:05.867

只是备注：处理 RDF/XML 时，一般规则是“不要使用 XML 工具！” 您是否有理由必须使用 XSLT 而不是专用的 RDF 工具？您能否确定与 XSLT 一起使用的 RDF 文档将始终具有相同的结构？

让我们想象一下，我使用 RDF API 解析您的 RDF/XML 文档。然后我将它重新序列化为 RDF/XML。结果很可能是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:skos="http://www.w3.org/2004/02/skos/core#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
         xmlns:owl="http://www.w3.org/2002/07/owl#">
<skos:Concept rdf:about="http://example.com/randomurl">

    <skos:prefLabel xml:lang="en">example</skos:prefLabel>
    <skos:broader>
        <rdf:Description rdf:about="http://example.com/randomurl"/>
    </skos:broader>
    <skos:broader>
        <rdf:Description rdf:about="http://example.com/randomurl"/>
    </skos:broader>
    <owl:sameAs>
        <rdf:Description rdf:about="http://example.com/randomurl"/>
    </owl:sameAs>

</skos:Concept>
</rdf:RDF> 
```

并且您的 XSLT 不再起作用（尽管基本上是相同的数据）。

# matplotlib - Matplotlib：更改指数的字体大小

> ID：15567932
> 
> 赞同：5
> 
> 时间：2013-03-22T10:21:02.203
> 
> 标签：matplotlib

我想更改图片上标记的指数![图片](../Images/af2d6ed7fc29ff7546040ff2e2871e6a.png) 字体大小我不能使用 matplotlib.rc('font', **font) 方法，因为我有不同的绘图需要不同的字体大小，所以我单独更改每个元素。但是，我找不到指数的字体属性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T14:22:21.587

如果指数是由您`offset`计算的，`matplotlib`您可以执行以下操作将指数的字体大小更改为`30`

```
import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(1,1.0001,100)

fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot(x)
t = ax.yaxis.get_offset_text()
t.set_size(30)
plt.show() 
```

# facebook - 如何构建 Facebook Presence 应用程序

> ID：15567938
> 
> 赞同：0
> 
> 时间：2013-03-22T10:21:10.007
> 
> 标签：facebook, api, token

有一些解决方案使用 RFID 阅读器代表用户执行一些操作（发布等）。我读到它就是所谓的“Facebook Presence”，它是在 2011 年的 F8 会议上提出的。

您可以使用一个网站来注册芯片令牌 ( [http://www.facebook.com/settings?tab=presence](http://www.facebook.com/settings?tab=presence) )，但我在 Facebook 开发人员中找不到有关它的消息。

你知道吗？一些API？如何用这个构建应用程序？

[有关该主题的文章。](http://tictechtips.blogspot.com/2011/10/facebook-presence-real-life-real-time.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:24:47.597

[http://www.thetechlabs.com/tech-news/facebook-presence/](http://www.thetechlabs.com/tech-news/facebook-presence/)：

> *“Facebook Presence”不会成为不断增长的站点库中无数的 Facebook 应用程序之一。该项目只是展示了他们很酷的新“地点”功能，允许用户选择分享他们当前的位置。*

不确定这是否仍然适用——但由于文档中的任何地方都没有关于它的内容，我会说它很可能确实如此。

# jquery - 如何使用 onclick 事件打开具有花式框效果的 iframe

> ID：15567942
> 
> 赞同：0
> 
> 时间：2013-03-22T10:21:18.273
> 
> 标签：jquery, html, iframe, onclick, fancybox

我正在尝试用fancybox效果编写一个iframe，我需要使用onclick事件，所以我尝试使用这段代码，iframe以fancybox效果打开但没有onclick事件......

```
<div class="addelement"><li>
<a class="fancybox fancybox.iframe" href="addelements.php" onclick="showelementbox(\''+data.msg+'\');
parent.scrollTo(00, 00);"></a></li>
</div> 
```

或者有可能做这样的事情吗？

```
<div class="addelement">
<a href="javascript:void(0)" onclick="$FANCYBOX EVENT TO OPEN THE IFRAME();showelementbox(\''+data.msg+'\');
parent.scrollTo(00, 00);"></a>
</div> 
```

# c# - 在 WebAPI 中定义两个 get 函数

> ID：15567945
> 
> 赞同：0
> 
> 时间：2013-03-22T10:21:20.490
> 
> 标签：c#, routing, asp.net-web-api

当我尝试在 MVC WebAPI 中调用 GET 函数时出现以下异常

```
 {"$id":"1","Message":"An error has occurred.",
 "ExceptionMessage":"Multiple actions were found that match the request: 
 \r\nSystem.Xml.XmlNode Get(Int32, System.String) 
```

我认为问题是由于两个get函数引起的，我定义了两个函数：

**一：**

```
 [HttpGet]
   public XmlNode Get(int id, string Tokken)
   {
        //Do something
   } 
```

**第二个**

```
 [HttpGet]
 public List<UsersAnswers> GetUsersInteractions(int? activityID, string Tokken)
 {
  // Do Something
 } 
```

**路由配置**

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

现在，当我尝试调用第二个函数时出现异常：

```
{SiteURL}/api/Activities/GetUsersInteractions?activityID=32&Tokken=r54e54353 
```

如您所见，路由引擎将请求发送到第一个函数而不是第二个函数。

如何定义两个 get 操作并分别调用每个操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:28:17.637

使用默认路由模板，Web API 使用 HTTP 方法来选择操作。但是，您也可以创建一个路由，其中​​操作名称包含在 URI 中：

```
routes.MapHttpRoute(
    name: "ActionApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

在此路由模板中，{action} 参数命名控制器上的操作方法。使用这种路由样式，使用属性来指定允许的 HTTP 方法。例如，假设您的控制器具有以下方法：

```
public class ProductsController : ApiController
{
    [HttpGet]
    public string Details(int id);
} 
```

在这种情况下，“api/products/details/1”的 GET 请求将映射到 Details 方法。这种路由风格类似于 ASP.NET MVC，并且可能适用于 RPC 风格的 API。

您可以使用 ActionName 属性覆盖操作名称。在以下示例中，有两个操作映射到“api/products/thumbnail/id”。一个支持 GET，另一个支持 POST：

```
public class ProductsController : ApiController
{
    [HttpGet]
    [ActionName("Thumbnail")]
    public HttpResponseMessage GetThumbnailImage(int id);

    [HttpPost]
    [ActionName("Thumbnail")]
    public void AddThumbnailImage(int id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:25:04.893

您没有调用第二个函数 - 第二个函数被命名`InsertUserRecord`并且是一个`POST`方法。您通过调用的函数`GET`是`GetUserInteractions`. 由于没有这样的函数`GET`，引擎可能会将其映射到唯一的`GET`函数，但实际上它应该抛出“没有这样的函数”错误。

# regex - 如何获取不匹配字符串的url

> ID：15567947
> 
> 赞同：0
> 
> 时间：2013-03-22T10:21:31.720
> 
> 标签：regex, .htaccess, mod-rewrite

我想要一个不包含特定字符串（如 admin）且没有尾部斜杠（/）的 URL

例如以下是具有子字符串**admin的 URL**

```
 1\. http://www.domain.com/admin/abc/def
  2\. http://www.domain.com/admin/
  3\. http://www.domain.com/admin
  4\. http://www.domain.com/slug-1/
  5\. http://www.domain.com/slug-1/slug-2/ 
```

与正则表达式不匹配。

以下是一些应匹配的 URL 示例：

```
 1.http://www.domain.com/slug-1
 2.http://www.domain.com/slug-1/slug-2
 3.http://www.domain.com/slug-slug1/slug-2/slug-3 
```

此规则检查斜线是否不在末尾 **^(.*[^/])$**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:24:27.917

尝试`Perl`（`file.txt`包含您的 URL，每行一个）：

```
# Regex: (admin|.*\/$) with negation
perl -ne "print unless /(admin|.*\/$)/" file.txt

# Regex: ^((?!admin).)*((?!\/).)$ without negation.
perl -ne 'print if /^((?!admin).)*((?!\/).)$/' file.txt 
```

输出：

```
http://www.domain.com/slug-1
http://www.domain.com/slug-1/slug-2
http://www.domain.com/slug-slug1/slug-2/slug-3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:54:38.427

如果您使用 Unix/Linux：

```
cat yourfile | grep -Ev "/admin" | grep -Ev "/$" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T12:53:15.933

你可以这样做

```
Cat FileName|grep -v admin 
```

# java - 使用 Itext 验证 Pdf 签名时出错

> ID：15567953
> 
> 赞同：0
> 
> 时间：2013-03-22T10:21:39.817
> 
> 标签：java, pdf, itext, digital-signature, bouncycastle

我正在尝试使用 Itext 5 和 BouncyCastle 1.48 验证 PDF 签名。我的代码适用于许多签名的 pdf，但适用于特定客户的某些 pdf。这是我的Java代码

```
// The entry point
public static void verifySignatures(String path) throws IOException, GeneralSecurityException {
    System.out.println(path);
    PdfReader reader = new PdfReader(path);
    AcroFields fields = reader.getAcroFields();
    ArrayList<String> names = fields.getSignatureNames();
    System.out.println("Il y a "+names.size()+" signatures");
    for (String name : names) {
        System.out.println("===== " + name + " =====");
        verifySignature(fields, name);
    }
    System.out.println();
}

public static PdfPKCS7 verifySignature(AcroFields fields, String name)
        throws GeneralSecurityException, IOException {
    System.out.println("Signature covers whole document: "+ fields.signatureCoversWholeDocument(name));
    System.out.println("Document revision: " + fields.getRevision(name)
            + " of " + fields.getTotalRevisions());
    PdfPKCS7 pkcs7 = fields.verifySignature(name);
    System.out.println("Integrity check OK? " + pkcs7.verify());
    return pkcs7;
} 
```

有时我会得到这个异常：

> java.lang.IllegalArgumentException：getInstance 中的未知对象：org.bouncycastle.asn1.ASN1Sequence.getInstance(Unknown Source) at org.bouncycastle.asn1.ocsp.ResponseData.getInstance(Unknown Source) at org.bouncycastle.asn1.ASN1Enumerated .bouncycastle.asn1.ocsp.BasicOCSPResponse.(Unknown Source) at org.bouncycastle.asn1.ocsp.BasicOCSPResponse.getInstance(Unknown Source) at com.itextpdf.text.pdf.security.PdfPKCS7.findOcsp(PdfPKCS7.java:1284)在 com.itextpdf.text.pdf.security.PdfPKCS7.(PdfPKCS7.java:382) 在 com.itextpdf.text.pdf.AcroFields.verifySignature(AcroFields.java:2317)

有没有人必须解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T09:26:46.257

我设法找到了问题所在。

BouncyCastle 库之间存在冲突，我注意到 Grails（我使用的框架）嵌入了另一个版本的 Bouncycastle。

我从 BuildConfig.groovy 中排除了那些 jar

```
 // inherit Grails' default dependencies
   inherits("global") {
      excludes 'bcprov-jdk15', 'bcpg-jdk15', 'bcmail-jdk15' 
   } 
```

...它的工作原理。

# android - 如何以编程方式在android上获取正在运行的应用程序图标

> ID：15567957
> 
> 赞同：3
> 
> 时间：2013-03-22T10:21:48.227
> 
> 标签：android

下面是我的代码，但我正在为所有正在运行的应用程序获取默认的 android 启动器图标：

```
PackageManager pm = getPackageManager();

            ActivityManager am1 = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);

            List<RunningTaskInfo> processes = am1.getRunningTasks(Integer.MAX_VALUE);

                if (processes != null) {
                    for (int k = 0; k < processes.size(); k++) {
                        // String pkgName = app.getPackageName();
                        String packageName = processes.get(k).topActivity
                                .getPackageName();
                        Drawable ico = null;
                        try
                        {
                         String pName = (String) pm.getApplicationLabel(pm
                                .getApplicationInfo(packageName,
                                        PackageManager.GET_META_DATA));

                            ico = pm.getApplicationIcon(pName);

                        } 
                        catch (NameNotFoundException e) 
                        {
                            Log.e("ERROR", "Unable to find icon for package '"
                                    + packageName + "': " + e.getMessage());
                        }
                        icons.put(processes.get(k).topActivity.getPackageName(),ico);
                    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-22T10:44:28.997

只需替换此行

```
ico = pm.getApplicationIcon(pName); 
```

对此

```
ico = getApplicationInfo().loadIcon(getPackageManager()); 
```

**编辑**完整代码：

```
public void getAllICONS() {

    PackageManager pm = getPackageManager();

    ActivityManager am1 = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);

    List<RunningTaskInfo> processes = am1
            .getRunningTasks(Integer.MAX_VALUE);

    if (processes != null) {
        for (int k = 0; k < 5; k++) {
            // String pkgName = app.getPackageName();
            String packageName = processes.get(k).topActivity
                    .getPackageName();
            Log.e("packageName-->", "" + packageName);
            Drawable ico = null;
            try {
                String pName = (String) pm.getApplicationLabel(pm
                        .getApplicationInfo(packageName,
                                PackageManager.GET_META_DATA));
                name.add("" + pName);
                ApplicationInfo a = pm.getApplicationInfo(packageName,
                        PackageManager.GET_META_DATA);
                ico = getPackageManager().getApplicationIcon(
                        processes.get(k).topActivity.getPackageName());
                getPackageManager();
                Log.e("ico-->", "" + ico);

            } catch (NameNotFoundException e) {
                Log.e("ERROR", "Unable to find icon for package '"
                        + packageName + "': " + e.getMessage());
            }
            // icons.put(processes.get(k).topActivity.getPackageName(),ico);
            icons.add(ico);

        }
    }
} 
```

上面的代码是向你展示的图标，如：

![在此处输入图像描述](../Images/2c1f13928edbf9d0df19f26fce126ce3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T13:31:39.900

要检索应用程序图标，您可以使用[PackageManger的](http://developer.android.com/reference/android/content/pm/PackageManager.html)*[getApplicationIcon()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationIcon%28java.lang.String%29)*方法。

在您的情况下，由于您正在检索正在运行的应用程序的图标，您可以执行以下操作：

```
final ActivityManager am = (ActivityManager) getSystemService(Activity.ACTIVITY_SERVICE);
final PackageManager pm = getPackageManager();
List<ActivityManager.RunningTaskInfo> runningTasks;

try {
    runningTasks = am.getRunningTasks(100);
}
catch ( SecurityException e ) {
    runningTasks = new ArrayList<ActivityManager.RunningTaskInfo>();
    //e.printStackTrace();
}

Drawable icon;

for ( ActivityManager.RunningTaskInfo task : runningTasks ) {
    final String packageName = task.topActivity.getPackageName();

    try {
            icon = pm.getApplicationIcon(packageName);
    }
    catch ( PackageManager.NameNotFoundException e ) {
            //e.printStackTrace();
    }
} 
```

否则，更好的是，您可以使用*[getApplicationIcon()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationIcon%28android.content.pm.ApplicationInfo%29)*的其他实现，因此：

```
ApplicationInfo ai;

try {
    ai = pm.getApplicationInfo(packageName, PackageManager.GET_META_DATA);
} catch ( PackageManager.NameNotFoundException e ) {
    ai = null;
    //e.printStackTrace();
}

if ( ai != null ) {
    icon = pm.getApplicationIcon(ai);
} 
```

**PS：**无论如何，请注意*[getRunningTasks()](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningTasks%28int%29)*永远不会返回**null**，而最多是一个**空列表**。

# mysql - mysql 加载查询无法正常工作

> ID：15567969
> 
> 赞同：0
> 
> 时间：2013-03-22T10:22:41.283
> 
> 标签：mysql

我想通过我的 sql 中的加载命令将数据插入到表中，但是当我运行查询时，数据只输入到第一列，另一列为空

我的文本文件是：

```
 - 1      server
     - 2      client 
     - 3      network
     - 4      system 
```

第一列是错误代码，第二列是注释，查询是：

```
load data local infile 'C:/Users/nco/Desktop/help.txt' into table help; 
```

在那之后`select * from help;`

输出是：

```
mysql> select * from help;
+------------+-------------+
| error_code | description |
+------------+-------------+
|          1 | NULL        |
|          2 | NULL        |
|          3 | NULL        |
|          4 | NULL        |
+------------+-------------+
4 rows in set (0.03 sec) 
```

知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:31:17.620

如果您在 Windows 上使用使用 \r\n 作为行终止符的编辑器创建文件，则应改用以下语句：

```
LOAD DATA LOCAL INFILE 'C:/Users/nco/Desktop/help.txt' INTO TABLE help
     LINES TERMINATED BY '\r\n'; 
```

# android - 使用 OAuth 在 android 中发送电子邮件而无需用户交互

> ID：15567973
> 
> 赞同：2
> 
> 时间：2013-03-22T10:22:49.770
> 
> 标签：android, oauth, smtp

我在尝试连接到 smtp 时收到此错误

```
javax.mail.MessagingException: 334 eyJzdGF0dXMiOiI0MDAiLCJzY2hlbWVzIjoiQmVhcmVyIiwic2NvcGUiOiJodHRwczovL21haWwuZ29vZ2xlLmNvbS8ifQ== 
```

这是我的代码

```
public class GMailOauthSender
{
    private Session session;

    public SMTPTransport connectToSmtp(String host, int port, String userEmail, String oauthToken, boolean debug) throws Exception {

        Properties props = new Properties();
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.starttls.required", "true");
        props.put("mail.smtp.sasl.enable", "false");
        session = Session.getInstance(props);
        session.setDebug(debug);

        final URLName unusedUrlName = null;
        SMTPTransport transport = new SMTPTransport(session, unusedUrlName);
        // If the password is non-null, SMTP tries to do AUTH LOGIN.
        final String emptyPassword = null;
        transport.connect(host, port, userEmail, emptyPassword);

        byte[] response = String.format("user=%s\1auth=Bearer %s\1\1", userEmail, oauthToken).getBytes();
        response = BASE64EncoderStream.encode(response);

        transport.issueCommand("AUTH XOAUTH2 " + new String(response), 235);

        return transport;
    }

    public synchronized void sendMail(String subject, String body, String user, String oauthToken, String recipients) {
        try {
            SMTPTransport smtpTransport = connectToSmtp("smtp.gmail.com",587,user,oauthToken,true);

            MimeMessage message = new MimeMessage(session);
            DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));   
            message.setSender(new InternetAddress(user));   
            message.setSubject(subject);   
            message.setDataHandler(handler);   

            if (recipients.indexOf(',') > 0)   
                message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
            else  
                message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   

            smtpTransport.sendMessage(message, message.getAllRecipients());   
        } catch (Exception e) {
            Log.d("test", e.getMessage());
        }
    }
} 
```

我从堆栈溢出的某个地方得到了这段代码。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T18:59:42.377

The error you are receiving

```
eyJzdGF0dXMiOiI0MDAiLCJzY2hlbWVzIjoiQmVhcmVyIiwic2NvcGUiOiJodHRwczovL21haWwuZ29vZ2xlLmNvbS8ifQ== 
```

decodes to the following using a Base64 Decoder

```
{"status":"400","schemes":"Bearer","scope":"https://mail.google.com/"} 
```

What this ends up meaning (as cryptic as the message is) is that the authentication token that you are using has expired. You need to invalidate it and then get a new one (simply request the token again).

You invalidate the token like this:

```
mAccountManager.invalidateAuthToken("con.google", mAuthenticationToken); 
```

I hope that this is helpful :)

# jquery - 使用 jquery 需要更改 pfbc

> ID：15567975
> 
> 赞同：0
> 
> 时间：2013-03-22T10:22:51.297
> 
> 标签：jquery, validation

我正在使用 PFBC 构建我的表单和 jquery 以进行验证。我有一个元素：

```
array (
     'name' => 'bank[Bank Name]',
     'label' => $this->t('Bank Name'),
     'type' => 'Textbox',
     'properties' => array (
          'id' => 'bank_name',
           'required' => 1,
      )

), 
```

基于另一个字段的选择值，我想隐藏它并使其不需要，或者相反。

```
if ($('select[name=type]').val() == 'bank_wire_transfer') {
     $('#element_bank_name').slideDown();
     $('#element_bank_name').attr("required")=1;
}
else{
      $('#element_bank_name').slideUp();
     $('#element_bank_name').attr("required")=0;
} 
```

但是这段代码，以及我尝试过的许多其他变体，都不起作用。该字段仍然是必需的，我无法提交我的表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:58:37.390

在我的示例中，PFBC 将创建： 1\. 包含标签和 id='#element_bank_name' 的输入类型的元素 2\. 输入类型将具有 id='bank_name'

因此，要隐藏您所做的整个元素：

```
$('#element_bank_name').slideUp(); 
```

并更改您执行的输入元素值：

```
$('#bank_name').val(""); 
```

# php - 推动 ORM 自引用外键

> ID：15567976
> 
> 赞同：4
> 
> 时间：2013-03-22T10:22:53.053
> 
> 标签：php, mysql, orm, propel

我使用 Propel ORM 并且对 Propel 非常陌生。我需要一些帮助，从表中选择数据，但查询不正确。我有一张这样的表（注意：不是实际的表，而是相同的主体）：

```
+---------------------+
| ID  | Page | Parent |
+---------------------+
| 1   |  A   |  0     |
| 2   |  B   |  0     |
| 3   |  C   |  2     |
| 4   |  D   |  3     |
| 5   |  E   |  1     |
| 6   |  F   |  0     |
| 7   |  G   |  3     |
| 8   |  H   |  4     |
| 9   |  I   |  6     |
| 10  |  J   |  5     |
+---------------------+ 
```

该表在加载页面时为我提供了类似树的结构。在使用 propel 之前，我有一个带有函数“loadPages”的类，它将内页嵌套在 Pages 类中名为 $nested 的数组上，看起来像这样（注意：不是实际函数，只是一个紧密的表示）：

```
function loadPages($parent=0, $data){
    $sql = "sql query here to select pages where parent = $parent";
    while($results){
       $pages = new Pages();
       $pages->setId(blah blah);
       $pages->setPage(blah blah);
       $pages->setParent(blah blah);

       $innerPages = new Pages();
       /* load innerpages into the nested array */
       $innerPages->loadPages($pages->getId(), $pages->nested);

       array_push($data, $pages);
       return true;
    }
} 
```

基本上我怎么能用 Propel 做到这一点？我可以很容易地拉出父值为 0 的页面，如下所示：

```
$pages = PagesQuery::create()
->filterByParent(0)
->find(); 
```

但是我需要将内页递归地嵌套到它返回的对象中，即使在 Propel 网站上的所有好的文档中，我的努力也没有得到很大的回报。

使用我的旧 Pages 类，如果我 print_r $data 我会得到这样的东西（这里只是使用上表的一个示例。）：

```
Array(
   [0] => Pages Object
   (
    [id] => 2
    [page] => B
    [parent] => 0
    [nested] = Array(
       [0] => Pages Object
       (
        [id] => 3
        [page] => C
        [parent] => 2
       )
    )
) 
```

我已经让这个工作了，但我不确定它是最好的方法。

```
function loadPages($parent=0, $siteId, &$arr){
        $arr = PagesQuery::create()
        ->filterBySiteId($siteId)
        ->filterByParentId($parent)
        ->find();

        foreach ($arr as $i => $v) {
            $arr[$i]->nested = '';
            loadPages($v->getId(), $siteId, $arr[$i]->nested);
        }

    }
    $site->pages = '';
    loadPages(0, $site->getId(), $site->pages); 
```

我的模式没有自我关系设置，所以我刚刚像这样在同一个表中添加了一个外键并重新运行推进以重新创建类。我仍然不确定如何写出推进查询（我从架构中删除了几列只是为了节省空间）。抱歉，这个帖子现在越来越火了。

```
<table name="pages" phpName="Pages">
    <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="userId" type="integer" required="false"/>
    <column name="siteId" type="integer" required="false"/>
    <column name="parentId" type="integer" required="false"/>
    <foreign-key foreignTable="users" phpName="Users" refPhpName="Pages">
         <reference local="userId" foreign="id"/>
        </foreign-key>
    <foreign-key foreignTable="sites">
          <reference local="siteId" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="pages">
         <reference local="parentId" foreign="id"/>
        </foreign-key>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:09:02.860

这不是您问题的直接答案，但它仍然是一个解决方案。

正如您在对该问题的评论中提到的那样：**嵌套集**是答案。

起初，这听起来像是解决问题的一种方法，但嵌套集是其他人遇到类似问题的结果。它经过充分研究，是一种表示树木的流行方式。它的主要优点正是管理可变深度树的能力。

您提到您是 Propel 的新手，并且切换到嵌套集将是一项相当多的工作，所以我冒昧地假设您之前没有使用过 Propel 的*行为*。如果是这种情况，请务必阅读有关[Behaviors](http://propelorm.org/documentation/07-behaviors.html)的文档部分。

如果你现在喜欢 Propel，以后你会*爱上*它！

要解决您的问题：查看[NestedSet Behavior](http://propelorm.org/behaviors/nested-set)。与所有其他行为一样，很容易将其添加到您的架构中。重新生成您的模型，您只需要对代码进行少量重构（示例将向您展示如何）。

（注意：如果您有一个现有的数据库，则需要将该父链接迁移到嵌套集结构。但这基本上是您应该关注的唯一问题。）

[使用 RecursiveIterator](http://propelorm.org/behaviors/nested-set#using-a-recursiveiterator)部分提供了一个显示整个树的示例。

# winapi - WinAPI 更改 ListView 控件的父级

> ID：15567977
> 
> 赞同：0
> 
> 时间：2013-03-22T10:22:52.830
> 
> 标签：winapi, listview, common-controls, setparent

我正在开发一个带有选项卡控件的应用程序。单击选项卡中的图标后，将打开一个弹出窗口，并将选项卡的内容移至弹出窗口。

我所做的很简单 - 将选项卡中每个控件的父级更改为弹出窗口（使用 SetParent()）。除了列表视图控件（虚拟列表视图）之外，一切都很好。

更改父级后，列表视图不再发送 WM_NOTIFY 通知。

我还使用非虚拟列表视图对其进行了测试，并且发生了同样的情况。

我在谷歌上搜索过，一无所获，所以任何想法都将不胜感激。

**更新**

更改父级后，列表视图继续向其先前的父级发送 WM_NOTIFY 通知。这是常见控件中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:23:42.497

许多通用控件在创建时会缓存它们的父控件。除了首先使用正确的父级创建它们之外，您实际上无能为力。

一种解决方法是注册一个虚拟窗口类，它只负责托管有问题的公共控件，并将消息转发回来并转发给它。然后，您可以重新设置该窗口而不是控件本身。

# opengl-es - 再次链接程序对象

> ID：15567979
> 
> 赞同：0
> 
> 时间：2013-03-22T10:22:59.280
> 
> 标签：opengl-es, hyperlink, shader

我有一个可以成功渲染的程序对象。

但是有时在我的应用程序运行时，当我修改和编译它的顶点和片段着色器源时，再次重新链接它`glLinkProgram()`，我看到程序无法渲染。

请注意：着色器和程序已成功重新编译/重新链接。

我只是检查他们的状态

```
glGetShaderiv(fsId, GL_COMPILE_STATUS, &compileStatus); 
and glGetProgramiv(progId, GL_LINK_STATUS, &linkStatus); 
the result is compileStatus = linkStatus = 1 
```

我想知道我们是否可以在 OpenGL ES 2.0 中重新链接程序对象？

我的 GPU 信息：

```
GL_RENDERER: PowerVR SGX 530
GL_VENDOR: Imagination Technologies
GL_VERSION: OpenGL ES 2.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:53:39.127

你可以吗？根据 OpenGL ES 规范，是的。*你应该*吗？不。

在 OpenGL（甚至 ES 版本）中做任何事情时的一般规则是：除非您知道它通常会做，否则不要做*任何事情。*你走得越远，你就越有可能遇到驱动程序错误。

一般来说，程序的使用模式是链接它们，然后使用它们，然后在关闭应用程序时删除它们。你应该坚持这一点。如果你需要一个新程序，你就创建一个*新程序*。

无论如何，重新链接都会破坏您所有的统一状态。因此，这并不是说您通过在旧程序中重新链接而不是创建新程序来保留某些内容。确实，这样更好；如果新链接失败，您仍然拥有旧程序。然而，如果您重新链接某个程序并且它失败了，那么旧数据就会被*破坏*。

# facebook - Facebook Like Box 不起作用

> ID：15567982
> 
> 赞同：0
> 
> 时间：2013-03-22T10:23:03.447
> 
> 标签：facebook, facebook-like

我正在尝试使用 fb like 框，在生成器预览中一切正常。将生成的代码粘贴到我的网站并点击“喜欢”按钮后，会出现一个弹出窗口，连接到 facebook 并再次自行关闭。但什么也没发生，我不喜欢 facebook 页面。

这是代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "http://connect.facebook.net/de_DE/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like-box" data-href="https://www.facebook.com/pages/Verband-Nordrhein-Westf%C3%A4lischer-Omnibusunternehmen-eV/494051873994513" data-width="292" data-height="300" data-show-faces="false" data-stream="false" data-header="true"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:21:13.773

尝试将脚本放在页面的第一个标记之后。

将`<div class="fb-like-box" data-href="https://www.facebook.com/pages/Verband-Nordrhein-Westf%C3%A4lischer-Omnibusunternehmen-eV/494051873994513" data-width="292" data-height="300" data-show-faces="false" data-stream="false" data-header="true"></div>` 您希望在页面中显示的位置。

不完全是在脚本之后。

# asp.net-mvc - ASP.NET MVC：将字符串传递给视图

> ID：15567985
> 
> 赞同：1
> 
> 时间：2013-03-22T10:23:12.403
> 
> 标签：asp.net-mvc

我有一个看起来像这样的控制器：

```
public class PersonController : Controller
{
    public ActionResult Result()
    {
        var s = new PersonResult();
        s = GetPerson(ViewBag.PersonInfo);
        return View(s);
    }
[...]
} 
```

控制器调用视图结果，如下所示：

```
@model My.Class.Library.DTO.PersonController
@if (Model != null && Model.Persons.Count > 0)
{
     @Html.Partial("Persons", @Model.Persons)
} 
```

所以模型可以容纳很多人。Persons 像这样被发送到它自己的视图（视图 Persons）：

```
@using My.Class.Library.DTO

@model List<Person>

<section>
    @foreach (Person person in @Model)
    {
        @Html.Partial("Person", person)
    }
</section> 
```

所以我将每个人发送到我的视图人。在那个视图中，我正在像这样绘制每个人：

```
@model Person
@if (Model.Fields.TryGetValue("description", out description)
{
    var descSplit = description.Split('#');
    foreach (string s in descSplit)
    {
        <div class="row-fluid">
            <div class="span2">Person</div>
            <div class="span10">@s</div>
        </div>
    }
} 
```

但我不想这样做，而是想将字符串 s 传递给它自己的视图。像这样的东西：

```
@model Person
@if (Model.Fields.TryGetValue("description", out description)
{
    var descSplit = description.Split('#');
    <section>
        @foreach (string s in descSplit)
        {
            @Html.Partial("Description", s)
        }
   </section>        
} 
```

但是“s”只是一个原始类型：一个字符串。我如何将它传递给我的视图“描述”？我的视图“描述”应该是什么样的？我在想这样的事情：

```
@model string

    <div class="row-fluid">
        <div class="span2"><b>TEST</b></div>
        <div class="span10">@s</div>
    </div> 
```

但这不正确......我的模型应该是什么以及如何呈现我从另一个视图发送的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:11:32.873

您的代码看起来正确，但在您的部分视图中，请尝试使用该`Model`属性。

```
@model string

    <div class="row-fluid">
        <div class="span2"><b>TEST</b></div>
        <div class="span10">@Model</div>
    </div> 
```

当您强烈键入 Views/PartialViews 时，您必须使用该`Model`属性来读取您作为模型传递给此 View/PartialView 的值。

# php - 在 WordPress 中构建条件语句

> ID：15567986
> 
> 赞同：0
> 
> 时间：2013-03-22T10:23:17.673
> 
> 标签：php, wordpress, code-snippets, conditional-statements

我有一个 PHP 片段，我只想出现在我指定的 WordPress 主页上。

我在 WordPress 网站的其他部分使用条件语句取得了成功，但这个语句让我感到困惑。

这是片段：

```
 <div id="home-post">
    <h1 id="homePost">Latest News</h1>  

    <?php

    $args = array( 'numberposts' => 1 );
    $lastposts = get_posts( $args );
    foreach($lastposts as $post) : setup_postdata($post); ?>

    <h2><a class="homeLink" href="<?php the_permalink(); ?>"><?php the_title(); ?>:</a></h2>

    <?php the_content(); ?>

    <?php endforeach; ?>

    </div> 
```

此代码运行良好，但出现在所有页面上，而我希望它只在 ID 为 102 的页面上激活。

我猜条件语句必须是这样的：

```
 <?php
    if (is_page ( '102' )) {

    ... snippet here ...

    } ?> 
```

然而，当我将这个额外的 PHP 应用到整个代码段时，它只会破坏代码段的语法。

有人可以建议吗？我不是最流利的 PHP，如果问题有点令人困惑，我很抱歉，但是任何帮助都会得到很大的帮助。

非常感谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:24:43.400

利用

```
<?php if(is_home()) : ?>
<?php
  $args = array( 'numberposts' => 1 );
  $lastposts = get_posts( $args );
  foreach($lastposts as $post) : setup_postdata($post); 
?>

<h2><a class="homeLink" href="<?php the_permalink(); ?>"><?php the_title(); ?>:</a></h2>

<?php the_content(); ?>

<?php endforeach; ?>

</div>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:25:33.603

```
<?php if(is_page('homepage'): ?>
content here
<?php endif; ?> 
```

# python - Python 2.7 退出

> ID：15567987
> 
> 赞同：0
> 
> 时间：2013-03-22T10:23:24.457
> 
> 标签：python, quit

我在这个函数中添加了确保用户确实想要退出程序的功能。它在您真正想退出时起作用，但如果您想返回程序，它只会循环语句：

```
def WantToQuit():
    Quit = raw_input("Please enter y if you are sure you want to quit, if not press n to return ")
    if Quit == 'y':
        print ('')
    elif Quit == 'n':
        DisplayMenu()
        return WantToQuit() 
```

别处：

```
elif Choice == 'q':
    WantToQuit()
    raw_input('Press enter key to continue ') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T10:30:38.193

替换`print ('')`为`sys.exit (0)`并删除`return WantToQuit()`.

我还建议您应用`.lower()`您的`Quit`变​​量，使其不区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:32:49.650

如果没有更多代码，很难向您展示您做错了什么，但我认为您的设置如下：

```
def WantToQuit():
    Quit = raw_input("Please enter y if you are sure you want to quit, if not press n to return ")
    if Quit == 'y':
        print ('')
    elif Quit == 'n':
        DisplayMenu()
    return WantToQuit()

while(True):
    DisplayMenu()
    # Some logic to get input and handle it
    # For example, something like
    selection = raw_input("Please make a selection: ")
    if(selection == "1"):
        doSomething()
    elif(selection == "2"):
        doSomethingElse()
    elif(selection == "q"):
        WantToQuit()
    else:
        # TODO: Handle this !
        pass 
```

我会这样做：

```
def WantToQuit():
    Quit = raw_input("Please enter y if you are sure you want to quit, if not press n to return ")
    if Quit == 'y':
        return true
    elif Quit == 'n':
        return false
    else:
        # TODO: Handle this !
        pass

while(True):
    DisplayMenu()
    # Some logic to get input and handle it
    # For example, something like
    selection = raw_input("Please make a selection: ").lower()
    if(selection == "1"):
        doSomething()
    elif(selection == "2"):
        doSomethingElse()
    elif(selection == "q"):
        if(WantToQuit()): break
    else:
        # TODO: Handle this !
        pass 
```

或者，您可以执行以下操作：

```
def WantToQuit():
    Quit = raw_input("Please enter y if you are sure you want to quit, if not press n to return ")
    if Quit == 'y':
        sys.exit(0)
    elif Quit == 'n':
        return # Do nothing really
    else:
        # TODO: Handle this !
        pass

while(True):
    DisplayMenu()
    # Some logic to get input and handle it
    # For example, something like
    selection = raw_input("Please make a selection: ").lower()
    if(selection == "1"):
        doSomething()
    elif(selection == "2"):
        doSomethingElse()
    elif(selection == "q"):
        WantToQuit()
    else:
        # TODO: Handle this !
        pass 
```

第一个示例让`WantToQuit`函数返回一个布尔值，用户是否*真的*想退出。如果是这样，无限循环被打破，程序自然退出。

第二个例子处理`WantToQuit`函数内部的退出，调用`sys.exit()`立即退出。

第一个可能更可取，尽管两者都在实践中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T17:18:30.423

您可以使用已经定义的函数，而不是创建一个新函数`quit()`。该`quit`函数会弹出一个框，上面写着：

[在]

`quit()`

[出去]

```
Your program is still running!
Do you want to kill it?
    Yes    No 
```

# javascript - 如何在Javascript的条件语句中设置一个类？

> ID：15567988
> 
> 赞同：0
> 
> 时间：2013-03-22T10:23:51.003
> 
> 标签：javascript, css

如何在Javascript中设置一个类？我将在我的网站中使用 Addthis 共享按钮。问题是我的网站需要有两种不同样式的共享按钮，一种显示在计算机浏览器中，另一种显示在移动设备中。

我将使用下面的脚本。我的问题是如何在javascript代码的条件下包含两个样式共享代码的代码行？如何将类放入 javascript 条件，因为共享代码具有 CSS 类。

```
 <script >
    function detectmob() { 
     if( navigator.userAgent.match(/Android/i)
     || navigator.userAgent.match(/webOS/i)
     || navigator.userAgent.match(/iPhone/i)
     || navigator.userAgent.match(/iPad/i)
     || navigator.userAgent.match(/iPod/i)
     || navigator.userAgent.match(/BlackBerry/i)
     || navigator.userAgent.match(/Windows Phone/i)
     ){
        return true;  // Style for mobile devices
      }

     else {
        return false;  // Style for computer devices
      }
    }

//Style for mobile devices
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style addthis_32x32_style">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5149fd2b33068839"></script>
<!-- AddThis Button END -->

// Style for Computer
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_floating_style addthis_32x32_style" style="left:50px;top:50px;">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5149fd2b33068839"></script>
<!-- AddThis Button END --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:31:50.543

您可以使用元素的[`className`属性：](https://developer.mozilla.org/en-US/docs/DOM/element.className)`<div>`

```
<div id="addthis-box" class="addthis_toolbox addthis_32x32_style">
    <a class="addthis_button_preferred_1"></a>
    <a class="addthis_button_preferred_2"></a>
    <a class="addthis_button_preferred_3"></a>
    <a class="addthis_button_preferred_4"></a>
    <a class="addthis_button_compact"></a>
    <a class="addthis_counter addthis_bubble_style"></a>
</div>
<script>
    var box = document.getElementById("addthis-box");
    if (detectmob()) {
        box.className += " addthis_default_style";
    } else {
        box.className += " addthis_floating_style";
        box.style.left = "50px";
        box.style.top = "50px";
    }
</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5149fd2b33068839"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:30:02.567

如果你只想动态添加一个 CSS 类，你可以使用

```
document.getElementById('the-element-s-id').className += 'the-desired-class'; 
```

如果只想添加两个（`left`和`top`），也可以使用

```
e = document.getElementById('here-goes-the-element-s-id');
e.style.left = '50px';
e.style.top = '50px'; 
```

虽然，我认为您的技术是错误的，因为您只针对特定用户，但我建议您查看 CSS 媒体查询并更一般地设置您的样式。

# vba - Excel VBA 组合框标识

> ID：15567989
> 
> 赞同：8
> 
> 时间：2013-03-22T10:23:52.563
> 
> 标签：vba, excel, combobox

我在用户表单上有 4 个以上的组合框。当它们触发时，它们触发相同的事件。我想做的是找出哪个 ComboBox 触发了事件。组合框的创建取决于有多少组件。生成 ComboBox 的代码如下所示：

```
For j = 0 To UBound(ComponentList) - 1
'Set Label
num = j + 1
Set control = UserForm1.Controls.Add("Forms.Label.1", "ComponentLabel" & CStr(num) & ":", True)
With control
    .Caption = "Component " & CStr(num)
    .Left = 30
    .Top = Height
    .Height = 20
    .Width = 100
    .Visible = True
End With
'set ComboBox
Set combo = UserForm1.Controls.Add("Forms.ComboBox.1", "Component" & num & ":", True)
With combo
    .List = ComponentList()
    .Left = 150
    .Top = Height
    .Height = 20
    .Width = 50
    .Visible = True
    Set cButton = New clsButton
    Set cButton.combobox = combo
    coll.Add cButton
End With
Height = Height + 30
Next j 
```

这很好用，我可以获得用户选择的值，但我找不到使用了哪个 ComboBox。下面的代码是它触发的事件（`clsButton`）：

```
Public WithEvents btn As MSForms.CommandButton
Public WithEvents combobox As MSForms.combobox
Private combolist() As String

Private Sub btn_Click()
    If btn.Caption = "Cancel" Then
        MsgBox "Cancel"
        Unload UserForm1
        Variables.ComponentSelectionError = False
    ElseIf btn.Caption = "Enter" Then
        MsgBox "enter"
        Unload UserForm1
        Variables.ComponentSelectionError = True
    End If
End Sub

Private Sub combobox_Click()
    MsgBox combobox.Value
End Sub 
```

上面这段代码由 Doug Glancy 精心编写，以使事件与代码生成的 ComboBoxes 一起工作。

如何获取触发事件的 ComboBox？即名称或某种其他形式的标识。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:36:25.837

在搜索了 500 多个网页后，我终于回答了我自己的问题（花了很长时间）

这是我使用的，当单击某些组合框时它会起作用并触发：

```
Private Sub combobox_Click()
MsgBox combobox.Value
If combobox = UserForm1.Controls("Component0") Then
    MsgBox "Success1"
End If
If combobox = UserForm1.Controls("Component1") Then
    MsgBox "Success2"
End If
End Sub 
```

希望这可以用于其他需要它的人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T11:35:28.897

类`.Name`内不会出现在组合框的智能感知列表中，因为`MSForms.ComboBox`它本身实际上并没有 name 属性（在 F2 对象浏览器中查看它），而是该属性由`Control`基类提供：

```
Private Sub combobox_Click()

    MsgBox combobox.Value
    MsgBox combobox.Name '// no hint but still works

    '//cast to a Control to get the formal control interface with .Name
    Dim ctrl As Control: Set ctrl = combobox
    MsgBox ctrl.Name

End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T10:43:30.167

也许再次参考 btn.Combobox？类似于您首先将组合框分配给按钮的方式，但反过来：

```
set combobox = btn.Combobox 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-31T00:08:06.750

您是否有理由不只是将属性添加到自定义类并在集合中注册时设置该属性？

```
For j = 0 To UBound(ComponentList) - 1
'Set Label
num = j + 1
Set control = UserForm1.Controls.Add("Forms.Label.1", "ComponentLabel" & CStr(num) & ":", True)
With control
    .Caption = "Component " & CStr(num)
    .Left = 30
    .Top = Height
    .Height = 20
    .Width = 100
    .Visible = True
End With
'set ComboBox
Set combo = UserForm1.Controls.Add("Forms.ComboBox.1", "Component" & num & ":", True)
With combo
    .List = ComponentList()
    .Left = 150
    .Top = Height
    .Height = 20
    .Width = 50
    .Visible = True
    Set cButton = New clsButton
'*******EDIT********
    with cButton
        .combobox = combo
        .Indx = j
    end With    'cButton
'*******************
    coll.Add cButton
End With
Height = Height + 30
Next j 
```

类模块

```
Public WithEvents btn As MSForms.CommandButton
Dim WithEvents mCombobox As MSForms.comboBox
Private combolist() As String

'*******EDIT********
Public Indx As Long

Property Let comboBox(cb As MSForms.comboBox)
    Set mCombobox = cb
End Property
'*******************

Private Sub btn_Click()
    If btn.Caption = "Cancel" Then
        MsgBox "Cancel"
        Unload UserForm1
        Variables.ComponentSelectionError = False
    ElseIf btn.Caption = "Enter" Then
        MsgBox "enter"
        Unload UserForm1
        Variables.ComponentSelectionError = True
    End If
End Sub

Private Sub mCombobox_Click()

'*******EDIT********
    MsgBox "Combobox " & Indx & Chr(9) & mComboBox.Value
'*******************

End Sub 
```

由于您需要事件的多对一映射，我假设您在实际代码中有一个共同的回调，所以您也可以这样做......

在标准模块中

```
Public Sub cbCallBack(ocb As clsButton)
    MsgBox ocb.Indx
End Sub 
```

在 clsButton 中（替换事件处理程序）

```
Private Sub mCombobox_Click()
    cbCallBack Me
End Sub 
```

# c++ - 在 C++ 中获取文件大小

> ID：15567992
> 
> 赞同：0
> 
> 时间：2013-03-22T10:24:05.040
> 
> 标签：c++, visual-c++

我有一个文件，我想获取文件的大小。我只能使用`_wfopen`或`_wfopen_s`打开文件，因为我的文件路径类型是`std::wstring`.

```
FILE* p_file = NULL;
p_file=_wfopen(tempFileName.c_str(),L"r");
fseek(p_file,0,SEEK_END); 
```

但我收到一个错误

```
error C2220: warning treated as error - no 'object' file generated 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:34:00.793

要摆脱您的错误消息，您需要修复生成警告的问题。

如果编译此代码：

```
#include "stdafx.h"
#include <string>

int _tmain(int argc, _TCHAR* argv[])
{
    FILE* p_file = NULL;
    std::wstring tempFileName = L"c:\\test.txt";
    p_file=_wfopen(tempFileName.c_str(),L"r");

    if(!p_file)
    {
        perror("Open failed.");
        return 0;
    }

    fseek(p_file,0,SEEK_END);
    fclose(p_file);

    return 0;
} 
```

您将收到以下警告：

> 警告 C4996：“_wfopen”：此函数或变量可能不安全。考虑改用 _wfopen_s。要禁用弃用，请使用 _CRT_SECURE_NO_WARNINGS。详细信息请参见在线帮助。

所以，听它说什么，然后执行以下操作：

```
#include "stdafx.h"
#include <string>

int _tmain(int argc, _TCHAR* argv[])
{
    FILE* p_file = NULL;
    std::wstring tempFileName = L"c:\\test.txt";
    _wfopen_s(&p_file, tempFileName.c_str(),L"r");

    if(!p_file)
    {
        perror("Open failed.");
        return 0;
    }

    fseek(p_file,0,SEEK_END);
    fclose(p_file);

    return 0;
} 
```

`_CRT_SECURE_NO_WARNINGS`有一种方法可以通过输入`Project Properties`-> `C/C++`-> `Preprocessor`->来关闭此警告`Preprocessor Definitions`，但您应该始终更喜欢这些功能的安全替代品。

此外，在`fseek`您检查您的 p_file 指针是否为`NULL`.

# asp.net - 鼠标中键不起作用

> ID：15567993
> 
> 赞同：0
> 
> 时间：2013-03-22T10:24:05.020
> 
> 标签：asp.net, visual-studio-2010, c#-4.0, mouse

我有一个 gridview，其中包含一个带有 ID 的链接按钮`LnkCourseName`

我要求单击鼠标中键时应打开一个新选项卡。

为了检查鼠标的哪个按钮被点击，我使用了一个 javascript 函数：

```
<script type="text/javascript">
    function buttonalert(event) {

                var button;
                if (event.which == null)
                    button = (event.button < 2) ? leftclickclear() :
                 ((event.button == 4) ? middleclickclear() : rightclickclear());
                else
                    button = (event.which < 2) ? leftclickclear() :
                 ((event.which == 2) ? middleclickclear() : rightclickclear());
                dont(event);

            }
            function leftclickclear() {

                $('#<%=HdUrl.ClientID %>').val("left");

            }
            function rightclickclear() {
                $('#<%=HdUrl.ClientID %>').val("right");

            }
            function middleclickclear() {

                $('#<%=HdUrl.ClientID %>').val("middle");

            }
            function dont(event) {
            if (event.preventDefault)
                event.preventDefault();
            else
                event.returnValue = false;

        }
</script> 
```

但是按下中间按钮时出现错误

> javascript:__doPostBack('dnn$ctr538$ViewTC_TakeAClass$GrdCourseDetail$ctl02$LnkCourseName','')

在新的标签网址上。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:28:01.913

这应该是任何合理浏览器的标准行为，并不是真正的 ASP.NET 或脚本问题 - 问题是您使用的是链接**按钮**，它会像按钮（即`<input type=submit>`）一样进行回发，它是不是默认**的 a**元素中的链接。

如果您的链接真的只是这样，并且不希望发回服务器以执行某些逻辑，而只是指定要链接到的 URL，那么请改用`HyperLink`控件。

# c# - 插入 TableLayoutControl 时遇到问题

> ID：15567994
> 
> 赞同：0
> 
> 时间：2013-03-22T10:24:09.160
> 
> 标签：c#, winforms, tablelayoutpanel

我需要控制提供下一个功能：

*   前 N 行包含一些信息和按钮以删除自身
*   最后一行包含添加按钮。必须在带有添加按钮的行之前插入新添加的行。

但是我对插入有一些问题。有时它会正确插入，但通常不是。

```
tableLayoutPanel1.SuspendLayout();
tableLayoutPanel1.RowCount++;
tableLayoutPanel1.RowStyles.Insert(tableLayoutPanel1.RowCount - 1, new  RowStyle(SizeType.AutoSize));
var control = CreateControl();

tableLayoutPanel1.Controls.Add(control,0,tableLayoutPanel1.RowCount - 1);
tableLayoutPanel1.ResumeLayout(); 
```

我做错了什么？

错误示例：![在此处输入图像描述](../Images/3fded551b982d23678a19ac8a3e56adf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:42:22.993

假设添加按钮对象被称为 btnAdd，我认为这应该工作 -

```
tableLayoutPanel1.SuspendLayout();

tableLayoutPanel1.RowCount++;
tableLayoutPanel1.RowStyles.Insert(tableLayoutPanel1.RowCount - 1, new RowStyle(SizeType.AutoSize));

tableLayoutPanel1.SetRow(btnAdd, tableLayoutPanel1.RowCount - 1);

var control = CreateControl();
tableLayoutPanel1.Controls.Add(control, 0, tableLayoutPanel1.RowCount - 2);
tableLayoutPanel1.ResumeLayout(); 
```