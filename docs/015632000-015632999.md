# StackOverflow 问答 15632000-15632999

# java - 未找到 MBean“jboss.web:type=Manager,path=/,host=localhost”

> ID：15632000
> 
> 赞同：0
> 
> 时间：2013-03-26T07:56:12.393
> 
> 标签：java, jboss, jmx, mbeans

我正在尝试访问注册为的**JBoss v4.2** MBean

```
jboss.web:type=Manager,path=/,host=localhost 
```

使用以下代码：

```
ObjectName name = new ObjectName("jboss.web:type=Manager,path=/,host=localhost");
ManagementFactory.getPlatformMBeanServer().getAttribute(name, "activeSessions"); 
```

但是这段代码不断抛出以下异常：

```
javax.management.InstanceNotFoundException : jboss.web:type=Manager,path=/,host=localhost is not registered. 
```

另一方面，我可以通过 ...//localhost:8080/jmx-console/ 使用 jmx-console 查看和使用此 bean - MBean 可用。

![截屏](../Images/bdd1ed93fea5f565b084da29289ec7f3.png)

***通过代码访问同一个 MBean 还需要什么？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:05:56.193

找到了...

```
ObjectName name = new ObjectName("jboss.web:type=Manager,path=/,host=localhost");
this.sessions = new Long((Integer) MBeanServerLocator.locateJBoss().getAttribute(name, "activeSessions")); 
```

我必须找到合适的 MBeanServer...`MBeanServerLocator.locateJBoss()`解决它。

# c# - Web 用户控件 提交后隐藏元素

> ID：15632001
> 
> 赞同：1
> 
> 时间：2013-03-26T07:56:12.827
> 
> 标签：c#, asp.net, ascx, webusercontrol, mojoportal

我有一个通过 mojoportal 显示的 Web 用户控件。我有一个 if 条件来检查 IsPostback 并相应地隐藏元素。我还有一个更新面板，它根据 RadiobuttonList 的选定值显示或隐藏一个复选框

现在的问题是当我使用更新面板时，我必须禁用 IsPostback 否则我会遇到异常

> 无效的回发或回调参数。使用配置或页面中的 <%@ Page EnableEventValidation="true" %> 启用事件验证。出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。

我怎样才能做到这一点？第一次提交或加载表单后，我需要隐藏元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:07:31.100

当您的控件中的值在其原始状态和回发之间存在差异时，就会发生这种情况。解决此问题的快速简便的方法是将其添加到您的页眉中：

```
 EnableEventValidation = "False" 
```

IE：

```
<%@ Page Language="VB" AutoEventWireup="false" Inherits="myPage" Codebehind="MyPage.aspx.vb" EnableEventValidation="false"  MasterPageFile="~/Site.Master" %> 
```

但这为了简单而牺牲了安全性。如果安全不是问题，这将起作用。否则，您需要找出导致此问题的控件，并将其注册以进行回发，如下所示：

```
 ScriptManager.GetCurrent(Page).RegisterAsyncPostBackControl(Me.myControl) 
```

# matlab - 为什么 eigs('lm') 比 eigs('sm') 快得多

> ID：15632002
> 
> 赞同：5
> 
> 时间：2013-03-26T07:56:16.737
> 
> 标签：matlab, matrix

我使用 eigs 来计算大（数万）的稀疏方阵的特征向量。我想要的是最小的特征向量集。但

```
eigs(A, 10, 'sm')      % Note: A is the matrix 
```

运行很慢。

但是，使用 eigs(A, 10, 'lm') 可以相对更快地给出答案。正如我尝试的那样，将 10 替换为 eigs(A, 10, 'lm') 中的 A_width 以便这包括所有特征向量，并不能解决这个问题，因为这使它与使用 'sm' 一样慢。

所以，我想知道为什么计算最小向量（使用'sm'）比计算最大向量慢得多？

顺便说一句，如果您对如何使用 'sm' 和使用 'lm' 一样快地使用 eigs 有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-21T09:02:02.217

几乎所有标准函数中使用的算法都是[Lanczos 算法](http://en.wikipedia.org/wiki/Lanczos_algorithm)`eigs`（的一些变体）。它是迭代的，第一次迭代给你最大的特征值。这几乎解释了你所做的每一个观察：

1.  最大的特征值需要最少的迭代次数，
2.  最小的特征值采用最大的迭代次数，
3.  所有特征值也采用最大迭代次数。

有一些技巧可以通过实际使它们成为另一个问题的最大特征值来“欺骗” eigs 来计算最小的特征值。这通常通过移位参数来完成。浏览eigs[的 Matlab 文档](http://www.mathworks.nl/help/matlab/ref/eigs.html)，我发现它们有一个`sigma`参数，这可能会对您有所帮助。`eig`请注意，如果矩阵适合内存，则相同的文档建议正确，因为`eigs`它的数字怪癖也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:49:41.493

由于`eigs`实际上是一个 m-file 函数，我们可以对其进行剖析。我已经运行了几个基本测试，这在很大程度上取决于矩阵中数据的性质。如果我们分别在以下两行代码上运行分析器：

```
eigs(eye(1000), 10, 'lm'), and
eigs(eye(1000), 10, 'sm'), 
```

然后在第一个实例中，它总共调用了 22 次`arpackc`（完成工作的主要函数 - 根据其中的评论`eigs`可能来自[这里）。](http://www.caam.rice.edu/software/ARPACK/)在第二种情况下，它被调用了 103 次。

另一方面，尝试使用

```
eigs(rand(1000), 10, 'lm'), and
eigs(rand(1000), 10, 'sm'), 
```

我得到的结果是该`'lm'`选项持续调用`arpackc`的次数比该`sm`选项多很多。

恐怕我不知道算法的细节，因此无法从更深层次的数学意义上解释它，但我链接的页面表明 ARPACK 最适合具有某种结构的矩阵。由于由 生成的矩阵`rand`几乎没有结构，因此可以安全地假设我描述的后一种行为不是您在正常操作条件下所期望的。

简而言之：当您向算法询问结构化矩阵的最小特征值时，它只需进行更多次迭代即可收敛。这是一个迭代过程，但是，它在很大程度上取决于您提供的实际数据。

[编辑：这里](http://www.caam.rice.edu/software/ARPACK/UG/ug.html)有大量关于此方法的信息和参考资料，确切了解为什么会发生这种情况的关键肯定包含在其中的某个地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-10T06:48:39.940

原因实际上要简单得多，并且由于解决大型稀疏特征值问题的基础。这些都是基于解决：

```
(1) A x = lam x 
```

大多数求解方法使用一些幂律（例如，Lanczos 和 Arnoldi 方法中跨越的 Krylov 子空间）

问题是 a 幂级数收敛到 (1) 的最大特征值。因此，我们有最大的特征值是由跨越的子空间找到的：`K^k = {A*r0,....,A^k*r0}`，它只需要矩阵向量乘法（**便宜**）。

为了找到最小的，我们必须重新制定（1）如下：

```
(2) 1/lam x = A^(-1) x or A^(-1) x = invlam x 
```

现在求解（2）的最大特征值等价于找到（1）的最小特征值。在这种情况下，子空间由 跨越`K^k = {A^(-1)*r0,....,A^(-k)*r0}`，这需要求解多个线性系统（**昂贵**！）。

# c - libcurl 即时压缩下载的数据

> ID：15632005
> 
> 赞同：1
> 
> 时间：2013-03-26T07:56:27.893
> 
> 标签：c, linux, libcurl

Linux。我正在通过 libcurl 下载大量数据。一个数据具有低熵但巨大的大小（数十 Gb）。目前我首先下载文件，然后用 zlib 压缩它。
但这需要更多时间和更多空间。所以我试图在 libcurl 写回调中实现压缩。
主要问题是要下载的数据的确切大小是未知的。代码很脏，但它只是一个测试。看来这不是一条可行的路。也许其他方式更合适？

```
unsigned char *outZ=malloc(1500);//Maximum write chunk is 1448
...
size_t
curl_write_func(void *ptr, size_t size, size_t nmemb, void *stream)
{   
    size_t data=zip(ptr,size*nmemb,outZ,1500,Z_FINISH);    
    fwrite(outZ, 1, data, (FILE *) stream); 
    return (size*nmemb);
}

size_t
zip(void *source, size_t src_size, void *target,size_t tgt_size, int mode)
{   
    z_stream strm;          
    strm.zalloc = Z_NULL;
    strm.zfree = Z_NULL;
    strm.opaque = Z_NULL;
    deflateInit(&strm, Z_BEST_COMPRESSION);
    strm.next_in = source;
    strm.avail_in = src_size;
    strm.next_out=target;
    strm.avail_out=tgt_size;
    deflate(&strm, mode);
    deflateEnd(&strm);
    return (tgt_size - strm.avail_out);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:38:58.360

At last I made it work with native zlib library
It may be not elegant enough, but my C skills are poor at the moment
Some variables are have to be global as zlib stream should be uninterrupted.
I compress the previous block as the last one should be flushed and I didn't find a way to determinate it via libcurl calls.
So if we out of easy_perform the previous ine was the last :)
All error checking are omitted for clarity
SHA1 checksum of *original* stream is calculated also

```
#define CHUNK 16384
SHA_CTX ctx;
z_stream strm;
unsigned char old_block[CHUNK];
unsigned char out[CHUNK];
unsigned have;
size_t prevBlkSize;
char firstIter;

size_t
curl_write_func(void *ptr, size_t size, size_t nmemb, void *stream)
{
    //Stores the size of original data to write
    size_t orig_size=size*nmemb;
    if(firstIter)
    {
        memcpy(old_block,ptr,orig_size);
        prevBlkSize=orig_size;
        firstIter=0;
        SHA1_Update(&ctx, ptr, orig_size);
        return(orig_size);
    }
    //Compress old block with Z_NO_FLUSH

    strm.avail_in=prevBlkSize;
    strm.next_in = old_block;
    do
    {
        strm.avail_out = CHUNK;
        strm.next_out = out;
        deflate(&strm, Z_NO_FLUSH);
        have = CHUNK - strm.avail_out;
        fwrite(out, 1, have, (FILE *) stream);
    }
    while (strm.avail_out == 0);
    //

    memcpy(old_block,ptr,orig_size);
    prevBlkSize=orig_size;
    SHA1_Update(&ctx, ptr, orig_size);
    return (orig_size);
}
...
FILE *xva_export = fopen(xva_name, "wb");
//Prepare SHA1 and zlib
strm.zalloc = Z_NULL;
strm.zfree = Z_NULL;
strm.opaque = Z_NULL;
deflateInit(&strm, 9);
SHA1_Init(&ctx);
...
curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, curl_write_func);
curl_easy_setopt(curl, CURLOPT_WRITEDATA, xva_export);
curl_easy_perform(curl);
curl_easy_cleanup(curl);
//Finish zlib
strm.avail_in=prevBlkSize;
strm.next_in = old_block;
do
{
    strm.avail_out = CHUNK;
    strm.next_out = out;
    deflate(&strm, Z_FINISH);
    have = CHUNK - strm.avail_out;
    fwrite(out, 1, have, xva_export);
}
while (strm.avail_out == 0);
deflateEnd(&strm);
//SHA1 finish
SHA1_Final(hash, &ctx);
snprintf(sha1_name,sizeof(sha1_name),"%s.Z.sha1",xva_name);
FILE *sha1sum=fopen(sha1_name,"w");
for(int i=0; i<SHA_DIGEST_LENGTH; i++)
{
    fprintf(sha1sum,"%x",hash[i]);
}
fclose(sha1sum);
fclose(xva_export); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:55:14.397

你控制服务器端发生的事情吗？

如果是，那么在关闭 libcurl 端的内容解码的同时询问已经 GZIP 编辑的内容怎么样？以下是如何进行（来自最近关于邮件列表的讨论）：[请求编码而不解码](http://curl.haxx.se/mail/lib-2013-02/0241.html)。

否则，像[libarchive](http://www.libarchive.org/)这样的库- 提供流式传输功能，以流式方式馈送（例如[带有 libcurl 的 la HTML 流式解析器](http://curl.haxx.se/libcurl/c/href_extractor.html)）应该可以解决问题。

--

**更新**：这是一个使用[zlib 动态](http://www.zlib.net/)压缩的示例代码：[https](https://github.com/deltheil/zurl) ://github.com/deltheil/zurl 。

# ajax - 如何使ajax调用异步？

> ID：15632009
> 
> 赞同：1
> 
> 时间：2013-03-26T07:56:48.770
> 
> 标签：ajax, dynamics-crm-2011, dynamics-crm, dynamics-crm-online

我试图使用 Ajax 调用检索 CRM 记录。

```
function RetrieveCrmRecords(entName, fields, filter, callback, orderby, errcallback) {
    ///<summary>
    /// function to Retrieve Multiple CRM records.
    ///</summary>
    //debugger;
    var async = !!callback;

    var setEntityName = entName + 'Set';
    var _callback = callback;

    filter = (filter) ? "&$filter=" + filter : '';

    var query1 = CrmServerUrl + ODATA + "/";
    var query2 = setEntityName + "()" + "?";
    var queryUrl = query1 + query2;

    if (fields != null) queryUrl += "$select=" + fields.join(',');
    if (orderby != null) {
        if (fields != null) {
            queryUrl += '&';
        }
        queryUrl += "$orderby=" + orderby;
    }
    queryUrl += filter;

    var performRequest = function (queryUrl, fnCallback) {
        var async = !!fnCallback;
        var opts = { url: queryUrl }

        return _makeRequest(opts, async, function (data) {
            var nextData = data.__next || null;
            var resultsData = data.results || data;
            var responseData = { 'results': resultsData, 'next': nextData }

            if (nextData) {
                responseData.LoadNext = function (callback) {
                    return performRequest(nextData, callback);
                };
            }

            if (async) {
                fnCallback(responseData);
            }
            else {
                return responseData;
            }
        }, errcallback);
    };

    return performRequest(queryUrl, callback);
} 
```

由于我对 ajax 调用没有太多了解，因此很难让这个函数对我来说是异步的。

请高手帮我理解一下，这个功能是同步的，是因为 `var async = !!callback;`这个吗？

如果代替这一行我写`var async=true;`它可以使这个函数异步吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T07:30:59.537

我想我得到了你所要求的。

请不要从您复制和粘贴此功能的位置查看此文件。如果您是新手，这会让您感到困惑。

只需像这样从您的 .js 文件中调用该函数。

```
function RetrieveCrmRecords(entName, fields, filter, calledForAsync, orderby, errcallback) {
//Your Code
}

function calledForAsync()
{
//Your Code
} 
```

当 RetrieveCrmRecords() 中的操作完成时，其余代码将正常执行，然后进入调用的 ForAsync()。

这称为异步调用。我希望你问这个。

谢谢，

阿尼什。

# php - htaccess 需要帮助重写 url

> ID：15632017
> 
> 赞同：0
> 
> 时间：2013-03-26T07:57:25.650
> 
> 标签：php, .htaccess, url, url-rewriting

我一直在尝试用 htaccess 文件重写我的 URL。我的项目使用我的 index.php 作为它的基本控制器。我使用获取值“naam”从数据库中获取页面。

示例：localhost/YourDesigns/YDCMS/index.php?naam=home（显示主页） localhost/YourDesigns/YDCMS/index.php?naam=about（显示关于页面）

现在我想重写要显示的 URL： localhost/YourDesigns/YDCMS/home （这显示主页） localhost/YourDesigns/YDCMS/about （这显示关于页面）

我自己做了一些 htaccess 的东西，我已经成功地从 url 中删除了“index.php”，但“naam”仍然存在。

我该如何删除这个？这是我当前的 htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /YourDesigns/YDCMS/index.php?naam=/$1 [L] 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:13:29.233

我认为您查看该过程的方式并不完全正确，如果您想显示 url，就像您说的那样，`localhost/YourDesigns/YDCMS/home`您必须首先将 html 内容中的 url 替换为该格式，然后使用 RewriteRule 在内部调用正确的路径：

```
RewriteRule ^desired_url_path/([a-z0-9\-]+)$ /base_url_path/index.php?naam=$1 [L] 
```

这样，当用户单击链接时，Apache 服务器将使用上面的正则表达式通过基本上说的规则转换 url：基本 url 之后的所有内容都是要在 index.php 上传递的参数值。自然地，可以修改正则表达式以满足您的需要，我在上面写的那个是基本的字符串模式。

# r - 在矩阵与矩阵上应用 lm 或 lsfit

> ID：15632018
> 
> 赞同：0
> 
> 时间：2013-03-26T07:57:29.453
> 
> 标签：r

如何使用 lm（或 lsfit）将矩阵 A 的第 1 列与矩阵 B 的第 1 列相匹配。然后将矩阵 A 的第 2 列与矩阵 B 的第 2 列相匹配，依此类推。矩阵可能有 NA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:29:35.433

如果您强制使用 data.frame，则可以使用 mapply 将它们作为一系列列表处理：

```
> mapply(function(x,y) lm(y~x), as.data.frame(m1) , as.data.frame(m2) )
              V1         V2         V3        
coefficients  Numeric,2  Numeric,2  Numeric,2 
residuals     Numeric,4  Numeric,4  Numeric,4 
effects       Numeric,4  Numeric,4  Numeric,4 
rank          2          2          2         
fitted.values Numeric,4  Numeric,4  Numeric,4 
assign        Integer,2  Integer,2  Integer,2 
qr            List,5     List,5     List,5    
df.residual   2          2          2         
xlevels       List,0     List,0     List,0    
call          Expression Expression Expression
terms         Expression Expression Expression
model         List,2     List,2     List,2    

> ?lsfit
> mapply(function(x,y) lsfit(y,x), as.data.frame(m1) , as.data.frame(m2) )
             V1        V2        V3       
coefficients Numeric,2 Numeric,2 Numeric,2
residuals    Numeric,4 Numeric,4 Numeric,4
intercept    TRUE      TRUE      TRUE     
qr           List,6    List,6    List,6 
```

# ajax - JSON Stringify 空字符串

> ID：15632022
> 
> 赞同：1
> 
> 时间：2013-03-26T07:57:49.770
> 
> 标签：ajax, json, stringify

我最近遇到了 JSON.stringify 不接受空字符串的问题。

我用一个小修复解决了它，但我仍然很困扰为什么它不适用于空字符串

这是我的代码。

```
$(function () {
    $('#searchButton').click(function () {
        var test = $("#DownloadsSearch").val();
        alert(test);
        if (test === "") test = "1";

        displayAjaxLoading(true);
        $.ajax({
            url: '@(Url.RouteUrl("DownloadSearch"))',
            contentType: 'application/json',
            dataType: 'json',
            data: JSON.stringify({
                searchText: test,
                type: '@Model.Type'
            }),
            type: 'POST',
            success: function (data) {
                if (data.length > 0) {
                    $("#Review").empty();

                    $.each(data, function (id, options) {
                        $("<p/>").appendTo("#Review").append($('<a>').attr('href', 'http://www.pvs4you.com/' + options.URL).text(options.ProductID));

                        // $('<a>').attr('href', options.URL).text(options.ProductID).appendTo("#Review");
                    });
                } else {
                    $("#Review").empty();
                    $("<p/>").html("<b>@Model.Title wasn't found.</b>").appendTo($("#Review"));
                }

                $('#small-searchterms').autocomplete({
                    disabled: false
                });
                displayAjaxLoading(false);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                $("#Review").empty();
                $("<p/>").html("<b>@Model.Title wasn't found.</b>").appendTo($("#Review"));
            }
        });

    });
}); 
```

# python - 主机和虚拟机之间的用户交互

> ID：15632026
> 
> 赞同：0
> 
> 时间：2013-03-26T07:57:55.823
> 
> 标签：python, subprocess, vmware, virtual-machine, vmware-workstation

我的主机上有一个 python 脚本，它试图在来宾机器上运行另一个脚本。我还希望主机上的脚本为来宾上的脚本提供一个数字。

在主机上：

```
args = shlex.split("vmrun -gu root -gp mohsen77 runProgramInGuest F:/Attacker/Ubuntu1110.vmx /usr/bin/python /home/srastega/Attacker")
Attacker = subprocess.Popen(args, stdin=PIPE, stderr=STDOUT, stdout=PIPE)
out, err = Attacker.communicate("1\n")
exitcode = Attacker.returncode 
```

在访客机器上：

```
n= int(raw_input("Value for n:"))
t = open('/home/srastega/test', 'a')
t.write("%s"%str(n)) 
```

不幸的是，Guest 程序以非零退出代码退出：1（在主机上看到的错误）。但是，如果我在一台机器上尝试这两个脚本，则通信工作正常，第一个脚本将数字“1”传递给第二个脚本，第二个脚本将该数字写入文件。

知道如何在主机和来宾机器之间进行交互吗？谢谢，萨马内

# c++ - VS2010 MSBuild 目标仅在重建时运行

> ID：15632028
> 
> 赞同：1
> 
> 时间：2013-03-26T07:58:02.993
> 
> 标签：c++, visual-studio-2010, msbuild

我目前正在尝试构建一个 C++ 库，我想要的是每次按下构建按钮时，我都会将所有包含文件移动到某个目录。

我目前拥有的是这个

```
<Target Name="CopyToIncludeFiles">
  <Message Text="Copying All '*.h' and '*.hpp' to the include directory" Importance="high">
  </Message>
  <Copy SourceFiles="@(ClInclude)" DestinationFolder="..\HelperLib\x86\include\">
  </Copy>
</Target> 
```

我将目标包含在 DefaultTargets 喜欢这样

```
<Project ToolsVersion="4.0" DefaultTargets="Build;CopyToIncludeFiles;" xmlns="http://schemas.microsoft.com/developer/msbuild/2003"> 
```

只要我使用重建，这一切都可以正常工作，但是当我刚刚点击构建时它永远不会运行。

无论我点击构建还是重建，我都需要做什么才能运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:10:28.933

我认为您在项目属性中更容易解决的任务`PreBuild Event`，因为它只是简单的命令行命令。

如果你仍然想要 msbuild - 你可以`BeforeTargets`这样使用：

```
<Target Name="CopyToIncludeFiles" BeforeTargets="Rebuild;Build">
  <Message Text="Copying All '*.h' and '*.hpp' to the include directory" Importance="high" />
  <Copy SourceFiles="@(ClInclude)" DestinationFolder="..\HelperLib\x86\include\"  />
</Target> 
```

您不应更改项目`DefaultTargets`属性以包含您的任务。

另请注意，如果您的项目代码不需要重新编译（即没有更改 cpp / h 文件） ，则 PreBuild 事件和此 msbuild 任务**都不会运行。**

# git - “找不到当前打开的存储库的任何相关存储库主机”

> ID：15632029
> 
> 赞同：3
> 
> 时间：2013-03-26T07:58:03.560
> 
> 标签：git, git-extensions, pull-request

我正在尝试为 nuget git 存储库创建一个拉取请求（我只是从中进行了克隆）。我做了一个本地提交。

但是当我尝试创建拉取请求时，我收到以下错误：

> 找不到当前打开的存储库的任何相关存储库主机

这是什么意思，我该如何解决？我必须分叉而不是克隆吗？如果是这样，既然我已经对克隆进行了更改，我应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:11:04.830

一个拉取请求，尤其是在 GitHub 上，假设您**[首先分叉了一个 GitHub 存储库](https://help.github.com/articles/fork-a-repo)**，然后克隆该分叉。

当然，这意味着您不能直接推回您最初克隆的存储库，因为您*不是*该存储库的**[合作者](https://help.github.com/articles/how-do-i-add-a-collaborator)**（或者您不拥有该存储库）。
但是如果你想做一个拉取请求，假设你不能直接对上游仓库做出贡献。如果可以，则不需要拉取请求。

事实[证明](https://stackoverflow.com/questions/15632029/could-not-find-any-relevant-repository-hosts-for-the-currently-open-repository/15632224?noredirect=1#comment22177645_15632224)[OP jgauffin](https://stackoverflow.com/users/70386/jgauffin)正在使用[CodePlex ，但](http://codeplex.codeplex.com/)[CodePlex 分叉](http://codeplex.codeplex.com/wikipage?title=Forks)的机制是相同的。

如果您有一个克隆，您可以通过以下方式使其引用分支：

*   [将原点重命名为上游](https://help.github.com/articles/renaming-a-remote)：`git remote rename origin upstream`
*   添加原点`git remote add origin url/to/your/fork`

请参阅“[和](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)[在 github](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)[之间有什么区别`origin``upstream`](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)”

![在 GitHub 上分叉](../Images/aa06aeae5ef5c72a73140ef86d41399e.png)

# asp.net - 当按下 Asp.net 表单上的任何按钮时，默认按钮也被按下

> ID：15632032
> 
> 赞同：1
> 
> 时间：2013-03-26T07:58:17.817
> 
> 标签：asp.net, visual-studio

我有一个带有按钮的 ASP.net 表单。

当我尝试按下任何按钮时，也会按下设置为默认值的按钮。

这只发生在我使用 Firefox 浏览器时。在 Internet Explorer 上不会发生。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:33:49.467

好的，这个问题可以通过从按钮上方和下方移除标签标签来解决。

感谢大家贡献我的答案。

如果你大胆，世界就是黄金。

# javascript - 使用 D3 访问元素

> ID：15632033
> 
> 赞同：1
> 
> 时间：2013-03-26T07:58:20.453
> 
> 标签：javascript, d3.js

我在页面上有以下元素：

```
<div id="chart_title">
</div> 
```

如果我想使用 D3 更改文本，我知道我可以使用： d3.select("#chart_title").html("title");

有没有办法我可以使用 D3 选择器，然后只访问 div 本身？我试过了：

```
d3.select("#chart_title")[0] 
```

但我最终只是在控制台中看到 div 没有任何我想查看的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:34:59.440

您可以像访问任何其他元素一样访问元素的属性，例如

```
d3.select("#chart_title").attr("id", "new_name"); 
```

您也可以通过这种方式设置样式属性等。

# c# - 如何在 c# 中将 DataRow 转换为 DataRowView

> ID：15632036
> 
> 赞同：13
> 
> 时间：2013-03-26T07:58:30.503
> 
> 标签：c#, winforms, dataview, datarowview

可以或如何将 DataRow 转换为 DataRowView？

例如：

```
 DataTable dt=ds.Tables[0];
   DataRow dr= dt.NewRow();           
   DataRowView drv = ???? 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-26T08:02:53.043

利用

```
DataTable dt=ds.Tables[0];
DataRow dr= dt.NewRow();         
DataRowView drv= dt.DefaultView[dt.Rows.IndexOf(dr)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-05T16:36:30.073

如果 DataRow 状态为 Detached，则上述方法不起作用。在这种情况下可以使用此代码段：

```
 DataRow dRow = dataTable.NewRow();
        //...
        DataRowView dRowView = dRow.Table.DefaultView.AddNew();

        for (int i = 0; i < dRow.ItemArray.Length; i++)
        {
            dRowView.Row[i] = dRow[i];
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-11T16:10:03.043

```
DataRowView selecRow = dataTable.DefaultView.Cast<DataRowView>().FirstOrDefault(a => a.Row == desRow); 
```

工作，这是一个小短没有“哪里”;-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-06T10:32:39.460

利用。如果订购了 DataGrid，它也可以工作。

```
DataRowView selecRow = dataTable.DefaultView.Cast<DataRowView>().Where(a => a.Row == desRow).FirstOrDefault(); 
```

# iphone - 如何在表格视图的第一部分中显示我的数组的第一项和下一部分中的剩余项？

> ID：15632039
> 
> 赞同：0
> 
> 时间：2013-03-26T07:58:49.463
> 
> 标签：iphone, ios, ipad

我有一个 Iphone 应用程序，我在其中显示来自 . 的表格视图`NSMutableArray`。一切正常。现在我需要将它显示在分组表格视图的两个部分中。所以我的数组的第一个元素在第一部分总是和第二部分中的 reming 元素。当我在我的 cellforrowatindexpath 中这样做时，我的第一个单元格在第二部分中变得空了。

```
NSMutableDictionary *dicttable=[self.array objectAtIndex:indexPath.row];
   NSString *head=[[dicttable objectForKey:@"message"] description];

 if(indexPath.section==0)
 {
    if([head isEqualToString:@"ddd"])
    {
        label.textAlignment = UITextAlignmentLeft;
        label.textColor =[UIColor darkGrayColor];
        label.font = [UIFont fontWithName:@"Helvetica" size:16];

        label.text = head;
        label.tag=100;
        [cell.contentView addSubview:label];
     }
  }
  else
  {
     if(![head isEqualToString:@"ddd"])
     {
        label.textAlignment = UITextAlignmentLeft;
        label.textColor =[UIColor darkGrayColor];
        label.font = [UIFont fontWithName:@"Helvetica" size:16];

        label.text = head;
        label.tag=100;
        [cell.contentView addSubview:label];

     }      

 } 
```

我在第一部分需要这个 ddd，在下一部分需要剩下的元素。我想继续使用单数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:25:46.443

尝试这个

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

       NSInteger row = indexPath.section!=0?indexPath.row+1:indexPath.row;
       NSMutableDictionary *dicttable=[self.array objectAtIndex:row];
       NSString *head=[[dicttable objectForKey:@"message"] description];
        if(indexPath.section==0)
     {
        if([head isEqualToString:@"ddd"])
        {
            label.textAlignment = UITextAlignmentLeft;
            label.textColor =[UIColor darkGrayColor];
            label.font = [UIFont fontWithName:@"Helvetica" size:16];

            label.text = head;
            label.tag=100;
            [cell.contentView addSubview:label];
         }
      }
      else
      {
         if(![head isEqualToString:@"ddd"])
         {
            label.textAlignment = UITextAlignmentLeft;
            label.textColor =[UIColor darkGrayColor];
            label.font = [UIFont fontWithName:@"Helvetica" size:16];

            label.text = head;
            label.tag=100;
            [cell.contentView addSubview:label];

         }      

     }

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:09:12.413

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (section == 0)
              return 1;
    return [yourArray count] - 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (section == 0) {
              // Your first section

        }
    else {
           // Your second section
        }

} 
```

# xpages - Xpages 日期时间选择器字段默认为今天的日期

> ID：15632042
> 
> 赞同：2
> 
> 时间：2013-03-26T07:58:52.780
> 
> 标签：xpages, lotus-domino

运行 ND9 服务器并在浏览带有日期字段的 Xpage 时，此字段的默认值始终是今天的日期。

在 8.5.3 服务器上，控件呈现如下：

```
<input class="dijitReset dijitInputInner" dojoattachpoint="textbox,focusNode" autocomplete="off" type="text" aria-valuenow="undefined" aria-invalid="false" id="view:_id1:_id2:main:fromTDate" tabindex="0" value="">
<input style="display: none;" type="text" name="view:_id1:_id2:main:fromTDate"> 
```

在 ND9 服务器上，相同的控件呈现如下：

```
<input class="dijitReset dijitInputInner" type="text" autocomplete="off" data-dojo-attach-point="textbox,focusNode" role="textbox" aria-haspopup="true" aria-invalid="false" tabindex="0" id="view:_id1:_id2:main:fromTDate" maxlength="10" size="10" value="">
<input type="hidden" name="view:_id1:_id2:main:fromTDate" value="2013-03-26"> 
```

我已经能够通过添加一个 Dojo 日期文本框来绕过它，但是这个功能一定是错误的，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T17:33:11.477

这实际上是 v9.0 中的一个修复程序。今天默认出现的日期现在是预期的行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T07:37:12.647

将此添加到您的 XPage 中，其行为类似于 8.5.3

```
<xp:this.resources>
<xp:script clientSide="true">
<xp:this.contents><![CDATA[
require([
"dojo/_base/lang",
"ibm/xsp/widget/layout/DateTextBox",
"ibm/xsp/widget/layout/TimeTextBox",
"ibm/xsp/widget/layout/DateTimeTextBox"
], function(lang, DateTextBox, TimeTextBox, DateTimeTextBox){
var a = {};
lang.mixin(a, {
postCreate: function(){
this.inherited(arguments);
}
});
DateTextBox.extend(a);
TimeTextBox.extend(a);
DateTimeTextBox.extend(a);
});
]]></xp:this.contents>
</xp:script>
</xp:this.resources> 
```

感谢 IBM 的快速响应。

# mysql - 如何在 ruby on rails 的下拉列表中选择特定值时重定向到其他页面？

> ID：15632044
> 
> 赞同：0
> 
> 时间：2013-03-26T07:59:05.763
> 
> 标签：mysql, ruby-on-rails

我想对我的书籍进行分类并创建一个下拉列表，然后我只想显示所选类别的书籍。

我使用以下代码创建了一个下拉列表：

```
<% form_for :category, :url => { :action => :cat_disp } do |f| %>
<%= f.select(:category, Categories.all.map {|p| [p.name,p.id]}, :prompt => "Select a category") %>
<%end%> 
```

如何仅显示从下拉列表中选择的类别的书籍？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:12:19.163

我不确定我真的明白你想要什么。`change()`使用 jQuery 的方法将表单提交到只显示一个类别的书籍的页面可能是最简单的。

```
$(function(){
 $(dropdown_id).change(function(){
  $(this).parent('form').get(0).submit();
 });
}); 
```

# ruby-on-rails-3 - gem ''factory_girl_rails" 错误未初始化常量 FactoryGirl (NameError)

> ID：15632052
> 
> 赞同：0
> 
> 时间：2013-03-26T07:59:24.050
> 
> 标签：ruby-on-rails-3, factory-bot

这是我的工厂/admin_user.rb 代码

```
FactoryGirl.define do
  factory :admin_user do |admin|
    admin.sequence(:email) { |n| "admin#{n}@example.com" }
    admin.password "123456789"
    admin.password_confirmation { |u| u.password }
  end
end 
```

当我运行此代码时，出现此错误

> 未初始化的常量 FactoryGirl (NameError)

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:33:06.033

问题应该是未加载gem。您可以检查是否在 Gemfile 中正确定义了 FactoryGirl。并且还要检查 ENV 是否正确，因为 FactoryGirl 应该在 Test env 下运行。

**添加** 可能测试生成器设置不正确？可以检查是否放入了以下内容`config/application.rb`

```
config.generators do |g|
  g.test_framework :rspec,
  fixtures: true,
  view_specs: false,
  helper_specs: false,
  routing_specs: false,
  controller_specs: true,
  request_specs: true
  g.fixture_replacement :factory_girl, dir: "spec/factories"
end 
```

关于夹具的最后一行对您的情况应该很重要。然后，您可以尝试删除您的 hack 设置。

# php - 编辑配置文件：使用 ajax 和 javascript 查看数据得到错误 404 Not Found

> ID：15632053
> 
> 赞同：0
> 
> 时间：2013-03-26T07:59:25.203
> 
> 标签：php, javascript, jquery, get

级别：初学者

我试图在 javascript 文件中使用 ajax 查看我的用户配置文件数据从数据库到 html 页面。但我总是收到 404 错误。***我想以 html 表单查看我的用户配置文件，以便用户可以更新它。***

我不知道它有什么问题。你可以帮帮我吗？这是我的代码。

**谢谢你。**

我在服务器端的 php 代码： **newpass.php 作为控制器**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class newpass extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $this->load->model('newpass_model','npmod');
    }

    //to get the user profile
    public function read() {
        $iduser = $this->session->userdata('id');
        if(isset($iduser))
        echo json_encode($this->npmod->getByIdUser($iduser));
    }

    //to edit the user profile
    public function update() {
    $iduser = $this->session->userdata('id');
    $data = array(
        $nm = $this->input->post('nama'),
        $tmp = $this->input->post('tempat'),
        $tgl = $this->input->post('tanggal'),
        $jk = $this->input->post('jeniskelamin'),
        $tb = $this->input->post('tinggi'),
        $bb = $this->input->post('berat'),
        $gol = $this->input->post('golongan'),
        $kt = $this->input->post('kontak'),
        $nokt = $this->input->post('kontak_kel'),
        $emkt = $this->input->post('kontak_em')
    );
        if($$nm=='' || $tgl=='' || $jk=='' || $tb=='' || $bb=='' || $gol=='' || $kt=='' || $nokt=='' || $emkt=='')
        {
            echo "0";
        }
        else
        {
            $this->npmod->update($iduser,$data);
            echo "1";
        }
    }
}
?> 
```

我在服务器端的 php 代码： **newpass_model.php 作为模型**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class newpass_model extends CI_Model {      

    //to get the user profile
    function getByIdUser($iduser) {
        $iduser = intval( $iduser );

        $query = $this->db->where('iduser',$iduser)->limit( 1 )->get('pasien');

        if( $query->num_rows() > 0 ) {
            return $query->row();
        } else {
            return array();
        }
    }   

    //to edit the user profile
    public function update($iduser,$data) { 
        $this->db->where('iduser',$iduser);
        $this->db->update('pasien',$data);
   }
}
?> 
```

我在客户端的javascript代码： **newpass.js**

```
/*Don't forget to add set_ip.js and jquery before you use this script in HTML page to make it work*/
var urlini = seturl();
var part= 'newpass/';

var readUrl   = urlini+part+'read',
    updateUrl = urlini+part+'update';

$( function() {  
    readUsers();
}); //end document ready

//to update profile
function update_profile() {

    name = /^([-a-z0-9_-]{5,50})+$/i.test($("#nama").val());
    bb = /^([-0-9_-])+$/i.test($("#berat").val());

    var form_reg =  $("input").val();
    if(form_reg == "")
    {
        alert("Semua data harus diisi.");
    }
    else if(!name || !bb)
    {
        alert("Terdapat kesalahan atau data kosong pada pengisian data.\nPastikan password Anda sesuai.");
    }
    else
    {
        $.post(urlini+part+'update',
        $('#edit_profile').serialize(),function(msg){
        if(msg == '0')
        {
            alert("Masih ada data yang kosong.");
        }
        else if(msg == '1')
        {
            alert("Data berhasil disimpan!");
            window.location="home.html";
        }
    });
    }
}

function readUsers() {
$.ajax({
        url: readUrl,
        dataType: 'json',
        success: function( response ) {

                $( '#nama' ).val( response.nama);
                $( '#tempat' ).val( response.tempat);
                $( '#tanggal' ).val( response.tanggal);
                $( '#jeniskelamin' ).val( response.jeniskelamin);
                $( '#tinggi' ).val( response.tinggi);
                $( '#berat' ).val( response.berat);
                $( '#golongan' ).val( response.golongan);
                $( '#kontak' ).val( response.kontak);
                $( '#kontak_kel' ).val( response.kontak_kel);
                $( '#kontak_em' ).val( response.kontak_em);
                //--- assign id to hidden field ---
                $( '#userId' ).val( response.id );
            }
    });
} // end readUsers 
```

我在客户端的javascript代码： **set_ip.js**

```
//where the set the domain name
var ip = 'localhost';
var urlnya = 'http://'+ip+'/diabet_console/';
function seturl()
{    
    return urlnya;
} 
```

我在客户端的 html 代码： **settings.html**

```
<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<link rel="stylesheet" type="text/css" href="css/style1.css" />

 <link href="date/kendo.common.min.css" rel="stylesheet">
    <link href="date/kendo.default.min.css" rel="stylesheet">

    <script src="date/js/jquery.min.js"></script>
    <script src="date/js/kendo.web.min.js"></script>
    <script src="date/js/console.js"></script>
    <script src="jq/proses/set_ip.js"></script>
    <script src="jq/proses/newpass/newpass.js"></script>
    <script src="jq/proses/script.js"></script>

<script>
        $(document).ready(function() {
        // create DatePicker from input HTML element
        $("#tanggal").kendoDatePicker({
        start: "date",
        depth: "year",
        format: "dd/MM/yyyy",
        });
    });
    </script>
<title>edc - e diabet consult</title>
</head>
<body>
<h1 align="center">Edit Profile</h1>
<p align="center" class="navigation">
<a href="home.html" title="Kembali ke CPanel">
<img src="ico/home.png">
</a>
<a href="pengaturan.html" title="Change Password">
<img src="ico/pass.png">
</a>
<a href="ranges.html" title="Set Target Range">
<img src="ico/setting.png">
</a>
</p>
<div id="updateDialog">
<form id="edit_profile" action="" method="post">
<p width="50%" align="center">
<strong>Nama Pasien</strong><br>
<input type="text" maxlength="350" id="nama" name="nama"><br>

<strong>Tempat Lahir</strong><br>
<input type="text" maxlength="350" id="tempat" name="tempat"><br>

<strong>Tanggal Lahir</strong><br>
<input type="text" maxlength="350" id="tanggal" name="tanggal" value="01-02-2013"><br>
<br>
<strong>Jenis Kelamin</strong><br>
<input class="float" type="radio" id="jeniskelamin" name="jeniskelamin" value="L">Laki-Laki 
<input class="float" type="radio" id="jeniskelamin" name="jeniskelamin" value="P">Perempuan<br><br>

<strong>Tinggi Badan (cm)</strong><br>
<input type="text" id="tinggi" name="tinggi"><br>

<strong>Berat Badan (kg)</strong><br>
<input type="text" id="berat" name="berat" value=''><br>

<strong>Golongan Darah</strong><br>
<input class="float" type="radio" id="golongan" name="golongan" value="A">A 
<input class="float" type="radio" id="golongan" name="golongan" value="B">B
<input class="float" type="radio" id="golongan" name="golongan" value="AB">AB
<input class="float" type="radio" id="golongan" name="golongan" value="O">O<br>
<br>

<strong>Kontak Pasien</strong><br>
<input type="text" id="kontak" name="kontak" value=''><br>

<strong>Kontak Keluarga</strong><br><br>
<strong>No.Telepon</strong><br>
<input type="text" id="kontak_kel" name="kontak_kel" value=''><br>

<strong>Email</strong><br>
<input type="text" id="kontak_em" name="kontak_em" value=''><br>

<input type="submit" value="Simpan" id="simpan" class="button" onclick="update_profile()">
<input type="reset" value="Reset" class="button">

</p>
<br><br/>
</form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:24:05.320

```
function readUsers() {
$.ajax({
        url: readUrl,
        dataType: 'json',
        type: 'POST', // is missing in your ajax call also it might type:get if form  submission is get 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:07:13.963

尝试使用提琴手检查通过 AJAX 调用或 chrome 或 IE 中的开发人员工具请求的 URL 是什么。在 IE 中，您可以使用 F12 并在开发人员工具下使用 Network 并单击 Start capture 并调用您的 ajax 函数。检查 URL 是否正确或是否符合预期。

# background-process - Jesque 如何与巨大的有效载荷一起工作？

> ID：15632056
> 
> 赞同：4
> 
> 时间：2013-03-26T07:59:30.727
> 
> 标签：background-process, resque, worker

[我在https://github.com/gresrun](https://github.com/gresrun)上读到了 Jesque，我想了解它在巨大的有效负载下是如何执行的。排队作业以创建作业类的实例然后使用线程启动工作者的唯一方法是还是有其他方法？我对使用 java.lang.Thread 对象有点怀疑，就像在此链接的示例中为数据有效负载巨大的批处理作业所做的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T10:15:54.047

实际上在没有控制的情况下生成线程从来都不是一个好主意。

我建议将您的工作人员放入 BlockingQueue 中，然后生成*非常*有限数量的线程（与您的 CPU 一样多，以减少争用）来启动这些工作人员。工作完成后，线程会选择一个新的工作人员并再次启动该过程。一旦队列中没有工人，线程就挂在队列上，等待新的工人。

你可以看看[线程池模式](http://en.wikipedia.org/wiki/Thread_pool_pattern)

# asp.net - 我如何在 asp.net 中连接 Oracle 数据库

> ID：15632057
> 
> 赞同：-1
> 
> 时间：2013-03-26T07:59:31.047
> 
> 标签：asp.net

我想连接 oracle 而不是 Microsoft access 数据库。请帮助我。这是 asp.net 的代码。它工作正常。

```
 set Con=Server.createobject("ADODB.Connection")
      set Rs=Server.createobject("ADODB.Recordset")
      Con.open "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=c:\test.mdb" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:20:23.183

您可以像使用 Sql 客户端一样使用 oracle 客户端

# php - 运行 php 变量，因为它是一个 if 语句

> ID：15632058
> 
> 赞同：2
> 
> 时间：2013-03-26T07:59:39.077
> 
> 标签：php

我有3个变量：

```
$left_side = "'Username'";
$equation = "==";
$right_side = "'Username'"; 
```

我想测试这些变量，因为它是这样的 if 语句：

```
if($left_side $equation $right_side) {
    // do something
} else {
    // do something else
} 
```

我知道这有效：

```
if(eval("return ".$left_side." ".$equation." ".$right_side.";")) {
    // do something
} else {
    // do something else
} 
```

我一直认为使用 eval 是“不好的”。特别是当您尝试运行用户输入时。

还有其他方法可以做到这一点吗？我试图用谷歌搜索它，但它不是我今天的朋友；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:06:23.613

你可以这样做：

```
function testValues($val1, $equation, $val2) {
   $res = false;
   switch($equation) {
      case "==":
          $res = $val1 == $val2;
          break;
      case ">":
          $res = $val1 > $val2;
          break;
      //....
      default:
         throw new Exception("Unknown operator");
   }
   return $res;
} 
```

而不是像这样使用它：

```
 if(testValues($left_side,$equation,$right_side)) {
     //do something
 } else {
    //do something
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:02:40.777

你可以使用[switch](http://www.php.net/manual/en/control-structures.switch.php)：

```
$left_side = "'Username'";
$equation = "doublequal";
$right_side = "'Username'";

switch($equation){
    case 'doublequal':
        if ($left_side == $right_side) {
             // code
        }
    break;
    //......
} 
```

您永远不应该`eval()`特别使用用户输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T08:02:07.487

`eval`是邪恶的。不，没有其他（简单的）解决方案，但也许这个有帮助：

```
if ($equation == "==") {
    if ($left_side == $right_side) {
        // ... your code goes here.
    } else {
        // Do some other stuff.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T17:55:18.757

eval() 是邪恶的，但 call_user_func() 也是邪恶的，每个框架都在一个地方或另一个地方使用这个函数。

工具并不邪恶。它们只是工具。邪恶是我们使用它们的方式。

正如本叔叔所说：强大的力量意味着巨大的责任:)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-26T08:12:08.500

我发现了这个技巧

[http://gonzalo123.com/2012/03/12/how-to-use-eval-without-using-eval-in-php/](http://gonzalo123.com/2012/03/12/how-to-use-eval-without-using-eval-in-php/)

这个想法是用 PHP 源代码创建一个临时文件，用标准 PHP 的包含函数包含这个文件并销毁临时文件。

# php - 致命错误：调用未定义的函数工作然后再次失败？

> ID：15632063
> 
> 赞同：2
> 
> 时间：2013-03-26T07:59:51.607
> 
> 标签：php, mysql, fatal-error

我正在使用 PHP 版本 5.4.7。

最初，我`Fatal error: Call to undefined function Connect() in C:\htdocs\mods\conn.php on line 15`在尝试访问我的自定义 php 网站的主页时遇到了一个问题，我已经有一段时间没有访问过，并且从那以后更新了我的 php 版本。

经过一番调查，我改变了以下行`conn.php`

```
include_once ("DB.php"); 
```

至

```
include_once ("mods/DB.php"); 
```

现在由于某种原因，我不知道，该页面运行良好并且显示没有错误。直到尝试使用审计跟踪模块，此时初始错误又回来了。

`Fatal error: Call to undefined function Connect() in C:\htdocs\mods\conn.php on line 15`

再次回来。

网址是：`http://project/audit/monthly.php?year=2014&month=11`

所以我认为错误在于，`monthly.php`但现在我认为它一定是参考的问题。所以我查看`monthly.php`并发现它使用了许多文件，最值得注意的是：

```
require_once 'header.php'; 
```

标头使用`conn.php`：

```
require_once ("mods/conn.php"); 
```

我不确定如何在这里继续，因为 conn.php 的拼写和大小写是正确的。它以前也有效。

**连接文件**

```
//include_once ("DB.php");
include_once ("mods/DB.php");
include_once ("date.php");
include_once ("forms.php");
include_once ("sess.php");
include_once ("utilities.php");

//--- define user types

ConnectToDB ("localhost", None, "audit", "abc", "pass");

// Zend Auto loader....
**> NOT ADDED**

$db = Zend_Db::factory("PDO_MYSQL", array
(
    "host"      => 'localhost',
    "username"  => 'abc',
    "password"  => 'pass',
    "dbname"    => 'audit'
));

?> 
```

**数据库文件**

```
<?php
function Connect ($Host, $Port, $DBName, $User, $Password) {

    **A custom connect function**

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:07:47.767

在您的情况下，我会制作一个包含 define('MOD_PATH', 'mods/'); 的文件 然后在所有出现“conn.php”的地方使用MOD_PATH，这样会更明智，因为那样你就不需要在每个文件中都放置mod，而是在一个文件中......好吧，这就是我的看法我会开始...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:54:12.743

我想到了一个使用绝对路径的解决方案，所以`conn.php`改为`include_once ("mods/DB.php");`：`include_once('C:\\htdocs\\mods\\DB.PHP');`.

[这也可能会有所帮助](https://stackoverflow.com/questions/344419/how-do-i-set-an-absolute-include-path-in-php)。

# asp.net - 读取目录 ASP.NET 文件名的效率

> ID：15632064
> 
> 赞同：0
> 
> 时间：2013-03-26T07:59:53.407
> 
> 标签：asp.net, performance, directory, webserver

在 ASP.NET 中读取目录中文件名的效率如何？

背景：我想自动更新网络服务器上的图片并提前部署它们。例如，直到 1\. April 我想选择“image1.png”。在 1\. April 'image2.png' 之后。为了实现这一点，我必须将每个图像名称映射到一个日期，该日期指示是否必须选择该图像。

为了避免在单独的文件或数据库中文件名和日期之间的映射，想法是在文件名中放置一个日期。迭代目录并解析日期让我找到我的文件。

例如：

*   image_2013-01-01.png
*   image_2013-04-31.png

如果没有更晚日期的图像将被丢弃，则将从 5 月到永恒选择第二个。

所以我想知道这个解决方案如何影响假设 <20 个文件的网站的速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:07:42.000

如果您使用类似的东西`Directory.GetFiles`，那就是对操作系统的一次调用。
这将访问磁盘以获取列表。

对于少于 20 个文件，这将非常快。但是，由于此数据不太可能经常更改，因此请考虑缓存图像的名称。

您可以将其存储在[应用程序上下文中](http://msdn.microsoft.com/en-IN/library/system.web.ui.page.context.aspx)，以便在您站点的所有用户之间共享。

# mysql - 优化数据库查询，结果多达 1000 万行

> ID：15632067
> 
> 赞同：1
> 
> 时间：2013-03-26T08:00:05.590
> 
> 标签：mysql, sql, performance, solr, large-data

我有一个 MySQL 查询，我需要尽可能优化（如果可能，加载时间应该低于 5 秒）

查询如下：

```
SELECT domain_id, COUNT(keyword_id) as total_count
FROM tableName
WHERE keyword_id IN (SELECT DISTINCT keyword_id FROM tableName WHERE domain_id = X)
GROUP BY domain_id
ORDER BY total_count DESC
LIMIT ... 
```

*   X 是来自输入的整数
*   domain_id 和keyword_id 被索引
*   数据库在本地主机上，所以网络速度应该是最大的

WHERE 子句的子查询最多可以获得 1000 万个结果。此外，对于 MySQL 来说，计算 COUNT 和 ORDER BY 这个计数似乎真的很困难。

我尝试将此查询与 SOLR 混合，但没有结果，一次获取如此多的行数给 MySQL 和 SOLR 带来了困难

我正在寻找一种具有相同结果的解决方案，无论我是否必须使用不同的技术或对此 MySQL 查询进行改进。

谢谢！

* * *

查询逻辑是这样的：

我们有一个域，我们正在搜索该域上使用的所有关键字（这是子查询）。然后我们取所有使用第一个查询中找到的至少一个关键字的域，按域分组，每个域使用的关键字数量，我们必须按使用的关键字数量排序 DESC。

我希望这是有道理的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:36:44.547

您可以尝试 JOIN 而不是子查询：

```
SELECT tableName.domain_id, COUNT(tableName.keyword_id) AS total_count
FROM tableName
INNER JOIN tableName AS rejoin
ON rejoin.keyword_id = tableName.keyword_id
WHERE rejoin.domain_id = X
GROUP BY tableName.domain_id
ORDER BY tableName.total_count DESC
LIMIT ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T18:20:48.420

就 MySQL 而言，您所能做的就是使用覆盖索引最小化查询的磁盘 IO，并更高效地重写它，以便查询可以从中受益。

由于`keyword_id`在表的另一个副本中有匹配项，因此`COUNT(keyword_id)`变为`COUNT(*)`.

众所周知，您使用的子查询类型对于 MySQL 来说是最坏的情况（它为每一行执行子查询），但我不确定它是否应该在`JOIN`这里替换为 a，因为它可能是您的数据的正确策略。

正如您可能理解的那样，查询如下：

```
SELECT domain_id, COUNT(*) as total_count
FROM tableName
WHERE keyword_id IN (X,Y,Z)
GROUP BY domain_id
ORDER BY total_count DESC 
```

使用覆盖复合索引将具有最佳性能`(keyword_id, domain_id [,...])`，因此它是必须的。另一方面，查询如下：

```
SELECT DISTINCT keyword_id FROM tableName WHERE domain_id = X 
```

将在覆盖综合指数上表现最佳`(domain_id, keyword_id [,...])`。所以你需要他们两个。

希望，但我不确定，当你有后一个索引时，MySQL 可以理解你不需要选择`keyword_id`子查询中的所有那些，但你只需要检查索引中是否有条目，我确信如果您不使用 DISTINCT，它会更好地表达。

所以，我会尝试添加这两个索引并将查询重写为：

```
SELECT domain_id, COUNT(*) as total_count
FROM tableName
WHERE keyword_id IN (SELECT keyword_id FROM tableName WHERE domain_id = X)
GROUP BY domain_id
ORDER BY total_count DESC 
```

另一种选择是将查询重写如下：

```
SELECT domain_id, COUNT(*) as total_count
FROM (
  SELECT DISTINCT keyword_id
  FROM tableName
  WHERE domain_id = X
) as kw
JOIN tableName USING (keyword_id)
GROUP BY domain_id
ORDER BY total_count DESC 
```

您再次需要这两个复合索引。

哪个查询更快取决于您的`tableName`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:38:33.530

我不是 100% 确定，但你能试试这个吗

```
SELECT t1.domain_id, COUNT(t1.keyword_id) as total_count
FROM tableName AS t1 LEFT JOIN
(SELECT DISTINCT keyword_id FROM tableName WHERE domain_id = X) AS t2
ON t1.keyword_id = t2.keyword_id
WHERE t2.keyword_id IS NTO NULL
GROUP BY t1.domain_id
ORDER BY total_count DESC
LIMIT ... 
```

目标是将`WHERE IN`子句替换为`INNER JOIN`and ，这将使其更快。`WHERE IN`子句总是让Mysql服务器陷入困境，但当您使用大量数据时，它会更加明显。仅当它使您的查询看起来更容易阅读/理解时使用`WHERE IN`，您有一个小数据集或以其他方式不可能（但无论如何您可能会有另一种方式来做到这一点:)）

# javascript - URL 中的表单值

> ID：15632070
> 
> 赞同：0
> 
> 时间：2013-03-26T08:00:22.787
> 
> 标签：javascript, function, url, parameters

我有一个将我的 URL 放在一起的函数。它看起来像这样：

```
$url = "/BT_Mathys_LNr_export_0.1/services/BT_Mathys_LNr_export?method=runJob";
$i = 1
$('#myForm :input').each(function() {
  $inputName = $(this).attr('name');
  if ($inputName != 'submit') {
    $url = $url + "&arg"+$i+"=--context_param%20"+$inputName+"="+$(this).val();
    $i++
  };
}); 
```

该函数将输入字段中的值一起添加到我的 URL 中，并且到目前为止它运行良好。现在我必须`<select>`在我的表单中添加 a 并且还必须传递该值，就像我对输入字段中的值所做的一样。

如何在代码中添加我的值`<select>`也将作为参数包含在 URL 中，就像输入字段一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:04:30.550

你为什么不使用 jQuery 来做到这一点：`$("#your_form").serialize();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:36:14.607

如果您想添加`<select>`控件，序列化可能不起作用，解决方法我认为您应该添加一个隐藏字段来存储选择的选定选项，`serialize()`其余的将为您完成。

# javascript - Meteor (Fibers) 循环和回调

> ID：15632073
> 
> 赞同：1
> 
> 时间：2013-03-26T08:00:25.050
> 
> 标签：javascript, meteor, node-fibers

流星纤维“同步”模式让我发疯。这是一个简单的代码示例：

```
var feedsData = feeds.fetch(); // [{_id: "1234"}, {_id: "6789", url: "http://...."}]
for(var i = 0, len = feedsData.length; i < len; i++) {
    var feed = feedsData[i];
    parser.parseURL(feed.url, function(err, out){
        console.log(feed._id, i); // outputs "6789" and "2" each times
    });
} 
```

我不明白如何使这项工作。循环结束后调用回调，但应保留内部内部变量（例如 feed）……而它们不是。

解析的 url 很好（第一个，然后是第二个），但是我无法更新我的数据，因为我在回调中没有好的 _id。

想要的输出将是：“1234”“0”和“6789”“1”，而不是“6789”“2”两次......你如何在 Meteor / Fiber 代码中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:26:56.040

另一种在“纤维”中做到这一点的方法（它可能比我上面发布的“未来”的答案更好）：

```
var feedsData = feeds.fetch(); // [{_id: "1234"}, {_id: "6789", url: "http://...."}]
Fiber(function() {
    var fiber = Fiber.current;
    for(var i = 0, len = feedsData.length; i < len; i++) {
        var feed = feedsData[i];
        parser.parseURL(feed.url, function(err, out) {
            console.log(feed._id, i);
            if(err) return fiber.throwInto(err);
            fiber.run();
        });
        Fiber.yield();
        console.log('here', i);
    }
    console.log('there');
}).run();
console.log('and there'); 
```

输出将是：

```
"and there"
"1234" "0"
"here" "0"
"6789" "1"
"here" "1"
"there" 
```

请注意，Fiber 函数中的所有内容都在其自己的 Fiber 中执行，就好像它是异步的一样，这就是为什么首先输出“and there”的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:14:12.860

好的，这是这样做的“纤维”方式：

```
var Future = require('fibers/future'),
wait = Future.wait,
feedsData = feeds.fetch(); // [{_id: "1234"}, {_id: "6789", url: "http://...."}],
parseUrl = Future.wrap(parser.parseURL);
Fiber(function() {
    for(var i = 0, len = feedsData.length; i < len; i++) {
        var feed = feedsData[i];
        var out = parseUrl(feed.url).wait();
        console.log('here', i, out);
    }
    console.log('there');
}).run();
console.log('and there'); 
```

结果输出将是：

```
"and there"
"here" "0" "the out data from the 1st callback"
"here" "1" "the out data from the 2nd callback"
"there" 
```

正是你所期望的。Fibers 中的“未来”期望给函数的最后一个参数是回调，并将返回 err 作为第一个参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T09:40:15.283

最简单的解决方案是：

```
feeds.fetch().forEach(function(feed,i) {
    parser.parseURL(feed.url, function(err, out){
        console.log(feed._id, i);
    });
}); 
```

Javascript 没有块作用域（但是，`let`ES6 中出现了），只有函数作用域。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T20:28:15.517

不确定这与 Meteor、Fibers 或“同步模式”有什么关系。我认为这只是您的javascript中的一个错误。您正在循环遍历数组，然后在回调中调用对象的属性。当然，当最终调用回调时，它会查看 的当前值`feed`，这将是循环退出后最近分配的值。

因此，您应该重写代码以考虑到这一点：

```
var feedsData = [{_id: "1234"}, {_id: "6789", url: "http://...."}]
for(var i = 0, len = feedsData.length; i < len; i++) {
    var feed = feedsData[i];
    parser.parseURL(feed.url, function(err, out){
        console.log(this._id, arguments[0]); // will output "1234 0" and "6789 1"
    }.bind(feed, i));
} 
```

# javascript - requirejs：我可以需要一个全局运行时变量吗？

> ID：15632081
> 
> 赞同：2
> 
> 时间：2013-03-26T08:00:57.967
> 
> 标签：javascript, requirejs, amd

我在一个有点特殊的 JS 环境中使用 requirejs，其中应用程序提供了一个全局单例（我无法改变这个事实，这不是在典型的浏览器环境中运行的）。我正在为这个应用程序编写一种 JS SDK，并希望提供使用这个全局的各种模块。

我可以以某种方式将该全局包装在模块中以便从我的模块中要求它吗？就像是

```
define([the_global_application], function(app) 
```

感谢您对此的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:07:41.307

是的，你只需要定义它。

```
// mysingletonapp.js
// define the module for our global var
define(['list', 'any', 'dependency', 'here'], function (l, a, d, h) {
  return yourGlobalVariable;
}); 
```

（我不认为你会有依赖项，因为你只是在包装一个 global `var`）

您可以像往常一样使用该模块：

```
require(['mysingletonapp'], function (app) {
  // do something cool
}); 
```

* * *

~~如果你想跳过这一切，你可以使用[`shim`RequireJS 的属性](http://requirejs.org/docs/api.html#config-shim)。您只需将其添加到您的选项文件中：~~

 ~~```
...
shim: {
        'globalApplication': {
            deps: ['underscore', 'jquery'], // again, you should not need them
            exports: 'yourGlobalVar'
        }
}
... 
```~~  ~~`shim`s 包装不支持 AMD 的库，因此要使此设置正常工作，您需要一个用于`globalApplication`. 这不是你的情况。~~

# asp.net - 使用 TripleDES 对密码进行加密解密

> ID：15632082
> 
> 赞同：0
> 
> 时间：2013-03-26T08:01:01.410
> 
> 标签：asp.net

我正在开发登录应用程序，我必须使用 TripleDES 加密和解密密码，我有一组编码，编码加密工作良好，但解密不工作，它显示错误。

**错误是：**

```
The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or a non-white space character among the padding characters. 
```

**编码是：**

**新用户.aspx.cs**

```
using System;
using System.Web.UI;
using System.Data.SqlClient;
using System.Configuration;
using System.Security.Cryptography;
using System.Text;
using System.IO;

namespace WebApplication5
{
    public partial class WebForm6 : System.Web.UI.Page
    {
        SqlConnection connection;
        protected void Page_Load(object sender, EventArgs e)
        {
            connection = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        {
            SqlConnection con1 = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
            con1.Open();

            SqlCommand cmd1 = new SqlCommand("select * from admin where USERNAME=@USERNAME and PASSWORD=@PASSWORD ", con1);
            cmd1.Parameters.AddWithValue("@username", txtUserName.Text);
            cmd1.Parameters.AddWithValue("@password", txtPassword.Text);
            SqlDataReader dr = cmd1.ExecuteReader();
            if (dr.HasRows)
            {
                ClientScript.RegisterStartupScript(Page.GetType(), "validation", "<script language='javascript'>alert('userName is already availables')</script>");

            }

            else
            {

                SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
                con.Open();
                string strQuery = "insert into admin( USERNAME,PASSWORD) values('" + txtUserName.Text +
                "','" + EncryptTripleDES(txtPassword.Text) + "')";
                connection = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
                connection.Open();
                SqlCommand cmd = new SqlCommand(strQuery, connection);
                cmd.ExecuteNonQuery();
                connection.Close();
                Response.Redirect("login.aspx");

            }

            con1.Close();
        }

        public static string EncryptTripleDES(string value)
        {
            TripleDESCryptoServiceProvider cryptoProvider = new TripleDESCryptoServiceProvider();
            MemoryStream memoryStream = new MemoryStream();
            CryptoStream cryptoStream = new CryptoStream(memoryStream, cryptoProvider.CreateEncryptor(), CryptoStreamMode.Write);
            StreamWriter streamWriter = new StreamWriter(cryptoStream);
            streamWriter.Write(value);
            streamWriter.Flush();
            cryptoStream.FlushFinalBlock();
            memoryStream.Flush();
            return Convert.ToBase64String(memoryStream.GetBuffer(), 0, Convert.ToInt32(memoryStream.Length));
        }

    }
} 
```

**登录.aspx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;
using System.Data;
using System.Security.Cryptography;
using System.IO;

namespace WebApplication5
{
    public partial class WebForm4 : System.Web.UI.Page
    {
        SqlConnection connection;
        protected void Page_Load(object sender, EventArgs e)
        {
            connection = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
        }

        protected void btnSubmit_Click(object sender, EventArgs e)
        {
            SqlConnection con1 = new SqlConnection(ConfigurationManager.ConnectionStrings["TestQueryConnectionString"].ConnectionString);
            con1.Open();
            SqlCommand cmd1 = new SqlCommand("select * from admin where USERNAME=@USERNAME and PASSWORD=@PASSWORD ", con1);
            cmd1.Parameters.AddWithValue("@username", txtUserName.Text);
            cmd1.Parameters.AddWithValue("@password", EncryptTripleDES(DecryptTripleDES(txtPassword.Text)));
            SqlDataAdapter da = new SqlDataAdapter(cmd1);
            DataTable dt = new DataTable();
            da.Fill(dt);
            if (dt.Rows.Count > 0)
            {
                Response.Redirect("emplist.aspx");
            }
            else
            {
                ClientScript.RegisterStartupScript(Page.GetType(), "validation", "<script language='javascript'>alert('Invalid Username and Password')</script>");
            }
            con1.Close();
        }
        protected void btnClear_Click(object sender, EventArgs e)
        {
            txtUserName.Text = "";
            txtPassword.Text = "";
        }

        public static string EncryptTripleDES(string value)
        {
            TripleDESCryptoServiceProvider cryptoProvider = new TripleDESCryptoServiceProvider();
            MemoryStream memoryStream = new MemoryStream();
            CryptoStream cryptoStream = new CryptoStream(memoryStream, cryptoProvider.CreateEncryptor(), CryptoStreamMode.Write);
            StreamWriter streamWriter = new StreamWriter(cryptoStream);
            streamWriter.Write(value);
            streamWriter.Flush();
            cryptoStream.FlushFinalBlock();
            memoryStream.Flush();
            return Convert.ToBase64String(memoryStream.GetBuffer(), 0, Convert.ToInt32(memoryStream.Length));
        }

        public static string DecryptTripleDES(string value)
        {
            TripleDESCryptoServiceProvider cryptoProvider = new TripleDESCryptoServiceProvider();
            byte[] buffer = Convert.FromBase64String(value);
            MemoryStream memoryStream = new MemoryStream(buffer);
            CryptoStream cryptoSteam = new CryptoStream(memoryStream, cryptoProvider.CreateDecryptor(), CryptoStreamMode.Read);
            StreamReader streamReader = new StreamReader(cryptoSteam);
            return streamReader.ReadToEnd();
        }

    }

} 
```

并请帮助我编写此编码 pbl ......，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:09:39.183

如我所见，问题出在两个地方：

```
byte[] buffer = Convert.FromBase64String(value); 
```

函数`DecryptTripleDES()`和

```
cmd1.Parameters.AddWithValue("@password", EncryptTripleDES(DecryptTripleDES(txtPassword.Text))); 
```

在你的按钮提交处理程序。

在第一行，您尝试将 Base64 编码的字符串转换为字节数组。如果不是因为在这种情况下它可能只是用户在 txtPassword 控件中输入的一些随机文本或密码，那么一切都很好。

还是您希望用户手动加密密码，对其进行 Base64 编码，然后将其输入到 txtPassword 字段？

尝试这样做：

```
cmd1.Parameters.AddWithValue("@password", EncryptTripleDES(txtPassword.Text)); 
```

# objective-c - 在后台线程中运行 NSStream

> ID：15632086
> 
> 赞同：4
> 
> 时间：2013-03-26T08:01:07.827
> 
> 标签：objective-c, networking

我目前正在尝试在后台线程中运行我的整个网络内容，因为当服务器无法访问（即）时，它当前阻塞了主线程。

我目前正在通过以下代码创建网络连接。有没有一种简单的方法可以在新的后台线程中运行它？

我怎样才能将收到的消息扔回主线程？如何通过后台线程发送消息？

```
CFReadStreamRef readStream;
CFWriteStreamRef writeStream;
CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)ipAdress, port, &readStream, &writeStream);
inputStream = (__bridge NSInputStream *)readStream;
outputStream = (__bridge NSOutputStream *)writeStream;
[inputStream setDelegate:self];
[outputStream setDelegate:self];
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

[inputStream open];
[outputStream open]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T08:39:07.613

[这](http://www.cocoawithlove.com/2009/06/revisiting-old-post-streaming-and.html)是一个完全符合您所说的教程。虽然它更侧重于音频流，但原理完全相同（即在产生工作线程、让它与父线程对话等方面）。

这个想法很简单..您创建一个新线程并让它处理流工作，然后您使用属于您刚刚创建的线程的运行循环调度流阅读器。流将具有回调，当某些事件发生时将触发（即您获得一些数据，连接超时等）。在回调方法中，您可以警告或与主线程（这是处理 UI 的线程）通信.

这里有一些代码可以为你指明正确的方向，但是如果你从上面的教程下载[代码](https://github.com/mattgallagher/AudioStreamer)并按照.. 你会得到它：

```
// create a new thread
internalThread =
                [[NSThread alloc]
                    initWithTarget:self
                    selector:@selector(startInternal)
                    object:nil];
            [internalThread start];

// creating a stream inside the 'startInternal' thread*
stream = CFReadStreamCreateForHTTPRequest(NULL, message);

// open stream
CFReadStreamOpen(stream) 

// set callback functions
// ie say: if there are bites available in the stream, fire a callback etc
CFStreamClientContext context = {0, self, NULL, NULL, NULL};
CFReadStreamSetClient(
        stream,
        kCFStreamEventHasBytesAvailable | kCFStreamEventErrorOccurred | kCFStreamEventEndEncountered,
        ASReadStreamCallBack,
        &context);

// schedule stream in current thread runloop, so that we DON'T block the mainthread
CFReadStreamScheduleWithRunLoop(stream, CFRunLoopGetCurrent(), kCFRunLoopCommonModes);

// create the callback function to handle reading from stream
// NOTE: see where else in the code this function is named (ie CFReadStreamSetClient)
static void ASReadStreamCallBack
(
   CFReadStreamRef aStream,
   CFStreamEventType eventType,
   void* inClientInfo
)
{
    //handle events you registered above
    // ie
    if (eventType == kCFStreamEventHasBytesAvailable) {
        // handle network data here..
        ..
        // if something goes wrong, create an alert and run it through the main thread:
        UIAlertView *alert = [
            [[UIAlertView alloc]
                initWithTitle:title
                message:message
                delegate:self
                cancelButtonTitle:NSLocalizedString(@"OK", @"")
                otherButtonTitles: nil]
            autorelease];
            [alert
                performSelector:@selector(show)
                onThread:[NSThread mainThread]
                withObject:nil
                waitUntilDone:NO];        
    }          
} 
```

# php - php在url中读取和写入图像

> ID：15632087
> 
> 赞同：0
> 
> 时间：2013-03-26T08:01:10.540
> 
> 标签：php

我想调整 URL 中的图像大小，例如`localhost/changimage.php?percent=40`. 我已经在 php.ini 中调整了它的大小。但是用户应该通过输入 URL 来调整它的大小，这是我的 PHP 代码：`changimage.php`

```
<?php

 $filename = '/var/www/html/zahir/images/bike.jpeg';

  $percent = 0.5; 

  header('Content-type: image/jpeg');

    list($width, $height) = getimagesize($filename);

     $new_width = $width * $percent;

       $new_height = $height * $percent;

         $image_p = imagecreatetruecolor($new_width, $new_height);

  $image = imagecreatefromjpeg($filename)
;
imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

  imagejpeg($image_p, null, 100);

 ?> 
```

我不知道如何在 URL 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:27:13.930

试试看。

```
$percent = 0;
   if (isset($_GET["percent"])) {
       $percent = ($_GET["percent"] / 100);
      }
    if ($percent <= 0) {
        $percent = 1;
    }

    $filename = '/home/deepakgupta/Pictures/phone.jpg';

    header('Content-type: image/jpeg');

    list($width, $height) = getimagesize($filename);

    $new_width = $width * $percent;

    $new_height = $height * $percent;

    $image_p = imagecreatetruecolor($new_width, $new_height);

    $image = imagecreatefromjpeg($filename)
    ;
    imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

    imagejpeg($image_p, null, 100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:42:36.580

或者

```
$percent = 0.5;
if (isset($_GET['percent'])) {$percent = $_GET['percent']/100;} 
```

检查百分比是否有值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:26:11.317

也许是这样的：

```
$percent = 0.5;
if ($_GET['percent']) {$percent = $_GET['percent']/100;} 
```

# javascript - 使用 Dojo 的 require.trace 跟踪整体加载进度

> ID：15632089
> 
> 赞同：3
> 
> 时间：2013-03-26T08:01:20.123
> 
> 标签：javascript, dojo, amd

[Dojo 的 AMD 加载程序](http://dojotoolkit.org/reference-guide/1.8/loader/amd.html#tracing)的文档提到了跟踪 API。有什么例子可以说明这是如何实现的吗？

我想利用它在加载我的应用程序的各种依赖项时显示“已加载 X of X”样式消息，但我不确定如何执行此操作或在我的代码流中包含跟踪的位置。

**编辑：**似乎跟踪 API 仅在 Dojo 的源版本上可用。有没有不同的方式来实现我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:14:50.510

这段代码似乎可以工作，但它太脆弱了。它依赖于 1) require 在 Dojo 的源版本中公开它的内部工作，以及 2) require 的属性，这些属性可能会在未来发生变化。肯定有更好的办法！

```
require( [], function()
{
    // output amd progress
    var loadWatchHandle = setInterval( function()
    {
        var all = Object.keys( require.modules ).length,
            waiting = 0;

        for( dep in require.waiting )
        {
            if( require.waiting[ dep ] !== 1 )
            {
                waiting++;
            }   
        }

        // write progress
        console.log( ( all - waiting ) + '/' + all + ' files (' + parseInt( ( all - waiting ) / all * 100 ) + '%)' );
    }, 50 );

    require( [ 'dojo/parser',
        'dojo/ready',
        'dijit/layout/BorderContainer',
        'squad_builder/TabContainer',
        'dijit/layout/ContentPane',
        'dojo/domReady!' ], 
    function( parser, ready )
    {
        parser.parse();

        ready( function() // uses ready not domReady because we want initial djits to be parsed
        {
            // stop tracing
            clearInterval( loadWatchHandle );

            // bootstrap here...

        } );
    } );
} ); 
```

# android - 使用 YouTube 数据 API V3 时出现未经授权的 401

> ID：15632091
> 
> 赞同：1
> 
> 时间：2013-03-26T08:01:36.240
> 
> 标签：android, youtube-api

我以为我已经成功实现了 YouTube 数据 API 来从我的应用程序上传视频，直到我不断收到*com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized*，对于我尝试遵循[Tasks android sample](https://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/src/main/java/com/google/api/services/samples/tasks/android/TasksSample.java?repo=samples)和[YouTube Java的实现来自网络的示例](https://code.google.com/p/youtube-api-samples/source/browse/samples/java/youtube-cmdline-uploadvideo-sample/src/main/java/com/google/api/services/samples/youtube/cmdline/youtube_cmdline_uploadvideo_sample/UploadVideo.java)和其他示例。谁能发现导致问题的原因？

```
public class splash{

    AccountManager.get(getApplicationContext()).getAuthTokenByFeatures(
                    "com.google", "oauth2:https://gdata.youtube.com", null,
                    this, null, null, new AccountManagerCallback<Bundle>() {

                        @Override
                        public void run(AccountManagerFuture<Bundle> future) {
                            try {
                                Bundle bundle = future.getResult();
                                String acc_name = bundle
                                        .getString(AccountManager.KEY_ACCOUNT_NAME);
                                String auth_token = bundle
                                        .getString(AccountManager.KEY_AUTHTOKEN);

                                Log.d("", "name: " + acc_name + "; token: "
                                        + auth_token);

                                editor.putString("USER_ACCOUNT_PREF", acc_name);
                                editor.putString("USER_ACCOUNT_AUTH_PREF", auth_token);

                            } catch (Exception e) {
                                Log.e("", e.getClass().getSimpleName() + ": "
                                        + e.getMessage());
                            }
                        }
                    }, null); 
```

从

```
public class myuploadclass {

    private static YouTube youtube;
    GoogleAccountCredential credential;
    GoogleCredential CREDENTIAL = new GoogleCredential();
    com.google.api.services.youtube.YouTube service;
    final HttpTransport transport = AndroidHttp.newCompatibleTransport();
    final JsonFactory jsonFactory = new GsonFactory();
    final String CLIENT_ID = "blah.apps.googleusercontent.com";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mPreferences = PreferenceManager.getDefaultSharedPreferences(this);
        String test = mPreferences.getString("USER_ACCOUNT_AUTH_PREF", null);
        AccountManager.get(getApplicationContext()).invalidateAuthToken("com.google", test);
        final SharedPreferences.Editor editor = mPreferences.edit();
        AccountManager.get(getApplicationContext()).getAuthTokenByFeatures(
                "com.google", "oauth2:https://gdata.youtube.com", null,
                this, null, null, new AccountManagerCallback<Bundle>() {
                    @Override
                    public void run(AccountManagerFuture<Bundle> future) {
                        try {
                            Bundle bundle = future.getResult();
                            String acc_name = bundle
                                    .getString(AccountManager.KEY_ACCOUNT_NAME);
                            String auth_token = bundle
                                    .getString(AccountManager.KEY_AUTHTOKEN);               

                            Log.d("", "name: " + acc_name + "; token: "
                                    + auth_token);

                            editor.putString("USER_ACCOUNT_PREF", acc_name);
                            editor.putString("USER_ACCOUNT_AUTH_PREF", auth_token);

                        } catch (Exception e) {
                            Log.e("", e.getClass().getSimpleName() + ": "
                                    + e.getMessage());
                        }
                    }
                }, null);
        editor.commit();        

        String test2 = mPreferences.getString(
                "USER_ACCOUNT_AUTH_PREF", null);

        Log.i(mPreferences.getString(
                "USER_ACCOUNT_PREF", null),mPreferences.getString(
                        "USER_ACCOUNT_AUTH_PREF", null));

        credential = GoogleAccountCredential.usingOAuth2(this,
                YouTubeScopes.YOUTUBE);
        credential.setSelectedAccountName(mPreferences.getString(
                "USER_ACCOUNT_PREF", "chrisdunne92@gmail.com"));    

        CREDENTIAL.setAccessToken(test2);

        youtube = new YouTube.Builder(
                transport, jsonFactory, credential).setApplicationName(
                "application name").setHttpRequestInitializer(CREDENTIAL)
                .setGoogleClientRequestInitializer(new YouTubeRequestInitializer(CLIENT_ID))
                .build(); 
```

Logcat 输出

```
 03-26 07:40:15.890: W/System.err(13965): com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
{"code": 401,"errors": [{"domain": "global","location": "Authorization","locationType": "header","message": "Invalid Credentials","reason": "authError" }],"message": "Invalid Credentials"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:48:13.080

I have fixed my problem

```
credential = GoogleAccountCredential.usingOAuth2(this,
    YouTubeScopes.YOUTUBE_UPLOAD,YouTubeScopes.YOUTUBEPARTNER,YouTubeScopes.YOUTUBE);       
    credential.setSelectedAccountName(mPreferences.getString(PREF_ACCOUNT_NAME, null));
    youtube = new YouTube.Builder(
    transport, jsonFactory, credential).setApplicationName(
    "PoliceWitness").build(); 
```

# css - 从谷歌网络字体加载字体或从自己的服务器加载字体，哪一种在页面加载时间方面更有效？

> ID：15632092
> 
> 赞同：2
> 
> 时间：2013-03-26T08:01:40.117
> 
> 标签：css, fonts, font-face, webfonts, google-font-api

在使用一些自定义字体时，我有两个选择，要么从我自己的服务器加载表单，要么加载谷歌网络字体。但我担心的是哪一个在页面加载时间方面有效？

我使用 css 的方式是

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.eot'); /* IE9 Compat Modes */
    src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('webfont.woff') format('woff'), /* Modern Browsers */
    } 
```

*在这里，在加载字体时，我还使用字体版本缓存并从 CDN 加载字体。*

*我尝试加载的字体大小接近 36k。*

```
h1 {
       font-family: 'MyWebFont', Fallback, sans-serif;
} 
```

谷歌字体的实现

```
<link href='http://fonts.googleapis.com/css?family=Caesar+Dressing' rel='stylesheet' type='text/css'>

h1{
  font-family: 'Caesar Dressing', cursive;
} 
```

有人可以帮助我了解应该使用哪一个，要么使用谷歌网络字体，要么使用自定义表单自己的服务器。就页面加载时间而言，哪一个最好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:14:20.893

从 google cdn 下载字体总是会更快，如果不适合您（在您的服务器在局域网中的情况下），对于其他所有人来说，原因很简单，google cdn 服务器可能会更接近给他们而不是给你的服务器。

此外，如果你想更进一步，谷歌还在他们的 CDN 上托管了一些其他有用的东西，你甚至可以从他们那里获得具有上述相同优势的 jquery。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T03:20:10.720

应该使用哪一个取决于您的服务器有多快，您的服务器位于世界的哪个位置，以及您网站的每个访问者在世界的哪个位置。

谷歌的服务器非常快，通常它们会更快。但是有些地区他们的服务器不好，你应该使用自己的。

# android - Android 布局预览

> ID：15632095
> 
> 赞同：1
> 
> 时间：2013-03-26T08:01:57.007
> 
> 标签：android, xml, preview

我正在开发一个仅限平板电脑的应用程序，并将**10 英寸平板电脑的 xml 文件放在 /res/layout-sw720dp**文件夹中。

当我在eclipse中预览自定义xml时，我选择设备为“10.1in WXGA（平板电脑）（1280x800：mdpi），一切都很好（注意：某些元素需要通过添加一些边距来定位（在dp中）...... )，**但是当我在三星的 Galaxy 选项卡上运行此应用程序时，此元素不会像 xml 编辑器显示的那样定位。**

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:07:43.037

阅读[链接 1](http://developer.android.com/training/multiscreen/screensizes.html)和[链接 2](http://developer.android.com/guide/practices/screens_support.html)，您将了解 android 如何支持多种屏幕尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:52:57.340

更好地使用包装内容或使用 layout_weight 属性而不是固定大小，以便在所有设备上获得更一致的外观

# java - 显示“5 分钟前”、“昨天”等的精美时间格式化程序

> ID：15632108
> 
> 赞同：8
> 
> 时间：2013-03-26T08:02:47.253
> 
> 标签：java, time, datetime-format

像现代网页（包括 StackOverflow ;-) 那样格式化时间的最佳方法是什么，即使用简单的相对描述，例如：

*   5 秒前
*   23 分钟前
*   昨天
*   2天前
*   ...

我正在寻找一个除了多个语言环境之外还可以处理这个问题的库。我可以提供短语（英语中的“X seconds”，德语中的*“* *X Sekunden”*等）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T08:07:18.150

我认为这就是您要寻找的：

[如何在Java中计算“时间前”？](https://stackoverflow.com/questions/3859288/how-to-calculate-time-ago-in-java?rq=1)

库：[PrettyTime](http://ocpsoft.org/prettytime/)

德语：

```
PrettyTime p = new PrettyTime(new Locale("de"));
System.out.println(p.format(new Date())); 
```

对于英语：

```
PrettyTime p = new PrettyTime();
System.out.println(p.format(new Date())); 
```

显然有 25 种语言版本。

# php - word-wrap 属性似乎在 CSS 中不起作用

> ID：15632109
> 
> 赞同：0
> 
> 时间：2013-03-26T08:02:49.867
> 
> 标签：php, html, css

我设计了一个 html iframe，我想在其中使用 word-wrap 属性，即，它应该将长单词分到下一行。但相反的是，对于长词，它会添加一个水平滚动条，而不是将单词分到下一行。

我尝试使用“溢出：隐藏”属性隐藏滚动条，但没有任何反应。

我可以在这里使用一些帮助。

这是 iframe 的 html 代码：

```
<div id="main_frame" >
<iframe id="main_frame" src="homedept.php" name="iframe_a"></iframe>
</div> 
```

CSS是：

```
div#main_frame
{
 float: left;
margin-top:198px;
margin-left:5px;
float:left;
position:relative;
width:100%;
height:900px;
z-index: 0;
word-wrap:break-word;
}

iframe#main_frame
{
float:left;
margin-left: 30px;
margin-right: 300px;
float:left;
border:none;
word-wrap:break-word;
width: 78%;
height:70%;
z-index: 1;

} 
```

感谢@tyriar 的回复，我现在已将自动换行属性设置为原始页面。仍然没有任何反应。

```
<div id="display_posts">

<?php //php echoes some text here ?>

</div> 
```

CSS代码是：

```
#display_posts
{
word-wrap:break-word;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:06:04.383

您定义相同`ID 2 times`，但`ID`必须是`unique`，您不能声明它两次。

所以使用`class`而不是使用`ID`

还`iframe`调用其他页面并且您`word-wrap`在原始页面中定义，因此它不适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:04:51.550

您不能应用于`word-wrap`，`iframe`它是一个完全独立的页面，并且与原始页面的样式不适用。您需要更改`iframe`指向的页面上的样式。

此外`id`，属性必须是唯一的，您已`id="main_frame"`在 an`iframe`和 a上设置`div`。

## 更新

如果`word-wrap:break-all`是，`iframe`那么可能页面的宽度正在引入滚动条。确保您的元素随页面正确缩小。如果您`iframe`在浏览器中加载页面，您应该能够减小窗口大小而不会出现水平滚动条。如果是这样，那么这是该页面的最小宽度的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:06:52.463

尝试

`word-break:break-word`

或者

`word-break:break-all`

并尝试使用类而不是 ID，因为 ID 应该是唯一的。

# javascript - 如何打印数组对象缓冲区的值？

> ID：15632119
> 
> 赞同：1
> 
> 时间：2013-03-26T08:03:15.610
> 
> 标签：javascript, html

如何在 JavaScript 中打印数组对象缓冲区的值？

我想打印一个数组对象缓冲区的值，我从中获取对象的值

```
var fr = new FileReader();
fr.onload = function() {
  var ab = fr.result; 
```

数组对象缓冲区在哪里`ab`，它是文件 API 字段的一部分。

# java - 当我们点击不同的按钮时，其内容会发生变化的 JFrame

> ID：15632121
> 
> 赞同：3
> 
> 时间：2013-03-26T08:03:20.083
> 
> 标签：java, swing, jframe, cardlayout

我在`Java's Swing`这里使用来制作 UI 应用程序。我创建了一个带有一些按钮的 JFrame。当我点击这个按钮时，我想要一个新的 JFrame，在这个地方有一些不同的内容。但是，我不想在这里加载新的 JFrame。

`actionPerformed(ActionEvent obj)`我知道的一种方法是在第一个 JFrame 中的按钮方法中将第二个 JFrame 的可见性设置为 True 。但它再次加载了一个新的 JFrame，我不希望这样。

```
public class FirstUI extends JFrame {
    JButton but1;

    public FirstUI(){
        but1= new JButton("Click here");
        add(but1);

    XYZ obj= new XYZ():
    but1.addActionListener(obj);
    }

    public class XYZ implements ActionListener{
        public void actionPerformed(ActionEvent obj1){

             // WHAT TO DO HERE  
        } 
    }
} 
```

我只想要一个 JFrame，当我们点击不同的按钮时，它的内容会发生变化。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T08:09:31.213

看一下[`CardLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html)，这将允许切换框架的内容：

> CardLayout 对象是容器的布局管理器。它将容器中的每个组件都视为一张卡片。一次只能看到一张卡片，并且容器充当一叠卡片。添加到 CardLayout 对象的第一个组件是容器首次显示时的可见组件。

有关示例，请参见[如何使用 CardLayout 。](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T08:22:21.183

您还可以`JFrame`在运行时动态操作您的内容。您可以使用`add(...)`, `remove(...)`,`removeAll(...)`方法来添加和删除内容，就像在显示框架之前一样。完成后，您需要调用修改后的容器的方法`revalidate()`和`repaint()`方法，以使一切安定下来并正确显示。

但是，我认为正确的解决方案取决于您尝试实施的实际概念。如果您想添加或删除几个 GUI 元素以强调功能，那么正确的方法是按照我概述的那样操作容器。但是，如果您想要根据系统状态（不超过 2-3 个）略有不同的 GUI，那么`CardLayout`将是一个更合适的选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:23:25.303

您可以将父类的可见性设置为 false。

然后，您一次只能获得一个包含所需内容的帧。

您必须在按钮的单击事件中创建框架的静态对象和 setVisible(fase)。

前任。

```
public class demo  {
static JFrame jf;
public static void main(String a[])
{
    JButton b=new JButton("OK");
    JPanel jp=new JPanel();
    jf=new JFrame();
    jf.setVisible(true);
    jf.setSize(200,200);
    jf.add(jp);
    jp.add(b);

    b.addActionListener( new ActionListener(){
    public void actionPerformed(ActionEvent e)
    {
     jf.setVisible(false);
     JFrame f= new JFrame();
     f.setSize(200,200);
     f.setVisible(true);
    }
    });
} 
```

}

它会帮助你。

你明白我的意思了吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:24:50.107

一种方法是更改​​ JFrame 的内容窗格。这基本上是一个JPanel。您可以通过`frame.setContentPane( <your new panel> );`
第二种方法来做到这一点，即做@Peter Lang 所做的事情。那就是使用可以更改不同内容组的布局管理器。

# python - 如何使用带有 python 的 App Engine 国际化 Django HTML 模板？

> ID：15632132
> 
> 赞同：0
> 
> 时间：2013-03-26T08:04:47.407
> 
> 标签：python, django, google-app-engine, internationalization, django-templates

我正在写一个网站[http://www.perlesloyfer.no](http://www.perlesloyfer.no)将使用

`country = self.request.headers.get('X-AppEngine-Country')`以确定它是挪威游客还是来自另一种语言的游客。该模板显示为

```
path = os.path.join(os.path.dirname(__file__), 'index.html')
self.response.out.write(template.render(path, template_values)) 
```

如果访问者来自另一个国家，它应该显示国际化为英文的 HTML 模板，否则它们应该像现在一样在挪威语上。

我应该为每种语言制作单独的 html 模板，还是一种制作一个模板并使用 Django 从不同文件中获取字符串的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:10:46.173

Django 有一个不错的[i18n 特性](https://docs.djangoproject.com/en/dev/topics/i18n/)。请使用它。作为旁注，使用 X-AppEngine-Country 来确定内容语言是一个坏主意（不要忘记国外的人）。

# c++ - 通过指针获取装饰 char* 和 char const*：好的做法？

> ID：15632133
> 
> 赞同：4
> 
> 时间：2013-03-26T08:04:49.893
> 
> 标签：c++, string, decorator, strategy-pattern, copy-on-write

您好，我想就我做一个字符串类（如`std::string`）的想法向公众进行调查，该类具有能够处理客户端提供的缓冲区的功能。

你预见到的危险是什么？是经典的味道吗？等等

我的意思是这样的：

```
char ext[64] = {0};
my::string s(ext, my::string::acquire_RW);
size_t len = s.size();
size_t pos = s.find("zboub");
my::string s2(s);   // uses true (alloc+)copy semantic here. 
```

所以我预见了两种策略：这将允许修改`acquire_RW`或不修改字符。在任何非常量方法的情况下，以及必须扩展缓冲区的方法的情况下；它只会在此时分配和复制。`acquire_RO``ext``RO``RW`

在某种程度上，`my::string`类型变成了类型的装饰器`char*`。

当然要小心不要在装饰器作为客户要求留下之前释放外部缓冲区。

感谢您分享您的担忧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:24:07.773

“良好实践”的答案是困难的。我想说，一般来说不是很好的做法，但对于某些特定的用例来说是很好的做法。这一切都取决于您对所提供内存的生命周期的信任程度。总的来说：不信任。在特殊情况下：好的。

考虑性能方面有一件相当重要的事情：

*您是否计划对分配*的字符串变体使用隐式共享（写入时复制和引用计数） ？或者你打算使用值语义（总是复制，从不引用）？

在多处理器和多线程环境中，值语义是字符串的首选方式。使用隐式共享的性能增益被多线程环境中必要的锁定所破坏。

请注意，即使是多线程的，您的建议仍然可能有意义：从外部内存到分配的变体时，您可以完美地使用写时复制（不需要锁定），并且从那时起使用值语义（也不需要锁定）。这将是最好的。

我想您的变体在非常特定的用例中运行良好，例如，您使用大量字符串对一些文件进行内存映射，并且您不想存储这些小字符串和片段内存的副本。

但是，在一般情况下，我不会担心，只需使用`std::string`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:08:26.020

我认为这是个好主意，但我会坚持只读；`std::string`对 RW 来说非常好，除非当然有可以节省一些内存分配的情况。

虽然这是一个相当大的优化，所以它可能不值得付出努力，除非你知道你的静态字符串会给你带来问题。

# ajax - ajax 请求中的链接不是通过 ajax 请求的

> ID：15632135
> 
> 赞同：0
> 
> 时间：2013-03-26T08:04:53.970
> 
> 标签：ajax, greasemonkey, userscripts

我有一个用户脚本，它通过 GM_xmlhttprequest 触发一个 ajax 调用，以加载一个简单的页面，其中包含一些文本和链接到一个名为“debug”的 div。这很好用。现在我想要通过 gm_xmlhttprequest 请求所请求文档中的每个链接。我不知道为什么我的功能不起作用

```
 $('.ajax, .ajaxn').click(function(event) {
 event.preventDefault();
 var href = $(this).attr('href');
GM_xmlhttpRequest({
                method: "GET",
                url: href,
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                    },
                        onload: function(response) {
                                $('#debug').html('');
                                $('#debug').append(response.responseText).fadeIn(5000);
                                        }
            });
}); 
```

响应内部的链接有类 ajaxn，firebug dom/html 面板显示响应实际上是插入到#debug

任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:11:00.657

问题尚不清楚，但假设您希望该`click`处理程序触发，如果在`#debug`内容中单击链接（而不是自动加载链接或???）......

然后不要使用该`.click()`方法。使用[jQuery 的`.on()`方法，这会在与选择器匹配的 current](http://www.jqapi.com/#p=on)*和任何 future*节点 上触发。

代码变成这样：

```
$(document).on ("click", ".ajax, .ajaxn", function (event) {
    event.preventDefault ();
    var href = $(this).attr('href');

    GM_xmlhttpRequest ( {
        method:     "GET",
        url:        href,
        headers:    {
            "Content-Type": "application/x-www-form-urlencoded"
        },
        onload:     function (response) {
            $('#debug').empty ();
            $('#debug').append (response.responseText).fadeIn (5000);
        }
    } );
} ); 
```

另外，不要使用`$('#debug').html('');`   Use[`$('#debug').empty();`](http://www.jqapi.com/#p=empty)代替。这会更快一些，并且代码会更加自文档化。

# authentication - Laravel，获取当前登录用户

> ID：15632144
> 
> 赞同：6
> 
> 时间：2013-03-26T08:05:36.493
> 
> 标签：authentication, laravel

我想在应用中显示当前登录用户的列表。我想使用 Laravel Auth 方法。我正在查看 API，但找不到类似的东西。

我可能需要遍历会话存储，然后将其与用户 ID 匹配。我对吗？

更新：忘了提，我将会话存储在数据库中。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-26T12:11:21.897

“当前登录”是普通旧会话无法做到的。让我解释一下原因：

会话是存储在服务器端的一堆数据，通过 cookie 分配给用户。该 cookie 保留在用户浏览器上，因此它使会话保持活动状态。会话可以在用户甚至不登录的情况下保持“活动”数月。

**但是，**可以将会话[存储在数据库上](http://laravel.com/docs/session/config#database)。

如您所见，Laravel 保留了一个名为的字段`last_activity`，并且通过该字段，您应该能够检索在过去 15 分钟内有活动的所有会话（或者其他什么，您称之为）。

当您检索这些记录时，该`data`字段是会话数据的序列化表示。您可以`unserialize($session_record->data)`检索用户 ID。

根据您的身份验证驱动程序，会话的用户 ID 可能有不同的名称：

*   对于雄辩的司机来说，应该是`eloquent_login`。
*   对于流利的司机`fluent_login`。
*   对于你的`Custom\AuthClass`，它应该被调用`custom_authclass_login`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-28T16:09:00.817

假设所有来自登录用户的 http 请求都通过`auth`中间件，我们可以重写`terminate`如下函数：

```
public function terminate($request, $response)
{
    Auth::user()->save();
} 
```

然后像这样的查询`User::where('updated_at', '>', Carbon::now()->subMinutes(12))->get();`将带来所有已登录的用户，`12`会话的生命周期在哪里。

当然，对于实时，我们应该`ajax`每 5 秒使用一次调用或 websockets via`pusher`或其他。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-06-08T11:30:40.620

**首先创建一个表，其中将插入登录用户的 id**

```
Schema::create('active_users', function(Blueprint $table)

{

                    $table->increments('id')->unsigned();
                    $table->integer('user_id')->unsigned();
                    $table->foreign('user_id')->references('id')->on('users')
                        ->onUpdate('cascade')->onDelete('cascade');

                    $table->timestamps();
        }); 
```

**然后在您的控制器中在登录时插入数据**

```
if (Auth::attempt($credentials)) {

                  DB::table('active_users')->insert(array('user_id' =>   Auth::id()));
} 
```

**并在注销时删除数据**

```
DB::table('active_users')->where('user_id', '=', Auth::id())->delete(); 
```

**打印视图中的在线用户列表**

```
<ul><strong>Online Users</strong>
            <?php $online_users = DB::table('active_users')->where('user_id','!=',Auth::id())->get(); ?>

            @foreach($online_users as $online_user)
                <li>{{User::find($online_user->user_id)->first_name}}</li>
            @endforeach
        </ul> 
```

# c - 从电话数字键盘进行字母搜索

> ID：15632148
> 
> 赞同：1
> 
> 时间：2013-03-26T08:05:54.763
> 
> 标签：c, algorithm, nlp, state-machine, iphone-keypad

我正在实现基于电话键盘的字母搜索，例如**电话键盘**[1](http://i.stack.imgur.com/dqb75.png)

当用户键入 2 时，我得到 {A, B, C} 的组合。当用户输入 23 时，我在组合中得到 {AD, AE, AF, BD, BE, BF, CD, CE, CF}，依此类推。如果我继续输入并进行组合，我会得到数千个组合，这会使搜索过程非常缓慢。所以现在我想实现一个算法来删除像CF BD CD这样的不合逻辑的组合，我的意思是逻辑上没有人的名字以这些组合开头，也许是两个没有元音的辅音。所以这样我想缩小我的搜索范围。任何人都知道这种状态机，用 C 实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:10:26.463

您可以根据正在搜索的数据集构建一[组有效前缀。](http://en.wikipedia.org/wiki/Trie)匹配部分输入应该很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:42:02.493

Keep in mind that when it comes to linguistic data "illogical" is not a good proxy for "unlikely." This is particularly true when it comes to names. As an example, according to a standard definition of "consonant" in English, my last name starts with four consonants. If it were to be written after a German fashion, it would start with five. When thinking about such issues it is useful to keep in mind that:

1.  Sounds are not letters, and letters are not sounds: in most orthographic systems, the mapping of letters to sounds is not 1:1
2.  Many languages have unexpected syllabic nuclei: Tamazight Berber, for instance, allows syllables where the sound `m` plays the role of the syllabic nucleous, like the vowel generally do in English. So a Berber name can look like `CCmC` (where C stands for consonants) and be perfect in that language. It is not unlikely that a person of Berber origin would then use the similar orthography in English, which a naive system would rule out as "illogical"
3.  Finally, many systems for writing foreign names and words in English use di-graphs or tri-graphs (two letter and three letter combinations) for representing the sounds of the foreign language in English: this can create what looks like illicit consontant clusters. We know that English does that (`sh` represents one sound, see point 1), but this is particularly true when transcribing foreign words.

So unless you know very well the orthographic rules for the names you are expecting, you are likely to rule out legitimate names using a naive system.

# iphone - 应用程序崩溃

> ID：15632151
> 
> 赞同：0
> 
> 时间：2013-03-26T08:05:59.863
> 
> 标签：iphone, facebook, share

我在我的 iPhone 应用程序中使用以下代码在 Facebook 上自动共享，但是`EXC_BAD_ACCESS`当我点击共享按钮时，我的应用程序会因消息而崩溃。

```
NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:4];
[variables setObject:@"Yours content to be shared" forKey:@"message"];
// share prepared content to fb
fb_graph_response = [fbGraph doGraphPost:@"me/feed" withPostVars:variables];
NSLog(@"postMeFeedButtonPressed:  %@", fb_graph_response.htmlResponse); 
```

帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:16:46.413

很难从您提供的代码中分辨出来，但有一个想法：
您的字典`variables`是作为自动释放对象创建的。这意味着如果它没有保留在 中`fbGraph`，它将在应用程序返回到主运行循环后立即被释放，其中处理共享按钮的选项卡。在这种情况下，`variables`按下按钮后不再存在，您将收到 EXC_BAD_ACCESS 错误。
如果您使用的是 ARC，编译器会正确处理。

# directx - 我将如何创建一个表单/应用程序来覆盖我的 DirectX 全屏游戏？- 视觉基础

> ID：15632152
> 
> 赞同：0
> 
> 时间：2013-03-26T08:06:02.037
> 
> 标签：directx, overlay, fullscreen

我想知道是否有人知道如何使用visual basic为诸如魔兽世界之类的FULLSCREEN directX游戏创建表单覆盖？我创建了一个有用的应用程序，我想在全屏游戏上使用。我已经搜索了几个小时，才发现这是可能的，但我找不到任何代码可以做到这一点。我发现它使用 DirectX 来实现这一点。重要的是不要与窗口模式混淆，我的应用程序在此之上工作，但不是在全屏模式之上。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T16:34:47.053

可能你最好使用这样的解决方案；[http://www.unknowncheats.me/forum/c/62019-c-non-hooked-external-directx-overlay.html](http://www.unknowncheats.me/forum/c/62019-c-non-hooked-external-directx-overlay.html)

与游戏挂钩以绘制叠加层的问题是他们经常将其检测为作弊并禁止您。确保您不与游戏自己的进程交互并使用此方法实现覆盖，您应该没问题。

# mysql - tomcat7 - jdbc 数据源 - 这很可能会造成内存泄漏

> ID：15632153
> 
> 赞同：24
> 
> 时间：2013-03-26T08:06:02.857
> 
> 标签：mysql, spring, memory-leaks, tomcat7, datasource

当 tomcat 关闭时，我在 catalina.out 日志文件中收到以下消息。我正在使用 Tomcat 7.x 和 Tomcat JDBC 数据源。

```
Mar 26, 2013 1:17:52 PM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc 
SEVERE: The web application [/my_webapp] registered the JDBC driver [com.mysql.jdbc.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered. 
Mar 26, 2013 1:17:52 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads 
SEVERE: The web application [/my_webapp] appears to have started a thread named [MySQL Statement Cancellation Timer] but has failed to stop it. This is very likely to create a memory leak. 
```

第一个声称 DataSource 已被强制注销，这很好。然而这很奇怪，因为我已经像这样配置了销毁方法：

```
<bean name="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/mydb"/>
    <property name="username" value="root"/>
    <property name="password" value="password"/>
</bean> 
```

不知道为什么我得到第二个。关于“MySQL 语句取消计时器”的一个。

任何帮助表示赞赏

编辑1：我尝试了@Zelldon 建议的修复程序，它消除了第一个错误。但是`MySQL Statement Cancellation Timer`相关问题仍然存在

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-26T08:12:16.370

尝试将 sql 连接器/驱动程序放在 tomcat/lib 中，而不是在战争中。因为每次部署战争时都会创建连接器/驱动程序，有时垃圾收集器无法删除它们，这将导致内存泄漏。所以尝试移动tomcat/lib文件夹上的连接器。

请阅读以下答案：

[为什么 JDBC 驱动程序必须放在 TOMCAT_HOME/lib 文件夹中？](https://stackoverflow.com/questions/6981564/why-jdbc-driver-must-been-put-in-tomcat-home-lib-folder)

[如何配置Tomcat连接MySQL](https://stackoverflow.com/questions/3485177/how-to-configure-tomcat-6-0-with-mysql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:21:32.610

它可能与 MySQL jdbc 连接器中的这个错误有关：[http](http://bugs.mysql.com/bug.php?id=65909) ://bugs.mysql.com/bug.php?id=65909 。

您可以等待 MySQL 团队修复它，或者您尝试使用与 MySQL 配合良好的[Drizzle JDBC 连接器](http://www.drizzle.org/content/download)（您只需更改 url 连接中的参数），并且在我的测试中，没有这种的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-11T06:19:15.210

我遇到了和你一样的问题，我只是将mysql-connector-java的pom版本从8.0.16回滚到8.0.15，问题就解决了，我认为是connector和mysql版本不匹配导致问题

# asp.net - 在会员中添加评论

> ID：15632156
> 
> 赞同：0
> 
> 时间：2013-03-26T08:06:16.053
> 
> 标签：asp.net, asp.net-membership

我想在会员表中添加评论。
我在我的 .aspx 代码中添加了这个：

```
<asp:CreateUserWizard ID="Register" runat="server"  OnCreatedUser="RegisterUserWithRoles_CreatedUser">
        <CreateUserButtonStyle />
        <WizardSteps>
            <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server">
                <ContentTemplate> 
<table>
<td align="right">
                                <asp:Label ID="RoomLabel" runat="server" AssociatedControlID="Room">Room number:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="Room" runat="server"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="RoomRequired" runat="server" ControlToValidate="Room"
                                    ErrorMessage="Room number is required." ToolTip="Room number is required."
                                    ValidationGroup="Register">*</asp:RequiredFieldValidator>
                            </td>

... 
```

这是我的 aspx.cs 代码：

```
 protected void RegisterUserWithRoles_CreatedUser(object sender, EventArgs e)
        {
            TextBox comment=
              (TextBox)CreateUserWizardStep1.ContentTemplateContainer.FindControl("Comment");
            Membership.GetUser(Register.UserName).Comment = comment.Text ;
        }
    } 
```

如果我调试comment.Text =“我在我的文本框中输入的内容”
但是如果我查看成员资格表评论为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:43:38.667

我必须只使用 UpdateUser。
像这样：

```
TextBox comment=
              (TextBox)CreateUserWizardStep1.ContentTemplateContainer.FindControl("Comment");
            MembershipUser user = Membership.GetUser(Register.UserName);
            user.Comment = comment.Text; 
            Membership.UpdateUser(user); 
```

# c#-4.0 - 在所有派生类中调用一个特定的重写方法

> ID：15632158
> 
> 赞同：0
> 
> 时间：2013-03-26T08:06:33.543
> 
> 标签：c#-4.0, actor, derived-class, greenfoot

考虑以下代码：

```
// ======== Abstract class ========

public abstract class Creatures {

     public abstract void loseEnergy();

     public void execute()
     {
          loseEnergy();
     }

}

// ======== Animals ========

public class Animals : Creatures 
{
     public override void loseEnergy(){}
}

public class Birds : Animals 
{
     public override void loseEnergy(){}
}

// ======== Human ========

public class Human : Creatures 
{
     public override void loseEnergy(){}
}

public class Male : Human 
{
     public override void loseEnergy(){}
}

public class Female : Human 
{
     public override void loseEnergy(){}
} 
```

[此代码基于 Jayson 在此处建议的代码：[“基类方法调用派生类方法？”](http://social.msdn.microsoft.com/forums/en-US/csharplanguage/thread/4627bacf-4894-4b83-9868-7af5a417abf7) ]

在给定的代码示例中，我想让运行时执行每个派生类对象的某个方法，在这种情况下，它是“loseEnergy()”，但是，我找不到解决方案。

我该如何解决这个问题？为了解决这个问题，知道或尝试什么有用？

非常感激你的帮助！谢谢！

亲切的问候，塞加拉

PS到目前为止我所做的一些搜索：

*   [“如何在所有派生类中调用重写方法”](https://stackoverflow.com/questions/10304724/how-to-call-overriden-methods-in-all-derived-classes)
*   [“具有通用基类的派生类的集合”](https://stackoverflow.com/questions/13280108/collection-of-derived-classes-that-have-generic-base-class)
*   [“如何使用基类对象调用派生函数”](https://stackoverflow.com/questions/7103804/how-to-call-derived-function-using-base-class-object)
*   [“是否可以通过反射调用派生类的方法”](https://stackoverflow.com/questions/1762319/call-method-of-the-derived-class-through-reflection-possible-or-no)

**编辑：**

我决定坚持我之前的想法，即拥有一些列表，其中包含具有“loseEnergy()”方法的类的对象。有了这样的列表，我将能够调用每个对象的方法“loseEnergy()”，这正是我想要的。

问题可以关闭。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T13:26:29.607

在您在上面的帖子中提到的 Greenfoot 环境中，该`act()`方法仅在已添加到“世界”中的参与者上调用。在内部，这会将它们添加到列表中。模拟过程遍历列表并`act()`依次调用每个对象。系统不知道不在“世界中”的对象，因此不会调用它们的 act 方法。这里没有魔法。

如果您想要类似的行为但不手动将对象添加到列表中，您可以让基类构造函数将新对象添加到全局列表中。我不知道 C#，所以我不确切知道如何做到这一点，但我无法想象这会很困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:16:51.043

我真的不明白你的问题，但无论如何我可以尝试给你一些使用抽象类的方法：

*   如果你使用抽象方法，你应该在子类中重写它（就像在接口中声明的方法）

*   如果你想让所有继承的类使用相同的方法，你可以在抽象类中实现它；如果您不覆盖它，所有子类都将使用您实现的方法，您必须不在子类中声明它（扩展 < ABS_CLASS > 就足够了）

*   如果你想使用在子类中被覆盖的抽象类的方法，你可以使用关键字*super*。

我希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:32:17.553

如果你的意思是你想要调用：female.loseEnergy() -> human.loseEnergy() -> creative.loseEnergy()，在覆盖的第一行调用基本方法

```
public class Female : Human 
{
    public override void loseEnergy()
    {
        base.loseEnergy();
        // do stuff
    }
} 
```

# quickfix - QuickFIX：日志轮换功能

> ID：15632161
> 
> 赞同：3
> 
> 时间：2013-03-26T08:06:35.947
> 
> 标签：quickfix

看来 QuickFIX 没有日志轮换功能。有可能以某种方式做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:00:49.063

[这篇文章显示轮换可能是很久以前发布的。](http://old.nabble.com/Log-rotation-td16858177r0.html)可能不需要进行任何配置更改，也许您需要按照帖子中的说明自行实施。

[在这里它解释了不关闭引擎就无法旋转。](http://comments.gmane.org/gmane.comp.finance.quickfix.devel/3737)您的引擎将具有日志文件的旧挂钩，并且当它看到日志文件不存在时，可能会崩溃。在同一篇文章中，它解释了每天划分你的多个视野，一周中 7 次 7 次日志。当您不应该在一天中重新启动引擎时，应该是一种可行的方法。

# excel - 如何在一段时间后将NOW（）函数生成的时间戳更改为日期

> ID：15632162
> 
> 赞同：0
> 
> 时间：2013-03-26T08:06:41.000
> 
> 标签：excel, vba

我有一列在不同时间手动输入了非易失性时间函数 BNOW()。简单地说，比如在 col A

```
A1=BNOW()       it's value=3/25/2013 10:00:23

A2=BNOW()       it's value=3/25/2013 10:03:09 
```

我希望 A1 和 A2 的值仅在每个原始时间戳后 10 分钟更改为日期（即 2013 年 3 月 25 日）。我应该如何在 VBA 中编码？

我想要的是让 Excel 使用 BNOW() 监视每个单元格，并分别在每个时间值后 10 分钟自动将值更改为日期。

PS：BNOW() 是 Excel NOW() 的非易失性用户定义函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:11:37.173

您可以在工作表更改事件中使用 Application.Ontime 来调用将更改单元格的子：

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Target.Cells.Count = 1 Then

    If Target.Formula = "=NOW()" Then
        Application.OnTime Now() + TimeValue("00:00:02"), "'DoIt """ & Target.Parent.Name & "!" & Target.Address & """'"
    End If

End If

End Sub 
```

更改单元格的 sub 可能如下所示：

```
Public Sub DoIt(t As String)

Application.EnableEvents = False
Range(t).NumberFormat = "General"
Range(t).Value = Format(Range(t).Value, "m/dd/yyyy")
Application.EnableEvents = True

End Sub 
```

这个 sub 必须在代码模块中，而不是在工作表的类模块中。此外，由于通过 Application.Ontime 使用参数调用 subs 的限制，我认为工作表名称不能包含空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:36:12.823

您可以使用 NumberFORMAT 属性在 VBA 中执行此操作：

```
cell.NumberFormat="dd/mm/yy;@" 
```

这不会改变值，只会改变它作为文本呈现的方式。

此外，您可以将值更改为文本字符串：

```
activecell.Value=day(activecell) & "/" & month(activecell) & "/" & year(activecell) 
```

但是，最好的选择是使用 Excel 格式/条件格式

希望这可以帮助

菲利普

# asp.net - 我可以访问 global.asax 中的 Session 变量值吗？

> ID：15632166
> 
> 赞同：2
> 
> 时间：2013-03-26T08:06:51.313
> 
> 标签：asp.net, vb.net, session, global-asax

我想获取文件中的`session`值`global.asax`，是否有可能，如果可以，请问如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:08:34.417

试试这个

```
if (HttpContext.Current != null &&
    HttpContext.Current.Session != null) {
  var data= HttpContext.Current.Session["sessionvariablename"];
} 
```

另请检查：[如何访问 global.asax 文件中的会话变量](http://forums.asp.net/t/1661936.aspx/1)

# wpf - VirtualizingStackPanel 在 ListView 的 ItemPanel 中运行良好。但不是简单的 StackPanel

> ID：15632168
> 
> 赞同：1
> 
> 时间：2013-03-26T08:06:53.543
> 
> 标签：wpf, xaml, wpf-4.0

我只想在 ListView 中显示项目，如 Windows 资源管理器（大图标）。同样，我使用了下面的代码。

```
 <ListView Name="lstView" ItemsSource="{Binding MovieList}"  > 

        <ListView.ItemsPanel>
            <ItemsPanelTemplate>

                <!-- <VirtualizingStackPanel/> -->      <!-- Working Fine -->

                <StackPanel/>                           <!-- Items are not displayed -->
                                                        <!-- It must be wrap panel -->
                                                        <!-- OK, lets see with simple -->
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>

        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <Label Content="{Binding Path}" />
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>

    </ListView> 
```

在上面的代码中，如果我使用 VirtualizingStackPanel，那么项目会显示得很好，但是我不想要一个一个。如果我使用 StackPanel，项目不会显示在屏幕上，即使项目也不会添加到 StackPanel。我检查了 Snoop 工具。我应该使用 StackPanel 的 WrapPanel 来列出项目，但让我们看看简单的 StackPanel。

为什么项目没有显示在 StackPanel 中？基本上我想列出像 WindowExplorer 大图标视图这样的项目。

我正在使用 .NET 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T06:48:33.333

我在我的代码中尝试了同样的事情，它工作正常。只要 ItemsControl 的视口大小受到限制，虚拟化就可以工作。只需尝试替换下面给出的代码：

```
 <ListView ItemsSource="{Binding Movies}" Width="400" HorizontalAlignment="Left" >
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel VirtualizingPanel.IsVirtualizing="True" />
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Vertical">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Year}" FontSize="12" Margin="10,0,0,0"/>
                        <TextBlock Text="{Binding Name}" FontSize="12" Margin="10,0,0,0"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Category}" FontSize="12" Margin="10,0,0,0"/>
                        <TextBlock Text="{Binding Director}" FontSize="12" Margin="10,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView> 
```

# c# - 解析文本并保存在内存中c#

> ID：15632181
> 
> 赞同：2
> 
> 时间：2013-03-26T08:07:45.933
> 
> 标签：c#, string

我有这样的文字

```
 5     1     5     1     5      1     5      1       
       1 
```

我必须得到

```
 5     1     5     1     5      1     5      1       
 0     1     0     0     0      0     0      0 
```

并将其保存在内存中。但是当我使用这样的构造时：

```
List<string> lines=File.ReadLines(fileName);
foreach (string line in lines)
        {
            var words = line.Split( new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);

            foreach(string w in words)
                Console.Write("{0,6}", w);

            // filling out
            for (int i = words.Length; i < 8; i++)
                Console.Write("{0,6}", "0.");

            Console.WriteLine();
        } 
```

我只在显示器上以所需格式打印文本。我怎样才能保存它`List<string> newLines`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:22:52.957

如果我们假设数据是等间距的（如您当前`Write`等所建议的那样，那么我会将其处理为*字符*：

```
char[] chars = new char[49];
foreach(string line in File.ReadLines(path))
{
    // copy in the data and pad with spaces
    line.CopyTo(0, chars, 0, Math.Min(line.Length,chars.Length));
    for (int i = line.Length; i < chars.Length; i++)
        chars[i] = ' ';
    // check every 6th character - if space replace with zero
    for (int i = 1; i < chars.Length; i += 6) if (chars[i] == ' ')
        chars[i] = '0';
    Console.WriteLine(chars);
} 
```

或者，如果您真的需要它作为行，请使用（在每次循环迭代结束时）：

```
list.Add(new string(chars)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:55:05.977

您可以使用此代码来产生您想要的结果：

```
StreamReader sr = new StreamReader("test.txt");
            string s;
            string resultText = "";
            while ((s = sr.ReadLine()) != null)
            {
                string text = s;
                string[] splitedText = text.Split('\t');
                for (int i = 0; i < splitedText.Length; i++)
                {
                    if (splitedText[i] == "")
                    {
                        resultText += "0 \t";
                    }
                    else
                    {
                        resultText += splitedText[i] + " \t";
                    }
                }
                resultText += "\n";
            }
            Console.WriteLine(resultText); 
```

“test.txt”是包含您的文本的文本文件，“resultText”变量包含您想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:40:02.687

我假设数字之间正好有 5 个空格。所以这里是代码：

```
List<string> lines = System.IO.File.ReadLines(fileName).ToList();
List<string> output = new List<string>();

foreach (string line in lines)
{
    var words = 
        line.Split(new string[] { new string(' ', 5) },
                   StringSplitOptions.None).Select(input => input.Trim()).ToArray();

    Array.Resize(ref words, 8);

    words = words.Select(
                input => string.IsNullOrEmpty(input) ? "  " : input).ToArray();

    output.Add(string.Join(new string(' ', 5), words));
}

//output:
// 5     1     5     1     5      1     5      1       
// 0     1     0     0     0      0     0      0 
```

# vb.net - 用于读写的 VBA 文本文件输入

> ID：15632182
> 
> 赞同：0
> 
> 时间：2013-03-26T08:07:47.143
> 
> 标签：vb.net, visual-studio-2010

我正在用带有一个按钮的表单在 VB 2010 中编写，这完全是白痴。我已经有一段时间没有做过 VB 了，并且注意到 2010 年与我几年前做的相比有很多变化。

我需要做的是从文件中读取并在写入原始文件时写入两个新的单独文件。它将从文本文件中读取以获取一些内容并比较当前日期。

文本内容将是连续的，接下来的两列将是日期。

```
 Dim iFileName As New StreamReader("G:\SAP In and Out\test.txt", False)
    Dim sFileExport As New StreamWriter(DateValue(Now)) + " SAP Export", False)
    Dim sFileImport As New StreamWriter(DateAdd(DateInterval.Day, 10, DateValue(Now)) + " SAP Import", False)

    Dim VTS As String 'Will be used to grab the VT serial
    Dim CurrentDate As Date 'Will be used to compare to grabbed dates
    Dim NextDateOut As Date 'Will be used to grab next date out value
    Dim NextDateIn As Date 'Will be used to grab next date in value

    'Setting a consistant value with daily'
    CurrentDate = DateValue(Now)

    Do While Not EOF(1)

        Input(iFileName),VTS,NextDateOut,NextDateIn

        If CurrentDate = NextDateOut Then

            'Write to the export File
            sFileExport.write(VTS)

            'Write under the just read line in the open file
            iFileName.write(/newline + VTS + /TAB + (DateAdd(DateInterval.Day, 20, DateValue(Now)) + /tab + (DateAdd(DateInterval.Day, 30, DateValue(Now)))

        ElseIf CurrentDate = NextDateIn Then

            'Write to import file
            sFileImport.Write(VTS)

        End If

    Loop

End Sub 
```

但是我的语法关闭了，而且显然没有运行，因为我正在寻求帮助。请提前帮助和感谢。我已经为此工作了几个小时，还没有任何积极的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T18:39:29.157

好吧，我认为它现在，但我必须添加一个额外的功能，以便我可以测试它。我收到日期格式错误，因为我希望您使用美国日期格式 (MM/DD/YYYY) 而我使用英国日期格式 (DD/MM/YYYY)。

无论如何，您可以删除该功能，因为我认为您不需要它，但是无论如何我都将其保留了，因此您可以看到发生的事情非常不言自明，并且只需在日期格式之间进行转换，尽管它变得更加困难您的日期和月份不是两位数（没有前导零）。

我希望它可以帮助您指出正确的方向，并且您可以根据自己的喜好进行修改和更改。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

    Dim iFileName As New System.IO.StreamReader("c:\temp\vttest.txt", False)
    Dim iReadData As List(Of String)
    Dim Buffer As String

    'Read complete file into array
    iReadData = New List(Of String)
    Do While Not iFileName.EndOfStream()
        Try
            Buffer = ""
            Buffer = iFileName.ReadLine()
            iReadData.Add(Buffer)
        Catch ex As Exception
            'error or end of file
        End Try
    Loop
    iFileName.Close()

    'Not needed
    'Dim VTS As String              'This is in iLineData(0) after we split the line
    'Dim NextDateOut As Date    'This is in iLineData(1) after we split the line
    'Dim NextDateIn As Date     'This is in iLineData(2) after we split the line

    'Process
    Dim iFileUpdated As New System.IO.StreamWriter("c:\temp\vttest_copy.txt", True)
    Dim sFileExport As New System.IO.StreamWriter("c:\temp\vttest" & Replace(DateValue(Now), "/", "_") & " SAP Export.txt", True)
    Dim sFileImport As New System.IO.StreamWriter("c:\temp\vttest" & Replace(DateAdd(DateInterval.Day, 10, DateValue(Now)), "/", "_") + " SAP Import.txt", True)
    Dim iLineData() As String

    'Setting a consistant value with daily'
    Dim CurrentDate As Date = DateValue(Now)
    Dim RowId = 0
    Do While RowId < iReadData.Count()
        iLineData = Split(iReadData(RowId), " ")
        iFileUpdated.WriteLine(iLineData(0) & " " & iLineData(1) & " " & iLineData(2))
        If CurrentDate = FormatDate(iLineData(1), "US", "UK") Then
            'Write to the export File
            sFileExport.WriteLine(iLineData(0))
            'Write under the just read line in the open file
            iFileUpdated.WriteLine(iLineData(0) & " " & (DateAdd(DateInterval.Day, 20, DateValue(Now))) & " " & (DateAdd(DateInterval.Day, 30, DateValue(Now))))
        ElseIf CurrentDate = FormatDate(iLineData(2), "US", "UK") Then
            'Write to import file
            sFileImport.WriteLine(iLineData(0))
        End If
        RowId = RowId + 1
    Loop
    sFileExport.Close()
    sFileImport.Close()
    iFileUpdated.Close()
    MsgBox("Finshed")
End Sub

'This section added because my PC is set to DD/MM/YYYY (UK)
'Expect yours is set to  MM/DD/YYYY (US)
Function FormatDate(ThisDate As String, ThisFormat As String, ThisTargetFormat As String) As Date
    Dim X As Integer = 0
    Dim Day1 As Integer = 0
    Dim Month1 As Integer = 0
    Dim Year1 As Integer = 0
    Dim Buf As String = ""
    If ThisFormat = "US" Then
        For X = 1 To Len(ThisDate)
            If Mid(ThisDate, X, 1) = "/" Then
                If Month1 > 0 Then
                    Day1 = Buf
                    Buf = ""
                Else
                    Month1 = Buf
                    Buf = ""
                End If
            Else
                Buf = Buf & Mid(ThisDate, X, 1)
            End If
        Next
        Year1 = Buf
    Else
        For X = 1 To Len(ThisDate)
            If Mid(ThisDate, X, 1) = "/" Then
                If Day1 > 0 Then
                    Month1 = Buf
                    Buf = ""
                Else
                    Day1 = Buf
                    Buf = ""
                End If
            Else
                Buf = Buf & Mid(ThisDate, X, 1)
            End If
        Next
        Year1 = Buf
    End If
    'reformat for output
    If ThisFormat = "US" Then
        If ThisTargetFormat = "US" Then
            'USA
            FormatDate = (Format(Month1, "00") & "/" & Format(Day1, "00") & "/" & Format(Year1, "0000"))
        Else
            'UK
            FormatDate = (Format(Day1, "00") & "/" & Format(Month1, "00") & "/" & Format(Year1, "0000"))
        End If
    Else
        If ThisTargetFormat = "US" Then
            'USA
            FormatDate = (Format(Month1, "00") & "/" & Format(Day1, "00") & "/" & Format(Year1, "0000"))
        Else
            'UK
            FormatDate = (Format(Day1, "00") & "/" & Format(Month1, "00") & "/" & Format(Year1, "0000"))
        End If
    End If

End Function 
```

此外，我更改了文件名，以免覆盖现有文件（所以我可以比较这两个文件）。

大多数问题是由 FILENAMES 中日期中的反斜杠引起的 - 使 pc 寻找像 /3/12 这样的路径，我猜它正在将斜杠转换为文件夹分隔符，所以我用 UNDERSCORES 替换它们。

根据您的喜好编辑代码后，您可以覆盖现有文件而不是生成 _copy.txt，因为这就是我在示例中使用 _copy.txt 进行测试的方式。

# 更新

感谢您的反馈。很奇怪，您的（生成的）文件是空的，因为在我拥有的文件中，一个有数据，另一个是空的。这使我假设您的调整可能与此有关？

供您参考，我在下面发布了它们。

**原始文件 [VTSTEST.TXT]**

```
VT1000 3/26/2013 4/5/2013
VT1100 3/26/2013 4/5/2013
VT2000 3/27/2013 4/6/2013
VT2200 3/27/2013 4/6/2013 
```

**VTSTEST.TXT 的副本（修改后）**

```
VT1000 3/26/2013 4/5/2013
VT1100 3/26/2013 4/5/2013
VT2000 3/27/2013 4/6/2013
VT2000 16/04/2013 26/04/2013
VT2200 3/27/2013 4/6/2013
VT2200 16/04/2013 26/04/2013 
```

注意：我希望两行较长的行是插入现有四行文本之间的行

**VTTEST06_04_2013 SAP Import.Txt**

这个文件是空的

**VTTEST27_03_2013 SAP 导出.TXT**

```
VT2000
VT2000 
```

# asp.net-mvc - 使某些控制器和操作的 url 更短

> ID：15632186
> 
> 赞同：0
> 
> 时间：2013-03-26T08:08:09.660
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我想让我的 asp.net MVC4 应用程序的一些 url 更短。例如我有`Account`控制器和这样的动作`ForgotPassword`。网址看起来像这样

```
http://www.mydomain.com/account/forgotpassword 
```

我想在不重命名实际控制器和操作名称的情况下缩短 url（下面的示例）。最好的方法是什么？

```
http://www.mydomain.com/a/fp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:13:40.953

您可以注册一个简单的路线：

```
routes.MapRoute(
   name: "ForgottenPassword",
   url: "a/fp",
   defaults: new { controller = "Account", action = "ForgottenPassword" }
); 
```

...如果您使用的是 MVC4，请在 RouteConfig.cs 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:17:05.893

如果我没记错的话，那么您在谈论友好的 URL 吗？

请看@ [quysnhat.wordpress.com](http://quysnhat.wordpress.com/2012/03/14/seo-friendly-urls-in-asp-net-mvc/)

[Hanselman 的网站上](http://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx)有一篇非常好的帖子。

此外，与友好网址相关的问题很少（如果它对您有帮助）：-

[如何在 ASP.NET MVC 中创建友好的 URL？](https://stackoverflow.com/questions/217960/how-can-i-create-a-friendly-url-in-asp-net-mvc)

[http://www.intrepidstudios.com/blog/2009/2/10/function-to-generate-a-url-friendly-string.aspx](http://www.intrepidstudios.com/blog/2009/2/10/function-to-generate-a-url-friendly-string.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:02:12.983

最简单但不是最好的方法是手动编码您的自定义路线：

```
routes.MapRoute(
    name: "AccountForgotRoute",
    url: "a/fp/{id}",
    defaults: new { controller = "Account", action = "ForgotPassword", id = UrlParameter.Optional }        
); 
```

不利的一面是，如果您将拥有大量控制器和操作方法，并且您希望所有这些都被“缩短”，那么您将不得不编写大量路由。

一种替代方法是在数据库中定义您的自定义路由并将其写入文件。因此，例如，您在数据库行中`accountcontroller-forgotpassword`有一个值为 的键`a/fp`，您可以动态构建路由定义，将其写入文件并让您的应用程序获取它。您的应用程序如何获取路由定义可以这样[完成](http://haacked.com/archive/2010/01/17/editable-routes.aspx)。该链接仍然适用于 MVC 4。但是这个链接真的很乱，IMO，但它是一个替代方案。

# git - 如何将本地文件夹与远程仓库同步

> ID：15632187
> 
> 赞同：0
> 
> 时间：2013-03-26T08:08:16.003
> 
> 标签：git

删除文件后，我提交并推送了本地存储库，但无法与远程存储库同步，我删除的文件仍然是远程存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:16:26.560

如果您从本地存储库中删除了文件，则提交删除：

```
git commit -a -m "A file was deleted" 
```

并将您的提交推送到远程：

```
git push 
```

这也应该从本地仓库中删除远程仓库中的文件。

# installation - 如何将文件的内容加载到 NSIS 中的变量/定义中？

> ID：15632188
> 
> 赞同：5
> 
> 时间：2013-03-26T08:08:22.477
> 
> 标签：installation, nsis

我有一个文件“releaseVersionNumber.txt”，我在构建过程中阅读了该文件；目前它为我的 Mac 版本读取，但我想在我的 Windows NSIS 版本中读取它以减少编辑位置的数量（重复是邪恶的）......

所以我试图替换：

```
!define VERSION 1.2.3 
```

有类似的东西

```
FileOpen $4 "..\releaseVersionNumber.txt" r
FileRead $4 $1
FileClose $4
!define VERSION ${1} 
```

但是我得到一个错误**命令 FileOpen 在 Section 或 Function 之外无效**。将它包装在一个函数中，我会**在 Section 或 Function 之外生成无效的命令调用，**因此我似乎无法在安装程序设置中执行此操作，只能在运行时执行此操作。

有没有办法实现我所追求的？！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T09:07:41.657

所有以[compile time commands](http://nsis.sourceforge.net/Docs/Chapter5.html)`!`开头的命令，因此它们在编译时处理，远在程序运行之前。

*   您可以尝试声明`VERSION`为**变量**而不是定义：

    ```
    Var VERSION
    FileOpen $4 "..\releaseVersionNumber.txt" r
    FileRead $4 $VERSION
    FileClose $4 
    ```

*   如果您需要`VERSION`定义，那么您可以尝试[!define](http://nsis.sourceforge.net/Docs/Chapter5.html#5.4.1)`/file`中的参数。

    ```
    !define /file VERSION "..\releaseVersionNumber.txt" 
    ```

*   我喜欢有一个`version.nsh`只有定义的文件：

    ```
    !define VERSION "2013-03-25:16:23:50" 
    ```

    然后，我将其包括在内：

    ```
    !include /NONFATAL version.nsh
    # Default value in case no version.nsh is present
    !ifndef VERSION
        !define /date VERSION "%Y-%m-%d %H:%M:%S"
    !endif 
    ```

# asp.net - 始终在发布模式下运行单元测试

> ID：15632191
> 
> 赞同：2
> 
> 时间：2013-03-26T08:08:26.503
> 
> 标签：asp.net, unit-testing, configuration

我有一个方法，其中包含在发布模式和调试模式之间变化的逻辑。它根本不是高级的，但我仍然想要对其进行单元测试，因为我的应用程序将在更大的范围内使用，如果它未在发布模式下使用，我想将用户重定向到其他站点。

现在我的问题是，有没有办法强制单元测试在发布模式下运行？我不想每次运行单元测试时都手动更改构建配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:24:00.853

您可以创建一个测试接缝，而不是在发布模式下运行单元测试，这样您就可以控制要引发的行为。您可能可以这样做：

```
public class Foo {

    public int Bar() {
      if (IsDebugModeEnabled()) {
        return 1;
      } else {
        return 0;
      }
    }

    public boolean IsDebugModeEnabled() {
      #if DEBUG
      return true;
      #else
      return false;
      #endif
    }   
} 
```

这样你就有几个选项来测试你的逻辑的两条路径。您可以创建一个子类`Foo`并覆盖`IsDebugModeEnabled`或使用部分模拟来直接设置返回值。

# wpf - WPF Microsoft Charting 带误差线的折线图

> ID：15632192
> 
> 赞同：1
> 
> 时间：2013-03-26T08:08:29.787
> 
> 标签：wpf, charts

有谁知道我如何添加这样的错误栏： [http ://www.officetooltips.com/images/tips/83_3/1.png](http://www.officetooltips.com/images/tips/83_3/1.png)

使用 Microsoft WPF 图表工具包？你能给我一个简单的代码示例吗？

我在这里找到了一些信息，但似乎无法利用这些信息：http: [//msdn.microsoft.com/en-us/library/dd456729.aspx](http://msdn.microsoft.com/en-us/library/dd456729.aspx)

希望有人可以帮助提前非常感谢。

# c++ - c++11 #include 给出编译错误

> ID：15632198
> 
> 赞同：2
> 
> 时间：2013-03-26T08:09:00.243
> 
> 标签：c++, compiler-errors, g++, pthreads

尝试从已编译的源文件创建目标文件时出现编译错误。我正在使用 c++11 附带的标头。我还在使用带有其他几个包含的 c++ 模式识别库。

我所做的只是添加`#include <thread>`到我的 rbm_test.cc 源文件中。

我的编译命令：

> g++ -std=c++11 -O3 -DQUIET -fPIC -pthread -ansi -pedantic -DARCH_INTEL -Wall -W -Wchar-subscripts -Wpointer-arith -Wcast-qual -Wwrite-strings -Wconversion -Wno-old-style -cast -Wctor-dtor-privacy -Wnon-virtual-dtor -I../src -I../.. -DPATREC -D_ *UNIX* _ -o rbm_test.o -c ../src/rbm_test.cc

我得到的编译错误是：

> 错误：#error 此文件需要对 ISO C++ 2011 标准的编译器和库支持。此支持目前是实验性的，必须使用 -std=c++11 或 -std=gnu++11 编译器选项启用。

奇怪的是，当我编译以下代码示例时

> g++ -std=c++11 -pthread -c main.cpp -o main.o

那么我没有错误。

这是`main.cpp`

```
#include <iostream>
#include <thread>

void f1()
{
  std::cout << "Thread  executing\n";
}

int main()
{
    std::thread t1(f1);
    std::thread t2(f1);
    t1.join();
    t2.join();
} 
```

当我尝试编译 rbm_test.cc 时，某些编译标志是否可能发生冲突？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T08:14:09.733

-`ansi`标志与标志冲突`-std=c++11`。`-ansi`相当于`-std=c++98`。删除`-ansi`标志可以解决问题。

# java - 三角函数需要一些库吗

> ID：15632199
> 
> 赞同：-2
> 
> 时间：2013-03-26T08:09:03.757
> 
> 标签：java

我正在尝试运行此代码，但没有得到任何结果..代码或我的编译器有问题吗？有人可以指出我在java上还是新手吗

```
public class MathTrigonometricExample {
    public static void main(String[] args) {
        double radians = 45.0;

        double sine = Math.sin(radians);
        System.out.println("The Sin of " + radians + " = " + sine);

        double cosine = Math.cos(radians);
        System.out.println("The Cos of " + radians + " = " + cosine);

        double tan = Math.tan(radians);
        System.out.println("The Tan of " + radians + " = " + tan);

        double asine = Math.asin(sine);
        System.out.println("Arcsine of " + sine + " = " + asine);

        double acosine = Math.acos(cosine);
        System.out.println("Arccosine of " + cosine + " = " + acosine);

        double atan = Math.atan(tan);
        System.out.println("Arctangent of " + tan + " = " + atan);

        double sinh = Math.sinh(radians);
        System.out.println("hyperbolic sine of " + radians + " = " + sinh);

        double cosh = Math.cosh(radians);
        System.out.println("hyperbolic cos of " + radians + " = " + cosh);

        double tanh = Math.tanh(radians);
        System.out.println("hyperbolic tan of " + radians + " = " + tanh);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:16:45.297

它编译并正确运行。您确定您已将源文件保存为“MathTrigonometricExample.java”吗？

如果是，你确定你的目标是正确的运行路径吗？（到 .class 文件所在的位置）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:14:46.830

tri 函数采用弧度，而不是度数。45.0 看起来像度数，而`Math.PI/4`看起来像弧度。

答案是，只要您使用弧度，您就可以使用内置库。如果您需要将度数转换为弧度，您可以使用以下方法。

```
double degress = 45.0;
double radians = degress * Math.PI / 180; 
```

> 线程中的异常“main java.lang.noclssdeffounderror：mathtrygonometric 示例（错误名称：cin/java/connect/math/mathtrigonometricexample）

这表明您正在尝试运行错误的类名。在提出问题时，值得包括所有相关的错误消息，因为我们无法读懂您的想法。;)

我建议您使用 IDE，因为这将使程序的编辑、编译和运行更加容易。

# opengl - OpenGL中的CubeMap根本不显示

> ID：15632201
> 
> 赞同：1
> 
> 时间：2013-03-26T08:09:07.603
> 
> 标签：opengl, textures

我试图在OpenGL中简单地加载6张图片作为立方体的纹理。Blow 是加载代码：

```
glTexParameteri(GL_TEXTURE_CUBE_MAP_ARB, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_CUBE_MAP_ARB, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);

glTexParameteri(GL_TEXTURE_CUBE_MAP_ARB, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_CUBE_MAP_ARB, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_CUBE_MAP_ARB, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);

for (int i = 0;i < 6;++i)
{
    int width, height, channel;
    unsigned char* img = SOIL_load_image(skybox[i].c_str(), &width, &height, &channel, SOIL_LOAD_AUTO);
    glTexImage2D(cubeTarget[i], 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, img);
    delete img;
}

glEnable(GL_TEXTURE_CUBE_MAP_ARB); 
```

渲染代码通过。奇怪的是渲染的立方体是白色的。似乎根本没有加载纹理。我更改了加载代码以查看 2D 纹理是否可以工作：

```
glGenTextures(1, texture);
glBindTexture(GL_TEXTURE_2D, texture[0]);
int width, height, channel;
unsigned char* img = SOIL_load_image(skybox[0].c_str(), &width, &height, &channel, SOIL_LOAD_AUTO);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, img);
delete img;

if(texture[0] == 0) return false;

glBindTexture(GL_TEXTURE_2D, texture[0]);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

glEnable(GL_TEXTURE_2D); 
```

结果是我毕竟能看到纹理，不管纹理坐标造成的分布多么奇怪。我收集了以下信息：

1.  我用于加载图像的库运行良好；

2.  立方体贴图的设置来自SuperBibble第9章。几乎相同的代码在我编译本书的代码时可以正常工作。

顺便说一句，有人对加载图像库有什么建议吗？我用的那个好像很久没更新了。。。

*附加：我现在发现的是，如果我尝试只加载一个 img 作为所有天空盒面的纹理，它将显示出来。只要使用变量替换特定值，就不会显示任何内容。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T03:11:49.720

最后我想通了。这是因为最后一张图片的**分辨率**与其他图片不同。

真的有点浪费很多时间。

# javascript - javascript：window.document 返回 null

> ID：15632202
> 
> 赞同：0
> 
> 时间：2013-03-26T08:09:08.993
> 
> 标签：javascript

我有一个名为“welcome.html”的 HTML 文档，它使用了一个引用“main.html”的 iframe。在“inner.html”文件中，另一个 iframe 用于引用“inner.html”。现在在“inner.html”内部，我想访问 / 的元素或在 main.html 的元素之间进行通信。我在javascript中使用了以下方法，

方法一：

```
..
..
var top_window = window.top;
alert(top_window)    // gives top window object
var main_window = top_window.frames['main-frame'] // assuming that 'main-frame' is the name given at the iframe declaration for 'main.html'
alert(main_window)    // gives main window object
var main_document = main_window.document
alert(main_document)    // gives 'undefined'
..
.. 
```

方法二：

```
..
..
var parent_window = window.parent;
alert(parent_window)    // gives parent window object, that is, 'main.html' window object
var parent_document = parent_window.document
alert(parent_document)    // gives 'null'
..
.. 
```

我想要'main.html'窗口对象的文档对象。我的两种方法都行不通。是否有任何合理的解决方案，或者我是否以错误的方式进行操作？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:30:45.693

在 iframe 之间进行通信的最简单方法是获取窗口对象。在父子对象中创建一个 getter setter 函数，并在两个窗口对象之间传递值。

这将返回 iframe 的窗口对象

```
var contentWindow = document.getElementbyId('iframe').contentWindow 
```

从 iframe 使用访问父窗口`window.parent`

# android - 偏好项目被自动重新设置？

> ID：15632215
> 
> 赞同：11
> 
> 时间：2013-03-26T08:10:28.683
> 
> 标签：android, sharedpreferences, fragment

这对我来说似乎是一个错误：当您在首选项片段中加载许多开关首选项时，当您滚动首选项时，它们会以某种方式重新设置自己。我已经用很少的演示代码单独测试了这个：

* * *

`/res/xml/prefs.xml`（只是一堆切换首选项，足以让首选项在屏幕上滚动）：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" android:key="my_prefs">
    <PreferenceCategory android:key="my_prefs_cat" android:title="Settings">
        <SwitchPreference android:key="p1" android:title="p1" android:defaultValue="false" />
        <SwitchPreference android:key="p2" android:title="p2" android:defaultValue="false" />
        <SwitchPreference android:key="p3" android:title="p3" android:defaultValue="false" />
        <SwitchPreference android:key="p4" android:title="p4" android:defaultValue="false" />
        <SwitchPreference android:key="p5" android:title="p5" android:defaultValue="false" />
        <SwitchPreference android:key="p6" android:title="p6" android:defaultValue="false" />
        <SwitchPreference android:key="p7" android:title="p7" android:defaultValue="false" />
        <SwitchPreference android:key="p8" android:title="p8" android:defaultValue="false" />
        <SwitchPreference android:key="p9" android:title="p9" android:defaultValue="false" />
        <SwitchPreference android:key="p10" android:title="p10" android:defaultValue="false" />
    </PreferenceCategory>
</PreferenceScreen> 
```

* * *

`/src/Prefs.java`（一个简单的`PreferenceFragment`）：

```
package com.example.preflistbug;

import android.os.Bundle;
import android.preference.PreferenceFragment;

public class Prefs extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);
    }

} 
```

* * *

`/res/layout/main.xml`（放置`PreferenceFragment`在活动布局中）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <fragment android:name="com.example.preflistbug.Prefs" 
        android:id="@+id/frg_prefs"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        />
</LinearLayout> 
```

* * *

`/src/MyActivity.java`（演示活动）：

```
package com.example.preflistbug;

import android.app.Activity;
import android.os.Bundle;

public class MyActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

* * *

**问题：**如果您更改第一个开关首选项，向下滚动，向上滚动，开关将被重置。对于滚动到视图之外并稍后访问的其他开关首选项也是如此。（特别是水平方向）

也发生在模拟器上。我正在平台版本 15 ICS 上编译。正如您在上面的代码中看到的，这是一个非常简单的设置，我在这段代码中找不到任何东西，这可能解释了为什么会发生这种情况。

### 更新

错误报告为[问题 26194](http://code.google.com/p/android/issues/detail?id=26194)。

### 更新 2

它应该在 android L 版本中得到修复。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-01T13:07:34.843

我能够重现这个问题。我还找到了一种解决方法，但我不知道它为什么有效:)

像这样创建派生类`SwitchPreference`：

```
public class Pref extends SwitchPreference {
    public Pref(Context context) {
        super(context);
    }

    public Pref(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public Pref(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }    
} 
```

然后，不要在 prefs.xml 中使用这些：

```
<SwitchPreference ... /> 
```

您可以改用这些

```
<com.example.preflistbug.Pref ... /> 
```

推导似乎以某种方式解决了`ListView`-driven 首选项列表中的视图回收正在重用控件而不首先将它们从以前的`Preference`对象中“释放”出来的问题（或者我认为）。如果我想出更多，我会更新这个答案。

# c++ - 定义新的中缀运算符

> ID：15632217
> 
> 赞同：28
> 
> 时间：2013-03-26T08:10:41.033
> 
> 标签：c++, syntactic-sugar

因此，多亏了 C++11，现在可以结合宏、用户定义的文字、lambdas 等来创建最接近“语法糖”的东西。一个例子是

```
 if (A contains B) 
```

当然，这很容易。

```
cout <<("hello"_s contains "ello"_s)<<endl; 
```

表达式转换为布尔值，其中 contains 是一个自定义结构，它将左侧和右侧作为参数。结构当然会重载 operator+ 以首先获取自定义字符串文字，然后返回自身，然后是结构本身的 operator+。

```
struct contains_struct {
    string lhs;
    string rhs;
    void set_lhs(string lhs) { this->lhs = lhs; }
    void set_rhs(string rhs) { this->rhs = rhs; }
    operator bool() const {
        return string::npos != lhs.find(rhs);
    }
} contains_obj;

contains_struct& operator+(const string& lhs, const contains_struct& rhs) {
    contains_obj.set_lhs(lhs);
    return contains_obj;
}

contains_struct& operator+(const contains_struct& lhs, const string& rhs) {
    contains_obj.set_rhs(rhs);
    return contains_obj;
}

#define contains +contains_obj+ 
```

现在我决定我想走得更远。关于什么

```
(x in a) perform cube 
```

这不是列表理解，但它是一个很好的例子，对吧？一开始我说，好吧，我必须去stackoverflow询问自定义运算符的优先级，但是把它放在括号里是直截了当的，因为他们头脑正常的人不会使用我的代码。相反，我扩展了我的另一个示例并将“in”和“perform”作为自定义结构，就像“contains”一样。

您可以更进一步并对其进行模板化，以便 x 可以是任何数字索引，而 a 可以是任何容器，但为简单起见，我将 x 保留为整数，将 a 保留为整数向量。现在到目前为止，它实际上并没有将局部变量 x 作为参数，而是在 operator string() 函数中本地使用它。

为了简化事情，我将表达式的结果存储在一个字符串中，就像这样

```
operator string() const {
    string s = "";
    for (int x : lhs.rhs)
        s += to_string(rhs(x)) + string("\n");
    return s;
} 
```

* * *

感谢另一个问题：[类型推导的重载赋值运算符](https://stackoverflow.com/questions/15622958/overloading-assignment-operator-for-type-deduction)

我意识到将其作为作业返回的一个实际用途如下：

```
struct result_struct {
    vector<int> results;
    result_struct(vector<int> results) { this->results = results; }
};

...

    operator result_struct() const {
        vector<int> tmp;
        for (int x : lhs.rhs)
            tmp.push_back(rhs(x));
        return result_struct(tmp);
    }

...

result_struct result_2 = (x in a) perform cube;
    for (int x : result_2.results)
        cout <<x<<endl; 
```

* * *

感谢[milleniumbug的回答](https://stackoverflow.com/a/15703714/1508519)，我可以这样做：

```
struct for_obj
{
    int _lhs;
    std::vector<int> _rhs;
    for_obj(int lhs, std::vector<int> rhs)
        : _lhs(lhs), _rhs(rhs) { }
};

INFIX_OPERATOR(for_obj, in_op, int, std::vector<int>)
{
    return for_obj(lhs(), rhs());
}
#define in + in_op() +

INFIX_OPERATOR(int, perform_op, for_obj, std::function<int(int)>)
{
    for (int i = 0; i < lhs()._rhs.size(); i++)
        rhs()(lhs()._rhs[i]);
    return 0;
}
#define perform + perform_op() + 
```

有两个警告。首先，我返回一个 int 以便我可以将它分配给一个虚拟变量以使其执行。我总是可以做我以前做过的 result_struct 事情，或者返回一个 std::function 对象来自己调用它，但我会重复自己。另一个需要注意的是，由于宏中有很多 const，您不能修改 lhs（这不允许您指定迭代器）。

考虑到所有因素，以下工作按预期工作。

```
int x = 0;
std::vector<int> nums = { 1, 2, 3 };
auto cube = [] (int x)
{
    std::cout << x * x * x << std::endl;
    return x * x * x;  
};
int i = (x in nums) perform cube; 
```

* * *

**新版本**

```
class PerformObj {
    int counter;
public:
    PerformObj() : counter(0) { }
    ~PerformObj() { }
    InObj lhs;
    std::function<int(int)> rhs;

    operator int() const {
        return rhs(lhs.rhs[counter]);
    }
} performobj;

#define perform + performobj +

PerformObj& operator+(const InObj& lhs, PerformObj& rhs) {
    rhs.lhs = lhs;
    return rhs;
}

PerformObj& operator+(PerformObj& lhs, const std::function<int(int)>& rhs) {
    lhs.rhs = rhs;
    return lhs;
} 

int main()
{
    std::vector<int> nums = {1,2,3};
    int x = 0;

    auto cube = [] (int n) {
        return n * n * n;
    };

    std::cout << x in nums perform cube << std::endl;
}

explicit operator std::vector<int>() const {
    std::vector<int> temp;
    for (int i = 0; i < lhs.rhs.size(); i++) {
        temp.push_back(rhs(lhs.rhs[i]));
    }
    return temp;
}

int y = 0;
std::cout << y in static_cast<std::vector<int>>(x in nums perform cube) perform std::function<int(int)>([] (int i) -> int {
        return i;
}) << std::endl; 
```

* * *

我应该这样做，而不是中缀运算符，而是后缀运算符，比如`"String literal"s.contains "Other string literal"s`，或者它的功能风格，`"String literal"s.contains("Other string literal"s)`？

我将如何改进我的代码以使其更具可扩展性？就像现在一样，污染非常严重。有没有更好/更通用/不那么笨重的方法来做到这一点？例如，概括表达式以便我不需要定义语句或重用代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T12:57:35.927

假设最新的编辑包含所有问题，很难看出这里提出的问题是什么。

> 我应该这样做，而不是中缀运算符，而是后缀运算符，例如 "String literal"s.contains "Other string literal"s，或者使用函数样式，"String literal"s.contains("Other string literal" s）？

是的。`"String literal"s.contains("Other string literal"s)`是最好的方法 - 简洁，C++ 程序员清楚，其他语言的程序员清楚（Java 和 Python 字符串有方法），并且不使用模板魔术或宏魔术。

> 我将如何改进我的代码以使其更具可扩展性？就像现在一样，污染非常严重。有没有更好/更通用/不那么笨重的方法来做到这一点？例如，概括表达式以便我不需要定义语句或重用代码。

是的！但仅在一定程度上（在此处和此处删除了不必要的常量）：

```
#define INFIX_OPERATOR(rettype, name, LT, RT) \
struct name\
{\
private:\
    LT* left;\
    RT* right;\
\
protected:\
    LT& lhs() const { return *left; }\
    RT& rhs() const { return *right; }\
\
public: \
    friend name operator+(LT& lhs, name && op)\
    {\
        op.left = &lhs;\
        return op;\
    }\
\
    friend name operator+(name && op, RT& rhs)\
    {\
        op.right = &rhs;\
        return op;\
    }\
\
    name () : left(nullptr), right(nullptr) {}\
\
    operator rettype() const;\
};\
\
inline name :: operator rettype() const 
```

然后你可以像这样创建你的中缀运算符：

```
#include <iostream>
#include <string>

INFIX_OPERATOR(bool, contains_op, const std::string, const std::string)
{
    return std::string::npos != lhs().find(rhs());
}
#define contains + contains_op() +

int main()
{
    std::string a = "hello";
    std::string b = "hell";
    if(a contains b)
        std::cout << "YES";
} 
```

请注意，无法避免 #define contains 指令，因为无法使用另一个宏指令创建宏指令。

> 如果有的话，这样做的实际好处是什么（忽略将其用作现实世界代码的所有合理性。我的意思是，除非出于娱乐目的，否则您可以从它中得到什么？）说我的朋友，而不是学习 C++，想要一个简单的抽象接口来获得他的 Bash 或 Perl 经验，但希望在不求助于 gcc 外部编译/链接的情况下进行协作。这样，他可以编写 C++ 的“脚本”或“代码”，并编译并将其与我的程序/库/接口等链接。

您似乎正在尝试在另一种语言之上创建一种语言。准备

*   数小时试图测试你的语言。
*   令人尴尬的错误诊断消息。尝试编译这个：`std::vector<void> myarr;`¹然后用宏包装它。然后将其包装在另一个模板中。然后在另一个宏中......你明白了。
*   显示已处理代码的调试工具。
*   即使您的语言与自身完美集成，您仍然需要处理 C++，其中有大量规则和复杂的类型系统。[毕竟，所有的抽象都是有漏洞的。](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)

如果你的朋友想用 Perl 编程，就让他去做吧。这些语言很容易与 C 交互。

如果您正在尝试创建一种语言，因为其他语言无法清晰地表达您正在尝试做的事情，解析器生成器（Flex/Bison、ANTLR）和 LLVM 可以轻松实现。

如果创建解析器是多余的，请查看 D 语言 mixins。它们接受在编译时创建的字符串，然后像直接插入一样对其进行编译。

这里...

```
import std.stdio;
int main()
{
    mixin(`write("Hello world");`); //`contents` is a raw string literal
    return 0;                       //so is r"contents"
} 
```

相当于：

```
import std.stdio;
int main()
{
    write("Hello world");
    return 0;
} 
```

这只是一个简单的例子。你可以让你的函数解析一个字符串：

```
mixin(user1508519s_language(r"(x in a) perform cube")); 
```

¹ - 这是它的外观（gcc 4.7.2）：

```
In file included from c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/
c++/bits/stl_construct.h:63:0,
                 from c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/
c++/vector:63,
                 from #templateerrors2.cpp:1:
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/ext/alloc_traits.h
: In instantiation of 'struct __gnu_cxx::__alloc_traits<std::allocator<void> >':

c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
76:28:   required from 'struct std::_Vector_base<void, std::allocator<void> >'
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
208:11:   required from 'class std::vector<void>'
#templateerrors2.cpp:5:19:   required from here
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/ext/alloc_traits.h
:189:53: error: no type named 'reference' in 'class std::allocator<void>'
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/ext/alloc_traits.h
:190:53: error: no type named 'const_reference' in 'class std::allocator<void>'
In file included from c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/
c++/vector:65:0,
                 from #templateerrors2.cpp:1:
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
 In instantiation of 'class std::vector<void>':
#templateerrors2.cpp:5:19:   required from here
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
292:7: error: forming reference to void
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
467:7: error: forming reference to void
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
684:7: error: invalid parameter type 'std::vector<void>::value_type {aka void}'
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
684:7: error: in declaration 'void std::vector<_Tp, _Alloc>::resize(std::vector<
_Tp, _Alloc>::size_type, std::vector<_Tp, _Alloc>::value_type)'
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
881:7: error: forming reference to void
In file included from c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/
c++/vector:70:0,
                 from #templateerrors2.cpp:1:
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/vector.tcc:10
8:5: error: forming reference to void
In file included from c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/
c++/vector:65:0,
                 from #templateerrors2.cpp:1:
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
1003:7: error: forming reference to void
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
1179:7: error: forming reference to void
In file included from c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/
c++/vector:70:0,
                 from #templateerrors2.cpp:1:
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/vector.tcc:21
6:5: error: forming reference to void
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/vector.tcc:43
9:5: error: forming reference to void
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/vector.tcc:31
6:5: error: forming reference to void
In file included from c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/
c++/vector:65:0,
                 from #templateerrors2.cpp:1:
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
 In instantiation of 'std::_Vector_base<_Tp, _Alloc>::~_Vector_base() [with _Tp
= void; _Alloc = std::allocator<void>]':
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
247:15:   required from 'std::vector<_Tp, _Alloc>::vector() [with _Tp = void; _A
lloc = std::allocator<void>]'
#templateerrors2.cpp:5:19:   required from here
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
161:9: error: invalid use of 'void'
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
 In instantiation of 'void std::_Vector_base<_Tp, _Alloc>::_M_deallocate(std::_V
ector_base<_Tp, _Alloc>::pointer, std::size_t) [with _Tp = void; _Alloc = std::a
llocator<void>; std::_Vector_base<_Tp, _Alloc>::pointer = void*; std::size_t = u
nsigned int]':
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
161:9:   required from 'std::_Vector_base<_Tp, _Alloc>::~_Vector_base() [with _T
p = void; _Alloc = std::allocator<void>]'
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
247:15:   required from 'std::vector<_Tp, _Alloc>::vector() [with _Tp = void; _A
lloc = std::allocator<void>]'
#templateerrors2.cpp:5:19:   required from here
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
175:4: error: 'struct std::_Vector_base<void, std::allocator<void> >::_Vector_im
pl' has no member named 'deallocate'
In file included from c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/
c++/bits/stl_algobase.h:66:0,
                 from c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/
c++/vector:61,
                 from #templateerrors2.cpp:1:
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_iterator_
base_types.h: In instantiation of 'struct std::iterator_traits<void*>':
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_construct
.h:127:24:   required from 'void std::_Destroy(_ForwardIterator, _ForwardIterato
r) [with _ForwardIterator = void*]'
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_construct
.h:155:7:   required from 'void std::_Destroy(_ForwardIterator, _ForwardIterator
, std::allocator<_T2>&) [with _ForwardIterator = void*; _Tp = void]'
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_vector.h:
403:9:   required from 'std::vector<_Tp, _Alloc>::~vector() [with _Tp = void; _A
lloc = std::allocator<void>]'
#templateerrors2.cpp:5:19:   required from here
c:\__moje\prog\mingw\bin\../lib/gcc/mingw32/4.7.2/include/c++/bits/stl_iterator_
base_types.h:182:43: error: forming reference to void 
```

# ruby-on-rails - 查找或创建

> ID：15632226
> 
> 赞同：1
> 
> 时间：2013-03-26T08:11:12.380
> 
> 标签：ruby-on-rails, postgresql, activerecord

我已将以下 setter/getter 方法添加到我的模型中，但每当我尝试保存表单时，我都会收到有关质量分配的错误。据我了解，这应该是如何工作的，如果找不到对手名称，它将向数据库添加一个条目

```
def opponent_name
opponent.try(:name)
end

def opponent_name(name)
    self.opponent = Opponent.find_or_create_by_name(name) if name.present?
  end 
```

这是来自控制台日志的错误

```
 Started POST "/events" for 127.0.0.1 at 2013-03-26 19:07:26 +1100
Processing by EventsController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"h7OrLKeDL/9KmZeGZeO+QTWHtlUdOlaMqnoMGhYaDUU=", "event"=>{"datetime(3i)"=>"2", "datetime(2i)"=>"3", "datetime(1i)"=>"2013", "datetime(4i)"=>"00", "datetime(5i)"=>"00", "event"=>"1", "location_id"=>"7", "duration"=>"30", "arrival_time"=>"30", "opponent_name"=>"Test", "home_or_away"=>"Home"}, "commit"=>"Create Event"}
  User Load (0.9ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
Completed 500 Internal Server Error in 14ms

ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: opponent_name):
  app/controllers/application_controller.rb:22:in `catch_not_found' 
```

对手模型

```
class Opponent < ActiveRecord::Base
  has_many  :events
  belongs_to  :team

  attr_accessible :name, :team_id

  validates :name, :presence => true
end 
```

事件模型

```
class Event < ActiveRecord::Base
  include PublicActivity::Model
  tracked
  belongs_to :location
  belongs_to :opponent
  belongs_to :team
  belongs_to :result
  has_many :availabilities, :dependent => :destroy

  def opponent_name
    opponent.try(:name)
  end

  def opponent_name(name)
    self.opponent = Opponent.find_or_create_by_name(name) if name.present?
  end

  attr_accessible :location_id, :user_id, :datetime, :score_for, :score_against, :event,
                  :team_id, :home_or_away, :arrival_time, :duration, :selected_players, :date, :time, :result_id

  validates :event, :location_id, :team_id, :presence => true
  validates_numericality_of :team_id, :only_integer => true, :greater_than_or_equal_to =>0, :message => " needs to be set, please contact your Administrator"
  #validates_numericality_of :arrival_time, :only_integer =>true, :greater_than_or_equal_to =>0, :message => " must be greater than 0 minutes", :allow_blank => true
  validates :home_or_away, :presence => true, :if => :event == 1
  validates :score_for, :presence => true, :if => :score_against
  validates :score_against, :presence => true, :if => :score_for

  EVENT_TYPES = [['Game', 1], ['Training', 2], ['Social Event', 3]]
  HOME_OR_AWAY = [:Home, :Away]

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:16:09.543

看看[ActiveModel::MassAssignmentSecurity::ClassMethods](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)。

我相信你必须在你的对手模型中添加以下语句

```
attr_accessible :opponent_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:42:00.463

尝试放入您的**事件**模型

```
attr_accessible :opponent_name 
```

然后它应该清除错误

**编辑：**

只是更新一个答案，但所有学分都[归于 Mischa](https://stackoverflow.com/users/84631/mischa)进行此编辑。

> 问题可能是你定义了你的二传手 def

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T22:49:56.390

参考@Mischa

问题可能是你定义了你的二传手，比如def对手名称（名称），而它应该是def对手名称=（名称）。当您这样做并 attr_accessible :opponent_name 时，它​​可能会起作用。不知道为什么它在那条线上出错。似乎与错误无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:26:57.447

如果对手名称是模型数据库表中的一个字段，那么 Rails 已经为该属性定义了 getter 和 setter。您需要做的就是添加 attr_accessible :opponent_name

# c++ - “const name{something}”是什么意思？

> ID：15632228
> 
> 赞同：-5
> 
> 时间：2013-03-26T08:11:29.010
> 
> 标签：c++, syntax

我在代码中有以下结构：

```
const a{b(x,y)} 
```

`b`看起来像一个函数，但它是什么`a{}`意思？

**已编辑**

是的，它编译。是“C++ 初始化列表”吗？

**已编辑 2**

更准确地说，这是代码中的一行：

```
const abb::cfd lpm{dos::pre(ref<glm::pro>(inp, qvo)}; 
```

**已编辑 3**

第一个示例行不正确。`a`确实有类型。所以，它是“c++ 初始化列表”（不管它是什么意思）。现在我知道我应该用谷歌搜索和阅读什么了。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T08:14:49.657

由于`a`没有类型，这看起来像是无效代码。

如果`a`有一个类型，那么`{b(x,y)}`将是一个[C++ 11 初始化列表](http://en.wikipedia.org/wiki/C++11#Initializer_lists)：

```
int x, y;
int b(int,int) { return 0; }
const int a{b(x,y)}; 
```

**编辑：**关于您的实际代码，是的，`{dos::pre(ref<glm::pro>(inp), qvo)}`是一个初始化列表。

# tinymce - TinyMCE 弹出显示 404 Not Found

> ID：15632231
> 
> 赞同：1
> 
> 时间：2013-03-26T08:11:46.267
> 
> 标签：tinymce, http-status-code-404

目前我正在开发一个网站，并使用 TinyMCE 作为管理后端的文本编辑器。总体而言，它运行良好，但对于链接、图像、媒体等几个按钮或任何应该显示弹出窗口的按钮，弹出窗口一直显示 404 Not Found。

我不知道有什么问题。我确信我已经包含了 tinyMce.js、jQuery.tinyMce.js 和 tinyMCe.css。我错过了什么吗？

这是我添加到页面的脚本

```
<script type="text/javascript">
jQuery(document).ready(function(){

    ///// TINYMCE EDITOR /////
    jQuery('textarea.tinymce').tinymce({
    // Location of TinyMCE script
    script_url : 'js/plugins/tinymce/tiny_mce.js',

    // General options
    theme : "advanced",
    skin : "themepixels",
    plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",
    inlinepopups_skin: "themepixels",
    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,outdent,indent,blockquote,formatselect,fontselect,fontsizeselect",
    theme_advanced_buttons2 : "pastetext,pasteword,|,bullist,numlist,undo,redo,|,link,unlink,help,code,|,preview,|,forecolor,backcolor,removeformat,|,charmap,media,|,fullscreen",
    theme_advanced_buttons3 : "",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,

    // Example content CSS (should be your site CSS)
    content_css : "assets/css/plugins/tinymce.css",

    // Drop lists for link/image/media/template dialogs
    template_external_list_url : "lists/template_list.js",
    external_link_list_url : "lists/link_list.js",
    external_image_list_url : "lists/image_list.js",
    media_external_list_url : "lists/media_list.js",

    // Replace values for the template plugin
    template_replace_values : {
        username : "Some User",
        staffid : "991234"
    }
    });

    jQuery('.editornav a').click(function(){
        jQuery('.editornav li.current').removeClass('current');
        jQuery(this).parent().addClass('current');
        if(jQuery(this).hasClass('visual'))
            jQuery('#elm1').tinymce().show();
        else
            jQuery('#elm1').tinymce().hide();
        return false;
    });
});
</script> 
```

检查控制台后，它显示此错误：

加载资源失败：服务器响应状态为 404（未找到）localhost:82/indocreweb/backend/business/assets/css/plugins/tinymce.css

路径应该是 localhost:82/indocreweb/assets/css/plugins/tinymce.css ；localhost:82/indocreweb/backend/business 是使用 tinyMCE 的页面的路径。

有人可以帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:49:03.443

我想我明白了~尽管回答我自己的问题很尴尬。好吧，希望你不会像我一样犯同样愚蠢的错误。

因此，基于 Web 控制台，跟踪每个找不到的页面并确保它们都存在（在我的情况下，它发生是因为某些插件的一部分被重命名错误）。一旦我确定它们都可以找到，弹出窗口就可以正常工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-27T02:50:45.180

就我而言，上传链接错误，我更改了服务器 URL，但忘记更改 tincymce 设置。

# c - 在内核中有效分配内存

> ID：15632232
> 
> 赞同：4
> 
> 时间：2013-03-26T08:11:52.723
> 
> 标签：c, linux-kernel

我想编写一个内核模块，我可以在其中获得接近 8 mbps 的 TCP/IP 数据包。我必须将这些数据包存储 500 毫秒。稍后这些数据包应按顺序转发。这些应该为 30 名成员完成。最好的实施方法应该是什么？我应该使用`kmalloc`一次`(kmalloc(64000000, GFP_ATOMIC)`吗？因为每次如果我这样做`kmalloc`，`kfree`都需要时间，导致性能问题。另外，如果我一次性在内核中分配内存，linux内核会允许我这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T08:22:33.217

我曾经写过一个内核模块处理 10Gbs 链路上的数据包。我曾经`vmalloc`分配大约 1GByte 的连续（虚拟）内存来将静态大小的哈希表放入其中以执行连接跟踪（[代码](https://github.com/diekmann/cctrack/blob/master/code/PF_RING-4.7.1/kernel/plugins/cctrack_hash.c)）。

如果你知道你需要多少内存，我建议预先分配它。这有两个好处

*   它很快（在运行时没有 mallocing/freeing）
*   `kmalloc(_, GFP_ATOMIC)`如果不能恢复记忆，你不必想一个策略。这实际上可能在重负载下经常发生。

坏处

*   您可能需要分配更多的内存。

所以，为了编写一个特殊用途的内核模块，请预先分配尽可能多的内存；）

如果您为许多新手用户使用的商品硬件编写内核模块，那么按需分配内存（并且浪费更少的内存）会很好。

* * *

你在哪里分配内存？`GFP_ATOMIC`只能返回非常少量的内存，并且只应在您的内存分配无法休眠时使用。您可以`GFP_KERNEL`在可以安全睡眠时使用，例如，不在中断上下文中。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/116343/what-is-the-difference-between-vmalloc-and-kmalloc)。`vmalloc`在模块初始化期间使用预分配所有内存是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-20T16:04:07.950

由于[内核更改，在](https://www.phoronix.com/scan.php?page=news_item&px=Linux-5.2-vmalloc-Performance)[Linux 内核 5.2](https://www.phoronix.com/scan.php?page=search&q=Linux%205.2)（[2019 年第三季度发布](https://kernelnewbies.org/Linux_5.2)[`vmalloc`](https://www.kernel.org/doc/htmldocs/kernel-api/API-vmalloc.html)）中使用[老生常谈](https://stackoverflow.com/users/2143551/corny)的[答案](https://stackoverflow.com/q/15632232/6309) 会更快。

来自[**迈克尔·拉拉贝尔**](https://www.phoronix.com/scan.php?page=michaellarabel)：

> Linux 内核的`vmalloc`代码有可能在 Linux 5.2 上执行得更快，尤其是在嵌入式设备上。
> Vmalloc 用于在虚拟地址空间中分配连续内存，并在 Linux 5.2 合并窗口的预期最后一天看到了一个很好的优化。
> 
> 作为**Andrew Morton**几分钟前合并的[pull (commit cb6f873)](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=cb6f8739fbf98203d0fb0bc2c2dbbec0ddfe978a)的一部分，是“对 vmalloc 的重大更改，产生了巨大的性能优势”。
> 
>  ****vmalloc 代码的主要变化是跟踪分配的空闲块**。
> 目前，新 VA 区域的分配是通过繁忙列表迭代完成的，直到在两个繁忙区域之间找到合适的空洞。因此，每个新分配都会导致列表增长。由于长列表和不同的许可参数，在嵌入式设备上分配可能需要很长时间（毫秒）。
> 
> 此补丁将 vmalloc 内存布局组织到`VMALLOC_START`-`VMALLOC_END`范围的空闲区域中。它使用红黑树保持块按它们的偏移量排序，链表保持可用空间按地址递增的顺序排列。
> 
> **使用来自Uladzislau Rezki**的这个补丁，与 Linux 5.1 和之前的行为相比，调用`vmalloc()`最多可以减少 67% 的时间，至少在开发人员在 QEMU 下完成的测试中是这样。**

 **提交，如[GitHub 上的镜像，在这里](https://github.com/torvalds/linux/commit/cb6f873)：

它[引入了一个红黑树](https://github.com/torvalds/linux/blob/cb6f8739fbf98203d0fb0bc2c2dbbec0ddfe978a/mm/vmalloc.c#L356-L363)：

```
/*
 * This augment red-black tree represents the free vmap space.
 * All vmap_area objects in this tree are sorted by va->va_start
 * address. It is used for allocation and merging when a vmap
 * object is released.
 *
 * Each vmap_area node contains a maximum available free block
 * of its sub-tree, right or left. Therefore it is possible to
 * find a lowest match of free area.
 */ 
```

具有[以下功能](https://github.com/torvalds/linux/commit/cb6f873#diff-1662e6f7a8ab98f610f1f19d89b78c9fR671)：

```
/*
 * Merge de-allocated chunk of VA memory with previous
 * and next free blocks. If coalesce is not done a new
 * free area is inserted. If VA has been merged, it is
 * freed.
 */
static __always_inline void
merge_or_add_vmap_area(struct vmap_area *va,
    struct rb_root *root, struct list_head *head)

/*
 * Find a place in the tree where VA potentially will be
 * inserted, unless it is merged with its sibling/siblings.
 */

/*
 * Get next node of VA to check if merging can be done.
 */

/*
 * start            end
 * |                |
 * |<------VA------>|<-----Next----->|
 *                  |                |
 *                  start            end
 */
...
/*
 * start            end
 * |                |
 * |<-----Prev----->|<------VA------>|
 *                  |                |
 *                  start            end
 */ 
```**

# visual-studio-2010 - 如果参数为空，则显示全部 Crystal Reports

> ID：15632244
> 
> 赞同：1
> 
> 时间：2013-03-26T08:12:28.137
> 
> 标签：visual-studio-2010, crystal-reports

大家好，我将 Crystal Reports 与 Visual Studio 2010 一起使用，并且遇到以下我似乎无法解决的问题。我有一个名为 name 的参数，我这样做是为了让用户从员工姓名的下拉列表中进行选择。这是一个可选参数，因此用户可以不选择任何内容，在这种情况下，我希望报告显示所有员工，但员工名称字段为空的行除外。现在我想我把它的第二部分记下来了，因为我在细节部分放了一个公式，似乎隐藏了所有空员工。问题是，如果我未选择该参数，则报告仅显示字段员工姓名为空的行。我创建了一个这样的公式：

```
if not (hasvalue(({?Zaduzioc}))) then True 

    else if  
    hasvalue({?Zaduzioc})  then  
    {Inventar_Model_ReportClass.ImeZaduzioca} in {?Zaduzioc} and
    {Inventar_Model_ReportClass.Status} = "Aktivno" 
```

现在，如果我将它与不同的报告和参数一起使用，但该参数没有空值，那么这个完全相同的公式对我有用，所以我猜它等同于如果有空值，则仅显示那些行，如果不显示所有内容。问题是我不知道如何告诉它显示所有内容。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:18:25.437

我设法使它工作，问题出在我没有将可选设置为true的参数的编辑中，忽略了它，一旦我这样做了，它就全部工作了。因此，回顾一下遇到此问题的任何人：使您的参数集可选为 true，并将其放入记录选择的公式中：

```
if not (hasvalue(({?Parameter}))) then True  

else if  
hasvalue({?Parameter})  then  
{table.column} in {?Parameter} 
```

应该是这样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-30T20:08:27.550

如果您从下拉列表中选择，您可以添加一个项目，Value = ALL，Description = ALL。将默认值设置为此值。然后在选择专家中，将其添加到您的选择查询中：

.... AND (IF {?Parameter} = 'ALL' THEN {databasefield} = {databasefield} ELSE {databasefield} = {?Parameter})

# asp.net - 多于一个时 MVC 3 中的慢速流图像

> ID：15632248
> 
> 赞同：0
> 
> 时间：2013-03-26T08:13:10.200
> 
> 标签：asp.net, asp.net-mvc-3, stream

我在使用 EF5 和 MVC3 从数据库流式传输小图像时遇到问题

当我流出 1 张图片时效果很好，但是当一个页面包含 5 张这样的图片时，它就像胶水一样，即使每张只有 5-200kb 大，它们也需要 5 秒才能加载。

![在此处输入图像描述](../Images/c1d1d867657e66f8d3851504096a83c4.png)

我阅读了一些帖子并将其添加到 web.config

```
<system.net> 
  <connectionManagement> 
    <add address="*" maxconnection="100" /> 
  </connectionManagement> 
</system.net> 
```

它对我的问题没有任何影响。

并将其用于流式传输：

```
 public class ImageResult : ActionResult
    {
        public ImageResult(Stream imageStream, string contentType)
        {
            if (imageStream == null)
                throw new ArgumentNullException("imageStream");
            if (contentType == null)
                throw new ArgumentNullException("contentType");

            this.ImageStream = imageStream;
            this.ContentType = contentType;
        }

        public Stream ImageStream { get; private set; }
        public string ContentType { get; private set; }

        public override void ExecuteResult(ControllerContext context)
        {
            if (context == null)
                throw new ArgumentNullException("context");

            HttpResponseBase response = context.HttpContext.Response;

            response.ContentType = this.ContentType;

            byte[] buffer = new byte[4096];
            while (true)
            {
                int read = this.ImageStream.Read(buffer, 0, buffer.Length);
                if (read == 0)
                    break;

                response.OutputStream.Write(buffer, 0, read);
            }

            response.End();
        }
    } 
```

**更新**

我删除了 ImageResult 并添加了返回文件......加快了速度，但速度仍然不可接受...... 18kb 文件需要 2 秒。

控制器：

```
 [SessionState(SessionStateBehavior.Disabled)]
   public class ContentController : Controller
    {
    .....
       public ActionResult Thumbnail(int fileID, int width)
       {
           var thumbnail = _fileRep.GetThumbnail(fileID, width);

           return File(thumbnail.FileContent, thumbnail.ContentType);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:27:04.517

您面临的问题很可能是由于每个会话对 ASP.NET 会话状态的访问是独占的。这意味着如果对同一个会话（通过使用相同的 SessionID 值）发出两个并发请求，则第一个请求将获得对会话信息的独占访问权。第二个请求仅在第一个请求完成后执行。您可以在此处阅读有关它的更多信息：[ASP.NET 会话状态概述](http://msdn.microsoft.com/en-us/library/ms178581.aspx)（*并发请求和会话状态*部分）

如果您的图像操作方法不需要访问会话，您可以通过使用[SessionStateAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.sessionstateattribute%28v=vs.98%29.aspx)属性装饰控制器来解决您的问题：

```
[SessionState(SessionStateBehavior.Disabled)] 
```

这将允许控制器以*“并行”*方式处理请求。

如果您需要对会话进行读取访问，您可以尝试使用该`SessionStateBehavior.ReadOnly`值。这不会导致独占锁，但请求仍需等待读写请求设置的锁。

# rubygems - RubyGems.org 无法处理此 gem

> ID：15632253
> 
> 赞同：-1
> 
> 时间：2013-03-26T08:13:44.370
> 
> 标签：rubygems, gem

我试图将 gem 上传到 Rubygems，但它抛出了这个错误：

```
$ gem push voxel4r.gemspec -V
GET http://rubygems.org/latest_specs.4.8.gz
302 Moved Temporarily
GET http://production.s3.rubygems.org/latest_specs.4.8.gz
304 Not Modified
Pushing gem to https://rubygems.org...
POST https://rubygems.org/api/v1/gems
422 Unprocessable Entity
RubyGems.org cannot process this gem.
Please try rebuilding it and installing it locally to make sure it's valid. 
```

它已成功构建：

```
$ gem build voxel4r.gemspec 
  Successfully built RubyGem
  Name: voxel4r
  Version: 0.0.1
  File: voxel4r-0.0.1.gem 
```

我有一个 Rubygems 帐户，并且我有我的`~/.gem/credentials`文件。我还可以做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:28:26.110

我犯了一个错误：

我试图推送 gemspec 文件而不是 gem 文件。

```
$ gem push voxel4r-0.0.1.gem -V
GET http://rubygems.org/latest_specs.4.8.gz
302 Moved Temporarily
GET http://production.s3.rubygems.org/latest_specs.4.8.gz
200 OK
Pushing gem to https://rubygems.org...
POST https://rubygems.org/api/v1/gems
200 OK
Successfully registered gem: voxel4r (0.0.1) 
```

# angularjs - 角度，在指令中，向模板添加具有 ng 模型的元素

> ID：15632257
> 
> 赞同：9
> 
> 时间：2013-03-26T08:14:01.813
> 
> 标签：angularjs, angularjs-directive

我正在尝试在指令中添加带有 ng-model 的输入元素。

[我的代码](http://jsfiddle.net/Ajsy7/1/)

我的指令的链接功能：

```
link: function (scope, element, attrs) {
        var elem_0 = angular.element(element.children()[0]);
        for (var i in scope.animals[0]) {
            elem_0.append(angular.element('<span>' + scope.animals[0][i].id + '</span>'));

            //this part doesn't work
            var a_input = angular.element('<input type="text">');
            a_input.attr('ng-model', 'animals[0][' + i + '].name');
            //end
            elem_0.append(a_input);
        } 
```

看来我需要在最后调用 $compile() ，但不知道如何。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-26T09:49:26.013

尝试

```
var a_input = angular.element($compile('<input type="text" ng-model="animals[0][' + i + '].name"/>')($scope))
elem_0.append(a_input); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T11:51:38.047

当您可以`ng-repeat`在指令模板中使用嵌套并让 angular 执行数组循环时，您通过手动循环数组使指令变得比必要的复杂：

```
angular.module("myApp", [])
    .directive("myDirective", function () {
    return {
        restrict: 'EA',       
        replace: true,
        scope: {
            animals: '=animals'
        },
        template: '<div ng-repeat="group in animals">'+
                       '<span ng-repeat="animal in group">{{animal.id}}'+
                             '<input type="text" ng-model="animal.name"/>'+
                        '</span><hr>'+
                   '</div>'

    }
}); 
```

演示：http: [//jsfiddle.net/Ajsy7/2/](http://jsfiddle.net/Ajsy7/2/)

# php - 为什么推进将浮点属性转换为字符串？

> ID：15632267
> 
> 赞同：5
> 
> 时间：2013-03-26T08:14:37.723
> 
> 标签：php, propel

我刚刚注意到，propel 在生成的 setter 方法中将数值转换为字符串。我的问题是，由于我使用的是德语语言环境，浮点值是用逗号而不是点插入的。例如：“3.5”生成字符串“3,5”。我正在使用 PostgreSQL，它显然需要 3.5。

**版本信息：** 如果相关，我使用的是：PHP 5.3.9，Propel 1.6 和 Symfony 2.2。

**细节：**

表定义如下所示：

```
<table name="account_entry">
    ...
    <column name="amount" type="decimal" size="12" scale="2" required="true" />
    ...
</table> 
```

生成的 setAmount() 方法如下所示：

```
public function setAmount($v)
{
    if ($v !== null && is_numeric($v)) {
        $v = (string) $v;
    }

    if ($this->amount !== $v) {
        $this->amount = $v;
        $this->modifiedColumns[] = AccountEntryPeer::AMOUNT;
    }

    return $this;
} // setAmount() 
```

保存对象会导致 PostgreSQL 错误：

```
Invalid text representation: 7 ERROR: invalid input syntax for type numeric: "3,5" 
```

我花了一段时间才找到发生这种转换的地方。如您所见，浮点值在 setAmount() 中被转换为字符串。到目前为止，我从未注意到将浮点值转换为字符串会导致字符串包含特定于语言环境的小数分隔符。

我想知道为什么推进首先将浮点值转换为字符串？有一些解决方法吗？

我想出的唯一解决方法是非常丑陋和烦人：

```
setlocale(LC_ALL, 'en_US');
$ae->setAmount(3.5);
setlocale(LC_ALL, 'de_DE'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:36:07.330

问题是 Propel 将与该列相关的 PHP 字段转换为 setter 中的本机 PHP 类型（正如@j0k 所提到的），但是如果您看得更深一点，就会发现问题。在[PropelTypes.php](https://github.com/propelorm/Propel/blob/master/generator/lib/model/PropelTypes.php#L76)助手类中，在第 76 行，您可以看到“十进制”的原生 PHP 类型被列为“字符串”。

将此与列为“double”的“float”本机类型进行比较。我不确定这是否是故意的，但无论如何，只需将列切换到`type="float"`or即可解决您的问题`type="double"`。

Propel 应该将其转换为您的 DBMS 需要的任何类型。

# hadoop - 在 ubuntu 上安装 ganglia

> ID：15632269
> 
> 赞同：0
> 
> 时间：2013-03-26T08:14:46.163
> 
> 标签：hadoop, monitoring, ganglia

我正在使用 Apache Hadoop 1.0.4 运行一个 7 节点集群。我正在使用它进行语言翻译，并寻找在所有集群节点上安装 ganglia 的正确指南。

请让我知道任何可以帮助我的指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T14:02:01.523

您应该尝试看一下[O'Reilly 的](http://shop.oreilly.com/product/0636920025573.do)关于`Ganglia`. 那边有个很好的话题。

# css - 打印样式表中的 Sass 变量覆盖“所有”样式表中的变量

> ID：15632272
> 
> 赞同：5
> 
> 时间：2013-03-26T08:14:53.627
> 
> 标签：css, sass, compass-sass

我使用最新的 SASS/Compass 版本来开发 CSS。我在“media=all”样式表的开头声明了一些 SASS 变量，如下所示：

```
$var1: red;
$var2: blue;
$var3: black;
$var4: green; 
```

稍后在此 SCSS 文件中，我导入了一个打印样式表 (@import 'print.scss';)，如下所示：

```
@media print {
   $var1: black;
   $var2: black;
   $var4:black;
} 
```

我认为，**仅**当浏览器处于“打印模式”时，打印样式表中的变量才会覆盖“正常”变量。但是变量确实**总是**覆盖之前声明的“正常”变量。

我有点困惑，感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:21:08.313

根据[这个](https://stackoverflow.com/questions/9122195/using-sass-variables-with-css3-media-queries)问题，您目前的形式基本上是不可能的。如果你想实现这一点，你必须导入每个使用你的样式`$varX`，比如：

```
$blue: blue;

.test{
    color: $blue;
}

@media print {
    $blue: pink;
    .test{
        color: $blue;
    }
} 
```

输出：

```
.test{color:blue}@media print{.test{color:pink}} 
```

这不是理想的解决方案（您会得到很多重复的代码），但不幸的是，由于 CSS 的工作方式，您只能这样做。

这可能是一个更好的解决方案：

```
$blue: blue;
$print_blue: pink;

.test{
    color: $blue;
    text-align: right;
    @media print {
        color: $print_blue;
    }
} 
```

输出：

```
.test{color:blue;text-align:right}@media print{.test{color:pink}} 
```

# javascript - 使用带有 jsonp 的 $.getJSON 时，Sinon.js fakeServer.request.respond 失败

> ID：15632283
> 
> 赞同：1
> 
> 时间：2013-03-26T08:16:25.030
> 
> 标签：javascript, coffeescript, jasmine, sinon

您好，我是 sinon.js 的新手。我正在编写 Jasmine BDD 测试代码。我想做一个**从 flickr 获取照片**的小应用程序。

```
describe "with stub", ->
  beforeEach ->
    @server = sinon.fakeServer.create()
    @flickrPhotos = @flickr.photos

  afterEach ->
    @flickrPhotos = [] # remove photo data

  it "[0].title should be Pod", ->
    @flickr.getData 5, true
    @server.requests[0].respond(
      200
      "Content-Type": "application/json"
      '{"photos":{"page":1, "pages":726, "perpage":5, "total":"3630", "photo":[{"id":"8591804280", "owner":"77921082@N00", "secret":"da96195b4b", "server":"8526", "farm":9, "title":"Pod", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8591810388", "owner":"77921082@N00", "secret":"d94ce346a5", "server":"8509", "farm":9, "title":"Street Plate", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8591801040", "owner":"77921082@N00", "secret":"cb7b1e246a", "server":"8097", "farm":9, "title":"Stone pod", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8590414659", "owner":"77921082@N00", "secret":"fb49a25607", "server":"8094", "farm":9, "title":"Street pole", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8590411479", "owner":"77921082@N00", "secret":"9aab17d3a9", "server":"8370", "farm":9, "title":"Street plate", "ispublic":1, "isfriend":0, "isfamily":0}]}, "stat":"ok"}'
    )

    waitsFor (-> @flickrPhotos.length > 0), 'timeout', 1000
    runs ->
      expect(@flickrPhotos[0].title).toBe "Pod" 
```

下面的代码很好地通过了测试，但是参数`$.getJSON`是**fake**。我想让这个工作与非假 URL 一起工作。

```
root = exports ? this
class root.Flickr
  constructor: (@number) ->
    @photos = []

  getData: (number) ->
    $.getJSON(
      # 'http://www.flickr.com/services/rest/?jsoncallback=?' # true URL: fail
      # fake request scceed only when without '?jsoncallback=?'
      'http://www.flickr.com/services/rest/' # fake URL: succeed
        format : 'json'
        method : 'flickr.photos.search'
        api_key : '7965a8bc5a2a88908e8321f3f56c80ea'
        user_id : '77921082@N00'
        per_page : number
    ).done((data) =>
      $.each data.photos.photo, (i, item) =>
        @photos.push item
    ) 
```

谢谢你的好意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:07:11.140

您必须在拨打电话之前定义服务器的响应。添加它也更好，`@server.autoRespond = true;`这样您就不必等待测试

```
describe "with stub", ->
  beforeEach ->
    @server = sinon.fakeServer.create()
    @server.autoRespond = true;
    @server.respondWith(
          200
          "Content-Type": "application/json"
          '{"photos":{"page":1, "pages":726, "perpage":5, "total":"3630", "photo":[{"id":"8591804280", "owner":"77921082@N00", "secret":"da96195b4b", "server":"8526", "farm":9, "title":"Pod", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8591810388", "owner":"77921082@N00", "secret":"d94ce346a5", "server":"8509", "farm":9, "title":"Street Plate", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8591801040", "owner":"77921082@N00", "secret":"cb7b1e246a", "server":"8097", "farm":9, "title":"Stone pod", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8590414659", "owner":"77921082@N00", "secret":"fb49a25607", "server":"8094", "farm":9, "title":"Street pole", "ispublic":1, "isfriend":0, "isfamily":0}, {"id":"8590411479", "owner":"77921082@N00", "secret":"9aab17d3a9", "server":"8370", "farm":9, "title":"Street plate", "ispublic":1, "isfriend":0, "isfamily":0}]}, "stat":"ok"}'
        )
    @flickrPhotos = @flickr.photos

  afterEach ->
    @flickrPhotos = [] # remove photo data

  it "[0].title should be Pod", ->
    @flickr.getData 5, true
    expect(@flickrPhotos[0].title).toBe "Pod" 
```

# html - 在内部 div 上设置最大高度，以便出现滚动条，但不在父 div 上

> ID：15632287
> 
> 赞同：38
> 
> 时间：2013-03-26T08:16:45.843
> 
> 标签：html, css

我按照下面的代码设置了我的 HTML、CSS。我还添加了一个 JSFiddle 链接，因为这样可以更方便地查看实际代码。

我遇到的问题是，当`#inner-right`div 中的`#right-col`div 中有很多文本时，我希望滚动条`#inner-right` **仅**显示. 我当前的代码显示了两个滚动条：`#inner-div`和`#right-col`. 如果我将 CSS 更改`#right-col`为`overflow: hidden`以摆脱外部滚动条，则内部滚动条也会消失，并且`#inner-right`不再遵守`max-height`规则。

我该如何设置它，以便滚动条仅`#inner-right`在其内容变得太大时才显示。

[**JSFiddle**](http://jsfiddle.net/C8MuZ/10/)

```
html, body {
    height: 100%;    
}
#wrapper {
    height: 100%;
    display: table;
    width: 700px;
}
#header, #footer {
    display: table-row;
    height: 30px;
}
#body {
    height: 100%;
    display: table-row;
    background: rgba(255, 0, 0, 0.5);
}
#left-col, #right-col {
    display: inline-block;
    width: 320px;
    height: 100%;
    max-height: 100%;
    margin-right: 20px;
    border: 2px black solid;
    vertical-align: top;
    padding: 3px;
    overflow: auto;    
}
#inner-right {
    height: 100%;
    max-height: 100%;
    overflow: auto;
    background: ivory;
}
```

```
<div id="wrapper">
    <div id="header">Header</div>
    <div id="body">
        <div id="left-col">
            Lorem ipsum ... little text
        </div>
        <div id="right-col">
            <div id="header-text">Header</div>
            <div id="inner-right">
            Lorem ipsum ...lots of text
            </div>
        </div>
    </div>
    <div id="footer">Footer</div>
</div>
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-26T08:21:49.017

如果你做

`overflow: hidden`在外部 div 和`overflow-y: scroll`内部 div 中它会起作用。

[http://jsfiddle.net/C8MuZ/11/](http://jsfiddle.net/C8MuZ/11/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-04T07:53:39.130

**这会很好，将高度设置为所需的像素**

```
#inner-right{
            height: 100px;
            overflow:auto;
            } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T08:20:13.893

设置这个：

```
#inner-right {
    height: 100%;
    max-height: 96%;//change here
    overflow: auto;
    background: ivory;
} 
```

这将解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-02T09:06:01.540

为此使用 JavaScript 或 jquery 可能更容易。假设页眉和页脚的高度是 200，那么代码将是：

```
function SetHeight(){
    var h = $(window).height();
    $("#inner-right").height(h-200);    
}

$(document).ready(SetHeight);
$(window).resize(SetHeight); 
```

# php - 对急切加载的关系进行分页

> ID：15632296
> 
> 赞同：1
> 
> 时间：2013-03-26T08:17:27.983
> 
> 标签：php, laravel

我正在使用 Laravel 3.x。

`Post::with( array('blogs' => function($query) { $query->where('user_id', '=', Auth::user()->id); } ))->get();`

如何对帖子进行分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T21:05:51.687

假治愈，

假设`$user->has_one('blog')`，您可以简单地使用 Laravel 魔法关系吸气剂：

```
$user = Auth::user();
$user->blog->posts(); 
```

如果不是这种情况`user->has_many('blog')`，您需要使用 JOIN 来检索对所有该用户博客发表的所有帖子。

```
$user = Auth::user();
$posts = Posts::join('blogs', 'blogs.id', '=', 'posts.blog_id')
    ->where('blogs.user_id', '=', $user->id)
    ->get('posts.*'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T22:43:40.420

这是我想出的解决方案。一个用户可以有很多博客，一篇文章可以属于很多博客。

```
 /**
    * Get all posts by a user for all blogs.
    * @return paginated posts.
    */
    public static function get_posts_for_user($user_id, $limit)
    {
        return Post::left_join('blog_post', 'posts.id', '=', 'blog_post.post_id')
                ->join('blogs', 'blogs.id', '=', 'blog_post.blog_id')
                ->where('blogs.user_id', '=', $user_id)
                ->paginate($limit);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T20:03:59.493

从上面的反馈来看，急切加载似乎不是您想要的。尝试这个。

```
Post::where( 'user_id', '=', Auth::user()->id )->paginate( 10 ); 
```

或者您可以向 User 模型添加一个 posts 方法。

```
public function posts()
{
    return $this->has_many( 'Post' );
} 
```

然后用它来获取用户的帖子。

```
Auth::user()->posts()->paginate( 10 ); 
```

# java - 哪个更快，String 或 Integer 作为 Java 中的 hashkey？

> ID：15632300
> 
> 赞同：7
> 
> 时间：2013-03-26T08:17:50.567
> 
> 标签：java, hashtable

我正在解决一个问题，我遇到了执行时间变得太大的问题，现在我正在寻找可能的优化。

问题：使用 String 或 Integer 作为 haskey 在性能上是否有任何（相当大的）差异？

问题是我有一个图表，其中节点存储在一个以字符串为键的哈希表中。例如，键如下 - “0011”或“1011”等。现在我也可以将它们转换为整数，如果这意味着执行时间的改进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:20:39.887

整数将比字符串表现更好。以下是两者的哈希码计算代码。

整数哈希码实现

```
/**
     * Returns a hash code for this <code>Integer</code>.
     *
     * @return  a hash code value for this object, equal to the 
     *          primitive <code>int</code> value represented by this 
     *          <code>Integer</code> object. 
     */
    public int hashCode() {
    return value;
    } 
```

字符串哈希码实现

```
 /**
     * Returns a hash code for this string. The hash code for a
     * <code>String</code> object is computed as
     * <blockquote><pre>
     * s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1]
     * </pre></blockquote>
     * using <code>int</code> arithmetic, where <code>s[i]</code> is the
     * <i>i</i>th character of the string, <code>n</code> is the length of
     * the string, and <code>^</code> indicates exponentiation.
     * (The hash value of the empty string is zero.)
     *
     * @return  a hash code value for this object.
     */
    public int hashCode() {
    int h = hash;
    if (h == 0) {
        int off = offset;
        char val[] = value;
        int len = count;

            for (int i = 0; i < len; i++) {
                h = 31*h + val[off++];
            }
            hash = h;
        }
        return h;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:26:34.270

如果您有性能问题，那么问题不太可能是由于 HashMap/HashTable 造成的。虽然散列字符串比散列整数稍微贵一些，但差别很小，而且 hashCode 被缓存，因此如果您使用相同的字符串对象不会重新计算它，您不太可能从首先将其转换为整数获得任何显着的性能优势。

在其他地方寻找性能问题的根源可能更有成效。您是否尝试过分析您的代码？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T08:26:08.577

速度有区别。HashMaps 会使用 hashCode 根据该代码计算桶，Integer 的实现比 String 的实现简单得多。

话虽如此，如果您在执行时间方面遇到问题，您需要进行一些适当的测量并分析自己。这是找出执行时间问题的唯一方法，使用整数而不是字符串通常对性能的影响很小，这意味着您的性能问题可能在其他地方。

例如，如果您想做一些适当的微基准测试，请查看[这篇文章。](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)还有许多其他资源可用于分析等。

# java - 初始化错误线程 10 中的 Java 异常

> ID：15632305
> 
> 赞同：1
> 
> 时间：2013-03-26T08:18:27.387
> 
> 标签：java, android, multithreading, audio, android-ndk

我正在尝试为 android 使用 java 声音调制库，即[sonic](http://dev.vinux-project.org/sonic/)。我正在尝试运行其示例 android 应用程序，但它给了我异常说“初始化错误中的异常”我无法找出原因。以下是代码，请检查。

```
public class SonicTest extends Activity
{
static Sonic sonic;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);                      
    setContentView(R.layout.main);
}

public void play(View view)
{
    new Thread(new Runnable() 
    {
        public void run()
        {
            final EditText speedEdit = (EditText) findViewById(R.id.speed);
            final EditText pitchEdit = (EditText) findViewById(R.id.pitch);
            final EditText rateEdit = (EditText) findViewById(R.id.rate);
            float speed = Float.parseFloat(speedEdit.getText().toString());
            float pitch = Float.parseFloat(pitchEdit.getText().toString());
            float rate = Float.parseFloat(rateEdit.getText().toString());
            AndroidAudioDevice device = new AndroidAudioDevice(22050, 1);
            byte samples[] = new byte[4096];
            byte modifiedSamples[] = new byte[2048];
            InputStream soundFile = getResources().openRawResource(R.raw.talking);
            int bytesRead;
            Log.i("Hello", "HI");
             sonic = new Sonic(22050, 1);

            if(soundFile != null) {
                sonic.setSpeed(speed);
                sonic.setPitch(pitch);
                sonic.setRate(rate);
                do {
                    try {
                        bytesRead = soundFile.read(samples, 0, samples.length);
                    } catch (IOException e) {
                        e.printStackTrace();
                        return;
                    }
                    if(bytesRead > 0) {
                        sonic.putBytes(samples, bytesRead);
                    } else {
                        sonic.flush();
                    }
                    int available = sonic.availableBytes(); 
                    if(available > 0) {
                        if(modifiedSamples.length < available) {
                            modifiedSamples = new byte[available*2];
                        }
                        sonic.receiveBytes(modifiedSamples, available);
                        device.writeSamples(modifiedSamples, available);
                    }
                } while(bytesRead > 0);
                device.flush();
            }
        }
    } ).start();
}} 
```

声波类：

```
public class Sonic
{
// Sonic is thread-safe, but to have multiple instances of it, we have to
// store a pointer to it's data. We store that here as a long, just in case
// someone wants to port this JNI wapper to a 64-bit JVM.
long sonicID = 0;

// Create a sonic stream.  Return false only if we are out of memory and cannot
// allocate the stream. Set numChannels to 1 for mono, and 2 for stereo.
public Sonic(int sampleRate, int numChannels)
{
    close();
    sonicID = initNative(sampleRate, numChannels);
}

// Call this to clean up memory after you're done processing sound.
public void close()
{
    if(sonicID != 0) {
        closeNative(sonicID);
        sonicID = 0;
    }
}

// Just insure that close gets called, in case the user forgot.
protected void finalize()
{
    // It is safe to call this twice, in case the user already did.
    close();
}

// Force the sonic stream to generate output using whatever data it currently
// has.  No extra delay will be added to the output, but flushing in the middle of
// words could introduce distortion.
public void flush()
{
    flushNative(sonicID);
}

// Set the sample rate of the stream.  This will drop any samples that have not been read.
public void setSampleRate(int newSampleRate)
{
    setSampleRateNative(sonicID, newSampleRate);
}

// Get the sample rate of the stream.
public int getSampleRate()
{
    return getSampleRateNative(sonicID);
}

// Set the number of channels.  This will drop any samples that have not been read.
public void setNumChannels(int newNumChannels)
{
    setNumChannelsNative(sonicID, newNumChannels);
}

// Get the number of channels.
public int getNumChannels()
{
    return getNumChannelsNative(sonicID);
}

// Set the pitch of the stream.
public void setPitch(float newPitch)
{
    setPitchNative(sonicID, newPitch);
}

// Get the pitch of the stream.
public float getPitch()
{
    return getPitchNative(sonicID);
}

//Set the speed of the stream.
public void setSpeed(float newSpeed)
{
    setSpeedNative(sonicID, newSpeed);
}

// Get the speed of the stream.
public float getSpeed()
{
    return getSpeedNative(sonicID);
}

// Set the rate of the stream.  Rate means how fast we play, without pitch correction
// You probably just want to use setSpeed and setPitch instead.
public void setRate(float newRate)
{
    setRateNative(sonicID, newRate);
}

// Get the rate of the stream.
public float getRate()
{
    return getRateNative(sonicID);
}

// Set chord pitch mode on or off.  Default is off.  See the documentation
// page for a description of this feature.
public void setChordPitch(boolean useChordPitch)
{
    setChordPitchNative(sonicID, useChordPitch);
}

// Get the chord pitch setting.
public boolean getChordPitch()
{
    return getChordPitchNative(sonicID);
}

// Use this to write 16-bit data to be speed up or down into the stream.
// Return false if memory realloc failed, otherwise true.
public boolean putBytes(byte[] buffer, int lenBytes)
{
    return putBytesNative(sonicID, buffer, lenBytes);
}

// Use this to read 16-bit data out of the stream.  Sometimes no data will
// be available, and zero is returned, which is not an error condition.
public int receiveBytes(byte[] ret, int lenBytes)
{
    return receiveBytesNative(sonicID, ret, lenBytes);
}

// Return the number of samples in the output buffer
public int availableBytes()
{
    return availableBytesNative(sonicID);
}

// Set the scaling factor of the stream.
public void setVolume(float newVolume)
{
    setVolumeNative(sonicID, newVolume);
}

// Get the scaling factor of the stream.
public float getVolume()
{
    return getVolumeNative(sonicID);
}

private native long initNative(int sampleRate, int channels);
// When done with sound processing, it's best to call this method to clean up memory.
private native void closeNative(long sonicID);
private native void flushNative(long sonicID);
// Note that changing the sample rate or num channels will cause a flush.
private native void setSampleRateNative(long sonicID, int newSampleRate);
private native int getSampleRateNative(long sonicID);
private native void setNumChannelsNative(long sonicID, int newNumChannels);
private native int getNumChannelsNative(long sonicID);
private native void setPitchNative(long sonicID, float newPitch);
private native float getPitchNative(long sonicID);
private native void setSpeedNative(long sonicID, float newSpeed);
private native float getSpeedNative(long sonicID);
private native void setRateNative(long sonicID, float newRate);
private native float getRateNative(long sonicID);
private native void setChordPitchNative(long sonicID, boolean useChordPitch);
private native boolean getChordPitchNative(long sonicID);
private native boolean putBytesNative(long sonicID, byte[] buffer, int lenBytes);
private native int receiveBytesNative(long sonicID, byte[] ret, int lenBytes);
private native int availableBytesNative(long sonicID);
private native void setVolumeNative(long sonicID, float newVolume);
private native float getVolumeNative(long sonicID);

static {
    System.loadLibrary("sonic");
}} 
```

以下是我的日志文件。

```
FATAL EXCEPTION: Thread-10
java.lang.ExceptionInInitializerError
at org.vinuxproject.sonic.SonicTest$1.run(SonicTest.java:50)
at java.lang.Thread.run(Thread.java:1019)
Caused by: java.lang.UnsatisfiedLinkError: Couldn't load sonic: findLibrary returned    null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:20:41.510

您必须放在项目`libsonic.so`的文件夹中`libs/armeabi`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:20:57.493

您必须将 jar 添加到构建路径（您可能已经拥有，因为它可以编译）并且还必须在项目设置中的 Android 下的“Order and Export”选项卡上检查库。

# actionscript-3 - 专注游戏 - 瓷砖旋转

> ID：15632306
> 
> 赞同：1
> 
> 时间：2013-03-26T08:18:41.800
> 
> 标签：actionscript-3

我有一个简单的集中游戏 5x4 瓷砖（我有一个符号（tile_movieclip），有 11 帧 - 10 帧，数字 1-10 和第 11 个背景（衬衫卡））。

我希望一开始是可见的数字，几秒钟后瓷砖必须变成背景（第 11 帧）。在我的代码中，我首先看到了所有数字，并且在 1 秒内只转动了一个（右下角）图块。请帮忙。

PS Find //Error can be HERE!!!!!! - 我认为问题隐藏在那里，但我不确定。

这里的来源：

```
 package { 

    // importing classes

import flash.events.Event;
import flash.display.Sprite;
import flash.events.MouseEvent;
import flash.events.TimerEvent;
import flash.utils.Timer;
// end of importing classes
public class Main extends Sprite {
    private var pickedTiles:Array = new Array();  
    private const NUMBER_OF_TILES:uint=20;
    private var pause_game:Timer;
    private var canPick:Boolean=true;
    private var tiles:Array = new Array();
    private var tile:tile_movieclip;
    private var i:uint = 0;

    public function Main() {
        // variables and constants
        // no more NUMBER_OF_TILES here

        const TILES_PER_ROW:uint=5;
        // end of variables and constants
        // tiles creation loop
        for (i=0; i<NUMBER_OF_TILES; i++) {
            tiles.push(Math.floor(i/2));
        }
        trace("My tiles: "+tiles);
        // end of tiles creation loop
        // shuffling loop
        var swap,tmp:uint;
        for (i=NUMBER_OF_TILES-1; i>0; i--) {
            swap=Math.floor(Math.random()*i);
            tmp=tiles[i];
            tiles[i]=tiles[swap];
            tiles[swap]=tmp;
        }
        trace("My shuffled tiles: "+tiles);
        // end of shuffling loop
        // tile placing loop

        for (i=0; i<NUMBER_OF_TILES; i++) {

            tile=new tile_movieclip();
            addChild(tile);

            tile.cardType=tiles[i];
            tile.x=5+(tile.width+5)*(i%TILES_PER_ROW);
            tile.y=5+(tile.height+5)*(Math.floor(i/TILES_PER_ROW));

            tile.gotoAndStop(tiles[i]+1); // This shows all number at first

            canPick = false;

            tile.buttonMode=true;
            tile.addEventListener(MouseEvent.CLICK,onTileClicked);

        }
        pause_game=new Timer(1000,1);
            pause_game.start();
        pause_game.addEventListener(TimerEvent.TIMER_COMPLETE,hideTiles);

    }
        // end of tile_placing_loop
                                      //Error can be HERE!!!!!
    private function hideTiles(e:TimerEvent) {
            pause_game.removeEventListener(TimerEvent.TIMER_COMPLETE,hideTiles);

            tile.gotoAndStop(NUMBER_OF_TILES/2+1); //This turns to background just one tile (the lower right corner)

            canPick = true;
          }
    private function onTileClicked(e:MouseEvent) {
        if(canPick){

            var picked:tile_movieclip=e.currentTarget as tile_movieclip;
            trace("you picked a "+e.currentTarget.cardType);
            // checking if the current tile has already been picked
            if (pickedTiles.indexOf(picked)==-1) {
                pickedTiles.push(picked);
                picked.gotoAndStop(picked.cardType+1);
            }
            // end checking if the current tile has already been picked
            // checking if we picked 2 tiles
            if (pickedTiles.length==2) {
                canPick = false;
                pause_game=new Timer(1000,1);
                pause_game.start();
                if (pickedTiles[0].cardType==pickedTiles[1].cardType) {
                    // tiles match!!
                    trace("tiles match!!!!");
                    pause_game.addEventListener(TimerEvent.TIMER_COMPLETE,removeTiles);
                } else {
                    // tiles do not match
                    trace("tiles do not match");
                    pause_game.addEventListener(TimerEvent.TIMER_COMPLETE,resetTiles);
                }
                // no more pickedTiles = new Array();
            }
            // end checking if we picked 2 tiles
        }
    }
    private function removeTiles(e:TimerEvent) {
        pause_game.removeEventListener(TimerEvent.TIMER_COMPLETE,removeTiles);
        pickedTiles[0].removeEventListener(MouseEvent.CLICK,onTileClicked);
        pickedTiles[1].removeEventListener(MouseEvent.CLICK,onTileClicked);
        removeChild(pickedTiles[0]);
        removeChild(pickedTiles[1]);
        pickedTiles = new Array();
        canPick = true;
    }
    private function resetTiles(e:TimerEvent) {
        pause_game.removeEventListener(TimerEvent.TIMER_COMPLETE,resetTiles);
        pickedTiles[0].gotoAndStop(NUMBER_OF_TILES/2+1);
        pickedTiles[1].gotoAndStop(NUMBER_OF_TILES/2+1);
        pickedTiles = new Array();
        canPick = true;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:17:01.487

您有一组图块，而在您的侦听器中，您引用的`tile`是单个图块。您需要交换添加到显示列表中的所有图块，为此您可以使用以下结构：

```
for (var i:int=numChildren-1;i>=0;i--) {
    var mc:DisplayObject=this.getChildAt(i);
    var picked:tile_movieclip=mc as tile_movieclip;
    if (picked) picked.gotoAndStop(NUMBER_OF_TILES/2+1); // now, show the back
} 
```

这应该替换您在函数中的`tile.gotoAndStop(NUMBER_OF_TILES/2+1);`声明。`hideTiles`

# javascript - 背景图像在 Firefox 中显示但在 IE 中不显示，可能是 z-index 问题

> ID：15632308
> 
> 赞同：0
> 
> 时间：2013-03-26T08:18:50.280
> 
> 标签：javascript, css, internet-explorer, firefox, z-index

我创建了一个站点，它可以在 Firefox 上运行，但不能在 IE 上运行，背景图像消失了，实际上似乎 div 消失了，也可能是 z-index 问题，请您帮忙:(

以下是HTML代码

```
<div id="wrapper">
    <!-- Home -->
    <div id="landing" class="panel">
        <img src="images/bgmain_no_producer.jpg" class="bg" />
    </div>
</div> 
```

以下是CSS

```
#wrapper {
    width: 90 % ;
    /*float:left;*/
    min - height: 100 % ;
    height: auto!important;
    height: 100 % ;
    margin: 0 auto 0px auto;
}
.panel {
    min - width: 100 % ;
    height: 100 % ;
    overflow - y: hidden;
    overflow - x: hidden;
    position: absolute;
    margin - top: -150 % ;
    margin - left: -5 % ;
    background - color: #555555;
    opacity: 0;
    z-index:0;
    -webkit-transition: opacity .6s ease-in-out;
    -moz-transition: opacity .6s ease-in-out;
    -o-transition: opacity .6s ease-in-out;
    -ms-transition: opacity .6s ease-in-out;
    transition: opacity .6s ease-in-out;
}

img.bg {
/* Set rules to fill background */
    min-width: 250px;
    left: 50%;
    margin-left: -50%;   /* 50% */
    /* Set up proportionate scaling */
    width: 100%;
    height: auto;
/* Set up positioning */
    position:absolute;
    top: 0;
    z-index:-999;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:26:35.490

由于`opacity: 0`（使元素不可见）和`margin-top: -150%;`您的`.panel`班级，图像不可见。删除它们它将起作用。

* * *

如[**W3C**](http://www.w3.org/TR/CSS2/box.html#margin-properties)中所述，`margin`属性包括`margin-top`和`margin-bottom`引用包含块的**宽度**（而不是*高度*），如果设置在`percentages`.

**[工作小提琴](http://jsfiddle.net/f57q6/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:47:55.097

此外，如果打算让图像淡入，那么您需要在文档加载后将不透明度更改为 1。

```
document.getElementById('landing').style.opacity = 1; 
```

这是一个工作[小提琴](http://jsfiddle.net/ZcJ2a/)

# c# - 向 CSLA EF4 模式添加新项目

> ID：15632310
> 
> 赞同：2
> 
> 时间：2013-03-26T08:18:59.967
> 
> 标签：c#, wpf, database, mvvm, entity-framework-4

我正在向我的 CSLA BusinessList 添加一个新项目。但我只能使用 0 主键添加它，因为我添加的项目始终为空。如果我尝试：“Item temp= new item{...}”这个项目不是列表的子项。我将首先发布我的添加功能，然后发布一些数据门户。

```
 public void ExecuteNew(object obj)
    {
        if (Model != null)
        {
            Temp = Model.AddNew();
            //Temp.FarbauswahlNr = 123;
            //Temp.Kurztext = this.Kurztext;
            //Temp.Ressource = this.Ressource;
            //Temp.Vari1 = this.Vari1;
           Model = Model.Save();
        }

    } 
```

现在我的 Business 类和 BusinessList 类中的一些 DataPortals

```
 protected override void DataPortal_Update()
    {
        using (var ctx = Csla.Data.ObjectContextManager<Datenbank.TestDBEntities>.GetManager(Business.EntitiesDatabase.Name))
        {
            Child_Update();
        }
    }

    protected override void Child_Create()
    {

        base.DataPortal_Create();

        BusinessRules.CheckRules();

    }

           private void Child_Insert()
    {
        using (var ctx = Csla.Data.ObjectContextManager<TestDBEntities>.GetManager(EntitiesDatabase.Name))
        {

            try
            {
                var data = new Datenbank.Farbe();
                data.Kurztext = ReadProperty<string>(KurztextProperty);
                data.Ressource = ReadProperty<string>(RessourceProperty);
                data.Var1 = ReadProperty<bool>(Vari1Property);
                data.Vari2 = ReadProperty<string>(Vari2Property);
                ctx.ObjectContext.Farben.AddObject(data);
                ctx.ObjectContext.SaveChanges();
            }
            catch (Exception e)
            {

                MessageBox.Show(e.ToString());
            }

        }
    } 
```

可能的错误： NullReferebceException 未处理（因为 temp 始终为 null ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:21:01.003

问题是：CSLA 4.5 有一个错误，导致您的 UI 在保存命令后冻结。现在我使用 CSLA 4.1，它工作得很好。

# assembly - DOS x86 程序集中的回文检查代码错误

> ID：15632311
> 
> 赞同：-1
> 
> 时间：2013-03-26T08:19:07.550
> 
> 标签：assembly, x86, dos

此代码应检查字符串是否为回文。

但它总是为任何字符串打印“是”。我该如何解决这个问题？

我认为错误出现在某些跳转指令中。

错误是什么？

```
include inout.asm
.model small,c
.stack 200h
.data
    pal       db "rear"
    ;pal      db 200 dup("mohammad")
    pal_len   equ $ - pal  - 1
    szYes     db "yes$"
    szNo      db "no$"
.code
.startup

;call gets,offset pal
call puts,offset pal

    lea     si, pal
    lea     di, pal
    add     di, pal_len
    mov     cx, 0
CheckIt:
    mov     al, byte ptr [si]
    mov     dl, byte ptr [di]
    cmp     al, dl
    jne     No
    inc     si
    dec     di
    inc     cx
    cmp     cx, pal_len
    JNE     CheckIt
    lea     dx,szYes

    jmp done

No:
    lea     dx,szNo
done:   
    .exit
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:53:13.763

我在您的问题中没有看到打印代码。所以我添加了自己的：

```
不：
    铅 dx,sz 否
完毕：
    mov 啊,9
    整数 21 小时
    。出口
结尾

```

并用 MASM 6.11 组装它，它应该为“后”打印“否”，并且对于我尝试过的其他字符串也可以正常工作。我不知道您使用的打印代码。

但是，您的代码中还有其他错误：它不能正确处理长度为 1 的字符串，而是继续比较`pal`. 发生这种情况是因为您存储到最后一个字符`pal_len`的相对**偏移量**，而不是字符串**length** ，并且在检查是否已经等于之前增加`cx`with 。`inc cx``cx``pal_len`

所以在这里：

```
pal_len equ $ - 朋友 - 1

```

定义`pal_len`为 3 的值`"rear"`，而不是 4，因为你减去 1。它对于字符串长度不是 1 在这里没有问题（最后一个字符已经与第一个字符进行了比较），但对于 1 的字符串长度失败。用“len”之类的**长度**命名变量或宏并用它来表示**偏移量**并不是一个好主意，因为它会引起混淆。

所以，这是整个固定代码：

```
.model 小，c
.stack 200h
。数据
    朋友数据库“a”
    pal_len equ $ - 朋友
    szYes 分贝“是$”
    szNo db "no$"
。代码
。启动

    莱西，好朋友
    利迪，好朋友
    添加 di, (pal_len-1)
    移动 cx, 0
核实：
    mov al, 字节 ptr [si]
    mov dl，字节 ptr [di]
    cmp al, dl
    没有
    公司
    十二月
    公司
    cmp cx, pal_len
    JNE CheckIt
    lead dx,sz是

    jmp 完成

不：
    铅 dx,sz 否
完毕：
    mov 啊,9
    整数 21 小时
    。出口
结尾

```

# objective-c - 在 OSX 中禁用矩阵中的按钮

> ID：15632312
> 
> 赞同：0
> 
> 时间：2013-03-26T08:19:19.537
> 
> 标签：objective-c, cocoa, nsbutton

如何禁用按钮矩阵中的几个 NSButton？每个按钮都有一个特定的标签和标题。要实现此功能，按钮应该有边框还是无边框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:26:33.630

您可以`IBOutlet`为`NSMatrix`.

然后 ：

```
[[self.buttonMatrix cellWithTag:1] setEnabled:NO]; 
```

对其他人也是如此。代替`tag`，您还可以使用`title`

编辑，循环执行

```
for (NSButtonCell *button in [self.matrix cells]) {
    if (button.tag==1) {
        [button setEnabled:NO];
    }
} 
```

# php - 返回时再次出现PHP flash消息

> ID：15632313
> 
> 赞同：1
> 
> 时间：2013-03-26T08:19:24.240
> 
> 标签：php, codeigniter, session

我的 Web 应用程序（Codeigniter）将通过 PHP 会话 Flash 完成 Flash 消息。
但目前我发现按下浏览器的后退按钮时再次出现闪烁消息。
一旦显示，我想清除闪光灯。我怎样才能做到这一点？
这就是我保存 Flash 消息的方式：

```
$ci->session->set_flashdata('flash', $flash); 
```

从我的角度来看

```
$flash = $this->session->flashdata('flash'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:26:43.943

Flash 消息应在页面刷新后隐藏。当您单击浏览器的返回按钮时，有时页面不会刷新，因此会再次显示 Flash 消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:43:02.820

一旦你显示你的 flash 消息，只清除那个会话（$this->session->clear('flashdata')）。

如果您再次需要它，您可以从控制器设置相同的会话变量。我对错误和成功消息做同样的事情。

*在您的视图页面上“回显”它后立即清除您的会话。

# android - Android：嵌套的 TimerTask 没有停止

> ID：15632314
> 
> 赞同：1
> 
> 时间：2013-03-26T08:19:25.220
> 
> 标签：android

我有一些带有嵌套 TimerTasks 的测试代码，即每 10 秒调用一个任务来更改参数，它启动另一个计时器，每 100 毫秒左右运行一些计算。当我在第一个计时器上调用取消时，它会取消外部 TimerTask 但内部的继续运行。

我该怎么做才能让内部任务也停止？请注意，在下面的代码中，cancel() 覆盖永远不会被调用，尽管外部任务确实停止了。

```
 class CalcTask extends TimerTask
        {
            // randomly changes calc interval every time it is called
            public void run(){ 
                if (mTmr != null)
                    mTmr.cancel();
                mTmr = null;

                TimerTask calcTask = new TimerTask(){ public void run(){ Log.i("TempSensor","chad"); doCalcs(); } };

                int min = Integer.parseInt(mEditThreadMin.getText().toString());
                int max = Integer.parseInt(mEditThreadMax.getText().toString());
                int interval = mRand.nextInt(max-min)+min + 1;
                mTmr = new Timer(true);
                mTmr.schedule(calcTask,0,interval);
            } 

            @Override
            public boolean cancel()
            {
                Log.i("TempSensor","Cancelling");
                if(mTmr != null)
                {
                    mTmr.cancel();
                    mTmr.purge();
                }

                return super.cancel();
            }

            private Random mRand = new Random();
            private Timer mTmr = null;
        };

... // later on 
mTimerCalc1.scheduleAtFixedRate(new CalcTask(), 0, (int)10e3); 
```

# c# - WPF在按钮上拖放

> ID：15632317
> 
> 赞同：2
> 
> 时间：2013-03-26T08:19:32.573
> 
> 标签：c#, wpf, button, drag-and-drop

我正在编写一个具有按钮网格的 WPF 应用程序，我希望允许用户在网格之间拖放按钮，可能在应用程序的不同实例之间。我尝试通过在按钮上的 PreviewMouseMove 事件中添加一个处理程序，然后在鼠标左键按下时调用 DoDragDrop 来做到这一点，但是当我拖放按钮时，它总是最终调用 DoDragDrop 两次和 drop 事件处理程序两次. 有谁知道为什么会发生这种情况以及如何防止它？

下面是一些演示问题的示例 XAML：

```
<Window x:Class="WpfTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <DockPanel>
        <Button PreviewMouseMove="PreviewMouseMove" x:Name="m_button" Width="250">
            Hello, world!
        </Button>
        <Label Drop="Drop" AllowDrop="True">
            Drop here!
        </Label>
    </DockPanel>
</Window> 
```

和相应的代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void PreviewMouseMove(object sender, MouseEventArgs e)
    {
        if (e.LeftButton == MouseButtonState.Pressed)
        {
            ++m_dragIndex;
            System.Console.WriteLine("Dragged: " + m_dragIndex.ToString());
            DragDrop.DoDragDrop(m_button, m_dragIndex, DragDropEffects.All);
            e.Handled = true;
        }
    }

    private void Drop(object sender, DragEventArgs e)
    {
        System.Console.WriteLine("Dropped: " + e.Data.GetData(typeof(Int32)).ToString());
    }

    private int m_dragIndex;
} 
```

对于单次拖动，这将被写入输出：

```
Dragged: 1
Dragged: 2
Dropped: 2
Dropped: 1 
```

**更新：**我已经更改了上面的示例代码，以显示当按钮被拖放到某物上时会调用哪些拖放事件。

**更新：**更新了问题以包括在容器和应用程序实例之间拖动，因为这是使用 DragDrop 系统的激励因素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:47:38.530

我找到了一个解决方法——因为第一个 DoDragDrop 在内部调用第二个 PreviewMouseMove，我可以跟踪我是否已经在 PreviewMouseMove 调用中，如果我在，则忽略它。这似乎有点讨厌，所以我希望有更好的解决方案。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void PreviewMouseMove(object sender, MouseEventArgs e)
    {
        if(!m_inMouseMove)
        {
            m_inMouseMove = true;
            if (e.LeftButton == MouseButtonState.Pressed)
            {
                ++m_dragIndex;
                System.Console.WriteLine("Dragged: " + m_dragIndex.ToString());
                DragDrop.DoDragDrop(m_button, m_dragIndex, DragDropEffects.All);
                e.Handled = true;
            }
            m_inMouseMove = false;
        }
    }

    private void Drop(object sender, DragEventArgs e)
    {
        System.Console.WriteLine("Dropped: " + e.Data.GetData(typeof(Int32)).ToString());
    }

    private int m_dragIndex;
    bool m_inMouseMove;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T20:44:41.600

我有同样的问题。我发现 PreviewMouseMove 调用了两次，因为它第一次是由容器元素（例如 ListViewItem）引发的，第二次是针对 TextBlock 的。因此，我可以建议检查 e.OriginalSource 值的类型作为此问题的另一种解决方法。

# mysql - 在mysql中自己创建一个表关系

> ID：15632319
> 
> 赞同：3
> 
> 时间：2013-03-26T08:19:37.850
> 
> 标签：mysql, foreign-keys, relation, jointable

我有一张这样的桌子：

```
 CREATE TABLE `jngi_category` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `Name` varchar(50) NOT NULL,
      `parent` int(11) NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 
```

我想，当父母删除它的所有孩子时，删除。如果有任何由外键定义的关系，那么它会自动这样做是好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:23:38.573

在此列上添加外键`parent`约束`ON DELETE CASCADE`：

```
CONSTRAINT `FK_ParentCategory` FOREIGN KEY (`parent`)
REFERENCES jngi_category(id) ON DELETE CASCADE ON UPDATE CASCADE 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/c8a3e/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:57:35.020

试试这个 sql

```
CREATE TABLE jngi_category (
      id int(11) NOT NULL auto_increment,
      Name varchar(50) NOT NULL,
      parent int(11),
      PRIMARY KEY (id),
      foreign key (parent) references jngi_category(id) on delete cascade
    ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 ; 
```

# objective-c - 如何在 Objective-C 中将我的同步调用更改为异步调用？

> ID：15632322
> 
> 赞同：-2
> 
> 时间：2013-03-26T08:20:05.400
> 
> 标签：objective-c, asynchronous, nsurlconnection, grand-central-dispatch

嗨朋友，我是 Objective-ci 的初学者，由于同步调用，服务器端的响应很慢。我在 google 中分析，调用可能是异步的，意味着响应速度会很高，但我对`NSURLConnection`and了解不多`GCD`。所以请帮助我如何改变我的异步调用。请参阅下面的代码`

```
- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken { 

NSString* oldToken = [self deviceToken];

NSString *newToken = [[[[deviceToken description]stringByReplacingOccurrencesOfString:@"<"withString:@""]
                                            stringByReplacingOccurrencesOfString:@">" withString:@""]
                                            stringByReplacingOccurrencesOfString: @" " withString: @""];
NSLog(@"My token is: %@", newToken);

[self setDeviceToken:newToken];

if (![newToken isEqualToString:oldToken])
{
    [self calur:newToken];
}
    }

 - (NSString*)deviceToken{
return [[NSUserDefaults standardUserDefaults] stringForKey:@"deviceid"];
   }

 - (void)setDeviceToken:(NSString*)token{
[[NSUserDefaults standardUserDefaults] setObject:token forKey:@"deviceid"];
    }

  //This function used to store a notification device id to our notification databae
    -(void)calur:(NSString *)device
  {
NSString *post =[NSString stringWithFormat:@"deviceId=%@",device];
NSString *hostStr = @"https://myserver.com/Ver_2_0/notification/check.php?";
NSError *error = nil;

NSString *nocon=[NSString stringWithContentsOfURL:[NSURL URLWithString:hostStr]encoding:NSUTF8StringEncoding error:&error];
if (nocon == nil) 
{
    NSLog(@"NO Connection");
}
else 
{
    hostStr = [hostStr stringByAppendingString:post];
    NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: hostStr ]];    
    NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];

    NSLog(@"hostStr=%@",hostStr);
    NSLog(@"serverOutput = %@",serverOutput);
    NSLog(@"dataURL=%@",dataURL);
   // NSData *dataurl=dataURL;

    if([serverOutput isEqualToString:@"Token Updated Successfully"])
    {
        NSLog(@"badge updated");
    }

    else 
    {       
        NSLog(@"serverOutput = %@",serverOutput);

        NSLog(@"not registered");
    }
    [serverOutput release];
}
  }` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:33:28.007

```
if (nocon == nil) 
{
    NSLog(@"NO Connection");
}
else 
{
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            hostStr = [hostStr stringByAppendingString:post];
            NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: hostStr ]];
            NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];

            NSLog(@"hostStr=%@",hostStr);
            NSLog(@"serverOutput = %@",serverOutput);
            NSLog(@"dataURL=%@",dataURL);
            // NSData *dataurl=dataURL;

            if([serverOutput isEqualToString:@"Token Updated Successfully"])
            {
                NSLog(@"badge updated");
            }

            else
            {       
                NSLog(@"serverOutput = %@",serverOutput);

                NSLog(@"not registered");
            }
            [serverOutput release];
        });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:36:27.543

一个小片段：

```
#import "AFNetworking.h"
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:self.value, @"POSTvar", nil];
    AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL: [NSURL URLWithString:@"http://your.address"]];
    NSURLRequest *request = [client requestWithMethod:@"POST" path:nil parameters:params];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        // do some with JSON
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    [operation start];
}); 
```

[AFNetworking github](https://github.com/AFNetworking/AFNetworking)

# iphone - 数据源大于行号时的 UITableViewCell/UITextField 绘制问题

> ID：15632324
> 
> 赞同：1
> 
> 时间：2013-03-26T08:20:05.800
> 
> 标签：iphone, ios, uitableview, uitextfield

所以，这让我发疯了......一切都很好，除非我的数据源：一个*NSMutableArrray* : **_names**包含的项目多于*UITableView*中可见的行数：**namesTable**。然后所有的地狱都崩溃了……细胞相互重叠，有空的细胞，重复的细胞。

这是我的设置代码。

```
 @interface DetailViewController ()
    {
        NSMutableArray *_names;
    } 
```

我的 viewDidLoad 方法：

```
 - (void) viewDidLoad
    {
        [super viewDidLoad];
        self.navigationController.toolbar.barStyle = UIBarStyleBlackOpaque;
        [[UIApplication sharedApplication]setStatusBarStyle:UIStatusBarStyleBlackOpaque];

        UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(handleBack:)];

        self.navigationItem.leftBarButtonItem = backButton;
        if (!_names)
            _names = [[NSMutableArray alloc] init];
    } 
```

和 cellForRowAtIndexPath：

```
 - (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *cellId = @"MyCustomCell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellId];
        UITextField *nameTextField;

        if (!cell || refreshCells)
        {
             cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellId];
                                                                  self.view.bounds.origin.y+10,
                                                                  self.view.bounds.size.width-19,
                                                                  26.0)];*/
             nameTextField = [[UITextField alloc] initWithFrame:CGRectMake(self.view.bounds.origin.x+10,
                                                                  self.view.bounds.origin.y+4,
                                                                  self.view.bounds.size.width-19,
                                                                  34.0)];
        }

        nameTextField.adjustsFontSizeToFitWidth = YES;
        nameTextField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
        nameTextField.backgroundColor = [UIColor clearColor];
        nameTextField.autocorrectionType = UITextAutocorrectionTypeNo;
        nameTextField.autocapitalizationType = UITextAutocapitalizationTypeWords;
        nameTextField.textAlignment = UITextAlignmentLeft;
        nameTextField.font = [UIFont fontWithName:@"Noteworthy-Bold" size:22.0];
        nameTextField.keyboardType = UIKeyboardTypeDefault;
        nameTextField.returnKeyType = UIReturnKeyDone;
        nameTextField.clearButtonMode = UITextFieldViewModeNever;
        nameTextField.delegate = self;
        nameTextField.userInteractionEnabled = NO;

        NSString *object = _names[indexPath.row];
        nameTextField.text = [object description];
        [cell.contentView addSubview:nameTextField];
        cell.selectionStyle = UITableViewCellEditingStyleNone;

        return cell;
    } 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:25:39.717

我最终继承了 UITableViewCell，并将大部分代码移动到：

```
@implementation DetailViewCustomCell
@synthesize nameTextField;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        nameTextField = [[UITextField alloc] init];
        nameTextField.adjustsFontSizeToFitWidth = YES;
        nameTextField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
        nameTextField.backgroundColor = [UIColor clearColor];
        nameTextField.autocapitalizationType = UITextAutocapitalizationTypeWords;
        nameTextField.textAlignment = UITextAlignmentLeft;
        nameTextField.font = [UIFont fontWithName:@"Noteworthy-Bold" size:22.0];
        nameTextField.returnKeyType = UIReturnKeyDone;
        nameTextField.userInteractionEnabled = NO;

        [self.contentView addSubview:nameTextField];
        self.selectionStyle = UITableViewCellEditingStyleNone;
    }
    return self;
}

- (void)layoutSubviews
{
    [super layoutSubviews];
    CGRect contentRect = self.contentView.bounds;
    CGFloat boundsX = contentRect.origin.x+10;
    CGFloat boundsY = contentRect.origin.x+4;
    CGFloat boundsW = contentRect.size.width-19;
    CGRect frame;
    frame= CGRectMake(boundsX ,boundsY, boundsW, 34.0);
    nameTextField.frame = frame;
} 
```

在我的视图控制器中：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    DetailViewCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
        cell = [[DetailViewCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    NSString *object = _names[indexPath.row];
    cell.nameTextField.text = [object description];
    cell.nameTextField.delegate = self;

    return cell;
} 
```

这很完美！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:41:36.233

您可以使用 XIB 来设计您的单元，而不是编写这么多代码。还有那个 refreshCells 是什么？另外你在哪里向你的数组添加数据？

最好尝试在 XIB 和 IBOutlet 中设计单元格吧。然后将其加载到 cellForRow ...

每次向单元格添加一个文本字段时，在代码中

```
[cell.contentView addSubview:nameTextField]; 
```

这根本没有必要..

这可以解决你的问题。

# xpages - 部分更新后对 DOM 对象的更改丢失

> ID：15632325
> 
> 赞同：1
> 
> 时间：2013-03-26T08:20:07.540
> 
> 标签：xpages

在一个页面上，我有一些我想要“只读”的字段*（在我的意思是它们无法访问，但它们会存储值，如果出现问题，请阅读之前的问题......）*。

我使用客户端 JS 在页面加载时设置这些属性：

```
$(".readonly").attr('readonly', true); 
```

如果我对这些字段中的任何一个进行了部分更新，则该属性将丢失并且该字段可访问。

克服这一点并使其发挥作用的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:26:51.760

每个部分刷新都有一个绑定到它的 oncomplete 方法。您可以做的是将代码添加到 oncomplete 方法，以便再次将项目设置为只读。另一种更好的方法是不更改客户端属性，而是使用隐藏字段来存储数据。

例如，当您将事件绑定到 Link 控件时，您可以通过单击事件标记上的源窗格来更改 oncomplete 代码。当您浏览属性窗格中的事件部分时，您将看到 onComplete、onError、onStart 属性。您可以在这些属性中添加自己的客户端脚本。

![截屏](../Images/4ab15091407524dce6af8f2473cdbd68.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:56:00.173

在尝试克服“问题”之前，您应该尝试了解部分刷新的确切作用以及应用程序状态的保存位置。

不幸的是，部分刷新正在用新创建的内容替换当前的 html 内容（或更确切地说是其中的一部分），并且只有具有支持控件的表单字段才会保持状态。

我建议你应该尝试在你想只读的控件上设置只读属性（如果这里有一些逻辑你总是可以使用 ssjs）。

或者，您可以尝试通过使用 csjs 全局变量来保留客户端的状态，但这很难管理。

还有一件事 - 尝试使用技术来解决问题（xpages）并尽量不要使用您不小心知道的东西（jquery）来破解您的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:49:23.133

我同意*jjtbsomhorst*关于使用`onComplete`事件的观点。但另一种选择是`readonly`通过如下代码设置属性：

```
var textField:com.ibm.xsp.component.xp.XspInputText = getComponent("inputText1");
var readOnlyAttr:com.ibm.xsp.complex.Attr = new com.ibm.xsp.complex.Attr("readonly", "readonly");
var list:java.util.ArrayList = new java.util.ArrayList();
list.add(readOnlyAttr);
textField.setAttrs(list); 
```

您可以`afterPageLoad`在 XPage 事件中调用它。但我真的不知道这是否是最好的方式！

# html - addthis 和谷歌分析没有通过 html5 验证

> ID：15632335
> 
> 赞同：3
> 
> 时间：2013-03-26T08:20:58.323
> 
> 标签：html, google-analytics, addthis, html5-validation

这些是我得到的错误和警告：

> 第 135 行，第 134 列：& 没有开始字符引用。（& 可能应该被转义为 &。）Rk44QGJO&hl=he">
> 
> 第 135 行，第 309 列：iframe 元素上的 frameborder 属性已过时。改用 CSS。…ight="300" width="500" frameborder="0">
> 
> 第 161 行，第 116 列：属性 addthis:url 不可序列化为 XML 1.0。
> 
> 属性 addthis:title 不可序列化为 XML 1.0。
> 
> 属性 addthis:description 不可序列化为 XML 1.0。
> 
> 此时元素 div 上不允许使用 addthis:url 属性。
> 
> 此时元素 div 上不允许使用 addthis:title 属性。
> 
> 属性 fb:like:layout 不可序列化为 XML 1.0。
> 
> 此时元素 a 上不允许使用 fb:like:layout 属性。

这是addthis代码：

```
 <div class="addthis_toolbox addthis_default_style"
                     addthis:url="http://www.example.com"
                     addthis:title="title"
                     addthis:description="description">
                <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
                <a class="addthis_button_tweet" lang="en"></a>
                <a class="addthis_button_linkedin_counter"></a>
                </div> 
```

有谁知道如何修复那里的错误？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T05:51:34.963

To Fix Attribute fb:like:layout :- You can actually remove the following: fb:like:layout="button_count"

since button count is the default layout.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-22T16:30:50.780

聚会有点晚了，但也许它可以帮助别人？我自己实际上并没有尝试过这个实现，但是查看代码它看起来像是一个很好的“hack”修复你的问题——前提是你已经在你的网站上使用了 jQuery。

我知道人们会说“别担心，它不会破坏任何东西”，但是当你虔诚地验证你的代码时（我相信你应该这样做，以找到你忘记的丢失的结束标签等），这些类型的讨厌的错误只会妨碍以最快的方式验证您的代码。

无论如何，这里是链接：[http ://www.teslina.com/1879/allgemein/addthis-html5-workaround-js-hack/#sthash.4dHK9Zwl.mkBH3Z0g.dpbs](http://www.teslina.com/1879/allgemein/addthis-html5-workaround-js-hack/#sthash.4dHK9Zwl.mkBH3Z0g.dpbs)

# out-of-memory - “Android-Universal-Image-Loader”出现内存不足错误

> ID：15632345
> 
> 赞同：0
> 
> 时间：2013-03-26T08:21:33.950
> 
> 标签：out-of-memory, universal-image-loader

我用 Android-Universal-Image-Loader 制作了 gridview

而且，当我选择一张图片时，它会出现在 imageview 上。

当我首先选择它时，它工作正常。但第二个崩溃了。（记不清）

我加载了超过 1M 大小的图像（最初是默认相机拍摄的）

这是初始化的代码

```
 ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
        .memoryCacheExtraOptions(480, 800) // default = device screen dimensions
        .discCacheExtraOptions(480, 800, CompressFormat.JPEG, 75)
        .taskExecutor(AsyncTask.THREAD_POOL_EXECUTOR)
        .taskExecutorForCachedImages(AsyncTask.THREAD_POOL_EXECUTOR)
        .threadPoolSize(3) // default
        .denyCacheImageMultipleSizesInMemory()
        .memoryCacheSize(2 * 1024 * 1024)
        .discCacheSize(50 * 1024 * 1024)
        .discCacheFileCount(100)
        .enableLogging()
        .build(); 
```

这是选择它时的获取uri

```
 listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // when clicked image
            //startImagePagerActivity(position);
            //URI imageUri = URI.parse("android.resource://com.kmob.camera/" + parent.getItemIdAtPosition(position));
            SignUp.profilePath =  Uri.parse(imageUrls[position].substring(7)); // return selected uri except prefix, "file://"
            Log.v("OWL", "selected file: " + imageUrls[position].substring(7));
            finish();

        }
    }); 
```

这是活动的结果

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    //mProfile.notifyAll();
    if(profilePath.getPath().toString().length()>0){
        mProfile.setImageURI(profilePath);
    }
} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T09:36:52.360

根据作者的建议，在 displayoptions 中提到以下两行

```
.imageScaleType(ImageScaleType.IN_SAMPLE_INT)
.bitmapConfig(Config.RGB_565) in displayioptions. 
```

并且在配置中

```
.memorycache(new WeakMemoryCache()) 
```

# javascript - 使用 JavaScript 进行客户端日期验证

> ID：15632354
> 
> 赞同：-1
> 
> 时间：2013-03-26T08:22:19.330
> 
> 标签：javascript, datepicker, client-side-validation

我有一个表单，其中有 2 个 jQuery 日期选择器，一个用于开始日期，另一个用于结束日期。我想在它们上添加日期范围验证，以便客户无法选择今天的日期和未来的日期。

```
@{Html.BeginForm("ExportToExcel", "marketing", FormMethod.Get);}
<input type="hidden" value="@ViewBag.StartDate" name ="EXsd" />
<input type="hidden" value="@ViewBag.EndDate" name = "EXst" />
@{Html.EndForm();} 
```

谁能告诉我如何编写 JavaScript 函数来添加日期验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:24:09.543

[http://jqueryui.com/datepicker/#min-max](http://jqueryui.com/datepicker/#min-max)

> 使用 minDate 和 maxDate 选项限制可选日期的范围。将开始日期和结束日期设置为实际日期 (new Date(2009, 1 - 1, 26))、从今天开始的数字偏移量 (-20) 或一串句点和单位 ('+1M +10D') . 最后，使用“D”表示天，“W”表示周，“M”表示月，或“Y”表示年。

# django - 无法将文档添加到 Solr：[原因：错误 400 [doc=null] 缺少必填字段：site_id]

> ID：15632357
> 
> 赞同：0
> 
> 时间：2013-03-26T08:22:33.847
> 
> 标签：django, solr, django-haystack

这让我发疯了好几个小时。我不知道该怎么做。在我的本地机器上，重建索引工作正常。在我们的服务器上也是如此。在以与旧服务器相同的方式设置的新服务器上，它会失败。

这是我得到的输出：

```
Indexing 0 billboard items.
Indexing 0 companys.
Indexing 1 personal profiles.
Failed to add documents to Solr: [Reason: Error 400 [doc=null] missing required field: site_id]
Indexing 0 degrees.
Indexing 0 work experiences. 
```

该错误会出现在所有模型上，我清理了数据库并添加了一个 PersonalProfile，这就是为什么您在这里只看到一个模型的原因。

我的模型都没有`site_id`字段。我们正在使用 django-blog-zinnia，它利用了 Django 的站点框架，但我们根本没有将 zinnia 添加到搜索中。我们的整个代码库根本不包含这个词`site_id`，除了百日草的南迁。

在我的 requirements.txt 我正在使用：

```
-e git+git://github.com/toastdriven/django-haystack.git@a169ff696ffb739a2ceb0f18c536d5b54c59a235#egg=haystack
pysolr==2.1.0 
```

我的 search_indexes.py 看起来像这样：

```
class WorkExperienceIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    user = indexes.CharField()
    job_title = indexes.CharField()
    industry = indexes.CharField(null=True)
    company_name = indexes.CharField(null=True)
    location = indexes.CharField(null=True)
    start_date = indexes.DateField(null=True)
    end_date = indexes.DateField(null=True)
    job_summary = indexes.CharField(null=True)
    technical_skills = indexes.CharField(null=True)
    courses_taken = indexes.CharField(null=True)

    def get_model(self):
        return WorkExperience

    def prepare_user(self, obj):
        return obj.user.email 
```

在 myproject/templates/search_configuration/solr.xml 我有这个：

```
<?xml version="1.0" ?>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<schema name="default" version="1.4">
    <types>
        <fieldtype name="string"  class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
        <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
        <fieldtype name="binary" class="solr.BinaryField"/>

    <!-- Numeric field types that manipulate the value into
        a string value that isn't human-readable in its internal form,
        but with a lexicographic ordering the same as the numeric ordering,
        so that range queries work correctly. -->
    <fieldType name="int" class="solr.TrieIntField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
    <fieldType name="float" class="solr.TrieFloatField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
    <fieldType name="long" class="solr.TrieLongField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
    <fieldType name="double" class="solr.TrieDoubleField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>

    <fieldType name="tint" class="solr.TrieIntField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tfloat" class="solr.TrieFloatField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tlong" class="solr.TrieLongField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tdouble" class="solr.TrieDoubleField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>

    <fieldType name="date" class="solr.TrieDateField" omitNorms="true" precisionStep="0" positionIncrementGap="0"/>
    <!-- A Trie based date field for faster date range queries and date faceting. -->
    <fieldType name="tdate" class="solr.TrieDateField" omitNorms="true" precisionStep="6" positionIncrementGap="0"/>

    <fieldType name="point" class="solr.PointType" dimension="2" subFieldSuffix="_d"/>
    <fieldType name="location" class="solr.LatLonType" subFieldSuffix="_coordinate"/>
    <fieldtype name="geohash" class="solr.GeoHashField"/>

    <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.NGramTokenizerFactory" minGramSize="3" maxGramSize="5"/>
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
            <!-- in this example, we will only use synonyms at query time
            <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
            -->
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.NGramTokenizerFactory" minGramSize="3" maxGramSize="5"/>
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
            <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
    </fieldType>

    <fieldType name="text_en" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.NGramTokenizerFactory" minGramSize="3" maxGramSize="5"/>
            <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords_en.txt"
                enablePositionIncrements="true"
                />
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EnglishPossessiveFilterFactory"/>
            <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
            <!-- Optionally you may want to use this less aggressive stemmer instead of PorterStemFilterFactory:
                <filter class="solr.EnglishMinimalStemFilterFactory"/>
            -->
            <filter class="solr.PorterStemFilterFactory"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.NGramTokenizerFactory" minGramSize="3" maxGramSize="5"/>
            <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
            <filter class="solr.StopFilterFactory"
                ignoreCase="true"
                words="stopwords_en.txt"
                enablePositionIncrements="true"
                />
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EnglishPossessiveFilterFactory"/>
            <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
            <!-- Optionally you may want to use this less aggressive stemmer instead of PorterStemFilterFactory:
                <filter class="solr.EnglishMinimalStemFilterFactory"/>
            -->
            <filter class="solr.PorterStemFilterFactory"/>
        </analyzer>
    </fieldType>

    <fieldType name="text_ws" class="solr.TextField" positionIncrementGap="100">
        <analyzer>
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        </analyzer>
    </fieldType>

    <fieldType name="ngram" class="solr.TextField" >
        <analyzer type="index">
            <tokenizer class="solr.KeywordTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.NGramFilterFactory" minGramSize="3" maxGramSize="15" />
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.KeywordTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
    </fieldType>

    <fieldType name="edge_ngram" class="solr.TextField" positionIncrementGap="1">
        <analyzer type="index">
            <tokenizer class="solr.WhitespaceTokenizerFactory" />
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
            <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="front" />
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.WhitespaceTokenizerFactory" />
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
        </analyzer>
    </fieldType>
</types>

    <fields>
        <!-- general -->
        <field name="{{ ID }}" type="string" indexed="true" stored="true" multiValued="false" required="true"/>
        <field name="{{ DJANGO_CT }}" type="string" indexed="true" stored="true" multiValued="false"/>
        <field name="{{ DJANGO_ID }}" type="string" indexed="true" stored="true" multiValued="false"/>

    <dynamicField name="*_i"  type="int"    indexed="true"  stored="true"/>
    <dynamicField name="*_s"  type="string"  indexed="true"  stored="true"/>
    <dynamicField name="*_l"  type="long"   indexed="true"  stored="true"/>
    <dynamicField name="*_t"  type="text_en"    indexed="true"  stored="true"/>
    <dynamicField name="*_b"  type="boolean" indexed="true"  stored="true"/>
    <dynamicField name="*_f"  type="float"  indexed="true"  stored="true"/>
    <dynamicField name="*_d"  type="double" indexed="true"  stored="true"/>
    <dynamicField name="*_dt" type="date" indexed="true" stored="true"/>
    <dynamicField name="*_p" type="location" indexed="true" stored="true"/>
    <dynamicField name="*_coordinate"  type="tdouble" indexed="true"  stored="false"/>

{% for field in fields %}
    <field name="{{ field.field_name }}" type="{{ field.type }}" indexed="{{ field.indexed }}" stored="{{ field.stored }}" multiValued="{{ field.multi_valued }}" />
{% endfor %}
    </fields>

    <!-- field to use to determine and enforce document uniqueness. -->
    <uniqueKey>{{ ID }}</uniqueKey>

    <!-- field for the QueryParser to use when an explicit fieldname is absent -->
    <defaultSearchField>{{ content_field_name }}</defaultSearchField>

    <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
    <solrQueryParser defaultOperator="{{ default_operator }}"/>
</schema> 
```

当我尝试重建索引时，我正在这样做：

```
supervisorctl stop solr
workon kairos && $HOME/webapps/kairos_django/myproject/manage.py build_solr_schema > $HOME/opt/apache-solr-3.5.0/example/solr/conf/schema.xml
supervisorctl start solr
workon kairos && $HOME/webapps/kairos_django/myproject/manage.py rebuild_index --noinput 
```

这是我从中得到的生成的 schema.xml：

```
<?xml version="1.0" ?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<schema name="default" version="1.4">
    <types>
        <fieldtype name="string"  class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
        <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
        <fieldtype name="binary" class="solr.BinaryField"/>

    <!-- Numeric field types that manipulate the value into
       a string value that isn't human-readable in its internal form,
       but with a lexicographic ordering the same as the numeric ordering,
       so that range queries work correctly. -->
    <fieldType name="int" class="solr.TrieIntField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
    <fieldType name="float" class="solr.TrieFloatField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
    <fieldType name="long" class="solr.TrieLongField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
    <fieldType name="double" class="solr.TrieDoubleField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>

    <fieldType name="tint" class="solr.TrieIntField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tfloat" class="solr.TrieFloatField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tlong" class="solr.TrieLongField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
    <fieldType name="tdouble" class="solr.TrieDoubleField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>

    <fieldType name="date" class="solr.TrieDateField" omitNorms="true" precisionStep="0" positionIncrementGap="0"/>
    <!-- A Trie based date field for faster date range queries and date faceting. -->
    <fieldType name="tdate" class="solr.TrieDateField" omitNorms="true" precisionStep="6" positionIncrementGap="0"/>

    <fieldType name="point" class="solr.PointType" dimension="2" subFieldSuffix="_d"/>
    <fieldType name="location" class="solr.LatLonType" subFieldSuffix="_coordinate"/>
    <fieldtype name="geohash" class="solr.GeoHashField"/>

    <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.NGramTokenizerFactory" minGramSize="3" maxGramSize="5"/>
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
            <!-- in this example, we will only use synonyms at query time
           <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
           -->
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.NGramTokenizerFactory" minGramSize="3" maxGramSize="5"/>
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
            <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
    </fieldType>

    <fieldType name="text_en" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.NGramTokenizerFactory" minGramSize="3" maxGramSize="5"/>
            <filter class="solr.StopFilterFactory"
               ignoreCase="true"
               words="stopwords_en.txt"
               enablePositionIncrements="true"
               />
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EnglishPossessiveFilterFactory"/>
            <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
            <!-- Optionally you may want to use this less aggressive stemmer instead of PorterStemFilterFactory:
               <filter class="solr.EnglishMinimalStemFilterFactory"/>
           -->
            <filter class="solr.PorterStemFilterFactory"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.NGramTokenizerFactory" minGramSize="3" maxGramSize="5"/>
            <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
            <filter class="solr.StopFilterFactory"
               ignoreCase="true"
               words="stopwords_en.txt"
               enablePositionIncrements="true"
               />
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.EnglishPossessiveFilterFactory"/>
            <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
            <!-- Optionally you may want to use this less aggressive stemmer instead of PorterStemFilterFactory:
               <filter class="solr.EnglishMinimalStemFilterFactory"/>
           -->
            <filter class="solr.PorterStemFilterFactory"/>
        </analyzer>
    </fieldType>

    <fieldType name="text_ws" class="solr.TextField" positionIncrementGap="100">
        <analyzer>
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        </analyzer>
    </fieldType>

    <fieldType name="ngram" class="solr.TextField" >
        <analyzer type="index">
            <tokenizer class="solr.KeywordTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.NGramFilterFactory" minGramSize="3" maxGramSize="15" />
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.KeywordTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
    </fieldType>

    <fieldType name="edge_ngram" class="solr.TextField" positionIncrementGap="1">
        <analyzer type="index">
            <tokenizer class="solr.WhitespaceTokenizerFactory" />
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
            <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="front" />
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.WhitespaceTokenizerFactory" />
            <filter class="solr.LowerCaseFilterFactory" />
            <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
        </analyzer>
    </fieldType>
</types>

    <fields>
        <!-- general -->
        <field name="id" type="string" indexed="true" stored="true" multiValued="false" required="true"/>
        <field name="django_ct" type="string" indexed="true" stored="true" multiValued="false"/>
        <field name="django_id" type="string" indexed="true" stored="true" multiValued="false"/>

    <dynamicField name="*_i"  type="int"    indexed="true"  stored="true"/>
    <dynamicField name="*_s"  type="string"  indexed="true"  stored="true"/>
    <dynamicField name="*_l"  type="long"   indexed="true"  stored="true"/>
    <dynamicField name="*_t"  type="text_en"    indexed="true"  stored="true"/>
    <dynamicField name="*_b"  type="boolean" indexed="true"  stored="true"/>
    <dynamicField name="*_f"  type="float"  indexed="true"  stored="true"/>
    <dynamicField name="*_d"  type="double" indexed="true"  stored="true"/>
    <dynamicField name="*_dt" type="date" indexed="true" stored="true"/>
    <dynamicField name="*_p" type="location" indexed="true" stored="true"/>
    <dynamicField name="*_coordinate"  type="tdouble" indexed="true"  stored="false"/>

    <field name="type" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="description" type="date" indexed="true" stored="true" multiValued="false" />

    <field name="title" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="text" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="is_completed" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="place_of_work" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="personal_characteristics" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="responsibilities" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="work_experience" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="educational_level" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="owner" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="is_verified" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="amount_of_vacancies" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="annual_turnover" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="local_shareholding" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="number_of_employees" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="collaboration" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="user" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="name" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="end_date" type="date" indexed="true" stored="true" multiValued="false" />

    <field name="field_of_study" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="degree_awarded" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="awarding_institution" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="location" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="technical_skills" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="start_date" type="date" indexed="true" stored="true" multiValued="false" />

    <field name="email_personal" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="first_name" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="last_name" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="phone_work" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="skills" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="email_work" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="address_home" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="address_office" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="self_description" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="date_of_birth" type="date" indexed="true" stored="true" multiValued="false" />

    <field name="country_of_birth" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="phone_personal" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="nationality" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="collaboration_projects" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="cv" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="industry" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="job_summary" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="company_name" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="courses_taken" type="text_en" indexed="true" stored="true" multiValued="false" />

    <field name="job_title" type="text_en" indexed="true" stored="true" multiValued="false" />

    </fields>

    <!-- field to use to determine and enforce document uniqueness. -->
    <uniqueKey>id</uniqueKey>

    <!-- field for the QueryParser to use when an explicit fieldname is absent -->
    <defaultSearchField>text</defaultSearchField>

    <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
    <solrQueryParser defaultOperator="AND"/>
</schema> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:38:27.427

感谢 Alexandre Rafalovitch，他的评论为我指明了正确的方向。

事实证明，supervisor 在没有报告任何错误的情况下启动和停止 solr。当我手动启动 solr 时，我会看到它无法启动，因为该端口已被占用。

这意味着，我在不知不觉中遗漏了最重要的信息：我在一个共享托管环境中工作，另一个用户已经设置了他自己的 solr 实例。

为了进一步验证我确保主管和“我的”solr 实例已停止。然后我跑了

```
curl http://localhost:8983/solr 
```

我得到了回应。

现在事情很容易。我改变了端口

```
~/opt/apache-solr-3.5.0/example/etc/jetty.xml 
```

在我的 Django 项目`8984`中`local_settings.py`，我添加了以下内容：

```
HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.solr_backend.SolrEngine',
        'URL': 'http://127.0.0.1:8984/solr'
    },
} 
```

等等。现在我可以再次重建我的索引。

# r - R cov(x) 其中 x 是 data.frame 一行

> ID：15632358
> 
> 赞同：0
> 
> 时间：2013-03-26T08:22:45.983
> 
> 标签：r, statistics, dataframe, covariance

我需要计算 data.frame 的协方差，但如果 data.frame 只有一行，我会得到 NaN 矩阵。我应该怎么做data.frame的协方差与一行？

主要问题是：我有一个来自正态分布的观察结果（是的，有时它太小了）我想计算均值和协方差矩阵以最大化似然函数

如果只有一个观察结果是可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:15:22.167

摘自`?cov`

```
The denominator n - 1 is used which gives an unbiased estimator of
the (co)variance for i.i.d. observations.  These functions return
‘NA’ when there is only one observation (whereas S-PLUS has been
returning ‘NaN’), and fail if ‘x’ has length zero. 
```

如果您需要除以`n`而不是`n-1`，我建议编写一个特殊的协方差函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:24:54.437

如果您只有一个观察值，则未定义协方差。因此，矩阵`NaN`是完全合理的输出。

至于如何在您的问题的背景下最好地处理这个问题，在不了解您的问题的情况下是不可能说的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:40:53.627

根据您的评论，执行以下操作：

检查数据框是否只有一行。如果它只有一行，请使用`var`R 中的函数而不是函数来查找方差`cov`。如果它有多于一行，请使用`cov`.

请注意，向量与其自身的协方差与该向量的方差相同。

# android - Android：手动屏幕方向而不重新启动活动？

> ID：15632360
> 
> 赞同：9
> 
> 时间：2013-03-26T08:22:56.397
> 
> 标签：android, android-activity, orientation, restart, manual

我需要制作一个应用程序播放视频，并带有一个按钮以在视频上全屏显示。该按钮用于手动切换视频显示的横向和纵向。我们不希望自动旋转检测。所以 Manifest 文件设置如下。

```
<activity
    android:name=".VideoActivity"
    android:screenOrientation="portrait"
    android:configChanges="keyboardHidden"/> 
```

我用了

`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);`或者`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);`

手动设置方向。它可以工作，但它会重新启动活动 - 发现调用了 onCreate()。所以视频播放意外地从头开始。我不能让它像使用`onConfigurationChanged()`自动旋转检测方法一样平滑。

那么如何在不重新启动活动的情况下手动更改屏幕方向？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-29T04:09:53.757

对于手动方向更改：

```
<activity
    android:name=".VideoDetails"
    android:configChanges="orientation"/>

public class VideoDetails extends Activity {
    ...
    onStart() {
        setRequestedOrientation(orientation);
    }
    onConfigurationChanged(Configuration newConfig){
        // do stuff for orientation change.
    }
    onClick() {
        setRequestedOrientation(orientation);
    }
} 
```

对于自动方向检测：

```
<activity
    android:name=".VideoDetails"
    android:configChanges="orientation"/>

public class VideoDetails extends Activity {
    ...
    onConfigurationChanged(Configuration newConfig){
        // do stuff for orientation change.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:35:52.797

[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)。您可以查看**“自己处理配置更改”标题下的链接**

```
<activity android:name=".MyActivity"
      android:configChanges="orientation|keyboardHidden"
      android:label="@string/app_name"> 
```

现在，当这些配置之一发生更改时，MyActivity 不会重新启动。相反，MyActivity 收到对 onConfigurationChanged() 的调用。此方法传递一个配置对象，该对象指定新的设备配置。

```
 android:configChanges="orientation|screenSize" (andorid 3.2 and above screen size also changes. add this) 
```

假设您的视频时长为 10 分钟。视频播放到 5 分钟并且方向发生变化，您知道它已经播放到 5 分钟。

您可以在 onSaveInstanceState() 中保存视频的实际进度，并从 Bundle 中获取保存在 onRestoreInstanceState() 中的数据，之后您可以使用进度数据开始播放，或者如果没有保存数据则从头开始播放。

当方向改变时，活动被破坏并重新创建。如果要保存数据并保留，可以执行以下操作以保存大量数据

```
 @Override
 public Object onRetainNonConfigurationInstance() {
 final MyDataObject data = collectMyLoadedData();
 return data;
 }

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

final MyDataObject data = (MyDataObject) getLastNonConfigurationInstance();
if (data == null) {
    data = loadMyData();
}

} 
```

对于少量数据

```
 @Override
 public void onSaveInstanceState(Bundle savedInstanceState) {
 super.onSaveInstanceState(savedInstanceState);
 // Save UI state changes to the savedInstanceState.
 // This bundle will be passed to onCreate if the process is
 // killed and restarted.
 savedInstanceState.putString("NICK_NAME", Name);//save nick name
 }

 @Override
 public void onRestoreInstanceState(Bundle savedInstanceState) {
 super.onRestoreInstanceState(savedInstanceState);
 // Restore UI state from the savedInstanceState.
 // This bundle has also been passed to onCreate.
 Name = savedInstanceState.getString("NICK_NAME");//restore nick name
 } 
```

检查方向

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
super.onConfigurationChanged(newConfig);

// Checks the orientation of the screen
if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
    Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
} else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
    Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
}
} 
```

[Android](https://stackoverflow.com/questions/4521970/problem-using-videoview-in-android)中的视频视图。在这种情况下，视频也是从服务器流式传输的。检查接受的答案（commonsware answer）。跟我建议的一模一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T08:30:23.680

首先将`android:configChanges`节点添加到`Activity's`清单节点

```
android:configChanges="keyboardHidden|orientation" 
```

有关更多信息，请查看[此](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)链接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:06:47.443

添加标签

```
"android:configChanges="keyboard|keyboardHidden|orientation|screenSize|navigation" for your activity in Manifest.xml, 
```

并覆盖该方法

```
public void onConfigurationChanged(Configuration newConfig) {} 
```

如果您需要在方向更改时更改布局，请检查此 [替换方向更改时的布局](https://stackoverflow.com/questions/13848500/replace-layout-on-orientation-change)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T20:38:04.637

在方向更改后重新启动应用程序是不可避免的。

将与视频状态相关的变量保留在 Application 上，以便 Activity 在开始时不会重新开始播放。

此代码来自我为测试此答案而制作的示例应用程序。

```
public class MyApplication extends Application {
int counter;
@Override
public void onCreate() {
    super.onCreate();
    counter = 0;
    }
} 
```

在清单中添加应用程序

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    android:name="com.example.orientationchange.MyApplication" >
    <activity
 ... 
```

在活动中使用：

```
public class MainActivity extends Activity {

TextView output;
MyApplication app ;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    app = (MyApplication) getApplication();
    setContentView(R.layout.activity_main);
    output = (TextView) findViewById(R.id.output);
    //A counter thread used to test the solution.
    new CounterTask().execute( 100 );
}
 ... 
```

现在轮换不会清除状态变量。

您也可以使用 Preferences 来获得更多代码量的解决方案来保留状态。首选项还将记住从一次使用应用程序到另一次使用的状态，其中应用程序状态在应用程序的 onDestroy() 中被清除。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-20T13:46:15.913

我一直在寻找解决方案，对我来说，将 Manifest 中的方向定义为已**锁定**：

```
<activity
    android:name=".VideoActivity"
    android:screenOrientation="locked"
    android:configChanges="keyboardHidden"/> 
```

即使您调用*setRequestedOrientation() ，这也可以防止重新创建 Activity*

# c# - 无法反序列化列表 来自有效的 JSON

> ID：15632363
> 
> 赞同：0
> 
> 时间：2013-03-26T08:22:59.003
> 
> 标签：c#, json, deserialization

我正在尝试将 JSON 字符串反序列化为对象列表。json 字符串是从[http://jsonlint.com/验证的有效 json](http://jsonlint.com/)

这是字符串

```
[
{
    "Employee_OID": 18450,
    "First_Name": "ABDUL",
    "Last_Name": "RAJPUT"
},
{
    "Employee_OID": 22446,
    "First_Name": "ABDUL",
    "Last_Name": "KHAN"
}
] 
```

以前我通过以下代码成功反序列化单个对象

```
Employee emp = (new JavaScriptSerializer()).Deserialize<Employee>(hdfEmployees.Value); 
```

但是现在当我试图通过相同的代码反序列化对象列表时

```
List<Employee> emp = (new JavaScriptSerializer()).Deserialize<List<Employee>>(hdfEmployees.Value); 
```

它给了我以下错误

```
Invalid JSON primitive: <my json string> 
```

我也尝试过 IList 和 Employee[] 代替 List （正如另一个问题的答案所建议的那样），但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:38:01.357

您的错误未连接到`JavaScriptSerializer`. 我刚刚测试了以下代码：

```
string input = string.Join(Environment.NewLine, File.ReadAllLines("Input.txt"));
List<Employee> emp = (new JavaScriptSerializer()).Deserialize<List<Employee>>(input); 
```

where`Input.txt`包含您的示例输入，它工作得很好 =`emp`是一个包含 2 个`Employee`对象的列表。

`Employee`类定义为

```
public class Employee
{

    public int Employee_OID { get; set; }
    public string First_Name { get; set; }
    public string Last_Name { get; set; }
} 
```

如果它确实与您的问题示例数据匹配，您必须检查您的输入字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:39:13.357

这个对我有用：

```
public class Employee
{
    public int Employee_OID { get; set; }
    public string First_Name { get; set; }
    public string Last_Name { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        string json = @"[{""Employee_OID"": 18450,""First_Name"": ""ABDUL"",""Last_Name"": ""RAJPUT""},{""Employee_OID"": 22446,""First_Name"": ""ABDUL"",""Last_Name"": ""KHAN""}]";
        List<Employee> emp = (new JavaScriptSerializer()).Deserialize<List<Employee>>(json);
        Console.WriteLine(emp.First().First_Name);
    }
} 
```

所以检查你的输入

# php - 如何建立将mysql转换为PDO的数据库连接？

> ID：15632364
> 
> 赞同：2
> 
> 时间：2013-03-26T08:22:59.257
> 
> 标签：php, mysql, pdo

我试图将我所有的 mysql 代码转换为 PDO。我尝试转换为 PDO 的第一件事是我的数据库连接。有人可以帮助我正确的方式吗？...

这是我在mysql中的数据库连接：

```
 $host = "localhost"; 
$user = "root"; 
$password = "root";
$db = "blog";

$bd = mysql_connect($host, $user, $password) or die("Opps something wrong...");
mysql_select_db($db, $bd) or die("Opps something wrong..."); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:26:00.903

查看 PHP 手册的[PDO 页面](http://php.net/manual/en/book.pdo.php "PDO 页面")，尤其是“连接和连接管理”部分：[http ://www.php.net/manual/en/pdo.connections.php](http://www.php.net/manual/en/pdo.connections.php)

```
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass); 
```

或者......使用常识队长的方法:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:38:03.067

有一个[PDO 标签 wiki ，您可以在其中向](https://stackoverflow.com/tags/pdo/info)*真正*有 PDO 经验的人学习正确的方法（以及许多其他有用的东西） 。

```
$dsn = "mysql:host=$host;dbname=$db;charset=utf8";
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$pdo = new PDO($dsn,$username,$password, $opt); 
```

与所有其他对处理*连接错误无用的代码（因为它们在实际连接**后*设置异常模式）不同，它将

*   使PHP在连接错误时抛出异常
*   不会通过回显错误来向实时服务器上的潜在攻击者泄露敏感信息。
*   为您提供不可或缺的*堆栈跟踪*。
*   在正确的位置设置连接编码

与您的旧代码不同，它不会因无用的消息而死，但它要么

*   在屏幕上显示有用的错误消息而死
*   死亡并记录有用的错误消息，使屏幕空白
*   死亡并记录有用的错误消息，并显示常规错误页面
*   根本不会死，而是用指定的处理函数优雅地处理

...取决于选择的设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T08:24:49.237

与错误处理的连接..

```
try {
    $conn = new PDO('mysql:host=localhost;dbname=myDatabase', $username, $password);
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:26:58.187

```
$conn = new PDO('mysql:host=localhost;dbname=myDatabase', $username, $password); 
```

**或者**

```
try {
    $conn = new PDO('mysql:host=localhost;dbname=blog', $username, $password);
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

更多详情请[点击这里](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T08:27:15.007

你看过[说明书](http://www.php.net/manual/en/pdo.connections.php)吗？

```
$dbh = new PDO('mysql:host=localhost;dbname=yourdbname', 'youruser', 'yourpassword'); 
```

# r - 生成过度混合的向量

> ID：15632366
> 
> 赞同：0
> 
> 时间：2013-03-26T08:23:08.157
> 
> 标签：r

想象一下在 x 轴上运行的平滑颜色曲线，从左侧的白色到右侧的红色。此梯度由 描述`x`。

```
set.seed(444)
x <-sort(runif(10,0,1))
x
 #[1] 0.04887351 0.05602405 0.16805309 0.18510214 0.28311653 0.36549003 0.38968610 
 #    0.55943791 0.57680379 0.84906069 
```

向量中`x`彼此相邻的元素比序列中距离较远的元素更相似。我可以将此向量与 随机混合`sample(x,10)`。但是，如果我想改组`x`以使彼此相邻的数字（最近的邻居）比相距较远的数字更有可能彼此不同，那么实现此目的的好方法是什么？

例如，对于 x，一个元素与其最接近的元素的平均值之间的相关性是明确的：

```
neighbour <- c(x[2],mean(x[1],x[3]),mean(x[2],x[4]),mean(x[3],x[5]),
               mean(x[4],x[6]),mean(x[5],x[7]),mean(x[6],x[8]),
               mean(x[7],x[9]),mean(x[8],x[10]),x[9])
 cor(x,neighbour)
#[1] 0.9539783 
```

我想产生洗牌`x`来产生一个`cor()`强烈负面的向量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:45:20.903

由于测试每个排列并取最小值的排列并不合理`cor`（因为排列的数量是`10!`3 628 800），您可以尝试优化。这是一种方法：

```
a <- sort(runif(10,0,1))

#The function to minimize
f<-function(par,vec){
    x<-vec[par]
    neighbour <- c(x[2],mean(x[1],x[3]),mean(x[2],x[4]),mean(x[3],x[5]),
               mean(x[4],x[6]),mean(x[5],x[7]),mean(x[6],x[8]),
               mean(x[7],x[9]),mean(x[8],x[10]),x[9])
    cor(x,neighbour)
    }

# A function to generate a new permutation to test  
g<-function(par,vec){sample(par, length(par))}

res <- optim(par=seq_along(a), fn=f, gr=g, vec=a, method="SANN", 
      control=list(maxit = 30000, temp = 2000, trace = TRUE, REPORT = 500)) 
```

你的结果是`a[res$par]`。

# eclipse - Eclipse：关闭文件/项目时处理错误

> ID：15632370
> 
> 赞同：10
> 
> 时间：2013-03-26T08:23:28.940
> 
> 标签：eclipse

关闭文件/项目后，我看到一个弹出消息：

```
Disposing has encountered a problem. An internal error has occurred. java.lang.NullPointerException 
```

我的环境是：

*   Windows 7的
*   面向 Web 开发人员的 Eclipse Java EE IDE。
*   版本：朱诺
*   服务版本 2
*   版本号：20130225-0426

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T02:11:02.073

如果它是由 m2e 引起的，请将 m2e 0.x 升级到已发布的 1.4。问题将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-05T05:58:20.593

您可以安装其他版本，也可以重新安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T11:23:35.013

我认为您可能会从工作区中删除文件并尝试关闭或打开先前打开的文件，然后再删除工作区中的该文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-27T09:44:20.243

尝试下载较新版本的 Eclipse (Keppler)，问题已修复，该版本的错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-13T03:46:28.917

这是 Eclipse 中报告的错误

浏览此链接以获取详细信息

[日食中的错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=371534)

# java - 具有多个 artifactID 的 Maven

> ID：15632378
> 
> 赞同：2
> 
> 时间：2013-03-26T08:24:16.903
> 
> 标签：java, maven

我需要构建不同类型的**库**，它们仅在清单信息上有所不同。

制作不同的项目并不是一个好主意，因为来源完全相同。

我尝试了模块 pom，但子 pom 无法引用父源。

我也尝试过`artifactId`使用属性（例如：）`libarayname-${type}`，但它看起来不正确。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:41:25.953

您应该尝试使用[程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin)

使用两个不同的程序集描述符，您还可以指定不同的 MANIFEST 文件。有关更多信息，请参阅[插件用法](http://maven.apache.org/plugins/maven-assembly-plugin/usage.html)。

然后可以使用不同的分类器生成两个库，以便其他项目可以依赖任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:40:47.287

您实际应该使用的是分类器。查看`maven-jar-plugin`有关如何从单个项目生成多个工件的更多信息。例如，如果项目被称为`foo`，那么您可以拥有`foo-1.2.3`and `foo-1.2.3-jdk14`，或者类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:31:14.350

[您可以通过配置maven 归档器插件](http://maven.apache.org/plugins/maven-jar-plugin/examples/manifest-customization.html)来自定义 MANIFEST.MF

您想要实现的“蛮力”方法是为您需要的每个 MANIFEST.MF 变体创建一个 Maven 配置文件。

# iphone - 使用单个数组填充 tableView 分段表

> ID：15632381
> 
> 赞同：0
> 
> 时间：2013-03-26T08:24:26.070
> 
> 标签：iphone, ipad, uitableview, nsmutablearray

我有一个表格，其中有很多部分，所有部分中要显示的数据都在一个数组 resultArray 中，所以当我们有两个部分时如何正常显示数据部分然后我们为每个部分创建两个数组，但这里有多个部分如何解决这个问题。

谢谢

我的结果数组是

```
NSArray *tempArray =[[DataController staticVersion] startParsing:@"http://www.celeritas-solutions.com/pah_brd_v1/productivo/catalogMaster.php"];

for (int i = 0; i<[tempArray count]; i++) {

    id *item = [tempArray objectAtIndex:i];
    NSDictionary *dict = (NSDictionary *) item;
    ObjectData *theObject =[[ObjectData alloc] init];
    [theObject setCategory:[dict objectForKey:@"category"]];
    [theObject setSub_Category:[dict objectForKey:@"sub_Category"]];    
    [theObject setContent_Type:[dict objectForKey:@"content_Type"]];
    [theObject setContent_Title:[dict objectForKey:@"content_Title"]];
    [theObject setPublisher:[dict objectForKey:@"publisher"]];
    [theObject setContent_Description:[dict objectForKey:@"content_Description"]];
[theObject setContent_ID:[dict objectForKey:@"content_ID"]];
[theObject setContent_Source:[dict objectForKey:@"content_Source"]];

    [resultArray addObject:theObject];
    [theObject release];
    theObject=nil; 
```

}

表中部分的编号在类别数组中

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

return [categoryArray count] ;

    } 
```

章节标题

```
 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
     {

      return [categoryArray objectAtIndex:section];
} 
```

# excel - 遇到错误“运行时错误 91”与“直到”

> ID：15632382
> 
> 赞同：0
> 
> 时间：2013-03-26T08:24:38.150
> 
> 标签：excel

我对整个事情和网站有点陌生，最近遇到了我无法解决的代码错误。我的目标是让我的宏能够将包含短语“分包商：”的任何单元格从 A 列剪切到 L 列偏移的单元格（1,11）。我的代码允许它这样做，但即使我得到了我想要的结果，但会提供错误 91。

代码：

```
Sub SiteAccess()
Dim mySheet As Worksheet, myOtherSheet As Worksheet, myBook As Workbook 'Define your workbooks and worksheets as variables
Set myBook = Excel.ActiveWorkbook
Set mySheet = myBook.Sheets("SiteAccessReports")

Dim cc As Excel.Range, ee As Long

Do
For Each cc In Range("A1:A30000") 'Or whatever yours is
If cc.Value Like "*SUBCONTRACTOR : *" Then
cc.Cut Destination:=cc.Offset(1, 11)
For ee = mySheet.UsedRange.Row + ActiveSheet.UsedRange.Rows.Count - 1 To ActiveSheet.UsedRange.Row Step -1
If Cells(ee, 1) = 0 _
Then Cells(ee, 1).EntireRow.Delete

     Next ee
Exit For
End If
Next
Loop Until cc.Value = "***END OF REPORT*** " 'Error Line

End Sub 
```

感谢我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:48:46.893

这可以满足您的需求，但您需要优化初始范围选择以确保您没有拾取任何 Empty 值。

```
Sub SiteAccess()
Dim mySheet As Worksheet, myOtherSheet As Worksheet, myBook As Workbook 'Define your     workbooks and worksheets as variables
Set myBook = Excel.ActiveWorkbook
Set mySheet = myBook.Sheets("SiteAccessReports")

Dim cc As Range

For Each cc In Range("A5:A14") 'Or whatever yours is

    If cc.Value Like "*SUBCONTRACTOR : *" Then

        cc.Cut Destination:=cc.Offset(1, 11)
        Cells(cc.Row - 1, 1).EntireRow.Delete

    End If

    If cc.Value Like "***END OF REPORT***" Then Exit Sub

Next

End Sub 
```

# c# - 尝试从集成数据库访问数据时，VS2010 中的错误：40

> ID：15632385
> 
> 赞同：1
> 
> 时间：2013-03-26T08:24:50.450
> 
> 标签：c#, sql

请帮我。我收到此错误：

“/”应用程序中的服务器错误。

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

源错误：

```
Line 29:             SqlConnection con = new SqlConnection(conStr);
Line 30:             SqlCommand cmd = new SqlCommand("Select * from SingUp", con);
Line 31:             con.Open();
Line 32:             using(con)
Line 33:             { 
```

> 源文件：C:\Users\My\Documents\Visual Studio 2010\myproject1\Asad\PostAvertisement.aspx.cs 行：31

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:33:58.473

*好吧*，由于几个原因，可能会出现此问题。由于您没有提到您已经尝试过什么，您可以按照此说明进行操作；

> 1.  确保您的数据库引擎配置为接受远程连接
> 2.  检查 SQL Server 服务帐户
> 3.  如果您使用的是命名 SQL Server 实例，请确保您在 ASP.NET Web 应用程序的连接字符串中使用该实例名称 4.您可能需要在防火墙上为您所在的 SQL Server 实例和端口创建一个例外使用
> 4.  如果您使用的是命名 SQL Server 实例，请确保您在连接字符串中使用该实例名称
> 5.  检查 SQLBrowser；检查它是否正在运行。您可能还需要在防火墙中为 SQLBrowser 创建一个例外。
> 6.  检查您是否已连接到 SQL Server。请注意您使用什么来连接：机器名称、域名或 IP 地址？检查连接时使用它。

来源：[http ://www.sqlmusings.com/2009/03/11/resolving-a-network-related-or-instance-specific-error-occurred-while-establishing-a-connection-to-sql-server](http://www.sqlmusings.com/2009/03/11/resolving-a-network-related-or-instance-specific-error-occurred-while-establishing-a-connection-to-sql-server)

# actionscript-3 - 推特+AS3？

> ID：15632388
> 
> 赞同：1
> 
> 时间：2013-03-26T08:24:55.167
> 
> 标签：actionscript-3, twitter, flash-cs5

使用 Flash CS5.5 (AS3) 中“操作”中的此代码，我试图显示来自特定用户的推文。当我测试这部电影时，我在“输出”中看到了推文，但在舞台上却没有。**如何让它们在舞台上可见？**我想我需要一个 TextArea 或舞台上的东西来展示它们，但我不擅长编写 AS3 并且似乎无法使 TextArea 和 Actions-code 连接。

```
/**** vars ****/
var user:String;
var url:String;
var tweetCount:int;
var tweets:Array;
var times:Array;

/**** setup ****/
user = "leifpagrotsky";
tweetCount = 10;
loadTweets();

/**** start getting tweets ****/
function loadTweets()
{
url = "http://search.twitter.com/search.atom?q=+from:"+user+"&rpp="+tweetCount;
var urlReq:URLRequest = new URLRequest(url);
var loader:URLLoader = new URLLoader();
loader.addEventListener(Event.COMPLETE, getTweets);
loader.addEventListener(IOErrorEvent.IO_ERROR, IOError);
loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, SError);
loader.load(urlReq);
}

function getTweets(e:Event):void
{
if ( e.target.data )
{
tweets = new Array(); times = new Array();
var twitterXML:XML = new XML(e.target.data);
var tweetList:XMLList = twitterXML.children();
var tweetItem:String; var timeItem:String;
for (var i:int = 0; i < tweetList.length(); i++)
{
tweetItem = tweetList[i].*::title;
timeItem = tweetList[i].*::published;
if ( tweetItem != "" )
{
tweets.push(tweetItem);
trace(tweetItem);
}
if ( timeItem != "" )
{
timeItem = timeItem.split("T").join(" - ");
timeItem = timeItem.split("Z").join("");
times.push(timeItem);
trace(timeItem);
}
}
trace(tweets.length);
}
}

function IOError(e:Event):void
{
trace("io error!");
}
function SError(e:Event):void
{
trace("security error!");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:21:26.590

我不明白textarea到底有什么问题

动态文本区域示例

```
import fl.controls.TextArea; 
var aTa:TextArea = new TextArea(); 
aTa.move(100,100); 
aTa.setSize(200, 200); 
aTa.condenseWhite = true; 
aTa.text = "sample"
addChild(aTa); 
```

我希望这就是你要找的

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T11:38:34.103

你正在寻找的是这样的：

```
import fl.controls.TextArea;
/**** vars ****/
var user:String;
var url:String;
var tweetCount:int;
var tweets:Array;
var times:Array;
var textArea:TextArea;

/**** setup ****/
user = "leifpagrotsky";
tweetCount = 10;
setupText();//setup a text area component
loadTweets();

/**** start getting tweets ****/
function loadTweets()
{
    url = "http://search.twitter.com/search.atom?q=+from:" + user + "&rpp=" + tweetCount;
    var urlReq:URLRequest = new URLRequest(url);
    var loader:URLLoader = new URLLoader();
    loader.addEventListener(Event.COMPLETE, getTweets);
    loader.addEventListener(IOErrorEvent.IO_ERROR, IOError);
    loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, SError);
    loader.load(urlReq);
}
function setupText():void{
    textArea = addChild(new TextArea()) as TextArea;//create and add it to the stage - make sure the component is in the library
    textArea.setSize(stage.stageWidth,stage.stageHeight);
    textArea.editable = false;
}

function getTweets(e:Event):void
{
    if (e.target.data)
    {
        var displayText:String = "";//make a string to collect all the text you want to display
        tweets = new Array();
        times = new Array();
        var twitterXML:XML = new XML(e.target.data);
        var tweetList:XMLList = twitterXML.children();
        var tweetItem:String;
        var timeItem:String;
        for (var i:int = 0; i < tweetList.length(); i++)
        {
            tweetItem = tweetList[i].*::title;
            timeItem = tweetList[i].*::published;
            if ( tweetItem != "" )
            {
                tweets.push(tweetItem);
                trace(tweetItem);
                displayText += tweetItem+"\n";//add the details you need like the message
            }
            if ( timeItem != "" )
            {
                timeItem = timeItem.split("T").join(" - ");
                timeItem = timeItem.split("Z").join("");
                times.push(timeItem);
                trace(timeItem);
                displayText += timeItem+"\n\n";//...and time
            }
        }
        trace(tweets.length);
        textArea.text = displayText;//finally after all the text is accumulated into a string, send it to the text area
    }
}

function IOError(e:Event):void
{
    trace("io error!");
}
function SError(e:Event):void
{
    trace("security error!");
} 
```

在使用教程时，我建议将它们分开并理解每一部分。然后应该很明显需要做什么。简单地复制/粘贴代码而不理解它是不够的。

使用基本的 TextField 也可以。这是一个简化版本：

```
var output:TextField = addChild(setupText()) as TextField;//add text
loadTweets("leifpagrotsky",10);//call tweeter

function loadTweets(user:String,count:int):void{
    new URLLoader(new URLRequest("http://search.twitter.com/search.atom?q=+from:" + user + "&rpp=" + count))
                 .addEventListener(Event.COMPLETE,tweetsLoaded);//load and wait for the response

}
function tweetsLoaded(e:Event):void{
    if(e.target.data){//if we have some data
        var out:String = "";//make a new blank string we can later plug into the text on screen
        var stream:XML = new XML(e.target.data);//plug the data into an XML object
        var tweets:XMLList = stream.*;//get the tweet nodes
        var numTweets:int = tweets.length();//count them once
        for(var i:int = 0 ; i < numTweets; i++) //for each tweet message
            if(String(tweets[i].*::title).length) //if there the message's length is > 0
                out += tweets[i].*::title+"\n<b>"+tweets[i].*::published+"</b>\n\n";//add it to our string
        output.htmlText = out;//finally plug the string to the text field
    }
}

function setupText():TextField {//set up the text field
    var t:TextField = new TextField();
    t.defaultTextFormat = new TextFormat("Verdana",11,0);
    t.multiline = true;
    t.autoSize = TextFieldAutoSize.LEFT;
    t.width = stage.stageWidth;
    t.height = stage.stageHeight;
    t.border = true;
    return t;
} 
```

# html - 如何在 html 中表示破折号和连字符并在 java 代码中使用它

> ID：15632389
> 
> 赞同：0
> 
> 时间：2013-03-26T08:24:58.440
> 
> 标签：html

我曾经`&#045;`重复炒作它给了我破折号但我需要炒作任何人都可以让我知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:29:07.957

连字符是 Unicode 字符 U+2010，所以你`&#8208;`用来把它放在 HTML 代码中。

连字符、连字符减号（ASCII 破折号）和减号之间的比较：

Go-getter ( `&#8208;`)
Go-getter ( `-`/ `&#45;`)
Go-getter ( `#8722;`)

# java - 用mybatis、postgresql比较时间戳

> ID：15632392
> 
> 赞同：1
> 
> 时间：2013-03-26T08:25:24.673
> 
> 标签：java, timestamp, alfresco, mybatis

我正在使用 mybatis 查询我的 postgres 数据库，我的问题是时间戳之间的比较，我认为它无法正常工作，因为即使它没有抛出任何异常，它也不会重新运行所需的结果。这是我的代码

```
<select id="select_count" parameterType="map" resultType="map">
        select count(*) as count, TO_CHAR(created_on, #{xaxis}) as xaxis,state 
        from my_table
        where 1 = 1
        <if test="fromdate != null"> and created_on &gt;= #{fromdate} </if>
        <if test="todate != null"> and created_on &lt;= #{todate} </if>
        <if test="state != null"> and state = #{state} </if>
        GROUP BY xaxis, state
</select> 
```

这是我的java代码

```
public List<Map<String, Object>> getStatesCount(Date fromDate,
                Date toDate, String state, String xAxis) {
        Map<String, Object> params = new HashMap<String, Object>();
        params.put("fromdate", fromDate);
        params.put("todate", toDate);
        params.put("state", state);
        params.put("xaxis", "yyyy-mm-dd");
        List<Map<String, Object>> sqlResults = (List<Map<String, Object>>) template.selectList(SELECT_COUNT, params);
        return sqlResults;
    } 
```

这是创建 my_table 的代码

```
CREATE SEQUENCE my_table_seq START WITH 1 INCREMENT BY 1;
CREATE TABLE my_table
(
   id INT8 NOT NULL DEFAULT NEXTVAL('my_table_seq'),
   state VARCHAR(20),
   created_on TIMESTAMP WITH TIME ZONE,
   PRIMARY KEY (id),
); 
```

我知道我的表有很多行，其中 'created_on' 属性设置为 ，比如说今天的日期。但是当我传递我的两个日期参数甚至其中之一时，选择查询不会返回任何数据。

那么如何正确查询时间戳和`java.util.Date`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:35:05.277

我正在发布正确的答案。

这是我的代码

```
<select id="select_count" parameterType="map" resultType="map">
    select count(*) as count, TO_CHAR(created_on, #{xaxis}) as xaxis,state 
    from my_table
    where 1 = 1
    <if test="fromdate != null"> and created_on &gt;= #{fromdate} </if>
    <if test="todate != null"> and created_on &lt;= #{todate} </if>
    <if test="state != null"> and state = #{state} </if>
    GROUP BY xaxis, state
</select> 
```

这是我的java代码

```
public List<Map<String, Object>> getStatesCount(Date fromDate,
            Date toDate, String state, String xAxis) {
    Map<String, Object> params = new HashMap<String, Object>();
    params.put("fromdate", fromDate);
    params.put("todate", toDate);
    params.put("state", state);
    params.put("xaxis", "yyyy-mm-dd");
    List<Map<String, Object>> sqlResults = (List<Map<String, Object>>) template.selectList(SELECT_COUNT, params);
    return sqlResults;
} 
```

这是创建 my_table 的代码

```
CREATE SEQUENCE my_table_seq START WITH 1 INCREMENT BY 1;
CREATE TABLE my_table
(
  id INT8 NOT NULL DEFAULT NEXTVAL('my_table_seq'),
  state VARCHAR(20),
  created_on TIMESTAMP WITH TIME ZONE,
  PRIMARY KEY (id),
); 
```

# google-analytics - 下载谷歌分析数据的软件

> ID：15632393
> 
> 赞同：1
> 
> 时间：2013-03-26T08:25:31.870
> 
> 标签：google-analytics

是否有开源或付费、现成的基于 Web 的应用程序可用，该应用程序可以由公司下载和托管，然后每天/预定义的时间间隔从授权的 GA 帐户从 Google Analytics 下载某些维度列表的数据，以及指标？

我们希望能够首先将所有历史数据导入数据库，然后安排服务按计划运行，以将数据导入数据库作为补充。有哪些可用选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:45:33.093

Next Analytics（[http://www.nextanalytics.com/](http://www.nextanalytics.com/)，商业版）非常好（至少去年我测试它时是这样）——这是一个 excel 插件，所以你需要设置一个Windows 框中的计划任务，可将您的数据下载到 Excel 工作表中。

更适合您的要求并且更“原生”的可能是 Google App Scripts - Google 提供了一个现成的脚本（我认为它被称为 Google Magic 或其他东西 - 只需在共享库中查找“魔术”）从 GA 帐户中提取数据。然后你可以将它插入到谷歌文档中，通过电子邮件发送，调用另一个网络服务来接收数据，或者其他的东西——应用程序脚本（javacript 方言）非常灵活。

# android - 如何 带有片段标签的布局文件？

> ID：15632397
> 
> 赞同：4
> 
> 时间：2013-03-26T08:25:48.960
> 
> 标签：android, include, fragment

我未能创建一个 android 布局文件 activity_item_list.xml，其内容如下：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/item_list"
    android:name="xxx.xxx.xxx.ItemListFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="16dp"
    android:layout_marginRight="16dp"
    tools:context=".ItemListActivity"
    tools:layout="@android:layout/list_content" /> 
```

好吧，它会崩溃。崩溃日志如下：

```
android.view.InflateException: Binary XML file line #1: Error inflating class <unknown> 
```

我将在这里列出所有步骤：

1.  在 Eclipse 中，通过向导新建一个项目并选择主/详细信息流

2.  向导完成后，我得到了向导生成的 4 个布局 xml：activity_item_detail.xml、activity_item_twopane.xml、activity_item_list.xml 和 fragment_item_detail.xml

3.  让我们修改activity_item_twopane.xml。我想重用一些布局。

原始activity_item_twopane.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="16dp"
    android:layout_marginRight="16dp"
    android:baselineAligned="false"
    android:divider="?android:attr/dividerHorizontal"
    android:orientation="horizontal"
    android:showDividers="middle"
    tools:context=".ItemListActivity" >

    <fragment
        android:id="@+id/item_list"
        android:name="xxx.xxx.xxx.ItemListFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        tools:layout="@android:layout/list_content" />

    <FrameLayout
        android:id="@+id/item_detail_container"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="3" />
</LinearLayout> 
```

修改后的文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="16dp"
    android:layout_marginRight="16dp"
    android:baselineAligned="false"
    android:divider="?android:attr/dividerHorizontal"
    android:orientation="horizontal"
    android:showDividers="middle"
    tools:context=".ItemListActivity" >

    <include
        layout="@layout/activity_item_list"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" />

    <include
        layout="@layout/activity_item_detail"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="3"/>
</LinearLayout> 
```

现在，第二个包含块运行良好。但是第一个会导致崩溃。

activity_item_detail.xml

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/item_detail_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ItemDetailActivity"
    tools:ignore="MergeRootFrame" /> 
```

我曾尝试如下修改activity_item_list.xml，仍然崩溃......

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <fragment
        android:id="@+id/item_list"
        android:name="xxx.xxx.xxx.ItemListFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="16dp"
        android:layout_marginRight="16dp"
        tools:context=".ItemListActivity"
        tools:layout="@android:layout/list_content" />

</FrameLayout> 
```

我不知道为什么android不能支持一个片段。谁能告诉我。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:33:00.697

您能否提供更多背景信息，例如您是否尝试自行膨胀片段？如果是这样，据我所知，它不会起作用。它必须嵌入到另一个布局中。您可以使用它来了解有关使用片段的更多信息：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

希望能帮助到你

# php - 来自谷歌的 PHP 访问者

> ID：15632402
> 
> 赞同：0
> 
> 时间：2013-03-26T08:26:30.617
> 
> 标签：php

如果有人从 google 访问我的网站，我如何使用 php 找到？

```
<?php
  if (isset($_COOKIE['source'])) {
      $arr = explode("=",$_COOKIE['source']);
      $_SESSION['source'] = $arr[1];
      unset($_COOKIE['source']);
  }
?> 
```

这就是我获取来源的方式，以了解访问者在我的网站之前在哪里，并且我想设置`$_SESSION['source']="google"`他是否在 Google 上搜索以找到我的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:32:47.287

使用：[$_SERVER['HTTP_REFERER']](http://php.net/manual/bg/reserved.variables.server.php)

```
if(strpos($_SERVER['HTTP_REFERER'], 'google'))
echo 'comes from google'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:30:55.390

尝试检查 $_SERVER['HTTP_REFERER']。此全局变量应包含引荐来源网址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:43:50.520

我就是这样做的。它会解析给定的 URL（如果有），然后删除所有不需要的信息，例如[顶级域](http://en.wikipedia.org/wiki/TLD)或三级或更低级域，因此我们只剩下二级域（**google**）。

```
function isRequestFromGoogle() {
    if (!empty($_SERVER['HTTP_REFERER'])) {
        $host = parse_url($_SERVER['HTTP_REFERER'], PHP_URL_HOST);
        if (!$host) {
            return false; // no host found
        }

        // remove the TLD, like .com, .de etc.
        $hostWithoutTld = mb_substr($_SERVER['HTTP_REFERER'], 0, mb_strrpos($_SERVER['HTTP_REFERER'], '.'));
        // get only the second level domain name
        // e.g. from news.google.de we already removed .de and now we remove news.
        $domainName = mb_substr($hostWithoutTld, mb_strrpos($hostWithoutTld, '.') + 1);

        if (mb_strtolower($domainName) == 'google') {
            return true;
        } else {
            return false;
        }
    }
} 
```

# tomcat6 - URIEncoding 在 Tomcat 6.0.26 上不起作用

> ID：15632403
> 
> 赞同：1
> 
> 时间：2013-03-26T08:26:33.000
> 
> 标签：tomcat6, url-encoding

我们正在使用多种语言，韩语就是其中之一，在我们的应用程序中，我们已经在 tomcat 级别设置了编码，还设置了用于编码的 spring 过滤器，但是由于某种原因，当我们在 Struts2 操作类中执行 request.getParameter 时，我们收到只要 ？？。

**Tomcat 编码**

```
<Connector port="8080" protocol="HTTP/1.1" 
           connectionTimeout="20000" maxThreads="150"
           redirectPort="8443" URIEncoding="UTF-8"/> 
```

**弹簧过滤器**

```
<filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
       <param-name>encoding</param-name>
       <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
       <param-name>forceEncoding</param-name>
       <param-value>true</param-value>
    </init-param>
</filter> 
```

编辑

因此，作为“안녕하세요 kkk”发送的消息被接收为“????? kkk”

我会错过什么？

问候，

阿尤什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:42:15.903

如果您的标签在属性文件中，请尝试强制 utf8 文件编码（检查 tomcat 启动脚本）：

1.  在 Windows 上
    **设置 JAVA_OPTS=%JAVA_OPTS% -Dfile.encoding=UTF8**

2.  在 Linux 上
    **导出 JAVA_OPTS="$JAVA_OPTS -Dfile.encoding=UTF8**

我希望这可以帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T15:49:53.823

我们刚刚遇到了一个类似的问题，即 GET 请求被误解了。

原因是两者同时使用的`URIEncoding`冲突`useBodyEncodingForURI`。

显然，Tomcat（6）使用全局默认值（`latin1`？）而不是在`URIEncoding`处理 GET 请求时定义的编码（由于明显的原因没有编码）如果`useBodyEncodingForURI="true"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:39:15.520

你如何发送你的信息？如果它是 URL 的一部分，那么您必须发送一个编码的 URL，例如

```
param=%EC%95%88%EB%85%95%ED%95%98%EC%84%B8%EC%9A%94+kkk 
```

到达`안녕하세요 kkk`服务器端。有关URL 编码/解码的更多信息，请参见[http://www.url-encode-decode.com/](http://www.url-encode-decode.com/)

如果您将 HTML 表单中的数据发布到服务器，请确保您的页面以 UTF-8 格式提供。如果响应标头，您可以检查此项

```
Content-Type    text/html;charset=UTF-8 
```

存在于您的页面中。

Spring 的编码过滤器应该在这里解决问题。只要确保您也声明了一个过滤器映射。否则过滤器将不会被 servlet 引擎使用：

```
<filter-mapping>
  <filter-name>encodingFilter</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# c++ - 何时在托管 C++ 类上使用 __gc 关键字？

> ID：15632408
> 
> 赞同：4
> 
> 时间：2013-03-26T08:26:42.913
> 
> 标签：c++, visual-c++, compilation, header, c++-cli

我有一个 C++ 项目，我已经使用 C++/CLI 成功地用 .NET 类包装了该项目。我在托管 C++ 中定义包装类。我是否需要将类标记为`__gc`以便对这些类进行垃圾收集？还是 .NET 框架会自动 GC 类，因为它们是托管类？

这就是它当前声明的方式

```
public ref class Player { 
```

我需要这样的东西吗？

```
__gc class Player { .. } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:20:12.180

该关键字`__gc`用于以前的版本（IIRC，直到 VS2003）。然后添加了新的特定于上下文的关键字（如`ref class`, `value struct`）。较新的编译器（VS2005+）会理解并建议使用较新的关键字。Context 关键字`ref class`足以说明该类是托管类。托管类只能使用`gcnew`关键字分配。编译器将引发`new`用于托管类的错误。对于 VC++ ( `/clr`)，堆栈语义也可用。

这意味着以下内容也是有效的：

```
public ref class SomeClass{};

void foo()
{
    SomeClass cls; // On stack!    
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T08:32:12.923

来自[MSDN](http://msdn.microsoft.com/en-us/library/aa712825%28v=vs.71%29.aspx)

> 类或结构上的关键字 __gc 表示它是垃圾回收的，它的生命周期由公共语言运行时管理。在用户程序中不需要显式调用删除。

但是，如果您在类内部分配内存，则需要在终结器内部使用 delete 或 free 释放它，具体取决于分配类型

```
public ref class PAWrapper
{
private:
    PAPor *pap;

public:

    PAWrapper()
    {
        pap = new PAPor();
    }

    ~PAWrapper(){this->!PAWrapper();}

    !PAWrapper()
    {
        delete pap;
        pap = NULL;
    }
} 
```

所以不，你不需要`__gc`，但你应该定义终结器（ !PAWrapper() ）以避免内存泄漏。GC 会自动调用 finalizer

# ms-access - MS Access VBA 链接数据并从 excel 更新记录

> ID：15632410
> 
> 赞同：0
> 
> 时间：2013-03-26T08:26:45.150
> 
> 标签：ms-access, excel, vba

更新保存在 excel 文件中的记录的最佳方法是什么。例如，我有一个 MS Access 数据库，其中有一个表，其中包含`Product ID`、`ProductName`和`ProductAge`.

我将同一张表存储在 Excel 电子表格中。我想编写一个 VBA 代码来查看该 excel 电子表格并更新我的数据库表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:39:39.700

您可以从数据库中删除记录，然后使用以下代码再次导入电子表格数据。（假设它是同一张表）

```
Docmd.RunSql("delete from tblData")
DoCmd.TransferSpreadsheet acImport, acSpreadsheetTypeExcel8, "tblData","C:\Data\Test.xls", True, "A1:E100" 
```

# post - 在 Yii 中使用循环获取所有 _POST 变量

> ID：15632417
> 
> 赞同：0
> 
> 时间：2013-03-26T08:27:01.587
> 
> 标签：post, yii, get, request

我有代码

```
$str = '';
foreach ($_POST as $k => $v) {
    $str .= $k.'='.$v;
} 
```

可以用**CHttpRequest**做同样的事情吗？没有找到任何[方法](http://www.yiiframework.com/doc/api/1.1/CHttpRequest#methods)。

最后需要**md5**，所以不存在安全问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:51:42.713

我不认为 CHttpRequest 是为了获取 post 数据，Yii 本身使用 $_POST 变量，例如 Gii 的默认输出可以是这样的：

```
public function actionCreate()
    {
        $model=new Model;

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['Model'])) //<- POST data var
        {
            $model->attributes=$_POST['Model']; //<- POST data var
            if($model->save())
                $this->redirect(array('view','id'=>$model->id));
        }

        $this->render('create',array(
            'model'=>$model,
        ));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-28T19:29:03.427

您可以扩展**CHttpRequest**组件并重写公共方法**getPost()**

```
class HttpRequest extends CHttpRequest {
    public function getPost($name = null, $defaultValue = null) {
        $data = ($this->_isJsonEncoded()) ? \CJSON::decode($this-
            >getRawBody()) : $_POST;

        if (isset($data[$name])) {
            return $data[$name];
        } elseif (isset($defaultValue)) {
            return $defaultValue;
        } else {
            return $data;
        }
    }
} 
```

不要忘记在**config/main.php**文件中包含新的组件类：

```
'request' => [
     'class' => 'application.components.HttpRequest',
 ], 
```

现在，您可以通过这种方式获取所有**$_POST**数据：

```
Yii::app()->request->getPost(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-08T12:05:06.197

您可以使用 getRestParams() 获取数组。

```
Yii::app()->request->getRestParams() 
```

或者

```
 Yii::$app->request->getRestParams() 
```

**参考：** [CHttpRequest - getRestParams](https://www.yiiframework.com/doc/api/1.1/CHttpRequest#getRestParams-detail)

# mysql - 填补Mysql中数据范围之间的空白

> ID：15632427
> 
> 赞同：1
> 
> 时间：2013-03-26T08:27:30.480
> 
> 标签：mysql, sql

我有一个发票表，我在其中存储给定数据范围的发票（即 2012 年 1 月 1 日至 2012 年 1 月 31 日之间日期的发票 1）。现在可能有几天没有关联的发票，所以你会有

```
> ID | START_DATE | END_DATE
> ---------------------------- 
> 1  | 2012-01-01 | 2012-01-31 
> 2  | 2012-02-05 | 2012-02-28 
```

因此，在这种情况下，从 2 月开始的 5 天将不会有与之关联的发票。这些天来，我想估算成本，所以我需要以某种方式“获取”这些缺失的数据范围。

我在 SO 上看到了一些类似问题的答案，但其中大多数都依赖于我无法创建的附加日历表。

是否有任何其他 SQL 解决方案，或者实际获取发票然后计算我的应用程序中的差距会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:49:04.030

如果数据集没有重叠的日期，一种解决方案是使用这样的查询，提取所有缺失的范围：

```
select
  r1.END_DATE + INTERVAL 1 DAY d1, MIN(r2.START_DATE) - INTERVAL 1 DAY d2
from
  ranges r1 INNER JOIN ranges r2
  ON r1.END_DATE <= r2.START_DATE
group by
  r1.END_DATE
having
  DATEDIFF(MIN(r2.START_DATE), r1.END_DATE) > 1 
```

请[在此处](http://sqlfiddle.com/#!2/d211a/2)查看小提琴。

# c# - 按钮的依赖属性

> ID：15632428
> 
> 赞同：2
> 
> 时间：2013-03-26T08:27:30.513
> 
> 标签：c#, wpf, dependency-properties

我正在尝试为名为“ `IsVisibleWhenReadOnly`”的按钮创建一个布尔属性。我希望将其用于 StackPanel 中的按钮，因此它们是否可见取决于数据是否处于`ReadOnly`状态。即当处于`ReadOnly`状态时，保存和取消按钮是隐藏的，但编辑按钮是可见的。单击 Edit 按钮时，`ReadOnly`状态变为 false，Cancel 和 Save 按钮变为可见，Edit 按钮变为隐藏。

我的房产代码：

```
public bool IsVisibleWhenReadOnly
{
  get { return (bool)GetValue(IsVisibleWhenReadOnlyProperty); }
  set { SetValue(IsVisibleWhenReadOnlyProperty, value); }
}

// Using a DependencyProperty as the backing store for IsVisibleWhenReadOnly.
public static readonly DependencyProperty IsVisibleWhenReadOnlyProperty =
    DependencyProperty.Register("IsVisibleWhenReadOnly",
                                 typeof(bool), 
                                 typeof(Button), 
                                 new PropertyMetadata(true)); 
```

按钮样式：

```
<Style TargetType="{x:Type Button}">
  <Setter Property="Visibility">
    <Setter.Value>
      <Binding Path="IsVisibleWhenReadOnly" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=Window}" Mode="OneWay">
        <Binding.Converter>
          <utils:BoolToVisibilityConverter/>
        </Binding.Converter>
      </Binding>
    </Setter.Value>
  </Setter>
</Style> 
```

和按钮代码：

```
<Button Name="btnEdit" Content="Edit" MinWidth="75" Height="25" 
    Click="btnEdit_Click" IsVisibleWhenReadOnly="true" /> 
```

`IsReadOnly`是另一个工作愉快的依赖属性，并根据其值启用/禁用控件，但我希望这会影响可见性，而不是启用。

不幸的是，我在编译时遇到三个错误：

```
The member "IsVisibleWhenReadOnly" is not recognized or is not accessible.
The property 'IsVisibleWhenReadOnly' does not exist in XML namespace 'http://schemas.microsoft.com/winfx/2006/xaml/presentation'.
The property 'IsVisibleWhenReadOnly' was not found in type 'Button'. 
```

我猜它`typeOf(Button),`在行中，但是将其更改为“BaseWindow”（这是`typeOf()`我的“IsReadOnly”属性的值）并没有什么不同。我也很确定我的 BoolToVisibilityConverter 不是问题。

谁能看到我做错了什么并指出我正确的方向？

编辑：如果可能的话，我想将依赖属性与按钮一起使用。例如，StackPanels、CheckBoxes 等，因此不限于按钮的解决方案是理想的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:43:42.020

如果要捎带回现有控件，则应该使用[附加的依赖属性。](http://msdn.microsoft.com/en-us/library/ms597495.aspx)所以像：

```
public static void SetIsVisibleWhenReadOnly(UIElement element, bool value)
{
    element.SetValue(IsVisibleWhenReadOnlyProperty, value);
}
public static bool GetIsVisibleWhenReadOnly(UIElement element)
{
    return (bool)element.GetValue(IsVisibleWhenReadOnlyProperty);
}
// Using a Registerd DependencyProperty as the backing store for IsVisibleWhenReadOnly.
public static readonly DependencyProperty IsVisibleWhenReadOnlyProperty =
        DependencyProperty.RegisterAttached("IsVisibleWhenReadOnly",
                                     typeof(bool),
                                     typeof(Button),
                                     new PropertyMetadata(true)); 
```

我还会考虑对可见性转换器进行多重绑定，以便在确定要返回的 Visiblity 值时访问 IsReadOnly 和 IsVisibileWhenReadOnly。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:46:09.390

您必须将您的注册`DependancyProperty`为一个`AttachedProperty`，如果您想在其他控件上使用它，请使用`typeof(FrameworkElement)`而不是`typeof(Button)`

```
 public static readonly DependencyProperty IsVisibleWhenReadOnlyProperty =
    DependencyProperty.RegisterAttached("IsVisibleWhenReadOnly"
     , typeof(bool), typeof(FrameworkElement),new PropertyMetadata(true)); 
```

但使用 a 可能是一个更简单的想法`DataTrigger`

例子：

```
<Button>
    <Style TargetType="{x:Type Button}">
        <Setter Property="Visibility" Value="Visible" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsVisibleWhenReadOnly}" Value="True" >
                <Setter Property="Visibility" Value="Collapsed" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Button> 
```

# paging - 什么虚拟TLB？

> ID：15632429
> 
> 赞同：0
> 
> 时间：2013-03-26T08:27:39.273
> 
> 标签：paging, virtual-memory, tlb, kernel32, mmu

有谁知道虚拟 TLB 是什么意思，这个 VTLB 和普通 TLB 有什么区别。我在谷歌上找不到明确的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T03:41:29.310

vTLB 由 VMM（虚拟机管理器）管理。

客户操作系统可能会尝试写入 CR3。对 CR3 的任何写入都意味着 TLB 刷新和可能的页表更改。执行以下步骤：

1.  VMM 记录新的 CR3 值（稍后用于遍历访客页表）并模拟写入。
2.  VMM 分配一个新的 PD 页，其中包含所有无效条目。
3.  VMM 将实际的处理器 CR3 寄存器设置为指向新的 PD 页。此时，VMM 可能出于性能原因推测性地填充 VTLB 映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:31:39.400

在模拟具有 MMU 的 CPU 时，逻辑到物理地址的快速转换至关重要。为此，我们按照硬件的示例并在软件中模拟 TLB。一种选择是明确模仿特定 CPU 架构的 TLB 的行为。不幸的是，TLB 操作的细节通常没有完全公开，即使是这样，在软件中模拟的效率也不高。 [这可能会帮助你](http://mamedev.org/devwiki/index.php?title=Virtual_TLB&printable=yes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:32:24.267

你在看kvm代码吗？

转换后备缓冲区 (TLB) 缓存从虚拟地址到物理地址的映射。虚拟 TLB 在软件中执行此操作。例如，如果物理地址的计算非常复杂，它就很有用。

考虑在主机上运行的 guestVM。如果guestVM 访问虚拟内存地址A，则必须将其转换为guest 物理地址B，然后此B 必须转换为主机虚拟地址C（guestVM 是主机上的一种进程）。然后将其转换为真实/主机物理地址 D。

# jsf - 如何动态生成 PanelGrid 行？（JSF，Primefaces）

> ID：15632431
> 
> 赞同：1
> 
> 时间：2013-03-26T08:27:42.673
> 
> 标签：jsf, primefaces, javabeans, panel

我正在尝试创建一个具有 2 列的 PanelGrid 并从**List**加载数据。问题是它不会创建新行。它只是将整个**列表**放在第一行。

没有与数据库的通信。这只是我需要显示的一个**列表，每个值都有一行。**

这就是我的 PanelGrid 的样子：

```
 <p:panelGrid style="border:10px;">

                <p:row>
                    <p:column style="font-size:15px;font-weight:bold;">Column1</p:column>
                    <p:column style="font-size:15px;font-weight:bold;">Column2</p:column>
                </p:row>

                <p:row>
                    <p:column style="width:35%">
                        <h:outputText value="#{myService.columnOne}" />
                    </p:column>
                    <p:column style="width:35%">
                        <h:outputText value="#{myService.columnTwo}" />
                    </p:column>
                </p:row>

            </p:panelGrid> 
```

这是我在 MyService.java 中的列表：

```
 public List<String> columnOne = new ArrayList<String>();
public List<String> columnTwo = new ArrayList<String>(); 
```

我只是在我的方法中添加一些值

```
columnOne.add("String"); 
```

...

**编辑**

我已经通过更改我的 Java 逻辑、创建键值映射并将其显示在数据表中来解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:15:13.347

你不要用 p:panelGrid 迭代你的列表你应该使用像 p:datatable 或 p:datagrid 这样的迭代器

#{myService.columnOne} 将输出对象 columnOne，而不是其中的值。

在 datagrid 中，您定义一个 var 来迭代列表。

你应该定义这样的东西；

```
<p:dataGrid style="border:10px;" value="#{myService.columnOne}" var="col"  columns="3">
    <p:panel header="col" style="text-align:center">
    <h:outputText value="#{col}"/>
  </p:panel>             
 </p:dataGrid> 
```

和豆

```
 public myservice() {
        columnOne.add("String1");
        columnOne.add("String2");
        columnOne.add("String3");

        columnTwo.add("Something1");
        columnTwo.add("Something2");
        columnTwo.add("Something3");

    }
public List<String> getColumnOne() {
    return columnOne;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:27:14.290

在您编写它的方式中，它当然不会只创建两行，一个用于标题，另一个包含两个列，它们将输出`columnOne.toString()`and `columnTwo.toString()`。

必须有某种方式将它们仅显示在一个中`p:panelGrid`。但是，如果您确定两个列表的大小相同，我认为最好的方法（优化并且 Java 代码中不需要额外的代码）是使用两个`p:panelGrid`s，每个列表将显示一列。之后，您可以使用 CSS 使它们显示为一个独特的表格。

根据您的评论，我应该在我的方法中做些什么：

```
<p:dataTable var="colValue" value="#{myService.columnOne}">    
  <p:column headerText="Column1">  
        <h:outputText value="#{colValue}" />  
  </p:column>
</p:dataTable> 
```

第二列就像第一列。

迭代数据时我没有使用`p:panelGrid`避免使用`c:forEach`

# eclipse - “面向移动开发人员的 Eclipse”中的 Phonegap 支持

> ID：15632433
> 
> 赞同：1
> 
> 时间：2013-03-26T08:27:46.187
> 
> 标签：eclipse, html, cordova

作为我们要求的一部分，我正在使用面向移动开发人员的 Eclipse（版本：Juno Service Release 2）。现在我们需要使用PhoneGap。但是在这个版本的 Eclipse 中，不支持 HTML5 和 JavaScript。

这个版本中是否有用于 HTML5 开发的插件，或者我需要更改我的 Eclipse 版本吗？

*注意：谷歌搜索并没有帮助我找到合适的答案。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:45:47.737

我遇到了完全相同的问题，到目前为止还没有找到如何“升级”IDE 的“Eclipse for Mobile Developers”版本。您可以下载 WPT Eclipse 包，但它有依赖项，我不确定它们是什么。

但是，您可以执行以下操作：

1.  转到[http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr2](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr2)并下载“Java EE 开发人员的 Eclipse IDE”
2.  解压后，启动 IDE 并从[http://developer.android.com/sdk/installing/installing-adt.html完成“下载 ADT 插件”部分](http://developer.android.com/sdk/installing/installing-adt.html)
3.  我不需要完成“配置 ADT 插件”，可能是因为之前的“面向移动开发人员的 Eclipse”。
4.  如果需要SDK，可以从这个页面下载，解压后在Eclipse->Preferences->Android菜单项中引用

我刚才尝试了这个，并且能够构建一个原生应用程序和一个 HTML/Javascript 应用程序来测试。

如果这个答案没有意义，请发表评论，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:45:15.400

IBM Worklight Studio 会很有趣，但它可能超出您的严格要求。

[http://www.ibm.com/developerworks/mobile/worklight/](http://www.ibm.com/developerworks/mobile/worklight/)

# android - java.lang.NoSuchMethodError: android.app.PendingIntent.getActivity

> ID：15632434
> 
> 赞同：3
> 
> 时间：2013-03-26T08:27:52.530
> 
> 标签：android, android-intent, android-notifications

突然间，我开始收到不少崩溃报告，声称 android.app.PendingIntent.getActivity 方法不存在。

有谁知道这可能是什么原因造成的？

```
java.lang.NoSuchMethodError: android.app.PendingIntent.getActivity
    at com.example.notification.NotificationHelper.showNotification(NotificationHelper.java:37)
    at com.example.notification.NotificationHelper.showNotification(NotificationHelper.java:19)
    at com.example.content.sync.userdata.TaskSynchronizer$2.onResultReceived(TaskSynchronizer.java:142)
    at com.example.content.sync.BulkRequest.onResultReceived(BulkRequest.java:172)
    at com.example.content.sync.SyncAdapterHelper.pushOrPull(SyncAdapterHelper.java:201)
    at com.example.content.sync.SyncAdapterHelper.syncAll(SyncAdapterHelper.java:60)
    at com.example.content.sync.SyncAdapter.onPerformSync(SyncAdapter.java:139)
    at android.content.AbstractThreadedSyncAdapter$SyncThread.run(AbstractThreadedSyncAdapter.java:247) 
```

下面是我的`NotificationHelper`课：

```
public class NotificationHelper {

    public static void showNotification( Context context, String title, String content, MenuItem itemToStart ) {
        showNotification(context, title, content, itemToStart, null, itemToStart.id );
    }
    public static void showNotification( Context context, String title, String content, MenuItem itemToStart, Bundle extras ) {
        showNotification(context, title, content, itemToStart, extras, itemToStart.id );
    }

    public static void showNotification( Context context, String title, String content, MenuItem itemToStart, Bundle extras, int notificationId ) {
        /*
         * Check if user has disabled notifications
         */
        if ( !ProfileManager.areNotificationsEnabled( context ) ) {
            return;
        }

        NotificationCompat.Builder builder = new NotificationCompat.Builder(context);
        Intent contentIntent = new Intent( context, LauncherActivity.class );
        contentIntent.putExtra( MFMainActivity.EXTRA_START_MENUITEM_ID, itemToStart.id );

        builder.setSmallIcon( R.drawable.ic_stat_notify )
               .setAutoCancel( true )
               .setContentTitle( title )
               .setContentText( content )
               .setContentIntent( PendingIntent.getActivity(context, 0, contentIntent, Intent.FLAG_ACTIVITY_NEW_TASK, extras ) );

        NotificationManager nm = (NotificationManager) context.getSystemService( Context.NOTIFICATION_SERVICE );
        nm.notify( notificationId, builder.build() );
    }
} 
```

**更新：**正如 Tushar 指出的，我已经开始使用`PendingIntent.getActivity()`带有`Bundle`参数的方法。这种方法最初是在 API 16 中引入的，它导致所有具有早期 API 的设备上的崩溃。

我的解决方案是在内容 Intent 中调用`contentIntent.replaceExtras( extras )`并传递额外内容，而不是直接传递给`getActivity()`方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T08:34:27.317

```
getActivity(Context context, int requestCode, Intent intent, int flags, Bundle options) 
```

仅在 Android API 16 (4.1) 中引入。如果您在低于此值的任何内容上运行您的应用程序，它将引发此异常。

您可能希望使用`getActivity()`API 1 引入的版本，该版本具有签名（注意缺少`Bundle`）：

```
getActivity(Context context, int requestCode, Intent intent, int flags) 
```

[资源](http://developer.android.com/reference/android/app/PendingIntent.html)

# c# - 解析带有未转义多行字段的分隔文件

> ID：15632438
> 
> 赞同：4
> 
> 时间：2013-03-26T08:28:05.417
> 
> 标签：c#

我有一个分隔符为“|”的 CSV 文件 分隔字段。

我正在使用下面的代码来读取文件并将其放入 List

```
 var reader = new StreamReader(File.OpenRead(openFileDialog1.FileName));
 List<string> list1 = new List<string>();
 List<string> list2 = new List<string>();
 List<string> list3 = new List<string>();
 List<string> list4 = new List<string>();

 while (!reader.EndOfStream)
 {
     var line = reader.ReadLine();
     var values = line.Split('|');

     list1.Add(values[0]);
     list2.Add(values[1]);
     list3.Add(values[2]);
     list4.Add(values[3]);
 } 
```

然后我会把它放到一个数据集中

```
DataSet ds = new DataSet();
ds.Tables.Add("barcode");

for (int i = 1; i < list1.Count; i++)
{
    ds.Tables[0].Rows.Add(list1[i], list2[i], list3[i], list4[i]);
} 
```

如果数据是这样的就好了

```
373|A0000006-04|EACH|2600003347225  
373|A0000006-04|EACH|9556076004684  
373|A0000006-04|EACH|9556076006374  
373|A0000006-04|PK12|2600003347232  
373|A0000006-04|PK12|9556076004691 
```

但是，有些数据可能看起来像这样

```
373|A0000029-01|PK12|1899886
6604250
373|A0000029-01|PK12|2652357563394
373|A0000030-01|EACH|2600001
539189
373|A0000030-01|EACH|8998866604284 
```

如您所见，一些数据使用 2 行。有什么方法可以将它们读取为同一行而不是 2 个不同的行？或者我是否必须使用逗号或分号等分隔符才能将它们标识为同一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:30:52.243

使用支持您需要的所有功能的库，例如[A Fast CSV Reader 。](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:37:16.427

List(of T) 也可以通过索引访问，您可以在循环中添加一个 lineCounter，如果该行在拆分后仅由一个部分组成，则将内容添加到前一个列表元素中。（至少第一行应该是 4 个元素）

```
lineCounter = 0;
while (!reader.EndOfStream)
{
     var line = reader.ReadLine();
     var values = line.Split('|');

     if(values.Length == 1)
     {
        list4[lineCounter-1] += values[0];
     }
     else
     {
          list1.Add(values[0]);
          list2.Add(values[1]);
          list3.Add(values[2]);
          list4.Add(values[3]);
          lineCounter++;
     }

} 
```

我已经用 OP 提供的样本数据进行了测试，它似乎运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:33:38.307

根据 CSV 文件规范，每条记录应位于单独的行上（您可以在此处找到 CSV 文件规范[http://www.ietf.org/rfc/rfc4180.txt](http://www.ietf.org/rfc/rfc4180.txt)）。因此，在您的情况下，您确实需要采取某种解决方法并使用其他分隔符来标记换行符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:40:28.463

我使用[FileHelpers Library](http://filehelpers.sourceforge.net/)直接映射到强类型数组。如果您正在使用正式的 CSV，它将为您工作。

如果它只是没有正式规范的分隔数据，您可能需要一些其他解决方案。

# c# - 如何查找用户是否第一次登录 - C#

> ID：15632447
> 
> 赞同：1
> 
> 时间：2013-03-26T08:28:50.600
> 
> 标签：c#, asp.net

场景是，如果用户第一次使用他的一次性密码登录，它应该被重定向到`ResetPassword.aspx`

如果用户不是新用户，那么应该被重定向到 Main.aspx 页面。

我应该使用`IsPostBack`or`Membership.ValidateUser`吗？

我们通常如何在 C# 中编写代码来检查它是否是新用户（使用首次登录）？

我是编程新手，在网上没有获得足够的信息。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:34:32.227

`IsPostBack`检查不会帮助您解决您想要的问题。您需要通过数据库对其进行维护。

```
IsPostBack Gets a value that indicates whether the page is being rendered 
for the first time or is being loaded in response to a postback. 
```

它与页面帖子有关，与您的数据库或用户或您的逻辑无关：）

为了帮助您了解您的逻辑，您需要维护一个单独的列来识别用户是否是第一次来。

一个简单的逻辑：

在您的表中创建一列，`LastLoginDate`使其可为空。当用户注册时，保持该字段为 NULL。

当用户登录时，只需检查是否`LastLoginDate`为 NULL 即

```
 if(userObj.LastLoginDate == null)
   {
        //user has come for the first time
        //code to update the LastLoginDate to DateTime.Now
        Redirect("resetPassword.aspx");
   } 
   else 
   {
       //code to update the LastLoginDate to DateTime.Now
       Redirect("home.aspx");
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:35:21.950

Membership.ValidateUser 检查他/她是否未获得批准或是否提供了错误的凭据。

对于这个问题，在创建新用户时在数据库中设置一些标志。

当用户登录时，检查其标志。

如果它指示新用户，则将其重定向到重置密码页面。

并且只需在重定向后更改标志状态，以便下次它不会将他指示为新用户。

# sql-server - 用户“xyz”登录失败

> ID：15632449
> 
> 赞同：1
> 
> 时间：2013-03-26T08:29:05.493
> 
> 标签：sql-server, azure-sql-database

当我尝试从 Windows Azure 连接到我的服务器时，我收到如下错误：

> 用户“xyz”登录失败。

我在 web.config 文件中的连接字符串是：

```
<add name="ApplicationServices"
     providerName="System.Data.SqlClient"
     connectionString="
     Server=192.164.x.xx;
     User Id=xyz;
     Password=password;
     Database=databasename"/> 
```

但是，当我使用与 SQL Server 相同的凭据登录时，我可以连接而不会出现任何错误。

为什么我会收到这样的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:18:22.593

我很确定您的问题是在 SQL Azure 上，用户名必须与服务器名称后缀

SQL Azure 的正确连接字符串应如下所示：

```
 <add name="ApplicationServices"
     providerName="System.Data.SqlClient"
     connectionString="
      Server=tcp:[SERVERNAME].database.windows.net,1433;
          Database=databasename;
          User ID=xyz@[SERVERNAME];
          Password=password;"/> 
```

# c# - 实现用于捕获打印文本的 OPOS 打印机服务对象

> ID：15632453
> 
> 赞同：7
> 
> 时间：2013-03-26T08:29:29.243
> 
> 标签：c#, com, opos, pos-for-.net

我们正在尝试为 POS 应用程序创建类似于打印机驱动程序包装的东西，这将允许我们捕获打印的收据，然后将其再次转发到原始打印机。

到目前为止，我们在“POS for .Net”之上实现了一个作为服务对象，它工作得很好，一切都很好，但事实证明，一些遗留的 POS 应用程序只支持 OPOS。为了支持它们，我们要么必须使我们的“POS for .Net”服务对象可用作 OPOS 服务对象，要么我们必须使用 CCO 编写自己的 OPOS 服务对象。

我的问题是：

*   在这些传统的 POS 应用程序中，甚至可以使用我们的 POS for .Net 解决方案吗？（如果是，如何？）
*   如何构建 OPOS 服务对象？它可以使用 .Net 框架（例如 C#）吗？
*   我们在做正确的事吗？有没有更好的方法来获取收据（尤其是对于这些旧版应用程序）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-16T09:52:49.020

**问）在这些传统的 POS 应用程序中，是否可以使用我们的 POS for .Net 解决方案？（如果是，如何？）**

A) 不，这些应用程序不使用 .Net 库的 POS，也不使用 .Net 注册表项的 POS 搜索服务对象，这些应用程序仅使用 OPOS(OLE POS) 注册表项来搜索注册服务对象，通常调用 CCO，后者又调用服务对象。

**Q) 如何构建 OPOS 服务对象？它可以使用 .Net 框架（例如 C#）吗？**

A) 是的，它可以使用 .Net 完成，但是您需要将其公开为 COM 库，一个好方法是在 CCO 中实现接口，每个设备都有一个 DLL，为您需要的设备引用一个，实现其接口，并将您的类型标记为 COM 可见，添加 GUID 和 ProgId，使用***regasm “路径” /register /codebase /tlb注册它***命令，添加所需的注册表项——可以在 UPOS 规范\开发指南文档中找到——你就完成了，或者至少我是这么想的，这样你会得到一个错误，指出你的服务中缺少方法正确运行它所需的对象，好吧，我发现这很难，但是接口中没有引用 7 种方法——尽管在 UPOS 规范\开发指南文档中引用了——这些方法是：

1.  **COFreezeEvents**：与属性 FreezeEvents 相同。
2.  **GetPropertyNumber**：用于通过属性的索引获取 numeric\Boolean 属性的值，稍后会详细介绍。
3.  **SetPropertyNumber**：用于通过属性的索引设置 numeric\Boolean 属性的值，稍后会详细介绍。
4.  **GetPropertyString**：用于通过属性的索引获取字符串属性的值，稍后会详细介绍。
5.  **SetPropertyString**：用于通过属性的索引设置字符串属性的值，稍后会详细介绍。
6.  **OpenService**：与方法 open 相同。
7.  **CloseService**：与方法关闭相同。

实现这些方法后，一切正常，这很奇怪，因为 CCO 接口中没有引用任何方法，但是正如我所说，这些方法中的每一个都在 UPOS 规范中引用并有完整的描述。

似乎存在 OpenService 和 CloseService 方法的原因是，当 CCO 库作为 com 实现时，Open 和 Close 方法名称不合适，必须更改为 OpenService 和 CloseService，同样适用于具有新名称的 Claim 和 Release ClaimDevice 和 Release Device - 但是这些在接口中正确公开，至于其他方法我找不到原因。

**Get\Set 属性方法**

这 4 个方法用于访问对象中的所有属性，为什么？我不确定，但似乎应该从 Dispatch 接口使用这些来访问您的对象，为什么默认情况下该接口不可用？C++ 服务对象是否以相同的方式实现？我没有答案。

要以正确的方式实现这些，应该查看 OPOS 安装下的**Include**目录 - CCO 安装 - 并检查 *.hi 文件，主要是 Opos.hi 和 OposPtr.hi（取决于设备，在我们的例子中是打印机） ，您将看到这些包括 CCO 的常量，如成功或失败枚举，以及这 4 种方法的属性索引和设备索引偏移量。

使用 OPOS 常量中的数字，您只需打开 PropIndex 参数值，并获取\设置正确的属性值。

```
 if (PropertyIndexHelper.IsStringPidx(PropIndex))
    {
        switch (PropIndex)
        {
            case PropertyIndexHelper.PIDX_CheckHealthText:
                return _physicalPrinter.CheckHealthText;

            case PropertyIndexHelper.PIDX_DeviceDescription:
                return _physicalPrinter.DeviceDescription;

            case PropertyIndexHelper.PIDX_DeviceName:
                return _physicalPrinter.DeviceName;
                                  .
                                  .
                                  .
                                  .
                                  . 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-13T16:29:19.707

To further MEYWD's answer I just wanted to post what a basic interface should look like in C#.

```
[ComVisible(true), Guid("Put a GUID here")]
public interface IMSR
{
    //Common Opos
    [DispId(0x01)]
    int CheckHealth([In] int lLevel);
    [DispId(0x02)]
    int ClaimDevice([In] int lTimeOut);
    [DispId(0x03)]
    int ClearInput();
    [DispId(0x04)]
    int ClearInputProperties();
    [DispId(0x05)]
    int ClearOutput();
    [DispId(0x06)]
    int CloseService();
    [DispId(0x07)]
    int COFreezeEvents([In, MarshalAs(UnmanagedType.VariantBool)] bool Freeze);
    [DispId(0x08)]
    int CompareFirmwareVersion([In, MarshalAs(UnmanagedType.BStr)] string FirmwareFileName, [In, Out]ref int pResult);
    [DispId(0x09)]
    int DirectIO([In] int lCommand, [In, Out] ref int pData, [In, Out, MarshalAs(UnmanagedType.BStr)] ref string pString);
    [DispId(0x0A)]
    int OpenService([In, MarshalAs(UnmanagedType.BStr)] string lpclDevClass, [In, MarshalAs(UnmanagedType.BStr)] string lpclDevName, [In, MarshalAs(UnmanagedType.IDispatch)] object lpDispatch);
    [DispId(0x0B)]
    int ReleaseDevice();
    [DispId(0x0C)]
    int ResetStatistics([In, MarshalAs(UnmanagedType.BStr)] string StatisticsBuffer);
    [DispId(0x0D)]
    int RetrieveStatistics([In, Out, MarshalAs(UnmanagedType.BStr)] ref string pStatisticsBuffer);
    [DispId(0x0E)]
    int UpdateFirmware([In, MarshalAs(UnmanagedType.BStr)] string FirmwareFileName);
    [DispId(0x0F)]
    int UpdateStatistics([In, MarshalAs(UnmanagedType.BStr)] string StatisticsBuffer);
    [DispId(0x10)]
    int GetPropertyNumber([In] int lPropIndex);
    [DispId(0x11)]
    string GetPropertyString([In] int lPropIndex);
    [DispId(0x12)]
    void SetPropertyNumber([In] int lPropIndex, [In] int nNewValue);
    [DispId(0x13)]
    void SetPropertyString([In] int lPropIndex, [In, MarshalAs(UnmanagedType.BStr)] string StringData);
    //MSR Specific
    [DispId(0x14)]
    int AuthenticateDevice([In, MarshalAs(UnmanagedType.BStr)] string deviceResponse);
    [DispId(0x15)]
    int DeauthenticateDevice([In, MarshalAs(UnmanagedType.BStr)] string deviceResponse);
    [DispId(0x16)]
    int RetrieveCardProperty([In, MarshalAs(UnmanagedType.BStr)] string propertyName, [Out, MarshalAs(UnmanagedType.BStr)] out string cardProperty);
    [DispId(0x17)]
    int RetrieveDeviceAuthenticationData([In, Out, MarshalAs(UnmanagedType.BStr)] ref string challenge);
    [DispId(0x18)]
    int UpdateKey([In, MarshalAs(UnmanagedType.BStr)]string key,[In, MarshalAs(UnmanagedType.BStr)] string keyName);
    [DispId(0x19)]
    int WriteTracks([In] object data,[In] int timeout);
} 
```

Granted this is for a MSR, but the CommonOPOS methods will be the same on all types of devices. SO the only thing you would have to change is from DispID 0x14 (20) on down. What I did was compare with the OPOS document the signature that they put and converted it to C#. I've created about 6 SO's this way and all are working just fine in a variety of different scenarios.

Another note is in the OpenService method. You'll see that the last argument is a object. That is the instance of the Control object. What you'll need to do is make another interface in your project that exposes the COM object for you. To stick with my MSR example here is what you would put.

```
[ComImport, Guid("CCB91121-B81E-11D2-AB74-0040054C3719"), InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface COPOSMSR
{
    void SOData([In] int Status);
    void SODirectIO([In] int EventNumber, [In, Out] ref int pData, [In, Out, MarshalAs(UnmanagedType.BStr)] ref string pStrIng);
    void SOError([In] int ResultCode, [In] int ResultCodeExtended, [In] int ErrorLocus, [In, Out] ref int pErrorResponse);
    void SOOutputCompleteDummy([In] int OutputID);
    void SOStatusUpdate([In] int Data);
    void SOProcessID([Out] out int pProcessID);
} 
```

I the signature in the source code for OPOS. if you search the source code you'll see a little comment like this.. (from the msr OPOS source code) that is so you know what to implement so you can fire events.

**c:\Program Files(x86)\Opos\oposSrc\zMSR\MSR.idl**

```
[
    object,
    uuid(CCB91121-B81E-11D2-AB74-0040054C3719),
    dual,
    helpstring("IOPOSMSR 1.5 Interface"),
    pointer_default(unique)
]
interface IOPOSMSR_1_5 : IDispatch
{
// Methods for use only by the Service Object
    [id(1), hidden, helpstring("method SOData")] HRESULT SOData( [in] long Status );
    [id(2), hidden, helpstring("method SODirectIO")] HRESULT SODirectIO( [in] long EventNumber, [in, out] long* pData, [in, out] BSTR* pString );
    [id(3), hidden, helpstring("method SOError")] HRESULT SOError( [in] long ResultCode, [in] long ResultCodeExtended, [in] long ErrorLocus, [in, out] long* pErrorResponse );
    [id(4), hidden, helpstring("method SOOutputCompleteDummy")] HRESULT SOOutputCompleteDummy( [in] long OutputID );
    [id(5), hidden, helpstring("method SOStatusUpdate")] HRESULT SOStatusUpdate( [in] long Data );
    [id(9), hidden, helpstring("method SOProcessID")] HRESULT SOProcessID( [out, retval] long* pProcessID ); 
```

With those 2 basic things you'll be able to make a SO.. To fire an event is super easy too. Here is how I did it as a test

```
 public int OpenService(string lpclDevClass, string lpclDevName, object lpDispatch)
    {
        controlObject = (COPOSMSR)lpDispatch;
        controlObject.SOData(1)//I just fired a Data Event
    } 
```

It has been my experience too that building a SO in C++ is harder than in C#. There are many more steps that C# just makes super simple.

Some good reads which was enough information for me to get started.

**COM Interop Part1: C# Client Tutorial**

[http://msdn.microsoft.com/en-us/library/aa645736(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645736(v=vs.71).aspx)

**COM Interop Part 2: C# Server Tutorial**

[http://msdn.microsoft.com/en-us/library/aa645738(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645738(v=vs.71).aspx)

**COM Data Types**

[https://msdn.microsoft.com/en-us/library/sak564ww%28v=vs.100%29.aspx](https://msdn.microsoft.com/en-us/library/sak564ww%28v=vs.100%29.aspx)

# asp.net - 如果日期文本框为空，如何将日期自动分配给数据库字段？

> ID：15632457
> 
> 赞同：0
> 
> 时间：2013-03-26T08:30:09.307
> 
> 标签：asp.net, listview, date

我有一个列表视图，其中有一个名为**DateofEntry**的文本框。
现在我想要的是在运行时，如果用户没有在该**DateofEntry**文本框中输入任何日期，那么今天的日期必须保存在数据库中，否则必须保存在运行时提供的日期。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:34:45.780

你可以试试 Date() 的 JavaScript 函数；

喜欢。前任。

```
<script>
 function addD  ate(){
 date = new Date();
 var month = date.getMonth()+1;
 var day = date.getDate();
 var year = date.getFullYear();

 if (document.getElementById('date').value == ''){
   document.getElementById('date').value = day + '-' + month + '-' + year;
  }
}
 </script>
      <body onload="addDate();">
         Today's Date is: <input type="text" id="date">
      </body> 
```

你明白我的意思了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:32:10.733

我会在页面加载期间将字段中的默认日期设置为今天的日期。让用户根据需要进行更改。

```
DateTextBox.Text = DateTime.Now.Date.ToString(); 
```

*Ps : 你甚至可以选择你想要的格式..*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:32:40.080

```
TextBox tmpControl = (TextBox)ListView1.FindControl("DateOfEntry");
if (tmpControl.Text == "") {
    DateTime dateToBeSaved = DateTime.Now();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:38:53.583

您可以如下使用。
检查点击事件回发的文本框值

```
if (String.IsNullOrEmpty(DateOfEntry.Text)) {
    DateTime dateToBeSaved = DateTime.Now();
}
else
{
   //get the value form the text box
} 
```

或者你可以在你的数据库中管理它。
如果您使用的是存储过程。
检查 dateField 值
如果它为空
，则不要在此列中插入任何值。
将列的默认值设为当前日期。

# deployment - 加载项无法在 Windows 7 中加载

> ID：15632461
> 
> 赞同：0
> 
> 时间：2013-03-26T08:30:34.387
> 
> 标签：deployment, windows-7, vsto

我遇到了一个问题，我的加载项在 Win7 中不起作用，因为加载项是公司的策略程序，因此需要为所有用户安装并运行每次启动。

在WinXP时代，安装程序使用SetSecurity库的加载项工作，但现在在Win7中不起作用，我试图重新创建安装程序的部署包，但仍然无法加载。

我试过 ClickOnce 可以工作，但如果程序没有安装，它会提示询问安装，因为插件是每次都需要运行的策略程序，所以它不允许用户跳过安装。

我尝试使用 microsoft 加载项示例，但测试过它也会提示询问安装。

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T01:09:47.613

通过在带有注册表设置的[KB976477](http://support.microsoft.com/kb/976477) Office 2007中应用修补程序来解决。`EnableLocalMachineVSTO`

参考： http: [//support.microsoft.com/kb/976811](http://support.microsoft.com/kb/976811)

# django - Django缓存不存储所有缓存的元素

> ID：15632462
> 
> 赞同：1
> 
> 时间：2013-03-26T08:30:36.870
> 
> 标签：django, caching

我在 django 1.4.1 项目中使用了数据库和基于文件的缓存。我有超过 100 000 个元素需要缓存，它们缓存了 48 小时。但缓存中的元素消失得太早，缓存覆盖率约为 10%。

例如，主页应该在 48 小时内只生成一次，但它从缓存中获取的只有 30% 的命中，其他 70% 的请求没有找到缓存版本并重新生成主页。

```
cache_time = 60*60*24*2
body_html = cache.get('index')
if not body_html:
    body_html = generate_page_html_content()
    cache.set('index', body_html, cache_time)
#do something with body_html 
```

对于 db 缓存`SELECT count(*) FROM cache;`返回 224 个缓存项，但应该有更多。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:25:02.220

这是解决方案：[https ://docs.djangoproject.com/en/dev/topics/cache/#cache-arguments](https://docs.djangoproject.com/en/dev/topics/cache/#cache-arguments)

我添加`MAX_ENTRIES`了适合我的选项和设置限制。

# jquery - jQuery：在多个计数的单击元素上分配类

> ID：15632467
> 
> 赞同：4
> 
> 时间：2013-03-26T08:30:53.750
> 
> 标签：jquery, class

我有一个可点击元素的列表，它们都具有相同的类名。我想为单击的元素分配一个类`active`并`active`同时从所有其他元素中删除。我如何通过 jQuery 做到这一点？

```
<div class="container">  
    <div class="element"></div>
    <div class="element active"></div>
    <div class="element"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T08:33:34.597

只需挂上元素，从任何拥有它`click`的元素中删除，然后将其添加到单击的元素中：`.element``active``.element`

```
$(".element").click(function() {
    $(".element.active").removeClass("active");
    $(this).addClass("active");
}); 
```

更多：[`jQuery/$`](http://api.jquery.com/jQuery/#jQuery1), [`click`](http://api.jquery.com/click), [`removeClass`](http://api.jquery.com/removeClass),[`addClass`](http://api.jquery.com/addClass)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:33:43.503

使用这种方式`addClass()`：`.siblings()`

```
$('.element').click(function(){
  $(this).addClass('active').siblings().removeClass('active');
}); 
```

这`$(this)`是被单击的当前元素，因此该元素获取类`.active`并`.siblings().removeClass()`删除`.active`应用于其他元素的其他类。

### [查看演示](http://jsfiddle.net/uVxQs/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T08:33:26.693

```
$('.element').click(function() {
  $('.element').removeClass('active');
  $(this).addClass('active');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T08:33:16.333

尝试这个：

```
$('.element').click(function(){
    $('.element').removeClass('active');
    $(this).addClass('active');
}); 
```

# asp.net-mvc - 返回模型的 ASP.NET MVC 函数

> ID：15632470
> 
> 赞同：1
> 
> 时间：2013-03-26T08:31:01.123
> 
> 标签：asp.net-mvc, function, model

我有一个包含一些数据的模型，但是当模型状态无效时，它需要再次填充模型。所以我必须多次填充我的模型。所以我想做一个为我返回模型的函数，所以我可以在我的控制器中使用它。我怎样才能做到这一点？

谢谢阅读。

我只是试图制作一个公共字符串。

这是我的代码：

```
 public string LaadGastenboek(int id)
    {
        Models.Berichten Gastenboek = new Models.Berichten();
        Models.Gastenboekmaken Gastenboekberichtmaken = new Models.Gastenboekmaken();

                int hoeveelzoudenermoetenzijn = id * 10 - 9;
                if (SQL.ReturnSingleINTResult("Select count(*) from Gastenboek where status = 1") >= hoeveelzoudenermoetenzijn)
                {
                    String Gastenboekunsorted = SQL.LaadGastenboek(hoeveelzoudenermoetenzijn);
                    // Gastenboek data -- Properties
                    int tellerhtml = 1;
                    int teller = 1;

                    // Array
                    if (Gastenboekunsorted != null)
                    {
                        string[] ArrayGastenboek = Gastenboekunsorted.Split('*');

                        // Split alles, 1 bericht is 3 data
                        for (int nummer = 0; ArrayGastenboek.Count() > nummer - 1; nummer++)
                        {
                            if (tellerhtml == 3)
                            {
                                Models.GastenBoekBerichtenModel item = new Models.GastenBoekBerichtenModel();
                                // Bereken het verschil, - 4 omdat hij begint te tellen bij 0
                                tellerhtml = teller - 4;
                                // Zet t/m 3 van arraygastenboek in de html code
                                // Bericht - Naam - Datum
                                item.Bericht = ArrayGastenboek[tellerhtml + 1];
                                item.Naam = ArrayGastenboek[tellerhtml + 2];
                                item.Datum = ArrayGastenboek[tellerhtml + 3];

                                Gastenboek.Add(item);

                                // Reset
                                tellerhtml = 0;
                            }
                            teller++;
                            tellerhtml++;

                        }
                    }
                }
                return (new Models.GastenboekOverall(Gastenboek, Gastenboekberichtmaken)); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:43:48.737

从您的评论中：“问题是我如何修改返回模型的代码。”

我假设您想修改代码以返回模型。

```
public Models.GastenboekOverall LaadGastenboek(int id)
{

    ... your code here ...

    return (new Models.GastenboekOverall(Gastenboek, Gastenboekberichtmaken));
} 
```

在您的控制器中将模型传递到您可以编写的视图中，假设您的视图使用模型 Models.GastenboekOverall。

```
 public ActionResult Index()
 {
     return view (LaadGastenboek(someId));
 } 
```

# java - 如何使用 WebDriver 处理操作系统生成的弹出窗口

> ID：15632473
> 
> 赞同：0
> 
> 时间：2013-03-26T08:31:05.743
> 
> 标签：java, webdriver, autoit

当我输入错误的用户名和密码时，会弹出一个消息，并且有一个 Ok 按钮阻止我的应用程序。但我无法找到该按钮的 id，因为 firebug 无法使用它。我搜索了更多博客，我才知道这是操作系统生成的弹出窗口，它可以由 AutoIT 处理。请帮助我如何处理该弹出框。这是我的代码。

```
![package test;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.concurrent.TimeUnit;

import jxl.Sheet;
import jxl.Workbook;
import jxl.read.biff.BiffException;
import jxl.write.Label;
import jxl.write.WritableSheet;
import jxl.write.WritableWorkbook;
import jxl.write.WriteException;
import jxl.write.biff.RowsExceededException;

import org.openqa.selenium.Alert;
import org.openqa.selenium.By;
import org.openqa.selenium.NoAlertPresentException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

public class Read {

    public WebDriver driver;

    @BeforeMethod
    public void launch() throws Exception {
        System.setProperty("webdriver.chrome.driver",
                "C:\\Chrome\\chromedriver_win_26.0.1383.0\\chromedriver.exe");
        driver = new ChromeDriver();
    }

    @Test
    public void testImportexport1() throws BiffException, IOException,
            RowsExceededException, WriteException, InterruptedException {

        FileInputStream fis = new FileInputStream("Data//Logindev.xls");
        Workbook w = Workbook.getWorkbook(fis);
        Sheet s = w.getSheet(0);
        String a\[\]\[\] = new String\[s.getRows()\]\[s.getColumns()\];

        FileOutputStream fos = new FileOutputStream("Data//Logindev_1.xls");
        WritableWorkbook wwb = Workbook.createWorkbook(fos);
        WritableSheet ws = wwb.createSheet("LoginResult", 0);

        System.out.println("s.getRows() = " + s.getRows());

        for (int i = 0; i < s.getRows(); i++) {
            System.out.println("s.getColumns() = " + s.getColumns());

            for (int j = 0; j < s.getColumns(); j++) {
                a\[i\]\[j\] = s.getCell(j, i).getContents();
                Label l = new Label(j, i, a\[i\]\[j\]);
                Label l1 = new Label(2, 0, "Result");

                ws.addCell(l);
                ws.addCell(l1);

            }
        }
        for (int i = 1; i < s.getRows(); i++) {
            driver.get("url");

            driver.findElement(By.name("txtUserName")).sendKeys(
                    s.getCell(0, i).getContents());
            driver.findElement(By.name("txtPwd")).sendKeys(
                    s.getCell(1, i).getContents());
            driver.findElement(By.name("btnSignIn")).click();

            Thread.sleep(15000);

            // System.out.println("Title = " + driver.getTitle());
            if (driver.findElement(By.linkText("DashBoard")).isDisplayed()) {
                System.out.println("Element is found");
                driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
                driver.findElement(
                        By.xpath("//*\[@id='ctl00_headerContent_lnkLogOut'\]"))
                        .click();
                Thread.sleep(2000);
                Label l2 = new Label(2, i, "Pass");
                ws.addCell(l2);
            } else if (driver.getTitle().equalsIgnoreCase(
                    "Welcome to ShopMyFarm")) {

                driver.switchTo().alert().accept();
                Thread.sleep(5000);
                System.out.println("Element Not Found");
                Label l2 = new Label(2, i, "Fail");
                ws.addCell(l2);
            }
        }
        Thread.sleep(2000);
        wwb.write();
        wwb.close();
    }
}][1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:29:32.653

WebDriver 不能直接与对话框窗口交互，这是因为对话框窗口是操作系统的域而不是网页。我认为您可以在 java 中使用 Robot 类来执行您想要执行的键盘操作，例如在您的情况下按 Enter 键关闭操作系统对话框。

```
import java.awt.AWTException; 
import java.awt.Robot; 
import java.awt.event.KeyEvent; 

public class RobotExp 
{ 

  public static void main(String[] args) 
  { 

    try { 

          Robot robot = new Robot(); 
          robot.keyPress(KeyEvent.VK_ENTER); 
         } 
    catch (AWTException e) { 
           e.printStackTrace(); 
         } 
    } 
 } 
```

# python - 在 Python 中使用嵌套循环绘制星号的倒三角形

> ID：15632476
> 
> 赞同：1
> 
> 时间：2013-03-26T08:31:20.420
> 
> 标签：python, geometry

我必须编写一个程序，从用户那里获取一系列有效输入，然后使用嵌套循环来绘制倒三角形。

我已经设法算出三角形，但我在倒三角形上苦苦挣扎。谁能给我一些关于如何通过仅打印 * 的单个字符而不使用 * * 行长来绘制倒三角形的提示？

**全局常数**

```
L = 10 
```

**获取行数**

```
rows = int(input ( 'Enter a number of rows: ' ) ) 
```

**行数不能小于 10 或大于 100**

```
while rows < 10 or rows > 100:
    if rows < L:
        print( 'The number is too Low.' )
    else:
        print( 'The number is too high.' )
    rows = int(input ( 'Enter the correct value: ' ) ) 
```

**显示三角形**

```
for r in range(rows):
    for c in range(r + 1):
        print('*', end='')
print() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:54:17.683

这与我曾经为课堂做的一个问题非常相似，但我们是在 C 中实现它。实际上，现在回去很酷，在 python 中重新实现它并查看差异。

我们在课堂上遇到的问题非常相似。我的python代码使这项工作是：

```
while True:
    rows = input('Enter the number of rows:  ')

    if 3 <= rows <= 33:
        break
    else:
        continue

padding = ' '*rows        
while rows > 0:
    print(padding[rows:] + '*'*rows)
    rows = rows - 1 
```

-- 修改如下，打印倒三角形的轮廓：

```
# print the outline of an inverted triangle:
height = rows

# inner padding for min height (3)
inner_buffer = [0, 1, 3]
while len(inner_buffer) <= rows:
    inner_buffer.append(inner_buffer[-1]+2)

while height > 0:
    outer_padding = ' '*(rows - height)    
    if height == 1:
        print(outer_padding + '*')
    else:
        inner_padding = ' '*(inner_buffer.pop()-2)
        print(outer_padding + '*' + inner_padding + '*')
    height = height - 1 
```

必须有一个更优雅的代码来编写这个，但只是一个工作黑客，看看我们是否走在正确的轨道上。

下面的新版本： -- 将生成正三角形或倒三角形的函数

```
def get_rows():
    while True:
        rows = input('Enter the number of rows:  ')
        if 3 <= rows <= 33:
            return rows

def triangle(rows, regular=False, invert=True):

    if invert:
        height = -1 * rows
    else:
        height = 0

    # inner padding for min height (3)
    inner_buffer = [0, 1, 3]
    while len(inner_buffer) <= rows:
        inner_buffer.append(inner_buffer[-1]+2)

    level = 0        
    while level <= rows:
        outer_padding = ' '*(rows - abs(height))

        if height == 0:
            print(outer_padding + '*')
        else:
            inner_padding = ' '*( inner_buffer[ abs(height) ] )
            print(outer_padding + '*' + inner_padding + '*')

        height += 1
        level += 1 
```

让我知道 ：）

# android - Android蓝牙事件接收数据

> ID：15632477
> 
> 赞同：-1
> 
> 时间：2013-03-26T08:31:24.330
> 
> 标签：android, android-bluetooth

我正在开发一个android应用程序，开发程序有点困难。当我通过蓝牙接收文件时，我需要自动通过电子邮件发送此文件。我的应用程序在收到文件之前不会启动，即通过蓝牙传输使操作系统...

我一直在测试 FileObserver 类但是有一个问题，当我收到文件然后使用一种方法发送电子邮件，但是在运行该方法时通过蓝牙传递文件，有什么办法让它等到文件是完全发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:36:21.937

尝试这个，

```
Intent intent = new Intent (Intent.ACTION_VIEW , Uri.parse("mailto:" + "your_email"));
intent.putExtra(Intent.EXTRA_SUBJECT, "your_subject");
intent.putExtra(Intent.EXTRA_TEXT, "your_text");
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:26:41.920

为了将文件添加为附件，请使用：

```
intent.putExtra(Intent.EXTRA_STREAM, <ure to file>); 
```

例如：`Uri.fromFile(file);`

# wso2 - 如何根据 WSO2 Governance Registry 中的选项条目创建关联？

> ID：15632478
> 
> 赞同：1
> 
> 时间：2013-03-26T08:31:32.673
> 
> 标签：wso2, soa, wso2greg

我有一个名为“应用程序实例”的工件类型。

```
<table name="Endpoints">
    <subheading>
        <heading>Type</heading>
        <heading>Reference</heading>
    </subheading>
    <field type="option-text" maxoccurs="unbounded" path="true" url="true">
        <name>Endpoint</name>
            <values>
                <value>Provided</value>
                <value>Consumed</value>
            </values>
    </field>
 </table> 
```

我想根据此配置创建关系，类似于。

```
<relationships>
<association type="isConsumedBy" source="@{endpoints_consumed:endpoint}"/>
<association type="isProvidedBy" source="@{endpoints_provided:endpoint}"/-->
</relationships> 
```

有没有办法做到这一点，或者我需要创建两个表，每个表只有一个选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:30:01.633

您将需要两个表，否则您必须创建一个处理程序[http://docs.wso2.org/wiki/display/Governance453/Handlers](http://docs.wso2.org/wiki/display/Governance453/Handlers)。请注意，在解析 XML 有效负载后，您必须使用处理程序以编程方式创建关联。

最好的问候，塞纳卡。

# c++ - 是否可以使用 TinyXML2（或任何其他库）将结构或类直接转换为 XML 文件，反之亦然？

> ID：15632479
> 
> 赞同：1
> 
> 时间：2013-03-26T08:31:33.357
> 
> 标签：c++, xml, tinyxml

我有许多看起来像这样的结构：

```
struct A
{
    long lValueA;
    BOOL bValueA;
    CString strValueA;
}; 
struct B
{
    long lValueB;
    BOOL bValueB;
    CString strValueB;
}; 
struct C
{
    A a;
    vector<B> vecB;
}; 
```

是否可以使用 TinyXML2 （或任何其他库）将其转换为 XML 文件，而无需从**struct C**手动传递每个成员变量？我想要的是这样的：

```
main()
{
  C c;
  // Some code to initialise member variable of struct C

  // pass object/structure to XML parser to get XML file.
  Some_XML_Library_Object.parse( c ); 
  Some_XML_Library_Object.SaveFile("FilePath/Name.xml");

  // Also it would be nice if we can update values in structure or class directly like this
  const char* XML_File_Path = "FilePath/Name.xml";
  Some_XML_Library_Object.updateValueOfStructureFromXML(&c,XML_File_Path)
} 
```

XML 文件生成类似于以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<A>
    <lValueA>
        value
    </lValueA>

    <bValueA>
        value
    </bValueA>

    <strValueA>
        value
    </strValueA>
</A>

<B>
    <lValueB>
        value
    </lValueB>
      ...
      ...
</B> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:21:52.140

您可以使用 boost::serialisation 来执行您所要求的操作...

[http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/tutorial.html](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/tutorial.html)

它具有从上述页面处理 XML（和其他格式）的广泛功能：

> 在本教程中，我们使用了一个特定的存档类 - text_oarchive 用于保存和 text_iarchive 用于加载。文本档案将数据呈现为文本，并且可以跨平台移植。除了文本存档之外，该库还包括原生二进制数据和 xml 格式数据的存档类。所有归档类的接口都是相同的。一旦为一个类定义了序列化，就可以将该类序列化为任何类型的存档。

编辑：您将处理对象并将它们序列化，而不是直接操纵 XML 来更改值。

# java - 将多个图像写入 servlet 中的 outputStream

> ID：15632483
> 
> 赞同：4
> 
> 时间：2013-03-26T08:31:44.607
> 
> 标签：java, image, servlets, bufferedimage, outputstream

我正在读取 servlet 中的两个图像，并且需要同时显示这两个图像。目前，仅显示一个图像（首先写入的图像）。无法写入另一个图像。我没有收到任何错误。

我的 servlet 代码如下所示：

```
 BufferedImage buffImageA = ImageIO.read(getServletContext().getResourceAsStream("/images/3520276097315A.jpg"));
    BufferedImage buffImageB = ImageIO.read(getServletContext().getResourceAsStream("/images/3520276097315B.jpg"));

    logger.logDebug("Images has been read");

    watermark(buffImageA,ApplicationConfig.WATERMARK_TEXT);
    watermark(buffImageB,ApplicationConfig.WATERMARK_TEXT);

    byte[] resultDataA = encodeJPEG(buffImageA, 100);
    byte[] resultDataB = encodeJPEG(buffImageB, 100);

    byte[] combinedImage = new byte[resultDataA.length+resultDataB.length];

    for(int i=0; i<resultDataA.length ;i++){
        combinedImage[i] = resultDataA[i];
    }

    for(int i=resultDataA.length; i<resultDataB.length ;i++){
        combinedImage[i] = resultDataB[i];
    }

    response.setContentType("image/jpeg");

    response.setContentLength(resultDataA.length + resultDataB.length);
    OutputStream os = response.getOutputStream();
    os.write(combinedImage);
    os.close(); 
```

//水印处理到这里

```
private void watermark(BufferedImage original, String watermarkText) {

}

private byte[] encodeJPEG(BufferedImage image, int quality) throws IOException {
       ByteArrayOutputStream baos = new ByteArrayOutputStream((int) ((float) image.getWidth() * image.getHeight() / 4));
       JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(baos);
       JPEGEncodeParam param = encoder.getDefaultJPEGEncodeParam(image);
       quality = Math.max(0, Math.min(quality, 100));
       param.setQuality((float) quality / 100.0f, false);
       encoder.setJPEGEncodeParam(param);
       encoder.encode(image);
       byte[] result = baos.toByteArray();
       baos.close();
       return result;
   } 
```

我曾尝试使用 ImageIO.write 写入图像，但未能获得所需的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:34:34.683

您的第二个`for`循环必须是这样的：

```
for(int i=resultDataA.length; i<resultDataB.length+resultDataA.length ;i++){
    combinedImage[i] = resultDataB[i-resultDataA.length];
} 
```

**编辑 ：**

这是一个接近您期望的可编译、可运行的示例：

```
import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import javax.imageio.ImageIO;
import java.awt.Graphics;

public class Essai2 {

    public static void main(String[] args) {

        try {

            byte[] imageInByte;
            BufferedImage originalImage1 = ImageIO.read(new File("essai1.jpg"));
            BufferedImage originalImage2 = ImageIO.read(new File("essai2.jpg"));

            // convert BufferedImage to byte array
            ByteArrayOutputStream baos1 = new ByteArrayOutputStream();
            ByteArrayOutputStream baos2 = new ByteArrayOutputStream();
            ImageIO.write(originalImage1, "jpg", baos1);
            ImageIO.write(originalImage2, "jpg", baos2);
            baos1.flush();
            baos2.flush();
            byte[] ba1 = baos1.toByteArray();
            byte[] ba2 = baos2.toByteArray();
            imageInByte = new byte[ba1.length + ba2.length];
            //System.out.println(new String(imageInByte));
            System.arraycopy(ba1, 0, imageInByte, 0, ba1.length);
            //System.out.println(new String(imageInByte));
            System.arraycopy(ba2, 0, imageInByte, ba1.length, ba2.length);
            //System.out.println(new String(imageInByte));
            baos1.close();
            baos2.close();

            // convert byte array back to BufferedImage
            InputStream in = new ByteArrayInputStream(imageInByte);

            int w = Math.max(originalImage1.getWidth(), originalImage2.getWidth());
            //int h = Math.max(originalImage1.getHeight(), originalImage2.getHeight());
            int h = originalImage1.getHeight() + originalImage2.getHeight();
            BufferedImage bImageFromConvert = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
            //BufferedImage bImageFromConvert = new BufferedImage(w, h, BufferedImage.TYPE_4BYTE_ABGR );

            //BufferedImage bImageFromConvert = ImageIO.read(in);

            Graphics g = bImageFromConvert.getGraphics();
            g.drawImage(originalImage1, 0, 0, null);
            g.drawImage(originalImage2, 0, originalImage1.getHeight(), null);

            ImageIO.write(bImageFromConvert, "jpg", new File("result.jpg"));

        } catch (IOException e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

essai1.jpg：

![在此处输入图像描述](../Images/02c3150fdcadd3c99937f887fe09a64a.png)

essai2.jpg：

![在此处输入图像描述](../Images/b6ce6a4bdbaf62448a4b7348c8f17d05.png)

结果.jpg：

![在此处输入图像描述](../Images/758f62ba39a41a3bc51113ca2b5fdf77.png)

我暂时还没有找到为什么要在 result.jpg 中添加第三种颜色。但我认为这个例子可以帮助你，我会尽快修复我的代码。

**编辑2：**

改变 ：

```
BufferedImage bImageFromConvert = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB); 
```

至 ：

```
BufferedImage bImageFromConvert = new BufferedImage(w, h, originalImage1.getType()); 
```

它会正常工作。

结果.jpg：

![在此处输入图像描述](../Images/5a5d48e5afdbf4f323aeaf54fe6d6a3c.png)

# vim - 用 vim 在两列中查看“cvs diff”输出

> ID：15632484
> 
> 赞同：2
> 
> 时间：2013-03-26T08:31:46.203
> 
> 标签：vim, diff, cvs, side-by-side, vimdiff

我有统一差异格式的“cvs diff”输出（对于项目中的所有文件）。格式可能是这样的：

```
Index: somefile.cpp
===================================================================
RCS file: /CVS_repo/SomeProject/somefile.cpp,v
retrieving revision 1.19
diff -r1.19 somefile.cpp
31c31
<       return "Read line four times";
---
>       return "Read line five times";
36c36
<       return "Make a bad thing";
---
>       return "Make a good thing";
Index: otherfile.cpp
===================================================================
RCS file: /CVS_repo/SomeProject/otherfile.cpp,v
retrieving revision 1.19
<       ........
---
>       ........ 
```

甚至像这样：

```
Index: somefile.cpp
===================================================================
RCS file: /CVS_repo/SomeProject/somefile.cpp,v
retrieving revision 1.19
diff -u -r1.19 somefile.cpp
--- somefile.cpp 13 Mar 2013 08:45:18 -0000      1.19
+++ somefile.cpp 26 Mar 2013 08:10:33 -0000
@@ -28,12 +28,12 @@
 //---------------------------------------------------------------------------
 extern "C" char *FuncGetSomeText()
 {
-       return "Read line four times";
+       return "Read line five times";
 }
 //---------------------------------------------------------------------------
 extern "C" char *FuncGetAwesomeText()
 {
-       return "Make a bad thing";
+       return "Make a good thing";
 }
 //---------------------------------------------------------------------------
Index: otherfile.cpp
===================================================================
RCS file: /CVS_repo/SomeProject/otherfile.cpp,v
retrieving revision 1.19
diff -u -r1.19 otherfile.cpp
--- otherfile.cpp 13 Mar 2013 08:45:18 -0000      1.19
+++ otherfile.cpp 26 Mar 2013 08:10:33 -0000
@@ -28,12 +28,12 @@
 //---------------------------------------------------------------------------
 extern "C" char *Func()
 {
-       .......
+       .......
 }
 //--------------------------------------------------------------------------- 
```

有什么方法可以与 vim 并排查看此文本？或者也许可以将 cvs 中的默认差异工具更改为 vimdiff？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:09:26.040

Some sed magic help me:

```
\cvs -n diff -u > ~diff.tmp; vim -O <(sed -r -e 's/^\+[^\+]+.*$//g;s/^\+$//g' ~diff.tmp) <(sed -r -e 's/^-[^-]+.*$//g;s/^-$//g' ~diff.tmp) +'set scb | set nowrap | wincmd w | set scb | set nowrap' 
```

It is not perfect solution, but better then nothing. Here what this script doing:

```
\cvs -n diff -u > ~diff.tmp; 
```

Write CVS diff output in unified format (-u option) to temp file ~diff.tmp. '\' char prevent from taking alias of "cvs" command.

```
(sed -r -e 's/^\+[^\+]+.*$//g;s/^\+$//g' ~diff.tmp)
(sed -r -e 's/^-[^-]+.*$//g;s/^-$//g' ~diff.tmp) 
```

This commands output text from ~diff.tmp, replace lines beginning with '+' and '-' symbols with empty line.

```
vim -O <(sed...) <(sed...) +'set scb | set nowrap | wincmd w | set scb | set nowrap' 
```

Open two windows (-O option) with sed's output in each. Command followed '+' set srollbind on and nowrap for first window, then switch to second window (with 'wincmd w') and do same things

# android - 露天休息 API

> ID：15632486
> 
> 赞同：0
> 
> 时间：2013-03-26T08:31:56.683
> 
> 标签：android, rest, alfresco

如何使用 Alfresco REST API 从特定文件夹中搜索文档？我想实际从 Alfresco 获取特定文件的节点值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-03T09:28:22.970

为了获取所有子文件夹，您可以使用以下查询：

通过nodeRef获取对象children的数据

```
nodeRef = b544cd67-e839-4c60-a616-9605fa2affb7;   
url: "/../alfresco/service/api/node/workspace/SpacesStore/" + nodeRef + "/children"
method: "GET" 
```

nodeRef - Alfresco 中的文件夹 ID。以 xml 格式返回数据。

此资源可用于查看具有完整描述的其他查询。

[http://jazzteam.org/en/technical-articles/list-of-alfresco-services/](http://jazzteam.org/en/technical-articles/list-of-alfresco-services/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T11:04:59.560

你有没有在 Alfresco [wiki](http://wiki.alfresco.com/wiki/Repository_RESTful_API_Reference#Package%3a_.2Forg.2Falfresco.2Frepository.2Fsearch)找到任何有用的信息？

您应该能够使用以下参数向 /alfresco/service/api/query 发送 POST 查询：

*   字符串语句：查询语句
*   （可选）布尔 searchAllVersions：False（默认）
*   （可选）布尔值 includeAllowableActions：False（默认）
*   （可选）枚举 includeRelationships：无（默认）、源、目标、两者
*   （可选）int maxItems：0 = Repository-default 项目数（默认）
*   （可选）int skipCount：0 = 从第一个位置开始（默认）

# raytracing - 光线追踪中快速、无堆栈的 kd-tree 遍历，需要说明

> ID：15632489
> 
> 赞同：3
> 
> 时间：2013-03-26T08:32:12.080
> 
> 标签：raytracing, kdtree

我正在尝试实现一个实时光线追踪器，并且我正在阅读这篇关于快速、无堆栈 kd-tree 遍历方法的有趣论文，但对于某些概念尚不清楚。在第 4 页，它介绍了绳索构造算法，它没有解释“拆分平面”和“拆分轴”到底是什么，以及“拆分轴”如何平行于左侧但不右侧。

是否有任何在编写光线追踪器方面有更多经验和/或了解论文中发现的两个概念的人向我解释一下？

提前致谢。

论文 [PDF]：[http ://www.johannes-guenther.net/StacklessGPURT/StacklessGPURT.pdf](http://www.johannes-guenther.net/StacklessGPURT/StacklessGPURT.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-31T08:16:48.210

我不认为作者的意思是暗示分裂轴仅平行于右侧或左侧。他们正在优化每一侧的绳索。为了做到这一点，他们需要知道分割平面是否平行于那一侧。所以他们测试`split-axis(R) || S`。这里，R 是当前节点的绳索。R_L 和 R_R 是该节点左右子树的绳索。该测试试图查看当前节点是否在优化绳索的一侧分裂。

例如：如果我们试图优化左右绳索，我们首先检查当前节点是否有一个分裂平面将世界分裂成左右两侧（换句话说，分裂平面平行于YZ飞机）。如果不是，那么我们放弃优化左右绳索。

# c# - WPF ListBox 关闭悬停效果

> ID：15632493
> 
> 赞同：12
> 
> 时间：2013-03-26T08:32:19.857
> 
> 标签：c#, wpf, xaml

我在互联网上找到并尝试了许多解决方案，这些解决方案应该允许我禁用 WPF ListBox 的**悬停效果**，但它们似乎都不适合我。此屏幕截图显示了我想隐藏或摆脱的悬停效果：

![悬停效果](../Images/e92aded34f7077d62019be9c30b6c574.png)

这是我目前拥有的 XAML 代码的（简化版本）：

```
<ListBox ItemsSource="{Binding Logs}" Grid.Column="1" Width="800"  Height="100" >
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Style.Triggers>
                <Trigger Property="Control.IsMouseOver" Value="True">
                    <Setter Property="Control.Background" Value="Transparent" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

但是，出于某种原因，它似乎对我不起作用。我的父 ListBox（背景中的那个）或另一个控件是否可以覆盖它的子样式？（我已经尝试过覆盖父母的风格）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-27T14:40:45.403

修改 ListBoxItem 的默认样式

```
<Style TargetType="{x:Type ListBoxItem}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
        <Setter Property="Padding" Value="2,0,0,0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                    <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="true"/>
                                <Condition Property="Selector.IsSelectionActive" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.InactiveSelectionHighlightBrushKey}}"/>
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}}"/>
                        </MultiTrigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

只需添加一个触发器

```
<Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="Transparent"/>
                        </Trigger> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-16T07:46:22.577

摆脱蓝魔？

如果您不需要单击您的项目，以下将使其消失，鼠标悬停时突出显示：

```
<ListBox IsHitTestVisible="False">
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="IsTabStop" Value="False" />
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBoxItem Content="Glad that" />
    <ListBoxItem Content="they are over" />
    <ListBoxItem Content="the days of the blue devil" />
</ListBox> 
```

# android - 模拟软键 BACK 按钮

> ID：15632501
> 
> 赞同：3
> 
> 时间：2013-03-26T08:32:52.587
> 
> 标签：android, button, stub, emulation

我正在处理一个小型系统覆盖，我想用它替换我的 Nexus4 软键。让家庭和重新接收应用程序工作正常，但我正在努力实现后退键。像淘金者一样搜索，但似乎我找不到正确的答案。

看起来有一种方法可以使用 IWindowManager 但不知道它是否仍然有效？！

**能够注入 keyStrokes 的 WindowManager。**

```
final IWindowManager windowManager = IWindowManager.Stub
.asInterface(ServiceManager.getService("window")); 

import android.os.ServiceManager;  
import android.view.IWindowManager; 

The import android.view.IWindowManager cannot be resolved
The import android.os.ServiceManager cannot be resolved 
```

我也尝试使用`ActivityManager`来获取`topActivity`但我不能使用 finish() 返回堆栈。

```
ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
// get the info from the currently running task
List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(1);
Log.d("current task :", "CURRENT Activity ::" + 
taskInfo.get(0).topActivity.getClassName());
ComponentName componentInfo = taskInfo.get(0).topActivity;
taskInfo.get(0).topActivity.getClassName().finish(); 
```

任何帮助表示赞赏。:)

# ruby-on-rails - rails 从视图中提取代码到帮助器（content_tag 误解？）

> ID：15632504
> 
> 赞同：0
> 
> 时间：2013-03-26T08:33:02.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3, content-tag

在我看来，我得到了以下代码：

```
<ul class="thumbnails">
  <% Photo.find_all_by_id(my_params, limit: 10).each do |p| %>
    <li class="thumbnail">
      <%= image_tag(p.url(:fb)) %>
    </li>
  <% end %>
</ul> 
```

它呈现带有缩略图的无序列表。它工作正常 - 我看到带有图像的列表：

```
<ul class="thumbnails">
  <li class="thumbnail">
    <img alt="bmw" src="/assets/.../bmw.jpg?1364218949">
  </li>
</ul> 
```

我想把它放到助手中，像这样：

```
module PhotosHelper
  def photos_thumbs_by_ids(photos_ids)
    content_tag :ul, :class => "thumbnails" do
      Photo.find_all_by_id(photos_ids, limit: 10).each do |p|
        content_tag :li, :class => "thumbnail" do
          image_tag(p.url(:fb))
        end
      end
    end
  end
end 
```

但是当我`<%= photos_thumbs_by_ids my_params %>`在我的视图中使用时，它只呈现：

```
<ul class="thumbnails"></ul> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:37:23.593

看到您的代码后我发现，您`photo_ids`在调用辅助方法时没有传递参数。

```
<%= photos_thumbs_by_ids(photo_ids) %> 
```

由于没有 ids 来查找照片，所以它返回零个项目，因此不会`<li>`创建任何项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:38:03.780

尝试如下；

```
<%= photos_thumbs_by_ids(photo_ids) %>

def photos_thumbs_by_ids(photos_ids)
    content_tag :ul, :class => "thumbnails" do
      Photo.find_all_by_id(photos_ids, limit: 10).each do |p|
        content_tag :li, :class => "thumbnail" do
          concat(image_tag(p.url(:fb)))
        end
      end
    end
  end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T08:43:12.697

问题是每个：

```
Photo.find_all_by_id(photos_ids, limit: 10).each do |p|
...
end 
```

它返回一个数组，而不是字符串。尝试用“地图”收集它并加入

```
module PhotosHelper
  def photos_thumbs_by_ids(photos_ids)
    content_tag :ul, :class => "thumbnails" do
      Photo.find_all_by_id(photos_ids, limit: 10).map { |p|
        content_tag :li, :class => "thumbnail" do
           image_tag(p.url(:fb))
        end
      }.join.html_safe
    end
  end
end 
```

这是因为至少渲染是由有用的方法[capture](http://apidock.com/rails/ActionView/Helpers/CaptureHelper/capture)完成的。此方法仅在结果是字符串时才放入输出缓冲区，并且不要尝试 to_s。

# d3.js - 使用 d3.v2.js 的多系列图

> ID：15632507
> 
> 赞同：0
> 
> 时间：2013-03-26T08:33:09.243
> 
> 标签：d3.js

我们正在使用 d3.v2.js 绘制多线性图。我们对 x 轴使用序数刻度，对 y 轴使用线性刻度，因为我们在 x 轴上显示标签（字符串），在 y 轴上显示数字。

在某些情况下，图表看起来很好，但在某些情况下，它独立绘制 x 轴和 y 轴，并且 y 轴值与 x 轴值不同步。绘图也从 0 而不是第一个 x 轴值开始。

任何指向这个问题的指针都会有很大帮助。

提前致谢。

请在下面找到代码。

```
 function plotMOAGraph(data , sigPathways){
    var margin = {top: 20, right: 80, bottom: 30, left: 100},
    width = 960 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;      

    var x = d3.scale.ordinal(
        (d3.range(0,sigPathways.length))).rangeBands([0, width]);

    var y = d3.scale.linear()
        .range([height, 0]);

    var color = d3.scale.category10();

    var xAxis = d3.svg.axis()
        .scale(x)          
        .orient("bottom");

    var yAxis = d3.svg.axis()
        .scale(y)          
        .orient("left");

    var line = d3.svg.line()
        .interpolate("basis")
        .x(function(d) { return x(d.pathway); })
        .y(function(d) { return y(d.score); });

    var svg = d3.select("#graphDiv").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", 450 + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      color.domain(d3.keys(data[0]).filter(function(key) { return key !== "pathway"; }));             

      var entityNames = color.domain().map(function(name) {           
        return {
          name: name,
          values: data.map(function(d) {
            return {pathway: d.pathway, score: +d[name]};
          })
        };
      });

      x.domain(sigPathways);

      y.domain([
        d3.min(entityNames, function(c) { return d3.min(c.values, function(v) { return v.score; }); }),
        d3.max(entityNames, function(c) { return d3.max(c.values, function(v) { return v.score; }); })
      ]);

      svg.append("g")  
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis)      
        .append("text")
        .attr("dy", "9em")
        .attr("dx","40em")
        .style("text-anchor", "end")
        .text("Pathways");

      svg.append("g")
          .attr("class", "y axis")
          .call(yAxis)
          .append("text")             
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "-4em")
          .style("text-anchor", "end")
          .text("Pathway Scores");

      var tooltip = d3.select("#graphDiv")
        .append("div")   
        .style("visibility", "hidden")
         ; 

      var rotateXAxis = function(d) {
            var name = d.substr(0, 15);
            if(name !== d) {
                name = name + " ... ";
            }
            var el = d3.select(this);                                               
            el.text('').attr("transform",  "rotate(-45)").attr("text-anchor", "end").on("mouseover", showTooltip).on("mouseout",hideTooltip);               
            var tspan = el.append('tspan').text(name);
            tspan.attr('x', 0).attr('dy', '0');

        };

        svg.selectAll('g.x.axis g text').each(rotateXAxis);
        function showTooltip(d) {

            tooltip.text(d).style("position","absolute")
            .style("top",  (d3.event.pageY)-10+"px")
            .style("left",  (d3.event.pageX)-300+"px")
            .style("visibility", "visible")
            .style("font-size", "12px");            
        }

        function hideTooltip() {                
            tooltip.style("visibility", "hidden");          
        }

      var entityName = svg.selectAll(".entityName")
          .data(entityNames)
        .enter().append("g")
          .attr("class", "entityName");

      entityName.append("path")
          .attr("class", "line")
          .attr("d", function(d) {
          return line(d.values); })
          .style("stroke", function(d) {return color(d.name); });

      entityName.append("text")
          .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
          .attr("transform", function(d) { return "translate(" + x(d.value.pathway) + "," + y(d.value.score) + ")"; })
          .attr("x", 3)
          .attr("dy", ".35em")
          .text(function(d) { return d.name; });
} 
```

# highcharts - 在 Highcharts 中只绘制部分数据

> ID：15632513
> 
> 赞同：1
> 
> 时间：2013-03-26T08:33:33.830
> 
> 标签：highcharts

我正在寻找一种仅在面积图中绘制部分数据集的方法。图表上方有一个滑块，可以限制图表中一个系列的范围，而另一个阶梯则整体呈现。我想知道最好的方法是什么。目前唯一的想法是每次滑块移动时重新绘制图表，但我担心这可能会导致性能下降。也许这可以通过 SVG 元素上的掩码之类的东西来完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:09:19.110

我想出了一个简单的解决方案，只需使用剪辑路径剪辑 svg 图：

```
 //var chart is the actual HighChartsInstance;
    var renderer = chart.renderer;
    var group = renderer.g().add();
    var clipPath = renderer.createElement("clipPath");

    clipPath.element.id = 'clip';
    var rect = renderer.rect(0, 0, 200, 400).add(clipPath);
    this.clippingMask = rect.element; //reference to the clipping rect which width is changed by the slider

    clipPath.add(group);
    chart.series[1].group.element.setAttribute('clip-path', "url(#clip)");
    chart.series[1].group.element.childNodes[0].setAttribute('clip-path', "url(#clip)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:13:50.970

你有几种方法

*   使用包含“滑块”的 highstock [http://www.highcharts.com/stock/demo/](http://www.highcharts.com/stock/demo/)

*   使用带有滚动条的 highstock.js 和 highcharts 图表[http://jsfiddle.net/UCmUx/](http://jsfiddle.net/UCmUx/)

    ```
    scrollbar:{
            enabled:true
        }, 
    ```

*   使用不带滚动条的 highcharts 图表[http://jsfiddle.net/UCmUx/1/](http://jsfiddle.net/UCmUx/1/)如果您移动自己的滚动条，请使用 setExtremes() [http://api.highcharts.com/highcharts#Axis.setExtremes()](http://api.highcharts.com/highcharts#Axis.setExtremes())

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:36:18.140

我认为一种选择是修改要限制的系列数据，然后调用：

```
 chart.series[n].setData(newData); 
```

其中 'n' 是您要截断的系列的编号。newData 是除去不需要的点的系列数据的副本。您需要在系列中指定 x 和 y 值，以便将其绘制在正确的位置。

# java - 识别用户是否按下

> ID：15632514
> 
> 赞同：-2
> 
> 时间：2013-03-26T08:33:34.157
> 
> 标签：java, arrays, parsing, trim

我已经为此工作了几天，我非常沮丧。这是我的第一门 Java 课程，所以仍然缺乏知识，请多多包涵。我应该编写一个程序，其中包含用户输入的 10 个等级的数组，然后我计算平均值。特别是我对下面的内容有疑问。

您不应该从用户那里读取双精度数，而应该读取一个字符串。这是过程：

从用户那里读取字符串修剪字符串并获取长度，如果长度<1然后用户点击，如果长度>0，则退出，然后使用将字符串转换为双精度

```
d =Double.parseDouble(S); 
```

到目前为止，我只有这个。在过去的一周里，我一直在添加和删除很多代码。而且我似乎仍然无法让它工作。任何帮助将非常感激！

```
import java.util.*;
import java.io.*;

public class Arrays {

    public static void main(String[] args) {

       double d = 0;
       final int SIZE = 10;
       Scanner reader = new Scanner(System.in);
       String[ ] grades = new String[SIZE];

       System.out.println("Please enter up to 10 grades.");

       for (int i = 0; i < grades.length; i++){
           System.out.print("Grade " + (i + 1) + ": "); 
           grades[i] = reader.nextLine( );
       }

       System.out.println("\nNumber of valid grades entered: " + grades.length);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:44:24.270

尝试这个

```
for (int i = 0; i < grades.length; ){
   System.out.print("Grade " + (i + 1) + ": "); 
   String str = reader.nextLine();
   if(str.trim().length() > 0){
       try{
           grades[i] = Double.parseDouble(str);
           i++;
       }catch(NumberFormatException e){
           e.printStackTrace();
       }
   }
}
System.out.println("\nNumber of valid grades entered: " + i); 
```

恕我直言，我认为成绩应该是一系列`double`即

```
 double[] grades=new double[SIZE]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:43:15.603

您可以通过以下方式尝试

```
 int correctGrades=0;
 double[] grades=new double[SIZE];  //Create array of double instead of String
 for (int i = 0; i < SIZE; i++){
    System.out.print("Grade " + (i + 1) + ": "); 
    String str=reader.nextLine();
    if(str.length() > 0){ // If length is greater than 0 then its correct grade
      grades[i]=Double.parseDouble(str);
      correctGrades++;
    }
}
 System.out.println("\nNumber of valid grades entered: " + correctGrades); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:51:50.860

根据我的理解，这应该是你的 for 循环

```
for (int i = 0; true; i++) {
      System.out.print("Grade " + (i + 1) + ": ");
      grades[i] = reader.nextLine();
      if (grades[i].equals("")) {
        break;
      }
       //check for number format exception if user enters invalid input 
      try {
        d = Double.parseDouble(grades[i]);
      }
      catch (NumberFormatException exception) {
       exception.printStackTrace();
      }
    }
  System.out.println("The value of double entered is : " + d);
    } 
```

在这里，您无限次运行循环，但每次循环都检查用户输入。现在，如果用户输入一个空字符串，您将使用 break 语句退出循环

# mongodb - mongodb按子字段查询

> ID：15632525
> 
> 赞同：32
> 
> 时间：2013-03-26T08:34:01.627
> 
> 标签：mongodb, mongodb-query

如何查询全部`{"module" : "B"}`？

以下查询不起作用：

```
db.XXX.find({ "_id" : { "module" : "B" } }); 
```

万分感谢！

那里的数据看起来像：

```
{
  "_id" : {"module" : "A","date" : ISODate("2013-03-18T07:00:00Z")},
  "value" : {"count" : 1.0}
}

{
  "_id" : {"module" : "B","date" : ISODate("2013-03-18T08:00:00Z")},
  "value" : {"count" : 2.0}
} 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-26T08:38:22.523

尝试：

```
db.XXX.find({ "_id.module" :  "B" }); 
```

不同之处在于您的原始查询将尝试匹配整个子文档（即，_id 是包含值为“B”的“模块”字段的子文档，仅此而已）

参考：[MongoDB 点表示法](http://docs.mongodb.org/manual/core/document/#dot-notation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:38:01.763

使用点符号：

```
db.XXX.find({ "_id.module" : "B" }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T08:44:25.570

对于子文档的精确匹配

```
 db.bios.find(
   {
     '_id.module': 'B'
   }
) 
```

查询使用`dot`符号来访问 a 中的字段`subdocument`：

[参考链接](http://docs.mongodb.org/manual/applications/read/)

# c - UDP服务器没有收到数据

> ID：15632528
> 
> 赞同：0
> 
> 时间：2013-03-26T08:34:23.947
> 
> 标签：c, linux, sockets, network-programming, udp

UDP 服务器没有收到 UDP 客户端程序发送的数据。我觉得我在 UDP 服务器程序中做错了什么。谢谢。

```
 send_client_message = malloc(message_size);
  recv_client_message = malloc(message_size);
  sockaddr_in_length = sizeof(struct sockaddr_in);

  /* Create a datagram socket.*/
  server_sock = socket(AF_INET,SOCK_DGRAM,0);
  if (server_sock == return_error)
  {
    printf("Error in opening a datagram socket\n");
    exit(0);
  }
  printf("Host sock = %d\n",server_sock);

  /* Bind a local name to the socket.*/
  server_sockaddr_in.sin_family      = AF_INET;
  server_sockaddr_in.sin_port        = 4999;
  server_sockaddr_in.sin_addr.s_addr = INADDR_ANY;
  rc = bind(server_sock,(struct sockaddr *)&server_sockaddr_in,
            sockaddr_in_length);
  if (rc == return_error)
  {
    printf("Error in binding - \n");
    (void)close(server_sock);
    exit(0);
  }

  /* Get the server information, and print its data out.*/
  rc = getsockname(server_sock,(struct sockaddr *)&server_sockaddr_in,
                   &sockaddr_in_length);
  if (rc != return_error)
  {
    printf("Server Information\n");
    printf("--------------------------------\n");
    printf("Server sock       - %d\n",server_sock);
    printf("Server IP address - %x\n",
                                  server_sockaddr_in.sin_addr.s_addr);
    printf("Server port #     - %d\n\n",
                                  server_sockaddr_in.sin_port);
  }

  optval = message_size;
  optlen = sizeof(optval);
  rc = setsockopt(server_sock,SOL_SOCKET,SO_SNDBUF,(char *)&optval,
                  optlen);
  if (rc == return_error)
  {
    //printf("Error in setsockopt - %d\n",sock_errno());
    printf("Error in setsockopt - \n");
    (void)close(server_sock);
    exit(0);
  }

  printf(".... Ready for clients ....\n");

  /* Loop forever */
  for (;;)
  {
    /* Monitor incoming buffers.   */
    rc = recvfrom(server_sock,recv_client_message,message_size,0,
                  (struct sockaddr *)&client_sockaddr_in,
                  &sockaddr_in_length);

    printf("Recieved packet from %s: %d\nData: %s\n\n", inet_ntoa(client_sockaddr_in.sin_addr), ntohs(client_sockaddr_in.sin_port), recv_client_message); 
   fflush(stdout);

    if (rc == return_error)
    {
      printf("Error in receiving message \n");
      break;
    }
   }  /* end of for(;;) */

  /* Return the socket back to the system and exit normally.  */
  rc = close(server_sock);
  if (rc == return_error)
  {
    printf("Error in closing the socket  \n");
    exit(0);
  }

  printf("Datagram server terminated\n");
  exit(0);
}

    for(i = 0; i < NPACK; i += 1) {
        printf("Sending packet %d\n", i);
        sprintf(buf, "This is packet %d\n", i);
        if(sendto(s, buf, BUFLEN, 0, (struct sockaddr *) &si_other, slen) == -1)
            diep("sendto()");
    }

    close(s);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:35:44.223

```
server_sockaddr_in.sin_port        = 4999; 
```

你可能想要`htons`那个 4999。

# verilog - verilog 总是 @(posedge) 在 uart 中失败

> ID：15632533
> 
> 赞同：3
> 
> 时间：2013-03-26T08:34:43.677
> 
> 标签：verilog

我正在学习verilog，我认为总是@*和总是（@posedge clk，...）

这是一段应该通过 uart 发送位的代码。合成失败。错误是“逻辑与已知 FF 或 Latch 模板不匹配。当前软件版本不支持您用于描述寄存器或锁存器的描述样式。” （以及 , 和 的 3 个其他错误）如果我将 always @(...) 更改为 always @*，则在下一步（“实现设计”）中事情会失败，因为事情没有连接。

在我的书中，他们实现了一个 fsmd，状态为 always (posedge clk)，其他逻辑始终为 @*，但我不明白为什么这不起作用。

在另一个论坛上，我读到错误可能来自过于复杂的条件。但是我也简化了一些事情（没有在这里编码代码，但基本上我删除了 case(state) 和 ifs 以使用 ? : 或二进制条件进行单行分配，但它也不起作用）

我之前在我编写的其他代码中看到过这个错误，但我没有深入了解它，所以如果你能帮助我理解一般问题（用这个 uart 东西作为对具体示例的支持），我会很高兴的。谢谢托马斯

PS：我使用的是 xilinx spartan 3e 入门套件和 xilinx ise 14.4

```
module UART_out #(parameter [3:0] NUM_BITS = 8)
(
input wire baud_clk,
input wire send_tick,
input wire[NUM_BITS-1:0] data_in,
output wire tx,
output wire debug_done
);
localparam
        IDLE = 0,
        TRANSMIT = 1;
reg[NUM_BITS:0] bits_to_send;
reg state;
reg out_bit;
reg[4:0] cnt;

always @(posedge baud_clk, posedge send_tick)
begin
    case (state)
    IDLE:
        if (send_tick)
        begin
            bits_to_send <= {data_in, 0};
            state <= TRANSMIT;
            cnt <= 0;
        end
    TRANSMIT:
        begin
            if (cnt < NUM_BITS)
                cnt <= cnt + 1;
            else
                state <= IDLE;
            bits_to_send <= {1, bits_to_send[NUM_BITS:1]};
            out_bit <= bits_to_send[0];
        end
    endcase
end

assign tx = (state == IDLE ? 1 : out_bit);
assign debug_done = (state == IDLE);    
endmodule 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T09:12:56.670

错误：

```
The logic for does not match a known FF or Latch template. The description style you are using to describe a register or latch is not supported in the current software release. 
```

指的是综合工具没有任何与您的描述相匹配的硬件单元可供使用。

你想要什么硬件：

```
always @(posedge baud_clk, posedge send_tick) 
```

这看起来像您想要一个带有使能信号的触发器。使能信号 (send_tick) 应为 1 个时钟周期宽。然后使用它来选择时钟沿上的逻辑路径。不作为替代触发器。

我认为这就是你真正需要的：

```
always @(posedge baud_clk) begin
  case (state)
    IDLE:
      if (send_tick) begin
        //...
      end
     //...
   endcase
end 
```

如果`send_tick`来自另一个时钟域，那么您将需要进行一些时钟域交叉以将其转换为`baud_clk`.

您可能会对具有多个触发器的块感到困惑，它们通常是 clk 和 reset。A `negedge reset_n`or`posedge reset`通常用于复位（初始化）条件。

如果添加重置：

```
always @(posedge baud_clk or negedge reset_n) begin
  if (~reset_n) begin
    //reset conditions
    state <= IDLE;
    //...
  end
  else begin
    // Standard logic
  end
end 
```

你会注意到这里有一个非常明确的结构，if reset else ... 综合工具将其识别为具有异步复位的触发器。重置条件下的数据也是静态的，通常将所有内容设置为零。

# javascript - Javascript中处理的curveVertex

> ID：15632536
> 
> 赞同：0
> 
> 时间：2013-03-26T08:34:58.223
> 
> 标签：javascript, processing

我试图在javascript中复制最初在处理中编写的东西，它使用curveVertex来绘制。我不太了解curveVertex 的工作原理，我尝试使用quadraticCurveTo 和bezierCurveTo 来复制它，但失败了，所以我正在寻求帮助。我无法通过谷歌找到任何有用的东西。

[这是来自http://processing.org/reference/curveVertex_.html](http://processing.org/reference/curveVertex_.html)的示例代码

```
beginShape();
curveVertex(84,  91);
curveVertex(84,  91);
curveVertex(68,  19);
curveVertex(21,  17);
curveVertex(32, 100);
curveVertex(32, 100);
endShape(); 
```

如果您可以使用 Javascript 复制像这样简单的东西，或者指出我正确的方向，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:01:35.220

在 Processing.js 源[http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.js中找到它](http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.js)

# java - 启动 servlet contextListener 但无法启动应用程序 index.jsp(Home Page)

> ID：15632538
> 
> 赞同：-1
> 
> 时间：2013-03-26T08:35:08.620
> 
> 标签：java, jsp, servlets

我的 web.xml 文件代码

```
<welcome-file-list>
    <welcome-file>/index.jsp</welcome-file>
</welcome-file-list>
<listener>
    <listener-class>com.vts.action.Server</listener-class>
</listener> 
```

Server.java 代码....

```
public class Server extends HttpServlet implements ServletContextListener {
    private static final long serialVersionUID = 1L;

    Socket clientsocket;
    ServerSocket socket = null;
    int PORT = 9090;

    @Override
    public void contextDestroyed(ServletContextEvent arg0) {
        // TODO Auto-generated method stub
        System.out.println("ServletContextListener destroyed");

    }
       @Override
       public void contextInitialized(ServletContextEvent arg0) 
        {
           // hear code create socket server and accept multiple client connection and                        
              String via gps and save string in database is working correctly 
        }
} 
```

但是现在我的问题是我想通过在后台运行的 gps 接受继续字符串

但是 index.jsp 页面没有启动以为是我的欢迎文件。我不确定我的web.xml中的监听器配置是对还是错.....请给建议

感谢和问候

克里希纳坎特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T10:31:36.767

Thanks for Reply ,Finally i get Solution... i am use threading in server side with TCP connection and create two java class MyListerner.java in that use contextListner method

```
@Override
public void contextDestroyed(ServletContextEvent arg0) {
    System.out.println("ServletContextListener destroyed");
}
@Override
public void contextInitialized(ServletContextEvent arg0) {
    ExecutorService executorService = Executors.newSingleThreadExecutor();
    executorService.submit(new RunClassOnDeployment(arg0.getServletContext()));
} 
```

in contextInitialized call server.java(TCP connecton with threading)

```
vtsDataDao vtsData ;
ServletContext myServletContext; // in case you need the servelet context

public server(ServletContext sc) {
       myServletContext = sc;
}
@Override
public void run() {
    ServerSocket serverSocket = null;
    try {
        // Create the server socket.
        serverSocket = new ServerSocket(9090);
       } catch (IOException ioe) {
        System.out.println("Could not create server socket at 9090\. Quitting.");
    }
    System.out.println("Listening for clients on 9090...");
    while (true) {
        try {
            Socket clientSocket = serverSocket.accept();
            try{
                DataInputStream is = new DataInputStream(new BufferedInputStream(clientSocket.getInputStream()));
                while (true) 
                   {
                    byte[] byteData = receiveData(is);
                    String frameData = new String(byteData).trim();
                    System.out.println("Incoming String's:-"+frameData);
                    new vtsDataDao().sendInputFrame(frameData);
                   }//end while
               }catch(Exception e){

               }//end ctry catch                
        } catch (IOException ioe) {
            System.out
                    .println("Exception encountered on accept. Ignoring. Stack Trace :");
            ioe.printStackTrace();
        }
    }
} 
```

> > ** Note:- in above class i am use two method 1\. receiveData(DataInputStream is) for read i/p data and return VTS Data String And sendInputFrame(frameData);

web.XML

```
 <listener>
    <listener-class>com.vts.action.MyListener</listener-class>
</listener> 
```

# c# - c# 桌面应用程序中不允许使用默认参数说明符

> ID：15632543
> 
> 赞同：0
> 
> 时间：2013-03-26T08:35:27.890
> 
> 标签：c#, visual-studio-2008, .net-2.0

```
private string formatSizeBinary(Int64 size, Int32 decimals = 2)
        {
            string[] sizes = { "Bytes", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB" };
            double formattedSize = size;
            Int32 sizeIndex = 0;
            while (formattedSize >= 1024 & sizeIndex < sizes.Length)
            {
                formattedSize /= 1024;
                sizeIndex += 1;
            }
            return string.Format("{0} {1}", Math.Round(formattedSize, decimals).ToString(), sizes[sizeIndex]);
        } 
```

我懂了

> “不允许使用默认参数说明符”

错误`"Int32 decimals = 2"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:42:27.767

由于您的代码对我来说看起来不错，但[`Optional parameters`](http://msdn.microsoft.com/en-us/library/dd264739.aspx)带有 Visual Studio 2010（可能还有 .NET 4.0 框架）

> Visual C# 2010 引入了命名参数和可选参数

你需要一个像这样的方法；

```
private string formatSizeBinary(Int64 size, Int32 decimals, int value)
        {
            decimals = value;
            string[] sizes = { "Bytes", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB" };
            double formattedSize = size;
            Int32 sizeIndex = 0;
            while (formattedSize >= 1024 & sizeIndex < sizes.Length)
            {
                formattedSize /= 1024;
                sizeIndex += 1;
            }
            return string.Format("{0} {1}", Math.Round(formattedSize, decimals).ToString(), sizes[sizeIndex]);
        } 
```

然后你可以调用它你想要的值；

```
formatSizeBinary(yoursize, decimals, 2);
formatSizeBinary(yoursize, decimals, 3);
formatSizeBinary(yoursize, decimals, 4); 
```

# python - 检查字符串中是否存在值的语法

> ID：15632545
> 
> 赞同：0
> 
> 时间：2013-03-26T08:35:33.413
> 
> 标签：python

我试图做一个简单的检查字符串中是否有 3 个特定值。如果有，该语句应该什么都不返回，而不是保存。

这是我的代码，但我认为语法错误：

```
if not ('2239687' or '2238484' or '2239440') in user_id:
    #The user is not admin, save the user
    web_user.save() 
```

详细地说，我希望它测试`user_id`是“2239687”、“2238484”还是“2239440”（而不是，例如“002239440”）。如果 user_id 是这三个值之一（并且只有这三个值），则该语句应返回 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:40:45.447

另一种选择：

```
if not any(idx in user_id for idx in ('2239687' ,'2238484' , '2239440')):
    # do something 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:46:09.450

```
if not any(x in user_id for x in ('2239687', '2238484', '2239440')):
    #The user is not admin, save the user
    web_user.save() 
```

这将检查三个字符串中的任何一个是否都不存在于`user_id`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T08:36:29.787

像这样试试

```
if user_id not in ('2239687' ,'2238484' , '2239440'): 
```

或者

```
if not user_id in ('2239687' ,'2238484' , '2239440'): 
```

# c++ - C++ 模板的实例化惰性规则

> ID：15632546
> 
> 赞同：0
> 
> 时间：2013-03-26T08:35:38.450
> 
> 标签：c++, templates

AFAIK 模板实例化只有两个“阶段”：

*   默认（立即），
*   延迟（懒惰）。

默认用于以下成员：

*   `typedef`年代，
*   成员字段。

延期：

*   功能（静态或非静态），
*   嵌套类型。

这是正确的，还是有其他一些关于编译器渴望实例化模板的陷阱/规则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T08:45:54.197

完全不正确。模板实例化只有一个阶段。何时（何地，这是一个重要的点）取决于它的使用方式。我认为您将名称查找与实例化混淆了。

*名称*查找分两个阶段完成。（至少如果编译器是一致的——VC++ 仍然会出错。）第一个发生在编译器解析模板定义时；第二个当模板被实例化时。符号是在第一阶段还是第二阶段查找取决于它是否依赖。确定这一点的规则相当复杂，但总的来说：

*   如果它是一个函数名，并且它的一个或多个参数依赖于模板参数，则函数名是依赖的，它将被查找（和函数重载决议）将发生在实例化时，而不是之前。

*   如果名称由模板参数限定（例如 `T::something`，`T`模板参数在哪里），则它是依赖的。

*   在类模板的成员中，如果有一个依赖基类（一个在某种程度上依赖于模板参数的基类），那么右边的任何东西`this->`都是依赖的。

（实际的规则要复杂得多，但上面是一个粗略的近似值，对于大多数用途来说可能已经足够了。）

## 编辑：

只是一些差异的例子：

```
class MyType {};

void func0( double d )
{
    std::cout << "called func0( double )" << std::endl;
}

void func1( double, MyType const& )
{
    std::cout << "called func1( double )" << std::endl;
}

template <typename T>
int funcT( T const& param )
{
    func0( 42 );            //  non-dependent
    func1( 42, param );     //  dependent
}

void func0( int d )
{
    std::cout << "called func0( int )" << std::endl;
}

void func1( int, MyType const& )
{
    std::cout << "called func1( int )" << std::endl;
}

int
main()
{
    funcT( MyType() );
    return 0;
} 
```

输出应该是

```
called func0( double )
called func1( int ) 
```

`func0`对in的调用`funcT`是不依赖的，因此名称查找仅在定义模板时发生，而 *不是*在稍后实例化时发生。那时，只有一个`func0`，所以它被调用。

`func1`对in的调用`funcT`是依赖的（因为它的第二个参数取决于模板参数），因此在实例化点会有一个额外的名称查找（`main`在这种情况下紧跟在 之后）。此附加查找仅使用 ADN，但由于其中一个参数是在全局命名空间中定义的，因此 ADN 将在全局命名空间中查找，并找到第二个声明`func1`as（然后将由重载决议选择，因为它是更好的匹配）。

请注意，我无法验证这一点，因为目前我只能访问已损坏的 VC++11。它很微妙，所以我很可能错过了一些东西。一般规则是避免这种歧义。

请注意，如果`func0`没有在模板定义之前声明，则代码不应编译。根据经验，从预标准编译器（或 VC++）迁移时，这是最常见的错误原因。

另一个有时令人惊讶的常见情况：

```
template <typename Base>
class Derived : public Base
{
public:
    Derived()
    {
        init();         //  Non-dependent lookup, will NOT find any
                        //  function init() in Base!!!
        this->init()    //  Dependent lookup, WILL find
                        //  Base::init, if it exists.
        Base::init()    //  Also dependent.
    }
}; 
```

通常，如果您使用这种模式，并在像 VC++ 这样的预标准编译器上进行开发，那么当您转向更现代的编译器时，您会遇到许多编译器错误。它们很容易通过添加`this->`. 但是，*如果*在定义模板时 还有一个`init`可见的全局函数，您将调用它，而*不是*基类中的函数。如果您为您的函数选择有意义的名称，并将全局函数放在命名空间中，您可能不会经常受到这种无声的语义变化的影响，但请注意。

# sql - 如何从 2 表查询的结果中找到名称流行度的差异？

> ID：15632551
> 
> 赞同：0
> 
> 时间：2013-03-26T08:35:57.730
> 
> 标签：sql, mysqli

假设我有 2 张桌子：

```
table1 and table2 
```

表 1 具有值：

```
id(key), last_name(char) 
```

表 2 的值：

```
id(key), year_born(char) 
```

我可以将这两张桌子加入：

```
SELECT last_name, year_born
FROM table1 INNER JOIN table2
  ON table1.id = table2.id; 
```

我如何找到相隔 10 年的 2 年中哪些名字最受欢迎？假设 table1 和 table2 每个都有数千个条目。

我试过了：

```
SELECT last_name, name_year, COUNT(last_name) AS num
FROM table1 INNER JOIN table2
  ON table1.id = table2.id
GROUP BY last_name, name_year
ORDER BY num DESC; 
```

例如，我想查看从 2000 年到 2010 年最流行的名称增加。如何创建一个查询以显示名称的流行度增加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:31:47.083

您可以创建一个返回 2000 年结果的子查询，以及另一个返回 2010 年结果的子查询。然后只需加入两个子查询并比较结果

例子：

```
SELECT  y2010.last_name,
        COALESCE(y2000.cnt, 0)  y2000 ,
        COALESCE(y2010.cnt, 0)  y2010 ,
        COALESCE(y2010.cnt, 0) - COALESCE(y2000.cnt, 0) changes
FROM    ( SELECT    last_name ,
                    COUNT(*) cnt
          FROM      table1
                    INNER JOIN table2 ON table1.id = table2.id
          WHERE     year_born = 2000
          GROUP BY  last_name
        ) as y2000
RIGHT JOIN 
        ( SELECT  last_name ,
                COUNT(*)  cnt
        FROM    table1
                INNER JOIN table2 ON table1.id = table2.id
        WHERE   year_born = 2010
        GROUP BY last_name
        ) as y2010 
ON y2000.last_name = y2010.last_name 
```

[SQLFiddle 演示：](http://sqlfiddle.com/#!2/3febc/10)

# map - 如何在 Solr 的 POJO 中存储地图？

> ID：15632552
> 
> 赞同：2
> 
> 时间：2013-03-26T08:36:02.860
> 
> 标签：map, solr, lucene, schema

如何在 Solr 的 POJO 中存储地图？目前我有这样的构造

```
@Field("*_locId")
protected Map<String, Integer> geoLocationToLocationId; 
```

在 schema.xml 文件中：

```
<dynamicField name="*_locId" type="int" indexed="false" stored="true" multiValued="false" /> 
```

通过添加：

```
public void addGeoLocationToLocationAutoInMapping(GeoCoordinates geoCoordinates,
        Integer id) {
    if(this.geoLocationToLocationId == null) {
        this.geoLocationToLocationId = new HashMap<String, Integer>();
    }
    this.geoLocationToLocationId.put(geoCoordinates.toString() +
            "_locId", id);
} 
```

得到是相似的。

这行得通，但是我在 Solr 中存储这样的 Java Map 有点脏，因为我可以获得大量字段。是否有另一种方法可以将 Java Maps 写入 Solr？

我不想索引它们，我只想保存数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T00:52:45.963

虽然我想总体上遵循@Geert-Jan 的建议，但有时您只想让 Solr 返回您需要的所有数据。在 Solr 中存储像您这样的简单映射（字符串到整数）的更好方法是将键和值存储为两个单独的多值字段，并确保索引一致。因此，您将拥有一个多值字段，例如：

地理位置：`new york, los angeles, chicago`

和另一个喜欢

位置标识：`1, 2, 3`

并确保字段中没有任何值为空`location_id`，否则字段中的索引将不匹配。

# php - 限制访客用户下载任何文件

> ID：15632553
> 
> 赞同：0
> 
> 时间：2013-03-26T08:36:11.060
> 
> 标签：php, file, session, download

我有一个下载ppt文件的页面。我想添加一项功能，无需提供登录凭据，该页面将不会被下载。我的代码是这样的：

```
if(!isset($_SESSION['user']) && basename($_SERVER['PHP_SELF']) == 'XYZ.ppt'){
    header('location:index.php');
} 
```

但是在浏览器中，如果我键入该 ppt 文件的完整路径，则它不会检查会话并自动下载。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:38:04.380

在php中，你可以下载喜欢

```
<?php
// We'll be outputting a PDF
header('Content-type: application/pdf');

// It will be called downloaded.pdf
header('Content-Disposition: attachment; filename="downloaded.pdf"');

// The PDF source is in original.pdf
readfile('original.pdf');
?> 
```

# css - 元素的动态宽度，取决于旁边元素的宽度

> ID：15632556
> 
> 赞同：0
> 
> 时间：2013-03-26T08:36:16.450
> 
> 标签：css, width

通过左右浮动，我有 2 个元素彼此相邻。**正确**的元素宽度是动态的，通过填充动态增加或减少的子元素！但**左边**的元素是一个简单的*DIV*。我希望它的宽度根据**正确**的元素宽度而改变。CSS如何做到这一点？

例子 ：

```
<div style="float:left"></div>
<div style="float:right;padding:5px 10px;">
    <a>child1</a> 
    <a>child2</a> 
    <a>child3</a> 
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:09:10.597

我不是 100% 确定您要达到的目标，但如果我理解正确：

*   您有一个区域 A，您在其中浮动`right`有 3 个孩子的元素
*   你想用`left`元素填充的区域 A 的其余部分

这个对吗？

最简单的方法是在`inline-block`元素周围包裹一个元素`right`，它代表整个 A 区域，并且`right`元素浮动在该父元素的右侧。然后，您分配给 parent 的所有属性都将表示该`right`元素未覆盖的区域 A。例如背景颜色：

```
 <div style="display:inline-block; width:100%; background-color:blue;">
    <div style="float:right; right:0; padding:5px 10px; background-color:yellow;">
        <a>child1</a> 
        <a>child2</a> 
        <a>child3</a> 
    </div>
    </div> 
```

在这里你可以在[jsfiddle 上看到结果：http://jsfiddle.net/rKQXJ/](http://jsfiddle.net/rKQXJ/)

# clojure - Clojure 状态如何工作？

> ID：15632560
> 
> 赞同：3
> 
> 时间：2013-03-26T08:36:24.813
> 
> 标签：clojure, quil

我知道概念上的状态是什么，但我不明白在这个例子中它是如何实现的： [https ://github.com/quil/quil/blob/master/examples/gen_art/31_oo_circles.clj](https://github.com/quil/quil/blob/master/examples/gen_art/31_oo_circles.clj)

我只是没有看到它。状态实现发生在第**100、109 和 137**行：

98-100：

```
(defn mouse-released []
  (add-circles (state :circles))) 
```

109：

`(set-state! :circles circles*)`

135-140：

```
(defn draw []
  (background 255)
  (let [circles* (state :circles)
        circles (swap! circles* update-circles)]
    (doseq [c circles]
      (draw-circle c)))) 
```

这些线路上发生了什么？

***设定状态！****是一个 Quil 方法，它的实现可以在[https://github.com/quil/quil/wiki/set~state%21找到](https://github.com/quil/quil/wiki/set~state%21)*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T18:26:08.363

简短的回答：它使用applet.clj 中定义的[原子](https://github.com/quil/quil/blob/master/src/quil/applet.clj#L374)

它是在第 17 行的[core.clj](https://github.com/quil/quil/blob/master/src/quil/core.clj)中定义的函数，它提取存储为附加到小程序上的元数据的原子的状态信息。设置状态首先通过调用`(:state (meta (current-applet))`从小程序对象中提取元数据（这是一个映射）来查找存储当前“状态”的原子，然后返回存储在 :state 键中的原子。然后它调用`reset!`在这个原子中放入一个新值。它被 (:use quil.core) 包含在`ns`声明中。

# api - 用于访问 Metro 和电话应用程序信息的 Windows 商店 API

> ID：15632565
> 
> 赞同：9
> 
> 时间：2013-03-26T08:36:39.000
> 
> 标签：api, windows-phone-7, microsoft-metro, windows-store-apps

我可以知道是否有任何官方的 microsoft api 用于地铁和电话应用程序，我们可以连接并获取有关应用程序、下载、发布者等的信息。

我认为 live api 仅适用于与 skydrive、hotmail 或 skype 连接的应用程序。

我可以看到很多网站在他们的网站上提供此类信息。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-10T14:35:22.240

您好，这是我创建的一篇博客文章，概述了该过程：http: [//jasonthomascarter.blogspot.com/2013/08/the-friendly-developers-guide-to.html](http://jasonthomascarter.blogspot.com/2013/08/the-friendly-developers-guide-to.html)

开始了！首先，我们将从 Windows Store 网站的 Robots.txt 文件开始。[http://apps.microsoft.com/robots.txt](http://apps.microsoft.com/robots.txt)

网站使用 robots.txt 来指导网络爬虫如何表现、他们希望他们看到什么以及他们不希望他们看到什么。

[http://www.robotstxt.org/](http://www.robotstxt.org/)

Web 机器人（也称为 Web Wanderers、Crawlers 或 Spiders）是自动遍历 Web 的程序。谷歌等搜索引擎使用它们来索引网络内容，垃圾邮件发送者使用它们来扫描电子邮件地址，它们还有许多其他用途。

在这种情况下，我们感兴趣的是 Sitemaps.xml 索引文件。[http://apps.microsoft.com/windows/sitemap_index.xml](http://apps.microsoft.com/windows/sitemap_index.xml)

[http://www.sitemaps.org/](http://www.sitemaps.org/)

站点地图是网站管理员通知搜索引擎有关其网站上可供抓取的页面的一种简便方法。在最简单的形式中，站点地图是一个 XML 文件，其中列出了站点的 URL 以及有关每个 URL 的附加元数据（上次更新时间、更改频率以及相对于站点中其他 URL 的重要性） ) 以便搜索引擎可以更智能地抓取网站。

站点地图索引文件列出了每个单独的站点地图 XML 文件。在撰写本文时，apps.microsoft.com 网站有 141 个单独的站点地图 XML 文件。

在各个文件中包含数千个指向 Windows 应用商店应用网页的 URL。例如 PlayTo Receiver 应用程序的 URL：

[http://apps.microsoft.com/windows/en-us/app/playto-receiver/72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e](http://apps.microsoft.com/windows/en-us/app/playto-receiver/72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e)

这些应用程序的网页确实包含一些我们可以从 HTML 中抓取的信息，但我们可以做得更好......我们在这里获得的关键信息是应用程序 ID 以及这些应用程序 ID 发布到的地理区域店铺。

例如：

72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e

和我们等...

现在到了好东西，我们可以使用我们新发现的 App Id 和地理信息调用一些 Web 服务。

[https://services.apps.microsoft.com/browse/6.2.9200-1/615/en-US_en-US/c/US/cp/10005001/Apps/72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e](https://services.apps.microsoft.com/browse/6.2.9200-1/615/en-US_en-US/c/US/cp/10005001/Apps/72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e)

通过此 Web 服务可以获得大量信息，但元素名称并没有清楚地说明这些信息。这是我对其中许多（不是全部）的解释，以帮助您入门。

sSubCategoryName = rawXML.getElementsByTagName('Sc')[0].getElementsByTagName('N')[0].childNodes[0].nodeValue;

sSubCategoryId = rawXML.getElementsByTagName('Sc')[0].getElementsByTagName('I')[0].childNodes[0].nodeValue;

sHasTrial = rawXML.getElementsByTagName('Try')[0].childNodes[0].nodeValue;

sDescription = rawXML.getElementsByTagName('D')[0].childNodes[0].nodeValue;

sDeveloper = rawXML.getElementsByTagName('Dev')[0].childNodes[0].nodeValue;

sWebsite = rawXML.getElementsByTagName('Ws')[0].childNodes[0].nodeValue;

sSupport = rawXML.getElementsByTagName('Sws')[0].childNodes[0].nodeValue;

sPrivacy = rawXML.getElementsByTagName('Pu')[0].childNodes[0].nodeValue;

sCategoryName = rawXML.getElementsByTagName('C')[0].getElementsByTagName('N')[0].childNodes[0].nodeValue;

sCategoryId = rawXML.getElementsByTagName('C')[0].getElementsByTagName('I')[0].childNodes[0].nodeValue;

sPrice = rawXML.getElementsByTagName('P')[0].childNodes[0].nodeValue;

sForegroundColor = rawXML.getElementsByTagName('Fg')[0].childNodes[0].nodeValue;

sBackgroundColor = rawXML.getElementsByTagName('Bg')[0].childNodes[0].nodeValue;

sAppIcon = rawXML.getElementsByTagName('Ico')[0].childNodes[0].nodeValue;

sAppName = rawXML.getElementsByTagName('T')[0].childNodes[0].nodeValue;

sPackageFamilyName = rawXML.getElementsByTagName('Pfn')[0].childNodes[0].nodeValue;

sResourceId = rawXML.getElementsByTagName('R')[0].childNodes[0].nodeValue;

sId = rawXML.getElementsByTagName('I')[0].childNodes[0].nodeValue;

sCapabilities = sCapabilities + arrCapabilities[k].childNodes[0].nodeValue+",";

sUpdate = rawXML.getElementsByTagName('Ud')[0].childNodes[0].nodeValue;

sFeatures1 = rawXML.getElementsByTagName('Dbp')[0].childNodes[0].nodeValue;

sFeatures2 = rawXML.getElementsByTagName('Dbp')[1].childNodes[0].nodeValue;

sFeatures3 = rawXML.getElementsByTagName('Dbp')[2].childNodes[0].nodeValue;

sFeatures4 = rawXML.getElementsByTagName('Dbp')[3].childNodes[0].nodeValue;

sFeatures5 = rawXML.getElementsByTagName('Dbp')[4].childNodes[0].nodeValue;

sFeatures6 = rawXML.getElementsByTagName('Dbp')[5].childNodes[0].nodeValue;

sFeatures7 = rawXML.getElementsByTagName('Dbp')[6].childNodes[0].nodeValue;

sFeatures8 = rawXML.getElementsByTagName('Dbp')[7].childNodes[0].nodeValue;

sFeatures9 = rawXML.getElementsByTagName('Dbp')[8].childNodes[0].nodeValue;

sScreenshot1 = rawXML.getElementsByTagName('Ss')[0].getElementsByTagName('U')[0].childNodes[0].nodeValue

sScreenshot2 = rawXML.getElementsByTagName('Ss')[1].getElementsByTagName('U')[0].childNodes[0].nodeValue

sScreenshot3 = rawXML.getElementsByTagName('Ss')[2].getElementsByTagName('U')[0].childNodes[0].nodeValue

sScreenshot4 = rawXML.getElementsByTagName('Ss')[3].getElementsByTagName('U')[0].childNodes[0].nodeValue

sScreenshot5 = rawXML.getElementsByTagName('Ss')[4].getElementsByTagName('U')[0].childNodes[0].nodeValue

sScreenshot6 = rawXML.getElementsByTagName('Ss')[5].getElementsByTagName('U')[0].childNodes[0].nodeValue

sScreenshot7 = rawXML.getElementsByTagName('Ss')[6].getElementsByTagName('U')[0].childNodes[0].nodeValue

sScreenshot8 = rawXML.getElementsByTagName('Ss')[7].getElementsByTagName('U')[0].childNodes[0].nodeValue

sScreenshot9 = rawXML.getElementsByTagName('Ss')[8].getElementsByTagName('U')[0].childNodes[0].nodeValue

sCaption1 = rawXML.getElementsByTagName('Ss')[0].getElementsByTagName('Cap')[0].childNodes[0].nodeValue

sCaption2 = rawXML.getElementsByTagName('Ss')[1].getElementsByTagName('Cap')[0].childNodes[0].nodeValue

sCaption3 = rawXML.getElementsByTagName('Ss')[2].getElementsByTagName('Cap')[0].childNodes[0].nodeValue

sCaption4 = rawXML.getElementsByTagName('Ss')[3].getElementsByTagName('Cap')[0].childNodes[0].nodeValue

sCaption5 = rawXML.getElementsByTagName('Ss')[4].getElementsByTagName('Cap')[0].childNodes[0].nodeValue

sCaption6 = rawXML.getElementsByTagName('Ss')[5].getElementsByTagName('Cap')[0].childNodes[0].nodeValue

sCaption7 = rawXML.getElementsByTagName('Ss')[6].getElementsByTagName('Cap')[0].childNodes[0].nodeValue

sCaption8 = rawXML.getElementsByTagName('Ss')[7].getElementsByTagName('Cap')[0].childNodes[0].nodeValue

Windows 应用商店不仅仅是应用程序，还有评论，而且还有很多。目前，Windows 应用商店中有超过 210,000 条应用评论。这些评论来自世界各地，所以你需要一些国家代码，你方便的花花公子 App Id 并注意最后的 pn/1，你会发现这个服务每页只返回 10 条评论，只是增加将此值设置为 pn/2、pn/3 等。直到您的评论用完。

var arrCountryCodes = [“AE”、“AR”、“AT”、“AU”、“BE”、“BG”、“BH”、“CA”、“CH”、“CL”、“CN”、“CO "、"CR"、"CY"、"CZ"、"DE"、"DK"、"DZ"、"EE"、"EG"、"ES"、"FI"、"FR"、"GB"、 “GR”、“HK”、“HR”、“HU”、“ID”、“IE”、“IL”、“IN”、“IQ”、“IT”、“JO”、“JP”、“KW” "、"KZ"、"LB"、"LK"、"LT"、"LU"、"LV"、"LY"、"MA"、"MT"、"MX"、"MY"、"NL"、 “否”、“新西兰”、“OM”、“PE”、“PH”、“PK”、“PL”、“QA”、“RO”、“RS”、“RU”、“SA”、“SE”、“SG”、“SI”、“SK” "、"TH"、"TN"、"TR"、"TT"、"UA"、"US"、"UY"、"VE"、"VN"]；

[https://services.apps.microsoft.com/4R/6.2.9200-1/1/en-US/m/US/Apps/f514d64b-8705-43b7-a400-c4f4f3dedfc0/Reviews/all/s/date/ 1/pn/1](https://services.apps.microsoft.com/4R/6.2.9200-1/1/en-US/m/US/Apps/f514d64b-8705-43b7-a400-c4f4f3dedfc0/Reviews/all/s/date/1/pn/1)

这个对元素名称的描述性更强，所以我认为不需要进一步解释。您可以看到全名、显示名称、用户选择用来代表自己的图像。

接下来我们可以做一些搜索......

[https://services.apps.microsoft.com/search/6.2.9200-1/615/en-US_en-US/m/US/c/US/il/en-US/cp/10005001/query/cid/ 0/pf/1/pc/0/pt/x64/af/0/lf/0/s/0/2/pn/0?phrase=软件](https://services.apps.microsoft.com/search/6.2.9200-1/615/en-US_en-US/m/US/c/US/il/en-US/cp/10005001/query/cid/0/pf/1/pc/0/pt/x64/af/0/lf/0/s/0/2/pn/0?phrase=Software)开发者

在这里它再次变得有点神秘，但现在你应该已经习惯了。您可以从 I 元素获取 App ID 并将其从那里带回浏览服务*f514d64b-8705-43b7-a400-c4f4f3dedfc0*

至此，您已经掌握了从 Windows 应用商店中提取大量信息的基础知识，然后您就可以随心所欲了。如果您发现这很有用和/或使用这些信息制作了一些应用程序，请分享一些其他信息，否则请在评论中告诉我

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:59:47.523

没有用于检索数据的此类 API。如果您想提供此类信息，则必须直接从网站上抓取数据，然后自己保存。做类似事情的网站已经做了类似的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T06:44:29.330

您可以在 windows phone8 应用程序中这样做，只需将您的应用程序升级到 wp8 并使用此链接[Windows.ApplicationModel.Store 命名空间](http://msdn.microsoft.com/en-US/library/windowsphone/develop/windows.applicationmodel.store.aspx)访问市场中的应用程序信息。

希望这会帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-15T12:16:49.830

Install [Fiddler](http://fiddler2.com/), [configure it so the store can connect localhost (win8 config)](http://fiddler2.com/documentation/Configure-Fiddler/Tasks/ConfigureFiddlerForWin8). Now trace the Windows store web traffic and you will see the URLs that the Windows store is using like:

[https://services.apps.microsoft.com/4R/6.2.9200-1/615/nl-NL.nl.en-GB.en/m/NL/Apps/4bd603d9-21da-4282-a689-b2a4f384717e/Reviews/all/s/date/1/pn/2](https://services.apps.microsoft.com/4R/6.2.9200-1/615/nl-NL.nl.en-GB.en/m/NL/Apps/4bd603d9-21da-4282-a689-b2a4f384717e/Reviews/all/s/date/1/pn/2)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-25T07:27:46.440

您可以考虑使用第三方提供的免费 API，例如[http://www.appfeds.com/general/api/](http://www.appfeds.com/general/api/)

# dynamics-crm-2011 - CRM 2011 LayoutXml 使用未在相应 FetchXml 中定义的字段

> ID：15632567
> 
> 赞同：0
> 
> 时间：2013-03-26T08:37:05.657
> 
> 标签：dynamics-crm-2011

为什么我可以在 LayoutXml 中使用 FetchXml 中没有的字段？

我原以为要在 LayoutXml 中使用一个字段，它必须在 FetchXml 中，但这有效：

```
 <layoutxml>
          <grid name="resultset" object="112" jump="title" select="1" icon="1" preview="1">
            <row name="result" id="incidentid">
              <cell name="title" width="150" />
              <cell name="ticketnumber" width="150" />
              <cell name="prioritycode" width="150" />
              <cell name="createdon" width="150" />
              <cell name="plate_businessunit" width="100" />
              <cell name="ownerid" width="100" />
              <cell name="createdby" width="100" />
              <cell name="plate_acknowledgeby" width="100" />
              <cell name="followupby" width="100" />
              <cell name="a_4b5945b8a4a64613afc1ae1d5e6828c7.name" width="100" />
              <cell name="a_4b5945b8a4a64613afc1ae1d5e6828c7.plate_classification" width="150" />
            </row>
          </grid>
        </layoutxml>
        <querytype>0</querytype>
        <fetchxml>
          <fetch version="1.0" output-format="xml-platform" mapping="logical">
            <entity name="incident">
              <order attribute="title" descending="false" />
              <link-entity alias="a_4b5945b8a4a64613afc1ae1d5e6828c7" name="account" from="accountid" to="customerid" link-type="outer" visible="false">
                <attribute name="name" />
                <attribute name="plate_classification" />
              </link-entity>
            </entity>
          </fetch>
        </fetchxml>
        <LocalizedNames>
          <LocalizedName description="All Cases" languagecode="1033" />
        </LocalizedNames>
      </savedquery> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:02:48.283

可能是因为通过在布局中指定字段，XML CRM 会自动返回这些字段。

# javascript - SCRIPT1010：IE10 中的预期标识符

> ID：15632568
> 
> 赞同：11
> 
> 时间：2013-03-26T08:37:07.603
> 
> 标签：javascript, prototypejs, internet-explorer-10

在我的项目中，我使用的是 Prototype JavaScript Framework 1.7.1

当我在 Windows 7 上的 IE10 中加载网页时，我收到以下错误消息： SCRIPT1010：预期标识符第 1 行字符 9 指向`<!DOCTYPE html>`下面的测试 HTML 页面：

```
<!DOCTYPE html>
<html>
<head>
 <title>My webpage title</title>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
 <meta http-equiv="X-UA-Compatible" content="IE=edge" />
 <meta name="description" content="" />
 <meta name="keywords" content="" />
 <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js'></script>
</head>
<body>
    just testing
</body>
</html> 
```

HTTP 请求标头

```
GET /test.html HTTP/1.1[CRLF]
Host: www.mydomain.com[CRLF]
Connection: close[CRLF]
User-Agent: Web-sniffer/1.0.44 (+http://web-sniffer.net/)[CRLF]
Accept-Encoding: gzip[CRLF]
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8[CRLF]
Accept-Language: en-GB,en-US;q=0.8,en;q=0.6[CRLF]
Accept-Charset: ISO-8859-1,UTF-8;q=0.7,*;q=0.7[CRLF]
Cache-Control: no-cache[CRLF]
Referer: http://web-sniffer.net/[CRLF] 
```

HTTP 响应标头

```
Name    Value   Delim
Status: HTTP/1.1 200 OK
Server: webhost 
Date:   Tue, 26 Mar 2013 10:07:56 GMT   
Content-Type:   text/html   
Transfer-Encoding:  chunked 
Connection: close   
Vary:   Accept-Encoding,User-Agent  
Last-Modified:  Tue, 26 Mar 2013 10:07:29 GMT   
Cache-Control:  max-age=3600, public, must-revalidate, proxy-revalidate 
Expires:    Tue, 26 Mar 2013 11:07:56 GMT   
Pragma: public  
CF-RAY: 553096521a6047f 
Content-Encoding:   gzip 
```

有谁知道是什么导致了这个错误，或者这是 Prototype 1.7.1 中的一个错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T15:40:13.837

~~在 Github 上查看这个拉取请求[https://github.com/sstephenson/prototype/pull/93](https://github.com/sstephenson/prototype/pull/93)~~

PrototypeJS 每次加载时都会进行一些功能检测，并且 Internet Explorer 10 已经调整了一些 Javascript 语法的解析方式并引发了该错误。

PrototypeJS 正在检测如何将传递函数作为标记属性（如 onclick 方法）处理，而 IE10 javascript 解析器将其检测为语法错误。

如果您查看 Github 中的拉取请求，它将向您展示一个创可贴以及使 Internet Explorer 10 满意的完整修复程序。

请广而告之。

~~**2013-05-17 更新**引用的拉取请求已关闭，并且已将修复程序集成到 PrototypeJS github 的主分支中~~

[https://github.com/sstephenson/prototype](https://github.com/sstephenson/prototype)

~~请从那里克隆并更新您的脚本。~~

**2014-05-01 更新**此问题的修复已在 PrototypeJS 1.7.2 中发布

[http://prototypejs.org/2014/04/18/prototype-1-7-2/](http://prototypejs.org/2014/04/18/prototype-1-7-2/)

# .htaccess - 使用 htaccess 将使用 ID 的 URL 重写为 JPG 文件名

> ID：15632571
> 
> 赞同：1
> 
> 时间：2013-03-26T08:37:29.583
> 
> 标签：.htaccess, url, rewrite

我目前有这样的网址：

/video/245008/245008_00000001.jpg
/video/245008/245008_00000002.jpg
等

我需要 htaccess 将上述网址重写为：

/video/245008/245008_1.jpg
/video/245008/245008_2.jpg

但前提是原始 00000001.jpg 等不存在。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:25:50.123

尝试将这些规则添加到文档根目录（具有`video`目录的那个）的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} ^/video/([0-9]+)/\1_0+([1-9][0-9]*)\.jpg$
RewriteCond %{DOCUMENT_ROOT}/video/%1/%1_%2.jpg -f
RewriteRule ^ /video/%1/%1_%2.jpg [L] 
```

第一个条件检查当前请求是否指向一个不存在的文件。第二个条件检查请求是针对**视频**目录中的内容，2 组相同的数字，下划线后面至少有一个零，然后是更多的数字。第三个条件检查新 URI 是否指向一个***确实****存在的**文件***。**

# javascript - 工作椭圆边界半径的特征检测

> ID：15632576
> 
> 赞同：0
> 
> 时间：2013-03-26T08:37:43.410
> 
> 标签：javascript, css

我正在编写一个使用椭圆边框半径的小页面，它在浏览器之间的工作方式（当然）不一致，有时与其他东西（即旧的 Safari、旧的 Firefox 和可能的 Opera）交互很糟糕，这些东西在`using overflow:hidden`.

检测工作椭圆半径实现的最佳方法是什么？看起来 UA 嗅探是它实际工作的唯一方式，但我对此感到很肮脏，坦率地说，我不知道我应该考虑哪些版本可以工作。

我怀疑 Modernizr 应该可以做到这一点，但我还没有找到关于它的文档。

请注意，这与如何在*没有*[modernizr 的情况下使用边界半径的特征检测检查替换旧的浏览器检查](https://stackoverflow.com/questions/12336453/for-how-can-i-replace-my-old-browser-check-with-a-feature-detection-check-for-bo)不同的问题？，这些浏览器说他们支持边框半径，确实他们支持，但是他们以一种破碎的方式做到了 WRT 椭圆边框和/或剪裁。

# ember.js - 基于记录保存修改模板

> ID：15632579
> 
> 赞同：0
> 
> 时间：2013-03-26T08:37:52.220
> 
> 标签：ember.js

我有一个表单并在我的路由器中处理提交代码。我的模板有这个：

```
 {{#if isSaving}}
        Saving...
    {{else}}
    <form>
         inputs...
    </form>
    {{/if}} 
```

我在路由器中保存的代码是这样的（ctrl 是控制器）：

```
events: {
    saveCompany: function(record, ctrl){
        if (!record.get('isDirty')) return;
        ctrl.set('isSaving', true);
        record.one('didUpdate', this, function() {
            ctrl.set('isSaving', false);
        });
        record.get('transaction').commit();
    }, 
```

当用户单击提交时，“正在保存...”会在更新完成后正确显示和隐藏。但我已经在我的模型定义中处理了 didCreate、DidUpdate 等 - 通过显示一些弹出窗口，但我仍然希望能够防止用户在保存数据时摆弄我的表单，这就是我使用“record.one( ...）”。以比我这样做的方式更“通用”的方式这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:37:46.510

如果您的控制器是一个，`Ember.ObjectController`您已经可以透明地访问`content`. 如果这`content`是您正在观察的记录，您可以`isSaving`在控制器上进行观察，而无需任何额外的代码、绑定或您拥有的任何东西。

# servlets - HttpServletResponse：保留、保存或持久化响应以供以后使用...？

> ID：15632580
> 
> 赞同：0
> 
> 时间：2013-03-26T08:37:55.110
> 
> 标签：servlets, spring-mvc, openid

我正在使用 Spring 创建我的 webapp。我有这样的场景：

An向我`ExternalService`发送一个`GET`请求，该请求具有以一些用户信息作为参数`Controller`的映射。`/DoOperation`我得到参数检查用户是否登录到我的系统，如果不是，我将他发送到`OpenId`验证`returnUrl`，这在同一个 webapp 中说`/Authenticated`。

ExternalService 不提供`returnUrl`（与`OpenId`returnUrl 无关）并强制响应它在 处发出的相同请求`/DoOperation`。

现在，我怎么能保留非常`HttpServletResponse`（如果有办法，显然没有），以便我可以在我去其他地方后写一个响应，例如在`OpenID`页面上验证用户，然后`/Authenticate`在这种情况下......这样`ExternalService`可以阅读。

Servlet过滤器可以在这里提供帮助吗？

# macos - Qt 中 OSX 上非活动 Windows 的鼠标事件

> ID：15632589
> 
> 赞同：1
> 
> 时间：2013-03-26T08:38:15.510
> 
> 标签：macos, qt

我在 Qt 中编写了一个简单的程序，显示一个未装饰的窗口。即使此窗口未处于活动状态，我也希望窗口对鼠标事件（鼠标移动）做出反应。现在唯一的机会是单击窗口，使其处于活动状态。
我知道 OSX 上存在 NSTrackingArea 的概念。任何人都可以给我一个关于如何在 Qt 上实现它的提示吗？
我现在正在使用 Qt 4.8.3。

提前谢谢了。问候，-克里斯-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:02:12.823

从 QWindow 继承并覆盖

```
bool QWindow::event(QEvent * ev) 
```

# android - 如何在vitamio中拖动搜索栏时实现即时搜索

> ID：15632595
> 
> 赞同：1
> 
> 时间：2013-03-26T08:38:30.017
> 
> 标签：android, drag, seekbar

当我拖动搜索栏时，屏幕中显示的框架不会改变，直到我停止拖动。在 Android Library 的 VideoView 中，帧可以在拖动搜索栏时平滑变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:32:35.380

实现 SeekBar' onSeekBarChangeListener

例如

```
private OnSeekBarChangeListener mSeekListener = new OnSeekBarChangeListener() {
    public void onStartTrackingTouch(SeekBar bar) {
        mDragging = true;
        show(3600000);
        mHandler.removeMessages(SHOW_PROGRESS);
        if (mInstantSeeking)
            mAM.setStreamMute(AudioManager.STREAM_MUSIC, true);
        if (mInfoView != null) {
            mInfoView.setText("");
            mInfoView.setVisibility(View.VISIBLE);
        }
    }

    public void onProgressChanged(SeekBar bar, int progress, boolean fromuser) {
        if (!fromuser)
            return;

        long newposition = (mDuration * progress) / 1000;
        String time = StringUtils.generateTime(newposition);
        if (mInstantSeeking)
            mPlayer.seekTo(newposition);
        if (mInfoView != null)
            mInfoView.setText(time);
        if (mCurrentTime != null)
            mCurrentTime.setText(time);
    }

    public void onStopTrackingTouch(SeekBar bar) {
        if (!mInstantSeeking)
            mPlayer.seekTo((mDuration * bar.getProgress()) / 1000);
        if (mInfoView != null) {
            mInfoView.setText("");
            mInfoView.setVisibility(View.GONE);
        }
        show(sDefaultTimeout);
        mHandler.removeMessages(SHOW_PROGRESS);
        mAM.setStreamMute(AudioManager.STREAM_MUSIC, false);
        mDragging = false;
        mHandler.sendEmptyMessageDelayed(SHOW_PROGRESS, 1000);
    }
}; 
```

# ruby - SublimeText：如何在 Ruby 中将花括号切换到 do-end 块

> ID：15632596
> 
> 赞同：4
> 
> 时间：2013-03-26T08:38:43.333
> 
> 标签：ruby, sublimetext2, code-snippets

我经常使用代码片段在 SublimeText2 中编写我的代码。但是有一件事我无法实现：将花括号块切换到 do ... end 块。

假设我正在尝试构建一个多行每个块。所以我输入：

```
[1,2,3].ea<TAB> 
```

这将导致：

```
[1,2,3].each { |e|  } 
```

现在我需要一些魔法来将其切换为：

```
[1,2,3].each do |e| 
  # cursor
end 
```

我很确定在 TextMate 中有办法实现这一点，所以在 SublimeText 中也有办法。有任何想法吗？

**更新**：

我在 Textmate 中找到了功能描述：（[您应该使用的 TextMate 快捷方式](http://szeryf.wordpress.com/2010/02/15/textmate-shortcuts-you-should-be-using/)-> Toggle 'do ... end' / '{ ... }'）...这正是我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T10:04:31.883

经过一番研究，我发现了这个插件：[https ://github.com/irohiroki/RubyBlockConverter](https://github.com/irohiroki/RubyBlockConverter)

它完全符合我的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:49:49.893

为此创建新的代码段：

转到 Tools -> New Snippet 并插入如下内容：

```
<snippet>
    <content><![CDATA[each do |${1:e}| $0 
    end]]></content>
    <tabTrigger>ead</tabTrigger>
    <scope>source.ruby</scope>
    <description>each do |e| .. end</description>
</snippet> 
```

然后保存并与 ead[Tab] 一起使用

# php - PHP 中保持实例全局或在函数范围内的最佳实践

> ID：15632598
> 
> 赞同：0
> 
> 时间：2013-03-26T08:38:49.663
> 
> 标签：php, performance, global-variables, scope

我有一个 amfphp 使用的类，我在其中使用其他一些类来执行多项任务。我很好奇将这些类的实例保持在全局或函数范围内的最佳实践是什么。

例如

对于全局变量 $config。我在函数中这样使用它：

```
global $config; 
```

对于范围变量，我这样做。

```
$config = new Config(); 
```

现在，当我的程序运行时，它会处理特定任务并关闭所有内容（我假设），然后再次调用另一个不同的任务。

现在哪一个更好并且性能有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:46:07.860

由于 PHP 是基于请求的，因此在初始化对象时并没有太大的区别，因为无论如何都会在每个请求上重新创建它，但使用全局变量被认为是不好的做法，不应在新代码 IMO 中使用。

我建议像第二个示例一样创建一个配置类，但是如果您在代码中的多个位置都需要它，请不要每次都创建一个新实例，而是使用依赖注入或单例模式。

单身人士：

```
public class Config
{
    protected static $instance;
    public static Instance()
    {
        if(self::instance === null)
            self::instance = new Config(self::key);
        return self::instance;
    }

    private static $key = "213453452";
    public function __construct($key)
    {
        if($key !== self::key)
            throw new InvalidArgumentException("Private Constructor");
    }

    //your config
} 
```

依赖注入（简单示例）：

```
public class MyClass
{
    protected $config;

    public __construct($config)
    {
        $this->config = $config;
    }

    public function DoWork()
    {
        $subClass = new MySubClass($this->config);
        //To Stuff
    }
}

$config = new Config();
$myClass = new MyClass($config);
$myClass->DoWork(); 
```

# jquery - phonegap JQUERY.GET() 在黑莓应用程序上不起作用

> ID：15632605
> 
> 赞同：0
> 
> 时间：2013-03-26T08:39:19.137
> 
> 标签：jquery, cordova, blackberry

我正在开发 PhoneGap 以从远程站点获取 XML 数据。该代码适用于波纹模拟器，但不适用于黑莓应用程序

知道如何解决我的问题吗？

## 这是代码

```
jquery.get(RSS, {}, function(res, code) {
entries = [];
var xml = $(res);
var items = xml.find("artikel");
jquery.each(items, function(i, v) {
entry = { 

 title:$(v).find("title").text(),
 subtitle:$(v).find("subtitle").text()

    };
        entries.push(entry);
}); 
```

# ios - iOS：ipad 中的 Zxing QR 码阅读器无法横向工作

> ID：15632606
> 
> 赞同：1
> 
> 时间：2013-03-26T08:39:22.477
> 
> 标签：ios, ipad, qr-code, zxing, landscape

我正在开发一个**仅限横向**的iPad 应用程序，并尝试将[Zxing QR Code Scanner 库](https://code.google.com/p/zxing/)集成到项目中。我能够成功集成库，并且运行时没有任何编译器错误。

## 问题

1.  即使我的应用程序是横向的，Zxing 相机视图也显示为纵向。
2.  我无法使用库进行扫描。我不知道以不同方向显示的相机图层是否是它的原因。

## 我的项目设置

1.  仅限 iPad 横向应用程序
2.  目标 SDK：**iOS 6.1**
3.  部署目标：**iOS 6.0 或以上**
4.  zxing 版本：**2.1**
5.  测试：**iPad 2，iOS 6.1**

## 我的代码

好吧，代码很简单，我只是`ZxingWidgetController`从我的调用`HomeViewController`并实现了委托方法.. 代表永远不会被解雇。

### HomeViewController.h

```
@interface HomeViewController : UIViewController<ZXingDelegate>{
}
@end 
```

### 主视图控制器.m

```
-(void) openCameraScanner{
    ZXingWidgetController *ctrller       =   [[ZXingWidgetController alloc] 
                              initWithDelegate:self showCancel:YES OneDMode:NO];
    ctrller.delegate                     = self;
    [self presentViewController:ctrller animated:YES completion:nil];
}

- (void)zxingController:(ZXingWidgetController *)controller 
                             didScanResult:(NSString *)reslt{
    [self showDismissiveAlertWithMessage:[NSString 
                     stringWithFormat:@"qr code read is : %@ ", reslt]];
}

- (void)zxingControllerDidCancel:(ZXingWidgetController *)controller{
    [self showDismissiveAlertWithMessage:@"Failed to read qr code"];
} 
```

好吧，如果我的问题不够清楚，这是我的横向应用程序的缩小版本，带有一个看起来像 Zxing 的肖像。

![在此处输入图像描述](../Images/2604cee2021f96b11801deb2df4f53a1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:39:13.740

该小部件从未真正为旋转而设计，我不太确定它的作用。由于旋转，zxing 可能会从 AVFF 获得失真/严重裁剪的图像流。在处理 AVFF 时，处理所有不同的方向是相当容易出错的。

在 objc 目录中还有另一个用于 iOS/OS X 的 zxing 接口。它的级别要低得多（CALayer 级别）。这使得集成它更多的工作，但也使得处理旋转（更多）可行。它对旋转没有任何魔力：您仍然必须自己放置和转换图层，这从根本上来说有些棘手。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-04T04:12:22.613

当 viewDidAppear 时在 ZXingWidgetController.m 中试试这个

```
float iDegree = 90.0f;
  CATransform3D transform =  CATransform3DMakeRotation(iDegree, 0, 0, 1.0);
    self.prevLayer.transform =transform;
    self.prevLayer.frame = CGRectMake(0.0, 0.0, 1024, 768); 
```

# google-analytics - 谷歌标签管理器：验证表单后调用 dataLayer.push

> ID：15632607
> 
> 赞同：0
> 
> 时间：2013-03-26T08:39:32.137
> 
> 标签：google-analytics, google-tag-manager

如果表单验证成功，我想调用下面的代码（谷歌跟踪代码）。

onclick="dataLayer.push({'event': 'NewsletterSignup'});"

如果我将它添加到“onclick”事件中，它每次都会触发而不考虑验证。

请让我知道只有在验证表格后我应该如何称呼它。我在 Google Tag Manager 开发者指南中进行了搜索，但找不到任何关于此的帮助。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T23:47:40.440

我认为您所需要的只是更改您的 onclick 处理程序以包含验证。像这样的东西：

```
onclick="function() { if(validate_form()) dataLayer.push({'event':'NewsletterSignup'}); }" 
```

我不是 Javascript 程序员，所以我希望这是正确的语法。我所做的只是将验证检查引入到 onclick 中。如果检查通过，我们将事件推送到数据层（我假设`validate_form()`返回一个布尔值）。

您在提交表单后在新页面上触发跟踪代码的想法是另一种可能性。那可以工作。您可以在 GTM 中为该标记（跟踪代码）添加一条规则，使其在新页面上触发（假设新页面加载的*唯一*时间是在新闻通讯注册发生之后）。

我认为使用上面的 onclick 处理程序是最简单的解决方案。

# java - response.getOutputStream() 首次调用时抛出 IllegalStateException

> ID：15632611
> 
> 赞同：0
> 
> 时间：2013-03-26T08:39:49.600
> 
> 标签：java, jsp, download, response

我正在尝试从 MySQL-DB 下载 pdf（我将其作为 Blob 获取，到目前为止一切正常。但是当我尝试让 ServletOutputstream 将其发送给客户端时，程序崩溃了

。AFAIK之前调用该方法或getwriter方法时抛出异常。但是我根本没有在我的代码中使用getwriter方法，并且程序中的其他getOutPutStream方法没有达到（我将它们注释掉了确保）。
（如果出于任何原因这很重要，那么整个事情都发生在 JSP 中）这是

我的代码片段和异常：

**代码**

```
Blob pdf = null;
if(request.getParameter("reportId") != null){
    pdf = testszenario.getReportErgebnisPdf(Integer.parseInt(request.getParameter("reportId")), request.getParameter("erzeugung"));
}
byte[] buf = new byte[(int)pdf.length()];
InputStream inputStream  = pdf.getBinaryStream();
inputStream.read(buf);
inputStream.close();
response.setContentType("application/pdf");
response.setHeader("Content-disposition","attachment; filename=test.pdf"); 

ServletOutputStream sos = response.getOutputStream();
// response.getOutputStream().write(buf); 
```

**例外**

```
26.03.2013 09:28:29 org.apache.catalina.core.ApplicationDispatcher invoke
SCHWERWIEGEND: Servlet.service() for servlet jsp threw exception
java.lang.IllegalStateException
    at org.apache.jasper.runtime.ServletResponseWrapperInclude.getOutputStream(ServletResponseWrapperInclude.java:63)
    at org.apache.jsp.jsp.modules.Testszenario.PostReportResultOverview_jsp._jspService(PostReportResultOverview_jsp.java:115)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:630)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:535)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:472)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
    at org.apache.jsp.jsp.McFrame_jsp._jspService(McFrame_jsp.java:284)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:00:59.383

请检查您的回复是否已提交。如果您尝试对承诺的响应做某事，那么`IllegalStateException`可能会出现。如果超出页面缓冲区大小，将提交响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:49:48.220

您在 JSP 中执行此操作可能确实很重要。请记住，JSP 是 Web 应用程序请求的输出呈现阶段的一部分，因此容器可能已经获取了 writer 对象。尝试将您的代码移动到 servlet 中。它会让你更好地控制作者/流。

# php - 从 SQL 的结果中搜索 PHP 数组

> ID：15632619
> 
> 赞同：0
> 
> 时间：2013-03-26T08:40:18.977
> 
> 标签：php, sql, arrays

我目前在 php 中有一个存储产品名称的数组，通常是 5 - 10。我想创建一些东西，其中 SQL 查询的结果与数组匹配，以确保它们都正确，如果不显示错误.

到目前为止，我已将结果放入数组中，然后运行查询以获取结果。我相信我需要在查询结果中放置某种 while 循环并检查该 while 循环中的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:44:10.563

您可以在使用 while 循环从 db 接收结果并使用 in_array 函数[http://php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php) $availability = 0;检查结果的同时进行循环。

```
$cart_products = array("book", "album");
$available_products = array();

while($row = mysql_fetch_array($result)) {
    $available_products[] = $row['product'];
}

foreach($cart_products as $key => $value){  
    if (in_array($value, $available_products)){
       $availability = 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:51:07.513

您拥有包含产品名称 ($products) 和查询结果 ($row) 的数组。当您循环遍历结果时，您可以检查元素是否存在，否则会回显错误并中断循环：

```
While(...) {     
    if(!in_array($row['retrivedprod'],$products)) {
        echo 'error';
        break;
     }
} 
```

# visual-studio - Visual C# Express 中的 Visual Studio 命令提示符？

> ID：15632623
> 
> 赞同：3
> 
> 时间：2013-03-26T08:40:44.340
> 
> 标签：visual-studio, visual-c#-express-2010

我可以使用`Visual Studio Command Prompt`免费的 Visual C# Express 吗？

这里`Visual Studio Command Prompt`引用[了](https://github.com/blak3r/openop/blob/master/CSShellExtContextMenuHandler/ReadMe.txt#L108)：

> 以管理员身份在 Microsoft Visual Studio 2010\Visual Studio 工具菜单中运行“Visual Studio 命令提示符 (2010)”（或“Visual Studio x64 Win64 命令提示符 (2010)”，如果您使用的是 x64 操作系统）。

一个未引用的论坛[帖子](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvb/thread/9f4b8961-63eb-4062-bf3c-12f0126f0e80/)声称它在 Express 中不可用，并且位于`\Program Files\Microsoft Visual Studio 8\VC\vcvarsall.bat`. bat 文件名表明它可能只是打开带有一些环境变量的命令提示符或 PowerShell，所以即使没有昂贵的 Visual Studio 也可能很容易重现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:49:59.120

我认为您在谈论编译器，C# 编译器，在 Reddistributables 的几个版本中可用，

向初学者参考此链接，这将帮助您更好地理解，搜索 .net 框架的编译器/可再发行包，这将有所帮助

```
http://cscsharp.cs.uvic.ca/installCSharp.shtml 
```

这将解决您的问题。

# javascript - 单独使用Firefox的奇怪脚本错误

> ID：15632627
> 
> 赞同：0
> 
> 时间：2013-03-26T08:41:03.420
> 
> 标签：javascript, html, firefox, youtube-javascript-api

如果您在 chrome 中打开此[站点](http://www.olympusmons.com/radio/)，它会加载并运行正常，但我尝试在 firefox 19.0.2 中加载它，但我不断收到脚本错误，询问我是要继续还是停止。在进行了一些搜索后，我找到了 about:config 设置，但这没有帮助。我安装了萤火虫，我看到一个关于“权限被拒绝访问属性'toString'”的错误，但我不知道它想要什么或需要什么。奇怪的是，如果你去同一个网站的另一个页面，就像这个一样[，](http://www.olympusmons.com/reggae)它工作得很好。我对它可能是什么一无所知，所以非常感谢任何帮助。

不是[this](https://stackoverflow.com/questions/13100611/replace-url-from-youtube-to-embed-code-error-permission-denied-to-access-prop)的副本，因为它发生在一个页面上而不是另一个页面上，并且它们都运行相同的确切代码。只是一个加载的数据比另一个多一点。最重要的是我想知道它是否在一页上喜欢 Facebook 的数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:22:06.857

我在我的Firefox浏览器中打开它，它工作正常。所以可能是有一个插件导致了这个错误。尝试从 (firefox --> add-ons) 禁用已安装的附加组件并重新加载页面。如果它加载正常，那么您可以一一启用您的附加组件，以检查是哪个导致此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:39:32.747

当您尝试点击播放按钮时，您将在 Chrome 和 Firefox 的控制台中收到 JavaScript 错误“TypeError: player is undefined”。我试过了，两个控制台日志中都出现了同样的错误。这是页面本身的错误。

# r - 获取栅格地图中补丁的坐标（R中的栅格包）

> ID：15632630
> 
> 赞同：2
> 
> 时间：2013-03-26T08:41:25.237
> 
> 标签：r, coordinates, raster

我有一个带有许多补丁的栅格地图（具有相同值的连续单元格）。我需要做的是获取每个补丁的中心（或靠近中心）的坐标。我对光栅包非常缺乏经验，但似乎只有知道地图中单元格的位置才能获得坐标。有没有办法获得坐标来代替单元格的值？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:54:12.343

如果补丁是指团块，则 Raster 包允许您查找和隔离团块。以`clump()`光栅包为例，并对其进行扩展：

```
library(raster)
library(igraph)
detach("package:coin", unload=TRUE)
r <- raster(ncols=12, nrows=12)
set.seed(0)
r[] <- round(runif(ncell(r))*0.7 )
rc <- clump(r)
clump_id <- getValues(rc)    
xy <- xyFromCell(rc,1:ncell(rc))
df <- data.frame(xy, clump_id, is_clump = rc[] %in% freq(rc, useNA = 'no')[,1])
df[df$is_clump == T, ]

plot(r) 
```

![r](../Images/b8382cc6b231c3475114373f5c937d28.png)

```
plot(rc)
text(df[df$is_clump == T, 1:2], labels = df[df$is_clump == T, 3]) 
```

![rc](../Images/05834f46eebf57cc549acafa8648bef4.png)

可能没有你想象的那么有趣。

你用方向来做这一切= 4

```
rc <- clump(r, directions = 4)
clump_id <- getValues(rc)    
xy <- xyFromCell(rc,1:ncell(rc))
df <- data.frame(xy, clump_id, is_clump = rc[] %in% freq(rc, useNA = 'no')[,1])
df[df$is_clump == T, ] 
```

要得到

![rc4](../Images/be322632d4b2a21b4beb82c48742fa8f.png)

也许是丛生的“质心”

```
dfm <- ddply(df[df$is_clump == T, ], .(clump_id), summarise, xm = mean(x), ym = mean(y))
plot(rc)
text(dfm[, 2:3], labels = dfm$clump_id) 
```

![rc4mean](../Images/85d326b22737643e7b678a56bf84120c.png)

**备注**：

如果您尝试在`clump()`没有先分离**模型工具**库的情况下使用，则会出现错误。modeltools 由 coin 和其他统计库调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:55:08.447

您可以取每个补丁的坐标的平均值：

```
# some dummy data
m <- matrix(c(
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,4,4,0,
    0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,4,4,0,
    0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,4,4,0,
    0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,
    0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,
    0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,
    0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,
    0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,
    0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,
    0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,
    0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,
    0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,
    0,0,2,3,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,
    0,0,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0), nrow=20, byrow=T)

# create a raster
r <- raster(m)

# convert raster to points
p <- data.frame(rasterToPoints(r))

# filter out packground
p <- p[p$layer > 0,]

# for each patch calc mean coordinates
sapply(split(p[, c("x", "y")], p$layer), colMeans) 
```

# javascript - 击倒按钮单击时更改跨度可见状态

> ID：15632631
> 
> 赞同：1
> 
> 时间：2013-03-26T08:41:26.217
> 
> 标签：javascript, jquery, knockout.js

我想在用户按钮单击时显示错误消息（以防用户打开页面并直接单击按钮）。但是只有在用户编辑字段时可见状态才起作用如何触发方法来更改可见状态？

```
<body>
   <input type="text" data-bind="value: can" id="txtcan" />                        
                        <span ID="lblCANerror" data-bind="visible:(viewModel.can()=='')"  class="error">Mesasage 1</span>                    
                                            <input type="text" data-bind="value: login" id="txtusername" />
                        <span ID="lblUsernameError" data-bind="visible:(viewModel.login()=='')" class="error">Mesasage 2</span>

                        <input type="password" data-bind="value: password" name="txtpassword"  />
                        <span ID="lblPasswordError" data-bind="visible:(viewModel.password()=='')" class="error">Mesasage 3</span>

                        <button ID="lnkLogin" data-bind="click: ClickBtn"> Click</button>                

</body>

<script type='text/javascript'>
 var ViewModel = function () {
        this.can = ko.observable();
        this.login = ko.observable();
        this.password = ko.observable();
        this.isValidForm = ko.computed(function () {
            return ($.trim(this.can) != "") && ($.trim(this.login) != "") && ($.trim(this.password) != "");
        }, this);
    this.ClickBtn = function(data, e)
    {
      if (!this.isValidForm()) 
          { 

             e.stopImmediatePropagation();
          }; 
    };
    };

    var viewModel = new ViewModel();
    ko.applyBindings(viewModel);

</script>
  <style type='text/css'>
    .error
{ 
    color: #FF0000;     
}
  </style> 
```

我不想编写手动更改跨度可见状态的代码（*例如 if () 然后 span.show*）是否可以仅使用 knockoutjs FW ？我试过用 JQuery 订阅事件，但结果是一样的。

```
 $().ready(function () {
        $("#lnkLogin").click(function (event) {
            if (!viewModel.isValidForm()) {                
                event.preventDefault();
            };    
        })
    }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:53:29.343

删除不需要的用户定义的错误范围。

**选项 1（推荐）**

1.) 导入[ko 验证 js](https://raw.github.com/ericmbarnard/Knockout-Validation/master/Src/knockout.validation.js)。

2.) 扩展验证

```
this.can = ko.observable().extend({required:true}); 
```

3.) 设置初始显示验证错误消息 == false

4.) 设置值 == true 以显示错误

[检查此小提琴如何在单击按钮时显示验证错误消息](http://jsfiddle.net/naveenkumarm/VeBSf/)

**选项2**

1.）添加另一个可观察的

```
this.showError = ko.observable(false); 
```

2.)修改条件

```
 data-bind="visible:(can()=='' && showError())" 
```

3.)点击的变化

```
$().ready(function () {
    $("#lnkLogin").click(function (event) {

        //check contions here
        if(!true){
           viewModel.showError(true); // to show error msg
          }

        if (!viewModel.isValidForm()) {                
            event.preventDefault();
        };    
    })
}); 
```

# php - 创建两个几乎相同的数组

> ID：15632633
> 
> 赞同：2
> 
> 时间：2013-03-26T08:41:34.227
> 
> 标签：php, arrays

我想创建两个非常相似的数组。第二个数组只有一个项目，然后是第一个......

所以我想要实现的是：

```
$array_one = ('one', 'two', 'three');
$array_two = ('one', 'two', 'three', 'four'); 
```

有这样做的功能吗？我看过类似 , 的东西`array_push`，`array_shift`但我认为这些不是用来做这种行为的函数。

任何内置函数可以在数组的副本上“推送”一个项目？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T08:43:01.900

尝试：

```
$array_two = array_merge($array_one, array('four')); 
```

或者

```
$array_two   = $array_one;
$array_two[] = 'four'; 
```

或者

```
$array_two = $array_one;
array_push($array_two, 'four'); 
```

或者

```
$array_two = $array_one + array('four'); 
```

或者

```
$array_two  = $array_one;
$array_two += array('four'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T08:46:15.800

你可以试试

```
print_r($array_one + $array_two); 
```

这只会增加额外的价值。

# web-services - 在循环中将可变参数传递给侦听器方法

> ID：15632635
> 
> 赞同：0
> 
> 时间：2013-03-26T08:41:36.450
> 
> 标签：web-services, actionscript-3, air, event-listener

我想在循环调用服务时传递参数。问题是
1- 如果我在下面的代码中使用匿名函数；

```
for (var j:int = 0; j < listItems.length; j++) 
{
    _service.addEventListener(ResultEvent.RESULT, _anonymous = function(event:ResultEvent):void{
    thumbnailResultHandler(event,listItems[k].ObjectID)
    });
} 
```

然后，当开始运行**thumbnailResultHandler**时，推送 j 的最新值，以及 listItems 数组的最新值。因为他们正在异步工作。

2-如果我使用以下选项来传递参数；

```
_anonymous = onClick(listItems[j].ObjectID,j);
_service.addEventListener(ResultEvent.RESULT, _anonymous); 
```

在 for 循环中，这里是 onClick 函数

```
public function onClick(n:Number,k:Number):Function 
{       
    _service.removeEventListener(ResultEvent.RESULT,_anonymous);
    return function(event:ResultEvent):void 
    {
       trace( count++) ;//traces 25 times but must be just 5.
    }
} 
```

然后，当 thumbnailResultHandler 运行时，此方法访问我将值传递给 onClick 函数，然后工作 5x5 次而不是 5 次工作。

这必须在每个 resultHandler 中工作一次，但在每个结果中读取两个参数。

**假设 listItems.length = 5**

有什么建议可以解决这个问题吗？

# java - Hashmap 中带空格的 JSON - 来自 api

> ID：15632637
> 
> 赞同：0
> 
> 时间：2013-03-26T08:42:05.413
> 
> 标签：java, android, arrays

我从 API 中得到一个名称列表等。

如果 JSONArray 的对象中有空格，我的应用程序会崩溃并出现异常

这是来自 HashMap 的数组：

```
{id="a5b140c9-9987-4e6d-a883-a18c00726883", children=[{id=fe103303-fd5e-4cd6-81a0-a18c00733737, children=[], parentid=a5b140c9-9987-4e6d-a883-a18c00726883, name=Contains Spaces}], parentid=, name=Kiosk} 
```

然后我遍历它的孩子：

```
JSONArray child = new JSONArray(json.get("children").toString());                               
for ( int i=0; i<child.length();i++ ) {

} 
```

由于此处的空间，这部分给出了一个例外：

```
JSONArray child = new JSONArray(json.get("children").toString())
name=Contains Spaces 
```

d

```
03-26 10:31:56.409: W/System.err(4793): org.json.JSONException: End of input at character 0 of 
03-26 10:31:56.417: W/System.err(4793):     at org.json.JSONTokener.syntaxError(JSONTokener.java:450)
03-26 10:31:56.417: W/System.err(4793):     at org.json.JSONTokener.nextValue(JSONTokener.java:97)
03-26 10:31:56.417: W/System.err(4793):     at org.json.JSONObject.<init>(JSONObject.java:154)
03-26 10:31:56.417: W/System.err(4793):     at org.json.JSONObject.<init>(JSONObject.java:171)
03-26 10:31:56.417: W/System.err(4793):     at com.example.tvrplayer.ChannelsDialogPreference$1$1.run(ChannelsDialogPreference.java:158) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:53:10.613

消息中的第一段代码是 JSON 吗？我记得所有键和字符串值都必须包含在“”中。和 : 而不是 = 应该是这样的：

```
{"id":"a5b140c9-9987-4e6d-a883-a18c00726883", "children":[{"id":"fe103303-fd5e-4cd6-81a0-a18c00733737", "children":[], "parentid":"a5b140c9-9987-4e6d-a883-a18c00726883", "name":"Contains Spaces"}], "parentid":"", "name":"Kiosk"} 
```

请参阅：[JSON 语法](http://www.w3schools.com/json/json_syntax.asp)

如果是 javascript，您仍然应该使用 "" 编写字符串值（全部，而不仅仅是带有空格的那些）。

# c# - 在任何浏览器中都无法使用 maxlengthurl（太长）

> ID：15632638
> 
> 赞同：0
> 
> 时间：2013-03-26T08:42:07.020
> 
> 标签：c#, asp.net, web-services

我正在使用 vs2010 在 asp.net 4.0 中寻找新的 wcf rest web 服务。这是我传递网址的代码：

```
"homewizard/Service1.svc/monthlytips/country_state=US_IL_N/tip_code=NoInformation/feature=ACC,FAHD,WHG,FP,WA,DY,DWSH,GD,REF,STV,OVN,MW,CPTR,ATT,ROOF,RG,BSMT,FDN,SPX,GAR,EGF,PLB,DOOR,WIND,WS,LWN,DKG,PF,BBQ,WSD,OWF,DWY,OLIT,HL,SPTC,CF,WF,CPTS,DVB,FURW,FURL,FURU,MAT,BATH,KITC,CLST,LITE,SD,COD,FE,EMS,PC,SS,MED,EAUD,ENR,GARR,INR,MGR,TAXR,TELR,CGD,DOOR,WIND,WS/dwelling_type=1/tip_priority=1/month=3/tip_knowledge_level=1/tipbr_ensav=0/tipbr_safe=0/tipbr_avoid=1/tipbr_comfort=1/tipbr_value=1/tipbr_appear=1/tipbr_green=0/tipbr_money=0/tipbr_space=1/tipbr_allergy=2/tipbr_elderly=2/tipbr_children=2/tip_location_temp=0/tip_location_humidity=0" 
```

**输出：Bad Request - Invalid URL HTTP 错误 400。请求 URL 无效。**

我的网络配置是：httpRuntime maxUrlLength="1024"

但它在我的本地主机上工作，而不是在服务器 pc 上。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:01:45.607

老实说，您的问题是这不是一个完整的 URL，该 url 应该只是您正在处理的资源的位置，请求的主体应该包含请求的详细信息（例如 xml 或 json）。它既可以解决您的问题，又可以减少通过反序列化到请求对象服务器端来管理参数的代码，更不用说清除该 url。

***更新***

你确定那是一个GET而不是一个PUT，这个调用是什么意思？

如果它是一个 GET 我会做类似以下的事情......

**服务接口**

```
[WebGet(UriTemplate = "monthlytips")]
AppropriateReturnType MonthlyTips(MonthlyTip monthlytip); 
```

**DTO 对象**

```
public class MonthlyTip 
{
    public string CountryState { get; set; }
    public string TipCode { get; set; }
    public List<string> Feature { get; set; }
    public int DwellingType { get; set; }
    public int TipPriority { get; set; }
    ...
    ...
} 
```

那是我的想法，所以它可能需要一点改进，你需要实现接口，完成 DTO 等等，但这是你应该采取的方法。

# java - 如何使用 JDBC 将数据插入到 MS-Access 中具有 PK、FK 关系的两个表中

> ID：15632640
> 
> 赞同：0
> 
> 时间：2013-03-26T08:42:12.180
> 
> 标签：java, jdbc

我在 MS Access 中有两个表 Order1（OrderNO 是 Order1 中的 PK）和 order2（OrderNO 是 order2 中的 FK），我必须使用 JDBC 在这两个表中插入数据。所以请任何人告诉我溶胶。我试了一下，但数据只插入第一个表并给出错误 INSERT INTO 是错误的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T17:07:31.463

您可以使用 JDBC 2.0 的批量更新工具，以便以批量或单个单元的形式插入到多个表中。在这种情况下，您的应用程序将只访问底层数据库（在您的情况下为 MS 访问）一次，因此与一一插入相比，性能将会提高。

您可以自己添加下面给定的代码..
或者简单地了解如何实现。

```
Statement stmt = con.createStatement();
con.setAutoCommit(false);

stmt.addBatch("INSERT INTO Order1 VALUES (OrderNO , ..., ...)");
stmt.addBatch("INSERT INTO Order2 VALUES (OrderNO , ...)");

int [] updateCounts = stmt.executeBatch(); 
```

这里 AutoCommit() 设置为 false ，因此如果批处理中的任何一个命令无法执行或出现任何其他错误，它将让您的应用程序自由决定是否提交。

# c# - RestSharp / ASP.NET WebAPI - 使用带有 url 参数的 POST

> ID：15632644
> 
> 赞同：0
> 
> 时间：2013-03-26T08:42:29.523
> 
> 标签：c#, asp.net-web-api, restsharp

我有以下 ASP.NET WebAPI 绑定：

```
config.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new {id = RouteParameter.Optional}
    ); 
```

我的控制器看起来像这样：

```
public class ReferenceDataController : BaseController
{
    [RequireUserToken(ApprovedDeviceToken = true, ValidUserToken = true)]
    [HttpPost]
    public IEnumerable<SynchronizeItem<IReferenceDataItem>> Sync([FromBody]IEnumerable<SynchronizeItem<IReferenceDataItem>> clientSyncItems, [FromUri]int referenceDataType)
    {
        // my code
    } 
```

在客户端站点上，我使用以下代码发送请求：

```
var client = new RestClient (baseUrl);
var request = new RestRequest (resource, method);
request.XmlSerializer = new JsonSerializer ();
request.RequestFormat = DataFormat.Json;
request.AddHeader ("X-Abc-DeviceToken", deviceToken);

if (!string.IsNullOrWhiteSpace (userToken))
    request.AddHeader ("X-Abc-UserToken", userToken);

if (payload != null)
    request.AddBody (payload);

if (parameters != null) 
{
    foreach (var parameter in parameters)
    {
        request.AddUrlSegment(parameter.Key, parameter.Value);
    }
}

var response = client.Execute<T> (request); 
```

`http://myhost/api/referencedata/sync?referencedatatype=countries`我的期望是，向包含 IEnumerable 的主体发送 POST 请求。如果我删除客户端站点上的 UrlSegment 参数和 Web 服务站点上的第二个参数，它就会起作用。

如何将正文与有效负载和其他 URL 参数结合起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:53:31.110

您可以如下定义您的操作方法，

```
[RequireUserToken(ApprovedDeviceToken = true, ValidUserToken = true)]
[HttpPost]
public IEnumerable<SynchronizeItem<IReferenceDataItem>> Sync(IEnumerable<SynchronizeItem<IReferenceDataItem>> clientSyncItems, int referenceDataType)
{
    // my code
} 
```

没有 BodyAttribute 或 FromUriAttribute。这样，Web API 将尝试使用 MediaTypeFormatter 将正文反序列化为 clientSyncItems 集合和查询字符串中的任何其他值类型（查询字符串中的 referenceDataType）。您定义的路由将采用“同步”作为 Id（这将被忽略，因为它不是您操作中的参数）。

您还必须指定内容类型标头，以便 Web API 可以选择正确的格式化程序（例如 json 或 xml）。

# apache2 - Apache2：429，请求响应过多

> ID：15632645
> 
> 赞同：4
> 
> 时间：2013-03-26T08:42:31.013
> 
> 标签：apache2, http-status-code-429

当我开始密集使用我的 API 时，我的 Apache 返回 429 错误代码。De API 调用由 SAP BusinessObject 生成并发送到我的“反向代理”以将 HTTP 转换为 HTTPS。反向代理通过 HTTPS 将 HTTP 请求转发到网络服务器。

15 个请求后，反向代理在 Apaches error.log 中返回 429 错误。这 15 个请求在 9 分钟内完成。

如何配置 Apache 以便它处理这种负载/流量？因为在前 15 个之后我还有 300 个请求......

**反向代理配置：**

```
NameVirtualHost *:80
ProxyRequests Off

<VirtualHost *:80>
        ServerName domain.com
        ServerAlias domain.com

        SSLProxyEngine On
        SSLProxyVerify none
        SSLProxyProtocol SSLv3
        ProxyPass / https://domain.com/
        ProxyPassReverse / https://domain.com/

        <Directory proxy:*>
                Order Deny,Allow
                Allow from all
        </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:24:49.103

de webservers webserver 中的更新是问题所在。供应商更换了他们的 webserer，并在软件中设置了每分钟 5 个请求的限制......

发布中没有提到这一点。

谢谢你的时间，很抱歉打扰你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:53:07.653

我不是 Apache 专家。但是，我会尝试以下方法（在 apache 配置中）：

```
# wait up to 300 seconds for slow clients
TimeOut 300
# allow connections to be reused between requests
KeepAlive On
# allow a maximum of 100 requests per connection
MaxKeepAliveRequests 100
# wait up to 15 seconds for the next
# request on an open connection 
KeepAliveTimeout 15 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-07T12:56:10.730

我认为如果您启用了 mpm 模块，您可以增加 maxThread。

您可以在此处查看安装和设置文档：

[https://www.techrepublic.com/article/how-to-enable-apache-mpm-prefork-to-improve-performance/](https://www.techrepublic.com/article/how-to-enable-apache-mpm-prefork-to-improve-performance/)

# c# - 马歇尔结构阵列

> ID：15632646
> 
> 赞同：14
> 
> 时间：2013-03-26T08:42:36.497
> 
> 标签：c#, .net, structure, marshalling

我花了很多时间寻找解决方案，但仍然没有找到。

我有 2 节课：

```
[StructLayout(LayoutKind.Sequential)]
public class Result
{
    public int Number;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 4)]
    public string Name;
    public int Size;
}

[StructLayout(LayoutKind.Sequential)]
public class CoverObject
{
    public int NumOfResults;
    [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.Struct, SizeConst = 4)]
    public Result[] Results;
} 
```

我期望该命令`Marshal.SizeOf(typeof(CoverObject))`将返回 52，但不是，它只是 20。因此，我以后使用的所有 marshall 和 unmarshall 都不起作用。

看起来它只计算 Result 类中的第一个成员（数字）。我做错什么了吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-26T08:53:15.397

将您的类更改为结构

```
[StructLayout(LayoutKind.Sequential)]
public struct Result
{
    public int Number;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 4)]
    public string Name;
    public int Size;
}

[StructLayout(LayoutKind.Sequential)]
public struct CoverObject
{
    public int NumOfResults;
    [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.Struct, SizeConst = 4)]
    public Result[] Results;
} 
```

别的地方：

```
Marshal.SizeOf(typeof(CoverObject)) // it will return 52 
```

# python - range() 函数中不使用长类型

> ID：15632648
> 
> 赞同：0
> 
> 时间：2013-03-26T08:42:42.190
> 
> 标签：python, loops, long-integer

我知道在python中我们没有定义数据类型，但是我有一个长类型的特定数字，我有一个使用该值作为范围函数的最终参数的循环，当我编译并实现它时，它显示了一个类似于此的错误“long不用于迭代，请帮助我。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-26T08:44:01.603

代替 range() 函数，请使用 xrange() 函数

# mysql - 将不存在转换为使用连接的另一个查询

> ID：15632649
> 
> 赞同：0
> 
> 时间：2013-03-26T08:42:50.480
> 
> 标签：mysql

这是使用不存在的查询。任何人都可以使用联接重写此查询吗？

```
SELECT name,
       trans
FROM skyplan_deploy.deploy_stars d
WHERE apt='KOPF'
  AND name!=trans
  AND NOT EXISTS
    (SELECT DISTINCT c.star_ident,
                     c.fix_ident
     FROM corept.std_star_leg c
     INNER JOIN
       (SELECT star_ident,
               transition_ident,
               max(sequence_num) seq,
               route_type
        FROM corept.std_star_leg
        WHERE data_supplier='J'
          AND airport_ident='KOPF'
        GROUP BY star_ident,
                 transition_ident)b ON c.sequence_num=b.seq
     AND c.star_ident=b.star_ident
     AND c.transition_ident=b.transition_ident
     WHERE c.data_supplier='J'
       AND c.airport_ident='KOPF'
       AND d.name=c.star_ident
       AND d.trans=c.fix_ident); 
```

谢谢

让 corept.std_star_leg 表是这个。

```
star_ident transition_ident sequence_num fix_ident airport
A               XX               10         QWE     KOPF  
A               XX               20         WER     KOPF  
A               XX               30         HYU     KOPF  
A               XX               40         GJI     KOPF   
B               YY               10         SJI     KOPF  
B               YY               20         DJI     KOPF  
B               YY               30         FJI     KOPF  
B               YY               40         GHI     KOPF  
B               YY               50         KDI     KOPF 
```

执行内部连接后，将获得如下结果。

```
A               XX               40         GJI  
B               YY               50         KDI 
```

因此检索最大 sequence_num 行。之后 skyplan_deploy.deploy_stars 表将如下所示。

```
apt            name              trans  
KOPF            A                 GJI  
KOPF            A                 FJI  
KOPF            A                 DHI  
KOPF            B                 KDI  
KOPF            B                 VNM 
```

我需要输出

```
A  FJI  
A  DHI  
B  VNM 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:17:03.213

尝试这个：

```
SELECT NAME, trans
FROM skyplan_deploy.deploy_stars d
Left Join
(
        SELECT DISTINCT c.star_ident, c.fix_ident
        FROM corept.std_star_leg c
        INNER JOIN (
            SELECT star_ident, transition_ident, max(sequence_num) seq, route_type
            FROM corept.std_star_leg
            WHERE data_supplier = 'J' AND airport_ident = 'KOPF'
            GROUP BY star_ident, transition_ident
            ) b
            ON c.sequence_num = b.seq AND c.star_ident = b.star_ident AND c.transition_ident = b.transition_ident
        WHERE c.data_supplier = 'J' AND c.airport_ident = 'KOPF' 
)tbl
On d.NAME = tbl.star_ident AND d.trans = tbl.fix_ident
Where tbl.star_ident Is Null 
```

# jquery - 用于 CSS calc 的 jQuery 后备函数

> ID：15632651
> 
> 赞同：3
> 
> 时间：2013-03-26T08:42:59.737
> 
> 标签：jquery, css, function

我正在尝试在 jQuery 中编写一个函数，该函数旨在支持不支持 CSS calc 属性的浏览器。

到目前为止，我有以下内容：

```
function calc($element, $xy, $logic, $difference) {
    var calc = $($object).$xy() $logic $difference;
    return calc;
}

if ($.browser.msie && $.browser.version <= 8) {
    var height = calc("body", "height", "-", "80");
    $("div#page").css("height", height);
} 
```

这一次我可以在没有功能的情况下逃脱，但为了将来参考，我认为拥有这个功能会非常有用。

显然这一行：

```
var calc = $($object).$xy() $logic $difference; 
```

...将会失败，但我不知道如何正确地将变量传递给它。

如果有人对语法有任何建议，或者我应该如何写这一行，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T09:00:57.780

你可以这样做：

```
function calc( selector, method, adjust ) {
    return $(selector)[method]() + adjust;
}

if( $.browser.msie  &&  $.browser.version <= 8 ) {
    var height = calc( 'body', 'height', -80 );
    $('div#page').css( 'height', height );
} 
```

关于该代码的一些注释：

*   您不需要`$`函数参数的前缀。如果您正在编写 jQuery 代码，我建议`$`仅在引用 jQuery 对象的变量上使用前缀，例如

    ```
    var $foo = $('#foo');  // cache jQuery object for later use 
    ```

*   请注意与 - 一起使用的方括号，`[method]`这就是您可以调用名称存储在变量中的方法的方式。

*   我将数学运算和值组合成一个`adjust`参数。您可以做一些更奇特的事情，但最好能看到更多关于如何首先使用此代码的示例。

还有一个建议：如果您必须编写 JavaScript 来在不支持 CSS calc 的浏览器上进行大小调整，为什么不在*所有*浏览器中使用 JavaScript 代码？然后你只有一个代码/样式设置来调试而不是两个。

# sum - Kendo UI：页脚模板中的总和

> ID：15632653
> 
> 赞同：0
> 
> 时间：2013-03-26T08:43:01.947
> 
> 标签：sum, kendo-ui, footer, kendo-grid

我正在尝试让我的 footerTemplate 与 Kendo UI 网格一起使用。我想在表格的页脚中获得“hours_worked”的总和。我尝试了 Kendo UI 示例中的几个选项，但它对我不起作用。我做错了什么？

```
$(document).ready(function() {
  $("#grid").kendoGrid({
    dataSource: {
      transport: 
        read: {
          url: "mods/hours/data/get_hours.php?id=<?php echo $volunteer_id; ?>",
          dataType: "json"
        }
      },
      schema: {
        model: {
          fields: {
            hours_id: { type: "number" },
            volunteer_first_name: { type: "string" },
            volunteer_last_name: { type: "string" },
            hours_date: { type: "date" },
            location_name: { type: "string" },
            work_type_name: { type: "string" },
            volunteer_id: { type: "number" },
            hours_worked: { type: "number" }
          }
        }
      },
      aggregate:[{ field:"hours_worked", aggregate:"sum" }],
      pageSize: 10
    },
    height: 350,
    filterable: true,
    sortable: true,
    pageable: true,
    selectable:true,
    columns: [
      {
        title:"Naam",
        template:"#=volunteer_last_name#, #=volunteer_first_name#",
      },{
        title:"Locatie",
        field:"location_name",
      },{
        title:"Werkzaamheden",
        field:"work_type_name",
      },{
        title:"Uren",
        field:"hours_worked",
        footerTemplate:"Sum: #=sum#",
      },{
        title:"Datum",
        field:"hours_date",
      },{
        width:"200px",
        title:"Opties",
        filterable: false,
        template:"<a href='?p=edit_reported_hours&id=#=volunteer_id#&hours_id=#=hours_id#' class='k-button'>Bewerken</a> <a href='?p=manage_reported_hours&o=delete&id=#=volunteer_id#&hours_id=#=hours_id#' class='k-button'>Delete</a>"
      },
    ]
  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:54:35.610

之后添加一个大括号`transport`，它将起作用。

```
transport: {
    read: {
       url: "mods/hours/data/get_hours.php?id=<?php echo $volunteer_id; ?>",
       dataType: "json"
    }
}, 
```

在这里看到它：http: [//jsfiddle.net/OnaBai/bWS7C/](http://jsfiddle.net/OnaBai/bWS7C/)

# java - 选择数据表行时打开新页面（导航到新站点）

> ID：15632655
> 
> 赞同：5
> 
> 时间：2013-03-26T08:43:04.920
> 
> 标签：java, jsf, primefaces

关于 SO 和[其他地方](http://forum.primefaces.org/viewtopic.php?f=3&t=16284)的这个主题有几个相关的问题，但我找不到关于这个特定问题的明确答案。

我有一个`p:dataTable`并且我希望能够单击一行并打开一个详细信息页面（一个新页面，而不是对话框或窗口）。

我已经通过这种方式解决了它（我从 primefaces 网站获得，由于某种原因它不再存在： http://web.archive.org/web/20101001223235/http: [//www.primefaces.org/showcase/ ui/datatableRowSelectionInstant.jsf](http://web.archive.org/web/20101001223235/http://www.primefaces.org/showcase/ui/datatableRowSelectionInstant.jsf)）：

```
<p:dataTable var="order" value="#{orderBean.orders}" selection="#{orderBean.selectedOrder}" selectionMode="single" rowKey="#{order.number}">
  <p:ajax event="rowSelect" listener="#{orderBean.orderSelect}"/>
  <p:column ... />
</p:dataTable> 
```

然后在 bean 中执行导航：

```
public void orderSelect(SelectEvent event) {  
  ConfigurableNavigationHandler nh = (ConfigurableNavigationHandler)FacesContext.getCurrentInstance().getApplication().getNavigationHandler();
  nh.performNavigation("orderDetail?faces-redirect=true");
} 
```

我的问题：有没有一种方法可以在 JSF 内部实现这一点而无需支持 bean 的帮助？

我也在问，因为他们从 primefaces 网站上删除了代码示例，这可能表明这不是做类似事情的正确方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T12:07:56.057

将感兴趣的单元格包裹在一个简单的`<h:link>`.

```
<p:column>
    <h:link outcome="orderDetail">
        ...
    </h:link>
</p:column> 
```

如有必要`display:block`，在链接上使用 CSS 以使其跨越整个单元格。如有必要，您可以使用嵌套的`<f:param>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:08:03.887

由于它是一个 ajax 请求，通常请求/响应用于重新渲染网页中的某些组件。你能做的是

```
<p:ajax event="someventofintrest" onsuccess="javascript:myjsmethod();"></p:ajax>

and

<p:remotecommand name="myjsmethod" action="#{mybean.mybeanmethod}" />

and in the backing bean

public String mybeanmethod(){
  return "mynewpage";  // Navigate away to mynewpage.xhtml
} 
```

HTH。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:50:57.777

由于我没有找到一个真正完美的解决方案，所以我现在就是这样做的。

我现在有一个像这样的“导航器”类

```
@Component
public class Navigator {
  public void nav(String page) {
    UIHelper.navigateTo(page);
  }
} 
```

我从我的 ajax 事件中调用这个类：

```
<p:ajax event="rowSelect" listener="#{navigator.nav('orderDetail')}"/> 
```

正如我所说，并不是很完美，但我喜欢不必在我的支持 bean 中编写代码的事实。（当然我必须为 Navigator 编写代码，但我可以重复使用。）

# python - 使用选定的浏览器启动 IPython 笔记本

> ID：15632663
> 
> 赞同：54
> 
> 时间：2013-03-26T08:43:25.480
> 
> 标签：python, windows, subprocess, ipython

我正在尝试使用非默认浏览器（在我的情况下为 Firefox）启动 IPython，并认为我可以复制[此博客中给出的脚本](http://www.libertypages.com/clarktech/?p=3357)

**我在 Windows 7 上**

我把下面的代码放在一个文件中说“module.py”

```
import subprocess
subprocess.call("ipython notebook --no-browser", shell=True)
subprocess.call([r'C:\Program Files (x86)\Mozilla Firefox\Firefox.exe', '-new-tab', 'http://127.0.0.1:8888/']) 
```

但是，当我从命令行运行它时

```
 python C:\Users\mugabal\Desktop\module1.py 
```

它执行第一行但不执行第二行（两行单独工作正常）

我的问题（更笼统地说）如何启动一个进程并告诉它不要劫持控制台窗口？

如果我监督了一个明显的解释，我提前道歉，但我查看了子流程文档和这个平台

**- - - 更新 - - -**

我应该补充一点，我尝试使用选定的浏览器启动 IPython，但无法弄清楚如何让它工作

```
>ipython notebook --browser='C:\Program Files (x86)\Mozilla Firefox\Firefox.exe'
... 
[NotebookApp] The IPython Notebook is running at: http://127.0.0.1:8888/
...
**[NotebookApp] No web browser found: could not locate runnable browser.** 
```

准确地说，Windows 命令提示符窗口中的以下命令按预期工作：

```
start firefox 
```

但

```
ipython notebook --browser=firefox 
```

不起作用（与上述相同的错误）。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-01T17:54:31.510

我在 Windows 上遇到了同样的问题，并以这种方式工作：

*   使用命令创建配置文件 `ipython profile create default`

*   编辑 ipython_notebook_config.py 文件，搜索行

`#c.NotebookApp.browser =''`

并将其替换为

```
import webbrowser
webbrowser.register('firefox', None, webbrowser.GenericBrowser('C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe'))
c.NotebookApp.browser = 'firefox' 
```

然后它对我有用。

希望它会帮助你。

JPG

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-10-04T19:20:47.397

在我的 Mac 上，我得到以下命令来使用 Firefox 而不是我的默认 Chrome：

```
jupyter notebook --browser firefox 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-06-04T17:30:22.227

这不是一个真正的答案。我只是想与不太懂电脑的人分享 JPG 的答案一步一步的样子。据推测，在 Windows 资源管理器（下面附上屏幕截图）上，该文件`jupyter_notebook_config.py`被列出：

[![在此处输入图像描述](../Images/b8b63c190dabdbf761170bf46271f043.png)](https://i.stack.imgur.com/krgFl.png)

就我而言，文件的目录（在资源管理器的顶部菜单上）是`C:\Users\My_name\.jupyter`

答案的第二部分可以通过简单的粘贴来实现：

```
import webbrowser
webbrowser.register('firefox', None, webbrowser.GenericBrowser('C:\\Program Files (x86)\\Mozilla Firefox\\firefox.exe'))
c.NotebookApp.browser = 'firefox' 
```

在下面屏幕截图中看到的空间上的空间中，对应`jupyter_notebook_config.py`于 PyCharm 中打开的：

[![在此处输入图像描述](../Images/db5cabf2dae8a76e2a58de360d7ade8d.png)](https://i.stack.imgur.com/aZOs1.png)

...只是我将其设置为在 Opera 中打开：

```
import webbrowser
webbrowser.register('opera', None, webbrowser.GenericBrowser('C:\\Program Files (x86)\\Opera\\launcher.exe'))
c.NotebookApp.browser = 'opera' 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-26T09:32:26.013

为什么不使用

```
--browser=<Unicode> (NotebookApp.browser)
    Specify what command to use to invoke a web browser when opening the
    notebook. If not specified, the default browser will be determined by the
   `webbrowser` standard library module, which allows setting of the BROWSER 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-30T10:25:46.583

I uncomment this line and change into False, not to make ipython notebook open a web browser at start, so we can point the ipython notebook address in an active web browser.

```
# Whether to open in a browser after starting. The specific browser used is
# platform dependent and determined by the python standard library `webbrowser`
# module, unless it is overridden using the --browser (NotebookApp.browser)
# configuration option.
c.NotebookApp.open_browser = False 
```

Better still, I pin the address in my Firefox to make it active everytime I open the browser.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-19T22:24:05.130

我将环境变量 BROWSER 设置为浏览器的可执行文件（在我的情况下为 Google Chrome），并且 Ipython Notebook 在我喜欢的浏览器中启动。

```
PS H:\> $env:BROWSER = "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe"
PS H:\> $env:BROWSER
C:\Program Files (x86)\Google\Chrome\Application\chrome.exe
PS H:\>
PS H:\> ipython notebook
2015-02-19 14:05:01.690 [NotebookApp] Using existing profile dir: C:\\Users\\abc\\.ipython\\profile_default'
2015-02-19 14:05:01.832 [NotebookApp] Using MathJax from CDN: http://cdn.mathjax.org/mathjax/latest/MathJax.js
2015-02-19 14:05:01.901 [NotebookApp] The port 8888 is already in use, trying another random port.
2015-02-19 14:05:01.908 [NotebookApp] Serving notebooks from local directory: H:\
2015-02-19 14:05:01.908 [NotebookApp] 0 active kernels
2015-02-19 14:05:01.910 [NotebookApp] The IPython Notebook is running at: http://localhost:8889/
2015-02-19 14:05:01.910 [NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation). 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-22T13:06:43.380

当您在命令提示符下执行以下代码时，它会提供结果链接，您可以在任何浏览器中复制该链接以打开 Jupiter notebook。

```
jupyter notebook --browser firefox 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-07-05T16:04:39.143

要使其正常工作，`brave`您`chrome`需要附加一个`%s`表示 URL 的参数。在 Linux 终端上测试了以下内容，效果很好：

```
jupyter notebook --browser="google-chrome %s"
jupyter notebook --browser="brave-browser %s" 
```

火狐不需要`%s`

```
jupyter notebook --browser=firefox 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-03T00:19:11.557

我尝试了 JPG 和 norfeldt 的建议。它在我的 Windows 7 计算机上完美运行。这是 ipython_notebook_config.py 修改部分的副本（位于 C:\Users\'your username'\.ipython 下，以使用 Safari 作为笔记本的默认浏览器。正如 norfeldt 所说，请注意 'C:\ 之前的 u ...)

```
# c.NotebookApp.certfile = u''

import webbrowser
webbrowser.register('safari', None, webbrowser.GenericBrowser(u'C:\\Program Files (x86)\\Safari\\safari.exe'))
c.NotebookApp.browser = 'safari' 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-09-09T14:10:37.620

无需编码，您可以将默认浏览器设置为 Chrome 或 Firefox 等。它适用于我的 windows 系统。

# asp.net - 将 Byte() 绑定到 Gridview

> ID：15632665
> 
> 赞同：0
> 
> 时间：2013-03-26T08:43:33.543
> 
> 标签：asp.net, gridview

我有一个集合，其中包含由 Id 作为 Integer、Name 作为 String 和 IconImage 作为 Byte() 的项目。

我想在网格视图中显示名称和图像，但不确定如何将 IconImage 绑定到网格视图？

```
<itemtemplate>
    <asp:label id="LabelName" runat="server" text='<%# Eval("Name")%>'></asp:label>
</itemtemplate>

<!-- Bind and Display the image here--> 
```

请帮我一些示例代码..
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:45:55.607

你可以使用这个功能

```
 public Image byteArrayToImage(byte[] byteArrayIn)
 {
    MemoryStream ms = new MemoryStream(byteArrayIn);
    Image returnImage = Image.FromStream(ms);
    return returnImage;
 } 
```

将字节数组转换为图像。

如果你有`byte array`，`Eval("CategoryImage")`那么你也可以调用这个函数`Eval`。
作为

```
<%# byteArrayToImage(Eval("CategoryImage"))%> 
```

未经测试，但它应该可以工作。

## 编辑 1

这是一个很好的链接
[argumentException was unhandled error when](https://stackoverflow.com/questions/7106179/argumentexception-was-unhandled-error-when-converting-byte-of-array-to-image)
[convert byte of array to image 如何将字节数组转换为图像并在数据网格中显示？](https://stackoverflow.com/questions/5186354/how-to-convert-byte-array-to-image-and-display-in-datagrid)

# javascript - 'jQuery.each(lines, function(lineNo, line)' 是做什么的？

> ID：15632669
> 
> 赞同：0
> 
> 时间：2013-03-26T08:43:50.077
> 
> 标签：javascript, jquery, ajax

我是 jquery 和 ajax 的初学者。当我在网上浏览一些示例时，我遇到了以下代码，并想知道它到底做了什么。

```
 lines = newLine.split('#');

 jQuery.each(lines, function(lineNo, line) {                    
                        eval("linedata = " + line);             
                        data.push(linedata);

                    }); 
```

我不是程序员，只是想了解它的功能。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:45:29.273

each 函数迭代作为第一个参数提供的数组。在每次迭代期间，索引和元素被传递到执行的函数中。该函数作为第二个参数传递给该`each`函数。

阅读更多关于[jQuery 文档](http://api.jquery.com/jQuery.each/)

在示例中，您提供了一个字符串，该字符串`newLine`使用分隔符拆分为一个数组`#`。

然后该`each`函数遍历新创建的数组，将每个元素的值分配给变量 linedata 并将 linedata 推送到另一个数组。

这可以通过以下方式更容易地实现，因为不需要调用 eval ：

```
 jQuery.each(lines, function(lineNo, line) {                                
     data.push(line);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:50:00.343

有那么一会儿，我假装自己是个新程序员。这就是你应该如何从这里开始调查事情的方式：

1.) 好的，我不知道第一行在做什么。它正在分裂一些东西（基于这个`split`词）。嗯，让我们用 Google 搜索“拆分 javascript”。[这是出现的第一件事。](http://www.w3schools.com/jsref/jsref_split.asp)从这里开始，您可能想知道 String 是什么，因此您也会搜索它）。

`newLine`2.) 好的，现在我知道拆分字符串会给我一个由字符分隔的子字符串的数组（您可能再次通过此步骤查找过）`#`。凉爽的。所以让我们看看是什么`jQuery.each`。我用谷歌搜索“jQuery.each”，[这是出现的第一件事](http://api.jquery.com/jQuery.each/)。

惊人的！现在您了解 a`String`是什么、an `Array`、`split`函数来自`String`以及什么`jQuery.each`是。:D

编辑：随着您的前进，您会意识到 W3C 通常是一个劣质的信息来源。我只是简单地链接到它，因为它实际上是我在谷歌上搜索“split javascript”时出现的第一件事。总体而言，它可以在您第一次学习某些内容时为您提供一个很好的概览。

# html - HTML 中使用不同“rel”属性的标记示例？

> ID：15632675
> 
> 赞同：2
> 
> 时间：2013-03-26T08:44:06.197
> 
> 标签：html, xhtml

有人可以提供`<link>`具有不同“rel”属性值的 HTML 标记的有意义的示例吗？

除了“rel”属性的可能值解释之外，不同值（样式表值除外）是否有任何实际用途？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:51:42.327

要获得许多有用的示例，我建议您查看此处：[http](http://www.w3.org/TR/html4/struct/links.html) ://www.w3.org/TR/html4/struct/links.html 。

这看起来是一个非常简洁、更易于浏览的 w3 版本：http: [//www.whatwg.org/specs/web-apps/current-work/multipage/links.html#rel-alternate](http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#rel-alternate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:10:54.200

`link`除了`rel=stylesheet`. _ 有各种`rel`可能使用的值列表，以及浏览器或搜索引擎如何使用它们的定义和想法*，*但几乎没有这种使用的实际证据。但在某些情况下具有实际影响的一些元素是：

`<link rel=icon ...>`定义页面的快捷方式图标；被浏览器和用户广泛认可的作者

`<link rel=alternate ...>`在[Google 说明](http://support.google.com/webmasters/bin/answer.py?answer=189077)中有所描述，因此 Google 可能会对其进行处理

`<link rel=canonical ...>`在[其他 Google 说明中建议](http://support.google.com/webmasters/bin/answer.py?answer=189077)

`<link rel=prefetch ...>`在某些浏览器中导致被引用的页面被预加载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T14:59:45.413

例子：

```
 <link rel="stylesheet" href="style.css">

<link rel="icon" href="image.png">

<link itemprop="URL" href="http://...">

<link rel="next" href="page3.php">

<link rel="author license" href="author_license.php">

<link rel="icon" href="favicon.png"> 
```

更多示例：[链接元素上的链接元素](https://web.archive.org/web/20140125084249/http://w3-video.com/Web_Technologies/HTML5/html5_link_tag.php)和[rel 属性](https://web.archive.org/web/20140311153752/http://w3-video.com/Web_Technologies/HTML5/html5_attributes/link/html5_link_rel_attribute.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:55:02.023

我只知道 'icon' 值，您可以设置出现在浏览器选项卡上的 HTML 页面的 pavicon，使用：

```
<link rel="icon" type="icon" href="path/to/youricon.ico" /> 
```

希望有用：[http ://www.w3schools.com/tags/att_link_rel.asp](http://www.w3schools.com/tags/att_link_rel.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T08:53:47.837

在[https://www.sitepoint.com/rel-html-attribute/](https://www.sitepoint.com/rel-html-attribute/)他们声明

> “alternate”属性值也可以用在 XML 提要的上下文中，即 RSS 或 Atom，它们由 type 属性指示

此外，带有 rel="first|last|prev|next" 的站点导航应该使导航更容易，并且例如由特定的 firefox 扩展（[https://addons.mozilla.org/de/firefox/addon/site-导航栏/?src=搜索](https://addons.mozilla.org/de/firefox/addon/site-navigation-bar/?src=search)）。

# c# - 从 Model C# MVC 中检索值

> ID：15632676
> 
> 赞同：0
> 
> 时间：2013-03-26T08:44:09.557
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个`C# MVC Model`如下；

```
public class MyModel
{
    ...
    public IEnumerable<MyModel> allDetails { get; set; }
    public int age { set; get; }
    public string gender { set; get; }
    public int schoolid { set; get; }
    ...
} 
```

现在想从中检索数据`allDetails`。我该怎么做 ？

在`controller`;

```
model.allDetails = MyDetails.getAllDetails(); // Saves all details in the Model 
```

现在我如何从中`age, gender and school`检索`model`；我的方法如下（但它不起作用）

```
model.allDetails.age; // This doesn't work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:47:44.103

在您的代码中 model.allDetails 是一个列表（或其他实现 IEnumerable 的其他东西），因此您必须使用 foreach 或另一个循环，或者只是 First() 从中获取第一个值：model.allDetails.First().age

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:49:58.697

我认为您的课程设计`MyModel`错误，您可能应该有两个课程，例如：

```
public class MyClass
{
        ...
        public IEnumerable<MyModel> allDetails { get; set; }
        public int age { set; get; }
        public string gender { set; get; }
        public int schoolid { set; get; }
        ...
}

public class MyModel
{
    ...
    public IEnumerable<MyClass> allDetails { get; set; }
    ...

} 
```

您的`MyModel`类将包含`IEnumerable`您的其他包含属性的类。稍后您可以通过控制器填充模型。

在您当前的`MyModel`类中，您保留类本身的 IEnumerable，因此该类的每​​个对象都将具有另一个 IEnumerable，依此类推。

您可能还会看到：属性名称的[C# 编码约定（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/ff926074.aspx)。

# java - 如何停止 JTable 进行用户交互？

> ID：15632678
> 
> 赞同：0
> 
> 时间：2013-03-26T08:44:13.543
> 
> 标签：java, swing, jtable

我正在使用`JTable`具有 4 列的如何设置`JTable`来选择一行，但用户不应更改该行的值？

```
Jtable.setEnabled(false); 
```

该语句对我不起作用，因为用户无法选择该行。

如何用您的答案替换此代码？

```
public void setModel()
{
    String[] colNames = {"Name","Email","Department","Status"};
    TableModel model = new DefaultTableModel(colNames,500);
    table.setModel(model);

    String insert = "select * from " + deptName;

    try
    {
        conn = ac.getConnection();
        stmt = conn.prepareStatement(insert);
        rs = stmt.executeQuery();
        int row = 0;   
        while(rs.next())
        {
            String[] rowData = new String[5];
            for(int i=1;i<=4;i++)
            {
                rowData[i-1] = rs.getString(i);
            }
            model.setValueAt(rowData[0], row, 0);
            model.setValueAt(rowData[1], row, 1);
            model.setValueAt(rowData[2], row, 2);                
            model.setValueAt(rowData[3], row, 3);                
            row++;  

        }
    }catch(SQLException s){}
    catch(ClassNotFoundException e)
        {e.printStackTrace();}
    finally
    {
        try
        {
            if(rs != null){rs.close();}
            if(stmt != null){stmt.close();}
            if(conn != null) {conn.close();}
        }
        catch(SQLException e){}
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:03:18.547

有偏见的我忍不住建议使用 JXTable（在[SwingX 项目](http://swingx.java.net)中：它支持在视图上配置可编辑性，包括每列和每表

```
// to disable editing for a particular column
table.getColumnExt(columnIndex).setEditable(false);
// to disable editing for the complete table
table.setEditable(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:46:53.210

根据您创建表格模型的方式，您将需要覆盖[`TableModel#isCellEditable`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableModel.html#isCellEditable%28int,%20int%29)并返回`false`您希望不可编辑的所有单元格

查看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)了解更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T08:48:02.970

像这样扩展 DefaultTableModel

```
private class NoCellEditTableModel extends DefaultTableModel{

    @Override
    public boolean isCellEditable(int row, int column) {
       //all cells false
       return false;
    }
} 
```

然后将其设置为您的 JTable

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T08:52:20.003

设置表的模型和覆盖`isCellEditable`方法

```
jtable.setModel(new TableModel() {

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex) {
            return false;   
    }
}); 
```

# javascript - .blur 在页面加载后不起作用

> ID：15632683
> 
> 赞同：0
> 
> 时间：2013-03-26T08:44:34.913
> 
> 标签：javascript, jquery

我必须进行简单的验证。它第一次工作正常，但在文本中填充值后，如果按 F5 刷新页面，则代码将无法正常工作。

产生错误的步骤

1.  专注于第一个文本框并模糊而不填充任何值。函数将警告“错误”并且名为错误的类将添加到文本框

2.  现在将在文本框中输入值并按 F5。然后从文本框中删除值，模糊功能将提示“无错误”这是问题。它应该提醒，因为我们在空文本框上模糊。

我投资了门，发现这个问题是由于 onload 函数而发生的，如果输入文本值不等于空白，则我提到代码然后模糊文本框

```
<head>
  <script type="text/javascript" src="jquery-1.8.3.js"></script>
  <script type="text/javascript">
    $(function(){
       $('input').blur(function(){
          if($(this).hasClass('error')){
             alert('error')
          }
          else {
             alert('no error')
         }
     }) 
  })

  function test(id){
     if($(id).val()==''){
       $(id).addClass('error')
     }
     else {
       $(id).removeClass('error')
     }
  }

  $(function(){
     setTimeout(function(){
          $('input').each(function(){
             if($(this).val()!=''){
                $(this).blur();
             }
          })
     },1000)
  })
</script>
<style>
    .error{ border:#F00 solid 1px}
</style>
</head>

<body>
    <input type="text" onblur="test(this)"/>
    <input type="text" onblur="test(this)" />
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:47:51.720

***只需尝试以下内容：***

**脚本部分：**

```
 <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script type="text/javascript">
  function test(textId){    
     if($("#"+textId).val()==""){
       $("#"+textId).addClass("error"); 
       alert("Error"); 
       setTimeout(function(){
       $("#"+textId).focus();
       },100);
       return false;
     }
     else {
       $("#"+textId).removeClass("error");
       alert("No Error");
       return true;
     }
  }
  </script> 
```

**HTML部分：**

```
<style>
    .error{ border:#F00 solid 1px}
</style>
<body>
    <input type="text" onblur="test(this.id);" id="text1" value=""/>
    <input type="text" onblur="test(this.id);" id="text2" value=""/>
</body> 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:47:24.233

最好在判断输入框是否为空的时候检查值，而不是css类。

```
$('input').blur(function () {
    if ($.trim($(this).val()) == '') {
        alert('error')
    } else {
        alert('no error')
    }
}); 
```

我认为 FF 试图保留 HTML 文档的状态，因此该类仍然应用于元素

# sql - 需要为审计跟踪创建触发器，得到“不正确的语法”？

> ID：15632686
> 
> 赞同：0
> 
> 时间：2013-03-26T08:44:49.763
> 
> 标签：sql, sql-server, sql-server-2000

我有一个表`Products`，我需要在该表上创建触发器以更新另一个表中的数据更改（新数据），该表`Products_audit`具有相同的列和相同的数据。

我试过以下：

```
CREATE TRIGGER Super 

ON Products 

AFTER INSERT, UPDATE

AS

UPDATE Product_audit (Column1,Column2, Column3, ... )

SELECT (Column1,Column2,Column3,...)

FROM Products 
```

收到以下错误：

```
Server: Msg 170, Level 15, State 31, Procedure Super, Line 20
Line 20: Incorrect syntax near '('.
Server: Msg 170, Level 15, State 1, Procedure Super, Line 24
Line 24: Incorrect syntax near ','. 
```

我使用 sql server 2000

我在触发器创建方面没有那么强，你能纠正我吗？我想知道我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:52:08.693

我认为你的触发器需要看起来像这样：

```
CREATE TRIGGER Super 

ON Products 

AFTER INSERT, UPDATE

AS

UPDATE Product_audit 

SET Column1 = p.Column1
SET Column2 = p.Column2

FROM Products p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:53:23.273

您好，您必须创建两个不同的触发器，一个用于更新，一个用于插入 1) 用于插入

```
CREATE TRIGGER Super
ON Products
AFTER INSERT
AS
BEGIN

INSERT INTO Product_audit 
(Column1,Column2,...)
SELECT Column1,Column2,...
FROM Inserted

END 
```

2) 更新

```
 CREATE TRIGGER Super
    ON Products
    AFTER Update
    AS
    BEGIN

    DECLARE @Column1 as varchar(10)
    DECLARE @Column2 as varchar(10)
    DECLARE @ID INT

    SELECT @ID=ID,@Column1=Column1,@Column2=Column2 FROM INSERTED 

   UPDATE Product_audit  SET Column1=@Column1,Column2=@Column2
   WHERE ID=@ID

    END 
```

# c++ - 任意数量的任意类型的参数

> ID：15632687
> 
> 赞同：0
> 
> 时间：2013-03-26T08:45:04.120
> 
> 标签：c++

我有一个函数可以接受任意数量的任何类型的参数（通用参数）。

我不想使用 va_arg 东西，并且我的编译器不支持可变参数模板参数。我使用boost库。

谁能建议我如何实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T08:50:52.750

如果您不想使用`va_args`并且不想使用支持可变参数模板的最新编译器（如免费和开源`GCC`或`Clang`编译器），则无法实现。如果您可以接受参数数量的上限，则可以使用`Boost.Preprocessor`定义参数为 0 的`N`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:08:55.910

你也可以通过传入一个 void 指针数组来作弊，

```
void func(void**args); 
```

并要求最后一个为 Null，或传入一个向量，

```
void func(std::vector<void*> args); 
```

但是您将您的 API 暴露在滥用和无法追踪的运行时错误中，任何体面的代码审查都需要您离开并正确地重新设计您的代码。

# ios - OpenGL 错误 0x0502 在 -[CCSprite draw] 530

> ID：15632690
> 
> 赞同：1
> 
> 时间：2013-03-26T08:45:19.623
> 
> 标签：ios, xcode, cocos2d-iphone

我正在使用 cocos2d 2.0。在一个场景中，我在 tableview 中加载数据，我在**日志窗口**中收到错误消息“OpenGL error 0x0502 in -[CCSprite draw] 530” 。**应用运行良好**

我搜索并意识到缺少一些着色器文件。我已经确保我所有的文件都在那里并且编译源也是最新的。

但是在链接上我得到了一些解决方案[，说](https://stackoverflow.com/questions/11662770/cocos2d-2-0-zillions-of-opengl-errors) 我不知道​​要修改哪个绘图函数以及我的 cocos2d 文件有什么问题。有没有办法解决这个问题？这会在将来使我的应用程序崩溃吗？

我的代码：

```
 -(id) init
    {

if( (self=[super init] )) {

    CGSize winSize = [CCDirector sharedDirector].winSize;
    tableView = [SWTableView viewWithDataSource:self size:winSize];

    tableView.direction = SWScrollViewDirectionVertical;
    tableView.position = ccp(0,0);
    tableView.delegate = self;
    tableView.verticalFillOrder = SWTableViewFillTopDown;
     [self addChild:tableView];
     }
     return self;
     }

    -(SWTableViewCell *)table:(SWTableView *)table cellAtIndex:(NSUInteger)idx {

     SWTableViewCell *cell = [table dequeueCell];
     if (!cell) {
     cell = [[MyCell new] autorelease];
     }

    CCMenuItemImage * listItemBtn =[CCMenuItemImage itemWithNormalImage:@"        listitem.png" selectedImage:@"listitem_sel.png" ];

     listItemBtn.position=ccp(270, 20);
     [cell addChild:listItemBtn];

     return cell;

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:16:46.383

Cocos2d 2.0 使用 OpenGLES2.0，所以在 cocos2d 2.0 中不要使用 OpenGL[即时模式](https://stackoverflow.com/questions/6733934/what-does-immediate-mode-mean-in-opengl)api。

示例：GLBegin()、GLLineWidth()、glDrawArrays() 等。

# bash - 在文件中打印单行的最快方法

> ID：15632691
> 
> 赞同：21
> 
> 时间：2013-03-26T08:45:19.973
> 
> 标签：bash, sed, benchmarking, head, cat

我必须从一个大文件*（1500000 行）*中提取一个特定的行，在多个文件的循环中多次，我问自己什么是最好的选择*（就性能而言）*。有很多方法可以做到这一点，我用这两种

```
cat ${file} | head -1 
```

或者

```
cat ${file} | sed -n '1p' 
```

我找不到答案，他们是否都只获取第一行或两者之一*（或两者）*首先打开整个文件然后获取第 1 行？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-26T08:50:40.483

放弃无用的`cat`和做：

```
$ sed -n '1{p;q}' file 
```

这将在打印该行后退出`sed`脚本。

* * *

**基准测试脚本：**

```
#!/bin/bash

TIMEFORMAT='%3R'
n=25
heading=('head -1 file' 'sed -n 1p file' "sed -n '1{p;q} file" 'read line < file && echo $line')

# files upto a hundred million lines (if your on slow machine decrease!!)
for (( j=1; j<=100,000,000;j=j*10 ))
do
    echo "Lines in file: $j"
    # create file containing j lines
    seq 1 $j > file
    # initial read of file
    cat file > /dev/null

    for comm in {0..3}
    do
        avg=0
        echo
        echo ${heading[$comm]}    
        for (( i=1; i<=$n; i++ ))
        do
            case $comm in
                0)
                    t=$( { time head -1 file > /dev/null; } 2>&1);;
                1)
                    t=$( { time sed -n 1p file > /dev/null; } 2>&1);;
                2)
                    t=$( { time sed '1{p;q}' file > /dev/null; } 2>&1);;
                3)
                    t=$( { time read line < file && echo $line > /dev/null; } 2>&1);;
            esac
            avg=$avg+$t
        done
        echo "scale=3;($avg)/$n" | bc
    done
done 
```

只需另存为`benchmark.sh`并运行`bash benchmark.sh`.

**结果：**

```
head -1 file
.001

sed -n 1p file
.048

sed -n '1{p;q} file
.002

read line < file && echo $line
0 
```

**来自包含 1,000,000 行的文件的结果。*

因此，时间`sed -n 1p`将随着文件的长度线性增长，但其他变化的时间将是恒定的*（并且可以忽略不计）*，因为它们在读取第一行后都退出：

![在此处输入图像描述](../Images/490a0be1e91f4425da2b086e9675bca2.png)

*注意：由于在更快的 Linux 机器上，时间与原始帖子不同。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T12:49:16.613

If you are really just getting the very first line and reading hundreds of files, then consider shell builtins instead of external external commands, use `read` which is a shell builtin for bash and ksh. This eliminates the overhead of process creation with `awk`, `sed`, `head`, etc.

The other issue is doing timed performance analysis on I/O. The first time you open and then read a file, file data is probably not cached in memory. However, if you try a second command on the same file again, the data as well as the inode have been cached, so the timed results are may be faster, pretty much regardless of the command you use. Plus, inodes can stay cached practically forever. They do on Solaris for example. Or anyway, several days.

For example, linux caches everything and the kitchen sink, which is a good performance attribute. But it makes benchmarking problematic if you are not aware of the issue.

All of this caching effect "interference" is both OS and hardware dependent.

So - pick one file, read it with a command. Now it is cached. Run the same test command several dozen times, this is sampling the effect of the command and child process creation, not your I/O hardware.

this is sed vs read for 10 iterations of getting the first line of the same file, after read the file once:

sed: `sed '1{p;q}' uopgenl20121216.lis`

```
real    0m0.917s
user    0m0.258s
sys     0m0.492s 
```

read: `read foo < uopgenl20121216.lis ; export foo; echo "$foo"`

```
real    0m0.017s
user    0m0.000s
sys     0m0.015s 
```

This is clearly contrived, but does show the difference between builtin performance vs using a command.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T10:13:49.110

如何避免管道？两者都`sed`支持`head`文件名作为参数。这样你就可以避免从猫身边经过。我没有测量它，但是 head 在较大的文件上应该更快，因为它会在 N 行之后停止计算（而 sed 会遍历所有文件，即使它不打印它们 - 除非您`q`按照上面的建议指定 uit 选项）。

例子：

```
sed -n '1{p;q}' /path/to/file
head -n 1 /path/to/file 
```

同样，我没有测试效率。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-13T01:37:21.393

如果你想从一个大文件中只打印 1 行（比如第 20 行），你也可以这样做：

```
head -20 filename | tail -1 
```

我用 bash 做了一个“基本”测试，它似乎比`sed -n '1{p;q}`上面的解决方案表现得更好。

测试需要一个大文件并从中间某处（在 line `10000000`）打印一行，重复 100 次，每次选择下一行。所以它选择线`10000000,10000001,10000002, ...`等等直到`10000099`

```
$wc -l english
36374448 english

$time for i in {0..99}; do j=$((i+10000000));  sed -n $j'{p;q}' english >/dev/null; done;

real    1m27.207s
user    1m20.712s
sys     0m6.284s 
```

对比

```
$time for i in {0..99}; do j=$((i+10000000));  head -$j english | tail -1 >/dev/null; done;

real    1m3.796s
user    0m59.356s
sys     0m32.376s 
```

* * *

用于从多个文件中打印一行

```
$wc -l english*
  36374448 english
  17797377 english.1024MB
   3461885 english.200MB
  57633710 total

$time for i in english*; do sed -n '10000000{p;q}' $i >/dev/null; done; 

real    0m2.059s
user    0m1.904s
sys     0m0.144s

$time for i in english*; do head -10000000 $i | tail -1 >/dev/null; done;

real    0m1.535s
user    0m1.420s
sys     0m0.788s 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-29T03:18:26.620

我做了广泛的测试，发现如果你想要文件的*每一*行：

```
while IFS=$'\n' read LINE; do
  echo "$LINE"
done < your_input.txt 
```

比任何其他（基于 Bash 的）方法要快得多**。**所有其他方法（如`sed`）每次都读取文件，至少到匹配的行。如果文件长 4 行，您将得到：`1 -> 1,2 -> 1,2,3 -> 1,2,3,4`=`10`读取，而 while 循环仅维护一个位置光标（基于`IFS`），因此总共只会`4`读取。

在具有约 15k 行的文件上，差异是惊人的：约 25-28 秒（`sed`基于，每次提取特定行）与约 0-1 秒（`while...read`基于，读取文件一次）

上面的示例还显示了如何以`IFS`更好的方式设置换行符（感谢下面评论中的 Peter），这有望解决有时`while... read ...`在 Bash 中使用时出现的其他一些问题。

# jquery - 关于jquery通配符的使用

> ID：15632692
> 
> 赞同：-1
> 
> 时间：2013-03-26T08:45:24.570
> 
> 标签：jquery

当我比较时，我想使用通配符。假设目标 id 是`"foolinkbar"`

这样我正在比较，但没有运气。这是代码

```
$("html").click(
              function (e) {
                  if (e.target.is("[id*=link]")  && e.target.id != "HoverSubmenu"
                        && e.target.className != "HoverRoot"
                        && e.target.className != "HoverLI" 
                        && e.target.className != "atag") {
                      $('div#HoverSubmenu').fadeOut();
                  }
              }); 
```

怎么写`e.target.id== "[id*=link]"`。请帮我整理一下。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:50:34.420

这是 JavaScript 和 jQuery 语法的奇怪组合，并且也是无效的，因为[`.is()`](http://api.jquery.com/is/)无法在 HTML 目标上调用该方法。它需要在 jQuery 对象上调用。

CSS 属性选择器`[id*=link]`是完全有效的。

执行此操作的 jQuery 方法是：

```
$('html').on('click', '[id*=link]', function() {
    if (this.id != 'HoverSubmenu'
        && this.className != 'HoverRoot'
        && this.className != 'HoverLI' 
        && this.className != 'atag') {
        $('div#HoverSubmenu').fadeOut();
    }
}); 
```

给定示例 HTML

```
<a id="foolinkbar">foolinkbar</a>

<div id="HoverSubmenu">I will fade out when you click foolinkbar but not when other parts of the page are clicked</div> 
```

[**看演示**](http://jsfiddle.net/yBYUR/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:54:55.390

目标不是 jQuery 对象，因此您不能`is`在其上调用函数。用 包裹元素`$()`。

**简单的例子**

```
$(document).click(function(e){
    if($(e.target).is("[name*='link']")){
        alert("Found");
    }
}); 
```

**小提琴：http:** [//jsfiddle.net/4vCuq/](http://jsfiddle.net/4vCuq/)

**您的代码已修改**

```
$(document).click(function (e) {
    if ($(e.target).is("[id*=link]")  && e.target.id != "HoverSubmenu"
        && e.target.className != "HoverRoot"
        && e.target.className != "HoverLI" 
        && e.target.className != "atag") {
            $('div#HoverSubmenu').fadeOut();
     }
}); 
```

# clojure - lein 运行，不会正确运行 -main，尽管一个干净的 nrepl 会

> ID：15632695
> 
> 赞同：1
> 
> 时间：2013-03-26T08:45:32.083
> 
> 标签：clojure, leiningen

clojure 的新手，尝试为布尔表达式求值器编译以下代码

```
;core.clj
(ns my-app.core
  (:gen-class))

(defn t [& args] (if (empty? args) t
                 ((first args) t (first (rest args)))))

(defn f [& args] (if (empty? args)  f
                 ((first args)  f (first (rest args)))))

(defn | [cond1 cond2] (if (= cond1 t) t
                      (if (= cond2 t) t f)))

(defn & [cond1 cond2] (if (= cond1 f) f
                      (if (= cond2 f) f t)))

(defn ! [& args] (if (= (first args) t)
               (apply f (rest args))
               (if ( = (first args) f)
                 (apply t (rest args))
                 (! (apply (first args) (rest args))))))

(defn -main [& args]
 (loop [line (read-line)]
   (do
      (println (eval (read-string (apply str "" (interpose \space  (seq (str "(" line ")")))))))
  (if (= (count line) 1) nil (recur (read-line)))))) 
```

每次我执行“lein run”并输入字符串“(t|t)=t”时，都会出现以下错误

```
Exception in thread "main" java.lang.RuntimeException: Unable to resolve symbol: t in this context 
```

但是，如果我在“src/my_app/”目录中打开一个新的 nrepl，然后输入命令

```
(-main) 
```

我得到正确的字符串和结果

```
( ( t | t ) = t )
true 
```

我应该注意，在运行 lein run

其他字符串字符串 "+ 1 2 3 4 5 6" 将正确评估，但由于某种原因它无法识别函数 (t ...)

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:46:24.130

`eval`使用当前（线程绑定）值`*ns*`来确定您当前“在”哪个命名空间，它控制如何解析不合格符号。在运行后的 repl 中`(ns my-app.core ...)`，您位于`my-app.core`名称空间中，因此 eval 找到`t`您在那里定义的。但是，即使您仍然在 中定义，编译后`t`，`my-app.core`当您的程序开始运行时，您仍处于`user`命名空间中并且 eval 无法找到`t`。

因此，您需要做的就是将您的命名空间更改`-main`为 be `my-app.core`，使用`binding`如下：

```
(defn -main [& args]
   (绑定 [*ns* (the-ns 'my-app.core)]
    （循环[行（读取行）]
      (println (eval (read-string (apply str (interpose \space (str "(" line ")"))))))
      (when-not (= (count line) 1)
        (recur (read-line))))))

```

# gradle - Gradle 任务差异

> ID：15632696
> 
> 赞同：10
> 
> 时间：2013-03-26T08:45:32.950
> 
> 标签：gradle

以下两个代码片段有什么区别？

第一的：

```
task copyFiles(type: Copy) << {
  from "folder/from"
  into "dest/folder"
} 
```

第二：

```
task copyFiles(type: Copy) {
  from "folder/from"
  into "dest/folder"
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-26T09:12:17.383

简而言之，第一个片段弄错了，第二个片段弄对了。

Gradle 构建分为三个阶段：初始化、配置和执行。方法喜欢`from`和`into` *配置*任务，因此需要在配置阶段调用它们。但是，`<<`（这是 的快捷方式`doLast`）添加了一个*任务操作*- 它指示任务在执行时要做什么*以及*何时*执行*。换句话说，第一个片段在执行阶段配置任务，更糟糕的是，*在*其主要（复制）操作执行之后。因此配置不会有任何影响。

通常，一个任务*要么*有一个类型（它已经带来了一个任务动作）*，要么*有一个`<<`（对于一个临时任务）。两者都有合法的用例（在任务的“主要”工作之后做一些自定义工作），但更常见的是，任务配置得太晚是错误的。

我通常建议使用`doLast`而不是`<<`，因为它不那么神秘并且更容易发现此类错误。（一旦你理解了这些概念，很明显这`task copyFiles(type: Copy) { doLast { from ... } }`是错误的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:12:30.907

第一个代码块创建一个任务并向其附加一个动作。任务由动作组成，这些动作是在调用任务时顺序运行的指令块

第二个块创建一个任务并配置它。这些指令在 gradle“配置”生命周期阶段运行。

[在这里](http://gradleware.com/registered/books/building-and-testing/tasks.html#task-configuration)您可以找到对差异的清晰解释

[在这里](http://www.gradle.org/docs/current/userguide/more_about_tasks.html)您可以找到对 gradle 任务的深入解释

[这](http://www.gradle.org/docs/current/userguide/build_lifecycle.html)是关于生命周期的 gradle 指南

# javascript - google可视化-点击事件

> ID：15632698
> 
> 赞同：5
> 
> 时间：2013-03-26T08:45:43.673
> 
> 标签：javascript, jquery, google-visualization

我正在使用谷歌可视化来绘制饼图。我面临的问题是，**我无法**在饼图上捕获点击事件。我正在这样做。

```
function drawchartfromRe()
{
    dashboard = new google.visualization.Dashboard(
            document.getElementById('dashboard_div'));
    //alert("RefuelLength"+totrefuelList.length);
    //alert("Vehicleid:"+totrefuelList[0].vehicleId);
   //google.load("visualization", "1", {packages:["corechart"]});
    data = new google.visualization.DataTable();
    data.addColumn('string', 'Task');
    data.addColumn('number', 'Quantity');
    data.addRows(totrefuelList.length);
    for (var i=0;i<totrefuelList.length;i++)
    {
       data.setValue(i, 0, totrefuelList[i].vehicleName);
       data.setValue(i, 1, totrefuelList[i].totalRefuelQty);
    }

    // var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
     chart = new google.visualization.ChartWrapper({
      'chartType': 'PieChart',
      'containerId': 'chart_div',
      'options': {
          title: 'Refuel Trend',
          height:'500',
          width:'400',
          backgroundColor: { fill:'transparent' },
        'legend': 'right'
      }
    });

  /* google.visualization.events.addListener(chart, 'select', function(e) {
       // var selection = chart.getSelection();
      var vehid= data.getValue(visualization.getSelection()[0].row, 0);
        getRefueldailywise(vehid);
    });*/
   // chart.draw(data, options);
   drawDashboard(dashboard,data,chart);
   google.visualization.events.addListener(chart, 'select', function() {
       // grab a few details before redirecting

      alert(data.getValue(chart.getSelection()[0].row, 0));
       //location.href = 'http://www.google.com?row=' + row + '&col=' + col + '&year=' + year;
     });
} 
```

在萤火虫我得到这样的错误..dashboard.getChart **不是一个函数**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T00:40:31.590

图表包装器不是图表对象，也没有`click`事件。其实[饼图也没有点击事件](https://developers.google.com/chart/interactive/docs/gallery/piechart#Events)，只有`select`。

如果您[阅读](https://developers.google.com/chart/interactive/docs/reference#chartwrapperobject)它说的文档：

1.  `ready`为包装器创建一个事件
2.  让`ready`事件触发`select`包装器中图表的事件

这是他们给出的例子：

```
var wrapper;
function drawVisualization() {

  // Draw a column chart
  wrapper = new google.visualization.ChartWrapper({
    chartType: 'ColumnChart',
    dataTable: [['Germany', 'USA', 'Brazil', 'Canada', 'France', 'RU'],
                [700, 300, 400, 500, 600, 800]],
    options: {'title': 'Countries'},
    containerId: 'visualization'
  });

  // Never called.
  google.visualization.events.addListener(wrapper, 'onmouseover', uselessHandler);

  // Must wait for the ready event in order to
  // request the chart and subscribe to 'onmouseover'.
  google.visualization.events.addListener(wrapper, 'ready', onReady);

  wrapper.draw();

  // Never called
  function uselessHandler() {
    alert("I am never called!");
  }

  function onReady() {
    google.visualization.events.addListener(wrapper.getChart(), 'onmouseover', usefulHandler);
  }

  // Called
  function usefulHandler() {
    alert("Mouseover event!");
  }
} 
```

因此，在您的情况下，您将需要更改此部分：

```
 google.visualization.events.addListener(chart, 'ready', function() {
       // grab a few details before redirecting

      alert(data.getValue(chart.getSelection()[0].row, 0));
       //location.href = 'http://www.google.com?row=' + row + '&col=' + col + '&year=' + year;
     }); 
```

对于这样的事情：

```
 google.visualization.events.addListener(chart, 'ready', function() {
       // grab a few details before redirecting
      google.visualization.events.addListener(chart.getChart(), 'select', function() {
          chartObject = chart.getChart();
          alert(data.getValue(chartObject.getSelection()[0].row, 0));
      });

       //location.href = 'http://www.google.com?row=' + row + '&col=' + col + '&year=' + year;
     }); 
```

# php - 保护登录和评论表单免受 CSRF

> ID：15632700
> 
> 赞同：6
> 
> 时间：2013-03-26T08:45:46.010
> 
> 标签：php, login, header, csrf, protection

我已经阅读了很多关于 CSRF 保护的文章（[这是一篇很好的](http://seclab.stanford.edu/websec/csrf/csrf.pdf)文章）以及关于 SO 的各种问题，但它们似乎都没有足够的信息来回答我的问题。

我正在开发自己的 CMS，我想保护我的登录和评论表单。我将允许匿名用户在我的网站上发表评论。

我网站上的所有表格都使用令牌进行保护。我已经知道这种方法，但问题是它需要一个活动会话（即在用户登录之后）。登录和评论表单的问题是几乎任何人都可以访问它们并且不需要您登录 - 在这种情况下，对 CSRF 的最佳保护是什么？

在上面的链接中，我读到可以在用户尝试登录然后继续使用通常的反 CSRF 方法（例如为用户的会话分配令牌）时创建“预会话”，但我不知道如何实现这一目标。

推荐人标头是一个弱解决方案，所以我想我不应该打扰。据我测试，Origin 标头仅在 Google Chrome 中受支持。自定义标题呢？XMLHTTPRequest 似乎是一种可能性，但是，我已经在 Google 上花费了三个多小时来查找有关如何在其网站上实施此类安全措施的一些信息。但是，即使我可以使用自定义标头，由于 HTTP 标头可以完全伪造，它是否会使其无用？

所以，问题是：我应该如何保护我的登录和评论表单免受 CSRF 的影响？

**编辑：**这是我上面提供的链接中的一些附加信息：

> 我们建议严格的Referer验证来防止登录CSRF，因为登录表单通常通过HTTPS提交，其中Referer标头可靠地存在于合法请求中。如果登录请求缺少 Referer 标头，则站点应拒绝该请求以防御恶意压制。

和

> 秘密验证令牌可以防御登录 CSRF，但开发人员经常忘记实施防御，因为在登录之前，没有会话可以绑定 CSRF 令牌。要使用秘密验证令牌来防止登录 CSRF，站点必须首先创建一个“预会话”，实施基于令牌的 CSRF 保护，然后在成功验证后转换到真正的会话。

在阅读了上述引文后，我无法结束这个论点。其中之一提到使用引用标头，但我不太确定它是否真的增加了 webapp 的安全性。

**编辑 2：**使用 CAPTCHA 怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:56:12.593

CSRF 问题与使用登录用户凭据提交内容的人有关。这是非常有问题的，因为恶意网站可以像任何刚刚浏览过您网站的人一样做事。如果您谈论的是可以匿名使用的表单，而无需登录，那么 CSRF 风险就会大大降低，因为从另一个站点发布到表单的收益要少得多——因为任何人都可以直接使用相同的权限进行操作.

所以我不明白为什么需要针对未登录的表单进行 CSRF 保护。

如果你确实想要这个，会话前令牌在技术上可能类似于真实会话，但只是一个更轻量级的令牌。除了生成的令牌之外，它实际上不包含任何其他内容。

* * *

编辑：关于使用 PHP 提供的 $_SESSION 作为会话前令牌，这是 PHP 的标准会话机制。如果你想使用它，那么是的，就是这样。

但是，您不会被迫这样做，而且我个人不会那样做，因为它会消耗所有访问者的服务器内存，而这并不是真正需要的。对于更有效的机制，基本上你需要 a) 一个标识用户的 cookie 和 b) 存储在服务器端的东西，告诉 cookie 是有效的（如果需要，它对谁有效，即 ip）。对于更轻量级的方法，您可以创建一个令牌，将其存储在 cookie 中，并在表单中生成与该令牌匹配的内容作为隐藏字段，并在提交时匹配这些内容（如 Devesh 所解释的）。后者将阻止从另一个站点提交表单，前者甚至可以阻止恶意站点在您的站点上进行查找并尝试向最终用户设置任何 cookie 的情况。所以我能想到的三种方法：

*   只是阻止来自其他站点的图像请求 - 使用 POST 可以防止这种情况
*   防止从另一个站点提交表单 - 匹配 cookie 的表单隐藏字段可以防止这种情况
*   防止从另一个站点提交表单，这些站点在您的站点上进行预查找 - 这需要 IP 验证，存储在服务器端的内容，例如与 cookie 匹配的数据库中的 ip

* * *

EDIT2：在验证码上，它们的主要用例是防止自动（蛮力）登录尝试。他们也会解决登录表单上的 CSRF 请求问题，但这样做有点过头了。为了防止暴力登录攻击，在某些情况下可能需要它们，尽管为了不过度降低可用性，可能需要一些更用户友好的东西。也许像[KittenAuth](http://thepcspy.com/kittenauth/) :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-05T18:07:02.590

CSRF 问题与使用登录用户凭据提交内容的人有关。这是非常有问题的，因为恶意网站可以像任何刚刚浏览过您网站的人一样做事。如果您谈论的是可以匿名使用的表单，而无需登录，那么 CSRF 风险就会大大降低，因为从另一个站点发布到表单的收益要少得多——因为任何人都可以直接使用相同的权限进行操作.

所以我不明白为什么需要针对未登录的表单进行 CSRF 保护。

如果你确实想要这个，会话前令牌在技术上可能类似于真实会话，但只是一个更轻量级的令牌。除了生成的令牌之外，它实际上不包含任何其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T09:00:59.353

我认为您可以通过组合添加到表单中的隐藏字段并同时在 cookie 中添加相同的值并附加用户响应来解决 CSRF 类型的问题。当用户发回表单时，尝试匹配隐藏字段值和来自请求的 cookie 值，如果两者都匹配，那么你就可以开始了......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T08:55:53.177

您无法真正保护匿名表单免受 CSRF 攻击。仅仅因为其他站点可以充当普通用户。我可以创建一个`curl`向匿名表单发出请求的站点，并将 cookie 和令牌存储在变量中。然后再次请求发布表单。该脚本并不是真正伪造请求，而是自动发布。

CSRF 的目的是防止脚本/人代表另一个用户执行操作。所以那将是我试图以你的身份发帖。为了防止带有令牌的会话/cookie 方法是一个很好的解决方案。因为我没有办法得到你的会话和令牌，除非你的网站在其他方面有缺陷。我建议阅读[OWASP 指南](https://www.owasp.org)，以了解您应该注意什么。

您应该始终做的另一件事是确保“操作”始终符合`POST`请求，因此我不能简单地在您的论坛上放置链接到“ [http://www.yoursite.com/delete.php?id=10](http://www.yoursite.com/delete.php?id=10) ”的图片。如果您允许`GET`请求并打开包含此图像的页面，我会伪造请求。如果你只允许`POST`它不会有任何结果。

# image - GWT - 淡入/淡出背景图像

> ID：15632702
> 
> 赞同：0
> 
> 时间：2013-03-26T08:45:51.220
> 
> 标签：image, gwt, animation, background

我有一个自定义类，如下所示，它可以正常工作，按钮会增大/缩小以适应文本，并且单击时 bg 图像会发生变化。我要解决的问题是如何在单击/未单击时“淡入”一个或其他图像这是我的代码

```
public ExpandingOvalButton(String text) {
    if (text.length() > 15) {
        label.getElement().getStyle().setFontSize(20, Unit.PX);
    } else {
        label.getElement().getStyle().setFontSize(30, Unit.PX);
    }

    int width = 120;
    initWidget(panel);

    label.setText(text);
    // width = width + (text.length() * 8);
    String widthStr = width + "px";
    image.setWidth(widthStr);
    image.setHeight("100px");
    button = new PushButton(image);
    button.setWidth(widthStr);
    button.setHeight("50px");
    panel.add(button, 0, 0);
    panel.add(label, 18, 14);
}

public void isClicked()
{
    image.setUrl("images/rectangle_green.png");
}

public void unClicked()
{
    image.setUrl("images/rectangle_blue.png");
}

@Override
public HandlerRegistration addClickHandler(ClickHandler handler) {
    return addDomHandler(handler, ClickEvent.getType());
}

public void setButtonEnabled(boolean enabled) {
    // panel.setVisible(enabled);
    // this.label.setVisible(enabled);
    this.button.setVisible(enabled);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:17:15.810

您可以使用[GwtQuery](http://code.google.com/p/gwtquery/)。它提供了fadeIn 和fadeOut 效果（以及许多其他JQuery 好东西），它是跨浏览器兼容的，而且似乎非常活跃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T20:40:56.593

这是一个用于淡化任何元素的通用实用程序类：

```
public class ElementFader {

    private int stepCount;

    public ElementFader() {
        this.stepCount = 0;
    }

    private void incrementStep() {
        stepCount++;
    }

    private int getStepCount() {
        return stepCount;
    }

    public void fade(final Element element, final float startOpacity, final float endOpacity, int totalTimeMillis) {
        final int numberOfSteps = 30;
        int stepLengthMillis = totalTimeMillis / numberOfSteps;

        stepCount = 0;

        final float deltaOpacity = (float) (endOpacity - startOpacity) / numberOfSteps;

        Timer timer = new Timer() {

            @Override
            public void run() {
                float opacity = startOpacity + (getStepCount() * deltaOpacity);
                DOM.setStyleAttribute(element, "opacity", Float.toString(opacity));

                incrementStep();
                if (getStepCount() == numberOfSteps) {
                    DOM.setStyleAttribute(element, "opacity", Float.toString(endOpacity));
                    this.cancel();
                }
            }
        };

        timer.scheduleRepeating(stepLengthMillis);
    }
} 
```

调用代码例如：

```
new ElementFader().fade(image.getElement(), 0, 1, 1000); // one-second fade-in
new ElementFader().fade(image.getElement(), 1, 0, 1000); // one-second fade-out 
```

# jquery - 从另一个页面链接并打开手风琴

> ID：15632704
> 
> 赞同：0
> 
> 时间：2013-03-26T08:45:53.080
> 
> 标签：jquery, jquery-ui, accordion, jquery-ui-accordion

我希望你能帮助我。我有一个手风琴系统在我正在处理的网站的主页上工作。这适用于 jQuery：

```
$('.accordionButton').click(function() {
    //REMOVE THE ON CLASS FROM ALL BUTTONS
    $('.accordionButton').removeClass('on');
    //NO MATTER WHAT WE CLOSE ALL OPEN SLIDES
    $('.accordionContent').slideUp('normal');
    //IF THE NEXT SLIDE WASN'T OPEN THEN OPEN IT
    if($(this).next().is(':hidden') == true) {
        //ADD THE ON CLASS TO THE BUTTON
        $(this).addClass('on');
        //OPEN THE SLIDE
        $(this).next().slideDown('normal');
     }   
 });

//ADDS THE .OVER CLASS FROM THE STYLESHEET ON MOUSEOVER 
$('.accordionButton').mouseover(function() {
    $(this).addClass('over');

//ON MOUSEOUT REMOVE THE OVER CLASS
}).mouseout(function() {
    $(this).removeClass('over');                                        
});

$('.accordionContent').hide(); 
```

HTML

```
<div class="accordionButton">Products</div>
<div class="accordionContent products">
        <p>Content here</p>
    </div>
</div> 
```

我想要另一个页面上的链接，单击该链接会转到主页并打开这个特定的手风琴。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:56:44.417

我认为您需要有一个链接到您的内容的参数，然后在加载[时解析它](https://stackoverflow.com/questions/1403888/get-url-parameter-with-jquery)。

# c - 反对无效*

> ID：15632719
> 
> 赞同：0
> 
> 时间：2013-03-26T08:46:43.527
> 
> 标签：c, pointers

这可能是一个简单的问题，但我似乎无法正确回答（即使谷歌搜索不够）。考虑以下示例：

```
Datum getDatum(...);
List* lappend(List *list, void *datum);

void my_fun(List **args){
   lappend(*args, getDatum(...));
} 
```

不幸的是，编译器产生错误，因为参数 2 的指针不匹配 at `lappend`call within `my_fun`。我试图将 a `*`, like 放入`*(getDatum(...))`和 an`&`但两者都没有帮助。

该代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:51:16.523

您不能将 like 值转换为, 或等`Datum`指针。如果你将 getDatum 更改为`void*``Datum*``*(getDatum(...))`

`Datum* getDatum(...);`

它应该可以编译，但我建议您阅读指针等内容。还要知道，如果您使用 malloc() 在某处分配 Datum，则应该有相应的 free() 调用，如果您将所有内容都放在一个无效*列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:50:54.883

你不能这样做，因为返回类型`getDatum`is `Datum`。

你能做的是，

```
void my_fun(List **args){
   Datum data = getDatum();
   lappend(*args, (void *)&data);
} 
```

# android - 在 onCreateOptionsMenu() 侧创建 PopUpMenu

> ID：15632721
> 
> 赞同：1
> 
> 时间：2013-03-26T08:46:45.773
> 
> 标签：android, menu, popupmenu

嗨，我想在`PopUpMenu`内部创建一个，`onCreateOptionMenu()`我的目标是 API 级别 10，我`minSdk`的平板电脑版本是 8，因为你知道没有硬菜单键，所以对于软菜单键，我`onCreateOtionMenu()`用来在屏幕下方创建一个菜单选项，它也是工作。当我在我的屏幕上`PopUpMenu` 按下 Soft menuOption 时，它第一次显示它，下一次它不显示任何东西。

`PopUpMenu`这是我的内部`OnCreateOptionssMenu()`方法的代码片段

```
 @Override 
    public boolean  onCreateOptionsMenu(Menu menu) {

    PopUpMenu popup=new PopUpMenu(this,txtView);
                        popup.getMenuInflater().inflate(R.menu.option,popup.getMenu());
     popup.show();

                        //popup.dismiss();
                        //menu.clear();
                        //getMenuInflater().inflate(R.menu.fragmenttwo_menu, menu);
                            return (super.onCreateOptionsMenu(menu));

                        } 
```

**注意：**这里的 txtView 是一个 TextView，你可以在下面说一个视图锚，我正在显示 PopUpMenu 项。 **对于这里的校准，我正在使用`ViewPager`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:09:45.583

你可以这样使用：

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_MENU && event.getAction() == 0) {

            Toast.makeText(MainActivity.this, "hii", Toast.LENGTH_SHORT).show();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

**编辑：** 在上面的代码中`Toast`，这就是为什么它`dismiss`在一段时间后。它取决于您在方法中所做的代码。现在检查下面的代码。`dialog`是显示直到你`dismiss`它。

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_MENU && event.getAction() == 0) {

            PopupMenu popupMenu = new PopupMenu(MainActivity.this, lView);
            popupMenu.getMenuInflater().inflate(R.menu.activity_main,
                    popupMenu.getMenu());
            popupMenu.show();

            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

**希望你能理解....**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:23:41.260

经过大量的研发后，我发现用`softmenu`键显示`PopUpMenu`是`target version 10`不可能的。`PopUpMenu`仅在 11+ API 级别后可用。在我的情况下，有时会显示，有时不显示。如果您有任何解决方案，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-25T14:39:02.887

我使用了 user1381827 的答案，但后来意识到菜单不断消失。这是我最终得到的代码：

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU && event.getAction() == 1) {
        ImageView v = (ImageView) findViewById(R.id.header);
        showHeaderMenu(v);
        return false;
    }

    if(keyCode == KeyEvent.KEYCODE_MENU || keyCode == KeyEvent.KEYCODE_BACK) return super.onKeyUp(keyCode, event);
    return true;
} 
```

但在一般情况下，最后两行可能/应该替换为

```
return super.onKeyUp(keyCode, event); 
```

# c# - 出站规则不适用于更新面板

> ID：15632722
> 
> 赞同：1
> 
> 时间：2013-03-26T08:46:48.543
> 
> 标签：c#, asp.net, iis-7.5, updatepanel, url-rewrite-module

TLDR：出站规则不适用于更新面板部分回发

* * *

我正在使用 IIS 7.5 URL 重写器将图像路径映射到 cdn。

这是正在发生的事情的简化版本

```
<Repeater Goes Here>

    <img alt="alt text" src="<%#getImageSource(Eval("Filename").ToString() )%>">

<End of Repeater> 
```

假设函数 getImageSource 返回`"/images/someimage.jpg"`

这反过来重写为

```
<img alt="alt text" src="http://img.cdn.com/someimage.jpg"> 
```

使这项工作的出站规则是：

```
 <rule name="Out_Rewrite_ServeCookieLessImages" preCondition="ResponseIsHtml" enabled="true">
      <match filterByTags="Img" pattern="^/Images/(.*)$"/>
      <action type="Rewrite" value="http://img.cdn.com/{R:1}"/>
    </rule>

    <preConditions>
      <preCondition name="ResponseIsHtml">
        <add input="{RESPONSE_CONTENT_TYPE}" pattern="^text/html"/>
        <add input="{URL}" pattern="\.axd.*$" negate="true"/>
      </preCondition>
    </preConditions> 
```

问题是在更新面板中使用中继器时

异步回发后输出的实际 html 是

```
<img alt="alt text" src="/Images/someimage.jpg"> 
```

代替

```
<img alt="alt text" src="http://img.cdn.com/someimage.jpg"> 
```

我如何让更新面板正确解析输出？

提前致谢

* * *

编辑：我在这一点上的猜测是它必须对页面生命周期做一些事情......或者也许调用重写模块的顺序......将保持更新

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T17:59:46.283

使用 UpdatePanel 时服务器返回的响应内容类型是 text/plain 而不是 text/html。

您列出的 ResponseIsHtml 前提条件将仅匹配 text/html 内容，因此这就是不重写 UpdatePanel 响应的原因。

如果您修改输入正则表达式以捕获文本/纯文本，那么您的内容将被重写，因为它应该：

```
<preConditions>
  <preCondition name="ResponseIsHtml">
    <add input="{RESPONSE_CONTENT_TYPE}" pattern="^text/[html|plain]"/>
    <add input="{URL}" pattern="\.axd.*$" negate="true"/>
  </preCondition>
</preConditions> 
```

不幸的是，这样做有一个问题，我还没有找到解决方案 - 重写响应会导致 UpdatePanel ajax 管理器抛出 ys.WebForms.PageRequestManagerParserErrorException。

# vim - Vim：如何编写一个搜索当前缓冲区的函数？

> ID：15632724
> 
> 赞同：1
> 
> 时间：2013-03-26T08:46:54.930
> 
> 标签：vim

我正在尝试在 Vim 中编写一个函数，该函数在当前缓冲区中搜索特定模式并返回它。但是，我失败得很厉害。基本上，我想要的是一个函数，它返回我正在使用的文件的（PHP）命名空间。命名空间在文件本身中定义：

```
namespace Foo\Bar; 
```

我想要的是一个将`Foo\Bar`部分作为字符串返回的函数。即搜索喜欢`/namespace\s\([^;]\+\)`并返回第一个子匹配的东西。

编辑：由于我得到的帮助，这是我构建的功能：

```
func! PhpNamespace()
    let l:lnr = 0
    while l:lnr < line('$')
        let l:str = matchstr(getline(l:lnr), '^\s*namespace\s\+[^;]\+')
        if len(l:str)
            return substitute(l:str, '^\s*namespace\s\+', '', '')
        endif
        let l:lnr = l:lnr + 1
    endwhile

    return ''
endfunc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:04:09.193

一种选择是使用`searchpos()`，它可以让您获得起始位置；然后，您需要自己提取文本。这既快速又简单，尤其是当您需要从光标位置向前/向后搜索时。有了`'n'`标志，光标位置不会改变。否则，您必须保存并恢复光标位置 ( `getpos('.')`, `setpos('.', saved_cursor)`)。

对于您的问题，看起来命名空间声明可能位于文件的开头，并且仅限于一行。然后，您还可以在循环中获取单独的行`getline(lnum)`并使用 提取文本`matchstr()`，并在获得后跳出循环。

# xml - Hadoop 中的 XML 处理失败

> ID：15632725
> 
> 赞同：-1
> 
> 时间：2013-03-26T08:47:00.490
> 
> 标签：xml, hadoop, mapreduce

我对这个领域真的很陌生。通过引用[http://java.dzone.com/articles/hadoop-practice](http://java.dzone.com/articles/hadoop-practice)我做了 [https://github.com/studhadoop/xmlparsing-hadoop/blob/master/XmlParser11.java](https://github.com/studhadoop/xmlparsing-hadoop/blob/master/XmlParser11.java)

并创建 jar 文件，然后运行 ​​mapreduce pgm。我的 xml 文件是

```
<configuration>
    <property>
            <name>dfs.replication</name>
            <value>1</value>
            <type>tr</type>
    </property>
</configuration> 
```

和

```
root# javac -classpath /var/root/hadoop-1.0.4/hadoop-core-1.0.4.jar -d xml11 XmlParser11.java

root# jar -cvf /var/root/xmlparser11/xmlparser.jar -C xml11/ .

root# bin/hadoop jar /var/root/xmlparser11/xmlparser.jar com.org.XmlParser11 /user/root/xmlfiles/conf.xml /user/root/xmlfiles-outputjava3 
```

更新

```
13/03/30 09:39:58 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
13/03/30 09:39:58 INFO input.FileInputFormat: Total input paths to process : 1
13/03/30 09:39:58 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
13/03/30 09:39:58 WARN snappy.LoadSnappy: Snappy native library not loaded
13/03/30 09:39:58 INFO mapred.JobClient: Running job: job_201303300855_0004
13/03/30 09:39:59 INFO mapred.JobClient:  map 0% reduce 0%
13/03/30 09:40:13 INFO mapred.JobClient: Task Id : attempt_201303300855_0004_m_000000_0, Status : FAILED
java.io.IOException: java.io.IOException: Type mismatch in key from map: expected org.apache.hadoop.io.Text, recieved java.lang.String
    at com.org.XmlParser11$Map.map(XmlParser11.java:186)
    at com.org.XmlParser11$Map.map(XmlParser11.java:148)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.io.IOException: Type mismatch in key from map: expected org.apache.hadoop.io.Text, recieved java.lang.String
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:1014)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.write(MapTask.java:691)
    at org.apache.hadoop.mapreduce.TaskInputOutputContext.write(TaskInputOutputContext.java:80)
    at com.org.XmlParser11$Map.map(XmlParser11.java:184)
    ... 9 more

attempt_201303300855_0004_m_000000_0: ‘&lt;property>
attempt_201303300855_0004_m_000000_0:             <name>dfs.replication</name>
attempt_201303300855_0004_m_000000_0:                 <value>1</value>
attempt_201303300855_0004_m_000000_0:             </property>‘
13/03/30 09:40:19 INFO mapred.JobClient: Task Id : attempt_201303300855_0004_m_000000_1, Status : FAILED
java.io.IOException: java.io.IOException: Type mismatch in key from map: expected org.apache.hadoop.io.Text, recieved java.lang.String
    at com.org.XmlParser11$Map.map(XmlParser11.java:186)
    at com.org.XmlParser11$Map.map(XmlParser11.java:148)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.io.IOException: Type mismatch in key from map: expected org.apache.hadoop.io.Text, recieved java.lang.String
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:1014)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.write(MapTask.java:691)
    at org.apache.hadoop.mapreduce.TaskInputOutputContext.write(TaskInputOutputContext.java:80)
    at com.org.XmlParser11$Map.map(XmlParser11.java:184)
    ... 9 more

attempt_201303300855_0004_m_000000_1: ‘&lt;property>
attempt_201303300855_0004_m_000000_1:             <name>dfs.replication</name>
attempt_201303300855_0004_m_000000_1:                 <value>1</value>
attempt_201303300855_0004_m_000000_1:             </property>‘
13/03/30 09:40:25 INFO mapred.JobClient: Task Id : attempt_201303300855_0004_m_000000_2, Status : FAILED
java.io.IOException: java.io.IOException: Type mismatch in key from map: expected org.apache.hadoop.io.Text, recieved java.lang.String
    at com.org.XmlParser11$Map.map(XmlParser11.java:186)
    at com.org.XmlParser11$Map.map(XmlParser11.java:148)
    at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.io.IOException: Type mismatch in key from map: expected org.apache.hadoop.io.Text, recieved java.lang.String
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:1014)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.write(MapTask.java:691)
    at org.apache.hadoop.mapreduce.TaskInputOutputContext.write(TaskInputOutputContext.java:80)
    at com.org.XmlParser11$Map.map(XmlParser11.java:184)
    ... 9 more

attempt_201303300855_0004_m_000000_2: ‘&lt;property>
attempt_201303300855_0004_m_000000_2:             <name>dfs.replication</name>
attempt_201303300855_0004_m_000000_2:                 <value>1</value>
attempt_201303300855_0004_m_000000_2:             </property>‘
13/03/30 09:40:37 INFO mapred.JobClient: Job complete: job_201303300855_0004
13/03/30 09:40:37 INFO mapred.JobClient: Counters: 7
13/03/30 09:40:37 INFO mapred.JobClient:   Job Counters 
13/03/30 09:40:37 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=27296
13/03/30 09:40:37 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0
13/03/30 09:40:37 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
13/03/30 09:40:37 INFO mapred.JobClient:     Launched map tasks=4
13/03/30 09:40:37 INFO mapred.JobClient:     Data-local map tasks=4
13/03/30 09:40:37 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=0
13/03/30 09:40:37 INFO mapred.JobClient:     Failed map tasks=1 
```

map-reduce 代码有什么问题？我该如何纠正它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:27:39.417

请使用 SAX 解析器或 Hadoop Streaming 来解析 XML。接下来，供您参考，请点击此链接。

[http://xmlandhadoop.blogspot.in/](http://xmlandhadoop.blogspot.in/) [http://www.undercloud.org/?p=408](http://www.undercloud.org/?p=408)

问候， Sudhakar Reddy

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:13:55.847

试试这个命令看看

```
root# bin/hadoop fs -cat /user/root/xmlfiles-outputjava3/part-r-00000 
```

是否有所需的输出。您指定的输出是 Map Reduce 在 HDFS 中运行时获得的标准输出。

**更新**

你需要把 System.out.println

```
if (currentElement.equalsIgnoreCase("name")) {
    propertyName += reader.getText();
    System.out.println(propertyName);
} else if (currentElement.equalsIgnoreCase("value")) {
    propertyValue += reader.getText();
    System.out.println(propertyValue);
} 
```

查看正在设置的属性名称和值。如果不是，您需要找出原因吗？

**更新 2**

```
context.write(propertyName.trim(), propertyValue.trim()); 
```

propertyName 和 propertyValue 是 String，但您已声明 Mapper 以将 Text 输出为键和值。

改成这样。

```
Text name = new Text();
Text value = new Text();
name.setText(propertyName.trim());
value.setText(propertyValue.trim());
context.write(name, value); 
```

# jquery - 需要特定的计数 被点击的标签

> ID：15632728
> 
> 赞同：0
> 
> 时间：2013-03-26T08:47:14.263
> 
> 标签：jquery

```
<ul>
    <li><div><a href="#">line a</a></div></li>
    <li><div><a href="#">line b</a></div></li>
    <li><div><a href="#">line c</a></div></li>
    <li><div><a href="#">line d</a></div></li>
    <li><div><a href="#">line e</a></div></li>
</ul> 
```

我需要的输出是获取`<li>`标签的位置（计数）。我不能用`index()`这个。例如，如果我点击“Line a”，我需要得到的输出是“1”，对于“Line b”，我需要“2”；等等。

我不能使用索引（）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:49:19.570

您*可以*使用索引：

```
$('li a').click(function(){
   console.log('index is ' + ($(this).closest('li').index()+1));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:15:34.073

```
$('a').click(function(){
   var li = $(this).parent().parent(); //current li
   var ul = li.parent().children(); //all ul children li's
   alert('Index: ' + ul.index(li));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:56:18.023

`.index()`如果您相对于单击的元素使用它应该可以正常工作：`$('a').index(this)`

示例代码：

```
$(document).ready(function () {
    $('a').on('click', function() {
        alert($('a').index(this)+1);

        return false;
    });
}); 
```

jsfiddle：http: [//jsfiddle.net/vjV7Y/10/](http://jsfiddle.net/vjV7Y/10/)

注意：我添加了`+1`因为`index()`返回`0`第一个元素而不是`1`.

# java - 我们可以显式调用垃圾收集器吗？

> ID：15632734
> 
> 赞同：15
> 
> 时间：2013-03-26T08:47:31.300
> 
> 标签：java, garbage-collection

我的应用程序有很多迭代。到目前为止，我还没有遇到任何内存问题。但是从代码级别我可以怀疑很少有地方会导致内存泄漏和内存不足的问题。我正在考虑手动调用垃圾收集器。手动调用垃圾收集器是一种好习惯吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-26T08:48:40.173

您可以使用以下方式调用垃圾收集器：

```
System.gc(); 
```

但这并不意味着它会立即执行。JVM 决定何时执行它。一般来说，如果 JVM 即将抛出`OutOfMemoryError`，调用`System.gc()`不会阻止它。更好地调查为什么你泄漏了这么多内存并一路清理它。

**Java文档**：

> 调用 gc 方法表明 Java 虚拟机花费精力回收未使用的对象，以使它们当前占用的内存可用于快速重用。当控制从方法调用返回时，Java 虚拟机已尽最大努力从所有丢弃的对象中回收空间

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-26T08:51:05.310

> 手动调用垃圾收集器是一种好习惯吗？

不，这绝对不是好习惯。

您可以使用`System.gc()`. 请注意，这并不能保证调用垃圾收集器 - 它只会向系统提示进行垃圾收集可能是一个好主意。

Oracle JVM 中的垃圾收集器包含许多复杂的逻辑来确定何时清理以及清理什么。调整它需要有关其工作原理的详细信息。仅仅在你的程序中放一个`System.gc()`地方不太可能有很大帮助，事实上，它甚至会使情况变得更糟。

有关如何使用 Java SE 6 调整垃圾收集的详细信息，请参阅[Java SE 6 HotSpot Virtual Machine Garbage Collection Tuning 。](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-26T09:01:09.853

是的，您可以使用显式调用垃圾收集器

```
System.gc(); 
```

但是发生的情况是您不能命令 JVM 立即进行垃圾收集。JVM 自行决定何时进行垃圾收集。因此手动调用它不是一个好主意。

此外，关于`OutOfMemoryException`进行手动垃圾收集不会帮助您防止异常，因为 JVM 在回收它可以回收的所有内存后抛出此异常。它有一些非常复杂的算法来确定何时以及如何执行垃圾收集。所以我的建议是，如果你得到了`OutOfMemoryException`然后重新检查你的程序，使其更高效或增加堆空间。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-26T08:57:20.977

您可以显式调用垃圾收集器，但 JVM 决定是否处理该调用。理想情况下，**您永远不应该编写依赖于垃圾收集器调用的代码。**

JVM 在内部使用一些算法来决定何时进行此调用。当您使用**System.gc() 进行调用时，它只是对 JVM 的请求，**而 JVM 可以随时决定忽略它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-26T08:55:10.400

不管你是否可以手动触发垃圾收集器（以及不同级别的收集），以及这对性能有什么影响（这确实是[一个值得讨论的话题](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)），它都不会阻止 OutOfMemoryErrors，因为当 JVM 大约为了耗尽内存，它无论如何都会进行最彻底的收集。只有在该集合之后没有足够的内存可用时，它才会出错。即使您自己提前触发了收集，结果（回收的内存量）也是一样的。

更频繁地运行垃圾收集无法修复内存泄漏。

它们必须在你的程序中修复（停止引用你不再需要的东西），或者（最坏的情况，如果它是“真正的”泄漏）在 JVM 或运行时库本身中（但真正的内存管理错误不应该经过这么多年的服务不再存在）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-26T08:56:14.637

调用 System.gc() 不保证任何 GC。如果确实需要内存，则会收集垃圾。
您可以在这里查看不同的垃圾收集器。
[http://javarevisited.blogspot.in/2011/04/garbage-collection-in-java.html](http://javarevisited.blogspot.in/2011/04/garbage-collection-in-java.html)

您可以根据需要在命令行参数中包含任何这些 GC。

# wordpress - 自定义菜单链接在类别页面中不起作用

> ID：15632738
> 
> 赞同：0
> 
> 时间：2013-03-26T08:47:49.027
> 
> 标签：wordpress, menu, sidebar

自定义菜单链接未显示在类别页面中。当我检查来源时，它向我展示了这样的内容。

```
<div class="sidebar-widget">
 <h1 class="widget-title">Popular Categories</h1>
  <div class="menu-cus_menu-container">
    <ul id="menu-cus_menu" class="menu"></ul>
  </div>
</div> 
```

我为我的主页调用的相同功能。但它工作正常。以下代码在`sidebar.php`

```
<?php
    if ( is_active_sidebar( 'sidebar-hompage-widget-area' ) && is_home() ) {
        dynamic_sidebar( 'sidebar-hompage-widget-area' );
    }
    if ( is_active_sidebar( 'sidebar-category-widget-area' ) && is_category() ) {
        dynamic_sidebar( 'sidebar-category-widget-area' );
    }
    if ( is_active_sidebar( 'sidebar-left-widget-area' ) ) {
        dynamic_sidebar( 'sidebar-left-widget-area' );
    }
?> 
```

请帮助我找到正确的解决方案或建议我找出我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:48:24.893

据我认为你有一个类别页面而不是 category.php 或 archive.php 文件。is_category() 函数仅适用于 category.php 或 archive.php 文件。尝试使用 is_page('category') 而不是使用 is_category。

有关 is_category() 的更多信息，请参阅[http://codex.wordpress.org/Function_Reference/is_category](http://codex.wordpress.org/Function_Reference/is_category)。

# c# - JSON数据错误

> ID：15632747
> 
> 赞同：0
> 
> 时间：2013-03-26T08:48:10.310
> 
> 标签：c#, asp.net, json, jquery

嗨，我有一个 Ajax 的 Json 调用，代码是

```
 $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "Voyage.aspx/VoyageVessel_Set",
            data: "{Action:'" + "Set" + "',VesselID:'" + "1" + "',VoyageMasterID:'" + "1" + "',StartTerminalID:'" + "1" + "',LastTerminalID:" + "" + ",EffectiveStartDate:'" + "09/09/09" + "',EffectiveEndDate:'" + "09/09/09" + "',PreviousVoyageID:'" + "1" + "',NextVoyageID:'" + "1" + "',DefaultVoyage:'" + "0" + "',Status:'" + "true" + "'}",
            async: true,
            dataType: "json",
            success: function (data) {

                try {
                    alert("Success for ADD button");
                    //  $('#dvVesselTaggerInfo').html(html);
                } catch (ex) {
                    alert(ex);
                }
            },
            error: function (msg) {
                alert(error);
            }
        }); 
```

由于我试图给出我的方法的数据没有调用，我希望我以正确的格式编写它，但我仍然无法理解问题是什么，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:59:29.707

在你的代码中

> 数据：“{Action:'”+“Set”+“',VesselID:'”+“1”+“',VoyageMasterID:'”+“1”+“',StartTerminalID:'”+“1”+“ ',LastTerminalID:" + "" + ",EffectiveStartDate:'" + "09/09/09" + "',EffectiveEndDate:'" + "09/09/09" + "',PreviousVoyageID:'" + "1 " + "',NextVoyageID:'" + "1" + "',DefaultVoyage:'" + "0" + "',状态:'" + "true" + "'}",

一般来说，json数据中的每个key和value都应该有引号，例如：

```
{"Action" : "add", "VesselID", "1"} 
```

希望能帮到你:)

# android - Android中的错误“数据集和渲染器不应为空，并且应具有相同的系列数”

> ID：15632748
> 
> 赞同：1
> 
> 时间：2013-03-26T08:48:18.667
> 
> 标签：android, charts, achartengine

我正在尝试使用 AChartEngine 库在 sqlitedatabase 中显示包含数据的图表。我在数据库中有两条记录。有一条记录时显示的条形图。但是有两条数据记录，它说，“数据集和渲染器不应该为空，并且应该有相同数量的系列”。我不明白这一点。

我的代码是，

```
 Button ReportGraph = (Button) findViewById(R.id.ReportGraph);
    ReportGraph.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            GraphicalView GraphChartView = ChartFactory.getBarChartView(
                    getApplicationContext(), getWaterElectricityReading(),
                    getDemoRenderer(), Type.DEFAULT);
            // Intent intent=ChartFactory.getLineChartIntent(this,
            // getDemoDataset(), getDemoRenderer());
            // startActivity(intent);
            if (GraphChartView != null) {
                GraphChartView.repaint();
            }
            relChartView.addView(GraphChartView);
            mainLayout.setVisibility(View.GONE);
            relChartView.setVisibility(View.VISIBLE);

        }
    });

private XYMultipleSeriesDataset getWaterElectricityReading() {
    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

    SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-mm-dd", Locale.US);
    SimpleDateFormat df2 = new SimpleDateFormat("MMM dd yyyy");

    Date StartDate;
    Date EndDate;
    String Pastdateformat = "";
    String CurrentDateFormat = "";

    SQLiteDatabase DB = Context
            .openOrCreateDatabase("WaterElectricityReadingDataBase.db",
                    MODE_WORLD_READABLE, null);
    Cursor c = DB
            .rawQuery(
                    "select ReadingValue,strftime('%m/%d/%Y',StartDateTime) StartDateTime,strftime('%m/%d/%Y',EndDateTime) EndDateTime from WaterElectricity order by StartDateTime desc ",
                    null);
    int rowCount = c.getCount();

    if (c != null) {
        if (rowCount > 0) {
            if (c.moveToFirst()) {
                do {
                    String ReadingValue = c.getString(c
                            .getColumnIndex("ReadingValue"));
                    String PastDate = c.getString(c
                            .getColumnIndex("StartDateTime"));
                    String CurrentDate = c.getString(c
                            .getColumnIndex("EndDateTime"));
                    try {
                        StartDate = df2.parse(PastDate);
                        Pastdateformat = sdf1.format(StartDate);

                        EndDate = df2.parse(CurrentDate);
                        CurrentDateFormat = sdf1.format(EndDate);
                    } catch (Exception e) {

                    }
                    XYSeries series = new XYSeries(
                            "WaterElectricityReading");
                    double ReadingVal = Double.parseDouble(ReadingValue);
                    series.add(rowCount, ReadingVal);
                    XYMultipleSeriesRenderer render = new XYMultipleSeriesRenderer();

                    dataset.addSeries(series);
                    rowCount++;
                } while (c.moveToNext());
            }
        }
    }
    return dataset;
}

private XYMultipleSeriesRenderer getDemoRenderer() {
    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
    renderer.setAxisTitleTextSize(12);
    renderer.setChartTitleTextSize(12);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);
    renderer.setPointSize(5f);
    renderer.setMargins(new int[] { 20, 30, 15, 0 });
    XYSeriesRenderer r = new XYSeriesRenderer();
    r.setColor(Color.GREEN);
    r.setPointStyle(PointStyle.DIAMOND);
    r.setFillBelowLine(false);
    r.setFillPoints(true);
    renderer.addSeriesRenderer(r);
    setChartSettings(renderer);
    return renderer;
}

private void setChartSettings(XYMultipleSeriesRenderer renderer) {
    renderer.setChartTitle("Chart demo");
    renderer.setXTitle("x values");
    renderer.setYTitle("y values");
    renderer.setApplyBackgroundColor(false);
    renderer.setRange(new double[] { 0, 6, -70, 40 });
    renderer.setFitLegend(false);
    renderer.setAxesColor(Color.BLACK);
    renderer.setShowGrid(true);
    renderer.setXAxisMin(0);
    renderer.setXAxisMax(10.5);
    renderer.setYAxisMin(0);
    renderer.setZoomEnabled(false);
    renderer.setYAxisMax(1000);
} 
```

对于两条记录，我希望显示两个条形图。任何人都可以指出错误。

任何帮助将不胜感激！！

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T11:43:08.103

您的图表应该使用一个 single`XYMultipleSeriesDataset`和一个 single来构建`XYMultipleSeriesRenderer`。

`XYMultipleSeriesDataset`应该包含与 中一样多`XYSeries`的内容。`XYSeriesRenderer``XYMultipleSeriesRenderer`

`XYSeries`在您的代码中，您正在为每条记录创建一个，这可能是错误的。除非您有充分的理由不这样做，否则数据应该在同一个系列中。但是，如果您添加多个，`XYSeries`则`XYSeriesRenderer`每个`XYSeries`.

# javascript - 使用 JSON 自定义多个系列的 Highcharts

> ID：15632751
> 
> 赞同：1
> 
> 时间：2013-03-26T08:48:26.833
> 
> 标签：javascript, json, highcharts

我想从一个有 4 列（日期、打开事件、关闭事件和进行中事件）的 json 文件在我的图表中添加多个系列。[我可以用打开的事件数（ http://jsfiddle.net/269us/](http://jsfiddle.net/269us/)
） 显示我的图表，但我找不到 JSON 文件的第 3 列和第 4 列。

这是我的 JSON 文件的结构：

```
[[1325462400000,3,12,14]
 [1325548800000,7,14,8]
 [1325635200000,10,11,24]
 [1325721600000,21,13,16]
 [1325808000000,13,15,9]
 [1325894400000,2,15,4]
 [1326067200000,10,13,15]] 
```

我想通过这种类型来自定义每个系列（打开、关闭、进行中）

```
var date = []
   open = []
   close = []
   inprogress = []
   datalength = data.length;

for (i = 0; i <dataLength; i + +) {
    date.push ([
         data [i] [0]
    ]);

    open.push ([
         data [i] [1],
    ]);

    close.push ([
         data [i] [2],
    ]);

    inprogress.push ([
         data [i] [3],
    ]);

    }

    series: [{
       type: 'spline',
       name: 'open',
       data: open,
       dataGrouping {
              units: groupingUnits
       }
   } {
       type: 'column',
       name: 'close',
       data: close,
       dataGrouping {
              units: groupingUnits
       }

      .............
      .............

   }] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:03:01.940

我认为您正在尝试创建 3 个数据数组以在 3 个系列中使用（打开、关闭和进行中）。尝试这样的事情：

```
for (i = 0; i <dataLength; i + +) {
    var date = data[i][0];
    open.push ([
         date,
         data[i][1]
    ]);

    close.push ([
         data,data[i][2] //data instead of dat.
    ]);

    inprogress.push ([
         date,data[i][3]
    ]);
} 
```

您现在应该可以将这 3 个数组用作您的系列中的数据：

```
series: [{
   type: 'spline',
   name: 'open',
   data: open,
   dataGrouping {
          units: groupingUnits
   }
},
{
   type: 'column',
   name: 'close',
   data: close,
   dataGrouping {
          units: groupingUnits
   }
},
{
   type: 'line',
   name: 'inprogress',
   data: inprogess,
   dataGrouping {
          units: groupingUnits
   }
} 
```

# php - yiiboilerplate 中的常用模块？

> ID：15632753
> 
> 赞同：0
> 
> 时间：2013-03-26T08:48:45.177
> 
> 标签：php, yii, yii-extensions, project-structure

是否可以在 yiiboilerplate 公共部分中放置和运行模块？如果可以，它是如何配置的？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:03:29.500

只需使用路径别名配置模块，据我所知，有一个`root`指向项目根目录的别名。

```
'foo' => array(
    'class' => 'root.common.modules.foo.FooModule',
), 
```

你也可以从我的样板文件中查看[这个配置](https://github.com/phundament/app/blob/0fc0706888465d3f9d9cbdfea2fc12e43098209e/app/config/main.php#L76)文件，它也是如此。

# c - 使用 realloc 扩展数组（几次） - 崩溃

> ID：15632757
> 
> 赞同：0
> 
> 时间：2013-03-26T08:49:04.313
> 
> 标签：c

```
int Add_Edge_To_Vertex(int vertexFromId,int vertexToId){
    vertex vertexTo=vertices[vertexToId];
    if(vertexTo.edgesInArrLength == vertexTo.numOfEdgesIn){ //multiply this vertex arr of edges if needed
        vertices[vertexToId].edgesInArrLength = (vertices[vertexToId].edgesInArrLength)*2;
        tmpVertexEdges = (edge*)realloc((vertices[vertexToId].edges),(vertices[vertexToId].edgesInArrLength)*sizeof(edge));
        if(tmpVertexEdges != NULL) {
            vertices[vertexToId].edges = tmpVertexEdges;
        }
        else
        {
            free(tmpVertexEdges);
            return 0;
        }
    }
}

typedef struct vertex
{
    char* name; //not unique
    int id; //unique
    edge* edges; //array  edges
    int outDegree;
    int edgesInArrLength;
    int numOfEdgesIn;
    double rank;
}vertex; 
```

这就是我初始化顶点的方式-

```
vertex res={(char *)malloc(strlen(name)*sizeof(char)),verticesCount,(edge*)calloc(1, sizeof(edge)),0,1,0,1}; 
```

当边缘是这个结构时-

```
typedef struct edge
{
    int fromVertexId;
    int toVertexId;
    double weight;
}edge; 
```

当我尝试将 vertex.edges 数组加倍（第 3-12 行）时，程序在 realloc 部分崩溃并显示此错误消息 **- * 检测到 glibc****/home/froike/workspaceC/页面排名/调试/页面排名：malloc（）：内存损坏：0x00000000009711d0 ** **

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:52:36.097

我猜你没有初始化`edges`指针`struct vertex`，所以`realloc`调用试图重新分配一个无效的指针？但由于你没有给我们所有的代码，我不能确定。*

# c - 实现文件描述符

> ID：15632758
> 
> 赞同：1
> 
> 时间：2013-03-26T08:49:14.823
> 
> 标签：c, linux, kernel, kernel-module

我将如何实现自己的文件描述符？假设我有一个控制某些硬件的内核模块，并且我想通过 read() 和 write() 向用户空间公开与该硬件通信的能力。不想使用 IOCTL 或 netlink 或其他用户空间-内核空间方法。我需要重新编译内核还是可以通过编写内核模块来完成。

我知道创建文件描述符需要用户空间的机制来告诉内核空间在任务的文件结构中创建一个条目（即等效于 open()、eventfd() timerfd()、socket() 的函数）。我可以通过 IOCTL 实现（这样我就不必重新编译内核），但是我如何破解 read() 和 write() - 我之前使用 LD_PRELOAD 修补过它们，这是唯一的方法吗？不想重新编译内核！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:00:04.823

konrad.kruczynski 是对的！

使用字符设备作为用户空间机制与您的硬件进行通信，并在 /dev 文件系统中创建一个设备，例如 /dev/hardware_type_A。

然后编译 && 将你的模块加载到内核中，如果你的所有代码都很好，那么内核将在 /dev/ 中创建一个名为 /dev/hardware_type_A 的字符设备。

然后您可以像使用其他设备或文件一样使用读取、写入、打开、关闭调用来控制您的硬件。

如果您真的说您不想通过 ioctl 控制它，那么您必须需要一个新协议来使用 write 发送数据，并且您的驱动程序会解压缩该数据并代表您的程序在用户中控制硬件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:59:13.997

我不确定我是否理解您的所有问题。尽管如此：

*   您绝对可以将其作为内核模块；
*   您可能想创建一个字符设备（问题的第二部分）；
*   对于 char 设备，您可以实现所需的系统调用；如果你只想拥有`read`-`write`没问题；

看这[本书](http://lwn.net/Kernel/LDD3/)的第三章（和其他） 。

# windows - CFileDialog::OnInitDialog() 不调用

> ID：15632788
> 
> 赞同：5
> 
> 时间：2013-03-26T08:51:07.887
> 
> 标签：windows, visual-c++, mfc, cfiledialog

我正在使用从`CFileDialog`. 问题是，`OninitDialog()`之前没有被调用`DoModal()`。

我已经`CFileDialog`在`OninitDialog()`.

我正在使用带有 Win7 操作系统的 VS 2012。

我找不到，出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-23T17:21:22.073

我今天遇到了同样的问题；我想我找到了一个有效的解决方案，在你的类的构造函数中设置 m_bVistaStyle = FALSE; 这样做之后，我得到了 OnInitDialog 并且我能够很好地自定义这个对话框。

```
CMyOpenDlg::CMyOpenDlg(LPCTSTR lpszDefExt, LPCTSTR lpszFileName,
      DWORD dwFlags, LPCTSTR lpszFilter, CWnd* pParentWnd) :
      CFileDialog(TRUE, lpszDefExt, lpszFileName, dwFlags, lpszFilter, pParentWnd)
{
   m_bVistaStyle = FALSE; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:29:57.557

[Microsoft 文档](http://msdn.microsoft.com/en-us/library/dk77e5e7%28v=vs.90%29.aspx)说`OnInitDialog`Windows Vista 不支持此功能。Windows 7 也是如此（可能也适用于 Windows 8）。

# jquery - jQuery幻灯片插件源码

> ID：15632790
> 
> 赞同：4
> 
> 时间：2013-03-26T08:51:12.510
> 
> 标签：jquery, jquery-plugins, slideshow

我正在为我的滑块使用这个插件

[http://tympanus.net/codrops/2013/01/28/flipping-circle-slideshow/](http://tympanus.net/codrops/2013/01/28/flipping-circle-slideshow/)

演示链接：[http ://tympanus.net/Development/CircleFlipSlideshow/](http://tympanus.net/Development/CircleFlipSlideshow/)

该插件是 Beautify，但它似乎没有内置自动幻灯片功能。我试图理解和修改它，以便我可以让它在几秒钟后自动旋转。我之前没有创建过一个 jQuery 插件，所以在寻找一些帮助以开始使用它。

插件的来源在这里： http: [//pastebin.com/3vLfWANc](http://pastebin.com/3vLfWAnc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:54:03.193

[你可以在这里](http://docs.jquery.com/Plugins/Authoring)找到关于如何在 jQuerys 自己的主页上制作 jQuery 插件的信息

我还制作了一个插件教程，你可以在[这里找到](http://boxsheep.com/javascript-tutorials/jQuery-Plugin-tutorial_How-to-make-a-jQuery-plugin-part-1/)

希望这会有所帮助，祝你学习顺利:)

编辑：这有点小技巧，但您可以在第 207 行添加一个 setInterval 方法，如下所示：

```
 $navLeft.find( 'span' ).on( 'click.flipshow touchstart.flipshow', function() {
    self._navigate( $( this ), 'left' );
  } );
  setInterval(function() {
    self._navigate( $( this ), 'left' );
  },4000); 
```

我还没有测试过，但它可能会起作用。

# visual-studio - Visual Studio 2012 调试器在调试 Azure 项目时突然停止

> ID：15632792
> 
> 赞同：2
> 
> 时间：2013-03-26T08:51:24.593
> 
> 标签：visual-studio, debugging, azure, visual-studio-2012, visual-studio-debugging

当我在本地调试我的 Azure 项目（1 个 Web + 1 个工作角色实例）时，调试器通常会停止并且角色实例正在重新启动。

我不知道为什么会发生这种情况，没有未捕获的异常，如果我在不设置断点的情况下运行项目，一切正常。但是，当我设置断点并使用 Step Over / Step into 移动代码时，调试器只是以随机间隔停止。

有谁知道是什么原因造成的/我在哪里可以找到可能对此有所了解的其他日志？

**更新：**

我之前忽略了这一点，或者它没有记录到输出窗口，但我现在收到以下错误：

```
First-chance exception at 0x000007fde4a4167f in WaWorkerHost.exe: 0xC0000005: Access violation reading location 0xfffffffffffffff8.
The Common Language Runtime cannot stop at this exception. Common causes include: incorrect COM interop marshalling, and memory corruption. To investigate further, using native-only debugging. 
```

我很确定这不是我的应用程序的错——正如我所提到的，当我不设置断点并手动单步执行时，我正在调试的确切代码运行良好。

有任何想法吗？

**更新 2**：

从引导程序（旧）日志：

```
[00012264:00001260, 2013/03/26, 11:37:19.777, 00100000] <- CRuntimeClient::OnRoleStatusCallback(0x0000006BD7718C00) =0x800706be
[00012264:00008432, 2013/03/26, 11:37:19.804, 00100000] <- CRuntimeAgent::RemoveEndpointRegistration(0x0000006BD76F60E0) =0x80070005
[00012264:00001260, 2013/03/26, 11:37:19.811, 00040000] Client process WaWorkerHost.exe is the role host.
[00012264:00008432, 2013/03/26, 11:37:19.830, 00100000] <- CRuntimeAgent::UnregisterEndpoint(0x0000006BD76F60E0) =0x80070005
[00012264:00001260, 2013/03/26, 11:37:19.830, 00080000] Failed to contact the role host process. Treat role as unhealthy. 
```

该文件以此结尾——在下一个引导程序日志中，正在记录角色实例的启动。是不是调试会阻止引导程序联系角色，从而确定它们不健康并且必须重新启动？

**最后更新：**

我擦除了我的项目并从存储库中重新签出。事实证明，我的一个类库中缺少一个引用。缺少的引用从未显示为编译错误，可能是因为某处放置了旧版本。

对于发现自己处于类似情况的所有其他人，我只能建议尝试做同样的事情：彻底清理他们的代码库，看看问题是否消失。在我搜索的所有日志中，我从未遇到过“MissingReferenceException”——今天会为我节省很多时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:09:22.950

[在 Windows Azure 中启用诊断](https://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/)

**更新 1**

您可以尝试启用日志

转到**%USERPROFILE%\AppData\Local\DevelopmentStorage**目录。你会看到两个文件 ![在此处输入图像描述](../Images/ad39500e6ca24956a5b3ac05fbd41e47.png)

打开文件**DevelopmentStorage.201210.config**并将**LoggingEnabled**更改为 true。

![在此处输入图像描述](../Images/7daa2c84579ab5f040e3a1f9d6ea8686.png)

参考：

[Windows Azure 辅助角色崩溃](http://blinditandnetworkadmin.blogspot.com/2012/05/windows-azure-worker-role-crashing.html) [WaWorkerHost.exe 崩溃角色](http://social.msdn.microsoft.com/Forums/en-US/windowsazuretroubleshooting/thread/543da280-2e5c-4e1a-b416-9999c7a9b841)

**更新 2**

**WaHostBootstrapper**日志位于**C:\Resources\Directory\DeploymentID.Role.DiagnosticStore\WaHostBootstrapper.log**

其他日志：

**WaWebHost** *C:\Resources\Temp\Guid.Role\RoleTemp\WaWebHost.log*

**WaIISHost** *C:\Resources\Temp\DeploymentID.Role\RoleTemp\WaIISHost.log*

**IISConfigurator** *C:\Resources\Temp\DeploymentID.Role\RoleTemp\IISConfigurator.log*

**IIS 日志** *C:\Resources\Directory\Guid.Role.DiagnosticStore\LogFiles\W3SVC1*

**Windows 事件日志** *D:\Windows\System32\Winevt\Logs*

**更新 3**

在 Azure 应用程序中定义本地存储会创建一个新文件夹，因此 Azure Compute Emulator 的路径是 %USERPROFILE%\AppData\Local\dftmp\

# node.js - 为什么在加载到浏览器之前需要先使用 node scrip.js

> ID：15632794
> 
> 赞同：-1
> 
> 时间：2013-03-26T08:51:32.887
> 
> 标签：node.js, setup-project

我处于学习阶段`node.js`。

我需要知道为什么在浏览器上看到实际结果之前我需要`node script.js` `command`先执行行？`cmd`

我已经`node.msi`在我的电脑上安装了安装程序，我也`wamp`正在运行服务器。

谁能指导我这是什么以及如何在不使用`CMD`代码的情况下直接运行它。

`Node.js`看起来很棒，但我怎样才能让它在实时服务器上运行呢？

我已经安装了`mysql`模块，经过 20-25 分钟的谷歌搜索后，我让它运行，但我无法直接在浏览器上访问它，我需要先从`CMD`.

是否有可能我可以运行节点 js 而无需使用 exe 文件的设置安装它。？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:27:51.233

node.js 安装为独立的可执行文件，不像 WAMP，Apache 服务器安装为 Windows 服务。正如评论所暗示的，node.js 与您当前的 WAMP 安装无关。

这使您可以灵活地在同一台机器上为应用程序的多个实例提供服务（当然还有负载平衡前端）。您可以使用包使您的节点应用程序作为服务运行[`winser`](https://npmjs.org/package/winser)。

不过，我还没有成功地做到这一点。

# ektron - Ektron 中的 EkException 类

> ID：15632798
> 
> 赞同：4
> 
> 时间：2013-03-26T08:51:52.977
> 
> 标签：ektron

我在 Ektron 8.6 工作

我正在尝试在我的 ektron 网站中使用 EkException 中的辅助函数。我尝试使用以下代码：

```
 Exception ex=new Exception("Test exception");
  EkException.LogException(ex,System.Diagnostics.EventLogEntryType.Information);

  LogEventEntry entry=new LogEventEntry();
  entry.EventName="Test event";
  entry.Timestamp=DateTime.Now;
  entry.UserID=22;
  entry.VisitorID="Test";
  EkException.AddEventEntry(entry);

  EkException.WriteToEventLog("Myapp",System.Diagnostics.EventLogEntryType.Information); 
```

我尝试以管理员权限执行上述代码，它不会抛出任何错误。但是事件查看器没有变化。

有人可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:02:11.823

您想使用该类：Ektron.Cms.Instrumentation；

Log.WriteMessage(“我的消息”, LogLevel.Verbose);

* * *

请记住，您必须在 web.config 中打开 LogLevel。

Web.config，将 LogLevel 更新为“4”。Instrumentation.config，将“Trace”添加到“Verbose”</p>

```
 <add switchValue="All" name="Verbose">
  <listeners>
    <add name="Event Log" />
   <add name="Trace" />
  </listeners> 
```

您也可以使用以下内容，但回顾一下您很可能没有看到任何事件的原因是因为日志级别

```
 Ektron.Cms.Instrumentation.Log.WriteError("error");
    Ektron.Cms.Instrumentation.Log.WriteWarning("warning");
    Ektron.Cms.Instrumentation.Log.WriteInfo("info"); 
```

# wix - wix - 根据功能安装先决条件 MSI

> ID：15632799
> 
> 赞同：1
> 
> 时间：2013-03-26T08:51:54.493
> 
> 标签：wix, wix3.5

我正在使用 Wix v3.5。我需要安装 MSI 作为特定功能的一部分。这可能吗？还是我必须升级到 3.6 并“烧掉”它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:57:53.160

不，不可能从另一个 .msi 中运行一个 .msi。这需要像 Burn 这样的引导程序/链接器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:58:39.220

Burn 最初是在 WiX v3.6 中引入的。它可以管理安装多个包作为链包的一部分。

# c++ - 将文件名替换为其内容的第一行

> ID：15632802
> 
> 赞同：0
> 
> 时间：2013-03-26T08:52:01.860
> 
> 标签：c++, file, filenames, rename

我有多个扩展名为 *.txt 的文件，在这些文件中我想读取它们的第一行并重命名为文件名。

例如：文件.txt

在这个文件中，第一行是：X_1_1.1.X_1_X

并将其重命名为：X_1_1.1.X_1_X.txt

我已经从其他项目中重写了这段代码，但是它将我的文件重命名为随机字母并且不知道如何更正它

```
#include<iostream>
#include<fstream>
using namespace std;
int main()

{
   int size=28000;
   string *test = new string[rozmiar];
   std::fstream file;
   std::string line;
   file.open("C:\\file.txt",std::ios::in);  
   int line_number=0;
   while((file.eof() != 1))
   {
    getline(file, line);
    test[line_number]=line;
    line_number++;
   }

   file.close();
   cout << "Enter line number in the file to be read: \n";
   cin >> line_number;
   cout << "\nYour line number is:";
   cout << test[0] << " \n";
   char newname[25];
   test[0]=newname;
   int result;
   char oldname[] ="C:\\file.txt";
   result= rename(oldname , newname);

   if (result == 0)
      puts ("File successfully renamed");
   else
      perror("Error renaming file");
} 
```

感谢帮助干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:13:37.393

不是直接回答您的代码，因为它看起来已经被处理了，但是假设您只需要第一行（没有错误检查），这应该可以满足您的要求

```
#include <fstream>
#include <string>

int main()
{
    static std::string const filename("./test.txt");

    std::string line;
    {
        std::ifstream file(filename.c_str()); // c_str() not needed if using C++11
        getline(file, line);
    }

    rename(filename.c_str(), (line + ".txt").c_str());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:56:12.350

您不会`newname`以任何方式进行初始化。这就是问题。

你想要这样的东西：

```
result= rename(oldname , test[0].c_str()); 
```

（并删除`newname`）。

在您的代码`newname`中完全未初始化，因此您在文件名中看到随机字符。

# ios6 - 归档应用内购买将 png 检测为 iOS6 上的可执行文件

> ID：15632803
> 
> 赞同：9
> 
> 时间：2013-03-26T08:52:04.953
> 
> 标签：ios6, png, in-app-purchase

我在 iOS6 上创建了一个包 In-App-Purchase。我将内容上传到苹果的服务器。数据包有一组 png 文件。如果我使用该选项：

```
Compress PNG Files = YES 
```

上传到服务器并在应用程序上下载的 png 已损坏，我无法打开它。如果我打开从应用程序下载的内容，我无法使用 GIMP 或 Photoshop 打开。

所以我放了：

```
Compress PNG Files = NO 
```

但是，当我尝试像上次一样上传内容时，在制作可分发内容时出现以下错误：

```
The archive for In-App-Purchase: 'com.myapp.ProjectName.myInAppPack' is invalid. The package contains an executable at 'Content/file3.png' 
```

此错误出现 2 次，但我有 10 个 png。我对所有这些都做了完全相同的步骤，但有 2 个被检测为可执行文件。

我确定这是标题的问题，如何编辑它们以避免这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T09:14:06.537

用 Exfiend 打开文件并比较后，我发现问题出在标题上。被检测为可执行文件的 png 具有 Photoshop 标头。我已经解决了创建新 png、复制图层、导出为 png 的问题。

然后，我只在 PNGs 文件上放置了读取标志：

```
chmod 444 file.png 
```

清理 inapppurchase 项目并将其存档后，它做得很好。

# eclipse - Maven - 如何从 Eclipse 中引用环境变量

> ID：15632804
> 
> 赞同：5
> 
> 时间：2013-03-26T08:52:06.417
> 
> 标签：eclipse, maven

我有一个 Maven 项目。在`pom.xml`我将环境变量称为`${env.MyProjectVersion}`. 在构建项目之前，我从命令提示符设置了变量的值 ( `export MyProjectVersion=1.0.0`)。构建成功，我将 maven 项目导入**eclipse**，**m2eclipse**尝试构建它失败：

> 无法下载 xyz-{$env.MyProjectVersion} 依赖项

**Eclipse**无法解析环境变量的值。有没有办法用 eclipse 指定环境变量值，以便它可以被 eclipse 中的 maven 插件选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-11T18:31:30.490

显然，Eclipse Maven 插件在 Maven 构建期间会忽略环境变量。一种可能的解决方法 - 根据您的情况可能会起作用 - 是使用 settings.xml 中的属性。唯一的缺点是您必须将这些变量定义为环境变量，并在 settings.xml 中再次定义

在我的回答中，我描述了以下场景。使用标准 maven 插件功能在 eclipse 中构建工件，并通过 maven 命令行另外构建相同的工件。同样在命令行构建期间，我直接引用存储库文件夹 mvn -Dmaven.repo.local=/PATH_TO_M2_FOLDER/repository/ -f parent.pom install

设置如下：您必须在 pom.xml 中添加属性以充当环境变量的代理。在命令行场景中，这些属性将被直接填充。在 Eclipse 场景中，属性必须由用户 settings.xml 通过定义配置文件来填充。

假设您有一个环境变量 $FOO 的属性。

在您的 maven settings.xml 中使用配置文件并定义 fooProperty。

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
    http://maven.apache.org/xsd/settings-1.0.0.xsd">
    <profiles>
        <profile>
            <id>default</id>
            <properties>
                <fooProperty>bar</fooProperty >
            </properties>
        </profile>
    </profiles>
    ...     
  <activeProfiles>
    <activeProfile>default</activeProfile>
  </activeProfiles>
</settings> 
```

然后，您只需将 Eclipse maven 插件指向您的用户设置。要让 CLI 正常工作，您必须在 pom.xml 中再次定义 fooProperty：${env.foo}

显然，eclipse maven 插件将 settings.xml 中的属性优先于 pom.xml 中的属性。不幸的是，我还没有想出通过环境变量在 settings.xml 中定义属性的方法。

在 pom.xml 中使用变量时，仅使用如下代理属性： ... ${fooProperty} ...

我正在使用 * Eclipse Mars: Release (4.5.0) * Embedded Maven: 3.3.3/1.6.0.20150526-2031 * OSX El Capitan: 10.11.4 (15E65)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T08:56:09.053

转到运行配置，转到环境选项卡，添加变量，它的值比变量的值将被解析

# jquery - PhoneGap iOS 切换窗口

> ID：15632808
> 
> 赞同：-1
> 
> 时间：2013-03-26T08:52:13.970
> 
> 标签：jquery, ios, cordova

我在 iOS PhoneGap 应用中切换窗口时遇到问题。我目前正在使用

```
window.changePage = "abt.html"; 
```

改变我的看法（尝试了一些其他的太喜欢 `$.mobile.changePage("abt.html", null, true, true);`或 `window.open('abt.html', '_self');`）

屏幕加载，但我总是在屏幕底部看到一个小栏，显示打开的 URL、“完成”按钮和前进/后退箭头。

显然，我似乎使用了错误的方法，但即使经过研究，我也没有找到方法。打开新窗口是错误的尝试，我只需要切换视图的内容吗？

由于我对这一切都不熟悉（正如你们中的一些人可能已经建议的那样），我将不胜感激。

/edit：最初的意图是在单击按钮时从一个视图更改为另一个视图（就像我在普通 iOS 应用程序中所做的那样）。

谢谢，

布拉卢马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:09:20.303

对于那些有同样问题的人。我找到了一个使用 jQuery+Ajax 的解决方案。

```
$(document).ready(function(){
  $('#abt').click(function(){
    $('body').empty();
      $.ajax({
                     url:'abt.html',
                     cache:false
                     }).done(function(html){
                                        $("body").append(html);
                                     });
                    });
}); 
```

我现在只是删除我的 html-body 并插入我的 new-html-body 。

/edit：经过一段时间的研究，我建议使用 jQueryMobile 在 HTML 中使用 id 定义页面并使用 href 引用它们。

例子：

```
 <div data-role="page" id="SomeID">
     <div data-role="header" data-theme="b" data-position="fixed" data-id="footer">
     </div>
     <div data-role="content">
       <a href="#SomeOtherID" data-transition="slide"> </a>
     </div>
     <div data-role="footer" data-theme="b" data-position="fixed" data-id="footer">
     </div>
    </div>

    <div data-role="page" id="SomeOtherID">
     <div data-role="header" data-theme="b" data-position="fixed" data-id="footer">
     </div>
     <div data-role="content">
       <a href="#SomeID" data-transition="slide"> </a>
     </div>
     <div data-role="footer" data-theme="b" data-position="fixed" data-id="footer">
     </div>
    </div> 
```

希望对某人有所帮助。

# oracle - 我理解了代码，但不理解提到的选项

> ID：15632813
> 
> 赞同：0
> 
> 时间：2013-03-26T08:52:28.297
> 
> 标签：oracle, plsql, oracle10g

我被问到一个问题，答案在选项中。我们需要选择 2 个选项（多选题类型）。问题是“哪两个语句将成功调用此过程？”。正确的选项是（虽然我没有提到其他错误的选项）：

1.  `Execute upd_bat_stat;`
2.  `Execute upd_bat_stat(v_ab=gt;10,v_id=gt;31);`

我选择的第一个是正确的，但我没有选择第二个。我选择了别的东西。而且我没有得到第二个的编码。谁能告诉我第二个选项的含义？这里的“gt”是什么？

```
 create or replace procedure upd_bat_stat(v_id IN number default 10, 
                                              v_ab IN number default 4)
     is
     begin
        update player_bat_stat
        set at_bats = at_bats + v_ab
        where player_id = v_id;
        commit;
     end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:03:06.883

在 HTML 中，符号`&gt;`被翻译成`>`. 所以第二句要理解为：

```
Execute upd_bat_stat(v_ab => 10, v_id => 31); 
```

当然，这是在 PL/SQL 中调用过程的标准方法之一，例如：

```
SQL> BEGIN
  2     DBMS_OUTPUT.put_line(dbms_random.value(low => 0, high => 10));
  3  END;
  4  /

1.8144949728486423597614495316809370386 
```

进一步阅读：[实际参数的位置、命名和混合表示法](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/subprograms.htm#LNPLS00825)

从 11gR2 开始，您还可以在 SQL 中使用命名参数：

```
SQL> select dbms_random.value(low => 0, high => 10) res from dual;

RES
----------------------------
5.68503743363485069064449316 
```

# javascript - 两次编辑本地存储项返回未定义

> ID：15632814
> 
> 赞同：1
> 
> 时间：2013-03-26T08:52:29.643
> 
> 标签：javascript, jquery, local-storage

我正在创建一个待办事项列表，一切似乎都运行良好。我能够创建、删除和编辑项目。但是，如果我尝试编辑一个项目两次 - 它返回一个未定义的。

请看我的小提琴：http: [//jsfiddle.net/willwebdesigner/786Qu/17/](http://jsfiddle.net/willwebdesigner/786Qu/17/)

```
// Edit a task
$(document).on("click", "#tasks li a.edit", function() {

    var thisID = $(this).parent().attr("id");

    $(this).parent().html("<form><input class='taskEdit" + thisID + "' value=''><input type='submit' value='Edit me'></form>")
    .submit(function() {
         localStorage.setItem(thisID, $(".taskEdit" + thisID ).val());
        $(this).html(localStorage.getItem(thisID) + menuButtons);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:01:12.000

表单正在提交，在值可以存储在本地存储之前重新加载页面，一旦页面重新加载并尝试从本地存储中获取该值，它是未定义的。

为什么每次将值存储在本地存储中时都提交表单并重新加载页面？

并且提交功能绑定到`$(this).parent()`，而不是包含“编辑我”按钮的表单。

```
$(document).on("click", "#tasks li a.edit", function () {
    var thisID = $(this).parent().attr("id"),
        form = $("<form><input class='taskEdit" + thisID + "' value=''><input type='submit' value='Edit me'></form>");

    $(this).parent().empty().append(form);
    form.on('submit', function (e) {
        e.preventDefault();
        localStorage.setItem(thisID, $(".taskEdit" + thisID).val());
        $(this).html(localStorage.getItem(thisID) + menuButtons);
    });
}); 
```

[**固定小提琴**](http://jsfiddle.net/786Qu/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:44:25.523

我已经稍微修改了您的代码，因为新值存储在表单中并在删除项目时导致浏览器崩溃。

```
$(document).on("click", "#tasks li a.edit", function () {
    var thisID = $(this).parent().attr("id"),
        form = $("<form class='editForm'><input class='taskEdit" + thisID + "'   value=''><input type='submit' value='Edit me'></form>");

    $(this).parent().empty().append(form);
    form.on('submit', function (e) {
        e.preventDefault();
        localStorage.setItem(thisID, $(".taskEdit" + thisID).val());
        $(this).parent().html(localStorage.getItem(thisID) + menuButtons);
        $(this).remove('.editForm');
    });
}); 
```

# javascript - 使用 ActiveX 替代 XRM Javascript 调用 web 服务

> ID：15632821
> 
> 赞同：1
> 
> 时间：2013-03-26T08:53:07.693
> 
> 标签：javascript, web-services, activex, dynamics-crm-2011, xrm

从 IE 以外的浏览器调用 Web 服务时，我在 CRM javascript 上遇到问题。有关 Web 服务调用实现，请参见下面的代码。

```
function RetrieveMultipleEntity(targetEntity, conditionAttributeName, conditionAttributeValue, targetId, targetAttribute)
{
// Prepare variables to retrieve the contacts.
var authenticationHeader = GenerateAuthenticationHeader();

// Prepare the SOAP message.
// var xml = (the SOAP message)

var xHReq = new ActiveXObject("Msxml2.XMLHTTP");

xHReq.Open("POST", "/mscrmservices/2007/CrmService.asmx", false);
xHReq.setRequestHeader("SOAPAction","http://schemas.microsoft.com/crm/2007/WebServices/RetrieveMultiple");
xHReq.setRequestHeader("Content-Type", "text/xml; charset=utf-8");
xHReq.setRequestHeader("Content-Length", xml.length);
xHReq.send(xml);
// Capture the result.
var resultXml = xHReq.responseXML;

return resultXml;
} 
```

这一行有一个问题：

```
var xHReq = new ActiveXObject("Msxml2.XMLHTTP"); 
```

它可以在 IE 上正确运行，因为它可以使用 ActiveXObject，但不幸的是它在 Firefox/Chrome 上失败了。我正在寻找有关调用 Web 服务的替代方法的建议。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:00:11.053

尝试

```
var xHReq = new XMLHttpRequest(); 
```

它也适用于 IE7+

# python - 引导弹出窗口中的 Django 登录表单

> ID：15632831
> 
> 赞同：2
> 
> 时间：2013-03-26T08:53:43.557
> 
> 标签：python, ajax, django, twitter-bootstrap, django-forms

使用 django 1.5 + twitter 引导程序。

在每个页面上都有一个弹出下拉（引导）登录表单。使用正确的凭据进行身份验证工作良好。现在，我的问题 - 需要在同一页面上添加错误凭据的错误消息，而无需重新加载页面。它可以是模态窗口，或者如果它只是同一弹出窗口中的文本则更好。不知道如何做到这一点，没有重定向/重新加载。

一些代码：

## 视图.py：

```
def LoginRequest(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect(request.META.get('HTTP_REFERER', '/'))
    if request.method == 'POST':
        form = LoginForm(request.POST)
        if form.is_valid():
            email = form.cleaned_data['email']
            password = form.cleaned_data['password']
            user = authenticate(email=email, password=password)
            if user is not None:
                login(request, user)
                return HttpResponseRedirect(request.META.get('HTTP_REFERER', '/'))
            else:
                return render_to_response('/', {'form': form}, context_instance=RequestContext(request))
        else:
            return render_to_response('/', {'form': form}, context_instance=RequestContext(request))
    else:
        form = LoginForm()
        return render_to_response('/', {'form': form}, context_instance=RequestContext(request)) 
```

## 网址.py：

```
urlpatterns = patterns(
    'accounts.views',
    url(r'^signup/$', 'AccountRegistration'),
    url(r'^login/$', 'LoginRequest'),
    url(r'^logout/$', 'LogoutRequest'),
) 
```

## 表格.py：

```
class LoginForm(forms.Form):
        email = forms.CharField(label=(u'Email'), max_length=30)
        password = forms.CharField(label=(u'Pass'), widget=forms.PasswordInput(render_value=False), max_length=30) 
```

## 带有我的弹出窗口的模板片段：

```
<ul class="nav pull-right">
    {% if user.is_authenticated %}
    <li><a href="/profile/">{{ user }}</a></li>
    <li>
        <form style="margin:0;" action='/logout/' method="POST">
        {% csrf_token %}
            <input type="submit" value="Logout" class="btn btn-link" style="color:#777777;" /></li>
            <input type="hidden" name="next" value="{{ current_path }}" />
        </form>
    </li>
    {% else %}
    <li class="dropdown">
        <a class="dropdown-toggle" href="#" data-toggle="dropdown">Login <strong class="caret"></strong></a>
        <div class="dropdown-menu" style="padding: 15px; padding-bottom: 0px;">
            <form action='/login/' method="POST">
            {% csrf_token %}
                {% if form.errors %}
                    {{ form.errors}}
                {% endif %}
                <label for="id_email">Login:</label>
                <input type="text" name="email" id="id_email">
                <br />
                <label for="id_password">Pass:</label>
                <input type="password" name="password" id="id_password">
                <br />
                <input class="btn btn-primary" type="submit" value="Login" />
                <input type="hidden" name="next" value="{{ current_path }}" />
            </form>
        </div>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:56:54.533

如果您不想重新加载页面，则必须使用[ajax](http://www.w3schools.com/ajax/)提交并在其返回方法上执行某些操作。

# cuda - 如何在 cmake 的 try_run 中运行 nvcc？

> ID：15632833
> 
> 赞同：1
> 
> 时间：2013-03-26T08:53:50.740
> 
> 标签：cuda, cmake, nvcc

我尝试`nvcc`通过编译和运行简单的测试来设置 cmake 阶段的计算能力标志：

```
#include <cuda.h>
#include <cuda_runtime.h>
#include <stdio.h>

int main(int argc, char **argv){
    cudaDeviceProp dP;
    if(cudaSuccess != cudaGetDeviceProperties(&dP, 0)) return 0;
    printf("-arch=sm_%d%d\n", dP.major, dP.minor);
    return 0;
} 
```

我[在这里](https://stackoverflow.com/questions/2285185/easiest-way-to-test-for-existence-of-cuda-capable-gpu-from-cmake)阅读了如何做到这一点，但`try_run`让我只通过 gcc 编译目标。如果我添加`cuda_compile`，我也不会得到二进制文件。

如何`.cu`在阶段编译 -file`cmake`并运行它`execute_process`以设置正确的编译标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:42:50.360

好吧，我不知道该怎么做，所以我做的很简单。在我的`CUDA_FOUND`部分的开头，我添加：

```
if(CUDA_FOUND)
    set(TEST ${CMAKE_BINARY_DIR}/test)
    set(TESTSRC ${CMAKE_CURRENT_SOURCE_DIR}/test/capability.cu)
    execute_process(COMMAND nvcc -lcuda ${TESTSRC} -o ${TEST})
    execute_process(COMMAND ${TEST} OUTPUT_VARIABLE CUDA_ARCH)
    message("Cuda architecture:  ${CUDA_ARCH}")
    list(APPEND CUDA_NVCC_FLAGS --use_fast_math ${CUDA_ARCH}) 
```

这只是编译我的测试源并在填充`CUDA_ARCH`变量中运行。

# javascript - 如何使用 javascript 或 jquery 添加验证来控制？

> ID：15632840
> 
> 赞同：-1
> 
> 时间：2013-03-26T08:54:20.317
> 
> 标签：javascript, jquery, validation

我想在下面的控件中添加验证：任何人都可以告诉我用 jquery 或 javascript 来做吗

```
<table width="100%" border="0">
                    <tbody>

                    <tr>
                        <td>UserName: <span>*</span></td>
                        <td>
                            <input type="text" name="userName" value=""  size="40">                
                         </td>
                    </tr>

                     <tr>
                        <td>Display Name: <span>*</span></td>
                        <td><input type="text" name="name" value=""  size="40" >
                        </td>
                    </tr>

             </tbody>
             </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:58:19.580

使用[jquery 验证](http://docs.jquery.com/Plugins/Validation/validate)：

```
<input data-val="true" data-val-length="Name is too long. Max length is 40 chars" data-val-length-max="40" name="name" type="text" value=""> 
```

JS：

```
$(".yourTableSelector").validate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:15:23.467

您也可以使用[jQuery.post()](http://api.jquery.com/jQuery.post/)。设置这两个输入的 ID，然后在 JavaScript 中：

```
$.post("validation.php", { username: $("#usernameInputID").val(), displayName: $("#displayNameInputID").val() }).done(function(data) {
    //Some code (if invalid, fox example set border to red etc...)
}); 
```

在validation.php中，您可以检查接收到的字符串是否为空，用户名是否唯一等，并根据此返回一些值（带有简单的回显），您可以在JavaScript中使用它来决定输入是否正确......您可以检查每个输入单，然后您可以提醒用户只有某些字段未正确填写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T08:58:22.393

```
$("input[name='userName']").change(function(){
    if($(this).val()==""){
       alert('This field cannot be empty');
    }
});

$("input[name='name']").change(function(){
    if($(this).val()==""){
       alert('This field cannot be empty');
    }
}); 
```

# wpf - 第一次左键单击时不显示上下文菜单

> ID：15632841
> 
> 赞同：1
> 
> 时间：2013-03-26T08:54:27.517
> 
> 标签：wpf, xaml, contextmenu, code-behind

我有以下几点：

```
<telerik:RadButton Name="AddButton" DockPanel.Dock="Right"
                   Content="Add" HorizontalAlignment="Right"
                   Click="AddButton_OnClick" Padding="5,0,5,0">
                                            <telerik:RadButton.ContextMenu>
                                                <ContextMenu x:Name="addContextMenu"
                                                    ItemsSource="{Binding Path=AvailableTypesToAdd}">
                                                    <ContextMenu.ItemTemplate>
                                                        <DataTemplate>
                                                            <MenuItem Header="{Binding Path=Name}"
                                                                      Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type telerik:RadExpander}}, Path=DataContext.AddCommand}"
                                                                      CommandParameter="{Binding}" />
                                                        </DataTemplate>
                                                    </ContextMenu.ItemTemplate>
                                                </ContextMenu>
                                            </telerik:RadButton.ContextMenu 
```

在后面的代码中，我有以下内容：

```
private void AddButton_OnClick(object sender, RoutedEventArgs e)
    {
        AddButton.ContextMenu.PlacementTarget = this;
        AddButton.ContextMenu.IsOpen = true;
    } 
```

但是，当我 LeftClick 上下文菜单是空的，但如果我右键单击它会被填充。如果我删除 PlacementTarget = this，如果我先右键单击，那么当我左键单击时它也会被填充。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:15:31.183

我找到了解决办法。而不是设置：

```
AddButton.ContextMenu.PlacementTarget = this; 
```

调成：

```
AddButton.ContextMenu.PlacementTarget = (UIElement)sender; 
```

# c# - 在 C# 中使用 NAudio 操作 Windows 音频混音器

> ID：15632845
> 
> 赞同：2
> 
> 时间：2013-03-26T08:54:49.310
> 
> 标签：c#, naudio

我想编写一个程序，在其中我可以使用 NAudio dll 操纵整个 Windows 音频混音器。例如我想改变系统的音量平衡。

我正在寻找一个星期。我找到了 WINMM.DLL，但它在 Windows 7 下对我不起作用。今天我在 codeproject[链接](http://www.codeproject.com/Articles/18520/Vista-Core-Audio-API-Master-Volume-Control)上找到了这篇文章。但这里的问题是我只能设置主音量。现在我的问题是，是否可以使用 NAudio 操作系统混音器？

# node.js - node.js V0.10.1 npm install grunt-contrib in windows

> ID：15632846
> 
> 赞同：0
> 
> 时间：2013-03-26T08:54:53.513
> 
> 标签：node.js, npm, gruntjs

windowsXP node.js V0.10.1从官方网站下载smi包，我想从github运行代码检查[https://github.com/raDiesle/backbone.js-jquerymobile-boilerplate-template#general](https://github.com/raDiesle/backbone.js-jquerymobile-boilerplate-template#general)

快速入门说：

```
Download and install node.js for your os system and run in your project folder:
npm install -g grunt ( installs grunt command line tool)
npm install -g bbb ( is a grunt addon, which offers backbone templates and task collections like grunt-contrib)
npm install grunt-contrib ( needed to install not global, because you'll need the newest version) 
```

grunt 和 bbb 安装成功，但 grunt-contrib 失败

调试这么长，从头复制

```
 33742 verbose read json E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\inherits\package.json
33743 silly lockFile 173eb7fd-dules-glob-node-modules-inherits E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\inherits
33744 silly lockFile 173eb7fd-dules-glob-node-modules-inherits E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\inherits
33745 silly lockFile abd1689b-cache-inherits-1-0-0-package-tgz C:\Documents and Settings\jinkai\Application Data\npm-cache\inherits\1.0.0\package.tgz
33746 silly lockFile abd1689b-cache-inherits-1-0-0-package-tgz C:\Documents and Settings\jinkai\Application Data\npm-cache\inherits\1.0.0\package.tgz
33747 info preinstall inherits@1.0.0
33748 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\inherits\package.json
33749 verbose readDependencies using package.json deps
33750 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\inherits\package.json
33751 verbose readDependencies using package.json deps
33752 silly resolved []
33753 verbose about to build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\inherits
33754 info build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\inherits
33755 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\inherits\package.json
33756 verbose linkStuff [ false,
33756 verbose linkStuff   false,
33756 verbose linkStuff   false,
33756 verbose linkStuff   'E:\\workspace2\\backbone\\node_modules\\grunt-contrib\\node_modules\\grunt-contrib-jshint\\node_modules\\jshint\\node_modules\\cli\\node_modules\\glob\\node_modules' ]
33757 info linkStuff inherits@1.0.0
33758 verbose linkBins inherits@1.0.0
33759 verbose linkMans inherits@1.0.0
33760 verbose rebuildBundles inherits@1.0.0
33761 info install inherits@1.0.0
33762 info postinstall inherits@1.0.0
33763 verbose read json E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\graceful-fs\package.json
33764 silly lockFile af029bc7-es-glob-node-modules-graceful-fs E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\graceful-fs
33765 silly lockFile af029bc7-es-glob-node-modules-graceful-fs E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\graceful-fs
33766 silly lockFile b89c3973-he-graceful-fs-1-2-0-package-tgz C:\Documents and Settings\jinkai\Application Data\npm-cache\graceful-fs\1.2.0\package.tgz
33767 silly lockFile b89c3973-he-graceful-fs-1-2-0-package-tgz C:\Documents and Settings\jinkai\Application Data\npm-cache\graceful-fs\1.2.0\package.tgz
33768 info preinstall graceful-fs@1.2.0
33769 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\graceful-fs\package.json
33770 verbose readDependencies using package.json deps
33771 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\graceful-fs\package.json
33772 verbose readDependencies using package.json deps
33773 silly resolved []
33774 verbose about to build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\graceful-fs
33775 info build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\graceful-fs
33776 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\node_modules\graceful-fs\package.json
33777 verbose linkStuff [ false,
33777 verbose linkStuff   false,
33777 verbose linkStuff   false,
33777 verbose linkStuff   'E:\\workspace2\\backbone\\node_modules\\grunt-contrib\\node_modules\\grunt-contrib-jshint\\node_modules\\jshint\\node_modules\\cli\\node_modules\\glob\\node_modules' ]
33778 info linkStuff graceful-fs@1.2.0
33779 verbose linkBins graceful-fs@1.2.0
33780 verbose linkMans graceful-fs@1.2.0
33781 verbose rebuildBundles graceful-fs@1.2.0
33782 info install graceful-fs@1.2.0
33783 info postinstall graceful-fs@1.2.0
33784 verbose about to build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob
33785 info build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob
33786 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\node_modules\glob\package.json
33787 verbose linkStuff [ false,
33787 verbose linkStuff   false,
33787 verbose linkStuff   false,
33787 verbose linkStuff   'E:\\workspace2\\backbone\\node_modules\\grunt-contrib\\node_modules\\grunt-contrib-jshint\\node_modules\\jshint\\node_modules\\cli\\node_modules' ]
33788 info linkStuff glob@3.1.21
33789 verbose linkBins glob@3.1.21
33790 verbose linkMans glob@3.1.21
33791 verbose rebuildBundles glob@3.1.21
33792 verbose rebuildBundles [ 'graceful-fs', 'inherits' ]
33793 info install glob@3.1.21
33794 info postinstall glob@3.1.21
33795 verbose about to build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli
33796 info build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli
33797 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\node_modules\cli\package.json
33798 verbose linkStuff [ false,
33798 verbose linkStuff   false,
33798 verbose linkStuff   false,
33798 verbose linkStuff   'E:\\workspace2\\backbone\\node_modules\\grunt-contrib\\node_modules\\grunt-contrib-jshint\\node_modules\\jshint\\node_modules' ]
33799 info linkStuff cli@0.4.3
33800 verbose linkBins cli@0.4.3
33801 verbose linkMans cli@0.4.3
33802 verbose rebuildBundles cli@0.4.3
33803 verbose rebuildBundles [ 'glob' ]
33804 info install cli@0.4.3
33805 info postinstall cli@0.4.3
33806 verbose about to build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint
33807 info build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint
33808 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\package.json
33809 verbose linkStuff [ false,
33809 verbose linkStuff   false,
33809 verbose linkStuff   false,
33809 verbose linkStuff   'E:\\workspace2\\backbone\\node_modules\\grunt-contrib\\node_modules\\grunt-contrib-jshint\\node_modules' ]
33810 info linkStuff jshint@1.0.0
33811 verbose linkBins jshint@1.0.0
33812 verbose link bins [ { jshint: './bin/jshint' },
33812 verbose link bins   'E:\\workspace2\\backbone\\node_modules\\grunt-contrib\\node_modules\\grunt-contrib-jshint\\node_modules\\.bin',
33812 verbose link bins   false ]
33813 verbose linkMans jshint@1.0.0
33814 verbose rebuildBundles jshint@1.0.0
33815 info E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint unbuild
33816 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\jshint\package.json
33817 info preuninstall jshint@1.0.0
33818 verbose rebuildBundles [ '.bin',
33818 verbose rebuildBundles   'cli',
33818 verbose rebuildBundles   'esprima',
33818 verbose rebuildBundles   'minimatch',
33818 verbose rebuildBundles   'peakle',
33818 verbose rebuildBundles   'shelljs',
33818 verbose rebuildBundles   'underscore' ]
33819 info uninstall jshint@1.0.0
33820 verbose false,E:\workspace2\backbone\node_modules,E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules unbuild jshint@1.0.0
33821 verbose E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\node_modules\.bin,[object Object] binRoot
33822 info postuninstall jshint@1.0.0
33823 verbose about to build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint
33824 info E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint unbuild
33825 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-jshint\package.json
33826 info preuninstall grunt-contrib-jshint@0.2.0
33827 info uninstall grunt-contrib-jshint@0.2.0
33828 verbose false,E:\workspace2\backbone\node_modules,E:\workspace2\backbone\node_modules\grunt-contrib\node_modules unbuild grunt-contrib-jshint@0.2.0
33829 info postuninstall grunt-contrib-jshint@0.2.0
33830 info postinstall phantomjs@1.8.2-2
33831 verbose about to build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-qunit\node_modules\grunt-lib-phantomjs
33832 info build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-qunit\node_modules\grunt-lib-phantomjs
33833 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-qunit\node_modules\grunt-lib-phantomjs\package.json
33834 verbose linkStuff [ false,
33834 verbose linkStuff   false,
33834 verbose linkStuff   false,
33834 verbose linkStuff   'E:\\workspace2\\backbone\\node_modules\\grunt-contrib\\node_modules\\grunt-contrib-qunit\\node_modules' ]
33835 info linkStuff grunt-lib-phantomjs@0.2.0
33836 verbose linkBins grunt-lib-phantomjs@0.2.0
33837 verbose linkMans grunt-lib-phantomjs@0.2.0
33838 verbose rebuildBundles grunt-lib-phantomjs@0.2.0
33839 verbose rebuildBundles [ 'phantomjs' ]
33840 info install grunt-lib-phantomjs@0.2.0
33841 info postinstall grunt-lib-phantomjs@0.2.0
33842 verbose about to build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-qunit
33843 info build E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-qunit
33844 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-qunit\package.json
33845 verbose linkStuff [ false,
33845 verbose linkStuff   false,
33845 verbose linkStuff   false,
33845 verbose linkStuff   'E:\\workspace2\\backbone\\node_modules\\grunt-contrib\\node_modules' ]
33846 info linkStuff grunt-contrib-qunit@0.2.0
33847 verbose linkBins grunt-contrib-qunit@0.2.0
33848 verbose linkMans grunt-contrib-qunit@0.2.0
33849 verbose rebuildBundles grunt-contrib-qunit@0.2.0
33850 verbose rebuildBundles [ 'grunt-lib-phantomjs' ]
33851 info install grunt-contrib-qunit@0.2.0
33852 info postinstall grunt-contrib-qunit@0.2.0
33853 verbose read json E:\workspace2\backbone\node_modules\grunt-contrib\package.json
33854 verbose from cache E:\workspace2\backbone\node_modules\grunt-contrib\node_modules\grunt-contrib-qunit\package.json
33855 verbose cache add [ 'grunt@~0.4.0', null ]
33856 verbose cache add name=undefined spec="grunt@~0.4.0" args=["grunt@~0.4.0",null]
33857 verbose parsed url { protocol: null,
33857 verbose parsed url   slashes: null,
33857 verbose parsed url   auth: null,
33857 verbose parsed url   host: null,
33857 verbose parsed url   port: null,
33857 verbose parsed url   hostname: null,
33857 verbose parsed url   hash: null,
33857 verbose parsed url   search: null,
33857 verbose parsed url   query: null,
33857 verbose parsed url   pathname: 'grunt@~0.4.0',
33857 verbose parsed url   path: 'grunt@~0.4.0',
33857 verbose parsed url   href: 'grunt@~0.4.0' }
33858 verbose cache add name="grunt" spec="~0.4.0" args=["grunt","~0.4.0"]
33859 verbose parsed url { protocol: null,
33859 verbose parsed url   slashes: null,
33859 verbose parsed url   auth: null,
33859 verbose parsed url   host: null,
33859 verbose parsed url   port: null,
33859 verbose parsed url   hostname: null,
33859 verbose parsed url   hash: null,
33859 verbose parsed url   search: null,
33859 verbose parsed url   query: null,
33859 verbose parsed url   pathname: '~0.4.0',
33859 verbose parsed url   path: '~0.4.0',
33859 verbose parsed url   href: '~0.4.0' }
33860 verbose addNamed [ 'grunt', '~0.4.0' ]
33861 verbose addNamed [ null, '>=0.4.0- <0.5.0-' ]
33862 silly lockFile cba964e3-grunt-0-4-0 grunt@~0.4.0
33863 verbose lock grunt@~0.4.0 C:\Documents and Settings\jinkai\Application Data\npm-cache\cba964e3-grunt-0-4-0.lock
33864 silly addNameRange { name: 'grunt', range: '>=0.4.0- <0.5.0-', hasData: false }
33865 verbose url raw grunt
33866 verbose url resolving [ 'https://registry.npmjs.org/', './grunt' ]
33867 verbose url resolved https://registry.npmjs.org/grunt
33868 info trying registry request attempt 1 at 09:34:05
33869 verbose etag "9W6PIJKXOXJNJCW9NGQ0Z66JS"
33870 http GET https://registry.npmjs.org/grunt
33871 error phantomjs@0.2.6 install: `node install.js`
33871 error `cmd "/c" "node install.js"` failed with 8
33872 error Failed at the phantomjs@0.2.6 install script.
33872 error This is most likely a problem with the phantomjs package,
33872 error not with npm itself.
33872 error Tell the author that this fails on your system:
33872 error     node install.js
33872 error You can get their info via:
33872 error     npm owner ls phantomjs
33872 error There is likely additional logging output above.
33873 error System Windows_NT 5.1.2600
33874 error command "D:\\nodejs\\\\node.exe" "D:\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "grunt-contrib"
33875 error cwd E:\workspace2\backbone
33876 error node -v v0.10.1
33877 error npm -v 1.2.15
33878 error code ELIFECYCLE
33879 verbose exit [ 1, true ] 
```

谁能告诉我如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:00:23.710

我想这个问题可以追溯到以下几行：

```
33871 error phantomjs@0.2.6 install: `node install.js`
33871 error `cmd "/c" "node install.js"` failed with 8
33872 error Failed at the phantomjs@0.2.6 install script.
33872 error This is most likely a problem with the phantomjs package,
33872 error not with npm itself. 
```

所以很明显有问题。

您可以不用多说手动安装 phantomjs@0.2.6 吗？

PS：你`npm -g`是以管理员身份运行的吗？

# facebook-graph-api - 我如何在 Facebook 上跟踪 youtube 视频分享

> ID：15632849
> 
> 赞同：0
> 
> 时间：2013-03-26T08:55:01.587
> 
> 标签：facebook-graph-api, youtube

我已经使用 graph.facebook.com 来了解它很容易显示的特定 URL 的共享数量，但是每当我使用 youtube 视频链接时，例如：

```
http://graph.facebook.com/http://www.youtube.com/watch?v=qO7cySkUiEE 
```

表明：

```
 {
   "id": "http://www.youtube.com/watch",
   "shares": 2556632,
   "comments": 7
    } 
```

这实际上显示了这个链接：[http](http://www.youtube.com/watch) ://www.youtube.com/watch 。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T11:51:24.943

服务器认为您将参数“v=qO7cySkUiEE”作为 GET 请求发送给他。将链接中的问号更改为“%3f”（不带引号），它应该可以工作。

# c# - Parallel.For & listcollectionview

> ID：15632852
> 
> 赞同：0
> 
> 时间：2013-03-26T08:55:06.123
> 
> 标签：c#, wpf, parallel-processing

我有一个`listcollectionview`我想迭代使用的`Parallel.For`

到目前为止，我有：

```
 public void HighlightLoggingLvl(
        LoggingLvl.ELoggingLvl loggingLvl, bool ebool) {
        Parallel.For(0, HighlighterCollectionView.Count, i => {
                 Log4NetLog cC =
                     HighlighterCollectionView.GetItemAt(i) as
                     Log4NetLog;

                 if (cC != null &&
                    cC.MyLoggingLvl.EloggingLvl == loggingLvl) {
                         if (ebool) {
                             cC.LogColour.SetColor(cC.MyLoggingLvl);
                          } else {
                                    cC.LogColour.Colour = Colors.Transparent;
                          }
                 }
         });
        HighlighterCollectionView.Refresh();
    } 
```

我收到以下错误：

```
A first chance exception of type 'System.InvalidOperationException' occurred in      WindowsBase.dll
A first chance exception of type 'System.InvalidOperationException' occurred in     WindowsBase.dll
A first chance exception of type 'System.InvalidOperationException' occurred in mscorlib.dll
A first chance exception of type 'System.InvalidOperationException' occurred in mscorlib.dll
A first chance exception of type 'System.AggregateException' occurred in mscorlib.dll
A first chance exception of type 'System.AggregateException' occurred in mscorlib.dll
A first chance exception of type 'System.Reflection.TargetInvocationException' occurred in mscorlib.dll
System.Windows.Data Error: 8 : Cannot save value from target back to source. BindingExpression:Path=Log4NetSearchEngineCompassLogView.Log4NetHighlighter.IsAllHighlighterEnable; DataItem='CompassLogView' (HashCode=57871897); target element is 'CheckBox' (Name=''); target property is 'IsChecked' (type 'Nullable`1') AggregateException:'System.AggregateException: One or more errors occurred. ---> System.InvalidOperationException: The calling thread cannot access this object because a different thread owns it.
 at System.Windows.Threading.Dispatcher.VerifyAccess()
 at System.Windows.Threading.DispatcherObject.VerifyAccess()
 at System.Windows.Data.CollectionView.VerifyRefreshNotDeferred()
 at System.Windows.Data.ListCollectionView.GetItemAt(Int32 index)
 at LogViewerViewModel.tools.highlighters.Log4NetHighlighter.<>c__DisplayClass1.<HighlightLoggingLvl>b__0(Int32 i) in c:\Users\Reza\Documents\Visual Studio 2012\Projects\Pallas informatik\LogViewerV1\LogViewerViewModel\src\tools\highlighters\Log4NetHighlighter.cs:line 193
 at System.Threading.Tasks.Parallel.<>c__DisplayClassf`1.<ForWorker>b__c()
 at System.Threading.Tasks.Task.InnerInvoke()
 at System.Threading.Tasks.Task.InnerInvokeWithArg(Task childTask)
 at System.Threading.Tasks.Task.<>c__DisplayClass10.<ExecuteSelfReplicating>b__f(Object param0)
 --- End of inner exception stack trace ---
 at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
 at System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationToken cancellationToken)
  at System.Threading.Tasks.Task.Wait()
  at System.Threading.Tasks.Parallel.ForWorker[TLocal](Int32 fromInclusive, Int32 toExclusive, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState, Func`4 bodyWithLocal, Func`1 localInit, Action`1 localFinally)
   at System.Threading.Tasks.Parallel.For(Int32 fromInclusive, Int32 toExclusive, Action`1 body)
        at LogViewerViewModel.tools.highlighters.Log4NetHighlighter.HighlightLoggingLvl(ELoggingLvl loggingLvl, Boolean ebool) in c:\Users\Reza\Documents\Visual Studio 2012\Projects\Pallas informatik\LogViewerV1\LogViewerViewModel\src\tools\highlighters\Log4NetHighlighter.cs:line 190
 at LogViewerViewModel.tools.highlighters.Log4NetHighlighter.set_IsDebugHighlighterEnable(Boolean value) in c:\Users\Reza\Documents\Visual Studio 2012\Projects\Pallas informatik\LogViewerV1\LogViewerViewModel\src\tools\highlighters\Log4NetHighlighter.cs:line 59
   at LogViewerViewModel.tools.highlighters.Log4NetHighlighter.set_IsAllHighlighterEnable(Boolean value) in c:\Users\Reza\Documents\Visual Studio 2012\Projects\Pallas informatik\LogViewerV1\LogViewerViewModel\src\tools\highlighters\Log4NetHighlighter.cs:line 39
---> (Inner Exception #0) System.InvalidOperationException: The calling thread cannot access this object because a different thread owns it.
  at System.Windows.Threading.Dispatcher.VerifyAccess()
  at System.Windows.Threading.DispatcherObject.VerifyAccess()
  at System.Windows.Data.CollectionView.VerifyRefreshNotDeferred()
  at System.Windows.Data.ListCollectionView.GetItemAt(Int32 index)
  at LogViewerViewModel.tools.highlighters.Log4NetHighlighter.<>c__DisplayClass1.<HighlightLoggingLvl>b__0(Int32 i) in c:\Users\Reza\Documents\Visual Studio 2012\Projects\Pallas informatik\LogViewerV1\LogViewerViewModel\src\tools\highlighters\Log4NetHighlighter.cs:line 193
  at System.Threading.Tasks.Parallel.<>c__DisplayClassf`1.<ForWorker>b__c()
  at System.Threading.Tasks.Task.InnerInvoke()
  at System.Threading.Tasks.Task.InnerInvokeWithArg(Task childTask)
  at System.Threading.Tasks.Task.<>c__DisplayClass10.<ExecuteSelfReplicating>b__f(Object param0)<--- 
```

我怎样才能解决这个问题？（代码示例会很棒）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:57:57.683

您应该在 UI 线程上调用您的操作。

[使用调用方法](http://msdn.microsoft.com/de-de/library/system.windows.threading.dispatcher.invoke.aspx)查看 Dispatcher 类

或 [了解 WPF 中的调度程序](http://weblogs.asp.net/pawanmishra/archive/2010/06/06/understanding-dispatcher-in-wpf.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:59:24.210

您不能使用并行处理来更新 UI 元素。只有应用程序的主线程有权访问 UI。可以调用`Invoke`复选框，但对于您正在做的工作，并行执行它的意义何在？它不会给你带来任何性能。

我建议只使用常规`for`循环而不是`Parallel.For`.

# java - 如果运行模式为 parallel="methods"，如何强制 TestNG 为每个方法创建新的测试类实例

> ID：15632854
> 
> 赞同：15
> 
> 时间：2013-03-26T08:55:08.420
> 
> 标签：java, selenium, testng

如果运行模式是，如何强制 TestNG 为每个方法创建新的测试类实例`parallel="methods"`？

JUnit 会自动执行此操作，但 TestNG 在方法之间重用相同的实例。

有没有办法改变这种行为？

我正在运行 selenium 测试并在`@BeforeMethod`方法中创建 webdriver 并将其存储到类变量中以在测试方法中使用它并关闭`@AfterMethod`.

而且我希望能够在不共享 webdriver 的情况下并行运行一个测试类的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:11:27.857

没有办法强制 testng 这样做。一种解决方案是将 webdriver 实例设置为 threadlocal 变量。这将有助于做的是，它会为每个线程创建一个 webdriver 对象，如果你对变量进行 get 操作，它。只会给你那个线程的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:59:41.973

收银台[_](http://testng.org/doc/documentation-main.html#factories)

从[javadoc](http://testng.org/javadoc/org/testng/annotations/Factory.html)：

```
Marks a method as a factory that returns objects that will be used by TestNG as Test classes. The method must return Object[]. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T18:07:15.893

我使用 TestNG 并行运行多个 selenium webdriver 测试。要为每个方法设置一个新的 WebDriver，请使用 @DataProvider[注释](http://testng.org/doc/documentation-main.html#annotations)及其在 @Test 注释中的关联属性。

# c++ - 如何在Linux上编写一段程序让CPU忙到一定程度？

> ID：15632857
> 
> 赞同：3
> 
> 时间：2013-03-26T08:55:11.370
> 
> 标签：c++, linux

我正在考虑编写一个测试工具，用于使 CPU 在 Linux 上以指定级别忙碌，例如 80% 的使用率。我怎样才能做到这一点？这个工具是脚本还是 c++ 程序都没有关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:57:57.497

您可以使用[压力](http://weather.ou.edu/~apw/projects/stress/)程序。您还可以`cpuburn`在 Ubuntu（或 Debian）中使用该套件：

```
apt-get install cpuburn 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:25:27.650

对于独立于平台的解决方案，您可以编译并运行此 C++11 程序的一个或多个实例，并使用针对所需 CPU 使用百分比进行微调的命令行参数。

```
//
// Application to sleep for nanoseconds specified by command-line argument
//

#include <chrono>
#include <iostream>
#include <limits>
#include <sstream>
#include <thread>

int main(int argc, char* argv[]){
  if (argc >= 2) {
    std::istringstream iss(argv[1]);
    unsigned int interval;
    if (iss >> interval)
      for(uint64_t i=0; i<std::numeric_limits<uint64_t>::max(); i++)
      std::this_thread::sleep_for(std::chrono::nanoseconds(interval));
  }
} 
```

# android - 从 android 应用程序设置 __Viewstate 的 ASP 页面的 base-64 编码字符串

> ID：15632860
> 
> 赞同：1
> 
> 时间：2013-03-26T08:55:18.327
> 
> 标签：android, asp.net, http-post, viewstate

我正在托管一个包含文本框和按钮的网站。我想用我从我的 android 应用程序发送的 base-64 编码字符串设置网页`__VIEWSTATE`的隐藏字段。`ASP`

为了从我的 android 应用程序访问和设置，`__VIEWSTATE`我使用的是`httppost`. 但这似乎不起作用。

这是这样做的方法吗？这有可能做到吗？

# iphone - 滚动 UIDatepicker 的滚轮时位置错误

> ID：15632861
> 
> 赞同：2
> 
> 时间：2013-03-26T08:55:19.140
> 
> 标签：iphone, ios, ipad, ios6, uidatepicker

我对 UIDatepicker 有问题。在我的项目中滚动日期选择器时，我同时单击选择按钮，页面将在前一个屏幕上导航。单击选择日期按钮页面后，在选择日期屏幕上导航。但 UIPicker 是不选择完美的日期。![在此处输入图像描述](../Images/b7935b799d82cc27a002cf1040a4f2a2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:01:01.967

较旧的 iOS 版本有一个错误，当您在 UIPickerView 仍在旋转时隐藏它时，它会卡在不可预测的位置（即使在 Apple 的时钟应用程序中，如果您以光速旋转选择器并切换选项卡或关闭您的应用程序，您也可以发现该错误） ，但是，从 iOS 6 开始似乎并非如此（不，刚刚检查了我的 iPhone 4，iOS 6.1，**错误仍然存​​在**）。无论如何，我有一个解决方案，也许它也可以解决你的问题。

[在这里](https://stackoverflow.com/a/13073876/1032151)查看我的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T08:59:46.117

当您滚动选择器视图时，成功滚动后值没有改变意味着 didFinishScroll 只需要 value.below 方法将在滚动完成后调用。

**在你的情况下：**

在滚动的中间，您正在执行一些其他操作，这就是它给出错误值的原因（它采用以前的值）。

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{
} 
```

# c++ - 为什么我的线程不能正常退出？

> ID：15632868
> 
> 赞同：1
> 
> 时间：2013-03-26T08:56:03.207
> 
> 标签：c++, multithreading, qt, visual-c++, qt5

我试图告诉一个线程优雅地退出。为此，线程在每次迭代中检查一个全局布尔标志，该标志指示线程是否应该继续或退出。线程是这样设置的（代码来自[http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/](http://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/)）：

```
ImageFusionQt::ImageFusionQt(QWidget* parent)
: QMainWindow(parent)
{    

captureThread = new QThread();
captureWorker = new CaptureWorker();

// Connects the threads started() signal to the process() slot in the worker, causing it to start.
connect(captureThread, SIGNAL(started()), captureWorker, SLOT(process()));

// Connect worker finished signal to trigger thread quit, then delete.
connect(captureWorker, SIGNAL(finished()), captureThread, SLOT(quit()));
connect(captureWorker, SIGNAL(finished()), captureWorker, SLOT(deleteLater()));

// Make sure the thread object is deleted after execution has finished.
connect(captureThread, SIGNAL(finished()), captureThread, SLOT(deleteLater()));

// Give QThread ownership of Worker Object
captureWorker->moveToThread(captureThread);
captureThread->start();

} 
```

CaptureWorker.cpp

```
void CaptureWorker::process()
{
  while(true)
  {
    g_exit_lock->lockForRead();
    if( g_exit )
    {
      g_exit_lock->unlock();
      break;
    }
    g_exit_lock->unlock();
  }
  qDebug() << "CaptureWorker: Exiting.";
  emit finished();
 } 
```

现在，当我尝试通过在某个函数中将标志设置为 true 来停止线程时，process() 方法返回但线程没有完成，并且对 wait() 的调用永远阻塞。为什么我的线程没有终止？

```
g_exit_lock->lockForWrite();
g_exit = true;
g_exit_lock->unlock();

QThread::sleep(15);
qDebug() << "ct finished? " << captureThread->isFinished();

captureThread->wait();
qDebug() << "All threads stopped."; 
```

日志文件输出：

```
2013.03.26 09:29:22[D] CaptureWorker: Exiting. 
2013.03.26 09:29:37[D] ct finished?  false 
```

**更新**

我做了一些调试，发现了一些有趣的东西：

*   线程在其事件循环（QEventLoop::exec）中阻塞。它等待它显然没有收到的 quit() 信号。
*   线程的事件循环是**在**process() 返回后创建的。通过像我一样连接信号，线程的 run() 方法在线程已经完成它的工作之后被调用（例如 process() 返回）。
*   事件循环在执行实际循环之前清除所有已发布的退出事件。

**我的结论**

*   像我一样连接 quit() 插槽不起作用，因为在建立事件循环时会删除 quit() 事件
*   直接在线程对象上调用 quit() 成员函数显然会导致优雅终止。这可以通过使用 QThread::currentThread()->quit() 从外部或内部完成；

**开放式问题**

*   有没有办法在事件循环建立后调用 process() 方法？
*   在工作完成后创建事件循环感觉不对。但是，我使用 QThread 的方式与[文档一致](http://qt-project.org/doc/qt-5.0/qtcore/qthread.html#details)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:28:26.853

这里发生的事情根本`quit`没有被调用。你知道 Qt 有直接或排队连接。当你使用这个

```
connect(captureWorker, SIGNAL(finished()), captureThread, SLOT(quit())); 
```

它确实是一种自动连接类型。因此，因为您将 captureWorker 移动到另一个线程，所以 使用了[Qt::QueuedConnecton](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)。将`quit()`在**主**线程上调用。但是你所做的是阻塞主线程，`captureThread->wait();`
`quit()`它在事件循环中排队，但它被阻塞了，因为它正在等待线程完成。
所以你可能想直接调用 quit() 就像通过替换

```
connect(captureWorker, SIGNAL(finished()), captureThread, SLOT(quit())); 
```

和

```
connect(captureWorker, SIGNAL(finished()), captureThread, SLOT(quit()), Qt::DirectConnection); 
```

或者像您在编辑中建议的那样直接调用 quit() ，或者您也可以执行以下操作，而不是`captureThread->wait();`如果您真的需要

```
 QEventLoop l;
  l.connect(captureThread, SIGNAL(finished()), SLOT(quit()));  
  l.exec(QEventLoop::ExcludeUserInputEvents); 
```

或者，您可以连接到线程的 finished() 信号，然后执行您想做的任何事情，`captureThread->wait();`这样您根本不必手动等待。
Qt中有很多做事的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T12:57:01.020

问题是您实际上阻塞了主线程和事件循环，因此不让线程接收退出信号。该问题将通过执行以下操作来解决：

```
g_exit_lock->lockForWrite();
g_exit = true;
g_exit_lock->unlock();

QThread::sleep(15);
qDebug() << "ct finished? " << captureThread->isFinished();

// You are missing below line, without this, main thread will block
captureThread->quit();
captureThread->wait();

qDebug() << "All threads stopped."; 
```

# java - 多封电子邮件

> ID：15632870
> 
> 赞同：0
> 
> 时间：2013-03-26T08:56:07.020
> 
> 标签：java, jakarta-ee, weblogic, quartz-scheduler, weblogic-10.x

我们将应用程序部署在两个不同的服务器（Weblogic）中。我们有按计划发送电子邮件的功能。由于我们的应用程序在两台不同的服务器上运行，用户收到两封电子邮件（每封来自一台服务器）。我们需要将其限制为 1。欢迎提出想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:03:59.847

由于您尚未完全描述您的系统但仍在总体考虑，这个问题有很多解决方案

*   **在中心位置标记发送电子邮件可能是数据存储或内存缓存**：

    将所有预定的电子邮件放在中央存储库中，缓存或数据存储，每个电子邮件发件人应用程序在发送电子邮件时标记已发送的电子邮件，因此如果其他电子邮件发件人组件尚未发送任何电子邮件，其他应用程序将检查任何电子邮件

*   **为电子邮件创建一个单独的组件，从两者获取数据并发送预定的电子邮件**：一种可能的解决方案可能是电子邮件发送组件应与主应用程序分离并部署在一个地方，并与电子邮件数据存储或存储库交互并发送预定的电子邮件。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:11:47.040

另一种可能的解决方案可能是有一个队列，并且您有一个 UDQ 和一个 MDB 使用消息并发送电子邮件。当 2 台托管服务器中的一台出现故障时，此解决方案将起作用，并且在您处理许多消息时可以很好地扩展。

如果负载很高，使用 DB 可能会增加瓶颈。

将邮件组件仅放在一台服务器上可能会影响高可用性。

# linux - Tcpdump 保存的文件是空的，甚至报告捕获了数百万个数据包

> ID：15632871
> 
> 赞同：0
> 
> 时间：2013-03-26T08:56:08.363
> 
> 标签：linux, bash, shell, tcpdump

我通过使用 ssh 将命令发送到控制 Tcpdump 的 shell 脚本远程捕获服务器接口上的流量。

```
#!/bin/bash
# Script to Start/Stop TCP
# Usage: ./ControlTCPdump.sh start|stop [filename]

CONSOLE_OUTPUT="tcpdump$( date +%m%d ).console"
HOST_NAME=`hostname`

#Default filename:
if [ "$2" = "" ]; then
    FILENAME="traffic.dmp"
else
    FILENAME=$2
fi

if [ "$1" = start ]; then
    echo $(date) $FILENAME >> $CONSOLE_OUTPUT
    if [ "" = "$(pidof tcpdump)" ]; then
        nohup tcpdump -s 96 -w $FILENAME -i em2 -n tcp > /dev/null &>> $CONSOLE_OUTPUT &
        echo [$HOST_NAME] TCPdump is started\!
    else
        echo [$HOST_NAME] There is runnung process. Kill All\!
        killall -q tcpdump #Quiet, don't talk
        sleep 1
        if [ "" = "$(pidof tcpdump)" ]; then
            echo [$HOST_NAME] Restarting TCPdump...
            nohup tcpdump -s 96 -w $FILENAME -i em2 -n tcp >/dev/null &>> $CONSOLE_OUTPUT &
            echo [$HOST_NAME] TCPdump is started\!
        else
            echo [$HOST_NAME] Error\! Cannot kill them\!
            exit 0
        fi
    fi
else 
    if [ "$1" = stop ]; then
        TD=`pidof tcpdump`
        if [ -n "$TD" ]; then
            kill "$TD"
        fi
        sleep 1
        if [ "" = "$(pidof tcpdump)" ]; then
            echo [$HOST_NAME] TCPdump is stopped\!
        else
            echo [$HOST_NAME] Error\! Cannot kill them\!
            exit 0
        fi        
    else
        echo [$HOST_NAME] Syntax error\!
        exit 0
    fi
fi 
```

报告称它已经捕获了数千个数据包。但是当我看到 tcpdump cap 文件时，它是空的，并且在使用 tcptrace 读取时出现问题。

```
...
Mon Mar 25 23:25:48 CET 2013 CapturedTraffic201303252230/Traffic30.dmp
tcpdump: listening on em2, link-type EN10MB (Ethernet), capture size
96 bytes 1403831 packets captured 1403831 packets received by filter 0
packets dropped by kernel Mon Mar 25 23:27:28 CET 2013

CapturedTraffic201303252230/Traffic31.dmp tcpdump: listening on em2,
link-type EN10MB (Ethernet), capture size 96 bytes 1378692 packets
captured 1378692 packets received by filter 0 packets dropped by
kernel
... 
```

现象是这样的（我用“ls -l”查看文件大小）：

```
...
-rw-r--r--. 1 root root 105206180 Mar 25 16:37 Traffic05.dmp
-rw-r--r--. 1 root root 117855276 Mar 25 16:39 Traffic06.dmp
-rw-r--r--. 1 root root 109911288 Mar 25 16:40 Traffic07.dmp
-rw-r--r--. 1 root root 121505444 Mar 25 16:42 Traffic08.dmp
-rw-r--r--. 1 root root 110303300 Mar 25 16:43 Traffic09.dmp
-rw-r--r--. 1 root root 120444026 Mar 25 16:45 Traffic10.dmp
-rw-r--r--. 1 root root  98545664 Mar 25 16:46 Traffic11.dmp
-rw-r--r--. 1 root root         0 Mar 25 16:48 Traffic12.dmp
-rw-r--r--. 1 root root         0 Mar 25 16:50 Traffic13.dmp
-rw-r--r--. 1 root root         0 Mar 25 16:51 Traffic14.dmp
-rw-r--r--. 1 root root         0 Mar 25 16:53 Traffic15.dmp
-rw-r--r--. 1 root root         0 Mar 25 16:54 Traffic16.dmp
... 
```

有时它有效，有时它没有。以前有人遇到过这种问题吗？非常感谢你帮助我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T10:06:37.890

我试过你的脚本，有几点（与你的问题无关）。

*   您分配`HOSTNAME`（顺便说一下，默认情况下已经设置）并且您始终使用 HOST_NAME。也许你想设置`HOST_NAME`？

*   脚本的最后`else`应该是`fi`

也就是说，当文件达到一定大小（又名缓冲区）时，它们会被写入磁盘。您可以强制同步 with `sync`。例子：

```
# ls -al
total 16
drwxr-xr-x 2 root     root  4096 Mar 26 10:51 .
drwxr-xr-x 5 elisiano users 4096 Mar 26 10:43 ..
-rwxr-xr-x 1 elisiano users 1327 Mar 26 10:49 ControlTCPdump.sh
-rw-r--r-- 1 root     root   119 Mar 26 10:51 tcpdump0326.console
-rw-r--r-- 1 root     root     0 Mar 26 10:51 traffic.dmp
[root@pc-elisiano /home/elisiano/Projects/ctcpd ]# ls -al
total 16
drwxr-xr-x 2 root     root  4096 Mar 26 10:51 .
drwxr-xr-x 5 elisiano users 4096 Mar 26 10:43 ..
-rwxr-xr-x 1 elisiano users 1327 Mar 26 10:49 ControlTCPdump.sh
-rw-r--r-- 1 root     root   119 Mar 26 10:51 tcpdump0326.console
-rw-r--r-- 1 root     root     0 Mar 26 10:51 traffic.dmp
# sync
# ls -al
total 24
drwxr-xr-x 2 root     root  4096 Mar 26 10:51 .
drwxr-xr-x 5 elisiano xbmc  4096 Mar 26 10:43 ..
-rwxr-xr-x 1 elisiano users 1327 Mar 26 10:49 ControlTCPdump.sh
-rw-r--r-- 1 root     root   119 Mar 26 10:51 tcpdump0326.console
-rw-r--r-- 1 root     root  8192 Mar 26 10:51 traffic.dmp 
```

您能否粘贴一次它不起作用的控制台输出的输出？

另外，您是否达到文件大小的文件系统限制？

要调试它，您可以在终端多路复用器（例如 screen 或 tmux）中使用您的 tcpdump 并让它在那里运行（即使您分离会话）。这样（当您重新附加会话时）您可以看到任何其他输出。

# asp.net - 无法加载文件或程序集'Newtonsoft.Json，版本 = 3.5.0.0。该系统找不到指定的文件

> ID：15632881
> 
> 赞同：1
> 
> 时间：2013-03-26T08:56:39.947
> 
> 标签：asp.net

尝试发布我的 asp.net 网站后，我遇到了错误

```
Could not load file or assembly 'Newtonsoft.Json, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b9a188c8922137c6' or one of its dependencies. The system cannot find the file specified. 
```

我尝试清理临时文件夹，但仍然出现同样的问题。有什么帮助吗？由于上述错误，我什至无法调试自己的网站。顺便说一句，我使用的是 Visual Studio 2008，并且在 Windows XP 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:04:43.990

我和一位同事能够解决这个问题。事实证明，我们在不知情的情况下使用了 Newtonsoft.Json，而且我们也使用了错误的版本。谢谢大家的帮助：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:29:08.450

你必须检查`path property`你的`assembly Newtonsoft.Json`，确认你在这个位置有组装

我建议您为所有程序集设置`Local Copy`并`false`定义公共存储库。

# php - 如何命名 $row 以供以后使用

> ID：15632883
> 
> 赞同：0
> 
> 时间：2013-03-26T08:56:43.820
> 
> 标签：php, html

我在一个文件中有一段代码从另一个 php 文件中获取值，它看起来像这样。

```
$sub = $_SESSION['5050goosedown'][$key]['price'] * $value; 
```

我想将它与我的其他 php 文件中的此字段相关联，但我不知道如何格式化它，因此它与**5050goosedown**标识符相关，这就是代码的样子

```
echo "<td>" . $row['price'] . "</td>"; 
```

我试过这个，但它没有用，但它应该让你知道我正在尝试什么。

```
echo '<td><name="5050goosedown[' . $row['price'] . ']">' ." 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:17:00.957

尝试 `echo "<td"."name=".$5050goosedown[$row['price']].">"."</td>"`

# iphone - 给出潜在的内存泄漏警告和应用程序崩溃

> ID：15632884
> 
> 赞同：1
> 
> 时间：2013-03-26T08:56:43.633
> 
> 标签：iphone, ios, objective-c, xcode, memory-leaks

我正在使用视频录制`ScreenCaptureView.`

我使用了以下代码；

```
 -(CGContextRef) createBitmapContextOfSize:(CGSize) size

    {    CGContextRef    context = NULL;     CGColorSpaceRef colorSpace;     int             bitmapByteCount;

        int bitmapBytesPerRow;

        bitmapBytesPerRow   = (size.width * 4);      
        bitmapByteCount     = (bitmapBytesPerRow * size.height); 
        colorSpace = CGColorSpaceCreateDeviceRGB();
         if (bitmapData != NULL)
         {       
            free(bitmapData);   
         }

         bitmapData = malloc( bitmapByteCount );
          if (bitmapData == NULL)
         {      
               fprintf (stderr, "Memory not allocated!");   
               return context=NULL;      
         }    

    context = CGBitmapContextCreate (bitmapData, size.width, size.height, 8, bitmapBytesPerRow,colorSpace, kCGImageAlphaNoneSkipFirst);

    CGContextSetAllowsAntialiasing(context,NO);
        if (context== NULL)
         {
        free (bitmapData);
        fprintf (stderr, "Context not created!");
        return NULL;
    }

    return context;

    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);
} 
```

但它给了我潜在的内存泄漏警告和应用程序崩溃。

它在 ipod 中运行良好，但在 ipad 中崩溃。

我该如何解决？

谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:05:42.280

```
CGContextRelease(context);
CGColorSpaceRelease(colorSpace); 
```

应该放在前面

```
return context; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:14:54.603

CGContextRef 内部包含一些内存分配。所以只需像这样使用@autoreleasepool 尝试一次。

```
 -(CGContextRef) createBitmapContextOfSize:(CGSize) size

            {   
  @autoreleasepool
   {

             CGContextRef    context = NULL;     
               CGColorSpaceRef colorSpace;     
                  int bitmapByteCount;

                int bitmapBytesPerRow;

                bitmapBytesPerRow   = (size.width * 4);      
                bitmapByteCount     = (bitmapBytesPerRow * size.height); 
                colorSpace = CGColorSpaceCreateDeviceRGB();
                 if (bitmapData != NULL)
                 {       
                    free(bitmapData);   
                 }

                 bitmapData = malloc( bitmapByteCount );
                  if (bitmapData == NULL)
                 {      
                       fprintf (stderr, "Memory not allocated!");   
                       return context=NULL;      
                 }    

            context = CGBitmapContextCreate (bitmapData, size.width, size.height, 8, bitmapBytesPerRow,colorSpace, kCGImageAlphaNoneSkipFirst);

            CGContextSetAllowsAntialiasing(context,NO);
                if (context== NULL)
                 {
                free (bitmapData);
                fprintf (stderr, "Context not created!");
                return NULL;
            }
            return context;

            CGContextRelease(context);
            CGColorSpaceRelease(colorSpace);
  }

        } 
```

# shell - 如何在没有 CronJob 的情况下调度 Unix Shell 脚本

> ID：15632886
> 
> 赞同：0
> 
> 时间：2013-03-26T08:56:49.940
> 
> 标签：shell, unix, cron, scheduling

我想安排一些 unix 脚本，以便它们在特定时间运行。我知道如何使用 cron 作业来做到这一点，但是我不能使用 cron 作业是有限制的。

有没有办法安排脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:30:50.690

有几种方法可以用来定期启动脚本：

1.  使用 anacron。该脚本将仅在重新启动期间（或显式启动 anacron 时）启动，但在指定时间间隔内不超过一次。
2.  使用 cron。
3.  使用 at/atd。您指定要启动脚本的时间。然后脚本必须重新安排自己的下一次启动。
4.  您编写的程序始终运行并检查现在是什么时间，如果是时间，那么它会启动您的脚本。实际上，那是一个自制的 cron。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:00:31.480

您可以启动一个`screen`会话并在适当的时间使用一个包装器 shell 脚本`sleep`。但这是骇人听闻的。

您可以从屏幕会话中分离出来，并在注销时让它运行，这样可以解决这部分问题。剩下的就是讨厌的 shell 脚本代码。

# ios - 工作多个表视图和数据源

> ID：15632889
> 
> 赞同：0
> 
> 时间：2013-03-26T08:57:00.137
> 
> 标签：ios, objective-c, uitableview

我有 3 个表视图和三个数据源。我用来自 XML 的数据填充它们。当我只填充一个表格视图时，所有表格视图都填充相同的文本。

所有 tableviewcells 具有相同的标识符：“AlbumCell”

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    otoFosilArray = [[NSMutableArray alloc] init];

    AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    updateArray = appDelegate.derinlikListesiArrayMikro;

    _arrayFosiller1 = [[NSMutableArray alloc] init];
    _arrayFosiller2 = [[NSMutableArray alloc] init];
    _arrayFosiller3 = [[NSMutableArray alloc] init];

    tableFosiller1.dataSource = self;
    tableFosiller1.delegate = self;
    tableFosiller2.dataSource = self;
    tableFosiller2.delegate = self;
    tableFosiller3.dataSource = self;
    tableFosiller3.delegate = self;

    [self otoFosilEkle];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if (tableView == self.tableFosiller1) {
        return 1;
    }
    else if (tableView == self.tableFosiller2) {
        return 1;
    }
    else if (tableView == self.tableFosiller3) {
        return 1;
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (cbvMBentik.checked == YES) {
        return [_arrayFosiller1 count];
    }
    if (cbvMPlanktonik.checked == YES) {
        return [_arrayFosiller2 count];
    }
    if (cbvMDiger.checked == YES) {
        return [_arrayFosiller3 count];
    }
    return 0;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView
                             dequeueReusableCellWithIdentifier:@"AlbumCell"];
    if (cbvMBentik.checked == YES)
        cell.textLabel.text = [_arrayFosiller1 objectAtIndex:indexPath.row];
    if (cbvMPlanktonik.checked == YES)
        cell.textLabel.text = [_arrayFosiller2 objectAtIndex:indexPath.row];
    if (cbvMDiger.checked == YES)
        cell.textLabel.text = [_arrayFosiller3 objectAtIndex:indexPath.row];

    return cell;
}

- (void)otoFosilEkle
{
    AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    otoFosilArray = appDelegate.derinlikListesiArrayMikroFosil;

    NSString *tempStr;

    for (int i = 0; i < [otoFosilArray count]; i++)
    {
        if ([[[otoFosilArray objectAtIndex:i] Durum]  isEqualToString:@"Bentik"]) {

            cbvMBentik.checked = YES;
            cbvMPlanktonik.checked = NO;
            cbvMDiger.checked = NO;
            tableFosiller1.userInteractionEnabled = YES;
            tableFosiller2.userInteractionEnabled = NO;
            tableFosiller3.userInteractionEnabled = NO;

            tempStr = @"text1";

            [_arrayFosiller1 addObject:tempStr];
            [tableFosiller1 reloadData];
        }
        if ([[[otoFosilArray objectAtIndex:i] Durum]  isEqualToString:@"Planktonik"]) {

            cbvMBentik.checked = NO;
            cbvMPlanktonik.checked = YES;
            cbvMDiger.checked = NO;
            tableFosiller1.userInteractionEnabled = NO;
            tableFosiller2.userInteractionEnabled = YES;
            tableFosiller3.userInteractionEnabled = NO;

            tempStr = @"text2";

            [_arrayFosiller2 addObject:tempStr];
            [tableFosiller2 reloadData];
        }
        if ([[[otoFosilArray objectAtIndex:i] Durum]  isEqualToString:@"Diğer"]) {

            cbvMBentik.checked = NO;
            cbvMPlanktonik.checked = NO;
            cbvMDiger.checked = YES;
            tableFosiller1.userInteractionEnabled = NO;
            tableFosiller2.userInteractionEnabled = NO;
            tableFosiller3.userInteractionEnabled = YES;

            tempStr = @"text3"

            [_arrayFosiller3 addObject:tempStr];
            [tableFosiller3 reloadData];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:13:14.030

您应该为每个表视图设置一个标签，然后在 switch 语句中检查这些标签以确定您正在使用哪个表视图。

```
- (void)viewDidLoad
{
    ...
    self.tableFosiller1.tag = 1;
    self.tableFosiller2.tag = 2;
    self.tableFosiller3.tag = 3;
    ...
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSInteger num = 0;
    switch(tableView.tag)
    {
       case 1:
       case 2:
       case 3:
         num = 1;
         break;
    }
    return num;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSInteger num = 0;
    switch(tableView.tag)
    {
       case 1:
         num = [_arrayFosiller1 count];
         break;
       case 2:
         num = [_arrayFosiller2 count];
         break;
       case 3:
         num = [_arrayFosiller3 count];
         break;
    }
    return num;    
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellText = nil;
    switch(tableView.tag)
    {
       case 1:
         cellText = [_arrayFosiller1 objectAtIndex:indexPath.row];
         break;
       case 2:
         cellText = [_arrayFosiller2 objectAtIndex:indexPath.row];
         break;
       case 3:
         cellText = [_arrayFosiller3 objectAtIndex:indexPath.row];
         break;
    }

    UITableViewCell *cell = [tableView
                             dequeueReusableCellWithIdentifier:@"AlbumCell"];
    if(!cell)
       cell = [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleDefault reuseIdentifier:@"AlbumCell"];
    cell.textLabel.text = cellText;

    return cell;
} 
```

如您所见，当涉及多个表视图时，事情会变得非常棘手。如果您对此不太满意，我建议您使用免费的 Sensible TableView 框架。该框架仅通过获取数组并生成表视图来工作。如果您将其与上面的代码进行比较，那真的很简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T09:00:09.620

你需要检查

```
if (tableView == self.tableFosiller1) {

}
else if (tableView == self.tableFosiller2) {

}
else if (tableView == self.tableFosiller3) {

} 
```

在所有委托方法中，因为您具有相同的标识符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:04:04.040

所有委托方法，您需要检查以下条件

```
if (tableView == table1) {

}
else if (tableView == table2) {

}
else if (tableView == table3) {

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T09:05:24.670

您需要三种类型的可重复使用的细胞

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

在此方法中为三种不同的细胞类型创建三个标识符和代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T09:07:39.290

```
if([tableView isEqual:self.tableFosiller1]){

  }
else if([tablView isEqual:self.tableFosiller2]){

   }
else if([tableView isEqual:self.tableFosiller3]){

    } 
```

只需检查所有 tableView 委托方法

# clearcase - 查找最后一次合并到分支 clearcase

> ID：15632890
> 
> 赞同：4
> 
> 时间：2013-03-26T08:57:08.577
> 
> 标签：clearcase

我有两个集成分支`int_1`和`int_2`.
在那个时候总有从`int_1`到合并`int_2`。

我想知道最后一次`int_2`从`int_1`分支对分支进行合并是什么时候。
有什么命令可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T01:18:16.437

严格来说，您的问题没有答案，因为 ClearCase 没有变更集或任何代表单个“合并”的功能。您所能做的就是搜索单个文件版本之间发生的合并，并查看每个文件执行的时间。如果它们在同一天，或者在时间上彼此非常接近，它们可能代表一个“合并”。

对于一个激励性的示例，首先通过“cleartool man find”查看手册，其中列出了一些使用 merge(from-branch, to-branch) 子句的示例。

要获取合并到 int_2 的版本 int_1，请尝试：

```
ct 找到 . -type f -branch 'brtype(int_1)' -version 'merge(/main/int_1,/main/int_2) && hltype(Merge,->)'

```

要查看目标版本，请添加一些额外的处理，例如：

```
ct 找到 . -type f -branch 'brtype(int_1)' -version 'merge(/main/int_1,/main/int_2) && hltype(Merge,->)' -exec 'echo -n "$CLEARCASE_XPN" && cleartool desc -short -ahlink 合并 $CLEARCASE_XPN'

```

要找出合并发生的时间，您需要对目标版本进行一些后处理（例如 cleartool desc -fmt '%Nd' ）以获取时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:09:21.327

如果您在谈论 UCM 集成分支，这意味着您已经完成了从一个 UCM 项目的一个[集成流](https://stackoverflow.com/questions/9880031/integration-stream-vs-integration-view-in-clearcase/9880266#9880266)交付到另一个项目的另一个集成流。

在这种情况下，请转到目标分支`int_2`，并查找`deliver.xxx`活动。最近的一个会告诉你最后一次交付是什么时候完成的。

使用基本 ClearCase，这并不是那么简单。
您需要列出 int_2 的最新版本，对其进行描述以查找合并超链接。
请参阅“[如何合并文件和目录](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/how_merge_file_dir.htm)”

![合并](../Images/5d0e79bf330c5c4656a772f1fcc77207.png)

在这里，您会看到，从 的最新版本到最旧版本`test`，最后一次合并`main`是在版本 3 上。
描述该版本将返回：

```
cleartool describe util.h@@/main/3version "util.h@@/main/3"
.
.
.
Hyperlinks:
Merge@278@/vob_3 /vob_3/src/util.h@@/main/rel2_bugfix/1
-> /vob_3/src/util.h@@/main/3 
```

你也可以试试：

```
cleartool describe -l util.h@@/main/3version 
```

# php - 服务器中带有循环的php套接字

> ID：15632891
> 
> 赞同：0
> 
> 时间：2013-03-26T08:57:11.083
> 
> 标签：php, sockets, daemon

我已经在装有 Windows 7 的本地计算机上安装了 easyphp。我正在尝试使用 php socket 作为服务器和 AJAX 作为客户端来开发一个简单的聊天应用程序。问题是要让服务器一直运行，您必须在 php 代码中有无限循环。当我尝试在浏览器中打开服务器页面时，它会出现响应时间问题。后来我知道我应该使用命令行或telnet之类的东西。现在我的问题是，我怎样才能一直使用这些命令行或 telnet 来运行 php 服务器？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:00:12.027

对于 PHP 守护程序（或永久运行脚本），您需要安装本地网络服务器，如 wamp (www.wampserver.com) 或 xamp。此外，php 从未打算用作守护程序，但是您可以在“在 Windows 7 上运行 php 守护程序”上找到大量资源。试着去做。

您的问题的核心是设置您的机器调用脚本，这可以通过命令行完成（+r 然后输入 cmd 并按回车键，访问您的 php 脚本的路径并使用 php 执行它`php daemon.php`，另见此链接- [http://php.net/manual/en/install.windows.commandline.php](http://php.net/manual/en/install.windows.commandline.php)）。

一旦它工作，你可以使用这个链接：[在 Windows 上运行 PHP 应用程序 - daemon or cron?](https://stackoverflow.com/questions/5758387/running-a-php-app-on-windows-daemon-or-cron)

# sql-server - 将数据库绑定到 ComboBox

> ID：15632895
> 
> 赞同：-1
> 
> 时间：2013-03-26T08:57:23.263
> 
> 标签：sql-server, vb.net, winforms, .net-4.0

我有一个`ComboBox`连接到 sql-server 的，我检索它上面的列。这是我的桌子

```
course_code           course

CTECH                computer technician
COMSCI               computer science 
```

例如，如果我从组合框中选择计算机技术人员，我如何检索`course_code` `CTECH`in 标签，那么如果我在组合框中选择计算机科学，我如何检索`course_code` `COMSCI`in 标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:11:13.107

有一大堆`Selected...`属性`SelectedItem`，例如 等。请参阅[此处](http://msdn.microsoft.com/en-us/library/txkcsbyf.aspx)`SelectedValue`的文档并选择您想要/需要的属性。

您可能想要做的是获取[SelectedValue](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvalue.aspx)；如果这不起作用，您需要更具体地说明如何将数据放入组合框（数据绑定？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:49:36.667

您可以通过使用属性 [Combo box].Selected Value;

绑定组合框时也绑定这些属性：comboBox1.ValueMember = "course_code"; comboBox1.DisplayMember = "课程";

# javascript - 如何在jquery中获取li chechbox检查状态

> ID：15632896
> 
> 赞同：0
> 
> 时间：2013-03-26T08:57:27.510
> 
> 标签：javascript, jquery, checkbox, html-lists, checked

如何`li checkbox`在 jquery 中获取检查状态。

我想要这个，但它让我不确定。

```
$('#ul'+$Id+' li:nth-child('+_index+') span input:checkbox').attr("checked") 
```

任何人都可以从这个中得到帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:59:45.193

[`.is(':checked')`](http://api.jquery.com/is/)在您的 jQuery 对象上使用。

```
$('#ul'+$Id+' li:nth-child('+_index+') span input:checkbox').is(':checked'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:04:21.657

为什么在javascript中使用变量$id？_index 是变量吗？

您可以选中一个复选框，例如

```
$(selector).prop('checked', true);
$(selector).prop('checked', false);
$(selector).attr('checked','checked');
$(selector).removeAttr('checked');
alert($(selector).is(':checked')); 
```

# javascript - 使用 MVC 将 Ext.Net 1.6 迁移到 Ext.Net 2.1 会破坏渲染器功能

> ID：15632903
> 
> 赞同：0
> 
> 时间：2013-03-26T08:57:52.873
> 
> 标签：javascript, asp.net-mvc-4, ext.net, renderer

所以我有一些大型项目，我正在创建一个使用 MVC 4 从 Ext.Net 1.6 迁移到 Ext.Net 2.1 的示例。这样做我偶然发现了错误，即（在使我的 web 应用程序符合我的主Page）我的 GridColumn 的渲染器引发以下错误：

```
Uncaught TypeError: Object function String() { [native code] } has no method 'format' 
Uncaught TypeError: Cannot call method 'removeChild' of null 
```

渲染器位于“HeadContent”占位符中，而 GridPanel 位于“MainContent”中

渲染器函数如下所示：

```
<script type="text/javascript">
    var template = '<span style="color:{0};">{1}</span>';

    var listname = function (value, meta, record) {
        return String.format(template, (record.data.blockstatus == "free") ? "green" : "red", value);
    };
</script> 
```

使用 ext.net 的一般示例页面确实可以正常工作。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:05:43.793

在 Ext JS 4 中，`String.format`被移除并替换为`Ext.String.format`函数。Ext JS 文档中提供了更多信息，请参阅

[http://docs.sencha.com/ext-js/4-2/#!/api/Ext.String-method-format](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.String-method-format)

另请参阅`#40`Ext.NET 2.0 Breaking Changes 的项目，

[http://examples.ext.net/#/Getting_Started/Introduction/BREAKING_CHANGES/](http://examples.ext.net/#/Getting_Started/Introduction/BREAKING_CHANGES/)

希望这可以帮助。

# ms-access - 我想从一个表中选择 300 行并将它们再次插入到同一个表中

> ID：15632916
> 
> 赞同：0
> 
> 时间：2013-03-26T08:58:23.480
> 
> 标签：ms-access, vb6

我有一个包含以下列的表 [Emp]：

EmpID、
EmpName、
EmpLastName、
EmpSalary、
月、
年、
ModDate

我想使用上个月的大约 300 条记录在同一个表中创建 300 条新记录，除了要在插入语句期间修改的月份属性外，其值相同。

为此，我想使用 MS Access + vb6。

如果您能帮助我解决这个问题，我将不胜感激。

我试图执行的查询如下：

```
INSERT INTO Emp ( EmpID, EmpName, EmpLastName, EmpSalary, [Month], [Year], ModDate)
SELECT Emp.EmpID, Emp.EmpName, Emp.EmpLastName, Emp.EmpSalary, 4 AS Expr1, Emp.[Year], Now() AS Expr2
FROM Emp
WHERE (((Emp.[Year])=2013) AND ((Emp.[Month])=3)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:35:56.107

您想要实现的本质是如下查询，它选择 2013 年 3 月的记录并将它们插入到 2013 年 4 月的同一个表中：

```
INSERT INTO Emp ( EmpID, EmpName, EmpLastName, EmpSalary, [Month], [Year], ModDate )
SELECT Emp.EmpID, Emp.EmpName, Emp.EmpLastName, Emp.EmpSalary, 4 AS Expr1, Emp.[Year], Now() AS Expr2
FROM Emp
WHERE (((Emp.[Year])=2013) AND ((Emp.[Month])=3)) 
```

**[编辑]**

上面的查询假设 [Month] 是一个数值列。如果 [Month] 是 Text 列，则相应的查询将是

```
INSERT INTO Emp ( EmpID, EmpName, EmpLastName, EmpSalary, [Month], [Year], ModDate )
SELECT Emp.EmpID, Emp.EmpName, Emp.EmpLastName, Emp.EmpSalary, 'April' AS Expr1, Emp.[Year], Now() AS Expr2
FROM Emp
WHERE (((Emp.[Year])=2013) AND ((Emp.[Month])='March')) 
```

但是请注意，存储月份*数字*比存储月份*名称***更可取**。将该列保留为 Text 可能会导致不必要的复杂化。

 ***[/编辑]**

您的 VB6 代码可以构造这样的字符串，将硬编码的值替换为 、 等 VB 函数的结果`Year()`（`Month()`并在 12 月->1 月递增年份）。构建 SQL 字符串后，您可以使用已建立的数据库连接执行它（很可能使用类似的方法`.Execute`）。*

# c# - 隐藏 webBrowser 滚动条 wpf

> ID：15632917
> 
> 赞同：3
> 
> 时间：2013-03-26T08:58:27.073
> 
> 标签：c#, wpf, browser, scrollbar

我有一个网络浏览器，我正在加载一个 .html 文件。问题是虽然我已经将 ScrollViewer.VerticalScrollBarVisibility 设置为“隐藏”，但滚动条仍然可见。

我也尝试过这种方法，但它不起作用

```
<WebBrowser x:Name="personalizedWebBrowser" HorizontalAlignment="Left"  VerticalAlignment="Top" 
                ScrollViewer.CanContentScroll="False"
                ScrollViewer.HorizontalScrollBarVisibility="Hidden" 
                ScrollViewer.VerticalScrollBarVisibility="Hidden"
                LoadCompleted="wb_LoadCompleted"/>

private void wb_LoadCompleted(object sender, System.Windows.Navigation.NavigationEventArgs e)
{
     mshtml.IHTMLDocument2 dom = (mshtml.IHTMLDocument2)personalizedWebBrowser.Document;
     dom.body.style.overflow = "hidden";
} 
```

你能建议点别的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-14T23:08:24.090

我通过在 wpf 项目中使用 Windows 窗体 WebBrowser 控件解决了这个问题：

```
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        string curDir = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + "\\help";

        System.Windows.Forms.Integration.WindowsFormsHost host =
            new System.Windows.Forms.Integration.WindowsFormsHost();
        System.Windows.Forms.WebBrowser webBrowser1 = new System.Windows.Forms.WebBrowser();
        host.Child = webBrowser1;

        webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;

        string sFileName = "file:///{0}/index.html";

        webBrowser1.Url = new Uri(String.Format(sFileName, curDir));
        webBrowser1.ScrollBarsEnabled = false;
        this.grid1.Children.Add(host);
    }

    private void webBrowser1_DocumentCompleted(object sender, System.Windows.Forms.WebBrowserDocumentCompletedEventArgs e)
    {
        System.Windows.Forms.WebBrowser webBrowser1 = sender as System.Windows.Forms.WebBrowser;
        if(webBrowser1==null)return;
        webBrowser1.Document.Body.Style = "overflow:hidden";
    } 
```

grid1 用作 webBrowser1 的容器

我们还需要在项目中添加以下程序集引用：WindowsFormsIntegration、System.Windows.Forms

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T18:46:29.803

将 Microsoft.mshtml 添加到您的项目引用中。您不需要更改 xaml 中的任何滚动属性，因为在使用 mshtml 时它们不是控制 WebBrowser 的属性。在 LoadCompleted 函数中，您将对 webbrowser 的实际文档进行如下更改：

```
private void webBrowserChat_LoadCompleted(object sender, NavigationEventArgs e)
{
    mshtml.IHTMLDocument2 documentText = (IHTMLDocument2)webBrowserChat.Document; 
    //this will access the document properties 
    documentText.body.parentElement.style.overflow = "hidden"; 
   // This will hide the scrollbar (Set to "auto" if you want to see when it passes the surfacelimit)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-20T00:06:51.733

对于使用 VS2019 的 vb.net，修改 DevDude 的解决方案如下：

```
Private Sub webObjectLoaded(ByVal sender as WebBrowser, Byval as NavigationEventArgs)
  Dim dom as MSHTML.IHTMLDocument2 = sender.Document
  dom.body.style.overflow = "hidden"
End Sub 
```

我在堆栈面板中显示了多个浏览器，因此调用代码如下所示：

```
Dim wb = New WebBrowser()
wb.NavigateToString(txt)
AddHandler wb.LoadCompleted, AddressOf webObjectLoaded 
```

我从 COM 添加了对“Microsoft HTML 对象库”的引用，它似乎在引用列表中显示为 Interop.MSHTML。

# sql - 如何使用 SQL 插入语句在 MS SQL CE 数据库中插入多行/批量记录？

> ID：15632918
> 
> 赞同：0
> 
> 时间：2013-03-26T08:58:28.443
> 
> 标签：sql, sql-server-ce

我喜欢在 MS SQL CE 中插入多条记录（批量插入）。我可以通过 VS 2010 studio 访问我的 CE (*.sdf) 数据库。

我用谷歌搜索并找到了下面的批量插入语法链接。 [在单个 SQL 查询中插入多行？](https://stackoverflow.com/questions/452859/inserting-multiple-rows-in-a-single-sql-query)

我准备了以下语法（现在只显示 3 条记录）：

插入 CompteGenerals

（公司、LineId、帐户、描述 1、描述 2）

值 (999999, 1, N'4000', N'Clients', N'Klanten')

,VALUES (999999, 2, N'4400', N'Fournisseurs', N'Leveranciers')

,VALUES (999999, 3, N'4510', N'TVA à payer', N'Verschuldigde BTW')

但我怎样才能插入我的批量记录？（由于定期重新创建SQL CE数据库（开发），不想手动添加所有记录）

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:36:09.920

SQL Server Compact 不支持该语法。但是您可以绕过查询处理器来执行非常快速的 INSERT，我的 SqlCeBulkCopy 库简化了这一点，可在[http://sqlcebulkcopy.codeplex.com获得](http://sqlcebulkcopy.codeplex.com)

# java - 为什么我不能使用嵌套类/对象？

> ID：15632923
> 
> 赞同：1
> 
> 时间：2013-03-26T08:58:48.233
> 
> 标签：java

我在编码时经常做这样的事情：

```
getNamedJdbcTemplate().update(sql, new MapSqlParameterSource() {

        {
            addValue("a", obj.getA());
            addValue("b", obj.getB());
            addValue("c", obj.getC());
        }
    }); 
```

或这个

```
getJdbcOperations().queryForObject(sql, new Object[] { id}, new RowMapper<Obj>(){

        @Override
        public Obj mapRow(ResultSet rs, int rowNum) throws SQLException {
            // TODO Auto-generated method stub
            return null;
        }}); 
```

我还使用了很多带有 Java 方法的内部类。

当然，如果我使用代码更多，那么我会将它放在不同的类中以便我可以重用它......问题是我的队友不喜欢这个，没有人能给我一个合适的理由为什么不...

他们谈论了很多关于内存泄漏和垃圾收集（GC）的话题，但我相信这些都是过去的事情。我正在使用 Java6 和 Spring 3。这些应用程序部署在 Tomcat 6 服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:27:00.613

我可以考虑使用*双括号初始化*和基本上任何匿名类通常有几个缺点：

1.  更多的内存消耗 - 每次你写`new A() { }`你基本上创建一个新的匿名子类 A 必须由类加载器加载，因此会消耗一些内存。但是我想说，尽管这对于某些内存消耗至关重要的应用程序可能很重要，但对于绝大多数程序（尤其是服务器端程序）来说，Java 类的内存开销是如此之小，以至于我什至不会考虑它.

2.  创建匿名子类可能会给许多依赖反射的框架和库带来意想不到的麻烦。`equals()`如果它不期望存在子类，它也可能会触发该方法。例如考虑如何对实例`new A() { int x = y; }`进行序列化和反序列化？Is`new A() {{ a = 7; }}`等于`new A() {{ a = 7; }}`（假设他们的课程分别是 A$5 和 A$9）。所以第四。

但除此之外，我没有看到这样做的任何其他缺点。提到的两个问题仅在某些情况下出现，并且可以在需要时轻松修复或解决。

一般来说，我也更喜欢一次性使用匿名类，而且我也经常使用双括号初始化，因为它使代码变得更好、更有条理并且更容易阅读。

PS我的一些同事也对我大喊大叫：D

# android - GCM 无效发件人错误

> ID：15632924
> 
> 赞同：8
> 
> 时间：2013-03-26T08:58:50.417
> 
> 标签：android, google-cloud-messaging

我在一个神秘的问题上停留了一段时间。所以我在我的 android 应用程序中实现了 GCM，但我收到了一个 INVALID_SENDER 错误。

*   我的 SENDER_ID 是来自 google 项目的 url 的 id。
*   Android 推送通知已开启

奇怪的是，我已经有一个注册 ID 可以发送通知。所以我的控制台看起来像这样：

```
03-26 09:39:20.233: I/<test>(19761): Already registered: APA91bG6-   O3OnZt50EAjYvJ5KETv3qAlPOn2SfOPXez7SLAmaAOkHTN6EMDJb91gFIWkftZkJiub6UoEk4O-  WQP7kk2oZGQjZ1VCZZS0WddQtjFaCfYfZfb7SEw3IS1sd4caJcdZE4LA1F0hxzc7Ss1UiYHXX-XXXX
03-26 09:48:23.522: I/<test>(19925): GCMIntentService 
03-26 09:39:20.670: I/<test>(19761): on Error INVALID_SENDER 
```

**在 onCreate 内部：**

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
    Log.i("<test>", "registering");
        GCMRegistrar.register(this, "2194354949XX");
} else {
    Log.i("<test>", "Already registered: " + regId);
} 
```

**广播接收器：**

```
 public class GCMBroadcastReceiver extends com.google.android.gcm.GCMBroadcastReceiver{
    @Override
    protected String getGCMIntentServiceClassName(Context context){
        return "be.XXX.XXX.system.GCMIntentService";
    }
} 
```

**GCMIntentService：**

```
 public class GCMIntentService extends GCMBaseIntentService {
    @Override
    protected void onError(Context arg0, String errorId) {
        Log.i("<test>","on Error " + errorId);
    }

    @Override
    protected void onMessage(Context arg0, Intent intent) {
        Log.i("<test>","onMessage " + intent.getExtras().toString());
    }

    @Override
    protected void onRegistered(Context arg0, String regId) {
        Log.i("<test>","Registration id: " + regId);
    }

    @Override
    protected void onUnregistered(Context arg0, String regId) {
        Log.i("<test>","onUnregistered " + regId);
    }

    public GCMIntentService() {
        super("2194354949XX");
        Log.i("<test>","GCMIntentService ");
    }
} 
```

**显现：**

```
 <permission
    android:name="com.XX.XX.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="com.smstiming.hezemans.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.VIBRATE" />

<receiver android:name="be.XX.XX.system.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.smstiming.hezemans" />
        </intent-filter>
    </receiver>

 <service android:name="be.XX.XX.system.GCMIntentService" /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-27T13:49:26.260

终于解决了这个问题。不小心尝试使用“项目 ID”而不是“项目编号”。Google Developer Console 在“概览”页面上提供了两者，请确保您使用的是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:24:29.367

忘记关闭 C2DM 服务。傻我..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T14:40:16.733

也许您的 senderID 不正确。您应该为类创建构造函数`GCMIntentService`并调用`super(<SenderId>)`.

# android - 如何在回调中正确保存包含父片段引用的对话框片段状态？

> ID：15632926
> 
> 赞同：1
> 
> 时间：2013-03-26T08:59:12.117
> 
> 标签：android, android-fragments, android-lifecycle

构造函数（注意 ListPickerHandler）

```
public StarredListPickerDialogFragment(ListPickerHandler h) {
        handler = h;
        mSelectedItems = new ArrayList<StarredList>();
    } 
```

这就是我调用父片段方法的方式（定义实现 ListPickerHandler 接口）

```
 alertDialog.setOnShowListener(new DialogInterface.OnShowListener() {
            @Override
            public void onShow(DialogInterface dialog) {
                Button negative = alertDialog.getButton(AlertDialog.BUTTON_NEGATIVE);
                Button positive = alertDialog.getButton(AlertDialog.BUTTON_POSITIVE);
                positive.setEnabled(false);
                negative.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View view) {
                        handler.onNegativeButtonAction(mSelectedItems);
                    }
                });
                positive.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View view) {
                        handler.onPositiveButtonAction(mSelectedItems);
                    }
                });
            }
        }); 
```

现在，当 android os 调用 onSaveInstanceState() 时，麻烦就来了。处理程序不再定义，我实际上没有线索来处理这种情况..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:52:03.057

通过将父片段转换为 ListPickerHandler（当 bundle 不为 null 时）来解决，ListPickerHandler 是调用片段实现的接口

# php - 由于升级到 php 5.3 php -i 输出为 html 格式

> ID：15632927
> 
> 赞同：3
> 
> 时间：2013-03-26T08:59:12.277
> 
> 标签：php, diagnostics

只是一个小问题，但有没有办法从

```
php -i 
```

从**v5.3 开始**，它似乎以 html 格式输出所有内容，这在命令行中是一团糟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:03:09.430

然后你应该禁用 xdebug 并将**php.ini**`html_errors`中的参数设置为. 我认为这应该有效。**`0`**

 **```
html_errors=0 
```

[通过 Xdebug 禁用 HTML 堆栈跟踪](https://stackoverflow.com/questions/6911897/disable-html-stack-traces-by-xdebug)**

# sql - SQL 报告服务中的日期，默认为美国

> ID：15632930
> 
> 赞同：0
> 
> 时间：2013-03-26T08:59:14.247
> 
> 标签：sql, sql-server, sharepoint-2010

我有一个 SharePoint 2010 服务器，我们正在设置 SQL Report Server 在 SQL 2012 上运行。一切正常，但是当您输入日期参数​​时，然后单击应用日期格式将恢复为基于美国 (MM/DD/YYYY)显示报告后。在单击它以英国格式 (DD/MM/YYYY) 显示并在 SQL 报告生成器本身中运行报告之前，它保持为英国。

我检查了 SharePoint 和 SQL 服务器，它们都是操作系统级别的英国地区。我已将 SQL 服务器语言更改为英国。运行 SELECT @@Language 时，@@Langid 显示 British 23。所有登录用户都设置为 British。

我遵循了各种在线建议，但每当我在 SharePoint 的报告中单击应用时，日期都会更改。我不知道日期格式在哪里或为什么会改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:40:31.403

如果设置正确，您是否尝试检查管理中心设置。[这](http://littletalk.wordpress.com/2010/10/18/central-administration-regional-settings-in-sharepoint-2010/)是如何做到这一点的。

您也可以在站点级别进行检查。[这里](http://sharepoint-tutorial.net/post/2011/06/08/sharepoint-language-settings-and-regional-settings.aspx)是如何。

希望有帮助的话

安德鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-17T05:38:42.937

您需要在 aspx 页面 RSViewerPage.aspx 的“<%@ Page ...”部分的末尾定义属性 UICulture="en-GB"。页面可以在这个位置找到：C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\TEMPLATE\LAYOUTS\ReportServer[这里的附加信息](http://www.tachytelic.net/2013/01/changing-the-format-of-date-parameters-on-a-sql-server-2012-reporting-services-report-that-is-sharepoint-integrated/)

# compiler-construction - 写一个 REPL：从哪里开始？

> ID：15632931
> 
> 赞同：2
> 
> 时间：2013-03-26T08:59:21.080
> 
> 标签：compiler-construction, interpreter, haxe, read-eval-print-loop

我学习了 Ruby 和 Scala，它们都有很好的 REPL。在学习一门语言时，交互式工具对我帮助很大。

最近我在学习 Haxe，发现它没有真正的 REPL（只是一种残缺的 shell 语言）。

我的最终目标是为 Haxe 制作一个 REPL。但我知道这需要做很多我目前的知识无法完成的工作。那么我应该从哪里开始呢？有没有关于 REPL 的好教程/书籍？或者我可以阅读其源代码的用于教育的玩具语言的 REPL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-06T04:49:16.223

Haxe有一个[REPL](https://github.com/ianxm/ihx)：

```
haxelib install ihx 
```

[这个旧线程](http://old.haxe.org/forum/thread/3395#nabble-td6622983)也可能很有趣。

他们提到[`hscript`](https://github.com/HaxeFoundation/hscript)。大概这就是您正在谈论的“残缺的外壳语言”。

他们还提到了两个脚本技巧：

```
haxe --macro MyClass.myMethod() 
```

和：

```
haxe -x MyClass
(call MyClass.main()) 
```

# android - android webview交互图表（可拖动）

> ID：15632933
> 
> 赞同：0
> 
> 时间：2013-03-26T08:59:29.003
> 
> 标签：android, html, charts, android-webview

我想在 webview 中创建一个图表，允许用户根据用户相应地单击和拖动。我查看了一些库，如 RGraph 和 aChartEngine，这些库只能创建用户无法自定义数据的图表。是否有任何库或其他方法可以创建用户可以自定义数据的图表？

# matlab - 使用神经网络将输入与输出相关联并使用遗传算法优化输入

> ID：15632936
> 
> 赞同：1
> 
> 时间：2013-03-26T08:59:34.673
> 
> 标签：matlab, optimization, neural-network, genetic-algorithm

我目前正在对激光切割进行工艺优化 - 在 MATLAB 中。我试图将工艺参数与切割质量联系起来，例如：

输入*（过程参数）*

1.  切割速度
2.  激光功率
3.  辅助气压

输出*（质量参数）*

1.  切削深度
2.  切割宽度

我首先训练一个神经网络模型，以便根据工艺参数预测切割质量。

```
[inputs,targets] = lasercutting_dataset;

nLayers = 2;            % number of hidden layers
trainFcn = 'trainlm';   % Levenberg Marqhart training function

net = fitnet(nLayers,trainFcn); 
```

这很好用，现在我对性能不感兴趣。

接下来我想使用遗传算法优化（最大化）输入参数切割速度。这意味着我的适应度函数（对象函数）是 1/切割速度。

我为我的适应度函数做了一个 matlab 函数：

```
function y = fitness(x)

    y = 1/x(1);

end 
```

接下来我设置设计变量的数量及其上下限：

```
nvars = 3;    % Number of variables
LB = [130 8130  4470];   % Lower bound
UB = [175 11255 8250];  % Upper bound 
```

接下来我定义了我对切割宽度的约束（我也会为深度添加一个）。

```
function [c, ceq] = constraints(net,x) 

    outs = net(x)

    c = [outs(2)+495; outs(2)-505];
    % 495 <= outs
    % outs <= 505

    ceq = [];

end 
```

这个功能是导致问题的功能！

最后，我为函数制作句柄并开始优化：

```
[x,fval] = ga(@fitness_func,nvars,[],[],[],[],LB,UB,@(x) ConstraintFunction(net,x)); 
```

我尝试在与 x 无关的约束函数内为神经网络 (net()) 定义一个输入向量 - 这很好用：

```
dummyInput = [value; value; value];
net(dummyInput); 
```

在其他人中，我遇到了错误，即我的函数约束没有获得足够的输入参数。

问题似乎在于将动态变化的“x”传递给函数，然后对其进行预测，将输出用于一组动态变化的约束。

关于可能是什么问题的任何想法？

我一直在使用[THIS](http://www.mathworks.se/support/solutions/en/data/1-EFLUUB/?solution=1-EFLUUB)和[THIS](http://www.mathworks.se/help/gads/examples/constrained-minimization-using-the-genetic-algorithm.html)来获得灵感。

任何帮助表示赞赏 - 很抱歉长时间的问题。我有几篇关于此事的文章 - 没有一篇文章解释了 matlab 中的问题，只是解释了程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:00:40.437

通过最大化 1/x，这将为您提供约束条件下最慢的切割速度。我假设您想最大化切割速度，而不是最小化它。

此外，您的约束功能也不是真正有效的。约束需要在表格中给出`x <= 0`。因此，如果输出应该是有界的，则约束`x >= 495 <=> 0 >= 495 - x`变为`x <= 505 <=> x - 505 <= 0`

但是，在您的功能中，您应该写`c = [outs(2)+495; outs(2)-505];`which should then be `c = [495 - outs(2); outs(2) - 505]`.

关于函数中的额外参数，也许这个文档可以提供[帮助](http://www.mathworks.de/de/help/optim/ug/passing-extra-parameters.html)。

# android - android：使用静态变量

> ID：15632943
> 
> 赞同：1
> 
> 时间：2013-03-26T08:59:58.740
> 
> 标签：android

当按下主页按钮应用程序被最小化并等待一个小时并重新打开应用程序分配值之前的静态变量为空为什么有人给我答案提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:14:36.610

尝试通过`onSaveInstanceState()`函数或使用来存储您的变量状态`SharedPreference`。

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) 
{
  super.onSaveInstanceState(savedInstanceState);
  savedInstanceState.putInt("MyInt", 1);
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) 
{
  super.onRestoreInstanceState(savedInstanceState);
  int myInt = savedInstanceState.getInt("MyInt");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:03:49.087

一旦类加载器子系统中没有类的实例，静态变量也会被垃圾收集所以你不能在静态变量中保存数据。如果您想保留数据，那么您可以使用共享首选项。

# ios - phonegap ios 的示例 config.xml

> ID：15632944
> 
> 赞同：1
> 
> 时间：2013-03-26T09:00:01.627
> 
> 标签：ios, cordova

谁能分享我的 ios 示例 config.xml，其中包括所有设备的应用程序图标和启动画面的配置？

当我在 config.xml 中包含以下代码时，应用程序崩溃了

```
<icon src="icon/ios/icon-57.png" /> <icon src="icon/ios/icon-57.png" gap:platform="ios" width="57" height="57" /> <icon src="icon/ios/icon-72.png" gap:platform="ios" width="72" height="72" /> 
```

在这方面需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:15:43.633

这是我的 config.xml 中的图标部分...

```
<icon src="res/icon/ios/icon-57.png"            gap:platform="ios"        width="57" height="57" />
<icon src="res/icon/ios/icon-72.png"            gap:platform="ios"        width="72" height="72" />
<icon src="res/icon/ios/icon-57-2x.png"         gap:platform="ios"        width="114" height="114" />
<icon src="res/icon/ios/icon-72-2x.png"         gap:platform="ios"        width="144" height="144" /> 
```

看起来您拥有的第一个图标标签会破坏它，因为没有属性。

# c# - 在C#中为迭代变量赋值？

> ID：15632949
> 
> 赞同：3
> 
> 时间：2013-03-26T09:00:16.457
> 
> 标签：c#, foreach, iteration

我在 C# 中有以下代码，使用`foreach`. 在一个循环中，我正在修改一个`List<T>`，在另一个循环中，我正在修改一个`string`数组。

我们不能直接给迭代变量赋值或者null，但是我们可以修改它的属性，修改在`List`finally中体现出来。

所以这基本上意味着迭代变量是对列表中元素的引用，那么为什么我们不能直接给它赋值呢？

```
class Program
{
    public static void Main(string[] args)
    {
        List<Student> lstStudents = Student.GetStudents();

        foreach (Student st in lstStudents)
        {
            // st is modified and the modification shows in the lstStudents
            st.RollNo = st.RollNo + 1;

            // not allowed
            st = null;
        }

        string[] names = new string[] { "me", "you", "us" };

        foreach (string str in names)
        {
            // modifying str is not allowed
            str = str + "abc";
        }
    }
} 
```

学生班：

```
class Student
{
    public int RollNo { get; set; }
    public string Name { get; set; }

    public static List<Student> GetStudents()
    {
        List<Student> lstStudents = new List<Student>();

        lstStudents.Add(new Student() { RollNo = 1, Name = "Me" });
        lstStudents.Add(new Student() { RollNo = 2, Name = "You" });
        lstStudents.Add(new Student() { RollNo = 3, Name = "Us" });

        return lstStudents;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T09:03:32.543

a 中的迭代变量`foreach`不是“*对*列表中元素的引用”——它只是`.Current {get;}`通过迭代器实现中的值`GetEnumerator()`——最*常见*的是通过`IEnumerator[<T>]`但并非总是如此——实际上对于 a`List<T>`它是一个`List<T>.Enumerator`值。在一般情况下，分配给迭代器变量没有“意义”。考虑：

```
IEnumerable<int> RandomSequence(int count) {
    var rand = new Random();
    while(count-->0) yield return rand.Next();
} 
```

这将与a*相同*`foreach`- 分配给它意味着什么？

因此，`foreach`不提供分配给迭代器变量的便利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:04:26.697

这是因为编译器`foreach`使用`Enumerator`. 枚举器只能在封闭的集合中向前移动，它们不能改变它们迭代的集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:04:09.073

它是一个引用类型，当然你可以修改它的属性，如果它们是可写的，这些更改将反映在引用所引用的对象中。

根据定义，引用类型的变量是对对象的引用。但这与对实际存储位置（例如变量或列表条目）的引用不同。

你可以把它想象成一个`Student`变量，它只包含找到原始对象的地址。通过将列表条目复制到变量中，您只是在复制地址，所以现在您有两个地址，一个在列表中，一个在变量中。通过重新分配变量，您正在向其中写入另一个地址，但这不会影响列表中的原始条目。它也不会覆盖变量之前引用的对象。

话虽如此，`foreach`可能不允许您重新分配迭代变量，因为它可能导致混淆/错误。它当前的实现方式，你总是知道迭代变量是当前元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T09:21:37.233

这是一个应该清楚的具体示例。

想象一下，你实现了一个`IEnumerable<int>`这样的：

```
public static IEnumerable<int> OneToTen()
{
    for (int i = 1; i <= 10; ++i)
    {
        yield return i;
    }
} 
```

鉴于此，如果在以下循环中您可以分配给 ，这意味着什么`n`？

```
foreach (var n in OneToTen())
{
    n = 1; // Change original "collection"? There isn't one!
} 
```

编译器*可以*让您更改`n`而无需更改被迭代的内容，但这会产生误导——这就是编译器不允许这样做的原因。

# cakephp - 从 1.3 升级到 2.3.1 后前缀路由不起作用

> ID：15632950
> 
> 赞同：0
> 
> 时间：2013-03-26T09:00:16.650
> 
> 标签：cakephp, upgrade

我已经能够运行我的应用程序的非前缀路由，但是，管理员前缀路由不起作用并引发堆栈跟踪错误，如下所示

```
Error: The view for UsersController::admin_home() was not found.
Error: Confirm you have created the file: C:\upgrade\app\View\Users\.ctp 
```

注意错误中唯一的 .ctp 并且没有文件名？在调试核心时，我发现 /lib/cake/view/view.php :: render 已被使用空参数调用。这正常吗？

有什么地方可以让我进一步追踪吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:00:02.853

您调用该操作的 url 是什么？

如文档中所述，您需要使用新的 2.x 语法来启用前缀：

```
Configure::write('Routing.prefixes', array('admin', ...)); 
```

这将在您的 core.php 中完成

此外，您需要断言您在 routes.php 中加载了默认路由，因为 2.x 将不再自动执行此操作：

```
require CAKE . 'Config' . DS . 'routes.php'; 
```

# class - Scala 中符号的导入和通配符导入

> ID：15632955
> 
> 赞同：7
> 
> 时间：2013-03-26T09:00:31.920
> 
> 标签：class, scala, macros, import, scala-macros

我有一个表示包、对象和类的符号列表，并希望在宏上下文中导入它们。

对于包和对象，这意味着通配符导入，而对于类，这意味着“标准”导入。

给定由和`List[Symbol]`组成的`some.package`，我将如何正确导入它们以及如何决定是否需要使用“标准”或通配符导入？`some.Class``some.Object`

我目前的做法是这样的：

```
def importPackageOrModuleOrClass(sym: Symbol): Import =
  if (sym.isPackage || sym.isModule) // e. g. import scala._, scala.Predef
    gen.mkWildcardImport(sym)
  else                               // e. g. import java.lang.String
    gen.mkImport(sym.enclosingPackage, sym.name, sym.name) // <--- ????? 
```

包/模块导入有效，但类导入不起作用，尽管它看起来正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T08:38:49.117

你需要像这样获得*“TermName”* ......

```
def importPackageOrModuleOrClass(sym: Symbol): Import =
if (sym.isPackage || sym.isModule)
    gen.mkWildcardImport(sym)
else
    gen.mkImport(sym.enclosingPackage, sym.name.toTermName, sym.name.toTermName) 
```

[您可以通过http://xuwei-k.github.io/scala-compiler-sxr/scala-compiler-2.10.0/scala/reflect/internal/Importers](http://xuwei-k.github.io/scala-compiler-sxr/scala-compiler-2.10.0/scala/reflect/internal/Importers.scala.html)的源代码获取有关导入、反射等的更多提示。 [scala.html](http://xuwei-k.github.io/scala-compiler-sxr/scala-compiler-2.10.0/scala/reflect/internal/Importers.scala.html)

# c# - 检查应用程序是否在模拟器上运行

> ID：15632956
> 
> 赞同：6
> 
> 时间：2013-03-26T09:00:32.023
> 
> 标签：c#, mobile, windows-8, microsoft-metro, windows-runtime

如何检查 WinRT 应用程序是否在模拟器中运行？

对于 Windows Phone，我使用以下代码：

```
 Boolean isOnEmulator 
            = (Microsoft.Devices.Environment.DeviceType == DeviceType.Emulator); 
```

但我找不到 WinRT 的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-20T10:56:16.027

你可以尝试这样的事情：

```
bool isRemote = Windows.System.RemoteDesktop.InteractiveSession.IsRemote; 
```

如果它在模拟器上，它将返回 true，否则返回 false。

# django - 在空 ImageField 上过滤查询集

> ID：15632957
> 
> 赞同：17
> 
> 时间：2013-03-26T09:00:47.880
> 
> 标签：django

我有以下课程：

```
class Book(models.Model):
    picture = models.ImageField(upload_to='books/', blank=True, null=True)
    ... 
```

我现在想过滤没有图片的书籍。我尝试了以下方法：

```
Book.objects.filter(picture__isnull=True) 
```

问题是，图片是 db 中的空 varchar ('') 而不是 null。该怎么办？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-26T09:17:33.000

尝试这个：

```
Book.objects.filter(picture__exact='') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-30T19:08:05.710

只需运行***排除***方法：

```
Books.objects.exclude(picture='') 
```

# git - 如何提交文件，如果在添加并提交文件后修改了文件

> ID：15632958
> 
> 赞同：1
> 
> 时间：2013-03-26T09:00:52.593
> 
> 标签：git

我有一个问题，`git add today.c`然后我`git commit today.c`，通过这一步，文件`today.c`已经被修改（我使用shell脚本来做这个修改），然后我将文件推送到`origin master`，但是文件仍然是一样的，它没有被修改，但在我的工作目录中，`today.c`确实是被修改了。

如何将修改后的文件推送到`origin master`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:07:01.297

如果您在文件中提交更改，然后将更改推送到另一个分支，则只有提交被推送到此分支，在您的情况下，推送到`origin`.

您在提交后更改了文件，因此它在您的工作副本中进行了修改，但尚未在您的存储库中注册为提交。这就是为什么 a`push`不会更改远程存储库中的文件的原因。
为此，您必须再次提交文件，然后推送新的提交。

请参阅此解释指令集：

```
git add today.c
git commit -m "First change" # Creates commit 1
./your_magical_shell_script_changes_today.c
git push origin master # Only commit 1 exists, therefore, only this is pushed to master
git add today.c
git commit -m "Changed by the shell script" # Here, the commit 2 is created
git push origin master # Now it is pushed to origin, too. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T09:05:00.497

四光，请你做以下好吗？
`git add today.c`
`git commit -m 'modify'`
`git push origin master`
并再次检查。

# optimization - 知道图像的方向向量

> ID：15632960
> 
> 赞同：0
> 
> 时间：2013-03-26T09:00:55.853
> 
> 标签：optimization, opencv, image-processing

我的数学有点生疏，但我有一个问题。我有一个投影在地板上的 2D 图像，它有两个字符，如 [A1]。我使用手机摄像头来检测、解码这两个字符。例如，考虑一辆车，它的摄像头穿过这两个角色，一次向前，一次向后越过这两个角色 [A1]。在这两种方式中，为了检测每个字符，我必须将其旋转 180*，然后在每帧使用字符模板进行 NCC，这很耗费计算量。有没有更好的方法或优化的方法来做到这一点并保存旋转等。?

还有一种方法可以从投影在地板上的图像中知道方向矢量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:28:46.963

还有其他方法可以检测图像上的“特征”，匹配的描述符（SURF-Speeded-Up Robust Feature 或 SIFT-Scale Invariant Feature Transform）是尺度和旋转不变的。

在此[链接](http://www.chrisevansdev.com/computer-vision-opensurf.html)中，您可以找到 C#、Java (ImageJ) 和 C++ 的一些实现 OpenCV 也有几种算法实现。

这个想法是从模板图像中提取描述符并将它们与目标图像进行比较，而无需旋转或缩放它。

希望能帮助到你

# django - Django没有局部变量错误

> ID：15632965
> 
> 赞同：0
> 
> 时间：2013-03-26T09:01:08.607
> 
> 标签：django

我的一项功能有问题。当我提交没有任何价值的帖子表单时，我收到此错误。

```
 local variable 'picture' referenced before assignment

 Traceback:
 File "C:\Python26\Lib\site-packages\django\core\handlers\base.py" in get_response
   111\.                         response = callback(request, *callback_args, **callback_kwargs)
 File "C:\o\17\mysite\pet\views.py" in BoardEditor
   260\.             return render(request,'boardeditor.html',     {'picture':picture,'board':BoardNameForm(request.user),'boardpicture':BoardPictureForm(request.user),}) 
```

我想我理解导致问题的原因，因为在我看来。我有一个图片变量，可以检索我所有的图片，如果它们没有来自 POST 的值。我得到这个错误。

我一直在寻找并尝试解决如何处理变量为 None 并且我没有成功的解决方案。

这是我从收集的所有资源中尝试的解决方案

如果 board 为 None ，则为其分配一个空值。

```
 if forms.is_valid():
            board = forms.cleaned_data['board']
            if board == None:
                picture = "" 
```

当它们对我的图片变量没有价值时，我该如何应对错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:16:16.093

```
[..........]
    if forms.is_valid():
        board = forms.cleaned_data['board']

        picture = "" //<--add
        if board:
            boards = forms.cleaned_data['board']
            picture = Picture.objects.filter(board=boards)
        return render(request,'boardeditor.html',{ // align with if board:
            'picture':picture, 
            'board':BoardNameForm(request.user), 
            'boardpicture':BoardPictureForm(request.user),
         })
    if formss.is_valid():
        pooh = forms.cleaned_data['board']

        pict = "" //<--add
        if pooh:
            pooh = formss.cleaned_data['board']
            pict = Picture.objects.filter(board=pooh)
        return render(request,'boardeditor.html',{ // align with if pooh:
            'pict':pict, 
            'board':BoardNameForm(request.user), 
            'boardpicture':BoardPictureForm(request.user),
        })
[..........] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:09:22.553

当您的表单未通过验证（is_valid() 返回 false）时，您将收到此错误，因此在这种情况下，您根本没有定义图片。您可以在开始时创建一个上下文字典，然后将所需的变量放在那里。像这样的东西

```
 context_data = {}
 if form.is_valid():
   context_data['picture']=Picture.objects.filter(board=boards)
 return render(request,'boardeditor.html',context_data) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T09:20:02.840

以下是导致错误的行：

```
return render(request,'boardeditor.html',{'picture':picture,'board':BoardNameForm(request.user),'boardpicture':BoardPictureForm(request.user),}) 
```

原因是 return 语句不在 if 条件下，因此它`picture`在所有情况下都尝试返回变量。所以根据你的代码：

```
if forms.is_valid():
    board = forms.cleaned_data['board']
    if board == None:
        picture = ""
        if board:
            boards = forms.cleaned_data['board']
            picture = Picture.objects.filter(board=boards)
return render(request,'boardeditor.html',{'picture':picture,'board':BoardNameForm(request.user),'boardpicture':BoardPictureForm(request.user),}) 
```

如果`if forms.is_valid()`条件失败，您仍在尝试返回`picture`未定义的变量。您需要确保在访问它之前定义了变量。

有很多方法可以做到这一点。例如：

### 示例 1：

```
if forms.is_valid():
    board = forms.cleaned_data['board']
        if board:
            boards = forms.cleaned_data['board']
            picture = Picture.objects.filter(board=boards)
else:
    picture = '' # or None or False or Whatever
return render(request,'boardeditor.html',{'picture':picture,'board':BoardNameForm(request.user),'boardpicture':BoardPictureForm(request.user),}) 
```

### 示例 2：

```
picture = '' # or None or False or Whatever
if forms.is_valid():
    board = forms.cleaned_data['board']
        if board:
            boards = forms.cleaned_data['board']
            picture = Picture.objects.filter(board=boards)
return render(request,'boardeditor.html',{'picture':picture,'board':BoardNameForm(request.user),'boardpicture':BoardPictureForm(request.user),}) 
```

### 示例 3：

```
if forms.is_valid():
    board = forms.cleaned_data['board']
        if board:
            boards = forms.cleaned_data['board']
            picture = Picture.objects.filter(board=boards)
    return render(request,'boardeditor.html',{'picture':picture,'board':BoardNameForm(request.user),'boardpicture':BoardPictureForm(request.user),})
else:
    return render(request,'boardeditor.html',{'picture':'','board':BoardNameForm(request.user),'boardpicture':BoardPictureForm(request.user),}) 
```

或者按照 Aldarund 的建议将所有变量放入字典中，然后将字典传递给上下文。

# javascript - 我试着让它闪烁，但它不起作用

> ID：15632968
> 
> 赞同：1
> 
> 时间：2013-03-26T09:01:15.793
> 
> 标签：javascript, jquery, html, css

我正在尝试在我公司的 ERP 中创建通知系统，类似于 Facebook 系统。现在，经过几个小时的工作，它看起来像这样：

![例子](../Images/a0b7593fac09db56fc2b601098a1fbab.png)

每个菜单项都是一个`li`元素。每个元素都可以有一个类来修改它的背景颜色：

*   `selected`是蓝色的，显示在图片上
*   `restricted`是红色的

现在，我想要实现的是`li`在某些事件上使背景闪烁（当新消息进来并且列表没有打开（并且`selected`类也不存在）时）。

**问题是：它不会闪烁。:(**

这是我的 html 快照（不包括消息框）

```
<li class="notifications-topmenu-button selected">
  <a href="#">
    <div class="notifications-topmenu-button-wrapper">
      <div class="notifications-topmenu-button-icon">
        <img class="transparent" width="13" height="13" align="absmiddle" src="/images/icons/notifications.png" title="Powiadomienia" alt="Powiadomienia">
      </div>
      <div class="notifications-topmenu-button-counter" style="display: block;">3</div>
    </div>
  </a>
  <span class="divider"> : </span>
</li>
<li class="selected">
  <a href="/system_dev.php/users/profile">Strona główna</a>
  <span class="divider"> : </span>
</li> 
```

此外，还有一些 JavaScript 启动对象（不要介意注释）：

```
function notificationsObject(){
  var nl = new Object();

  //atrybuty klasy
  nl.liElement = $('.notifications-topmenu-button');
  nl.menuButton = $('.notifications-topmenu-button-wrapper');
  nl.menuButtonCounter = nl.menuButton.find('.notifications-topmenu-button-counter');
  nl.notificationsCount = jQuery.trim(nl.menuButtonCounter.text());
  nl.notificationsList = $('.notifications-list-wrapper');
  nl.blinkingInterval = null;

  nl.startBlinking = function(){
    nl.blinkingInterval = setInterval(function(){
                                        if(nl.liElement.hasClass('restricted') == false){
                                          console.debug(nl.liElement.addClass('restricted'));
                                        } 
                                          else {
                                            nl.liElement.removeClass('restricted');
                                          }
                                      }, 1000);
  }

  nl.stopBlinking = function(){
    if(nl.blinkingInterval != null) nl.blinkingInterval = null;
  }

  (more 'class' functions)

  return nl;
} 
```

现在要测试它，我只需调用

```
$(document).ready(function(){

  var notifications = notificationsObject();
  notifications.startBlinking();

}); 
```

当然我在函数声明之后调用它。

有趣的事实是，当我将`nl.startBlinking`函数`setInterval`内部更改为仅添加`restricted`类时，它可以工作。我很确定它一定是一些错字或愚蠢的错误，但我找不到它。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:11:42.260

尝试使用 toggleClass 函数而不是自己检查类，例如：

```
setInterval(function(){
    nl.liElement.toggleClass('restricted');                                       
}, 1000); 
```

jQuery 参考：[http ://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:25:48.547

好的，问题解决了。

问题是这个功能

```
nl.startBlinking = function(){
    nl.blinkingInterval = setInterval(function(){
                                        if(nl.liElement.hasClass('restricted') == false){
                                          console.debug(nl.liElement.addClass('restricted'));
                                        } 
                                          else {
                                            nl.liElement.removeClass('restricted');
                                          }
                                      }, 1000);
  } 
```

开始执行声明。

所以当我打电话时

```
$(document).ready(function(){

  var notifications = notificationsObject();
  notifications.startBlinking();

}); 
```

我没有一个，而是两个间隔同时工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T09:13:38.743

[我把你所有的代码都放到了这里](http://jsfiddle.net/5LXFp/)的 Fiddle中，它工作了。不确定是什么问题。

添加了CSS

```
.restricted{
    visibility:hidden;
} 
```

也去掉了`(more 'class' functions)`线。但是我假设您只是将其添加到帖子中，并且它不是您代码的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T09:28:48.643

添加和删​​除 2 个类，而不是仅受限制

```
if(nl.liElement.hasClass('restricted') == false){
                                           nl.liElement.addClass('restricted');
                                           nl.liElement.removeClass('selected');
                                        }
                                          else {
                                           nl.liElement.removeClass('restricted');
                                           nl.liElement.addClass('selected');
                                          } 
```

# python - 为什么 grep 在子进程标准输入中返回所有输出？

> ID：15632969
> 
> 赞同：1
> 
> 时间：2013-03-26T09:01:17.370
> 
> 标签：python, subprocess

```
ubuntu@ubuntu:/home/ubuntuUser$ cat test.txt 
This is a test file
used to validate file handling programs
#pyName: test.txt
this is the last line
ubuntu@ubuntu:/home/ubuntuUser$ cat test.txt | grep "#pyName"
#pyName: test.txt
ubuntu@ubuntu:/home/ubuntuUser$ "

#1  >>> a = subprocess.Popen(['cat test.txt'], 
                             stdin=subprocess.PIPE,
                             stdout=subprocess.PIPE, 
                             stderr=subprocess.PIPE, 
                             shell=True)
#2  >>> o, e = a.communicate(input='grep #pyName')
#3  >>> print o
#3  This is a test file
#3  used to validate file handling programs
#3  #pyName: test.txt
#3  this is the last line
#3  
#3  >>> 
```

问题：

Q1：文件上的shell grep 命令只打印匹配的行，而通过子进程的grep 打印整个文件。怎么了？

Q2：通过communicate()发送的输入如何添加到初始命令（'cat test.txt'）中？之后`#2`，初始命令是否会在“|”之后附加来自通信的输入字符串 和shell命令变得像`cat test.txt | grep #pyName`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:43:29.020

也许传递`grep`给`communicate()`-function 不像你想象的那样工作。您可以通过直接从文件中提取来简化您的过程，如下所示：

```
In [14]: a = subprocess.Popen(['grep "#pyName" test.txt'], stdin = subprocess.PIPE, stdout = subprocess.PIPE, stderr=subprocess.PIPE, shell = True)

In [15]: a.communicate()
Out[15]: ('#pyName: test.txt\n', '') 
```

在 python 中做你想做的事情可能会更聪明。如果它在文件中，以下将打印您的行。

```
In [1]: with open("test.txt") as f:
   ...:     for line in f:
   ...:         if "#pyName" in line:
   ...:            print line
   ...:            break
   ...:         
#pyName: test.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:52:13.440

你在这里所做的本质`cat test.txt < grep ...`上显然不是你想要的。要设置管道，您需要启动两个进程，并将第一个的标准输出连接到第二个的标准输入：

```
cat = subprocess.Popen(['cat', 'text.txt'], stdout=subprocess.PIPE)
grep = subprocess.Popen(['grep', '#pyName'], stdin=cat.stdout, stdout=subprocess.PIPE)
out, _ = grep.communicate()
print out 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T22:15:40.277

@prasath 如果您正在寻找使用通信（）的示例，

```
[root@ichristo_dev]# cat process.py  -- A program that reads stdin for input
#! /usr/bin/python

inp = 0  
while(int(inp) != 10):  
    print "Enter a value: "  
    inp = raw_input()  
    print "Got", inp  

[root@ichristo_dev]# cat communicate.py
#! /usr/bin/python

from subprocess import Popen, PIPE  

p = Popen("./process.py", stdin=PIPE, stdout=PIPE, stderr=PIPE, shell=True)  
o, e = p.communicate("10")  
print o  

[root@ichristo_dev]#./communicate.py  
Enter a value:   
Got 10 
```

# c# - 从 SQL Server 检索图像并设置为 PictureBox 图像属性

> ID：15632972
> 
> 赞同：1
> 
> 时间：2013-03-26T09:01:21.040
> 
> 标签：c#, entity-framework, user-controls, picturebox

我想使用实体框架从 SQL Server（数据库）中检索图像并将其设置为 PictureBox 图像属性我已经创建了一个用户控件并将其继承给 PictureBox（名称：DisplayImage）

```
 public static void LoadDisplay(Guid? DisplayID, string Name, byte[] image)
    {
        DisplayImage objDisplayImage = new DisplayImage();
        DisplayList.Add(objDisplayImage);
        objDisplayImage.Name = Name;
        MemoryStream ms = new MemoryStream(image);
        Image myImage = Image.FromStream(ms);
        objDisplayImage.Image = myImage;
        objDisplayImage.DisplayID = DisplayID;
        PlayerForm.Instance.Controls.Add(objDisplayImage);
    } 
```

但图片没有加载到图片框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:11:19.280

试试这个代码

```
try
{
    // get image from object
    byte[] _ImageData = new byte[0];
    _ImageData = (byte[])_SqlRetVal;
    System.IO.MemoryStream _MemoryStream = new System.IO.MemoryStream(_ImageData);
    _Image = System.Drawing.Image.FromStream(_MemoryStream);
}
catch (Exception _Exception)
{
    // Error occurred while trying to create image
    // send error message to console (change below line to customize error handling)
    Console.WriteLine(_Exception.Message);

    return null;
} 
```

# asp.net-mvc-3 - 保存原始响应数据并使用 MVC 替换它们

> ID：15632976
> 
> 赞同：0
> 
> 时间：2013-03-26T09:01:37.730
> 
> 标签：asp.net-mvc-3

我需要在服务器上获取响应数据（包括 html 标记），然后将它们替换为另一个并发送到客户端。最好的方法是在哪里？

Response.OutputStream 已关闭以供阅读。那么我可以用什么来读取数据呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:04:12.087

> 我需要在控制器中获取响应数据（包括 html 标记）

由于显而易见的原因，这是不可能的。响应 HTML 是在视图执行时生成的，在控制器操作完成执行之后的很晚的阶段。

如果您想修改响应 HTML，您可以编写一个[`response filter`](https://stackoverflow.com/a/10596288/29407).

# ruby - 自动简化正则表达式的工具

> ID：15632977
> 
> 赞同：12
> 
> 时间：2013-03-26T09:01:42.213
> 
> 标签：ruby, regex, code-analysis

我正在尝试消除开源项目中的警告，并且

```
/[\.\,\;\:\(\)\[\]\{\}\<\>\"\'\`\~\/\|\?\!\&\@\#\s\x00-\x1f\x7f]+/ 
```

在给我

```
(irb):1: warning: character class has duplicated range 
```

是否有任何工具可以自动指出正则表达式的哪些部分导致重叠？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T09:17:04.923

我不知道任何工具，但我发现了重叠：`\s`包含`\t`、、和`\f`，因此与零件重叠。`\n``\r``\x00-\x1f`

因此，除非有办法让 Ruby 本身告诉您它发现了一个“问题”，否则您可以将此正则表达式编写为（删除所有那些不必要的反斜杠）：

```
/[.,;:()\[\]{}<>"'`~\/|?!&@# \x00-\x1f\x7f]+/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T09:38:00.743

如果你曾经到了绝望的地步，我想你可以在 Ruby 源代码中输出一些调试信息并重新构建。:) 我相信这是引发警告的地方：

[https://github.com/ruby/ruby/blob/trunk/regparse.c#L1787](https://github.com/ruby/ruby/blob/trunk/regparse.c#L1787)

# c - 如何在不堆叠旧数据的情况下接收 UDP 数据

> ID：15632978
> 
> 赞同：2
> 
> 时间：2013-03-26T09:01:44.950
> 
> 标签：c, network-programming

我正在通过 UDP 协议将数据从一个 c 程序发送到另一个

接收数据时，我处理字符串并在我的函数中使用它，问题是如果我没有时间接收新数据，因为我的函数需要更多时间才能完成，数据将堆叠，然后我将拥有处理旧数据而不是处理最近的数据，这是我实时处理的实际目标

谁能帮我这个 ？

这是我的接收代码：

```
addr_len = sizeof their_addr;
if ((numbytes = recvfrom(sockfd, ubuf, 6 , 0,(struct sockaddr *)&their_addr, &addr_len)) == -1) 
{
    perror("recvfrom");
    //exit(1);
}

inet_ntop(their_addr.ss_family,get_in_addr((struct sockaddr *)&their_addr),s, sizeof s);

//printf("listener: packet is %d bytes long\n", numbytes);

ubuf[numbytes] = '\0';
printf("listener: packet contains \"%s\"\n", ubuf); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:08:32.087

如果您的目标是实时，那么您*不能*在处理每个数据包上花费那么长时间。

如果这样做，那么您将始终“迟到”，并且基本上会丢弃发送给您的大部分数据，这似乎毫无意义且损坏。

尽管如此，解决它的一种方法可能是实现一个后台线程来为传入的数据提供服务，并将其打上时间戳并将其放入某种队列中。然后，您的“工作”线程可以从队列中轮询数据，并丢弃已经挂起太久的数据包。

尽管如此，这并不是真正的“实时”，它......很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:57:38.427

如果将套接字更改为非阻塞模式，则可以一次执行多次读取并丢弃除最后一条消息之外的所有数据。

除了阅读之外，您还需要使用一些选择调用。在 Win32 中（您的 Win 代码是吗？）有很多选项。`poll`在 Linux 中，有`select`和许多不变量。

# java - Java解压缩字节数组

> ID：15632979
> 
> 赞同：2
> 
> 时间：2013-03-26T09:01:45.480
> 
> 标签：java, zip, gzip, zlib

在服务器 (C++) 上，二进制数据使用`ZLib`函数进行压缩：

```
compress2() 
```

并将其发送到客户端（Java）。在客户端 (Java) 上，应使用以下代码片段解压缩数据：

```
public static String unpack(byte[] packedBuffer) {
    InflaterInputStream inStream = new InflaterInputStream(new ByteArrayInputStream( packedBuffer);
    ByteArrayOutputStream outStream = new ByteArrayOutputStream();
    int readByte;
    try {
        while((readByte = inStream.read()) != -1) {
            outStream.write(readByte);
        }
    } catch(Exception e) {
        JMDCLog.logError(" unpacking buffer of size: " + packedBuffer.length);
        e.printStackTrace();
    // ... the rest of the code follows
} 
```

问题是，当它尝试在 while 循环中读取时，它总是抛出：

> java.util.zip.ZipException：存储的块长度无效

在我检查其他可能的原因之前，有人可以告诉我我可以使用 compress2 在一侧压缩并使用上面的代码在另一侧解压缩，所以我可以将其作为问题消除吗？另外，如果有人知道这里可能出了什么问题（我知道我在这里没有提供太多代码，但是项目相当大。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:51:45.440

我认为问题不在于 unpack 方法，而在于 packedBuffer 内容。解压工作正常

```
public static byte[] pack(String s) throws IOException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    DeflaterOutputStream dout = new DeflaterOutputStream(out);
    dout.write(s.getBytes());
    dout.close();
    return out.toByteArray();
}

public static void main(String[] args) throws Exception {
    byte[] a = pack("123");
    String s = unpack(a);   // calls your unpack
    System.out.println(s);
} 
```

输出

```
123 
```

# mysql - 将 prepare() 与 DQL 查询一起使用有意义吗？

> ID：15632982
> 
> 赞同：2
> 
> 时间：2013-03-26T09:01:53.200
> 
> 标签：mysql, doctrine-orm, dql

通常在我的项目中，我将 DQL 查询用于非简单的数据库语句。**是否有必要或推荐使用带有 DQL 查询的 prepare() 函数？**

我正在对此进行研究，但在官方文档中并没有说明这一点；也确实，其中 prepare() 函数仅用于 SQL 查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:47:26.177

Doctrine 2 ORM 查询甚至没有`prepare()`方法（参见[`Doctrine\ORM\AbstractQuery`API](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/AbstractQuery.php)）。

在内部，ORM 保留一个[“脏”状态标志](https://github.com/doctrine/doctrine2/blob/2.3.3/lib/Doctrine/ORM/Query.php#L433)，告诉 ORM 是否需要重新解析查询。解析后，[该标志被删除](https://github.com/doctrine/doctrine2/blob/2.3.3/lib/Doctrine/ORM/Query.php#L204-L209)，再次执行查询时不需要进一步的操作。

当您执行查询时，它会被抛出 DBAL 层，该层`prepare()`会在需要时自行处理调用（取决于平台），因此您不必手动处理。

正如您所看到的，事情已经为您优化了开箱即用。

# scala - 重载方法和反射调用

> ID：15632985
> 
> 赞同：2
> 
> 时间：2013-03-26T09:01:58.787
> 
> 标签：scala, reflection, structural-typing

在以下 REPL 会话中：

```
scala> new Object { def foo = "bar" }
res0: Object{def foo: String} = $anon$1@131a24c

scala> res0.foo
<console>:9: warning: reflective access of structural type member method foo should be enabled by making the implicit value language.reflectiveCalls visible.
          res0.foo
               ^
res1: String = bar

scala> trait Foo { def foo: String }
defined trait Foo

scala> new Foo { def foo = "bar"; def foo(bar: Int, baz: Int) = "bar" }
res2: Foo{def foo(bar: Int,baz: Int): String} = $anon$1@18a4aef

scala> res2.foo(1, 2)
res4: String = bar 
```

调用 to`res0.foo`是一个反射调用，因为`res0`已向 . 添加了一个新的结构成员`Object`。但是，调用 to`res2.foo(1, 2)`并没有抱怨缺少`import language.reflectiveCalls`. 显然`def foo: String`是造成了那种沉默。不`res2.foo(1, 2)`应该是反射电话吗？有人可以解释编译器保持安静的原因吗？

# android - ExpandableListView - 一个复选框，作为是否展开的指示器

> ID：15632986
> 
> 赞同：0
> 
> 时间：2013-03-26T09:02:05.683
> 
> 标签：android, android-layout, expandablelistview

这就是我所拥有的，我可扩展列表视图。每个 Group 项目都是一个 Checkbox，旁边有一个 Textview。

如果组已扩展或未扩展，我希望该复选框被选中/取消选中。

反之亦然，因此如果选中复选框，则应展开列表等。

有任何想法吗？

这是我的 group_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <CheckBox
        android:id="@+id/check_channel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:focusable="false"
        android:layout_gravity="left"
        android:checked="false" />

    <TextView
        android:textSize="20sp"
        android:textIsSelectable="false"
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:layout_marginLeft="55dp"/>

</RelativeLayout> 
```

它看起来很漂亮，只需要它来检查和取消选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:15:25.560

啊，好吧，我就是这样做的

```
public View getGroupView(int groupPosition, boolean isExpanded, View convertView,ViewGroup parent) { 
    View v;
    if (convertView == null) {
        v = newGroupView(isExpanded, parent);
    } else {
        v = convertView;
    }

    if ( isExpanded ) {
        ((CheckBox) v.findViewById(R.id.check_channel)).setChecked(true);
    } else {
        ((CheckBox) v.findViewById(R.id.check_channel)).setChecked(false);
    }
    bindGroupView(groupPosition, isExpanded, v, parent);
    return v;
} 
```

# json - 如何在流星模板中获取 json @attributes 项

> ID：15632988
> 
> 赞同：1
> 
> 时间：2013-03-26T09:02:12.810
> 
> 标签：json, meteor

我有一个从 XML 转换并保留“@attributes”的 json：

```
{"stop":"1021","route":"0057","direction":"1","departures":{"departure":[
{"@attributes":{"accurate":"1","headsign":"Rennes R"},"content":"2013-03-25T12:00:23+01:00"},
{"@attributes":{"accurate":"0","headsign":"Rennes R"},"content":"2013-03-25T12:20:00+01:00"},
{"@attributes":{"accurate":"0","headsign":"Rennes R"},"content":"2013-03-25T12:40:00+01:00"}]}},... 
```

您可以在这里访问 javascript [1] 中的属性：

```
departure[0]["@attributes"].accurate 
```

但是如果你想用 Meteor 在模板中抓取它，你怎么做呢？

[1] [JSON @属性](https://stackoverflow.com/questions/11316923/json-attributes)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:45:00.517

html 端的模板如下所示：

```
<template name="status">
   <div class="line {{status}}_line">
       {{stop}}
       {{#each departures.departure}}
         {{> attributes}}
       {{/each}}
   </div>
</template>

<template name="attributes">
    <div class="attributes">
        {{content}}
        accurate : {{{access_attributes this}}}
    </div>
</template> 
```

在 js 方面：

```
Template.attributes.access_attributes = function(context) {
    return context["@attributes"].accurate
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T05:35:53.367

我建议在函数中访问该字段，例如

```
Templates.your_template.attributes = function()
{ 
   return this["@attributes"];
} 
```

在您的模板中

```
{{attributes}} 
```

# html - css盒子阴影抬起角

> ID：15632990
> 
> 赞同：0
> 
> 时间：2013-03-26T09:02:14.413
> 
> 标签：html, css

我正在尝试将带有 css 的提升阴影效果应用于一个盒子，但是当我使用负 z-index 时，阴影会出现在盒子后面，并且应该留在盒子底部的效果也会消失，而不是停留在效果上发生。

这是我的代码及其外观：http: [//jsfiddle.net/K7tSy/4/](http://jsfiddle.net/K7tSy/4/)

```
.boxz:before {
      z-index: 1; 
      position: absolute; 
      content: "";
      bottom: 8px;
      left: 28px;
      width: 90%; 
      top: 80%;
      max-width:300px;
      background: rgba(0, 0, 0, 0.7); 
     -webkit-box-shadow: 0 15px 10px rgba(0,0,0, 0.7); 
        -moz-box-shadow: 0 15px 10px rgba(0, 0, 0, 0.7);
             box-shadow: 0 15px 10px rgba(0, 0, 0, 0.7);
      -webkit-transform: rotate(3deg); 
         -moz-transform: rotate(-3deg); 
           -o-transform: rotate(-3deg);
          -ms-transform: rotate(-3deg);
              transform: rotate(2deg);
   } 
```

这是测试站点[http://www.codita.ro/asd/ 请](http://www.codita.ro/asd/) 注意，如果我将 z-index 设置为负数，效果就会消失，而不是像小提琴一样出现。当我设置负 z-index 时，有人可以解释是什么阻止它在小提琴中显示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T04:32:53.957

您的元素是没有 z-index 堆叠上下文的容器的子元素。如果您将它放在 div 中作为背景颜色，请使用“位置：相对”和 z-index = 1 设置 div 的样式以在容器内设置堆叠上下文。

参考：

[https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context?redirectlocale=en-US&redirectslug=CSS%2FUnderstanding_z-index%2FThe_stacking_context](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context?redirectlocale=en-US&redirectslug=CSS%2FUnderstanding_z-index%2FThe_stacking_context)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T09:46:37.127

`content : ""`从类中删除`.boxz:before`。

希望这会给你想要的结果。

我已经在您的[http://www.codita.ro/asd/中进行了测试](http://www.codita.ro/asd/)

**OP**

加入`background-color:#FFFFFF`你的`wrapall`班级。

# java-me - zxing 1.7需要什么版本的Java？

> ID：15632991
> 
> 赞同：0
> 
> 时间：2013-03-26T09:02:33.783
> 
> 标签：java-me, zxing

我正在为 J2ME 开发条形码扫描应用程序。为此，我知道必须使用 zxing 1.7。zxing 1.7 需要什么版本的 Java？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:43:31.560

1.7 是支持 JavaME 的最后一个版本，是的。因此，它只需要 Java 1.2。我认为它需要 CLDC 1.1 和 MIDP 2.0。

# python - 如何在 tkinter 中使用 SHIFT 选择多个复选框？

> ID：15632992
> 
> 赞同：1
> 
> 时间：2013-03-26T09:02:39.977
> 
> 标签：python, checkbox, tkinter

问题很简单，我使用 . 在 Text 小部件中创建了许多复选框。`window_create`代码如下：

```
import tkinter as tk

root = tk.Tk()
sb = tk.Scrollbar(orient="vertical")
text = tk.Text(root, width=40, height=20, yscrollcommand=sb.set)
sb.config(command=text.yview)
sb.pack(side="right",fill="y")
text.pack(side="top",fill="both",expand=True)
for i in range(30):
    cb = tk.Checkbutton(text="checkbutton %s" % i,padx=0,pady=0,bd=0)
    text.window_create("end", window=cb)
    text.insert("end", "\n") 

root.mainloop() 
```

这是它的样子：

![在此处输入图像描述](../Images/b8e09fd5bce7391c1abe1adaf247869a.png)

我想选择多个复选框，如果我必须单击每个复选框，这很麻烦。那么这里有没有可以使用**SHIFT的方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:03:10.787

您应该将`'<Shift-Button-1>'`事件绑定到每个检查按钮，以及`'<Button-1>`指示应该选择的范围的开始。此外，考虑将代码包装在一个类中以获得更好的可读性：

```
class App:
    def __init__(self, root):
        self.start = 0
        self.root = root
        self.sb = tk.Scrollbar(orient="vertical")
        text = tk.Text(root, width=40, height=20, yscrollcommand=self.sb.set)
        self.sb.config(command=text.yview)
        self.sb.pack(side="right",fill="y")
        text.pack(side="top", fill="both", expand=True)
        self.chkbuttons = [tk.Checkbutton(text="checkbutton %s" % i,padx=0,pady=0,bd=0)
                          for i in range(30)]                        
        for cb in self.chkbuttons:
            text.window_create("end", window=cb)
            text.insert("end", "\n")
            cb.bind("<Button-1>", self.selectstart)
            cb.bind("<Shift-Button-1>", self.selectrange)

    def selectstart(self, event):
        self.start = self.chkbuttons.index(event.widget)

    def selectrange(self, event):
        start = self.start
        end = self.chkbuttons.index(event.widget)
        sl = slice(min(start, end)+1, max(start, end))
        for cb in self.chkbuttons[sl]:
            cb.toggle()
        self.start = end

if __name__ == '__main__':
    root = tk.Tk()
    app = App(root)
    root.mainloop() 
```

# css - Chrome 和 Firefox CSS 边框问题

> ID：15632999
> 
> 赞同：0
> 
> 时间：2013-03-26T09:03:16.097
> 
> 标签：css, google-chrome, firefox, border

嗨，我在 Firefox 和 Chrome 中显示边框时遇到了这个问题。它在 Safari 中看起来不错。

小提琴/现场演示：http: [//jsfiddle.net/hirokotenshi/JhfS8/](http://jsfiddle.net/hirokotenshi/JhfS8/)

Chrome 和 Firefox 中的那个看起来有点锯齿状。
在这里：http: [//i923.photobucket.com/albums/ad77/Chapter-s/Screenshot2013-03-26at43905PM_zps5d62d1c9.png](http://i923.photobucket.com/albums/ad77/Chapter-s/Screenshot2013-03-26at43905PM_zps5d62d1c9.png)

我的 CSS：

```
#whatsnew {
  margin-top: 50px;
  border: 1px solid #D9D9D9;
  border-right: 50px solid #d52b1e;
  padding: 35px;
  -webkit-font-smoothing: antialiased;
      font-smoothing: antialiased;
  font-family: Verdana;
  padding-top: 20px;
  padding-bottom: 15px;
} 
```

任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:28:45.580

这实际上是设计使然 - 边框在拐角处对角连接，因此您看到的是右边框的边缘逐渐变细以与其他 1px 边缘相接。

我能想到的最佳解决方案是使用包装 div，对其应用 1px 边框，然后将红色边框保留在内部 div 中：

HTML：

```
<div id="wrapper">
<div id="whatsnew">
  <div id="whatsnewtitle">What's new?</div>
  <div id="whatsnewcon">
  <b>Do you know?</b><br />
  <br />
  Royal Dutch Shell plc filed its Annual Report on Form 20-F for the year ended December 31, 2012 with the U.S. Securities and Exchange Commission.
  <br />
  <br />
  <div style="text-align: right;">
  <a href=""><b>Find out more...</b></a>
  </div>

  </div>
</div>
</div> 
```

CSS：

```
#wrapper {
border: 1px solid #D9D9D9;
margin-top: 50px;
-webkit-font-smoothing: antialiased;
    font-smoothing: antialiased;
font-family: Verdana;
}
#whatsnew {
border-right: 50px solid #d52b1e;
padding: 35px;
padding-top: 20px;
padding-bottom: 15px;
} 
```

[http://jsfiddle.net/JhfS8/1/](http://jsfiddle.net/JhfS8/1/)

（快速而肮脏的黑客......）

如果您想避免包装器右侧的灰色边框，您也可以将其更改为红色：

```
 border-right-color: #d52b1e; 
```

...如果你想变得**非常**聪明，你可以使用`position: relative`负边距将内部 div '拉'出边框，所以灰色消失在红色后面：

[http://jsfiddle.net/JhfS8/2/](http://jsfiddle.net/JhfS8/2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T09:10:44.923

尝试：`-webkit-backface-visibility: hidden;`或`-webkit-transform-style: preserve-3d;`或添加一些填充除了`backface-visibility`一个