# StackOverflow 问答 13453000-13453999

# matplotlib - 使用带有 1D 向量的 matplotlibs contourf 函数

> ID：13453000
> 
> 赞同：0
> 
> 时间：2012-11-19T11:38:46.123
> 
> 标签：matplotlib

我有一个大型数据集，其中包含一个月中每一天的三个同样大的单列向量（后方位角、频率和功率）的文件。我想使用诸如contourf之类的东西在极坐标图上显示数据。但是，我不确定如何将功率数据重塑为二维数组。下面是一个例子，

```
from pylab import *

x=rand(100)
y=rand(100)
z = rand(100)    # 1D

BAZ, FREQ = meshgrid(x, y)
ax = plt.subplot(111, polar=True)
contourf(BAZ, FREQ, z)       # z needs to be 2D 
```

任何知道我可以如何重塑 z 所以这会起作用？？？谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:45:31.520

从 tiago 上面的评论中的链接，答案是，

```
x=rand(100)
y=rand(100)
z = rand(100) 

xgrid = np.linspace(x.min(), x.max(), 100)
ygrid = np.linspace(y.min(), y.max(), 100)
xgrid, ygrid = np.meshgrid(xgrid, ygrid)
zgrid = griddata((x,y),z, (xgrid, ygrid))

ax = plt.subplot(111, polar=True)
contourf(xgrid, ygrid, zgrid) 
```

谢谢，
D。

# sitecore - Sitecore：出现看似随机的错误

> ID：13453008
> 
> 赞同：1
> 
> 时间：2012-11-19T11:39:10.837
> 
> 标签：sitecore, sitecore6

我们在安装过程中遇到了一些非常奇怪的错误。有时，Sitecore 会突然抛出错误：

```
Assert: Value Cannot be null. Parameter: Item. 
```

我最接近确定问题的方法是将其缩小到索引或网络数据库。

无论如何，如果我登录到 sitecore，项目只是丢失了，我可以通过 3 种方式修复它：

*   重建索引。
*   回收应用程序池
*   `iisreset`

你们中有人知道为什么会发生这种情况吗？我们正在运行 Sitecore.NET 6.5.0（修订版 120706）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:04:54.157

您描述的是系统稳定性问题，因此我建议您通过 Sitecore 支持 ( [http://support.sitecore.net](http://support.sitecore.net) ) 开一张票。此类问题很难通过 Stack Overflow 进行故障排除，因为我们无权访问您的日志和配置。

打开工单时，我建议使用[支持包生成器](http://sdn.sitecore.net/Resources/Tools/Support%20Package%20Generator.aspx)，它捆绑了 Sitecore 支持解决问题所需的所有信息（Web.config、App_Config 文件、IIS 设置、Sitecore 日志文件）。这是一个非常漂亮的工具。

也就是说，根据您的描述，听起来问题与缓存有关。重新启动 IIS 解决问题的事实表明该项目位于 Web 数据库中，但运行时看不到它。您可以通过使用 /sitecore/admin/cache.aspx 屏幕清除缓存来证明这是否是问题所在。如果您的缓存没有正确更新，您应该根据 SDN [Scaling Guide](http://sdn.sitecore.net/Reference/Sitecore%206/Scaling%20Guide.aspx)中的指南检查您的配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T18:00:14.030

基于知道您正在使用高级数据库爬虫，您的问题可能是您如何将 a 转换`SkinnyItem`为`Item`. 我以前遇到过这个问题。如果您查看[SkinnyItem.cs 类](http://svn.sitecore.net/AdvancedDatabaseCrawler/Branches/v2/Sitecore.SharedSource.Searcher/SkinnyItem.cs)，有一种`GetItem()`方法可以将其转换为`Item`. 您可以看到它使用数据库通过 ID、语言和版本号来获取项目。当您从 master 发布到 web 时，您可能正在发布现有项目的新版本，因此新版本存在于 web 数据库中，但索引未更新并引用旧版本。因此，此`GetItem()`调用将使用以前的版本 # 并且该项目将为空。解决此问题的一种方法是不调用该`GetItem()`方法，只需使用您自己的代码从 Sitecore 获取该项目的最新版本，例如

```
Item item = Sitecore.Context.Database.GetItem(someSkinnyItem.ItemID); 
```

代替

```
Item item = someSkinnyItem.GetItem(); 
```

这是一个示例流程：

*   在主数据库中创建的 Foo 项目作为版本 1。
*   将 Foo 发布到网络
*   索引将在 web 数据库中获取版本 1 并放入索引。
*   任何针对索引的查询代码都将通过该方法将 转换`SkinnyItem`为一个，并将 1 作为版本号传递。`Item``GetItem()`
*   页面将加载，日志中没有错误
*   回到 master，创建 Foo 的第 2 版并发布。
*   索引可能不会立即更新，或者即使配置错误。
*   查找索引的代码将调用`GetItem()`并且仍然使用版本 1 调用，因为它在索引中
*   但是当您发布时，web 不再具有版本 1，它现在具有版本 2，因此该项目 Foo 的特定版本为空
*   错误显示在日志中

与此类似，[这里是 Alex Shyba（ADC 的创建者）的博客文章，内容](http://sitecoreblog.alexshyba.com/2012/07/sync-up-sitecore-search-index-update.html)是关于如何将 HTML 缓存清除与索引更新同步。这可能会有所帮助。

# xaml - 使用 VisualStateManager 控制 XAML 网格结构

> ID：13453009
> 
> 赞同：1
> 
> 时间：2012-11-19T11:39:13.830
> 
> 标签：xaml, winrt-xaml, grid-layout

我正在编写一个 WinRT 应用程序，需要在快照视图中更改其布局。在常规视图中，详细信息显示在以下结构的网格中：

MainGrid：包含 2 行 2 列（我们称它们为 M11、M12、M21、M22）

DetailGrid：占据MainGrid的最右列和上排，包含1行2列相等，所以布局是这样的：M12包含水平分层的D1和D2

在快照视图中，我希望重新定义 DetailGrid，使其具有单列和 2 行：M12 包含垂直分层的 D1 和 D2

如果我不关心列宽，我可以使用 StackPanel 而不是 Grid 来显示详细信息，并在捕捉模式下将 StackPanel 方向从水平更改为垂直。但是 D1 和 D2 必须在标准模式下使用所有可用空间并且大小相同，因此我通过 Grid ColumnDefinition 控制它们。但是网格定义不是使用 VisualStateManager 可以轻松控制的。

您认为管理此类布局的最佳方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T23:20:59.173

网格定义很难控制，但我发现更改网格内控件上的 Grid.RowSpan 或 Grid.RowColumn 跨度应该能够在快照视图中执行您需要的操作

# android - 我们可以在不更新整个画布的情况下更新画布的一部分吗？

> ID：13453010
> 
> 赞同：0
> 
> 时间：2012-11-19T11:39:22.287
> 
> 标签：android, image, android-canvas

我正在扩展 ImageView 以显示图像。图像的输入流来自套接字以及它们的左上角坐标。

我能够显示图像的一部分，因为剩余的屏幕是白色的。我的问题是总画布被当前位图覆盖，并且以前的绘图被白屏擦除。

我搜索了解决方案，我发现有关画布的信息是“在调用 canvas.drawBitmap(bitmap,top,left,paint) 时绘制画布的每个像素”。

我需要更新图像（画布）的唯一脏部分而不更新整个画布。

请建议我如何更新屏幕（画布）的脏部分和以前的图纸不应该被删除。

感谢和问候

小型的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-19T12:07:33.387

你可以用已有的东西制作画布，而不是在上面创建一个空白，然后在上面画画。这是如何实现它的示例。

```
yourImageView.setDrawingCacheEnabled(true);
Bitmap bm = yourImageView.getDrawingCache();
final Canvas canvas = new Canvas(bm); 
```

然后你有一个画布，其中包含以前在 ImageView 中的任何内容，你可以更新你想要的任何部分。为此，我建议您查看[PorterDuff 模式](http://softwyer.wordpress.com/2012/01/21/1009/)。

# c# - 在开始和结束时调用方法 - 在 C# 中有更好的方法吗？

> ID：13453012
> 
> 赞同：2
> 
> 时间：2012-11-19T11:39:34.723
> 
> 标签：c#, coding-style

我有几种具有以下结构的方法：

```
 public void doWhatever()
    {
     methodToPrepareEnvironment();
     // do something
     methodToResumeEnvironment();
    } 
```

我所有的“doWhatever”类型的方法都调用了这些准备/恢复方法，所有这些 doWhatever 方法只调用了 1 个准备和 1 个恢复方法。有没有更好的方法来实现这一点，而不必在我所有的 doWhatever 方法的开头和结尾调用 prepare 和 resume 方法？我觉得我在这里遗漏了一些非常基本的东西。请注意，doWhatever 方法不能组合，它们每个都需要独立，它们每个都需要准备环境，执行一些任务，然后恢复环境。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T11:41:56.097

通过策略性地使用访问修饰符，您可以确保外部调用始终在方法调用之前和之后进行，几乎没有重复，如下所示：

```
public void DoWhatever()
{
    DoAction(DoingWhatever);
}

private void DoingWhatever()
{
    // ...
}

private void DoAction(Action action)
{
    methodToPrepareEnvironment();

    action();

    methodToResumeEnvironment();
} 
```

An`Action`是代表没有返回值的方法的委托。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T11:40:52.000

> 有没有更好的方法来实现这一点，而不必在我所有的 doWhatever 方法的开头和结尾调用 prepare 和 resume 方法？

传入一个委托（两个内置委托是[`Action`](http://msdn.microsoft.com/en-us/library/system.action.aspx)和[`Func`](http://msdn.microsoft.com/en-us/library/bb534960.aspx)）：

```
public void doWhatever(Action anAction )
{
 methodToPrepareEnvironment();

 anAction();

 methodToResumeEnvironment();
} 
```

* * *

关于确保`Prepare`and`Resume`总是*被*调用 - 上面不满足这一点，因为`anAction`可以由任何可以访问它的代码调用。

您可以调查[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming) - 一个流行的工具是[PostSharp](http://www.sharpcrafters.com/postsharp/features)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T11:53:34.050

我会这样做，引入一个委托，该委托具有要在 methodToPrepareEnvironment() 和 methodToResumeEnvironment() 之间调用的函数的签名，然后将函数附加到委托并以这种方式调用 doWhatever

```
doWhatever(Fn); 
```

//////

```
public delegate void ToDO();
class Program
{
    public void Fn()
    {

        Console.WriteLine("This is Fn");

    }

    public void doWhatever(ToDO t)
    {
        methodToPrepareEnvironment();
        t();
        methodToResumeEnvironment();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T12:53:17.907

一个稍微不同的选项（虽然不像这些选项那样“干净”，而且对于试图维护代码的人来说*肯定*不那么直观，那就是用属性标记函数，然后有一个构建步骤，在之前和之后注入方法调用：

```
[WrapWithEnvironmentCalls()]
public void MyFunction()
{
    // Code goes here
} 
```

我相信 CTP [Rosalyn](http://blogs.msdn.com/b/csharpfaq/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp.aspx)有一些功能可以解决这个问题。

警告：我永远不会在我的代码中这样做，它不可维护、不直观，并且可能在代码审查中被撕成碎片，但我只是为那些更喜欢冒险的人提供它作为替代选项。

# vbscript - VB脚本使用文件夹结构替换文本

> ID：13453013
> 
> 赞同：1
> 
> 时间：2012-11-19T11:39:42.050
> 
> 标签：vbscript

我对 VB 脚本很陌生。我需要 VB 脚本来替换特定的文本

下面是我的文件目录

1.  E:\TEST\98\6549871\1959893\HTML
2.  E:\TEST\98\6549871\1959793\HTML
3.  E:\TEST\98\6549876\1959863\HTML
4.  E:\TEST\96\6749473\6959895\HTML
5.  E:\TEST\99\2548878\5959893\HTML

ETC。，

在每个 HTML 子文件夹中，test.html 和 img.html 页面将包含在哪里。在那个 html 页面中，我想找到文本**="img/**并需要用**="/image/98/6549871/1959893/HTML/img/**替换，其中**="/image/**对所有文件都是通用的，其余值是根据文件夹结构（即一级文件夹名称、二级文件夹名称、三级文件夹名称和四级文件夹名称）

对于我需要像上面那样做的每个单独的文件，并且花费太多时间来做这个活动。

任何人都可以帮助我在文件夹目录的基础上一次性替换所有**=“img/” 。**

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:56:59.290

像这样的东西..未经测试，但应该为您指明正确的方向

```
Option Explicit

Dim fileCount

Sub ProcessSubDirectory( ByVal directory)

On Error Resume Next

Dim fso
Dim dir
Dim folder
Dim file

Set fso = CreateObject("Scripting.FileSystemObject")
Set dir = fso.GetFolder(directory)

If Err.Number <> 0 THen
    MsgBox "Failed to open dir ( " & directory & " )"
    Exit Sub
End If

On Error Goto 0

For Each file in dir.Files
    Call HandleFileFix( file.Path )
Next

For Each folder in dir.SubFolders
    Call ProcessSubDirectory( folder.Path )
Next

Set fso = Nothing

End Sub

Sub HandleFileFix( ByVal file)

Dim fso
Dim f
Dim fo
Dim contents
DIm path

Set fso = CreateObject("Scripting.FileSystemObject")
Set fo = fso.GetFile( file )
Set f = fso.OpenTextFile( file, 1 )

    path = fo.Path
    path = Replace( path, fo.Drive, "")
    path = Replace( path, fo.Name, "")
    path = Replace( path, "\", "/")

If f.AtEndOfStream = false then
    contents = f.ReadAll
End If

f.Close
Set f = Nothing

contents = Replace( contents, "='img/", "='" & path & "/img/")

' write file back to disk
Set f = fso.OpenTextFile( file, 2 )
f.Write contents
f.Close 
fileCount = fileCount + 1
Set f = Nothing

End Sub

fileCount = 0

Call ProcessSubDirectory( "D:\TEST\" )

MsgBox "done (" & CStr(fileCount) & ")" 
```

# android - 查看带有片段的寻呼机 - 显示对话框 onStart

> ID：13453018
> 
> 赞同：1
> 
> 时间：2012-11-19T11:39:59.470
> 
> 标签：android, android-activity, dialog, android-viewpager, fragment

我是使用视图寻呼机的新手，我做的一切都正确，我将我的活动转换成片段并将它们放在 FragmentPagerStateAdapter 中。在模拟器中测试它时，我注意到 onCtreate 到 onResume 在视图寻呼机上的实际可见性之前被称为一个片段 - 这是有道理的，设备想要为下一步做好准备，但问题是我有一个片段，它在每个 onStart 调用一个对话框，因此实际上发生在错误的片段上。

应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:45:23.537

您可以`OnPageChangeListener`在 ViewPager 上使用 来检测您何时导航到正确的片段。

# mysql - 如何生成这个 mysql 查询

> ID：13453019
> 
> 赞同：1
> 
> 时间：2012-11-19T11:39:59.980
> 
> 标签：mysql

我有这个名为消息的数据库表：

```
Column          Type    

global_ref_id   int(12)          
to              int(12)      
from            int(12)      
message         text             
status          int(1)   
viewed          int(1) 
```

其中 global_ref_id 是消息的 ID（来自表事件的外键），to 是接收消息的用户的用户 ID，来自是发送消息的用户的用户 ID。

我想生成一个查询，它给我显示从每个用户到用户的最后一条消息的结果（比如其 user_id 为 192），同时将每个用户的消息总数提供给用户 192。

直到现在我想出了这个查询来获得结果：

```
> SELECT messages.*
>                 FROM messages, events
>                 WHERE events.global_id = messages.global_ref_id
>                 AND to = 192
>                 GROUP BY messages.from
>                 ORDER BY events.event_time DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:59:28.810

结果显示从每个用户到用户的最后一条消息（例如，其 user_id 为 192）

```
SELECT 
    messages.message as 'Last Message'
FROM 
    messages, events
WHERE 
    events.global_id = messages.global_ref_id
AND to = 192
GROUP BY messages.from
ORDER BY events.event_time DESC
LIMIT 1 
```

每个用户发给用户的消息总数 192

```
SELECT 
    messages.*, COUNT(messages.from) as "Total number of Messages to User"
FROM 
    messages, events
WHERE 
    events.global_id = messages.global_ref_id
AND to = 192
GROUP BY messages.from
ORDER BY events.event_time DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:07:56.363

最后我想出了答案，我不知道这个查询有多好，但它对我有用：-

```
SELECT messages.global_ref_id,
messages.`to`,
messages.`from`,
messages.message,
messages.status,
messages.viewed,
events.event_time,
count_table.msg_count as `total Number of messages`
FROM
messages
INNER JOIN
(select max(global_ref_id) as ref_id, count(*) msg_count from messages group by `from`)
as count_table
on (messages.global_ref_id = count_table.ref_id)
INNER JOIN events
on (events.global_id = messages.global_ref_id)
where messages.`to` = 192
order by events.global_id DESC 
```

谢谢大家...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:46:56.553

要更改查询的最小值，请执行以下操作（顺便说一下未经测试）：

```
SELECT * FROM 
(
    SELECT messages.*,events.event_time, COUNT(messages.from) as "Total Messages Between Users"
    FROM messages, events
    WHERE events.global_id = messages.global_ref_id
    AND messages.to = 192
    GROUP BY messages.from
    ORDER BY messages.from
)
AS EVENTS
ORDER BY events.event_time
LIMIT 1; 
```

将`LIMIT 1`仅显示最后一条消息，如果您想要所有消息而不是最后一条消息，请摆脱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:56:35.820

我认为这就是您想要的，尽管我只是 MySQL 的新手。

[http://sqlfiddle.com/#!2/d0586/8](http://sqlfiddle.com/#!2/d0586/8)

米。`to`和米。`from`因为它们是保留字，所以在反引号中。

希望能帮助到你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T14:45:21.283

```
SELECT
m.global_ref_id,
m.`to`,
m.`from`,
m.message,
m.status,
m.viewed
FROM messages m
WHERE m.global_ref_id = (SELECT max(i.global_ref_id)
                         FROM messages igroup
                         WHERE i.`to` = m.`to`
                         AND i.`from` = m.`from`); 
```

会给你最新的消息；获得总数将是另一个查询...

```
SELECT
m.`to`,
m.`from`,
count(*)
FROM messages m
GROUP BY m.`to`, m.`from` 
```

合并这两个查询的输出是另一个问题！

# java - 如何使用javascript创建具有动态参数的表单？

> ID：13453022
> 
> 赞同：0
> 
> 时间：2012-11-19T11:40:12.887
> 
> 标签：java, javascript, jsp

我正在尝试使用 java 脚本创建一个表单，该表单已创建，但不会替换该表单的动态参数值。以下是我的表格......

```
var formVar='<form:form name="service_form" commandName="command1" action="/serviceProcess" method="post">';

formVar+='<label for="'+ paramsdata[2] + '">'+paramsdata[3]+'</label><br/>';
formVar+='<form:input type='+paramsdata[2]+' path="webParamMap['+paramsdata[2]+'].webValue"  value='+ paramsdata[5] +'  class="input"></form:input><br>' ;

 formVar+='<label for=" '+paramsdata[2]+' ">'+paramsdata[3]+'</label><br/>';
formVar+='<div id="select">';
formVar+='<form:select path="webParamMap[' +paramsdata[2] + '].webValue">';
formVar+='<form:option value='+paramdata[8]+'>'+paramdata[9]+'</form:option>';
 formVar+='</form:select></div>';
formVar+='</form:form>'; 
```

在上面的表单中，标签标签值（动态参数值）被更新，但表单：输入和选择标签值（动态参数值）在输出中没有更新。

请帮助我如何使用动态参数创建这些标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:50:31.033

通过以下脚本，每个元素都获得了正确的值。我想知道你为什么使用“

```
<script>
    var paramsdata = new Array();;
    paramsdata[2]='param2';
    paramsdata[3]='param3';
    paramsdata[5]='param5';
    paramsdata[8]='param8';
    paramsdata[9]='param9';

    var formVar='<form:form name="service_form" commandName="command1" action="/serviceProcess" method="post">';

    formVar+='<label for="'+ paramsdata[2] + '">'+paramsdata[3]+'</label><br/>';
    formVar+='<form:input type='+paramsdata[2]+' path="webParamMap['+paramsdata[2]+'].webValue"  value='+ paramsdata[5] +'  class="input"></form:input><br>' ;

    formVar+='<label for=" '+paramsdata[2]+' ">'+paramsdata[3]+'</label><br/>';
    formVar+='<div id="select">';
    formVar+='<form:select path="webParamMap[' +paramsdata[2] + '].webValue">';
    formVar+='<form:option value='+paramsdata[8]+'>'+paramsdata[9]+'</form:option>';
    formVar+='</form:select></div>';
    formVar+='</form:form>';
    document.body.innerHTML = formVar;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:02:22.673

**JAVA != JAVASCRIPT**

注意：

```
<form:form> 
```

这是服务器端 Java。

您的 Javascript 只是客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T13:24:50.163

```
<script>

//helper function to create the form
function getNewSubmitForm(){
 var submitForm = document.createElement("FORM");
 document.body.appendChild(submitForm);
 submitForm.method = "POST";
 return submitForm;
}

//helper function to add elements to the form
function createNewFormElement(inputForm, elementName, elementValue){
 var newElement = document.createElement("<input name='"+elementName+"' type='hidden'>");
 inputForm.appendChild(newElement);
 newElement.value = elementValue;
 return newElement;
}

//function that creates the form, adds some elements
//and then submits it
function createFormAndSubmit(){
 var submitForm = getNewSubmitForm();
 createNewFormElement(submitForm, "field1", "somevalue");
 createNewFormElement(submitForm, "field2", "somevalue");
 submitForm.action= "someURL";
 submitForm.submit();
}
</script>

<input type="button" value="Click to create form and submit" onclick="createFormAndSubmit()"> 
```

# java - 将转义码（原始数据）发送到打印机的正确方法

> ID：13453025
> 
> 赞同：2
> 
> 时间：2012-11-19T11:40:23.147
> 
> 标签：java, printing, escaping, zebra-printers

在更大的应用程序的上下文中，我的小程序需要将一些数据打印到 Zebra 或 Dymo（取决于用户安装的）标签打印机。

我收到的数据是转义形式，我只需要将数据发送到打印机并让它解释它。

搜索我找到了两种解决方案。方法一：

```
byte[] printdata;
PrintService pservice = PrintServiceLookup.lookupDefaultPrintService(); //or get the printer in some other way
DocPrintJob job = pservice.createPrintJob();
DocFlavor flavor = DocFlavor.BYTE_ARRAY.AUTOSENSE;
Doc doc = new SimpleDoc(printdata, flavor, null); 
```

和方法2：

```
PrintStream printStream = new PrintStream(new FileOutputStream(“LPT1”));
printStream.print(“Hello World”);
printStream.close(); 
```

我需要这个跨平台工作，打印机使用 USB 或串行端口。实现此行为的*正确方法是什么？*

方法 2 的一个问题是我需要以同样的方式找到打印机的 URL……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-19T09:49:51.807

```
public String rawprint(String printerName, String conte) {
    String res = "";
    PrintServiceAttributeSet printServiceAttributeSet = new HashPrintServiceAttributeSet();
    printServiceAttributeSet.add(new PrinterName(printerName, null));
    PrintService printServices[] = PrintServiceLookup.lookupPrintServices(null, printServiceAttributeSet);
    if (printServices.length != 1) {
        return "Can't  select printer :" + printerName;
    }
    byte[] printdata = conte.getBytes();
    PrintService pservice = printServices[0];
    DocPrintJob job = pservice.createPrintJob();
    DocFlavor flavor = DocFlavor.BYTE_ARRAY.AUTOSENSE;
    Doc doc = new SimpleDoc(printdata, flavor, null);
    PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
    try {
        job.print(doc, aset);
    } catch(Exception e){
        res = e.getMessage();

    }
    return res;
} 
```

在 javafx 中很酷

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T19:21:29.673

十六进制打印输出是值得信赖的。调用`String.getBytes(encoding)`，然后使用`System.out.format`将每个字节打印为十六进制数。

# jmx - 是否可以通过 JMX 在 Camel 中的调度轮询器上动态更改延迟？

> ID：13453026
> 
> 赞同：1
> 
> 时间：2012-11-19T11:40:25.963
> 
> 标签：jmx, apache-camel

我想通过 JMX 在运行时设置/更改文件使用者的延迟。我可以更改属性的值，但在我重新启动消费者之前似乎没有考虑到它。

camel-archetype-java 及其基本文件示例的示例：

*   运行
*   通过使用 JConsole 调用 setDelay 操作来更改文件使用者的延迟
*   消费者的延迟属性已更改，但日志显示默认情况下它会继续以 500 毫秒进行轮询
*   停止/启动消费者
*   消费者使用新的延迟值

我是否需要其他步骤或激活任何配置才能使其在运行时工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:57:46.763

您可以更改文件端点上的值，然后重新启动路由，例如停止路由，启动路由。

# java - 业务逻辑和数据库存储的单独数据表示

> ID：13453029
> 
> 赞同：2
> 
> 时间：2012-11-19T11:40:35.183
> 
> 标签：java, oop, model-view-controller

我正在为扑克游戏编写一些爱好项目。我的应用程序将在数据库中存储很多游戏。我创建了对象 Game 的表示，它使用了许多其他对象，例如：PlayerHand（基本上是 2 个 Card 对象作为属性，以及一些实用方法，如 isSuited()、isPaired() 等）、Actions（描述玩家进行的赌注）、牌面（描述翻牌、转牌和河牌）等。

问题是对于数据库存储，我可以用更紧凑和更有效的方式来描述游戏。例如，我可以只为每只独特的手使用整数。这样的表示是紧凑的，对 DB 有好处，但对于其他逻辑实现，我希望有更多的字段来描述一只手，而不是一个整数。我不喜欢将两种表示都放在一个类中的想法，这看起来不正确。

问题：我的问题可以使用什么方法？

我想出的最好的解决方案是类似于 MVC 模式。其中 Model 是我的紧凑型数据库表示，view 是我的业务逻辑表示。但同样，这对我来说似乎不正确，因为对于这样一个简单的任务来说看起来太复杂了。是否有更优雅的方法或更简单的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:49:29.380

如果我使用 MVC 以“企业级”的方式进行操作，我将为 DB 表示和您将实际使用的游戏实体类提供单独的对象，以及在两者之间进行转换的不同服务层。这样，数据库映射更简单，转换也很明确。

由于它是一个游戏，虽然我可能会将两者结合起来并由数据库层完成转换。如果您使用的是 Hibernate，则可以使用 custom`UserType`来完成这项艰苦的工作，并将其与您的模型类分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:49:48.913

MVC 是针对整个应用程序，将流控制、表示、业务逻辑分开。您需要的是 Data Mapper，因此您可以拥有对数据库一无所知的域对象。对于大多数应用程序，我通常同时使用 MVC 和 Data Mapper。

# c# - 聚合/合并多个并发字典

> ID：13453034
> 
> 赞同：0
> 
> 时间：2012-11-19T11:40:47.947
> 
> 标签：c#, concurrentdictionary

所以我有一个这样定义的并发字典

```
 ConcurrentDictionary<string, ConcurrentDictionary<string, ConcurrentDictionary<string, SomeObject>>>(); 
```

我知道这似乎有点令人费解，但结构是有效的......

现在我的问题是，我已经为 x 个不同的来源说了 x 个这些字典的实例，出于统计目的，它们需要被合并/合并/聚合到一个相同结构的字典中......

有人对最佳方法有任何想法吗？我知道我可以创建一个相同结构的新字典；循环遍历要合并的每个字典，并在每个级别检查新字典中的这些键等，并根据该确定的结果添加或更新...

但这对我来说似乎有点笨拙......那里有任何可以伸出援助之手的 LINQ 天才吗？

[注意 - 我刚刚做了一个重要的编辑 - 输出字典与输入字典的结构完全相同]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:17:20.713

LINQ 在这里没有帮助，因为您不想查询集合而是操作集合。

正如上面评论中所说，使用 a`ConcurrentDictionary<Tuple<string, string, string>, SomeObject>`会简化一些事情。您可以执行以下操作：

```
using MyDict = ConcurrentDictionary<Tuple<string, string, string>, SomeObject>;

MyDict Merge(IEnumerable<MyDict> dicts)
{
    MyDict result = new MyDict();

    foreach (var dict in dicts)
    {
        foreach (var kvp in dict)
        {
            result.AddOrUpdate(
                kvp.Key,        // If the key does not exist, add the value;
                kvp.Value,      // otherwise, combine the two values.
                (key, value) => Combine(value, kvp.Value)
            );
        }
    }

    return result;
} 
```

# vb.net - 打开连接时未处理 NullReferenceException

> ID：13453035
> 
> 赞同：0
> 
> 时间：2012-11-19T11:40:47.717
> 
> 标签：vb.net, winforms

我在这段代码中收到一条错误消息：*object reference not set to an instance of an object*。

```
Private Sub frmAdd_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    con.ConnectionString = strcon

    con.Open()

con.ConnectionString = strcon 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:44:18.370

这意味着您正在使用一个为 null 的变量（它没有设置为指向任何对象的实例）。在这种情况下，`con`必须为null，因此需要检查它是否为null，如果是，则将其设置为新对象。例如：

```
If con Is Nothing Then
    con = New OleDbConnection()  ' Or whatever type it is...
End If
con.ConnectionString = strcon
con.Open() 
```

或者，更好的是，在声明变量时将其设置为新对象，如果合适的话，例如：

```
Dim conn As New OleDbConnection() 
```

但是，正如 Tim 所指出的，最好在每次需要时创建一个新连接，然后您可以使用一个`Using`块来正确处理该对象：

```
Using con As New OleDbConnection(strcon)
    con.Open()
    ' Use the connection ...
End Using 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:45:40.617

我假设您收到该错误是因为连接尚未初始化。`Using`但是我建议不要使用字段，而是创建一个局部变量，因为您应该始终使用-statement尽快关闭连接。所以在你需要的地方而不是*全局*的地方创建一个连接。

所以这可以解决它（但不推荐）：

```
Private Sub frmAdd_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    con = new SqlConnection(strcon)
    con.Open() ' <-- don't do that with connection pooling 
```

# c# - 将我的 C# 表单设置为另一个应用程序的子项

> ID：13453037
> 
> 赞同：1
> 
> 时间：2012-11-19T11:40:53.947
> 
> 标签：c#, forms, parent-child, z-order

我目前正在开发一个表单应用程序，它可以覆盖另一个程序（Skype）。现在，我正在使用 TopMost = true，但这是一个非常糟糕的解决方案。

我有 Skype 窗口的句柄，以及我自己的窗口的句柄。如何使我的程序满足以下三个语句：
1\. 如果 Skype 最小化，它必须消失
2\. 它必须出现在 Skype 上方
3\. 它必须出现在 Skype 上方的任何其他应用程序后面

上面和后面与 z 顺序有关。

我目前正在使用 SetWindowLong 函数，但无法获得所需的结果。

```
[DllImport("user32.dll")]
public static extern int SetWindowLong(HandleRef hWnd, int nIndex, HandleRef dwNewLong);

SetWindowLong(
    new HandleRef(child, child.Handle),
     -8, // GWL_HWNDPARENT
     new HandleRef(owner, owner.Handle)); 
```

对于 #1，我的应用程序不断检查 Skype 的尺寸是否发生了变化，因此我也可以简单地检查窗口是否不再可见。但是，我对#2 和#3 完全不知所措。

提前致谢。克洛尔

# python - 用于返回这些值的正则表达式或其他方法（来自 BeautifulSoup）

> ID：13453041
> 
> 赞同：1
> 
> 时间：2012-11-19T11:41:09.160
> 
> 标签：python, regex, beautifulsoup

在 stackoverflow 社区的大力帮助下，我学到了很多关于 python 的知识，特别是使用 BeautifulSoup 进行抓取。我再次指的是我用来学习的同一个示例页面。

我有以下代码：

```
from bs4 import BeautifulSoup
import re

f = open('webpage.txt', 'r')
g = f.read()
soup = BeautifulSoup(g)

for heading in soup.find_all("td", class_="paraheading"):
    key = " ".join(heading.text.split()).rstrip(":")
    if key in columns:
        print key
        next_td = heading.find_next_sibling("td", class_="bodytext")
        value = " ".join(next_td.text.split())
        print value
    if key == "Industry Categories":
        print key
        ic_next_td = heading.find_next_sibling("td", class_="bodytext")
        print ic_next_td 
```

从这个页面：

```
http://www.aidn.org.au/Industry-ViewCompany.asp?CID=3113 
```

另存为webpage.txt 给我以下结果：

```
ACN
007 350 807
ABN
71 007 350 807
Annual Turnover
$5M - $10M
Number of Employees
6-10
QA
ISO9001-2008, AS9120B,
Export Percentage
5 %
Industry Categories
<td class="bodytext">Aerospace<br/>Land (Vehicles, etc)<br/>Logistics<br/>Marine<br/>Procurement<br/></td>
Company Email
lisa@aerospacematerials.com.au
Company Website
http://www.aerospacematerials.com.au
Office
2/6 Ovata Drive Tullamarine VIC 3043
Post
PO Box 188 TullamarineVIC 3043
Phone
+61.3\. 9464 4455
Fax
+61.3\. 9464 4422 
```

到目前为止，一切都很好。稍后会考虑将其写入 CSV 或其他内容，但现在我想知道如何将包含的数据分解`<td class="bodytext">Aerospace<br/>Land (Vehicles, etc)<br/>Logistics<br/>Marine<br/>Procurement<br/></td>`为单独的行？

像这样：

```
Industry Categories
Aerospace
Land (Vehicles, etc)
Logistics
Marine
Procurement 
```

我尝试了一些正则表达式，例如：

```
if key == "Industry Categories":
        print key
        ic_next_td = heading.find_next_sibling("td", class_="bodytext")
        value = re.findall('\>(.*?)\<', ic_next_td)
        print value[0] 
```

但我明白了`TypeError: expected string or buffer`。我想我也需要遍历 findall 或其他东西。

该方法需要足够通用以处理相同格式的其他变体，例如“驴”或“船”而不是“航空航天”或“物流”（我不一定会预先知道我所在的场景中的所有可能性考虑）。

有没有办法使用 br 标签和 Beautiful soup 或正则表达式来解决这个问题？

抱歉，这有点长。与往常一样，对于任何建议的代码优化也非常高兴，因此我可以继续学习正确构建 Python 脚本的最佳方法。

谢谢！

**更新**

此代码有效：

```
for heading in soup.find_all("td", class_="paraheading"):
    key = " ".join(heading.text.split()).rstrip(":")
    if key in columns:
        print key
        next_td = heading.find_next_sibling("td", class_="bodytext")
        value = " ".join(next_td.text.split())
        print value
    if key == "Industry Categories":
        print key
        ic_next_td = heading.find_next_sibling("td", class_="bodytext")
        for value in ic_next_td.strings:
                print value 
```

这段代码产生了一个缩进错误：

```
for heading in soup.find_all("td", class_="paraheading"):
    key = " ".join(heading.text.split()).rstrip(":")
    if key in columns:
        print key
        next_td = heading.find_next_sibling("td", class_="bodytext")
        value = " ".join(next_td.text.split())
        print value
    if key == "Industry Categories":
        print key
        ic_next_td = heading.find_next_sibling("td", class_="bodytext")
        for value in ic_next_td.strings:
            print value 
```

`print value`注意在工作代码中看似双重缩进。在我看来，下一级缩进将是一个单一的缩进之后`for value in ic_next_td.strings:`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:49:37.357

您将不得不进一步解析其中的内容`ic_next_td`。幸运的是，原始页面使用`<br/>`标签为您提供了分隔文本的位置。不要在这里使用正则表达式，BeautifulSoup 为您提供了更好的工具：

```
for value in ic_next_td.strings:
    print value 
```

会导致：

```
Aerospace
Land (Vehicles, etc)
Logistics
Marine
Procurement 
```

您可以通过调用[迭代器](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#strings-and-stripped-strings)`list()`将所有这些存储在列表中：[`.strings`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#strings-and-stripped-strings)

```
values = list(ic_next_td.strings) 
```

# shell - 从 bash 脚本中的命令捕获数组数据时使用内部字段分隔符

> ID：13453052
> 
> 赞同：1
> 
> 时间：2012-11-19T11:42:07.003
> 
> 标签：shell, unix, ifs

当我运行命令时

```
git cherry origin/Server_Dev 
```

在我的 git 存储库中，我得到了表单的提交列表

```
+ 95b117c39869a810595f1e169c64e728d2d7443d
+ e126f1b996ecf1d2a8cf744c74daa92cce338123
+ 869169a6cb0bbe8f1922838798580a1e74ec3884
+ 667819b617c88bd886dc2001f612b5c7a4d396c3
+ fd41328a84b0a127affa6fe4328c93e933de378c
+ cfe1807e5d4acc6b5e75f4463dadb3b1c957376f 
```

这是一件好事。

我现在想从 bash 脚本中执行此命令，并使用以下代码将输出捕获到数组中：

```
commit_hashes=(`git cherry origin/Dev`)
echo ${commit_hashes[@]} 
```

产生以下输出：

```
+ 95b117c39869a810595f1e169c64e728d2d7443d + e126f1b996ecf1d2a8cf744c74daa92cce338123 + 869169a6cb0bbe8f1922838798580a1e74ec3884 + 667819b617c88bd886dc2001f612b5c7a4d396c3 + fd41328a84b0a127affa6fe432
8c93e933de378c + cfe1807e5d4acc6b5e75f4463dadb3b1c957376f 
```

这不是一件好事

**我的提交列表作为一个字符串返回，我必须先分解它才能使用它。经过一番搜索，我发现如果我`IFS=""`在捕获数据之前添加到我的脚本中，我的问题就会得到解决。**

所以我编辑了我的代码来阅读

```
IFS=""
commit_hashes=(`git cherry origin/Dev`)
echo ${commit_hashes[@]} 
```

哪个输出

```
+ 95b117c39869a810595f1e169c64e728d2d7443d
+ e126f1b996ecf1d2a8cf744c74daa92cce338123
+ 869169a6cb0bbe8f1922838798580a1e74ec3884
+ 667819b617c88bd886dc2001f612b5c7a4d396c3
+ fd41328a84b0a127affa6fe4328c93e933de378c
+ cfe1807e5d4acc6b5e75f4463dadb3b1c957376f 
```

这完全结束了我的现实感。

我想知道为什么事情正在做他们正在做的事情，所以经过更多搜索后，我发现这被称为 the `Internal Field Separator`，命令解释器在 Unix 系统上使用它来确定将模式分解为标记的位置。

这个我明白。

我不明白的是

1.  为什么将此变量设置为空字符串允许它以理智的方式处理我的数组数据。
2.  为什么我必须首先设置它，而不是解释器意识到它正在处理数组数据并适当地处理它。
3.  将内部字段分隔符设置为空字符串会产生什么影响，因为默认情况下它包含空格、制表符和换行符的字符。

一些帮助我理解这三点将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:59:14.107

请参阅[man bash/Arrays](http://www.gnu.org/software/bash/manual/bashref.html#Arrays)。你的阵列一切都很好。当你这样做

```
echo ${commit_hashes[@]} 
```

echo 将所有数组元素显示在一行上，就像它被告知的那样。当你说

```
for i in `seq 10`; do
    echo ${commit_hashes[$i]}
done 
```

您会看到每行只显示一个条目。

但是，当您设置`IFS=`为空字符串时，结果`git cherry`不会分解为多个值。包括换行符的整个字符串被分配给第一个数组元素。如果你

```
echo ${commit_hashes[0]} 
```

在第二种情况下，您将看到， echo 显示所有输出行。

# c# - 如果快速单击多次，则 ChildWindow 关闭按钮事件处理程序将执行多次

> ID：13453054
> 
> 赞同：5
> 
> 时间：2012-11-19T11:42:19.193
> 
> 标签：c#, .net, silverlight, event-handling

我`ChildWindow`有 CloseButton 和分配给`Click`事件的处理程序。代码（仅作为示例）：

声明关闭按钮：

```
<Button x:Name="CloseButton" Click="OnCloseButtonClick" /> 
```

私人计数器（用于诊断问题）：

```
private uint _i; 
```

关闭事件处理程序：

```
OnCloseButtonClick(object sender, RoutedEventArgs e)
{
     DialogResult = true;
     System.Diagnostics.Debug(_i++);
} 
```

快速点击后程序可以输出“1”、“2”、“3”等...据我所知，在设置`DialogResult`= `true`（或`false`）后，ChildWindow应该被关闭并且不应该有任何方法来引发CloseButton的`Click`事件第二次。

谁能帮我找出问题的原因并在没有布尔标志（已执行/！已执行）的情况下帮助解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:07:33.153

复制自我的评论

问题是因为关闭激活关闭窗口动画以关闭窗口，这意味着按钮事件可用，直到动画完成并关闭窗口，请参阅[Silverlight ChildWindow 关闭动画期间用户可以单击任何按钮](https://stackoverflow.com/questions/12588642/during-silverlight-childwindow-closing-animation-user-can-click-any-button)

一个快速而肮脏的解决方案是添加

```
((Button)sender).IsEnabled=false; 
```

到您单击处理程序函数的开头。

# sql - 将 nvarchar 值“xxx”转换为数据类型 int 时转换失败

> ID：13453065
> 
> 赞同：0
> 
> 时间：2012-11-19T11:43:16.937
> 
> 标签：sql, sql-server

下面的查询抛出标题中提到的错误：

```
SELECT
   Set_To_Value_ID,
CASE 
   WHEN Set_To_Variable_ID IS NOT NULL THEN Set_To_Variable_ID 
   WHEN Changed_In_SP IS NOT NULL THEN Changed_In_SP
   WHEN Comment_Input IS NOT NULL THEN ( Select Comment FROM Process_Instance WHERE Process_Instance_ID = @Process_Instance_ID )
END AS Manual_Value
FROM Variables
WHERE Some_Irrelevant_Value = @Some_Irrelevant_Value 
```

我知道错误来自 Comment_Input 案例，因为这是应该从那里返回的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:45:47.560

使用`CASE`表达式时，所有结果必须具有相同的数据类型。

> 从 result_expressions 和可选的 else_result_expression 的类型集中返回优先级最高的类型。

[http://msdn.microsoft.com/en-us/library/ms181765.aspx](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

我建议将您的 int 数据类型转换为 nvarchar，以便 SQL 不会尝试将您的 nvarchar 转换为 int：

```
CASE 
   WHEN Set_To_Variable_ID IS NOT NULL THEN CAST(Set_To_Variable_ID as nvarchar(20))
   WHEN Changed_In_SP IS NOT NULL THEN THEN CAST(Changed_In_SP as nvarchar(20))
   WHEN Comment_Input IS NOT NULL THEN ( Select Comment FROM Process_Instance WHERE Process_Instance_ID = @Process_Instance_ID )
END AS Manual_Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T12:12:13.533

检查表上的依赖关系，例如触发器、视图或与其他表的关系。它们可能具有该特定列的 int 数据类型

# asp.net - 在 GridView 的 2 行之间

> ID：13453072
> 
> 赞同：0
> 
> 时间：2012-11-19T11:43:35.117
> 
> 标签：asp.net, html, gridview

我有一个很好的工作网格视图，但我想`<hr>`在每一行之间都有一个标签。
我的 GridView 有 2 列，因此它将呈现为：

```
<table>
<tr><td>x</td><td>y>/td></tr>
<tr><td>x</td><td>y>/td></tr>
</table> 
```

我希望有：

```
<table>
<tr><td>x</td><td>y</td></tr>
<tr><td colspan="2"><hr></td></tr>
<tr><td>x</td><td>y</td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:53:09.847

尝试`AlternatingRowStyle`明智地使用来实现这一目标。恕我直言，没有直接的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:59:43.787

如果我理解您的问题，那么您期望每个 TR 都有一行。

为什么不**尝试使用 CSS**

```
tr { border-bottom:2px solid #eee;} 
```

或者

```
tr td { border-bottom:2px solid #eee;} /* border for all tds and not tr */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-11T15:40:07.150

GridView 可以做很多事情，但是当您想要对布局进行更细粒度的控制时，[Repeater](https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.webcontrols.repeater?view=netframework-4.7.2)可以提供更多功能。

链接页面包含一个示例，展示了如何在 Repeater 中创建整个 HTML 表，从页眉模板开始，在项目模板中继续，最后在页脚模板中结束。它不需要太多设置并且可以非常强大。

# java - 拆分没有分隔符的字符串

> ID：13453075
> 
> 赞同：4
> 
> 时间：2012-11-19T11:43:49.107
> 
> 标签：java, arrays, string, split

我想将像“我的狗”这样的字符串拆分成一个数组：

```
| M | y | space char will be in here | D | o | g | 
```

这是我的代码：

```
String []in_array;
    input = sc.next();  
in_array = input.split(""); //Note this there is no delimiter 

for(int k=1; k < in_array.length; k++){
    System.out.print(" "+in_array[k]);
} 
```

编辑：

它只打印出“我的”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T11:45:28.803

java.lang.String 有一个[toCharArray()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#toCharArray%28%29)可以做到这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T11:49:20.410

如果你看到的都是“我的”，那就是你的`input`字符串中的所有内容。你用过 Scanner.next() 吗？

```
for(String s : "My dog".split(""))
    System.out.println(s); 
```

印刷

```
{empty line}
M
y

d
o
g 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-19T11:46:50.457

为此，您只需要一行代码：

```
String[] arr = input.split("(?<=.)"); 
```

正则表达式表示在每个字符*后*拆分，因此与在空白上拆分不同，您不会从拆分中获得初始空白元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T11:52:55.887

尝试遵循 Java 代码

```
String sourceString="My Dog";
char[] varArr = sourceString.trim().toCharArray();
for (char c : varArr) {
   System.out.print(c+" | ");
} 
```

# android - Tabs + ViewPager + FragmentStatePagerAdapter - 如何删除片段？

> ID：13453077
> 
> 赞同：10
> 
> 时间：2012-11-19T11:43:59.933
> 
> 标签：android, android-fragments, android-fragmentactivity

我正在使用“Tabs + Swipe”项目，我很难删除片段。

**我正在做的步骤：**

1.  从数据库中删除选项卡
2.  从 FragmentStatePagerAdapter 数据源中删除选项卡
3.  从操作栏中删除选项卡。
4.  使用 Support FragmentManager 删除片段。

**问题：** 执行删除后，出于某种原因，我仍然可以向右滚动并看到一个空片段。我无法选择它，它只是反弹回来。似乎片段没有被删除，而是从左侧将其位置更改为标签。

**我的适配器：**

```
public class SectionsPagerAdapter extends FragmentStatePagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            Fragment fragment = new TabFragment();

            Bundle args = new Bundle();
            args.putInt(TabFragment.ARG_TAB_POSITION, position);
            fragment.setArguments(args);

            return fragment;
        }

        @Override
        public int getCount() {
            return tabsList.size();
        }

        @Override
        public CharSequence getPageTitle(int position) {
            return tabsList.get(position).getTitle();
        }

        @Override
        public void destroyItem(ViewGroup container, int position, Object object) {
            super.destroyItem(container, position, object);
            FragmentManager manager = ((Fragment)object).getFragmentManager();
            android.support.v4.app.FragmentTransaction trans = manager.beginTransaction();
            trans.remove((Fragment)object);
            trans.commit();
        }
    } 
```

**我的删除方法（从片段中调用）：**

```
public void removeTab() {
            mTabTableHandler.deleteTab(tab.getId()); //db
            tabsList.remove(tabPosition); //data source
            actionBar.removeTabAt(tabPosition); // actionbar

            getActivity().getSupportFragmentManager().beginTransaction().remove(this).commit(); // support fragmentmanager

            tabsList = mTabTableHandler.query(); //requery db
            mSectionsPagerAdapter.notifyDataSetChanged(); //notify adapter
        } 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T05:42:31.470

你可以在这里找到答案 - [Remove Fragment Page from ViewPager in Android](https://stackoverflow.com/questions/10396321/remove-fragment-page-from-viewpager-in-android)

您的代码中似乎缺少的是覆盖以下适配器的方法：

```
@Override
public int getItemPosition(Object object){
    return PagerAdapter.POSITION_NONE;
} 
```

解释为什么这种“奇怪”的解决方案有效，您可以在我提供给您的链接中的问题答案中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T10:43:54.550

```
public void removeAllFragments(ViewGroup container) {
        /*
         * keep this line because section pager adapter has
         * the bug to not delete the last fragment completely
         * -> so we add an empty fragment
         */
        int iStart = 0;

        addFragment(new Fragment());
        Fragment frag;
        int size = fragments.size();
        for (int iPos = iStart; iPos < size; iPos++) {
            frag = getItem(iStart);
            if (frag.isAdded()) {
                destroyItem(container, iStart, frag);
            }
            fragments.remove(frag);
            notifyDataSetChanged();
        }
    } 
```

# javascript - 添加base64解码图片上传表单字段

> ID：13453082
> 
> 赞同：0
> 
> 时间：2012-11-19T11:44:19.633
> 
> 标签：javascript, jquery, image

有没有办法将编码图像添加到从网络摄像头获取的表单中？我可以为预览打印图像，但我需要上传到服务器，我有图像的上传表单，所以我需要使用相同的表单来上传相机图像（如果可能的话）。

```
 var result = cameraApi.save();
 $('.items-list').append('<img src=data:image/jpeg;base64,' + result + ' />'); 
```

此代码用于显示拍摄的图像，请告知如何立即将其添加到上传表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:47:32.623

您不能将随机文件添加到`<input type="file">`控件。这是基本的浏览器安全性，因此网站无法窃取您硬盘中的文件。

但是，如果您已经在 J​​avaScript 变量中拥有文件内容，则根本不需要上传控件！只需将其添加到隐藏字段或发出 AJAX 发布请求。

# architecture - CQRS - 装配分布

> ID：13453086
> 
> 赞同：0
> 
> 时间：2012-11-19T11:44:27.990
> 
> 标签：architecture, projects-and-solutions, cqrs

在 CQRS 实现中，Queries 组件是否应该放置在与 Commands 组件不同的程序集中？

例子：

*   解决方案A
*   解决方案A.查询
*   解决方案A.命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:25:04.910

这是关于命令查询责任隔离^^

我认为最好将命令和查询分开（为了清楚起见和 SRP 原因）。

查询它是关于存储库的责任，命令它是更多的领域责任。

您可以从[CQRS Journey中汲取灵感](http://cqrsjourney.github.com/)

# ios - 文本字段未出现

> ID：13453087
> 
> 赞同：0
> 
> 时间：2012-11-19T11:44:29.857
> 
> 标签：ios, objective-c, cocoa-touch, uiview, uikit

我是一名新的 iOS 开发人员。我正在为字段设置动画，并且我想在字段中输入数据。我正在使用以下代码。

没有出现文字。它正在上升。请帮我。

```
if UIInterfaceOrientationIsLandscape(theStatusBarOrientation)
    keyboardShiftAmount = keyboardFrame.size.width;
else 
    keyboardShiftAmount = keyboardFrame.size.height;

[UIView beginAnimations: @"ShiftUp" context: nil];
[UIView setAnimationDuration: keyboardSlideDuration];
NSLog(@"%f",keyboardShiftAmount);
self.view.center = CGPointMake(self.view.center.x,
                               self.view.center.y - keyboardShiftAmount);
[UIView commitAnimations];
viewShiftedForKeyboard = TRUE; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:36:17.573

使用[uitextfielddelegate](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uitextfield-uitextfielddelegate/)制作动画

# asp.net-mvc - MVC - 更改比较属性错误消息

> ID：13453089
> 
> 赞同：2
> 
> 时间：2012-11-19T11:44:32.203
> 
> 标签：asp.net-mvc, vb.net

在我的 MVC 应用程序中，我能够从文本文件中获取错误消息，而不是使用默认的错误消息。这在Required 属性（服务器端和客户端）上完美运行。

我现在需要对**Compare**属性执行相同的操作，但我不知道如何覆盖 Compare 属性。

作为参考，这就是我使用Required属性的方式（我希望与此类似的代码与**Compare**属性一起使用）......

```
Public Class RequiredFieldAttribute
    Inherits ValidationAttribute
    Implements IClientValidatable

    Private innerAttribute As New RequiredAttribute()
    Private errormessagecontrolid As String

    Public Sub New(ErrorMessageControlID As String)

        Me.errormessagecontrolid = ErrorMessageControlID

    End Sub

    Protected Overrides Function IsValid(value As Object, validationContext As ValidationContext) As ValidationResult

        If Not innerAttribute.IsValid(value) Then
            Return New ValidationResult(ErrorMsgs.Text(Me.errormessagecontrolid))
        End If

        Return ValidationResult.Success

    End Function

    Public Function GetClientValidationRules(metadata As ModelMetadata, context As ControllerContext) As IEnumerable(Of ModelClientValidationRule) Implements IClientValidatable.GetClientValidationRules

        Dim result = New List(Of ModelClientValidationRule)

        Dim rule = New ModelClientValidationRule() With {.ErrorMessage = ErrorMsgs.Text(Me.errormessagecontrolid), .ValidationType = "required"}

        result.Add(rule)

        Return result

    End Function

End Class 
```

上面，ErrorMsgs.Text 是从文本文件中检索消息的函数。针对我的模型，我然后应用这样的东西......

```
<RequiredField("AccountDetailsPostcodeError")>
Public Property PostCode As String 
```

然后系统在文本文件中查找名为 AccountDetailsPostcodeError 的条目。

如何使用 Compare 属性实现相同的效果。目前我有一个像这样的硬编码错误消息......

```
 <Compare("WebPassword", ErrorMessage:="The password and confirmation do not match.")>
    Public Property ConfirmWebPassword As String 
```

**编辑**：下面建议的修复可能适用于 C#，但不适用于 VB.NET，因此我需要更复杂的覆盖比较属性。我只是不知道如何正确覆盖它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T12:20:22.237

为什么要为您的翻译和消息使用文本文件，.NET 已经内置了翻译选项。您可以使用资源。使用资源的优点是资源是类型安全的，它们在编译时被检查。您的文本文件可能会损坏/丢失的地方。

以下指南可帮助您在 Mvc 项目中设置资源：

## 第一步

编辑默认汇编语言：

*   (C#) 属性 > 程序集信息 > 中性语言
*   (VB) 我的项目 > 汇编信息 > 中性语言

将此语言设置为您的默认语言。（对于这个例子，我使用`English (United States)`）

## 第二步

将资源文件添加到您的项目中。调用这个文件`Resource.resx`。打开这个文件。将访问修饰符更改为`Public`并开始添加资源字符串。例如： ![默认英语资源](../Images/854fee3d9f24ba7fc1040d36ffedd22b.png)

## 第三步

为每种其他语言添加您想要支持另一个资源文件，但将它们命名为`Resource.LANGUAGE.resx`LANGUAGE 被其他文化名称替换。对于文化名称，您可以查看以下网址：http: [//msdn.microsoft.com/en-us/goglobal/bb896001.aspx](http://msdn.microsoft.com/en-us/goglobal/bb896001.aspx)

然后用本地化的字符串填充新的资源文件。例如： ![英语资源](../Images/3b3f5a112e07e364346b26bb17e7341d.png)

## 第四步

然后你可以在你的模型中使用属性的默认本地化支持：

例如：

### VB：

```
Imports System.ComponentModel.DataAnnotations
Public Class UserModel
    <Display(Name:="UserNameField", ResourceType:=GetType(My.Resources.Resource))>
    <Required(AllowEmptyStrings:=False, ErrorMessageResourceName:="RequiredUsername", ErrorMessageResourceType:=GetType(My.Resources.Resource))>
    Public Property UserName As String

    <Display(Name:="PasswordField", ResourceType:=GetType(My.Resources.Resource))>
    <MinLength(6, ErrorMessageResourceName:="PasswordLengthError", ErrorMessageResourceType:=GetType(My.Resources.Resource))>
    <Compare("PasswordAgain", ErrorMessageResourceName:="CompareError", ErrorMessageResourceType:=GetType(My.Resources.Resource))>
    <Required(AllowEmptyStrings:=False, ErrorMessageResourceName:="RequiredPassword", ErrorMessageResourceType:=GetType(My.Resources.Resource))>
    Public Property Password As String

    <Display(Name:="PasswordAgainField", ResourceType:=GetType(My.Resources.Resource))>
    <Required(AllowEmptyStrings:=False, ErrorMessageResourceName:="RequiredPasswordAgain", ErrorMessageResourceType:=GetType(My.Resources.Resource))>
    Public Property PasswordAgain As String
End Class 
```

### C＃

```
using System.ComponentModel.DataAnnotations;
public class UserModel
{
    [Display(Name = "UserNameField", ResourceType = typeof(My.Resources.Resource))]
    [Required(AllowEmptyStrings = False, ErrorMessageResourceName = "RequiredUsername", ErrorMessageResourceType = typeof(My.Resources.Resource))]
    public string UserName;

    [Display(Name = "PasswordField", ResourceType = typeof(My.Resources.Resource))]
    [MinLength(6, ErrorMessageResourceName = "PasswordLengthError", ErrorMessageResourceType = typeof(My.Resources.Resource))]
    [Compare("PasswordAgain", ErrorMessageResourceName = "CompareError", ErrorMessageResourceType = typeof(My.Resources.Resource))]
    [Required(AllowEmptyStrings = False, ErrorMessageResourceName = "RequiredPassword", ErrorMessageResourceType = typeof(My.Resources.Resource))]
    public string Password;

    [Display(Name = "PasswordAgainField", ResourceType = typeof(My.Resources.Resource))]
    [Required(AllowEmptyStrings = False, ErrorMessageResourceName = "RequiredPasswordAgain", ErrorMessageResourceType = typeof(My.Resources.Resource))]
    public string PasswordAgain;
} 
```

对于本地化，属性需要知道静态属性的名称和从哪里获取属性的静态类的类型（如上所示）。

## 第五步

然后在您的视图中使用`@Html.ValidationSummary()`获取所有错误消息，或使用

*   **VB** `@Html.ValidationMessageFor(Function(model) model.Property)`
*   **C＃** `@Html.ValidationMessageFor(m => m.Property)`

获取特定的错误消息。

对于显示属性，您可以使用：

*   **VB** `@Html.DisplayNameFor(Function(model) model.Property)`
*   **C＃** `@Html.DisplayNameFor(m => m.Property)`

* * *

## 更改语言

`Web.config`最后但并非最不重要的一点是，您可以通过编辑和更改全球化标签来更改应用程序的语言，而不是第一步中定义的中性语言：

```
 <?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <globalization **uiCulture="nl"** />
  </system.web>
</configuration> 
```

如果您想从代码更改语言，您应该编辑`System.Threading.Thread.CurrentThread.CurrentUICulture`有关此信息的信息，我建议您使用谷歌或其他 SO 问题。

* * *

### 示例项目

对于这个问题，我很快做了一个示例项目来提供准确的答案。项目可以在这里找到：
[MvcVBTest.V1.zip](https://skydrive.live.com/redir?resid=DEB5DDFF6A505390!433)

* * *

# 更新

如果您不想使用资源而是使用单个文本文件，则可以使用资源框架使用的相同概念。您需要一个具有可以引用的静态属性的类。

为此，我做了以下事情：

1.  我创建了一个名为`Resources`(Resources.vb) 的类。
2.  在这个类中，我添加了一个名为的子类`Resource`
3.  在这个类的静态构造函数中，我打开`resource.xml`了我已经映射到一个数组`Resource`
4.  然后将该数组转换为`Dictionary(Of String, String)`
5.  我为 xml 中的每个项目创建了一个静态 get 属性。并从 Dictionary 中返回正确的项目
6.  我更改了类`ResourceType`中的参数`UserModel`

当然还有一点清理。旧资源可以删除，`globalization`标签可以从`web.config`.

现在所有文本都可以`resource.xml`作为键值对找到。要添加另一行，请将其添加到 XML 并在`Resource`类中为其创建一个属性。

### 示例项目

对于此更新，我更新了我的示例项目：
[MvcVBTest.V2.zip](https://skydrive.live.com/redir?resid=DEB5DDFF6A505390!434)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:54:54.570

为什么不使用这样的东西？

```
<RequiredField(ErrorMessage=GetErrorMessage())> 
```

只需创建一个为您获取错误消息的静态函数。您甚至可以为 GetErrorMessage 函数获取一个参数，以便确定要返回的消息。

# git - gitolite 设置恢复了更改

> ID：13453090
> 
> 赞同：2
> 
> 时间：2012-11-19T11:44:33.490
> 
> 标签：git, gitolite

我遇到了一个奇怪的问题，我认为这可能是一个错误。

我将配置更改推送到 Git 服务器。这包括一个新的存储库，因此在推送后我登录到服务器以创建和初始化存储库（作为主要产品 repo teamer.git 的副本）：

```
rwel@ve-git:/home/git/repositories/teamer$ sudo su git
git@ve-git:~/repositories/teamer$ git clone --bare ../teamer.git analytics.git
git@ve-git:~/repositories/teamer$ gitolite setup 
```

奇怪的是，运行“gitolite setup”似乎恢复了我的更改！在存储库中，出现了一个新的提交，与之前的配置状态完全相同：

![GitX 屏幕截图](../Images/4e3f46c40144765768d73811376626ba.png) 这里发生了什么，我该如何解决？如果您需要更多信息，请告诉我。

谢谢！

* * *

**编辑：**推送新配置后出现一些错误，可能与此有关：

```
gitolite-admin rwel$ git push origin
Counting objects: 11, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (6/6), done.
Writing objects: 100% (7/7), 1.07 KiB, done.
Total 7 (delta 2), reused 0 (delta 0)
remote: *** hooks.mailinglist is not set so no email will be sent
remote: *** for refs/heads/master update 85dd4c5e7592fadbdb0d445a245a8763d6e2042b->1063acec3b106b348fadac655d154a78ea15ead5
remote: FATAL: no files/dirs called 'hooks' or 'logs' are allowed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:52:55.517

我想我找到了问题所在。我将我的（常用）钩子放在 Gitolite 管理存储库 ( `[gitolite-admin.git]/hooks/common`) 的根目录中。Git不喜欢这样，因此错误：

```
remote: FATAL: no files/dirs called 'hooks' or 'logs' are allowed 
```

可能正因为如此，我的 Gitolite 安装搞砸了，安装脚本似乎试图恢复失败的提交。

## 修复

1.  首先，我必须通过在服务器上克隆它来清理存储库中的混乱，`gitolite-admin.git`将其重置`HEAD^`并强制将其推回存储库（如此[处](http://sitaramc.github.com/gitolite/emergencies.html#bypass)所述）。

    ```
    git@ve-git:~/temp$ git reset --hard HEAD^
    git@ve-git:~/temp$ gitolite push origin -f 
    ```

2.  [为了修复致命错误，我只是按照文档中的建议](http://sitaramc.github.com/gitolite/cust.html#localcode)将挂钩移动到子目录（在基于`master`步骤 1 重置的分支中）：

    ```
    $ git checkout -b hooksfix origin/master
    $ mkdir extra
    $ mv hooks extra
    $ git add --all
    $ git commit -m "moved hooks directory to prevent errors"
    $ git push origin hooksfix:master 
    ```

    为了完成这项工作，我还必须`.gitolite.rc`在 Git 服务器上的文件中添加一行：

    ```
    LOCAL_CODE                  => "$ENV{HOME}/.gitolite/extra", 
    ```

3.  推动这个之后，致命错误消失了。然后我将我的初始更改重新设置在 fixed 上`master`，现在也可以毫无问题地推动它。

    ```
    $ git checkout master
    $ git rebase origin/master
    $ git push origin 
    ```

# java - SVG到图像质量降低

> ID：13453094
> 
> 赞同：0
> 
> 时间：2012-11-19T11:45:02.990
> 
> 标签：java, image, svg, jpeg, batik

我的要求是将 .SVG 转换为图像。SVG 文件由内部工具生成。我正在通过两种方法尝试这些：

1.  使用 JPEG 转码器将 SVG 转换为图像。我的 SVG 文件是复杂的地图，上面有一些文字。生成的图像质量降低了很多文本不可读 lloks 模糊。
2.  将 SVG 转换为 PDF 并将 PDF 转换为图像。我正在使用 Batik 执行 SVG 到 PDF，使用 PDFRenderer 执行 PDF 到图像。
    PDF to image 生成不可读的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T22:02:20.057

试试[svgexport](https://github.com/shakiba/svgexport)，它有一个质量参数，可以导出为 png、jpeg 和 pdf。我是它的作者。

# c++ - C++ STRUCT 不存储值

> ID：13453096
> 
> 赞同：0
> 
> 时间：2012-11-19T11:45:05.917
> 
> 标签：c++, visual-c++

我有一个问题，我做了基本的结构

```
struct TRADEBOT_ITEM
{
    BYTE Slot;
    BYTE Cat;
    BYTE Id;
    BYTE LVL;
};
struct TRADEBOT_BUFFS
{
    short BUFFID;
    short Duration;
};

struct TRADEBOT_INVENTORY
{
    short itemId;
    BYTE level;
    BYTE opt;
    BYTE opt2;
    BYTE opt3;
    BYTE NewOption;
    BYTE Socket[5];
    int Expiration;

};
struct TRADEBOT_REQ
{
    short itemId;
    BYTE level;
    BYTE opt;
    BYTE opt2;
    BYTE opt3;
    BYTE NewOption;
    BYTE Socket[5];
};
struct TRADEBOT_MIX
{
    TRADEBOT_INVENTORY m_Inventory[64];
    TRADEBOT_REQ    m_Req[64];
    int ReqCnt;
};
struct TRADEBOT_DATA
{
    BYTE ID;
    BYTE Class;
    BYTE SPAWN;
    BYTE map;
    BYTE X;
    BYTE Y;
    BYTE Dir;
    BYTE Vip;
    WORD Strength;
    WORD Dexterity;
    WORD Vitality;
    WORD Energy;
    WORD Leadership;
    int ZEN;
    char Name[10];
    TRADEBOT_ITEM m_Item[9];
    TRADEBOT_BUFFS m_Buffs[5];
    TRADEBOT_MIX m_Mix[142];
}; 
```

后来用作

```
std::map<int, TRADEBOT_DATA> m_BotData; 
```

然后我尝试从文件中读取信息并将来自 fil 的信息保存在结构中

```
 this->m_BotData[ID].m_Mix[ID].m_Req[cntr].itemId = ITEMGET(cat,idx);

            Token = GetToken();
            this->m_BotData[ID].m_Mix[ID].m_Req[cntr].level = TokenNumber;

            Token = GetToken();
            this->m_BotData[ID].m_Mix[ID].m_Req[cntr].opt = TokenNumber;

            Token = GetToken();
            this->m_BotData[ID].m_Mix[ID].m_Req[cntr].opt2 = TokenNumber;

            Token = GetToken();
            this->m_BotData[ID].m_Mix[ID].m_Req[cntr].opt3 = TokenNumber;

            Token = GetToken();
            this->m_BotData[ID].m_Mix[ID].m_Req[cntr].NewOption = TokenNumber;

            Token = GetToken();
            this->m_BotData[ID].m_Mix[ID].m_Req[cntr].Socket[0] = TokenNumber;

            Token = GetToken();
            this->m_BotData[ID].m_Mix[ID].m_Req[cntr].Socket[1] = TokenNumber;

            Token = GetToken();
            this->m_BotData[ID].m_Mix[ID].m_Req[cntr].Socket[2] = TokenNumber;

            Token = GetToken();
            this->m_BotData[ID].m_Mix[ID].m_Req[cntr].Socket[3] = TokenNumber;

            Token = GetToken();
            this->m_BotData[ID].m_Mix[ID].m_Req[cntr].Socket[4] = TokenNumber;

            this->m_BotData[ID].m_Mix[ID].ReqCnt++;
            cntr++; 
```

并且结构保持空白，没有信息写入它。我不知道为什么。

另外，如果我将值更改`TRADEBOT_MIX m_Mix[142];`为`TRADEBOT_MIX m_Mix[143];`应用程序崩溃，也不知道为什么。任何想法，将不胜感激。

我正在使用 Visual Studio 2010

# java - Ant 不支持批处理测试元素内的循环

> ID：13453099
> 
> 赞同：0
> 
> 时间：2012-11-19T11:45:15.440
> 
> 标签：java, ant, junit

我想在命令行中定义要运行的单元测试。测试是在基于 Java 包的逻辑结构中定义的。我想从命令行定义测试运行中要包含哪些 Java 包（即要包含哪些测试）。

通过这种方式，我想遍历路径值的标记化列表，并包含来自这些路径的 Java 测试。但是，batchtest 元素不支持嵌套的 for 循环。我怎样才能修改它来做我想做的事？因此，包含的数量与定义的路径值一样多。

更新：

我已经定义了这样的目标：

```
<target name="test">
    <property name="path" value="**"/>
    <junit fork="yes" failureproperty="true" forkmode="once">
            <formatter type="xml" />
            <classpath>
                <pathelement path="bin.path"/> 
            </classpath>

            <batchtest haltonerror="false" todir="${test.dir}"> 
                <fileset dir="/src/test/">
                    <for list="${path}" param="path">
                        <sequential>
                            <var name="path" value="@{path}"/>                      
                            <include name="**/${path}/**/*.java" />
                        </sequential>
                    </for>
                </fileset>
            </batchtest>
        </junit> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:53:38.907

您可以使用正则表达式。

例如;

```
<batchtest haltonfailure="yes" todir="/test">
        <fileset dir="/build/classes/"
                includes="**/TestBlaBla.class" excludes="**/BlaBla.class" />
</batchtest> 
```

我希望它对你有帮助。

# ios - objectWithID: 与 existingObjectWithID: 之间无法解释的行为差异：

> ID：13453100
> 
> 赞同：8
> 
> 时间：2012-11-19T11:45:22.707
> 
> 标签：ios, core-data

我了解这两个电话之间记录的差异。但是，有谁知道我注意到以下观察到的行为的原因：

如果我有一个 parentContext 和一个临时 childContext，我使用 childContext 编辑、插入和删除对象，如果使用 [childContext objectWithID:objectID]; 要检索存在于父上下文中的已知现有托管对象，它有时会给我一个带有错误的对象，该对象在被触发时失败并生成异常。我理解 objectWithID: 将始终返回处于故障状态的对象，而不管给定的 objectID 是否存在实际的 managedObject。但是，如果该对象实际上存在于父上下文中，我希望当访问任何属性时，该对象将始终成功地从父上下文中检索（例如，将触发故障）而没有任何问题。如果我使用 [childContext existingObjectWithID:objectID]; 我发现它确实总是成功。

作为记录，我已经关闭了子上下文的缓存，并且在调用 [childContext resetContext] 之后发生了同样的行为 - 所以它不是与父上下文不一致的旧缓存数据的假象。

在我看来，仅文档本身不足以解释这种行为。我当然可以把它归结为经验，然后说“我现在知道总是使用existingObjectWithID：将对象ID传递给我的孩子编辑上下文执行块时”但我感到不安，想确切地了解这里发生了什么（不是至少这样我可以理解使用一个对性能是否有任何影响，但也可以理解约束是什么，这样我就可以确保在我的代码中没有不必要地实施一些不好的做法，然后使用错误或低效的调用来修复它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:40:27.657

我在自己的代码中看到了这种行为（堆栈跟踪来自火星，花了很长时间才找到问题的原因），我的解决方案是相同的（从在子上下文中使用 objectWithID: 移动到使用现有的ObjectWithID:)。

在我的例子中，我会在父上下文中创建一个对象，立即为其获取一个永久对象 ID，并使用 UIManagedDocument 的 updateChangeCount:UIDocumentChangeDone 请求保存，这将在将来的某个时间安排保存。我认为这一点是讨论的关键。

然后，我将执行网络调用以获取与新创建的对象有关的 XML 数据，并将该数据解析并导入到 Core Data 中。这发生在后台线程上，我将对象 ID 传递给线程，该线程使用线程限制的子导入上下文。

在 iOS5 下，我会在工作线程中使用 objectWithID: 将新对象错误地放入导入上下文中。工作正常，没有问题。

在 iOS6 下，这开始失败，带有奇怪的堆栈跟踪，唯一的解决方案是移动到 existingObjectWithID:。在测试中，它似乎是一个可靠的解决方案，这种变化已经到位。

像你一样，我试图找到一些明确的声明来说明为什么会这样，但我没有成功。但是，我认为我的代码展示的模式和我看到的堆栈跟踪可能解释了正在发生的事情。我总是看到试图从持久存储中获取数据的崩溃。我相信在 iOS5 下，我通过 UIManagedDocument 请求的保存是在我的子线程有机会运行之前发生的，因此新对象在我调用 objectWithID: 之前就已经存在。从我的崩溃日志中可以看出，在 iOS6 下情况并非如此；线程在对象进入持久存储之前运行，因此它还不能被提取到子上下文中。我的假设是 existingObjectWithID: 确保在尝试获取之前执行任何挂起的 SQL I/O，因此当提取发生在我的工作线程中时，持久存储是一致的。我一直无法找到任何明确的支持这一点，但广泛的测试似乎支持这就是正在发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T20:23:21.813

与 OP 有相同的问题，虽然我认为例外是按设计设计的

> 如果对象没有在上下文中注册，它可能会被获取或作为错误返回。此方法始终返回一个对象。假定 objectID 表示的持久存储中的数据存在 - 如果不存在，则在您访问任何属性时（即触发故障时），返回的对象将引发异常。这种行为的好处是它允许您创建和使用故障，然后在以后或在单独的上下文中创建基础数据。

在 Apple 文档中——也就是说，数据还没有在持久存储中，它位于父上下文中——我根本无法在父上下文中获取我实现的对象似乎仍然很奇怪。为什么持久存储必须知道它才能填充我的对象？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:56:02.393

`existingObjectWithID`在使用“崩溃对象”之前使用“现有对象”`objectWithID`将导致两个对象相等。

反之，一旦访问“崩溃对象”的属性，应用程序就会崩溃。在这种情况下，对象不相等。“崩溃对象”有一个临时的 ObjectID。

# php - Magento RESTful API 用于将产品添加到购物车

> ID：13453102
> 
> 赞同：3
> 
> 时间：2012-11-19T11:45:26.420
> 
> 标签：php, magento, rest

Magento 中是否有任何 RESTful API 可以将产品添加到购物车？我知道可以使用 SOAP/XML 来完成，但我正在寻找使用 RESTful/JSON 的解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-17T20:38:43.740

2015 - 如果您正在寻找像我一样的答案，现在可以使用 Magento 2.0。

[http://devdocs.magento.com/swagger/index.html](http://devdocs.magento.com/swagger/index.html)

发布 /V1/carts/{cartId}/items

寻找quoteCartItemRepositoryV1。有一种将产品添加到购物车的发布方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T07:16:45.313

现在我们可以使用 RESTful API 查看信息，例如检索库存、订单、产品、客户列表和信息。

是的，您可以扩展 api 的功能以将产品添加到购物车。

# r - R legend pch 混合字符和数字

> ID：13453104
> 
> 赞同：18
> 
> 时间：2012-11-19T11:45:28.727
> 
> 标签：r

是否可以在 R 图例中混合使用字符和数字作为绘图符号？

```
plot(x=c(2,4,8),y=c(5,4,2),pch=16)
points(x=c(3,5),y=c(2,4),pch="+")
legend(7,4.5,pch=c("+",16),legend=c("A","B")) #This is the problem 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-06T20:39:56.460

使用“+”字符的等价数字：

```
plot(x=c(2,4,8),y=c(5,4,2),pch=16)
points(x=c(3,5),y=c(2,4),pch="+")
legend(7,4.5,pch=c(43,16),legend=c("A","B")) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-19T13:01:33.690

我的第一个想法是绘制图例两次，一次打印字符符号，一次打印数字符号：

```
plot(x=c(2,4,8),y=c(5,4,2),pch=16)
points(x=c(3,5),y=c(2,4),pch="+")
legend(7,4.5,pch=c(NA,16),legend=c("A","B")) # NA means don't plot pt. character 
legend(7,4.5,pch=c("+",NA),legend=c("A","B")) 
```

**注意：**奇怪的是，这适用于 R 的本机图形设备（在 Windows 上）和 in `pdf()`，但不适用于`bmp()`或`png()`设备 ...

![在此处输入图像描述](../Images/bf076ef96dbbeccdf8b7e6815b336b15.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-28T15:37:27.350

实际上所有符号都有数字等价物！

[![在此处输入图像描述](../Images/182758047286de9ba46e17052292726a.png)](https://i.stack.imgur.com/MrqtV.png)

^(资料来源：[戴夫·罗伯茨](https://davidrroberts.wordpress.com/2015/06/02/r-pch-symbol-library-plot/))

pch 代码是上图**的 Y 和 X 坐标的****[串联](https://en.wikipedia.org/wiki/Concatenation)**。

*   例如，`+`符号位于行 (Y) 4 和列 (X) 3，因此可以使用 pch = 43 绘制。

例子：

```
plot(x=c(2,4,8),y=c(5,4,2),pch=16)
points(x=c(3,5),y=c(2,4),pch="+")
legend(7,4.5,pch=c(43,16),legend=c("A","B")) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-31T21:07:11.533

我多次碰到这个问题，所以我在下面写了一个小函数。您可以使用指定 pch 值，例如

```
pch=c(15:17,s2n("|")) 
```

[字符串转数字](https://github.com/kklot/R-Utils/blob/master/s2n.R)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-24T18:31:44.023

如前面的答案所述，您可以简单地添加要绘制的数字和字符符号的[数字](https://stackoverflow.com/a/18090036/4581200)等价[物。](https://stackoverflow.com/a/43073911/4581200)

但是，只是一个相关的问题：如果您想绘制更大的数字（例如，> 100）或字符串（例如，'ABC'）作为符号，您需要使用基于 using 的完全不同的方法`text()`。

```
`Plot(x,y,dat,type='n') ; text(x,y,labels = c(100,'ABC') 
```

在这种情况下创建图例更加复杂，我想出的最佳方法是将**图例堆叠在一起并使用符号和描述的`legend`参数`pch`**：

```
pchs <- c(100,'ABC','540',sum(13+200),'SO77')

plot(1:5,1:5,type='n',xlim=c(1,5.1))
  text(1:5,1:5,labels = pchs)
  legend(3.5,3,legend = pchs,bty='n',title = '')
  legend(3.5,3,legend = paste(strrep(' ',12),'ID#',pchs),bty='n',title='Legend')
  rect(xleft = 3.7, ybottom = 1.5, xright = 5.1, ytop = 3) 
```

*   这用于[`strrep`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/strrep.html)连接空格以将文本从“符号”转移，并[`rect`](https://stat.ethz.ch/R-manual/R-devel/library/graphics/html/rect.html)用于追溯地在打印的图例文本周围放置一个框。

[![在此处输入图像描述](../Images/00e3599968e5d4e3c379e385ea6921e6.png)](https://i.stack.imgur.com/b1fSNm.png)

# c# - AddEventHandler 当事件处理程序参数是方法中的对象时

> ID：13453105
> 
> 赞同：1
> 
> 时间：2012-11-19T11:45:38.370
> 
> 标签：c#, events, dynamic

我有一个 Windows Phone 页面 (MainPage)，在代码隐藏中，我想动态添加一个事件处理程序 - 例如添加到 MouseEnter 事件。诀窍是，我希望这个事件处理程序将事件参数作为一个对象：

```
 private void MyEventHandler(object sender, object args)
    {

    } 
```

（原因是这是一个简化的例子）

这有效：

```
this.MouseEnter += MyEventHandler; 
```

但这会引发 ArgumentException：

```
var handlerType = Type.GetType("System.EventHandler`1").
                  MakeGenericType(typeof(EventArgs));
this.GetType().GetEvent("Hold").AddEventHandler(
                  this, Delegate.CreateDelegate(handlerType, this, "MyEventHandler")); 
```

异常的消息是：“无法绑定到目标方法，因为它的签名或安全透明度与委托类型的不兼容。” 如果我更改事件处理程序的签名，一切正常，但我想将其保留为“对象”或“动态”。

如何使用 AddEventHandler 调用添加事件处理程序？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:09:43.630

看起来您需要借助 DynamicMethod 和 ILGenerator 来生成与事件处理程序的签名匹配的方法。然后在 DynamicMethod 实现中调用具有您的签名 void MyEventHandler(object, object) 的全局事件处理程序。

```
public MainPage()
{
   var handler = Create<MouseEventHandler>();
   this.LayoutRoot.MouseMove += handler;
}

public static void MyEventHandler(object sender, object args)
{
    Debug.WriteLine("MyEventHandler({0}, {1})", sender, args);
}

private TDelegate Create<TDelegate>()
{
    // retrieve parameter types from delegate type
    var delegateType = typeof(TDelegate);
    var invoke = delegateType.GetMethod("Invoke");
    var parameterTypes = (from p in invoke.GetParameters()
                          select p.ParameterType).ToArray();

    // create dynamic event handler having TDelegate signature
    var method = new DynamicMethod("", null, parameterTypes);
    var myEventHandlerMethod = typeof(MainPage).GetMethod("MyEventHandler");

    var generator = method.GetILGenerator();
    generator.Emit(OpCodes.Ldarg_0);
    generator.Emit(OpCodes.Ldarg_1);
    generator.Emit(OpCodes.Call, myEventHandlerMethod);    // invoke my event handler
    generator.Emit(OpCodes.Ret);

    return (TDelegate)(object)method.CreateDelegate(delegateType);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:55:32.133

关键字是委托协方差：

```
class Program
{
  static void Main(string[] args)
  {
    var t = new Test();

    var e = t.GetType().GetEvent("TestEvent");
    var te = Delegate.CreateDelegate(e.EventHandlerType, new EventHandler(MyMethod).Method);

    e.AddEventHandler(t, te);

    t.RaiseTest();
  }

  static void MyMethod(object sender, object args)
  {

  }
}

public class Test
{
  public class MyEventArgs : EventArgs { }

  public void RaiseTest()
  {
    var e = TestEvent;
    if (e != null)
      e(this, new MyEventArgs());
  }

  public event EventHandler<MyEventArgs> TestEvent;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:42:11.990

包装它的匿名方法应该可以解决问题： this.MouseEnter += (s,e) => MyEventHandler(s,e);

# visual-studio - Visual Studio - 单击解决方案时出错 - > 属性（对象引用未设置为对象的实例）

> ID：13453109
> 
> 赞同：38
> 
> 时间：2012-11-19T11:45:43.487
> 
> 标签：visual-studio, visual-studio-2012

当我尝试访问我的解决方案属性时，我收到以下错误：

```
Object reference not set to an instance of an object 
```

我正在使用 VS 2012。这可能是什么原因？

![在此处输入图像描述](../Images/fb9afc65e8427e93d8f1027ae5b7867b.png)

![在此处输入图像描述](../Images/2b392ed9cb81b92a0106b309d60ef47f.png)

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-06T14:45:03.500

一些扩展可能会导致这种情况。尝试禁用扩展并重新启动 Visual Studio。

即使您在此之后重新启用扩展，错误通常也会消失。

[Microsoft Connect (链接](http://connect.microsoft.com/VisualStudio/feedback/details/763961/cannot-open-property-pages-for-solution))上有一个错误报告。它在那里被标记为“封闭为外部”，但似乎它可能随任何扩展随机发生，因此值得在那里投票以引起微软的注意。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-26T06:09:12.940

就我而言，问题是特定于解决方案的。NuGet 导致此错误，但不是扩展本身，而是在 VS 加载时生成错误的 NuGet 包。当我打开 NuGet 包管理器控制台时，我看到一个带有错误描述的大红色文本。在我的例子中，它是 T4Scaffolding.Core 包，它又是 MVCMailer 的依赖项。

如果是这种情况，您可能会在 PM 控制台中看到哪个包生成错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-20T08:44:00.423

我也遇到了这个对话框，我不确定究竟是什么原因造成的，因为我什至无法打开 NuGet 控制台来查看详细的错误消息。

关闭 Visual Studio，删除`%AppData%\Microsoft\VisualStudio`并重新启动 Visual Studio 对我有用，因为它会导致重置各种内容，例如窗口配置。

我认为如果显示此对话框，某些文件可能已损坏`%AppData%\Microsoft\VisualStudio`，通过删除该文件夹，Visual Studio 可以再次正常启动。

更新：

当我使用“以管理员身份运行”启动 Visual Studio 时，我的机器上出现了问题，而 Visual Studio 之前已在没有该选项的情况下启动，并且`%AppData%\Microsoft\VisualStudio`是在没有管理员*关联*的情况下创建的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-05T16:10:47.440

Visual Studio 2013：我在尝试打开工具 -> 扩展和更新时遇到了这个问题。我使用了@ViRuSTriNiTy 的想法，但只清理了以下文件： C:\Users[myUserName]\AppData\Local\Microsoft\VisualStudio\12.0\Extensions 那里有 2 个缓存文件。删除它们并重新启动VS2013并修复

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-05T21:55:04.317

它发生的方式对我/我的设置来说可能是独一无二的，但我很想知道是否有其他人发生这种情况，以及他们是否找出原因：

*   如果我通过双击启动一个 .sln 文件，它将加载 VS，我可以右键单击解决方案并让属性出现没有问题。
*   如果我在 Visual Studio 欢迎页面上或从文件 > 打开 > 项目/解决方案转到“打开项目”，导航到 .sln 文件并通过选择它并在“文件”对话框中单击“打开”来启动它，这时我有这个问题。

从现在开始，我将始终启动 .sln 文件，但我很想知道为什么在欢迎页面或文件 > 打开 > 项目/解决方案中使用“打开项目”时会发生这种情况！我尝试进入 Tools > NuGet Package Manager > General 并取消选中允许 NuGet 下载丢失的包和跳过应用绑定重定向的选项，并在 Package Sources 下取消选中复选框（我的开发机器无法连接到 Internet） . 环境>扩展和更新：我尝试了使用和不使用“以管理员身份运行时加载每个用户扩展”并以管理员身份运行而不以管理员身份运行。还尝试删除 C:\Users\me\AppData\Local\Microsoft\VisualStudio 中的所有内容。与上述 2 个项目符号没有任何变化。

# visual-studio - Visual Studio 在调试 .NET 4.0 应用程序时使用 .NET 4.5 调试致命错误 0x8007000e

> ID：13453111
> 
> 赞同：9
> 
> 时间：2012-11-19T11:45:48.463
> 
> 标签：visual-studio, .net-4.0, .net-4.5, fatal-error

安装 VS2012 和 .NET 4.5 后，Visual Studio 2010 和 2012 在调试我们的应用程序时都开始挂起，出现致命错误 0x8007000e。我知道这个错误意味着进程内存不足，我可以在任务管理器上看到 devenv.exe 进程内存不断增长，直到达到 3GB 限制。此时出现异常。

在没有 .Net 4.5 的机器上一切正常。我们的应用程序内置在 .Net 4.0 中，迁移到 .Net 4.5 不是一种选择。有什么解决方法吗？我们想开始使用 VS2012，但我们无法将所有应用程序迁移到 .Net 4.5。

谢谢您的帮助，

努诺佩雷拉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:32:31.033

如果您在 .NET 4.5 框架下运行，但在 .NET 4 中编译，您可能想尝试将其添加到您的配置文件中：

```
<configuration>
  <system.xml.serialization>
    <xmlSerializer useLegacySerializerGeneration="true"/>
  </system.xml.serialization>
</configuration> 
```

正如在此链接中向我建议的那样：

[.NET 4.5 中的序列化中断](https://stackoverflow.com/questions/14689305/serialization-breaks-in-net-4-5)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T14:05:49.603

我收到了 Kevin Halverson 关于这个问题的反馈。好像和XmlSerialization有关。生成静态序列化程序集可防止错误发生。可以使用“sgen.exe”、“svcutil.exe /t:xmlSerializer”或通过在 Visual Studio 中打开项目属性的“生成序列化程序集”选项来生成静态序列化程序集。

感谢 Anand 和 Kevin 提供的所有帮助。

# jpeg2000 - jpeg2000 文件结构查看器

> ID：13453113
> 
> 赞同：2
> 
> 时间：2012-11-19T11:46:02.613
> 
> 标签：jpeg2000

对于我们正在开发的应用程序，了解每个分辨率和质量层的 JPEG2000 码流中存储了多少数据（以字节为单位）非常重要。有人知道可以轻松显示此信息的应用程序/库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:57:09.670

看看免费的 JP2 元数据编辑器：

[http://j2k-codec.com/mde.html](http://j2k-codec.com/mde.html)

它不会按分辨率显示数据，但至少会显示每个图块的压缩码流大小。也许它会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T15:24:12.380

在这些情况下，我一直在使用[jpylyzer](http://packages.qa.debian.org/j/jpylyzer.html)和/或[pirl](http://packages.qa.debian.org/p/pirl.html) (jp2info)。

# javascript - 是否可以强制 iPad 屏幕在旋转时刷新？

> ID：13453118
> 
> 赞同：2
> 
> 时间：2012-11-19T11:46:21.033
> 
> 标签：javascript, ipad, dom-events, supersized

我有一个使用超大尺寸作为全屏背景的页面。根据屏幕宽度的大小，显示不同的背景图像。但是，当我将 iPad 从纵向旋转到横向（反之亦然）时，即从 768 像素屏幕宽度到 1024 像素屏幕宽度，需要刷新页面才能显示替代背景。

有什么方法可以在屏幕旋转时强制 iPad 刷新页面，也许是使用 Javascript？

这是超大代码：

```
<script type="text/javascript">

        jQuery(function($){
            var image_filename = 'GA.jpg';

            if($(window).width() < 1024) {
                image_filename = '_people.jpg';
            }
            $.supersized({
                slides  :   [ {image : 'images/'+image_filename, title : 'Image Credit: none'} ]
            });
        });

    </script> 
```

# javascript - 如何从 android phonegap 应用程序中的 https URI 下载文件？

> ID：13453121
> 
> 赞同：2
> 
> 时间：2012-11-19T11:46:33.830
> 
> 标签：javascript, android, html, cordova

如何在android中使用https协议下载文件？我正在尝试使用它，但不断收到错误消息。

我的下载代码：

```
var fileTransfer = new FileTransfer();
          fileTransfer.download(
                task_url,
                fileListDir + fileName,
            function(entry) {
                mylog("download complete: " + entry.fullPath);
            },
            function(error) {
                mylog("download error source " + error.source);
                mylog("download error target " + error.target);
                mylog("upload error code" + error.code);
            }); 
```

我的日志

> 11-19 13:56:13.339: E/FileTransfer(17969): {"target":"/mnt/sdcard/task1/Picture_4.jpg","source":"https://91.228.199.95/ksiywFac63f2hs/fotos .gleb/Picture_4.jpg","code":3} 11-19 13:56:13.339: E/FileTransfer(17969): javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: 用于认证的信任锚找不到路径。11-19 13:56:13.339: E/FileTransfer(17969): at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:477) 11-19 13:56:13.339: E/ FileTransfer(17969)：在 org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:328) 11-19 13:56:13.339：E/FileTransfer(17969)：在 org.apache.harmony .luni.internal.net.www.protocol.http.HttpConnection。下载(FileTransfer.java:486) 11-19 13:56:13.339: E/FileTransfer(17969): at org.apache.cordova.FileTransfer.execute(FileTransfer.java:88) 11-19 13:56:13.339: E/FileTransfer(17969)：在 org.apache.cordova.api.PluginManager$1.run(PluginManager.java:231) 11-19 13:56:13.339：E/FileTransfer(17969)：在 java.lang.Thread。运行（Thread.java:1019）11-19 13:56:13.339：E/FileTransfer（17969）：原因：java.security.cert.CertificateException：java.security.cert.CertPathValidatorException：找不到证书路径的信任锚. 11-19 13:56:13.339: E/FileTransfer(17969): at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:161) 11-19 13:56:13.339: E/文件传输（17969）：在 org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.verifyCertificateChain（OpenSSLSocketImpl。java:664) 11-19 13:56:13.339: E/FileTransfer(17969): at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(本机方法) 11-19 13:56:13.339: E /FileTransfer(17969): at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:474) 11-19 13:56:13.339: E/FileTransfer(17969): ... 还有 10 个11-19 13:56:13.339：E/FileTransfer(17969)：原因：java.security.cert.CertPathValidatorException：找不到证书路径的信任锚。11-19 13:56:13.339: E/FileTransfer(17969): 在 org.bouncycastle.jce.provider.PKIXCertPathValidatorSpi.engineValidate(PKIXCertPathValidatorSpi.java:207) 11-19 13:56:13.339: E/FileTransfer(17969) : 在 java.security.cert.CertPathValidator.validate(CertPathValidator.java:197) 11-19 13:56:13.339: E/FileTransfer(17969): at org.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T14:18:59.140

答案是将旧的 cordova 更改为 cordova 2.2.0 并在代码中写入 true，一些 this

```
var fileTransfer = new FileTransfer();
      fileTransfer.download(
            task_url,
            fileListDir + fileName,
        function(entry) {
            mylog("download complete: " + entry.fullPath);
        },
        function(error) {
            mylog("download error source " + error.source);
            mylog("download error target " + error.target);
            mylog("upload error code" + error.code);
        }, true); 
```

这是工作！！！谢谢西蒙麦克唐纳德！

# android - 禁用android ICS中的红色边框？

> ID：13453131
> 
> 赞同：1
> 
> 时间：2012-11-19T11:47:10.593
> 
> 标签：android

当我在 android 中打开一个新应用程序时，红色边框也会出现在其他平台的 ICS 版本中。它会停留一两秒钟。我想禁用它。你能告诉我如何在android中禁用红框边框吗？提前谢谢...请帮助我..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T11:53:29.063

试试这个

```
Settings -> Developer Options -> Disable Strict mode . 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:55:49.470

AFAIK，这是由`ICS update`. 我的设备遇到了这个问题。

试着去

> 设置 > 开发人员选项 >（在）用户界面 >（取消选中）严格模式

我不确定我们是否有相同的设置设置。希望这可以解决您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T12:01:38.207

> 你能告诉我如何在android中禁用红框边框吗？

您在主应用程序线程上花费了太多时间，并且设备具有通过红色边框闪烁显示此类问题的设置（在其他答案中注明）。

虽然调整设置摆脱了闪存，但它并没有摆脱在主应用程序线程上花费太多时间的有缺陷的代码。无论您`StrictMode`是在代码中使用，还是使用 Traceview 来识别慢点，您都需要停止阻塞主应用程序线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:13:59.687

我得到了答案。“设置>开发人员选项>（在）用户界面>（取消选中）严格模式”这个答案在午餐模式是用户模式时有效，而当午餐处于英语模式时它不起作用。我在 Settings 应用程序的 DevelopmentSettings.java 中找到了代码。代码如下。

```
private void removeHdcpOptionsForProduction() {
    if ("user".equals(Build.TYPE)) {
        Preference hdcpChecking = findPreference(HDCP_CHECKING_KEY);
        if (hdcpChecking != null) {
            // Remove the preference
            getPreferenceScreen().removePreference(hdcpChecking);
        }
    }
} 
```

所以我删除了条件检查..

# c - C中第二个平分线右侧的元素之和

> ID：13453137
> 
> 赞同：0
> 
> 时间：2012-11-19T11:47:26.610
> 
> 标签：c, matrix

我正在尝试在 C 中创建一个函数来计算二维方阵右侧的元素之和。（只有以下评论中的 1 个元素）到目前为止，我已经得到了这个，但它是不正确的，因为它计算了整个矩阵的元素之和：

```
 #define N 5
  int a[N][N] ={{0,0,0,0,1},
                {0,0,0,1,1},
                {0,0,1,1,1},
                {0,1,1,1,1},
                {1,1,1,1,1}};

 /*
    {0,0,0,0,1},
    {0,0,0,1,1},
    {0,0,1,1,1},
    {0,1,1,1,1},
    {1,1,1,1,1},
    sum =
                                            a[0][4] + 
                                  a[1][3] + a[1][4] + 
                        a[2][2] + a[2][3] + a[2][4] + 
              a[3][1] + a[3][2] + a[3][3] + a[3][4] +
    a[4][0] + a[4][1] + a[4][2] + a[4][3] + a[4][4]
    */

    int sumSndBisRight(int a[N][N]) {
          int i, j, sum = 0, k = N - 1;
          for( i = 0;i < N;i++) 
              for( j = (N - 1);j >= 0;j--)          
                           sum += a[i][j];          
          return sum;  
    }
    void main() {
    int sum;
    sum = sumSndBisRight(a);
    printf("%d", sum);
    } 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:50:11.590

改变

```
for( j = (N - 1);j >= 0;j--) 
```

到

```
for( j = N-1-i; j < N; j++) 
```

# database - VB .NET 连接到本地 .MDB

> ID：13453138
> 
> 赞同：0
> 
> 时间：2012-11-19T11:47:31.313
> 
> 标签：database, vb.net, login, passwords, local

大家好，你能告诉我如何连接到受登录名和密码保护的本地计算机并打开这台计算机上的.mdb 文件吗？

下面是一个代码，其中 Z 是本地计算机，但 B 是我们拥有数据库的文件夹。但是一直以来我都遇到了错误，我没有打开 magazyn.mdb 的权限。你能告诉我我必须添加什么到这个connectionString来打开这个.mdb文件吗

```
 conn.ConnectionString = _
"Provider=Microsoft.Jet.OLEDB.4.0;Data source=" & _
"\\z\b\magazyn.mdb;" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:19:57.830

您正在访问共享文件夹上的数据库文件。您必须设置共享`\\z\b`属性（以及文件系统安全性）以允许读/写访问并另外允许创建文件 - 访问需要创建锁定 (*.ldf) 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:50:41.303

像这样的东西：

```
conn.ConnectionString = _
"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & _
"\\z\b\magazyn.mdb;User Id=admin;Password=password;" 
```

有关更多示例，请参见[此处](http://www.connectionstrings.com/access)。

# components - 配置多媒体组件以在网站文件夹中发布

> ID：13453142
> 
> 赞同：7
> 
> 时间：2012-11-19T11:48:00.783
> 
> 标签：components, tridion, tridion-2011, multimedia, tridion-content-delivery

需要使用多媒体组件发布`JS`和文件。`CSS`多媒体组件在网站文件夹之外发布，类似于中的图像

```
“C:\tridion\temp\pub14\Includes\scripts” 
```

任何想法如何配置多媒体组件以在网站文件夹中发布。

我们正在使用`IIS`部署网站

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T12:13:05.960

您可以通过编辑 cd_storage_conf.xml 来控制它。在此文件中，您可以配置每个发布的二进制文件的位置。例如：您可能配置了类似的内容：`<Item typeMapping="Binary" cached="false" storageId="myStorageId"/>`并且此存储在元素`myStorageId`内部定义，例如：`Storages`

```
<Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory"
         Id="myStorageId" defaultFilesystem="true" defaultStorage="true">
    <Root Path="c:\temp\" />
</Storage> 
```

如果是这种情况，那么您需要将根路径更改为指向 IIS 中 WebApplication 的根。详细了解如何在[此处](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_005JJFGGGD8858699HHFHJF)配置您拥有的存储（需要登录）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-19T13:30:03.497

只要您为同一路径创建了结构组，就可以使用模板代码覆盖多媒体二进制文件的路径。

例如，如果您想将特定的二进制文件发布到 \css\images 文件夹，您首先必须为相同的路径（\css\images）创建结构组，并使用以下代码中的结构组 ID 来发布二进制文件。

```
engine.AddBinary(Binary.Id, templateID, binaryStructureGroupID, Binary.BinaryContent.GetByteArray(), Binary.FileName); 
```

# entity-framework - 如何防止在Entity Framework Code First中循环加载相关实体

> ID：13453144
> 
> 赞同：7
> 
> 时间：2012-11-19T11:48:02.993
> 
> 标签：entity-framework

我是 Entity Framework 的新手，正在尝试学习如何使用 Code First 从数据库中加载实体。

我的模型包含一个用户：

```
public class User
{
    public int UserID { get; set; }

    [Required]
    public string Name { get; set; }

    // Navigation Properties
    public virtual ICollection<AuditEntry> AuditEntries { get; set; }
} 
```

每个用户都可以有一组审计条目，每个条目都包含一条简单的消息：

```
public class AuditEntry
{
    public int AuditEntryID { get; set; }

    [Required]
    public string Message { get; set; }

    // Navigation Properties
    public int UserID { get; set; }
    public virtual User User { get; set; }
} 
```

我有一个 DBContext 只公开两个表：

```
public DbSet<User> Users { get; set; }
public DbSet<AuditEntry> AuditEntries { get; set; } 
```

我想要做的是加载包含消息的 AuditEntry 对象列表以及包含 UserID 和 Name 属性的相关 User 对象。

```
List<AuditEntry> auditEntries = db.AuditEntries.ToList(); 
```

因为我将导航属性标记为虚拟并且我没有禁用延迟加载，所以我得到了一个无限深的对象图（每个 AuditEntry 都有一个 User 对象，其中包含 AuditEntries 的列表，每个都包含一个 User 对象，其中包含 AuditEntries 列表等）

如果我想序列化对象（例如在 Web API 中作为结果发送），这并不好。

我尝试关闭延迟加载（通过从模型中的导航属性中删除虚拟关键字，或者将 this.Configuration.LazyLoadingEnabled = false; 添加到我的 DBContext）。正如预期的那样，这会生成一个包含 User 设置为 null 的 AuditEntry 对象的平面列表。

关闭延迟加载后，我尝试像这样急切加载用户：

```
var auditentries = db.AuditEntries.Include(a => a.User); 
```

但这会导致与以前相同的深度/循环结果。

如何在不加载反向引用/跟随导航属性回到原始对象并创建循环的情况下加载一层深度（例如，包括用户的 ID 和名称）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:10:50.443

经过多次黑客攻击，我在我的 Linq 查询中使用动态返回类型和投影提出了以下潜在解决方案：

```
public dynamic GetAuditEntries()
{
    var result = from a in db.AuditEntries
                 select new
                 {
                     a.AuditEntryID,
                     a.Message,
                     User = new
                     {
                         a.User.UserID,
                         a.User.Username
                     }
                 };

    return result;
} 
```

这会（在内部）产生以下看似合理的 SQL：

```
SELECT 
[Extent1].[AuditEntryID] AS [AuditEntryID], 
[Extent1].[Message] AS [Message], 
[Extent1].[UserID] AS [UserID], 
[Extent2].[Username] AS [Username]
FROM  [dbo].[AuditEntries] AS [Extent1]
INNER JOIN [dbo].[Users] AS [Extent2] ON [Extent1].[UserID] = [Extent2].[UserID] 
```

这产生了我所追求的结果，但它似乎有点啰嗦（特别是对于比我的例子复杂得多的现实生活模型），我质疑这将对性能产生影响。

**优点**

*   这为我返回对象的确切内容提供了很大的灵活性。由于我通常在客户端进行大部分 UI 交互/模板，因此我经常发现自己必须创建模型对象的多个版本。我通常需要一定的粒度，用户可以看到哪些属性（例如，我可能不想在 AJAX 请求中将每个用户的电子邮件地址发送到低权限用户的浏览器）

*   它允许实体框架智能地构建查询，并且只选择我选择投影的字段。例如，在每个顶级 AuditEntry 对象中，我想查看 User.UserID 和 User.Username 而不是 User.AuditEntries。

**缺点**

*   我的 Web API 返回的类型不再是强类型的，因此我无法基于此 API 创建强类型的 MVC 视图。碰巧这对我的特殊情况来说不是问题。

*   从大型/复杂模型以这种方式手动投影可能会产生大量代码，看起来工作量很大，并且有可能在 API 中引入错误。这必须经过仔细测试。

*   API 方法与模型的结构紧密耦合，并且由于这不再基于我的 POCO 类完全自动化，因此对模型所做的任何更改都必须反映在加载它们的代码中。

**包括方法？**

我对 .Include() 方法的使用仍然有些困惑。我了解此方法将指定相关实体应与指定实体一起“急切加载”。但是，由于指导似乎是导航属性应放置在关系的两侧并标记为虚拟，因此 Include 方法似乎会导致创建一个循环，这对其有用性有很大的负面影响（尤其是在序列化时） .

在我的情况下，“树”看起来有点像：

```
AuditEntry
    User
        AuditEntries * n
            User * n
                etc 
```

我很想听听关于这种方法的任何评论、以这种方式使用动态的影响或任何其他见解。

# zend-framework - 如何从zend框架中的控制器调用db表行类的函数？

> ID：13453145
> 
> 赞同：0
> 
> 时间：2012-11-19T11:48:14.290
> 
> 标签：zend-framework, zend-db, zend-db-table

我正在尝试调用我的 dbtable 行类中存在的函数，即 Test.php。我想从我的控制器中调用它。我的 dbtable 类是测试。

```
$obj=new Model_Test();
$obj->testFunction(); 
```

但它不起作用并给出以下错误。

> 注意：未定义的变量：第 19 行 /opt/lampp/htdocs/TestApp/application/modules/public/controllers/TestsController.php 中的 modelTest
> 
> 致命错误：在第 19 行的 /opt/lampp/htdocs/TestApp/application/modules/public/controllers/TestsController.php 中的非对象上调用成员函数 testFunction()

我需要如何从我的控制器中调用该函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:23:14.217

你似乎在第 19 行有这样的东西

```
$modelTest->testFunction(); 
```

问题是，`$modelTest`还没有定义。

你可能应该在第 19 行之前有这样的东西

```
$modelTest = new Model_Test; 
```

# c# - 从 Metro 风格应用程序的父框架访问源页面中的 TextBlock 控件

> ID：13453146
> 
> 赞同：0
> 
> 时间：2012-11-19T11:48:16.697
> 
> 标签：c#, windows-8, microsoft-metro, frame

我的源页面

```
<Grid>   
    <TextBlock x:Name="TbHeader"/>
    <Frame x:Name="FrmPages" d:IsLocked="True"/>
</Grid> 
```

我的源页面代码

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            FrmPages.Navigate(typeof(Categories));
        } 
```

这是我的父类别页面代码

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    //??? How can I change TbHeader.Text?
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:07:30.300

如果我正确地回答了您的问题，您正在尝试更改当前未显示的 XAML 页面中的值。如果真是这样，那真的没有意义。

如果您想根据用户输入将数据从一个页面发送到另一个页面，您可以使用 Navigate 发送参数，请参阅[本教程](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh771188.aspx)。

# javascript - 如何匹配多个序列

> ID：13453148
> 
> 赞同：0
> 
> 时间：2012-11-19T11:48:22.373
> 
> 标签：javascript, regex

如何用正则表达式匹配多个字符串？

在这里我想同时匹配`name`and `txt`，但只`name`匹配？

```
var reg = new RegExp('%([a-z]+)%', "g");
reg.exec('%name% some text %txt%'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:51:50.400

改用[`match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)：

```
'%name% %txt%'.match(reg); //["%name%", "%txt%"] 
```

[`exec`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)只检索第一个匹配项（尽管有捕获组）。

如果捕获组对您很重要，您可以使用循环：

```
var matches = [];
var str = '%name% some text %txt%';
var reg = new RegExp('%([a-z]+)%', "g");
while (match = reg.exec(str)){
    matches.push(match);
} 
```

如果您只想保留捕获的组，请改用：

```
matches.push(match[1]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T11:51:57.587

您需要使用[`String.match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)而不是`exec`：

```
'%name% some text %txt%'.match(reg); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:01:13.413

g 标志确实有效，但需要在同一个字符串上多次执行

```
var reg = new RegExp('%([a-z]+)%', "g");
var str = '%name% some text %txt%';
var result;

while( result = reg.exec( str ) ) { // returns array of current match
    console.log( result[1] ); // index 0 is matched expression. Thereafter matched groups.
}​ 
```

以上输出`name`&`txt`到控制台。

[这里的](http://jsfiddle.net/bruno/Kt48N/)例子

# java - 查找数组的最大值

> ID：13453150
> 
> 赞同：1
> 
> 时间：2012-11-19T11:48:24.493
> 
> 标签：java, arrays

我有两个类，DataClass 和 MY GUI Class。

这是在我的 GUI 类中

```
 final ArrayList<DataClass> MarksData = new ArrayList<DataClass>(); 
```

我一次存储 4 个元素`[Mark1,Mark2,Mark3,Mark4]`

我怎样才能找到所有的最大标记`Mark1`

我试过`Object obj = Collections.min()`但没有用，因为它是`arrayList`type `DataClass`。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T11:50:30.350

最好的方法可能是使用`Collections.max()`，但要做到这一点，您需要[`Comparable<DataClass>`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)在`DataClass`类上实现。

此接口允许您定义一个`compareTo(DataClass o)`方法，您可以在该方法中编写逻辑以确定它是小于还是大于另一个标记，然后`Collections.max()`会为您找到最大值。

如评论中所述，您还可以编写自定义比较器并使用`Collections.max()`采用该自定义比较器的变体 - 但您编写的用于比较标记的逻辑是相同的。

请注意，如果您想找到最小标记，请选择`Collections.min()`. 所有其他细节保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:51:24.453

要使用 Collections.min()，您必须制作`DataClass implements Comparable<DataClass>`或提供自定义`Comparator<DataClass>`

# nhibernate - Nhibernate查询以选择按行分组的计数

> ID：13453156
> 
> 赞同：3
> 
> 时间：2012-11-19T11:48:42.247
> 
> 标签：nhibernate, select, count, group-by, subquery

我需要使用 NHibernate 获取此查询：

```
Select RequestStatus.[Status], Count(ApprovalRequest.Id)
    From ApprovalRequest Inner Join RequestStatus On ApprovalRequest.CurrentStatusId = RequestStatus.Id
    Where RequestStatus.[Status] In ('Approved', 'Queried') And ApprovalRequest.Deleted != 1
Group By RequestStatus.[Status] 
```

这是我的课：

```
 public class ApprovalRequest
    {
        public ApprovalRequest()
        {
            Id = Guid.NewGuid();
            Statuses = new List<RequestStatus>();
        }

        /// <summary>
        /// Identity No.
        /// </summary>
        public Guid Id { get; set; }

        /// <summary>
        /// Represents the current status of the request e.g. Approved.
        /// </summary>
        public RequestStatus CurrentStatus { get; set; }

        /// <summary>
        /// The statuses that the request experiences.
        /// </summary>
        public IList<RequestStatus> Statuses { get; set; }

    }
}

public class RequestStatus
{
    public RequestStatus()
    {
        Id = Guid.NewGuid();
    }

    public Guid Id { get; set; }

    public StatusEnum Status { get; set; }
} 
```

我试过这个查询：

```
 var lst = uow.Session.QueryOver<ApprovalRequest>()
                .JoinQueryOver<RequestStatus>(req => req.CurrentStatus)
                .SelectList(list =>
                    list
                    .SelectCount(p => p.Id)
                    .SelectGroup(p => p.CurrentStatus.Status)
                    ).List(); 
```

但我得到一个错误：

无法解析属性：CurrentStatus.Status 的：ApprovalRequest (NHibernate)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T12:51:00.253

您需要将连接的表绑定到别名。

```
ApprovalRequest approvalRequestAlias = null;
RequestStatus requestStatusAlias = null;

var lst = uow.Session.QueryOver<ApprovalRequest>(() => approvalRequestAlias)
    .JoinAlias(() => approvalRequestAlias.CurrentStatus, () => requestStatusAlias)
    .SelectList(list => list
        .SelectCount(p => p.Id)
        .SelectGroup(p => requestStatusAlias.Status)
    ).List(); 
```

# java - 如何在不使用java发送任何邮件的情况下检查域中是否存在电子邮件ID

> ID：13453160
> 
> 赞同：6
> 
> 时间：2012-11-19T11:48:56.110
> 
> 标签：java, dns, email-validation

有什么方法可以验证域中的电子邮件 ID 是否存在？

我有以下功能：它只检查有效域，但我需要检查域中的有效电子邮件地址而不发送任何邮件。

```
 public boolean isValidEmailAddress(String email) {
   boolean result = true;

   try {
      InternetAddress emailAddr = new InternetAddress(email);
      emailAddr.validate();

   } catch (AddressException ex) {
      result = false;
   }
   return result;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:56:03.007

这是一个可以进行多种类型验证的源代码，我已经使用了多年：

[http://www.rgagnon.com/javadetails/java-0452.html](http://www.rgagnon.com/javadetails/java-0452.html)

注意：请参阅页面中的函数 isAddressValid() 进行完整验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:52:58.790

听起来您需要[SMTP VRFY 命令](http://the-welters.com/professional/smtp.html)：

> 此命令将请求接收 SMTP 服务器验证给定的电子邮件用户名是否有效。SMTP 服务器将回复用户的登录名。可以在 sendmail 中关闭此功能，因为允许它可能是一个安全漏洞。VRFY 命令可用于探测系统上的登录名。有关关闭此功能的信息，请参阅下面的安全部分。

请注意上面的安全问题。

# c++ - 尝试使用 _tstoi 时出错

> ID：13453165
> 
> 赞同：1
> 
> 时间：2012-11-19T11:49:02.840
> 
> 标签：c++, cstring

我尝试将 a 的最后一个字符转换`CString`为`int`using `CString::GetAt()`，`_tstoi()`但编译器返回 me `error C2065: '_tstoi' : undeclared identifier`。我想我必须包含一个头文件，我试过`#include "tchar.h"`没有成功。

```
 CString str = "something2";
    int index = 0;

    if (!str.IsEmpty())
    {
        index = _tstoi((char*)str.GetAt(str.GetLength() - 1));
    } 
```

编辑：我使用 VC++ 6.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:22:36.033

VC6下这个函数是_ttoi而不是_tstoi（仍然包含在头文件'tchar.h'中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:30:40.830

如果这是您应该更正的代码，如 CString str = "something2";

# edb - 在 Vista 上打开页面大小超过 8192 的 edb-database

> ID：13453166
> 
> 赞同：0
> 
> 时间：2012-11-19T11:49:13.773
> 
> 标签：edb

我 用来设置与数据库相同的页面大小。有一个页面大小 == 32768 的数据库。在 Windows 7 上，此代码运行良好。在 Windows Vista JetSetSystemParameter 上返回 JET_errInvalidParameter。有什么方法可以在 Windows Vista 上打开页面大小超过 8192 的数据库？
`JetGetDatabaseFileInfo(db_name, &db_page_size, sizeof(db_page_size),JET_DbInfoPageSize);
JetSetSystemParameter(NULL, NULL, JET_paramDatabasePageSize, db_page_size, NULL);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:58:40.603

Windows 7 中添加了 32k 页。

即使数据库有 8k 页，还有其他 Windows 7 更改会使 Vista esent.dll 无法打开基于 Win7 的数据库文件。

如果只是自用，可以将Win7 esent.dll复制到Vista机器上。但我不认为允许使用您的程序重新分发 esent.dll。

-马丁

# android - 如何在不同的安卓设备上画一个物理大小相同的圆？

> ID：13453173
> 
> 赞同：2
> 
> 时间：2012-11-19T11:49:22.180
> 
> 标签：android, resolution, android-resources, screen-size, density-independent-pixel

我在资源文件中定义了一个圆半径尺寸，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="circleRadius">15dp</dimen>
</resources> 
```

然后我在自定义视图中绘制圆圈，如下所示：

```
Resources res = getResources();
float radius = res.getDimension(R.dimen.circleRadius);

...

canvas.drawCircle(randomX, randomY, radius, paint); 
```

我的印象是这会在任何设备上产生相同物理尺寸的圆圈，因为单位是在 dp 中指定的，但事实并非如此。请参阅下面的屏幕截图。

**设备 1**（皮肤=WVGA800，密度=240）：

![设备 1](../Images/e62fd792158f02209333b5fa17cf498d.png)

**设备 2**（皮肤=QVGA，密度=120）：

![设备 2](../Images/7bc2339e08ba4c37c8348ee43e3c97e0.png)

**设备 3**（皮肤=1024x768，密度=160）：

![设备 3](../Images/c75a76e6c39183f027f1519e870d2079.png)

对于每个设备，我`Scale display to real size`在启动时勾选了该选项，并使用相同的设置（屏幕尺寸=3.7 英寸，显示器 dpi=105）。这是我出错的地方吗？有什么我不明白的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-27T04:28:52.563

利用：

```
//get dots per inch

int dpi = getApplicationContext().getResources().getDisplayMetrics().densityDpi;

//the physical size you want in inches

float x = 0.25f;

//get number of dots for that physical size

final float radius = x*(new Float(dpi));

//now you use radius in drawCircle() method 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:56:38.593

你只是有错误的印象。要比较您的操作方式，您需要标准化输出。抓取所有屏幕截图并将它们缩放到相同的密度和分辨率。然后再比较。

**编辑**

如果您想显示直径为 1 英寸的圆，尽管您不应该使用硬件，`dp`但`in`还是使用`pt`单位。请参阅文档：http: [//developer.android.com/guide/topics/resources/more-resources.html#Dimension](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)

# java - 创建一个 ecdsa 密钥

> ID：13453178
> 
> 赞同：1
> 
> 时间：2012-11-19T11:49:40.030
> 
> 标签：java, security, encryption, key, keytool

是否可以使用 jdk 1.6 keytool 创建 ECDSA 密钥？

我已经尝试使用该`-genkey`命令，但似乎不受支持。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:09:52.257

AFAIK Java 6 对 TLS 的 ECDSA 支持有限，但它不包括任何 ECDSA 实现——它可以使用像 BouncyCastle 这样的第三方 JCE。可以将 keytool 与 BouncyCastle 一起使用来生成 ECDSA 密钥，但我从未尝试过。

我建议更新到 Java 7。但即使使用 Java 7，早期版本似乎也存在一些问题。根据错误条目[6870812：增强安全工具以使用 ECC 算法](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6870812)，您必须使用 1.7.0_07 或更高版本才能支持 ECC。

[此外，Stackoverflow Java 7 keytool Elliptic Curve Encryption](https://stackoverflow.com/questions/12303079/java-7-keytool-elliptic-curve-encryption)上的一个相关问题指出，您必须为 JCE 安装无限强度策略文件才能使用 ECC。

# jquery - 如何从jQuery集合中的所有元素中获取宽度

> ID：13453182
> 
> 赞同：0
> 
> 时间：2012-11-19T11:49:49.933
> 
> 标签：jquery

为什么不`$(".elm").width()`返回所有元素组合的宽度？这是设计使然，还是某种错误？

或者还有其他方法可以获取除此之外的所有元素的宽度：

```
var width = 0;
$(".elm").each(function() {
    width += $(this).width();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:55:41.240

Width 不会按设计返回组合宽度，因为这可能不是您正在寻找的预期值。

没有简单的方法可以判断元素是否一个接一个水平放置。它们可以位于页面上的任何位置，甚至可以位于彼此内部，因为 jQuery 对象可能是元素的组合或编辑列表。

页面上杂乱无章的元素的组合宽度意味着什么？

您已经找到了获得组合宽度的最简单方法:)

# excel - 如何在excel中获取列值，移动位置？

> ID：13453184
> 
> 赞同：0
> 
> 时间：2012-11-19T11:49:53.947
> 
> 标签：excel

考虑这张表

```
A1       B1      C1         M1      N1       .........

Jan 11, Feb 11, Mar 11....Dec 11, Jan 12, Feb 12, Mar 12... Dec 12 
```

我需要像这样交替的月份：

```
Jan 11, Jan 12, Diff Jan, Feb 11, Feb 12, Diff Feb ..... Dec 11, Dec 12, Diff 12 
```

我可以使用哪些公式来重建表格？

例如，我可以走到第一个表的末尾并获得 1 月 12 日，我必须插入一个公式，例如

```
column A+12 
```

在 Excel 中可以吗？

编辑：我需要的是创建一个公式，将第二年的月份移动到第一年的月份附近。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T19:43:11.023

In my experience the format you start with has been much more convenient that what I understand you to want but the choice is yours so I would suggest:

1.  Add a row at the top with `1` in A1, drag A1 across to L1 with `Ctrl` depressed, and copy those 12 cells to M1 and to Y1\.
2.  In Y3 (or adjust to suit) put `=X3-W3`, copy across to AJ3 and copy Y3:AJ3 down to suit.
3.  Select A:AJ, sort on Row1 Smallest to Largest and delete that row.
4.  Add labels to suit.

# objective-c - IBAction 显示数组的下一个对象

> ID：13453185
> 
> 赞同：-1
> 
> 时间：2012-11-19T11:50:00.403
> 
> 标签：objective-c

我正在尝试做一些我认为非常简单的事情，但我无法弄清楚。我正在用这样的对象填充一个数组`TableViewController`：

```
if (indexPath.row == 0) {
    detailController.textArray = [[NSMutableArray alloc] initWithObjects:@"Text1", @"Text2", @"Text3", @"Text4", @"Text5", nil];
} 
```

然后在`DetailController`我添加了这个动作以使标签显示 textArray 的下一个对象：

```
- (IBAction)nexTextButtonPressed:(id)sender {
int i = 0;
if (i<[textArray count])
    i++;
    textLabel.text = [textArray objectAtIndex:i];
} 
```

我将 ib 中的按钮连接到带有选项 Touch Down 的操作（也尝试了其他一些按钮）。有些东西不工作，按钮跳转到数组的第二个对象，但它不再工作了。什么可能导致这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:54:05.800

诠释 i = 0; 在方法内部初始化，每次调用时它总是被重新初始化为零，这不会让你从第二个对象前进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:55:32.200

好吧，每次你点击按钮时，我都会重置为 0，所以当它点击`if statement`是时，它会进入语句，因为条件是正确的，但是你将 i 增加 1，所以 i 变为 1，然后你检索数组索引 1 每次时间。你实际上并没有做任何其他事情。没有循环打印数组或任何东西。

# android - 通过 Android 应用程序访问 Internet

> ID：13453187
> 
> 赞同：1
> 
> 时间：2012-11-19T11:50:10.403
> 
> 标签：android, wcf, http, connection

我们，我和两个队友，正在尝试通过 Android 应用程序访问 WCF Web 服务。我们使用 JSON 来传输对象。我们已经测试可以通过 google chrome、internet explorer 和模拟器上的 android 浏览器通过 HTTP 调用该服务。

我们已经在 android manifest 中使用

```
<uses-permission android:name = "android.permission.INTERNET"/> 
```

我们使用 HttpClient 和 HttpResponse 对象来连接到 WCF 服务器。

目前，我们正在尝试在运行模拟器的机器上本地访问服务器，以及在本地网络上托管的机器上访问服务器。

我们的问题似乎是我们无法通过我们的应用程序连接到任何服务器，无论是我们尝试连接的服务器还是任何其他服务器。

我们已经使用 http 测试了与 windows phone 程序的服务器连接，这似乎工作正常。

我们是否遗漏了一些明显的东西？我们真的觉得我们正在用头撞砖墙。

非常感谢您提供的任何建议，如果需要更多信息，请随时回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:53:13.980

`10.0.2.2`用作与 android Emulator 在同一台机器上运行的服务器的 IP ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:11:58.010

尝试使用 Traceview [http://developer.android.com/tools/help/traceview.html](http://developer.android.com/tools/help/traceview.html)找出问题所在。您可以使用它创建一个跟踪文件，显示网络连接的状态以及失败的位置。

# ubuntu - 我在 ubuntu11.10 i386 上安装 XEN 管理程序时遇到问题

> ID：13453196
> 
> 赞同：1
> 
> 时间：2012-11-19T11:50:29.077
> 
> 标签：ubuntu, xen, hypervisor

sudo apt-get install xen-hypervisor-amd64

sudo sed -i 's/GRUB_DEFAULT=.*+/GRUB_DEFAULT="Xen 4.1-amd64"/' /etc/default/grub

须藤更新-grub

sudo sed -i 's/TOOLSTACK=.*+/TOOLSTACK="xm"/' /etc/default/xen

[错误]sed：无法读取/etc/default/xen：没有这样的文件或目录

# database - 我应该分开我的桌子吗？

> ID：13453204
> 
> 赞同：0
> 
> 时间：2012-11-19T11:50:42.830
> 
> 标签：database, database-design

我对我的数据库设计有疑问。

我想保存一些关于省和国家的信息。一开始我以为我可以将所有这些信息保存在一个表中（`General_info`）。然后对于该表中的每条记录；属于国家的列的值应重复。

另一个想法是将这个表分成两个表（`General_info_country`和`general_info_province`）。第一个表只有 3 列，另一个超过 10 列。

我该怎么办？哪种方法更有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:55:37.193

第一种方法（一个大表）的最大问题是，如果任何一个国家信息发生变化，您需要更新多行，这意味着您可能会犯错误并最终得到不一致的信息。

第二种方法被规范化并被认为是更好的关系设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:59:30.380

如果关系是一对一的并且将保持一对一的关系，那么您可以双向进行。但是如果是一对多，那么当然你必须拆分它们，并且在多部分中有外键

在关系是一对一的情况下，问题就变成了，您打算多频繁地使用所有属性？

如果您要经常一起使用这两个表，那么我建议您不要拆分它们，因为您需要在查询中大量加入它们。

但是，如果您要单独使用这两个故事而不是同时使用两个表中的信息，那么将它们分开可以节省一些时间。

# ruby - 二维数组中文件的方阵

> ID：13453206
> 
> 赞同：0
> 
> 时间：2012-11-19T11:50:53.190
> 
> 标签：ruby

我是ruby的新手，刚开始学习。找不到从文件中读取二维数组中的方阵的解决方案。

文件graph.txt：

```
0 3 0 0 10 0 0
0 0 9 0 0 0 0
0 0 0 3 0 0 15
0 0 0 0 0 0 10
0 0 0 0 0 8 0
0 0 0 0 0 0 0
0 0 0 0 15 0 0 
```

我的代码：

```
n=7
Arr = Array.new(n).map!{Array.new(n)}
text = ''
tx = File.readlines("graph.txt")
text = tx.join
i=0
text.each_line do |line|
        Arr[i] = line.split(/\n/)
        i+=1
end

p Arr 
```

结果：

> [["0 3 0 0 10 0 0"], ["0 0 9 0 0 0 0"], ["0 0 0 3 0 0 15"], ["0 0 0 0 0 0 10"], [ "0 0 0 0 0 8 0"], ["0 0 0 0 0 0 0"], ["0 0 0 0 15 0 0"]]

需要结果：

> [[0, 3, 0, 0, 10, 0, 0], [0, 0, 9, 0, 0, 0, 0], [0, 0, 0, 3, 0, 0, 15], [ 0, 0, 0, 0, 0, 0, 10], [0, 0, 0, 0, 0, 8, 0], [0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 15, 0, 0]]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:06:58.473

```
# Replace DATA.each_line with IO.readlines('graph.txt') to use the file as a data source

matrix = DATA.each_line.map { |line| line.split.map(&:to_i) }
puts matrix.inspect

__END__
0 3 0 0 10 0 0
0 0 9 0 0 0 0
0 0 0 3 0 0 15
0 0 0 0 0 0 10
0 0 0 0 0 8 0
0 0 0 0 0 0 0
0 0 0 0 15 0 0

# => [[0, 3, 0, 0, 10, 0, 0], [0, 0, 9, 0, 0, 0, 0], [0, 0, 0, 3, 0, 0, 15], [0, 0, 0, 0, 0, 0, 10], [0, 0, 0, 0, 0, 8, 0], [0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 15, 0, 0]] 
```

# rebol - 空 BITSET 的行为从 Rebol 2 更改为 Rebol 3！测试；如何测试 EMPTY？

> ID：13453209
> 
> 赞同：0
> 
> 时间：2012-11-19T11:51:07.103
> 
> 标签：rebol, bitset

在 Rebol 2 中，您可以使用 EMPTY 检查空位集？

```
>> empty? make bitset! #{00}
== true 
```

在 Rebol 3 *（Build 21-Feb-2011/0:44:24）*中，情况并非如此。

```
>> empty? make bitset! #{00}
== false 
```

错误还是新行为？不管怎样，我还能怎么做这个测试？不同大小的空位集在 R2 或 R3 中不相等：

```
>> (make bitset! #{00}) == (make bitset! #{0000})
== false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:54:26.883

新行为：>0 位的位集不为空；即使它没有设置位，它仍然包含已清除的位。

在 R3 中，您可以`or`使用空位集来确定给定的位集，以确定第一个位集是否为空——即：它没有设置位——以及：

```
>> empty? (make bitset! #{00}) or (make bitset! #{})
== true

>> empty? (make bitset! #{0000}) or (make bitset! #{})
== true 
```

作为一种方便的快捷方式，您也可以只`or`使用一个空的`binary!`，启用以下定义：

```
bitset-clear?: func [bitset [bitset!]] [empty? bitset or #{}] 
```

再次，使用您的示例：

```
>> bitset-clear? make bitset! #{00}   
== true

>> bitset-clear? make bitset! #{0000}
== true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:03:35.450

可能是 R2 和 R3 之间构建位集的方式的差异之一。这在 R3 (A111) 中仍然成立：

```
>> eb: charset []
== make bitset! #{}

>> empty? eb
== true 
```

# c# - MS Access 两个用户同时查询记录 - 一个应该锁定（来自 c# 网站）

> ID：13453210
> 
> 赞同：0
> 
> 时间：2012-11-19T11:51:12.470
> 
> 标签：c#, ms-access, locking

我有一个 MS Access 表，其中有一列名为“recordLocked”。把它想象成一个编辑器。内容存储在表中，我有两个用户想要编辑相同的内容。

我拥有的系统会自动将内容“提供”给用户进行编辑。所以他们登录了，我有一个计时器，它会询问服务器（以随机时间间隔）要编辑的内容。

从技术上讲，两个登录的用户永远不应该同时从服务器请求内容......但他们确实这样做了。到第二个。如果我查看日志，他们会说

```
"11:03:06 user 12 asked for content"
"11:03:06 user 77 asked for content" 
```

当用户 12 请求内容时，c# 代码会将数据库中的记录更新为“锁定” - 因此从技术上讲，当用户 77 请求内容时，它不应该将其提供给他们（因为它已被锁定）。

但正如他们同时要求的那样，它把它给了他们两个。

有没有更好的方法以这种方式“锁定”记录？这是我查询的 YES/NO 字段。

感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:00:25.227

您将需要查看记录锁定，这将在访问/编辑记录（行）时锁定它。

你可以在这里找到如何实现这个：[http ://www.databasedev.co.uk/multi-user-application-record-locking.html](http://www.databasedev.co.uk/multi-user-application-record-locking.html)

# android - 在按钮上显示和隐藏水平滚动视图在同一屏幕上单击代替按钮

> ID：13453215
> 
> 赞同：2
> 
> 时间：2012-11-19T11:51:29.857
> 
> 标签：android, android-layout, button, scroll, scrollview

我是android开发的新手，所以需要一些帮助。我想在单击与滚动视图相关联的按钮后显示水平滚动视图。我不知道如何在同一应用程序屏幕上的按钮的同一位置显示和隐藏滚动视图。

例如：按钮名称是 Show Emoticons，当我单击按钮时，我希望显示包含图像的 ScrollView，当我从中选择图像时，ScrollView 会隐藏。ScrollView 将包含 ImageView 将包含图像。

在这方面的任何帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T08:44:01.147

您可以使用多种方法来做到这一点，但我认为最简单的方法是 ToggleButton - [http://developer.android.com/guide/topics/ui/controls/togglebutton.html](http://developer.android.com/guide/topics/ui/controls/togglebutton.html)。按下 ToggleButton 后显示一个对话框，并为您的图像 xml 文件的自定义对话框 setContentView。 [http://www.mkyong.com/android/android-custom-dialog-example/](http://www.mkyong.com/android/android-custom-dialog-example/)

对于 Horizo​​ntalscrollview，这里是一个简单的例子。 [http://www.androidhub4you.com/2012/09/horizo​​ntal-scroll-view-in-android.html](http://www.androidhub4you.com/2012/09/horizontal-scroll-view-in-android.html)

干杯

# java - Map 和 Hashtable 的 ConcurrentModification 异常

> ID：13453217
> 
> 赞同：2
> 
> 时间：2012-11-19T11:51:31.973
> 
> 标签：java, exception, collections

在我的应用程序中，我使用 Map 来存储 POJO 对象。根据要求，我需要遍历 Map 的 keySet 并删除不需要任何修改的对象。

考虑下面的代码：

```
 public void remove(Map<String,User> removeUser){
  Set<String> keySet = removeUser.keySey();
  User user = null;

  for(String key : keySet){
      user = (user) removeUser.get(key);

       if(!user.isActive()){
                removeUser.remove(key);
       }
  }

 } 
```

在上面的代码中，当我在删除对象后尝试获取用户对象时，我得到了 ConcurrentModificationException。

谁能告诉我为什么会这样？

我没有使用多线程。所以无法理解它从哪里生成 ConCurrentModification 异常。

即使我尝试使用 HashMap 和 Hashtable，但问题仍然存在。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T11:53:11.670

> 它从哪里生成 ConCurrentModification 异常。

它来自您`Map`在迭代其`KeySet`.

```
if(!user.isActive()){
     removeUser.remove(key);  // This is the problem
} 
```

你不应该那样做。如果要修改`Collection`or `Map`，请使用`iterator`.

* * *

请参阅这篇非常好的帖子 -[高效等效的移除元素同时迭代集合](https://stackoverflow.com/questions/223918/efficient-equivalent-for-removing-elements-while-iterating-the-collection)，解释在修改您迭代的集合时可能出现的问题。

* * *

这是一个简单的代码，解释了如何在这里使用它：-

```
 Map<String, Integer> map = new HashMap<String, Integer>() {
        {
            put("a", 1);
            put("b", 2);
            put("c", 3);
        }
    };

    Iterator<String> iterate = map.keySet().iterator();

    while  (iterate.hasNext()) {
        int i = map.get(iterate.next());

        if(i > 1) {
            iterate.remove();
        }
    }

    System.out.println(map); 
```

**输出： -**

```
{a=1} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T11:56:38.553

如果您使用 ConcurrentHashMap，它不会产生 ConcurrentModificationException。

更通用的解决方案是使用 Iterator 来执行 remove()。

```
public void removeInactiveUsers(Map<String, User> map) {
    for (Iterator<User> iter = map.values().iterator(); iter.hasNext(); ) 
        if (!user.isActive())
            iter.remove();
} 
```

注意：您不需要，`keySet()`因为您只对`values()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T11:53:53.960

使用迭代器来迭代你的**Set**和 use `iterator.remove()`，你不能在迭代它时从你的**集合****中删除**元素。你会得到一个**ConcurrentModification 异常**

 ******您的异常的根本原因**在这里：

```
 removeUser.remove(key); 
```

使用迭代器像这样迭代你的集合。

```
Iterator<String> itr = keySet .iterator();
while(itr.hasNext){
   String s = itr.next();
   itr.remove(); // to remove the current element.
 } 
```****

# java - 将 java.io.StringWriter 转换为 byte[] 数组

> ID：13453226
> 
> 赞同：18
> 
> 时间：2012-11-19T11:52:03.670
> 
> 标签：java

如何转换`java.io.StringWriter`为`byte[]`数组？使用`OpenCSV`我得到`StringWriter` `sw`对象和`sw`我想转换成`byte[]`数组的这个对象。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-19T11:53:27.733

你可以做

```
byte[] bytes = stringWriter.toString().getBytes("UTF-8"); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-19T11:53:31.967

您需要决定要使用哪种编码：

*   调用[`StringWriter.toString()`](http://docs.oracle.com/javase/7/docs/api/java/io/StringWriter.html#toString%28%29)以将内容*作为字符串输出*
*   调用[`String.getBytes(Charset)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes%28java.nio.charset.Charset%29)或[`String.getBytes(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes%28java.lang.String%29)将字符串转换为字节数组

*不要*使用无参数`String.getBytes()`调用 - 这将使用平台默认编码。即使您*想*使用它，我强烈建议您明确指定它，以使任何阅读它的人都清楚。

# wpf - 如何通过 XAML 设置“myListView”的值？

> ID：13453228
> 
> 赞同：0
> 
> 时间：2012-11-19T11:52:03.190
> 
> 标签：wpf, xaml

我定义了我自己的控件 - `NameInfoControl`，它基于`UserControl`彻底的 XAML：

```
<UserControl x:Class="AcadLoadManager.NameInfoControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <ToolBar>
                <Button x:Name="btnAdd" x:FieldModifier="public" ToolTip="Add record" >
                    <Image Source="/AcadLoadManager;component/Icons/bullet_sparkle.png" Width="16"/>
                </Button>
                <Button x:Name="btnEdit" x:FieldModifier="public" ToolTip="Edit record">
                    <Image Source="/AcadLoadManager;component/Icons/bullet_edit.png" Width="16"/>
                </Button>
                <Button  x:Name="btnRemove" x:FieldModifier="public" ToolTip="Remove record">
                    <Image Source="/AcadLoadManager;component/Icons/bullet_cross.png" Width="16"/>
                </Button>
            </ToolBar>
            <ListView x:Name="myListView" x:FieldModifier="public" Margin="3" Grid.Row="1">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Width="100" Header="Global name" 
                                        DisplayMemberBinding="{Binding GlobalName}"/>
                        <GridViewColumn Width="100" Header="Local name" 
                                        DisplayMemberBinding="{Binding LocalName}"/>
                    </GridView>
                </ListView.View>
            </ListView>
        </Grid>
    </Grid>
</UserControl> 
```

看起来是这样的：

![在此处输入图像描述](../Images/469ca54a0b76f5bf270c2bf74a403a2c.png)

我的控件有`ListView`一个名为*myListView*的项目。例如，如何通过 XAML设置*myListView*`ItemsSource`的属性值？我在下一个代码中需要它：*`NameInfoControl`*

 *```
<GroupBox Header="Command groups:" Grid.Column="0" Grid.Row="1" Margin="5">
    <local:NameInfoControl/>
</GroupBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:02:58.673

在您的 XAML 中，将您`NameInfoControl`的项目绑定`myListView`到`DataContext`您的控件：

```
<ListView ItemsSource="{Binding}" x:Name="myListView" x:FieldModifier="public" Margin="3" Grid.Row="1"> 
```

然后在使用该控件的父 XAML 中将 绑定`DataContext`到包含应显示的项目的列表：

`<local:NameInfoControl DataContext="{Binding MyCollectionOfItems}" />`*

# php - 在上传时重命名文件之前检查文件是否存在

> ID：13453231
> 
> 赞同：2
> 
> 时间：2012-11-19T11:52:11.710
> 
> 标签：php, upload, rename

我需要帮助添加功能以检查上传时是否存在文件。

这是`upload.php`上传代码的样子：

```
$file_name = $HTTP_POST_FILES['ljudfil']['name'];
$random_digit=rand(0000,9999);
$mp3 ='.mp3';
$pdf ='.pdf';
$datum = date('Ymd'); 
$new_file_name=$random_digit.$file_name;
$target_path1 = $target_path . $orgnr . '_' . $gsm . $pdf; 

$target_path3 = $target_path . 'AC' . $datum . $new_file_name . $mp3; 
$target_path11 = $target_path4 . $orgnr . '_' . $gsm . $pdf; 

$target_path33 = $target_path4 . 'AC' . $datum . $new_file_name . $mp3;
$targetljudfilftp = 'AC' . $datum . $new_file_name . $mp3;

move_uploaded_file($_FILES['avtalsfil1']['tmp_name'], $target_path1);
move_uploaded_file($_FILES["ljudfil"]["tmp_name"], $target_path3);
$sql = "INSERT INTO affarer (tid, cid, orgnr, ljudfilftp) VALUES 
        (CURDATE(),'$date','$cid','$orgnr', '$targetljudfilftp')"; 
```

如您所见，它重命名上传的文件，包括一个随机数。

有时，它碰巧将文件重命名为已经存在的数字。

发生这种情况时，它会覆盖我服务器上的前一个文件。

那么，如何添加一个函数来检查目标名称是否存在，然后再用于重命名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:54:58.597

使用[file_exists](http://www.php.net/file_exists)内置函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:55:33.820

您可以通过使用（例如）基于时间的方法来更改创建随机 digists 的方式

`$random_digit = microtime(TRUE);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:56:45.397

您可以使用如下

$random_digit = time();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:03:31.190

而不是使用可以生成重复数字的'rand'函数，您可以使用'uniqid'php函数，它返回一个唯一的ID（[http://www.php.net/manual/en/function.uniqid.php](http://www.php.net/manual/en/function.uniqid.php)）。

如果您仍想使用“rand”，您可以使用“file_exists”函数并将生成的文件名作为参数（[http://www.php.net/manual/en/function.file-exists.php](http://www.php.net/manual/en/function.file-exists.php)），但如果文件存在您必须重新生成文件名，因此每次文件存在时您都将进行迭代。

最后，考虑使用全时日期（'Ymdhis'）格式而不是关闭日期（'Ymd'），最好通过调用time()函数来使用时间戳（[http://www.php.net/manual/en /function.time.php](http://www.php.net/manual/en/function.time.php) )

阿纳斯，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T12:06:23.953

```
if (file_exists($random_digit)) {
   $random_digit = rand(0000,9999);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T12:06:44.653

您可以使用

```
if (file_exists($target_path1)) 
```

验证文件是否存在。

但是，您会做得更好，以改变策略并雇用`tempnam`：

```
$target_path  = tempnam ($target_path, 'AC' . $datum . $file_name . $mp3) 
```

这将创建一个文件，例如“AC_2012_Anacreon.mp3_xTfKxy” *，但您可以保证它是唯一的*，即使使用`file_exists`也会使您面临并发冲突的风险。

当然，该文件不再具有`.mp3`扩展名，因此您必须在扫描目录并提供文件以供下载时将其考虑在内。

一个仍然不安全，但可能更简单的方法是：

```
for(;;)
{
    $newname = // some strategy to generate newname, including a random
    if (!file_exists($newname))
        touch($newname);
    if (!filesize($newname))
        break;
} 
```

或者您可以使用`lock`文件来保证没有并发性（因此，这`file_exists`将返回真相并*保持*真相）：

```
$fp = fopen('.flock', 'r+');
if (flock($fp, LOCK_EX))
{
    for(;;)
    {
        $newname = // some strategy to generate newname, including a random
        if (!file_exists($newname))
        {
            // this creates the file uniquely for us.
            // all other writers will find the file already there
            touch($newname);
        }
    }    
    flock($fp, LOCK_UN);
}
else
    die("Locking error");
fclose($fp);
// $newname is now useable. 
```

# java - 从 Socket 读取的 Android 在第二个读取循环上挂起

> ID：13453233
> 
> 赞同：0
> 
> 时间：2012-11-19T11:52:25.467
> 
> 标签：java, android, sockets, inputstream

我必须在我的应用程序中实现聊天。使用套接字连接到服务器。我应该注册到该服务器，服务器会通过回复来确认这一点。

我已经在一个方法中实现了这一点，我使用 BufferedWriter 发送命令，然后开始从输入流中读取，直到它告诉我没有更多数据。

我正确阅读了服务器回复。但是，我从未从第二次调用中获得负值`in.read`，因此我的方法在 while 循环中保持阻塞（在我进行该调用的条件语句中）。

**这应该如何使用套接字来完成？我通常用文件或其他输入流来做这件事，没有问题。**

如果我应该只读取我应该读取的字节，这是否意味着我必须：

*   提前知道服务器响应的长度？
*   或者让服务器发送一个代码来通知它已经完成发送响应？

目前我正在做以下事情：

```
private String sendSocketRequest(String request, boolean skipResponse) throws ChatException {
    if (!isConnected()) openConnection();

    try {
        BufferedWriter out = new BufferedWriter(new OutputStreamWriter(
                                     socket.getOutputStream()), 2048);
        out.append(request);
        out.flush();
        out = null;
    } catch (IOException e) {
        LogHelper.error("Unable to send socket request: " + request, e);
        throw new ChatException("Unable to send socket request: " + request, e);
    }

    try {
        BufferedReader in = new BufferedReader(new InputStreamReader(
                                     socket.getInputStream()), 2048);
        StringBuffer response = new StringBuffer();
        char[] buffer = new char[2048];
        int charsRead = -1;

// >>>>>>>> This is where it gets blocked <<<<<<<<<

        while ((charsRead = in.read(buffer)) >= 0) {
            if (charsRead > 0) response.append(new String(buffer, 0, charsRead));
        }
        return response.toString();
    } catch (IOException e) {
        LogHelper.error("Unable to read socket response: " + request, e);
        throw new ChatException("Unable to read socket response: " + request, e);
    }
} 
```

使用以下方法连接到服务器：

```
public synchronized void openConnection() throws ChatException {
    try {
        socket = new Socket(Constants.API_CHAT_SERVER_ADDRESS, Constants.API_CHAT_SERVER_PORT);
        socket.setKeepAlive(true);

        LogHelper.debug("CHAT      >> Connected to the chat server: " + Constants.API_CHAT_SERVER_ADDRESS);
    } catch (UnknownHostException e) {
        LogHelper.error("Unable to open chat connection", e);
        throw new ChatException("Unable to open chat connection", e);
    } catch (IOException e) {
        LogHelper.error("Unable to open chat connection", e);
        throw new ChatException("Unable to open chat connection", e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:09:58.687

通过基于套接字的连接发送/接收的数据量取决于协议，TCP/IP 堆栈不知道，但只有应用层知道。

使用的协议是开发人员依赖的...... ;-) 所以来回答你的问题：

> 如果我应该只读取我应该读取的字节，这是否意味着我必须：
> 
> *   提前知道服务器响应的长度？

是的，这是一种可能性。

> *   或者让服务器发送一个代码来通知它已经完成发送响应？

也可以，因为这是另一种可能性。常见的标记是`\n`或`\r\n`。/字符也可能有意义`NUL`。`'\0'`

第三种选择是在每个数据块前面加上一个常数字节数来描述即将到来的字节数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:44:17.900

而不是处理字节，也许它更简单地处理临时类的实例，例如 - 例如 - 一个**Message**类：

服务器：

```
// Streams
protected ObjectInputStream fromBuffer = null;
protected ObjectOutputStream toBuffer = null;

// Listening for a new connection
ServerSocket serverConn = new ServerSocket(TCP_PORT);
socket = serverConn.accept();
toBuffer = new ObjectOutputStream(socket.getOutputStream());
fromBuffer = new ObjectInputStream(socket.getInputStream());

// Receiving a new Message object
Message data = (Message)fromBuffer.readObject(); 
```

然后客户端通过简单的方式发送消息：

```
// Sending a message
Message data = new Message("Hello");
toBuffer.writeObject(data); 
```

**只要消息的成员实现*Serializable*接口，**消息就可以根据需要变得复杂。****

# c# - 在 Asp.Net 页面上单击删除按钮时创建确认消息

> ID：13453234
> 
> 赞同：3
> 
> 时间：2012-11-19T11:52:30.257
> 
> 标签：c#, asp.net, web-applications

我将此代码用于删除按钮以获取确认消息：

```
<asp:Button runat="server" ID="btnDelete" 
 OnClick="btnDelete_Click" 
 OnClientClick="return confirm('Do you want to delete the record ? ');" /> 
```

这是在服务器端添加确认客户端脚本的方法：

```
btnDelete.Attributes.Add("onclick", 
    "return confirm('Do you want to delete the record ? ');") 
```

但是我在调​​试时遇到（预期类型）错误有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:15:11.140

如果您**已** `OnClientClick="return confirm('Do you want to delete the record ? ');"` **在标记中**指定，则无需再次添加属性。这**可能**是原因。

从服务器注释掉

```
//btnDelete.Attributes.Add("onclick", 
    "return confirm('Do you want to delete the record ? ');") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:28:36.910

您拥有的客户端标记是正确的并且必须有效。

如果要从服务器端生成 JavaScript 代码，请删除相关标记 OnClientClick。您正在复制客户端事件处理。

注意：不要考虑“onclick”属性，而是考虑在页面加载时使用附加事件（即：使用 jquery）。

例子：

```
$(".btn-delete").click(function() { /*do something here*/ }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T10:00:46.827

protected void GridView1_RowDataBound（对象发送者，GridViewRowEventArgs e）

```
 {
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                foreach (Button button in e.Row.Cells[12].Controls.OfType<Button>())

                {
                    if (button.CommandName == "Delete")
                    {
                        button.Attributes["onclick"] = "if(!confirm('Do you want to delete')){return false;};";
                    }

                } 
```

# extjs - 如何在 ExtJS 的存储加载函数中使用范围

> ID：13453235
> 
> 赞同：6
> 
> 时间：2012-11-19T11:52:33.330
> 
> 标签：extjs, scope, extjs-stores

```
this.loadSmt = function(argPanel) 
{
    this.store1 = new Ext.data.JsonStore({
        url             : 'URL1',
        totalProperty   : 'total',
        successProperty : 'success',
        root            : 'root1',
        fields          : [
                            {name: 'data1'},
                            {name: 'data2'}
                        ]
    });

    this.store2 = new Ext.data.JsonStore({
        url             : 'URL2',
        totalProperty   : 'total',
        successProperty : 'success',
        root            : 'root2',
        fields          : [
                            {name: 'data21'},
                            {name: 'data22'},
                            {name: 'data23'},
                            {name: 'data24'},
                            {name: 'data25'}
                        ]
    });

    this.store1.on('beforeload', function() {
        this.store1.baseParams = {
            argID: myID
        };
    }, this);

    this.store2.load({
        callback    : function() {
            var graphOwner = argPanel;
            var graphDataArr = [];
            var i = 0;
            this.data.each(function(item, index, totalItems) {
                var data1 = item.data['data1'];
                    var data2 = item.data['data2'];

                    // create arraystore data for graph 
                    var tempArr = new Array();
                    tempArr.push(data1);
                    tempArr.push(data2);
                    graphDataArr[i] = tempArr;
                    i++;
            });

            this.GraphPanel = this.getMyGraph(graphDataArr);

        }
    }, this);
};

this.getMyGraph = function(argGraphValue)
{
    // do something
} 
```

当我运行此代码时，我得到

> TypeError：this.getMyGraph 不是函数

错误，当我使用

> 这个.data.each

商店回调中的函数，我不能使用

> this.getMyGraph

功能。我认为这是一个范围问题，如何将范围作为参数传递给函数或如何修复此错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T11:58:18.803

您通过范围的方式不正确。您需要使用加载选项的**范围**参数。

```
this.store2.load({
    callback    : function(records, operation, success) {
     ...
    },
    scope: this
}); 
```

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-load](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-load)

# facebook-graph-api - 根据 userID 获取用户名列表

> ID：13453238
> 
> 赞同：-2
> 
> 时间：2012-11-19T11:52:39.533
> 
> 标签：facebook-graph-api, select, facebook-fql, userid

我想做一个类似于这样的批处理查询：

```
SELECT name FROM user 
WHERE uid IN (userID1, userID2, userID3 ...) and name LIKE '%searchParameter%' 
```

这甚至可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:16:15.253

对的，这是可能的

`SELECT name, uid from user WHERE uid in (SELECT uid2 FROM friend WHERE uid1=me()) and strpos(lower(name),lower('Zuck')) >= 0`

在上述情况下，我正在查询包含字母的朋友的姓名`zuck`

[http://developers.facebook.com/docs/reference/fql/user/](http://developers.facebook.com/docs/reference/fql/user/)

# android - Android 相对布局问题

> ID：13453243
> 
> 赞同：0
> 
> 时间：2012-11-19T11:53:01.477
> 
> 标签：android, android-relativelayout, right-to-left

我想创建一个如下所示的布局。

![模型布局](../Images/4bdc8cda05410d37032478ecc5b0bb4a.png)

为此，我使用了代码。如果`textWoundTypeDetails`文本很小是可以的，但是如果文本很大，它会将图像推离屏幕并且文本填充总宽度。

```
<TextView
        android:id="@+id/textWoundType"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:padding="5dp"
        android:text="@string/wound_screener" />

<ImageView
        android:id="@+id/closebtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:layout_alignParentRight="true"
        android:src="@drawable/buttonclose" />
<ImageView
        android:id="@+id/imgWoundType"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/textWoundTypeDetails"
        android:layout_below="@id/textWoundType"
        android:src="@drawable/article_noimg" />

<TextView
        android:id="@+id/textWoundTypeDetails"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@id/textWoundType"
        android:padding="5dp"
        android:text="A wound caused by superficial damage to the skin, no deeper than the epidermis. It is less severe than a laceration, and bleeding, if present, is minimal." /> 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:01:49.740

试试下面的代码。我希望它对你有帮助。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="2" >

        <TextView
            android:id="@+id/textWoundType"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_gravity="left"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="SCRAPES" />

        <ImageView
            android:id="@+id/closebtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_weight="1"
            android:padding="5dp"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="2" >

        <ImageView
            android:id="@+id/imgWoundType"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:padding="5dp"
            android:src="@drawable/ic_launcher" />

        <TextView
            android:id="@+id/textWoundTypeDetails"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="A wound caused by superficial damage to the skin, no deeper than the epidermis. It is less severe than a laceration, and bleeding, if present, is minimal." />
    </LinearLayout>

</LinearLayout> 
```

# php - PDO INSERT 简单的片段，显然不起作用

> ID：13453246
> 
> 赞同：1
> 
> 时间：2012-11-19T11:53:13.057
> 
> 标签：php, insert, pdo

> **可能重复：**
> [您可以使用 PDO 在查询的选定部分中放置占位符吗？](https://stackoverflow.com/questions/8301066/can-you-put-placeholders-in-select-part-of-a-query-using-pdo)

我不喜欢问这么“简单”的问题，但是这段代码不起作用，我不知道为什么在尝试 1 小时后（$this->DB 工作没有问题）。

此代码不起作用：

```
$STH = $this->DB->prepare("INSERT INTO chapters (subject_keyword, type, ?) VALUES (?, 'Introduction', ?)");
$STH->execute(array($this->Language, str_replace(' ', '_', $Title), $Introduction));
print_r($STH->ErrorInfo()); 
```

也不是扩展形式：

```
$t_lang = $this->Language;
$t_title = str_replace(' ', '_', $Title);
$t_intr = $Introduction;
$STH = $this->DB->prepare("INSERT INTO chapters (subject_keyword, type, ?) VALUES (?, 'Introduction', ?)");
$STH->execute(array($t_lang, $t_title, $t_intr));
print_r($STH->ErrorInfo()); 
```

并且返回的错误是：

> DDC: 164Array ( [0] => 42000 [1] => 1064 [2] => 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以了解在 ''en 附近使用的正确语法') VALUES ('Test_tittle', 'Introduction', ' \r\n 这是第 1 行的介绍 t')

该错误对我来说并没有多大意义，因为这几行 mysql 行似乎是正确的，除了 \r\n. 但我也尝试过`htmlentities($Introduction)`没有运气的其他事情。这里的所有变量都已设置并具有一些非空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:00:55.163

尝试：

```
$t_lang = $this->Language;
if (!in_array($t_lang, array('en', 'jp', ... Your other languages ...))) {
    throw new Exception(... Error message ...);
}
$t_title = str_replace(' ', '_', $Title);
$t_intr = $Introduction;
$STH = $this->DB->prepare("INSERT INTO chapters (subject_keyword, type, " . $t_lang . ") VALUES (?, 'Introduction', ?)");
$STH->execute(array($t_title, $t_intr));
print_r($STH->ErrorInfo()); 
```

# objective-c - CoreData：如何不保存上下文中的特定对象并保存其他对象？

> ID：13453249
> 
> 赞同：1
> 
> 时间：2012-11-19T11:53:24.357
> 
> 标签：objective-c, core-data, ios4

先决条件：我在网络 API 中有 2 个方法：

*   返回实体列表（只是基本信息：名称、ID 等）
*   返回有关实体的详细信息

要求是仅保存通过处理第二个请求（保存到 sqlite）创建的对象，并保留非完整对象而不保存。此外，“主”上下文应仅包含来自第一个请求的完整对象，任何其他“临时”上下文应包含所有其他对象。

我尝试创建 NSPersistentStoreCoordinator 的两个实例并将它们用于不同类型的上下文，但似乎一个 NSManagedObjectModel 只能存在一个协调器（指针指向同一个地址）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:43:25.513

如果我对您的理解正确，那么我认为您最好的选择是仅在您确定希望它保留在 Core Data 存储中时才创建托管对象。您可能需要另一层非托管对象来包含“非完整”实体的数据

（这类似于Java EE 编程中的[数据传输对象](http://en.wikipedia.org/wiki/Data_transfer_object)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:23:40.820

您不能在同一个 MOC 中不加选择地保存。保存 MOC 总是会保存其中的所有内容。

因此，您可以使用一个从不保存的单独 MOC，然后在它们准备好保存时将这些对象“移动”到主 MOC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:09:28.520

完全解决我的问题的解决方案是创建核心数据堆栈的两个“分支”：

*   一个具有默认配置和 mainContext
*   the second (new instance of the same NSManagedObjectModel, new NSPersistentStore (inMemory) and new NSPersistenStoreCoordinator )

# php - 从下拉菜单中选择后出现错误的回声

> ID：13453251
> 
> 赞同：0
> 
> 时间：2012-11-19T11:53:27.400
> 
> 标签：php, mysql, mysqli

我在下面有一个基本的 mysqli 代码，它执行查询以从数据库中选择 CourseId 和 Course Name 并将其显示在下拉菜单中。

```
$sql = "SELECT CourseId, CourseName FROM Course ORDER BY CourseId"; 

    $sqlstmt=$mysqli->prepare($sql);

    $sqlstmt->execute(); 

    $sqlstmt->bind_result($dbCourseId, $dbCourseName);

    $courses = array(); // easier if you don't use generic names for data 

    $courseHTML = "";  
    $courseHTML .= '<select name="courses" id="coursesDrop" onchange="getModules();">'.PHP_EOL; 
    $courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

    while($sqlstmt->fetch()) 
    { 
    $course = $dbCourseId;
    $coursename = $dbCourseName; 
    $courseHTML .= "<option value='".$course."'>" . $course . " - " . $coursename . "</option>".PHP_EOL;  

    $outputcourse = ""; 
    $outputcourse .= "<p><strong>Course:</strong> " . $course .  " - "  . $coursename . "</p>";

    } 

    $courseHTML .= '</select>'; 
```

现在让我们说下拉菜单包含以下这些课程：

```
INFO101 - Information Communication Technology
INFO102 - Computing 
```

出于某种奇怪的原因，无论我选择哪门课程，它总是`INFO102 - Computing`在下拉菜单下方回显 CourseId 和 CourseName。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:00:26.190

`<p><strong>Course:</strong>.....</p>`这可能会导致问题，

因为我认为在标签`<option></option>`内有标签是无效的`<select></select>`。

尝试删除这些东西，看看输出是否出现在下拉列表中。

# html - 如何在html5 AppCache中缓存图片

> ID：13453258
> 
> 赞同：0
> 
> 时间：2012-11-19T11:53:34.960
> 
> 标签：html, photo, application-cache

我正在建立一个摄影网站，理想情况下应该离线工作。缓存所需的 css/js 文件非常简单。问题是，如何处理实际照片。

我目前正在从 flickr 加载它们，包括缩略图版本和完整分辨率版本。这给我带来了两个问题：

是否可以缓存从外部源传递的文件，或者所有内容都必须来自同一个域？

将所有图片缓存在应用程序缓存中可能太多了，因为它会在用户第一次访问该站点时导致大量下载。这里有什么建议？是否可以让用户明确打开完整版的应用缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:59:23.380

如果您没有通过 https 提供任何服务，则可以在该`CACHE`部分中包含来自任意多个来源的资源。但是使用 https 的跨域应用缓存仅适用于今天的 Chrome。我怀疑 Flickr 通过 https 提供图像，所以你应该没问题。

一些浏览器会在第一次下载 appcache 时提示用户，但不是全部（我知道 Firefox 会，但 Chrome 不会）。要获得更多控制权，您必须在应用程序中实现一些逻辑。也许让用户在您的应用程序中做出选择，将其存储为每个用户的设置，然后仅向选择加入的用户提供带有清单的页面。

# asp.net - 具有多个输入对象的 ASP.NET Web API

> ID：13453271
> 
> 赞同：0
> 
> 时间：2012-11-19T11:54:16.690
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我是 Web API 的新手，我有一个类库，我希望其他应用程序可以通过 ASP.NET Web API 站点访问。

我遇到的问题是我不知道如何调用具有多个输入对象的方法，其中一些是自定义实体（它们内部都有几个变量，并且来自我无权更改的类库）。

这是我的 API 控制器方法之一的示例

```
public bool Process(IBusinessObject businessObject, BusinessValidationObject businessValidationObject, IList<string> messages)
    {
        //Code to call Class Library is here that requires the 3 inputs
    } 
```

上面的代码是有效的 API 方法吗？

我想从另一个 ASP.NET Web 应用程序（将安装在另一个服务器上的另一个解决方案中的 MVC 应用程序）调用该方法。我查看了[Web API 客户端库](http://nuget.org/packages/Microsoft.AspNet.WebApi.client)，但看不到传递多个对象的方法。

有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:03:00.677

您只能发布一个复杂对象。

一个解决方案可能是创建一个包含您尝试传递的所有三个对象的对象。

# php - 在mysql中存储日期时间

> ID：13453273
> 
> 赞同：0
> 
> 时间：2012-11-19T11:54:24.153
> 
> 标签：php, mysql, date, datetime

我曾经使用 TIMESTAMP 值（int 15）将日期存储在 MySQL 中，但在阅读此内容后：

> [http://derickrethans.nl/storing-date-time-in-database.html](http://derickrethans.nl/storing-date-time-in-database.html)

我不知何故感到困惑！能够为**不同时区**的用户显示日期对我来说非常重要，并且所有日期都在 2038 年之前。

当我们想要操纵不同时区的日期时，将日期时间存储到 MySQL 数据库中的最佳方法是什么？

*（**请**在发送任何建议之前先阅读上述文章）*

我将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:25:42.170

这是建议的：首先将日期转换为 UTC，然后再将它们作为时间戳存储在数据库中。然后，每当您需要显示它们时，只需将它们即时转换为用户的时区（带/不带 DST）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T11:58:28.900

将它们作为转换为 UTC+0 时区的时间戳存储在 BIGINT 中。

# ruby-on-rails - 测试控制器在多态模型中创建动作

> ID：13453274
> 
> 赞同：0
> 
> 时间：2012-11-19T11:54:25.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rspec2, polymorphic-associations

我有一个名为voteable的投票模型的多态关联。这是它的控制器：

```
class VotesController < ApplicationController
  def create
    begin
      @voteable = get_voteable
      @rating = Rating.find(params[:rating_id])
      @user = current_user
      @vote = Vote.new()
      @vote.voteable = @voteable
      @vote.rating = @rating
      @vote.user = @user
    rescue ActiveRecord::RecordNotFound
      redirect_to stories_path, flash:{error: t('controllers.votes.create.flash.error')}
      return
    end

    respond_to do |format|
      if @vote.save
        format.html { redirect_to story_path(@voteable), notice: t('controllers.votes.create.flash.success') }
      end
    end
  end

private
  def get_voteable
    @voteable = params[:voteable].classify.constantize.find(voteable_id)
  end

  def voteable_id
    params[(params[:voteable].singularize + "_id").to_sym]
  end
end 
```

路由是这样的：

```
resources :stories do
  resources :votes, :defaults => { :voteable => 'stories' }
end 
```

这是控制器的测试：

```
before do
  @story = FactoryGirl.create(:story)
  @rating = FactoryGirl.create(:rating)
end

it 'creates vote' do
  post :create, story_id: @story.id, rating_id: @rating
  flash[:notice].should eq(I18n.t('controllers.votes.create.flash.success'))
end 
```

测试失败：

```
Failure/Error: post :create, story_id: @story.id, rating_id: @rating
ActionController::RoutingError:
  No route matches {:story_id=>"1", :rating_id=>"1", :controller=
>"votes", :action=>"create"} 
```

谁能解释我应该如何`post`在测试中使用？我不得不提一下，在生产中一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:15:14.897

刚刚写了这样的测试，它通过了：

```
it 'lets all users to create vote', focus: true do
  post :create, story_id: @story, rating_id: @rating, voteable: "stories"
  flash[:notice].should eq(I18n.t('controllers.votes.create.flash.success'))
end 
```

# mysql - 将我的两个查询优化为一个

> ID：13453275
> 
> 赞同：1
> 
> 时间：2012-11-19T11:54:26.523
> 
> 标签：mysql, multi-query

我有两张表，一张用于跟踪聊天统计信息，一张用于跟踪邮件统计信息。

我当前的查询如下所示：

```
SELECT COUNT(id) as chat_amount, DATE_FORMAT(timestamp, '%b %e') as period FROM tblChats WHERE timestamp BETWEEN '{$start}' AND '{$end}' AND UserID = 0 GROUP BY DAY(timestamp) DESC, MONTH(timestamp) DESC, YEAR(timestamp) DESC

SELECT COUNT(id) as mail_amount, DATE_FORMAT(timestamp, '%b %e') as period FROM tblMails WHERE timestamp BETWEEN '{$start}' AND '{$end}' AND UserID = 0 GROUP BY DAY(timestamp) DESC, MONTH(timestamp) DESC, YEAR(timestamp) DESC 
```

我想将这两个查询合并为一个，以便返回的数据如下所示：

```
Array ( 
[0] => Array ( 
    [period] => 2012-11-09 
    [chat_amount] => 1500 
    [mail_amount] => 100 
) 
[1] => Array ( 
    [period] => 2012-11-08 
    [chat_amount] => 500 
    [mail_amount] => 350 
) 
[2] => Array ( 
    [period] => 2012-11-07 
    [chat_amount] => 2000 
    [mail_amount] => 1300 
) 
[3] => Array ( 
    [period] => 2012-11-06 
    [chat_amount] => 1000 
    [mail_amount] => 970 
) 
```

)

我怎样才能实现这样的目标？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:03:30.463

尝试这个：

```
SELECT A.period, chat_amount, mail_amount FROM (
(SELECT COUNT(id) AS chat_amount, DATE_FORMAT(TIMESTAMP, '%b %e') AS period FROM tblChats WHERE TIMESTAMP BETWEEN '{$start}' AND '{$end}' AND UserID = 0 GROUP BY DAY(TIMESTAMP) DESC, MONTH(TIMESTAMP) DESC, YEAR(TIMESTAMP) DESC) AS A 
LEFT JOIN 
(SELECT COUNT(id) AS mail_amount, DATE_FORMAT(TIMESTAMP, '%b %e') AS period FROM tblChats WHERE TIMESTAMP BETWEEN '{$start}' AND '{$end}' AND UserID = 0 GROUP BY DAY(TIMESTAMP) DESC, MONTH(TIMESTAMP) DESC, YEAR(TIMESTAMP) DESC) AS B ON A.period = B.period)
UNION 
SELECT A.period, chat_amount, mail_amount FROM (
(SELECT COUNT(id) AS chat_amount, DATE_FORMAT(TIMESTAMP, '%b %e') AS period FROM tblChats WHERE TIMESTAMP BETWEEN '{$start}' AND '{$end}' AND UserID = 0 GROUP BY DAY(TIMESTAMP) DESC, MONTH(TIMESTAMP) DESC, YEAR(TIMESTAMP) DESC) AS A 
RIGHT JOIN 
(SELECT COUNT(id) AS mail_amount, DATE_FORMAT(TIMESTAMP, '%b %e') AS period FROM tblChats WHERE TIMESTAMP BETWEEN '{$start}' AND '{$end}' AND UserID = 0 GROUP BY DAY(TIMESTAMP) DESC, MONTH(TIMESTAMP) DESC, YEAR(TIMESTAMP) DESC) AS B ON A.period = B.period) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:25:31.443

虽然 Saharsh 的答案似乎以您想要的格式为您提供了结果 - 这是一个非常昂贵的查询。

由于您已将预期输出引用为序列化的 PHP 数组，这意味着您正在使用 PHP 来处理数据。一种更有效的方法是使用以下查询，然后将数据合并到 PHP 数组中：

```
 SELECT rtype, DATE_FORMAT(iperiod, '%b %e') AS period, amount
 FROM
 (SELECT 'chat' AS rtype,
   COUNT(id) as amount, 
   DATE(timestamp) as iperiod 
   FROM tblChats 
   WHERE timestamp BETWEEN '{$start}' AND '{$end}' 
   AND UserID = 0 
   GROUP BY DATE(timestamp)
 UNION
   SELECT 'mail' as rtype, 
   COUNT(id) as mail_amount, 
   DATE(timestamp) as iperiod 
   FROM tblMails 
   WHERE timestamp BETWEEN '{$start}' AND '{$end}' 
   AND UserID = 0 
 GROUP BY DATE(timestamp)) ilv
 ORDER BY period DESC; 
```

顺便说一句：DATE_FORMAT(timestamp, '%b %e') 不会产生 '2012-11-09'，DESC 修饰符是否适用于 GROUP BY 表达式？

# vb.net - 超时时间已过

> ID：13453277
> 
> 赞同：0
> 
> 时间：2012-11-19T11:54:40.003
> 
> 标签：vb.net, sql-server-2005, visual-studio-2008

我开发了一个软件并将其安装在三个不同的客户端机器上。

一切都很好，但在最后一个消息中出现了以下消息：

> 操作完成前超时时间已过或服务器无响应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:09:31.557

在 Stackoverflow 上查看[这个答案](https://stackoverflow.com/a/6746845/897326)。

另请查看[有关 CodeProject 的讨论](http://www.codeproject.com/Questions/153279/Timeout-expired-The-timeout-period-elapsed-prior-t)。

如果没有帮助，请尝试使用谷歌搜索此查询：

> 操作完成前超时时间已过或服务器无响应

# python - Django 和 CFR 21 第 11 部分

> ID：13453278
> 
> 赞同：3
> 
> 时间：2012-11-19T11:54:50.857
> 
> 标签：python, django, password-protection, corrupt-data, 21cfr11

我必须转换我的 Django 应用程序，使其符合“ [21 CFR Part 11](http://en.wikipedia.org/wiki/Title_21_CFR_Part_11) ”，即使电子记录与签署的纸质记录具有相同的有效性。有什么我应该看的项目或应用程序吗？

一些问题：

1.  审计跟踪：必须跟踪所选模型的每一次更改（谁、何时、什么）
2.  检测未经授权的记录编辑：如果记录在正常程序之外被更改/添加/删除，应用程序应检测它
3.  对于特定操作，用户必须再次输入密码
4.  密码必须定期更改，并且必须满足某些标准等...

我在网上没有找到现成的解决方案...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T06:34:31.353

我在需要 CFR 21 Part 11 和类似的环境中工作。我还没有让我们的应用程序完全兼容，但我已经经历了许多试验和错误，所以我可以帮助你从几个地方开始。

1）我还建议Django reversion；但是，您将需要比它提供的更多的东西来实现可变级别的审计跟踪以及所采取的行动（除了由谁和何时）。为此，我使用其中一个反转信号将注释字段转换为可以评估的字典，然后调用行中的任何变量以及对其采取的操作等。如下所示：

[https://github.com/etianen/django-reversion](https://github.com/etianen/django-reversion)

```
@receiver(reversion.pre_revision_commit)
    def it_worked(sender, **kwargs):
    currentVersion = kwargs.pop('versions')[0].field_dict
    fieldList = currentVersion.keys()
    fieldList.remove('id')
    commentDict = {}
    try:
        pastVersion = reversion.get_for_object(kwargs.pop('instances')[0])[0].field_dict
    except IndexError:
        for field in fieldList:
            commentDict[field] = "Created"
    except TypeError:
        for field in fieldList:
            commentDict[field] = "Deleted"
    else:
        for field in fieldList:
            try:
                pastTest = pastVersion[field]
            except KeyError:
                commentDict[field] = "Created"
            else:       
                if currentVersion[field] != pastTest:
                    commentDict[field] = "Changed"
                else:
                    commentDict[field] = "Unchanged"
    comment = commentDict
    revision = kwargs.pop('revision')
    revision.comment = comment
    revision.save()
    kwargs['revision'] = revision
    sender.save_revision 
```

2/3）您将需要为此使用对象级权限系统。我已经实现了 django-guardian。几乎你可以实现的复杂性的唯一限制是你自己可以保持多少东西。您需要实现的基本权限集是查看、编辑、删除和某种数据控制器/管理员角色；但是，您可能希望变得更复杂。我强烈建议使用基于类的视图和 mixins 进行权限检查，但基于函数的也可以。这也可用于提示某些操作的密码，因为您可以以任何您喜欢的方式控制字段发生的情况。

[https://github.com/lukaszb/django-guardian](https://github.com/lukaszb/django-guardian)

4) 如果您愿意，甚至可以使用 Django 身份验证系统或任何用户帐户管理应用程序来实现过期密码。您只需要添加一个额外的字段来记录您想要开始到期倒计时的任何日期时间。然后在登录时只需检查倒计时的时间，看看他们是否超出了窗口，如果是，则要求他们通过引导他们通过内置视图来更改密码或哪种机制适合您的应用程序来创建新密码。

我将告诉您实施 CFR 21 第 11 部分最困难的部分是让适当的人员准确地告诉您您的项目应该做什么才能满足要求，并且进行合规性检查可能既费时又费钱。

希望这可以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T20:13:36.640

[Django Reversion](https://github.com/etianen/django-reversion)可能会让您开始进行审计跟踪，尽管您可能不需要它的所有功能。

对于列表中的 2、3 和 4，这些是您最有可能最终自己编写代码的东西。

# javascript - 使用 Javascript 的选择表单中的最大选择数

> ID：13453281
> 
> 赞同：2
> 
> 时间：2012-11-19T11:54:57.350
> 
> 标签：javascript, html, forms, google-chrome

我有一个简单的 HTML 选择表单，其中包含一些项目。我正在使用 javascript 来限制用户可以选择的项目数量。

在 HTML 中，我有以下代码：

```
<select name="category" multiple id="category" onchange="checkMaxSelected(this, 3, 'Max number of categories you can select: ');">
    <option value="orange">orange</option>
    <option value="apple">apple</option>
    <option value="banana">banana</option>
    <option value="pear">pear</option>
    <option value="strawberry">strawberry</option>
    </select> 
```

我将三个变量传递给 javascript 函数 checkMaxSelected：

1.  哪个选择表格（即这个）
2.  用户可以在表单中执行的最大选择数（在我的情况下为 3）
3.  应在警告框中显示的错误消息。

JS代码如下：

```
function checkMaxSelected (select, maxSelected, displ_error_nummaxcat) {
  if (!select.storeSelections) {
   select.storeSelections = new Array(select.options.length);
   select.selectedOptions = 0;
   }

   for (var i = 0; i < select.options.length; i++) {

  console.log('select.options[i].selected: '+select.options[i].selected+' select.storeSelections[i]: '+select.storeSelections[i]);

     if (select.options[i].selected && 
         !select.storeSelections[i]) {
       if (select.selectedOptions < maxSelected) {
         select.storeSelections[i] = true;
         select.selectedOptions++;
       }
      else {
        alert(displ_error_nummaxcat + maxSelected);
        console.log('HERE I SHOW ALERT!');
    select.options[i].selected = false; 
      }
    }
     else if (!select.options[i].selected &&
       select.storeSelections[i]) {
       select.storeSelections[i] = false;
       select.selectedOptions--;
     }
  }
}; 
```

此解决方案**在 Firefox、Safari 和 IE 下完美运行**，但**不适用于 Chrome**。为什么？

任何帮助是极大的赞赏。先感谢您。

*额外信息：*

我一直在尝试使用 firebug 为 firefox 和 Chrome 调试它，但徒劳无功：使用 Firefox 当我选择选择表单的第一项时，我看到了 firebug 控制台：

```
select.options[i].selected: true select.storeSelections[i]: undefined
select.options[i].selected: false select.storeSelections[i]: undefined
select.options[i].selected: false select.storeSelections[i]: undefined
select.options[i].selected: false select.storeSelections[i]: undefined
select.options[i].selected: false select.storeSelections[i]: undefined 
```

（哪个是对的）。

与 Chrome 相同的操作（即选择第一项）会直接触发错误消息。这是 Chrome 中的 firebug 控制台输出：

```
select.options[i].selected: true select.storeSelections[i]: undefined
HERE I SHOW ALERT!
select.options[i].selected: false
select.options[i].selected: false select.storeSelections[i]: undefined
select.options[i].selected: false select.storeSelections[i]: undefined
select.options[i].selected: false select.storeSelections[i]: undefined
select.options[i].selected: false select.storeSelections[i]: undefined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T15:03:48.783

要使您的代码在 Chrome 和其他浏览器中运行相同，您需要将您的**select.selectedOptions**属性重命名为其他名称。

SELECT 标签有一个[**selectedOptions**属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-button-element.html#dom-select-selectedoptions)，只有 Chrome 才能正确显示，所以虽然其他浏览器将该属性作为您自己创建的数字属性，但对于 Chrome，它实际上是您选择的选项元素集合，这就是您的`if (select.selectedOptions < maxSelected)`语句失败的原因。

这是您的固定 Javascript 函数：

```
function checkMaxSelected (select, maxSelected, displ_error_nummaxcat) {
    if (!select.storeSelections) {
        select.storeSelections = new Array(select.options.length);
        select.optionsSelected = 0;
    }

    for (var i = 0; i < select.options.length; i++) {
        console.log('select.options[i].selected: '+select.options[i].selected+' select.storeSelections[i]: '+select.storeSelections[i]);
        if (select.options[i].selected && !select.storeSelections[i]) {
            if (select.optionsSelected < maxSelected) {
                select.storeSelections[i] = true;
                select.optionsSelected++;
            }
            else {
                alert(displ_error_nummaxcat + maxSelected);
                console.log('HERE I SHOW ALERT!');
                select.options[i].selected = false;
            }
        }
        else if (!select.options[i].selected && select.storeSelections[i]) {
            select.storeSelections[i] = false;
            select.optionsSelected--;
        }
    }
} 
```

# .net - 第一次包含“Distinct（）”的EF查询很慢

> ID：13453282
> 
> 赞同：3
> 
> 时间：2012-11-19T11:54:58.020
> 
> 标签：.net, mysql, windows, entity-framework

在网上进行了许多讨论，涵盖了我的问题的各个方面，但我看不到适用于此的模式：

我有一个使用 EF 3.5 和 MySQL 的基本 .NET WinForm 应用程序。该应用程序适用于大多数查询，但任何包含 Distinct() 的查询都非常慢或导致“在操作完成之前超时时间已过或服务器没有响应”。**机器重启**后第一次运行时出现异常。即，当重新启动应用程序时，即使在停止并重新启动 MySQL 服务之后，Distinct() 查询从现在开始也可以正常工作（即不到 1 秒）。

我无法通过重新运行应用程序或重新启动 MySQL 来重现问题的事实排除了 EF 编译或 MySQL 缓存是一个因素。只有重新启动后问题再次出现。让我觉得这可能是 .NET 初始化问题或与操作系统相关的其他问题。该问题已在 XP 和 Win 7 上观察到。

任何想法表示赞赏。（还有尝试在不重新启动机器的情况下重现问题的想法，这是非常不切实际的:-)

## 更新：

EF 生成的查询如下所示：

```
SELECT Distinct1.C2 FROM (
    SELECT DISTINCT YEAR(Extent1.RecDate) AS C2 
    FROM dailyrecord AS Extent1
    WHERE (Extent1.STN = 430030) AND (Extent1.WBAN = 99999)
) AS Distinct1; 
```

第一次在 mysql shell 中运行大约需要 30 秒，即使在重新启动 mysql 之后，所有后续时间也大约需要 1 秒。重启后回到30s。看起来操作系统第一次读取整个 db 文件，但此后没有（后续查询的 HD 活动很少，即使修改了查询参数）。

如何刷新操作系统的读取缓存以测试我的理论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:55:34.920

经过相当多的测试后，出现了这样的情况：

*   许多查询在 MySQL 和可能（m）任何 DBMS 中的定义非常慢，因为它们需要读取整个数据文件，如上面的“DISTINCT”查询，其中“WHERE”子句包括主键的一部分，但不是*整个*主键（在本例中是 4 个字段的组合）。

*   如果慢查询在应用程序中很常见且令人烦恼，则应在搜索条件（“WHERE”字段）上添加索引。这将大大加快查询速度（最终解决了最初发布的问题），但它会增加磁盘上数据的大小（.MYI 文件），同时略微减小 .MYD 文件的大小，但总体上会增加总数据大小。添加索引可能会增加 INSERT、UPDATE 和 DELETE 查询的时间，因为索引也需要更新。 *插入*大多是在一个接一个的基础上完成的，因此性能损失通常不明显。与批量 DELETE 查询不同（见下文。）

*   查询的低效率被操作系统掩盖（在我的例子中是 MS Windows XP）。任何需要逐条读取整个表记录的查询在第一次遇到时都非常慢。但是，操作系统将缓存文件，即使参数更改，即使查询本身发生更改，后续查询也会*更快：任何需要读取整个表文件的低效查询一旦被操作系统缓存，就会显得很快。*这使得调整查询变得困难，因为您需要在测试之间重新启动操作系统。在网上搜索后，我还没有找到一种在 Windows 中刷新读取缓存的实用方法。

*   一个相关的低效查询是：DELETE FROM myTable WHERE field1 = value。如果有很多记录（在我的情况下为 10,000 条记录需要 30 秒）删除（在所有这些示例中使用 MySQL，存储引擎 MYISAM），即使 field1 上有索引，这也会很慢。这是因为 DBMS 需要从（到）磁盘读取（并且可能写入）整个表文件（取决于 DELETE 的物理执行方式）。同样，这将被操作系统掩盖：第一次很慢，但在随后的查询中非常快（在我的 XP 机器上快 30 倍），因为操作系统做了一些魔法，这很难（不可能？）关闭. 如上所述添加索引可能会增加删除查询所需的时间。

任何想法或意见表示赞赏！

# iphone - 如何通过将图像存储在 ivar 中来加速 UITableView

> ID：13453283
> 
> 赞同：0
> 
> 时间：2012-11-19T11:55:08.513
> 
> 标签：iphone, objective-c, ios, uitableview, ivar

我有一个缓慢滚动的表格视图。数据来自服务器并保存到 NSArray。我读过缓慢滚动很可能是因为图像是在 tableView:cellForRowAtIndexPath: 代码中加载的。

一种解决方案可能是将图像存储在 ivar 中，然后在表中使用它们。如果是这种情况，我将如何去做？我一直无法找到任何执行图像缓存然后在 UITable 中使用它的示例代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:03:16.567

看看[LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

[此示例](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)演示了加载和显示 UITableView 的多阶段方法。它首先从 RSS 提要加载相关文本，以便尽快加载表格，然后异步下载每一行的图像，以便 UI 响应更快。

构建要求：iOS SDK 5.0 或更高版本

运行时要求：
iOS 5.0 或更高版本

# nsis - 使用 NSIS 立即操作的单选按钮？

> ID：13453284
> 
> 赞同：0
> 
> 时间：2012-11-19T11:55:10.523
> 
> 标签：nsis

我已经创建了带有两个单选按钮的自定义页面，用于修复和删除。如果用户选择修复按钮，它会带来修复乐趣。但再次来到修复和删除页面的旧页面。所以用户选择两个选项。我的要求是用户仅选择一个选项并仅执行相应的操作。无需提供同时选择两个按钮的选项。

```
 Function nsDialogpage
    nsDialogs::Create 1018
    Pop $Dialog
    ${If} $Dialog == error
       Abort
    ${EndIf}
    ${NSD_CreateRadioButton} 0 5u 100% 10u "Repair"
    Pop $Repair
    ${NSD_AddStyle} $Repair ${WS_GROUP}
    ${NSD_OnClick} $Repair Repair 
    ${NSD_CreateRadioButton} 0 25u 100% 56u "Remove"
    Pop $Remove
    ${NSD_OnClick} $Remove Remove
    nsDialogs::Show
FunctionEnd
Function Repair
-- Do repair function.
FunctionEnd
Function Remove
   ExecWait "$INSTDIR\uninstall.exe"
   Quit
FunctionEnd 
```

如果删除乐趣也删除安装程序并退出安装。卸载程序已成功完成。但在该用户单击任何按钮后，安装程序再次进入主页，然后仅退出安装步骤。

1.用户选择任何一个选项并离开此修复和删除页面。

2.如果用户单击删除选项删除安装程序并立即退出该过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T04:10:18.093

Quit does not quit right away when used in a page action callback, it will quit when the page changes. Performing some action when a radio button is clicked is not normal Windows behavior (Try pressing TAB) so I added a normal example aswell.

```
!include nsDialogs.nsh
Page Custom RepairOrRemovePageInsane_Create
Page Custom RepairOrRemovePageNormal_Create RepairOrRemovePageNormal_Leave
Page InstFiles

Function Remove
ExecWait '"cmd" /C echo This is a dummy uninstall command...&pause' ; Call real uninstaller here
FunctionEnd

Function Repair
# Do repair....
FunctionEnd

Function RepairOrRemovePageInsane_Create
nsDialogs::Create 1018
Pop $0
${NSD_CreateRadioButton} 0 5u 100% 10u "Repair"
Pop $0
SendMessage $HWNDPARENT ${WM_NEXTDLGCTL} $0 1
${NSD_OnClick} $0 RepairInsane
${NSD_CreateRadioButton} 0 25u 100% 56u "Remove"
Pop $0
${NSD_OnClick} $0 RemoveInsane
GetDlgItem $0 $hwndparent 1 ; Get Next button handle and
EnableWindow $0 0 ; ...disable it because it does not make sense with this insane radio button handling
nsDialogs::Show
FunctionEnd

Function RemoveInsane
Call Remove
SendMessage $HWNDPARENT ${WM_CLOSE} 0 0 
FunctionEnd

Function RepairInsane
Call Repair
SendMessage $HWNDPARENT 0x408 1 0 ; Go to next page
FunctionEnd

Function RepairOrRemovePageNormal_Create
nsDialogs::Create 1018
Pop $1
${NSD_CreateRadioButton} 0 5u 100% 10u "Repair"
Pop $1
${NSD_CreateRadioButton} 0 25u 100% 56u "Remove"
Pop $2
SendMessage $1 ${BM_CLICK} 0 0 ; Select one of them by default
nsDialogs::Show
FunctionEnd

Function RepairOrRemovePageNormal_Leave
${NSD_GetState} $1 $0
${If} $0 <> 0
    Call Repair
${Else}
    Call Remove
    Quit
${EndIf}
FunctionEnd 
```

# ruby - 使用通配符检查文件是否存在

> ID：13453287
> 
> 赞同：32
> 
> 时间：2012-11-19T11:55:28.043
> 
> 标签：ruby

在 Ruby 中，如何使用通配符检查文件是否存在？

显然这似乎不起作用：

```
File.exists?("/folderOfFile/Filename*.ext") 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-19T19:31:55.380

您的通配符将引用一组文件，而不是单个文件。你可以用[`Dir::glob`](http://www.ruby-doc.org/core-1.9.3/Dir.html#method-c-glob)这个：

```
!Dir.glob('/folderOfFile/Filename*.ext').empty? 
```

# c# - Kendo UI Grid 根据条件使用不同的详细信息模板

> ID：13453288
> 
> 赞同：3
> 
> 时间：2012-11-19T11:55:28.283
> 
> 标签：c#, telerik, telerik-grid, telerik-mvc, kendo-ui

我定义了这样的网格

```
@(Html.Kendo().Grid<FieldViewModel>(Model.Fields)
    .HtmlAttributes(new { @class = "fullScreen" })
    .Name("formFields")
    .ClientDetailTemplateId("formFieldsTemplate")
    .Columns(columns =>
        {
            columns.Bound(e => e.Key);
            columns.Bound(e => e.DisplayName);
            columns.Bound(e => e.FieldTypeName);
            columns.Bound(e => e.Order);
            columns.Bound(e => e.IsMandatory);
            columns.Bound(e => e.Type);
        })
    .Pageable()
    .Sortable()
    .Scrollable()
    .Selectable()
    .Resizable(resize => resize.Columns(true))
    .Groupable()
    .Filterable()
      .DataSource(dataSource => dataSource.Ajax().ServerOperation(false).Model(model => model.Id(e => e.Key)))) 
```

和详细信息模板

```
<script id="formFieldsTemplate" type="text/kendo-tmpl">
    @(Html.Kendo().Grid<FieldViewModel>()
        .Name("FormField_#=Key#")
        .ClientDetailTemplateId("formFieldsTemplate")
        .Columns(columns =>
            {
                columns.Bound(e => e.Key);
                columns.Bound(e => e.DisplayName);
                columns.Bound(e => e.FieldTypeName);
                columns.Bound(e => e.Order);
                columns.Bound(e => e.IsMandatory);
                columns.Bound(e => e.Type);
            })
        .DataSource(dataSource => dataSource.Ajax().Read(read => read.Action("LoadFieldDetails", "Forms", new { formPath = Model.Schema, rootElementName = Model.Root ,fieldKey = "#=Key#" })))
        .Pageable()
        .Sortable()
        .Selectable()
        .ToClientTemplate())
</script> 
```

如您所见，我有属性（int 类型），所以当属性设置为特定值`Type`时，我想要做的是不显示任何详细信息视图并且在整行上没有箭头。`Type`我怎样才能实现它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T12:45:56.150

当您像这样定义模板时，它将在客户端使用。它由命令呈现，`@(Html.Kendo().Grid<FieldViewModel>()`但实际上随后在客户端使用。但是你不能`Type`在客户端比较 a 。但例如，在构建模型时，您会这样做：

```
if (myType is MyDataType) // Do the type check
{
    myRow.UseTemplate = 1; // Define ID for template
} 
else  // ...and so on, can do a 'switch` or whatever
{
    myRow.UseTemplate = 2;
} 
```

这是您的模板，您可以在其中通过模板 ID 进行切换：

```
<script id="formFieldsTemplate" type="text/kendo-tmpl">
    # if (UseTemplate == 1) { #

        <div>Template 1</div>

    # } else { #

        <div>Template 2</div>

    # } #
</script> 
```

如果您在数据行中显示不同的数据，不确定它是否能正常工作......但希望您能明白这一点。

# opengl - 图形库和 GPU

> ID：13453289
> 
> 赞同：0
> 
> 时间：2012-11-19T11:55:31.583
> 
> 标签：opengl, gpu, nvidia

> **可能的重复：**
> [OpenGL 如何在最低级别工作？](https://stackoverflow.com/questions/6399676/how-does-opengl-work-at-the-lowest-level)

当我们制作一个使用 OpenGL 库的程序时，例如对于 Windows 平台，并且有一个支持 OpenGL 的显卡，会发生以下情况：

1.  我们使用将图形与 OpenGL（例如 Visual C++）连接起来的编程语言开发了我们的程序。

2.  为目标平台（例如Windows）编译和链接程序

3.  当您运行程序时，由于我们有一个支持 OpenGL 的显卡，安装在同一个 Windows 上的驱动程序将负责管理相同的图形。为此，当 CPU 将所需的数据发送到显卡上的芯片（例如 NVIDIA GPU）时，会绘制出结果。

4.  在这种情况下，我们谈论图形加速和下载到 CPU 即计算帧缓冲区结束我们图形表示的工作。

5.  在这种环境下，当 GPU 的驱动程序接收到数据时，如何利用 GPU 的能力来加速绘图？翻译接收到的指令和数据 CUDA 语言类型以利用并行能力？或者只是将从 CPU 接收到的数据复制到设备内存的特定区域？这部分不太明白。

6.  最后，如果我有一个支持 OpenGL 的卡，安装在 Windows 中的驱动程序会检测到问题吗？会出现 CPU 错误，还是您会计算我们的帧缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:08:54.367

你最好去电脑游戏网站工作。他们经常发表有关 3D 图形如何工作以及“人工制品”如何在游戏或驱动程序出现错误时呈现自己的文章。

您还可以阅读有关 Mesa 或 Gallium 等 3D 库架构的文章。

总体驱动程序有一组方法来实现 Direct 3D 或 OpenGL 或其他标准 API 的这个或那个功能。当他们加载时，他们会检查硬件。您可以拥有便宜的视频卡或昂贵的视频卡，最近的一张或 3 年前发布的一张……那是不同的硬件。因此，驱动程序正在尝试将每个 API 功能映射到可以在给定计算机上使用的实现，由 GPU 加速，由 CPU 加速（如 SSE4），甚至是一些更基本的实现。

然后驱动程序尝试估计 GPU 负载。有时功能可以加速，但GPU（尤其是低端的）已经被其他任务超载，那么它可能会尝试在CPU上计算而不是等待GPU时隙。

当您犯错时，总会有几种变体，具体取决于驾驶员的智力和素质。

*   也许驱动程序会为您修复错误，忽略您的命令并运行自己的一组命令。
*   也许驱动程序会向您的程序返回一些错误代码
*   也许驱动程序会按原样执行命令。如果你用红色而不是绿色涂漆 - 这是一个错误，但司机无法知道的那种。在 PC 游戏相关网站上搜索“3d artefacts”。
*   在最坏的情况下，您的错误会干扰驱动程序中的错误，并且您的计算机会崩溃并重新启动。

当然，所有这些自适应策略都相当复杂和不确定，这会导致 3D 驱动程序被封闭并且其内部的专有技术受到严密保护。

搜索专注于 3D 游戏甚至 3D 建模的网站——他们应该给视频卡打分“哪个更好买”，有时当他们审查新的芯片系列时，他们会撰写关于所有这些技术内部的相当详细的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:11:35.080

问题5.驱动程序所做的一些事情：它将您的GPU程序（顶点，片段等着色器）编译为特定卡的机器指令，将编译后的程序上传到设备内存的适当区域并安排在卡上的许多图形核心上并行执行的程序。它将图形数据（顶点坐标、纹理等）上传到适当类型的图形卡内存，使用来自程序员的各种提示，例如日期是否经常更新、不经常更新或根本不更新。它可以利用图形卡中的特殊单元来向/从主机内存传输数据，例如，一些 nVidia 卡有一个 DMA 单元（一些 Quadro 卡可能有两个或更多），它可以上传例如纹理并行通常的驱动程序操作（其他传输，

# android - 如何从 Android Activity 访问 SyncResult

> ID：13453295
> 
> 赞同：2
> 
> 时间：2012-11-19T11:55:37.130
> 
> 标签：android, synchronization, android-activity, android-syncadapter

我有一个`SyncAdapter`，它在同步期间使用`SyncResult` `SyncStats`将信息传递回 Android ，例如：`SyncManager`

```
public void onPerformSync(final Account account, Bundle extras, String authority,
   final ContentProviderClient provider, final SyncResult syncResult) {

...

++syncResult.stats.numInserts;
... 

} 
```

在 my 中访问这些统计信息会很有用，`Activity`这样我就可以向用户显示其中的一些。同步完成后如何访问`SyncResult` `SyncStats`from my ？`Activity`有没有办法做到这一点？。

**编辑：**或者最好通过正常的服务到活动通信（例如`AbstractService.send()`）来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:48:38.300

我会在同步结束时发送一个广播，其中包含您需要解析为广播意图的附加信息的同步统计信息。你甚至可以使用粘性广播，但要小心它的[危险](http://porcupineprogrammer.blogspot.com/2012/09/android-sticky-broadcast-perils.html):)

# perl - 从文件中读取两行数据

> ID：13453297
> 
> 赞同：1
> 
> 时间：2012-11-19T11:55:40.140
> 
> 标签：perl, file

我有一个文件，我想从中读取数据。这是一个数据样本：

```
NODELOAD         28     27132    3.29108E+04    7.94536E+04    0.00000E+00
NODELOAD         29     27083    9.89950E+04    9.89950E+04    0.00000E+00
NODELOAD         29     27132    6.08112E+04    6.08112E+04    0.00000E+00
NODELOAD         30     27083    1.29343E+05    5.35757E+04    0.00000E+00
NODELOAD         30     27132    7.94536E+04    3.29108E+04    0.00000E+00
NODELOAD         31        68    4.80185E+04   -5.47647E+04   -1.17033E+04
                                -1.27646E+03    1.18350E+04   -2.03885E+03
NODELOAD         31      1114    1.20706E+05   -3.31323E+04   -7.17280E+04
                                 2.28198E+03    2.75582E+04    5.74460E+02 
```

我有这段代码，并且能够读取一行的所有值并将它们保存到一个数组中：

```
 foreach my $line (@input) {
    if($line =~ /^\s*NODELOAD\s+/i) {
      $line =~ s/^\s*//;
      @a = split(/\s+/,$line);

      $modelData{"NODELOAD"}->{$a[1]}->{$a[2]}->{"Fx"} = $a[3];
      $modelData{"NODELOAD"}->{$a[1]}->{$a[2]}->{"Fy"} = $a[4];
      $modelData{"NODELOAD"}->{$a[1]}->{$a[2]}->{"Fz"} = $a[5]; 
```

但是，文件中有一些“NODELOAD”定义在两行上定义，并且有 6 个加载值而不是 3 个（每行的前两个数字是标识符，后面的 3/6 是数据）。

`if`如果以下行不以“NODELOAD”开头并且包含数字，那么编写一个语句是否最容易保存数据？文本文件中此部分之后的最后一行将不包含任何数字，但可能为空白或包含文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:15:11.217

是的，最简单的方法是将先前调用的值保留在某个变量中，然后如果`if(/NODELOAD/)`不匹配，则仅获得 3 个值并使用上一行（和先前的外观迭代）中的标识符处理它们。您也可以跳过一个正则表达式`if`，并检查拆分结果的第一个元素：

```
my @last_values;
foreach my $line (@input) {
    $line =~ s/^\s+//;
    my @values = split(/\s+/, $line);
    if( $values[0] ne 'NODELOAD' ) {
        unshift( @values, @last_values[0..2] ); # Get first 3 values from previous call
        # Then process it however you'd like to
        $modelData{"NODELOAD"}->{$values[1]}->{$values[2]}->{"Fx2"} = $values[3];
    }
    elsif {
        # process like previously...
        $modelData{"NODELOAD"}->{$values[1]}->{$values[2]}->{"Fx"} = $values[3];
        $modelData{"NODELOAD"}->{$values[1]}->{$values[2]}->{"Fy"} = $values[4];
        $modelData{"NODELOAD"}->{$values[1]}->{$values[2]}->{"Fz"} = $values[5];
        @last_values = @values; # and save for future reference
    }
 } 
```

# perl - 如何在 Perl 中直接从电子邮件服务器接收新电子邮件

> ID：13453304
> 
> 赞同：1
> 
> 时间：2012-11-19T11:56:03.550
> 
> 标签：perl, imap, pop3, email-client

我在桌面上有一个应用程序，我想通过电子邮件的触发器直接运行它。基本上我想要一个脚本，它会定期从服务器获取新邮件并在收到特定邮件时触发我的脚本。我应该如何继续，或者换句话说，Perl 中的哪些库可以提供帮助？

我已经阅读了 POP 和 IMAP 手册……我只是不知道 Perl 中有一个库可以帮助我收听服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:02:55.323

[Net::POP3](http://perldoc.perl.org/Net/POP3.html)是一个很好的起点……这是他们手册页中的一个例子……

```
use Net::POP3;
$pop = Net::POP3->new('pop3host');
$pop = Net::POP3->new('pop3host', Timeout => 60);
if ($pop->login($username, $password) > 0) {
    my $msgnums = $pop->list; # hashref of msgnum => size
    foreach my $msgnum (keys %$msgnums) {
        my $msg = $pop->get($msgnum);
        print @$msg;
        $pop->delete($msgnum);
    }
}
$pop->quit; 
```

# asp.net - 使用占位符在 asp.net 中进行数据绑定

> ID：13453306
> 
> 赞同：0
> 
> 时间：2012-11-19T11:56:20.893
> 
> 标签：asp.net, .net, asp-classic

当有人单击按钮时，我需要在 div 中放置一个包含文本框和标签的表格。

表结构如下...

```
<table>
<tr>
<td>
<label id="l1" text="adfa"></label>
</td>
<td>
<input type="text" id="t1">
</td>
</tr>
<table> 
```

行数可以变化，但行的结构将与上表中的此处相同。

我正在尝试使用占位符，但很困惑如何将所有东西放在他们的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:29:50.323

您是在客户端还是服务器端执行此操作（对于后者，您是在回发到服务器以更新响应）吗？如果是后者，使用 ListView 控件可以完美运行，您可以将其定义为：

```
<asp:ListVIew .. ItemPlaceholderID="Items">
   <LayoutTemplate>
       <table>
           <tr runat="server" id="Items" />
       </table>
   </LayoutTemplate>
   <ItemTemplate>
     <tr>
<td>
<label id="l1" text="afda"></label>
</td>
<td>
<input type="text" id="t1">
</td>
</tr>
   </ItemTemplate>
</asp:ListView> 
```

然后你可以这样做：

```
ListView1.DataSource = //some data source
ListView1.DataBind() 
```

数据可以是空行，只是为了最初填充列表，也可以是一些有效数据。一些进一步的参考：

*   [http://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui。 aspx](http://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui.aspx)
*   [http://msdn.microsoft.com/en-us/library/bb398790(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb398790(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:22:55.143

```
 for (int i = 0; i < noofsubject; i++)
        {
            table.Width = 760;
            TableRow tRow1 = new TableRow();
            TableCell tCell11 = new TableCell();
            tCell11.Text = "Subject " + i;
            tRow1.Cells.Add(tCell11);
            table.Rows.Add(tRow1);
        }
  PlaceHolder1.Controls.Add(table); 
```

我一直在找这个。。

# android - 以全屏模式播放 youtube 视频

> ID：13453309
> 
> 赞同：0
> 
> 时间：2012-11-19T11:56:24.547
> 
> 标签：android, android-mediaplayer

我正在尝试以全屏模式播放 youtube 视频文件（.3GP）。我的 youtube 网址直接以全屏模式打开视频。下面是我播放视频的代码，但它从未播放过。每次我运行代码时，它都会显示 - “无法播放视频。抱歉，无法播放此视频。”

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    VideoView vv = (VideoView) findViewById(R.id.VideoView);                        
    MediaController mc=new MediaController(this);
    mc.setEnabled(true);
    vv.setVideoURI(Uri.parse("http://youtube.googleapis.com/v/Iq81rUGQofk"));
    vv.setMediaController(mc);
    vv.requestFocus();
    vv.showContextMenu();
    vv.start(); 

} 
```

它编译成功，当我运行项目时，出现以下异常：

```
11-19 03:32:06.097: E/MediaPlayer(12675): Unable to to create media player
11-19 03:32:06.097: W/VideoView(12675): Unable to open content: http://youtube.googleapis.com/v/Iq81rUGQofk
11-19 03:32:06.097: W/VideoView(12675): java.io.IOException: setDataSource failed.: status=0x80000000
11-19 03:32:06.097: W/VideoView(12675):     at android.media.MediaPlayer._setDataSource(Native Method)
11-19 03:32:06.097: W/VideoView(12675):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:844)
11-19 03:32:06.097: W/VideoView(12675):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:806)
11-19 03:32:06.097: W/VideoView(12675):     at android.widget.VideoView.openVideo(VideoView.java:227)
11-19 03:32:06.097: W/VideoView(12675):     at android.widget.VideoView.access$2300(VideoView.java:55)
11-19 03:32:06.097: W/VideoView(12675):     at android.widget.VideoView$6.surfaceCreated(VideoView.java:506)
11-19 03:32:06.097: W/VideoView(12675):     at android.view.SurfaceView.updateWindow(SurfaceView.java:533)
11-19 03:32:06.097: W/VideoView(12675):     at android.view.SurfaceView.access$000(SurfaceView.java:81)
11-19 03:32:06.097: W/VideoView(12675):     at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
11-19 03:32:06.097: W/VideoView(12675):     at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:590)
11-19 03:32:06.097: W/VideoView(12675):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1622)
11-19 03:32:06.097: W/VideoView(12675):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2447)
11-19 03:32:06.097: W/VideoView(12675):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-19 03:32:06.097: W/VideoView(12675):     at android.os.Looper.loop(Looper.java:137)
11-19 03:32:06.097: W/VideoView(12675):     at android.app.ActivityThread.main(ActivityThread.java:4479)
11-19 03:32:06.097: W/VideoView(12675):     at java.lang.reflect.Method.invokeNative(Native Method)
11-19 03:32:06.097: W/VideoView(12675):     at java.lang.reflect.Method.invoke(Method.java:511)
11-19 03:32:06.097: W/VideoView(12675):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-19 03:32:06.097: W/VideoView(12675):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-19 03:32:06.097: W/VideoView(12675):     at dalvik.system.NativeStart.main(Native Method) 
```

这是一个 .3GP 视频，对此有任何想法。

# objective-c - 我想在基于 cocos2D 的游戏中显示道路效果（就像一辆自行车在路上行驶）iphone

> ID：13453310
> 
> 赞同：0
> 
> 时间：2012-11-19T11:56:27.430
> 
> 标签：objective-c, cocoa, cocos2d-iphone

我无法在基于 cocos2D 的游戏中显示道路效果，并且对图像也有点困惑。我必须使用什么类型的图像来显示效果以及如何在代码中使用此图像来生成移动的道路效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:11:06.880

实际上，您需要将背景移回不同的图层，或者您可以使用视差节点。

这是 [源代码](http://cocos2d-central.com/files/file/2-source-code-for-the-learn-iphone-and-ipad-cocos2d-game-development-book/)steffen itereheim 的链接，其中详细描述了该过程

# php - PHP 复合日期格式错误

> ID：13453312
> 
> 赞同：1
> 
> 时间：2012-11-19T11:56:34.757
> 
> 标签：php, date

我正在使用以下代码行来获取我尝试为某些报告生成的日期，它似乎工作正常，除了在少数情况下，我不明白为什么会这样。

```
// what week numbers belong to which period
$adminconfig_periods = array(
        1=>array(1,2,3,4),
        2=>array(5,6,7,8,9),
        3=>array(10,11,12,13),
        4=>array(14,15,16,17),
        5=>array(18,19,20,21,22),
        6=>array(23,24,25,26),
        7=>array(27,28,29,30),
        8=>array(31,32,33,34,35),
        9=>array(36,37,38,39),
        10=>array(40,41,42,43),
        11=>array(44,45,46,47,48),
        12=>array(49,50,51,52,53)
    );

    /**
     * Get period no for week no
     *
     * @param string week the week 
     * @return int - the period no
     */             
     function getPeriodForWeek($week) {
        global $adminconfig_periods;
        $foundperiod = false;
        $period = 1;
        while(!$foundperiod) {
            if(in_array($week, $adminconfig_periods[$period])) {
                $foundperiod = true;
            } else {
                $period ++; 
            }
        }
        return $period;
    }

    $wA        = $_GET['wA'];
    $yA        = $_GET['yA'];

    $prev_period = '';
    $next_period = '';

    if (!isset($wA) || !isset($yA)) {
        // period and year aren't set so do it for current period

        // period starts on first Sunday of the first week in the period and ends on the last Saturday of the last week in the period
        $week = date('W');
        $period = getPeriodForWeek($week);

        $wA  = date('m');
        $yA  = date('Y');

    }
    else {
        // period and year are set

        // period starts on first Sunday of the first week in the period and ends on the last Saturday of the last week in the period

        $period = $wA;
    }

        // get date of first Sunday of the first week in this period
        $period_start_week = $adminconfig_periods[$period][0];

        // get the Sunday of this week
        $period_start = date('Y-m-d', strtotime($yA  . 'W' . $period_start_week  . '0'));

        // get date of last Saturday of the last week in this period
        $period_length = count($adminconfig_periods[$period]);
        // array indexes start from 0 so we need to take one off this value
        $last_element = $period_length - 1;

        $period_end_week = $adminconfig_periods[$period][$last_element];

        // get the Saturday of this week
        $period_end = date('Y-m-d', strtotime($yA  . 'W' . $period_end_week  . '6')); 
```

在此页面上，我有一些选择菜单控件用于更改期间和年份编号，当它到达某些期间时，我会得到一些奇怪的日期。

这些时期非常混乱，但如果有人有任何问题，请随时提问。

```
Period | What it Should Be       | Actual Result
    11 | 28/10/2012 - 01/12/2012 | 28/10/2012 - 01/12/2012
    10 | 30/09/2012 - 27/10/2012 | 30/09/2012 - 27/10/2012
    09 | 02/09/2012 - 29/09/2012 | 02/09/2012 - 29/09/2012
    08 | 29/07/2012 - 01/09/2012 | 29/07/2012 - 01/09/2012
    07 | 01/07/2012 - 28/07/2012 | 01/07/2012 - 28/07/2012
    06 | 03/06/2012 - 30/06/2012 | 03/06/2012 - 30/06/2012
    05 | 29/04/2012 - 02/06/2012 | 29/04/2012 - 02/06/2012
    04 | 01/04/2012 - 28/04/2012 | 01/04/2012 - 28/04/2012
    03 | 04/03/2012 - 31/03/2012 | 04/03/2012 - 31/03/2012
    02 | 29/01/2012 - 03/02/2012 | 10/12/2012 - 01/01/1970
    01 | 01/01/2012 - 28/01/2012 | 05/03/2012 - 12/11/2012 
```

如您所见，由于某种原因，第 1 期和第 2 期似乎发疯了，我不明白为什么。

参数以下列方式传递：`?wA=1&yA=2012`如果未设置，则使用当前月份和期间。

如果我猜的话，我会说它可能与闰年有关，但我认为代码能够自动处理它？谁知道呢，希望多几双眼睛能发现我错过的一些愚蠢的东西。

**回显日期的代码**

```
date("d/m/Y", strtotime($period_start)) . ' - ' . date("d/m/Y", strtotime($period_end)) .')'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:52:01.167

错误来自这两行

```
$period_start = date('Y-m-d', strtotime($yA  . 'W' . $period_start_week  . '0'));
$period_end = date('Y-m-d', strtotime($yA  . 'W' . $period_end_week  . '6')); 
```

例如，如果周数为**2 ，则向其添加****6**，它将是**26**（第 26 周），因此您必须在左侧为单个数字添加一个零。让我们用[str_pad()](http://php.net/manual/en/function.str-pad.php)来做：

```
$period_start = date('Y-m-d', strtotime($yA  . 'W' . str_pad($period_start_week, 2, 0, STR_PAD_LEFT) . '0'));
$period_end = date('Y-m-d', strtotime($yA  . 'W' . str_pad($period_end_week, 2, 0, STR_PAD_LEFT) . '6')); 
```

# arrays - 将数组翻译放在php类中

> ID：13453316
> 
> 赞同：-3
> 
> 时间：2012-11-19T11:56:44.830
> 
> 标签：arrays, class

这是我的问题：

我的网站的每个页面中都包含一个数组，其中包含翻译。数组组成：

```
$translation = array();
$translation['0'] = 'aaa'; 
$translation['1'] = 'bbb'; 
$translation['2'] = 'ccc'; 
$translation['3'] = 'ddd'; 
$translation['4'] = 'eee'; 
```

我对每种语言都有一个文件 - 数组很长。

如果我在类中调用数组元素，则会收到错误“未定义的变量”。

如何将外部数组元素传递给我的班级？

谢谢。

吉内托

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-19T12:01:18.050

您没有指定语言，但假设它是 PHP，要么通过引用（而不是值）传递数组变量，并在参数中使用 &$translation，例如。

```
$my_object->doSomething(&$translation_arg); 
```

到你的类方法（或构造函数）或者你可以通过在你的方法中使用'global $translation'来访问全局变量，即。

```
class MyClass {
    global $translation;
...
} 
```

第一种方法通常更好。

# php - AJAX 调用不工作（错误 302） Magento

> ID：13453318
> 
> 赞同：0
> 
> 时间：2012-11-19T11:56:52.563
> 
> 标签：php, magento, rest

我正在尝试在 Magento 中对 PHP 网络服务进行 AJAX 调用。这是我的 PHP 代码片段。

```
 <?php 
$callbackUrl = "http://localhost/magento/webservices/NewCustomer1.php";
    //intiate oauth callback URL
    $temporaryCredentialsRequestUrl = "http://localhost/magento/oauth/initiate?oauth_callback=". urlencode($callbackUrl);
    $adminAuthorizationUrl = 'http://localhost/magento/admin/oauth_authorize';
    $accessTokenRequestUrl = 'http://localhost/magento/oauth/token';
    //Magento rest API URL
    $apiUrl = 'http://localhost/magento/api/rest';
    //Consumer key and secret
    $consumerKey = 's3xt7w8lwhfrrfzrfvwm3lrilkf66d5n';
    $consumerSecret = 'vr3eq1x899pz1cf4zzxjzx3q03t66r3n';
    //get customer attributes
    $firstname=$_POST['fname'];
    $lastname=$_POST['lname'];
    $email=$_POST['email'];
....... 
```

这是我的jQuery

```
 $('#btnSubmit').click(function(){
    console.log("Submit Clicked");
    var fName=$('#firstname').val();
    var lName=$('#lastname').val();
    var email=$('#email_address').val();
    var password=$('#password').val();
    var pass_conf=$('#confirmation').val();
    var dataString = 'fname='+ fName + '&lname=' + lName + '&email=' + email + '&password=' +password+ '&webid=1&groupid=1';
    /*http://localhost/magento/webservices/Newcustomer1.php?fname=siri&lname=s&email=siri@abc.com&password=password123&webid=1&groupid=1*/
    //your validation code
$.ajax({
        url: 'http://localhost/magento/webservices/Newcustomer1.php',
        type: 'POST',
        data: dataString, 
        success: function(data) {
            $('#message').html(data);
        }
    });
}); 
```

提交时出现 302 Found 错误。如果我在 URL 本身中传递参数并将 $_REQUEST 更改为 $_GET，它会起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:08:18.347

嘿，这是你应该做的。

将您的表单提供给您需要发送 ID ex 的值：

```
<form id ="myfrom" > 
```

现在在您的 ajax 调用中执行以下操作，而不是

```
data: dataString, 
```

做

```
data : $('#myform').serialize() , 
```

让我知道是否可以解决它。在 PHP 部分我建议你先做

```
print_r($_POST); 
```

只是为了让您了解数据是如何传递的。

# vim - VIm : 如何只使用“鼠标滚动”而不使用 :set mouse=a 的其他功能

> ID：13453320
> 
> 赞同：4
> 
> 时间：2012-11-19T11:57:09.413
> 
> 标签：vim, scroll, text-cursor

我刚刚发现`:set mouse=a`。令人惊奇的是，它允许我的同事滚动浏览我的 openend 文件。

但事情是这样的：当我左键单击某处时，我真的不希望光标移动。我不想要`:set mouse=a`带来的标准光标（我想保留默认的文本光标）。

换句话说：有没有办法在 VIm中**启用鼠标滚动***而不*启用其他支持鼠标的东西？

谢谢。

编辑-**其他想法**：我可以绑定`wheel mouse UP`做同样的事情那个`Page Up`键吗？这一定非常棒 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:10:51.600

试试这个映射：

```
:nnoremap <LeftMouse> <nop> 
```

# ruby-on-rails - locale=I18nData.country_code(request.location.country) 的实际参数是什么？

> ID：13453321
> 
> 赞同：1
> 
> 时间：2012-11-19T11:57:10.990
> 
> 标签：ruby-on-rails, ruby, internationalization, locale

首先，安装 gem geocoder 和 gem i18n_data 来完成这项工作。

我对此`locale=I18nData.country_code(request.location.country)`进行了轻微调整（出于测试目的）对此进行了测试。这就是我实际上所做的

```
@country=I18nData.country_code("Spain") 
```

这返回

```
@country="ES" 
```

但是当我刚做的时候

```
@country=I18nData.country_code("spain") 
```

它没有显示输出。很明显，**西班牙**的字母需要大写**S**，但是当 Web 应用程序上线时，`@country=I18nData.country_code(request.location.country)`实际上会给出真正的参数，即“西班牙”？

对此的任何帮助都将真正帮助我澄清这种困惑！非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:09:43.363

在这里和那里提出问题并进行测试后，答案是，上述方法提取**“西班牙”**并将语言环境明确设置为“ES”

# drupal - Drupal 7以编程方式设置用户图片（头像）

> ID：13453326
> 
> 赞同：1
> 
> 时间：2012-11-19T11:57:33.740
> 
> 标签：drupal, drupal-modules

我有带有文件上传元素的表单。此文件（图像）必须是用户图片，但未设置。

形式：

```
 $form['f']['step4']['file_e'] = array(
    '#title' => t('Image'),
    '#type' => 'managed_file',
    '#description' => t('The uploaded image will be displayed on this page using the image style choosen below.'),
    '#upload_location' => 'public://images/',
  ); 
```

证实

```
function fill_up_profile_form_validate($form, &$form_state) {
  global $user;

  if (isset($form['f']['actions']['submit']['#value']) && $form_state['triggering_element']['#value'] == $form['f']['actions']['submit']['#value']) {
    $file = file_load($form_state['values']['f']['step4']['file_e']);
    $validators = array(
      'file_validate_is_image' => array(), 
      'file_validate_size' => array(1 * 1024 * 1024),
    );

    $errors = file_validate($file, $validators);
    if (!empty($errors)) {
      $message = '';
      foreach ($errors as $error)
        $message .= $error . '<br/>';

      form_set_error('Error!', $message);
    } else {
      $file->status = FILE_STATUS_PERMANENT;
      file_save($file);
      $edit['picture'] = $file;
      user_save($user, $edit);
    }
  }
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:35:27.093

您应该尝试使用 $form_state 而不是 $form。$form_state 包含提交的值！此外，在 Drupal 7.x 中，您无法通过简单地使用 $form_state['values']['f']['step4']['file_e'] 来获取值！只需做一个`echo "<pre>"; print_R($form_state); echo "</pre>";`来学习数组的正确结构！

也看看这段代码： http: [//ly2.in/hBMxPK](http://ly2.in/hBMxPK)

# filter - Hook_menu 选择性菜单标签显示

> ID：13453330
> 
> 赞同：1
> 
> 时间：2012-11-19T11:57:53.753
> 
> 标签：filter, drupal-7, hook-menu

我正在使用以下代码为我的节点类型包含一个自定义选项卡：

```
function mymodule_menu(){
    $items['node/%node/register']   =   array(
        'page arguments' => array(1),
        'access arguments'  =>  array('access content'),
        'type'  =>  MENU_LOCAL_TASK,
        'title' =>  'Register',
    );
    return $items;
} 
```

这具有为每个节点类型包括一个**注册选项卡的效果。**但是，我需要只为页面类型包含该选项卡，并在所有其他类型（如文章类型等）中排除它。

任何人都可以提供一些方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:00:57.757

最简单的方法是提供您自己的访问回调来检查节点类型，例如

```
function mymodule_menu(){
  $items['node/%node/register'] = array(
    'page arguments' => array(1),
    'access callback' => 'mymodule_node_register_tab_access',
    'access arguments' => array(1),
    'type'  =>  MENU_LOCAL_TASK,
    'title' =>  'Register',
  );
  return $items;
}

function mymodule_node_register_tab_access($node) {
  $valid_types = array('page');
  return in_array($node->type, $valid_types);
} 
```

# java - Java 中的 repaint() 不会立即“重新绘制”？

> ID：13453331
> 
> 赞同：6
> 
> 时间：2012-11-19T11:57:55.477
> 
> 标签：java, swing, repaint, paintcomponent

我有这样的代码：

```
// In MyPanel.java
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    // Draw something
    mypanel_count++;
}

// In Test.java
public void testLargeData()
{
    while (notDone)
    {
        panel.repaint();
        // do huge work
        test_count++;
        System.out.println("Test_count: " + test_count + ", MyPanel_count: " + mypanel_count);
    }
}

// Output !!!
Test_count: 752, MyPanel_count: 23
Test_count: 753, MyPanel_count: 23
Test_count: 754, MyPanel_count: 23
Test_count: 755, MyPanel_count: 24 
```

但是当我更改`panel.repaint()`为时`panel.paintComponent(panel.getGraphics())`，输出是正确的：

> ```
> Test_count: 752, MyPanel_count: 752
> Test_count: 753, MyPanel_count: 753
> Test_count: 754, MyPanel_count: 754
> Test_count: 755, MyPanel_count: 755 
> ```

为什么？`paintComponent`方法有效，但有时它是盲目的，所以我不想使用它。有人可以给我一些建议吗？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T12:21:42.293

如果您[`repaint`](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#repaint%28%29)仔细阅读 的文档，您会注意到它指出（强调我的）：

> 如果此组件是轻量级组件，则此方法会尽快调用此组件的绘制方法。**否则，此方法会尽快**调用此组件的更新方法。

这意味着允许 AWT/Swing 通过合并快速连续请求的重绘来优化重绘。还有一种[`repaint(long time)`](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#repaint%28long%29)方法，它允许您控制 AWT/Swing 在完成您的重绘请求时允许等待多长时间。但它可能仍会合并请求，特别是如果您在循环中执行它们。

[阅读文章“Painting in AWT and Swing”](http://www.oracle.com/technetwork/java/painting-140037.html)可能会有所帮助，该文章试图解释所涉及的各种概念。

要为每次迭代重新绘制面板，您必须等待绘制发生，然后继续执行循环。这意味着您需要在处理线程（循环）和 AWT/Swing 线程之间进行一些同步。作为一个粗略的想法，例如，如果自上次调用并在面板方法结束时[`wait()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait%28%29)调用并没有重新绘制面板对象，则可以在循环结束时对面板对象进行重新绘制。但是，这可能很难正确实施，因此只有在确实需要“实时”重绘组件时才应该这样做。作为替代方案，可以使用，但您必须在事件调度线程中进行所有处理，如下所示：`repaint()`[`notifyAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#notifyAll%28%29)`paintComponent()`[`paintImmediately(...)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#paintImmediately%28int,%20int,%20int,%20int%29)

```
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        while(notDone) {
            // Do your processing
            panel.paintImmediately(...);
        }
    }
}); 
```

请注意，这将在循环运行时停止处理任何事件处理，包括鼠标和键盘输入。[您可以在“Swing 中的并发”中](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)阅读更多关于 Swing 和线程的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T15:00:56.917

正如其他答案所说：这是 AWT 何时调用的问题`paint()`。

如果你做一些工作需要来自绘制/布局组件的信息，那么将这项工作放入一个等待绘制完成的工作线程也是有帮助的。

在你的情况下，这将是这样的：

```
panel.repaint();

SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        // do huge work
        test_count++;
        System.out.println("Test_count: " + test_count 
             + ", MyPanel_count: " + mypanel_count);
    }
}); 
```

虽然我不确定它在你的`while`循环中会如何表现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:18:26.180

> 了解您无法完全控制是否或何时调用 paint(...)，并且 repaint() 调用只是对 JVM 绘制的建议。如果有太多的 repaint() 请求进入并且它们像你的那样堆积起来，那么它们将被合并

参考： [https ://stackoverflow.com/a/13256847/1423083](https://stackoverflow.com/a/13256847/1423083)

# php - 使用带有 ASCII 字符的 preg_replace

> ID：13453333
> 
> 赞同：0
> 
> 时间：2012-11-19T11:58:06.030
> 
> 标签：php, wordpress, preg-replace

在我的functions.php中，我添加了一个用德语引号替换英语的函数。我通过简单的 str_replace 调用来做到这一点，如下所示：

```
 $content = str_replace (' &#8220;', ' &#8222;', $content); 
```

现在我想用 preg_replace 来代替，这样我就可以以不同的方式处理特殊情况。然而，这：

```
 $haekchenunten = "&#8220;";
 $regex = /^ . $haekchenunten . /;
 $content = preg_replace ($regex, '&#8222;', $content); 
```

导致一个空白页面（我想是 PHP 致命的）。

如何`&#8220;`与 preg_replace 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:17:30.160

如果这是您的代码，请尝试使用引号 ;-)

```
 $regex = "/^" . $haekchenunten . "/"; 
```

# joomla2.5 - Joomla 组件的 ACL

> ID：13453340
> 
> 赞同：1
> 
> 时间：2012-11-19T11:58:50.223
> 
> 标签：joomla2.5, acl, joomla-extensions, breezingforms

我已经为 Joomla（微风形式）下载了第 3 方插件。我为我的 Joomla 实例创建了一个新用户，该用户只能访问某些权限。Breezeing Forms 是他们唯一可以使用的组件。

我已经从超级用户正确设置了这些设置，有一个操作，“配置”，我已经为我的特定用户类型设置了“允许”。

现在，当我以该用户身份登录时，我看不到组件菜单（我已禁止所有其他组件）。

但是，如果我导航到组件：

[http://domain.co.uk/administrator/index.php?option=com_breezingforms](http://domain.co.uk/administrator/index.php?option=com_breezingforms)

然后我可以访问该页面。

我尝试拒绝访问，然后尝试访问该页面，但它正确地阻止了我使用它，因此 ACL 权限正在工作，但它在菜单中显示存在问题。

我正在使用 Joomla 2.5

谢谢，

伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:03:33.100

通常一个组件有两个权限来处理这种事情。

*   `core.manage`（访问管理界面）允许访问后端的组件。这意味着菜单项出现在“组件”菜单中。
*   `core.admin`(Configure) 允许设置该组件的选项。

因此，请确保您在 BreezingForms 中设置了正确的权限。您可能想要`core.manage`（访问管理界面）而不是另一个。此外，如果您设置了配置一项，请确保您还启用了管理一项。否则没有多大意义。

# c# - 如何发布谷歌距离矩阵参数？

> ID：13453343
> 
> 赞同：0
> 
> 时间：2012-11-19T11:58:58.220
> 
> 标签：c#, web-services, google-maps, google-maps-api-3

Google 距离矩阵最多可以接受 100 个参数。但是使用 GET Ruquest url lenth 将其限制为 < 15（我认为 2048 个字符），并且我得到了错误 414 - 请求的 URL 太大而无法处理。因此我得出结论，必须使用 POST 方法。但我不能。我收到了 REQUEST_DENIED 错误。那么我该如何使用这项服务呢？

```
 public static bool GetMatrix(string origins, string destinations)
    {
        string poststring = string.Format("origins={0}&destinations={1}&mode=bicycling&language=fr-FR&sensor=false", origins, destinations);
        byte[] postdata = Encoding.UTF8.GetBytes(poststring);

        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("http://maps.googleapis.com/maps/api/distancematrix/xml");
        webRequest.Method = "POST";
        webRequest.ContentType = "application/xml"; // or any other type dont work
        webRequest.ContentLength = postdata.Length;
        using (Stream writer = webRequest.GetRequestStream())
            writer.Write(postdata, 0, postdata.Length);

        using (HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse())
        {
            //Only for debug
            using (var stream = new StreamReader(webResponse.GetResponseStream()))
                System.Diagnostics.Debug.WriteLine(stream.ReadToEnd());

            return (webResponse.StatusCode == HttpStatusCode.OK);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:19:36.687

**JS方法**

例如。[距离矩阵示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/distance-matrix)

```
var origin1 = new google.maps.LatLng(55.930385, -3.118425);
var origin2 = "Greenwich, England";
var destinationA = "Stockholm, Sweden";
var destinationB = new google.maps.LatLng(50.087692, 14.421150);

var service = new google.maps.DistanceMatrixService();
service.getDistanceMatrix(
  {
    origins: [origin1, origin2],
    destinations: [destinationA, destinationB],
    travelMode: google.maps.TravelMode.DRIVING,
    avoidHighways: false,
    avoidTolls: false
  }, callback);

function callback(response, status) {
  // See Parsing the Results for
  // the basics of a callback function.
} 
```

**C# 方法在没有 google.com 的情况下计算距离**

```
 public decimal calcDistance(decimal latA, decimal longA, decimal latB, decimal longB)
    {

        double theDistance = (Math.Sin(DegreesToRadians(latA)) *
                Math.Sin(DegreesToRadians(latB)) +
                Math.Cos(DegreesToRadians(latA)) *
                Math.Cos(DegreesToRadians(latB)) *
                Math.Cos(DegreesToRadians(longA - longB)));

        return Convert.ToDecimal((RadiansToDegrees(Math.Acos(theDistance)))) * 69.09M * 1.6093M;
    } 
```

# layout - 可以在 iOS6 中使用 UICollectionview 创建脉冲新闻样式布局吗？

> ID：13453344
> 
> 赞同：2
> 
> 时间：2012-11-19T11:58:58.103
> 
> 标签：layout, ios6, uicollectionview

有没有人使用 UICollectionView 创建像 Pulse News 这样的布局？如果可能，请解释如何或共享代码。

如果您还没有看过 Pulse，这里是我正在寻找的布局：

![脉冲新闻ios截图](../Images/397e447067a61c80deb2820aeb255ad3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T03:21:56.937

尽管您问这个问题已经 2 年了，但为了这里其他用户的利益，我只是在回答。我只是为了学习而制作了一个 BBC 新闻应用程序克隆 UI。它遵循 Pulse 风格的 UI。我用过 UITableView，每一行都是一个 UICollectionView。我敢肯定，反过来也可以。这是完整 UI 的链接。它没有后端，否则它是一个完整的应用程序，可以使用虚拟数据。[https://github.com/anilputtabuddhi/NewsAppUI](https://github.com/anilputtabuddhi/NewsAppUI)

# c++ - 用“纯”C++ 11 替代 BGL 迭代顶点？

> ID：13453350
> 
> 赞同：10
> 
> 时间：2012-11-19T11:59:15.743
> 
> 标签：c++, boost, c++11, iterator, boost-graph

我想用纯 C++11 等价物替换顶点或边上的 BGL 迭代。BGL 代码（来自： http: [//www.boost.org/doc/libs/1_52_0/libs/graph/doc/quick_tour.html](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/quick_tour.html)）是：

```
typename boost::graph_traits<Graph>::out_edge_iterator out_i, out_end;
typename boost::graph_traits<Graph>::edge_descriptor e;
for (std::tie(out_i, out_end) = out_edges(v, g);
     out_i != out_end; ++out_i)
{
  e = *out_i;
  Vertex src = source(e, g), targ = target(e, g);
  std::cout << "(" << name[get(vertex_id, src)]
            << "," << name[get(vertex_id, targ)] << ") ";
} 
```

我从这里尝试了几个建议：[Replace BOOST_FOREACH with "pure" C++11 alternative?](https://stackoverflow.com/questions/10523648/replace-boost-foreach-with-pure-c11-alternative) 但没有运气。

我希望能够写出类似的东西：

```
for (auto &e : out_edges(v, g))
{ ... } 
```

或类似的东西：

```
for (std::tie(auto out_i, auto out_end) = out_edges(v, g);
     out_i != out_end; ++out_i)
{...} 
```

是否可以？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T12:24:09.340

一个简单的包装`out_edges`就足够了：

```
#include <boost/range/iterator_range.hpp>
#include <type_traits>

template<class T> using Invoke = typename T::type
template<class T> using RemoveRef = Invoke<std::remove_reference<T>>;
template<class G> using OutEdgeIterator = typename boost::graph_traits<G>::out_edge_iterator;

template<class V, class G>
auto out_edges_range(V&& v, G&& g)
  -> boost::iterator_range<OutEdgeIterator<RemoveRef<G>>>
{
  auto edge_pair = out_edges(std::forward<V>(v), std::forward<G>(g));
  return boost::make_iterator_range(edge_pair.first, edge_pair.second);
} 
```

或者更简单，将 a`std::pair`转换为有效范围的函数：

```
template<class It>
boost::iterator_range<It> pair_range(std::pair<It, It> const& p){
  return boost::make_iterator_range(p.first, p.second);
} 
```

进而

```
for(auto e : pair_range(out_edges(v, g))){
  // ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-17T22:27:48.673

Boost.Graph 还提供了类似于`BOOST_FOREACH`但专门为 Graph 迭代设计的便利宏。

对给定图的所有顶点/边的迭代由宏`BGL_FORALL_VERTICES`/`BGL_FORALL_EDGES`及其模板对应物`BGL_FORALL_VERTICES_T`/提供`BGL_FORALL_EDGES_T`。

对给定顶点的内边或外边的迭代由宏`BGL_FORALL_OUTEDGES`或提供`BGL_FORALL_INEDGES`。（为他们的模板版本添加 _T）。对于邻接顶点，使用`BGL_FORALL_ADJ`.

例子：

```
#include <boost/graph/iteration_macros.hpp>

typedef ... Graph;
Graph g;
BGL_FORALL_VERTICES(v, g, Graph)  //v is declared here and 
{                                   //is of type Graph::vertex_descriptor
     BGL_FORALL_OUTEDGES(v, e, g, Graph)  //e is declared as Graph::edge_descriptor
     {

     }
} 
```

这些宏在 C++03 和 C++11 中都有效。

# c - c中电话号码的正则表达式

> ID：13453354
> 
> 赞同：-4
> 
> 时间：2012-11-19T11:59:37.557
> 
> 标签：c, regex

我试过这个表达式来识别电话号码：

```
^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$ 
```

但此验证不适用于 Linux 上的 C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:11:51.943

检查这是否有效。我假设您正在使用扩展正则表达式（`REG_EXTENDED`标志）：

```
"^(?\\([0-9]{3}\\))?[-. ]?\\([0-9]{3}\\)[-. ]?\\([0-9]{4}\\)$" 
```

ERE 的不同之处在于它将`(`,`)`视为文字`(`，`)`并且`\(`,`\)`视为分组。

参考：

*   [http://www.kernel.org/doc/man-pages/online/pages/man3/regcomp.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/regcomp.3.html)
*   [http://www.kernel.org/doc/man-pages/online/pages/man7/regex.7.html](http://www.kernel.org/doc/man-pages/online/pages/man7/regex.7.html)

# java - 如何在 mysql 中为数据库视图编写 HQL 查询

> ID：13453355
> 
> 赞同：1
> 
> 时间：2012-11-19T11:59:37.130
> 
> 标签：java, hibernate, jakarta-ee, netbeans

我正在使用 netbean 并按照以下步骤对表执行 HQL 查询

1.  是否反向Engg
2.  生成的映射和 POJO

    ```
    Query query = session.createQuery("from MasUser as masUser where masUser.userName = '" + userName + "'");
    masUser = (masUser) query.uniqueResult(); 
    ```

现在我能够执行并得到结果。

* * *

然后我为这个表创建了视图

```
 CREATE VIEW test_view AS SELECT user_name, address FROM mas_user 
```

现在我需要在休眠 HQL 中执行 test_view。

请提供步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:03:15.943

如果在数据库中创建视图，查询视图的过程与处理表完全相同。只需为视图创建一个实体 (POJO)，附加映射注释，然后创建并执行查询。重复您对 MasUser 表执行的相同过程。

# android - 在移动应用程序上添加语音搜索功能

> ID：13453356
> 
> 赞同：0
> 
> 时间：2012-11-19T11:59:38.903
> 
> 标签：android, ios, html, css, mobile

我使用 HTML5 和 CSS3 创建了一个移动 Web 应用程序，它没有任何本机功能。现在，我需要在我的应用程序中提供语音搜索功能。我探索并发现谷歌已经为所有平台推出了一款“谷歌语音应用”。我的问题是 - 我可以在我的纯移动 Web 应用程序中添加此功能，还是必须是本地调用才能识别语音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:49:25.627

你在寻找这样的东西吗：[语音输入](http://slides.html5rocks.com/#speech-input)

Chrome 支持文本输入的语音识别。您可以通过在 HTML 中使用它来使用它

`<input type=”text” speech x-webkit-speech />`

![在此处输入图像描述](../Images/0e5d162dab32729966647eab54c81076.png)

# objective-c - Objective-C - NSDateFormatter dateFromString 忽略时间

> ID：13453358
> 
> 赞同：1
> 
> 时间：2012-11-19T11:59:44.540
> 
> 标签：objective-c, cocoa, nsdateformatter

如果我对时间不感兴趣，我可以忽略它吗？即我有一个看起来像这样的日期字符串，`@"2012-12-19T14:00:00"`但我只对获取日期（2012-12-19）感兴趣，但如果我设置`NSDateFormatter`它`[dateFormatter setDateFormat:@"yyyy-MM-dd"];`会返回一个 nil `NSDate`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:18:38.663

NSDate 对象也总是包含一个时间组件，因为它代表一个时间点——从这个角度来看，人们可能会认为 NSDate 的名称具有误导性。

您应该创建一个日期格式化程序来从字符串创建日期，将时间设置为一天的开始，并使用第二个日期格式化程序来输出没有时间组件的日期。

```
NSString *dateString = @"2012-12-19T14:00:00";

NSDateFormatter *inputFormatter = [[NSDateFormatter alloc] init];
[inputFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];

NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
[outputFormatter setDateStyle:NSDateFormatterShortStyle];
[outputFormatter setTimeStyle:NSDateFormatterNoStyle];

NSDate *date = [inputFormatter dateFromString:dateString];

//this will set date's time components to 00:00
[[NSCalendar currentCalendar] rangeOfUnit:NSDayCalendarUnit
                                startDate:&date
                                 interval:NULL
                                  forDate:date];

NSString *outputString = [outputFormatter stringFromDate:date];

NSLog(@"%@", outputString); 
```

结果是

```
19.12.12 
```

而格式（由样式选择）将取决于您的环境语言环境

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-19T13:02:36.597

所有日期字符串都返回 10 个字符作为日期，我的意思是今天的日期将是 2012-11-19

您可以轻松地对日期进行子串化并根据需要使用它：

例子 ：

```
 NSString* newDate = @"";
    newDate = [[NSDate date]substringToIndex:10]; 
```

输出将是：`2012-11-19`

# jquery - jquery比较列表中的两个选中项目

> ID：13453360
> 
> 赞同：0
> 
> 时间：2012-11-19T11:59:58.133
> 
> 标签：jquery

我有一个复选框项目列表，其中包含“30%”、“20%”等数值，我想让用户只选中两个框并比较它们并显示正差值或负差值。我从以下代码开始：

HTML：

```
<input type="checkbox" class="box" name="metrics1" value="" />
    <label for="metrics1">10%</label>
<input type="checkbox" class="box" name="metrics1" value="" />
    <label for="metrics1">20%</label>
<input type="checkbox" class="box" name="metrics1" value="" />
    <label for="metrics1">40%</label>
<input type="checkbox" class="box" name="metrics1" value="" />
    <label for="metrics1">60%</label>
<input type="checkbox" class="box" name="metrics1" value="" />
    <label for="metrics1">80%</label>

<div id="resultsection"></div> 
```

JS：

```
 $('input[type="checkbox"]').live('click', function() {
     var selected = '';
     $('input[type="checkbox"]').each(function(index, value) {
         if (this.checked) {
             selected += ($('label[for="'+this.name+'"]').html() + ', ');
         }
     });
     if (selected.length > 0) {
         selected = "You have selected the following: <br /> " + selected.substring(0,selected.length-2) + '.<br />';
     } else {
         selected = 'No metrics selected.';
     }

     $('#resultsection').html(selected);
 }); 
```

这样做是在#resultsection 中显示所选项目的值。我需要的是只获取两个值并将它们存储为两个 cookie 变量，以便在页面重新加载后使用它们。然后我们可以添加一个按钮来比较两个值，例如 (first-value - second-value = %result)。

我感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:00:54.070

我已经为你完成了逻辑（[**小提琴**](http://jsfiddle.net/bygqK/5/)）。它确实：

1.  2 次选择后禁用输入框
2.  将选定的 2 个值存储在一个数组中，并比较它们的真假。

现在您只需将值存储在 cookie 中并使用 2 个值执行任何您想做的事情。

```
$('input[type="checkbox"]').live('click', function() {
    var selected = '';
    var values = [];

    $('input[type="checkbox"]').each(function(index, value) {
        if (this.checked) {
            selected += "<span>" + $(this).next().html() + " </span> ";
            values.push($(this).next().html()); 
        }

          if($('input[type="checkbox"]:checked').length > 1 ) { 
             $('input[type="checkbox"]').each(function(index, value) {
                if (!this.checked) {
                   $(this).attr("disabled", true);
                }
            });
        }
    });

    if(values[0] == values[1]) {
       console.log('true');
    } else {
        console.log('false'); 
    }

    if (selected.length > 0) {
        selected = "You have selected the following: <br /> " + selected + '.<br />';
    } else {
        selected = 'No metrics selected.';
    }

    $('#resultsection').html(selected);
});​

<input type="checkbox" class="box" name="metrics1" value="" />
    <label for="metrics1">10%</label>
<input type="checkbox" class="box" name="metrics1" value="" />
    <label for="metrics1">20%</label>
<input type="checkbox" class="box" name="metrics1" value="" />
    <label for="metrics1">40%</label>
<input type="checkbox" class="box" name="metrics1" value="" />
    <label for="metrics1">60%</label>
<input type="checkbox" class="box" name="metrics1" value="" />
    <label for="metrics1">10%</label>
<div id="resultsection"></div>​ 
```

# php - 从不同的表和不同的数据库中获取数据

> ID：13453362
> 
> 赞同：0
> 
> 时间：2012-11-19T12:00:04.487
> 
> 标签：php, mysql, database

我想检索驻留在不同数据库中的两个不同字段。我的数据库连接设置是这样的：

```
 define ('DB_HOST',     'ipaddress1');
 define ('DB_USER',     'username1');
 define ('DB_PASSWORD', 'password1');
 define ('DB_DATABASE', 'ecbooks');
 $db_wink = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD, TRUE) or  die("Connection Error: " . mysql_error());
 mysql_select_db(DB_DATABASE) or die("Error connecting to Winkstore DB. " . mysql_error());

 // DB configuration parameters : magonwink
 define ('DB_REMOTE_HOST',     'ipaddress2');
 define ('DB_REMOTE_USER',     'username2');
 define ('DB_REMOTE_PASSWORD', 'password2');
 define ('DB_REMOTE_DATABASE', 'magsonwink');

 $db_magson = mysql_connect(DB_REMOTE_HOST, DB_REMOTE_USER,  DB_REMOTE_PASSWORD, TRUE) or die("Connection Error: " . mysql_error());
 mysql_select_db(DB_REMOTE_DATABASE, $db_magson) or die("Error connecting to magson wink DB. " . mysql_error());

 define ('CMS_DB_HOST',     'ipaddress3');
 define ('CMS_DB_USER',     'username3');
 define ('CMS_DB_PASSWORD', 'password3');
 define ('CMS_DB_DATABASE', 'mawinkcms');

 $db_rp = mysql_connect(CMS_DB_HOST, CMS_DB_USER, CMS_DB_PASSWORD, true) or die("Connection Error: " . mysql_error());
 mysql_select_db(CMS_DB_DATABASE, $db_rp) or die("Error connecting to DB. " . mysql_error()); 
```

但是当我使用这个查询时

```
 SELECT ecbooks.user.user_name AS field1, mawinkcms.purchase.USER_NAME AS field2 FROM ecbooks.user,mawinkcms.purchase
 $result     = mysql_query($query, $db_wink) or die("Couldn't execute query: " . mysql_error());
 while($row = mysql_fetch_assoc($result)){
 $users[] = $row;
 } 
```

我收到一个错误，无法执行查询。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:13:02.017

您必须将正确的链接标识符`mysql_query`作为第二个参数传递给函数：[http ://www.php.net/mysql_query](http://www.php.net/mysql_query)

`$ecbooks`不存在（根据您提供的代码）。

在您的情况下，如果您要访问的表在`ecbooks`数据库中，则必须传递`$db_wink`给`mysql_query`.

但是由于您试图在同一个查询中访问两个不同的数据库，因此您必须使用有权访问这两个数据库的用户连接到数据库。发布您得到的实际错误也会有所帮助。

ps：请停止使用此扩展访问 MySQL。有关详细信息，请参见[此处](http://si1.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:34:39.393

首先，在寻求错误帮助时，最好包含错误本身。

其次，您的查询似乎没有连接条件，因此如果您确实得到它，您将获得笛卡尔积 - 这可能不是您想要的。

第三，在运行查询时，它会针对您连接的数据库运行，无论您是否连接到任何其他数据库。因此，在您的示例中，您正在对 $db_wink; 运行查询。其他两个连接根本不影响这一点。

要使查询正常工作，连接到 $db_wink 的用户需要对数据库 ecbooks 和 mawinkcms 具有权限，并且 mawinkcms 必须与 ecbooks 在同一台服务器上运行。

我猜要么没有设置权限，要么你在不同的数据库上运行它们。

# powerpoint - 即使使用 CD 包后，PowerPoint 也不会在其他计算机上运行视频

> ID：13453368
> 
> 赞同：0
> 
> 时间：2012-11-19T12:00:33.793
> 
> 标签：powerpoint, powerpoint-2007

我想展示一个演示文稿。当我在另一台计算机上运行它时，声音和视频都不起作用。我发现了 Package for CD 并运行它。音频开始在其他计算机上工作，但视频仍然无法正常工作。我还将音频和视频作为包含的文件包括在内，但仍然只有音频有效，视频仅显示为缩略图。
我正在使用 PowerPoint 2007，如果您有任何想法，请帮助我。
谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-21T20:46:37.890

它将原始视频文件（不是从PowerPoint演示文稿粘贴的一份副本）保存在PC中。我假设您是电子邮件演示文稿的收件人。确保将 ppt 中的视频也通过电子邮件发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:21:36.683

要在 PPT 中播放 vids，必须发生两件事：

*   PPT 必须能够找到链接的视频文件，并且
*   视频所需的CODEC必须安装在Windows中

为了防止链接断开，您必须：

*   在添加任何视频之前至少保存一次 PPT
*   将视频文件与保存的 PPT 放在同一文件夹中
*   确保视频和 PPT 文件在您要播放演示文稿的任何计算机上的同一文件夹中保存在一起。

CD 软件包应该已经为您正确处理了所有这些，或者修改了演示文稿，以便它可以正常工作。

不过，对于 CODEC，您可以尝试将视频插入系统上的新演示文稿中，其中 vids 无法正常工作。如果它们仍然无法播放，您需要弄清楚使用了什么编解码器并安装它（或使用更常见的编解码器重新制作视频）。

我没有足够的视频专家来准确解释如何做到这一点；也许会有更多知识渊博的人来填补空白。如果没有，谷歌是我们的朋友。

# javascript - javascript回调动画

> ID：13453370
> 
> 赞同：2
> 
> 时间：2012-11-19T12:00:47.393
> 
> 标签：javascript, animation, callback, three.js

我使用three.js 编写了一个小动画函数进行3D 渲染（下面是完整的测试应用程序）：

每次我点击屏幕时，立方体都会根据函数调用中描述的动画旋转。但我期待如果立方体已经在一个动画下制作动画，添加另一个动画会导致它闪烁，因为相同的属性正在通过多个动画调用进行动画处理。但这不是最后一个动画停止并且新动画接管的情况，即使我最后的回调函数显示旧动画函数仍在运行！那么为什么当发送多次点击时立方体不闪烁呢？

```
<!DOCTYPE html>
<html>
<head>
    <title>Test Page</title>
    <script src="three-mini.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <script>
        var animate = function(obj, prop, targetValue, length, callback) {

            var startTime = Date.now(), inverseLength = 1 / length, startValue = obj[prop];

            if( typeof targetValue === "string") {
                if(targetValue.substring(0, 2) === "+=") {
                    targetValue = obj[prop] + Number(targetValue.substring(2));
                } else {
                    targetValue = obj[prop] - Number(targetValue.substring(2));
                }
            }

            var animateProp = function() {

                var elapsed = (Date.now() - startTime) * inverseLength;

                if(elapsed >= 1) {

                    obj[prop] = targetValue;

                    if( callback instanceof Function) {
                        requestAnimationFrame(callback);
                    }
                    return;

                } else {

                    obj[prop] = (startValue - targetValue) * (Math.cos(elapsed * Math.PI) + 1) * 0.5 + targetValue;

                    requestAnimationFrame(animateProp);

                }

            };
            requestAnimationFrame(animateProp);

        };
        var camera, scene, renderer;
        var geometry, material, mesh;

        init();

        function init() {
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);
            camera.position.z = 1000;
            scene = new THREE.Scene();
            geometry = new THREE.CubeGeometry(200, 200, 200);
            material = new THREE.MeshBasicMaterial({
                color : 0xff0000,
                wireframe : true
            });
            mesh = new THREE.Mesh(geometry, material);
            scene.add(mesh);
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);

            document.body.appendChild(renderer.domElement);
            renderer.domElement.addEventListener('click', function() {
                animate(mesh.rotation, "x", "-=" + Math.PI * 2 * 10, 5000, function() {
                    alert("CALLED BACK!")
                });
                animate(mesh.rotation, "y", "-=" + Math.PI * 2 * 10, 15000, function() {
                });
            });
            window.addEventListener('load', render);
            window.addEventListener('resize', function() {
                renderer.setSize(window.innerWidth, window.innerHeight);
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
            });
        }

        function render() {

            // note: three.js includes requestAnimationFrame shim
            requestAnimationFrame(render);

            renderer.render(scene, camera);

        }
    </script>
</body>
</html> 
```

更新 1：

为了找出发生了什么，我添加了更多的网格并以不同的方式对其进行动画处理，代码如下，它为每个后续单击设置每个网格的动画，并首先通过旋转对其进行动画处理，然后将它们向前移动，然后向后移动，然后返回回转。您可以在不停止旋转动画的情况下为位置设置动画，并且可以在不停止先前动画的情况下同时为另一个网格设置动画，那么当多个动画在同一个网格和相同属性上运行时，为什么动画不闪烁?

```
<!DOCTYPE html>
<html>
<head>
    <title>Test Page</title>
    <script src="three-mini.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <script>
        var animate = function(obj, prop, targetValue, length, callback) {

            var startTime = Date.now(), inverseLength = 1 / length, startValue = obj[prop];

            if( typeof targetValue === "string") {
                if(targetValue.substring(0, 2) === "+=") {
                    targetValue = obj[prop] + Number(targetValue.substring(2));
                } else {
                    targetValue = obj[prop] - Number(targetValue.substring(2));
                }
            }

            var animateProp = function() {

                var elapsed = (Date.now() - startTime) * inverseLength;

                if(elapsed >= 1) {

                    obj[prop] = targetValue;

                    if( callback instanceof Function) {
                        requestAnimationFrame(callback);
                    }
                    return;

                } else {

                    obj[prop] = (startValue - targetValue) * (Math.cos(elapsed * Math.PI) + 1) * 0.5 + targetValue;

                    requestAnimationFrame(animateProp);

                }

            };
            requestAnimationFrame(animateProp);

        };
        var camera, scene, renderer, geometry, material, mesh1, mesh2, mesh3, mesh4, mesh5, i = 0, j = 0;

        init();

        function init() {
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);
            camera.position.z = 1000;
            scene = new THREE.Scene();
            geometry = new THREE.CubeGeometry(200, 200, 200);
            material = new THREE.MeshBasicMaterial({
                color : 0xff0000,
                wireframe : true
            });
            mesh1 = new THREE.Mesh(geometry, material);
            scene.add(mesh1);
            mesh2 = new THREE.Mesh(geometry, material);
            mesh2.position.x = mesh2.position.y = mesh2.position.z = 200;
            scene.add(mesh2);
            mesh3 = new THREE.Mesh(geometry, material);
            mesh3.position.x = mesh3.position.z = 200;
            mesh3.position.y = -200;
            scene.add(mesh3);
            mesh4 = new THREE.Mesh(geometry, material);
            mesh4.position.y = mesh4.position.z = 200;
            mesh4.position.x = -200;
            scene.add(mesh4);
            mesh5 = new THREE.Mesh(geometry, material);
            mesh5.position.y = mesh5.position.x = -200;
            mesh5.position.z = 200;
            scene.add(mesh5);
            renderer = new THREE.CanvasRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);

            document.body.appendChild(renderer.domElement);
            renderer.domElement.addEventListener('click', function() {
                var mesh;
                if(i === 5) {
                    i = 0;
                    j++;
                    if(j === 3) {
                        j = 0;
                    }
                }
                i++;

                var mesh = window['mesh' + i];
                if(j === 1) {
                    animate(mesh.position, "z", "+=" + 500, 2000, function() {
                        //alert("CALLED BACK!")
                    });
                    return;
                }
                if(j === 2) {
                    animate(mesh.position, "z", "-=" + 500, 3000, function() {
                        //alert("CALLED BACK!")
                    }); retunr;
                }
                animate(mesh.rotation, "x", "-=" + Math.PI * 2 * 5, 5000, function() {
                    //alert("CALLED BACK!")
                });
                animate(mesh.rotation, "y", "-=" + Math.PI * 2 * 6, 10000, function() {
                });
            });
            window.addEventListener('load', render);
            window.addEventListener('resize', function() {
                renderer.setSize(window.innerWidth, window.innerHeight);
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
            });
        }

        function render() {

            // note: three.js includes requestAnimationFrame shim
            requestAnimationFrame(render);

            renderer.render(scene, camera);

        }
    </script>
</body>
</html> 
```

对 WestLangley 的评论：让我试着解释一下，我很抱歉不清楚。假设我单击一次，它会从`position.x = 0`to开始动画`targetValue: '+=200'`。然后在该动画进行到一半时，我再次单击它，这一次将在负 x 方向上进行动画处理`position.x = 100`（因为它从第一个动画的中途开始）并且具有`targetValue: '-=200'`. 现在我希望第一个动画仍在运行，因此它继续从`x=100`to动画`x=200`，第二个动画现在也在从`x=100`to运行`x=-100`，所以当每个动画函数被调用时，我希望看到立方体左右跳跃，直到第一个动画结束，然后第二个动画可以不受阻碍地继续。这是我所期待的，因此我期待它闪烁。但显然多个动画功能同时运行，但只有最新的一个对更新网格属性有任何影响。:S 至少据我所知。

我对此的主要担心是，我可以从实验中看出“隐藏的”动画调用仍在处理中，因此丢弃了宝贵的处理器周期，这也导致在回调函数中添加动画调用时出现问题。为此，我主要关心的是如何停止这些“隐藏”的动画调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:50:23.933

我仍然不能完全确定发生了什么，但我知道的是多个动画同时运行，即使早期的动画没有显示。我对此的主要担心是它消耗了不必要的处理能力。所以我添加了一个后缀符号，现在我将动画函数添加到拥有对象本身的动画属性中，所以如果我正在制作动画`position.x`，我会创建我的动画函数并将其分配给`position.x_animate`或者`position.x_animate_alt`。这样我就可以取消上一个仍在运行的动画，这样我就不会浪费处理器周期了。完整片段仅适用于以下动画功能：

```
var animate = function(obj, prop, targetValue, length, callback) {

            var suffix = '_animate', altSuffix = '_animate_alt', thisSuffix = suffix, startTime = Date.now(), inverseLength = 1 / length, startValue = obj[prop];

            if( typeof targetValue === "string") {
                if(targetValue.substring(0, 2) === "+=") {
                    targetValue = obj[prop] + Number(targetValue.substring(2));
                } else {
                    targetValue = obj[prop] - Number(targetValue.substring(2));
                }
            }

            if(obj[prop+suffix] instanceof Function){
                obj[prop+suffix].cancelled = true;
                thisSuffix = altSuffix;
            }
            if(obj[prop+altSuffix] instanceof Function){
                obj[prop+altSuffix].cancelled = true;
                thisSuffix = suffix;
            }

            obj[prop+thisSuffix] = function() {

                var elapsed;
                if(obj[prop+thisSuffix].cancelled){
                    delete obj[prop+thisSuffix];
                    return;
                }
                elapsed = (Date.now() - startTime) * inverseLength;

                if(elapsed >= 1) {

                    obj[prop] = targetValue;
                    delete obj[prop+thisSuffix];
                    if( callback instanceof Function) {
                        requestAnimationFrame(callback);
                    }
                    return;

                } else {

                    obj[prop] = (startValue - targetValue) * (Math.cos(elapsed * Math.PI) + 1) * 0.5 + targetValue;

                    requestAnimationFrame(obj[prop+thisSuffix]);

                }

            };

            requestAnimationFrame(obj[prop+thisSuffix]);

        }; 
```

# c# - 在 C# 套接字中传递和接收复杂对象

> ID：13453371
> 
> 赞同：-3
> 
> 时间：2012-11-19T12:00:47.490
> 
> 标签：c#, sockets, asynchronous

> **可能重复：**
> [如何在 C# 中异步接收复杂对象？](https://stackoverflow.com/questions/13452765/how-to-asynchronously-receive-complex-object-in-c)

我的复杂对象的类型是 IOrderedQueryable 它有 4 个属性，都是 List 类型

我通过这个使用异步套接字发送我的对象：

```
 private void SendDatabaseObj(Socket handler, IOrderedQueryable<BuildHistory1> buildHistoryQueryResult)
        {
            byte[] byteData = ObjectToByteArray(buildHistoryQueryResult);

            // Begin sending the data to the remote device.
            handler.BeginSend(byteData, 0, byteData.Length, 0,
                new AsyncCallback(SendCallback), handler);
        } 
```

ObjectToByteArray() 函数（发送前序列化对象）：

```
 private byte[] ObjectToByteArray(Object obj)
        {
            BinaryFormatter bf = new BinaryFormatter();
            MemoryStream ms = new MemoryStream();
            bf.Serialize(ms, obj);
            return ms.ToArray();
        } 
```

我收到了我通过这个发送的对象：

```
 private void ReceiveCallback_onQuery(IAsyncResult ar)
        {
            try
            {
                // Retrieve the state object and the client socket 
                // from the asynchronous state object.
                StateObject state = (StateObject)ar.AsyncState;
                Socket client = state.workSocket;

                // Read data from the remote device.
                int bytesRead = client.EndReceive(ar);

                if (bytesRead > 0)
                {
                    // There might be more data, so store the data received so far. But how to store?

                    // Get the rest of the data.
                    client.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                        new AsyncCallback(ReceiveCallback_onQuery), state);
                }
                else
                {
                    // All the data has arrived; put it in response.
                    if (dataReceived > 1)
                    {
                        //Use the deserializing function here to retrieve the object to its normal form
                    }
                    // Signal that all bytes have been received.
                    receiveDoneQuery.Set();
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }
        } 
```

我的反序列化功能：

```
 private Object ByteArrayToObject(byte[] arrayBytes)
        {
            MemoryStream ms = new MemoryStream();
            BinaryFormatter bf = new BinaryFormatter();
            ms.Write(arrayBytes, 0, arrayBytes.Length);
            ms.Seek(0, SeekOrigin.Begin);
            Object obj = (Object)bf.Deserialize(ms);
            return obj;
        } 
```

现在我的问题是接收函数“ReceiveCallback_onQuery()”。如果有更多的数据要接收，如何存储之前接收到的数据？

编辑：我知道执行下面的代码，但是还有其他方法可以将接收到的数据存储在 byte[] 变量中，以便我可以将它们转换回 IOrderedQueryable

```
state.sb.Append(Encoding.ASCII.GetString(state.buffer, 0, bytesRead)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:11:36.573

当流式传输数据时，例如使用套接字，您必须在协议中内置某种方式来了解每条消息的开始和结束在数据中的位置。这由标准协议的工具（例如用于 SOAP 的 WCF）自动处理，但如果您要设计自己的协议，则需要自己实现它。最简单的方法是在每条消息之间添加一个已知的分隔符或字符串，但是您需要注意分隔符永远不会出现在消息的数据中。另一种选择是在消息头中发送消息的长度，或者简单地使用固定长度的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:25:51.530

不要通过`IQueryable`网络传递。您不能使用另一侧的查询功能。而是创建一个表示请求（即包含有关要接收哪些项目的信息）和响应（包含匹配对象数组的对象）的类。

如果您不想自己处理网络层并且想要一种比 WCF 更轻量级的方法，您可以使用我的 Griffin.Networking 库。

我刚刚上传了一个视频，演示了如何在 20 分钟内创建一个简单的聊天客户端/服务器：[https ://www.youtube.com/watch?v=DjJOaV2y1Lo](https://www.youtube.com/watch?v=DjJOaV2y1Lo)

示例代码：[https ://github.com/jgauffin/Samples/tree/master/Griffin.Networking/ChatServerClient](https://github.com/jgauffin/Samples/tree/master/Griffin.Networking/ChatServerClient)

# sql-server-2008 - 指示 ADODB 记录集使用 SQL Server 当前时间戳

> ID：13453373
> 
> 赞同：1
> 
> 时间：2012-11-19T12:01:00.830
> 
> 标签：sql-server-2008, vb6, ado, recordset

我正在尝试使用 ADO 从 VB6 应用程序将许多记录写回数据库。记录从数据库读入`ADODB.Recordset`并随后更新。我希望能够让集合中的每条记录使用数据库服务器的当前日期和时间，因为我不相信我们所有的机器都是时间同步的。有没有办法做到这一点而不必查询数据库`CURRENT_TIMESTAMP`（或类似的东西）？理想情况下，我希望有某种标志，我可以将字段值设置为，以便`Recordset`在数据库服务器上解决这个问题。

请参阅下面我的原型代码中的问题（在 while 循环中）。

```
Dim oConn As ADODB.Connection
Dim oRs As ADODB.Recordset
Dim sSQL As String
Dim sColumnName1 As String: sColumnName1 = "UserNID"
Dim sColumnName2 As String: sColumnName2 = "Username"
Dim sColumnName3 As String: sColumnName3 = "LastLoginDTM"

' Open a connection.
Set oConn = New ADODB.Connection
oConn.Open 'my connection string was here

' Make a query over the connection.
sSQL = "SELECT TOP 10 " & sColumnName1 & ", " & sColumnName2 & ", " & sColumnName3 & " " & _
       "FROM theTable"

Set oRs = New ADODB.Recordset
oRs.CursorLocation = adUseClient
oRs.Open sSQL, oConn, adOpenStatic, adLockBatchOptimistic, adCmdText
oRs.MoveFirst

While Not oRs.EOF
    oRs.Fields(sColumnName3).Value = '-=-=-=-=-What do I put here???-=-=-=-=-
    oRs.MoveNext
Wend

' Close the connection.
oConn.Close
Set oConn = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:12:15.103

您可以使用 TSQL [GetDate() 函数](http://msdn.microsoft.com/en-us/library/ms188383.aspx)

将您的选择更改为：

```
sSQL = "SELECT TOP 10 " & sColumnName1 & ", " & sColumnName2 & _ 
        ", " & sColumnName3 & ", GETDATE() AS ServerTimeStamp " & _
       "FROM theTable" 
```

然后，您的代码可能是：

```
While Not oRs.EOF
    oRs.Fields(sColumnName3).Value = oRS.Fields("ServerTimeStamp").Value
    oRs.MoveNext
Wend 
```

# php - 具有相同会话数据的不同页面上的不同行

> ID：13453378
> 
> 赞同：0
> 
> 时间：2012-11-19T12:01:12.857
> 
> 标签：php, mysql

我有 4 行（id、name、age、tel）的 MySQL 表，我希望在第一页上显示所有 NAME，一旦用户单击其中一个名称转到显示 NAME 和 AGE 的不同页面（使用 id行）和一个按钮到第三页显示姓名年龄电话。我知道它正在使用会话，但我不知道如何编写它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:09:02.383

您可以使用[$_GET](http://www.w3schools.com/php/php_get.asp)。在您的第一页中，使用如下网址创建指向第二页的链接：

> secondpage.php?id=1

`1`该特定行的 id在哪里。然后在您的第二页中，您可以使用 $_GET['id'] 从 url 获取此 id。然后检索具有此 id 值的行；执行 MySQL 查询以检索要显示的值。对第三页做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:13:54.023

名称1

名称2

名称3

如果你点击 name1 比

```
<a herf="showall.php?id=<?php echo $row['id'];?>">name1</a> 
```

它将显示到 showall.php 页面并在另一个页面上获取 id=1 的数据

这可能会有所帮助！

# intellij-idea - 是否可以创建一个 IntelliJ 插件来创建一个新的“模块类型”

> ID：13453382
> 
> 赞同：1
> 
> 时间：2012-11-19T12:01:20.427
> 
> 标签：intellij-idea, intellij-plugin

是否可以创建 IntelliJ 插件来创建新的“模块类型”？

我想在项目中创建一个新的模块类型，它可以依赖于项目中任何类型的其他模块，并成为项目中任何其他模块的依赖项，并且在构建新的自定义模块类型时执行特定于新型模块（即：其自定义编译器或其他外部命令或进程）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:08:27.453

查看[IntelliJ IDEA Community Source code](https://github.com/JetBrains/intellij-community)，例如 Android 插件添加了新的模块类型。

目前，IDEA 12 正在进行重大的 API 重新设计，以便为模块和项目提供模板。请参阅[此目录](http://git.jetbrains.org/?p=idea/android.git;a=tree;f=android/src/org/jetbrains/android/newProject)以获取 Android 模板。

# apache - 监控 apache 连接

> ID：13453383
> 
> 赞同：1
> 
> 时间：2012-11-19T12:01:20.813
> 
> 标签：apache, server-side-includes

我如何监控 apache 获得了多少连接？像[http://www.cyberciti.biz/faq/apache-server-status/](http://www.cyberciti.biz/faq/apache-server-status/)之类的东西。基本上我需要一些工具来在连接数超过指定限制时发送电子邮件。我找不到任何可以为我提供实时服务器的服务器端统计信息的信息。我得到的一切都与模拟真实实例有关。如果有请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:11:10.270

mod_status 使信息可用 - 你只需要一些东西来轮询页面和报告。

[Nagios](http://www.nagios.org/)为实现监控（调度/警报/报告/升级/自动响应）提供了一个很好的平台，同时至少有 2 个插件（[check_apachestatus.pl](http://exchange.nagios.org/directory/Tutorials/Other-Tutorials-And-HOWTOs/Monitoring-Apache-Session-load-with-Nagios-through-mod_status/details)和[check_apache2.sh](http://exchange.nagios.org/directory/Plugins/Web-Servers/Apache/check_apache2-2Esh/details)）将报告并发连接。

# javascript - 删除文本 :last after()

> ID：13453384
> 
> 赞同：0
> 
> 时间：2012-11-19T12:01:21.870
> 
> 标签：javascript, jquery, html, jquery-after

```
$('.main-bottom-menu li').after('<div style="float: left;">//</div>');
$('.main-bottom-menu li:last').after(''); 
```

`//`但在最后一个 li 元素之后并不清楚。如何`//`在 li:last 元素之后删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:02:57.920

您需要在选定元素上调用[**remove()以将其从 DOM 中删除**](http://api.jquery.com/remove/)

**[现场演示](http://jsfiddle.net/rajaadil/37N5r/)**

**改变**

```
$('.main-bottom-menu li:last').after(''); 
```

**至**

```
$('.main-bottom-menu li:last').next('div').remove(); to remove div after last li 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:03:43.533

这应该这样做：

```
$('.main-bottom-menu li:last').html(''); 
```

根据this question，他不想删除div，他只想清空它。上面的代码应该可以做到。

# c - getchar 在开关盒中不起作用（c）

> ID：13453385
> 
> 赞同：1
> 
> 时间：2012-11-19T12:01:23.693
> 
> 标签：c, switch-statement, getchar, input-buffer

使用一个非常简单的计算器程序，提示用户执行一项操作，然后提示输入两个整数以执行该操作。程序应该在这些操作之后循环，除非用户输入字符'q'，此时程序应该退出。

```
#include <stdio.h>

int main (void)
    {
        char c;
        int number[2], num1, num2, result;
        double num1d, num2d, resultd;
        int done=1;

        while(done)
        {
        printf("\t What sort of operation would you like to perform? \n \t Type + - * / accordingly. \n");
        c = getchar();
        printf("\tplease enter a number \n");
        scanf("%d",&number[0]);
        printf("\tplease enter another number \n");
        scanf("%d",&number[1]);
        num1 = number[0];
        num2 = number[1];

        switch(c)
            {
            case('-'):
            result = num1-num2;
            printf("\nThe first number you entered subtracted by the second number is %d.\n", result);
            break;

            case('+'):
            result = num1+num2;
            printf("The first number you entered added to the second number is %d.\n", result);
            break;

            case('*'):
            result = num1*num2;
            printf("The first number you entered multiplied with the second number is %d.\n", result);
            break;

            case('/'):
            num1d = (double) num1;
            num2d = (double) num2;
            resultd = num1d/num2d;
            printf("The first number you entered divided by the second number is %g.\n", resultd);;
            break;

            case('q'):
            printf(" Now Exiting...\n");
            done=0;
            break;

            default:
            puts("Invalid key pressed. Press q to exit");
            break;
            }
        }

        return 0;
    } 
```

对单个计算正常工作，但随后执行异常；特别是它打印

```
printf("\t What sort of operation would you like to perform? \n \t Type + - * / accordingly. \n");
printf("\tplease enter a number \n"); 
```

共。

清除输入缓冲区的标准方法`while (getchar() != '\n');`不能解决这个问题。此文本显示不正确的两倍，用户仍然可以使用程序，就好像指令显示正常一样（因此用户可以键入操作，例如 +，回车，然后是一些整数和回车，并且程序将从那时起正确执行）每隔一次程序将“按下无效键。按 q 退出”，无论输入如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:28:14.753

这里的其他人都说的是真的，`getchar()`返回一个，`int`但这不是你的问题。

问题是`getchar()`使用后会留下换行符。如果您要使用，则`getchar()`必须**始终**在之后使用换行符。这个简单的修复：

```
 printf("\t What sort of operation would you like to perform? \n \t Type + - * / accordingly. \n");
    c = getchar();
    getchar();     //<-- here we do an extra getchar for the \n
    printf("\tplease enter a number \n");
    scanf("%d",&number[0]);
    printf("\tplease enter another number \n");
    scanf("%d",&number[1]); 
```

这将消除问题。每次您键入`<somechar><enter>`时，实际上都会在缓冲区中放置两个字符，例如，如果我按 + 并输入，我会得到：

```
'+''\n'  // [+][\n] 
```

`getchar()`只会得到其中的第一个，然后当`getchar()`再次被调用时，它不会等待您的输入，它只会接受`'\n'`并继续`scanf()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T12:03:43.637

您不应将逐个字符与更高级的输入函数（例如`scanf()`. 最好也使用`scanf()`输入命令字符，但当然你必须在命令后按回车。我相信这是你问题的根本原因。

顺便说一句，请注意`getchar()`，尽管它的名字，返回`int`，*而不是* `char`。这是因为它可以返回`EOF`一个特殊常量，它的值不同于所有字符的值。

此外，您应该*始终*检查 I/O 函数的返回值，`scanf()`如果输入与模式字符串不匹配，它们可能会失败。

作为调试提示，你当然可以`c`在解释它之前打印它的值，这样你可以更容易地看到和理解程序的流程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T12:07:11.207

我猜它第一次有效，但下次不行。这是因为`scanf`调用*将换行符留在输入缓冲区中*，因此下一次`getchar`在循环中调用它将返回换行符。`scanf`在调用中的格式后添加一个空格

```
scanf("%d ",&number[0]); 
```

它将丢弃缓冲区中剩余的空白。

使用调试器单步执行代码并检查变量以进行验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:07:04.430

你的 getchar 应该返回`int`。原因如下

```
getchar reads characters from the program's standard input 
and returns an int value suitable for storing into a char. 
The int value is for one reason only: not only does getchar 
return all possible character values, but it also returns an 
extra value to indicate that end-of-input has been seen. 
The range of a char might not be enough to hold this extra value, 
so the int has to be used. 
```

所以基本上你需要`char c`在`int c`你的代码中改变

# ruby-on-rails - 可以在 form_for helper rails 3 中发送多种格式

> ID：13453386
> 
> 赞同：3
> 
> 时间：2012-11-19T12:01:25.347
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, form-for

是否可以发送多种格式，例如：

```
<%= form_for(@post, :format => :json, :csv, :xml) do |f| %>
  ...
<% end %> 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:35:30.600

您不是“发送格式”，而是向服务器发送请求，服务器以指定的格式响应此请求。您可以使用参数告诉控制器您希望它返回哪种格式。

有几种方法可以告诉控制器您想要哪种格式。实际上只有一种方法，传递一个参数，但是有几种方法可以传递这个参数。

我喜欢 hidden_​​field 方法，例如，您可以在其中添加一个隐藏字段，其值是您想要的格式，并在用户选择具有该格式的单选按钮时使用 javascript 更改该字段的值。您也可以使用多个提交按钮来执行此操作，并将 HTML onClick 属性设置为更改 hidden_​​field 值的函数。

示例（我将使用多按钮方法，并使用 jQuery）：

首先，让我们构建表单：

```
<%= form_for(@post, :format => :json, :csv, :xml) do |f| %>

...

<%= f.hidden_field :random_param_name, :value => "default format value" %>

// Notice you should use f.submit here instead of button_tag, because it's a form_for, not a form_tag

<%= f.submit "Give me XML!", :onClick => "changeFormat('xml');" %>
<%= f.submit "Give me JSON!", :onClick => "changeFormat('json');" %>
<%= f.submit "Give me CSV!", :onClick => "changeFormat('csv');" %>

<% end %> 
```

现在我们添加 changeFormat 函数：

```
<script type="text/javascript">
    function changeFormat(format) {
        // The ID here is in the format "model_name_field_name". This is default for any form_for.
        $("#post_random_param_name").val(format);
    }
</script> 
```

现在您只需要在控制器 ( `params[:post][:random_param_name]`) 中捕获此参数并执行您必须执行的操作！您需要做的最后一件事是将此 random_param_name 添加到 Post 模型的可访问属性中：

```
attr_accessor :random_param_name
attr_accessible :random_param_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-03T09:34:52.410

最近，我遇到了同样的问题，“如何发送所需格式的表单”。

所以我找到了解决方案并对其进行了更改。我只是将操作属性替换为所需的 URL，而不是其他参数，因为[格式是 URL 的一部分](https://stackoverflow.com/questions/6942326/form-for-with-url-format-and-html-options)（它不是表单属性）：

```
submit_tag "Get JSON", onClick: "$(this).closest('form').attr('action', '#{ my_path(format: :json) }')" 
```

因此，您不需要赶上参数，`respond_to`而是使用：

```
respond_to do |format|
  format.json { render json: @my_object.to_hash }
  format.html
end 
```

希望它会有用。

# mvvm - 在 MVVM 环境中的另一个 xaml 页面中获取元素

> ID：13453390
> 
> 赞同：0
> 
> 时间：2012-11-19T12:01:40.557
> 
> 标签：mvvm, windows-phone-8

我有一个带有此进度条的 mainpage.xaml：

```
<ProgressBar x:Name="DataLoading" Height="10" Margin="0,-14,0,0" Grid.Row="1" VerticalAlignment="Top" IsIndeterminate="True"/> 
```

现在我需要在调用 web 服务后让这个进度条的可见性崩溃？我要去哪里拿？请帮助我对 mvvm 和 windowsphone 开发非常陌生？请告诉我你还需要什么代码才能给我答案谢谢 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:09:03.040

只需将 bool 属性添加`IsDataLoading`到您的 ViewModel。使用[BooleanToVisibiltyConverter](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)将其值绑定到您的[Visibilty](http://msdn.microsoft.com/en-us/library/system.windows.uielement.visibility%28v=vs.95%29.aspx)属性。根据您的 Web 服务状态将该属性设置为 true 和 false。`ProgressBar``IsDataLoading`

```
<Grid>
    <Grid.Resources>
        <BooleanToVisibiltyConverter x:Key="bool2VisConverter" />
    </Grid.Resources>
    <ProgressBar Visibility="{Binding IsDataLoading, Converter={StaticResource bool2VisConverter}}" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:02:03.490

在您的视图模型中：

```
 private bool _isBusy;
    public bool IsBusy
    {
        get
        {
            return _isBusy;
        }
        set
        {
            if (value == _isBusy)
                return;
            _isBusy = value;
            DispatcherService.BeginInvoke(() =>
            {
                RaisePropertyChanged(() => IsBusy);
            });
        }
    } 
```

视图中的进度条：

```
 <ProgressBar IsIndeterminate="True" Visibility="{Binding IsBusy, Converter={StaticResource VisibilityConverter}}" /> 
```

# asp.net - 带有本地化的 CSS

> ID：13453392
> 
> 赞同：0
> 
> 时间：2012-11-19T12:01:45.060
> 
> 标签：asp.net, css, localization

在论坛中找到这些步骤，

1-添加 App_GlobalResources 文件夹

2-在上面的文件夹中添加 Resource.resx

3-在 Resource.resx 上面添加 Cssurl 和你的字符串

只需将您的href更改为此

```
<link href="<%$ Resources: Resource , Cssurl %>" rel="stylesheet" type="text/css" /> 
```

虽然这对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:55:01.280

```
protected void Page_Init(object sender, EventArgs e)
{
    HtmlLink css = new HtmlLink();
    css.Href = "css/fancyforms.css";
    css.Attributes["rel"] = "stylesheet";
    css.Attributes["type"] = "text/css";
    css.Attributes["media"] = "all";
    Page.Header.Controls.Add(css); 
} 
```

在条件下给 css.href 值解决了我的问题:)

# jquery - CSS 和隐藏元素，使我的其他锚链接不起作用

> ID：13453396
> 
> 赞同：0
> 
> 时间：2012-11-19T12:01:57.657
> 
> 标签：jquery, css, overlay

这是我的网站：

saykey.com/gigantic

当您单击第一项上的“更多信息”时，它会起作用（它会折叠一个带有信息的元素）。

如果您尝试在第二个、第三个等项目元素上单击此更多按钮，它将不起作用！

首先，我认为是 .info 按钮，它不适用于第二个 etc 项目，但现在我发现它是带有信息的隐藏元素，这使得更多信息按钮不起作用。（你不能点击锚链接）

如何在我的 CSS 中解决这个问题？z 指数？如何？我是否隐藏了错误的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:10:37.603

我不确定这个网站是否正在为我翻译，但我从你的源代码中看到的是你正在寻找 Mere info 和 Mindre info

```
 <script type='text/javascript'>
    $(document).ready(function(){
        $('.infobutton').live('click', function(){
            if ($(this).html() == "Mere info") {
                $(this).html("Mindre info");
                $(this).next().toggleClass("hidden");
            } else if ($(this).html() == "Mindre info") {
                $(this).html("Mere info");
                $(this).next().toggleClass("hidden");
            }
        })
    });
</script> 
```

但是你的 html 没有哪里

> 仅仅是信息

相反，它有

> 更多信息

. 所以显然它不会工作。您应该首先在 html 中更正您的措辞。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:23:34.550

不确定它是否会导致此问题，但在您的页面顶部，您链接到 jquery 1.7.2 并根据 jquery API。`$.live()`在 1.7 及更高版本中已弃用。尝试`$.on()`根据他们的建议将其更改为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:19:34.643

删除你的`hidden`CSS 类的使用，替换`$(this).next().toggleClass("hidden");`为`$(this).next().toggle();`

# java - Lotus Domino Java 脚本库编译错误

> ID：13453397
> 
> 赞同：0
> 
> 时间：2012-11-19T12:01:57.263
> 
> 标签：java, lotus-domino, lotus

尝试在服务器上保存的数据库中保存/编译 Java 脚本库时，我遇到了问题视图中出现以下错误的问题。我正在使用 DDE 8.5.3（注意，我已经更改了应用程序和库名称）：

> 项目 'app_name.nsf.java-lib-name.javalib' 缺少必需的库：'C:\lotus\notes8\jvm\lib\axis\axis.jar'

值得注意的是，我使用的是基于 Eclipse 的 Java 编辑器，如果我使用传统的编辑器，则不会出现此问题。

我的脚本库关联了许多 JAR 文件，但是它们都没有通过似乎导致问题的路径包含在内。此外，它不可能是一些隐藏得很深的依赖关系，因为所有包含的 JAR 都是自定义构建的，而且它们都不是用户或需要 Axis。

我还做了一个测试，创建了一个新的库，没有拉入任何外部 JAR，并且发生了同样的错误。

事实证明，问题是由在我的本地 notes.ini 中使用“JavaUserClassesExt”引起的。我最近一直在使用依赖于 Axis 的 LN 客户端应用程序，安装过程的一部分包括将相关的 Axis 文件放入 jvm/lib/ext 中的自定义目录中，然后使用“JavaUserClassesExt”更新 ini 以包含这些文件启动JVM。

我猜这个问题现在才出现，因为我最近不得不将我的 LN 安装位置从上面指示的路径 (lotus\notes8) 更改为稍微不同的路径 (lotus\notes853)。我从原始安装位置复制了我的ini，这就是它仍然引用旧路径的原因。一旦我删除了对错误路径的引用，错误就清除了。

所以我可以理解发生了什么，JVM 试图在类路径上加载所有必需的文件，但由于无法再找到通过“JavaUserClassesExt”请求的文件而遇到问题。

我不明白为什么当我尝试在与 Axis 框架无关的完全不同的数据库中编辑脚本库时会引发此错误。如果尝试基于我的本地类路径导入与 Axis 相关的任何内容，我预计会出现编译错误，但是当库与 Axis 无关时抛出此错误对我来说似乎令人困惑和不正确。

正如我所提到的，这只发生在使用基于 Eclipse 的 Java 编辑器时，所以我认为这是该版本的编辑器的错误。

有没有人遇到过类似的事情？这是否会被归类为预期行为，或者任何人都可以确认这是否是一个错误？

我意识到这是一个非常边缘的案例问题，但会对任何见解感兴趣。

干杯，李

# php - IF 语句中的 HTML 无法正常工作

> ID：13453398
> 
> 赞同：2
> 
> 时间：2012-11-19T12:02:00.173
> 
> 标签：php, html, if-statement

所以我有以下代码：

```
<?php
$users_id = $_POST['users_id'];
    if ($users_id=="1");
    {
    ?>
        <td><select name="User">
        <option></option>
        <option>John</option>
        <option>Jack</option>
        </select></td>  
<?php
    }
    if ($users_id!=="1");
    {
    ?>      
        <td align="left"> <input type="text" name="User" /><br></td></tr>
<?php
    }
    ?> 
```

我只想显示一个表单（下拉或输入），但我总是得到它们，我无法弄清楚我的 if 语句有什么问题。请帮忙！感谢您的时间和精力！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T12:03:49.273

看起来您`!==`在不应该使用相同的运算符时使用了相同的运算符，因为我看到您`==`在另一个`if`语句中使用了相等性。

而且，更重要的是，您在`if`条件后面加上分号！这将在条件之后创建一个空语句，之后的`if`任何内容都将运行，无论它是否满足条件。

尝试改变

```
if ($users_id!=="1"); 
```

进入

```
if ($users_id!="1") 
```

和

```
if ($users_id=="1"); 
```

至

```
if ($users_id=="1") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T12:05:31.660

删除你的代码并粘贴这个......它肯定会工作

```
<?php
$user_id = (isset($_POST['users_id'])) ? $_POST['users_id'] : '';
if($user_id == 1){
?>
<td><select name="User">
<option></option>
<option>John</option>
<option>Jack</option>
</select></td>
<?php
} else {
?>
<td align="left"> <input type="text" name="User" /><br></td>
<?php
}
?>
</tr> 
```

**在您的代码中所做的更改** 完成了对 post 字段的验证，已删除；from if 条件，使用 if-else 代替 if-if，放置`</tr>`在所有处理之后，否则会返回可见错误

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T12:03:28.670

> if ($users_id!="1");

尝试这个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T12:04:13.007

从 if 行中删除分号并将第二个 if 条件更改为：

```
if ($users_id!="1") 
```

或使用以下语法：

```
if ($users_id=="1") {
    // select
} else {
   // input
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-19T12:04:24.383

而不是两个`if()`s，使用`if/else`块：

```
if( $users_id=="1" ) {

  // ... something

} else {

  // something else

} 
```

`===`除非您了解 和 之间的区别，否则`==`请不要使用`===`。请参阅此处的文档：[http ://www.php.net/manual/en/language.operators.comparison.php](http://www.php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-19T12:05:56.137

两个变化

1.  if条件后去掉分号

    一世`f ($users_id!="1")`

2.  将 !== 更改为 !=

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-19T12:04:49.493

删除 if 条件后存在的分号

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-19T12:07:35.647

请检查您的代码更改

```
if ($users_id!=="1"); 
```

至

```
if ($users_id!="1") 
```

也放弃 if(); 到 if() 并请阅读[If else](http://www.w3schools.com/php/php_if_else.asp)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-19T12:11:50.057

if ($users_id!=="1");//正确->if ($users_id!=="1")

```
<?php
$users_id = $_POST['users_id'];

    if ($users_id==1);
    {

     echo   "<td><select name='User'>
        <option></option>
        <option>John</option>
        <option>Jack</option>
        </select></td>";  

    }
    if($users_id!=1)
    {

        echo "<td align='left'> <input type='text' name='User' /><br></td></tr>";

    }
    ?> 
```

# ruby - Fnordmetric 基本身份验证

> ID：13453401
> 
> 赞同：0
> 
> 时间：2012-11-19T12:02:05.977
> 
> 标签：ruby, authentication

我想保护我的数据。最简单的方法是什么？

我在*瘦*服务器上使用*fnordmetric* ruby​​ gem 。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:58:33.840

我通过代码检查找到了答案。添加[了带有示例的 wiki 页面](https://github.com/paulasmuth/fnordmetric/wiki/Use-rack-middleware-in-web-app)

```
middleware = [ [ Rack::Auth::Basic, 'Restricted Area',
                                 lambda { |username, password| [username, password] = ['admin', 'admin'] ] ]
FnordMetric::Web.new(use: middleware) 
```*

# ant - 未找到 Ant 句柄目标

> ID：13453403
> 
> 赞同：1
> 
> 时间：2012-11-19T12:02:12.857
> 
> 标签：ant

我创建了一个 ant 项目，里面有一些目标。一个目标称为**info**，它显示所有可用的目标。此目标设置为默认值：

```
<project name="XXX" basedir="." default="info"> 
```

现在我希望在找不到目标的情况下调用这个目标：

```
Target "infp" does not exist in the project "XXX" 
```

我需要这个以防用户调用不存在的目标。然后我希望显示信息，以便他看到所有可用选项。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:41:14.740

ANT 不支持此功能。如果在命令行上没有指定目标，则调用“默认”目标。

相反，我建议让您的构建自我描述并向您的用户介绍 ANT 的**-p**选项。

# 例子

以下构建文件：

```
<project name="demo" default="welcome">

    <description>
    The purpose of this build file is to explain how one
    can make an ANT file self describing
    </description>

    <target name="welcome" description="Print a hello world message">
        <echo message="hello world"/>
    </target>

    <target name="do-somthing" description="Print a dummy message">
        <echo message="hello world"/>
    </target>

    <target name="do-somthing-silent">
        <echo message="hello world"/>
    </target>

</project> 
```

可以这样描述自己：

```
$ ant -p
Buildfile: /home/mark/build.xml

    The purpose of this build file is to explain how one 
    can make an ANT file self describing

Main targets:

 do-somthing  Print a dummy message
 welcome      Print a hello world message
Default target: welcome 
```

# java - 如何获取设备原始宽度和高度或实际屏幕宽度和高度？

> ID：13453407
> 
> 赞同：5
> 
> 时间：2012-11-19T12:02:36.853
> 
> 标签：java, android, android-layout, android-emulator

我正在尝试获取在 4.2 上运行的 Nexus 7 的实际屏幕宽度和高度。

我正在根据设备宽度和高度进行一些运行时计算，以调整按钮和一些 UI 元素的大小，因此它在所有设备中看起来都很合适。我的代码在所有 SDK 4.1 及更低版本中运行良好，但不适用于 4.2。

我正在使用以下代码来获取宽度和高度。

代码：1

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
mWidth = displaymetrics.widthPixels;
mHeight = displaymetrics.heightPixels; 
```

代码：2

```
Point size = new Point();
WindowManager w = getWindowManager();
w.getDefaultDisplay().getSize(size); 
mWidth = size.x;
mHeight = size.y; 
```

我也尝试过未记录的方法

代码：3

```
Display display = getWindowManager().getDefaultDisplay();
Method mGetRawW = Display.class.getMethod("getRawWidth");
Method mGetRawH = Display.class.getMethod("getRawHeight");
mWidth = (Integer) mGetRawW.invoke(display);
mHeight = (Integer) mGetRawH.invoke(display); 
```

但以上都不适用于在 4.2 上运行的 Nexus 7，它总是减去状态栏高度，我没有得到完整的高度。

我使用了一些方法来计算状态球棒的高度，但没有得到正确的值，

```
int statusBarHeight = Math.ceil(25 * context.getResources().getDisplayMetrics().density); 
```

和

```
Rect rectgle= new Rect();
Window window= getWindow();
window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
int StatusBarHeight= rectgle.top; 
```

是否有任何标准方法可以获取实际设备屏幕的高度和宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:04:51.707

尝试使用 API 17 的最后更改：

[http://developer.android.com/reference/android/view/Display.html#getRealSize(android.graphics.Point](http://developer.android.com/reference/android/view/Display.html#getRealSize(android.graphics.Point) )

> **public void getRealSize (Point outSize)**
> 在不减去任何窗口装饰或应用任何兼容性比例因子的情况下获取显示的实际尺寸。

如果这不起作用，您可以尝试：

[http://developer.android.com/reference/android/view/Display.html#getRealMetrics(android.util.DisplayMetrics](http://developer.android.com/reference/android/view/Display.html#getRealMetrics(android.util.DisplayMetrics) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-28T09:08:18.947

```
int height = getResources().getDisplayMetrics().heightPixels;
int width = getResources().getDisplayMetrics().widthPixels; 
```

height 表示设备的屏幕高度（以像素为单位），width 表示设备的屏幕宽度（以像素为单位）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-28T11:55:06.040

尝试这个

```
int width = 0;
int height =0;

    Display display = activity.getWindowManager().getDefaultDisplay();

    if (Build.VERSION.SDK_INT >= 13) {
        Point size = new Point();
        display.getSize(size);
        width = size.x;
        height = size.y;
    } else {
        width = display.getWidth();
        height = display.getHeight();
    } 
```

# c# - 从 Silverlight 应用程序更新查找字段 - CRM 2011

> ID：13453409
> 
> 赞同：0
> 
> 时间：2012-11-19T12:02:40.200
> 
> 标签：c#, javascript, silverlight, dynamics-crm-2011

我正在使用以下代码尝试从 silverlight 应用程序更新我的 CRM 2011 系统中的查找字段值：

```
try
{
    ma.my_ActionDetails = details;

    Guid userId = new Guid();
    foreach (SystemUser s in SystemUsers)
    {
        if (s.FullName.Equals(comboBox1.SelectedItem))
        {
            userId = s.SystemUserId;
        }
    }

    // Define eval statements for setting lookup to a value and null
    string setLookupJscript = @"Xrm.Page.getAttribute(""{0}"").setValue([ {{ id: ""{1:B}"", typename: ""{2}"", name: ""{3}"" }}])";
    string evalStatement = null;

    // Set the statement to be evaluated based upon the value of the id argument
    // Setting the lookup to a value 
    evalStatement = string.Format(setLookupJscript, "my_salesperson", userId, "my_memberaction", ma.my_SalesPerson.Name);

    HtmlPage.Window.Eval(evalStatement);

    _context.UpdateObject(ma);
    _context.BeginSaveChanges(OnUpdateAccountComplete, ma);
}
catch (SystemException se)
{
    _syncContext.Send(new SendOrPostCallback(showErrorDetails), se);
} 
```

但是，当我运行此代码时，它会生成以下错误：

在浏览器中：

```
'Xrm' is undefined 
```

从代码：

```
System.InvalidOperationException: [Common_MethodFailed] 
```

谁能解释这里发生了什么？

谢谢，

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:03:18.187

您需要在 CRM 表单的上下文中才能使用 Xrm 命名空间。你是从表单中运行的吗？

从[CRM SDK](http://msdn.microsoft.com/en-us/library/gg328358.aspx)：

> 如果您的 Silverlight Web 资源设计为在实体表单中查看，则该表单具有可用于访问上下文信息的 Xrm.Page.context 对象。
> 
> 如果您需要 Silverlight 应用程序出现在表单上下文之外，则必须配置 HTML Web 资源以通过添加对 ClientGlobalContext.js.aspx 页面的引用来提供此上下文信息。添加此引用后，您的 Silverlight 应用程序可以像在实体表单中一样访问上下文信息。以下示例显示如何从 Xrm.Page.context 对象调用 getServerUrl 函数。

```
private string serverUrl = "";
ScriptObject xrm = (ScriptObject)HtmlPage.Window.GetProperty("Xrm");
ScriptObject page = (ScriptObject)xrm.GetProperty("Page");
ScriptObject pageContext = (ScriptObject)page.GetProperty("context");
serverUrl = (string)pageContext.Invoke("getServerUrl"); 
```

# emulation - 在 Windows Phone 8 模拟器中模拟捏合手势

> ID：13453410
> 
> 赞同：6
> 
> 时间：2012-11-19T12:02:51.713
> 
> 标签：emulation, windows-phone, windows-phone-8, windows-phone-8-emulator

> **可能重复：**
> [如何在 Windows Phone 7 模拟器中模拟多点触控？](https://stackoverflow.com/questions/4751552/how-can-i-simulate-multi-touch-in-the-windows-phone-7-emulator)

我正在尝试模拟捏合手势，以便缩小地图，但我似乎无法弄清楚如何？！在我看来，这像是一个新手问题，但我检查过的所有地方都告诉我，模拟器右侧的工具栏中应该有一个捏合按钮。

![模拟器截图](../Images/f6ae8b2ccabefc0bbc9588779d9fb550.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T14:50:38.957

Windows Phone 模拟器仅支持多点触控设备的多点触控手势。您必须有一个屏幕或触摸板才能使用它。此外，还有关于使用两只鼠标的评论，并且在 codeplex [http://multitouchvista.codeplex.com](http://multitouchvista.codeplex.com)上有一个项目。

可以在此处找到有关使用 MultiTouchVista 在 Windows Phone 上模拟捏合手势的简短视频演示：http: [//vimeo.com/10330829](http://vimeo.com/10330829)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T14:37:02.697

一个不错的选择是购买其中一款便宜的安卓平板电脑并将其变成第二台显示器。然后你可以在模拟器中做触摸手势。此外，现在手机速度如此之快，以至于我经常只是在手机上调试并跳过模拟器。

# javascript - 淘汰赛：根据 observable 的值更改 css 类

> ID：13453413
> 
> 赞同：6
> 
> 时间：2012-11-19T12:02:57.737
> 
> 标签：javascript, css, knockout.js

我在可观察数组上使用 foreach：

```
<div id="mainRight" data-bind="foreach: notifications">
    <div class="statusRow">
        <div class="leftStatusCell">
            <div class="leftStatusCellColor" data-bind="css: availabilityCssClass($data.availability)"></div>
        </div>
        <div class="topRightStatusCell" data-bind="text: sip"></div>
        <div class="bottomtRightStatusCell ellipsisSingleline" data-bind="text: note"></div>
    </div>
</div> <!== end mainRight ==> 
```

如您所见，我将可用性的当前值传递给函数availabilityCssClass，该函数将该值与一些预定义的字符串进行比较。根据匹配的字符串，它返回一个类名。

```
self.availabilityCssClass = ko.computed(function (value) {
    var availability = value;
    if (availability === "Busy" || "DoNotDisturb" || "BeRightBack")
        return "leftStatusCellColorOrange";
    else if (availability === "Away" || "Offline")
        return "leftStatusCellColorRed";
    else
        return "leftStatusCellColorGreen";
}); 
```

这是我的模型。数据来自外部数据源。

```
function Notification(root, sip, availability, note) {
    var self = this;

    self.sip = ko.observable(sip);
    self.availability = ko.observable(availability);
    self.note = ko.observable(note);
};

self.notifications = ko.observableArray(); 
```

但是，它不能按原样工作。当计算函数没有被注释掉时，foreach 不会遍历数据并且 div 为空。但我可以看到 viewModel 不是空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:17:35.017

您不能以这种方式将值传递给计算。最好将此计算结果添加到`Notification`视图模型并使用`self.availability`属性：

```
function Notification(root, sip, availability, note) {
    var self = this;

    self.sip = ko.observable(sip);
    self.availability = ko.observable(availability);
    self.note = ko.observable(note);

    self.availabilityCssClass = ko.computed(function() {
        var availability = self.availability();

        if (["Busy", "DoNotDisturb", "BeRightBack"].indexOf(availability) != -1) return "leftStatusCellColorOrange";
        else if (["Away", "Offline"].indexOf(availability) != -1) return "leftStatusCellColorRed";
        else return "leftStatusCellColorGreen";
    });
}; 
```

你的`if`说法不正确，所以我修正了逻辑。这是工作小提琴：http: [//jsfiddle.net/vyshniakov/Jk7Fd/](http://jsfiddle.net/vyshniakov/Jk7Fd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:08:43.530

你只需要创建`availabilityCssClass`一个函数。正如您所写，它不是计算的可观察对象，因为它没有可观察的依赖项。

```
self.availabilityCssClass = function (value) {
    var availability = value;
    if (availability === "Busy" || "DoNotDisturb" || "BeRightBack")
        return "leftStatusCellColorOrange";
    else if (availability === "Away" || "Offline")
        return "leftStatusCellColorRed";
    else
        return "leftStatusCellColorGreen";
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:17:59.723

CSS 绑定需要一个对象字面量，其中 CSS 类的名称作为成员名称，值 true 或 false 取决于您要删除或添加类

```
data-bind="css: { 'css-class-name': true }" 
```

编辑：嗯，他们在 2.2 中更改了 css 绑定；）

# iphone - 当 UITextView 的大小增加时如何增加 UITextView 的字体大小

> ID：13453415
> 
> 赞同：2
> 
> 时间：2012-11-19T12:02:59.453
> 
> 标签：iphone, ios, uitextview, uifont

我正在开发一个应用程序，它具有`TextView`动态添加的功能，当我们拖动它时会增加和减小它的大小。

`TextView`我可以通过将' 内容大小设置为 ' 大小来根据字符数调整文本视图`TextView`大小。

拖动`TextView`角时，我增加了`TextView`. 我可以成功地做到这一点。

当我拖动`TextView`的角时，它的大小在增加，但字体大小没有增加。有没有办法在大小增加`TextView`时自动增加或减少字体大小`TextView`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:19:09.383

试试下面的代码希望它有帮助。我从[链接中找到。](http://derekneely.com/2011/04/size-to-fit-text-in-uitextview-iphone/)

```
#define kDefaultFontSize 24.0

if (myTextView.contentSize.height > myTextView.frame.size.height) {
    int fontIncrement = 1;
    while (myTextView.contentSize.height > myTextView.frame.size.height) {
        myTextView.font = [UIFont systemFontOfSize:kDefaultFontSize-fontIncrement];
        fontIncrement++;
    }
} 
```

# ruby-on-rails - 为什么我在运行 rake db:migrate 时收到错误“发生错误，此迁移和所有后续迁移已取消：”

> ID：13453416
> 
> 赞同：0
> 
> 时间：2012-11-19T12:03:01.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已按照本指南[Using Models In Your Migrations](http://guides.rubyonrails.org/migrations.html#using-models-in-your-migrations)进行操作。现在我想在`suspect`Question 表中添加一个名为 type boolean 的新列，它的默认值为 is `false`，我也想更新已创建的记录。这是我的迁移文件：

```
class AddSuspectToQuestions < ActiveRecord::Migration
  class Question < ActiveRecord::Base
  end

  def change
    add_column :questions, :suspect, :boolean, default: false
    Question.reset_column_information
    Question.all.each do |question|
      question.update_attributes!(suspect: false)
    end
  end
end 
```

但是当我运行时`rake db:migrate`，它有错误：

```
==  AddSuspectToQuestions: migrating ==========================================
-- add_column(:questions, :suspect, :boolean, {:default=>false})
   -> 0.3782s
rake aborted!
An error has occurred, this and all later migrations canceled:

Can't mass-assign protected attributes: suspect 
```

我认为它需要`attr_accesible :suspect`，所以我在 Question 模型中添加了它，但是当我再次运行 migrate 时仍然有同样的错误。我也设置了这个`application.rb`：

```
config.active_record.whitelist_attributes = true 
```

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:15:18.403

它不起作用，因为您在迁移中覆盖了问题类。

消除

```
class Question < ActiveRecord::Base
end 
```

再试一次。

# php - 多上传图片

> ID：13453417
> 
> 赞同：1
> 
> 时间：2012-11-19T12:03:07.750
> 
> 标签：php, codeigniter

我想通过codeigniter多次上传图像并从以下库中使用，我的问题是在选择几个（多）图像后它在输出（php）中只给我一个图像，例如：

如果我选择多图像为：

> 图片1.gif | 图像2.gif | 图像3.gif

它只是上传：

> 图像3.gif

同时我使用控制功能‍‍<code>foreach上传图片，没问题。

```
<input type="file" name="userfile[]" >

<?php
if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Multi_upload
{
    function Multi_upload()
    {
        //      $CI =& get_instance();
    }

    function go_upload($field = 'userfile')
    {
        $CI =& get_instance();
        // Is $_FILES[$field] set? If not, no reason to continue.
        if (!isset($_FILES[$field]['name'][0])) {
            $CI->upload->set_error('upload_no_file_selected');
            return FALSE;
        } else {
            $num_files    = count($_FILES[$field]['name']) - 1;
            $file_list    = array();
            $error_hold   = array();
            $error_upload = FALSE;
        }

        // Is the upload path valid?
        if (!$CI->upload->validate_upload_path()) {
            // errors will already be set by validate_upload_path() so just return FALSE
            return FALSE;
        }

        for ($i = 0; $i < $num_files; $i++) {
            //            $fname = $_FILES[$field]['name'][$i];
            //            echo "$fname\n\n<br><br>\n\n";

            $error_hold[$i] = FALSE;

            // Was the file able to be uploaded? If not, determine the reason why.
            if (!is_uploaded_file($_FILES[$field]['tmp_name'][$i])) {
                $error = (!isset($_FILES[$field]['error'][$i])) ? 4 : $_FILES[$field]['error'][$i];

                switch ($error) {
                    case 1: // UPLOAD_ERR_INI_SIZE
                        $error_hold[$i] = 'upload_file_exceeds_limit';
                        break;
                    case 2: // UPLOAD_ERR_FORM_SIZE
                        $error_hold[$i] = 'upload_file_exceeds_form_limit';
                        break;
                    case 3: // UPLOAD_ERR_PARTIAL
                        $error_hold[$i] = 'upload_file_partial';
                        break;
                    case 4: // UPLOAD_ERR_NO_FILE
                        $error_hold[$i] = 'upload_no_file_selected';
                        break;
                    case 6: // UPLOAD_ERR_NO_TMP_DIR
                        $error_hold[$i] = 'upload_no_temp_directory';
                        break;
                    case 7: // UPLOAD_ERR_CANT_WRITE
                        $error_hold[$i] = 'upload_unable_to_write_file';
                        break;
                    case 8: // UPLOAD_ERR_EXTENSION
                        $error_hold[$i] = 'upload_stopped_by_extension';
                        break;
                    default:
                        $error_hold[$i] = 'upload_no_file_selected';
                        break;
                }

                return FALSE;
            }

            // Set the uploaded data as class variables
            $CI->upload->file_temp = $_FILES[$field]['tmp_name'][$i];
            $CI->upload->file_name = $CI->upload->file_name = $_FILES[$field]['name'][$i];
            $CI->upload->file_size = $_FILES[$field]['size'][$i];
            $CI->upload->file_type = preg_replace("/^(.+?);.*$/", "\\1", $_FILES[$field]['type'][$i]);
            $CI->upload->file_type = strtolower($CI->upload->file_type);
            $CI->upload->file_ext  = $CI->upload->get_extension($_FILES[$field]['name'][$i]);

            // Convert the file size to kilobytes
            if ($CI->upload->file_size > 0) {
                $CI->upload->file_size = round($CI->upload->file_size / 1024, 2);
            }

            // Is the file type allowed to be uploaded?
            if (!$CI->upload->is_allowed_filetype()) {
                $error_hold[$i] = 'upload_invalid_filetype';
            }

            // Is the file size within the allowed maximum?
            if (!$CI->upload->is_allowed_filesize()) {
                $error_hold[$i] = 'upload_invalid_filesize';
            }

            // Are the image dimensions within the allowed size?
            // Note: This can fail if the server has an open_basdir restriction.
            if (!$CI->upload->is_allowed_dimensions()) {
                $error_hold[$i] = 'upload_invalid_dimensions';
            }

            // Sanitize the file name for security
            $CI->upload->file_name = $CI->upload->clean_file_name($CI->upload->file_name);

            // Remove white spaces in the name
            if ($CI->upload->remove_spaces == TRUE) {
                $CI->upload->file_name = preg_replace("/\s+/", "_", $CI->upload->file_name);
            }

            /*
             * Validate the file name
             * This function appends an number onto the end of
             * the file if one with the same name already exists.
             * If it returns false there was a problem.
             */
            $CI->upload->orig_name = $CI->upload->file_name;

            if ($CI->upload->overwrite == FALSE) {
                $CI->upload->file_name = $CI->upload->set_filename($CI->upload->upload_path, $CI->upload->file_name);

                if ($CI->upload->file_name === FALSE) {
                    $error_hold[$i] = TRUE;
                }
            }

            /*
             * Move the file to the final destination
             * To deal with different server configurations
             * we'll attempt to use copy() first.  If that fails
             * we'll use move_uploaded_file().  One of the two should
             * reliably work in most environments
             */
            if (!@copy($CI->upload->file_temp, $CI->upload->upload_path . $CI->upload->file_name)) {
                if (!@move_uploaded_file($CI->upload->file_temp, $CI->upload->upload_path . $CI->upload->file_name)) {
                    $error_hold[$i] = 'upload_destination_error';
                }
            }

            /*
             * Run the file through the XSS hacking filter
             * This helps prevent malicious code from being
             * embedded within a file.  Scripts can easily
             * be disguised as images or other file types.
             */
            if ($CI->upload->xss_clean == TRUE) {
                $CI->upload->do_xss_clean();
            }

            if ($error_hold[$i]) {
                $error_upload = TRUE;

                //                echo $error_hold[$i];
            } else {
                if ($imageVar = $this->multiple_image_properties($CI->upload->upload_path . $CI->upload->file_name)) {
                    $file_list[] = array(
                        'name' => $CI->upload->file_name,
                        'file' => $CI->upload->upload_path . $CI->upload->file_name,
                        'size' => $CI->upload->file_size,
                        'ext' => $CI->upload->file_ext,
                        'image_type' => $imageVar->image_type,
                        'height' => $imageVar->height,
                        'width' => $imageVar->width
                    );
                } else {
                    $file_list[] = array(
                        'name' => $CI->upload->file_name,
                        'file' => $CI->upload->upload_path . $CI->upload->file_name,
                        'size' => $CI->upload->file_size,
                        'type' => $CI->upload->file_type,
                        'ext' => $CI->upload->file_ext
                    );
                }
            }

            // For debugging

            //if (strlen($error_hold[$i]) > 1) {
            //print_r($error_hold);
            //}

        } // end for loop

        // Add error display for individual files        
        if ($error_upload) {
            $this->set_error($error_hold);
            return FALSE;
        } else {
            return $file_list;
        }
    }

    // --------------------------------------------------------------------

    /**
     * Set Image Properties
     *
     * Uses GD to determine the width/height/type of image
     *
     * @access    public
     * @param    string
     * @return    void
     */
    function multiple_image_properties($path = '')
    {
        $CI =& get_instance();
        if (!$CI->upload->is_image()) {
            return false;
        }

        if (function_exists('getimagesize')) {
            if (FALSE !== ($D = @getimagesize($path))) {
                $types = array(
                    1 => 'gif',
                    2 => 'jpeg',
                    3 => 'png'
                );

                $image->width      = $D['0'];
                $image->height     = $D['1'];
                $image->image_type = (!isset($types[$D['2']])) ? 'unknown' : $types[$D['2']];

                return $image;
            }
        }
    }

    // --------------------------------------------------------------------

    /**
     * Set an error message
     *
     * @access    public
     * @param    string
     * @return    void
     */
    function set_error($msg)
    {
        $CI =& get_instance();
        $CI->lang->load('upload');

        if (is_array($msg)) {
            foreach ($msg as $val) {
                $msg               = ($CI->lang->line($val) == FALSE) ? $val : $CI->lang->line($val);
                $this->error_msg[] = $msg;
                log_message('error', $msg);
            }
        } else {
            $msg               = ($CI->lang->line($msg) == FALSE) ? $msg : $CI->lang->line($msg);
            $this->error_msg[] = $msg;
            log_message('error', $msg);
        }
    }

    // --------------------------------------------------------------------
}
?> 
```

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:06:52.707

不需要任何额外库的简洁方法是[这段代码](https://stackoverflow.com/questions/9903619/codeigniter-html5-trying-to-upload-multiple-images-at-once/9903681#9903681)和`multiple=""`属性。

不要低估通过 UI 一次选择多个文件的舒适度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:12:58.723

请看下面的代码我认为你想要这个。

每次要上传新文件时，都需要为每个文件初始化配置到**$this->upload->initialize($config);**

```
// Has the form been posted?
if (isset($_POST['submit']))
{
    // Load the library - no config specified here
    $this->load->library('upload');

    // Check if there was a file uploaded - there are other ways to
    // check this such as checking the 'error' for the file - if error
    // is 0, you are good to code
    if (!empty($_FILES['userfile']['name']))
    {
        // Specify configuration for File 1
        $config['upload_path'] = 'uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';      

        // Initialize config for File 1
        $this->upload->initialize($config);

        // Upload file 1
        if ($this->upload->do_upload('userfile'))
        {
            $data = $this->upload->data();
        }
        else
        {
            echo $this->upload->display_errors();
        }

    }

    // Do we have a second file?
    if (!empty($_FILES['userfile1']['name']))
    {
        // Config for File 2 - can be completely different to file 1's config
        // or if you want to stick with config for file 1, do nothing!
        $config['upload_path'] = 'uploads/dir2/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';

        // Initialize the new config
        $this->upload->initialize($config);

        // Upload the second file
        if ($this->upload->do_upload('userfile1'))
        {
            $data = $this->upload->data();
        }
        else
        {
            echo $this->upload->display_errors();
        }

    }
}
else
{
    $this->load->view("upload_form");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:30:09.370

您还应该尝试使用这个出色的库来实现多上传功能。惊人的界面和快速的性能。

[http://www.plupload.com/](http://www.plupload.com/)

# google-chrome-extension - Chrome 扩展程序是否可以访问由特定域创建的 IndexedDB 数据库？

> ID：13453418
> 
> 赞同：13
> 
> 时间：2012-11-19T12:03:11.147
> 
> 标签：google-chrome-extension, indexeddb

如果[http://example.com/](http://example.com/)创建了 IndexedDB 数据库，Chrome 扩展程序（用于 以外的域`example.com`）是否可以打开和查询该数据库？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T14:14:06.753

不，你不能这样做。数据存储为沙盒[http://www.html5rocks.com/en/tutorials/offline/storage/](http://www.html5rocks.com/en/tutorials/offline/storage/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-01-31T11:50:58.793

是的，可以借助内容脚本通过 chrome 扩展访问 IndexedDB。内容脚本可以访问您在 manifest.json 文件中指定的域的 indexedDB 存储。

有关更多信息，请在此处查看： [https ://stackoverflow.com/a/60002682/9131807](https://stackoverflow.com/a/60002682/9131807)

# c++ - 是否可以制作非 POD 类型的流？

> ID：13453434
> 
> 赞同：3
> 
> 时间：2012-11-19T12:03:45.717
> 
> 标签：c++, iostream, streambuf

在 C++ 中，我需要使用我自己的`std::basic_streambuf<Type>`. 是否需要标准库来按预期构造/销毁对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:52:06.640

这是可能的，但您可能需要实现一些缺少的 iostream、char_traits、成员/朋友函数。ostream::write 等一些基本功能可能开箱即用。

# git - git 从特定分支拉到特定分支

> ID：13453436
> 
> 赞同：4
> 
> 时间：2012-11-19T12:03:56.980
> 
> 标签：git

我们使用 github 存储库作为我们的“中央存储库”。

我们计划让多个编码人员以下列方式在登台服务器上工作：

1.  编码人员在其本地存储库的单独分支上工作；
2.  编码人员将更改推送到 github；接着
3.  编码人员将更新从 github 拉到服务器 repo

因此，在实践中，在第 3 步中，编码人员将在暂存存储库上运行以下命令：

`git checkout coderA-updates`
`git pull origin coderA-updates`
`git checkout master`

有没有办法无需先更新特定分支`git checkout`？

* * *

TLDR：你如何在不`git pull origin remoteBranch localBranch`切换活动分支的情况下做一些事情？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:19:05.580

```
git checkout branchB
git pull origin branchA 
```

这会获取发生的更改`branchA`并将它们合并到本地`branchB`。

`git help merge`说：

> 将来自命名提交的更改（从它们的历史从当前分支分歧的时间开始）合并到当前分支中。

所以，我相信如果不使其中一个成为当前分支，就不可能与 2 个分支一起工作。

您可以`git stash`在当前活动的分支中使用来保存更改，然后 checkout`branchB`和 pull `branchA`。合并完成后，签出存储更改的分支并使用`git stash apply`.

或者您可以在结帐/拉取之前简单地提交更改。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T06:10:05.810

使用普通的`fetch`：

```
git fetch origin remoteBranch:localBranch 
```

默认情况下，这仅适用于快进更改（请参阅[文档](http://git-scm.com/docs/git-fetch)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:14:51.833

来自`git help pull`：

> **概要**
> 
> ```
>  git pull [options] [<repository> [<refspec>...]] 
> ```
> 
> **描述**
> 
> [...]
> 
> 可以命名任意远程引用（例如，标签的名称），甚至是具有相应远程跟踪分支的引用集合（例如，refs/heads/ *:refs/remotes/origin/*），但通常是名称远程存储库中的一个分支。

所以，你可以做`git pull remoteBranch:localBranch`，它会工作。

# javascript - 从 jquery 的 .each 内部调用父级父级中的函数

> ID：13453437
> 
> 赞同：0
> 
> 时间：2012-11-19T12:03:59.607
> 
> 标签：javascript, jquery, scope, each

我在 javascript 中创建了一个名为 QuoteProductService() 的“类”，见下文。我在原型中添加了两个函数，现在，我试图从另一个函数 (getFakeQuoteProducts) 内的 jquery $.each 中调用其中一个函数 (getQuoteProductFromArray)。这行不通。我尝试添加“this.”，但这也不起作用，因为 .each 中的“this”指的是循环中的当前元素。

我该怎么做？

```
function QuoteProductService() {

}

QuoteProductService.prototype.getQuoteProductFromArray =  function(quoteproductarray, quoteproductid){
     var founditem=null;
     // do stuff
    return founditem;
}

QuoteProductService.prototype.getFakeQuoteProducts = function(){
    // do something to fill the mappedQuoteProducts array
    $.each(mappedQuoteProducts, function (index, quoteproduct) {
        if (quoteproduct!=-null) {
            if (quoteproduct.parentid != "") {
                // this is where it goes wrong :
                var parent = getQuoteProductFromArray(mappedQuoteProducts, quoteproduct.parentid);
                if (parent != null) {
                    parent.attachChild(quoteproduct);
                }
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:07:30.293

在调用之前保存对您的`QuoteProductService`实例的引用`each`

```
QuoteProductService.prototype.getFakeQuoteProducts = function(){
  var _this = this;
  // do something to fill the mappedQuoteProducts array
  $.each(mappedQuoteProducts, function (index, quoteproduct) {
      if (quoteproduct!=-null) {
          if (quoteproduct.parentid != "") {
              // this is where it goes wrong :
              var parent = _this.getQuoteProductFromFlatArray(mappedQuoteProducts, quoteproduct.parentid);
              if (parent != null) {
                  parent.attachChild(quoteproduct);
              }
          }
       }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:07:37.913

添加`var self = this;`到`getFakeQuoteProducts`函数的开头。然后`getQuoteProductFromFlatArray`像这样调用：`self.getQuoteProductFromFlatArray`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:08:55.453

首先，您提供了错误的方法名称 -`getQuoteProductFromFlatArray`而不是`getQuoteProductFromArray`. 其次，在 JS 中，您必须为实例方法提供范围。实现这一点的最简单方法是将`this`引用存储到其他一些私有变量中。请参见下面的示例。

```
function QuoteProductService() {

}

QuoteProductService.prototype.getQuoteProductFromArray =  function(quoteproductarray, quoteproductid){
     var founditem=null;
     // do stuff
    return founditem;
}

QuoteProductService.prototype.getFakeQuoteProducts = function(){
    var me = this; // store this into me

    // do something to fill the mappedQuoteProducts array
    $.each(mappedQuoteProducts, function (index, quoteproduct) {
        // this === me will return false
        if (quoteproduct!=-null) {
            if (quoteproduct.parentid != "") {
                // this is where it goes wrong :
                var parent = me.getQuoteProductFromArray(mappedQuoteProducts, quoteproduct.parentid);
                if (parent != null) {
                    parent.attachChild(quoteproduct);
                }
            }
        }
    });
} 
```

# git - git clone --bare / fetch

> ID：13453440
> 
> 赞同：8
> 
> 时间：2012-11-19T12:04:11.817
> 
> 标签：git

我有一个历史悠久而奇怪的 git 存储库。我不知道开发人员对这个存储库做了什么，也无法控制他们现在用它做什么。

但我需要克隆这个存储库（用于 redmine 集成）并定期获取所有更改。

我该怎么办：

```
git clone --bare git@git.server.com:/opt/git/repo
cd repo.git
git log 
```

现在我可以看到所有提交。美好的。

接下来，开发人员在主存储库中进行提交，我想获取所有更改（所有分支、标签等）：

```
> git fetch --all 
Fetching origin
remote: Counting objects: 18, done.
remote: Compressing objects: 100% (14/14), done.
remote: Total 14 (delta 5), reused 0 (delta 0)
Unpacking objects: 100% (14/14), done.
From git.gmcs.ru:/opt/git/ecco
 * branch            HEAD       -> FETCH_HEAD 
```

但是如果询问提交历史，我没有看到在主存储库中进行的最后一次提交。为什么 ？

如果我发布的信息不足，我准备为您提供所有需要的信息。

提前致谢。

**更新**

这是原始存储库中的一个分支信息：

```
git branch -a
  one
  test
* master
  release 
```

这是克隆存储库中的分支信息：

```
git branch -a
  one
  test
* master
  release 
```

我可以在原始存储库的主分支中看到最后一次提交，但在克隆存储库的主分支中找不到它们。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-27T01:52:24.170

要将更多更新获取到裸仓库中，我会：

```
git config remote.origin.fetch 'refs/heads/*:refs/heads/*' 
```

然后我可以这样做：

```
git fetch 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T12:16:04.423

你应该使用`git pull`

或`git merge`在 fetch 之后运行以获取获取的更改

如果您有一个裸存储库，则无法进行拉取，因为拉取想要与 HEAD 合并，而裸存储库没有。

要更新裸存储库，您可以将其添加`remote`到非裸存储库并推送到它。

但我认为`--mirror`，而不是按`--bare`原样为你工作。

> 与 --bare 相比，--mirror 不仅将源的本地分支映射到目标的本地分支，它还映射所有 refs（包括远程分支、注释等）并设置 refspec 配置以覆盖所有这些 refs通过目标存储库中的 git 远程更新。

然后您可以使用`git remote update`更新镜像存储库

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-01T11:45:57.133

要定期获取您的裸存储库，请先配置

```
git config remote.origin.fetch "+*:*" 
```

然后简单地运行

```
git fetch --prune 
```

获取*所有*更改，包括标签、新分支甚至分支删除（选项`--prune`）。

*   还请注意上述命令中的双引号 ( `"`) 以保护 asterix ( `*`) 不被您的 shell 解释。
*   需要加号以允许非快进更新。如果您想备份遥控器的当前状态，这可能是您的意图。
*   注意：使用此配置不会获取标记删除。

另请参阅[https://stackoverflow.com/a/33461528/4138912](https://stackoverflow.com/a/33461528/4138912)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T13:03:31.143

您可以使用 更新`HEAD`您的裸存储库`git symbolic-ref`，例如将其指向`master`远程分支`origin`

```
$ git symbolic-ref HEAD refs/remotes/origin/master 
```

如果您用于`git fetch`更新遥控器，它将更新例如`origin/master`. 所缺少的只是重新指向克隆的`HEAD`.

# java - 两个看似相等的字符串不相等

> ID：13453443
> 
> 赞同：0
> 
> 时间：2012-11-19T12:04:21.867
> 
> 标签：java, android, string, if-statement, equals

我有一段代码根据已选择的所需输入和输出更改参数的值。因此，在下面的示例中，我计算球体的体积，然后根据用户用于输入的单位和用户为输出选择的单位，相应地操纵数字。

我的问题是，我所有的 if 语句都返回 false，并且无论选择什么，数字 10（来自 else）都会出现。我已经打印出 inputPref 和 outputPref 的值，它们看起来完全等于“mm”和“cubic cm”（例如），但仍然不会被 if 语句捕获。

有什么明显的错误吗？如果有帮助，则从共享首选项中加载两个变量“inputPref”和“outputPref”！

```
double volumeBase = 4 * piDouble * radius * radius * radius / 3;

                double volume;
                if(inputPref.equals("mm") || outputPref.equals("cubic cm"))
                {
                    volume = volumeBase / 1000;
                }
                if(inputPref.equals("mm") || outputPref.equals("cubic metres"))
                {
                    volume = volumeBase / 1000000000;
                }
                if(inputPref.equals("cm") || outputPref.equals("cubic mm"))
                {
                    volume = volumeBase * 1000;
                }
                if(inputPref.equals("cm") || outputPref.equals("cubic metres"))
                {
                    volume = volumeBase / 1000000;
                }
                if(inputPref.equals("metres") || outputPref.equals("cubic mm"))
                {
                    volume = volumeBase * 1000000000;
                }
                if(inputPref.equals("metres") || outputPref.equals("cubic cm"))
                {
                    volume = volumeBase * 1000000;
                }
                else
                {
                    volume = 10;
                } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T12:06:08.230

您的所有`if`陈述（第一个除外）都应该是`else if`陈述，因此它只从您的所有选项中选择 1 个。

就目前而言，您的代码可能会在`if`早期评估一个语句，但它会在最后被最后一个覆盖`if-else`，这几乎总是会返回`10`。

正如评论中所指出的，您可能还打算使用`&&`而不是，`||`以便在每个or语句中的*两个*条件都匹配时运行代码。您也可以考虑使用而不是，以便用户输入的大小写无关紧要。`if``else if``equalsIgnoreCase()``equals()`

它应该是...

```
double volumeBase = 4 * piDouble * radius * radius * radius / 3;

double volume;
if(inputPref.equalsIgnoreCase("mm") && outputPref.equalsIgnoreCase("cubic cm")){
    volume = volumeBase / 1000;
}
else if(inputPref.equalsIgnoreCase("mm") && outputPref.equalsIgnoreCase("cubic metres")){
    volume = volumeBase / 1000000000;
}
else if(inputPref.equalsIgnoreCase("cm") && outputPref.equalsIgnoreCase("cubic mm")){
    volume = volumeBase * 1000;
}
else if(inputPref.equalsIgnoreCase("cm") && outputPref.equalsIgnoreCase("cubic metres")){
    volume = volumeBase / 1000000;
}
else if(inputPref.equalsIgnoreCase("metres") && outputPref.equalsIgnoreCase("cubic mm")){
    volume = volumeBase * 1000000000;
}
else if(inputPref.equalsIgnoreCase("metres") && outputPref.equalsIgnoreCase("cubic cm")){
    volume = volumeBase * 1000000;
}
else {
    volume = 10;
} 
```

如果仍然无法正常工作，则可能是您正在读取用户输入的代码存在问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T12:06:11.500

你`else`最后会将音量设置为`10`如果`inputPref`不是`metres`，或者`cubic cm`因为只有你的**最后一个** `if`与那个有关`else`。如果你把`else`前面的每一个都放在前面`if`，它可能会像你期望的那样工作得更多。您还有一些重复项（您要检查`mm`不止一次）。

例如（但另见下文）：

```
double volume;
if(inputPref.equals("mm") || outputPref.equals("cubic cm"))
{
    volume = volumeBase / 1000;
}
// v--- Note the `else`
else if(inputPref.equals("mm") || outputPref.equals("cubic metres"))
{
    volume = volumeBase / 1000000000;
}
// ... 
```

此外，正如[Lews Therin](https://stackoverflow.com/a/13453471/157247)所指出的，我怀疑你想要`&&`每一对，例如：

```
// here -------------------vv
if (inputPref.equals("mm") && outputPref.equals("cubic cm")) 
```

不是

```
if (inputPref.equals("mm") || outputPref.equals("cubic cm")) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-19T12:06:27.893

我认为您想使用`else if`'s 并在您的条件下使用 && 而不是 ||

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T12:09:40.773

我会扔掉字符串，并为这种代码使用枚举......

```
public enum LengthUnit {
  M,
  CM,
  MM
}

public enum VolumeUnit {
  M3,
  CM3,
  MM3
} 
```

您甚至可以将转换率放在类似单位之间，例如[TimeUnit](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html)

优点：

*   没有错字，没有谜团
*   更快

缺点：

*   如果需要扩展，需要一些努力来维护。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T12:06:34.497

可能您的最后一个**if****失败**，因此在**else中将****卷**分配为10 **，**注意**：** else 仅适用于最后一个 if。使用 else-if 代替所有的 if

 ****```
if(cond){

}
else if(cond){

}
else{

} 
```****

# django - 无法导入名称管理员

> ID：13453446
> 
> 赞同：1
> 
> 时间：2012-11-19T12:04:43.130
> 
> 标签：django, django-models, django-admin

我是 Django 的新手。我正在尝试创建基本的管理面板。当我更改 urls.py 文件并将 url(r'^admin/', include(admin.site.urls)), 放入模式时，它给出了如下错误：

```
Request Method: GET return      
Request URL:    http://127.0.0.1:8000/    
Django Version: 1.4     
Exception Type: ImportError     
Exception Value:cannot import name admin    
Exception Location:/home/ulascan/Desktop/projects/purple/purple/urls.py in <module>, line 1     
Python Executable:  /usr/bin/python     
Python Version: 2.7.3     
Python Path:        
['/home/ulascan/Desktop/projects/purple',    
 '/usr/lib/python2.7',    
 '/usr/lib/python2.7/plat-linux2'      
 ...
 ...] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:24:46.993

确保在你的`settings.py`你有`django.contrib.admin`，**未注释**的`INSTALLED_APPS`。并检查您的`urls.py`:

```
from django.contrib import admin
admin.autodiscover() 
```

# r - 根据另一个向量中的值填充一个向量中的值

> ID：13453447
> 
> 赞同：0
> 
> 时间：2012-11-19T12:04:43.063
> 
> 标签：r

我有两个具有两个不同维度的数据框：

1：

```
head(x)
   Year GDP_deflator
1  1825           NA
2  1826           NA
3  1827           NA
4  1828           NA
5  1829           NA
6  1829           NA
7  1830           NA
8  1830           NA
9  1830           NA
10 1831           NA

dim(x)
  1733    2 
```

2：

```
head(dataDef)
   Year GDP_deflator
1  1825     1.788002
2  1826     1.884325
3  1827     2.016997
4  1828     1.802907
5  1829     1.781999
6  1830     1.866437
7  1831     1.960316
8  1832     2.029601
9  1833     1.880957
10 1834     1.845750

dim(dataDef)
 101   2 
```

我想将列中的值替换`dataDef$GDP_deflator`为以`x$GDP_deflator`列为条件的`Year`列。换句话说，我希望答案是：

```
head (x)

   Year GDP_deflator
1  1825           1.788002
2  1826           1.884325
3  1827           2.016997
4  1828           1.802907
5  1829           1.781999
6  1829           1.781999
7  1830           1.866437
8  1830           1.866437
9  1830           1.866437
10 1831           1.960316 
```

所以`repeating`年份（即 1830 年）得到相同的值，`1.866437`. 有什么建议么？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:23:32.737

你想要`merge`两个data.frames。这是一个多对一的合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:28:20.650

一种可能性是使用`match`：

```
x$GDP_deflator <- dataDef$GDP_deflator[match(x$Year, dataDef$Year)] 
```

# cakephp - 带有下拉菜单的 CakeDC 搜索插件

> ID：13453449
> 
> 赞同：0
> 
> 时间：2012-11-19T12:05:08.713
> 
> 标签：cakephp

我想添加一个用于使用 CakeDC 搜索插件进行搜索的选择框。IE：

```
<select name="field">
    <option value="email">Search By Email</option>
    <option value="first_name">Search By First Name</option>
</select> 
```

目前我的观点是：

```
echo $this->Form->create('User', array(
    'url' => array_merge(array('action' => 'index'), $this->params['pass'])
));
echo $this->Form->input('email', array('div' => false, 'empty' => true)); 
echo $this->Form->input('first_name', array('div' => false, 'empty' => true)); 
```

这种方式效果很好，但我想避免使用多个输入框并使用选择框简化它。我可以努力（从选择框中获取值并将其与输入框中的值结合起来），但必须有另一种方法来做到这一点......

这是我的用户模块：

```
public $filterArgs = array(
    'email' => array('type' => 'like'),
    'first_name' => array('type' => 'like')
); 
```

这是我的控制器：

```
public function index() {   
    $this->Prg->commonProcess();
    $this->paginate['conditions'] = $this->User->parseCriteria($this->passedArgs);
    $this->set('users', $this->paginate());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:20:21.677

我想你在找

```
echo $this->Form->input('search', array('div' => false, 'empty' => true)); 
```

和

```
public $filterArgs = array(
    'search' => array('type' => 'like', 'field'=>array('email', 'first_name')),
); 
```

和

```
public $presetVars = true; 
```

但是你会失去两个输入的“与”，而支持一个或（这不太强大）。如果这对你来说没问题，那就是这样。

# jquery - app.launchURL('http://www.google.com',false); 不能在铬中工作

> ID：13453451
> 
> 赞同：0
> 
> 时间：2012-11-19T12:05:28.370
> 
> 标签：jquery, google-chrome, pdf-generation, itextsharp

我有一个包含下拉列表的pdf。这`pdf`显示在浏览器上。从下拉列表中选择任何值时，我需要将浏览器重定向到`http://www.google.com`. 我已经用过`iTextSharp`这个了。

为重定向编写的代码是 app.launchURL('http://www.google.com',false);

*这在IE*和*Firefox*中按预期工作，但在*Chrome*中没有，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:30:36.917

您可以尝试禁用 Chrome PDF 查看器并改用 Adob​​e Reader 插件。

要禁用 Chrome PDF 查看器，请转到新 Chrome 选项卡中的 chrome://plugins/，搜索插件，然后单击禁用。在同一个列表中，您应该找到必须启用的 Adob​​e Reader 插件（或任何其他 PDF 查看器插件，如 Foxit Reader 插件）。

然后您应该能够关注 PDF 文档链接。

# java - 将密钥发送到另一个应用程序

> ID：13453460
> 
> 赞同：0
> 
> 时间：2012-11-19T12:05:55.050
> 
> 标签：java, blackberry

我想编写一个应用程序（使用 java 用于黑莓手机），它可以自动将密钥发送到另一个应用程序。它类似于直接键入该应用程序。我发现 ShortcutMe 做得很好。有没有人知道如何做到这一点。帮我！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:52:26.960

假设您与其他应用程序的供应商没有任何关系，或者事先知道您将向哪个应用程序发送关键事件，您将不得不使用[事件注入 API](http://docs.blackberry.com/en/developers/deliverables/11958/Event_injection_808536_11.jsp)。

# c# - 搜索数据库表中的条目时出现 NullReferenceException 错误

> ID：13453467
> 
> 赞同：5
> 
> 时间：2012-11-19T12:06:09.027
> 
> 标签：c#

我正在开发一个相对简单的 C# 项目，该项目通过 OleDb 将 Access 数据库与各种功能（例如添加、删除和编辑记录）连接起来。现在，在尝试实现数据库搜索之前，一切都运行良好。

以下行（在搜索框代码中）在调试期间引发异常，但我不确定导致它中断的实际上是什么空值。

```
ReturnedResults = DBDataSet.Tables["Movies"].Select("Title like '%" + Search + "%'"); 
```

所以目标是搜索数据库中的“电影”表，并根据用户的输入（存储在“搜索”字符串中）查找电影。

搜索框的代码可以在下面找到，数据库初始化和连接在底部提供。

```
private void SearchTextBox_Changed(object sender, EventArgs e)
{
  string SearchString = SearchTextBox.Text.ToString();
  int Results = 0;
  DataRow[] ReturnedResults;

  ReturnedResults = DataSet.Tables["Movies"].Select("Title like '%" + SearchString + "%'");
  Results = ReturnedResults.Length;

  if (Results > 0)
 {
    SearchResultsBox.Items.Clear();
    for (int i = 0; i <= Results; i++)
    {
      DataRow Row;
      Row = ReturnedResults[i];
      SearchResultsBox.Items.Add(Row["Title"].ToString());
    }
 }
  else
 {
   SearchResultsBox.Items.Clear();
   MessageBox.Show("Error! No items found.");
 }
} 
```

对于某些上下文，这里是主数据库初始化/连接和表单加载事件：

```
public partial class BaseForm : Form
{
  System.Data.OleDb.OleDbConnection Connection;

  DataSet DataSet;

  System.Data.OleDb.OleDbDataAdapter DataAdapter;

  int MaxRows = 0;
  int CurrentRow = 0;

public BaseForm()
{
  InitializeComponent();
}

private void BaseForm_Load(object sender, EventArgs e)
{
  Connection = new System.Data.OleDb.OleDbConnection();
  Connection.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;DataSource=Movies.accdb";
  Connection.Open();

  DataSet = new DataSet();

  string sq1 = "SELECT * From Movies";
  DataAdapter = new System.Data.OleDb.OleDbDataAdapter(sq1, DBConnection);
  DataAdapter.Fill(DBDataSet);

  MaxRows = DataSet.Tables[0].Rows.Count;
  DisplayRecord();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:07:59.547

您的语句中可以有多个内容为空。DBDataSet 可以为空，或者表`Movies`不存在。您可以在该行之前添加以下检查。

```
if(DBDataSet != null && 
   DBDataSet.Tables.Count > 0 && 
   DBDataSet.Tables["Movies"] != null)
{
    ReturnedResults = DBDataSet.Tables["Movies"].Select("Title like '%" + Search + "%'");
    //....  rest of your code 
```

您也可以尝试访问记录`Tables[0]`而不是表`Movies`

编辑：

对于评论中提到的下一个问题，您的 for 循环正在执行直到长度。它应该是这样的：

```
for (int i = 0; i < Results; i++) // Less than (<) not less than equal to 
    {
      DataRow Row;
      Row = ReturnedResults[i];
      SearchResultsBox.Items.Add(Row["Title"].ToString());
    } 
```

您需要修改条件并记住索引从 0 开始，您将获得行直到`Result - 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:15:36.547

在您的情况下，根据您的评论，您的代码中出现了多个空引用，您在以下行中遇到错误 ReturnedResults = DBDataSet.Tables["Movies"].Select("Title like '%" + Search + "%'");

在上面的 DBDataSet 可能是 null 或者它的表（电影）没有行等。所以更好的方法是在过滤之前检查

```
if(DBDataSet != null && 
   DBDataSet.Tables.Count > 0 && 
   DBDataSet.Tables["Movies"] != null && DBDataset.Tables["Movies"].Rows.Count > 0)
{

ReturnedResults = DBDataSet.Tables["Movies"].Select("Title like '%" + Search + "%'");

} 
```

# ruby-on-rails - Ruby Time.now 和其他日期

> ID：13453473
> 
> 赞同：2
> 
> 时间：2012-11-19T12:06:35.420
> 
> 标签：ruby-on-rails, ruby, strftime

我需要在变量中获取三个日期

今天从午夜开始，我有

> t = Time.now.strftime("%Y-%m-%d 00:00:01") # 2012-11-19 00:00:01

昨天从午夜开始（即 00:00:00 到 23:59:59）

> y1 = 2012-11-18 00:00:01
> y2 = 2012-11-19 23:59:59

特别是我需要创建为字符串以在 gem 中使用的 y1 和 y2 变量。作为 ruby​​ 的新手，我有点困惑，因为 Time.yesterday 似乎没有做我需要的事情

**编辑**

为此，请务必包括

> 需要'active_support/all'

并确保为您的应用程序捆绑了 gem。

用过的：

```
@current   = (Time.now).beginning_of_day.utc.strftime("%Y-%m-%d")
@yesterday = (Time.now - 1.day).beginning_of_day.utc.strftime("%Y-%m-%d")
@everything = (Time.now - 2.day).end_of_day.utc.strftime("%Y-%m-%d") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:33:54.250

你可以做，

```
 t=Time.now
 y1=t-1.day
 y2=t+1.day 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:08:55.237

```
t = Time.now
t - 1.day # => yesterday
t + 1.day # => tomorrow 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:36:47.563

首先将 t 转换为日期，

```
t = t.to_date

t - 1.day # => yesterday
t + 1.day # => tomorrow 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T13:23:30.787

由于您正在运行 Rails，因此可以从[ActiveSupport获得帮助](http://api.rubyonrails.org/classes/Date.html)

```
1.day.ago.midnight
Time.new.beginning_of_day 
```

您还应该考虑不使用`2012-11-19 00:00:01`or `2012-11-19 23:59:59`。相反，您可以使用 00:00:00 并根据您想要实现的目标与 >= 或 < 进行比较。如果你总是四舍五入到秒，那么`2012-11-19 00:00:00`就可以了`2012-11-19 23:59:59`。

# perl - Perl 中的程序从文件中读取，找到包含特定字符的行并打印它们。× 22510

> ID：13453474
> 
> 赞同：0
> 
> 时间：2012-11-19T12:06:38.320
> 
> 标签：perl

我已经学习 Perl 几天了，我是全新的。

该代码应该从一个大文件中读取，如果一行包含“警告”，它应该存储它并在新行上打印它，并计算每种警告的出现次数。文件中有不同类型的警告，例如“warning GR145”或“warning GT10”等。

所以我想打印类似的东西

```
Warning GR145 14 warnings
Warning GT10  12 warnings 
```

等等

问题是当我运行它时，它不会打印整个警告列表。我会感谢你的帮助。这是代码：

```
use strict;
use warnings;

my @warnings;

open (my $file, '<', 'Warnings.txt') or die $!;

while (my $line = <$file>)  {
  if($line =~ /warning ([a-zA-Z0-9]*):/) {
    push (@warnings, $line);
    print $1 ,"\n";
  }
}

close $file; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:33:41.603

`if`您在语句中使用区分大小写的匹配。尝试添加`/i`：

`if($line =~ /warning ([a-z0-9]*):/i)`

**编辑：**我误读了实际问题，因此可以忽略此答案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:47:26.737

您需要使用哈希数组，即从警告字符串到出现次数的映射。

```
use strict;
use warnings;

my %warnings = {};

open (my $file, '<', 'Warnings.txt') or die $!;
while (my $line = <$file>)  {
    if ($line =~ /warning ([a-zA-Z0-9]*)\:.*/) {
        ++$warnings{$1};
    }
}
close $file;

foreach $w (keys %warnings) {
    print $w, ": ", $warnings{$w}, "\n";
} 
```

# c# - 将动态转换为 var

> ID：13453479
> 
> 赞同：0
> 
> 时间：2012-11-19T12:06:54.293
> 
> 标签：c#, .net, dynamic, casting, var

我有以下代码：

```
public class Processor
{
    private Query _query = 
        new SpecificQuery1();
    //OR
      //new SpecificQuery2();

   public void ProcessItem(dynamic dynamicResult)
   {
        //Can't use intellisense on dynamicResult

        var staticResult = dynamicResult as _query.GetSomeType();//Can't do it :(

        //Can use intellisense on staticResult
   }
} 
```

而且，令人惊讶的是，它没有编译。有什么办法可以将动态转换为var？我知道这听起来很疯狂，但这部分将被大量编辑，如果有人更改了 QueryImplementation，他还必须更改 ProcessItem() 中的类型。我想将步骤数减少到 1 - 只需替换 SpecificQuery() ，类型就会自行更改。

所以让我改写一下。我想知道是否有某种方法可以根据分配给基类 Query 的构造函数在 dynamicResult（或其中的一些强制转换）上使用智能感知。

谢谢

编辑：对不起，我可能问错了。我明白什么是动态和可变的。我不打算在动态上使用智能感知。我并不打算真正将动态转换为 var。

我想说的是，如果我在编译时知道动态将是什么类型（它存储在 Query 实现中 - 它可以是静态的，我想要的任何 const ） - 有什么方法可以使用这些知识在 ProcessItem() 中启用智能感知？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:10:23.287

`var`上下文关键字只是语法糖。不需要向它“强制转换”任何东西，因为用它声明的变量已经是强类型的。

如果函数结果的类型是`dynamic`，用 声明的变量也是`var`。

`staticResult`是类型`dynamic`：

```
var staticResult = dynamicResult; 
```

您无法在`dynamic`类型上获得智能感知。如果您*知道*您将获得的类型，然后转换为它 - 这将使您可以访问智能感知。

```
var staticResult = (myType)dynamicResult; 
```

请注意，上述情况很容易导致运行时错误和异常，从而导致进程崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:10:37.670

请参阅[this SO answer](https://stackoverflow.com/a/961594/47064)详细解释两者之间的区别`var`，`dynamic`根据您的问题，您应该知道编译器将`var`在编译时知道类型，而`dynamic` **只能在运行时确定**；因此，您不能分配从`dynamic`（在运行时确定）转换为`var`（在编译时确定）的类型。

那么，为什么不保持动态呢？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T12:11:08.103

不，你不能做那样的事情。

首先，您不能将某些内容转换为，`var`因为[`var`](http://msdn.microsoft.com/en-us/library/bb383973.aspx)它不是类型。此外，只能对静态已知的类型进行强制转换；这意味着您要转换的类型必须是硬编码的，并且不能是评估表达式的结果（例如`_query.GetSomeType()`您的示例中的方法调用）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T12:17:08.107

你可以实现类似的东西

```
public abstract class AbstractQuery
{
     AbstractQuery Create(dynamic result);
}
public class SpecificQuery1 : AbstractQuery
{
    new public SpecificQuery1 Create(dynamic result)
    {
       ...
    }
}

public void ProcessItem(dynamic dynamicResult)
{
    var staticResult = _query.Create(dynamicResult);
} 
```

从动态转换为类型化结果

# android - 如何转换字符串？

> ID：13453482
> 
> 赞同：0
> 
> 时间：2012-11-19T12:07:04.383
> 
> 标签：android, service, notifications

我正在尝试从服务中获取数据并将其传递给通知。但是当我在真实设备上运行它时，它只是在通知中显示“已向您发送朋友请求”，数据消失了。然后我在 logcat 中发现了问题输出如下所示：

日志输出：

```
 11-19 23:12:18.344: D/dataServices1(17701): admin*admin*
   11-19 23:12:18.344: D/dataServices2(17701): [Ljava.lang.String;@40d9f0d8
   11-19 23:12:18.344: D/dataServices3(17701): nulladmin,admin,
   11-19 23:12:18.344: D/dataServices3(17701): , 
```

admin*admin* < 它在这里发送了两个数据。

所以我的问题是如何将它从“[Ljava.lang.String;@40da8e78”转换为“admin”以及为什么它只显示“[Ljava.lang.String;@40da8e78”而不是两次？像 [Ljava.lang.String;@40da8e78 [Ljava.lang.String;@40da8e78...为什么“str”(dataServices3) 输出显示为这样？

这是代码：

```
 String datapassed; 
   String str = "";
   String[] data;
   int dlength;

   public void onReceive(Context context, Intent intent) {
    datapassed = intent.getStringExtra("DATAPASSED");
    if(datapassed.length()>0){
    //update from here
        data = datapassed.split("[*]");
        dlength = data.length;

        for(int i=0;i<dlength;i++){
            if(i==dlength-1){
                str += String.valueOf(data[i]);                 
            }else{
                str += String.valueOf(data[i]) + ",";
            }
            Log.d("dataServices3",str);
            displayNotification();

        }
            str = "";
        Log.d("dataServices1",datapassed);
        Log.d("dataServices2",data.toString());
     //to here
    }
    }
    };

    protected void displayNotification(){
        Intent i = new Intent(this,NotificationView.class);
        i.putExtra("notification", notification);

        PendingIntent pi = PendingIntent.getActivity(this, 0, i, 0);

        NotificationManager mnotis =(NotificationManager)getSystemService(NOTIFICATION_SERVICE);

        Notification notis = new Notification(R.drawable.ic_launcher,"Reminder:You have " + dlength + " new friend request",System.currentTimeMillis());
        notis.setLatestEventInfo(this,"Friend Request", str + "has sent you a friend request",pi);
        notis.vibrate = new long[]{100,250,100,500};
        mnotis.notify(0, notis);
    } 
```

这是运行后的 logcat 错误输出：

```
 11-19 23:28:46.388: E/ExternalAccountType(11253): Unsupported attribute readOnly
 11-19 23:28:46.648: E/ExternalAccountType(11253): Unsupported attribute readOnly
 11-19 23:28:57.218: E/MediaProvider(19282): invalid album art, error creating album thumb file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:43:11.897

也许我没有理解正确，您在数组中有一个对象，并且想要转换为它是类型化类，在这种情况下它是`admin`. 如果您没有像字符串`array[0] = obj.toString()`一样保留在数组中，则可以将对象转换如下。

```
admin adminFromData = null;
if (obj.getClass().isInstance(admin.class)) 
{
    admin = (admin)obj;
}
 //what ever you want with the admin object. 
```

# java - 每当上下文加载（tomcat启动）时，如何在java Web应用程序中自动运行servlet/action

> ID：13453491
> 
> 赞同：1
> 
> 时间：2012-11-19T12:07:45.570
> 
> 标签：java, jsp, servlets, struts2

我想在我的网络应用程序部署时执行一些代码。

如果我重新启动tomcat，也会发生同样的情况。

这应该在整个 Web 应用程序的生命周期中只执行一次。

有什么我可以在 web.xml 中设置的东西，比如启动条目，每次我部署我的 web 应用程序或重新启动 tomcat 时都会执行它？

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T12:08:57.543

您需要实现`ServletContextListner`接口。

`ServletContextListner`在`javax.servlet`包装内。

这是有关如何执行此操作的简短代码。

```
public class MyServletContextListener implements ServletContextListener {

    @Override
    public void contextDestroyed(ServletContextEvent arg0) {
    //Notification that the servlet context is about to be shut down.   
    }

    @Override
    public void contextInitialized(ServletContextEvent arg0) {
    // do all the tasks that you need to perform just after the server starts

    //Notification that the web application initialization process is starting
    }

} 
```

并在您的部署描述符 web.xml 中配置它

```
<listener>
    <listener-class>
        mypackage.MyServletContextListener
    </listener-class>
</listener> 
```

# iphone - 如何计算字典中的重复对象？

> ID：13453492
> 
> 赞同：0
> 
> 时间：2012-11-19T12:07:50.030
> 
> 标签：iphone, ios, xcode, nsdictionary

我有一个包含重复对象的字典对象数组，我需要用另一个表示该对象重复次数的键创建另一个没有重复对象的数组。

例子：

```
object A (key1, key2)
object B (key1, key2)
object C (key1, key2)
object B (key1, key2)
object B (key1, key2) 
```

结果，带有新的字典数组：

```
object A (key1, key2, count(1))
object B (key1, key2, count(3))
object C (key1, key2, count(1)) 
```

自从我对对象不熟悉以来，我很难过`NSDictionary`，到目前为止的代码：

```
for(int j = 1; j < [objects count]; j++)
{
    for(int k = j+1;k < [objects count]-j;k++)
    {
        NSMutableDictionary *item1 = [objects objectAtIndex:j];
        NSMutableDictionary *item2 = [objects objectAtIndex:k];

        NSString *str1 = [item1 valueForKey:@"setArrivalAirportOrCode"];
        NSString *str2 = [item2 valueForKey:@"setArrivalAirportOrCode"];

        NSLog(@"%@==%@ ???",str1,str2);
        if([str1 isEqualToString:str2])
            NSLog(@"%@==%@",str1,str2);
    }
} 
```

我试图计算对象并将它们复制到一个新数组中，我不确定我是否朝着正确的方向前进，对不起我的英语不好，请不要投反对票，只要问我任何我一直在线的事情。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:52:55.323

创建一个[NSCountedSet](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSCountedSet_Class/Reference/Reference.html)，它将为您处理计数。

在这个例子中，我使用了 NSString 对象，但它可以用任何类型的对象来完成：

```
NSString        *stringA    = @"stringA";
NSString        *stringB    = @"stringB";
NSString        *stringC    = @"stringC";
NSArray         *array      = [NSArray arrayWithObjects:stringA, stringB, stringC, stringB, stringB, nil];
NSCountedSet    *countedSet = [NSCountedSet setWithArray:array];

NSLog(@"%@", countedSet);
// Results:  <NSCountedSet: 0x6b35790> (stringA [1], stringB [3], stringC [1]) 
```

为了获得计数，您使用：

```
NSLog(@"%d", [countedSet countForObject:stringB]);
// Result:  3 
```

为了在单独的数组中获取结果（请注意，您会丢失计数，因此请使用计数集），请使用：

```
NSArray *array2 = [countedSet allObjects];
NSLog(@"%@", array2);
/*
 * (
 * stringA,
 * stringB,
 * stringC
 * )
 */ 
```

# java - BufferedReader 输入给出了意外的结果

> ID：13453493
> 
> 赞同：1
> 
> 时间：2012-11-19T12:07:57.320
> 
> 标签：java, input, io, bufferedreader

当我运行以下代码并在提示输入时键入 50 时：

```
 private static int nPeople;

public static void main(String[] args) {

    nPeople = 0;
    System.out.println("Please enter the amount of people that will go onto the platform : ");
    BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
    try {
        nPeople = keyboard.read();
    } catch (IOException e) {
        e.printStackTrace();
    }

    System.out.println(" The number of people entered --> " + nPeople);
} 
```

}

我得到以下输出：

请输入进入平台的人数：50 输入的人数 --> 53

为什么我输入 50 时返回 53 ？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:11:53.607

[`BufferedReader#read()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#read%28%29)`single character`方法从您的输入中读取 a 。

因此，当您`50`作为输入传递时，它只是读取`5`并将其转换为`ASCII`等效的，即将`53`其存储在`int`变量中。

我认为您需要[`BufferedReader#readLine()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)这里的方法，它读取一行文本。

```
try {
    nPeople = Integer.parseInt(keyboard.readLine());  
} catch (IOException e) {
    e.printStackTrace();
} 
```

您需要`Integer.parseInt`将字符串表示形式转换为`integer`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:15:09.700

BufferedReader 键盘 = new BufferedReader(new InputStreamReader(System.in)); 尝试 { nPeople = keyboard.read(); } catch (IOException e) { e.printStackTrace(); }

上面的代码将只读取您输入的输入的第一个字符。

它正在显示该字符的 ASCII 值。

尝试使用

```
 npeople = Integer.parseInt(keyboard.readLine()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:09:20.217

因为'5'等于53（ascii码）

有关更多详细信息，请参见[this](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#read%28%29)和[this](http://en.wikipedia.org/wiki/ASCII)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:16:03.220

尝试做这样的事情：

```
private static int nPeople;

public static void main(String[] args) {

    nPeople = 0;
    System.out.println("Please enter the amount of people that will go onto the platform : ");
    BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
    try {
        String input = reader.readLine();
        nPeople =  Integer.parseInt(input);
    } catch (IOException e) {
        e.printStackTrace();
    }

    System.out.println(" The number of people entered --> " + nPeople);
} 
```

# c++ - 我的神经网络学习 sin x 但不学习 cos x

> ID：13453501
> 
> 赞同：3
> 
> 时间：2012-11-19T12:08:43.363
> 
> 标签：c++, neural-network, trigonometry, backpropagation, feed-forward

我已经建立了自己的神经网络，但我遇到了一个奇怪的问题。

该网络是一个非常简单的具有反向传播学习的前馈 1-N-1 网络。Sigmoid 用作激活函数。

我的训练集是用 [-PI, PI] 与其 [0,1] 标度正弦值之间的随机值生成的（这是因为“Sigmoid-net”仅产生 [0,1] 和未标度正弦函数之间的值产生 [-1,1] 之间的值）。

使用该训练集，网络设置为 1-10-1，学习率为 0.5，一切正常，网络学习了 sin-function。但是..如果我对 COSINE 函数以同样的方式做所有事情，网络就不会学习它。没有任何隐藏层大小或学习率的设置。

有任何想法吗？我错过了什么吗？

**编辑：**我的问题似乎与[这个](http://neuron.eng.wayne.edu/bpFunctionApprox/bpFunctionApprox.html "这个")小程序所见的相似。除非首先为权重教授“更简单”的东西（例如 1400 个二次函数循环），否则它似乎不会学习正弦函数。小程序中的所有其他设置都可以保持初始状态。因此，在正弦或余弦的情况下，在找到解决方案之前，权重似乎需要一些提升以至少部分正确的方向。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:07:07.513

我正在努力看看这是如何工作的。

据我所知，您有 1 个输入，1 层中有 N 个节点，然后是 1 个输出。因此，网络隐藏层中的任何节点之间都没有区别。假设您有一个输入 x 和一组权重 w [i]。然后输出节点 y 将具有以下值：

`y =` Σ[我] `w_i x`

  `= x .` Σ[我] `w_i`

所以这总是线性的。

为了使节点能够以不同的方式学习，它们必须以不同的方式接线和/或访问不同的输入。因此，您可以提供值的输入、值的平方根（产生一些比例效应）等，并将不同的隐藏层节点连接到不同的输入，我怀疑无论如何您至少还需要一个隐藏层。

神经网络并不神奇。它为加权和生成一组特定权重。由于您可以导出一组权重来近似正弦或余弦函数，因此您必须了解神经网络需要哪些输入才能获得成功。

一个明确的例子：指数函数的[泰勒级数](http://en.wikipedia.org/wiki/Taylor_series)是：

```
exp(x) = 1 + x/1! + x^2/2! + x^3/3! + x^4/4! ... 
```

因此，如果您提供 6 个输入音符，分别为 1、x ¹、x ²等，那么一个神经网络刚刚接收到一个相应节点的每个输入，并将其乘以其权重，然后将所有这些输出馈送到输出节点将能够指数的 6 项泰勒展开式：

```
in     hid     out

1 ---- h0 -\
x   -- h1 --\
x^2 -- h2 ---\
x^3 -- h3 ----- y
x^4 -- h4 ---/
x^5 -- h5 --/ 
```

没有太多的神经网络，但你明白了。

在泰勒级数的维基百科页面下方，有 sin 和 cos 的展开式，它们分别以 x 的奇数次幂和 x 的偶数次幂给出（想想看，sin 是奇数，cos 是偶数，是的，它是很简单），所以如果你提供 x 的所有幂，我猜想 sin 和 cos 版本在交替零权重的情况下看起来非常相似。(sin: 0, 1, 0, -1/6..., cos: 1, 0, -1/2...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T23:27:02.123

我认为您始终可以计算正弦，然后在外部计算余弦。我认为您在这里关心的是为什么神经网络可以学习正弦函数时不学习余弦函数。假设这个工件如果不是因为你的代码；我建议如下：

1.  这绝对看起来像是学习算法中的错误。可能是因为你的出发点。尝试从为第一个输入提供正确结果的权重开始，然后继续前进。
2.  检查您的学习是否存在严重偏差 - +ve 多于 -ve
3.  由于余弦可以通过正弦 90 减去角度来计算，因此您可以找到权重，然后在 1 步中重新计算余弦的权重。

# storyboard - 我的故事板中的视图控制器与 ViewController.xib 不匹配

> ID：13453503
> 
> 赞同：0
> 
> 时间：2012-11-19T12:08:50.670
> 
> 标签：storyboard, xib, xcode4.5, viewcontroller

我对 Xcode 很陌生，所以这可能很新，但我还没有弄清楚。

问题：我在我的情节提要中制作了一些带有一些按钮等的视图控制器。它们相互链接并且运行良好。现在我有一些关闭键盘的代码。所以我在我的故事板中添加了与 ViewControllers 同名的 ViewController h/m/xib 文件。但是 xib 文件不包含与我的故事板中的 ViewController 相同的按钮等。

我是不是很愚蠢，它不会以这种方式工作吗？

如果你能帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:13:16.163

如果您使用的是故事板，则不需要 xib 文件。每种方法都有不同的处理方法，最好不要混淆它们。您创建的 .h/.m 文件应该没问题。

如果您的故事板的视图控制器类与您在代码中创建的类匹配，那么您可以将按钮的出口和操作连接到代码文件。

# javascript - 如何根据未显示的属性将表行过滤到跨度中

> ID：13453504
> 
> 赞同：1
> 
> 时间：2012-11-19T12:08:50.733
> 
> 标签：javascript, jquery, asp.net, datalist

我有一个表格，其中每一行都是一个地址。每行也有一个邮政编码，但它是隐藏的。我需要一个文本框来过滤**与输入的 zip 匹配**的地址行。要搜索的字段名为“zip”。

这是我的桌子：

```
<asp:DataList
  id="list1"
  runat="server">
  <ItemTemplate>
     <cc1:SWCLabel 
         runat="server"
         Text ='<%# Eval("address")%>'
         zip='<%# Eval("zip")%>'
          />
  </ItemTemplate> 
```

每个表的行都是这样渲染的，注意 span 中的 zip 属性：

```
 <tr>
  <td>
      <span zip="11">address mmomo</span>
  </td>
    </tr> 
```

**更新的演示：** 这是演示：zip 文本框与 zip 完全匹配，但我需要匹配包含或以输入文本开头的 zip：http: [//jsfiddle.net/QFQ5k/83/](http://jsfiddle.net/QFQ5k/83/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:40:34.240

```
$.expr[':'].containsIgnoreCase = function (n, i, m) {
            return jQuery(n).text().toUpperCase().indexOf(m[3].toUpperCase()) >= 0;
        };

    var gridAddr = $("#t1");
        var filtroCP = $('#txtbox');
    $("#txtbox").keyup(function () {
            gridAddr .find("tr").hide();
            var data = this.value.split(" ");
            var jo = gridAddr .find("tr");

            if ($(this).val().length != 0) {
                $.each(data, function (i, v) {
                    jo = jo.filter(function(index){
                        return $(this).find("span").attr("zip").search($("#txtbox").val())!=-1;                  

                    });
                });
                jo.show();
            }
            else {
                jo.show();
            }
        });​ 
```

**更新** 如果您确定该行的任何一个子元素包含属性“zip”然后使用它来过滤行，而不管它们的呈现：

代替

`return $(this).find("span").attr("zip").search($("#txtbox").val())!=-1;`

写

`return $(this).find("[zip*='"+$("#txtbox").val()+"']").length>0;`

在这里查看：http: [//jsfiddle.net/QFQ5k/89/](http://jsfiddle.net/QFQ5k/89/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:09:38.197

使用 linq.js [http://linqjs.codeplex.com/](http://linqjs.codeplex.com/)

```
<!DOCTYPE>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.linq.min.js"></script>
</head>
<body>
<table border="1">
<tr><td zip="112233">112233</td></tr>
<tr><td zip="232323">232323</td></tr>
<tr><td zip="454567">454567</td></tr>
</table>
<input type="text" id="filter">
<script>  
$('#filter').change(function(){
    $("[zip]").show();
    $("[zip]").toEnumerable()
    .Select( function(x){  return x.attr('zip').indexOf($('#filter').val())==-1 ? x : null})
    .TojQuery()
    .each(function(){
        $(this).hide();
    });
}); 
</script>
</body>
</html> 
```

# iphone - Objective - C - 我应该使用什么设计模式来进行视图转换和视图通信？

> ID：13453510
> 
> 赞同：0
> 
> 时间：2012-11-19T12:08:57.567
> 
> 标签：iphone, objective-c, ios, design-patterns

我开始在 Objective-C 中学习软件设计，并且正在实现 Instagram 之类的应用程序。用户可以阅读和发布提要。但是，我遇到了问题。视图不能相互通信，并且视图转换方法在不同的视图中实现。我知道有一些设计模式可以帮助我集中转换流量等。我需要满足一些限制。

* * *

1.  UITabbarController 包含几个 UINavigationController 和 UIViewController (4个标签)

* * *

2.  我想将视图转换集中在一个类层次结构中，例如类层次结构示例：

> ```
>  [ViewTransition] 
>           
>                                       ^
>                                       |
>                    +------------------+-----------------+ 
> 
>                    |                  |                 | 
>     
> 
>              [ToAView]            [ToBView]           [ToCView] 
> ```

（ViewTransition：包含抽象方法“requestViewTransition”的协议/抽象类。）

（ToAView：一个类实现了抽象方法“requestViewTransition”，该方法执行从任何视图到“A”视图的视图转换。）

* * *

3.  每个视图转换可能有不同的实现方法。

例如从“A”视图到“B”视图，我们需要使用：

> [navigationController pushViewController:BViewController 动画:YES];

例如从“C”视图到“B”视图，我们需要使用：

> [CViewController presentModalViewController:BViewController 动画：YES];

* * *

4.  观察者模式需要一些视图控制器。例如，用户在“A”视图中输入数据，“A”视图的模型需要通知其观察者更新他们的视图。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:03:29.050

似乎您正试图让所有视图访问相同的数据，对吗？

最好的方法可能是使用[单例](http://www.idev101.com/code/Objective-C/singletons.html)。获取您需要的用户信息并将其存储在单例中的变量中，然后使用单例中的方法在您的视图中共享。

或者，根据您实际在做什么，您可以简单地设置[自定义 init 方法](https://stackoverflow.com/questions/1711222/adding-a-custom-initwith)并使用他们需要的数据初始化您的视图。

# jquery - jquery mobile loadPage不起作用

> ID：13453511
> 
> 赞同：2
> 
> 时间：2012-11-19T12:08:59.993
> 
> 标签：jquery, ajax, jquery-mobile, load

好吧，我几天前就完成了这个[**问题，但不知道我是否清楚。**](https://stackoverflow.com/questions/13404462/mobile-changepage-instead-of-ajax)

所以，我现在使用另一个函数做了一些更简单的事情`$.mobile.loadPage`

我想要做的只是将内容从另一个文件加载到 div，就像`$.ajax`使用普通 jquery 一样。

**在我的主页中：**

```
<div data-role="page">
    <button id="load" style="border: solid blue;">Click here to load</button>
    <div data-role="content" id="target">
    <!-- ajax load here -->
    </div>
</div> 
```

**这是来自另一个文件的 html：**

```
<div id="secondPage" style="border:solid red;">
   <p>test</p>
</div> 
```

**最后，js：**

```
 $("body").on("click", "#load", function () {
    $.mobile.loadPage("mobile/favorites", {
        pageContainer: $('#target'),
        type: 'post',
        reloadPage: true
    });
}); 
```

在我看来没有错误，当我在 chrome 调试中检查时，url 会加载内容。

那么，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:34:40.070

您的代码正在尝试在另一页面中加载一个页面。第二页 ( `id="secondPage"`) 缺少`data-role="page"`属性。

我从未尝试过完成您在此处尝试的操作，但根据文档似乎令人困惑。

该方法加载一个页面，将其插入到容器（而不是另一个页面）内部的 DOM 中。`reloadPage`如果加载的页面已经在 DOM 中（之前已加载），该参数会强制刷新页面。不是你想做的。

您将有更好的运气通过 jQuery 加载内容，插入 DOM `$("#myDiv").load("ajax/test.html");`，然后使用刷新当前页面`$("#myPage").page("destroy").page();`注意，如果您只是插入 jQuery Mobile 未增强的 html，则可能不需要最后一点。

# android - XML 解析：编码 utf-8 & UTF-8

> ID：13453516
> 
> 赞同：3
> 
> 时间：2012-11-19T12:09:30.367
> 
> 标签：android, xml-parsing, xmlhttprequest, domparser

我正在尝试解析来自这个[LINK](http://devws.barcodo.com/LoyaltyGateway/GetSiteMenu?websiteID=1&languageID=1&userID=0&channelID=3&portalID=873)的值，它的 xml 编码是这样的

`<?xml version="1.0" encoding="utf-8"?>`

当我尝试`get response`在 logcat 中抛出消息时，如图所示

```
11-19 17:25:13.350: W/System.err(3360): This is not valid URL
11-19 17:25:13.350: W/System.err(3360): java.lang.NullPointerException 
```

当我尝试使用其他一些[LINK](http://api.androidhive.info/pizza/?format=xml)时，其编码是这样的

`<?xml version="1.0" encoding="UTF-8"?>`它工作正常，我可以解析值。

**由于编码不是 UTF-8 导致 xml 解析失败，它是 utf-8 吗？**

我该如何处理。我做过谷歌，对 XML 解析很陌生。这是我尝试创建的第一个解析。请让我知道路。

**用代码更新：**

```
public String getXmlFromUrl(String url) {

    String xml = null;

    try {            
        // defaultHttpClient
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);           
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity(); 
        xml = EntityUtils.toString(httpEntity);
        System.out.println("response -- " + xml);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:30:50.707

看起来问题在于您的响应中的 XML 编码。

```
URL url = new URL("http://myurl.com");
InputSource is = new InputSource(url.openStream());
is.setEncoding("ISO-8859-1"); // Also Try UTF-8 or UTF-16
BufferedReader br = new BufferedReader(new InputStreamReader(is.getByteStream()));
String line,str;
while((line=br.readLine())!=null)
{
      str = str + line;
}
Log.i(TAG,str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:48:13.317

检查响应的**内容类型标头的****字符集。**它可以是 ISO-8859-1 或 UTF-8。相应地编码。

 ****编辑**：对于您提供的链接，我没有为响应设置任何编码。既然您提到您是 XML 解析的新手，我将发布我的解析器实现。

我的解析器：

```
public final class SampleParser{

    final static String ROOT_NODE = "Menus";
    final static String ELEMENT_SITEMENU = "SiteMenu";
    final static String ELEMENT_ID = "menuID";
    final static String ELEMENT_TITLE = "menuTitle";
    final static String ELEMENT_CUSTOM = "menuIsCustom";
    final static String ELEMENT_PAGE_URL = "menuCustomPageURL";
    final static String ELEMENT_IOS_ID = "iosMenuID";

    private static final String TAG="SampleParser";

    /**
     * Intentionally commented
     */
    private SampleParser() {}

    /**
     * @param response The XML string which represents the complete news data
     * @return news The complete data
     */
    public static Menus parse(String response) {
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp;
        try {
            sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            SampleDataHandler dataHandler = new SampleDataHandler();
            xr.setContentHandler(dataHandler);
            InputSource source = new InputSource(new StringReader(response)); 
            xr.parse(source);
            Menus result = dataHandler.getData();
            return result;
        } catch (ParserConfigurationException e) {
            Log.e(TAG, "parse", e);
        } catch (SAXException e) {
            Log.e(TAG, "parse", e);
        } catch (IOException e) {
            Log.e(TAG, "parse", e);
        } 
        return null;
    }

    static class SampleDataHandler extends DefaultHandler {
        /**
         * 
         */
        private static final String TAG="SampleDataHandler";
        /**
         * 
         */
        private Menus data;
        /**
         * 
         */
        private SiteMenu tempElement;
        /**
         * 
         */
        private boolean readingIosId;
        /**
         * 
         */
        private boolean readingTitle;
        /**
         * 
         */
        private boolean readingID;
        /**
         * 
         */
        private boolean readingCustom;
        /**
         * 
         */
        private boolean readingCustomURL;

        /**
         * 
         */
        public Menus getData(){
            return data;
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.xml.sax.helpers.DefaultHandler#endDocument()
         */
        @Override
        public void endDocument() throws SAXException {
            Log.d(TAG, "endDocument Finished parsing response");
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.xml.sax.helpers.DefaultHandler#endElement(java.lang.String,
         * java.lang.String, java.lang.String)
         */
        @Override
        public void endElement(String uri, String localName, String qName)
                throws SAXException {
            if(qName.equalsIgnoreCase(ELEMENT_SITEMENU)){
                data.addMathematician(tempElement);
            }else if(qName.equalsIgnoreCase(ELEMENT_ID)){
                readingID = false;
            }else if(qName.equalsIgnoreCase(ELEMENT_TITLE)){
                readingTitle = false;
            }else if(qName.equalsIgnoreCase(ELEMENT_IOS_ID)){
                readingIosId = false;
            }else if(qName.equalsIgnoreCase(ELEMENT_CUSTOM)){
                readingCustom = false;
            }else if(qName.equalsIgnoreCase(ELEMENT_PAGE_URL)){
                readingCustomURL = false;
            }
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.xml.sax.helpers.DefaultHandler#startDocument()
         */
        @Override
        public void startDocument() throws SAXException {
            data = new Menus();
            Log.d(TAG, "startDocument Started parsing response");
        }

        /*
         * (non-Javadoc)
         * 
         * @see
         * org.xml.sax.helpers.DefaultHandler#startElement(java.lang.String,
         * java.lang.String, java.lang.String, org.xml.sax.Attributes)
         */
        @Override
        public void startElement(String uri, String localName, String qName,
                Attributes attributes) throws SAXException {
            if(qName.equalsIgnoreCase(ROOT_NODE)){
                //data.setData(new ArrayList<NewsElement>());
            }else if(qName.equalsIgnoreCase(ELEMENT_SITEMENU)){
                tempElement = new SiteMenu();
            }else if(qName.equalsIgnoreCase(ELEMENT_IOS_ID)){
                readingIosId = true;                
            }else if(qName.equalsIgnoreCase(ELEMENT_ID)){
                readingID = true;
            }else if(qName.equalsIgnoreCase(ELEMENT_TITLE)){
                readingTitle = true;
            }else if(qName.equalsIgnoreCase(ELEMENT_CUSTOM)){
                readingCustom = true;
            }else if(qName.equalsIgnoreCase(ELEMENT_PAGE_URL)){
                readingCustomURL = true;
            }
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.xml.sax.helpers.DefaultHandler#characters(char[], int, int)
         */
        @Override
        public void characters(char[] ch, int start, int length)
                throws SAXException {
            String chars = new String(ch, start, length);    
            chars = chars.trim(); 
            if(readingID){
                try{
                    tempElement.setId(Integer.parseInt(chars));
                }catch(Exception e){
                    Log.e(TAG, "characters[Parsing ID]", e);
                    tempElement.setId(-1);
                }
            }
            else if(readingIosId){
                try{
                    tempElement.setiOSID(Integer.parseInt(chars));
                }catch(Exception e){
                    Log.e(TAG, "characters[Parsing iOSID]", e);
                    tempElement.setiOSID(-1);
                }
            }else if(readingTitle){
                tempElement.setTitle(chars);
            }else if(readingCustom){
                try{
                    tempElement.setCustom(Boolean.parseBoolean(chars));
                }catch(Exception e){
                    Log.e(TAG, "characters[Parsing custom]", e);
                    tempElement.setCustom(false);
                }
            }else if(readingCustomURL){
                tempElement.setCustomUrl(chars);
            }
        }
    }
} 
```

我用于网络调用的 utils 方法。[和你一样]

```
 /**
     * @param url
     * @return
     */
    private static HttpEntity getResponseEntity(String url) {

        DefaultHttpClient httpClient = getHttpClient();

        HttpGet getMethod = new HttpGet(url);
        long startTime= 0;

        try {
            HttpResponse httpResponse = httpClient.execute(getMethod);

            HttpEntity responseEntity = httpResponse.getEntity();
            return responseEntity;

        } catch (IOException ioe) {
            Log.e(TAG, "getResponseEntity", ioe);
        } catch (Exception e) {
            Log.e(TAG, "getResponseEntity", e);
        } 
        return null;
    }

    /**
     * @param url
     * @return
     */
    public static String getRespAsString(String url) {

        if (!ApplicationInfo.networkStatus) {
            // No Internet Connection
            return null;
        }

        try {
            HttpEntity responseEntity = getResponseEntity(url);
            if (responseEntity != null)
                return EntityUtils.toString(responseEntity);
            else
                return null;
        } catch (Exception e) {
            Log.e(TAG, "getRespAsString", e);
        }

        return null;
    } 
```

只需获取响应并调用解析器，例如。`SampleParser.parse(response);`**

# accelerometer - 处理加速度计数据

> ID：13453517
> 
> 赞同：2
> 
> 时间：2012-11-19T12:09:34.253
> 
> 标签：accelerometer, data-analysis

我想知道是否有一些库/算法/技术有助于从加速度计数据（从任何智能手机中提取）中提取用户上下文（步行/站立）？

例如，我会在一段时间内每 5 秒收集一次加速度计数据，然后识别用户上下文（例如，前 5 分钟，用户正在走路，然后用户站立一分钟，然后他继续再步行3分钟）。

非常感谢你:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T06:47:50.987

检查新的活动识别 API [http://developer.android.com/google/play-services/location.html](http://developer.android.com/google/play-services/location.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T22:08:44.617

它仍然是一个研究课题，请看这篇讨论算法的论文

[http://www.enggjournals.com/ijcse/doc/IJCSE12-04-05-266.pdf](http://www.enggjournals.com/ijcse/doc/IJCSE12-04-05-266.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T13:50:27.170

我不知道任何这样的图书馆。

编写这样的库是一项非常耗时的任务。基本上，您将构建一个您希望识别的“用户上下文”数据库。

然后您收集数据并将其与数据库中的数据进行比较。至于如何比较，请参阅将[方向存储到数组 - 和比较](https://stackoverflow.com/q/6368618/341970)，加速度计也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-17T23:25:28.547

步行/跑步数据在很多方面类似于心率数据。在过滤噪声和获得平滑峰值方面，研究噪声过滤和峰值检测算法。以下用于获取心脏病患者的心率信息，应该是一个很好的起点： http: [//www.docstoc.com/docs/22491202/Pan-Tompkins-algorithm-algorithm-to-detect-QRS-心电图复合体](http://www.docstoc.com/docs/22491202/Pan-Tompkins-algorithm-algorithm-to-detect-QRS-complex-in-ECG)

想想你想如何过滤掉噪音和检测峰值；过滤器显然取决于您收集的原始数据，但最好大致了解您希望对数据进行哪种过滤。考虑一下过滤数据后需要做什么。在你的情况下，想想你将如何设计一种算法来找出数据何时指示活动（如步行、跑步等），以及何时显示用户处于静止状态。这是一个相当具有挑战性的问题，一旦你考虑到设备本身的动态（当用户走路/跑步时它是如何定位的），以及几乎没有（如果不是没有）基准算法可以做到这一点的事实原始智能手机数据。

Start with determining the appropriate algorithms, and then tackle the complexities (mentioned above) one by one.

# wcf - 有时 DataCache.GetObjectsInRegion() 在区域中存在对象时返回一个 emply 列表

> ID：13453523
> 
> 赞同：0
> 
> 时间：2012-11-19T12:09:50.273
> 
> 标签：wcf, appfabric

我在 WAS 中托管的 WCF 服务中使用 AppFabric 缓存。我必须做错事，因为有时 GetObjectsInRegion() 返回一个空列表，而该区域中确实存在 objetcs。

不幸的是，我无法确定问题可重现的上下文。似乎如果重新启动 Web 服务，则现有区域对于该服务来说是空的。

我确定这与超时问题无关。

如果我这边有任何进展，我会更新这个问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:04:01.540

这是我这边的一个错误。在某些情况下，我没有明确设置过期超时。缓存集群配置了默认过期设置。TTL 为 10 分钟。对象被自动从缓存中删除。

要点是：将对象放入缓存时始终设置过期超时。

# c++ - 反转十六进制字符串 C++ 的第 7 位

> ID：13453524
> 
> 赞同：-5
> 
> 时间：2012-11-19T12:09:53.300
> 
> 标签：c++, c, binary, hex

> **可能重复：**
> [在 C++ 中用前导零更改十六进制数的位，(C)](https://stackoverflow.com/questions/13430050/change-bit-of-hex-number-with-leading-zeros-in-c-c)

我在十六进制字符串中有这个数字：

```
002A05(7th bit is set to 0) 
```

我需要反转这个数字的第 7 位，所以转换后我会得到

```
022A05 
```

但万一

```
ABCDEF(7th bit is set to 1) 
```

我需要得到

```
A9CDEF 
```

但它必须适用于每 6 个字符的十六进制数。

它必须是左起第 7 位。我正在尝试将 OUI 转换为修改后的 EUI64

我尝试通过 strtol 将十六进制字符串转换为整数，但该函数去除了前导零。

请帮助我如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:32:41.100

最简单的方法，但不一定是最干净的；

由于只有一个字符受到影响，因此您可以使用简单的字符串操作来完成；假设您的输入在字符串中是大写的`input`；

```
input[1] = "23016745AB*******89EFCD"[input[1]-48]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:16:16.300

```
#include <stdio.h>

void flipme(char *buf, const char *inBuf)
{
    int x;
    sscanf(inBuf, "%x", &x);
    x ^= 1 << 17;
    sprintf(buf, "%06X", x);
}

int main(void)
{
    char buf[16];

    flipme(buf, "002A05");
    printf("002A05->%s\n", buf);

    flipme(buf, "ABCDEF");
    printf("ABCDEF->%s\n", buf);
} 
```

输出：

> 002A05->022A05
> ABCDEF->A9CDEF

你写了：

> 我尝试通过 strtol 将十六进制字符串转换为整数，但该函数去除了前导零。

该`strtol`函数将其转换为*数字*。说它去掉前导零并没有任何意义，因为数字没有前导零——“6”和“06”是写相同数字的两种不同方式。如果您在打印时想要前导零，则可以添加它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:18:19.500

```
num ^ 0x020000 
```

`^`是按位异或运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:18:37.590

给定一个整数`x`，倒置第 3 位的数是`x ^ 2`。剩下的答案已经给你[了](https://stackoverflow.com/a/13430153/971193)。

[注意：在问题中，位从最高到最低计数，从 1 开始。然后 6 位十六进制数的第 7 位是其第二高字符的第 3 位。通常位从最低到最高计数，但从 0 开始。]

# javascript - 如何获取rowSpan TD的ID

> ID：13453525
> 
> 赞同：0
> 
> 时间：2012-11-19T12:09:54.080
> 
> 标签：javascript, html-table

```
<table id="foo" border="1">
  <tr>
    <td rowspan="3" class="date">Monday</td>
    <td>Cell A1 <a href="#" class="edit">edit</a></td>
  </tr>
  <tr>
    <td>Cell A2 <a href="#" class="edit">edit</a></td>
  </tr>
  <tr>
    <td>Cell A3 <a href="#" class="edit">edit</a></td>
  </tr>
  <tr>
    <td rowspan="3" class="date">Tuesday</td>
    <td>Cell B1 <a href="#" class="edit">edit</a></td>
  </tr>
  <tr>
    <td>Cell B2 <a href="#" class="edit">edit</a></td>
  </tr>
  <tr>
    <td>Cell B3 <a href="#" class="edit">edit</a></td>
  </tr>
</table> 
```

上表中，如何获取父TD的rowSpan的值？例如，如果我单击单元格 A3 的编辑链接，将调用一个 Javascript 函数。在该函数中，我需要父 TD 的 rowSpan 值（即星期一）。

这些和是动态创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:23:39.217

如果你使用 jQuery，试试这个：

```
$("#foo").on('click', '.edit', function(){
    var tr = $(this).closest('tr'), 
        rowspan = 0,
        text, td;

    while(tr.length && !rowspan ) {
        td = tr.find('td:first');
        rowspan = td.attr('rowspan');
        tr = tr.prev();            
    }

    alert(td.text());
}) 
```

现场演示：http: [//jsfiddle.net/bJfKL/1/](http://jsfiddle.net/bJfKL/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:24:05.310

假设在您的函数`this`中是对元素的引用 `a`，您可以这样做：

```
var tr = this.parentNode.parentNode;

tr = tr.parentNode.rows[tr.rowIndex - (tr.rowIndex % 3)];

alert(tr.cells[0].innerHTML); 
```

* * *

或者，如果不能保证每 3 行，您可以遍历并测试`rowSpan`.

```
var tr = this.parentNode.parentNode;

while (tr && tr.cells[0].rowSpan === 1)
    tr = tr.parentNode.rows[tr.rowIndex - 1];

alert(tr.cells[0].innerHTML); 
```

* * *

FWIW，您可能应该利用多个`<tbody>`元素。这让事情变得简单多了。

```
<table id="foo" border="1">
    <tbody>
        <tr> 
            <td rowspan="3" class="date">Monday</td> 
            <td>Cell A1 <a href="#" class="edit">edit</a></td> 
        </tr>
        <tr> 
            <td>Cell A2 <a href="#" class="edit">edit</a></td> 
        </tr>
        <tr> 
            <td>Cell A3 <a href="#" class="edit">edit</a></td> 
        </tr>
    </tbody>
    <tbody>
        <tr> 
            <td rowspan="3" class="date">Tuesday</td> 
            <td>Cell B1 <a href="#" class="edit">edit</a></td> 
        </tr>
        <tr> 
            <td>Cell B2 <a href="#" class="edit">edit</a></td> 
        </tr>
        <tr> 
            <td>Cell B3 <a href="#" class="edit">edit</a></td> 
        </tr>
    </tbody>
</table> 
```

然后它只是：

```
var tr = this.parentNode.parentNode.parentNode.rows[0];

tr.cells[0].innerHTML; 
```

# c# - 当您关闭另一个表单时，C# 打印预览会关闭

> ID：13453527
> 
> 赞同：0
> 
> 时间：2012-11-19T12:10:09.320
> 
> 标签：c#, winforms, printing, progress

我正在显示一些大页面的打印预览窗口。这些渲染需要一些时间，所以我想显示比默认的“第 1/1 页”消息更多的进度信息。

我创建了一个简单的 windows 窗体项目，显示了我当前的方法：

（您可以创建一个包含两个表单的新 Windows 表单项目，如果您愿意，可以复制粘贴）

```
public event EventHandler PrintReady;
public event ProgressChangedEventHandler ProgressChanged;

private void button1_Click(object sender, EventArgs e)
{
  var printDocument = new PrintDocument();
  printDocument.PrintPage += new PrintPageEventHandler(printDocument_PrintPage);
  printDocument.EndPrint += new PrintEventHandler(printDocument_EndPrint);

  var printPreviewDialog = new PrintPreviewDialog();
  printPreviewDialog.Document = printDocument;

  // Create the 'progress' form.
  var form2 = new Form2(this);
  form2.Show();

  printPreviewDialog.ShowDialog();            
}

void printDocument_PrintPage(object sender, PrintPageEventArgs e)
{
  for (int i = 0; i < 100; i++)
  {
    // This is where I do some rendering.
    Thread.Sleep(20);
    if (this.ProgressChanged != null)
    {
      this.ProgressChanged.Invoke(this, new ProgressChangedEventArgs(i, null));
    }
  }            
}

void printDocument_EndPrint(object sender, PrintEventArgs e)
{
  if (this.PrintReady != null)
  {
    this.PrintReady.Invoke(this, null);
  }
} 
```

然后当然是我的进度表：

```
public Form2(Form1 form1)
{
  form1.ProgressChanged += new ProgressChangedEventHandler(ProgressChangedHandler);
  form1.PrintReady += new EventHandler(PrintReadyHandler);
  InitializeComponent();
}

void PrintReadyHandler(object sender, EventArgs e)
{
  this.Close();
}

void ProgressChangedHandler(object sender, ProgressChangedEventArgs e)
{
  progressBar1.Value = e.ProgressPercentage;
} 
```

'this.Close()' 也关闭了我的打印预览！如果我删除该行，则仅显示打印预览并保持打开状态。所以 Close() 函数正在关闭进度窗口和 PrintPreview 窗口。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:46:27.380

我认为您需要将“打印预览”对话框的所有者指定为 form1 - 见下文：

```
printPreviewDialog.ShowDialog(this); 
```

# iphone - 如何将程序的启动与与 PC 的特定设备连接相关联

> ID：13453533
> 
> 赞同：0
> 
> 时间：2012-11-19T12:10:35.113
> 
> 标签：iphone, device, connect, autorun, associate

我的第一个问题，所以要温柔.. :)

每次将我的 iPhone 连接到我的 PC 时，我都想让某个位于 PC 的程序运行（而不是 iTunes）。**特别是 - iTools，它是iTunes**的一种替代品。

根据我的研究，我了解到它涉及在以下位置添加/操作一些注册表值（类似于“ **ServicesAutoStartOnConnect** ”）`HKEY_LOCAL_MACHINE/SOFTWARE/Microsoft/Windows CE`：当我在那里查看时，在 Microsoft 下，没有**Windows CE Services**子文件夹。

我正在使用**win7 教授**。如前所述，该设备是我的**iPhone4（上面装有 iOS6.0.1）**。

任何人都可以给我一些有组织的步骤来完成这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:27:42.883

不确定您是否知道[SuperUser.com](https://superuser.com/)。这是一个站点，很像这个站点，但更适合您在此处提出的问题类型。例如，我在 'iphone' + 'connect' + 'itunes' 上进行了搜索，并找到了一些可能的助手 - [SuperUser Search](https://superuser.com/search?q=iphone%20connect%20itunes&submit=search)

# cordova - 使用 Phonegap 打包时出现空白屏幕

> ID：13453534
> 
> 赞同：0
> 
> 时间：2012-11-19T12:10:35.767
> 
> 标签：cordova, sencha-touch, sencha-touch-2

当我使用 Phonegap 构建器 (https://build.phonegap.com/) 打包我的 Sencha Touch 应用程序时，构建时不会出现任何错误。虽然，当我启动应用程序时，我得到一个空白（白色）屏幕并且没有任何反应。

我能做错什么？

我的 index.html 文件如下所示：

```
<!DOCTYPE html>
<html>
<head>
<title>My app</title>
<link rel="stylesheet" href="app.css" type="text/css">
<link href="resources/css/app.css" rel="stylesheet" type="text/css" />
<link href="resources/plugins/SliderFieldExtended.css" rel="stylesheet" type="text/css"    />
<link href="styles/OrangeTheme.css" rel="stylesheet" type="text/css" />
<script src="resources/lib/sencha-touch-all.js" type="text/javascript"></script>
<script type="text/javascript" src="app.js"></script>
<script type="text/javascript" src="resources/plugins/SliderFieldExtended.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true">     </script>
</head>
<body></body>
</html> 
```

PS。我正在使用 Sencha Touch 2.0.1。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:56:19.037

我为您的黑屏问题找到了一个对我有用的解决方案。如果您将 .zip 文件上传到 Phonegap Builder，Phonegap 的版本默认设置为最新版本，目前为 2.1.0。在这种情况下，我也会看到空白屏幕，但如果我将版本更改为 2.0.0 或更低版本，我的应用程序就可以正常工作。

要更改版本，请转到“设置”选项卡并在“配置”下选择正确的版本。

最后一件事，在您的`index.html`引用中`phonegap.js`，但此文件不包含在您的文件夹中。

祝你好运！

# javascript - `var options = options || 之间的区别 {}` 和 `选项 || （选项 = {}）`

> ID：13453537
> 
> 赞同：6
> 
> 时间：2012-11-19T12:10:40.447
> 
> 标签：javascript

我经常使用`var options = options || {}`默认为空对象的方式。它通常用于初始化选项对象，以防它未在函数调用的参数中传递。

问题是我已经在几个地方（博客文章、源代码）阅读过`options || (options = {})`更好地表达开发人员意图的地方。有人可以详细说明吗？我看不出两者之间的功能差异，所以我必须在这里遗漏一些东西。

- - 编辑

我在几个地方的 Backbone.js 源代码中看到了，例如[https://github.com/documentcloud/backbone/blob/0.9.2/backbone.js#L273](https://github.com/documentcloud/backbone/blob/0.9.2/backbone.js#L273)

我想我也在 jQuery 的源代码中看到了它。并且在蓬勃发展的多个 Js 写作风格指南中。

--- 编辑 2 代码示例：

```
var func = function(param, options) {
   // How I do it
   var options = options || {};
   // How I should do it in the "same" way
   options = options || {};
   // The "other" way
   options || (options = {});

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T12:15:04.290

没有真正的区别，假设你的意思是：

```
function fn(options) {
    // type a
    options = options || {};

    // type b
    options || (options = {});
} 
```

主要是偏好问题，我认为（a）更清晰，我不喜欢在 LHS 上没有赋值的语句。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T12:14:04.827

没有功能上的区别。

第二个结构（主观上）*看起来*比第一个结构做得更多。

相反的论点是第一个构造是一种常见的模式，因此更容易*识别*它所做的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T12:30:42.750

他们应该做同样的事情，但有更好的方法。

从理论上讲，第二个，仅在值是错误的情况下分配，可以消除分配并更快。实际上，在 jsperf 中，我们看到它是 (12%)。

事实上，显式 if 语句与条件然后赋值一样快：

```
if(!options)
    options = {}; 
```

[在您的浏览器/机器上尝试测试](http://jsperf.com/defaulting-falsiness)。

我认为明确的 if 是最清楚的，并且没有惩罚。

编辑：

**如果您期望将对象传递给函数**，那么我认为更好的测试是：

```
if(typeof options !== 'object') 
    options = {}; 
```

这将确保您之后有一个对象，即使它是空的。任何其他测试（对于未定义或虚假）将允许真实的非对象通过非零数字或非空字符串。然而，正如 jsperf 所示，这慢了约 15%。由于您仅在进入将要处理对象的函数时执行此操作，因此我认为这是一个值得的权衡，并且**几乎不比 always-assign 慢**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T12:42:32.040

有一个功能差异：一个使用`var`，另一个不使用。如果`options`变量有可能在当前作用域中不存在，则最好使用`var`而不是冒险`options`隐式泄漏到外部作用域中。

如果 options 保证存在（例如，在参数包括 的函数中`options`），则这两个语句在功能上是相同的，因此问题归结为`options = options || {}`vs的相对风格优点`options || (options = {})`。就我个人而言，我认为差别不大：两者都需要相同的 JavaScript`||`运算符如何工作的知识，所以一旦你从等式中删除了这个因素，我可能会倾向于`options = options || {}`因为更短更简单而更具可读性。在这两种情况下，开发人员的意图对我来说似乎同样清楚。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T12:16:36.400

两者之间确实没有功能差异，即使它们的机制并不相同。

第一种形式将局部变量`options`设置为等于参数`options`或如果参数具有虚假值（例如，如果尚未提供）则设置为空对象。

第二种形式计算参数的值`options`（如果它不是假的），否则计算为空对象分配给该参数的结果。所以与第一种形式的区别在于，如果`options`为真，则不执行赋值。

我个人认为第二种形式是可读性较差的版本

```
if(!options) {
    options = {};
} 
```

在功能*和*力学上与之相同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-19T12:17:57.553

没有功能上的区别，想法是`options || (options = {});`更接近程序员*真正*想要表达的，其实就是：

```
if (typeof options == "undefined") {
  options = {};
} 
```

`||`运算符用于制作更短的代码，而不是更清晰的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-19T12:20:44.760

绝对是主观的，但我不会使用第二个。

原因：我觉得表达式中的赋值比顶层更深=混淆。

一些像这样的 C 程序员（我曾经这样做过），他们会做一些额外的括号之类的事情，以使赋值更加清晰......通过让整个表达式看起来不熟悉。如果您可以直截了当，为什么还要麻烦？

最清楚的可能是：

```
if (!options) options = {}; 
```

# java - Java switch 语句，数组的搜索

> ID：13453540
> 
> 赞同：1
> 
> 时间：2012-11-19T12:10:56.140
> 
> 标签：java

```
//TestEmployeesProgram driver with menu & object array.
import java.util.*;
public class TestEmployeesProgram {

public static Scanner console = new Scanner(System.in);

public static void main(String[] args) {

    final int MAX = 7;

    Employee employee[] = new Employee[MAX];

    int choice,k;
    String name;
    boolean notFound;

    employee[0] = new Manager("Jerry Bloggs","gfr",5,38.5);
    employee[1] = new Manager("Joe Bloggs","gdr",4,32.5);
    employee[2] = new Admin("Mary Jennings","nnv",35.3,88.5,34.3);
    employee[3] = new Clerk("Brian Jones","bbl",42.4,78.5,23.5,45.3);
    employee[4] = new Manager("John Bloggs","gvr",5,33.5);
    employee[5] = new Admin("Bridget Jennings","nvv",45.3,98.5,36.3);
    employee[6] = new Clerk("Jack Jones","bbb",43.4,78.5,23.5,47.3);

    //Initial Read
    choice = showMenu();

    //Continue Until 4/Exit
    while (choice != MAX) {

        switch (choice) {
        case 1://Manager

            System.out.println();
            System.out.printf("%s %-16s %-10s %6s","Name","Id","Hours Worked","Pay");
            System.out.println("\n==================================================");

            for (k = 0; k < MAX; ++k)
            {
                if (employee[k] instanceof Manager){ //use of string method instance of.

                    System.out.println(employee[k].toString());
                }
            }
            break;

        case 2://Administration

            System.out.println();
            System.out.printf("%s %-16s %-10s %6s %-19s","Name","Id","Hours Worked","Pay","Admin Quota");
            System.out.println("\n==================================================");

            for (k = 0; k < MAX; ++k)
            {
                if (employee[k] instanceof Admin){
                System.out.println(employee[k].toString());

                }
            }
            break;

        case 3://Clerk

            System.out.println();
            System.out.printf("%s %-16s %-10s %6s %-19s","Name","Id","Hours Worked","Pay","Admin Quota","Units Sold");
            System.out.println("\n==================================================");

            for (k = 0; k < MAX; ++k)
            {
                if (employee[k] instanceof Clerk){
                System.out.println(employee[k].toString());
                }
            }
            break; 
```

我正在运行程序，并且在案例 4 中的名称搜索直接进入默认的“找不到员工姓名”并且不允许用户输入。我查看了代码但找不到错误，有什么提示或帮助吗？

```
 case 4://Name search

            System.out.print("Enter employee name: ");
            name = console.nextLine();

            k = -1;
            notFound = true;

            while ((k < MAX-1) && (notFound))
            {
                ++k;
                if (name == employee[k].getName()){

                    System.out.println();
                    System.out.printf("%s %-16s %-10s %6s %-19s","Name","Id","Hours Worked","Pay","Admin Quota","Units Sold");
                    System.out.println("\n==================================================");

                    System.out.println(employee[k].toString());
                    System.out.println();
                    notFound = false;
                }

            }//end of case 4 while.
             if (notFound){
                System.out.println("Employee name not found\n");
            }
            break;

        case 7://exit
            System.out.println("Program exiting...");
            System.exit(0);

        default:
            System.out.println("Invalid menu choice 1..3 of 7 to Exit");

        }//end of switch

        //sub read 
        choice = showMenu();

    }//end of while 

}//end of main

//Menu method for employee selection.
public static int showMenu()
{

    int choice;
    System.out.println();

    System.out.println("Employee Program Menu");

    System.out.println("1.Show Manager pay details ");
    System.out.println("2.Show Admin pay details ");
    System.out.println("3.Show Clerk pay details ");
    System.out.println("4.Search by employee name ");
    System.out.println("7.Exit");

    System.out.print("Enter option: ");
    choice = console.nextInt();

    return choice;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:12:49.757

有两个错误。第一个在这里：

```
System.out.print("Enter option: ");
choice = console.nextInt(); 
```

该`nextInt`方法不使用行尾字符。试试这个：

```
System.out.print("Enter option: ");
String line = console.nextLine();
choice = Integer.parseInt(line); 
```

第二个错误是您应该在这里使用`equals`而不是`==`比较字符串：

```
 if (name == employee[k].getName()) 
```

试试这个：

```
 if (name.equals(employee[k].getName())) 
```

`==`操作员测试两个字符串是否是同一个对象（即字符串在内存中的相同位置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:13:50.760

```
if (name == employee[k].getName()) 
```

将其更改为

```
if (name.equals(employee[k].getName())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:17:59.820

这是一个常见的问题。当您使用 nextInt() 读取整数值时，仅读取整数字符并将 \n 留在缓冲区中，然后当您调用 nextLine() 时，它不会提示用户输入，因为它已经有一个 ' \n'

为避免这种情况，在 showMenu 方法中执行

```
 console.nextLine(); 
```

在您使用 nextInt() 获得选择之后。

showMenu 的最后一部分是：

```
 choice=console.nextInt();
 console.nextLine();
 return choice; 
```

你应该使用 .equals() 方法来比较字符串，如下所示。

```
 if (name.equals(employee[k].getName())) 
```

祝你好运 ：）

# iphone - 如何从项目内部的项目中调用 ViewController？

> ID：13453546
> 
> 赞同：0
> 
> 时间：2012-11-19T12:11:24.193
> 
> 标签：iphone, objective-c, ios, xcode

我的项目中有另一个项目。

![在此处输入图像描述](../Images/8d335ab77c0a98524add19c0b307a612.png)

```
TutorialViewController *con = [[TutorialViewController alloc] initWithNibName:@"TutorialViewController" bundle:nil WithFrame:CGRectMake(0, 0, 320, 460) AndImages:imageArray PageControlLocation:kPageControlLocationDown WithColor:[UIColor blackColor]];
    [self presentModalViewController:con animated:YES]; 
```

我想调用它`TutorialViewController` `ViewController`，但我认为（知道）编译器没有找到这个笔尖，因为他没有在主包中找到它......

那么有人知道怎么称呼它`VC`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:19:43.137

您必须通过 NSBundle 类显式发送路径，例如：

```
TutorialViewController *con = [[TutorialViewController alloc] initWithNibName:@"TutorialViewController" bundle:[[NSBundle mainBundle] pathForResource:File_Name ofType:FILE_TYPE inDirectory:your_directory]] WithFrame:CGRectMake(0, 0, 320, 460) AndImages:imageArray PageControlLocation:kPageControlLocationDown WithColor:[UIColor blackColor]];
[self presentModalViewController:con animated:YES]; 
```

如果您提供 nil 来捆绑，那么它将在活动项目中搜索该文件。

欲了解更多信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)

# iphone - ios 6 故事板和基于方向的自定义布局

> ID：13453547
> 
> 赞同：2
> 
> 时间：2012-11-19T12:11:29.900
> 
> 标签：iphone, ipad, layout, ios6, storyboard

一直在尝试为此建议的方法找到一些提示，但运气不佳。

我正在寻找的只是知道处理`portrait/landscape`模式自定义布局的最佳方法是什么。

我已经看到一些帖子说在故事板中添加 2 个视图到相同的视图`ViewController`并`show/hide`基于方向变化，而有些人建议`ViewController`对每个方向使用完全独立的视图。

这是首选方法中的哪一个。我刚刚开始我的申请，所以我宁愿选择被广泛接受的方法，也不愿以后处理并发症。

Apple 文档仍然在这方面讨论 nib 文件而不是故事板，因此没有太大帮助。

我的主要关注点是性能（我很乐意编写代码而不是依赖于它的图形界面）。单独的 ViewController 似乎以一种干净的方式保持代码，但是如果这涉及在每次方向更改时填充视图/清除它们，似乎有点昂贵（不确定它是否相关）。

此外，如果应用程序中的每个场景都有 2 个布局，那么管理它们我不确定当应用程序变大时会有多大的痛苦。

请为我的情况指出一个合适的方法，

我不关心向后兼容性。只是担心最新的`Xcode`，`ios6`如果它对决定很重要

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:12:40.293

我想说这真的取决于纵向和横向 UI 的定制水平。我所做的大量实现可以通过在切换方向时自动调整大小/自动布局来处理，或者在 UI 旋转并触发回调时简单地自己移动元素。移动元素根本不应该是一项昂贵的操作，因为它是一种非常常见的情况（尽管这再次取决于您的 UI 的复杂性）。

# javascript - 如何从点击方法调用自己的函数

> ID：13453550
> 
> 赞同：0
> 
> 时间：2012-11-19T12:11:47.903
> 
> 标签：javascript, onclick

我知道这听起来很愚蠢，但我不知道如何从“onclick”函数调用我的函数？

我做了自己的课，我想做的是在课堂上调用我的函数。我在 onclick 函数中尝试了各种东西：

*   函数（）{this.getWidth（）}
*   this.getWidth()
*   测试.getWidth()

函数数据网格（_parent，_data）{ this.table = []; this.parent = $("#"+_parent)[0] ? $("#"+_parent) : ($("."+_parent)[0] ? $("."+_parent) : ($(+_parent)[0] ? $(_parent) : null)); this.data = _data;

```
this.Datagrid = function(parent,data)
{
    this.setParent(parent);
    if(data != null)
        this.setData(data);
    return this;
}

this.setParent = function(parent)
{
    return this.parent = $("#"+parent)[0] ? $("#"+parent) : ($("."+parent)[0] ? $("."+parent) : ($(+parent)[0] ? $(parent) : null));
}

this.getParent = function()
{return this.parent;}

this.setData = function(data)
{this.data = data;}

this.buildTable = function()
{
    var dtTbl = [];
    dtTbl.push('<table class="TimeSheetmainTable" cellpadding="10" cellspacing="0" border="0">');

    var style;

    //Header//////////////////////
    dtTbl.push('<tr class="header">');
    for (var cell in this.data.row[0].cell) {
        dtTbl.push('<td>' + this.data.row[0].cell[cell].id + '</td>');
    }
    dtTbl.push('</tr>');
    //Content//////////////////////
    for(var r in this.data.row)
    {
        if (r % 2 == 0) { style = 'class="r1" onmouseover="this.className=\'hover\'"  onmouseout="this.className=\'r1\'"'; }
        else { style = 'class="r2" onmouseover="this.className=\'hover\'"  onmouseout="this.className=\'r2\'"'; }

        dtTbl.push('<tr ' + style + ' >');
        for(var c in this.data.row[r].cell)
        {
            dtTbl.push('<td alt="' + this.data.row[r].cell[c].id + '">' + this.data.row[r].cell[c].value + '</td>');
        }
        dtTbl.push('</tr>');
    }
    //Footer//////////////////////
    dtTbl.push('<tr class="footer">');
    for (var cell in this.data.row[0].cell) {
        dtTbl.push('<td>&nbsp;</td>');
    }
    dtTbl.push('</tr></table>');

    this.parent.html(dtTbl.join(''));
}

this.buildTableDiv = function()
{
    var tableString = [];
    //Header//////////////////////
    tableString.push('<div class="container"><div class="header"><table><tr id="header">');
    for (var cell in this.data.row[0].cell) {
        tableString.push('<td>' + this.data.row[0].cell[cell].id + '</td>');
    }
    tableString.push('</tr></table></div>');
    //Content//////////////////////
    tableString.push('<div class="content"><table>');
    var TD1 = new Object();
    var TD2 = new Object();

    for(var r in this.data.row)
    {
        if (r % 2 == 0) { style = 'class="r1" onmouseover="this.className=\'hover\'"  onmouseout="this.className=\'r1\'"'; }
        else { style = 'class="r2" onmouseover="this.className=\'hover\'"  onmouseout="this.className=\'r2\'"'; }

        for(var c in this.data.row[r].cell)
        {
            if(c == 0)
            {   if(TD1.value != this.data.row[r].cell[c].value){
                    TD1.value = this.data.row[r].cell[c].value;
                    TD1.show = true;
                }
                else
                    TD1.show = false;
            }
            if(c == 1)
            {   if(TD2.value != this.data.row[r].cell[c].value){
                    TD2.value = this.data.row[r].cell[c].value;
                    TD2.show = true;
                }
                else
                    TD2.show = false;
            }   
            if(TD1.show && c == 0){//First line
                tableString.push('<tr id="content" ' + style + ' >');
                tableString.push('<td alt="' + this.data.row[r].cell[c].id + '"><input type="button" class="arrow_down" /> ' + this.data.row[r].cell[c].value + '</td>');
                for(var c = 0; c < this.data.row[r].cell.length - 1; c++)
                {
                    tableString.push('<td>&nbsp</td>');
                }
                tableString.push('</tr>');
            }
            else if(TD2.show && c == 1)//Second line
            {
                tableString.push('<tr id="content" ' + style + ' >');
                tableString.push('<td>&nbsp;</td><td alt="' + this.data.row[r].cell[c].id + '">' + this.data.row[r].cell[c].value + '</td>');
                for(var c = 0; c < this.data.row[r].cell.length - 2; c++)
                {
                    tableString.push('<td>&nbsp</td>');
                }
                tableString.push('</tr><tr id="content" ' + style + ' ><td>&nbsp;</td><td>&nbsp;</td>');
            }
            else if(!TD2.show && c == 1)//third line (distincts second cells name)
            {
                tableString.push('<tr id="content" ' + style + ' >');
                tableString.push('<td>&nbsp;</td><td alt="' + this.data.row[r].cell[c].id + '">&nbsp;</td>');
            }
            else if(c > 1)//Rest filling (not ordered stuff)
            {
                tableString.push('<td alt="' + this.data.row[r].cell[c].id + '">' + this.data.row[r].cell[c].value.replace("","&nbsp;") + '</td>');
            }
        }
        tableString.push('</tr>');
        // $(".arrow_down").children(":nth-child(1)").click(function(){alert("test");});
    }
    tableString.push('</table></div>');
    //Footer//////////////////////
    tableString.push('<div class="footer"><table><tr id="footer">');
    for (var cell in this.data.row[0].cell) {
        tableString.push('<td>&nbsp;</td>');
    }
    tableString.push('</tr></table></div></div>');

    this.parent.html(tableString.join(''));

    // Setting width to all cells
    for (var i in this.data.row[0].cell)
    {
        cell = parseInt(i)+1;
        var h = this.parent.children(":first").children(".header").children("table").children("tbody").children("tr").children(":nth-child("+ cell +")").width();
        var c = this.parent.children(":first").children(".content").children("table").children("tbody").children("tr").children(":nth-child("+ cell +")").width();
        var f = this.parent.children(":first").children(".footer").children("table").children("tbody").children("tr").children(":nth-child("+ cell +")").width();
        var width = h > c ? h : (c > f ? c : f);

        this.parent.children(":first").children(".header").children("table").children("tbody").children("tr").children(":nth-child("+ cell +")").width(width);
        this.parent.children(":first").children(".content").children("table").children("tbody").children("tr").children(":nth-child("+ cell +")").width(width);
        this.parent.children(":first").children(".footer").children("table").children("tbody").children("tr").children(":nth-child("+ cell +")").width(width);
    }
    // this.activateScroller(0);
}

this.getScrollerWidth = function()
{
    var div = $('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');
     // Append our div, do our calculation and then remove it 
    $('body').append(div); 
    var w1 = $('div', div).innerWidth(); 
    div.css('overflow-y', 'scroll'); 
    var w2 = $('div', div).innerWidth(); 
    $(div).remove(); 
    return (w1 - w2); 
}

this.activateScroller = function(value)
{
    var d = [];
    d.push('<div style="height: ' + this.parent.children(":first").children(".content").height() + '; width:20px; background:#FFF"><div style="background:#333; height:200">&nbsp;</div></div>');

    this.parent.children(":first").children(".content").scrollTop(value);
}

expandParent = function()
{
    alert(this.parent);
} 
```

};

我有点基于 javascript 的 makig 数据网格。我不允许使用 jQuery UI。我的数据网格是由表格组成的。现在我尝试在像用户名这样的 td 元素中添加一个按钮问题是我无法在不创建实例的情况下访问我的类中的函数。甚至可以在不创建实例的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:14:47.223

使用您的`generateHTML`函数生成 html 后，onclick on div 的处理程序将失去“this”的上下文。更具体地说，`this`在 div 的 onclick 处理程序中，指的是 DOM 中的那个 div 节点。

要访问 getWidth 方法，您必须使其可用于全局上下文或（更好的解决方案）执行以下操作：

```
// new version of your generateHTML function
this.generateHTML() {
   var str = [];
   str.push('<div><input type="button" value="button"/></div>');
   var that = this;
   $("#testDiv").append(str.join('')).find('button:first').click(function() {that.getWidth()});
} 
```

编辑：为了进一步解释上面的代码是如何工作的，这里是带有注释的简化示例。

```
​​Test = function() {    
    this.generate = function() {
        var newnode = $('<button>click me</button>');        
        $("body").append(newnode);
        // "cache" this in a variable - that variable will be usable in event handler
        var that = this;
        // write event handler function here - it will have access to your methods by using "that" variable
        newnode.click(function(e) {
            // here this refers to button not Test class
            // so we have to "reach" to outer context to gain access to all methods from Test
            that.doSomething('learn');
        })
    }
    this.doSomething = function(x) {
        alert('do it: '+x);            
    }
}

// initialize part
// make instance of Test "class"
t = new Test();
// generate the button (clicking on a button will essentialy fire Test.doSomething function in a context of "t"
t.generate(); 
```

# java - 如何在编辑文本中添加可触摸的图像视图？

> ID：13453553
> 
> 赞同：1
> 
> 时间：2012-11-19T12:11:51.970
> 
> 标签：java, android, android-layout, android-widget

我需要在像 ms word screen 这样的编辑文本中添加一个可触摸的图像视图。我们如何为此目的设计一个 android 布局屏幕？我尝试了下面显示的代码：

```
public class edittext extends EditText 
{
     public String defaultValue = "";
        final Drawable imgX = getResources().getDrawable(android.R.drawable.presence_offline ); // X image

    private Html.ImageGetter imageGetter;
    public edittext(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        init();
        // TODO Auto-generated constructor stub
    }
    public edittext(Context context, AttributeSet attrs, int defStyle) 
    {
        super(context, attrs, defStyle);
        init();
        // TODO Auto-generated constructor stub
    }
    public edittext(Context context) 
    {
        super(context);
        init();
        // TODO Auto-generated constructor stub
    }
     void init()  {

            // Set bounds of our X button
            imgX.setBounds(0, 0, imgX.getIntrinsicWidth(), imgX.getIntrinsicHeight());      

            // There may be initial text in the field, so we may need to display the button
            manageClearButton();

           edittext.this.setOnTouchListener(new OnTouchListener() {
                public boolean onTouch(View v, MotionEvent event) {

                    edittext et = edittext.this;

                    // Is there an X showing?
                    if (et.getCompoundDrawables()[2] == null) return false;
                    // Only do this for up touches
                    if (event.getAction() != MotionEvent.ACTION_UP) return false;
                    // Is touch on our clear button?
                    if (event.getX() > et.getWidth() - et.getPaddingRight() - imgX.getIntrinsicWidth()) {
                        et.setText("");
                        edittext.this.removeClearButton();
                    }
                    return false;
                }
            });

            edittext.this.addTextChangedListener(new TextWatcher() {
                public void onTextChanged(CharSequence s, int start, int before, int count) {

                   edittext.this.manageClearButton();
                }

                public void afterTextChanged(Editable arg0) {
                }

                public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                }
            });
        }

        void manageClearButton() {
            if (this.getText().toString().equals("") )
                removeClearButton();
            else
                addClearButton();
        }
        void addClearButton() {
            this.setCompoundDrawables(this.getCompoundDrawables()[0], 
                    this.getCompoundDrawables()[1],
                    imgX,
                    this.getCompoundDrawables()[3]);
        }
        void removeClearButton() {
            this.setCompoundDrawables(this.getCompoundDrawables()[0], 
                    this.getCompoundDrawables()[1],
                    null,
                    this.getCompoundDrawables()[3]);
        }   

} 
```

如果有人知道，请帮助我谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:44:29.150

我正在这样做。Drawable 将位于 EditText 的右侧。请尝试代码。

```
EditText contactLine = new EditText(getActivity());
Drawable drawable =  getActivity().getResources().getDrawable(...);
drawable.setBounds(new Rect(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight()));
contactLine.setCompoundDrawables(null, null, drawable, null);
contactLine.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Drawable co =  v.getCompoundDrawables()[2];
            if (co == null) {
                return false;
            }
            if (event.getAction() != MotionEvent.ACTION_DOWN) {
                return false;
            }
            if (event.getX() > v.getMeasuredWidth() - v.getPaddingRight()
                    - co.getIntrinsicWidth()) {
                whatYouWantToDo();
                return true;
            } else {
                return false;
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-28T11:01:00.253

或者您可以简单地使用[ImageButton](http://developer.android.com/reference/android/widget/ImageButton.html) ，例如：

```
public void addListenerOnImageButton() {
            imageButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View arg0) {
                    // called when imageButton Clicked
                }

            });} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:20:01.400

也许你可以在使用RelativeLayout 的布局中做到这一点。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/et1"
        android:layout_width="200dp"
        android:layout_height="100dp"
        android:clickable="false"
        android:focusable="false"
        android:background="@drawable/ic_action_search"/>
    <ImageView 
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/et1"
        android:paddingLeft="5dp"
        android:background="@drawable/ic_launcher"
        />

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T19:50:31.940

对于 RelativeLayout 中的可移动视图，您可以这样做。DragView 可以是 ImageView。

```
 View DragView;

     private boolean inDrag;
     int xDragTouchOffset, yDragTouchOffset;
     @Override
    public boolean onTouchEvent(View View, MotionEvent event) {
        final int action = event.getAction();
        final int x = (int) event.getX();
        final int y = (int) event.getY();
        boolean result = false;
        if (action == MotionEvent.ACTION_DOWN)
            inDrag = true;
            xDragTouchOffset = x;
            yDragTouchOffset = y;
            result = true;
        } else if (action == MotionEvent.ACTION_MOVE && inDrag == true) {
            setDragImagePosition(x, y);//HERE YOU HANDLE THE POSITION OF YOUR VIEW
            result = true;
        } else if (action == MotionEvent.ACTION_UP && inDrag ==true) {

            inDrag = false;
            result = true;
        }

        return result;

    }

    private void setDragImagePosition(int x, int y){

        RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) DragView
                .getLayoutParams();

        lp.setMargins(x - xDragImageOffset - xDragTouchOffset, y
                - yDragImageOffset - yDragTouchOffset, 0, 0);
        dragImage.setLayoutParams(lp);
     } 
```

# oracle - 我怎样才能修复这个触发器它看起来不错，我得到一个 PLS-00103

> ID：13453558
> 
> 赞同：0
> 
> 时间：2012-11-19T12:12:21.537
> 
> 标签：oracle, plsql, triggers

以下触发代码在一定数量的访问后对账单应用折扣，但我收到以下错误 PLS-00103：在预期以下情况之一时遇到符号“=”： := 。（ @ ％ ; 指标

```
 CREATE OR REPLACE TRIGGER CHECK_DISCOUNT
  BEFORE INSERT OR UPDATE OF C_NO,BILL ON APPOINTMENT
  FOR EACH ROW

  DECLARE

  CURSOR C_APPTMNT
  IS
  SELECT C_NO,COUNT(C_NO) 
  FROM APPOINTMENT GROUP BY C_NO;

  V_C_NO APPOINTMENT.C_NO%TYPE;
  VISIT NUMBER(2);
  V_TEN NUMBER(3):=0.9;

  BEGIN

  OPEN C_APPTMNT;
  FETCH C_APPTMNT INTO V_C_NO,VISIT;

  IF VISITS = 3 AND :NEW.C_NO = V_C_NO THEN 
  :NEW.BILL := :NEW.BILL * V_TEN
  END IF;

  END;
  / 
```

得到一个新的错误 PLS-00103：在预期以下之一时遇到符号“END”：。( * @ % & = - + ; < / > at in is mod not rem <> or != or ~= >= <= <> and or like between || 将符号“;”替换为“END”继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:14:10.643

作业需要一个`:`

```
:NEW.BILL := :NEW.BILL * V_TEN; 
```

# javascript - 弹出模式文本字段

> ID：13453559
> 
> 赞同：1
> 
> 时间：2012-11-19T12:12:24.340
> 
> 标签：javascript, jquery, modal-dialog

我正在寻找一个脚本，当我单击输入框时会启动一个带有 TextField 和保存和取消按钮的弹出模式。因此，当我单击保存时，我在文本字段中键入的文本将保存在输入框中。

* * *

我很抱歉忙于其他事情，我很抱歉我的问题没有那么描述性（只是一个新手）。
我目前正在使用这个：
mywebdeveloperblog.com/my-jquery-plugins/jquery-popbox
我唯一的问题是没有“取消”按钮，因此无法在 iOS 或其他触摸设备中取消。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:16:46.113

搜索 jquery ('#seuID').onclick() 函数，在它调用的函数中带有警报，并将结果传递到变量或数组中，这样你就可以用它做你想做的事了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:17:16.510

尝试

```
$('input[type="text"]').focus(function(){
    //your code here
}); 
```

[你可以在这里](http://api.jquery.com/focus/)找到更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:24:34.283

```
$(document)
  .ready(function () {
  $('input')
    .click(    
  function () {
    var NWin = window.open($(this)
      .prop('href'), '', 'height=800,width=800');
    if (window.focus) {
      NWin.focus();
    }
    return false;
  })
}); 
```

# c# - 获取以兆字节为单位的物理内存使用情况

> ID：13453560
> 
> 赞同：4
> 
> 时间：2012-11-19T12:12:30.273
> 
> 标签：c#, memory, monitoring

我正在寻找以 MB 为单位的当前使用的物理内存量。任务管理器中的东西

![在此处输入图像描述](../Images/6bc71bfb0ecb9957bc08a5fd760530b3.png)

我目前正在使用`PerformanceCounter("Memory", "Available MBytes", true);`，但它也包括页面文件（我相信），这不是我想要的。我还想要获得已用内存而不是可用内存的选项。

我正在处理的应用程序将监视物理内存使用情况，直到达到所需的阈值。然后它将重新启动一些Windows服务。

如果你好奇我为什么要开发这样一个程序。我们的一些程序在服务器上存在内存泄漏，我们必须重新启动 Windows 服务以释放内存，直到我们解决所有内存泄漏，我正在制作这个应用程序来帮助保持服务器运行和响应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T12:19:20.720

使用[PerformanceCounter 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)，您可以获得*PF 使用*详情：

```
PerformanceCounter pageCounter = new PerformanceCounter
            ("Paging File", "% Usage", "_Total", machineName); 
```

您可以在此处找到所有类别信息[Process Object](http://technet.microsoft.com/en-us/library/cc780836%28WS.10%29.aspx)。

**添加**，您还可以使用以下方法获取*可用内存*详细信息`PerformanceCounter`：

```
PerformanceCounter ramCounter = PerformanceCounter
            ("Memory", "Available MBytes", String.Empty, machineName); 
```

使用`PerformanceCounter`,`NextValue()`方法可以获得*可用的内存*值`MB`，稍后您可以将其与*阈*值进行比较以停止所需的*Windows 服务*。

```
if (ramCounter.NextValue() > thresholdValue)
{
    // ... Stop Desired Services
} 
```

参考：[一个简单的性能计数器应用程序](http://www.codeproject.com/Articles/29986/A-Simple-Performance-Counter-Application)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:17:09.767

如果您不介意调用内核函数。执行此操作的 C++ 代码是：

```
 MEMORYSTATUSEX statex;
 statex.dwLength = sizeof (statex);
 GlobalMemoryStatusEx (&statex); 
```

在 codeproject 上，您可以了解如何从 c# 调用内核函数：

[http://www.codeproject.com/Articles/1285/Calling-API-functions-using-C](http://www.codeproject.com/Articles/1285/Calling-API-functions-using-C)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:24:32.943

我个人会通过 P/Invoke 使用 Win32 API`GlobalMemoryStatusEx`调用。

您可以在此处找到更多详细信息：- [http://www.pinvoke.net/default.aspx/kernel32.globalmemorystatusex](http://www.pinvoke.net/default.aspx/kernel32.globalmemorystatusex)

# ios - 在 iOS 的表格视图中隐藏单元格的标签

> ID：13453566
> 
> 赞同：0
> 
> 时间：2012-11-19T12:13:00.437
> 
> 标签：ios, uitableview, label, hide, cell

我想在表格视图中隐藏单元格的标签。

```
(void)handleSwipeRight:(UISwipeGestureRecognizer *)gestureRecognizer
{
    //Get location of the swipe
    CGPoint location = [gestureRecognizer locationInView:self.tableView];

    //Get the corresponding index path within the table view
    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:location];

    //Check if index path is valid
    if(indexPath)
    {
        //Get the cell out of the table view
        UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
        //Update the cell or model
        displayLabel.hidden = TRUE;
        [cell setNeedsDisplay];
     }
 } 
```

此代码将标签隐藏在最后一个单元格中，因为我未能指定隐藏滑动单元格标签的代码。

帮助指定要隐藏的滑动单元格标签。

```
displayLabel.hidden = TRUE; 
```

我需要替换此代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:58:32.783

您可以尝试下面的代码，它在我这边工作得很好：

```
- (void)viewDidLoad
    {
          UISwipeGestureRecognizer *recog = [[UISwipeGestureRecognizer alloc]initWithTarget:self
         action:@selector(handleSwipeRight:)];
          recog.delegate = self;
          [recog setDirection:UISwipeGestureRecognizerDirectionRight];

          [testTable addGestureRecognizer:recog];
         // add the swipe gesture recognizer to tableview;

          [super viewDidLoad];

}
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
   {

       return 7;
    }
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath  
 *)indexPath
  {
    static NSString *CellIdentifier = @"Cell";    

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

     if (cell == nil)
      {
        cell = [[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault
             reuseIdentifier:CellIdentifier] autorelease];
       UILabel *aLabel = [[[UILabel alloc]init]autorelease];
       aLabel.frame = CGRectMake(5, 0, 100, 40);
       aLabel.text = [NSString stringWithFormat:@"aLabel %d",indexPath.row+1];
       aLabel.tag = 1;//tag the labels
       [cell.contentView addSubview:aLabel];

       UILabel *bLabel = [[[UILabel alloc]init]autorelease];
       bLabel.frame = CGRectMake(110, 0, 100, 40);
       bLabel.text = [NSString stringWithFormat:@"bLabel %d",indexPath.row+1];
       bLabel.tag = 2;//tag the label
       [cell.contentView addSubview:bLabel];

       UILabel *cLabel = [[[UILabel alloc]init]autorelease];
       cLabel.frame = CGRectMake(215, 0, 100, 40);
       cLabel.text = [NSString stringWithFormat:@"cLabel %d",indexPath.row+1];
       cLabel.tag = 3;//tag the label
       [cell.contentView addSubview:cLabel];

      }

      return cell;
    }

    -(void)handleSwipeRight:(UISwipeGestureRecognizer *)gestureRecognizer
      {
        //Get location of the swipe
        CGPoint location = [gestureRecognizer locationInView:testTable];

       //Get the corresponding index path within the table view
       NSIndexPath *indexPath = [testTable indexPathForRowAtPoint:location];

       //Check if index path is valid
        if(indexPath)
          {
            //Get the cell out of the table view
            UITableViewCell *cell = [testTable cellForRowAtIndexPath:indexPath];
           for (id label in  cell.contentView.subviews)
             {
                if ([label isMemberOfClass:[UILabel class]]) 
                  {
                    UILabel *referedLabel = (UILabel*)label;
                    if (referedLabel.tag == 2) //tag of bLabel;
                      {
                        referedLabel.hidden = YES;

                       }
                    }
                }
             }
          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:28:48.033

我认为 displayLabel 指向表格最后一个单元格中的标签。您将值设置为 displayLabel 的位置。

```
 UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
     //Update the cell or model
     //You should get label from cell here. Currently displayLabel may be pointing to label in last cell, if I am correct you are assigning value to displaylabel in cellForRowAtIndexPath or in any other method.

     displayLabel.hidden = TRUE;
     [cell setNeedsDisplay]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:41:49.483

将您的方法更改为：

```
-(void)handleSwipeRight:(UISwipeGestureRecognizer *)gestureRecognizer
{
    //Get location of the swipe
    CGPoint location = [gestureRecognizer locationInView:self.tableView];

    //Get the corresponding index path within the table view
    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:location];

    //Check if index path is valid
    if(indexPath)
    {
        // If you created a custom cell with a 
        // displayLabel property, change the pointer
        // type from UITableViewCell to that type
        UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
        cell.displayLabel.hidden = YES;

        // Use the following three lines instead, if your cell style is "Subtitle"
        //        cell.textLabel.hidden = YES;
        //        cell.imageView.hidden = YES;
        //        cell.detailTextLabel.hidden = YES;

        [cell setNeedsDisplay];
    }
} 
```

# xcode - 为什么这个联系人总是以 Nil / null 出现，即使我设置它或添加电子邮件？

> ID：13453572
> 
> 赞同：3
> 
> 时间：2012-11-19T12:13:14.637
> 
> 标签：xcode, abaddressbook

在 iOS 6 中，此代码总是给我`Nil`第二个`NSLog`，但第一个总是给出正确的复合名称。因此，我知道我可以访问地址簿，如果我在 中更改名称`addressbook`，代码会记录正确的复合名称。无论我输入多少封电子邮件，联系人`ABMultiValueGetCount`始终是`Nil`. 为什么是这样？

```
ABRecordRef person = (__bridge ABRecordRef)[addressBookArray objectAtIndex:x];

NSLog(@"%@ -", ABRecordCopyCompositeName(person));
NSLog(@"%ld -", ABMultiValueGetCount(ABRecordCopyValue(person, kABPersonEmailProperty))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:26:55.907

明白了...看起来像是我应该预料到的某种 managedObjectContext 条件...

在一个视图控制器中，我这样做了：

```
ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, NULL);
addressBookArray = (__bridge NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);
// Prsented info on the user name, but not on the Emails
CFRelease(addressBook); 
```

在第二个视图控制器中，我通过 addressBookArray 尝试保存一些周期，然后这样做：

```
ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, NULL);
// Successfully accessed name properties (suspect they were chached some where ?
// Unsuccsfully accessed email properties (they have never been accessed so no chache and I get Null
CFRelease(addressBook); 
```

修复...在 secondviewController 中重复：

```
addressBookArray = (__bridge NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook); 
```

宾果问题解决了！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:52:16.630

请检查以下链接。这些可能会解决您的问题。在ios6苹果已经改变了通讯录的权限。

[当用户更改联系人访问权限时，应用程序在 iOS 6 中崩溃](https://stackoverflow.com/questions/12810638/app-crashed-in-ios-6-when-user-changes-contacts-access-permissions)

[iOS 6 地址簿不工作？](https://stackoverflow.com/questions/12517394/ios-6-address-book-not-working)

# java - p:dataTable 中的多个 rowSelection 侦听器

> ID：13453575
> 
> 赞同：0
> 
> 时间：2012-11-19T12:13:20.770
> 
> 标签：java, jsf, primefaces

我需要向 p:dataTable 中的选择侦听器提供建议。我的观点是 primefaces 扩展布局（pe:layout），有北、左和中部分。北部分是桌子，左边是菜单。

这个想法是左侧菜单为所选表行中的数据提供不同的视图，因此，如果行更改，则需要刷新整个视图。（取决于在左侧菜单中选择的视图 - 这些由 bean backigOne、2 和 3 支持，并且当时只有一个处于活动状态）。

所以我决定为每个 bean 使用多个 rowSelect 事件：

```
 <p:dataTable id="" var="wo" value="#{TableBacking.dataList}"
    selection="#{TableBacking.selectedItem}" selectionMode="single" rowKey="#{wo}">

<p:ajax event="rowSelect" listener="#{backingOne.tableChangeListnener}" 
   update="..." disabled="#{leftMenuBacking.selection != "ONE" />
<p:ajax event="rowSelect" listener="#{backingTwo.tableChangeListnener}" 
   update="..." disabled="#{leftMenuBacking.selection != "TWO"/>
<p:ajax event="rowSelect" listener="#{backingThree.tableChangeListnener}" 
   update="..." disabled="#{leftMenuBacking.selection != "THREE" />

...

 </p:dataTable> 
```

这很好用，因为总是在 leftMenuBacking 中选择一个项目，所以当时只会启用一个 ajax 事件。 **然而，问题是，所有的 backingOne、backingTwo 和 backingThree bean 总是被初始化**，因为声明：

```
 listener="#{backingXXX.tableChangeListnener}" 
```

就我而言，初始化成本高昂:(（时间方面）

我需要更好的设计提示，所以功能是相同的，但只有当前选择的菜单的支持 bean（或在 disabled="#{leftMenuBacking.selection != "ONE" 的意义上启用）被初始化而没有其他人呢？

非常感谢。

**编辑 1**基于 Magnus Tengdahl 评论：

左侧菜单中的每个选项都有不同的页面。backingOne.xhtml 页面如下所示：

```
 <ui:composition template="/publicResources/templates/gdfoxTemplate.xhtml">
<ui:define name="title">GDFox | Similar Problems</ui:define>

<!-- North contains the section with table that produces rowSelect event as described above -->
<ui:define name="north">
      <ui:include src="currentWorkload.xhtml" />
</ui:define>

<!-- Contains the left munu, uses p:menu widget-->
<ui:define name="west">
        <ui:include src="leftmenu.xhtml" />
</ui:define>

<!-- center view  based on BackingOne bean-->
<ui:define name="center">
     ....
    </ui:define>
  </ui:composition> 
```

所以基本上，左侧菜单上的每个选择都在不同的 URL 上（我们只称它们为 backinOne/Two/Three.xhtml。它们共享所有共享的北部和西部部分并定义独特的中心

这就是为什么需要为该表使用三个 - 以便将更改推广到所有可能的视图（尽管只会及时选择一个）。我不认为（== 我仍然看不到）马格努斯认为一位听众会解决我的问题。如果您确定您的想法可行，请您进一步解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:11:29.077

我认为您可以制作一个额外的 bean backingbean0。在那个 bean 中你有监听器 tableChangeListener。正如 Magnus 所说，您有 1 个 p:ajax 并且在 tableChangeListener 中，您可以根据需要调用 backingbean1 2 或 3。（您的 backingbean0 中有此信息）

```
protected Object getBean(String name) {
    FacesContext fcontext = FacesContext.getCurrentInstance();
    ELResolver resolver = fcontext.getApplication().getELResolver();
    Object bean = resolver.getValue(fcontext.getELContext(), null, name);

    if (bean == null) {
        getLog().warn("An object with name=" + name + " could not be resolved with ELResolver");
    }

    return bean;
} 
```

你这样称呼它

```
BackingBean1 bb1 = (BackingBean1) getBean("bb1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:53:17.567

我会选择只有一个`rowSelect`听众，没有任何`disabled`条件：

```
<p:ajax event="rowSelect" listener="#{backingOne.tableChangeListnener}" 
    update="menuArea" /> 
```

然后让支持 bean 决定在给定选定行的情况下应该做什么。查看[PrimeFaces ShowCase](http://www.primefaces.org/showcase/ui/datatableRowSelectionInstant.jsf)以获取有关如何在支持 bean 中获取选定行的示例。从这些信息中，backing bean 肯定知道该做什么。基本上，您可以在其中一个支持 bean 中调用适当的支持 bean 实现。

你没有给我们任何左视图的代码，但我会推荐类似的东西（如果你还没有这样做的话）：

```
<h:panelGroup id="menuArea">
    <ui:fragment rendered="#{leftMenuBacking.selection == 'ONE'}">
        ... code for selection "ONE" ...
    </ui:fragment>
    <ui:fragment rendered="#{leftMenuBacking.selection == 'TWO'}">
        ... code for selection "TWO" ...
    </ui:fragment>
    <ui:fragment rendered="#{leftMenuBacking.selection == 'THREE'}">
        ... code for selection "THREE" ...
    </ui:fragment>
</h:panelGroup> 
```

这样，您的左侧区域将被重新渲染（即更新），`rowSelect`并且您的选择表保持原样。

# php - 从 web 服务器上的 php 导入类，并关闭 allow_url_open

> ID：13453576
> 
> 赞同：-1
> 
> 时间：2012-11-19T12:13:24.570
> 
> 标签：php

好的，我通过在文件夹中上传 lib 文件并将其寻址为“//”解决了这个问题

该死的，我太高兴了！！！！！！！！！！！！！！！！！！:D :D :D :D :D

我将此名为 post.php 的代码文件及其需要 tmhOAuth 的文件上传到根目录下的主机（eu5.org），并将两者的权限设置为 755：我从我的站点运行脚本 .eu5.org/post.php 但是得到以下错误

```
<?php

$tweet_text = 'Hello Twitter';
print "Posting...\n";
$result = post_tweet($tweet_text);
print "Response code: " . $result . "\n";

function post_tweet($tweet_text) {

require_once('ftp://<username>.eu5.org@eu5.org/tmhOAuth.php');
  $connection = new tmhOAuth(array(
    'consumer_key' => '******',
    'consumer_secret' => '******',
    'user_token' => '******',
    'user_secret' => '******',
  )); 

  $connection->request('POST', 
    $connection->url('1/statuses/update'), 
    array('status' => $tweet_text));

  return $connection->response['code'];
}
?> 
```

> 警告：require_once() [function.require-once]: ftp:// 包装器在服务器配置中被第 8 行 .php 中的 allow_url_include=0 禁用
> 
> 警告：require_once(.php) [function.require-once]：打开流失败：在第 8 行的 .php 中找不到合适的包装器
> 
> 致命错误：require_once() [function.require]：在第 8 行打开所需的 '.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') 失败

注意：allow_url_open 已关闭。我如何导入课程？使用卷曲等？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:18:19.807

当您想要包含（或要求，这只是一个错误报告的问题）一个文件时，使用 url 严格来说是没有用的（而且毫无意义）。您的库必须在您的服务器上，比如说在目录“library/”中。

您的代码将是那个：

```
include('library/yourfile.php');
//or require('library/yourfile.php'); if you prefere fatal errors over warnings 
```

# android - VP8' Libvpx for android 使用 JNI

> ID：13453577
> 
> 赞同：1
> 
> 时间：2012-11-19T12:13:37.587
> 
> 标签：android, c++, java-native-interface, vp8, libvpx

我想在我的 android 应用程序中使用 vp8，这就是我下载用 C++ 编写的 libvpx 的原因，现在我想用 JNI 将它连接到我的应用程序。所以我已经完成的步骤

1.  在我的应用程序的 jni 目录中放置一个 libvpx 签出

2.  像这样从 jni 目录运行配置脚本`./libvpx/configure --target=armv7-android-gcc --disable-examples --disable-neon --sdk-path=/opt/android-ndk-r6b/`

3.  在引用 libvpx 目录中的 Android.mk 文件的 jni 目录中放置一个 Android.mk 文件：

    LOCAL_PATH := $(call my-dir) include $(CLEAR_VARS) include libvpx/build/make/Android.mk

4.  make Makefile ，运行配置后创建的

5.  [如此处所示](http://pickerwengs.blogspot.com/2011/11/android-building-jni-source-code-in.html)创建 Android 新生成器

6.  调试，它应该构建 libvpx 并将其包含在我的项目中

但是我的应用程序中没有任何 libvpx。

有人可以帮我，给一些建议或一些好的libvpx for android教程吗？

感谢和问候

# c# - InvalidCastException 在通过反射加载的程序集中的显式转换

> ID：13453579
> 
> 赞同：0
> 
> 时间：2012-11-19T12:13:42.870
> 
> 标签：c#, reflection, dll, assemblies, .net

我们通过反射按需动态加载程序集到目前为止，我们已经定义了五个 dll，并且所有这些都已由`Assembly.LoadFile()`. 在其中一个程序集中，我们定义了一个接口`IDeviceConnection`，它继承自`IConnection`（在应用程序和程序集使用的合同项目中定义）。

我们已经设法创建了一个 的实例`ParameterManager`，该实例在与接口完全相同的 dll 中定义`IDeviceConnection`。但是，一旦我们尝试将 a`IConnection`转换为 a `IDeviceConnection`，应用程序就会崩溃，告诉我们它无法转换`IConnection`为`IDeviceConnection`，尽管它*是*一个 IDeviceConnection。调用 connection.GetType().GetInterfaces() 会显示几个接口，其中包含`IConnection` *和* `IDeviceConnection`。

我们可以开始调查这种行为的任何提示吗？

提前致谢！

# maven - Maven 构建 CAS 服务器失败

> ID：13453582
> 
> 赞同：0
> 
> 时间：2012-11-19T12:13:48.770
> 
> 标签：maven, cas, jasig

我正在尝试实现 SSO 功能并从[http://www.jasig.org/cas/download](http://www.jasig.org/cas/download)下载所有项目和 pom.xml 。

所以，我得到了我的 maven 项目，然后在 eclipse 中我只是导入为现有的 maven 项目。

然后我将项目作为 MVN CLEAN 运行，但它没有运行并出现错误

```
[INFO] Scanning for projects...
Downloading: http://developer.ja-sig.org/maven2/org/jasig/parent/jasig-parent/21/jasig-parent-21.pom
Downloading: http://repository.jboss.org/nexus/content/groups/public-jboss/org/jasig/parent/jasig-parent/21/jasig-parent-21.pom
Downloading: http://repo.maven.apache.org/maven2/org/jasig/parent/jasig-parent/21/jasig-parent-21.pom
[ERROR] The build could not read 1 project -> [Help 1]
[ERROR]   
[ERROR]   The project org.jasig.cas:cas-server:3.5.0 (D:\CAS\Single Sign On\cas-server-3.5.0-release\cas-server-3.5.0\pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not transfer artifact org.jasig.parent:jasig-parent:pom:21 from/to jasig-repository (http://developer.ja-sig.org/maven2): null to http://developer.ja-sig.org/maven2/org/jasig/parent/jasig-parent/21/jasig-parent-21.pom and 'parent.relativePath' points at wrong local POM @ line 22, column 11: UnresolvedAddressException -> [Help 2]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException
[ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException 
```

有人告诉这是代理问题，所以我更改了 settings.xml 文件以将代理放置为

```
<proxy>
  <id>123</id>
  <active>true</active>
  <protocol>http</protocol>
  <username>abc.def@xyz.com</username>
  <password>xyz1233</password>
  <host>proxy.com</host>
  <port>80</port>
  <nonProxyHosts>google.com</nonProxyHosts>
</proxy> 
```

它仍然没有运行，有人可以指出错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:33:29.810

为什么不从 Maven 中心下载 jasig-parent 呢？

# vb.net - 错误：逗号、')' 或预期的有效表达式继续

> ID：13453589
> 
> 赞同：2
> 
> 时间：2012-11-19T12:14:07.097
> 
> 标签：vb.net

我收到以下错误：

> 逗号、')' 或预期的有效表达式继续

在下面的一段代码上：

```
Dim listOfMultipliers As New List(Of Double)
For i = 0.2 To 1.5 Step 0.1
    listOfMultipliers.Add(i)
Next
Dim multipliersArray() As Double = listOfMultipliers.ToArray()
myarrey = multipliersArray 
```

错误在第一行并下划线'double'。我无法弄清楚问题是什么。我搜索了互联网，但找不到解决方案。是不是我使用的是visual basic 2003，而这段代码是针对更高框架的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:18:59.290

您给出的示例已经有效，但它使用了 .NET 泛型（即指定 a`List(Of Double)`而不仅仅是`ArrayList`接受`Object`s 的 a 的能力），直到 2.0 版才添加到 .NET 框架中。.NET 2.0 最初由 VB.NET 8.0 版支持，该版本包含在 Visual Studio 2005 中。

您尝试编写的代码在 VB2003 上不起作用。您是否有理由不能使用较新的框架？（例如，使用免费的 Visual Basic 2010 Express）

如果您坚持使用 2003，则必须使用`ArrayList`，并将您从列表中取出的项目转换回`Double`.

# c# - 使用动态更新或插入时，如何使 NHibernate 被视为属性始终是脏的？

> ID：13453591
> 
> 赞同：4
> 
> 时间：2012-11-19T12:14:21.120
> 
> 标签：c#, nhibernate, nhibernate-mapping, nhibernate-caches

我正在寻求有关 NHibernate 问题的帮助，该问题已经困扰我一段时间了。长话短说：

> 我正在寻找一种方法，在每次我进行更新或插入时，在一级缓存中“重置”实体上的属性。
> 
> 我想要实现的是，在使用动态更新或插入时，NHibernate 总是认为有问题的属性是脏的。

这背后的故事是，我知道，如果事务成功，我想要“重置”的列将在数据库中通过触发器设置为 Null。另一方面，一级缓存不知道这一点，因此 NHibernate 会认为当我将其设置为与之前更新/插入相同的值时，该属性未更新。问题是我的触发器取决于设置的这个值。造成的混乱是，如果我想使用动态更新或插入，我只能更新/插入一个实体，而无需事后“刷新”它（我真的不想这样做）。

提示或帮助将不胜感激，因为我在这里真的碰壁了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:07:43.643

NHibernate 提供了很多扩展的地方。其中有 Session `IInterceptor`。有很多细节的文档：

[http://nhibernate.info/doc/nh/en/index.html#objectstate-interceptors](http://nhibernate.info/doc/nh/en/index.html#objectstate-interceptors)

在这种情况下，我们可以创建自定义的，它将观察我们的实体（例如**Client**）和每次都必须更新的属性（例如**Code**）。所以我们的实现可能如下所示：

```
public class MyInterceptor : EmptyInterceptor
{
    public override int[] FindDirty(object entity, object id, object[] currentState, object[] previousState, string[] propertyNames, NHibernate.Type.IType[] types)
    {
        var result = new List<int>();

        // we do not care about other entities here
        if(!(entity is Client))
        {
            return null; 
        }

        var length = propertyNames.Length;

        // iterate all properties
        for(var i = 0; i < length; i++)
        {
            var areEqual = currentState[i].Equals(previousState[i]);
            var isResettingProperty = propertyNames[i] == "Code";

            if (!areEqual || isResettingProperty)
            {
                result.Add(i); // the index of "Code" property will be added always
            }
        }

        return result.ToArray();
    }
} 
```

*注意：这只是一个例子！应用您自己的逻辑来检查脏属性。*

我们必须这样包装`Session`：

```
var interceptor = new MyInterceptor()
_configuration.SetInterceptor(interceptor); 
```

就是这样。当**客户端**被标记为动态更新时，属性**代码**将始终设置为*脏*

```
<class name="Client" dynamic-update="true" ... 
```

# android - Android ssh 应用程序需要的建议

> ID：13453593
> 
> 赞同：2
> 
> 时间：2012-11-19T12:14:30.573
> 
> 标签：android, ssh, jsch

我正在尝试在 android 中创建一个小型应用程序，以使用 jsch 库通过 ssh 运行命令。没有问题出在哪里，但是当我运行应用程序时，我得到一个窗口：

不幸的是，应用程序已停止。

这是我的代码：

安卓清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.xxxxxxxx"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
    </application>
</manifest> 
```

主要活动：

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState); 
    setContentView(R.layout.activity_main);     

    TextView tvBd = (TextView) findViewById(R.id.TxtNombre);    

    ConexionSSH conect = new ConexionSSH();
    String prueba = "pepe";     

    try {
        prueba = conect.conect();
    } catch (JSchException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    tvBd.setText("LS: "+prueba); 
```

连接类：

```
String user = "xxxxx";
String host = "xxxxx";  
int port = 22;
String pass = "xxxxx";

public String conectar() throws Exception {     

    JSch jsch = new JSch();
    Session session = jsch.getSession(user, host, 22);
    session.setPassword(pass);

    // Avoid asking for key confirmation
    Properties prop = new Properties();
    prop.put("StrictHostKeyChecking", "no");
    session.setConfig(prop);

    session.connect();

    // SSH Channel
    ChannelExec channelssh = (ChannelExec) 
                    session.openChannel("exec");      
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    channelssh.setOutputStream(baos);

    // Execute command
    channelssh.setCommand("ls");
    channelssh.connect();        
    channelssh.disconnect();

    return baos.toString();
} 
```

日志猫：

```
 FATAL EXCEPTION: main
    java.lang.NoClassDefFoundError: com.example.sarai55.ConexionSSH
at com.example.sarai55.MainActivity.onCreate(MainActivity.java:22)
at android.app.Activity.performCreate(Activity.java:5008)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
at android.app.ActivityThread.access$600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:16:06.480

[从https://github.com/shikhar/sshj/downloads](https://github.com/shikhar/sshj/downloads)下载最新版本的 SSHJ 库 解压缩 zip 文件并将“sshj-0.8.1.jar”复制到您的 android 项目的 libs 目录中。在构建路径中也包括 SSHJ 库的依赖项。SLF4J - 日志库。(slf4j-api-1.6.99.jar, slf4j-simple-1.6.99.jar) Bounty Castle – 安全库。(bcpkix-jdk15on-147.jar, bcprov-jdk15on-147.jar) JZlib – 压缩库。() 将上述jar 文件也包含到Android 项目的lib 文件夹中。

# actionscript-3 - 计时器在课堂动作脚本 3 中不起作用

> ID：13453594
> 
> 赞同：0
> 
> 时间：2012-11-19T12:14:35.737
> 
> 标签：actionscript-3, flash, class, timer

```
 package 
{
import flash.display.MovieClip;
import flash.events.MouseEvent;
import flash.events.TimerEvent;

public class MasterContainer extends MovieClip
{
    public var playTimer:Timer = new Timer(1000,16);

    public function MasterContainer()
    {
        // constructor code
        t1.setSoundName("drum.mp3");
        t2.setSoundName("pluck.mp3");
        t3.setSoundName("drum.mp3");
        t4.setSoundName("drum.mp3");
        t5.setSoundName("drum.mp3");
        t6.setSoundName("drum.mp3");
        t7.setSoundName("drum.mp3");
        t8.setSoundName("drum.mp3");

        masterPlay.addEventListener(flash.events.MouseEvent.CLICK, handleMasterPlay);
        playTimer.addEventListener(TimerEvent.TIMER, onTick);
    }

    public function onTick(event:TimerEvent):void 
    {
        t1.playSound();
        t2.playSound();
        t3.playSound();
        t4.playSound();
        t5.playSound();
        t6.playSound();
        t7.playSound();
        t8.playSound();
    }

    private function handleMasterPlay(e:MouseEvent):void
    {

        trace('bla');

    }

}
} 
```

这是我班的切碎版本。我得到的错误是：C:\Users\Mark\Documents\Creative Multimedia\semester 5\Action Script\project\MasterContainer.as, Line 9 1046: Type was not found or is not a compile-time constant: Timer.

C:\Users\Mark\Documents\Creative Multimedia\semester 5\Action Script\project\MasterContainer.as，第 9 行 1180：调用可能未定义的方法 Timer。

C:\Users\Mark\Documents\Creative Multimedia\semester 5\Action Script\project\MasterContainer.as，第 9 行 1180：调用可能未定义的方法 Timer。

我不明白这个错误任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:19:51.550

```
import flash.utils.Timer; 
```

你错过了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:20:01.217

所有错误都表明找不到 Timer 类 - 检查您的导入语句，它应该包含以下内容：`import flash.utils.Timer;`

# c# - 如何在 Windows 8 中存储漫游文件？

> ID：13453598
> 
> 赞同：0
> 
> 时间：2012-11-19T12:14:41.717
> 
> 标签：c#, windows-8, roaming

我正在尝试存储文件并将其漫游到 Windows 8 中的其他设备。有关此的[官方文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)指出：

> 在其应用程序数据存储中，每个应用程序都有系统定义的根目录：一个用于本地文件，一个用于漫游文件，一个用于临时文件。

再往下，它指出：

> 应用文件可以是本地的或漫游的。您的应用添加到本地数据存储的文件仅存在于本地设备上。系统会自动同步您的应用添加到用户已安装应用的所有设备上的漫游数据存储中的文件。

但是，它没有继续说明如何漫游文件（不是普通数据）。

我在哪里可以找到有关漫游文件的更多信息，而不仅仅是普通数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:16:52.767

使用以下定义的函数：`Windows.Storage.ApplicationData.Current.RoamingFolder`

例如：

```
public async void RoamData()
{
    var roamingFolder = Windows.Storage.ApplicationData.Current.RoamingFolder;
    var needToCreate = false;

    try
    {
        var sampleFile = await roamingFolder.GetFileAsync("dataFile.txt");
        string fooBar = await Windows.Storage.FileIO.ReadTextAsync(sampleFile);
    }
    catch (Exception)
    {
        // fooBar not found
        needToCreate = true; // set a boolean to create the file. Cant be done here cause you cant await in a catch clause.
    }

    if (needToCreate)
    {
        var sampleFile = await roamingFolder.CreateFileAsync("dataFile.txt", Windows.Storage.CreationCollisionOption.ReplaceExisting);
        await Windows.Storage.FileIO.WriteTextAsync(sampleFile, "fooBar content of the file.");
    }
} 
```

MSDN：[http://msdn.microsoft.com/en-us/lib...](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700362.aspx)

# apache-camel - 在 apache camel 项目中的 Spring DSL camelconfig.xml 文件中运行 php 脚本的正确方法是什么？

> ID：13453601
> 
> 赞同：0
> 
> 时间：2012-11-19T12:14:49.870
> 
> 标签：apache-camel

我正在使用 Spring DSL、apache camel 2.10 并尝试创建一个调用 php 脚本的路由。

```
<route id="HTTPtoJMS">
<from uri="jetty:http://0.0.0.0:8888/placeorder" />
<inOnly uri="jms:incomingOrders" />     
<to uri="language:php:/home/rosh/test/getAllBills.php" />
</route> 
```

我在 apache tomcat 7 中将其作为一场战争开始，并且 webapp 毫无例外地启动。但是，在运行时，我得到：

java.lang.IllegalArgumentException：没有脚本引擎可以创建：php

我究竟做错了什么？

我浏览了关于如何从 spring dsl 调用 php 的极少数资源，例如 [http://camel.apache.org/book-languages-appendix.html](http://camel.apache.org/book-languages-appendix.html)，但找不到我做错了什么。

我的 pom.xml 中有脚本语言的依赖项。

```
<dependency>
  <groupId>org.apache.camel</groupId>
  <artifactId>camel-script</artifactId>
  <version>${camel.version}</version>
</dependency> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:59:21.753

camel-script 组件使用 Java Scripting API。你需要在你的 JVM 中安装一个 PHP 脚本引擎来支持这个。JVM 有一些开箱即用的功能，我认为 JavaScript 就是其中之一。

# r - 具有置信区间的交互作用图

> ID：13453602
> 
> 赞同：4
> 
> 时间：2012-11-19T12:14:57.420
> 
> 标签：r, ggplot2, interaction, confidence-interval

我想为明天到期的作业绘制一个带有置信区间的交互图。这是我的数据集：

```
Snail0

    water   lightness   total_migration
    control dark    9.5
    control dark    20
    control dark    22
    control dark    24
    control dark    10
    control dark    18
    control dark    19
    control dark    19.5
    control dark    23
    control dark    2
    control dark    10.5
    control dark    22.5
    control dark    26
    control dark    32
    control dark    2
    control dark    12.5
    control dark    13.5
    control dark    16.5
    control dark    19
    control dark    20
    control dark    21
    control dark    22
    control dark    24
    control dark    25
    control light   11
    control light   20.5
    control light   22.5
    control light   24
    control light   21
    control light   23
    control light   23.5
    control light   28
    control light   30
    control light   18.5
    control light   19.5
    control light   19.5
    control light   23.5
    control light   24
    control light   2
    control light   20
    control light   23
    control light   28.5
    control light   29
    control light   16
    control light   17.5
    control light   26.5
    control light   28.1
    control light   30.5
    crab    light   6
    crab    light   14
    crab    light   15
    crab    light   17
    crab    light   19
    crab    light   7
    crab    light   14
    crab    light   17
    crab    light   22
    crab    light   26
    crab    light   4.5
    crab    light   10
    crab    light   11
    crab    light   21
    crab    light   24
    crab    light   14
    crab    light   20
    crab    light   22.5
    crab    light   23
    crab    light   14
    crab    light   16
    crab    light   18.5
    crab    light   22
    crab    light   23
    crab    dark    14
    crab    dark    19
    crab    dark    20
    crab    dark    23
    crab    dark    25
    crab    dark    9
    crab    dark    18
    crab    dark    18
    crab    dark    20
    crab    dark    21
    crab    dark    15
    crab    dark    15
    crab    dark    15
    crab    dark    19
    crab    dark    23
    crab    dark    12
    crab    dark    14.5
    crab    dark    21
    crab    dark    21.5
    crab    dark    22
    crab    dark    14.5
    crab    dark    16
    crab    dark    19
    crab    dark    20
    crab    dark    22.5
    snail   dark    6
    snail   dark    15
    snail   dark    20
    snail   dark    22
    snail   dark    15
    snail   dark    15
    snail   dark    16
    snail   dark    17
    snail   dark    21
    snail   dark    15
    snail   dark    20
    snail   dark    15
    snail   dark    16
    snail   dark    19.5
    snail   dark    23
    snail   dark    24
    snail   dark    4
    snail   dark    18.5
    snail   dark    20
    snail   dark    24
    snail   dark    25
    snail   light   13
    snail   light   13
    snail   light   13
    snail   light   18
    snail   light   15
    snail   light   16
    snail   light   17
    snail   light   17
    snail   light   19
    snail   light   14
    snail   light   14
    snail   light   19
    snail   light   7
    snail   light   13
    snail   light   13
    snail   light   13
    snail   light   16
    snail   light   3
    snail   light   9
    snail   light   15
    snail   light   22
    snail   light   23 
```

* * *

```
interaction.plot(Snail0$water,Snail0$lightness,Snail0$total_migration) 
```

我一直在尝试使用[ToothGrowth 数据](https://stats.stackexchange.com/questions/9477/how-to-draw-an-interaction-plot-with-confidence-intervals)在此处底部完成的操作，但显然我做错了，因为我只收到错误消息。

```
Snail0$water <- factor(Snail0$water)

df<-with(Snail0, aggregate(total_migration, list(lightness=lightness, water=water), mean))

df$se<-with(Snail0, aggregate(total_migration, list(lightness=lightness, water=water), function(x) sd(x)/sqrt(10)))[,3]

gp<-ggplot(df, aes(x=water, y=total_migration, colour=lightness, group=lightness))

gp+geom_line(aes(linetype=lightness)) + geom_point(aes(shape=lightness)) + geom_errorbar(aes(ymax=x+se, ymin=x-se)) 
```

错误信息：

```
Error: Aesthetics must either be length one, or the same length as the dataProblems:lightness, water, lightness, lightness 
```

显然，我不知道自己在做什么，所以有人可以帮我纠正我的代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:39:30.357

当您`df`使用第一个`aggregate`命令创建对象时，包含因变量的列不再称为`total_migration`但是`x`。

因此，如果您在命令中替换`total_migration`为，您的代码将起作用：`x``ggplot`

```
gp <- ggplot(df, aes(x=water, y=x, colour=lightness, group=lightness))
gp + geom_line(aes(linetype=lightness)) + 
     geom_point(aes(shape=lightness)) + 
     geom_errorbar(aes(ymax=x+se, ymin=x-se)) 
```

![在此处输入图像描述](../Images/50a97bd0d3785177d402d91968e04c85.png)

# php - 当文件位于不同目录时，在服务器中播放 wav 文件

> ID：13453605
> 
> 赞同：2
> 
> 时间：2012-11-19T12:15:07.527
> 
> 标签：php, html, webserver

我正在尝试创建一个网站，用户可以在其中收听不同的 wav 文件。我制作了一个`php`脚本来获取`.wav`我想要的所有文件，并将它们的路径保存在一个数组中。

然后我这样做是为了播放音频：

```
echo "<a href='teste.wav'>Play sample 1 </a>";
echo "<a href='" .$audios[$id][1] ."'>Play sample 2 </a>";
?>
<script src="http://mediaplayer.yahoo.com/js></script> 
```

在第一种情况下，我将音频放在与脚本相同的文件夹中，并且效果很好。在第二种情况下，我将它放在一个完全不同的目录中，它永远找不到文件。我知道示例 2 将直接引用到正在执行脚本的当前目录下的某些内容，但是我尝试进行`$audios[$id][1]`类似`http://home/.../file.wav`操作，但仍然无法正常工作。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:43:12.650

```
/home/jorge/VOCE/Recordings/-1458206716/Tiago@Aug_31_2012_Tiago_ID_1204811836_pr‌​ebaseline.wav 
```

不要使用绝对路径。这些在本地文件系统之外**无效。**您必须使用相对路径，以便浏览器可以构建指向可访问文件的请求，所以它应该更像这样：

```
VOCE/Recordings/-1458206716/Tiago@Aug_31_2012_Tiago_ID_1204811836_pr‌​ebaseline.wav 
```

（假设您的项目公开可见的文件夹是父文件夹`VOCE`）

> 但我试图让 $audios[$id][1] 喜欢`http://home/.../file.wav` ，但仍然无法正常工作。

**仅**当您的浏览器在您的服务器正在运行的同一台机器上物理运行并且您可以访问文件系统时，这才有效。

**编辑**

如何正确地做到这一点 - 一些假设（如果实际系统不同，只需进行调整）您的文件系统结构如下

```
 document-root/
     scripts/
        test.php
     recordings/
        audio.wav
     index.html 
```

`document-root`是您的 httpd 提供所有文件的磁盘上的位置。它实际上是什么无关紧要。如果我这样做，`http://yourdomain/index.html`那么它将显示`index.html`. 您的脚本在`scripts/`文件夹中，您的音频文件在`recordings`. 然后从to的**相对路径**是。如果你真的需要使用**绝对路径**（不推荐），那么它应该是. 选择最适合您的。`test.php``audio.wav``../recordings/audio.wav`**`http://yourdomain/recordings/audio.wav`**

# java - Spring：如何从单个模板定义动态创建多个 bean

> ID：13453607
> 
> 赞同：0
> 
> 时间：2012-11-19T12:15:09.463
> 
> 标签：java, web-services, spring

我有以下 Spring bean 用于在 xml 中定义的远程 Web 服务：

```
 <bean id="authWSTemplate" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean" abstract="true">
       <property name="serviceInterface" value="com.example.webservices.Authentication" />
       <property name="wsdlDocumentUrl" value="${ws.root}/authentication?wsdl" />
       <property name="namespaceUri" value="http://security.webservices.example.com/" />
       <property name="serviceName" value="AuthenticationWebService" />
       <property name="portName" value="AuthenticationPort" />
       <property name="maintainSession" value="true" />
    </bean> 
```

如何获取这个 bean 模板并创建一个具体的 bean（即提供 root 属性）？然后我可以将混凝土豆放入 Spring 容器中吗？

我需要许多指向不同系统的具体 bean，所以我有不同的根值。对于此示例，假设有 2 个具有根的系统：[http://domain1.com:8001/ws](http://domain1.com:8001/ws)和[http://domain2.com:8002/ws](http://domain2.com:8002/ws)。

因此，我想要 2 个名为“authWSdom1”和“authWSdom2”的 bean。

我期望在应用程序初始化块中以编程方式执行此操作，在那里我将检索所有已知系统实现的列表（此信息仅在运行时知道），并为每个 impl 创建一个 bean，缓存 bean 名称，然后我的应用程序将在需要时从 Spring 容器中检索适当的 bean。

或者，有更好的模式吗？也许通过在 bean 的构造函数中提供根值？

我在想我不能在 Spring 中拥有一个 bean，因为我需要支持跨多个端点的并发访问（即多个用户同时访问 domain1 和 domain2）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:11:36.867

创建实现 BeanFactoryPostProcessor 和 InitializingBean 的自定义 bean。使用 postProcessBeanFactory 方法创建 bean：

```
public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {
    BeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;
    String wsdlDocumentUrl = ....;
    // .......
    registry.registerBeanDefinition(YOUR_BEAN_NAME, BeanDefinitionBuilder.childBeanDefinition(
                getParentNoDomainServicBeanName(authWSTemplate)).addPropertyReference(
                "wsdlDocumentUrl", wsdlDocumentUrl).getBeanDefinition());

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:55:46.777

虽然我相信如果您想在 spring 容器中动态创建 bean，Ragnor 的答案是合适的，但我决定使用 spring 来定义我自己的 WSTemplate DTO，然后使用工厂类来使用这个 DTO 并以编程方式构建（根 url 在运行时提供和添加到它的 DTO 后缀值）并缓存生成的 JaxWS ProxyBean：

```
<bean id="authWSTemplate" class="com.example.WSProxyTemplate">
   <property name="serviceInterface" value="com.example.webservices.Authentication" />
   <property name="wsdlDocumentUrlSuffix" value="/authentication?wsdl" />
   <property name="namespaceUri" value="http://security.webservices.example.com/" />
   <property name="serviceName" value="AuthenticationWebService" />
   <property name="portName" value="AuthenticationPort" />
   <property name="maintainSession" value="true" />
</bean> 
```

我喜欢这种方法，因为我的 spring 配置是从实际使用的 WS bean 中抽象出来的。即，如果我想使用 JaxWS 以外的其他东西，那么我只需编写一个使用相同 DTO bean 的不同工厂。同样，如果我必须根据某些系统/环境标准在运行时选择 WS 实现，这将有所帮助。

# android - android中的FTP图像上传

> ID：13453613
> 
> 赞同：-2
> 
> 时间：2012-11-19T12:15:19.867
> 
> 标签：android, ftp

如何在设备中未安装 Andftp 的情况下使用 ftp 上传图像。

我的代码：

```
Uri ftpUri =Uri.parse("ftp://yourftpserver.com");
intent.setDataAndType(ftpUri,"vnd.android.cursor.dir/lysesoft.andftp.uri"); 
```

在这里`setDataType`我必须设置。请帮助我使用 ftp 上传图像 ..通过创建文件夹，通过重命名远程文件名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:30:31.943

我建议您为此使用库：

看看 Apache 公共库： http: [//lavalatwork.blogspot.de/2010/09/using-apache-commons-ftp-library-in.html](http://lavalatwork.blogspot.de/2010/09/using-apache-commons-ftp-library-in.html)

这也可能很有趣： [http ://www.javaworld.com/javaworld/jw-04-2003/jw-0404-ftp.html](http://www.javaworld.com/javaworld/jw-04-2003/jw-0404-ftp.html)

祝你好运。

# javascript - 是否存在与 Vim 正则表达式开头和结尾的单词原子“\<”和“\>”等效的 JavaScript？

> ID：13453618
> 
> 赞同：5
> 
> 时间：2012-11-19T12:15:49.327
> 
> 标签：javascript, regex, vim, word-boundary, word-boundaries

我知道大多数正则表达式引擎，包括 JavaScript 中的引擎，都`\b`必须匹配单词边界，无论是在单词的开头还是结尾。

但 Vim 还有两个更具体的正则表达式原子：

*   [`\<`仅匹配单词开头的单词边界](http://vimdoc.sourceforge.net/htmldoc/pattern.html#/%5C%3C)
*   [`\>`仅匹配单词末尾的单词边界](http://vimdoc.sourceforge.net/htmldoc/pattern.html#/%5C%3E)

JavaScript 是否具有这些原子的等价物，如果没有，是否有办法以其他方式表达它们更精确的语义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T12:24:13.753

据我所知，没有任何预定义的。但是你可以做的是，在单词边界上添加一个[前瞻](http://www.regular-expressions.info/lookaround.html)，检查它是单词的开头还是结尾。

`\<`那时会`\b(?=\w)`。这将检查单词边界之后是否有单词字符跟随 ==> 单词的开头。[将此作为 regexr 上的示例](http://regexr.com?32rqg)

`\>`那时会`\b(?!\w)`。这将检查单词边界之后是否没有单词字符跟随 ==> 单词结尾

# php - PHP检查文件是否存在而不是目录

> ID：13453620
> 
> 赞同：16
> 
> 时间：2012-11-19T12:15:58.173
> 
> 标签：php

`file_exists()`如果它指向一个目录，我读过它也可以返回。检查是否只有文件存在的最快方法是什么？

目前我有：

```
/**
 * Check if the file exists.
 *
 * @return bool
 */
public function exists() {
    if(is_null($this->_file)) return false;

    return (!is_dir($this->_file) && file_exists($this->_file)) ? true : false;
} 
```

我发现了很多与检查 PHP 中的文件是否存在有关的帖子，但没有任何关于目录以及如何最好地检查它的帖子。

这种方法可以调用 1000 秒，所以我真的可以让它尽可能快。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-19T12:18:20.763

您正在寻找以下[`is_file`](http://php.net/is_file)功能：

```
public function exists() {
    return $this->_file !== null && is_file($this->_file);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T12:19:43.870

```
public function exists() {
    return !is_dir($this->_file) && file_exists($this->_file);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-15T10:19:04.693

**您可以仅对文件**尝试此操作。它是您将调用的自定义函数而不是`file_exists`函数

```
 function custom_file_exists($filePath)
    {
          if((is_file($filePath))&&(file_exists($filePath))){
            return true;
          }   
          return false;
    } 
```

# c++ - 如何在类层次结构中处理 CRTP？

> ID：13453622
> 
> 赞同：0
> 
> 时间：2012-11-19T12:16:01.183
> 
> 标签：c++, templates, crtp

在我的一个项目中，我使用与`enable_crtp`答案 1 中相同的 CRTP 方法（源自 ）：[如何将模板参数传递给 CRTP？](https://stackoverflow.com/questions/11546478/how-do-i-pass-template-parameters-to-a-crtp)

但是我也需要从派生类派生。有什么方法可以使这项工作不回退到仅 static_cast this 指针而是使用 Enable CRTP 基类中的 self() 方法？

```
#include "EnableCRTP.h"

template<typename DERIVED>
class BASE : public EnableCRTP<DERIVED>
{
    friend DERIVED;
public:
    void startChain()
    {
        self()->chain();
    }
};

template<typename DERIVED>
class Derived1 : public BASE<Derived1<DERIVED> >
{
public:
    void chain()
    {
        std::cout << "Derived1" << std::endl;

        //self()->chain2(); <- compile Error
        static_cast<DERIVED*>(this)->chain2(); // <-Works
    }
};

class Derived2 : public Derived1<Derived2>
{
public:
    void chain2()
    {
        std::cout << "Derived2" << std::endl;
    }
};

int _tmain(int argc, _TCHAR* argv[])
{
    Derived2 der;    
    der.startChain();    
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:30:02.180

您可以将派生最多的类作为模板参数提供给 CRTP 基类，以便它可以访问其所有成员。代替

```
template<typename DERIVED>
class Derived1 : public BASE<Derived1<DERIVED> > 
```

采用：

```
template<typename DERIVED>
class Derived1 : public BASE<DERIVED> 
```

您的代码还有其他问题。例如，您不能`self()`像以前那样直接调用，因为编译器不知道它`self`是基类的成员（依赖于模板参数）。相反，调用`this->self()`. 请参阅[此常见问题解答条目](http://www.parashift.com/c++-faq-lite/nondependent-name-lookup-members.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:30:13.970

要做你想做的事，你只需要通过 CRTP 传递最派生的类。在这种情况下，您需要将 Derived1 的定义更改为以下内容：

```
template<typename DERIVED>
class Derived1 : public BASE< DERIVED >
{
public:
    void chain()
    {
        std::cout << "Derived1" << std::endl;

        this->self()->chain2(); // should work now
        //static_cast<DERIVED*>(this)->chain2(); // <-Works
    }
}; 
```

此外，当将 CRTP 与类层次结构一起使用时，通常最好设置层次结构，以便类被设计为派生自（因此是通过 DERIVED 类传递的模板），或者是层次结构的叶子，并且不是来源于。这些叶类根本不必是模板。

# django - 覆盖 Django ModelForm 字段时出错

> ID：13453626
> 
> 赞同：1
> 
> 时间：2012-11-19T12:16:25.847
> 
> 标签：django, django-forms

当我尝试覆盖 Django ModelForm 字段时遇到问题。

我的models.py是这样的：

```
from django.db import models

class CadastroParticipantes(models.Model):
    nome = models.CharField(max_length=50)
    sobrenome = models.CharField(max_length=100)
    cpf = models.CharField(max_length=14)
    email = models.EmailField(max_length=100)
    num_cartas_solicitadas = models.IntegerField(default=0)

    def __unicode__(self):
        return self.email 
```

我的 forms.py 是这样的：

```
from django.forms import ModelForm
from models import *

class FormCadastroParticipante(ModelForm):
    class Meta:
        model = CadastroParticipantes
        fields = ('nome', 'sobrenome', 'cpf', 'email')
        exclude=('num_cartas_solicitadas')
        widgets = { 'nome' : attrs={'title': 'Seu primeiro nome.'}} 
```

当我运行服务器并尝试访问时，我收到以下消息：

**

```
SyntaxError at /
invalid syntax (forms.py, line 9) 
```

**

有人可以帮我吗？

在此先感谢大家！(Y)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:33:02.300

您忘记指定小部件类。它应该是这样的：

```
from django.forms.widgets import TextInput

class FormCadastroParticipante(ModelForm):
    class Meta:
        model = CadastroParticipantes
        fields = ('nome', 'sobrenome', 'cpf', 'email')
        exclude=('num_cartas_solicitadas', )
        widgets = { 'nome' : TextInput(attrs={'title': 'Seu primeiro nome.'}), } 
```

更改`TextInput`为您想要的小部件类。另请注意，类中的`exclude`属性`Meta`接受列表，如果只有一个列表成员，请不要忘记尾随逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:24:55.517

你为什么不定义`attrs={'title': 'Seu primeiro nome.'}`外部类 Meta 然后你可以说`widgets = { 'nome' : attrs}`

# ruby-on-rails - Rails 格式无日期

> ID：13453627
> 
> 赞同：12
> 
> 时间：2012-11-19T12:16:27.607
> 
> 标签：ruby-on-rails, datetime

我正在尝试在 Rails 视图中格式化日期。

```
<td><%= l order.ship_date, :format => :long %></td> 
```

如果日期为零，这不起作用：

```
Object must be a Date, DateTime or Time object. nil given. 
```

什么是最好的“Rails”解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T12:19:27.367

如果对象为零，只需添加故障保护：

```
<td><%= l(order.ship_date, :format => :long) if order.ship_date %></td> 
```

如果你想在它为 nil 的情况下显示一些东西：

```
<td><%= order.ship_date ? l(order.ship_date, :format => :long) : "Some text" %></td> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-19T12:54:27.577

三个选项：

1）确保你永远不会有一个零日期。取决于您尝试创建的产品，但在许多情况下，显示零日期是没有意义的。如果对于您的产品，nil 日期是合理的，那么这将不起作用。

2）到处写视图代码来隐藏nil：

```
<%= order.ship_date ? l(order.ship_date, :format => :long) : 'Date unavailable' %> 
```

3）编写一个辅助函数来为您执行此操作：

```
def display_date(date, message='Date unavailable')
  date ? l(date, :format => :long) : message
end 
```

然后，在您想要进行这种约会处理的每个地方，您所要做的就是说：

```
<%= display_date(order.ship_date) %> 
```

# php - 将数据保存到数据库时出现问题

> ID：13453628
> 
> 赞同：1
> 
> 时间：2012-11-19T12:16:29.010
> 
> 标签：php, codeigniter

我正在使用 codeigniter 将数据插入数据库。但它一直给我以下错误

```
Unknown column 'Array' in 'field list'</p><p>INSERT INTO `profile` (`loginid`, `name`, `email`, `gender`, `birthday`, `profilePhoto`, `date`) VALUES (Array, 'Zafar Khan', 'xafar@demo.com', 'male', '20.01.1987', '', '2012/11/19')

Filename: /Applications/XAMPP/xamppfiles/htdocs/membership_system/models/model_register.php</p><p>Line Number: 48 
```

这是发生此错误的代码

```
public function saveUserProfile() {
    $userId = $this->readUserId();

    $profile = array(
            'loginid'       => $userId,
            'name'          => $this->input->post('name'),
            'email'         => $this->input->post('email'),
            'gender'        => $this->input->post('gender'),
            'birthday'      => $this->input->post('birthday'),
            'profilePhoto'  => '',
            'date'          => date("Y/m/d")
        );

    $query = $this->db->insert('profile', $profile);

    if ($query) {
        return true;
    } else {
        return false;
    }
} 
```

**更新**

这是 readUserId 函数

```
private function readUserId() {
    $this->db->select('id'); 
    $this->db->from('login');   
    $this->db->where('email', $this->input->post('email'));

    return $this->db->get()->result();
} 
```

**更新 2**

这是我的 var_dump 输出

```
array(1) {  [0]=>  object(stdClass)#18 (1) {    ["id"]=>    string(2) "14"  } } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:19:12.373

的值`$userId`导致将未引用`Array`的值输入到被视为列引用的值中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:20:08.937

似乎`$this->readUserId()`返回一个数组。你能试试`reset($this->readUserId());`吗？把它放在初始化 $profile 之前。

要不就

```
echo var_dump( $this->readUserId() );

die(); 
```

..这样我们就可以看到你的变量里面有什么。

==> 编辑：

$profile 必须变成类似

```
$profile = array(
            'loginid'       => $userId['id'],
            'name'          => $this->input->post('name'),
            'email'         => $this->input->post('email'),
            'gender'        => $this->input->post('gender'),
            'birthday'      => $this->input->post('birthday'),
            'profilePhoto'  => '',
            'date'          => date("Y/m/d")
        ); 
```

==> 编辑 2：

好的，那你可以添加

```
$userId = $userId[0]->id; 
```

在 $profile 变量初始化之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:22:26.833

问题似乎出在 $this->readUserId() 中，它返回一个数组而不是一个标量。请检查一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:20:13.727

您的“用户 ID”字段是一个数组。您的帖子中还有另一个“用户 ID”。在您的视图文件中查找重复的名称。

# jsonschema - JSON 模式类型

> ID：13453631
> 
> 赞同：2
> 
> 时间：2012-11-19T12:16:38.803
> 
> 标签：jsonschema

我想使用 JSON Schema 并允许新类型（目前有字符串数字数组对象 boolean 和 null）

例如我想为联系人添加一个类型

甚至可以在 JSON 中使用吗？有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-23T15:11:38.427

如果您的目标是定义`contact`一次并多次重复使用，您可以为`object`命名创建一个定义`contact`，然后在需要时使用 JSON 指针引用它。

其中一个示例可能如下所示：

```
{
    "type": "object",
    "definitions": {
        "contact": {
            "properties": {
                "name": {
                "type": "string"
                 },
                 "phone": {
                    "type": "string"
                }
            }
        }
    },
    "properties": {
        "Person": {
            "properties": {
                "contact": {
                    "$ref" : "#/definitions/contact"
                },
                "birthday": {
                    "type": "string",
                    "format": "date-time"
                }
            }
        },
        "Company": {
            "properties": {
                "contact": {
                    "$ref" : "#/definitions/contact"
                },
                "inBusinessSince" : {
                    "type": "string",
                    "format": "date-time"
                }
            }
        }
    }
} 
```

现在假设您希望在 Company 的 contact 属性上拥有比在 Person 上更多的属性。您可以使用 allOf 关键字，这样上面的 Company 现在看起来像这样：

```
"Company": {
    "properties": {
        "contact": {
            "allOf": [
                {"$ref" : "#/definitions/contact"},
                {
                    "properties": {
                        "fax": {
                            "type": "string"
                    }
                }
            ],
           "inBusinessSince" : {
               "type": "string",
               "format": "date-time"
            }
        }
    } 
```

有关更多信息，请参阅以下链接。

*   [构建 JSON 模式](http://spacetelescope.github.io/understanding-json-schema/structuring.html)
*   [组合 JSON 模式](http://spacetelescope.github.io/understanding-json-schema/structuring.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:04:50.267

是的，我们可以在 JSON 中添加联系人类型

假设您的程序需要这种格式的联系人类型的数据

```
{
contact: [
{contactid:1, contactname: "abc", address:"abcdfg"},
{contactid:2, contactname: "hjk", address:"hjkdfg"}
]
} 
```

这里的 Contact 对象有一个 id、name 和 address。我们可以为联系人创建一个模式

```
{
"type" : "object",
"properties": {
         "contact":{
              "type":"object"
              "items":{
                  "type": "object",
                  "properties":{
                          "contactid": {"type":"number"}
                          "contactname": {"type":"string"}
                          "address": {"type":"string"}
                               }
                      }
                   }
                }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T20:00:16.857

There's a json schema for that: [http://json-schema.org/card](http://json-schema.org/card)

To include it in your json schema:

```
{
    "contact": { "$ref": "http://json-schema.org/card"}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:51:31.300

“联系人”的类型应该是对象类型，不是吗？然后这个对象有几个属性，例如一个包含地址的字符串。所以根本不需要定义新类型，因为每个新类型——如果你把它分解的话——都由原始类型字符串、数字、数组或对象组成。

因此，对于联系人，您可以写：

```
"contact"{
    "id": "contact",
    "required": false,
    "type": "object",
    "properties":{
        "address"{
            "id": "address",
            "required": true,
            "type": "string"
        }
        "phoneNumbers"{
            "id": "phoneNumbers",
            "required": false,
            "type": "array",
            "items":{
                "id": "0",
                "required": false,
                "type": "object",
                "properties":{
                    "type"{
                        "id": "type",
                        "required": false,
                        "type": "string"
                    }
                    "number"{
                        "id": "number",
                        "required": false,
                        "type": "string"
                    }
                }
            }
        }
    }
} 
```

根据这个模式，一个简单的联系人对象可能如下所示：

```
{
    "address": "Example Street 123",
    "phoneNumbers":
    [
        {
            "type": "home",
            "number": "123-456789"
        }
    ]
} 
```

现在假设您在另一个对象中有多个联系人，那么您必须在存储联系人的每个位置添加联系人模式。
如上所述，我认为没有必要引入新类型，尽管您的模式可以变得非常非常大。除此之外，我不知道任何允许新原始类型的 JSON 模式规范。

# android - 服务器中的 PHP 文件未从 android 客户端执行

> ID：13453635
> 
> 赞同：0
> 
> 时间：2012-11-19T12:16:47.590
> 
> 标签：android

我再次回到你身边，因为我只是被封锁了。我想执行存储在服务器中的 php 文件，为此，我使用了该代码：

```
@Override
        protected Void doInBackground(Void... params) {
           // Network operation
            String url = "http://192.168.1.4/android_connect/get_all_surveys.php";
            HttpClient client = new DefaultHttpClient();
            try {

              client.execute(new HttpGet(url));
              Log.d("EXECUTED",client.execute(new HttpGet(url)).toString());
            } catch(IOException e) {
              Log.d("EXCEPTION EXECUTION",e.toString());
            }
            return null;
        } 
```

我想表明该日志`Log.d("EXECUTED",client.execute(new HttpGet(url)).toString());`已显示，因此执行 php 脚本的那一行肯定有问题，`client.execute(new HttpGet(url));`而不仅仅是一个 http get 请求？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:27:46.710

你的代码看起来不错。但是您无缘无故地执行了两次 GET 请求（也没有“执行 PHP 脚本”-您只是在执行 GET 请求。它将在服务器上触发的操作是另一回事）。

替换此代码：

```
client.execute(new HttpGet(url));
Log.d("EXECUTED",client.execute(new HttpGet(url)).toString()); 
```

和：

```
HttpResponse response = client.execute(new HttpGet(url));
Log.d("EXECUTED: " + response ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:28:51.763

访问 URL 时，客户端通常不需要关心背后使用的技术。这个 Android 应用程序和其他任何应用程序一样都是客户端，因此它不需要“激活”它尝试连接的 PHP 脚本。此脚本的行为取决于服务器应用程序。

# android - 在 Android 4.2 中阅读 APNs？

> ID：13453640
> 
> 赞同：11
> 
> 时间：2012-11-19T12:17:12.880
> 
> 标签：android, apn

我在 Android v4.2 中**读取 APN时遇到问题****（是读取，而不是写入 APNS）**，它引发了安全异常：

> 没有写入 APN 设置的权限：用户 10068 和当前进程都没有 android.permission.WRITE_APN_SETTINGS。

以前的所有平台都使用相同的代码，有没有人知道解决这个问题的方法？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-19T14:14:10.327

如果您想阅读适用于 Android 4.2 及更多版本的 APN，则需要进行更改。我测试了，它的工作。

在 Android 4.1 及以下使用这个：

```
Cursor c = getContentResolver().query(Uri.withAppendedPath(Telephony.Carriers.CONTENT_URI, "current"), null, null, null, null); 
```

对于 Android 4.2 及更高版本，请使用以下代码：

```
private static final String[] APN_PROJECTION = {
     Telephony.Carriers.TYPE,            // 0
     Telephony.Carriers.MMSC,            // 1
     Telephony.Carriers.MMSPROXY,        // 2
     Telephony.Carriers.MMSPORT          // 3
 }; 
```

而这一行：

```
final Cursor apnCursor =SqliteWrapper.query(context, this.context.getContentResolver(), Uri.withAppendedPath(Carriers.CONTENT_URI, "current"), APN_PROJECTION, null, null, null); 
```

SQLiteWrapperClass 是隐藏的（在互联网上找到这个类）

```
import android.database.sqlite.SqliteWrapper; 
```

我的英语不太好，抱歉。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-19T13:14:06.380

这似乎是一种有意的改变。[他们添加此防御](https://github.com/android/platform_packages_providers_telephonyprovider/commit/410a1228ec7aef66826f4aebf21cd26dc75ae82b)的git commit包括以下评论：

> 由于数据库可能包含公司密码，我们应该保护它。使用与写入数据库相同的权限作为读取可能与写入一样具有破坏性。

可以想象，你的问题会导致他们考虑添加单独的读取权限，但至少目前，这是 4.2 的回归。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-26T14:34:24.853

您可以从 /etc/apns-conf.xml 读取默认设置：

```
private boolean getSettingsFromApnsFile(Context context, String apnName) {
    FileReader reader = null;
    boolean sawValidApn = false;

    try {
        reader = new FileReader("/etc/apns-conf.xml");

        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser xpp = factory.newPullParser();
        xpp.setInput(reader);

        TelephonyManager telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
        String simOperator = telephonyManager.getSimOperator();
        if (TextUtils.isEmpty(simOperator)) {
            logger.warn("unable to get sim operator - so unable to get mms config");
            return false;
        }

        int eventType = xpp.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT) {
            if (eventType == XmlPullParser.START_TAG && xpp.getName().equals("apn")) {
                HashMap<String, String> attributes = new HashMap<String, String>();
                for (int i=0; i<xpp.getAttributeCount(); i++) {
                    attributes.put(xpp.getAttributeName(i), xpp.getAttributeValue(i));
                }
                if (attributes.containsKey("mcc") && attributes.containsKey("mnc") && simOperator.equals(attributes.get("mcc")+attributes.get("mnc"))) {
                    if (!TextUtils.isEmpty(apnName) && !apnName.trim().equals(attributes.get("apn"))) {
                        eventType = xpp.next();
                        continue;
                    }

                    if (isValidApnType(attributes.get("type"), PhoneConstants.APN_TYPE_MMS)) {
                        sawValidApn = true;

                        String mmsc = attributes.get("mmsc");
                        if (mmsc == null) {
                            eventType = xpp.next();
                            continue;
                        }

                        mServiceCenter = NetworkUtil.trimV4AddrZeros(mmsc.trim());
                        mProxyAddress = NetworkUtil.trimV4AddrZeros(
                                attributes.get("mmsproxy"));
                        if (isProxySet()) {
                            String portString = attributes.get("mmsport");
                            try {
                                mProxyPort = Integer.parseInt(portString);
                            } catch (NumberFormatException e) {
                                if (TextUtils.isEmpty(portString)) {
                                    logger.warn("mms port not set!");
                                } else {
                                    logger.error("Bad port number format: " + portString, e);
                                }
                            }
                        }
                    }

                }
            }
            eventType = xpp.next();
        }
    } catch (Exception e) {
        logger.warn("unable to get mmsc config from apns-conf file", e);
    } finally {
        if (reader != null) {
            try {
                reader.close();
            } catch (Exception e) {
            }
        }
    }
    return sawValidApn;
} 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2014-10-20T02:03:24.940

我也有这种情况，我的解决方案是不要在 AsyncTask 中访问 android_assets。"**确保只有您的主线程有权访问您应用的 assets 目录**"

当我像这样编码时遇到了问题：

```
@Override
protected void onResume() {
    super.onResume();
    //mWebView.loadUrl("file:///android_asset/95306.html");
    new LoadUrlTask().execute("file:///android_asset/95306.html");
}

...

class LoadUrlTask extends AsyncTask<String, Integer , String> {
    // progressDialog = new ProgressDialog(LoadActivity.this);

    @Override
    protected String doInBackground(String... strings) {
        mWebView.loadUrl(strings[0]);
        return "";
    }

    @Override
    protected void onPostExecute(String s) {
        super.onPostExecute(s);
        //progressDialog.dismiss();
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        //progressDialog.setMessage("loading...");
        //progressDialog.show();
    }
} 
```

我通过以下方式修复它：

```
@Override
protected void onResume() {
    super.onResume();
    mWebView.loadUrl("file:///android_asset/95306.html");
    //new LoadUrlTask().execute("file:///android_asset/95306.html");
} 
```

希望对你有帮助！

# java - 如果我想允许字符串中的所有字符，我应该使用什么 Lucene 分析器？

> ID：13453644
> 
> 赞同：0
> 
> 时间：2012-11-19T12:17:26.470
> 
> 标签：java, string, search, lucene

我正在创建一个字典应用程序，它同时搜索一个单词及其定义（两个单独`Field`的 s）。但是，使用 a`StandardAnalyzer`时，如果搜索字符串包含空格或特殊字符，则不会返回搜索结果。

例如，在我的虚拟字典数据中，搜索“lorem”会搜索其定义中包含“lorem”的所有单词，但搜索“lorem ipsum”不会返回任何结果，即使我的大多数虚拟词在定义中都有 lorem ipsum。

此外，搜索“make-believe”之类的词只会在键入“make”时返回结果，但只要我包含破折号，就不会返回任何内容。

我想包括空格、破折号、逗号等字符——基本上是搜索字符串中的所有内容（除了“and”、“at”、“by”等无意义的词之外），但是我应该使用什么分析器? 我已经尝试`PatternAnalyzer`并提供`.+`了`Pattern`要查找的内容，但即使只输入一个字母也不会返回任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T22:25:00.763

我会认真考虑编写自己的分析器，但我知道这比使用现有分析器更难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:45:21.863

我坚持使用 a ，`StandardAnalyzer`因为似乎没有其他选择。我所做的是通过捕获非单词字符的正则表达式对字符串进行标记，将它们组合在 AND`BooleanQuery`中，并将两个`Field`s 的查询组合在另一个 OR`BooleanQuery`中。

在我下面的代码中，`entry`是单词，`description`是定义，`s`是搜索字符串`CharSequence`。

```
BooleanQuery bq = new BooleanQuery();
BooleanQuery entryBQ = new BooleanQuery();
BooleanQuery descriptionBQ = new BooleanQuery();
String[] tokens = String.valueOf(s).split("[^a-zA-Z0-9]");
for (String token : tokens) {
    if (token.isEmpty()) continue;
    entryBQ.add(new WildcardQuery(new Term("entry", token + "*")), BooleanClause.Occur.MUST);
    descriptionBQ.add(new WildcardQuery(new Term("description", token + "*")), BooleanClause.Occur.MUST);
}
bq.add(entryBQ, BooleanClause.Occur.SHOULD);
bq.add(descriptionBQ, BooleanClause.Occur.SHOULD);
TopScoreDocCollector collector = TopScoreDocCollector.create(10, true);
is.search(bq, collector); 
```

这在我的 Android 应用程序中现在非常慢，但我可以稍后对其进行优化。:)

# haskell - 基于过滤器输出的过滤器

> ID：13453648
> 
> 赞同：1
> 
> 时间：2012-11-19T12:17:43.073
> 
> 标签：haskell

我有一个列表列表，例如`[[1,1,3],[1,2,4],[4,4,4],[5,6,7]]`

我想删除所有具有重复元素的列表，返回例如`[[1,2,4],[5,6,7]]`

我当前的问题是为我的`filter`. 我目前正在尝试根据该列表的预期长度测试过滤列表的长度。但是，我正在努力让它作为`list`.

```
removeLoops :: [[Integer]] -> Integer -> [[Integer]]
removeLoops list vs = filter (genericLength(filter (==)) < vs) list 
```

我在吠叫错误的树吗？还是只是对谓词的误解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:36:08.483

我认为解决方案比您想象的要简单。您可以使用测试给定列表是否有重复项的谓词过滤您的列表：

```
ls = [[1,1,3],[1,2,4],[4,4,4],[5,6,7]]
filtered = filter hasNoDuplicates ls 
```

那么剩下的就是找到一个合适的谓词。在这种情况下，该`nub`功能就派上用场了。此函数接受一个列表，并返回该列表而不重复。所以你可以说：

```
import Data.List (nub)

hasNoDuplicates l = l == nub l 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:35:53.007

这应该适合你。

removeListsWithDuplicates 使用一个助手 hasDuplicates 来过滤列表列表。简单的。

```
removeListsWithDuplicates :: [[Integer]] -> [[Integer]]
removeListsWithDuplicates ls = filter (not . hasDuplicates) ls 
```

有重复。空列表没有重复项。如果第一个元素在列表的其余部分中重复或列表的其余部分有一些其他重复项，则具有多个元素的列表只有重复项。

```
hasDuplicates :: [Integer] -> Bool
hasDuplicates [] = False
hasDuplicates (x:xs) = any (==x) xs || hasDuplicates xs 
```

# php - 将变量分配给 xml 中的值

> ID：13453651
> 
> 赞同：1
> 
> 时间：2012-11-19T12:17:51.487
> 
> 标签：php, xml, parsing

我的 XML 文件是：

```
<hotels xmlns="">
  <hotels>
    <hotel>
      <noofrooms>10</noofrooms>
      <website></website>
      <imageref>oias-sunset-2.jpg|villas-agios-nikolaos-1.jpg|villas-agios-nikolaos-24.jpg|villas-agios-nikolaos-41.jpg</imageref>
      <descr>blah blah blah</descr>
      <hotelid>119</hotelid>
    </hotel>
</hotels> 
```

我想为每个 imageref 分配一个变量：

```
$image1 = "oias-sunset-2.jpg";
$image2 = "villas-agios-nikolaos-1.jpg";
............. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:26:08.720

如果您的 xml 有效，您可以使用（如评论中所建议）：

```
$xml = simplexml_load_file($path_to_file);
$images = explode('|', $xml->hotel->imageref); 
```

要查看您现在拥有的内容，您可以使用：

```
print_r($images); 
```

见[http://php.net/simplexml_load_file](http://php.net/simplexml_load_file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:28:09.890

您可以使用 SimpleXML 解析文件，然后使用 explode 函数将其拆分为变量。

```
$doc = new SimpleXMLElement($yoursqlstring);
foreach($doc->hotel as $hotel){
    $refs = explode('|',$hotel->imageref);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:28:54.693

试试这个 ：

```
$images[] = '';
$xmlString = 'your xml';
$xml = new SimpleXMLElement($xmlString);
foreach ($xml->hotels->hotel->imageref as $img_urls) {
 $images[] = $img_urls;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:40:37.803

```
$doc = new SimpleXMLElement($yoursqlstring);
foreach($doc->hotel as $hotel){
    $image_array = explode('|', $hotel->imageref);
    foreach($image_array as $k => $img)
        $image[$k+1] = $img;
} 
```

现在您可以通过以下方式访问图像

```
echo $image[1];
echo $image[2];
.
.
. 
```

# jquery - AJAX：获取 html 并检查图像是否已完成加载

> ID：13453658
> 
> 赞同：3
> 
> 时间：2012-11-19T12:18:13.457
> 
> 标签：jquery, ajax

我正在使用 AJAX 在特定容器中加载 html 和图像。我需要为封闭容器的高度设置动画，所以我尝试了：

```
// load content
var id = $(this).data('id');
$.get('content/'+id+'/html/content.html', function(data) {

    // insert html
    $('#overlay-inner').html(data);

    // show overlay
    $('#overlay').fadeIn();

    // add new height to wrapper
    var height = $('#overlay').height() + 200;
    console.log(height);
    $('#wrapper').animate({'height':height});

}); 
```

不幸的是，它仅在某些时候有效，因为高度不正确。加载的数据包含一些图像，它们需要一点时间来加载。

有什么方法可以检查是否所有图像都已加载，所以我可以在完成加载后为高度设置动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:22:45.570

使用 ImagesLoaded 插件：

[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

有关示例，请参见该页面。

jQuery`$().load`不起作用，因为当图像已经缓存时它不会触发（请参阅[jquery: image width on domready or load?](https://stackoverflow.com/questions/4461689/jquery-image-width-on-domready-or-load)）

# php - .htaccess url 重写

> ID：13453665
> 
> 赞同：1
> 
> 时间：2012-11-19T12:18:29.330
> 
> 标签：php, mysql, .htaccess

我在 000webhost.com 上创建了一个博客。我想用来`.htaccess`重写我`urls`的，例如：

首页----index.php-----index

等等

另外，我想隐藏存在查询字符串的 URL。

到目前为止，我已经在我的`.htaccess`文件中编写了这段代码，但我不知道为什么代码不起作用。

```
RewriteBase     /
Options         +FollowSymlinks
RewriteEngine   on
RewriteRule     ^(.*)\.htm$ $1.php [NC] 
```

# python - 嵌套 for 循环的缩进

> ID：13453666
> 
> 赞同：1
> 
> 时间：2012-11-19T12:18:33.797
> 
> 标签：python, indentation

我想知道为什么这是正确的：

```
for heading in soup.find_all("td", class_="paraheading"):
    key = " ".join(heading.text.split()).rstrip(":")
    if key in columns:
        print key
        next_td = heading.find_next_sibling("td", class_="bodytext")
        value = " ".join(next_td.text.split())
        print value
    if key == "Industry Categories":
        print key
        ic_next_td = heading.find_next_sibling("td", class_="bodytext")
        for value in ic_next_td.strings:
                print value 
```

这不是：

```
for heading in soup.find_all("td", class_="paraheading"):
    key = " ".join(heading.text.split()).rstrip(":")
    if key in columns:
        print key
        next_td = heading.find_next_sibling("td", class_="bodytext")
        value = " ".join(next_td.text.split())
        print value
    if key == "Industry Categories":
        print key
        ic_next_td = heading.find_next_sibling("td", class_="bodytext")
        for value in ic_next_td.strings:
            print value 
```

`print value`注意在第一个代码块中看似双缩进。

下`for value in ic_next_td.strings:`一个缩进级别不会是该行的一个额外缩进级别吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T12:19:42.247

您正在混合制表符和空格。不要这样做。

运行`python -tt yourscript.py`以检测任何不一致之处，但最重要的是，始终*只*使用空格。

将您的编辑器配置为使用空格进行缩进，并将所有现有的制表符替换为空格。大多数代码编辑器都有这个功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T12:24:29.667

打开在编辑器中显示制表符和空格字符 - 可能有错误

# java - 在 java GUI 中显示一个 excel 页面

> ID：13453669
> 
> 赞同：0
> 
> 时间：2012-11-19T12:18:39.847
> 
> 标签：java, swing, excel, user-interface, applet

我需要在 Java GUI 应用程序中显示 Excel 文件的整个页面，我看到 POI 库在这方面可能无济于事，因为我想要电子表格视图。在 Applet、swing 或 jSP 页面中执行此操作的最佳方法是什么？除了Java之外的任何其他建议也欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:03:33.297

您可以通过使用“启动关联的应用程序以打开文件”的`Desktop`方法来利用现有的 Excel 安装。[`open`](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#open%28java.io.File%29)

# asp.net - 字体必须在服务器上还是在用户计算机上

> ID：13453671
> 
> 赞同：1
> 
> 时间：2012-11-19T12:18:43.017
> 
> 标签：asp.net, html, css

我在我的网站上使用了一种不太常见的字体，我想知道，为了让用户看到它，是否足够（是否有）安装在服务器上？还是必须安装在用户的机器上？我怎么知道字体是否是免费字体？我想使用 SketchFlow Print

我正在使用 Asp.Net，CSS 2。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:25:44.157

使用的 CSS 版本取决于用户的浏览器。

如果用户在他的计算机上没有字体，他将看不到您希望他看到的字体。

但是，如果您使用 CSS3，则可以使用[Google 的字体（免费）](http://www.google.com/webfonts)。看看 CSS3 、`tff`和`eot`格式。`otf``woff`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:27:27.957

CSS3 包含 @font-face 指令，它允许您指定自定义字体，只要浏览器支持该指令，该字体将用于呈现内容。

对于所有不使用@font-face 指令的字体（以及在不支持它的浏览器中），字体由用户机器使用它们可用的字体呈现。如果您指定的字体在他们的机器上不存在，他们的浏览器将默认使用不同的字体。帮助控制这种情况的一种方法是指定多种字体，如下所示：

```
font-family: Verdana, Arial, Tahoma, Sans-Serif; 
```

浏览器将尝试显示列表中的第一个字体，如果它不支持给定字体，则逐个下降，直到找到它支持的字体。最后一点，这些声明应始终以以下通用系列之一结尾：

*   衬线
*   无衬线字体
*   等宽
*   草书
*   幻想

浏览器总会有某种形式的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:21:13.590

如果您使用 CSS3，您可以将 @font-face 用于服务器端字体。

至于免费字体，google吧，别偷懒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:30:02.990

如果您想要标题 fe 的特定字体并且您不能依赖 CSS3，那么您可以将其渲染到服务器端的图像并在响应 HTML 中动态链接图像。

通过使用链接到标题的文件名，您可以将图像存储在服务器上以便缓存它（因此您只需渲染某个标题/图像一次）。

请注意，我在这里提到了“标题”，因为这对于呈现完整的段落没有用:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T12:46:14.713

字体需要在用户的机器上，但为此，它需要在服务器上，以便可以指示浏览器获取它（除非用户的机器恰好有它，这对于像 SketchFlow Print 这样的字体是不可能的）。服务器不必是您的服务器；该字体可以托管在另一台服务器上，例如 Google 服务器。

搜索“@font-face”以找到使用可下载字体的合适介绍。

当您有字体作者的声明时，您就知道字体是免费字体。请注意，网络上的许多“免费字体”都不是。快速检查：下载页面是否提及字体的作者（并链接到她或他的页面）？

以后，请分别提出单独的问题。（关于免费字体的问题与使用可下载字体的技术问题完全不同。）

# css - Sass 占位符选择器和 Modernizr .no 类

> ID：13453674
> 
> 赞同：1
> 
> 时间：2012-11-19T12:18:56.263
> 
> 标签：css, sass, placeholder, modernizr

假设我在 Sass 中有一个占位符选择器。在该选择器中，我编写了一些样式，显然我需要使用 Modernizr 检查该功能。

问题似乎是您要使用由modernizr 提供的 .no-generatedcontent 或 .generatedcontent 类，但它们不能使用，因为一旦占位符选择器完成工作，它们将位于错误的层次结构位置。

我能看到解决这个问题的唯一方法是将它们放在占位符选择器之外，但这会扰乱我的风格，而 Sass 旨在帮助我的风格更有条理。

关于如何解决这个问题的任何想法？

这是我的意思的一个例子：

`<html>`一旦modernizr完成了它的工作，我页面顶部的标签：

```
<html class="js flexbox flexboxlegacy canvas canvastext webgl touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths wf-allumistd-n1-active wf-freightsanspro-n3-active wf-automate-n4-active wf-automate-n7-active wf-active"> 
```

现在，假设我有一个名为的占位符选择器`%styles`

```
%styles {
li {
this: this;
}
.no-generatedcontent li {
this: that;
}
} 
```

现在，我在代码中的某处使用这个占位符，如下所示：

```
.main {
section {
.box-area {
color: red;
@extend %styles;
}
}
} 
```

在我看来，modernizr 类位于错误的位置以使其产生任何效果似乎很明显。这是一种层次结构问题。我可以通过将它放在占位符之外来解决它，但是我必须单独@extend 它并且我的 sass 代码变得一团糟，这是我开始使用 sass 来保持我的样式更整洁的主要原因。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:03:52.347

萨斯：

```
%styles {
    li {
        border: 1px solid red;

        .no-generatedcontent & { // note the location of the & here
            border: 1px solid red;
        }
    }
}

.main {
    section {
        .box-area {
            color: red;
            @extend %styles;
        }
    }
} 
```

CSS：

```
.main section .box-area li {
  border: 1px solid red; }

.no-generatedcontent .main section .box-area li, .main section .no-generatedcontent .box-area li {
  border: 1px solid red;
  background: #CCC; }

.main section .box-area {
  color: red; } 
```

使用时似乎有一个错误`@extend`（看看它是如何在线生成 2 个选择器的`.no-generatedcontent`？Sass 3.2.3）。如果我改用 mixin，则不会发生这种情况：

```
.main section .box-area {
  color: red; }

  .main section .box-area li {
    border: 1px solid red; }

  .no-generatedcontent .main section .box-area li {
    border: 1px solid red;
    background: #CCC; } 
```

# ios - 使用 siri 进行语音到文本的转换

> ID：13453676
> 
> 赞同：0
> 
> 时间：2012-11-19T12:19:01.927
> 
> 标签：ios, text, ios6, voice-recognition

对于更高版本的 iOS，单击 textView 或 textfield 时到达的键盘包含一个麦克风图标，可以进行语音到文本的转换单击按钮。我该怎么做。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:39:30.197

另外，尝试查看此帖子。它有很多有用的信息。Siri 还没有以 API 形式提供，但是，可以指定任何 UITextField 或 UITextArea 使用语音到文本的内置选项。

[iPhone：语音识别在 IOS SDK 中可用？](https://stackoverflow.com/questions/7823693/iphone-speech-recognition-is-in-ios-5-sdk-available)

# android - 如何使用 musicbrainz 获取专辑图片

> ID：13453678
> 
> 赞同：4
> 
> 时间：2012-11-19T12:19:04.563
> 
> 标签：android, android-music-player, albumart

我不知道我是否可以在这里提出这样的问题。我的问题如下。

我正在自己制作音乐播放器，我想为那些没有专辑图片的歌曲下载专辑图片。就像[N7Music Player](https://play.google.com/store/apps/details?id=com.n7mobile.nplayer&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5uN21vYmlsZS5ucGxheWVyIl0.)正在做的那样。我自己做了一些搜索，我知道使用 MusicBrainz 我们可以下载图像。

我寻找了它的 API，但我没有清楚地得到它。我有以下疑问。

1.  如何获取其 API 密钥？
2.  它是免费的吗？
3.  如果已知艺术家和歌曲名称以获取该歌曲的专辑图像，如何调用 API？

我正在等待您的宝贵回复。

提前谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T17:43:21.360

您需要做的第一件事是确定要从中获取图像的专辑的发布标识符（发布 MBID），您可以使用搜索 API 来执行此操作，例如：

```
http://www.musicbrainz.org/ws/2/recording/?query=artist:nikes+recording:ftg2 
```

因为它是一个搜索，你会得到很多结果，其中一些是错误的。在这种情况下，第一个结果是正确的并且只匹配一个版本，它具有以下 MBID：“c04730ea-87cb-478b-a256-08c0561d20e6”。

现在您有了一个标识符，您可以在封面存档中进行查找：

```
http://coverartarchive.org/release/c04730ea-87cb-478b-a256-08c0561d20e6/ 
```

这将为您提供包含可用图像列表的 json 响应（如果该版本在封面存档中没有封面艺术，则为 404）。

然而，封面档案是相当新的，可能并不总是有封面艺术。MusicBrainz 有时有一个封面艺术的链接，您可以通过在 Web 服务请求中包含“url-rels”来查找它，例如对于发布 MBID“fdfdb3c0-8820-4c22-94e6-6aa136e36c31”，您可以执行此请求：

```
http://musicbrainz.org/ws/2/release/fdfdb3c0-8820-4c22-94e6-6aa136e36c31?inc=url-rels 
```

在输出中，您将看到图像的 url：

```
<relation type="cover art link">
    <target>http://liveweb.archive.org/http://www.8bitpeoples.com/images/albums/large/8BP049.gif</target>
</relation> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:29:54.470

根据您感兴趣的语言，这可能已为您完成。这里有一个 C/C++ 库：

[http://musicbrainz.org/doc/libcoverart](http://musicbrainz.org/doc/libcoverart)

安迪

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T11:49:25.033

我写了一个[类似问题](https://stackoverflow.com/questions/15983877/how-to-get-an-albums-musicbrainz-id)的答案。

现在有一些库可以在 Android 上使用：

Last.fm 的[CoverArtArchiveClient](https://github.com/lastfm/coverartarchive-api)是封面艺术 Web 服务的 Java 数据绑定，[musicbrainzws2-java](http://code.google.com/p/musicbrainzws2-java/)是当前 MusicBrainz Web 服务 (WS/2 = "NGS") 的 Java 绑定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T08:34:06.373

如果您知道专辑名称和艺术家姓名，那么下面的链接将很有用。它将为您提供图像。

[http://www.radiodj.ro/community/index.php?topic=1895.0](http://www.radiodj.ro/community/index.php?topic=1895.0)

# scala - 来自命令行 RichInt NoClassDefFoundError 的 Scala

> ID：13453690
> 
> 赞同：1
> 
> 时间：2012-11-19T12:19:37.900
> 
> 标签：scala

我是 Scala 的新手。你能帮我解决从命令行执行 Scala 类时遇到的问题吗？

在 Eclipse 中执行下面的代码，我得到了预期的结果，即“hello”打印了 10 次。但是，当我从命令行执行时，使用包含文件 testArray.class 的目录中的**scala** testArray 然后我得到一个异常

```
java.lang.NoClassDefFoundError: scala/runtime/RichInt$
        at TestArray$.main(TestArray.scala:3)
        at TestArray.main(TestArray.scala)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
... 
```

我有一台安装了 Java 1.6 的 Windows XP 机器。Scala bin 目录包含在 PATH 中，Scala 目录设置为 SCALA_HOME。我正在使用 Scala 2.9.2。

完整来源：

```
object TestArray {
  def main(args: Array[String]): Unit = {
    var index: Int = 10

    for (index <- 0 until 10) {
      println("hello")
    }    
  }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:03:02.590

检查源代码在解释器中执行 OK，然后使用 scalac 在 Eclipse 外部编译并执行 OK，我收集到 Eclipse 部分一定有问题。事实上，我从 Eclipse 中卸载了 scala 并从夜间构建中重新安装，现在创建的类可以毫无问题地执行。

# fluent-nhibernate - 有两个 ContentTypeRecords 可以相互了解

> ID：13453699
> 
> 赞同：1
> 
> 时间：2012-11-19T12:19:52.870
> 
> 标签：fluent-nhibernate, orchardcms

考虑我需要 ProductPartRecord 类型和 ManufacturerPartRecord 类型的情况。在第一种类型中，我需要知道这部分的制造商是谁，因此使用 ManufacturerPartRecord 类型的属性会很方便。在第二种类型中，我想知道这个制造商生产的产品，因此拥有 IList 类型的属性会很方便。

显然这是一对多的关系。将记录放入记录中是一种不好的做法吗？这甚至可能吗，因为我在实施它时遇到了麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:37:31.370

有可能的。这是如何做到的：

1.  在迁移中，向其添加一列`ProductPartRecord`类型`int`，名称应`ManufacturerPartRecord_Id`假定`Id`为表中主键的名称`ManufacturerPartRecord`。
2.  在迁移中创建一个外键。它应该看起来像这样`SchemaBuilder.CreateForeignKey("Product_Manufacturer", "ProductPartRecord", new[] { "ManufacturerPartRecord_Id" }, "ManufacturerPartRecord", new[] { "Id" });`
3.  在`ManufacturerPartRecord`模型类中，您应该添加一个用于产品列表的新属性 -`public virtual IList<ProductPartRecord> ProductPartRecords { get; set; }`
4.  在`ProductPartRecord`模型类中，您应该添加一个用于获取制造商的新属性 -`public virtual ManufacturerPartRecord ManufacturerPartRecord { get; set; }`

现在应该全部设置为自动为您的产品获取制造商，反之亦然。

如果您不希望这种情况自动发生，您应该创建一个服务类，该类将获取`IRepository<ManufacturerPartRecord>`或`IRepository<ProductPartRecord>`通过构造函数注入并自己处理获取和保存列表。

# jquery - 如何在 JQuery 中迭代 DOM

> ID：13453709
> 
> 赞同：0
> 
> 时间：2012-11-19T12:20:15.280
> 
> 标签：jquery

以下是HTML

```
<div id="serverList" class="content">
    <div class="boxtitle">
    </div>
    <div id='serverInfo1' class="formEl_b">
        <fieldset>
            <legend>Server #1</legend>
            <div class="section">
                <label>
                    Server Description<small>Linux</small></label>
                <div>
                    <input type="text" id="serverDescription" class="serverDescription medium" /><span class="f_help"></span></div>
            </div>
            <div class="section">
                <label>
                    Server HostName<small>SRV_FR_TERT</small></label>
                <div>
                    <input type="text" id="serverHostName" class="serverHostName medium" /><span class="f_help"></span></div>
            </div>
        </fieldset>
    </div>
    <div id='serverInfo2' class="formEl_b">
        <fieldset>
            <legend>Server #2</legend>
            <div class="section">
                <label>
                    Server Description<small>Windows 2003</small></label>
                <div>
                    <input type="text" id="serverDescription" class="serverDescription medium" /><span class="f_help"></span></div>
            </div>
            <div class="section">
                <label>
                    Server HostName<small>SRV_EQ_SFGT</small></label>
                <div>
                    <input type="text" id="serverHostName" class="serverHostName medium" /><span class="f_help"></span></div>
            </div>
        </fieldset>
    </div>
    <div id='serverInfo3' class="formEl_b">
        <fieldset>
            <legend>Server #3</legend>
            <div class="section">
                <label>
                    Server Description<small>iOS</small></label>
                <div>
                    <input type="text" id="serverDescription" class="serverDescription medium" /><span class="f_help"></span></div>
            </div>
            <div class="section">
                <label>
                    Server HostName<small>SRV_WR_RQRT</small></label>
                <div>
                    <input type="text" id="serverHostName" class="serverHostName medium" /><span class="f_help"></span></div>
            </div>
        </fieldset>
    </div>
</div> 
```

我正在尝试使用 JQuery 迭代上面的 html`description`并`hostname`为每个服务器打印

```
$("#serverList").children(".formEl_b").each(function () {

      // this is what i am trying to get with no success:
      var description = $(".formEl_b .serverDescription").val();
      var hostname = $(".formEl_b .serverHostName").val();

      alert(description);
      alert(hostname);

}); 
```

我遇到的问题是它总是打印第一个`description`，`hostname`甚至有 3 个此类项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:22:18.550

你的选择器

```
$(".formEl_b .serverDescription") 
```

正在查找所有具有该类的元素，这些元素`.serverDescription`作为 DOM 的后代出现在 DOM 中的任何位置`.formEl_b`，但是由于您已经在循环父元素，因此您可以使用以下内容：

```
$("#serverList").children(".formEl_b").each(function () {
      var description = $(this).find(".serverDescription").val();
      var hostname = $(this).find(".serverHostName").val();
      alert(description);
      alert(hostname);
}); 
```

将您的选择器替换为仅搜索循环[`find()`](http://api.jquery.com/find/)内当前元素的后代`each`

`find()`比使用带有上下文的选择器[快](http://jsperf.com/jquery-find-vs-context-sel)`$(".serverDescription", this)`一点（即）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:22:36.473

在里面`.each()`，`this`用来指代当前迭代的元素。

所以：

```
$("#serverList").children(".formEl_b").each(function () {

      var description = $(".serverDescription", this).val();
      var hostname = $(".serverHostName", this).val();

      alert(description);
      alert(hostname);

}); 
```

或等效地：

```
 var description = $(this).find(".serverDescription").val(); 
```

# wordpress - 从服装类型中获取帖子类型

> ID：13453710
> 
> 赞同：0
> 
> 时间：2012-11-19T12:20:17.693
> 
> 标签：wordpress, custom-post-type

我已在一页中显示所有帖子类型，但我的代码不受最终用户支持。我的意思是我想当用户使用自定义类型帖子插件添加自定义类型时，帖子类型应该自动添加到我的代码中。我的代码现在如下。

```
 $post_types = array('a', 'b','c','d','e');//post type names
    foreach( $post_types as $post_type) {

    // The Query
    $the_query = new WP_Query( array(
     'post_type' => $post_type,
     'orderby' => 'post_date',
     'order' => 'DESC',
     'showposts' => 1,
    )); 
```

我希望在用户添加自定义帖子类型时自动添加变量 $post_types。

# scala - 如何检查代码执行是否来自 Play2 中的测试？

> ID：13453713
> 
> 赞同：1
> 
> 时间：2012-11-19T12:20:25.950
> 
> 标签：scala, playframework-2.0

当它来自测试（Specs2）时，我不想执行一些代码例如。电子邮件发件人。

如何检查我的代码是否正在从测试中执行？我在我的规范中使用 fakeApplication 和 TestServer。

或者，我可以通过这种方式检查我的数据库驱动程序（用于测试的 h2 和用于生产的 postgres）。

```
import play.api.Play.current

  def isFromTests:Boolean={
    Play.application.configuration.getString("db.default.driver") match {
      case Some("org.h2.Driver") => true
      case _ =>false
    }
  } 
```

但是有更好的吗？有时我用 h2 运行我的应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T12:30:17.670

您可以使用`play.Play.isTest()`方法检查您是否在测试模式下运行。

# ios - 具有代码覆盖率的 UIAutomation

> ID：13453715
> 
> 赞同：7
> 
> 时间：2012-11-19T12:20:29.380
> 
> 标签：ios, ios-ui-automation

我目前正在自动化我们在 jenkins 上的 iOS 测试。到目前为止，我在运行单元测试、将 OCUnit 转换为 JUnit 以及以 Cobertura 格式生成代码覆盖率方面没有任何问题（很多谷歌搜索，但没有困难的问题）。

但是，在创建 UIAutomation 作业时，我被卡住了。`instruments`测试运行成功（从命令行调用）。生成 junit 报告很棘手，但可能。问题是在运行 UIAutomation 时，没有生成代码覆盖率文件。

是否有可能生成它们？如果不是，你能解释一下为什么吗？

到目前为止我尝试了什么：

1.  将 UIAutomation 附加到 iOS 模拟器上已经运行的应用程序。
    *   这似乎是不可能的。正在运行的应用程序被工具杀死并重新启动新实例或打印出神秘的错误消息。
2.  使用 osascript 和`UIAHost. performTaskWithPathArgumentsTimeout`.
    *   应用程序正常结束，但没有生成覆盖。

**编辑** 在使用不同的框架进行一些测试后，我意识到退出模拟器是不够的，您必须`exit()`从应用程序中显式调用。使用 UI 自动化这有点棘手，但您可以声明一个应用程序方案，例如`my-app://exit`并通过 MobileSafari 使用`UIAHost.performTaskWithPathArgumentsTimeout`. 将检查这是否足以生成文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T15:25:42.743

按照这些步骤，我能够从 UI 自动化生成代码覆盖率文件，并通过 cobertura Jenkins 插件显示信息。

首先将“Generate Test Coverage Files”和“Instrument Program Flow”构建设置设置为Yes。这将在您每次在模拟器中运行应用程序并退出应用程序时生成代码覆盖率文件。在 Info.plist 文件中添加 UIApplicationExitsOnSuspend 并将此选项设置为“YES”。运行 UI 自动化测试，最后您可以通过手动按下模拟器中的 HOME 按钮或使用 UIATarget.localTarget().deactivateAppForDuration() 方法退出应用程序。请注意，如果您的应用程序有任何依赖于 deactivateAppForDuration() 方法的 UI 自动化测试，则测试将在运行该命令时终止。

获得 gcda 文件后，您可以通过下载 gcovr ( [https://software.sandia.gov/trac/fast/wiki/gcovr](https://software.sandia.gov/trac/fast/wiki/gcovr) ) 并运行命令来生成 cobertura xml 文件

gcovr -r your_root_directory --object-directory path_to_gcda_files --xml > coverage.xml

有了它，您可以设置 Jenkins cobertura 插件以根据需要显示信息。

来源：[http ://blog.octo.com/en/jenkins-quality-dashboard-ios-development/#step2-2](http://blog.octo.com/en/jenkins-quality-dashboard-ios-development/#step2-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:49:22.320

据我了解，当应用程序退出时会生成代码覆盖率文件，但你不能仅仅杀死模拟器。

您是否尝试过为您的应用程序创建一个单独的目标，将 info.plist 属性“UIApplicationExitsOnSuspend”设置为 true？

然而，还有一个更广泛的问题。生成的覆盖文件不是累积的，每次应用程序退出时都会被覆盖。因此，根据您的测试的结构（即您是否为每个不同的测试杀死并启动应用程序），您可能很难获得体面的代码覆盖率。

# java - java.text.ParseException：无法解析的日期：“01/11/2012 08:00:00”

> ID：13453716
> 
> 赞同：1
> 
> 时间：2012-11-19T12:20:37.820
> 
> 标签：java, parsing, exception, date

我正在尝试转换`Date`和`time`日历，同时转换我面临

`java.text.ParseException: Unparseable date: "01/11/2012 08:00:00"`

这是我的示例代码：

```
Calendar cal = Calendar.getInstance();
SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM-yyyy H:mm:ss", new Locale("es", "ES"));  

cal.setTime(formatter.parse(Form.getRequestPortDate()+" "+.getRequestTimeDD()+":00")); 
```

注： 的`Form.getRequestPortDate()+" "+Form.getRequestTimeDD()+":00")`值为`01/11/2012 08:00:00`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:24:39.790

`SimpleDateFormat formatter = new SimpleDateFormat("dd-MMM-yyyy H:mm:ss", new Locale("es", "ES"));`

这意味着您将只能解析格式中的日期`dd-MMM-yyyy H:mm:ss`。

如果您以“01/11/2012 08:00:00”格式获取日期，那么您应该在您的`SimpleDateFormatter`:

```
"dd/MM/yyyy HH:mm:ss" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:21:59.223

将日期模式更改为`dd/MM/yyyy HH:mm:ss`

```
Calendar cal = Calendar.getInstance();
SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss", new Locale("es", "ES")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:23:36.930

你的日期是“ `01/11/2012 08:00:00`”，而你试图解析的字符串应该是格式

```
"dd-MMM-yyyy H:mm:ss 
```

改变 `new SimpleDateFormat("dd-MMM-yyyy H:mm:ss", new Locale("es", "ES"));`

到

```
 new SimpleDateFormat("dd/MMM/yyyy H:mm:ss", new Locale("es", "ES")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T12:24:15.160

你的**格式****不对**。

对于这个**日期**：01/11/2012 08:00:00 **格式**应该是： `dd/MM/yyyy HH:mm:ss`

```
Calendar cal = Calendar.getInstance(); SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss", new Locale("es", "ES")); 
```

如果你想使用你现有的格式，**日期**应该是

```
 01/SEP/2012 8:00:00 (dd-MMM-yyyy H:mm:ss) 
```

# entity-framework - EDMX 中的外键关联名称

> ID：13453719
> 
> 赞同：1
> 
> 时间：2012-11-19T12:20:54.567
> 
> 标签：entity-framework, associations, edmx

EDMX 中生成的外键关联名称与其他名称不同。在我的 EDMX 中，我可以看到两种风格的名称

1.  FK_*分配*_EdgeL__367C1819
2.  FK_文件夹项目

我希望所有外键关联名称都应该是第二种格式。我的问题是，如何实现这一目标。

我的 EDMX 是从数据库生成的。

# toggle - 如果单击具有淡入淡出效果的其他链接，则切换类名并删除

> ID：13453720
> 
> 赞同：1
> 
> 时间：2012-11-19T12:20:59.817
> 
> 标签：toggle, fadein, fadeout, effect, classname

这是我有的东西

```
link A  Text A    
link B  Text B   
link C  Text C 
```

当有人点击 时`Link A`，它的颜色变为红色，文本 A 的颜色也应该随着淡入/淡出效果而改变。

再次单击`Link A`将使链接和文本恢复到以前的样式

如果`Link A`处于活动状态（即颜色为红色），单击`Link B`将使样式变为原始样式`Link A`并将变为红色，并且颜色将随着淡入/淡出效果而变化。`Text A``Link B``text B`

这有意义吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:05:35.073

这是一个没有淡入淡出效果的简单解决方案。

```
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#links a').click(function(){
            toggle_link_class(this);
        });

        function toggle_link_class(a){
            $('#links a').removeClass('active'); 
            $('#links a').addClass('inactive'); 
            $(a).toggleClass('inactive active');
        }
    });
</script>

<style>
    #links a{color:#000;}
    #links a.active{color:red;}
</style>

<div id="links">
    <a href="#a">Link A</a> <br />
    <a href="#b">Link B</a> <br />
    <a href="#c">Link C</a> 
</div> 
```

你可以试试下面的“彩色动画库”

[http://www.bitstorm.org/jquery/color-animation/](http://www.bitstorm.org/jquery/color-animation/)

# mysql - Mysql帮助更新查询

> ID：13453721
> 
> 赞同：-2
> 
> 时间：2012-11-19T12:21:00.293
> 
> 标签：mysql, sql

我有以下表结构：

> 状态：TINYINT
> 
> 锁定方式：整数
> 
> 日期：日期时间
> 
> 页面：TINYINT
> 
> my_id: 比金特格
> 
> 主键是（页面，my_id）

并具有以下索引：

> INDEX idx_col_lock_status (locked_by, status),
> 
> 索引 idx_my_id (my_id)

在某些时候，我们有以下行：

```
status, locked_by, date, page, my_id

2       243        NULL  0     1
0       0          NULL  1     1
1       244        NULL  2     1
2       255        NULL  0     2
2       2556       NULL  1     2
2       255        NULL  2     2 
```

我想**更新**所有具有**状态值的行（设置状态 = 0，locked_by = ）！= 2 或**

他们有**状态值 = 2** **但** 有

**具有相同**my_id且**状态为 != 2**的另一行

 **上述更新后，上述行应变为。

```
status, locked_by, date, page, my_id

0       0          NULL  0     1   --note this line
0       0          NULL  1     1
0       0          NULL  2     1   --and this line
2       255        NULL  0     2
2       2556       NULL  1     2
2       255        NULL  2     2 
```

我正在使用 Mysql 版本 5.1.63。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:07:28.643

那应该这样做：

```
CREATE TEMPORARY TABLE tt(my_id int);
INSERT INTO tt SELECT my_id FROM yourTable WHERE status != 2);

UPDATE yourTable yt
SET yt.status = 0, yt.locked_by = 0
WHERE status != 2
OR 
(status = 2 AND EXISTS (SELECT 1 FROM tt WHERE yt.my_id = tt.my_id));

DROP TABLE tt; 
```

您必须在此处使用临时表，因为您不能将同一个表用于更新和子查询。**

# ios - 保留从 grap api 请求返回的值

> ID：13453723
> 
> 赞同：0
> 
> 时间：2012-11-19T12:21:09.740
> 
> 标签：ios, facebook, sdk

我使用以下代码向图形 api 发送请求并将其显示在标签中

```
 [FBRequestConnection startWithGraphPath:@"40123148903?fields=picture" completionHandler:^(FBRequestConnection *connection, id<FBGraphObject> result, NSError *error)
         {
             if(!error)
             {
                  self.tryLabal.text = [[[result objectForKey:@"picture"] objectForKey:@"data"]objectForKey:@"url"];

             }
         }
         ]; 
```

问题是它只允许我使用块内的图形对象。我想保留返回的结果。

我尝试声明一个 id 属性并为其分配结果 id

```
self.tryGraphObject = result; 
```

但这似乎不起作用。我究竟做错了什么？如何保存通话中的信息以备后用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:28:05.100

you can use method from facebook delegate such as

*   (void)request:(FBRequest *)request didReceiveResponse:(NSURLResponse *)response {}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:44:59.900

对不起。我的错。正确的方法是 - (void)request:(FBRequest *)request didLoad:(id)result

例子

请求
[facebook requestWithGraphPath:@"me/friends" andDelegate:self];

response
- (void)request:(FBRequest *)request didLoad:(id)result {
//ok 所以它是一个包含一个元素 (key="data") 的字典，它是一个字典数组，每个字典都有 "name" 和"id" 键
项 = [[(NSDictionary *)result objectForKey:@"data"]retain];
for (int i=0; i<[items count]; i++) {
NSDictionary *friend = [items objectAtIndex:i];
long long fbid = [[friend objectForKey:@"id"]longLongValue];
NSString *name = [朋友 objectForKey:@"name"];
NSLog(@"id: %lld - 名称: %@", fbid, name);
}
}

# xcode - 我应该如何处理使用旧用户名的 xcuserdata 目录？

> ID：13453727
> 
> 赞同：15
> 
> 时间：2012-11-19T12:21:22.653
> 
> 标签：xcode, xcode4, project

（我有一台运行 Xcode 4.5.2 的 Mountain Lion 的 Mac）

不久前我更改了我的用户名，Xcode 已经开始`xcuserdata`使用新用户名重新创建目录`$path_to_.xcodeproj/xcuserdata/blackl.xcuserdatad`。从那以后我就一直在使用它，我不记得在更改之后是否有任何东西重置了，所以里面的东西一定不是太重要……</p>

Xcode 存储了`xcuserdata`什么，我应该如何处理旧的？有一些老的项目自从变更后我就没有打开过；我可以重命名那些目录。较新的项目将有两个目录（`blackl.xcuserdatad`一个使用旧用户名）；在这些情况下我该怎么办？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-19T12:28:34.040

您可以安全地删除 xcuserdata 目录。它基本上包含个人设置，如断点、用户界面布局、打开文件、自动快照配置等。

大多数人在他们的版本控制软件中忽略了这些文件。我也这样做。

顺便说一句：.xcuserdata 目录中还有另一个 xcuserdata 目录`$path_to_.xcodeproj/project.xcworkspace`。

# perl - 如何使用 cpan 命令下载模块的源代码？

> ID：13453728
> 
> 赞同：2
> 
> 时间：2012-11-19T12:21:24.493
> 
> 标签：perl, cpan

是否可以使用`cpan`命令下载 Perl 模块的源代码？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:38:50.473

查看[cpan 手册页](http://perldoc.perl.org/cpan.html)，我们看到“cpan -g Modulename”就是这样做的

```
 -g module [ module ... ]
       Downloads to the current directory the latest distribution
       of the module. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:07:37.903

交互式`look`命令

```
cpan> look Modulename 
```

# java - 奇怪的“找不到符号”错误（从终端编译包）

> ID：13453735
> 
> 赞同：1
> 
> 时间：2012-11-19T12:22:04.487
> 
> 标签：java, compiler-construction, compiler-errors

**首先：** *我已经阅读了我可以在这里找到的**所有线程。**`cannot find symbol`他们都没有解决我面临的问题。我不是专业的 Java 开发人员，我只是在帮助一位同事学习这些课程，所以请放轻松。*

**先说一下基本情况：**

我有一个名为***src/pdfDownload***`pdfDownload`的包。在这个目录中，我有 2 个文件：和.*`PDFItem.java``PDFItemParser.java`*

 *两者都是公开课。您可以在下面找到所附类的代码。我正在使用`Eclipse IDE`显示没有警告或错误**。

当我编译它们时，我收到以下错误消息：

```
 PDFItemParser.java:19: cannot find symbol symbol  : class PDFItem
 location: class pdfDownload.PDFItemParser  public static
 ArrayList<PDFItem> parseFile(String filePath){
            ^ PDFItemParser.java:11: cannot find symbol symbol  : class PDFItem location: class pdfDownload.PDFItemParser
    ArrayList<PDFItem> items = parseFile("data.csv");    
              ^ PDFItemParser.java:20: cannot find symbol symbol  : class PDFItem location: class pdfDownload.PDFItemParser         ArrayList<PDFItem>
 items = new ArrayList<PDFItem>();      /* Creates an ArrayList from type
 PDFItem which will contain all parsed ItemObjects */
                  ^ PDFItemParser.java:20: cannot find symbol symbol  : class PDFItem location: class pdfDownload.PDFItemParser
        ArrayList<PDFItem> items = new ArrayList<PDFItem>();        /* Creates an
 ArrayList from type PDFItem which will contain all parsed ItemObjects
 */
                  ^ PDFItemParser.java:21: cannot find symbol symbol  : class PDFItem location: class
pdfDownload.PDFItemParser       items.add(new PDFItem());
                      ^ 5 errors 
```

这些**类都是公共**的，**在正确的目录和包**中。我**还在 Eclipse**中获得`PDFItem`了类内部的自动完成功能`PDFItemParser`。我和我的同事一直在努力解决这个问题 2 个小时。很抱歉，如果这对你们来说真的很容易，但我们无法解决它，因为此错误的常见情况不适用。提前致谢！

**编辑：**我在（Mac）终端中编译它们。我在终端中打开路径，然后输入：

```
 javac PDFItem.java 
```

接着

```
 javac PDFItemParser.java 
```

PDFItem - 类代码：

```
 package pdfDownload;

    public class PDFItem {

        String imageURL;
        String pdfURL;
        boolean imageLoaded;
        boolean pdfLoaded;
        String name;

        public PDFItem() {

        }

        public PDFItem(String name) {
            this.name = name;
        }

    }

PDFItemParser - Class Code:
---------------------------

    package pdfDownload;

    import java.util.ArrayList;
    import java.io.*;

    public class PDFItemParser {

        public static void main(){

        ArrayList<PDFItem> items = parseFile("data.csv");    

        if(items != null){
            System.out.println(items.get(0).name);
        }
    }

        public static ArrayList<PDFItem> parseFile(String filePath){
            ArrayList<PDFItem> items = new ArrayList<PDFItem>();            /* Creates an ArrayList from type PDFItem which will contain all parsed ItemObjects */
            items.add(new PDFItem());

            try{
                FileInputStream fstream = new FileInputStream(filePath);
                DataInputStream in = new DataInputStream(fstream);              /* Get the object of DataInputStream */

                BufferedReader br = new BufferedReader(new InputStreamReader(in));
                String strLine;
                while ((strLine = br.readLine()) != null)   {           /* Read File Line By Line  */

                  System.out.println (strLine);             /* Print the content on the console */

                }
                in.close();             /* Close the input stream */

            }
            catch (Exception e){            /* Catch exception if any */
                System.err.println("Error: " + e.getMessage());
            }

            return items;               /* Returns ArrayList */
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:29:33.677

您应该使用此命令编译您的类，以确保您的类进入为您创建的文件夹`package`：-

```
javac -d . PDFItem.java
javac -d . PDFItemParser.java 
```

当您在没有`-d`标志的情况下编译它时，您的类不在`package`实际搜索它们的文件夹中。因此，您`PDFItemParser`无法找到您的`PDFItem`班级。

另外，请确保您已将路径添加到您`package folder`的类路径中。仅将路径添加到具有包名的文件夹，而不是类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:30:27.510

嘿，你没有适当的`main`功能。就这样：

我改变了这条线

```
public static void main(){ 
```

至

```
public static void main(String args[]){ 
```

在`PDFItemParser`课堂上

现在我可以运行程序（但它当然会给出运行时错误）

```
Error: data.csv (The system cannot find the file specified)null 
```

**编辑**

预计会出现此错误，因为我没有 data.csv 文件。

我能够在 eclipse 中毫无问题地编译和运行这个程序*

# c# - ToolStripDropDown 列表的水平分隔符

> ID：13453740
> 
> 赞同：1
> 
> 时间：2012-11-19T12:22:27.513
> 
> 标签：c#, separator, toolstrip, toolstripdropdown

我正在`ToolStripDropDownButton`用三个`ToolStripButton`s 创建一个。我想在第二个按钮之后添加一个分隔符。

这是我的代码。

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        internal ToolStripDropDownButton dropDownButton1;
        internal ToolStripDropDown dropDown;
        internal ToolStripButton buttonRed;
        internal ToolStripButton buttonBlue;
        internal ToolStripButton buttonYellow;

        public Form1()
        {
            InitializeComponent();

            dropDownButton1 = new ToolStripDropDownButton();
            dropDown = new ToolStripDropDown();
            dropDownButton1.Text = "A";

            dropDownButton1.DropDown = dropDown;
            dropDownButton1.DropDownDirection = ToolStripDropDownDirection.Right;
            dropDownButton1.ShowDropDownArrow = false;

            buttonRed = new ToolStripButton();
            buttonRed.ForeColor = Color.Red;
            buttonRed.Text = "A";

            buttonBlue = new ToolStripButton();
            buttonBlue.ForeColor = Color.Blue;
            buttonBlue.Text = "A";

            buttonYellow = new ToolStripButton();
            buttonYellow.ForeColor = Color.Yellow;
            buttonYellow.Text = "A";

            ToolStripSeparator s = new ToolStripSeparator();

            dropDown.Items.AddRange(new ToolStripItem[] { buttonRed, buttonBlue, s, buttonYellow });
            toolStrip1.Items.Add(dropDownButton1);
        }
    }
} 
```

问题是分隔符垂直显示。

![在此处输入图像描述](../Images/0223e49c1de93307443fe9b82f036b1d.png)

如何让它水平显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:29:27.523

您需要设置`ToolStripDropDown`'`LayoutStyle`属性。默认情况下它是`ToolStripLayoutStyle.Flow`，但必须设置为`ToolStripLayoutStyle.VerticalStackWithOverflow`。

或者，您也可以跳过创建和配置`ToolStripDropDown`实例，并将`ToolStripItem`s 直接添加到您的`ToolStripDropDownButton`using 它的`DropDownItems`属性中：

```
dropDownButton1.DropDownItems.AddRange(
    new ToolStripItem[] { buttonRed, buttonBlue, s, buttonYellow }); 
```

# php - 带有 MVC 的 PHP 前端控制器

> ID：13453746
> 
> 赞同：2
> 
> 时间：2012-11-19T12:22:43.650
> 
> 标签：php, model-view-controller, front-controller

我正在尝试使用前端控制器设计深入研究 MVC。

我想通过使用一行来调用我的整个应用程序，例如在 index.php 中：

```
require_once(myclass.php);
$output = new myClass(); 
```

我很想摆脱 require_once 行，但我不明白如何在不包含它的情况下加载我的课程？

无论如何，我的主要问题是如何使用一个前端类加载我的各种控制器、模型和视图等。到目前为止，我想出了：

```
class myClass
{
    private $name;
    public $root = $_SERVER['DOCUMENT_ROOT'];
    private $route = array("Controller" => "", "Model" => "", "View" => "", "Paremeters" => "");
    function __construct() 
    {   $uri = explode("/",$_SERVER['REQUEST_URI']);
        if(isset($uri[2])) {$this->route['Controller'] = $uri[2];}
        if(isset($uri[3])) {$this->route['Model'] = $uri[3];}
        if(isset($uri[4])) {$this->route['View'] = $uri[4];}
        if(isset($this->route['Controller'])) 
        {
            include($this->root."/".$this->route['Controller'].".php");
        }
    }

} 
```

但这似乎有点令人费解并且过于夸张。另外，一旦我在 __construct 中包含了新类，我应该如何加载它？

我很抱歉缺乏知识，我已经用谷歌搜索了很多次，并且我不断提出相同的页面，这些页面似乎并没有扩展我对此事的了解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:30:54.463

如果您的 URL 肯定是**[http://domain.com/[controller]/[action]/](http://domain.com/[controller]/[action]/) *parameters***，那么您的前端控制器可能如下所示：

```
<?php
class Application
{
    public function __construct()
    {
        $this->setupAutoloader();
        $this->route();
    }

    private function setupAutoloader()
    {
        // do your autoloading here
    }

    private function route()
    {
        $request = explode('/', trim($_SERVER['REQUEST_URI'], '/'));

        $controller = isset($request[0]) ? ucwords(array_shift($request)) . 'Controller' : 'HomeController';
        $action = isset($request[0]) ? array_shift($request) : 'index';
        $parameters = $request;

        $response = call_user_func_array(array($controller, $action), $parameters);
    }
} 
```

从这里，你可以添加你的自动加载器实现，对你的响应做任何你想做的事情，并从你的**index.php**调用它，如下所示：

```
<?php
require 'path/to/Application.php';

$application = new Application(); 
```

不幸的是，如果第一个文件存储在文件系统的其他位置，您总是必须包含第一个文件，但如上所述，您可以从这里自动加载其他类，例如库、控制器、模型等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T16:07:05.983

令我惊讶的是，在这两个冗长且内容丰富的先前答案中，没有人费心以最简单的方式实际回答您的问题。

你想要这个[`__autoload()`](http://ca3.php.net/manual/en/function.autoload.php)功能。您仍然必须在代码中的某处定义它，但可以简单地将其添加到全局头文件中，然后您不必为每个类定义显式编写包含。

```
/* auto load model classes */
function __autoload($class_name) {
        $filename = 'class.' . strtolower($class_name) . '.php';
        $file = __SITE_PATH . '/_model/' . $filename;
        if( file_exists($file) == false ) {
                return false;
        }
        require($file);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:22:00.750

为了在不手动包含的情况下加载类，您应该查看[spl_autoload_register](http://php.net/manual/en/function.spl-autoload-register.php)，它使您能够在应用程序需要时自动加载类。

至于另一个问题，这完全取决于您的设计。如果要加载通用的“控制器”和“动作”，则应创建一个可路由文件夹（即只有控制器可以停留的文件夹）并放置所有控制器类，然后创建一个可路由动作空间（可路由组控制器类中的方法，通常是通过定义动作方法以`action_`) 为前缀的约定。完成后，只需像这样创建控制器：

```
class Blog {
    public function action_posts() { ... };
} 
```

并管理它，以便 URL`/blog/posts/`调用它。（它只需要你已经证明擅长的相同的 URI 操作）。（请注意，自动加载器应该自己处理实际类文件的包含，而不需要您加载所有控制器类）。获得控制器名称和操作后，您只需要以下内容：

```
if (class_exists($controller)) {
    $app = new $controller;
    if (method_exists($app, $action)) {
        $app->$action(); // also take a look at call_user_func and call_user_func_array
    }
} 
```

您也可以允许参数，但这将非常困难，以允许这种结果：

```
class Blog {
    public function action_post($id) { ... };
} 
```

并被`/blog/post/14/`例如调用。

在处理 URI 时，请记住您可能有错误的输入并且您应该处理它们，但是如果您创建了正确的路由空间，那么您已经完成了一半。

最后，如果您想获得灵感或其他任何东西，只需看看 CodeIgniter（这是最容易学习的框架之一）或任何其他框架。

希望它有所帮助。

# php - _GET 将变量添加到现有字符串

> ID：13453748
> 
> 赞同：1
> 
> 时间：2012-11-19T12:22:44.710
> 
> 标签：php, html, url-rewriting, get

我卡住了，我有一个网站，它索引玩家的个人资料，现在保持着历史记录。仅当您手动写出 url 时，一切都已实现并正常工作。
跟随表单创建的链接不起作用，因为它`index.php?id=`然后我想添加`&date`到这个但`?date=`需要`&date=`从`index.php?id=`

普通用户输入的表单顶部 normalyresults 类似： **index.php?id=123456789**

返回用户配置文件没问题在该页面上，我有“加载历史数据”下拉列表，显示此配置文件的加载日期取决于 id 输入。

```
<form method='get' action='index.php?id=$data' > 
```

跟随页面上的提交按钮返回：

**index.php?id=123456789?date=112012**

但是，我可以让它工作的唯一方法是手动改变它**？**到 ID 和 DATE 之间的**&**对于我的生活，我无法弄清楚！

基本上我需要：
index.php?id=123456789 **？**date=112012
为
index.php?id=123456789 **&** date=112012

因此，当页面重新加载时，我可以同时看到 ID 和 DATE，我想我可以通过帖子完成，但是我需要它在 url 中可见，理想情况下
我也尝试过：

```
<form method='get' action='$_SERVER['PHP_SELF']'>

<form method='get' action='id_$data'> (with a mod rewrite) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:29:02.107

您可以使用 str_replace() 替换所有 ? 进入 ＆

```
 $replacedstring = str_replace ( '?' , '&' , '$stringtobereplaced' ) 
```

[str_replace()](http://php.net/manual/en/function.str-replace.php)

但是最好在代码中查找并查看'？被添加到字符串并在那里替换它。

最好的问候，卡斯帕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:31:12.460

**得到**

您不能使用 get 方法发送到已经包含 get 参数的 url，因为您会从不同的浏览器获得混合结果。您需要将它们添加到这样的隐藏字段中，然后在发送表单时将其添加到 URL：

```
<form method='get' action='index.php'>
<input type='hidden' name='id' value='<?php print $data; ?>' />
<input type='hidden' name='date' value='112012' />
<input type='submit' value='Submit' />
</form> 
```

**邮政**

如果您需要将表单方法设置为发布，同时在 url 中包含 get 参数，则需要这样做：

```
<form method='get' action='index.php?id=<?php print $id; ?>&date=112012'>
<input type='text' name='message' value='this is in POST, the other params are in GET' />
<input type='submit' value='Submit' />
</form> 
```

**安全**

不要这样做：

```
<form method='get' action='$_SERVER['PHP_SELF']'> 
```

[不可以的原因](http://coding-talk.com/f19/why-is-%24_server%5Bphp_self%5D-unsafe-for-use-13998/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:32:18.847

我以前遇到过这个问题......这是我的解决方案。使用 & 符号构建一串参数。

`$parameters = "&id=9&date=tomorrow&x=y";`

然后我只是用问号替换了第一个＆符号。

`$correct_string = "?" . ltrim($parameters, '&');`

# jquery-ui - Ember.js 路由和 jQuery UI Draggable mixin 相互混淆

> ID：13453752
> 
> 赞同：1
> 
> 时间：2012-11-19T12:23:03.940
> 
> 标签：jquery-ui, ember.js, jquery-ui-draggable

我已经为此努力了 2 天，现在我需要一些关于如何追查这个问题根源的建议。希望有人（您，也许正在阅读此书？）遇到过类似的问题，您可以提供一些帮助。

我的应用程序有一些可以通过具有该名称的 jQuery UI 小部件拖动的东西。这非常有效，直到我使用 Ember 的路由在应用程序内部导航。当刷新 UI 并重新生成可拖动项目中和周围的东西时，会发生一些事情。

## 那么，会发生什么？

在 UI 的路由重绘之后，当鼠标指针悬停在应该在其上拖动的图像元素上时，可拖动的 div 最明显不会更新它们的位置。运动也是生涩的，这看起来是由于位置没有更新，直到指针位于可拖动 div 之外。拖动也会卡住，释放鼠标按钮后 div 继续跟随鼠标。

### 更新

我一直在向 jQueryUI Mouse 添加断点，这是可拖动依赖的鼠标事件处理程序。当它检测到鼠标按下和鼠标向上事件时中断我看到拖动时没有注册向上事件。事实上，单击路由后重新渲染的 div 中的任何位置都不会注册 down 或 up 事件。

我只是不知道我能做些什么来搞乱鼠标听众。

### 更新 2

我一直在鼠标事件兔子洞中走下去，并想出了以下内容。[在 Ember.js 上](https://github.com/emberjs/ember.js/issues/1042)存在一个与事件相关的已关闭问题，该问题没有冒泡到文档以供 jQuery UI 鼠标捕捉它。所以我在提到的位置放了一些日志行，看看发生了什么。我只登录 mouseDown 事件以避免充斥控制台。

我看到的是，在 Ember 内路由导航之前，整个 Ember 层次结构返回事件的未定义管理器。但是，在路由之后，其中一个视图返回 null ，这会立即停止冒泡。甚至 Ember 应用程序根目录的 ApplicationView 也没有发言权，更不用说文档节点上的 jQuery UI。

不过，原因是返回 null 很奇怪。这是因为它正在检查的视图不在 Ember 内部保留的视图列表中。它显然存在于 DOM 中，但不知何故在某些时候未注册或未注册。

狩猎仍在继续……

## 我做了什么？

### 我使 jQuery 可拖动混合而不是“手动”调用它

我遵循[了这个 SO question](https://stackoverflow.com/questions/11146470/ember-js-draggable-and-droppable-jqueryui-native-drag-and-drop-mixin "这个问题")和[github 上的相关代码，](https://github.com/lukemelia/jquery-ui-ember)以使 jQuery UI 以更集成的方式创建和销毁观察者。工作原理与此重构之前完全相同。

### 我卸载并禁用了应用程序使用的所有其他 javascript 库

我在那里有一些画布绘图的东西，我删除了这些东西进行测试。

### 我尽可能多地删除了 UI 层次结构

我将 ember 应用程序直接放在主体下方，还使应用程序视图“无标签”以更改和减少错误可拖动内容发生的深度。我什至短路了一个直接连接到应用程序视图出口而不是子视图出口的整个视图级别。

### 我使部分导航可拖动

我做了一些导航项目，在路由时不刷新，可拖动......它们在路由后继续拖动。

### 我在另一个 Ember 应用程序中制作了可拖动的东西

在同一个 Rails 项目（相同的 css 和基本 html、javascript）中的另一个 Ember 应用程序中不会出现此问题。我在该应用程序中制作了一些随机按钮和东西，可以像疯了一样拖动和“路由”，它们总是可以继续按应有的方式拖动。某些特定于结构或 UI 层次结构的东西似乎是导致它的原因。

### 当然，我还记录了许多回调并切换了浏览器

为了确保在删除适当的 UI 元素时正确地拆除事情，我已经记录了跟踪每个日志行的大量事情，以确保它看起来像正确的事情发生。最新的 Safari、Chrome 和 Firefox 也是如此。

## 为什么要责怪 Ember 和 Draggable？

我有这个原型形式的应用程序作为一个 TangledMessOfJavascript™ 应用程序。它做了所有同样的事情。将 DOM 的一部分替换为导航，使用 Draggable 和相同的基本 UI 层次结构（除了一些 Ember 鼓励的东西）。

## JS小提琴怎么样？

即使我在寻求建议，我也真的不想尝试从这个非平凡的应用程序层次结构中生成小提琴。我不是想偷懒。我要花一整天的时间来解决这个问题，部分原因是它是一个工作应用程序，其中包含一些我认为我无法分享的东西，但主要是因为它不是一个微不足道的走投无路的问题我可以做一个简单的测试用例。

## 我想要什么？

我不是在寻找一个神奇的人来解决这个问题......我很想得到一些关于我如何追踪这个问题的建议。我倾向于一些胭脂事件侦听器或其他一些奇怪的东西。我还没有找到调试这种东西的好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:46:23.473

在 Ember.js 上的[这个已关闭问题的](https://github.com/emberjs/ember.js/issues/1042)指导下，我设法发现问题是在插座中使用具有静态 elementId 的视图。在路由之间转换时，Ember 在从 Ember 的全局视图哈希中取消注册旧的视图实例之前注册下一个视图实例。由于两个视图具有相同的 ID，用作散列中的键，这将导致该散列中缺少视图。这反过来将导致任何冒泡的事件静默停止。在我的例子中，这个视图内的任何鼠标点击都会被 EventManager 吞没，而不是在层次结构中冒泡。

我在 github 上创建了一个问题，以确定这是一个但还是一个已知的限制。 [https://github.com/emberjs/ember.js/issues/1553](https://github.com/emberjs/ember.js/issues/1553)

# jquery - 使用 jquery 验证带有复选框的中继器（检查至少一个复选框）

> ID：13453753
> 
> 赞同：0
> 
> 时间：2012-11-19T12:23:06.190
> 
> 标签：jquery, asp.net, repeater

在 asp.net 中，我使用具有复选框作为子节点的中继器，由数据库动态填充。我需要使用 jquery 检查至少一个复选框并显示消息。如何请任何人帮助我。

我的中继器代码

```
 <asp:Repeater ID="id_repSearch" runat="server">
     <HeaderTemplate>
        <table style="border: 1px solid #465c71;" cellpadding="5" width="100%">
           <tr style="background-color: #465c71; color: White" align="center">
               <td width="20%" align="center">Firstname</td>
               <td width="20%" align="center">Lastname</td>
               <td width="40%" align="center">Emailid</td>
               <td width="35%" align="center">Mobileno</td>
           </tr>
         </table>
      </HeaderTemplate>
      <ItemTemplate>
         <table width="100%">
           <tr style="background-color: FFECD8">
               <td><asp:CheckBox ID="id_chkSearch" runat="server" /></td>
               <td width="20%" align="left">
                  <%# DataBinder.Eval(Container.DataItem, "c_first_name") %></td>
               <td width="20%" align="left">
                  <%# DataBinder.Eval(Container.DataItem, "c_last_name") %></td>
               <td width="40%" align="left">
                  <%# DataBinder.Eval(Container.DataItem, "c_email_id") %></td>
               <td width="20%" align="left">
                  <%# DataBinder.Eval(Container.DataItem, "c_mobile_phone") %></td>
           </tr>
           <asp:HiddenField ID="hiddenuserid" runat="server" Value='<%#Eval("n_user_id") %>' />
           <asp:HiddenField ID="hiddenemail" runat="server" Value='<%#Eval("c_email_id") %>' />
           <asp:HiddenField ID="hiddenname" runat="server" Value='<%#Eval("c_first_name") %>' />
       </ItemTemplate>
       <SeparatorTemplate>
            <tr>
               <td>
                   <hr />
               </td>
            </tr>
        </SeparatorTemplate>
  </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:27:20.643

最简单的方法是在`CssClass`所有这些复选框中放置一个具有某些唯一值的属性，然后使用 jQuery 选择器检查是否选择了任何复选框

```
.....
<ItemTemplate>
    <tr style="background-color: FFECD8">
    <td>
        <asp:CheckBox ID="id_chkSearch" runat="server" CssClass="i_am_unique_class_name"/>
    </td>
 ..... 
```

和 jQuery：

```
$('.i_am_unique_class_name:checked').length //gives you the number of selected checkboxes with attached class 
```

[`CssClass`](http://msdn.microsoft.com/en-en/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)有关详细信息，请参见[`.length`](http://api.jquery.com/length/)和[`:checked`](http://api.jquery.com/checked-selector/)手册页。

# java - 从列中搜索以获取各种数据的计数

> ID：13453755
> 
> 赞同：0
> 
> 时间：2012-11-19T12:23:11.417
> 
> 标签：java, mysql, jdbc

这是我的桌子`emp`：

```
+---------+------------------+
| emp     |  id      | color |
+---------+------------------+
| hary    | 123      |  red  |
+---------+------------------+
| lary    | 125      | green |
+---------+------------------+
| gary    | 038      |  red  |
+---------+------------------+
| Kris    | 912      | blue  |
+---------+------------------+
| hary    | 123      |  red  |
+---------+------------------+
| Ronn    | 334      | green |
+---------+------------------+ 
```

现在我想找出每种颜色的计数，即红色、绿色和蓝色；

在这种情况下，我试图写下查询`where color like '%bl%',like '%ree%',like %ed%.`并希望得到这个结果

```
+--------------------------+
| red | blue | green       |
+--------------------------+
|   3 |   1  |  2          | 
+--------------------------+ 
```

我试过这个东西：

```
 select count(case when color='green' then 1 end) as Green,count(case when 
color='blue' then 1 end) as Blue,count(case when color='Red' then 1 end) as Red from emp; 
```

我不想硬编码他们的名字（因为我将在我的代码 jdbc 中使用它）。我将不胜感激有关此问题的任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:25:11.007

```
select color,count(*) clrCount
from emp 
group by color 
```

带有 where 子句

```
select color,count(*) clrCount
from emp where (color like '%bl%' or color like '%ree%')
group by color 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:38:43.727

您可以使用

```
select color,count(*) from emp group by color; 
```

# iphone - iPhone，存储 1000 个预制词

> ID：13453762
> 
> 赞同：0
> 
> 时间：2012-11-19T12:23:45.207
> 
> 标签：iphone, objective-c, core-data, plist

在我的 iPhone 应用程序中，我目前在一个 plist 中存储了大约 1000 个英文单词并从那里获取它们（以及第二个要匹配的 1000 个单词的列表）。

这工作得很好，但它变得有点笨拙。我对CoreData有一点经验，我可以看到它对我有什么帮助，因为我可以给每个单词对象，两个单词（匹配的单词），然后有一个与单词相关的组对象，这样我就可以分组管理它们我觉得有点道理。

但是，有这么多数据，获取会很慢吗？有没有更好的办法？预先填写核心数据是否也是一个好主意（所以当用户使用应用程序时，这些词就存在了，他们不必添加任何东西）？

我只需要找到一个更好的解决方案。

为了清楚起见，这就是我需要实现的目标：

*   有一个大约的清单。1000 字（2000，如果你包括对）
*   每个词都需要有一个配对词（所以它们成对出现）
*   我需要将这些硬编码到应用程序中，以便它们从一开始就为用户存在。
*   当然，我需要任何人都渴望的最容易管理的解决方案（当然是在合理的范围内）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:47:32.403

我真的不明白为什么使用 Core Data 会比 plist 容易得多——无论哪种方式，您都必须以某种方式填充列表。在我看来，您最好对 plist 进行硬编码并将其作为 NSDictionary 加载。

或者，如果您想要更容易编辑的内容，您总是可以使用 Excel 创建一个逗号分隔值文件 (csv) 并以这种方式创建它。然后，您可以将 csv 文件包含在您的包中，并创建一个简单的方法来在应用程序启动时加载文件，将其转换为所有键值的 NSArray：

```
NSArray *keysAndValues = [myString componentsSeparatedByString:@","];
NSMutableArray *words = [NSMutableArray arrayWithCapacity:(keysAndValues.count / 2)];
for (int i = 0; i < keysAndValues.count; i += 2) {
    [words addObject:[NSDictionary dictionaryWithObject:[keysAndValues objectAtIndex:i+1] forKey:[keysAndValues objectAtIndex:i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:34:25.020

Core Data 中 1000 对单词的性能应该不是问题。OTOH，简单的文件或 SQLite 数据库也不会。

我建议根据您最容易维护的内容以及在某种程度上应用程序将如何使用它们来做出决定。（即，如果您不将这些对用作对象，那么表查找可能比 Core Data 更适合。）

# c# - 在 Windows 8 中保持推送通知通道

> ID：13453763
> 
> 赞同：1
> 
> 时间：2012-11-19T12:23:46.653
> 
> 标签：c#, windows-8, windows-runtime, push-notification

是否可以将 PushNotificationChannel 持久存储在 Windows 8 中？

我在后台任务中使用通道，并在应用程序处于活动状态时使用 Received 事件。由于 PushNotificationChannel 类是密封的并且没有公共构造函数，它不能存储在 ApplicationSettings 中或通过 JSON/XML 序列化到文件中。

当频道每 30 天到期时，我真的不想每次应用程序启动时都请求一个新频道。

该服务使用原始通知而不是平铺/吐司，并且需要由应用程序处理（无论它是否打开）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:43:19.273

实际上，您应该在每次应用程序启动时请求一个新频道。来自[推送通知的指南和清单](http://msdn.microsoft.com/en-us/library/windows/apps/hh761462.aspx)

```
... Therefore, your app should request a channel each time the app launches. ... 
```

我听说过，但尚未确认，如果硬件也有修改，URI 可能会改变（我知道 ASHWID 会改变），所以此时 30 天可能是“最大值”。

当没有更改时，您不一定要更新管理注册的云服务，但将 URI 保存在 ApplicationSettings 中就足以管理它。

# vb.net - 区分大小写的用户名和密码

> ID：13453764
> 
> 赞同：1
> 
> 时间：2012-11-19T12:23:46.443
> 
> 标签：vb.net, winforms, passwords

我使用这段代码：

```
Dim con As OleDbConnection = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source= UserPass.mdb;")
con.Open()
Dim str As String
str = "SELECT * FROM UserPass WHERE Username='" & txtUsername.Text & "' AND Password='" & txtPassword.Text & "'"
Dim cmd As OleDbCommand = New OleDbCommand(str, con)
cmd.Parameters.AddWithValue("user", txtUsername.Text)
cmd.Parameters.AddWithValue("pass", txtPassword.Text)
Dim sdr As OleDbDataReader = cmd.ExecuteReader()
' It will be case sensitive if you compare usernames here.   
If sdr.HasRows Then
    If sdr.Read Then
        If txtPassword.Text <> sdr("Password").ToString And txtUsername.Text <> sdr("Username").ToString Then
            MessageBox.Show(" Incorrect Username/Password. Login Denied ", " Error! ", MessageBoxButtons.OK, MessageBoxIcon.Error)
        Else
            MessageBox.Show(" You are now Logged In! ", " Welcome! ", MessageBoxButtons.OK, MessageBoxIcon.Asterisk)
            frmOne.Show()
            Me.Hide()
        End If
    End If
End If
sdr.Close()
con.Close() 
```

这是它应该检查字母大小写的行，但它似乎不起作用：

```
If txtPassword.Text <> sdr("Password").ToString And txtUsername.Text <> sdr("Username").ToString Then 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:38:32.623

除非我误解了 if 语句中的 And ，否则您使用的逻辑只会在用户名和密码都不匹配时拒绝登录。如果密码不匹配，但用户匹配，它将掉到 else 块并让用户登录。

尝试将其更改为：

```
If txtPassword.Text <> sdr("Password").ToString Or txtUsername.Text <> sdr("Username").ToString Then 
```

# c++ - libstdc++ 没有实现 std::stoi 吗？

> ID：13453765
> 
> 赞同：15
> 
> 时间：2012-11-19T12:23:47.077
> 
> 标签：c++, gcc, c++11, std

我想用`std::stoi`. 尽管我可以使用`::atoi(str.c_str())`它，但如果可行的话，它会使代码更清晰。但 Eclipse 告诉我：

> 函数“stoi”无法解析

我检查过

*   包含标题`<string>`，
*   包含路径设置正确，我可以使用`std::string`，
*   编译器标志`-std=c++0x -std=c++11`也被设置。

`stoi()`gcc 中丢失了，还是我的错？

我正在使用 gcc (Debian 4.7.2-4) 4.7.2。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-19T12:29:13.400

您使用的是 GCC 4.7.2，因此`std::stoi`受支持。您可以忽略 Eclipse 警告。它应该编译并运行良好。问题在于 Eclipse 编辑器，而不是 GCC。

（你只需要`-std=c++11`or `-std=gnu++11`[to also get the GCC extensions] 标志，顺便说一句。`-std=c++0x`只是一个已弃用的同义词。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T12:46:03.763

您可以摆脱日食中的红色曲线，（从[这里](http://www.eclipse.org/forums/index.php/mv/msg/373462/909018/#msg_909018)）：

Project Properties->C/C++ General->Preprocessor Include Paths, Macros->[Providers] tab->your Built-in Compiler Settings provider（依赖于工具链）。单击“工作区设置”链接，进入“设置”属性页面，再次选择 [发现] 选项卡和您的提供商。有“获取编译器规格的命令”，在其中添加“-std=c++11”。

点击应用并关闭所有内容，然后索引->重建，你应该一切准备就绪。

或者，如果您的 eclipse 版本较旧，您可能只需要这样做：

Project->Properties->C/C++ Build->Discovery Options->GCC C++ Compiler

并将“-std=c++11”标志添加到那里的调用参数中。不过，这已“弃用”，因此您可能需要考虑更新 Eclipse，因为您也在更新编译器。

# django - 从每个关系中选择偶数个项目

> ID：13453767
> 
> 赞同：0
> 
> 时间：2012-11-19T12:24:01.820
> 
> 标签：django, postgresql, tastypie

我正在为我们的 API 使用 Tastypie，并且一个端点需要显示特定类别中的地点列表。那部分很简单：

```
class PlaceResource(ModelResource):
    class Meta:
        queryset = Place.objects.all()
        filtering = { 
            'category': ALL
        } 
```

但是假设我有一个`limit = 100`，我想从每个类别中获得偶数个位置。

**例子：**

*/api/places/?category=1&category=2&category=3&category=4*

应该给我 1、2、3 和 4 类别中的 25 个名额。

我知道我可以使用 SQL 来做到这一点，但是如何以最佳方式完成呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:35:45.057

说，我们有一张桌子：

```
CREATE TABLE place (
   place_id serial primary key
 , place    text
 , cat_id   int); 
```

[在 sqlfiddle 上测试设置](http://sqlfiddle.com/#!12/87c84/2)。
您将从`category`设置中演示的索引中获利。

基本上，我看到了两种不同的方式：

### [`row_number()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)

```
WITH x AS (
    SELECT *, row_number() OVER (PARTITION BY category) AS rn
    FROM   place
    WHERE  category IN (1,2,3,4)
    )
SELECT place_id, place, category
FROM   x
ORDER  BY rn
LIMIT  100; 
```

*   除了相当优雅之外，这个查询随着更多类别而变长的唯一部分是`IN`子句。
*   无需计算每个的份额`category`，这是自动发生的。
*   如果某个类别的行数少于其份额，则其余部分将由其他类别相同的份额填充。

### [`UNION ALL`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-UNION)

```
(SELECT * FROM place WHERE category = 1 LIMIT 25)
UNION ALL
(SELECT * FROM place WHERE category = 2 LIMIT 25)
UNION ALL
(SELECT * FROM place WHERE category = 3 LIMIT 25)
UNION ALL
(SELECT * FROM place WHERE category = 4 LIMIT 25); 
```

*   这是原始且*非常快*的，但对于许多类别来说会变长（尽管不慢）。
*   使用`UNION ALL`，不使用`UNION`。
*   查询的每条腿周围的括号`UNION`都需要 apply `LIMIT`。
*   您需要计算每个类别的份额，并决定如何拆分部分份额。
*   如果某个类别的行数少于其份额，则从查询中获得的行数会更少。

# html - How to soften an html border color (not to be so opaque)

> ID：13453771
> 
> 赞同：0
> 
> 时间：2012-11-19T12:24:09.713
> 
> 标签：html, css, styles, client-side

I want to put a boder colored onto a textbox, but the color i get is too intense and opaque:

I get this border:

![enter image description here](../Images/3b17335ac02c55dfdab95d970f926ffe.png)

I want something like this:

![enter image description here](../Images/6ea46be5049b285e02239ee2241564f3.png)

My simple ccs is:

```
.highlitedborder
{
   border: 2px solid orange;
} 
```

Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T12:25:44.407

```
border: 1px solid rgba(255, 0, 0, .5); 
```

The last alpha value (0.5) can be seen as opacity.

By the way, what u see in the image is not border. It is closer to box-shadow (that effect is created by browser in some case)

```
box-shadow: 0 0 4px orange; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:29:00.763

This part is not the border. It is the outline. You may change it to change it it like

```
 .highlitedborder
{
   outline-color: your color...or your style;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:31:33.873

```
border: 1px solid #e68200 
```

This can help you

# php - 检查 $_POST['id'] 是否为数字，否则执行此操作

> ID：13453778
> 
> 赞同：0
> 
> 时间：2012-11-19T12:24:35.657
> 
> 标签：php, post, isnumeric

您好，我的代码似乎失败了：

```
if (!empty($_POST['id'])) { 
    echo "empty";
} else {
    if (is_numeric($_POST['id'])) {
    echo "numeric!";
    } else {
    echo "not empty but not numeric how come?";
    }
} 
```

我的浏览器网址：hxxp://localhost/upload/?id=9

输出：不是数字

怎么来的？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:26:03.493

应该使用 `if(is_numeric($_GET['id'])) {`

* * *

```
if (is_numeric($_GET['id'])) { 
    echo "yes numeric";
} else {
    echo "not numeric";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:53:50.810

第一的：

```
if (!empty($_POST['id'])) { 
    echo "empty";
} else ... 
```

您是说：如果变量不为空，则回显“空”，然后您正在检查空变量是否为数字（else 中的代码正在检查空变量，这就是为什么它说它不是数字的原因）

取出感叹号，并澄清自己使用 post 或 get 方法，因为当您通过 GET 传递 POST 变量时尝试获取它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-02T05:28:36.610

看到这个问题：[$_POST 数字和字符检查器](https://stackoverflow.com/questions/40372642/post-number-and-character-checker)

```
// test.php

// testing with $_POST['id'] from forum with id = 5 and another test where id = new

$id = $_POST['editid'] ;
echo "<br>---".$id."---<br>";

if (empty($id)) { 
echo "<br>1: empty";
} else {
if (!is_numeric($id)) {
echo "<br>2: This is the number 5";
} else {
echo "<br>3: the must be the word new";
}
}

 // test 2 ... ctype_digit

if (empty($id)) { 
echo "<br>4: empty";
} else {
if (!ctype_digit($id)) {
echo "<br>5: This is the number 5";
} else {
echo "<br>6: the must be the word new";
}
}

// test 3 ... 

if (empty($id)) { 
echo "<br>7: empty";
} else {
if (!preg_match('#[^0-9]#',$id)) {
echo "<br>8: This is the number 5";
} else {
echo "<br>9: the must be the word new";
}
}

/**

result from 5

---5---

3: the must be the word new
6: the must be the word new
8: This is the number 5

results from "new"

**/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:28:45.780

我认为您正在通过 URL 传递参数，因此请使用

```
if (is_numeric($_GET['id'])) 
```

或使用

```
if (is_numeric($_REQUEST['id'])) { 
```

否则它将显示一个未定义的变量，因此将回退到每个块

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T12:38:29.800

很简单，“id”在 $_GET 数组中，但您检查 $_POST 数组中的存在

```
if (empty($_GET['id'])) { ... } 
```

应该是正确的。然后你可以使用 $_GET['id'] 或 $_REQUEST['id']。

**注意**：$_REQUEST 包含 $_POST 和 $_GET 中的所有变量

正确的代码应该是：

```
 if (empty($_GET['id'])) { 
     echo "empty";
 } else {
     if (is_numeric($_GET['id'])) {
         echo "numeric!";
     } else {
         echo "not empty but not numeric how come?";
     }
 } 
```

除了 $_GET 你也可以使用 $_REQUEST

# c# - 将参数传递给 web 方法

> ID：13453779
> 
> 赞同：0
> 
> 时间：2012-11-19T12:24:37.060
> 
> 标签：c#, objective-c, xmlhttprequest, webmethod

在 Web 服务器上是以下方法：

```
[WebMethod()]
public static string login(string userName, string password)
{
    if (usernName == "test" && password == "test")
    {
         return "validated";
    }
    return "error";
} 
```

我正在尝试使用以下目标 C 代码连接到它：

```
NSString *post = [NSString stringWithFormat:@"userName="test"&password="test"];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

NSString *serverURLString = @"http://myURL.aspx/login";
NSURL *serverURL = [NSURL URLWithString:serverURLString];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:serverURL];
[request setHTTPMethod:@"POST"];

[request addValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData];

NSHTTPURLResponse *urlResponse = nil;
NSError *error = nil;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&error];

NSLog(@"response data = %@", responseData); 
```

我迷失在无知的新手领域，并认为最后一行会在我的 Objective C 控制台中打印出“已验证”或“错误”，但它会返回一个整数（我敢肯定，对于那些以前做过的人来说，这是显而易见的=））。

谁能告诉我如何在我的 Objective C 日志中看到 webMethod 返回值？

- 编辑 - 我刚刚注意到我得到一个 200 的 HTTP 响应状态代码，无论我是否使用正确的用户名/密码组合，我猜这也可能意味着问题出在其他地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:35:58.373

您可以`NSString`使用`NSData`响应中返回的内容创建一个。例如：

```
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]; 
```

# jquery - 替换字符并保留jquery中的数字和点

> ID：13453784
> 
> 赞同：0
> 
> 时间：2012-11-19T12:25:04.293
> 
> 标签：jquery, regex

我有这种数字格式（2,100.00 单位），如何删除字符并保留数字和点（。）？我试试这个，但不好 `percentValueElement.replace(/,\(\)/g, '').replace(/[^[a-z]\.]+/g, "")`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T12:34:26.547

试试这个：

```
percentValueElement.replace(/[^0-9.]/ig, ''); 
```

或者正如大卫建议的那样：

```
percentValueElement.replace(/[^\d.]/ig, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:38:33.627

你想保留你的千位分隔符吗？

然后你应该写类似

```
var numberformat = /[(0-9)+(.|,)?]+/igm;
var number = numberformat.exec("2,100.00 units"); 
```

或更短

```
 var numberformat = /[\d+(.|,)?]+/igm; 
```

# .net - 在 IIS7 中配置网站，网络访问问题

> ID：13453787
> 
> 赞同：0
> 
> 时间：2012-11-19T12:25:17.310
> 
> 标签：.net, iis-7

我已经在我的服务器机器上配置了一个网站，它一直在工作，直到我在服务器本身上访问它，但是网络中的机器无法访问它。

请帮助我如何使其对网络中的所有人可用。

我检查了它的应用程序池。该应用程序是 .net 2.0 版

我已经尝试过使用 IP、机器名称甚至更改了端口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:29:41.763

如果你的网站你可以看到里面的服务器是真的；

然后： 检查防火墙设置是否允许 IIS Web 服务器？您是否检查了 IIS 允许匿名访问？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:32:50.707

当您导航到该站点时，您会在浏览器中看到什么样的消息？

您必须打开您在 Windows 防火墙上使用的任何端口（如果它不是默认端口 80）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:27:49.487

如果它不是 IIS 中的默认站点，则必须使其响应某些特定端口或域。

完成后，您可以通过以下方式访问：

1.  <IP>:<选定端口>
2.  <服务器名称>:<选定端口>

如果你指定了一个端口。

如果您在另一台 PC 中指定了域，则必须在主机文件中添加一行，其中包含服务器的 IP 和您输入的域。这是临时解决方案，直到域属于您并且 DNS 指向您的服务器。

# module - 根据服务器配置指令初始化 nginx 模块的共享内存

> ID：13453788
> 
> 赞同：1
> 
> 时间：2012-11-19T12:25:30.083
> 
> 标签：module, nginx

我正在编写一个小型 nginx 模块，它从数据文件中读取一些 url 对，然后将其内容存储在 nginx 共享内存中的 rb-tree 上。在处理程序的代码中，树内容与请求 uri 匹配，并根据某些条件执行重定向。
目前这很好用。该模块在配置后阶段的函数 ngx_http_mymodule_init 中启动，它添加共享内存并分配稍后将由 nginx 调用的 init 函数。

```
ngx_http_mymodule_init(ngx_conf_t *cf) {
    [...]
  ngx_http_mymodule_shm_zone = ngx_shared_memory_add(...);
    [...]
  ngx_http_mymodule_shm_zone->init = ngx_http_mymodule_init_shm_zone;           
  return NGX_OK; 
} 
```

而那个 init_shm_zone 函数是创建树、读取数据文件和初始化树内容的函数。
但是每个虚拟服务器应该有一个数据文件，所以我需要从 nginx 配置指令中读取输入数据文件的路径，如下所示：

```
static ngx_command_t ngx_http_mymodule_commands[] = {
  [...]
  { ngx_string("mymodule_input_filepath"),
    NGX_HTTP_SRV_CONF|NGX_CONF_TAKE1,
    ngx_conf_set_str_slot, // should be ngx_conf_set_path_slot i guess...
    NGX_HTTP_SRV_CONF_OFFSET,
    offsetof(ngx_http_mymodule_srv_conf_t, input_filepath),
    NULL },
  ngx_null_command
}; 
```

...然后使用该文件路径打开文件并将其内容存储在共享内存中。但是，在 ngx_http_mymodule_init 函数中，我无法访问配置对象，因此无法读取文件名。
所以，我的问题是，我应该在哪个处理程序或阶段挂钩我的初始化代码，以便我可以从服务器配置中读取文件名并使用它来初始化我的共享内存？
它必须在配置文件被解析之后、共享内存创建之后、任何实际请求处理之前的某个地方。我试图挂钩 init_master 和 init_process 处理程序，但我似乎无法从这些处理程序作为参数接收的循环对象中找到配置对象......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:38:57.783

```
mmcf = (ngx_my_module_conf_t *) ngx_get_conf(cycle->conf_ctx, ngx_my_module); 
```

例如见这里：http: [//trac.nginx.org/nginx/browser/nginx/trunk/src/core/ngx_regex.c#L316](http://trac.nginx.org/nginx/browser/nginx/trunk/src/core/ngx_regex.c#L316)

# php - 是否可以有多个“请求：URLRequest”变量

> ID：13453794
> 
> 赞同：0
> 
> 时间：2012-11-19T12:25:52.393
> 
> 标签：php, flash, urlloader

我正在创建一个从 PHP 数据库导入数据的 Flash 游戏，我想知道这是否可以通过多个 url 完成？

例如，如果我从“http://exampleurl.php”中提取数据，是否可以同时使用类似于...的内容从另一个 url“http://exampleurltwo.php”中提取数据？

```
var request:URLRequest= new URLRequest("http://exampleurl.php");
request.method = URLRequestMethod.GET;

var loader:URLLoader = new URLLoader();
loader.addEventListener(Event.COMPLETE, completeHandler);
loader.dataFormat = URLLoaderDataFormat.VARIABLES;
loader.load(request); 
```

我使用的两种 php 表单完全不同，我无法将两者结合起来，所以任何关于如何实现我所追求的结果的建议将不胜感激！

显然不能创建另一个变量或者我得到一个冲突定义，想知道我是否可以创建它的一个实例？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:59:48.083

我刚刚重命名了变量“request2”。所以我有一个变量'request'和另一个做同样事情的'request'。在发帖时，我已经尝试过了，但没有奏效，很抱歉浪费您的时间！

# css - 这被认为是一种草率的做法吗？

> ID：13453805
> 
> 赞同：2
> 
> 时间：2012-11-19T12:26:18.287
> 
> 标签：css, header

在我的标题 div 中，我需要有 2 个向右浮动的对象，一个是按钮，另一个是搜索字段。

它们都在一个名为“pull-right”的 div 中，它只是让它们向右浮动。

对象按以下顺序排列（从左到右）

搜索框按钮

但是，由于它们显然都向右浮动，因此代码中的第一个元素将获胜并占据右侧的位置。

所以我把按钮放在了搜索框之前，尽管搜索框实际上是第一个出现的。但它仍然有效。

它被认为是一种草率的做法吗？

这是HTML：

```
<div id="navbar">
  <div id="navbar-inner" class="clearfix">
    <div class="pull-right">
      <a href="#" class="btn lightgrey">Sign in</a>
   </div>

   <div class="pull-right">
     <form><input type="search" id="search" placeholder="Search"></form>
   </div>
  </div>
  </div> 
```

和CSS：

```
.pull-right { 
    float: right; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:31:02.157

您可以轻松地将其包装在另一个容器中，然后将其浮动到右侧。

HTML：

```
<div id="floatingContainer">
    <input type="text" value="Input" />
    <input type="submit" value="submit" />
</div>​ 
```

CSS：

```
#floatingContainer { float:right; }​ 
```

[JSFiddle 示例](http://jsfiddle.net/hYd9R/)。

# objective-c - 准备 NSData 来存储十六进制值。整数常量对于它的类型来说太大了

> ID：13453806
> 
> 赞同：0
> 
> 时间：2012-11-19T12:26:21.043
> 
> 标签：objective-c, ios5, ios4

非常基本的问题。:(。我有一个十六进制值并试图适应 NSData，并尝试了以下操作。

```
 unsigned char  bytes [] = {0x0f0121dd06a2d00503040705aa010ba2d0a2d0};
  NSData *data = [NSData dataWithBytes: bytes  length:19];
  NSLog (@" DAta is %@ ", data); 
```

我收到以下警告

```
34:37: warning: integer constant is too large for its type
34: warning: large integer implicitly truncated to unsigned type 
```

数据打印如下：

```
NSDataExample[36136:707]  DAta is <d028e08c 7fff7f00 00000000 00000000 0008fc> 
```

我不确定我是否以正确的方式做这件事？友善的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:40:15.170

您`char`似乎没有正确分配数组；因为它对于您分配的类型来说太大了。这个怎么样，举个例子：

```
#import <Foundation/Foundation.h>

int main(int argc, char *argv[]) {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

    // your example has longer hex value, truncated here for clarity...
    unsigned char bytes[] = { 0x0F, 0x01, 0x21};
    NSData *data = [NSData dataWithBytes:bytes  length:3];
    NSLog (@" Data is %@ ", data);

    [p release];
} 
```

打印`2012-11-19 06:40:07.581 Untitled 2[12472:707] Data is <0f0121>`到控制台

或者，如果您的十六进制字节采用字符串的形式，则如下所示：

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        NSString *hexString = @"0x0f0121dd06a2d00503040705aa010ba2d0a2d0";
        NSMutableData *data = [[NSMutableData alloc] init];
        NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:@"[A-Fa-f0-9]{2}" options:0 error:NULL];
        [expression enumerateMatchesInString:hexString options:0 range:NSMakeRange(0, hexString.length) usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
            int hex = (int)strtol([[hexString substringWithRange:result.range] UTF8String], NULL, 16);
            printf("hex = %d\n",hex);
            [data appendBytes:&hex length:1];
        }];
        NSLog(@"%s - data = %@",__FUNCTION__,data);
    }
    return 0;
} 
```

打印`2012-11-19 06:56:15.753 TestHexStringToBytes[12891:303] main - data = <0f0121dd 06a2d005 03040705 aa010ba2 d0a2d0>`到控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:40:03.190

这太大了，您使用的是 char 数组，但该数组仅包含一个字符，该字符会被截断，因此您不需要数组。
但是即使使用 long unsigned int 也没有足够的内存来存储这个值。使用 memset 代替，并计算每个字节的值。

# ruby - 优化 ruby 正则表达式 - 大量匹配组

> ID：13453808
> 
> 赞同：0
> 
> 时间：2012-11-19T12:26:35.480
> 
> 标签：ruby, regex, optimization, pattern-matching, lexer

我正在研究一个 ruby​​ 基础词法分析器。为了提高性能，我将所有标记的正则表达式加入到一个带有匹配组名称的大正则表达式中。生成的正则表达式如下所示：

```
/\A(?<__anonymous_-1038694222803470993>(?-mix:\n+))|\A(?<__anonymous_-1394418499721420065>(?-mix:\/\/[\A\n]*))|\A(?<__anonymous_3077187815313752157>(?-mix:include\s+"[\A"]+"))|\A(?<LET>(?-mix:let\s))|\A(?<IN>(?-mix:in\s))|\A(?<CLASS>(?-mix:class\s))|\A(?<DEF>(?-mix:def\s))|\A(?<DEFM>(?-mix:defm\s))|\A(?<MULTICLASS>(?-mix:multiclass\s))|\A(?<FUNCNAME>(?-mix:![a-zA-Z_][a-zA-Z0-9_]*))|\A(?<ID>(?-mix:[a-zA-Z_][a-zA-Z0-9_]*))|\A(?<STRING>(?-mix:"[\A"]*"))|\A(?<NUMBER>(?-mix:[0-9]+))/ 
```

我将它与我的字符串匹配，生成一个 MatchData，其中只解析了一个标记：

```
bigregex =~ "\n ... garbage"
puts $~.inspect 
```

哪个输出

```
#<MatchData
 "\n"
 __anonymous_-1038694222803470993:"\n"
 __anonymous_-1394418499721420065:nil
 __anonymous_3077187815313752157:nil
 LET:nil
 IN:nil
 CLASS:nil
 DEF:nil
 DEFM:nil
 MULTICLASS:nil
 FUNCNAME:nil
 ID:nil
 STRING:nil
 NUMBER:nil> 
```

因此，正则表达式实际上匹配了 "\n" 部分。现在，我需要确定它所属的匹配组（从#inspect 输出中可以清楚地看到它是_*匿名*-1038694222803470993，但我需要以编程方式获取它）。

除了迭代#names之外，我找不到任何选项：

```
m.names.each do |n|
  if m[n]
    type = n.to_sym
    resolved_type = (n.start_with?('__anonymous_') ? nil : type)
    val = m[n]
    break
  end
end 
```

它验证匹配组确实有匹配项。

这里的问题是它很慢（我在循环中花费了大约 10% 的时间；还有 8% 的时间`@input[@pos..-1]`用来确保**\A**按预期工作以匹配字符串的开头（我不丢弃输入，只需移动 @pos在里面）。

[您可以在GH repo](https://github.com/farcaller/rly/blob/master/lib/rly/lex.rb#L128)查看完整代码。

关于如何使它至少更快一点的任何想法？是否有任何选项可以更轻松地计算“成功”匹配组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:00:29.870

我可能完全误解了这一点，但我假设除了一个令牌之外的所有令牌都不是`nil`，那是你想要的？

如果是这样，那么根据您使用的正则表达式的风格，您可以使用负前瞻来检查非`nil`值

```
([^\n:]+:(?!nil)[^\n\>]+) 
```

这将匹配整个令牌，即`NAME:value`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:59:26.857

您可以使用正则表达式方法`.captures()`和`.names()`：

```
matching_string = "\n ...garbage"   # or whatever this really is in your code
@input = matching_string.match bigregex   # bigregex = your regex
arr = @input.captures

arr.each_with_index do |value, index|     
  if not value.nil?
    the_name_you_want = @input.names[index]
  end
end 
```

或者，如果您期望多个成功的值，您可以这样做：

```
success_names_arr = []
success_names_arr.push(@input.names[index]) #within the above loop 
```

与您最初的想法非常相似，但如果您正在寻找效率`.captures()`方法应该会有所帮助。

# java - 独立 Java 应用程序上的 Eclipse AST 变量绑定

> ID：13453811
> 
> 赞同：2
> 
> 时间：2012-11-19T12:26:44.497
> 
> 标签：java, code-analysis, abstract-syntax-tree, eclipse-jdt

我正在尝试使用 Eclipse ASTParser 来分析并在可能的情况下向某些类添加一些代码。我需要的信息之一需要绑定，但因为这是一个独立的项目（最终目标是一个命令行工具，独立于 eclipse）我不能拥有它们（`requireBinding()`returns `null`）。

在阅读了很多帖子之后，我所能做的就是使用[这个例子](http://dev.eclipse.org/svnroot/tools/org.eclipse.objectteams/trunk/testplugins/org.eclipse.jdt.core.tests.compiler/src/org/eclipse/jdt/core/tests/dom/StandAloneASTParserTest.java)来使用`FileASTRequestor`，但这不是要走的路，因为在我看来，我们必须在生成 AST 树之前提供绑定的 KEY。

我在某个地方找到了我们可以使用[ASTParser.setEnvironment](http://help.eclipse.org/indigo/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/ASTParser.html#setEnvironment%28java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20java.lang.String%5B%5D,%20boolean%29)方法来在独立的 Java 应用程序中使用绑定的地方，但我认为我做得不对。下面的代码有什么问题？

```
private static final String rootDir = "D:\\workspace\\stateless\\";
    private static final String[] classpath = java.lang.System.getProperty( "java.class.path" ).split(";");

    private static final String source = 
            "package de.siemens.tools.stateless.test.examples; " +
            "public class ClassWithFinalMemberVariables {" +
            "private final int _memberIntVariable = 0;" +
            "public void method() {" +
            "int localVariable = 0;" +
            "System.out.println(_memberIntVariable + localVariable);" +
            "}" +
            "}";

    public static void main(String[] args) throws CoreException {

        Document document = new Document(source);
        ASTParser parser = ASTParser.newParser(AST.JLS4);
        parser.setKind(ASTParser.K_COMPILATION_UNIT);
        parser.setEnvironment(classpath, new String[] { rootDir }, 
new String[] { "UTF8" }, true);  
        parser.setSource(document.get().toCharArray());
        parser.setResolveBindings(true);
        parser.setBindingsRecovery(true);
        CompilationUnit unit = (CompilationUnit)parser.createAST(null);

        unit.recordModifications();

        unit.accept(new ASTVisitor() {

@Override
            public void endVisit(VariableDeclarationFragment node) {

                IVariableBinding bind = node.resolveBinding();

                if(bind == null) 
                   System.out.println("ERROR: bind is null");

                super.endVisit(node);
            } 
```

输出始终为“ `ERROR: bind is null`”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:50:33.170

我已经解决了，代码在这里： http: [//pasteit.com/19433](http://pasteit.com/19433)

尽管我更喜欢 ASTVisitor 模型，但这个模型为我提供了所有可用的绑定。

对于那些好奇的人，这里是关于这个问题的讨论：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=206391](https://bugs.eclipse.org/bugs/show_bug.cgi?id=206391)

**编辑：**我不知道这是否是最好的解决方案，如果您有任何建议，请告诉我

# jquery-mobile - 多页文档的第一页上未增强动态导航栏

> ID：13453824
> 
> 赞同：2
> 
> 时间：2012-11-19T12:27:41.997
> 
> 标签：jquery-mobile

我在我的多页文档中动态创建导航栏。我的问题是导航栏在文档的第一页上没有得到增强，但是 - 奇怪的是 - 在所有其他页面上。更重要的是，如果我在实际第一页之前的代码中添加一个页面并设置一个事件以转发到“实际”第一页，一切正常。导航栏的代码现在到处都是一样的：

```
<div data-role="page" id="stdPage" data-theme="b">

    <div data-role="content">
        ...
    </div><!-- /content -->

    <div data-role="footer" data-position="fixed" data-id="persFooter">
        <div data-role="navbar">
            <ul>
                <li></li>
            </ul>
        </div><!-- /navbar -->
    </div><!-- /footer -->

</div> 
```

我正在使用以下命令填充所有页面上的导航栏：

```
$(function () {
    $("div[data-role='navbar'] ul").empty();
    $("div[data-role='navbar'] ul").append("<li><a href=\"#stdPage\" data-icon=\"home\">Test</a></li>");
    $("div[data-role='navbar']").navbar();
}); 
```

正如我所说，这样做时，第一页上的导航栏 - 已经显示的导航栏 - 没有得到增强。所有其他页面都有增强的导航栏。

我试过弄乱 .page() 和 trigger("pagecreate") 等无济于事。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:42:03.773

问题是当您的浏览器第一次加载该页面时触发“pageinit”事件时，您的导航栏需要在页面中。这是 jQ Mobile 增强页面内容的时候。

听起来您在第一页上触发“pageinit”事件后将导航栏添加到整个文档中。这就是为什么当您导航到任何其他页面时，它会触发“pageinit”并正确增强您的内容。

您应该尝试在“mobileinit”事件中复制您的通用标题，在 jQuery 移动加载之前复制它（将您正在使用的脚本放在 jQ Mobile 脚本标记之前），或者将标题的标记放在您的第一页上并复制克隆(.clone()) 标记增强后的每一页。

至于触发器，正确的语法是这样的： `$(yourelement).trigger('create')`.

```
$(function () {
    $("div[data-role='navbar'] ul").empty();
    $("div[data-role='navbar'] ul").append("<li><a href=\"#stdPage\" data-icon=\"home\">Test</a></li>");
    $("div[data-role='navbar']").trigger('create');

}); 
```

祝你好运！

**跟进：** 这就是我的做法。

我有一个标题，我想让某些页面通用，其中是我的第一页。所以我像往常一样在首页上制作了标题。在我的其他页面上，我放置了一个带有`class="commonHeader"`.

然后在'mobileinit'上我添加了以下指令：

```
$(document).on('mobileinit', function(event){
        $('.commonHeader').each(function(index, element) { //attach common header to all pages
             $(element).replaceWith($('#frontPage [data-role="header"]').clone(true, true));     
        });
}); 
```

您可以尝试仅在需要公共页眉的页面上使用相同的方法。

# c# - 操作由进程创建的窗口

> ID：13453827
> 
> 赞同：4
> 
> 时间：2012-11-19T12:27:45.690
> 
> 标签：c#

我对 C# 很陌生，并且面临一个问题。我希望通过以下方式操作动态创建的窗口（调整大小、移动）：

```
Process app = new Process();
app.StartInfo.FileName = "notepad.exe";   //just an example,
app.Start();                              //it will be more than just notepad 
```

我知道我可以通过 获取句柄，`app.MainWindowHandle`但无法通过 获取表格`Control.FromHandle(app.MainWindowHandle)`。因此，我无法设置此记事本的新位置或大小。

关于如何操作窗口的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:55:56.050

记事本是 Win32 应用程序，而不是 .NET 表单。这就是为什么你不能从中得到一个`Control`- 它不是一个控制！

您可以对窗口句柄做的就是将它传递给可以操作 Win32 窗口的 Win32 函数。它们有很多，例如[`SetWindowPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)设置窗口位置（并从 C# 中查看有关使用它的[这个 SO 问题）。](https://stackoverflow.com/questions/1190423/using-setwindowpos-in-c-sharp-to-move-windows-around)

[请参阅MSDN 上有关 Window 函数的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632595%28v=vs.85%29.aspx)更多参考，并使用[PInvoke.net](http://pinvoke.net/)作为从 C# 调用这些 Win32 方法的参考。

# c# - 我应该如何为抛出 HttpResponseException 的情况编写文档？

> ID：13453829
> 
> 赞同：1
> 
> 时间：2012-11-19T12:27:46.070
> 
> 标签：c#, .net, documentation, asp.net-web-api, http-status-codes

我想知道如何为ASP.NET Web API 控制器抛出的[HttpResponseException异常编写文档注释？](http://msdn.microsoft.com/en-us/library/system.web.http.httpresponseexception%28v=vs.108%29.aspx)问题是，通常你会为每种情况抛出不同类型的异常，因此为每种异常类型编写文档注释，例如`/// <exception cref="ResourceNotFound">Resource not found</exception>`. 但是，对于 HttpResponseException，`StatusCode`异常的属性是识别错误情况的原因。

我应该如何记录`HttpResponseException`可能引发的每种情况，每种情况都由状态代码标识，对应于您如何编写`/// <exception></exception>`每种异常类型的注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:27:34.023

**TL;DR 版本：主要使用客户可以***采取行动*的代码和信息来设计您的异常响应。尽可能利用标准 HTTP 状态代码。记录您在 HTTP 规范之外提供的内容，以指导客户端应用程序的行为。其次，在可行的情况下，提供客户开发人员可用于开发和故障排除的信息。

在为基于 HTTP 的 API 设计错误响应时，我会问自己，基于这些错误响应，客户端会触发哪些期望和相应的行为。当客户端收到 500 的 HTTP 状态代码时，它可以假设服务器发生了某种“故障”，从而无法正确处理请求。状态代码 500的[HTTP 规范](https://www.rfc-editor.org/rfc/rfc2616#section-10.5.1)说，当另一个代码无法正确分配时，这是一种包罗万象的状态代码；除了知道服务器刚刚“繁荣”之外，对客户没有太大帮助。但是，有一个 HTTP 状态代码 503 Service Unavailable，它通过`Retry-After`HTTP 标头向客户端提供有关中断可能持续多长时间的信息。

在评论中的具体示例中，告诉客户端存在数据库异常并不是很有用，因为客户端可能对此无能为力。我会在服务器端记录有关异常的详细信息以供操作员/开发人员使用，并让 HTTP 状态代码通知客户端该问题。

我做的唯一例外是在请求无法解析时提供有关意外或丢失元素（等）的详细信息。我将使用 HTTP 状态代码 400 Bad Request 将其作为响应的一部分发送。客户端应用程序可能无法对这些信息做任何事情，但客户端开发人员会非常感激它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:30:48.650

我找到了一种解决方案，可以让我在 Web API 控制器方法中记录错误案例，就像对普通 C# 异常所做的那样 - 将要用于标记错误的每个 HTTP 状态代码映射到`HttpResponseException`. 这解决了我的特殊问题，这只是在 Web API 控制器方法的文档注释中描述错误情况。

以以下代码为例：

```
public class HttpNotFoundException : HttpResponseException
{
    public HttpNotFoundException(string reason)
        : base(new HttpResponseMessage { StatusCode = HttpStatusCode.NotFound, ReasonPhrase = reason })
    { }
}

public class HttpInternalServerError : HttpResponseException
{
    public HttpInternalServerError(string reason)
        : base(new HttpResponseMessage { StatusCode = HttpStatusCode.InternalServerError, ReasonPhrase = reason })
    { }
}

public class ResourceApiController : ApiController
{
    IRepository Repository { get; set; }

    /// <summary>
    /// Delete a resource.
    /// </summary>
    /// <param name="id">Resource ID.</param>
    /// <exception cref="HttpNotFoundException">Resource not found.</exception>
    /// <exception cref="HttpInternalServerError">An internal error was detected, for instance in database service.</exception>
    public void DeleteResourceById(string id)
    {
        try
        {
            Repository.Delete(id);
        }
        catch (WebResourceNotFoundError)
        {
            throw new HttpNotFoundException(string.Format("Build '{0}' not found", id));
        }
        catch (DatabaseServiceException)
        {
            throw new HttpInternalServerError("Database service operation failed");
        }
    }
} 
```

# cron - 使用非 root 用户 aix 重新启动 cron 服务脚本

> ID：13453831
> 
> 赞同：0
> 
> 时间：2012-11-19T12:27:51.627
> 
> 标签：cron, crontab, aix

我需要在aix系统上做一个重启cron服务的批处理，但是必须用非root用户来完成？？
我需要这样做，因为在 aix 中，您必须在修改 crontab 文件时重新启动 cron 服务，才能接受新的更改。

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:09:30.047

使用[`crontab`命令](http://pic.dhe.ibm.com/infocenter/aix/v7r1/topic/com.ibm.aix.cmds/doc/aixcmds1/crontab.htm)提交更新的 cron 文件。它将向 crond 发出重新加载/重置的信号。

# drupal - 用户可以重新认证

> ID：13453833
> 
> 赞同：0
> 
> 时间：2012-11-19T12:27:56.220
> 
> 标签：drupal, drupal-7, drupal-modules

在 drupal 中，一旦启动了用户身份验证的会话，并且在该会话结束之前，用户将不必重新进行身份验证。但是在我的站点中，用户可以重新进行身份验证。并且没有任何错误消息。有可能发生吗？以及如何检查用户是否已经登录并有会话？

我试图让所有登录的用户，但我不确定它会起作用：

```
$result = db_query('SELECT u.uid, u.name FROM {sessions} s INNER JOIN {users} u ON u.uid = s.uid WHERE s.uid != 0')->fetch(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:06:03.590

```
user_is_anonymous() 
```

将告诉您当前用户是否已登录

另一种方法是使用全局 $user

```
global $user;
if($user->uid) 
  print('logged in');
else 
  print('logged out'); 
```

但是，登录的用户可以再次访问用户/登录是不正常的。Drupal 通常会重定向到用户的帐户页面。

# css - Blackberry 中的 HTML 输入具有不同的宽度，具体取决于它们的类型

> ID：13453834
> 
> 赞同：1
> 
> 时间：2012-11-19T12:28:00.123
> 
> 标签：css, html, blackberry, webkit

当我在 Blackberry 中测试以下代码时，具有`width: 100%; box-sizing: border-box;`类型样式`number`或`date`宽度与类型不同的输入。`text`我已经检查了模拟器 9380、9810 和 9850 以及 9810 设备。

```
<style type="text/css">
    #inputsTest { 
        border: 1px solid red; 
        margin: 15px; 
    }

    #inputsTest input { 
        border: 1px solid green; 
        width: 100%; 
        -webkit-box-sizing: border-box; 
        -moz-box-sizing: border-box; 
        box-sizing: border-box; 
    }
</style>

<div id="inputsTest">
      <label for="test1">Text</label>
      <input id="test1" type="text"/>
      <label for="test2">Number</label>
      <input id="test2" type="number"/>
      <label for="test3">Date</label>
      <input id="test3" type="date"/>
</div> 
```

这是 Firefox 的屏幕截图： ![在此处输入图像描述](../Images/2525eac19cb5a9df8b44f66e5093b2de.png)

这就是它在黑莓中的样子（宽度差异在红色圆圈中可见）： ![在此处输入图像描述](../Images/ed94746d711118b97342391ab01dc612.png)

代码也可以在这里找到：http: [//jsfiddle.net/GXfXG/5/](http://jsfiddle.net/GXfXG/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:51:29.947

由于[这个答案](https://stackoverflow.com/a/4812443/1047055)和[这个](https://stackoverflow.com/a/7148952/1047055)，我已经解决了这个添加这个 CSS 的问题：

```
input[type=number]::-webkit-outer-spin-button,
input[type=date]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
} 
```

# c - 浮点错误

> ID：13453835
> 
> 赞同：4
> 
> 时间：2012-11-19T12:28:05.647
> 
> 标签：c, floating-point, floating-point-conversion

```
#include <stdio.h>
int main()
{
    int n;
    while ( scanf( "%d", &n ) != EOF ) {
        double sum = 0,k;
        if( n > 5000000 || n<=0 )   //the judgment of the arrange
            break;
        for ( int i = 1; i <= n; i++ ) {
            k = (double) 1 / i;
            sum += k;
        }
        /*
        for ( int i = n; i > 0; i-- ) {
            k = 1 / (double)i;
            sum += k;
        }
        */
        printf("%.12lf\n", sum);
    }
    return 0;
} 
```

为什么在不同的循环中我得到不同的答案。有浮动错误吗？当我输入`5000000`sum时，`16.002164235299`但是当我使用 for （符号部分）的另一个循环时，我得到了 sum `16.002164235300`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T12:33:03.857

因为[浮点数学不是关联的](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)：

即`(a + b) + c`不一定等于`a + (b + c)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-13T10:40:59.183

我还遇到了 a + b + c 问题。完全同意 ArjunShankar。

```
// Here A != B in general case
float A = ( (a + b) + c) );
float B = ( (a + c) + b) ); 
```

在 mantis 中，大多数浮点运算都是在数据丢失的情况下执行的，即使组件很好地适合其中（0.5 或 0.25 之类的数字）。事实上，我很高兴发现我的应用程序中出现错误的原因。我写了简短的提醒文章并详细解释：

[http://stepan.dyatkovskiy.com/2018/04/machine-fp-partial-invariance-issue.html](http://stepan.dyatkovskiy.com/2018/04/machine-fp-partial-invariance-issue.html)

下面是 C 示例。祝你好运！

*例子.c*

```
#include <stdio.h>

// Helpers declaration, for implementation scroll down
float getAllOnes(unsigned bits);
unsigned getMantissaBits();

int main() {

  // Determine mantissa size in bits
  unsigned mantissaBits = getMantissaBits();

  // Considering mantissa has only 3 bits, we would then get:
  // a = 0b10   m=1,  e=1
  // b = 0b110  m=11, e=1
  // c = 0b1000 m=1,  e=3
  // a + b = 0b1000, m=100, e=1
  // a + c = 0b1010, truncated to 0b1000, m=100, e=1
  // a + b + c result: 0b1000 + 0b1000 = 0b10000, m=100, e=2
  // a + c + b result: 0b1000 + 0b110 = 0b1110, m=111, e=1

  float a = 2,
        b = getAllOnes(mantissaBits) - 1,
        c = b + 1;

  float ab = a + b;
  float ac = a + c;

  float abc = a + b + c;
  float acb = a + c + b;

  printf("\n"
         "FP partial invariance issue demo:\n"
         "\n"
         "Mantissa size = %i bits\n"
         "\n"
         "a = %.1f\n"
         "b = %.1f\n"
         "c = %.1f\n"
         "(a+b) result: %.1f\n"
         "(a+c) result: %.1f\n"
         "(a + b + c) result: %.1f\n"
         "(a + c + b) result: %.1f\n"
         "---------------------------------\n"
         "diff(a + b + c, a + c + b) = %.1f\n\n",
         mantissaBits,
         a, b, c,
         ab, ac,
         abc, acb,
         abc - acb);

  return 1;
}

// Helpers

float getAllOnes(unsigned bits) {
    return (unsigned)((1 << bits) - 1);
}

unsigned getMantissaBits() {

    unsigned sz = 1;
    unsigned unbeleivableHugeSize = 1024;
    float allOnes = 1;

    for (;sz != unbeleivableHugeSize &&
          allOnes + 1 != allOnes;
          allOnes = getAllOnes(++sz)
          ) {}

    return sz-1;
} 
```

# c# - 在抽象工厂模式中使用 IoC？

> ID：13453837
> 
> 赞同：4
> 
> 时间：2012-11-19T12:28:12.807
> 
> 标签：c#, ioc-container, factory-pattern

在工厂模式中使用 IoC 容器是一种不好的做法吗？例如：

```
public interface IDialogService
{
    void RegisterView<TView, TViewModel>(string viewName) 
        where TViewModel : IDialogViewModel
        where TView : Window;

    bool? ShowDialog(string viewName, IDialogViewModel viewModel);
    // factory method:
    TViewModel CreateDialogViewModel<TViewModel>(string name) where TViewModel : IDialogViewModel;
}

public class DialogService : IDialogService
{
    private readonly IUnityContainer _container;
    public DialogService(IUnityContainer container)
    {
        _container = container;
    }

    #region IDialogService Members

    public void RegisterView<TView, TViewModel>()
        where TView : Window
        where TViewModel : IDialogViewModel
    {
        RegisterView<TView, TViewModel>("");
    }

    public void RegisterView<TView, TViewModel>(string viewName)
        where TView : Window
        where TViewModel : IDialogViewModel
    {
        if (!_container.IsRegistered<TViewModel>())
            _container.RegisterType<TViewModel>();

        if (string.IsNullOrEmpty(viewName))
        {
            viewName = typeof(TView).Name;
        }
        _container.RegisterType<Window, TView>(viewName);
    }

    public bool? ShowDialog(string viewName, IDialogViewModel viewModel)
    {
        var view = _container.Resolve<Window>(viewName);
        view.DataContext = viewModel;
        view.Owner = Application.Current.MainWindow;
        return view.ShowDialog();
    }
    // factory method:
    public TViewModel CreateDialogViewModel<TViewModel>(string name) where TViewModel : IDialogViewModel
    {
        return _container.Resolve<TViewModel>(name);
    }

    #endregion
} 
```

我创建工厂方法的原因是因为我的一些 IDialogViewModel 实现在它们的构造函数中有很多参数，而且每个对话框在实例化时都必须有新的 UnitOfWork。

这是我的使用方法：

```
public class PeopleMainViewModel : NotificationObject, ...
{
    private readonly IDialogService _dialogService = null;
    public PeopleMainViewModel(IDialogService dialogService)
    {
        _dialogService = dialogService;
    }

    // this method executes by a command.
    public void AddPerson()
    {
        // here is factory method usage. each time PersonDialogViewModel instantiates, a new Unit of work will be created.
        var viewModel = _dialogService.CreateDialogViewModel<PersonDialogViewModel>();

        // this shows person dialog window to user...
        var result = _dialogService.ShowDialog("PersonWindow", viewModel);
        if(result == true)
        {
            //...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:38:12.880

您应该尽量避免将 IoC 容器注入工厂，而是查看您的 IoC 框架是否可以为您生成工厂。然而这并不总是可能的，在这些情况下，我认为在工厂中使用容器是可以接受的，只要它永远不会逃脱。

就我个人而言，我不会将容器放入服务中（如上例所示），因为在我看来，类现在有两个职责，并且注入框架已经逃逸到应用程序逻辑中。

# ios - 分组 UITableViewCell 中的 UITextfield

> ID：13453839
> 
> 赞同：0
> 
> 时间：2012-11-19T12:28:16.553
> 
> 标签：ios, xcode, uitableview, uitextfield

我正在尝试通过使用分组静态表视图在 iPhone 应用程序上实现输入表单。

我`didSelectRowAtIndexPath`用来懒惰地创建一个文本字段并添加到相关的单元格中。

![截屏](../Images/dcd80666ce5c2b6731685275990ffba4.png)

我的问题是它`becomeFirstResponder`的行为不像我预期的那样。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if(indexPath.section == 0)
{
    if(!self.contactNameTextField)
    {
        self.contactNameTextField = [[UITextField alloc] initWithFrame:CGRectMake(93, 14, 200, 20)];
        self.contactNameTextField.backgroundColor = [UIColor clearColor];
        self.contactNameTextField.font = [UIFont boldSystemFontOfSize:15];
        self.contactNameTextField.keyboardType = UIKeyboardTypeEmailAddress;
        [self.contactNameCell addSubview:self.contactNameTextField];
    }

    [self.contactNameTextField becomeFirstResponder];

}

if(indexPath.section == 1)
{
    if(!self.contactEmailTextField)
    {
        self.contactEmailTextField = [[UITextField alloc] initWithFrame:CGRectMake(93, 14, 200, 20)];
        self.contactEmailTextField.backgroundColor = [UIColor clearColor];
        self.contactEmailTextField.font = [UIFont boldSystemFontOfSize:15];
        self.contactEmailTextField.keyboardType = UIKeyboardTypeEmailAddress;
        [self.contactEmailCell addSubview:self.contactNameTextField];
    }

    [self.contactEmailTextField becomeFirstResponder];

} 
```

代码按预期逐步执行。

如果我先点击第 0 部分，名称文本字段将成为第一响应者。如果我然后点击第 1 部分，电子邮件文本字段将成为第一响应者。如果我然后点击第 0 部分，即使`becomeFirstResponder`在名称文本字段上调用它，它也没有响应。

此外，如果我先点击第 1 部分，即使`becomeFirstResponder`在电子邮件文本字段中调用它，它也不会响应。

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:43:40.153

问题解决了，self.contactNameTextField 出现了两次愚蠢的剪切和粘贴错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:41:29.063

在调用 becomeFirstResponder 之前尝试调用其他文本字段的 resignFirstResponder。代替

```
[self.contactNameTextField becomeFirstResponder]; 
```

和

```
[self.contactEmailTextField resignFirstResponder];
[self.contactNameTextField becomeFirstResponder]; 
```

对第 1 部分执行相同操作。在调用 resignFirstResponder 之前检查 textField 是否不为零。

# php - RSS提要不显示日期？

> ID：13453841
> 
> 赞同：1
> 
> 时间：2012-11-19T12:28:26.953
> 
> 标签：php, rss

在我的 RSS 提要中，它在 chrome 浏览器中显示标题、链接、pubDate 和描述。

但是在Firefox中它只显示标题和描述..

在 Firefox RSS 的页面源中，它具有标题、链接、描述和 pubDate 等所有标签。但是日期没有显示我该怎么办？..

我的 RSS 代码就像，

```
<rss version="2.0">
<channel>
<title>
Subscribe now
</title>
<description>desc</description>
<link>site link</link>
<copyright>Your copyright details</copyright>
<item>
<title>title1
</title>
<link>
link1
</link>
<pubDate>2012-10-26 19:18:36</pubDate>
</item>
<item>
<title>title2
</title>
<link>
link2
</link>
<pubDate>2012-10-26 19:15:24</pubDate>
</item>
</channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:39:27.587

可能是您的格式不正确。这是一篇关于格式应该如何显示的文章[http://tomchikoore.wordpress.com/2008/02/04/correct-rss-date-format/](http://tomchikoore.wordpress.com/2008/02/04/correct-rss-date-format/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:40:10.627

根据[RSS 2.0 规范](http://cyber.law.harvard.edu/rss/rss.html)：

> RSS 中的所有日期时间都符合 [RFC 822](http://asg.web.cmu.edu/rfc/rfc822.html)的日期和时间规范，但年份可以用两个字符或四个字符（首选四个）表示。

...并提供以下示例：

```
Sat, 07 Sep 2002 00:00:01 GMT 
```

# java - 具有 GeneratedValue 的复合 ID 休眠

> ID：13453854
> 
> 赞同：0
> 
> 时间：2012-11-19T12:29:13.083
> 
> 标签：java, hibernate, jpa

我一直在尝试保留一个具有复合 ID 的对象。

```
TABLEUSER
ID - auto_increment
name

TABLEUSER2
userid (foreing key from tableUSER)
keynum2 
```

我已经用 @EmbeddedId 注释尝试了 lareadt。问题是我正在尝试按如下方式获取外键

```
@GeneratedValue(generator = "foreign")
@GenericGenerator(
        name = "foreign",
        strategy = "foreign",
        parameters = {@org.hibernate.annotations.Parameter(name = "property", value = "user")}) 
```

如果它是 TABLE USER 中的单个键，这将是完美的，但由于它是一个复合 ID，我无法设置它。

有没有办法这样做？

# c# - 为什么我的 While 不会循环，循环？

> ID：13453858
> 
> 赞同：4
> 
> 时间：2012-11-19T12:29:19.073
> 
> 标签：c#, while-loop, console-application, break, nested-loops

好的，我从我能想到的各个角度都试过了，我想我像往常一样把事情复杂化了！

我正在构建一个控制台 c# 应用程序，该应用程序将要求用户输入所购买商品的价格，然后根据此客户代码为“客户代码”应用一定的折扣。

我为此使用了一个 switch 语句，并且它都适用于错误检查（使用 while 循环不断询问，直到识别出正确的输入）这是我正在努力的最后一部分......控制台询问用户是否愿意如果用户输入了不正确的输入，则使用我的代码输入更多数据（跳回主循环的开头），如果用户输入“N”，它也会根据需要再次询问程序终止。但是不起作用的一点是，如果用户输入'Y'，他们应该能够回到开始并输入更多数据，但这不起作用=/我使用了“break;” 退出退出循环并返回主循环的语句...

此时字符是'Y'，所以主循环应该仍在运行，但控制台什么都不做，它只是将光标放在一个空行上......它不要求输入，它没有说“按任意键继续”。我已经尽可能详细地介绍了这篇文章，我很抱歉=/ ...下面是我的代码...希望有人能发现我哪里出错了！

更新：我还应该注意，我已经尝试了使用 (=='Y') 的主循环并将变量设置为'Y'，以便它执行第一个循环。我还用相同的语句将其更改为 do while 循环，以便首先使用空白字符运行，然后如果将其更改为“Y”，则应该排除循环条件 =/

更新：在你们都认为我更像个白痴之前，我已经注意到我的计算错误=/ LOL

```
namespace W7Task1
{
    class W7Task1
{
    // "Main" method begins the execution of the C# application
    static void Main(string[] args)
    {
        char customerCode = '\0';
        double initialCost = 0;
        string customerType = "";
        double finalPrice = 0;
        string userInput = "";
        char continueChar = '\0';

        while (continueChar != 'N')
        {
            while (initialCost == 0)
            {
                Console.Write("\nPlease input the cost of the item: ");
                userInput = Convert.ToString(Console.ReadLine());
                try
                {
                    initialCost = Convert.ToDouble(userInput);
                }
                catch
                {
                    Console.WriteLine("\nPlease input a number!");
                }
            }

            while (customerCode == '\0')
            {
                Console.Write("\nPlease input your customer code: ");
                userInput = Convert.ToString(Console.ReadLine());
                customerCode = Convert.ToChar(userInput);
                customerCode = char.ToUpper(customerCode);

                switch (customerCode)
                {
                    case 'A':
                        customerType = "Managerial Staff";
                        finalPrice = (initialCost / 100) * 30 - initialCost;
                        Console.WriteLine("\nThe initial cost of the item is: {0:c}\nYour customer type is: {1}\nThe items final price is: {2:c}\n", initialCost, customerType, finalPrice);
                        break;
                    case 'B':
                        customerType = "Sales Staff";
                        finalPrice = (initialCost / 100) * 20 - initialCost;
                        Console.WriteLine("\nThe initial cost of the item is: {0:c}\nYour customer type is: {1}\nThe items final price is: {2:c}\n", initialCost, customerType, finalPrice);
                        break;
                    case 'C':
                        customerType = "Account Customers";
                        finalPrice = (initialCost / 100) * 8 - initialCost;
                        Console.WriteLine("\nThe initial cost of the item is: {0:c}\nYour customer type is: {1}\nThe items final price is: {2:c}\n", initialCost, customerType, finalPrice);
                        break;
                    case 'D':
                        customerType = "Cash Customers";
                        finalPrice = (initialCost / 100) * 5 - initialCost;
                        Console.WriteLine("\nThe initial cost of the item is: {0:c}\nYour customer type is: {1}\nThe items final price is: {2:c}\n", initialCost, customerType, finalPrice);
                        break;
                    case 'E':
                        customerType = "Credit Card/Cheque";
                        finalPrice = (initialCost / 100) * 0 - initialCost;
                        Console.WriteLine("\nThe initial cost of the item is: {0:c}\nYour customer type is: {1}\nThe items final price is: {2:c}\n", initialCost, customerType, finalPrice);
                        break;
                    default:
                        Console.WriteLine("\nError Please input a valid Customer Code\n");
                        customerCode = '\0';
                        break;
                }
            }

            while (continueChar == '\0')
            {
                Console.WriteLine("Would you like to input more data?");
                userInput = Convert.ToString(Console.ReadLine());

                if (char.TryParse(userInput, out continueChar))
                {
                    continueChar = char.ToUpper(continueChar);

                    if (continueChar == 'Y')
                    {
                        break;
                    }
                    else if (continueChar == 'N')
                    {
                        Console.WriteLine("Thankyou for using this application");
                        System.Environment.Exit(0);
                    }
                    else
                    {
                        Console.WriteLine("Please input a 'Y' or 'N'");
                        continueChar = '\0';
                    }
                }
                else
                {
                    Console.WriteLine("Please input a valid character!");
                }
            }
        }
    }// End of "Main" method
}// End of "W7Task1" class 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:36:01.553

你没有重置你的变量。

当用户退出退出循环时，变量如下

```
continueChar == 'Y'
customerCode != '\0'
initialCost != 0 
```

这意味着您的所有 while 循环都不会触发。

在主循环内移动变量声明或初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T12:36:33.147

发生的情况是，在用户进入后`'Y'`，外层循环（即`while (continueChar != 'N')`）将继续无限循环，但没有一个内层循环（从 开始`while (initialCost == 0)`）将满足其条件，因为它们的变量（例如`initialCost`）将保留值在前一次迭代中分配的。

最简单的解决方法是将所有变量初始化移动到外循环内部。更改您的代码：

```
static void Main(string[] args)
{
    char customerCode = '\0';
    double initialCost = 0;
    string customerType = "";
    double finalPrice = 0;
    string userInput = "";
    char continueChar = '\0';

    while (continueChar != 'N')
    {
        while (initialCost == 0)
        {
        // ... 
```

...至：

```
static void Main(string[] args)
{
    char continueChar = '\0';

    while (continueChar != 'N')
    {
        char customerCode = '\0';
        double initialCost = 0;
        string customerType = "";
        double finalPrice = 0;
        string userInput = "";

        while (initialCost == 0)
        {
        // ... 
```

**编辑**：如果你想在你的方法顶部保留你的变量声明，你可以像这样分开它们的声明和初始化。这将确保它们在内循环的每次迭代中都被重置，同时让你的导师满意。

```
static void Main(string[] args)
{
    char customerCode;
    double initialCost;
    string customerType;
    double finalPrice;
    string userInput;
    char continueChar = '\0';

    while (continueChar != 'N')
    {
        customerCode = '\0';
        initialCost = 0;
        customerType = "";
        finalPrice = 0;
        userInput = "";

        while (initialCost == 0)
        {
        // ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:37:16.793

您是否使用调试器单步执行了您的应用程序（在 Visual Studio 中按“F10”）？

您没有将“initialCost”变量重置为 0。

# apache - 重写不起作用

> ID：13453859
> 
> 赞同：0
> 
> 时间：2012-11-19T12:29:21.180
> 
> 标签：apache, rewrite

我完全迷失了，尝试任何愚蠢的事情。大概你知道情况。我在这里和谷歌上尝试了许多线程的提示，但没有任何帮助。我已经在我的 Apache 上加载了重写模块（由 phpinfo 检查）。对于我创建了 .htaccess 的站点，其中存储了当前简单的规则：

```
RewriteEngine on
RewriteBase /
RewriteRule ^/certifikaty\.html$ certifikaty.php 
```

所以，我希望[http://www.contech.cz/certifikaty.html](http://www.contech.cz/certifikaty.html)会显示[http://www.contech.cz/certifikaty.php](http://www.contech.cz/certifikaty.php)。不幸的是没有。所以，我在我的 httpd.conf 中设置了这些行：

```
RewriteLogLevel 9
RewriteLog "logs/rewrite.log" 
```

文件 (rewrite.log) 已创建，但即使在服务器重新启动后它也是空的。

拜托，你能帮我摆脱这个吗？

马立克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:02:57.457

我找到了解决方案 - 我在 httpd.conf 中有指令 AllowOveride None。这意味着所有 httpd.conf 都被忽略了......

# android - 在全屏 webview Android 中设置进度条

> ID：13453860
> 
> 赞同：3
> 
> 时间：2012-11-19T12:29:28.123
> 
> 标签：android, webview, progress-bar, progress

我尝试使用此解决方案 [Android WebView 进度条](https://stackoverflow.com/questions/2537454/android-webview-progress-bar)

这给了我

```
 final ProgressBar Pbar;
    Pbar = (ProgressBar) findViewById(R.id.pB1);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_browser);
    browser=(WebView)findViewById(R.id.layout_browser);

    browser.getSettings().setJavaScriptEnabled(true);
    browser.getSettings().setPluginsEnabled(true);
    browser.getSettings().setPluginState(WebSettings.PluginState.ON);

    browser.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress) 
           {
           if(progress < 100 && Pbar.getVisibility() == ProgressBar.GONE){
               Pbar.setVisibility(ProgressBar.VISIBLE);
           }
           Pbar.setProgress(progress);
           if(progress == 100) {
               Pbar.setVisibility(ProgressBar.GONE);
           }
        }
    });

    browser.loadUrl("google.com"); 
```

并在我的 webview 布局中添加一个进度条，但它崩溃了，为什么？

```
<?xml version="1.0" encoding="utf-8"?> 
<RelativeLayout
 xmlns:android="http://schemas.android.com/apk/res/android" 
android:orientation="vertical" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
> 
<ProgressBar android:id="@+id/pB1"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:layout_centerVertical="true"
    android:padding="2dip">
</ProgressBar>
<WebView android:id="@+id/layout_browser" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
/>   
</RelativeLayout> 
```

注意：我将隐藏我的状态栏，这就是我尝试使用此方法的原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:31:08.557

这一行`Pbar = (ProgressBar) findViewById(R.id.pB1);`应该在之后`setContentView(R.layout.layout_browser);`

就像是，

```
setContentView(R.layout.layout_browser);
Pbar = (ProgressBar) findViewById(R.id.pB1); 
```

# spring - 如果在使用 Spring 集成发送消息时 jms 代理关闭，如何停止异常传播？

> ID：13453861
> 
> 赞同：0
> 
> 时间：2012-11-19T12:29:30.310
> 
> 标签：spring, jms, activemq, spring-integration

我配置了基于spring xml的拦截器，它在提交后每次调用某些事务方法时都会向activemq队列发送一条jms消息。它发生在以下 xml 代码中。

```
<jms:outbound-channel-adapter channel="filteredStakesChannel" destination="stakesQueue" delivery-persistent="true" explicit-qos-enabled="true" /> 
```

但是，如果 activemq 服务器关闭，我会收到连接被拒绝的异常，该异常会被传播，即使 jms 传递失败，我也不希望这种情况发生。这可能吗？我应该使用一些错误通道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:27:37.283

最简单的解决方案是将 fileredStakesChannel 设置为 Executor 通道，发送将在不同的线程上运行。

[http://static.springsource.org/spring-integration/reference/html/messaging-channels-section.html#executor-channel](http://static.springsource.org/spring-integration/reference/html/messaging-channels-section.html#executor-channel)

[http://static.springsource.org/spring-integration/reference/html/messaging-channels-section.html#channel-configuration-executorchannel](http://static.springsource.org/spring-integration/reference/html/messaging-channels-section.html#channel-configuration-executorchannel)

使用 <task/> 命名空间来定义要使用的执行器。

# android - 如何从 XML 扩展视图子类？

> ID：13453864
> 
> 赞同：0
> 
> 时间：2012-11-19T12:29:40.103
> 
> 标签：android, xml, view, subclass, inflate

我目前正在`Adapter`使用从 XML 膨胀的视图填充启动时

```
private void addView(Context context) {
    LayoutInflater inflater = LayoutInflater.from(context);
    View view = inflater.inflate(R.layout.deal_tile, this, null);
    mViews.add(view);
} 
```

但是，我发现将视图存储在列表中`AdapterView`会导致这些视图中的控件出现问题，因此我想改用`Adapter#getView(int position, View recycle, ViewGroup container)`.

出于这个原因，我想使用自定义视图类，以便`if(recycle!=null && recycle instanceof CustomView)`在将其重新填充到适配器中之前进行完整性检查（）。但是，我不知道您如何从 XML 扩展自定义视图类。我可以了解如何*将*膨胀视图添加到自定义视图，我可以了解如何将自定义视图插入 XML 布局等，显然我很高兴直接使用 膨胀这些东西`LayoutInflater`，但我找不到生成自定义视图本身的等效项。我想重用已有的 XML；因此，我不想直接对元素（以及它们的外观）进行编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:43:20.793

我用它来创建自己的幻灯片库，我认为它会有所帮助。

```
 LinearLayout internalWrapper = new LinearLayout(getContext());
    internalWrapper.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    internalWrapper.setOrientation(LinearLayout.HORIZONTAL);
    addView(internalWrapper);
    this.mItems = items;
    LinearLayout generalLayout = new LinearLayout(this.getContext());

    generalLayout = (LinearLayout) View.inflate(this.getContext(), R.layout.galleryrow, null);

    // inside linear layout
    LinearLayout generalLinear = (LinearLayout) generalLayout.findViewById(R.id.rowgenerallin);
    // set height & width to the LINEAR
    generalLinear.setLayoutParams(new LayoutParams(reference_width, reference_height));

    ImageView ivl = (ImageView) generalLayout.findViewById(R.id.arrow_left);
    ImageView ivr = (ImageView) generalLayout.findViewById(R.id.arrow_right);
    internalWrapper.addView(generalLayout); 
```

在我的情况下，`R.layout.gallery_row`包含我要管理的两个图像，由 a 嵌套，内部包装器是在活动的主布局中声明`LinearLayous (rowgenerllin)`的空。`LinearLayout`仔细检查 LayoutParams 代码，否则你会得到一个很大的 NULL :)

干杯!

# jquery - 从 jquery 中的 ajax 调用中插入 json 值

> ID：13453876
> 
> 赞同：-1
> 
> 时间：2012-11-19T12:30:15.670
> 
> 标签：jquery, json, string-interpolation

我在 jQuery 中有一个 ajax 调用，它返回一组值：p1、p2 ... pn。这些包含用于显示图像的路径和文件名字符串。即img src 值。

我想遍历这些 n 值（ i = 1 到 n ）类似于 [pseudo] ：

```
$("#photo_" + i).html( '<img src="' + data.p + i + '">' ); 
```

选择器工作正常.. 这是我在构建时遇到问题的 img src。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:32:48.767

您需要更改`data.p + i`为`data["p" + i]`

**改变**

```
$("#photo_" + i).html( '<img src="' + data.p + i + '">' ); 
```

**到**

```
$("#photo_" + i).html( '<img src="' + data["p" + i] + '">' ); 
```

# phalcon - Phalcon 不断为不同的控制器使用 index.phtml

> ID：13453880
> 
> 赞同：2
> 
> 时间：2012-11-19T12:30:34.910
> 
> 标签：phalcon

我是 Phalcon 的新手，我喜欢这个框架，但我的链接有问题。我使用 phalcon 0.6.1 版和 XAMPP 1.8.1 将 vhosts 设置为我 phalcon 测试所在的 xampp/htdocs/test。

我一直在关注教程并遇到了一个问题。当我使用链接加载其他控制器时，地址栏会显示正确的路径，但据我所知，每次都会加载 index.phtml。我把文件上传到[这里](https://docs.google.com/open?id=0B49VRWgNhJMdWmxtV05YSXdEaE0)，你可以自己看看。

如果我使用 Tag::LinkTo() 或者因为它没有改变，这并不重要。

***编辑：***

我按照[说明](http://docs.phalconphp.com/en/0.7.0/reference/apache.html)，从 /test 和 /test/public 目录中删除了 .htaccess 文件，将其移至 httpd.conf。最后我添加了

> ```
> <Directory "C:/xampp/htdocs/www/test">
>     RewriteEngine on
>     RewriteRule  ^$ public/    [L]
>     RewriteRule  (.*) public/$1 [L]
> </Directory>
> 
> <Directory "C:/xampp/htdocs/www/test/public">
>     RewriteEngine On
>     RewriteCond %{REQUEST_FILENAME} !-d
>     RewriteCond %{REQUEST_FILENAME} !-f
>     RewriteRule ^(.*)$ index.php?_url=/$1 [QSA,L]
> </Directory> 
> ```

并像这样修改了我的 httpd-vhosts.conf

> ```
> ServerAdmin admin@example.host
> DocumentRoot "C:/xampp/htdocs/test/public"
> DirectoryIndex index.php
> ServerName example.host
> ServerAlias www.example.host
> 
> <Directory "C:/xampp/htdocs/test/public">
>     Options All
>     AllowOverride All
>     Allow from all
> </Directory> 
> ```

页面加载，但像 /public/css/bootstrap.min.css 这样的绝对链接不起作用，当我单击该链接时，它给我一个错误 404 并说找不到对象。我修改了这样的文件：

> ```
> <Directory "C:/xampp/htdocs/test">
>     RewriteEngine on
>     RewriteRule  ^$ public/    [L]
>     RewriteRule  (.*) public/$1 [L]
> </Directory>
> 
> <Directory "C:/xampp/htdocs/test/public">
>     RewriteEngine On
>     RewriteCond %{REQUEST_FILENAME} !-d
>     RewriteCond %{REQUEST_FILENAME} !-f
>     RewriteRule ^(.*)$ index.php?_url=/$1 [QSA,L]
> </Directory> 
> ```

和

> ```
> ServerAdmin admin@example.host
> DocumentRoot "C:/xampp/htdocs/test"
> DirectoryIndex index.php
> ServerName example.host
> ServerAlias www.example.host
> 
> <Directory "C:/xampp/htdocs/test">
>     Options All
>     AllowOverride All
>     Allow from all
> </Directory> 
> ```

但这给我带来了最初的问题，即当我单击链接时，它会再次加载 index.phtml，即使它在 URL 中显示 localhost:8005/sample 也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:22:04.523

看起来您的 Apache 配置不允许读取 .htaccess 文件：

```
<VirtualHost *:80>

    ServerAdmin admin@localhost
    ServerName phalcon.test

    DocumentRoot /srv/htdocs/sites/test        

    <Directory "/srv/htdocs/sites/test">
        AllowOverride All
        Options All
        Order allow,deny
        Allow from all
    </Directory>

</VirtualHost> 
```

此外，在您的 public/index.php 顶部检查 $_GET['_url'] 是否已将 URI 传递给您的浏览器

# c - 如何创建具有 JOB_OBJECT_SECURITY_ONLY_TOKEN 安全限制的 JobObject？

> ID：13453885
> 
> 赞同：0
> 
> 时间：2012-11-19T12:30:53.407
> 
> 标签：c, windows

有人可以帮我吗？我正在尝试创建一个作业对象，`JOB_OBJECT_SECURITY_ONLY_TOKEN`但`SetInformationJobObject`总是失败，错误代码为 6（无效句柄）。这是我的代码：

```
HANDLE Job( CreateJobObject( NULL, NULL ) );
if( !Job )
{
    wprintf( L"Could not create job object, error %d\n", GetLastError() );
    return 1;
}

JOBOBJECT_SECURITY_LIMIT_INFORMATION SecLimit = { 0 };
SecLimit.SecurityLimitFlags = JOB_OBJECT_SECURITY_ONLY_TOKEN;

if ( !SetInformationJobObject( Job, JobObjectSecurityLimitInformation, &SecLimit, sizeof( SecLimit ) ) )
{
    wprintf( L"Could not associate job with IO completion port, error %d\n", GetLastError() );
    return 1;
} 
```

我正在尝试在 XP 上运行这个应用程序！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:19:16.040

您尚未设置`SecLimit.JobToken`受限令牌的有效句柄。这就是您收到无效句柄错误的原因。如果使用`JOB_OBJECT_SECURITY_ONLY_TOKEN`标志，`SecLimit.JobToken`则为强制性。

除非出于某些特殊原因需要强制作业中的进程使用受限令牌，否则不要使用 JOB_OBJECT_SECURITY_ONLY_TOKEN 标志。

请注意，您引用的文章实际上并没有说这个标志是必需的。它只是说*如果*您使用此标志，则必须暂停创建进程才能将其分配给作业对象。

# python - 不能强制 django-celery 尊重 settings.py 中的设置

> ID：13453890
> 
> 赞同：1
> 
> 时间：2012-11-19T12:31:15.697
> 
> 标签：python, django, settings, celery, django-celery

这是我的 settings.py 的摘录：

```
BROKER_URL = "amqp://guest@localhost:6000//" 
```

后

```
python manage.py celeryd 
```

芹菜启动良好，显示：

```
 -------------- celery@karol-toshiba v3.0.12 (Chiastic Slide)
---- **** ----- 
--- * ***  * -- [Configuration]
-- * - **** --- . broker:      amqp://guest@localhost:5672//
- ** ---------- . app:         default:0xb6d01acc (.default.Loader)
- ** ---------- . concurrency: 2 (processes)
- ** ---------- . events:      OFF (enable -E to monitor this worker)
- ** ---------- 
- *** --- * --- [Queues]
-- ******* ---- . celery:      exchange:celery(direct) binding:celery
--- ***** ----- 
```

如何强制它使用指定的“BROKER_URL”设置？最终我希望它使用'django://'后端网址。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:11:33.840

确保您没有使用设置 BROKER_TRANSPORT、BROKER_PORT 或 BROKER_BACKEND。BROKER_URL 应该足够了。

# java - 用ZXing创建二维码是否有非法字符？

> ID：13453891
> 
> 赞同：0
> 
> 时间：2012-11-19T12:31:18.053
> 
> 标签：java, encoding, base64

我尝试使用 ZXing 创建一个 QR 条码生成器。我想在二维码中编码一个 mecode 对象：http: [//www.nttdocomo.co.jp/english/service/developer/make/content/barcode/function/application/addressbook/index.html](http://www.nttdocomo.co.jp/english/service/developer/make/content/barcode/function/application/addressbook/index.html)

我有这个代码

```
 bitMatrix = writer.encode(mecard, BarcodeFormat.QR_CODE, 300, 300);
        BufferedImage img = MatrixToImageWriter.toBufferedImage(bitMatrix);

        ByteArrayOutputStream os = new ByteArrayOutputStream();
        OutputStream b64 = new Base64.OutputStream(os);
        ImageIO.write(img, "png", b64);
        String result = os.toString("UTF-8"); 
```

在创建文本和 url 时生成正确的输出。但是当我尝试编码时`"MECARD:N:Doe,John;TEL:(+32) 472 65 58 20;TEL:(+32) 2 577 50 68;EMAIL:John@iCompany.com;;"` ，它给出了一个无效的 Base64 字符串。是否有一些编码器无法处理的非法字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:55:20.340

问题出在 MECARD 规范中。MECARD 只允许一个电话部分。我想用两个。就是这样

# scala - 卡斯巴的 Mongo $elemMatch

> ID：13453893
> 
> 赞同：3
> 
> 时间：2012-11-19T12:31:24.487
> 
> 标签：scala, mongodb, intellij-idea, casbah

我正在使用 Casbah 2.9.2

我的 mongodb 架构如下所示：

[_id：“三角形”，信息：[颜色：“红色”，线条：“细”，UseID：“1”，SourceId：“2”]]

我希望能够编写一个更新行，首先检查 _id、Color 和 Line 是否一起唯一，如果是，则更新 UseID 和 SourceID，否则创建一个新的“Info”条目。这让我从命令行得到了我想要的东西：

```
db.shapes.update( { _id : 'Triangle', Info : { $not : { $elemMatch : { Color : 'Red', Line : 'Thick' } } } }, { $push : { Info : { Color : 'Red', Line : 'Thick', UseID : '2', SourceId : '3' } } }, true) 
```

给我这个条目：

```
[ _id : "Triangle", Info : [ { Color : "Red", Line : "Thin", UseID : "1", SourceId : "2" }, { Color : "Red", Line : "Thick", UseID : "2", SourceId : "3" } ] ] 
```

但是，当我为 Scala 翻译成 Casbah 时，它不会：

```
shapesCollection.update( { "_id" -> shape, "Info" $not { _ $elemMatch { "Color" -> color, "Line" -> line } } }, { $push -> { "Info" -> { "Color" -> color, "Line" -> line, "UseId" -> useId, "SourceId" -> srcId } } }, true ) 
```

第一个抱怨（来自 IntelliJ）是它希望所有的 ',' 都是 ';'，我觉得这是不正确的，但为了调试，我必须这样做，这让我想到了第二个错误：

“错误：(java.lang.String, java.lang.String) => com.mongodb.casbah.query.Imports.DBObject 没有可用的隐式视图。涉及默认参数的应用程序中发生错误。“信息”$not { _ $elemMatch {"

所以我想问题是，我什至可以从 Casbah 的命令行进行更新吗？如果是这样，怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:22:34.687

所以对于任何关心的人，首先我的更新字符串有点偏离，如果“颜色”和“线条”不存在但“_id”存在，它会抛出错误。基本上，它看起来像 $push 和不安，因为 true 不会添加到现有的“_id”，所以当它尝试添加条目时我得到了重复的键错误。但是，这没有实际意义，我想要做的真正解决方案是不使用 Casbah，而是使用 MongoDB Java 驱动程序。然后我可以让 $elemMatch 做我想做的事。

这也可能是我的问题的一部分，因为我走了一条不同的路线，我没有机会测试它：

“如果你真的觉得需要将 ++ 与 DSL 和裸匹配混合使用，我们为 -> 元组对提供附加支持。你应该首先调用查询运算符：”

```
val qMix = ("baz" -> 5) ++ ("foo" $gte 5) ++ ("x" -> "y")
/* error: value ++ is not a member of (java.lang.String, Int)
   val qMix = ("baz" -> 5) ++ ("foo" $gte 5) ++ ("x" -> "y") */ 
```

该操作符与 DSL 操作符的结果相链接（偶然正确地返回了一个 DBObject）：

```
val qMix = ("foo" $gte 5) ++ ("baz" -> 5) ++ ("x" -> "y")
/* qMix: com.mongodb.casbah.commons.Imports.DBObject =
   { "foo" : { "$gte" : 5} , "baz" : 5 , "x" : "y"} */ 
```

来自：[http ://api.mongodb.org/scala/casbah/current/tutorial.html](http://api.mongodb.org/scala/casbah/current/tutorial.html)

# magento - 使用 magmi 将项目/类别导入 magento 时，不会出现立即购买按钮

> ID：13453896
> 
> 赞同：1
> 
> 时间：2012-11-19T12:31:49.600
> 
> 标签：magento, import, magmi

我设法制作了一个 csv，它使用 magmi 将我的产品导入我的 magento 商店。一切正常，但除非我转到产品并单击保存，否则不会出现立即购买按钮。我已经尝试重新索引或清除缓存，但似乎没有任何效果。任何进一步的想法。

我正在使用最新的 magento/magmi。

谢谢理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:31:39.167

在导入器中检查重新索引器和动态索引器。这似乎可以解决问题！理查德

# actionscript-3 - actionscript 透明 textinput 背景

> ID：13453899
> 
> 赞同：1
> 
> 时间：2012-11-19T12:32:03.063
> 
> 标签：actionscript-3, background, transparent, textinput

经过数小时的搜索，我成功地将字体颜色设置为黄色，但我仍然无法弄清楚如何使 textinput 的背景透明:(（我将它拖出组件窗口）我的代码有什么问题？

```
var tf:TextFormat = new TextFormat();
tf.size = 10;
tf.color = 0xFFF000;
nameField.setStyle("textFormat", tf);

nameField.alpha = 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:27:38.343

TextInput 有样式**contentBackgroundAlpha**和**contentBackgroundColor**。

```
nameField.setStyle("contentBackgroundAlpha", 0); 
```

PS 如果你使用 FLEX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:23:01.690

`nameField.background = false;`你应该检查文档。

如以下示例

```
var input:TextField = new TextField();
input.textColor = 0xFFFF00;
input.background = false;
input.backgroundColor = 0x000000;//this is to show that the background is not visible - you can put any colour other than SWF's background:)
input.type = TextFieldType.INPUT;

addChild(input); 
```

# objective-c - 奇怪的内存泄漏？NSURLConnection 和 NSMutableData 对象

> ID：13453911
> 
> 赞同：0
> 
> 时间：2012-11-19T12:32:59.810
> 
> 标签：objective-c, ios, memory-management, nsurlconnection

我有 NSURLConnection 从 URL 下载 PNG 文件。这是代码：

```
-(void)connection:(NSURLConnection *)theConnection didReceiveData:(NSData *)incrementalData {
    if (data==nil) { data = [[NSMutableData alloc] initWithCapacity:2048]; }
    [data appendData:incrementalData];
}

-(void)connectionDidFinishLoading:(NSURLConnection*)theConnection {
    [self saveItLocal];
    connection = nil;
    data = nil;
}

-(void)saveItLocal {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
    NSString *docs = [paths objectAtIndex:0];
    NSString* path =  [docs stringByAppendingFormat:[NSString stringWithFormat:@"/%@.png",self.downloadType]];
    NSData* imageData = [NSData dataWithData:UIImagePNGRepresentation([UIImage imageWithData:data])];
    NSError *writeError = nil;
    [imageData writeToFile:path options:NSDataWritingAtomic error:&writeError];

    if(writeError!=nil) {
        NSLog(@"%@: Error saving image: %@", [self class], [writeError localizedDescription]);
    }

    [[NSNotificationCenter defaultCenter] postNotificationName:@"readyWithGraphics" object:self];

    imageData = nil;

} 
```

![在此处输入图像描述](../Images/e58b97cc05f314f731afc72356abc535.png)

为什么这个对象仍然存在并存在于记忆中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:44:48.977

您不需要显式地将 NSURLConnection 对象设为 nil，因为它会在不再需要时由框架自动释放。

消除

```
connection=nil; 
```

编辑：抱歉，我没有看到您使用 ivar 来保持连接。这不是通常的做法。你为什么要把它和你的对象一起保留？只需创建它并启动它，正如我上面所说，它会在时间到时自动发布，但绝对不要将其设为 ivar，除非你有很好的理由。

# oracle - 主明细表

> ID：13453915
> 
> 赞同：0
> 
> 时间：2012-11-19T12:33:04.247
> 
> 标签：oracle, oracle-apex, master-detail

我使用 Apex 4.1.0.00.32 和 Oracle 数据库 11gR2。我创建主详细信息表单。在主表单（订单）中，我有一个字段（关闭订单日期）表明订单已关闭。在详细表格（订单项目）中，我有字段关闭项目的日期，指示关闭单个项目的日期。当所有日期关闭项目都被填充时如何创建验证检查日期关闭订单是否为空并显示一些消息？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:09:48.167

我解决了访问 Apex_application.g_fXX 值的问题。创建验证类型函数返回错误文本。感谢 Polppan 的努力。

# jquery - ui选项卡设置开始选项卡

> ID：13453917
> 
> 赞同：0
> 
> 时间：2012-11-19T12:33:05.180
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog, jquery-ui-tabs

我的 ui 标签有问题。我在模态ui上使用它。当我第一次显示模态时，一切都很好，但是当我关闭模态并重新打开它时，我遇到了问题。当我重新打开它时，我不知道如何将索引选项卡设置为 0。

我尝试在事件 ui 选项卡模式下使用选择选项，但它不起作用。

我测试过的代码

```
$("#dialogAdd").dialog({
  height: 'auto',
  width: 'auto',
  modal: true,
  autoOpen: false,
  resizable: false,
  open: function () {
    $('#tab').tabs('select', 0);
  }
}); 
```

我测试选项卡事件显示、打开和设置， `$('#tab').tabs('select', 0);`但它不起作用。每次显示带有选项卡的对话框时，我都必须将选择设置为 0 索引

我使用 JQueryUI 1.8.23

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:53:24.987

您应该将此代码添加到打开选项卡的函数中（而不仅仅是在创建它时）。

```
$("#dialogAdd").tabs("select", 0); 
```

# mongodb - 更新文件清单

> ID：13453918
> 
> 赞同：0
> 
> 时间：2012-11-19T12:33:05.600
> 
> 标签：mongodb, mongodb-query

有没有办法更新（或删除）许多符合特定条件的文档并获取实际更新/删除的文档（或这些文档的某些其他字段）的 ID 列表？我不能简单地事先查询符合我的条件的文档，因为我需要这个操作的原子性。而且我不能使用 findAndModify 因为它一次只能处理一个文档，因为往返太慢了。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:47:52.320

MongoDB 仅支持对单个文档的原子操作。
[http://www.mongodb.org/display/DOCS/Atomic+Operations](http://www.mongodb.org/display/DOCS/Atomic+Operations)

做到这一点的唯一方法是做你说你没有做的事情：

首先查询集合以查找我们查询的 id：

```
db.things.find({"name":"john"}, {_id:1}); 
```

然后，使用相同的查询删除：

```
db.things.remove({"name":"john"}, {_id:1}); 
```

不理想，也不是原子的，但它和你在这种情况下得到的一样好。

# wcf - 如何让 WCF 客户端签名 SecurityTokenReference：参考

> ID：13453921
> 
> 赞同：2
> 
> 时间：2012-11-19T12:33:14.777
> 
> 标签：wcf, digital-signature, bea

我需要创建一个调用 bea webservice 的 WCF 客户端。

我不断从网络服务收到此响应：

**无法使用任何受支持的令牌类型验证签名**

所以我把注意力转向了客户端<->服务通信的签名部分：

来自网络服务的部分 wsdl：

```
<s0:Policy s1:Id="Sign.xml">
<wssp:Integrity xmlns:wls="http://www.bea.com/wls90/security/policy/wsee#part"
                xmlns:wssp="http://www.bea.com/wls90/security/policy"
                xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <wssp:SignatureAlgorithm URI="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
  <wssp:CanonicalizationAlgorithm URI="http://www.w3.org/2001/10/xml-exc-c14n#"/>
  <wssp:Target>
    <wssp:DigestAlgorithm URI="http://www.w3.org/2000/09/xmldsig#sha1"/>
    <wssp:MessageParts Dialect="http://www.bea.com/wls90/security/policy/wsee#part"> 
    wls:SystemHeaders()
  </wssp:MessageParts>
  </wssp:Target>
  <wssp:Target>
    <wssp:DigestAlgorithm URI="http://www.w3.org/2000/09/xmldsig#sha1"/>
    <wssp:MessageParts Dialect="http://www.bea.com/wls90/security/policy/wsee#part"> 
    wls:SecurityHeader(wsu:Timestamp)
  </wssp:MessageParts>
  </wssp:Target>
  <wssp:Target>
    <wssp:DigestAlgorithm URI="http://www.w3.org/2000/09/xmldsig#sha1"/>
    <wssp:MessageParts Dialect="http://schemas.xmlsoap.org/2002/12/wsse#part">
  wsp:Body()
  </wssp:MessageParts>
  </wssp:Target>
  <wssp:SupportedTokens>
    <wssp:SecurityToken 
      IncludeInMessage="true" 
      TokenType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3">
      <wssp:TokenIssuer>REMOVED</wssp:TokenIssuer>
    </wssp:SecurityToken>
  </wssp:SupportedTokens>
</wssp:Integrity>
<wssp:MessageAge Age="60" xmlns:wssp="http://www.bea.com/wls90/security/policy"/> 
```

从 wsdl 我了解到我必须签名：

1.  SystemHeaders（我真正的问题）
2.  时间戳（做了那个）
3.  正文（做到了，并且还对其进行了加密）

我有生产这种肥皂的工作代码（使用 microsoft.web.services3）：

```
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
    <SignedInfo>
      <ds:CanonicalizationMethod 
        Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"
        xmlns:ds="http://www.w3.org/2000/09/xmldsig#" />
      <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
      <Reference URI="#Timestamp-fc23bf88-381b-4f2b-b992-ff07b41b5c38"> <!--This is the timestamp-->
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
        <DigestValue>Removed</DigestValue>
      </Reference>
      <Reference URI="#Id-4b4f1377-eac0-4db0-b334-384d7b14e286"> <!--This is the encrypted body-->
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
        <DigestValue>Removed</DigestValue>
      </Reference>
      <Reference URI="#SecurityToken-dcb8a392-5907-4432-80c6-cbe8f29a6117"> <!--This is the SecurityTokenReference:Reference-->
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
        <DigestValue>Removed</DigestValue>
      </Reference>
    </SignedInfo>
    <SignatureValue>Removed</SignatureValue>
    <KeyInfo>
      <wsse:SecurityTokenReference>
        <wsse:Reference 
          URI="#SecurityToken-dcb8a392-5907-4432-80c6-cbe8f29a6117" 
          ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" />
      </wsse:SecurityTokenReference>
    </KeyInfo>
  </Signature>
</wsse:Security>
</soap:Header>
<soap:Body wsu:Id="Id-4b4f1377-eac0-4db0-b334-384d7b14e286">
<xenc:EncryptedData 
 Id="Enc-8b5b4ef4-1c12-409b-8159-dec2889a8fa8" 
 Type="http://www.w3.org/2001/04/xmlenc#Content" 
 xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
  <xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc" />
  <xenc:CipherData>
    <xenc:CipherValue>Removed<xenc:CipherValue>
  </xenc:CipherData>
</xenc:EncryptedData>
</soap:Body> 
```

我已承诺使用 WCF 完成这项工作，因此 microsoft.web.services3 不是一个选项。对不起。

我已经使用 svcutil 创建了代理。没有汗水。我手动对代理所做的唯一更改是我已附加

```
, ProtectionLevel = System.Net.Security.ProtectionLevel.EncryptAndSign 
```

到 System.ServiceModel.ServiceContractAttribute

我当前的代码产生这个标志部分：

```
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
    <SignedInfo>
      <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
      <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
      <Reference URI="#_1"> <!--This is the body-->
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>Removed</DigestValue>
      </Reference>
      <Reference URI="#uuid-e7f22d2b-5a91-421a-aced-df7ab8a92f8d-1"> <!--This is the timestamp-->
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>Removed</DigestValue>
      </Reference>
    </SignedInfo>
    <SignatureValue>Removed</SignatureValue>
    <KeyInfo>
      <o:SecurityTokenReference>
        <o:Reference 
          ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" 
          URI="#uuid-3b0e28b3-d47f-4eb2-ab0a-77f94dd76af0-2"/>
      </o:SecurityTokenReference>
    </KeyInfo>
  </Signature>
</o:Security>
</s:Header>
<s:Body u:Id="_1" 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
      xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <e:EncryptedData 
  Id="_2" 
  Type="http://www.w3.org/2001/04/xmlenc#Content" 
  xmlns:e="http://www.w3.org/2001/04/xmlenc#">
  <e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc"/>
  <e:CipherData><e:CipherValue>Removed</e:CipherValue></e:CipherData>
</e:EncryptedData>
</s:Body>
</s:Envelope> 
```

从我的 app.config：

```
 <system.serviceModel>
    <bindings>
      <customBinding>
        <binding name="testBinding">
          <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16" 
                               messageVersion="Soap11" writeEncoding="utf-8">
            <readerQuotas maxDepth="32" maxStringContentLength="8192" 
                          maxArrayLength="16384" maxBytesPerRead="4096" 
                          maxNameTableCharCount="16384"/>
          </textMessageEncoding>
          <httpTransport manualAddressing="false" maxBufferPoolSize="524288" 
                         maxReceivedMessageSize="65536" allowCookies="false" 
                         authenticationScheme="Anonymous" bypassProxyOnLocal="false" 
                         hostNameComparisonMode="StrongWildcard" keepAliveEnabled="true" 
                         maxBufferSize="65536" proxyAuthenticationScheme="Anonymous" 
                         realm="" transferMode="Buffered" 
                         unsafeConnectionNtlmAuthentication="false" useDefaultWebProxy="true"/>
        </binding>
      </customBinding>
    </bindings>
    <client>
      <endpoint address="http://url.com/testservice/testservicePort" binding="customBinding" 
                bindingConfiguration="testBinding" 
                contract="testservicePortType" 
                name="testservicePort"/>
    </client>
  </system.serviceModel> 
```

我在这样的代码中配置 CustomBinding：

```
 private static CustomBinding CreateCustomBinding()
    {
        var customBinding = new CustomBinding();

        SecurityBindingElement securityBindingElement = SecurityBindingElement.CreateMutualCertificateBindingElement(
                MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10);

        AsymmetricSecurityBindingElement asymmetricSecurityBindingElement =
            (AsymmetricSecurityBindingElement)securityBindingElement;

        asymmetricSecurityBindingElement.SetKeyDerivation(false);

        asymmetricSecurityBindingElement.EnableUnsecuredResponse = true;

        asymmetricSecurityBindingElement.AllowInsecureTransport = true;
        asymmetricSecurityBindingElement.AllowSerializedSigningTokenOnReply = true;

        asymmetricSecurityBindingElement.DefaultAlgorithmSuite = SecurityAlgorithmSuite.TripleDesRsa15;

        asymmetricSecurityBindingElement.IncludeTimestamp = true;
        asymmetricSecurityBindingElement.MessageProtectionOrder = MessageProtectionOrder.SignBeforeEncrypt;
        asymmetricSecurityBindingElement.RequireSignatureConfirmation = false;

        asymmetricSecurityBindingElement.SecurityHeaderLayout = SecurityHeaderLayout.LaxTimestampFirst;

        customBinding.Elements.Clear();

        customBinding.Elements.Add(asymmetricSecurityBindingElement);

        customBinding.Elements.Add(new TextMessageEncodingBindingElement()
        {
            MessageVersion = MessageVersion.CreateVersion(EnvelopeVersion.Soap11,
            AddressingVersion.None),
            WriteEncoding = new System.Text.UTF8Encoding()
        });

        HttpTransportBindingElement httpbinding = new HttpTransportBindingElement();
        httpbinding.AuthenticationScheme = AuthenticationSchemes.Anonymous;
        httpbinding.MaxReceivedMessageSize = 1024 * 1024;
        customBinding.Elements.Add(httpbinding);
        return customBinding;
    } 
```

我试图了解 microsoft.web.services3 代码中发生了什么（我还没有写过），似乎作者完全重写了 securityheader。这似乎不是最好的解决方案（但也许是唯一的？）

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:50:52.437

终于想通了:-)

用过这个帖子：

[如何使 WCF 客户端符合特定的 WS-Security - 签署 UsernameToken 和 SecurityTokenReference](https://stackoverflow.com/questions/12832213/how-to-make-wcf-client-conform-to-specific-ws-security-sign-usernametoken-and)

在我写上面的问题之前已经阅读了好几遍（因此标题非常相似），并且真的不明白为什么它应该起作用。但确实如此！

我的自定义绑定现在看起来像这样：

```
System.ServiceModel.Channels.AsymmetricSecurityBindingElement 
  asymmetricSecurityBindingElement = new AsymmetricSecurityBindingElement();
asymmetricSecurityBindingElement.MessageSecurityVersion = 
          MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;

asymmetricSecurityBindingElement.InitiatorTokenParameters = new
  System.ServiceModel.Security.Tokens.X509SecurityTokenParameters 
    { InclusionMode = SecurityTokenInclusionMode.Never };
asymmetricSecurityBindingElement.RecipientTokenParameters = new
  System.ServiceModel.Security.Tokens.X509SecurityTokenParameters
    { InclusionMode = SecurityTokenInclusionMode.Never };
asymmetricSecurityBindingElement.MessageProtectionOrder =
  System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt;

asymmetricSecurityBindingElement.SecurityHeaderLayout = SecurityHeaderLayout.LaxTimestampFirst;
asymmetricSecurityBindingElement.EnableUnsecuredResponse = true;
asymmetricSecurityBindingElement.IncludeTimestamp = true;

asymmetricSecurityBindingElement.SetKeyDerivation(false);
asymmetricSecurityBindingElement.DefaultAlgorithmSuite = 
  System.ServiceModel.Security.SecurityAlgorithmSuite.TripleDesRsa15;

asymmetricSecurityBindingElement.EndpointSupportingTokenParameters.Signed.Add(
  new X509SecurityTokenParameters());

customBinding.Elements.Clear();
customBinding.Elements.Add(asymmetricSecurityBindingElement); 
```

# javascript - 动态添加和删除时间选择器到输入字段

> ID：13453924
> 
> 赞同：0
> 
> 时间：2012-11-19T12:33:30.957
> 
> 标签：javascript, jquery, html, css

我正在使用时间选择器以 15 分钟的间隔选择时间。我使用[此链接](http://fgelinas.com/code/timepicker/)中的时间选择器。

我无法使用 onclick 函数将时间选择器添加到输入文本字段。这是我想要实现的一些示例代码。请帮我解决这个问题。

## 索引.html

```
<link rel="stylesheet" href="include/jquery-ui-1.8.14.custom.css" type="text/css" />
<link rel="stylesheet" href="jquery.ui.timepicker.css?v=0.3.0" type="text/css" />
<script type="text/javascript" src="include/jquery-1.5.1.min.js"></script>
<script type="text/javascript" src="include/jquery.ui.core.min.js"></script>
<script type="text/javascript" src="jquery.ui.timepicker.js?v=0.3.0"></script>
<style type="text/css">
  .st{}
  .et{}
  #bod { font-size: small; margin:0px 0px 0px 0px; }
  body{font-size:10px;}
  ......
  <div id="bod">
    <input type="text"  id="timepicker_start1" value="" class="st"/>
    <input type="text"  id="timepicker_end1" value=""  class="et"/>
  </div>
  <input type="button" id="Add" name="Add" value="Add" onClick="add()" />
  <input type="hidden" id="tot" name="tot" value="1"/>
  ... 
```

页面的javascript部分是：

```
<script type="text/javascript">
  function add(){
    var tot=document.getElementById("tot").value;
    tot=parseInt(tot,10);
    var i=tot+1;
    $('#bod').append(i+".   ");
    var s=$('<input/>').attr({type:'text',id:'timepicker_start'+i}).addClass('st').appendTo("#bod");
    var s1=$('<input/>').attr({type:'text',id:'timepicker_end'+i}).addClass('et').appendTo("#bod");
    $('#bod').append("  ");
    $('#timepicker_start'+i).timpicker({showLeadingZero: true, defaultTime: '', minutes:{interval:15}});
    $('#timepicker_end'+i).timpicker({showLeadingZero: true, defaultTime: '', minutes:{interval:15}});
    document.getElementById("tot").value=i;
  }
  $(document).ready(function(e) {
    $('#timepicker_start1').timpicker({showLeadingZero: true, defaultTime: '', minutes:{interval:15}});
    $('#timepicker_end1').timpicker({showLeadingZero: true, defaultTime: '', minutes:{interval:15}});
  });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:46:49.573

你有一个错字：`timepicker`不是`timpicker`. 除此之外你很好 - 脚本正在运行 - [http://jsfiddle.net/FNww8/](http://jsfiddle.net/FNww8/)

# android - 如何将对象附加到多维列表

> ID：13453925
> 
> 赞同：1
> 
> 时间：2012-11-19T12:33:33.730
> 
> 标签：android, python, list, sl4a

> **可能重复：**
> [Python 列表混淆](https://stackoverflow.com/questions/5957341/python-list-confusion)

这是一个关于 python 列表的问题。（我的编程环境是带有python的SL4A）

我想要一个输入数字“n”的列表。

```
[ ['a'] , [] , [] , [] ] # (this example is the list when n =4)    <- the list I want 
```

所以，我在下面写了一个源代码。

```
n = input()
array = [[]]*n
array[0].append('a')
print array 
```

但是，我不能得到上面的输出，但也能得到一个列表......

```
[ ['a'], ['a'], ['a'], ['a'] ] #  <- wrong list 
```

所以，我有两个问题。

1.  请告诉我一个源代码，它给我一个我想要的列表。
2.  为什么源代码给了我错误的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:37:13.657

你应该使用

```
array = [[] for x in range(n)] 
```

否则，您将获得 4 个对*同一*列表的引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:44:44.543

当你这样做

```
array = [[]]*n 
```

您将获得一个包含 n 个相同链接的列表。这就是为什么当您编辑其中一个元素时，您会编辑每个元素。要摆脱这个，只需使用类似这样的东西

```
for i in range(0, 4):
    array1.append([])
    array2+=[] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:23:22.913

### 蟒蛇3.2：

```
n = input()
array = [[] for i in range(n)]
array[0].append('a')
print array 
```

# iphone - 使用 VoiceOver 支持盲人时如何选择项目？

> ID：13453928
> 
> 赞同：0
> 
> 时间：2012-11-19T12:33:50.783
> 
> 标签：iphone, ios, select, accessibility, voiceover

我在我的一个应用程序中使用 VoiceOver，并希望让盲人更容易使用它。

加载视图控制器时，会显示一个滚动视图，其中包含多个文本视图。我想在打开我的视图控制器时自动选择第一个文本视图。是否有解决这些需求的方法？

我正在使用导航控制器和标签栏控制器。目前画外音首先选择后退按钮，但我想选择另一个 UI 部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:23:44.377

自动开始编辑第一个 UITextView 的简单解决方案是将其放入 ViewDidLoad 方法中：

```
[textView becomeFirstResponder]; 
```

确保您已经设置了 UITextView 协议和委托，这应该可以工作。

# c# - 关于纸牌游戏的建议

> ID：13453931
> 
> 赞同：2
> 
> 时间：2012-11-19T12:33:56.867
> 
> 标签：c#, winforms

我忙于玩“自制”纸牌游戏只是为了好玩，但我想我把自己逼到了一个角落，也许希望得到一些建议。

简而言之，将卡片拖放到不同的位置，我单击要向上移动的卡片（显示在图片框中）并将可见性设置为 false 并将卡片值添加到 ArrayList（名为 picFaceUpToBeMoved）。

我单击第二张卡片，然后当然根据某些条件，卡片将显示在我现在单击的卡片上方。我创建了一个 PictureBox 控件的实例，用于设置大小和位置。

```
PictureBox picOneFaceUpA = new PictureBox();
picOneFaceUpA.Location = new Point(42, 202);
picOneFaceUpA.Width = 90;
picOneFaceUpA.Height = 120;
picOneFaceUpA.Image = Image.FromFile("../../Resources/" + picFaceUpToBeMoved[0] + ".png");
Controls.Add(picOneFaceUpA);
picOneFaceUpA.BringToFront(); 
```

我现在遇到的问题是如何移动这张卡，因为它没有`onClick`事件。抱歉，有点缺乏经验，希望获得有关如何克服此问题或如何以不同方式处理此游戏的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:48:26.347

尝试将事件处理程序添加到`MouseClick`.

更多文档可以在这里找到：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseclick.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseclick.aspx)

并查看所有其他可用的事件，您可以使用`MouseDown`, `MouseMove`,`MouseUp`等进行拖动。

可在此处找到可用事件列表：http: [//msdn.microsoft.com/en-us/library/1dk48x94.aspx](http://msdn.microsoft.com/en-us/library/1dk48x94.aspx)

# javascript - node.js javascript mysql查询等待unitl下一行被插入

> ID：13453932
> 
> 赞同：4
> 
> 时间：2012-11-19T12:33:56.907
> 
> 标签：javascript, mysql, node.js

有什么方法可以停止对 mysql 表的 javascript 查询并等到插入下一行？

例如使用函数：

```
var query = connection.query('SELECT * FROM table'); 
```

我想读取表中的所有行，显示它们并等待插入下一行，读取插入的行并等待插入其他行，依此类推...

基本上它应该读取每次其他表从 PHP 或其他脚本（触发事件）更新时更新的表。

我在javascript mysql查询中找不到有关光标滑动的任何信息也许有一些关于它的文章？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T02:36:52.187

你可以像这样轮询答案，因为我从来没有使用过 mysql 库作为 node 的 api。

**行计数间隔**
var connection = ..., lastCount;

```
funciton mysqlPoll() {
    var query = connection.query('SELECT count(field) as count FROM table');

    query.exec(function(result) {
        if (result.count != lastCount) {
            //Select all the rows here using offset to skip the already processes
            //process them
            lastCount = result.count;
        }
    });
}

setInterval(mysqlPoll, 500); //every 1/2 second 
```

**如果您有一个主要的自动递增键间隔，那就更好了**

```
var connection = ...,
    lastCount = 0;

funciton mysqlPoll() {
    var query = connection.query('SELECT * FROM table WHERE primaryId > '+lastCount);

    query.exec(function(result) {
        if (result.count != lastCount) {
            //Select all the rows here using offset to skip the already processes
            //process them
            lastCount = lastResultsPrimaryId;
        }
    });
}

setInterval(mysqlPoll, 500); //every 1/2 second 
```

另一种选择是在 node.js 上打开一个套接字（net、http 等）并从 php 脚本 ping 它以触发更新。

希望有帮助

# ubuntu - 使用 SDL 工作时腻子中的“Init kbd”

> ID：13453934
> 
> 赞同：1
> 
> 时间：2012-11-19T12:34:00.003
> 
> 标签：ubuntu, sdl, putty

我正在尝试执行一些具有 SDL_Event 的代码。

我在 VMware 上使用 Ubuntu CLI，然后代码工作正常，但是当我尝试使用 putty 执行代码时，它给了我一条消息“init kbd”。

代码能够在 VMPlayer 中执行，但面临 putty 的问题。

在这两种情况下，我都是 ROOT 用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:44:40.437

通常 SDL 需要一个 X11 窗口来输入事件。

在您的 VM 主机上安装 X 服务器并使用 PuTTY 中的 X-forwarding 来启动您的 SDL 程序。

# android - 禁用和启用后退按钮

> ID：13453936
> 
> 赞同：2
> 
> 时间：2012-11-19T12:34:02.403
> 
> 标签：android

在应用程序中，我正在使用 gps 查找用户位置。在异步预执行方法中，我显示了一个 toast。我希望在我显示 toast 时，应该禁用后退按钮

找到位置后，我想在执行后启用后退按钮！

禁用我使用的后退按钮。但这不起作用

```
 OnKeyListener mainScreenKeyListener = new OnKeyListener() {
                @Override
                public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {
                    boolean disableEvent = false;
                    if (event.getKeyCode()==KeyEvent.KEYCODE_BACK) {
                        disableEvent = true;
                    }

                    return disableEvent;
                }
            }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:43:10.070

`disableEvent`您可以通过以下方式声明全局变量

```
final boolean disableEvent; 
```

您的`Preexecute`方法可以将其设置`false`为

```
disableEvent = false; 
```

您的`Postexecute`方法可以将其设置`true`为

```
disableEvent = true; 
```

您可以覆盖 onBackPressed，如下所示：

```
@Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        if (disableEvent)
        {
            // do nothing
        }
        else
        {
            // do something
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:47:38.857

干得好

分配一个静态变量。在 onPreExecute 中将其值设置为“NO”。在 onPostExecute 中将其值分配给“YES”。

并在您的 onBackPressed 中编写以下代码。

```
 @Override
    public void onBackPressed() {

       if (decision.equals("NO")) {  //Here no means dont allow user to go back

       } else {
           super.onBackPressed(); // Process Back key  default behavior. 
       }

   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:44:28.777

嗨，禁用您只需调用上述函数

```
public void onBackPressed()
        {
         } 
```

启用

```
 public void onBackPressed()
    {
        super.onBackPressed();
        super.finish(); 
        //Intent
    }
 if you want both set flag inside the function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:44:22.737

在您的活动中覆盖 onBackPress 方法

```
Class A
{
    public static boolean isToastShown=false;

    @Override
        public void onBackPressed() {
               if(isToastShown==true)
                 return false;
               else
                 super.onBackPressed();

             }

}

@Override
    protected void onPreExecute() {
        super.onPreExecute();
           //Show your toast here
           A.isToastShown=true;

new CountDownTimer(2000,2000) {

            @Override
            public void onTick(long millisUntilFinished) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onFinish() {
                A.isToastShown=false;

            }
        }.start();

      } 
```

# xml - 两个 XML 文档 xpath xslt 映射

> ID：13453938
> 
> 赞同：0
> 
> 时间：2012-11-19T12:34:03.903
> 
> 标签：xml, xslt, xpath

已经尝试了几个小时让这个工作，但我一定错过了一些东西。

我想通过两个文档中的 id 将两个 XML 文档映射在一起。我可以使用一个 XSLT 从两个文档中获取数据输出，但我不知道如何映射它们。

第一个xml：

```
...
<member>
  <id>1</id>
  <name>John</name>
</member>
<member>
  <id>2</id>
  <name>Otto</name>
</member>
... 
```

第二个xml：（ss命名空间）

```
...
<row>
  <cell ss:Type="String">id</cell>
  <cell ss:Type="String">Number 1</cell>
  <cell ss:Type="String">Number 2</cell>
</row>
<row>
  <cell ss:Type="Number">1</cell>
  <cell ss:Type="Number">1231312313</cell>
  <cell ss:Type="Number">234234234342</cell>
</row>
<row>
  <cell ss:Type="Number">2</cell>
  <cell ss:Type="Number">4353453453</cell>
  <cell ss:Type="Number">345345345455</cell>
</row>
... 
```

我遍历 XSLT 文件中的 name 和 id 元素，在这个循环中，我试图使用应用模板获取映射到第二个 xml 中的 id 的值。

最终的 HTML 输出应该类似于：

```
Id      Name          Number 1         Number 2
1       John          1231312313       234234234342
2       Otto          4353453453       345345345455 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:23:02.113

我用调用模板“函数”解决了它，并将 id 的值作为参数传递。然后使用 for-each 和 if 语句在第二个文件中选取“数字”标签值。有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:35:57.063

也许以下可以作为起点：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0" xmlns:ss="NS:SS">

  <xsl:template match="/">
    <html>
      <table>
        <xsl:apply-templates/>
      </table>
    </html>
  </xsl:template>

  <xsl:template match="*">
    <xsl:apply-templates/>
  </xsl:template>

  <xsl:template match="ss:row">
    <tr>
      <xsl:apply-templates/>
    </tr>
  </xsl:template>

  <xsl:template match="ss:cell">
    <td><xsl:value-of select="."/></td>
  </xsl:template>

  <xsl:template match="ss:cell[1]">
    <xsl:variable name="id" select="string()"/>
    <td><xsl:value-of select="$id"/></td>
    <!-- Especially for large amounts of data, making use of key() would be better than "//" 
         The key() call can be wrapped inside a <xsl:for-each select="document('firstDocument.xml')>
         that changes the context to the other document -->
    <td><xsl:value-of select="document('firstDocument.xml')//member[id=$id]/name"/></td>
  </xsl:template>
</xsl:stylesheet> 
```

这必须适用于您所谓的第二个文档。使用该`document()`函数调用第一个文档。

正如 Martin Honnen 指出的那样，使用`key()`会更好（特别是如果您有大型数据集）。请参阅有关在 XSLT 1.0 中包装调用 to 以使其工作的`key()`评论`<xsl:for-each>`。

# asp.net - ASP.NET 如何获取 HttpException 错误代码

> ID：13453939
> 
> 赞同：2
> 
> 时间：2012-11-19T12:34:05.267
> 
> 标签：asp.net, httpexception

我正在尝试捕获和处理特定的 HttpException，即“远程主机关闭了连接。错误代码是 0x800704CD。”

我的目的是将 HttpException 的 Catch 添加到相关的 Try 块中，并测试生成的错误代码。示例代码：

```
Try
    // Do some stuff
Catch exHttp As HttpException
    If exHttp.ErrorCode.ToString() = "0x800704CD" Then DoSomething()
Catch ex As Exception
    // Generic error handling
End Try 
```

但我不知道如何从 HttpException 对象中提取异常中显示的错误代码（即“0x800704CD”）。将 ErrorCode 属性的整数值转换为十六进制会返回“800704CD”，所以很明显我不明白这个代码是如何生成的。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:51:35.413

**试试下面的代码：**

```
 Try
    // Do some stuff
        Catch exHttp As HttpException
            If exHttp.ErrorCode = &H800704CD Then DoSomething()
        Catch ex As Exception
    // Generic error handling
        End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T17:29:45.520

ErrorCode 属性是一个整数，所以只测试整数值，没有理由转换为十六进制或字符串。

大多数编程语言中的 0x 表示后面的字符表示一个十六进制数，即 0x800704CD 表示 800704CD 将被解释为一个十六进制数。对于 VB 使用 &H。

有关 VB.Net 文字的更多信息：

[http://msdn.microsoft.com/en-us/library/s9cz43ek.aspx](http://msdn.microsoft.com/en-us/library/s9cz43ek.aspx)

[http://msdn.microsoft.com/en-us/library/dzy06xhf.aspx](http://msdn.microsoft.com/en-us/library/dzy06xhf.aspx)

# .net - 双向绑定只读属性

> ID：13453947
> 
> 赞同：0
> 
> 时间：2012-11-19T12:34:40.860
> 
> 标签：.net, wpf, data-binding

我在模型对象上有一个只读属性，但想双向绑定它。当绑定源应该更新时，我希望更新被“重定向”到一个单独的方法，该方法插入我们的控制器基础结构以执行更新并生成一个具有 change 属性的新模型。简单地在只读属性上使用绑定并向`Binding.TargetUpdated`事件添加处理程序不起作用（抛出 InvalidOperationException，指定属性应该是只读的）。

有一个简单的解决方案（创建模型的副本，具有为我执行重定向的读写属性），但我真的不想复制所有模型对象。有没有办法以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:06:03.013

此解决方案基于自定义标记扩展，它为某些依赖属性设置了双向绑定。绑定使用某种具有可写属性的包装器作为源。包装器调用基础结构代码以在属性更改后更新并生成新模型。

下面是硬编码场景的例子，但我认为这个想法很清楚。

```
namespace MyApp
{

public class MyModel
{
    //readonly property
    public string Name { get; private set; }

    public MyModel(string name)
    {
        Name = name;
    }
}

public class MyViewModel
{
    public MyModel Model { get; set; }

    public MyViewModel()
    {
        Model = new MyModel("default");
    }
}

public class Wrapper
{
    public MyViewModel ViewModel { get; set; }

    //writable property to enable two-way binding
    public object Value
    {
        get
        {
            return ViewModel.Model.Name;
        }
        set
        {
            //call your infrastructure method to 
            //update and generate new model
            ViewModel.Model = new MyModel((string)value);
        }
    }
}

[MarkupExtensionReturnType(typeof(Object))]
public class CustomBinding : MarkupExtension
{
    //you can add any properties here for your infrastructure method call
    //public string PropertyName { get; set; }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        var provideValueTarget = serviceProvider.GetService(typeof(IProvideValueTarget)) as IProvideValueTarget;
        var binding = new Binding()
        {
            //get whatever you need from target element to setup the binding and wrapper
            Source = new Wrapper()
            {
                ViewModel = (provideValueTarget.TargetObject as FrameworkElement).DataContext as MyViewModel
            },
            Path = new PropertyPath("Value")
        };
        var result = binding.ProvideValue(serviceProvider);
        return result;
    }
}

} 
```

XAML

```
<StackPanel>
    <StackPanel.DataContext>
    <MyApp:MyViewModel />
    <StackPanel.DataContext>
    <TextBox Text="{MyApp:CustomBinding}" />
<StackPanel /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:40:21.347

如果不绑定到新的中间对象，我认为您不会逃脱。有些人可能称之为视图模型。我想知道自定义是否`IValueConverter`能够根据您的需要拦截写入操作`ConvertBack`，但我有理由相信，如果源属性不可写，绑定系统甚至不会尝试调用转换器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:28:18.893

我找到了一个解决方案`ExpandoObject`- 给定一个只读模型对象，这会在运行时生成一个读写模型，每当任何属性发生变化时都会调用控制器方法：

```
public static dynamic GetAdapterFor(IController controller, object modelObj)
{
    if (modelObj == null)
        return null;

    ExpandoObject obj = new ExpandoObject();

    // add all the properties in the model
    foreach (var prop in modelObj.GetType().GetProperties())
    {
        ((IDictionary<string, object>)obj).Add(prop.Name, prop.GetValue(modelObj, null));
    }

    // add the handler to update the controller when a property changes
    ((INotifyPropertyChanged)obj).PropertyChanged += (s, e) => UpdateController(controller, e.PropertyName, ((IDictionary<string, object>)s)[e.PropertyName]);

    return obj;
}

private static void UpdateController(IController controller, string propertyName, object propertyValue)
{
    controller.SetPropertyValue(propertyName, propertyValue);
} 
```

# ruby - 在跨度类的html中解析类名

> ID：13453948
> 
> 赞同：1
> 
> 时间：2012-11-19T12:34:43.773
> 
> 标签：ruby, watir, watir-webdriver

我正在检查值的结果以验证它们是否正确。

使用 Watir-webdriver。

在这种情况下，javascript 会生成一个颜色类：

例如：

```
<span class="storyEdit limeGreen"> x </span> 
```

在 ruby​​ 中，目前我正在尝试解析来自 using .html 的信息

所以这就像我到目前为止所解析的

```
=> <span class=\"storyEdit limeGreen\"> x </span> 
```

我只想返回limeGreen，所以我可以说：

```
color = resultOfParsedSpan 
```

这将适用于几种不同的颜色，所以我想知道有没有办法只从 html 中提取类名？

如果我解释得不够好，请随时告诉我，以便我添加更多信息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:26:40.720

Watir 让您直接执行此操作；您不需要自己手动解析 HTML。该`Element#class_name`方法将为您提供元素的类。

示例（假设它是第一个跨度）：

```
browser.span.class_name
#=> "storyEdit limeGreen" 
```

从那里，您必须解析字符串以找出它是什么颜色。鉴于这些类可能按任何顺序排列并且可能有无数种可能的颜色，我不相信有一种通用的方法来获取颜色。解决方案将取决于您想要做什么`color`以及是否提前知道可能的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:51:44.150

好吧，一个快速的方法是这样的：

```
span = '<span class="storyEdit limeGreen"> x </span>'
color = $1.split.last if span =~ /class="(.*)"/ 
```

但通常最好使用一些 html 解析库来处理这类事情，比如`nokogiri`或`hpricot`

# d - D 中的 Ada 风格范围类型

> ID：13453949
> 
> 赞同：3
> 
> 时间：2012-11-19T12:34:49.547
> 
> 标签：d, compile-time, compile-time-constant, range-types

在阅读[了这篇](http://www.drdobbs.com/cpp/ada-style-ranged-types-in-c/201001318?pgno=1)关于 Ada 和 C++ 的有趣文章并了解了 D 对 CTFE 和函数的常量参数专业化的支持之后，我想知道在 D 中是否可以比在 C++ 中更容易/更有效地实现 Ada 样式范围类型。有没有人可能已经写过这样的图书馆？

如果这样的范围可以在 D 中有效地实现并且对开发人员友好，它可以用作在需要确定性以及类型和内存安全性（D 已经大放异彩）的领域（例如航空电子和汽车）建立 D 的推动者。D 将因此获得更多开发者的兴趣和更强大的财务支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:43:42.793

将标量（有界）变量作为模板在 D 中很容易完成，事实上我记得我看到了有人已经做过的代码。不幸的是，我不记得我在哪里看到的。这就是说，恕我直言，它没有必要成为语言的一部分，而是标准库的一部分。

（**编辑：**亚当让我想起了代码：[http](http://arsdnet.net/dcode/ranged.d) ://arsdnet.net/dcode/ranged.d ）

范围是更广泛的概念，在 Andrei 的文章中得到了很好的解释 - [http://www.informit.com/articles/printerfriendly.aspx?p=1407357&rll=1](http://www.informit.com/articles/printerfriendly.aspx?p=1407357&rll=1)。这种类型的范围现在是 D 的核心概念。D 的切片是最强大的范围 - *RandomAccessRange*的实现。

例子：

```
import std.stdio;
import std.algorithm;

void main()
{
    int[] values = [ 1, 20, 7, 11 ]; // values is a RandomAcessRange
    writeln(filter!(value => value > 10)(values));
} 
```

好读：

1.  [http://ddili.org/ders/d.en/ranges.html](http://ddili.org/ders/d.en/ranges.html)
2.  [http://www.drdobbs.com/architecture-and-design/component-programming-in-d/240008321](http://www.drdobbs.com/architecture-and-design/component-programming-in-d/240008321)
3.  [http://dlang.org/phobos/std_range.html](http://dlang.org/phobos/std_range.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T18:14:57.283

我写了一些小代码，通过溢出检查来计算整数的最小值和最大值：

[http://arsdnet.net/dcode/ranged.d](http://arsdnet.net/dcode/ranged.d)

虽然这只是一个概念证明，我怀疑它会表现得很好，但如果内联的话可能会。

# mootools - Mootools FloatingTips 和数组

> ID：13453952
> 
> 赞同：0
> 
> 时间：2012-11-19T12:34:56.507
> 
> 标签：mootools, tooltip, floating

我正在尝试使用带有数组的 Mootools 浮动提示来显示 ID 的链接和 ID 的内容。

演示在[这里](http://jsfiddle.net/artefact/rUpUY/)，我正在尝试将它用于 ID0 ID1 ID2 的几个提示，如[本例所示](http://jsfiddle.net/artefact/3xDFs/)。

这个想法是创建一个`for`循环：

```
var x = 0;

    for (x=0; x++) {

    var divIDs = "#advanced" + x + "a'";
    var content = "$('htmlcontent" + x + "')"

    new FloatingTips(divIDs, {

    content: function() { return content; },

    html: true,    
    });

} 
```

任何帮助，将不胜感激！

格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:10:36.040

您是否需要使用 ID 数组？我建议最好在所有提示容器和内容元素上设置一个类，这应该意味着您只需要创建一个`FloatingTips()`. 例如：

```
<div class="tipContainer">
    <p>A second tip</p>
    <p><a href="#">Let me see!</a></p>

    <div class="tipContent" style="display: none;">
        <p>Here is another tip.</p>
    </div>    
</div>

<div class="tipContainer">
    <p>A second tip</p>
    <p><a href="#">Let me see!</a></p>

    <div class="tipContent" style="display: none;">
        <p>Here is another tip.</p>
    </div>    
</div> 
```

更新后的调用`FloatingTips`将包含对 HTML 中设置的 tipContainer 和 tipContent 类的更新引用。拉取内容的功能已稍作更改，以便它在具有“tipContent”类的元素中查找内容。

```
new FloatingTips('.tipContainer', {

    // Content can be a string (an attribute name) or a function.
    // If it's a function, it can returns string or HTML elements.
    content: function(tipContainer) { 
        return $(tipContainer).getElement('.tipContent'); 
    },

    html: true,        // I want that content is interpreted as HTML
    center: false,     // I do not want to center the tooltip
    arrowOffset: 16,   // Arrow is a little more the the right
    offset: { x: 10 }, // Position offset {x, y}
    position: 'bottom',    
}); 
```

这是一个实际的例子 - [http://jsfiddle.net/pH3BB/1/](http://jsfiddle.net/pH3BB/1/)

希望这可以帮助！

克雷格

# c# - using 块是否使对象保持活动状态？

> ID：13453953
> 
> 赞同：2
> 
> 时间：2012-11-19T12:35:05.797
> 
> 标签：c#, using, object-lifetime

对于某些单元测试，我想将 CurrentCulture 设置为特定的文化（然后稍后反转这些更改）。由于我需要在几个地方这样做，我正在考虑编写一个 CultureChanger 类，它保存旧文化并在其构造函数中设置新文化，然后在处理过程中重置旧文化。

然后我可以这样使用它：

```
using(new CultureChanger(culture)){  
    //some code and assertions with no references to the CultureChanger 
} 
```

如果我这样做了，CultureChanger 是否有可能在 using 块完成之前被清理掉？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T12:38:10.887

`CultureChanger``using`在块“完成”之前不会被清理。

该`using`块以与方法相同的方式定义对象的范围。

无法保证在块执行后对象*何时*会被垃圾回收，但之前不会发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:41:52.323

[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)提供了一种方便的语法，可确保正确使用 IDisposable 对象。

using 语句以正确的方式调用对象的 Dispose 方法，并且（当您如前所示使用它时）它还会导致对象本身在调用 Dispose 时立即超出范围。在 using 块中，对象是只读的，不能修改或重新分配。

> using 语句可确保调用 Dispose，即使在调用对象上的方法时发生异常也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:44:39.633

CultureChanger 实例将在整个 using 块中保持“活动”状态，并且其 Dispose 方法将在 using statemnet 的右花括号 '}' 上调用。因此，您的问题的答案是：CultureChanger 没有被清理的风险。

# c# - MonoMac NSWorkspace.RecycleUrls 与 recycleURLs:completionHandler

> ID：13453957
> 
> 赞同：1
> 
> 时间：2012-11-19T12:35:38.353
> 
> 标签：c#, cocoa, monomac

根据[MonoMac 文档](http://docs.go-mono.com/index.aspx?link=M%3AMonoMac.AppKit.NSWorkspace.RecycleUrls%28MonoMac.Foundation.NSDictionary%2CMonoMac.AppKit.NSWorkspaceUrlHandler%29)，签名为`NSWorkspace.RecycleUrls`：

```
[MonoMac.Foundation.Export("recycleURLs:completionHandler:")]
public virtual void RecycleUrls (MonoMac.Foundation.NSDictionary urls, NSWorkspaceUrlHandler completionHandler) 
```

根据[Apple的`NSWorkspace`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)签名文档`recycleURLs:completionHandler`是：

```
- (void)recycleURLs:(NSArray *)URLs completionHandler:(void (^)(NSDictionary *newURLs, NSError *error))handler 
```

我有一组要回收的 URL。

在这里我很难过 - Apple 文档说第一个参数是 an`NSArray`但 MonoMac 想要一个`NSDictionary`. 构造所需`NSDictionary`键*和*值的所有功能（不出所料），而我只有*values*。

除了采用 MonoMac 的实现`RecycleUrls`（在下面转载）并将其重写为使用`NSArray`?

```
[Export("recycleURLs:completionHandler:")]
public unsafe virtual void RecycleUrls(NSDictionary urls, NSWorkspaceUrlHandler completionHandler)
{
    if (urls == null)
    {
        throw new ArgumentNullException("urls");
    }
    if (completionHandler == null)
    {
        throw new ArgumentNullException("completionHandler");
    }
    BlockLiteral blockLiteral = default(BlockLiteral);
    blockLiteral.SetupBlock(NSWorkspace.static_InnerNSWorkspaceUrlHandler, completionHandler);
    if (this.IsDirectBinding)
    {
        Messaging.void_objc_msgSend_IntPtr_IntPtr(base.Handle, NSWorkspace.selRecycleURLsCompletionHandler_, urls.Handle, (IntPtr)((void*)(&blockLiteral)));
    }
    else
    {
        Messaging.void_objc_msgSendSuper_IntPtr_IntPtr(base.SuperHandle, NSWorkspace.selRecycleURLsCompletionHandler_, urls.Handle, (IntPtr)((void*)(&blockLiteral)));
    }
    blockLiteral.CleanupBlock();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T01:09:39.080

Mono 的绑定不正确，我更改了两者并`NSWorkspace.RecycleUrls()`取而代之`NSWorkspace.DuplicateUrls()`，`NSArray`monomac[提交 b1eda57](https://github.com/mono/monomac/commit/b1eda576d8f36cd8ae65fce8d18ff0697cb95a5e)。`NSDictionary`

这是生成的代码：

```
 [Export ("recycleURLs:completionHandler:")]
    public unsafe virtual void RecycleUrls (NSArray urls, NSWorkspaceUrlHandler completionHandler)
    {
        if (urls == null)
            throw new ArgumentNullException ("urls");
        if (completionHandler == null)
            throw new ArgumentNullException ("completionHandler");
        BlockLiteral *block_ptr_completionHandler;
        BlockLiteral block_completionHandler;
        block_completionHandler = new BlockLiteral ();
        block_ptr_completionHandler = &block_completionHandler;
        block_completionHandler.SetupBlock (static_InnerNSWorkspaceUrlHandler, completionHandler);

        if (IsDirectBinding) {
            MonoMac.ObjCRuntime.Messaging.void_objc_msgSend_IntPtr_IntPtr (this.Handle, selRecycleURLsCompletionHandler_, urls.Handle, (IntPtr) block_ptr_completionHandler);
        } else {
            MonoMac.ObjCRuntime.Messaging.void_objc_msgSendSuper_IntPtr_IntPtr (this.SuperHandle, selRecycleURLsCompletionHandler_, urls.Handle, (IntPtr) block_ptr_completionHandler);
        }
        block_ptr_completionHandler->CleanupBlock ();

    }

    [Export ("duplicateURLs:completionHandler:")]
    public unsafe virtual void DuplicateUrls (NSArray urls, NSWorkspaceUrlHandler completionHandler)
    {
        if (urls == null)
            throw new ArgumentNullException ("urls");
        if (completionHandler == null)
            throw new ArgumentNullException ("completionHandler");
        BlockLiteral *block_ptr_completionHandler;
        BlockLiteral block_completionHandler;
        block_completionHandler = new BlockLiteral ();
        block_ptr_completionHandler = &block_completionHandler;
        block_completionHandler.SetupBlock (static_InnerNSWorkspaceUrlHandler, completionHandler);

        if (IsDirectBinding) {
            MonoMac.ObjCRuntime.Messaging.void_objc_msgSend_IntPtr_IntPtr (this.Handle, selDuplicateURLsCompletionHandler_, urls.Handle, (IntPtr) block_ptr_completionHandler);
        } else {
            MonoMac.ObjCRuntime.Messaging.void_objc_msgSendSuper_IntPtr_IntPtr (this.SuperHandle, selDuplicateURLsCompletionHandler_, urls.Handle, (IntPtr) block_ptr_completionHandler);
        }
        block_ptr_completionHandler->CleanupBlock ();

    } 
```

快速测试：

```
 void TestUrls ()
    {
        var path = Path.GetTempFileName ();
        Console.WriteLine ("TEST: {0} {1}", path, File.Exists (path));

        var array = new NSMutableArray ();
        var url = new NSUrl ("file://" + path);
        array.Add (url);

        var workspace = NSWorkspace.SharedWorkspace;
        workspace.DuplicateUrls (array, (urls, error) => {
            Console.WriteLine ("DUPLICATED: {0} {1}", urls, error);
            array.Add (urls.Values [0]);

            workspace.RecycleUrls (array, (urls2, error2) => {
                Console.WriteLine ("RECYCLED: {0} {1} {2}",
                                   urls2, error2, File.Exists (path));
            });
        });
    } 
```

# jsf - JSF 中复合组件的动态 ID

> ID：13453958
> 
> 赞同：1
> 
> 时间：2012-11-19T12:35:48.797
> 
> 标签：jsf, jsf-2, composite-component

我在我的复合 JSF 组件中创建了一个链接：

```
<h:link id="menu-abc" outcome="/abc" value="ABC" /> 
```

该链接不在表单内。但是，当我查看呈现的 HTML 代码时，有一个动态生成的 ID 作为我的 ID 的前缀：

```
<a id="j_idt33_menu-abg" name="j_idt33_abv" href="abc.xhtml">ABC</a> 
```

我无法找出这个动态 id 的来源。有任何想法吗？

ps：我们将分隔符从 : 更改为 _

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:40:40.253

这些症状表明您*实际上*根本没有自定义组件，而是一个复合组件，并且您出于某种原因将`NamingContainer`分隔符从`:`更改为。`_`

复合组件本身就是[命名容器](http://docs.oracle.com/javaee/6/api/javax/faces/component/UINamingContainer.html)，并在其所有子组件的 ID 前面加上自己的 ID。原因很简单，因为它们可以在一个视图中多次重复使用。如果复合组件自己的 ID 未添加到前面，则会导致组件树中出现重复的 ID。

在*真正的*自定义组件中，您可以完全控制客户端 ID。

### 也可以看看：

*   [何时使用 <ui:include>、标记文件、复合组件和/或自定义组件？](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen/6822269#6822269)— 这并不能完全回答您的问题，但这至少概述了具体的差异；您错误地将复合组件称为自定义组件。

# java - 如何禁用添加时区

> ID：13453960
> 
> 赞同：0
> 
> 时间：2012-11-19T12:35:53.470
> 
> 标签：java, android, timezone, simpledateformat

我进行下一个操作：

将设备上的时区设置为 GMT+0400（不是来自代码）

创建新日期

和打印时间 (SimpleDateFormat) - 以毫秒为单位

得到 11-19 19:16:40.920: I/System.out(30070): TEST TIME:1353330825273 TIME:19.11

当我在设备上更改我的 timeZone 到 GMT+0600 并且现在用毫秒创建日期 1353330825273

日期 myDate=新日期（1353330825273L）；

但是当我再次打印时间时，我得到了 11-19 19:17:00.920: I/System.out(30070): TEST TIME:1353330825273 TIME:21.11

时间格式字符串为：k:mm

为什么？如何禁用时区修改我的时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T12:39:23.527

它与格式有关，而不是时区，但如果您想禁用时区，请执行以下操作：

```
SimpleDateFormat sdf = new SimpleDateFormat(format);
sdf.setTimeZone(TimeZone.getTimeZone("GMT"));
return sdf.format(date); 
```

这会将您的时区设置为 GMT/UTC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:44:42.487

有关详细信息，请参阅[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)的javadoc 中的示例部分：

```
SimpleDateFormat sdf = new SimpleDateFormat("hh:mm:ss a"); 
```

以上将为您提供 12 小时格式的输出。以下是各种格式的详细列表：

![在此处输入图像描述](../Images/12f8fc3267a37df98226d036f19ec639.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:41:52.703

我认为您的时间格式不是时区有问题。用于`K`以上午/下午显示小时数并`a`显示上午/下午标记。

```
SimpleDateFormat sdf = new SimpleDateFormat("KK:mm:ss a"); 
```

# r - 如何从函数访问包变量？

> ID：13453969
> 
> 赞同：1
> 
> 时间：2012-11-19T12:36:23.287
> 
> 标签：r, scope

如何从同一个包中的函数访问包变量？

以下代码仅对`x`函数进行本地更改。我怎样才能改变`myPackage::x`那个功能？

例子：

```
x <- list()
populate_list <- function() {
    x["a"] <- 4
} 
```

--

这是我用来测试的完整代码`get`。`cache`每次运行包时，只需选择不同的密钥即可。这是包代码，在`R/get_obj.R`

```
cache <- list()
test_cache <- function(){
    cache <- get("cache")
    cache[[paste(sample.int(10),collapse="-")]] <- 1
    return(cache)
} 
```

我在 R 中测试它：

```
> library(devtools)
> load_all("mypackage")
Loading mypackage
> mypackage::test_cache()
$`4-1-6-5-9-3-10-2-7-8`
[1] 1

> mypackage::test_cache()
$`6-9-7-10-5-1-4-2-3-8`
[1] 1

> mypackage::cache
list() 
```

对于`mypackage::cache`第二次运行`mypackage::test_cache()`，我希望这个列表作为输出：

```
$`4-1-6-5-9-3-10-2-7-8`
[1] 1

$`6-9-7-10-5-1-4-2-3-8`
[1] 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T15:26:38.913

操作员在父环境中`<<-`搜索现有定义，所以下面给出了我想要的：

```
x <- list()
populate_list <- function() {
    x["a"] <<- 4
} 
```

或者对于另一个例子：

```
cache <- list()
test_cache <- function(){
    cache[[paste(sample.int(10),collapse="-")]] <<- 1
    return(cache)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:49:04.687

看一下[get方法](http://stat.ethz.ch/R-manual/R-devel/library/base/html/get.html)。它允许您直接从特定环境中提取变量，而不是依赖于当前方法的词法范围。

[环境](http://stat.ethz.ch/R-manual/R-devel/library/base/html/environment.html)的文档应该有助于使这个论点更加清晰，尽管在不了解场景的情况下很难识别确切的语法。

一般来说，如果您知道您希望在全局范围内访问它们，那么通过在本地范围内定义变量来隐藏它们并不是一个好主意。

# jquery - jQuery - 从冒泡中获取第一个项目。冒泡时获取冒泡顺序或id

> ID：13453971
> 
> 赞同：2
> 
> 时间：2012-11-19T12:36:45.780
> 
> 标签：jquery, event-bubbling

我的最后一个问题在这里：[获取最后点击的项目 id](https://stackoverflow.com/questions/13444997/get-last-clicked-item-id)并且有很好的答案，但我仍然有问题。

我有这样的功能：

```
$(document).ready(function () {
      $("*").click(function () {             
          alert($(this).attr('id').toString());                
    });
}); 
```

在页面上我有这样的东西：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<script language="javascript" src="Scripts/jquery-1.4.1.js" type="text/javascript"><script>
<div id="div1">Some stuff
  <div id="div2">Some other stuff
  <asp:Button ID="Button1" runat="server" Text="Button" />        
    <div id="div3">More stuff
    <asp:Button ID="Button2" runat="server" Text="Button" />        
    </div>
 </div> 
```

当 Alertbox 出现时，我可以像这样存储单击项目的值：

```
$(document).ready(function () {
  $("*").click(function (e) {             
      alert($(this).attr('id').toString());  
      var value = $(this).attr('id').toString();                
      e.stopPropagation();  //Stop Propagation            
   });
}); 
```

但问题就在这里。当我停止传播时，我的其他脚本不再触发。我能以某种方式获得气泡订单或 ID 吗？我可以做这样的事情吗？：

```
 $(document).ready(function () {
     $("*").click(function (e) {    
       if(e.target == this[0])
       {         
         alert($(this).attr('id').toString()); 
         var value = $(this)[0].attr('id').toString();             
       }
       //e.stopPropagation();  //I have to get first value from bubbling without stopPropagation     
 });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:51:21.220

顺便说一句，为什么不只是

```
$(document).ready(function(){
    var clicked;

    $('body').click(function(ev){
       clicked = ev.target.id;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:20:30.593

您可以尝试以下解决方案，这不是一个完美的解决方案，而且有点hacky但可以工作，您可以根据您的要求对其进行调整 - [JSFIDDLE IS HERE](http://jsfiddle.net/anmolsaraf/39ssx/ "JSFIDDLE")，

```
var clickArr = [], counter = 0;
$(document).ready(function () {
 $("*").click(function (e) {             

  if($(this).attr('id')) {      
  var val = $(this).attr('id').toString();
  clickArr[counter++] = val;
  }
  if(this.tagName == 'BODY') {
   val = clickArr[0];
   counter = 0;
   alert('result is ' + val);
  }
  //e.stopPropagation();  //Stop Propagation            
});
});​ 
```

希望能帮助到你 ！！

# ios - 调试区无输出

> ID：13453973
> 
> 赞同：7
> 
> 时间：2012-11-19T12:36:55.267
> 
> 标签：ios, xcode, lldb

在调试区：

```
(lldb) po myObjectName
(lldb) 
```

LLDB 对我所有的 po 或 print 查询都给出了空响应。似乎 LLDB 调试不再工作或不打印调试消息。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-19T12:36:55.267

那是一个愚蠢的。

只需在调试区域中选择**All output ，而不是****Target output**。

# jquery - Jquery 工具提示未按预期显示

> ID：13453975
> 
> 赞同：1
> 
> 时间：2012-11-19T12:36:59.837
> 
> 标签：jquery, tooltip

我正在尝试使用 div 的内容作为工具提示。我的javascript代码如下：

```
$(document).ready(function() {      
   $('.flexi').tooltip({ 
    effect: 'slide',
    tooltipSourceID:'#qwerty'         
   }); 
}); 
```

我的 html 看起来像这样：

```
<div style="position:relative;">                            
  <p><span class="flexi">Mouse Over</span></p>
  <div id="qwerty" class="tooltip flexidef">                            
     <p>This is the custom tooltip. This is the custom tooltip.</p>   
  </div>
</div> 
```

但是当我将鼠标悬停在“鼠标悬停”上时，什么也没有出现。我将上述代码基于[http://swip.codylindley.com/tooltipDemo.html](http://swip.codylindley.com/tooltipDemo.html)的示例 3 。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:55:27.103

你需要使用`tooltipSource`属性也没有像`effect`

```
$('.flexi').tooltip({ 
tooltipSourceID:'#qwerty', 
tooltipSource:'inline'
}); 
```

[演示](http://jsfiddle.net/HYyTr/1/)

​</p>

# java - 有什么方法可以在 Java 中获取一个类或实例化一个双泛型类型？

> ID：13453977
> 
> 赞同：1
> 
> 时间：2012-11-19T12:37:02.347
> 
> 标签：java, generics, factory-pattern, nested-generics

所以说我有：

```
public class Foo<T> {
  // Some stuff
}

public interface Factory<T> {
  T newInstance();
  Class<T> getKlass();
} 
```

我想实现 Factory 来构建 Foo<T>s：

```
public class FooFactory<T> implements Factor<Foo<T>> {
  private Class<Foo<T>> klass;
  public FooFactory(Class<Foo<T>> klass) {
    this.klass = klass;
  }

  public T newInstance() throws Exception {
    return klass.newInstance();
  }

  public Class<Foo<T>> getKlass() {
    return klass;
  }
} 
```

两个问题：

1.  如果我只有 Class<T>，有什么方法可以让我获得 Class<Foo<T>>？不幸的是，Foo 是一个私有类，因此唯一具有全貌（即知道 T 将是什么）的代码不知道 Foo，因此不能给我 Class<Foo<T>>。
2.  有没有更好的方法可以解决这个问题？

谢谢！

PS对于那些要求更多细节的人，我们开始吧。完整的故事是 Foo 和 FooFactory 都将是外部类中的私有类。Foo 在整个外部类中被广泛使用，为了避免虚假的垃圾收集，我想使用 ObjectPool 来实例化 Foo 的实例，而不是更新它们并让它们一直被垃圾收集。但是，为了使用我的 ObjectPool，我需要一个 Factory<Foo<T>>，并且在 Outer<T> 内部，我显然不知道实例化 Outer<T> 时 T 会是什么。

```
public class Outer<T> {
  private class Foo<T> { ... }
  private class FooFactory<T> {...}

  private ObjectPool<Foo<T>> fooPool;

  ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:44:01.993

有多种方法可以创建类型信息，`Class<Foo<T>>`但要执行您想要的操作，您只需在`FooFactory`.

在运行时，Java`Object`在您编写的所有地方都使用`T`，因此您可以简单地实例化`Foo<Object>`或`Foo.class`，它们是相同的。这称为[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。

泛型只是对编译器的提示。由于您的 API 确保使用的所有代码`FooFactory`都遵循 type `T`，因此您可以禁止警告并使用适当的强制转换，它会起作用。

注意：如果要保留类型信息，请[实现`ParameterizedType`接口](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/ParameterizedType.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:17:16.583

只有一个`Foo`类对象，它等于`Foo.class`。尽管您可以编写`Class<Foo<whatever>>`，但这有点欺骗性，因为它都是同一个`Foo`类对象。当然，您需要`Class<Foo<T>>`能够调用`newInstance()`并获得`Foo<T>`. 因此，为了解决您需要 a`Class<Foo<T>>`并且`Foo.class`具有 type的事实`Class<Foo>`，您只需进行一些转换：

```
public FooFactory() {
  this.klass = (Class<Foo<T>>)(Class<?>)Foo.class;
} 
```

请注意，我们根本不需要`Class<T>`，因为您不需要知道`T`创建一个`Foo<T>`.

# java - 静态方法和静态变量，糟糕的设计实践？

> ID：13453978
> 
> 赞同：1
> 
> 时间：2012-11-19T12:37:03.373
> 
> 标签：java, oop, static

> **可能重复：**
> [为什么静态变量被认为是邪恶的？](https://stackoverflow.com/questions/7026507/why-are-static-variables-considered-evil)

几年前在大学学习过面向对象编程和设计，我记得讲师对使用静态变量或静态方法的人非常生气，因为他们将静态描述为非常糟糕的设计。

我的理解是这种静态类型的东西，是获得全球“视野”的东西，即它可以被任何东西访问。

我的理解正确吗？是否有关于使用静态的信息使其不好用？有没有办法避免在代码中使用静态变量或方法？

顺便说一句，我知道 main 方法的静态是应用程序成功运行的先决条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:47:28.317

静态变量或方法没有任何问题。只是对于 OOP，您希望将尽可能多的行为与对象相关联，这意味着使用实例方法和变量。话虽如此，在某些特定情况下静态成员是必需的：构造函数（正如您提到的）和单例模式是很好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:47:31.433

static 主要用于在不创建类实例的情况下访问类成员。如您所知，为什么我们`public static void main()`在运行时只编写 bcoz，jvm 可以访问此方法而无需创建类对象并启动您的程序。

它取决于您的要求，即您如何使用或说如何使用访问说明符将类成员声明为私有、公共、默认和保护访问级别，而静态用于使其成为具有访问级别的静态。

如果没有静态，您必须将您的成员声明为公共的，或者如果您继承您的类，那么也将其设为受保护的。就像在同一个包中一样，您定义类然后只是静态的来继承类。对于没有继承类的使用，您需要创建该类的对象，然后您可以访问那里的成员（注意它基于访问说明符）

这是下面的链接以获取更多详细信息

[http://xahlee.info/java-a-day/access_specifiers.html](http://xahlee.info/java-a-day/access_specifiers.html)

[http://www.javabeginner.com/learn-java/introduction-to-java-access-modifiers](http://www.javabeginner.com/learn-java/introduction-to-java-access-modifiers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:58:27.110

静态变量和静态方法是完全不同的东西。

静态变量是不好的，除非它们代表某种“单例”，如果它们代表某种“单例”，那么在 OOP 中最好创建实际的单例类（特别是如果您可以使用枚举单例）。除其他外，静态变量使多线程编程变得困难，即使在单线程编程中也可以做到这一点，您“意外地”需要两个具有静态字段的类实例。

另一方面，静态方法通常很好，只要它们不访问任何静态数据，而只对它们的参数进行操作。当然，如果你注意到你有`static void MyStaticUtils.operateOnFoo(Foo foo)`，那么最好有非静态`void Foo.operate()`方法。但有时你没有为现有类添加方法的奢侈，并且必须对现有方法返回的实例进行操作，那么静态实用程序方法绝对是不错的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:54:23.647

使用静态变量的主要合法案例，并且没有其他方法可以做到这一点，是[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)。

单例的访问器方法，尤其是使用[延迟初始化](http://en.wikipedia.org/wiki/Singleton_pattern#Lazy_initialization)的访问器方法，需要静态方法。

单身人士没有什么“不好”的。

# objective-c - 以编程方式从谷歌文档中获取文件

> ID：13453979
> 
> 赞同：2
> 
> 时间：2012-11-19T12:37:09.597
> 
> 标签：objective-c, svn, google-api-objc-client

我想让用户从我的应用程序中的谷歌文档访问他/她的文档。在此之后，文件将通过将文件转换为字节来发送到 Web 服务。

我搜索了一下，发现那里有 Gdrive api，并尝试下载库并运行命令“svn checkout [http://google-api-objectivec-client.googlecode.com/svn/trunk/google-api-objectivec-](http://google-api-objectivec-client.googlecode.com/svn/trunk/)客户端只读”。但是，我收到以下错误：

指纹： ce:67:99:25:2c:ac:78:12:7d:94:b5:62:2c:31:c5:16:a6:34:73:53 (R) 弹出，接受 (t)暂时或永久地接受（p）？永久接受（p）svn：警告：错误处理'google-api-objectivec-client-read-only/Source/JSON'的外部定义：svn：警告：' [https ://github.com/stig/json的选项-framework.git/tags/v2.3.2/Classes](https://github.com/stig/json-framework.git/tags/v2.3.2/Classes) '：服务器证书验证失败：颁发者不受信任（[https://github.com](https://github.com)）

如果这些 api 允许用户从谷歌文档访问文件，请指导我？如果是，那么请帮助我消除此错误。或者，是否有任何其他方法可以帮助用户访问他/她的文件。我听说过 Dropbox api，但我的客户不喜欢它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:12:22.527

当它在终端中闪烁“指纹：ce:67:99:25:2c:ac:78:12:7d:94:b5:62:2c:31:c5:16:a6:34:73:53 ( R) 暂时拒绝、接受 (t) 或接受 (p) 永久？接受 (p) 永久“

然后在终端中输入 p（p 表示永久）。它会工作

# c# - 使用 HtmlAgilityPack 解析 rel 规范

> ID：13453980
> 
> 赞同：1
> 
> 时间：2012-11-19T12:37:12.490
> 
> 标签：c#, html-agility-pack

如何从 html 文档中解析带有 URL 的 rel="canonical" 标记？

我想在这里找到网址：

```
<link rel="canonical" href="http://stackoverflow.com/questions/2593147/html-agility-pack-make-code-look-neat" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T12:44:51.630

假设`doc`是你的`HtmlDocument`对象。

```
HtmlNodeCollection links = doc.DocumentNode.SelectNodes("//link[@rel]"); 
```

应该为您`link`提供具有`rel`属性的元素。现在迭代：

```
foreach (HtmlNode link in links)
{
    string url;
    if (link.Attributes["rel"] == "canonical") {
        url = link.Attributes["href"];
    }
} 
```

此外，可以过滤 SelectNodes 调用中的链接，以仅获取具有“规范”的链接：`doc.DocumentNode.SelectNodes("//link[@rel='canonical']");`

未经测试的代码，但你明白了:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-07T18:49:11.340

接受的答案不再正确，更新的代码如下：

```
var links = htmlDoc.DocumentNode.SelectNodes("//link[@rel]");

string canonical;

foreach (HtmlNode link in links)
{
    if (link.Attributes["rel"].Value == "canonical")
    {
        canonical = link.Attributes["href"].Value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:45:40.077

```
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(_html);

String link = (from x in doc.DocumentNode.Descendants()
           where x.Name == "link"
           && x.Attributes["rel"] != null
           && x.Attributes["rel"].Value == "canonical"
           && x.Attributes["href"] != null
           select x.Attributes["href"].Value).FirstOrDefault(); 
```

# onedrive - Skydrive API：确定当前路径的简单方法

> ID：13453982
> 
> 赞同：2
> 
> 时间：2012-11-19T12:37:14.503
> 
> 标签：onedrive

有没有办法确定与 Skydrive 目录结构相关的当前路径，例如标准文件选择器顶部显示的路径（某人的 SkyDrive > 某个文件夹 > 另一个文件夹）？

当然，我可以通过调用当前文件夹属性来递归地获取它，例如

```
GET http://apis.live.net/v5.0/file.a6b2a7e8f2515e5e.A6B2A7E8F2515E5E!126 
```

记录文件夹名称，然后对当前文件夹的 parent_id 进行类似的调用，依此类推，直到顶部。但是有没有更简单的方法可以在一次调用中获取完整路径？

# php - PHP请求数据库

> ID：13453985
> 
> 赞同：-3
> 
> 时间：2012-11-19T12:37:39.623
> 
> 标签：php, database

我在 php 中对我的数据库的硬请求被阻止了......

我想在我的页面上显示以下 10 人（姓名/姓氏）的列表： - 对 3 个问题（问题 1/问题 2/问题 3）回答了“1” - 并且在问题 4 中回答了最接近的参与人数（正面或负感）

好吧，我知道如何确定我的全球参与人数：

```
$query_count = "SELECT COUNT(*) AS Nb FROM my_table";    
$result_count = mysql_query($query_count) or die(mysql_error());

while($row = mysql_fetch_array($result_count)){
    echo "Participations :  ". $row['Nb'];
    echo "<br />";
    $count = $row['Nb']; // i create a $count var for next steps 
```

然后我知道如何在表中显示请求：

```
$query = "SELECT id,name,surname FROM my_table ORDER BY id"; 
$result = mysql_query($query);

// Recuperation des resultats
while($row = mysql_fetch_row($result)){
        $id = $row[0];
        $name = $row[1];
        $surname = $row[2];

        echo "<tr>\n
        <td>$id</td>\n
        <td>$name</td>\n
        <td>$surname</td>\n
        </tr>\n";

    } 
```

但在我的 $query 中，我不知道怎么说：显示 10 行 WITH name,surname AND answer=1 to question1,2and3 AND question4 更接近参与人数（更少、相等或更多）

你有想法吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:54:13.090

您问题的第一部分是基本的：`WHERE answer IN (1,2,3)`在您进行适当的加入之后。由于我没有您的完整架构，因此无法提供具体信息，但这是一个粗略的示例：

> SELECT u.user_name_first, u.user_name_last FROM 用户 u LEFT JOIN 回答 ON u.user_id = a.user_id WHERE a.answer_id IN (1,2,3);

后半段很模糊。请澄清您所说的“接近参与人数（更少、相等或更多）”是什么意思。

# java - 保存页面网站

> ID：13453986
> 
> 赞同：0
> 
> 时间：2012-11-19T12:37:39.960
> 
> 标签：java

帮助做这样的事情，我们有一个文本文件，有很多不同网站的链接（每个链接 rasolozhena 一个新行，它们以[http://test.com](http://test.com)的形式写），你需要走在Java程序上将这些站点的所有页面链接并保存在文件夹C：//test中，并以html格式保存这些页面的名称与标签中的名称相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:15:54.393

正如您在问题中描述的那样，这是从 txt 文件中读取 URL 并写入另一个文件的代码。

```
public static void main(String[] args) {
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new FileReader(new File("urlList.txt")));
        String url = reader.readLine();
        int i = 0;
        while (url != null) {
            try {
                getContent(url, i);
            } catch (IOException io) {
                System.out.println(io);
            }
            i++;
            url = reader.readLine();
        }

    } catch (IOException io) {
        System.out.println(io);
    } finally {
        if (reader != null) {
            try {
                reader.close();
            } catch (IOException e) {
                // nothing
            }
        }
    }
}

private static void getContent(String url, int index)
        throws MalformedURLException, IOException {
    URL pageUrl;
    URLConnection conn = null;

    pageUrl = new URL(url);
    conn = pageUrl.openConnection();

    conn.connect();

    InputStreamReader in = new InputStreamReader(conn.getInputStream());
    BufferedReader reader = new BufferedReader(in);
    String htmlFileName = "file_content_" + index + ".txt";
    FileWriter fWriter = new FileWriter(htmlFileName);
    BufferedWriter bWriter = new BufferedWriter(fWriter);
    String urlData = null;
    while ((urlData = reader.readLine()) != null) {
        bWriter.write(urlData);
        bWriter.newLine();
    }
    bWriter.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:29:15.793

```
public class URLReader
{
      public static void main(String[] args)
      {
           try
                  {
                    URL pageUrl;
                    URLConnection conn = null;

                    pageUrl = new URL("https://www.google.ru/");
                    conn = pageUrl.openConnection();

                    conn.connect();

                    InputStreamReader in = new InputStreamReader(conn.getInputStream());
                    BufferedReader reader = new BufferedReader(in);
                    String htmlFileName = "C:\\hello.html";
                    FileWriter fWriter = new FileWriter(htmlFileName);
                    BufferedWriter bWriter = new BufferedWriter(fWriter);
                    String urlData = null;
                    while ((urlData = reader.readLine()) != null)
                    {
                          bWriter.write(urlData);
                          bWriter.newLine();
                    }
                    bWriter.close();
              }
              catch(IOException io)
              {
                   System.out.println(io);
              }
      }
} 
```

@Victor这是一个开始，您可以改进代码，一切都像我在问题中描述的那样？请

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T14:34:37.667

我前段时间问过类似的问题：[Reading website's contents into string](https://stackoverflow.com/questions/5867975/reading-websites-contents-into-string)

您可以将其复制到 some 中，而不是将其读入字符串`FileOutputStream`。Apache Commons 中有一个很好的功能`IOUtils`：

```
copy(InputStream input, OutputStream output) 
Copy bytes from an InputStream to an OutputStream. 
```

[http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html)

如果你也想在你的页面上下载图片和其他文件，你最好使用一些库。

当然，如果你正在学习，你可以自己实现。正则表达式可用于查找 HTML 文件中的图像链接。

# php - 按时间排序文件夹php

> ID：13453987
> 
> 赞同：-1
> 
> 时间：2012-11-19T12:37:39.900
> 
> 标签：php, subdirectory, dir

此代码显示文件夹列表。

如何按时间对这些文件夹进行排序（上次更改）？

```
function folderlist(){
  $startdir = './';
  $ignoredDirectory[] = '.'; 
  $ignoredDirectory[] = '..';
   if (is_dir($startdir)){
       if ($dh = opendir($startdir)){
           while (($folder = readdir($dh)) !== false){
               if (!(array_search($folder,$ignoredDirectory) > -1)){
                 if (filetype($startdir . $folder) == "dir"){
                       $directorylist[$startdir . $folder]['name'] = $folder;
                       $directorylist[$startdir . $folder]['path'] = $startdir;
                   }
               }
           }
           closedir($dh);
       }
   }
return($directorylist);
}

$folders = folderlist();
    foreach ($folders as $folder){
    $path = $folder['path'];
    $name = $folder['name'];

echo '<li><a href="' .$path .'index.php?imgdir=' .$name . '" class="style1"><font face="Tahoma" class="ws8"><B>' . $name . '</B></a><br /></li>';
  }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:08:21.053

您必须包含`filemtime()`在您`$directoryList[]`的数组中，然后按 mtime 对数组进行排序。

```
function cmp_mtime_reverse($a, $b) {
    if ($a['mtime'] == $b['mtime'])
        return 0;

    if ($a['mtime'] > $b['mtime'])
        return -1;

    return 1;
}

function folderlist() {
    $startdir = './';
    $ignoredDirectory[] = '.'; 
    $ignoredDirectory[] = '..';
    if (is_dir($startdir)) {
        if ($dh = opendir($startdir)) {
            while (($folder = readdir($dh)) !== false) {
                if (!(array_search($folder,$ignoredDirectory) > -1)) {
                    if (filetype($startdir . $folder) == "dir") {
                        $mtime = filemtime($startdir . $folder);
                        $directorylist[$startdir . $folder]['name'] = $folder;
                        $directorylist[$startdir . $folder]['path'] = $startdir;
                        $directorylist[$startdir . $folder]['mtime'] = $mtime;
                        $directorylist[$startdir . $folder]['files'] = count_files($startdir . $folder);
                    }
                }
            }

            closedir($dh);
        }
    }

    uasort($directorylist, 'cmp_mtime_reverse');
    return $directorylist;
} 
```

有关更多信息，请参阅[排序数组](http://php.net/manual/en/array.sorting.php)和[文件时间。](http://www.php.net/manual/de/function.filemtime.php)

计算文件夹内的文件

```
function count_files($startdir) {
    $ignoredDirectory[] = '.'; 
    $ignoredDirectory[] = '..';
    $n = 0;
    if ($dh = opendir($startdir)) {
        while (($file = readdir($dh)) !== false) {
            if (!(array_search($file, $ignoredDirectory) > -1)) {
                $n++;
            }
        }

        closedir($dh);
    }

    return $n++;
} 
```

然后在你的函数中添加一个条目`folderlist()`

```
$directorylist[$startdir . $folder]['files'] = count_files($startdir . $folder); 
```

# asp.net - 如何在 ASP.NET 中为 ValidatorCalloutExtender 创建皮肤？

> ID：13453988
> 
> 赞同：3
> 
> 时间：2012-11-19T12:37:42.300
> 
> 标签：asp.net, validation

基于本文底部的建议

[http://forums.asp.net/t/1436066.aspx/1](http://forums.asp.net/t/1436066.aspx/1)

我认为我应该能够为 ASP.NET 中的 AJAX 控件 ValidatorCalloutExtender 创建一个皮肤。但是，当我尝试这样做时，我的 ASPX 页面会警告我

```
Element 'cc1:ValidatorCalloutExtender' is missing required attribute 'runat'. 
```

runat="server" 是在皮肤中定义的，所以看起来好像没有应用皮肤。我的皮肤文件是

```
~/App_Themes/DM_standard/ValidatorCalloutExtender.skin 
```

我在同一个主题/文件夹中有另一个皮肤，用于 GridViews，效果很好。

在 system.web 下的 web.config 我有

```
pages theme="DM_standard" 
```

在我有的头部部分的 ASPX 页面本身中

链接 href="/App_Themes/DM_standard/GridView.skin" 链接 href="/App_Themes/DM_standard/ValidatorCalloutExtender.skin"

~/App_Themes/DM_standard/ValidatorCalloutExtender.skin 的内容是

```
%@ Register 
    Assembly="AjaxControlToolkit" 
    Namespace="AjaxControlToolkit" 
    TagPrefix="cc1" %

cc1:ValidatorCalloutExtender runat="server" Enabled="True"  
HighlightCssClass="validatorCalloutHighlight" 
```

相同的 <%@ Register .. 指令出现在我的 ASPX 页面的顶部。我已经删除了上面示例中的所有尖括号，因为我不知道如何阻止它们被解释为 HTML。

这是否可行，如果可行，我需要做什么？

# google-chrome-extension - chrome.socket.read 在自寻址消息上给出否定错误代码

> ID：13453990
> 
> 赞同：1
> 
> 时间：2012-11-19T12:37:55.367
> 
> 标签：google-chrome-extension, google-chrome-app

我在使用`chrome.socket`API 读取自己的消息时遇到问题。我正在按如下方式创建套接字：

```
chrome.socket.create('udp', {}, function (_socketInfo) {
    socketInfo = _socketInfo;
    chrome.socket.connect(socketInfo.socketId, '127.0.0.1', 12345, function () {
        poll();
    });
}); 
```

`poll()`只需`chrome.socket.read(socketInfo.socketId, ...)`在回调结束时执行并调用自身。

在其他地方，我调用了`chrome.socket.write(socketInfo.socketId, data, ...)`，并且提供给回调的参数表明所有字节`data`都已成功写入。但是，虽然`chrome.socket.read`确实调用了回调，但回调的参数显示了一个负错误代码，特别是 -101。

当我在远程地址连接到一个简单的 UDP 回显服务器时，我在编写消息并将其完整恢复时没有任何问题。

甚至可以像这样在同一个地址向自己发送消息吗？

# jquery - 如何在rails 3中打开弹出页面并从数据库加载数据

> ID：13453991
> 
> 赞同：1
> 
> 时间：2012-11-19T12:37:53.700
> 
> 标签：jquery, ruby, ruby-on-rails-3

我正在使用 ruby​​-on-rails + psql

我有页面列表。在某些页面上单击我必须在弹出窗口中打开页面。

我将如何在特定页面的弹出窗口中加载数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:41:35.383

将动态数据加载到页面而无需刷新页面的标准方法是使用 AJAX 调用后端，然后使用 JQuery/Javascript 处理数据的显示。为了做到这一点，它看起来有点像这样：

```
<script>
    $.ajax({
        url: 'get_data.php',
        method: 'POST',
        success: function(){
            /*populate popup with returned data*/
        },
        failure: function(){
            /*display error message*/
        }
    });
</script> 
```

要全面了解 ajax 可以为您做什么，请查看位于此处的 API：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c# - 数据网格视图中的单元格双击事件

> ID：13453992
> 
> 赞同：6
> 
> 时间：2012-11-19T12:37:55.077
> 
> 标签：c#, datagridview

我有两个`DataGridView`事件。我有一个问题，当我双击一个单元格时，事件 ie`cell click`和`cell double click`事件都被调用。请告诉我为什么会发生这种情况以及有什么解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:04:06.450

它与Windows问题。据我所知，他们没有添加任何特别的东西来处理它。

你可以处理这个 -

*   a) 只需单击您希望在双击之前发生的事情，例如选择。
*   b）如果这不是一个选项，那么在点击事件上，启动一个计时器。在计时器滴答声中，执行单击操作。如果先发生双击事件，则终止计时器，然后执行双击动作。

您设置的时间量应该等于系统的双击时间（用户可以在控制面板中指定）。可从`System.Windows.Forms.SystemInformation.DoubleClickTime`.

*   签出这个 MSDN 链接 - [这里](http://msdn.microsoft.com/en-us/library/ms172533.aspx)

*   还有这个讨论[Stackoverflow 问题之前问过](https://stackoverflow.com/questions/218555/how-can-i-differentiate-between-single-and-double-clicks-in-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:16:25.227

显然，仅通过在 DataGridView 中设置属性是没有办法的。因此，您可以使用 Timer 来计算是否有任何双击，如果不只是在单击事件处理程序中执行任何操作，请检查代码：

```
System.Windows.Forms.Timer t;
        public Form1()
        {
            InitializeComponent();

            t = new System.Windows.Forms.Timer();
            t.Interval = SystemInformation.DoubleClickTime - 1;
            t.Tick += new EventHandler(t_Tick);
        }

        void t_Tick(object sender, EventArgs e)
        {
            t.Stop();
            DataGridViewCellEventArgs dgvcea = (DataGridViewCellEventArgs)t.Tag;
            MessageBox.Show("Single");
            //do whatever you do in single click
        }

        private void dataGridView1_CellClick_1(object sender, DataGridViewCellEventArgs e)
        {
            t.Tag = e;
            t.Start();
        }

        private void dataGridView1_CellDoubleClick(object sender, DataGridViewCellEventArgs e)
        {
            t.Stop();
            MessageBox.Show("Double");
            //do whatever you do in double click
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T05:02:22.267

您可以使用网格的 RowHeaderMouseClick 事件

```
 private void dgv_RowHeaderMouseClick(object sender, DataGridViewCellMouseEventArgs e)
 {

    } 
```

# model-view-controller - 这个循环应该放在哪里？

> ID：13453993
> 
> 赞同：1
> 
> 时间：2012-11-19T12:38:03.093
> 
> 标签：model-view-controller, language-agnostic

在 MVC 应用程序中，我有一个数组（行）数组从视图发送到控制器。数组中的所有行都将代表数据库中的一行。

我被困在以下点：
- 我可以定义一个函数，它接受模型中所有行的数组并在那里循环行。
- 或者我可以定义一个接受单行的函数，并在控制器的循环中调用它。

哪种方法是正确的（从 MVC 的角度来看）？

编辑：
问题是我应该这样做：
`$model->insertData($arrayOfRows);`
或
`foreach($arrayOfRows as $row) {
$model->insertRow($row);
}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:38:10.913

所以我最终使用了第一个解决方案：
`$model->insertData($arrayOfRows);`
并在模型内循环行数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:44:08.117

在适当的 MVC 应用程序中，您的数据首先不会来自视图并进入控制器。

您的数据应该存在于模型中。您的数据库连接和从中提取的所有数据都应由模型对象表示，并且仅在需要表示（例如，可视化数据）或做出与数据相关的应用程序级决策时才应向视图/控制器公开。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T06:25:05.107

你试试下面的模式，

```
var $arr = [];

$arr.push($row); /*insert all rows to an array */

then from the jquery $.post, set the array to the parameter like,

$.post(
    '<controller/action>',
    { m: "[" + $arr + "]" },
    function (data){}
); 
```

# jquery - pgrid - 固定表格的列宽

> ID：13453997
> 
> 赞同：1
> 
> 时间：2012-11-19T12:38:19.477
> 
> 标签：jquery

我正在为我的 Web 项目使用[Pines Grid](http://pinesframework.org/pgrid/ "松树网格")。

有什么方法可以使用 i 来固定列宽吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:57:27.053

将此属性添加到 pgrid.css

```
white-space:nowrap; 
```

# php - 正则表达式替换混合数字+字符串

> ID：13453999
> 
> 赞同：3
> 
> 时间：2012-11-19T12:38:24.390
> 
> 标签：php, python, regex

我想删除所有包含数字的单词，例如：

```
LW23 London W98 String 
```

从上面的字符串中，我唯一想要保留的是`"London String"`. 这可以用正则表达式完成吗？

我目前正在使用 Python，但 PHP 代码也很好。

谢谢！

编辑：

这是我现在可以做的：

```
>>> a = "LW23 London W98 String"
>>> b = a.split(' ')
>>> a
['LW23', 'London', 'W98', 'String'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T12:43:23.583

是的你可以：

```
result = re.sub(
    r"""(?x) # verbose regex
    \b    # Start of word
    (?=   # Look ahead to ensure that this word contains...
     \w*  # (after any number of alphanumeric characters)
     \d   # ...at least one digit.
    )     # End of lookahead
    \w+   # Match the alphanumeric word
    \s*   # Match any following whitespace""", 
    "", subject) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T12:45:38.363

您可以使用以下模式尝试 preg_replace：

```
/(\w*\d+\w*)/ 
```

就像是`$esc_string = preg_replace('/(\w*\d+\w*)/', '', $old_string);`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T12:54:25.200

取决于我猜的“单词”是什么，但如果我们将空格作为分隔符并且它不必是正则表达式：

```
>>> ' '.join(filter(str.isalpha, a.split()))
'London String' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T12:45:48.537

我不是 100% 确定，这只是对可能解决方案的建议，我不是 python 大师，但如果我看到完整的代码，我可能会对要做什么有更好的了解。

我的建议是将字符串的各个部分添加到列表中，弹出每个单词并使用 if 函数来检查数字并在它们包含数字时将其删除，如果不包含则将它们添加到新列表中，然后您可以重新排序列表以使单词按适当的顺序排列。

抱歉，如果这没有帮助，我只知道如果遇到问题，我会从这种解决方案开始。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T12:53:26.207

您可以使用正则表达式加理解来做到这一点：

```
clean = [w for w in test.split(' ') if not re.search("\d", w)] 
```

或者

```
words = test.split(' ')
regex = re.compile("\d")
clean = [w for w in words if not regex.search(w) ] 
```

输入：

```
"LW23 London W98 String X5Y 99AP Okay" 
```

输出：

```
['London', 'String', 'Okay'] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T12:49:54.983

您可以将包含数字的单词与

```
/\w*\d+\w*/ 
```

或者你可以匹配所有没有数字的单词（并保留它们）

```
/\w+/ 
```