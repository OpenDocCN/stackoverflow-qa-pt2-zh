# StackOverflow 问答 15885000-15885999

# javascript - 使用 JavaScript 在其他图像之上添加透明图像

> ID：15885001
> 
> 赞同：0
> 
> 时间：2013-04-08T17:11:37.243
> 
> 标签：javascript, css

我需要在页面上的所有图像之上添加一个透明图像。目标是如果用户进行简单的右键单击并保存图像，他们将保存透明图像。

我确实意识到这不是一种有保证的方法，也没有一种方法可以防止图像被盗，而只是客户希望添加的一种措施，以防止您的普通非技术人员保存图像。

*   使用 JavaScript 我想在某个 Div 中查找所有图像或所有图像。
*   在这些图像之上应用一个新的图像叠加层，这些图像将具有与它们所覆盖的图像相同的宽度和高度

我不知道如何用 JavaScript 做到这一点，并希望有人能快速修复或示例。到目前为止，我在 Google 或 SO 上找不到任何东西。感谢任何帮助

到目前为止，我有这个 JS 可以获取页面上的所有图像...

```
// Get all images on a Page
function checkimages() {
     var images = document.images;
     for (var i=0; i<images.length; i++){
        var img =images[i].src;

       // Add new transparent image on top of this image
       alert(img);
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:25:31.083

我建议您使用 jQuery（或类似的库）以使事情变得更容易。我什至会编写一个小的 jquery 扩展来轻松回收代码，并将其应用于任何 div（或其他包装器），您想要覆盖的子图像。

我的代码看起来像这样：

```
// jquery plugin to create overlays
// src is the url of the overlay image
// apply to any container that contains images to be overlayed
$.fn.overlayImages = function(src) {
    // loop trough the images
    $(this).find('img').each(function() {
        // cache some variables
        var $img =  $(this);
        var $parent = $img.parent();
        // make the parent relative, if not yet absolute or fixed, for easy positioning
        if ($parent.css('position') !== 'fixed' && $parent.css('position') !== 'absolute') {
            $parent.css('position', 'relative');            
        }
        // get the position of the image
        var position = $img.position();
        // clone the image
        var $overlay = $img.clone();
        // set the styling, based on the img, for exact positioning
        $overlay.css({
            top: position.top,
            left: position.left,
            position: 'absolute',
            width: $img.width(),
            height: $img.height()
        });
        // change the src attribute for the overlay
        $overlay.attr('src', src);
        // insert the overlay to the DOM
        $overlay.insertAfter($img);
    });
}

// when the DOM is loaded (not just ready, the images need to be there to copy their position and size)
$(window).load(function() {
    // apply the overlay plugin to the wrapper of the images
    $('#replace-images').overlayImages("http://www.riptideinnovations.com/images/watermark.png");
}); 
```

我在代码中添加了一步一步的解释作为注释，但如果您需要任何进一步的解释，请随时询问。

我设置了一个小小提琴来演示：http: [//jsfiddle.net/pP96f/6/](http://jsfiddle.net/pP96f/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:18:21.767

我不知道这是否会有所帮助，但你可以让你的图像全部 div 的背景是这样的：

```
<div style="background-image: url('<your_image>');"></div> 
```

# python - 将 Python/Tkinter 放入应用程序图标

> ID：15885011
> 
> 赞同：-1
> 
> 时间：2013-04-08T17:11:57.447
> 
> 标签：python, tkinter

我用 Python 编写了一个程序，然后使用 Tkinter 创建了一个 GUI。当我在我的计算机上使用程序（如 Microsoft Word）时，我不需要从命令行访问 GUI，我只需单击应用程序图标。

如何将我的程序（程序本身与 GUI 在同一个 .py 文件中）放入将启动我的程序的应用程序图标中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:48:21.440

您在 Windows 中指的是*快捷链接*。
*nix 环境中的等价物是`ln -s`命令。

计算机系统中的链接是指向不同文件的特殊文件，通常带有便于访问的参数。有关更多信息，请参阅有关它们的[Wikipedia 文章](https://en.wikipedia.org/wiki/File_shortcut)。Windows 快捷方式是带有扩展名的文件`.lnk`，而 Linux 中的软链接具有该模式`+l`。

如果我想使用 Python 链接到 Windows 上的文件，我会右键单击并创建一个快捷方式。如果您的 python 安装较旧（低于 2.7.3），则安装中存在一个小错误，其中 regkeys`HKEY_CLASSES_ROOT\py_auto_file`和`HKEY_CLASSES_ROOT\.py`配置错误并且不传递命令行参数，因此传递参数时的故障安全将是编辑快捷链接并粘贴如下内容：

```
"C:\Python27\python.exe" "C:\dev\path\to\file.py --args" 
```

Windows 可以从快捷链接或直接链接文件和目录（称为*符号链接*）执行程序，而 linux 会链接文件或目录，然后使用 shebang ( `#!`) 或直接命令 ( `./`) 调用该解释器以执行它。Windows 只是将程序与后面的参数链接起来执行。

您也可以在资源管理器中双击文件，但这不提供参数（如果您需要它们）。

# batch-file - 无法在 for 循环中读取字符串的字符

> ID：15885012
> 
> 赞同：0
> 
> 时间：2013-04-08T17:11:59.337
> 
> 标签：batch-file

我试图在 for 循环中读取字符串的字符。

命令 !string:~1,3! 工作正常。但是我可以用变量而不是1和3来做到这一点吗？我尝试了以下代码，但我不知道出了什么问题。它不工作。

```
@echo off
setlocal enableextensions enabledelayedexpansion
set string=abcdefghij
set /a count=1
for /l %%x in (1,1,3) do (
  set string2=!string:~%count%,1!
  set /a count+=1
  echo !string2!
  pause
) 
```

但它总是给出输出：

```
b 
```

我希望输出为：

```
b
c
d 
```

请帮助解决这个问题..提前非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:08:26.260

为了达到你想要的，你需要做一个延迟扩展*两次*，也就是这样的：

```
set string2=!string:~!count!,1! 
```

当然，上一行是无效的。虽然有几种方法可以解决这个问题，但大多数都使用`call`速度较慢的命令。要解决此问题，使其以最快的方式运行，请使用`for`命令更改第一个！count！展开成 FOR 可替换参数，然后在原始表达式中使用它：

```
for %%i in (!count!) do set string2=!string:~%%i,1! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:31:08.010

问题是扩展`%count%`没有延迟，因此每次循环迭代都有相同的值。最好这样写：

```
@echo off
setlocal enableextensions enabledelayedexpansion
set string=abcdefghij
set /a count=1
for /l %%x in (%count%,1,3) do (
    set string2=!string:~%%x,1!
    echo !string2!
) 
```

* * *

**编辑**

如果您想在设置变量时继续`%count%`评估，而不仅仅是在`for`循环开始时，请使用[Aacini's answer](https://stackoverflow.com/a/15885934/1683264)。

# forms - 第 1 页之后的页面上未显示 VBA 报告标题（列名称）

> ID：15885016
> 
> 赞同：-1
> 
> 时间：2013-04-08T17:12:31.697
> 
> 标签：forms, vba, ms-access, report

我有一个`VBA`报告，它有一个子表单报告，`Report Header`其中显示数据上方的列名。

第一页上一切都很好，但是在第二页上，列名消失了。

现在我不确定这是否是因为它们隐藏在另一个标签或部分或其他东西后面？或者是否需要启用某些设置。

现在，我`Event Procedure`在（`On Format`列`Report Header`名位置）和`Page Header`. 这些都不起作用。

这些代码`Event Procedures`如下：

```
Private Sub PageHeaderSection_Format(Cancel As Integer, FormatCount As Integer)
Me.ReportHeader.Visible = True
Me.PageHeaderSection.Visible = True
End Sub

Private Sub ReportHeader_Format(Cancel As Integer, FormatCount As Integer)
Me.ReportHeader.Visible = True
Me.PageHeaderSection.Visible = True
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:28:20.647

你启用`Page Header/Footer`部分了吗？右键单击您的表单以获取上下文菜单。

![页眉/页脚](https://i.stack.imgur.com/Gzk91.png)

**表单页眉/页脚**- 仅显示在第一页上。这是您显示表单/报告名称徽标等的地方。

**页眉/页脚**- 显示在每一页上。这是您显示列名、页数等的地方。

# c# - 为什么我不能在 C# 中创建 object = bool？

> ID：15885018
> 
> 赞同：3
> 
> 时间：2013-04-08T17:12:33.997
> 
> 标签：c#, arrays, object, boolean

我有一个程序，我试图扩展对象类以允许引用数组所有成员的方法。

ExtendedArray 类的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleMaze
{
    class ExtendedArray : Object
    {
        private object[] referredTo;

        public ExtendedArray()
        {
            referredTo = null;
        }//empty constructor

        public ExtendedArray(Object[] obj)
        {
            referredTo = obj;
        }//full constructor

        public void referToAll(object changeTo)
        {
            for (int x = 0; x < referredTo.Length; x++)
            {
                referredTo[x] = changeTo;
            }

        }//referToAll(bool)

    }//ExtendedArray <== class
} 
```

我打算在未来使用这个类并添加一些东西，所以它非常通用。虽然当我尝试使用构造函数时出错，但无法将类型 bool [] 隐式转换为类型 object []。

```
Boolean[] dirBoolArray = { curLeft, curUp, curRight, curDown };
ExtendedArray dirBool = new ExtendedArray(dirBoolArray); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:58:14.050

与您在标题中所说的相反，您可以分配`bool`给`object`变量。以下代码编译良好：

```
bool b = true;
object o = b; 
```

第二行的实际作用是将值[装箱](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)`bool`，将其从值类型转换为引用类型。

这意味着它`b`是一个直接包含*value* `true`的单个字节。另一方面，`o`是一个*引用*（4 或 8 个字节），它指向一个对象，该对象包含一个带有`true`值的字节以及一些元数据。

您不能做的是将 a 分配给`bool[]`type 的变量`object[]`。这是因为`bool[]`每个 都直接包含一个字节`bool`，而每个项目都`object[]`包含一个*引用*。

转换`bool[]`为`object[]`将是一个很大的变化：每个`bool`都必须单独装箱，并且必须为这些盒子的引用分配一个新数组。因此，编译器不允许您直接执行此操作。

你可以做的是`object[]`从一开始就创建：

```
object[] dirBoolArray = { curLeft, curUp, curRight, curDown };
ExtendedArray dirBool = new ExtendedArray(dirBoolArray); 
```

这将创建一个 boxed 数组`bool`，这正是您所需要的。

还有一些注意事项：

*   由于您使用的是 ，因此您可能期望and`Boolean`之间存在一些差异（就像在 Java 中一样）。在 C# 中，两者没有区别，只是.`bool``Boolean``bool``Boolean`

*   Using`object[]`是一种代码气味，它表示您*可能*做错了什么。它肯定不是 C# 中通常理解的词的“通用”方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:27:57.053

数组协方差仅在成员可以在不改变其表示的情况下进行转换（加上一些其他限制）时才有效。

这意味着您可以将引用类型的数组强制转换为`object[]`，但不能将包含值类型的数组强制转换为`object[]`。转换 from `bool`to`object`不会保留表示，因此无法转换`bool[]`为`object[]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T17:34:36.837

为什么你不能这样做：

```
class ExtendedArray<T> 
{
    private T[] referredTo;

    public ExtendedArray()
    {
        referredTo=null;
    }//empty constructor

    public ExtendedArray(T[] obj)
    {
        referredTo=obj;
    }//full constructor

    public void referToAll(T changeTo)
    {
        for(int x=0; x<referredTo.Length; x++)
        {
            referredTo[x]=changeTo;
        }

    }//referToAll(bool)

}//ExtendedArray <== class

class Program
{
    static void Main(string[] args)
    {
        ExtendedArray<bool> array=new ExtendedArray<bool>(new bool[10]);
        array.referToAll(true);
    }
} 
```

# java - 如何更改正则表达式模式，以便它按顺序找到每个匹配项

> ID：15885026
> 
> 赞同：0
> 
> 时间：2013-04-08T17:12:47.053
> 
> 标签：java, regex

我有一个文本文件，我在其中使用以下语法存储证书：

```
-----BEGIN CERTIFICATE-----
Certificate is in here.  It's a really long string of characters and looks like garbage.  Each certificate is variable length.
-----END CERTIFICATE-----

-----BEGIN CERTIFICATE-----
Another certificate is in here
-----END CERTIFICATE----- 
```

然后，我有代码尝试读取上述文本文件，并一一检查每个证书。

```
//This copies all of my certificates from a file into a String
String certificates = new Scanner(new File("certificates.txt"), "UTF-8").useDelimiter("\\A").next();

//This creates a pattern so that I can examine each certificate one at a time
//(?s) allows this pattern to span several lines.
Pattern pattern = Pattern.compile("(?s)-----BEGIN CERTIFICATE-----.*-----END CERTIFICATE");

Matcher matcher = pattern.matcher(certificates);

//I attempt to examine each certificate one at a time
while(matcher.find())
{
    System.out.println(matcher.group());
} 
```

但是，当我调用 matcher.find() 时，它会返回*整个*证书文件。我想是因为它在文件开头找到“-----BEGIN CERTIFICATE-----”，然后在文件末尾找到“-----END CERTIFICATE-----” .

如何更改我的正则表达式模式以便它按顺序找到每个证书？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:16:41.073

原因是这`.*`是一个匹配尽可能多的证书部分的[贪婪表达式。](http://www.regular-expressions.info/repeat.html)您可以通过添加`?`量词使用不情愿的表达式将此匹配限制为单个部分：

```
Pattern pattern = 
   Pattern.compile("(?s)-----BEGIN CERTIFICATE-----.*?-----END CERTIFICATE"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:06:49.500

如果您使用以下示例：

```
-----BEGIN CERTIFICATE-----
asAasdfO'Psadf-ASDFgrvd-dK;9twqegvb5wetg5089'O0'[U'P4we5AASDSFDevbF54wgwe54-t4g5g54wgsefe4-
-----END CERTIFICATE----- 
```

那么下面的正则表达式需要242个步骤来拉取，如果证书更长会快速增长：

```
(?s)-----BEGIN CERTIFICATE-----.*-----END CERTIFICATE 
```

242 不是很多，但话又说回来，这是一个非常小的证书。我见过证书变得很长。我不确定这种影响是否会对你造成太大伤害。但是，以下正则表达式只需要 72 步，并且无论证书有多长，都将始终约为 72：

```
(-{5})BEGIN\sCERTIFICATE\1\s*(?<Cert>[^-]*(?:(?=\1)|-))*?\s*\1END\sCERTIFICATE\1 
```

它可能看起来更复杂。但是说Regex的时候，就很清楚了。此外，它不会包括 Begin 之后和 End 之前的换行符。只需拉出 Matcher.Group("Cert") 即可提取证书。

细分：首先，匹配五个破折号。将其设置为 Capture Group 1 以便以后使用。匹配“开始证书”。正则表达式中的空格很难看，应该是 [ ] 或 \s。使用 \s（5 个破折号）调用 Capture Group 1。修剪空格，包括带有 \s* 的换行符 在证书组中，一次捕获所有文本集（不要懒惰），直到后面跟着五个破折号。（这是递归的）。匹配任何空格（包括换行符）、五个破折号、END CERTIFICATE 和五个破折号。

# html - 我可以在 SVG 标签中使用 HTML 标签吗？

> ID：15885027
> 
> 赞同：1
> 
> 时间：2013-04-08T17:12:48.367
> 
> 标签：html, text, svg, dojo

我想在 SVG 标记中使用常规 HTML 标记（例如输入标记）。

为什么？我希望我的 SVG 图形能够从用户那里获取文本（例如，用户单击使用 SVG 绘制的框并在其上输入文本），因此我正在考虑在 SVG 标记中使用 HTML 输入标记。这可能吗？

如果答案是否定的（很可能会），我如何允许用户编辑 SVG 文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:42:47.767

这个问题已经有了答案：

[如何使用 javascript innerHTML 更改 svg 文本标签](https://stackoverflow.com/questions/4282108/how-to-change-svg-text-tag-using-javascript-innerhtml)

但它不被接受。

当您查看此示例时，这似乎是可能的

[http://starkravingfinkle.org/blog/wp-content/uploads/2007/07/foreignobject-text.svg](http://starkravingfinkle.org/blog/wp-content/uploads/2007/07/foreignobject-text.svg)

从这个来源：

[http://ajaxian.com/archives/foreignobject-hey-youve-got-html-in-my-svg](http://ajaxian.com/archives/foreignobject-hey-youve-got-html-in-my-svg)

# python - Django - 包括应用程序网址

> ID：15885030
> 
> 赞同：13
> 
> 时间：2013-04-08T17:12:55.287
> 
> 标签：python, django, django-urls

我有以下结构（Django 1.4）：

```
containing_dir/
    myproject/
        myapp1/
        myapp2/
        myapp3/ 
```

myproject、myapp1、myapp2 和 myapp3 都有**init** .py，所以它们都是模块。

在 manage.py （在 contains_dir 下）我有`os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myproject.settings")`

在 myproject.settings 我定义：

```
[..]
ROOT_URLCONF = 'myproject.urls'
INSTALLED_APPS = (   
    [..]
    'myproject.myapp1',
    'myproject.myapp2',
    'myproject.myapp3',
)
[..] 
```

在 myapp1.urls.py 我定义：

```
urlpatterns = patterns('myapp1',
    url(r'^agent/$', 'views.agent',    name='agent')
) 
```

我尝试将它导入 myproject.urls 我尝试像这样导入 myapp1 url：

```
(r'^myapp1/', include('myproject.myapp1.urls')) 
```

但是每当我尝试加载时`localhost:8000/myapp1/agent`，我都会得到

```
Exception Value: No module named myapp1 
```

我认为从 withing myapp1.urls

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-04T19:32:58.737

你必须有一个

```
__init__.py 
```

在“myproject”目录中的文件。当你说：

```
(r'^myapp1/', include('myproject.myapp1.urls')) 
```

你说“myproject”（以及myapp1）是一个python包。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-01T06:40:59.140

在 myproject.settings 中进行以下更改：

```
INSTALLED_APPS = (   
[..]
'myapp1',
'myapp2',
'myapp3',
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-02T17:40:53.750

**尝试：**

```
urlpatterns = [
    ...
    url(r'^app_name/', include('app_name.urls', namespace='project_name'))
    ...
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:22:18.797

`ROOT_URLCONF`需要指点吗`myproject.urls`？

如果您将应用程序放置在其中，则`myproject`需要使用正确的[视图前缀](https://docs.djangoproject.com/en/1.4/topics/http/urls/#the-view-prefix)。

```
urlpatterns = patterns('myproject.myapp1',
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-27T11:34:06.640

要解决这个问题，只需在 PyCharm 中选择“myproject”目录并将其设置为源根目录。您的项目不知道它必须从哪个根目录搜索给定的应用程序。它为我解决了这个问题。谢谢你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-12T07:18:06.020

最近，在新版本的 Django 中引入了`path(route, view, kwargs=None, name=None)`代替旧的`url()`正则表达式模式。

您必须`__init__.py`在 app 文件夹中有文件才能将其识别为 django 项目的包，即 myproject

必须更新 Django 项目，即 myproject urls.py 文件以包含以下示例：

```
path('', include('django_app.urls'))
path('url_extension/', include('django_another_app.urls')) 
```

上面的示例中包含两个应用程序 url。一种是没有在 url 中添加任何路径扩展名，另一种是在当前 url 中添加路径扩展名。

另外，不要忘记`INSTALLED_APPS`在`settings.py`文件中添加 django 应用程序，以通过 django 项目将其识别为应用程序，如下所示。

```
ROOT_URLCONF = 'myproject.urls'
INSTALLED_APPS = [
...
django_app,
django_another_app
...
] 
```

有关更多信息，请查看[文档](https://docs.djangoproject.com/en/4.0/ref/urls/)。

# asp.net-web-api - 如何使用 WebApi 将路由参数传递给我的控制器上的属性？

> ID：15885031
> 
> 赞同：1
> 
> 时间：2013-04-08T17:12:55.883
> 
> 标签：asp.net-web-api

假设我有如下路线：

/api/v1/{organisationId}/resource/{resourceId}

由于可能有许多不同类型的资源挂在一个组织上，我想要一种处理 organizationId 的通用方法。

我想做的是创建一个具有 OrganisationId 属性的基本控制器（显然是从 ApiController 继承的）。

有没有办法让 WebApi 将 organizationId 路由参数传递给控制器​​上的属性，而不是传递给 action 方法的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:17:48.710

这个怎么样？

```
public int OrganisationId
{
    get
    {
        return Convert.ToInt32(Request.GetRouteData().Values["organisationId"]);
    }
} 
```

这没有使用模型绑定层，并且假设它`organisationId`会出现在路由数据中。它比 Web API 模型绑定提供的简单且灵活性稍差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T03:07:40.657

从属性获取器中读取路由的缺点是单元测试可能是一个挑战。另一种可能的方法是探索实现您自己的设置 OrganizationId 属性的 IHttpControllerActivator。是的，要使其工作，您将需要一个基本控制器或在单个控制器中定义的属性，如果不是从基本控制器派生的。如果您使用 base，您可以将 IHttpController 类型转换为 base 并设置属性。或者你可以诉诸反思。

# android - 在 TextView 上动态格式化货币

> ID：15885036
> 
> 赞同：1
> 
> 时间：2013-04-08T17:13:14.957
> 
> 标签：android, format, currency

我正在尝试动态格式化用户在 a 上输入的值`TextView`，特别是我想要做的是：

```
1\. TextView text = ""
2\. User entered = "4"
3\. TextView text = 0.04
4\. User entered = "5"
5\. TextView text = 0.45
6\. User entered = "6"
7\. TextView text = 4.56 
```

等等...

我正在使用`onTextChanged`stub 中的方法`TextWatcher`，虽然我不知道如何实现这个逻辑。

实现此功能的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:46:07.460

您必须`NumberFormat`在这种情况下使用，例如：

```
double moneyCurrency = 100.1;
NumberFormat baseFormat = NumberFormat.getCurrencyInstance();
String moneyString = baseFormat.format(moneyCurrency); 
```

# maven - maven，pom 中的 JAVA_HOME

> ID：15885040
> 
> 赞同：0
> 
> 时间：2013-04-08T17:13:40.310
> 
> 标签：maven, compiler-construction

我有 Maven 2.2.1，它使用 JAVA 1.6。但我需要用 1.7 编译和执行我的项目。我不想因为其他项目而更改 JAVA_HOME 变量，据我所知，我可以在 pom.xml 中配置它。

使用下面的代码，我可以编译我的项目，但由于版本较小，我无法执行它。我做错了什么？或者在pom中不可能做到这一切？或者它与maven版本（2.2.1）有关。

```
<plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
             <source>1.7</source>
             <target>1.7</target>
             <fork>true</fork>
             <executable>...path-to-my-1.7-javac...</executable>
             <compilerVersion>1.7</compilerVersion>
             <encoding>UTF-8</encoding>
         </configuration>
 </plugin> 
```

**编辑：使用 Maven-EXEC-PLUGIN 的解决方案**

通过添加以下配置解决了问题：

```
 <properties>
      <arg0>defaultParam1</arg0>
 </properties>

 <plugin>
       <groupId>org.codehaus.mojo</groupId>
       <artifactId>exec-maven-plugin</artifactId>
        <executions>
           <execution>
             <goals>
                <goal>exec</goal>
             </goals>
           </execution>
         </executions>
        <configuration>
          <executable>path-to-java-1.7/bin/java</executable>
          <arguments>
            <argument>-classpath</argument>
             <classpath/>
             <argument>${main.class}</argument>
             <argument>${arg0}</argument>
      </arguments>
        </configuration>
    </plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:41:12.713

看看[How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version](https://stackoverflow.com/questions/10382929/unsupported-major-minor-version-51-0) 安装 JRE 7 就好了（maven 是构建工具，不是运行时工具）

# jsf-2 - JSF 组件不再呈现，但 FacesMessage 仍然存在

> ID：15885042
> 
> 赞同：0
> 
> 时间：2013-04-08T17:13:43.937
> 
> 标签：jsf-2

情况如下：

1.  我有一个组件，它的值是我的 ViewScoped bean 的一个属性，它会生成一个 FacesMessage，它会在首次提交表单时出现一些错误
2.  在随后的用户操作中，点击 ah:commandlink，它使用 f:ajax，并且它的 actionlistener 将组件设置为不再呈现
3.  收到响应后，组件不再呈现（如预期的那样），但它的 FacesMessage 仍然保留并显示

我正在使用 Mojarra JSF 2.1 和 IceFaces 3.0 - 尽管仅使用标准 JSF 组件才能看到此示例和有问题的行为。这是一个演示该行为的小示例：

**测试.xhtml**

```
<h:form id="testform">
    <h:message for="tv"/>
    <h:inputText id="tv" value="#{testBean.testVal}" rendered="#{testBean.testValRendered}" required="true" />
    <h:commandButton value="Submit"/>
            <h:commandLink actionListener="#{testBean.toggleTestVal}" value="Toggle input">
        <f:ajax execute="@this" render="@form"/>
    </h:commandLink>
</h:form> 
```

**豆码**

```
@ViewScoped
@ManagedBean(name = "testBean") 
public class TestBean {

    private String testVal;
    private boolean testValRendered;

    public TestBean() {
        testValRendered = true;
    }

    public String getTestVal() {
        return testVal;
    }

    public void setTestVal(String testVal) {
        this.testVal = testVal;
    }

    public boolean isTestValRendered() {
        return testValRendered;
    }

    public void setTestValRendered(boolean testValRendered) {
        this.testValRendered = testValRendered;
    }

    public void toggleTestVal(ActionEvent ae) {
        testValRendered = !testValRendered;
    }
} 
```

如果我更改 h:commandLink 使其不使用 f:ajax，并在其上设置 immediate='true'，则消息将被正确删除。虽然这在某些情况下可能有效，但我想了解为什么使用 f:ajax 来呈现我在示例中的内容不起作用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:38:38.850

输入组件在其渲染条件被切换之前被提交、处理和验证。`<h:message>`不知道关联的输入组件未呈现。您还想检查相同的渲染条件`<h:message>`：

```
<h:message for="tv" rendered="#{testBean.testValRendered}" />
<h:inputText id="tv" ... rendered="#{testBean.testValRendered}" /> 
```

# android - 短信不在android应用程序中的真实设备上发送，但它在模拟器上完美运行

> ID：15885043
> 
> 赞同：1
> 
> 时间：2013-04-08T17:13:44.853
> 
> 标签：android, sms

它可以在模拟器上运行，但不能在真实设备上运行，为什么？请帮助我...提前谢谢！

```
<uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-permission android:name="android.permission.SEND_SMS"/>
<uses-permission android:name="android.permission.WRITE_SMS"/>
<uses-permission android:name="android.permission.RECEIVE_SMS" />

smsManager.sendTextMessage(phoneNumber, null, Text, sentPI, deliveredPI); 
```

# jquery-ui - JqueryUI 按钮后面的文本设置为按钮标题

> ID：15885045
> 
> 赞同：0
> 
> 时间：2013-04-08T17:13:54.217
> 
> 标签：jquery-ui, button

我有以下代码：

```
$( ".delete" ).button({
text: false,
icons: {
primary: "ui-icon-trash"
}
});

<button id="delete" class="delete" />test 
```

出于某种原因，“test”这个词被附加到按钮上作为它的标题，而不是出现在按钮之后。如果 text 设置为 false，则按钮仅显示一个图标。如果 text 未设置为 false，则“test”一词会出现在按钮内。它应该只是按钮后面的一些文本，我找不到任何理由说明为什么按钮将它作为标题。我也试过定义一个标题，一个标签......没有帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:19:20.177

改变你的标记应该解决这个问题：

```
<button id="delete" class="delete" ></button>test 
```

# python - Mechanize 上的 Sublime Text Flake8 lint 错误，手动运行 flake8 时不会出现

> ID：15885046
> 
> 赞同：1
> 
> 时间：2013-04-08T17:13:56.280
> 
> 标签：python, sublimetext2, mechanize, pyflakes, flake8

我将`mechanize`库用于一个小型 python 项目。

为什么 Sublime Text 2 （带有[Flake8Lint](https://github.com/dreadatour/Flake8Lint)）告诉我浏览器中没有这样的成员`select_form()`。我已经检查了 _mechanize.py，它就在那里。

还有为什么能找到`open()`会员？

我用简单的方式导入机械化：

`import mechanize`

这是我得到的：

![在此处输入图像描述](https://i.stack.imgur.com/MF3Ha.png)

# android - 带有点击效果的图片

> ID：15885048
> 
> 赞同：0
> 
> 时间：2013-04-08T17:14:01.610
> 
> 标签：android, imageview, listener, ontouchlistener

我正在尝试在我的自定义 ImageView 类 AvatarView 中做点击效果。

我正在使用该代码：

```
 // **** Listener onTouch ****.

    // Añadimos un listener para su pulsación.
    this.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {

            switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN: 

                    // Establecemos un filtrado de color.
                    AvatarView.this.setColorFilter(0xe0f47521, PorterDuff.Mode.SRC_ATOP);
                    AvatarView.this.invalidate();
                    break;

                case MotionEvent.ACTION_UP: 

                    // Eliminamos el filtrado de color.
                    //AvatarView.this.clearColorFilter();
                    AvatarView.this.setColorFilter(null);
                    AvatarView.this.invalidate();
                    break;

            }

            return false;
        }
    }); 
```

此代码在我的 2.3 手机中完美运行，但在我的 4.1 平板电脑中失败，因为图像消失并且不再出现。

我还没有找到任何解决方案。任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:23:36.837

最后，我找到了解决方案：有必要使用drawable：

```
 // **** Listener onTouch ****.

    // Añadimos un listener para su pulsación.
    this.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {

            switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN: 

                    // Establecemos un filtrado de color.
                    AvatarView.this.getDrawable().setColorFilter(0xe0f47521, PorterDuff.Mode.SRC_ATOP);
                    AvatarView.this.invalidate();
                    break;

                case MotionEvent.ACTION_UP: 

                    // Eliminamos el filtrado de color.
                    AvatarView.this.getDrawable().clearColorFilter();
                    AvatarView.this.invalidate();
                    break;

                case MotionEvent.ACTION_CANCEL: 

                    // Eliminamos el filtrado de color.
                    AvatarView.this.getDrawable().clearColorFilter();
                    AvatarView.this.invalidate();
                    break;

            }

            return false;
            //return true;
        }
    }); 
```

现在，它工作正常。

谁能告诉我我应该返回真还是假？有什么不同？

谢谢。

# java - 使用 PrintWriter 将字符串打印到文本文件，但是当我打开文本文件时它是空的

> ID：15885050
> 
> 赞同：0
> 
> 时间：2013-04-08T17:14:03.243
> 
> 标签：java, file, text, printing, is-empty

我在 Java 中使用 PrintWriter 尝试将一些字符串写入文本文件，但是当我打开文本文件时它是空的。

这是我的代码：

```
public void save(String fileName) throws FileNotFoundException{

    PrintWriter out1 = new PrintWriter("aSB.txt");
    out1.println("The Pupil's information is listed below:");
    for (Pupil pup : Pupils) {
       out1.println(pup.getFirstName() + " " + pup.getLastName());
    }
    out1.println("End");
    out1.println("The Club's information is listed below:");
    for (Club clu : Clubs) {
       out1.println(clu.getName());
    }
    out1.close();   
} 
```

为什么文件名是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:23:59.480

尝试捕获 FileNotFoundException 并查看创建文件是否出错。还可以尝试捕获 SecurityException。如果不尝试使用 FileOutputStream。它真的很容易使用它祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:44:46.930

正如凯文所说，也许是目录问题。尝试指定完整路径，看看会发生什么。

就像是：

```
PrintWriter pw = new PrintWriter("c:/asb.txt"); 
```

或者，请参见[此处](http://www.roseindia.net/java/java-write/java-writer-example.shtml)

很可能数组是空的

# php - html链接到另一个页面的中间

> ID：15885051
> 
> 赞同：1
> 
> 时间：2013-04-08T17:14:04.310
> 
> 标签：php, html

各位程序员，我想知道是否有 html 代码可以链接到另一个 html/php 页面的中间，而不是在同一页面上。我搜索了很多网站，但我发现的只是链接到同一页面中间的代码。我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T17:14:56.237

只需链接到页面并使用主题标签，就像链接到同一页面的中间一样：

```
<a href="otherpage.html#middleofpage">link</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:16:51.763

```
<a href="pagename.php#anchor">link text</a> 
```

[http://help.typepad.com/anchor-tags.html](http://help.typepad.com/anchor-tags.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T17:15:12.643

如果在另一页上没有锚（`<a name="">`例如），那么就没有办法这样做。

如果是，您可以使用 URL#anchor-name。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:16:11.163

您定义要链接到的部分的名称。

您将该链接引用为#name。

# javascript - 在 iframe onload 中滑动到 div

> ID：15885059
> 
> 赞同：0
> 
> 时间：2013-04-08T17:14:17.080
> 
> 标签：javascript, jquery

我有一个将网站加载到 iframe 中的网站

```
 <iframe src="<?php echo $url ?>" id="exframe"></iframe> 
```

我想要做的是在这个网站上有很多图像在顶部所以一旦 iframe 被加载我想滑动到底部的内容

在 iframe 中，网站具有以下类和 ID。

```
<div class="images"> </div>
<div id="slider"> </div>
<div class="blocks"> </div>
<div class="content"> </div> 
```

我确实尝试了下面的代码，但它似乎不适用于带有 iframe 的元素

```
$(document).ready(function(){
    $('.content').slideDown(1000);
}); 
```

有没有一种特定的方法可以将上述代码应用到 iframe 中？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:30:00.013

如果您尝试**从**父级访问 iframe 的内容，您可以使用：

```
$(document).ready(function(){
    $("#exframe").contents().find("body").find(".content").slideDown(1000);
}); 
```

如果您知道它们将是`<div>`s，请使用此选择器：`div.content`以提高效率。

# android - 如何从联系人列表中获取特定的联系电话和姓名

> ID：15885061
> 
> 赞同：0
> 
> 时间：2013-04-08T17:14:39.453
> 
> 标签：android, android-intent

我能够检索联系人，但发生点击特定联系人错误这是我的代码：

```
contactButton.setOnClickListener(new View.OnClickListener() {
  public void onClick(View v) {
    Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
    startActivityForResult(intent, requestCode);
  }
}); 
```

对于 onActivity 结果：

```
protected void onActivityResult(int request_Code, int resultCode, Intent data) {
  // TODO Auto-generated method stub
  super.onActivityResult(requestCode, resultCode, data);
  if (requestCode == request_Code) {
    if (resultCode == RESULT_OK) {
      Uri contactData = data.getData();
      Cursor c = managedQuery(contactData, null, null, null, null);
      if (c.moveToFirst()) {
        String id = c.getString(c.getColumnIndexOrThrow(ContactsContract.Contacts._ID));
        String hasPhone = c.getString(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));
        if (hasPhone.equalsIgnoreCase("1")) {
          Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = " + id, null, null);
          phones.moveToFirst();
          String phn_no = phones.getString(phones.getColumnIndex("data1"));
          String name = c.getString(c.getColumnIndex(StructuredPostal.DISPLAY_NAME));
          Toast.makeText(this, "contact info : " + phn_no + "\n" + name, Toast.LENGTH_LONG).show();
        }
      }
    }
  }
} 
```

# python - UnicodeEncodeError with attach_file on EmailMessage Django 错误

> ID：15885062
> 
> 赞同：3
> 
> 时间：2013-04-08T17:14:39.737
> 
> 标签：python, django

因此，当我尝试在 Django 中使用 EmailMessage 发送电子邮件时出现此错误。

/checkout/ 处的 UnicodeEncodeError

```
'ascii' codec can't encode character u'\u0161' in position 15: 
```

消息的正文包含一些破坏脚本的 Unicode 字符。

问题是，如果我省略附件或者正文不包含任何 unicode 字符，一切都会正常工作。主题可以包含没有 unicode 错误的 unicode 字符。因此，它仅与正文和附件中的 unicode 字符结合使用。这对我来说似乎是一个错误。

附件是生成的 pdf 文件。

在 Ubuntu 10.04、apache2、mod_wsgi、python 2.6.5、Django 1.5 上运行的代码

我正在使用的代码是

```
t = loader.get_template('orders/invoice_email.html')
c = {
    'order': order,
}

email = EmailMessage(subject, t.render(Context(c)), from_mail, [to, ])
email.encoding = "utf-8"
email.content_subtype = "html"
email.attach_file(invoice.name)
email.send() 
```

和回溯

```
Traceback:
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in     get_response
115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/decorators.py" in _wrapped_view
25\.                 return view_func(request, *args, **kwargs)
File "/var/www/projects/vitamei-shop/modules/orders/views.py" in checkout
48\.             order = form.save()            
File "/var/www/projects/vitamei-shop/modules/orders/forms.py" in save
71\.         email_invoice(order)
File "/var/www/projects/vitamei-shop/vitamei/.././modules/orders/views.py" in email_invoice
320\.     email.send()
File "/usr/local/lib/python2.6/dist-packages/django/core/mail/message.py" in send
255\.         return self.get_connection(fail_silently).send_messages([self])
File "/usr/local/lib/python2.6/dist-packages/django/core/mail/backends/smtp.py" in send_messages
95\.                 sent = self._send(message)
File "/usr/local/lib/python2.6/dist-packages/django/core/mail/backends/smtp.py" in _send
113\.                     force_bytes(message.as_string(), charset))
File "/usr/local/lib/python2.6/dist-packages/django/core/mail/message.py" in as_string
169\.         g.flatten(self, unixfrom=unixfrom)
File "/usr/lib/python2.6/email/generator.py" in flatten
84\.         self._write(msg)
File "/usr/lib/python2.6/email/generator.py" in _write
109\.             self._dispatch(msg)
File "/usr/lib/python2.6/email/generator.py" in _dispatch
135\.         meth(msg)
File "/usr/lib/python2.6/email/generator.py" in _handle_multipart
201\.             g.flatten(part, unixfrom=False)
File "/usr/lib/python2.6/email/generator.py" in flatten
84\.         self._write(msg)
File "/usr/lib/python2.6/email/generator.py" in _write
109\.             self._dispatch(msg)
File "/usr/lib/python2.6/email/generator.py" in _dispatch
135\.         meth(msg)
File "/usr/lib/python2.6/email/generator.py" in _handle_text
178\.         self._fp.write(payload)

Exception Type: UnicodeEncodeError at /checkout/
Exception Value: 'ascii' codec can't encode character u'\u0161' in position 15: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T08:19:24.470

所以在尝试和尝试之后，我找到了一个适合我的解决方案。

```
t = loader.get_template('orders/invoice_email.html')
c = {
        'order': order,
    }

body = u''.join(t.render(Context(c))).encode('utf-8').strip()
email = EmailMessage(subject, body, from_mail, [to, ])
email.encoding = "utf-8"
email.content_subtype = "html"
email.attach_file(invoice.name, mimetype="application/pdf")
email.send() 
```

如果有人遇到同样的问题，我希望这会有所帮助。

# javascript - 将子元素附加到具有相同类的所有 SVG 节点

> ID：15885081
> 
> 赞同：1
> 
> 时间：2013-04-08T17:15:41.287
> 
> 标签：javascript, svg

我有以下代码在 SVG 画布上生成一些随机图像。

我想要做的是使用 //this bit// 注释下的代码将动画节点附加到具有特定类的所有元素。

但是，下面的代码不起作用......对于我的生活，我无法弄清楚为什么，谁能指出我正确的方向

```
function createBackground(){
    var loopLimit = Math.floor((Math.random()*100)+1);

    for(var i=0; i<100; i++)
    {
        var jpgSelecter = Math.floor((Math.random()*10)+1);
        var thisItem = document.createElementNS( svgNS, "image" ); 
        thisItem.setAttributeNS(null,"id","node_" + Math.round(new Date().getTime() / 1000));
        thisItem.setAttributeNS(null,"class","node" + jpgSelecter);
        thisItem.setAttributeNS(null,"x",(Math.random()*500)+1);
        thisItem.setAttributeNS(null,"y",(Math.random()*500)+1);
        thisItem.setAttributeNS(null,"width",(Math.random()*500)+1);
        thisItem.setAttributeNS(null,"height",(Math.random()*500)+1);
        thisItem.setAttributeNS(xlinkns,"xlink:href","images/blobs" + jpgselecter + ".png");

        document.getElementById("SVGcanvas").appendChild(thisItem);
    } 
```

//这个位//

```
 var animate = document.createElementNS( svgNS, "animateTransform" );
    ani.setAttributeNS(null,"name","transform");
    ani.setAttributeNS(null,"begin","0");
    ani.setAttributeNS(null,"type","rotate");
    ani.setAttributeNS(null,"from", "0 180 50");
    ani.setAttributeNS(null,"to","360 180 50");
    ani.setAttributeNS(null,"dur","4");
    ani.setAttributeNS(null,"repeatCount","indefinite");

    var tenner = document.getElementsByClassName("node_10");
    for(i=0; i<tenner.length; i++)
    {
        alert(tenner[i]);
        tenner[i].appendChild(ani);
    }

} 
```

**更新**

我已经编辑了我的代码，这不会引发任何错误，但是动画节点不会被附加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:50:58.953

我看到两个问题：

1.  您创建一个`animate`元素，然后尝试在一个`ani`对象上设置属性并将该对象附加到所有分类元素。

2.  即使更改`animate`为`ani`，也不能将相同的元素附加到多个子元素。您的循环会将元素放在找到的第一个类上，然后将其移动到找到的第二个类，依此类推。相反，您需要为每个项目创建一个副本。所以，要么这样做：

    ```
    for(var i=0; i<tenner.length; i++){
      var ani = document.createElementNS(svgNS,'animateTransform');
      // set all attributes
      tenner[i].appendChild(ani);
    } 
    ```

    …或者这样做：

    ```
    var ani = document.createElementNS(svgNS,'animateTransform');
    // set all attributes
    for(i=0; i<tenner.length; i++){
      tenner[i].appendChild(ani.cloneNode(true));
    } 
    ```

# firefox - 使用 FireBug 显示 DOM 的分层节点结构

> ID：15885082
> 
> 赞同：0
> 
> 时间：2013-04-08T17:15:52.887
> 
> 标签：firefox, dom, firebug

我正在使用 FireFox 20.0 并正在使用 FireBug 来调试我的 JavaScript 代码。当我单击 DOM 标签时，它会显示分层节点结构，其中包含子项、childNodes、nodeValue 等字段。我不小心关闭了选项卡，当我把它带回来时，我无法使用 FireBug 获取此结构。它有几个选项，如“显示用户定义的属性”、“显示用户定义的函数”、“显示 DOM 属性”、“显示 DOM 函数”等，但这些选项都没有显示我之前的子节点结构, 节点值等

如何恢复旧结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:40:22.343

我发现解决问题的最佳方法是单击 FireBug 选项，选择选项，然后选择“重置所有 Firebug 选项”。这将检查 DOM 下的以下内容。
- 显示用户定义的属性
- 显示用户定义的函数
- 显示 DOM 属性
- 仅显示可枚举的属性

通过取消选中“显示用户定义的函数”，我仍然可以得到我想要的。

# c++ - 如何调整操作系统级别的文件描述符以最大程度地提升 ASIO 性能

> ID：15885086
> 
> 赞同：0
> 
> 时间：2013-04-08T17:16:08.107
> 
> 标签：c++, linux, performance, boost-asio, file-descriptor

我正在构建一个 websocket++ 服务器，并且我想确保我能从中获得最后一滴性能。

作者 zaphoyd 曾说过，操作系统级别的文件描述符必须经过适当调整才能拥有 10,000 多个客户端连接。 [https://stackoverflow.com/a/15464445/1382306](https://stackoverflow.com/a/15464445/1382306)

如何为 linux/ubuntu 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:49:08.367

“获得最后一滴性能”不是您可以抽象地做的事情。它根据您的应用程序和环境变化太大。要获得有用的答案，请设置压力/负载测试工具，运行分析器，然后查看问题出在哪里或瓶颈在哪里。除非您这样做并拥有一些真实世界的场景和数字，否则花费在“性能调整”上的任何努力都可能会被浪费掉。

特别是关于调整 Linux 服务器以允许大量并发连接的问题。每个连接都需要一个文件描述符。默认情况下，在 Linux 上，每个进程限制为 1024 个 FD。要一次拥有>~1024 个连接，您需要提高该限制。这不会影响性能，但甚至需要开始考虑在高并发级别进行性能调整。

有关更多信息，请参阅：[https](https://unix.stackexchange.com/questions/36841/why-is-number-of-open-files-limited-in-linux) ://unix.stackexchange.com/questions/36841/why-is-number-of-open-files-limited-in-linux和 [https://serverfault.com/questions/190435/how -to-increase-open-files-limit-for-process-from-1024-to-10240](https://serverfault.com/questions/190435/how-to-increase-open-files-limit-for-process-from-1024-to-10240)

# python - python中区分乱码/错误和外来词/名称的算法或工具？

> ID：15885089
> 
> 赞同：1
> 
> 时间：2013-04-08T17:16:11.430
> 
> 标签：python, nltk

我正在对有时出现乱码的 PDF 文本进行一些机器提取，这通常会导致单词被空格错误地分割，或者单词块的顺序不正确，从而导致纯粹的胡言乱语。

我想要一个工具，它可以扫描并识别这些纯乱码，同时跳过可能是专有名称或只是外语单词的非字典单词。

不确定这是否可能，但如果是的话，我想这样的事情可以使用 NLTK 来完成。我只是想知道是否以前这样做是为了省去重新发明轮子的麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:30:31.737

嗯，我想你可以在字符 n-gram 上训练一个 SVM 或神经网络……但你需要相当长的。问题是这可能会有很高的误报率（抛出你想要的），因为你可以在各种语言中拥有*截然不同*的字符集群率。

以波兰语为例（这是我唯一使用易于输入的拉丁字符的第二语言）。 `Skrzywdy`将是英语中极不可能的一系列字母，但在波兰语中很容易发音。

一种更好的技术可能是使用语言检测来检测文档中使用的语言超过一定概率，然后检查这些语言的字典......

这对于（例如）经常使用各种语言的大量片段的语言学教科书没有帮助。

** 编辑 **

想法2：

你说这是书目信息。元信息（例如它在文本中的位置）或您的 OCR 软件返回给您的任何字体信息几乎肯定比您看到的一系列字符*更重要。*如果它在标题中，或靠近作者所在的位置，或斜体，则值得考虑为外国...

# django - django自定义模板标签中的访问请求，使用标签装饰器

> ID：15885093
> 
> 赞同：1
> 
> 时间：2013-04-08T17:16:24.460
> 
> 标签：django, django-templates

有一道题同题：[django custom template tags中的Access request](https://stackoverflow.com/questions/2160261/access-request-in-django-custom-template-tags)

提出的解决方案，例如传递`takes_context = True`给装饰器对于标签助手（`simple_tag`,`inclusion_tag`和`assignment_tag`）非常有效，但不适用于低级`tag`装饰器。

```
@register.tag(takes_context=True)
def mytag(parser, token):
   ... 
```

引发异常：

> tag() 得到了一个意外的关键字参数“takes_context”

2个问题：

*   `tag`装饰者接受这个`takes_context`论点有什么原因吗？
*   如何使用此装饰器（以及请求对象）访问模板上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:12:53.457

`@register.tag`只接受两个参数：名称和编译函数。我认为您可以尝试在编译函数中`request`传递[令牌参数。](https://docs.djangoproject.com/en/1.5/howto/custom-template-tags/#passing-template-variables-to-the-tag)

UPD：
也可以在 Node`render`方法中访问

```
class TestTagNode(template.Node):
    def render(self, context):
        return context['request'].user

@register.tag
def test_tag(parser, token):
    return TestTagNode() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-22T11:59:10.303

回答 2 个子问题：

> `tag`装饰者接受这个`takes_context`论点有什么原因吗？

这是因为，正如您所说，`tag`它是在模板的较低级别、解析器级别运行的。那时没有上下文。

> 如何使用此装饰器（以及请求对象）访问模板上下文？

我不认为你可以。同样，因为它是解析器级别的东西。一个有趣的例子是`block`标签。为了能够覆盖`block`标签，它使用`extend`标签来传递一些信息。

我正在为类似的情况而苦苦挣扎。我唯一能想到的就是制作中间件来`process_request`重置我在标签中访问的一些全局/单例上下文。但是，如果模板在请求之外呈现，例如在命令中，这将无济于事。

# android - 如何在更昂贵的 Android 设备上确认这个用户代理字符串 Chrome 25+？

> ID：15885096
> 
> 赞同：0
> 
> 时间：2013-04-08T17:16:34.450
> 
> 标签：android, google-chrome, browser, user-agent

我有一个预算平板电脑，因为我只将它用于站点测试，并且我认为检查网站是否也在预算平板电脑上正确呈现是个好主意。它在 Android OS 4.1.1 上运行。Google Chrome 25 的用户代理字符串，在其默认设置中（“请求桌面版本”未勾选）是这样的：

```
Mozilla/5.0 (iPad; U; CPU OS 3_2 like Mac OS X; en-us) AppleWebKit/531.21.10 
(KHTML, like Gecko) Version/4.0.4 Mobile/7B367 Safari/531.21.10 
```

谁能确认这在三星等更昂贵的 Android 设备（手机和平板电脑）上是一样的？[您可以在这里](http://conijnwebdesign.nl/tutorials/client-info.php)轻松测试。与我读到的有关 Chrome Mobile 18 字符串的内容相比，我发现 Chrome 删除了单词`Chrome`and很奇怪。`Android`

我需要它的原因是这个。Android 操作系统只安装了三种字体：Droid Sans、Droid Serif 和 Droid Monospace Sans。甚至不是 Verdana，屏幕上最令人愉悦的字体。为了使 Verdana 粗体、斜体和粗体+斜体也呈现，对于大多数浏览器，所有 4 个 webfont 文件都必须加载（只有 Firefox 移动版似乎能够只使用标准文件来完成）。

Apple 设备已安装所有网络安全字体。以 Android 设备上的浏览器为目标来下载 webfont 文件很容易，但现在对于 Chrome 来说似乎不再可行。但是，在我向 Google 发送投诉之前，我想确定它是第 25 版的移动 Chrome 版本的通用内容，而不仅仅是我预算平板电脑上的内容。

我绝对确定我没有弄错。两周前我买了这款平板电脑，一个 Cresta Android（[见这里）。](https://www.kijkshop.nl/product/137164/cresta-tablet-ctp828/)当我打开它并将其连接到网络时，它会自行更新。当我后来在我的网站上遇到一些字体问题时，我用我放在网上的 PHP 浏览器嗅探器检查了它的 UA 字符串。有了所描述的结果，我现在制作了一个截图：

![屏幕截图 userAgent string Chrome on Cresta Android](https://i.stack.imgur.com/MuhBV.png)

这是我勾选“请求桌面版本”时得到的字符串：

```
Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.22 (KHTML, 
like Gecko) Chrome/25.0.1364.169 Safari/537.22 
```

更奇怪的是这一点。该设备提供删除更新。我只是为 Chrome 做的，然后重新检查。虽然桌面版本字符串更改为 v. 18 和其他一些数字更改，但其默认移动设置中的字符串保持完全相同。没有一个数字、数字或字母与我最初发布的内容有所不同！

我不能完全删除它，所以重新安装不是一种选择。即使是这样，其他拥有这种设备的人也不会知道他们的 Chrome 版本有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:21:39.663

您是否绝对确定这实际上是正在发生的事情。我们从不报告 iPad 或 Safari，除非您在测试时通过 Devtools 对其进行了更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T16:50:19.507

我的平板电脑的 chrome 报告类似 - 它已经从 google play 商店更新了几次，它仍然假装是 ipad - 这对于像我这样的网络开发人员来说是一个真正的问题，确切的字符串和你的一样：

```
Mozilla/5.0 (iPad; U; CPU OS 3_2 like Mac OS X; en-us) AppleWebKit/531.21.10 
(KHTML, like Gecko) Version/4.0.4 Mobile/7B367 Safari/531.21.10 
```

# javascript - 强制 iframe 中的 PDF 链接在父窗口中打开

> ID：15885100
> 
> 赞同：1
> 
> 时间：2013-04-08T17:16:43.370
> 
> 标签：javascript, html, pdf, iframe, confluence

我正在尝试在 Confluence 页面中实现这一点。

基本上，我有一个 PDF 文件（从 Powerpoint 导出），其中嵌入了超链接，因此当您单击 PDF 中的链接时，它会打开链接所在的任何页面。

此 PDF 文件在 Confluence 页面的 iframe 中打开（使用自定义用户宏创建）。

不幸的是，在 Firefox 和 IE 上，PDF 链接在 iframe 中打开新页面，而不是在父窗口中打开。Chrome 的内置 PDF 查看器工作正常（在父窗口中打开）。

同样不幸的是，我对 javascript 或 HTML 不太了解。我们目前在 Confluence 中用于“创建 iframe”自定义宏的代码如下：

```
## @param Url:title=URL|type=string|required=true|desc=URL for the iFrame 
<script type="text/javascript"> 
jQuery(function($) { 
    var ratio = Math.sqrt(2); 
    var target = $("#f"); 

    function fixRatio() { 
          target.width("100%"); 
          if (target.width() > 1000) { 
                  target.width(1000); 
          } 
        target.height(Math.ceil(target.width() / ratio)); 
    } 

    $(window).bind("resize", fixRatio); 

    fixRatio(); 
}); 
</script> 

<iframe id="f" src="$paramUrl" width="100%" style="border:0">x</iframe> 
```

现在，其中大部分只是将 iframe 的大小调整为 PDF 文件（出于美学原因）。

基本上我想知道的是如何从不在 iframe 中而是在父窗口中打开的 PDF 中获取任何链接？

我考虑过对 iframe 窗口卸载执行操作，例如

```
window.onunload=function() 
```

在 javascript 中，或

```
<body onunload="somecode"> 
```

在 HTML 中，但我不确定在哪里放置它或者我需要强制将新页面传递给父窗口并在那里呈现而不是 iframe 的代码是什么。

我试过了

```
<base target="_parent" /> 
```

但是因为 PDF 查看器与 iframe 中的页面其余部分是分开的，所以它似乎不起作用。

抱歉，我对此很陌生，我们确实有人帮助我们，但他编写了代码然后没有留下来帮助解决任何问题，而且我今天才看到我的第一个 HTML 和 javascript！所以想快速学习...

谢谢！

# xml - 有什么不同？在上下文参数中指定文件与使用导入？

> ID：15885105
> 
> 赞同：3
> 
> 时间：2013-04-08T17:16:58.037
> 
> 标签：xml, spring, import, applicationcontext

Spring 和 Hibernate 堆栈。

我看到我们可以在标签`web.xml`下的文件中指定多个文件。`<context-param>`

```
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/appcontext.xml, hibernateconfig.xml</param-value>
</context-param> 
```

我们也可以从`appcontext.xml`文件中加载配置文件：

```
appcontext.xml:

<import resource="hibernateconfig.xml"/> 
```

有什么区别或这两者完全不同？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T05:47:30.210

除了灵活性之外，我在早期项目中注意到的一个主要区别是，如果您的上下文文件相互依赖，那么它可能会导致问题。假设在您的 appcontext.xml 文件中，您正在为某些 DAO 类导入 bean 定义，而这又依赖于 hibernateconfig.xml。如果你给这样的条目

```
<param-value>/WEB-INF/appcontext.xml, hibernateconfig.xml</param-value> 
```

在 web.xml 中，DAO bean 将在没有 sessionFactory（来自 hibernateconfig）注入的情况下加载。这有时会导致 HibernateExceptions。在这种情况下，您可以做的是在 dao 上下文导入之前在 appContext.xml 中导入 hibernateconfig.xml，如下所示：

```
appcontext.xml:

<import resource="hibernateconfig.xml"/>
<import resource="dao-config.xml"/> 
```

这将确保在 dao 配置之前加载 hibernate 配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:56:44.703

这是为了灵活性。

如果您需要使用多个 Spring 配置文件，您会怎么做？

1.  在您的 web.xml 中，您可以指定这两个文件，就像在第一个示例中一样，因为您无法将`import`元素添加到其中任何一个。
2.  您可以创建一个`import`'ed 两者的新文件。

任何一个都可以，因为灵活性是 Spring 所追求的。

作为参考，这里是每个部分的一些文档： [import element](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-xml-import)，[contextConfigLocation](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#context-create)

虽然它们都用于完全相同的事情，但 contextConfigLocation 似乎支持 Ant-Style 模式匹配，而 import 元素可能不支持。

# tfs - 我可以手动覆盖变更集 ID 吗？

> ID：15885106
> 
> 赞同：0
> 
> 时间：2013-04-08T17:16:58.467
> 
> 标签：tfs

我正在尝试从 SVN 切换到 TFS，我想知道是否有任何方法可以手动设置 TFS 变更集 ID 以匹配我的 SVN 修订号。我有一些内部工具可以根据 SVN 版本执行一些自动化任务，如果版本号从 2,050 变回 1，它们都会停止工作。

我确信这并不是处理这些内部流程的最佳方式，但它对我们有用，我们可能只会在接下来的 12-18 个月内使用这些工具，所以我真的不想重写他们。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:04:21.823

我怀疑您是否可以设置 TFS 变更集 ID。但是，通常在源代码控制系统之间迁移时，您会使用一些工具/脚本来迁移历史记录，创建与内容中的原始签入匹配的签入（但不是在 ID 中），这可能会根据您的工具的喜好设置变更集 ID .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:29:22.010

它由`tbl_ChangeSet.ChangeSetId`集合 DB 中的 in 字段控制。这是一个技巧，但您应该能够删除主键约束，为其分配任何值，然后重新设置主键。

一种更安全的方法是创建自定义[**签入注释**](http://msdn.microsoft.com/en-us/library/ms181460)（“SVN 修订版”）来存储原始修订号。

# r - 从矩阵创建数据框

> ID：15885111
> 
> 赞同：56
> 
> 时间：2013-04-08T17:17:25.853
> 
> 标签：r, matrix, dataframe

如何获得与现有矩阵具有相同数据的数据框？

我的矩阵的简化示例：

```
mat <- matrix(c(0, 0.5, 1, 0.1, 0.2, 0.3, 0.3, 0.4, 0.5),
              ncol = 3, nrow = 3,
              dimnames = list(NULL, c("time", "C_0", "C_1")))

> mat
     time C_0 C_1
[1,]  0.0 0.1 0.3
[2,]  0.5 0.2 0.4
[3,]  1.0 0.3 0.5 
```

我想创建一个如下所示的数据框：

```
 name   time   val
1    C_0    0.0    0.1
2    C_0    0.5    0.2
3    C_0    1.0    0.3
4    C_1    0.0    0.3
5    C_1    0.5    0.4
6    C_1    1.0    0.5 
```

我所有的尝试都很笨拙，例如：

```
data.frame(cbind(c(rep("C_1", 3), rep("C_2", 3)),
                 rbind(cbind(mat[,"time"], mat[,"C_0"]),
                       cbind(mat[,"time"], mat[,"C_1"])))) 
```

有谁知道如何更优雅地做到这一点？请注意，我的真实数据还有几列（40 列）。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-08T18:02:32.857

如果将`time`列更改为行名，则可以`as.data.frame(as.table(mat))`用于这样的简单情况。

例子：

```
data <- c(0.1, 0.2, 0.3, 0.3, 0.4, 0.5)
dimnames <- list(time=c(0, 0.5, 1), name=c("C_0", "C_1"))
mat <- matrix(data, ncol=2, nrow=3, dimnames=dimnames)
as.data.frame(as.table(mat))
  time name Freq
1    0  C_0  0.1
2  0.5  C_0  0.2
3    1  C_0  0.3
4    0  C_1  0.3
5  0.5  C_1  0.4
6    1  C_1  0.5 
```

在这种情况下，时间和名称都是因素。您可能希望将时间转换回数字，或者它可能无关紧要。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-08T17:37:58.300

您可以`stack`从基础包中使用。但是，您首先需要将矩阵强制转换为 a`data.frame`并在数据堆叠后重新排序列。

```
mat <- as.data.frame(mat)
res <- data.frame(time= mat$time,stack(mat,select=-time))
res[,c(3,1,2)]

  ind time values
1 C_0  0.0    0.1
2 C_0  0.5    0.2
3 C_0  1.0    0.3
4 C_1  0.0    0.3
5 C_1  0.5    0.4
6 C_1  1.0    0.5 
```

请注意，这`stack`通常比`reshape2`包更有效。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-08T17:31:28.173

`melt()`从**reshape2**包让你接近......

```
library(reshape2)
(res <- melt(as.data.frame(mat), id="time"))
#   time variable value
# 1  0.0      C_0   0.1
# 2  0.5      C_0   0.2
# 3  1.0      C_0   0.3
# 4  0.0      C_1   0.3
# 5  0.5      C_1   0.4
# 6  1.0      C_1   0.5 
```

...尽管您可能希望对其结果进行后处理以获取您喜欢的列名和排序。

```
setNames(res[c("variable", "time", "value")], c("name", "time", "val"))
#   name time val
# 1  C_0  0.0 0.1
# 2  C_0  0.5 0.2
# 3  C_0  1.0 0.3
# 4  C_1  0.0 0.3
# 5  C_1  0.5 0.4
# 6  C_1  1.0 0.5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-10T02:29:32.370

使用`dplyr`和`tidyr`：

```
library(dplyr)
library(tidyr)

df <- as_data_frame(mat) %>%      # convert the matrix to a data frame
  gather(name, val, C_0:C_1) %>%  # convert the data frame from wide to long
  select(name, time, val)         # reorder the columns

df
# A tibble: 6 x 3
   name  time   val
  <chr> <dbl> <dbl>
1   C_0   0.0   0.1
2   C_0   0.5   0.2
3   C_0   1.0   0.3
4   C_1   0.0   0.3
5   C_1   0.5   0.4
6   C_1   1.0   0.5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-28T20:30:57.480

我发现以下“作弊”可以非常整洁且无错误地工作

```
> dimnames <- list(time=c(0, 0.5, 1), name=c("C_0", "C_1"))
> mat <- matrix(data, ncol=2, nrow=3, dimnames=dimnames)
> head(mat, 2) #this returns the number of rows indicated in a data frame format
> df <- data.frame(head(mat, 2)) #"data.frame" might not be necessary 
```

瞧！

# android - 获取所有子编辑框的值

> ID：15885113
> 
> 赞同：-1
> 
> 时间：2013-04-08T17:17:33.403
> 
> 标签：android, android-edittext

这段代码是否**完全**正确？

```
myRLayout = (RelativeLayout) findViewById( R.id.rel_layout );

for(int i = 0; i < myRLayout.getChildCount(); i++) {
View v = myRLayout.getChildAt(i);
if(v instanceof EditText) {
       TextView res = (TextView) findViewById(R.id.result_text);
       String str1 = ((EditText) findViewById(R.id.edittext_1)).getText().toString();
       String str2 = ((EditText) findViewById(R.id.edittext_2)).getText().toString();
       res.setText(str1+str2);
    }
} 
```

我为什么要问？对于每次迭代，只有一个 EditText 起作用还是一次全部一起起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:21:03.620

使用`v`Child 的实例从 all 中获取值`EditText`并`TextView.append`用于在`TextView`. 试试看：

```
TextView res = (TextView) findViewById(R.id.result_text);
res.setText(""); //<< clear textview here
for(int i = 0; i < myRLayout.getChildCount(); i++) {
 View v = myRLayout.getChildAt(i);
 if(v instanceof EditText) {
       String str1 = v.getText().toString();  //<< get text from ith EditText
       res.append(str1);  // append value to result_text TextView
    }
} 
```

# php - PHP脚本中创建MySql表的一些问题

> ID：15885116
> 
> 赞同：-2
> 
> 时间：2013-04-08T17:17:53.880
> 
> 标签：php, mysql, database, rdbms

我正在尝试在我的服务器上安装一个用于统计的 php 脚本。

该脚本使用 MySql 作为数据库。问题是，当我尝试安装它时，似乎无法在数据库中创建表并给我以下错误消息：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 'TYPE=MyISAM' 附近使用正确的语法
> 
> 查询：CREATE TABLE phpmv_a_category (id int(10) unsigned NOT NULL auto_increment, name varchar(100) default NULL, PRIMARY KEY (id)) TYPE=MyISAM

这些表以这种方式在 php 文件中创建：

```
$create['a_category'] = 
"CREATE TABLE ".DB_TABLES_PREFIX.'a_category'." (
  id int(10) unsigned NOT NULL auto_increment,
  name varchar(100) default NULL,
  PRIMARY KEY  (id)
) TYPE=MyISAM
"; 
```

问题出在哪里？

Tnx安德拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:20:07.710

根据手册，已弃用，并在 MySQL 5.5 中`TYPE`被替换为[CREATE TABLE](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)的文档。`ENGINE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:19:25.073

不是`TYPE`，而是`ENGINE`

```
ENGINE=MyISAM 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/060f6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:19:26.747

你错过了一个“;” 之后`ENGINE=MyISAM`。

# vba - 在 VBA 中使用单元格值引用来确定范围

> ID：15885118
> 
> 赞同：1
> 
> 时间：2013-04-08T17:18:01.250
> 
> 标签：vba, excel, reference, range

我知道这是一个非常基本的问题，但我仍在努力培养我的 VBA 技能。我处于一个困境中，我已经将收到的各种报告制作成一个映射系统，这些报告被放置在一个已编译的工作簿中。这些报告具有完全不同的格式等。我有一个复制/粘贴宏，可以复制列并将它们放置在已编译工作簿上的正确位置。

但是，我遇到了很多重复/空行搞砸了我的宏的情况。我使用了两个 VBA 函数来解决这个问题，一个是“如果参考列为空白则删除行”：

```
Sub DeleteBlankARows()
With Application
    .Calculation = xlCalculationManual
    .ScreenUpdating = False
    Dim r As Long
    For r = Cells(Rows.Count, 6).End(xlUp).Row To 1 Step -1
        If Cells(r, 6) = "" Then Rows(r).Delete
    Next r
    .Calculation = xlCalculationAutomatic
    .ScreenUpdating = True
End With End Sub 
```

这将删除 F 列中的单元格为空的行

我还使用复制/粘贴宏：

```
Sub CopyUntilBlank()
Dim last_row As Integer
last_row = Range("f1").End(xlDown).Row

Dim rng As Range
Set rng = Range("d2:d" & last_row)

For Each cell In rng.Cells
    cell.Activate
    If ActiveCell.Value = "" Then
        ActiveCell.Value = ActiveCell.Offset(-1, 0).Value
    End If
Next cell End Sub 
```

这将复制并粘贴 D 列中的空白行，直到您点击一个非空白单元格，然后重新执行此操作，直到 F 列中的值范围。

这些宏对我来说效果很好，但是因为我有多个这样的工作表，所以我想创建一个使范围动态的单元格引用。例如：在 DeleteBlankRows 宏中，我希望根据 sheet1 中的单元格值确定 Cells(r,6) 中的列引用 - 例如，如果工作表 1 上的单元格 A1 中的值为 2，它将改变列对“2”的引用（B 列）。

我希望复制/粘贴宏也能发生同样的情况。我很确定这只是对 A1.Value 的一些参考，但我不知道如何正确编写这样的东西。

感谢您的支持，在社区的所有支持下，我已经走了很长一段路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:30:35.317

使用您的第一个子的示例：

```
Sub DeleteBlankARows(colIndex as Long)
Dim colIndex as long
colIndex = Sheet1.Range("a1").value
With Application
    .Calculation = xlCalculationManual
    .ScreenUpdating = False
    Dim r As Long
    For r = Cells(Rows.Count, colIndex).End(xlUp).Row To 1 Step -1
        If Cells(r, colIndex) = "" Then Rows(r).Delete
    Next r
    .Calculation = xlCalculationAutomatic
    .ScreenUpdating = True
End With 
End Sub 
```

从您的问题中不清楚第二个子中的哪一列需要是动态的（或两者都需要？）

**编辑**试试这个：

```
Sub CopyUntilBlank()
    Dim last_row As Long, col1 as Long, col2 as Long
    Dim rng as Range

    col1 = Sheet1.Range("a2").value
    col2 = Sheet1.Range("a3").value

    last_row = Cells(1, col1).End(xlDown).Row
    'This next line is better if there's any chance
    '  of blanks in this column
    'last_row = Cells(Rows.Count, col1).End(xlUp).Row

    With ActiveSheet
        Set rng = .Range(.Cells(2, col2), .Cells(last_row, col2)) 
    End With

    For Each cell In rng.Cells
      If cell.Value = "" Then
        cell.Value = cell.Offset(-1, 0).Value
      End If
    Next cell

End Sub 
```

# javascript - 加载一个 AJAX 事件会导致所有其他事件在处理之前等待它

> ID：15885120
> 
> 赞同：1
> 
> 时间：2013-04-08T17:18:08.983
> 
> 标签：javascript, jquery, ajax

我有一个处理业务数据的单页应用程序。我正在使用 jQuery .ajax()。

在提交表单时，我们通过 AJAX 加载请求。没问题，“页面”现在已完全加载。当它完成加载时，我发送另一个包含大量信息的 AJAX 请求——它是一个加载大量业务统计信息的框。这最多可能需要 15 秒。在此期间，浏览器不会处理另一个 AJAX 请求，在这种情况下，它是一系列通过 AJAX 加载其他页面的导航链接。它将**启动**请求，但在统计 AJAX 完成加载之前，它似乎无法加载任何内容。即使当我访问一个仅仅是 HTML 的导航页面时也是如此。（所以它应该立即加载）

我没有使用异步：假。请求如下所示：

```
$.ajax({
    type:'POST',
    url: 'load_navigation',
    data: passed_data,
    success: function(data) {
        $('#div-to-put-result').html(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:32:02.450

我唯一的想法是连接限制。请参考：[浏览器中的最大并行 http 连接数？](https://stackoverflow.com/a/985704/1828986). 我读到当你使用低带宽连接时它可以被限制得更强，但目前没有参考。作为**测试**`IFRAME`，您可以使用 get request 而不是 post ( )隐藏`$.param(passed_data)`。要获取数据，请使用以下内容：

```
var uploadIframe = $("IFRAME");
uploadIframe.load(function() {
    var iframeBody = uploadIframe.contents().find("body");
    data = iframeBody.text();
}); 
```

祝你好运！

# assembly - 使用 PIC16F877 中的所有三个指针

> ID：15885123
> 
> 赞同：1
> 
> 时间：2013-04-08T17:18:19.143
> 
> 标签：assembly, pic

您好，有人可以帮助我了解如何使用 PIC16F877 中的三个指针同时使用多个指针，“FSR 和 INDF”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:34:53.443

如果您曾经阅读过 PIC16F877 数据表，就会发现在 PIC16F877 MCPU 下只有一个名为 FSR 的间接寻址寄存器。通过连接 8 位 FSR 寄存器和 IRP 位 (STATUS.7) 获得有效的 9 位地址。启动 FSR 地址后，您可以通过 INDF 寄存器访问寻址寄存器。

# c# - 从 DataGridView winforms 中的数据库中删除数据行？

> ID：15885125
> 
> 赞同：0
> 
> 时间：2013-04-08T17:18:28.167
> 
> 标签：c#, winforms, datagridview, sql-update

我想从数据库中删除该行数据，目前我可以通过单击删除按钮删除该行数据，但是数据库表没有更新，我该怎么做？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace project
{
    public partial class frmTestPrint : Form
    {
        public frmTestPrint()
        {
            InitializeComponent();
        }

        private void frmTestPrint_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'usersDataSet1.Booking' table. You can move, or remove it, as needed.
            this.bookingTableAdapter.Fill(this.usersDataSet1.Booking);

        }

        private void btnDelete_Click(object sender, EventArgs e)
        {
            dataGridView1.Rows.RemoveAt(dataGridView1.CurrentRow.Index);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:39:50.413

```
private void Delete()
    {

        int i = 0;
        con1 = getConnection();
        con1.Open();
        SqlCommand storedProcedureCommand = con1.CreateCommand();
        storedProcedureCommand.CommandType = CommandType.Text;
        storedProcedureCommand.CommandText = "DELETE FROM name of your table WHERE pkeyID = @pkeyID";

        SqlParameter inparam2 = new SqlParameter("@pkeyID", SqlDbType.Int);
        inparam2.Direction = ParameterDirection.Input;
        inparam2.Value = Convert.ToInt32(dataGridView2.Rows[i].Cells[0].Value);
        storedProcedureCommand.Parameters.Add(inparam2);
        storedProcedureCommand.ExecuteNonQuery();

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-04T18:44:35.467

这只是一次删除一个。我仍在处理多个删除。

```
 if (MessageBox.Show("Sure you wanna delete?", "Warning", MessageBoxButtons.YesNo) == System.Windows.Forms.DialogResult.Yes)
        {
            //get the index from the dataGridView
            int rowIndex = table1DataGridView.CurrentCell.RowIndex;
            //Remove from both the actual database & datagridview
            table1BindingSource.RemoveAt(rowIndex);
            //update table 1
            this.table1TableAdapter.Update(this.maquinasDataSet.Table1);
            //load table 1
            this.table1TableAdapter.Fill(this.maquinasDataSet.Table1);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:26:46.967

您实际上根本没有影响数据库。也许这会有所帮助：

[如何删除选定的 DataGridViewRow 并更新已连接的数据库表？](https://stackoverflow.com/questions/2084346/delete-selected-row-from-datagridview-and-update-db?rq=1)

您是否探索过使用 TableAdapter 获得的 .Update 方法？我认为这应该涵盖你所追求的。 [http://msdn.microsoft.com/en-us/library/bz9tthwx(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bz9tthwx(v=vs.100).aspx)

这是否有效：

```
private void btnDelete_Click(object sender, EventArgs e)
    {
        dataGridView1.Rows.RemoveAt(dataGridView1.CurrentRow.Index);
        this.bookingTableAdapter.Update(this.usersDataSet1.Booking);
    } 
```

如果这不起作用，您将不得不返回错误消息或希望知道他们在做什么的人可以保释我...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-21T13:07:33.307

[使用 DataGridviewBUttonColumn 从数据网格中删除一个值](http://i.stack.imgur.com/6YGBu.jpg)

```
private void delete_record()
    {

         if (dataGridView1.Rows.Count > 1 && dataGridView1.SelectedRows[0].Index != dataGridView1.Rows.Count - 1)
        {
            try
            {
                //am taking connection string using a class called "sqlconnection_imventory()"
                SqlConnection conn = Connection.sqlconnection_imventory();
                //Cell[0] is my button column & Cell[1] is SID coumn
                string a = dataGridView1.SelectedRows[0].Cells[1].Value.ToString();
                string sql = "DELETE FROM grades WHERE SID='" + a + "'";
                conn.Open();
                SqlCommand delcmd = new SqlCommand(sql, conn);
                delcmd.Connection = conn;
                delcmd.ExecuteNonQuery();
                conn.Close();
                dataGridView1.Rows.RemoveAt(dataGridView1.SelectedRows[0].Index);
                MessageBox.Show("deleted");
            }
            catch (Exception)
            {

                throw;
            } 
        }
    } 
```

# forms - 验证用户输入的 2 个电子邮件地址

> ID：15885129
> 
> 赞同：0
> 
> 时间：2013-04-08T17:18:44.170
> 
> 标签：forms

我是 Ajax 的新手，需要使用 Ajax 提供一个自我验证的注册表单。我正在比较 2 个电子邮件地址文本字段：

```
$("#email2").change(function() 
      { //if theres a change in the email textbox
        var email1 = $("#email1").val();//Get the value in the email textbox
        var email2 = $("#email2").val();
        $("#email_format2").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking format');
          //Add a loading image in the span id="availability_status"
         if(email1 != $email2){
            $("#email_format2").html('<img src="not_available.png" align="absmiddle"> <font color="red">Email does not match </font>')
        }
        else{
            $("#email_format2").html('<img src="available.png" align="absmiddle"> <font color="Green"> Email match </font>  ');
        }
      return false;
      }); 
```

上面的代码有什么问题吗，除了 loader.gif 旋转等待某些事情发生之外什么都没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:21:20.137

请检查您的代码

```
if(email1 != $email2) 
```

$email2 不是正确的方法

它应该是

```
if(email1!=email2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:26:35.227

只需删除 email2 之前的 $ 符号，然后重试...

```
if(email1 != $email2) 
```

# .net - Windows 批处理脚本中的文件/文件夹选择器对话框

> ID：15885132
> 
> 赞同：48
> 
> 时间：2013-04-08T17:18:49.237
> 
> 标签：.net, windows, powershell, batch-file, cmd

通常，要求用户为批处理脚本提供文件名是一件很麻烦的事情，需要没有拼写错误、在路径周围加上空格等等。不幸的是，用户并不以准确性着称。在直到运行时才知道输入文件位置的情况下，使用 GUI 进行文件选择输入可以减少用户出错的可能性。

有没有办法`File... Open`从 Windows 批处理脚本调用样式 gui 文件选择器或文件夹选择器？

如果脚本用户安装了 PowerShell 或 .NET，则可以。请参阅下面的答案。

我也有兴趣看看其他人可以提供哪些其他解决方案。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-08T17:18:49.237

### 文件浏览器

**2016.3.20 更新：**

由于 PowerShell 是当今几乎所有现代 Windows 安装的本机组件，因此我声明不再需要 C# 后备。如果您仍然需要它来兼容 Vista 或 XP，我[将其移至新答案](https://stackoverflow.com/a/36156326/1683264)。从这个编辑开始，我将脚本重写为 Batch + PowerShell 混合体，并结合执行多选的能力。它更容易阅读和根据需要进行调整。

```
<# : chooser.bat
:: launches a File... Open sort of file chooser and outputs choice(s) to the console
:: https://stackoverflow.com/a/15885133/1683264

@echo off
setlocal

for /f "delims=" %%I in ('powershell -noprofile "iex (${%~f0} | out-string)"') do (
    echo You chose %%~I
)
goto :EOF

: end Batch portion / begin PowerShell hybrid chimera #>

Add-Type -AssemblyName System.Windows.Forms
$f = new-object Windows.Forms.OpenFileDialog
$f.InitialDirectory = pwd
$f.Filter = "Text Files (*.txt)|*.txt|All Files (*.*)|*.*"
$f.ShowHelp = $true
$f.Multiselect = $true
[void]$f.ShowDialog()
if ($f.Multiselect) { $f.FileNames } else { $f.FileName } 
```

这将产生一个文件选择器对话框。

![文件选择器](https://i.stack.imgur.com/seGHw.png)

选择的结果输出`You chose C:\Users\me\Desktop\tmp.txt`到控制台。如果要强制选择单个文件，只需将`$f.Multiselect`属性更改为`$false`.

（PowerShell 命令无情地从[Just Tinkering 博客](http://justtinkering.wordpress.com/2011/05/14/use-file-open-dialog-in-powershell/)中窃取。）请参阅[OpenFileDialog 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)文档以了解您可以设置的其他属性，例如`Title`和`InitialDirectory`。

* * *

### 文件夹浏览器

**2015.08.10 更新：**

由于已经有一个[调用文件夹选择器](https://stackoverflow.com/a/15906994/1683264)的 COM 方法，因此构建一个可以打开文件夹选择器并输出路径的 PowerShell 单行器非常容易。

```
:: fchooser.bat
:: launches a folder chooser and outputs choice to the console
:: https://stackoverflow.com/a/15885133/1683264

@echo off
setlocal

set "psCommand="(new-object -COM 'Shell.Application')^
.BrowseForFolder(0,'Please choose a folder.',0,0).self.path""

for /f "usebackq delims=" %%I in (`powershell %psCommand%`) do set "folder=%%I"

setlocal enabledelayedexpansion
echo You chose !folder!
endlocal 
```

在该`BrowseForFolder()`方法中，第四个参数指定层次结构的根。有关有效值的列表，请参阅[ShellSpecialFolderConstants](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774096%28v=vs.85%29.aspx)。

这会产生一个文件夹选择器对话框。

![在此处输入图像描述](https://i.stack.imgur.com/Y5zXQ.png)

选择的结果输出`You chose C:\Users\me\Desktop`到控制台。

有关可以设置的其他属性，请参阅[FolderBrowserDialog 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.aspx)文档，例如`RootFolder`. `System.Windows.Forms`如果需要，可以在此答案的[修订版 4](https://stackoverflow.com/revisions/15885133/4)中找到我原来的 .NET PowerShell 和 C# 解决方案，但这种 COM 方法更易于阅读和维护。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-05-06T19:00:50.820

这应该从 XP 向上工作并且不需要 hibrid 文件，它只是使用长命令行运行 mshta：

```
@echo off
set dialog="about:<input type=file id=FILE><script>FILE.click();new ActiveXObject
set dialog=%dialog%('Scripting.FileSystemObject').GetStandardStream(1).WriteLine(FILE.value);
set dialog=%dialog%close();resizeTo(0,0);</script>"

for /f "tokens=* delims=" %%p in ('mshta.exe %dialog%') do set "file=%%p"
echo selected  file is : "%file%"
pause 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-09T16:06:37.100

# Windows 脚本宿主

* * *

### 文件选择

Windows XP 有一个神秘的`UserAccounts.CommonDialog`WSH 对象[，它允许 VBScript](http://www.robvanderwoude.com/vbstech_ui_fileopen.php)和 JScript 启动文件选择提示。显然，这被[认为是一种安全风险](http://blogs.technet.com/b/heyscriptingguy/archive/2009/05/15/quick-hits-friday-the-scripting-guys-respond-to-a-bunch-of-questions-05-15-09.aspx#EYAAC)，并在 Vista 中被删除。

* * *

### 文件夹选择

但是，WSH Shell.Application 对象的[BrowseForFolder](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774065%28v=vs.85%29.aspx)方法仍然允许创建文件夹选择对话框。这是一个混合批处理 + JScript 示例。`.bat`使用扩展名保存它。

```
@if (@a==@b) @end /*

:: fchooser2.bat
:: batch portion

@echo off
setlocal

for /f "delims=" %%I in ('cscript /nologo /e:jscript "%~f0"') do (
    echo You chose %%I
)

goto :EOF

:: JScript portion */

var shl = new ActiveXObject("Shell.Application");
var folder = shl.BrowseForFolder(0, "Please choose a folder.", 0, 0x00);
WSH.Echo(folder ? folder.self.path : ''); 
```

![文件夹选择对话框](https://i.stack.imgur.com/Vayur.png)

在该`BrowseForFolder()`方法中，第四个参数指定层次结构的根。有关有效值的列表，请参阅[ShellSpecialFolderConstants](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774096%28v=vs.85%29.aspx)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-01-28T03:30:41.033

可以使用纯批处理完成文件/文件夹选择，如下所示。当然，感觉和外观不如 GUI 令人愉悦，但它工作得非常好，在我看来它比 GUI 版本更易于使用。选择方法是基于CHOICE命令的，所以需要在不包含它的Windows版本中下载它并稍微修改它的参数。当然，可以很容易地修改代码以使用 SET /P 代替 CHOICE，但这种更改将消除非常简单快速的选择方法，只需按一下键即可导航和选择。

```
@echo off
setlocal

rem Select a file or folder browsing a directory tree
rem Antonio Perez Ayala

rem Usage examples of SelectFileOrFolder subroutine:

call :SelectFileOrFolder file=
echo/
echo Selected file from *.* = "%file%"
pause

call :SelectFileOrFolder file=*.bat
echo/
echo Selected Batch file = "%file%"
pause

call :SelectFileOrFolder folder=/F
echo/
echo Selected folder = "%folder%"
pause

goto :EOF

:SelectFileOrFolder resultVar [ "list of wildcards" | /F ]

setlocal EnableDelayedExpansion

rem Process parameters
set "files=*.*"
if "%~2" neq "" (
   if /I "%~2" equ "/F" (set "files=") else set "files=%~2"
)

rem Set the number of lines per page, max 34
set "pageSize=30"
set "char=0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"

rem Load current directory contents
set "name[1]=<DIR>  .."
:ProcessThisDir
set "numNames=1"
for /D %%a in (*) do (
   set /A numNames+=1
   set "name[!numNames!]=<DIR>  %%a"
)
for %%a in (%files%) do (
   set /A numNames+=1
   set "name[!numNames!]=       %%a"
)
set /A numPages=(numNames-1)/pageSize+1

rem Show directory contents, one page at a time
set start=1
:ShowPage
set /A page=(start-1)/pageSize+1, end=start+pageSize-1
if %end% gtr %numNames% set end=%numNames%
cls
echo Page %page%/%numPages% of %CD%
echo/
if %start% equ 1 (set base=0) else set "base=1"
set /A lastOpt=pageSize+base, j=base
for /L %%i in (%start%,1,%end%) do (
   for %%j in (!j!) do echo     !char:~%%j,1! -  !name[%%i]!
   set /A j+=1
)
echo/

rem Assemble the get option message
if %start% equ 1 (set "mssg=: ") else (set "mssg= (0=Previous page")
if %end% lss %numNames% (
   if "%mssg%" equ ": " (set "mssg= (") else set "mssg=%mssg%, "
   set "mssg=!mssg!Z=Next page"
)
if "%mssg%" neq ": " set "mssg=%mssg%): "

:GetOption
choice /C "%char%" /N /M "Select desired item%mssg%"
if %errorlevel% equ 1 (
   rem "0": Previous page or Parent directory
   if %start% gtr 1 (
      set /A start-=pageSize
      goto ShowPage
   ) else (
      cd ..
      goto ProcessThisDir
   )
)
if %errorlevel% equ 36 (
   rem "Z": Next page, if any
   if %end% lss %numNames% (
      set /A start+=pageSize
      goto ShowPage
   ) else (
      goto GetOption
   )
)
if %errorlevel% gtr %lastOpt% goto GetOption
set /A option=start+%errorlevel%-1-base
if %option% gtr %numNames% goto GetOption
if defined files (
   if "!name[%option%]:~0,5!" neq "<DIR>" goto endSelect
) else (
   choice /C OS /M "Open or Select '!name[%option%]:~7!' folder"
   if errorlevel 2 goto endSelect
)
cd "!name[%option%]:~7!"
goto ProcessThisDir

:endSelect
rem Return selected file/folder
for %%a in ("!name[%option%]:~7!") do set "result=%%~Fa"
endlocal & set "%~1=%result%
exit /B 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-05-01T10:37:22.927

在批处理中直接运行 PowerShell 命令的其他解决方案

```
rem preparation command
set pwshcmd=powershell -noprofile -command "&{[System.Reflection.Assembly]::LoadWithPartialName('System.windows.forms') | Out-Null;$OpenFileDialog = New-Object System.Windows.Forms.OpenFileDialog; $OpenFileDialog.ShowDialog()|out-null; $OpenFileDialog.FileName}"

rem exec commands powershell and get result in FileName variable
for /f "delims=" %%I in ('%pwshcmd%') do set "FileName=%%I"

echo %FileName% 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-03-22T13:54:40.087

### Batch + PowerShell + C# 多语言解决方案

[这与Batch + PowerShell 混合](https://stackoverflow.com/a/15885133/1683264)解决方案相同，但重新添加了 C# 后备内容以兼容 XP 和 Vista。[应 xNightmare67x 的要求](https://stackoverflow.com/questions/15885132/file-folder-chooser-dialog-from-a-windows-batch-script/15885133#comment59928413_15885133)添加了多个文件选择。

```
<# : chooser_XP_Vista.bat
:: // launches a File... Open sort of file chooser and outputs choice(s) to the console
:: // https://stackoverflow.com/a/36156326/1683264

@echo off
setlocal enabledelayedexpansion

rem // Does powershell.exe exist within %PATH%?

for %%I in ("powershell.exe") do if "%%~$PATH:I" neq "" (
    set chooser=powershell -noprofile "iex (${%~f0} | out-string)"
) else (

    rem // If not, compose and link C# application to open file browser dialog

    set "chooser=%temp%\chooser.exe"

    >"%temp%\c.cs" (
        echo using System;
        echo using System.Windows.Forms;
        echo class dummy {
        echo    public static void Main^(^) {
        echo        OpenFileDialog f = new OpenFileDialog^(^);
        echo        f.InitialDirectory = Environment.CurrentDirectory;
        echo        f.Filter = "Text Files (*.txt)|*.txt|All Files (*.*)|*.*";
        echo        f.ShowHelp = true;
        echo        f.Multiselect = true;
        echo        f.ShowDialog^(^);
        echo        foreach ^(String filename in f.FileNames^) {
        echo            Console.WriteLine^(filename^);
        echo        }
        echo    }
        echo }
    )
    for /f "delims=" %%I in ('dir /b /s "%windir%\microsoft.net\*csc.exe"') do (
        if not exist "!chooser!" "%%I" /nologo /out:"!chooser!" "%temp%\c.cs" 2>NUL
    )
    del "%temp%\c.cs"
    if not exist "!chooser!" (
        echo Error: Please install .NET 2.0 or newer, or install PowerShell.
        goto :EOF
    )
)

rem // Do something with the chosen file(s)
for /f "delims=" %%I in ('%chooser%') do (
    echo You chose %%~I
)

rem // comment this out to keep chooser.exe in %temp% for faster subsequent runs
del "%temp%\chooser.exe" >NUL 2>NUL

goto :EOF
:: // end Batch portion / begin PowerShell hybrid chimera #>

Add-Type -AssemblyName System.Windows.Forms
$f = new-object Windows.Forms.OpenFileDialog
$f.InitialDirectory = pwd
$f.Filter = "Text Files (*.txt)|*.txt|All Files (*.*)|*.*"
$f.ShowHelp = $true
$f.Multiselect = $true
[void]$f.ShowDialog()
if ($f.Multiselect) { $f.FileNames } else { $f.FileName } 
```

* * *

对于 XP 或 Vista 的文件夹选择器，请使用[WSH 解决方案](https://stackoverflow.com/a/15906994/1683264)或[npocmaka 的 HTA 解决方案](https://stackoverflow.com/a/24415437/1683264)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-06-25T17:57:07.667

还有两种方法。

1.使用混合.bat/hta（必须另存为`bat`）脚本。它可以使用vbscript或javascript，但示例是javascrtipt。不创建临时文件。选择文件夹不是那么容易，需要外部javascript库，但选择文件很容易

```
<!-- : starting html comment

:: FileSelector.bat
@echo off
for /f "tokens=* delims=" %%p in ('mshta.exe "%~f0"') do (
    set "file=%%~fp"
)
echo/
if not "%file%" == "" (
    echo selected  file is : %file%
)
echo/
exit /b
-->
<Title>== FILE SELECTOR==</Title>
<body>
    <script language='javascript'>
    function pipeFile() {

         var file=document.getElementById('file').value;
         var fso= new ActiveXObject('Scripting.FileSystemObject').GetStandardStream(1);
         close(fso.Write(file));

    }
    </script>
<input type='file' name='file' size='30'>
</input><hr><button onclick='pipeFile()'>Submit</button>
</body> 
```

1.1 - 没有 rojo 提出的提交表单（见评论）：

```
<!-- : starting html comment

:: FileSelector.bat
@echo off
for /f "tokens=* delims=" %%p in ('mshta.exe "%~f0"') do (
    set "file=%%~fp"
)
echo/
if not "%file%" == "" (
    echo selected  file is : "%file%"
)
echo/
exit /b
-->
<Title>== FILE SELECTOR==</Title>
<body>
    <script language='javascript'>
    function pipeFile() {

         var file=document.getElementById('file').value;
         var fso= new ActiveXObject('Scripting.FileSystemObject').GetStandardStream(1);
         close(fso.Write(file));

    }
    </script>
<input id='file' type='file' name='file' size='30' onchange='pipeFile()' >
</input>
<hr>
<button onclick='pipeFile()'>Submit</button>
<script>document.getElementById('file').click();</script>
</body> 
```

2.由于您已经使用powershell/net，您可以创建自编译的jscript.net混合。编译不需要临时cs文件，直接使用内置的jscrript.net编译器。也不需要powershell，代码是更具可读性：

```
@if (@X)==(@Y) @end /* JScript comment
@echo off

:: FolderSelectorJS.bat
setlocal

for /f "tokens=* delims=" %%v in ('dir /b /s /a:-d  /o:-n "%SystemRoot%\Microsoft.NET\Framework\*jsc.exe"') do (
   set "jsc=%%v"
)

if not exist "%~n0.exe" (
    "%jsc%" /nologo /out:"%~n0.exe" "%~dpsfnx0"
)

for /f "tokens=* delims=" %%p in ('"%~n0.exe"') do (
    set "folder=%%p"
)
if not "%folder%" == "" ( 
    echo selected folder  is %folder%
)

endlocal & exit /b %errorlevel%

*/

import System;
import System.Windows.Forms;

var  f=new FolderBrowserDialog();
f.SelectedPath=System.Environment.CurrentDirectory;
f.Description="Please choose a folder.";
f.ShowNewFolderButton=true;
if( f.ShowDialog() == DialogResult.OK ){
    Console.Write(f.SelectedPath);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-11T23:49:50.013

我什至会留下一个“回声”，以验证此代码中的多项选择是否有效

```
echo off
set cmd=Add-Type -AssemblyName System.Windows.Forms;$f=new-object                 Windows.Forms.OpenFileDialog;$f.InitialDirectory=        [environment]::GetFolderPath('Desktop');$f.Filter='Text Files(*.txt)^|*.txt^|All         Files(*.*)^|*.*';$f.Multiselect=$true;[void]$f.ShowDialog();if($f.Multiselect)        {$f.FileNames}else{$f.FileName}
set pwshcmd=powershell -noprofile -command "&{%cmd%}"
for /f "tokens=* delims=" %%I in ('%pwshcmd%') do call :sum "%%I" ret
echo =========
echo --%ret%--
pause
exit /B
:sum [mud] [ret]
echo "%~1"
set FileName=%FileName% "%~1"
set ret=%FileName%
exit /B 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-07T03:25:44.330

我已经编写了自己的便携式解决方案： [https ://sourceforge.net/p/contools/contools/HEAD/tree/trunk/Utilities/src/_gui/wxFileDialog/](https://sourceforge.net/p/contools/contools/HEAD/tree/trunk/Utilities/src/_gui/wxFileDialog/)

您可以从这里下载可执行文件： [https ://sourceforge.net/p/contools/contools/HEAD/tree/trunk/Utilities/bin/contools/wxFileDialog.exe](https://sourceforge.net/p/contools/contools/HEAD/tree/trunk/Utilities/bin/contools/wxFileDialog.exe)

该实用程序依赖于 wxWidgets 3.1.x，因此您实际上可以为其他操作系统构建它。

# ruby-on-rails - Active Record 查询返回对象不支持#inspect

> ID：15885134
> 
> 赞同：3
> 
> 时间：2013-04-08T17:18:53.553
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有以下查询

```
User.where('name LIKE ?', "%Jason%").select("name") 
```

但是，当我在控制台中运行它时，我会返回此错误

```
(Object doesn't support #inspect) 
```

这是什么原因造成的，我该如何解决？

# java - 如何使用 cookie 将返回的用户重定向到不同的页面？

> ID：15885139
> 
> 赞同：0
> 
> 时间：2013-04-08T17:19:03.843
> 
> 标签：java, redirect, cookies

我发现了一些类似的问题，但没有一个是针对我的需求的。

我想在访问优惠券页面的移动设备上设置 cookie。

用户可以随意访问优惠券页面。

他们将被要求让他们的女服务员/收银员或自己在使用优惠券页面上按下兑换按钮。

我希望这个兑换按钮放置一个“x”天的 cookie。此 cookie 将在指定天数内将此用户重定向到“已兑换优惠券”页面。

我如何设置这样的cookie或者我需要使用java还是......？

谢谢大家。

# asp.net-mvc-3 - 如何在 mvc3 中创建和使用编辑器模板

> ID：15885142
> 
> 赞同：0
> 
> 时间：2013-04-08T17:19:14.727
> 
> 标签：asp.net-mvc-3, razor-2

我是 MVC 的新手；我想创建两个编辑器模板，一个用于只读文本框，另一个用于可编辑文本框。

可编辑的文本框代码：

```
@model string
@Html.TextAreaFor(m=>m,new {size = 35}) 
```

只读文本框：

```
@model string
@Html.TextAreaFor(m=>m,new {@readonly = "readonly",size = 35}) 
```

但我不确定如何在视图中使用它们，我可以在视图中给出编辑器模板名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:00:45.277

您实际上不会在视图中调用这些。您当然会使用 Html.Editor 或 Html.EditorFor，但是，要与这些关联，您需要在模型中这样做。

模型

```
[UIHint("NameOfYourEditorTemplate")]
public string EditableText { get; set; }

[UIHint("NameOfYourEditorTemplate")]
public string ReadonlyText { get; set; } 
```

希望这可以帮助。

# android - 布局中动态对齐的可变大小单元格

> ID：15885152
> 
> 赞同：1
> 
> 时间：2013-04-08T17:19:41.957
> 
> 标签：android, android-layout

我要做的是从左到右绘制可变大小的单元格。由于数据来自服务器，因此无法确定其长度（因此需要可变大小的单元格。）。我已经尝试过网格视图、表格布局，但它们按顺序排列。我想要的是这样的：

[一个样本 http://img18.imageshack.us/img18/4136/samplejy.png](http://img18.imageshack.us/img18/4136/samplejy.png)

最重要的是它们在一列中对齐（尽管一列可以有更多列）但是没有这样的行..单元格在某种数组中，我必须从左到右对齐并且不是从上到下..如果有人尝试过这样的事情，那将非常有帮助..谢谢

# iphone - 2013 年 4 月更新的 Apple 开发者网站不允许将设备添加到 Ad Hoc Provisioning Profile

> ID：15885153
> 
> 赞同：6
> 
> 时间：2013-04-08T17:19:42.990
> 
> 标签：iphone, ios, provisioning-profile, ios-provisioning

## 编辑 2013 年 4 月 9 日

苹果回应了我关于此事的错误报告，并报告说“问题已得到修复”。我已确认问题已解决。我现在可以将设备添加到网站更新之前创建的旧版 Ad Hoc 配置文件。

**现在问题已解决。**

*旁白：请注意，`_`新配置文件的名称中不再允许使用下划线字符 ( )。*

* * *

截至 2013 年 4 月 6 日上周末，似乎无法在 Apple Developer [Certificates、Identifiers & Profiles](https://developer.apple.com/account/ios/profile/profileList.action?type=production)页面上将设备添加到我现有的 Ad Hoc 配置文件中。

StackOverflow 上有很多关于如何将设备添加到 iOS Ad Hoc 配置文件的问题，直到本周末，这还是一项相当简单的任务。

我仍然可以为我的开发配置文件编辑设备列表。

**谁能告诉我如何在新的 Apple Developer 网站上将设备添加到我的 Ad Hoc Provisioning Profile 中？**

*笔记：*

*   这绝对是*Ad Hoc*配置文件，而不是 App Store *Distribution*配置文件。
*   无法取消选中下面的单选按钮：“iOS Distribution...”。

*编辑 iOS 配置文件截图*： ![在此处输入图像描述](https://i.stack.imgur.com/jcKWE.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T17:37:02.213

无法相信 Apple 可以在没有适当测试的情况下发布这些更改！

看起来您只能删除当前的 AdHoc 配置文件并创建一个新配置文件。在创建它时，您可以选择所需的设备。现在，您可以随时使用新配置文件编辑设备列表。

所以看起来新旧配置文件的格式是不同的。我无法让 testflight 识别新的配置文件:(

这是[您可以尝试的 hack](https://gist.github.com/ashtom/d0aeb62eedbfd555b04e)。看起来它正在工作。

**编辑：**截至**2013 年 4 月 10 日**，他们已经解决了大部分问题。该网站的加载速度仍然太慢。希望他们也能解决这个问题！

# .net - 使用微软企业库验证块创建复杂的验证

> ID：15885156
> 
> 赞同：1
> 
> 时间：2013-04-08T17:19:48.910
> 
> 标签：.net, validation, enterprise-library

我想使用验证块实现以下类型的验证。我正在使用 EntLib 5.0 并在 SQL Server 数据库中存储验证规则。如何使用 EntLib 5.0 Designer 工具创建以下验证。

```
If(PaymentType == 'CreditCard')
{
     if(BilledAmount<100)
     {
         ErrorMsg = "Bill amount should greater than or equal to 100";
     }
     else if (BillAmount + TaxAmount > CreditCardMaxLimit)
     {
         ErrorMsg= "Credit card Max Amount limit is " + CreditCardMAxLimit;
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:10:59.770

我认为您将无法使用设计器，因为它仅适用于预先构建的验证选项（必需、最大长度等）。您正在使用自定义逻辑。

我建议使用自我验证。使用 [HasSelfValidation] 属性标记您的对象，然后使用 [SelfValidation] 属性标记您的验证方法。看这里：

[http://www.codeproject.com/Articles/256355/Microsoft-Enterprise-Library-5-0-Introduction-to-V](http://www.codeproject.com/Articles/256355/Microsoft-Enterprise-Library-5-0-Introduction-to-V)

# c# - ASP.NET - SimpleMembershipProvider 初始化不正确，我该如何重新初始化它？

> ID：15885161
> 
> 赞同：0
> 
> 时间：2013-04-08T17:20:04.923
> 
> 标签：c#, asp.net, initialization

我已将 SimpleMemebershipProvider 添加到我的项目中，但使用初始化了我的数据库中的错误字段`WebSecurity.InitializeDatabaseConnection("DefaultConnection", "Users", "userId", "username", autoCreateTables: true);`现在，我更改了参数并尝试重新运行它，但我当然收到错误“ `WebSecurity.InitializeDatabaseConnection method can be called only once`”

我删除了整个数据库并尝试重新初始化 SMP，但它似乎仍然知道它已被调用。如何在不创建新项目的情况下从头开始重新初始化 SMP？

顺便说一句，如果允许动态更改这些参数，是什么导致我`An account with that username has already been created`在尝试在注册页面上注册任何用户名时收到错误“”？

# xcode - 如何在 Xcode 中使用参数向量调试程序

> ID：15885164
> 
> 赞同：0
> 
> 时间：2013-04-08T17:20:16.727
> 
> 标签：xcode

我是 OS X 的新手。我正在用 Xcode 中的 UNIX 系统调用编写程序。我想用参数向量逐行调试程序。但我不知道如何将参数值放入 **argv。

假设可执行文件的名称为“a.out”，我想在 Xcode 中逐行调试。我所要做的就是让程序最初设置 argv 为以下。

```
argv[0] = "./a.out"
argv[1] = "ls"
argv[2] = "foo"
argv[3] = "-l" 
```

我该怎么办？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:25:24.537

你的意思是你想在调试时将参数传递给你的程序吗？如果是这样，请在运行和停止旁边的下拉菜单中单击目标名称，进入“编辑方案...”，然后单击参数选项卡。您可以添加参数以在其中传递。

# android - Android 活动和计时器循环

> ID：15885168
> 
> 赞同：0
> 
> 时间：2013-04-08T17:20:25.257
> 
> 标签：android, timer, android-activity

我正在编写一个应用程序，它说有两个活动 A 和 B。A 是显示页面，而 B 是设置页面。在运行时，在 A 中运行一个计时器循环，它不断更新显示。而 B 中的设置会影响定时器循环中的一些任务。我希望用户可以在运行时从 A 切换到 B 并在 B 中进行更改，而计时器循环仍在 A 中运行并将响应 B 中所做的更改。

可能吗？或者我应该将计时器循环放在其他地方吗？我是 Android 和 Java 的新手。请帮助。谢谢。

# java - RESTful 服务——如何设计一个有很多参数的 URL

> ID：15885170
> 
> 赞同：0
> 
> 时间：2013-04-08T17:20:34.140
> 
> 标签：java, rest, uri, restful-architecture

我开发了 REST 服务，但现在我意识到我做错了什么。

例如，我有一项服务可以检索有关特定设备的信息。每个设备都有一个地址：**sector.room.group.id**。我为这个 GET 方法做的 URI 是：`(...)/services_devices/{sector}/{room}/{group}/{id}`但是现在我意识到我不应该使用`'/'`来分隔设备地址，对吧？我应该如何将地址传递给这个方法？使用`';'`?

我的 GET 方法是：

```
@GET
@Path("{sector}/{room}/{group}/{id}")
@Produces("application/json")
public String getDeviceName(@PathParam("sector") int sector, @PathParam("room") int room, @PathParam("group") int group, @PathParam("id") int id) throws Exception
{
    String name = null;

    try {
            name = new DevicesManager().getDeviceName(sector, room, group, id); 
    } catch (Exception e) {
            e.printStackTrace();
    }
    return name;
} 
```

有一个简单的方法来改变这个，有一个正确的 URI？我在许多方法中都有这个“错误”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:00:12.113

REST 架构风格引入了 HATEOAS，这意味着客户端和服务器是松散耦合的。只是客户端不知道 URL 的样子并从以前的响应中获取它们。（类似于浏览 HTML 页面）。当然，客户端至少会知道一个 URL，即入口点。从这个角度来看，您需要正确的 URI 是无关紧要的。什么是正确的 URI？当 URI 的形式与 RFC 一致时，该 URI 是正确的。

您可能正在引入非 RESTful 的 URL 模式，因为它暗示了客户端和服务器之间的紧密耦合（客户端必须了解 URL 模式并能够从它们构造 URL；在您的情况下填充扇区/房间/等)

另见这篇文章：

[http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)

我的建议是；不要在 URL 模式上浪费你的时间，使 URL 尽可能简单，扁平的层次结构也有很多好处，并遵循 HATEOAS 原则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:52:54.990

如果您的资源中存在层次结构，则路径变量是合适的。

在您的情况下，设备和地址之间似乎存在层次结构，但首先是地址，然后是设备名称。“deviceName”可以被认为是一个多层次的步骤。

反映上述关系的最佳方式是以下网址：

> (...)/sector/room/group/id/deviceName

然后，您可以像这样映射设备的另一个属性：

> (...)/sector/room/group/id/deviceOwner

JAX-RS 映射将是：

```
@GET
@Path("{sector}/{room}/{group}/{id}/deviceName")
@Produces("application/json")
public String getDeviceName(@PathParam ...) {
//impl.
} 
```

是的，如果 deviceName 是资源的唯一相关属性，那么您可以省略“deviceName”并且您的原始映射是正确的。

如果资源 at`/sector/room/group/id`有很多属性，您应该考虑为路径返回一个组合对象：

```
@GET
@Path("{sector}/{room}/{group}/{id}")
@Produces("application/json")
public Device getDeviceName(@PathParam...) {
} 
```

# javascript - 如何创建具有双向绑定的复合过滤器？

> ID：15885172
> 
> 赞同：2
> 
> 时间：2013-04-08T17:20:41.947
> 
> 标签：javascript, angularjs, filtering

我想在表格中显示项目列表，并允许用户使用表单控件过滤项目。

**我的问题**
我能够在控制器首次执行时完成此操作，但是当我更改输入的值时，表格不会使用正确的数据重新呈现。

**我的问题**
如何根据表单字段中的新值制作表格过滤器？

**现场示例**
[http://plnkr.co/edit/7uLUzXbuGis42eoWJ006?p=preview](http://plnkr.co/edit/7uLUzXbuGis42eoWJ006?p=preview)

**Javascript**

```
var app = angular.module('plunker', []);
app.controller('MainCtrl', function($scope) {
    $scope.travelerFilter = 2;
    $scope.groupFilter = "A";

    $scope.records = [
        { leadName: "Jesse", travelerCount: 1, group: "A"},
        { leadName: "John", travelerCount: 1, group: "B"},
        { leadName: "James", travelerCount: 2, group: "A"},
        { leadName: "Bill", travelerCount: 2, group: "B"}
    ];

    var travelerCountFilter = function(record) {
        return record.travelerCount >= $scope.travelerFilter;
    };

    var groupFilter = function(record) {
        return record.group === $scope.groupFilter;
    };

    $scope.filteredRecords = _.chain($scope.records)
        .filter(travelerCountFilter)
        .filter(groupFilter)
        .value();
}); 
```

**html**

```
<!doctype html>
<html ng-app="plunker" >
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.5/angular.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
  <script src="app.js"></script>
</head>
<body ng-controller="MainCtrl">

  <p>Show records with at least <input type="number" ng-model="travelerFilter" /> travelers.</p>
  <p>Group <input type="text" ng-model="groupFilter" /></p>

  <table>
      <tr>
        <th>Name</th>
        <th>Count</th>
        <th>Group</th>
      </tr>
      <tr ng-repeat="record in filteredRecords">
          <td>{{record.leadName}}</td>
          <td>{{record.travelerCount}}</td>
          <td>{{record.group}}</td>
      </tr>
  </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:52:22.833

您可以将过滤器指定为 ng-repeat 的一部分，即：

```
<tr ng-repeat="record in records | filter:{group:groupFilter} | filter:{travelerCount:travelerFilter}"> 
```

在这里查看实时版本：[http ://plnkr.co/edit/1UcGDpwUAbtvEhUyCFss?p=preview](http://plnkr.co/edit/1UcGDpwUAbtvEhUyCFss?p=preview)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T19:48:23.840

angular 可以自动为您双向绑定所有内容，而无需过滤器：

**JS：**

```
$scope.filteredRecords = function() {
  return $scope.records.filter(function(record, i) {
    return record.travelerCount === $scope.travelerFilter &&
      record.group === $scope.groupFilter;
  });
} 
```

**HTML：**

```
<tr ng-repeat="record in filteredRecords()"> 
```

请参阅此处以获取实时示例：[http ://plnkr.co/edit/aeBv2soGG06Trpp9WI4f?p=preview](http://plnkr.co/edit/aeBv2soGG06Trpp9WI4f?p=preview)

# javascript - Javascript原型不会更新方法

> ID：15885174
> 
> 赞同：0
> 
> 时间：2013-04-08T17:20:54.650
> 
> 标签：javascript, oop, prototype

我正在学习使用 javascript 的`prototype`功能（不是库）。我以为我可以使用`MyObject.prototype.myFunction = function () { ... }`. 显然这行不通。

下面的代码定义了一个对象，并使用`prototype`. 在浏览器中运行它，控制台仍然显示原始输出。

```
 <script type="text/javascript">
        function TestObject() {
            this.testFunction = function() {
                console.log("Original function output");
            }
        }

        // This should replace the method defined in the object.
        TestObject.prototype.testFunction = function() {
            console.log("YOU GOT CHANGED");
        }

        var HelloWorld = new TestObject();

        HellowWorld.testFunction(); // Should output "YOU GOT CHANGED"
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:29:39.957

通过原型链继承的实例方法影子方法

```
var HelloWorld = new TestObject();
HelloWorld.testFunction(); // finds method on instance
// "Original function output"
delete HelloWorld.testFunction; // delete method from instance
HelloWorld.testFunction(); // not found on instance, look in prototype, found
// "YOU GOT CHANGED" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:23:49.420

并非如此，在您的构造函数中，您正在覆盖原型。原始代码是原型的代码（在您创建对象后立即绑定，然后再运行它）。

# google-apps-script - Google 电子表格脚本错误：“无法将（类）... 转换为 Object[][]”

> ID：15885179
> 
> 赞同：6
> 
> 时间：2013-04-08T17:21:04.353
> 
> 标签：google-apps-script, google-sheets

我有一个包含 13 个日期的维度数组，我想将其放入电子表格行中。

当我调试这段代码时：

```
if (arrDates.length > 0) {
    var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
    var destSheet = spreadsheet.getSheetByName("Employee Capacity Detail");
    destSheet.getRange("C2").offset(0,0,arrDates.length).setValues(arrDates);
} 
```

我收到此错误消息：“无法将（类）@7c02952c 转换为 Object[][]。” 在这条线上：

```
destSheet.getRange("C2").offset(0,0,arrDates.length).setValues(arrDates); 
```

我也试过这个：

```
destSheet.getRange(1, 3, 1, 14).setValues(arrDates); 
```

还有这个：

```
var destRange = destSheet.getRange("C2:P2");
destRange.setValues(arrDates); 
```

并得到同样的错误。

在调试器中，我可以看到 arrDates 按预期填充了 14 个日期。

谷歌搜索此错误消息没有出现任何内容。有没有人知道我为什么会收到这个错误，或者我可以做些什么来进一步排除故障？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-08T21:52:45.707

[https://developers.google.com/apps-script/reference/spreadsheet/range#setValues(Object)](https://developers.google.com/apps-script/reference/spreadsheet/range#setValues(Object))

这里的关键是，当您填充（或从中检索数据）电子表格范围时，您必须始终“设置”一个二维数组，即使该范围是一行高。在 Javascript 中，这将是一个“数组数组”，其中外部数组表示行，内部数组表示每行中的单元格。

大概你的 arrDates 数组是这样的：

[日期 1、日期 2、日期 3……]

当它需要是这样的：

[[日期1，日期2，日期3...]]

您通过`new Array(arrDates)`声明实现的，或者您也可以使用：

`destSheet.getRange(1, 3, 1, 14).setValues([arrDates]));`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T20:22:25.460

这是我必须做的才能让它工作：

```
destSheet.getRange(1, 3, 1, 14).setValues(new Array(arrDates)); 
```

欢迎任何解释！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T16:59:42.490

确保发送到 setValues 的数组中的行数与 getRange 中指示的行数相匹配。

当我的数组中有 2 行太多时出现此错误。不知道为什么我有时没有收到关于范围高度和数组中的行数不匹配的其他消息。

# ruby-on-rails - Rails 在错误的目录中寻找部分内容

> ID：15885183
> 
> 赞同：5
> 
> 时间：2013-04-08T17:21:12.677
> 
> 标签：ruby-on-rails, namespaces, partials

我有一个多态`Review`模型。命名空间模型`User::Library::Publication`是可审查的。评论是正确创建的，但是当我尝试通过部分显示它们时，Rails 会查找错误的目录。

在我看来：

```
<%= render @review %> 
```

我收到此错误：

```
Missing partial user/library/reviews/review with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder]} 
```

Rails 显然是在命名空间的目录中寻找审查部分`views/user/library`而不是`/views/reviews`. 知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-25T12:36:46.367

如果你想从部分模板路径中删除命名空间，你可以`prefix_partial_path_with_controller_namespace`在你的`config/application.rb`：

```
# config/application.rb
config.action_view.prefix_partial_path_with_controller_namespace = false 
```

这将在您定义它们时加载部分路径（没有命名空间）。

你可以[在这里看到原始的拉取请求](https://github.com/rails/rails/pull/5625)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:45:39.947

如果您使用名称空间，您必须创建文件夹/子文件夹，这样 Rails 才不会找错地方。

如果要强制使用部分路径，请使用：

```
render :partial => "review" 
```

并创建将`review.html.erb`文件重命名为`_review.html.erb`

# javafx-2 - JavaFx 2 - 使用 fxml 动态设置窗格

> ID：15885189
> 
> 赞同：1
> 
> 时间：2013-04-08T17:21:28.447
> 
> 标签：javafx-2

我正在尝试通过从 fxml 文件加载来动态设置边框窗格布局的中心窗格。现在，当我调用 setCenterPane() 方法时遇到空指针异常。下面是加载和设置中心窗格的控制器代码。我尝试加载的窗格类型是 AnchorPane，我也尝试将其转换为 AnchorPane，但它的行为仍然相同。我不确定我是否遗漏了什么。谁能提供有关如何解决此问题的任何想法？

空指针异常抛出 form ***borderPane.setCenter(cmdPane)***行。（为了便于阅读，我从代码中删除了一些行）。

```
public class AnalyzerController implements Initializable {

@FXML
private BorderPane borderPane;

@FXML
private void cmdMenuAction(ActionEvent event) throws IOException {
        FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("CommandQuery.fxml"));
        Pane cmdPane = (Pane) fxmlLoader.load();

        try {
            borderPane.setCenter(cmdPane);
        } catch (Exception e) {
            e.printStackTrace();
        }
} 
```

}

下面是异常跟踪。

```
java.lang.NullPointerException
    at analyzer.AnalyzerController.cmdMenuAction(AnalyzerController.java:65)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:55)
    at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:269)
    at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1435)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:69)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:28)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Node.fireEvent(Node.java:6863)
    at javafx.scene.control.Hyperlink.fire(Hyperlink.java:145)
    at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:193)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:336)
    at com.sun.javafx.scene.control.skin.SkinBase$4.handle(SkinBase.java:329)
    at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:64)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:217)
    at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:170)
    at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:38)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:37)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:35)
    at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:92)
    at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:53)
    at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:33)
    at javafx.event.Event.fireEvent(Event.java:171)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3328)
    at javafx.scene.Scene$MouseHandler.process(Scene.java:3168)
    at javafx.scene.Scene$MouseHandler.access$1900(Scene.java:3123)
    at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1563)
    at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2265)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:250)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:173)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:292)
    at com.sun.glass.ui.View.handleMouseEvent(View.java:528)
    at com.sun.glass.ui.View.notifyMouse(View.java:922) 
```

这是 AnalyzerController 引用的 Analyzer.fxml

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<BorderPane id="BorderPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml" fx:controller="analyzer.AnalyzerController">
  <center>
    <Pane prefHeight="200.0" prefWidth="200.0">
      <children>
        <Label fx:id="noDbLabel" layoutX="187.0" layoutY="99.0" text="No database selected." />
      </children>
    </Pane>
  </center>
  <left>
    <Hyperlink fx:id="cmdMenu" onAction="#cmdMenuAction" text="Command" />
  </left>
  <top>
    <MenuBar>
      <menus>
        <Menu mnemonicParsing="false" text="File">
          <items>
            <MenuItem mnemonicParsing="false" onAction="#openDbAction" text="Open Database" fx:id="OpenDb" />
          </items>
        </Menu>
      </menus>
    </MenuBar>
  </top>
</BorderPane> 
```

这是 CommandQuery.fxml

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import java.util.*?>
<?import javafx.collections.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane id="AnchorPane" prefHeight="400.0" prefWidth="600.0" styleClass="mainFxmlClass" xmlns:fx="http://javafx.com/fxml" fx:controller="analyzer.CommandQueryController">
  <children>
    <SplitPane dividerPositions="0.29396984924623115" focusTraversable="true" orientation="VERTICAL" prefHeight="400.0" prefWidth="600.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
      <items>
        <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="100.0" prefWidth="160.0">
          <children>
            <Label layoutX="36.0" layoutY="23.0" text="Find" />
            <ComboBox fx:id="cmdTypeBox" layoutX="78.0" layoutY="23.0">
              <items>
                <FXCollections fx:factory="observableArrayList">
                  <String fx:value="Item 1" />
                  <String fx:value="Item 2" />
                  <String fx:value="Item 3" />
                </FXCollections>
              </items>
            </ComboBox>
            <Label layoutX="177.0" layoutY="23.0" text="From" />
          </children>
        </AnchorPane>
        <AnchorPane minHeight="0.0" minWidth="0.0" prefHeight="100.0" prefWidth="160.0" />
      </items>
    </SplitPane>
  </children>
  <stylesheets>
    <URL value="@commandquery.css" />
  </stylesheets>
</AnchorPane> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:18:05.350

看起来您正在尝试调用一个方法，`borderPane`但`borderPane`从未初始化。该`@FXML`标签告诉我，您希望`borderPane`在加载时被初始化`Analyzer.fxml`。如果是这种情况，那么您需要添加`fx:id="borderPane"`到您的`Analyzer.fxml`文件中。

# three.js - 在 THREE.JS 中添加上下文菜单

> ID：15885191
> 
> 赞同：-1
> 
> 时间：2013-04-08T17:21:33.233
> 
> 标签：three.js

当我右键单击场景中的对象 3D 时，我不想添加上下文菜单

作为这个java脚本代码

```
$(function(){
$.contextMenu({
    selector: '.context-menu-one', 
    callback: function(key, options) {
        var m = "clicked: " + key;
        window.console && console.log(m) || alert(m); 
    },
    items: {
        "edit": {name: "Edit", icon: "edit"},
        "cut": {name: "Cut", icon: "cut"},
        "copy": {name: "Copy", icon: "copy"},
        "paste": {name: "Paste", icon: "paste"},
        "delete": {name: "Delete", icon: "delete"},
        "sep1": "---------",
        "quit": {name: "Quit", icon: "quit"}
    }
});

$('.context-menu-one').on('click', function(e){
    console.log('clicked', this);
}) 
```

});

```
<div class="context-menu-one box menu-1">
<strong>right click me</strong> 
```

这段代码我用它来创建菜单，但找不到使它相对于场景中的 3D 对象的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:18:44.313

您需要将 3d 坐标转换为 2d 屏幕（投影）坐标。请查看[此帖子](https://github.com/mrdoob/three.js/issues/78)以获取详细信息以及[此处](https://stackoverflow.com/questions/11534000/three-js-converting-3d-position-to-2d-screen-position)的答案。

# javascript - 如何检查字符串是否包含有效的 vimeo url usng javascript？

> ID：15885192
> 
> 赞同：0
> 
> 时间：2013-04-08T17:21:37.747
> 
> 标签：javascript, regex

如何使用 javascript 检查字符串是否包含有效的 vimeo url？

示例：[https](https://vimeo.com/23374724) ://vimeo.com/23374724是一个有效的 url。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-10-02T12:32:07.417

**不要**依赖正则**表达式**，因为 Vimeo 往往会不时更改/更新其 URL 模式。截至*2017 年 10 月 2 日*，Vimeo 总共支持六种 URL 方案。

```
https://vimeo.com/*
https://vimeo.com/*/*/video/*
https://vimeo.com/album/*/video/*
https://vimeo.com/channels/*/*
https://vimeo.com/groups/*/videos/*
https://vimeo.com/ondemand/*/* 
```

相反，使用他们的 API 来验证 vimeo URL。这是这个 oEmbed ( [doc](https://developer.vimeo.com/apis/oembed) ) API，它接受一个 URL，检查其有效性并返回一个包含大量视频信息的对象（查看开发页面）。虽然不是有意的，但我们可以轻松地使用它来验证给定的 URL 是否来自 Vimeo。

所以，使用 ajax 看起来像这样，

```
var VIMEO_BASE_URL = "https://vimeo.com/api/oembed.json?url=";
var yourTestUrl = "https://vimeo.com/23374724";

$.ajax({
  url: VIMEO_BASE_URL + yourTestUrl,
  type: 'GET',
  success: function(data) {
    if (data != null && data.video_id > 0)
      // Valid Vimeo url
    else
      // not a valid Vimeo url
  },
  error: function(data) {
    // not a valid Vimeo url
  }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T17:23:55.517

尝试使用正则表达式？

```
/^(http\:\/\/|https\:\/\/)?(www\.)?(vimeo\.com\/)([0-9]+)$/.test("url"); 
```

如果它以协议开头，这应该要求它是“http://”或“https://”。然后可选地有“www.”。然后有“vimeo.com/”。然后有一系列数字。

这取决于您想要什么并使其成为可选。我会认为除了“www”之外的一切。应该是必需的，但我不确定您正在接收/测试的输入。要使其成为必需，请`?`从特定组中删除（在`?`它影响的组之后）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T17:46:16.430

确切地说，我不知道“有效的 vimeo url”是什么。如果您希望它以 8 位数字开头`https://vimeo.com/`并后跟一个 8 位数字，则可以这样做：

```
var myurl = "https://vimeo.com/23374724";
if (/https:\/\/vimeo.com\/\d{8}(?=\b|\/)/.test(myurl)) { 
    alert("matches"); 
} else { 
    alert("doesn't match") 
}; 
```

这有点难看，因为所有`\/`转义的正斜杠，但它所做的是查找我上面提到的字符串，后跟一个 8 位数字序列，后跟任何零宽度字边界或另一个正斜杠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T18:20:52.377

您可以使用以下正则表达式：

```
(?:https?\:\/\/)?(?:www\.)?(?:vimeo\.com\/)([0-9]+) 
```

如果您需要使用它，视频的 id 将在第 1 组中捕获。您可以在[debuggex](http://www.debuggex.com/?re=%28?%3ahttps?%5C%3a%5C/%5C/%29?%28?%3awww%5C.%29?%28?%3avimeo%5C.com%5C/%29%28%5B0-9%5D%2b%29&flags=&str=https://vimeo.com/23374724%20and%20https://vimeo.com/23374726)上看到它的实际效果。

# hadoop - 映射减少 CPU 使用率

> ID：15885198
> 
> 赞同：1
> 
> 时间：2013-04-08T17:21:54.860
> 
> 标签：hadoop, mapreduce

我正在运行 4 节点集群的 hadoop map reduce 作业。当我运行此作业时，所有节点都挂起，其他进程没有响应。换句话说，这 4 个节点变慢了。

运行此作业时我没有设置任何参数。一切都是默认的。

```
hadoop com.api.hadoop.ApiDriver -D job.name=newjob -D mapred.reduce.tasks=1 
    -D mapred.reduce.slowstart.completed.maps=0 /apilog128 /apiout 
```

哪些参数会影响数据节点的 CPU 使用量？

# c# - 使用 System.Runtime.InteropServices 但未找到 HandleRef

> ID：15885200
> 
> 赞同：1
> 
> 时间：2013-04-08T17:22:03.453
> 
> 标签：c#, build, namespaces, interop, swig

我正在尝试使用 Swig 包装 Raknet 以与 Unity 一起使用，但我无法构建生成的 C# 文件，因为我有 2,300 多个错误说：

```
The type or namespace name 'HandleRef' could not be found 
```

据我所知，HandleRef 是“System.Runtime.InteropServices”命名空间中的一个结构。不过，我绝对有这个说法

```
using System.Runtime.InteropServices; 
```

在相应文件的顶部。此外，我的参考文献中有 mscorlib。

我对出了什么问题感到非常困惑。我做错了吗？有什么我缺少的因素吗？我怎样才能得到这个构建？

（我在 Windows 8 上使用 Visual Studio Express 2012，如果这有什么不同的话。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-27T14:58:43.177

我有一个类似的问题

我发现使用旧版本的 Swig（特别是 2.0.1）生成 c# 文件在 RakNet 上效果更好。

# python - Django 上传：丢弃上传的重复文件，使用现有文件（基于 md5 的检查）

> ID：15885201
> 
> 赞同：29
> 
> 时间：2013-04-08T17:22:04.077
> 
> 标签：python, django, django-models, django-file-upload

我有一个带有 的模型`FileField`，其中包含用户上传的文件。由于我想节省空间，我想避免重复。

**我想达到的目标：**

1.  **计算**上传文件的**md5校验和**
2.  用**文件名根据文件的 md5sum存储文件**
3.  如果已存在同名文件（新文件是**重复**文件），**则丢弃上传的文件并改用现有文件**

**1**和**2**已经在工作，但**我怎么会忘记上传的副本并使用现有文件呢？**

请注意，我想*保留现有文件*而*不是*覆盖它（主要是为了保持修改时间相同 - 更适合备份）。

**笔记：**

*   我正在使用 Django 1.5
*   上传处理程序是`django.core.files.uploadhandler.TemporaryFileUploadHandler`

**代码：**

```
def media_file_name(instance, filename):
    h = instance.md5sum
    basename, ext = os.path.splitext(filename)
    return os.path.join('mediafiles', h[0:1], h[1:2], h + ext.lower())

class Media(models.Model):
    orig_file = models.FileField(upload_to=media_file_name)
    md5sum = models.CharField(max_length=36)
    ...

    def save(self, *args, **kwargs):
            if not self.pk:  # file is new
                md5 = hashlib.md5()
                for chunk in self.orig_file.chunks():
                    md5.update(chunk)
                self.md5sum = md5.hexdigest()
            super(Media, self).save(*args, **kwargs) 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-09T11:45:21.590

感谢 alTus 的回答，我发现编写**[自定义存储类](https://docs.djangoproject.com/en/dev/howto/custom-file-storage/)**是关键，而且比预期的要容易。

*   `_save`如果文件已经存在，我只是省略调用超类方法来写入文件，我只是返回名称。
*   `get_available_name`如果已经存在同名文件，我会覆盖，以避免将数字附加到文件名

我不知道这是否是*正确*的做法，但到​​目前为止效果很好。

希望这是有用的！

**这是完整的示例代码：**

```
import hashlib
import os

from django.core.files.storage import FileSystemStorage
from django.db import models

class MediaFileSystemStorage(FileSystemStorage):
    def get_available_name(self, name, max_length=None):
        if max_length and len(name) > max_length:
            raise(Exception("name's length is greater than max_length"))
        return name

    def _save(self, name, content):
        if self.exists(name):
            # if the file exists, do not call the superclasses _save method
            return name
        # if the file is new, DO call it
        return super(MediaFileSystemStorage, self)._save(name, content)

def media_file_name(instance, filename):
    h = instance.md5sum
    basename, ext = os.path.splitext(filename)
    return os.path.join('mediafiles', h[0:1], h[1:2], h + ext.lower())

class Media(models.Model):
    # use the custom storage class fo the FileField
    orig_file = models.FileField(
        upload_to=media_file_name, storage=MediaFileSystemStorage())
    md5sum = models.CharField(max_length=36)
    # ...

    def save(self, *args, **kwargs):
        if not self.pk:  # file is new
            md5 = hashlib.md5()
            for chunk in self.orig_file.chunks():
                md5.update(chunk)
            self.md5sum = md5.hexdigest()
        super(Media, self).save(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-08T21:39:38.390

AFAIK，您无法使用保存/删除方法轻松实现这一点，因为文件处理得非常特别。

但是你可以这样尝试。

首先，我的简单 md5 文件哈希函数：

```
def md5_for_file(chunks):
    md5 = hashlib.md5()
    for data in chunks:
        md5.update(data)
    return md5.hexdigest() 
```

接下来`simple_upload_to`是像你的 media_file_name 函数一样的东西。你应该这样使用它：

```
def simple_upload_to(field_name, path='files'):
    def upload_to(instance, filename):
        name = md5_for_file(getattr(instance, field_name).chunks())
        dot_pos = filename.rfind('.')
        ext = filename[dot_pos:][:10].lower() if dot_pos > -1 else '.unknown'
        name += ext
        return os.path.join(path, name[:2], name)
    return upload_to

class Media(models.Model):
    # see info about storage below
    orig_file = models.FileField(upload_to=simple_upload_to('orig_file'), storage=MyCustomStorage()) 
```

当然，这只是一个示例，因此路径生成逻辑可能是多种多样的。

而最重要的部分：

```
from django.core.files.storage import FileSystemStorage

class MyCustomStorage(FileSystemStorage):
    def get_available_name(self, name):
        return name

    def _save(self, name, content):
        if self.exists(name):
            self.delete(name)
        return super(MyCustomStorage, self)._save(name, content) 
```

如您所见，此自定义存储在保存之前会删除文件，然后以相同的名称保存新文件。因此，如果不删除（并因此更新）文件很重要，您可以在这里实现您的逻辑。

有关存储的更多信息，您可以在此处找到：[https ://docs.djangoproject.com/en/1.5/ref/files/storage/](https://docs.djangoproject.com/en/1.5/ref/files/storage/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-25T19:53:36.437

我有同样的问题，发现了这个 SO question。由于这并不少见，我在网上搜索并找到了以下 Python 包，它可以完全按照您的要求进行操作：

[https://pypi.python.org/pypi/django-hashedfilenamestorage](https://pypi.python.org/pypi/django-hashedfilenamestorage)

如果 SHA1 哈希没有问题，我认为添加 MD5 哈希支持的拉取请求将是一个好主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-30T16:23:54.873

数据来自模板 -> 表单 -> 视图 -> db(model)。尽早停止重复是有意义的。在这种情况下，forms.py。

```
# scripts.py
import hashlib
from .models import *
def generate_sha(file):
    sha = hashlib.sha1()
    file.seek(0)
    while True:
        buf = file.read(104857600)
        if not buf:
            break
        sha.update(buf)
    sha1 = sha.hexdigest()
    file.seek(0)
    return sha1

# models.py
class images(models.Model):
    label = models.CharField(max_length=21, blank=False, null=False)
    image = models.ImageField(upload_to='images/')
    image_sha1 = models.CharField(max_length=40, blank=False, null=False)
    create_time = models.DateTimeField(auto_now=True)

# forms.py
class imageForm(forms.Form):
    Label = forms.CharField(max_length=21, required=True)
    Image = forms.ImageField(required=True)

    def clean(self):
        cleaned_data = super(imageForm, self).clean()
        Label = cleaned_data.get('Label')
        Image = cleaned_data.get('Image')
        sha1 = generate_sha(Image)
        if images.objects.filter(image_sha1=sha1).exists():
            raise forms.ValidationError('This already exists')
        if not Label:
            raise forms.ValidationError('No Label')
        if not Image:
            raise forms.ValidationError('No Image')

# views.py
from .scripts import *
from .models import *
from .forms import *

def image(request):
    if request.method == 'POST':
        form = imageForm(request.POST, request.FILES)
        if form.is_valid():
            photo = images (
                payee=request.user,
                image=request.FILES['Image'],
                image_sha1=generate_sha(request.FILES['Image'],),
                label=form.cleaned_data.get('Label'),
                )
            photo.save()
            return render(request, 'stars/image_form.html', {'form' : form})
    else:
        form = imageForm()
    context = {'form': form,}
    return render(request, 'stars/image_form.html', context)

# image_form.html
{% extends "base.html" %}
{% load static %}
{% load staticfiles %}

{% block content %}

 <div class="card mx-auto shadow p-3 mb-5 bg-white rounded text-left" style="max-width: 50rem;">
    <div class="container">
        <form action="{% url 'wallet' %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form  }}
            <input type="submit" value="Upload" class="btn btn-outlined-primary">
        </form>

        {% if form.errors %}
            {% for field in form %}
                {% for error in field.errors %}
                    <p> {{ error }} </p>
                {% endfor %}
            {% endfor %}
        {% endif %}

    </div>
</div>

{% endblock content %} 
```

参考：http: [//josephmosby.com/2015/05/13/preventing-file-dupes-in-django.html](http://josephmosby.com/2015/05/13/preventing-file-dupes-in-django.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-15T02:15:48.557

如果正在上传的文件已经存在，这个答案帮助我解决了我想引发异常的问题。如果上传位置中已存在同名文件，此版本会引发异常。

```
from django.core.files.storage import FileSystemStorage

class FailOnDuplicateFileSystemStorage(FileSystemStorage):
    def get_available_name(self, name):
        return name

    def _save(self, name, content):
        if self.exists(name):
            raise ValidationError('File already exists: %s' % name)

        return super(
            FailOnDuplicateFileSystemStorage, self)._save(name, content) 
```

# javascript - Javascript top.navigation 不适用于 JSF Primefaces

> ID：15885207
> 
> 赞同：0
> 
> 时间：2013-04-08T17:22:33.227
> 
> 标签：javascript, jsf, primefaces

当用户通过javascript单击按钮时，我试图重定向用户。所以是这样的：

```
top.location=url; 
```

通常这会将您重定向到指定的“url”，但奇怪的是用户被重定向到同一页面。

有没有办法使用适用于 Primefaces 的 javascript 来重定向用户？不知道为什么primefaces会干扰。

```
<div> 
   <p:commandButton value="Cancel" onclick="javascript:$.fn.RedirectMe('http://google.com')" />
</div> 
```

Javascript：

```
$.fn.RedirectMe = function(url) {      
        var confirmBox=confirm("Are you sure ?");
        if (confirmBox==false)
          {
           return false;
          }

        if(typeof(url) =="undefined" || url == null || url==""){
            top.location=top.location;
        }else{
            url = encodeURI(url);
            top.location=url;
        }

    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:00:05.957

默认情况下`<p:commandButton>`，通过 ajax POST 请求提交父表单。因此，它本质上是适合这项工作的错误工具。

改为使用`<p:button>`。不要忘记 return `false`，否则它仍然会执行隐式导航。

```
<p:button ... onclick="$.RedirectMe(url); return false;" /> 
```

* * *

**与具体问题**无关**`javascript`，伪协议在 HTML4/5 兼容的事件处理程序属性中毫无意义，因为它已经是默认设置。此外，`$.fn`当您只想调用函数而不是创建它时，映射是不必要的。上面给出的答案已经考虑到了这一点。最后但同样重要的是，JS 命名约定规定函数名称应以小写字母开头。**

# paypal - Paypal：通过 Express Checkout 定期付款，无需用户拥有 paypal 帐户

> ID：15885209
> 
> 赞同：0
> 
> 时间：2013-04-08T17:22:40.907
> 
> 标签：paypal, recurring-billing, express-checkout

目前我正在使用快速结帐 API 为 paypal 用户创建定期付款资料，我想知道是否有一种方法可以让用户在不必拥有或创建 paypal 帐户的情况下仍然这样做？

相反，它会要求提供信用卡信息并以这种方式创建个人资料？

我目前将这些参数传递到我的 setExpressCheckout 中，包括我的用户名、密码和签名。

```
$nvpstr =   '&CURRENCYCODE='.urlencode(PAYPAL_CURRENCYCODE).
            '&PAYMENTACTION=Sale'.
            '&ALLOWNOTE=1'.
            '&SOLUTIONTYPE=Sole&LANDINGPAGE=Billing'.
            '&PAYMENTREQUEST_0_CURRENCYCODE='.urlencode(PAYPAL_CURRENCYCODE).
            '&L_BILLINGAGREEMENTDESCRIPTION0='.urlencode($itemname).
            '&VERSION='.urlencode(PAYPAL_VERSION).
            '&L_BILLINGTYPE0='.urlencode('RecurringPayments').
            '&RETURNURL='.urlencode(PAYPAL_RETURNURL ).
            '&NOTIFYURL='.urlencode(PAYPAL_NOTIFYURL ).
            '&NOSHIPPING='.urlencode(PAYPAL_NOSHIPPING ).
            '&CANCELURL='.urlencode(PAYPAL_CANCELURL); 
```

目前这仍然是要求用户创建一个帐户，有什么建议吗？还是这不适用于定期付款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:36:40.407

在初始 SetExpressCheckout 请求中传递 SOLUTIONTYPE=Sole

# c - 在 C 中使用双哈希 (##)

> ID：15885213
> 
> 赞同：4
> 
> 时间：2013-04-08T17:23:09.027
> 
> 标签：c, compiler-construction, macros

头文件[cissvar.h](http://svnweb.freebsd.org/base/head/sys/dev/ciss/cissvar.h?revision=246713&view=markup)有这样的定义：

```
#define CISSQ_REQUEST_QUEUE(name, index)                                \
static __inline void                                                    \
ciss_initq_ ## name (struct ciss_softc *sc)                             \
{                                                                       \
    STAILQ_INIT(&sc->ciss_ ## name);                                    \
    CISSQ_INIT(sc, index);                                              \
}                                                                       \
(...) 
```

[ciss.c](http://svnweb.freebsd.org/base/head/sys/dev/ciss/ciss.c?revision=249170&view=markup)中的实际用法如下所示：

```
ciss_initq_free(sc);
ciss_initq_notify(sc); 
```

如果有人可以解释这是如何工作的，那就太好了。

所以，

1.  名称指的是“免费”或“通知”

2.  “索引”从何而来？
3.  编译器如何在这里进行 .h 和 .c 之间的魔术绑定？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T17:27:35.703

重要的几行是这些（也在 cissvar.h 中）：

```
CISSQ_REQUEST_QUEUE(free, CISSQ_FREE);
CISSQ_REQUEST_QUEUE(notify, CISSQ_NOTIFY); 
```

他们调用您粘贴的那个宏。“##”运算符将两个代码单词连接成一个单词，因此为第一行生成的代码（使用宏扩展）如下所示：

```
static __inline void                                                    
ciss_initq_free(struct ciss_softc *sc)                             
{                                                                       
    STAILQ_INIT(&sc->ciss_free);                                    
    CISSQ_INIT(sc, CISSQ_FREE);                                              
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T17:25:27.517

`##`使预处理器将两个参数连接到`##`运算符。

# javascript - 在 Google 地图 API 上切换圈子

> ID：15885214
> 
> 赞同：0
> 
> 时间：2013-04-08T17:23:20.973
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在尝试使用一个简单的函数来隐藏我在 Google Maps API 中标记周围的圆圈。我得到的错误是“ **Uncaught TypeError: Object # has no method 'setVisble'**。”

这是功能：

```
// Toggles circles
function toggleCircles() {
    if (circlesArray) {
        for (i in circlesArray) {
            circlesArray[i].setVisble(false);
        }
    }
} 
```

你可以在这里看到它：

[http://jsfiddle.net/BWXwf/58/a](http://jsfiddle.net/BWXwf/58/a)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:26:49.270

打字错误：

setVisible 不 setVisble

```
function toggleCircles() {
    if (circlesArray) {
        for (i in circlesArray) {
            circlesArray[i].setVisible(false);
        }
    }
} 
```

顺便说一句，您可以直接设置属性而不是调用函数：

```
circlesArray[i].visible = false; 
```

# xslt - 当我们不知道他们的名字时如何获取子节点

> ID：15885216
> 
> 赞同：1
> 
> 时间：2013-04-08T17:23:39.843
> 
> 标签：xslt, xpath

我必须处理我不知道节点名称的 XML 文件。我所知道的是不同文件之间的结构是相同的

结构将是上述一个

```
<root>
    <node1>
        <node2>
        </node2>
    </node2>
</root> 
```

我必须制作一个 XSLT 文件来构建一个显示节点内容的 HTML 页面。

现在我有这段代码

```
<xsl:template match="/">
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="employe.css"/>
  </head>
  <body>
    <table>
      <tr>
        <th>ID Source</th>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Age</th>
        <th>Adresse</th>
        <th>Code Postal</th>
        <th>Ville</th>
        <th>Telephone</th>
        <th>Poste</th>
      </tr>
      <xsl:apply-templates/>
    </table>
  </body>
</html>
</xsl:template>

<xsl:template match="child::*">
    <tr>
        <xsl:apply-templates/>
    </tr>
</xsl:template>

<xsl:template match="">
    <td>
        <xsl:value-of select="."/>
    </td>
</xsl:template> 
```

我成功选择了第一级和第二级节点，但不知道如何选择第三级。

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:19:45.027

您可以尝试更改`match="/"`to`match="/*"`并添加这两个模板：

```
<xsl:template match="*[*]">
    <tr>
        <xsl:apply-templates/>
    </tr>
</xsl:template>

<xsl:template match="*[not(*)]">
    <td><xsl:value-of select="."/></td>
</xsl:template> 
```

# jquery - 使用 .load() 方法会阻止其他 jquery 方法工作吗？

> ID：15885218
> 
> 赞同：-1
> 
> 时间：2013-04-08T17:23:48.213
> 
> 标签：jquery

我有两个 html 页面，index.html 和 photo.html

索引.html

```
<html>
<body>
   <div id="menu">
     <ul>
    <li><p id="about">ABOUT</p></li>
    <li><p id="work">WORK</p></li>
    <li><p id="photo">PHOTO</p></li>
    <li><p id="mail">MAIL ME</p></li>
     </ul>
   </div>
   <div id="photo-container">
   </div>
</body>
</html> 
```

和 photo.html

```
<html>
<html>
<body>
  <div class="about12">
    <h4>a-design</h4>
    <p>
    //some text     
    </p>
  </div>
</body>
</html> 
```

和一个javascript文件：

```
 $(document).ready(function(){

    $('#photo').click( function () {
        $("#container").load("photo.html .about12");
        $('#photo-container h4').fadeout(5000);
            $('#photo-container p').animate({top: '150px'},1500); 
    });
}); 
```

当我单击照片 ID 时，函数 .load() 会起作用，但之后，其他 jquery 函数将不起作用。为什么是这样？

另外，另一个问题是 .load() 是完成这项工作的最佳方法：加载、淡出和动画，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:25:41.397

AJAX 表示异步加载。这部分：

```
$('#photo-container h4').fadeout(5000);
$('#photo-container p').animate({top: '150px'},1500); 
```

甚至在加载照片容器之前触发。您需要将其作为回调传递

```
$('#photo').click( function () {
    $("#container").load("photo.html .about12", function() {
        $('#photo-container h4').fadeout(5000);
        $('#photo-container p').animate({top: '150px'},1500); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:25:55.667

使用 jQuery .live 方法可能是您正在寻找的。

```
$("#photo").live("click", function(){ ... }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:27:58.730

ajax 加载是异步的 .. 您需要对其成功回调函数的数据进行处理。用于`find()`获取动态添加的内容元素。你只需要在加载的第一个选项中传递 url

尝试这个

```
$('#photo').click( function () {
    $("#container").load("photo.html",function(data){
        $(data).find('#photo-container h4').fadeout(5000);
        $(data).find('#photo-container p').animate({top: '150px'},1500);
    });

}); 
```

# javascript - firstWithPredicate 不接受日期

> ID：15885223
> 
> 赞同：0
> 
> 时间：2013-04-08T17:24:01.333
> 
> 标签：javascript, ios, ios-ui-automation

我正在为一个应用程序开发 UIAutomation，并在表格视图上有一个单元格，其中有数据和时间作为两个独立的元素。

下面是我用来获取与作为谓词字符串传递的日期或时间匹配的单元格的代码。

```
var cell = tableView().cells().firstWithPredicate(date); (Eg: date is 3/5/12) OR
var cell = tableView().cells().firstWithPredicate(time); (Eg: time is 10:30 AM) 
```

我什至尝试将谓词转换为字符串，如下所示：

```
var cell = tableView().cells().firstWithPredicate(date.toString()); (Eg: date is 3/5/12) OR
var cell = tableView().cells().firstWithPredicate(time.toString()); (Eg: time is 10:30 AM) 
```

但它似乎无法找到匹配的单元格。但是，如果我在单元格上传递除日期或时间之外的一些其他文本，我将取回单元格。

我在这里错过了什么吗？请建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:53:41.460

如果您只想获取变量中的值，您可以使用它的索引来获取它，如下所示， `var cellDate = tableView().cells()[<index_of_cell_where_date_is_present>]`喜欢 `var cellDate = tableView().cells()[2].name();`或 `var cellDate = tableView().cells()[2].value();`任何需要的。同样，您也可以使用时间。

# java - Java .startsWith 优化

> ID：15885226
> 
> 赞同：0
> 
> 时间：2013-04-08T17:24:26.707
> 
> 标签：java, optimization, startswith

所以我有一个问题。今天我开始优化我的代码并达到这一点，例如：

```
return !this.message.startsWith("/"); 
```

遵循我从[这里](http://www.appperfect.com/support/java-coding-rules/optimization.html#rule75)获取优化技巧的地方（链接到规则）

那么应该如何将该代码写入更优化的版本呢？我目前得到：

```
return !(this.message.length () > ZERO) && this.message.charAt(ZERO) == Slash; 
```

我写对了吗？如果我写错了，那我写错了什么？

谢谢，坦布尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:28:06.307

撇开您引用的规则的有效性（顺便说一句，我不同意，因为我认为降低代码的可读性比任何小的性能改进——如果有的话——转换可能提供）更糟糕），生成的代码应该是：

```
return !(this.message.length () > ZERO && this.message.charAt(ZERO) == Slash); 
```

您只有条件的第一项周围有括号，这是错误的。一个更易读的版本是：

```
return this.message.length () <= ZERO || this.message.charAt(ZERO) != Slash; 
```

# java - com.mysql.jdbc.Driver 的 ClassNotFoundException - 不使用 IDE

> ID：15885233
> 
> 赞同：0
> 
> 时间：2013-04-08T17:24:59.793
> 
> 标签：java, mysql

我正在尝试为 java 使用 MySQL 驱动程序，但我不断收到 ClassNotFoundException。我根本没有使用 IDE，程序是用 Vim 编写的，并在 Window 的命令行中编译。这是一堂课，教授告诉我们根本不能使用 IDE。我将 JAR 文件添加到 Window 的 PATH 系统环境变量中，但仍然出现错误。我一定是做错了什么，但我所做的大部分研究只是表明你需要将驱动程序添加到你的 IDE 的类路径中，但我没有使用 IDE，只是 Windows。

这是我的代码：

```
try {
    Class.forName("com.mysql.jdbc.Driver");
} 

catch (ClassNotFoundException e) {
    System.out.println("Where is your MySQL JDBC Driver?");
    e.printStackTrace();
    return;
} 
```

和错误：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at sqlAccess.<init>(sqlAccess.java:21)
    at Tester.DoOther(Tester.java:44) 
```

ETC

这就是我`PATH`在系统变量下添加到我的变量中的内容：

```
C:\Program Files\Java\jdk1.7.0_11\bin\mysql-connector-java-5.1.24-bin.jar 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:30:03.440

您必须将 jar 的路径添加到 CLASSPATH，而不是 PATH

```
set "CLASSPATH=.;F:\Software Tech II\FinalProject\lib\mysql-connector-java-5.1.24-bin.jar"
java -cp %CLASSPATH% Tester 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:31:13.637

创建一个 lib 目录，将所有 jar 放在那里（特别是 jdbc 连接器[http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)）

然后将其添加到您的类路径：[http](http://www.ibm.com/developerworks/library/j-classpath-windows/) ://www.ibm.com/developerworks/library/j-classpath-windows/ 祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:30:40.977

将 mysql-connector-java-5.1.24-bin.jar 文件添加到 C:\Program Files\Java\jdk1.7.0_11\jre\lib\ext 并重新启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T18:02:45.820

好的，这最终对我有用。感谢这个线程

[由于设置了类路径，java 程序没有运行](https://stackoverflow.com/questions/10694918/java-programs-not-running-due-to-seting-classpath)

我不知道类路径最好通过命令行的 -cp 开关设置，因此运行命令

```
 java -cp .;"F:\Software Tech II\FinalProject\lib\mysql-connector-java-5.1.24-bin.jar" Tester 
```

停止了我的错误。多谢你们。

# .net - VS2010/Framework 4.0 - 获取枚举的最大值

> ID：15885235
> 
> 赞同：1
> 
> 时间：2013-04-08T17:25:09.763
> 
> 标签：.net, visual-studio-2010, enums

我正在寻找枚举的最小值和最大值，而不是枚举数的最大值。我已经看到[了获取枚举的最大值](https://stackoverflow.com/questions/203377/getting-the-max-value-of-an-enum)

但是，在 Framework 4 中，GetValues() 不存在 cast()。

例子：

```
public enum Foo
{
     Bird = 1,
     Cat = 2,
     Dog = 4,
     Hampster = 8
}

var last = Enum.GetValues(typeof(Foo)).Cast<int>().Max();

Result should be: 8 
```

任何人都知道这是如何在框架 4 中完成的，而不必我自己一一列举？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:29:22.660

`IEnumerable.Cast<T>()`是一种扩展方法，在 .NET 3.5 中引入

你错过了一个`using System.Linq;`声明吗？

您需要该名称空间来查找扩展方法。

# ios - AFNetworking 泄漏

> ID：15885237
> 
> 赞同：1
> 
> 时间：2013-04-08T17:25:22.220
> 
> 标签：ios, memory-leaks, afnetworking

'正在使用 - (void)setImageWithURLRequest:(NSURLRequest *)urlRequest 加载许多图像

然而，图像永远不会被释放，即使使用它们的对象是。有没有办法迫使这些物体消失？

我相信 AFNetworking 正在缓存这些对象有没有办法禁用该选项？

# python - 在 Python 中使用递归

> ID：15885239
> 
> 赞同：1
> 
> 时间：2013-04-08T17:25:25.407
> 
> 标签：python, recursion

我正在尝试使用递归来解决问题，如果我使用“if”语句，这将非常冗长。我想看看 CONST = 50 在 n 中有多少次。我想返回 50 在 n 中出现的次数。我知道这是直截了当的，但我想使用递归来实现这一点，这对我来说并不直截了当。条件如下：

```
0 < n == 50 -> 1 instance
50 < n <= 100 -> 2 instance
100 < n <= 150 -> 3 instance
150 < n <= 200 -> 4 instance
200 < n <= 250 -> 5 instance
...
...
... 
```

下面是我开始的，但我卡住了：

```
def num_of_times(n)
""" (int) => int 
when n is entered count 1 for every 50 found. If any number is over 50, yet does not
equal another 50 (e.g. n = 60; 60 - 50 = 10; 50 -> 1; 10 -> 1) will call for a count, which would be a count of 2 in this case.

>>>num_of_times(60)
2
>>>num_of_times(200)
4
"""
    count = 0

    if n > 0 and n == 50:
        count += 1
    elif n > 50:
       """ Here is where my thinking is going to sleep"""
       ...
       ...
       ... 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:29:34.013

对于这个特定问题，您应该只使用除法：

```
count = n // 50 + 1 
```

（注意使用双斜杠，而不仅仅是“/”——这可以确保即使在 Python 3 上也会执行整数除法，结果会向下舍入，而不是给你一个浮点值作为结果）

现在，关于递归——它不是在 Python 中解决问题的首选方式——在“针对函数调用进行优化”的语言中，可能具有与迭代“for 循环”相同成本的递归函数，如方案，最好处理一个`for`或`while`循环。

保持这个例子 - 并导致递归 - 您需要在每次交互时更改数据输入和结果 - 以便当您的数据不需要记录器处理时，您会得到最终结果：

```
count = 0
while n >= 50:
   count += 1
   n -= 50 
```

从这里，更容易检查递归方法应该做什么：每个连续调用都应该接收“n”和“count”的修改值，而不是前一次迭代。您可以利用 Python 的可选参数语法，这样对函数的第一次调用就不必添加“count”参数：

```
def num_of_times(n, count=0):
    if n < 50:
        return count
    return num_of_times(n - 50, count + 1) 
```

这在 Python 中被限制为 n = 大约 50000，因为在解释器上设置了调用堆栈深度 - 并且默认的最大递归深度设置为 1000。您可以通过在`sys` 模块中设置它来更改该数字 - 但这绝对不是Python 中推荐的方法 - 既针对函数调用的开销，也针对`whie`and`for`构造的更高级别设施。对于某些会递归 2 到 100 次的函数显然是可以的，例如处理文件路径、URL 部分等的函数 - 特别是如果函数最终比交互式对应物更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:32:21.280

递归似乎是最没用的方法，但如果需要递归，试试这个：

```
def num_of_times(n):
    if n > 0 and n <= 50:
        return 1
    elif n > 50:
        return 1+num_of_times(n - 50)
    else:
        return 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:33:48.173

怎么样。

```
def num_of_times(n):
    if n < 50:
        return 0
    return 1 + num_of_times(n - 50) 
```

如果您所追求的结果对于每个 50 的可取值都不是 1 并且实际上介于 1 和 50 = 1 之间、介于 51 和 100 = 2 之间等等，那么

```
def num_of_times(n):
    if n <= 0:
        return 0
    elif n < 51:
        return 1
    return 1 + num_of_times(n - 50) 
```

# javascript - 显示：没有不能正常工作

> ID：15885241
> 
> 赞同：0
> 
> 时间：2013-04-08T17:25:26.717
> 
> 标签：javascript, jquery, html

我有一个画廊，只有当用户点击按钮时才会打开。所以我添加了代码 display:none 因为我不想在一开始就显示画廊。但是当我点击按钮时，只打开背景，图像不显示。

知道有什么问题吗？

```
<a onClick="$('.fixed-bar').toggle('slow');" data-icon="grid" data-iconpos="notext" data-inline="true" class="ui-btn-right" data-direction="reverse" style="margin-right:70px">Paginas</a>

<div class="container demo-3">
    <div class="main">
        <div class="fixed-bar" style="display:none">
            <ul id="carousel" class="elastislide-list">
                <li><a href="#"><img src="elastislide/small/1.jpg" alt="image01" /></a></li>
                <li><a href="#"><img src="elastislide/small/2.jpg" alt="image02" /></a></li>
            </ul>
        </div>
    </div>
</div>

<script type="text/javascript">
    $( '#carousel' ).elastislide( {
        minItems : 2
    } );
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:30:13.863

有点离题，但通常最好不要像那样内联编写 jQuery/CSS - 出于维护和性能原因，最好将它们放在外部文件中。

这是一个有效的**[jsFiddle](http://jsfiddle.net/69Sfx/8/)**。

顺便说一句，我`ui-btn-right`在 jQuery 和 CSS 中使用了该特定链接的类 ' ' 作为选择器 - 您可能应该为该特定链接提供一个 ID 或其他东西作为它的选择器，除非这是您计划使用该类的唯一时间.

**jQuery：**

```
$('.ui-btn-right').on('click', function(){
  $('.fixed-bar').toggle('slow');
}); 
```

**HTML：**

```
<a data-icon="grid" data-iconpos="notext" data-inline="true" class="ui-btn-right" data-direction="reverse">Paginas</a>   
<div class="container demo-3">
   <div class="main">
     <div class="fixed-bar">   
       <ul id="carousel" class="elastislide-list">
         <li><a href="#"><img src="elastislide/small/1.jpg" alt="image01" /></a></li>
         <li><a href="#"><img src="elastislide/small/2.jpg" alt="image02" /></a></li>
       </ul>
     </div>
   </div>
</div> 
```

**CSS：**

```
.ui-btn-right {
  margin-right:70px;      
}

.fixed-bar {
    display:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:31:33.897

如果您正在使用某种 javascript 库来执行轮播效果。您可能需要改为使用`style="visibility: hidden"`。脚本可能会在开始时计算大小，而`display:none`对象不会有这些大小。

**编辑**：由于您使用的是插件，我仍然等待我的可见性：隐藏解决方案。看起来您没有链接您的插件以供参考，但我猜它是 elastislide-responsive-carousel。

查看这个插件的源代码，它看起来像是在图像上调用了 outerWidth 和 outerHeight 来存储它们以供以后在第 340 行的插件中使用。

问题是它存储了 0。我已经修改了之前发布的 jsfiddle 以在此处显示。

[http://jsfiddle.net/Z6DhF/1/](http://jsfiddle.net/Z6DhF/1/)

正如其他人建议的那样，不要使用内联，试试这个代码

**CSS**

`.fixed-bar { visibility: hidden }`

# c# - 插入命令参数后文本框不刷新

> ID：15885244
> 
> 赞同：0
> 
> 时间：2013-04-08T17:25:31.477
> 
> 标签：c#, winforms, ms-access

Access 2003、VS 2010 C#、Windows 窗体应用程序

我认为我遇到了这个问题，因为我的文本框等数据绑定到当前数据，所以问题是如何让绑定源读取新数据而无需关闭并重新启动应用程序？没有错误。我尝试了多种方法，但在应用程序当前运行时它们都没有显示新记录，那么我做错了什么？

我的表单加载看起来像这样..

```
 this.fnDisplayPosition();

 bdSource = new BindingSource();
 string sql = "SELECT * FROM Table1";
 OleDbDataAdapter da = new OleDbDataAdapter(sql, myCon);
 DataSet ds = new DataSet();
 da.Fill(ds, "Table1");

 bdSource.DataSource = ds;
 //  this.table1BindingSource.AddNew();
 txtID.DataBindings.Add("Text", bdSource, "ID");
 cBAG.DataBindings.Add("Text", bdSource, "AgeGroup");
 cBGender.DataBindings.Add("Text", bdSource, "Gender"); 
```

fnDisplayPosition 方法读取那里有多少与数据绑定相关的记录...

```
this.label7.Text = this.table1BindingSource.Position + 1 + " of " +   
this.table1BindingSource.Count; 
```

例如，这是我的导航按钮..

```
 this.table1BindingSource.MoveFirst();
 this.fnDisplayPosition(); 
```

以下是我的插入方法，我可以添加我从[这个](http://www.java2s.com/Tutorial/CSharp/0560__ADO.Net/Insertcommandwithparameters.htm)网站使用过的新记录......

```
OleDbDataAdapter da = new OleDbDataAdapter(@"INSERT INTO Table1 (ID, AgeGroup, Gender)VALUES
(@txtID, @cBAG, @cBGender", myCon);

       string qry = @"select * from Table1";
       string upd = @"INSERT INTO Table1 (ID, AgeGroup, Gender)   
                      VALUES(@txtID, @cBAG, @cBGender)";

 myCon.Open();

       try
         {
           da.SelectCommand = new OleDbCommand(qry, myCon);
           DataSet ds = new DataSet();
           da.Fill(ds, "Table1");

           DataTable dt = ds.Tables["Table1"];

           DataRow newRow = dt.NewRow();
           newRow["ID"] = txtID;
           newRow["AgeGroup"] = cBAG;
           newRow["Gender"] = cBGender;
           dt.Rows.Add(newRow);

           OleDbCommand cmd = new OleDbCommand(upd, myCon);

           cmd.Parameters.AddWithValue("@ID", txtID.Text);
           cmd.Parameters.AddWithValue("@AgeGroup", cBAG.Text);
           cmd.Parameters.AddWithValue("@Gender", cBGender.Text);

           da.InsertCommand = cmd;
           da.Update(ds, "Table1");
           da.Fill(ds, upd);
           } catch(Exception ex) {
        Console.WriteLine("Error: " + ex);
     } finally {
       myCon.Close();
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:49:54.917

经过多次试验和错误，我发现了它发生的原因。将 tableadapter 和绑定源绑定到其他类似的文本框的使用不是要走的路。你必须硬编码。因此，要查看您的数据反射，无论是更新、删除还是添加新记录，而不关闭和重新启动您的应用程序，您不能使用 tableadapter 或绑定源。为了清楚地理解我在说什么，你做这个网站，[这里](http://www.c-sharpcorner.com/uploadfile/e628d9/inserting-retrieving-records-from-ms-access-2007-using-odbc/)。您使用什么连接或如何使用命令参数都没有关系。无论如何，这只是我的意见。

# php - 访问使用 ajax 加载的 dom 部分以一种奇怪的方式工作

> ID：15885246
> 
> 赞同：0
> 
> 时间：2013-04-08T17:25:34.743
> 
> 标签：php, jquery, html, ajax

我会尽量解释清楚。我所做的是使用 ajax 加载页面的一部分，然后使用简单的 jquery 访问加载了 ajax 的那部分 dom。在 main.html 我加载了 dom 部分，dom 部分来自一个 php 文件，它只是回显我需要的 html，可以说它在 main.html 中称为 call_me.php 的 php 文件已经加载了 js，所以基本上，由于某种原因，它无法访问加载 ajax 的 dom。我所做的工作是将我需要在那个dom部分上工作的js放在call_me.php中那个js的一部分没有被call_me.php回显，并且由于某种原因它起作用了，我在其中搜索了js代码检查元素，根本找不到它，有人可以告诉我发生了什么吗？或向我解释这是如何工作的？我使用的ajax代码是：

```
$('.general').click(function(){
    $('.contents').html("");
    $.ajax({
        type: 'GET',
        url: 'src/user_setting.php',
        data: 'target='+$('.user_target_id').val(),
        success: function(msg){
            $('.contents').html(msg);

        }
    });
}); 
```

这是php代码

```
<?php 

    require '../config/global.php';
    if (isset($_GET['target']) && isset($_SESSION['userId'])) {
        $target = security($_GET['target']);
        $from = security($_SESSION['userId']);
    echo<<< html
    <input name = "target" type = "hidden" class = "target" value = "$target">
    <input name = "from" type = "hidden" class = "from" value = "$from">
    <div class ="container form-container2">
    <div class="alert alert-success confirm">
        <a class="close" data-dismiss="alert">&times;</a>
        Mesajul a fost trimis cu success !
    </div>
    <div class="alert alert-error confirm-error">
        <a class="close" data-dismiss="alert">&times;</a>
        Mesajul nu poate fi trimis !
    </div>

        <table>
            <tr>
                <td><span>Subiect</span></td> 
                <td><input name = "title" class = "span3 title" type = "text"  ></td>
            </tr>
            <tr>
                <td colspan="2"><textarea name = "body" class = "span5 msg" ></textarea></td>
            </tr>

            <tr>
                <td><button class = "btn btn-inverse send">Trimite mesaj</button></td>
            </tr>
        </table>

    </div>
html;
    }
 ?>
 <script type="text/javascript">
    $(".confirm").hide();
    $(".confirm-error").hide();
    $('.send').click(function(){

        $.ajax({
               type: "POST",
               url: "src/send_message.php",
               data: $(".target").serialize()+"&"+$(".from").serialize()+"&"+$(".title").serialize()+"&"+$(".msg").serialize(), 
               success: function(data)
               {
                 if (data == "ok") {
                    $(".confirm").slideDown();
                    $(".confirm-error").hide();
                    $(".title").val("");
                    $(".msg").val("");                  
                }else{
                    $(".confirm-error").slideDown();
                }
               }
         });
    });
 </script> 
```

如果在加载 ajax 的 dom 上使用 javascript 有更好的方法，请告诉我，我是 web 开发的新手

# javascript - 一个来源上的两个 ONMOUSEOVER。Javascript

> ID：15885248
> 
> 赞同：-3
> 
> 时间：2013-04-08T17:25:37.087
> 
> 标签：javascript, onmouseover

我正在尝试编写带有横幅的 JavaScript。当我将鼠标悬停在横幅上时，它会变成不同的横幅。然后，当我将鼠标移出时，它应该保持不变。然后当我将鼠标移回它应该回到原来的横幅。但是我无法弄清楚如何做到这一点。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:30:24.210

使用 Javascript

```
<img onmouseover="changeImage()" id="myBanner" src="Images\image1.jpg"/>
<script>
 function changeImage(){
  if(document.getElementById("myBanner").src=="Images\image1.jpg"){
   document.getElementById("myBanner").src="Images\image2.jpg"
  }else{
   document.getElementById("myBanner").src="Images\image1.jpg"
  }
 }
</script> 
```

这适用于在彼此之间切换的 2 个图像。如果你想使用更多，我建议使用一个传递给函数的变量和一个`switch`贯穿所有选项的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:47:07.610

您只需要一个鼠标悬停来处理切换：

```
(function() {
    var imgTag = document.getElementsByTagName('img')[0];
    imgTag.addEventListener('mouseover', function(e) {
        var currentImage = imgTag.getAttribute('src');

        imgTag.setAttribute('src', imgTag.getAttribute('data-other-image'));
        imgTag.setAttribute('data-other-image', currentImage);
    });
}()); 
```

演示：http: [//jsfiddle.net/EsNEC/](http://jsfiddle.net/EsNEC/)

这样，您的 HTML 中就没有内联 javascript。

# javascript - jquery转到没有动画的页面

> ID：15885250
> 
> 赞同：0
> 
> 时间：2013-04-08T17:25:47.827
> 
> 标签：javascript, jquery

我有这样的jQuery代码：

```
var pageWidth = 230;
var sliderStartPosition = 0;
var sliderPageWidth = pageWidth;

function goToPage(slideNum){
    var offset = (slideNum-1) * sliderPageWidth;
    $('#js_slides').animate({left:'-'+offset+'px'}, 500, function(){
        $('#js_slides li').each(function(){ this.scrollTop = 0; });
    });
    return false;

}

function goToPageWithoutAnimation(slideNum){
    var offset = (slideNum-1) * sliderPageWidth;
    //code here
} 
```

这是CSS：

```
div.sliderContainer {
    width: 230px; /*width of one page to slide*/
    overflow: hidden;
}

div.sliderContainer ul {
    position: relative;
    width: 690px;
    list-style: none;
    list-style-type: none;
    margin: 0px;
    padding: 0px;
}

div.sliderContainer ul li{
    float: left;
    width: 210px;
    height: 380px;
    overflow: auto;
    padding: 10px;
} 
```

我需要你的帮助，如何在没有动画的情况下进入页面。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:28:04.070

替换`animate`为`css`：

```
$('#js_slides').css({left:'-'+offset+'px'});
$('#js_slides li').each(function(){ this.scrollTop = 0; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:29:02.563

您可以使用`css`代替`animate`：

```
$('#js_slides').css({left:'-'+offset+'px'});
$('#js_slides li').each(function(){ this.scrollTop = 0; }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:15:07.607

如果您想保留您拥有的代码（而不是采用替代方法），那么您可以将动画时间（当前 = 500 毫秒）减少到零，这将产生您想要看到的结果。

像这样：

```
 $('#js_slides').animate({left:'-'+offset+'px'}, 0, function(){
        $('#js_slides li').each(function(){ this.scrollTop = 0; });
    }); 
```

# java - JDialog - 如何使输入键响应按钮焦点在对话框上

> ID：15885259
> 
> 赞同：1
> 
> 时间：2013-04-08T17:26:37.567
> 
> 标签：java, swing, jdialog

我正在开发 Java Swing 应用程序。

焦点通过左右键切换，当我按下回车键时按钮焦点处于活动状态。我的问题是如何使按钮焦点响应输入键。

```
 private void displayGUI(){

            JFrame w = new buildFrame();        

            w.setDef

aultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
        w.addWindowListener(new WindowAdapter(){

            @Override
            public void windowClosing(WindowEvent e){

                Object[] options = {"YES","NO","CANCEL"};

                JOptionPane optionPane = new JOptionPane("File haven't save yet." +
                        " \n Are you want to save the file?", 
                        JOptionPane.QUESTION_MESSAGE, 
                        JOptionPane.YES_NO_CANCEL_OPTION,
                        null,
                        options);

                JDialog dialog = optionPane.createDialog("Confirm Dialog");

                Set<AWTKeyStroke> forwardTraversalKeys = 
                        new HashSet<AWTKeyStroke>(dialog.getFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS));
                forwardTraversalKeys.add(AWTKeyStroke.getAWTKeyStroke(KeyEvent.VK_RIGHT, KeyEvent.VK_UNDEFINED));

                Set<AWTKeyStroke> backwardTraversalKeys = 
                        new HashSet<AWTKeyStroke>(dialog.getFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS));                  
                backwardTraversalKeys.add(AWTKeyStroke.getAWTKeyStroke(KeyEvent.VK_LEFT, KeyEvent.VK_UNDEFINED));

                dialog.setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS, forwardTraversalKeys);
                dialog.setFocusTraversalKeys(KeyboardFocusManager.BACKWARD_TRAVERSAL_KEYS, backwardTraversalKeys);
                dialog.setVisible(true);                    

                Object n = optionPane.getValue();               

                if(n.toString().equals("YES")){         
                    if(helper.saveFile("text.txt", gatherAllContent(), Swing4.this)){
                        System.exit(0);
                    }
                    label.setText("There is something wrong on quit");

                }else if(n.toString().equals("NO")){
                    System.exit(0);
                }else if(n.toString().equals("CANCEL")){
                    dialog.setVisible(false);
                    dialog.dispose();
                }               

            }
        });

        w.setSize(600,600);
        w.setLocation(700,100); 
        w.setVisible(true);     

    } 
```

方法 dialogEnterKeyAction 的代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:31:04.413

有关一种解决方案，请参见[Enter Key and Button](http://tips4java.wordpress.com/2008/10/25/enter-key-and-button/)。

# magento - Magento 语言切换商店代码 Urls

> ID：15885266
> 
> 赞同：3
> 
> 时间：2013-04-08T17:26:57.273
> 
> 标签：magento, multilingual

我有 Magento 1.7.0.2

我的问题是从商店视图中切换语言。

我启用了 mod_rewrite，并为 url 启用了商店代码。但是语言切换不能正常工作。示例：`http://mysite.com/en/`- 默认页面

当我想用法语更改语言时，语言切换中的 url 看起来：`http://mysite.com/en/?___store=fr`

它不起作用我发现切换器位于：

`app/design/frontend/default/mytheme/template/page/switch/languages.phtml`

但我不知道如何更改代码以使其正常工作。

当我想更改语言时，需要有这个网址：`http://mysite.com/fr` 没有`?___store=fr`。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T04:38:32.520

如果您查看`/app/code/core/Mage/Core/Model/Store.php`您会看到以下功能：

> 公共函数 getCurrentUrl($fromStore = true)

所以在不改变任何核心代码抓取的情况下`/app/design/frontend/base/default/ template/page/switch/languages.phtml`

换行

```
<option value="<?php echo $_lang->getCurrentUrl() ?>"<?php echo $_selected ?>><?php echo $this->htmlEscape($_lang->getName()) ?></option> 
```

至

```
<option value="<?php echo $_lang->getCurrentUrl(false) ?>"<?php echo $_selected ?>><?php echo $this->htmlEscape($_lang->getName()) ?></option> 
```

并将更改后的文件放入主题文件夹的相应路径中。

现在你有了干净的 URL。

# c# - 分析数据 c#

> ID：15885276
> 
> 赞同：1
> 
> 时间：2013-04-08T17:27:39.950
> 
> 标签：c#

我正在介绍 c# 类，我们的资源很糟糕。

我已经使用 StreamReader 输入了一个 csv 文件，我想做的是分析某个特征的信息。让我困惑的是如何让我的程序知道从每一行中选择数据的某些部分？假设我想选择最大的数字

例如，如果一行是：

2003-04-12, 334, 367, 289

我会在这里添加一个声明吗？

```
input = reader.ReadLine(); 
while (input != null) 
{
    ...
    input = reader.ReadLine(); //next row
}
reader.Close(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:15:46.010

The simplest thing to do is a) split the line into parts and b) parse the parts into numbers safely using `.TryParse()`

```
static void Main(string[] args)
{
    var reader=System.IO.File.OpenText("Data.csv");
    List<double[]> data=new List<double[]>();
    var line=reader.ReadLine();
    double max=0;
    while(!reader.EndOfStream)
    {
        line=reader.ReadLine();
        string[] parts=line.Split(',');
        //parse first part as date
        DateTime date=DateTime.Parse(parts[0]);
        //parse rest of parts as float/doulbe/decimal
        double[] values=new double[parts.Length-1];
        for(int i=0; i<values.Length; i++)
        {
            //for each value in row convert string to number safely.
            double x = 0;
            double.TryParse(parts[i+1], out x);
            values[i]=x;
        }
        //keep data values in list
        data.Add(values);
        //keep highest from 1st column
        if(values[0]>max) { max=values[0]; }
    }
    reader.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:34:55.330

[使用 Regex 捕获组](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)可能是您正在寻找的。

像这样的东西：

```
var lineRegex = new Regex(@"(?<year>[0-9]+)\-(?<month>[0-9]+)\-(?<day>[0-9]+), (?<first>[0-9]+), (?<second>[0-9]+), (?<third>[0-9]+)");
// ...
var matches = lineRegex.Matches(input); 
```

您的结果现在位于匹配元素的集合中。不过，这只是一个示例，创建正确的正则表达式字符串本身就是一项任务。

# python - 测试 app.yaml 中设置的 Google appengine 应用安全性

> ID：15885277
> 
> 赞同：0
> 
> 时间：2013-04-08T17:27:44.887
> 
> 标签：python, google-app-engine

测试 app.yaml 文件中设置的 python 应用程序安全性的方法是什么？

在我的 app.yaml 中，我有一个受限的日志部分：

```
- url: /log/?.*
  script: swim.app
  login: required 
```

我有一套针对我的 GAE 应用程序（python）的测试，我想添加一些测试来检查登录限制。[我已经按照这些说明](https://developers.google.com/appengine/docs/python/tools/localunittesting#Setting_Up_a_Testing_Framework)设置了测试运行程序，然后初始化了我的存根，因为它们[在该页面前面的 DemoTestCase 中显示](https://developers.google.com/appengine/docs/python/tools/localunittesting#Writing_Datastore_and_Memcache_Tests)。

```
def setUp(self):
    self.testbed = testbed.Testbed()
    self.testbed.activate()
    # Set consistency policy to simulate HR consistency model
    self.policy = datastore_stub_util.PseudoRandomHRConsistencyPolicy(probability=0)
    self.testbed.init_datastore_v3_stub(consistency_policy=self.policy)
    self.testbed.init_user_stub()

def tearDown(self):
    self.testbed.deactivate()

...

def test_log_requires_login(self):
    ''' Make sure attempted access redirects to a login page '''
    request = webapp2.Request.blank('/log')
    response = request.get_response(swim.app) 
    self.assertEqual(response.status_int, 302) 
```

test_log_requires_login 方法不会通过，因为`response.status_int`传回了 200 状态。如果我在调试器中单步执行代码，看起来该页面似乎只允许匿名用户访问测试设置中的页面，并在该页面上`response.body`为我提供了表单。这不是正在运行的应用程序的行为，因为对应用程序的“/log”请求将给出 302 状态并重定向到登录页面。

我也尝试过使用 WebTest 来做这件事，结果相同。问题似乎是通过测试框架运行的应用程序不使用 app.yaml 信息（这是有道理的，因为我实际上并没有运行完整的应用程序）。我可以编写驱动正在运行的应用程序来测试安全性的测试，但是如果我可以在不需要正在运行的应用程序的情况下只使用其余的单元/集成测试来运行这些测试，那将会很方便。有没有办法这样做？

更新：我一直在使用[nosegae](http://farmdev.com/projects/nosegae/)。这似乎很有希望，因为它实际上使用 GAE dev_appserver 加载了 app.yaml 信息，并且它生成了与正在运行的应用程序使用的相同的映射。目前尚不清楚这些是否以任何方式应用，因为我的测试仍然显示空用户可以访问该`login: required`页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:10:23.457

我刚刚找到了devappserver2的[“回归测试框架”的早期版本，它是](https://code.google.com/p/appengine-devappserver2-experiment/downloads/detail?name=test.zip&can=2&q=)[1.7.6 的默认开发应用程序服务器](http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes#Version_1.7.6_-_March_19,_2013)。它设置了一个服务器，该服务器确实会使用 app.yaml 安全设置，并且在集成测试方面做我需要的。

# c# - EF Code Firs 中的多个继承级别

> ID：15885279
> 
> 赞同：3
> 
> 时间：2013-04-08T17:27:54.237
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我试图弄清楚如何处理多种类型的继承。我有一个现有的 Code First / EF / MVC 项目，它在生产环境中具有实时数据。系统使用一种称为“文档”的类型，可以在该类型上执行许多功能，并且有许多关联的表可以链接到 DocumentID。

目前有一种更加差异化的文档，即采购订单，它实现了一些更具体的属性，例如引用产品、数量和单价的“OrderLines”集合。还有一些特定于采购订单的其他字段。除了具有“OrderLines”与基本文档类型不同之外，采购订单是供应方文档，因此，它的第三方是“供应商”。将来可能还有其他供应方文件也将供应商作为第三方。

我现在准备实施一种新的文档类型，即需求方，这意味着它将有一个称为客户的第三方。它还有一个 OrderLines 集合。

我的系统目前设置为 TPH，因此该表称为“文档”，并且有一个鉴别器列表示里面的文档是采购订单。

如何添加新类型并使用继承来实现 OrderLines 集合和 CustomerID / Customer 链接？看来 c# 不能做多重继承，所以下面的问题是不可能的：

> Document -> OrderLinesDocument -> PurchaseOrder
> 
> 文档 -> OrderLinesDocument -> 发票
> 
> Document -> VendorDocument -> PurchaseOrder
> 
> 单据 -> 客户单据 -> 发票

中产阶级将在哪里实现可能对许多文档但不是所有文档共有的字段？

有没有办法使用接口来实现这一点，并且仍然让 EF 正确地找出表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:56:03.220

继承在许多方面可能很棘手 - 所以我的建议是“轻松”地处理它。

但是只要在这里做一个典型的 OO 设计就会产生可用的表、结构。也许这样的事情可以为你工作......

```
public class Document
{
    public long ID { get; set; }
    public string Name { get; set; }
}

public class OrderLinesDocument : Document
{
    public ICollection<OrderLine> OrderLines { get; set; }
}

public interface IVendorDocument
{
    ICollection<Vendor> Vendors { get; set; }
}
public class VendorDocument : Document, IVendorDocument
{
    public ICollection<Vendor> Vendors { get; set; }
}

public interface ICustomerDocument
{
    ICollection<Customer> Customers { get; set; }
}
public class CustomerDocument : Document
{
    public ICollection<Customer> Customers { get; set; }
}

public class PurchaseOrder : OrderLinesDocument, IVendorDocument
{
    public ICollection<Vendor> Vendors { get; set; }
}

public class Invoice : Document, ICustomerDocument
{
    public ICollection<Customer> Customers { get; set; }
} 
```

IMO 最简单的解决方案是使用 TPH（几乎是“原样”）。

但正如我所说，小心使用它——它可能不适用于你的想法——即你需要进行试验，确保 Db 记录看起来是最佳的。

**顺便提一句。**如果你不知道，你可以这样使用它，忘记发布......

```
var query1 = db.Documents.OfType<PurchaseOrder>().ToList();
var query2 = db.Documents.OfType<Invoice>().ToList();

var query3 = db.Documents.OfType<CustomerDocument>().ToList();
var query4 = db.Documents.OfType<VendorDocument>().ToList();
var query5 = db.Documents.OfType<OrderLinesDocument>().ToList();

var query6 = db.Documents.OfType<Document>().ToList(); 
```

（试试看它是如何工作的）

# ajax - MVC3：带有ajax调用的多个按钮

> ID：15885283
> 
> 赞同：0
> 
> 时间：2013-04-08T17:28:01.477
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3

我有一个局部视图，它有两个按钮并与模型绑定（由 GET 请求生成 - /User/Edit/1）。我使用 BeginForm 时没有指定任何操作名称，因为我想使用模型验证。我已经使用 ajax 配置将操作（URL）分配给“关闭”按钮。当我运行我的应用程序并按下关闭按钮时，首先，它使用 ajax 配置（关闭数据条目）成功执行操作，然后对 POST 请求（/User/Edit/1）执行操作。我想知道，为什么当我按下关闭按钮时会执行第二个动作，我怎样才能停止执行？

部分视图：_Record.cshtml

* * *

* * *

```
@using(Html.BeginForm())
{
    <hr />
    <p>
        <fieldset style="display:inline-block">
            <legend>User</legend>
            <table border="1">
                <tr>
                    <th style="text-align: right; padding-left: 20px;">
                        @Html.LabelFor(model => model.first_name)
                    </th>
                    <td>
                        <div class="editor-field">
                            @Html.TextBoxFor(model => model.first_name, 
new { style = "width:270px;", maxlength = 30 })
                         @Html.ValidationMessageFor(model => model.first_name)
                        </div>
                    </td>
                </tr>
    *****
    *****

            <p>
       <input type="submit" value="Save" style="float: right" />
       <input type="submit" value="Close" onclick="Close()" style="float: right" />
            ?</p>
        </fieldset>
        @Html.ValidationSummary(true)
    </p>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:40:10.543

您的输入 type="submit" 意味着当您按下此按钮时，您将视图中的模型提交回控制器以发布它。删除类型=“提交”

# javascript - jquery find 只返回一个元素（在 Meteor 中）

> ID：15885287
> 
> 赞同：1
> 
> 时间：2013-04-08T17:28:10.483
> 
> 标签：javascript, jquery, meteor

我有以下链接，单击时应该显示fancyboxes——在这里使用jquery插件：http: [//fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

```
<div class="boxes">
    <a href="/signup.html" class="btn popup-link fancybox.ajax">Sign Up</a>
    <a href="/signin.html" class="btn popup-link fancybox.ajax">Sign In</a>
   </div> 
```

我遇到的问题是fancybox 仅适用于第一个链接。在流星中，我有：

```
Template.mytemplate.rendered = function () {

        console.log($(this.find('a.popup-link')));
        $(this.find('a.popup-link')).fancybox({
            padding: 18,
            openMethod: 'changeIn',
            closeBtn   : false,
            beforeShow: function() {
                $('input:checkbox').ezMark();
                $('select').selectbox();

                $('.trigger-ajax').on('click', function(e) {
                    e.preventDefault()
                    $('.fancybox-wrap').animate({ 'left': '-100%'}, 400, function() {
                        $(this).parent().find('.popup-link').trigger('click');
                    })
                })
            }
        });

} 
```

当我单击第一个链接时，我的幻想框按预期加载，但是当我单击第二个链接时，什么也没有发生。

通过 console.log 它也清楚地发现 find 只返回第一个元素......因此出现了问题。

请注意，如果我`('a.popup-link')`不使用`find`.

这是怎么回事？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:41:43.427

如果您尝试使用 Meteor 模板方法（不是 jQuery *find()*方法） ，请使用`this.findAll('a.popup-link')`而不是。`this.find('a.popup-link')`

 *但是，*findAll()*返回一个 DOM 元素数组，我不确定 $() 是否会接受它作为参数。如果没有，您可以循环遍历数组的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:34:30.990

我认为你正在使用不同的`find`方法。采用：

```
$(this).find('a.popup-link').fancybox({ 
```

我不确定`this.find('a.popup-link')`过去是如何工作的，但我想这取决于什么`this`和`find`做过/做过什么。要使用 jQuery 方法`find`，您需要一个 jQuery 对象。就是`$(this)`这样。从那里，您可以找到带有 .popup-link 的“a.popup-link”后代`find`。*

# css - 链接不会隐藏在滚动菜单中

> ID：15885288
> 
> 赞同：-4
> 
> 时间：2013-04-08T17:28:12.790
> 
> 标签：css

我还有一个问题。我从语言菜单（右上角）的第二个链接不要隐藏： [http](http://dash.com.pl/CTP/index.html) ://dash.com.pl/CTP/index.html 你是如何得到解决方案的？

### HTML

```
 <header id="language">
                <ul>
                 <li>

                 <div class="link"><a href="#">svensk</a><span></span></div>

                 <div id="sve"><a href="#"><div id="ico"></div></a></div>
                    <hr>
                <div class="link"><a href="#">english</a><span></span></div>

                 <div id="uk"><a href="#"></a></div>         
                </li>
            </ul>
            </header> 
```

### CSS

```
#language .link{

display:block;
    font-family: 'OpenSansRegular';
    font-size:14px;
    padding: 0 0 2px 0;
    cursor:pointer;
margin:0 0 0 33px;
}

#language .link a{
    text-decoration:none;
    color:#525252;
    -webkit-transition: color 0.4s ease;
margin:0;

}

#language .link a:hover{
    color:#fb6f5e;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:43:14.560

我认为你必须改变你的 html 结构为 li 添加唯一的类，但你可以使用这个代码。在 firebug 上检查它的工作解决方案 css：

```
#language hr + .link { 
  display: none; 
}
#language ul:hover .link {
  display: block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:47:13.800

试试这个 CSS 样式：

```
#language{
     overflow: hidden;
} 
```

# sql - H2：尽管选择性低，但 SELECT DISTINCT 缓慢

> ID：15885289
> 
> 赞同：1
> 
> 时间：2013-04-08T17:28:21.713
> 
> 标签：sql, h2

我正在使用 H2 并有一个简单的查询，如下所示：

```
SELECT DISTINCT col
FROM PUBLIC.TABLE; 
```

H2 使用全表扫描，即使选择性很低，并且 col 上存在非唯一索引。

我检查了这个并运行：

```
SELECT SELECTIVITY(CLUSTERNODE ) FROM PUBLIC.TRANSFORMATION; 
```

返回“1”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:44:58.007

尽管选择性低（=基数），H2 可能不会在 DISTINCT 查询中使用现有索引的原因是它在内部维护表统计信息，这些统计信息用于确定列选择性，这些可能已过时，或者未在全部。

文档说，在较新的版本中，这些是自动更新的，但似乎需要一定数量的 INSERT（或其他突变），至少在我的情况下，单独升级并不能解决问题（我从 1.2.143 升级至 1.3.171）。

只需执行“分析”更新查询，一切都会好起来的。就我而言，执行时间从近一分钟下降到 300 毫秒。

# c# - 验证属性中的值

> ID：15885290
> 
> 赞同：11
> 
> 时间：2013-04-08T17:28:25.913
> 
> 标签：c#, dry, encapsulation

所以我听说在这样的属性中验证一个值：

```
//dummy example, let's assume that I want my value without dots
public string MyProp
{
    set
    {
        if(value.Contains('.'))
            throw new ArgumentException("Must not contain '.'", "value");
    }
} 
```

是错误的，我应该避免它。

但在早些时候，我被告知这是好方法。我们可以使用封装，只有一个地方可以检查，DRY 等。

我的小例子有什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T17:38:45.390

在属性设置器中抛出异常并没有错。但是你应该抛出一个`ArgumentException`, 并实际设置属性的值！

```
private string _myprop;
public string MyProp{
    set{
       if(value.Contains('.')) throw new ArgumentException("Must not contain .");
       this._myprop=value;
    }
    get { return this._myprop; }
} 
```

来自[MSDN 中有关最佳实践的文章](http://msdn.microsoft.com/en-us/library/ms229006.aspx)：

> 属性 getter 应该是没有任何先决条件的简单操作。如果 getter 可能抛出异常，请考虑将属性重新设计为方法。此建议不适用于索引器。由于参数无效，索引器可能会引发异常。
> 
> **从属性设置器抛出异常是有效且可接受的。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:37:17.690

SO上也有一些类似的问题。

你的属性应该尽可能的轻量级。如果 setter 抛出错误，这没关系，但您可能会再次考虑将其移动到函数中。事情很容易变得一团糟。

> 避免从属性获取器中抛出异常。属性 getter 应该是简单的操作，不应该有前置条件。如果 getter 可以抛出异常，它可能应该重新设计为方法。

[最佳实践：从属性中抛出异常](https://stackoverflow.com/questions/1488472/best-practices-throwing-exceptions-from-properties)

[从属性设置器抛出什么异常？](https://stackoverflow.com/questions/633944/what-exception-to-throw-from-a-property-setter)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-08T17:32:34.823

请参阅：[最佳实践：从属性](https://stackoverflow.com/questions/1488472/best-practices-throwing-exceptions-from-properties)中抛出异常，以了解和讨论为什么从属性中抛出异常是不好的。

诚然，该帖子谈到了财产获取者。

消费者通常将 Setter 视为简单地设置属性隐藏的私有字段，并可能根据需要执行一些额外的操作，异常是意外行为，您能想象必须将每个 set 语句包含在 try 块中吗？

虽然它可能是被准则接受的行为，但对于开发人员来说，这是一场猜测的噩梦，并且验证逻辑应该包含在一个单独的方法中，然后在需要时从属性中调用。

如果您在设置属性时需要验证或特殊行为，您应该使用 set 方法，例如`SetMyProp(string value)`，因为它带来了可能导致异常等的区别。

如果您将这些属性用于 WPF 模型之类的东西，那么您应该改用 WPF 的内置数据验证。

# r - 如何在 R 函数中运行效果图

> ID：15885291
> 
> 赞同：5
> 
> 时间：2013-04-08T17:28:26.820
> 
> 标签：r

**更新：**以前的标题是，`Is there any specific way to pass data frame as an argument to a function?`但根据这里的聪明人的说法，这不是正确的问题。原帖如下。

当我运行以下功能时`somefunc(sleepstudy)`，

```
somefunc<-function (dataLme) 
{
 library(effects)
 library(lme4)

 fm8 <- lmer(Reaction ~ 1 + Days + (1 + Days|Subject), dataLme,
      REML = 0, verbose = TRUE)

 plot(effect("Days",fm8))
} 
```

我有一个错误。

```
Error in plot(effect("Days", fm8)) : 
  error in evaluating the argument 'x' in selecting a method for function 'plot': Error in is.data.frame(data) : object 'dataLme' not found 
```

但是如果我手动执行

```
library(effects)
library(lme4)
fm8 <- lmer(Reaction ~ 1 + Days + (1 + Days|Subject), sleepstudy,
    REML = 0, verbose = TRUE)
plot(effect("Days",fm8)) 
```

我没有收到任何错误。

我认为 R 通过值传递意味着将整个对象内容复制到函数参数。但看起来我并不完全正确。谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T18:00:33.707

一个（hacky）解决方法是分配`dataLme`到全局环境中，在那里`effect()`可以找到它：

```
library(effects)
library(lme4)

somefunc <- function (dataLme) {
    ## Assign to a symbol that's unlikely to be in use in .GlobalEnv
    ## (and make sure this function cleans up after itself!)
    assign(".TeMpVaR", dataLme, envir=globalenv())
    on.exit(rm(.TeMpVaR, envir=globalenv()))

    fm8 <- lmer(Reaction ~ 1 + Days + (1 + Days|Subject), .TeMpVaR,
         REML = 0, verbose = TRUE)    
    plot(effect("Days",fm8))
}

somefunc(sleepstudy) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T18:26:40.647

这只是部分答案，但我确实想记录我的测试过程。我主要想表明问题出在`effects`包而不是`lme4`包（我维护它，它也遇到过这类问题：大多数此类问题在 的开发版本中已修复`lme4`，但有些问题仍然存在稳定版本，安装`lme4.0`在我的系统上......）

```
library("effects")

showpkgs <- function() names(sessionInfo()$otherPkgs)
somefunc<-function (dataLme, pkg="nlme")  {
    require(pkg,character.only=TRUE)
    on.exit(detach(paste("package",pkg,sep=":"),unload=TRUE,character.only=TRUE))
    if (pkg=="nlme") {
        fm8 <- lme(Reaction ~ 1 + Days,random=~Days|Subject, dataLme)
    } else {
        fm8 <- lmer(Reaction ~ 1 + Days + (1 + Days|Subject), dataLme, REML = 0)
    }
    plot(effect("Days",fm8))
} 
```

无论我们使用 stable `lme4`、 development`lme4`还是较旧的`nlme`包，都会发生错误

```
data("sleepstudy",package="lme4")
showpkgs()
somefunc(sleepstudy)  ## nlme
showpkgs()  ## warning about unloading nlme namespace due to glmmADMB dep. (??)
somefunc(sleepstudy,pkg="lme4.0")  ## lme4-stable
showpkgs()  ## failure to remove Matrix/warning message
somefunc(sleepstudy,pkg="lme4")    ## lme4-devel
showpkgs()  ## leaves RcppEigen, Rcpp loaded as well 
```

我看了看`effects`包装，一个简单的通用修复并不是很明显。将相关`eval(cl)`行更改为`eval(cl,envir=environment(formula(mod)))`可用于*开发* `lme4`，但不适用于稳定`lme4`或`nlme`...

# java - 在 Java 中执行具有受限权限的方法

> ID：15885300
> 
> 赞同：9
> 
> 时间：2013-04-08T17:28:55.303
> 
> 标签：java

有什么方法可以`AccessController.doPrivileged`与 new一起使用`AccessControlContext`来*限制*对类/方法的访问？我想要一个子程序，它可以调用不受信任的代码，而无需访问文件系统或打开套接字。

具体的用例是，允许最终用户提供可以在有限权限下执行的代码或脚本片段（例如 Javascript 或 Groovy）。

我正在寻找的是一个普通的安全策略文件，其范围是用户提供的代码而不是整个 JVM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T18:34:02.640

我现在不了解 AccessController 的方式。但是您可能可以使用以下方案来控制情况。您将需要有多个类加载器：首先将按原样加载类。第二个（或理想情况下，根据不受信任的代码源的数量），它将类转换为补丁或提供其特殊补丁版本而不是普通类。最后是系统类加载器，它实际上会执行例程。

也不要忘记保护 Classloader.getSystemClassLoader。对于转换对象，您可以使用 java 反射 API 或 objectweb asm 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T20:51:57.360

[Java-Sandbox](http://blog.datenwerke.net/p/the-java-sandbox.html)正是为此而设计的工具。它可用于仅允许访问一组白名单类和受限方法的资源。它使用带有自定义类加载器和安全管理器的系统来实现这一点。不需要字节码操作或类似的技巧。

我没有使用过它，但它看起来设计得很好并且记录得很好。

来自其网站的示例代码：

```
class Untrusted extends SandboxedEnvironment<Object>() {
    @Override
    public Object execute() {
       /* untrusted code */
       return null;
    }
};

service.runSandboxed(Untrusted.class, context); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T18:42:19.017

如果这是您正在寻找的东西

```
@PreAuthorize("hasRole('ROLE_USER')")
public void create(Contact contact); 
```

您可能想看看 Spring Security, [Expression-Based Access Control](http://docs.spring.io/spring-security/site/docs/3.1.x/reference/el-access.html)

# iphone - iOS 6：使用文本数据更新 sqlite 表时出错

> ID：15885303
> 
> 赞同：0
> 
> 时间：2013-04-08T17:29:05.890
> 
> 标签：iphone, ios, sqlite

我正在尝试更新 sqlite 数据库中的表。更新整数时我没有遇到任何麻烦，但现在我插入（更新）了一个文本。

```
-(void)updateItemMemo:(NSString*)text itemID:(int)itemID
{
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:user_data];
sqlite3* database = NULL;
sqlite3_stmt *statement;
if (sqlite3_open([path UTF8String], &database) == SQLITE_OK)
{
    const char *sqlItems=sqlite3_mprintf("UPDATE itemStatus\
                                         SET memo=?\
                                         where refID=?",text,itemID);
    if(sqlite3_prepare_v2(database, sqlItems, -1, &statement, NULL) != SQLITE_OK)

        sqlite3_bind_text(statement, 1, [text UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_int(statement, 2, itemID);

    char* errmsg;
    sqlite3_exec(database, "sqlItems", NULL, NULL, &errmsg);
    sqlite3_free((char*)errmsg);

    if(SQLITE_DONE != sqlite3_step(statement))
        sqlite3_finalize(statement);
    sqlite3_free((char*)sqlItems);
    sqlite3_close(database);
}
else
{
    NSLog(@"%s: prepare failed: %s", __FUNCTION__, sqlite3_errmsg(database));
}

} 
```

查询是正确的：在 SQLiteStudio 中检查用文本和真实 ID 交换参数。有用。问题是该方法由于某种神秘的原因无法正常工作。它也不会返回任何错误。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:37:49.480

嗯，解决了。原因是“文本”这个词作为参数。只需将其更改为“memoContext”，它就像魅力一样。

# asp.net-mvc - 如何获取标准 html 表单上传的进度条？

> ID：15885309
> 
> 赞同：0
> 
> 时间：2013-04-08T17:29:32.670
> 
> 标签：asp.net-mvc, upload, youtube-api

我正在使用 YouTube 的 API 将视频从浏览器直接上传到他们的服务器。他们的[api 文档](https://developers.google.com/youtube/2.0/developers_guide_protocol_browser_based_uploading)使用标准的 html 表单来上传视频。这个过程有效，但我想为上传添加一个进度条。这是否可以通过旧的学校表单上传来实现，或者有没有办法异步地做同样的事情？我正在使用 asp.net mvc\api。谢谢！

```
<form action="URL?nexturl=http%3A%2F%2Fwww.example.com" method="post"
  enctype="multipart/form-data" onsubmit="return checkForFile();">
  <input id="file" type="file" name="file"/>
  <div id="errMsg" style="display:none;color:red">
    You need to specify a file.
  </div>
  <input type="hidden" name="token" value="TOKEN"/>
  <input type="submit" value="go" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:08:43.887

不，不可能通过标准上传显示进度条。提交表单后，从技术上讲，您已经退出了该页面。浏览器会一直保留它，直到它从服务器接收到要加载的新内容，这在上传完成并且表单完全发布之前不会发生。与此同时，你的页面基本上已经死了。

过去，人们使用 Flash 或 Java 控件来实现这一点，但所做的只是允许异步文件传输，因为仅使用普通的旧 HTML 和 JavaScript 是无法做到的。

使用 HTML5，现在可以上传 AJAX 文件。有关快速介绍，请参阅[http://www.sitepoint.com/html5-javascript-file-upload-progress-bar/](http://www.sitepoint.com/html5-javascript-file-upload-progress-bar/)。请注意，这仅在现代浏览器中受支持（即没有 IE6-9）。有使用 iframe 来模拟异步上传的备用方案。只是做一些谷歌搜索。

# listview - 使用 foreach 渲染创建自定义敲除绑定（用于 jquery 移动列表视图）

> ID：15885312
> 
> 赞同：0
> 
> 时间：2013-04-08T17:29:42.983
> 
> 标签：listview, knockout.js, custom-binding, jquery-mobile

使用 jquerymobile 和淘汰赛，我正在尝试创建一个自定义绑定，如下所示

```
<ul data-bind="listview: observablearray">
    <li data-bind="text: text"></li>
</ul> 
```

listview 绑定首先会像 foreach 绑定一样起作用，然后将 $(element).listview() 应用于它（或 $(element).listview('refresh') 在更新时）。

我尝试执行以下操作来天真地模仿 foreach 绑定：

```
ko.bindingHandlers.listview = {
  init: function (element, valueAccessor) {
    var listview = $(element);
    listview.listview();
  },
  update: function (element, valueAccessor) {
    var listview = $(element);
    setTimeout(function () {
      listview.html('');
      var items = valueAccessor().list;
      var link = valueAccessor().link;
      var text = valueAccessor().text;
      var icon = valueAccessor().icon;
      $.each(ko.utils.unwrapObservable(items) || [], function (i, item) {
        var li = $('<li></li>').css({
          height: '44px'
        })
        var a;
        if (link) {
          a = $('<a href="#"></a>').click(function () {
            link(item)
          });
          li.append(a);
        }
        if (icon) {
          (a || li).append($('<img />').attr('src', icon(item)).addClass('ui-li-icon'));
        }
        if (text) {
          (a || li).append($('<span></span>').text(item[text]));
        }
        listview.append(li);
      });
      listview.listview('refresh')
    }, 0);
  }
}; 
```

不幸的是，这不仅是一个不使用模板的糟糕实现，而且在 init 上也出现了错误：

> 未捕获的类型错误：无法读取未定义的属性“jQuery19101983379740267992”

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:33:28.280

您可以从绑定中调用内部敲除绑定。

在您的情况下，这应该可以。

```
ko.bindingHandlers.listview = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var res = ko.bindingHandlers.foreach.init(element, valueAccessor()['listview']);
        $(element).listview();
        return res;
    },
    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var res = ko.bindingHandlers.foreach.update(element, valueAccessor()['listview'], allBindingsAccessor, viewModel, bindingContext);
        $(element).listview('refresh');
        return res;
    }
}; 
```

自己渲染模板是一个很大的挑战，最好使用内部的“模板”绑定。'foreach' 绑定也是如此。查看 knockoutjs 代码以了解它是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:33:48.563

对我来说，使用动态 jQueryMobile 列表视图的最快和优雅的方式是订阅模型更改，如下所示：

```
viewModel.products.subscribe(function() {
    jQuery("#productsList").listview("refresh");  
}); 
```

# c# - InvokeMember 对象[] 参数

> ID：15885314
> 
> 赞同：4
> 
> 时间：2013-04-08T17:29:54.413
> 
> 标签：c#, object

### 问题

这可能是一个非常简单的问题，但它让我困扰了一段时间：InvokeMember 可以接受一个 object[] 表示传递给方法所需的参数。我有两个对象（obj 列表，字符串 foo）。我可以成功地将任一变量传递给该方法，但是当我尝试同时传递这两个变量时，我得到一个 Method 'x' NotFound 异常。

### 细节

调用方法：

```
classtype.InvokeMember(someMethodName, 
            BindingFlags.Public | BindingFlags.InvokeMethod|BindingFlags.Static,
            null,
            null,
            new object[]{ someListOfObjects, stringValue}); 
```

领取方式：

```
public static string TestMethod(object foo)
{
    return "foo";
} 
```

注意：当通过`new object[]{someListOfObjects}`或`new object[]{stringValue}`我按预期到达目标方法时，但是当我尝试并通过两者时，它无法找到该方法。我在 TestMethod 上的传入参数是否正确？

当我更改 TestMethod 以接受对象 [] 时，永远找不到该方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T17:31:55.590

您正在传入一个包含两个元素的数组，因此它将其视为参数数组，寻找具有两个参数的方法。您希望得到一个长度为 1 的数组，其唯一元素是一个对象，该对象也恰好是一个数组（长度为 2）。

选项：

*   将其转换`object`为编译器参数数组以构建包装数组

    ```
    (object) new object[] { someListOfObjects, stringValue } 
    ```

*   自己直接创建数组：

    ```
    new object[] { new object[] { someListOfObjects, stringValue } } 
    ```

*   修改`TestMethod`参数以匹配数组：

    ```
    public static string TestMethod(List<object> foo, string bar) 
    ```

# ruby-on-rails - Rails has_many :through PG::Error: ERROR: column reference "id" is ambiguous error

> ID：15885335
> 
> 赞同：8
> 
> 时间：2013-04-08T17:31:09.147
> 
> 标签：ruby-on-rails, postgresql, has-many-through

我是 Rails 的新手，我一直在尝试获得两个 has_many :though 关系来解决（而不是使用 has_and_belongs_to_many，正如这篇文章所解释的那样[http://blog.flatironschool.com/post/35346328762/why-you -dont-need-has-and-belongs-to-many](http://blog.flatironschool.com/post/35346328762/why-you-dont-need-has-and-belongs-to-many)）但现在遇到 Postgres 错误：

```
PG::Error: ERROR:  column reference "id" is ambiguous
LINE 1: ...on_id" IS NULL AND "components"."id" = 1 ORDER BY id ASC LIM...
                                                             ^
: SELECT  1 AS one FROM "components" INNER JOIN "collection_components" ON "components"."id" = "collection_components"."component_id" WHERE "collection_components"."collection_id" IS NULL AND "components"."id" = 1 ORDER BY id ASC LIMIT 1
  Rendered collections/_form.html.haml (117.0ms)
  Rendered collections/new.html.haml within layouts/application (143.5ms)
Completed 500 Internal Server Error in 164ms

ActiveRecord::StatementInvalid - PG::Error: ERROR:  column reference "id" is ambiguous
LINE 1: ...on_id" IS NULL AND "components"."id" = 1 ORDER BY id ASC LIM...
                                                             ^ 
```

**_form.html.haml**

```
= form_for @collection do |f|
  - if @collection.errors.any?
    #error_explanation
      %h1= "#{pluralize(@collection.errors.count, "error")} prohibited this collection from being saved:"
      %ul
        - @collection.errors.full_messages.each do |msg|
          %li= msg

  .field
    - Component.all.each do |component|
      = label_tag :component_ids, component.id
      = check_box_tag :component_ids, component.id, @collection.components.include?(component), :name => 'collection[component_ids][]'
  .field
    = f.label :title
    = f.text_field :title
  .actions
    = f.submit 'Save' 
```

**集合组件.rb**

```
class CollectionComponent < ActiveRecord::Base
  attr_accessible :collection_id, 
                  :component_id

  belongs_to      :collection
  belongs_to      :component
end 
```

**集合.rb**

```
class Collection < ActiveRecord::Base
  default_scope order('id ASC')

  attr_accessible         :style_id, 
                          :name, 
                          :title,
                          :component

  #has_and_belongs_to_many :components

  has_many                :collection_components, :dependent => :destroy
  has_many                :components, :through => :collection_components

  belongs_to              :style

  validates_presence_of   :style
  validates_presence_of   :title

  before_save             :create_name

  private

  def create_name
    self.name = title.parameterize
  end
end 
```

**组件.rb**

```
class Component < ActiveRecord::Base
  default_scope order('id ASC')

  attr_accessible         :category_id, 
                          :name, 
                          :title,
                          :collection,
                          :style

  has_many                :collection_components, :dependent => :destroy
  has_many                :collections,   :through => :collection_components

  has_many                :component_styles
  has_many                :styles,        :through => :component_styles

  belongs_to              :category

  validates_presence_of   :category
  validates_presence_of   :title

  before_save             :create_name

  private

  def create_name
    self.name = title.parameterize
  end
end 
```

**集合组件表**

```
Column     |            Type             |                             Modifiers                              
---------------+-----------------------------+--------------------------------------------------------------------
 id            | integer                     | not null default nextval('collection_components_id_seq'::regclass)
 collection_id | integer                     | 
 component_id  | integer                     | 
 created_at    | timestamp without time zone | not null
 updated_at    | timestamp without time zone | not null
Indexes:
    "collection_components_pkey" PRIMARY KEY, btree (id) 
```

**集合表**

```
Column   |            Type             |                        Modifiers                         
------------+-----------------------------+----------------------------------------------------------
 id         | integer                     | not null default nextval('collections_id_seq'::regclass)
 style_id   | integer                     | 
 name       | character varying(255)      | 
 title      | character varying(255)      | 
 created_at | timestamp without time zone | not null
 updated_at | timestamp without time zone | not null
Indexes:
    "collections_pkey" PRIMARY KEY, btree (id) 
```

**组件表**

```
 Column    |            Type             |                        Modifiers                        
-------------+-----------------------------+---------------------------------------------------------
 id          | integer                     | not null default nextval('components_id_seq'::regclass)
 name        | character varying(255)      | 
 title       | character varying(255)      | 
 category_id | integer                     | 
 created_at  | timestamp without time zone | not null
 updated_at  | timestamp without time zone | not null
Indexes:
    "components_pkey" PRIMARY KEY, btree (id) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T17:34:41.957

试试这个：

```
 default_scope { order('collections.id ASC') } //collection.rb
  default_scope { order('components.id ASC') } //component.rb 
```

当您执行`join`升序时`id`成为`ambiguous`列，因为两者`components`都有`collections`列`id`。它不知道使用哪个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-13T17:53:54.210

您只需要在查询中在字段之前添加表的名称。

> sql-method("name-of-table.field operator")

样本：`order("collections.id ASC")`

发生这种情况是因为存在许多以相同名称调用的字段，并且解释器无法识别组装查询中的人。

# batch-file - 使用批处理文件 SHIFT 命令

> ID：15885338
> 
> 赞同：14
> 
> 时间：2013-04-08T17:31:19.947
> 
> 标签：batch-file, cmd

我试图在屏幕上最多显示 9 个参数，然后在接下来的每一行中少显示一个，直到一个都没有。

我试过这个：

```
@echo off
echo %*
shift
echo %*
shift
echo %* 
```

实际结果：

```
 a b c d e f
   a b c d e f 
```

预期结果：

```
A B C D E F
B C D E F
C D E F
D E F
E F
F 
```

有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T17:47:47.117

`SHIFT`如果您想获得 , 等的值`%1`，这是值得的`%2`。它不影响`%*`. 此脚本为您提供您期望的输出。

```
@echo off
setlocal enabledelayedexpansion

set args=0
for %%I in (%*) do set /a "args+=1"
for /l %%I in (1,1,%args%) do (
    set /a idx=0
    for %%a in (%*) do (
        set /a "idx+=1"
        if !idx! geq %%I set /p "=%%a "<NUL
    )
    echo;
) 
```

输出：

```
C:\Users\me\Desktop>test a b c d e f
a b c d e f
b c d e f
c d e f
d e f
e f
f 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-08T17:38:41.797

Shift 不会改变实际顺序，只会改变参数的索引/指针。

试试这个：

```
@echo off
echo %1
shift 
echo %1
shift
echo %1
echo %* 
```

你得到这个：

```
a
b
c
a b c d 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T17:38:20.433

“移位对 %* 批处理参数没有影响”

来源：[http ://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true)

我建议将您的代码更改为循环或其他内容

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-08T17:41:21.010

`%*`总是从命令行打印所有参数（除了）`%0`。它不支持 SHIFT 命令。

您需要按位置明确回显所有参数：`%1 %2 %3...`

```
@echo off
:loop
if "%~1" neq "" (
  echo %1 %2 %3 %4 %5 %6 %7 %8 %9
  shift
  goto :loop
) 
```

# javascript - 在 Javascript 中获取文本框元素

> ID：15885348
> 
> 赞同：1
> 
> 时间：2013-04-08T17:32:04.710
> 
> 标签：javascript, dom, textbox

我需要遍历页面上的所有文本框并收集它们的 ID，以便我可以在 IE7 中获得向后兼容的占位符文本。

这是我的代码：

```
var boxes = document.getElementsByTagName('input');
for(i = 0; i < boxes.length; i++) {
placeHolder(boxes[i].id);
} 
```

这完美地工作，但它也选择了我不想要的提交按钮。

我的文本框唯一的共同点是`type="text"`. 那么有没有办法只获取 Javascript 中文本类型的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:33:35.013

```
var boxes = document.getElementsByTagName('input');
for(i = 0; i < boxes.length; i++) {
    if(boxes[i].type == "text") placeHolder(boxes[i].id);
} 
```

# jakarta-ee - 使用 liferay 为用户创建扩展字段以进行未来身份验证

> ID：15885351
> 
> 赞同：1
> 
> 时间：2013-04-08T17:32:08.737
> 
> 标签：jakarta-ee, liferay, portlet, portal

我想开发一个应用程序，允许添加多个配置文件，其中包含与配置文件相关的特定信息，例如老师和他教的科目。`portlets`我喜欢老师在认证后有权访问一些。

主要问题在数据库中，我应该为教师创建一个单独的表，其中包含与 liferay 的用户表相关的外键还是什么？

预先感谢您的帮助。

# c# - 如何在 T4 模板中使用 resx 资源文件

> ID：15885354
> 
> 赞同：4
> 
> 时间：2013-04-08T17:32:27.093
> 
> 标签：c#, t4, resx

我不知道如何在 (.tt) T4 模板中包含资源文件 (.resx)。

到目前为止我尝试过......导入命名空间

```
<#@ import namespace="T4TemplateResources.resx" #> 
```

还包括类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-06T09:03:36.760

Nico 的解决方案需要您的解决方案来构建。

还有另一种方法，无需通过读取原始 resx 文件来编译您的解决方案。

```
 var fileName = "CustomResource.resx";
    var filePath = Path.Combine(Path.GetDirectoryName(this.Host.ResolvePath("")), "WindowsFormsApplication1", fileName);
    var reader = new ResXResourceReader(filePath);
    var values = reader.Cast<DictionaryEntry>().ToDictionary(x => x.Key, y => y.Value);

    // this is how you would acces the resources
    var value = values["entry"]; 
```

您应该知道，如果资源不存在并且您没有获得本地化的值，因为您只是在读取文件，因此此方法缺少设计时检查。对于 T4 模板，两者通常都不是强制性的

这是一个从资源文件创建枚举的工作片段。

只要确保你使用设置正确的值`fileName`和`filePath`

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ output extension=".cs" #>
<#@ assembly name="System.Windows.Forms" #>

<#@ import namespace="System.Resources" #>
<#@ import namespace="System.Collections" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.ComponentModel.Design" #>

<#

    var nameSpace = "WindowsFormsApplication1";
    var enumName = "CustomEnum";

    var fileName = "CustomResource.resx";
    var filePath = Path.Combine(Path.GetDirectoryName(this.Host.ResolvePath("")), "WindowsFormsApplication10", fileName);

    using (var reader = new ResXResourceReader(filePath))
    {

        reader.UseResXDataNodes = true;
#>

namespace <#=nameSpace#>
{

    public enum <#=enumName#>
    {

        Undefined,

        <#  foreach(DictionaryEntry entry in reader) { 

            var name = entry.Key;
            var node = (ResXDataNode)entry.Value;
            var value = node.GetValue((ITypeResolutionService) null);
            var comment = node.Comment;
            var summary = value;
            if (!String.IsNullOrEmpty(comment)) summary += " - " + comment;
        #>

        /// <summary>
        /// <#= summary #>
        /// </summary>
        <#= name #>,

        <# } #>

    }

}

<#
    }
#> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-24T00:26:45.323

用于从资源 (.resx) 中读取并使用资源的 JSON 结果创建 JS 文件的示例 T4 模板代码：

```
<#@ template debug="true" hostspecific="true" language="C#" #>
<#@ assembly name="System.Core" #>
<#@ assembly name="$(TargetPath)" #>
<#@ assembly name="System.Windows.Forms" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Resources" #>
<#@ import namespace="System.Collections" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ output extension=".js" #>
<# 
    var path = Path.GetDirectoryName(Host.TemplateFile);
    var resourceNames = new string[1]
    {
        "Resources"
    };
#>
var $.Resources = {
<# foreach ( var name in resourceNames ) {
    var localeFile = Host.ResolvePath(path + "\\" + name + ".resx");
    ResXResourceSet jpResxSet = new ResXResourceSet(localeFile);
#>
<# foreach (DictionaryEntry item in jpResxSet) { #>
    '<#=item.Key.ToString()#>' : '<#= ("" + item.Value).Replace("\r\n", string.Empty).Replace("'", "\\'")#>',
<# } #>
<# } #>
}; 
```

感谢 Jochen van Wylick： [使用 T4 本地化基于 .resx 文件的 JavaScript 资源](http://jiffie.blogspot.com/2012/11/localized-javascript-resources-based-on.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T16:19:56.433

如果您使用的是 VS2010 SP1 及更高版本，则有一种更简单的方法可以在不编译项目的情况下执行此操作，方法是使用

```
<#@ assembly name="$(TargetPath)" #>
<#@ import namespace="Your.Namespace.Properties" #> 
```

照原样复制第一行，在第二行中使用资源文件所在的命名空间，并像在 c# 中一样正常访问资源字符串

```
Resources.ResourceManager.GetString("SomeKey"); 
```

或者

```
var key = Resources.SomeKey; 
```

我从[T4 模板中的 Use 类中学到了这一点](https://stackoverflow.com/questions/11078905/use-class-inside-a-t4-template)

希望它可以帮助某人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T06:20:26.033

如果您想从 T4 模板中访问 .resx-File 的资源，您可以这样做：

1.  在资源编辑器中，将资源的访问修饰符设置为“公共”。
2.  确保您的项目成功构建。t4 模板只能访问输出程序集——因此请检查它是否是最新的。
3.  引用 T4 模板中的输出程序集（您可以在此处使用 Visual Studio 宏）：`<#@ assembly name="$(TargetDir)\outputfile.ext" #>`
4.  导入 T4 模板中 ResourceFile 的命名空间`<#@ import namespace="MyNamespace" #>`

然后您可以像往常一样访问资源：

```
<# var theResource = Resource1.TheResource; #> 
```

# git - 自动保持共享的 git 子树同步

> ID：15885360
> 
> 赞同：3
> 
> 时间：2013-04-08T17:32:54.243
> 
> 标签：git, tfs, sync, githooks, subtree

在我们的服务器上，我们为不同的项目提供不同的 git 存储库，这些项目共享一些组件作为子**树**。对我来说，它们仍然是子**树**非常重要，因为我们在整个源代码库中进行积极的开发，重要的是人们拥有尽可能简单和方便的工作流程。这也意味着，理想情况下，一个简单`git pull`的通过 gui 工具是工作的方式。子树非常非常方便，因为它们隐藏了底层的复杂性，允许每个人只克隆 repo 并查看他们需要的所有内容并最终推送到团队 git 服务器。

（然后 git 服务器应该推送到组件 git repos 最终将在 TFS 中结束）

现在我的问题是，如何自动使组件保持最新？我的想法是在项目 repo 上实现一个挂钩，该挂钩将`git subtree pull`在接受任何推送之前执行（并可能抱怨客户端已过时），并`git subtree push`在推送到达后立即执行第二个挂钩。

你有更好的想法吗？欢迎每一个输入。

# android - Android 通知从未显示

> ID：15885364
> 
> 赞同：0
> 
> 时间：2013-04-08T17:33:18.720
> 
> 标签：android, notifications

我想从服务创建通知。这是我的代码：

```
 private void showNotification(String text) {
    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, new Intent(this, PocketSaverActivity.class), 0);
    Notification.Builder builder = new Notification.Builder(this).setContentTitle("the title").setContentText(text)
            .setContentIntent(contentIntent).setSmallIcon(R.drawable.ic_launcher).setAutoCancel(true);

    Notification notification = builder.getNotification();
    notificationManager.notify(R.drawable.ic_launcher, notification);
} 
```

但是这段代码给我一个警告`04-08 20:25:49.030: W/NotificationManager(1670): notify: id corrupted: sent 12345, got back 0` 并且没有显示。我不知道是什么问题。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:41:13.843

在这一行：

```
Notification.Builder builder = new Notification.Builder(this)
    .setContentTitle("the title")
    .setContentText(text)
    .setContentIntent(contentIntent)
    .setSmallIcon(R.drawable.ic_launcher)
    .setAutoCancel(true); 
```

您需要添加`.build()`到最后，如下所示：

```
Notification notification = new Notification.Builder(this)
    .setContentTitle("the title")
    .setContentText(text)
    .setContentIntent(contentIntent)
    .setSmallIcon(R.drawable.ic_launcher)
    .setAutoCancel(true)
    .build(); 
```

此外，`Notification notification = builder.getNotification();`没有必要，只需使用链接的、内置的通知。

[您可以在文档](http://developer.android.com/reference/android/app/Notification.Builder.html)中看到更通用的示例

# php - 可能的 Web 应用程序数据库性能问题

> ID：15885365
> 
> 赞同：0
> 
> 时间：2013-04-08T17:33:20.713
> 
> 标签：php, database, web-applications, database-performance

我正在为健身房的私人教练开发一款应用程序，以跟踪他们客户的锻炼情况。它的工作方式基本上分为两组。

有一些练习，非常简单，只有名称、描述、组数、次数和重量。然后是程序，这是培训师分配给客户的一组练习。

一旦培训师分配了一个程序，他就会选择一个开始和结束日期，这就是向客户显示的内容。假设培训师在 4/8 到 4/13 分配了一个包含练习 A、B 和 C 的计划。目标是让客户每天标记每个练习以跟踪他们做了什么。所以他们可能在 4 月 9 日只做练习 A 和 C，但在 4 月 10 日做所有 3 项。

我遇到的问题是，这意味着它必须为每个练习、每天、每个客户写一行，当培训师/客户的数量增加时，这可能会增加很多行。

我正在与之合作的开发人员担心这可能会导致性能问题，但长话短说，他们也很可能正在编造问题以收取更多的时间/小时。

他们问我是否有解决方案，所以我问了几个朋友，他们似乎认为这不会引起问题。

所以，是的，一个非常冗长的描述都是要问你是否认为这样的事情对于网络应用程序来说会是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:42:50.480

不，您可以轻松处理 100k 行。

数据库模式必须设计良好，所有表都正确索引。使用 InnoDB 作为存储引擎是一个不错的选择，因为外键支持可以为您节省维护表完整性的一些麻烦（即，删除客户端，然后可能会删除他的所有练习。）

在所有页面上实现分页以避免显示太多行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:46:58.533

好的。首先，我将这种类型的问题称为“很好”，如果您最终遇到问题（假设您正在为使用该服务收费），那么您已经赢了！

具有适当索引的现代关系数据库可以毫无问题地处理数百万行数据。我怀疑您的开发人员在欺骗您，或者不知道他们在做什么。此外，任何领域的任何专业人士都不应该向外行寻求解决方案。这是我要做的：
1) 要求他们列出他们计划使用的查询、表结构和任何索引。把这些贴在这里，有人会很容易地指出他们所做的任何明显的缺陷
2) 要求他们将测试行填充到您认为较高的数量的表中。让他们分析他们的查询。如果他们给您带来任何麻烦，请走开。

# linux-kernel - netlink_unicast 在守护程序模式下返回 errno -111（连接被拒绝）

> ID：15885367
> 
> 赞同：1
> 
> 时间：2013-04-08T17:33:24.150
> 
> 标签：linux-kernel, daemon, fork, netlink

我有一个使用 Netlink 的 Linux 内核模块，以便与在用户空间中运行的守护进程通信。

在开发阶段，我总是像正常进程一样运行守护进程可执行文件（不调用`fork()`），一切正常。

到目前为止，主要行为的开发已经完成，所以我正在实现一个`--daemon`调用该`fork()`方法的参数（也`setsid()`如链接[http://www.thegeekstuff.com/2012/02/c-daemon-process/](http://www.thegeekstuff.com/2012/02/c-daemon-process/)中所述） ) 就在继续正常进程之前。

下一步是守护进程在初始化 Netlink 套接字后调用 Linux 内核模块，这个是保存守护进程的 PID 以便推送消息。Linux 内核守护进程正确接收来自守护进程的消息，但无法使用`netlink_unicast()`返回 errno -111（连接被拒绝）发送消息。

我检查了 Linux 内核模块收到的 PID，它与被分叉后的守护进程相同，所以看起来是正确的。

你知道为什么我的守护进程在分叉时不再能够`recvmsg()`从我的 Linux 内核模块接收消息（使用该方法）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:18:11.170

@artless-noise 是对的，我忘记调用 umask(0);

# mysql - SQL - 具有自动递增主键且没有唯一 ID 的“ON DUPLICATE KEY”？

> ID：15885370
> 
> 赞同：0
> 
> 时间：2013-04-08T17:33:46.653
> 
> 标签：mysql, innodb

我的脚本需要更新`lastVisited`给定用户的字段，但是如果该行不存在，我显然必须插入整行。问题是，该`id`列是自动递增的，我无法知道下一个值是什么。其他列本身不是唯一的，但是作为对是唯一的，`studentId`并且`classId`当我运行脚本时我知道它们的两个值，那么如何在我的 SQL 语句中将它们配对？我很高兴知道，`ON DUPLICATE KEY`但这只有在我能以某种方式将两个已知列配对时才有效。想法？

# php - .htaccess 删除文件扩展名和路由

> ID：15885381
> 
> 赞同：1
> 
> 时间：2013-04-08T17:34:48.147
> 
> 标签：php, .htaccess, mod-rewrite

你好，

我正在进行一个项目，我正在使用 Mod_Rewrite 和 .htaccess 来更改一些 URL。我希望删除文件扩展名，但是一旦用户登录，他们会转到一个名为 portal 的文件夹，然后 /portal/index.php 运行所有页面。

这是我目前拥有的代码：

```
RewriteRule ^(.*)$ $1.php
RewriteRule ^portal/(.*)$ portal/index.php?page=$1 [L,QSA] 
```

这不起作用，但我觉得我接近我希望的最终结果。

页面的 URL 应如下所示：

```
site.com/home
site.com/otherpage 
```

等等。这些应发送至：

```
/home.php
/otherpage.php 
```

等等

但是一旦用户登录，URL：

```
site.com/portal/index.php?page=section/section2/so-on 
```

应重写为：

```
site.com/portal/section/section2/so-on 
```

就我所拥有的而言，第一条规则有效，但其余规则无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:43:45.890

始终保持 .htaccess 中从最具体到最通用的规则顺序。您完整的 .htaccess 应该是：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^portal/(.*)$ /portal/index.php?page=$1 [L,QSA,NC]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L] 
```

**解释：**

规则 1 很简单。`/portal/foo`它将不是物理文件的每个 URI 转发到`/portal/index.php?page=foo`. 最后一条规则的标志 L，QSA 用于附加现有查询字符串，NC 用于忽略大小写匹配。

规则 2 是转发一个 URI `/bar/`，`/bar.php`如果它不是一个真实的目录并且实际上有一个文件 calle `/bar.php`。Rexex`^(.*?)/?$`用于去除尾部斜线（注意`/bar/`转到`/bar.php`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:38:20.537

您需要重新排序规则，因为第一个规则将 /portal/section/section2/so-on 发送到 /portal/section/section2/so-on。

它需要是：

```
RewriteRule ^(.*)$ $1.php
RewriteRule ^portal/(.*)$ portal/index.php?page=$1 [L,QSA] 
```

# jenkins - 在 Jenkins 中定义上游/下游作业的选择性阻塞

> ID：15885387
> 
> 赞同：5
> 
> 时间：2013-04-08T17:35:27.007
> 
> 标签：jenkins

我有多个作业的设置，它们之间有自动触发。

所有作业都将“在*构建上游项目时阻止构建*”和“*在构建下游项目时阻止构建*”设置为 true。在需要额外的工作来上传其他工作的工件之前，它工作得很好。

这是一个漫长的过程，我不想阻止整个建筑管道。所以我把它作为工作分开。它由所有其他作业触发，并将工件推送到具有低带宽连接的远程服务器。

但是由于提到的设置，他们仍在等待。

有没有办法让他们不等待这个特定的工作？也许这种方法是错误的，不应该成为他们的下游工作？如果不是 - 如何监控其他作业执行并轻松收集结果？也许 ArtifactDeployer 有一些非阻塞替代方案，它只是设置任务并完成 - 我不需要收集上传作业的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T21:23:01.863

我自己找到了答案。就在我眼前……

我错过了参数化触发器插件的非常重要的部分：如果您将它用作构建步骤而不是构建后操作，它可以等待或不等待下游作业的结果。下游显示为上游作业的“（非阻塞）”子项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:41:17.380

看看[Jenkins Build Flow 插件](https://wiki.jenkins-ci.org/display/JENKINS/Build+Flow+Plugin)，它允许您使用简洁的 DSL 来编排复杂的工作流程——我发现这比查看多个作业的设置更容易理解。

# javascript - jQuery 在书签中准备就绪

> ID：15885389
> 
> 赞同：3
> 
> 时间：2013-04-08T17:35:35.087
> 
> 标签：javascript, jquery, bookmarklet

您好我正在尝试创建一个书签，它将打开一个网页，在该页面上找到一个下载链接，然后关闭该网页。除非有更好的方法，否则我会打开页面，调用就绪（我认为这是不工作的部分），然后搜索下载链接。导入jQuery的代码取自：[http ://coding.smashingmagazine.com/2010/05/23/make-your-own-bookmarklets-with-jquery/](http://coding.smashingmagazine.com/2010/05/23/make-your-own-bookmarklets-with-jquery/)

```
javascript:(function() {
var v = "1.3.2";

if (window.jQuery === undefined || window.jQuery.fn.jquery < v) {
    var done = false;
    var script = document.createElement("script");
    script.src = "http://ajax.googleapis.com/ajax/libs/jquery/" + v + "/jquery.min.js";
    script.onload = script.onreadystatechange = function(){
        if (!done && (!this.readyState || this.readyState == "loaded" || this.readyState == "complete")) {
            done = true;
            initMyBookmarklet();
        }
    };
    document.getElementsByTagName("head")[0].appendChild(script);
}
else {
    initMyBookmarklet();
}

function initMyBookmarklet() {
    var ytm = window.open('http://example.com');
    jQuery(document).ready(function() {
        var div = ytm.document.getElementById("dl_link");
        var links = ytm.document.getElementsByTagName('a');
        var dl = links[1];
        window.open(dl);});
    ytm.close();
}
})(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:35:09.897

```
function initMyBookmarklet() {
    var ytm = window.open('http://example.com');
    jQuery(document).ready(function() { 
```

最接近您可能想要的是：`jQuery(ytm.document).ready(function() {`

但是，这可能也行不通，因为您甚至无法确定该行执行时文档是否存在。如何解决这个问题就像一个全新的问题。

第二、第三和第四个答案在这里是相关的：[jQuery/JavaScript: access contents of an iframe](https://stackoverflow.com/questions/364952/jquery-javascript-accessing-contents-of-an-iframe)

```
 var div = ytm.document.getElementById("dl_link");
        var links = ytm.document.getElementsByTagName('a');
        var dl = links[1]; 
```

如果您使用的是 jquery，您不妨做这样的事情`div = $('#dl_link', ytm.document); dl = $('a', ytm.document)[1];`

```
 window.open(dl);}); 
```

应该是`window.open(dl.href)`

```
 ytm.close();
} 
```

**但是**，如果此小书签未在与您打算打开的窗口相同的域上运行，您将遇到更大的同源策略问题。在 Google 和 Stackoverflow 中搜索`same original policy bookmarklet`以了解更多信息。此外，第一个答案在这里是相关的：[jQuery/JavaScript：访问 iframe 的内容](https://stackoverflow.com/questions/364952/jquery-javascript-accessing-contents-of-an-iframe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:39:30.003

基于该代码，您正在使用的小书签代码`jquery`应该在一个名为`initMyBookmarklet`. 不是，所以执行代码时 jquery 尚未加载。

# vhdl - 8位移位器-VHDL

> ID：15885390
> 
> 赞同：-2
> 
> 时间：2013-04-08T17:35:46.260
> 
> 标签：vhdl, bit-shift

我正在尝试使用 xilinx 工具在 VHDL 中定义和模拟一个 8 位移位器，它可以向左或向右移动或旋转 0、1、2 或 3 位位置。我正在尝试在 digilent basys 2 板上实现这一点。

我刚刚开始学习 vhdl 编程。有人可以帮忙吗？谁能告诉我 vhdl 代码应该是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:58:29.883

移位和旋转功能可以在 numeric_std 包中找到。下面是一些示例代码作为起点：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.numeric_std.all;

entity EXAMPLE is
Port ( 
    clk : in  STD_LOGIC; -- master clock
    enable : in std_logic; -- when '1' --> rotate
    dir : in  STD_LOGIC; -- when '1': right, when '0': left
    nr : in  STD_LOGIC_VECTOR (1 downto 0); -- number of steps to rotate
    din : in  STD_LOGIC_VECTOR (7 downto 0); -- in vector
    dout : out  STD_LOGIC_VECTOR (7 downto 0)); -- out vector
end EXAMPLE;

architecture Behavioral of EXAMPLE is

begin

shifter: process(clk)
begin
   if rising_edge(clk) then
      if enable='1' then
         if dir='0' then -- right
            dout<=std_logic_vector(rotate_right(unsigned(din),to_integer(unsigned(nr))));
         else -- left
            dout<=std_logic_vector(rotate_left(unsigned(din), to_integer(unsigned(nr))));
         end if;
      end if;

    end if;
 end process shifter;
end Behavioral; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-06T12:33:22.293

```
Rotate Right = bitvector(0) & bitvector(7 downto 1);
<br>Rotate Left = bitvector(6 downto 0) & bitvector(7);
```

使用串联，因为其他功能不可合成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T16:40:28.927

使用[`ieee.numeric_std`库](http://standards.ieee.org/downloads/1076/1076.2-1996/numeric_std.vhdl)中为此目的而设计的函数。

使用（或转换）适当`signed`或`unsigned`向量类型的输入。

* * *

这是这些功能的“原型”，因此您可以看到您得到了什么。

```
 --============================================================================
  -- Shift and Rotate Functions
  --============================================================================

  -- Id: S.1
  function SHIFT_LEFT (ARG: UNSIGNED; COUNT: NATURAL) return UNSIGNED;
  -- Result subtype: UNSIGNED(ARG'LENGTH-1 downto 0)
  -- Result: Performs a shift-left on an UNSIGNED vector COUNT times.
  --         The vacated positions are filled with '0'.
  --         The COUNT leftmost elements are lost.

  -- Id: S.2
  function SHIFT_RIGHT (ARG: UNSIGNED; COUNT: NATURAL) return UNSIGNED;
  -- Result subtype: UNSIGNED(ARG'LENGTH-1 downto 0)
  -- Result: Performs a shift-right on an UNSIGNED vector COUNT times.
  --         The vacated positions are filled with '0'.
  --         The COUNT rightmost elements are lost.

  -- Id: S.3
  function SHIFT_LEFT (ARG: SIGNED; COUNT: NATURAL) return SIGNED;
  -- Result subtype: SIGNED(ARG'LENGTH-1 downto 0)
  -- Result: Performs a shift-left on a SIGNED vector COUNT times.
  --         The vacated positions are filled with '0'.
  --         The COUNT leftmost elements are lost.

  -- Id: S.4
  function SHIFT_RIGHT (ARG: SIGNED; COUNT: NATURAL) return SIGNED;
  -- Result subtype: SIGNED(ARG'LENGTH-1 downto 0)
  -- Result: Performs a shift-right on a SIGNED vector COUNT times.
  --         The vacated positions are filled with the leftmost
  --         element, ARG'LEFT. The COUNT rightmost elements are lost.

  --============================================================================

  -- Id: S.5
  function ROTATE_LEFT (ARG: UNSIGNED; COUNT: NATURAL) return UNSIGNED;
  -- Result subtype: UNSIGNED(ARG'LENGTH-1 downto 0)
  -- Result: Performs a rotate-left of an UNSIGNED vector COUNT times.

  -- Id: S.6
  function ROTATE_RIGHT (ARG: UNSIGNED; COUNT: NATURAL) return UNSIGNED;
  -- Result subtype: UNSIGNED(ARG'LENGTH-1 downto 0)
  -- Result: Performs a rotate-right of an UNSIGNED vector COUNT times.

  -- Id: S.7
  function ROTATE_LEFT (ARG: SIGNED; COUNT: NATURAL) return SIGNED;
  -- Result subtype: SIGNED(ARG'LENGTH-1 downto 0)
  -- Result: Performs a logical rotate-left of a SIGNED
  --         vector COUNT times.

  -- Id: S.8
  function ROTATE_RIGHT (ARG: SIGNED; COUNT: NATURAL) return SIGNED;
  -- Result subtype: SIGNED(ARG'LENGTH-1 downto 0)
  -- Result: Performs a logical rotate-right of a SIGNED
  --         vector COUNT times. 
```

# iphone - 旋转后重新定位 UIWindow

> ID：15885391
> 
> 赞同：2
> 
> 时间：2013-04-08T17:35:49.613
> 
> 标签：iphone, ios, cocoa-touch, cgaffinetransform, uiwindow

最近我做了一个自定义警报，它是`UIWindow`. 我正在尝试`UIViewController`在横向时旋转警报。我能够成功旋转它，但是我无法重新定位它，使其原点位于屏幕的左上角。我有以下代码：

```
 CGRect mainScreenBounds = [[UIScreen mainScreen] bounds];
    UIDeviceOrientation deviceOrientation = [[UIApplication sharedApplication] statusBarOrientation];
    if (deviceOrientation == UIDeviceOrientationPortrait)
    {
        self.frame = CGRectMake(0,0, mainScreenBounds.size.width, mainScreenBounds.size.height);
    }
    else
    {
        self.frame = CGRectMake(0,0, mainScreenBounds.size.height, mainScreenBounds.size.width);

        if (deviceOrientation == UIDeviceOrientationLandscapeLeft)
        {
            self.transform = CGAffineTransformRotate(self.transform, M_PI / 2);
        }
        else
        {
            self.transform = CGAffineTransformRotate(self.transform, -M_PI / 2);
        }
        self.center = CGPointMake(self.bounds.size.width / 2, self.bounds.size.height / 2);
    } 
```

无论出于何种原因，设置`center`似乎都没有做任何事情。有没有人知道我在这里可能做错了什么？

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2013-04-08T18:53:33.570

一个应用程序中不应有多个 UIWindow。已经有一个了。重新实现，从 UIView 继承。

来自[UIWindow](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html)文档：“除非应用程序可以在外部设备屏幕上显示内容，否则应用程序只有一个窗口。”

# yaml - 访问多层 YAML 和中间人

> ID：15885392
> 
> 赞同：1
> 
> 时间：2013-04-08T17:35:56.510
> 
> 标签：yaml, middleman

看了这两个链接，YAML 和 Middleman 的使用就清楚多了： [Middleman Docs(Local Data)](http://middlemanapp.com/advanced/local-data/) , [parsing and compose YAML](https://stackoverflow.com/questions/14714616/parsing-and-composing-yaml)

我现在遇到的问题是访问多个级别的内容。

YAML（存在于数据/项目中）

```
- quote: This is a quote
  attribution: Kate Something
  extras:
      - extra one
      - extra two
      - extra three

- quote: Blah blah
  attribution: Donna Doe
  extras:
      - another extra
      - another extra 
```

.HTML.ERB

```
<% data.projects.each do |f| %>
    <div><%= f["quote"] %>  <%= f["attribution"] %> <%= f["extras"] %></div> 
<% end %> 
```

上面的内容与 Middleman 一起运行顺利，但是，我如何访问“extras:”下的数据并将它们吐出一个列表？

换句话说，这是在 build 中编译的：

```
<div>This is a quote  Kate Something extra oneextra twoextra three</div> 
```

这是需要达到的结果：

```
<div>This is a quote  Kate Something 
  <ul>
    <li>extra one</li>
    <li>extra two</li>
    <li>extra three</li>
  </ul>
</div> 
```

提前感谢您查看此问题。如果您需要对上述任何内容进行澄清，请告诉我，我将尝试进一步解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T04:59:22.700

`f["extras"]`只是另一个数组，因此您可以像迭代一样对其进行迭代`data.projects`：

```
<% data.projects.each do |f| %>
    <div><%= f["quote"] %>  <%= f["attribution"] %>
      <ul>
        <% f["extras"].each do |extra| %> <%# inner loop here %>
          <li><%= extra %></li>
        <% end %>
      </ul>
    </div> 
<% end %> 
```

# c# - 从 ASP.NET 中的对象生成表单

> ID：15885393
> 
> 赞同：0
> 
> 时间：2013-04-08T17:36:01.883
> 
> 标签：c#, asp.net

是否有任何可用于 ASP.NET 的工具可让您从对象生成表单。

```
CoolLibrary.GenerateFormFromObject(myObject); 
```

我可以想象使用反射绑定到各种控件，并使用字段的类型来确定要生成什么类型​​的控件（即是否`List`生成`DropdownList`控件）。

有没有人建造过这样的东西？（我是否误以为这不太难做到？）。我在网上看到使用反射绑定到表单的人的参考资料，但我还没有发现任何人使用反射生成表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:44:58.350

在 ASP.net 4.0 中有一个名为 EnableDynamicData 的方法 - 它可能是您正在寻找的：

[http://blog.hmobius.com/post/2010/04/07/ASPNET-40-Part-15-Data-Enhancements.aspx](http://blog.hmobius.com/post/2010/04/07/ASPNET-40-Part-15-Data-Enhancements.aspx)

另一个例子： [http ://weblogs.asp.net/davidfowler/archive/2009/05/06/dynamic-data-preview-4.aspx](http://weblogs.asp.net/davidfowler/archive/2009/05/06/dynamic-data-preview-4.aspx)

很好的演示视频：http: [//vimeo.com/12737016](http://vimeo.com/12737016)

# django - 如何使用 Django 重命名对象

> ID：15885394
> 
> 赞同：-1
> 
> 时间：2013-04-08T17:36:03.740
> 
> 标签：django

我有一个关于在我的 web 界面上重命名对象的答案。例如，我有一个名为“Map”的表，其中有很多对象（Map 对象、Map 对象、Map 对象、Map 对象、Map 对象、Map 对象）可以重命名它们吗？我的意思是我想为每个对象提供类似（亚洲地图、欧洲地图、美洲地图、非洲地图等）的东西，以便给他一个不同的名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:52:25.010

**unicode**可以帮助你。

```
class Map(models.Model):
    name = models.CharField(max_lenght=20)
    ....

    def __unicode__(self):
        return 'Map %s' % self.name 
```

# ios - UIPasteboard 未清理

> ID：15885395
> 
> 赞同：1
> 
> 时间：2013-04-08T17:36:13.193
> 
> 标签：ios, uipasteboard

我有两个应用程序使用各种 UIPasteboard 名称作为相互共享数据的方案。

粘贴板使用反向 DNS 命名约定，如下所示：`com.mycompany.myapp.stuffx, com.mycompany.myapp.stuffy`

所有使用这些粘贴板的应用程序都属于`com.mycompany`命名空间。

当我卸载应用程序 A 时，存储在粘贴板中的数据如预期的那样继续存在。在我卸载应用程序 B 后，有效地删除了所有使用粘贴板的应用程序，我希望清理任何关联的数据/粘贴板，因为持久属性的文档表明这一点。但是，这不会发生；重新安装应用程序后，它仍然能够访问旧的粘贴板数据。

粘贴板由首先需要它的任何应用程序创建，并将其`persistent`属性设置为 true。如果不再使用旧的粘贴板数据，是否可以确保清理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:17:59.077

听起来你应该在这个问题上向 Apple 提出一个错误。

[http://bugreport.apple.com](http://bugreport.apple.com)

正如您所说，文档指出，当创建它的应用程序被卸载时，应该删除粘贴板，而这不会发生在您身上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:33:32.573

我认为这是预期的行为

“有效地删除所有使用粘贴板的应用程序” - 系统应该如何知道这一点？

我建议在安装后首次启动时执行一些特殊操作，您可以测试您是否是您的特殊应用程序组中要安装的第一个应用程序并清除粘贴板

# sql-server - SQL Server 批量插入/更新：检查源中是否存在重复记录

> ID：15885398
> 
> 赞同：0
> 
> 时间：2013-04-08T17:36:20.540
> 
> 标签：sql-server, triggers, bulkinsert, sql-merge

我有以下表格加入 idProduct = id （一对一）：

产品

*   idProduct
*   描述

产品密钥

*   ID
*   产品密钥

我需要在 Products 表上为单个和批量插入和更新创建触发器，该触发器根据产品描述更新产品的 ProductKeys 中的键。

如果产品有密钥，则将密钥更新为描述，否则插入新密钥。

**每个产品的产品密钥必须是唯一的。**

因此，如果其他产品的密钥已存在，请将 idProduct 附加到描述以创建密钥。

我的问题：

我有用于插入和更新的触发器，除了**插入或更新具有相同描述的 2 种不同产品的情况**。在这种情况下，为两种产品生成的密钥是相同的。

有任何想法吗？

这是我使用 MERGE 语句的触发器：

```
CREATE TRIGGER [dbo].[UpdateKey]
ON  [dbo].[Products] 
AFTER  INSERT, UPDATE
AS 
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

        MERGE ProductKeys [Target]
        USING 
            (
                SELECT
                    CASE 
                        WHEN pk.id IS NULL 
                            THEN i.description
                        ELSE  
                            i.description + '_' + CAST(i.idProduct AS VARCHAR)
                        END [NewProductKey]
                    , i.idProduct
                FROM
                    INSERTED i
                    LEFT OUTER JOIN ProductKeys pk ON pk.id <> i.idProduct AND pk.ProductKey = i.description
                ) [source]
        ON (target.id = source.idproduct)
        WHEN NOT MATCHED THEN 
            INSERT
                ( 
                    id
                    , ProductKey
                )
            VALUES
                (
                        source.idProduct
                        , source.NewProductKey
                )
        WHEN MATCHED THEN
            UPDATE SET
                ProductKey = source.NewProductKey; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:16:46.227

我在 INSERTED 上添加了一个 LEFT JOIN 以检查源中是否存在重复项。我的源查询现在看起来像：

```
SELECT
    CASE 
        WHEN pk.id IS NULL AND i2.idProduct IS NULL
            THEN i.description
        ELSE  
            i.description + '_' + CAST(i.idProduct AS VARCHAR)
        END [NewProductKey]
    , i.idProduct
FROM
    INSERTED i
    LEFT OUTER JOIN ProductKeys pk ON pk.id <> i.idProduct AND pk.ProductKey = i.description
    LEFT OUTER JOIN INSERTED i2 ON  i2.description = i.description AND i.idProduct <> i2.idProduct 
```

这对我来说没问题 - 当源中有 2 个具有相同描述的产品时，两者都将其 id 附加到密钥中。

但是，如果有一种方法可以让第一个产品的密钥没有 id - 只是描述 - 其余的都带有 id，那将是理想的。

# c++ - 指针作为非类型模板参数

> ID：15885399
> 
> 赞同：23
> 
> 时间：2013-04-08T17:36:21.630
> 
> 标签：c++, templates

在回答[这个 SO question](https://stackoverflow.com/q/15867399/420683)`& id-expression`时，我在标准（已经是 C++03，仍在 C++11 中）中发现，如果地址的格式为（加上一些例外），则只能将地址用作非类型模板参数。

但我无法回答*为什么*会这样。

> 14.3.2 模板非类型参数 [temp.arg.nontype]
> 
> 非类型、非模板模板参数的模板参数应为以下之一：
> 
> [...]
> 
> — 一个常量表达式 (5.19)，它指定具有静态存储 > 持续时间和外部或内部链接的对象**或具有外部或内部链接的**函数的地址，包括函数模板和函数模板 ID，但不包括非静态类成员，**表示（忽略括号）为 & id-expression**，但如果名称引用函数或数组，则 & 可以省略，如果相应的模板参数是引用，则应省略；[...]

（n3485，强调我的）

例子：

```
using TFoobar = int (*)();
template < TFoobar tp > struct foo_struct{};

int foobar() { return 42; }
constexpr TFoobar pFoobar = &foobar;

foo_struct < &foobar > o0; // fine
foo_struct < pFoobar > o1; // ill-formed 
```

我想这与翻译阶段有关，即编译器对地址了解不多。然而，为什么不允许呢？编译器不应该使用类似于宏替换的东西来替换`pFoobar`吗`&foobar`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:30:19.737

考虑类`Foo<&X>`和`Foo<&Y>`，两者都具有静态成员`int Bar`。链接器必须能够判断您的程序是否有 1 个或 2 个`Bar`对象。`&X`现在考虑链接器也是最有可能负责为和赋值的一方`&Y`。

再看标准。正如它所写的，编译器不需要将实际**地址**传递给链接器。相反，它通过`id-expression`. 链接器已经非常有能力确定两个`id-expression`' 是否相同，甚至在为它们分配数字地址之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:30:54.987

1.  它不能是变量，因为变量仅在运行时设置。
2.  它不能是 a `constexpr`，因为在编译时无法知道地址的*值；*在大多数情况下，它只会在执行前重新定位后修复。
3.  理论上它可能是一个算术表达式（即使它在标准中是不允许的），但在数组元素地址的常见情况下，您可以简单地使用`&arr[i]`而不是`arr + i`.

# classpath - 我在哪里可以获得 sunrsasign.jar 的正式副本？

> ID：15885401
> 
> 赞同：3
> 
> 时间：2013-04-08T17:36:28.050
> 
> 标签：classpath, java

我正在尝试链接第三方库，该库正在寻找 /jdk**/jre/lib/sunrsasign.jar 并且找不到它。我在网上发现了许多线程，说他们从其他地方复制它并让它工作，但我能找到复制它的唯一地方是有问题的第三方团体。考虑到这是一个密码库，我无法想象使用他们的版本是个好主意。

我的问题是双重的。第一个是“为什么标准 Java 发行版中不存在这个文件？” 第二个是“我可以从哪里得到它？”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-15T16:33:46.390

显然它确实存在于标准 Java 发行版中，但不存在于当前发行版中。

sunrsasign.jar 是[此处](http://docs.oracle.com/javase/6/docs/technotes/guides/security/SunProviders.html)解释的 SunRsaSign 提供程序。它说：

> 本文档描述了作为 Sun 的 Java 环境的一部分提供的提供程序的技术细节。

和

> SunRsaSign 提供者
> 
> SunRsaSign 提供程序是在 JDK 1.3 中引入的，作为 SunJSSE 提供程序中 RSA 签名的增强替代品。

在我的 64 位 Oracle JDK 1.7.0_09 中， sunrsasign.jar 文件不存在，通过网络搜索我们可以看到[SunRsaSign*类*包含在 rt.jar](http://www.findjar.com/class/sun/security/rsa/SunRsaSign.html)中。使用[jarfinder](http://www.jarfinder.com/index.php/jars/search/%7Esunrsasign.jar%7E)我们可以看到对于 JDK 1.4.2，jar 确实作为一个单独的文件存在。从[谷歌缓存](http://www.google.fi/#hl=fi&sclient=psy-ab&q=When+we+moved+the+RSA+provider+JAR+file+(sunrsasign.jar)+from+the+extensions+directory+(jre%2Flib%2Fext)+to+the+bootstrap+directory+(jre%2Flib)%2C+its+classes+can+no+longer&fp=1&bav=on.2,or.r_qf.&cad=b)我们可以看到它曾经在`jre/lib/ext`/ `jre/lib`。

此外，[sunprovider 文档](http://docs.oracle.com/javase/6/docs/technotes/guides/security/SunProviders.html)说

> 在早期的 JDK 版本中，JDK 中没有可用的 RSA 签名提供程序，因此 SunJSSE 必须提供自己的 RSA 实现才能使用常用的基于 RSA 的证书。JDK 5 引入了 SunRsaSign 提供程序，它提供了 SunJSSE 提供程序的所有功能（以及更多功能）。以 JDK 5.0 及更高版本为目标的应用程序应改为请求 SunRsaSign 提供程序的实例。

我认为它曾经位于您提到的 sun 提供的单独 jar 中，并且从 JDK 5 开始，它已集成到 JDK 中，而不是作为单独的 jar。

# javascript - javascript方法中的图像没有改变

> ID：15885402
> 
> 赞同：0
> 
> 时间：2013-04-08T17:36:29.123
> 
> 标签：javascript, jquery, html

我正在尝试使用 jQuery 交换图像，但是当我运行页面时，似乎该`chase()`方法在动画仍在进行时完成了。这个想法是将图像替换为翻转版本，因此它们似乎来回追逐彼此。但是，图像始终面向左侧。该方法似乎一次完成，而不是显示每次迭代。

```
<audio controls autoplay="false" onplay="chase()">
  <source src="Links/sillyChase.mp3" type="audio/mpeg" />
</audio>
<div id="dexter">
    <img id="dex" src="Images/dexterRight.jpg" width="170" height="120"/>
</div>
<div id="deedee">
     <img id="dee" src="Images/deedeeRight.jpg" width="170" height="120"/>
</div>
</div>

<script>
function chase(){
    for(var k=0;k<10;k++){ 
        $("#dex").attr("src","Images/dexterRight.jpg"); 
        $("#dee").attr("src","Images/deedeeRight.jpg"); 

        //moves images right  
        $("#dexter").animate({"left": "+=500px"},"slow"); 
        $("#deedee").animate({"left": "+=500px"},"slow"); 

        $("#dex").attr("src","Images/dexterLeft.jpg");
        $("#dee").attr("src","Images/deedeeLeft.jpg");  

        //moves images left 
        $("#dexter").animate({"left": "-=500px"},"slow"); 
        $("#deedee").animate({"left": "-=500px"},"slow"); 
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:44:23.837

应该管用：

```
function chase(){
        for(var k=0;k<10;k++){ 
             $("#dexter,#deedee").promise().done(function() {
                   $("#dex").attr("src","Images/dexterRight.jpg"); 
                   $("#dee").attr("src","Images/deedeeRight.jpg");  
              });

              //moves images right  
              $("#dexter,#deedee").animate({"left": "+=500px"},"slow", function(){
                  $("#dex").attr("src","Images/dexterLeft.jpg");
                  $("#dee").attr("src","Images/deedeeLeft.jpg");
                  $("#dexter,#deedee").animate({"left": "-=500px"},"slow");
              });
        }

    } 
```

# c++ - 在运行时用另一个小部件替换一个小部件并显示新小部件

> ID：15885406
> 
> 赞同：0
> 
> 时间：2013-04-08T17:37:01.797
> 
> 标签：c++, qt

我创建了一个小部件列表，我将这些小部件的指针存储到 QList 中。然后，我在主小部件上有按钮，用户可以使用这些按钮在小部件列表中循环。

我使用此代码替换现有的小部件：

```
Shape* newShape = shapeList->moveNext();
newShape->draw();
mainLayout->addWidget(newShape, 1, 0);
update(); 
```

此代码位于连接到按钮的单击信号的 SLOT 中。这段代码：

```
shapeList->moveNext(); 
```

工作并返回现有的已添加到列表小部件。我只是没有看到ui上的变化？？？

是否需要任何特殊代码才能使这个新小部件替换现有小部件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:47:54.723

我建议您使用`QStackedLayout`. 您需要做的就是 - 将所有小部件添加到其中，然后只需更改当前小部件。

[帮助文章。](http://qt-project.org/doc/qt-4.8/qstackedlayout.html)

# objective-c - 几个带有自定义单元格的 UITableView。不工作滚动

> ID：15885409
> 
> 赞同：1
> 
> 时间：2013-04-08T17:37:11.970
> 
> 标签：objective-c, uitableview, custom-cell

我有两个带有自定义单元格的 UITableView，并且面临着奇怪的行为。

这些表会定期更新为新记录。我将 20 条记录添加到表#1，表#2 仍然为空。所有记录都不适合屏幕，因此表格会滚动显示。然后我将一条记录添加到表#2，表#1 停止滚动（您只能看到适合屏幕的前几条记录）。

在我重新加载表#1 的数据后，问题就消失了。

当单元格未自定义时，滚动没有问题。

```
#import "MyViewController.h"
#import "MyCell1.h"

@implementation MyViewController
@synthesize table1, table2;

- (void)viewDidLoad
{
    [super viewDidLoad];

    viewList = [NSMutableArray array];
    viewMemory = [NSMutableArray array];

    [table1 setDataSource:self];
    [table2 setDataSource:self];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSInteger num = 0;

    if ([tableView tag] == 1980) {
        num = [viewList count];
    }
    else if ([tableView tag] == 1981) {
        num = [viewMemory count];
    }

    return num;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyCell1 *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    NSString *someText;

    if (!cell) {
        cell = (MyCell1*)[[[NSBundle mainBundle] loadNibNamed:@"Cell1"owner:self options:nil] objectAtIndex:0];
    }

    if ([tableView tag] == 1980) {
        someText = [viewList objectAtIndex:indexPath.row];
    }
    else if ([tableView tag] == 1981) {
        someText = [viewMemory objectAtIndex:indexPath.row];
    }

    [[cell value] setText:someText];

    return cell;
}

- (IBAction)ButtonClick:(UIButton *)sender {
    if ([sender tag] == 1980) {
        [viewList addObject:@"0000"];
        [[self table1] reloadData];
    }
    else if ([sender tag] == 1981) {
        [viewMemory addObject:@"1111"];
        [[self table2] reloadData];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:09:57.227

在另一个站点，我被提议使用 beginUpdates - endUpdates 而不是 reloadData 来更新表格视图中的记录。所有作品。

# c# - 使用 AutoMapper 将 ListBoxFor 项目映射到 ICollection

> ID：15885414
> 
> 赞同：1
> 
> 时间：2013-04-08T17:37:28.773
> 
> 标签：c#, entity-framework, automapper

如何配置 AutoMapper 以将整数数组（从多选 MVC ListBoxFor 元素填充）映射到我的域对象的 ICollection 属性？基本上我想将域对象的 PatientTypes 和 ProviderTypes 属性设置为用户在列表框中选择的任何内容，然后将对象保存回数据库。

**域对象**

```
public class Document
{
    public int ID { get; set; }

    public virtual ICollection<PatientType> PatientTypes { get; set; }
    public virtual ICollection<ProviderType> ProviderTypes { get; set; }
} 
```

**查看模型**

```
public class DocumentEditModel
{
    public int ID { get; set; }

    [DisplayName("Patient Type")]
    public int[] SelectedPatientTypes { get; set; }
    public SelectList PatientTypeList { get; set; }

    [DisplayName("Provider Type")]
    public int[] SelectedProviderTypes { get; set; }
    public SelectList ProviderTypeList { get; set; }
} 
```

**控制器**

```
public virtual ActionResult Edit(int pid)
{
    var model = Mapper.Map<DocumentEditModel>(_documentRepository.Find(pid));
    model.ProviderTypeList = new SelectList(_providerTypeRepository.All.OrderBy(x => x.Value), "ID", "Value");
    model.PatientTypeList = new SelectList(_patientTypeRepository.All.OrderBy(x => x.Value), "ID", "Value");

    return View(model);
}

[HttpPost]
public virtual ActionResult Edit(DocumentEditModel model)
{
    if (ModelState.IsValid)
    {
        var document = Mapper.Map(model, _documentRepository.Find(model.ID));
        document.DateModified = DateTime.Now;

        _documentRepository.InsertOrUpdate(document);
        _documentRepository.Save();

        return null;
    }

    model.ProviderTypeList = new SelectList(_providerTypeRepository.All.OrderBy(x => x.Value), "ID", "Value");
    model.PatientTypeList = new SelectList(_patientTypeRepository.All.OrderBy(x => x.Value), "ID", "Value");

    return View(model);
} 
```

**自动映射器配置**

```
Mapper.CreateMap<Document, DocumentEditModel>();
Mapper.CreateMap<DocumentEditModel, Document>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:54:22.427

由于关联是多对多的，您只需在数据库中创建联结记录。一种方便的方法是清除集合并向其中添加项目。我们`Document.PatientTypes`举个例子：

```
var document = Mapper.Map(model, _documentRepository.Find(model.ID));
document.DateModified = DateTime.Now;

// Set the new associatins with PatientTypes
document.PatientTypes.Clear();
foreach(var pt in model.PatientTypeList.Select(id => new PatientType{Id = id}))
{
    document.PatientTypes.Add(pt);
}

_documentRepository.InsertOrUpdate(document);
_documentRepository.Save(); 
```

（我不得不对属性名称做出一些假设）

这里发生的是`DocumentPatientTypes`联结表中的现有记录被一组新记录替换。这是通过使用所谓的[*存根实体*](http://blogs.msdn.com/b/alexj/archive/2009/06/19/tip-26-how-to-avoid-database-queries-using-stub-entities.aspx)s 来完成的`new PatientType`。您不必先从数据库中获取真实数据，因为 EF 唯一需要的是 Id 值来创建新的联结记录。

如您所见，我默默地将 Automapper 排除在外。将整数列表映射到`PatientType`. 这`Select`很容易，只要有一点经验，就可以立即识别出存根实体模式，否则它会被`Mapper.Map`语句隐藏。

# accelerometer - I2C 采样率

> ID：15885418
> 
> 赞同：0
> 
> 时间：2013-04-08T17:37:53.230
> 
> 标签：accelerometer, microcontroller, pic, i2c, mplab

我在尝试使用 dsPIC33f 微控制器对 I2C 从设备进行采样时遇到问题。

我正在使用 PIC 内部 timer1 计时器以定义的采样率“滴答”并获取必要的数据。不幸的是，获得结果的速度不够快，我不知道为什么。我的从属设备之一是 ADXL345 加速度计，它的最大输出数据速率为 3600Hz。我几乎不需要这么高，但我似乎没有在 50Hz 以上的任何地方成功采样。

I2C 设置为 400KHz 的“快速模式”。我想要对加速度计进行采样的绝对最大值是 1KHz，虽然这有点矫枉过正，但我​​真的对 128Hz 更感兴趣。我设置的加速度计的参数是：

*   数据格式 (0x31) - 自检关闭、中断反转关闭、全分辨率开启、对齐位关闭、范围位 +/-16g。
*   数据速率 (0x2C) - 低功耗模式关闭（正常模式），输出数据速率模式 400Hz（我在数据表中读到 400KHz I2C 仅支持高达 800Hz，所以我在使用 400Hz 时比较安全）。
*   电源控制（0x2D）——自动睡眠关闭，测量模式开启，睡眠位关闭，睡眠模式采样率8Hz（虽然没有使用，所以可以忽略）。
*   中断 (0x2E) - 启用数据就绪中断，其他一切都关闭。

我正在使用 timer1 以指定的采样率进行采样，我知道采样率工作得很好，因为我有一个计数器，它会在计数器达到一分钟后输出一条消息；我用秒表来确保它是正确的。例如，在 100Hz 采样率下，我等待计数器计数到 6,000 (100 * 60) 并显示一条消息，如果秒表在 1 分钟时看到该消息，我知道它至少在一定程度上进行了采样。

当我尝试仅从加速度计采样（I2C 多字节读取模式，一次调用读取所有六个字节）时，它的执行速度不够快。使用我的秒表方法，它似乎需要大约一分 15 秒来完成一项应该需要一分钟的工作（以 100Hz 采样），即它处理 I2C 命令的速度不够快。更高的采样率会增加更多的延迟。

我感觉这与 I2C 时钟和 timer1 未同步有关，因此在我对加速度计数据的调用中存在不必要的等待。我无法想象 I2C 的 400KHz 时钟是不够的，但如果我错了，请纠正我。

我应该如何正确地从 I2C 从设备读取数据？我还有一个陀螺仪和磁力计，我想以足够高的采样率读取它们，磁力计的限制为 160Hz，所以正如我所说，128Hz 的采样率对于所有三个设备都很好。尝试同时读取所有三个设备显然会增加比预期慢的采样速度。

我还将同时从 4 个引脚（ADC 10 位）收集模拟数据。这段代码已经实现，我可以读取 1KHz 的模拟数据，采样率按预期工作，只是 I2C 设备运行缓慢！

我希望加速度计在尝试以 100Hz 采样时会很好，那时我可以以 3600Hz（I2C 的最大 800Hz）输出，但它真的很挣扎，我不知道还能尝试什么。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:45:01.647

好的，这可能是很多事情：

*   在您的情况下，最简单的解释是您用来触发轮询的计时器配置错误。我需要知道你是如何使用它的，它是否触发了一个中断，你设置了一个标志来触发加速度计轮询？您是否手动轮询计时器以触发加速度计轮询。无论如何，在发生这种情况时将输出引脚切换为高电平和低电平并用示波器查看它会给您提供有价值的信息。是否所有的投票周期都更长，或者只是其中一些花费的时间比预期的要长得多？

*   我经常看到的是一个缓慢的 I2C 处理例程。您的 I2C 可能设置为 400KHz，这确实是读取和写入字节位的速度，但是字节之间的处理时间在很大程度上取决于您的代码复杂性。在您的情况下，由于您使用的是多字节读取模式，因此这个时间实际上不是在字节之间，而是在轮询周期之间。但奇怪的是这会是你的问题，它不是那么频繁的轮询，也不是大数据读取。

*   在您的情况下，我会做的（拥有某种您似乎拥有的测量设备）是检查所有时间是否符合您的预期。不要假设任何事情，测量它并验证它是否在做你期望的事情。在这方面，我会从最简单的事情开始。时钟是否以 400kHz 运行？六个字节的读取是否在它们之间没有延迟？轮询之间是否存在预期的空闲间隙？I2C 总线是否在轮询之间卡住（SDA 和/或 SCL 长时间处于低电平）？除了带有加速度计的通信或活动之外，总线上是否有任何意外的通信或活动？这些是我要检查的一些事情，以了解可能出了什么问题。这里的黄金法则是**不要推测，测量它！**

*   如果上述一切都完美且符合预期，那么只需较长时间的轮询之间以稳定的方式进行。我会开始检查软件的时间以了解每个例程中的时间，我看到许多软件开发人员对一些看似简单的操作可能需要多少时间感到惊讶。为此，请使用第一个要点中描述的输出引脚位切换。使用几个 IO 端口，因此您在示波器的每个通道上都有两个标记，并更改代码上切换这些位的位置，只需使用它来检查代码的任何慢速部分。如果你想要另一个*黄金法则*，**分而治之**. 将标记设置在最高的抽象例程上，并在代码的慢速部分向下挖掘，直到找到问题所在。

试试这个，让我知道它是否有帮助。

干杯，祝你好运！

# php - jQuery，Sequence.js。插件无法启动，没有可见的错误

> ID：15885419
> 
> 赞同：1
> 
> 时间：2013-04-08T17:37:57.363
> 
> 标签：php, jquery

我能想到的唯一一件事是，我在页面末尾插入了 javascript，而不是在 head 标签中，但这以前从未成为问题。

以下 HTML：

```
<div id="sequence">
    <ul>
        <li class="animate-in">
            <div class="frame f1">
                <a href="/projects/3">
                    <img src="../../assets/projects/02.jpg"/>
                </a>
                    <div class="project_info">
                        <h1>Landscape Design & Build</h1>
                        <h2>Private Villa - Muharraq</h2>
                    </div>
            </div>
        </li>
        <li>
            <div class="frame f2">
                <a href="/projects/2">
                    <img src="../../assets/projects/03.jpg"/>
                </a>
                    <div class="project_info">
                        <h1>Landscape Design </h1>
                        <h2>Private Villa - Saar</h2>
                    </div>
            </div>
        </li>
        <li>
            <div class="frame f3">
                <a href="/projects/1">
                    <img src="../../assets/projects/01.jpg"/>
                </a>
                    <div class="project_info">
                        <h1>Landscape Design & Build</h1>
                        <h2>Private Villa - Riffa</h2>
                    </div>
            </div>
        </li>
    </ul>
</div> 
```

由以下 PHP 模板生成：

```
<div id="sequence">
    <ul>
        <?php
            $count = 1;
            foreach ($projects as $project) { ?>
                <li<?php if ($count == 1) { ?> class="animate-in"<?php } ?>>
                    <div class="frame f<?php echo $count; ?>">
                        <a href="/projects/<?php echo $project['id']; ?>">
                            <img src="../../assets/projects/<?php echo $project['image']; ?>" />
                        </a>
                        <div class="project_info">
                            <h1><?php echo $project['type']; ?></h1>
                            <h2><?php echo $project['name']; ?></h2>
                        </div>
                    </div>
                </li>
                <?php $count++;
            }
        ?>
    </ul>
</div> 
```

使用以下 CSS：

```
#sequence {
    /*visibility: hidden;*/
    position: relative; /* required */
    width: 830px;
    height: 320px;
    margin: 10px auto;
    overflow: hidden;
}

    #sequence > ul li > * {
        position: absolute; /* required */
    }

    #sequence > ul > li {
        position: absolute; /* required */
        width: 100%; /* required */
        height: 100%;
        z-index: 1; /* required */
    }

    #sequence .frame {
        background: #CCCCCC;
    }

    #sequence .f1 {
        left: -1000px;
        -webkit-transition-duration: 1s;
        -moz-transition-duration: 1s;
        -o-transition-duration: 1s;
        -ms-transition-duration: 1s;
        transition-duration: 1s;
    } 
```

我正在启动这样的序列：

```
$(document).ready(function() {
    // slider
    var options = {
        autoPlay: true,
        autoPlayDelay: 3000
    };
    $("#sequence").sequence(options).data("sequence");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:11:42.723

从[README.md](https://github.com/IanLunn/Sequence#v09-1932013)：

> v0.9 19/3/2013
> 
> `<ul>`现在必须为顶层提供类`.sequence-canvas`以使 Sequence 工作

`<ul class="sequence-canvas">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:04:44.150

您是否尝试过使用不同的网络浏览器？我在使用 Chrome 时遇到了同样的问题。

# permissions - 可以将 cvs 中的文件设为只读吗？

> ID：15885425
> 
> 赞同：0
> 
> 时间：2013-04-08T17:38:02.823
> 
> 标签：permissions, cvs

我们希望保护我们项目中的配置文件不被大多数开发人员提交（但让每个人都可以阅读）。有没有办法在 CVS 中设置这种权限？如果不可能，只为每个人设置只读就足够了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:09:48.850

如果你想阻止用户提交文件。您可以将正则表达式添加到 commitinfo 文件中。如果不允许提交的文件在参数列表中，则匹配文件所在的目录并指定一个返回非零的程序。

[http://ximbiot.com/cvs/manual/cvs-1.11.23/cvs_18.html#commitinfo](http://ximbiot.com/cvs/manual/cvs-1.11.23/cvs_18.html#commitinfo)

# android - Aapt错误-1073741816

> ID：15885426
> 
> 赞同：3
> 
> 时间：2013-04-08T17:38:05.457
> 
> 标签：android, eclipse, actionbarsherlock, adt

我似乎经常遇到这个错误。

```
Error executing aapt: Return code -1073741816   RTZone      line 1  Android ADT Problem 
```

我尝试了很多配置（不同的 JDK、x86、x64、ADT 版本等）

当前运行 Windows 8 Pro x64、Intel Core i7 3610QM、NVidia Gefore GTX 660M、16GB RAM。

我从控制台中的详细构建中获得的内容可能会有所帮助。

```
[2013-04-08 19:39:57 - RTZone]     (new resource id abs__screen_action_bar from                D:\Projects\Android\ActionBarSherlock\res\layout-xlarge\abs__screen_action_bar.xml)
[2013-04-08 19:39:57 - RTZone]     (new resource id abs__screen_action_bar_overlay from D:\Projects\Android\ActionBarSherlock\res\layout\abs__screen_action_bar_overlay.xml)
[2013-04-08 19:39:57 - RTZone]     (new resource id abs__screen_action_bar_overlay from D:\Projects\Android\ActionBarSherlock\res\layout-xlarge\abs__screen_action_bar_overlay.xml)
[2013-04-08 19:39:57 - RTZone]     (new resource id abs__screen_simple from D:\Projects\Android\ActionBarSherlock\res\layout\abs__screen_simple.xml)
[2013-04-08 19:39:57 - RTZone]     (new resource id abs__screen_simple_overlay_action_mode from D:\Projects\Android\ActionBarSherlock\res\layout\abs__screen_simple_overlay_action_mode.xml)
[2013-04-08 19:39:57 - RTZone]     (new resource id abs__search_dropdown_item_icons_2line from D:\Projects\Android\ActionBarSherlock\res\layout\abs__search_dropdown_item_icons_2line.xml)
[2013-04-08 19:40:00 - RTZone]     (new reso
[2013-04-08 19:40:00 - RTZone] 'aapt' error. Pre Compiler Build aborted. 
```

可能是内存不够还是什么问题？我尝试提高 Eclipse 限制，但这没有帮助：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T16:20:28.150

这是错误[https://code.google.com/p/android/issues/detail?id=61308](https://code.google.com/p/android/issues/detail?id=61308)。它在 AAPT 工具中发生崩溃，无法针对资源文件中的某些类型的错误生成正确的错误消息。

您可以在错误报告中找到有关要修复什么的建议，但简而言之，它通常是由对您的某个资源文件中缺少的引用的引用引起的。菜单资源中的无效@string 引用似乎是常见的罪魁祸首，例如：

```
 <item android:id="@+id/action_settings"
        android:title="@string/non_existent_string_resource"
        android:orderInCategory="100"
        android:showAsAction="never" /> 
```

# php - 将日期的部分内容与 mysql 中的行进行比较，包括关键字

> ID：15885433
> 
> 赞同：0
> 
> 时间：2013-04-08T17:38:28.920
> 
> 标签：php, date, search, mysqli

我正在尝试将存储为变量的日期与 mysql 中的一行进行比较，这就是我目前所处的位置：

```
if(isset($_REQUEST['date1'])) {
$datum = $_REQUEST['date1'];
   if($datum == "0000-00-00") {$datum = "";}
echo "Date: $datum";
echo "<br>";
} else { $datum = ""; }

$result = mysqli_query($link, " SELECT id, auditor, auditee, datum, department, func, proc, audit_type, copy_to, comments 

FROM audit_data

WHERE 
( 
`auditor` LIKE '%$search_field%' OR 
`auditee` LIKE '%$search_field%' OR 
`department` LIKE '%$search_field%' OR 
`func` LIKE '%$search_field%' OR 
`proc` LIKE '%$search_field%' OR 
`audit_type` LIKE '%$search_field%')
OR
(`id` = '$radio_id')
OR
(`datum` LIKE '%$datum%')
" ) 
OR 
die(mysqli_error($link)); 
```

我无法让查询返回具有请求日期的行。

$datum 存储为 YYYY-MM-DD `datum`是一样的。

我已经尝试了一切！我到底做错了什么？？

# html - 将图像与列表中的锚文本内联

> ID：15885434
> 
> 赞同：0
> 
> 时间：2013-04-08T17:38:28.997
> 
> 标签：html, css

这是我到目前为止所得到的：http: [//jsfiddle.net/dDK6z/](http://jsfiddle.net/dDK6z/)

我已经尝试过诸如`display:inline(-block)`添加边距、填充等的方法，但这些都没有将图像向下/文本向上移动。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:44:39.543

您是否尝试垂直对齐图像？

```
img { 
   vertical-align: middle;
} 
```

见[演示](http://jsfiddle.net/dDK6z/2/)。

# php - 分页当前页面颜色

> ID：15885437
> 
> 赞同：0
> 
> 时间：2013-04-08T17:38:41.193
> 
> 标签：php, pagination

下面是我的 php 分页代码。我想在分页布局中为当前页码添加颜色。有人请看下面的代码，因为我对 php 不太了解，并帮助我编写当前页码颜色代码。除了没有突出显示当前页码外，此代码一切正常。我添加了当前页面颜色，然后我意识到它与分页代码有关。

```
public function getBasicPagination($total_pages, $page, $limit, $targetpage) {
  $adjacents = 3;
  if ($page == 0) {
    $page = 1;
  }
  $prev = $page - 1;
  $next = $page + 1;
  $lastpage = ceil($total_pages / $limit);
  $lpm1 = $lastpage - 1;
  $pagination = "";
  if (1 < $lastpage) {
    if (1 < $page) {
      $pagination. = " <a href=\"{$targetpage}{$prev}\">&laquo;</a> ";
    }
    else {
      $pagination. = " ";
    }
    if ($lastpage < 7 + $adjacents * 2) {
      $counter = 1;
      while ($counter <= $lastpage) {
        if ($counter == $page) {
          $pagination. = " <a href=\"{$targetpage}{$counter}\">{$counter}</a> ";
        }
        else {
          $pagination. = " <a href=\"{$targetpage}{$counter}\">{$counter}</a> ";
        }
        if ($counter < $lastpage) {
          $pagination. = " ";
        }
        ++$counter;
      }
    }
    else if (5 + $adjacents * 2 < $lastpage) {
      if ($page < 1 + $adjacents * 2) {
        $counter = 1;
        while ($counter < 4 + $adjacents * 2) {
          if ($counter == $page) {
            $pagination. = " <a href=\"{$targetpage}{$counter}\">{$counter}</a> ";
          }
          else {
            $pagination. = " <a href=\"{$targetpage}{$counter}\">{$counter}</a> ";
          }
          if ($counter < 3 + $adjacents * 2) {
            $pagination. = " ";
          }
          ++$counter;
        }
        $pagination. = " ... ";
        $pagination. = " <a href=\"{$targetpage}{$lpm1}\">{$lpm1}</a> ";
        $pagination. = " <a href=\"{$targetpage}{$lastpage}\">{$lastpage}</a> ";
      }
      else if ($page < $lastpage - $adjacents * 2 && $adjacents * 2 < $page) {
        $pagination. = " <a href=\"{$targetpage}1\">1</a > ";
        $pagination. = " <a href=\"{$targetpage}2\">2</a> ";
        $pagination. = " ... ";
        $counter = $page - $adjacents;
        while ($counter <= $page + $adjacents) {
          if ($counter == $page) {
            $pagination. = " <a href=\"{$targetpage}{$counter}\">{$counter}</a> ";
          }
          else {
            $pagination. = " <a href=\"{$targetpage}{$counter}\">{$counter}</a> ";
          }
          if ($counter < $page + $adjacents) {
            $pagination. = " ";
          }
          ++$counter;
        }
        $pagination. = " ... ";
        $pagination. = " <a href=\"{$targetpage}{$lpm1}\">{$lpm1}</a> ";
        $pagination. = " <a href=\"{$targetpage}{$lastpage}\">{$lastpage}</a> ";
      }
      else {
        $pagination. = " <a href=\"{$targetpage}1\">1</a> ";
        $pagination. = " <a href=\"{$targetpage}2\">2</a> ";
        $pagination. = " ... ";
        $counter = $lastpage - (2 + $adjacents * 2);
        while ($counter <= $lastpage) {
          if ($counter == $page) {
            $pagination. = " <a href=\"{$targetpage}{$counter}\">{$counter}</a> ";
          }
          else {
            $pagination. = " <a href=\"{$targetpage}{$counter}\">{$counter}</a> ";
          }
          if ($counter < $lastpage) {
            $pagination. = " ";
          }
          ++$counter;
        }
      }
    }
    if ($page < $counter - 1) {
      $pagination. = " <a href=\"{$targetpage}{$next}\">&raquo;</a> ";
    }
    else {
      $pagination. = " ";
    }
  }
  if (empty($pagination)) {
    $pagination = " <a href=\"{$targetpage}1\">1</a> ";
  }
  return $pagination;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:47:51.743

你需要更换

```
if ($counter == $page) {
    $pagination. = " <a href=\"{$targetpage}{$counter}\">{$counter}</a> ";
} 
```

和

```
if ($counter == $page) {
    $pagination. = " <a href=\"{$targetpage}{$counter}\" class=\"current\">{$counter}</a> ";
} 
```

**并**在您的 CSS 中添加以下规则

```
a.current{background: #f00; color:#fff; border: 1px solid #000} /*change it however you like*/ 
```

# iphone - 查找精灵的旋转方向，即顺时针或逆时针

> ID：15885441
> 
> 赞同：3
> 
> 时间：2013-04-08T17:38:49.947
> 
> 标签：iphone, ios, vector, cocos2d-iphone

我一直在打败自己，因为我认为这是一个简单的问题，但不知何故我就是找不到解决方案。

我正在根据触摸移动事件围绕其锚点旋转 CCSprite。这是我用来旋转精灵的代码。

```
CGPoint previousLocation = [touch previousLocationInView:[touch view]];
CGPoint newLocation = [touch locationInView:[touch view]];

//preform all the same basic rig on both the current touch and previous touch
CGPoint previousGlLocation = [[CCDirector sharedDirector] convertToGL:previousLocation];
CGPoint newGlLocation = [[CCDirector sharedDirector] convertToGL:newLocation];

CCSprite *handle = (CCSprite*)[_spriteManager getChildByTag:HANDLE_TAG];

CGPoint previousVector = ccpSub(previousGlLocation, handle.position);
CGFloat firstRotateAngle = -ccpToAngle(previousVector);
CGFloat previousTouch = CC_RADIANS_TO_DEGREES(firstRotateAngle);

CGPoint currentVector = ccpSub(newGlLocation, handle.position);
CGFloat rotateAngle = -ccpToAngle(currentVector);
CGFloat currentTouch = CC_RADIANS_TO_DEGREES(rotateAngle);

float rotateAmount = (currentTouch - previousTouch);
handle.rotation += rotateAmount; 
```

我需要以某种方式找到旋转方向，即顺时针或逆时针方向。我尝试通过在 rotateAmount 值上设置“if”条件来做到这一点。但这在一种特定情况下不起作用。

例如。如果用户以顺时针方向旋转精灵，在这种情况下，rotateAmount 值将是 0 - 359 之间的正数。当用户即将完成圆圈时，条件将不成立，方向将变为逆时针方向。

有没有更好的方法来检测旋转方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T18:47:59.220

试试这个全面的完整性检查：

```
float rotateAmount = (currentTouch - previousTouch);

if (rotateAmount > 180)
  rotateAmount -= 360;
else if (rotateAmount < -180)
  rotateAmount += 360;

handle.rotation += rotateAmount; 
```

# html - 为什么不能一个元素包含一个 ?

> ID：15885444
> 
> 赞同：24
> 
> 时间：2013-04-08T17:39:30.243
> 
> 标签：html, w3c-validation

我的公司正在建立一个网站，我们遇到了一些问题，即 JavaScript 库无法替换某些东西。我们决定将我们的 HTML 提交给 W3C 验证器，它告诉我们在`<div>`标签中包含`<button>`标签是非法的。

```
<button class="button" type="submit">
    <div class="buttonNormalLargeLeft"><!--#--></div>
    <div class="buttonNormalLargeCenter">Search Flights</div>
    <div class="buttonNormalLargeRight"><!--#--></div>
</button> 
```

结果是：

```
Line 287, Column 46: Element div not allowed as child of element button in this context. (Suppressing further errors from this subtree.) 
```

编辑：澄清我们在这里尝试做的事情。我们想制作一个圆角按钮，不依赖`box-radius`. 我们在按钮元素中制作了 3 个 div，每个 div 都有自己的精灵，以使其看起来是圆形的并允许不同的宽度。其他资源指出，按钮元素是为希望按钮包含子元素（例如图像）的用户创建的，但由于某种原因 div 似乎无效。

为什么按钮元素中不允许使用 div？

这个问题的理想解决方案是什么？

编辑2：

为什么不使用输入法？因为输入不能具有所需的布局

为什么不使用div？因为没有 JavaScript 的用户将无法提交表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-25T19:47:08.753

好吧，我发表了评论，但没有爱。

您可以通过简单地将图像放入按钮中来实现 W3C 有效按钮。

## [小提琴](http://jsfiddle.net/press/xcpj8b2f/)

当然，您必须创建图像并向其中添加文本。但是由于您已经为不应该太难的角落创建了图像。

[图像精灵](http://www.w3schools.com/css/css_image_sprites.asp)也是一件很棒的事情。

```
.test {
  width: 258px;
  height: 48px;
  background: none;
  border: 1px solid transparent;
}
.test:active {
  outline: 0;
}
.test > img {
  width: 258px;
  height: 45px;
  opacity: 1;
  background: url('http://www.copygirlonline.com/wp-content/plugins/maxblogpress-subscribers-magnet/lib/include/popup1/images/btn/blue-button.png');
  background-position: -3px 0px;
}
.test > img:hover {
  background-position: -3px -50px;
}
```

```
<button class="test">
  <img src="http://alistapart.com/d/cssdropshadows/img/shadowAlpha.png" />
</button>
```

如果你想坚持使用 3 张图片，这里有一个更新版本。

```
button {
  margin: 0;
  padding: 0;
  border: none;
}
```

```
<button>
  <img src="http://placehold.it/50x50" /><img src="http://placehold.it/50x50" /><img src="http://placehold.it/50x50" />
</button>
```

此外，如果没有额外的 CSS，您似乎需要将所有`<img />`标签保持在同一行，否则它将图像视为它们之间有空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:42:15.977

如果要使用自定义按钮，则必须将按钮标签替换为 div 或输入。在这种情况下，看起来 div 是您想要的。您只需要添加任何必要的事件处理程序（用于您的提交）。

[这](https://stackoverflow.com/questions/469059/button-vs-input-type-button-which-to-use)可能有助于澄清一些事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-29T21:56:37.520

根据[HTML 标准](https://html.spec.whatwg.org/multipage/form-elements.html#the-button-element)a`<button>`只能包含[Phrasing content](https://html.spec.whatwg.org/multipage/dom.html#phrasing-content-2)。`div`元素不是短语内容的有效元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-01T18:14:56.047

如果您使用的是表单，则可以将按钮更改为可点击的 div。例如：

```
<div role="button" onclick="$(this).closest('form').submit()">
    <!-- your child content here -->
</div> 
```

或者，如果您知道表单名称或 ID，您可以将内联 javascript 更改为类似`document.getElementById("form-id").submit()`

# iphone - 能够从应用程序包加载文件，但不能从测试应用程序包加载文件

> ID：15885445
> 
> 赞同：2
> 
> 时间：2013-04-08T17:39:38.723
> 
> 标签：iphone, ios, unit-testing, nsbundle

为了快速测试某些东西，我在我的应用程序包中添加了一个测试文件，并使用 NSBundle:pathForResource 将其加载到委托中。这行得通。

但是现在我刚刚创建了一个单元测试类型的目标，并将文件和代码添加到这个新目标中，但无法加载它。

我已使用 Copy Bundle Resources 将文件添加到测试目标，这是加载它的完整代码：

```
NSBundle *mainBundle = [NSBundle mainBundle];
NSString *xmlFilePath = [mainBundle pathForResource:@"TestServerResponse" ofType:@"xml"];
STAssertNotNil(xmlFilePath, @"Unable to open file TestServerResponse.xml") 
```

我不知道为什么当它是应用程序包目标的一部分时我可以加载它，但现在我已经将它移动到它不会加载的测试包中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T17:45:13.413

试试这个：

```
NSBundle *testBundle=[NSBundle bundleForClass:[self class]];
NSString *testBundlePath=[testBundle pathForResource:@"TestServerResponse" ofType:@"xml"]; 
```

对于测试用例，主包或您的应用程序不是主包。

您需要自己访问班级的捆绑包。

# c++ - g++ 与 Dev-C++

> ID：15885447
> 
> 赞同：0
> 
> 时间：2013-04-08T17:39:50.717
> 
> 标签：c++, compiler-errors, g++, dev-c++

据我了解，该错误

```
[Linker error] undefined reference to `__gxx_personality_v0' 
```

是由于尝试使用 gcc 编译器编译 C++ 程序引起的。这可以通过使用 g++ 编译器编译程序来解决，但是如何让 Dev-C++ 使用 g++ 编译器？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:52:25.930

1.  确保您的项目是 C++ 项目，而不是 C 项目。上次我被迫使用 Dev-C++ 时，我找不到这样做的工作方法。您可能必须删除项目文件并创建一个新文件。
2.  摆脱那块破碎的垃圾。有更好的 IDE 可用。这里有两个：
    *   [代码::块](http://www.codeblocks.org/ "代码::块")
    *   [Qt 创作者](http://qt-project.org/downloads#qt-creator "Qt 创作者")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:53:23.230

该错误也可能是由于缺少 libstdc++ 引起的，请确保您通过“-lstdc++”链接到该库，这应该是最后一个链接命令。

# python - 访问python父文件夹

> ID：15885450
> 
> 赞同：2
> 
> 时间：2013-04-08T17:39:56.060
> 
> 标签：python, import, directory, parent

我查看了以前的答案，这些答案似乎表明我应该能够使用：

```
from .. import code 
```

虽然它产生了这个： ValueError: Attempted relative import beyond toplevel package

虽然这似乎不起作用。我的文件结构如下：

```
scraper/
    __init__.py
    bot/
            scraper.py
            __init__.py
            wigan/ 
                    council.py
                    __init__.py 
```

我可以从刮板负载委员会使用：

```
from wigan import council 
```

尽管来自委员会，但在尝试加载 scraper.py 时，以下操作均无效：

```
from .. import scraper
from scraper.bot import scraper
from scraper.bot.scraper import scraper 
```

任何帮助都会很棒。谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:48:37.030

我怀疑您遇到的问题是您正在运行位于 package.json 中的脚本。这是 Python 中支持最笨拙的特性之一。当您直接运行脚本时，它会将您的当前路径放在 Python 搜索路径的开头。但是，如果您在包裹内，那将是错误的。

要正确运行`scrapper.py`（如果那是您的脚本），您应该更改到顶级文件夹（无论是上面的什么`scrapper/`），然后运行`python -m scrapper.bot.scrapper`​​.

或者，如果您将顶级文件夹添加到 Python 搜索路径，或者通过使用`PYTHONPATH`环境变量，或者通过将其（或适当的`.pth`文件）安装到`site-packages`文件夹中，则当前目录限制将放宽，您可以运行脚本从任何地方。

如果您还打算从其他模块中按名称导入模块，则将模块作为脚本运行还有其他问题。该脚本将导入为`__main__`，而不是其实际名称。如果您也按名称导入它，您将获得脚本的第二个副本，这可能意味着它无法按预期工作（如果模块中有任何全局状态，则副本之间可能不一致）。这是经常建议脚本做的工作尽可能少的原因之一（只需从另一个模块导入一些东西，然后运行它）。您可能也想重构您的代码来执行此操作。

# nlp - LexRank 汇总算法

> ID：15885451
> 
> 赞同：1
> 
> 时间：2013-04-08T17:39:57.020
> 
> 标签：nlp, nltk, summary, summarization

我正在为一个项目实现`LexRank`（[链接](https://en.wikipedia.org/wiki/Automatic_summarization#Unsupervised_approaches%3a_TextRank_and_LexRank)）算法。

我对算法不了解的是在我创建了计算出的 tf-idf 值所在的最终矩阵之后（在考虑了它们的声望之后）。如何创建摘要？我只取前k个句子吗？我是否要删除一个句子，将其添加到摘要中并在没有它的情况下重新开始该过程？或者是其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:49:22.950

来自维基百科条目`Automatic Summarisation`

> 在这两种算法 [LexRank & TextRank] 中，通过将 PageRank 应用于结果图来对句子进行排名。摘要是通过组合排名靠前的句子形成的，使用阈值或长度截断来限制摘要的大小。

# node.js - 为什么 node.js 运行两个进程？

> ID：15885457
> 
> 赞同：-1
> 
> 时间：2013-04-08T17:40:24.693
> 
> 标签：node.js

这是官方文档中的一个简单示例：

```
$ node test-node.js 

var cluster = require('cluster');
var http = require('http');
var numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  // Fork workers.
  console.log(numCPUs);
  for (var i = 0; i < numCPUs-1; i++) {
    cluster.fork();
  }

  cluster.on('exit', function(worker, code, signal) {
    console.log('worker ' + worker.process.pid + ' died');
  });
} else {
  // Workers can share any TCP connection
  // In this case its a HTTP server
  http.createServer(function(req, res) {
    res.writeHead(200);
    res.end("hello world\n");
  }).listen(8000);
} 
```

这是我在**htop**中看到的： ![htop](https://i.stack.imgur.com/NumBU.jpg)

有 2 个主进程和两个分叉进程。

为什么？我以为我应该只有 2 个进程！

* * *

**更新：**

这里我在 VM CentOS 上运行：http: ![centos](https://i.stack.imgur.com/GQiiN.png) [//i.stack.imgur.com/GQiiN.png](https://i.stack.imgur.com/GQiiN.png)

也许我不明白？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:06:24.283

可能，节点创建系统线程！

我进入控制台

```
[root@centos-1 ~]#  ps axf|grep node
 1435 pts/1    Sl+    0:00  |       \_ node /usr/local/bin/coffee test.js
 1445 pts/0    S+     0:00          \_ grep node
[root@centos-1 ~]# 
```

但 htop 列出〜 6 个进程 0_O（进程和子线程），但内存已满......

感谢卡玛；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:01:35.310

我创建了一个运行`exec`. exec 将产生一个新进程（不是新线程；节点不使用线程）。这是过程：

```
ps -ef | grep 32038
me  32038 15776  0 08:54 pts/7    00:00:00 node index.js
me  32116 32038  1 08:55 pts/7    00:00:00 find /home/me -name *.js 
```

我查看了 github，但粗略地看，我没有看到`http.createServer`分叉或产生一个新进程。拥有 2 个进程是有意义的，因为您正在使用`cluster`API，并且您必须拥有 2 个 CPU 或 1 个具有 2 个内核的 CPU。

* * *

我在上面运行了你的代码，因为我有 4 个内核，所以我得到了 4 个进程：

```
ps -ef | grep node
me   1822 15776  0 09:02 pts/7    00:00:00 node server.js
me   1827  1822  0 09:02 pts/7    00:00:00 /opt/node-v0.10.0-linux-x64/bin/node /home/me/workspace/node6proc2/server.js
me   1828  1822  0 09:02 pts/7    00:00:00 /opt/node-v0.10.0-linux-x64/bin/node /home/me/workspace/node6proc2/server.js
me   1830  1822  0 09:02 pts/7    00:00:00 /opt/node-v0.10.0-linux-x64/bin/node /home/me/workspace/node6proc2/server.js 
```

# macos - 如何防止进程的多个实例（NPAPI 插件）在 Posix 中运行？

> ID：15885458
> 
> 赞同：0
> 
> 时间：2013-04-08T17:40:32.553
> 
> 标签：macos, posix, semaphore, named-pipes, npapi

在 Windows 上，我通过创建命名信号量解决了这个问题。如果插件 1 在持有信号量时崩溃，则释放信号量。但 Posix（在 Mac 上）并非如此，信号量仍然存在。由于 sigaction 不会释放信号量上的 SIGKILL，所以我不得不放弃它。

我最好的选择是什么。

命名管道、端口、消息队列、远程函数执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:17:12.467

我使用 POSIX 中可用的 open() 调用修复了它。显然，即使进程被 SIGKILL 终止，操作系统也会释放进程的文件描述符

```
Constructor()
{
   m_fd = open(filePath, O_CREAT | O_EXLOCK | O_NONBLOCK);
   if (m_fd == -1)
    {
        throw exception;
    }
    ...
}

Destructor()
{
    if(m_fd != 0)
    {
        close(m_fd);
    }
    ...
} 
```

# c# - 在 GetAsync 上使用 await 时，HttpClient 不会引发异常

> ID：15885460
> 
> 赞同：5
> 
> 时间：2013-04-08T17:40:36.983
> 
> 标签：c#, task-parallel-library, async-await

我正在使用以下代码获取端点并将其写入缓存：

```
public async Task UpdateCacheFromHttp(string Uri)
{
    if (string.IsNullOrEmpty(Uri))
        return;

    var httpClient = new HttpClient();
    var response = await httpClient.GetAsync(Uri);

    if ((response != null) && (response.IsSuccessStatusCode))
    {
        var responseStream = await response.Content.ReadAsStreamAsync();
        WriteToCache(responseStream);
    }
} 
```

代码在 IIS 上运行。

如果无法到达端点，我希望 GetAsync 会引发异常。即使使用 Try-Catch，它似乎也永远不会失败。GetAsync 永远不会返回（我在 HttpClient 上尝试了 5 秒超时，但仍然没有返回）。

这确实会引发异常：

```
public Task UpdateCacheFromHttp(string Uri)
{
    var updateCacheTask = Task.Factory.StartNew(new Action(() =>
    {
        if (string.IsNullOrEmpty(Uri))
            return;

        var httpClient = new HttpClient();
        var response = httpClient.GetAsync(Uri).Result;

        if (response.IsSuccessStatusCode)
        {
            var responseStream = response.Content.ReadAsStreamAsync().Result;
            WriteToCache(responseStream);
        }
    }));

    return updateCacheTask;
} 
```

我得到预期的“无法连接到远程服务器”。

我怀疑它与在 IIS 中运行的代码有关，但为什么呢？如何让它正确抛出异常而无需开始新任务？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-08T17:49:14.450

我的直觉告诉我，您正在调用`Wait`或`Result`进一步调用您的调用堆栈。

如果这是正确的，那么正如[我在我的博客中解释的](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)那样，您正在造成死锁。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-01-01T18:11:33.657

当我遇到相同的行为而没有抛出异常时，我创建了一个示例来演示可能的解决方案的问题：

```
using System;
using System.Linq;
using System.Net.Http;
using System.Threading.Tasks;

namespace Exam
{
    public static class Program
    {
        private static async Task<string> GetWebPage(string uri)
        {
            var httpClient = new HttpClient();
            var response = await httpClient.GetAsync(new Uri(uri, UriKind.Absolute), HttpCompletionOption.ResponseContentRead);
            return await response.Content.ReadAsStringAsync();
        }

        public static void Main(string[] args)
        {
            try
            {
                // These two lines do not work - i.e. it terminates the application without any exception being thrown...
                //string s = await GetWebPage(@"https://www.dwd.de/DE/leistungen/klimadatendeutschland/klimadatendeutschland.html");
                //Console.WriteLine(s);

                // This works:
                Task<string> getPageTask = GetWebPage(@"https://www.dwd.de/DE/leistungen/klimadatendeutschland/klimadatendeutschland.html");
                getPageTask.Wait();
                if (getPageTask.IsCompleted)
                    Console.WriteLine(getPageTask.Result);
            }
            catch (AggregateException aex)
            {
                aex.InnerExceptions.AsParallel().ForAll(ex => Console.WriteLine(ex));
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex);
            }
            Console.ReadKey();
        }
    }
} 
```

当您另外将 URI 更改为 @"invalid https://...." 之类的内容时，您将检索 AggregateException。希望，它可以帮助任何人:-)

# optimization - 优化问题中目标函数的缩放

> ID：15885463
> 
> 赞同：0
> 
> 时间：2013-04-08T17:40:51.037
> 
> 标签：optimization, scale

在许多优化算法中，我看到它们使用缩放因子来缩放目标函数。我不明白这背后的原因是什么。为什么我们需要在优化算法中缩放目标函数？它是否在没有缩放的情况下工作。从逻辑上讲它应该可以工作，但我现在有点困惑。

我希望你能回答我，真的谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:02:08.067

缩放通常用于优化问题：A）使更好的答案看起来更好（对数缩放）或 B）使 OK 答案和稍微更好的答案之间的差异更接近（Quashing 函数）。

大多数算法应该在非缩放目标函数上工作，但在缩放版本上可能会更好。

要查看效果，我建议在两个版本上运行您的元启发式算法。

# uipickerview - 没有对象的 UIPickerView

> ID：15885464
> 
> 赞同：0
> 
> 时间：2013-04-08T17:40:54.493
> 
> 标签：uipickerview

我有一个带有一个数组的选择器，这个数组有时没有内部的对象，这还可以，但是当显示拾音器并滚动应用程序崩溃时。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:45:43.413

如果数组为空，则不显示 UIPickerview。至少它会保持空白或粉碎您的应用程序。

# c++ - 从不同的类 c++ 调用一个类的方法

> ID：15885466
> 
> 赞同：-5
> 
> 时间：2013-04-08T17:40:59.523
> 
> 标签：c++, class, visual-c++, methods, instance

我之前问过这个问题

[创建类的实例](https://stackoverflow.com/questions/15882002/create-instace-of-class)

```
fGCBS f1; 
```

但是当我尝试调用它时，我得到了这个错误

```
error C2512: 'fGCBS' : no appropriate default constructor available 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:44:16.673

你的 FGCBS 类有一个看起来像这样的构造函数

`fGCBS(AbstRaven_Bot* owner);`

一旦您定义了一个不是默认构造函数的构造函数，编译器将不再为您生成默认构造函数。

要实例化您的课程，您需要类似的东西

`FGCBS foo(nullptr);`

或者你需要添加一个默认构造函数

```
class FGCBS
{
public:
     FGCBS()
     {...}
}; 
```

# java - 为什么我会收到此异常错误？

> ID：15885467
> 
> 赞同：2
> 
> 时间：2013-04-08T17:41:00.017
> 
> 标签：java, exception

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 4, Size: 4
at java.util.ArrayList.rangeCheck(Unknown Source)
at java.util.ArrayList.get(Unknown Source)
at assg3_Tram.DVDCollection.remove(DVDCollection.java:60)
at assg3_Tram.DVDApplication.main(DVDApplication.java:95) 
```

我通过在我的开关/机箱中选择选项 4（从列表中删除 DVD 对象）来启动我的程序。我输入“Adam”，成功删除。然后菜单再次重复，我再次选择 4 以删除“Mystic River”。这也成功删除。菜单再次重复，我再次选择 4。这次我输入“Mystic Rivers”（带有一个“s”，以测试该 DVD 不在列表中），然后弹出该错误。我已经包含了相关代码和我正在阅读的 .txt 列表。

我正在使用 .txt 文件中的信息填充 ArrayList。每个 DVD 对象有 5 条信息。每一块都是一个单独的线。

```
public DVD remove(String removeTitle) {
    for (int x = 0; x <= DVDlist.size(); x++) {
        if (DVDlist.get(x).GetTitle().equalsIgnoreCase(removeTitle)) { // This is line 60.
            DVD tempDVD = DVDlist.get(x);
            DVDlist.remove(x);
            System.out.println("The selected DVD was removed from the collection.");
            wasModified = true;
            return tempDVD;
        }
    }

    System.out.println("DVD does not exist in the current collection\n");
    wasModified = false;
    return null;
} 
```

在我的主要课程中：

```
 case 4: {
            System.out.print("Enter a DVD title you want to remove: ");
            kbd.nextLine();
            String titleToRemove = kbd.nextLine();
            DVD dvdToRemove = dc.remove(titleToRemove); // This is line 95
            if (dvdToRemove != null) 
                System.out.println(dvdToRemove);
            System.out.print("\n");
            break;
        } 
```

读入带有列表的 .txt 文件。

```
Adam
Documentary
78 minutes
2012
7.99
Choo Choo
Documentary
60 minutes
2006
11.99
Good Morning America
Documentary
80 minutes
2010
9.99
Life is Beautiful
Drama
125 minutes
1999
15.99
Morning Bird
Comic
150 minutes
2008
17.99
Mystic River
Mystery
130 minutes
2002
24.99 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T17:42:17.477

问题是这样的：

```
for (int x = 0; x <= DVDlist.size(); x++) { ... } 
```

您必须将其更改为

```
for (int x = 0; x < DVDlist.size(); x++) { ... } 
```

原因是 List 中的第一项不是索引 1 而是 0。**索引从 0 开始**。[列表（如 Java 数组）是从零开始的](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/List.html)。

如果您的列表有 10 个项目，最后一个项目位于第 9 位而不是第 10 位。这就是您不能使用的原因`x <= DVDlist.size()`

```
java.lang.IndexOutOfBoundsException: Index: 4, Size: 4 
```

这就是我所说的。您的 List 有 4 个元素，但最后一个元素位于位置**3**即 size - 1

```
0,1,2,3 --> COUNT = 4 // it starting from 0 not 1 
```

# javascript - Javascript 函数在点击时无法识别

> ID：15885470
> 
> 赞同：0
> 
> 时间：2013-04-08T17:41:11.213
> 
> 标签：javascript, function, onclick

我有一个名为 formApprove() 的 javascript 函数，并在 html onclick 按钮上调用该函数。由于某种原因，无法识别 javascript 函数，因为 firebug 告诉我 forApprove 不是函数。下面是头部的代码：

```
<script type="text/javascript">
function formApprove() {
var TheTextBox = document.getElementById("formApprove");
TheTextBox.value = 'true';
alert("hellp");
return true;
}
</script> 
```

下面是正文中的代码：

```
<input type="submit" name="approve" value="Approve Membership" onclick="formApprove()" /> 
```

对此的任何帮助将不胜感激。

完整代码：

```
<head>
<script type="text/javascript">
function nextPrevious(txtElement, btnElement) {
    switch(btnElement.name) {
        case 'increase':
            var numrows = document.getElementById("numOfRows");
            if (txtElement.value < Number(numrows.value)) {
                txtElement.value++;
            } else {
                    alert('You are alread at the end of the members');
                    return false;
            }
            break;
        case 'decrease': 

            if(txtElement.value > 1) {
                txtElement.value--;
            } else {
                    alert('You are alread at the begining of the members');
                    return false;
            }
            break;

        case 'goto':
            alert(txtElement.value);
            break;
        default: 
    }
    return true;
}

function approve() {
    var TheTextBox = document.getElementById("formApprove");
    TheTextBox.value = 'true';
    alert("hellp");
    return true;
} 

function formChange() {
    var TheTextBox = document.getElementById("formSubmit");
    TheTextBox.value = 'true';
    return true;
}

function deleteRecord() {
    var answer = confirm ("Are you sure you want to delete record?");
    if (answer) {
        var TheTextBox = document.getElementById("formDelete");
        TheTextBox.value = 'true';
        return true;
    } else {return false;}

}

</script>
</head>
<body>
        <form name="members_view" method="POST" action="viewpending.php">
<br />
    <div id="buttons">
        <input type="submit" name="update" value="Update Record" onclick="formChange(this.form.elements['formSubmit'].value)" /> - 
        <input type="submit" name="decrease" value="Previous" onclick="nextPrevious(this.form.elements['record'], this)" /> - 
        <input type="submit" name="increase" value="Next" onclick="nextPrevious(this.form.elements['record'], this)" /> - 
        <input type="submit" name="delete" value="Delete Record" onclick="deleteRecord(this.form.elements['formSubmit'].value)" /> - 
        <input type="submit" name="approve" value="Approve Membership" onclick="approve()" />
    </div>
</div>
<div id="leftcase">
        <div class="label">First Name:</div><div class="input"><input size="40" type="text" name="FNAME" value="<?php echo $row['FNAME']; ?>" /></div>
        <div class="label">Middle Name:</div><div class="input"><input size="40" type="text" name="MNAME" value="<?php echo $row['MNAME']; ?>" /></div>
        <div class="label">Last Name:</div><div class="input"><input size="40" type="text" name="LNAME" value="<?php echo $row['LNAME']; ?>" /></div>
        <div class="label">Full Name:</div><div class="input"><input size="40" type="text" name="FULL_NAME" value="<?php echo $row['FNAME'].' '.$row['MNAME'].' '.$row['LNAME']; ?>" /></div>
        <div class="label">Nick Name:</div><div class="input"><input size="40" type="text" name="NNAME" value="<?php echo $row['NNAME']; ?>" /></div>
        <div class="label">Spouse/Partner Name:</div><div class="input"><input size="40" type="text" name="H_COUNTRY" value="<?php echo $row['H_COUNTRY']; ?>" /></div>
        <div class="label">Anniversary Date:</div><div class="input"><input size="40" type="text" name="B_ZIP" value="<?php echo $row['B_ZIP']; ?>" /></div>
        <div class="label">Primary Email:</div><div class="input"><input size="40" type="text" name="EMAIL" value="<?php echo $row['EMAIL']; ?>" /></div>
        <div class="label">Second Email:</div><div class="input"><input size="40" type="text" name="B_CITY" value="<?php echo $row['B_CITY']; ?>" /></div>
        <div class="label">Home Street:</div><div class="input"><input size="40" type="text" name="H_STREET" value="<?php echo $row['H_STREET']; ?>" /></div>
        <div class="label">Home City:</div><div class="input"><input size="40" type="text" name="H_CITY" value="<?php echo $row['H_CITY']; ?>" /></div>
        <div class="label">Home State:</div><div class="input"><input size="40" type="text" name="H_STATE" value="<?php echo $row['H_STATE']; ?>" /></div>
        <div class="label">Home Zip:</div><div class="input"><input size="40" type="text" name="H_ZIP" value="<?php echo $row['H_ZIP']; ?>" /></div>
        <div class="label">Home Phone:</div><div class="input"><input size="40" type="text" name="H_PHONE" value="<?php echo $row['H_PHONE']; ?>" /></div>
        <div class="label">Cell:</div><div class="input"><input size="40" type="text" name="H_CELL" value="<?php echo $row['H_CELL']; ?>" /></div>
        <div class="label">Birth Date:</div><div class="input"><input size="40" type="text" name="H_WEB" value="<?php echo $row['H_WEB']; ?>" /></div>
        <div class="label">Membership Exp:</div><div class="input"><input size="40" type="text" size="40" name="MEMBER_INFO" value="<?php echo $row['MEMBER_INFO']; ?>" /></div>
        <div class="label">Retired Mil Info:</div><div class="input"><input size="40" type="text" name="B_STATE" value="<?php echo $row['B_STATE']; ?>" /></div>
        <div class="label">1st tour from:</div><div class="input"><input size="40" type="text" name="B_COUNTRY" value="<?php echo $row['B_COUNTRY']; ?>" /></div>
        <div class="label">1st tour Rank/Rate:</div><div class="input"><input size="40" type="text" name="B_WEB" value="<?php echo $row['B_WEB']; ?>" /></div>
        <div class="label">1st tour cruise Book:</div><div class="input"><input size="40" type="text" name="B_PHONE" value="<?php echo $row['B_PHONE']; ?>" /></div>
        <div class="label">2nd tour from:</div><div class="input"><input size="40" type="text" name="B_FAX" value="<?php echo $row['B_FAX']; ?>" /></div>
        <div class="label">2nd tour Rank/Rate:</div><div class="input"><input size="40" type="text" name="PAGER" value="<?php echo $row['PAGER']; ?>" /></div>
        <div class="label">2nd tour cruise Book:</div><div class="input"><input size="40" type="text" name="B_COMPANY" value="<?php echo $row['B_COMPANY']; ?>" /></div>
        <div class="label">3rd tour from:</div><div class="input"><input size="40" type="text" name="B_TITLE" value="<?php echo $row['B_TITLE']; ?>" /></div>
        <div class="label">3rd tour Rank/Rate:</div><div class="input"><input size="40" type="text" name="B_DEPT" value="<?php echo $row['B_DEPT']; ?>" /></div>
        <div class="label">3rd tour cruise book:</div><div class="input"><input size="40" type="text" name="OFFICE_LOC" value="<?php echo $row['OFFICE_LOC']; ?>" /></div>
</div>
<div id="rightcase">
        <div class="label">Biography:</div><div class="input"><textarea rows="35" cols="80" name="NOTES" /><?php echo $row['NOTES']; ?></textarea></div>

        <input type="hidden" id="record" name="record" value="<?php echo $_POST['record']; ?>"/>        
        <input type="hidden" id="formSubmit" name="formSubmit" value="<?php echo $_POST['formSubmit']; ?>" />
        <input type="hidden" id="formApprove" name="formApprove" value="<?php echo $_POST['formApprove']; ?>" />
        <input type="hidden" id="formDelete" name="formDelete" value="<?php echo $_POST['formDelete']; ?>" />
        <input type="hidden" id="numOfRows" name="numOfRows" value="<?php echo $num_rows; ?>" />
        <input type="hidden" id="ID" name="ID" value="<?php echo $_POST['ID']; ?>"/>

</div>
<div id="buttons">
        <input type="submit" name="update" value="Update Record" onclick="formChange(this.form.elements['formSubmit'].value)" > - <input type="submit" name="decrease" value="Previous" onclick="nextPrevious(this.form.elements['record'], this)" > - <input type="submit" name="increase" value="Next" onclick="nextPrevious(this.form.elements['record'], this)" > - <input type="submit" name="delete" value="Delete Record" onclick="deleteRecord(this.form.elements['formSubmit'].value)" >
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:24:28.370

您可能与函数和元素的名称有名称冲突。

重命名函数或重命名文本框。

# php - Ajax Jquery 改变 div 值本身

> ID：15885471
> 
> 赞同：0
> 
> 时间：2013-04-08T17:41:12.380
> 
> 标签：php, jquery, ajax, reload

我有一个页面调用一些谷歌图表。这些图表中的每一个都有自己的过滤器：

*   图 1：销售：每月、每年；
*   图表 2：客户：产品类型...）；

所以我通过 ajax 调用（通过点击）调用它们中的每一个。但现在麻烦来了：我需要通过另一个 ajax 调用过滤图表，在我已经调用过的页面内。

基本上我只需要更改 $_GET 值并刷新首先调用的 div。

**在职的**

**主.PHP**

```
//receives the chart content
<div id="resultado"> 
  <!-- Google Chart -->
</div>     
 <pre>
//call the chart by click event
<a href="#" id="grafico1">click</a>
<script type="text/javascript">
 $.ajaxSetup({
  cache: false
 });
 var ajax_load = "<img src='images/preloader.gif' class='loading' />";
 var carregaUrl = "graficos/vendas.php";

 $("#grafico1").click(function(){
    $("#resultado")
    .html(ajax_load)
    .load(carregaUrl, "id=<?php echo $id; ?>");
 });
</script> 
```

**文达斯.php**

```
<select id="getValue">
    <option value="0">Selecionar</option>
    <option value="121">John</option>
    <option value="131">Rubia</option>
    <option value="141">Tony</option>
</select>
<script>
$.ajaxSetup({ cache: false });
var ajax_load = "<div id='grafico-load' class='span14'><img src='images/preloader.gif' alt='carregando...' class='loading' /></div>";
var carregaUrl = "graficos/vendas.php";
$("#getValue").change(function(){
var v = $('select#getValue').val();
    $("#resultado")
        .html(ajax_load)
        .load(carregaUrl, "idg="+v);
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:05:22.687

```
// However you opt to do so, change the value of our `GET` url
carregaUrl = "graficos/newurlhere.php";

// once the value is updated, your existing `click` function 
// will load its result in `$("#resultado")`

$("#grafico1").click(function(){
    $("#resultado")
    .html(ajax_load)
    .load(carregaUrl, "id=<?php echo $id; ?>");
}); 
```

如果你想更新值并在没有`click`事件的情况下运行加载函数，你也可以这样做：

```
$("#resultado").html(ajax_load)
               .load(carregaUrl, "id=<?php echo $id; ?>"); 
```

# php - PHP登录系统不会回显错误语句

> ID：15885479
> 
> 赞同：-2
> 
> 时间：2013-04-08T17:41:43.723
> 
> 标签：php

嗨，我刚刚使用 php 和 mysql 创建了一个登录系统，当从数据库输入有效的用户名和密码时，登录系统可以工作，但是当我输入无效的用户名和密码时，即使我有声明，它也会循环回到登录页面如果登录失败，我想打印失败这是我的代码文件

```
<?php
require_once("Connections/connection.php");
error_reporting(E_ALL ^ E_NOTICE); 

$userid =   $_POST['userid'];
$password =  $_POST['password'];
$submitted =  $_POST['submitted'];
if ($userid && $password){
    $query  =sprintf("SELECT * FROM users where user_name= '$userid' and user_password = '$password'");
    $result =@mysql_query($query);
    $rowAccount =@mysql_fetch_array($result);
}
if ($rowAccount){
    echo "The record exists so you can enter ";

} elseif($submitted){
    print "you don't exist in the system!";
}

?> 
```

我的 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<form id="form1" name="form1" method="post" action="<?php $_SERVER['PHP_SELF'];?>"> 
  <table width="800">
    <tr>
      <th width="233" scope="col">User ID </th>
      <th width="555" scope="col"><p>
        <label for="userid"></label>
        <label for="userid"></label>
        <input type="text" name="userid" id="userid" />
      </p>
      <p>&nbsp; </p></th>
    </tr>
    <tr>
      <td>Password </td>
      <td> <label for="userid"></label>       <label for="password"></label>

      <input type="text" name="password" id="password" /> </td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>   <input type="hidden" name="submitted" id="submitted" />        <input type="submit" name="Submit" id="Submit" value="Submit" /></td>
    </tr>
  </table>
</form>
</body>
</html> 
```

要使回声正常工作，必须向隐藏字段添加一个值并且它起作用了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:52:59.853

尝试改变

`elseif($submitted){ print "you don't exist in the system!"; }`

简单地说：

`else(){ print "you don't exist in the system!"; }`

看看你有没有看到你的消息呢？

您正在检查一个没有值的变量，因此它返回为 false 并且不会触发您的 elseif 语句。

或者，您可以将 HTML 部分更改为：

`<input type="hidden" name="submitted" id="submitted" value="test" />`

你可以看到我现在已经给了它一个测试值，以便它返回 true 以便触发你的 elseif 语句。

# ios - iPad TCP 连接套接字超时（代码 60）

> ID：15885482
> 
> 赞同：0
> 
> 时间：2013-04-08T17:42:03.210
> 
> 标签：ios, xcode, ipad, ios-simulator

我正在尝试从 iPad 建立一个简单的 TCP 套接字连接。

我使用模拟器启动并运行了一组代码，它运行良好。

但是当我在 iPad 上运行这段代码时，它失败了。

这是代码...

```
CFReadStreamRef readStream;
CFWriteStreamRef writeStream;
CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"192.168.1.10", 19997, &readStream, &writeStream);
inputStream = (NSInputStream *)readStream;
outputStream = (NSOutputStream *)writeStream;

[inputStream setDelegate:self];
[outputStream setDelegate:self];

[inputStream open];
[outputStream open]; 
```

代码挂在 [inputStream open]; 然后我得到错误：

```
 The Operation Couldn't be completed.  Operation timed out.  Code 60. 
```

我在这里错过了一些简单的东西吗？iOS权限还是什么？为什么它会在模拟器上工作？我是 iOS 开发的新手。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:20:54.273

我在我的 iPhone 上测试了你的代码，它运行良好。不过，连接的“另一端”可能是个问题。

您应该使用 www.google.com 端口 80 测试相同的代码。

您也可以在另一个项目或项目中的另一个“点”测试它。也许“你调用代码的地方”有问题

您还应该考虑只为这些连接使用现有框架，而不是自己编写所有内容。

我为此使用 Google Async Sockets。

# c++ - 与 Debug 不同的模板运行版本

> ID：15885492
> 
> 赞同：1
> 
> 时间：2013-04-08T17:42:17.323
> 
> 标签：c++, templates, runtime-error

我有一个像下面这样的对象

```
template<typename T> 
inline void UnusedParameter( T const& )
{

}

class Client
{
public:
  template<class T>
  void runFFT(T *wSamples, float const &fMult)
  {
    std::cout << "INSIDE RUNFFT : : :" << std::endl;
    UnusedParameter(wSamples);
    UnusedParameter(fMult);
  }
}; 
```

在我的 CPP 中，我有以下内容：

```
#include "object.hpp"

template<>
void Client::runFFT<int16_t>(int16_t *wSamples, float const &fMult)
{
  std::cout << "INSIDE INT16_T version: : :" << std::endl;
  UnusedParameter(wSamples);
  UnusedParameter(fMult);
}

template<>
void Client::runFFT<Ipp32f>(Ipp32f *wSamples, float const &fMult)
{
  std::cout << "INSIDE IPP32F version: : :" << std::endl;
  UnusedParameter(wSamples);
  UnusedParameter(fMult);
} 
```

这两个实现在我的调试代码中运行没有任何问题。进入int16_t版本没有问题，进入Ipp32f版本也没有问题。

但是当我尝试运行版本时，它只输入模板，就像编译器只编译头文件中的模板实现一样。

我该如何防止这种情况发生？我应该删除它并创建两种不同的方法吗？我喜欢我的模板，但这些 Heisenberg 错误令人沮丧。

感谢您的任何意见。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Andy Prowl 回答了这个问题，并在 HPP 中解决了以下问题：

```
template<typename T> 
inline void UnusedParameter( T const& )
{

}

class Client
{
public:
  template<class T>
  void runFFT(T *, float const &)
  {
    // Thanks for Joachim for removing my Unused Parameter crap
    std::cout << "INSIDE RUNFFT : : :" << std::endl;
  }
};

template<>
void Client::runFFT<int16_t>(int16_t *wSamples, float const &fMult);

template<>
void Client::runFFT<Ipp32f>(Ipp32f *wSamples, float const &fMult); 
```

现在它也可以在运行时工作。CPP 保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:51:15.643

问题很可能在于您将成员函数的特化降级为`runFFT()`一个单独的文件，而没有在主模板之后提供相应的声明，因此编译器在实例化点（可能属于另一个翻译单元s 只有包含 ) 定义的头文件不知道那些显式特化的存在。`int16_t``Ipp32f``.cpp``#include``Client`

将这些特化的*声明*放在包含类模板定义的同一头文件中：

```
template<typename T> 
inline void UnusedParameter( T const& ) { }

class Client
{
public:
    template<class T>
    void runFFT(T *wSamples, float const &fMult)
    {
        std::cout << "INSIDE RUNFFT : : :" << std::endl;
        UnusedParameter(wSamples);
        UnusedParameter(fMult);
    }
};

// DECLARE YOUR EXPLICIT SPECIALIZATIONS HERE

template<>
void Client::runFFT<int16_t>(int16_t *wSamples, float const &fMult);

template<>
void Client::runFFT<Ipp32f>(Ipp32f *wSamples, float const &fMult); 
```

根据 C++11 标准的第 14.7.3/6 段：

> 如果模板、成员模板或**类模板的成员**被显式特化，则应**在第一次使用该特化之前声明该特化，这将导致发生隐式实例化**，在每个翻译单元中出现这种使用; **不需要诊断**。[...]

“*不需要诊断*”部分意味着如果您不遵循此规则，您的程序将是格式错误的，但您的编译器/链接器不需要告诉您。这通常会导致您正在观察的那种未定义的行为。

# java - Primefaces 消息也不使用流文件

> ID：15885497
> 
> 赞同：0
> 
> 时间：2013-04-08T17:42:39.917
> 
> 标签：java, eclipse, jsf-2, primefaces, xhtml

当我尝试在我的代码中使用 primefaces 消息时，我遇到了问题。当我只是进行测试时，消息运行良好，但是当我执行流文件并尝试在我的 xhtml 中发送消息时，该过程运行良好，但消息没有长大。

我的代码：

```
public void cadastrar () throws KeyStoreException, CADoesntExistsException,        NoSuchAlgorithmException, CertificateException, IOException      
{           
    FacesContext fc = FacesContext.getCurrentInstance();            
    if((controlador.checkUserIfExist(certificadoModel.getUsername()) == false) || (controlador.checkUserIfExist(certificadoModel.getUsername()) == true && authorization == true))
    {
        System.out.println("Revoke: " + authorization);
        System.out.println("Check: " + controlador.checkUserIfExist(certificadoModel.getUsername()));
        //KeyStore keyStore = controlador.cadastrar(certificadoModel);      
        System.out.println("Bean Class: " + certificadoModel.getMensagem());
        /*       
        ExternalContext ec = fc.getExternalContext();

        ec.responseReset(); 
        ec.setResponseContentType("application/x-pkcs12"); 
        //ec.setResponseContentLength(contentLength); 
        ec.setResponseHeader("Content-Disposition", "attachment; filename=\"" + certificadoModel.getUsername() + ".p12" + "\""); 

        OutputStream output = ec.getResponseOutputStream();
        keyStore.store(output, certificadoModel.getPassword().toCharArray());
          */
        fc.addMessage("mensagem", new FacesMessage(FacesMessage.SEVERITY_INFO, "Teste", "")); 
        //fc.responseComplete();            
        controlador.clean(certificadoModel);            
    }else           
        fc.addMessage("mensagem", new     FacesMessage(FacesMessage.SEVERITY_ERROR, "Um usuário com o mesmo username já está     cadastrado!", ""));  
        controlador.clean(certificadoModel);
} 
```

我的页面代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"> 
    <ui:decorate template="/resources/template/default.xhtml">
        <ui:define name="centro"> 
            <h:form id="cadastro"> 
                <p:panel id="painelCadastro" header="Novo Cadastro" style="margin-bottom:10px;">         
                    <p:messages id="mensagem" autoUpdate="true" closable="true" />   

                    <p:commandButton action="#{certificadoBean.cadastrar}"  ajax="false" value="Cadastrar" update="mensagem" />                   
                    <p:commandButton outcome="homePage" ajax="false" value="Home Page"/>                                  
                </p:panel>       
            </h:form>  
        </ui:define>
    </ui:decorate>
</html> 
```

* * *

@BalusC，这就是我所做的。

xhtml

```
 <p:commandButton value="Cadastrar" action="#{downloadBean.prepareDownload}" update="mensagem" />
                <p:messages globalOnly="true" />
                <h:outputScript rendered="#{not empty downloadBean.downloadKey}">
                    window.location = '#{request.contextPath}/download?key=#{downloadBean.downloadKey}';
                </h:outputScript>   

                <p:commandButton outcome="homePage" ajax="false" value="Home Page"/>                                  
            </p:panel>       
        </h:form> 
```

下载Bean类

```
public class DownloadBean {

private String downloadKey; 

public void prepareDownload() throws NamingException {
    FacesContext context = FacesContext.getCurrentInstance();

    CertificadoModel certificadoModel = new CertificadoModel();
    CertificadoControlador controlador = new CertificadoControlador();      

    if ((controlador.checkUserIfExist(certificadoModel.getUsername()) == false)) 
    {
        downloadKey = UUID.randomUUID().toString();     
        context.getExternalContext().getSessionMap().put(downloadKey, certificadoModel);
        context.addMessage("mensagem", new FacesMessage(FacesMessage.SEVERITY_INFO, "Usuário cadastrado com sucesso!", "")); 
    }else {
        context.addMessage("mensagem", new FacesMessage(FacesMessage.SEVERITY_ERROR, "Um usuário com o mesmo username já está cadastrado!", ""));  
    }           
}

public String getDownloadKey() {
    return downloadKey;
} 
```

下载Servlet类

```
public class DownloadServlet extends HttpServlet {

/****/
private static final long serialVersionUID = 1L;

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) {
    String downloadKey = request.getParameter("key");
    CertificadoModel certificadoModel = (CertificadoModel) request.getSession().getAttribute(downloadKey);

    System.out.println("Teste!");

    CertificadoControlador controlador = null;
    try {
        controlador = new CertificadoControlador();
    } catch (NamingException e) {
        e.printStackTrace();
    }
    request.getSession().removeAttribute(downloadKey);

    KeyStore keyStore = null;
    try {
        keyStore = controlador.cadastrar(certificadoModel);
    } catch (KeyStoreException e) {
        e.printStackTrace();
    } catch (CADoesntExistsException e) {
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (CertificateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }  

    response.reset();
    response.setContentType("application/x-pkcs12"); 
    //response.setContentLength(contentLength); 
    response.setHeader("Content-Disposition", "attachment; filename=\"" + certificadoModel.getUsername() + ".p12" + "\""); 

    try {
        keyStore.store(response.getOutputStream(), certificadoModel.getPassword().toCharArray());
    } catch (KeyStoreException e) {
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (CertificateException e) {
        e.printStackTrace();
    } catch (IOException e) {           
        e.printStackTrace();
    }
} 
```

而在 web.xml

```
<servlet>
    <servlet-name>DownloadServlet</servlet-name>
    <servlet-class>br.com.certificado.beans.DownloadServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>DownloadServlet</servlet-name>
    <url-pattern>/download</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:21:54.550

您基本上是在尝试对 1 个 HTTP 请求返回 2 个 HTTP 响应。这显然是不可能的。

您最好的选择是有条件地`window.location`在 URL 上呈现一个 JavaScript 调用，该调用发送一个新的 HTTP 请求，返回所需的文件下载。一个简单的 servlet 是完成这项工作的一个非常好的工具。您可以使用此答案中列出的方法之一访问 servlet 中的[托管 bean：在任何 Servlet 相关类中按名称获取 JSF 托管 bean，](https://stackoverflow.com/questions/2633112/jsf-get-managed-bean-by-name/2633733#2633733)或者您可以生成唯一的会话属性键并将其作为请求参数传递。

这是使用最后一种方法的启动示例：

```
<h:form>
    ...
    <p:commandButton ... action="#{bean.prepareDownload}" update="@form" />
    <p:messages globalOnly="true" />
    <h:outputScript rendered="#{not empty bean.downloadKey}">
        window.location = '#{request.contextPath}/download?key=#{bean.downloadKey}';
    </h:outputScript>
</h:form> 
```

*（注意：`/download`必须完全匹配 servlet 的 URL 模式）*

用这个豆子：

```
private String downloadKey; // +Getter.

public void prepareDownload() {
    FacesContext context = FacesContext.getCurrentInstance();

    if (canDownload) {
        downloadKey = UUID.randomUUID.toString();
        context.getExternalContext().getSessionMap().put(downloadKey, certificadoModel);
        context.addMessage(null, infoMessage);
    } else {
        context.addMessage(null, errorMessage);
    }
} 
```

这个servlet：

```
@WebServlet("/download")
public class DownloadServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String downloadKey = request.getParameter("key");
        CertificadoModel certificadoModel = (CertificadoModel) request.getSession().getAttribute(downloadKey);
        request.getSession().removeAttribute(downloadKey);

        // ...

        response.reset();
        response.setContentType("application/x-pkcs12"); 
        response.setContentLength(contentLength); 
        response.setHeader("Content-Disposition", "attachment; filename=\"" + certificadoModel.getUsername() + ".p12" + "\""); 
        keyStore.store(response.getOutputStream(), certificadoModel.getPassword().toCharArray());
    }

} 
```

# php - 通过 ajax 导航将页面加载到 div - 几个问题

> ID：15885499
> 
> 赞同：1
> 
> 时间：2013-04-08T17:43:09.713
> 
> 标签：php, ajax, html, navigation, external

我是整个编程业务的新手，我正在尝试为自己建立一个简单的网站。

目前该网站有一个标题，一些导航链接，导航下方的临时图像（稍后会修改，与问题无关），下面我有3个内容div。主要内容 div，以及它右侧的另外两个，我打算作为我的侧边栏小部件，用于可能的 twitter 提要、广告等。

我已经设置了导航链接，以便在我的 left-col div（我的主要内容区域）中加载外部页面。Ajax 的表现非常出色，就其本身而言，它的工作方式与罐头上所说的完全一样。

问题是每个导航链接都读取 javascript:ajaxpage('pageaddress.php','left-col');

我不喜欢的几件事：

1.  当您刷新页面时，它自然会加载 index.php 内容
2.  因为网站地址在整个浏览过程中保持不变。例如，它不会更改为 /About.php。
3.  此外，这对 SEO 来说效果不佳。假设我想要单独的页面地址、标题以及不想要的东西——我会这样做。

脚本没有真正的问题，它确实可以正常工作，只是无法按照我希望的方式工作。无论如何，这里是 Ajax 脚本。

```
<script type="text/javascript">

/***********************************************
* Dynamic Ajax Content- © Dynamic Drive DHTML code library (www.dynamicdrive.com)
* This notice MUST stay intact for legal use
* Visit Dynamic Drive at http://www.dynamicdrive.com/ for full source code
***********************************************/

var bustcachevar=1 //bust potential caching of external pages after initial request?     (1=yes, 0=no)
var loadedobjects=""
var rootdomain="http://"+window.location.hostname
var bustcacheparameter=""

function ajaxpage(url, containerid){
var page_request = false
if (window.XMLHttpRequest) // if Mozilla, Safari etc
page_request = new XMLHttpRequest()
else if (window.ActiveXObject){ // if IE
try {
page_request = new ActiveXObject("Msxml2.XMLHTTP")
} 
catch (e){
try{
page_request = new ActiveXObject("Microsoft.XMLHTTP")
}
catch (e){}
}
}
else
return false
page_request.onreadystatechange=function(){
loadpage(page_request, containerid)
}
if (bustcachevar) //if bust caching of external page
bustcacheparameter=(url.indexOf("?")!=-1)? "&"+new Date().getTime() : "?"+new             Date().getTime()
page_request.open('GET', url+bustcacheparameter, true)
page_request.send(null)
}

function loadpage(page_request, containerid){
if (page_request.readyState == 4 && (page_request.status==200 ||                         window.location.href.indexOf("http")==-1))
document.getElementById(containerid).innerHTML=page_request.responseText
}

function loadobjs(){
if (!document.getElementById)
return
for (i=0; i<arguments.length; i++){
var file=arguments[i]
var fileref=""
if (loadedobjects.indexOf(file)==-1){ //Check to see if this object has not already     been added to page before proceeding
if (file.indexOf(".js")!=-1){ //If object is a js file
fileref=document.createElement('script')
fileref.setAttribute("type","text/javascript");
fileref.setAttribute("src", file);
}
else if (file.indexOf(".css")!=-1){ //If object is a css file
fileref=document.createElement("link")
fileref.setAttribute("rel", "stylesheet");
fileref.setAttribute("type", "text/css");
fileref.setAttribute("href", file);
}
}
if (fileref!=""){
document.getElementsByTagName("head").item(0).appendChild(fileref)
loadedobjects+=file+" " //Remember this object as being already added to page
}
}
}

</script> 
```

这是导航链接的示例

```
<ul id="nav">
    <li><a href="javascript:ajaxpage('design.php', 'left-col');">Design</a></li> 
```

有没有办法可以更改 Ajax 以便每个页面加载到 div 内，同时更改 url，允许我为每个页面设置不同的标题，并防止网站在刷新时加载 index.php？

如果没有，是否有人知道加载页面方法的任何其他脚本 - 并且不一定必须是 ajax - 仅在执行我想要它做的事情时（差异网址，标题等）进入 div

这是我第一次发帖，所以希望我的问题足够清楚——尽管很长——并且格式正确。

谢谢，克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:24:44.787

看看这个问题[Redirect all website traffic to PHP handler, pitfalls?](https://stackoverflow.com/questions/8870010/redirect-all-website-traffic-to-php-handler-pitfalls)

在处理程序 (index.php) 中，您可以基于 $_SERVER['REQUEST_URI'] 设置标题、内容（包含）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:52:19.290

对于简单的 Ajax 处理，您可以使用例如 jQuery。

但这并没有改变“更改网址”问题的任何内容。为此，您应该使用哈希 (#)。您的网址看起来像 index.php#about 或 ../#about。您可以在 # 之后检查该字符串并显示单个页面。

```
var hash = "default.html";
if(window.location.hash)
  hash = window.location.hash.substring(1);

switch(hash){
  case "default":
    showPage(1);
  break;
  case "news":
    showPage(2);
  break;
  // ...
} 
```

# jquery - 翻转模态 jquery 对话框禁用我的 Javascript

> ID：15885500
> 
> 赞同：2
> 
> 时间：2013-04-08T17:43:14.070
> 
> 标签：jquery, jquery-ui-dialog, flip, flippy

我尝试使用[Flippy 插件翻转 jquery 的模态对话框](https://github.com/lepixel/flippy)

这是我创建对话框的代码：

```
$(document).ready(function(){
  [...]
  $('<div class="modal-popup"><div>TEST</div></div>')
            .hide() // Hide the dialog for now so we prevent flicker
            .appendTo(document.body)
            .filter('div') // Filter for the div tag only, script tags could surface
            .dialog({ // Create the jQuery UI dialog
                create: function () {
                   $(this).parent().wrap('<div class="flip" style="border:1px solid red;position:relative;z-index:50000;" />');
                },
                title: link.data('dialog-title'),
                dialogClass: "dialog_shadow",
                modal: true,
                resizable: false,
                draggable: true,
                show: { effect: 'fade', duration: 250 },
                hide: { effect: 'fade', duration: 400 },
                width: 'auto',
                beforeClose: function () {
                    resetForm($(this).find('form'));
                    $('input[type=submit]').css('cursor', 'hand');
                }                       
            })
            .end();
   }); 
```

当对话框出现并单击链接时，我翻转对话框并使用以下代码显示相同的内容：

```
 $('.popCallActionRegister > a').click(function (e) {
                    e.preventDefault();

                    var content = $('div.flip').html(); // ModalDialog -> div.ui-dialog all html

                    $('div.flip').flippy({
                        verso: content,
                        direction: "LEFT",
                        duration: "250"
                    });
                }); 
```

效果很好，但是我的内容中丢失了所有 Javascript，我无法拖动对话框。调用 ajax 在我的新翻转内容中不起作用

我怎样才能让我的javascript保持活跃？因为它是相同的内容，我只是做一个翻转......就是这样。

# 更新 ：

## [在这里](http://jsfiddle.net/FqQ8S/1/)jsFiddle

该解决方案整合了以下命题

任何帮助将不胜感激 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T01:41:34.357

jQuery 事件只能附加到现有元素。我对你的 html 是什么以及你想要实现什么做了一些假设，所以我可能是错的，但是当你这样做时：

```
var content = $('div.flip').html(); 
```

您正在复制 div 的内容，而不是附加到它的事件。所以它不是“禁用你的javascript”，你只是在创建没有附加事件的新元素。所以试试这个：

```
var content = $('div.flip').clone(true, true); 
```

那应该复制元素和所有事件，但同样，由于我不知道翻转插件的幕后发生了什么，它可能不起作用。

如果您没有使用 jQuery UI 的模式，我会告诉您使用 jQuery 中的 .on() 附加事件，或者使用翻转插件中的 onReverseFinish 回调重新附加所有事件。

* * *

**编辑 1**

好的，我查看了 Flippy 插件，它的工作方式与 jQuery UI 对话框相冲突，我无法在不编辑插件源代码的情况下让它们一起工作。Flippy 将容器的 Y 轴设置为 90 度，通过删除容器内的内容并替换为您作为“verso”参数提供的任何内容来交换内容，并将其设置为 0。问题是当对话框元素被删除时， jQuery UI 运行一个方法来清除对对话框小部件的所有引用（您可以看到甚至覆盖消失了）。

我的建议是找到一个更灵活的插件，或者编辑你正在使用的插件。与其删除翻转框的内容，不如将您的内容拆分为两个子容器，而不仅仅是切换它们的显示属性。例如，拆分您的内容：

```
<div class="flipbox">
    <div class="ui-dialog whatever">
        <div class="toggle_me">Content 1 - front</div>
        <div class="toggle_me" style="display:none;">Content 2 - back</div>
    </div>
</div> 
```

找到插件的这一部分：

```
this.jO.empty().append(this._Verso); 
```

并将其更改为以下内容：

```
this.jO.find('.toggle_me').toggle(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T16:29:01.963

看我的例子：[http ://codepen.io/jdnicholsc/pen/IcDge](http://codepen.io/jdnichollsc/pen/IcDge)

快乐编码

# php - 将元描述动态插入到 php 页面中

> ID：15885503
> 
> 赞同：2
> 
> 时间：2013-04-08T17:43:30.187
> 
> 标签：php

好的，所以我创建了这个网站并想将其转换为 php 只是为了好玩。网站结构看起来像任何“正常”的网络结构。像这样：-

```
<html xmlns="http://www.w3.org/1999/xhtml">

 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    </head>

<body class="fish">
</body>
</html> 
```

好的，所以我在文件中包含从`head`正文标记的开头到开头。`header.php`所以 header.php 看起来像这样：-`

```
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
    </head>

<body class="fish">` 
```

现在这是问题所在。每个页面都应该有它自己的`title`类`body`！并且每个页面显然也会有它自己的元描述和内容。我将如何完成这些家伙？我正在考虑创建一个基于页面标题的元描述和正文类的函数。但是有没有更聪明的方法来实现这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:53:52.467

要么使用模板引擎，要么使用已经包含模板引擎的 MVC 框架（例如 CakePHP 或 CodeIgniter）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:50:54.080

在你里面`header.php`做这样的事情：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title><?php echo $_tpl['title'] ?></title>
    <meta name="description" content="<?php echo $_tpl['meta_desc'] ?>">
</head>

<body class="<?php echo $_tpl['body_class'] ?>"> 
```

在您的页面上，在使用之前`include('header.php')`，请按如下方式定义变量：

```
$_tpl = array();
$_tpl['title'] = 'My Title';
$_tpl['meta_desc'] = 'My meta description.';
$_tpl['body_class'] = 'fish'; 
```

正如其他人所说，不要重新发明轮子。您最好调查一些已经建立的 PHP 模板引擎：

*   [聪明的](http://www.smarty.net/)
*   [雨TPL](http://www.raintpl.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:52:26.883

如果它是动态的，您应该创建一个模板来执行此操作。对于如何传递数据，您有很多选择，无论是数据库、对象、数组等。根据页面标题生成数据非常困难，除非您使用非常持久的标题格式每一页。

```
<head>
    <meta property="og:title" content="<?= $values['title'] ?>" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="<?= $values['url'] ?>" />
    <meta property="og:image" content="<?= $values['image'] ?>/>
    <meta property="og:site_name" content="<?= values['name'] ?>"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="ROBOTS" content="NOODP">
    <link rel="icon" type="image/png" href="<?= $values['image'] ?>" />
    <title><?= $values['title'] ?></title>
    <? if(isset($values['css'])) : ?>
    <? foreach($values['css'] as $css) : ?>
        <link href="/css<?= $css['data'] ?>" rel="stylesheet" type="text/css" />
    <? endforeach ?>
    <? endif ?>
    <? if(isset($values['js'])) : ?>
    <? foreach($values['js'] as $js) : ?>
        <script src="/js<?= $js['data'] ?>" type="text/javascript"></script>
    <? endforeach ?>
    <? endif ?>
</head> 
```

# javascript - 如何正确比较 MM-dd-yyyy 字符串中的年份？

> ID：15885504
> 
> 赞同：2
> 
> 时间：2013-04-08T17:43:36.290
> 
> 标签：javascript, dhtmlx, datejs

我正在使用 date.js 将条件格式应用于数据网格。数据是从 javascript 数组中解析的。我的所有条件都正常工作，除了这个：

if (val < 今天 && val > '01-01-2000')

val 是 MM-dd-yyyy 格式的字符串，我无法更改。所以我使用 date.js 将今天的日期转换为 MM-dd-yyyy 格式的字符串并进行比较。问题是 01-17-2014 被视为小于 04-08-2013 - 因为它正在比较字符串。

解决这个问题的最佳方法是什么？

我想让它变得简单，这就是我首先转换为字符串的原因，但我不确定如何解决年度问题。

谢谢你的帮助！

```
var today = new Date.today().toString("MM-dd-yyyy");
var tomorrow = new Date.today().addDays(1).toString("MM-dd-yyyy");
var upcoming = new Date.today().addDays(7).toString("MM-dd-yyyy");

function eXcell_edncl(cell) {
    this.base = eXcell_edn;
    this.base(cell);
    this.setValue = function(val) {
        if (val.indexOf('ACT') >= 0) this.cell.style.backgroundColor="lightgreen";
        else if (val.indexOf('PV') >= 0) this.cell.style.backgroundColor="lightgreen", this.cell.style.fontSize="20px";
        else if (val.indexOf('YES') >= 0) this.cell.style.backgroundColor="lightgreen", this.cell.style.fontSize="20px";
        else if (val < today && val > '01-01-2000') this.cell.style.backgroundColor="red";
        else if (val == today) this.cell.style.backgroundColor="orange";
        else if (val == tomorrow) this.cell.style.backgroundColor="yellow";
        else if (val > tomorrow && val <= upcoming) this.cell.style.backgroundColor="lightyellow";
        else this.cell.style.backgroundColor="";
        this.cell.innerHTML = this.grid._aplNF(val, this.cell._cellIndex);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:23:23.947

解决此问题的最佳方法是不要将 Date 对象转换为字符串。`"01-17-2014" < "04-08-2013"`评估为真，因为`"01" < "04"`它是真的，所以任何附加到这些字符串上的东西总是会以相同的方式进行评估。但是，在 Date 对象上使用小于/大于运算符将按预期运行。因此，您可以将现有的 if 语句修改为

```
if (new Date(val) < new Date(today) && new Date(val) > new Date('01-01-2000')) 
```

这将解决您的问题，但您最好使用 Date 对象开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:02:23.067

由于您使用的是 date.js，因此您可以使用它的比较功能，如[文档](https://code.google.com/p/datejs/wiki/APIDocumentation)中所述：

> Date.compare（日期 date1，日期 date2）：数字
> 
> 比较第一个日期和第二个日期并返回它们相对值的数字指示。-1 = 这是小于日期。0 = 值相等。1 = 这大于日期。

有关代码示例，请参阅文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:10:18.693

您可能无法在 UI 中更改日期字符串的格式，但后端的格式无关紧要。您应该更改代码以使用[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)，该标准旨在允许以字符串格式进行轻松比较（以及其他优点）。

然后，您的日期格式`yyyy-MM-dd`将允许您将它们作为字符串进行比较。

而且因为它是相关的，如果你还在犹豫，请查看[这部 XKCD 漫画。](http://xkcd.com/1179/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T21:25:43.857

结束了以下工作。需要解析传入的值：

```
var today = new Date.today().toString("MM-dd-yyyy");
var today2 = new Date.today();
var old = new Date(2000, 0, 1);
var tomorrow = new Date.today().addDays(1).toString("MM-dd-yyyy");
var upcoming = new Date.today().addDays(7).toString("MM-dd-yyyy");

function eXcell_edncl(cell) {
    this.base = eXcell_edn;
    this.base(cell);
    this.setValue = function(val) {
        var val2 = new Date.parse(val);
        if (val.indexOf('ACT') >= 0) this.cell.style.backgroundColor="lightgreen";
        else if (val.indexOf('PV') >= 0) this.cell.style.backgroundColor="lightgreen", this.cell.style.fontSize="20px";
        else if (val.indexOf('YES') >= 0) this.cell.style.backgroundColor="lightgreen", this.cell.style.fontSize="20px";
        else if (val2 < today2 && val2 > old) this.cell.style.backgroundColor="red";
        else if (val == today) this.cell.style.backgroundColor="orange";
        else if (val == tomorrow) this.cell.style.backgroundColor="yellow";
        else if (val > tomorrow && val <= upcoming) this.cell.style.backgroundColor="lightyellow";
        else this.cell.style.backgroundColor="";
        this.cell.innerHTML = this.grid._aplNF(val, this.cell._cellIndex);
    }
} 
```

# ajax - Ajax 加载程序冻结

> ID：15885509
> 
> 赞同：0
> 
> 时间：2013-04-08T17:43:46.967
> 
> 标签：ajax, jquery

我的 ajax 加载程序冻结浏览器并引发 JavaScript 错误（停止脚本或继续）。我尝试将异步更改为真/假，但没有运气。我正在创建成功的 div 表。

```
$.ajax({
          type: "POST",
          url: "getschedules",
          data: '{"StartingDate": "' + startdate + '", "EndingDate": "' + enddate + '"}',                   
          contentType: "application/json; charset=utf-8",
          async: true,
          dataType: "json"
          }).done(function (response) {
          adc.createTable(response);
          }).fail(function () {
          })
        } 
```

# mysql - MySQL：如何检索数字数据类型支持的最大值？

> ID：15885510
> 
> 赞同：0
> 
> 时间：2013-04-08T17:44:03.440
> 
> 标签：mysql

除了使用 MySQL 的`DESCRIBE`语法和解析`Type`列之外，有没有办法以编程方式确定可以存储在给定`INT`列及其变体中的最大整数是多少？（例如`TINYINT`,`MEDIUMINT`等）我只是存储一个硬编码表，除了我的列使用自定义长度，如`TINYINT(2)`和`MEDIUMINT(5)`。

我问是因为我正在考虑编写一个 cron 作业，以在我的各种基于整数的自动递增 ID 列接近其最大值时警告我，这样我就可以降低整数溢出的风险。

**编辑**

我看到这是一个愚蠢的问题。正如向我指出的那样，自定义长度不会影响这些列可以存储的最大整数值。因此，如果我想编写脚本，我可以硬编码 MySQL 手册中给出的最大整数大小。至于这个脚本是否是处理事情的最佳方式，这是值得商榷的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:21:18.593

自定义长度不会影响最大值，对于 INT，它们只是视觉输出/显示值的提示，并且仅在使用自动填充前导零时使用。

请参阅：[https](https://stackoverflow.com/a/6817537/330315) ://stackoverflow.com/a/6817537/330315 和这里：[https ://stackoverflow.com/a/5634151/330315 和这里：](https://stackoverflow.com/a/5634151/330315) [https](https://stackoverflow.com/a/4432037/330315) : //stackoverflow.com/a/4432037/330315和这里：[https](https://stackoverflow.com/a/7048597/330315) ://stackoverflow.com/a/7048597/330315（tnx 到 a_horse_with_no_name 一次给我这些链接。）

# facebook - 搜索朋友分享的 YouTube 链接

> ID：15885517
> 
> 赞同：0
> 
> 时间：2013-04-08T17:44:23.640
> 
> 标签：facebook, facebook-graph-api, web-applications, youtube-api, facebook-javascript-sdk

我正在尝试获取朋友分享的所有 YouTube 视频的列表。

到目前为止，请求 /me/home?q=youtube.com 确实返回了所有 youtube.com 链接。显然 API 发生了变化，现在它似乎只返回消息正文中包含“youtube.com”的链接。

有没有办法检索某个域的所有共享链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:23:41.503

你必须知道的第一件事是如何获得你想要的过滤键，

```
SELECT filter_key,name FROM stream_filter WHERE uid = me() 
```

您可以参考[https://developers.facebook.com/docs/reference/fql/stream_filter](https://developers.facebook.com/docs/reference/fql/stream_filter)了解更多详情。

输出的示例部分是：

```
{
  "data": [
    {
      "filter_key": "nf", 
      "name": "News Feed"
    }, 
    {
      "filter_key": "app_2309869772", 
      "name": "Links"
    }, 
```

假设您获得了链接 filter_key，然后打开[https://www.facebook.com/home.php?filter=app_2309869772](https://www.facebook.com/home.php?filter=app_2309869772)，主页仅显示所有“链接”类型的帖子。

**youtube 的视频分享主要有两种类型：**

**第一个**是直接使用 youtube 网站的分享按钮分享，您需要 ' **nf** ' 作为 filter_key。然后您需要按**app_id**过滤，即“ **87741124305** ”（您可以参考[http://graph.facebook.com/87741124305](http://graph.facebook.com/87741124305)）。如果您担心应用程序 ID 可能会在未来发生变化，您可以改为通过**attribution='Youtube'**进行过滤。

**第二个**是用户复制 youtube 链接并粘贴到墙上。这种帖子可能会显示为“nf”类型。但是，似乎 youtube 链接很可能不会显示为“nf”类型。因此，您需要 filter_key " **app_2309869772** "(Links) 来获取这些帖子。当然，我们想要的链接只是 youtube 视频，所以我们使用**attachment.caption='www.youtube.com'进行过滤**

因此，我们在单个 fql 查询中组合了两个 filter_key（News Feed 和 Links），例如：

```
SELECT action_links,actor_id,app_data,app_id,attachment,attribution,claim_count,comment_info,created_time,description,description_tags,expiration_timestamp,feed_targeting,filter_key,impressions,is_exportable,is_hidden,is_published,likes,message,message_tags,parent_post_id,permalink,place,post_id,privacy,scheduled_publish_time,share_count,source_id,subscribed,tagged_ids,target_id,targeting,timeline_visibility,type,updated_time,via_id,viewer_id,with_location,with_tags,xid FROM stream WHERE post_id IN (SELECT post_id FROM stream WHERE filter_key in(SELECT filter_key FROM stream_filter WHERE uid=me() AND name='Links') AND attachment.caption='www.youtube.com' AND created_time<=now() LIMIT 150) OR post_id IN(SELECT post_id FROM stream WHERE filter_key in(SELECT filter_key FROM stream_filter WHERE uid=me() AND name='News Feed') AND app_id='87741124305' AND created_time<=now() LIMIT 150) ORDER BY created_time DESC 
```

（您可以根据需要编辑链接，如果您不使用此信息，则不会放置**action_links ）**

[使用https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)测试的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/6bCQw.png)

对于这个例子，我每页使用 150 个项目（我使用大数字，因为 youtube 视频的实际帖子总数并不多）。您可以尝试通过减少 created_time 来获取下一页，但是，这并不能保证每个页面都至少有一个帖子。

引用后的链接（将您的访问令牌放在末尾）将是：

[https://graph.facebook.com/fql?format=json&q=SELECT+action_links%2Cactor_id%2Capp_data%2Capp_id%2Cattachment%2Cattribution%2Cclaim_count%2Ccomment_info%2Ccreated_time%2Cdescription%2Cdescription_tags%2Cexpiration_timestamp%2Cfeed_targeting%2Cfilter_key%2Cimpressions%2Cis_exportable% 2Cis_hidden%2Cis_published%2Clikes%2Cmessage%2Cmessage_tags%2Cparent_post_id%2Cpermalink%2Cplace%2Cpost_id%2Cprivacy%2Cscheduled_publish_time%2Cshare_count%2Csource_id%2Csubscribed%2Ctagged_ids%2Ctarget_id%2Ctargeting%2Ctimeline_visibility%2Ctype%2Cupdated_time%2Cvia_id%2Cviewer_id%2Cwith_location%2Cwith_tags%2Cxid+ FROM+stream+WHERE+post_id+IN+%28SELECT+post_id+FROM+stream+WHERE+filter_key+in%28SELECT+filter_key+FROM+stream_filter+WHERE+uid%3Dme%28%29+AND+name%3D%27Links% 27%29+AND+attachment.caption%3D%27www.youtube。com%27+AND+created_time%3C%3Dnow%28%29+LIMIT+150%29+OR+post_id+IN%28SELECT+post_id+FROM+stream+WHERE+filter_key+in%28SELECT+filter_key+FROM+stream_filter+ WHERE+uid%3Dme%28%29+AND+name%3D%27News+Feed%27%29+AND+app_id%3D%2787741124305%27+AND+created_time%3C%3Dnow%28%29+LIMIT+150% 29+ORDER+BY+created_time+DESC&access_token=](https://graph.facebook.com/fql?format=json&q=SELECT+action_links%2Cactor_id%2Capp_data%2Capp_id%2Cattachment%2Cattribution%2Cclaim_count%2Ccomment_info%2Ccreated_time%2Cdescription%2Cdescription_tags%2Cexpiration_timestamp%2Cfeed_targeting%2Cfilter_key%2Cimpressions%2Cis_exportable%2Cis_hidden%2Cis_published%2Clikes%2Cmessage%2Cmessage_tags%2Cparent_post_id%2Cpermalink%2Cplace%2Cpost_id%2Cprivacy%2Cscheduled_publish_time%2Cshare_count%2Csource_id%2Csubscribed%2Ctagged_ids%2Ctarget_id%2Ctargeting%2Ctimeline_visibility%2Ctype%2Cupdated_time%2Cvia_id%2Cviewer_id%2Cwith_location%2Cwith_tags%2Cxid+FROM+stream+WHERE+post_id+IN+%28SELECT+post_id+FROM+stream+WHERE+filter_key+in%28SELECT+filter_key+FROM+stream_filter+WHERE+uid%3Dme%28%29+AND+name%3D%27Links%27%29+AND+attachment.caption%3D%27www.youtube.com%27+AND+created_time%3C%3Dnow%28%29+LIMIT+150%29+OR+post_id+IN%28SELECT+post_id+FROM+stream+WHERE+filter_key+in%28SELECT+filter_key+FROM+stream_filter+WHERE+uid%3Dme%28%29+AND+name%3D%27News+Feed%27%29+AND+app_id%3D%2787741124305%27+AND+created_time%3C%3Dnow%28%29+LIMIT+150%29+ORDER+BY+created_time+DESC&access_token=)

干杯

# c# - 日期月份未正确显示

> ID：15885522
> 
> 赞同：1
> 
> 时间：2013-04-08T17:44:30.783
> 
> 标签：c#, date

为什么是

```
 string date = string.Format("{0:mmddyyHHmmss}",
    DateTime.Now); 
```

给我420813104204

不应该是 040813... 吗？

我正在尝试匹配 mmddyyHHmmSS

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:45:27.513

您需要使用`MM`for month not `mm`， mm 是分钟而不是几个月。

```
 string date = string.Format("{0:MMddyyHHmmss}", 
```

[**您可以在此处**](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)找到有关格式的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T17:46:45.120

试试这个

```
string date = string.Format("{0:MMddyyHHmmss}", DateTime.Now); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T17:46:24.573

```
string date = string.Format("{0:MMddyyHHmmss}", DateTime.Now); 
```

会给你所需的格式。

查看[此链接](http://www.csharp-examples.net/string-format-datetime/)以供参考

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:46:02.057

那是因为`mm`是一分钟而不是几个月，您需要使用`MM`. 您可以在[此处查看自定义日期时间字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)的定义。

```
string date = string.Format("{0:MMddyyHHmmss}", 
```

此外，我通常不使用`string.Format`对象`DateTime`，因为在跨不同文化解析对象时，我发现了一些异常情况。对我来说，利用对象`ToString`上的方法`DateTime`一直更可靠。这只是我所看到的——也可能是我对`string.Format`. 我希望我现在可以建立一个例子，但我什至不记得这些异常现在是什么——我只记得有问题所以我换了。

# java - 对象的向量/数组列表到 JList？- 爪哇

> ID：15885523
> 
> 赞同：0
> 
> 时间：2013-04-08T17:44:35.897
> 
> 标签：java, swing, jlist

我的代码遇到了一个我以前没有遇到过的问题，而且似乎无法修复。基本上，我正在尝试创建一个 GUI 应用程序，它允许用户搜索名称（例如“Ryan”）并将搜索 CSV 文件，将结果显示到 JScrollPane(JList)。下面是我到目前为止的代码，如图所示，它通过重复 Vector 的最后一个元素 n 次来填充列表（这是错误的，Vector 中的每个元素都应该打印一次）...

主要代码：

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.io.*;
import java.util.*;

public class SeatingChart extends JPanel implements MouseListener {

static JLabel search = new JLabel("Search for: ");
static JTextField se = new JTextField("Cap 1st Letter Of Name", 15);
static JButton submit = new JButton("submit");

Vector<Employee> employees = new Vector<Employee>(5, 1); //Works fine with Vector< String >
JList results = new JList(employees); 
JScrollPane display = new JScrollPane(results);

public SeatingChart()
{
    JPanel panel = new JPanel();
    panel.setLayout(new BorderLayout());

    //Add things to Panels
    JPanel north = new JPanel();
    north.add(search);
    north.add(se);
    north.add(submit);

    JPanel west = new JPanel();
    west.add(display);

    //Add panels to Frame
    panel.add(north, BorderLayout.NORTH);
    panel.add(west, BorderLayout.WEST);

    add(panel);

    // Register listeners
    submit.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e) {
        search(se.getText()); //call search and sort method
        results.setListData(employees);
      }});
    results.addMouseListener(this);
    addMouseListener(this);

} //end constructor

public void search(String s)
{
    try{
        BufferedReader CSVFile = new BufferedReader(new FileReader("ADexport.csv"));
        String dataRow = CSVFile.readLine(); // Read first line.  

        // The while checks to see if the file is empty 
        while (dataRow != null) 
        {
            if(dataRow.contains(s)) { //Line by line
                String[] dataArray = dataRow.split(",");
                employees.addElement(new Employee(dataArray[0], dataArray[1], dataArray[2], dataArray[3])); //Add .toString() if Vector< String >
            } //end if
            dataRow = CSVFile.readLine(); /*Read next line*/
        }

        CSVFile.close();
    }
    catch (Exception e)
    {
        System.out.println("Unexpected error.");
        System.out.println("Error: " + e);
    }
} //end search method

public void mouseClicked(MouseEvent arg0) {
    int index = results.getSelectedIndex();
    Employee selected = (Employee) results.getSelectedValue();

    System.out.println("Clicked! " + index);
} 
```

员工等级：

```
import java.util.Vector;

public class Employee {
public static String name;
public static String type;
public static String pos;
public static String ex;

public Employee(String n, String t, String p, String e)
{
    name = n;
    type = t;
    pos = p;
    ex = e;
}

public String toString()
{
    return this.name + " " + this.ex;
}

public String getName()
{
    return this.name;
}

public String getex()
{
    return this.ex;
}
} 
```

这是我一直在使用的 CSV 文件中的信息：

```
Name    Type    Description Office
Ryan Cole   User    Manager Ext. 115
Ryan Ketricks   User    Staff   Ext. 116
Ryan James  User    Senior  Ext. 117
Luke Alexander  User    Staff   Ext. 118
Michael Kale    User    Senior  Ext. 119
Alyssa Win  User    Staff   Ext. 120
Kayla Bofort    User    Partner Ext. 121 
```

问题是，当我使用 Vector < String > 时，一切正常，但我无法从 String 转换为 Employee。无论如何，我想保留 Employee 类型，因为我想在触发 MouseEvent 时再次使用该信息。本质上，我想知道为什么它适用于 String 而不是 Employee，以及如何解决。

# javascript - .splice() 没有完全缩短我的数组

> ID：15885525
> 
> 赞同：1
> 
> 时间：2013-04-08T17:44:43.083
> 
> 标签：javascript, arrays, splice

我有一个带有字符串的数组，如果字符串中没有写入任何内容，我想将其从数组中删除`.splice()`。

不知何故，它不会得到所有空条目。如果一开始有 2 个空条目，它只会得到一个。

这是我的[**小提琴**](http://jsfiddle.net/JKcCU/)和代码：

```
stringArray = ["", "", "Banana"];

console.log('before stringArray.length: ' + stringArray.length);

for (var i = 0; i < stringArray.length; i++) {
    if (stringArray[i] === "") {
        stringArray.splice(i, 1);
        if (i > 0) i--;
    }
}

console.log('after stringArray.length: ' + stringArray.length); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T17:46:39.463

你必须向后循环，因为每次你`splice`，长度和索引都会改变：

```
for (var i = stringArray.length-1; i>=0; i--) {
    if(stringArray[i] === ""){
        stringArray.splice(i, 1);   
    }
} 
```

替代解决方案[`Array.prototype.filter`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Array/filter)（文档页面为不支持此方法的旧浏览器提供了一个 shim）：

```
stringArray = [ "","","Banana"]; 
var a = stringArray.filter(function(item) {
   return item !== '';
});
console.log(a); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:58:29.613

另一种选择，当然是向后循环，是`while`循环：

```
var stringArray = ["", "", "", "Apple", "", "", "Banana", "", "", ""];

var i = stringArray.length;
while (i-- && (stringArray[i] !== "" || stringArray.splice(i, 1)));

console.log(stringArray);    // ["Apple", "Banana"] 
```

**演示：http:** [//jsfiddle.net/VEmAV/](http://jsfiddle.net/VEmAV/)

# jquery - jQuery Cycle2 – 覆盖大小以匹配幻灯片的图像大小

> ID：15885531
> 
> 赞同：0
> 
> 时间：2013-04-08T17:44:58.897
> 
> 标签：jquery, css, responsive-design, jquery-cycle

我正在尝试使用 jQuery 在 Cycle2 幻灯片中获取当前幻灯片的图像大小。

这样我就可以设置`.overlay`出现在 .hover() 上的覆盖 div () 的大小。正如您将在此[小提琴](http://jsfiddle.net/approach/76uJm/3/)中看到的，它仅从第一张图像中获取大小。图像也会响应，因此`.overlay`还需要根据任何窗口调整大小来更新它的大小。

这是[小提琴](http://jsfiddle.net/approach/76uJm/3/)链接，以及完整的代码：

```
var imgwidth = $('.cycle-slide img').width();
var imgheight = $('.cycle-slide img').height();

$('.cycle-slide').hover(function () {        
    $('.overlay', this).css('width', imgwidth).css('height', imgheight).fadeIn();
    }, function() {
    $('.overlay', this).fadeOut();
}); 
```

如何才能`.overlay`匹配每张幻灯片的图像大小？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:22:37.070

您可能应该挂钩`cycle-after`事件以设置宽度。类似于以下内容：

```
$('.cycle-slideshow').on('cycle-after', function(event, optionHash, outgoingSlideEl, incomingSlideEl, forwardFlag) {
    $('.overlay', this).css({'width':$('img',incomingSlideEl).css('width'), 'height': $('img',incomingSlideEl).css('height')});
});

$('.cycle-slide').hover(function () {        
    $('.overlay', this).show();
    }, function() {
    $('.overlay', this).fadeOut();
}); 
```

您唯一需要做的就是在事件之外设置第一个叠加层的宽度和高度，因为我认为它不会在第一张幻灯片上触发。

# php - wp下拉类别选择值

> ID：15885532
> 
> 赞同：1
> 
> 时间：2013-04-08T17:45:10.147
> 
> 标签：php, wordpress

我正在编写一个 shorcode API 函数。我想从 中保存选定的值`wp_dropdown_categories`以在`wp_query`.

```
echo `<form action="" method="POST">`;
  $values = array(
    `orderby` => `name`, 
    `order` => `ASC`,
    `echo` => 1,
    `selected` => $kat = get_query_var( `cat` ),
    `name` => 'cat',
    `id` => ``,
    `taxonomy` => `persons`
  );
  wp_dropdown_categories( $values );
 echo `<input type="submit" name="submit" value="view" />;
echo `</form>`; 
```

我想使用选定的值在自定义分类中进行搜索

```
$args = array(
  `post_type` => `client`,
  `persons` => `here selected value from wp_dropdown_categories`
);
$my_query = new WP_Query( $args );

if( $my_query->have_posts() ) {
  echo `Name: `;
  while ($my_query->have_posts()) : $my_query->the_post();
  echo the_title();
  endwhile;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:29:13.403

尝试跟随...

```
<select name="category_list"> 
 <option value="">Please Select</option> 
 <?php 
    $values = array(
      `orderby` => `name`, 
      `order` => `ASC`,
      `echo` => 1,
      `selected` => $kat = get_query_var( `cat` ),
      `name` => 'cat',
      `id` => ``,
      `taxonomy` => `persons`
     );
  $categories = get_categories($values); 
  foreach ($categories as $category) {
    $option = '<option value="'.$category->name.'">';
    $option .= $category->cat_name;
    $option .= '</option>';
    echo $option;
  }
 ?>
</select> 
```

参考：[http ://codex.wordpress.org/Function_Reference/get_categories](http://codex.wordpress.org/Function_Reference/get_categories)

# c# - 遍历所有选中的复选框

> ID：15885534
> 
> 赞同：0
> 
> 时间：2013-04-08T17:45:23.310
> 
> 标签：c#, asp.net, html, checkbox, foreach

我希望有人能指出我正确的方向。我有两个网页，第一页在表单中有许多复选框，并发布到第二页。有没有办法将选中的复选框的所有值传递到第二页，以便我可以找出选中的复选框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:53:08.433

当然，您可以在`POST`. 我建议将这些复选框放入`<form>`第一个表单的标签中，然后当您进入第二个表单时，您可以使用第二个表单中的类似`POST`方法提取这些值：`FormCollection``Load`

```
var element_name_value = Request.Form["element_name"].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:56:09.263

在会话变量或 cookie 中从第一页设置复选框值，在第二页中您可以轻松捕获它。要在第 1 页中设置所有复选框值，您只需像这样循环：

```
foreach (Control ctl in form1.Controls)
 {
            if (ctl is CheckBox)
            {
                //check for checked or not and set a value in session or cookies.
            }
 } 
```

或使用`id`

```
form1.FindControl("id"); 
```

# mysql - MYSQL - 表 1 和表 2 中所有可能性的所有行

> ID：15885541
> 
> 赞同：3
> 
> 时间：2013-04-08T17:45:49.140
> 
> 标签：mysql, join

表用户

```
id, name
1, Jay Bob
2, An Other 
```

表格页

```
id, name, html
1, 'Welcome', 'Welcome to this page'
2, 'Goodbye', 'Thanks for visiting' 
```

表 user_pages ** 存储用户特定版本的页面 **

```
user_id, page_id, html
1,        1,      'User id 1 Welcome page' 
```

我基本上需要一个查询，它将返回以下数据集——即使没有数据存在，每种可能性都有一行。

数据集

```
user_id, page_id, html
1,        1,      'User is 1 Welcome page'
1,        2,      ''
2,        1,      ''
2,        2,      '' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:54:41.737

我认为最清晰的方法是使用子查询并`cross join`创建驱动程序表：

```
select driver.user_id, driver.page_id, up.html
from (select u.id as user_id, p.id as page_id
      from users u cross join
           pages p
     ) driver left outer join
     user_pages up
     on up.user_id = driver.user_id and up.page_id = driver.page_id; 
```

重要的是子句中的`user_id`and来自驱动程序表而不是来自驱动程序表，因为后者可能是。`page_id``select``user_pages``NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:44:09.907

下面的代码在 MySQL Server 5.6 上进行了测试，
我希望/假设您的意图接近以下内容：

```
USE test;

CREATE TABLE users (
id INT UNSIGNED PRIMARY KEY NOT NULL AUTO_INCREMENT,
name VARCHAR(80) NOT NULL);

CREATE TABLE pages (
id INT UNSIGNED PRIMARY KEY NOT NULL AUTO_INCREMENT,
name VARCHAR(40) NOT NULL,
html VARCHAR(100) NOT NULL);

CREATE TABLE user_pages (
user_id INT UNSIGNED NOT NULL,
page_id INT UNSIGNED NOT NULL,
html VARCHAR(50) DEFAULT '',
PRIMARY KEY (user_id, page_id));

INSERT users (`name`) VALUES
  ('User 1'), ('User 2'), ('User 3');

INSERT pages (`name`, `html`) VALUES
  ('Welcome','Welcome to this page'),
  ('Goodbye','Thanks for visiting');

INSERT user_pages (user_id, page_id, html) VALUES
  (1,1,"First user's welcome page"),
  (1,2,"First user's goodbye page"),
  (2,1,"Second user's welcome page");

SELECT DISTINCT
  u.id  AS `u_id`,
  u.`name` AS `u_name`,
  IFNULL(x.page_id, p.id)  AS `p_id`,
  IFNULL(p.`name`,'') AS `p_name`,
  IFNULL(x.html,p.html) AS `p_html`
FROM users AS u
CROSS JOIN pages AS p
LEFT OUTER JOIN user_pages AS x
  ON (x.user_id = u.id AND x.page_id = p.id); 
```

上面的代码应返回每个用户的特定（如果存在）或一般页面。您还可以创建一个视图，并从中查询，就好像它是一个普通表一样：

```
CREATE OR REPLACE VIEW `user_page_details` AS
SELECT DISTINCT
  u.id  AS `u_id`,
  u.`name` AS `u_name`,
  IFNULL(x.page_id, p.id)  AS `p_id`,
  IFNULL(p.`name`,'') AS `p_name`,
  IFNULL(x.html,p.html) AS `p_html`
FROM users AS u
CROSS JOIN pages AS p
LEFT OUTER JOIN user_pages AS x
  ON (x.user_id = u.id AND x.page_id = p.id); 
```

完成后，您的查询将非常简单：

```
SELECT * FROM user_page_details; 
```

甚至

```
SELECT * FROM user_page_details WHERE u_id = 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:51:19.873

试试这个：

```
SELECT up.user_id, up.page_id, up.html
FROM users u,pages p
LEFT OUTER JOIN user_pages up ON u.id=up.user_id AND p.id=up.user_id 
```

# go - Go - 如何将二进制字符串作为文本转换为二进制字节？

> ID：15885542
> 
> 赞同：1
> 
> 时间：2013-04-08T17:45:54.260
> 
> 标签：go, type-conversion

我有一个带有 s 的**文本**转储文件，`string`如下所示：

```
x\x9cK\xb42\xb5\xaa.\xb6\xb2\xb0R\xcaK-\x09J\xccKOU 
```

我需要将它们转换为`[]byte`.

有人可以建议如何在 Go 中做到这一点吗？等效的
是。`python``decode('string_escape')`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:21:08.567

这是一种方法。请注意，这不是对 python`string_escape`格式的完整解码，但考虑到您给出的示例，可能就足够了。

[游乐场链接](http://play.golang.org/p/MTjQ97_-bl)

```
package main

import (
    "fmt"
    "log"
    "regexp"
    "strconv"
)

func main() {
    b := []byte(`x\x9cK\xb42\xb5\xaa.\xb6\xb2\xb0R\xcaK-\x09J\xccKOU`)
    re := regexp.MustCompile(`\\x([0-9a-fA-F]{2})`)
    r := re.ReplaceAllFunc(b, func(in []byte) []byte {
        i, err := strconv.ParseInt(string(in[2:]), 16, 64)
        if err != nil {
            log.Fatalf("Failed to convert hex: %s", err)
        }
        return []byte{byte(i)}
    })
    fmt.Println(r)
    fmt.Println(string(r))
} 
```

我确实有使用`json`解码器的想法，但不幸的是它不理解`\xYY`语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T18:50:02.193

以下是您可能会如何编写一个小解析器（如果您将来需要支持其他 esc 的东西）：

```
import (
    "fmt"
    "encoding/hex"
)

func decode(bs string) ([]byte,error) {
    in := []byte(bs)
    res := make([]byte,0)
    esc := false
    for i := 0; i<len(in); i++ {
        switch {
        case in[i] == '\\':
            esc = true
            continue
        case esc:
            switch {
            case in[i] == 'x':
                b,err := hex.DecodeString(string(in[i+1:i+3]))
                if err != nil {
                    return nil,err
                }
                res = append(res, b...)
                i = i+2
            default:
                res = append(res, in[i])
            }
            esc = false
        default:
            res = append(res, in[i])
        }
    }
    return res,nil

} 
```

[操场](http://play.golang.org/p/24A3F8Vv6q)

# java - 杰克逊意外字符（'h'（代码 104））：预期有效值

> ID：15885544
> 
> 赞同：9
> 
> 时间：2013-04-08T17:45:59.100
> 
> 标签：java, json, jackson

我正在使用一个 URL 访问一个 REST API，它给了我以下 JSON 结果：

```
{"size":1,"filter":{"applicationName":"xx.x1",
"fromTimestamp":1261746800000,
"toTimestamp":1361833200000,
"company":"xx",
"groupedBy":"COMPANY_APPLICATION"},

"values"[{"applicationName":"xx.x1","count":17,"company":"xx"}],
"start":0,"limit":25,"lastPage":true} 
```

使用杰克逊，我尝试以这种方式解析 json：

```
 ObjectMapper mapper = new ObjectMapper(); 

      try {
        ErrorDataRest error = mapper.readValue(url, ErrorDataRest.class);
        Map<String,Object> map = mapper.readValue(url, Map.class); 
```

不管我使用第一个还是第二个，我都会得到这个异常：

```
dk.jyskebank.jee.core.exception.JyskeSystemException: Auto generated exception
at dk.sd.dumpmonitor.domainservice.RestErrorServiceBean.queryRESTurl(RestErrorServiceBean.java:46)
at service.RestErrorServiceTest.testQueryRESTurl(RestErrorServiceTest.java:19)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.codehaus.jackson.JsonParseException: Unexpected character ('h' (code 104)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')
at [Source: java.io.StringReader@30d82d; line: 1, column: 2]
at org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1433)
at org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:521)
at org.codehaus.jackson.impl.JsonParserMinimalBase._reportUnexpectedChar(JsonParserMinimalBase.java:442)
at org.codehaus.jackson.impl.ReaderBasedParser._handleUnexpectedValue(ReaderBasedParser.java:1198)
at org.codehaus.jackson.impl.ReaderBasedParser.nextToken(ReaderBasedParser.java:485)
at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2770)
at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2718)
at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1863)
at dk.sd.dumpmonitor.domainservice.RestErrorServiceBean.queryRESTurl(RestErrorServiceBean.java:43)
... 25 more 
```

我不知道出了什么问题或如何解决它。

我无法访问其他 API，但我知道它使用 RESTeasy。

我唯一想要的是将 JSON 响应映射到 Java 类，所以也许还有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-08T17:56:01.587

我猜你的变量`url`是 a `String`，而不是 a `URL`，所以 Jackson 正在解析 URL，就好像它是一个实际的 JSON 字符串一样。这可以解释“意外字符'h'”，因为这可能是您的URL 的第一个字母（即http... 的东西。）代码“104”对应于“h”的ASCII 值。

如果你用`mapper.readValue(new URL(url), ErrorDataRest.class);`它有用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-19T04:11:39.337

`echo`在我（笨拙而愚蠢地）习惯将 XML 放入测试文件之后，这发生在我身上：

```
echo "<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope"><s:Envelope>" \
> sampleXml 
```

当然，它丢失了所有引号，并为我造成了这个问题。

**确保您的所有属性都有引号！**

# c++ - 结构中的字符

> ID：15885549
> 
> 赞同：3
> 
> 时间：2013-04-08T17:46:14.217
> 
> 标签：c++, c, struct

一个快速的问题：下面给出的结构中**char c:4**的含义是什么

```
struct s 
 { 
 char c:4;
 } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:48:11.453

这是一个由 a 的四位部分组成的[*位字段*](http://en.wikipedia.org/wiki/Bit_field)`char`。您可以定义更多位字段以将较大的类型细分为“nibblets”，如下所示：

```
struct s 
 { 
 char c:4;
 char d:2;
 char e:2;
 }; 
```

这`struct`定义了三个字段，全部“打包”到一个`char`. 该`c`字段可以保存 16 个不同的值；字段`d`，`e`每个字段可以保存四个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:48:15.690

这`char c:4`意味着它是一个`char`大小变量，其中 4 位是变量`c`。换句话说，`c`不是指整个 8 位`char`内存空间，只有 4 位。这是一种将标志和不常见的数据大小打包到结构中的机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T15:35:21.797

位域是 C 语言的一个古怪特性，多年来其确切的规范和行为有些不一致。更高版本的 C 标准已经确定了行为的某些方面，足以阻止编译器做一些有用的事情，但不足以使它们以任何有用的方式可移植。

如果结构的两个或多个连续成员具有相同的底层整数类型，并且其字段名称后跟冒号和数字，则编译器将尝试将第一个之后的每个成员打包到与前一个相同的存储元素中。如果它不能这样做，它将前进到下一个存储元素。

因此，在`unsigned short`16 位的机器上，声明：

```
struct {
  unsigned short a1 : 5;
  unsigned short a2 : 5;
  unsigned short a3 : 7;
  unsigned short a4 : 5;
  unsigned short a5 : 4;
  unsigned short a6 : 6;
} 
```

编译器会将 a1 和 a2 打包成一个 16 位整数；由于 a3 不能与 a1 和 a2 放入相同的整数（总数为 17 位），因此它将开始一个新整数。尽管 a4 会与 a1 和 a2 一起位，但 a3 挡道的事实意味着它将与 a3 一起放置。然后 a5 将与 a3 和 a4 一起放置，填满第二个位置。A6 将获得一个 16 位的位置。

请注意，如果所有这些结构元素的基础类型都是 32-bit `unsigned int`，则所有内容都可以打包到一个这样的项目中，而不是三个 16 位的项目。

坦率地说，我真的不喜欢位域的规则。它们的规则非常模糊，以至于一个编译器为位域数据生成的底层表示可能无法被另一个编译器读取，但它们足够具体，以至于禁止编译器生成可能有用的数据结构（例如，应该可以打包四个6 位数字转换为 3 字节（24 位）结构，但除非编译器碰巧有 24 位整数类型，否则有办法请求）。尽管如此，规则就是它们。

# javascript - 如何使'return false'阻止在内联onclick事件处理程序中执行连续函数？

> ID：15885550
> 
> 赞同：0
> 
> 时间：2013-04-08T17:46:15.593
> 
> 标签：javascript, javascript-events

我有以下输入字段，其中包含多个函数的内联事件处理程序。我希望如果`reqField()`返回`false`剩余的功能将被取消，但这并没有发生。

所发生的一切`reqField()`都是提前终止，如果输入字段有默认操作，它将被阻止。反正有没有达到我想要的结果（终止剩余的功能）。

顺便说一句，我不能只将它们从 onclick 中删除，因为它们需要在下一个事件`returning false`中保持原位。`onblur`

```
function getnDisplayTextInputBox(id) {

var s   = document.getElementById(id);

s.setAttribute('onclick', '');

    var obj = getDataAttribs2Obj(id);
    var str = getParamStrFromDataObj(obj);

    s.innerHTML = "<input type=\"text\" data-param=\""+obj['param']+"\" id=\"edit\" value=\""+htmlentities(s.innerHTML)+"\" onblur=\"return reqField(this); postData('"+obj['sendtourl']+"', '"+str+"&spanid="+id+"&newVal='+this.value, 'replaceTextTextInputFieldWithValue(resp);', '','');\">";

    document.getElementById('edit').focus();

} 
```

当用户单击原始文本时，上述函数将 a 中的文本替换为`span`填充了相同文本的输入字段。然后他们可以编辑发送到服务器并保存的文本`onbur`。

一些跨度有一个属性`data-param='required'`，如果是这样，`reqField()`则要求该字段不为空，`return false`如果是则将要求该字段（在使用警报框提醒用户问题之后）。显然，我不希望下一个内联函数触发，将空字段发送到服务器进行保存，或者之后的一个，它将输入框换成`span`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:27:59.880

尝试这个

函数 getnDisplayTextInputBox(id) {

```
var s   = document.getElementById(id);

   s.setAttribute('onclick', '');

var obj = getDataAttribs2Obj(id);
var str = getParamStrFromDataObj(obj);

s.innerHTML = "<input type=\"text\" data-param=\""+obj['param']+"\" id=\"edit\" value=\""+htmlentities(s.innerHTML)+"\" onblur=\"if(this.value==''){return false;}else{return reqField(this); postData('"+obj['sendtourl']+"', '"+str+"&spanid="+id+"&newVal='+this.value, 'replaceTextTextInputFieldWithValue(resp);', '','');}\">";

document.getElementById('edit').focus(); 
```

}

# apple-push-notifications - 如何使用 Mainline 在段发送推送通知

> ID：15885552
> 
> 赞同：-1
> 
> 时间：2013-04-08T17:46:19.690
> 
> 标签：apple-push-notifications

我目前正在使用 Mainline 的 API 发送推送通知。[https://api.mainline-tech.com/](https://api.mainline-tech.com/) 但即使我了解如何发送给所有用户，我也未能在文档中找到如何创建一个段或组以仅向某些用户发送推送通知？如果有人使用 Mainline 并且知道怎么做...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:07:05.963

嗯……似乎 Mainline 的 API 包含一个“组”部分 :)……这样您就可以轻松地创建一个只有一些用户使用标签/数据/geoloc ..

# tidesdk - 使用macosx 10.6.8（雪豹）开发的潮汐SDK

> ID：15885555
> 
> 赞同：2
> 
> 时间：2013-04-08T17:46:28.777
> 
> 标签：tidesdk

我正在尝试做一个研发桌面应用程序项目，我想使用 TideSDK 作为我的框架。不幸的是，我的 Mac 似乎正在运行 OSX 10.6.8，据我所知，TideSDK（至少是开发人员）仅适用于 OSX 10.7+。有谁知道它是否只是开发者应用程序无法与 OSX 10.6.8 一起使用，或者是否所有 TideSDK 都无法使用？

如果可能的话，我真的很想在 AIR 上使用这个框架。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:47:46.967

TideSDK does in fact work on OSX 10.6\. As long as you're relatively comfortable using the command line, you can build an application without Developer. For guidance packaging an application with the command line, look here: [https://github.com/TideSDK/TideSDK/wiki/Packaging-TideSDK-apps](https://github.com/TideSDK/TideSDK/wiki/Packaging-TideSDK-apps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T16:26:03.157

从这里可以看到，OSX 10.6 不积极支持 TideSDK：[https ://github.com/TideSDK/TideSDK/issues/94](https://github.com/TideSDK/TideSDK/issues/94)

我也遇到了与使用 10.6 的网络调用相关的错误，所以我想在 OSX 小于 10.7 的情况下使用 TideSDK 不是一个好选择。

# html - 使用 CSS 更改输入字段的外观会导致高度/宽度失真

> ID：15885560
> 
> 赞同：2
> 
> 时间：2013-04-08T17:46:40.183
> 
> 标签：html, css, input, textbox

所以......一旦我向输入字段添加边框，高度和宽度就不会对齐。当我对它们应用边框时，所有文本字段都会显示一些失真......

红色长框为 167 x 21 像素。

长而普通的盒子是 168 x 23 像素。

![在此处输入图像描述](https://i.stack.imgur.com/cPmbF.png)

我玩过很多不同的样式，但我似乎无法找到一种始终适用于我所有盒子的样式。这包括使用字体单位、填充框、指定精确的宽度和高度、指定边距......

目前款式：

```
 input[type=text] {
       font-family:courier;
       font-size:80%; 
       padding: 0.1em;
   } 

   input.error_required { 
       border: 1px solid red; 

       font-family:courier;
       font-size:80%; 
       padding: 0.1em;
   } 
```

我似乎无法弄清楚是什么导致了这种情况发生……这不是世界上最可怕的事情，但如果可以的话，我想纠正它。

第二个例子： ![在此处输入图像描述](https://i.stack.imgur.com/sNR8A.png)

产生这个的过度风格：

```
 input[type=text] {
      font-family: courier;
      font-size:   80%; 
      padding:     0.1em;
      height: 20px; 
      margin: 0.1em;

   } 

   .input_error_required { 
      border: 1px solid red; 
      font-family: courier;
      font-size:   80%; 
      padding:     0.1em;
      height: 20px; 
      margin: 0.1em;
   } 

   .input_error_unique { 
      border: 1px solid orange; 
      font-family: courier;
      font-size:   80%; 
      padding:     0.1em;
      height: 20px; 
      margin: 0.1em;
   } 
```

html 基本上就是这样重复的：

```
<input name='real_server_name' type='text'></input>&nbsp;&nbsp;&nbsp;<input name='real_server_ip' type='text'></input> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:12:36.573

尝试为所有输入框设置默认边框：`1px solid #ccc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:49:15.887

为什么不直接设置高度？

```
input[type="text"] {
    height:23px;
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
} 
```

这些`border-box`东西是为了确保无论边界如何都能反映高度。在所有事情上都这样做是一种最佳实践，但我想我也会在这里指出。

编辑：听起来你实际上需要应用的`border-box`东西比明确的高度还要多！不过，我推荐两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:08:47.360

我解决了这个问题，为正常样式编写规则..

给你。。

[http://jsfiddle.net/wyzqV/](http://jsfiddle.net/wyzqV/)

这是我使用的 css

```
input[type=text] {
      font-family: courier;
      font-size:   80%; 
      padding:     0px;

      margin: 5px;
      width: 167px;
      height: 22px;

   } 

.normal { 
      border: 1px solid #ccc; 
      font-family: courier;
      font-size:   80%; 
      padding:     0px;

      margin:0px;
    width: 168px;
      height: 23px;
   } 

   .input_error_required { 
      border: 1px solid red; 
      font-family: courier;
      font-size:   80%; 
      padding:     0px;

      margin:0px;
    width: 168px;
      height: 23px;
   } 

   .input_error_unique { 
      border: 1px solid orange; 
      font-family: courier;
      font-size:   80%; 
      padding:     0px;

      margin: 0px;
    width: 168px;
      height: 23px;
   } 
```

# asp.net - 违反了多重性约束。关系“...”的角色“...”具有多重性 1 或 0..1

> ID：15885561
> 
> 赞同：23
> 
> 时间：2013-04-08T17:46:42.947
> 
> 标签：asp.net, entity-framework

我的 DbContext 出现以下错误：“违反了多重性约束。关系‘MyModel.FK_ChildEntities_MyEntities’的角色‘MyEntity’的多重性为 1 或 0..1。”

使用 ASP.NET，实体框架 4

使用分离的实体

我第二次尝试将实体重新附加到 dbcontext 时发生该错误。场景是一次不成功的保存，然后重新尝试。

我在会话中有一个分离的实体。用户更改表单中的属性，添加内容，删除内容，最后单击保存。我从 dbcontext 的新实例中获取实体的附加副本，将分离实体的更改应用到附加实体，验证，找到错误并中止。用户更改任何内容并再次保存。

在第二次保存时，整个保存过程会重复，只是这一次一切都下地狱了。几乎所有内容都是重复的，导致一个错误或另一个错误或所有错误。仅应作为引用的视图和查找表中的值被创建为新的并重新分配了 id。我已经能够解决大多数这些问题，但我留下了多重性错误。子元素被创建为其他子元素的精确副本，直到唯一的 id，仅处于已添加状态。或者，如果我引用某些属性，而不是克隆一个未修改的孩子，它会删除新的。无论哪种方式，都没有像第一次那样执行代码。

每次保存尝试时，我都会丢弃 dbcontext 的实例和附加的实体。我认为这足以恢复任何更改，但必须有一些东西存在。唯一没有丢弃或重置的是分离的实体，它正在会话中，但我没有对其进行任何更改。至少不是直接的。

代码（非常简化）是这样的：

```
void Save()
{
using (var context = new MyContext())
{
   // detached entity from session
   MyEntity detachedEntity = (MyEntity)Session["DetachedEntity"];

   // attached entity from context
   MyEntity attachedEntity = context.MyEntities.Single(x=>x.id == detachedEntity.id);       

   // <remove children representing lookup table elements from detachedEntity to prevent duplicates>
   // <remove children representing view elements from detachedEntity to prevent duplicates>

   // <apply changes from detachedEntity to attachedEntity>

   // <add new children>
   // <remove deleted children>
   // <update modified children>

   // <set entity state to unchanged on view and lookup elements of attachedEntity to ensure no duplicates...>

   // <validate>

   if (errors.count>0)
     // <report errors>
   else
     context.SaveChanges();
}
} 
```

例如，这会产生多重性错误：

```
// represents first save:
    using (var context = new MyContext())
    {
       // detached entity from session
       MyEntity detachedEntity = (MyEntity)Session["DetachedEntity"];

       // attached entity from context
       MyEntity attachedEntity = context.MyEntities.Single(x=>x.id == detachedEntity.id);       

       int debug1 = context.ChangeTracker.Entries<ChildEntity>().Count(); // debug1 == 0;

       attachedEntity.ChildEntities.Add(detachedEntity.ChildEntities.First());

       int debug2 = context.ChangeTracker.Entries<ChildEntity>().Count(); // debug2 == 1;

    }

// represents second save:
    using (var context = new MyContext())
    {
       // detached entity from session
       MyEntity detachedEntity = (MyEntity)Session["DetachedEntity"];

       // attached entity from context
       MyEntity attachedEntity = context.MyEntities.Single(x=>x.id == detachedEntity.id);    

       int debug1 = context.ChangeTracker.Entries<ChildEntity>().Count(); // debug1 == 0;

       attachedEntity.ChildEntities.Add(detachedEntity.ChildEntities.First());

       int debug2 = context.ChangeTracker.Entries<ChildEntity>().Count(); // multiplicity error;

    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-09T18:23:46.173

dbcontext 以某种方式记住添加了哪些对象。如果完全相同的物体出现两次，它......吹

而不是从我的分离实体添加子实体到附加的实体，我应该一直在创建每个孩子的新副本

```
ChildEntity detachedChild = detachedEntity.ChildEntities.First();
attachedEntity.ChildEntities.Add(new ChildEntity { 
   propertyA = detachedChild.propertyA,
   propertyB = detachedChild.propertyB
}); 
```

代替

```
attachedEntity.ChildEntities.Add(detachedEntity.ChildEntities.First()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-25T23:05:12.583

问题是应该为 detachedChild.parent 分配 attachParent。

```
foreach(var detachedEntity in detachedEntities)
{
     attachedEntity.ChildEntities.Add(detachedEntity); 
     detachedEntity.ParentEntity = attachedEntity;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-12T18:05:03.923

**你想要做的是这样的：**

```
ChildEntity childEntity = new ChildEntity()
{
  //do mapping or provide data EXCEPt THE PRIMARY KEY
}

foreach(ParentEntity parentEntity in parentEntities)
{
    parentEntity.Add(childEntity);
}

_dbContext.SaveChanges(); 
```

**结果**

```
Multiplicity constraint violated. The role '…' of the relationship '…' has multiplicity 1 or 0..1 
```

**错误信息的原因是**

每次 _dbContext 将 childEntity 添加到某个 parentEntity 时，它会将生成的主键设置为 childEntity，因此在 foreach 的第二个循环中，主键将被复制

**修复方法是 - 方法 #1 - 适用于简单场景**

```
foreach(ParentEntity parentEntity in parentEntities)
{
    //Make a new object every time
    ChildEntity childEntity = new ChildEntity()
    {
      //do mapping or provide data EXCEPt THE PRIMARY KEY
    }

    parentEntity.Add(childEntity);
}

_dbContext.SaveChanges(); 
```

**修复方法是 - 方法 #2 - 适用于复杂场景**

```
using YOUR_PROJECT.ANY_FOLDER.DeepCopyExtensions;    

ChildEntity childEntity = new ChildEntity()
{
  //do mapping or provide data EXCEPt THE PRIMARY KEY
}

foreach(ParentEntity parentEntity in parentEntities)
{
    //makes a copy of the childEntity object and pass it to the _dbContext, after saving each copy will be separated and the original object childEntity wont be touched 
    parentEntity.Add(DeepCopyByExpressionTrees.DeepCopyByExpressionTree(childEntity));
}

_dbContext.SaveChanges(); 
```

**这个方法“DeepCopyByExpressionTrees.DeepCopyByExpressionTree(childEntity)”是什么？**

[在此处](https://www.codeproject.com/Articles/1111658/Fast-Deep-Copy-by-Expression-Trees-C-Sharp)查看此项目，下载源代码，并且仅将类文件“DeepCopyByExpressionTrees.cs”作为帮助类包含到您的项目中，并在任何地方开始使用它。

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-27T04:29:17.613

确保检查您尝试添加的对象的属性。在我的情况下，它错误地在每个不喜欢的添加上引用了相同的无效对象，因此引发了与您在这里相同的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-11T18:01:07.087

我有一个类似的问题，但我的问题是`AsNoTracking()`在我的查询之后产生的。

我有这样的事情

`var myObject = dbContext.GetRepo<myType>().Query().AsNoTracking().SingleOrDefault()`

然后稍后我使用该对象设置另一个对象。

`var myChild = new Child { parent = myObect }`

显然 EntityFramework 试图创建一个全新的对象，因此导致多重性错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-20T12:03:12.250

我通过使父实体中的子集合成为虚拟来解决此问题。这允许人们在其子集合不更改时轻松更新实体，对我来说，这是大多数时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-29T06:51:31.697

当我的导航属性尚未设置或导航属性属于错误的 Code First DBContext 时，我遇到了此错误

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-17T12:22:24.637

**英孚 6 更新**

对我来说，将对象状态设置为添加听起来也合乎逻辑

```
ChildEntity detachedChild = detachedEntity.ChildEntities.First();
var newChild = new ChildEntity { 
   propertyA = detachedChild.propertyA,
   propertyB = detachedChild.propertyB
});

// Mark all added entity entity state to Added
 attachedEntity.ChildEntities.Add(newChild );
                        db.Entry(newChild ).State = EntityState.Added; 
```

[http://www.entityframeworktutorial.net/EntityFramework4.3/update-one-to-many-entity-using-dbcontext.aspx](http://www.entityframeworktutorial.net/EntityFramework4.3/update-one-to-many-entity-using-dbcontext.aspx)

# cpu - CPU可以将指令作为数据处理吗？

> ID：15885563
> 
> 赞同：0
> 
> 时间：2013-04-08T17:46:50.327
> 
> 标签：cpu, instructions

在准备考试时，我遇到了这个疑问。CPU是否将指令作为数据处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:53:48.700

简短的回答是肯定的。上面有一个[维基百科条目](http://en.wikipedia.org/wiki/Self-modifying_code)。它的要点是，如果您有要读取的指令的地址，那么您可以将它们加载到数据寄存器中，测试指令，甚至写回新指令。然而，许多现代操作系统可能不允许您写回指令。这是一种安全预防措施，可防止恶意代码修改您的系统或信任应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:18:49.083

取决于电脑：

*   在[冯诺依曼架构](http://en.wikipedia.org/wiki/Von_Neumann_architecture)中，是的。

*   在[哈佛建筑](http://en.wikipedia.org/wiki/Harvard_architecture)中，没有。

# iphone - 使用 AudioToolbox 进行短音效音量控制不适用于 iPad/iPod touch 型号

> ID：15885567
> 
> 赞同：3
> 
> 时间：2013-04-08T17:47:09.323
> 
> 标签：iphone, ios, objective-c, ipad, audiotoolbox

在 iPhone 机型上一切正常，使用手机上的音量按钮提高和降低游戏音频。在 iPad 和 iPod touch 机型上，音量按钮不会影响游戏音效。

这是我用来播放这些短声音的代码。

```
-(IBAction) playClickSound {
  CFURLRef mySoundUrl = CFBundleCopyResourceURL(CFBundleGetMainBundle(), CFSTR("click"), CFSTR("caf"), NULL);
  SystemSoundID mySound;
  AudioServicesCreateSystemSoundID(mySoundUrl, & mySound);
  CFRelease(mySoundUrl);
  // Plays the sound.
  AudioServicesPlaySystemSound(mySound);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T19:22:58.643

常量“kAudioServicesPropertyIsUISound”会影响级别吗？它应该确定用户的设置是否影响播放。

# json.net - Json.NET 字典序列化中的重大错误

> ID：15885571
> 
> 赞同：5
> 
> 时间：2013-04-08T17:47:19.473
> 
> 标签：json.net

*Json.NET* 并不总是正确考虑`ValueType`.`Dictionary<KeyType,ValueType>`

`Dictionary<string,object>`如果一个值恰好是`DefaultContractResolver.CanConvertToString()`返回 true 的值，除非我遗漏了一些东西，否则这使得序列化非常不可行。`Rect`是 .NET 4.0 中的一种类型。我在 Json.NET 4.5r11 和 5.0r2 中试过这个。考虑以下代码：

```
_requestSerializerJson = new JsonSerializer();
// Even setting TypeNameHandling to All doesn't change the deserialized result

Dictionary<string, object> dictionary = new Dictionary<string, object>();
Rect a = new Rect(1, 2, 3, 4);
dictionary.Add("myrect", a);
byte[] bytes;

using (MemoryStream requestStream = new MemoryStream())
using (var streamWriter = new StreamWriter(requestStream))
using (var writer = new JsonTextWriter(streamWriter))
{
    _requestSerializerJson.Serialize(writer, dictionary);
    writer.Flush();
    bytes = requestStream.ToArray();
}
// Serialized to: {"myrect":"1,2,3,4"}

using (MemoryStream stream = new MemoryStream(bytes, 0, bytes.Length))
using (var textReader = new StreamReader(stream))
using (var reader = new JsonTextReader(textReader))
{
    var b = _requestSerializerJson.Deserialize<Dictionary<string, object>>(reader);
}
// b is a Dictionary with a single *string* value "1,2,3,4" instead of a Rect! 
```

我在想这个错误还是遗漏了什么？我刚刚从 XmlSerializer 切换到 Json.NET，因为它的性能令人难以置信（尤其是在构造时），而且它很容易过渡到，但是遇到这个问题让我有点害怕。

看起来如果 Json.NET 因为对象类型为`CanConvertToString`() 返回 true 而要将某些东西写成字符串，它需要写出一个 Json 属性来指示发生了到字符串的转换，以便它可以可靠地“未转换”关于反序列化...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:50:06.213

当您反序列化为`Dictionary<string, object>`Json.Net 时，在确定要为字典值实例化什么时，没有任何类型信息可以继续。正常的解决方案是使用强类型容器（例如`Dictionary<string, Rect>`）或将`TypeNameHandling`选项设置`Objects`为序列化程序。后者将告诉 Json.Net 使用 JSON 输出类型元数据，以便在反序列化时知道要实例化哪种类型。

但是，某些类型（例如`System.Windows.Rect`）标有`[TypeConverter]`属性。当 Json.Net 找到这样的类型时，它使用关联的 TypeConverter 将对象序列化为字符串，而不是将其视为普通对象。不幸的是，当发生这种转换时，原始类型信息会丢失，因此不会为该值写出元数据。这意味着除非您反序列化为强类型的类或容器，否则您将得到一个字符串而不是原始对象，并且您将返回原样。

`Rect`您可以通过使用强制 Json.Net正常序列化而不是使用其 TypeConverter的自定义 ContractResolver 来解决此问题。这是您需要的代码：

```
class CustomResolver : DefaultContractResolver
{
    protected override JsonContract CreateContract(Type objectType)
    {
        if (objectType == typeof(System.Windows.Rect))
            return CreateObjectContract(objectType);

        return base.CreateContract(objectType);
    }
} 
```

这是使用您问题中修改的代码的往返演示：

```
JsonSerializer _requestSerializerJson = new JsonSerializer();
_requestSerializerJson.TypeNameHandling = TypeNameHandling.Objects;
_requestSerializerJson.ContractResolver = new CustomResolver();
_requestSerializerJson.Formatting = Formatting.Indented;

Dictionary<string, object> dictionary = new Dictionary<string, object>();
System.Windows.Rect a = new System.Windows.Rect(1, 2, 3, 4);
dictionary.Add("myrect", a);
byte[] bytes;

using (MemoryStream requestStream = new MemoryStream())
using (var streamWriter = new StreamWriter(requestStream))
using (var writer = new JsonTextWriter(streamWriter))
{
    _requestSerializerJson.Serialize(writer, dictionary);
    writer.Flush();
    bytes = requestStream.ToArray();
}

Console.WriteLine(Encoding.UTF8.GetString(bytes));
Console.WriteLine();

Dictionary<string, object> b;

using (MemoryStream stream = new MemoryStream(bytes, 0, bytes.Length))
using (var textReader = new StreamReader(stream))
using (var reader = new JsonTextReader(textReader))
{
    b = _requestSerializerJson.Deserialize<Dictionary<string, object>>(reader);
}

System.Windows.Rect rect = (System.Windows.Rect)b["myrect"];
Console.WriteLine("Left: " + rect.Left);
Console.WriteLine("Top: " + rect.Top);
Console.WriteLine("Width: " + rect.Width);
Console.WriteLine("Height: " + rect.Height); 
```

输出：

```
{
  "$type": "System.Collections.Generic.Dictionary`2[[System.String, mscorlib],[System.Object, mscorlib]], mscorlib",
  "myrect": {
    "$type": "System.Windows.Rect, WindowsBase",
    "IsEmpty": false,
    "Location": "1,2",
    "Size": "3,4",
    "X": 1.0,
    "Y": 2.0,
    "Width": 3.0,
    "Height": 4.0,
    "Left": 1.0,
    "Top": 2.0,
    "Right": 4.0,
    "Bottom": 6.0,
    "TopLeft": "1,2",
    "TopRight": "4,2",
    "BottomLeft": "1,6",
    "BottomRight": "4,6"
  }
}

Left: 1
Top: 2
Width: 3
Height: 4 
```

# mysql - MySQL 清除特定数据库或查询的查询缓存

> ID：15885574
> 
> 赞同：0
> 
> 时间：2013-04-08T17:47:29.467
> 
> 标签：mysql, sql

我在有几十个数据库的 MySQL 服务器上运行一个数据库，所以

`RESET QUERY CACHE`

不可能，因为我将为所有其他数据库重置它。

我很好奇是否可以只为一个数据库或一个查询重置查询缓存？或者是否可以编写`SELECT`不使用查询缓存的语句？

* * *

**更新**：我试过了`SELECT SQL_NO_CACHE`，`set session query_cache_type=0`但这些没有任何区别......这让我觉得我正在运行磁盘或操作系统缓存。

我真正想做的就是基准测试......你会认为MySQL会提供一种方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:03:38.513

我们不能使用 SQL_NO_CACHE

示例：SELECT SQL_NO_CACHE id，name FROM customer；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:00:47.360

不幸的是，对于单个套接字，所有数据库都将共享相同的 my.cnf 参数。您可以在不同的套接字上绑定 MYSQL 并运行不同的 mysql 实例，然后您可以启用或禁用查询缓存。

但是还有另一种解决方案，您可以使用 memcached 并将查询存储在那里，以便您可以在需要时从那里访问，以便您可以禁用查询缓存。我了解查询缓存会导致争用。

# bash - 使用 sed 修改不包含字符串的行

> ID：15885575
> 
> 赞同：0
> 
> 时间：2013-04-08T17:47:40.863
> 
> 标签：bash

我正在尝试编写一个 bash 脚本，该脚本使用 sed 修改配置文件中不包含特定字符串的行。举例说明，我可以...

```
/some/file/path1 ipAddress1/subnetMask(rw,sync,no_root_squash)
/some/file/path2 ipAddress1/subnetMask(rw,sync,no_root_squash,anonuid=-1)
/some/file/path3 ipAddress2/subnetMask(rw,sync,no_root_squash,anonuid=0)
/some/file/path4 ipAddress2/subnetMask(rw,sync,no_root_squash,anongid=-1)
/some/file/path5 ipAddress2/subnetMask(rw,sync,no_root_squash,anonuid=-1,anongid=-1) 
```

而且我希望更改每一行的括号列表，使其包含字符串`anonuid=-1`并`anongid=-1`在其括号内...

```
/some/file/path1 ipAddress1/subnetMask(rw,sync,no_root_squash,anonuid=-1,anongid=-1)
/some/file/path2 ipAddress1/subnetMask(rw,sync,no_root_squash,anonuid=-1,anongid=-1)
/some/file/path3 ipAddress2/subnetMask(rw,sync,no_root_squash,anonuid=-1,anongid=-1)
/some/file/path4 ipAddress2/subnetMask(rw,sync,no_root_squash,anongid=-1,anonuid=-1)
/some/file/path5 ipAddress2/subnetMask(rw,sync,no_root_squash,anonuid=-1,anongid=-1) 
```

从示例中可以看出，括号中可能已经存在`anonuid`和`anongid`，但有可能原始括号列表有一个字符串而没有另一个字符串（第 2、3 和 4 行），列表都没有（第 1 行） )，列表都已正确设置（第 5 行），甚至其中一个或两个设置不正确（第 3 行）。当其中一个`anonuid`或`anongid`设置为 以外的值`-1`时，必须将其更改为`-1`（第 3 行）的正确值。

使用 sed 编辑我的配置文件的最佳方法是什么，`anonuid=-1`并且`anongid=-1`包含在每行的括号列表中，当然用逗号分隔符分隔？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:05:26.227

我认为这可以满足您的要求：

```
sed -e '/anonuid/{s/anonuid=[-0-9]*/anonuid=-1/;b gid;};s/)$/,anonuid=-1)/;:gid;/anongid/{s/anongid=[-0-9]*/anongid=-1/;b;};s/)$/,anongid=-1)/' 
```

基本上，它有两个几乎相同的部分，第一个处理 anonuid 和第二个 anongid，每个部分都有一些逻辑来决定是否需要替换或添加适当的值。（无需检查该值是否已经正确，这只会使事情复杂化，而不会改变结果。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:32:14.390

您可以使用 sed 指定您感兴趣的行：

```
$ sed '/anonuid=..*,anongid=..*)$/!p' $file 
```

以上将打印 ( `p`) 所有与两个斜杠之间的正则表达式不匹配的行。我***使用***`!`. _ 这样，您就不会将行与它们`anaonuid`和`anongid`它们都匹配。

现在，您可以处理不匹配的行并使用 sed`s`命令编辑这些行：

```
$ sed '/anonuid=..*,anongid=..*)$/!s/from/to/` 
```

操作可能相当复杂，您可能会传递多个`sed`命令以使一切*正常*。

但是，如果字符串`no_root_squash`出现在您要更改的每一行中，为什么不采取简单的方法：

```
$ sed 's/no_root_squash.*$/no_root_squash,anonuid=-1,anongid=-1)/' $file 
```

这是在寻找那个`no_root_squash`字符串，并用你想要的文本替换从那个字符串到行尾的所有内容。是否有您触摸的线条不需要*编辑*？是的，但你并没有真正改变这些线路。您基本上是`/no_root_squash,anonuid=-1,anongid=-1)`用相同的`/no_root_squash,anonuid=-1,anongid=-1)`.

即使它正在替换不需要替换的文本，这可能会更快，因为正在进行的处理较少。另外，将来更容易理解和支持。

### 回复

> 谢谢大卫！是的，我正在考虑走那条路，但我不想 100% 依赖包含 no_root_squash 的每一行。我当前的配置文件仅以该字符串结尾，但我不能 100% 确定该字段不会有所不同。你认为有没有办法改变它，所以它只是从最后一个不包含 anonuid=-1 或 anongid=-1 的字符串的末尾开始覆盖？

你能保证每一行都有什么？

您也许可以做一个捕获组：

```
 sed 's/\(sync,[^,)]*\).*/\1,anonuid=-1,anongid=-1)/' $file 
```

这`\(..\)`是一个*捕获组*。它基本上捕获了匹配正则表达式的那部分，然后允许您通过`\1`. 我正在从单词`sync`中捕获一组字符，不包括逗号或右括号。然后，我将附加捕获组、逗号以及您的匿名 uid 和 gid。

那会奏效吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:52:43.573

也许我过于简单化了：

```
sed 's/anonuid=[-0-9]*[^)]//g;s/anongid=[-0-9]*[^)]//g;s/[)]/anonuid=-1,anongid=-1)/g' test.txt > test3.txt 
```

`anonuid`这只是删除or的任何当前实例`anongid`并将字符串添加 `"anonuid=-1,anongid=-1"`到括号中

# php - mssql_num_row 需要 1 个参数才能获得资源

> ID：15885576
> 
> 赞同：0
> 
> 时间：2013-04-08T02:52:44.593
> 
> 标签：php, sql

这是我的代码：

```
$link=mssql_connect($server, 'username','password');
if (!$link) {
die('Something went wrong while connecting to the mssql database, it could be offline! ' . mssql_get_last_message());
                                        }
                                        mssql_select_db('GunzDB', $link);
                                        $result="SELECT * FROM Account WHERE UserID = '$username'";

                                        if(mssql_num_rows($result) > 0){
                                            echo "That username is already in use!";    
                                    } else{
                                        $result="SELECT * FROM Account WHERE Email = '$email'";

                                        if(mssql_num_rows($result) > 0){
                                            echo "That email is already in use!";
                                        } else{

                                            $query="INSERT INTO Account (UserID, UGradeID, PGradeID, RegDate, Name, Email) VALUES ('" . $username . "','0','0','00:00','" . $name . "','" . $email . "')";
                                            if($query){
                                            $result="SELECT * FROM Account WHERE UserID = '$username'";

                                            $row = mssql_fetch_array($result);
                                            $AID=$row['AID'];
                                            $query="INSERT INTO Login (AID, Password) VALUES ('" . $AID . "','" . $password . "')";
                                            if($query){
                                            echo "<span style='color: lime'>Your account has been successfully created!</span>";
                                            } else{
                                                echo "error with MSSQL: " . mssql_get_last_message();
                                            }
                                            } else{
                                             echo "error with MSSQL: " . mssql_get_last_message();  
                                            } 
```

我不断收到这些错误警告：mssql_num_rows() 期望参数 1 是资源，第 81 行 /var/www/gunz/register.php 中给出的字符串

警告：mssql_num_rows() 期望参数 1 是资源，字符串在第 86 行的 /var/www/gunz/register.php 中给出

警告：mssql_fetch_array() 期望参数 1 是资源，在第 94 行的 /var/www/gunz/register.php 中给出的字符串

它与这些行有关

```
$result="SELECT * FROM Account WHERE UserID = '$username'";

$result="SELECT * FROM Account WHERE Email = '$email'";

$result="SELECT * FROM Account WHERE UserID = '$username'"; 
```

我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:50:03.450

您不是为了获得结果而**发送查询。**

```
$result = mssql_query("SELECT ... "); 
```

您也容易受到 SQL 注入的攻击。阅读使用绑定参数和准备好的语句。

[见手册](http://php.net/manual/en/function.mssql-query.php)

# iphone - 获取 UIWebView 层次结构中的上一页

> ID：15885586
> 
> 赞同：1
> 
> 时间：2013-04-08T17:48:07.040
> 
> 标签：iphone, ios, objective-c, xcode, uiwebview

我需要能够弄清楚 UIWebView 层次结构中的前一页是什么，以便我可以禁用某些实例上的后退按钮。所以，澄清一下：

```
 User is on page A - clicks on link
 User is now on page B - clicks on link
 User is now on page C  - clicks on the **back** button
 User is now on page B 
```

我需要能够知道页面 B 中的“上一个”页面*是*页面 A。不幸的是，我现在使用的方法只能确定用户的上一页。所以在上面的情况下，它认为之前的导航页面是页面 C。

任何帮助，将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:50:50.563

每次用户单击链接并加载新页面时，您的 Web 视图代理都会收到一条消息。所以每次都“写下”这些信息！现在你知道“后退”是什么意思了。

此外，您可以将 JavaScript 与 UIWebView 对话。JavaScript 为您提供了一个`history`对象。UIWebView 中的许多关键功能都是通过 JavaScript 实现的！Apple 没有费心在 Objective-C 属性中复制它，因为，好吧，为什么要费心呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T22:54:12.347

多年后....

在研究同样的场景时，我想出了一个很好的解决方案。在 webViewDidFinishLoad 中，检查属性“canGoBack”并相应地隐藏或取消隐藏您的后退按钮。觉得这太酷了，不分享。:)

```
if (self.webView.canGoBack)
{
    self.backButton.hidden = NO;
}
else
{
    self.backButton.hidden = YES;
} 
```

# javascript - 提交表单后打开特定的 Twitter Bootstrap 选项卡

> ID：15885587
> 
> 赞同：1
> 
> 时间：2013-04-08T17:48:07.723
> 
> 标签：javascript, twitter-bootstrap, hyperlink

提交表单后，我无法打开特定选项卡的备份。我正在使用 Twitter Bootstrap 2.1.0。基本上，提交 from 时，它将返回到第一个选项卡，而不是提交表单的选项卡。这是我的代码：

```
<ul class="nav nav-tabs" id="myTab">
  <li class="active"><a href="#tab1">Tab 1</a></li>
  <li><a href="#formtab">Form Tab</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active fade in" id="tab1">
    Content goes in here
  </div>

  <div class="tab-pane fade in" id="formtab">  
    <form action="http://myurl.com#formtab" class="center active" method="post">   
      form stuff goes in here
    </form>
  </div>

<div> 
```

我认为在链接末尾添加#id 会使浏览器打开该特定选项卡，但它会返回到 tab1 选项卡。任何帮助，将不胜感激。谢谢

# parsing - Boost Spirit 可以处理 Postscript/PDF 之类的语言吗？

> ID：15885594
> 
> 赞同：5
> 
> 时间：2013-04-08T17:49:02.007
> 
> 标签：parsing, pdf, boost-spirit, postscript, lexer

我注意到 Boost Spirit 提供了一些限制，在 SO 上的一个问题中，有一个用户寻求有关 boost spirit 的帮助，而另一个给出答案的用户指定 boost spirit 适用于语句而不是“通用文本”（我'对不起，如果我没有记错的话）。

现在我想从标记的角度考虑 Postscript 和 PDF，并以这种方式简化我对这种格式的处理方法，问题是 PDF 是一种标记语言和一种带有跳转和表格的编程语言之间的混合体，在考虑最流行的文件格式（如 XML、C++ 代码和其他语言和格式）时，我想不出类似的东西。

还有另一个事实：我真的找不到有过 boost::spirit 编写 pdf 解析器或编写器经验的人，所以我问 boost::spirit 它能够解析 PDF 文件并输出元素作为标记？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T18:51:58.753

尽管这与 Boost 无关，但让我向您保证，PDF（和 PostScript）的解析与您希望的一样简单。假设您有一个返回一系列令牌的扫描仪对象。您将从扫描仪获得的令牌类型是：

*   细绳
*   字典开始 (<<)
*   字典结尾 (>>)
*   姓名（/随便）
*   数字
*   十六进制数组
*   左角 (<)
*   直角 (>)
*   数组开始 ([)
*   数组结束（]）
*   过程开始 ({)
*   程序结束 (})
*   评论 (%foo)
*   单词

我的扫描仪是一个有限状态自动机，具有 Start、Comment、String、HexArray、Token、DictEnd 和 Done 的状态。

解析 PDF 的方式不是解析它，而是执行它。鉴于这些标记，我的“解析器”看起来像这样（在 C# 中）：

```
while (true) {
    MLPdfToken = scanner.GetToken();
    if (token == null)
        return MachineExit.EndOfFile;
    PdfObject obj = PdfObject.FromToken(token);
    PdfProcedure proc = obj as PdfProcedure;

    if (proc != null)
    {
        if (IsExecuting())
        {
            if (token.Type == PdfTokenType.RBrace)
                proc.Execute(this);
            else
                Push(obj);
        }
        else {
            proc.Execute(this);
        }
        if (proc.IsTerminal)
            return Machine.ParseComplete;
    }
    else {
        Push(obj);
    }
} 
```

我还要补充一点，如果你给每个 PdfObject 一个 Execute() 方法，使得基类实现是`machine.Push(this)`并且`IsTerminal`返回`false`，REPL 变得更容易：

```
while (true) {
    MLPdfToken = scanner.GetToken();
    if (token == null)
        return MachineExit.EndOfFile;
    PdfObject obj = PdfObject.FromToken(token);

    if (IsExecuting())
    {
        if (token.Type == PdfTokenType.RBrace)
           obj.Execute(this);
        else
           Push(obj);
    }
    else {
        obj.Execute(this);
        if (obj.IsTerminal)
            return Machine.ParseComplete;                
    }
} 
```

Machine 有更多支持 - Machine 有一堆 PdfObject 和一些访问它的方法（Push、Pop、Mark、CountToMark、Index、Dup、Swap），以及 ExecProcBegin 和 ExecProcEnd。

除此之外，它非常轻。唯一有点奇怪的是，它`PdfObject.FromToken`接受一个标记，如果它是原始类型（数字、字符串、名称、十六进制、布尔），则返回相应的 PdfObject。`PdfProcedure`否则，它采用给定的标记并在与对象关联的过程名称的“proc set”字典中查找。`<<`因此，当您遇到在 proc 集中查找并提供以下代码的令牌时：

```
void DictBegin(PdfMachine machine)
{
    machine.Push(new PdfMark(PdfMarkType.Dictionary));
} 
```

所以`<<`真正的意思是“将堆栈标记为字典的开头。`>>`变得更有趣：

```
void DictEnd(PdfMachine machine)
{
    PdfDict dict = new PdfDict();
    // PopThroughMark pops the entire stack up to the first matching mark,
    // throws an exception if it fails.
    PdfObject[] arr = machine.PopThroughMark(PdfMarkType.Dictionary);
    if ((arr.Length & 1) != 0)
        throw new PdfException("dictionaries need an even number of objects.");
    for (int i=0; i < arr.Length; i += 2)
    {
        PdfObject key = arr[i], val = arr[i + 1];
        if (key.Type != PdfObjectType.Name)
            throw new PdfException("dictionaries need a /name for the key.");
        dict.put((PdfName)key, val);
    }
    machine.Push(dict);
} 
```

所以`>>`弹出到最近的字典标记到一个数组中，然后将每一对放入字典中。现在，我可以在不分配数组的情况下完成此操作。我可以只弹出对，将它们放入字典中，直到我达到目标、无法获得名称或堆栈下溢。

重要的一点是 PDF 中确实没有任何语法，PostScript 中也没有。至少没有你注意到的那么多。唯一真正的语法（和 read-eval-(push) 循环显示它）是'}'。

因此，当您这是 PDF 时`14 0 obj << /Type /Annot /SubType /Square >> endobj`，您真正看到的是一系列程序：

1.  推 14
2.  推0
3.  执行 obj（弹出两个数字并推送一个“定义”对象）。
4.  执行字典开始
5.  推/打字
6.  推/注
7.  推送/子类型
8.  推/方
9.  执行字典结束
10.  执行 endobj（弹出顶部对象，然后获取（不弹出）下一个对象。如果第二个是定义，则将其“值”设置为第一个对象，否则抛出）。

由于“endobj”是终端，解析结束，栈顶就是结果。

因此，当您被要求在 PDF 中查找对象 14 时，交叉引用表会告诉您要查找的位置，您使用该位置的流指针创建一个新机器并运行它。如果栈顶是一个“定义”对象，那么你就成功了。

现在你应该点头但不相信我，因为你正在考虑 PDF 流，它看起来像这样：

```
<< [/key value]* >> stream ...raw data... endstream endobj 
```

同样，没有语法。proc`stream`查看堆栈的顶部，它应该是一个 PdfDict。如果是，它会消耗字符直到下一个换行符（扫描器这样做），将当前文件位置存储在流中作为数据开始，从 dict 读取流长度（这可能导致另一台机器更新），然后跳过超过流的末尾并将新的流对象推入堆栈。endstream 是无操作的。PdfDict 和 PdfStream 之间的唯一区别是 PdfStream 有一个起始位置和一个 bool 表示它是一个流，否则我会使用该对象。

PostScript 几乎相同，只是执行环境稍微复杂一些。例如，您的机器中需要多个堆栈：参数堆栈、字典堆栈和执行堆栈。从那里，您或多或少只是将您的分词器绑定到一组原始过程以及 exec 一词，然后您的大部分解释器都是用 PS 本身编写的。

如果你在谈论 boost，你在看 C++，这意味着你不能像我一样快速和松散地使用内存，所以你要么使用智能指针，要么弄清楚你的作用域在哪里并且小心处理对象而不是愉快地扔掉它们，但这只是普通的 C++ 东西。

目前，我在 .NET 中为我的公司制作 PDF 工具，但在以前的生活中，我使用 Acrobat 版本 1-4，而我所描述的大部分内容正是 Acrobat 在幕后所做的（嗯，或多或少 - 它是C，不是 C++，但它是相同的方法）。

关于外部参照表（或外部参照流），您首先阅读 - 规范告诉您，如果您跳转到 EOF 并向后扫描，您会找到外部参照表的开头。您解析它（这是一个 CS 101 作业），解析预告片，寻找 /Prev （如果有）并重复直到没有更多 /Prev 条目。这为您提供了用于查找对象的完整外部参照。

至于写作 - 您可以采取多种方法。最明显的一点是，当一个对象要被引用时，您可以通过为其分配最新的可用外部参照条目来创建一个新的引用对象。每当对象引用其他对象进行写入时，它们都会询问这些对象是否被引用。如果他们是，他们写参考（即，`14 0 R`）。当需要写入引用对象时，您会获取当前流指针并将其存储在外部参照中，然后写入`<objnum> <generation> obj <object contents> endobj`。例如，我编写字典的代码如下所示：

```
public override ToStream(PdfStreamingContext context)
{
    if (context.HasReference(this)) // is object referenced in xref
    {
        PdfUtils.WriteObjectDefinitionBegin(this, context);
    }
    context.Writer.Indent();
    context.Writer.WriteLine("<<");
    WriteContents(context);
    context.Writer.Exdent();
    context.Writer.Writeline(">>");
    if (context.HasReference(this))
    {
        PdfUtils.WriteObjectDefinitionEnd(this, context);
    }
} 
```

我已经切碎了一些谷壳，这样你就可以看到下面的小麦了。上下文是一个对象，它包含一个新的外部参照表以及一个用于写入流的对象，该流自动处理适当的换行规则、缩进、换行等。

您应该看到的是，这里的基础是直截了当的，即使不是微不足道的。现在，您应该问自己一个问题，“如果它是微不足道的，为什么 Acrobat 在市场上没有更多（严重的）竞争？答案是即使它微不足道，编写 PDF 仍然很容易。 '不符合规范，而 Acrobat 处理其中的大部分。真正的挑战是能够遵守规范并确保您在字典中包含所有必需的值，并且它们在范围内并且语义正确。地狱，甚至是日期时间格式——这是非常明确的——是我库中的一大堆特殊情况代码，用于管理其他人在哪里搞砸了。

我可以（并且可能应该）写一本关于如何做到这一点的书。虽然很多边缘代码很脏，但整体结构可能非常漂亮。

**tl;dr** - 如果您正在考虑 PDF 的递归下降解析器，那么您想得太难了。你只需要一个分词器和一个简单的 REPL。

# javascript - 在 body 标记内声明函数导致“未定义函数”

> ID：15885597
> 
> 赞同：1
> 
> 时间：2013-04-08T17:49:08.370
> 
> 标签：javascript, html, function, onclick

我在我的 html 的 body 标记内呈现了一个 java 脚本函数。在 java 脚本之后有一个按钮，它调用由`onclick`属性声明的这个函数。

```
<script type="text/javascript">
    function f(caller){
        console.log('test');
    }
</script>
<button onclick="f(this)" type="button">A button</button> 
```

问题是它说“ReferenceError: f is not defined”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T08:55:55.197

我的问题是我写的

```
<script type="text/javascript" src="........." />
<script type="text/javascript">
    function f(caller){
        console.log('test');
    }
</script> 
```

但它应该带有`</script>`标签。

```
<script type="text/javascript" src="........." ></script>
<script type="text/javascript">
    function f(caller){
        console.log('test');
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:59:51.503

以下似乎工作得很好：

```
<!DOCTYPE html>
<html>
<head>
    <title>Demo</title>
    <script type="text/javascript">
        function f(caller){
            console.log('test');
        }
    </script>
<body>
    <button onclick="f(this)" type="button">A button</button>
</body>
</html> 
```

如果您收到该错误，则可能来自您提供的代码以外的其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:00:54.073

`body`我建议不要在标签内找到脚本的正确位置，而是使用[**window.onload**](https://developer.mozilla.org/en-US/docs/DOM/window.onload)函数以及使用标签内的标签内的addEventListener [**()**](https://developer.mozilla.org/en-US/docs/Talk%3aDOM/element.addEventListener)自己绑定事件，如果它应该是，甚至在外部文件中.`script``head``.js`

`id`如果您想使用[**getElementById()**](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)来选择它，请给您的按钮一个，类似于：

```
window.onload = function () {
    var f = function(caller) {
        console.log('test');
    };

    var myButton = document.getElementById('myButton');
    myButton.addEventListener('click', function(){
        f(this);
    });
}; 
```

* * *

[**演示**](http://jsfiddle.net/xrm9P/)- 使用`window.onload()`和`addEventListener()`

* * *

# c++ - c++虚拟继承初始化顺序

> ID：15885601
> 
> 赞同：3
> 
> 时间：2013-04-08T17:49:14.777
> 
> 标签：c++, virtual, multiple-inheritance

![](https://i.stack.imgur.com/AX4KU.jpg)

嗨，正如您在示例中看到的构造顺序是： – **U1 U2 YX V2 V1 V3 V4 B1 B2 D**

我的理解是：**U1 U2 YX**被初始化是因为**V2**是第一个直接虚拟继承到 D 的，为了初始化它需要初始化这些**U1 U2 YX**。在那之后**V2**被初始化，但是为什么**V1在****V3**之前被初始化，虽然从**V3**有直接的虚拟继承。

请忽略节点和箭头的数量，注意红色箭头是非虚拟继承，黑色箭头是虚拟的。

*注意：原始文件可以在[那里](http://webcourse.cs.technion.ac.il/236703/Winter2012-2013/ho/WCFiles/12%2520-%2520Multiple%2520Inheritance%2520-%2520c%2B%2B11.pdf)找到。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:18:31.993

这是我对这个例子的理解。它符合施工顺序，所以我相信它是正确的。但是，我不确定。

首先，箭头的数字很重要，因为它们告诉您定义基类的顺序。仅用`D`作示例，该类定义如下：

```
class D : virtual V2, B1, B2, virtual v3 {...} 
```

鉴于此，我的下一步是遍历图并将所有类放入深度优先顺序，无论它们是否是虚拟的。大括号表示基类。括号表示已经在我的类列表中的虚拟基类：

```
D {V2 {X {U1, U2}, Y {(U2), (U1)}}, B1 {V1, (V2), V3 {(Y), (U2)}, V4}, B2 {(V4-V1)}, (V3) 
```

对我来说，这说

*   要构造 D，首先我需要 V2。
*   V2 需要 X，X 需要 U1 和 U2。
*   Next V2 需要 Y，它需要 U2 和 U1，但两者都已经在我的列表中。
*   下一个 D 需要 B1。
*   B1 需要 V1、V2、V3 和 V4，而 V2 已经在我的列表中。
*   V3 需要 Y 和 U2，但两者都已在我的列表中。
*   下一个 D 需要 B2，它需要 V4 到 V1，都在我的列表中。
*   最后，D 需要 V3，但同样，它已经在我的列表中。

鉴于此，我现在将删除多余的基类，留下：

```
D {V2 {X {U1, U2}, Y}, B1 {V1, V3, V4}, B2} 
```

下一部分是找到非虚拟基类并对我的列表进行调整。

*   V2 需要 X 和 Y，其中 Y 是虚拟的，所以 Y 必须在 X 之前。

关于这一点的额外一点：鉴于您的问题，我希望您也认为 U2 应该在 U1 之前，因为 Y 是在 X 之前构造的，并且在 Y 中，U2 是首先派生的。但是，这不会发生。相反，X 的虚拟基类按顺序完成，然后是 Y，最后是 X。

这会将我的列表调整为以下内容：

```
D {V2 { {U1, U2}, Y, X}, B1 {V1, V3, V4}, B2} 
```

最后，B1 是非虚拟的，所以它需要在 V1、V3 和 V4 之后。这留下：

```
D {V2 { {U1, U2}, Y, X}, {V1, V3, V4}, B1, B2} 
```

请注意，B2 也是非虚拟的，如果它不在我的列表中，则需要考虑它。

这给了我一个令我满意的订单。唯一的问题是我在基类之前列出了派生类，我们知道基类是首先构造的。剩下的唯一两个有问题的地方是

*   D，需要放在最后。
*   V2，它需要在它的孩子之后。

所以我将调整我的列表以移动这两个项目，V2 在 X 之后，D 在 B2 之后。

```
{ { {U1, U2}, Y, X} V2, {V1, V3, V4}, B1, B2} D 
```

现在我将删除括号并：

```
U1, U2, Y, X, V2, V1, V3, V4, B1, B2, D 
```

您可以看到这与图中构造函数的顺序相匹配，并且实际上与我使用 Visual Studio 2012 构建时调用的顺序相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:57:27.610

我只会解决您关于 V1 和 V3 顺序的问题。

第一步是：

> **在深度优先**、**左右**扫描中应用拓扑排序排序继承 DAG ，
> 
> *   虚拟和非虚拟继承被**同等对待**。

根据这条规则，V1 在 V3 之前：V1 更深，在 V3 的左侧，无论继承类型如何。从左到右的顺序由从 D 到相关节点的连续祖先的直接继承等级定义。该等级由图节点之间的边承载（因此不能忽略）：V3 具有等级 (3)，而 V2 具有等级 (1) - 并且 (2,2) 被较高的取消 - V1 的秩为 (2, 1)。因此，这 3 个节点之间的顺序是 V2，然后是 V1，然后是 V3。

*注意：考虑到 V2 和 V3 与其他节点保持的关系数量，该图没有以正确的左右顺序描述节点，而 V1 没有任何祖先。*

第2步是：

> 构造**所有**虚拟基类（立即和非立即）
> 
> *   使用**排名顺序**。
> *   不要构造两次
> 
> [...]

V1 和 V3 都是虚拟继承的，V1 用于 B1，V3 用于 D，因此它们都在此步骤中按照步骤 1 中确定的顺序构建。

# javascript - 如何从 Bing api 获取头条新闻

> ID：15885608
> 
> 赞同：2
> 
> 时间：2013-04-08T17:49:43.443
> 
> 标签：javascript, bing-api, feed

好吧，似乎我发布的每个问题都被否决了，所以我再次查看了常见问题解答，我不确定我做错了什么。如果您要投反对票，我真的很感激某种评论或反馈，让我知道 stackoverflow 社区对“好问题”的期望，或者我猜如何正确提问？.....

我无法弄清楚如何从 Bing(azure) API 获取“热门新闻”或“最受欢迎”新闻。

我能够搜索“”并获得所有新闻结果（最近的），但我无法找到一种方法来获取“头条新闻”（请参阅​​此处的头条新闻部分：http: [//www.bing.com /news?q=top+stories&FORM=Z9LH3](http://www.bing.com/news?q=top+stories&FORM=Z9LH3) )

我浏览了[文档](http://go.microsoft.com/fwlink/?LinkID=272626&clcid=0x409)没有运气，并搜索了谷歌。有谁知道 Bing 是否将此功能作为其 API 的一部分提供？

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:31:02.997

找出 Bing API 查询的最佳方法是使用 Azure“[服务资源管理器](https://datamarket.azure.com/dataset/explore/bing/search)”工具...

如果您查看您的初始 URL，您只是在查看带有“头条新闻”查询的新闻部分。在这种情况下，我相信这是您要查找的查询：

[https://api.datamarket.azure.com/Bing/Search/v1/Composite?Sources=%27news%27&Query=%27top%20stories%27&Options=%27EnableHighlighting%27](https://api.datamarket.azure.com/Bing/Search/v1/Composite?Sources=%27news%27&Query=%27top%20stories%27&Options=%27EnableHighlighting%27)

此外，供参考的[文档](https://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44)登录页面更详细地描述了 API 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T22:59:59.787

选择的答案不正确。

根据[微软支持](https://social.msdn.microsoft.com/Forums/azure/en-US/6994e91a-317b-4575-aa6f-d8645b68e062/bing-search-operators-to-exclude-domain-from-results?forum=DataMarket)，

> ...bing.com 和 Bing Search API 不提供功能或查询结果奇偶校验...

所选答案将从`News`API 返回包含或相关的结果`Query` `top stories`。它**不会返回与**[Bing.com 新闻（热门故事）](http://www.bing.com/news/search?q=Top%20Stories&FORM=NSBABR)页面相同的结果。

在新的 API 中，`Breaking News`查询（[Bing.com API v2 中的空查询参数](http://msdn.microsoft.com/en-us/library/dd250884.aspx)）是不可能的，因为像这样的空查询`https://api.datamarket.azure.com/Bing/Search/v1/Composite?Sources=%27news%27&Query=%27%27&Options=%27EnableHighlighting%27`将返回一小组旧的（对我来说，2014 年 10 月）项目。

我有一张微软支持的票，一旦我听到更多信息，我会更新。

# python - 同一行键入数字

> ID：15885609
> 
> 赞同：-1
> 
> 时间：2013-04-08T17:49:45.940
> 
> 标签：python, python-3.x

我知道如何从 python 输入数字。

```
>>> for  a in range(1,11):
     print(a)

1
2
3
4
5
6
7
8
9
10 
```

这里的输出是一行接一行的。所以我想在同一行输入数字而不使用列表和堆栈。我这可能吗？那我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:51:28.227

[print](http://docs.python.org/3.1/library/functions.html#print)会在您输入的字符串后自动添加一个换行符，这就是它在不同行上打印每个数字的原因。要更改此行为，您必须更改`end`函数调用的参数。

```
for a in range(1,11):
    print(a, end=' ') 
```

* * *

**编辑：** 该`end`参数包含一个字符串，该字符串在您输入的字符串之后打印。默认情况下，`\n`在每次打印后`\n`添加：

```
print("Hello!") # actually prints "Hello!\n" 
```

您可以将参数更改为您喜欢的任何内容：

```
print("Hello!", end="...") # prints "Hello!..."
print("Hello!", end="") # prints "Hello!" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:00:42.680

尝试这个：

```
>>> print(' '.join(str(i) for i in range(1,11)))
1 2 3 4 5 6 7 8 9 10 
```

# php - 当用户离开网站时销毁数据库会话

> ID：15885610
> 
> 赞同：0
> 
> 时间：2013-04-08T17:49:46.263
> 
> 标签：php, session, cakephp, cakephp-2.0

我正在使用 cakephp 2，最近将我的会话处理程序更改为数据库。一切似乎都工作正常，除非用户在未注销的情况下离开网站，会话保持活动状态。

在我的 core.php 文件中，我配置了数据库会话处理程序，如下所示：

```
Configure::write('Session', array(
    'defaults' => 'database'
)); 
```

当用户离开站点而不注销时，如何配置 cakephp 数据库会话以销毁会话？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:54:03.197

你不能。PHP 按需运行，并且不可能知道用户何时停止浏览该站点。你基本上有2个选择：

1.  编写一个脚本来检查您的会话存储，以查找在 X 秒内未访问的会话，并将其清除。使用 cron 作业调用此脚本。
2.  当用户回来时检查会话，并清除所有过时的数据。您仍然需要不时进行一些清理，以清除来自*永远不会*回来的用户的会话数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:54:11.390

会话存储在服务器上，因此如果浏览器关闭或用户转到不同的页面，它没有义务通知服务器此操作。

会话在服务器中存储一定时间，一段时间不活动后，会自动销毁。

查看[CakePHP 食谱](http://book.cakephp.org/2.0/en/development/sessions.html)中的会话信息以获取更多详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:46:46.910

有一个可能的解决方案在某些情况下可行，但可能不是一个很好的解决方案：

```
<body onUnload="ajaxFunctionToDeleteSession();">
 some random stuff goes here
</body> 
```

所以`ajaxFunctionToDeleteSession`会通过 Ajax 调用一个会删除会话的 url。

我看到的一些问题：

1.  每当有人关闭您网站的打开页面时调用。这意味着如果有人打开您网站的多个窗口并关闭一个窗口，他们的整个会话（包括其他打开的选项卡）都会关闭
2.  在某些情况下，有人访问您的站点，不小心关闭了打开的窗口，重新打开了站点，并且由于会话消失了，事情看起来会有所不同。

但是，如果您绝对必须在有人离开站点时删除会话，这可能会为您提供解决问题的方法。

# forms - 网络表单生成器（生成器）

> ID：15885611
> 
> 赞同：1
> 
> 时间：2013-04-08T17:49:58.937
> 
> 标签：forms, orbeon, xforms

在编写新的代码之前，我正在开始一项关于 Web 表单生成器技术的比较研究（为什么要重新发明轮子？）。我想知道 XForms 是否是最佳选择的标准？

使用 java 编写的库或工具使用 java/xml/xslt 生成 Web 表单和调查是否有经验？

例如也支持休眠持久性的工具？我现在正在观看使用 XForms 和 XPL 的 Orbeon Form builder，但我想 java 世界中是否存在其他工具？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T14:27:42.580

根据您的需要，XForms 可能是最佳选择。当然，它是一个标准，但使用它取决于你想要完成什么。

如果您需要可以存储为行列的简单表单，您可以[使用 Google Drive 上的表单](https://support.google.com/drive/answer/87809?hl=en)，但是如果您需要复杂的表单来构建 XML 文档，那么 XForms 是您的选择。

考虑到存储必须是 XML 数据库才能利用 XForms 的全部功能。例如，看看[eXist-db](http://exist-db.org/)（基于 Java 构建）或[BaseX](http://basex.org/)。在 Java 中有一个名为[XIndice](https://xml.apache.org/xindice/)的项目，但它现在已被放弃。

在重新发明轮子之前，也许[史蒂夫卡梅隆的这个项目会让你感兴趣……](http://www.pozible.com/project/27074)

# jquery - jquery 日历/日期选择器

> ID：15885612
> 
> 赞同：0
> 
> 时间：2013-04-08T17:50:01.310
> 
> 标签：jquery, datepicker

我无法让我的日期选择器在单击图像时弹出并将所选输入发送到我的文本输入字段。基本上，当用户单击日历图像时，应该会出现 datepicker 弹出窗口，他们选择一个输入，然后它会出现在文本输入中。此外，如果他们输入日期然后检查日历，我需要文本输入以在日历上显示正确的日期。这是我的输入和图像部分。

```
<p>Date: <input type="text" class="screening_01" id="screening_01" maxlength="10" size="10" value="<%=session.getAttribute("screening_01")==null?"":session.getAttribute("screening_01")%>" /></p>
<div id="calender"><img src="/images/calendar.png" /></div> 
```

这是一个有效的日期选择器，但它仅在我单击文本输入时才有效。

```
$(function() {
    $( "#screening_01" ).datepicker();
}); 
```

现在我需要在单击日历图像或 div 时弹出它，也许是这样的？（当然不工作）

```
$("#calender").click(function() {
       $("#datepicker").show(); 
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:53:37.660

这就是您正在寻找的，使用以下`show`方法：

```
$("#calender").click(function() {
   $("#screening_01").datepicker( "show" );
}); 
```

如有疑问，请始终查看 API 参考： [http ://api.jqueryui.com/datepicker/#method-show](http://api.jqueryui.com/datepicker/#method-show)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:55:13.970

日期选择器已经有一个在图标图像上触发的选项。

```
$( "#datepicker" ).datepicker({
      showOn: "both", //image click and focus on input field
      buttonImage: "images/calendar.gif",
      buttonImageOnly: true
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:55:33.043

使用日期选择器的[显示](http://api.jqueryui.com/datepicker/#method-show)选项并调用它`#screening_01`

```
$("#calender").click(function() {
  $( "#screening_01" ).datepicker('show');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:57:56.060

可能这会帮助你...

```
$( "#screening_01" ).datepicker({
  showOn: "button",
  buttonImage: "images/calendar.gif",
  buttonImageOnly: true
}); 
```

供参考：http: [//jqueryui.com/datepicker/#icon-trigger](http://jqueryui.com/datepicker/#icon-trigger)

# c# - .Net 相当于可部署的 EAR

> ID：15885615
> 
> 赞同：1
> 
> 时间：2013-04-08T17:50:22.703
> 
> 标签：c#, mef

在我们的其中一个 Java EE 环境中，我们能够将模块封装在 java ear 文件中，并将它们部署到我们的 JBoss 环境中，以便用户可以使用它们。在 .Net 世界中，如何在运行时环境中实现类似的功能？这是MEF的用武之地吗？还是会以完全不同的方式处理它？

任何建议将不胜感激。

谢谢，

小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:52:46.400

您可以将它们编译为单独的程序集。这些模块程序集可以与您的主应用程序分开分发。

在 MEF 中组合对象时，可以指定[`DirectoryCatalog`](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.directorycatalog.aspx)(或[`ApplicationCatalog`](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.applicationcatalog.aspx)) 以包含给定目录中所有程序集的所有模块：

```
var catalog =  new DirectoryCatalog(".\modules");
var container =  new CompositionContainer(catalog); 
```

# html - Dart中的事件显示何时加载div的所有背景图像？

> ID：15885623
> 
> 赞同：0
> 
> 时间：2013-04-08T17:50:55.333
> 
> 标签：html, dom, dart

我应该听什么事件来查看所有背景图像何时加载？

指定我想将哪些背景图像作为预加载器选项也很酷？

```
#preloader{
  position:absolute;
  height:100%;
  width:100%;
  } 
```

这是我用来覆盖整个页面的基本 div。一旦加载了所有背景图像，或者我更喜欢的那些，我想通过一些过渡隐藏这个预加载器 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-14T13:57:31.707

当背景图像完成加载时，似乎没有触发事件；但是，如果您可以将它们转换为普通`<img>`标签，则可以使用这些`onload`事件。

[这个 StackOverflow 答案](https://stackoverflow.com/a/5058336/25124)中有更多信息。

# java - 关于 Concurrenthashmap 的事实

> ID：15885625
> 
> 赞同：3
> 
> 时间：2013-04-08T17:51:00.367
> 
> 标签：java, concurrenthashmap

我已经阅读了`ConcurrentHashmap`来自不同来源的一些声明，并想验证它们是否确实如此。

1.  在创建 a 的迭代器后`ConcurrentHashmap`，只有线程的删除和更新操作才能保证得到反映。编辑/删除后迭代器是否刷新其快照？为什么迭代器会以不同于 ADD 的方式处理更新/删除。

2.  `ConcurrentHashmap`将其数据分片以减少写入器锁争用。该`concurrencyLevel`参数直接指定类内部创建的分片数量。如果我们简单地使用无参数构造函数，并接受默认配置，地图将在您添加第一个值之前实例化 16 个分片所需的对象……这里的分片是什么意思？它是地图中的一个数据桶 - 还是整个地图的副本。我理解这类似于数据库中的一个页面，可以独立锁定毛皮更新。为什么会`concurrencyLevel`影响记忆呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:06:24.010

> 迭代器在编辑/删除后是否刷新其快照？为什么迭代器对待更新/删除与添加有任何不同。

在 API 中解释了 CHM 的迭代器，这样

> 类似地，迭代器和枚举返回反映哈希表在创建迭代器/枚举时或之后的某个时间点的状态的元素。

这意味着返回的迭代器可能会或可能不会反映迭代时 Map 中发生的更改。想象一下，如果您创建迭代器并遍历整个段并转到下一个段。在您进入下一个段后，您完成遍历的第一个段完成了添加或删除。好吧，你不会看到，没关系，它没有违反 API。

至于你的第二个问题。隐含添加，添加和删除之间的可见性没有区别。

> 那么为什么并发级别会影响内存呢？

自 ConcurrentHashMap 发布以来，内存一直是个问题。默认情况下，每个级别的并发都会创建一个 Segment。该段有一个 HashEntry 表，也是一个可重入锁（因此也是所有必需品）。

Java 8 是[CHMv8](http://gee.cs.oswego.edu/cgi-bin/viewcvs.cgi/jsr166/src/jsr166e/ConcurrentHashMapV8.java?revision=1.100&view=markup)版本，它实际上解决了这个问题。

[您可以在此处](http://www.javaspecialists.eu/archive/Issue193.html)阅读有关内存的更多信息，特别是：

> 在进行内存分析时，JVisualVM 表明最大的罪魁祸首是 ConcurrentHashMap.Segment 类。每个 ConcurrentHashMap 的默认段数是 16。段内的 HashEntry 表可能很小，但每个段都是一个 ReentrantLock。每个 ReentrantLock 都包含一个 Sync，在本例中是一个 NonFairSync，它是 Sync 和 AbstractQueuedSynchronizer 的子类。其中每一个都包含一个节点队列，这些节点维护线程正在发生的事情的状态。它在确定公平性时使用。该队列和节点使用大量内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:07:33.567

1.  如果您指的是 entrySet 枚举，这将（最终）反映在父对象上执行的添加和删除操作。但是，枚举本身不支持添加操作。

2.  在这种情况下，分片本质上是哈希表的哈希表。假设 ConcurrentHashMap 的后备数组包含 1024 个条目。如果没有分片，这意味着对象的哈希值将映射到 [0, 1023] 之间的整数。使用分片意味着后备数组包含 16 个 64 个条目的后备数组，即 [0, 1023] 后备数组现在是来自 [0, 63] 的数组，来自 [64, 127] 的另一个数组，等等。假设你'正在修改散列为 100 的对象 - 如果不进行分片，您将锁定整个 [0, 1023] 后备数组，但通过分片，您只会锁定 [64, 127] 子数组，允许其他线程修改其他碎片。你拥有的分片越多，ConcurrentHashMap 的并发性就越大，但是，您拥有的分片越多，维护它们所需的内存就越多。（然而，这不是乘法效应，使用 16 个分片会将使用的内存总量乘以 16。相反，它是一种加法效应；假设维护每个分片的数据结构需要 64 个字节，因此使用 16 个分片向数据结构添加 1024 字节，使用 64 个分片向数据结构添加 4096 字节。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:03:44.337

请记住，哈希表只是其核心的一个数组，它具有一些巧妙的功能，允许您使用非整数键并仍然获得恒定的时间访问。

1.  对于添加，添加元素可能会导致哈希表增长，从而创建一个新的底层数组并重新排序表的元素。散列的迭代器可能会指向旧数组，以便它可以保留其位置。

2.  通常，在这种情况下，分片意味着地图被分割成一定数量的子数组，因此您一次不太可能命中多个子数组。如果您指定较少数量的分片，实际上对于大多数实例来说更好，2 通常就足够了，除非您在该表上存在大量争用的服务器上运行。也可以看看：

[http://ria101.wordpress.com/2011/12/12/concurrenthashmap-avoid-a-common-misuse/](http://ria101.wordpress.com/2011/12/12/concurrenthashmap-avoid-a-common-misuse/)

# android - 如何完全结束启动器？

> ID：15885626
> 
> 赞同：0
> 
> 时间：2013-04-08T17:51:03.190
> 
> 标签：android

我的应用程序用作启动器。但是，我想我把它做成发射器是做错了什么。例如，用户选择我的应用程序作为**默认启动器**（单击“始终”）。但是，当用户退出应用程序时，它会再次出现，因为它是默认启动器。我该如何解决？

```
<activity
      android:name="com.comeks.cocuktablet.Main"
      android:label="@string/app_name"
      android:launchMode="singleInstance"
      android:screenOrientation="portrait" >
      <intent-filter>
           <action android:name="android.intent.action.MAIN" />

           <category android:name="android.intent.category.HOME" />
           <category android:name="android.intent.category.DEFAULT" />
           <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
</activity> 
```

代码来自我的清单。我也想制作**MAIN**活动启动器。

**编辑：** 我意识到我的确切错误。我还编写了一个代码来启动我的应用程序。问题是当我关闭我的设备并再次打开它时，我无法退出它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:33:51.907

谢谢你的所有回答。我通过在退出应用程序时调用 Android 的主启动器解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:07:37.383

只需删除

```
 <category android:name="android.intent.category.HOME" />
       <category android:name="android.intent.category.DEFAULT" /> 
```

来自意图过滤器

# css - 背景图像的响应式网页设计

> ID：15885628
> 
> 赞同：0
> 
> 时间：2013-04-08T17:51:08.457
> 
> 标签：css, responsive-design, background-image

我发现 StackOverflow 非常有用，所以提前感谢您的帮助。

在[http://test2.heyscout.com/](http://test2.heyscout.com/)上，我想知道如何在我的“英雄 div”中正确设置我的背景图像以进行响应式网页设计。我一直在玩很多设置，但我希望它：

*   由于浏览器的大小，始终保持在原位而不会跳来跳去（例如，在手机上，它会错位或不应该有空白）
*   即使我在 em 中设置了“离线验证任何人”，它也无法正确调整大小
*   该按钮在移动设备上看起来很奇怪

控制“英雄 div”的最佳做法是什么？我推测它必须对最小高度或固定实际图像的尺寸做一些事情。我应该以百分比而不是像素设置英雄 div 的高度吗？

此外，任何关于如何让我的“三个月 div”始终很好地填满页面底部 1/3 的建议都会很棒——我想当浏览器的高度大于预期时，它看起来会很奇怪。我读过最好单独为 RWD 保留 height 属性，但我想知道是否有任何技巧可以确保它正确调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:00:09.763

你看过媒体查询吗？基本上，它们允许您根据浏览器宽度（和高度）设置特定的 CSS。这将允许您控制页面在特定浏览器大小下的外观。

示例 - 不同宽度的 CSS：

```
@media screen and (max-width: 600px) {
  /* add some CSS here for 600px maximum width*/
}

@media screen and (max-width: 960px) {
  /* add some CSS here for 960px maximum width*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:00:37.610

要使背景图像始终填充 div，请使用`background-size: cover`^([2](https://developer.mozilla.org/en-US/docs/CSS/background-size))，除非您需要支持 IE8。

如果您的字体大小在 pc/tablet/handheld 上看起来不正确，请尝试使用[媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)来设置特定分辨率的字体大小。

我不知道如何帮助你的按钮“看起来很奇怪”，除了提供大量的同情。

将来，请尽量让您的问题更加集中。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:41:31.190

给

```
background-size:contain; 
```

这可能会解决您的问题，因为它会通过包含自动调整大小！

# c# - VB6 中的 COM 控件：使容器脱离控件

> ID：15885629
> 
> 赞同：7
> 
> 时间：2013-04-08T17:51:09.133
> 
> 标签：c#, com, vb6, containers

我有我在 VB6 内部使用的 ac# 控件，它基本上是一个带有圆角的面板。我想知道是否有办法使该控件成为一个容器，有点像 Frame 是一个容器。基本上我希望能够把东西放在里面，这样它们就可以一起移动，最重要的是把东西放在它的*前面*。

现在，如果我在它上面放置一个标签或一个命令，它就会在我的 COM 控制和使用之后`Bring to Front`，并且`Send to Back`什么也不做。

我需要在 vb6 中将其声明为容器吗？代码必须来自c#吗？

**编辑：**

我已经签署了保密协议，所以我不能在这里发布整个代码，但我会发布一些并解释一些。

```
public class AzPanel : Panel
{
    protected const int BORDER_WIDTH = 3;
    protected int BORDER_RADIUS = 4;
    private object _lock = new object();
    private bool regionNeedsRefresh = false;

    public AzPanel() : base()
    {
        this.SetStyle(
          ControlStyles.DoubleBuffer |
          ControlStyles.AllPaintingInWmPaint |
          ControlStyles.UserPaint, true);
        this.SetStyle(ControlStyles.SupportsTransparentBackColor, true);
        this.SetStyle(ControlStyles.Selectable, false);
        base.BackColor = Color.Transparent;
        this.BorderColor = Color.DarkRed;
        this.ContentColor = Color.DarkGoldenrod;
        this.DoubleBuffered = true;

        base.Padding = new Padding(3, 3, 4, 4);
    }
} 
```

还有一些其他的东西可以定义一个圆角区域，但它基本上只是一个面板。我有一个扩展 AzPanel 的类，AzPanelCOM 具有以下属性：

```
[Guid("...")]
[ProgId...]
[ComVisible(true)]
[ComdefaultInterface...]
[ClassInterface(ClassInterfaceType.AutoDispatch)] 
```

以及一个接口 IAzPanelCOM，将其公开给 VB6。

```
[Guid("...")]
[ComVisible(true)]
public interface IAzPanelCOM
{
    void DesignTimeReload();
    //some other things
} 
```

在构建时，我使用“regasm.exe”创建一个类型库 (tlb)，我在运行 Windows xp 和 vs2010 (.net framework 4.0) 的虚拟机上导入 VB6。

然后我可以实例化 AzPanel，调整它们的大小并在设计时移动它们，并且我可以毫无问题地向它们添加命令（按钮）。然而，当涉及到形状或标签时，它们似乎出现在面板后面，我无法将它们带到前面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-23T20:19:23.897

根据@MarkBertenshaw 评论

> 您不能将无窗口控件（形状、标签等）与 .NET 容器组件一起使用。但是，您可以在 .NET 组件中使用 VB 窗口控件，例如 Frame（无边框）或 Picture Box，您可以在其中放置这些无窗口控件

# ruby-on-rails - 使用当前表单记录 ID 保存到另一个模型数据库 - Rails

> ID：15885630
> 
> 赞同：1
> 
> 时间：2013-04-08T17:51:09.303
> 
> 标签：ruby-on-rails, helper, model-associations

我正在尝试从`text_area`表单中的字段中获取文本，以使用当前模型的 ID 保存到不同模型中的数据库。

目前，这有效，但只会保存整数。如果我将文本放入“注释”字段，则将其保存为“0”。我怀疑这工作正常，但我的难题缺少一块。这是因为我只希望“票证”保存 note_id，因为每个“票证”将有多个“备注”。

如何使用 ID 将 Note 保存在 Note Model 中，并将其`note_id`与此特定工单相关联？

表单 - **/app/views/tickets/_form.html.erb**

```
<%= form_for(@ticket) do |f| %>
<% if @ticket.errors.any? %>
<div id="error_explanation">
<h2><%= pluralize(@ticket.errors.count, "error") %> prohibited this ticket from being saved:</h2>
<ul>
<% @ticket.errors.full_messages.each do |msg| %>
<li><%= msg %></li>
<% end %>
</ul>
</div>
<% end %>

<div class="field">
  <%= f.fields_for :notes do |u|%>
  <%= u.label :note %>
  <%= u.text_area :note, :size => "101x4", :placeholder => "Leave notes here." %>
<% end %>
</div>

<div class="actions">
   <%= f.submit %>
</div>
<% end %> 
```

**票证_controller.rb**

```
class TicketsController < ApplicationController
# GET /tickets
# GET /tickets.json
def index
@tickets = Ticket.all

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @tickets }
end
end

# GET /tickets/1
# GET /tickets/1.json
def show
@ticket = Ticket.find(params[:id])

respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @ticket }
end
end

# GET /tickets/new
# GET /tickets/new.json
def new
@ticket = Ticket.new
@ticket.notes.build

respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @ticket }
end
end

# GET /tickets/1/edit
def edit
@ticket = Ticket.find(params[:id])
end

# POST /tickets
# POST /tickets.json
def create
@ticket = Ticket.new(params[:ticket])

respond_to do |format|
  if @ticket.save
    format.html { redirect_to @ticket, notice: 'Ticket was successfully created.' }
    format.json { render json: @ticket, status: :created, location: @ticket }
  else
    format.html { render action: "new" }
    format.json { render json: @ticket.errors, status: :unprocessable_entity }
  end
end
end

# PUT /tickets/1
# PUT /tickets/1.json
def update
@ticket = Ticket.find(params[:id])

respond_to do |format|
  if @ticket.update_attributes(params[:ticket])
    format.html { redirect_to @ticket, notice: 'Ticket was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @ticket.errors, status: :unprocessable_entity }
  end
end
end

# DELETE /tickets/1
# DELETE /tickets/1.json
def destroy
@ticket = Ticket.find(params[:id])
@ticket.destroy

respond_to do |format|
  format.html { redirect_to tickets_url }
  format.json { head :no_content }
end
end
end 
```

**笔记.rb**

```
class Note < ActiveRecord::Base
belongs_to :ticket
attr_accessible :note, :ticket_id
end 
```

**票务.rb**

```
class Ticket < ActiveRecord::Base
attr_accessible :notes_attributes
accepts_nested_attributes_for :notes
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:54:04.473

这是因为`note_id`是一种`integer`类型。

使用`nested models`： [参考这个嵌套模型](https://stackoverflow.com/questions/7715293/creating-nested-models-rails-3-1)

**模型：**

```
class Ticket < ActiveRecord::Base
  has_many :notes
  attr_accessible :note_id, :notes_attributes
  accepts_nested_attributes_for :notes
end 
```

**看法：**

```
<%= form_for(@ticket) do |f| %>
    <%= f.fields_for :notes do |u|%>
      <%= u.label :note %>
      <%= u.text_area :note %>
    <% end %>
    <%= f.submit 'Submit' %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:59:33.853

你所拥有的是一个嵌套关联，`Ticket`作为“父级”。关联由从模型中`note_id`的链接到. 您现在正在做的是手动操作该数字关联。Rails 知道该列应该是一个整数，它正在获取您尝试插入的文本并将其转换为一个数字（在这种情况下为零）。因此，您现在可能有一堆孤立的行。`Note``id``Ticket``note_id`

最终，为了完成您想要做的事情，您的表单将需要为该关联模型提供字段。处理此问题的一种方法是`accepts_nested_attributes_for`在`Ticket`模型中使用。像这样：

```
class Ticket < ActiveRecord::Base
    has_many :notes
    accepts_nested_attributes_for :notes
end 
```

在您的表单中，您可以轻松地创建一个嵌套表单，如下所示：

```
<%= form_for(@ticket) do |f| %>
   <div class="field">
        <%= f.fields_for :notes do |f_notes|%>
            <%= f_notes.label :note %><br />
            <%= f_notes.text_area :note, :size => "101x4", :placeholder => "Please leave notes here."%>
        <% end %>
    </div>
<% end %> 
```

**编辑**几乎忘记了：查看Ryan Bates处理嵌套属性的[Railscast](http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast)

**编辑 2**正如 codeit 指出的那样，您不需要`attr_accessible :note_id`in Ticket。由于您已经指出 a`Ticket`有很多`Notes`，并且`Note`属于`Ticket`，因此外键列将在`Note`模型中显示为`ticket_id`，您已经拥有了。在票据模型中使用 note_id 是没有用的，而且也是荒谬的，因为 has_many 描述了复数关系（不能用单列表示）。

# ruby - 如何遍历ruby中的哈希并确定最终值

> ID：15885636
> 
> 赞同：0
> 
> 时间：2013-04-08T17:51:23.973
> 
> 标签：ruby

我有一个像这样打印的变量：

```
{:type1=>:poor, :type2=>:avg, :type3=>:best} 
```

我想遍历这个哈希并根据以下规则打印出最终值

*   如果任何类型的值为，`:best`则最终值为`best`
*   如果任何类型的值是`:avg`并且没有，`best`那么最终值是`avg`
*   否则最终值为`poor`

基本上最强的赢了。

我尝试了以下

```
def final_value(values)
  val = "poor"
  values.each do |key, val|

  end
  val
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:58:03.013

使用Hash的has_value？方法。

```
val = :poor;
val = :avg  if values.has_value?(:avg);
val = :best if values.has_value?(:best);
val 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:56:04.417

像这样的东西？

```
final_val = :poor
values.each() do |val|
    if val = :avg && final_val = :poor
        final_val = :avg
    end
    if val = :best && final_val = :avg
        final_val = :best
    end
end
return final_val 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:05:52.267

您可以按以下方式实现所需的功能：

```
def final_value(values)
    val = :poor;
    values.each do|k, v|
        if(v==:best)
            val=:best;
            break;
        elsif(val==:poor && v==:avg)
            val=:avg;
        end
    end
    puts "Final value is: "+val.to_s;
end

values = {:type1=>:poor, :type2=>:avg, :type3=>:best};
final_value(values) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T18:22:12.640

```
def compare(h,val)
 m = ((h.has_value?(val) and val != :poor) ? ((val == :best or h.has_value?(:best))? :best : :avg ) : :poor)
end
h = {:type1=>:poor, :type2=>:avg, :type3=>:best}

p compare(h,:avg) #:best
p compare(h,:trr) #:poor
p compare(h,:best) #:best 
```

# actionscript-3 - ActionScript 3 树 - 鼠标悬停“X”秒后弹出节点值

> ID：15885645
> 
> 赞同：0
> 
> 时间：2013-04-08T17:52:12.600
> 
> 标签：actionscript-3, flash, actionscript

我对 ActionScript 3 相当陌生（如果这是一个幼稚的问题，我很抱歉），我正在处理一个使用“树”菜单的现有项目。树中的每个节点代表应用程序中的一个部分。不幸的是，某些部分名称（显示在节点的显示值中）相当长，需要截断文本。因此，有时节名称会被截断。为了解决这个问题，我们希望让用户能够通过将鼠标光标在节点上移动“X”秒来查看整个标题，在这种情况下，一个小的弹出窗口会呈现节点的标签。

**例子**

```
public var menuTree:Tree;

public function DoSomething(){
    menuTree.addEventListener(ListEvent.ITEM_ROLL_OVER, onListItemRollover, false, 100);
}

private function onListItemRollover(event:ListEvent):void {
    //IF MOUSE CURSOR IS STILL OVER NODE FOR "X" SECONDS DISPLAY NODE'S LABEL IN POP-UP
} 
```

提前谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:23:01.400

在不了解您的设置的情况下，我可能会设置如下内容：

```
var timer:Timer;
var currentItem:*

for each (var node:* in menuTree) {
  node.addEventListener(MouseEvent.MOUSE_OVER, overHandler);
  node.addEventListener(MouseEvent.MOUSE_OUT, outHandler);
}

function overHandler(event:MouseEvent):void {
  stopTimer();

  currentItem = event.currentTarget;

  timer = new Timer(2000, 1);
  timer.addEventListener(TimerEvent.TIMER, showPopup);
  timer.start();
}

function outHandler(event:MouseEvent):void {
  stopTimer();
}

function showPopup(timerEvent:TimerEvent):void {
  stopTimer();
  //show popup code here
  //use currentItem 
}

function stopTimer():void {
  if (timer) {
    timer.stop();
    timer.removeEventListener(TimerEvent.TIMER, showPopup);
  }
} 
```

因此，不是将事件侦听器添加到 menuTree，而是要循环遍历树中的每个项目并向该项目添加一个侦听器。然后，当用户滚动任何给定项目时，它会启动一个计时器，该计时器会在 2 秒后运行一个函数来显示弹出窗口。

# spring - Dispatcher servlet 无法映射我的请求。我使用的是 spring 2

> ID：15885646
> 
> 赞同：1
> 
> 时间：2013-04-08T17:52:14.087
> 
> 标签：spring, spring-mvc, web.xml

我有一个简单的弹簧应用程序。基本实现是，我的应用程序将接受 url。我在 web.xml 中有一个调度程序 servlet 的配置。从那里，请求被移交给 url 处理程序映射，后者将 url 映射到在 application-web.xml 中配置的控制器。正常情况下它工作正常

```
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:application-web.xml</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet> 
```

**应用程序上下文.xml**

```
 <bean id="urlMapping"
    class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">

    <property name="mappings">
        <props>
            <!-- Integration: URL Mapping for Page controllers START -->
            <!-- DEFAULT URL MAPPING -->
            <prop key="/*">pasController</prop>
        </props>
    </property>

</bean> 
```

但是对于一个特定的网址，我面临着问题。本地主机：7001//......../etc1/passwd

对于上面提到的url，dispatcher servlet无法将其映射到控制器，所以由于这个请求卡在weblogic级别，线程会卡住。我的意思是在映射过程中卡住了，容器无法知道怎么办。它甚至没有达到应用程序上下文级别。

如何克服这种情况？有什么办法可以使用上述类型的网址。我尝试了两个 spring 2 ang spring3 web mvc jars。

# c++ - 将 C++ 中的结构转换为 Ruby

> ID：15885653
> 
> 赞同：0
> 
> 时间：2013-04-08T17:52:26.323
> 
> 标签：c++, ruby, module, struct

我正在尝试转换此代码：

```
#pragma once
#include "thread.h"
#include <vector>

struct Process {
  enum Type {
    SYSTEM,
    USER
  };

  // process ID
  int pid;

  // process type
  Type type;

  // threads belonging to this process
  std::vector<Thread*> threads;

  // constructor
  Process(int pid, Type type) : pid(pid), type(type) {}
}; 
```

进入Ruby，但我无法弄清楚。我试过使用模块，但发现模块中不能有构造函数。我也不太了解 ruby​​ struct 类。如果有人可以解释这些或帮助我转换它，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:28:51.313

我认为这可能值得一看：

[C++ - 结构与类](https://stackoverflow.com/questions/4791883/c-struct-vs-class)

您的结构是大多数语言（包括 Ruby）所称的类（不是 C 风格的结构）：

```
class Process
  def initialize(pid, type)
    @type = type
    @pid = pid
    @threads = []
  end
  attr_accessor :type, :pid, :threads
end 
```

您需要`attr_accessor`使成员公开（这是 C++ 中结构的默认行为）。

# ckeditor - CKEditor 中的文本消失

> ID：15885658
> 
> 赞同：0
> 
> 时间：2013-04-08T17:52:52.900
> 
> 标签：ckeditor

我有一个问题。

我使用 CKEditor 4.1 替换 textarea。当使用 CKEditor 打开页面时，CKeditor 中的文本会消失。

像这样：

加载前： ![在此处输入图像描述](https://i.stack.imgur.com/Vr3Xj.jpg)

加载后：

![在此处输入图像描述](https://i.stack.imgur.com/YkcfB.jpg)

加载CKEditor 后不起作用。

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:21:48.297

我已经解决了 setTimeout 函数的问题

```
<script type="text/javascript">
setTimeout(function(){
    CKEDITOR.replace('textarea');
},1000);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T06:32:05.310

您可以在调用 ckeditor.js 的 Html 标记中设置文本

```
<div class="columns">
<div class="editor">
<div cols="10" id="editor1" name="editor1" rows="10"  contenteditable="true">
"Your Text Here...."
</div>
</div> 
```

然后加载您将看到“div”元素内的文本元素。

# internet-explorer - Internet Explorer 无法显示页面，但所有其他浏览器都可以

> ID：15885661
> 
> 赞同：1
> 
> 时间：2013-04-08T17:52:57.843
> 
> 标签：internet-explorer

升级到我网站的更高版本后，它在 Internet Explorer（任何版本）上停止工作。它仅显示 Internet Explorer“无法显示该页面”。

该站点建立在 linux 服务器上，由 smarty 组成。它显示在除 IE 之外的所有浏览器上。

如何调试问题？我已经安装并配置了 plesk。日志中有什么有用的吗？

# javascript - 在 CentOS 上安装 Node.js 应用程序

> ID：15885662
> 
> 赞同：1
> 
> 时间：2013-04-08T17:52:58.377
> 
> 标签：javascript, node.js, centos, vps

我有预装 CentOS 6.2 空白（32 位）和域名 mysite.com 的 OpenVZ VPS。我想在 CentOS 上安装 Node.js 和我的 javascript 应用程序，结果应该可以在 mysite.com 上访问。那么，我应该采取哪些步骤来实现这一点？请详细描述从零开始的过程。我是 Java 开发人员，从未使用过 unix 系统:(

最好的祝福

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:15:22.317

“Node.js 是一个基于 Chrome 的 JavaScript 运行时构建的平台，用于在浏览器之外轻松构建快速、可扩展的网络应用程序”。

在系统上安装 node it self 非常简单。您可以简单地访问[http://nodejs.org](http://nodejs.org)并下载与您的系统相对应的正确二进制文件，或者下载 source.tar.gz 并自行编译。

[在 github.com 的 wiki 下](https://github.com/joyent/node/wiki/Installation)有一套安装说明，将带您完成在三大平台上编译 node 的步骤。

我通常会在编译时添加一个前缀，以便将二进制文件移动到我想要存储它们的目录中。这可以是您希望节点在其下运行的用户的本地目录（例如 $HOME/bin）或者您可以将其设置为系统目录，系统上的每个用户都可以访问该节点。

```
$ tar -zxf node-v0.10.3.tar.gz #Download this from nodejs.org
$ cd node-v0.10.3
$ ./configure --prefix=/usr/local/bin
$ make
$ sudo make install 
```

您现在应该在系统上安装了 node 和 npm。从这里您可以检查以确保一切正常。

```
$ which node
$ /usr/local/bin/node
$ node -v
$ 0.10.3
$ which npm
$ /usr/local/bin/npm
$ npm -v
$ 1.2.11 
```

使用节点，您将从头开始构建您的服务器。有很多库可以帮助您做到这一点。内置的主要是[http ，它建立在](http://nodejs.org/docs/v0.10.3/api/http.html)[net](http://nodejs.org/docs/v0.10.3/api/net.html)之上。

要让您的应用程序可以从您的域访问，您只需启动您的节点应用程序并告诉它侦听端口（假设 http 或某些联网应用程序）。在 linux 端，您还需要确保您的节点进程列出的端口是打开的，以便可以与您的服务器建立连接。Linux 系统上最常见的防火墙是[Iptables](http://en.wikipedia.org/wiki/Iptables)。

我不是 Java 开发人员，所以我不知道部署 Java 小程序的正常工作流程是什么，也不知道它是如何服务的，所以我无法帮助您解决这个问题。

这应该让你开始。

# c++ - 分配后如何用字符串填充字符？

> ID：15885673
> 
> 赞同：1
> 
> 时间：2013-04-08T17:53:32.143
> 
> 标签：c++, pointers, memory-management, character

我有这个结构：

```
struct student {
  int id;
  string name;
  string surname;
}; 
```

我需要做的是使用这个声明来实现：

```
char* surname_name (student Student) 
```

这将格式化我输入的每个学生的格式，如“姓，名”，它会带回指针。

到目前为止我所做的是：

```
char* surname_name (student Student){
    char *pointer= (char*) malloc (sizeof(char)*(Student.name.length + Student.surname.length + 2)); // + 2 because of space and comma

    string::iterator it;
    int i=0;

    for (it= Student.surname.begin(); it != Student.surname.end(); it++){
        (*pointer)[i] = it; // here it gives me error
    }

    ... // here still should be added code for comma, space and name
    return pointer;
} 
```

无论如何我都做不到，因为函数需要有这个声明是在任务中。如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:55:51.883

```
(*pointer)[i] = it; 
```

应该

```
*(pointer+i) = *it; //assigning the current char to correct position 
```

你也应该`i`适当增加。

你也可以用`std::string`which 来做简单的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:56:30.383

这应该可以解决问题：

```
char * surname_name (student Student){
    return strdup((Student.surname + ", " + Student.name).c_str());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T17:57:35.020

我更喜欢使用[`std::string::c_str`](http://en.cppreference.com/w/cpp/string/basic_string/c_str)：

```
string surname_name (const student &Student)
{
    return Student.name + " " + Student.surname;
}

// ...

do_something( surname_name(student).c_str() ); 
```

如果你真的想返回一个指针，你可以这样做：

```
char *surname_name (const student &Student)
{
    string s = Student.name + " " + Student.surname;
    char *p = new char [s.length()+1];
    strcpy(p, s.c_str());
    return p;
} 
```

不要忘记`delete`返回的指针。

# view - Monotouch 对话框 UI 选择器元素在哪里？

> ID：15885675
> 
> 赞同：0
> 
> 时间：2013-04-08T17:53:44.283
> 
> 标签：view, dialog, xamarin.ios, xamarin, picker

单点触控对话框（Xamarin.IOS）的自定义选择器元素在哪里？

// 更新

UIPickerView 将是与 UIActionSheet 一起作为单点触控对话框元素的绝佳元素。

相反，我开始手工构建，然后尝试将其放入 UIActionSheet。工作了几天（我是菜鸟），但在试图清理它的美感时遇到了困难（我想我现在只会坚持将选择器嵌入桌子的“好的”解决方案）。

以防万一其他人开始这次冒险，这里有一个链接来制作你的选择器：
[https ://www.youtube.com/watch?v=lXa9WZMcmoE](https://www.youtube.com/watch?v=lXa9WZMcmoE)

这是如何设置 UIActionSheet 的链接：http: [//monotouch.2284126.n4.nabble.com/UIActionSheet-Presenting-action-sheet-clipped-by-its-superview-warning-td3897607.html](http://monotouch.2284126.n4.nabble.com/UIActionSheet-Presenting-action-sheet-clipped-by-its-superview-warning-td3897607.html)

// 另一个更新

虽然不是使用 MT.D 的自定义选取器元素，但您可以通过链接控件的输入视图（视图对象，即文本字段）并将其输入视图属性设置为选取器来排序具有弹出选取器。每当您单击此控件时，选择器就会从底部滑入。想我只需要用我自己的选择器和某处的取消按钮来实现一个自定义视图......嗯：

[http://nomtek.com/tips-for-developers/working-with-pickers/](http://nomtek.com/tips-for-developers/working-with-pickers/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T05:42:44.067

您的更新是正确的 - 您需要创建一个继承自 EntryElement 的自定义 MT.D 元素，覆盖创建 UITextField 的方法并将字段的 InputView 设置为您选择的输入视图。我实际上只是写了一个关于这个的教程：[Custom MT.D Input View & Element](http://www.adabrasoftware.com/post/Custom-Input-Views-with-MonoTouchDialog)

# php - Laravel 迁移 - 表前缀问题

> ID：15885681
> 
> 赞同：2
> 
> 时间：2013-04-08T17:54:10.067
> 
> 标签：php, migration, laravel, laravel-3

我正在构建一个虚拟站点来测试 Laravel 3.x。

我现在正在创建我的站点迁移。一切都很好，直到出现以下错误：

```
SQLSTATE[42s02]: Base table or view not found: 1146 Table 'databasenamehere.prefix_laravel_migrations' doesn't exist 
```

问题是 laravel 突然开始为“laravel_migrations”表添加前缀（当它应该只与其他表一起使用时）。

我想知道我是否做错了什么，或者这是一个已知问题。

我正在尝试运行以下迁移（使用**php artisan migrate application**命令）：

```
public function up()
{
    Schema::create('siteinfo', function ($table) 
    {
        $table->engine = 'InnoDB';
        $table->string('name');
        $table->string('title')->nullable();
        $table->string('corp_name')->nullable();
        $table->string('corp_addr')->nullable();
        $table->string('corp_phone')->nullable();
        $table->string('corp_city')->nullable();
        $table->string('corp_state')->nullable();
        $table->string('corp_email')->nullable();
        $table->string('main_url')->nullable();
        $table->timestamps();
    });
} 
```

任何帮助都会很棒。

**编辑1：**

*   几分钟前我注意到我的表根本没有前缀，即使在 config/database.php 文件上正确设置了“前缀”配置。
*   如果我删除前缀，一切正常。我知道我可以在每次运行的迁移中手动设置前缀，但是...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-28T09:20:15.290

在`application->config->database.php`设置`prefix`如下

```
'mysql' => array(
'driver'   => 'mysql',
'host'     => 'localhost',
'database' => 'foodb',
'username' => 'root',
'password' => '',
'charset'  => 'utf8',
'prefix'   => 'ula_',       <-- this is where you need to set the table prefix
), 
```

设置后，我`migrate:reset`又`migrate`这样做了，它的工作很完美

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-08T14:23:18.267

在 Laravel 5.4.* 上，我最终创建了 artisan 命令以使用以下句柄方法在某些表（不是全局）上添加表前缀。

```
public function handle()
{
    $this->tablePrefix = 'tmp_';

    // Set table prefix
    DB::setTablePrefix($this->tablePrefix);

    $data = [
        '--path' => [
            'database/prefixed-migrations' // Directory Path to migrations which require table prefix 
        ],
        '--database' => 'cli',
        '--force' => true
    ];

    $this->call('migrate', $data); // Next call the migration

    Model::reguard();
} 
```

如果有人希望在某些表上添加前缀而不进行全局设置，希望这会有所帮助。

# php - PHP regex 允许在此模式中使用破折号

> ID：15885687
> 
> 赞同：0
> 
> 时间：2013-04-08T17:54:42.890
> 
> 标签：php, regex

我有一个用于图像文件名验证的正则表达式：

`/^\w*\.(jpg|jpeg|png|gif)$/`

但问题是文件名可以包含破折号`-`。例如：`564SDD-DSS.png`

我如何在此声明中包含破折号？我需要逃避它吗？

`/^\w\-*\.(jpg|jpeg|png|gif)$/`

或者

`/^[\w\-]*\.(jpg|jpeg|png|gif)$/`?

我有点失落。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:56:32.683

只会`[\w-]`做。而不是`*`您可能想要`+`的，因为我确信基本名称至少有一个字符长。全部一起：

```
/^[\w-]+\.(jpe?g|png|gif)$/i 
```

请注意，这确实允许文件名只是`-.jpg`

# visual-studio-2012 - TFS 没有拾取通过 nuget 安装的 DLL

> ID：15885688
> 
> 赞同：6
> 
> 时间：2013-04-08T17:54:43.757
> 
> 标签：visual-studio-2012, tfs, nuget

似乎每当通过 nuget TFS 安装包时，都不会获取该 pacakge 的 dll 文件，并且当添加新的 DLL 并更新旧的 DLL 时，与多个开发人员一起处理项目变得很痛苦。

正在检入“包”文件夹。

我搜索了谷歌，似乎找到了有同样问题但没有解决方案的人。

这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T11:20:56.937

我建议*不要*签入*packages*文件夹，而是[启用 Package Restore](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T21:33:51.977

查看[TFS NuGetter](http://nugetter.codeplex.com/)，这是一个集成到 TFS 构建过程中的 NuGet 解决方案。

# c++ - 为什么我看到这些函数之间存在如此巨大的性能差异？

> ID：15885690
> 
> 赞同：1
> 
> 时间：2013-04-08T17:54:54.180
> 
> 标签：c++, optimization, g++

用 g++ 编译这个函数是可行的，但速度很慢。

```
void rota(double psir,double thetar,double phir,double xi,double yi,double zi,double *xf,double *yf,double *zf) {
  *xf = xi*cos(phir)*cos(psir)+yi*(-sin(phir)*cos(thetar)*cos(psir)+sin(thetar)*sin(psir))+zi*(sin(phir)*sin(thetar)*cos(psir)+cos(thetar)*sin(psir));
  *yf = xi*sin(phir)+yi*cos(phir)*cos(thetar)-zi*cos(phir)*sin(thetar);
  *zf = -xi*cos(phir)*sin(psir)+yi*(sin(thetar)*cos(psir)+cos(thetar)*sin(phir)*sin(psir))+zi*(cos(thetar)*cos(psir)-sin(thetar)*sin(phir)*sin(psir));
  return;
} 
```

如果我计算一次中间值，然后调用它们，我的模拟运行**得**更快。

```
void rota(double psir,double thetar,double phir,double xi,double yi,double zi,double *xf,double *yf,double *zf) {
  double cosf = cos(phir);
  double sinf = sin(phir);
  double cosp = cos(psir);
  double sinp = sin(psir);
  double cost = cos(thetar);
  double sint = sin(thetar);
  *xf = xi*cosf*cosp+yi*(-sinf*cost*cosp+sint*sinp)+zi*(sinf*sint*cosp+cost*sinp);
  *yf = xi*sinf+yi*cosf*cost-zi*cosf*sint;
  *zf = -xi*cosf*sinp+yi*(sint*cosp+cost*sinf*sinp)+zi*(cost*cosp-sint*sinf*sinp);
  return;
} 
```

为什么 g++ 不为我做这个优化？有没有办法让我更有效地做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:05:06.160

我已经使用`gcc 4.7.2`with编译了你的代码`-O3`。在这两种情况下，生成的`x86_64`程序集几乎相同。

然后，我通过调用它 100,000,000 次来对每个函数进行基准测试。

第一个版本采用：

```
real    0m0.216s
user    0m0.213s
sys     0m0.002s 
```

而第二个花了：

```
real    0m0.216s
user    0m0.212s
sys     0m0.002s 
```

得出你自己的结论。

# java - 在 java BufferedReader 中捕获连接问题（和网络 I/O 问题）？

> ID：15885691
> 
> 赞同：1
> 
> 时间：2013-04-08T17:54:58.723
> 
> 标签：java, scala, inputstream, http-streaming

注意：用 Scala 表示。使用 a`BufferedReader`处理压缩后的 HTTP 流并遍历每一行以读取传入数据。问题是，如果由于网络 I/O 问题（提供商有时会做奇怪的事情）而重置连接，那么我可以看到连接在超时前保持打开状态长达 15 秒，这是我想要的降至 1 秒。出于某种原因，我们的办公室提供商每 11 小时重置一次连接。

这是我处理连接的方式：

```
val connection = getConnection(URL, USER, PASSWORD)
      val inputStream = connection.getInputStream()
      val reader = new BufferedReader(new InputStreamReader(new StreamingGZIPInputStream(inputStream), GNIP_CHARSET))
      var line = reader.readLine()
      while(line != null){
          parseSupervisor ! ParseThis(line)
          line = reader.readLine()
      }
      throw new ParseStreamCollapseException 
```

这里`getConnection`定义：

```
private def getConnection(urlString: String, user: String, password: String): HttpURLConnection = {
    val url = new URL(urlString)

    val connection = url.openConnection().asInstanceOf[HttpURLConnection]
    connection.setReadTimeout(1000 * KEEPALIVE_TIMEOUT)
    connection.setConnectTimeout(1000 * 1)

    connection.setRequestProperty("Authorization", createAuthHeader(user, password));
    connection.setRequestProperty("Accept-Encoding", "gzip")
    connection
  } 
```

总结一下：通过`java.io.BufferedReader`. 在流上保持活动状态为 16 秒，但为了防止进一步的数据丢失，我希望将其缩小到 1-2 秒（基本上检查流当前是否为空白或网络 I/O）。中间的某些设备每 11 小时终止一次连接，如果有一个有意义的解决方法来最大程度地减少数据丢失，那就太好了。在`HttpURLConnection`连接上没有收到“终止信号”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:05:33.107

不幸的是，除非终止连接的网络设备干净利落地关闭它，否则您不会收到任何类型的连接已终止的通知。这样做的原因是，没有办法区分只需要很长时间响应的远程主机和断开的连接之间的区别。无论哪种方式，套接字都是静音的。

同样，假设连接刚刚被切断，您唯一可以更快地检测到断开的连接的选择是减少超时。

# javascript - 使用 HTML5 设置数字下载

> ID：15885692
> 
> 赞同：0
> 
> 时间：2013-04-08T17:55:07.963
> 
> 标签：javascript, html, download

我对编码很陌生，并且通过几本书和 Codeacademy 一直在自学 HTML、CSS 和 JS/JQuery。我正在创建一个网站，以便我父亲可以出售他的音乐，而我将把我认为最令人生畏的两件事留到最后，即预览流和下载。

我已经能够找到一些关于如何设置流媒体播放器的简明信息，我只需要花时间来实现它，但我似乎无法找到关于如何设置数字下载平台的明确答案。我找错地方了吗？

我在域上有空间来托管音乐文件，我想它会通过一些 JS/JQuery 魔法来实现，但我似乎只能找到指向我不太了解如何使用的 Wordpress 插件的链接。

任何人都可以帮忙吗？

我也更喜欢使用 Paypal 作为付款方式，因为他已经设置了一个帐户。

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:49:30.160

老实说，我建议您使用具有出色插件的 CMS（如 WordPress）。实现数字媒体保护并非易事。

您将不得不处理下载、支付网关、媒体保护等问题。从头开始可能需要 5-6 个月。您可以简单地使用 CMS 和插件并在几天内建立一个商店 :-)

建立一个 wordpress 博客并安装这个插件（[http://wordpress.org/extend/plugins/music-store/](http://wordpress.org/extend/plugins/music-store/)）。它有你需要的大部分东西..

剩下的时间从头开始学习 HTML5 和 Javascript。

祝你爸爸的网站和学习好运.. 一切顺利..

问候，

拉胡尔

# java - ImageIcon 不会针对具有相同 URL 的新图像进行更新

> ID：15885696
> 
> 赞同：2
> 
> 时间：2013-04-08T17:55:23.610
> 
> 标签：java, swing

我想使用 JLabel(Icon) 显示来自我网站的图像（[http://xxx.xxx.xxx.xxx/java_pic/test.jpg](http://xxx.xxx.xxx.xxx/java_pic/test.jpg)）。我有一个刷新按钮来新建一个新的 JLabel 和 ImageIcon（以获取最新的图像）程序成功运行......但是当我上传新图像以覆盖旧图像时（[http://xxx.xxx. xxx.xxx/java_pic/test.jpg](http://xxx.xxx.xxx.xxx/java_pic/test.jpg)），我按下刷新按钮......什么也没发生！我重新启动程序...现在出现新图像...为什么？当我再次新建 ImageIcon 时，它不应该从网站重新加载图像吗？

```
public void refresh(){
    URL iconUri = null;
    iconUri = new URL("http://XXX.XXX.XXX.XXX/java_pic/test.jpg");
    ImageIcon imageIcon = new ImageIcon(iconUri);
    JLabel imageLabel = new JLabel(imageIcon);
    frame.add(imageLabel);
    ...
    ...
} 
```

当我单击刷新按钮时，它会调用 refresh()...为什么？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T18:04:48.933

图像被缓存。刷新以清除缓存：

```
imageIcon.getImage().flush(); 
```

# asp.net-mvc - 在 ASP.Net MVC 中使用 Backbone.js DELETE 时出现错误。其他一切都有效。

> ID：15885697
> 
> 赞同：0
> 
> 时间：2013-04-08T17:55:23.770
> 
> 标签：asp.net-mvc

我能够成功调用 Backbone 的 HTTP POST 和 PUT 方法，并使用 Asp.Net MVC 将它们链接到我的服务器。

问题是，当我使用 model.destroy() 调用 HTTP DELETE 时，我收到此错误...

**参数字典包含“GSASF.Controllers.AdminController”中方法“System.Web.Mvc.ActionResult Delete(Int32)”的不可空类型“System.Int32”的参数“id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数**

就在我调用 model.destroy() 之前，我将 id 记录到控制台并且它是正确的。这是我的代码。*请注意，我的模型没有一个名为 id 的字段，而是一个名为 HoverId 的字段。数据库表已经存在，所以我必须到期。

```
 Delete: function(id) {
                if (id) {
                    for (var i = this.collection.length - 1; i >= 0; i--) {
                        var item = this.collection.at(i);
                        if (item.get("HoverId") == id)
                            alert("Item to be destroyed ID: " + item.get("id")); 
                            item.destroy();
                    };
          }

        [ActionName("SpaceToolTipEdit")]
        [HttpDelete]
        public ActionResult Delete(int id)
        {
            var imageHover = sr.GetImageHoverById(id);

            if (imageHover != null)
            {
                sr.DeleteImageHover(imageHover);
                return new HttpStatusCodeResult(200);
            }

            return new EmptyResult();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:09:37.460

好吧，我现在感觉很笨。

解决方案很简单。我最初将 url 属性设置为我的 /{Controller}/{SpaceToolTipEdit} url。我应该将其设置为 urlRoot 属性。

# maven - 来自并行项目的 Maven 依赖项，而不是模块。

> ID：15885699
> 
> 赞同：0
> 
> 时间：2013-04-08T17:55:27.840
> 
> 标签：maven, dependencies

我有以下 maven 项目（注意：maven 项目，而不是 maven 模块）。我知道我会收到问题，为什么不是模块，但无论如何它都有自己的故事。

myproj-common (JAR)、myproj-core (JAR)、myproj-product1-batch (EAR)、myproj-product2-batch (EAR)

myproj-core 依赖于 myproj-common，而 myproj-product1-batch 依赖于 myproj-core。如果是模块，我可以简单地创建依赖项。如果是标准存档，我还可以创建依赖项并在存储库中提供 JAR，如果它是库 JAR，我可以...bla bla bla ...我可以修复所有标准依赖项，我不知道如何制作一个位于磁盘某处的 jar，一个依赖项。

我无法将
C:\Documents and Settings\users\myproj-common\target\myproj-common-0.0.1-SNAPSHOT.jar
作为依赖项
C:\Documents and Settings\users\myproj-放入以下 ​​jar 中核心\目标\myproj-core-0.0.1-SNAPSHOT.jar

将 JAR 放入 EAR 中也存在同样的问题。

任何想法 ？多么...希望有一个小的、快速和令人惊讶的修复，只是我看不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:01:06.497

我看不出有什么理由不能`mvn install`用来将这些 jars 和 ear 安装到本地存储库中。然后，您可以将它们作为依赖项包含在您喜欢的任何地方。

我怀疑您是否能够干净地让 maven 将 jar 拉入文件系统上除本地存储库之外的任何位置。

澄清一下，当你这样做时，`mvn install`它会将你的 JAR 放在目标文件夹中，但它也会将它放在你的本地存储库中（在 Windows 中默认为 C:\Documents And Settings\.m2）。在那里安装该 JAR 之后，您可以使用 pom 中的“依赖项”块将该 JAR 作为 maven 依赖项包含在其他项目中，如下所示：

```
<dependencies>
    <dependency>
      <groupId>group-a</groupId>
      <artifactId>artifact-a</artifactId>
      <version>1.0</version>
    </dependency>
</dependencies> 
```

[Maven Docs](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management)中解释了依赖机制。

此外，您需要告诉 maven 将所有依赖项实际打包到 JAR 中。您可以通过将其添加到您的 POM 中来做到这一点。（同时检查这个问题[How can I create an executable JAR with dependencies using Maven?](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven) for the source of this code block）。

```
<plugin>
  <artifactId>maven-assembly-plugin</artifactId>
  <configuration>
     <descriptorRefs>
      <descriptorRef>jar-with-dependencies</descriptorRef>
    </descriptorRefs>
  </configuration>
  <executions>
    <execution>
      <id>make-assembly</id> <!-- this is used for inheritance merges -->
      <phase>package</phase> <!-- bind to the packaging phase -->
      <goals>
        <goal>single</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

# internet-explorer - 为什么这段代码在 Internet Explorer 中不起作用？

> ID：15885700
> 
> 赞同：0
> 
> 时间：2013-04-08T17:55:32.713
> 
> 标签：internet-explorer, toggle

除 IE 外，所有浏览器都可以使用。为什么不能在 IE 中工作？请帮忙！

这是[小提琴](http://jsfiddle.net/j2wintery/ZzKWw)

```
<script language = "javascript"> 
function ImageList(photo) {
    var ImageList = document.getElementsByTagName("div");
    for (var x = 0; x < ImageList.length; x++) {
        name = ImageList[x].getAttribute("class");
        if (name == 'ImageList-1') {
            if (ImageList[x].id == photo) {
                if (ImageList[x].style.display == 'block') {
                    ImageList[x].style.display = 'none';
                } else {
                    ImageList[x].style.display = 'block';
                }
            } else {
                ImageList[x].style.display = 'none';
            }
        }
    }
}

function SpaceList(list) {
    var SpaceList = document.getElementsByTagName("div");
    for (var x = 0; x < SpaceList.length; x++) {
        name = SpaceList[x].getAttribute("class");
        if (name == 'SpaceList-1') {
            if (SpaceList[x].id == list) {
                if (SpaceList[x].style.display == 'block') {
                    SpaceList[x].style.display = 'none';
                } else {
                    SpaceList[x].style.display = 'block';
                }
            } else {
                SpaceList[x].style.display = 'none';
            }
        }
    }
} 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:00:55.203

您的函数名称`ImageList`和变量`ImageList`有冲突。使用不同的名称。与`SpaceList`

此外，附带说明 -`<script language="javascript>`已被弃用，需要替换为`<script type="text/javascript">`

# c++ - 一键更改字体颜色

> ID：15885702
> 
> 赞同：1
> 
> 时间：2013-04-08T17:55:36.213
> 
> 标签：c++, api, winapi

我正在使用 win32 API，这是我的代码（我已经从这个站点获得了一些帮助；））。

```
LRESULT CALLBACK WndProc (HWND hwnd, UINT message, 
                          WPARAM wParam, LPARAM lParam)
     {
     HDC  hdc;
     PAINTSTRUCT ps;
     RECT        rect;
     RECT        size;
     int         width;
     char *     widthHeight;
     static char        Swidth[32];
     static char        Sheight[32];
     int         height;
     char       sBottom[32];
     char       sTop[32];
     char       sLeft[32];
     char       sRight[32];
     char       SrightButtonClicked[32];
     static int rightButtonClicked = 0;
     char       SleftButtonClicked[32];
     static int leftButtonClicked = 0;
     static bool LeftButtonClicked = false;
     static bool RightButtonClicked = false;

     switch (message)
         {
          case WM_PAINT:
                hdc = BeginPaint (hwnd, &ps);

                if(LeftButtonClicked == true)
                {
                    SetDCPenColor(hdc, RGB(0, 0, 255));
                    LeftButtonClicked = false;
                }

                if(RightButtonClicked == true)
                {
                    SetDCPenColor(hdc, RGB(255, 0, 0));
                    RightButtonClicked = false;
                }

                GetClientRect (hwnd, &rect);

                GetWindowRect(hwnd, &size);

                //Variables used in outputting.
                width = size.right - size.left;
                itoa(width, Swidth, 10);
                height = size.bottom - size.top;
                itoa(height, Sheight, 10);
                itoa(rect.bottom, sBottom, 10);
                itoa(rect.top, sTop, 10);
                itoa(rect.left, sLeft, 10);
                itoa(rect.right, sRight, 10);

                //Line 1, Width and height output
                TextOut(hdc, 0, 0, "Here is my width: ", 18);
                TextOut(hdc, 125, 0, Swidth, 5);
                TextOut(hdc, 175, 0, "Here is my height: ", 18);
                TextOut(hdc, 300, 0, Sheight, 4);

                //Line 2, Output the bottom, right, left, and top of the window
                TextOut(hdc, 0, 20, sBottom, strlen(sBottom));
                TextOut(hdc, 50, 20, sTop, strlen(sTop));
                TextOut(hdc, 100, 20, sRight, strlen(sRight));
                TextOut(hdc, 150, 20, sLeft, strlen(sLeft));

                //Outputs the number of times right click has been clicked
                TextOut(hdc, 0, 40, "Right Button Clicked: ", 23);
                itoa(rightButtonClicked, SrightButtonClicked, 10);
                TextOut(hdc, 150, 40, SrightButtonClicked, strlen(SrightButtonClicked));

                //Output the number of times left click has been clicked
                TextOut(hdc, 0, 60, "Left Button Clicked: ", 22);
                itoa(leftButtonClicked, SleftButtonClicked, 10);
                TextOut(hdc, 150, 60, SleftButtonClicked, strlen(SleftButtonClicked));
                EndPaint (hwnd, &ps);
                return 0;

          case WM_LBUTTONDOWN:

              leftButtonClicked++;
              LeftButtonClicked = true;
              InvalidateRect(hwnd, 0, true);
              return 0;

          case WM_RBUTTONDOWN:
              rightButtonClicked++;
              RightButtonClicked = true;

              //Uses char * widthHeight to concat all the resolution into one char to output in Messagebox
              widthHeight = new char[strlen(Swidth) + strlen(Sheight) + 4];
              widthHeight = Swidth;
              strcat(widthHeight, " x ");
              strcat(widthHeight, Sheight);

              //Has a message box pop up with resolution of window in Mouse Button OK format
              MessageBox(NULL, widthHeight , "Right Mouse Button Pressed!", MB_OK);
              InvalidateRect(hwnd, 0, true);
              return 0;

          case WM_DESTROY:
              PostQuitMessage(0);
              return 0;

         }

     return DefWindowProc (hwnd, message, wParam, lParam);
     } 
```

现在我想让它做一些事情，比如当我左键单击一种颜色时改变文本颜色..说红色？当我右键单击时，它会变成蓝色。我该怎么做呢？我用谷歌搜索了很多，一切似乎都很复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:00:07.400

在开始输出之前尝试此操作（在您的 BeginPaint() 调用将起作用之后）：

```
// Set the Pen to Blue
SetDCPenColor(hdc, RGB(0,0,255)); 
```

要执行您想要的操作，只需在鼠标按下处理程序中设置一个值，然后在您的绘图处理程序中检查该值。如果未设置 [RGB(0,0,0)] 则使用黑色，如果已设置则使用蓝色 [RGB(0,0,255)]。

编辑：也不要使用静态 hdc。每个人都想这样做，但它不起作用。HDC 实际上是由操作系统在进程外维护的，因此 C++ 将无法跟踪它。这最终肯定会失败。在使用它之前，请务必获得一个新的 hdc（或任何名为 DC 的东西）。

编辑2：试试这个...

```
LRESULT CALLBACK WndProc (HWND hwnd, UINT message, 
                      WPARAM wParam, LPARAM lParam)
 {
 HDC  hdc;
 PAINTSTRUCT ps;
 RECT        rect;
 RECT        size;
 int         width;
 char *     widthHeight;
 static char        Swidth[32];
 static char        Sheight[32];
 int         height;
 char       sBottom[32];
 char       sTop[32];
 char       sLeft[32];
 char       sRight[32];
 char       SrightButtonClicked[32];
 static int rightButtonClicked = 0;
 char       SleftButtonClicked[32];
 static int leftButtonClicked = 0;
 static bool LeftButtonClicked = false;
 static bool RightButtonClicked = false;
 static COLORREF pencolor = RGB(0,0,0); // Added by KRowe

 switch (message)
     {
      case WM_PAINT:
            hdc = BeginPaint (hwnd, &ps);

            SetDCPenColor(hdc, pencolor); // Added by KRowe

            GetClientRect (hwnd, &rect);
            GetWindowRect(hwnd, &size);

            //Variables used in outputting.
            width = size.right - size.left;
            itoa(width, Swidth, 10);
            height = size.bottom - size.top;
            itoa(height, Sheight, 10);
            itoa(rect.bottom, sBottom, 10);
            itoa(rect.top, sTop, 10);
            itoa(rect.left, sLeft, 10);
            itoa(rect.right, sRight, 10);

            //Line 1, Width and height output
            TextOut(hdc, 0, 0, "Here is my width: ", 18);
            TextOut(hdc, 125, 0, Swidth, 5);
            TextOut(hdc, 175, 0, "Here is my height: ", 18);
            TextOut(hdc, 300, 0, Sheight, 4);

            //Line 2, Output the bottom, right, left, and top of the window
            TextOut(hdc, 0, 20, sBottom, strlen(sBottom));
            TextOut(hdc, 50, 20, sTop, strlen(sTop));
            TextOut(hdc, 100, 20, sRight, strlen(sRight));
            TextOut(hdc, 150, 20, sLeft, strlen(sLeft));

            //Outputs the number of times right click has been clicked
            TextOut(hdc, 0, 40, "Right Button Clicked: ", 23);
            itoa(rightButtonClicked, SrightButtonClicked, 10);
            TextOut(hdc, 150, 40, SrightButtonClicked, strlen(SrightButtonClicked));

            //Output the number of times left click has been clicked
            TextOut(hdc, 0, 60, "Left Button Clicked: ", 22);
            itoa(leftButtonClicked, SleftButtonClicked, 10);
            TextOut(hdc, 150, 60, SleftButtonClicked, strlen(SleftButtonClicked));
            EndPaint (hwnd, &ps);
            return 0;

      case WM_LBUTTONDOWN:

          leftButtonClicked++;
          LeftButtonClicked = true;
          pencolor = RGB(255,0,0); // Added by KRowe
          InvalidateRect(hwnd, 0, true);
          return 0;

      case WM_RBUTTONDOWN:
          rightButtonClicked++;
          RightButtonClicked = true;
          pencolor = RGB(0, 255,0); // Added by KRowe
          widthHeight = new char[strlen(Swidth) + strlen(Sheight) + 4];
          widthHeight = Swidth;
          strcat(widthHeight, " x ");
          strcat(widthHeight, Sheight);

          //Has a message box pop up with resolution of window in Mouse Button OK format
          MessageBox(NULL, widthHeight , "Right Mouse Button Pressed!", MB_OK);
          InvalidateRect(hwnd, 0, true);
          return 0;

      case WM_DESTROY:
          PostQuitMessage(0);
          return 0;

     }

 return DefWindowProc (hwnd, message, wParam, lParam);
 } 
```

# actionscript-3 - AS3 - 跟踪 - 单击按钮

> ID：15885703
> 
> 赞同：1
> 
> 时间：2013-04-08T17:55:36.870
> 
> 标签：actionscript-3, flash, button, trace

我正在尝试单击一个按钮并在舞台/同一场景上绘制一个数字“1”。

我有这个代码：

```
 button1.addEventListener(MouseEvent.CLICK, myClickReaction1);
 function myClickReaction1 (e:MouseEvent):void{
 trace("1");
 } 
```

但它会追踪到闪光灯的输出而不是场景。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:57:40.510

`trace("1");`将转到用于调试的输出面板。

如果你想在舞台上看到一些东西，你需要创建一个`TextField`并将它的`text`属性设置为你想要的任何东西。

```
button1.addEventListener(MouseEvent.CLICK, myClickReaction1);

function myClickReaction1 (e:MouseEvent):void{
    var tf:TextField = new TextField();
    tf.text = "1";
    addChild(tf);
} 
```

# php - 获取特定区域内的坐标

> ID：15885704
> 
> 赞同：1
> 
> 时间：2013-04-08T17:55:36.020
> 
> 标签：php, geolocation, geometry, coordinates

我正在做一个 API 调用，它应该返回某个区域内的点列表。

这将在地图上使用，因此对 API 的调用具有所有四个角点的坐标。
该区域将始终为矩形，不会旋转。

目前，我正在使用以下算法来限制结果：

```
$lat_limits = array(min($bottom_left_lat, $top_left_lat), max($bottom_left_lat, $top_left_lat));
$lon_limits = array(min($top_left_lon, $top_right_lon),   max($top_left_lon, $top_right_lon)); 
```

我的问题是：

1.  这是一种最佳的搜索方式吗？
2.  有没有更适合这种用途的 PHP 库/帮助函数？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:17:29.047

简单地：

```
WHERE lat BETWEEN $lat_min AND $lat_max AND lng BETWEEN $lng_min AND $lng_max 
```

并在您的 lat 和 lng 列上放置索引以更好地优化查询。

请记住，如果 left_lng > right_lng 您的窗口跨越日期线，您需要将其拆分为 +/-180 度的 2 个框。

经度通常从西向东增加，但跨越国际日期变更线时，经度从 180 度变为 -180 度。如果您在跨越这条线的框中使用相同的查询，您将获得框外所有经度的结果。您需要检测条件并将查询条件拆分为从 lng_left 到 180 和 -180 到 lng_right 的 2 个框。

# mysql - MySQL 表 - 删除旧行

> ID：15885707
> 
> 赞同：1
> 
> 时间：2013-04-08T17:55:57.273
> 
> 标签：mysql, database, phpmyadmin

我有一个 Wordpress 网站。并且一些数据库表变得越来越大——来自插件收集的数据。我知道删除这些数据的两种方法：

1.  我可以在 phpmyadmin 中手动删除行——一次 1000 行。
2.  我可以在 phpmyadmin 中清空整个表。

我正在寻找的是第三种方式，这样我就可以只删除在某个时间段之前收集的数据。

如上所述，我知道我可以按日期对行进行排序并一次删除 1000 行——以摆脱旧的。但是，有超过一百万行。是否有一个程序可以用来删除——例如——所有超过 60 天的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:10:35.293

要删除超过 60 天的记录，您可以执行以下操作

```
DELETE 
  FROM table1
 WHERE datefield < DATE_SUB(CURDATE(), INTERVAL 60 DAY) 
```

**[SQLFiddle](http://sqlfiddle.com/#!2/aa931/1)**

# css - 移动友好型网站 - 应用良好的分辨率

> ID：15885708
> 
> 赞同：0
> 
> 时间：2013-04-08T17:55:57.513
> 
> 标签：css, html, responsive-design

网站非常好地转换为 iphone：1-4 和其他具有相同分辨率的手机，但如果我添加到 Iphone 5 的元标记代码，以前的代码不起作用并且所有手机都可以使用 iphone5 代码。

我的代码：

```
 <link media="only screen and (min-device-width : 320px) and (max-device-width : 480px) and (orientation : portrait)" href="wp-content/themes/chomacki/css/iphone4-portrait.css" type= "text/css" rel="stylesheet" />    
    <link media="only screen and (min-device-width : 320px) and (max-device-width : 480px) and (orientation : landscape)" href="wp-content/themes/chomacki/css/iphone4-landscape.css" type= "text/css" rel="stylesheet" />  

    <link media="only screen and (min-device-width : 320px) and (max-device-width : 568px) and (orientation : portrait)" href="wp-content/themes/chomacki/css/iphone5-portrait.css" type= "text/css" rel="stylesheet" />    
    <link media="only screen and (min-device-width : 320px) and (max-device-width : 568px) and (orientation : landscape)" href="wp-content/themes/chomacki/css/iphone5-landscape.css" type= "text/css" rel="stylesheet" /> 
```

我怎样才能使两个代码都起作用？不只是iphone5代码，或者删除iphone5代码的iphone4代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:01:30.153

```
<link media="only screen and (min-device-width : 320px) and (max-device-width : 480px) and (orientation : portrait)" href="wp-content/themes/chomacki/css/iphone4-portrait.css" type= "text/css" rel="stylesheet" />    
<link media="only screen and (min-device-width : 320px) and (max-device-width : 480px) and (orientation : landscape)" href="wp-content/themes/chomacki/css/iphone4-landscape.css" type= "text/css" rel="stylesheet" />  

<link media="only screen and (min-device-width : 481px) and (max-device-width : 568px) and (orientation : portrait)" href="wp-content/themes/chomacki/css/iphone5-portrait.css" type= "text/css" rel="stylesheet" />    
<link media="only screen and (min-device-width : 481px) and (max-device-width : 568px) and (orientation : landscape)" href="wp-content/themes/chomacki/css/iphone5-landscape.css" type= "text/css" rel="stylesheet" /> 
```

大概就是你想要的。重叠的媒体 CSS 查询不是一个好主意。

# c - C 逻辑或在 if

> ID：15885715
> 
> 赞同：1
> 
> 时间：2013-04-08T17:56:17.860
> 
> 标签：c, eclipse-cdt

我知道我在 C 方面不是很好，但我认为我可以做到这一点：

```
if(strlen(type) == 0 || strcmp(type,"in")!=0 || strcmp(type,"out")!=0) 
```

`type`作为一个`char*`，我已经用条件的第一部分测试了这个代码。它运行良好。如果我有条件的第二部分并且我的`type`包含`"in"`它没关系，但如果所有三个条件都可用，如果我输入`"out"`，如果没有被跳过。为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:32:59.773

你的代码：

```
if(strlen(type) == 0 || strcmp(type,"in")!=0 || strcmp(type,"out")!=0){
    " your code-1"
}
else{
    " your code-2"
} 
```

相当于：

```
if(strlen(type) == 0 ){
    " your code-1"
}
else{
  if(strcmp(type,"in")!=0){
      " your code-1"   
  }
  else{
      if(strcmp(type,"out")!=0){
            " your code-1"   
      }
      else{
            " your code-2"
      }
  }
} 
```

关键是如果你*首先* `if()`执行 if string`type`有什么东西，那么 else 永远不会执行。因为空字符串（*在 else 部分*）不能等于`"in"`or `"out"`。*因此，如果字符串不为空*，则您始终可以选择执行“code-1” ，如果字符串为空（*即 length = 0*）则不执行任何操作。

编辑：

我想你想要类似的东西，如果`type`字符串是“in”然后执行“code-1”如果类型是“out”然后执行第二个code-2。像：

```
if(strlen(type) == 0 ){

}
else{
  if(strcmp(type,"in")!=0){
      " your code-1"   
  }
  else{
      if(strcmp(type,"out")!=0){
            " your code-2"   
      }
  }
} 
```

你可以这样做：

```
flag = 'o';// this will save string comparison  again
if(strlen(type) == 0 || strcmp(type,"in")==0 || 
                       strcmp(type,"out")!=0 && !(flag='?')){
   "code-1"
}
else{
       if(flag=='o'){ //no strcmp needed
          "code-2"
       }
} 
```

在这里，我根据我的逻辑[发布了一个代码，它运行为：](http://codepad.org/zZDdfXN3)

```
:~$ ./a.out 
Enter string: in
in 
:~$ ./a.out 
Enter string: out
out 
:~$ ./a.out 
Enter string: xx
:~$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:45:31.957

`type`如果为空，或者如果`type`包含“in”或“out” ，则将采用该分支。

给定表达式`a || b`，以下是正确的：

*   操作数从左到右求值，意义`a`先求值；
*   如果`a`计算结果为非零 (true)，则整个表达式计算结果为 true，并且`b` *不计算*；
*   如果`a`评估为零（假），则`b`评估；
*   如果两者`a`和都`b`计算为零（假），则整个表达式的计算结果为假；否则，表达式的计算结果为真；

所以如果`type`包含字符串“out”，那么

*   `strlen(type) == 0`评估为`false`，意思是我们评估
*   `strcmp(type, "in") != 0`, 评估为`false`, 意思是我们评估
*   `strcmp(type, "out") != 0`，其计算结果为`true`，所以
*   分支被占用

根据您所说的预期，听起来您对上次测试的感觉是错误的，并且您确实想要

```
if( strlen( type ) == 0 || 
    strcmp( type, "in" ) != 0 || 
    strcmp( type, "out" ) == 0 )
{                      // ^^ note operator
  ...
} 
```

`type`如果为空，如果`type`包含“in”或`type` *不*包含“out” ，这将进入分支。

# java - Hadoop DistributedCache 对象在作业期间更改

> ID：15885716
> 
> 赞同：2
> 
> 时间：2013-04-08T17:56:18.183
> 
> 标签：java, hadoop, amazon-web-services, mapreduce, elastic-map-reduce

我正在尝试在 AWS 上运行 KMeans，但在尝试从 DistributedCache 读取更新的集群质心时遇到了以下异常：

```
java.io.IOException: The distributed cache object s3://mybucket/centroids_6/part-r-00009 changed during the job from 4/8/13 2:20 PM to 4/8/13 2:20 PM
at org.apache.hadoop.filecache.TrackerDistributedCacheManager.downloadCacheObject(TrackerDistributedCacheManager.java:401)
at org.apache.hadoop.filecache.TrackerDistributedCacheManager.localizePublicCacheObject(TrackerDistributedCacheManager.java:475)
at org.apache.hadoop.filecache.TrackerDistributedCacheManager.getLocalCache(TrackerDistributedCacheManager.java:191)
at org.apache.hadoop.filecache.TaskDistributedCacheManager.setupCache(TaskDistributedCacheManager.java:182)
at org.apache.hadoop.mapred.TaskTracker$4.run(TaskTracker.java:1246)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)
at org.apache.hadoop.mapred.TaskTracker.initializeJob(TaskTracker.java:1237)
at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:1152)
at org.apache.hadoop.mapred.TaskTracker$5.run(TaskTracker.java:2541)
at java.lang.Thread.run(Thread.java:662) 
```

这个问题[与这个问题不同](https://stackoverflow.com/questions/13299453/hadoop-distributed-cache-object-changed-during-job)的是，这个错误间歇性地出现。我已经在较小的数据集上成功运行了相同的代码。此外，当我将质心的数量从 12（在上面的代码中看到）更改为 8 时，它会在迭代 5 而不是 6（您可以在`centroids_6`上面的名称中看到）失败。

这是运行 KMeans 循环的主驱动程序中的相关 DistributedCache 代码：

```
 int iteration = 1;
    long changes = 0; 
    do {
        // First, write the previous iteration's centroids to the dist cache.
        Configuration iterConf = new Configuration();
        Path prevIter = new Path(centroidsPath.getParent(),
                String.format("centroids_%s", iteration - 1));
        FileSystem fs = prevIter.getFileSystem(iterConf);
        Path pathPattern = new Path(prevIter, "part-*");
        FileStatus [] list = fs.globStatus(pathPattern);
        for (FileStatus status : list) {
            DistributedCache.addCacheFile(status.getPath().toUri(), iterConf);
        }

        // Now, set up the job.
        Job iterJob = new Job(iterConf);
        iterJob.setJobName("KMeans " + iteration);
        iterJob.setJarByClass(KMeansDriver.class);
        Path nextIter = new Path(centroidsPath.getParent(), 
                String.format("centroids_%s", iteration));
        KMeansDriver.delete(iterConf, nextIter);

        // Set input/output formats.
        iterJob.setInputFormatClass(SequenceFileInputFormat.class);
        iterJob.setOutputFormatClass(SequenceFileOutputFormat.class);

        // Set Mapper, Reducer, Combiner
        iterJob.setMapperClass(KMeansMapper.class);
        iterJob.setCombinerClass(KMeansCombiner.class);
        iterJob.setReducerClass(KMeansReducer.class);

        // Set MR formats.
        iterJob.setMapOutputKeyClass(IntWritable.class);
        iterJob.setMapOutputValueClass(VectorWritable.class);
        iterJob.setOutputKeyClass(IntWritable.class);
        iterJob.setOutputValueClass(VectorWritable.class);

        // Set input/output paths.
        FileInputFormat.addInputPath(iterJob, data);
        FileOutputFormat.setOutputPath(iterJob, nextIter);

        iterJob.setNumReduceTasks(nReducers);

        if (!iterJob.waitForCompletion(true)) {
            System.err.println("ERROR: Iteration " + iteration + " failed!");
            System.exit(1);
        }
        iteration++;
        changes = iterJob.getCounters().findCounter(KMeansDriver.Counter.CONVERGED).getValue();
        iterJob.getCounters().findCounter(KMeansDriver.Counter.CONVERGED).setValue(0);
    } while (changes > 0); 
```

文件将如何修改？我能想到的唯一可能性是，在完成一次迭代时，循环在前一个工作的质心完成写入之前再次开始。但在评论中，我使用 调用作业`waitForCompletion(true)`，因此当循环重新开始时，作业中不应有任何剩余部分正在运行。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:42:22.407

这并不是一个真正的答案，但我确实意识到以我原来的方式使用 DistributedCache 是愚蠢的，而不是直接从 HDFS 读取上一次迭代的结果。我改为在主驱动程序中编写此方法：

```
public static HashMap<Integer, VectorWritable> readCentroids(Configuration conf, Path path)
        throws IOException {
    HashMap<Integer, VectorWritable> centroids = new HashMap<Integer, VectorWritable>();
    FileSystem fs = FileSystem.get(path.toUri(), conf);
    FileStatus [] list = fs.globStatus(new Path(path, "part-*"));
    for (FileStatus status : list) {
        SequenceFile.Reader reader = new SequenceFile.Reader(fs, status.getPath(), conf);
        IntWritable key = null;
        VectorWritable value = null;
        try {
            key = (IntWritable)reader.getKeyClass().newInstance();
            value = (VectorWritable)reader.getValueClass().newInstance();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
        while (reader.next(key, value)) {
            centroids.put(new Integer(key.get()),
                    new VectorWritable(value.get(), value.getClusterId(), value.getNumInstances()));
        }
        reader.close();
    }
    return centroids;
} 
```

这在每次迭代期间在 Mapper 和 Reducer 的方法中调用`setup()`，以读取前一次迭代的质心。

```
protected void setup(Context context) throws IOException {
    Configuration conf = context.getConfiguration();
    Path centroidsPath = new Path(conf.get(KMeansDriver.CENTROIDS));
    centroids = KMeansDriver.readCentroids(conf, centroidsPath);
} 
```

这使我可以在将质心写入 DistributedCache 的原始问题中删除循环中的代码块。我对其进行了测试，它现在可以在大型和小型数据集上运行。

我仍然不知道为什么我收到了我发布的错误（如何更改只读 DistributedCache 中的某些内容？尤其是当我在每次迭代中更改 HDFS 路径时？），但这似乎既可行又是一个更不用说 hack-y 读取质心的方式了。

# javascript - jQuery .on 没有触发

> ID：15885717
> 
> 赞同：-3
> 
> 时间：2013-04-08T17:56:20.773
> 
> 标签：javascript, jquery, forms

我有以下代码（在[此 jsFiddle](http://jsfiddle.net/sGVHs/7/)中转载）不起作用。类型选择框中有三个选项。如果选择了第一个（真/假），我需要显示第一个`div`，如果选择了第二个或第三个选项，则`div`需要显示第二个。这段代码有什么问题？

HTML：

```
<form name="editform">
    Selector: <select class="selectors" name="1-type" id="1-type">
        <option value="tf" selected="selected">True/False</option>
        <option value="rd">Radio Button</option>
        <option value="chk">Checkboxes</option>
    </select>

    <div id="seldiv-1">
        Good Value: <select name="1-good_value" id="1-good_value">
                        <option value="true">True</option>
                        <option value="false">False</option>
                    </select>
    </div>

    <div id="textdiv-1" style="display:none;" disabled="disabled">
        Good Value:
        <textarea name="1-good_value" id="1-good_value"></textarea>
    </div>
</form> 
```

Javascript：

```
$(document).ready(function(){
    $('.selectors').on('change',function (){
        var arr = $(this).name.split("-");
        var id = arr[0];
        var val = $(this).val();
        if(val=="tf") {
            $('#textdiv-'+id).hide();
            $('#seldiv'+id).show();
            //Make textarea disabled
            //Make selection enabled
        } else {
            $('#textdiv-'+id).hide();
            $('#seldiv'+id).show();
            //Disable selection
            //Enable textarea
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:00:10.283

`Uncaught TypeError: Cannot call method 'split' of undefined.`

更改`$(this).name.split("-");`为`this.name.split("-");`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T18:00:51.277

它不是，`on`但是 split 函数给你错误，你试图获取不可用的 jquery 对象的名称方法......你需要使用`attr()`从 jquery 对象中获取名称......或者使用`this`DOM 对象得到名字

试试这个

```
 var arr = $(this).attr('name').split("-"); 
```

或者

```
 var arr=this.name.split('_'); 
```

**注意 if/else 条件中的两个代码都是相同的..所以你不会注意到差异..在你的小提琴中检查一下**

[工作小提琴示例](http://jsfiddle.net/sGVHs/16/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T18:00:33.083

它 100% 会触发，你有一个`$(this).name`未定义的错误。我想你真正想做的是`this.name`

jQuery 对象的行为与 DOMElement 对象不同，即它们没有相同的属性（如`.name`）。下一次，当你试图找出为什么某些东西不起作用时，打开你的 Web 控制台，你就会发现大部分问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T18:00:13.063

这条线是你的问题：

```
var arr = $(this).name.split("-"); 
```

`on`工作正常，但上面的行抛出异常。

```
var arr = $(this).attr("name").split("-"); 
```

有几种方法可以解决这个问题，上面是一个例子。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-08T18:02:27.933

您的问题是尝试访问`$(this)`未定义的内容时。

试试`this`吧

```
this.name.split("-"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-08T18:06:38.933

`name`不是有效的属性。而是使用`id`或更改您访问它的方式`var arr = $(this).attr('name').split("-");`。

# ios - iPad：如何单击 UIView 透明部分下方的按钮

> ID：15885723
> 
> 赞同：0
> 
> 时间：2013-04-08T17:56:55.300
> 
> 标签：ios, objective-c, xcode, ipad, uiview

我正在对与我的主 ViewController (1024x768) 大小相同的视图进行子类化。该子视图具有透明背景，并包含大小为 50w X 50h 且动态定位的按钮。

我的问题是我需要与此视图下方存在的内容和按钮进行交互，但此子视图阻止了该交互。

我看过一些帖子解决了类似的问题，但我不清楚实际用法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:15:12.967

`-pointInside:withEvent:`是 iOS 询问触摸是否在特定视图内的方式。如果一个视图返回 YES，iOS 调用`-hitTest:withEvent:`以确定被触摸的那个视图的特定子视图。`self`如果该触摸的位置没有子视图，该方法将返回。因此，您可以通过如下实现将不在子视图上的任何触摸传递回此视图后面的视图`-pointInside:withEvent:`：

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
    return ([self hitTest:point withEvent:event] != self);
} 
```

如果你需要捕捉一些不在子视图上的触摸，你的实现会更加复杂，但是这个方法仍然是告诉 iOS 你的视图在哪里并接受触摸事件的正确位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:01:40.020

您是否尝试将 userInteractionEnabled 设置为 YES 或 NO？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:11:37.763

如果一切都失败了，您可以使用以编程方式将这些子视图放在前面

```
 [self.view bringSubviewToFront:buttonToClick]; 
```

# clojure - 我可以使用哪些技术来调试我的 Clojure 代码？

> ID：15885724
> 
> 赞同：2
> 
> 时间：2013-04-08T17:56:55.923
> 
> 标签：clojure, counterclockwise

我正在使用 CounterClockWise 在 Windows 7 操作系统上开发我的第一个 Clojure 项目。除了 javascript（我不太熟悉），这是我的第一个动态类型语言。

构建我的项目最困难的部分是调试我遇到的问题。我一直在使用的技术是`println`在一些地方撒上 s 来确认我的输入和输出是我想要的。

与 Java 相比，似乎很多 Clo​​jure 函数都接受了我认为是垃圾输入的内容并愉快地返回 nil。因此，您看到的运行时异常可能来自许多远离问题原因的函数。我的意思是，甚至很难知道把`println`s 放在哪里。

而且，这些运行时异常会输出已编译的代码行号，因此它们的信息量不是很大。我的大部分功能都很短且无副作用，但问题是我的输入是网页。有时函数的输入是原始 html，有时是解析后的 html（通过 enlive），有时是链接列表（通过在解析后的 html 上使用类似 css 的选择器）。这些输入可能是深度嵌套的复杂结构（即：地图列表的地图列表），因此手工构建它们并不容易。当你有一个没有指向问题的堆栈跟踪时，我几乎必须调试我的一半程序并弄清楚如何为每个部分生成输入。这非常耗时。

在 IRC 频道上，有人告诉我[堆栈跟踪库](http://richhickey.github.io/clojure/clojure.stacktrace-api.html)，它使调试变得更加容易。它仍然指出许多功能远离错误输入的来源，但它仍然很有帮助。我正在寻找更多这样的技术。我可以使用哪些技术来更好地调试我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:04:26.133

由于 Clojure 中的大多数函数应该相当短（或分解为短）并且通常可以在没有副作用的情况下工作，因此您始终可以将它们与 Clojure REPL 分开尝试或为它们编写测试。

您还可以将 Java 调试器/断点与 IntelliJ IDEA 的 La Clojure 插件一起使用 - 请参阅我的回答：[如何通过逆时针（或 la clojure）运行/调试 compojure Web 应用程序](https://stackoverflow.com/questions/15442367/how-to-run-debug-compojure-web-app-via-counterclockwise-or-la-clojure/15824290#15824290)，了解有关使用 IDEA 运行和调试 Clojure 项目的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:21:32.803

如果在调用其他函数时垃圾输入/意外输出对您来说是个问题，也许您可​​以稍微重构一下代码，以便将这些接触点封装在它们自己的函数中，并定义前置/后置条件。例如[http://blog.fogus.me/2009/12/21/clojures-pre-and-post/](http://blog.fogus.me/2009/12/21/clojures-pre-and-post/)

我相信你可以通过一点宏支持让它变得更令人愉悦。尽管这可能会使堆栈跟踪更难阅读。

# c - 如何使用指针在数组中导航？

> ID：15885725
> 
> 赞同：1
> 
> 时间：2013-04-08T17:56:56.217
> 
> 标签：c, pointers

为什么我的代码不起作用？

```
#include <stdio.h>

int main()
{
    int test[] = { 3, 9, 7 };
    printf("%d", find(test, 3));
    return 0;
}

int find (int array[], int size)
{
    int i, largest, where;
    largest = array [0];
    for (i=0; i<size; ++i) {
        if (array[i]>largest) {
            largest = array[i];
            where = i;
        }
    }
    return (int) *(&array+sizeof(int)*where);
} 
```

我知道我可以替换：

```
return (int) *(&array+sizeof(int)*where); 
```

和：

```
return array[where]; 
```

但这不是练习的重点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:00:03.320

指针算术并不像您认为的那样起作用。您正在寻找：

```
return *(array + where); 
```

`array`已经是一个指针，并且指针运算在添加时只是“做正确的事”。

你可能会因为`int array[]`你的函数签名而感到困惑——这只是`int *array`. 你真的有一个指针，而不是一个数组。

由于其他答案中存在一些错误信息，我将在这里写一个更完整的解释。这个函数签名：

```
int find(int array[], int size) 
```

真正意思：

```
int find(int *array, int size) 
```

如上所述，使用的`[]`只是语法糖。当您调用该函数时，例如：

```
find(test, 3); 
```

`test`自动衰减为指向其第一个元素的指针。如果你打电话给它，它是一样的：

```
find(&test[0], 3); 
```

现在，查看您的 return 语句，您可以看到：

```
return (int) *(&array+sizeof(int)*where); 
```

没有意义——首先`&array`是参数的地址——在这种情况下是指针参数，但这并不重要。如果您添加并取消引用，您将从堆栈中返回一些随机数据，而不是从您想要的数组中返回。

其次，乘以`sizeof(int)`是不必要的。C 中的指针算术已经包含了与指向类型大小的隐式乘法。您真正想要返回的是：

```
 return array[where]; 
```

这相当于：

```
 return *(array + where); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T18:03:23.233

你这太复杂了...

```
return array[where];  // this means, take the base memory location of "array" then
                      // add in an offset of where and dereference the result 
```

这与以下内容完全相同：

```
return *(array + where); 
```

事实是，在您的 main 函数中，您有一个名为的数组`test`，一旦您将它传递给您的`find()`函数[，该数组将衰减为一个指针](https://stackoverflow.com/questions/1461432/what-is-array-decaying)。所以如果你现在知道你有一个指针，你应该明白为什么你不应该像这样抓取地址：

```
&array 
```

而且您不需要添加“sizeof”偏移量，因为这是由指针 ( `int *`)的类型给出的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:01:49.570

你应该做：

```
return  *(array+where); 
```

因为`where`是 的偏移量`array`。你不再`sizeof(int)`需要

# javascript - 代码打印出多个答案

> ID：15885727
> 
> 赞同：0
> 
> 时间：2013-04-08T17:57:09.120
> 
> 标签：javascript

我正在为我的 JScript 类做一些事情，但我看不到我的代码如何打印我的 document.write 的多个实例。有什么帮助吗？

```
memberNumber = prompt("How many people will be staying?");
memberOfAAA = prompt("Are the members part of AAA?");
roomView = prompt("Do you want a room with a view?");
Number(memberNumber);   

if(memberOfAAA === "yes" || "Yes", memberNumber > 5 && memberNumber < 3, roomView === "yes") 
{
roomCost = (costRoom12 - (costRoom12 * percent1)+(costRoom12 * viewCost));
document.write("Total cost per night is $" + roomCost );
}if (memberOfAAA === "yes" || "Yes", memberNumber > 5 && memberNumber < 3, roomView === "no" || "No") 
{
roomCost = (costRoom12 - (costRoom12 * percent1));
document.write("Total cost per night is $" + roomCost );}

if(memberOfAAA === "no" || "No" , memberNumber > 5 && memberNumber < 3, roomView === "yes" || "Yes") 
{
roomCost = (costRoom12 + (costRoom12 * viewCost));
document.write("Total cost per night is $" + roomCost );
}if(memberOfAAA === "no" || "No" , memberNumber > 5 && memberNumber < 3, roomView === "no" || "No") 
{
roomCost = (costRoom12);
document.write("Total cost per night is $" + roomCost );
}
if (memberOfAAA === "yes" || "Yes", memberNumber > 5 && memberNumber < 3, roomView === "yes" || "Yes") {
roomCost = (costRoom34 - (costRoom34 * percent2) + (costRoom34 * viewCost)); 
document.write("Total cost per night is $" + roomCost );
}
if (memberOfAAA === "yes" || "Yes", memberNumber > 5 && memberNumber < 3, roomView === "no" || "No") {
roomCost = (costRoom34 - (costRoom34 * percent2));
document.write("Total cost per night is $" + roomCost );
}
if(memberOfAAA === "no" && memberNumber > 5 && memberNumber < 3, roomView === "yes" || "Yes") {
roomCost = (costRoom34 + (costRoom34 * viewCost)); 
document.write("Total cost per night is $" + roomCost );
}
if(memberOfAAA === "no" || "No", memberNumber > 5 && memberNumber < 3, roomView === "no" || "No") {
roomCost = costRoom34;
document.write("Total cost per night is $" + roomCost );
}
if(memberOfAAA === "Yes" || "yes", memberNumber > 7 && memberNumber < 4, roomView === "yes" || "Yes") {
roomCost = (costRoom56 - (costRoom56 * percent3) + (costRoom56 * viewCost))

}
if(memberOfAAA === "yes" || "Yes", memberNumber > 7 && memberNumber < 4, roomView === "no" || "No") {
roomCost = (costRoom56 - (costRoom56 * percent3)); 
document.write("Total cost per night is $" + roomCost );
}
if(memberOfAAA === "no" || "No", memberNumber > 7 && memberNumber < 4, roomView === "yes" || "Yes") {
roomCost = (costRoom56 + (costRoom56 * viewCost)); 
document.write("Total cost per night is $" + roomCost );
}
if(memberOfAAA === "no" || "No", memberNumber > 7 && memberNumber < 4, roomView === "no" || "No") {
roomCost = (costRoom56);
document.write("Total cost per night is $" + roomCost );
} 
```

它应该只打印一个由变量 one 输入定义的字符串，但它会打印出所有字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:02:31.013

您的 if 语句总是评估为真，因为

```
if (memberOfAAA === "yes" || "Yes" ... ) 
```

应该

```
if (memberOfAAA === "yes" || memberOfAAA === "Yes" ...) 
```

此外，您应该使用 if/else if 语句。

# ios - IOS：正确的屏幕触摸次数

> ID：15885728
> 
> 赞同：6
> 
> 时间：2013-04-08T17:57:10.170
> 
> 标签：ios, xcode, touch, touchesbegan

在我的应用程序中，我需要捕捉屏幕上手指的确切数量，我尝试了两种方法，但我有 2 个不同的问题。

第一种方式：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
NSArray *allTouches = [touches allObjects];
    int count = [allTouches count];
    NSLog(@"number of touch:%d", count);
} 
```

如果我同时使用更多手指，这会给我不准确的触摸次数。

第二种方式：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    int num = [touches count];
    totalTouch = totalTouch+num;
    NSLog(@"number of touch:%d", totalTouch);
} 
```

通过这种方式，我使用了一个全局变量（totalTouch），每次调用 touchbegan 时都会增加它，并且我有完美的触摸次数。自然地，我在 touchend 中将此 var 设置为 '0'

```
- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    totalTouch = 0;
} 
```

我的问题是，用第二种方式我在 touchbegan 中进行控制，这是：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    int num = [touches count];
    totalTouch = totalTouch+num;

    if (totalTouch == numberToVerify){
       //IT ENTER HERE EVERYTIME INSIDE THIS IF
    }
    else{
    }
 } 
```

所以每次它进入 if 条件时，我不想要它，我只想在我有最终的触摸次数时才做这个控制......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T18:06:28.870

在你的

```
 - (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
     int num = [touches count];
     totalTouch = totalTouch+num;
     NSLog(@"number of touch:%d", totalTouch);
  } 
```

您可以通过以下方式获取屏幕上的手指数

```
 [[event allTouches]count] 
```

这可以从`- (void)touchesBegan:` `- (void)touchesEnded:` 或`- (void)touchesMoved:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:03:34.230

在`touchesBegan:withEvent:`中，`touches`参数仅包含“开始”阶段 ( `UITouchPhaseBegan`) 中的触摸。在`touchesEnded:withEvent:`中，`touches`参数仅包含“结束”阶段 ( `UITouchPhaseEnded`) 中的触摸。同样对于`touchesMoved:withEvent:`和`touchesCancelled:withEvent:`。

如果您希望系统知道所有触摸，请查看`event.allTouches`.

如果您希望系统知道属于特定视图的所有触摸，请查看`[event touchesForView:someView]`.

[*UIEvent 类参考*](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIEvent_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-27T14:03:29.113

更新 Swift 3：

```
override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {

    super.touchesBegan(touches, with: event)
    var countTouch = event?.allTouches?.count

//Do whatever you want with that
} 
```

如果你想知道它是否在任何时候发生了变化，在 touchesMoved 中做同样的事情并把它放在一个数组中，你就可以分析它了。

像这样 ：

```
var countTouch:[Int] = []

override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {

    super.touchesBegan(touches, with: event)
    countTouch.append((event?.allTouches?.count)!) //Not really necessary

//Do whatever you want with that
}

override func touchesMoved(_ touches: Set<UITouch>, with event: UIEvent?) {
    super.touchesMoved(touches, with: event)
    countTouch.append((event?.allTouches?.count)!)
} 
```

希望它对某人有所帮助，请不要犹豫编辑或改进它。我是 Swift 的初学者，所以完全有可能出现错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-07T05:08:48.907

您的第二个解决方案的问题是，在您的`touchesEnded`函数中，您设置`totalTouch`为 0 而不是按`allObjects`. *当所有*触摸都结束时，该函数`touchesEnded`不会被调用；当*任何*触摸结束时调用它。

 **如果我触摸一次，`touchesBegan`就会被调用。如果我同时再次触摸，`touchesBegan`则再次调用，`totalTouch`现在为 2。如果我解除其中一次触摸，`touchesEnded`则调用`allObjects`长度为 1，因为仅解除了一次触摸。如果我们在这里将计数器设置为 0 而不是将计数器递减 的大小`allObjects`，这会打乱整个过程。这是我的解决方案：

```
override func touchesBegan(touches: NSSet, withEvent event: UIEvent) {
    ...
    touchCount += touches.allObjects.count
    ...
}

override func touchesEnded(touches: NSSet, withEvent event: UIEvent) {
    ...
    touchCount -= touches.allObjects.count
    ...
} 
```**

# variables - ActiveCell.FormulaR1C1 中的变量

> ID：15885730
> 
> 赞同：1
> 
> 时间：2013-04-08T17:57:14.920
> 
> 标签：variables, excel, excel-formula, vba

我希望我的公式在我的列左侧产生一个句点和变量名称，它指的是工作表名称。例如，如果左边的列是 10，工作表名称是 12。我的值是 10.12

我尝试了以下方法，但我无法让 Name 显示为变量而不是“Name”

```
Dim ws As Worksheet
Dim Name As Integer

For Each ws In ActiveWorkbook.Worksheets
    ws.Activate
    Name = ws.Name

    Range("C2").Select
    ActiveCell.FormulaR1C1 = "=RC[-1]&""."" & Name "
Next ws 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:59:11.830

这似乎让你更接近：

```
Dim Name As String
Dim Output As String

Name = ActiveSheet.Name

Output = ActiveCell.Offset(0, -1).Value & "." & Name

ActiveCell.FormulaR1C1 = Output 
```

这是您的代码，没有所有选择：

```
Sub foo()
Dim ws As Worksheet
Dim Name As String
Dim Output As String

For Each ws In ActiveWorkbook.Worksheets
    ws.Activate
    Name = ws.Name
    Output = ws.Range("C2").Offset(0, -1).Value & "." & Name
    ws.Range("C2").FormulaR1C1 = Output
Next ws
End Sub 
```

# python - python日期时间操作

> ID：15885733
> 
> 赞同：1
> 
> 时间：2013-04-08T17:57:22.797
> 
> 标签：python, datetime

我有以下错误，有人可以解释一下 datetime.datetime 和 datetime.date 之间的区别吗？

```
TypeError: 不支持的操作数类型 -: 'datetime.datetime' 和 'datetime.date'

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:01:56.007

顾名思义，a`datetime`包含有关日期和时间的信息，而 a`date`只是一个日期。这就是为什么允许减去两个日期时间并返回 a `timedelta`（两个瞬间之间的时间差），但减去 a`datetime`和 a`date`是不允许的——因为`date`指的是一整天，所以不清楚你想要计算距离的那一天的哪一部分至。

要修复错误，您必须指定您指的是当天的哪一点。例如，要让它引用日期开始时的午夜，请替换`dt - d`为`dt - datetime.datetime(d.year, d.month, d.day)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:12:15.297

`date`只是一个日期（年、月、日），同时`datetime`还包括一个时间（年、月、日、小时、分钟、秒、毫秒）。

不能直接比较两者，因为需要明确指定如何处理时间部分。您是完全忽略时间部分，还是在必要时选择一些任意时间进行比较（通常是午夜）？此选择取决于哪个最适合您的情况，实际上，只有您可以确定。

更具体地说，您必须将 提升`date`为 a`datetime`或将 降级`datetime`为 a `date`。作为`dt`日期时间和`d`日期，后者更容易一些（并且通常更有意义 - 你可以调用`dt.date()`），但前者也不难（`datetime.datetime(d.year, d.month, d.day)`）。

在您的代码中，它看起来像`dt.date() - d`或`dt - datetime.datetime(d.year, d.month, d.day)`。

请注意，这将返回一个`datetime.timedelta`对象，这是另一种略有不同的动物 - 它不代表特定的时间点，仅代表两点之间的差异（即，您不能将其用作日历上的日期） .

# rest - 通过 Paypal REST API 使用 Paypal 付款不会在 Paypal Sandbox 或实时网站上显示付款说明

> ID：15885742
> 
> 赞同：27
> 
> 时间：2013-04-08T17:58:00.277
> 
> 标签：rest, paypal, paypal-sandbox

我正在实施 Paypal 的新 REST API Pay with Paypal 方法，可以在此处引用： [https ://developer.paypal.com/webapps/developer/docs/integration/web/accept-paypal-payment/](https://developer.paypal.com/webapps/developer/docs/integration/web/accept-paypal-payment/)

付款执行良好，完全符合应有的方式。用户选择使用 Paypal 付款，然后被重定向到 Paypal 站点，预计他将在该站点登录并批准付款。我发送 Paypal 的 JSON 数据几乎是上面链接中指定的，我的看起来像这样：

```
{
  "intent":"sale",
  "redirect_urls":{
    "return_url":"http://<return URL here>",
    "cancel_url":"http://<cancel URL here>"
  },
  "payer":{
    "payment_method":"paypal"
  },
  "transactions":[
    {
      "amount":{
        "total":"7.47",
        "currency":"USD"
      },
      "description":"This is the payment description."
    }
  ] 
```

}

当它将用户重定向到贝宝网站时，**描述和总金额列显示为空白**

我不确定这是否是 Paypal 的 REST API 上的错误，但我相信我提供了必要的描述 + 支付金额以反映在此页面上。如果未显示此信息，这通常会对用户产生威慑作用，因为他们肯定希望看到他们在 Paypal 网站上支付的金额，即使该金额已列在我的网站上。

这是它的样子：

![在此处输入图像描述](https://i.stack.imgur.com/w1GfB.png)

对于那些想表明用户没有登录的人，好吧，即使在登录后，描述和当前购买栏仍然是空白的。

我是否遗漏了任何需要发送到 Paypal 以指示此描述数据的参数？

注意：对于实时服务器和沙盒服务器，此问题仍然存在。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-09T04:54:54.803

上一页左侧面板显示： 1\. 订单商品详情。您可以将项目列表作为交易详细信息的一部分包含在付款资源中。此处将显示相同的内容。2\. 交易金额的组成部分，例如运费、税金等，如果您在请求中包含它们。

尝试此请求以查看示例：

```
{
    "intent": "sale",
    "payer": {
        "payment_method": "paypal"
    },
    "redirect_urls": {
        "return_url": "http://<return url>",
        "cancel_url": "http://<cancle url>"
    },
    "transactions": [
        {
            "amount": {
                "total": "8.00",
                "currency": "USD",
                "details": {
                    "subtotal": "6.00",
                    "tax": "1.00",
                    "shipping": "1.00"
                }
            },
            "description": "This is payment description.",
            "item_list": { 
                "items":[
                    {
                        "quantity":"3", 
                        "name":"Hat", 
                        "price":"2.00",  
                        "sku":"product12345", 
                        "currency":"USD"
                    }
                ]
            }
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-19T17:24:38.717

谢谢你。Madhu 记得使用 rest-api 库！

```
Details amountDetails = new Details();
                    amountDetails.setSubtotal(autoregistro.getPedido().getItems().get(0).getTotal().toPlainString());
                    amountDetails.setTax("0");
                    amountDetails.setShipping("0");

                    Amount amount = new Amount();
                    amount.setCurrency("USD");
                    amount.setTotal(autoregistro.getPedido().getItems().get(0).getTotal().toPlainString());
                    // amount.setTotal("7.47"); // Los decimales deben ser con punto
                    amount.setDetails(amountDetails);

                    Item item = new Item();
                    item.setCurrency("USD");
                    item.setQuantity("1");
                    item.setName(autoregistro.getPedido().getItems().get(0).getDescripcion());
                    item.setPrice(amountDetails.getSubtotal());

                    List<Item> items = new ArrayList<Item>();
                    items.add(item);

                    ItemList itemList = new ItemList();
                    itemList.setItems(items);

                    Transaction transaction = new Transaction();
                    transaction.setDescription(item.getName());
                    transaction.setAmount(amount);
                    transaction.setItemList(itemList);

                    List<Transaction> transactions = new ArrayList<Transaction>();
                    transactions.add(transaction);

                    Payer payer = new Payer();
                    payer.setPaymentMethod("paypal");
                    // payer.setPaymentMethod("credit_card");

                    Payment payment = new Payment();
                    payment.setIntent("sale");
                    payment.setPayer(payer);
                    payment.setTransactions(transactions);
                    RedirectUrls redirectUrls = new RedirectUrls();
                    redirectUrls.setCancelUrl(this.configParameters.getAutoregistroURL() + "/pay_paypal?cancel=true");
                    redirectUrls.setReturnUrl(this.configParameters.getAutoregistroURL() + "/pay_paypal?success=true");
                    payment.setRedirectUrls(redirectUrls);

                    Payment createdPayment = payment.create(apiContext); 
```

# grails - 为什么我的 GORM 对象没有保存到数据库中？

> ID：15885745
> 
> 赞同：3
> 
> 时间：2013-04-08T17:58:03.937
> 
> 标签：grails, transactions, grails-orm, grails-2.0

考虑以下代码：

```
if (!serpKeyword) {
    serpKeyword = new SerpKeyword(
            keyword: searchKeyword,
            geoKeyword: geoKeyword,
            concatenation: concatenation,
            locale: locale
    )
    serpKeyword.save(flush: true, failOnError: true)
}

serpService.submitKeyword(serpKeyword, false) 
```

这是 submitKeyword 方法：

```
@Transactional(propagation = Propagation.REQUIRES_NEW)
boolean submitKeyword(keywordToSubmit, boolean reset) {
    def keyword = SerpKeyword.get(keywordToSubmit.id) 
```

调用时没有引发错误`serpKeyword.save`，但是当我进入该`submitKeyword`方法时，`SerpKeyword.get(keywordToSubmit.id)`返回 null。是什么阻止了它的保存？

**编辑**

更改`REQUIRES_NEW`为`REQUIRED`似乎可以解决问题。这就是我*认为*正在发生的事情。

调用的代码`serpService.submitKeyword`位于服务方法中。据我了解，服务方法的默认传播策略是`REQUIRED`. 由于所有这些数据库写入都发生在事务的上下文中，因此写入在数据库中排队，但在事务完成之前并未实际对数据库执行，根据[文档](http://grails.org/doc/latest/guide/GORM.html#persistenceBasics)：

> 请注意，刷新与提交事务不同。如果您的操作是在事务的上下文中执行的，则刷新将执行 SQL 更新，但数据库会将更改保存在其事务队列中，并且仅在事务提交时才完成更新。

`serpService.submitKeyword`我们在事务实际完成之前调用。`serpKeyword`该方法在我们不可用的情况下启动一个全新的事务。将其更改为`REQUIRED`有效，因为我们现在在父事务的上下文中进行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T00:44:48.297

我认为堆栈的某些部分是懒惰的。如果您使用的是 Hibernate，我已经遇到过这种行为。我不确定这是一个被批准的动作，但你可以在调用之前清除会话，`submitKeyword`如下所示：

```
long keywordId = serpKeyword.id
SerpKeyword.withSession{it.clear()}
serpService.submitKeyword(keywordId, false) 
```

然后将方法更改为：

```
@Transactional(propagation = Propagation.REQUIRES_NEW)
boolean submitKeyword(keywordId, boolean reset) {
  def keyword = SerpKeyword.get(keywordId) 
```

然后我打赌`.get()`意志会奏效。如果您在会话中有其他需要的对象。您将需要通过存储它们的 id 和`.get()`ing 来解除它们。

# forms - 用于形成元素的简单 HTML 标记 - LinkedIn 个人资料编辑

> ID：15885747
> 
> 赞同：1
> 
> 时间：2013-04-08T17:58:15.357
> 
> 标签：forms, plugins, linkedin

是否有任何插件可以将 html 元素（span、div）转换为表单？一个示例是在编辑 LinkedIn 个人资料时，将要修改的部分转换为表格。

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:40:21.590

JQuery 有 Wrap 方法，您可以使用该方法将整个 div / span 放入表单中。

```
$('.inner').wrap('<form class="newform" action="..." method="..." />'); 
```

在这里找到：http: [//api.jquery.com/wrap/](http://api.jquery.com/wrap/)

考虑以下 HTML：

```
<div class="container">
  <div class="inner">Hello</div>
  <div class="inner">Goodbye</div>
</div> 
```

使用 .wrap()，我们可以在内部元素周围插入一个 HTML 结构，如下所示：

```
$('.inner').wrap('<div class="new" />'); 
```

新元素是动态创建并添加到 DOM 中的。结果是每个匹配元素的新包装：

```
<div class="container">
  <div class="new">
    <div class="inner">Hello</div>
  </div>
  <div class="new">
    <div class="inner">Goodbye</div>
  </div>
</div> 
```

该方法的第二个版本允许我们指定一个回调函数。这个回调函数将为每个匹配的元素调用一次；它应该返回一个 DOM 元素、jQuery 对象或 HTML 片段，在其中包装相应的元素。例如：

```
$('.inner').wrap(function() {
  return '<div class="' + $(this).text() + '" />';
}); 
```

这将导致每个都有一个与其包装的文本相对应的类：

```
<div class="container">
  <div class="Hello">
    <div class="inner">Hello</div>
  </div>
  <div class="Goodbye">
    <div class="inner">Goodbye</div>
  </div>
</div> 
```

示例： 示例：在所有段落周围包裹一个新的 div。

```
<!DOCTYPE html>
<html>
<head>
  <style>

  div { border: 2px solid blue; }
  p { background:yellow; margin:4px; }
  </style>
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
</head>
<body>
  <p>Hello</p>
  <p>cruel</p>
  <p>World</p>
<script>$("p").wrap("<div></div>");</script>

</body>
</html> 
```

# mysql - 如何通过 mysqldump 正确转储 mysql 数据库？

> ID：15885749
> 
> 赞同：0
> 
> 时间：2013-04-08T17:58:24.293
> 
> 标签：mysql, mysqldump

mysqldump 实用程序是否需要任何单独的客户端？

我正在为 Windows 使用 MYSQL5.5 命令行客户端。

我正在写查询

```
mysqldump -u root -p pwd** my_db > mydb.sql 
```

我收到错误

```
 ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax t 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:01:43.660

问题是您正在 MySQL 命令行客户端中运行该命令。而是从外壳运行它，而不是在客户端内部。

换句话说，打开一个普通的 shell（如果使用 Windows，则为 cmd.exe），然后运行：（你到 mysqldump.exe 的路径无疑会有所不同）

```
C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqldump -u root -ppwd** my_db > mydb.sql 
```

不要打开 MySQL 命令行客户端并在其中运行该命令*。*该客户端用于执行 SQL；mysqldump.exe 程序是完全独立的并独立运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:59:36.710

```
> not < 
```

您正在将文件 mysql.sql 转储到 mysqldump，而不是从其中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:00:13.143

```
mysqldump -u root -p pwd** my_db > mydb.sql 
```

# c# - Silverlight 用户控件数据绑定

> ID：15885750
> 
> 赞同：0
> 
> 时间：2013-04-08T17:58:28.080
> 
> 标签：c#, wpf, silverlight, windows-phone-7, data-binding

我正在尝试创建一个包含列表框的用户控件，但我不知道如何正确设置数据绑定。

在 MainForm.xaml 中（MyItems 是 ViewModel 中定义的 ObservableCollection）：

```
<my:ItemsList Items="{Binding MyItems}"/> 
```

用户控制：

```
public partial class ItemsList : UserControl
{
    public ItemsList()
    {
        InitializeComponent();
    }

    public IEnumerable Items
    {
        get { return (IEnumerable)GetValue(ItemsProperty); }
        set { SetValue(ItemsProperty, value); }
    }

    public static readonly DependencyProperty ItemsProperty =
        DependencyProperty.Register("Items", typeof(IEnumerable), typeof(ItemsList), null);
} 
```

和 xaml（省略命名空间声明）：

```
<UserControl x:Class="MyApp.Controls.ItemsList">
    <phone:LongListSelector ItemsSource="{Binding Items}">
        <phone:LongListSelector.ItemTemplate>
            <DataTemplate>
                 <TextBlock Text="{Binding ItemName}" />
            </DataTemplate>
        </phone:LongListSelector.ItemTemplate>
    </phone:LongListSelector>
</UserControl> 
```

我得到的错误：BindingExpression 路径错误：在“MyApp.ViewModels.MainViewModel”上找不到“Items”属性？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:29:51.503

我缺少的是在用户控件的构造函数中为列表框设置数据上下文......

```
LayoutRoot.DataContext = this; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:06:47.990

检查：您是否使用了正确的页面数据上下文（必须是您的 ViewModel）？

用户控件必须是：

```
public partial class ItemsList : UserControl
{
    public ItemsList()
    {
        InitializeComponent();
    }

    public IEnumerable Items
    {
    get { return (IEnumerable)GetValue(ItemsProperty); }
    set { SetValue(ItemsProperty, value); }
    }

    public static readonly DependencyProperty ItemsProperty = DependencyProperty.Register("Items", typeof(IEnumerable), typeof(ItemsList), new PropertyMetadata(ItemsChanged));

    private static void ItemsChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var controll = (ItemsList)d;
        var val = (IEnumerable)e.NewValue;
        controll.lls.ItemSource = val;
    } 
```

Xaml

```
<UserControl x:Class="MyApp.Controls.ItemsList">
    <phone:LongListSelector x:name="lls">
        <phone:LongListSelector.ItemTemplate>
            <DataTemplate>
                 <TextBlock Text="{Binding ItemName}" />
            </DataTemplate>
        </phone:LongListSelector.ItemTemplate>
    </phone:LongListSelector>
</UserControl> 
```

希望它的帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T19:07:20.263

在您的 xaml 中，您需要添加对视图模型的引用并使其成为控件的数据上下文。

```
 <UserControl xmlns:local="clr-namespace:"myproject.mynamespace;assembly=myproject">
        <UserControl.Resources>
           <local:myviewmodel x:key="viewModel"/>
        </UserControl.Resources>
        <UserControl.DataContext>
           <Binding Source="{StaticResource viewModel}"/>
        </UserControl.DataContext>
        <phone:LongListSelector ItemsSource="{Binding Items}">
           <phone:LongListSelector.ItemTemplate>
           <DataTemplate>
             <TextBlock Text="{Binding ItemName}" />
          </DataTemplate>
        </phone:LongListSelector.ItemTemplate>
       </phone:LongListSelector>
    </UserControl> 
```

请注意：您可以使用 DisplayMemberPath="ItemName" 属性而不是数据模板，除非您需要以某种方式与文本块进行交互。希望这可以帮助。

# c++ - 我的二分搜索有问题吗？

> ID：15885752
> 
> 赞同：0
> 
> 时间：2013-04-08T17:58:32.403
> 
> 标签：c++, search, binary

这是我尝试实现二进制搜索方法以在 20 的数组中查找任意整数 X 并输出它在数组中出现的次数。

我的输出似乎是错误的，因为无论给定整数在数组中出现多少次，它都会输出 1。

有人可以帮助我并告诉我我的代码有什么问题吗？（我知道 20 很小，线性方法更容易实现，但我使用 20 来简化事情）

可以肯定的是，我输入了 imin = 0 和 imax = 19 的输入，我还确保我已经对数组进行了排序。

```
#include <iostream>
#include <cstdlib>
#include <vector>

using namespace std;
int A[20] = {0};
int x;
int imin;
int imax;

int BinarySearch(int A[], int value, int low, int high, int count) {
       if (high < low){          
           return -1; // not found
       } 
       int mid = low + ((high - low) / 2); 

       if (A[mid] > value){
       cout<< A[mid] << " > " << value <<endl; 
           return BinarySearch(A, value, low, mid-1, count);
       }
       else if (A[mid] < value){
      cout<< A[mid] << " < " << value <<endl; 
           return BinarySearch(A, value, mid+1, high, count);
       }
       if (A[mid] == value){
       cout<< A[mid] << " = " << value <<endl; 
       count = count + 1;
       }

      return count;

   }

int main(){

    cout<<"Enter 20 integers"<<endl;

    for (int i = 0; i < 20;i++){
    cin>>A[i];
    }

    cout<<"Enter the integer x"<<endl;
    cin>>x;

    cout<<"What is imin?"<<endl;
    cin>>imin;

    cout<<"What is imax?"<<endl;
    cin>>imax;

int temp;
int i;    

for (int j = 1; j < 20; j++){
    i = j - 1;        
    temp = A[j]; 

    while ((i>=0) && (A[i] > temp) ) 
    {  
       A[i+1] = A[i];
       i=i-1;                                                  
    }

    A[i+1] = temp; 

 }

 int count = BinarySearch(A, x, imin, imax, 0);

cout<<count<<endl;

     system("pause");

} 
```

非常感谢

编辑：添加了一些更正。但我想二进制搜索算法似乎有问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:06:57.077

更改`int A[] = {0};`为

```
int* A=new int[20]; 
```

或者`int A[20]={0}` 目前您没有为 20 个整数分配内存，而是为 1 个整数分配内存。

还要更改您的 ifs 以涵盖 {} 中的指令组

```
if(){
    //... many instructions
}else{
    //... many instructions
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:08:03.980

您必须使用 {} 来制作您的 if 语句

```
if (A[mid] > value) {
                    ^^
   cout<< A[mid] << " > " << value <<endl; 
   return BinarySearch(A, value, low, mid-1, count);
}
^^
else if (A[mid] < value) {
    cout<< A[mid] << " < " << value <<endl; 
    return BinarySearch(A, value, mid+1, high, count);
} 
```

正如现在写的那样，二进制搜索永远不会到达

```
 if (A[mid] == value){
   cout<< A[mid] << " = " << value <<endl; 
   count = count + 1;
   } 
```

它总是会返回

```
if (high < low)            
       return -1; // not found 
```

或者

```
 return BinarySearch(A, value, low, mid-1, count); 
```

加上评论中的建议

```
int A[] = {0}; 
```

应该

```
int A[20]; 
```

你必须接受从二进制搜索返回的另一件事

```
int count = BinarySearch(A, x, imin, imax, 0);
cout<<count<<endl;
system("pause"); 
```

好的，再编辑一次。

```
 if (A[mid] == value){
        cout<< A[mid] << " = " << value <<endl; 
        count = count + 1;        // increment count
        count = BinarySearch(A, value, mid+1, high, count);  // search one side to find additional "value"
        return BinarySearch(A, value, mid, high - 1, count); // search the other side to find additional "value"
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:49:36.933

您的代码中有一些基本错误：

代码问题：

```
 else if (A[mid] < value){
       cout<< A[mid] << " < " << value <<endl; 
       return BinarySearch(A, value, mid+1, high, count);
   }
   if (A[mid] == value){  
   //^^^^another else is missing
        cout<< A[mid] << " = " << value <<endl; 
        count = count + 1;
   } 
```

同时，您尝试使用二进制搜索来查找给定数字的出现的方式并不完全正确。应按如下方式进行：

因为您已经使用插入排序对数组进行了排序。您需要做的是简单地使用二进制搜索来查找给定整数的第一次和最后一次出现，然后出现的总数是这两个索引之间的简单算术。

例如，给定数组（排序）如下：

```
 1 2 3 4 4 4 4 4 5 5 5 
```

您想找到 4，然后使用二分搜索在索引 3 处查找第一次出现，在索引 7 处查找最后一次出现，则出现的总数为 7-3 +1 = 5。

主要代码应如下所示：

```
int findFrequency(int A[], int x, int n)
{
    int firstIndex = findFirst(A, 0, n-1, x, n);

    if(firstIndex  == -1)
        return firstIndex;

    //only search from firstIndex to end of array
    int lastIndex = findLast(A, firstIndex, n-1, x, n);

    return (lastIndex - firstIndex + 1);
}

 int findFirst(int A[], int low, int high, int x, int n)
 {
    if(high >= low)
    {
        int mid = low + (high - low)/2;
        if( ( mid == 0 || x > A[mid-1]) && A[mid] == x)
            return mid;
        else if(x > A[mid])
           return findFirst(arr, (mid + 1), high, x, n);
       else
           return findFirst(A, low, (mid -1), x, n);
    }
    return -1;
  }

  int findLast(int A[], int low, int high, int x, int n)
  {
      if(high >= low)
      {
          int mid = low + (high - low)/2;
          if( ( mid == n-1 || x < A[mid+1]) && A[mid] == x )
             return mid;
          else if(x < A[mid])
             return findLast(A, low, (mid -1), x, n);
          else
             return findLast(A, (mid + 1), high, x, n);      
      }
      return -1;
  } 
```

# mongodb - JasperReports 中 MongoDB 的多选查询

> ID：15885753
> 
> 赞同：0
> 
> 时间：2013-04-08T17:58:32.770
> 
> 标签：mongodb, jasper-reports

有没有人知道在 JasperReport 中查询 mongodb 时完成多选查询的方法。在 SQL 中有 $X 参数，但我没有设法在 JasperReports MongoDB 查询语言中找到任何类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T07:08:16.183

我通过使用报告中的过滤器表达式过滤掉未选择的项目来解决这个问题，方法是检查字段变量中的每个元组与集合参数，如下所示：

```
<filterExpression><![CDATA[$P{date_id}.contains($F{date_id})]]></filterExpression> 
```

# javascript - 禁止从 IFRAME 更改 URL

> ID：15885754
> 
> 赞同：0
> 
> 时间：2013-04-08T17:58:35.117
> 
> 标签：javascript, html, iframe

我有我的 HTML5 游戏网站[FunInBrowser.com](http://www.funinbrowser.com)。我有一个第三方 URL 列表，其中应该包含 HTML5 游戏。我将这些游戏显示在一个小的 IFRAME 中，并在其周围放置标题、描述和评级。游戏可能如下所示：[Connection](http://www.funinbrowser.com/?g=6)。

有人上传了他的 URL，看起来不错，但**它从 IFRAME 更改了顶部 URL**。这是：[草稿](http://www.funinbrowser.com/?g=16)。我什至不知道，您可以从 IFRAME 获得这种级别的控制。

有没有办法禁止 IFRAME 的这种行为？我想将游戏保持在小框架中并保持相同的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:02:19.547

在 html5 中，您可以使用沙盒属性。但并非所有浏览器都支持它。有一篇关于它的好文章[http://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/](http://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/) 浏览器支持表在这里[http://caniuse.com/iframe-sandbox](http://caniuse.com/iframe-sandbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:07:26.797

您应该能够为[`onbeforeunload`](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/beforeunload?redirectlocale=en-US&redirectslug=Mozilla_event_reference/beforeunload)iframe 添加一个事件侦听器，它会根据有效 URL 列表检查新 URL。在事件处理程序中，请确保不要返回字符串，除非您想要“您确定要存在此页面吗？” 对话框出现。

不过，我应该补充一点，这不会阻止他的页面覆盖您设置的事件处理程序。它应该适用于您当前的情况，但对他来说解决这个问题是微不足道的。

# java - 显示来自 SwarmConnect 的排行榜

> ID：15885755
> 
> 赞同：0
> 
> 时间：2013-04-08T17:58:42.837
> 
> 标签：java, android, leaderboard

我正在尝试为我的应用程序的最新版本实现在线排行榜。我按照这里找到的教程进行操作：

[http://swarmconnect.com/admin/docs/leaderboard](http://swarmconnect.com/admin/docs/leaderboard)

这是来自`MainMenu.java`.

```
public void onCreate(Bundle savedInstanceState) {

    // if user has logged in before, automatically login user without showing the home screen
    if(Swarm.isEnabled()) {
        autoLogin();
    } else {
        login();
    }

    if(Swarm.isEnabled() == false) {
        autoLogin();
    }

}

public void autoLogin() {
    Swarm.init(MainMenu.this, ...., "...");
}

public void login() {

            Swarm.init(MainMenu.this, ..., "...");
        }
} 
```

`Results.java`测验结束后显示。这是那里的相关代码：

```
public void submitScore(long score) {
    SwarmLeaderboard.submitScore(LEADERBOARD_ID, score);
} 
```

以下是来自的相关代码`Highscores.java`：

```
public void showLeaderboard() {
    SwarmLeaderboard.showLeaderboard(LEADERBOARD_ID);
} 
```

这就是我拥有的所有代码，也是 SwarmConnect 网站上的所有代码。我能够`MainMenu`成功登录，并且应用程序永远不会崩溃。但是当我去`Highscores.java`什么都没有显示。必须有更多代码，但我在任何地方都看不到任何文档，以获取超出顶部链接中的说明的说明。

我的问题是如何显示从`Results.java`页面提交的分数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T02:26:05.797

[好的，我在我制作的一个简单游戏](https://play.google.com/store/apps/details?id=com.torcellite.tapme&feature=more_from_developer#?t=W251bGwsMSwxLDEwMiwiY29tLnRvcmNlbGxpdGUudGFwbWUiXQ..)上安装了 SwarmConnect 。

这是我用来显示排行榜的代码：`Swarm.showLeaderboards();`它是`Swarm`，不是`SwarmLeaderboard`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T23:53:04.047

请确保您已遵循 Swarm 设置文档 ( [http://swarmconnect.com/admin/docs/setup](http://swarmconnect.com/admin/docs/setup) )。特别是扩展 SwarmActivity 的部分（或者，调用 setActive() 和 setInactive()）。我的猜测是 Swarm 没有可用的活动上下文，因此不会显示新屏幕。

# javascript - TypeError：response.data 是未定义的 Facebook api

> ID：15885758
> 
> 赞同：0
> 
> 时间：2013-04-08T17:58:46.323
> 
> 标签：javascript, facebook, facebook-like

我想使用本教程：[http](http://www.webtuts.info/webdevelopment/facebook-download-script-2/225/) ://www.webtuts.info/webdevelopment/facebook-download-script-2/225/ 。而且我只更改了appId。我得到这个错误：

```
TypeError: response.data is undefined
[Break On This Error]   

...( response.data.length == 1 ) { //there should only be a single value inside "da... 
```

这是我的代码：[http](http://pastebin.com/dz3LMWaP) ://pastebin.com/dz3LMWaP 任何人都可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:08:56.190

不可能说出问题所在，因为可能有很多原因 - 将其添加到您的代码中，就在您帖子中的行之前，它不会解决您的问题，但它会为您提供更准确的信息，说明问题是什么.

```
if (response.error) {
      console.log('Error - ' + response.error.message);
      return
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:11:33.817

`response`不包含属性`data`，因此当您尝试获取它的长度时，Javascript 会引发错误。

您将需要`response`通过`console.log()`.

# ssrs-2008 - 订阅 ssrs 报告的数据库交付选项

> ID：15885760
> 
> 赞同：0
> 
> 时间：2013-04-08T17:59:00.477
> 
> 标签：ssrs-2008

我有一份报告需要 20 分钟才能运行。我想将其作为订阅的 ssrs 报告。我已经看到在 SSRS 中，传递选项是电子邮件和文件共享，但我希望将报告直接保存在数据库中。是否有在数据库中插入报告的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:55:36.217

您可以根据要呈现的参数安排快照。如果您的报告遵循允许使用类似于快照的参数订阅它的模型，那么您可以创建批处理类型的过程。如果您的用户不期待实时数据，则此方法有效。

例如：

1.  一大早创建快照。
2.  基于类似参数的电子邮件缓存版本。

希望这可以帮助。

# python - 使用 savefig() 将图形导出为 pdf 会弄乱 matplotlib 中的轴背景

> ID：15885763
> 
> 赞同：6
> 
> 时间：2013-04-08T17:59:22.227
> 
> 标签：python, macos, matplotlib, osx-mountain-lion

我正在尝试更改绘图上的轴背景，其中几个调用通过参数`imshow()`在不同位置渲染图像。`extent`

当我使用 保存图形的 pdf 时，`savefig()`如果轴显示多个图像，我会丢失背景颜色。请注意，导出相同图形的 png 时不会发生这种情况。

这是说明问题的最小脚本：

```
import matplotlib.pyplot as plt
from numpy.random import rand

fig, ax = plt.subplots(nrows=3, ncols=1, sharex=True)

ax[0].imshow(rand(15,15), extent=[0, 2, 15, 0], \
            cmap=plt.cm.gray, aspect='auto', interpolation='Nearest')
ax[0].set_axis_bgcolor('k')

ax[1].imshow(rand(15,15), extent=[0, 2, 15, 0], \
            cmap=plt.cm.gray, aspect='auto', interpolation='Nearest')
ax[1].imshow(rand(15,15), extent=[4, 6, 15, 0], \
            cmap=plt.cm.gray, aspect='auto', interpolation='Nearest')
ax[1].set_axis_bgcolor('k')

ax[2].imshow(rand(15,15), extent=[0, 2, 15, 0], \
            cmap=plt.cm.gray, aspect='auto', interpolation='Nearest')
ax[2].imshow(rand(15,15), extent=[4, 6, 15, 0], \
            cmap=plt.cm.gray, aspect='auto', interpolation='Nearest')
ax[2].imshow(rand(15,15), extent=[8, 10, 15, 0], \
            cmap=plt.cm.gray, aspect='auto', interpolation='Nearest')
ax[2].set_axis_bgcolor('k')

ax[-1].set_xlim([0, 12])
fig.savefig('test.pdf', format='PDF')
fig.savefig('test.png', format='PNG') 
```

这是脚本的 pdf 输出（eps 输出相同）：

![测试.pdf](https://i.stack.imgur.com/R13aj.png)

这是脚本的预期输出（保存为 png）：

![测试.png](https://i.stack.imgur.com/Zlgd6.png)

我是否遇到了 matplotlib 错误，或者是否有一些我缺少的命令可以修复 pdf 输出？

编辑：我用默认值重新绘制了数字`matplotlibrc`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T21:22:49.900

这最终成为一个 matplotlib 错误。

在同一轴上渲染多个图像时，会创建一个合成图像，在渲染为 pdf 时没有透明背景，因此轴的背景颜色不会显示出来。

[这作为我在 matplotlib 的 GitHub 存储库中打开的问题](https://github.com/matplotlib/matplotlib/pull/1894)的一部分得到了解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:27:01.867

查看您的`matplotlibrc`. 有一部分选项从`savefig`定义您保存的图形的外观开始。甚至默认`matplotlibrc`有这个部分。

还有一个类似的问题：[matplotlib savefig() plots different from show()](https://stackoverflow.com/questions/7906365/matplotlib-savefig-plots-different-from-show)

# excel - 计算空白单元格的行数（Excel / VBA）

> ID：15885764
> 
> 赞同：2
> 
> 时间：2013-04-08T17:59:25.093
> 
> 标签：excel, vba, cell

您好我正在尝试计算包含空白单元格的行数。（我知道有 963 个空白单元格，我只是不知道它们分布在多少行）

我对 VBA 的了解非常有限，并且发现很难实施。

我想的方式...

两个 for 循环。

外循环将向下循环行

内循环将循环遍历行中的每个单元格

当一行中遇到一个空白单元格时，计数器将加一，我们将移至下一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:48:47.363

这是一个无需 VBA 的相当简单的方法：

![示例 1](https://i.stack.imgur.com/B5OsE.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T18:43:19.080

您实际上不需要任何循环来执行此操作。

此示例检查 A 行。将“Const column_to_test”号更改为您希望检查空白单元格的列号。

```
 Sub countblank()
   'This will count the number of rows that have a blank cell in column "A"
    Const column_to_test = 1    'first column (A)
    Dim r As Range
    Set r = Range(Cells(1, column_to_test), Cells(Rows.Count, column_to_test).End(xlUp))
    MsgBox ("There are " & r.SpecialCells(xlCellTypeBlanks).Count & " Rows with blank cells")

    'You may want to select those rows (for deletion?)

     r.SpecialCells(xlCellTypeBlanks).EntireRow.Select 'change .Select to .Delete

 End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:15:28.463

Try below code

```
Sub countBlankInRow()

    Dim counter As Long
    For i = 1 To 1000  ' specify your rows
        For j = 1 To 26 ' specify your columns

            If Cells(i, j) <> "" Then
                Exit For
            Else
                If j = 26 Then counter = counter + 1 ' Alter the col no accordingly
            End If
        Next
    Next

    MsgBox counter
End Sub 
```

# charts - 从 Octave 导出 3d 绘图以在 Web 浏览器上交互显示

> ID：15885772
> 
> 赞同：1
> 
> 时间：2013-04-08T17:59:55.377
> 
> 标签：charts, octave, interactive

我想导出使用 Octave 完成的 3d 图，并使用 Web 浏览器以交互方式显示它。

我将能够旋转绘图，就好像我直接使用 Octave 看到它一样。

有没有办法做到这一点？

我试着搜索了一下，但我没有找到任何有用的东西。我在这里为 R 找到了一些东西[R：使用 rgl 生成可以在网络浏览器中查看的 3d 可旋转图？](https://stackoverflow.com/questions/7663982/r-using-rgl-to-generate-3d-rotatable-plots-that-can-be-viewed-in-a-web-browser/)但我不知道如何在 Octave 中做到这一点）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:09:28.247

**Octave 本身创建 3d 图表，但它们不是交互式的：**

[http://www.gnu.org/software/octave/doc/interpreter/Three_002dDimensional-Plotting.html](http://www.gnu.org/software/octave/doc/interpreter/Three_002dDimensional-Plotting.html)

因此，您必须使用另一个应用程序并将 octave 数据输入 3d 交互式图表软件，以便用户可以在网页上使用它。

**用于 3D 交互式图表的“处理”工具**

( [http://www.processing.org/](http://www.processing.org/) ) 的软件可以帮助您。您将负责将原始数据从 octave 导出为交互式 3d 绘图可接受的格式。

**用于 3d 交互式图表的 webMathematica 3.2 工具**

来自 ( [http://www.wolfram.com/products/webmathematica/examples/examples.html](http://www.wolfram.com/products/webmathematica/examples/examples.html) ) 的软件，您可以将其嵌入到您的网页中，该软件可以生成交互式和动态的 2d 和 3d 内容供用户使用。

# javascript - 单击时更改超链接图像

> ID：15885776
> 
> 赞同：0
> 
> 时间：2013-04-08T18:00:01.597
> 
> 标签：javascript, jquery, html, jquery-selectors

嗨，我正在尝试按如下方式更改超链接单击的图像。但是选择按钮的图像不会更改为 loading.gif。我究竟做错了什么？我是 jquery 的新手。感谢期待

```
 <HTML><HEAD>
    <SCRIPT type=text/javascript src="jquery.js"></SCRIPT>
    </HEAD>
    <BODY>
    <TABLE>
    <TBODY>
    <TR>
    <TD><A id=webservice_submit href="javascript:document.frm_correction.submit()" jQuery1365443220846="2">
        <IMG onmouseover="MM_swapImage('Correction subj','','http://localhost:6868/corrmgr/img/select_up.gif',0)" onmouseout=MM_swapImgRestore() name="Correction Subj" alt="Correction Subj" src="http://localhost:6868/corrmgr/img/select.gif" oSrc="http://localhost:6868/corrmgr/img/select.gif"> 
         </A></TD></TD></TR></TBODY></TABLE>
    <DIV style="DISPLAY: none" id=loading jQuery1365443220846="3"><IMG name="Please wait..." alt="Please wait while the request is being processed..." src="http://localhost:6868/corrmgr/img/bert2.gif"> </DIV>
    <SCRIPT language=javascript>  
        var $loading = $('#loading'); 

        $('#webservice_submit').click(function(){     
            $loading.toggle();    
            if( $loading.is(':visible') ){
                alert("invoking web services");
                $('#image img').attr('src', 'http://localhost:63531/corrmgr/img/loading.gif');
                return ($(this).attr('disabled')) ? false : true;          
            }
        }); 

        $('#loading').hide(); 
    </SCRIPT>
    </BODY></HTML> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:01:30.297

你的选择器不对。改变这个：

```
$('#image img') 
```

对此：

```
$('#image') 
```

并给出`<img>`相应的`id`：

```
<IMG id="image" ...> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:15:22.787

我想你想将加载器图像分配给下面的图像标签

```
<IMG name="Please wait..." alt="Please wait while the request is being processed..." 
src="http://localhost:6868/corrmgr/img/bert2.gif"> 
```

如果我理解你......你改变你的代码如下......

**从 ：**

```
$('#image img').attr('src', 'http://localhost:63531/corrmgr/img/loading.gif'); 
```

**到 ：**

```
$("img[name='Please wait...']").attr('src', 'http://localhost:63531/corrmgr/img/loading.gif'); 
```

# c# - 为什么将项目添加到 ComboBox 时，重写的 ToString() 不返回我想要的内容？

> ID：15885784
> 
> 赞同：4
> 
> 时间：2013-04-08T18:00:21.847
> 
> 标签：c#, combobox, overriding, tostring

```
public partial class TestConrol : UserControl
{
    public TestConrol()
    {
        InitializeComponent();
    }

    public override string ToString()
    {
        return "asd";
    }
}

public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        TestConrol tc1 = new TestConrol();
        comboBox1.Items.Add(tc1);

        TestConrol tc2 = new TestConrol();
        comboBox1.Items.Add(tc2);
    }
} 
```

加载表单时，我看到组合框有两个名称为空的项目，而不是“asd”：/
但是如果我在公共类中覆盖 ToString()，则此工作有效，而不是从任何东西派生：

```
public class TestClass
{
    public override string ToString()
    {
        return "bla bla bla";
    }
}

public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        TestClass tcl = new TestClass();
        comboBox1.Items.Add(tcl);
    }
} 
```

之后我在组合框中看到“bla bla bla”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T18:09:26.653

在您的控件中创建一个属性并将组合框的 DisplayMember 映射到该属性，它应该可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T21:33:30.010

我试图理解源代码（！）。这不是一个简单的调用`ToString()`。

有一个`internal`班级`System.Windows.Forms.Formatter`在做一些事情。它最终创建了一个转换器。这大致相当于说：

```
var conv = System.ComponentModel.TypeDescriptor.GetConverter(tc1.GetType()); 
```

`tc1`你的问题在哪里`TestContol`。现在，如果我们使用`TestClass` `tcl`which 没有实现任何接口，这会给我们一个转换器，最终会调用`ToString()`.

但是在这个例子中我们使用`tc1`, 它是一个[`System.ComponentModel.IComponent`](http://msdn.microsoft.com/en-us/library/system.componentmodel.icomponent.aspx). 我们的`conv`因此变成了`System.ComponentModel.ComponentConverter`. 它使用`Site`. `IComponent`当我们说：

```
string result = conv.ConvertTo(tc1, typeof(string)); 
```

并且`Site`为空，我们得到`""`您在组合框中看到的空字符串。如果有一个`Site`它会用它`Name`来代替。

为了证明这一点，请将以下内容放入您的`TestControl`实例构造函数中：

```
public TestConrol()
{
    InitializeComponent();
    Site = new DummySite(); // note: Site is public, so you can also
                            // write to it from outside the class.
                            // It is also virtual, so you can override
                            // its getter and setter.
} 
```

`DummySite`类似的东西在哪里：

```
class DummySite : ISite
{
    public IComponent Component
    {
        get { throw new NotImplementedException(); }
    }

    public IContainer Container
    {
        get { throw new NotImplementedException(); }
    }

    public bool DesignMode
    {
        get { throw new NotImplementedException(); }
    }

    public string Name
    {
        get
        {
            return "asd";  // HERE'S YOUR TEXT
        }
        set
        {
            throw new NotImplementedException();
        }
    }

    public object GetService(Type serviceType)
    {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:10:34.427

使用`comboBox1.Items.Add(tc1.ToString());`代替`comboBox1.Items.Add(tcl);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-03T07:37:08.250

这对我有用：

```
comboBox1.FormattingEnabled = false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-01T08:42:14.627

在您的`UserControl`中，添加一个属性，然后调用它`FriendlyName`，例如

```
namespace project
{
   public partial class CustomUserControl : UserControl
   {
      public CustomUserControl()
      {
         InitializeComponent();
      }

      public String FriendlyName { get => "Custom name"; }
   }
} 
```

然后将`DisplayMember`你的属性设置`ComboBox`为**"FriendlyName"**，这样

```
myComboBox.DisplayMember = "FriendlyName"; 
```

对我来说，这是一个非常干净的解决方案，直觉告诉我这是预期的方法。

# bash - Bash：从文件读取时提前终止

> ID：15885800
> 
> 赞同：1
> 
> 时间：2013-04-08T18:01:05.313
> 
> 标签：bash, scripting

我正在尝试运行一个包含一系列命令/脚本以使用参数运行的文件，例如：

```
ls /etc/
cat /etc/hosts/
script.sh some parameters 
... 
```

这似乎工作正常，但在某些情况下，while 循环会过早结束。似乎只有当它正在执行的脚本最后包含 SSH/SCP 时才会出现这种情况。读取文件的代码：

```
while IFS= read -r line
do
    # Cut command and parameters
    IFS=', ' read -a parameters <<< "$line"
    cmd="${parameters[0]}"
    unset parameters[0]
    runScriptAndCheckError "$cmd" "${parameters[@]}"
done < "$SCRIPT_FILENAME" 
```

使用 set -x 时：

```
+ checkError 0 'ERROR: script.sh failed'
+ '[' 0 -ne 0 ']'
+ IFS=
+ read -r line 
```

尽管文件中仍有行，但似乎没有更多输入。如果我注释掉 runScriptAndCheckError "$cmd" "${parameters[@]}" 那么它会打印更多的行。

我不确定这段代码有什么问题。如果有人可以帮忙，我会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:39:03.987

如果`runScriptAndCheckError`还从标准输入读取，它将从`$SCRIPT_FILENAME`. 让循环中的`read`命令`while`使用不同的文件描述符：

```
while IFS= read -r line <&3; do
  ...
done 3< "$SCRIPT_FILENAME" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-18T22:19:17.857

### 窃取输入

正如@chepner 所说，关键是里面的语句：

```
read line; do
   <command>
done 
```

如果他们尝试从标准输入读取，将干扰循环。

如果您不希望脚本从标准输入读取，请按以下方式阻止它：

```
read line; do
   cmd < /dev/null
done 
```

现在您的读取循环将不会丢失任何输入。

# ruby-on-rails-3 - 启动由另一个 Rails 服务器处理的 Resque 作业

> ID：15885804
> 
> 赞同：1
> 
> 时间：2013-04-08T18:01:11.943
> 
> 标签：ruby-on-rails-3, redis, resque

我有一个带有工人（工人应用程序）的 Rails，我希望另一个 Rails 应用程序调用（请求者应用程序）。一种选择是在请求者应用程序可以发布到的工作程序应用程序上创建一个控制器操作。

有没有办法直接将作业添加到 Worker App 的 Redis 服务器？我知道我可以将值推送到 redis 服务器，但我不确定它应该是什么格式，我还没有找到它的文档。这甚至可能吗，还是 Resque 做了一堆我不知道的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:31:31.957

查看 Resque 代码，您可以通过执行以下操作将作业推送到队列中：

`Resque.push('my_queue', 'class' => 'MyQueue', 'args' => [ 123, 'bar'])`

这会将作业推入`my_queue`队列以供`MyQueue`作业执行。

这是一段感兴趣的代码

[https://github.com/resque/resque/blob/master/lib/resque.rb#L142-L159](https://github.com/resque/resque/blob/master/lib/resque.rb#L142-L159)

# python - 使用 Django 1.4，如何在不自动更新修改字段的情况下保存 TimeStampedModel 对象？

> ID：15885808
> 
> 赞同：0
> 
> 时间：2013-04-08T18:01:27.290
> 
> 标签：python, django, django-south

我正在使用 Django 和 South 运行数据迁移。我已经使用 Schemamigration 向我的模型添加了一个新字段，现在我正在为该模型的所有对象填充该字段。

问题是，当我在数据迁移中对我的对象调用 save() 方法时，它会自动更新每个对象上的修改字段，并且所有对象都以相同的修改日期结束。如果可能，我希望能够保留数据迁移之前的修改日期。

目前我的数据迁移如下所示：

```
class Migration(DataMigration):

    def forwards(self, orm):
        for w in orm.Writer.objects.all():
            w.type = 'outside'
            if w.managed_by != None:
                if w.managed_by.writer != None:
                    if w.id == w.managed_by.writer.id:
                        w.type = 'client'
            w.save() 
```

有没有办法只保存类型字段中的值，而不更新修改日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:26:43.427

您可以使用可用于模型查询集的 update() 方法更新对象以仅更改所需的字段（请参阅[https://docs.djangoproject.com/en/1.4/topics/db/queries/#updating-一次多个对象以](https://docs.djangoproject.com/en/1.4/topics/db/queries/#updating-multiple-objects-at-once)获取更多详细信息）。

尽管文档引用了针对多个对象使用此功能，但您可以通过限制您正在使用的对象的 PK 来过滤更新查询以仅针对单个对象：

```
orm.Writer.objects.filter(pk=w.pk).update(type='client') 
```

# mysql - 在 dev/prod 中使用 Mysql，在测试中使用 H2

> ID：15885814
> 
> 赞同：6
> 
> 时间：2013-04-08T18:01:42.937
> 
> 标签：mysql, playframework-2.0

使用 play framework 2.1，我试图找到拥有两种不同数据库配置的最佳方式：

*   一种基于 mysql 运行我的应用程序
*   一个基于 H2 测试我的应用程序

虽然做其中一个很容易，但当我尝试同时做这两个时会遇到以下问题：

1.  我不能拥有相同的数据库演变，因为即使在 mysql 模式下，某些 mysql 特定命令也不能与 H2 一起使用：这意味着两组演变和两个单独的数据库名称
2.  我不确定如何通过另一个保留在测试模式下进行测试来覆盖主 application.conf 文件。我尝试过的（从命令行传递文件名或覆盖键）似乎保留给 prod 模式。

我的问题：任何人都可以推荐一个很好的方法（一直使用mysql，并且只有H2在测试中），而不会使运行应用程序过于复杂吗？谷歌没有帮助我。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:05:45.633

您可能会发现一些有用的技巧。

首先，MySQL 的`/*! */`符号允许您添加 MySQL 将遵循的代码，但其他 DB 将忽略，例如：

```
create table Users (
  id bigint not null auto_increment,
  name varchar(40)
) /*! engine=InnoDB */ 
```

这不是灵丹妙药，但它可以让您了解 MySQL 和 H2 语法之间的一些差异。这是一个 MySQL 主义，所以它对其他数据库没有帮助，但由于大多数其他数据库不像 MySQL 那样古怪，你可能不需要它——我们将我们的数据库从 MySQL 迁移到 PostgreSQL，它没有支持`/*! */`符号，但 PostgreSQL 与 H2 足够相似，我们不需要它。

如果你想为 dev 和 prod 使用不同的配置，你可能最好为 prod 提供额外的配置。这样做的原因是您可能会使用 启动您的开发服务器`play run`，并使用 启动您的产品服务器`play stage; target/start`。`target/start`可以带`-Dconfig.resource`参数。例如，`prod.conf`为 prod 创建一个额外的配置文件，如下所示：

```
include "application.conf"

# Extra config for prod - this will override the dev values in application.conf
db.default.driver=...
db.default.url=...
... 
```

并创建一个`start_prod`如下所示的脚本：

```
#!/bin/sh

# Optional - you might want to do this as part of the build/deploy process instead
#play stage
target/start -Dconfig.resource=prod.conf 
```

理论上，你可以反过来做，并`application.conf`包含 prod conf，并创建一个`dev.conf`文件，但你可能需要一个脚本来启动 prod（你可能最终需要额外的 JVM/memory/GC参数，或将其添加到 rc.d，或其他）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T18:45:11.003

正如您自己写的那样，使用不同的数据库引擎可能是最糟糕的情况：某些功能、保留关键字等方面的差异导致您有时需要编写*非常*特定于所选数据库引擎的自定义语句。最好使用使用同一引擎的两个单独的数据库。

不幸的是，我不知道配置覆盖的问题，所以如果覆盖配置的默认方式失败......覆盖 application.conf 中的 id - 这样你就可以快速评论整个块......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T21:27:56.687

以下是如何在内存数据库中使用测试：

```
public class ApplicationTest extends WithApplication {
    @Before
    public void setup() {
        start(fakeApplication(inMemoryDatabase("default-test"), fakeGlobal()));
    }

    /// skipped ....
} 
```

inMemoryDatabase() 默认使用 H2 驱动。[您可以在源代码](https://github.com/playframework/Play20/blob/master/framework/src/play-test/src/main/scala/play/api/test/Helpers.scala)中找到更多详细信息

# xcode - 两个视图的转换

> ID：15885817
> 
> 赞同：0
> 
> 时间：2013-04-08T18:01:47.507
> 
> 标签：xcode, view, transition

**我想知道如何转换两个视图，然后停止并进入菜单....以及如何以动画方式更改视图，有人可以帮助我吗？谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:25:13.550

[*iOS 视图编程指南*](https://developer.apple.com/library/ios/DOCUMENTATION/WindowsViews/Conceptual/ViewPG_iPhoneOS/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW1)的[动画部分](https://developer.apple.com/library/ios/DOCUMENTATION/WindowsViews/Conceptual/ViewPG_iPhoneOS/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW1)*告诉你所有你需要知道的关于动画视图的知识，并包含大量的示例代码。*

# iphone - 使用一个 UIwebView 显示多个 PDF

> ID：15885825
> 
> 赞同：0
> 
> 时间：2013-04-08T18:02:04.420
> 
> 标签：iphone, xcode, xcode4.6

我希望有一个人可以帮助我。在应用程序的一个视图中，我有一个 UIWebView，我在其中显示 PDF 文件。我需要在同一个 UIWebView 中显示 3 个不同的 PDF（a.pdf、b.pdf、c.pdf）。我知道如何展示一个。

```
 CGRect frame2 = CGRectMake(20, 25, 280, 350);
    testWebView = [[UIWebView alloc] initWithFrame:frame2]; 
    NSString *path = [[NSBundle mainBundle] pathForResource:@"a" ofType:@"doc"];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [apneaWebView loadRequest:request];
    [apneaWebView setScalesPageToFit:YES];
    [self.view addSubview:testWebView]; 
```

但是如果是 3 个不同的 PDf 该怎么办。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:39:46.370

看看那个：[我们可以在 UIWebview 中显示许多 pdf 吗？](https://stackoverflow.com/questions/13847530/can-we-display-many-pdf-in-a-uiwebview)

您只能在 UIWebView 中显示 pdf。您可以尝试为每个 PDF 创建 3 个不同的 UIWebViews 或尝试合并它们。

# xml - 通过 sgrep 过滤新闻提要

> ID：15885838
> 
> 赞同：0
> 
> 时间：2013-04-08T18:02:39.580
> 
> 标签：xml, filter, grep, rss, atom-feed

使用 Liferea 提要阅读器，可以指定使用标准输入/标准输出过滤传入提要数据的脚本，例如通过 shell 脚本。例如

```
sgrep  '("<entry>" .. "</entry>") containing "foo"' 
```

*只输出包含foo*的条目，但也输出 strips`<?xml .. ><feed .. >`和`</feed>`.

有人已经准备好（原子）提要的 sgrep 过滤器了吗？

# wpf - 如何在 WPF-ListBox 中选择组标题？

> ID：15885840
> 
> 赞同：1
> 
> 时间：2013-04-08T18:02:47.973
> 
> 标签：wpf, listbox, grouping

我正在使用列表框对项目进行分组...当我使用键盘在列表框中的项目列表中向下/向上移动时...没有选择任何组的标题。

标题有一个虚线边框...但它没有被选中...所选项目的样式未应用于它...当我按 Enter 键时（当标题有虚线边框时）它选择最后一个选定的项目（这是非标题项目）...

任何帮助，将不胜感激。谢谢。

**编辑：**

如果列表框有以下数据（其中“手”和“腿”作为标题）...如果我使用键盘向下移动..通过项目，当我到达标题时，我可以看到一个虚线边框（手或腿）...但它没有被选中。

**手**
手指
指甲
**腿**
手指
指甲

# java - 跟踪大型应用程序源中的线程初始化

> ID：15885845
> 
> 赞同：1
> 
> 时间：2013-04-08T18:03:00.620
> 
> 标签：java, multithreading, debugging

如果应用程序在其代码的不同位置（包括从引用的 jars 中）启动许多线程（使用`new Thread()`和使用`ExecutorService`），那么识别启动任何特定线程的源代码的最佳方法是什么（如在执行中所见）应用程序实例）

这很有帮助，例如，如果一个线程导致`Exception`- 并且我们需要从初始化线程的源代码开始（以便上下文清晰）。我从 VisualVM 获得的线程转储显示了许多正在运行/等待的线程但堆栈根似乎总是`at java.lang.Thread.run(Thread.java:722)`- 不是很有帮助。`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:11:52.310

您可以使用之前给出的地图方法，但不是一些文本，而是`Exception`在创建线程的位置生成一个新的。将此异常作为映射中的值。如果需要，您可以稍后获取堆栈跟踪。对于`Executor`s，您可以在`ThreadFactory`创建工作线程时将其隐藏。

`Runnable`使用s时，此问题以类似的方式发生。有时，您想知道在`Runnable`从方法开始的任何堆栈跟踪之上创建和排队的位置`run`。

当然，整个*遗留代码*和*引用的 jar*问题是：你想解决一个需要编码但不需要编码的问题。不容易 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:41:16.267

您可以做的是，将[Thread.uncaughtExceptionhandler](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)设置为您启动的每个线程。它有一个方法叫做：

```
uncaughtException(Thread t,Throwable e) 
```

在这里面你可以放一个日志或其他东西，你以后可以用它来识别从哪里调用这个代码。但是当然，对于每个线程，您都必须单独指定为原点。

你可以设置一个全局的`Thread.setDefaultUncaughtExceptionHandler(myHandler);`。但要使其与众不同，可能有一个 ThreadGroup 或其他东西。

尽管如果线程是由引用的 Jar 启动的，那么所有这些都没有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:28:56.487

您是否能够在创建线程的点插入代码？如果是这样，那么在您的主类中创建一个静态 HashMap 以及一个公共静态 put 方法。然后，每当您创建线程 t1 时，调用 Main.putThreadId(t1.getId()，“标识创建线程的方法的一些文本”)，当您捕获异常时，查找 HashMap 中的值。

# android - Adview 解析 XML 未绑定前缀 Android 时出错

> ID：15885847
> 
> 赞同：3
> 
> 时间：2013-04-08T18:03:11.517
> 
> 标签：android, layout, xml-parsing, admob

我在让 AdMob 正常工作时遇到了麻烦。我犯了一个又一个错误，并且不止一次地报废了整个事情。现在我从 XML 中得到一个错误，说它解析不正确。这是它的代码。我已经查看了其他答案，但我似乎无法弄清楚出了什么问题。如果有人可以查看我的布局文件并让我知道我做错了什么，我将*不胜*感激。对于它的价值，我直接使用来自 AdMob 网站的代码，适用于我自己的应用程序。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:id="@+id/AdLinearLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:orientation="vertical" >

<!-- Ad Placeholder -->

<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="a15138b1a7adad2"
    ads:loadAdOnCreate="true"
    ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID" />

<ScrollView
    android:id="@+id/BaseScrollView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/baseVerticalLinearLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/LinearLayoutH1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/Sad" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Happy" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/happinessBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <LinearLayout
            android:id="@+id/LinearLayoutH2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/Tired" />

            <TextView
                android:id="@+id/textView4"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Awake" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/energyBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <LinearLayout
            android:id="@+id/LinearLayoutH3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView5"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/Calm" />

            <TextView
                android:id="@+id/textView6"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Anxious" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/anxietyBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <LinearLayout
            android:id="@+id/LinearLayoutH4"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textView7"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="left"
                android:text="@string/No_Pain" />

            <TextView
                android:id="@+id/textView8"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="right"
                android:text="@string/Max_Pain" />
        </LinearLayout>

        <SeekBar
            android:id="@+id/painBarID"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="@integer/SliderMax"
            android:progress="@integer/SliderDefault" />

        <DatePicker
            android:id="@+id/datePicker1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <TimePicker
            android:id="@+id/timePicker1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <EditText
            android:id="@+id/noteTextFieldID"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:hint="@string/Note_Hint"
            android:inputType="textMultiLine"
            android:maxLength="@integer/NoteLimit" />

        <Button
            android:id="@+id/enterButtonID"
            android:layout_width="132dp"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:onClick="dialogPop"
            android:text="@string/EnterButtonText" />
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-08T18:04:43.087

改变：

```
android:ads="http://schemas.android.com/apk/lib/com.google.ads" 
```

到

```
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
```

AdMob 要求您使用在其包中定义的属性。为了不必每次都输入该 URL，我们使用 声明一个 XML 命名空间`xmlns`，就像我们为 android 所做的那样。您在声明之前使用`android`而不是`xmlns`，这导致了您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T03:13:15.317

将此行添加到您的布局

```
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
```

# xml - 将 xsl 中的属性与周围的其他元素一起排序

> ID：15885848
> 
> 赞同：0
> 
> 时间：2013-04-08T18:03:15.763
> 
> 标签：xml, xslt

被这个问题困扰了几天。

我正在尝试在对嵌套元素的属性进行排序时复制 xml 文件。我有什么我觉得应该工作

```
<xsl:stylesheet version="2.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:my="my:my">
<xsl:output method="xml" indent="yes" /> 
  <xsl:template match="node() | @*">
     <xsl:copy>
        <xsl:apply-templates select="node() | @*"/>
     </xsl:copy>      
</xsl:template>        
  <xsl:template match="PrProduct">
     <xsl:copy>
            <xsl:apply-templates select="node()|@* " >
            <xsl:sort select="@TEC"  order="descending" />
        </xsl:apply-templates>             
     </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

这是xml

```
<body>
<issueobject>
<page>
</page>
<prproduct TEC="TOR">
</prproduct>
<prproduct TEC="UVA">
<partPage>
</partPage>
</issueobject>
</body> 
```

我认为问题在于，在我正在排序的元素的任一侧都有相同级别的元素，因为在玩耍时我可以对数据进行排序，但最终会丢失之前/之后的数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:48:05.227

您的样式表所做的是根据（不存在的）属性的值对元素的*内容进行排序。*您需要的是一个与 , 在您的情况下 的父级匹配的模板，然后*可以*对元素进行排序。像这样的东西：`PrProduct``TEC`*`PrProduct``issueobject``PrProduct`*

 *```
<xsl:template match="issueobject">
    <xsl:copy>
        <xsl:apply-templates select="PrProduct[1]/preceding-sibling::*"/>
        <xsl:apply-templates select="PrProduct">
            <xsl:sort select="@TEC" order="descending"/>
        </xsl:apply-templates>
        <xsl:apply-templates select="PrProduct[1]/following-sibling::*[not(self::PrProduct)]"/>
    </xsl:copy>
</xsl:template> 
```

（请注意，此示例忽略 的文本子级`issueobject`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:00:11.710

您当前的模板正在尝试对**prproduct**元素的子节点进行排序，并找到裸露的橱柜。您可以做的是将模板更改为仅匹配第一个**prproduct**元素，然后对该元素和以下**prproduct**兄弟元素进行排序

```
<xsl:template match="prproduct[1]">
     <xsl:for-each select="self::*|following-sibling::prproduct">
        <xsl:sort select="@TEC" order="descending"/>
        <!-- Copy element -->
     </xsl:for-each>
</xsl:template> 
```

除此之外，您只需要一个模板来阻止其他**prproduct**元素被输出两次

```
<xsl:template match="prproduct"/> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="node() | @*" name="identity">
      <xsl:copy>
         <xsl:apply-templates select="node() | @*"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="prproduct[1]">
       <xsl:for-each select="self::*|following-sibling::prproduct">
         <xsl:sort select="@TEC" order="descending"/>
         <xsl:call-template name="identity"/>
      </xsl:for-each>
   </xsl:template>

   <xsl:template match="prproduct"/>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<body>
   <issueobject>
       <page></page>
       <prproduct TEC="UVA"></prproduct>
       <prproduct TEC="TOR"></prproduct>
       <partPage></partPage>
   </issueobject>
</body> 
```

注意命名模板的使用，以避免身份模板的重复编码。*

# c++ - c++ 中的类 Java Arrays.asList()

> ID：15885858
> 
> 赞同：1
> 
> 时间：2013-04-08T18:03:51.523
> 
> 标签：c++, initializer-list

[c++ 是否支持 STL 或是否存在支持Arrays.asList()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList(T...))的外部库？

典型用法

```
private ArrayList<String> lexeme = new ArrayList<String>(Arrays.asList(" ", ",", "(", ")", ";", "=", ".", "*", "-")); 
```

我正在使用 Visual Studio 11 (2012) 并且他们没有包含 c++11 功能`Initializer lists`，这让我在初始化一个由九个唯一字符串组成的向量时感到困惑

```
std::vector<std::string>::push_back("a");
std::vector<std::string>::push_back("b");
std::vector<std::string>::push_back("c");
                 . . . 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:11:32.863

在 C++11 之前，一个常见的做法是先创建一个数组，然后用它初始化向量，例如：

```
char const * arr[] = { " ", ",", "(", ")", ";", "=", ".", "*", "-" };
std::vector<std::string> str_vec(arr, arr + sizeof(arr) / sizeof(*arr)); 
```

当然，VS11 确实支持一些 C++11，所以你可以这样做，这样可读性会更好一些：

```
char const * arr[] = { " ", ",", "(", ")", ";", "=", ".", "*", "-" };
std::vector<std::string> str_vec(std::begin(arr), std::end(arr)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:11:49.020

你可以使用：

```
const char* arr[] = {"a", "bc", "def"};
std::vector<std::string> vec(std::begin(arr), std::end(arr)); 
```

如果您的编译器不支持`std::begin()`and `std::end()`，它们很容易没有：

```
std::vector<std::string> vec(arr, arr + sizeof(arr) / sizeof(*arr)); 
```

# ruby-on-rails - rake db:load 不起作用

> ID：15885859
> 
> 赞同：1
> 
> 时间：2013-04-08T18:04:01.523
> 
> 标签：ruby-on-rails, database, rake-task

我完全是 Ruby 的菜鸟，我无法执行命令`rake db:load`。对不起，愚蠢的问题，但我需要帮助。同样的错误被抛出`rake db:seed`

```
root@root:/var/www/dir# rake db:load --trace
rake aborted!
Don't know how to build task 'db:load'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.4/lib/rake/task_manager.rb:49:in `[]'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.4/lib/rake/application.rb:142:in `invoke_task'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.4/lib/rake/application.rb:101:in `top_level'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.4/lib/rake/application.rb:101:in `each'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.4/lib/rake/application.rb:101:in `top_level'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.4/lib/rake/application.rb:110:in `run_with_threads'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.4/lib/rake/application.rb:95:in `top_level'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.4/lib/rake/application.rb:73:in `run'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
/usr/lib/ruby/gems/1.8/gems/rake-10.0.4/bin/rake:33
/usr/bin/rake:23:in `load'
/usr/bin/rake:23 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:50:00.190

这个项目有两个问题。首先，它缺少 Javascript 运行时。您可以通过添加解决此问题

```
gem 'execjs'
gem 'therubyracer' 
```

到 GemFile 并重新运行

```
bundle install 
```

第二个问题是没有指定 db:load 任务。查看您要使用的代码

```
bundle exec rake db:schema:load 
```

那应该行得通。

# heroku - 在 Heroku 应用程序中构建 JAR 文件

> ID：15885860
> 
> 赞同：0
> 
> 时间：2013-04-08T18:04:04.877
> 
> 标签：heroku, jar, proguard

我有一个在 Heroku 上运行的 Web 应用程序，当应用程序的用户请求它时，我需要从中构建并提供一个 JAR 文件。我还需要在生成的 JAR 文件上运行 ProGuard。可以在 Heroku 上执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:57:32.387

我们正在努力将 Heroku 构建基础设施公开为服务，您所描述的是我们想要支持的用例。您可能可以通过使用或逆向工程来获得一些工作`heroku-push`：[https ://github.com/ddollar/heroku-push](https://github.com/ddollar/heroku-push)

这是实际构建代码的服务器端位：[https ://github.com/ddollar/anvil](https://github.com/ddollar/anvil)

Ryan Brainard 为 Anvil 构建了一个 Java 包装器：[https ://github.com/ryanbrainard/janvil](https://github.com/ryanbrainard/janvil)

# css - CSS 文本对齐问题

> ID：15885861
> 
> 赞同：0
> 
> 时间：2013-04-08T18:04:12.773
> 
> 标签：css, margin, padding

在 Chrome 和 Safari 中，会出现以下 CSS 问题：

`ul`, `li`and `a`or link 有一个默认的 CSS 属性，可以将所有内容垂直推开。我摆弄了以下属性：

```
font-size
margin-right
padding
color
text-decoration
margin
padding
border
display
list-style
vertical-align
line-height
line-height
font-style
margin
font-variant
padding-top
padding-bottom
margin-top
margin-bottom 
```

似乎没有什么可以阻止这个问题。我已经下载了 Yahoo 的 CSS 重置，但我不确定如何正确使用它。我没有追求那个，因为我不知道它会解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:12:38.157

我看过你的[小提琴](http://jsfiddle.net/SBnKw/)，我有点困惑。你说事情被垂直推开，但我根本没有看到这种情况发生。

我看到的唯一可能符合该描述的内容是您的链接位于不同的行上。

如果这是问题，解决方法很简单：`div`s 是块级元素。这意味着它们默认为 100% 宽度，并且设计为在开始之前换行，之后换行。这是 div 的默认样式的行为，`display: block;`并且内置于其中。

要解决此问题，请应用以下样式：

```
#headernav div{ display: inline; } 
```

然而，这是你的问题中最少的。您复制到小提琴中的代码缺少 div 元素之一的结束标记，这可能会导致旧浏览器中出现不可预测的行为。您有两个具有相同 ID 的 div，这是一个主要的禁忌。

在[您的小提琴的此更新中，](http://jsfiddle.net/SBnKw/1/)我已经修复了您遇到的 HTML 问题。请注意，“tempLink”现在是一个类，并以“.”为目标。在 CSS 中，不是表示 ID 的“#”。

我已将上述 CSS 应用于类 tempLink，而不是 headernav 中的任何 div。

请注意，您的两个链接现在是并排的。您可以使用边距和填充来控制它们之间的水平间距（针对 tempLink 类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:28:06.200

正如 Adrift 提到的，如果您使用 jsFiddle，诊断起来会容易得多。话虽如此，您是否尝试过 display: inline-block 或 float: left？

# javascript - 动态填充 在 jQuery Mobile data-role=listview 中

> ID：15885863
> 
> 赞同：2
> 
> 时间：2013-04-08T18:04:17.213
> 
> 标签：javascript, jquery, html, jquery-mobile

在使用 jQuery Mobile`<ul data-role="listview">`时，我试图`<li>`从 JavaScript 添加一些 s，但新`<li>`的没有继承 jQuery Mobile 样式。这是代码：

```
<head>
  <script>
    function init()
    {
      msg = "<li> <a href=> New List Item </a></li>";
      document.querySelector('#add_item').innerHTML +=  msg;
    }

    // call init on load
    window.addEventListener('load',init,false);
  </script>
</head>

<body>
  <div id='main' data-role='page' data-theme='c'>
    <div data-role='header'>
      <h1>Welcome!</h1>
    </div>
    <div id='content' data-role='content'>
      <ul data-role="listview" id="list_cars">
        <div id="add_item">
        </div>

        <li> <a href=""> List Item 1</a></li>
        <li> <a href=""> List Item 1</a></li>      
      </ul>
    </div>
    <div data-role='footer'>
      <h4>Enjoy reading the book ...</h4>
    </div>
  </div>  <!-- End of Min page -->
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T18:10:39.530

首先，您将您的`<li>`内部放入 a`<div>`而不是直接放入`<ul>`. 尝试将您的 querySelector 更改为...

```
document.querySelector('#list_cars').innerHTML +=  msg; 
```

或者，如果您希望该项目位于列表顶部，请使用此...

```
document.querySelector('#list_cars').innerHTML = msg + document.querySelector('#list_cars').innerHTML; 
```

然后，您需要告诉 jQuery Mobile 通过添加...来更新该列表视图。

```
$('#list_cars').listview('refresh'); 
```

这个[jQuery Mobile 文档页面上关于列表](http://jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html)的最后一节描述了这个特性。

这里的工作示例：http: [//jsbin.com/omepob/1/](http://jsbin.com/omepob/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-23T14:43:10.247

要将属性应用到新对象上，最佳方法是为对象调用 jQuery 的刷新方法：

```
$("#myobject").listview("refresh"); 
```

但是，我鼓励您将这个 innerHTML 调用替换为更符合 DOM 的东西，例如：

```
var myli = document.createElement("li");
myli.appendChild(document.createTextElement("List Item 3")); 
```

顺便说一句，同意特拉维斯；最好包含一个“ul”作为“li”的父级，而不是在那里使用“div”......

# railstutorial.org - 如何在整个应用程序视图中全局使用 user_helper 方法？

> ID：15885865
> 
> 赞同：0
> 
> 时间：2013-04-08T18:04:18.583
> 
> 标签：railstutorial.org, nomethoderror

我完成了 Michael Hartl 的 Rails 教程的[第 8 章](http://ruby.railstutorial.org/chapters/sign-in-sign-out#top)，所以我设置了应用程序来注册用户并登录和注销。

我正在尝试在 application.html.erb 中使用 User Helper 方法（或更具体地说，在 _header.html.erb 部分中）。

我想使用 gravatar_for 方法（在 user_helper.rb 中定义）来显示用户的 gravatar 图片和用户名，而不是在下拉菜单中使用“Account”一词。

```
module UsersHelper

  # Returns the Gravatar for the given user.
  def gravatar_for(user, options = { size: 150})
    gravatar_id = Digest::MD5::hexdigest(user.email.downcase)
    size = options[:size]
    gravatar_url = "http://gravatar.com/avatar/#{gravatar_id}?s=#{size}"
    image_tag(gravatar_url, alt: user.name, class: "gravatar")
  end
end 
```

在 show.html.erb 页面上，我有以下代码

```
<% provide(:title, @user.name ) %>
<div class="row">
 <aside class="span6">
    <section>
        <h1>
          <%= gravatar_for @user %>
          <%= @user.name %>
        </h1>
    </section>
 </aside>
</div> 
```

这会在他们的个人资料页面上显示用户的头像和姓名。所以我试图做的是像这样将这些相同的方法添加到*部分标题*中；

```
<% if signed_in? %>
  <li id="fat-menu" class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
      <span id="small">
        <%= gravatar_for @user %><%= @user.name %><b class="caret"></b>
      </span>
</a>
    <ul class="dropdown-menu">
      <li><%= link_to "Profile", current_user %></li>
      <li><%= link_to "Settings", '#' %></li>
      <li class="divider"></li>
      <li><%= link_to "Sign out", signout_path, method: "delete" %></li>
    </ul>
  </li>
<% else %>
  <li id="cta"><%= link_to "+ Sign up",  signup_path %></li>
  <li><%= link_to "Sign in", signin_path %></li>
<% end %> 
```

并且该代码在*show.html.erb*页面上显示得很好，我假设这是因为它在*Users 控制器*上的*显示操作*。但是，当我尝试单击主页或*用户视图*之外的任何其他页面时，我会收到错误消息

 **```
NoMethodError in Pages#about
undefined method `email' for nil:NilClass 
```

所以我想我的问题是如何使方法的*gravatar*和*@user.name*可用于整个应用程序的**所有视图。**我觉得答案应该相当简单，但我对 Rails 很陌生，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:02:33.913

Put the method in the ApplicationHelper instead of the UserHelper. Here is an example of something similar I did in my own app: [https://github.com/NatashaTheRobot/tinysale/blob/master/app/helpers/application_helper.rb](https://github.com/NatashaTheRobot/tinysale/blob/master/app/helpers/application_helper.rb)**

# reporting - 对带有实时滚动文本的演示软件的建议

> ID：15885872
> 
> 赞同：0
> 
> 时间：2013-04-08T18:04:59.330
> 
> 标签：reporting, presentation

显示实时滚动名称和显示捐赠图表的图表的最佳软件/工具堆栈是什么？这是一个筹款活动，将在大屏幕上显示。捐款将实时收到并输入数据库。我们希望有一个现场演示文稿，在捐赠者姓名输入数据库时​​滚动显示他们的姓名，并有一个更新的图表以显示捐赠总额。理想情况下，我们希望能够通过笔记本电脑运行，而不是依赖云服务，因为活动现场的互联网连接可能不牢固。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:37:30.817

如果你想自己做，并且不介意为许可证付费，DevExpress 似乎有能力做实时图表，如果你不想为许可证付费，那么有很多库可以在任何可以想象的平台上进行实时图表。

# html - 如何水平居中位置的标题：绝对

> ID：15885874
> 
> 赞同：1
> 
> 时间：2013-04-08T18:05:09.013
> 
> 标签：html, css, image, header, positioning

我正在尝试将标题水平和垂直居中放在图像顶部。到目前为止，我已经将垂直居中向下（这是相对和绝对定位的原因）。但是，水平居中现在给我带来了问题：`margin:0 auto;`不起作用，`left:50%;`不起作用，`text-align:center`不起作用。有谁知道如何将标题水平居中放在图像顶部？

*细节：*

*   *我不知道任何元素的高度或宽度，所以我不能使用固定的高度或宽度*
*   *将图像设置为背景不是一种选择，因为图像是内容的一部分*
*   *并非所有标题的长度都相似，因此我必须找到一个动态解决方案（尽管它们都将是一条线，但我会用省略号将它们切断）*

HTML

```
<article>
    <h2>Title</h2>
    <img src="http://bit.ly/gUKbAE" />
</article> 
```

CSS

```
article { 
    position: relative; 
}

h2 {
    line-height: 0;
    position: absolute;
    top: 50%; 
    left: 0;
    margin: 0;
    padding: 0;
} 
```

它在这里：http: [//jsfiddle.net/kmjRu/21/](http://jsfiddle.net/kmjRu/21/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:14:47.767

您可以设置`article`为`display: inline-block`和`width: auto`，然后居中`h2`：http: [//jsfiddle.net/kmjRu/28/](http://jsfiddle.net/kmjRu/28/)

# java - 删除 Android 上的所有照片

> ID：15885876
> 
> 赞同：2
> 
> 时间：2013-04-08T18:05:14.647
> 
> 标签：java, android, photos

我对 Android 比较陌生，无法正常工作。

到目前为止，我有一个应用程序，它有一个大的圆形红色按钮。当用户按下它时，它会执行一个操作（此时它显示“Hello World”）。

相反，我希望它删除 Android 设备上的所有照片。（是的，这是一件很奇怪的事情，我知道）

我的问题：

1.  这可能吗？我在让它工作时遇到了麻烦，并且找不到以前这样做过的应用程序。

2.  我唯一拥有的 Android 设备是 Nexus 7 平板电脑。我希望它可以在 Android 手机和平板电脑上运行。这也是可能的吗，因为我知道它们的目录结构有所不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:55:35.580

是的，您可以删除图像，但我不怀疑您可以一次全部删除。

我建议您查询[Mediastore](http://developer.android.com/reference/android/provider/MediaStore.Images.html)以获取所有图像的 _ID，然后遍历列表并删除它们。这是一些示例代码，但我相信它可以得到更好的优化。此代码与文件系统无关，因此它应该可以在任何地方工作。

获取 Mediastore.Images 上所有项目列表的代码

```
 List<Long> mediaStoreIds = new ArrayList<Long>();

    Cursor c = context.getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, new String[]{BaseColumns._ID}, null, null, null);

    if (c != null) {
        final int id = c.getColumnIndexOrThrow(BaseColumns._ID);

        c.moveToFirst();
        while (!c.isAfterLast()) {
            Long mediaStoreId = c.getLong(id);

            mediaStoreIds.add(mediaStoreId);
            c.moveToNext();
        }
        c.close();
    } 
```

然后删除，你可以在原始循环中执行此操作，也可以在 arraylist 中循环，但这里是删除方法：

```
context.getContentResolver().delete(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, BaseColumns._ID + "=?", new String[]{Long.toString(mediaStoreIds.get(i))}); 
```

# date - date.day() 返回 TypeError: 'int' object is not callable

> ID：15885881
> 
> 赞同：5
> 
> 时间：2013-04-08T18:05:20.137
> 
> 标签：date, datetime, python-2.7, typeerror

我被困住了。看来那一天正在某处被覆盖为 int 。但是哪里？day 在哪里变成 int？

```
from datetime import *

start_date = date(1901, 1, 1)
end_date = date(2000, 12, 31)
sundays_on_1st = 0

def daterange(start_date, end_date):
    for n in range(int ((end_date - start_date).days)):
        yield start_date + timedelta(n)

for single_date in daterange(start_date, end_date):

    # type(single_date) => <type 'datetime.date'>
    # type(date.day()) => TypeError: 'getset_descriptor' object is not callable
    # type(single_date.day()) => TypeError: 'int' object is not callable
    # ಠ_ಠ 

    if single_date.day() == 1 and single_date.weekday() == 6: 
        sundays_on_1st += 1                                     

print sundays_on_1st 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T18:07:23.913

`.day`不是方法，您不需要调用它。只是`.weekday()`一种方法。

```
if single_date.day == 1 and single_date.weekday() == 6: 
    sundays_on_1st += 1 
```

这工作得很好：

```
>>> for single_date in daterange(start_date, end_date):
...     if single_date.day == 1 and single_date.weekday() == 6:
...         sundays_on_1st += 1
... 
>>> print sundays_on_1st
171
>>> type(single_date.day)
<type 'int'> 
```

从[`datetime.date`文档](http://docs.python.org/2/library/datetime.html#datetime.date.day)中：

> 实例属性（只读）：
> 
> `date.year`
> 介于`MINYEAR`和`MAXYEAR`包容之间。
> 
> `date.month`
> 介于 1 和 12 之间。
> 
> `date.day`
> 介于 1 和给定年份的给定月份的天数之间。

它被实现为数据描述符（如 a `property`）以使其只读，因此`TypeError: 'getset_descriptor' object is not callable`您看到了错误。

# r - 如何仅针对 R 中的一组记录更改一列的值

> ID：15885886
> 
> 赞同：-1
> 
> 时间：2013-04-08T18:05:35.077
> 
> 标签：r

有没有一种直接的方法可以根据 Y 列的值将 X 列中的值更改为 NA？

我有一个包含多个雷达数据的大型数据框。我只想将radarID“CLX”（Y列）的X列值（密度）更改为NA。

在 Excel 中，这将是一个简单的选择所有具有radarID =“CLX”的行，并用NA 替换所有密度值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:20:08.150

In R also it is too simple, specially if you give us a reproducible example.

Here I create one :

```
dat <- data.frame( radarID = sample(c("CLX","OTHER"),10,rep=TRUE),
            X = rnorm(10)) 
```

Then using `transform` and `ifelse`, you can do something like this :

```
transform(dat,X=ifelse(radarID=='CLX',NA,X))

  radarID           X
1    OTHER -1.03632461
2    OTHER  0.07634564
3    OTHER -0.33788092
4      CLX          NA
5      CLX          NA
6      CLX          NA
7    OTHER  1.37040083
8    OTHER  0.50905176
9      CLX          NA
10   OTHER -0.16086215 
```

Of course this will work in a copy of your data. You need to assign it assign to dat if you want to have the change.

```
dat <- transform(dat,X=ifelse(radarID=='CLX',NA,X)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:15:44.223

One way to do it is as follows. If `df` is your data frame with two columsn `x` and `y` and you want to change `x` based on `y` such that when `y` is less than `10`, `x` should become `NA`:

```
df[df$y < 10, 'x'] <- NA 
```

You could also check out `?transform` and `?within`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:16:12.310

```
df = data.frame(Density = 1:4, radarID = c("blah", "boo", "CLX", "bam"))
df$Density[df$radarID == "CLX"] = NA 
```

# java - 并发问题和哈希图

> ID：15885891
> 
> 赞同：2
> 
> 时间：2013-04-08T18:06:04.190
> 
> 标签：java, concurrency, hashmap

我开始为我的游戏考虑多线程，最好的起点是将游戏的三个主要组件：逻辑、gfx、sfx 分成 3 个单独的线程。问题是它们都需要访问与`hashmap`逻辑相同的实体，gfx 和 sfx 彼此完全分离。

```
private Map<String, Entity> entities;
private Map<String, GameSound> sounds;
private Map<String, ArrayList<BufferedImage>> images; 
```

相同的 hashmap 被传递给不同的类，并且对象损坏很可能与多个线程一起使用。目前`SoundsEngine`是一个线程（否则音乐在两者之间暂停`Thread.sleep()`，这很好，因为它不会改变，它只是读取。

是否有一种简单的（并且不影响性能）方法来实现线程安全`HashMap`，而无需在我的代码中添加同步（并且可能以这种方式引入更多错误）？我考虑过每 60 帧进行一次浅拷贝，因为这是我游戏中任何东西都会改变的最大速率，并将游戏循环中的拷贝传递给不同的引擎，但这似乎有点“hacky”。

并发问题由工厂中的构造函数显示：

```
public class Factory {

    private Map<String, Entity> entities;
    private Map<String, GameSound> sounds;
    private Map<String, ArrayList<BufferedImage>> images;
    private GameEventListener listener;
    private GameFrame frame;
    private ImageLoader Iloader;
    private SoundLoader Sloader;

    public Factory() {
        this.Iloader = new ImageLoader("imagelist.txt", images);
        this.Sloader = new SoundLoader("soundlist.txt", sounds);
        this.frame = new GameFrame(Color.black);
        this.listener = new GameEventListener();
    }

    public GameEngine createGameEngine() {
        return new GameEngine(entities, images, sounds);
    }

    public SoundEngine createSoundEngine() {
        return new SoundEngine(entities, sounds);
    }

    public GraphicsEngine createGraphicsEngine() {
        return new GraphicsEngine(entities, frame);
    }
} 
```

编辑：单例不是一个选项，在之前的游戏中已经这样做了，我想学习一个更“松散”的设计，我可以独立开发引擎而不会因为我的状态错误而破坏某些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:10:38.493

如果您想获得 Hashmap 的同步版本，那么您可以使用以下[`java.util.Collections`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html)类的内置方法：

```
Map m = Collections.synchronizedMap(new HashMap(...)); 
```

除此之外，对您来说[`java.util.concurrent.ConcurrentHashMap`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)是一个更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:49:35.297

使用 ConcurrentHashMap 更好，因为它不使用同步块。它更加高效和快捷。Collections.synchronizedMap 是一个代理，其中一个同步块将被添加到每个方法调用。

# c++ - C++ 中的 AVL 树再平衡

> ID：15885896
> 
> 赞同：1
> 
> 时间：2013-04-08T18:06:17.830
> 
> 标签：c++, treenode, avl-tree

我正在研究 AVL 树。我想我已经让所有的旋转功能都正常工作了。我有一个 rotateleft、rotateright、rotateleftright 和 rotaterightleft 函数。它们都将一个节点作为参数。我不知道将哪个节点传递给这些参数。你能看看我的 AVL 树再平衡函数，告诉我它是否正确，以及我需要传递给这些函数中的每一个。到目前为止，我有根节点或顶部节点，但我认为我错了。我如何知道我需要传递给这些函数的内容？

这是功能：

```
void BinaryTree::rebalance(Node *N)
{
    int count = 1;
    if((N->getLeft()->getHeight()) > (N->getRight()->getHeight() + 1))
    {
        if(N->getLeft()->getLeft()->getHeight() > N->getLeft()->getRight()->getHeight())
        {
             rotateRight(root);
             recalculate(root, count);

        }

        else
        {
             rotateLeftRight(root);
              recalculate(root, count);
        }
    }
    else if(N->getRight()->getHeight()> N->getLeft()->getHeight() + 1)
    {
        if(N->getRight()->getRight()->getHeight() > N->getRight()->getLeft()->getHeight())
        {
             rotateLeft(root);
              recalculate(root, count);
        }

        else
        {
            rotateRightLeft(root);
             recalculate(root, count);
        }
    }
} 
```

这是我的左右旋转

```
Node* BinaryTree::rotateLeftRight(Node *N)
{
    Node *newNode =  new Node();//declares a new Node
    newNode = N->getLeft();//sets the node

    N->setLeft(rotateLeft(newNode->getLeft());//sets the left subtree
    recalculate(root);//recalculates the height
    root->setHeight(NULL);//sets the height of the root node
    return rotateRight(N);//retuns the tree rotated right
} 
```

这是我向左旋转的功能。：

```
Node* BinaryTree::rotateLeft(Node *N)
{
    Node *newNode =  new Node();//declares a new node
    newNode = N->getRight();//sets the new node to the right child of N
    N->setRight(newNode->getLeft());//sets the right of N equal to new nodes left child
    newNode->setLeft(N);//sets the left child of the new node to N

    return newNode;//retuns the newNode
} 
```

如果我有树 50 20 10 和 15 我将传递给这些函数中的每一个以重新平衡树吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:41:13.963

您的代码中有一些错误是您在另一个问题中提交的错误，即您没有检查代码中的空指针：

*   你不检查是否`N`在`NULL`方法的开头
*   如果左右节点是`NULL`

    ```
    if((N->getLeft()->getHeight()) > (N->getRight()->getHeight() + 1)) 
    ```

关于算法本身，它取决于旋转函数的行为。[维基百科条目](http://en.wikipedia.org/wiki/Avl_tree)中描述的算法解释了嵌套 if （`rotateLeftRight`和方法）中的第二种情况`rotateRightLeft`应该执行 2 次旋转。如果您的旋转功能符合该描述，那么您应该没问题。

的情况`recalculate`已在另一个问题中得到解决，但在这种情况下，您实际上不需要重新计算整个子树的高度，正如您在该问题的评论中正确告诉我的那样。唯一更改的节点是其子节点已更改的节点。您应该在每种特定的旋转方法中执行该计算，因为每种情况都准确地描述了哪些节点得到更新。

# java - delphi加密转换Java代码

> ID：15885898
> 
> 赞同：1
> 
> 时间：2013-04-08T18:06:22.860
> 
> 标签：java, delphi, encryption

如何将 Delphi 编写的特定代码转换为 JAVA？

Delphi 代码是加密代码。

```
function Encrypt(const S: String; Key1, Key2, Key3: WORD): String;
var
  i: Byte;
  FirstResult: String;
begin
  SetLength(FirstResult, Length(S));
  for i:=1 to Length(S) do begin
    FirstResult[i]:=Char(Byte(S[i]) xor (Key1 shr 8));
    Key1          :=(Byte(FirstResult[i])+Key1)*Key2+Key3;
  end;
  Result:=ValueToHex(FirstResult);
end;

function ValueToHex(const S: String): String;
var i: Integer;
begin
  SetLength(Result, Length(S)*2); 
  for i:=0 to Length(S)-1 do begin
    Result[(i*2)+1]:=HexaChar[Integer(S[i+1]) shr 4];
    Result[(i*2)+2]:=HexaChar[Integer(S[i+1]) and $0f];
  end;
end; 
```

所以我试图制作源代码。它在这里

```
int key1=11;        int key2=22;        int key3=33;

String value = "ABCDE";
for(int i=0; i< value.length(); i++){
    byte[] bValue = value.substring(i).getBytes();
    int[] rValue = {0};
    rValue[0] = bValue[0]^(key1>>8);
    key1 = (bValue[0]+key1)*key2+key3;
    System.out.print(ValueToHex(rValue));
} 
```

但结果不同。

键1 = 11，键2 = 22，键3 = 33；

```
value : "ABCDE"
delphi encrypt : 4144DB69BF
java encrypt   : 4144DB0901 
```

不匹配

但

```
value : "ABC"
delphi encrypt : 4144DB
java encrypt   : 4144DB 
```

是一致的

为什么不匹配长？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:28:38.177

有两个明显的错误。

首先，更新`key1`must use`rValue`而不是`bValue`.

其次，Delphi 代码在2 字节无符号整数`key1`的上下文中执行算术运算。`Word`但是 Java 代码在`int`4 字节有符号整数的上下文中执行相同的计算。

要解决这个问题，我相信您只需要使用 4 字节签名执行算术，然后截断`key1`为 2 字节值。像这样：

```
key1 = ((rValue[0]+key1)*key2+key3) & 0xffff; 
```

我还认为您可以大大简化 Java 代码。我对 Java 几乎一无所知，所以我确信一个熟练的 Java 专家可以做得比这更好：

```
class SO15885898 {

    private static String ValueToHex(int myInt)
    {
        StringBuilder sb = new StringBuilder();
        sb.append(Integer.toHexString(myInt & 0xff));
        if (sb.length() < 2) {
            sb.insert(0, '0'); // pad with leading zero if needed
        }
        return sb.toString();
    }

    public static void main(String[] args)
    {
        int key1=11;        
        int key2=22;        
        int key3=33;

        String value = "ABCDE";
        for(int i=0; i<value.length(); i++){
            byte bValue = value.substring(i).getBytes()[0];
            int rValue = bValue^(key1>>8);
            key1 = ((rValue+key1)*key2+key3) & 0xffff;
            System.out.print(ValueToHex(rValue));
        }
    }
} 
```

输出：

```
4144db69bf

```

* * *

在更一般的说明中，由于您有两个代码，您应该安排两个代码在组织上尽可能接近。然后打印出尽可能多的诊断信息，以查明首次出现差异的计算步骤。

# javascript - 在 2 种情况下将 GUID 添加到 URL

> ID：15885899
> 
> 赞同：0
> 
> 时间：2013-04-08T18:06:23.220
> 
> 标签：javascript, query-string, guid

我已经成功地能够使用 Javascript 将 GUID 添加到 URL。这是我目前正在使用的代码：

```
 <script>  
  if ((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) ||(navigator.userAgent.match(/iPad/i))) {
       function S4() { 
           return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);  
       }
    // then to call it, plus stitch in '4' in the third group
       guid = (S4() + S4() + "-" + S4() + "-4" + S4().substr(0, 3) + "-" + S4() + "-" + S4() + S4() + S4()).toLowerCase();
    //alert(guid);
      var lc = window.location;
       if (!(/\?guid=/.test(lc))) { 
          window.location = window.location + '?guid=' + guid 
      }
    }//End if iPhone
</script> 
```

**问题：**

现在我想测试 URL 以查看它是否在 URL 中已经有一个查询字符串，如果有，则将 GUID 附加到查询字符串 URL 的末尾。我怎么做？

假设我有类似的查询字符串 URL 是这样的：http://mysite.com/mypage?query=http: [//mysite.com/myotherpage](http://mysite.com/mypage?query=http://mysite.com/myotherpage)

我想将 GUID 添加到查询 URL 的末尾，如下所示：

[http://mysite.com/mypage?query=http://mysite.com/myotherpage&guid=123456789153456](http://mysite.com/mypage?query=http://mysite.com/myotherpage&guid=123456789153456)

**注意：**您可能会问我为什么要检测 iPhone/iPod/iPad 并向 URL 添加 GUID。这是因为 iOS 6.0+ 中的一个记录在案的疯狂错误/功能与 Mobile Safari 相结合，仍未通过“超级缓存”POST 调用修复。因此，添加 GUID 会迫使优秀的 ol' iToys 强制进行新的页面查找。讨厌破解这个，但我们尝试了 Pragma=no-cache、Expires=0 和 Cache-Control=no-cache，发现问题仍然存在。所以是的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:46:37.303

你可能需要这个逻辑：

```
var current = window.location.search;
var addon = "";
if (current.charAt(0) !== "?") {    // Querystring Doesn't start with "?"
    addon += "?";
} else {    // Querystring does start with "?" (and maybe more)
    addon += current;
}
if (current.indexOf("guid=") < 0) {    // Querystring Doesn't contain "guid="
    if (current.length > 1) {    // Querystring Contains more than "?_"
        addon += "&";
    }
    addon += "guid=" + guid;
    window.location.href = window.location.protocol + "//" + window.location.host + window.location.pathname + addon;
} 
```

所以它将检查查询字符串是否以“？”开头。如果没有，它会添加它。

如果查询字符串中有超过 1 个字符（意味着它不仅仅是“？”......类似于“？a”），那么它会添加一个“&”。

最后，它还添加了“guid=23482934”（任何值）。

所以场景是：

*   "" - 应该变成`?guid=12355235`
*   “？” - 应该成为`?guid=12355235`
*   "?asdf=fdsa" - 应该变成`?asdf=fdsa&guid=12355235`

# java - 将视频或动画添加到 netbeans 中的 jframe

> ID：15885908
> 
> 赞同：1
> 
> 时间：2013-04-08T18:07:03.203
> 
> 标签：java, swing, video, netbeans, background

我正在尝试在 java netbeans 中创建一个应用程序，我想添加一个视频或动画，这将是我的 Jframe 的背景。请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:57:18.160

你考虑过[JMF](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html)吗？这是使用 Java SE 播放媒体的标准方式。

# xcode - Corona SDK：通过 Setreferencepoint 将文本对齐到中心？

> ID：15885917
> 
> 赞同：1
> 
> 时间：2013-04-08T18:07:24.613
> 
> 标签：xcode, lua, coronasdk

使用 Corona SDK 构建 iOS 应用程序，我想将文本对齐到中心，我阅读了一些可以通过“setReferencePoint”完成的讨论，我试图做到，但失败了，任何人都可以给我看一个例子吗？

这是我的代码：

```
message = display.newText("TEXT HERE!! TEXT HERE!! TEXT HERE!! TEXT HERE!! TEXT HERE!!",  140, 120, 240, 400, native.systemFontBold, 18 )

message:setReferencePoint(display.CenterReferencePoint)
message.x = 200
message:setTextColor(0, 126, 255)

g:insert(message) 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:04:46.223

在 Corona SDK 中，默认情况下参考点是 display.CenterReferencePoint，除非您提供 X、Y 值作为参数。

在你的情况下 - 我认为你应该使用 -

message.x = X ---- X = 对象中心 message.y = Y ---- Y = 对象中心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T08:45:17.320

你必须像这样使用

```
skorX = cx - 10
nilaiSkorr = nilaiSkor + 0
if nilaiSkorr >= 10 then
    skorX = cx - 20
elseif nilaiSkorr >= 100 then
    skorX = cx - 30
end

local t = display.newText(nilaiSkor, skorX, cy + 3, native.systemFontBold, 30 )
t:setReferencePoint(display.CenterReferencePoint) 
```

# c++ - 依赖于模板参数的成员变量和构造函数

> ID：15885923
> 
> 赞同：5
> 
> 时间：2013-04-08T18:07:41.430
> 
> 标签：c++, templates, c++11, constructor, member

在 C++11 中，我希望只有在选择了默认模板值的情况下才在类中有一个成员变量和一个用于初始化的构造函数（当然，仅适用于 int 等受支持的类型）。

有什么推荐的方法来实现这一点（允许提升）？

就像是：

```
template< int _x = -1 > struct C {
    C() {} // only available if _x != -1
    C( int x ) : x( x ) {} // only available if _x == -1
    // more methods that are common for all _x and refer to _x / x
    private:
    int x; // only available if _x == -1
    // more members that are common for all _x
}; 
```

或者，换一种说法：对于大小和速度优化，如果选择了模板默认值以外的其他值，我想使用编译时间常数而不是存储在成员变量中的值。

--

这是一个使一切更清晰的示例：

```
template< int _size = -1 > struct Block {
    Block() { buf = mmap( _size, ... ); } // exists only when size!=-1
    Block( int s ) { buf = mmap( size = s, ... ); } // exists only when size==-1
    ~Block() { munmap( buf, getSize() ); } // should use the correct size
    int getSize() const { return ???; } // gets _size if !=-1, size otherwise
    // other methods that use buf and getSize()
    private:
    void *buf;
    const int size; // only exists for size == -1!
}; 
```

这部分解决了它：

```
template< int _x > struct X {
    int getX() const { return _x; }
};
template<> struct X< -1 > {
    X( x ) : x( x ) {}
    int getX() const { return _x; }
    private:
    int x;
};

template< int _x = -1 > struct C : X< _x > {
    C() {} // only available if _x != -1
    C( int x ) : X< _x >( x ) {} // only available if _x == -1
    // more methods that are common for all _x and use this->getX()
}; 
```

但是 的构造函数`C`呢，还有其他/更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T19:15:48.057

只是一个想法，但也许有帮助：您可以尝试仅将基类用于最小的差异，并在成员变量不存在时“伪造”成员变量以允许其余部分编译：

```
template< int _x > class B
{
public:
  B() {}
protected:
  static const int x = _x;
};

template<> class B< -1 >
{
public:
  B( int i ) : x( i ) {}
protected:
  int x;
};

template< int _x = -1 >
class C : public B<_x>
{
public:
  using B<_x>::B; // inherit B's ctors

  void f()
  {
    if ( x == ... ) // uses either the member variable x or the static const int x!
  }
}; 
```

但正如我所说，这只是一个想法......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T18:09:25.373

专业化是要走的路：

```
template <int N> struct C
{
    C(int n) : n_(n) { }
    int n;
};

template <> struct C<-1>
{
    C() { }
    C(int n) : n_(n) { }
    int n;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T07:24:04.333

我和Kerrek SB 在这个问题上。将您的公共代码，即运行时缓冲区处理放在一个公共基类中，并创建两个派生类，一个用于静态大小的缓冲区类，一个用于动态缓冲区类。或者更好的是，根据[通用编码指南](http://www.artima.com/cppsource/codestandards3.html)，使用组合。

```
 class buffer_impl {
    public:
        buffer_impl(int size) : data_ {mmap( size, ... )}, size_ {size} {}
        ~buffer_impl() { munmap( data_, getSize() ); }
        int getSize() const noexcept { return size_; }

        // other buffer routines
        // ...
    private:
        void* data_;
        int size_;
    };

    template <int _size = -1 >
    class buffer {  // static size
    public:
        buffer() : impl_ {_size} {}
        static constexpr int getSize() noexcept { return _size; }
    private:
        buffer_impl impl_;
    };

    template <>
    class buffer<-1> {  // dynamic size
    public:
        buffer(int size) : impl_ {size} {}
        int getSize() const noexcept { return impl_.getSize(); }
    private:
        buffer_impl impl_;
    }; 
```

# java - 单击后如何禁用 ListView 项目？

> ID：15885928
> 
> 赞同：3
> 
> 时间：2013-04-08T18:08:08.453
> 
> 标签：java, android, listview, android-listview, android-arrayadapter

我有一个简单的数组`Strings`，我`ListView`用`ArrayAdapter`. **我要做的是：**当用户从 中选择一个项目时`ListView`，使该项目不可点击并更改该项目的背景颜色。也许就像一个“灰色”的外观。我正在考虑创建一个自定义`Adapter`并覆盖该`isEnabled(int position)`方法，但我不知道该怎么做。任何建议、建议或帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T18:22:36.220

> 我正在考虑创建一个自定义适配器并覆盖该`isEnabled(int position)`方法，但我不知道该怎么做。

这很容易做到。我建议使用 SparseBooleanArray 来跟踪启用的项目以提高效率：

```
public class MyAdapter extends ArrayAdapter<String> {
    private SparseBooleanArray enabledItems = new SparseBooleanArray(); 

    public MyAdapter(Context context, int textViewResourceId, List<String> objects) {
        super(context, textViewResourceId, objects);
    }

    @Override
    public boolean areAllItemsEnabled() {
        return false;
    }

    @Override
    public boolean isEnabled(int position) {
        return enabledItems.get(position, true);
    }

    public void toggleItem(int position) {
        boolean state = enabledItems.get(position, true);
        enabledItems.put(position, !state);
    }
} 
```

Eclipse 的 AutoComplete 特性完成了这项工作，但这里有一些简短的说明：

*   您必须`areAllItemsEnabled()`与`isEnabled()`
*   我设计`toggle()`为`onItemClickListener()`您只需要调用`adapter.toggle(position)`
*   如果您想更改行的外观（比默认情况下启用和禁用所做的更多）只需覆盖`getView()`. 不要忘记涵盖这两种情况：

    ```
    public View getView(int position, View convertView, ViewGroup parent) {
        convertView = super.getView(position, convertView, parent);

        if(!isEnabled(position)) { 
            /* change to disabled appearance */ 
        } 
        else { 
            /* restore default appearance */ 
        }
        return convertView;
    } 
    ```

    希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T18:24:17.370

单击列表项时将位置传递给适配器类

```
 @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id)
    {
        adapter.setSelectedIndex(position);
    } 
```

将 setSelectedIndex 方法添加到适配器类

```
 public void setSelectedIndex(int ind)
    {
        selectedIndex = ind;
        notifyDataSetChanged();
    } 
```

现在检查这个列表视图的位置，如果相同，然后在 getView me 方法中启用和禁用值

```
 if(selectedIndex!= -1 && position == selectedIndex)
        {
            holder.tv.setBackgroundColor(Color.BLACK);
        }
        else
        {
            holder.tv.setBackgroundColor(selectedColor);
        }
        holder.tv.setText("" + (position + 1) + " " + testList.get(position).getTestText()); 
```

[从这里参考](https://stackoverflow.com/a/9281155/1339473)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:13:54.657

使用`setEnabled(bool)`属性：

```
yourlistview.setEnabled(false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T18:27:09.477

不确定它是否会起作用

```
 public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
                // your code
                view.setBackgroundColor(Color.BLUE);
                view.setEnabled(false);
    } 
```

# c++ - 自动缩进预处理器语句

> ID：15885930
> 
> 赞同：2
> 
> 时间：2013-04-08T18:08:12.617
> 
> 标签：c++, indentation, code-formatting

每个人都使用什么来缩进 C++ 预处理器指令？Astyle 和 Gnu-Ident 似乎无法做到这一点！

我认为 James McNellis 在这个线程上的回答（[你如何缩进预处理器语句？](https://stackoverflow.com/questions/2975330/how-do-you-indent-preprocessor-statements)）非常有趣。我已经采用这种风格有一段时间了，如果能够在现有代码上做到这一点，那就太好了。

我刚刚负责维护一系列嵌套的#IFDEFS/#ELSEIF/#ELSE 类，每个函数大约有 800 到 1000 行（使得可读性和折叠块非常困难）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:30:49.857

1.  egrep -r '^ *#' srcdir | perl -ne 'print "$1\n" if /^\s* #\s*([^\s]+)/' | 排序 -u
2.  根据代码中存在的预处理器关键字，上面的命令将打印实现一个简单的递归缩进算法，类似于检查对称括号的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T17:14:47.130

我们的 C 和 C++ 漂亮打印机将放置良好的条件句视为程序结构的一部分，并相应地缩进它们（及其内容）。这些漂亮的打印机包括完整、精确的 C 和 C++ 解析器；他们在重新格式化时不会破坏你的代码。

SO讨厌站外链接；检查我的生物。

# asp.net - Gridview数据不刷新

> ID：15885932
> 
> 赞同：0
> 
> 时间：2013-04-08T18:08:17.053
> 
> 标签：asp.net, vb.net, gridview

我有一个 gridview，它有一个 List (Of MyObject) 作为它的数据源。

```
gv.DataSource = MyListObject
gv.Databind() 
```

在模板字段下，我有一个按钮配置为从 MyListObject 中删除一条记录，然后重新绑定它。要添加记录，我有以下代码

```
Protected Sub btnAddRecord_Click(sender As Object, e As EventArgs) Handles btnAddRecord.Click
    Dim Customer As New Customer

    With Customer
        .Name = txtName.Text
        .Surname = txtSurname.Text
        .....
        .ID += MyListObject.Count
    End With

    MyListObject.Add(Customer)

    gv.DataSource = MyListObject 
    gv.DataBind()
End Sub 
```

这很好用，但是如果需要，我需要允许用户删除记录：

```
Private Sub gv_RowCommand(sender As Object, e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles gv.RowCommand
    If e.CommandName = "Delete" Then
        MyListObject.RemoveAt(e.CommandArgument)

        gv.DataSource = Nothing
        gv.DataBind()

        gv.DataSource = MyObjectList
        gv.DataBind()

        upnl.UpdateMode = UpdatePanelUpdateMode.Conditional
        upnl.Update()
    End If
End Sub 
```

当我单击按钮时，它会删除记录但不会刷新数据。我的意思是当添加记录时，我将 ID 分配为行 ID，然后使用该 ID 删除记录。由于 List 和 Gridview 值现在不同步，我将数据源设置为空并重新绑定它，以便我将重置值并且 ID 将是正确的 - 但这并不像我预期的那样工作。

谁能告诉我哪里出错以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:13:30.767

是`gridview`在`updatepanel`？如果是，则该面板也应刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:17:59.997

我添加了 CommandArgument='<%# Container.DataItemIndex %>' 这解决了问题，因为我随后删除了用户单击的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:59:09.670

顺便说一句，我可能会在客户端使用 ajax 脚本管理器而不是在后面的代码中处理更新的内容。省去头痛。上面可能会正确更新更新面板，但客户端可能不存在 ajax 管道。

# python - Python字典，计算元素值

> ID：15885937
> 
> 赞同：1
> 
> 时间：2013-04-08T18:08:43.930
> 
> 标签：python, dictionary

我有以下 python 字典

```
resultDict: 
{'1234':{'alertStatus': 'open', 'reasonDescription': None}, 
'4321': {'alertStatus': 'closed', 'reasonDescription': 'Public'},
'6789': {'alertStatus': 'open', 'reasonDescription': 'None'}} 
```

我想计算打开和关闭警报的数量（实际上我有 5 种不同的状态，但对于这个示例，我已将其减少到 2）

我已经编写了以下代码，但它看起来很不整洁。我想知道是否有更好的方法来做到这一点

```
result = {}
result['length'] = len(resultDict)
lenOpen = 0
lenClosed = 0

for notifications in resultDict.values():
    if notifications['alertStatus'] == 'open':
        lenOpen = lenOpen + 1
    if notifications['alertStatus'] == 'closed':
        lenClosed  = lenClosed + 1

statusCount = []
if lenOpen > 0:
    statusCount.append(str(lenOpen) + ' ' + 'open')
if lenOpenUnderInvestigation > 0:
    statusCount.append(str(lenClosed) + ' ' +'closed')

result['statusCount'] = statusCount 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:10:47.597

您可以使用`collections.Counter`：

```
In [2]: dic={'1234':{'alertStatus': 'open', 'reasonDescription': None}, 
   ...: '4321': {'alertStatus': 'closed', 'reasonDescription': 'Public'},
   ...: '6789': {'alertStatus': 'open', 'reasonDescription': 'None'}}

In [3]: from collections import Counter

In [4]: Counter(v['alertStatus'] for k,v in dic.items())

Out[4]: Counter({'open': 2, 'closed': 1}) 
```

**帮助（计数器）**：

> 用于计算可散列项的字典子类。有时称为包或多组。元素存储为字典键，它们的计数存储为字典值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:11:13.973

这样的事情怎么样？

```
alertStatuses = [x['alertStatus'] for x in resultDict.values()] 
```

[然后，您可以使用Counter 对象](http://docs.python.org/2/library/collections.html#collections.Counter)从那里计算元素。

# sql-server - 将数据库缩减为连接在一起的表中的数据子集

> ID：15885940
> 
> 赞同：0
> 
> 时间：2013-04-08T18:08:51.517
> 
> 标签：sql-server, sql-server-2008, tsql, sql-delete

我想获取基于 SQL Server 数据库的数据子集，这样我就可以为应用程序运行一些冒烟测试。我的典型工作流程如下，但删除查询需要一个多小时，因为 X、Y 和 Z 中有数亿行。我怎样才能让它更快？为了清楚起见，请在您的答案中使用 T-SQL 代码。

*   通过为每个表运行以下命令来备份每个表：

    ```
    SELECT * INTO BACKUP_SRC_PATIENT FROM [SRC_PATIENT] -- has PK patient_id
    SELECT * INTO BACKUP_SRC_X FROM [SRC_X] -- has FK patient_id
    SELECT * INTO BACKUP_SRC_Y FROM [SRC_Y] -- has FK patient_id
    SELECT * INTO BACKUP_SRC_Z FROM [SRC_Z] -- has FK patient_id 
    ```

*   删除除 100 名患者外的所有患者

    ```
    DELETE FROM [SRC_PATIENT] 
    WHERE [PATIENT_ID_NONNUM] NOT IN 
          (SELECT top 100 [PATIENT_ID] FROM [SRC_PATIENT]
           WHERE BLA = 'BLA') 
    ```

*   从 SRC_X、SRC_Y 和 SRC_Z 中删除数据，其中患者 ID 不在 SRC_PATIENT 中

    ```
    DELETE FROM [SRC_X] 
    WHERE [PATIENT_ID] NOT IN 
          (SELECT [PATIENT_ID] FROM [SRC_PATIENT])

    DELETE FROM [SRC_Y] 
    WHERE [PATIENT_ID] NOT IN 
          (SELECT [PATIENT_ID] FROM [SRC_PATIENT])

    DELETE FROM [SRC_Z] 
    WHERE [PATIENT_ID] NOT IN 
          (SELECT [PATIENT_ID] FROM [SRC_PATIENT]) 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:14:45.513

而不是删除除 100 之外的所有行 - 截断表并从备份中复制超过 100 行。

[TRUNCATE](http://msdn.microsoft.com/en-us/library/ms177570.aspx)剪辑表中的所有数据，而不必逐行（或逐页删除，视情况而定）：

```
TRUNCATE TABLE [SRC_PATIENT]
TRUNCATE TABLE [SRC_X]
TRUNCATE TABLE [SRC_Y]
TRUNCATE TABLE [SRC_Z]

INSERT INTO [SRC_PATIENT]
SELECT TOP 100 * FROM [BACKUP_SRC_PATIENT]
WHERE BLA = 'BLA' 

INSERT INTO [SRC_X]
SELECT * FROM [BACKUP_SRC_X]
WHERE [PATIENT_ID] IN (SELECT [PATIENT_ID] FROM [SRC_PATIENT])

INSERT INTO [SRC_Y]
SELECT * FROM [BACKUP_SRC_Y]
WHERE [PATIENT_ID] IN (SELECT [PATIENT_ID] FROM [SRC_PATIENT])

INSERT INTO [SRC_Z]
SELECT * FROM [BACKUP_SRC_Z]
WHERE [PATIENT_ID] IN (SELECT [PATIENT_ID] FROM [SRC_PATIENT]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:16:18.967

使用模式开关，然后将您想要的行拉到非备份表中

您将需要创建一个具有相同元数据的表，但切换几乎是立即发生的。

```
CREATE TABLE dbo.Backup-Table1
(Col1 int
Col2 int)

ALTER TABLE dbo.Table1
SWITCH TO dbo.Backup-Table1

INSERT INTO dbo.Table1
SELECT TOP 100 *
FROM dbo.Backup-Table1
WHERE Condition = Met 
```

# php - Magento 原始图像调整大小仅显示占位符图像

> ID：15885942
> 
> 赞同：3
> 
> 时间：2013-04-08T18:08:56.533
> 
> 标签：php, magento

我正试图让这段代码在 magento 1.7.0 中工作......

它只显示magento占位符图像...

如果我将“image”更改为“small_image”，它可以正常工作

一切都在后端设置，为产品图像选择单选按钮......我也清除了缓存......

这发生在 list.phtml 文件中......

有人可以告诉我我做错了什么或为什么它不工作......我一直在搜索，经过 3 天的搜索，我找到了一个解决方案，但它没有工作......

$_item 未定义，因此 ai 调用非对象错误...

这是答案的链接

[在 Magento 中获取基本产品图像](https://stackoverflow.com/questions/11995206/get-base-product-image-in-magento)

```
<?php echo $this->helper('catalog/image')->init($_product, 'image')->resize(171, 259); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T20:04:31.083

我会尝试...

a）添加`addAttributeToSelect('image')`到您的列表块中的产品集合（假设它是本地的）。

...或...（警告：这是 hacky 而不是最佳实践）

b) 在您的 list.phtml 文件中，从您已有的产品 ID 加载完整的产品

```
$productId = $_product->getId();
$_product = Mage::getModel('catalog/product')->load($productId);
echo $this->helper('catalog/image')->init($_product, 'image')->resize(171, 259); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-22T09:11:48.623

有一些我在论坛中没有找到的东西。所以我分享我关于这个问题的解决方案，你必须改变
`Mage::setIsDeveloperMode(true);`：`Mage::setIsDeveloperMode(false);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-30T08:24:41.110

由于这个帖子首先出现在谷歌中，所以我把我的经验放在这里。上述解决方案不适用于 view.phtml/media.phtml 模板。那里的属性已经被加载。在我的情况下，它不起作用，因为服务器的内存限制不足以用于图像调整大小的过程。它确实适用于默认媒体模板 (resize(56))，因为它使用已经生成的默认尺寸。我在 index.php 中添加了 `ini_set('memory_limit', '1024M')' 来修复它。

我没有马上想到它，因为我的 php.ini 已经设置为 1024M。Magento 在 .htaccess (php value memory_limit -1) 中覆盖它，这对我的配置不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-24T03:40:31.567

在我阅读了@Meyer 所说的内容后，我把它修好了。确保将**开发人员模式**设置为**false** ， 这可以从根**.htaccess 文件**中通过将其设置为文件末尾来完成：

`SetEnv MAGE_IS_DEVELOPER_MODE "true"`

这将做的是设置：

`Mage::setIsDeveloperMode(true);`在`Mage::setIsDeveloperMode(false);`index.php 文件中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-06T12:59:52.777

检查集合是否加载了图像属性：

```
$productId = 1234;
$product = Mage::getModel('catalog/product')
    ->load($productId);
echo (string)Mage::helper('catalog/image')->init($product, 'image')->resize(75, 75);
echo (string)Mage::helper('catalog/image')->init($product, 'small_image')->resize(75, 75);
echo (string)Mage::helper('catalog/image')->init($product, 'thumbnail')->resize(75, 75); 
```

如果这仅给您某种占位符，则该集合不会加载图像。

您可以像这样扩展您的收藏

```
$collection = Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('small_image') //or
        ->addAttributeToSelect('thumbnail')  //or
        ->addAttributeToSelect('image'); 
```

或使用媒体配置代替：

```
$prodImage = Mage::getModel('catalog/product_media_config')->getMediaUrl($product->getThumbnail()); 
```

或使用

```
$prodImage = Mage::getResourceSingleton('catalog/product')->getAttributeRawValue($productId, 'image', Mage::app()->getStore()); 
```

**平桌**

这可能是由平板电脑引起的。检查您是否启用了平面表：

> 系统 > 配置 > 目录 > 目录 > 前端 > 使用平面目录产品

如果是，请检查平面表是否包含图像属性：

```
describe catalog_product_flat_1; // number varies depending on store 
```

如果图像属性不是平面表的一部分，只需将以下代码添加到 app/etc/config.xml 即可将其添加到表中

```
<config>
    <frontend>
        <product>
            <collection>
                <attributes>
                    <image />
               </attributes>
            </collection>
        </product>
    </frontend>
</config> 
```

# css - 定位问题

> ID：15885944
> 
> 赞同：1
> 
> 时间：2013-04-08T18:08:57.917
> 
> 标签：css, twitter-bootstrap, positioning, 960.gs

我正在从 960 网格迁移到 Twitter Bootstrap，这确实令人头疼。知道我正在操作基础结构（Base.html，使用 Django），但输出根本不是我想要的。我怎样才能完成我想要的？

**这是html：**

```
<div id="container">
    <header id='header'>
        <!--Header content-->
    </header>
    <div id='main_container' class='row-fluid'>
        <div id="main" role="main" class="span12">
            <div id='main_content' class="span9">
                <!--Main content-->
            </div>
            <div id='side_bar' class="span3">
                <!--Sidebar container-->
            </div>
        </div>
    </div>
</div> 
```

**输出：**

```
 __________________________________
|                                  |
|             header               |
|__________________________________|
|                      |           |
|     main             |   side    |
|     content          |   bar     |
|                      |           |
|                      |           |
|                      |           |
|    <-------- main div ------->   |
|                      |           |
___________________________________ 
```

**期望的输出：**

```
 __________________________________
|                                  |
|             header               |
|__________________________________|
|#####|               |      |#####|
|#####|   main        | side |#####|
| body|   content     | bar  | body|
| BG  |               |      | BG  |
|#####|               |      |#####|
|#####|               |      |#####|
|#####|   <--- main div ---> |#####|
|#####|               |      |#####|
___________________________________ 
```

**笔记：**

我已经尝试更改`span12`为. 然后它就可以工作了，除了它的内容的所有内容都左对齐）。然而，这不是正确的做法，因为这意味着main 中的 s一起将是( + )，即使 main是.`<div id="main" role="main" class="span12">``span9``main div``div``div``12``span9``span3``div``9`

**注意 2：** “#####”是 body 的背景图片，这意味着主 div 应该居中并水平填充约 60% 的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:15:13.507

After sum of sibling divs with `.span` classes get result 12 (i.e. 12 = span9 + span3) you must set new div with `.row-fluid` class and then put other divs with `.span` classes inside of it. See [Twitter Bootstrap docs](http://twitter.github.io/bootstrap/scaffolding.html#fluidGridSystem) (fluid nesting).

```
<div id='main_container' class='row-fluid'>
    <div id="main" role="main" class="span12">
        <div class="row-fluid">
           <div id='main_content' class="span9">
               <!--Main Container-->
           </div>
           <div id='side_bar' class="span3">
               <!--Sidebar Container-->
           </div>
        </div>
    </div>
</div> 
```

EDIT: If you need to set offset to get desired result, try this

```
<div id='main_container' class='row-fluid'>
    <div id="main" role="main" class="span12">
        <div class="row-fluid">
           <div class="span2">
               <!-- empty -->
           </div>
           <div id='main_content' class="span6">
               <!--Main Container-->
           </div>
           <div id='side_bar' class="span2">
               <!--Sidebar Container-->
           </div>
           <div class="span2">
               <!-- empty -->
           </div>
        </div>
    </div>
</div> 
```

[http://jsfiddle.net/DSNnT/](http://jsfiddle.net/DSNnT/)

Or you can use `offset` classes.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:41:20.200

我想你想把#main_container 'row-fluid' 放在这样的'容器'中：

```
<div class="container">
  <div id='main_container' class='row-fluid'>
    <div id="main" role="main" class="span12">
        <div class="row-fluid">
           <div id='main_content' class="span9">
               // main container
           </div>
           <div id='side_bar' class="span3">
               // sidebar container
           </div>
        </div>
    </div>
  </div>
</div> 
```

此外，您的“所需输出”显示了一个标题 - 是浏览器还是您想要顶部的 100% 小部件栏？如果是这样，您可以像这样在顶部放置一个导航：

```
<div class="container-fluid">
<div class="navbar navbar-static-top">
  <div class="navbar-inner">
    <ul class="nav">
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
    </ul>
  </div>
</div>
</div>
<div class="container">
  <div id='main_container' class='row-fluid'>
    <div id="main" role="main" class="span12">
        <div class="row-fluid">
           <div id='main_content' class="span9">
               // main container
           </div>
           <div id='side_bar' class="span3">
               // sidebar container
           </div>
        </div>
    </div>
</div>
</div> 
```

# c# - 3 输入 5 输出。在现有数据上创建新列

> ID：15885945
> 
> 赞同：-1
> 
> 时间：2013-04-08T18:09:00.743
> 
> 标签：c#, database, sql-server-2008, datagridview

我有输入：bruto, a/p %, t/a%:

例子：

*   布鲁托 | a/p% | 吨/年% |
*   100 | 50 | 25 |

我想要的输出：

*   布鲁托 | a/p% | 内托 | 吨/年% | 总计|
*   100 | 50 | 公式：100/100*a/p%=50 | 25 | 公式：50/100*t/a%=12,5 |

我的代码查询目前。创作工作：

```
Bruto | a/p% | Neto | and then syntax errors

tabula22.Load(new SqlCommand("SELECT     dbo.produkti_items_tab.itemname AS [Produkta nosaukums], dbo.tehnkart_produkt_tab.bruto AS [Bruto sv.], dbo.tehnkart_produkt_tab.aukstie_zudumi_proc AS [Zudumi % a/p],CAST((dbo.tehnkart_produkt_tab.bruto / 100 *

dbo.tehnkart_produkt_tab.aukstie_zudumi_proc) AS numeric(10,2)) 'Neto sv. gr.', dbo.tehnkart_produkt_tab.karstie_zudumi_proc AS [Zudumi % t/a], CAST((dbo.[Neto sv. gr.] / 100 * dbo.[Zudumi % t/a]) AS numeric(10,2)) 'beka', CAST(([Bruto sv.]-[Neto sv. gr.]-[beka]) AS numeric(10,2)) 'Total'   
FROM dbo.tehnkart_produkt_tab INNER JOIN dbo.produkti_items_tab ON dbo.tehnkart_produkt_tab.item_id = dbo.produkti_items_tab.itemid WHERE (dbo.tehnkart_produkt_tab.kart_id = '" + dat1_id + "')", TestConnection).ExecuteReader()); 
```

ps在这里硬编辑=]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:17:07.343

问题是您试图多次引用列别名。您必须将当前查询包装在子查询中才能多次使用列定义：

```
string mySql = @"
SELECT [Produkta nosaukums],
    [Bruto sv.],
    [Zudumi % a/p],
    [Neto sv. gr.],
    [Zudumi % t/a],
    CAST(([Neto sv. gr.] / 100 * [Zudumi % t/a]) AS numeric(10,2)) [beka],
    CAST(([Bruto sv.]-[Neto sv. gr.]-(CAST(([Neto sv. gr.] / 100 * [Zudumi % t/a]) AS numeric(10,2)))) AS numeric(10,2)) [Total]
FROM
(
    SELECT dbo.produkti_items_tab.itemname AS [Produkta nosaukums], 
        dbo.tehnkart_produkt_tab.bruto AS [Bruto sv.], 
        dbo.tehnkart_produkt_tab.aukstie_zudumi_proc AS [Zudumi % a/p],
        CAST((dbo.tehnkart_produkt_tab.bruto / 100 * dbo.tehnkart_produkt_tab.aukstie_zudumi_proc) AS numeric(10,2)) [Neto sv. gr.], 
        dbo.tehnkart_produkt_tab.karstie_zudumi_proc AS [Zudumi % t/a] 
    FROM dbo.tehnkart_produkt_tab 
    INNER JOIN dbo.produkti_items_tab 
        ON dbo.tehnkart_produkt_tab.item_id = dbo.produkti_items_tab.itemid 
    WHERE dbo.tehnkart_produkt_tab.kart_id = '" + dat1_id + @"'
) d";
tabula22.Load(new SqlCommand(mySql, TestConnection).ExecuteReader()); 
```

# sql-server - SUM 函数不返回小数

> ID：15885948
> 
> 赞同：1
> 
> 时间：2013-04-08T18:09:12.583
> 
> 标签：sql-server, sum, decimal

我需要你的帮助：

我想获得金额字段的总和，它包含十进制值，但我只得到`INTEGER`部分，我也需要`DECIMAL`：

```
DECLARE @TOTAL AS DECIMAL(13,2)

SET @Total = (SELECT SUM(Amount)
              FROM t_DownPmtTrans
              WHERE MortgageID = @MortgageID 
                AND DatePaid IS NULL 
                AND SchedPayment IS NOT NULL) 
```

我尝试过使用 CURSOR 但我得到了相同的结果：

```
OPEN dpt_cursor 
SET @Total= 0.0

FETCH NEXT FROM dpt_cursor INTO @DownPmtTransID, @Amount

WHILE @@FETCH_STATUS= 0 
BEGIN

   PRINT @Amount
   SET @Total = (@Total + @Amount)

   FETCH NEXT FROM dpt_cursor
     INTO @DownPmtTransID, @Amount
END 

RETURN  @Total* (-1)
CLOSE dpt_cursor 
DEALLOCATE dpt_cursor 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:34:21.057

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms187810.aspx)，如果表达式是`decimal`，`sum`将返回`decimal(38, s)`。确保数据类型是`amount`is `decimal`。或尝试将其转换为`decimal`using`cast`或`convert`. 此选项可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-10T16:18:03.593

您需要设置精度和比例而不是大小 [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.scale(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.scale%28v=vs.100%29.aspx)

```
var outputParameter = new SqlParameter
{
    Direction = ParameterDirection.Output,
    ParameterName = "your parameter name in your stored procedure",
    SqlDbType = SqlDbType.Decimal,
    Precision = 13,
    Scale = 2
}; 
```

声明一个 SQL 参数数组并将参数添加到其中

```
var parameters = new SqlParameter[1];
parameters[0] = outputParameter 
```

声明一个命令对象

```
var command = new SqlCommand (); //don't forget everything else
command.CommandType = CommandType.StoredProcedure;
command.CommandText = "stored procedure name"
command.Parameters.AddRange (parameters); 
```

执行你的命令

```
command.ExecuteNonQuery (); 
```

现在从参数集合中读取值

```
var value = (decimal) command.Parameters[0].Value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:29:37.453

我也无法复制，但无论如何将要求和的列转换为变量的数据类型应该可以得到你想要的。情况并非如此的唯一原因是如果“金额”是一个整数......

```
DECLARE @TOTAL AS DECIMAL(13,2)

SET     @Total =   (SELECT  SUM(Convert(DECIMAL(13,2),Amount))
                    FROM    t_DownPmtTrans
                    WHERE   MortgageID = @MortgageID 
                    AND     DatePaid IS NULL 
                    AND     SchedPayment IS NOT NULL) 
```

由于问题不在 SQL 范围内，我进行了快速搜索，发现：[http ://forums.asp.net/t/33723.aspx/1](http://forums.asp.net/t/33723.aspx/1)

根据它，这是一个已知问题。我环顾四周，虽然这个人没有说它有帮助，但我建议创建一个 SqlParameter 对象，以便您可以设置对象的精度属性，然后将其传递给您的 Add 方法。

# asp.net-mvc-3 - MVC3 和 EF // 将图像添加到现有数据库对象

> ID：15885949
> 
> 赞同：-2
> 
> 时间：2013-04-08T18:09:20.540
> 
> 标签：asp.net-mvc-3, image, entity-framework

模型

```
 public class Discount

    {
    public int DiscountId {get; set;}
    public string Name { get; set; }
    public string Information { get; set; }
    } 
```

我想向这个模型添加一个尚不存在的图像。例如，当用户浏览到 CRUD 页面创建视图时，用户可以创建一个新的折扣，并且可以选择浏览/上传一个新图像，该图像将与创建的新折扣一起标识。

[文件上传 ASP.NET MVC 3.0](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0/5193851#5193851) 教会了我如何在 MVC3 中上传图像，但我需要帮助才能将此上传的图像映射到特定折扣 (DiscountID)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:23:37.597

我不确定您的实际要求是什么，但您可以根据数据库 ID 给出图像名称。例如。`Img0001`等等。另外，将该图像文件的路径保存在数据库的相关记录中。

# java - 在java中构建trie

> ID：15885950
> 
> 赞同：4
> 
> 时间：2013-04-08T18:09:21.897
> 
> 标签：java, file, insert

如何从文件构造树？我希望能够从文件中读取它们，然后添加到适当的级别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T16:48:52.613

在我看来，您正在尝试实施 trie。

在这里寻找一个很好的java实现：[http ://www.cs.duke.edu/~ola/courses/cps108/fall96/joggle/trie/Trie.java](http://www.cs.duke.edu/~ola/courses/cps108/fall96/joggle/trie/Trie.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:18:44.693

**添加**

从根开始，搜索第一个（或当前）字母。如果找到该字母，则移动到该节点并搜索下一个字母。如果没有找到该字母，则搜索与当前字母匹配的单词，如果有相似的单词，则将当前字母添加为新节点并将两个单词移到其下，否则添加该单词。

***注意：**这将产生一个比示例中显示的树更适合搜索的树。（adamant 和 adapt 将分组在另一个 'a' 节点下）*

**更新：查看关于**[Trie](http://en.wikipedia.org/wiki/Trie)的 Wikipedia 文章

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:23:31.970

如果在叶子（实际单词）之前的树中只有两个级别，则可以简单地从包含 28 个元素的数组开始，并将字母转换为索引（即 a==1、b==2 等）。数组元素可以是一些包含完整单词的集合/列表。您可以懒惰地创建数组和列表（即创建根数组，但其他数组和单词列表为空值，然后在需要时/如果需要创建数组/列表）。

我是否在阅读您应该正确遵守的规则？

PS我认为使用每个全尺寸的数组不会太浪费空间，而且它应该很快解决

更新：@user1747976，每个数组大约需要 28*4 或 28*8 位 + 12 字节[开销](https://stackoverflow.com/a/3719281/520567)。希望您使用压缩操作，因此每个数组是 28*4+12=116bytes。现在取决于您是想提高内存效率还是提高处理效率。为了提高内存效率，您可以使用某种哈希图而不是数组，但我不确定额外的开销是否会小于使用数组的开销。处理肯定会更糟。您需要根据树部门的要求多次使用一些巧妙的循环。一些用于插入树的丑陋伪代码：

```
root=new Object[28];
word="something";
pos = root;
wordInd=1;
for (int i=1; i<=TREE_DEPTH ; i++) {
   targetpos = letterInd(letter(wordInd,word));
   if (i==TREE_DEPTH) {
      if (pos[targetpos] == null) pos[targetpos] = new HashSet<String>();
      (Set) pos[targetpos].add(word);
      break;
   } else {
      if (pos[targetpos] == null) pos[targetpos] = new Object[28];
      wordInd++;
      pos = pos[targetpos];
   }
} 
```

您可以使用类似的循环来检索单词。

# python - 分析python脚本

> ID：15885955
> 
> 赞同：1
> 
> 时间：2013-04-08T18:09:37.420
> 
> 标签：python, profiling, blender

我正在尝试分析一个用 python 编写的 Blender 脚本。问题是大部分运行时间都花在“内置方法调用”上，我不知道这是什么。

谁能告诉我这种方法的作用或给我一些提示如何减少其计算时间？

cProfile 的示例输出为：

```
71193 function calls (63983 primitive calls) in 9.305 seconds
...
816    6.427    0.008    6.427    0.008 {built-in method call}
... 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:22:48.150

这些是对用 C/C++ 编写的本机函数的调用。所有对本机函数的调用显然都通过`call`python 运行时中的一个函数。

要使用 cProfile 进一步分析，您应该尽量避免深入挖掘`call`函数。模块化您的 Python 代码，以便清楚哪个部分占用了大部分时间，同时忽略 cProfile 输出中指向本机代码的行。

另一种方法是深入挖掘本机 Blender 源代码，这很可能是您想要避免的，而且在您的情况下也不是最好的主意。

# jquery - 类之间的jQuery淡入淡出

> ID：15885960
> 
> 赞同：0
> 
> 时间：2013-04-08T18:09:53.890
> 
> 标签：jquery

我正在循环显示三个显示不同横幅背景图像的类。

我的循环运行良好，但想在不同的类之间添加淡入淡出动画。

这是我当前的代码

```
 var img = ['img1', 'img2', 'img3'],
    c = 0,
    run = setInterval(loop, 3000); 

    function loop(){ 
      $('#header').removeClass().addClass(img[++c%img.length]).fadeIn('slow'); 
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:12:00.430

jQuery UI 可以处理[类之间的动画](http://jqueryui.com/addClass/)。查看[addClass](http://jqueryui.com/addClass/)和[switchClass](http://jqueryui.com/switchClass/)的文档。[它们的语法与jQuery 的 animate](http://api.jquery.com/animate/)非常相似。

老实说，如果您只是在寻找基本的转换，我会研究[CSS3 转换](http://www.w3schools.com/css3/css3_transitions.asp)（请原谅资源的糟糕选择）。

# html - 在另一个 div 悬停后显示一个 div

> ID：15885962
> 
> 赞同：0
> 
> 时间：2013-04-08T18:09:58.610
> 
> 标签：html, css

当用户将鼠标悬停在一个单独的框上时，我试图让一个框出现。我无法让它工作。

这是html

```
<div class="division_left" id="account">
      <div class="container"></div>
      <span>Account</span>
</div> 
```

这是CSS

```
#account:hover + .container {
visibility: visible;
}

.container {
    position: absolute;
    visibility: hidden;
    height: 300px;
    width: 500px;
    bottom: 40px;
    left: 40px;
    background-color: #fff;
    border: 1px solid #000;
} 
```

我再次试图让`container`鼠标`#account`悬停在上面。它只是没有出现。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:12:24.677

该元素是其兄弟而不是其兄弟`#account`的父元素-您需要“直接后代”选择器，而不是“相邻兄弟”选择器，即`.container``>``+`

```
#account:hover > .container {
    visibility: visible;
} 
```

代替

```
#account:hover + .container {
    visibility: visible;
} 
```

对“直接后代”选择器的支持如下：

> IE 7、IE8、IE9 pr3、FF 3.0、FF 3.5、FF 3.6、FF 4b1、Saf 4.0 Win、Saf 5.0 Win、Chrome 4、Chrome 5、Opera 10.10、Opera 10.53 和 Opera 10.60

[活生生的例子](http://jsfiddle.net/KvNfs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:13:05.997

这就是你在 DEMO [http://jsfiddle.net/kevinPHPkevin/wNdBw/之后的样子](http://jsfiddle.net/kevinPHPkevin/wNdBw/)

```
div {
    display: none;
}

a:hover + div {
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:13:12.527

`.container`不是其孩子的[*兄弟姐妹*](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)，`#account`因此您需要改用直接子组合器`>`

`#account:hover > .container`

[jsFiddle](http://jsfiddle.net/kmjRu/24/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T18:15:06.817

为什么不使用 JQuery Hover 函数呢？比其他任何东西都好和稳定。你也可以玩效果。

HTML：

```
<div class="division_left" id="account">
  <div class="container" style="display:none"></div>
  <span id="showAccount">Account</span>
</div> 
```

查询：

```
$('#showAccount').hover(function(){
   $('.container').toggle('fade');
}); 
```

这将为您提供比常规 CSS 更好的效果。

试试看告诉我..

或者，如果您需要，我将添加 JSFiddle。

**更新**： http: [//jsfiddle.net/V8QbY/](http://jsfiddle.net/V8QbY/) - 这里是

问候，

拉胡尔。

# asp.net - 在 Asp.net / Asp.net mvc 中进行实时 Web 体验的方法是什么？

> ID：15885964
> 
> 赞同：0
> 
> 时间：2013-04-08T18:10:07.313
> 
> 标签：asp.net, asp.net-mvc, websocket, real-time, signalr

我将开始使用**Microsoft**堆栈开发单页 Web 应用程序。在项目的一些关键部分，我必须提供实时数据。我可以使用**Signalr**或**Web Sockets**来完成这类任务。您能否在这些技术的可用性、性能或学习曲线方面对它们进行比较。我很高兴知道您是否有其他选择建议。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:16:34.230

我认为您应该使用signalR。它是 .net 框架的一部分，它还支持 Web 套接字，如果任何客户端不支持 Web 套接字，它将回退到长轮询，永远构建任何其他可用技术。

[.NET 4.5 WebSockets 与 SignalR](https://stackoverflow.com/questions/9524591/net-4-5-websockets-vs-signalr)

[http://www.asp.net/vnext/overview/signalr/signalr-and-web-sockets](http://www.asp.net/vnext/overview/signalr/signalr-and-web-sockets)

[http://www.hanselman.com/blog/YourUsersDontCareIfYouUseWebSockets.aspx](http://www.hanselman.com/blog/YourUsersDontCareIfYouUseWebSockets.aspx)

# javascript - 如何独立于 HTML 运行 Javascript 文件

> ID：15885965
> 
> 赞同：1
> 
> 时间：2013-04-08T18:10:08.403
> 
> 标签：javascript, jquery, elasticsearch

我是 Javascript 的超级新手...

如何在不使用 HTML 代码的情况下运行 .js 文件？我还需要能够运行 .js 文件中的 JQuery（ajax 命令）。

我正在尝试测试以准确找出在 Elasticsearch 服务器上运行查询的 Ajax 命令返回的内容。

这是我的代码，我想确切地了解正在提取的内容：

```
var load_data = function() {
  $.ajax({   url: 'http://localhost:9200/inventory/_search?pretty=true'
           , type: 'POST'
           , data :
              JSON.stringify(
              {
                "query" : { "match_all" : {} },

                "facets" : {
                  "tags" : {
                    "terms" : {
                        "field" : "qty_onhand",
                        "size"  : "10"
                    }
                  }
                }
              })
           , dataType : 'json'
           , processData: false
           , success: function(json, statusText, xhr) {
               return display_chart(json);
             }
           , error: function(xhr, message, error) {
               console.error("Error while loading data from ElasticSearch", message);
               throw(error);
             }          
  });
};
load_data(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:15:24.443

`jQuery` is heavily tied into a DOM, so you might want to look at removing the dependancy on it.

That said, there is [a jQuery package](https://npmjs.org/package/jquery) in npm so you can run it via [node.js](http://nodejs.org/) on the command line.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:14:35.357

You can try node.js. As far as I know you can install jquery like;

`npm install jquery`

# python - 下载 url 的内容并保存

> ID：15885966
> 
> 赞同：0
> 
> 时间：2013-04-08T18:10:14.953
> 
> 标签：python

我有来自 url 的这种格式的数据

```
 [{"column1":"something","column2":"something 2","column1":"something3","column2":"something4"}, etc] 
```

我想从 url 下载此内容并将其保存为以下格式的 csv 文件：

```
 column1     column2

something   something2

something3  something4 
```

我可以使用 urllib2 用 python 来做吗？还是其他图书馆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:38:14.913

[Requests](http://docs.python-requests.org/en/latest/)可能是最容易下载的。你只需使用：

```
import codecs, requests

req = requests.get(url)
text = req.text.encode(req.encoding)
with codecs.open(filename, 'w', encoding='utf-8') as f:
    f.write(text) 
```

然而，正如 yedpodtrzitko 所提到的，将特定输入解析为 JSON 将为您留下两个键/值对，并且它将被每个键遇到的最后一个覆盖。您可以手动将其拆分并解析为行，但它不应该是有效的 JSON。

# printing - 打印出arraylist的方法

> ID：15885972
> 
> 赞同：-1
> 
> 时间：2013-04-08T18:10:39.200
> 
> 标签：printing, arraylist

我制作了一个助手的 Arraylist（字符串名称，int 工资）

我想创建一个方法来打印出所有的助手，不管我们在列表中添加了多少。

我希望能够在时间到期时从我的运行文件中调用该方法。

我将如何制作这种方法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:29:30.307

假设 ArrayList 定义为：ArrayList asstList

```
private void PrintAssistnatList() {
    for(Assistant asst:asstList) {
        System.out.println("Name: "+asst.name+" salary: "+salary);
    }
} 
```

# rest - Drupal 服务节点检索

> ID：15885976
> 
> 赞同：1
> 
> 时间：2013-04-08T18:10:53.267
> 
> 标签：rest, drupal, service

对于休息服务，我允许检索节点。即使我没有登录，我是否也能够获取节点。我启用了会话身份验证，但我仍然能够通过访问我的 Drupal Webiste 网站的端点/节点来获取当前节点的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:28:14.350

任何拥有“查看已发布内容”权限的人都应该能够检索节点。

检索节点的 URL 如下所示：

```
http://www.example.com/my_endpoint_path/node/123.json 
```

路径`my_endpoint/node`引用索引资源，它返回节点列表。

以下是服务模块示例的完整列表：http: [//tylerfrankenstein.com/user/4/code/drupal-services-examples](http://tylerfrankenstein.com/user/4/code/drupal-services-examples)

# html - 填充一定百分比的 SVG 并为填充设置动画

> ID：15885980
> 
> 赞同：10
> 
> 时间：2013-04-08T18:11:04.277
> 
> 标签：html, css, svg

目前，我正在开展一个项目，将州数据与另一个国家的数据进行比较。一个数据点是受保护土地的百分比，我想填写与数据点匹配的州百分比。例如，如果北卡罗来纳州 25% 的地区受到保护，那么我希望该州 25% 的地区能够填补。目前，我正在尝试使用 svg，我希望在页面加载时进行填充。

任何有关如何执行此操作的建议或资源将不胜感激。

我在 Illustrator 中绘制的示例：

![NC 填写 33%](https://i.stack.imgur.com/ZyvYc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-28T14:04:06.807

这是我的两分钱：

你可以有一个像这样的线性渐变：

```
<linearGradient y2="0%" x2="100%" y1="0%" x1="0%" id="F1g"><stop stop-color="#00FF00" offset="0%" id="F1gst1"/><stop stop-color="#FFFFFF" offset="0%" id="F1gst2"/></linearGradient> 
```

然后取第一个停止元素：

```
var firstStop = document.getElementById('F1gst1'); 
```

然后使用属性偏移指定要填充的百分比：

```
percentage = '35%'; firstStop.setAttribute('offset',percentage); 
```

这就是javascript中的方式。您需要每个状态的渐变（您可以使用一个组），也许您需要定义一个路径对象，并在每个状态内以相同的形式填充，因此您可以将线性渐变应用于该路径填充属性。

如果你需要一个动画，你可以设置一个 setInterval，每 x 毫秒添加一个 '1%' 来制作效果，并在达到所需百分比时停止每个间隔。

我希望这至少给了你一个线索。

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-17T03:23:08.253

这可以通过纯 css 和 html 来完成：http: [//jsfiddle.net/haohcraft/rAPN5/1/](http://jsfiddle.net/haohcraft/rAPN5/1/)

基本上，诀窍是

1.  您需要一个具有透明内场但不透明外场的图像，就像小提琴中的图像一样。并且您需要设置`z-index:1`才能将其放置在`filled <div>`.
2.  在这种情况下设置`filled <div>`和。`img``position: absolute; width:90px; height:90px;`
3.  然后你可以调整 的`height`来`filled div`显示*百分比*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:51:11.860

好吧，这是 Canvas 中的一种非常愚蠢的方式......（我假设你的意思是你想要填充一定百分比的内部区域）。

第 1 步：将每个状态的实体图像转储到 Canvas

第 2 步：计算非零像素的数量

第 3 步：使用边缘提取卷积提取边缘

第 4 步：对于每一行，在形状内的每一行内水平迭代，以像素为单位着色，直到达到您想要描绘的形状的 x%。

可以在 SVG 中执行此操作，但您需要手动细分形状，跟踪所有区域，然后手动计算要填充的区域，它不会做我认为您想要的 - 即有一个状态填满就像它是一个水容器？

当然，另一种解决方案是 3D 打印所有 50 个州形状的透明容器，用彩色水填充到所需的水平。拍摄它们，然后通过 SVG 滤镜（feImage + feColorMatrix+feComposite）处理该图像，以选择性地填充 SVG 图像。这可能比学习曲面细分（或 Canvas）更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-24T07:21:06.060

ProgressBar 看起来很有前途且易于使用： [https ://kimmobrunfeldt.github.io/progressbar.js/](https://kimmobrunfeldt.github.io/progressbar.js/)

这是一个很好的小提琴示例： [https ://jsfiddle.net/kimmobrunfeldt/72tkyn40/](https://jsfiddle.net/kimmobrunfeldt/72tkyn40/)

Javascript：

```
// progressbar.js@1.0.0 version is used
// Docs: http://progressbarjs.readthedocs.org/en/1.0.0/

var bar = new ProgressBar.Circle(container, {
  color: '#aaa',
  // This has to be the same size as the maximum width to
  // prevent clipping
  strokeWidth: 4,
  trailWidth: 1,
  easing: 'easeInOut',
  duration: 1400,
  text: {
    autoStyleContainer: false
  },
  from: { color: '#aaa', width: 1 },
  to: { color: '#333', width: 4 },
  // Set default step function for all animate calls
  step: function(state, circle) {
    circle.path.setAttribute('stroke', state.color);
    circle.path.setAttribute('stroke-width', state.width);

    var value = Math.round(circle.value() * 100);
    if (value === 0) {
      circle.setText('');
    } else {
      circle.setText(value);
    }

  }
});
bar.text.style.fontFamily = '"Raleway", Helvetica, sans-serif';
bar.text.style.fontSize = '2rem';

bar.animate(1.0);  // Number from 0.0 to 1.0 
```

# rabbitmq - RabbitMQ 预取

> ID：15885984
> 
> 赞同：3
> 
> 时间：2013-04-08T18:11:23.757
> 
> 标签：rabbitmq, messaging, amqp

到目前为止，我的 RabbitMQ 消费者客户端使用的预取值为 1。我希望增加该值以提高性能。如果我将值设置为 2，RabbitMQ 服务器是否会一次向每个消费者发送 2 条消息，以便我需要解析这两条消息并将第二条消息存储在 List 中，直到第一个消息被处理和确认？还是 API 会在幕后处理这个问题？

我正在使用 Java AMQP 客户端库：

```
ConnectionFactory factory = new ConnectionFactory();
...
Connection connection = factory.newConnection();
Channel channel = connection.createChannel();

channel.basicQos(2);

QueueingConsumer consumer = new QueueingConsumer(channel);
channel.basicConsume(CONSUME_QUEUE_NAME, false, consumer);

while (!Thread.currentThread().isInterrupted()) {
   try {
      QueueingConsumer.Delivery delivery = consumer.nextDelivery();
      String m = new String(delivery.getBody(), "UTF-8");

      // Will m contain two messages? Will I have to each message and keep track of them within a List?

      ...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T18:49:03.143

api 在幕后处理这个，所以你不用担心。

关于哪条消息到达哪里，RMQ 将使用循环传递，也就是说，如果你有 queue: `1 2 3 4 5 6`and `consumer1`and `consumer2`。

```
consumer1 will have 1 3 5
consumer2 will have 2 4 6 
```

如果与您的任何消费者的连接断开，则预取的消息将使用相同的传递方法重新传递给活动的消费者。

这应该是有趣的阅读，也是一个很好的起点，可以更准确地了解发生了什么：

*   [教程二，我相信你已经读过](http://www.rabbitmq.com/tutorials/tutorial-two-python.html)
*   [可靠性](http://www.rabbitmq.com/reliability.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-12T11:29:59.047

api 在阻塞队列中内部排队消息。

将预取计数设置为大于 1 实际上是一个好主意，因为您的工作人员不需要等待每条消息到达。它最多可以读取 N 条消息（其中 N 是预取计数）。它可以在完成前一条消息后立即开始处理一条消息。

此外，您可以选择一次确认多条消息，而不是单独确认。

```
channel.basicAck(lastDeliveryTag, true); 
```

布尔值`true`表示确认所有消息，包括提供的`lastDeliveryTag`

# neo4j - Cypher 查询返回重复的结果

> ID：15885985
> 
> 赞同：3
> 
> 时间：2013-04-08T18:11:24.130
> 
> 标签：neo4j, cypher

我有以下图表设置：

```
start root=node(0)
create (F {name:'FRAME'}), (I {name: 'INTERACTION'}), (A {name: 'A'}), (B {name: 'B'}),
root-[:ROOT]->F, F-[:FRAME_INTERACTION]->I, I-[:INTERACTION_ACTOR]->A, I-[:INTERACTION_ACTOR]->B 
```

以下查询返回重复的结果：

```
START actor=node:node_auto_index(name='A') 
MATCH actor<-[:INTERACTION_ACTOR]-interaction-[:INTERACTION_ACTOR]->actor2,
   frame-[:FRAME_INTERACTION]->interaction 
RETURN frame, interaction

Query Results

+-----------------------------------------------------+
| frame                 | interaction                 |
+-----------------------------------------------------+
| Node[1]{name:"FRAME"} | Node[2]{name:"INTERACTION"} |
| Node[1]{name:"FRAME"} | Node[2]{name:"INTERACTION"} |
+-----------------------------------------------------+
2 rows
52 ms 
```

即使我再添加一个开始节点来尝试限制结果，我也有相同的结果：

```
START actor=node:node_auto_index(name='A'), frame=node:node_auto_index(name='FRAME') 
MATCH actor<-[:INTERACTION_ACTOR]-interaction-[:INTERACTION_ACTOR]->actor2,
   frame-[:FRAME_INTERACTION]->interaction 
RETURN frame, interaction 
```

我想了解为什么查询返回重复的结果。我知道可以通过使用 distinct 返回唯一的结果，但是是否可以更改查询以便通过匹配路径仅返回一个结果，而不应用额外的操作（不同的）？

（设置和查询可以在[http://console.neo4j.org/?id=q2e0ay](http://console.neo4j.org/?id=q2e0ay)进行测试）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T23:11:28.020

如果您添加`actor2`到退货列表中，您将看到问题所在：

```
 frame                 interaction                 actor             actor2
(7 {name:"FRAME"})    (8 {name:"INTERACTION"})    (9 {name:"A"})    (9 {name:"A"})
(7 {name:"FRAME"})    (8 {name:"INTERACTION"})    (9 {name:"A"})    (10 {name:"B"}) 
```

演员“A”作为actor2的值被包括在内！但是当您考虑它时，这是有道理的，因为您在查询中没有任何地方告诉 neo4j`actor`并且`actor2`需要是不同的实体。

幸运的是，这很容易做到：

```
START actor=node:node_auto_index(name='A') 
MATCH actor<-[:INTERACTION_ACTOR]-interaction-[:INTERACTION_ACTOR]->actor2,
    frame-[:FRAME_INTERACTION]->interaction 
WHERE actor <> actor2      //like this!
RETURN frame, interaction 
```

# azure - Windows azure 网站 (WAWS) 中的缩放选项问题

> ID：15885986
> 
> 赞同：2
> 
> 时间：2013-04-08T18:11:26.177
> 
> 标签：azure, azure-web-app-service

我的 Windows azure 帐户中有多个网站，所有网站都需要在**免费**模式下运行。对于一个网站，我需要将缩放选项从**免费更改为保留，**但是我的所有网站都会受到相同缩放的影响。

为什么会发生这种情况？

这种行为有什么具体原因吗？

如果是这样，那么当只有 1 个网站需要在保留模式下运行时，如何为 5 个网站收费？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:26:07.303

今天的工作方式：当您从*free*更改为*reserved*时，您的所有网站都将转换为*reserved*。它们还将在同一组 VM 实例上运行。所以：如果您使用一个预留的小型 VM，您需要为一个小型 VM 付费，即使*所有*网站现在都在您预留的 VM 中运行。而且...如果您转换回免费模式，您的所有网站都会转换回免费模式。

还有一个*共享*层。ScottGu 不久前[在博客上写过这个](http://weblogs.asp.net/scottgu/archive/2012/09/17/announcing-great-improvements-to-windows-azure-web-sites.aspx)。

# java - 通过将日期作为参数提取所有推文

> ID：15885988
> 
> 赞同：2
> 
> 时间：2013-04-08T18:11:33.390
> 
> 标签：java, twitter, twitter4j

我想在 java 中使用 twitter4j lib 提取本周的所有推文。我试着像下面那样做

```
try {
            Query query = new Query("since:2013-04-01&until:2013-04-08");
            QueryResult result;
            do {
                result = twitter.search(query);
                List<Status> tweets = result.getTweets();
                for (Status tweet : tweets) {
                    System.out.println("@" + tweet.getUser().getScreenName() + " - " + tweet.getText());
                }
            } while ((query = result.nextQuery()) != null);
            System.exit(0); 
```

但是，我最终收到一条错误消息

```
403:The request is understood, but it has been refused. An accompanying error message will explain why. This code is used when requests are being denied due to update limits (https://support.twitter.com/articles/15364-about-twitter-limits-update-api-dm-and-following).
message - Missing or invalid url parameter
code - 195 
```

那么，我如何通过将日期作为参数来获取推文？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T15:42:25.053

我认为下面的片段应该回答你的问题（日期为 YYYY-MM-DD 格式）

`Query query = new Query("#sad");`

`query.lang("en");`

`query.setSince("2006-01-01");`

`query.setUntil("2013-12-28");`

`QueryResult result = twitter.search(query);`

# c# - C# HttpClient 放置

> ID：15885990
> 
> 赞同：14
> 
> 时间：2013-04-08T18:11:34.943
> 
> 标签：c#, http, httpclient, put

出于某种原因，我下面曾经工作的代码现在会引发异常：

```
public static async Task<string> HttpPut(string inUrl, string inFilePath)
    {
        using (var handler = new HttpClientHandler
        {
            AllowAutoRedirect = false
        })
        {
            using (var client = new HttpClient(handler))
            {
                //var content = new StreamContent(new FileStream(inFilePath, FileMode.Open, FileAccess.Read, FileShare.Read, bufferSize: 4096, useAsync: true));
                using (var content = new StreamContent(new FileStream(inFilePath, FileMode.Open)))
                {
                    content.Headers.Remove("Content-Type");
                    content.Headers.Add("Content-Type", "application/octet-stream");

                    using (var req = new HttpRequestMessage(HttpMethod.Put, inUrl))
                    {
                        string authInfo = String.Format("{0}:{1}", Program.Config.MediaStorageList.Find(o => o.Name == "Viz Media Engine Test").UserName, Program.Config.MediaStorageList.Find(o => o.Name == "Viz Media Engine Test").Password);
                        authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
                        req.Headers.Add("Authorization", "Basic " + authInfo);
                        req.Headers.Remove("Expect");
                        req.Headers.Add("Expect", "");
                        //req.Headers.TransferEncodingChunked = true;

                        req.Content = content;

                        // Ignore Certificate validation failures (aka untrusted certificate + certificate chains)
                        ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true);

                        using (HttpResponseMessage resp = await client.SendAsync(req))
                        {
                            //This part is specific to the setup on an Expo we're at...
                            if (resp.StatusCode == HttpStatusCode.Redirect || resp.StatusCode == HttpStatusCode.TemporaryRedirect)
                            {
                                string redirectUrl = resp.Headers.Location.ToString();

                                if (redirectUrl.Contains("vme-store"))
                                {
                                    redirectUrl = redirectUrl.Replace("vme-store", "10.230.0.11");
                                }
                                return await HttpPut(redirectUrl, inFilePath);
                            }

                            resp.EnsureSuccessStatusCode();

                            return await resp.Content.ReadAsStringAsync();
                        }
                    }
                }
            }
        }
    } 
```

我得到的例外是：

```
System.NotSupportedException was unhandled
HResult=-2146233067
Message=The stream does not support concurrent IO read or write operations.
Source=System
StackTrace:
     at System.Net.ConnectStream.InternalWrite(Boolean async, Byte[] buffer, Int32 offset, Int32 size, AsyncCallback callback, Object state)
   at System.Net.ConnectStream.BeginWrite(Byte[] buffer, Int32 offset, Int32 size, AsyncCallback callback, Object state)
   at System.Net.Http.StreamToStreamCopy.BufferReadCallback(IAsyncResult ar)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at VizWolfInnerServer.Tools.HttpConnector.<HttpPut>d__39.MoveNext() in c:\Users\christer\Documents\Visual Studio 2012\Projects\VizWolfNew\VizWolfInnerServer\Tools\HttpConnector.cs:line 202
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at VizWolfInnerServer.Tools.VizAPIConnector.<VmeUploadMedia>d__0.MoveNext() in c:\Users\christer\Documents\Visual Studio 2012\Projects\VizWolfNew\VizWolfInnerServer\Tools\VizAPIConnector.cs:line 187
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.<ThrowAsync>b__1(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
InnerException: 
```

我很难为 HttpClient 找到合适的文档和示例，并且我正在努力弄清楚为什么这突然不起作用（使用 StringContent 而不是 StreamContent 的完全类似的方法可以完美地工作）......

它最初是从它自己的线程中调用的，然后像这样：

```
public static async void VmeUploadMedia(string inUploadLink, string inFilePath)
{
    string result = await HttpConnector.HttpPut(inUploadLink, inFilePath);
} 
```

有人发现任何明显的东西吗？

谢谢

**更新**

事实证明，让博览会人员将他们的存储名称与它的 IP 映射，这样我就可以回到我的原始代码是最好的解决方案。我遇到的问题与 AllowAutoRedirect = false 有关。HttpResponseMessage resp = await client.SendAsync(req) 上发生异常，即使没有真正进行重定向。我有点不知道为什么会发生这种情况，但是使用这段代码现在一切正常：

```
public static async Task<string> HttpPut(string inUrl, string inFilePath)
    {
        using (var client = new HttpClient())
        {
            using (var content = new StreamContent(File.OpenRead(inFilePath)))
            {
                content.Headers.Remove("Content-Type");
                content.Headers.Add("Content-Type", "application/octet-stream");

                using (var req = new HttpRequestMessage(HttpMethod.Put, inUrl))
                {
                    string authInfo = String.Format("{0}:{1}", Program.Config.MediaStorageList.Find(o => o.Name == "Viz Media Engine Test").UserName, Program.Config.MediaStorageList.Find(o => o.Name == "Viz Media Engine Test").Password);
                    authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
                    req.Headers.Add("Authorization", "Basic " + authInfo);
                    req.Headers.Remove("Expect");
                    req.Headers.Add("Expect", "");

                    req.Content = content;

                    // Ignore Certificate validation failures (aka untrusted certificate + certificate chains)
                    ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true);

                    using (HttpResponseMessage resp = await client.SendAsync(req))
                    {
                        resp.EnsureSuccessStatusCode();

                        return await resp.Content.ReadAsStringAsync();
                    }
                }
            }
        }
    } 
```

感谢那些试图提供帮助的人

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-28T13:10:10.713

事实证明，让博览会人员将他们的存储名称与它的 IP 映射，这样我就可以回到我的原始代码是最好的解决方案。我遇到的问题与 AllowAutoRedirect = false 有关。HttpResponseMessage resp = await client.SendAsync(req) 上发生异常，即使没有真正进行重定向。我有点不知道为什么会发生这种情况，但是使用这段代码现在一切正常：

```
public static async Task<string> HttpPut(string inUrl, string inFilePath)
    {
        using (var client = new HttpClient())
        {
            using (var content = new StreamContent(File.OpenRead(inFilePath)))
            {
                content.Headers.Remove("Content-Type");
                content.Headers.Add("Content-Type", "application/octet-stream");

                using (var req = new HttpRequestMessage(HttpMethod.Put, inUrl))
                {
                    string authInfo = String.Format("{0}:{1}", Program.Config.MediaStorageList.Find(o => o.Name == "Viz Media Engine Test").UserName, Program.Config.MediaStorageList.Find(o => o.Name == "Viz Media Engine Test").Password);
                    authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
                    req.Headers.Add("Authorization", "Basic " + authInfo);
                    req.Headers.Remove("Expect");
                    req.Headers.Add("Expect", "");

                    req.Content = content;

                    // Ignore Certificate validation failures (aka untrusted certificate + certificate chains)
                    ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true);

                    using (HttpResponseMessage resp = await client.SendAsync(req))
                    {
                        resp.EnsureSuccessStatusCode();

                        return await resp.Content.ReadAsStringAsync();
                    }
                }
            }
        }
    } 
```

感谢那些试图提供帮助的人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:21:07.343

```
using (HttpResponseMessage resp = await client.SendAsync(req)) 
```

似乎这一行将为该执行创建一个新的上下文，因此一个新的线程上下文，也许你不能这样做，因为你将共享 FileStream 的锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:20:41.260

看起来您`HttpPut()`又在跟注，但您仍然有`FileStream`空位。`HttpPut()`在从自身内部递归调用之前尝试处理 FileStream 。

```
//This part is specific to the setup on an Expo we're at...
                            if (resp.StatusCode == HttpStatusCode.Redirect || resp.StatusCode == HttpStatusCode.TemporaryRedirect)
                            {
                                string redirectUrl = resp.Headers.Location.ToString();

                                if (redirectUrl.Contains("vme-store"))
                                {

                                    redirectUrl = redirectUrl.Replace("vme-store", "10.230.0.11");
                                }
                                content.Dispose();
                                return await HttpPut(redirectUrl, inFilePath);
                        } 
```

此外，您可能希望处理任何其他 IDisposable 对象，例如 http 响应，以确保在深入了解堆栈跟踪之前释放所有资源。这是递归的一个问题，即当您使用`Using`语句时，您并没有离开它们的范围，因此它们没有做他们的工作。

# java - 仅覆盖 Java 对象的 equals() 方法

> ID：15885991
> 
> 赞同：3
> 
> 时间：2013-04-08T18:11:35.983
> 
> 标签：java, android, overriding, equals

我正在开发一个使用该[`ScanResult`](http://developer.android.com/reference/android/net/wifi/ScanResult.html)对象的 Android 应用程序。该对象的形式为：

```
[SSID: __mynetwork__, BSSID: 00:0e:2e:ae:4e:85, capabilities: [WPA-PSK-TKIP][ESS], level: -69, frequency: 2457, timestamp: 117455824743] 
```

我将如何仅覆盖该方法而不创建扩展它的客户类`equals()`以便仅比较`SSID`、`BSSID`、`capabilties`和属性？换句话说，我想在方法中消除属性，这样当我比较这两个对象时，方法会返回一个值：`level``frequency``equals``timestamp``equals()``true`

```
[SSID: __mynetwork__, BSSID: 00:0e:2e:ae:4e:85, capabilities: [WPA-PSK-TKIP][ESS], level: -69, frequency: 2457, timestamp: 117455824743]
[SSID: __mynetwork__, BSSID: 00:0e:2e:ae:4e:85, capabilities: [WPA-PSK-TKIP][ESS], level: -69, frequency: 2457, timestamp: 117460312231] 
```

**注意：**当我派生一个扩展的客户类时，`ScanResult`当我尝试实现构造函数时出现以下错误：`The constructor ScanResult() is not visible`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:21:34.647

You just have to implement it without checking the fields you want to ignore. Don't forget to override the hashode() too.

```
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result
            + ((field1 == null) ? 0 : field1.hashCode());
    result = prime * result + ((field2 == null) ? 0 : field2.hashCode());
            ...etc
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    ScanResult other = (ScanResult ) obj;
    if (field1 == null) {
        if (other.field1 != null)
            return false;
    } else if (!field1.equals(other.field1))
        return false;
    if (field2 == null) {
        if (other.field2 != null)
            return false;
    } else if (!field2 .equals(other.field2 ))
        return false;
        }
... etc
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:17:20.673

Extend the `ScanResult` class and only override the `equals()` method

```
class CustomScanResult extends ScanResult {

    @Override
    public boolean equals(Object o) {
        // ... custom logic ...
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:22:45.987

这是你重写的 equals() 方法....

```
@Override
public boolean equals(Object o) {
    if (this == o) return true;
    if (!(o instanceof ScanResult)) return false;

    if(!BSSID.equals(o.BSSID)) return false;
    if(!SSID.equals(o.SSID)) return false;
    if(!capabilities.equals(o.capabilities)) return false;
    if(frequency != o.frequency) return false;
    if(level != o.level) return false;

    return true;
} 
```

**编辑**

既然上述解决方案不起作用，我可以建议：

```
class ScanResultComparator {
    public static boolean equals(ScanResult a, ScanResult b){
        if(!a.BSSID.equals(b.BSSID)) return false;
        if(!a.SSID.equals(b.SSID)) return false;
        if(!a.capabilities.equals(b.capabilities)) return false;
        if(a.frequency != b.frequency) return false;
        if(a.level != b.level) return false;

        return true;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-24T18:28:16.877

简单的方法使用检查所有变量是否为真。例子：

```
public class FtpFile {

    public String host;
    public String port;
    public String fileName;
    public String path;
    public String username;
    public String password;

    /**
     * Override Equals()
     */
    @Override
    public boolean equals(Object o) {
        try {
            if (o == null || getClass() != o.getClass())
                return false;

            FtpFile p = (FtpFile) o;
            return ((host.equals(p.host))
                    && (port.equals(p.port))
                    && (path.equals(p.path))
                    && (username.equals(p.username))
                    && (password.equals(p.password)));
        } catch (Exception ex) {
            return false;
        }
    }
} 
```

# flash - 一对一视频聊天Flash教程

> ID：15885993
> 
> 赞同：1
> 
> 时间：2013-04-08T18:11:38.943
> 
> 标签：flash, videochat

我正在构建一个用于在线面试的网络应用程序。我需要在其中实现一对一的视频聊天。我是 Flash 和视频方面的菜鸟。任何人都可以指出一些好的教程。

注意：我正在使用**linux**平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:02:33.927

[Wowza Media Server](http://www.wowza.com/)安装包中有一个很好的工作示例。下载 Linux 版本并查看示例文件夹。此聊天也可以与其他媒体服务器一起运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T21:29:55.050

尝试使用 red5 媒体服务器。它有一些内置的聊天选项，其他示例应用程序是免费提供的。

# jms - 在 Weblogic 10.3.5 中设置 MDB 以使用 JMS 消息

> ID：15885995
> 
> 赞同：0
> 
> 时间：2013-04-08T18:11:52.390
> 
> 标签：jms, weblogic, installation, message-driven-bean, tibco

我正在尝试设置应用程序的一部分，该应用程序使用 MDB 来使用来自 JMS 队列的消息。我查看了 Oracle 文档，但似乎无法理解。互联网上的示例似乎适用于您的 JMS 服务器与您正在使用的 weblogic 服务器相同的情况，但在我的情况下，有一个单独的服务器。

我发现这篇文章[Weblogic EJB connection to external Tibco EMS JMS Queue](https://stackoverflow.com/questions/6818018/weblogic-ejb-connection-to-external-tibco-ems-jms-queue)给出了广泛的笔触，但似乎是为有经验的 weblogic 用户编写的更多。

特别是这里的链接是我遇到麻烦的地方：

> > 创建具有所有正常详细信息的外部服务器（目标和连接工厂的本地/远程 JNDI 查找名称）。

不知道该怎么做。

> > 创建与远程 EMS 用户同名的本地 WL 用户，包括密码。

我不能这样做，因为我的密码少于 8 个字符

> > 创建 ejb 凭证映射（不是安全凭证映射）
> > 
> > ```
> > do this by clicking on the relevant deployment, click on the relevant ejb name in the list, then Security tab then Credentials Mapping tab.
> > add the same name for WLS and Remote users (password doesn't seem to be necessary here). 
> > ```

在安全下，我看到应用程序/模块范围选项卡和下面的角色/策略。

谁能提供有关如何在 Weblogic 10.3.5 中设置简单 MDB 的更详细步骤，该 MDB 使用来自外部服务器（Tibco EMS）的 JMS 消息？

我有一个 ldap url、一个选择器（用于过滤掉不需要的消息，并非完全必要）、用户名和密码、队列名称、EMS 服务器 url（指定端口）、连接工厂 ldap。我该如何处理这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:53:28.430

您可以在 weblogic 中配置外部服务器，在外部服务器内部，您可以提供连接工厂和目标详细信息。创建这些 weblogic 管理对象需要您的用户名、密码和队列名称。

[Weblogic国外服务器配置](http://docs.oracle.com/cd/E28271_01/apirefs.1111/e13952/taskhelp/jms_modules/foreign_servers/ConfigureForeignServers.html)

在创建目标时，您可以提供本地 jndi 名称，您可以在 MDB 激活配置中使用该名称进行连接。