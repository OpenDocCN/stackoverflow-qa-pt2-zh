# StackOverflow 问答 15766000-15766999

# asp.net - IOS 应用程序无法 HTTP 发布到 aspx 站点上的表单

> ID：15766002
> 
> 赞同：2
> 
> 时间：2013-04-02T13:56:02.957
> 
> 标签：asp.net, ios, login, http-post, viewstate

我正在创建一个应用程序来登录网站，而不是使用使用 HTTP 发布的浏览器。我正在使用 AFHTTPClient 来处理我的所有帖子参数。

使用 Charles Proxy 并通过 Chrome 正常访问该站点，我能够获取帖子字符串的所有帖子参数。不幸的是，每次我发帖登录时，Charles 代理都会显示一个 __ViewState 正在传递，并且每次登录都会改变。我知道视图状态作为隐藏的表单项存在，因此如果用户在浏览器中被重定向回表单，则不必再次输入所有字段。

我的问题是，如何在每次登录时捕获 __viewstate 字符串并通过 post 字符串传递它？存储旧的 __viewstate 并在我每次登录时使用它会导致服务器发回登录错误。

ps 我无权访问服务器实现。

任何帮助深表感谢！

# c# - 从根节点 XML 读取值

> ID：15766006
> 
> 赞同：4
> 
> 时间：2013-04-02T13:56:17.507
> 
> 标签：c#, visual-studio-2010, c#-4.0

我有这个 XML：A 型：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <nfeProc versao="2.00" xmlns="http://www.portalfiscal.inf.br/nfe">
 </nfeProc> 
```

B型：

```
<?xml version="1.0" encoding="UTF-8"?>
<cancCTe xmlns="http://www.portalfiscal.inf.br/cte" versao="1.04"> 
</cancCTe> 
```

C型：

```
<?xml version="1.0" encoding="UTF-8"?>
<cteProc xmlns="http://www.portalfiscal.inf.br/cte" versao="1.04">
</cteProc> 
```

我已经阅读了根节点：

```
 XmlDocument xmlDoc = new XmlDocument();
 xmlDoc.Load(nomear);
 XmlNodeList ml = xmlDoc.GetElementsByTagName("*");
 XmlNode primer = xmlDoc.DocumentElement;
 exti = primer.Name; 
```

使用此代码，我阅读了`nfeProc`、`cancTE`和`cteProc`。

如何读取 的值`versao`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:59:32.917

当您使用**C# 3.5 或更高版本**时，您可以利用 LINQ to XML（您的标签说您使用的是 C# 4.0，所以它肯定适用）

```
//your xml contents. I've just escaped " symbols, so I can use it as literal
string str = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n "+
                 "<nfeProc versao=\"2.00\" xmlns=\"http://www" +
                 ".portalfiscal.inf.br/nfe\">\r\n </nfeProc>";

var xml = XDocument.Parse(str);

Console.WriteLine(xml.Root.Attribute("versao").Value); 
```

印刷：

```
2.00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:59:52.080

请参阅 GetAttribute 方法或 Attributes 属性的文档。那里也有一个例子

[http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.getattribute(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.getattribute(v=vs.71).aspx) [http://msdn.microsoft.com/en-us/library/system。 xml.xmlelement.attributes(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.attributes(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:00:10.607

尝试这个

```
primer.Attributes["versao"].Value 
```

您可能还会发现这很有帮助：

```
System.Xml.Linq.XDocument doc = System.Xml.Linq.XDocument.Load("PATH TO YOUR .XML");
string value = doc.Element("nfeProc").Attribute("versao").Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:01:17.080

这是代码：

```
string attribute = primer.Attributes["versao"].Value; 
```

# opencv - 可以删除 opencv 或 scikit 图像中的 Skeleton 小分支吗？

> ID：15766012
> 
> 赞同：4
> 
> 时间：2013-04-02T13:56:26.607
> 
> 标签：opencv, image-processing, mathematical-morphology, scikit-image

在骨架过程中是否可以删除小分支？

如这张图片： http: [//felix.abecassis.me/wp-content/uploads/2011/09/skel_opencv.png](http://felix.abecassis.me/wp-content/uploads/2011/09/skel_opencv.png)

只有 O 字母是完美的，但不是所有其他字母。

在过程中或之后有办法删除这个小分支吗？我使用 python opencv，但也可以使用 pymorph 或 scikit-image 的解决方案。这是我用于骨架化的代码： [代码](https://stackoverflow.com/questions/15135676/problems-during-skeletonization-image-for-extracting-contours)

原图： http: [//felix.abecassis.me/wp-content/uploads/2011/09/opencv.png](http://felix.abecassis.me/wp-content/uploads/2011/09/opencv.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:03:22.773

这是[scikit-image](http://scikit-image.org)的结果：

```
from skimage import io
from skimage import morphology

image = io.imread('opencv.png')
out = morphology.skeletonize(image > 0) 
```

![skimage骨架](https://i.stack.imgur.com/Cn83J.jpg)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-02-01T18:35:47.617

Scikit 图像具有骨架化和细化，可能有助于完成您想要的。

lee 版本的skeletonize 比单独的skeleton 更有效地细化了边缘骨架特征。

Thin 使您能够对图像进行部分骨架化。您可以先进行部分变薄，然后进行扩张或打开操作，以获得接近形态修剪的东西（[https://en.wikipedia.org/wiki/Pruning_(morphology)](https://en.wikipedia.org/wiki/Pruning_(morphology))）。

这里有 scikit 骨架工具的示例：[https ://scikit-image.org/docs/dev/auto_examples/edges/plot_skeleton.html](https://scikit-image.org/docs/dev/auto_examples/edges/plot_skeleton.html)

```
from skimage.morphology import skeletonize
from skimage import data
import matplotlib.pyplot as plt
from skimage.util import invert

# Invert the horse image
image = invert(data.horse())

# perform skeletonization
skeleton = skeletonize(image)
skeleton_lee = skeletonize(image, method='lee')

# display results
fig, axes = plt.subplots(nrows=1, ncols=3, figsize=(8, 4),
                         sharex=True, sharey=True)

ax = axes.ravel()

ax[0].imshow(image, cmap=plt.cm.gray)
ax[0].axis('off')
ax[0].set_title('original', fontsize=20)

ax[1].imshow(skeleton, cmap=plt.cm.gray)
ax[1].axis('off')
ax[1].set_title('skeleton', fontsize=20)

ax[2].imshow(skeleton_lee, cmap=plt.cm.gray)
ax[2].axis('off')
ax[2].set_title('skeleton lee', fontsize=20)

fig.tight_layout()
plt.show() 
```

[![在此处输入图像描述](https://i.stack.imgur.com/QKfSh.png)](https://i.stack.imgur.com/QKfSh.png)

# binding - Xamarin：使用本机库

> ID：15766014
> 
> 赞同：6
> 
> 时间：2013-04-02T13:56:30.880
> 
> 标签：binding, native, xamarin

1) 如果 iOS 和 Android 原生库可用，为了使用该库开发跨平台应用程序，应该采取哪些适当、高效且更容易的步骤？绑定Android库还是iOS？如果我们绑定 Android 本机库，我们能否在 Xamarin.iOS 应用程序中使用这个绑定的库，反之亦然？

2) 如果有可用的 C++ 库，是否可以使用该库来开发跨平台应用程序？

提前致谢！

（只是 Xamarin 的初学者，如果问题似乎不合适，请原谅）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:43:49.543

1.  原生 iOS 和 Android 库通常是完全不同的（iOS 库通常是用 Objective-C 编写的，而 Android 库是用 Java 编写的），因此它们的绑定会有所不同。即使 API 相同，Objective-C 和 Java 之间的差异也足以使绑定也必须不同。

2.  是的，可以在 iOS 和 Android 项目中使用 C++，但机制不同。这里有几个选项：

    *   使用[SWIG](http://www.swig.org/)等工具为 C++ 库创建托管绑定。[这](http://blog.reblochon.org/2013/01/c-bindings-for-monotouch-using-swig.html)也是一本有趣的读物。

    *   创建一个包装 C++ 库的 C 库，然后使用托管代码中可用的标准 P/Invoke 机制与 C 库进行交互。

# java - Java中的空语句（不是for循环）有什么用？

> ID：15766015
> 
> 赞同：-3
> 
> 时间：2013-04-02T13:56:31.473
> 
> 标签：java

我正在查看 Eclipse 代码样式，以修改格式，并遇到了这个问题：

```
void foo()
{
    ;;
    label: do
    {
    } while (false);
} 
```

foo() 中的第一行（“;;”）是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:58:44.027

空无一人。它只是表明，在这之前`label`可能有一些东西。但是正如名称*空语句*已经说过的那样：它是空的，所以没有什么要计算的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:03:41.187

第一行

```
;; 
```

是一个空语句，它不会影响代码，因为 java 使用 ; 终止线路。

和

```
for(;;) 
```

控制进入无限循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:05:30.113

从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.6)：

**空语句什么都不做。**

```
EmptyStatement:
   ; 
```

你有 2 个空语句，什么都不做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:59:40.543

`;;`什么都没有（什么都不会被计算，比如 2 个空行）

`for (;;)`意味着无限循环

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T14:01:03.210

嗯，这是一个模板。我猜这行必须用局部变量声明来完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T14:02:58.240

空的声明。意思是：什么都不做。它很少有用，但与任何其他语句一样，它可以用于`if`：

```
if(something)
    ;
else
    doSomething(); 
```

或`while`：

```
while(a[i++] != 0)
    ; 
```

怎么看都不是什么好风格。

# c++ - 指定 QMenu 的左上角位置

> ID：15766016
> 
> 赞同：2
> 
> 时间：2013-04-02T13:56:37.060
> 
> 标签：c++, qt, mouse, qmenu

单击鼠标后我有 QPoint **pos以及此时要显示的内容 QMenu。****但是我会在QMenu**的左上角显示什么菜单。和

```
menu.exec(pos); 
```

显示菜单，使得**pos**是它的左边缘中点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:04:15.237

尝试像这样使用**mapToGlobal**：

```
//menu.exec(pos);
menu.exec(mapToGlobal(pos)); 
```

# c++ - 是否每个循环都会评估基于 C++11 范围的 for 循环条件？

> ID：15766020
> 
> 赞同：55
> 
> 时间：2013-04-02T13:56:55.597
> 
> 标签：c++, performance, for-loop, c++11, foreach

```
for(auto& entity : memoryManager.getItems()) entity->update(mFrameTime); 
```

如果 memoryManager 包含 1000 个项目，`memoryManager.getItems()`在循环开始时会调用 1000 次还是仅调用一次？

编译器是否使用 -O2（或 -O3）运行任何优化？

（`memoryManager.getItems()`返回一个`std::vector<Entity*>&`）

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-02T13:59:45.213

它只评估一次。该标准将基于范围的`for`语句定义为等效于：

```
{
    auto && __range = range-init;
    for ( auto __begin = begin-expr, __end = end-expr; __begin != __end; ++__begin ) {
        for-range-declaration = *__begin;
        statement
    }
} 
```

`range-init`表达式（用括号括起来）或括号初始化列表在哪里`:`

# javascript - 将元素插入范围会清除 Chrome 中的选择

> ID：15766023
> 
> 赞同：4
> 
> 时间：2013-04-02T13:56:58.733
> 
> 标签：javascript, range, selection

我正在尝试在选择的开头插入一个标记（我用来在选择的顶部放置一个元素）。

我在 Chrome 中遇到了一个奇怪的情况，当`range.insertNode`执行该行时，选择被清除：

```
$(document).on('mouseup', function (e) {
  var range = window.getSelection().getRangeAt(0).cloneRange();
  range.collapse(true);
  var markerElement = document.createElement("span");
  markerElement.appendChild(document.createTextNode("\ufeff"));
  // this will sometimes make the selection disappear in Chrome
  range.insertNode(markerElement);
  // make sure the marker is removed
  setTimeout(function(){
   markerElement.parentNode.removeChild(markerElement);
  }, 250);
}); 
```

这是一个`jsbin`可以用来尝试的示例：http: [//jsbin.com/agojib/1/edit](http://jsbin.com/agojib/1/edit)

如果您选择一个**字母**，它将清除选择。任何其他选择都可以。

**注意：**我正在使用[如何将元素放置在用户文本选择旁边？](https://stackoverflow.com/questions/1589721/how-can-i-position-an-element-next-to-user-text-selection)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T21:19:58.513

好的，我想我明白了：http: [//jsbin.com/agojib/7/edit](http://jsbin.com/agojib/7/edit)

```
$(document).on('mouseup', function (e) {
  var range = window.getSelection().getRangeAt(0);
  // clone the current range
  var clone = range.cloneRange();
  range.collapse(true);
  var markerElement = document.createElement("span");
  markerElement.appendChild(document.createTextNode("\ufeff"));
  // insert the marker in the first range
  range.insertNode(markerElement);
  // retrieve the selection
  var selection = window.getSelection();
  // remove all the ranges
  selection.removeAllRanges();
  // add the previously cloned range
  selection.addRange(clone);
  // make sure the marker is removed
  setTimeout(function(){
   markerElement.parentNode.removeChild(markerElement);
  }, 250);
}); 
```

解决方案基本上是克隆范围，在第一个范围内插入标记并使用克隆的范围重新选择以前选择的文本。

# asp.net-mvc-4 - 没有 JS 框架的 MVC 4 SPA？

> ID：15766028
> 
> 赞同：3
> 
> 时间：2013-04-02T13:57:16.257
> 
> 标签：asp.net-mvc-4, single-page-application

我花了几乎一整天的时间研究将 SPA 与 MVC 4 结合使用的可能性。我遇到了一个接一个的模板和一个接一个的 JS 框架。人们正在使用 Knockout、Backbone.js、Breeze.js 和许多其他框架。似乎很多人都在使用 MVVM 来显示数据。

但我真正想要的是，是否有一种方法可以开发**不**依赖于多个 JS 框架的 SPA 来使其工作。是否有一些最小的设置使用最少的插件和框架来使 SPA 工作？我注意到我们可以只使用 History.js，但是我们需要某种路由抽象，对吗？那么如果我们只想设置简单的路由（浏览器历史管理）而不是 MVVM 怎么办？有这样做的选择吗？

（请让我知道我是否可以更好地表达我的问题或者我是否可以改进它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:17:50.673

您可以在页面加载时配置 sammy.js 或 history.js 并动态加载视图...

```
 sammy.get('#/(.*)', function (context) {
      var url = this.params['splat'];
      $("#main").load(url);
 }); 
```

例如，如果我们加载 localhost:333/Home/ContactUs... 它将读取联系我们视图并动态加载内容。

如果您想为 SPA 选择 js 框架，可以比较以下其他库。我认为 Angular 涵盖了 spa 作为单个库的所有要求。 [http://blog.stevensanderson.com/2012/08/01/rich-javascript-applications-the-seven-frameworks-throne-of-js-2012/](http://blog.stevensanderson.com/2012/08/01/rich-javascript-applications-the-seven-frameworks-throne-of-js-2012/)

# php - 肥皂调用参数php

> ID：15766029
> 
> 赞同：0
> 
> 时间：2013-04-02T13:57:16.470
> 
> 标签：php, soap, parameters, object-reference

我有一个关于 php 和 soap 调用的问题。我必须用两个参数调用一个soap函数：sessionId和Targa 首先我准备了我的paramArray，如下所示：

```
$targaParam = array(
    'sessionId' => $session,
    'Targa' => 'EG031NX'
    ); 
```

有一个错误，所以我阅读了 wsdl：

```
<s:element name="GetRTCompletoDaTargaMinInfocarList">
   <s:complexType>
      <s:sequence>
         <s:element minOccurs="0" maxOccurs="1" name="sessionId" type="s:string"/>
         <s:element minOccurs="0" maxOccurs="1" name="context" type="tns:RTDaTargaParamContext"/>
      </s:sequence>
   </s:complexType>
</s:element> 
```

所以我改变了我的数组：

```
$targaParam = array(
    'sessionId' => $session,
    'context' => 'EG031NX'
    ); 
```

没有错误，但如果我打印调用结果，我有一个`Object reference not set to an instance of an object.`

`'context'`元素的类型是`RTDaTargaParamContext`，我贴上代码：

```
<s:complexType name="RTDaTargaParamContext">
   <s:sequence>
      <s:element minOccurs="0" maxOccurs="1" name="Targa" type="s:string"/>
   </s:sequence>
</s:complexType> 
```

我必须改变将参数传递给函数的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:58:36.997

解决方案：

```
$targaParam = array(
  'sessionId' => $session,
  'context' => array('Targa' => 'EG031NX')
); 
```

# vb.net - rdlc CountDistinct 其中状态 = 1

> ID：15766032
> 
> 赞同：2
> 
> 时间：2013-04-02T13:57:21.933
> 
> 标签：vb.net, report, rdlc

我想从`where`有条件的数据集中计算不同的值。

这是我所做的：

```
CountDistinct(IIF(Fields!Status.Value = 1, Count(Fields!Id.Value),nothing)) 
```

或者

```
IIF(Fields!Status.Value = 1, Count(Fields!Id.Value),nothing) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-09T19:12:21.007

```
sum(IIF(Fields!Status.Value = 1, 1,0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-30T03:23:18.387

当 Id 字段中没有重复值时，Alex_Kr 提供的答案将起作用[。](https://stackoverflow.com/a/18705278/5407188)

通过使用 CountDistinct 而不是 Count，我假设需要删除重复项。下面的代码将与 Count Distinct 一起使用，

```
CountDistinct(IIF(Fields!Status.Value = 1, Fields!Id.Value,nothing)) 
```

此代码将对状态为 1 的 Id 值列表执行 CountDistinct 操作。

# linux - SIGKILL 信号处理

> ID：15766036
> 
> 赞同：6
> 
> 时间：2013-04-02T13:57:44.677
> 
> 标签：linux, unix, posix, sigkill, posix-api

如果一个 linux 进程正在等待 I/O（即它处于`SLEEP`状态）并且`SIGKILL`针对它发出了一个信号，那么在终止（`STOPPED`状态）时它会通过`RUNNING`还是`READY`状态？

换句话说，对于一个处理系统中断的进程，例如由 生成的中断，`SIGKILL`是否需要通过`RUNNING`或`READY`state ？

知道在正常情况下一个进程可以处理来自内核的中断，并且知道`SIGKILL`杀死一个无响应的信号的目的非常矛盾，我怀疑对被杀死的进程给予了多少控制，如果有的话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T14:32:30.020

信号由内核“传递”给进程，因此将信号从 processA 发送到 processB 使用内核。传递 SIGKILL 时，内核不允许进程（用户模式）进行任何活动，特别是进程中断：atexit 调用，_exit。没有。该进程被系统简单地销毁。这涉及内核模式中的一些活动。缓冲数据丢失。SYSV 信号量和其他内核持久内存对象留在内存中。这可能是一个真正的混乱。

如果内核内存中的某些内容导致挂起，您可以使用 linux 中的 sysrq 接口：

[http://tldp.org/HOWTO/Remote-Serial-Console-HOWTO/security-sysrq.html](http://tldp.org/HOWTO/Remote-Serial-Console-HOWTO/security-sysrq.html)

--执行任何你能得到的有序关机的外观。

这就是为什么使用 SIGKILL 绝对是最后的手段，因为你不知道你在破坏什么。它不会修复所有挂起。

你到底在做什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:01:06.337

除了吉姆麦克纳马拉的回答：

SIGKILL (kill -9) 无法处理。

[有关更多信息，请参阅https://stackoverflow.com/a/2541618/1456519](https://stackoverflow.com/a/2541618/1456519)上的答案。

# javascript - 停止 .net 表单提交

> ID：15766047
> 
> 赞同：0
> 
> 时间：2013-04-02T13:58:18.683
> 
> 标签：javascript, jquery, html

我如何阻止表单提交，因为下面的按钮在我的 .net 表单上不起作用，因为按钮已经有一个内联点击事件。如何使下面的事件覆盖按钮上的所有其他功能。

```
$(document).ready(function () {

    $('#myBtn').click(function (event) {

        //event.preventDefault();

        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:01:26.837

当然，您只会使用[**submit()**](http://api.jquery.com/submit/)而不是`click()`：

```
$('#form').submit(function (event) {    
    event.preventDefault();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:03:50.687

像这样？

```
$('#myBtn').onclick = null;
$('#myBtn').click(function(e) { 
    e.preventDefault();
    return false; 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:10:45.270

如果您使用母版页，则必须调用客户端 ID 而不是实际 ID。

```
$(document).ready(function () {    
    $('#<%=myBtn.ClientID%>').click(function () {   
        return false;
    });    
}); 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:10:47.180

你在 ASP 方面试过吗？

```
<asp:Button ID="myBtn" UseSubmitBehavior="false"></asp:Button> 
```

或者通过 jQuery 覆盖表单的提交事件？

```
$("form").submit(function(e) { return false; }); 
```

如果此行为不是预期的（因为您还有其他要发布的按钮），请尝试以下方法之一：

```
$("#myBtn").removeAttr("onclick");
$("#myBtn").attr("onclick", "return false;");
$("#myBtn").off("click");
$("#myBtn").click(function(e) { e.preventDefault(); }); 
```

然后你可以在它上面绑定你自己的点击事件。

# javascript - Knockout.js 嵌套 foreach

> ID：15766050
> 
> 赞同：1
> 
> 时间：2013-04-02T13:58:23.363
> 
> 标签：javascript, html, knockout.js

我有一个键值对 (KVP) 列表，我想在每个表行中列出 2 个 KVP。根据我有限的 Knockout 知识，我认为如果我有一个数组数组，那么我可以使用嵌套`foreach`来实现这一点。

**jsfiddle 代码** [在这里](http://jsfiddle.net/UmzWe/)。

但这并没有按预期输出表格单元格。怎么了？

**编辑：更新小提琴链接**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:12:21.977

采用：
`KVPairs: ko.observableArray(filter.KVPairs)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:16:28.233

好像没看懂你的问题。但是，如果您对如何显示电话号码感到好奇，我会保留它。

* * *

你的 foreach 应该在 tbody 标签上：http: [//jsfiddle.net/Vcwv6/4/](http://jsfiddle.net/Vcwv6/4/)

另外，我添加了一个虚拟元素。

```
<!-- ko foreach: phones -->
<td>
    <select data-bind="value: type, options: $root.types"></select>
    <input data-bind='value: number' />
</td>
<!-- /ko --> 
```

# xpages - onChange 事件的部分更新没有得到正确的值

> ID：15766055
> 
> 赞同：1
> 
> 时间：2013-04-02T13:58:31.717
> 
> 标签：xpages, onchange

我在 xpage 中构建了一个搜索功能，用户可以在其中从列表框和组合框中选择值，而 ftsearch 查询由这些值组成。因此，当我更改组合框的值时，会触发 onChange 事件，并对结果视图进行部分更新。问题是视图根据onChange之前组合框的先前值显示结果。就像视图中的结果总是落后一个变化。

我在事件中添加了 try/catch，但没有发生异常。这似乎是一种非常奇怪的行为。有没有人经历过这样的事情？

我会很感激任何想法和方向，因为我现在对问题可能是什么感到困惑。

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:36:26.107

我只是以一种非常简单的方式试了一下，它对我有用。这是我所拥有的：

1.  确保我的数据库被 ft 索引！
2.  创建一个 id = "viewPanel1" 的 viewPanel
3.  将 viewPanel 链接到视图数据源
4.  使用以下代码为我的 viewPanel 创建一个计算的搜索属性：

    requestScope.get("fts");

5.  创建一个组合框（上图）视图面板

6.  将组合绑定到我的 requestScope 变量“fts”
7.  用适当的值填充组合的选项列表
8.  让组合的 onchange 事件执行部分更新并将其链接到我的 viewPanel（ID：viewPanel1）

在我的情况下，我的视图中有一个测试文档，其主题字段具有“sub 1”、“sub 2”、...、“sub 6”等值。所以我让我的组合为我提供选项“1”...“6”。

如果我想更具体地使用我的 ft 搜索字符串，我可以在 viewPanel 的搜索属性中像这样构建它（步骤 4）：

```
if(requestScope.containsKey("fts") && requestScope.get("fts")!=""){
    "Sub " + requestScope.get("fts");
} 
```

就是这样 - 工作。

如果我把你的问题弄错了，请告诉我们。在这种情况下，您需要更具体地说明您正在尝试做什么以及到目前为止您尝试了什么。

**编辑：**
根据您的评论，我在我的组合中添加了一个列表框。我看到 listBox 本身并没有做任何坏事，但我当然必须注意不要让两者互相干扰。所以这就是我为解决这个问题所做的事情：

1.  将我的组合框绑定到另一个名为“ *ftsCombo* ”的 requestScope var
2.  将我的 listBox 绑定到“ *ftsList* ”
3.  两个控件具有相同的选项列表（见上文；当然您可以使用不同的选项，我只是懒得想不同的值...），并且它们正在执行部分更新 onchange
4.  为了能够控制结果，我在 viewPanel (id = " *tgtPanel* ") 周围创建了一个命名面板，并将部分更新规则更改为以面板为目标
5.  在视图上方的面板中，我创建了 2 个计算字段，每个都绑定到我的一个 requestScope 变量（*ftsCombo* / *ftsList*），以便我看到触发 onchange 后范围内的内容
6.  在这两个 onchange 事件中，我还编写了一小段 SSJS 代码来清除“另一个”变量，这样两者就不会相互影响：

（组合变化：）

```
requestScope.remove("ftsList"); 
```

（列表更改：）

```
requestScope.remove("ftsCombo"); 
```

最后将视图的计算搜索属性更改为：

```
if(requestScope.containsKey("ftsCombo") && requestScope.get("ftsCombo")!=""){
return "Sub " + requestScope.get("ftsCombo");
}
if(requestScope.containsKey("ftsList") && requestScope.get("ftsList")!=""){
 return "Sub " + requestScope.get("ftsList");
} 
```

所以现在我可以使用组合*或*列表来应用过滤器

# java - 观察者、可观察和可运行。为什么同步块丢失监视器？

> ID：15766056
> 
> 赞同：2
> 
> 时间：2013-04-02T13:58:32.443
> 
> 标签：java, observable, observers, synchronized-block

我正在尝试将类用作 Observer 和 Observable。此类将作为线程运行。在 run() 方法中，线程将等待并在获取事件后通知线程。有示例代码：

```
public class Runner {

    public static void main(String[] args) {
        MyThread mt = new MyThread();
        Controller c = new Controller();
        mt.addObserver(c);
        c.addObserver(mt);
        Thread t = new Thread(mt);
        t.start();
    }

}

public class MyThread extends Observable implements Observer, Runnable {

    static private Integer op = 0;

    public void run() {
      synchronized (this) {
        while (true) {
          op++;
          System.out.println(op + " Thread started");
          super.setChanged();
          super.notifyObservers(new Object());
          op++;
          System.out.println(op + " Thread send event");
          try {
            op++;
            System.out.println(op + " Thread wait");
            this.wait();
          } catch (InterruptedException e) {
            e.printStackTrace();
          }
        }
      }
    }

    @Override
    public void update(Observable arg0, Object arg1) {
      op++;
      System.out.println(op + " Thread got event");
      synchronized (this) {
        op++;
        System.out.println(op + " We are in synchronized block!");
        this.notify();
      }
    }

}

public class Controller extends Observable implements Observer {

  public void update(Observable arg0, Object arg1) {
    System.out.println("Controller get and send event");
    super.setChanged();
    super.notifyObservers(new Object());
  }

} 
```

得到的输出是：

```
1 Thread started
Controller get and send event
2 Thread got event
3 We are in synchronized block!
4 Thread send event
5 Thread wait 
```

并且线程保持锁定。预期输出：

```
1 Thread started
Controller get and send event
2 Thread got event
3 Thread send event
4 Thread wait
5 We are in synchronized block! 
```

怎么了？为什么我在监视器释放之前进入同步块？PS 我有一个想法，问题是将观察者添加到 MyThread 对象，我可能会将观察者添加到 Thread 对象吗？但我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:14:45.517

好吧，我认为您遇到的主要问题是`synchronized`关键字类似于可重入锁（[http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)）。

这意味着，当您在您`MyThread`的`run`方法中时，您正在通知`Controller`. 然后这个调用`update`你`MyThread`的进入`synchronized`块（因为它是可重入的）并完成这个方法。之后，该`Controller.update`方法返回并且您的方法的其余部分`MyThread.run`继续，因此卡在`this.wait()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:18:38.600

设置断点并单步执行/调试应用程序将帮助您找到导致此行为的原因。原因是`MyThread.update`在线程开始等待之前调用，并且没有其他线程唤醒这个线程。您将需要第二个线程。

在`MyThread.run`方法中，您`Controller`使用以下行通知对象： super.notifyObservers(new Object());

这会调用对象 的`update`方法，然后对象的方法会调用（通过通知它）打印同步块消息的对象的方法。`Controller``update``MyThread`

然后`notifyObservers`你的调用`MyThread.run`返回，然后你才能调用该`wait`方法。

为了达到您的预期结果，您需要第二个线程`MyThread`在您调用 wait 后通知您的对象。

使用主线程的最简单示例需要进行以下更改：

删除通知`Controller.update`：

```
public class Controller extends Observable implements Observer {
    public void update(Observable arg0, Object arg1) {
        System.out.println("Controller get and send event");
        super.setChanged();
        // super.notifyObservers(new Object());
    }
} 
```

而是在启动后添加通知`MyThread`，这是从主线程调用的。

```
public static void main(String[] args) {
    MyThread mt = new MyThread();
    Controller c = new Controller();
    mt.addObserver(c);
    c.addObserver(mt);
    Thread t = new Thread(mt);
    t.start();

    //add the following:

    try {
        Thread.sleep(1000); //sleep for a while to make sure MyThread is waiting
    } catch (InterruptedException ex) {
        Logger.getLogger(Runner.class.getName()).log(Level.SEVERE, null, ex);
    }
    c.notifyObservers(); //notify MyThread
} 
```

这将产生以下结果：

```
1 Thread started
Controller get and send event
2 Thread send event
3 Thread wait
4 Thread got event
5 We are in synchronized block!
6 Thread started
Controller get and send event
7 Thread send event
8 Thread wait 
```

如您所见，`MyThread.run`收到通知后继续

# outlook - 使用特定的发件人地址发送 Outlook._MailItem 电子邮件

> ID：15766065
> 
> 赞同：1
> 
> 时间：2013-04-02T13:58:53.013
> 
> 标签：outlook, mailitem

有什么方法可以在以编程方式（使用 c#）发送 Outlook._MailItem 电子邮件时覆盖发件人电子邮件地址？以下是非工作代码。

```
 foreach (Outlook.Account account in accounts)
        {
            if (account.SmtpAddress == "me@evilEmpire.com")
            {
                olkMail1.SendUsingAccount = account;

                Outlook.AddressEntry newEntry = null; //Not working.
                newEntry.Address = "miniMe@evilEmpire.com";

                olkMail1.Sender = newEntry;

                ((Outlook._MailItem)olkMail1).Send();

                break;
            }
        } 
```

# ios - 我的 iOS 应用程序中的方向问题

> ID：15766067
> 
> 赞同：0
> 
> 时间：2013-04-02T13:59:02.680
> 
> 标签：ios, xcode, ipad, orientation

我有一个旧的 iPad 应用程序，它仅以横向显示。我正在尝试在 iOS 6 中运行相同的应用程序，并且无论视图控制器方向设置如何，该应用程序都以纵向模式启动。我知道 iOS 6\. 有如下变化。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight) || (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
}

- (BOOL)shouldAutorotate {

    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskLandscape;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {

    return UIInterfaceOrientationLandscapeLeft;
} 
```

虽然我在代码中有这些行，但它似乎并没有改变方向。我还注意到主窗口 xib 的窗口处于纵向模式。是否可以更改窗口的方向或者这是由于其他原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:23:03.853

info.plist 文件中有一个用于支持方向的值。你改变了吗？

[http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:29:34.967

选择代码项目，您将在 Summery 选项卡上获得 4 个 iPad 图标
选择您想要的方向.. 这也将修改您的 info.plist

# ubuntu - pycharm 滚动标签而不是文档

> ID：15766070
> 
> 赞同：2
> 
> 时间：2013-04-02T13:59:14.280
> 
> 标签：ubuntu, pycharm

我已经在 ubuntu 12.10 x64 上安装了 pycharm 125.92 openjdk 1.7.0_15 所以，问题是当我打开文档并尝试滚动它时，pycharm 打开最近的文档并滚动它们。任何建议为什么会发生？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:21:29.580

这是一个[已知的错误](http://youtrack.jetbrains.com/issue/IDEA-101256)。关注 YouTrack 问题以获取更新。

**解决方法：**

> 从默认键映射 ( `File`| `Settings`| `Keymap`) 创建您自己的自定义键映射。`Main menu`然后从|删除鼠标快捷方式 `Navigate`| **Back** / **Forward** ，让它们只分配给`Ctrl`++和 `Alt`++ 。`Left``Ctrl``Alt``Right`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:28:42.613

请使用 Oracle JRE 而不是 OpenJDK。来自： http: [//www.jetbrains.com/pycharm/download/index.html](http://www.jetbrains.com/pycharm/download/index.html) “Oracle JRE 1.6+（不支持 OpenJDK）”

# actionscript-3 - 无法在 AIR 中加载的 SWF 中的文本字段上进行复制/粘贴

> ID：15766073
> 
> 赞同：6
> 
> 时间：2013-04-02T13:59:19.003
> 
> 标签：actionscript-3, flash, actionscript, air, actionscript-2

我的 AIR 应用程序正在加载一个 SWF 文件，其中包含一个用于输入的文本字段。我可以在文本字段中输入，但复制和粘贴被破坏。当我尝试使用键盘快捷键粘贴某些内容时，文本字段变成这样：

![在此处输入图像描述](https://i.stack.imgur.com/CoCS6.png)

（这不是“T”）。

经过一系列的复制/粘贴后，它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/Nn5m8.png)

当我右键单击文本字段时，没有任何反应，没有出现带有复制/粘贴选项的上下文菜单。

正在加载的 SWF 位于 AS2 中（实际上不可能将其移植到 AS3，因为其中的代码非常庞大和复杂）。我无法替换那个 SWF，它对我的​​项目具有极高的价值。除了这个麻烦，SWF 工作正常。也许我可以更改加载程序的 AS3 设置中的一些配置常量？

出于测试目的，我创建了两个 .flas，一个在 AS2 中并包含一个文本字段，另一个在 AS3 中并加载文本字段。[您可以从此处](https://s3.amazonaws.com/pleoso/TextFieldLoader.zip)下载存档中的 .flas 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T18:21:47.663

这是肮脏的黑客，但它的工作原理。:) “即时”将您的 SWF 从 AVM1 转换为 AVM2。使用 ForcibleLoader [https://code.google.com/p/as3-classes/source/browse/trunk/org/lzyy/util/ForcibleLoader.as](https://code.google.com/p/as3-classes/source/browse/trunk/org/lzyy/util/ForcibleLoader.as)

在 loader.fla 中：

```
var loader:Loader = Loader(addChild(new Loader()));
var fLoader:ForcibleLoader = new ForcibleLoader(loader);
fLoader.load(new URLRequest('tf.swf')); 
```

在 ForcibleLoader.as 添加`import flash.system.LoaderContext;`

和

```
var lc:LoaderContext = new LoaderContext();
lc.allowCodeImport = true;
loader.loadBytes(inputBytes, lc); 
```

反而

`loader.loadBytes(inputBytes);`

排队~75

# php - 采埃孚 | 采埃孚新产品 | 自动加载器为什么似乎不起作用？

> ID：15766075
> 
> 赞同：0
> 
> 时间：2013-04-02T13:59:25.877
> 
> 标签：php, zend-framework, zend-framework2

下载的版本是ZF 2.1

我在我的应用程序的基本文件中输入了以下代码，它似乎不正确：

```
$path   =   dirname(__FILE__) . DIRECTORY_SEPARATOR . 'library' . DIRECTORY_SEPARATOR . 'Zend';
ini_set(
    'include_path',
    ini_get('include_path') . PATH_SEPARATOR . $path
);

require_once('/Loader/StandardAutoloader.php');
$loader = new \Zend\Loader\StandardAutoloader(
    array(
        'Zend' => $path,
    )
);
$loader->register();

$m = new \Zend\Mail\Message(); 
```

我得到的错误如下：

**致命错误：在PathToMyFile**中找不到类“Zend\Mail\Message”

 **知道这有什么问题吗？

Zend Framework 中的自动加载有什么好的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:38:35.820

你只想：

```
$path   =   dirname(__FILE__) . DIRECTORY_SEPARATOR . 'library' 
```

在您的包含路径中。

但是，我猜这是在你的 index.php 中，它在你的公共目录中，你真正想要的是从那里向上一个目录，然后进入库目录：

```
$path   =   dirname(__FILE__) . DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR .'library' 
```**

# r - 创建一个逻辑变量来标识一个字符串变量是否出现在另一个字符串中

> ID：15766076
> 
> 赞同：0
> 
> 时间：2013-04-02T13:59:25.890
> 
> 标签：r

我有一个快速的问题`grep`，我似乎无法解决。假设我有一个名称列表：`brand<-c(Brand1, Brand2, Brand3, Brand4)`. 我想确定这些名称中的任何一个是否出现在另一个字符串变量（var1）中，然后创建一个逻辑变量（T/F）。

```
ID        var1                    var_filter
1         Text about Brand 1      TRUE
1         Text                    FALSE
1         Text about Brand 2      TRUE
1         Text about Brand 3      TRUE
1         Text                    FALSE
1         Text about Brand 1      TRUE 
```

我该怎么做呢？我的猜测是`grep`，但是当我有一个完整的可能字符串列表而不是单个字符串时，我不确定该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:06:13.040

我使用 、 和 的组合`sapply`来`grepl`完成`any`任务。这个想法是使用 grepl 来查找文本中的哪些元素包含任何给定的品牌。我使用 sapply 为每个品牌做这些。然后我们使用`apply`with`any`来识别文本中的哪些值包含任何品牌。

```
brands <- c("CatJuice", "robopuppy", "DasonCo")

text <- c("nononono", "That CatJuice is great", "blargcats", "I gave the robopuppy some CatJuice")

id <- sapply(brands, grepl, text, fixed = TRUE)
# if case sensitivity is an issue
#id <- sapply(tolower(brands), grepl, tolower(text), fixed = TRUE)
apply(id, 1, any) 
```

这是区分大小写的，所以如果这是一个问题，您可以轻松`tolower`地将所有内容转换为小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:56:19.187

```
Brand1 <- "Brand 1";  Brand2 <- "Brand 2"; Brand3 <- "Brand 3"; Brand4 <- "Brand 3"
brand <- c(Brand1, Brand2, Brand3, Brand4)

dfrm$var_filter <- grepl( paste(brand, collapse="|"), dfrm$var1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:09:55.393

您可以`|`在模式中使用。像这样：

```
dados <- read.table(text='ID var1
1 TextaboutBrand1
1 Text
1 TextaboutBrand2
1 TextaboutBrand3
1 Text
1 TextaboutBrand1', header=TRUE, sep=' ')

grep1 <- function(x, brand) { length(grep(paste0(brand,collapse='|'), x[2])) == 1 }

apply(dados,1,grep1,brand) 
```

或者使用`mapply()`...

# iphone - 如何在 iPhone 应用程序的 cocos2d 2.0 中清除 CCGLView 颜色？

> ID：15766077
> 
> 赞同：1
> 
> 时间：2013-04-02T13:59:26.933
> 
> 标签：iphone, uiview, cocos2d-iphone

安装 cocos2d 框架并创建 cocos2d 项目，并替换下面的方法。

我有摄像头视图和 CCGLView，我想清除 CCGLView 颜色，以便在看到 CCGLView 时可以看到摄像头视图

如果我注释代码“[window_bringSubviewToFront:director_.view];”，我可以看到摄像机视图，如果我将 director.view(glview) 带到前面，我看不到摄像机视图。

任何人都可以帮助我吗？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Create the main window
    window_ = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Create an CCGLView with a RGB565 color buffer, and a depth buffer of 0-bits
    CCGLView *glView = [CCGLView viewWithFrame:[window_ bounds]
                                   pixelFormat:kEAGLColorFormatRGB565   //kEAGLColorFormatRGBA8
                                   depthFormat:0    //GL_DEPTH_COMPONENT24_OES
                            preserveBackbuffer:NO
                                    sharegroup:nil
                                 multiSampling:NO
                               numberOfSamples:0];

    director_ = (CCDirectorIOS*) [CCDirector sharedDirector];

    director_.wantsFullScreenLayout = YES;        

    // Display FSP and SPF
    [director_ setDisplayStats:YES];

    // set FPS at 60
    [director_ setAnimationInterval:1.0/60];

    // attach the openglView to the director
    [director_ setView:glView];

    // for rotation and other messages
    [director_ setDelegate:self];
    [window_ addSubview:director_.view];

    director_.view.backgroundColor = [UIColor clearColor];
    director_.view.opaque = NO;

    glClearColor(0.0, 0.0, 0.0, 0.0);

    glView.backgroundColor = [UIColor clearColor];
    //director_.view.backgroundColor = [UIColor clearColor];
    glView.opaque = NO;    

    glClearColor(0.0, 0.0, 0.0, 0.0);

    cameraView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    cameraView.opaque = NO;
    cameraView.backgroundColor = [UIColor clearColor];
    [window_ addSubview:cameraView];

    UIImagePickerController *imagePicker;

@try
    {
        imagePicker = [[[UIImagePickerController alloc] init] autorelease];
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.showsCameraControls = NO;
        imagePicker.toolbarHidden = YES;
        imagePicker.navigationBarHidden = YES;
        imagePicker.wantsFullScreenLayout = YES;
        imagePicker.cameraViewTransform = CGAffineTransformScale(imagePicker.cameraViewTransform, 1.0, 1.3);
    }
    @catch (NSException *exception)
    {
        [imagePicker release];
        imagePicker = nil;
    }
    @finally
    {
        if(imagePicker)
        {
            [cameraView addSubview:[imagePicker view]];
            [cameraView release];
        }
    }

    [window_ bringSubviewToFront:director_.view];

    // 2D projection
    [director_ setProjection:kCCDirectorProjection2D];
//  [director setProjection:kCCDirectorProjection3D];

    // Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
    if( ! [director_ enableRetinaDisplay:YES] )
        CCLOG(@"Retina Display Not supported");

    // Default texture format for PNG/BMP/TIFF/JPEG/GIF images
    // It can be RGBA8888, RGBA4444, RGB5_A1, RGB565
    // You can change anytime.
    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    // If the 1st suffix is not found and if fallback is enabled then fallback suffixes are going to searched. If none is found, it will try with the name without suffix.
    // On iPad HD  : "-ipadhd", "-ipad",  "-hd"
    // On iPad     : "-ipad", "-hd"
    // On iPhone HD: "-hd"
    CCFileUtils *sharedFileUtils = [CCFileUtils sharedFileUtils];
    [sharedFileUtils setEnableFallbackSuffixes:NO];             // Default: NO. No fallback suffixes are going to be used
    [sharedFileUtils setiPhoneRetinaDisplaySuffix:@"-hd"];      // Default on iPhone RetinaDisplay is "-hd"
    [sharedFileUtils setiPadSuffix:@"-ipad"];                   // Default on iPad is "ipad"
    [sharedFileUtils setiPadRetinaDisplaySuffix:@"-ipadhd"];    // Default on iPad RetinaDisplay is "-ipadhd"

    // Assume that PVR images have premultiplied alpha
    [CCTexture2D PVRImagesHavePremultipliedAlpha:YES];

    // and add the scene to the stack. The director will run it automatically when the view is displayed.
    [director_ pushScene: [IntroLayer scene]]; 

    // Create a Navigation Controller with the Director

    /*
    navController_ = [[UINavigationController alloc] initWithRootViewController:director_];
    navController_.navigationBarHidden = YES;
     */

    // set the Navigation Controller as the root view controller
//  [window_ addSubview:navController_.view];   // Generates flicker.
    //[window_ setRootViewController:navController_];

    // make main window visible
    [window_ makeKeyAndVisible];    

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:51:58.660

更改为 1.0 框架，它可以工作，希望对其他人有帮助

```
//
//  HelloWorldLayer.m
//  arcocos2dv1
//
//  Created by Max on 13-4-10.
//  Copyright __MyCompanyName__ 2013年. All rights reserved.
//

// Import the interfaces
#import "HelloWorldLayer.h"
#import "SimpleAudioEngine.h"

// HelloWorldLayer implementation
@implementation HelloWorldLayer

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    HelloWorldLayer *layer = [HelloWorldLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

// on "init" you need to initialize your instance
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {

        // create and initialize a Label
        CCLabelTTF *label = [CCLabelTTF labelWithString:@"Hello Augmented" fontName:@"Marker Felt" fontSize:40];

        // ask director the the window size
        CGSize size = [[CCDirector sharedDirector] winSize];

        // position the label on the center of the screen
        label.position =  ccp( size.width /2 , size.height/2 );

        // add the label as a child to this Layer
        [self addChild: label];

        self.isTouchEnabled = YES;

        [[SimpleAudioEngine sharedEngine] preloadEffect:@"explosion.caf"];
    }
    return self;
}

// on "dealloc" you need to release all your retained objects
- (void) dealloc
{
    // in case you have something to dealloc, do it in this method
    // in this particular example nothing needs to be released.
    // cocos2d will automatically release all the children (Label)

    // don't forget to call "super dealloc"
    [super dealloc];
}
@end 
```

# java - 具有空字段的 Lucene 文档容器

> ID：15766080
> 
> 赞同：0
> 
> 时间：2013-04-02T13:59:34.980
> 
> 标签：java, lucene

我有一个桌面应用程序，它实现了用于数据库搜索的 lucene 3.6.2 搜索引擎。该数据库包含具有日期和字符数据类型的列。某些列还可以包含空字段。Datetools 还用于将 Date 转换为 String 以供 Lucene 分析但是看起来当 lucene 无法将日期列中的空字段添加到 Document 容器以进行分析时。

我在下面展示代码片段：

```
 doc = new Document();

         if(rs.getDate("DATE_OF_LETTER")== null)
         { doc.add(new Field("date_of_letter","",Field.Store.YES,Field.Index.ANALYZED)); }
         else {
        doc.add(new Field("date_of_letter",DateTools.dateToString(rs.getDate("DATE_OF_LETTER"),
                DateTools.Resolution.DAY),Field.Store.YES,Field.Index.ANALYZED)); 
         }       

        if(rs.getDate("DATE_RECEIVED")== null)
         { doc.add(new Field("date_received","",Field.Store.YES,Field.Index.ANALYZED)); }
        else {
          doc.add(new Field("date_received",DateTools.dateToString(rs.getDate("DATE_RECEIVED"),
                DateTools.Resolution.DAY),Field.Store.YES,Field.Index.ANALYZED));  
        }      

         if(rs.getString("REMARKS")== null)
         { doc.add(new Field("remarks","",Field.Store.YES,Field.Index.ANALYZED)); }
         else {
         doc.add(new Field("remarks",rs.getString("REMARKS"),Field.Store.YES,Field.Index.ANALYZED));  }

          if(rs.getDate("DATE_DISPATCHED")== null)
         { doc.add(new Field("date_dispatched","",Field.Store.YES,Field.Index.ANALYZED)); }
         else {
        doc.add(new Field("date_dispatched",DateTools.dateToString(rs.getDate("DATE_DISPATCHED"),
                DateTools.Resolution.MINUTE),Field.Store.YES,Field.Index.ANALYZED)); 

                }     
           }
         iw.addDocument(doc);
         }

   } 
```

任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:55:53.847

这一行：

```
doc.add(new Field("date_received","",Field.Store.YES,Field.Index.ANALYZED)); 
```

真的什么都做不了。没有什么可以索引的。它可能会存储该字段（我不确定，马上），但它肯定不会以任何方式被索引，因此无法搜索。Lucene 对标记进行索引，而空字符串没有标记，因此没有可索引的内容，也没有可搜索的内容。

如果您希望能够搜索空值，您应该为它们索引一个占位符值，例如；

```
doc.add(new Field("date_received","null",Field.Store.YES,Field.Index.ANALYZED)); 
```

# .htaccess - 控制器的 Codeigniter RewriteRule

> ID：15766082
> 
> 赞同：0
> 
> 时间：2013-04-02T13:59:37.123
> 
> 标签：.htaccess, codeigniter, mod-rewrite

我有这个网址：[http://domain.any/enfermedades_dermatologicas/term/181](http://domain.any/enfermedades_dermatologicas/term/181)

我想跳过方法“术语”的名称，所以结果类似于 [http://domain.any/enfermedades_dermatologicas/181](http://domain.any/enfermedades_dermatologicas/181)

我尝试了以下重写规则，但它不起作用：

```
RewriteRule ^enfermedades_dermatologicas/(.+) /enfermedades_dermatologicas/term/$1
RewriteRule ^enfermedades_dermatologicas/(.+) /index.php/enfermedades_dermatologicas/term/$1 
```

控制器功能结构如下：

```
public function term( $id_contenido ){ ... } 
```

请任何帮助将不胜感激，对不起我的生存英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:06:34.787

您可以使用以下*[路线](http://ellislab.com/codeigniter/user-guide/general/routing.html)*，而不是使用*.htaccess*：

```
$route['enfermedades_dermatologicas/(:num)'] = 'enfermedades_dermatologicas/term/$1'; 
```

此路由会将带有“enfermedades_dermatologicas”的 URL 作为第一段，将任意数字作为第二段映射到`enfermedades_dermatologicas`控制器和该控制器`term`内的函数，并将 URL 中的数字作为函数的参数。

# sql - 我想使用 CASE 语句来更新 sql server 2005 中的一些记录

> ID：15766102
> 
> 赞同：235
> 
> 时间：2013-04-02T14:00:30.427
> 
> 标签：sql, sql-server, tsql, sql-update

```
UPDATE dbo.TestStudents  
SET LASTNAME = 
( CASE  
WHEN (LASTNAME = 'AAA') THEN 'BBB' 
WHEN (LASTNAME = 'CCC') THEN 'DDD' 
WHEN (LASTNAME = 'EEE') THEN 'FFF' 
ELSE  (LASTNAME)
END ) 
```

该语句用于此目的，但 else 条件扫描表中的每条记录。有什么办法可以让未受影响的行保持原样？

* * *

## 回答 #1

> 赞同：441
> 
> 时间：2013-04-02T14:01:37.923

添加一个`WHERE`子句

```
UPDATE dbo.TestStudents  
SET     LASTNAME =  CASE  
                        WHEN LASTNAME = 'AAA' THEN 'BBB' 
                        WHEN LASTNAME = 'CCC' THEN 'DDD' 
                        WHEN LASTNAME = 'EEE' THEN 'FFF' 
                        ELSE LASTNAME
                    END 
WHERE   LASTNAME IN ('AAA', 'CCC', 'EEE') 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-12-04T16:59:32.910

这也是 case-when... 的另一种用法

```
UPDATE [dbo].[JobTemplates]
SET [CycleId] = 
    CASE [Id]
        WHEN 1376 THEN 44   --ACE1 FX1
        WHEN 1385 THEN 44   --ACE1 FX2
        WHEN 1574 THEN 43   --ACE1 ELEM1
        WHEN 1576 THEN 43   --ACE1 ELEM2
        WHEN 1581 THEN 41   --ACE1 FS1
        WHEN 1585 THEN 42   --ACE1 HS1
        WHEN 1588 THEN 43   --ACE1 RS1
        WHEN 1589 THEN 44   --ACE1 RM1
        WHEN 1590 THEN 43   --ACE1 ELEM3
        WHEN 1591 THEN 43   --ACE1 ELEM4
        WHEN 1595 THEN 44   --ACE1 SSTn     
        ELSE 0  
     END
WHERE
    [Id] IN (1376,1385,1574,1576,1581,1585,1588,1589,1590,1591,1595) 
```

我喜欢在不允许重复值并且您的更新可能会创建它们的情况下使用临时表。例如：

```
SELECT
     [Id]
    ,[QueueId]
    ,[BaseDimensionId]
    ,[ElastomerTypeId]
    ,CASE [CycleId]
        WHEN  29 THEN 44
        WHEN  30 THEN 43
        WHEN  31 THEN 43
        WHEN 101 THEN 41
        WHEN 102 THEN 43
        WHEN 116 THEN 42
        WHEN 120 THEN 44
        WHEN 127 THEN 44
        WHEN 129 THEN 44
        ELSE    0
     END                AS [CycleId]
INTO
    ##ACE1_PQPANominals_1
FROM 
    [dbo].[ProductionQueueProcessAutoclaveNominals]
WHERE
    [QueueId] = 3
ORDER BY 
    [BaseDimensionId], [ElastomerTypeId], [Id];
---- (403 row(s) affected)

UPDATE [dbo].[ProductionQueueProcessAutoclaveNominals]
SET 
    [CycleId] = X.[CycleId]
FROM
    [dbo].[ProductionQueueProcessAutoclaveNominals]
INNER JOIN
(
    SELECT  
        MIN([Id]) AS [Id],[QueueId],[BaseDimensionId],[ElastomerTypeId],[CycleId] 
    FROM 
        ##ACE1_PQPANominals_1
    GROUP BY    
        [QueueId],[BaseDimensionId],[ElastomerTypeId],[CycleId] 
) AS X
ON
    [dbo].[ProductionQueueProcessAutoclaveNominals].[Id] = X.[Id];
----(375 row(s) affected) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-02T14:13:13.297

如果您不想重复列表两次（根据@J W 的回答），则将更新放入表变量中并使用`JOIN`a `UPDATE`：

```
declare @ToDo table (FromName varchar(10), ToName varchar(10))
insert into @ToDo(FromName,ToName) values
 ('AAA','BBB'),
 ('CCC','DDD'),
 ('EEE','FFF')

update ts set LastName = ToName
from dbo.TestStudents ts
       inner join
     @ToDo t
       on
         ts.LastName = t.FromName 
```

# php - 用户个人资料图片未更新

> ID：15766104
> 
> 赞同：2
> 
> 时间：2013-04-02T14:00:36.990
> 
> 标签：php, sql-update, user-accounts

在 member.php 上，我希望显示用户上传的个人资料图片。

```
//$profile_data grabs the users data within the database

               <h1><?php echo $profile_data['Name']; ?>'s profile:</h1>

                <?php if (empty($profile_data['profile']) === false) {
                        echo '<img src="',$profile_data['profile'], '" alt="',$profile_data['Name'],'\'sProfile Image">';

                    }
                ?>

                <div class="profile">
                    <?php 
                    if(isset($_FILES['profile']) === true) {
                        if (empty($_FILES['profile'] ['name']) === true)  {
                            echo 'Please choose a file!';
                        }else{
                            $allowed = array('jpg','jpeg','gif','png');

                            $file_name = $_FILES['profile']['name'];
                            $file_extn = explode('.', $file_name); 
                            $file_extn = strtolower(end($file_extn));//converts string to lowercase
                            $file_temp = $_FILES['profile']['tmp_name'];

                            if (in_array ($file_extn, $allowed) === true) {
                                //upload
                                change_image($MemberID,$file_temp,$file_extn);
                            }else {
                                echo 'Incorrect file type. Allowed: ';
                                echo implode(', ', $allowed);
                            }
                        }
                    }

                    ?> 
```

在 user.php 我有这个功能：

```
function change_image ($MemberID, $file_temp, $file_extn) {
    $file_path = 'images/profile/' . substr(md5(time()), 0, 10) . '.' . $file_extn; //take current time, create md5 hash, 10 character figure 
    move_uploaded_file($file_temp, $file_path);
    mysql_query("UPDATE `member` SET `profile` = '" . mysql_real_escape_string($file_path) . "' WHERE 'MemberID' = " . (int)$MemberID);//update database

    echo "UPDATE `member` SET `profile` = '" . mysql_real_escape_string($file_path) . "' WHERE `MemberID` = " . (int)$MemberID;
} 
```

当我以用户身份登录并上传图片时，什么也没有发生。数据库没有更新，但是当我回显查询时它看起来很好，我得到：

```
UPDATE `member` SET `profile` = 'images/profile/2d5929413b.jpg' WHERE `MemberID` = 31 
```

如果我将查询放入 phpmyadmin 它工作正常并且文件路径在那里，然后用户有一个图像，但是只要他们更改他们的图像，查询就会更新但不会更改数据库中的文件路径。

真的很迷茫，求大神帮忙？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:03:18.280

删除逗号并替换为点，如下所示：

```
<?php if (empty($profile_data['profile']) === false) {
                        echo '<img src="'.$profile_data['profile']. '" alt="'.$profile_data['Name'].'\'sProfile Image">';
                    echo $profile_data['profile'];
                    }
                ?> 
```

从 MemberID 周围的查询和逗号中删除 INT：

```
mysql_query("UPDATE `member` SET `profile` = '" . mysql_real_escape_string($file_path) . "' WHERE MemberID = " . $MemberID) ;//update database 
```

# hadoop - 如何加速 Pig MultiStorage

> ID：15766106
> 
> 赞同：1
> 
> 时间：2013-04-02T14:00:39.770
> 
> 标签：hadoop, amazon-s3, apache-pig

我正在使用 Pig 的 MultiStorage 将输入文件拆分为许多较小的输出文件。

如果它有帮助，脚本看起来像：

```
<snip registers and defines>
a = load '$FILES' using AvroStorage();
a_projected = foreach a generate field1, field2;
a_explode = foreach a_projected generate field1, FLATTEN(TOKENIZE(field2));

--splitting based on field2
store a_explode into '$OUTPUT' using org.apache.pig.piggybank.storage.MultiStorage('$OUTPUT','1'); 
```

这是从 S3 读取和写入。'$FILES' 参数往往是单个文件夹，其中一个文件大约 10,000 行，大小约为 2 MB。

使用 MultiStorage 时，它​​会分成大约 4-5,000 个单独的文件夹，其中包含一个文件，运行大约需要 15 分钟。

使用 PigStorage 时，我得到了一个输出文件，正如预期的那样，运行大约需要 20 秒。

MultiStorage 会有这种性能吗？有什么可以改进的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T01:17:34.093

您的密钥空间可能太宽 - MultiStorage 在这种情况下最终会创建多个文件，每个密钥一个文件。创建太多文件（内部 MultiStorage 为每个键创建一个 Writer）需要大量时间。如果你不希望每个键都有一个文件，你应该只使用 PigStorage。

# javascript - 在动态创建的按钮上显示日期选择器

> ID：15766108
> 
> 赞同：4
> 
> 时间：2013-04-02T14:00:56.157
> 
> 标签：javascript, jquery, jquery-ui-datepicker

当用户单击动态创建的按钮时，我试图显示日期选择器。我不想在那里显示文本框，所以我使用隐藏输入。

Javascript：

```
 function showDate(){
        var dateDiv = $('#dateDiv');
        for(ind=0; ind<=5; ind++){
            var date = $('<img src="calendar.png" class="datepicker" id="'+ind+'-date" /><input type="hidden" id="'+ind+'-date-picker" /><br />');
            dateDiv.append(date);
        }
    }

    window.onload = function(){
        showDate();
        $('.datepicker').live('click', function(){
            var datepickerId =$(this).attr('id');
            datepickerId += '-picker';
            $('#'+datepickerId).datepicker();
        });
    } 
```

但是当我点击日历图标时没有任何反应。

HTML：

```
<body>
   <div id="dateDiv"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:06:02.213

`.datepicker()`只需设置一个日期选择器。您可能在创建 div 时已经这样做了，而不是每次单击它时都这样做。

要显示它，您可以致电`.datepicker('show');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:11:29.800

不确定您使用的是哪个版本的 JQuery，但如果它是 1.7+ '.live()' 已被弃用，如果它是 1.9+ 它已被删除。[关联](http://api.jquery.com/live/)

此外，我建议使用 document.ready 函数进行初始化。

```
function showDate(){
    var dateDiv = $('#dateDiv');
    for(ind=0; ind<=5; ind++){
         var date = $('<img src="calendar.png" class="datepicker" id="'+ind+'-date" /><input type="hidden" id="'+ind+'-date-picker" /><br />');
        dateDiv.append(date);
    }
}

$(document).ready( function(){
    showDate();

    $('.datepicker').on('click', function(){
        var $datepicker =$(this).attr('id');
        $datepicker += '-picker';
        $('#'+$datepicker).datepicker();
    });
}); 
```

[这是上面的小提琴](http://jsfiddle.net/jsNbU/1/)

# php - 卷曲 POST，而

> ID：15766109
> 
> 赞同：0
> 
> 时间：2013-04-02T14:00:57.767
> 
> 标签：php, mysql, curl

我希望下面的这段代码从 mysql 表中选择 2 行数据并将数据发布到 URL。

```
$qry = "SELECT id,email,forename,surname,ipaddress,optin_date,optin_url FROM $db_tble ORDER BY id ASC LIMIT 2";
$result = mysql_query($qry);
$num = mysql_num_rows($result); 

if($result) 
{
 $OK = 1;
/** start feed **/

//create array of data to be posted

while ($row = mysql_fetch_assoc($result)) 
{
// unset($post_items,$curl_connection,$result,$var,$info);
 $n++;

 $qry_id = $row["id"];
 $post_data['u'] = $testfeed_user;

 $post_data['p'] = $testfeed_pswd;

// Action data
$post_data['email'] = $row["email"];

$post_data['fname'] = $row["forename"];

$post_data['lname'] = $row["surname"];

$post_data['ip'] = $row["ipaddress"];               

$post_data['date'] = $row["optin_date"];

$post_data['url'] = $row["optin_url"];

//traverse array and prepare data for posting (key1=value1)

foreach ( $post_data as $key => $value) {
                                      $post_items[] = $key . '=' . $value;

    }

//create the final string to be posted using implode()

$post_string = implode ('&', $post_items);

//create cURL connection

$curl_connection = curl_init($post_url);

    //set options

// HTTP request method defaults to GET
     curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);

    curl_setopt($curl_connection, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");

    curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);

   curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);

   curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);

   curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, 1);

//set data to be posted

 curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);

        //perform our request

    $result = curl_exec($curl_connection);

    //close the connection

curl_close($curl_connection);
unset($post_string);
    unset($post_data);
unset($post_items);
/** end feed **/ 
} 
```

它失败并出现“PHP 警告：mysql_fetch_assoc()：提供的参数不是有效的 MySQL 结果资源...”错误。

这通常意味着查询存在错误，但是下面的代码适用于该查询。因此，它必须是 while 循环中的某些东西破坏了它，但是，我无法弄清楚是什么。

```
// echo "Select OK!";
$qry = "SELECT id,email,forename,surname,ipaddress,optin_date,optin_url FROM $db_tble ORDER BY id ASC LIMIT 2";
$result = mysql_query($qry);
$num = mysql_num_rows($result); 

if (mysql_num_rows($result) != 0) 
{
    $OK = 1;
    /** start feed **/

    //create array of data to be posted

    // $post_data['u'] = $testfeed_user;

    // $post_data['p'] = $testfeed_pswd;

    while ($row = mysql_fetch_assoc($result)) 
    {
        $qry_id = $row["id"];
        $post_data['u'] = $testfeed_user;

        $post_data['p'] = $testfeed_pswd;

                // Action data
        $post_data['email'] = $row["email"];

        $post_data['fname'] = $row["forename"];

        $post_data['lname'] = $row["surname"];

        $post_data['ip'] = $row["ipaddress"];               

        $post_data['date'] = $row["optin_date"];
        $post_data['url'] = $row["optin_url

          //traverse array and prepare data for posting (key1=value1)

        foreach ( $post_data as $key => $value) {

            $post_items[] = $key . '=' . $value;
                    }

        //create the final string to be posted using implode()

        $post_string = implode ('&', $post_items);

        echo "id=" . $qry_id . " - " . $post_string . "<br /<br />";
        unset($post_items);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:04:24.630

`$result`您在`while`循环内覆盖

```
$result = curl_exec($curl_connection); 
```

我不知道为什么，因为你似乎没有使用它。就够`curl_exec`了。

# ios - 如何创建具有多种单元格类型的分组表视图？

> ID：15766113
> 
> 赞同：2
> 
> 时间：2013-04-02T14:00:59.553
> 
> 标签：ios, objective-c, uitableview

我没有使用故事板，它是 iOS 6。

当所有单元格都是相同类型时，我知道该怎么做，但我需要一个包含多种单元格类型的分组表视图。举个例子，假设第一个单元格需要是`UITableViewCellStyleValue1`，第二个单元格需要是`UITableViewCellStyleSubtitle`，第三个单元格是自定义单元格（`UITableViewCell`具有 xib 的子类，因此可以与`registerNib:forCellReuseIdentifier:`.

大多数情况下，我不确定构建`tableView:cellForRowAtIndexPath:`. 但我不确定是否应该注册自定义单元格或全部。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T03:11:44.687

你走在正确的道路上。由于您的自定义单元格正在其他地方使用，因此 xib 是加载它的好地方。至于实现，你可以做这样的事情。

假设您的表格视图是“静态的”并且有三个单元格，您可以在以下位置注册您的自定义笔尖`viewDidLoad`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UINib *customCellNib = [UINib nibWithNibName:@"CustomCell" bundle:nil];
    [self.tableView registerNib:customCellNib forCellReuseIdentifier:@"CustomIdentifier"]
} 
```

然后在`cellForRowAtIndexPath:`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = nil;

    if(indexPath.row == 0) {

        cell = [tableView dequeueReusableCellWithIdentifier:@"CellIdentifier1"];

        if(cell == nil) {

            cell = [[UITableViewCell alloc]  initWithStyle:UITableViewCellStyleValue1
                                           reuseIdentifier:@"CellIdentifier1"];
        }
    }
    /* Cell 2 ommited for brevity */
    else if(indexPath.row == 2) {

        //Just to demonstrate the tableview is returning the correct type of cell from the XIB
        CustomCell *customCell = [tableView dequeueReusableCellWithIdentifier:@"CustomIdentifier"];
        cell = customCell;
    }

    [self configureCell:cell atIndexPath:indexPath];

    return cell;
} 
```

最后在 IB 中为 Xib 设置正确`Identifier`的单元格。

![Xib - IB 中的单元格](https://i.stack.imgur.com/xXeRA.png)

**更新**

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {

    if(indexPath.row == 0) {
        cell.textLabel.text = [NSString stringWithFormat:@"Cell %d", indexPath.row];
    }
    else {

        //custom cell here
        //cell.textfield.text = @"blah blah";
    }
} 
```

[配置单元格方法在某种程度上是用于主要使用NSFetchedResultsController](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)（及其使用的[委托](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSFetchedResultsControllerDelegate)）放置的 tableview 单元格的约定

这只是一种使用适当内容重置重用单元格的便捷方法，并且`cellForRowAtIndexPath:`更易于阅读。我什至制作了多个版本的 configureCell`configureCustomCell1:atIndexPath`来增加可读性。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:37:49.327

如果您使用的是静态表，则不需要重用标识符或其他任何东西，因为不会再使用任何单元格。只需将表格设置为“分组”样式的“静态单元格”并设置所需的部分数。您可以单击“表格视图部分”并设置该部分中有多少行（并设置您可能想要的任何页眉/页脚）。

![故事板示例](https://i.stack.imgur.com/A6oNj.png)

然后根据需要配置单元格。您可以选择默认单元格或将单元格设为“自定义”并从对象库中拖动 UI 组件。您可以在静态表格单元格中设置`IBOutlets`或`IBActions`设置组件，就像在普通视图中设置组件一样。

![配置单元](https://i.stack.imgur.com/0N6Ni.png)

# asp.net-web-api - .Net Web API 和 Autofac - HTTPRequestMessage VS HTTPRequestBase

> ID：15766123
> 
> 赞同：3
> 
> 时间：2013-04-02T14:01:23.227
> 
> 标签：asp.net-web-api, autofac

我正在将 Autofac 用于 DI 和 .Net Web API 项目。API 控制器的依赖项是使用 Autofac 注入的。这些依赖项之一需要查看请求标头。

所以我注册了当前的 HTTP 上下文并解析了 HTTPRequestBase 对象。该代码查看标头并创建一个新对象 X（通过与数据存储建立连接）。我把这个对象 X HTTpContextBase.Items 放在以后使用，这样我就不需要连接到数据存储了。

该项目还使用 HTTPParameter Binding 进行参数绑定。需要绑定的参数就是这个新创建的对象XI。但是从 HttpParameterBinding.ExecuteBindingAsync，我无法访问当前的 HTTPContext。但是参数绑定可以访问HTTPRequestMessage。

有什么方法可以将 HTTPRequestMessage 注册到 Autofac。或在进行参数绑定时访问 HTTpContextBase.Items 的任何方式。

# c# - C# 中的常量和 Web 表单

> ID：15766126
> 
> 赞同：0
> 
> 时间：2013-04-02T14:01:28.143
> 
> 标签：c#, asp.net

我现在想在 C# 的 Web 表单中使用常量的最佳方法，因为我是新手，我的常量在一个单独的类中，这就是我使用它们的方式

```
 using Student.Scripts.Constants;

    namespace Student
    {
       public partial class masterPage : System.Web.UI.MasterPage
       {
          protected void Page_Load(object sender, EventArgs e)
          {
            testLabel.Text = Constant.APP_NAME;
          }
       }
    } 
```

这会将我的常量中的内容写入此标签并正确显示，我想知道这是正确的方式，您是否每次都必须使用标签，如果我想在 HTML 标签上使用常量怎么办？我不能使用标签，然后呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:02:38.760

由于您的常量是字符串，因此您可以在任何可以使用字符串的地方使用它们。

这包括`Text`所有控件的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:49:11.730

我将开始使用 razor 练习 MVC，因此您不必处理客户端的一些复杂性，只需使用 HTML 标签来创建您的 UX。

如果您需要在服务器端使用常量，您可能需要一个静态类来执行此操作，例如：

```
public static class Constants
{
    public const string AppName = "MyApp";
    public const string AppVersion = "0.0.0.1";
} 
```

正如之前所说：

> 由于您的常量是字符串，因此您可以在任何可以使用字符串的地方使用它们。
> 
> 这包括所有控件的 Text 属性。

# android - 在android中永久存储图像路径

> ID：15766128
> 
> 赞同：0
> 
> 时间：2013-04-02T14:01:29.227
> 
> 标签：android, image, path, storage

用户可以从图库中选择图像。所以我用了这个

```
Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI); 
```

每次用户从图库中选择图像时，我都会在我的活动中的**gridview中显示这些选定的图像。**所以，我有许多`imagepaths`用户选择的图像。那么，我如何存储这些图像路径并在网格视图中向用户显示之前每次选择的这些图像。所以，我正在考虑在 arraylist 中添加图像路径。如果我`sqlite`用来存储这些图像路径，那就太过分了。我想利用`sharedpreference`来保存这个arraylist。

1）这是一种有效的存储方式吗？由于 arraylist 可能包含 100 个图像路径。当用户重新进入时，他可以添加更多的图片，也可以删除更多的图片。

2）添加可以很容易地完成`arraylist`，但是当他删除时应该怎么做？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:05:00.410

我建议将 SQLite 与事务一起使用......但你为什么说它会矫枉过正呢？

编辑 - 这是一个简单的代码，也许您可​​以编写它并测试以确保它对于您的目标来说太重或不适合。

例子：

```
db.beginTransaction();
for(String it : imgPaths)
    db.insert(it);//You will need to place in a ContentValue
db.setTransactionSuccessful();
db.endTransaction(); 
```

而不是在需要刷新缓存时清理表。

# php - file_exists 使用不同驱动器上的文件

> ID：15766139
> 
> 赞同：0
> 
> 时间：2013-04-02T14:01:54.070
> 
> 标签：php, file-exists

任何人都可以告诉我如何将此功能用于不同驱动器上的文件吗？下面的代码找不到该文件。

```
 $loaded_php = "C:/Program Files(x86)/PHP/v5.3/php.ini";  
  if(file_exists($loaded_php)) 
  {
    $phpini= file_get_contents($loaded_php);
  } else {
    $phpini= "nothing";
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:14:35.290

错字：

```
 $loaded_php = "C:/Program Files(x86)/PHP/v5.3/php.ini";  
                                ^---missing space 
```

它是`Program Files[SPACE](x86)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:25:09.683

关于马克的回答，我建议使用

```
$loaded_php = 'C:\PROGRA~2\PHP\v5.3\php.ini';
$phpini = file_exists($loaded_php) ? file_get_contents($loaded_php) : 'nothing'; 
```

# json - 根据 json paylod 值显示警报

> ID：15766142
> 
> 赞同：0
> 
> 时间：2013-04-02T14:02:00.740
> 
> 标签：json, api, alert

我有一个返回响应的 JSON api，如下所示：

{ “formId”：2211，“formName”：“测试表单名称 1”，
“fileCount”：0，“createdOnDate”：“2012-10-22T13:31:00”，“modifiedDate”：“2012-10-22T13： 31:00" },

{“formId”：2212，“formName”：“测试表单名称2”，
“fileCount”：2，“createdOnDate”：“2012-10-22T13:31:00”，“modifiedDate”：“2012-10-22T13： 31:00" },

这在前端的下拉列表中显示为

```
<div class="select with-hover"><ul>

<li><a href="#" data-key="2211" data-value="Test Form Name1">Test Form Name1</a></li>

<li><a href="#" data-key="2212" data-value="Test Form Name2">Test Form Name2</a></li>

<li><a href="#" data-key="2213" data-value="Test Form Name1">Test Form Name3</a></li> 
```

当文件计数为 0 时，如何在单击链接时显示警告消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:08:50.720

将 fileCount 数据属性添加到`<a>`元素。我完全猜测您没有提供的其余代码：

```
$.ajax('your/url',{your:data},function(response) {
    $(div).append($('<a href="#"></a>').data({key:response.key, value:response.value, filecount: response.fileCount}).text(response.formName));
}); 
```

然后你需要一个点击处理程序：

```
$(function(){
    $(div).on('click','a', function(e) {
        if ($(this).data('filecount') == 0) {
            alert('filecount is 0');
        }
        e.stopPropagation(); // stop click events on parent elements
        return false; // don't actually go to the href
    });
}); 
```

# c++ - 将文件写入和读取到结构中

> ID：15766144
> 
> 赞同：1
> 
> 时间：2013-04-02T14:02:05.787
> 
> 标签：c++, c++builder

ich habe ein seltsames verhalten, wenn ich ein Struktur in einer Datei schreibe。

如果我写入文件，员工 13 和 26（以及后来的其他人）总是错误的 ID2/ID3。（见输出）

我究竟做错了什么？

提前感谢您的建议。

```
typedef  struct Employee
{
    char name[128];
    int ID1;
    int ID2;
    int ID3;
}employee;

void  __fastcall TMainForm::LogHeader(char* filename)
{
   char cBuffer[2048]={0};
   FILE *pFile;
   int n = 0;
    Employee header;
    if(FileExists(filename)){
        pFile = fopen(filename,"r");
        fread(&header,sizeof(struct Employee),1,pFile);
        fclose(pFile);
    }
    memset(cBuffer,sizeof(cBuffer),0);
    n = 0;
    n+= sprintf(cBuffer+n,"%s\t",header.name);
    n+= sprintf(cBuffer+n,"ID1: %d\t",header.ID1);
    n+= sprintf(cBuffer+n,"ID2: %d\t",header.ID2);
    n+= sprintf(cBuffer+n,"ID3: %d\t",header.ID3);
    log(cBuffer);
}

void __fastcall TMainForm::Save3Click(TObject *Sender)
{
    FILE *pFile;
    int iWritten = 0;
    Employee header;
    char fn[MAX_PATH]={0};
     __int16 *mesauredValues;
    header.ID1 = 1280;
    mesauredValues        = new __int16[header.ID1];
    for(int i = 1;i<32;i++){
        setmem(header.name,sizeof(header.name),0);
        sprintf(header.name,"employee number: %.2d",i);
        header.ID2= i;
        header.ID3= i;
        sprintf(fn,"D:\\temp\\Testfile_%.4d.dat",i);
        for(int j = 0;j<header.ID1;j++){mesauredValues[j] = j;}
        pFile = fopen(fn,"wb");
        assert(pFile != NULL);
        iWritten =  fwrite(&header,sizeof(struct Employee),1,pFile);
        iWritten += fwrite(mesauredValues,sizeof(__int16),header.ID1,pFile);
        fclose(pFile);
        LogHeader(fn);
  }
    delete mesauredValues;  mesauredValues = NULL;
}
//---------------------  output:
employee number: 01 ID1: 1280   ID2: 1  ID3: 1  
employee number: 02 ID1: 1280   ID2: 2  ID3: 2  
employee number: 03 ID1: 1280   ID2: 3  ID3: 3  
employee number: 04 ID1: 1280   ID2: 4  ID3: 4  
employee number: 05 ID1: 1280   ID2: 5  ID3: 5  
employee number: 06 ID1: 1280   ID2: 6  ID3: 6  
employee number: 07 ID1: 1280   ID2: 7  ID3: 7  
employee number: 08 ID1: 1280   ID2: 8  ID3: 8  
employee number: 09 ID1: 1280   ID2: 9  ID3: 9  
employee number: 10 ID1: 1280   ID2: 10 ID3: 10 
employee number: 11 ID1: 1280   ID2: 11 ID3: 11 
employee number: 12 ID1: 1280   ID2: 12 ID3: 12 
employee number: 13 ID1: 1280   ID2: 0  ID3: 0  
employee number: 14 ID1: 1280   ID2: 14 ID3: 14 
employee number: 15 ID1: 1280   ID2: 15 ID3: 15 
employee number: 16 ID1: 1280   ID2: 16 ID3: 16 
employee number: 17 ID1: 1280   ID2: 17 ID3: 17 
employee number: 18 ID1: 1280   ID2: 18 ID3: 18 
employee number: 19 ID1: 1280   ID2: 19 ID3: 19 
employee number: 20 ID1: 1280   ID2: 20 ID3: 20 
employee number: 21 ID1: 1280   ID2: 21 ID3: 21 
employee number: 22 ID1: 1280   ID2: 22 ID3: 22 
employee number: 23 ID1: 1280   ID2: 23 ID3: 23 
employee number: 24 ID1: 1280   ID2: 24 ID3: 24 
employee number: 25 ID1: 1280   ID2: 25 ID3: 25 
employee number: 26 ID1: 1280   ID2: 2089983994 ID3: 0  
employee number: 27 ID1: 1280   ID2: 27 ID3: 27 
employee number: 28 ID1: 1280   ID2: 28 ID3: 28 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T16:06:19.653

用“rb”和“wb”打开，这看起来像 CTRL-Z（ASCII 26）被解释为文件结尾。

# matlab - 在 Matlab 中从一个有间隙的数据集中创建多个无间隙矩阵（或结构）

> ID：15766147
> 
> 赞同：1
> 
> 时间：2013-04-02T14:02:21.977
> 
> 标签：matlab, matrix, vector, gaps-in-data

我有一些时间序列中存在空白的数据。找到间隙的索引以及长度和所有内容。问题是我想将我的数据（列：时间和测量值）分割成几个矩阵/向量或将其分割成一个结构。我的计划是对这些小时间序列进行傅立叶变换以进行进一步比较。

让我们试着用一个例子来解释：Tdat 是时间序列，有 3825 个点

```
 % find number of gaps
    nogap = diff(Tdat(find(diff(Tdat)>0.051))); %20Hz measurement
    numgaps = length(nogap) %number of gaps = bumgaps+1 
```

这里的间隙数是 8

```
 %indexing the gaps
    w = find(diff(Tdat)>0.51); %finding the gaps %0.051 since 1/20=0.05

    u = find(diff(Tdat)<0.51); %finding indices with data
    series = length(M)-length(u) %amount of data series without gaps 
```

没有间隙的数据系列数为 9

```
 delta = diff(w) %amount of points between two gaps (constant 
```

这些差距之间的点数是 425。

因此，我希望有 9 个不同的矩阵/向量，其中只有数据并且每个长度为 425 没有时间间隙。

有什么方法或者我没有搜索到足够好的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:25:55.920

从我从您的示例中可以看出，差距似乎不是您要删除的数据点，而是划分数据的地方？我对吗？由于生成的数据向量的长度相同，也许你想要`reshape()`你的向量？如`reshape(Tdat,425,9)`.

这是一个小例子：

```
>> a = [1:12]'

a =

     1
     2
     3
     4
     5
     6
     7
     8
     9
    10
    11
    12

>> b = reshape(a,4,3)

b =

     1     5     9
     2     6    10
     3     7    11
     4     8    12 
```

`mat2cell()`如果您希望数据作为单元格，您也可以在之后使用：

```
>> c = mat2cell(b,4,ones(1,3))

c = 

    [4x1 double]    [4x1 double]    [4x1 double]

>> c{2}

ans =

     5
     6
     7
     8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:55:08.317

好吧，我找到了另一个答案，最终结果证明它更有用。万一有人感兴趣。

由于并非总是所有部分（没有间隙）都具有相同的长度，因此很难跟踪用零填充某些列所需的所有索引。

因为我知道所有差距从哪里开始，所以我可以使用新的索引将它们放入结构中。

```
gl = find(diff(Tdat)>0.051);

gaps = length(gl)-1;

for a = 1:gaps;
    Meas(a).M       = M( gl(a)+1 : gl(a+1) );
end 
```

其中 Tdat 是我的时间向量，M 是包含数据的向量。

# python - 照片文件夹字符串替换正则表达式python

> ID：15766150
> 
> 赞同：0
> 
> 时间：2013-04-02T14:02:38.060
> 
> 标签：python, regex, string, replace

我想更换

```
text = '2012-02-23 | My Photo Folder' 
```

和

```
new_text = '20120223_MyPhotoFolder' 
```

我在这里找到了一个与我的日期格式匹配的正则表达式 [http://regexlib.com/RETester.aspx?regexp_id=933](http://regexlib.com/RETester.aspx?regexp_id=933)

解决这个问题的最佳方法是什么？我是否需要正则表达式组，然后在这些组中进行替换？

我假设我可以简单地搜索“|”并用普通 string.replace() 替换为“_”和“-”替换为“”，但我想找到一个更通用的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:19:52.150

```
import re

text = '2012-02-23 | My Photo Folder'

pattern = r'''
(?P<year>\d{4}) # year group consisting of 4 digits
-
(?P<month>\d{2}) # month group consisting of 2 digits
-
(?P<date>\d{2}) # date group consisting of 2 digits
\s\|\s
(?P<name_with_spaces>.*$) # name_with_spaces consuming the rest of the string to the end
'''
compiled = re.compile(pattern, re.VERBOSE)
result = compiled.match(text)
print('{}{}{}_{}'.format(
    result.group('year'),
    result.group('month'),
    result.group('date'),
    result.group('name_with_spaces').translate(None,' '))) 
```

输出：

```
>>> 
20120223_MyPhotoFolder 
```

* * *

### 一点解释：

[`re.VERBOSE`](http://docs.python.org/2/library/re.html#re.VERBOSE)让我们在多行中编写正则表达式，使其更具可读性并允许注释。

[`'{}{}{}_{}'.format`](http://docs.python.org/2/library/string.html#format-examples)只是一种字符串插值方法，它将参数放在`{}`.

[`translate`](http://docs.python.org/2/library/string.html#string.translate)方法应用于`result.group('name_with_spaces')`删除空格。

# cuda - 我的程序使用了多少个 gpu 内核？

> ID：15766153
> 
> 赞同：1
> 
> 时间：2013-04-02T14:02:49.860
> 
> 标签：cuda, thrust

我正在通过推力在 gpu 上执行并行计算。有没有办法知道我正在使用多少个内核？是否所有可用的内核都实际用于计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T14:43:27.387

[可视化配置文件](https://developer.nvidia.com/nvidia-visual-profiler)r 将为您提供有关内核中正在发生的事情的大量详细信息，而无需收集有关占用率的任何猜测的计数器。

# javascript - dyve 自动完成音译

> ID：15766156
> 
> 赞同：0
> 
> 时间：2013-04-02T14:02:51.913
> 
> 标签：javascript, jquery, autocomplete, jquery-autocomplete, transliteration

我正在使用dyve**自动完成**jquery 插件。该插件工作得非常好，但是当我尝试进行一些音译时，该插件不起作用。

**一些细节：** **数据库的结果总是西里尔字母**。当用户开始输入西里尔字母时，一切正常。但是当用户开始输入拉丁语时，在后端拉丁字符被转换为西里尔字母，之前被提交到数据库。然后结果像往常一样返回到前端，但没有显示任何内容。

有人知道如何进行这项工作吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:17:03.153

为了解释我的评论，您应该确保一切都在处理 UTF-8 中的数据。有关更多详细信息，请参阅此[问题](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)和此[问题](https://stackoverflow.com/questions/6790593/utf-8-and-javascript)。还要确保您所有的 doctype 标头都具有正确的编码声明。

# java - 浮动表格彼此相邻

> ID：15766162
> 
> 赞同：0
> 
> 时间：2013-04-02T14:03:03.377
> 
> 标签：java, css, forms, floating

我正在尝试将我的 2 个表格彼此相邻浮动。现在在结果中，他将这两者放在一起。

这是我的代码：

```
<id ='AvailabilityFormAM'><form action='availability.jsp' name='availForm_AM'  method='post'>

<table class='TableBorder'><tr class='TableHeading'><td colspan='2'>New activity AM</td></tr>
<tr class='TableData2'><td align='left'>Description:</td>
<td align='left'><input style='width:150px' type='text' name='description' value='Informatica' /></td></tr>

<tr class='TableData2'><td colspan='2'>
<input class='SolidButton' type='button' value='Delete' onclick='javascript:deleteSLine("AM");'/></td></tr></table></form></div>

<id ='AvailabilityFormPM'><form action='availability.jsp' name='availForm_PM' method='post'>

<table class='TableBorder'><tr class='TableHeading'><td colspan='2'>New activity PM</td></tr>
<tr class='TableData2'><td align='left'>Description:</td>
<td align='left'><input style='width:150px' type='text' name='description' value='Inbev' /></td></tr>

<tr class='TableData2'><td colspan='2'>
<input class='SolidButton' type='button' value='Update' onclick='javascript:updateSLine("PM");'/></td></tr></table></form></div> 
```

CSS：

```
#AvailabilityFormAM {
float: left;
width:200px;
}

#AvailabilityFormPM {
float: left; 
margin-left:200px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:07:28.647

您的两个元素的名称有错误：

```
<id ='AvailabilityFormAM'> 
```

没有元素“id”，可能只是你的属性潜伏在那里。

我的猜测是您正在寻找一个分隔线，如下所示：

```
<div id ='AvailabilityFormAM'> 
```

和

我个人会将第二个 CSS 规则更改为：

```
#AvailabilityFormAM, #AvailabilityFormPM {
float: left; 
width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:07:54.310

您使用的 ids 错误，您的表单的 html 应该如下所示：

```
<form id ='AvailabilityFormAM' action='availability.jsp' name='availForm_AM'  method='post'> 
```

还有这个：

```
<form id ='AvailabilityFormPM' action='availability.jsp' name='availForm_PM' method='post'> 
```

也不确定你是否需要这么大的利润。

# asp.net-mvc - 将解决方案的多个 asp.net mvc 4 项目部署为单个应用程序

> ID：15766163
> 
> 赞同：1
> 
> 时间：2013-04-02T14:03:08.357
> 
> 标签：asp.net-mvc, iis

我是 asp.Net MVC 4 的新手，因此对于大多数人来说可能是一个简单的问题。

我想将解决方案的多个项目部署为单个应用程序，并通过唯一路径访问不同的项目：

```
Solution:
- project 1 --> helloworld.website (localhost:8082/website)   
- project 2 --> helloworld.webserviceapi (access over: localhost:8082/webservice) 
```

我尝试通过创建一个虚拟目录来访问第二个应用程序，但它不起作用。

# android - 使用适用于 Android 和 iOS 的 Windows C++

> ID：15766164
> 
> 赞同：1
> 
> 时间：2013-04-02T14:03:11.467
> 
> 标签：android, c++, ios, windows

没有办法将我的 Windows C++ 代码轻松地带到 Android 和 iOS 上，不是吗？

我的 C++ 代码主要是向量、字符串和诸如此类的“轻”的东西，它与图形没有任何关系。

我想既然 C++ 是一种通用的，我可能有一个很小的机会可以让它工作。

我猜 C++ 依赖于 VS2010 C++ 运行时，因此我必须完全重新编写它，对吧？使用适用于 iOS 的 XCode 和适用于 Android 的 Java...

我想是这样，但也许其他人比我更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:06:07.050

当然，如果您只有跨平台和标准实现，您绝对可以轻松地将您的代码带到其他平台上。为了将您的代码移植到 Android，您可以查看 JNI，对于 XCode，您可以创建 Cocoa 静态库以在 Objective-C++ 项目中使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:07:37.973

是的，[您可以为 iOS](https://stackoverflow.com/questions/8759573/utilizing-c-in-ios-and-mac-os-x-applications) [和 Android](https://stackoverflow.com/questions/1002164/write-applications-in-c-or-c-for-android)编译 C++ 文件，但是您需要做原生的事情（Objective C、Cocoa），以便使用您迁移的 C++ 函数组装一个完整的代码签名 iOS 应用程序，并且可能是相同的事情Android 方面（利用 Java）也是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T14:22:53.387

很久以前我就遇到过这个问题，我发现如果你要为 ios 编写应用程序，你必须了解 Objective C，否则所有的替代方案只会让你失去所有优势，让你的生活更加艰难。 ..
但您可以使用您的目标 C++ 编译器来编译您的 C++ 代码:)

# c# - 使用c#将数据从文本框发送到网站文本框？

> ID：15766170
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:03:31.240
> 
> 标签：c#, html, browser

我一直在尝试从我的 c# 表单中输入数据，当我单击表单上的提交按钮时，它应该被转移到`TextBox`网站...这里

```
private void button1_Click(object sender, EventArgs e)
{
   webBrowser1.Document.All.GetElementsByName("email")[1].SetAttribute("Value", textBox2.Text);
   webBrowser1.Document.All.GetElementsByName("pass")[1].SetAttribute("Value", textBox3.Text);
   webBrowser1.Document.GetElementsByTagName("form")[1].InvokeMember("submit");
}

private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
}

private void button2_Click(object sender, EventArgs e)
{
}

private void Form1_Load(object sender, EventArgs e)
{
   webBrowser1.Navigate("gmail.com");//Your link
   webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted); 
} 
```

我所做的是在网络浏览器中打开一个链接并搜索属性以在其中输入数据，但它给出了一个错误，`"Value of '1' is not valid for 'index'. 'index' should be between 0 and -1."`当我将索引更改为零时它给出了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:15:47.610

`GetElementsByName("email")[1]`表示至少有两个名为“email”的元素，并且您要选择第二个，因为 [1] 指定数组的索引，并且数组从索引 0 开始。

在您的情况下，似乎只有一个名为“email”的元素（可能是您尝试获取的其余元素，假设存在具有该名称的元素），这意味着您需要获取第一项在数组中，换句话说`GetElementsByName("email")[0]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:37:50.373

代码已针对您的阵列进行了修改。

```
GetElementsByName("email")[0]. 
```

# c# - ASP.NET MVC 中的自定义路由约束问题

> ID：15766171
> 
> 赞同：1
> 
> 时间：2013-04-02T14:03:35.120
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在阅读 Pro ASP.NET MVC 3 书中的“磁盘文件的路由请求”部分，并且遇到了一些与自定义路由约束相关的奇怪问题。

我创建了一条自定义路线：

```
//82:1\. this is added so that below routes are checked first before checking the disk files.
routes.RouteExistingFiles = true;

//82:2 the custom route which maps requests to Static/StaticContent.htm to route /Home/Content, only from IE.
routes.MapRoute("DiskFile", "Content/StaticContent.htm",
    new { controller = "Home", action = "Content" },
    new {customConstraint = new UserAgentConstraint("IE")},
    new[] { "UrlsAndRoutes.Controllers" }); 
```

书上说这个路由会让 IE 用户查看 Home/Content 路由，非 IE 用户直接查看 Content/StaticContent.htm。**那样对我不起作用。**

这是正在发生的事情：

1.  我运行应用程序并在 IE 中打开 URL`http://localhost:50483/Content/StaticContent.htm`并被重新路由到 /Home/Content
2.  `http://localhost:50483/Content/StaticContent.htm`然后我在 Chrome 中打开 URL并显示 StaticContent.htm 的原始内容
3.  然后我更改为 IE 并按`Ctrl-R`（刷新）或在 url 栏中选择 URL，然后按`Enter`并被路由到 StaticContent.htm 的原始内容（*为什么？*）
4.  如果我按`Ctrl-F5`，那么，我将被重新路由到 /Home/Content ( *wut?* )

路由不应该将尝试访问 Content/StaticContent.htm 的 IE 用户始终发送到 /Home/Content 吗？

PS：我重新启动了 Visual Studio 并删除了 IE 上的浏览​​器历史记录，**但问题仍然存在**。

[UserAgentConstraint.cs](http://pastebin.mozilla.org/2267630)
[Global.asax.cs 中的 RegisterRoutes 方法](http://pastebin.mozilla.org/2267631)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:43:35.993

**它可能正在被缓存**

即使内容没有改变，Ctrl+F5 也会要求服务器重新加载。

听起来这是正确的行为。

首次重新加载后通过更改 static.html 来验证。然后 Ctrl+R 重新加载。它应该击中动作方法。

# batch-file - 文件夹内的文件列表（以特定格式）并继续浏览子文件夹

> ID：15766174
> 
> 赞同：0
> 
> 时间：2013-04-02T14:03:42.507
> 
> 标签：batch-file

我需要的是文件夹内的文件列表，批处理脚本应该继续遍历所有子文件夹，最好是作为批处理脚本。

输出应该类似于 FILE；小路

到目前为止，我做了一些研究，我接近了：

```
for /f "delims=" %a in ('cd') do @for /f %b in ('dir /b /a') do @echo %b; %a 
```

这样做的问题是，它不会（递归地）进入子文件夹，并且它会将文件夹作为第一个值输出，这是我不想要的。我只想要文件；路径而不是文件夹；小路

还有这个小技巧：

```
for /r %i in (*) do @echo %i 
```

这将是我的计划 b，它以递归方式列出所有文件，但不是我想要的输出格式。

因此，如果存在类似完美解决方案的东西，我会全神贯注:-)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:12:17.360

你快到了……

阅读`HELP FOR`然后尝试此代码

```
 for /r %i in (*) do @echo %~nxi ; %~dpi 
```

这种特殊的修饰符提供了一种扩展变量以实现某些增强功能的方法。 `%~dpi`扩展`%i`为驱动器和路径，并`%~nxi`扩展为文件名和扩展名

# llvm - llvm 内联通道不起作用

> ID：15766194
> 
> 赞同：5
> 
> 时间：2013-04-02T14:04:32.457
> 
> 标签：llvm, inline, llvm-c++-api

我在一个函数上写了一个包装器，我想内联它（这个包装器只是以另一种方式映射原始函数的参数）。我试图在我的更改之后通过我的模块调用 llvm 中的内联程序，但它没有完成工作，尽管我尝试从 opt 工具调用 pass 并且它有效，知道可能有什么问题吗？

这是我如何调用内联通道：

```
llvm::PassManager my_passes;
my_passes.add(llvm::createFunctionInliningPass(4096));
my_passes.run(module); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-23T15:35:45.210

我设法让“AlwaysInline”通行证工作。这些步骤很像你描述的：

```
llvm::Module m("MyJIT", llvm::getGlobalContext());
llvm::PassManager pm;
pm.add(llvm::createAlwaysInlinerPass());
...

llvm::Function* f = buildMyFunction();
f->addAttribute(llvm::AttributeSet::FunctionIndex, llvm::Attribute::AlwaysInline);
...

llvm::DebugFlag = true;
pm.runOnModule(m);
m.dump(); 
```

注意 llvm::DebugFlag 变量，这将导致 llvm 代码生成机制产生大量的诊断输出。它在中声明，`llvm/Support/Debug.h`可以从您的代码或通过 gdb 更改`set llvm::DebugFlag = 1`。

还可以尝试查看 llvm 源代码；相关位将在`${llvm_root_dir}/lib/Transforms/IPO/Inliner.cpp`

# google-app-engine - 缺少 App Engine 开发的先决条件

> ID：15766195
> 
> 赞同：1
> 
> 时间：2013-04-02T14:04:36.457
> 
> 标签：google-app-engine, python-2.7

我刚刚安装了 Google App Engine，它告诉我没有安装 SDK 和 Python。我刚刚运行了 SDK 安装程序，所以我认为这没问题，但我知道我已经安装了 Python 2.7，因为我每天都使用它。

它确实说如果安装了这些项目，我可以使用 Edit>Preferences 编辑首选项以将 App Engine 指向正确的路径。但是，每当我启动 App Launcher 时，它只会在第一条错误消息后停止响应，我永远无法更改任何内容。非常感谢此问题的任何潜在解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-17T15:24:38.740

在 Google App Engine 的 Preferences 下确认目录。

App Engine SDK：C:\Program Files\Google\google_appengine

Python 路径：C:\Users\Noman Raja\AppData\Local\Programs\Python\Python35-32

[![在此处输入图像描述](https://i.stack.imgur.com/skQPU.jpg)](https://i.stack.imgur.com/skQPU.jpg)

# numpy - 为什么 np.dtype(None) = float？

> ID：15766197
> 
> 赞同：2
> 
> 时间：2013-04-02T14:04:41.570
> 
> 标签：numpy

为什么这是 numpy 的默认行为？

```
In [5]: np.dtype(None)
Out[5]: dtype('float64') 
```

我希望`np.issubdtype(None,float)`用于一些涉及图像返回类型的类型检查（PIL 喜欢 0-255 图像，`skimage`喜欢`[0,1)`图像），但这不起作用。我会对看起来干净的解决方法感兴趣，但我会对主要问题的答案感到满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:13:29.630

`None`这是转换为默认 dtype的特殊情况。看：

[https://github.com/numpy/numpy/issues/2190](https://github.com/numpy/numpy/issues/2190)

# api - 是否可以在在 authorize.net 中充电之前检测到卡上的交换分类？

> ID：15766202
> 
> 赞同：0
> 
> 时间：2013-04-02T14:04:54.607
> 
> 标签：api, authorize.net

我正在研究是否有可能在网上设置有限接受借记卡。然而，在我研究的过程中，我发现受最近的德宾修正案监管的借记卡与豁免的借记卡之间的交换率存在巨大差异。根据我的商家账户费用结构，这可能会根据交易的分类方式给我们带来截然不同的成本。

如果我使用 authorize.net 作为网关，是否可以使用他们的 API 仅通过授权交易来确定交换卡的分类？（因此只接受我知道可以廉价处理的卡，并向其他所有人发送“对不起”信息）。有没有其他方法可以在不实际在卡上收费的情况下识别它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:09:17.470

不幸的是没有。用于处理交易的费率在交易时确定，无法通过任何 API 获得。您只能通过查看商家帐户提供商提供的报告来了解收取的费率。

# r - 使用 ddply 计算组特征

> ID：15766204
> 
> 赞同：1
> 
> 时间：2013-04-02T14:04:59.643
> 
> 标签：r, aggregate, plyr

[我有一个与没有 ddply 和合并的情况下计算“组特征”](https://stackoverflow.com/questions/15467219/calculate-group-characteristics-without-ddply-and-merge)相关的后续问题

我有一个类似的数据框（如下所示），但试图计算同一类别中其他水果中腐烂水果的百分比。因此，我不应该考虑所讨论的水果本身是否腐烂。下面的数据框有望澄清这一点，所需的结果列纯粹是出于示例目的而插入的。

理想情况下，我想使用 ddply（沿着 ddply(df, .(Fruit), mutate, Perc = sum(Rotten)/length(Rotten)) 的行）。但是，我无法找到一种方法来仅考虑同一组中其他行的值。我想我可以根据相关行的值使用 if 语句的组合，但我想知道是否有更优雅的方法来实现这一点？非常感谢提前，W

```
 Fruit Rotten Desired_Outcome
1   Apple      1            0.33
2   Apple      1            0.33
3   Apple      0            0.66
4   Apple      0            0.66
5    Pear      1            0.66
6    Pear      1            0.66
7    Pear      1            0.66
8    Pear      0            1.00
9  Cherry      0            0.00
10 Cherry      0            0.00
11 Cherry      0            0.00
12 Banana      1              NA

Fruit=c(rep("Apple",4),rep("Pear",4),rep("Cherry",3),"Banana")
Gender=c(rep("Male",3),rep("Female",3))
Rotten=c(1,1,0,0,1,1,1,0,0,0,0,1)
Desired_Outcome=c(0.33,0.33,0.66,0.66,0.66,0.66,0.66,1,0,0,0,NA)
df=data.frame(Fruit,Rotten,Desired_Outcome)     
df 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:24:14.857

```
ddply(df, 
      .(Fruit), 
      mutate, 
      Perc = (sum(Rotten) - Rotten)/(length(Rotten)-1)) 
```

`mutate`将按元素工作，因此您可以从总和中减去每一行的值。

```
 Fruit Rotten Desired_Outcome      Perc
1   Apple      1            0.33 0.3333333
2   Apple      1            0.33 0.3333333
3   Apple      0            0.66 0.6666667
4   Apple      0            0.66 0.6666667
5  Banana      1              NA       NaN
6  Cherry      0            0.00 0.0000000
7  Cherry      0            0.00 0.0000000
8  Cherry      0            0.00 0.0000000
9    Pear      1            0.66 0.6666667
10   Pear      1            0.66 0.6666667
11   Pear      1            0.66 0.6666667
12   Pear      0            1.00 1.0000000 
```

# qt - Qt：在制作之前运行脚本

> ID：15766208
> 
> 赞同：3
> 
> 时间：2013-04-02T14:05:07.490
> 
> 标签：qt, makefile

我有一个脚本 runScript.sh，我想在创建应用程序之前运行（设置一些环境变量等）。

在我的 .pro 文件中使用[从 QMake 运行程序/脚本的建议](https://stackoverflow.com/questions/3612283/running-a-program-script-from-qmake)，我在第一行，

```
QMAKE_POST_LINK += ./runScript.sh 
```

这将在 a`make`上编译并链接我的应用程序，然后运行脚本。

我已经看到了[如何在 .pro 文件中将脚本设置为目标](http://dev.modmancer.com/index.php/2010/11/14/qmake-building-dependencies/)的示例，但我不确定我是否完全掌握了这个概念。有人可以更好地解释它吗，或者（甚至更好）有人知道如何做我想做的更简单的事情（我希望有一个“QMAKE_PRE_LINK”，但似乎不存在哈哈）？

使用 Qt-4.8.4 & qmake 2.03

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T14:36:46.263

您发布的链接很好地解释了这一点。

```
extralib.target = extra
extralib.commands = echo "Building extralib.."; \    # Run your programs here
                make -w -C ../my_libraries/extralib; \
                echo "Done building extralib."; \

extralib.depends =
QMAKE_EXTRA_TARGETS += extralib
PRE_TARGETDEPS = extra 
```

所以，这可以重写为

```
 extralib.target = extra
    extralib.commands = echo "Setuping the envirovment.."; \
                            export MYVAR="/usr/src/whatever" \
                            export SECONDVAR="/home/user" \
                            ./runScript.sh

    extralib.depends =

    QMAKE_EXTRA_TARGETS += extralib
    PRE_TARGETDEPS = extra 
```

# c# - 如何将数据从 Excel 文件加载到 sql 数据库？

> ID：15766214
> 
> 赞同：1
> 
> 时间：2013-04-02T14:05:21.617
> 
> 标签：c#, visual-studio, windows-ce, oledb, smart-device

我正在为 Honeywell Dolphin 6100 开发一个应用程序，这是一款带有条形码扫描仪的移动计算机，它使用类似 Windows CE 5.0 的操作系统。

我想将数据从 excel 文件导入应用程序的本地数据库。我正在关注这个[教程](http://csharp.net-informations.com/excel/csharp-excel-oledb.htm)

问题是找不到**System.Data.OleDb ，这对于从外部文件读取数据很重要。**

我需要做什么 ？

**注意**：我正在使用 VS2008，并且正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:25:59.930

你有一大堆障碍要克服。只有少数是

*   Windows CE 不支持 OLEDB。
*   Pocket Excel 没有自动化对象模型，甚至没有任何已发布的文件格式规范
*   桌面库（如 Microsoft.Office.Interop.Excel）在 Windows CE 下无法运行

基本上，我认为您正在走上一条糟糕的选择之路。

您在这里要解决的实际业务问题是什么？您是否在需要合并到本地 SQL Compact 数据库的设备上创建了 Pocket Excel 文件？是否有不使用 Excel 的选项？还是您在 PC 上有桌面 Excel 文件，并且您希望将数据传输到设备上？如果是这样，文件是如何到达设备的？你能把它们转换成CSV吗？您可以将服务放在某处的服务器上为您进行转换吗？

可能有一种方法可以解决整体问题，只是不在您尝试的道路上。不过，我们需要了解实际问题以帮助您获得更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:29:05.137

一些选项：

*   编写一个一次性控制台应用程序来进行导入。
*   使用 SQLserver management studio 一次性导入 excel 文件
*   使用微软访问，这将允许您打开 excel 文件和数据库并在它们之间进行查询。

除非您需要让您的 CE 应用程序一直访问 excel 文件，否则可能不值得现在让它工作。

# windows-phone-7 - WP7 模拟器 VS 设备。下载性能

> ID：15766218
> 
> 赞同：0
> 
> 时间：2013-04-02T14:05:36.363
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

我使用模拟器开发了 WP7 应用程序。一切都很棒。为了与服务器通信，我使用了 WebClient 和 RestClient。但是要在真实设备上测试应用程序 - 我大吃一惊。

1)

```
private void LoadData()
{
var webClient = new WebClient();
webClient.DownloadStringCompleted += DownloadStringCompleted;
webClient.DownloadStringAsync(new Uri(Constants.Url1));
//Point_1
}

private void DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    //Point_2     
} 
```

在 Point_1 和 Point_2 之间的模拟器上 0.8-1.2 秒。在 Point_1 和 Point_2 之间的真实设备 (HTC Radar WP7.8) 上 15-20 秒。

2)

```
var request = new RestRequest(url) {Method = Method.POST}; 
//Point_3
RestClient.ExecuteAsync(request, response =>
{
//Point_4
} 
```

在 Point_3 和 Point_4 之间的模拟器上 0.3-0.5 秒。在 Point_3 和 Point_4 之间的真实设备 (HTC Radar WP7.8) 上 18-22 秒。

我的电脑和手机在同一个无线网络中。我有三个问题：

第一：正常吗？

第二：为什么会这样？

第三：我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:06:07.893

有很多因素，但值得记住的是，模拟器性能通常比设备好得多，您应该在设备上试用。

话虽如此，您应该考虑数据显示的替代模型，例如拨打电话，然后使用 ObservableCollection 之类的东西在数据块到达时填充数据。

您还可以使用后台任务实现下载数据并使其可用。

最后，这取决于你能做什么和不能做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:05:51.180

就像[Hermit 所说](https://stackoverflow.com/users/1306871/hermit-dave)：“有很多因素，但值得记住的是，模拟器的性能通常比设备好得多，你应该在设备上试一试。”

我的解决方案是 - 在真实设备上测试网络性能时不要使用调试模式。只需创建 XAP 文件并将其加载到设备上。

# .net - 可以使用 DataEventArgs 而不是自定义的事件数据类？

> ID：15766219
> 
> 赞同：0
> 
> 时间：2013-04-02T14:05:36.460
> 
> 标签：.net, events, generics, event-handling

**在事件声明中使用泛型`DataEventArgs<TData>`类，而不是声明和使用自定义 EventArgs 继承类，是否违反了 .Net 事件“模式”约定？或者在某些情况下被认为是不好的做法？**

（命名事件参数的*命名*约定是使用事件名称并附加后缀“EventArgs”。使用`DataEventArgs<TData>`省略了事件名称，尽管它向您显示了传输数据的类型。）

您可能会争辩说，通用 DataEventArgs 类对于扩展是封闭的，例如添加另一个属性，除非您可以修改用于 TData 的类。

* * *

更长的解释：

在声明包含一些数据的标准委托事件时，我理解标准事件“模式”约定是使用通用 EventHandler 委托声明它，因此：

```
public event EventHandler<SomethingHappendEventArgs> SomethingHappend; 
```

在特定的地方`SomethingHappendEventArgs`被声明为类似的东西

```
public class SomethingHappendEventArgs : EventArgs
{
    public SomeDataType Value { get; private set; }
    public SomethingHappendEventArgs(SomeDataType data)
    {
        this.Value = data;
    }
} 
```

在谷歌搜索时，我注意到有几个 Microsoft 命名空间提供了一个通用的 DataEventArgs 类（包括 Microsoft.Practices.Prism.Events）。但是，我无法找到任何关于何时使用它的建议或约定指示，而不是自定义事件数据类，例如SomethingHappendEventArgs，反之亦然。

因此，如果我想在事件数据中包含*一条*数据，是否有任何理由我应该使用自定义事件数据类，例如 SomethingHappendEventArgs ，而不是像这样声明事件？

```
public event EventHandler<DataEventArgs<SomeDataType>> SomethingHappend; 
```

泛型`DataEventArgs`可以这样声明：

```
public class DataEventArgs<TData> : EventArgs
{
    public TData Value { get; private set; }
    public DataEventArgs(TData value)
    {
        this.Value = value;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T16:59:32.187

几乎没有理由不对非公共事件使用通用 EventArgs 子类。但是，对于属于真正公共 API 的事件，由于潜在的向后兼容性问题，事情会变得有点棘手。对于公开消费的事件，创建特定于事件的 EventArgs 子类将使您能够灵活地添加成员，而不会影响 API 消费者。

对于不属于公共 API 的事件，如果 EventArgs 子类因特定事件而更改，则仍有一些潜在的返工工作要做，因为通用子类不再适合。然而，这通常应该是相当少的，并且编译器应该捕获任何问题（无论是使用显式还是匿名处理程序方法）。显然，在最初的开发工作和潜在的更改工作之间需要进行权衡——首先，我使用通用的 EventArgs 来处理非常适合的内部事件，而且我很少需要在初始之后进行更改释放。

# php - 将php数组传递给javascript

> ID：15766221
> 
> 赞同：2
> 
> 时间：2013-04-02T14:05:39.317
> 
> 标签：php, javascript, google-maps

我使用 JavaScript (v3 api) 创建了一个谷歌地图。我在这上面打了几个标记，只是为了表明它是可以做到的。我已经在每个标记特定的文本框中添加了一些文本，只是为了看看是否可以完成。标记和文本框都很难看，但这是另一天的问题。地图占据了大约 75% 的屏幕宽度和 100% 的屏幕高度。我有一个用户帖子的 mySQL 数据库。数据包括帖子#id、类别、IP地址、经度值、纬度值、城市、用户名、标题和帖子内容。我已经“浮动”了一个包含帖子类别并在地图旁边向上的表，使用 PHP 查询数据库，将数据库行推入一个数组并将其用作表的源。这占据了显示宽度的剩余部分。

很好，到目前为止。

我想为每个帖子添加一个标记，以便该标记位于该帖子的经度和纬度。我想将内容添加到特定于该帖子的标记文本框（例如城市、用户名、帖子标题、帖子内容）。此外，我希望能够将显示的表格中的帖子链接到地图标记，例如，表格中特定帖子上的鼠标悬停事件可能会导致与该标记关联的文本框变得可见。

但我似乎找不到将 PHP 数组传递给 Google Map JavaScript 的方法，以便我可以使用它来根据需要添加标记。我还没有找到将 Google 地图外部对象上的鼠标悬停事件与 Google 地图标记相关联的方法。

我进行了广泛的研究，并发现了对前者的类似请求——将 PHP 数组传递给 JavaScript。建议的解决方案通常是使用某种分隔符（例如逗号）从 PHP 数组创建一个字符串，然后将其传递给 JavaScript，在其中将其重新组合为一个数组。我不相信这在我的情况下会起作用。

我当前的代码位于一个文件中。样式内容位于 html head 部分的样式部分中，以后可以移动到单独的 css 文件中。Google 地图 JavaScript 位于脚本部分中，同样位于 html 头中，并且可以移动到单独的 js 文件中。正文只包含一点 html - 用于地图画布的 div 和使用 PHP 的表格，以获取单个 PHP 数组中的数据库行并为表格创建 html。

我知道“PHP 是服务器端技术，而 JavaScript 是客户端”，正如已多次指出的那样。但是肯定有某种方法可以将 PHP 从 SQL 数据库中获得的数据数组（不是数据来源特别相关）传递给 JavaScript 代码吗？

我为如此冗长而道歉，如果我的问题在我错过或误解的地方得到了回答。或者，如果我特别愚蠢。

小心。

麦克风

通过编辑原始帖子添加此内容。

好的。我可能已经找到了第二个问题的答案：如何创建从外部元素到 Google 地图标记的链接。[http://econym.org.uk/gmap/mouseover.htm](http://econym.org.uk/gmap/mouseover.htm)总是这样，在放弃寻找该项目的东西之后。

麦克风

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T14:09:38.220

使用 . 将您的 PHP 数组转换为 JSON [`json_encode`](http://php.net/manual/en/function.json-encode.php)。

现在您有了一个可以使用的 JavaScript 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T08:10:29.847

```
$jsonString = json_encode($phpArray); 
```

在javascript中：-

```
var jsonStr  = <?=$jsonString?>; 
```

# r - 在 R 中编写特殊表达式，包括使用 LaTeX 书法字体

> ID：15766224
> 
> 赞同：0
> 
> 时间：2013-04-02T14:05:46.820
> 
> 标签：r, plot

我该怎么写

```
$\mathcal{O}$(LaTeX code) 
```

在R中的情节传说中？

# android - Android 多用户登录 Facebook api 3

> ID：15766230
> 
> 赞同：1
> 
> 时间：2013-04-02T14:06:07.750
> 
> 标签：android, facebook, android-activity, oauth

如何允许多个用户通过 facebook SDK 登录？

似乎sdk正在使用本地本机facebook应用程序，因此当前登录的用户是获得授权的用户，但我希望能够授权其他人。无论如何强制它通过用户可以登录的网络对话框视图？

我问这个是因为我的应用程序的一些用户将拥有个人和工作帐户，并且希望能够同时访问这两个帐户。

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T16:16:01.257

查看 SDK 附带的 SwitchUserSample。

# php - ZF2 - 从路由生成 URL

> ID：15766231
> 
> 赞同：9
> 
> 时间：2013-04-02T14:06:11.023
> 
> 标签：php, url, action, zend-framework2

在zend 2中，我无法弄清楚从我想要的任何地方生成Url

我得到了动作和控制器，所以我试试这个：

```
$this->url('myControllerName', array('action' => 'myActionName')); 
```

但这会返回一个对象，我只想要这条路线的完整 URL 字符串

有人可以帮我找到正确的方法吗？

编辑：根据 Stoyan 的说法，也许我在路线上犯了一个错误。这是我的 module.config 的一部分

```
'router' => array (
                'routes' => array (
                        'indexqvm' => array (
                                'type' => 'segment',
                                'options' => array (
                                        'route' => '/Indexqvm[/:action][/:id_event]',
                                    'constraints' => array (
                                            'action' => '[a-zA-Z][a-zA-Z0-9_-]+',
                                            'id_event' => '[0-9]+'
                                    ),
                                    'defaults' => array (
                                            'controller' => 'Qvm\Controller\Indexqvm',
                                            'action' => 'index' 
                                    ) 
                            ) 
                    ), 
```

我的电话：

```
echo $this->url('indexqvm', array('action' => 'list-index')); 
```

错误：可捕获的致命错误：Zend\Mvc\Controller\Plugin\Url 类的对象无法转换为字符串

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-02T14:31:34.093

在调用之前使用 echo `$this->url(...)`（见下文），这将显示整个 URL。

```
<?php echo $this->url('route-name', $urlParams, $urlOptions); ?> 
```

请注意，第一个参数`url()`是文件中指定的路由名称`[module]/config/module.config.php`。

有关 ZF2 的 URL 视图帮助程序的更多信息，请参阅[此内容。](http://framework.zend.com/manual/2.0/en/modules/zend.view.helpers.html#url-helper)

编辑以回应问题编辑：

上面的部分与使用 URL 视图助手有关。

如果您想要控制器中的 URL，那么您需要 URL 控制器插件。

```
<?php $url = $this->url()->fromRoute('route-name', $params, $options); ?> 
```

[这](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.plugins.html#the-url-plugin)是此控制器插件的 ZF2 手册的参考。

希望这可以帮助 ：）

斯托扬

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-17T11:45:15.727

您可以在 .phtml 文件中使用它

```
echo $this->url('HelloWorld/default', array('controller'=>'Index', 'action'=>'registration')); 
```

其中 HelloWorld/default 是路由，其余的是控制器及其操作，您也可以发送其他参数，仅在数组中作为键和值对添加。

# 2d - 二维中两点线的百分比

> ID：15766232
> 
> 赞同：0
> 
> 时间：2013-04-02T14:06:12.133
> 
> 标签：2d, distance, point

我正在做一个学校编程项目，需要按百分比知道一个具体的点。例如：

点 1 = 10,5 点 2 = 16,8

现在我需要从两个点和一个距离百分比计算一个新点。例如距离为 25%。

我已经在互联网上进行了很多搜索，但我不明白我需要如何计算这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:14:39.900

如果您的意思是距离是它们之间距离的 25%，并且新点介于两者之间：

你可以使用这个：

point1=x1,y1 & point2=x2,y2 & new_point=xn,yn & ratio=r

然后：

xn=(1-r) *x1+r* x2

yn=(1-r) *y1+r* y2

# django - Heroku Django 应用程序与本地数据库

> ID：15766234
> 
> 赞同：0
> 
> 时间：2013-04-02T14:06:15.973
> 
> 标签：django, heroku

早上好，我想知道是否可以在 Heroku 上部署 django 应用程序，并在本地服务器上而不是在 Heroku 内使用 pg 数据库（或任何其他数据库引擎）。如果是这样，您如何将应用程序连接到本地服务器？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:27:04.017

看看这个 Heroku-Django Skel

[https://github.com/michaelmior/heroku-django-skeleton](https://github.com/michaelmior/heroku-django-skeleton)

# php - 将重复元素组合为多维数组中的数组

> ID：15766236
> 
> 赞同：4
> 
> 时间：2013-04-02T14:06:19.733
> 
> 标签：php, arrays

我想知道在使用多媒体数组时，如果某个键相同，如果某个键相同，有没有办法将其他键的内容组合到自己的数组中？

像这样的东西：

```
// name is the same in both arrays
array(
    array(
        'name' => 'Pepsi',
        'store' => 'Over here',
        'number' => '1234567'
    ),
    array(
        'name' => 'Pepsi',
        'store' => 'Over here',
        'number' => '5556734'
    )
) 
```

变成这样的东西

```
array(
    array(
        'name' => 'Pepsi',
        'store' => array('Over here', 'Over here'),
        'number' => array('1234567', '5556734')
    )
) 
```

定义键是检查`name`元素是否与其他数组相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:27:13.307

你可以试试这样的功能。

```
function mergeByKey($array,$key){
  $tmp_array = array();
  foreach ( $array as $k => $row ) {
    $merged = false;
    foreach ($tmp_array as $k2 => $tmp_row){
       if ($row[$key] == $tmp_row[$key]){
          foreach ( $row as $k3 => $value ) {
            if ($k3 == $key) continue;
            $tmp_array[$k2][$k3][] = $value;
            $merged = true;
          }
       }
       if ($merged) break;
    }
    if (!$merged) {
       $new_row = array();
       foreach ( $row as $k4 => $value ) {
         if ($k4 == $key) $new_row[$k4] = $value;
         else $new_row[$k4] = array($value);
       }
       $tmp_array[] = $new_row;
    }
  }
  foreach ( $tmp_array as $t => $row ) {
    foreach ( $row as $t2 => $value ) {
      if ( count($value) == 1 && $t2 != $key ) $tmp_array[$t][$t2] = $value[0];
    }
  }
  return $tmp_array;
} 
```

将数组作为第一个参数传递，将键作为第二个参数传递。我指的是你的数组结构

编辑：错过了一块

编辑2：如果结果数组包含一个字符串的元素，它返回一个字符串而不是一个元素的数组

[演示](http://codepad.viper-7.com/l61cai)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T09:37:50.957

此函数使用给定的字段名称作为分组标识符，并将所有其他字段转换为数组。

请注意，您的字段名称的单次出现将产生具有其他字段的单个元素的数组。我不确定这是否是一个理想的特征，但只是确保你知道;-)

```
$arr = array(
    array(
        'name' => 'Pepsi',
        'store' => 'Over here',
        'number' => '1234567'
    ),
    array(
        'name' => 'Pepsi',
        'store' => 'Over here',
        'number' => '5556734'
    )
);

function mergeArray($array, $column)
{
    $res = array();

    foreach ($array as $item) {
        foreach ($item as $key => $value) {
            if ($key === $column) {
                $res[$column][$key] = $value;
            } else {
                $res[$column][$key][] = $value;
            }
        }
    }
    return array_values($res);
}

print_r(mergeArray($arr, 'name')); 
```

[**演示**](http://codepad.viper-7.com/dcT7fq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:16:03.510

感谢 Gianni Lovece 的回答，但我能够根据这个问题开发一个更简单的解决方案。只需插入`$result_arr`以浏览并`$key`用作基础，它会立即输出一个多维数组，其中包含重复元素的非重复值（参见下面的示例）。

```
function multiarray_merge($result_arr, $key){

    foreach($result_arr as $val){
        $item = $val[$key];     
        foreach($val as $k=>$v){
            $arr[$item][$k][] = $v;
        }
    }

    // Combine unique entries into a single array
    // and non-unique entries into a single element
    foreach($arr as $key=>$val){
        foreach($val as $k=>$v){
            $field = array_unique($v);
            if(count($field) == 1){
                $field = array_values($field);
                $field = $field[0];
                $arr[$key][$k] = $field;
            } else {
                $arr[$key][$k] = $field;
            }
        }
    }
    return $arr;
} 
```

例如，在这个问题的示例数组中，运行`multiarray_merge($mysample, 'name')`返回

```
array(
    'Pepsi' => array(
        'name' => 'Pepsi',
        'store' => 'Over here', // String: Not an array since values are not unique
        'number' => array('1234567', '5556734') // Array: Saved as array since values are unique
    )
); 
```

# c++ - unordered_map - {{key,value},{key,value}} 语法无效

> ID：15766237
> 
> 赞同：7
> 
> 时间：2013-04-02T14:06:19.877
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, std

我正在尝试编译[从这里获取的代码](http://www.cplusplus.com/reference/unordered_map/unordered_map/unordered_map/)

```
// constructing unordered_maps
#include <iostream>
#include <string>
#include <unordered_map>

typedef std::unordered_map<std::string,std::string> stringmap;

stringmap merge (stringmap a,stringmap b) {
  stringmap temp(a); temp.insert(b.begin(),b.end()); return temp;
}

int main ()
{
  stringmap first;                              // empty
  stringmap second ( {{"apple","red"},{"lemon","yellow"}} );       // init list
  stringmap third ( {{"orange","orange"},{"strawberry","red"}} );  // init list
  stringmap fourth (second);                    // copy
  stringmap fifth (merge(third,fourth));        // move
  stringmap sixth (fifth.begin(),fifth.end());  // range

  std::cout << "sixth contains:";
  for (auto& x: sixth) std::cout << " " << x.first << ":" << x.second;
  std::cout << std::endl;

  return 0;
} 
```

使用 MSVC2012 但我收到

> 错误 C2143：语法错误：在 '{' 之前缺少 ')'

在代码行上

```
stringmap second ( {{"apple","red"},{"lemon","yellow"}} );       // init list 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T14:08:14.680

Visual Studio 2012 缺少许多现代 C++ 功能，其中包括`initialiser lists`. 有关概述，请参见[此处。](http://msdn.microsoft.com/en-us/library/vstudio/hh567368.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T14:58:35.723

您的代码没有任何问题，并且可以使用 GCC 和 Clang 正常编译。问题在于 Visual C++。

初始化程序列表是**Visual Studio 2012 Update 2**中将提供的功能之一。这意味着您目前无法在 Visual Studio 2012 中使用此功能。有一系列[社区技术预览 (CTP)](http://support.microsoft.com/kb/2797912 "VS2012 更新 2 CTP 4")，但它们带有一些小问题，包括缺乏 IntelliSense 支持和非常明确的免责声明，即它们不适合用于生产代码。

所以，简而言之：您的代码是正确的，但在 Microsoft 发布 Visual Studio 2012 Update 2 之前它不会在 VS2012 中编译。不知道什么时候会到来，但 Visual Studio 2012 于 2012 年 8 月首次发布，也是最后一次更新（更新 1）于 2012 年 11 月发布。从那时起，关于该主题的消息很少，但自去年年底以来一直“即将推出”。

**立即更新** ，[更新 2](http://support.microsoft.com/kb/2797912/en-us "视觉工作室 2012 更新 2")已发布。但是，它不包括更新 2 CTP 中承诺的*任何*C++ 改进。这很有趣，因为它们应该是更新 2 中的预览。显然，Visual C++ 团队*“目前正在完成这些功能的发布计划”*并且*“将很快分享更多细节”*。（来自[更新 2 发布公告](http://blogs.msdn.com/b/somasegar/archive/2013/04/04/visual-studio-2012-update-2-now-available.aspx "更新 2 发布公告”；")的评论。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T14:37:54.633

更准确地说，初始化器列表在 VS2012 CTP 中具有特色，但该更新尚未发布，并且不包含对标准库中的初始化器列表的支持——IOW，它们已经接近，但微软还没有完全完成它们然而。

# java - Class Not Found Exception ，尽管存在 jar

> ID：15766240
> 
> 赞同：0
> 
> 时间：2013-04-02T14:06:24.237
> 
> 标签：java, xslt

```
in my program

package com.XSLTTransformation;

import java.io.IOException;
import java.util.Collection;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;

import org.apache.poi.openxml4j.exceptions.InvalidFormatException;

import net.sf.jxls.exception.ParsePropertyException;
import net.sf.jxls.transformer.XLSTransformer;

public class XSLTTransformation {
    public static void main(String[] args) {
        Collection<Employee> staff = new HashSet<Employee>();
        staff.add(new Employee("Derek", 35, 3000, 0.30));
        staff.add(new Employee("Elsa", 28, 1500, 0.15));
        staff.add(new Employee("Oleg", 32, 2300, 0.25));
        staff.add(new Employee("Neil", 34, 2500, 0.00));
        staff.add(new Employee("Maria", 34, 1700, 0.15));
        staff.add(new Employee("John", 35, 2800, 0.20));
        Map<String, Collection<Employee>> beans = new HashMap<String, Collection<Employee>>();
        beans.put("employee", staff);
        XLSTransformer transformer = new XLSTransformer();
        try {
            transformer.transformXLS("C:/Users/hussain.a/Desktop/malay/newprojectpocdetails/temp.xls", beans, "C:/Users/hussain.a/Desktop/malay/newprojectpocdetails/proovNYOutput.xls");
        } catch (ParsePropertyException e) 
        {
            e.printStackTrace();
        } catch (InvalidFormatException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

我发现这个错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/jexl2/parser/Node
    at net.sf.jxls.transformer.XLSTransformer.transformWorkbook(XLSTransformer.java:269)
    at net.sf.jxls.transformer.XLSTransformer.transformXLS(XLSTransformer.java:221)
    at net.sf.jxls.transformer.XLSTransformer.transformXLS(XLSTransformer.java:201)
    at com.XSLTTransformation.XSLTTransformation.main(XSLTTransformation.java:27)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.jexl2.parser.Node
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source) 
```

我已经放置了这个类的罐子，我无法识别真正的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:08:51.870

也添加`commons-jexl.jar`到**CLASSPATH**中；

试试这个链接：[https ://stackoverflow.com/a/8286795/1743852](https://stackoverflow.com/a/8286795/1743852)

# ios - 目标 C：在 iOS 的 rssfeed 中格式化标准发布日期

> ID：15766245
> 
> 赞同：0
> 
> 时间：2013-04-02T14:06:33.350
> 
> 标签：ios, objective-c, xcode, wordpress

我有一个 iOS rss feed 应用程序，它使用 xml 解析器来显示标题和日期，问题在于日期，它使用这种方法：

```
`if ([元素 isEqualToString:@"title"])
    {
        [标题附加字符串：字符串]；
    }
    else if ([element isEqualToString:@"pubDate"])
    {
        [日期追加字符串：字符串]；

`}` 

`

& 在我的 ViewController 中，我使用了这个方法来显示日期：我使用了名为 rssdate 的 UILbe，我使用了这个方法

 `rssDate.text = [[self.parseResults objectAtIndex:indexPath.row]objectForKey:@"pubDate"];
    [cell.contentView addSubview:rssDate];`

但日期以这种格式显示：@"Tue, 02 Apr 2013 18:54:26 +0000";

我如何更改这种格式并像这样设置日期格式：日期标签：@“yyyy/MM/dd hh:mm a”

            回答 #1

赞同：1

时间：2013-04-02T14:08:30.153

使用日期格式化程序（请参阅`NSDateFormatter`参考资料）将日期字符串解析为日期。然后使用另一个日期格式化程序将日期转换回您想要的格式的字符串。

```

# javascript - mootools 复选框更快的方法

> ID：15766247
> 
> 赞同：0
> 
> 时间：2013-04-02T14:06:38.863
> 
> 标签：javascript, mootools, selector, each, checkbox

我可以加快这个算法吗？下面使用的 mootools javascript 库？

```
var selected = '',
    slaves   = $$('input[name^="product[photos][attach][]"]');

slaves.addEvent("change", function () {
       selected = parseInt(this.get('value'));

       slaves.each(function(el){
          if (selected != parseInt(el.get('value'))) {
              el.getParent('div').addClass('hidden');
              el.checked = false;
          }
       });
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:47:43.953

如果您确实有那么多复选框，或者数量可能会有所不同，我建议您在 mootools 中使用中继事件（委托）。我在改变、聚焦和模糊事件方面取得了非常好的结果：

```
function onChange(_event, _input){
    //your code here
}
$(window).addEvent('change:relay(input[name^="product[photos][attach][]"])', onChange); 
```

可以在[此处找到授权文档](http://mootools.net/docs/core/Element/Element.Delegation)

# android - 检测单击父级时单击了哪个子级

> ID：15766248
> 
> 赞同：1
> 
> 时间：2013-04-02T14:06:45.537
> 
> 标签：android

我有一个包含大量图像的布局。我要做的是，当单击图像时，我必须显示其详细信息。但我不想对所有图像都有 onClickListeners。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:09:13.890

您不必为所有图像使用不同的处理程序。而是对所有图像使用一个处理程序。这将使您的代码更清晰、易于管理并解决您的问题。

```
public void onCreate(Bundle bundle) {
    //...

    OnClickListener mHandler = new OnClickListener() {
        @Override
        public void onClick(View v) {
            switch(v.getId()) {
                case R.id.img1:
                    //..
                    break;

                case R.id.img2:
                    //....
                    break;
            }
        }
    };

    ImageButton btn1 = (ImageButton)findViewById(R.id.img1);
    ImageButton btn2 = (ImageButton)findViewById(R.id.img2);
    //...

    btn1.SetOnClickListener(mHandler);
    btn2.SetOnClickListener(mHandler);
    //...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:11:08.443

一统`Listener`天下。

1.  在对象上实现`onClick()`，将其注册为侦听器

2.  在`onClick()`中，检查`View`作为参数传递的对象以确定单击了哪些图像。你可以做任何事情，从`getId()`投射到`(ImageView)`实际图像。

3.  一旦您知道单击了哪个图像，请按照您的意愿进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:11:37.663

如果您希望为一个`ImageView`（或其他）实现自定义行为，然后拥有该类型视图的多个实例，您应该将其子类化`ImageView`并将您的侦听器放在那里。然后你就有了一个封装`View`来实现你想要的自定义行为，如果你以后决定你想要更多或更少或者它们，或者把它们放在另一个地方，很容易移动`View`它及其行为而不会撕开你的`Activity`.

# java - maven编译错误

> ID：15766250
> 
> 赞同：0
> 
> 时间：2013-04-02T14:06:56.490
> 
> 标签：java, maven, dependencies

在我的应用程序中，我有两个模块。我需要将类从其中一个导入到另一个。为此，我向第二个添加了一个依赖项，如下所示：

```
 <dependency>
      <groupId>com.messagedna-archive.mimeparser</groupId>
      <artifactId>MimeParser</artifactId>
      <version>1.0</version>
  </dependency> 
```

这是必须导入的模块的 pom.xml 的一部分：

```
 <groupId>com.messagedna-archive.mimeparser</groupId>
  <artifactId>MimeParser</artifactId>
  <version>1.0</version> 
```

应用程序由 maven 很好地打包，但是当我尝试在服务器上运行它时，我看到：

```
java: package com.messagedna.mimeparser does not exist 
```

（这是来自第一个模块的包）在我调用这些包的类中，没有红色下划线。

mvn -install 对这两种方法都执行。

你怎么看，这个问题怎么解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:26:40.630

Maven 模块产生工件。在您的情况下，这些可能是 jar 文件。所以最终你有两个 jar 文件需要添加到服务器类路径中。如何做到这一点取决于服务器，现在你知道了大致的想法。

ps/ "mvn -install" 只是将构建的工件复制到 maven repo 中，而不是复制到您的应用程序类路径中。

# ruby-on-rails - FactoryGirl before(:create) 回调未创建关联

> ID：15766253
> 
> 赞同：7
> 
> 时间：2013-04-02T14:07:07.097
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, rails-activerecord

我有一个 FactoryGirl 工厂，它创建一个`Order`但 before(:create) 回调不会创建关联的工厂对象：

**家长班**

```
class Order < ActiveRecord::Base
  attr_accessible :tax, :total
  has_many :order_lines

  validates :user, presence: true
  validates :order_lines , presence: true
end 
```

**儿童班**

```
class OrderLine < ActiveRecord::Base
  attr_accessible :order, :product, :qty
  belongs_to :order
  belongs_to :product
  ...
  ...
  validates :order, presence: true
end 
```

**工厂**

```
Factory :order do
  ...
  ignore do
    number_or_order_lines 1
  end
  before(:create) do |order, evaluator|
    FactoryGirl.create_list :order_line, evaluator.number_or_order_lines, order: order
  end
end

Factory :order_line do
   association :user
   association :order
   ...
end 
```

**问题**

在我的 rspec 测试中，如果我创建一个订单对象：

```
describe Order do
  before {@order = FactoryGirl.create(:order) }  => #throws error (see below)
end 
```

**ERROR** ActiveRecord::RecordInvalid Validation failed 订单行不能为空

**更新**

但是，我可以成功地执行以下操作，但显然只能完成创建一个：

```
after(:build) do |order, evaluator|
  order.order_lines << FactoryGirl.build(:order_line, order: order)
end 
```

**假设**-我可以看到`create_list`可能尝试保存的位置`OrderLine`会导致错误，因为尚未保存父级-但我不知道它是否仍返回处于无效状态的 OrderLine 对象，因此订单对象上的 order_lines 集合不应为空。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-08T14:59:26.757

您需要像这样将您的 OrderLine 工厂放入订单记录中

```
Factory :order do
    ...
    ignore do
      number_or_order_lines 1
    end
    before(:create) do |order, evaluator|
      order.order_lines << (FactoryGirl.create :order_line, order: order)
    end
  end 
```

# java - Java将2个字符串与变量的完全匹配匹配

> ID：15766257
> 
> 赞同：0
> 
> 时间：2013-04-02T14:07:22.330
> 
> 标签：java, string, match

我已经搜索过，但我无法理解我的错误。

我有以下

```
while(logincount < 3){
if (tempuser.equals(actualuser) & (temppass.equals(actualpass))
  {
  System.out.println("Success");
  }
else  {
  System.out.println("FAIL");
    logincount=logincount+1;
  }
} 
```

因为我不能从 CMD 复制；[http://puu.sh/2svAo](http://puu.sh/2svAo)错误告诉我它期待一个'>'

所以我尝试了 &,&& 和 2 我现在找不到钥匙。

谢谢，再次抱歉，如果这很愚蠢，我在上一个问题中被否决了，所以我希望这是“更好”！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:09:35.440

线

```
if (tempuser.equals(actualuser) & (temppass.equals(actualpass)) 
```

有一个额外的开口支架，要么

```
if (tempuser.equals(actualuser) & temppass.equals(actualpass)) 
```

或者

```
if ((tempuser.equals(actualuser)) & (temppass.equals(actualpass))) 
```

应该可以正常工作。

编辑：哎呀，感谢 dukeling 注意到我在最后一行所做的错字。（现已修复）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:16:26.627

那里有两个错误：1.“（temppass”确实需要前面的“（” 2.“&”是按位或，你需要一个逻辑或在这里：“&&”

所以“if (tempuser.equals(actualuser) & (temppass.equals(actualpass))”变成了“if (tempuser.equals(actualuser) && temppass.equals(actualpass))”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:18:23.713

if语句中缺少“）”，这是更正

```
 while(logincount < 3){
        if (tempuser.equals(actualuser) & (temppass.equals(actualpass)))
          {
          System.out.println("Success");
          }
        else  {
          System.out.println("FAIL");
            logincount=logincount+1;
          }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:26:52.680

你可以稍微改进一下你的代码。

```
for (int i = 0; i < 3; i++) {
    if (tempuser.equals(actualuser) && temppass.equals(acutalpass)) {
        System.out.println("Success");
        break;
    } else {
        System.out.println("FAIL");
    }
} 
```

1.  使用`for`循环而不是`while`循环，以便循环变量的初始化和增量在一个地方完成。
2.  使用`&&`而不是`&`for 逻辑`AND`。
3.  如果您的密码检查成功，请添加一条`break`语句。

# mysql - 从 select 语句向表中插入值

> ID：15766258
> 
> 赞同：0
> 
> 时间：2013-04-02T14:07:28.243
> 
> 标签：mysql, sql, sql-insert

我有以下 SQL 查询：

```
INSERT INTO site_city_address (`cityName`, `cityCode`, `stateId`) VALUES  (SELECT a.city, a.cityCode,  b.stateId
  FROM site_address_dropdown a INNER JOIN site_state_address b
    ON a.state = b.stateName); 
```

我知道这可能是错的。我要做的是将a.city、a.cityCode 和b.stateId 的值作为cityName、cityCode 和stateId 插入到shopious_city_address 中。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:08:18.933

您可以`values`在`select`. `insert`在你的情况下，省略`values`：

```
INSERT  INTO site_city_address
        (`cityName`, `cityCode`, `stateId`) 
SELECT  a.city, a.cityCode, b.stateId
FROM    site_address_dropdown a 
INNER JOIN 
        site_state_address b
ON      a.state = b.stateName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:08:17.997

删除`VALUES`关键字。`INSERT INTO...SELECT`具有以下语法，

```
INSERT INTO site_city_address (cityName, cityCode, stateId) 
SELECT  a.city, a.cityCode, b.stateId
FROM    site_address_dropdown a 
        INNER JOIN site_state_address b
            ON a.state = b.stateName 
```

# sql-server - 将大量实体插入 SQL Server 2012

> ID：15766260
> 
> 赞同：2
> 
> 时间：2013-04-02T14:07:31.307
> 
> 标签：sql-server, entity-framework, entity-framework-5

我正在使用 Entity Framework 5 和 SQL Server 2012 进行项目。我们需要一次插入大量行（100k 个实体的顺序）。基本上，我们有一个物理程序，它输出大量二进制数据，然后我们需要处理这些数据并将其提取到 SQL 2012 数据库中。我们在应用程序的其他地方使用 EF5 作为 ORM，但我怀疑它是否能够及时处理这种插入。

我们使用数据库优先的方法，其中从模型生成的 POCO 作为主要 DTO 在整个代码库中传递。

我还要补充一点，此插入涉及具有外键关系的多个表。这是各种批量插入方法的问题吗？

有没有人对此或推荐的方法有类似的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:16:16.563

我会研究可用的批量插入。以下是有关它的一些信息的链接：[批量插入](http://msdn.microsoft.com/en-us/library/ms188365.aspx)。我还会看一下[这里](https://stackoverflow.com/questions/8980179/very-poor-performance-for-batch-insert-with-sql-server-ce-4-0-and-entity-framewo)使用的[SQL Compact Bulk](http://sqlcebulkcopy.codeplex.com/)。[用户提交代码Stack Link](https://stackoverflow.com/questions/1609153/how-to-do-a-bulk-insert-linq-to-entities)的另一个链接。

# web-services - tomcat webapp中基于注释的安全性

> ID：15766261
> 
> 赞同：1
> 
> 时间：2013-04-02T14:07:34.993
> 
> 标签：web-services, jersey, jaas

我想实现类似这样的 Web 服务安全性（[http://docs.oracle.com/cd/E24329_01/web.1211/e24983/secure.htm](http://docs.oracle.com/cd/E24329_01/web.1211/e24983/secure.htm) - 示例适用于 javaee）

但是在tomcat + jersey应用程序内部。有可能这样做吗？

据我所知，tomcat 确实有可以在这种情况下工作的 annotation-api。无法弄清楚如何。

```
package samples.helloworld;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.annotation.Security.RolesAllowed;

@Path("/helloworld")
@RolesAllowed({"ADMIN", "ORG1"})
public class helloWorld {

   @GET
   @Path("sayHello")  
   @Produces("text/plain")
   @RolesAllows("ADMIN")
   public String sayHello() {
      return "Hello World!";
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:59:46.017

如上面链接中所述，您应该保护您的 Rest WebServices。Web.xml 示例

```
<web-app>
    <servlet>
        <servlet-name>RestServlet</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>RestServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
    <security-constraint>
         <web-resource-collection>
             <web-resource-name>Orders</web-resource-name>
             <url-pattern>/orders</url-pattern>
             <http-method>GET</http-method>
             <http-method>POST</http-method>
         </web-resource-collection>
         <auth-constraint>
             <role-name>admin</role-name> 
         </auth-constraint>
    </security-constraint>
        <login-config>
            <auth-method>BASIC</auth-method>
            <realm-name>default</realm-name>
        </login-config>
    <security-role>
        <role-name>admin</role-name>
    </security-role>
</web-app> 
```

# php - Google 日历 API 夏令时问题（时区）

> ID：15766266
> 
> 赞同：1
> 
> 时间：2013-04-02T14:07:39.963
> 
> 标签：php, timezone, google-calendar-api

我正在尝试将 Google 日历集成到我的一个应用程序中。

我一直在关注一个有用的教程，但一直坚持告诉谷歌正确的时间。

当我添加约会时，我使用这种时间戳格式。

日期时间时区 2013-04-02T18:00:00.000+00:00

现在这似乎可以工作，除了我可以看到它为当前的夏令时增加了一个小时。我该如何克服这个问题或使用 PHP 为我生成正确的日期格式。

我可以阅读的任何帮助或指南链接都会很棒，我能找到的只是关于人们在重复日期时间方面遇到问题的信息。

这是我添加和预约的json代码，

```
$date = '2013-04-02';
        $starttime = '18:00';
        $endtime = '20:00';

{
         "start": {
          "dateTime": "{$date}T{$starttime}:00.000+00:00"
         },
         "end": {
          "dateTime": "{$date}T{$endtime}:00.000+00:00"
         },
         "summary": "$title",
         "description": "$title"
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:23:42.390

时间戳的`+00:00`一部分是您的时区的 GMT 偏移量，在这里，它设置为“加零”或人类，“我的时区是 GMT”。如果您比 GMT 时间差一小时，则需要将此部分更改为`+01:00`或 `-01:00`分别取决于您是比格林威治标准时间提前一小时还是比格林威治标准时间晚一小时。[如果您愿意，您还可以在 PHP 中](https://stackoverflow.com/questions/193499/utc-offset-in-php)获取UTC 偏移量。

或者，您可以将所有内容转换为 GMT 日期/时间，但这需要做更多的工作，并且内置时区支持，使用起来更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-24T12:22:08.650

我希望有人会发现我的解决方案很有用。在我们切换到格林威治标准时间/从格林威治标准时间切换时，我在使用 Google 日历 API 插入事件时遇到了问题。

我使用的是 DateTime 及其常量 RFC3339。RFC3339 格式包括时间偏移（如 +01:00）。这可能会导致 Google Calendar API 出现问题，因为一旦您指定 dateTime 属性，Calendar 绝对会忽略 timeZone 属性中的值。

对我来说唯一的解决方案是停止使用带有时间偏移的 RFC3339 格式。现在我使用以下（类似 RFC3339 的）DateTime 格式：（`Y-m-d\TH:i:s`注意末尾缺少的 P 属性，RFC3339: `Y-m-d\TH:i:sP`）。

然后你必须指定 timeZone 属性。例如“欧洲/布拉格”。

最后我的代码如下所示：

```
$atts['summary'] = $this->title;
$atts['location'] = $this->location;
$atts['description'] = $this->description;
$atts['start']['dateTime'] = $this->start->format("Y-m-d\TH:i:s");
$atts['start']['timeZone'] = $this->timeZone; //"Europe/Prague"
$atts['end']['dateTime'] = $this->end->format("Y-m-d\TH:i:s");
$atts['end']['timeZone'] = $this->timeZone; //"Europe/Prague" 
```

# extjs - ExtJs根据其他单元格动态设置网格单元格值

> ID：15766268
> 
> 赞同：2
> 
> 时间：2013-04-02T14:07:47.277
> 
> 标签：extjs, extjs4

我有一个网格（使用 MVC 模型），其中有几列，其中的值取决于其他单元格的值。我使用了 columns 渲染器属性，它在开始时效果很好。但是，如果一个列值依赖于另一个列值，它也是动态呈现的，那么出于明显的原因，我无法使用 record.get() 获取该单元格的值。

我不应该只是渲染一个单元格值，而是我应该实际设置该值。这样做的正确方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T17:20:54.660

您应该在模型中添加方法来计算其他单元格的值。

例如，如果您的模型中有`interestRate`和`loanPeriod`属性，那么您可以向模型中添加一个方法，例如`getMonthlyPayment()`

在您的网格列渲染器中：

```
renderer: function(value, meta, record){
  return record.getMonthlyPayment();
} 
```

您不需要实际的模型属性来拥有一个带有`renderer`.

# ruby-on-rails - Rails/Ruby 痛苦 - 如何检查 gem 是否基于 UNIX/UNIX？

> ID：15766273
> 
> 赞同：6
> 
> 时间：2013-04-02T14:07:59.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

有什么方法可以查看 gem 是否仅在*UNIX/类 UNIX*系统上受支持？

是否有任何 gem 可以*“筛选”所有 gem 并查看在**Windows*中使用它是否有任何*问题*。

 ** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T15:02:42.953

简短的回答：没有。

老实说，Windows 是 Ruby 世界的二等公民。这主要是因为 Linux、BSD、OS X 和几乎所有其他基于 POSIX 的系统都会在一件事上达成一致，而 Windows 会去做一些完全不同的事情。

由于开发人员的疏忽，即使是打算与 Windows 一起使用的 gem 也可能偶尔会损坏。大多数 gem 作者没有针对 Windows 运行的持续集成服务器，并且依赖于用户的错误报告。

支持 Windows 很困难，不仅因为 API 的差异，还因为 Windows 生态系统的性质，不能像在其他系统上那样认为访问命令行编译器是理所当然的。这意味着任何不是纯 Ruby 的 gem 都可能难以安装，尤其是当它具有其他难以在 Windows 中工作的依赖项时。

唯一确定的方法是尝试安装 gem 并查看它们是否有效。*

# ember.js - 空控制器阻止视图。为什么？

> ID：15766274
> 
> 赞同：0
> 
> 时间：2013-04-02T14:07:59.357
> 
> 标签：ember.js

我一直在尝试将 Ember 与 JSON 服务器一起使用，但没有使用 ember-data。我的测试应用程序从一个小的 JSON 结构（从一个小的 Go 服务器生成）呈现一个图像目录。

谁能向我解释为什么，如果我在下面的代码中取消注释 App.FileController，相应的文件视图无法呈现？

```
window.App = Ember.Application.create();

App.Router.map(function() {
  this.resource('files',function(){
    this.resource('file',{path:':file_id'});
  });
});

App.FilesRoute = Ember.Route.extend({
  model: function() {
    return App.File.findAll();
  }
});

App.FileRoute = Ember.Route.extend({
    setupController: function(controller, args) {
        controller.set('model', App.File.find(args.id));
    },
    model: function(args) {
        return App.File.find(args.file_id);
    }
});

App.File = Ember.Object.extend({
    urlPath: function(){
      return "/pics/" + this.get('id');
    }.property('id'),   
}); 
```

如果我取消注释，事情就会中断：

```
// App.FileController = Ember.Controller.extend({

// }); 
```

（即，文件子视图根本不再呈现。）

```
App.File.reopenClass({
    find: function(id){
        file = App.File.create({'id':id});
        return file;
    },

    findAll: function() {
        return $.getJSON("http://localhost:8080/api/").then(
            function(response) {
                var files = [];
                response.Files.forEach(function (filename) {
                    files.push(App.File.create({'id':filename}));
                });
                return files;
            }
        );
    },

}); 
```

另外，我在这里做错了什么基本的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:17:20.367

正如[Finn MacCool](https://stackoverflow.com/users/2048165/finn-maccool)和[agmcleod](https://stackoverflow.com/users/645132/agmcleod)所指出的，我试图使用错误类型的控制器。正确的行应该是：

```
App.FileController = Ember.ObjectController.extend({
}); 
```

并不是说我需要`FileController`在这个小例子中明确设置 a 。但是，如果我继续扩展代码，我无疑需要一个并且需要使用正确的一个。

# python - 在python中使用线程时如何保留文件写入顺序

> ID：15766278
> 
> 赞同：0
> 
> 时间：2013-04-02T14:08:12.830
> 
> 标签：python, python-multithreading

我有一些 python 代码来读取文件并将数据推送到列表中。然后将此列表放入队列，使用线程处理列表，一次说 20 个项目。处理后，我将结果保存到一个新文件中。新文件中的内容实际上与原始文件的顺序不同。例如，我有输入，

```
    1个
    2 乙
    3℃
    4个
    5天

```

但输出看起来像：

```
    2个氨基酸
    1巴
    4个氨基酸
    5天
    3 约

```

有什么办法可以保留原来的顺序吗？这是我的代码：

```
    导入线程、队列、时间、系统
    类 eSS(threading.Thread):
        def __init__(self,queue):
            threading.Thread.__init__(self)
            self.queue = 队列
            self.lock = threading.Lock()
        def ess（自我，电子邮件，代码，建议，评论，原因，dlx_score）：
            ＃做点什么
        定义运行（自我）：
            而真：
                信息 = self.queue.get()
                infolist = info.split('\t')
                电子邮件 = 信息列表 [1]
                代码 = 信息列表 [2]
                建议 = 信息列表 [3]
                评论 = 信息列表 [4]
                原因 = 信息列表 [5]
                dlx_score = (0 if infolist[6] == 'NULL' else int(infolist[6]))
                g.write(info + '\t' + self.ess(email,code,suggested,comment,reason,dlx_score) +'\r\n')
                self.queue.task_done()

    如果 __name__ == "__main__":
        队列 = 队列.Queue()
        文件名 = sys.argv[1]
        #定义线程数
        线程 = 20
        f = 打开（文件名，'r'）
        g = open(文件名+'.esS','w')
        行 = f.read().splitlines()
        f.close()
        开始 = time.time()
        对于我在范围内（线程）：
            t = eSS（队列）
            t.setDaemon(真)
            t.start()
        对于行中的行：
            queue.put(行)     
        queue.join()
        打印 time.time()-开始
        g.close()

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:45:36.523

三个想法浮现在脑海。所有的共同点是在排队等待处理的数据包中包含一个索引。

*   一种想法是使用控制器/工作人员/输出框架，其中输出线程将工作人员处理的数据出列、组装和输出。
*   第二个想法是使用内存映射文件进行输出，并使用索引来计算写入文件的偏移量（假设可能是固定长度的写入）。
*   第三种是使用索引将处理后的数据放入一个新列表中，当列表完成时，将项目写在最后而不是在运行中。

# javascript - 如何让我所有的 div 很好地排列在一起

> ID：15766279
> 
> 赞同：0
> 
> 时间：2013-04-02T14:08:12.840
> 
> 标签：javascript, html

我一直在玩我的代码，我已经设置了日历来做我想做的事，现在我只是想让`<p>`和 iframe 很好地排列在一起，到目前为止我有这个代码[jsfiddle](http://jsfiddle.net/U2HK9/)，这里是[现在](http://hardknocks365.com)箭头和 iframe 的分离示例

我想要达到的目标：

> 200px----[arrowLEFT]---30px---[iframe]---30px---[arrowRIGHT]

HTML：

```
<div id="miniFeed">

<p id="toggle">
<span> <a href="#" onMouseOut="MM_swapImgRestore()"
onMouseOver="MM_swapImage('LeftArrow','','WEBgraphics/arrowLeftROLL.png',1)">
<img src="WEBgraphics/arrowLeft.png" width="40" height="400" id="LeftArrow"></a></span>
<span> </span>
</p>

<div id="calender">

<div id="left"> <iframe src="calenderAPRIL.html" width="350px" height="400px"></iframe>   
</div>

<div id="right"> <iframe src="calenderMAY.html" width="350px" height="400px"></iframe>   
</div>

</div>

<p id="toggle">

<span> </span>

<span> <a href="#" onMouseOut="MM_swapImgRestore()"  
onMouseOver="MM_swapImage('RightArrow','','WEBgraphics/arrowrightROLL.png',1)">
<img src="WEBgraphics/arrowright.png" width="40" height="400" id="RightArrow"></a></span>   
</p>

</div> 
```

JAVASCRIPT：

```
window.onload=function() {
$('#toggle > span').click(function() {
var ix = $(this).index();

$('#left').toggle( ix === 0 );
$('#right').toggle( ix === 1 );
});
}; 
```

CSS：

```
#miniFeed {
}
#right { display:none; }
#LeftArrow {
z-index: 100;
width: auto;
float: left;
margin-left: 200px;
display: block;
}
#calender {
float: left;
z-index: -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:42:55.607

尝试这个

html:

```
<div id="miniFeed">
<div class="arrow leftArrow">        
</div>
<div class="calendars">
     <div class="carousel">
        <div class="calendar-1">                        
        </div>
        <div class="calendar-2">            
        </div>        
    </div>
</div>
<div class="arrow rightArrow">        
</div> 
```

CSS：

```
#miniFeed {
    width: 400px;
    height: 250px;    
}

#miniFeed > div {
    float: left;    
     height: 100%;
}

.arrow {    

    width: 100px;
    background: blue;
}

.calendars {
  width: 200px;
  overflow: hidden; /*the magic*/
}

.carousel {
    width: 400px; /* the size is number of calendars * the width per calendar */
    height: 100%;    
}

.carousel > div {    
    width: 200px;
    height: 100%;
    float: left;
}

.calendar-1 {
  background: red;   
}

.calendar-2 {
  background: green;   
} 
```

js：

```
$('.leftArrow').click(function() {
    //we move the carousel negative
    //the value 200 is the width of a calendar
    $('.carousel').animate({marginLeft: -200}, 300);
});

$('.rightArrow').click(function() {
    //we move the carousel negative
    $('.carousel').animate({marginLeft: 0}, 300);
}); 
```

我们创建了一个隐藏溢出的包装器，所以在它里面我们有我们的日历集合。

结果：http: [//jsfiddle.net/renanvalentin/kzTRz/](http://jsfiddle.net/renanvalentin/kzTRz/)

# android - 使用图像 ViewPager 时出现“内存不足”错误

> ID：15766285
> 
> 赞同：0
> 
> 时间：2013-04-02T14:08:26.440
> 
> 标签：android, android-viewpager, out-of-memory, android-memory, urlimageviewhelper

我是 Android 新手，我正在尝试实现一个 ViewPager 来进行图像浏览。我正在使用一个名为 UrlImageViewHelper 的库从 URL 字符串中加载图像。滚动浏览前 4-5 张图像后，我遇到了内存泄漏问题。

这是我正在使用的页面适配器代码：

```
private class ImagePagerAdapter extends PagerAdapter {

    private ArrayList<String> images = new ArrayList<String>();
    private LayoutInflater inflater;

    ImagePagerAdapter(ArrayList<String> imageUrls) {
        this.images = imageUrls;
        inflater = getLayoutInflater();
    }

    @Override
    public void destroyItem(ViewGroup container, int position ,Object object) {
        ((ViewPager) container).removeView((View) object);

    }

    @Override
    public int getCount() {
        return images.size();
    }

    @Override
    public Object instantiateItem(ViewGroup view, int position) {
        View imageLayout = inflater.inflate(R.layout.activity_imagedetailitem, view, false);
        ImageView imageView = (ImageView) imageLayout.findViewById(R.id.detailImage);

        UrlImageViewHelper.setUrlDrawable(imageView, imageUrls.get(position));

        ((ViewPager) view).addView(imageLayout, 0);
        return imageLayout;

    }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view.equals(object);
        }

       @Override  
       public void finishUpdate(View arg0) {}  

       @Override  
       public void restoreState(Parcelable arg0, ClassLoader arg1) {}  

       @Override  
       public Parcelable saveState() {  
           return null;  
       }  

       @Override  
       public void startUpdate(View arg0) {}  

     }  //end of page adapter 
```

非常基本的代码，但一定有我遗漏的东西吗？如果我能提供更多信息，请告诉我。谢谢大家。

UrlImageViewHelper 库中的代码：

```
/**
 * Download and shrink an Image located at a specified URL, and display it
 * in the provided {@link ImageView} once it finishes loading.
 *
 * @param imageView The {@link ImageView} to display the image to after it
 *            is loaded.
 * @param url The URL of the image that should be loaded.
 */
public static void setUrlDrawable(final ImageView imageView, final String url) {
    setUrlDrawable(imageView.getContext(), imageView, url, null, CACHE_DURATION_THREE_DAYS, null);
} 
```

这是 LogCat 中抛出的异常：

```
04-02 09:53:08.975: E/AndroidRuntime(23001): FATAL EXCEPTION: AsyncTask #2
04-02 09:53:08.975: E/AndroidRuntime(23001): java.lang.RuntimeException: An error occured while executing doInBackground()
04-02 09:53:08.975: E/AndroidRuntime(23001):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at java.lang.Thread.run(Thread.java:1027)
04-02 09:53:08.975: E/AndroidRuntime(23001): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget(Heap Size=6983KB, Allocated=3582KB, Bitmap Size=25132KB)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:694)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at com.koushikdutta.urlimageviewhelper.UrlImageViewHelper.loadBitmapFromStream(UrlImageViewHelper.java:117)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at com.koushikdutta.urlimageviewhelper.UrlImageViewHelper.access$3(UrlImageViewHelper.java:94)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at com.koushikdutta.urlimageviewhelper.UrlImageViewHelper$1.onDownloadComplete(UrlImageViewHelper.java:589)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at com.koushikdutta.urlimageviewhelper.UrlImageViewHelper$3.doInBackground(UrlImageViewHelper.java:655)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at com.koushikdutta.urlimageviewhelper.UrlImageViewHelper$3.doInBackground(UrlImageViewHelper.java:1)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-02 09:53:08.975: E/AndroidRuntime(23001):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
04-02 09:53:08.975: E/AndroidRuntime(23001):    ... 4 more 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-09T20:32:45.490

只需覆盖此方法...

```
@Override
public void destroyItem(View collection, int position, Object view) {
    ((ViewPager) collection).removeView((View) view);
    collection = null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:45:55.500

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget(Heap Size=6983KB, Allocated=3582KB, Bitmap Size=25132KB) 
```

我会重新考虑你在做什么，因为与你可以使用的字节数相比，基本上 25MB 位图不会加载。

# java - 从存储库加载后实例化泛型类

> ID：15766290
> 
> 赞同：1
> 
> 时间：2013-04-02T14:08:49.670
> 
> 标签：java, generics

在为存储库（例如 Web 服务或数据库）编写类型处理程序时，我需要在从存储库加载值后实例化类型。

假设我`String`从存储库中获取了一个值，并且有一个`String`可以使用的带有一个参数的构造函数。如果返回类型有类型参数，除了实例化原始类型还能做什么？似乎原始类型的存在只是为了与遗留代码兼容，所以我不想使用它们。

一般 ？可以用作类型参数（如果您知道该类型在运行时将是正确的），但在这种情况下不能使用，因为您不能使用通配符作为类型参数来实例化类。

编辑：一些示例代码：

假设我有一个这样的 PrimaryKey 类：

```
public class PrimaryKey<R extends RepositoryObject<R>> {
    private String value;
    public PrimaryKey(String value) {
        this.value = value;
    }
} 
```

以及一组扩展 RepositoryObject 的类，其定义如下：

```
public class RepositoryObject<R extends RepositoryObject<R>> {
    private PrimaryKey<R> pk;
    public RepositoryObject(PrimaryKey<R> pk) {
        this.pk = pk;
    }
    PrimaryKey<R> getPrimaryKey() {
        return pk;
    }
} 
```

子类示例：

```
public class User extends RepositoryObject<User> {
    public User(PrimaryKey<User> userId) {
        super(userId);
    }
} 
```

现在，PrimaryKey 类的类型处理方法将如下所示：

```
public PrimaryKey<?> getValue(String stringValue) {
    return new PrimaryKey<>(stringValue);
} 
```

但这会导致编译器错误（在 Maven 构建中，而不是在 Eclipse IDE 中），即使我在实例化时使用的是菱形运算符。由于类型参数中的递归，可能由于某种原因类型推断不能很好地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:18:37.430

在 Java 7 中，您通常可以使用[菱形运算符](https://stackoverflow.com/q/4166966/697449)来解决[此限制](https://stackoverflow.com/a/9147768/697449)：

```
Container<?> c = new Container<>(arg); 
```

否则，您可以使用辅助工厂方法：

```
<T> Container<T> makeContainer(String arg) {
    return new Container<T>(arg);
}

...

Container<?> c = makeContainer(arg); 
```

**编辑：**

在您更新之后，我可以看到您正在使用递归类型参数`<R extends RepositoryObject<R>>`。此编译错误是由于 javac 在通配符捕获和递归类型参数方面的限制。请参阅此相关帖子，例如：[Java CRTP and Wildcards: Code compiles in Eclipse but not `javac`](https://stackoverflow.com/questions/13211806/java-crtp-and-wildcards-code-compiles-in-eclipse-but-not-javac)

不幸的是，使用原始类型作为一种解决方法是必要的，但它可以作为实现细节隐藏：

```
public PrimaryKey<?> getValue(String stringValue) {
    @SuppressWarnings("rawtypes") //a raw type is necessary to placate javac
    final PrimaryKey<?> pk = new PrimaryKey(stringValue);
    return pk;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:48:56.910

```
class SomeBogusClass extends RepositoryObject<SomeBogusClass> { }

return new PrimaryKey<SomeBogusClass>(stringValue); 
```

说真的，你可以把任何满足界限的东西放在那里，甚至是一些与你的代码无关的虚假类。

# java - 如何在 Android 上使用 JavaMail 检测消息线程？

> ID：15766295
> 
> 赞同：0
> 
> 时间：2013-04-02T14:08:56.093
> 
> 标签：java, android, gmail, imap, jakarta-mail

我正在使用[javamail-android](https://code.google.com/p/javamail-android/)库为 Android 编写电子邮件客户端。我想检测 Gmail 线程以便能够同时显示来自一个线程的所有邮件。不过，我宁愿不下载收件箱文件夹中的所有邮件。我想要的是只显示最近的消息/线程。我该怎么做，我必须为此使用外部库吗？

我设法找到似乎正在做我想做的事情[的 java-gmail-imap 。](https://code.google.com/p/java-gmail-imap/)有没有人有任何经验和/或可以提出可能的替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:52:38.617

最新的 JavaMail 版本包括对所有 Gmail IMAP 协议扩展的支持，包括 ThreadID，但我不知道它是否适用于 Android，它不是真正的 Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T20:21:18.583

[对于 Android，您可以在此处](https://github.com/ruiaraujo/javamail_android)使用我的端口。我已经成功地将它用于一个项目，我只是用 Harmony 实现替换了 java 依赖项，并将其转入一个 Android 库项目，以确保没有使用任何不受支持的东西。你可以用它做一个罐子（我应该：P）。

# android - GridView：水平滚动不起作用

> ID：15766296
> 
> 赞同：0
> 
> 时间：2013-04-02T14:08:59.307
> 
> 标签：android, gridview

接下来我想实现：在网格视图的每一行中，一些可见元素的数量，要到达其他元素，我们可以使用水平滚动。但：

代码 1：

```
<GridView
    android:id="@+id/gvTimeTape"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:columnWidth="100dp"
    android:numColumns="30"
    android:paddingLeft="200dp"
    android:scrollbars="horizontal" >
</GridView> 
```

结果（一行，所有元素都适合屏幕）：

![在此处输入图像描述](https://i.stack.imgur.com/nrViF.png)

代码 2：

```
<GridView
    android:id="@+id/gvTimeTape"
    android:layout_width="5000dp"
    android:layout_height="wrap_content"
    android:columnWidth="100dp"
    android:numColumns="30"
    android:paddingLeft="200dp"
    android:scrollbars="horizontal" >
</GridView> 
```

结果（不适合屏幕和水平滚动的元素不出现）

![结果 2](https://i.stack.imgur.com/EV0dD.png)

有人知道什么技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:00:31.233

尝试将您的 GridView 放到 Horizo​​ntalScrollView。

# ruby-on-rails - Heroku Scheduler.rake 设置

> ID：15766298
> 
> 赞同：0
> 
> 时间：2013-04-02T14:09:00.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, rake

在[Railscasts](http://railscasts.com/episodes/127-rake-in-background?autoplay=true)之后，我尝试设置计划的 rake 任务以向管理员用户发送电子邮件：

```
desc 'Testing rake task to generate email'
task :overtime_report => :environment do

  hospital_bookings = HospitalBooking.scoped
  hospital_booking = hospital_bookings
  user = User.where(:roles => :administrator)

  if params[:format] == 'pdf'
    hospital_bookings = hospital_bookings.where(:day => Date.today.beginning_of_month..Date.today.end_of_month)
  end

  respond_to do |format|
    format.html
    format.pdf do
      render :pdf => "#{Date.today.strftime('%B')} Overtime Report",
             :header => {:html => {:template => 'layouts/pdf.html.erb'}}
      OvertimeMailer.overtime_pdf(user, hospital_booking).deliver
    end
  end
end 
```

**控制器**

```
class HospitalBookingsController < ApplicationController

  #load_and_authorize_resource
  before_filter :admin_user, :only => [:index]

  def index
    @hospital_bookings = HospitalBooking.scoped
    system "rake overtime_report Mail_ID=#{params[:id]} &"
    flash[:notice] = 'Delivering Overtime Report'
  end 
```

如果我朝着正确的方向前进，只需要一点指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:32:58.043

恐怕你的代码没有多大意义：

*   rake 任务不是控制器中的操作，因此您使用`params`并且`respond_to`根本不起作用。
*   如果它是按特定时间间隔运行的计划任务，那么您根本不需要控制器。
*   通过将用户输入以`Mail_ID=#{params[:id]}`.
*   将上面的 Mail_ID 选项传递给 rake 任务没有意义，因为它从未使用过。
*   你永远不应该从控制器调用系统命令。
*   `hospital_booking = hospital_bookings`没有意义，因为它什么都不做。
*   `render`也不会做任何事情，这是您创建的 ActionMailer 对象的责任。

你可能想要这样的东西：

```
desc 'Send hospital bookings overtime report'
task :overtime_report => :environment do
  bookings = HospitalBooking.where(:day => Date.today.beginning_of_month..Date.today.end_of_month).all
  user = User.where(:roles => :administrator).first
  OvertimeMailer.overtime_pdf(user, hospital_bookings).deliver
end 
```

# ios - 想要在 iOS 的电子邮件正文中发送带有图像和文本的电子邮件

> ID：15766300
> 
> 赞同：-4
> 
> 时间：2013-04-02T14:09:05.670
> 
> 标签：ios, email, mfmailcomposer

在 iOS 中，想要使用邮件编辑器在邮件正文（不是附件）中发送包含嵌入图像和文本的邮件。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:15:40.090

您可以使用带有 img 标签的 HTML 内容来执行此操作。您可以使用以下代码：

```
NSMutableString *imgContent = [[[NSMutableString alloc] initWithString:@"<html><body>"] retain];
UIImage *imageData = [UIImage imageNamed:@"Midhun.png"];
NSData *imageDataInBase64 = [NSData dataWithData:UIImagePNGRepresentation(imageData)];
NSString *base64String = [imageDataInBase64 base64EncodedString];
[imgContent appendString:[NSString stringWithFormat:@"<p><b><img src='data:image/png;base64,%@'></b></p>",base64String]];
[imgContent appendString:@"</body></html>"];

 MFMailComposeViewController *emailWin = [[MFMailComposeViewController alloc] init];
[emailWin setMessageBody:imgContent isHTML:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:16:41.177

MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc] init];

```
[mailComposer setMailComposeDelegate:self];

if ([MFMailComposeViewController canSendMail]) {

    [mailComposer setToRecipients:[NSArray arrayWithObjects:@"kmlshyadav6@gmail.com", nil]];
    [mailComposer setSubject:@"Awesome Image(ur message or subject)"];
    [mailComposer setMessageBody:@"Hey,\n\nCheck out this awesome image!\n\n" isHTML:NO];
    [mailComposer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];

        UIImage *lion = imageView.image;
        NSData *lionData = UIImageJPEGRepresentation(lion, 1);
        [mailComposer addAttachmentData:lionData mimeType:@"image/jpeg" fileName:@"01-Mac-OS-X-Lion.jpg"];

 }
    [self presentModalViewController:mailComposer animated:YES]; [mailComposer release];
} else {
    [mailComposer release];
} 
```

# php - 在 PHP 中匹配/比较文本字符串

> ID：15766304
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:09:13.997
> 
> 标签：php, compare, matching, similarity

在 PHP 中匹配/比较文本字符串

大家好，我正在尝试比较一些字符串，基本上是为了了解我是否在产品提要中有产品。由于来源不同，完美匹配（相同）并不是确定的事情。由于产品名称有时包含或多或少的字符（iPad 白色和 iPad Apple 白色），我想进行近似匹配，可能与 Lucene 中的模糊搜索（~）类似。

到目前为止，我知道并使用了 preg_match 和 levenshtein。你能推荐任何其他方法来为 PHP 的字符串进行相似性匹配吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:25:58.020

您问是否有人对使用有想法：嗯，这是`PHP`网站上的一个示例，但我想它可以帮助您。

（我已经修改了代码以可能适合您网站上的一种体验）：

```
<?php

$productString= 'Apple white IPOD';

// array of words to check against
$products = array('zen','dell laptop','apple laptop','apple black ipod',
                'apple mini','Random product');

// no shortest distance found, yet
$shortest = -1;

// loop through products to find the closest product
foreach ($products as $product) {

    // calculate the distance between the input word,
    // and the current word
    $lev = levenshtein($productString, $product);

    // check for an exact match
    if ($lev == 0) {

        // closest word is this one (exact match)
        $closest = $product;
        $shortest = 0;

        // break out of the loop; we've found an exact match
        break;
    }

    // if this distance is less than the next found shortest
    // distance, OR if a next shortest word has not yet been found
    if ($lev <= $shortest || $shortest < 0) {
        // set the closest match, and shortest distance
        $closest  = $word;
        $shortest = $lev;
    }
}

echo "Search product: $productString\n";
if ($shortest == 0) {
    echo "Exact match found: $closest\n";
} else {
    echo "Did you mean: $closest?\n";
}

?> 
```

上面的代码搜索产品列表、数组，并找到最接近的匹配项。如果找到完全匹配，则使用它来代替。

# android - 获取 YouTube 视频的标题

> ID：15766308
> 
> 赞同：10
> 
> 时间：2013-04-02T14:09:24.187
> 
> 标签：android, youtube

在 Android 中获取单个 YouTube 视频标题的最简单方法是什么？我正在使用 Android YouTube API 播放视频，但它们不返回标题，因为它只支持播放选项。我唯一需要的是显示视频的标题，我显然有视频 ID，但我不知道从哪里开始。

我看过的东西：

*   YouTube 数据 API
*   JSOUP（我可以看到标签但不知道如何获取它）

出于某种原因，我发现很难理解如何使用它们，这对我来说似乎是一个非常简单的动作。我很好奇是否有更简单的选择，或者是否有人可以帮助我走上正确的轨道。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-02T14:12:47.533

您可以为此目的使用此代码。

```
public class SimpleYouTubeHelper {

public static String getTitleQuietly(String youtubeUrl) {
    try {
        if (youtubeUrl != null) {
            URL embededURL = new URL("http://www.youtube.com/oembed?url=" +
                youtubeUrl + "&format=json"
            );

            return new JSONObject(IOUtils.toString(embededURL)).getString("title");
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}
} 
```

[来源](https://gist.github.com/DHuckaby/e741f188cdce6ac00d75)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T01:59:00.730

谢谢@Castiblanco 对于那些懒得找罐子和进口的人

[http://commons.apache.org/proper/commons-io/](http://commons.apache.org/proper/commons-io/)
[http://www.java2s.com/Code/Jar/j/Downloadjavajsonjar.htm](http://www.java2s.com/Code/Jar/j/Downloadjavajsonjar.htm)

```
import java.net.URL;
import org.apache.commons.io.IOUtils;
import org.json.JSONObject; 
```

# c# - Ajax.ActionLink 复制整个视图并将其插入到 在那个视图里面

> ID：15766309
> 
> 赞同：0
> 
> 时间：2013-04-02T14:09:23.953
> 
> 标签：c#, ajax, actionlink

我是 MVC 的新手，正在为我姑姑的业务开发电子商务应用程序。我有一个带有部分视图的产品列表页面，用于显示按类别搜索的菜单。这一切都与 Html.ActionLink 助手工作得很好，但是当我切换到 AJAX 时，它会更新产品，但会将整个列表视图插入到我想要更新的 div 中（标题和包括的所有内容）。我假设它与我定义的 UpdateTargetId 或布局有关（我不是 css 高手）。所以这里是：

产品控制器：

```
public ViewResult List(string category, int page = 1)
    {
        JProductListViewModel model = new JProductListViewModel
        {
            JProducts = repository.JProducts
                .Where(p => category == null || p.Category == category)
                .OrderBy(p => p.ProductID).Skip((page - 1) * PageSize).Take(PageSize),
            PagingInfo = new PagingInfo
            {
                CurrentPage = page,
                ItemsPerPage = PageSize,
                TotalItems = category == null ?
                    repository.JProducts.Count() :
                    repository.JProducts.Where(x => x.Category == category).Count()
            },
            CurrentCategory = category
        };
        return View(model);
    } 
```

菜单部分：

```
@foreach (var link in Model)
{
    <div class="catmenuitem">
    @if (link != null)
    {
        @Ajax.RouteLink(link, "", new { controller = "Product", action = "List", category = link, page = 1 }, new AjaxOptions { HttpMethod = "POST", InsertionMode = InsertionMode.Replace, 
    UpdateTargetId = "List", LoadingElementId = "loading", LoadingElementDuration = 1000 },
    new { @class = link == ViewBag.SelectedCategory ? "selected" : null })
    }
    </div>
} 
```

列表显示：

```
<div id="List">
    @foreach (var p in Model.JProducts)
    {
            Html.RenderPartial("ProductSummary", p);
    }
</div> 
```

我得到的结果是整个 List.cshtml 视图被复制并插入到“列表”div 中。我有一种感觉，这将是某种愚蠢的错误，但我似乎找不到它。

谢谢， Kwinsor5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:32:37.113

您必须为您的列表视图创建一个新的局部视图，将其命名为 _List。然后更改您的列表视图以包含 _List 部分视图并更改您的列表控制器以在 AJAX 请求的情况下返回 _List 部分视图。

**列表部分视图_List：**

```
<div id="List">
@foreach (var p in Model.JProducts)
{
        Html.RenderPartial("ProductSummary", p);
}
</div> 
```

**列表显示：**

```
<div></div>
@Html.Partial("_List", Model)
<div></div> 
```

**列表控制器的变化：**

```
 if (Request.IsAjaxRequest())
        {
            return PartialView("_List", model);
        } 
```

现在您可以在列表视图及其部分视图中拥有不同的元素

# c# - 网页表单上的 RSS 提要中的分页

> ID：15766312
> 
> 赞同：0
> 
> 时间：2013-04-02T14:09:33.330
> 
> 标签：c#, asp.net, xml, rss

我的网络应用程序中有一个 RSS 提要。使用以下查询显示来自数据库的 5 条最新新闻：

```
 SELECT TOP 5 newsID, Title, Date, Description FROM News ORDER BY Date DESC 
```

如何在所有这些新闻下方为用户提供一个列表，用户可以通过按第 2 页、按第 3 页等选择另外 5 个新闻？这里不是最好的解释。我的意思是，就像在 GridView 中一样，设置分页功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:13:11.220

如果您正在寻找如何从 sqlserver 查询中获取特定范围的行，请参阅[这篇文章](https://stackoverflow.com/questions/1023841/retrieve-specific-range-of-rows-in-a-sql-server-table)。否则，您将需要展示您的代码，解释您的问题并告诉您尝试过的内容。

# mockups - Balsamiq，如何在 Datagrid 中放置一个按钮

> ID：15766313
> 
> 赞同：21
> 
> 时间：2013-04-02T14:09:34.337
> 
> 标签：mockups, balsamiq

如何在 balsamiq 的数据网格中放置一个按钮？我正在使用 Balsamiq Mockups 2.2.9。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T14:38:17.740

我只知道数据网格只允许插入单选按钮或复选框。但是，您可以在下面的链接中解决您的问题，

[http://blogs.balsamiq.com/ux/2010/07/15/mockup-tips-datagrids-and-specifying-interaction/](http://blogs.balsamiq.com/ux/2010/07/15/mockup-tips-datagrids-and-specifying-interaction/)

我不确定在最近的版本中，它是否有任何其他可用的方法。

# c - 将两个数组的条目合并为另一个数组的偶数和奇数条目。

> ID：15766327
> 
> 赞同：1
> 
> 时间：2013-04-02T14:10:26.163
> 
> 标签：c, arrays, sorting, dynamic-arrays

我有一个能够生成 2 个数组的函数，一个在索引“i”为偶数时，一个在索引“i”为奇数时，所以我最终得到了两个数组。偶数“i”数组称为 W_e，由 N 个元素组成，奇数“i”数组称为 W_o，也由 N 个元素组成。

我现在需要将这两个数组合并到另一个数组 Wn（具有 2*N 个元素）中，使其看起来像 Wn=[W_e[0],W_o[0],W_e[1],W_o[1],。 ..,W_e[N-1],W_o[N-1]] 但我不知道该怎么做。我尝试使用嵌套循环，但没有奏效。根据我的计算，数组 W_e 和 W_o 是正确生成的，我只是无法将这些条目组合成一个数组。

这就是我到目前为止所拥有的。除了调用给我带来麻烦的函数“double *MakeWpowers(int N);”之外，我在主函数中没有做任何事情。请记住，这适用于 N>2，我还没有处理过 N=1 或 N=2。

任何帮助将不胜感激。谢谢！！

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <complex.h>

#define pi 4*atan(1)

double *MakeWpowers(int N);
void print_vector(double *x,int N);
double *make_vector(double *x,int N);

int main(void)
{   int N;
double *Wn;
printf("\n Please enter the size of the NxN matrix:\n");
scanf("%d",&N);
Wn=MakeWpowers(N);
//print_vector(Wn,N);
free(Wn);
return(0);
}

double *MakeWpowers(int N)
{
double *Wn,*W_e,*W_o;
int i,j;

Wn=make_vector(Wn, 2*N);
W_e=make_vector(W_e, N);
W_o=make_vector(W_o, N);

for(i=0;i<=N-1;i++)
{
    if(i%2==0)

    {
        W_e[i]=cos((2*i*pi)/N);
    }
    else 
    {
            W_o[i]=sin((2*i*pi)/N);
    }

}

printf("\nThis is the even vector W_e:\n");
print_vector(W_e, N);
printf("\nThis is the odd vector W_o:\n");
print_vector(W_o, N);

for(j=0;j<2*N;j++)
{
    if(j%2==0)
    {Wn[j]=W_e[i];}
        //++i;}
    else 
    {Wn[j]=W_o[i];}
        //++i;}
    printf("\nthis is Wn:\n\n");
    print_vector(Wn, 2*N);
 //Wn[j]=W_o[i];
 //j++;
}

return(Wn);
   }
 void print_vector(double *x,int N)
{
int i;
for (i=0; i<N; i++) 
{
    printf ("%9.4f  \n", x[i]);
}
printf("\n"); 
}

double *make_vector(double *x,int N)
{   int i;
double xi;

x=(double *)malloc((N)*sizeof(double));

for(i=0;i<N;i++)
{
    x[i]=(double)xi;
}
return(x);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:24:38.897

这是它的一般逻辑：

```
LET a, b, merge BE ARRAYS
FOR k IN 0..length(a)
    merge[2*k]   = a[i]
    merge[2*k+1] = b[i]
RETURN merge 
```

`a`使偶数项（`2k`），`b`奇数项（ `2k+1`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:31:07.010

这可能是错误的

```
double *make_vector(double *x,int N)
{   int i;
double xi; 
```

你必须初始化变量`xi`同样的事情`*Wn,*W_e,*W_o`

# ruby-on-rails - 使用 Cookie 在 Web 应用程序中管理对用户帐户的多次访问

> ID：15766328
> 
> 赞同：0
> 
> 时间：2013-04-02T14:10:30.363
> 
> 标签：ruby-on-rails, security, authentication, cookies

在可能的 Rails Web 应用程序中，我需要对用户身份验证进行更多控制，例如注册后的用户是否具有特定的登录凭据。所以他/她应该只能从特定系统（PC）登录。这可以防止其他用户登录，即使他们知道特定用户的凭据。我们可以为此目的使用 Cookie 吗？如果我们从特定 PC 访问特定 Web 应用程序，Cookie 是否总是唯一的？帮助我找到更好的解决方案。

感谢广告:)-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:20:58.760

我认为，当您没有其他选择时，请谨慎使用 cookie。

在这种特殊情况下（即识别 unic 计算机），我认为您可以通过 2 个解决方案来识别它：

*   一个价值你知道的愚蠢饼干。cookie 的问题是用户可以简单地将 cookie 值复制/粘贴到另一台计算机以具有相同的访问权限。
*   从计算机数据计算的唯一密钥。您可以使用这台计算机上的一些可访问信息来创建它：浏览器、浏览器插件、浏览器版本、操作系统等。该密钥现在可以存储为 cookie。关于您的识别功能，您必须检查此密钥是否有效。复制过去无效，因为源信息不一样。该解决方案的主要问题是它“太”安全：如果用户更改其浏览器，添加插件，更改其浏览器版本，计算密钥的功能将根本不起作用。

这是我使用的第二个解决方案，例如[Rails Browser Detection Methods](https://stackoverflow.com/questions/4707400/rails-browser-detection-methods)或[https://github.com/josh/useragent](https://github.com/josh/useragent)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:13:44.007

您可以在 cookie 中存储安全令牌（md5 哈希或其他内容），并检查它是否可以访问。

# c# - 任何可用的数据表查询生成器，如 sql 查询生成器？

> ID：15766330
> 
> 赞同：2
> 
> 时间：2013-04-02T14:10:40.800
> 
> 标签：c#, sql, visual-studio-2010, datatable

我是网络新手，我想使用数据表而不是数据库。我想知道为什么数据表查询与sql查询不同？我想从数据表中找到一个值：

```
 SELECT dbo.General_Ledger.Entry_Amount FROM dbo.General_Ledger WHERE Account_number=lbDebit_Account_numer 
```

和

```
using (SqlConnection connect = new SqlConnection(con))
        {
            int index = lbDebit_Account.FindString(txtDebit_Account.Text);
            if (0 <= index)
            {
                lbDebit_Account.SelectedIndex = index;
            }
            SqlDataAdapter da3 = new SqlDataAdapter("SELECT *FROM dbo.General_Ledger", connect);

            DataTable dt1 = new DataTable();
            da3.Fill(dt1);
            string lbDebit_Account_numer = lbDebit_Account.SelectedValue.ToString();
            string row;
            row= Convert.ToString(dt1.Select(string.Format("'Account_number'={0}",lbDebit_Account_numer)));
        } 
```

我想执行这个查询：

```
SELECT dbo.General_Ledger.Entry_Amount FROM dbo.General_Ledger WHERE Account_number=lbDebit_Account_numer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:14:27.883

因此，您需要参数化您的查询：

```
SqlDataAdapter da3 = new SqlDataAdapter("SELECT * FROM dbo.General_Ledger WHERE Account_number = @Account_number");
da3.SelectCommand.Parameters.AddWithValue("@Account_number", lbDebit_Account.SelectedValue);

DataTable dt1 = new DataTable();
da3.Fill(dt1); 
```

现在你将拥有你想要的一行，你可以像这样恢复它：

```
DataRow dr = dt1.Rows[0]; 
```

然后您可以通过多种不同方式从该行中获取值：

```
var val = dr[0]; // grabs the value of the first column in the result list
var val = dr["fieldname"] // grabs the value of a specific field name 
```

甚至有一些方法会返回类型化的数据，因为前面提到的返回一个，`object`因为基础值可能是很多东西。因此，如果它是一个字符串字段，您可以执行以下操作：

```
var val = dr.Field<string>(0) // grabs the value of the first column and returns it typed as a string
var val = dr.Field<string>("fieldname") // grabs a field and returns it typed as a string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:46:37.487

很简单，你想根据这个字符串过滤 DataTable[dt1] [lbDebit_Account_numer]

```
DataRow dr = dt1.Select("Account_number = '"+lbDebit_Account_numer ="'"); 
```

你可以用

> 与或

运营商

> single code['] 需要对字符串变量进行比较。

在这里你得到数据行，所有单元格将以数组格式选择任何单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:42:30.480

您可以尝试使用 DataTable 类的 DefaultView.RowFilter 属性。

例子：

```
dataTable.DefaultView.RowFilter = "Account_number=1"; 
```

# mysql - 事务中的MYSQL If语句导致错误

> ID：15766336
> 
> 赞同：5
> 
> 时间：2013-04-02T14:10:53.273
> 
> 标签：mysql, variables, transactions

我有以下 MYSQL 查询：

```
START TRANSACTION;

SELECT sport_id INTO @a FROM sports WHERE sport_id = 2 FOR UPDATE;

UPDATE sports SET sport_name = 'Table Tennis' WHERE sport_id = @a;

if (@a > 1) then
    COMMIT;
ELSE
    ROLLBACK;
END IF; 
```

问题是它在 if 语句中返回错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'if (@a > 1) then COMMIT' 附近使用正确的语法

我查看了堆栈溢出，并且有一个[显示类似查询的答案](https://stackoverflow.com/a/9327843/894792)，以几乎相同的方式编写，但他们使用的变量没有`@`符号。删除`@`我的查询并不能解决问题。

这只是一个测试查询，用于使用 MYSQL 尝试一些事务，因此查询似乎有点毫无意义。我有点卡住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:18:28.120

MySQL 不会将以关键字开头的语句识别`IF`为有效的 SQL 语句。

该`IF`语句仅在复合语句的上下文中起作用（即，包含在`BEGIN`和之间的语句块`END`。目前，复合语句仅在存储程序（存储过程、函数或触发器）的上下文中受支持。）

[http://dev.mysql.com/doc/refman/5.5/en/begin-end.html](http://dev.mysql.com/doc/refman/5.5/en/begin-end.html)

对于测试，请尝试...

```
DELIMITER //

CREATE PROCEDURE usp_test_transaction()
BEGIN
  DECLARE EXIT HANDLER FOR SQLEXCEPTION ROLLBACK;
  START TRANSACTION;

  -- whatever DML operations and SELECT statements you want to perform go here

  IF (1=1) THEN
    COMMIT;
  ELSE
    ROLLBACK;
  END IF;
END//

DELIMITER ;

CALL usp_test_transaction; 
```

（注意：我不是在这里提倡在存储过程中处理事务。我个人的偏好是不这样做，而是在更高级别处理事务。但是上面的示例应该有效；我相信 MySQL 确实支持调用 START TRANSACTION , COMMIT 和 ROLLBACK 在存储过程的上下文中。）

# ruby - 从 url 中提取后缀（正则表达式）

> ID：15766337
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:10:58.210
> 
> 标签：ruby, regex

我需要从 url 中提取后缀，意思是：

[http://google.com/sports/golf](http://google.com/sports/golf) => 运动/高尔夫 [http://yahoo.com/blog?id=7](http://yahoo.com/blog?id=7) => blog/id=7

我怎样才能用正则表达式（红宝石风格）来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:14:01.177

将[`URI`](http://www.ruby-doc.org/stdlib-2.0/libdoc/uri/rdoc/URI.html)模块与`.path + .query`.

```
uri = URI("http://google.com/sports/golf")
uri.path + "/" + uri.query 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:17:16.470

下面怎么样:)

```
require 'uri'
p URI.split("http://google.com/sports/golf").compact.drop(2).join("/")
p URI.split("http://yahoo.com/blog?id=7").compact.drop(2).join("/") 
```

或者，

```
require 'uri'

a = ["http://google.com/sports/golf","http://stackoverflow.com/questions/15766337/extract-suffix-from-url-regex/15766456#15766456","http://yahoo.com/blog?id=7"]
a.each { |url| p URI.split(url).compact.drop(2).join("/") } 
```

输出：

```
"/sports/golf"
"/questions/15766337/extract-suffix-from-url-regex/15766456/15766456"
"/blog/id=7" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:25:29.333

试试这个：

```
irb(main):011:0> /(?:http:\/\/\w+\.\w+\/)(.+)/.match("http://yahoo.com/blog?id=7")[1]
=> "blog?id=7"
irb(main):012:0> /(?:http:\/\/\w+\.\w+\/)(.+)/.match("http://google.com/sports/golf")[1]
=> "sports/golf"
irb(main):013:0> 
```

# xcode - Xcode以不同颜色突出显示运算符？

> ID：15766338
> 
> 赞同：1
> 
> 时间：2013-04-02T14:10:59.983
> 
> 标签：xcode

有什么方法可以使 xcode 突出显示运算符（“.”、“<>”、“()”、“;”等）不同，就像在 Visual Studio 中一样？它确实提高了代码的可读性。

首选项中没有这样的选项，但也许有一些方法可以直接编辑着色文件并使这些符号显示为保留字？如果颜色是蓝色也没关系，就像保留字一样 - 只要它与通用文本的颜色不同。我尝试用谷歌搜索具有此功能的插件，但找不到。那里似乎没有很多 xcode 插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:22:32.910

尝试通过将运算符添加为关键字来编辑*/Applications/Xcode.app/Contents/OtherFrameworks/DeoolsCore.framework/Versions/A/Resources/Built-in languages.pblangspec 。*

# r - 按组查找第一个日期时间

> ID：15766343
> 
> 赞同：0
> 
> 时间：2013-04-02T14:11:16.653
> 
> 标签：r, plyr

您好，我正在寻找“min​​ datetime by group”的等价物`plyr`（或任何其他包，但 data.table 导致[bug #2531的原因）](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2531&group_id=240&atid=975)

```
set.seed(1)
datetimes=c(rep(as.POSIXct("2011-01-01 08:00:00"),3) , rep(as.POSIXct("2011-01-03 08:00:00"),3)) + rnorm(6)
groups=c(rep('a',3),rep('b',3))
X = data.frame(datetime=datetimes,group=groups)
X
#                  datetime group
#2011-01-01 07:59:59.373546     a
#2011-01-01 08:00:00.183643     a
#2011-01-01 07:59:59.164371     a
#2011-01-03 08:00:01.595280     b
#2011-01-03 08:00:00.329507     b
#2011-01-03 07:59:59.179531     b 
```

预期答案

```
 datetime group
2011-01-01 07:59:59.164371     a
2011-01-03 07:59:59.179531     b 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:09:14.633

试试这个：

```
aggregate(datetime ~ group, X, min) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:18:41.233

使用`ddply`.

```
ddply(X, .(group), summarise, first_datetime = min(datetime)) 
```

这个变体更简洁，但不是很清楚：

```
ddply(X, .(group), colwise(min)) 
```

# php - Magento API 在尝试添加优惠券时拒绝访问

> ID：15766346
> 
> 赞同：0
> 
> 时间：2013-04-02T14:11:25.100
> 
> 标签：php, magento-1.5

我正在使用 Magento (v1.5.1.0) 的 SOAP API，并设法完成了创建购物车、添加用户、添加帐单/送货地址、付款方式等的整个过程，但是我无法获得优惠券工作。

我正在使用的代码如下：

```
 if ($couponCode != '') {
        try {
            $result = $this->magentoservice->shoppingCartCouponAdd($sessionId, $cartId, $couponCode);                
        } catch (Exception $err) {
            return $this->returnError($err->getMessage());
        }
    } 
```

我已经尝试过使用来宾用户和注册用户，但我一直抛出相同的异常 - “访问被拒绝。”。据我从有限的文档和论坛帖子中可以看出，这甚至不是预期的错误。

$sessionId 和 $cartId 绝对有效。$couponCode 如果直接在 magento 前端输入就可以了。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:18:30.523

感谢 John，我在 magento.stackexchange.com 网站上得到了答案。

[https://magento.stackexchange.com/questions/2729/magento-api-gives-access-denied-when-trying-to-add-a-coupon](https://magento.stackexchange.com/questions/2729/magento-api-gives-access-denied-when-trying-to-add-a-coupon)

问题是 api 角色不包括对优惠券的访问。但是我没有看到这个的原因是它没有显示在后端。

直接编辑 api_role 表，我能够将购物车优惠券的 4 条记录设置为允许。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-05T00:14:39.057

为了建立@Hyarion 的答案，我在 Magento v1.7 中接收的问题`Access Denied`是优惠券权限没有出现在我的 API 用户中，`Admin > System > Web Services > xxx Roles > (select Role) > Role Resources`所以我无法为我的 API 用户启用它们。

对我有用的修复是运行这个数据库查询，它应该影响 3 条记录（每个角色）：

`update api_rule set api_permission='allow' where role_id=1 -- Replace with your desired role id and resource_id like 'cart/coupon%'`

# android - 设备重新联机时重试发布请求

> ID：15766352
> 
> 赞同：0
> 
> 时间：2013-04-02T14:11:53.690
> 
> 标签：android, rest, service, httprequest, alarmmanager

我有一个小型 android 应用程序向服务器发出一些 POST 请求问题是我希望我的应用程序能够在请求失败时在检查设备上网络的可用性后重试 Post 一段时间。如何做到这一点？有必要实现服务和数据库来持久化我发送的数据吗？我已经阅读了有关警报管理器的内容，但我不知道如何通过我的活动来实现这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:18:37.240

您不一定需要始终运行的服务。当 POST 或任何 Web 请求失败时，您可以对其进行排队。（以某种方式存储请求 [Shared params, db]）。然后使用广播接收器并订阅连接更改的意图。在接收器中，检查您现在是否有连接。如果您*和*队列中有东西，那么您可以生成一个服务来处理队列。

您应该感兴趣的两个确切广播是这些

```
 android.net.wifi.WIFI_STATE_CHANGED
 android.net.wifi.supplicant.CONNECTION_CHANGE 
```

您可以像这样在清单中向他们注册

```
<receiver android:name=".BroadcastReceiver">
    <intent-filter>
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
        <!-- .... -->
    </intent-filter>
</receiver> 
```

在该广播接收器中，您可以使用此代码查看您是否有网络连接。

```
public boolean isOnline() {
    cm = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
    if(cm == null)
        return false;

    final NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    if (activeNetwork != null && activeNetwork.getState() == NetworkInfo.State.CONNECTED) {
        return true;
    } else {
        return false;
    } 
} 
```

对于此代码，您还需要这些权限

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:17:38.720

创建一个扩展 BroadcastReceiver 的类，然后像这样注册该类： registerReceiver(new BroadcastReceiverExtension, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));

网络上的任何更改都会触发此广播。

您可以检查 Intent extra ConnectivityManager.EXTRA_NETWORK_INFO、ConnectivityManager.EXTRA_OTHER_NETWORK_INFO、ConnectivityManager.EXTRA_NO_CONNECTIVITY 和 ConnectivityManager.EXTRA_REASON 以获取有关收到的更改的更多信息。

# javascript - 在数组中查找对象而不是循环的更好方法？

> ID：15766353
> 
> 赞同：6
> 
> 时间：2013-04-02T14:11:54.777
> 
> 标签：javascript, jquery, arrays, object

## 例子

链接：http: [//jsfiddle.net/ewBGt/](http://jsfiddle.net/ewBGt/)

```
var test = [{
    "name": "John Doo"
}, {
    "name": "Foo Bar"
}]

var find = 'John Doo'

console.log(test.indexOf(find)) // output: -1
console.log(test[find]) // output: undefined

$.each(test, function(index, object) {
    if(test[index].name === find)
        console.log(test[index]) // problem: this way is slow
}) 
```

## 问题

在上面的示例中，我有一个包含对象的数组。我需要找到具有`name = 'John Doo'`

我的`.each`循环正在工作，但这部分将执行 100 次，并且测试将包含更多对象。所以我认为这种方式会很慢。

这`indexOf()`不起作用，因为我无法在对象中搜索名称。

## 问题

如何`name = 'John Doo'`在当前数组中搜索对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T14:27:25.453

在这种情况下，我有时会做“可搜索的地图对象”。如果数组本身是静态的，则可以转换为映射，其中数组值可以是键和映射值索引。我假设值是唯一的，就像你的例子一样。

Lo-Dash [(www.lodash.com](http://lodash.com/) ) 已经创建了用于轻松循环等的实用程序选择。看看吧！

**注意：**但通常你真的不必担心使用 100 个元素循环槽数组。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T14:53:36.860

jQuery `$.grep`（或其他过滤功能）不是最佳解决方案。

该`$.grep`函数将遍历数组的**所有**元素，即使在循环期间已经找到了搜索的对象。

来自 jQuery grep 文档：

> $.grep() 方法根据需要从数组中删除项目，以便所有剩余项目通过提供的测试。测试是一个函数，它传递一个数组项和数组中该项的索引。只有当测试返回 true 时，该项目才会在结果数组中。

如果您的数组未排序，则没有什么能比得上这个：

```
var getObjectByName = function(name, array) {

    // (!) Cache the array length in a variable
    for (var i = 0, len = test.length; i < len; i++) {

        if (test[i].name === name)
            return test[i]; // Return as soon as the object is found

    }

    return null; // The searched object was not found

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-27T18:52:01.617

如果你只是想知道值是否存在，你可以`includes`像这样使用 lodash 的函数：

```
var find = 'John Doo'

[{ "name": "John Doo" }, { "name": "Foo Bar" }].some(function (hash) {
    if (_.includes(hash, find)) return true;
}); 
```

文档：

*   [_.includes()](http://lodash.com/docs#includes)
*   [Array.prototype.some()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:17:41.763

也许您应该使用`$.grep`jQuery 中的功能：

```
var test = [{
    "name": "John Doo"
}, {
    "name": "Foo Bar"
}]

var find = 'John Doo'

var found = $.grep(test, function(obj){
    return obj['name'] == find;
});

console.log(found); 
```

小提琴：http: [//jsfiddle.net/ewBGt/3/](http://jsfiddle.net/ewBGt/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T15:13:18.757

您唯一可以做的就是使用内置数组方法（如果可用）而不是自己进行循环 - 该[`filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)方法适用于此。

但我希望 sbeliv01 在他的回答中使用的 jQuery 等 JS 库已经在内部检查了这一点（如果这些数组方法本身不可用，并提供一个后备解决方案）——所以不要指望性能大幅提升。

# sql - UNION ALL 是否保证结果集的顺序

> ID：15766359
> 
> 赞同：47
> 
> 时间：2013-04-02T14:12:31.810
> 
> 标签：sql, sql-server

我可以确定以下脚本的结果集将始终像这个 ORDER 那样排序吗？

```
SELECT 'O'
UNION ALL
SELECT 'R'
UNION ALL
SELECT 'D'
UNION ALL
SELECT 'E'
UNION ALL
SELECT 'R' 
```

是否可以证明有时顺序不同？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-02T14:15:13.437

没有固有的顺序，你必须使用`ORDER BY`. 对于您的示例，您可以通过`SortOrder`在每个 SELECT 中添加一个来轻松地做到这一点。然后，这将按照您想要的顺序保留记录：

```
SELECT 'O', 1 SortOrder
UNION ALL
SELECT 'R', 2
UNION ALL
SELECT 'D', 3
UNION ALL
SELECT 'E', 4
UNION ALL
SELECT 'R', 5
ORDER BY SortOrder 
```

除非您通过查询明确提供订单，否则您无法保证订单。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-04-02T14:13:00.423

不，不是的。SQL 表本质上是无序的。您需要使用`order by`以按所需顺序获取事物。

问题不在于您试用时它是否有效。问题是您是否可以*信任*这种行为。而你不能。SQL Server 甚至不保证这个顺序：

```
select *
from (select t.*
      from t
      order by col1
     ) t 
```

它[在这里](http://msdn.microsoft.com/en-us/library/ms188385%28v=sql.105%29.aspx)说：

> 在视图、内联函数、派生表或子查询的定义中使用 ORDER BY 时，该子句仅用于确定 TOP 子句返回的行。当查询这些构造时，ORDER BY 子句不保证有序的结果，除非在查询本身中也指定了 ORDER BY。

SQL 语言的一个基本原则是表没有顺序。因此，尽管您的查询可能适用于许多数据库，但您应该使用 BlueFeet 建议的版本来保证结果的顺序。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-02T14:28:18.237

例如，尝试删除所有`ALL`s。或者甚至只是其中之一。`SELECT`现在考虑当查询是针对表的实际查询并单独优化时，必须在那里发生的优化类型（以及许多其他类型）也是可能的。如果没有`ORDER BY`, 每个查询中的排序将是任意的，并且您不能保证查询本身将以任何顺序处理。

`UNION ALL`说不`ORDER BY`就好像说“把所有的弹珠都扔在地板上” 。也许每次你把所有的弹珠都扔在地板上时，它们最终都会按颜色排列。这并不意味着下次您将它们扔到地板上时，它们的行为也会相同。SQL Server 中的排序也是如此 - 如果您不说`ORDER BY`，那么 SQL Server 假定您不关心顺序。你可能会碰巧看到某个订单一直被返回，但很多事情都会影响*下*一次选择的任意订单。数据更改、统计数据更改、重新编译、计划刷新、升级、服务包、修补程序、跟踪标志……令人作呕。

为了清楚起见，我将用大写字母表示：

# 您不能保证没有 ORDER BY 的订单

一些进一步的阅读：

*   [要改掉的坏习惯：依赖无证行为](https://sqlblog.org/2010/02/08/bad-habits-to-kick-relying-on-undocumented-behavior)

另外，[请阅读 SQL 团队中非常聪明的人 Conor Cunningham 的这篇文章](http://blogs.msdn.com/b/conor_cunningham_msft/archive/2008/08/27/no-seatbelt-expecting-order-without-order-by.aspx)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-02T14:14:27.573

不，您可以通过 SQL Server 为您获取记录的任何方式获取记录。因此，您可以通过基于 1 的索引对联合结果集应用订单：

```
SELECT 1, 'O'
UNION ALL
SELECT 2, 'R'
UNION ALL
SELECT 3, 'D'
UNION ALL
SELECT 4, 'E'
UNION ALL
SELECT 5, 'R'
ORDER BY 1 
```

# scala - scala sbt - 如何配置目标目录结构？

> ID：15766361
> 
> 赞同：1
> 
> 时间：2013-04-02T14:12:36.433
> 
> 标签：scala, sbt

我想使用 sbt 编译具有给定目录结构的现有项目。源代码位于 src/ 目录中，编译后的类文件应位于 lib/ 目录中

两个目录应该具有相同的结构，这意味着 src/package1/... 应该在我的 build.sbt 中编译成 lib/package1/...

```
sourceDirectory <<= baseDirectory / "src"
target <<= baseDirectory / "lib"
scalaSource <<= sourceDirectory
javaSource <<= sourceDirectory 
```

这适用于源代码......但在 lib 目录中我有 lib/scala-2.9/classes/package1/...

有没有办法摆脱这些 scala-xx/classes 和流子目录，只生成类文件并将它们直接放在 lib/ 中？

感谢：D。

# php - 在同步的 mysql 服务器上设置手动增量值

> ID：15766366
> 
> 赞同：2
> 
> 时间：2013-04-02T14:12:57.453
> 
> 标签：php, mysql

我有一个托管在 Intranet 和 Internet 上的 mysql\PHP 应用程序。两台 mysql 服务器都是复制的，即实时同步。

我有一些表具有自动递增 id 作为主键。当同步关闭时，对于新事务，在线和 Intranet 服务器上使用相同的自动增量值。因此，即使服务器连接并开始同步；具有相同自动增量 ID 的记录不会同步。具有非重叠值的 ID 在服务器连接后很快就会同步。

为了解决这个问题，我正在考虑在 Intranet 和 Online 上使用不同范围的手动增量值。

请提出建议，解决这个问题的最佳方法是什么。

此外，如果我必须使用手动增量 ID，那么在在线和 Intranet 上分别分配 ID 的最佳技术或算法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:40:28.043

我想出了解决这个问题的方法。

在配置 mysql 服务器自动增量设置的复制时，应调整服务器上的 id 永远不会重叠。例如，如果您复制了 2 台服务器，则一台服务器应仅生成偶数自动增量 ID，而其他仅生成奇数 ID。

这是有关此详细信息的链接。

[http://jonathonhill.net/2011-09-30/mysql-replication-that-hurts-less/](http://jonathonhill.net/2011-09-30/mysql-replication-that-hurts-less/)

更新两台服务器上的设置解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:20:08.630

你可以做两件事。第一个是将实时服务器的起始值更改为一个非常高的数字（高于预期的行数）

例如：

```
ALTER TABLE tbl AUTO_INCREMENT = 10000; 
```

现在数字不会重叠。如果这不是一个选项，您可以更改间隔

```
SET @@auto_increment_increment=10; 
```

但这也意味着在某一点上存在重叠。因为增量步长为 1 的服务器将在之后赶上步长 10.. 你猜对了.. 10 行！但是您可以通过将一台服务器设置为从 1 开始增量，将另一台服务器设置为 2 来绕过这一点，然后使两者的增量步长为 2。

那会像

```
intranet 1, 3, 5, 7, 9
live 2, 4, 6, 8, 10 
```

您还可以使用两列主键来防止重复。现在你有一个自动增量字段与一个 varchar 字段（live 和 intr）相结合，这是你的唯一键。

```
CREATE TABLE `casetest`.`manualid` (
    `id` INT( 10 ) NOT NULL AUTO_INCREMENT ,
    `server` VARCHAR( 4 ) NOT NULL DEFAULT 'live',
    `name` INT NOT NULL ,
    PRIMARY KEY ( `id` , `server` )
) ENGINE = MYISAM ; 
```

# ruby-on-rails - 急切加载 mongoid

> ID：15766367
> 
> 赞同：1
> 
> 时间：2013-04-02T14:12:57.983
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongoid

如果可能的话，我想用 mongoid**急切加载来优化这段代码。**这是第一个运行良好的代码：

```
orders_with_user_detail = Order.where(cv_id: current_user.cv.id)
orders_with_user_detail.each do |order|
  Order.delay(queue: "order", priority: 2, run_at: order.end_at).delete_user_details(order)
end 
```

如果可能的话，我只想对我的数据库进行 1 次查询：

```
Mongoid.identity_map_enabled = true
User.includes(:orders).each do |order|
  Order.delay(queue: "order", priority: 2, run_at: order.end_at).delete_user_details(order)
end 
```

**我怎样才能获得急切加载`cv_id`的所有订单？`current_user.cv_id`**

**这段代码可以吗？**

非常感谢！

# xml - 在 XML 文件中过滤

> ID：15766368
> 
> 赞同：0
> 
> 时间：2013-04-02T14:12:58.327
> 
> 标签：xml, powershell, filtering

我有一个要过滤以检索某个字符串的 XML 文件（导出的 GPO）。此字符串包含 GPO 的 GUID。包含 GUID 的 XML 文件的标头：

```
<Identifier>
<Identifier xmlns="http://www.microsoft.com/GroupPolicy/Types">{81BB9R5B-BC1E-433C-A62T-06DC8A62AAF1}</Identifier> 
<Domain xmlns="http://www.microsoft.com/GroupPolicy/Types">domain.com</Domain> </Identifier> 
```

如何使用 Powershell 过滤掉 GUID：“{81BB9R5B-BC1E-433C-A62T-06DC8A62AAF1}”？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:20:52.467

使用 PowerShell 在 XmlDocument 对象上创建注释属性的一种方法：

```
$xml = [xml] @'
<Identifier>
<Identifier xmlns="http://www.microsoft.com/GroupPolicy/Types">{81BB9R5B-BC1E-433C-A62T-06DC8A62AAF1}</Identifier> 
<Domain xmlns="http://www.microsoft.com/GroupPolicy/Types">domain.com</Domain>
</Identifier>
'@

$xml.Identifier.Identifier."#text" 
```

# c# - 从存储的动态对象创建 Intellisense

> ID：15766370
> 
> 赞同：1
> 
> 时间：2013-04-02T14:13:00.003
> 
> 标签：c#, asp.net-mvc, visual-studio, dynamic, intellisense

我即将基于动态变量等为 MVC 项目和站点创建一些设置。这些设置将存储在 xml 中以便于读取和写入。

我现在的问题是，在阅读了关于在这个问题中扩展智能感知之后：

[是否可以为视觉工作室中的动态对象提供智能感知？](https://stackoverflow.com/questions/12645630/is-it-possible-to-provide-intellisense-for-dynamic-objects-in-visual-studio)

是否可以读取我保存的设置（在运行时存储），然后为下一次运行构建智能感知？

IE对于这些`site.setings.layout.width`“旧”列表中的每一个保存的xml定义的定义的动态将能够显示出来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:25:47.173

如果您只需要 xml“智能感知”，那么请考虑设计 xml 模式并将它们转储`Visual Studio installation Folder\xml\Schemas`或包含在您的解决方案中，如果命名空间适当匹配，VS 将完成剩下的工作。

编辑：一段时间后回到这个。似乎没有给出其他答案，所以我会尝试更有创意。

1.  Visual Studio 有一个从 xml 文件生成 xsd 的选项。请注意，架构将主要是近似值，但它将与文件匹配，并且是对结构的良好描述。如果您能找到一种从命令行调用它的方法（或者可能为该步骤找到类似的工具），那么您可以将其与 xsd.exe 链接并在构建时从中生成 C# 类（预构建步骤）
2.  如果第一点太麻烦，您可以尝试编写一个[T4 模板](http://msdn.microsoft.com/en-us/library/vstudio/bb126445.aspx)来读取以前的配置文件并根据该配置文件生成您的自定义代码。使用 T4 生成基于某些 xml 的 POCO 属性结构应该相当简单。该模板应作为预编译步骤运行。

请注意，这两个建议都涉及静态代码生成。可以使用[F# 类型提供程序](http://msdn.microsoft.com/en-us/library/hh156509.aspx)完成完整的动态解决方案，但这不适用于 C#。

# ruby-on-rails - HAML 在 rails link_to 中提交表单

> ID：15766379
> 
> 赞同：1
> 
> 时间：2013-04-02T14:13:21.673
> 
> 标签：ruby-on-rails, haml

我在 Rails 应用程序中有一个用 HAML 编写的小型搜索表单，代码如下：

```
= search_form_for @q do |f|
  .field
    = f.label :first_name_cont, "Name Contains"
    = f.text_field :first_name_cont
  = f.button :submit, "Search" 
```

我想要提交操作的 link_to 之类的东西，以便它知道要调用什么控制器操作，我该如何在 HAML 中做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:21:36.457

我不是 HAML 专家，但是`form_for`Ransack 可能在块对象上`search_form_for`有一个`submit`方法来制作提交按钮。因此，最后一行应该类似于`= f.submit "Search"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:21:35.933

从你的问题很难看出，但看起来你正在使用 Ransack。根据他们的文档，如果您尝试将表单发送到特定路线，您可以在您的行中设置`:url`选项。`form_for`您根本不必修改提交按钮。

例如：

```
= search_form_for @q, :url => your_controller_action_path do |f|
   ... # The rest of your code 
```

# c++ - C++ 将静态二维双精度数组转换为双精度**

> ID：15766382
> 
> 赞同：9
> 
> 时间：2013-04-02T14:13:28.677
> 
> 标签：c++, pointers, casting, double

我的程序中有这样的矩阵：

```
double m[3][4] = 
    {
        {2, 4, 5, 7},
        {4, 5, 1, 12},
        {9, 12, 13, -4}
    }; 
```

而且我想将其转换为`double**`类型。

我已经尝试过 simple `double** a = (double**)m;`，但它不起作用（当我尝试读取任何值时，我得到“访问冲突读取位置 0x00000000。”，这意味着我正在尝试从`NULL`地址读取。

我找到了几乎可行的解决方案：

```
double *b = &m[0][0];
double **c = &b; 
```

当我读取字段时它可以工作`c[0][any]` 但是当我尝试从字段读取值时，会出现相同的 NULL 地址读取问题`c[1][0]`。

将我的`double m[3][4]`数组转换为 type的正确方法是什么`double**`？

编辑：你说那是不可能的。所以我会稍微改变一个问题。如何将二维双精度数组作为参数传递给函数？我的函数有原型：

```
void calculate(double **matrix, int n); //where matrix size is always n by n+1 
```

它适用于动态分配的数组。我怀疑使其工作的唯一方法是分配新的动态数组并一个接一个地复制原始静态数组......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T14:16:18.560

你不能。

该符号`double**`是指一个指针数组。你没有一个指针数组，你有一个双精度数组。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-02T14:20:24.650

您不能只转换数组。你将不得不创建这样的东西：

```
double m[3][4] = 
    {
        {2, 4, 5, 7},
        {4, 5, 1, 12},
        {9, 12, 13, -4}
    };

double *marray[3] = {m[0],m[1],m[2]};
calculate(marray,3); 
```

或者您可以使用循环：

```
const size_t n = 3;
double *marray[n];
for (size_t i=0; i!=n; ++i) {
    marray[i] = m[i];
}
calculate(marray,n); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-02T15:08:06.073

当你写

```
double m[3][4] 
    {
        {2, 4, 5, 7},
        {4, 5, 1, 12},
        {9, 12, 13, -4}
    }; 
```

编译器实际上创建了一个双精度数组，就像您编写的一样

```
double _m[] = {2, 4, 5, 7, 4, 5, 1, 12, 9, 12, 13, -4}; 
```

但是，由于 C/C++ 类型系统，编译器记住`m`'s 的类型是`double [3][4]`. 特别是它记得大小 3 和 4。

当你写

```
m[i][j] 
```

编译器将其替换为

```
_m[i * 4 + j]; 
```

（`4`来自 中的第二个大小`double [3][4]`。）例如， `m[1][2] == 1`以及`_m[1 * 4 + 2] == _m[6] == 1`。

正如其他人所说， a`double**`是一种不同的类型，它不携带尺寸。要考虑`double** a`为 3 x 4 矩阵，`a[0]`和`a[1]`必须 `a[2]`是指向`double`（即`double*`）指向相应行的第一个元素的指针。你可以用

```
double* rows[] = { &m[0][0], &m[1][0], &m[2][0] };
double** a = &rows[0]; 
```

一个简单的演员表不会创建`rows`上面的变量。让我介绍其他替代（但等效）的方法来定义`rows`

```
double* rows[] = { &m[0][0], &m[0][0] + 4, &m[0][0] + 2 * 4};
double* rows[] = { &_m[0], &_m[4], &_m[2 * 4]}; 
```

如您所见，只需要第二种尺寸（即`4`）。通常，对于多维数组，除了第一个之外的所有大小都是必需的。因此，一维数组

```
double x[4] = { 1, 2, 3, 4 }; 
```

可以隐式转换为`double*`

```
double* y = x; 
```

利用这个事实，我们也可以写

```
double* rows[] = { _m, _m + 4, _m + 2 * 4}; 
```

事实上，`_m`被转换为`double*`指向`m[0]`。然后， in `_m + 4`， `_m`is 被转换为`double*`指向`m[0]`并添加到 this 的指针`4`。因此，`_m + 4`是第四个 double 之后的指针 `_m[0]`，`_m[4]`以此类推。

到目前为止，我已经解释了为什么不能将 a `double [3][4]`（或任何其他大小）转换为`double**`. 现在，我将在您的特定情况下展示如何定义计算。

```
template <int N>
void calculate(double (&m)[N][N+1]) {
   // use m as a double[N][N+1]
} 
```

你打电话

```
calculate(m); 
```

编译器会为你推导出大小`N`。一般来说（即，当第二维不是 时`N + 1`）你可以写

```
template <int N, int M>
void calculate(double (&m)[N][M]) {
   // use m as a double[N][M]
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T14:59:58.413

如果您总是使用数组（无指针）进行初始化，并且您能够避免在计算函数中使用指针，您可以考虑使用以下选项，它使用模板的大小扣除。

```
template<int m, int n>
void doubleFunc(double (&mat)[m][n])
{
    for (auto i = 0; i < m; i++)
    {
        for (auto j = 0; j < n; j++)
        {
            std::cout << mat[i][j] << std::endl;
        }
    }
} 
```

它在我的快速测试期间有效。

```
double m[3][4] = 
{
    {2, 4, 5, 7},
    {4, 5, 1, 12},
    {9, 12, 13, -4}
};

doubleFunc(m); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T14:32:29.433

您可以将二维数组作为函数参数传递：

`void calculate(double matrix[][y], int n);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T14:54:31.760

在 C++ 标准中采用可变长度数组之前，您的选择包括：

*   如果您的编译器支持可变长度数组作为扩展，您可能可以使用函数声明来传递它们，例如`void foo(std::size_t n, double a[][n+1])`. 请注意，编译器可能需要在使用或需要某些特殊语法`n`的参数声明之前传递。`n`
*   您可以在函数中手动传递 a`double *`并进行索引运算：`void foo(std::size_t n, double *a) { … a[row*(n+1) + column] … }`
*   您可以通过在其访问器函数中执行索引算术来创建一个实现可变长度数组的类。
*   `n`您可以为指向的指针分配空间，`double`用指向数组每一行的指针填充这些指针，并传递空间的地址。

# c# - 铸造简单的通用对象

> ID：15766385
> 
> 赞同：3
> 
> 时间：2013-04-02T14:13:37.753
> 
> 标签：c#, asp.net-web-api, dotnet-httpclient

我有一个我创建的用于简化使用 HttpClient 调用的方法。它使用 HttpReponse.Content.ReadAsAsync().Result 方法从 API 获取响应。

这一切都很好。我的方法看起来像这样：

```
 public static T ExecuteAPIGetRequest<T>(string url, Dictionary<string, string> parameters)
    {

        HttpClient client = new HttpClient();
        //basic authentication

        var t = new object();
        string baseURL =  "myurl"; 

        //Execute request
        HttpResponseMessage response = client.GetAsync(baseURL).Result;

        if (response.IsSuccessStatusCode)
        {
            return response.Content.ReadAsAsync<T>().Result;  
        }
        else
        {
            return (T)t;
        }
    } 
```

我的问题是，如果查询失败，它需要返回一个空类型的 T。如果它是我编写的自定义类，这很好，但它不适用于字符串或字符串 [] 等对象。有任何想法吗？

干杯

NCBL

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T14:15:00.323

尝试返回`default(T)`

```
if (response.IsSuccessStatusCode)
{
    return response.Content.ReadAsAsync<T>().Result;  
}
else
{
    return default(T);
} 
```

[default](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)将返回`null`引用类型，并将数值归零`int`，等。以及 custom和`double`的相应默认值。`struct``enum`

Daniel 好心地指出了一个问题：如果对于引用类型，您想要返回**默认对象**而不是**null**，您应该定义泛型约束`new T()`。`T`现在您可以使用对无参数构造函数的调用来实例化类型对象。完整方法如下：

```
public static T ExecuteAPIGetRequest<T>(string url, 
                                        Dictionary<string, string> parameters)
                                                                   where T : new()
{

    HttpClient client = new HttpClient();

    //basic authentication

    string baseURL =  "myurl"; 

    HttpResponseMessage response = client.GetAsync(baseURL).Result;

    if (response.IsSuccessStatusCode)
    {
        return response.Content.ReadAsAsync<T>().Result;  
    }
    else
    {
        return new T(); //returns an instance, not null
    }
} 
```

现在您将返回引用类型的默认对象，而不是 null。开放类型`T`只能接受类型，默认有构造函数（不带参数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T02:06:52.197

我可以建议您考虑这样的方法吗....

```
class Program
{
    static void Main(string[] args)
    {

        var client = new HttpClient();

        //basic authentication

        string baseURL = "myurl";

        var link = Link<Foo>.Create(baseURL);

        var response = client.SendAsync(link.CreateRequest()).Result;

        var myfoo = link.ProcessResponse(response);

    }

}

public class Link<T>
{
    public Uri Target { get; set; }

    public static Link<T> Create(string url)
    {
        return new Link<T>() {Target = new Uri(url)};
    }

    public HttpRequestMessage CreateRequest()
    {
        return new HttpRequestMessage() {RequestUri = Target};
    }   

    public T ProcessResponse(HttpResponseMessage response)
    {
        if (response.IsSuccessStatusCode)
        {
            return response.Content.ReadAsAsync<T>().Result;
        }
        else
        {
            return new T(); //returns an instance, not null
        }
    }
}

public class Foo
{

} 
```

通过将创建链接的机制封装到静态工厂方法中并将响应处理封装到 ProcessResponse 方法中，您可以获得类似级别的可重用性，但您也可以获得重用相同 HttpClient 的好处。这使您可以实际利用 DefaultRequestHeaders 并且它将阻止 HttpClient 在处理连接时继续关闭连接。

此外，通过避免将异步调用包装在同步方法中，您可以让调用代码决定是阻止结果还是异步处理它。您当前使用 .Result 的方式可能会在某些时候遇到死锁问题。

这种创建 Link 类以封装与取消引用 URL 有关的特定行为的技术非常有用。添加可用于填写 URI 模板的参数很容易。您还可以使用它来处理请求正文。

# windows - 如何使用 VS 在 Windows 7 上安装 Boost

> ID：15766386
> 
> 赞同：6
> 
> 时间：2013-04-02T14:13:40.613
> 
> 标签：windows, boost

因此，我一整天都在尝试在 Windows 7 上将 Boost 与 Visual Studio (2008) 集成。首先，我经历了两次[如何在 Visual Studio 2010 中使用 Boost](https://stackoverflow.com/questions/2629421/how-to-use-boost-in-visual-studio-2010)。

我搜索了所有（至少有 3 个）类似的主题，但没有一个有效。

有人建议使用这个：[www.boostpro.com/download/](http://www.boostpro.com/download/)但链接无效。有人提议将运行时库更改为多线程 DLL，但也没有用。

我只是尝试包含`#include <boost/thread.hpp>`并收到此错误

> 致命错误 LNK1104：无法打开文件“libboost_thread-vc90-mt-s-1_53.lib”。

在安装 Boost 之前，错误是它找不到 Boost，`thread.hpp`所以看起来 Boost 安装得有点正确。

问题是我在使用教程时没有构建库。如何手动构建它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:17:45.833

没有像一键式提升安装这样的东西，你仍然需要手动做一些事情。在您的情况下，您似乎需要编译 Boost.Thread 库，然后将生成的 .lib 文件所在的目录添加到您的库路径中。您提供的链接看起来不错。如果您遵循它，您可能已经构建了 Boost.Thread。确保您从第二部分中执行了#6。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-27T21:15:57.703

有预编译二进制文件 - 安装包：http: [//sourceforge.net/projects/boost/files/boost-binaries/1.53.0/](http://sourceforge.net/projects/boost/files/boost-binaries/1.53.0/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T07:47:52.667

使用此命令： bjam --build-dir=build-directory toolset=toolset-name --build-type=complete 阶段手动构建库。然后将新目录添加到其他库路径

如此链接所示：http: [//www.boost.org/doc/libs/1_43_0/more/getting_started/windows.html#or-build-binaries-from-source](http://www.boost.org/doc/libs/1_43_0/more/getting_started/windows.html#or-build-binaries-from-source)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-05T14:08:21.253

我发现这篇文章很有帮助：

[http://www.codeproject.com/Articles/11597/Building-Boost-libraries-for-Visual-Studio](http://www.codeproject.com/Articles/11597/Building-Boost-libraries-for-Visual-Studio)

*   文章解释了如何构建构建工具BJam（主要通过定位boostrapper.bat）
*   如何构建库，例如**bjam toolset=msvc-11.0 variant=debug threading=multi link=static**（在本例中为 VS2012 多线程、静态链接调试版本）。
*   它还具有构建批次的功能，但我还没有尝试过。
*   它有一些关于如何指定使用的 C-Runtime 的附加信息

# svg - SVG 占位符

> ID：15766392
> 
> 赞同：1
> 
> 时间：2013-04-02T14:13:58.413
> 
> 标签：svg

我想在 SVG 中创建一个区域，以便轻松地将其他元素或路径添加到 SVG。

如果我使用`<div id="name123"></div>`，则内部 SVG 路径或元素不会呈现。

如果我使用组标签`<g id="name123"></g>`，它将呈现。

但我想知道还有哪些其他标签或实现？可以用作 SVG 中的占位符吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:23:41.513

1.  <defs> SVG 中的区域

2.  XML 实体。您可以在文档标题中定义它们：

```
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd" [
<!ENTITY X"#E3EFD3">
<!ENTITY Y"#22969E">
]> 
```

并且您可以从带有“&”的 HTML 实体中使用它们：

```
<stop  offset="0.5" stop-color="&X;"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:24:09.157

好像你在问[什么元素是容器](http://www.w3.org/TR/SVG/intro.html#TermContainerElement)？

# android - OpenCV Android NDK 项目将无法构建

> ID：15766395
> 
> 赞同：4
> 
> 时间：2013-04-02T14:14:05.287
> 
> 标签：android, eclipse, opencv, android-ndk

我在 Ubuntu 上使用 OpenCV 2.4.4 和 Eclipse Juno。我的问题类似于这个[OpenCV for android 示例程序显示错误](https://stackoverflow.com/questions/11684356/opencv-for-android-sample-programs-showing-error)

但现在让我很奇怪。我周末的大部分时间都在试图让 ndk 和 opencv 库发挥得很好，但我仍然无法让它工作。我在我的测试 C++ cpp 文件中包含以下内容 -

```
#include <jni.h>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <cstdlib>

using namespace cv; //this is a problem
...
... 
```

当我尝试构建“找不到命名空间 cv”时，它会告诉我。哦，好吧，我一定是写错了一些路径，或者没有使用正确的库，对吧？错误的。在终端中，**ndk-build**构建 .so 文件没有任何错误。我可以在项目文件夹中看到它们。但是，如果我尝试在 eclipse 中构建，即在虚拟设备或真实设备上构建用于 tesitng 的 apk，那么我会收到命名空间 cv 错误并且构建失败，然后在 cpp 文件中，cv 带有红色下划线，并且在 eclipse 中文件标记为红色，在“更正”此文件之前，我什至无法尝试构建。

显然我做错了什么。但是如果我关闭我的 eclipse 项目然后重新打开它，cpp 文件不再标记为红色，我可以进行 apk 构建。如果我尝试打开 cpp 文件，红色会返回并且在我完成项目关闭/打开 rigmarole 之前不会发生更多构建。

老实说，我不知道问题的原因是什么。任何帮助将不胜感激。

我的 android.mk 文件：

```
include $(CLEAR_VARS)

OPENCV_CAMERA_MODULES:=off
OPENCV_INSTALL_MODULES:=on
OPENCV_LIB_TYPE:=STATIC
include /the/correct/path/tp/opencv/sdk/native/jni/OpenCV.mk 

LOCAL_MODULE    := mylib
LOCAL_SRC_FILES := mylib.cpp
include $(BUILD_SHARED_LIBRARY) 
```

应用程序.mk

```
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_ABI := all #i have tried various targets
APP_PLATFORM := android-8
APP_MODULES := mylib 
```

我没想到会这么难。我应该补充一点，我已经在另一个使用 Eclipse 3.5（我认为）和 OpenCV 2.4.2 在 WIndows 上构建的 rproject 中成功使用了带有 Android 的 opencv

编辑我还想说我只是做了一个快速的'n脏测试opencv操作。我编写了一个快速的 Sobel 函数，并将其作为 Java 文件中的本机函数调用，并成功“sobelled”了一个位图。当然，我仍然必须关闭/打开我的项目才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T14:11:19.373

嗨，我遇到了同样的问题，在我在“opencv android sdk”下面添加了包含问题的路径后消失了。

exp : C:\project\OpenCV-2.4.6-android-sdk\sdk\native\jni\include 用你的 opencv-android-sdk 路径切换路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-23T16:22:26.720

我知道这可能为时已晚，但在我的情况下（Windows + Eclipse）我纠正了这个问题，只是将路径和符号中的反斜杠“\”更改为斜杠“/”，包括 opencv jni 库。

示例：错误的 H:\opencv\sdk\native\jni\include 正确的 H:/opencv/sdk/native/jni/include

# event-handling - 如何在 AngularJS 上获取 Select2 事件

> ID：15766396
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:14:10.227
> 
> 标签：event-handling, angularjs, jquery-select2

我将 angularjs 与 select2 一起用于应用程序下拉列表，但我不知道如何在我的控制器中获取更改事件或其他事件。

有没有办法通过属性声明事件处理函数？比如**ui-select2 data-on-somethinghappened="fnx"**？

还是在我的配置上？喜欢：

```
appXpto.value('ui.config', {
    select2: {
        placeholder: 'Please select a value..',
        onsomethinghappened:function(e){ ... }
    }
}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T14:34:52.530

是的，您可以将控制器函数绑定到指令范围对象，并在指令上发生 select2 事件时调用它们。用于`&`绑定函数。然后调用 scope.myBoundFunction() 来调用带参数或不带参数的函数。

# c# - 方法完成执行时显示等待进度条

> ID：15766398
> 
> 赞同：0
> 
> 时间：2013-04-02T14:14:16.943
> 
> 标签：c#, asp.net

我有一个具有数据网格的 ASP.NET 网页。数据网格在按钮单击事件上加载。在加载数据网格之前，有一些方法执行，并且需要一些时间来获取数据。我想在加载网格之前显示一个进度条，为用户提供等待指示器。最好的方法是什么？

```
protected void btnStart_Click(object sender, ImageClickEventArgs e) {

    _bw = new BackgroundWorker();
    _bw.DoWork += bw_DoWork;
    _bw.RunWorkerCompleted += bw_RunWorkerCompleted;
    _bw.RunWorkerAsync();
    waiting.Style["display"] = "inline";
    divDataGrid.Style["display"] = "none";
}

private void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;
        int n = Convert.ToInt32(e.Argument);
        e.Result = PerformBinding(n, worker, e);
    }

private bool PerformBinding(int n, BackgroundWorker worker, DoWorkEventArgs e)
    {
        Service.Start();
        BindDataGrid();
        return true;
    }

private void BindDataGrid()
{
  //take some time to get data
}

private void bw_RunWorkerCompleted(object sender,
                                       RunWorkerCompletedEventArgs e)
    {
        waiting.Style["display"] = "none";
        divDataGrid.Style["display"] = "inline";
    } 
```

这里“waiting”是等待进度条的 div 标签 ID，“divDataGrid”是包含该网格的 div 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:43:56.637

谢谢大家。我找到了简单的解决方案。

```
<asp:ImageButton ID="btnStart" runat="server" src="images/Play.png" OnClick="btnStart_Click" OnClientClick="document.getElementById('waiting').style.display='block';" />

<div id="waiting" style="position: left: 0px; top: 0px; background-color: white;
                            height: 100%; width: 100%; display:none" align="center" runat="server" >
                            <img src="images/progress.gif" height="60px" />
                        </div>

protected void btnStart_Click(object sender, ImageClickEventArgs e)
    {
        Service.Start();
        BindDataGrid();
        waiting.Style.Add("display", "none;");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:01:48.410

首先，`BackgroundWorker`该类不是为在 ASP 环境中使用而设计的，因此不会对您有所帮助。你最好根本不使用它。

在 ASP 中创建这种行为比在桌面应用程序中*要困难得多。*这是因为您在客户端和服务器之间没有正确的双向通信。在 HTTP 中，客户端发出请求并得到*一个*响应。服务器不能随意向客户端发送数据（如果这样做，它将最终被忽略）。

您需要做的是首先创建一个新线程来异步执行处理。（您可能最好只使用`Thread`这里的类；线程池线程不太可能有帮助，并且在此基础上构建的其他工具（`Thread`例如后台工作程序、任务等）根本没有真正帮助.) 然后你需要让正在工作的线程存储一些关于当前进度的信息`Session`，或者以某种其他形式的持久状态（数据库或其他外部存储是另一种选择。最后，你需要有客户端代码（意思是javascript）在不断轮询服务器的页面上，检查持久存储的进度，并相应地更新客户端。这都是*高度*服务器效率低下，并且需要相当多的时间来开发。

[这](http://code.msdn.microsoft.com/CSASPNETBackgroundWorker-dda8d7b6/view/SourceCode)是此方法的 MSDN 上的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:44:30.373

我会将需要时间加载的代码放在更新面板中，以便您可以异步加载页面 - 首先是静态内容，然后在生成动态部分时，它们也会加载。您甚至可以在等待加载时放置某种旋转图标，使用更新面板上的某种就绪处理程序在加载时将其关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:56:56.687

如建议的那样，您可以使用`UpdatePanel`控制。在其中，您需要在其中设置`UpdateProgress`并添加一些[旋转图标](http://www.ajaxload.info/)：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
            <!-- Your controls here -->
    <updateprogress>
        <progresstemplate>
                <img src="images/loading.gif">
            </progresstemplate>
    </updateprogress>
</ContentTemplate>
<Triggers>
    <asp:AsyncPostBackTrigger />
</Triggers> 
```

# java - 不会从布尔表达式中调用变量

> ID：15766402
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:14:28.823
> 
> 标签：java, boolean

在调用变量时，我很难找到 java 到底遇到了什么问题。我正在创建一个简单的聊天机器人，这就是我目前所拥有的：

```
public class Chatbot {
    public static void main(String[] args) {
        String name = JOptionPane.showInputDialog("Hi! How are you? My name is Chatbot! What is yours? ");
        if (name.compareTo("a")<0){
            String city = JOptionPane.showInputDialog("Nice to meet you! Where are you from, "+name);
        }
        else
        {
            String city = JOptionPane.showInputDialog("Huh. That's a strange name. Where are you from,"+name);  
        }

        if (!city.equals("Seattle")){

        }

    }
} 
```

我的问题是 java 无法识别 if else 语句中的变量 city ，所以说 city 没有解决。如何让 java 识别布尔表达式中的对象？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:16:19.183

目前`city`的范围仅限于 if 或 else 块。通过在方法级别声明它使其成为局部变量来增加其范围。

公共静态无效主要（字符串[]参数）{

```
String name = JOptionPane.showInputDialog("Hi! How are you? My name is Chatbot! What is yours? ");
String city="";
if (name.compareTo("a")<0){
    city = JOptionPane.showInputDialog("Nice to meet you! Where are you from, "+name);
}
else
    {
    city = JOptionPane.showInputDialog("Huh. That's a strange name. Where are you from,"+name);  
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:17:20.720

贴 `String city = null` 在上面。然后使用它。它必须是出`if else`块的。

```
String city=null;
    String name = JOptionPane.showInputDialog("Hi! How are you? My name is Chatbot! What is yours? ");
if (name.compareTo("a")<0){
            city = JOptionPane.showInputDialog("Nice to meet you! Where are you from, "+name);
        }
        else
        {
            city = JOptionPane.showInputDialog("Huh. That's a strange name. Where are you from,"+name);  
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:17:59.673

如前所述，您需要在 if-else 块之外声明 city ，如下所示：

```
public static void main(String[] args) {
    String name = JOptionPane.showInputDialog("Hi! How are you? My name is Chatbot! What is yours?");
    String city = null;
    if (name.compareTo("a")<0){
       city = JOptionPane.showInputDialog("Nice to meet you! Where are you from, "+name);
    }
        else
    {
        city = JOptionPane.showInputDialog("Huh. That's a strange name. Where are you from,"+name);  
    }
    if (!city.equals("Seattle")){

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:19:23.810

尝试关注希望它有所帮助。

```
 public static void main( String[] args )
        {

            String name = JOptionPane.showInputDialog( "Hi! How are you? My name is Chatbot! What is yours? " );
            String city = "";
            if ( name.compareTo( "a" ) < 0 )
            {

                city = JOptionPane.showInputDialog( "Nice to meet you! Where are you from, " + name );
            }
            else
            {
                city = JOptionPane.showInputDialog( "Huh. That's a strange name. Where are you from," + name );
            }

            if ( !city.equals( "Seattle" ) )
            {

            }

        } 
```

# sql - T-Sql：将多行变成一行

> ID：15766407
> 
> 赞同：1
> 
> 时间：2013-04-02T14:14:43.380
> 
> 标签：sql, sql-server, tsql, select

如何将这些多行变成一行？N 和 Y 是布尔值。

```
Id  IsPnt IsPms, IsPdt  
1   N     Y      N  
1   N     Y      N  
1   Y     N      N 
```

进入这个

```
Id  IsPnt IsPms, IsPdt  
1   Y     Y      N 
```

编辑：

生成结果集的查询如下所示

```
select b.id, 
    CASE mpft.PlanIndCd WHEN 'PBMN' THEN 1 ELSE 0 END AS IsPnt,
    CASE mpft.PlanIndCd WHEN 'PBMT' THEN 1 ELSE 0 END AS IsPbt,
    CASE mpft.PlanIndCd WHEN 'PBMS' THEN 1 ELSE 0 END AS IsPms
from vw_D_SomveViewName pb
   -- bunch of joins 
where mpft.PlanIndCd in ('HANR', 'PBMN','PBMT','PBMS','HAWR') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:16:13.433

`MAX()`如果这些值是真实`Y`且`N`唯一的，您可以简单地使用它。

```
SELECT ID, MAX(IsPnt) IsPnt, MAX(IsPms) IsPms, MAX(IsPdt) IsPdt
FROM   tableName
GROUP  BY ID 
```

**更新 1**

```
SELECT  b.id, 
        MAX(CASE mpft.PlanIndCd WHEN 'PBMN' THEN 1 ELSE 0 END) AS IsPnt,
        MAX(CASE mpft.PlanIndCd WHEN 'PBMT' THEN 1 ELSE 0 END) AS IsPbt,
        MAX(CASE mpft.PlanIndCd WHEN 'PBMS' THEN 1 ELSE 0 END) AS IsPms
FROM    vw_D_SomveViewName pb
        -- bunch of joins 
WHERE   mpft.PlanIndCd in ('HANR', 'PBMN','PBMT','PBMS','HAWR')
GROUP   BY b.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:17:25.957

这行得通吗？

```
select
  id,
  max(IsPnt),
  max(IsPms),
  max(IsPdt)
from
  table
GROUP BY
  id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:32:25.317

编辑您的问题后，您可以直接使用`PIVOT`表运算符而不是使用`MAX`表达式，例如：

```
SELECT
  Id,
  PBMN AS IsPnt,
  PBMT AS IsPbt,
  PBMS AS IsPms
FROM
(
   SELECT
     id,
     mpft.PlanIndCd, 
     ROW_NUMBER() OVER(PARTITION BY id
                       ORDER BY ( SELECT 1)) AS RN
   from vw_D_SomveViewName pb
   -- bunch of joins 
   where mpft.PlanIndCd in ('HANR', 'PBMN','PBMT','PBMS','HAWR')
) AS t
PIVOt
(
   MAX(RN)
   FOR PlanIndCd IN ([PBMN], [PBMT], [PBMS])
) AS p; 
```

您可以在以下演示示例中看到它的实际效果：

[**SQL Fiddle 演示**](http://www.sqlfiddle.com/#!3/5cdc1/2)

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-04-02T14:17:25.407

```
select Id, MAX(IPnt), MAX(IsPms), MAX(IsPdt) 
from table etc 
```

# security - 如何停用 LDAP 用户？

> ID：15766409
> 
> 赞同：3
> 
> 时间：2013-04-02T14:14:45.980
> 
> 标签：security, authentication, ldap

我正在使用一个库来验证 LDAP 用户，其代码如下：

```
public void authUser(String username, String pwd)
    throws Exception
  {
    try
    {
      Properties env = getEnvironmentForContext();

      env.put("java.naming.security.principal", "uid=" + 
      username + ",ou=users, dc=company"));
      env.put("java.naming.security.credentials", pwd);
      context = getContext(env);
      System.out.println("Authentication Succeeded");
    }
    catch (Exception e)
    {
      System.out.println("Authentication Failed");
      throw e;
    }
  } 
```

请注意，我无法修改上述验证码。它来自外部库。

但是，我想停用一些用户（而不是删除它们），以便身份验证失败。我正在使用 LDAP（不是 Active Directory）。虽然不知道它是什么 LDAP 软件，但我可以使用“LDAP 浏览器客户端”连接到它。

用户存在于：dc=company、ou=users、uid=username

**我可以在 LDAP“用户”上添加/更改什么属性来停用用户。**
我可以将用户移动到不同的组，例如：dc=company、ou=deactivatedusers、uid=username？但这不是首选选项，而且我不确定最好的方法。

编辑：正在使用的 LDAP 是：Netscape/Sun/iPlanet

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T15:09:24.990

根据 Oracle iPlanet (Sun) 文档回答您的问题：

> 将该属性设置`nsAccountLock`为`true`将禁用用户帐户，并阻止他们绑定到目录。

`System.DirectoryServices.Protocols`但是，就您已经拥有的代码而言，我只是看不到任何实现此目的的方法...是否有什么阻止您使用.Net中的命名空间为 iPlanet 编写自己的实现？

以下是我针对 iPlanet 服务器绑定和授权用户的方法：

```
//Build servername from variables
var BuildServerName = new StringBuilder();
BuildServerName.Append(ServerName);
BuildServerName.Append(":" + Convert.ToString(Port));

var ldapConnection = new LdapConnection(BuildServerName.ToString());
//Authenticate the Admin username and password, making sure it's a valid login

try
{
    //Pass in the network (administrative) creds, and the domain.
    var networkCredential = new NetworkCredential(Username, Password, config.LdapAuth.LdapDomain);
    ldapConnection.SessionOptions.SecureSocketLayer = true;
    ldapConnection.SessionOptions.VerifyServerCertificate += delegate { return true; };
    ldapConnection.AuthType = AuthType.Anonymous;;
    ldapConnection.Bind(networkCredential);

    //Lets find this person so we can use the correct DN syntax when we authorize them.
    SearchRequest FindThem = new SearchRequest();
    FindThem.Filter = config.LdapAuth.LdapFilter.Replace("{{Patron}}", Patron);
    FindThem.DistinguishedName = config.LdapAuth.LdapDomain;
    FindThem.Scope = System.DirectoryServices.Protocols.SearchScope.Subtree;

    //We'll execute a search using the bound user
    SearchResponse searchresults = (SearchResponse) ldapConnection.SendRequest(FindThem);

    //Should only get on result back, if not throw an error
    if(searchresults.Entries.Count == 1)
    {
         SearchResultEntryCollection entries = searchresults.Entries;
         SearchResultEntry thispatron = entries[0];
         PatronDN = thispatron.DistinguishedName;
    }
 } 
```

如果您想将禁用的用户移动到特定组，从这一点开始，您可以编写逻辑来检查该用户的身份，如果他们包含该组的名称，`DistinguishedName`则抛出一个已处理的异常。`DistinguishedName`此外，如果`nsAccountLock`您的绑定帐户可以使用该属性作为可读属性，您只需检查该属性的值`true`，并相应地处理用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-21T10:36:00.770

这是使用 JNDI 在 Active Directory 中禁用和启用用户的 java 代码。在调用以下代码之前，请确保与您的 AD 建立连接。

```
 public void disableEnableUser() throws Exception {
ModificationItem[] mods = new ModificationItem[1];
            //To enable user
            //int UF_ACCOUNT_ENABLE = 0x0001;
            //mods[0] = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new BasicAttribute("userAccountControl",Integer.toString(UF_ACCOUNT_ENABLE)));

        // To disable user
        int UF_ACCOUNT_DISABLE = 0x0002;
        mods[0] = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new BasicAttribute("userAccountControl",Integer.toString(UF_ACCOUNT_DISABLE)));

        ctx.modifyAttributes("CN=John ABC,OU=Users,OU=anyone,DC=yourcompanyname,DC=com", mods);
    } 
```

可分辨名称 = "CN=John ABC,OU=Users,OU=anyone,DC=yourcompanyname,DC=com" 此名称取决于您的 Active Directory 结构，您可以从您的支持团队确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:49:50.460

您可以更改用户的密码。如果是带有密码策略覆盖的 OpenLDAP，或者另一个支持锁定的 LDAP 服务器，您也可以锁定用户。你真的必须找出答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T15:34:28.537

如果目录软件支持密码策略功能，它可能会提供锁定/停用用户的属性。如果没有，您可以简单地取消密码属性（例如，userpassword）。执行经过身份验证的绑定时，LDAP 服务器应向客户端返回“不适当的身份验证”错误。

# linux - 查找最早访问的文件

> ID：15766410
> 
> 赞同：2
> 
> 时间：2013-04-02T14:14:47.367
> 
> 标签：linux, bash, ubuntu

比如说，我怎样才能找到 100 个最旧的访问文件？我尝试了以下方法，但它只是打印随机访问的文件。

```
find /home/you -iname "*.pdf" -atime -100000 -type f | tail -n100 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T14:17:55.720

```
find /home/you -iname '*.pdf' -printf '%A@ %p\n' | sort -n | head -n 100 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:19:26.167

你可以使用`stat`命令

```
stat -c '%X %n' *.pdf | sort -n | head -n100 
```

# c++ - 如何停止在不同系统的 shell 中运行的进程？

> ID：15766416
> 
> 赞同：0
> 
> 时间：2013-04-02T14:15:26.040
> 
> 标签：c++, qt, shell

好的，所以我正在使用 qt-C++ 程序从我的主机系统执行我的 SBC6845 中存在的程序*./led.sh 。*该程序基本上将我的 SBC 连接到我的主机系统。它相当于“超级终端”或“Minicom”。我从[http://code.google.com/p/qextserialport/](http://code.google.com/p/qextserialport/)在“qextserialport-1.2rc.zip”中获得了这个程序（示例代码）“uartassistant” 。

我遇到了这个链接：[Running shell command in QT c++ in ubuntu](https://stackoverflow.com/questions/15415272/running-shell-command-in-qt-c-in-ubuntu)，同时搜索如何从 qt 程序内部执行 shell 命令。我尝试并成功执行*了 ./led.sh*。感谢链接。

我宣布

> `void someaction(); // in the dialog.h`

然后在 dialog.cpp 我添加这个

> `connect(ui->pushButton, SIGNAL(clicked()), SLOT(someaction()));`

还有这个

> `void Dialog::someaction()` `{`
> 
> > `QString command = "sh ./led.sh\r\n"; const char* command2;`
> > `command2 = command.toLocal8Bit().data();` `port->write(command2);`

我能够在我的 SBC 中进行 ledflash。

但是当我尝试停止*./led.sh*时出现问题，我无法在 uartassistant 中这样做（错误，需要修改，仍在工作）。但目前我正在尝试制作另一个 pushbutton_1 并在其中放入类似“Ctrl+Z”的内容并要求*./led.sh*停止。我遇到了一些其他链接，由于声誉点低，我无法放置这些链接。我不知道如何在 qt 应用程序中使用 SIGTERM / kill 选项[来自其他链接] 并在按钮单击时执行。假设我使用*kill*我将如何确定多个此类按钮操作的*pidof并分配要杀死的人。*

另外我想补充一点，我的 SBC 有灰 [Almquist shell]。所以它是 Bourne shell 的低内存克隆，我不知道它是否支持退出*led.sh*的正常命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:08:23.357

> 我不知道如何在 qt 应用程序中使用 SIGTERM / kill 选项[来自其他链接] 并在按钮单击时执行。

和很多东西一样，Qt 为您提供了一个直观的抽象，让您不必担心任何这些，即[QProcess](http://qt-project.org/doc/qt-5.0/qtcore/qprocess.html)。在你的情况下，你想要这样的东西：

```
QProcess proc;
proc.start("led.sh");
...

//handle Ctrl-Z event
proc.close(); 
```

[这里](https://stackoverflow.com/questions/10701504/command-working-in-terminal-but-not-via-qprocess)的第一个答案还有其他几种用于执行更复杂的 shell 命令的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:42:32.547

我为我的问题找到了一个临时解决方案。我还没有尝试*qprocess*操作。

在 dialog.h 我添加了另一个函数：

> `void someotheraction();`

然后在 dialog.cpp 我这样做了：

> `connect(ui->pushButton_2,SIGNAL(clicked()), SLOT(someotheraction()));`

还有这个：

```
void Dialog::someotheraction()
{
  QString command = "\x001a \r\n"; const char* command2; // Ctrl-Z = \x001a
  command2 = command.toLocal8Bit().data();
  port->write(command2);} 
```

[这里](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/2c3947e6-cc03-4822-a70e-3cba86747ced)的第五个回复给了我这个想法。我不知道如何，但它完成了这项工作，也许有人可以更好地解释它。

# .net - 是否可以在 .NET 中检索 Windows 显示器布局信息？

> ID：15766418
> 
> 赞同：1
> 
> 时间：2013-04-02T14:15:30.990
> 
> 标签：.net, windows, multiple-monitors

我想知道是否可以在 .NET 中以编程方式提取 Windows 监视器布局信息。至少，我感兴趣的信息是屏幕分辨率和某个坐标空间中的位置。模型和物理尺寸会很有用。写回布局的能力会很棒。

![在此处输入图像描述](https://i.stack.imgur.com/m4wrS.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:19:50.777

试试[Screen类的](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.aspx)[AllScreens](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.allscreens.aspx)属性，它至少可以为您提供有关多显示器设置的起点。我不知道您是否可以使用它来操纵值。

# javascript - Windows Phone 8 通过 javascript 调用在 Web 浏览器中共享内容

> ID：15766419
> 
> 赞同：0
> 
> 时间：2013-04-02T14:15:31.840
> 
> 标签：javascript, windows-phone-8

我有一个 HTML 页面，我可以使用带有共享按钮的 jQuery 在内容之间导航。他们在 iOS 和 iPhone 中使用它来通过电子邮件和平台上可用的其他社交媒体应用程序共享内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T07:45:48.233

处理浏览器导航事件。如果您将从 href 获取标签。例如，如果您在 href 中制作 mailto 标签，您将得到它。

```
<a href='mailto:MyMailToValue'>Share</a> 
```

只需执行一些字符串操作即可从 mailto 获取值，例如：MyMailToValue。现在您有了一个标签，您可以为其共享任何想要共享的字符串。

# php - MySQL RAND() 多久可以使用一次？它使用 /dev/random 吗？

> ID：15766420
> 
> 赞同：5
> 
> 时间：2013-04-02T14:15:37.623
> 
> 标签：php, mysql, random

我有一个只有几行的表（前 50 行），我需要从表中获取随机值我可以做到这一点
`ORDER BY RAND() LIMIT 1`
主要问题是当我在 5 秒内有 6k 次选择时，rand stil 是否“可靠”？兰特是如何计算的，我可以随着时间的推移播种吗？（idk，每 5 秒）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:47:49.683

MySQL 伪随机数生成器是完全确定的。文档说：

> RAND() 并不是一个完美的随机生成器。这是一种按需生成随机数的快速方法，可在同一 MySQL 版本的平台之间移植。

它不能使用 /dev/random，因为 MySQL 设计用于各种操作系统，其中一些没有 /dev/random。

MySQL 在服务器启动时初始化默认种子，使用`time(0)`. 如果您对源代码行感兴趣，它位于文件 sql/mysqld.cc, function 中的 MySQL 源代码中`init_server_components()`。我认为它永远不会重新播种。

然后随后的“随机”数字仅基于种子。请参阅源文件 mysys_ssl/my_rnd.cc，函数`my_rnd()`。

* * *

随机选择任务的最佳实践解决方案，无论是性能还是随机化质量，都是在最小主键值和最大主键值之间生成一个随机值。然后使用该随机值在表中选择一个主键：

```
SELECT ... FROM MyTable WHERE id > $random LIMIT 1 
```

您使用 > 而不是 = 的原因是，由于行被删除或回滚，您可能在 id 中存在间隙，或者您的 WHERE 子句中可能有其他条件，因此您在符合条件的行之间存在间隙.

这种大于方法的缺点：

*   在这样的差距之后的行有更高的机会被选中，差距越大机会越大。
*   在生成随机值之前，您需要知道 MIN(id) 和 MAX(id)。
*   如果您需要多个随机行，则效果不佳。

这种方法的优点：

*   即使对于适度的表大小，它也比 ORDER BY RAND() 快得多。
*   您可以在 SQL 之外使用随机函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:31:49.570

兰德是伪随机的。小心将其用于安全方面。我不认为您的“从五十个中随机选择一排”是为了安全，所以您可能没问题。

对于一张小桌子来说，这相当快。从大表中选择随机行将是可怕的：它必须用伪随机数标记每一行，然后对它们进行排序。对于您描述的应用程序，@TheEwook 的建议是完全正确的；即使是对一个小表进行超过每毫秒一次的排序也会淹没强大的 MySQL 硬件。

永远不要播种 RAND，除非你正在测试并且你想要一个可重复的随机数序列用于某种单元测试。在生成我认为难以猜测的会话令牌时，我曾经以一种艰难的方式学到了这一点。MySQL 人员在 RAND 方面做得很好，您可以信任他们的应用程序。

我认为（不确定），如果你不播种，它会从 /dev/random 中的随机种子开始。

如果您需要加密级随机数，请自行阅读 /dev/random。但请记住，/dev/random 只能生成有限的速率。/dev/urandom 使用 /dev/random 生成更快的速率，但在其熵池中没有那么高等级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:23:19.697

如果您的表不是太大（假设最多 1000 条记录），这并不重要。但是对于大桌子，您必须选择另一种方式。

这篇文章可以帮助你：

[http://www.titov.net/2005/09/21/do-not-use-order-by-rand-or-how-to-get-random-rows-from-table/](http://www.titov.net/2005/09/21/do-not-use-order-by-rand-or-how-to-get-random-rows-from-table/)

# ios - MonoTouch.Dialog UIProgressView

> ID：15766424
> 
> 赞同：0
> 
> 时间：2013-04-02T14:15:55.167
> 
> 标签：ios, xamarin.ios, monotouch.dialog, xamarin, uiprogressview

如何实现 UIProgressView `MonoTouch.Dialog`？

有没有办法在不创建自定义元素的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:22:54.933

我在当前项目中使用Xamarin 组件目录中的[Progress HUB](http://components.xamarin.com/view/mbprogresshud/)。使用新的 Xamarin Studio，它易于安装，并且具有干净且易于使用的 API。[组件目录](http://components.xamarin.com/)中还有很多其他选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:34:14.300

您可以使用 将任何内容包装`UIView`到 MT.D 元素中`UIViewElement`，但请记住，该元素没有单元重用。

# c# - 在命令程序关闭后调用几种方法

> ID：15766425
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:15:55.937
> 
> 标签：c#, winforms

我有一个通过另一个程序`WinForm`连接的应用程序。`Net.Sockets`

当它关闭`X`或`ALT`+`F4`或其他什么时，应该处理几个例程，我需要保持网络连接，直到它们完成。

我认为**Application.ApplicationExit**处理程序可以解决问题，但是一旦我下达命令，网络连接就死了。其他重要的事情不能做。

我的表格也立即关闭了，我需要那个时间长一点。

是`Application.ApplicationExit`适合这项工作的工具吗？

我把它放在我的表单类中，它`App.Runs`来自位于不同类中的 Main 方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:20:25.623

您可以使用`Closing`表单的事件。在表单关闭之前调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:21:22.040

如果您有一个打开的窗口，则有事件处理程序`Closing`和`Closed`. 例如`Closing`，一旦您单击“X”，就会触发 - 事件。在该方法中，您甚至可以决定是否关闭窗口。

提供一个事件处理程序，如

```
private void Form1_Closing(object sender, FormClosingEventArgs e){
// persist until everything is done
} 
```

并将其与事件相关联

```
Form1.Closing += Form1_Closing; 
```

有关文档，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.close.aspx)。

# javascript - 菜单悬停效果点亮整个休息页面

> ID：15766426
> 
> 赞同：-5
> 
> 时间：2013-04-02T14:15:58.027
> 
> 标签：javascript, jquery, html, css

请让我知道如何制作像以下网站一样的菜单悬停效果：

[https://www.bankalhabib.com/](https://www.bankalhabib.com/)

```
<ul>
<li>Home</li>
<li>About</li>
<li>Contact</li>
<li>Num</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:19:10.897

我建议你使用`addClass()`和 CSS：

```
$('li').hover(function(){
    $(this).addClass('hovered');
},function(){
    $(this).removeClass('hovered');
}); 
```

这需要您添加 CSS 规则来设置不透明度的样式：

```
ul:hover li {
    opacity: 0.4;
}

ul li.hovered {
    opacity: 1;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/49Qvm/2/)。

顺便说一句，如果你能表现出你在解决自己的问题上可能付出的一些*努力*，你可能不会得到那么多反对票。它确实读作一种需求，而不是目前写的一个问题。

当然，您可以使用简单的 CSS：

```
ul:hover li {
    opacity: 0.4;
}

ul li:hover {
    opacity: 1;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/49Qvm/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:49:00.820

**叠加效果**

在感兴趣的网站 ( [https://www.bankalhabib.com/](https://www.bankalhabib.com/) ) 上，当您将鼠标悬停在导航链接上时，页面会变暗/变暗，例如“主页”。

此效果是以下元素的结果：

```
<span class="overlay" style="height: 2464px; display: none;"></span> 
```

默认情况下是隐藏`display: none`的 ( )。

该元素通过以下 jQuery 操作（位于：js/custom_js.js）可见：

```
/*Over Lay Display controll in bottom*/
$(document).ready(function() {
$(" ul.mainNav li.home").mouseover(function() {
$(".overlay").css({'display':'block'});
$(" ul.mainNav").css({'z-index':'8'});
$(" .dropDown").css({'z-index':'8'});
})
}); 
```

诀窍很简单，两步。

(1) 显示`overlay`元素

(2) 更改`z-index`导航元素和下拉类的设置，使菜单在覆盖层上方可见。

叠加层比网站的其余部分更靠近视图（z-index 更高），因此它的背景颜色掩盖/使网站的其余部分变暗，除了向上移动 z 轴的导航元素。

现在您知道要查找什么，您可以研究 CSS 和 jQuery 细节以了解如何在另一种情况下实现它。

# c# - 在 AutoMapper 中使用上下文值进行投影

> ID：15766427
> 
> 赞同：7
> 
> 时间：2013-04-02T14:15:58.057
> 
> 标签：c#, automapper, automapper-2

我目前正在评估 AutoMapper 是否对我们的项目有益。我正在使用 ASP.NET Web API 开发一个 RESTful Web API，我必须返回的一件事是包含链接的资源。考虑这个简化的示例，使用以下域对象：

```
public class Customer
{
    public string Name { get; set; }
} 
```

我需要将它映射到一个资源对象中，有点像 DTO，但添加了属性以促进 REST。这就是我的资源对象的样子：

```
public class CustomerResource
{
    public string Name { get; set; }
    public Dictionary<string, string> Links { get; set; }
} 
```

Links 属性需要包含指向相关资源的链接。现在，我可以使用以下方法构建它们：

```
public IEnumerable<CustomerResource> Get()
{
    Func<Customer, CustomerResource> map = customer => 
        new CustomerResource
        {
            Name = customer.Name,
            Links = new Dictionary<string, string>()
            {
                {"self", Url.Link("DefaultApi", new { controller = "Customers", name = customer.Name })}
            }
        }

    var customers = Repository.GetAll();
    return customers.Select(map);
} 
```

...但这很乏味，而且我有很多嵌套资源等。我看到的问题是我不能使用 AutoMapper，因为它不允许我提供投影期间所需的某些东西，这些东西的范围仅限于执行映射操作的点。在这种情况下，ApiController 的 Url 属性提供了我需要为我创建链接的 UrlHelper 实例，但可能还有其他情况。

你将如何解决这个难题？

PS 我专门为这个问题输入了这段代码，它在你的脑海中编译，但在你最喜欢的 IDE 中可能会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:56:06.840

这不是一个很好的解决方案，但在阅读完文档后，似乎没有一个......我们目前正在通过映射`Tuple<TDomainType, TContextStuff>`到`TDataTransfer`. 所以在你的情况下，你会`Mapper.CreateMap<Tuple<Customer, Controller>, CustomerResource>`.

不漂亮，但它有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T12:42:08.253

我会考虑使用[自定义类型转换器](http://automapper.codeplex.com/wikipage?title=Custom%20Type%20Converters)。类型转换器可以通过 IOC 容器注入上下文信息。或者，由于转换器是在配置时实例化的，它可以引用一个工厂，该工厂将在每次运行类型转换器时返回上下文信息。

**简单示例**

你可以定义一个接口来获取你当前的“上下文”（这意味着什么取决于你在做什么以及你如何实现事情，所以在这个例子中，我将只使用当前的 HttpContext，它可以让你访问 Session、Server、Items， ETC...）：

```
public interface IContextFactory
{
    HttpContext GetContext();
} 
```

实现很简单：

```
public class WebContextFactory : IContextFactory
{
    public HttpContext GetContext()
    {
        return HttpContext.Current;
    }
} 
```

您的自定义类型转换器可以从您的 IOC 容器中获取 IContextFactory 的实例，并且每次运行映射时，您都可以调用 GetContext() 来获取当前请求的上下文。

**访问 Url 属性**

UrlHelper 来自附加到当前控制器上下文的 Request 对象。不幸的是，这在 HttpContext 中不可用。但是，您可以覆盖 ApiController 上的 Initialize 方法并将 controllerContext 存储在 HttpContext.Items 集合中：

```
protected override void Initialize(System.Web.Http.Controllers.HttpControllerContext controllerContext)
{
    HttpContext.Current.Items["controllerContext"] = controllerContext;
    base.Initialize(controllerContext);
} 
```

然后，您可以从当前的 HttpContext 访问它：

```
var helper = ((HttpControllerContext) HttpContext.Current.Items["controllerContext"]).Request.GetUrlHelper(); 
```

我不确定这是不是*最好*的解决方案，但它可以让您在自定义类型映射器中获得 UrlHelper 实例。

# mysql - 寻找有关 SQL 查询的帮助

> ID：15766429
> 
> 赞同：0
> 
> 时间：2013-04-02T14:16:05.437
> 
> 标签：mysql, sql, database, optimization

我正在寻找一种从我的 sql 表中检索数据的更好方法。

```
Table 1: User data
- User Id
- User Created date

Table 2: Mapping of the user with a role
- User Id
- Role

Table 3 
Role definition

Table 4 (may or may not have user data based on his activities on the site)
User data
Eg.
- User Id
- Total counts of the number of visits made on the portal 
```

我希望编写最少数量的查询（最好是 1 个）来执行以下操作

**我想打印每个角色类型中总计数最高的用户 **

输出将如下所示：

```
Header UserId---Rolename--Total Count
Row1   Test1 ---Staff   --1293
Row2   Test2 ---Faculty --1223
Row3   Test3 ---Dean    --2283928 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:35:19.190

这是你要找的：

```
SELECT a.UserId, b.Role, c.TotalCount
FROM TABLE1 as a join Table2 as b on a.UserId = b.UserId
                 join Table 4 as c on a.UserId = c.UserId
ORDER BY c.TotalCount DESC
LIMIT 3 
```

# javascript - 有没有办法知道客户端已经完全下载了文件？

> ID：15766431
> 
> 赞同：3
> 
> 时间：2013-04-02T14:16:06.370
> 
> 标签：javascript, ajax, jquery

我有一个大文件。

我想做以下 1) 想将它上传到服务器 2) 一旦用户成功下载文件，我想从服务器自动删除文件。

有没有办法知道客户端已经完成下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:04:57.387

如果您的服务器有 cron 作业，那么您可以设置其中一个以“安全”增量在公共 Web 目录之外运行 PHP 脚本（此时他们要么下载了文件，要么无法获取它）。每次脚本运行时，删除已经标记的文件，并标记所有剩余的文件。可能看起来像这样，但使用真实代码：

```
<?php
// File description: scheduled by cron jobs to run every 12 hours

// Unlink all the marked files

// Mark all files in directory 
```

例如，您可以将标记文件的名称存储在文本文档中（也在您的公共 Web 目录之外）。这样，用户至少有那么长的时间来下载文件。

# java - 使用 Java 7 在 OSX 中创建文件的时间

> ID：15766438
> 
> 赞同：5
> 
> 时间：2013-04-02T14:16:18.907
> 
> 标签：java, filesystems, timestamp, java-7

我需要在 OS X Lion 上获取文件的创建时间属性。我尝试过使用**Java nio**，但它返回的是修改时间：

```
BasicFileAttributes attr = Files.readAttributes(path, BasicFileAttributes.class);     
System.out.println("Creation time: " + attr.creationTime()); 
```

我已经阅读了类似的问题（[在 Java 中确定文件创建日期](https://stackoverflow.com/questions/2723838/determine-file-creation-date-in-java)），并且我知道某些文件系统不支持文件创建时间戳，但[HFSP 这样](http://en.wikipedia.org/wiki/Comparison_of_file_systems#Metadata)做不应该 BasicFileAttributes.creationTime 方法在 OS X 上返回正确的值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:14:48.330

不知道为什么，但您是否看到所有这些的相同时间戳：

```
System.out.println("creationTime: " + attr.creationTime());
System.out.println("lastAccessTime: " + attr.lastAccessTime());
System.out.println("lastModifiedTime: " + attr.lastModifiedTime()); 
```

# html - 如何避免文字低于带有css的图标？

> ID：15766447
> 
> 赞同：3
> 
> 时间：2013-04-02T14:16:42.233
> 
> 标签：html, css, icons, css-float, text-alignment

这是我尝试使用 CSS 实现的视觉示例：

![在此处输入图像描述](https://i.stack.imgur.com/8GbqK.png)

也是[http://jsfiddle.net/En4yC/3/上的实时示例](http://jsfiddle.net/En4yC/3/)

问题是我需要将文本与图标对齐，但没有给它一个严格的宽度，因为容器列是液体。你认为这可能吗？也许一些负边距适用于浮动？

```
//CSS
.column {
    width:33.3333%;
}

.ico {
    display: inline-block;
    float:left;
    width: 32px;
    height: 32px;
    margin-top: 4px;
    margin-right:10px;
    line-height: 32px;
    background-image: url("http://fakeimg.pl/32x32/");
    background-position: 0 0;
    background-repeat: no-repeat;
}

//HTML
<div class="column"> 
    <span class="ico"></span>
    <span class="title">Curabitur pharetra<br/> nibh eget<br/> lorem<br/> egestas laoreet</span>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T14:28:30.437

将此添加到您的 CSS 中：

```
.title { display: block; overflow: hidden; } 
```

这样，如果有图像，文本将位于图像旁边，如果没有，它将粘在容器的左边框上。我删除了 br 标签以表明它在没有它们的情况下也可以工作：

[http://jsfiddle.net/En4yC/9/](http://jsfiddle.net/En4yC/9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:21:27.760

使标题浮动在浮动图标旁边：

```
.title { float: left; } 
```

演示：http: [//jsfiddle.net/Guffa/En4yC/4/](http://jsfiddle.net/Guffa/En4yC/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:24:07.590

只要您的图标是静态大小，您就可以使用边距：

[http://jsfiddle.net/En4yC/7/](http://jsfiddle.net/En4yC/7/)

```
.title {
    margin-left: 42px; /* size of image + desired padding after image */
    display: block;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T14:35:06.843

来了……

**HTML**

```
<div class="column"> 
    <div class="ico"></div>
    <span class="title">Curabitur pharetra<br/> nibh eget<br/> lorem<br/> egestas laoreet</span>
</div> 
```

**CSS**

```
.column
{
    width:33%;
}

.ico, 
.title
{
   display:inline-block;
   vertical-align:top;
}

.ico 
{
    width:32px;
    height:32px;
    background: url("http://fakeimg.pl/32x32/") no-repeat 0px 0px;  
    padding:5px;
} 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T14:31:52.267

的HTML：

```
<div class="content">
<img src="img.jpg" width="30" height="30" />
<p>Curabitur pharetra nibh eget lorem egestas laoreet</p>
</div> 
```

你的CSS：

```
.content {
padding: 0 0 0 50px;
position: relative; 
}

.content img {
left: 0;
position: absolute;
top: 0;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-02T14:24:26.883

这个怎么样？这显示了如何将图标或图像放在 div 中，并将其放在另一个 div 旁边，其中包含文本，这将确保文本一致地流动。

[http://jsfiddle.net/En4yC/6/](http://jsfiddle.net/En4yC/6/)

```
<div class="icon">
    <img src="http://fakeimg.pl/32x32/" />
</div>
<div class="text">
    Curabitur pharetra nibh eget lorem egestas laoreet
</div>

.icon {
    float:left;
}

.text {
    float:left;
    padding: 0 10px;
    width: 100px;
} 
```

# javascript - 使用 jquery 在基于用户定义的变量的选择中选择一个选项

> ID：15766448
> 
> 赞同：0
> 
> 时间：2013-04-02T14:16:46.787
> 
> 标签：javascript, jquery, select

给定一个用户定义的变量`jstatus`，我希望应该在给定的选项列表中选择该特定变量。

我的清单是这样的：

```
<select name='job_status' id='job_status'>
    <option>Pre-press</option>
    <option>Printers</option>
    <option>Cutting</option>
    <option>Final touches</option>
    <option>Delivery</option>
    <option>Ready</option>
</select> 
```

在设置 的值后，在我的 javascript 代码中的某处`jstatus`，这是我的 jquery：

```
$("#job_status option[value='"+jstatus+"']").attr('selected','selected'); 
```

但它不起作用。正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:18:28.723

最简单的方法是直接设置值：

```
jQuery("#job_status").val(jstatus); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:18:44.353

您需要先向选择器添加值。

```
<option value="Pre-press">Pre-press</option> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:20:44.437

问题是您的选择列表的选项没有“价值”属性

```
<select name='job_status' id='job_status'>
     <option value="val1">Pre-press</option>
     <option value="val2">Printers</option>
     <option value="val3">Cutting</option>
     <option value="val4">Final touches</option>
     <option value="val5">Delivery</option>
     <option value="val6">Ready</option>
</select>

<script>
    $( 'select option[value="val3"]' ).attr( 'selected', 'selected' );
</script> 
```

你也可以使用 jQuery 的 val() 方法

`$( 'select' ).val( 'val3' )`

这将具有与上述相同的效果

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T14:30:01.173

如果您仍然喜欢使用直接选择器，可以使用 :contains 来按内容选择元素。对于您的情况，它几乎是这样的：

```
$("#job_status option:contains("+jstatus+")").attr('selected','selected'); 
```

# asp.net-mvc - 如何在 MVC 中加密和解密数据？

> ID：15766450
> 
> 赞同：0
> 
> 时间：2013-04-02T14:16:55.450
> 
> 标签：asp.net-mvc, razor, encryption

在我的**MVC 应用程序**中，我想**加密**和**解密**从视图到控制器的数据传输中的数据。如何使用**Razor在****MVC 4**中执行此操作？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:20:35.590

您不需要加密从控制器到视图的数据，因为视图渲染发生在控制器正在运行的同一台计算机上。

如果要加密发送给用户的页面，则应使用 ssl 连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:46:05.917

基于此评论：***“假设我要从我的视图向我的控制器发送一个 id，并且我想加密这个 id？”***

如果您想加密视图中的“id”，在这种情况下，您已经在视图中拥有“id”，“id”将在数据库或其他但不在客户端中生成。

在这种情况下，您可以将“id”放在客户端后加密，然后控制器只解密“id”。

在这里，您有一个仅加密“id”的示例，这是为了安全起见，因此数据不会在寻找“id”。

在这种情况下，您必须加密和解密该属性：

[https://stackoverflow.com/a/14774470/138071](https://stackoverflow.com/a/14774470/138071)
[http://amitpatatelit.com/2011/08/08/url-encryption-in-mvc-application/](http://amitpatelit.com/2011/08/08/url-encryption-in-mvc-application/)

在此示例（西班牙语）中，所有接收到的参数都带有下划线 (_)：

[http://geeks.ms/blogs/etomas/archive/2012/07/08/asp-net-mvc-encriptar-routevalues.aspx?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+BurbujasNetGeeks+%28Burbujas+en+.NET+% 28%40geeks.ms%29%29](http://geeks.ms/blogs/etomas/archive/2012/07/08/asp-net-mvc-encriptar-routevalues.aspx?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:%20BurbujasNetGeeks%20%28Burbujas%20en%20.NET%20%28@geeks.ms%29%29)**

# svn - 巡航控制未显示修改

> ID：15766455
> 
> 赞同：0
> 
> 时间：2013-04-02T14:17:10.377
> 
> 标签：svn, cruisecontrol

我们的巡航控制没有正确显示修改。看起来它无法检索信息。我一直无法弄清楚为什么。

![截屏](https://i.stack.imgur.com/sEdYE.png)

[编辑] 我发现了一些看起来很可疑的东西：

在 JMX 控制台中，在每个项目中，数据类型`commitMessages`是 `[[Ljava.lang.String`和`getBuildOutput`是`[Ljava.lang.String` ，包括括号和“L”。

![在此处输入图像描述](https://i.stack.imgur.com/T05Sk.png)

如果我点击 Invoke 我会得到`[[Ljava.lang.String;@f6dd4`而不是内容。

这不是CC中的错误吗？

# objective-c - 使用两个窗口

> ID：15766459
> 
> 赞同：1
> 
> 时间：2013-04-02T14:17:18.833
> 
> 标签：objective-c, xcode, macos, cocoa

我是专门编程目标 c 的新手。

我在 MainMenu.xib 中有两个窗口。

当我运行我的应用程序时，第一个窗口（带有 webview）正在启动。我可以从顶部菜单启动第二个窗口（带有文本字段和保存按钮）。

我已将首次启动的默认 URL 指定为“www.google.com”。

现在我想通过将它放在第二个窗口的文本字段中来配置 URL。每当我单击“保存”时，第一个窗口应该用新给定的 URL 刷新。

这怎么可能以及我如何连接它影响第一个窗口的操作按钮“SAVE”。

这是我的代码

**AppDelegate.h 包含**

```
@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet WebView *webview;
@property (assign) IBOutlet NSTextField *urlString;

- (IBAction)save:(id)sender;

@end
**And my AppDelegate.m contains**

@implementation AppDelegate

@synthesize webview;
@synthesize urlString;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{

    NSString *urlString = @"http://www.google.com";
    [[webview mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]];

}

-(IBAction)save{
[[webview mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString.stringValue]]];

}

@end 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:38:40.477

您需要打开**保存菜单**并 Ctrl+Drag 到您的班级。

将操作设置为您的`save`或创建一个新的。

（要么从 XCode 创建的 IBAction 方法调用你的方法，要么把你的代码放在那里。）

![在此处输入图像描述](https://i.stack.imgur.com/PUKCZ.png)

# xml - XML Schema：根据子元素限制出现次数

> ID：15766460
> 
> 赞同：0
> 
> 时间：2013-04-02T14:17:18.883
> 
> 标签：xml, xsd

我有一个带有一系列 curatedCoupon 元素的**myCoupon****元素**。*我知道我可以通过添加maxOccurs*属性来限制出现次数。但是，我想根据 isCouponActive 元素限制其数量（比如我只想允许 5 张有效优惠券）。这是可以实现的吗？

 ***```
 <xs:complexType name="curatedCoupon">
    <xs:sequence>
      <xs:element name="isCouponActive" type="xs:boolean" default="false" minOccurs="0">
    </xs:sequence>      
  </xs:complexType>  

  <xs:element name="myCoupon">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="curatedCoupon" type="sbcc:curatedCoupon" minOccurs="0" />
      </xs:sequence>
    </xs:complexType>
  </xs:element> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:39:23.540

您可以通过使用 XML Schema 1.1 中的断言约束来做到这一点。在“myCoupon”元素上，您可以像这样添加“断言”：

```
<xs:element name="myCoupon">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="curatedCoupon" type="curatedCoupon" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:assert test="count(curatedCoupon/isCouponActive[text()='true']) &lt;= 5"/>
    </xs:complexType>
</xs:element> 
```***

# grails - 如何在我的应用程序中取消授权/撤销 LinkedIn 令牌

> ID：15766464
> 
> 赞同：4
> 
> 时间：2013-04-02T14:17:24.780
> 
> 标签：grails, oauth, token, linkedin

我有一个 grails 应用程序，我希望用户授予我访问他/她的 LinkedIn 帐户的权限，以获取信息并以不同的方式显示它。

我能够做到以下几点：

1.  获取授权码
2.  使用该授权码获取访问令牌
3.  我将该访问令牌与到期日期一起存储在我的用户实体中。
4.  当到期日期在从今天起的 X 天内刷新该访问令牌。

现在我遇到的问题是我希望用户撤销或使该令牌无效，以便其他人可以使用相同的计算机和会话并登录到不同的 LinkedIn 帐户。

*   这可能吗？
*   如果不？有没有办法删除 LinkedIn cookie？这样用户的 LinkedIn 会话就完成了，并且通过从 LinkedIn 注销，他们将不得不再次授予对我的应用程序的访问权限。

以供参考：

*   我正在使用 Grails 2.1.1
*   我**没有**使用 oauth 进行身份验证，我只是使用 Groovy 中的 HTTPClient 来执行简单明了的 GET 和 POST 请求。

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-11-20T18:44:02.483

我已设法通过此调用撤销 API v2 上的令牌：

```
curl --request POST \
  --url https://www.linkedin.com/oauth/v2/revoke \
  --header 'Content-Type: application/x-www-form-urlencoded' \
  --data client_id=CLIENT_ID_HERE \
  --data client_secret=CLIENT_SECRET_HERE \
  --data token=YOUR_TOKEN_HERE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:14:53.120

最简单的做法就是从存储中删除访问令牌。这样您就无法再访问该帐户。当 LinkedIn 使用 OAuth 1.0a 时，他们有一个 Invalidate 调用，这将使访问令牌无效。但是当他们迁移到 OAuth 2.0 时，这种情况就消失了。

# asp.net - 如何在gridview中合并两列

> ID：15766471
> 
> 赞同：7
> 
> 时间：2013-04-02T14:17:44.363
> 
> 标签：asp.net, gridview

我有一个网格视图

```
 <asp:BoundField DataField="UnusedTicketAmount" HeaderText="UnusedTicketAmount" />
        <asp:BoundField DataField="ddlUnusedAmount" HeaderText="ddlUnusedAmount" />
        <asp:BoundField DataField="AirlinePenality" HeaderText="AirlinePenality" />
        <asp:BoundField DataField="ddlAirlinePenality" HeaderText="ddlAirlinePenality" />
        <asp:BoundField DataField="NetRefundProcess" HeaderText="NetRefundProcess" />
        <asp:BoundField DataField="ddlNetRefundProcess" HeaderText="ddlNetRefundProcess" />
        <asp:BoundField DataField="RefundableCommission" HeaderText="RefundableCommission" />
        <asp:BoundField DataField="ddlRefundableCommission" HeaderText="ddlRefundableCommission" />
        <asp:BoundField DataField="CouponRefunded" HeaderText="CouponRefunded" />
        <asp:BoundField DataField="RefundType" HeaderText="RefundType" /> 
```

在这个gridview中，我想将airlinepenality和ddlairlinepanelity添加到一列中，我该如何做到这一点提前谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T14:28:48.603

您可以像这样创建一个模板字段并绑定两个字段。

```
<asp:TemplateField HeaderText="Airlinepenality"   SortExpression="ddlAirlinePenality">
<ItemTemplate>
    <asp:Label ID="Label1" runat="server" Text='<%#Eval("AirlinePenality")+ " " + Eval("ddlAirlinePenality")%>' ></asp:Label>
</ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:34:20.363

你正在使用`Bound field`，`we can merge two columns by TemplateField`只有，所以更好`you can merge that two columns in your query`，

尝试如下...

**询问：**

```
SELECT UnusedTicketAmount, ddlUnusedAmount, 
cast(1.25 as varchar) + ' ' + cast(172813.99 as varchar) as AirlinePenality,
NetRefundProcess,ddlNetRefundProcess,RefundableCommission
ddlRefundableCommission,CouponRefunded,RefundType 
```

**网格视图**

```
<asp:BoundField DataField="UnusedTicketAmount" HeaderText="UnusedTicketAmount" />
<asp:BoundField DataField="ddlUnusedAmount" HeaderText="ddlUnusedAmount" />
<asp:BoundField DataField="AirlinePenality" HeaderText="AirlinePenality" />
<asp:BoundField DataField="NetRefundProcess" HeaderText="NetRefundProcess" />
<asp:BoundField DataField="ddlNetRefundProcess" HeaderText="ddlNetRefundProcess" />
<asp:BoundField DataField="RefundableCommission" HeaderText="RefundableCommission" />
<asp:BoundField DataField="ddlRefundableCommission" HeaderText="ddlRefundableCommission" />
<asp:BoundField DataField="CouponRefunded" HeaderText="CouponRefunded" />
<asp:BoundField DataField="RefundType" HeaderText="RefundType" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-18T10:20:09.167

假设您要合并网格的最后三列，那么您也可以使用以下代码：

```
 protected void grdAirTicketList_RowDataBound(object sender, GridViewRowEventArgs e)
  {
      if (e.Row.RowType == DataControlRowType.Header)
      {
          e.Row.Cells[8].Visible = false;
          e.Row.Cells[7].Visible = false;
          e.Row.Cells[6].Attributes.Add("colspan", "3");
      }
  } 
```

这意味着您的名为“CouponRefunded”和“RefundType”的列将不可见，而 colspan 3 将显示“ddlRefundableCommission”。

# javascript - stream2 可写 - 有没有办法定义一个“_end”函数？

> ID：15766475
> 
> 赞同：3
> 
> 时间：2013-04-02T14:17:46.583
> 
> 标签：javascript, node.js, streams2

我对node.js 的新streams2 API 有点困惑。我尝试创建一个可写流，但找不到定义“_end”函数的方法。只有我可以覆盖的“_write”函数。文档中也没有任何内容可以告诉我该怎么做。

在有人调用 mystream.end() 之后，我正在寻找一种方法来定义一个函数以正确关闭流。

我的流写入另一个流，关闭我的流后，我还想在发送所有数据后关闭底层流。

我该怎么做？

它看起来如何：

```
var stream = require("stream");

function MyStream(basestream){
    this.base = basestream;
}
MyStream.prototype = Object.create(stream.Writable);
MyStream.prototype._write = function(chunk,encoding,cb){
    this.base.write(chunk,encoding,cb);
}
MyStream.prototype._end = function(cb){
    this.base.end(cb);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T15:37:15.073

您可以侦听`finish`流中的事件并使其调用`_end`：

```
function MyStream(basestream) {
  stream.Writable.call(this); // I don't think this is strictly necessary in this case, but better be safe :)
  this.base = basestream;
  this.on('finish', this._end.bind(this));
}

MyStream.prototype._end = function(cb){
  this.base.end(cb);
} 
```

# android - 管理 AlarmManager 以每周重复一次操作

> ID：15766476
> 
> 赞同：1
> 
> 时间：2013-04-02T14:17:47.820
> 
> 标签：android, alarmmanager, alarm

我今天早上一直在寻找关于如何使用 AlarmManager 每周执行一项操作的好教程。我发现的唯一的事情是：

[在 Android 中使用 AlarmManager/BroadcastReceiver 在每个星期一重复警报](https://stackoverflow.com/questions/11167025/repeat-alarms-on-every-monday-in-android-usig-alarmmanager-broadcastreceiver)

但它与我读过的所有其他内容不同，而且我并不完全理解代码。

请你帮助我好吗？

我正在使用表单来完成，并使用 s 按钮创建用户配置的警报。我读了所有的输入，但是我不知道如何翻译它来发出警报。

谢谢你。

# shopify - Shopify API 订单集合在传入 updated_at 过滤器时如何排序

> ID：15766479
> 
> 赞同：1
> 
> 时间：2013-04-02T14:17:57.430
> 
> 标签：shopify

[此问题与Shopify REST 集合的排序顺序](https://stackoverflow.com/questions/12539676/sort-order-of-shopify-rest-collections)密切相关，但该问题的答案特定于`since_id`参数。

`updated_at_min`我的问题是，在提供或提供时，API 上的订单集合的预期排序顺序是什么`updated_at_max`？

理想的情况是能够以一种或另一种方式以升序获得结果，但不必传入`since_id`，因为我们希望能够持续获取订单的新数据，因为它们可能会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-05T18:05:06.583

这是一个老问题，但对于任何感兴趣的人来说，都可以通过传递“订单”参数对订单集合进行排序。“order”参数应包含要排序的字段（支持的字段是“created_at”、“updated_at”和“processed_at”），后跟一个空格，然后是“asc”或“desc”。

例如检查下面的调用：

```
https://abc.myshopify.com/admin/orders.json?limit=2&fields=id,note,created_at&order=created_at%20asc 
```

这将按 created_at 日期升序对订单进行排序。

# php - '1' 数字出现在 wordpress 网站的侧边栏下

> ID：15766485
> 
> 赞同：5
> 
> 时间：2013-04-02T14:18:09.500
> 
> 标签：php, wordpress, function, echo, categories

下午早些时候，我曾要求解决如何在 Wordpress 的不同类别页面上回显不同的侧边栏的解决方案。现在我面临的问题是所有类别页面的侧边栏下都显示一个连续的“1”。但是，当我切换回在所有类别页面上仅显示一个侧边栏的旧代码时，这并没有发生。这是最初在 sidebar.php 文件中的代码，它在所有页面上只回显一个侧边栏：

```
<?php  if ( is_active_sidebar( 'main_sidebar' ) ) :  ?>

     <div id="main_sidebar" class="widget-area">
               <?php dynamic_sidebar( 'main_sidebar' ); ?>
     </div><!-- #first_sidebar .widget-area -->

<?php endif; ?> 
```

这是我放在 sidebar.php 文件中的修改后的代码，它在不同的类别页面上呼应不同的侧边栏：

```
<?php  if ( is_active_sidebar( "main_sidebar" ) ) :  ?>

     <div id="main_sidebar" class="widget-area">
               <?php
               if ( is_category( '7' )) {
               echo dynamic_sidebar( 'category_fashion' );
               }
               elseif ( is_category( '1' )) {
               echo dynamic_sidebar( 'category_music' );
               }
               elseif ( is_category( '5' )) {
               echo dynamic_sidebar( 'category_tastemakers' );
               }
               elseif ( is_category( '11' )) {
               echo dynamic_sidebar( 'category_film' );
               }
               elseif ( is_category( '9' )) {
               echo dynamic_sidebar( 'category_model' );
               }
               elseif ( is_category( '6' )) {
               echo dynamic_sidebar( 'category_sports' );
               }
               elseif ( is_category( '8' )) {
               echo dynamic_sidebar( 'category_round' );
               }
               elseif ( is_category( '10' )) {
               echo dynamic_sidebar( 'category_cool' );
               } 
               else 
               {
               echo dynamic_sidebar( 'main_sidebar' );
               }   
               ?>
     </div><!-- #first_sidebar .widget-area -->

<?php endif; ?> 
```

当我使用原始代码时，数字“1”不会出现在侧边栏下，但是当我切换到我修改过的代码时，数字“1”开始出现在所有页面的侧边栏下。通过访问此链接可以看到此行为：http: [//ignoremusic.com/category/sports/](http://ignoremusic.com/category/sports/)

我还检查了 archive.php 文件以及 functions.php 文件，但似乎没有任何问题。这是我放在 functions.php 文件中用于注册侧边栏的部分代码：

```
/** SIDEBARS ******************************************************************/
if ( function_exists('register_sidebar') ) {

register_sidebar(array(
                  'name'=>'sidebar home left',
                  'id' => 'homeleft_sidebar',
                  'description' => __( 'sidebar on homepage, left', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'Category: Tastemakers',
                  'id' => 'category_tastemakers',
                  'description' => __( 'sidebar on tastemakers category', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'Category: Film',
                  'id' => 'category_film',
                  'description' => __( 'sidebar on film category', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'Category: Fashion',
                  'id' => 'category_fashion',
                  'description' => __( 'sidebar on fashion category', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'Category: Model Citizens',
                  'id' => 'category_model',
                  'description' => __( 'sidebar on model citizens category', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'Category: Sports',
                  'id' => 'category_sports',
                  'description' => __( 'sidebar on sports category', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'Category: Round Table',
                  'id' => 'category_round',
                  'description' => __( 'sidebar on round table category', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'Category: Cool Stuff',
                  'id' => 'category_cool',
                  'description' => __( 'sidebar on cool stuff category', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'Category: Music',
                  'id' => 'category_music',
                  'description' => __( 'sidebar on music category', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'sidebar home right',
                  'id' => 'homeright_sidebar',
                  'description' => __( 'sidebar on homepage, right', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'main sidebar',
                  'id' => 'main_sidebar',
                  'description' => __( 'main sidebar', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'tour dates sidebar',
                  'id' => 'tour_sidebar',
                  'description' => __( 'sidebar on tour dates page', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'contact sidebar',
                  'id' => 'contact_sidebar',
                  'description' => __( 'sidebar on contact page', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'sidebar footer 1',
                  'id' => 'sidebarf1',
                  'description' => __( 'first sidebar in footer', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'sidebar footer 2',
                  'id' => 'sidebarf2',
                  'description' => __( 'second sidebar in footer', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'sidebar footer 3',
                  'id' => 'sidebarf3',
                  'description' => __( 'third sidebar in footer', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));

register_sidebar(array(
                  'name'=>'sidebar footer 4',
                  'id' => 'sidebarf4',
                  'description' => __( 'fourth sidebar in footer', 'gxg_textdomain' ),
                  'before_widget' => '<div id="%1$s" class="widget %2$s">',
                  'after_widget' => '</div>',
                  'before_title' => '<h3 class="widgettitle">',
                  'after_title' => '</h3>', ));
} 
```

这是archives.php文件中的代码，它与侧边栏相呼应：

```
<div id="sidebar" class="grid_3">
                    <?php get_sidebar(); ?>
            </div><!-- #sidebar--> 
```

我尝试在互联网上搜索问题，但找不到任何东西，所以我期待收到你们的来信。谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-02T14:23:32.880

根据[https://codex.wordpress.org/Function_Reference/dynamic_sidebar](https://codex.wordpress.org/Function_Reference/dynamic_sidebar)它应该是

```
dynamic_sidebar( 'category_fashion' ); 
```

而不是 该函数可能返回true；echo 接受一个字符串；true->string=1，因此附加的.~~`echo dynamic_sidebar( 'category_fashion' );`~~
`1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T14:27:43.593

多余`echo`的，由混淆引起的，由打印而不是返回它们的愚蠢的 Wordpress 函数引起。

在你的情况下，以下是错误的：

```
<?php echo dynamic_sidebar( 'category_fashion' ); ?> 
```

与您之前的正确用法进行对比：

```
<?php dynamic_sidebar( 'main_sidebar' ); ?> 
```

# android - layout_width 和 layout_weight - 性能

> ID：15766488
> 
> 赞同：0
> 
> 时间：2013-04-02T14:18:21.273
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="60dip"
    android:orientation="horizontal"
    android:background="#80939393"
    android:gravity="center_vertical"
     >

    <CheckBox
        android:id="@+id/column1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0" />

    <View android:layout_height="fill_parent"
    android:layout_width="1dp"
    android:background="#90909090"/>

    <TextView
        android:id="@+id/column2"
        android:layout_width="30dip"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:gravity="center"
        android:text="@string/column_title_2" />

    <View android:layout_height="fill_parent"
    android:layout_width="1dp"
    android:background="#90909090"/>

    <LinearLayout
        android:layout_width="70dip"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:layout_weight="1"
        android:clickable="true"
        android:gravity="center_vertical"
        android:id="@+id/column3_container" >
        <TextView
            android:id="@+id/column3"
            android:layout_width="50dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="left"
            android:paddingLeft="8dp"
            android:text="@string/column_title_3" />
        <TextView
            android:id="@+id/sort_column_3"
            android:layout_width="20dip"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:gravity="center"
            android:textSize="24dp"
            android:paddingRight="8dp"
            android:text="@string/solid_up" />
    </LinearLayout>

    <View android:layout_height="fill_parent"
    android:layout_width="1dp"
    android:background="#90909090"/>

    <LinearLayout
        android:layout_width="70dip"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:layout_weight="1"
        android:clickable="true"
        android:gravity="center_vertical"
        android:id="@+id/column4_container" >
        <TextView
            android:id="@+id/column4"
            android:layout_width="50dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="left"
            android:paddingLeft="8dp"
            android:text="@string/column_title_4" />
        <TextView
            android:id="@+id/sort_column_4"
            android:layout_width="20dip"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:gravity="center"
            android:textSize="24dp"
            android:paddingRight="8dp"
            android:text="" />
    </LinearLayout>

    <View android:layout_height="fill_parent"
    android:layout_width="1dp"
    android:background="#90909090"/>

    <LinearLayout
        android:layout_width="70dip"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:layout_weight="1"
        android:clickable="true"
        android:gravity="center_vertical"
        android:id="@+id/column5_container" >
        <TextView
            android:id="@+id/column5"
            android:layout_width="50dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="left"
            android:paddingLeft="8dp"
            android:text="@string/column_title_5" />
        <TextView
            android:id="@+id/sort_column_5"
            android:layout_width="20dip"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:gravity="center"
            android:textSize="24dp"
            android:paddingRight="8dp"
            android:text="" />
    </LinearLayout>

    <View android:layout_height="fill_parent"
    android:layout_width="1dp"
    android:background="#90909090"/>

    <TextView
        android:id="@+id/column6"
        android:layout_width="50dip"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:gravity="center"
        android:text="@string/column_title_6" />

</LinearLayout>
    <View android:layout_height="1dp"
    android:layout_width="fill_parent"
    android:background="#90909090"/>
    <ListView
        android:id="@+id/mylist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:choiceMode="multipleChoice">
    </ListView>
    <View android:layout_height="1dp"
    android:layout_width="fill_parent"
    android:background="#90909090"/>

</LinearLayout> 
```

我在日食中收到两个关于性能的警告。

`Nested weights are bad for performance`使用时`android:layout_weight="1"` **和** `Use a layout_width of 0dip instead of 50dip for better performance`

谁能告诉我为什么它会抛出这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:23:13.523

我理解它的方式是这样的：因为你正在使用`layout_weight`that is superseding `layout_width`。所以本质上`layout_width`被忽略了。但从技术上讲，它并没有被完全忽略，而是系统正在应用`layout_width="50dp"`，然后返回并进行数学运算以应用`layout_weight="1"`，因此它做了两倍的工作。它告诉您使用 0dp 以避免做（不必要的）工作。

**编辑**

你的第二个问题`Nested weights are bad for performance`是因为你有一个重量，`LinearLayout`并且重量在`TextView`里面*，*因此`LinearLayout`它们是“嵌套的”。该警告告诉您以这种方式设置布局可能不利于性能。理想的解决方法可能是想出一些方法来完成你想要使用的外观，`RelativeLayout`而不是使用重量。但实际上，除非你特别注意到或听到关于表现不佳的报告，否则你可能会离开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:22:04.920

当您使用该`weight`属性时，它会根据 的值计算该视图的宽度`weight`。如果不将视图的宽度设置为0dp，它会重新计算宽度，这是不必要的。所以如果你使用 `weight`, 然后 width 到 0dp 它只需要计算一次大小。

* * *

对于嵌套重量警告

```
android:layout_width="70dip"
android:layout_height="match_parent"
android:orientation="horizontal"
android:layout_weight="1" 
```

在此线性布局中删除 weight 属性

# c - 如果相同的计数变量“i”在每个嵌套的 for 循环中被视为不同，那么为什么在外部持续的内部循环中对其进行更改？

> ID：15766492
> 
> 赞同：0
> 
> 时间：2013-04-02T14:18:24.553
> 
> 标签：c

提出问题[“为什么在嵌套 FOR 循环中使用相同的计数变量名称有效？”](https://stackoverflow.com/questions/2393458/why-does-using-the-same-count-variable-name-in-nested-for-loops-work)已经在这个论坛上发布过，在每个嵌套循环中定义的计数变量“i”应该被视为一个新变量，其范围仅限于该循环。我们应该期望该变量的值被“i”的值擦除和覆盖“在外循环中（在控制传递给内循环之前）。但是在我的以下代码中，当控制从内循环出来时，而不是变量“i”的值为0（这是它在外循环的第一次迭代，在控制传递给内循环之前），它继续具有值 10（它在内循环的最后一次迭代中得到）。然后这个 10 增加到 11，因此外循环的条件不满意，外循环退出。

我曾期望我的程序在 10 行不同的行中水平打印数字 0 到 9 10 次。但它只打印一行并退出。

还有另一件事——如果我在外循环条件（i<=10）中使用任何大于 10 的数字，那么它会创建一个无限循环。根据我的推理，它发生是因为我在之后得到了 11 的值外循环的第一次迭代，因此如果条件 <=11 或更多，则外循环进入另一次迭代。于是 i 在内循环中再次初始化为 0，循环继续。

对不起，如果我不能很清楚地提出我的问题。我想问的是，如果我们假设这个论坛上的链接问题是正确的，那么我的内部不应该是一个不同的变量吗？为什么那么值退出内循环后 i 继续保持，而不是恢复到进入内循环时的 i 值？

```
#include <stdio.h>

int main()
{
    int i;

    //for (i = 0; i <= 11; i++)  Creates infinite loop if this condition is used instead
    for (i = 0; i <= 9; i++)    
    {
        for (i = 0; i <= 9; i++)
        {
            printf("%d ", i);
        }
        printf("\n");
    }
} 
```

`OUTPUT : 0 1 2 3 4 5 6 7 8 9`

PS：作为第二个问题，如果我们在每个循环中使用相同的计数变量，是否不可能在 10 行不同的行中水平打印数字 0 到 9，就像我在这里所做的那样？（如果与主要问题无关，请忽略此次要问题）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T14:21:19.260

您链接到的答案是使用*具有相同名称的不同变量*，您只是使用相同的变量。

比较：

```
for(int i = 0; ... 
```

到：

```
for(i = 0; ... 
```

前者声明了一个名为 的新变量`i`，这是您嵌套循环的方式，如链接到的答案。并不是说我会（永远！）建议这样做。

正如您所注意到的，对前一种语法的支持直到 C99 才被添加到 C 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:21:13.530

如果在每个循环中都定义了我，那么行为将与您的链接问题一样。在您的示例中，您只定义`i`一次，在任何循环之外，然后重用它

```
int i;

for(i=0; i<=9; i++)    
{

   for(i=0; i<=9; i++)
{ 
```

不一样

```
for(int i=0; i<=9; i++)    
{

   for(int i=0; i<=9; i++)
{ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T14:22:31.207

如果您希望每个`for`循环都有自己的`i`，则需要为每个循环单独创建`i`。照原样，您在两个循环之外都定义了*一个* `i`，因此一个循环所做的修改会影响另一个循环看到的值。

```
int i;
for (i=0; i<10; i++) {
    int i;           /* define another i for the inner loop */
    for (i=0; i<10; i++)
        printf("%d\t", i);
    printf("\n");
} 
```

请注意，我通常建议不要这样做——虽然编译器在不同范围内拥有两个具有相同名称的变量完全没有问题，但像这样的代码在不立即明确`i`引用什么时可能会混淆阅读编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:21:30.160

> 我想问的是，我的内在不应该是一个不同的变量吗？

不，只有一个声明，所以只有一个变量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-10T13:28:42.363

对不起 - 迟到的回应，但不禁注意到：

它“起作用”的原因是内部循环将 i 重置为零，打印并增加 i，然后返回到外部循环 - 此时 i>9，因此外部循环退出。

外循环只有一次迭代，打印的值完全由内循环确定。这不是范围的问题，而是您在内部循环中将新值重新分配给 i 的事实。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-22T22:19:28.513

> PS：作为第二个问题，如果我们在每个循环中使用相同的计数变量，是否不可能在 10 个不同的行中水平打印数字 0 到 9，如果我们在每个循环中使用相同的计数变量，就像我在这里所做的那样？（如果与主要问题无关，请忽略此次要问题）

当然可以，但是您的 printf 需要更复杂的格式字符串。

```
printf("%d ",i); 
```

上述语句的工作原理是打印 I，紧跟一个空格，然后将托架留在打印停止的位置。

我认为您想到的效果类似于以下内容。

```
0
  1
    2
      3
        4
          5
            6
              7
                8
                  9 
```

要做到这一点，您需要对 printf 语句进行一些更改，如下面的完整程序所示。

```
// MarchingDigits.cpp : Defines the entry point for the console application.
//

#include <stdlib.h>
#include <stdio.h>

int main(int argc, char* argv[])
{
    for ( int i = 0 ; i < 10 ; i++ )
    {
        printf ( "%*d\n", ( i > 0 ? i + 1 : i ) , i ) ;
    }   // for ( int i = 0 ; i < 10 ; i++ )

return 0;
}       // int main 
```

该程序生成的输出如下。

```
0
 1
  2
   3
    4
     5
      6
       7
        8
         9 
```

您的 printf 语句与生成此输出的语句之间存在三个根本区别。

*   在开始 % 和结束 d 之间，我在宽度所在的位置插入了一个星号。
*   我用换行符替换了尾随空格。
*   在格式字符串和整数参数 i 之间，我插入了另一个参数，以三元表达式的形式 i > 0 ? i + 1 : i，实际上，如果 i 大于零，则将宽度设置为 i + 1，否则将宽度设置为 i。尽管 else 块将宽度设置为 i，恰好为零，但这是有效的，因为 printf 保证永远不会截断输出。

# javascript - Chrome 扩展：onclick() 事件未触发 alert() 弹出窗口

> ID：15766495
> 
> 赞同：3
> 
> 时间：2013-04-02T14:18:33.287
> 
> 标签：javascript, google-chrome-extension, event-handling, dom-events, google-chrome-app

我无法触发`alert()`带有`onclick()`事件的弹出窗口。

## 代码

## 文件*清单.json*

```
{
    "name": "Project",
    "version": "1.0.0",
    "manifest_version": 2,
    "description": "Popup when website requires Log in",
    "browser_action":{
        "default_icon":"icon_19.png",
        "default_popup":"Popup.html"
        }
} 
```

## 文件*Popup.html*

```
<html>
<head></head>

<body>
    <div class="plus" onclick="popup()"></div>
    <script src="inline.js"></script>
</body>
</html> 
```

## 文件*inline.js*

```
function popup() {
    var link = document.URL;
    alert("This is the link: (" + link + ")");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:41:52.713

不要在 Google Chrome 扩展程序中使用内联 JavaScript 代码。

HTML：

```
<div class="plus"></div>
<script src="inline.js"></script> 
```

JavaScript：

```
function popup(e) {
  var link = document.URL;
  alert("This is the link: (" + link + ")");
}

var plusBtn = document.querySelector('.plus');
plusBtn.addEventListener('click', popup); 
```

# django - django 中的设备身份验证

> ID：15766500
> 
> 赞同：4
> 
> 时间：2013-04-02T14:18:38.010
> 
> 标签：django, authentication, device

我在 django 中有一个设备模型，我希望能够对其进行身份验证。

```
class Device(models.Model):
    device_key = models.CharField(max_length=100)
    udid = models.CharField(max_length=100, unique=True) 
```

更具体地说，鉴于上述设备模型，我希望能够实现类似于 TokenAuthentication ( [http://django-rest-framework.org/api-guide/authentication.html#tokenauthentication](http://django-rest-framework.org/api-guide/authentication.html#tokenauthentication) ) 的东西。

使用 device_key 和 udid 向登录 URL 发送请求应返回一个令牌，该令牌标识设备型号，并可用于进一步的请求。

笔记：

1.  设备不是用户。我已经将 User 模型用于不同的目的。
2.  这个问题基本上类似于询问如何在 django 中对自定义用户模型进行身份验证，这也没有一个像样的答案（[Django custom User model authentication](https://stackoverflow.com/questions/10312772/django-custom-user-model-authentication)）

有没有“django”的方式来做到这一点？

# sql - 关于PostgreSQL性能的两个问题

> ID：15766507
> 
> 赞同：1
> 
> 时间：2013-04-02T14:18:44.193
> 
> 标签：sql, performance, postgresql, pagination

**1) 在 PostgreSQL 中实现分页的最佳方式是什么？**

假设我们需要实现分页。最简单的查询是`select * from MY_TABLE order by date_field DESC limit 10 offset 20`. **据我了解**，我们这里有两个问题：如果日期可能有重复的值，则此查询的每次运行可能会返回不同的结果，并且偏移值越大，查询运行的时间就越长。我们必须提供附加列，即 date_field_index：

```
--date_field--date_field_index--
  12-01-2012     1
  12-01-2012     2
  14-01-2012     1
  16-01-2012     1
-------------------------------- 
```

现在我们可以写类似

```
create index MY_INDEX on MY_TABLE (date_field, date_field_index);
select * from MY_TABLE where date_field=<last_page_date and not (date_field_index>=last_page_date_index and date_field=last+page_date) order by date_field DESC, date_field_index DESC limit 20; 
```

..因此使用 where 子句和相应的索引而不是偏移量。好的，现在问题：

1）这是改善初始查询的最佳方法吗？2）我们如何填充 date_field_index 字段？我们必须为此提供一些触发器吗？3) 我们不应该在 Postgres 中使用 RowNumber() 函数，因为它们不使用索引，因此非常慢。这是对的吗？

**2) 为什么连接索引中的列顺序不会影响查询的性能？**

我的测量结果表明，在使用连接索引（由 2 列或更多列组成的索引）进行搜索时，如果我们将最具选择性的列放在首位 - 或者将其放在末尾，则没有区别。为什么？如果我们将最有选择性的列放在首位 - 我们会通过较短范围的找到的行，这应该会对性能产生影响。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:11:04.277

使用主键解开而不是`date_field_index`列。否则解释为什么这不是一个选项。

```
order by date_field DESC, "primary_key_column(s)" DESC 
```

首先具有最独特列的组合索引性能最佳，但在以下情况下将不会使用它：

*   不同的值超过表的百分之几
*   没有足够的行使其值得
*   日期范围不够小

的输出是`explain my_query`什么？

# css - 让 DIV 标签扩展到页面或内容的底部

> ID：15766514
> 
> 赞同：0
> 
> 时间：2013-04-02T14:18:51.903
> 
> 标签：css, html, layout

我在我们的网站上设置了左侧导航栏。它的显示方式是在导航顶部有一个标题图像（通常是客户的名字），然后有一个表格，其中包含许多关于做什么的选项。这些选项因客户端而异。显示此导航时，有两个图像沿主表的侧面向下延伸，用作边框。这些是一张一张像素的可换肤图像。这样，每个客户端的皮肤可以是不同的颜色，同时在 CSS 文件中引用相同的图像名称。

在我们向这些页面添加文档类型之前，图像会延伸到页面底部或表格内内容的底部，以较长者为准。现在，添加文档类型以使页面标准，我不能让它做同样的事情。

我的设置是我有一个 DIV 作为标题，它只保存标题图像。然后，我有一个 DIV 作为容器，其中包含三个 DIV 元素作为子元素。第一个和最后一个保存一个像素图像作为左右边框，中间的 div 保存内容表。

我无法将边框图像 DIV 设置为 100% 高度，因为页面大小将是 100% + 标题图像的大小。而且我不能只依赖于内容底部的图像，因为如果内容不占据整个页面，它需要是页面的整个长度。我不知道在这里做什么，当我调整页面大小时，没有使用 javascript 来计算 DIV 的大小。

顺便说一句，我正在尝试为所有浏览器拍摄，所以 IE（至少 9 个）和 Chrome 都是 m 测试用例。在此处链接代码以显示我的问题。如您所见，左侧、内容和右侧 div 超出了页面底部，这是我不希望发生的。

```
//HTML

<html>
    <body>
        <div class="NavHeader">&nbsp;</div>
        <div id="NavBody">
            <div id="NavLeft"> &nbsp;</div>
            <div id="NavContent">&nbsp;<br>&nbsp;</div>
            <div id="NavRight">&nbsp;</div>
        </div>
    </body>
</html>

// CSS

html, body {
    height: 100%;
}
.NavHeader {
    height: 40px;
    width: 100%;
    background-color: blue;
}
#NavBody {
    height: 100%;
}
#NavLeft {
    height: 100%;
    float: left;
    background-color: black;
    width: 1px;
}
#NavContent {
    height: 100%;
    float: left;
    background-color: green;
}
#NavRight {
    height: 100%;
    float: right;
    background-color: black;
    width: 1px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:22:59.820

我过去遇到过类似的情况，我所能想到的就是使用 javascript ......

CSS（据我所知）并不真正具有您正在寻找的动态功能。

# entity-framework-4 - 将自定义连接字符串注入实体框架的 DbContext

> ID：15766515
> 
> 赞同：13
> 
> 时间：2013-04-02T14:18:53.777
> 
> 标签：entity-framework-4, connection-string

我想将自定义连接字符串注入到我的 EF 上下文中，而不是在我的 web.config 中使用连接字符串。这个想法是将所有与数据库相关的逻辑从我的 MVC 项目中移到一个单独的层中。我还希望这一层负责正确的连接字符串，而不是我的 Web 应用程序。

当前使用上下文的服务正在调用默认构造函数：

```
using (var context = new MyDbContext()) {
    //...
} 
```

默认构造函数在内部`DbContext`使用来自以下的连接字符串的名称进行调用`web.config`：

```
public partial class MyDbContext : DbContext
{
    public MyDbContext()
        : base("name=MyDbContext")
    {
    }

    //...
} 
```

为了注入我的自定义连接字符串，我需要一个将连接字符串作为参数的重载构造函数。不幸的是，没有提供这样的构造函数。

很明显，在`MyDbContext`类中手动添加构造函数重载将是一个*非常糟糕的*主意，因为这个类是自动生成的，并且很快就会被覆盖。我们不要再谈论这个了，这是被禁止的。时期。

由于`MyDbContext`是部分类，因此可以在单独的类文件中添加额外的构造函数`partial class MyDbContext`，但这似乎也很臭。我不知道为什么，但我的大脑说*坏主意*。

经过一番调查，我发现，可以通过编辑 T4 模板来告诉 EF 包含这个额外的构造函数，该模板`Model.Context.tt`是 C# 和一些模板标记的混合体。这是原始构造函数：

```
public <#=Code.Escape(container)#>()
    : base("name=<#=container.Name#>")
{
<#
    WriteLazyLoadingEnabled(container);
#>
} 
```

显然很容易添加类似的逻辑来生成包含连接字符串的重载构造函数：

```
public <#=Code.Escape(container)#>(string nameOrConnectionString)
    : base(nameOrConnectionString)
{
<#
    WriteLazyLoadingEnabled(container);
#>
} 
```

我试过这个并注意到，重新生成模型类和从 DB 更新模型都*不会*影响 T4 模板，因此额外的构造函数*将始终*存在。好的！乍一看，这似乎是一个合适的解决方案，但是......

这是我的问题：**这真的是一个好的解决方案吗？**

让我们再次比较三个选项：

1.  编辑自动生成的类（好的，我们同意忘记这个）
2.  在部分类文件中添加构造函数
3.  编辑 T4 模板以告诉 EF 生成额外的构造函数

从这三个选项中，第三个在我看来是最方便和最干净的解决方案。你有什么意见？有人有充分的理由，为什么这是一个坏主意？是否有更多选项可以注入连接字符串，也许使用自定义`connectionFactory`？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T07:45:17.380

就像[@shaft](https://stackoverflow.com/users/1040680/shaft) [提议](https://stackoverflow.com/a/19250436/489772)的那样，我将我的 T4 模板方法替换为使用部分类。事实证明，这确实比我目前知道的任何其他解决方案都简单和直观。

自动生成的类如下所示：

```
public partial class MyDbContext : DbContext
{
    public MyDbContext() : base("name=MyDbContext")
    {
    }

    //...
} 
```

我刚刚添加了另一个同名的部分类。问题解决了。

```
public partial class MyDbContext 
{
    public MyDbContext(string nameOrConnectionString)
             : base(nameOrConnectionString) 
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-08T14:26:03.003

从您提供的 3 个选项中，我宁愿选择选项 2。没有引入 partial 关键字来解决自动生成文件的问题吗？在我看来，使用 T4 模板会带来额外的复杂性，维护开发人员必须了解一件事（不是每个人都熟悉 T4），但扩展部分类是更标准的 c# 开发。

但是我不知道“是否有一个非常好的解决方案”的答案。引入工厂再次带来了新的代码来维护、测试和理解，我不确定这种抽象在这里是否有帮助，因为工厂本身需要实例化dbcontext 与适当的构造函数（无论如何您都必须提供）。

编辑：

再想一想：工厂可能有助于从另一个位置解析连接字符串（您说您不希望 web.config 中的连接字符串），但这仍然不能解决构造函数问题

# wordnet - 使用 JAW 时出错

> ID：15766519
> 
> 赞同：0
> 
> 时间：2013-04-02T14:19:14.413
> 
> 标签：wordnet, jvm-arguments

嗨，我是 JAW 初学者。我按照网站给出的使用 JAW 的步骤进行操作。但出现以下错误。如果有人告诉我 VM 参数的目录路径是什么，那将是一个很大的帮助。有关更多规范，我的 WordNet 字典位于 C:\Program Files\WordNet\2.1\Dict （字典位置）

```
java.lang.NoClassDefFoundError: Files\WordNet\2/1\dict\
Caused by: java.lang.ClassNotFoundException: Files\WordNet\2.1\dict\
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
 Could not find the main class: Files\WordNet\2.1\dict\.  Program will exit.
Exception in thread "main" Java Result: 1 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T12:50:46.150

问题是文件夹名称中的点 2.1

将您的文件夹重命名为 2/1 或 2.1 以外的其他名称，比较两个顶行中的路径。GL！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T05:56:24.623

是的，我已经解决了同样的问题。我已重命名目录。通常目录不应包含任何特殊字符，如“（”或“。”等。

# python - 使用 pywin32 与 Excel 交互

> ID：15766521
> 
> 赞同：0
> 
> 时间：2013-04-02T14:19:15.250
> 
> 标签：python, excel, replace, pywin32

我有一个简单的任务 - 遍历 excel 文件列表并将某些单词的所有出现替换为其他单词。

无法找出如何使用 pywin32 库制作它。即我找不到任何明确的文档或示例如何与 excel 交互。

我想迭代excel doc中的所有工作表并将'111'替换为'222'。

我正在使用以下代码：

```
def searchexcel():
    excel = win32.gencache.EnsureDispatch('Excel.Application')
    excel.Visible = False
    for infile in glob.glob( os.path.join('', '*.xls') ):
        print infile
        e = excel.Workbooks.Open(os.getcwd()+'\\'+infile)
        sh = e.Sheets()
        for sheet in e:
            sheet.Replace('111', '222', win32.constants.xlWhole)
        e.Save()
    excel.Application.Quit() 
```

但它不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:41:39.793

正如评论中发布的那样，我应该使用 sheet.Cells.Replace

# activemq - 如何启用或验证 ActiveMQ 的 REST 接口？

> ID：15766524
> 
> 赞同：0
> 
> 时间：2013-04-02T14:19:18.620
> 
> 标签：activemq

为了开发目的，我在 Windows 2003 虚拟服务器上设置了 ActiveMQ 5.8.0。我知道应该有一个用于读取和写入队列等的 REST 接口。但是，我似乎无法确定如何准确地做到这一点。端口 8161 可用于访问管理控制台，但我从 Firefox Poster 尝试的每个 URL 都返回 404。我尝试了以下 URL：

```
http://localhost:8161/queues <-- 404
http://localhost:61616/queues <-- some default message
http://localhost:61616/queue/inbox <-- same default message
http://localhost:8161/queue/inbox <-- 404 
```

文档提到将 URI 映射到 servlet，但我不确定如何或是否需要这样做。/demo 功能默认是禁用的，这对我来说很好。如何为我的队列启用 REST？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T16:56:17.947

由于 /demo 被禁用，它被移动到 /api `http://localhost:8161/api/message/`

这是所有 REST 操作的路径

# javascript - 检测使用 jQuery 更改的禁用属性

> ID：15766525
> 
> 赞同：4
> 
> 时间：2013-04-02T14:19:21.923
> 
> 标签：javascript, jquery, events, controls, state

我有一个 html 控件，需要检测它何时禁用状态更改。

我试过：

```
cb.on("change", function() {
    if(cb.is(":disabled")) {
        // the control is disabled
    } else {
        // it's enabled
    }
}); 
```

这似乎不起作用......还有另一个技巧可以检测到这种变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:22:10.890

禁用的控件不能通过用户交互来改变状态——只能通过代码。

我认为“禁用”更改属性时也不会触发更改事件。您真正能做的就是轮询“禁用”属性。

可以肯定的一件事：如果更改事件触发，则控件不会被禁用。

# mysql - 实体框架：设置 MySQL 自定义环境变量

> ID：15766530
> 
> 赞同：0
> 
> 时间：2013-04-02T14:19:44.337
> 
> 标签：mysql, entity-framework, environment-variables, entity-framework-5, silverlight-5.0

我对 Entity Framework 5.0 有疑问。我也在使用 Silverlight 5 和 MySQL 5.6。

**我需要在每次连接到 MySQL 服务器之前设置一个环境 MySQL 变量。**

例如

> SET @my_var = '测试';

在 Mysql 下我没有任何问题。

以下引发**EntityFrameworkException**（'@' 附近的语法错误）。

```
this.ObjectContext.CreateQuery<object>(" SET @my_var = 'test' "); 
```

或者

```
this.ObjectContext.CreateQuery<object>(" CALL set_my_var('test') "); 
```

最后一个方法引发了一个 MySQLException，表示 DataReader 已经打开并且需要关闭。

```
this.ObjectContext.ExecuteStoreQuery<object>(" CALL set_my_var('test') ", null); 
```

我还尝试设置一个 MySQL 系统环境（没有'@'），每次都具有相同的结果。

任何帮助都感激不尽 ！谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T09:52:41.630

我尝试了很多东西，以至于我在代码中拼错了我的变量。所以以下最终工作：`ctx.ExecuteStoreCommand("SET @my_var = 'test'");`

我决定将指令留在`Initialize`我的域服务方法中。该方法是`LinqToEntitiesDomainService`类继承的。

**但是您需要`Allow User Variables=True`在 MySQL 连接字符串中**进行设置 （参考：[是否可以在 .NET MySqlCommand 中使用 MySql 用户定义变量？](https://stackoverflow.com/questions/958953/is-it-possible-to-use-a-mysql-user-defined-variable-in-a-net-mysqlcommand)）

您只需使用最新版本的 MySQL 连接器，因为旧版本使用“@”标记来定义 SQL 参数，因此它可能与自定义变量发生冲突。现在它使用“？” 标记：[http ://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html)

我的图书馆已经是最新的（6.6.5）。

感谢您的帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:50:06.700

由于您的语句不是查询（即不返回任何结果），您应该使用`ExecuteStoreCommand`. 像这样的东西应该工作：

```
ctx.ExecuteStoreCommand("SET @my_var = 'test'") 
```

# machine-learning - 房屋区域的 ML / 密度聚类。每个维度上的两种成分或多种混合物

> ID：15766531
> 
> 赞同：0
> 
> 时间：2013-04-02T14:19:46.863
> 
> 标签：machine-learning, cluster-analysis, dbscan, mixture-model

我试图自学 ML 并遇到了这个问题。非常感谢该领域更有经验的人的帮助！

假设我有三个向量，其中包含浴室、客厅和厨房等房屋隔间的区域。数据包括大约 70,000 所房屋。每个单独向量的直方图显然具有双峰分布的证据，例如双分量高斯混合。我现在想要某种 ML 算法，最好是无监督的，它可以根据这些属性对房屋进行分类。说：大浴室，小厨房，大客厅。

更具体地说，我想要一种算法来为每个双峰分布向量选择最佳可能的分离阈值，比如大/小厨房（这可以是二元的，因为我们假设有双峰的证据），对其他人做同样的事情并对数据进行聚类. 理想情况下，这将带有一些信心措施，以便我可以检查处于中间状态的房屋……例如，一栋带有明显大厨房的房屋，但其浴室将接近大/小浴室的阈值区域/边界例如，放在“大厨房和大浴室”列表的底部。由于这个原因，首先决定一个阈值（用不太可能的 FDR 拟合高斯），折叠数据然后聚类是不可取的。

关于如何进行的任何建议？我知道 R 和 python。

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:06:53.420

您正在寻找的是一种[聚类](http://en.wikipedia.org/wiki/Cluster_analysis)方法：这基本上是无监督分类。一个简单的方法是[k-means](http://en.wikipedia.org/wiki/K-means_clustering)，它有很多实现（k-means 可以看作是多元高斯混合的极限，因为方差趋于零）。这自然会给您一个置信度度量，该度量与所讨论的点和质心之间的距离度量（欧几里得距离）有关。

最后一点：我不知道依次聚类每个属性，然后从独立的属性中合成：为什么不让算法在多维空间中找到聚类呢？根据算法的选择，这将考虑特征的协方差（大厨房增加大卧室的概率）并产生您可能不会单独考虑的自然分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:36:56.867

听起来您想要使用混合高斯模型进行 EM 聚类。

应该`mclust`在 R 的包中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T08:24:57.913

除了其他人的建议之外，确实可以在各个维度上进行聚类（甚至可能是基于密度的聚类方法，例如 DBSCAN），形成一维聚类（区间）并从那里开始工作，可能将它们组合成多个维的矩形簇。

我正在做一个涉及这个的项目。事实证明，在一维中运行基于密度的方法有一些优点，包括您可以按照您所说的根据对象的其他属性对一个属性边界上的对象进行分类。

# iphone - TapkuLibrary.h 和 未找到 - 词法和预处理器问题

> ID：15766536
> 
> 赞同：2
> 
> 时间：2013-04-02T14:19:54.663
> 
> 标签：iphone, ios, objective-c, ios5, tapku

很长一段时间以来，我都遇到了很大的麻烦。几天前重建我的项目后，我收到一条错误消息，提示找不到“TapkuLibrary.h”。我删除了附加到项目的文件，并按照[https://github.com/devinross/tapkulibrary的指示进行操作](https://github.com/devinross/tapkulibrary)

但是，当我尝试重建我的项目时，仍然找不到该文件！

我正在为 iOS 6.1 使用 XCode 4.6.1 构建

我可以看到附加到 Tapku 的 xcode 项目的文件可以找到，因为我可以在侧栏中找到它们。但由于某种原因，没有找到 TapkuLibrary.h。

此外，当我控制一个类时，它会将我链接到除 TapkuLibrary.h 之外的所有文件的正确符号，该符号再次找不到。

我对此感到非常压力，所以任何线索将不胜感激。非常感谢您！

更新：我已经尝试删除所有文件并读取它们无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:04:55.970

请查看此问题中的解决方案：[TapkuLibrary.h not found on archive](https://stackoverflow.com/questions/11280784/tapkulibrary-h-not-found-on-archive?rq=1)

我认为这与您遇到的问题完全相同。

# scala - Scala 对 Java 的类文字（例如 Foo.class）的模拟是什么？

> ID：15766537
> 
> 赞同：3
> 
> 时间：2013-04-02T14:19:56.043
> 
> 标签：scala

在 Java 中我会写`logger.getLogger(NameOfClass.class)`. 如何在 Scala 中编写相同的代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T14:21:47.043

你可以试试：

```
logger.getLogger(getClass()) 
```

或者：

```
logger.getLogger(classOf[NameOfClass]) 
```

附带说明一下，[ScalaLogging](https://github.com/typesafehub/scalalogging)提供了一种很好且简单的方法来使用具有类名的记录器，但没有像普通 java 那样的所有样板。你可以在你的类设置中正确地获得一个记录器，你所要做的就是扩展一个 trait `Logging`：

```
class MyClass extends Logging {
  logger.debug("This is very convenient ;-)")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:35:53.587

不要忘记在单例伴侣对象上定义记录器：

```
object MyClass {
    // Commons logging
    private val clLogger = LogFactory.getLog(getClass())

    // java.util.logging
    private val juLogger = Logger.getLogger(getClass().toString)

}

class MyClass {
    import MyClass._

    ...
} 
```

应该这样做的原因是，如果您将字段放在`class`它是一个实例字段，该字段将返回到`new`该类对象的每个实例上的记录器工厂。对于某些类来说，这可能是不必要/不可接受的性能。

在这种情况下，Scala 对类（静态）字段和实例字段的分离使得这比用 Java 做的要困难得多。Scala 不具备所有优势的情况之一：

```
class MyClass {
    // Commons logging
    private static final Log clLogger = LogFactory.getLog(MyClass.class)

    // java.util.logging
    private static final Logger juLogger = Logger.getLogger(MyClass.class.toString)

    ...
} 
```

# c# - 如何修改已禁用复选框的视觉状态以使其看起来已启用？

> ID：15766540
> 
> 赞同：0
> 
> 时间：2013-04-02T14:20:00.777
> 
> 标签：c#, wpf-controls

我正在设计一个比较对话框（在网格中显示几个小部件及其特征）。有一个功能部分，其中列出了所有可用功能，每个功能都有一个复选框。如果零件具有该功能，则选中该复选框。这些复选框需要是只读的，所以我设置了 isEnabled=false。然而，在视觉上，复选框（和标签内容）显示为灰色。

以下是一些要点：

*   复选框是零件是否具有特征的视觉指示器。不需要交互。
*   要求是一个复选框；我必须说服当权者使用不同的东西。

我想要的是一种简单的方法来设置复选框（及其内容）的样式/控制模板，使其看起来已启用，但不会对用户输入做出反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:49:19.060

上面建议的解决方案适用于 Windows 窗体，但我明白你对 WPF 的意思，并且复选标记出现了一秒钟。

试试这个：

```
namespace System.Windows.Controls
{
    public class UnchangingCheckbox : CheckBox
    {
        public UnchangingCheckbox()
        {
            this.IsReadOnly = true;
        }

        public bool IsReadOnly 
        {
            get { return !this.IsHitTestVisible && !this.Focusable; }
            set 
            { 
                this.IsHitTestVisible = !value; 
                this.Focusable = !value;             
            }
        }
    }
} 
```

您获得了一个名为“IsReadOnly”的属性，该属性默认设置为 true，并且具有您需要的行为，而没有烦人的“复选标记出现一秒钟”行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:33:56.637

通过从 CheckBox 继承来创建自定义控件，并在其构造函数中为其创建 Click 处理程序。在该 Click 处理程序中，放置以下代码：

```
((CheckBox)sender).Checked = !((CheckBox)sender).Checked; 
```

这是一个完整的例子。

对于 Windows 窗体：

```
namespace System.Windows.Forms
{
    public class UnChangingCheckBox : System.Windows.Forms.CheckBox
    {
        public UnChangingCheckBox()
        {
            this.Click += new EventHandler(UnChangingCheckBox_Click);
        }

        void UnChangingCheckBox_Click(object sender, EventArgs e)
        {
            ((CheckBox)sender).Checked = !((CheckBox)sender).Checked;
        }
    }
} 
```

对于 WPF：

```
namespace System.Windows.Controls
{
    public class UnchangingCheckBox : System.Windows.Controls.CheckBox
    {
        public UnchangingCheckBox()
        {
            this.Click += new System.Windows.RoutedEventHandler(UnchangingCheckBox_Click);
        }

        void UnchangingCheckBox_Click(object sender, System.Windows.RoutedEventArgs e)
        {
            if (((CheckBox)sender).IsChecked.HasValue)
                ((CheckBox)sender).IsChecked = !((CheckBox)sender).IsChecked; 
        }
    }
} 
```

如果将上述代码放在 Windows 窗体或 WPF 项目中的新类中，它们将在工具箱中显示为新工具。然后，您需要做的就是将新的“UnchangedCheckBox”控件拖到您使用 CheckBox 的表单上。您无需在表单上进行任何编码。

使用这种方法，您的代码仍然可以对 CheckBox 执行所有操作（设置其值等）。只有在不影响视觉风格的情况下禁用了用户交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:34:42.740

Microsoft 在 MSDN 上提供了一些默认样式，您可以在此处找到复选框的默认样式：http: [//msdn.microsoft.com/en-us/library/ms752319](http://msdn.microsoft.com/en-us/library/ms752319(v=vs.85).aspx) (v=vs.85).aspx 。将此样式复制到您的项目中，删除 IsEnabled 的触发器并将复选框的样式设置为此新样式。

附带说明一下，我建议将样式复制到单独的 ResourceDictionary 中以进行重用，并防止样式弄乱您的 xaml 文件。

# ruby - 尝试在 ubuntu 12.04 上的 rails 项目中使用 image_science 时出错

> ID：15766541
> 
> 赞同：0
> 
> 时间：2013-04-02T14:20:07.273
> 
> 标签：ruby, ruby-on-rails-3, image-science

我有一个在 ruby​​ 1.9.3p327 上运行 rvm 的 rails 3.0.20 应用程序。我的 Gemfile 内容如下：

```
gem 'image_science', :git => 'git://github.com/asynchrony/image_science.git' 
```

Gemfile.lock 的版本为：

```
remote: git://github.com/asynchrony/image_science.git
revision: dc36ddaadc46aecdef907de3c41a9d14d28ba8d8
specs:
  image_science (1.3.2.1.Asynchrony) 
```

如果不删除 image_science，我似乎无法启动我的应用程序，因为我不断收到此错误：

```
/home/umar/gems/ruby/1.9.1/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:242:in `block in require': iconv will be deprecated in the future, use String#encode instead.
rake aborted!
/home/umar/gems/ruby/1.9.1/bundler/gems/image_science-dc36ddaadc46/lib/image_science/extension.so: undefined symbol: _ZTVN10__cxxabiv120__si_class_type_infoE - /home/umar/gems/ruby/1.9.1/bundler/gems/image_science-dc36ddaadc46/lib/image_science/extension.so
/home/umar/gems/ruby/1.9.1/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:242:in `require'
/home/umar/gems/ruby/1.9.1/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:242:in `block in require'
/home/umar/gems/ruby/1.9.1/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:225:in `block in load_dependency'
/home/umar/gems/ruby/1.9.1/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:597:in `new_constants_in'
/home/umar/gems/ruby/1.9.1/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:225:in `load_dependency'
/home/umar/gems/ruby/1.9.1/gems/activesupport-3.0.20/lib/active_support/dependencies.rb:242:in `require'
/home/umar/gems/ruby/1.9.1/bundler/gems/image_science-dc36ddaadc46/lib/image_science.rb:3:in `<top (required)>'
/home/umar/.rvm/gems/ruby-1.9.3-p327@a_proj/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
/home/umar/.rvm/gems/ruby-1.9.3-p327@a_proj/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
/home/umar/.rvm/gems/ruby-1.9.3-p327@a_proj/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `each'
/home/umar/.rvm/gems/ruby-1.9.3-p327@a_proj/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `block in require'
/home/umar/.rvm/gems/ruby-1.9.3-p327@a_proj/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `each'
/home/umar/.rvm/gems/ruby-1.9.3-p327@a_proj/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
/home/umar/.rvm/gems/ruby-1.9.3-p327@a_proj/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
/home/umar/myprojects/a_proj/config/application.rb:9:in `<top (required)>'
/home/umar/myprojects/a_proj/Rakefile:4:in `require'
/home/umar/myprojects/a_proj/Rakefile:4:in `<top (required)>'
/home/umar/gems/ruby/1.9.1/gems/rake-0.9.2/lib/rake/rake_module.rb:25:in `load'
/home/umar/gems/ruby/1.9.1/gems/rake-0.9.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/home/umar/gems/ruby/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:495:in `raw_load_rakefile'
/home/umar/gems/ruby/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:78:in `block in load_rakefile'
/home/umar/gems/ruby/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
/home/umar/gems/ruby/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:77:in `load_rakefile'
/home/umar/gems/ruby/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:61:in `block in run'
/home/umar/gems/ruby/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
/home/umar/gems/ruby/1.9.1/gems/rake-0.9.2/lib/rake/application.rb:59:in `run'
/home/umar/gems/ruby/1.9.1/gems/rake-0.9.2/bin/rake:32:in `<top (required)>'
/home/umar/gems/ruby/1.9.1/bin/rake:19:in `load'
/home/umar/gems/ruby/1.9.1/bin/rake:19:in `<main>' 
```

我该如何解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:56:58.210

您可能需要安装所需的库（FreeImage 和 RubyInline）才能使 ImageScience 正常工作。（[图像科学 RDoc](http://docs.seattlerb.org/image_science/)）

顺便说一句，我假设您不使用 mini_magick 或 rmagick，因为您无权访问 imagemagick 或 graphicsmagick 安装。

也许您应该尝试使用这两个之一，因为 ImageScience 已经有一段时间没有更新了。

希望这可以帮助。

# iphone - 在 segue 中加载带有保存图像的图像视图

> ID：15766542
> 
> 赞同：1
> 
> 时间：2013-04-02T14:20:07.983
> 
> 标签：iphone, ios, cocoa-touch

我正在使用以下代码将图像分配给 ImageView

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender

{
   if ([segue.identifier isEqualToString:@"imgHand"])
   {
      RingController *ctrl =  segue.destinationViewController ;
      ctrl.imgHand.image = [[UIImage alloc] initWithContentsOfFile:self.selectedPath];
   }
} 
```

但是 imgHand 显示为黑色，并且没有为其分配任何图像。

此路径中的图像确实存在，并且已将其分配给 CollectionView 中的图像

```
Printing description of self->selectedPath:
/var/mobile/Applications/79092B1E-BE77-4583-A39A-C2D4767ADA12/Documents/myHandImage1.png 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:27:19.173

您的问题是您的“ `imgHand`”图像视图属性没有在父视图控制器的“ `prepareForSegue`”方法中实例化或完全合成。那时它是一个 NULL 对象。

从您的“”中公开一个独立的“ `UIImage`”属性，`RingController`您可以通过父级的“ `prepareForSegue`”方法调用设置图像，然后在`RingController`“ `viewDidLoad:`”中您可以将图像视图设置为图像。

# ruby - PayPal::SDK::Permissions::API 应用程序未授权给用户

> ID：15766543
> 
> 赞同：0
> 
> 时间：2013-04-02T14:20:08.343
> 
> 标签：ruby, paypal

我的应用程序正在`TRANSACTION_DETAILS`使用 paypal-sdk-permissions (1.96.2) gem 请求权限。沙盒中一切正常，但上线时失败：

```
@errorId=550006, 
@domain="PLATFORM", 
@subdomain="Application", 
@severity="Error", 
@category="Application", 
@message="The application is not authorized for the user" 
```

**编辑**

看来我使用的是从其他 Paypal 帐户提交的 APP ID。修复后我得到：

```
@errorId=550001 @message="User is not allowed to perform this action" 
```

我已经提交了一个具有相应权限的新应用，状态为`Approved Conditionally`. 通常需要多长时间才能收到 Paypal 的回复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:18:17.310

仅仅几个小时后，我的应用就获得了批准。现在一切都按预期工作。

# routing - 服务栈查询字符串

> ID：15766546
> 
> 赞同：4
> 
> 时间：2013-04-02T14:20:09.573
> 
> 标签：routing, servicestack

我正在尝试将一组查询字符串中的值链接到服务堆栈对象中的属性。

以下代码片段说明了我想要实现的目标。（我想将 FN 映射到 SenderNumber，将 TN 映射到 ContactNumber 等）

```
[Route("/smscallback?FN={SenderNumber}&TN={ContactNumber}&MS={Response}&TS={TS}")]
public class SmsCallback : IReturn<SmsCallbackResponse>
{
    public string SenderNumber
    {
        get;
        set;
    }
    public string ContactNumber
    {
        get;
        set;
    }
    public string Response
    {
        get;
        set;
    }
    public string TS
    {
        get;
        set;
    }
} 
```

有谁知道如何做到这一点？我查看了 servicestack 提供的[路由](https://github.com/ServiceStack/ServiceStack/wiki/Routing)示例，但我无法将其应用于我的情况。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T15:16:48.127

请重新阅读[路由维基页面](https://github.com/ServiceStack/ServiceStack/wiki/Routing)：

> 注意：QueryString、FormData 和 HTTP 请求正文不是 Route 的一部分（即只有 /path/info 是），但除了每个 Web 服务调用之外，它们都可以用于进一步填充 Request DTO。

您不能在路由中放置**任何 queryString 。**如果要更改映射到的字段，则需要使用 DataContract/DataMember 属性装饰 DTO，例如：

```
[DataContract]
public class SmsCallback : IReturn<SmsCallbackResponse>
{
    [DataMember(Name="fn")]
    public string SenderNumber { get; set; }

    [DataMember(Name="tn")]
    public string ContactNumber { get; set; }

    [DataMember(Name="ms")]
    public string Response { get; set; }

    [DataMember]
    public string TS { get; set; }
} 
```

# jquery - 动态更改导航栏

> ID：15766557
> 
> 赞同：2
> 
> 时间：2013-04-02T14:20:30.870
> 
> 标签：jquery, jquery-mobile, markup, jquery-mobile-navbar

当用户更改设置时，我想更改主页上的导航栏。我有：

```
<section id="main" data-role="page">
<nav data-role="navbar">
   <ul></ul>
</nav>
</section> 
```

我用 JavaScript 填充无序列表，但它失去了它的 css 样式。

问：当用户从“设置”页面返回并再次看到主页时，我使用什么事件来确保导航栏的样式正确？

Q：用户按下“返回主页面”按钮后，应该触发什么事件来刷新主页面？

编辑：

实际上，该列表也填充在 pageinit 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:25:44.780

## Q1。

如果您在 pagebeforecreate、pagecreate 或 pageinit 期间填充导航栏，则不需要对其进行样式设置。如果您在以后的活动中这样做，那么请这样做：

```
$('#pageID').trigger('pagecreate'); 
```

这将触发整页重新设置样式，包括页脚和页眉。如果您只需要重新设置页面内容的样式，请使用以下命令：

```
$('#pageID').trigger('create'); 
```

在我的另一篇文章中了解更多信息：**[https ://stackoverflow.com/a/14550417/1848600](https://stackoverflow.com/a/14550417/1848600)**

## Q2。

在这种情况下，您可以防止主页兑现，就是这样。

官方文档：http: **[//jquerymobile.com/demos/1.2.0/docs/pages/page-cache.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-cache.html)**

要防止页面兑现，请使用属性**data-dom-cache="false"**：

```
<div data-role="page" id="dontCacheMe" data-dom-cache="false"> 
```

但不幸的是，如果主页是要显示的第一页，或者至少是第一个 HTML 的一部分，则无法防止兑现。

在这种情况下，清除每个具有生成内容的元素并再次触发 pagecreate。

**编辑 ：**

我忘了提。导航栏元素的动态添加是错误的，它没有按预期工作。前段时间我创建了一个如何动态添加导航栏元素的示例，您可以在这里找到它：http: **[//jsfiddle.net/Gajotres/V6nHp/](http://jsfiddle.net/Gajotres/V6nHp/)**

这个和更多可以在我的其他**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**中找到，或者可以在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到。

# c - “空格键”后终止扫描字符的问题

> ID：15766558
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:20:30.820
> 
> 标签：c, string, console

**当我输入一个单词时，我按空格键然后我不知道为什么，但我需要再输入一个单词或一个字母来停止扫描。**

```
 #include <stdio.h >
        char string1[20];
    char a='a', b='b', g='g', d='d', e='e', v='v', o='o';

    int i;
    int sum;

    printf (" my word is:\n");
    scanf( "%19s ", string1);
 sum=0;
       for (i = 0; string1[i] !='\0'; i++)
    {
    if (string1[i]==a ) {sum=  +1;} else
    if (string1[i]==b ) {sum=  +2;} else
    if (string1[i]==g ) {sum=  +3;} else
    if (string1[i]==d ) {sum=  +4;} else
    if (string1[i]==e ) {sum=  +5;} else
    if (string1[i]==v ) {sum=  +6;} else
    if (string1[i]==o ) {sum=  +50;} else
    {sum=0;} }
    printf ("%d\n" , sum);
    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:23:07.120

```
scanf( "%s\n ", string1); 
```

您要求`scanf`继续扫描，直到您在单词后键入除空格以外的其他内容。要阅读一个单词，请单独使用`%s`。

# extjs - 如何在jsp中包含ext-js日历？

> ID：15766559
> 
> 赞同：1
> 
> 时间：2013-04-02T14:20:31.983
> 
> 标签：extjs, extjs4, extjs4.1

我是 EXT JS 环境的新手。我正在eclipse indigo中开发一个动态java项目，我想在我的一个jsp中使用ext-js日历。我从下载的'ext-4.1.1'sdk（ext-中的index.html文件）中看到了EXT_JS日历演示4.1.1a\示例\日历）。

我想创建一个 .js 文件，就像 ext-js 日历页面一样。因此，为此我按照 [http://loianegroner.com/2010/11/spket-setting-up-eclipse-ide-for-ext-js-and-jquery-development/](http://loianegroner.com/2010/11/spket-setting-up-eclipse-ide-for-ext-js-and-jquery-development/)中给出的路径 在 eclipse 中集成 ext-js .

但是现在当我将 index.html 复制到我的 webcontent 文件夹时，它无法正常工作（最初它什么也没显示）。但是，当我将整个 ext-js 源代码复制到我的工作区 Web 内容中，然后运行 ​​ext-4.1.1a 的 example/calendar 文件夹中的 index.html 文件时，会得到所需的结果。但我不认为这是一个解决方案。

我也找不到任何方法来开始我的任务。所以请有人在这里帮助我...

问候：开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T01:55:34.653

当屏幕上没有显示任何内容时，通常是没有加载 ExtJS 库的情况。没有看到代码，很难查明问题。

使用 Chrome 开发工具或 Firefox 的 Firebug，查看控制台和/或网络输出。

您要查找的文件将包含在`<head>`您的`index.html`. 应该有`ext-all.js`或可能`ext-all-debug.js`至少有样式表。

如果这是您的问题，那么您需要包含 ExtJS 库的正确路径。这可以是本地安装，也可以使用 CDN。例如：

`<script src="http://cdn.sencha.com/ext-4.1.1-gpl/ext-all.js"></script>`

# random - 随机表 Corona SDK / Lua

> ID：15766561
> 
> 赞同：2
> 
> 时间：2013-04-02T14:20:36.293
> 
> 标签：random, lua, coronasdk, lua-table

谁能帮助我用 N 个值随机填充一个表，其中值是 1，...，M 不允许重复？

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T15:16:37.307

```
local M, N, tNonFinal, tFinal = 500, 20, {}, {}

math.randomseed( os.time() )

for i = 1, N, 1 do
    local iRandom = math.random(1, M)
    while tNonFinal[iRandom] do
        iRandom = math.random(1, M)
    end
    table.insert( tNonFinal, iRandom, true )
    tFinal[i] = iRandom
end 
```

您需要的表格将是`tFinal`. 您还可以添加一个条件`if M < N then N = M end`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T15:07:21.623

这可能会帮助你...

```
local myArray = {}
local valueArray = {1,2,3,4,5,6,7,8,9,10}  -- let it be the array with values 1,2...M

local index = 0
local isFetched = {} 
for i=1,#valueArray do
   isFetched[i] = 0
end

local randomValue = 0
local function addTomyArray()
  randomValue = math.random(#valueArray)
  if(isFetched[randomValue]==0)then
     index = index + 1
     isFetched[randomValue] = 1
     myArray[index] = valueArray[randomValue]
     if(index==#valueArray)then
        for i=1,#myArray do
          print(myArray[i])    -- result : shuffled array 
        end
     end
  else
    addTomyArray()
  end
end
timer.performWithDelay(0,addTomyArray,#valueArray)  -- #valueArray 
```

继续编码…………

# php - Facebook 需要 CURL 扩展

> ID：15766563
> 
> 赞同：1
> 
> 时间：2013-04-02T14:20:44.827
> 
> 标签：php, facebook, curl, 64-bit, wamp

我正在尝试在我的 apache 服务器上运行我的 facebook php 应用程序，在一台**装有 Windows 64bit**的新机器上。如标题所述，给出的错误是**Facebook 需要 CURL PHP 扩展**。我在 php.ini 中取消了 extension=php_curl.dll 行的注释，并且在 SublimeText 中没有问题，但是当我尝试访问我的 localhost 时，会抛出错误。我一直在寻找`base_facebook.php`错误的地方：

```
if (!function_exists('curl_init')) {
  throw new Exception('Facebook needs the CURL PHP extension.');
} 
```

我一直在网上寻找并尝试了很多网站，包括在 stackoverflow 上存在相同问题的主题：[Facebook 需要 CURL PHP 扩展](https://stackoverflow.com/q/8465586/1786117)。
有一条关于**WAMP 64bit**问题的评论，我尝试了带有修复程序的链接，但没有任何用处 - 似乎它已经改变了。
有没有人有同样的问题？知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:22:53.320

下载并替换 php_curl.dll 为[http://www.mediafire.com/?3ay381k3cq59cm2](http://www.mediafire.com/?3ay381k3cq59cm2)今天有同样的问题大声笑 ps：给我一个-1的人我直接从[http://www.anindya获取了下载链接.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/) 请阅读我提到的内容：***今天*****有这个问题！***它奏效了。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T23:02:39.790

本[教程](http://pinoyscreencast.net/fixing-wampserver-curl-extension-on-a-64bit-windows-7/)对我有用。也非常直截了当。*

# java - Android Dropbox API 身份验证 URL 问题

> ID：15766567
> 
> 赞同：1
> 
> 时间：2013-04-02T14:20:48.170
> 
> 标签：java, android, dropbox

因此，我正在测试 Dropbox api 并根据教程设置到目前为止的所有内容，直到它要求授权。它把我带到要求我授权的页面，我点击允许，然后点击允许后的下一页 URL 看起来以 db-“我的应用程序密钥”等开头，但页面显示未知 URL 方案并且不会继续。看起来我可能遗漏了一些东西，但不确定到底是什么。

# javascript - 在 raphael.js 上为画布设置动画

> ID：15766569
> 
> 赞同：0
> 
> 时间：2013-04-02T14:20:53.417
> 
> 标签：javascript, raphael

我目前在项目中使用 scaleRaphael 来显示 SVG 地图，并且正在实现缩放功能。

缩放正在使用：

```
paper._canvas.changeSize(2 * paper._canvas.w, 2 * paper._canvas.h, true); 
```

调整大小工作正常，但我无法让它动画。

在我看到的所有关于动画的地方，Raphael 都在谈论动画元素，但我正在寻找动画整个画布大小的动画。

# java - 登录spring核心应用程序？

> ID：15766571
> 
> 赞同：1
> 
> 时间：2013-04-02T14:21:02.703
> 
> 标签：java, spring, logging, log4j

如何`log4j.xml`在 spring 核心应用程序中使用日志记录？在 Spring MVC 中，我可以在以下位置进行配置`web.xml`：

```
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/classes/log4j.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener> 
```

我怎样才能用弹簧核心应用程序做到这一点？有人可以给我一个启动想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:32:19.970

您可以将相同的 log4j.xml 或 log4j.properties 文件放在`src`文件夹中，以便在编译和打包代码后将其放在根目录下。

之后你可以像这样使用它：

```
 public class MainApp {

           static Log log = LogFactory.getLog(MainApp.class.getName());

    public static void main(String[] args) { 
          log.info("Hello World!");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T06:37:48.927

或者您想在其他地方放置一些，然后您可以提供路径

```
<context-param>
    <param-name>log4jConfiguration</param-name>
    <param-value>file:///C:/conf/log4j.xm.xml</param-value>
</context-param> 
```

这取决于您的项目适用性。

# wix - 如何组合 Wix 变量

> ID：15766572
> 
> 赞同：1
> 
> 时间：2013-04-02T14:21:04.617
> 
> 标签：wix, wix3, wix3.7

例如，我可以`"!(bind.property.ProductVersion)"`用来设置 UpgradeVersion\@Minimum 属性。工作正常。但现在我想将该属性设置为：

```
"!(bind.property.ProductVersion.Major).!(bind.property.ProductVersion.Minor).0.0" 
```

但这不起作用。我收到此错误：UpgradeVersion/@Maximum 属性的值 '!(bind.property.ProductVersion.Major).!(bind.property.ProductVersion.Minor).0.0' 不是有效版本。合法版本值应类似于“xxxx”，其中 x 是 0 到 65534 之间的整数。

有什么想法可以让它发挥作用吗？

问候，雅普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:57:20.077

不幸的是，似乎版本属性只允许有一个活页夹变量来替换整个字符串。它不支持您描述的场景。但是，似乎应该如此。[您可以在http://wixtoolset.org/bugs](http://wixtoolset.org/bugs)提交错误

# css - 使用多个 CSS 背景图像/渐变时，正确的速记语法是什么？

> ID：15766578
> 
> 赞同：4
> 
> 时间：2013-04-02T14:21:25.240
> 
> 标签：css, background, background-image

我需要通过 CSS 将多个背景附加到一个元素，但我不能使用`:before/:after`.

我想知道使用多个 CSS 背景图像的正确语法是什么。

我找到了很多建议的方法，比如[这里](http://snook.ca/archives/html_and_css/multiple-bg-css-gradients)或[这里](http://css-tricks.com/stacking-order-of-multiple-backgrounds/)，但我不能得到这些：

```
background: url(…) 0 0 repeat, url(…) 5px 5px no-repeat #FFF;
background: url(…) 600px 10px no-repeat, url(…) 10px 10px no-repeat; 
```

去工作。

这是我目前拥有的：

```
background-image: rgba(0, 0, 0, 0.4) url("img/icons-18-white.png") no-repeat 0% 50%,linear-gradient( #9ad945, #7eb238 ); 
```

这被忽略了。只有当我提供纯 url 时，它才有效：

```
background-image: url("img/icons-18-white.png") , linear-gradient( #9ad945, #7eb238 ); 
```

**问题：**
我正在专门寻找一种设置`background-size/position/repeat`每个图像的方法，所以如果有人能指出我正确的语法，那就太好了！

**编辑**：添加`scroll`和`background-image`替换`background`

```
background: rgba(0, 0, 0, 0.4) url("http://code.jquery.com/mobile/1.3.0/images/icons-18-white.png") no-repeat scroll 0% 50%, linear-gradient( #9ad945, #7eb238 ); 
```

不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T14:24:42.530

你所拥有的东西有两个主要问题阻止它工作：

*   速记属性是`background`，不是`background-image`。

*   背景颜色，在您的情况下是`rgba(0, 0, 0, 0.4)`，必须最后指定。

如果速记语法最终过于混乱，您总是可以单独设置各个属性，将相同数量的逗号分隔值传递给它们，这些值对应于背景层的数量（CSS 渐变被认为是图像）。但是，如果您设置`background-color`，则只能指定一次。

请记住，当指定多个背景时，它们的绘制顺序是从上到下，从上到下。这就是为什么颜色应该在速记声明中排在最后的原因。[规范的本节](http://www.w3.org/TR/css3-background/#layering)对其进行了描述，而[本节](http://www.w3.org/TR/css3-background/#the-background)包含完整的语法：

> 价值：`[ <bg-layer> , ]* <final-bg-layer>`
> 
> 在哪里
> 
> ```
> <bg-layer> = <bg-image> || <position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box>{1,2} 
> 
> <final-bg-layer> = <bg-image> || <position> [ / <bg-size> ]? || <repeat-style> || <attachment> || <box>{1,2} || <'background-color'> 
> ```

有关各个属性中分层的详细信息，请参见它们各自的部分。

如果您尝试将背景图形叠加在`rgba()`颜色上，则可能无法在该图层下方添加渐变，而无需将渐变应用于`:before`框。或者，如果您将 40% 的黑色混合到渐变色块中，您可以`rgba()`完全移除颜色，只留下图形和渐变色。

# sql-server-2008 - MS SQL - 不同模式的不同执行计划？

> ID：15766583
> 
> 赞同：1
> 
> 时间：2013-04-02T14:21:32.113
> 
> 标签：sql-server-2008

微软 SQL 服务器 2008

*   我们有一个具有相同参数的存储过程。
*   我们有两个具有不同架构的帐户。

我们对这两个账户有不同的执行计划。

通常执行计划应该是相同的，但在我们的例子中它不是。

什么会导致这种行为？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:58:07.067

我终于找到了问题所在：

我已经从不同的用户帐户运行了一些代码，这些用户帐户有不同的`SET LANGUAGE`选项。

关于它的好文章：[http ://allcomputers.us/windows_server/microsoft-sql-server-2008-r2---query-plan-caching-(part-1)---query-plan-reuse---query -计划老化.aspx](http://allcomputers.us/windows_server/microsoft-sql-server-2008-r2---query-plan-caching-(part-1)---query-plan-reuse---query-plan-aging.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T14:06:15.837

评论删除了格式，所以我`SET`在这里发布代码来检查选项：

```
SELECT  
    SESSIONPROPERTY('ANSI_PADDING') AS [ANSI_PADDING]
    ,SESSIONPROPERTY('FORCEPLAN') AS [FORCEPLAN]
    ,SESSIONPROPERTY('CONCAT_NULL_YIELDS_NULL') AS [CONCAT_NULL_YIELDS_NULL]
    ,SESSIONPROPERTY('ANSI_WARNINGS') AS [ANSI_WARNINGS]
    ,SESSIONPROPERTY('ANSI_NULLS') AS [ANSI_NULLS]
    ,SESSIONPROPERTY('QUOTED_IDENTIFIER') AS [QUOTED_IDENTIFIER]
    ,SESSIONPROPERTY('ANSI_NULL_DFLT_ON') AS [ANSI_NULL_DFLT_ON]
    ,SESSIONPROPERTY('ANSI_NULL_DFLT_OFF') AS [ANSI_NULL_DFLT_OFF]
    ,SESSIONPROPERTY('DATEFORMAT') AS [DATEFORMAT]
    ,SESSIONPROPERTY('LANGUAGE') AS [LANGUAGE] 
```

# ruby-on-rails - Faye 服务器错误 - 未定义的方法 - 传入

> ID：15766586
> 
> 赞同：2
> 
> 时间：2013-04-02T14:21:45.420
> 
> 标签：ruby-on-rails, thin, faye

在 faye.ru 我有这个带有 faye_token 的代码：

```
require 'faye'
require File.expand_path('../config/initializers/faye_token.rb', __FILE__)

Faye::WebSocket.load_adapter('thin')

class ServerAuth
  def incoming(message, callback)
    if message['channel'] !~ %r{^/meta/}
      if message['ext']['auth_token'] != FAYE_TOKEN
        message['error'] = 'Invalid authentication token.'
      end
    end
    callback.call(message)
  end
end

faye_server = Faye::RackAdapter.new(:mount => '/faye', :timeout => 45)
faye_server.add_extension(ServerAuth.new)
run faye_server 
```

如果我在终端中运行此代码：

```
rackup faye_alt.ru -E production -s thin 
```

如果我刷新本地主机网站 - 我会变成这个错误：

```
[ERROR] [Faye::RackAdapter] undefined method `[]' for nil:NilClass 
```

有任何想法吗？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-06T09:22:56.137

消息['ext'] 为零。您可以通过以下方式检查您的 message['ext'] 是否为 nil

```
def incoming(message, callback)
  if message['channel'] !~ %r{^/meta/}
    if message['ext'].nil? || message['ext']['auth_token'] != FAYE_TOKEN
      message['error'] = 'Invalid authentication token'
    end
  end
callback.call(message)
end 
```

上面的答案是错误的，您需要清除消息['ext']['auth_token'] 是清除身份验证令牌，以免泄露给客户端。

```
def outgoing(message, callback)
  if message['ext'] && message['ext']['auth_token']
    message['ext'] = {} 
  end
callback.call(message)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:03:33.790

这里的 message['ext'] 为 nil，可能是因为当您订阅或 ping 到 faye 服务器时，您没有从浏览器端传递 ext auth 令牌。

你可能想调查

[http://faye.jcoglan.com/browser/extensions.html](http://faye.jcoglan.com/browser/extensions.html)

你必须做类似的东西..

```
outgoing: function(message, callback) {
  message.ext = message.ext || {};
  message.ext.token = your_token;
  callback(message);
} 
```

# python - Python - 绘制大量线

> ID：15766590
> 
> 赞同：10
> 
> 时间：2013-04-02T14:21:52.443
> 
> 标签：python, performance, matplotlib

我正在尝试读取包含线段的 XY 端点和与线段关联的值的文件，然后绘制由给定值着色的线段。我遇到的问题是可能有数十万到数百万个线段，当我尝试读取这些较大的文件时，我遇到了内存错误。有没有更高效的内存方式来做到这一点？

```
import matplotlib.pyplot as plt
import matplotlib.colors as colors
import matplotlib.cm as cmx
import sys
import csv

if len(sys.argv) > 1:
    flofile = sys.argv[1]
else:
    flofile = "GU3\GU3.flo"

fig = plt.figure()
ax = fig.add_subplot(111)
jet = cm = plt.get_cmap('jet')
cNorm = colors.Normalize(vmin=0)
scalarMap = cmx.ScalarMappable(norm=cNorm,cmap=jet)
with open(flofile) as FLO:
    title = FLO.readline()
    limits = [float(tp) for tp in FLO.readline().split()]
    FLO.readline()#headers
    for line in FLO:
        if 'WELLS' in line: break        
        frac = ([float(tp) for tp in line.split()])
        ax.plot([frac[0],frac[2]],[frac[1],frac[3]],color=colorVal)

#ax.plot(*call_list)
scalarMap._A = []
plt.colorbar(scalarMap)
plt.xlim([0,limits[0]])
plt.ylim([0,limits[1]])

plt.show() 
```

此代码适用于小文件。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T20:04:59.267

我会调查`LineCollection` [(doc)](http://matplotlib.org/api/collections_api.html#matplotlib.collections.LineCollection)。

```
import matplotlib
import matplotlib.pyplot as plt    
import random

s = (600,400)
N = 100000

segs = []
colors = []
my_cmap = plt.get_cmap('jet')
for i in range(N):
    x1 = random.random() * s[0]
    y1 = random.random() * s[1]
    x2 = random.random() * s[0]
    y2 = random.random() * s[1]
    c  = random.random()
    colors.append(my_cmap(c))
    segs.append(((x1, y1), (x2, y2)))

ln_coll = matplotlib.collections.LineCollection(segs, colors=colors)

ax = plt.gca()
ax.add_collection(ln_coll)
ax.set_xlim(0, 600)    
ax.set_ylim(0, 400)
plt.draw() 
```

它还将为第一次争论获取一个 numpy 数组列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T18:45:23.057

您可能会考虑先在没有内存问题的位图图像上进行绘图，然后使用 matplotlib 微调绘图/图像。举个例子：

```
from PIL import Image
from PIL import ImageDraw
import random
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.image as mpimg

s = (500,500)
N = 100000

im = Image.new('RGBA', s, (255,255,255,255))
draw = ImageDraw.Draw(im)

for i in range(N):
    x1 = random.random() * s[0]
    y1 = random.random() * s[1]
    x2 = random.random() * s[0]
    y2 = random.random() * s[1]
    c  = random.random() * 256
    draw.line(((x1,y1),(x2,y2)), fill=(0, 255 - int(c), int(c), 255), width=1)

plt.imshow(np.asarray(im), extent=(-1,1,-1,1), aspect='equal', origin='lower')
plt.show() 
```

# objective-c - 使用 Core Data 导航一对多关系

> ID：15766592
> 
> 赞同：0
> 
> 时间：2013-04-02T14:21:58.127
> 
> 标签：objective-c, core-data

**如何在 Objective-C 中导航 Core Data 对多关系？**

我有一个`Event`模型，每个实例都有许多`EventOccurace`通过`occurances`[原文如此] 关系公开的对象。Apple 的文档说[标准属性访问器应该可用](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingMOs.html#//apple_ref/doc/uid/TP40001803-SW3)，但我不断收到编译时错误：

![在此处输入图像描述](https://i.stack.imgur.com/DNQ4g.png)

DetailViewController.h

```
@interface DetailViewController : UIViewController <UISplitViewControllerDelegate>
@property (strong, nonatomic) id detailItem;
@end 
```

细节视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSSet * foo;

    foo = [[self detailItem] occurances];
    ///No known instance method for selector 'occurances'

    foo = self.detailItem.occurances;
    ///Property 'occurances' not found on object of type 'id'

    //try casting to NSManagedObject to access
    NSManagedObject * casted = (NSManagedObject *)self.detailItem;

    foo = casted.occurances;
    ///Property 'occurances' not found on object of type 'NSManagedObject *'

    foo = [casted occurances];
    ///No visible @interface for 'NSManagedObject' declares the selector 'occurances'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:35:12.740

`NSManagedObject`要使用（动态创建的）访问器方法，您必须为您的实体创建子类。

这在 Xcode 中很容易完成：在模型编辑器中选择实体，然后从菜单中选择“Editor -> Create NSManagedObject subclass ...”。在源代码中包含头文件（Event.h、EventOccurance.h）。然后

```
Event *event = self.detailItem;
NSSet *foo = event.occurances; 
```

应该管用。

或者，您可以使用键值编码：

```
NSSet *foo = [[self detailItem] valueForKey:@"occurances"]; 
```

即使没有托管对象子类，它也可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:35:42.253

一些可能无法正常工作的事情：

首先检查您的 ManagedObject 类是否已生成。

其次，您应该在某处指定 detailItem 的类型。或者在 .h 中，或者通过将其转换为 .m 中的类型。现在它只是一个“id”，编译器无法知道它的类型。

第三，这是访问它的一种可能方式：

```
NSArray * occurances = [self.detailItem.occurances allObjects];
for(EventOccurance * ocu in occurances){
    //blablabla
} 
```

# asp.net-mvc - 具有格式化（计算？）列的淘汰赛自动映射数组

> ID：15766594
> 
> 赞同：0
> 
> 时间：2013-04-02T14:21:59.077
> 
> 标签：asp.net-mvc, knockout.js, crud, knockout-mapping-plugin

我有一个使用 Knockout 的 CRUD 单页，一切正常，我从 JSON 调用中获取数据，它用对象列表填充了一个自动映射的可观察数组。我可以在该数组中添加或编辑单个项目。

问题在于格式化我在表格中显示的带有对象列表的货币（数字）列。我尝试过在很多方面使用 js 函数，但是当我更新项目时，表格的格式化货币金额不会更新。如果我使用绑定来格式化字段，那么我无法编辑它，因为它会转换为字符串。

我需要的是我的货币列的单向绑定（自动更新）格式列。但我无法立即创建计算列，因为我使用的是自动映射的对象数组。[我尝试使用http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)中的示例添加计算，但我不知道如何将它与映射数组一起使用。

我的视图模型是这样的：

```
//--Accounts - Viewmodel Knockout
function accountViewModel() {
    var self = this;
    self.accounts = ko.observableArray();  //this is the list of objects
    self.account = ko.observable();  //single item for creating or editing

    //--get list------
    self.getAccounts = function () {
        $.postJSON(appURL + 'Accounts/GetList', function (data) {  
            ko.mapping.fromJS(data.Records, {}, self.accounts);

        });

    };

    self.getAccounts();
} 
```

每个帐户项目都有如下字段：-Id -Name -Balance <--这是我要格式化的列

在页面中使用它：

```
<table data-bind="visible: accounts().length > 0">
<thead>
    <tr>
        <th scope="col">Id</th>
        <th scope="col">Name</th>
        <th scope="col">Balance</th>
    </tr>
</thead>
<tbody id="accounts" data-bind="foreach: accounts">
<tr>
    <td><span data-bind="text: Id"></span></td>
    <td><a href="" data-bind="text: Name,  click: $root.getdetails" style="display:block;"></a></td>
    <td style="text-align:right;">
        <span data-bind="text: formatCurrency(Balance), css: { negative: Balance() < 0, positive: Balance() > 0 }"></span>

    </td>
</tr>
</tbody>
</table> 
```

formatCurrency 只是一个用于格式化数字的 js 函数：

```
formatCurrency = function (value) {
    debugger;
    if (value!=undefined)
        return "$" + withCommas(value().toFixed(2));
    //had to use value() instead of value, because of toFixed
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:58:34.487

当您将文本设置为函数 ( ) 的返回值时`text: formatCurrency(Balance)`，它只运行一次。它不是可观察的，因此它的值永远不会再更新。你需要的是一个真正的蓝色计算 observable。为此，您必须自定义映射。因此，只需为您的个人帐户对象创建一个视图模型，然后将您返回的数据映射到该模型上。

```
var SingleAccountViewModel = function (account) {
    var model = ko.mapping.fromJS(account);

    model.FormattedBalance = ko.computed(function () {
        return formattedCurrency(model.Balance);
    });

    return model;
} 
```

然后，当您从 AJAX 响应中取回数据时：

```
$.postJSON(appURL + 'Accounts/GetList', function (data) {  
    self.accounts($.map(data.Records, SingleAccountViewModel));
}); 
```

jQuery.map 方法将遍历数组并返回一个由所传递函数的返回值组成的新数组。在这种情况下，这就是您的视图模型，它现在将有一个`FormattedBalance`您可以绑定到的计算模型。

# c# - MVVM - 打开第二个视图 Windows 8

> ID：15766595
> 
> 赞同：0
> 
> 时间：2013-04-02T14:22:00.227
> 
> 标签：c#, windows, mvvm, view, viewmodel

编辑：示例应用程序-> [http://www10.zippyshare.com/v/29730402/file.html](http://www10.zippyshare.com/v/29730402/file.html)

我正在为 Windows 8 和 Windows Phone 编写应用程序。我正在使用可移植类库（请参阅这篇文章[http://blog.tattoocoder.com/2013/01/portable-mvvm-light-move-your-view.html](http://blog.tattoocoder.com/2013/01/portable-mvvm-light-move-your-view.html)）。

我的问题是：如何通过使用 MVVM 模式单击按钮来打开第二个窗口？我不想在后面的代码中这样做。

我的 Windows 8 应用程序的数据上下文在 xaml 中看起来像这样

```
DataContext="{Binding Main, Source={StaticResource Locator}}" 
```

它使用 PCL 的 ViewModel（= W8 和 WP8 的 ViewModel）

```
xmlns:vm="using:Mvvm.PCL.ViewModel" 
```

我不知道如何将 2 datacontext 分配给我的 MainPage.xaml，也不知道如何将 MainPage.xaml 分配给我的 Windows 8 应用程序的 ViewModel。

我试过这样的事情：

```
Command="{Binding DisplayView}" CommandParameter="SecondView" 
```

但是该程序在两个平台上都使用了 ViewModel，我不能在那里为特定平台编写 windows-assignment。（它应该看起来像这样[通过使用 MVVM silverlight 方法单击按钮打开多个视图](https://stackoverflow.com/questions/3100471/opening-multiple-views-by-clicking-button-using-mvvm-silverlight-approach)...）

说清楚：

我有2个项目。项目的两个 MainWindow 都引用了“MainProject”的 ViewModel。如果我想在我的 MainWindow 中单击一个按钮，我想打开一个新视图，但我只能将 ViewModel 用于两个项目，这意味着我不能在我的 ViewModel 中使用这两个项目的任何视图“主项目”。

编辑：我看到很多人使用 ContentControl。（仍然不起作用。顺便说一句，我是 MVVM 的新手）。

```
<ContentControl Grid.Row="2" Content="{Binding CurrentView}" IsTabStop="False" Margin="10" />
<Button Command="{Binding DisplayView}" CommandParameter="SecondView"> 
```

MainViewModel.cs（适用于两个平台）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Runtime.CompilerServices;
using System.Windows.Input;
using GalaSoft.MvvmLight;
using GalaSoft.MvvmLight.Command;
using Mvvm.PCL.Model;
#if NETFX_CORE 
    using Mvvm.Store.Views;
    using Windows.UI.Xaml;
    using Windows.UI.Xaml.Controls;
#endif

namespace Mvvm.PCL.ViewModel
{

public class MainViewModel : ViewModelBase, INotifyPropertyChanged
{
    /// <summary>
    /// Initializes a new instance of the MainViewModel class.
    /// </summary>

    public MainViewModel()
    {
#if NETFX_CORE
        DisplayView = new RelayCommand<string>(DisplayViewCommandExecute);
#endif
        }

    #region Commands

    public RelayCommand<string> DisplayView { get; private set; }

    #endregion

#if NETFX_CORE

    #region CurrentView Property

    public const string CurrentViewPropertyName = "CurrentView";

    private Page _currentView;

    public Page CurrentView
    {
        get { return _currentView; }
        set
        {
            if (_currentView == value)
                return;

            _currentView = value;
            RaisePropertyChanged(CurrentViewPropertyName);
        }
    }

    private SecondView _secondview = new SecondView();
    public SecondView SecondView
    {
        get
        {
            return _secondview;
        }
    }

    #endregion

    private void DisplayViewCommandExecute(string viewName)
    {
        switch (viewName)
        {
            case "SecondView":
                CurrentView = _secondview;
                var frame = (Frame)Window.Current.Content;
                frame.Navigate(typeof(SecondView));
                break;
        }
    }
#endif
}
} 
```

# makefile - Makefile 等待按下回车键

> ID：15766597
> 
> 赞同：0
> 
> 时间：2013-04-02T14:22:02.870
> 
> 标签：makefile

我有这个makefile目标：

```
doc:
    @cd doku; \
    make clean > /dev/null 2>/dev/null; \
    make > /dev/null 2>/dev/null 
```

如果这个目标中的 make 是好的，它会正常结束，但是如果目标 doc 中的 make 返回错误，它会保持“卡住”。按回车后，它通常以：

```
make: *** [doc] Error 2 
```

是否有任何选项可以在不按键的情况下结束 make `Enter`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:25:06.537

`$(MAKE)`调用子制作时应始终使用，而不是`make`. 这实际上是一个 shell 问题，而不是一个 make 问题，但如果您不希望该进程读取输入，您可以从以下位置重定向标准输入`/dev/null`：

```
make >/dev/null 2>&1 </dev/null 
```

# ios - Spring Mobile 能否区别对待 iOS 和 Android？

> ID：15766602
> 
> 赞同：2
> 
> 时间：2013-04-02T14:22:08.567
> 
> 标签：ios, spring, spring-mvc, mobile-website, spring-mobile

Spring Mobile 允许 Spring MVC 应用程序检测 Web 客户端是台式机/笔记本电脑、平板电脑还是移动设备。

是否可以使用 Spring Mobile 确定设备是否为 Android/iOS？是否有扩展点，或者它会是“自制”功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-20T03:51:28.313

Spring Mobile 不包含用于区分 Android 和 iOS 的内置支持。但是，它包括两个接口，`Device`和`DeviceResolver`. 您可以实现这些的自定义版本，以检测 Android 和 iOS 设备并提供其他方法，例如`isAndroid()`或`isIOS()`。然后你可以配置`DeviceResolverHandlerInterceptor`使用你的`DeviceResolver`实现。当您在 a 中使用检测到的设备时，`Controller`您可以简单地将其转换为您的实现。查看提供的`LiteDevice`和`LiteDeviceResolver`实现的灵感。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-04T16:34:50.113

我知道这张票已经很老了，但我只是想告诉你，更新版本的 spring-mobile-device 是可能的。

在最新的 1.1.5.RELEASE 中，您可以轻松访问设备的 DevicePlatform。见[https://github.com/spring-projects/spring-mobile/blob/1.1.5.RELEASE/spring-mobile-device/src/main/java/org/springframework/mobile/device/DevicePlatform.java](https://github.com/spring-projects/spring-mobile/blob/1.1.5.RELEASE/spring-mobile-device/src/main/java/org/springframework/mobile/device/DevicePlatform.java)

因此，如果您使用 1.1.5.RELEASE，您可以轻松地执行以下操作：

```
if (currentDevice.isNormal()) {
  // do stuff for desktop devices
} elseif (currentDevice.getDevicePlattform() == DevicePlatform.IOS) {
  // do iOS specific stuff
} else {
  // treat as mobile device
} 
```

# opencv - OpenCV 和 Visual C++

> ID：15766603
> 
> 赞同：-2
> 
> 时间：2013-04-02T14:22:10.213
> 
> 标签：opencv

是否可以开发一个自定义应用程序，使用`OpenCV`with自动更改 IP 摄像机的设置`Visual Studio 2010`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:24:31.740

所以，如果你问 opencv 是否有一个用于更改网络摄像机设置的界面？那就不要。

你确定没有相机的api吗？保存设置时网页会做什么？发送一个 post http 请求？你能从你的应用程序中模仿吗？我确信在 c++ 中有其他可用于 http 的客户端。

如果你问能否在 Visual Studio 中使用 opencv，那么答案是肯定的，非常好。只需将包含添加到您的 VS 包含目录和 lib 到您的 lib 目录。

# php - Steam API，XML 检索到 PHP $Variable

> ID：15766606
> 
> 赞同：0
> 
> 时间：2013-04-02T14:22:29.227
> 
> 标签：php, xml

我正在尝试从 Steam API 检索比赛信息，由于我的 PHP 和 XML 知识有限，到目前为止，我一直在使用您的精彩网站来帮助我完成这项任务，但已经卡住了。在尝试找到解决方案大约 6 小时后，我想我会在这里问这个问题，因为可能有一个非常简单的解决方案。

从 Steam API 中提取此信息的直接 URL 如下：https://api.steampowered.com/IDOTA2Match_570/GetMatchDetails/V001/?match_id=123456789&format=xml&key=mysteamkey

我创建了一个 html 表单来提交 MatchID 到这个，以便我可以根据需要更改它，代码如下：

```
<form action="retrieval.php" method="post">
MatchID <input type="text" name="MatchID">
<input type="submit">
</form> 
```

和retrieval.php：

```
$context  = stream_context_create(array('https' => array('header' => 'Accept: application/xml')));
$url1 = 'https://api.steampowered.com/IDOTA2Match_570/GetMatchDetails/V001/?match_id=';
$url2 = $_POST["MatchID"];
$url3 = '&format=xml&key=<mykeyhere>';
$urlfinal = $url1 . $url2 . $url3;

$xml = file_get_contents($urlfinal, false, $context);
$xml = simplexml_load_string($xml); 
```

如果我 print_r($xml); 这使用示例 MatchID，我得到以下信息： [http://www.nimserv.com/chromebrowser.png](http://www.nimserv.com/chromebrowser.png) [http://www.nimserv.com/pagesource.png](http://www.nimserv.com/pagesource.png) 所以在我天真的理解中，它似乎正在成功检索数据.

所以终于说到点子上了，如果啰嗦了，请见谅。我将如何继续这样做才能使每一行都具有可以查询的格式，以准备插入数据库？我尝试过使用一些 XMLParse 方法，并且能够将其转换为 html 文本，我可能会编写一个脚本来获取这些信息并对其进行适当的排序，但是我确信有更好的方法可以做到这一点，比那个。如前所述，我的编程知识是有限的，所以我在工作的过程中学到了很多东西。

感谢您的宝贵时间，感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:28:08.887

未经测试：

```
foreach( $xml->players->player as $player ) {
  echo 'id: ', $player->account_id, "\n";
  ...
} 
```

# awk - awk printf 语法错误

> ID：15766609
> 
> 赞同：-3
> 
> 时间：2013-04-02T14:22:34.197
> 
> 标签：awk

如何在模式之间插入空格。我正在寻找这样的输出

```
pattern1 pateern2 pattern 3 
```

代码：

```
cat 2 |awk '/pattern1|pattern2|pattern3/ {printf  $NF }'
pattern1pattern2pattern3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:26:45.650

你在找这个吗？

```
awk '{gsub(/pattern1|pattern2|patter3/,"& ")}1'  file 
```

例如：

```
kent$  echo "foobarbaz"|awk '{gsub(/foo|bar|baz/,"& ")}1'    
foo bar baz 
```

# javascript - 如何有效地限制在鼠标悬停事件中执行的 AJAX 请求？

> ID：15766616
> 
> 赞同：0
> 
> 时间：2013-04-02T14:22:47.080
> 
> 标签：javascript, jquery

我有一个包含几十行（最多 100 行）的表，每行都有 1 个元素，并附加了一个 mouseover 事件。在鼠标悬停时，我打开一个工具提示，需要发出一个 AJAX 请求来填充一些数据。

我的问题很简单：如果用户在所有附加了该事件的元素上上下移动鼠标，我一次会发出大量请求。我想以一种或另一种方式节流它，但我不确定如何去做。

我将不得不检查在最后*n*秒内是否执行了相同的事件，但是如何在事件 1 的触发和事件 2 的触发之间保持联系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:30:18.583

在 AJAX 调用开始时需要一个标志，如果标志为零，则从函数返回。如何确定变量的范围取决于您。

```
if(AJAXOK==0) {
   return;
}    
AJAXOK = 1; 
```

在 AJAX 调用中设置变量，以便在超时后自行重置：

```
window.setInterval(function() { AJAXOK = 1 },5000);
AJAXOK = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:37:00.020

如果您有兴趣尝试不同的方法，那么响应式扩展就是专为此类事情而设计的：

[http://reactive-extensions.github.com/RxJS](http://reactive-extensions.github.com/RxJS)

# javascript - drawIntro 未定义

> ID：15766617
> 
> 赞同：0
> 
> 时间：2013-04-02T14:22:48.497
> 
> 标签：javascript, jquery, html, jquery-svg

我在 Windows 7 上使用 html5 并尝试使用[此处](http://keith-wood.name/svg.html)描述的 jQuery SVG 。

它在 html 文件中调用以下代码行。

```
<script type="text/javascript">jQuery(function ($) {$('#svgintro').svg({onLoad: drawIntro});});</script> 
```

但是，这会导致 JavaScript 控制台返回错误消息

```
ReferenceError: drawIntro is not defined 
```

我一直无法在网络上找到有关此错误的讨论或应该在哪里定义它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:36:53.683

您缺少一个功能`drawIntro`。它应该如下所示。我刚刚使用了您提到的页面中给出的示例代码。这应该有效。主要问题是您没有定义函数。仅通过复制该功能也可能有效。希望这可以帮助

```
<div id="svgintro"></div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.svg.js"></script>
<script type="text/javascript">
$('#svgintro').svg({onLoad: drawIntro});
function drawIntro(svg) { 
    svg.circle(75, 75, 50, 
        {fill: 'none', stroke: 'red', strokeWidth: 3}); 
    var g = svg.group({stroke: 'black', strokeWidth: 2}); 
    svg.line(g, 15, 75, 135, 75); 
    svg.line(g, 75, 15, 75, 135); 
}
</script> 
```

# javascript - 使用 jquery .each() 附加 div

> ID：15766618
> 
> 赞同：0
> 
> 时间：2013-04-02T14:22:50.813
> 
> 标签：javascript, jquery, html

我试图`.each()`在一个函数中触发一个循环，该循环将链接附加到以前创建的 div。我的初始数据取自的 HTML：

```
<tr>
<td><a onclick="addLinkToStage(181,false); return false;" href="#">[Add]</a></td>
</tr>

<tr>
<td>

<div email="bob@gmail.com" task="104" class="cases_holder_181"><b>Name:</b> Testing1</div>

<div email="a@a.com" task="104" class="cases_holder_181"><b>Name:</b> Testing1</div>

<div email="c@c.com" task="104" class="cases_holder_181"><b>Name:</b> Testing1</div>

<div email="bob@gmail.com" task="105" class="cases_holder_181"><b>Name:</b>Testing2</div>

<div email="a@a.com" task="105" class="cases_holder_181"><b>Name:</b> Testing2</div>

<div email="bob@gmail.com" task="106" class="cases_holder_181"><b>Name:</b> Testing3</div>

<div email="a@a.com" task="106" class="cases_holder_181"><b>Name:</b> Testing3</div>

<div email="bob@gmail.com" task="107" class="cases_holder_181"><b>Name:</b> Testing4</div>

<div email="a@a.com" task="107" class="cases_holder_181"><b>Name:</b> Testing4</div>

</td>
</tr> 
```

我的JS如下：

```
var task_check = [];
var id_check = [];

function addLinkToStage(id,status){
    $(".cases_holder_"+id).each(function(){
        var task = $(this).attr("task")

        if(task_check.indexOf(task) == -1){
            task_check.push(task);
            addStage(task,status);
        }       
        else{
            var div_html = '<div class="task_'+task+'">'+
            '<a href="task'+task+'">Click</a>'+
            '</div>';
            $('#addlink'+task).append(div_html);
        }   
    })
}

function addStage(id,status){
    if(id_check.indexOf(id) == -1){
        id_check.push(id);
        $.getJSON(fullurl, function(json) {
            $.each(json, function(i,d) {
                            output = '<div>Link</div>'+
                                     '<div>'+d.Name+'</div>'+
                         '<div class="add" id="addlink'+id+'"></div>';
            });
            $('#stage').append(output);

        }
} 
```

如上所示，`addLinkToStage`检查一组具有唯一 ID 的类，并根据属性“任务”中的值触发函数`addStage`。如果该`addStage`功能已被相同的“任务”值触发，则它会附加一个链接。

我的问题是它似乎跳过了整个 else 块，但是如果我要添加一个 alert("Test"); 它会在警报框中的每次确认单击时附加链接。

谁能帮我理解它为什么会这样？以及解决它的可能解决方案？

编辑：我还注意到，尽管添加了 alert() 它将工作，因为它假设着火，它不会在 chrome 上工作。

# android - 如何从其他活动中获取对象引用 [android]

> ID：15766620
> 
> 赞同：-1
> 
> 时间：2013-04-02T14:22:53.363
> 
> 标签：android, reference, android-asynctask, client-server

我的项目中有两个主要课程。第一个是用于创建客户端和服务器之间的连接。第二个是用于在活动之间切换。

第一的：

```
public class MyActivity extends Activity{
private ListView mList;
private ArrayList<String> arrayList;
private MyCustomAdapter mAdapter;
public TCPClient mTcpClient;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    boolean flag = getIntent().getBooleanExtra("flag",false);
    arrayList = new ArrayList<String>();

    final EditText editText = (EditText) findViewById(R.id.editText);
    Button send = (Button)findViewById(R.id.send_button);
    Button menu = (Button)findViewById(R.id.button1);

    if (flag == true)
    {
        //relate the listView from java to the one created in xml
        mList = (ListView)findViewById(R.id.list);
        mAdapter = new MyCustomAdapter(this, arrayList);
        mList.setAdapter(mAdapter);

        new connectTask().execute("");

        Intent myIntent = new Intent(MyActivity.this,Menu.class);
        startActivity(myIntent);
    }
    send.setOnClickListener(new View.OnClickListener() {
        //  @Override
        public void onClick(View view) {

            String message = editText.getText().toString();

            //clean the listView to 1 item
            if (message.equals("clean"))
            {
                arrayList.removeAll(arrayList);
                mList.removeAllViewsInLayout();
            }
            //add the text in the arrayList
            arrayList.add("c: " + message);

            //sends the message to the server
            if (mTcpClient != null) {
                mTcpClient.sendMessage(message);
            }

            //refresh the list
            mAdapter.notifyDataSetChanged();
            editText.setText("");
        }
    });

    //change Activity to live screen mode (live)
    menu.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            Intent myIntent = new Intent(MyActivity.this, Menu.class);
            startActivity(myIntent);

        }
    });

}

public class connectTask extends AsyncTask<String,String,TCPClient> {

    @Override
    protected TCPClient doInBackground(String... message) {

        //we create a TCPClient object and
        mTcpClient = new TCPClient(new TCPClient.OnMessageReceived() {
            // @Override
            //print the message as an Item
            public void messageReceived(String message) {
                //this method calls the onProgressUpdate
                publishProgress(message);
            }
        });
        mTcpClient.run();

        return null;

    }

    @Override
    protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);

        //in the arrayList we add the messaged received from server
        arrayList.add(values[0]);
        // notify the adapter that the data set has changed. This means that new message received
        // from server was added to the list
        mAdapter.notifyDataSetChanged();
    }
} 
```

}

对象`TCPClient mTcpClient`是我的应用程序中的主要因素。我用它与服务器通信。此外，即使我在活动之间切换，它仍然可以正常运行，因此即使我不在该活动中，我仍然可以从服务器获取信息。

第二：

```
public class Menu extends Activity
{
    public MyActivity myActivity;
    public TCPClient mtcp;

protected void onCreate(Bundle savedInstanceState, MyActivity myActivity) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);

    ImageView action = (ImageView) findViewById(R.id.imageView1);
    action.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) 
        {
            // here I would like to use mTcpClient object mentioned in the first class
            return false;
        }

    }); 
```

}

基本上我需要的是关于如何在第二类中创建对第一类`mTcpClient`中描述的对象的引用的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:34:34.427

你这样做是不对的。如果您想使用 TcpClient 类而不考虑上下文，则它不应与第一个 Activity 相关。你应该做的是使用单例模式：

```
class TcpClient {

    protected static TcpClient mInstance = null;

    public TcpClient() {
        // your init code...
    }

    public static TcpClient getInstance() {
        if( mInstance == null ) {
            mInstance = new TcpClient();
        }

    return mInstance;
    }

...
} 
```

然后，每当您想使用 TcpClient 时，您只需执行以下操作：

```
TcpClient client = TcpClient.getInstance(); 
```

# php - # 和 // 有什么区别？

> ID：15766623
> 
> 赞同：2
> 
> 时间：2013-04-02T14:22:57.330
> 
> 标签：php

据我所知，有两种不同的方式在 PHP 中编写一行代码：

*   `#`像这样
*   `//`或者像这样

是否有一般规则建议应该使用哪个来注释等？

# android - 带有 OnTouchListener Android 的 imageView 中的双重事件

> ID：15766626
> 
> 赞同：0
> 
> 时间：2013-04-02T14:23:00.707
> 
> 标签：android, android-layout, android-imageview, ontouchlistener

我正在尝试使用 android 2.1 (sdk 2.1) 构建拖放功能。我在网上搜索，只能使用 android 4.0+ 找到。我有一个使用此代码动态创建和设置的 ImageView（包装在具有一些属性和属性的类中）。

```
public void setTileImage(Drawable tileImage) {
    if (tileImage == null) {
        Log.d("Tiles", "Null");
    }
    this.tileImage = new ImageView(this.context);
    this.tileImage.setImageDrawable(tileImage);
    this.tileImage.setAdjustViewBounds(true);
    this.tileImage.setScaleType(ImageView.ScaleType.FIT_START);
    this.createImageMargins();
}

public void createImageMargins() {
    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(this.imageSizeX, this.imageSizeY);
    this.tileImage.setLayoutParams(layoutParams);
    MarginLayoutParams marginParams = new MarginLayoutParams(this.tileImage.getLayoutParams());
    marginParams.setMargins(this.initialPositionX, this.initialPositionY, this.initialPositionX + imageSizeX, this.initialPositionY + this.imageSizeY);
    RelativeLayout.LayoutParams layoutParams2 = new RelativeLayout.LayoutParams(marginParams);
    this.tileImage.setLayoutParams(layoutParams2);
    this.tileImage.requestLayout();
} 
```

我将此 ImageView 添加到 RelativeLayout。

```
RelativeLayout layout = (RelativeLayout) findViewById(R.id.playscreen);
Tiles t1 = this.createTitle();
layout.addView(t1.getTileImage()); 
```

对于创建的每个 ImageView（有几个），我添加了 OnTouchListener（对所有这些都是唯一的）

```
private static TouchListener listener = new TouchListener();;

t1.createDragHandler(listener);

public void createDragHandler(TouchListener listener){
    this.tileImage.setOnTouchListener(listener);
} 
```

这是实现 OnTouchListener 方法的类。此类将 ImageView 的位置（更新边距 - 类之后的方法）更改为它接收到的事件的位置。

```
public class TouchListener implements OnTouchListener{

public boolean onTouch(View v, MotionEvent motionEvent) {
    Tiles currentTile = Tiles.searchTileByView(Play.getAvailableTiles(), (ImageView)v);
    if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
        return true;
    } else if (motionEvent.getAction() == MotionEvent.ACTION_UP) {
        Tiles t = Play.checkCollision(currentTile, currentTile.getPositionX(), currentTile.getPositionY());
        if(t == null){
            if(currentTile.getPositionX() == currentTile.getInitialPositionX() && currentTile.getPositionY() == currentTile.getInitialPositionY()){
                Log.d("Log","This was a click");
            }else{
                currentTile.setPositionX(currentTile.getInitialPositionX());
                currentTile.setPositionY(currentTile.getInitialPositionY());
                currentTile.createImageMargins();
            }
        }else{
            if(t.getId() == currentTile.getId()){
                Play.updateScore(t.getPoints()*t.getSpecialPoints()+currentTile.getPoints()*currentTile.getSpecialPoints());
                t.setActive(false);
                currentTile.setActive(false);
                t.getTileImage().setVisibility(View.INVISIBLE);
                currentTile.getTileImage().setVisibility(View.INVISIBLE);
                Log.d("Log","Tile Removed");
            }
        }
        return true;
    }else if(motionEvent.getAction() == MotionEvent.ACTION_MOVE){
        Log.d("Log:" + this.toString() + ":" + v,"Moved -> X: " + motionEvent.getX() + " Y: " + motionEvent.getY());
        currentTile.setPositionX((int) motionEvent.getX());
        currentTile.setPositionY((int) motionEvent.getY());
        currentTile.updateImageMargins();
        return true;
    }else{
        return false;
    }
}

public void updateImageMargins(){
    MarginLayoutParams marginParams = new MarginLayoutParams(this.tileImage.getLayoutParams());
    marginParams.setMargins(this.positionX, this.positionY, this.positionX  + imageSizeX, this.positionY + this.imageSizeY);
    RelativeLayout.LayoutParams layoutParams2 = new RelativeLayout.LayoutParams(marginParams);
    this.tileImage.setLayoutParams(layoutParams2);
} 
```

我想问题是我在 OnTouchListener.onTouch 方法中接收到两个事件。第一个是使用RelativeLayout的坐标（所以它从屏幕的左上角开始）和其他使用ImageView的坐标（它从ImageView的左上角开始）所以当我点击并移动我收到对于具有两个不同事件坐标的事件，如下所示：

```
TouchListener@44f3bf80:android.widget.ImageView@44f1b4c8 Moved -> X: 59.0 Y: 24.000015
TouchListener@44f3bf80:android.widget.ImageView@44f1b4c8 Moved -> X: 100.0 Y: 148.00002 
```

换句话说，第一行从我在图像视图中点击的位置接收坐标（如果我点击靠近任何边框，这个值会改变），第二行是我在相对布局中点击的位置。因此，当我移动光标时，图像开始从一个点闪烁到另一个点。当我将光标移向任何方向时，这两个值都会按比例变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:11:46.227

尝试使用`motionEvent.getRawX()`and`motionEvent.getRawY()`而不是`getX()`and `getY()`。您可能需要进行额外的调整以在您的`View`.

# python - 谷歌应用引擎 dev_appserver.py 错误

> ID：15766629
> 
> 赞同：1
> 
> 时间：2013-04-02T14:23:06.183
> 
> 标签：python, google-app-engine

在 Ubuntu 上使用 dev_appserver.py 在本地运行应用程序时出现此错误。
是否由于 python 版本，因为它在 python 运行时文件上显示错误？
较早的相同版本在 Windows 8 下工作。

```
INFO     2013-04-05 11:38:49,126 sdk_update_checker.py:244] Checking for updates to the SDK.
INFO     2013-04-05 11:38:49,648 sdk_update_checker.py:272] The SDK is up to date.
WARNING  2013-04-05 11:38:50,168 simple_search_stub.py:976] Could not read search indexes from /tmp/appengine.coderedsolution13.vjdhama/search_indexes
INFO     2013-04-05 11:38:50,170 api_server.py:152] Starting API server at: http://localhost:38393
INFO     2013-04-05 11:38:50,179 dispatcher.py:98] Starting server "default" running at: http://localhost:8080
INFO     2013-04-05 11:38:50,182 admin_server.py:117] Starting admin server at: http://localhost:8000
Traceback (most recent call last):
  File "/home/vjdhama/Documents/Softwares/google_appengine/_python_runtime.py", line 194, in <module>
    _run_file(__file__, globals())
  File "/home/vjdhama/Documents/Softwares/google_appengine/_python_runtime.py", line 190, in _run_file
    execfile(script_path, globals_)
  File "/home/vjdhama/Documents/Softwares/google_appengine/google/appengine/tools/devappserver2/python/runtime.py", line 101, in <module>
    main()
  File "/home/vjdhama/Documents/Softwares/google_appengine/google/appengine/tools/devappserver2/python/runtime.py", line 78, in main
    sandbox.enable_sandbox(config)
  File "/home/vjdhama/Documents/Softwares/google_appengine/google/appengine/tools/devappserver2/python/sandbox.py", line 168, in enable_sandbox
    __import__('site')
  File "/usr/lib/python2.7/site.py", line 563, in <module>
    main()
  File "/usr/lib/python2.7/site.py", line 545, in main
    known_paths = addusersitepackages(known_paths)
  File "/usr/lib/python2.7/site.py", line 272, in addusersitepackages
    user_site = getusersitepackages()
  File "/usr/lib/python2.7/site.py", line 247, in getusersitepackages
    user_base = getuserbase() # this will also set USER_BASE
  File "/usr/lib/python2.7/site.py", line 237, in getuserbase
    USER_BASE = get_config_var('userbase')
  File "/usr/lib/python2.7/sysconfig.py", line 578, in get_config_var
    return get_config_vars().get(name)
  File "/usr/lib/python2.7/sysconfig.py", line 524, in get_config_vars
    _init_posix(_CONFIG_VARS)
  File "/usr/lib/python2.7/sysconfig.py", line 408, in _init_posix
    from _sysconfigdata import build_time_vars
  File "/usr/lib/python2.7/_sysconfigdata.py", line 6, in <module>
    from _sysconfigdata_nd import *
ImportError: No module named _sysconfigdata_nd
ERROR    2013-04-05 11:38:50,677 http_runtime.py:221] unexpected port response from runtime ['']; exiting the development server
ERROR    2013-04-05 11:38:50,678 server.py:576] Request to '/_ah/warmup' failed
Traceback (most recent call last):
  File "/home/vjdhama/Documents/Softwares/google_appengine/google/appengine/tools/devappserver2/server.py", line 570, in _handle_request
    environ, wrapped_start_response)
  File "/home/vjdhama/Documents/Softwares/google_appengine/google/appengine/tools/devappserver2/request_rewriter.py", line 311, in _rewriter_middleware
    response_body = iter(application(environ, wrapped_start_response))
  File "/home/vjdhama/Documents/Softwares/google_appengine/google/appengine/tools/devappserver2/server.py", line 922, in _handle_script_request
    request_type)
  File "/home/vjdhama/Documents/Softwares/google_appengine/google/appengine/tools/devappserver2/server.py", line 887, in _handle_instance_request
    request_type)
  File "/home/vjdhama/Documents/Softwares/google_appengine/google/appengine/tools/devappserver2/instance.py", line 382, in handle
    request_type))
  File "/home/vjdhama/Documents/Softwares/google_appengine/google/appengine/tools/devappserver2/http_runtime.py", line 189, in handle
    self._port))
TypeError: %d format: a number is required, not NoneType
INFO     2013-04-05 11:38:50,710 server.py:528] "GET /_ah/warmup HTTP/1.1" 500 -
INFO     2013-04-05 11:38:51,193 api_server.py:517] Applying all pending transactions and saving the datastore
INFO     2013-04-05 11:38:51,193 api_server.py:520] Saving search indexes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:22:01.927

在您的错误输出中它说：

> 类型错误：%d 格式：需要一个数字，而不是 NoneType

这可能意味着，您需要提供一个数字，而不是未分配的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T12:24:42.513

我有同样的问题。`_python_runtime.py`它是通过在文件夹中的 appengineSDK 中创建符号链接来修复的`~/bin/`

喜欢：

```
ln -s /wherever/sdks/google_appengine/_python_runtime.py /home/username/bin/ 
```

# eclipse - Maven WebApp 部署在 WTP (Eclipse) Tomcat 中：META-INF/context.xml 未被复制（被忽略）

> ID：15766631
> 
> 赞同：0
> 
> 时间：2013-04-02T14:23:12.960
> 
> 标签：eclipse, maven, tomcat, deployment

免责声明：这不是“为什么没有考虑 META-INF/context.xml 中声明的我的 JDBC 资源”类型问题的重复。

我有两个 Java EE Web 应用程序：

*   一个是使用 Eclipse 的“Web 应用程序项目”模板在 Eclipde IDE 中创建的

*   另一个是使用 Maven 创建的，然后导入到 Eclipse 中

在 Eclipse 内部，我还使用 WTP 插件配置了一个 Tomcat，这样我就可以轻松地（或者我希望如此）以“一键式”的方式在其中部署我的 Eclipse Web 应用程序。

对于上述每个应用程序，我在其 META-INF 目录中放置了一个 context.xml 文件，其中我将一些 JDBC 数据源声明为 JNDI 资源。

当部署在 Eclipse 内的 WTP Tomcat 中时，Eclipse 创建的应用程序运行良好。我在 Eclipse 中右键单击 Tomcat 服务器，添加项目，启动它，一切正常，找到 JNDI 数据源等。

对于另一个项目，使用 Maven 创建并在 Eclipse 中导入的项目，如果我将其添加到 WTP Tomcat，并手动指定 Maven 构建 war 文件的位置（在“目标”目录中），它似乎可以工作，但是找不到 JNDI 数据源，更具体地说，我的 Spring 声明的数据源：

```
 <jee:jndi-lookup id="dataSource" jndi-name="java:comp/env/whatever" /> 
```

抛出一个异常，说没有 JNDI 名称被绑定为“whatever”。

如果我在“常规”Tomcat 中部署相同的 war 文件（只是解压缩 Tomcat，不涉及 Eclipse），它可以正常工作，并且找到在 war 的 META-INF/context.xml 中声明的 JNDI 数据源。

我查看了 Eclipse 的 Tomcat 工作目录，果然在 Eclipse 创建的项目中，context.xml 文件被复制到“{catalina home}\wtpwebapps\eclipeProjectName\META-INF\context.xml”中，没有这样的文件（和文件夹结构）用于 Maven 项目。

我的问题是：有谁知道如何在 Eclipse 中导入 Maven 创建的 Web 应用程序并部署在 WTP Tomcat 中，以便考虑 META-INF/context.xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:10:54.577

正如您所提到的，您正在使用 Eclipse Helios。JBoss 提供了另一种替代方法，即[Eclipse 更新站点](http://download.jboss.org/jbosstools/updates/m2eclipse-wtp/)。[该文件](http://download.jboss.org/jbosstools/updates/m2e-extensions/m2eclipse-wtp/)告诉我们如下： -

> 永远不应删除以下文件夹，因为它们是用于当前/以前的 JBoss 工具版本的复合需求站点的一部分：
> 
> **太阳神 SR2**：0.13.1
> 
> **靛蓝 SR2**：0.15.3
> 
> **Juno**（仅限 SOA 工具集成堆栈 - 可能不再需要？）：0.14.0
> 
> **Juno SR1**（如果我们有 Juno SR2 目标平台，可以删除，如果有更新的话）：0.16.0

请注意，在 Eclipse Juno 之前，我使用 Helios 和 Indigo 和这个插件。它也给了我一个很好的结果。

我希望这可能会有所帮助。

# android - 在android中运行时更改按钮背景

> ID：15766634
> 
> 赞同：2
> 
> 时间：2013-04-02T14:23:18.450
> 
> 标签：android, android-button

我想在 RUNTIME 更改我的按钮背景

我知道如何为按钮添加自定义背景，但是

*   如何将其更改为无边框按钮样式？在 xml 中很简单，我使用了：

    ```
    style="?android:attr/borderlessButtonStyle") 
    ```

*   如何切换回默认背景？以下不是我想要的（显然它不是果冻豆中使用的默认值）

    ```
    changeableButton.setBackgroundResource(android.R.drawable.btn_default); 
    ```

    谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T07:24:10.857

我实际上找到了解决方案

您可以将按钮的初始背景保存在 Drawable 对象中

```
Drawable d = button.getBackground(); 
```

现在您可以根据需要修改按钮的背景

```
button.setBackgroundResource(R.drawable.custom_button); 
```

比你可以修改回来

```
button.setBackgroundDrawable(d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:33:09.197

这行得通吗？ `changeableButton.setBackground(null);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-04T13:35:25.447

这个问题有一个简单的答案：

```
button.setBackgroundResource(R.drawable.backround); 
```

您还可以使用 if 语句更改回默认背景，并通过将“背景”资源更改为默认资源来重复上述语句。顺便说一句，感谢 A2A。

# c# - 从工作区中的另一个类访问 TextBox

> ID：15766636
> 
> 赞同：0
> 
> 时间：2013-04-02T14:23:20.443
> 
> 标签：c#, textbox

我想使用 a `textBox`，它在我`Form1`其他班级的主要表格上。在课堂`Form1`上我可以使用：

```
 this.Invoke(new EventHandler(displayText));

and then

    private void displayAccFields(object o, EventArgs e)
    {
        tbAccRoll.AppendText(packParameters.getPackage(3) + "");
    } 
```

它工作正常。

我如何访问它`textbox`以显示来自不同类的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:32:57.423

要在两个表单之间发送值，您可以

1.  在第二种形式的构造函数中发送值。您可以创建参数化构造函数并在初始化表单时发送值。
2.  您可以在第二个表格中参考您的第一个表格。

在第二种形式中，

```
public Form1 objForm1; 
```

在第一形式中，

```
Form2 objForm2=new Form2();
Form2.objForm1=this; 
```

然后您可以使用 Form2 的 objForm1 来引用 Form1 的文本框。

# html - Safari HTML5 多文件上传错误的任何解决方法？

> ID：15766644
> 
> 赞同：6
> 
> 时间：2013-04-02T14:23:40.603
> 
> 标签：html, safari

经过几周的调整，我终于放弃了。我只是无法修复我在 safari 上的多个文件上传，这真的让我很困扰，因为我的代码在其他浏览器上运行良好，在 safari 上除外。然后我最近才发现不是我的代码有问题。它是一个 Safari 错误。Safari 5.1.+ 无法读取 html5 多重属性（或类似的东西）。所以用户不能使用多重上传功能，但可以正常上传单个文件。

讨论该问题的几个链接：

[https://github.com/moxiecode/plupload/issues/363](https://github.com/moxiecode/plupload/issues/363)

[Safari中的文件输入大小问题用于多个文件选择](https://stackoverflow.com/questions/7231054/file-input-size-issue-in-safari-for-multiple-file-selection)

似乎这个错误已经存在了很长一段时间。所以我想知道你们中的一些人可能知道目前是否有可用的解决方法？因为我找不到。我发现的唯一可用选项是不要为 Safari 5.1.+ 用户使用多个属性。大家有什么更好的想法吗？

**更新**

**Safari 5.1.7**是 Apple 为 Windows 操作系统制作的最后一个版本。他们没有继续为 Windows 构建当前版本的 Safari。*因为Real* Safari 用户已更新到浏览器的最新版本（*没有事实*），所以没有必要为我找到此错误的修复程序，并且只需为仍在使用此过时版本的用户单独上传，以免牺牲现代您的应用程序的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T19:50:00.967

这是一个古老的问题，但是......下面是黑客类型的解决方法。

只需删除Safari 的**多个**属性，将其转换为 MSIE<=9 小兄弟（非 XHR）。

其余浏览器不会受到影响。

当 Safari 最终解决问题时，您所要做的就是删除这个 hack::code 并返回到标准输入代码。

**这是标准输入样本：**

```
<input class="fileupload-input" type="file" name="files[]" 多个 />

```

**jQuery解决方案：**

只需将它放在页面上的某个位置，您可以在其中有文件输入标签。

您可以在这里阅读更多内容：[如何检测 Safari、Chrome、IE、Firefox 和 Opera 浏览器？](https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser)

```
$(文档).ready(函数 () {
    if (Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor')>0);
         $('.fileupload-input').removeAttr("multiple");
});

```

**PHP解决方案**

你需要一些代码来识别浏览器我使用了一个我在 github (MIT) 得到的类在这里获取它：[https ://github.com/gavroche/php-browser](https://github.com/gavroche/php-browser)

```
$files = '<input class="fileupload-input" type="file" name="files[]" 多个 />';
 if (Browser::getBrowser() === Browser::SAFARI) {
    $files = '<input class="fileupload-input" type="file" name="files[]" />';
 }
回声$文件

```

就这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T18:36:42.640

我遇到了 asp.net 的 image.jpg 问题。它可能会使某人受益。我在每个图像文件中附加了一个非唯一的哈希，以将其与数据库中的记录联系起来。在每个平台上都可以正常工作（我们的用户无论如何都在使用），但使用 Safari 时除外。我只是将一个哈希和一个从 DateTime 的秒部分提取的唯一三位数字符串附加到字符串：

```
if (!string.IsNullOrEmpty(ViewState["HashId"].ToString()))
        {
            string filepath = Server.MapPath("~/docs/");
            HttpFileCollection uploadedFiles = Request.Files;
            Span1.Text = string.Empty;

            for (int i = 0; i < uploadedFiles.Count; i++)
            {
                HttpPostedFile userPostedFile = uploadedFiles[i];

                try
                {
                    if (userPostedFile.ContentLength > 0)
                    {

                        string timestamp = DateTime.UtcNow.ToString("fff",
                                             CultureInfo.InvariantCulture);

                        //Span1.Text += "<u>File #" + (i + 1) + "</u><br>";
                        //Span1.Text += "File Content Type: " + userPostedFile.ContentType + "<br>";
                        //Span1.Text += "File Size: " + userPostedFile.ContentLength + "kb<br>";
                        //Span1.Text += "File Name: " + userPostedFile.FileName + "<br>";

                        userPostedFile.SaveAs(filepath + "\\" + ViewState["HashId"] + "_" + Path.GetFileName(timestamp + userPostedFile.FileName));
                       // Span1.Text += "Location where saved: " + filepath + "\\" + Path.GetFileName(userPostedFile.FileName) + "<p>";
                        InsertFilename("~/docs/" + ViewState["HashId"] + "_" + Path.GetFileName(timestamp + userPostedFile.FileName), ViewState["HashId"] + "_" + Path.GetFileName(timestamp + userPostedFile.FileName));

                    }
                }
                catch (Exception Ex)
                {
                    Span1.Text += "Error: <br>" + Ex.Message;
                }
            }
            BindImages();
            SetAttchBitTrue();
            Button4.Visible = true;
            AttchStatus.Text = "This Record Has Attachments";
            Button2.Visible = true;
            Button3.Visible = true;
            Panel1.Visible = false;

        } 
```

可能是更好的方法，但我们只有少数人在数据库中的每条记录上上传一到两张，也许是三张图像。应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-27T16:14:50.457

似乎还有另一个问题可以解决。iOS Safari 多文件上传始终对所有上传的文件使用名称“image.jpg”。看起来服务器端只上传了一个文件，但事实并非如此：它已经上传了所有同名文件！

因此，解决方法进入服务器端：只需使用新生成的名称更改目标文件名。

我正在使用 Flask 和 Python，所以我使用标准公式。

```
@app.route("/upload",methods=['POST'])
def upload():
    files = request.files.getlist('files[]')
    for file in files:
        if file and allowed_file(file.filename):
            filename = generate_filename(file.filename)
            file.save( os.path.join(app.config['UPLOAD_FOLDER'], new_album_id, filename))
    return render_template('upload_ok.html') 
```

Where`generate_filaname`必须是一个函数，它创建一个与原始文件具有相同扩展名的新文件名。例如：

```
def generate_filename(sample_filename):
    # pick up extension from sample filename
    ext = sample_filename.split(".")[-1]
    name = ''.join( random.SystemRandom().choice(string.letters+string.digits) for i in range(16) )
    return name + "." + ext 
```

当然，同样可以在 PHP 中完成。

# jsf - JSF 不会在没有自定义转换器的情况下将 InputText 值转换为支持 bean 的字符串变量

> ID：15766648
> 
> 赞同：0
> 
> 时间：2013-04-02T14:23:52.327
> 
> 标签：jsf, jsf-2, converter

我尝试学习 JSF 并面临问题。
我确实使用了 Servlet 2.5、JDK 1.6 和 JSF 2.0.6（来自 pom 文件的 com.sun.faces 版本）。

我有一个简单的 JSF 页面，其中有一个`<h:inputText/>`用于与用户交互的标签

我希望用户填写它`h:inputText`然后单击`h:commandButton`并在服务器端我将获得具有更新值的支持 bean。

但在我的情况下，JSF 的生命周期中断`process validations`，移动到`render response`并向用户显示“解析器错误！” 信息

即，为了简单`h:inputText`，没有任何验证器和转换器，我从服务器端收到有关解析`h:inputText`值的错误消息。

一段时间后，我想出了我可以创建自己的转换器，它不会修改对象，只是`String`通过他自己。

我确实将转换器的实现添加到了`<h:inputText/>`这项工作中。

问题：
在书籍和其他教程中的所有示例中，没有人使用自定义转换器来`<h:inputText/>`表示`inputText`支持`String`bean 的值。
如果没有自定义转换器，为什么所有这些教程和示例都不适合我？我的错在哪里？

源代码：没有转换器的
**index.xhtml ，对我不起作用：**

```
<h:form id="UserForm">
    <h:outputText value="Insert your first name:" />
    <h:inputText id="userNameID" required="true" value="#{userBean.firstName}">
        <f:validateLength minimum="5" maximum="25" />
    </h:inputText>
    <h:message showSummary="true" showDetail="false" for="userNameID" />

    <h:commandButton id="submit" action="/view/validator/response?faces-redirect=true"
        value="Submit" />
</h:form> 
```

**用户Bean.java**：

```
@ManagedBean(name = "userBean")
@SessionScoped
public class UserBean implements Serializable {

    private String firstName;

    public String getFirstName() {
        return this.firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

} 
```

**MyConverter.java** - 虚拟转换器

```
@FacesConverter(value = "myConverter")
public class MyConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
         return value;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        return value.toString();
    }
} 
```

**index.xhtml**与转换器，按预期工作：

```
<h:form id="UserForm">
    <h:outputText value="Insert your first name:" />
    <h:inputText id="userNameID" required="true" value="#{userBean.firstName}" converter="myConverter">
        <f:validateLength minimum="5" maximum="25" />
    </h:inputText>
    <h:message showSummary="true" showDetail="false" for="userNameID" />

    <h:commandButton id="submit" action="/view/validator/response?faces-redirect=true"
        value="Submit" />
</h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:52:09.540

到目前为止，问题的原因在发布的代码中不可见，但关键症状*“它失败并显示来自迄今为止身份不明的转换器的消息，而它成功使用显式转换器”*表明您在同一个项目中的其他地方a`@FacesConverter(forClass=String.class)`它将在每个`String`没有明确指定另一个转换器的单个属性上自动运行。

# ruby-on-rails - 为什么 update_attributes 没有在我的模型中调用 before_validation 回调

> ID：15766652
> 
> 赞同：0
> 
> 时间：2013-04-02T14:24:07.837
> 
> 标签：ruby-on-rails

我正在使用 rails 2.3.8 版本是否有任何特殊原因导致 update_attributes 不触发 before_validation 回调

```
class x < ActiveRecord::Base
before_validation :testing

def testing
  debugger
end
end 
```

x.update_attributes(:name => "hello") 不会触发 before_validation

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:27:28.833

如果你用谷歌搜索这个方法，答案对你来说会很清楚：[这里的文档](http://apidock.com/rails/ActiveRecord/Base/update_attribute)清楚地说明了`update_attribute`它没有经过验证过程。`update_attributes`如果要触发验证，则应改为使用。

# asp.net - 如何在vb中为单个数据行添加多个属性？

> ID：15766654
> 
> 赞同：0
> 
> 时间：2013-04-02T14:24:09.977
> 
> 标签：asp.net, vb.net, attributes, add

这些属性可以组合成一行vb代码吗？

```
e.Row.Cells(1).Attributes.Add("id", "MyID")
e.Row.Cells(1).Attributes.Add("class", "MyCLASS") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:29:38.360

不使用框架。如果你真的需要做一行，写一个方法......

```
AddIdAndClassToCell(e.Row.Cells(1), "MyId", "MyClass")

Private Sub AddIdAndClassToCell(cell, id, class)
    cell.Attributes.Add("id", id)
    cell.Attributes.Add("class", class)
End Sub 
```

或者你可以做一个更通用的助手......

```
Private Sub AddAttributes(cell, attributes As Dictionary(of String, String))
    For Each item As KeyValuePair(Of String, String) In attributes
        cell.Attributes.Add(item.Key, item.Value)
    Next
End Sub 
```

# c++ - 考虑模板参数改变 if 语句条件

> ID：15766655
> 
> 赞同：1
> 
> 时间：2013-04-02T14:24:14.520
> 
> 标签：c++, templates, cuda

我有一个带有模板参数的全局内核函数：

```
template<int ARG> __global__ void kernel(array[]) {
    int threadID = blockDim.x*blockIdx.x + threadIdx.x;
    if(...) {...}
} 
```

考虑到模板参数，函数的行为以及特别的 if 语句条件略有不同，但主体保持不变。可以说：
`ARG == 0`if 语句看起来像：`if(expr1){body}`
`ARG == 1`if 语句看起来像：`if(expr2){body}`
`ARG == 2`if 语句看起来像：`if(expr1 && expr2){body}`

我的问题是提供此功能的最佳方式（在可读性和性能方面）是什么？

**编辑：** 表达式`expr1`和`expr2`是对`__device__ boolean`函数的调用，例如`fnc1(array[threadID])`和`fnc2(array[threadID])`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T14:31:28.687

直接的方法是蛮力：

```
if ((ARG != 1 || expr1) && (ARG != 0 || expr2)) ... 
```

由于 ARG 在编译时是已知的，因此编译器会在这里生成好的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:37:52.063

您可以声明一个辅助类模板：

```
template<int ARG>
class IfCondition {
}; 
```

并将其专门用于不同的值`ARG`：

```
template<>
class IfCondition<0> {
public:
    static bool Get() {
        return expr1;
    }
};

template<>
class IfCondition<1> {
public:
    static bool Get() {
        return expr2;
    }
};

template<>
class IfCondition<2> {
public:
    static bool Get() {
        return expr1 && expr2;
    }
}; 
```

然后在您的模板中使用它，如下所示：

```
if (IfCondition<ARG>::Get())
     ...

} 
```

关于它的好处是，通过内联，它会像字面上的书写一样`if(expr1) {body}`快`if (expr2) {body}`。

*编辑*

另一种方法是使用模板函数专业化：

```
template<int ARG>
bool ifCondition() { return false; }

template<>
bool ifCondition<0>() { return expr1; }

template<>
bool ifCondition<1>() { return expr2; }

template<>
bool ifCondition<2>() { return expr1 && expr2; }

// Then later, inside your template:
if (ifCondition<ARG>()) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:49:55.333

> ARG == 0 if 语句看起来像：if(expr1){body}
> 
> ARG == 1 if 语句如下所示： if(expr2){body}
> 
> ARG == 2 if 语句如下所示： if(expr1 && expr2){body}

直接编码，因为这是你自己对*readable*的解释。

它将是高性能的，因为`ARG`可以在编译时解决。

```
if ( ARG == 0 && expr1 ) {body}

if ( ARG == 1 && expr2) {body}

if ( ARG == 2 && expr1 && expr2 ) {body} 
```

或者，如果`{body}`很重，将它们组合起来。

```
if ( ARG == 0 && expr1 ) ||

   ( ARG == 1 && expr2) ||

   ( ARG == 2 && expr1 && expr2 ) {body} 
```

# java - 如何按Java中对象中值的大小对对象列表进行排序

> ID：15766657
> 
> 赞同：-4
> 
> 时间：2013-04-02T14:24:15.090
> 
> 标签：java, arraylist

我有一个“结果”对象的 ArrayList：结果

其中有一个字符串：字符串

和一个int：值

我正在尝试以增加 result.getValue() 的大小来排序对象列表。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:26:48.067

您可以编写一个根据 的结果[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)比较对象，然后使用 [ ]( [http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort(java. util.List](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort(java.util.List) , java.util.Comparator)) 对.`Result``getValue()``Collections.sort(java.util.List, java.util.Comparator)``ArrayList`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:31:16.560

```
Collections.sort(list, new Comparator<Result>() {
    @Override
    public int compare(Result r1, Result r2) {
        return r1.getValue() - r2.getValue();
    }
}); 
```

# mysql - 使用 oop 进行 SQL 查询编程的优势

> ID：15766659
> 
> 赞同：0
> 
> 时间：2013-04-02T14:24:18.423
> 
> 标签：mysql, oop, zend-framework, yii

我已经熟悉 Zend 和 Yii 框架，并试图了解使用它们的一些内置方法来执行 MYSQL 查询的好处。虽然我肯定看到使用他们的类连接到数据库以及执行诸如插入/更新之类的事情的好处，但我试图了解使用对象从数据库中选择的好处，因为它似乎只是模糊了查询复杂时的MYSQL语句。有什么好处，还是只是偏好问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:29:24.823

首先，我不是 Zend 甚至不是 PhP 开发人员，但我想说您已经指出了最大的优势：“模糊”SQL；这样一来，您就不会对 1 个特定的 DBMS 感到紧张。例如，在 mysql 和 sql server 中选择范围的方式不同。因此，假设您从一个切换到另一个，如果您不使用框架对象进行查询，则可能需要重写它。如果您使用框架，您可能只需要切换数据库连接器（或框架中调用的任何连接器）。

# entity-framework-4 - FirstOrDefault(lambda) 和 Where(lambda).FirstOrDefault() 应该相同吗？

> ID：15766664
> 
> 赞同：1
> 
> 时间：2013-04-02T14:24:32.603
> 
> 标签：entity-framework-4, linq-to-entities

我的印象`FirstOrDefault(lambda)`是对集合的影响与`Where(lambda).FirstOrDefault()`LINQ to EF 中的相同。然后我在代码中发现了这个问题，以便从我的数据库中查找指定年份最近创建的项目

```
Private Function MostRecentItemByYear(year As Integer) As Item
    Dim jan1 As New Date(year, 1, 1)
    Dim dec31 As New Date(year, 12, 31)

    Return MyContext.Items.OrderByDescending(Function(i) i.DateCreated) _
                          .FirstOrDefault(Function(i) i.DateCreated.HasValue AndAlso i.DateCreated >= jan1 AndAlso i.DateCreated <= dec31)
End Function 
```

该代码失败

> 无法创建类型为“MyCompany.Domain.Models.Item”的常量值。此上下文仅支持原始类型或枚举类型。

上`Return MyContext ...`线。但是，如果我将 lambda 移动到 a`Where`并`FirstOrDefault`单独调用，它会完美运行。

```
Private Function MostRecentItemByYear(year As Integer) As Item
    Dim jan1 As New Date(year, 1, 1)
    Dim dec31 As New Date(year, 12, 31)

    Return MyContext.Items.OrderByDescending(Function(i) i.DateCreated) _
                          .Where(Function(i) i.DateCreated.HasValue AndAlso i.DateCreated >= jan1 AndAlso i.DateCreated <= dec31) _
                          .FirstOrDefault()
End Function 
```

# apache-flex - Flex 获取 Hgroup 的第一个对象

> ID：15766668
> 
> 赞同：0
> 
> 时间：2013-04-02T14:24:39.207
> 
> 标签：apache-flex, flex4, flex3, flexbuilder

我的代码介绍：我在滚动条中有一个 Vgroup，因为用户要添加许多对象。

每次用户单击按钮时，它都会添加到内部有 3 个对象的 Vgroup 和 Hgroup（查看 agregar_clickhandler）。这 3 个对象是文本输入、数字步进器和删除图标。

我想要做的是每次用户编辑它时提取每个 Hgroup 内的文本输入和数字步进器中的信息。

例如，当我必须删除一个 Hgroup 时，我使用 Eliminar 功能，效果很好。我尝试做类似的事情来获取 textInput 中的文本，但没有任何效果。

我正在做的是向 TextInput 添加一个事件侦听器，因此当用户键入某些内容时，我可以提取该信息。

我很感激帮助。

```
<s:Button id="agregar" x="36" y="533" label="Agregar mas mensajes " fontSize="20"
  click="agregar_clickHandler(event)"/>

<s:Scroller x="36" y="99" width="554" height="400">
    <s:VGroup width="100%" height="100%" id="scroller">
    </s:VGroup>
</s:Scroller>

        protected function agregar_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub
            var group:HGroup = new HGroup();
            group.width = 552; 
            group.height = 65; 

            var input:TextInput = new TextInput(); 
            input.width = 360;
            input.height = 49; 
            input.addEventListener(TextOperationEvent.CHANGE, actualizar);

            var num:NumericStepper = new NumericStepper();
            num.width = 107;
            num.height = 49;
            num.maximum = 100; 

            var del:Button = new Button(); 
            del.width = 70; 
            del.height = 49; 
            del.label = "delete";
            del.setStyle("icon", deleteicon); 
            del.addEventListener(MouseEvent.CLICK, eliminar);  

            group.addElement(input);
            group.addElement(num); 
            group.addElement(del); 

            scroller.addElement(group); 
        }

protected function eliminar(event:MouseEvent):void
        {
            scroller.removeElement(HGroup(Button(event.currentTarget).parent));
        }

protected function actualizar(event:TextOperationEvent):void
        {

           var obj:Object = scroller.getElementIndex(HGroup(TextInput(event.currentTarget).parent));

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:18:50.167

尝试这个：

```
protected function actualizar(event:TextOperationEvent):void
{
    var currentHGroup:HGroup = HGroup(TextInput(event.currentTarget).parent);

    var currentText:String = (currentHGroup.getElementAt(0) as TextInput).text;
    var currentNumber:int = (currentHGroup.getElementAt(1) as NumericStepper).value;
} 
```

# jquery - 在我无法控制的 jQuery 点击事件中插入一个 confirm()

> ID：15766671
> 
> 赞同：1
> 
> 时间：2013-04-02T14:24:40.453
> 
> 标签：jquery, click, confirm

在我们的 web 应用程序中，当我们上传一个文档时，最后会有一个删除图像，点击它就会删除上传的文档。问题是用户经常无意中点击图标，他们甚至不知道他们删除了一些东西。

onclick 事件的代码是

```
<input type="image" name="xxxxxgbcremove" id="xxxxxgbcremove" class="RemoveImage" src="..." alt="Delete" onclick="$find('xxxfieldIDxxx').removeValue(xxxx); ;" style="border-width:0px;Display:Block;"> 
```

我想在单击图像时插入一个确认（）函数，用户可以选择是或否来继续或取消删除。问题是我无法控制上面的代码。但我确实有能力添加新脚本。

我试过取消绑定点击但没有用。

```
$(document).ready(function() {
$("[id$='remove']").unbind('click');
}); 
```

如何在应用程序附带的 onclick 事件中“插入”confirm()？理想情况下，应在用户在确认（）框中做出决定之前暂时停止原始 onclick 事件，如果用户单击是，则继续执行原始删除过程。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:28:36.030

jQuery 不能禁用内联事件处理程序`unbind()`，您需要更改内联处理程序并添加您需要的任何代码：

```
$(document).ready(function() {
    var myOnclick = $("[id$='remove']").attr('onclick');
    $("[id$='remove']").attr('onclick', 'if (confirm("Continue")) ' + myOnclick);
}); 
```

请注意，您的选择器可能匹配多个元素，然后您需要迭代。

**编辑：**

或者如果有多个元素：

```
$(document).ready(function() {
  $("[id$='remove']").each(function(i, ele) {
     $(ele).attr('onclick', 'if (confirm("Continue")) ' + $(ele).attr('onclick');
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:33:13.960

它有效吗？：

```
onclick="if (confirm('my message')) $find('xxxfieldIDxxx').removeValue(xxxx);" 
```

# c - 数据输入/循环外的差异

> ID：15766673
> 
> 赞同：1
> 
> 时间：2013-04-02T14:24:51.483
> 
> 标签：c, fgets, scanf

我正在尝试编写一个读取 .pdb 文件的程序，该文件是生物学应用程序中使用的一种文件类型。这种类型的文件具有标准格式，在数据之间具有不同的空白。该文件的格式为

```
ATOM      4  N   ALA     1       2.670   1.801   1.072  0.00  0.00
ATOM      5  CA  ALA     1       3.225   3.144   1.197  0.00  0.00
ATOM      6  C   ALA     1       4.408   3.341   0.256  0.00  0.00
ATOM      7  O   ALA     1       4.553   4.394  -0.363  0.00  0.00
....      .  ..  ...     .       .....   .....   .....  ..... .... 
```

所以我的程序（可能写得不好）定义了一个结构，读取数据（我从这里的另一篇文章中偷来的[http://www.daniweb.com/software-development/c/threads/65455/reading-a-file- using-fscanf#](http://www.daniweb.com/software-development/c/threads/65455/reading-a-file-using-fscanf#) )，并将其存储到索引结构中。现在，如果我在内部 if 循环中打印值，它会吐出正确的数据。但是，当我在外部 while 循环之外打印出相同的值时，它给了我错误的 atom[].name （恰好是 HA，输入文件中数据的第三列中的最后一个值。所有其他值是正确的。

这是我的程序

```
#include <stdio.h>

typedef struct 
{
   char *atm;
   int serial;
   char *name;
   char *resName;
   int resSeq;
   double x;
   double y;
   double z;
   double occupancy;
   double tempFactor;
} pdb;

int main(int argc, char** argv)
{
   int i, j;
   pdb atom[28]; 
   char atm[5]; 
   char name[3]; 
   char resName[4];
   int serial; 
   int resSeq;
   double x;
   double y;
   double z;
   double occupancy;
   double tempFactor;
   char buff[BUFSIZ];
   FILE *file = fopen("test.pdb", "r");

   i = 0;
   while (fgets(buff, sizeof buff, file) != NULL) 
   {
      if (sscanf(buff, "%s %d %s %s %d %lf %lf %lf %lf %lf", 
         atm, &serial, name, resName, &resSeq, &x, &y, &z, 
         &occupancy, &tempFactor) == 10)
      {
         atom[i].atm = atm;
         atom[i].serial = serial;
         atom[i].name = name;
         atom[i].resName = resName;
         atom[i].resSeq = resSeq;
         atom[i].x = x;
         atom[i].y = y;
         atom[i].z = z;
         atom[i].occupancy = occupancy;
         atom[i].tempFactor = tempFactor;
         i++;
         /*printf("%s ", atom[i].atm);
         printf("%d ", atom[i].serial);
         printf("%s ", atom[i].name);
         printf("%s ", atom[i].resName);
         printf("%d ", atom[i].resSeq);
         printf("%lf ", atom[i].x);
         printf("%lf ", atom[i].y);
         printf("%lf ", atom[i].z);
         printf("%lf ", atom[i].occupancy);
         printf("%lf\n", atom[i].tempFactor);*/
      }
   }
   fclose(file);
   for (j = 0; j < i; j++)
      printf("%d of %d: %s\n", j, i-1, atom[j].name);

   return(0);
} 
```

知道为什么会发生这种情况吗？此外，对程序格式/结构的任何帮助也将不胜感激。我更像是一个 Fortran 人，所以 C 结构超出了我的专业领域。

提前致谢。

**编辑：** jsn 帮了我，Randy Howard 改进了它。这是更新的工作程序：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct 
{
   char *atm;
   int serial;
   char *name;
   char *resName;
   int resSeq;
   double x;
   double y;
   double z;
   double occupancy;
   double tempFactor;
} pdb;

int main(int argc, char** argv)
{
   int i, j;
   pdb atom[28]; 
   int serial; 
   int resSeq;
   double x;
   double y;
   double z;
   double occupancy;
   double tempFactor;
   char buff[BUFSIZ];
   FILE *file = fopen("test.pdb", "r");

   i = 0;
   while (fgets(buff, sizeof buff, file) != NULL) 
   {
      char *atm = malloc(sizeof(char) * 5); 
      char *name = malloc(sizeof(char) * 3); 
      char *resName = malloc(sizeof(char) * 4); 

      if (sscanf(buff, "%s %d %s %s %d %lf %lf %lf %lf %lf", 
         atm, &serial, name, resName, &resSeq, &x, &y, &z, 
         &occupancy, &tempFactor) == 10)
      {
         atom[i].atm = atm;
         atom[i].serial = serial;
         atom[i].name = name;
         atom[i].resName = resName;
         atom[i].resSeq = resSeq;
         atom[i].x = x;
         atom[i].y = y;
         atom[i].z = z;
         atom[i].occupancy = occupancy;
         atom[i].tempFactor = tempFactor;
         i++;
      }
   }
   fclose(file);
   for (j = 0; j < i; j++)
   {
         printf("%s ", atom[j].atm);
         printf("%d ", atom[j].serial);
         printf("%s ", atom[j].name);
         printf("%s ", atom[j].resName);
         printf("%d ", atom[j].resSeq);
         printf("%lf ", atom[j].x);
         printf("%lf ", atom[j].y);
         printf("%lf ", atom[j].z);
         printf("%lf ", atom[j].occupancy);
         printf("%lf\n", atom[j].tempFactor);
   }

   return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:30:51.723

在 while 循环中，您需要为每个名称的每个 char* 分配新内存。您现在正在覆盖它们。

```
while (fgets(buff, sizeof buff, file) != NULL) 
{

    char *atm = malloc(sizeof(char) * 5); 
    char *name = malloc(sizeof(char) * 3); 
    char *resName = malloc(sizeof(char) * 4); 

    if (sscanf(buff, "%s %d %s %s %d %lf %lf %lf %lf %lf", 
             atm, &serial, name, resName, &resSeq, &x, &y, &z, 
             &occupancy, &tempFactor) == 10) 
```

您正在复制 char 数组（指针），因此所有名称都应该相同（最后一个条目）。

# linux - Oprofile callgraph：系统调用的起源

> ID：15766674
> 
> 赞同：2
> 
> 时间：2013-04-02T14:24:58.737
> 
> 标签：linux, profiling, oprofile

我一直在使用 oprofile 试图找出为什么我的程序在内核中花费了这么多时间。我现在有来自内核的符号，但显然我的程序和内核之间没有链接可以告诉我我的程序的哪些部分花费了这么长时间。

```
samples  %        image name               app name                 symbol name
-------------------------------------------------------------------------------
  201       0.8911  vmlinux-3.0.0-30-generic vmlinux-3.0.0-30-generic _raw_spin_lock_irq
  746       3.3073  vmlinux-3.0.0-30-generic vmlinux-3.0.0-30-generic rb_get_reader_page
  5000     22.1671  vmlinux-3.0.0-30-generic vmlinux-3.0.0-30-generic default_spin_lock_flags
  16575    73.4838  vmlinux-3.0.0-30-generic vmlinux-3.0.0-30-generic _raw_spin_lock
22469    11.1862  vmlinux-3.0.0-30-generic vmlinux-3.0.0-30-generic __ticket_spin_lock
  22469    99.6010  vmlinux-3.0.0-30-generic vmlinux-3.0.0-30-generic __ticket_spin_lock [self]
  26        0.1153  vmlinux-3.0.0-30-generic vmlinux-3.0.0-30-generic ret_from_intr 
```

我从这里去哪里？如何发现程序中导致 __ticket_spin_lock 的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T00:21:40.280

Oprofile 获取堆栈样本。您需要做的不是查看它们的摘要，而是实际检查原始样本。例如，如果您将 30% 的时间花在内核中，那么如果您可以看到随机选择的 10 个堆栈样本，您可以期望其中 3 个或多或少地向您展示您如何进入内核的全部原因核心。

[*这样，您将看到*](https://stackoverflow.com/a/378024/23771)摘要或调用图不会向您显示的内容。

以防万一：由于`__ticket_spin_lock`99.6% 的时间都在堆栈上，因此在*您查看的每个堆栈样本上*，您将看到 99.6% 的概率是您如何进入该例程的。然后*，如果您真的不需要这样做*，您可能会获得 250 倍的加速。这就像从四分钟到一秒。使用“正确”或“自动化”的方法——得到结果。

补充：关于分析器的事情是它们很受欢迎，有些用户界面非常漂亮，但遗憾的是，这恐怕是“皇帝的新装”的案例。如果这样的工具找不到太多需要修复的地方，你会喜欢它，因为它说（可能是错误的）你写的代码接近最优。

有很多帖子推荐这个或那个分析器，但我不能指出任何声称使用分析器可以节省超过百分之几的时间，比如 40%。也许有一些。

我*从未*听说过首先使用探查器来获得加速，然后再次使用来获得第二次加速，依此类推。这就是你获得*真正*加速的方式——多重优化。一开始只是一个小性能问题的东西在你删除了一个更大的问题之后不再是小问题。这张图显示了通过消除六个问题，加速是如何接近三个数量级的。您不一定可以这样做，但不值得尝试吗？

![在此处输入图像描述](https://i.stack.imgur.com/vUzBe.jpg)

为进一步编辑道歉。我只是想表明很容易欺骗调用图。红线代表调用堆栈样本。在这里，A1 将所有时间都花在调用 C2 上，反之亦然。然后假设您保持相同的行为，但是您放入了“调度”例程 B。现在调用图丢失了 A1 在 C2 中花费的所有时间的信息，反之亦然。您可以轻松地将此示例扩展到多个级别。 ![在此处输入图像描述](https://i.stack.imgur.com/SbACH.jpg) 你可以说调用*树*会看到这一点。好吧，这就是你如何欺骗调用树的方法。A 将所有时间都花在调用 C 上。现在，如果 A 调用 B1、B2、... C 是隐藏的。 ![在此处输入图像描述](https://i.stack.imgur.com/1lKv0.jpg) 还有许多其他完全普通的编程实践会混淆这些工具，特别是当样本深度为 10-30 层且功能都很少时，但程序员仔细检查适量样本时无法隐藏这些关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T23:24:05.147

我同意迈克的回答：调用图不是检查问题根源的正确方法。您真正想要的是查看最热门样本的调用链。

如果您不想“手动”检查 oprofile 收集的原始样本，您可以使用 -g 选项使用[perf](https://perf.wiki.kernel.org/index.php/Main_Page)`record`命令重新运行您的应用程序，以收集堆栈跟踪。然后，您可以使用perf 命令显示带有[调用链注释的示例。](http://lwn.net/Articles/340010/)由于 perf 没有在全局调用图中聚合单个样本的调用链，因此您没有 Mike 的帖子中概述的一些问题。`report`

# java-ee-6 - 请求范围对象的 CDI 构造函数注入

> ID：15766675
> 
> 赞同：2
> 
> 时间：2013-04-02T14:25:01.310
> 
> 标签：java-ee-6, cdi

是否可以通过构造注入将请求范围的 CDI 组件注入应用程序范围的 CDI 组件？关键是，当应用程序范围的对象被实例化时，请求范围的对象可能不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T00:06:14.583

您可以自由地执行此操作，当您在其上调用业务方法时，您会得到一个注入的代理，该代理会获取/创建适当的实例。

# plsql - PL/SQL - 列值更新为 0 而不是数值

> ID：15766680
> 
> 赞同：0
> 
> 时间：2013-04-02T14:25:15.470
> 
> 标签：plsql, oracle11g, sql-update

```
Declare
v_cnt varchar2(20); 
v_cnd varchar2(20);
v_total varchar2(20);

begin

select count(emp_id) into v_cnt from emp1;
select count(emp_id) into v_cnd from emp2;
v_total:=v_cnt+v_cnd;

dbms_output.put_line('before');
dbms_output.put_line(v_total);

update emp3 set total_emp=v_total where dept_no=40;
commit;

dbms_output.put_line('after');
dbms_output.put_line(v_total);

end; 
```

在上面的程序中，total_emp 列的值被更新为 0 而不是数值。但是，当我使用 dbms_output 语句打印值时，对于这两种情况，before 和 after，我都得到了变量 v_total 的数值。

v_total 值未更新为表中的列值。

total_emp 的表列定义是 varchar2(20)。

此外，我尝试在上述语句中对 total_emp 列的值进行硬编码，并且它起作用了。

因此，问题是在更新语句中使用变量值时它没有更新到列。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:56:48.497

您声明的变量应该是 NUMBER 类型而不是 VARCHAR2，因为您打算在计算中使用它们。我还建议您添加一个异常处理程序来报告可能发生的任何错误。显示更新影响了多少行也是一个好主意。您可能希望将代码重写为：

```
Declare
  v_cnt NUMBER; 
  v_cnd NUMBER;
  v_total NUMBER;
begin
  select count(emp_id)
    into v_cnt
    from emp1;

  select count(emp_id)
    into v_cnd
    from emp2;

  v_total:=v_cnt+v_cnd;

  dbms_output.put_line('before');
  dbms_output.put_line(v_total);

  update emp3
    set total_emp=v_total
    where dept_no=40;

  DBMS_OUTPUT.PUT_LINE('Number of rows updated=' || SQL%ROWCOUNT);

  commit;

  dbms_output.put_line('after');
  dbms_output.put_line(v_total);
EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE('Exception: ' || SQLCODE || '  ' || SQLERRM);
    ROLLBACK;
end; 
```

分享和享受。

# python - 递归序列加法 Python

> ID：15766683
> 
> 赞同：1
> 
> 时间：2013-04-02T14:25:23.287
> 
> 标签：python, recursion, for-loop

我有点卡住了。

我正在尝试计算移动不同尺寸齿轮的距离，以便它们彼此对齐。我认为它是某种递归调用，但我不知道如何编写它。我有一个按齿轮顺序排列的半径列表

radiusList=[6,16,14,20,24,28]

所以 1 档 = 移动距离 = 0
2 档移动距离 = 0 + 6 + 16
3 档 = 0 +6 + 16 +16 + 14
4 档 = 0 +6 + 16 + 16 + 14 + 14 + 20
5 档 = 0 +6 + 16 + 16 + 14 + 14 + 20, +20 ,+ 24
第 6 档 = 0 +6 + 16 + 16 + 14 + 14 + 20, +20 ,+ 24 + 24 +28 等等

...另一件事是我需要更新它 - 现在关系到半径大小和齿轮数量。但是我不知道如何处理它。任何帮助将不胜感激。谢谢你。

更新：谢谢大家，我最后写了这样的东西。虽然看起来有点啰嗦。

```
def createmovesequence():
if numberofcogs == 0 :
    void
if numberofcogs == 1:
    newmovelist.append(0)
if numberofcogs == 2:
    newmovelist.append(0)
    newmovelist.append(radiusList[0])
    newmovelist.append(radiusList[1])
if numberofcogs >= 3:
    newmovelist.append(0)
    newmovelist.append(radiusList[0])
    #newmovelist.append(radiusList[1])
    for i in range(2, len(radiusList)):
        newmovelist.append(radiusList[i-1])
        newmovelist.append(radiusList[i-1])
    newmovelist.append(radiusList[-1]) 
```

# elif numberofcogs != len(radiusList): # print 'error'
print newmovelist

# 创建移动序列（）

我唯一的另一个想法是类似于带有很多 if 语句的 for 循环......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:00:52.410

这是一个有趣的问题。这是一个没有递归的解决方案：

```
>>> gears = [6,16,14,20,24,28] 

>>> def distance(n, radius):
...    return sum(gears[:n] + gears[1:n-1])

>>> distance(1, gears) == 6
True

>>> distance(2, gears) == 6 + 16
True

>>> distance(3, gears) == 6 + 16 + 16 + 14
True

>>> distance(4, gears) == 6 + 16 + 16 + 14 + 14 + 20
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:46:53.377

```
def dist(n, radiusList):
  if n <= 1:
    return 0
  return dist(n-1, radiusList) + radiusList[n-1] + radiusList[n-2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T22:30:02.527

您可能想看到的循环是：

```
gear = 4    # which gear
total = 0   # distance. we start from zero

# for each idx such that 0 <= idx < gear…
for idx in xrange(gear):
    total += radiusList[idx]
    total += radiusList[idx+1] 
```

请注意循环如何以防万一`gear = 0`（因为没有这样的数字会小于零但至少等于零）。这可能是最明确的表示法，但是 hcalves 的表示法更短，学习它也会对你有所帮助。

# node.js - node.js 中如何同时写入流和读取数据？

> ID：15766688
> 
> 赞同：0
> 
> 时间：2013-04-02T14:25:29.070
> 
> 标签：node.js, concurrency, stream

我有一个 node.js 流，我暂时将其写入这样的数组：

```
var tempCrossSection = [];

stream.on('data', function(data) {
    tempCrossSection.push(data);
}); 
```

然后我定期获取该数组中的数据（并清除它）并对其进行一些处理，如下所示：

```
var crossSection = [];

setInterval(function() {
    crossSection = tempCrossSection;
    tempCrossSection = [];

    someOtherFunction(crossSection, function(data) {
        console.log(data);
    }
}, 30000); 
```

问题是我得到了一些奇怪的行为，流被写入数组的顺序以及随着流速率增加和/或 someOtherFunction 回调花费太长时间而触发的 setInterval 回调的数量。

我应该如何实现这一点，以便流正确地将数据写入数组（按顺序），并且每个 setInterval 回调都进行一次数据处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:33:27.953

您的代码存在一些问题。首先，你分享给很多国家。例如 crossSection 应该在匿名的 Interval 函数中单独定义。为什么将“crossSection”定义为闭包？如果 someOtherFunction 运行很长时间，您可能确实会遇到某种竞争条件。

```
var source = [];

stream.on('data', function(data) {
    source.push(data);
});

setInterval(function() {
    var target = source;
    source = [];

    someOtherFunction(target, function(data) {
        console.log(data);
    }
}, 30000); 
```

如果您可以访问**someOtherFunction**那么我会像这样重写整个内容

```
var source = [];

stream.on('data', function(data) {
    source.push(data);
});

setInterval(function() {
    var processing = true;

    while (processing) {
        var elem = source.shift();
        someOtherFunction(elem, function(data) {
            console.log(data);
        });
        processing = checkForBreakConditionAndReturnFalseIfBreak();
    }
}, 30000); 
```

如果元素的数量很大并且**someOtherFunctions**需要很长时间，您仍然可能会遇到一些问题。所以我可能会做这样的事情

```
var source = [];
var timerId = 0;

stream.on('data', function(data) {
    source.push(data);
});

function processSource() {
    clearTimeout(timerId);
    var processing = true;

    while (processing) {
        var elem = source.shift();
        someOtherFunction(elem, function(data) {
            console.log(data);
        });
        processing = checkForBreakConditionAndReturnFalseIfBreak();
    }
    setTimeout(processSource, calcTimeoutForNextProcessingDependentOnPastData());
};

setTimeout(processSource, 30000); //initial Timeout 
```

# java - 从字符串构造函数获取枚举值

> ID：15766690
> 
> 赞同：0
> 
> 时间：2013-04-02T14:25:32.333
> 
> 标签：java, enums

在 Java 中，我试图从字符串中获取枚举值。

例如我得到：

`MESSENGERINIT("@L")`

这也在枚举中：

```
private String header;

private ServerPackets(String header) 
{
    this.header = header;
}

public String getHeader()
{
    return this.header;
    //more code here.
} 
```

但如果我尝试使用：

```
System.out.println("[" + ServerPackets.valueOf(header) + 
    "] - Received unregistered header " + 
    Base64Encoding.decode(header) + "(" + header + ") with body " + 
    connection.reader.toString()); 
```

我收到此错误：

```
java.lang.IllegalArgumentException: No enum constant 
com.kultakala.communication.ServerPackets.@L
    at java.lang.Enum.valueOf(Unknown Source)</code> 
```

错误消息是什么意思，我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T14:27:05.557

`Enum.valueof(String)`使用枚举器的名称——MESSENGERINIT——而不是传递给构造函数的字符串。

如果要将其他字符串映射到枚举器，请考虑在枚举器类中创建静态映射。

例如：

```
enum ServerPackets {
...

private static Map<String,ServerPackets> s_map = new HashMap<String,ServerPackets>();
static {
    map.put( "@L", MESSENGERINIT);
    ...
}
public ServerPackets getEnumFromHeader( String header ) {
   return map.get( header );
} 
```

# windows - 用于将文件从一台服务器移动到另一台服务器超过 45 天的批处理脚本

> ID：15766691
> 
> 赞同：0
> 
> 时间：2013-04-02T14:25:32.897
> 
> 标签：windows, batch-file

有人可以帮助编写 Windows 批处理脚本以将超过 45 天的文件从一个系统移动到另一个系统，该系统已添加到网络和域中。

示例：将超过 45 天的文件从 System1 的文件夹 A、B、C 移动到 System 2 的 A、B、C。

我试过运行下面的代码，但是如果我的源和目标是同一台服务器，它工作正常，但是当源和目标是不同的服务器时它不起作用。Server2 文件夹，即 A，B 是共享文件夹，Server1 可以访问它

```
@echo off & setlocal enableextensions
net use m: "\\System2\d$\A\"
Forfiles -p \\System1\d$\A -s -m *.* -d -45 -c "cmd /c move /y @FILE m: & echo %Date% Source File: @PATH to \\System2\d$\A\">>D:\Test\logfile.txt
net use /delete m:
net use n: "\\System2\d$\B\"
Forfiles -p \\System1\d$\B -s -m *.* -d -45 -c "cmd /c move /y @FILE n: & echo %Date% Source File: @PATH to \\System2\d$\B\">>D:\Test\logfile.txt
net use /delete m:
GOTO :eof 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:41:36.513

看看`robocopy.exe`。它是自 Vista/Server 2008 以来标准安装的一部分。它具有命令行参数，可用于选择特定年龄的文件。键入`robocopy /?`以获取详细信息。

# symfony - 为 oneToMany 关联分配默认值

> ID：15766693
> 
> 赞同：0
> 
> 时间：2013-04-02T14:25:35.277
> 
> 标签：symfony, doctrine-orm

我有一个基本的 Symfony2/Doctrine2 问题。我有两个实体，第一个称为“列”，有 OneToMany 问题，实体“问题”。并且 Issue 实体与实体 Column 具有多对一关系。当我创建一个新问题时，我希望为该列分配一个默认值。

如果我在 IssueType.php 中创建一个隐藏字段并分配了一个默认值，我将无法保存提交的表单，因为我收到一个关于将字符串分配给 setColumn 而不是我的问题实体中定义的 Column 实体实例的错误（见下文） .

```
public function setColumn(\WebConfection\ServiceDeskBundle\Entity\Column $column)
{
    $this->column = $column;

    return $this;
} 
```

任何人都可以就实现这一目标的最佳方法提出建议吗？我读过几篇文章，但有点困惑，不知道该跳哪条路。一个白痴友好的答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:54:51.020

你真的不需要一个隐藏的字段来工作。只需在您要在操作中添加的问题上设置正确的（默认）列，

```
// ...
$issue = new Issue();
$issue->setColumn($yourDefaultColumn);

$form = $this->createForm('your_issue_form', $issue);
// ... 
```

# php - 计算列中行的值并使用PHP中的总值

> ID：15766694
> 
> 赞同：0
> 
> 时间：2013-04-02T14:25:42.267
> 
> 标签：php, mysql

我知道这很简单。我只是忘记了一些事情。

我正在计算我的数据库的“numberattending”列中的行的值。当我运行 SQL 语句时

```
SELECT COUNT(numberattending) AS Total FROM RSVP 
```

在 mySQL 窗口中，我得到了我正在寻找的总数。

当我尝试提取该值并回显“num_seats”时，我得到“Resource id #3”

```
$num_seats = mysql_query("SELECT COUNT(numberattending) AS Total FROM RSVP", $connection);

echo $num_seats; 
```

我错过了什么？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:27:57.137

您需要遍历结果集：

从 PHP 站点：

> // 使用结果 // 尝试打印 $result 将不允许访问资源中的信息 // 必须使用 mysql 结果函数之一 // 另见 mysql_result()、mysql_fetch_array()、mysql_fetch_row() 等。

```
$num_seats = mysql_query("SELECT COUNT(numberattending) AS Total FROM RSVP", $connection);

while ($row = mysql_fetch_assoc($num_seats )) {
    echo $row['total'];

} 
```

PS：正如其他人肯定会告诉你的那样，这些`mysql*`功能的使用已被弃用。`mysqli`而是寻找功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:29:07.160

`$num_seats`表示 MySQL 资源，而不是所选字段的值。您需要使用其中一个[`mysql_fetch_array()`](http://php.net/manual/en/function.mysql-fetch-array.php)或[`mysql_fetch_object()`](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://php.net/manual/en/function.mysql-fetch-object.php&ei=U-taUcLeJOjJ0AWdmICQAw&usg=AFQjCNE5tUE_riH_Y0ZPms6ex3BGd-ISyQ&sig2=t27q3N4Js0N4zvjacUW3fA&bvm=bv.44442042,d.d2k)根据您的喜好使用。

例如：

```
$number = mysql_fetch_array($num_seats);
echo $number['Total']; 
```

还值得注意的是，`mysql_*`现在不推荐使用函数系列，您应该真正使用[MySQLi](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDEQFjAA&url=http://php.net/manual/en/book.mysqli.php&ei=a-taUY36LOLW0QW-noCQAw&usg=AFQjCNEqr4MIMr-la3jWWjZ1PQbJFnyFHw&sig2=JnWNe29noXLYeQCXhCbWrQ&bvm=bv.44442042,d.d2k)或[PDO](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://php.net/manual/en/book.pdo.php&ei=X-taUc3LCcOk0QWszoHoDw&usg=AFQjCNFIwSE1mNG_k_lj0510AL_SsZs5Vg&sig2=SmyaCVJw1I23avjB2JH5VQ&bvm=bv.44442042,d.d2k)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:29:27.440

尝试

```
 $query = mysql_query("SELECT COUNT(numberattending) AS Total FROM RSVP", $connection);

    $result = mysql_fetch_row($query);

    echo $result['Total']; 
```

# templates - 在没有模板的 SaaS 中使用 Backbone.js

> ID：15766696
> 
> 赞同：1
> 
> 时间：2013-04-02T14:25:46.500
> 
> 标签：templates, backbone.js, view, saas

我正在设计一个 SaaS 应用程序，并已被定向到 Backbone.js。该服务部分跟踪 DOM 事件，例如每个事件发生了多少，然后根据此信息应用分数。

将数据解耦为模型和集合非常吸引人，但在我深入研究之前，我想问问它是否是适合这项工作的工具。

我想使用以站点所有者页面的 HTML 编写的现有 DOM 元素，而不是创建 JavaScript 模板。因此，我将跟踪现有元素上的 DOM 事件，然后更新数据模型。使用该服务的站点所有者将能够使用模型中的数据来创建他们自己的视图并根据他们的需要呈现他们自己的模板。

我知道我将需要使用 Backbone.View 来跟踪事件，从我目前所读的内容来看，[Backbone 似乎可以灵活](http://lostechies.com/derickbailey/2011/11/09/backbone-js-object-literals-views-events-jquery-and-el/)地允许这样做。但是，在我对 Backbone 的研究中，我还没有看到任何用于跟踪多个表单元素上的一系列事件的示例。

以这段代码为例：

```
App.Models.Event = Backbone.Model.extend({
    defaults: {
        clicks: 0,
        dblClicks: 0,
        tabs: 0,
        kbdFunctions: 0
    },

    urlRoot: 'events'
});

App.Views.Event = Backbone.View.extend({
    model: new App.Models.Event(),

    events: {
        'click input' : 'clickCount',
        'dblclick input' : 'dblClickCount',
        'tabEvent input' : 'tabCount',
        'kbdEvent input' : 'kbdEventCount'
    },

    initialize: function () {
        this.el = $('[data-transaction=start]');
    },

    clickCount: function (e) {
        console.log('click counted');
    },

    dblClickCount: function (e) {
        console.log('double click counted');
    },

    tabCount: function (e) {
        console.log('tab counted');
    },

    kbdEventCount: function (e) {
        console.log('keyboard event counted');
    }
}); 
```

我希望能够跟踪单击、双击、选项卡和其他自定义键盘事件，这些事件发生在`input`, `textarea`,`select`选项上并且`button`包含在`[data-transaction=start]`元素中。首先，这是否适用于 Backbone，其次，如果是，那么在 Backbone.View 事件对象文字中添加多个元素的最佳方法是什么？我在文档或其他任何地方都没有看到任何这样的例子，但如果我可以在其中添加一个变量会很好：

```
...
var someVariable = input, textarea, select, button;

events: {
    'click someVariable' : 'clickCount',
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:32:52.273

事件由 Backbone 使用`delegateEvents`视图中的方法分配。此方法在您的视图初始化方法（[代码参考](http://backbonejs.org/docs/backbone.html#section-119)）之后调用

所以你可以在视图构造函数中传递你的变量

```
myView = new App.Views.Events ( someVariable ) 
```

在您的初始化方法中，您可以分配事件：

```
initialize: function(someVariable) {
    //assign this.events from someVariable as you would like

} 
```

**编辑：**

只需阅读 Backbone 文档：

> **events**属性也可以定义为返回事件哈希的函数，以便更容易以编程方式定义事件，以及从父视图继承它们。

# json - struts2-jquery-tree-plugin 中的属性 rootNode 不运行

> ID：15766698
> 
> 赞同：2
> 
> 时间：2013-04-02T14:25:50.407
> 
> 标签：json, jquery-plugins, struts2, tree

我正在测试 struts2 **jquery-grid-tree 插件**，但是当我渲染一棵树的信息来自 JSON 格式的操作时，我遇到了一些麻烦。

由于我想从我的操作中获取更多信息用于其他目的，我的操作不仅返回树节点信息，还返回其他关于操作 ACK 的信息，依此类推......

这是我的行动结果的一个例子：

```
{"JSON":"success", "nodes":[{id":"001", "children":null,"data":{"title":"First element "}, "icon" : null,.... 
```

所以在我的树标签中，我尝试告诉插件使用“rootNode”属性从动作响应中的“nodes”属性中检索信息，以这种方式：

```
 <sjt:tree       
  href="%{testJSONTreeAction}"
  id="testTreeWithCheckbox" 
  rootNode="nodes"
  childCollectionProperty="children"
  .... 
```

但它不起作用。

**它运行良好的唯一方法**是如果我的响应仅返回有关我的树的信息，如下所示：

```
[{"attr":{"id":"001"},"children":null,"data":{"title":"First element"}... 
```

我的意思是，只是节点信息。

当然，我可以像上面那样管理响应的格式，但我想知道这个属性是做什么用的。其他标签（如网格标签）具有此属性（gridModel）并且工作正常，但我在树标签文档中找不到它。

我已经看到了一些像[这里](http://struts2-jquery-plugin.109969.n3.nabble.com/Issue-576-in-struts2-jquery-Bug-TreeNode-case-quot-Tree-with-Types-quot-does-not-work-when-quot-roott-td3124891.html)这样的相关错误，但它们是关于旧版本的，我正在尝试**插件的最后一个版本，3.5.1。**

提前致谢，

# asp.net-mvc - 我如何知道所选文件的物理路径（文件上传引导程序）

> ID：15766699
> 
> 赞同：0
> 
> 时间：2013-04-02T14:25:54.653
> 
> 标签：asp.net-mvc, twitter-bootstrap, model-view-controller, file-upload

我正在 MVC 中制作一个 Web 应用程序，我有一个视图，我从我的 pc 目录中选择一个文件（如 Windows 应用程序中的 opendialog 表单），bootstrap 的 fileupload 获取文件名，但我想知道他的物理路径。因为我想将它保存在我的数据库中（文件来自哪里）。

任何人都可以帮助我？？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:28:33.403

您不能，出于明显的安全原因，此信息永远不会发送到服务器。只有文件名被发送到服务器。因此，您无法在服务器上存储文件源自客户端计算机的物理路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:28:47.763

当您通过网络浏览器上传文件时，不会提供实际的文件路径。这被视为一项安全功能。

没有办法使用纯 HTML 来规避这一点。有些人通过使用 Flash 或 Silverlight 等插件上传文件来绕过它，但如果可以的话，我建议使用此功能。

# android - Servlet 无法识别来自 android 应用程序的会话

> ID：15766711
> 
> 赞同：0
> 
> 时间：2013-04-02T14:26:15.203
> 
> 标签：android, session, servlets

我有和 sevlet 对话的 android 应用程序。登录是会话的，我能够生成 sessionid 和 sessionname 并将其传递给应用程序。我在登录页面中设置 sessionid 和 sessionname，像这样

```
session.setAttribute("sessionid",session.getId());
session.setAttribute("sessionname","name"); 
```

我正在从应用程序接收这些东西。但是当我做的时候在servlet中

```
String id = session.getAttribute("sessionid"); 
```

它返回`null`。

这是如何引起的，我该如何解决？

**更新：**

对于后续请求，我将 sessionid 和 sessionname 作为 httppost 中的标头发送。

像这样。

```
sessionname has the sessionname value received from the server.
and sessionid has the sessionid value received from the server.
httppost.setHeader("Session",sessionname+"="+sessionid); 
```

在服务器端，我得到了这样的东西

```
String session = request.getHeader("Session");
String sessionname  = session.substring(0,session.indexOf("="));
String sessionid = session.substring(session.indexOf("=")); 
```

所以现在我在这些变量中同时获得了 sessionname 和 sessionid，我像这样将它们与会话对象进行检查

```
if(session.getAttribute("sessionname").equals(sessionname) && session.getAttribute("sessionid").equals(sessionid)) 
```

这是我得到空值的地方。不是针对我采用的变量，而是针对会话对象方法， `getAttribute("sessionname") and getAttribute("sessionid")` 返回 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:07:33.307

```
String cookie = CookieManager.getInstance().getCookie("http://mydomainname.com"); 
```

获取此连接的 cookie，并在您的连接中添加此 cookie，这将为它提供您的连接会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:43:16.347

尝试在 url 中发送会话 ID，如 ....;jsessionid=xxx

# html - 通过 wget 登录网站

> ID：15766714
> 
> 赞同：2
> 
> 时间：2013-04-02T14:26:19.567
> 
> 标签：html, batch-file, cmd, html-parsing, wget

在在这里发布问题之前，我已经进行了 2 周的研究。我可以访问它，但它需要登录才能访问内容。

我想知道如何通过 wget 登录并通过 wget 访问它的内容？这是基本的html登录。

**这是网站的html代码。**

```
<div id="loginh">
                    <div id="form">
                    <form name="frmLogin" action="/en/login.shtml" method="post">
                        <input type="hidden" name="login_attempt" value="yes">
                        <input type="hidden" name="redirect" value="/en/index.shtml">
                        <input type="text" name="login_username" class="txtBox1" title="Enter your user name" id="username" value="User name" onfocus="clickLoginField(this);" onkeypress="javascript:if ((event.which &amp;&amp; event.which == 13)||(event.keyCode &amp;&amp; event.keyCode == 13)) {document.frmLogin.login_password.focus(); return false;}">
                        <input type="password" name="login_password" class="txtBox2" title="Enter your password" id="pass" value="" onkeypress="javascript:if ((event.which &amp;&amp; event.which == 13)||(event.keyCode &amp;&amp; event.keyCode == 13)) { document.frmLogin.submit(); return false;}">
                        <input type="text" id="login_password_" name="login_password_" class="loginattemptstyle" value="">
                        <a class="login" href="javascript:void(0);" onclick="document.frmLogin.submit();">Login</a><noscript>&lt;input type="submit" value="Login"/&gt;</noscript>
                        <div class="clear"></div>
                        <table width="100%" cellpadding="5">
                            <tbody><tr>
                                <td><a href="/en/forgottenpassword.shtml" title="Have you forgotten your password?">Forgotten password?</a></td>
                                <td><table width="100%">
                                    <tbody><tr>
                                        <td><input type="checkbox" name="login_remember" style="margin-left: 0; margin-right: 5px;"></td>
                                        <td>Stay signed in</td>
                                    </tr>
                                </tbody></table></td>
                            </tr>
                        </tbody></table>
                    </form>
                    </div>
                    <script language="JavaScript" type="text/JavaScript">
                    <!--
                    $("#login_password_").val('1tCRztiXpM5jpmefqdWYn4O/ipyn5KWUneZoag==');
                    //-->
                    </script>
                </div> 
```

**我试过的**

```
wget -q -O-  save.txt --load-cookies cookies.txt http://mysite.com/en/article1.shtml | findstr /i "'streamer'" > save3.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:31:24.437

您将需要执行 POST 而不是 GET REQUEST

看一下这个：

[wget 发布数据中的变量](https://stackoverflow.com/questions/8599760/variables-in-wget-post-data)

编辑：

如果你会使用 PHP，我会推荐你​​使用 Snoopy PHP [http://snoopy.sourceforge.net](http://snoopy.sourceforge.net)

它模拟了一个 Web 浏览器，允许您进行进一步的机器人导航和 html 检索。它还模拟 Cookie

编辑2：

如果您不打算使用 PHP，则需要使用 CURL（下面有下载链接）。使用它，您将能够检索已发布登录页面的 html。

[http://curl.haxx.se/download.html](http://curl.haxx.se/download.html)

基本用法1：http: [//curl.haxx.se/docs/httpscripting.html](http://curl.haxx.se/docs/httpscripting.html)

使用 curl 和 POST 的堆栈溢出帖子：使用 [cURL 登录 POST 表单](https://stackoverflow.com/questions/6728356/login-post-form-with-curl)

代码示例： [http ://www.yilmazhuseyin.com/blog/dev/curl-tutorial-examples-usage/](http://www.yilmazhuseyin.com/blog/dev/curl-tutorial-examples-usage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T08:36:12.413

我使用 lynx 和 wget 来解决这个问题。请阅读这篇文章的最后一个答案。

[如何使用 Wget 越过登录页面？](https://stackoverflow.com/questions/1324421/how-to-get-past-the-login-page-with-wget/46825714#46825714)

# java - Java - 对特定主机的第一个 http 请求明显变慢

> ID：15766719
> 
> 赞同：4
> 
> 时间：2013-04-02T14:26:43.077
> 
> 标签：java, benchmarking, apache-httpclient-4.x, apache-httpcomponents

我正在编写一个基准测试工具来针对 Web 应用程序运行。我面临的问题是对服务器的第一个请求总是比后续请求花费更长的时间。[我在使用 apache http 客户端 3.x、4.x 和Google http 客户端](https://code.google.com/p/google-http-java-client/)时遇到过这个问题。apache http 客户端 4.x 显示出最大的差异（第一个请求大约比后续请求长 7 倍。对于 Google 和 3.x，它大约长 3 倍。

我的工具必须能够用线程对同时请求进行基准测试。我不能使用例如 HttpClient 的一个实例并从所有线程中调用它，因为这会引发并发异常。因此，我必须在每个线程中使用一个单独的实例，它只会执行一个请求。这极大地改变了整体结果。

我不明白这种行为。我不认为这是由于服务器上的缓存机制造成的，因为 a) 所考虑的 web 应用程序没有使用任何缓存（据我所知）b) 这种效果在第一次请求 www.hostxy.com 时也是可见的，之后www.hostxy.com/my/webapp。

我分别在调用`client.execute(get)`or之前和之后使用 System.nanoTime() 。`get.execute()`

有谁知道这种行为来自哪里？这些httpclients自己做缓存吗？我将非常感谢任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T11:52:05.607

如果您的问题是“对特定主机的第一次 http 请求明显较慢”，则可能导致此症状的原因在服务器上，而您关心的是客户端。

如果您正在调用的“特定主机”是 Google App Engine 应用程序（或任何其他云平台），那么第一次调用该应用程序会让您多等一会儿是正常的。那是因为谷歌在不活动时将其置于休眠状态。

在最近一次调用之后（通常需要更长的响应时间），后续调用的响应速度更快，因为服务器实例都处于唤醒状态。

看看这个： [Google App Engine 应用程序非常慢](https://stackoverflow.com/questions/1854821/google-app-engine-application-extremely-slow)

希望对你有帮助，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:48:45.453

您是在服务器启动后第一次访问 JSP 吗？如果服务器在每次启动时刷新它的工作目录，那么第一次点击 JSP 编译并且需要很长时间。

同样在第一个事务上完成：如果事务使用 ca cert trust store，它将被加载和缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:07:49.447

你最好看看它关于缓存 [http://hc.apache.org/httpcomponents-client-ga/tutorial/html/caching.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/caching.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:30:49.337

阅读此：[http](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html) ://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html用于连接池。

您的第一个连接可能花费的时间最长，因为它是一个 Connect: keep-alive 连接，因此一旦建立，后续连接可以重用该连接。这只是猜测

# c# - Windows 8 模态进度对话框（如带有自己的内容和按钮的消息框......）

> ID：15766729
> 
> 赞同：2
> 
> 时间：2013-04-02T14:27:14.070
> 
> 标签：c#, windows-8, microsoft-metro

我想在 c#metro 应用程序中启动异步操作，我想用 ProgressRing 显示模态对话。

有什么简单的方法可以做到吗？或任何最佳实践如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T23:46:09.790

WinRT 中的模式对话框类是[MessageDialog](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.popups.messagedialog.aspx)。以下是[使用对话框的最佳实践](http://msdn.microsoft.com/en-US/library/windows/apps/hh738363)。

[在http://code.msdn.microsoft.com/windowsapps/Message-dialog-sample-00c928f5](http://code.msdn.microsoft.com/windowsapps/Message-dialog-sample-00c928f5)有一个消息对话框的代码示例。

# asp.net - 如何在列表元素中定位按钮？

> ID：15766744
> 
> 赞同：1
> 
> 时间：2013-04-02T14:27:48.417
> 
> 标签：asp.net, html, css, html-lists

我有一个包含 2 个项目的简短有序列表。在第二个项目中，我想在右侧放置一个按钮。CSS给我带来了麻烦，所以我在这里发布它，希望有更熟练的人可以提供帮助。

这是标记：

```
<ol>
    <li>Go here to  <a href="review.aspx">perform an internal review</a>.</li>
    <li>When satisfied with the internal review, click the button on the right and then go to the Staging environment for a final review.<span style="width: 25%; display: block;float: right;" ><asp:Button runat="server" runat="server" ID="StageChanges" Text="Stage Changes" OnClick="StageChanges"/></span></li>
</ol> 
```

理想情况下，我希望按钮与列表元素 2 内联。列表元素 2 的文本应适当换行。现在该按钮位于第二个列表元素下方。

我尝试了几种变体，但似乎没有任何效果。一种变体包括指定第二个列表元素的宽度，但这会删除数字 2 的显示（或将其移至按钮前面）。

先感谢您！

编辑添加图像： ![在此处输入图像描述](https://i.stack.imgur.com/bvGza.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:37:07.750

当我将您的代码剪裁一点时，它的效果非常好。该按钮被定位在第二个列表元素的内联：

```
<li>
    When satisfied with the internal review, click the button on the right and then go to the Staging environment for a final review.
    <button>Stage Changes</button>
</li> 
```

请记住，按钮是少数几个从其包装的内容而不是从文本属性中获取文本的表单元素之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:31:00.603

为列表项添加 CSS

```
ol li{
display: inline-block;
} 
```

# git - 回滚远程上的最后一次提交

> ID：15766752
> 
> 赞同：1
> 
> 时间：2013-04-02T14:28:07.053
> 
> 标签：git, push, git-push, git-reset

我想完全按照这个[问题](https://stackoverflow.com/questions/4647301/rolling-back-local-and-remote-git-repository-by-1-commit)的要求去做。

我尝试了答案，但没有奏效。这是我所做的（我是大师）：

检查我的本地是否等于远程：

```
> git fetch
> git log ..origin/master
> git log origin/master.. 
```

两者都为空输出。然后：

```
> git reset HEAD^ --hard
HEAD is now at *SHA1* *Commit message*
> git push -f
Total 0 (delta 0), reused 0 (delta 0)
remote: error: denying non-fast-forward refs/heads/master (you should pull first)
To *Remote path*
 ! [remote rejected] master -> master (non-fast-forward)
error: failed to push some refs to '*Remote path*' 
```

# html - 表标签内的 div 标签内的嵌套表标签

> ID：15766765
> 
> 赞同：0
> 
> 时间：2013-04-02T14:28:37.077
> 
> 标签：html, html-table

我有以下**讨厌的**布局：

```
<table style="width: 100%; word-wrap: break-word; table-layout: fixed">
    <tbody>
        <tr>
            <td class="td1">
                <div class="div1">
                    <br>
                    <div style="font-family: calibri,tahoma,arial; font-size: 14px">
                        <div style="padding-bottom: 4px; padding-left: 4px; padding-right: 4px; padding-top: 4px"
                            id="06C" class="common">
                            <span class="display"><span style="font-weight: bold; text-decoration: underline">Reviewer</span></span>
                            <div id="B5E" class="common">
                                &nbsp;</div>
                            <div style="padding-bottom: 2px; margin-top: 5px; padding-left: 2px; padding-right: 2px;
                                margin-left: 8px; padding-top: 2px" id="4FD" class="common">
                                <span class="display"><span style="text-decoration: underline">Consent</span></span>
                                <div id="692" class="common">
                                    &nbsp;</div>
                            </div>
                            <div style="padding-bottom: 2px; margin-top: 5px; padding-left: 2px; padding-right: 2px;
                                margin-left: 8px; padding-top: 2px" id="CF6" class="common">
                                <span class="display"><span style="text-decoration: underline">Indication</span></span>
                                <div id="C17" class="common">
                                    &nbsp;</div>
                            </div>
                            <div style="padding-bottom: 2px; margin-top: 5px; padding-left: 2px; padding-right: 2px;
                                margin-left: 8px; padding-top: 2px" id="59C" class="common">
                                <span class="display"><span style="text-decoration: underline">Location</span></span>
                                <div id="347" class="common">
                                    &nbsp;</div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <div class="div2">
                    <span><span style="font-family: calibri; font-size: 10pt; font-weight: bold">
                        <br>
                        Completed by:</span></span><br>
                    <span style="font-family: calibri; font-size: 10pt">* Mario Brothers&nbsp;on March 27,
                        2013 10:57 AM CDT
                        <br>
                        * Modified by Dennis Goliath on March 27, 2013 11:17 AM CDT </span>
                    <br>
                </div>
            </td>
        </tr>
    </tbody>
</table>
<table style="width: 100%; word-wrap: break-word; table-layout: fixed">
    <tbody>
        <tr>
            <td class="td2">
                <div class="table2" style="width: 100%; height: 100%">
                    <table style="word-wrap: break-word; table-layout: fixed">
                        <tbody>
                            <tr>
                                <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word;
                                    padding-top: 0px">
                                    Result:
                                </td>
                                <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word;
                                    padding-top: 0px">
                                    Orange
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word;
                                    padding-top: 0px">
                                    Date:
                                </td>
                                <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word;
                                    padding-top: 0px">
                                    March 27, 2013 10:57 AM CDT
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word;
                                    padding-top: 0px">
                                    Status:
                                </td>
                                <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word;
                                    padding-top: 0px">
                                    On Going
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word;
                                    padding-top: 0px">
                                    Title:
                                </td>
                                <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word;
                                    padding-top: 0px">
                                    Note
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word;
                                    padding-top: 0px">
                                    Author:
                                </td>
                                <td style="padding-bottom: 0px; padding-left: 0px; padding-right: 25px; word-wrap: break-word;
                                    padding-top: 0px">
                                    Mario Brothers&nbsp; on March 27, 2013 10:57 AM CDT
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </td>
        </tr>
    </tbody>
</table> 
```

是的，它是表格内的 div 内的表格...我知道...请原谅我 :)

我目前正在使用它作为我的[打印定制](http://msdn.microsoft.com/en-us/library/ms971257.aspx)的模板。

我注意到的问题是最后一个表的内容不打印。但是，当我删除包装表（并且只在 div 中保留一个表）时，它就可以工作了。

我怀疑这可能是由于 IE（顺便说一下，我绑定到 IE）如何呈现表格，但不确定。

我想了解发生了什么，所以我感谢您提供的任何信息。

# vb.net - 事务范围内的 Web 服务

> ID：15766766
> 
> 赞同：0
> 
> 时间：2013-04-02T14:28:38.517
> 
> 标签：vb.net, web-services, asmx

请看下面的代码：

```
DeleteEvent = Deletion.ExecuteDelete(id)
If DeleteEvent Then       
    Using Scope As New TransactionScope
        'Database update 1
        'Datbase update 2
        'Database update 3
            etc
        Scope.Complete()
    End Using
End If 
```

Deletion.ExecuteDelete 是对 ASMX Web 服务的调用。此 Web 服务是由第三方公司开发的，我无权访问代码。如果 Web 服务成功删除记录，我只希望发生三个数据库更新。如果发生三个数据库更新，我只希望 Web 服务删除记录。我怎样才能做到这一点？

我想说的是 Web 服务删除和三个数据库更新应该是一个原子单元。

# python - 在 2 个 Python 进程之间共享数据结构

> ID：15766767
> 
> 赞同：4
> 
> 时间：2013-04-02T14:28:41.920
> 
> 标签：python, data-structures, python-3.x, share, rpc

我有 2 个使用 Python 3 运行的应用程序/进程/脚本：有一些简单的 RPC 机制可以在这两个独立的进程之间共享列表、元组和数据结构？

确切地说，这两个进程在同一台机器上本地工作，但也可以与远程进程一起工作的通用解决方案将受到高度赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:33:11.443

如果您使用多处理启动流程，则可以跨流程边界共享`Array`和变量。`Value`

查看有关使用和的[这个 python 文档页面](http://docs.python.org/3.0/library/multiprocessing.html#sharing-state-between-processes)`shared memory``multiprocessing`

> ...
> 
> ```
> from multiprocessing import Process, Value, Array
> 
> def f(n, a):
>     n.value = 3.1415927
>     for i in range(len(a)):
>         a[i] = -a[i]
> 
> if __name__ == '__main__':
>     num = Value('d', 0.0)
>     arr = Array('i', range(10))
> 
>     p = Process(target=f, args=(num, arr))
>     p.start()
>     p.join()
> 
>     print(num.value)
>     print(arr[:]) 
> ```
> 
> ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-19T16:16:29.823

这里的值可以是

```
'c': ctypes.c_char,  'u': ctypes.c_wchar,
'b': ctypes.c_byte,  'B': ctypes.c_ubyte,
'h': ctypes.c_short, 'H': ctypes.c_ushort,
'i': ctypes.c_int,   'I': ctypes.c_uint,
'l': ctypes.c_long,  'L': ctypes.c_ulong,
'f': ctypes.c_float, 'd': ctypes.c_double 
```

因此初始化将根据它进行。

但参数 num 和 args 是强制性的。

# php - Codeigniter - 使用模型中查询结果中的 id 在同一模型中的不同函数中进行查询

> ID：15766768
> 
> 赞同：0
> 
> 时间：2013-04-02T14:28:46.207
> 
> 标签：php, codeigniter, function, model

我正在使用 codeigniter 对我的网站进行编码，但遇到了障碍。我知道如何在常规的非“MVC”中做到这一点，而不是 OOP PHP，但我在 Codeigniter 中苦苦挣扎。

我有 blog_model.php，它具有从我的数据库中检索日期时间的功能，将其分解为一个数组，以便我可以在模型之外使用它并将其提供给我有单独的日历图标的 CSS。每个日历图标都由视图中的月份编号加载 ( `<div class='calendar-icon-$stats['date']`)。此函数还从单个帖子中提取评论数量并将其输出到数组中，以便我可以在视图中显示它。

```
public function get_stats($id) {
  $this->db->select('id,datetime')->from('blog_posts')->where('id',$id);
  $dquery = $this->db->get();
  $dquery = $dquery->row_array();
  $date = date('Y-m-d', strtotime($dquery['datetime']));
  $stats = explode("-", $date); // This makes $stats[0] the year, $stats[1] the month and $stats[2] the day.
  $stats['time'] = date('H:i', strtotime($dquery['datetime']));
  $stats['comcount'] = $this->db->get_where('blog_comments', array('blogid' => $id));
  $stats['comcount'] = $stats['comcount']->num_rows();
  return $stats;
} 
```

还有一个函数可以检索三个最近的条目：

```
public function get_blog_last() {
  $query = $this->db->order_by('id desc')->get('blog_posts',3);
  return $query->result_array();
} 
```

然后将此代码加载到我的控制器中并发送到要显示的视图：

```
$data['blog'] = $this->blog_model->get_blog_last();
$data['stats'] = $this->blog_model->get_stats($data['blog']);
$this->load->view('index',$data); 
```

我面临的问题是如何让 get_stats() 函数为我在索引页面上的每个条目运行，其中显示了最后三个条目。到目前为止，我只能为其中一个运行它，因此我首页上的所有三个条目都有相同的日期、相同的时间和相同数量的评论。我认为将代码放入模型中可以避免重复自己，因为我必须为存档页面（我显示该月的所有帖子）和我只显示该条目及其评论的主条目页面加载它。

所以，这里的最终问题是：

*   如何为给定页面上的每个条目运行 get_stats？

我在确定传递给我的 get_stats() 函数的正确值时也遇到了一些问题。

任何指导将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:54:56.633

如果我的理解正确，您需要调用`get_stats`您收到的三个条目中的每一个`get_blog_last`。如果是这种情况，只需更改`get_blog_last`为：

```
public function get_blog_last() {
  $query = $this->db->order_by('id desc')->get('blog_posts',3);
  $entries = $query->result_array();         // get the latest entries array
  foreach ($entries as $index => $entry) {   // loop through those entries
    $stats = $this->get_stats($entry['id']); // call this model's `get_stats` method
    $entries[$index]['stats'] = $stats;      // add a `stats` key to the entry array
  }
  return $entries;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T15:03:20.287

你为什么不放

```
$this->blog_model->get_stats($data['blog']); 
```

内循环？（我宁愿使用普通循环）

例子 ：

```
$stat_list = array();
for($i=0;$i<count($data['blog']);$i++){
    $stat_list[] = $this->blog_model->get_stats($data['blog'][$i]);
}
$data['stats'] = $stat_list; 
```

在您看来，您应该尝试相同的方式打印出每个`$stat_list`

# internet-explorer - CSS 背景大小在 IE7/8 中不起作用

> ID：15766772
> 
> 赞同：9
> 
> 时间：2013-04-02T14:28:53.020
> 
> 标签：internet-explorer, css, internet-explorer-8, internet-explorer-7

出于某种原因，我的背景大小在 IE 7&8 中不起作用。谁能告诉我为什么。同样在 IE 检查器中， background-size 属性也没有显示出来。

```
<a href="" class="twitter-custom-follow-button"></a>

.twitter-custom-follow-button {
  float: left;
  width: 96px;
  height: 20px;
  background: url(../img/slices/btns/twitter_follow.png);
  background-size: 96px 20px;
  background-repeat: no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T14:30:23.117

这是因为IE9 之前[不支持](http://www.css3.info/preview/background-size/)`background-size`CSS3 属性。

**但是**，有一个线程建议了一种可能的解决方法： [How do I make background-size work in IE?](https://stackoverflow.com/questions/2991623/make-background-size-work-in-ie)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:30:28.840

IE 7/8 不支持该`background-size`属性.. 如果您想要相同的功能，您将需要使用 javascript

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:33:50.057

IE7/8 不支持`background-size`。它仅在 IE9 中引入。

如果你想用这个属性支持 IE7/8，你需要使用 polyfill 脚本。

我所知道的唯一支持的 polyfill`background-size`是[CSS3Pie](http://css3pie.com/) v2。搏一搏。（它还增加了对旧 IE 版本中没有的其他几个 CSS 功能的支持）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-18T10:53:44.480

使用这个代码

```
 filter:progid:DXImageTransferform.microsoft.AlphaImageLoader(src='img.jpg',sizingMethod='scale') 
```

# java - 使用 DOM 解析 XML 以获得第一级子节点

> ID：15766774
> 
> 赞同：0
> 
> 时间：2013-04-02T14:28:56.783
> 
> 标签：java, xml-parsing

我编写了这段代码来解析 XML 文件。我想以树（根、子、孙子）的形式打印 o/p。但是它将每个节点（子节点和孙节点）打印为根节点的子节点。

```
import java.io.File;
import org.w3c.dom.*;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;

public class Parsing{

public static void traverse (Node n) throws Exception
{
    // Extract node info:
    String TextNode = "TextNode";
    String AttrVal = "";
    int ind;
    String nodename = n.getNodeName();
    String valueStr = n.getNodeValue();
    Boolean bo = n.hasAttributes();

    String xml1 = "";

    if (valueStr != null)
        valueStr = valueStr.trim();
    // Print and continue traversing.
    if(!nodename.equals("#text"))
    {
        if(bo==true)
        {
            NamedNodeMap nm1 = n.getAttributes();
            if(valueStr==null)//If node has no value
                System.out.println(""+ n.getNodeName());
            else 
                System.out.println( "" + n.getNodeName() + "  Value = " + valueStr + " " );
                System.out.println( "\t\tAttributes: ");
            for(int i = 0 ; i<nm1.getLength() ; i++)
            {
                Attr attribute = (Attr)nm1.item(i);     
                AttrVal = attribute.getValue();
                ind = AttrVal.indexOf(":");
                ind++;
                System.out.println( "\t\t\t"  + attribute.getName()+" = "+attribute.getValue());

         }

        {
            if(valueStr==null)
                System.out.println (" " + n.getNodeName() );
            else
                System.out.println (" " + n.getNodeName() + "  Value = " + valueStr + " ");
        }   
    }
    else
    {
        if(!valueStr.equals(""))
        System.out.println (" "  + TextNode + "  Value = " + valueStr + " ");
    }    

    // Now traverse the rest of the tree in depth-first order.
    if (n.hasChildNodes()) 
    {
      // Get the children in a list.
      NodeList nl = n.getChildNodes();
      // No. of children
      int size = nl.getLength();
      for (int i=0; i<size; i++)
      // Recursively traverse each of the children.
      traverse (nl.item(i));
    }
}

public static void parse (String a1){
try 
    {
            System.out.println("Name"   +  a1);
            DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
            Document doc = docBuilder.parse (new File(a1));
            // normalize text representation
            doc.getDocumentElement ().normalize ();
            System.out.println ("Root element of the doc is " + doc.getDocumentElement().getNodeName());            
            Element root = doc.getDocumentElement();
            System.out.println("ROOT ELEMENT IS" + root);
            traverse (root);
    }

catch (Throwable t) 
    {
        t.printStackTrace ();
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:39:22.723

在方法遍历中添加参数int depth：

```
public static void traverse (Node n, int depth) throws Exception 
```

并在每次遍历节点的子节点时递增该值：

```
traverse(root,0); 
```

和

```
traverse(nl.item(i),depth+1); 
```

最后，根据 depth 的值修改您的打印语句以缩进。

# php - 未在 php 表单邮件程序中附加文件附件

> ID：15766777
> 
> 赞同：0
> 
> 时间：2013-04-02T14:29:08.640
> 
> 标签：php, forms, email-attachments

我正在使用 php 邮件表单，但在表单的文件附件方面遇到了问题。我已经搜索了这个论坛并尝试了一些东西，但它们没有工作，可能是因为我的代码有点不同。我的表单正在做的是连接到数据库并提取工作信息（标题城市州），以便用户不必填写该信息（他们通常会以某种方式弄错）。有人可以看看下面的代码，看看我做错了什么。没有错误，邮件通过，只是没有附加。先感谢您。

```
$con = mysql_connect("connection")

$id = $_GET['id'];

if ( isset( $_POST["submit"] )) {
if( $_POST || $_FILES ) 

//if "email" is filled out, send email
{
//send email
$subject = $_POST['subject'] ;
$title = $_POST['title'] ;
$firstname = $_POST['firstname'] ;
$middleinitial = $_POST['middleinitial'] ;
$lastname = $_POST['lastname'] ;
$email = $_POST['email'] ;
$subject = $_POST['subject'] ;
$city = $_POST['city'] ;
$state = $_POST['state'] ;
$phone = $_POST['phone'] ;
$resume = $_POST['attachment'] ;

$message = "
Position Info
--------------------------------
Title: $title
Location: $city $state

Applicant Info
--------------------------------
First Name: $firstname
Middle Initial: $middleinitial
Last Name: $lastname
E-mail: $email
Phone: $phone";

// boundary
$semi_rand = md5(time());
$mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

// headers for attachment
$headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";

// multipart boundary
$message = "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n"."Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";
fixFilesArray($_FILES['attachment']);
foreach ($_FILES['attachment'] as $position => $file) 
{
    // should output array with indices name, type, tmp_name, error, size
    $message .= "--{$mime_boundary}\n";
    $fp     = @fopen($file['tmp_name'],"rb");
    $data   = @fread($fp,filesize($file['tmp_name']));
    @fclose($fp);
    $data = chunk_split(base64_encode($data));
    $message .= "Content-Type: application/octet-stream; name=\"".$file['name']."\"\n"."Content-Description: ".$file['name']."\n" ."Content-Disposition: attachment;\n" . " filename=\"".$file['name']."\";size=".$file['size'].";\n"."Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
}
$message .= "--{$mime_boundary}--";
$returnpath = "-f" . $from;
$ok = @mail($to, $subject, $message, $headers, $returnpath);
if($ok){ return 1; } else { return 0; }
}
function fixFilesArray(&$files)
{
$names = array( 'name' => 1, 'type' => 1, 'tmp_name' => 1, 'error' => 1, 'size' => 1);

foreach ($files as $key => $part) {
    // only deal with valid keys and multiple files
    $key = (string) $key;
    if (isset($names[$key]) && is_array($part)) {
        foreach ($part as $position => $value) {
            $files[$position][$key] = $value;
        }
        // remove old key reference
        unset($files[$key]);
    }
}
}
}

$sql = "select id,title,city,state from employment where id = $id";
$res = mysql_query( $sql ) or die( 'Could not display records' );

if ( mysql_num_rows( $res ) > 0 ) {    

echo '<form method="post" enctype="multipart/form-data" action="http://careers-admin.dbiservices.com/index.php?content=appform">';
echo '<input type="hidden" name="subject" value="Job Application">';
while ( $row = mysql_fetch_assoc( $res ) ) {
echo '<table>';
echo '<tr><td align="right">';
    echo ' <b>Position Applying For</b></td><td> <input type="text" name="title" value="' . $row["title"] . '" size="30"> <br />' . "\n";
echo '<tr><td align="right">';
    echo ' <b>Location</b></td><td> <input type="text" name="city" value="' . $row["city"] . ' ' . $row["state"] .'" size="30"> <br />' . "\n";
echo '<tr><td align="right">';
    echo ' <b>First Name</b></td><td> <input type="text" name="firstname" size="30"> <br />' . "\n";
echo '<tr><td align="right">';
    echo ' <b>Middle Initial</b></td><td> <input type="text" name="middleinitial" size="5"> <br />' . "\n";
echo '<tr><td align="right">';
    echo ' <b>Last Name</b></td><td> <input type="text" name="lastname" size="30"> <br />' . "\n";
echo '<tr><td align="right">';
    echo ' <b>Email</b></td><td> <input type="text" name="email" size="30"> <br />' . "\n"; 
echo '<tr><td align="right">';
    echo ' <b>Phone</b></td><td> <input type="text" name="phone" size="30"> <br />' . "\n";
echo '<tr><td align="right">';
echo ' &nbsp;</td><td><em>In order to be considered for any open position, you<br> must attach a resume or type in a work history.</em> <br />' . "\n";
echo '<tr><td align="right">';
    echo ' <b>Resume</b></td><td> <input type="file" name="attachment[]" size="20" /> <br />' . "\n";
echo '</td></tr></table>';
}
echo ' &nbsp; <input type="submit" name="submit" value="Submit Application">';
echo '</form>';
echo "<br><br><input type=button onClick=\"location.href='index.php'\" value='Back to Jobs'>";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:37:56.203

你应该`move_uploaded_file`首先，在你使用它之前。

# python - 为什么 Python 要求列表推导中的 for 子句是错误的？

> ID：15766778
> 
> 赞同：3
> 
> 时间：2013-04-02T14:29:18.380
> 
> 标签：python, list, list-comprehension

看看两个列表推导，每个都包含两个 for 子句。我们看到，如果 for 子句的顺序正确，Python 就会感到困惑。但如果它们是错误的方法，Python 可以处理它。为什么？

```
Python 3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> [x + y for x in range(y) for y in range(4)]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'y' is not defined
>>> [x + y for y in range(4) for x in range(y)]
[1, 2, 3, 3, 4, 5]
>>> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:30:45.897

在

```
[x + y for x in range(y) for y in range(4)] 
```

在那个地方是未知的`y`。`range(y)`相当于：

```
for x in range(y):
    for y in range(4):
        # x + y 
```

有关详细信息，请参阅[PEP-0202](http://www.python.org/dev/peps/pep-0202/)：

```
- The form [... for x... for y...] nests, with the last index
      varying fastest, just like nested for loops. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T14:32:13.133

这是一个很好的问题！

答案是，与大多数 Python 不同，这些嵌套推导是按照解释器想要读取它们的方式编写的，而不是您想要编写它们的方式。

解释器从右到左阅读理解：

```
[(this is interpreted last) for (this is interpreted first)] 
```

但是，每个子句都是从左到右阅读的，因此`y in range(4) for x in range(y)`您必须先解释一下`y`是什么，然后才能`range(y)`摆脱它。

这很令人困惑，因为当您考虑*嵌套*理解时，您会认为是从右到左。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T14:41:17.957

列表推导首先作为这种形式的语法糖被引入 Python：

```
L = []
for innerseq in seq:
    for item in innerseq:
        LOOPS
            if CONDITION:
                L.append(BODY) 
```

这被转换为：

```
[BODY for innerseq in seq for item in innerseq LOOPS if CONDITION] 
```

为了使转换更加明显，请注意`for`表达式和`if`条件的出现顺序与它们在正常循环中的顺序完全相同`for`。这就是列表推导使用相同顺序的原因。

当您将循环重写为理解时，唯一改变的是循环主体的位置（它移动到前面，您通常会在此处初始化空容器）。关于循环的其他一切都保持不变。

您喜欢的替代方案（您的“正确方式”）似乎都*更加*令人困惑。我们要么*只是*颠倒循环的顺序，要么颠倒理解中*每个*子句的顺序。即，要么：

```
[BODY LOOPS[::-1] for item in innerseq for innerseq in seq if CONDITION] 
```

或者

```
[BODY if CONDITION LOOPS[::-1] for item in innerseq for innerseq in seq] 
```

其中任何一个似乎都是不必要的复杂转换。

另请注意，其他语言在其列表推导中使用相同的循环顺序。这是一些 Clojure：

```
user=> ; using your suggested "right" order
user=> (for [x (range y) y (range 4)] (+ x y))
CompilerException java.lang.RuntimeException: Unable to resolve symbol: y in this context, compiling:(NO_SOURCE_PATH:1) 
user=> ; you need to use the same "wrong" order as Python
user=> (for [y (range 4) x (range y)] (+ x y))
(1 2 3 3 4 5) 
```

这与 Python 相同，尽管 Clojure 将理解的“主体”放在最后。

如果有帮助，想象一下这些`for`回路的排列方式就像汽车里程表中的数字一样。最右边的循环旋转最快。

# powershell - 这个 powershell Foreach-Object 语句有什么问题？

> ID：15766779
> 
> 赞同：0
> 
> 时间：2013-04-02T14:29:18.797
> 
> 标签：powershell

我有一个名为“Get-Connections”的函数，它返回一些 sql 连接的列表，例如：

```
PS C:\Windows\system32> Get-Connections

Id                    : e1a2fd17-91aa-4975-b1ee-1a7df65e6d6b
DataSource            : myDataSource1
InitialCatalog        : myInitCatalog
UseIntegratedSecurity : True
DisplayName           : testConnection

Id                    : 2688f2af-1b49-405f-aa92-417a43b76dca
DataSource            : myDataSource1
InitialCatalog        : myInitCatalog
UseIntegratedSecurity : True
DisplayName           : testConnection 
```

我还有一个名为“Remove-connection”的函数，它通过 Id 删除连接：

```
Remove-Connection "2688f2af-1b49-405f-aa92-417a43b76dca" 
```

现在我尝试使用删除所有连接

```
Get-Connections | % { Remove-Connection $_.Id } 
```

这不起作用，例外是：

```
Remove-Connection : Cannot convert 'System.Object[]' to the type 'System.Guid' required by parameter 'Id'. Specified method is not supported. 
```

实际工作是这样的：

```
Get-Connections | % { $_.Id } | % { Remove-Connection "$_" } 
```

前面的说法有什么问题吗？

# 更新 1。

获取连接：

```
[Cmdlet(VerbsCommon.Get, "Connections", SupportsShouldProcess = true)]
    public class GetConnectionsCommand : Cmdlet
    {
        private List<ConnectionDto> Connections { get; set; }

        public void GetConnections()
        {
            var binding = new BasicHttpBinding();
            var address = new EndpointAddress(Address);

            var repositoryService = new WcfConnectionRepositoryServiceProxy(binding, address);

            Connections = repositoryService.GetAll().ToList();
        }

        protected override void BeginProcessing()
        {
            base.BeginProcessing();
            GetConnections();
        }

        protected override void ProcessRecord()
        {
            base.ProcessRecord();
            WriteObject(Connections);
        }
    } 
```

删除连接：

```
 [Cmdlet(VerbsCommon.Remove, "Connection", SupportsShouldProcess = true)]
        public class RemoveConnectionCommand : Cmdlet
        {
            [Parameter(Position = 0, ParameterSetName = "Id", 
                Mandatory = true, ValueFromPipeline = true, 
                 ValueFromPipelineByPropertyName = true,
                HelpMessage = "Please enter the ID of the connection to remove")]
            [ValidateNotNullOrEmpty]
            public Guid Id { get; set; }

            private void RemoveConnection()
            {
                var binding = new BasicHttpBinding();
                var address = new EndpointAddress(Address);

                var repositoryService = new WcfConnectionRepositoryServiceProxy(binding, address);
                repositoryService.Delete(Id);
            }

            protected override void BeginProcessing()
            {
                base.BeginProcessing();
                RemoveConnection();
            }
        } 
```

DTO：

```
[DataContract(Name = "ConnectionDto"]
    public class ConnectionDto
    {
        [DataMember]
        public Guid Id { get; set; }

        [DataMember]
        public string DataSource { get; set; }

        ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:20:37.183

我终于找到了答案。我必须在括号中设置 Get-Connections 命令：

```
(Get-Connections) | % { Remove-Connection $_.Id } 
```

# css - CSS调整最小宽度

> ID：15766784
> 
> 赞同：6
> 
> 时间：2013-04-02T14:29:35.663
> 
> 标签：css, webkit, resize

我想使用`resize`css 属性使 div 可调整大小：

```
#foo{
  overflow: hidden;
  resize: both;
} 
```

我可以用firefox自由调整它的大小。

使用 chrome/safari 我无法将其调整为小于初始大小。

他们是一种允许使用 webkit 调整大小的方法吗？（`min-width`/`min-height`不工作）

查看来自 MDN 的实时示例（带有 2 个嵌套 div） [https://developer.mozilla.org/samples/cssref/resize.html](https://developer.mozilla.org/samples/cssref/resize.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-25T18:37:41.433

更好的解决方案是使用 :active 伪类，例如：

```
div:active {
  height: 0;
  width: 0;
} 
```

示例：http: [//jsfiddle.net/kronenbear/v4Lq5o09/1/](http://jsfiddle.net/kronenbear/v4Lq5o09/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:35:53.870

我在[这里](https://stackoverflow.com/questions/12985133/resize-a-div-to-smaller-than-its-declared-size)找到了一个小的解决方法，但它确实有效。

悬停时，将高度和宽度更改为`1px`

```
#foo:hover{
    width: 1px;
    height: 1px;
} 
```

听起来这会导致轻微的“闪光”，因为宽度和高度正在发生巨大变化，但是......这是一个黑客。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:36:20.027

使用该示例作为参考，我能够将初始大小设置为等于 div 的宽度和高度，并将 min-height 和 min-width 设置为 Chrome 中允许的最小尺寸。

```
 #foo {
      resize: both;
      overflow: scroll;
      width: 300px;
      height: 300px;
      min-width: 50px;
      min-height: 70px;
    }
    div {
      background-color: #acacac;
      border: 1px solid #000;
    }
```

```
<div id="foo"></div>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-19T00:53:15.127

我已经尝试了几个小时，但不能让它比黑客更好地工作，如果我可以触发 userresize 我很乐意将 chrome 的宽度设置为 min-width 然后触发调整大小以将其放在我想要的位置，因为它移动后似乎可以将其移回原始位置。但我不知道怎么做。

# php - PHP Cookie 输入两个空格

> ID：15766788
> 
> 赞同：0
> 
> 时间：2013-04-02T14:29:43.360
> 
> 标签：php, forms, validation, cookies

我有一个注册表单，并且我正在尝试创建 cookie，以便在用户尝试提交带有验证错误的表单时保留输入的用户数据。cookie 正在这样做，但它也会导致其他问题。

加载表单时，cookie 似乎在表单字段中输入了两个空格，当用户提交带有验证错误的表单时，它会保留用户信息，但会在其详细信息前插入两个空格。这是什么原因造成的？

HTML 表单：

```
 <p class="error" id="jsFirstError">
    <?php
      if(isset($_COOKIE['firstNameErr'])) {
        echo $_COOKIE["firstNameErr"];
      }
    ?>
  </p>
  First name:<input type="text" name="fname" placeholder="First Name" id="firstNameField" autofocus="autofocus" value="
  <?php 
    if(isset($_COOKIE['firstNameEntry'])) {
      echo $_COOKIE['firstNameEntry'];
    }
    ?>"><br /><br /> 
```

验证和cookie：

```
 if(empty($fname)) {
      $error = true;
      setcookie("firstNameErr", "Please enter your First Name.", time()+1, '/');
  } else if(!ctype_alpha($fname)) {
      $error = true;
      setcookie("firstNameErr", "Only letters are accepted, please re-enter your First Name.", time()+1, '/');
  } else {
      setcookie("firstNameEntry", $fname, time()+1, '/');
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:40:08.463

> 我有一个注册表单，并且我正在尝试创建 cookie，以便在用户尝试提交带有验证错误的表单时保留输入的用户数据。

为什么要为此使用 cookie？

数据发送到的脚本已经包含了所有必要的信息——因此直接从那里再次输出它非常容易，无需使用 cookie。

> 加载表单时，cookie 似乎在表单字段中输入了两个空格，当用户提交带有验证错误的表单时，它会保留用户信息，但会在其详细信息前插入两个空格。这是什么原因造成的？

`<?php`通过让输出值的 PHP 代码跨越多行并在标记前带有空格来插入 HTML 中的空白。

顺便说一句，您通过不正确地转义您放入上下文 HTML 的数据来打开您的页面以应对可能的 XSS 攻击。

# grails - 从过滤器返回false时Grails URLMapping？

> ID：15766790
> 
> 赞同：1
> 
> 时间：2013-04-02T14:29:47.240
> 
> 标签：grails, filter, url-mapping

我有一个自定义 URLMapping 捕获错误代码并调用一些代码（用于监视 5xx/4xx 响应）：

```
// Explicit error-handling for monitoring
"401"(controller:"error", action:"fail4x")
..
"501"(controller:"error", action:"fail5x")
... 
```

*我还有一个过滤器，它在关闭之前*执行一些身份验证，如果失败则将响应状态设置为 401，并且还从过滤器返回 false。

问题是 401 没有被 URLMappings 捕获。根据文档，从过滤器返回false“[表示]响应已被处理，所有未来的过滤器和操作都不应该执行” - 所以我猜Grails几乎放弃了所有东西，包括处理通常会捕获其他 4xx 错误的 URLMapping？

有没有办法解决这个问题，以便我的 401 来自失败的过滤器被 URLMappings 捕获（假设我已经正确解释了正在发生的事情，并清楚地解释了它！）

[使用 Grails 2.1.1]

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:38:18.397

找到了一种解决方案 - 如果过滤器失败，请通过所需的操作进行重定向：

```
redirect(controller:"error", action:"fail4x") 
response.sendError(HttpServletResponse.SC_UNAUTHORIZED, "blah") 
```

这会强制触发错误控制器，从而绕过 URLMappings 捕获它的需要。虽然看起来有点丑，所以请随时发表评论！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T13:39:51.640

使用类似的解决方案有类似的问题。我们在控制器中捕获并发问题并抛出被*后*过滤器捕获的异常。这在 Grails 1.3.7 中工作

升级到 Grails 2.1.0 后，抛出的异常只会生成 500 错误，该错误会被 URLMapping 捕获。我们最终在错误控制器中添加了一个与过滤器执行相同工作的操作，并且当 URLMappings 看到带有该异常的 500 时重定向到它。

希望有一种更清洁的方法来处理它，但是一个肮脏的工作解决方案胜过一个干净破碎的解决方案

# r - 在 R 中，如何将 data.frame 的聚合转换为 data.table 的聚合？

> ID：15766793
> 
> 赞同：3
> 
> 时间：2013-04-02T14:29:56.143
> 
> 标签：r, dataframe, aggregate, data.table

我想知道如何将 on a 转换为`aggregate`在 a`data.frame`上工作`data.table`。

例如，我有一个`data.table`叫`mydt`：

```
Date       ,     Time  , Value
1899-01-01 ,  4:00:00  ,    1
1899-01-01 ,  4:01:00  ,    2
1899-01-01 ,  4:02:00  ,    3
1899-01-01 ,  4:03:00  ,    4
1899-01-01 ,  4:04:00  ,    5
1900-08-22 , 22:00:00  ,  101
1900-08-22 , 22:01:00  ,  102
2013-08-29 ,  4:00:00  , 1000
2013-02-29 ,  4:02:00  , 1001
2013-02-29 ,  4:03:00  , 1002 
```

我想分组`Date`以产生`data.table`以下格式：

```
Date      , Vector(variable length)
1899-02-28, c(1,2,3,4,5)
1900-08-22, c(101,102)
1900-08-22, c(1000,1001,1002) 
```

如果我正在处理 a `data.frame`，正确的命令是：

```
temp <- aggregate(Value ~ Date, mydt, as.vector) 
```

如果我正在处理 a ，等效命令是`data.table`什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:34:32.960

分组`Date`并`list(Value)`在 中使用`list`以将结果作为列表获取。

```
dt[, list(Value=list(Value)), by=Date]

#           Date     Value
# 1: 1899-01-01  1,2,3,4,5
# 2: 1900-08-22    101,102
# 3: 2013-08-29       1000
# 4: 2013-02-29  1001,1002 
```

# sql - 更短的日期间隔导致更长的执行时间

> ID：15766796
> 
> 赞同：0
> 
> 时间：2013-04-02T14:30:03.393
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我有这个查询：

```
SELECT
    COUNT(*) AS 'RedactedCount'
    ,s.Redacted1
    ,s.[Redacted2]
    ,s.[Redacted3] AS 'Redacted3'
FROM RedactedTable1 s
    LEFT OUTER JOIN RedactedTable2 g ON s.Redacted5= g.Redacted5
WHERE g.Redacted6= 31013 AND s.DateTime >= '2013-03-02 00:00:00'
GROUP BY s.Redacted1,s.Redacted2, s.Redacted3 
```

其中有一个非常奇怪的行为。此查询需要整整 1 分 30 秒才能完成。如果我将日期更改为 2013-04-02 00:00:00（今天我正在写这篇文章），它几乎是即时的，这是预期的行为。

但是，如果我将日期更改为 2013-02-02（2 个月的时间跨度而不是 1），则查询只需 20 秒。

有没有人遇到过这个问题？我对结果完全震惊。这也将是我正在处理的 Web 应用程序的重要 SQL 请求。

*   Microsoft SQL Server 管理工作室 **11.0.3128.0**
*   Microsoft 数据访问组件 (MDAC) **6.1.7601.17514**
*   微软 MSXML **3.0 6.0**
*   微软 Internet Explorer **9.0.8112.16421**
*   微软 .NET 框架**4.0.30319.296**
*   系统开发**6.1.7601**

注意：数据库设计得很糟糕，并且绝对不包含索引。是的，这很糟糕。不幸的是，这是一个商业软件，我无权更改数据库模型。但是，我不认为我的问题是由此引起的。

PS：对不起，如果我的查询被大量编辑，因为我在严格的 NDA 上。我试图让它尽可能可读。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:41:32.223

首先，在外连接外侧的表上放置谓词条件是没有意义的。执行此操作后，最终结果集中在该表中没有匹配的所有行都将被删除，从而有效地使整个查询表现得好像它是一个内部连接。

如果您希望连接包括表 RedactedTable2 中没有匹配行的行，则 RedactedTable2.Redacted6 上的条件应该是连接条件的一部分。

```
 SELECT COUNT(*) AS 'RedactedCount',
     s.Redacted1, s.[Redacted2],
     s.[Redacted3] AS 'Redacted3'
 FROM RedactedTable1 s
      LEFT JOIN RedactedTable2 g 
          ON g.Redacted5= s.Redacted5
             And g.Redacted6= 31013 
 WHERE s.DateTime >= '2013-03-02 00:00:00'
 GROUP BY s.Redacted1,s.Redacted2, s.Redacted3 
```

至于为什么会出现性能差异，我怀疑您的问题是由表中的数据引起的，导致查询处理器在一种情况下使用与另一种情况不同的执行计划。这很容易发生。如果优化器“猜测”它需要使用一个查询执行计划检查超过一定百分比的数据行，基于关于表中数据值分布的数据库统计信息），那么它将切换到不同的计划。在打开 ShowPlan 选项的情况下运行这两个查询，看看有什么不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:54:17.563

除了 Charles 建议的内容之外，您还可以要求数据库管理员（假设您有）`UPDATE STATISTICS`至少在 RedactedTable1 和 RedactedTable2 上运行。 `UPDATE STATISTICS`要求您对`ALTER`表/视图具有权限，所以我怀疑您是否有权运行它。但你可能会要求它完成。像您所描述的问题通常是由过时的统计数据引起的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:27:25.730

Aaron Bertrand 在评论中得到了答案。

这个问题是由 MSSQL 进行的参数嗅探引起的。

声明和使用虚拟变量可防止 MSSQL 使用过去的优化错误地优化查询。

以下链接帮助我了解了参数嗅探[http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx](http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx)

# reporting-services - 基于数据的带状线背景颜色

> ID：15766797
> 
> 赞同：0
> 
> 时间：2013-04-02T14:30:08.207
> 
> 标签：reporting-services, ssrs-2008-r2

我有一个图表，它根据日期（x 轴）测量体积（y 轴）。我有一个事件表，它存储有意义的事件，我想在图表上显示为垂直带状线。当那里有数据时，该字段`E_Text`将被填充。

我尝试了各种方法，目前正在尝试仅使用更改背景颜色来显示，因此（“ `#00ffffff`”不是颜色）：

```
=iif(Fields!E_Text.Value="","#00ffffff","Orange") 
```

但是，尽管数据始终存在，但此语句始终返回 true。有没有人设法让数据驱动的带状线工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:42:03.173

您确定要捕获空值吗？空白是什么。NULL 和（空白）是两个不同的东西。在 SSRS 中，使用 Isnothing() 捕获 Null，将值放在括号内。我从来没有用这种方法尝试过数据驱动的带状线，但这在过去一直是个问题。您也可以先通过更简单的测试来测试您的功能吗？EG：设置一个简单的数据集并使用我们知道具有空值和正值的数据集设置背景颜色：

创建测试数据集

```
declare @Person Table ( person varchar(8), orders int);

insert into @Person values ('Brett', 10),('Sean', null)

select * from @Person 
```

将工具箱中的表格放入其中并用两列填充它。

将 [orders] 列单元格的背景属性设置为

```
=iif( isnothing(Fields!orders.value), "White", "Red") 
```

我现在看到一个白色和一个红色，但是如果我这样做：

```
 =iif( Fields!orders.value = "", "White", "Red") 
```

我总是变白。

# exacttarget - 确切的目标放大器脚本触发发送没有有效的订阅者

> ID：15766798
> 
> 赞同：0
> 
> 时间：2013-04-02T14:30:08.753
> 
> 标签：exacttarget

Ampscript 帖子没有返回有效用户。有什么想法吗？这是一个企业帐户，确切的目标不是很有帮助。我创建了一个 api 调用并尝试了服务器端 js，但返回的响应更差。

```
%%[

var @emailaddr
SET @emailaddr = 'email@gmail.com'
SET @ts = CreateObject("TriggeredSend")
SET @tsDef = CreateObject("TriggeredSendDefinition")
SET @ts_subkey = 'email@gmail.com'

SetObjectProperty(@tsDef, "CustomerKey", "ET_Support_LS")
SetObjectProperty(@ts, "TriggeredSendDefinition", @tsDef)

SET @ts_sub = CreateObject("Subscriber")
SetObjectProperty(@ts_sub, "EmailAddress", @emailaddr)  
SetObjectProperty(@ts_sub, "SubscriberKey", @ts_subkey)

SET @ts_attr = CreateObject("Attribute")
SetObjectProperty(@ts_attr, "Name", "Subscriber Key")
SetObjectProperty(@ts_attr, "Value", @ts_subkey)
AddObjectArrayItem(@ts_sub, "Attributes", @ts_attr)

AddObjectArrayItem(@ts, "Subscribers", @ts_sub)
SET @ts_statusCode = InvokeCreate(@ts, @ts_statusMsg, @errorCode)
 ]%% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:59:56.907

ExactTarget 中的企业帐户具有称为“代表您的”帐户的子帐户。每当订阅者被添加到帐户或使用 TriggeredSend 发送电子邮件时，都需要传递一个值来指定它们与哪个子帐户相关。使用 TriggeredSend，这可以通过在订阅者的属性中设置 ChannelMemberID 字段来完成。可以在 ExactTarget UI 中找到子帐户列表，方法是转到“管理”选项卡，然后转到“企业管理”，然后转到“组织结构图”。

需要添加的代码：

```
SET @attr = CreateObject("Attribute")
SetObjectProperty(@attr, "Name", "ChannelMemberID")
SetObjectProperty(@attr, "Value", "PUT THE NUMERIC VALUE FOR AN OYB ACCOUNT HERE")
AddObjectArrayItem(@ts_sub, "Attributes", @attr) 
```

完整示例：%%[

```
var @emailaddr
SET @emailaddr = 'email@gmail.com'
SET @ts = CreateObject("TriggeredSend")
SET @tsDef = CreateObject("TriggeredSendDefinition")
SET @ts_subkey = 'email@gmail.com'

SetObjectProperty(@tsDef, "CustomerKey", "ET_Support_LS")
SetObjectProperty(@ts, "TriggeredSendDefinition", @tsDef)

SET @ts_sub = CreateObject("Subscriber")
SetObjectProperty(@ts_sub, "EmailAddress", @emailaddr)  
SetObjectProperty(@ts_sub, "SubscriberKey", @ts_subkey)  

SET @attr = CreateObject("Attribute")
SetObjectProperty(@attr, "Name", "ChannelMemberID")
SetObjectProperty(@attr, "Value", "PUT THE NUMERIC VALUE FOR AN OYB ACCOUNT HERE")
AddObjectArrayItem(@ts_sub, "Attributes", @attr)

AddObjectArrayItem(@ts, "Subscribers", @ts_sub)
SET @ts_statusCode = InvokeCreate(@ts, @ts_statusMsg, @errorCode)
 ]%% 
```

此外，不需要两次传递订阅者密钥值，因此从示例中删除了以下部分：

```
SET @ts_attr = CreateObject("Attribute")
SetObjectProperty(@ts_attr, "Name", "Subscriber Key")
SetObjectProperty(@ts_attr, "Value", @ts_subkey)
AddObjectArrayItem(@ts_sub, "Attributes", @ts_attr) 
```

对于 ExactTarget 的具体问题，请查看[https://code.exacttarget.com/questions/newest上的 Code@ Q&A 部分](https://code.exacttarget.com/questions/newest)

# javascript - Mootools 解析不起作用

> ID：15766806
> 
> 赞同：0
> 
> 时间：2013-04-02T14:30:31.897
> 
> 标签：javascript, mootools

我不知道为什么这个解决方案不起作用......有人可以帮忙吗？

这是代码：

```
<html>
    <head>
        <script type="text/javascript" src="js/mootools-core-1.4.5-full-nocompat.js"></script>
        <script>alert($('div#root'));</script>
    </head>
    <body>
        <div id="root"></div>
    </body>
</html> 
```

警报函数返回 NULL 而不是 'object htmldivobject'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:41:11.510

试试`$('root')`吧。在 MooTools 中 single相当于[while](https://stackoverflow.com/questions/15766806/mootools-resolve-does-not-work/15767040?noredirect=1#comment22411206_15767040)`$`如果~~您~~ 想使用 CSS 选择器，您可能正在寻找。`document.getElementById``$$`

看看这里的区别：

*   [单美元 $](http://mootools.net/docs/core/Element/Element#Window:dollar)
*   [双美元$$](http://mootools.net/docs/core/Element/Element#Window:dollars)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:32:31.843

在 alert() 东西运行的时候，页面的其余部分还没有被加载/解析/处理，所以`#root`在 DOM 中还不存在。您需要使用 domready() 功能暂停代码，直到 DOM 完全加载：

```
<script>
window.addEvent('domready', function() {
    alert(blah blah blah);
});
</script> 
```

# ios - 在 iOS 应用中查看上传的视频

> ID：15766807
> 
> 赞同：1
> 
> 时间：2013-04-02T14:30:36.213
> 
> 标签：ios, google-drive-api

我有一堆视频上传到谷歌驱动器。我相信它们是 mpeg4 (avi) 格式。我已经尝试了所有我能想到的在 MPMoviePlayerViewController 中查看视频的方法。在模拟器中，视频播放器启动并看起来像是在播放，但我没有看到任何视频。当我在我的设备上运行它时，播放器不会启动。我曾尝试使用 downloadUrl、alternateLink、embedLink 和 webContentLink，但均未成功。

是否可以将视频从 Google Drive 流式传输到 iOS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:43:39.843

该模拟器不是一个完整的模拟器，而只是一个模拟器。它使用来自 Mac OS 的类似框架，这些框架可能具有与 iOS 不同的功能。换言之，模拟器可能具有比实际设备更多的功能。

iOS 上的[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/MediaPlayer/Reference/MPMoviePlayerController_Class/Reference/Reference.html)类仅支持少数容器和编解码器，不支持 AVI。

> 支持的格式
> 
> 此类播放 iOS 支持的任何电影或音频文件。这包括流式内容和固定长度文件。对于电影文件，这通常意味着扩展名为 .mov、.mp4、.mpv 和 .3gp 并使用以下压缩标准之一的文件：
> 
> H.264 Baseline Profile Level 3.0 视频，在 30 fps 时高达 640 x 480。（基线配置文件不支持 B 帧。）
> 
> MPEG-4 第 2 部分视频（简单配置文件）
> 
> 如果您使用此类播放音频文件，它会在播放音频时显示带有 QuickTime 徽标的白屏。对于音频文件，此类支持最高 48 kHz 的 AAC-LC 音频和最高 48 kHz 的 MP3（MPEG-1 音频层 3）立体声音频。

# iphone - 类似 SQLite 的多行查询

> ID：15766809
> 
> 赞同：1
> 
> 时间：2013-04-02T14:30:45.513
> 
> 标签：iphone, sql, sqlite

我有下表

```
---------------------------------------
id,     type,     keyword,     default
---------------------------------------
1,      1,        mcdonalds,       1
2       1,        food,            0
3,      1,        drinks,          0
4,      2,        vending machine, 1
5,      2,        drinks,          0
6,      3,        station,         1
7,      3,        travel,          0
8       3,        train,           0 
```

这背后的想法是我想要一个 serach 查询返回关键字的“唯一”类型（默认行），所以当我搜索麦当劳时，我得到第一行，但是当我搜索食物或饮料时，我也得到第一行.

我已经使用子选择完成了这项工作。

```
SELECT type, keyword FROM keywords WHERE type IN (SELECT DISTINCT type FROM keywords WHERE keyword like '%?%') AND `default`=1
; 
```

这就像一个魅力，但现在我希望能够提供多个关键字，例如我尝试过的“drinks & food”

```
SELECT type, keyword FROM keywords WHERE type IN (SELECT DISTINCT type FROM keywords WHERE keyword like '%?%' OR keyword like'%?%') AND `default`=1
; 
```

但是，当我在这种情况下搜索“食物和饮料”时，我会得到“自动售货机”和“麦当劳”。然而，自动售货机只有一个相关的关键字“饮料”（它不提供食物）所以我不想在我的结果中出现那个。

当我做'AND'而不是OR like时，我根本没有得到任何结果（因为一行不能同时具有两个值）。

有人对我如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:05:47.780

```
/*
t = keywords
*/

SELECT *
FROM t
WHERE type IN (
    SELECT type
    FROM (
        SELECT COUNT(id) AS count_matches,
            type
        FROM t
        WHERE keyword LIKE '%drinks%'
        OR  keyword   LIKE '%food%'
        GROUP BY type
        )
        q
    ORDER BY count_matches DESC 
    LIMIT 1
    )
AND "default" = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T15:19:39.337

使用两个独立的子查询，然后将查找与`AND`：

```
SELECT type,
       keyword
FROM keywords
WHERE type IN (SELECT DISTINCT type FROM keywords WHERE keyword like '%drinks%')
  AND type IN (SELECT DISTINCT type FROM keywords WHERE keyword like '%food%')
  AND "default"=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:00:18.223

好吧，感谢您的所有帮助。已经想通了！:)

```
 SELECT type, keyword FROM keywords WHERE type IN 
 (SELECT type FROM keywords WHERE (`keyword` LIKE '%drinks%' OR keyword like '%food%') AND `default`!= 1 GROUP BY type HAVING COUNT(id) >= 2)
 AND `default`=1 
```

查询可以动态构建，所以它的作用是使用 COUNT。子查询中返回的 count 行数必须至少与用户输入的关键字数一样多。

[b]edit 似乎不起作用，or 和 like 有时会给出比预期更高的计数[/b]

# java - Java 运行另一个类并控制它的 I/O

> ID：15766814
> 
> 赞同：2
> 
> 时间：2013-04-02T14:30:54.247
> 
> 标签：java, process, stream, runtime, exec

我需要（编译和）在 Java 中使用 main 方法运行另一个类并读取它的输出，然后写入它的输入，但首先要专注于阅读。假设我需要测试应用程序是否在标准输出上写入“123”，这是我的想象：

```
public class TestMe {
    public static void main(String[] args) {
        System.out.println("123");
    }
}

...

public class Tester {

    public static void main(String[] args) {
        Runtime runtime = Runtime.getRuntime();
        try {
            Process exec = runtime.exec("java works.TestMe");
            BufferedReader br = new BufferedReader(new InputStreamReader(exec.getInputStream()));
            if (br.readLine().equals("123")) {
                System.out.println("Your program is working fine");
            } else {
                System.out.println("Yout program is bad and you should feel bad");
            }
        } catch (IOException ex) {

        }

    }
} 
```

我使用 exec() 方法加载了运行时类创建的进程，但读取器没有读取任何数据并抛出空指针异常（在方法 readLine() 上）。我在不同的包中都有两个类，并且我正在使用 netbeans，如果它无论如何重要的话。任何帮助。

# javascript - 为什么某些 vbscript 语句在 IE9+ 中中断，而它在 quirks 模式下运行良好？

> ID：15766817
> 
> 赞同：1
> 
> 时间：2013-04-02T14:30:58.543
> 
> 标签：javascript, internet-explorer, browser, vbscript, quirks-mode

当由于浏览器兼容性问题而出现问题时，它会被 'lu'ck 替换为 'su'。想知道为什么某些 vbscript 语句在 IE9+ 中中断，而在 quirks 模式下运行良好。

以下行只是从隐藏字段中获取值并将其分配给变量**data**。这在 IE9+ 中不起作用并引发错误*“SCRIPT258：由于错误 80020102 无法完成操作”*

```
data = frmSupplier.hdnData.value 
```

同样明智的是，对于每个语句也都是中断的，其中 NodeList 是使用“Microsoft.XMLDOM”加载的 xml 节点的集合：

```
For Each Node In NodeList 
   ...
   ...
Next 
```

还有其他几个案例。我们尝试了以下解决方法，但没有运气。

`<!doctype html>`根据[定义文档兼容性](http://msdn.microsoft.com/en-us/library/cc288325%28VS.85%29.aspx)添加

`<meta http-equiv="x-ua-compatible" content="IE=9">`根据[指定遗留文档模式](http://msdn.microsoft.com/en-us/library/jj676915%28v=vs.85%29.aspx)添加

请对此有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T02:17:45.293

脚本存在以下问题：

*   [不再支持动态属性](http://msdn.microsoft.com/en-us/library/ie/ms537634)
*   [不再支持 XML 数据岛](http://msdn.microsoft.com/en-us/library/ie/hh801224)
*   [JScript 语法错误](http://msdn.microsoft.com/en-us/library/by0atdkw)

**参考**

*   [Visual Basic 开发人员参考](http://msdn.microsoft.com/en-us/library/Aa752043)

# javascript - 监听元素前置

> ID：15766821
> 
> 赞同：0
> 
> 时间：2013-04-02T14:31:16.317
> 
> 标签：javascript, jquery, listener

我有一些元素可以动态地添加到我网站上的某个区域，但是当它们被添加时我需要一些东西来监听，这样它就可以触发一个事件。

元素是这样前置的

```
something.prependTo('#area') 
```

被前置的元素是这样的

```
<div id="box1" class="box new"> 
```

我已经尝试了以下每一项都没有运气......

```
$('.new').on(playSound());
$('.new').bind('DOMSubtreeModified', playSound());
$('.new').each(playSound());
$('.new').live(playSound());
$('.new').livequery(playSound()); 
```

声音在页面最初加载时播放，但在添加元素时不播放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:44:13.983

```
$('#area').on('DOMNodeInserted', function(e) {//whenever an element is inserted
    if ($(e.target).is('.new')) {             //check if it has the right class
        playSound();                          //and play sound
    }
}); 
```

它在 IE 中不起作用，因为没有支持，如果我没记错的话，突变事件已被弃用，所以也不能保证未来的支持？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:35:59.440

我会说：

```
function prependWithSound(something){
    something.prependTo('#area')
    playSound();
} 
```

然后调用 `prependWithSound(something)`而不是 `something.prependTo('#area')`.

为什么要让生活变得更艰难？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:57:38.783

[LiveQuery](http://docs.jquery.com/Plugins/livequery)会这样做，但正如@Bergi 指出的那样，您必须删除括号：

```
$('.new').livequery(playSound); 
```

[这是一个例子。](http://jsfiddle.net/LH9TA/)

# ruby - 用 Hpricot 解析网站

> ID：15766823
> 
> 赞同：0
> 
> 时间：2013-04-02T14:31:17.840
> 
> 标签：ruby, gem, hpricot

我正在尝试使用 Ruby 和 Hpricot gem 解析来自 reddit 的图像。

使用 Chrome，我得到了保存图像链接的 div 的 XPath，然后我使用 doc.search 找到它，但结果为空。

```
doc.search('//*[@id="siteTable"]/div[1]/a').each do |r|
    puts r.attributes['href']
end 
```

有任何想法吗？

# bash - “gmake”和“gmake clean”之间的区别

> ID：15766830
> 
> 赞同：2
> 
> 时间：2013-04-02T14:31:43.737
> 
> 标签：bash, gnu-make

我目前正在从事一个学生工作项目并编写一些代码。每当我想编译我的文件时，我的主管告诉我先做`gmake clean`然后做`gmake`. 否则，以前的 gmake 中的一些错误可能无法在新的 gmake 中解决。

我的项目有很多我没有编辑的不必要的文件，但是因为我`gmake clean`每次都编译它们每次都会再次编译它们，这需要很长时间。

所以，如果我不更改其他文件，那么我不需要重新编译它们，我更改的唯一文件总是简单地重新编译`gmake`，对吧？那我为什么`gmake clean`每次都要？

我的主管只是告诉我一个*好的编程实践*还是我错过了一些重要的概念`gmake clean`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:37:12.200

绝对不是最佳实践......当makefile包含一些错误并且依赖关系不正确时，这通常是快速而肮脏的解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T18:28:01.390

`gmake`和之间的区别在于`gmake clean`前者构建默认目标，而后者“构建”特定目标`clean`，这通常包括清理指令以删除在构建过程中创建的文件（目标文件、临时文件、生成的代码、 ……）。`gmake clean` *应该*将源树恢复到干净的状态。但是，它是否真的成功取决于源树的外观以及目标包含的指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:38:10.500

`gmake clean`以前做`gmake`，以防你编译有困难。只是为了检查问题是否来自旧的编译文件。

否则只能`gmake`编译您最新更改的文件。

你的上级给了你一个处理困难和奇怪的编译行为的建议。

# c - 声明 inline 关键字的区别

> ID：15766832
> 
> 赞同：3
> 
> 时间：2013-04-02T14:31:50.907
> 
> 标签：c

```
inline void foo();

int main() {
    foo(); return 0;
}

void foo(){
} 
```

`foo`如果将' 声明设置为 '`inline`和 not `foo`' 定义有什么区别吗？相反的呢？将它们都标记为`inline`怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T16:39:22.920

这就是[C11](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)关于内联的全部内容（注意：`inline`是一个函数说明符，目前唯一的其他函数说明符是`_Noreturn`）（强调我的）：

> ## 6.7.4
> 
> 2\. 函数说明符只能用在函数标识符的声明中。
> 
> 3\. 具有外部链接的函数的内联定义不应包含具有静态或线程存储持续时间的可修改对象的定义，并且不应包含对具有内部链接的标识符的引用。
> 
> 5\. 一个函数说明符可能出现多次；行为就像它只出现一次一样。
> 
> 6\. 使用内联函数说明符声明的函数是内联函数。使函数成为内联函数意味着对函数的调用尽可能快。^(138) 此类建议的有效程度由实施定义。^(139)
> 
> 7.任何具有内部链接的函数都可以是内联函数。对于具有外部链接的函数，适用以下限制：**如果函数使用内联函数说明符声明，则它也应在同一翻译单元中定义。** *如果翻译单元中函数的所有文件范围声明都包含不带 extern 的内联函数说明符，则该翻译单元中的定义是内联定义。* **内联定义不为函数提供外部定义，也不禁止在另一个翻译单元中进行外部定义。**内联定义提供了外部定义的替代方案，翻译器可以使用它来实现对同一翻译单元中函数的任何调用。未指定对函数的调用是使用内联定义还是外部定义。
> 
> 10\. 示例 1 带有外部链接的内联函数的声明可以产生一个外部定义，或者一个只在翻译单元内可用的定义。带有 extern 的文件范围声明会创建一个外部定义。以下示例显示了整个翻译单元。
> 
> ```
> inline double fahr(double t)
> {
>     return (9.0 * t) / 5.0 + 32.0;
> }
> inline double cels(double t)
> {
>     return (5.0 * (t - 32.0)) / 9.0;
> }
> extern double fahr(double); // creates an external definition
> double convert(int is_fahr, double temp)
> {
>     /* A translator may perform inline substitutions */
>     return is_fahr ? cels(temp) : fahr(temp);
> } 
> ```
> 
> 11.注意of的定义`fahr`是外部定义，因为`fahr`也是用extern声明的，但是of的定义`cels`是内联定义。因为`cels`有外部链接并被引用，外部定义必须出现在另一个翻译单元中（见 6.9）；内联定义和外部定义是不同的，都可以用于调用。
> 
> ^(138)例如，通过使用通常函数调用机制的替代方法，例如“内联替换”。内联替换不是文本替换，也不会创建新函数。因此，例如，在函数体中使用的宏的扩展使用它在函数体出现时的定义，而不是调用函数的位置；标识符指的是正文出现的范围内的声明。同样，该函数具有单个地址，而不管除外部定义之外出现的内联定义的数量。
> 
> ^(139)例如，一个实现可能永远不会执行内联替换，或者可能只对内联声明范围内的调用执行内联替换
> 
> ## 6.9
> 
> 5\. 外部定义是一个外部声明，它也是函数（内联定义除外）或对象的定义。
> 
> ## J.1 未指明的行为
> 
> - 对内联函数的调用是使用内联定义还是函数的外部定义（6.7.4）。
> 
> ## J.2 未定义的行为
> 
> - 具有外部链接的函数使用内联函数说明符声明，但未在同一翻译单元 (6.7.4) 中定义。
> 
> ## J.3 实现定义的行为
> 
> ### J.3.8 提示
> 
> - 使用内联函数说明符提出的建议的有效程度（6.7.4）。

* * *

### 这一切对人类意味着什么

*   `6.7.4.3`：如果您有一个对链接器也可见的内联函数，则它不能有`static`局部变量。它也不能使用文件范围的变量/函数（定义为全局标识符，但使用`static`）。（注意：有人能告诉我我对最后一句话的理解是否正确吗？感觉不对。）

*   `6.7.4.6`: 使函数内联不会强制编译器将其视为宏。它只是向编译器暗示您希望该函数快速运行。

*   `6.7.4.7`：

    1.  如果你有一个`static`函数，你可以做它`inline`。
    2.  如果在翻译单元（TU）（例如，预处理的源文件）中，编译器看到一个`inline`函数声明，在同一个 TU 的某个地方它应该能够找到它的定义。
    3.  如果在任何地方都声明了一个函数`inline`，那么编译器会将该函数视为`static`（但不完全是）。
    4.  如果在 TU 中使用第 3 点中的函数，则该函数将获得外部链接，因此它的另一个实现应该存在于其他某个 TU 中。编译器可以选择使用函数的内联版本还是外部版本。¹
*   ^(`138`): 不管你在不同的 TU 中定义多少次内联函数，它们都有“相同”的地址。我相信这也意味着如果你使用函数指针来存储地址，然后通过该指针调用函数，就会调用函数的外部定义。

*   `6.9.5`：一个普通的函数定义既声明又定义了一个外部函数。但是正如我们之前看到的，函数的内联定义并没有定义外部可见的定义，即使它可能声明了一个外部函数。

¹在您的示例中，如果您放入`inline`的定义中`foo`，您将通过 gcc（在链接阶段）得到一个错误，该错误`foo`具有未定义的引用。如果你在同一个文件中放置另一个实现`foo`，你会得到一个重新定义错误。这与我所说的一致：全内联声明/定义不提供外部链接，如果在 TU 中使用该函数，则需要在另一个 TU 中进行定义。

* * *

进一步阅读：

*   [https://stackoverflow.com/a/8454936/912144](https://stackoverflow.com/a/8454936/912144)
*   [https://stackoverflow.com/a/10291700/912144](https://stackoverflow.com/a/10291700/912144)
*   （来自上面的帖子）[http://www.greenend.org.uk/rjk/tech/inline.html](http://www.greenend.org.uk/rjk/tech/inline.html)
*   [通过函数指针使用的函数可以内联吗？](https://stackoverflow.com/q/7302005/912144)
*   [https://stackoverflow.com/a/216546/912144](https://stackoverflow.com/a/216546/912144)
*   [https://stackoverflow.com/a/9946975/912144](https://stackoverflow.com/a/9946975/912144)
*   （来自上面的帖子）[http://gcc.gnu.org/onlinedocs/gcc/Inline.html](http://gcc.gnu.org/onlinedocs/gcc/Inline.html)
*   [https://stackoverflow.com/a/582932/912144](https://stackoverflow.com/a/582932/912144)
*   [递归函数可以内联吗？](https://stackoverflow.com/q/190232/912144)
*   [https://stackoverflow.com/a/10378492/912144](https://stackoverflow.com/a/10378492/912144)

# javascript - 弹出对话框偏移了太多像素

> ID：15766835
> 
> 赞同：0
> 
> 时间：2013-04-02T14:31:56.660
> 
> 标签：javascript, jquery, css

我正在做一些模态弹出窗口，但对话框向左渲染 200px，在它应该的顶部大约 100px。

更新的jQuery

```
DevicesRightClickActionsMenuController.prototype.showActionsMenu = function(event) {
    rightClicActionskMenuElement.css({
        top : $('.printer-context-node').offset().top + $('.printer-context-node').height() - $('.devices-right-click-menu-item').height() * 4 + 'px',
        left : $('.printer-context-node').offset().left + $('.printer-context-node').width() + 'px',
        position : 'absolute',
        zIndex : 1000
    });

DevicesRightClickMenuController.prototype.showRightClickMenu = function (xPosition, yPosition, theSerialNumber) {

serialNumber = theSerialNumber;

rightClickMenuElement.css({
    position: 'absolute',
    top: yPosition,
    left: xPosition,
    zIndex: 1000,
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:49:48.533

可能是您使用了错误的事件属性来显示框，例如`pageX`/`pageY`而不是`clientX`/ `clientY`。如果您发布更多代码，它将有助于缩小范围。

# .net - Powershell 和 .NET 表单对象

> ID：15766836
> 
> 赞同：1
> 
> 时间：2013-04-02T14:31:59.687
> 
> 标签：.net, winforms, powershell

我需要创建一个使用一些 powershell 脚本的基本“帮助台样式”工具。我正在使用 .NET 表单对象来创建一个窗口，但我无法正确设置 Localtion 属性（以及其他需要 Point 对象的属性）

```
$form = New-Object system.Windows.Forms.Form;
$form.AutoSize = $true;
$form.minimumSize = New-Object System.Drawing.Size(400, 300);
$form.Location = New-Object System.Drawing.Point(10, 10);
$form.DataBindings.DefaultDataSourceUpdateMode = 0;

$form.ShowDialog(); 
```

出现窗口窗体，尺寸正确，但位置错误。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:42:29.393

您可以在 Load 事件中更改 location 属性：

```
$handler_form_Load = {
    $form.Location = New-Object System.Drawing.Point(10, 10);
}

$form = New-Object system.Windows.Forms.Form;
$form.AutoSize = $true;
$form.minimumSize = New-Object System.Drawing.Size(400, 300);
$form.add_Load($handler_form_Load)
$form.DataBindings.DefaultDataSourceUpdateMode = 0;

$form.ShowDialog(); 
```

此外，当您找到@Lorenzo 时，将 StartPosition 设置为[手动](http://msdn.microsoft.com/en-us/library/system.windows.forms.formstartposition.aspx)以在加载时遵守 location 属性，因此不需要上面的事件处理程序。

```
$form.StartPosition = "manual" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-13T15:42:56.780

您无需为位置或大小指定新对象。正如安迪所添加的，该`StartPostion`属性是您需要更改为`Manual`. 然后简单地给`Location`属性一个字符串值，比如`'x, y'`.

```
Add-Type -AssemblyName System.Windows.Forms

$Form               = New-Object system.Windows.Forms.Form
$Form.AutoSize      = $true
$Form.minimumSize   = '800, 300'
$Form.StartPosition = 'Manual'
$Form.Location      = '500, 500'

$Form.ShowDialog() 
```

# c# - 如何将 BindingSource.DataSource 转换为我的自定义对象？

> ID：15766848
> 
> 赞同：4
> 
> 时间：2013-04-02T14:32:34.990
> 
> 标签：c#, .net

我有一个自定义数据集样式类定义为：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;

namespace LibrarySort.Data
{
  public class LibraryData
  {
    private AlbumList albums;
    public AlbumList Albums { get { return albums; } }

    public LibraryData()
    {
      this.albums = new AlbumList();
      this.albums.AllowEdit = true;
      this.Albums.AllowNew = true;
      this.Albums.AllowRemove = true;
    }

    public void FillAll()
    {
      this.Albums.Fill();
    }
  }

  public class AlbumList : BindingList<Album>
  {
    public AlbumList()
    {
    }

    public void Fill()
    {
      int id = 1;
      Album album1 = new Album();
      album1.Id = id++;
      album1.Artist = "Classical Piano Artist";
      album1.Download = true;
      album1.Person = null;
      album1.Price = (decimal?)3.49;
      album1.Tags.Add("classical");
      album1.Tags.Add("piano");
      album1.Title = "Classical Piano";
      Album album2 = new Album();
      album2.Id = id++;
      album2.Artist = "Thrash Metal Artist";
      album2.Download = false;
      album2.Person = null;
      album2.Price = (decimal?)7.99;
      album2.Tags.Add("thrash metal");
      album2.Title = "Thrash Metal";

      this.Items.Add(album1);
      this.Items.Add(album2);
    }
  }
} 
```

我还有一个 TabControl 内部有一个 DataGridView 的 Form 对象。在设计器中，我创建了一个 BindingSource 并使用 Add Project Data Source 从顶层 LibraryData 对象创建一个源。然后，我将 DataGridView 绑定到设计器中的“相册”数据成员，并且列按预期填充到设计器中。

运行代码时，不会填充表格，这是有道理的，因为 Fill() 尚未运行。所以我为表单创建了一个 Load 事件处理程序，如下所示：

```
private void MainForm_Load(object sender, EventArgs e)
{
  LibraryData data = (LibraryData)bindingSource.DataSource;
  data.FillAll();
} 
```

但是在运行时，我在 MainForm_Load() 中得到以下信息：

System.InvalidCastException 未处理 Message="Unable to cast object of type 'System.RuntimeType' to type 'LibrarySort.Data.LibraryData'

我已经对此进行了广泛的搜索，并且在 StackOverflow 中进行了广泛搜索，但没有运气。我错过了什么吗？

更新： DataSource 绝对是非空的。同样有趣的是，在设计器代码中，我看到了这一点：

```
this.bindingSource.DataSource = typeof(LibrarySort.Data.LibraryData); 
```

更新 2：专辑类和父项：

```
namespace LibrarySort.Data
{
  public class Album : Item
  {
    bool download = false;
    public bool Download { get { return download; } set { download = value; } }

    string artist = null;
    public string Artist { get { return artist; } set { artist = value; } }
  }
}

namespace LibrarySort.Data
{
  public class Item
  {
    int id = -1;
    public int Id { get { return id; } set { id = value; } }

    // FK to Person that currently has possession of item
    int? person = null;
    public int? Person { get { return person; } set { person = value; } }

    string title = null;
    public string Title { get { return title; } set { title = value; } }

    decimal? price = null;
    public decimal? Price { get { return price; } set { price = value; } }

    State state = State.Owned;
    public State State { get { return state; } set { state = value; } }

    List<string> tags = null;
    public List<string> Tags
    {
      get
      {
        if (tags == null)
          tags = new List<string>();
        return tags;
      }
      // No set needed
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:58:26.260

我认为问题在于，尽管您的表单上有绑定源，但您还没有设置绑定源的数据源。

假设这`bindingSource`是`datasource`您在表单上放置的，然后尝试以下操作`MainForm_Load`：

```
LibraryData data = new LibraryData();
data.FillAll();
bindingSource.DataSource = data; 
```

# android - android设备中的布局冲突

> ID：15766850
> 
> 赞同：1
> 
> 时间：2013-04-02T14:32:37.590
> 
> 标签：android, xml, layout, size, screen

我收到以下错误/警告。

```
'Small Screen' is not a best match for any device/locale combination.

[2013-04-02 17:29:31 - X Y ] Displaying it with 'Locale Language ___Region __, sw320dp, w320dp, h426dp, Small Screen, Short screen aspect ratio, Portrait Orientation, Low Density, Finger-based touchscreen, Soft keyboard, No keyboard, Exposed navigation, No navigation, Screen resolution 320x240, API Level 16' which is compatible, but will actually be displayed with another more specific version of the layout. 
```

1.  清洗溶液并不能解决问题。小布局（例如默认 2.7 qvga）继续使用 Layout sw-320dp for ex。
2.  怎么做才能避免这个问题？

# database - 什么类型的数据库是data.frame？

> ID：15766854
> 
> 赞同：2
> 
> 时间：2013-04-02T14:32:45.767
> 
> 标签：database, r

我想知道什么类型的数据库是data.frame。[如果我们在 Quora](http://www.quora.com/Database-Systems/In-what-situations-should-one-use-a-given-database-over-another)上看一下这个答案，我们会很好地指导存在哪些类型的数据库。粗略地说，我们有关系数据库（我猜这不是 Data.Frame 的情况）和 noSQL 数据库（列、键值、文档存储和图形）。

所以，我的问题是：什么样的数据库是 data.frame？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:34:21.773

数据框不是数据库。它更像是关系数据库中的单个表，或电子表格中的单个工作表。

在 R 术语中，您也可以将其视为列表和矩阵的混合体。也就是说，它就像一个非嵌套列表，其中每个元素具有相同的长度，它就像一个矩阵，其中每一列都可以包含不同类型的原子变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T14:49:43.580

数据框是一种关系。每一行是一个元组，每一列是一个属性。看：

[https://en.wikipedia.org/wiki/Relation_%28database%29](https://en.wikipedia.org/wiki/Relation_%28database%29)

但是它是严格排序的，所以我想 DB 理论纯粹主义者会坚持认为还有一个隐藏属性定义了 R 使用的排序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T14:36:31.263

严格来说，在 R 中，数据框实际上是一个等长向量的列表，用于存储表格等数据。数据帧的每一列都是等长向量之一，即数据帧列表的每个元素都是表格的一列。它们很有用，因为您可以在每一列中混合数据类型，例如，一列可以有一个数字，下一列可以有一个因子，就像 R 中的列表可以有混合数据类型一样。这是您选择 data.frame 而不是矩阵的原因之一，它只允许一种数据类型。

# wicket - wicket-request 模块有什么用？

> ID：15766855
> 
> 赞同：0
> 
> 时间：2013-04-02T14:32:46.287
> 
> 标签：wicket

经过一番研究，我决定使用 Apache Wicked 框架来编写我的新应用程序。我下载了发行版，发现里面有很多模块和一个 wicket-core。我调查了这份清单，以找出我可能需要什么来满足我的要求。除了邪恶的请求外，一切都或多或少地清楚了。它是干什么用的？有人可以解释得更清楚，所以我可以决定我是否真的需要它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:18:45.150

如果查看 wicket-core 的 pom.xml，可以看到 core 有两个主要的项目内依赖项：

```
<dependency>
  <groupId>org.apache.wicket</groupId>
  <artifactId>wicket-util</artifactId>
</dependency>
<dependency>
  <groupId>org.apache.wicket</groupId>
  <artifactId>wicket-request</artifactId>
</dependency> 
```

因此 wicket-request 是一个基本模块，它刚刚从核心拆分为一起处理客户端请求的组组件。

# delphi - 清除字符串网格时的 EAcessViolation

> ID：15766856
> 
> 赞同：2
> 
> 时间：2013-04-02T14:32:48.147
> 
> 标签：delphi, access-violation, stringgrid

我正在尝试清除 stringgrid，但我收到一条不一致的访问冲突消息，该消息似乎出现在最后一列被清除之后。这是代码：

```
procedure ClearTable;
var
i:integer;
begin
  for i := 0 to 3 do
    begin
      frmHighscores.HighscoreTable.Cols[i].Clear;
    end;
end; 
```

这是调用它的过程：

```
procedure TfrmHighscores.sortbtnClick(Sender: TObject);
var
SortedScores :array of Thighscore;
i: integer;
Ascending:boolean;
begin
  ClearTable;
  Case sortRGP.ItemIndex of
   0: Ascending := False;
   1: Ascending :=True;
  end;
  AssignFile(HighScoreFile, 'HighScoreFile.DAT');
  Reset(HighScoreFile);
  If Filesize(Highscorefile) <= 1 then
    begin
      showmessage('There arent enough items to sort!');
    end;
  If Filesize(Highscorefile) > 1 then
    begin
      SetLength(SortedScores, Filesize(Highscorefile)-1);
      i:=0;
      While not eof(HighScoreFile) do
        begin
          Read(Highscorefile, Highscore[i+1]);
          sortedScores[i].Name := Highscore[i+1].Name;
          sortedScores[i].Score := Highscore[i+1].Score;
          sortedScores[i].DateSet := Highscore[i+1].DateSet;
          sortedScores[i].Difficulty := Highscore[i+1].Difficulty;
          inc(i);
        end;
    Closefile(highscorefile);
    Quicksort(SortedScores, Low(SortedScores), High(SortedScores)+1, Ascending);
    end;
end; 
```

我尝试运行它时的错误消息是

> 项目 C:\Users\Owner\V0.66\Project1.exe 出现错误消息：“
> 0x00401c51 处的访问冲突：写入地址 0x00316572”。进程停止。使用 Step 或 Run
> 继续。

当我将代码更改为此错误时，该错误消失了：

```
procedure ClearTable;
var
i:integer;
begin
  for i := 0 to 3 do
    begin
      showmessage('Attempting to clear Col ' +inttostr(i));
      frmHighscores.HighscoreTable.Cols[i].Clear;
      showmessage('Col ' +inttostr(i) + ' cleared successfully');
    end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T22:17:40.497

这通常来自不正确的分配大小（数组）。最后的写入过程会覆盖数组的限制。这并不总是立即导致错误。但是，或多或少的重要**数据将被覆盖**。

我们假设记录数为 15。然后 Filesize(Highscorefile) == 15 。数组应该是 [0.. .14]。但是你只生成 14 的长度！

`SetLength(SortedScores, Filesize(Highscorefile)-1); == 14.`

所以数组是 [0..13] 最后一个赋值覆盖数据。

大多数情况下，阵列后面仍有可用空间，不会注意到。

如果部分 TSrings 被覆盖，而您尝试释放（使用 strdispose）覆盖的数据，则存在故障。

如果编写新代码，

`showmessage('Attempting to clear Col ' +inttostr(i));`

内存将通过重新编译重新组织，然后这个错误出现在另一个地方或根本没有。

所以替换
`SetLength(SortedScores, Filesize(Highscorefile)-1);`
为
`SetLength(SortedScores, Filesize(Highscorefile));`

**并且错误将消失。**

看看我的答案[https://stackoverflow.com/a/11888156/1322642](https://stackoverflow.com/a/11888156/1322642)

`OP` [如何在 deplhi](https://stackoverflow.com/q/11877906/1322642)
覆盖许多使用过的数据时使用此过程获取两个不同的文件。
当他有足够的数据被覆盖时，他会得到一个堆栈溢出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:23:20.437

frmHighscores 是 TfrmHighscores 的一个实例？

尝试将过程 ClearTable 设为私有 TfrmHighscores 并调用：

```
HighscoreTable.Cols[i].Clear; 
```

代替

```
frmHighscores.HighscoreTable.Cols[i].Clear; 
```

或者您可以尝试将表单引用传递给该过程：

```
procedure ClearTable(AFrmHighScores: TfrmHighscores);
var
i:integer;
begin
  for i := 0 to 3 do
    begin
      showmessage('Attempting to clear Col ' +inttostr(i));
      AFrmHighScores.HighscoreTable.Cols[i].Clear;
      showmessage('Col ' +inttostr(i) + ' cleared successfully');
    end;
end; 
```

在代码中调用它：

```
ClearTable(Self); 
```

# cron - Cron 作业不工作

> ID：15766864
> 
> 赞同：0
> 
> 时间：2013-04-02T14:33:05.727
> 
> 标签：cron, crontab

我最近在 cron 选项卡中写了一个 cron 作业，该作业应该在每天早上 10:25 AM 执行。

```
25 10 * * * /usr/bin/wget http://www.mysite.com/email.php 
```

指定的文件使用 php 向我发送练习电子邮件，以便我知道它有效。但它没有。当我在自己的浏览器中加载文件时，它可以工作。所以，我知道这不是 php 错误。

奇怪的是，当我指定一个不同的文件时，它起作用了。但是，这个没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:38:18.487

嗯，看起来你的脚本有问题，而不是你的 Cron 作业。

# mysql - MySQL 中文本列表的长度（基本字符串操作）

> ID：15766871
> 
> 赞同：0
> 
> 时间：2013-04-02T14:33:30.253
> 
> 标签：mysql, sql, string

我在 MySQL 中有一个逗号分隔列表字段：

```
id field1
1 aa,bb,cc
2 aa 
```

我想计算重叠的元素总数。在这种情况下，这将是 4:`aa`出现两次，因此应该重复计算。

计算每个字段中逗号的数量并加 1 就足够了，因为我的列表没有引号或转义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:47:55.257

让我们试试：

```
select count(field1) + sum(CHAR_LENGTH(field1) - CHAR_LENGTH(REPLACE(field1,',','')))
from Table1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:42:20.500

为什么使用逗号分隔的字符串？

数据库不是为此而设计的。

您有两种可能性：
- 在存储过程中创建一个循环，
- 将其计入调用此 MySQL 查询的代码中......

# javascript - 使用 jQuery 显示/隐藏复选框

> ID：15766875
> 
> 赞同：9
> 
> 时间：2013-04-02T14:33:55.533
> 
> 标签：javascript, jquery, checkbox, show-hide

我正在尝试根据复选框显示/隐藏 html 表单的一部分。这是我拥有的精华代码：

```
<script src="/js/jquery.js"></script>
<script language="JavaScript">
    function toggle(className){
        var $input = $(this);
        if($(this).prop('checked'))
            $(className).show();
        else
            $(className).hide();
        }
</script>

<fieldset><legend>Check Here
    <input type="checkbox" onclick="toggle('.myClass')" ></legend>
    <span class="myClass">
        <p>This is the text.</p>
    </span>
</fieldset> 
```

当您单击复选框时，跨度将被隐藏并且不会返回。我也用过`$(this).is(':checked')`。无论是否检查，它似乎都`$(this).prop('checked')`在评估为**假。**我最好的猜测是我使用`$(this)`不正确。我在这里想念什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-02T14:36:49.087

HTML，`this`从点击事件传递

```
<input type="checkbox" onclick="toggle('.myClass', this)" ></legend> 
```

JS

```
function toggle(className, obj) {
    var $input = $(obj);
    if ($input.prop('checked')) $(className).hide();
    else $(className).show();
} 
```

或者，不使用`prop`你可以这样做：

```
function toggle(className, obj) {
    if ( obj.checked ) $(className).hide();
    else $(className).show();
} 
```

或者，在一行中使用[`.toggle( display )`](http://api.jquery.com/toggle/#toggle-display)：

```
function toggle(className, obj) {
    $(className).toggle( !obj.checked )
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T14:36:24.350

使用不是内联的事件处理程序，然后仅`toggle()`使用基于复选框状态的元素：

```
<script src="/js/jquery.js"></script>
<script type="text/javaScript">
    $(function() {
        $('input[type="checkbox"]').on('change', function() {
            $(this).closest('fieldset').find('.myClass').toggle(!this.checked);
        });
    });
</script>

<fieldset>
    <legend>Check Here<input type="checkbox"></legend>
    <span class="myClass">
        <p>This is the text.</p>
    </span>
</fieldset> 
```

[**小提琴**](http://jsfiddle.net/cEAnM/1/)

这甚至适用于具有相同标记的多个字段集。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-02T14:39:42.013

尝试通过 jQuery 绑定事件，然后您可以访问`$(this)`：

```
$(document).ready(function() {
  $(":checkbox").click(function(event) {
    if ($(this).is(":checked"))
      $(".myClass").show();
    else
      $(".myClass").hide();
  });
}); 
```

# java - B-Tree 在序列化方面是如何工作的？

> ID：15766881
> 
> 赞同：1
> 
> 时间：2013-04-02T14:34:01.197
> 
> 标签：java, database, serialization, data-structures, b-tree

在 Java 中，我知道如果要在硬盘上构建 B-Tree 索引，如果 B-Tree 结构必须从 RAM 写入 HD，则可能应该使用序列化。我的问题是，如果以后我想从索引中查询一个键的值，是否可以将 B-Tree 的一部分反序列化回 RAM？理想情况下，只检索特定键的值。将整个索引提取到 RAM 是一个糟糕的设计，至少在 B-Tree 大于 RAM 大小的情况下是这样。

如果这是可能的，如果有人提供一些代码，那就太好了。DBMS 在 Java 或 C 中是如何做到这一点的？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T01:45:38.570

> 如果 B-Tree 结构必须从 RAM 写入 HD，您可能应该使用序列化

绝对不。序列化是实现基于磁盘的 B 树时使用的最后一种技术。您必须能够将单个节点读入内存、添加/删除键、更改指针等，然后将它们放回原处。您还希望文件可以被其他语言读取。您应该定义 B 树节点的与语言无关的表示。这并不难。除了提供的东西，你不需要任何东西`RandomAccessFile`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:46:52.347

您通常将 B-tree 拆分为几个“页面”，每个“页面”都有一些键值对等。然后您一次只需将一个页面加载到内存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T15:07:22.013

为了获得 rdbms 的灵感，检查嵌入式 Java 数据库的源代码可能是一个好主意：Derby、HyperSql、H2、...

如果这些数据库解决了您的问题，我宁愿忘记实现索引并立即使用他们的产品。因为它们是嵌入式的，所以无需设置服务器。- rdbms 代码是应用程序类路径的一部分 - 内存占用量适中。

如果这对你来说当然是可能的......

* * *

如果树可以很容易地放入内存中，我强烈建议将其保留在那里。性能上的差异将是巨大的。更不用说在磁盘上保持同步更改，重组等困难......

在某些时候您需要存储它时，请检查[Externalizable](http://docs.oracle.com/javase/6/docs/api/java/io/Externalizable.html)而不是常规的序列化。序列化是出了名的缓慢和广泛。而 Externalizable 允许您控制写入磁盘的每个字节。更不用说将索引读回内存时的性能差异。

如果树太大而无法放入内存，则必须使用带有某种内存缓存的[RandomAccessFile 。](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html)尽管如此，经常访问的项目还是会从内存中消失。但是，您需要考虑对索引的更新。您必须在某个时候将它们刷新到磁盘。

所以，就*个人而言*，我宁愿*不要*从头开始这样做。而是使用那里的代码。:-)

# c# - 内存映射文件比命名管道快吗？

> ID：15766888
> 
> 赞同：3
> 
> 时间：2013-04-02T14:34:31.990
> 
> 标签：c#, .net, tcp, named-pipes, communication-protocol

我正在阅读 SQL Server Internals and Troubleshooting (Wrox)，它实际上说这`Shared Memory`是默认连接方法，然后是 TCP，然后是命名管道。但奇怪的是他们说：

“命名管道是为局域网 (LAN) 开发的，但它在广域网 (WAN) 等较慢的网络中可能效率低下”

我认为命名管道严格用于 IPC？为了从 IPC 跳转到网络通信，您必须使用 TCP/UDP。对我来说更有趣的是提到共享内存/内存映射文件——它们比 NamedPipes/IPC 快吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:40:28.063

像往常一样，答案是“视情况而定”。如果涉及大量数据，共享内存将减少复制它的大部分开销。但是以这种方式使用映射文件仍然需要某种辅助形式的 IPC 来协调对共享内存空间的访问。

# php - 如何使用标准 php 正则表达式重写 foreach DomDocument 函数

> ID：15766891
> 
> 赞同：0
> 
> 时间：2013-04-02T14:34:34.137
> 
> 标签：php, regex, foreach, replace

我将如何重写这个 DomDocument php 以将我的数组键分配给正确的图像？注意:: $html 或 the_content 中的多个图像。我需要遍历每一个。

这是找到我需要的对齐方式的正则表达式（单词align之后的css类名称的一部分）所以我需要left或right取决于alignleft或alignright的css类

```
preg_match_all('#align(.*?)(" )#si', '<img class="classone twoclass alignLEFT" src="xxxx" />', $arr, PREG_PATTERN_ORDER); 
```

注意:: 它并不总是 alignleft。它可以是 aligncenter alignnone alignright 或各种其他类名。

我只是不知道如何循环遍历每个图像并将找到的内容实际应用于正确的图像。

```
<?php

$html = '<img class="" src="xxxx" />adasdasdasd<img class="classone twoclass alignLEFT" src="xxxx" />';

$domdoc = new DOMDocument('');
$domdoc->loadHTML($html);

$xpath = new DOMXpath($domdoc);

$imgs = $xpath->query('//img');

foreach ($imgs as $element) {

    $class = $element->getAttribute('class');

    if (strpos($class, 'alignLEFT') !== false) {

        $element->setAttribute('align', 'left');
    }

}

// DOM Document works with full html documents, so now we have to isolate our fragment

$bodyelement = $xpath->query('/html/body');
$bodyhtml = $domdoc->saveXML($bodyelement->item(0));

echo str_replace(array('<body>', '</body>'), '', $bodyhtml); 
```

# magento - Magento 语言按钮商店视图

> ID：15766893
> 
> 赞同：0
> 
> 时间：2013-04-02T14:34:35.693
> 
> 标签：magento, localization

我有一个荷兰语网站。[http://www.domain.com和](http://www.domain.com)[http://www.domain.com/german](http://www.domain.com/german)的德国国旗按钮。

我用当地语言德语制作了一个名为 German 的商店视图。我如何在链接 www.domain.com/german 上查看此商店视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:31:45.717

有几种方法可以做到这一点。

1) 在 URL 中启用商店代码。

Magento 允许您将商店视图的商店代码添加到 URL。例如，如果您的荷兰商店视图有一个代码`dutch`，而您的德国商店视图有一个代码`german`，那么 Magento 将自动加载正确的商店。`domain.com/dutch`将加载荷兰语版本，`domain.com/german`并将加载您网站的德语版本。此解决方案的缺点是即使为主域添加了商店代码。

配置设置可以在管理面板（又名 Back Office，BO）> 系统 > 配置 > Web > 网址选项中找到。在那里您将找到“将商店代码添加到 URL”选项。

2) 编辑`.htaccess`文件。

如果您想避免解决方案 1) 的缺点，您可以修改您的主`.htaccess`文件。添加将搜索`/german`后缀并加载德语商店代码的条目。这是一个小例子（我不是这方面的专家，但应该是这样的）：

`SetEnvIf Host .*domain.com/german.* MAGE_RUN_CODE="german"`

你可以玩`.htaccess`更多。如果您想了解更多信息，请搜索网络`.htaccess`。

3)`index.php`应用程序的修改

这与解决方案 2) 非常相似，但您直接在 PHP 中执行此操作。寻找

```
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : '';
```

行 index.php 并将其替换为以下内容：

```
 if (!$_SERVER['MAGE_RUN_CODE'] && strpos($_SERVER['HTTP_HOST'], '/german') !== false) {
    $mageRunCode = 'german';
} else {
    $mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : '';
} 
```

4) 向 Apache vhost 添加一个新条目。

为域创建一个新的虚拟主机（vhost）`domain.com/german`并放在那里`SetEnv MAGE_RUN_CODE "german"`。

在我看来，最好的选择是 2）。它是最灵活的，您不必更改任何代码。对于开发工作站 4) 也足够了。

请注意，这些只是示例，它们可能不适用于第一次拍摄。我是凭记忆写的，现在我无法真正检查它们。希望这能让您简要了解如何处理您的情况。

# objective-c - 全局 UIView 触摸通知

> ID：15766894
> 
> 赞同：0
> 
> 时间：2013-04-02T14:34:41.467
> 
> 标签：objective-c, cocoa-touch, touch, nsnotifications

我正在寻找一种方法来检测是否在任何视图中的任何地方都触摸了 UIWindow。然后我想发送一个控制器将响应的通知。

我正在使用它来超时（即在不活动后注销）

有我可以订阅的通知吗？这将是我首选的互动。我不想在每个视图中都实现我的逻辑，所以类别也可以工作。

也许我缺少一个 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:09:44.233

您总是可以子类`UIWindow`化并覆盖该`sendEvent:`方法

```
- (void)sendEvent:(UIEvent *)event;
{
  [super sendEvent:event];

  if (UIEventTypeTouches == event.type) {
    NSLog(@"Touched");
  }
} 
```

# java - 定义 mongo:repositories 时出错

> ID：15766899
> 
> 赞同：1
> 
> 时间：2013-04-02T14:34:51.740
> 
> 标签：java, mongodb, spring-data, spring-data-mongodb

运行 Junit 测试时出现此错误

```
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 15 in XML document from class path resource [mongo-test-config.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 15; columnNumber: 89; cvc-complex-type.2.4.a: Invalid content was found starting with element 'mongo:repository'. One of '{"http://www.springframework.org/schema/data/repository":include-filter, "http://www.springframework.org/schema/data/repository":exclude-filter}' is expected. 
```

这是我相关的弹簧配置文件

```
<mongo:mongo id="mongoConnection" host="localhost" port="27017" />
<mongo:repositories base-package="gov.ic.isso.ce.data">
    <mongo:repository id="dictionaryService" mongo-template-ref="dictionaryTemplate" />
</mongo:repositories> 
```

这是我在 pom.xml 文件中定义的依赖项

```
<dependency>
          <groupId>org.springframework</groupId>
          <artifactId>spring-core</artifactId>
          <version>3.2.1.RELEASE</version>
      </dependency>

      <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.2.1.RELEASE</version>
      </dependency>

      <dependency>
        <groupId>org.mongodb</groupId>
        <artifactId>mongo-java-driver</artifactId>
        <version>2.9.3</version>
      </dependency>

      <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-mongodb</artifactId>
        <version>1.1.1.RELEASE</version>
      </dependency> 
```

# c# - 如何在另一个函数中引用从私有函数获得的变量？

> ID：15766901
> 
> 赞同：0
> 
> 时间：2013-04-02T14:34:56.083
> 
> 标签：c#, wpf, openfiledialog

我希望有人能帮助我。我比较新，想了解如何将一个类中的变量值传递给另一个类。在这种情况下，我想在 Button_Click_2 中使用 Button_Click_1 中的 numPage 和 filePath 数组。

先感谢您！

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        Microsoft.Win32.OpenFileDialog openFileDialog1 = new Microsoft.Win32.OpenFileDialog();

        openFileDialog1.Filter = "Images (.jpg)|*.jpg";
        openFileDialog1.FilterIndex = 1;

        openFileDialog1.Multiselect = true;

        bool? userClickedOK = openFileDialog1.ShowDialog();

        if (userClickedOK == true)
        {
            string[] filePaths = openFileDialog1.FileNames;
            int imageNum = 0;
            lblFilePath.Content = filePaths[imageNum];
        }

    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        imageNum++;
        lblFilePath.Content = filePath[imageNum];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T14:39:06.993

使用 MainWindow 类中的[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)。

```
private string[] FilePaths{get;set;} 
```

用 FilePath 替换变量 filePath。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T14:43:05.490

您只需要将它们存储为类实例变量而不是本地方法变量。

```
public partial class MainWindow : Window
{
    // These can now be accessed from any method in this class.
    private string[] filepaths = null;
    private int imageNum = 0;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        Microsoft.Win32.OpenFileDialog openFileDialog1 = new Microsoft.Win32.OpenFileDialog();

        openFileDialog1.Filter = "Images (.jpg)|*.jpg";
        openFileDialog1.FilterIndex = 1;

        openFileDialog1.Multiselect = true;

        bool? userClickedOK = openFileDialog1.ShowDialog();

        if (userClickedOK == true)
        {
            // You can use the keyword "this" to access instance variables, but it is optional.
            this.filePaths = openFileDialog1.FileNames;
            this.imageNum = 0;
            lblFilePath.Content = this.filePaths[this.imageNum];
        }

    }

    private void Button_Click_2(object sender, RoutedEventArgs e)
    {
        // You may want to put some validation in here to prevent errors situations.

        // Validate that filePaths has been initialized.
        if (this.filePaths == null)
        {
           System.Windows.Forms.MessageBox.Show("No files paths to display.");
        }
        // Validate that imageNum can be incremented without IndexOutOfRangeException.
        else if (this.imageNum < this.filePaths.Length - 1)
        {
            this.imageNum++;
            lblFilePath.Content = this.filePaths[this.imageNum];
        }
        // Otherwise, loop back to the first file path.
        else
        {
            this.imageNum = 0;
            lblFilePath.Content = this.filePaths[this.imageNum];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:40:22.703

您需要在此处创建实例变量，而不是将变量范围限定为方法的本地变量：

```
public partial class MainWindow : Window
{
    private string[] filePaths;
    private int imageNum = 0;

    //...

} 
```

然后，您可以在这两个方法中使用这些实例变量（确保不要重新定义具有相同名称的新局部变量）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:42:02.687

将两者都作为形式 1 的属性

```
public partial class MainWindow : Window
{

   private string[] FilePaths {get;set;}
   int imageNum = 0;

   public MainWindow()
   {
    InitializeComponent();
   }

private void Button_Click_1(object sender, RoutedEventArgs e)
{
    Microsoft.Win32.OpenFileDialog openFileDialog1 = new Microsoft.Win32.OpenFileDialog();

    openFileDialog1.Filter = "Images (.jpg)|*.jpg";
    openFileDialog1.FilterIndex = 1;

    openFileDialog1.Multiselect = true;

    bool? userClickedOK = openFileDialog1.ShowDialog();

    if (userClickedOK == true)
    {
        FilePaths = openFileDialog1.FileNames;

        lblFilePath.Content = filePaths[imageNum];
    }

}

private void Button_Click_2(object sender, RoutedEventArgs e)
{
    imageNum++;
     if(imageNum<FilePaths.Length)
         lblFilePath.Content = FilePaths[imageNum];
} 
```

}

# haskell - 重新设计 Haskell 类型类

> ID：15766904
> 
> 赞同：4
> 
> 时间：2013-04-02T14:34:59.060
> 
> 标签：haskell, typeclass, evolutionary-algorithm

在得到一些帮助后，理解了我试图编译代码的问题，在这个问题中（[Trouble understand GHC 关于歧义的抱怨](https://stackoverflow.com/questions/15764700/trouble-understanding-ghc-complaint-about-ambiguity)）Will Ness 建议我重新设计我的类型类以避免我不完全满意的解决方案。

有问题的类型类是这些：

```
class (Eq a, Show a) => Genome a where
    crossover       :: (Fractional b) => b -> a -> a -> IO (a, a)
    mutate          :: (Fractional b) => b -> a -> IO a
    develop         :: (Phenotype b)  => a -> b

class (Eq a, Show a) => Phenotype a where
    --In case of Coevolution where each phenotype needs to be compared to every other in the population
    fitness         :: [a] -> a -> Int 
    genome          :: (Genome b) => a -> b 
```

我正在尝试在 Haskell 中创建一个可扩展的进化算法，它应该支持不同的`Genomes`和`Phenotypes`. 例如，一个`Genome`可能是一个位数组，另一个可能是一个整数列表，并且它`Phenotypes`也将不同于[http://en.wikipedia.org/wiki/Colonel_Blotto](http://en.wikipedia.org/wiki/Colonel_Blotto)中代表部队运动的双打列表，或者它可以代表一个ANN。

由于 a`Phenotype`是从 a 开发的，`Genome`因此使用的方法必须是完全可互换的，并且一个`Genome`类应该能够`Phenotypes`通过提供不同的开发方法来支持多个（这可以在代码中静态完成，而不必在运行时动态完成）。

在大多数情况下，使用这些类型类的代码应该完全不知道所使用的特定类型，这就是我提出上述问题的原因。

我想适应这些类型类的一些代码是：

```
-- |Full generational replacement selection protocol
fullGenerational :: (Phenotype b) =>
    (Int -> [b] -> IO [(b, b)]) -> --Selection mechanism
    Int -> --Elitism
    Int -> --The number of children to create
    Double -> --Crossover rate
    Double -> --Mutation rate
    [b] -> --Population to select from
    IO [b] --The new population created
fullGenerational selection e amount cross mute pop = do
    parents <- selection (amount - e) pop
    next <- breed parents cross mute
    return $ next ++ take e reverseSorted
            where reverseSorted = reverse $ sortBy (fit pop) pop

breed :: (Phenotype b, Genome a) => [(b, b)] -> Double -> Double -> IO [b]
breed parents cross mute = do
    children <- mapM (\ (dad, mom) -> crossover cross (genome dad) (genome mom)) parents
    let ch1 = map fst children ++ map snd children
    mutated <- mapM (mutate mute) ch1
    return $ map develop mutated 
```

我知道必须更改此代码并且必须添加新的约束，但我想展示一些使用类型类的代码。例如，上面的全代替换不需要知道任何关于底层的信息`Genome`就可以正常运行；它只需要知道`Phenotypes`能生产`Genome`出它的那个，这样它就可以将它们一起繁殖并创造出新的孩子。的代码`fullGenerational`应该尽可能通用，这样一旦`Phenotype`设计了新的或创建了更好`Genome`的代码，就不需要更改。

如何更改上面的类型类以避免我在类型类歧义方面遇到的问题，同时在一般 EA 代码中保留我想要的属性（应该是可重用的）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T17:12:20.150

> “它只需要知道表型可以产生产生它的基因组”

这意味着表型实际上是两种类型的关系，另一种是用于产生给定表型的基因组类型：

```
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE FunctionalDependencies #-}

import Data.List (sortBy)

class (Eq a, Show a) => Genome a where
    crossover       :: (Fractional b) => b -> a -> a -> IO (a, a)
    mutate          :: (Fractional b) => b -> a -> IO a
    develop         :: (Phenotype b a) => a -> b

class (Eq a, Show a, Genome b) => Phenotype a b | a -> b where
    --  In case of Coevolution where each phenotype needs to be compared to 
    --  every other in the population
    fitness         :: [a] -> a -> Int 
    genome          :: a -> b

breed :: (Phenotype b a, Genome a) => [(b, b)] -> Double -> Double -> IO [b]
breed parents cross mute = do
    children <- mapM (\(dad, mom)-> crossover cross (genome dad) (genome mom)) 
                     parents
    let ch1 = map fst children ++ map snd children
    mutated <- mapM (mutate mute) ch1
    return $ map develop mutated

-- |Full generational replacement selection protocol
fullGenerational :: (Phenotype b a, Genome a) =>
    (Int -> [b] -> IO [(b, b)]) -> --Selection mechanism
    Int -> --Elitism
    Int -> --The number of children to create
    Double -> --Crossover rate
    Double -> --Mutation rate
    [b] -> --Population to select from
    IO [b] --The new population created
fullGenerational selection e amount cross mute pop = do
    parents <- selection (amount - e) pop
    next <- breed parents cross mute
    return $ next ++ take e reverseSorted
            where reverseSorted = reverse $ sortBy (fit pop) pop

fit pop a b = LT   -- dummy function 
```

这编译。每个表型都[必须提供一个](http://www.haskell.org/haskellwiki/Functional_dependencies).`genome`

# java - 多纹理在 LWJGL 中不起作用

> ID：15766907
> 
> 赞同：0
> 
> 时间：2013-04-02T14:35:07.887
> 
> 标签：java, opengl, textures, lwjgl, multitexturing

为了尝试在 LWJGL 中实现多重纹理，我遵循[了本教程。](http://www.clockworkcoders.com/oglsl/tutorial8.htm)但是每当我运行我的代码时，第二个纹理都不会出现，或者第一个纹理会取而代之。这是我绑定纹理的方法：

```
ARBMultitexture.glActiveTextureARB(ARBMultitexture.GL_TEXTURE0_ARB);
bindTexture(myTex);
glEnable(GL_TEXTURE_2D);
glTexEnvf (GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, EXTTextureEnvCombine.GL_COMBINE_EXT);
glTexEnvf (GL_TEXTURE_ENV,EXTTextureEnvCombine.GL_COMBINE_RGB_EXT, GL_REPLACE);
ARBMultitexture.glActiveTextureARB(ARBMultitexture.GL_TEXTURE1_ARB);
bindTexture(myTex2);
glEnable(GL_TEXTURE_2D);
glTexEnvf (GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, EXTTextureEnvCombine.GL_COMBINE_EXT);
glTexEnvf (GL_TEXTURE_ENV, EXTTextureEnvCombine.GL_COMBINE_RGB_EXT, GL_INCR);

drawStuff(); 
```

`Textures`myTex和myTex2 都是`drawStuff()`我绘制所有内容的函数。我使用 slick 来加载纹理等，这是我的 bindTexture 函数：

```
void bindTexture(Texture t) {
    glBindTexture(GL_TEXTURE_2D, t.getTextureID());
} 
```

在`drawStuff()`我有一个自定义的“Face”类，这里是我在那里绘制所有内容的地方：

```
glBegin(GL_TRIANGLES);
    glNormal3f(getNormal().x, getNormal().y, getNormal().z);
    glNormal3f(norm1.x, norm1.y, norm1.z);
    ARBMultitexture.glMultiTexCoord2fARB(ARBMultitexture.GL_TEXTURE0_ARB, t1.x, t1.y);
    ARBMultitexture.glMultiTexCoord2fARB(ARBMultitexture.GL_TEXTURE1_ARB, t1.x, t1.y);
    glVertex3f(p1.x, p1.y, p1.z);
    glNormal3f(norm2.x, norm2.y, norm2.z);
    ARBMultitexture.glMultiTexCoord2fARB(ARBMultitexture.GL_TEXTURE0_ARB, t2.x, t2.y);
    ARBMultitexture.glMultiTexCoord2fARB(ARBMultitexture.GL_TEXTURE1_ARB, t2.x, t2.y);
    glVertex3f(p2.x, p2.y, p2.z);
    glNormal3f(norm3.x, norm3.y, norm3.z);
    ARBMultitexture.glMultiTexCoord2fARB(ARBMultitexture.GL_TEXTURE0_ARB, t3.x, t3.y);
    ARBMultitexture.glMultiTexCoord2fARB(ARBMultitexture.GL_TEXTURE1_ARB, t3.x, t3.y);
    glVertex3f(p3.x, p3.y, p3.z);
glEnd(); 
```

`t1, t2, t3, norm1, norm2, norm3, p1, p2, p3`我制作的 3D 矢量类的所有实例在哪里（我只是在 和 的 z 分量`t1, t2`中保留一个 0 `t3`）。顶点和片段着色器源与上述教程中的完全相同。所有代码都可以正常使用普通的旧纹理。关于如何完成这项工作的任何想法？或者可能是使用 LWJGL 时易于遵循的更好的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:58:59.857

我强烈建议您从[这些教程](https://github.com/integeruser/gltut-lwjgl)中学习 如何将现代 OpenGL 与 LWJGL 一起使用。？如果您查看上述链接中的示例，您会找到自己的方法。我不知道它在固定管道中如何工作，但使用现代一个只是将几个纹理插入片段着色器中的纹理目标并根据需要对那些混合纹理像素进行采样。

# javascript - 确保 高度匹配重新刷新时的视口高度

> ID：15766910
> 
> 赞同：1
> 
> 时间：2013-04-02T14:35:14.110
> 
> 标签：javascript, jquery, css, height, viewport

我试图让 a 的高度与`<section>`每个页面重新加载时视口的高度相匹配。`<section>`即使用户重新调整窗口视口的大小，高度也需要保持在该高度。

即视口是高度：450px，然后设置为450px。当视口增加到 465 像素时，则保持在 450 像素。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:41:46.827

只需使用：

```
$('section').height(function(){
    return $(window).height();
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Rc3Q6/1/)。

或者，更简单地说，使用：

```
$('section').height($(window).height()); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Rc3Q6/2/)。

这将明确地将 设置`height`为视口的高度，或者至少设置为 ; 的高度`window`。而且，只要您不绑定到`resize`视口上的事件，就不应更改它。

# php - 我最近在 wordpress 中的帖子之间的空格

> ID：15766911
> 
> 赞同：0
> 
> 时间：2013-04-02T14:35:15.197
> 
> 标签：php, wordpress

我正在寻找年龄来弄清楚如何在我最近在 wordpress 网站上的帖子之间添加一些空间。

真的没有头绪。有谁能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:41:46.647

你有 2 种风格陈述可以直接影响这些。一个有底边距，但被另一个用 覆盖`margin: 0;`。将此更改为`margin: 0 0 20px 0;`.

```
.primary_content_wrap ul li {
    background: url(images/marker.gif) no-repeat 1px 11px;
    margin: 0;
    padding: 0 0 0 17px;
    list-style: none;
    line-height: 25px;
    font-size: 13px;
    color: #005d9e;
}

.recent-posts li {
    margin: 0 0 20px 0;
    padding: 0;
    border: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:38:02.820

您的每个帖子都是一个带有“条目”类的 li：

```
<li class="entry">...</li> 
```

似乎该条目类的任何 CSS 中都没有任何内容。我要做的是在 CSS 中定义它，并将 margin-bottom 设置为，比如说 10px。

# virtual-machine - 如何在 XEN 中强制关闭或重启 VM？

> ID：15766913
> 
> 赞同：11
> 
> 时间：2013-04-02T14:35:18.047
> 
> 标签：virtual-machine, xen

我碰巧发现 XEN 中的 VM 内存不足，操作系统杀死了它的 shell tty，因此无法在内部在 VM 中输入命令。修复的唯一方法是关闭或重新启动 VM。

"xm shutdown VM-name" 和 "xm reboot VM-name" 已尝试，但不起作用。XEN 运行良好，其余虚拟机都很好，xm 命令也适用于它们。只有生病的虚拟机失控。

是否有任何 XEN 命令可以强制关闭或重新启动其 VM？例如一些带有“--force”标志的命令。我认为“xm reboot”和“xm shutdown”对我来说太优雅了。

我使用的 XEN 版本是 xen-3.0-x86_64 (debian)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T14:39:47.983

您可能想要的[`xm`选项](http://linux.die.net/man/1/xm)（尽管它应该是最后的手段）是`xm destroy`.

> xm 销毁域 ID
> 
> 立即终止域 domain-id。这不会给域操作系统任何反应的机会，它相当于在物理机器上撕掉电源线。在大多数情况下，您将希望使用 shutdown 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T19:53:46.087

我对“xm reboot”有问题，它不会影响并导致子序列“xm shutdown”也没有效果。所以我认为最好的方法是“xm shutdown”，检查“xm uptime”域以查看它是否关闭，或者直到超时并调用“xm destroy”

# imacros - 使用带有 SET !DATASOURCE 的基于 Web 的数据文件

> ID：15766919
> 
> 赞同：0
> 
> 时间：2013-04-02T14:35:29.860
> 
> 标签：imacros

我如何使用基于 web 的文件，即 csv 文件，如[csv 文件链接](http://hakikahost.com/css/profile1.csv)与`SET !DATASOURCE`imacros 中的命令，原因是我想使用基于 web 的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:09:21.220

```
SET !DATASOURCE profile1.csv
SET !DATASOURCE_COLUMNS 4
SET !DATASOURCE_LINE {{!LOOOP}}

TAG POS=1 TYPE=INPUT:TEXT ATTR=CLASS:textbox1 CONTENT={{!COL0}}
TAG POS=1 TYPE=INPUT:TEXT ATTR=CLASS:textbox2 CONTENT={{!COL1}}
TAG POS=1 TYPE=INPUT:TEXT ATTR=CLASS:textbox3 CONTENT={{!COL2}}
TAG POS=1 TYPE=INPUT:TEXT ATTR=CLASS:textbox4 CONTENT={{!COL3}} 
```

此示例从位于 Datasource 文件夹中的硬盘读取 CSV 文件。至于 webased 文件，我现在唯一的想法是，如果您在 Web 浏览器窗口中有类似工作表的东西。iMacros 可以从中读取整个表格并使用这些数据。但是如果没有 JS 脚本，它就不能轻松完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T23:21:15.583

制作一个 iMacros 代码，将该文件从网络服务器下载到您的硬盘驱动器/数据源文件夹。

# c - 用于复数乘法的汇编代码/AVX 指令。（GCC 内联汇编）

> ID：15766921
> 
> 赞同：7
> 
> 时间：2013-04-02T14:35:36.653
> 
> 标签：c, gcc, assembly, complex-numbers, avx

我们正在运行一个科学程序，我们希望实现 AVX 功能。整个程序（用 Fortran+C 编写）将被矢量化，目前我正在尝试在 GCC 内联汇编中实现复数乘法。

汇编代码接受 4 个复数并一次执行两个复数乘法：

```
v2complex cmult(v2complex *a, v2complex *b) {
    v2complex ret;
    asm (
        "vmovupd %2,%%ymm1;"
        "vmovupd %2, %%ymm2;"
        "vmovddup %%ymm2, %%ymm2;"
        "vshufpd $15,%%ymm1,%%ymm1,%%ymm1;"
        "vmulpd %1, %%ymm2, %%ymm2;"
        "vmulpd %1, %%ymm1, %%ymm1;"
        "vshufpd $5,%%ymm1,%%ymm1, %%ymm1;"
        "vaddsubpd %%ymm1, %%ymm2,%%ymm1;"
        "vmovupd %%ymm1, %0;"
        :
        "=m"(ret)
        :
        "m" (*a),
        "m" (*b)
        );
    return ret;
} 
```

其中 a 和 b 是 256 位双精度：

```
typedef union v2complex {
    __m256d v;
    complex c[2];
} v2complex; 
```

问题是代码大多会产生正确的结果，但有时会失败。

我对组装很陌生，但我试图自己弄清楚。似乎 C 程序（优化的 -O3）与`ymm`汇编代码中使用的寄存器交互。例如，我可以在执行乘法之前打印其中一个值（例如 a），并且程序永远不会给出错误的结果。

我的问题是如何告诉 GCC 不要与 ymm 交互。我没有设法将被破坏的`ymm`寄存器列表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T14:44:16.967

正如您推测的那样，问题在于您没有告诉 GCC 您正在破坏哪些寄存器。如果他们还不支持将 YMM 寄存器放入 clobber 列表中，我会感到惊讶；你使用的是什么版本的 GCC？

无论如何，将相应的 XMM 寄存器放在 clobber 列表中几乎肯定就足够了：

```
: "=m" (ret) : "m" (*a), "m" (*b) : "%xmm1", "%xmm2"); 
```

* * *

其他一些注意事项：

*   您将两个输入加载两次，这是低效的。没有理由这样做。
*   我将`"r" (a), "r" (b)`用作约束并编写我的负载，例如`vmovupd (%2), %%ymm1`. 生成的代码可能没有区别，但它似乎更符合习惯用法。
*   不要忘记`vzeroupper`在执行任何 SSE 代码之前放置以下 AVX 代码以避免（大）停顿。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T15:40:06.753

我添加两条评论，而不是直接回答您的问题：

*   我强烈建议使用编译器内在函数而不是直接汇编。这样，编译器负责寄存器分配，并且可以更好地优化您的代码（内联方法、重新排序指令等）
*   [Agner Fog](http://www.agner.org/optimize/)有一个优化的向量化操作的[C++ 向量类库](http://www.agner.org/optimize/vectorclass.pdf)，包括对复数的操作。即使您可能无法在 C 代码中直接使用他的库，他的优化代码也可能是一个很好的起点；见压缩[源代码](http://www.agner.org/optimize/vectorclass.zip)`src/special/complexvec.h`。

# html - 使 png swing 在大多数浏览器上工作

> ID：15766922
> 
> 赞同：0
> 
> 时间：2013-04-02T14:35:37.210
> 
> 标签：html, css

我有一个像这样的png

```
<img class="swing" src="http://www.google.com/intl/en_ALL/images/srpr/logo1w.png" /> 
```

我怎样才能对它应用摇摆效果？

我正在寻找 goolge 并找到了这段代码

```
@-webkit-keyframes swing {
    20%, 40%, 60%, 80%, 100% { -webkit-transform-origin: top center; }
    20% { -webkit-transform: rotate(15deg); }   
    40% { -webkit-transform: rotate(-10deg); }
    60% { -webkit-transform: rotate(5deg); }    
    80% { -webkit-transform: rotate(-5deg); }   
    100% { -webkit-transform: rotate(0deg); }
}

@-moz-keyframes swing {
    20% { -moz-transform: rotate(15deg); }  
    40% { -moz-transform: rotate(-10deg); }
    60% { -moz-transform: rotate(5deg); }   
    80% { -moz-transform: rotate(-5deg); }  
    100% { -moz-transform: rotate(0deg); }
}

@-o-keyframes swing {
    20% { -o-transform: rotate(15deg); }    
    40% { -o-transform: rotate(-10deg); }
    60% { -o-transform: rotate(5deg); } 
    80% { -o-transform: rotate(-5deg); }    
    100% { -o-transform: rotate(0deg); }
}

@keyframes swing {
    20% { transform: rotate(15deg); }   
    40% { transform: rotate(-10deg); }
    60% { transform: rotate(5deg); }    
    80% { transform: rotate(-5deg); }   
    100% { transform: rotate(0deg); }
}

.swing {
    -webkit-transform-origin: top center;
    -moz-transform-origin: top center;
    -o-transform-origin: top center;
    transform-origin: top center;
    -webkit-animation-name: swing;
    -moz-animation-name: swing;
    -o-animation-name: swing;
    animation-name: swing;
} 
```

但这可能行不通？有没有办法将摇摆效果应用于 png 并在大多数浏览器上看到它？

如何应用效果，[我做了一个jsfiddle](http://jsfiddle.net/M5v7V/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:39:02.720

你需要给动画一个持续时间

```
.swing {
   -webkit-transform-origin: top center;
   -moz-transform-origin: top center;
   -o-transform-origin: top center;
   transform-origin: top center;
   -webkit-animation: swing 2s;
   -moz-animation: swing 2s;
   -o-animation: swing 2s;
   animation: swing 2s;
} 
```

# xsd - 使用文档从 Java 生成 XSD

> ID：15766928
> 
> 赞同：2
> 
> 时间：2013-04-02T14:35:57.770
> 
> 标签：xsd, jaxb

1.  我创建了一个 XSD 架构并通过标签放入了一些文档。
2.  从 XSD 我使用 Jaxb 生成 Java 类（来自 eclipse - jdk1.6）
3.  我现在计划将我的 java 类用作“源”并根据出现的要求修改它们
4.  我将从修改后的 Java 类生成 XSD，以保持 XSD 同步。

在这个过程中，XSD 上的任何“文档”都会丢失。（即当我从 Java 生成它时）。有没有办法解决这个问题？谢谢。

# mysql - Appfog mysql隧道错误-此事件机器上的加密不可用

> ID：15766930
> 
> 赞同：8
> 
> 时间：2013-04-02T14:36:00.563
> 
> 标签：mysql, ruby, tunnel, appfog, paas

我们已经使用 caldecott 和`af tunnel`command 建立了与 appfog 的连接。我们尝试连接到一个 mysql 服务来加载和执行一个大的 .sql 文件来填充数据库。

我们在 VirtualBox 上的 3 台不同的机器 Ubuntu、VirtualBox 上的 Feora 18 和本机 Ubuntu 上进行了尝试。我们也在另一个帐户上尝试过，但我们不断收到此错误：

```
Launching 'mysql --protocol=TCP --host=localhost --port=10000 --user=uZVQhGhbYEzyb --password=pNu1l6xbXVhbj d39d6d0e6344b41a4aaeada16dfca2a46'

terminate called after throwing an instance of 'std::runtime_error'
 what():  Encryption not available on this event-machine
ERROR 2013 (HY000): Lost connection to MySQL server at 'reading initial communication packet', system error: 0

Aborted (core dumped) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T16:20:28.283

感谢 appfog 客户支持，我设法解决了这个问题。我的发行版缺少 ssl 提供程序。

在 Fedora 上解决这个问题

```
yum install openssl openssl-devel
gem uninstall eventmachine
gem install eventmachine 
```

但是，我在执行大型 sql 脚本时仍然遇到问题。有谁知道这个问题的巧妙解决方案？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-20T13:06:56.770

对于 Windows 系统，我通过执行以下操作使其运行：

1.  [从这里](http://slproweb.com/products/Win32OpenSSL.html)安装 Win32 OpenSSL v1.0.1e Light

2.  如果尚未安装，请从同一链接安装 Visual C++ 2008 Redistributables。

3.  使用新安装的 open-ssl 在 Ruby 中重新安装 eventmachine。

> gem install eventmachine -- --with-ssl-dir=C:\OpenSSL-Win32

（您可能需要 C:\OpenSSL-Win32\bin）

安装完成后，您就可以开始使用任何服务了！（在我的情况下是postgresql）

# image - 使用 VBA 在 PowerPoint 中插入/更新图像？

> ID：15766931
> 
> 赞同：1
> 
> 时间：2013-04-02T14:36:04.193
> 
> 标签：image, vba, powerpoint

我正在制作一个交互式 Powerpoint 演示文稿，该演示文稿之前从我的本地服务器 (XAMPP) 读取了一个文本文件并显示了它。我现在想更新它，以便用户可以手写他们的响应，并将其显示在幻灯片上。我有一个 jQuery 插件，可以让某人使用手写笔，并将“绘图”保存为本地服务器上的图像。

我的问题是，如何使用 VBA 宏将图像插入 PowerPoint？或者由于图像始终具有相同的文件路径，但会被替换为不同的图像，我可以以某种方式“更新”幻灯片上的图像吗？对不起，如果它令人困惑。

这是我尝试过的 VBA：

```
Sub insert()
    Dim oPic As Shape
    Set oPic = ActivePresentation.Slides(1).Shapes.AddPicture("http://localhost/image.png", False, True, 0, 0, -1, -1)
End Sub 
```

我还可以获得计算机上图像的路径，而不是服务器。

当我运行宏时，出现“找不到文件”错误。有谁知道出了什么问题？

谢谢！

PS：如果有人感兴趣，该插件称为[Signature Pad](http://thomasjbradley.ca/lab/signature-pad/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:09:09.483

看起来我可以插入图像，如果它在完全相同的文件夹中：

```
Sub insert()
    Dim oPic As Shape
    Set oPic = ActivePresentation.Slides(1).Shapes.AddPicture("image.png", False, True, 0, 0, -1, -1)
End Sub 
```

这可行，但如果有人知道如何进入另一个文件夹，请告诉我。如果我尝试`folder/image.png`或`/folder/image.png`作为文件路径，它不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T08:08:38.520

它不需要位于完全相同的文件夹中，但您确实需要使用 Mac 样式的路径：

```
#If Mac Then
    imagePath = (MacScript("get path to startup disk as string") & "Users:name:Desktop:SomeFolder:My_Picture.png")
#Else
    imagePath = "C:\path\to\My_Picture.png"
#End If

activeSlide.Shapes.AddPicture(imagePath, False, True, 10, 10) 
```

希望有帮助。

# html - Chrome 将黑色背景放在我的输入框上

> ID：15766934
> 
> 赞同：-2
> 
> 时间：2013-04-02T14:36:15.543
> 
> 标签：html, css

我正在处理的每个网站突然在 Chrome 中都有一个黑色的输入框。我的研究指出这可能是一个 webkit 问题。但我说不出来，也不知道该怎么办。有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:42:19.853

我没有注意到这一点。总是有简单的卸载和重新安装 Chrome，但您也可以使用以下 CSS：

```
input[type="text"] {
    background-color:white; /* or whatever colour you choose */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:58:15.137

好吧，当然是个傻瓜，我不小心在 Chrome 中点击了“高对比度”扩展。

# ios - 什么时候使用 removeFromSuperview？

> ID：15766949
> 
> 赞同：0
> 
> 时间：2013-04-02T14:36:55.527
> 
> 标签：ios, objective-c

在 Objective-C 中编程对象时，我有一个小问题。我有一个几乎完整的应用程序，一切正常。我的问题是我将我的对象设置为 nil 并在适当的时候释放它们。

但这是否足够，或者我应该何时何地使用 removefromsuperview？

在将 UIButton 添加到 UITableViewCell 的情况下，我使用以下代码添加 UIButton：

```
UIButton *buttonReset = [UIButton buttonWithType:UIButtonTypeContactAdd];
buttonReset.frame = CGRectMake(250.0f, 7.0f, 75.0f, 30.0f);
[cell addSubview:buttonReset];
buttonReset addTarget:self action:@selector(resetSettings) forControlEvents:UIControlEventTouchUpInside];
buttonReset = nil;
[buttonReset release]; 
```

我是否也需要使用

```
[buttonReset removeFromSuperview]; 
```

在这种情况下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T14:44:10.013

```
buttonReset = nil;
[buttonReset release]; 
```

这没有意义。您设置一个指向`nil`（空指针）的指针，然后向它发送一条消息。在大多数其他语言中，这将导致崩溃。在 Objective-C 中是允许的，但什么都不会发生。您必须`release`在设置为`nil`. 但是在这种情况下你不应该这样做，因为`buttonReset`它是一个自动释放的对象（你没有使用 alloc/init 来创建它），所以你不拥有它，因此你不能释放它。

`removeFromSuperview`在这种情况下，您也不必使用。您将一个按钮（一个子视图）添加到您的单元格（超级视图）。超级视图将持有按钮的强（保留）引用。然后释放单元格时，它还将处理其所有子视图。您只需要在您真正想要这样做时自己删除它，而不是出于内存管理的原因。

如果您还不知道它，您可能需要考虑在将来使用[自动引用计数 (ARC)](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:42:25.873

不，您不应该调用`[buttonReset removeFromSuperview];`，至少不应该立即调用：如果这样做，按钮将从屏幕上消失（鉴于方法的名称，这应该不足为奇）。此外，您无需将按钮设置为`nil`。

`removeFromSuperview`当您需要从屏幕上删除控件时需要调用。如果您也释放它，则代表您的控件的对象将被销毁。例如，如果您以编程方式为特定任务添加了一个按钮，并且必须在任务完成后删除该按钮，则调用`removeFromSuperview`是合适的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T16:24:47.503

调用`removeFromSuperview`视图会导致它从其父视图中移除。这将使目标视图及其包含的所有视图从屏幕上消失。

在您的情况下，我只需将对象设置为 nil 并完成它。

看看[removefromsuperview 是否释放了滚动视图的对象？](https://stackoverflow.com/questions/1340754/does-removefromsuperview-releases-the-objects-of-scrollview).

里面有有趣的信息。

> 但值得深入挖掘，因为它是 ObjC 中一个非常重要的概念。你永远不应该在你没有显式或隐式保留的对象上调用 -release（通过调用三个魔术词之一）。您不会调用 -release 来释放对象。你调用它来释放你对对象的持有。scrollview 是否保留其子视图不是您的事（它确实保留了其子视图，但仍然不是您的事）。-removeFromSuperview 是否调用 -release 也不是你的事。那是在滚动视图和它的子视图之间。重要的是，当你关心对象时你保留它们，当你不再关心它们时释放它们，让系统的其余部分负责保留和释放它关心的东西。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-02T14:41:44.457

你应该只使用

```
[buttonReset removeFromSuperview]; 
```

接着

```
buttonReset = nil; 
```

正如苹果所说

> 如果接收者的 superview 不为零，则 superview 释放接收者。如果您打算重用视图，请确保在调用此方法之前保留它，并在以后酌情再次释放它。

在[UIView 参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)

# php - php重置密码链接

> ID：15766950
> 
> 赞同：3
> 
> 时间：2013-04-02T14:36:57.183
> 
> 标签：php

我已经创建了一个用户登录系统。

在我忘记密码的页面。我使用 php 电子邮件给用户。用户将收到一封包含链接的电子邮件

关联-

```
....?email=abc@gmail.com&confirm_code=uefu8878ef... 
```

用户可以单击此链接访问 reset_password 页面。

然而，这是使用 GET，这意味着任何人都可以检查浏览器历史记录以访问此页面并重置密码。

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T14:37:31.337

使用链接后，将确认码标记为已使用/无效，因此无法再次使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:39:31.117

如果您还想隐藏电子邮件，请生成自定义令牌来执行此操作。令牌必须是唯一的，并与数据库中的电子邮件地址保持链接。已使用时将其删除（或标记为已使用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:48:48.657

将您的确认代码保存在数据库中，并在其与电子邮件地址之间建立链接并给它一个时间，以便在时间到期后它会过期，现在每次请求此页面时首先查看与此电子邮件相关的确认代码和如果是检查使用时间和数据库内的时间，那么如果它没有过期，则将其标记为已授权，然后处理请求，否则删除它的记录

然后关于到期更安全，我认为如果您将到期日期设置为 1 小时，这将是有意义的。希望这会有所帮助:)

# jquery - jQuery 顺序 XML 过滤仅适用于选择的第一个选项

> ID：15766954
> 
> 赞同：0
> 
> 时间：2013-04-02T14:37:11.903
> 
> 标签：jquery, xml

我正在编写一个 jQuery 应用程序来帮助用户从在线商店中选择产品。我通过根据他们的选择顺序过滤 XML 来做到这一点。我的代码现在的问题是只选择了第一个选项（我现在只使用 2 个选项）。如果用户首先选择“男性”或“女性”，他们会看到所有男性或女性钱包。但是，如果他们随后选择一种材料，则页面根本不会改变。反之亦然：如果他们首先选择一种材料，他们会看到该材料的所有钱包，但如果他们随后选择一种性别，则不会进一步缩小范围。

这是适用的代码：

```
$.get('wallets.xml', function(data) {
// Get the chosen wallets
if (genderChosen && genderChosen != "" && $walletsChosen instanceof jQuery) {
    $walletsChosen.filter('wallet[gender=' + genderChosen + ']');
}
else if (genderChosen && genderChosen != "") {
    $walletsChosen = $(data).find('wallet[gender=' + genderChosen + ']');
}
if (materialChosen && materialChosen != "" && $walletsChosen instanceof jQuery) {
    $walletsChosen.filter('wallet[material=' + materialChosen + ']');
    alert("material chosen, jQuery");
}
else if (materialChosen && materialChosen != "") {
    $walletsChosen = $(data).find('wallet[material=' + materialChosen + ']');
    alert("material chosen, non-jQuery");
}
// Print the chosen wallets
if ($walletsChosen instanceof jQuery) {
    $('#content').empty();
    $walletsChosen.each(function() {
        var $wallet = $(this);
        printWallet($wallet);
    });
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:40:27.777

`.filter`产生源集的过滤版本。它不会改变集合本身。

而不仅仅是`$walletsChosen.filter(...)`你想使用`$wallesChosen = $wallestChosen.filter(...)`.

# android - 哪里可以找到旧版本的android ndk

> ID：15766957
> 
> 赞同：9
> 
> 时间：2013-04-02T14:37:17.063
> 
> 标签：android, android-ndk

好吧，你们很多人会说这是这个的[副本](https://stackoverflow.com/questions/6849981/where-do-i-find-old-versions-of-ndk)

但它不是！

我认为两年前有人问过这个问题，现在你无法构建到以前的 ndk 版本的路径。我一直在尝试为 Windows 7 64 位的 android ndk r8b 构建路径，但[结果](http://dl.google.com/android/ndk/android-ndk-r8b-windows-x86_64.zip)如下。

任何人都知道如何找到以前的ndk版本

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T23:23:57.117

NDK r8e 是第一个具有 32 位和 64 位版本的 NDK。之前的都是 32 位的并且没有任何后缀，所以 r8b 将是：

[https://dl.google.com/android/ndk/android-ndk-r8b-windows.zip](https://dl.google.com/android/ndk/android-ndk-r8b-windows.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T20:41:43.960

另一个答案中的链接适用于相当古老的 r8b NDK。除非您特别需要，否则这里是最新的 r8 Win 64 版本的链接：[https ://dl.google.com/android/ndk/android-ndk-r8e-windows-x86_64.zip](https://dl.google.com/android/ndk/android-ndk-r8e-windows-x86_64.zip)

恼人的是谷歌没有在他们的网站上留下旧版本的链接

# spring - Spring3 + JSF 复合组件

> ID：15766958
> 
> 赞同：0
> 
> 时间：2013-04-02T14:37:23.763
> 
> 标签：spring, jsf, maven, composite-component

*更新*

我试图在我的 spring3 应用程序中使用 JSF 复合组件。做一个简单的测试

/test（映射到视图视图\test.xhtml）

我收到以下错误：

```
 org.springframework.web.util.NestedServletException: Request processing failed; nested exception is javax.faces.FacesException
     org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:656)
     org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
     javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
     javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
  causa raíz

  javax.faces.FacesException
     com.sun.faces.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:141)
     com.sun.faces.lifecycle.Phase.doPhase(Phase.java:119)
     com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
     org.springframework.faces.mvc.JsfView.renderMergedOutputModel(JsfView.java:85)
     org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
     org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
     org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
     org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
     org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
     org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
     javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
     javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
  causa raíz

  java.lang.NullPointerException
     com.sun.faces.application.ApplicationImpl.createComponent(ApplicationImpl.java:972)
     org.springframework.faces.webflow.Jsf2FlowApplication.createComponent(Jsf2FlowApplication.java:68)
     com.sun.faces.facelets.tag.jsf.CompositeComponentTagHandler.createComponent(CompositeComponentTagHandler.java:165)
     com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.createComponent(ComponentTagHandlerDelegateImpl.java:488)
     com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:157)
     javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
     javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
     com.sun.faces.facelets.tag.ui.DefineHandler.applyDefinition(DefineHandler.java:103)
     com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:178)
     com.sun.faces.facelets.impl.DefaultFaceletContext$TemplateManager.apply(DefaultFaceletContext.java:395)
     com.sun.faces.facelets.impl.DefaultFaceletContext.includeDefinition(DefaultFaceletContext.java:366)
     com.sun.faces.facelets.tag.ui.InsertHandler.apply(InsertHandler.java:108)
     javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
     javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
     com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:188)
     javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
     javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
     com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
     javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
     com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
     com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:308)
     com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:367)
     com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346)
     com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
     com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:155)
     com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
     com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
     com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
     com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:769)
     com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
     com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
     com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
     org.springframework.faces.mvc.JsfView.renderMergedOutputModel(JsfView.java:85)
     org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
     org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
     org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
     org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
     org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
     org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
     javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
     javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

如果我删除复合组件，此错误就会消失

这是我的文件树

```
 \
 +src

 |   +main
 |      +java
 |      |  \(...)
        |      \CustomResourceHandler.java
 |      +resources
 |      |  +META-INF
 |      |  +applicationContext.xml
 |      |  \(...)
 |      \webapp
 |         +(...)
 |         +resources
 |         |  \ui
 |         |    \util
 |         |      \hello.xhtml
 |         +WEB-INF
 |         |  \views
 |         |     \test.xhtml
 |         +faces-config.xml
 |         \web.xml
 \pom.xml 
```

你好.xhtml

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:h="http://java.sun.com/jsf/html">
          <composite:interface>
          </composite:interface>

          <composite:implementation>
             <h:outputText value="hello composite" />
          </composite:implementation>
  </html> 
```

测试.xhtml

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

  <html xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:util="http://java.sun.com/jsf/composite/ui/util">

  <util:hello/>

  </html> 
```

应用程序上下文.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
  <beans xmlns="http://www.springframework.org/schema/beans"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:context="http://www.springframework.org/schema/context"
         xmlns:aop="http://www.springframework.org/schema/aop"
         xmlns:tx="http://www.springframework.org/schema/tx"
         xmlns:mvc="http://www.springframework.org/schema/mvc"
         xmlns:p="http://www.springframework.org/schema/p"

         xsi:schemaLocation="
          http://www.springframework.org/schema/beans 
          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
          http://www.springframework.org/schema/context 
          http://www.springframework.org/schema/context/spring-context-3.0.xsd
          http://www.springframework.org/schema/tx 
          http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
          http://www.springframework.org/schema/aop 
          http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
          http://www.springframework.org/schema/mvc
          http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

     <!-- holding properties for database connectivity /-->
      <context:property-placeholder location="classpath:jdbc.properties"/>

      <context:component-scan base-package="........" />
      <context:component-scan base-package="........"/>

      <!-- map all requests to /resources/** to the container default servlet (ie, don't let Spring handle them) -->

      <bean id="defaultServletHttpRequestHandler" class="org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler" />

      <bean id="simpleUrlHandlerMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
          <property name="urlMap">
          <map>
              <entry key="/resources/**" value-ref="defaultServletHttpRequestHandler" />
              <entry key="/javax.faces.resource/**" value-ref="defaultServletHttpRequestHandler" />
          </map>
          </property>
      </bean>

      <bean class="org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter" />

      <mvc:annotation-driven/>
      <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
          <property name="cache" value="false" />
          <property name="viewClass" value="org.springframework.faces.mvc.JsfView" />
          <property name="prefix" value="/WEB-INF/views/" />
          <property name="suffix" value=".xhtml" />
      </bean>
      <context:annotation-config/>

      <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${jdbc.driverClassName}"/>
        <property name="url" value="${jdbc.url}"/>
        <property name="username"  value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
      </bean>

      <bean id="entityManagerFactory"
     class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
     p:dataSource-ref="dataSource"
     p:jpaVendorAdapter-ref="jpaAdapter">
     <property name="loadTimeWeaver">
            <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/>
          </property>                             
          <property name="persistenceUnitName" value="....."></property>
      </bean>

      <bean id="jpaAdapter"
     class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
     p:database="${jpa.database}"
     p:showSql="${jpa.showSql}"/>

      <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
     p:entityManagerFactory-ref="entityManagerFactory"/>
  </beans> 
```

面孔-config.xml

```
 <?xml version="1.0" encoding="UTF-8"?>

  <faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="
        http://java.sun.com/xml/ns/javaee
        http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">

      <application>
          <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>

          <resource-handler>....***.CustomResourceHandler</resource-handler>

          <locale-config>
          </locale-config>

          <resource-bundle>
              <base-name>compass</base-name>
              <var>txt</var>
          </resource-bundle>
      </application>
  </faces-config> 
```

web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
  <web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
     <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext.xml</param-value>
     </context-param>

     <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>classpath:log4j.xml</param-value>
     </context-param>

     <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
     </listener>
     <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
     </listener>
     <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
     </servlet>
     <servlet>
        <servlet-name>DispatcherServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
           <param-name>contextConfigLocation</param-name>
           <param-value>classpath:applicationContext.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
     </servlet>
     <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
     </servlet-mapping>
     <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
     </servlet-mapping>
     <servlet-mapping>
        <servlet-name>DispatcherServlet</servlet-name>
        <url-pattern>/</url-pattern>
     </servlet-mapping>

  </web-app> 
```

CustomResourceHandler.java

```
 import javax.faces.application.Resource;
  import javax.faces.application.ResourceHandler;
  import javax.faces.application.ResourceHandlerWrapper;
  import javax.faces.application.ResourceWrapper;
  import javax.faces.context.FacesContext;

  import com.sun.faces.util.Util;

  /**
   * Custom JSF ResourceHandler.
   * 
   * This handler bridges between Spring MVC and JSF managed resources. The handler takes
   * care of the case when a JSF facelet is used as a view by a Spring MVC Controller and the
   * view uses components like h:outputScript and h:outputStylesheet by correctly pointing the 
   * resource URLs generated to the JSF resource handler.
   * 
   * The reason this custom handler wrapper is needed is because the JSF internal logic assumes
   * that the request URL for the current page/view is a JSF url. If it is a Spring MVC request, JSF
   * will create URLs that incorrectly includes the Spring controller context.
   * 
   * This handler will strip out the Spring context for the URL and add the ".jsf" suffix, so the
   * resource request will be routed to the FacesServlet with a correct resource context (assuming the
   * faces servlet is mapped to the *.jsf pattern). 
   * 
   *
   */
  public class CustomResourceHandler extends ResourceHandlerWrapper {

      private ResourceHandler wrapped;

      public CustomResourceHandler(ResourceHandler wrapped) {
          this.wrapped = wrapped;
      }
      @Override
      public ResourceHandler getWrapped() {
          return this.wrapped;    
      }

      @Override
      public Resource createResource(String resourceName, String libraryName) {
          return new CustomResource(super.createResource(resourceName, libraryName),resourceName);
      }
      @Override
      public Resource createResource(String resourceName, String libraryName,
              String contentType) {
        return new CustomResource(super.createResource(resourceName, libraryName, contentType),resourceName);
      }

      private static class CustomResource extends ResourceWrapper {

          private Resource wrapped;
          private String resourceName;

          private CustomResource(Resource wrapped,String resourceName) {
           //super();
           this.resourceName = resourceName;
              this.wrapped = wrapped;
          }
          @Override
          public Resource getWrapped() {
              return this.wrapped;
          }
          @Override
          public String getRequestPath() {
           FacesContext context = FacesContext.getCurrentInstance();

           // si no existe el recurso lo mapeamos igualmente 
           if (this.wrapped == null) {
              return  context.getExternalContext().getRequestContextPath() + "/resources/" + resourceName;
           }
           String path = super.getRequestPath();

              String facesServletMapping = Util.getFacesMapping(context);
              // if prefix-mapped, this is a resource that is requested from a faces page
              // rendered as a view to a Spring MVC controller.
              // facesServletMapping will, in fact, be the Spring mapping
              if (Util.isPrefixMapped(facesServletMapping)) {
                  // remove the Spring mapping
                  path = path.replaceFirst("(" + facesServletMapping + ")/", "/");
                  // append .jsf to route this URL to the FacesServlet
                  path = path.replace(wrapped.getResourceName(), wrapped.getResourceName() + ".jsf");
              }
              return path;
          }

      }
  } 
```

pom.xml

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
     <modelVersion>4.0.0</modelVersion>
     <groupId>****</groupId>
     <artifactId>****/artifactId>
     <version>0.0.1</version>
     <packaging>war</packaging>
     <name>****</name>
     <properties>
        <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
        <org.hibernate.version>3.5.1-Final</org.hibernate.version>
        <maven.compiler.source>1.6</maven.compiler.source>
        <maven.compiler.target>1.6</maven.compiler.target>
        <com.sun.faces.version>2.1.1-b04</com.sun.faces.version>
        <!--  2.0.4-b09 -->
     </properties>
     <repositories>
        <repository>
           <!-- Crear este repositorio con nexus para hostear los jar de terceros -->
           <id>terceros</id>
           <name>Repositorio Local</name>
           <url>http://127.0.0.1:8081/nexus/content/repositories/thirdparty</url>
        </repository>
        <repository>
           <id>repository.jboss.org-public</id>
           <name>JBoss repository</name>
           <url>https://repository.jboss.org/nexus/content/groups/public</url>
        </repository>
     </repositories>
     <dependencies>
        <dependency>
           <groupId>log4j</groupId>
           <artifactId>log4j</artifactId>
           <version>1.2.16</version>
        </dependency>
        <dependency>
           <groupId>org.springframework.security</groupId>
           <artifactId>spring-security-config</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
           <groupId>org.springframework.security</groupId>
           <artifactId>spring-security-core</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
           <groupId>org.springframework.security</groupId>
           <artifactId>spring-security-ldap</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
           <groupId>org.springframework.security</groupId>
           <artifactId>spring-security-taglibs</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
           <groupId>org.springframework.security</groupId>
           <artifactId>spring-security-web</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
           <groupId>com.sun.faces</groupId>
           <artifactId>jsf-api</artifactId>
           <version>${com.sun.faces.version}</version>
        </dependency>

        <dependency>
           <groupId>com.sun.faces</groupId>
           <artifactId>jsf-impl</artifactId>
           <version>${com.sun.faces.version}</version>
        </dependency>

        <dependency>
           <groupId>org.slf4j</groupId>
           <artifactId>jul-to-slf4j</artifactId>
           <version>1.6.1</version>
        </dependency>

        <dependency>
           <groupId>cglib</groupId>
           <artifactId>cglib</artifactId>
           <version>2.2.2</version>
        </dependency>

        <dependency>
           <groupId>org.springframework</groupId>
           <artifactId>spring-tx</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
           <groupId>org.springframework</groupId>
           <artifactId>spring-webmvc</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
           <groupId>org.springframework.webflow</groupId>
           <artifactId>spring-faces</artifactId>
           <version>2.3.2.RELEASE</version> <!-- no hay ${org.springframework.version} -->
        </dependency>

        <dependency>
           <groupId>org.springframework</groupId>
           <artifactId>spring-core</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
           <groupId>org.springframework</groupId>
           <artifactId>spring-asm</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
           <groupId>org.springframework</groupId>
           <artifactId>spring-context</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
           <groupId>org.springframework</groupId>
           <artifactId>spring-expression</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
           <groupId>org.springframework</groupId>
           <artifactId>spring-aop</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
           <groupId>org.springframework</groupId>
           <artifactId>spring-beans</artifactId>
           <version>${org.springframework.version}</version>
        </dependency>

        <dependency>
           <groupId>org.springframework</groupId>
           <artifactId>spring-orm</artifactId>
           <version>${org.springframework.version}</version>
           <type>jar</type>
           <scope>compile</scope>
        </dependency>
        <dependency>
           <groupId>org.hibernate</groupId>
           <artifactId>hibernate-core</artifactId>
           <version>${org.hibernate.version}</version>
        </dependency>
        <dependency>
           <groupId>org.hibernate</groupId>
           <artifactId>hibernate-annotations</artifactId>
           <version>${org.hibernate.version}</version>
        </dependency>
        <dependency>
           <groupId>org.hibernate</groupId>
           <artifactId>hibernate-entitymanager</artifactId>
           <version>${org.hibernate.version}</version>
        </dependency>
        <dependency>
           <groupId>org.hibernate.javax.persistence</groupId>
           <artifactId>hibernate-jpa-2.0-api</artifactId>
           <version>1.0.0.Final</version>
        </dependency>
        <dependency>
           <groupId>org.slf4j</groupId>
           <artifactId>slf4j-log4j12</artifactId>
           <version>1.6.1</version>
        </dependency>
        <dependency>
           <groupId>javax.servlet</groupId>
           <artifactId>jsp-api</artifactId>
           <version>2.0</version>
           <scope>provided</scope>
        </dependency>

        <dependency>
           <groupId>javax.servlet</groupId>
           <artifactId>jstl</artifactId>
           <version>1.2</version>
        </dependency>

        <dependency>
           <groupId>aopalliance</groupId>
           <artifactId>aopalliance</artifactId>
           <version>1.0</version>
        </dependency>
        <dependency>
           <groupId>commons-logging</groupId>
           <artifactId>commons-logging</artifactId>
           <version>1.1.1</version>
        </dependency>

        <dependency>
           <!-- Hosteado con Nexus -->
           <groupId>com.oracle</groupId>
           <artifactId>ojdbc6</artifactId>
           <version>11.2</version>
           <scope>provided</scope>
        </dependency>

        <dependency>
           <!-- Hosteado con Nexus -->
           <groupId>com.microsoft.sqlserver</groupId>
           <artifactId>sqljdbc4</artifactId>
           <version>3.0</version>
           <scope>provided</scope>
        </dependency>

        <dependency>
           <groupId>javax.servlet</groupId>
           <artifactId>servlet-api</artifactId>
           <version>2.5</version>
        </dependency>
     </dependencies>
     <build>
        <plugins>
           <plugin>
              <artifactId>maven-compiler-plugin</artifactId>
              <version>2.3.2</version>
              <configuration>
                 <source>${maven.compiler.source}</source>
                 <target>${maven.compiler.target}</target>
              </configuration>
           </plugin>
        </plugins>
     </build>
  </project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:50:22.443

在`test.xhtml`您的复合组件的命名空间中是错误的。将其更改为：

```
xmlns:util="http://java.sun.com/jsf/composite/ui/util" 
```

到：

```
xmlns:util="http://java.sun.com/jsf/composite/ui" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:06:47.250

问题是 JSF Composite 并不像我的 CustomResource 一样，做了一个解决方法并且它现在可以工作了。可能不是最优雅的解决方案。

CustomResourceHandler.java

```
 import javax.faces.application.Resource;
  import javax.faces.application.ResourceHandler;
  import javax.faces.application.ResourceHandlerWrapper;
  import javax.faces.application.ResourceWrapper;
  import javax.faces.context.FacesContext;

  import com.sun.faces.util.Util;

  /**
   * Custom JSF ResourceHandler.
   * 
   * This handler bridges between Spring MVC and JSF managed resources. The handler takes
   * care of the case when a JSF facelet is used as a view by a Spring MVC Controller and the
   * view uses components like h:outputScript and h:outputStylesheet by correctly pointing the 
   * resource URLs generated to the JSF resource handler.
   * 
   * The reason this custom handler wrapper is needed is because the JSF internal logic assumes
   * that the request URL for the current page/view is a JSF url. If it is a Spring MVC request, JSF
   * will create URLs that incorrectly includes the Spring controller context.
   * 
   * This handler will strip out the Spring context for the URL and add the ".jsf" suffix, so the
   * resource request will be routed to the FacesServlet with a correct resource context (assuming the
   * faces servlet is mapped to the *.jsf pattern). 
   * 
   *
   */
  public class CustomResourceHandler extends ResourceHandlerWrapper {

      private ResourceHandler wrapped;

      public CustomResourceHandler(ResourceHandler wrapped) {
          this.wrapped = wrapped;
      }
      @Override
      public ResourceHandler getWrapped() {
          return this.wrapped;    
      }

      @Override
      public Resource createResource(String resourceName, String libraryName) {

        Resource wrapped = super.createResource(resourceName, libraryName);

           if (resourceName.endsWith(".xhtml")) {
           return wrapped;
        }
           return new CustomResource(wrapped,resourceName);
      }
      @Override
      public Resource createResource(String resourceName, String libraryName,
              String contentType) {

        Resource wrapped = super.createResource(resourceName, libraryName, contentType);

           if (resourceName.endsWith(".xhtml")) {
           return wrapped;
        }
           return new CustomResource(wrapped,resourceName);
      }

      private static class CustomResource extends ResourceWrapper {

          private Resource wrapped;
          private String resourceName;

          private CustomResource(Resource wrapped,String resourceName) {
           //super();
           this.resourceName = resourceName;
              this.wrapped = wrapped;
          }
          @Override
          public Resource getWrapped() {
              return this.wrapped;
          }
          @Override
          public String getRequestPath() {

           FacesContext context = FacesContext.getCurrentInstance();

           // si no existe el recurso lo mapeamos igualmente 
           if (this.wrapped == null) {
              return  context.getExternalContext().getRequestContextPath() + "/resources/" + resourceName;
           }

           String path = super.getRequestPath();

              String facesServletMapping = Util.getFacesMapping(context);
              // if prefix-mapped, this is a resource that is requested from a faces page
              // rendered as a view to a Spring MVC controller.
              // facesServletMapping will, in fact, be the Spring mapping
              if (Util.isPrefixMapped(facesServletMapping)) {
                  // remove the Spring mapping
                  path = path.replaceFirst("(" + facesServletMapping + ")/", "/");
                  // append .jsf to route this URL to the FacesServlet
                  path = path.replace(wrapped.getResourceName(), wrapped.getResourceName() + ".jsf");
              }
              return path;
          }

      }
  } 
```

# grails - Grails：如何检索集合的持久值？

> ID：15766961
> 
> 赞同：2
> 
> 时间：2013-04-02T14:37:35.080
> 
> 标签：grails, collections, persistence, beforeupdate

我正在编写一个 Grails 应用程序，我需要为我的域类对象的集合检索一个持久值。让我们考虑一下我们有以下域对象：

```
class UserGroup {
   SortedSet<User> users
   static hasMany = [ users: User ]
   // ...
   def beforeUpdate() {
      println "BEFORE UPDATE: " + this.getPersistentValue('users');
   }
}

class User implements Comparable<User> {
   String name
} 
```

以及具有以下操作的控制器：

```
class UserGroupController {
   def addUser() {
      UserGroup group = UserGroup.get(params.long('gid'))
      User user = User.get(params.long('uid'))

      group.addToUsers(user)
      group.save(failOnError:true, flush:true)
   }
} 
```

问题是当`beforeUpdate()`被调用时，用户集合已经包含了最近添加的用户。所以，似乎该`addTo()`方法不会触发`beforeUpdate()`事件。

当我们谈论`isDirty()`方法时，也会出现同样的问题。由于在`beforeUpdate()`调用之前应用了更改，因此集合不会被识别为脏字段。

有谁知道如何改变这个？我正在编写一个功能来跟踪许多不同对象的更改历史记录，因此我需要访问以前的值以了解其值是否已更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:05:38.327

我有一个类似的问题，当我在域类上使用**.get()时，我没想到它们正在更新。**我现在喜欢使用**.read()**因为当我不希望它更新数据库时它不会更新。Grails 在感觉背后做了很多偷偷摸摸的事情，我认为这很有帮助，但可能有点令人困惑。

# html - 纯/静态html网页的多网站翻译

> ID：15766962
> 
> 赞同：2
> 
> 时间：2013-04-02T14:37:35.947
> 
> 标签：html, translation

想象一个纯/静态的 html 网站。我的意思是没有服务器端逻辑，只是一些 html/css/js。

我将如何以多种语言提供这样的网站？在服务器上为每种语言都有一个目录会令人满意吗？喜欢

```
website root 
    - en
       -index.htm
    - de
       -index.htm
    ... 
```

实际上，我认为使用这种方法没有任何问题。你怎么看？可能有关于 SEO 和谷歌索引这个网站的问题吗？

# php - 多个干净的 URL 参数，不按顺序

> ID：15766965
> 
> 赞同：0
> 
> 时间：2013-04-02T14:37:40.860
> 
> 标签：php, .htaccess

我目前正在开发需要使用 .htaccess 干净 url 的高级搜索功能。此搜索可能有 3-5 个参数，具体取决于用户输入的内容。所以基本上搜索字符串（在干净的 URL 之前）可能是这样的：

```
http://www.example.com?category=lorem&subcategory=ipsum&on_sale=1&featured=1&vendor=foo 
```

这些参数的顺序也可能不同，所以我不能使用标准的正则表达式方法来清理 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:23:48.217

我解决这个问题的方法是在 URL 中使用关键字和术语。

我的最终到达网址如下所示：

```
http://www.example.com/search/term/lorem/category/shirts/subcategory/tank-top/color/red/featured/1 
```

在 htaccess 中，我寻找符号“/search”并为随后的搜索参数制定规则。

```
RewriteRule ^search/([A-Za-z0-9_-\s]+)/([A-Za-z0-9_-\s]+)/?$ http://www.example.com/?page=search&keywords[]=$1&terms[]=$2 [QSA,NC] 
```

等等等等

所以基本上在 PHP 中，所有奇数索引都存储在 $keywords 数组中，所有偶数索引都存储在 $terms 数组中。

然后，我根据可接受的关键字列表检查所有关键字，以防止 MySQL 注入。

```
$allowable_keywords = array('term','category','subcategory','color','featured'); 
```

然后，我可以通过组合关键字和术语，用这个整洁的小搜索数组过滤搜索结果。

```
$params = array_combine($keywords,$terms);

$params = array(
      'term'        => 'lorem',
      'category'    => 'shirts',
      'subcategory' => 'tank-top',
      'color'       => 'red',
      'featured'    =>  1 
); 
```

希望这可以帮助！

# python - 创建线程函数的线程类实例

> ID：15766972
> 
> 赞同：0
> 
> 时间：2013-04-02T14:37:55.287
> 
> 标签：python

我有一个线程类，在其中，我想创建一个线程函数来正确地使用线程实例完成其工作。是否有可能，如果是，如何？

线程类的运行函数在每 x 秒内完成一项工作。我想创建一个线程函数来完成与 run 函数并行的工作。

```
class Concurrent(threading.Thread):
    def __init__(self,consType, consTemp):
           # something

    def run(self):

          # make foo as a thread

    def foo (self):
          # something 
```

如果没有，请考虑以下情况，是否可能，如何？

```
class Concurrent(threading.Thread):
    def __init__(self,consType, consTemp):
           # something

    def run(self):

          # make foo as a thread

def foo ():
    # something 
```

如果不清楚，请告知。我会尝试重新编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-30T22:01:44.193

First of all, I suggest the you will reconsider using threads. In most cases in Python you should use [multiprocessing](https://docs.python.org/2/library/multiprocessing.html) instead.. That is because Python's [GIL](https://wiki.python.org/moin/GlobalInterpreterLock).
Unless you are using [Jython](http://www.jython.org/) or [IronPython](http://ironpython.net/)..

If I understood you correctly, just open another thread inside the thread you already opened:

```
import threading

class FooThread(threading.Thread):
    def __init__(self, consType, consTemp):
        super(FooThread, self).__init__()
        self.consType = consType
        self.consTemp = consTemp

    def run(self):
        print 'FooThread - I just started'
        # here will be the implementation of the foo function

class Concurrent(threading.Thread):
    def __init__(self, consType, consTemp):
        super(Concurrent, self).__init__()
        self.consType = consType
        self.consTemp = consTemp

    def run(self):
        print 'Concurrent - I just started'
        threadFoo = FooThread('consType', 'consTemp')
        threadFoo.start()
        # do something every X seconds

if __name__ == '__main__':
    thread = Concurrent('consType', 'consTemp')
    thread.start() 
```

The output of the program will be:

> Concurrent - I just started
> FooThread - I just started

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:39:15.073

只需启动另一个线程。您已经知道如何创建和启动它们，因此只需编写另一个子类，`Thread`然后`start()`将其与您已有的子类一起编写。

用代替更改`def foo()`子类。`Thread``run()``foo()`

# apache-flex - 用动画交换 flex spark 列表中的 2 个值

> ID：15766974
> 
> 赞同：1
> 
> 时间：2013-04-02T14:37:55.993
> 
> 标签：apache-flex, flex4, flex4.5, flex4.6

我使用 Flex4.6

```
<s:List useVirtualLayout="false" dataProvider="{questions}" itemRenderer="myrender" /> 
```

我的目标是交换列表中的 2 个项目，并在它们之间包含一个幻灯片动画。

例如：item1 下降，item2 上升（item1 和 item2 在列表中交换）。

我正在做的是删除项目 item1 和 item 并使用交换索引重新创建它们。

我不确定这是好方法，此外我无法成功达到 item1 和 item2 之间的滑动动画

使用 Flex3 和 itemsChangeEffect 非常容易

有什么线索吗？

# sony - 索尼智能手表模拟器 APK

> ID：15766977
> 
> 赞同：0
> 
> 时间：2013-04-02T14:38:06.790
> 
> 标签：sony, sony-smartwatch

我正在寻找可以在我的安卓手机上加载的 SmartWatch Emulator APK，以便在靠近我的智能手表的情况下进行一些测试。我记得我能够自己下载 APK。当前的 SDK 文档说它在 SDK 发行版的 APK 文件夹中……但我在计算机上找不到该文件夹​​。

有什么可以下载模拟器 APK 的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T19:33:08.860

按照那里的描述下载索尼的 SDK

```
http://developer.sonymobile.com/knowledge-base/sdks/sony-add-on-sdk/install-the-sony-add-on-sdk/ 
```

然后你可以在你的磁盘上找到你的APK：

```
<SDK>\add-ons\addon-sony_add-on_sdk_1_0-sony-16\apk_files 
```

您可能还需要安装 SmartConnect（又名 LiveWare 管理器）：

```
https://play.google.com/store/apps/details?id=com.sonyericsson.extras.liveware 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:58:33.907

它包含在 SDK 发行版 ( [http://developer.sonymobile.com/downloads/tool/smart-extension-sdk/](http://developer.sonymobile.com/downloads/tool/smart-extension-sdk/) ) 的“Smartextension_emulator”文件夹中。

# .net - EPiServer：DLL 问题 - 无法加载一种或多种请求的类型

> ID：15766979
> 
> 赞同：0
> 
> 时间：2013-04-02T14:38:09.537
> 
> 标签：.net, episerver

我正在尝试启动并运行 EPiServer 项目，但出现此错误：

```
System.Reflection.ReflectionTypeLoadException: Unable to load one or more of the             requested types. The following information may be a subset of the Type/LoaderException information present - inspect with debugger for complete view.
Check assemblies [EPiServer.Legacy4, Version=6.1.379.0, Culture=neutral, PublicKeyToken=8fe83dea738b45b7] and/or types [EPiServer.Enterprise.Transfer.EPi4.AutoCorrectionPageDefinitionEventArgs,
EPiServer.Enterprise.Transfer.EPi4.AutoCorrectionPropertyEventArgs,
EPiServer.Enterprise.Transfer.EPi4.DataImporter,
EPiServer.Enterprise.Transfer.EPi4.DynamicPropertyValueTransfer,
EPiServer.Enterprise.Transfer.EPi4.PageTransfer,
EPiServer.Enterprise.Transfer.EPi4.PageTypeTransfer,
EPiServer.Enterprise.Transfer.EPi4.PropertyCategoryTransform,
EPiServer.Enterprise.Transfer.EPi4.PropertyLongStringTransform,
EPiServer.Enterprise.Transfer.EPi4.PropertyPageReferenceTransform,
EPiServer.Enterprise.Transfer.EPi4.PropertyStringTransformer,
EPiServer.Enterprise.Transfer.EPi4.PropertyUriTransform,
EPiServer.Enterprise.Transfer.EPi4.PropertyXFormTransformer,
EPiServer.Enterprise.Transfer.EPi4.SetUp,
EPiServer.PageTreeLoader,
EPiServer.PageTreeReader,
EPiServer.PageTreeXml,
EPiServer.SpecializedProperties.PropertyStringReadOnly,
EPiServer.SystemControls.ValidationSummary,
EPiServer.WebControls.CategoryTemplateContainer,
EPiServer.WebControls.CategoryTree]. Information from LoaderExceptions property [Method 'get_TransferContext' in type 'EPiServer.Enterprise.Transfer.EPi4.NativeFileTransferEPi4' from assembly 'EPiServer.Legacy4, Version=6.1.379.0, Culture=neutral, PublicKeyToken=8fe83dea738b45b7' does not have an implementation.,
Method 'OpenWrite' in type 'EPiServer.Enterprise.Transfer.EPi4.NativeFileTransferObject' from assembly 'EPiServer.Legacy4, Version=6.1.379.0, Culture=neutral, PublicKeyToken=8fe83dea738b45b7' does not have an implementation.]. 
```

我用dotPeek查看了dll，所有类型都在那里。它`methods`找不到的不存在，但我找不到任何版本`EPiServer.Legacy4.dll`。

有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:10:22.177

不确定那是什么组件，实际上从未见过。:/ 看起来它可以用来升级 EPiServer 4 站点？无论哪种情况，如果您的 bin 文件夹中**没有该程序集，它是否有效？**

# java - HashTable 泛型数组创建错误

> ID：15766985
> 
> 赞同：1
> 
> 时间：2013-04-02T14:38:21.623
> 
> 标签：java

这是 12 年级的 java HashTable 作业。

所以我的老师给了我做这个作业的模板，但它不起作用:(。他希望我们让模板工作，然后做作业。

这是他给我们的：

```
class MyHashTable<T>{
    private T[] vals;
    private int load;
    public MyHashTable(){
        load = 0;
        vals = new T[10];
    }
    public MyHashTable(int size){
        load = 0;
        vals = new T[size];
    }
    public void add(T obj){//don't care about negatives
        int size = vals.length;
        if((load+1.0)/size>0.6){
            size*=10;
            T[] tmp = new T[size];
            for(int i=0;i<size/10;i++){
                if(vals[i]!=null){
                    add(vals[i], tmp);
                }
            }
            vals = tmp;
        }
        add(obj, vals);
    }
    public void add(T obj, T[]vals){
        int loc = Math.abs(obj.hashCode())%vals.length;
        while(vals[loc]!=null){
            loc = (loc+1)%vals.length;
        }
        vals[loc] = obj;
    }
    /*public boolean contains(T obj){

    } */
} 
```

它给出了一个错误：错误：通用数组创建

谁能告诉我这是什么意思？希望有例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:41:08.650

由于泛型在 Java 中实现的方式，不可能使用泛型，以便在运行时需要类型信息。看到[这个](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T14:43:44.337

> 错误：创建通用数组

您不能从泛型类型创建数组。

另请参阅[我无法在 Java 中创建泛型数组类型的原因是什么？](https://stackoverflow.com/questions/2927391/whats-the-reason-i-cant-create-generic-array-types-in-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T15:03:05.303

正如大家所说，泛型类型在运行时被删除：

*   `T`变成`Object`,
*   `T extends SomeClass`变成`SomeClass`.

所以你至少有两个选择

1.  您可以使用与使用相同的模式`ArrayList<T>`并将项目存储在`Object[]`数组而不是`T[]`数组中

    ```
    vals = (T[]) new Object[size]; 
    ```

2.  如果要创建真实`T`类型的数组，则必须让用户传递`Class<T>`将对应的对象实例`T`并像使用它一样

    ```
    vals = (T[]) java.lang.reflect.Array.newInstance(clazzT, size); 
    ```

其中 clazzT 是`Class<T>`实例。

# kendo-ui - 如果数据源没有项目，如何设置占位符

> ID：15766987
> 
> 赞同：1
> 
> 时间：2013-04-02T14:38:25.227
> 
> 标签：kendo-ui

我有下拉和空数据源。

即使数据源为空，我也需要设置占位符

示例：http: [//jsfiddle.net/dude_jsfiddle/C8tBa/1/](http://jsfiddle.net/dude_jsfiddle/C8tBa/1/)

是虫剑道？

版本剑道`Q1 2013 (version 2013.1.319)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:55:04.447

需要补充：

```
set autoBind false 
```

# sql - 复制日期范围的记录

> ID：15766991
> 
> 赞同：0
> 
> 时间：2013-04-02T14:38:39.140
> 
> 标签：sql, performance, teradata, ansi-sql

我必须从周级数据中复制记录并将其推回，以便它用数据填充前一周。所以我得到了 1/6 的一行，这是一个星期六，然后填写所有列以具有相同的数据，除了 1/1（星期日）之前的日期。

所以我的来源是日期，信息 1/6，a

目标应该是 1/7, b | 1/6，一个 | 1/5，一个 | 1/4，一个 | 1/3，一个 | 1/2，一个 | 1/1，一个

** 抱歉格式，无法正确显示。

到目前为止，我认为最好的方法是使用几个联合所有

```
SELECT date, info FROM test
 UNION ALL
SELECT date - 1, info FROM test
 UNION ALL
SELECT date - 2, info FROM test 
```

等等。

或进行受控笛卡尔连接

```
SELECT tmp_date AS date, info FROM test AS test
INNER JOIN date_temp_table AS dt
  ON dt.tmp_date <= test.date
    AND dt.tmp_date > test.date - 7 
```

现在上述两种方法都有效，但是它们都非常低效并且几乎杀死我的数据库（Teradata）所以我愿意接受任何关于如何改进它的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T19:30:38.213

很难理解您真正想要什么，但在 TD13.10 中，使用 EXPAND ON 根据句点复制行很容易：

```
SELECT 
   BEGIN(pd) AS dt,
   info
FROM test 
EXPAND ON PERIOD(datecol-7, datecol) AS pd 
```

迪特

# jquery - 使用 jquery 动态更改 css 类

> ID：15766993
> 
> 赞同：0
> 
> 时间：2013-04-02T14:38:43.857
> 
> 标签：jquery, asp.net, css

我想`<li>`动态更改css类。我正在使用 asp.net 母版页。在下面的示例中，如果我单击`AboutUs.aspx`页面加载上的链接，我想更改`<li class="single">`为`<li class="active single">`.

怎么做？

```
 <div class="nav-collapse">
     <ul class="nav nav-pills">
           <li class="active single"><a href="Default.aspx">HOME
                 <i>company home</i>
                  </a>
            </li>
            <li class="single"><a href="AboutUs.aspx">About Us
                 <i>want to say</i>
                  </a>
            </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:41:13.933

像这样：

```
$('li.single').click(function(){
    $('li').removeClass('active');
    $(this).addClass('active');
}); 
```

这是一个 jsFiddle 示例 - [http://jsfiddle.net/HNKeA/1/](http://jsfiddle.net/HNKeA/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:42:36.423

```
$('.nav-collapse > ul > li > a').click( function(){
   $('li').removeClass('.active');
   $(this).parent().addClass('.active');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T14:47:16.447

正如@scrappedcola 所说，您不必在Javascript 中执行此操作，因为这完全可以从服务器端代码中实现。但如果你坚持，这里是步骤：

1 你必须告诉 Javascript 你想要突出显示菜单中的哪个项目。为每个菜单项创建唯一标识符，并告诉服务器端代码进行设置。例如：

```
<li class="single home">
    <a href="Default.aspx">HOME<i>company home</i></a>
</li>
<li class="single aboutus">
    <a href="AboutUs.aspx">About Us<i>want to say</i></a>
</li>
<script>
    var activeLink = 'aboutus';
</script> 
```

2 创建并调用 Javascript/jQuery 函数来更改 CSS 类：

```
$("." + activeLink).addClass("active"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:41:46.440

```
$('.nav-pills a').click(function(){
    $('.nav-pills li').removeClass('active');
    $(this).parent().addClass('active')
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T14:42:08.540

```
 $('li.single').click(function(){
      $(this).addClass('active');

  }); 
```

或者

```
 $('li.single').click(function(){
         $(this).attr('class', 'active single');
      }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T14:42:38.790

```
$("ul li:first").attr('class', 'newClass'); 
```

只需相应地更改选择器。这应该改变嵌套在 ul 中的每个 li

# javascript - 在 rpc 之后让 mathjax 重新加载页面

> ID：15766994
> 
> 赞同：0
> 
> 时间：2013-04-02T14:38:45.827
> 
> 标签：javascript, rpc, mathjax

我只想做这样的事情：

```
contentAsync.load("linear_regression", new AsyncCallback<String>() {
  public void onFailure(Throwable caught) {
    content.add(new HTML("<h1>FAIL</h1>something went wrong"));
    caught.printStackTrace();
  }

  public void onSuccess(String result) {

    // after the RPC new mathematical equations were added to the web content
    // so now I invoke the JavaScript function 'testFunc' on the client.       
    MainLayout.jsniAlert("testFunc");        
  }
}); 
```

JavaScript 部分：

```
<script type="text/javascript">
    function testFunc() {
        alert('huhu');
        MathJax.... <--! reload page -->
    }
</script> 
```

我只需要知道是否以及如何告诉 MathJax 重新加载页面.. 我找不到这样做的示例。我已经试过了

```
 MathJax.Hub.Process();
        MathJax.Hub.Update();
        MathJax.Hub.Reprocess();
        MathJax.Hub.Rerender(); 
```

但是没有电话做我希望它会做的事情。谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T21:07:46.693

从[MathJax 文档](http://docs.mathjax.org/en/latest/typeset.html)：

> 要对排版操作进行排队，请使用命令
> 
> `MathJax.Hub.Queue(["Typeset",MathJax.Hub]);`
> 
> 这将导致 MathJax 在下一次能够排版时排版页面。它保证排版将与 jax、扩展、字体、样式表和其他异步活动的加载正确同步，并且是要求 MathJax 处理附加材料的唯一真正安全的方法。
> 
> MathJax.Hub.Typeset() 命令还接受一个参数，该参数是要排版其内容的 DOM 元素。这可能是一个段落、一个元素，甚至是一个 MathJax 数学标签。它也可能是此类对象的 DOM id，在这种情况下，MathJax 将为您查找 DOM 元素。所以
> 
> `MathJax.Hub.Queue(["Typeset",MathJax.Hub,"MathExample"]);`
> 
> 将排版 id 为 MathExample 的元素中包含的数学。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:19:57.807

我是如何实现它的（使用 Google Web Toolkit）：

JavaScript 函数：

```
<!-- Refresh MathJax syntax                                        -->
<script type="text/javascript">
    function reloadMathJax() {
        MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }
</script> 
```

通过声明本机方法将其称为客户端`reloadMathJax()`：

```
public class EW implements EntryPoint {

  final RootPanel root = RootPanel.get("root");

  @Override
  public void onModuleLoad() {
    // ...
  }

  public static final native void reloadMathJax()/*-{
      $wnd.reloadMathJax();
  }-*/;

} 
```

然后在需要的地方调用它：

```
public void load(final VerticalPanel target, 
               String file, final Successor success) {

    contentAsync.load(file, new AsyncCallback<String>() {
      public void onFailure(Throwable caught) {
        target.add(new HTML("<h1>FAIL</h1>something went wrong"));
        caught.printStackTrace();
      }

      public void onSuccess(String result) {

        if (result == null) {
          target.add(new HTML(
              "Could not load content from server. (RPC returned null)"));
          return;
        }

        HTMLPanel panel = new HTMLPanel(result);
        success.onSuccess(panel);
        target.add(panel);

        EW.reloadMathJax();
      }
    });
} 
```