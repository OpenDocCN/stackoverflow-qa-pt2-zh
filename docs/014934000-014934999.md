# StackOverflow 问答 14934000-14934999

# oracle - ODBC MS ACCESS 出错 - Oracle 9i

> ID：14934000
> 
> 赞同：0
> 
> 时间：2013-02-18T10:22:04.377
> 
> 标签：oracle, ms-access, odbc

我想将 MS Access 与 Oracle 9i 连接起来。在 Oracle 中，我有一些表，在 MS Access 中，我想创建一个新记录。

现在我遇到了 ODBC 问题，我收到了错误：

```
"[Microsoft][ODBC driver for oracle][Oracle]ORA-12514: TNS: nasłuchowi nie udało się rozstrzygnąć SERVICE_NAME podanego w deskryptorze połączenia (#12514)..........." 
```

在配置文件 DSN 中，我只有：

```
[ODBC]
DRIVER=Microsoft ODBC for Oracle 
```

之后我必须编写登录名、密码和服务器（我编写示例数据 192.168.1.1）

我的 TNSNAMES.ORA

```
BAZA_AAA =
(DESCRIPTION =
(ADDRESS = (PROTOCOL = TCP)(HOST = xxxxx)(PORT = 1521))
(CONNECT_DATA = (SERVICE_NAME = BAZA_AAA))
) 
```

其他程序示例 SQL Server、TOAD、Windows 控制台写入我的数据库但无法访问

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:07:15.730

而不是服务器的 IP 尝试使用 TSN 名称：`BAZA_AAA`。

这也是我第一次为 Oracle 使用 MS 驱动程序。我一直使用 Oracle 的驱动程序。你有安装它们吗？你试过了吗？他们有“TNS 服务名称”字段和“测试连接”按钮 :-)

# c# - System.InvalidOperationException：调整自动填充列的大小时无法执行此操作

> ID：14934003
> 
> 赞同：9
> 
> 时间：2013-02-18T10:22:18.920
> 
> 标签：c#

我的 Winform 应用程序中有 DataGridView 并设置

```
this.dgvDte.AutoSizeColumnsMode = System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill; 
```

当运行我的项目时，有时会打开，但并不总是让我犯这个错误

> “System.InvalidOperationException：调整自动填充列的大小时无法执行此操作”

任何机构都可以帮助我发生了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-29T10:35:25.177

`this.dataGridView1.ColumnHeadersHeightSizeMode`设置为`AutoSize`。

在创建 DataGridView 时，如果鼠标突然在 Column 标题所在的位置，DataGridView 会尝试处理该`CellEnter`事件，并尝试调整列大小或其他东西，但现在 DataGridView 仍在创建中。

结果，`InvalidOperation`抛出了 a。

解决方法如下：

在客户提供的项目、`GridWrapper.cs`文件中，将以下行放在后面`InitializeComponent();`

```
this.dataGridView1.ColumnHeadersHeightSizeMode = DataGridViewColumnHeadersHeightSizeMode.DisableResizing; 
```

将以下行放入`GridWrapper_Load`方法中：

```
this.dataGridView1.ColumnHeadersHeightSizeMode = DataGridViewColumnHeadersHeightSizeMode.AutoSize; 
```

[许多客户发现在论坛](http://forums.microsoft.com/msdn/default.aspx?siteid=1)中讨论此类问题很有用，Microsoft 和社区的其他成员可以在这些论坛中推荐实现目标行为的方法。

在[链接中回答](https://connect.microsoft.com/VisualStudio/feedback/details/481029/this-operation-cannot-be-performed-while-an-auto-filled-column-is-being-resized)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-23T23:58:08.980

正如 MS 论坛（[由 MS](http://connect.microsoft.com/VisualStudio/feedback/details/481029/this-operation-cannot-be-performed-while-an-auto-filled-column-is-being-resized)）所报告的，异常是由 DataGridView 引发的。据我所知，当控件初始化时鼠标光标位于 datagridview clientrectangle 内时，就会发生这种情况。MS 告诉我们他们允许（“按设计”）列调整大小事件和单元格输入事件同时触发，从而强制抛出异常。建议的解决方法没有解决我的问题。

由于 MS 似乎对解决此问题不感兴趣，因此我发现对我来说有两种解决方案：

1.  确保新表单在“安全”位置打开，刚好在鼠标光标之外
2.  在窗体的构造函数运行时将鼠标光标移动到保存位置

您可以通过“System.Windows.Forms.Cursor.Position”获取和设置当前鼠标屏幕位置。

尽管在没有用户输入的情况下移动鼠标光标并不总是受欢迎的，但如果在应用程序中始终如一地完成，这对我来说是最可接受的选择。

这是我倾向于在包含 DataGridView 的表单的构造函数中使用的代码（在 InitializeComponent 方法之后）

```
 Cursor.Position = this.PointToScreen(new Point(this.Width/2, -10)); 
```

这会将光标置于标题栏中的表单的中心。您可能需要进行一些检查以确保不会将光标移出屏幕。

我希望这可以帮助你一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:28:44.220

也许您在加载值时对其进行迭代？尝试让您的应用程序等待或锁定这些操作。

# java - IF else 语句函数

> ID：14934004
> 
> 赞同：0
> 
> 时间：2013-02-18T10:22:23.520
> 
> 标签：java, if-statement, syntax

我有这个 if else 语句的代码

```
@Override
        public void onClick(View arg0) {
            int aInt = Integer.parseInt(textView1.getText().toString());
             if(aInt <= 0) {
                 Toast.makeText(getApplicationContext(), "Wrong",
                            Toast.LENGTH_SHORT).show();
                } else{

                 int a=Integer.parseInt(textView1.getText().toString());
                     int  b=a-2;
                  String s1 = String.valueOf(b);
                 textView1.setText(s1);
                 Toast.makeText(getApplicationContext(), "Wrong",
                            Toast.LENGTH_SHORT).show();
                int c =Integer.parseInt(textView5.getText().toString());
                        int d = c-1;
                        String s2 = String.valueOf(d);
                        textView5.setText(s2);

                }  if(textView5 != null) {
                    int dInt = Integer.parseInt(textView5.getText().toString());
                        if(dInt <= 0);
                     Toast.makeText(getApplicationContext(), "Game Over",
                                Toast.LENGTH_SHORT).show();
                            Intent intent = new Intent();
                        intent.setClass(MainActivity.this, Fifth.class);
                        startActivity(intent);

                    SavePreferences("MEM1", textView1.getText().toString());
                }
        }

}; 
```

在这部分代码上，如果 textView5 的值为 0，我想启动意图，但即使 textView5 的值还不是 0，它仍然会进入新的意图，我不知道我的代码的哪一部分是错误的：

```
}  if(textView5 != null) {
                int dInt = Integer.parseInt(textView5.getText().toString());
                    if(dInt <= 0);
                 Toast.makeText(getApplicationContext(), "Game Over",
                            Toast.LENGTH_SHORT).show();
                        Intent intent = new Intent();
                    intent.setClass(MainActivity.this, Fifth.class);
                    startActivity(intent);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:24:34.127

```
if(textView5 != null)
{
      int dInt = Integer.parseInt(textView5.getText().toString());
      if(dInt <= 0)
                {
                     Toast.makeText(getApplicationContext(), "Game Over",Toast.LENGTH_SHORT).show();
                    startActivity(new Intent(MainActivity.this, Fifth.class));
                }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:24:49.700

这样做：

```
}  if(textView5 != null) {
            int dInt = Integer.parseInt(textView5.getText().toString());
                if(dInt <= 0) {
             Toast.makeText(getApplicationContext(), "Game Over",
                        Toast.LENGTH_SHORT).show();
                    Intent intent = new Intent();
                intent.setClass(MainActivity.this, Fifth.class);
                startActivity(intent);
              }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:27:44.467

试试这个：如果没有像这样的分号循环

```
 if(dInt <= 0){
         Toast.makeText(getApplicationContext(), "Game Over",
                    Toast.LENGTH_SHORT).show();
                Intent intent = new Intent();
            intent.setClass(MainActivity.this, Fifth.class);
            startActivity(intent);
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:26:27.707

语句**(textView5 != null) 检查 view 是否不为 null**。您需要添加编辑代码，例如 .

```
 if(!textView5.getText().toString().equals("")) {
            int dInt = Integer.parseInt(textView5.getText().toString());
                if(dInt <= 0);
             Toast.makeText(getApplicationContext(), "Game Over",
                        Toast.LENGTH_SHORT).show();
                    Intent intent = new Intent();
                intent.setClass(MainActivity.this, Fifth.class);
                startActivity(intent);
                } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-18T10:26:09.350

`;`是字符串的结尾。如果您`;`在 If 条件结束时给出，则正文不会执行..

所以删除它并检查你的代码..

```
if(dInt <= 0)
   Toast.makeText(getApplicationContext(), "Game Over",Toast.LENGTH_SHORT).show();
   Intent intent = new Intent();
   ...... 
```

# iis - IIS8 中的 IIS_IUSRS 和 IUSR 权限

> ID：14934006
> 
> 赞同：166
> 
> 时间：2013-02-18T10:22:38.720
> 
> 标签：iis, permissions, asp.net-4.5, windows-server-2012, iis-8

我刚刚从 Win2003 上的 IIS6 转移到 Win2012 上的 IIS8 以托管 ASP.NET 应用程序。

在我的应用程序的一个特定文件夹中，我需要创建和删除文件。将文件复制到新服务器后，我在尝试删除文件时一直看到以下错误：

> 拒绝访问路径“D:\WebSites\myapp.co.uk\companydata\filename.pdf”。

当我检查 IIS 时，我看到应用程序正在 DefaultAppPool 帐户下运行，但是，我从未在此文件夹上设置 Windows 权限以包含**IIS AppPool\DefaultAppPool**

相反，为了停止尖叫客户，我授予了文件夹以下权限：

**IUSR**

*   读取和执行
*   列出文件夹内容
*   读
*   写

**IIS_IUSRS**

*   调整
*   读取和执行
*   列出文件夹内容
*   读
*   写

这似乎奏效了，但我担心设置了太多特权。我在网上阅读了关于是否真的需要**IUSR的相互矛盾的信息。**谁能澄清一下哪些用户/权限足以在此文件夹上创建和删除文档？另外，IUSR 是 IIS_IUSRS 组的一部分吗？

## 更新与解决方案

请看[我下面的回答](https://stackoverflow.com/a/36597241/792888)。我不得不遗憾地这样做，因为最近的一些建议没有经过深思熟虑，甚至是安全的（IMO）。

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2016-04-13T11:39:39.450

我讨厌发布自己的答案，但最近的一些答案忽略了我在自己的问题中发布的解决方案，提出的方法简直就是鲁莽。

简而言之，**您根本不需要编辑任何 Windows 用户帐户权限**。这样做只会带来风险。该进程完全在 IIS 中使用继承的权限进行管理。

## 将修改/写入权限应用于*正确*的用户帐户

1.  当域出现在站点列表下时，右键单击它，然后选择*编辑权限*

    [![在此处输入图像描述](../Images/0b303d9a01f6d1ad1a006d101b8e0155.png)](https://i.stack.imgur.com/b237H.png)

    在*安全*选项卡下，您将看到`MACHINE_NAME\IIS_IUSRS`已列出。这意味着 IIS 自动对该目录具有只读权限（例如，在站点中运行 ASP.Net）。 **您不需要编辑此条目**。

    [![在此处输入图像描述](../Images/be1fe824951a7c365ce171f2bdef42b7.png)](https://i.stack.imgur.com/1Jnl7.png)

2.  单击*编辑*按钮，然后单击*添加...*

3.  在文本框中，键入`IIS AppPool\MyApplicationPoolName`，替换`MyApplicationPoolName`为您的域名或正在访问您的站点的任何应用程序池，例如`IIS AppPool\mydomain.com`

    [![在此处输入图像描述](../Images/7a682382210a6f8ebaeeca0b57c8ff01.png)](https://i.stack.imgur.com/P4BQe.png)

4.  按*检查名称*按钮。您输入的文本将转换（注意下划线）：

    [![在此处输入图像描述](../Images/a1a8731cea8e664063e774ba58ef0b87.png)](https://i.stack.imgur.com/cZDJK.png)

5.  按*OK*添加用户

6.  选择新用户（您的域）后，您现在可以安全地提供任何*修改*或*写入*权限

    [![在此处输入图像描述](../Images/cb68a90c792bd7df57c857bd3503b805.png)](https://i.stack.imgur.com/x3TXY.png)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-02-28T09:37:48.973

`IUSR`是该`IIS_IUSER`组的一部分，所以我想您可以删除权限`IUSR`而不必担心。[进一步阅读](http://www.iis.net/learn/get-started/planning-for-security/understanding-built-in-user-and-group-accounts-in-iis)

但是，随着越来越多的 Windows 系统服务开始以`NETWORKSERVICE`. 这是因为运行 as 的服务`NETWORKSERVICE`可以篡改以相同身份运行的其他服务。因为 IIS 工作进程默认运行第三方代码（经典 ASP、ASP.NET、PHP 代码），所以是时候将 IIS 工作进程与其他 Windows 系统服务隔离，并以唯一身份运行 IIS 工作进程。

Windows 操作系统提供了一种称为“虚拟帐户”的功能，允许 IIS 为其每个应用程序池创建唯一身份。`DefaultAppPool`是分配给您创建的所有应用程序池的默认池。

为了使其更安全，您可以将 IIS`DefaultAppPool`标识更改为`ApplicationPoolIdentity`.

关于权限，创建和删除总结了所有可以授予的权限。因此，您分配给该`IIS_USERS`组的任何内容都是他们所需要的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-11T11:37:32.257

当我为站点文件夹添加权限时`IIS_IUSRS`，JavaScript 和 CSS 等资源仍然无法访问（错误 401，禁止）。但是，当我添加时`IUSR`，它开始工作。因此，可以肯定的是，您**不能**删除`IUSR`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-21T13:23:56.483

@EvilDr 您可以在 AD 环境中创建一个 IUSR_[identifier] 帐户，并让特定的应用程序池在该 IUSR_[identifier] 帐户下运行：

“应用程序池”>“高级设置”>“身份”>“自定义帐户”

在高级设置中将您的网站设置为“应用程序用户（通过身份验证）”而不是“特定用户”。

现在为 IUSR_[identifier] 赋予文件和文件夹适当的 NTFS 权限，例如：修改公司数据。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-06-29T14:56:48.470

仅当您使用 ApplicationPool Identity 时，IIS_IUSRS 组才具有显着性。即使你有这个组在运行时看起来是空的，IIS 根据微软的文献添加到这个组来运行一个工作进程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T01:20:48.853

我会使用特定用户（而不是应用程序用户）。然后我将在应用程序中启用模拟。一旦您这样做，无论帐户设置为特定用户，这些凭据都将用于访问该服务器上的**本地资源（不适用于外部资源）。**

特定用户设置专门用于访问本地资源。

# ektron - 在 Ektron 中使用 MP3

> ID：14934010
> 
> 赞同：0
> 
> 时间：2013-02-18T10:22:48.163
> 
> 标签：ektron

爱克创 801 SP1

我允许用户使用 CommunityDocuments 控件将 MP3 文件上传到他们的个人资料。我希望用户能够单击链接并播放歌曲。对于某些文件类型，例如 .doc，文件会立即下载，因为链接的 URL 引用了“DownloadAsset.aspx”。MP3 文件的 URL 类似于[http://www.domain.org/documents.aspx?id=242665652917&TaxonomyId=242665652152&LangType=1033&EkTB_iframe=true&height=520&width=790](http://www.domain.org/documents.aspx?id=242665652917&TaxonomyId=242665652152&LangType=1033&EkTB_iframe=true&height=520&width=790)

我怎样才能让这些文件播放？我在 web.config 中有以下内容

```
<add key="audio/mpeg" value="WindowsMedia"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:46:36.933

据我所知，Ektron 没有为 MP3 文件提供任何播放器/插件支持 ootb。也许您可以在 web.config 中指定一个额外的 MEDIA 类型。或者使用 HTML5 音频。[http://www.w3schools.com/html/html5_audio.asp](http://www.w3schools.com/html/html5_audio.asp)

使用 HTML5 方法时，请注意哪些浏览器支持哪些编解码器。您必须通过后备或 shim 为旧版浏览器解决其他问题。

在 web.config 中添加 MEDIA 类型只会告诉浏览器加载像 quicktime 或 wmp 这样的插件，如果它可以工作的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:56:14.233

根据 eGandalf 的回答，Ektron 不包括 MP3 播放器。您应该仍然可以使用 Ektron 存储和提供 MP3，方法是将其保存到库中或作为 DMS 资产。您需要通过将“.MP3”添加到文件扩展名白名单来更新 Ektron 配置设置。

关于让用户在浏览器中播放 MP3，我会考虑使用 JW Player - 它非常流行，[这里有一个关于使用它播放 MP3 的教程](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/15993/playing-an-audio-file/)。

# android - 无法加载 opencv android 的信息库

> ID：14934014
> 
> 赞同：1
> 
> 时间：2013-02-18T10:23:01.393
> 
> 标签：android, opencv

从git获取openv for android并编译后，我尝试运行第三个教程，问题是我得到opencv drror：无法加载opencv的信息库

```
02-18 12:04:26.959: W/System.err(9329): java.lang.UnsatisfiedLinkError: Couldn't load opencv_java: findLibrary returned null
02-18 12:04:26.959: W/System.err(9329):     at java.lang.Runtime.loadLibrary(Runtime.java:365)
02-18 12:04:26.959: W/System.err(9329):     at java.lang.System.loadLibrary(System.java:535)
02-18 12:04:26.959: W/System.err(9329):     at org.opencv.android.StaticHelper.loadLibrary(StaticHelper.java:54)
02-18 12:04:26.959: W/System.err(9329):     at org.opencv.android.StaticHelper.initOpenCVLibs(StaticHelper.java:85)
02-18 12:04:26.964: W/System.err(9329):     at org.opencv.android.StaticHelper.initOpenCV(StaticHelper.java:29)
02-18 12:04:26.964: W/System.err(9329):     at org.opencv.android.OpenCVLoader.initDebug(OpenCVLoader.java:26)
02-18 12:04:26.964: W/System.err(9329):     at org.opencv.samples.tutorial3.Sample3Native.<clinit>(Sample3Native.java:27)
02-18 12:04:26.964: W/System.err(9329):     at java.lang.Class.newInstanceImpl(Native Method)
02-18 12:04:26.964: W/System.err(9329):     at java.lang.Class.newInstance(Class.java:1319)
02-18 12:04:26.964: W/System.err(9329):     at android.app.Instrumentation.newActivity(Instrumentation.java:1068)
02-18 12:04:26.964: W/System.err(9329):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2015)
02-18 12:04:26.964: W/System.err(9329):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
02-18 12:04:26.964: W/System.err(9329):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
02-18 12:04:26.964: W/System.err(9329):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
02-18 12:04:26.964: W/System.err(9329):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 12:04:26.964: W/System.err(9329):     at android.os.Looper.loop(Looper.java:137)
02-18 12:04:26.964: W/System.err(9329):     at android.app.ActivityThread.main(ActivityThread.java:4898)
02-18 12:04:26.964: W/System.err(9329):     at java.lang.reflect.Method.invokeNative(Native Method)
02-18 12:04:26.964: W/System.err(9329):     at java.lang.reflect.Method.invoke(Method.java:511)
02-18 12:04:26.964: W/System.err(9329):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
02-18 12:04:26.964: W/System.err(9329):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
02-18 12:04:26.964: W/System.err(9329):     at dalvik.system.NativeStart.main(Native Method) 
```

但是当我尝试将 libopencv_java 和 libopencv_info 复制到 lib/arm7v 时，它会被 eclipse 自动删除！但是 libnative 相机可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:34:13.413

事实证明，启用静态链接会阻止共享库管理，主要是 libopencv_java 和 libopencv_info 库不会添加到输出中，以解决我手动加载这两个库的问题。

# c# - 带数组的非托管导出

> ID：14934016
> 
> 赞同：2
> 
> 时间：2013-02-18T10:23:02.580
> 
> 标签：c#, unmanaged, loadlibrary

我正在使用 RGiesecke DLLExport 库来生成一个可以从 Delphi 动态加载的 C# DLL。我有这样的方法：

```
[DllExport("GetVals", CallingConvention = System.Runtime.InteropServices.CallingConvention.StdCall)]
  static void GetVals([In, Out, MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] int[] valueList, int len)
  {
      valueList = new int[3];

      int[] arrList = new int[] { 1, 2, 3 };
      int idx = 0;

      foreach (int s in arrList)
      {
          valueList[idx] = s;
          idx++;              
      }
  } 
```

我希望能够从这个调用中返回一个数组，问题是我不会提前知道数组的大小，这只会在运行时确定。

为了测试我做了以下（也在 C# 中）

```
IntPtr hLibrary = NativeWinAPI.LoadLibrary(DLLFileName);
                IntPtr pointerToFunction1 = NativeWinAPI.GetProcAddress(hLibrary, "GetVals");
                if (pointerToFunction1 != IntPtr.Zero)
                {
                    GetVals getfunction = (GetVals)Marshal.GetDelegateForFunctionPointer(pointerToFunction, typeof(GetVals));
                    int[] valList= null;
                    int fCnt = 3;
                    getfunction(valList, fCnt);
                    if (valList != null)
                    {

                    }
                } 
```

出现错误“尝试读取或写入受保护的内存”，这是可以理解的，因为我没有在调用者上分配内存。在实际使用中，我不知道要返回的数组的大小，因此无法预先分配内存。为了把最基本的东西放在那里，我试图简单地从 GetVals 返回一个未知大小的数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T13:20:21.290

您必须以不受 GC 影响的方式分配数组。你可以用 Marshal.AllocHGlobal 做到这一点：

```
[DllExport]
static void GetVals(out IntPtr unmanagedArray, out int length)
{
    var valueList = new[]
    {
        1, 2, 3
    };

    length = valueList.Length;

    unmanagedArray = Marshal.AllocHGlobal(valueList.Length * Marshal.SizeOf(typeof(int)));
    Marshal.Copy(valueList, 0, unmanagedArray, length);
} 
```

在 Delphi 方面，您将获得指向第一个元素的指针和大小。要阅读它，您可以将指针 arraySize-1 递增一次并将其放入列表或 Delphi 管理的数组中：

```
uses
  SysUtils,
  Windows;

  procedure  GetVals(out unmanagedArray : PInteger; out arraySize : Integer);
    stdcall;
    external 'YourCSharpLib';

  function GetValsAsArray : TArray<integer>;
  var
    unmanagedArray, currentLocation : PInteger;
    arraySize, index : Integer;
  begin
    GetVals(unmanagedArray, arraySize);
    try
      SetLength(result, arraySize);
      if arraySize = 0 then
        exit;

      currentLocation := unmanagedArray;

      for index := 0 to arraySize - 1 do
      begin
        result[index] := currentLocation^;
        inc(currentLocation);
      end;
    finally
      LocalFree(Cardinal(unmanagedArray));
    end;
  end;

var
  valuesFromCSharp : TArray<integer>;
  index : Integer;
begin
  valuesFromCSharp := GetValsAsArray();

  for index := low(valuesFromCSharp) to high(valuesFromCSharp) do
    Writeln(valuesFromCSharp[index]);
end. 
```

# visual-studio - 在 Visual Studio 中发布/预构建宏引发错误

> ID：14934021
> 
> 赞同：1
> 
> 时间：2013-02-18T10:23:13.523
> 
> 标签：visual-studio

我在构建后事件中有以下宏：

```
copy   "$(SolutionDir)\HelloTest.txt"  "$(OutDir)" 
```

当我运行构建时，出现以下错误。

```
Error   3   The command "copy   "E:\VS2012Projects\MixTests\\HelloTest.txt"  "bin\Debug\"" exited with code 1\.  MixTests 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:29:12.877

尝试像这样定义您的构建后事件：

```
copy "$(SolutionDir)HelloTest.txt" "$(ProjectDir)$(OutDir)" 
```

我怀疑这个问题与`(OutDir)`（可能）有关`bin\Debug`，并且它没有相对于项目的根应用。

使用`$(ProjectDir)$(OutDir)`会将绝对路径放入项目`...\bin\Debug`文件夹，消除任何不确定性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T12:53:12.800

一个旧线程，但有人可能会觉得这很有用。

如果包含您的解决方案的文件夹名称中有空格，这似乎会导致问题。例如;

“C:\Projects\ABC Project\my.sln” - 对应于没有尾部斜杠的 $(SolutionDir) 其中“C:\Projects\ABCProject\my.sln” - 对应于带有尾部的 $(SolutionDir)削减

将两个分支并排保存为本地副本时的常见问题。请注意文件夹命名。即“C:\Projects\ABCProject\my.sln” - 主干“C:\Projects\ABCProject 1_0\my.sln” - 分支

很可能会导致本地分支副本出现问题。

# css - 为什么将非前缀 css3 属性放在最后？

> ID：14934024
> 
> 赞同：3
> 
> 时间：2013-02-18T10:23:27.807
> 
> 标签：css, cross-browser, vendor-prefix

> 使用供应商前缀时，请务必记住您在声明中列出规则的顺序。

我已经知道供应商前缀是如何工作的以及为什么需要，但为什么最好首先列出供应商前缀的属性，最后列出非前缀的 CSS3 属性？我还检查了许多重要站点，他们正在使用这种方法：

```
.foo { 
  -webkit-border-radius: 10px; 
  -moz-border-radius: 10px; 
  border-radius: 10px; //why this is the last one?
  } 
```

就是这样，为什么要把实际的 CSS3 属性放在最后呢？有什么特殊原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:29:18.370

由于最后的 W3C 特性，新版本的浏览器使用此版本而不是供应商版本。这样，您的 CSS 将被视为没有供应商前缀的普通 CSS。

这样，如果浏览器支持，新浏览器将使用更新到最新规范的 W3C 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:29:15.193

有用的资源是[http://taligarsiel.com/Projects/howbrowserswork1.htm](http://taligarsiel.com/Projects/howbrowserswork1.htm)和[http://www.w3.org/TR/CSS2/grammar.html](http://www.w3.org/TR/CSS2/grammar.html)，也许你会在那里找到答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:56:10.010

这是一个很好的理由：[安迪提到的[这篇文章的摘要]](http://css-tricks.com/ordering-css3-properties/)

在浏览器同时支持供应商前缀和实际属性的期间 - css 规则的实现可能存在差异。

例子：

```
.not-a-square {
   /* These do totally different things */
   border-radius: 30px 10px; 
   -webkit-border-radius: 30px 10px;
} 
```

> 规范或“真实”版本将在 30 像素处渲染左上角和右下角，在 10 像素处渲染右上角和左下角。供应商前缀将渲染所有四个角，椭圆角为 30 像素宽和 10 像素高。

# android - WebView 中的 NTLM 身份验证

> ID：14934027
> 
> 赞同：2
> 
> 时间：2013-02-18T10:23:37.737
> 
> 标签：android, android-webview, ntlm

我正在尝试加载一个将在`WebView`. 在加载 URL 之前，我需要传递凭据（用户名和密码）。

在这里，URL 由具有 NTLM 身份验证的服务器托管。

我可以点击另一个这样的 URL 并获取数据。但是我如何`WebView`在 Android 中为 a 做同样的事情呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T02:12:32.270

## 您可以使用[Chilkat 库](http://www.chilkatsoft.com/)进行 NTLM 身份验证。

1.  下载 java 类（包含在下载部分的 zip/rar 文件中）并将包添加到 /src 文件夹。包名称是 com.chilkatsoft
2.  将库添加到 /libs 文件夹。chilkat 库文件夹是：

    *   阿米亚比
    *   armeabi-v7a
    *   mips
    *   x86

        ```
        public class MainActivity extends Activity {
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            boolean success;
            success = http.UnlockComponent("anything");
            if (success != true) {
                return;
            }

            http.put_Login("<Username>");
            http.put_Password("<Password>");
            http.put_NtlmAuth(true);
            http.put_SessionLogFilename("ntlmAuthLog.txt");
            String html;
            html = http.quickGetStr("http://websitewithntlmnauthentication.com");
            //load the data to a webview from the string "html".
            webView.loadUrl(html,"","UTF-8"); } 
        ```

        并在后面添加`onCreate()`：

        ```
        static {
                  // Important: Make sure the name passed to loadLibrary matches the shared library
                  // found in your project's libs/armeabi directory.
                  //  for "libchilkat.so", pass "chilkat" to loadLibrary
                  //  for "libchilkatemail.so", pass "chilkatemail" to loadLibrary
                  //  etc.
                  // 
                  System.loadLibrary("chilkat");

                  // Note: If the incorrect library name is passed to System.loadLibrary,
                  // then you will see the following error message at application startup:
                  //"The application <your-application-name> has stopped unexpectedly. Please try again."
              } 
        ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-30T13:06:31.980

问题是：“我需要在加载 URL 之前传递凭据（用户名和密码）。” 但是，在加载 url 之前传递凭据不是一个好习惯。

不需要任何第三方库。可以通过在 WebViewClient 中重写以下方法来实现：

```
 @Override
        public void onReceivedHttpAuthRequest(WebView view,
                HttpAuthHandler handler, String host, String realm)
        {
            Log.d(TAG + "_onReceivedHttpAuthRequest", "host = " + host + " realm = " + realm);
//Show dialog and accept credentials from end-user. Hard-coding username and password is strict NO as it can be easlity reverse engineered.
            handler.proceed("username", "password");
        } 
```

# java - 使用带有 java 的 mongodb 时出现太多连接错误

> ID：14934029
> 
> 赞同：4
> 
> 时间：2013-02-18T10:23:42.263
> 
> 标签：java, spring, mongodb, connection

我使用 MongoDbFactory 通过 Java 连接到 mongodb。但是 mongo 服务每小时至少抛出一次套接字异常。因此，我被迫重新启动 mongodb 服务以恢复操作。我认为这可能是由于从 java 到 mongodb 的连接未关闭，而且 MongoDbFactory 没有为我提供关闭连接的功能。如何确保在特定会话后关闭所有连接。

这是我正在使用的代码：

```
package com.####.mongo.configuration;

import com.mongodb.Mongo;
import org.springframework.context.annotation.Bean;
import org.springframework.data.mongodb.MongoDbFactory;
import org.springframework.data.mongodb.core.MongoTemplate;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.mongodb.core.SimpleMongoDbFactory;
import org.springframework.data.mongodb.core.convert.DefaultMongoTypeMapper;
import org.springframework.data.mongodb.core.convert.MappingMongoConverter;
import org.springframework.data.mongodb.core.mapping.MongoMappingContext;

@Configuration
public class SpringMongoFeedConfig {

public @Bean
MongoDbFactory mongoDbFactory() throws Exception {
    return new SimpleMongoDbFactory(new Mongo(), "feedDatabase");
}

public @Bean
MongoTemplate mongoTemplate() throws Exception {

    MappingMongoConverter converter = new MappingMongoConverter(mongoDbFactory(), new MongoMappingContext());
    converter.setTypeMapper(new DefaultMongoTypeMapper(null));
    MongoTemplate mongoTemplate = new MongoTemplate(mongoDbFactory(), converter);

    return mongoTemplate; 
} 
```

}

和：

```
private String insertFeedsToMongo(FeedMongoDTO feedObject, FeedType type) throws UnknownHostException {
    try {
        ApplicationContext ctx = new AnnotationConfigApplicationContext(SpringMongoFeedConfig.class);
        MongoOperations mongoOperation = (MongoOperations) ctx.getBean("mongoTemplate");

        switch (type) {

        case FOLLOW:
            mongoOperation.save(feedObject, "feedsByUid");
            break;

        case GENERAL:
            mongoOperation.save(feedObject, "allFeeds");
            break;

        default:
            break;
        }

        return feedObject.getId();

    } catch (Exception ex) {
        log.info("insertFeedsToMongo() : mongo Exception - ", ex);
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:29:37.873

我也遇到了这个`Mongo`对象的问题。确保在`myMongo.close()`完成特定连接时调用它来解决它。

我建议将您创建的实例存储`new Mongo()`在您的工厂函数中，以便稍后关闭它~~（`SimpleMongoDbFactory`可能就是那个地方）。~~刚刚注意到这是一个春天的事情。建议仍然存在：跟踪您的`Mongo`实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T20:05:47.920

有了akaIDIOT的建议，我做了以下

```
public class FeedMongoOperations {

public static transient Log log = LogFactory.getLog(FeedMongoOperations.class);

private Mongo mongo;
private SimpleMongoDbFactory dbFactory;
private MongoTemplate mongoTemplate;

public boolean openDbConnection() {
    try {
        MongoOptions options = new MongoOptions();
        options.connectionsPerHost = 100;
        mongo = new Mongo("localhost", options);
        dbFactory = new SimpleMongoDbFactory(mongo, "feedDatabase");
        MappingMongoConverter converter = new MappingMongoConverter(dbFactory, new MongoMappingContext());
        converter.setTypeMapper(new DefaultMongoTypeMapper(null));
        mongoTemplate = new MongoTemplate(dbFactory, converter);

        return true;
    } catch (Exception e) {
        return false;
    }
}

public boolean closeDbConnection() {
    try {
        mongoTemplate = null;
        dbFactory = null;
        mongo.close();

        return true;
    }
}

public String save(FeedMongoDTO feed, String collectionName) {
    try {
        mongoTemplate.save(feed, collectionName);
        return feed.getId();
    } catch (Exception ex) {
        return null;
    } 
}

public FeedMongoDTO getFeed(String mongoId, String collectionName) {

    try {
        FeedMongoDTO feedMongoDTO = mongoTemplate.findOne(new Query(Criteria.where("id").is(mongoId)), FeedMongoDTO.class,
                collectionName);
        return feedMongoDTO;
    } catch (Exception ex) {
        return null;
    }
}

} 
```

# c# - 复制 Word 脚注

> ID：14934031
> 
> 赞同：-2
> 
> 时间：2013-02-18T10:23:45.417
> 
> 标签：c#, ms-word, ms-office

我有两个word文档。除了脚注（只有一个文档包含注释）之外，这两个文档都是平等的。我需要将笔记从一份文件复制到同一位置的另一份文件。我正在使用`Microsoft.Office.Interop.Word`COM 参考。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:47:29.027

好吧，我自己找到了一个解决方案：

```
foreach (Microsoft.Office.Interop.Word.Footnote x in doc.Footnotes)
{
    //MessageBox.Show(x.Range.Text);

    object selStart = x.Range.Start;
    object selEnd = x.Range.End;
    object missing = Type.Missing;
    object footnote = x.Range.Text;
    Range range = doc2.Range(ref selStart, ref selEnd);
    doc2.Footnotes.Add(range, ref missing, x.Range.Text);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-08T14:02:56.977

```
 public static void FindFootnoteInDocument(Word.Document doc)
        {
     foreach (Microsoft.Office.Interop.Word.Footnote paragraph in doc.Footnotes)
                {
                    paragraph.Range.Select();
                    Microsoft.Office.Interop.Word.Style style1 = paragraph.Application.Selection.get_Style() as Microsoft.Office.Interop.Word.Style;
                    string styleName1;
                    if (style1 != null)
                        styleName1 = style1.NameLocal;
                    else
                        styleName1 = "Footnote Text";
                    int range = paragraph.Range.Start;
                    Word.Range ty = APIWrapper.APIUtility.GetWordRange(doc.Name, paragraph.Range.Start, paragraph.Range.End);
                    object unit = Word.WdUnits.wdWord;
                    object count = 1;
                    object extend = Word.WdMovementType.wdMove;
                    int t = paragraph.Application.Selection.Range.Move(ref unit, ref count);
                    string text = paragraph.Range.Text;
                    if (styleName1 == "Footnote Text")
                    {
                        Word.Selection currentSelection = doc.Application.Selection;
                        currentSelection.Find.ClearFormatting();
                        object style = "Footnote Text";
                        currentSelection.Find.set_Style(ref style);
                        var _with1 = currentSelection.Find;
                        _with1.Text = "";
                        _with1.Replacement.Text = "";
                        _with1.Forward = true;
                        _with1.Wrap = Word.WdFindWrap.wdFindContinue;
                        _with1.Format = true;
                        _with1.MatchCase = false;
                        _with1.MatchWholeWord = false;
                        _with1.MatchWildcards = false;
                        _with1.MatchSoundsLike = false;
                        _with1.MatchAllWordForms = false;
                        currentSelection.Cut();
                        object Count1 = 1;
                        object Unit1 = WdUnits.wdLine;
                        object Extend1 = WdMovementType.wdExtend;

                        doc.Application.Selection.MoveUp(ref Unit, ref Count, ref missing);
                        currentSelection.Find.Execute();//Execute()
                        while (currentSelection.Find.Found)
                        {
                           currentSelection.Range.Select();
                         string textvalue = currentSelection.Range.Text;
                         r2.Text = textvalue;
            MessageBox.Show("Sent lines :" + currentSelection.Text.ToString());
                          r2.set_Style(ref style);
                         break;  
                        }
                    }
                }
                break;
            }
        } 
```

# javascript - 将预加载的图像绘制到画布中

> ID：14934033
> 
> 赞同：1
> 
> 时间：2013-02-18T10:24:06.843
> 
> 标签：javascript, html, canvas

再一次，完全超出了我的深度，但我需要预加载一些图像，然后在加载“所有元素（包括 xml 文件等）”时将它们添加到页面中。图像和参考存储在一个数组中以供以后访问。尝试从该数组中绘制和图像会引发错误，但我知道它是可用的，因为我可以追加到页面：

```
preloadImages: function (loadList, callback) {
    var img;
    var loadedFiles = [];
     var remaining = loadList.length;
   $(loadList).each(function(index, address ) {
     img = new Image();
    img.onload = function() {
         --remaining;
          if (remaining <= 0) {
                callback(loadedFiles);
            }
         };
 img.src = loadList[index];
     loadedFiles.push({file: 'name of image to be loaded', image: img }); //Store the image name for later refernce and the image
    });

}

//WHEN CERTAIN OTHER CONDITIONS EXIST I CALL THE FUNCTION BELOW

buildScreen: function ( imageLocs, image){
//THIS FUNCTION LOOPS THROUGH imageLocs (XML) AND CREATES CANVAS ELEMENTS, ADDING CLASSES ETC AND DRAWS PART OF A SPRITE (image) 
        //INTO THE CANVASES CREATED
    var ctx = $('ID of CANVAS').get(0).getContext("2d");
    var x =  'position x in imageLocs'
        var y =  'position y in imageLocs'
        var w =  'width in imageLocs'
        var h =  'position x in imageLocs'
        ctx.drawImage(image, x,y, w, h, 0, 0, w, h); //THIS THROWS AN ERROR 'TypeError: Value could not be converted to any of: HTMLImageElement, HTMLCanvasElement, HTMLVideoElement'
        //$(image).appendTo("#innerWrapper") //YET I KNOW THAT IT IS AVAILABE AS THIS LINE ADDS THE IMAGE TO THE PAGE
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:45:40.677

### 问题

问题是因为您将 jQuery 对象传递给本机函数，在这种情况下`ctx.drawImage`，drawImage 将仅支持本机对象。

```
startSequence : function(){
  $('#innerWrapper').empty();
  var screenImageRef = $.grep(ST.imageFilesLoaded, function(e){ 
    return e.file == 'AtlasSheet'
  });
  var screenImage = $(screenImageRef[0].image);
  var imageLocsRef = $.grep(ST.xmlFilesLoaded, function(e){ 
    return e.file == 'IMAGELOCS'
  });
  var imageLocs = $(imageLocsRef[0].xml);
  //$(screenImage).appendTo("#innerWrapper") //appends screenImage 
  Utilis.buildScreen('1', imageLocs, screenImage, ST.didYouSeeIt, 'ST')
} 
```

您的`screenImage`var 由 创建`$(screenImageRef[0].image)`，这将返回一个包装原生图像对象的 jQuery 对象。要返回原始原生图像对象，请使用以下命令：

```
screenImage.get(0) 
```

或者

```
screenImage[0] 
```

前者是jQuery支持的方式。

### 解决方案

因此，对您的代码的修复应该是，更改以下行：

```
Utilis.buildScreen('1', imageLocs, screenImage.get(0), ST.didYouSeeIt, 'ST'); 
```

或者更改 buildScreen 方法中的行：

```
ctx.drawImage(image.get(0), x,y, w, h, 0, 0, w, h); 
```

...无论你喜欢哪个。

### 调试时的困惑

附加图像时一切似乎都可以正常工作的原因是因为您使用 jQuery 来附加图像，并且 jQuery 支持传递 jQuery 包装的元素。如果您尝试附加您`screenImage`使用的本机函数，即`Element.appendChild()`您会遇到类似的错误。

只是为了在将来提供帮助，最好始终使用`console.log`找出变量实际具有的类型/结构。`console.log`在您以前的var 上使用`image`会给出一个奇怪的 jQuery 包装器对象转储（可能已经敲响了警钟），而不是预期的`[object HTMLImageElement]`或其他一些与图像/控制台相关的输出（取决于浏览器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:51:47.790

我认为您的图像预加载器不太正确，因为它对`img`所有图像使用相同的变量。

这是我知道效果很好的一个：[https ://gist.github.com/eikes/3925183](https://gist.github.com/eikes/3925183)

# c# - 关于异常处理

> ID：14934035
> 
> 赞同：-1
> 
> 时间：2013-02-18T10:24:17.513
> 
> 标签：c#, exception-handling

在下面的代码中，如果 cmd1 和 cmd2 通过而 cmd3 失败。do c# abort all block (try block) ?, 还是继续执行 cmd1 和 cmd2 ?.

```
 try
            {

                sqlConnection1.Open();
                cmd1.ExecuteNonQuery();
                cmd2.ExecuteNonQuery();
                cmd3.ExecuteNonQuery();

            }
            catch (Exception ex)
            {
                MessageBox.Show("An error occured " + ex.Message);
            }

            finally
                {
                    sqlConnection1.Close();
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:26:50.870

cmd1 和 cmd2 将在您指定的场景中执行，并且 cmd3 上的异常将被异常处理捕获。

为了实现在 cmd3 失败时中止 cmd1 和 cmd2 的行为，您可以将所有 sql 命令放在一个存储过程中并使用[TRANSACTION 和 ROLLBACK](http://msdn.microsoft.com/en-us/library/ms181299.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:29:31.490

给定你的场景 cmd1 和 cmd2 将执行，如果有 execption 那么它将去 catch 块。如果 cmd1 失败，那么它不会执行 cmd2 和 cmd3 并且会去 catch 块。同样值得[在这里阅读此链接](https://stackoverflow.com/questions/3304308/try-catch-finally-question)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:29:36.373

cmd1 和 cmd2 将被执行，因为 try/catch 块不会自动执行查询事务。但是，如果 cmd3 失败，您也许可以使用[事务范围](http://msdn.microsoft.com/en-us/library/ms172152.aspx)执行回滚并撤消在 cmd1/cmd2 中所做的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:33:18.663

当抛出异常时，代码停止跳转到最近的 catch 块。

任何低于异常发生点的代码 - 都不会被执行。

在您的场景中，您可能想考虑这样使用`TransactionScope`：

```
using(var trans = new TransactionScope())
{
  try
  {
     //your setup code goes here

    sqlConnection1.Open();
                cmd1.ExecuteNonQuery();
                cmd2.ExecuteNonQuery();
                cmd3.ExecuteNonQuery();

    trans.Complete();
   }
   catch(Exception)
   {
    //handle exception
   }
} 
```

`trans.Complete()`如果未执行statemenet，对数据库所做的任何更改都会回滚。

# c# - 如何以辅助角色在 Azure 中运行 RavenDb

> ID：14934037
> 
> 赞同：6
> 
> 时间：2013-02-18T10:24:27.670
> 
> 标签：c#, asp.net, .net, azure, ravendb

几个月前，我在玩 RavenDb 和 Azure，并按照[这篇出色的博客文章](http://www.michaelhanley.org/blog/2011/12/ravendb-running-in-windows-azure.html)，通过在工作角色中托管服务器，成功地运行了它。

但是，我刚刚创建了一个新项目并尝试再次关注该文章，但自那篇博客文章以来，它似乎与 raven 文件发生了很大变化。尤其 ：

*   不只是一个“RavenDB”NuGet 包 - 其中有很多：RavenDB 客户端、RavenDB 数据库、RavenDB 嵌入式、RavenDB 服务器和 RavenDB Asp.Net 托管服务器。
*   安装“RavenDB 服务器”（这似乎最适合工作人员角色）时，它不再具有文章中提到的相同 .dll，并且不再有 .xap 文件。我试过简单地引用 Raven.Database .dll，但是当我尝试启动它时，我得到一个`InvalidOperation`异常：“存储在 Munin 文件中的表数量不同”。

谁能向我提供以工作角色运行 RavenDB 所需的步骤？

将 RavenDB 作为辅助角色运行是最好的方式，还是有更合适的方式在 Azure 中运行它？（它需要被多个网站使用）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T12:50:34.390

我强烈建议使用其中一种具体的虚拟机 (IaaS) 产品来运行 RavenDB。RavenDB 的弹性设计并不是为了让您能够增加或减少正在运行的工作人员的数量，因此您真的无法从工作人员角色功能中获得任何东西。

# facebook - facebook FQL 获取照片全尺寸 src

> ID：14934045
> 
> 赞同：0
> 
> 时间：2013-02-18T10:24:51.203
> 
> 标签：facebook, get, facebook-fql, photo, src

```
SELECT pid,link,src,src_big FROM photo WHERE aid = '143587452330654_112887' 
```

我正在使用此代码来检索图像 src。但我想获得大图像 src（你可以在照片下看到哪一个 - 下载）

[http://awesomescreenshot.com/0f3xxe4f3](http://awesomescreenshot.com/0f3xxe4f3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:42:17.790

我找到了一个方法

这是我的查询

```
SELECT pid,src,images FROM photo WHERE object_id IN (SELECT object_id FROM photo WHERE album_object_id=$object_id

foreach( $tagged_graph as $key => $value )
{
    $highres = array_shift($value['images']);
    echo 'src : ', $value['src'] , ';
    echo 'hq : ' ,  $highres['source'] , ';
} 
```

# javascript - 如何使用 javascript 在加载时扩展 youtube 缩略图

> ID：14934049
> 
> 赞同：0
> 
> 时间：2013-02-18T10:24:59.067
> 
> 标签：javascript, jquery, html, jquery-mobile, youtube-javascript-api

我的问题得到了解决方案，[即即使给出了不同的嵌入式代码，如何摆脱重复出现的 youtube 视频？](https://stackoverflow.com/questions/14932091/how-to-get-rid-of-youtube-videos-getting-repeated-even-though-different-embedded)关联。我有一个小要求，即我必须在加载事件的页面上将我的 youtube 视频缩略图调整为宽度：146px 和高度：124px。请帮助我实现这一目标。提前致谢。

这是在页面上导入的 youtube 视频的链接，点击后会展开

```
https://stackoverflow.com/questions/14932091/how-to-get-rid-of-youtube-videos-getting-repeated-even-though-different-embedded 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:57:37.510

YouTube API 只能输出 120x90 或 480x360 像素的图像。

例如（来自您的 jsFiddle 的视频）：

*   [http://img.youtube.com/vi/Cgovv8jWETM/0.jpg](http://img.youtube.com/vi/Cgovv8jWETM/0.jpg) - 480x360
*   [http://img.youtube.com/vi/Cgovv8jWETM/1.jpg](http://img.youtube.com/vi/Cgovv8jWETM/1.jpg) = 120x90
*   [http://img.youtube.com/vi/Cgovv8jWETM/2.jpg](http://img.youtube.com/vi/Cgovv8jWETM/2.jpg) = 120x90
*   [http://img.youtube.com/vi/Cgovv8jWETM/3.jpg](http://img.youtube.com/vi/Cgovv8jWETM/3.jpg) = 120x90

`img`为什么不直接在标签上修改 HTML 中缩略图的高度和宽度？

# regex - 正则表达式删除破折号字符

> ID：14934051
> 
> 赞同：1
> 
> 时间：2013-02-18T10:25:02.757
> 
> 标签：regex

我有一个文本输入，将输入如下

```
7 - BMW 550i 
```

如果用户输入这个，我如何使用正则表达式删除破折号右侧的所有内容，所以我只剩下第一个数值。

我试过这个：

```
-?\\d+ 
```

但是，如果像我给出的示例一样，它将获得结束编号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:28:43.207

这应该有效：

```
(\d+)\s*- 
```

用来`$1`得到你的结果。

例如，在 Perl 中，使用这个：

```
my ($number) = ($str =~ /(\d+)\s*-/); 
```

RegexPlanet[在线演示](http://fiddle.re/ftpz)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-18T10:31:33.233

在不使用正则表达式的情况下，有更有效的方法可以做到这一点，我建议你朝那个方向看。

# linux - 使用相同变量的两个 shell 脚本

> ID：14934053
> 
> 赞同：1
> 
> 时间：2013-02-18T10:25:16.433
> 
> 标签：linux, bash, shell

我有两个 shell 脚本 test1.sh 和 test2.sh。
在 test1.sh 我有以下语句：
在**test1.sh**中，我有一个变量**I**，它的值将被**test2.sh使用**

```
#!/bin/sh
I="10"
echo $I 
```

在**test2.sh**中，将复制和打印相同的变量值

```
#!/bin/sh
J=$I
echo $J 
```

我需要在 crontab 中运行这两个脚本，我尝试了**导出**命令，但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:03:38.497

将此添加到您的 crontab ：

```
. ./test1.sh && ./test2.sh; 
```

并像这样修改你的 test1.sh ：

```
#!/bin/sh
export I="10"
echo $I 
```

第一个将`.`作为源执行并保存变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:34:24.070

这两个脚本都在它们自己的 shell 中运行，并且只与它们的*父*进程共享它们的环境。如果您希望两个单独的 shell 脚本共享环境变量，则必须在调用脚本之前在父进程中设置（并导出）变量。

您还可以创建仅设置变量的第三个脚本，并从两个主要脚本中获取该脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:34:36.870

如果你想使用`test1.sh`in script的输出`test2.sh`，你有两个选择

*   将 的输出存储`test1.sh`在文件中并将该文件读回`test2.sh`
*   来电`test1.sh`_`test2.sh`

测试2.sh：

```
#!/bin/sh
J=$(test1.sh)
echo $J 
```

正如@Joachim Pileborg 已经建议的那样，您可以在一个脚本中设置（但不能回显）变量并在另一个脚本中获取它

测试1.sh

```
I="10"
J=20
K=30 
```

测试2.sh

```
source test1.sh
# do something with I, J, K 
```

# objective-c - 我需要为我的项目的所有常量创建单独的文件

> ID：14934056
> 
> 赞同：5
> 
> 时间：2013-02-18T10:25:36.263
> 
> 标签：objective-c, xcode, variables

在我的项目中，我需要为我在同一项目的不同类中使用的所有常量创建单独的文件。

我看到了一些例子，但他们说的是在“.h”文件中创建，他们再次在“.m”文件中实现它们。但是我只需要'.h'文件来创建所有常量，并且我必须通过在我的项目的每个类中导入那个'.h'文件来使用所有这些常量。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T11:23:40.820

![在此处输入图像描述](../Images/eda9c001d9201c07358c165e7ca58618.png) 添加一个新文件。

*   右键单击文件检查器
*   选择新文件
*   弹出窗口选择ios>C and C++>HeaderFile[图]
*   命名常量
*   添加`#define OK @"OK"`
*   转到 View Controller 在 header 中包含文件 `#import "Constants.h"` **或**在 pch 文件中定义，以便所有 View 控制器都可以访问该文件
*   在 viewDidLoad `NSLog(@"%@",OK);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:44:36.110

您可以创建 .h 文件并使用 #define 创建常量，然后将您的文件包含在项目的前缀文件中。虽然我更喜欢使用在 .h 文件中声明并在 .m 文件中定义的外部常量。这有助于在编译时跟踪代码中可能出现的警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:42:11.413

你几乎已经回答了你自己的问题，以至于我不确定你到底在问什么——你可以用你的常量创建一个头文件（.h），然后将它导入到你的其他类中。您不需要创建相应的实现 (.m) 文件。如果您在整个代码中使用常量，您可以在前缀标头中导入它们并让它们自动可用。

# c++ - gtkmm 链接器错误

> ID：14934059
> 
> 赞同：0
> 
> 时间：2013-02-18T10:25:44.453
> 
> 标签：c++, gcc, linker, g++, gtkmm

**你好 stackoverflow :)，我正在编译一个基本的 gui 程序，它需要 2 个双精度数的总和并将它们打印出来。我的代码其实很简单，我先贴出我通过命令行编译的3个文件**

```
"g++ main.cc examplewindow.cc -o main `pkg-config gtkmm-3.0 --cflags --libs`" 
```

**命令行上的错误是：**

```
/tmp/ccSeXudb.o: In function `ExampleWindow::on_button_clicked_calculate()': examplewindow.cc:(.text+0x1e70): undefined reference to `ExampleWindow::double_to_ustring(double)'

collect2: error: ld returned 1 exit status 
```

**这是3个文件：**

```
 examplewindow.h

#ifndef GTKMM_EXAMPLEWINDOW_H
#define GTKMM_EXAMPLEWINDOW_H

#include <gtkmm.h>
#include <boost/lexical_cast.hpp>
#include <stdlib.h>
#include <string>

class ExampleWindow : public Gtk::Window
{
public:
  ExampleWindow();
  virtual ~ExampleWindow();

protected:
  //Signal handlers:
  void on_checkbox_editable_toggled();
  void on_checkbox_visibility_toggled();
  Glib::ustring get_entry1();
  Glib::ustring get_entry2();
  std::string double_to_ustring(double a);
  void on_button_clicked_calculate();
  void on_button_close();

  //Child widgets:
  //Gtk::Box m_HBox;
  Gtk::Box m_VBox;
  Gtk::Box m_ZBox;
  Gtk::Entry m_Entry, m_Entry2, m_Entry3; 
  Gtk::Button m_Button_Close, m_Button_Calculate;
  //Gtk::CheckButton m_CheckButton_Editable, m_CheckButton_Visible;
  Gtk::Label m_Label_Sum, m_Label_Equals;
};

#endif //GTKMM_EXAMPLEWINDOW_H

                                     main.cc

#include "examplewindow.h"
#include <gtkmm/application.h>

int main(int argc, char *argv[])
{
  Glib::RefPtr<Gtk::Application> app = Gtk::Application::create(argc, argv,     "org.gtkmm.example");

  ExampleWindow window;

  //Shows the window and returns when it is closed.
  return app->run(window);
}

                                  examplewindow.cc

#include "examplewindow.h"
#include <iostream>
#include <boost/lexical_cast.hpp>
#include <stdlib.h>
#include <string>

ExampleWindow::ExampleWindow()
: m_VBox(Gtk::ORIENTATION_VERTICAL),
  m_ZBox(Gtk::ORIENTATION_HORIZONTAL),
  m_Button_Calculate("Calculate"),
  m_Button_Close("Close")
{
  set_size_request(200, 100);
  set_title("Trial Version:P");

  add(m_VBox);

  m_VBox.add(m_ZBox);

  m_Entry.set_max_length(50);
  m_Entry.set_text("First");
  m_Entry.set_text(m_Entry.get_text() + " value");
  m_Entry.select_region(0, m_Entry.get_text_length());
  m_ZBox.pack_start(m_Entry);

  m_Label_Sum.set_text("+");
  m_ZBox.pack_start(m_Label_Sum); 

  m_Entry2.set_max_length(50);
  m_Entry2.set_text("Second");
  m_Entry2.set_text(m_Entry2.get_text() + " value");
  m_Entry2.select_region(0, m_Entry2.get_text_length());
  m_ZBox.pack_start(m_Entry2);

  m_Label_Equals.set_text("=");
  m_ZBox.pack_start(m_Label_Equals);

  m_Entry3.set_max_length(50);
  m_Entry3.set_text("The");
  m_Entry3.set_text(m_Entry3.get_text() + " result"); 
  m_Entry3.set_editable(0); 
  m_Entry3.select_region(0, m_Entry3.get_text_length());
  m_ZBox.pack_start(m_Entry3);

  m_Button_Calculate.signal_clicked().connect( sigc::mem_fun(*this,     &ExampleWindow::on_button_clicked_calculate) );
  m_VBox.pack_start(m_Button_Calculate);
  m_Button_Calculate.set_can_default();
  m_Button_Calculate.grab_default();
  m_Button_Close.signal_clicked().connect( sigc::mem_fun(*this,
              &ExampleWindow::on_button_close) );
  m_VBox.pack_start(m_Button_Close);
  m_Button_Close.set_can_default();
  m_Button_Close.grab_default();

  show_all_children();
}

ExampleWindow::~ExampleWindow()
{
}

Glib::ustring ExampleWindow::get_entry1()
{
  return m_Entry.get_text();
}

Glib::ustring ExampleWindow::get_entry2()
{
  return m_Entry2.get_text();
}
std::string double_to_ustring(double a)
{
  std::string str = boost::lexical_cast<std::string>(a);
  return str; 
}

void ExampleWindow::on_button_clicked_calculate()
{ 
  Glib::ustring a = get_entry1();
  Glib::ustring b = get_entry2();
  double m = std::atof( a.c_str() ) + std::atof( b.c_str() );
  Glib::ustring z = double_to_ustring(m);
  m_Entry3.set_text(z);
}

void ExampleWindow::on_button_close()
{
  hide();

} 
```

我制作了它的仅 c++ 版本：

```
#include <iostream>
#include <boost/lexical_cast.hpp>
#include <stdlib.h>
#include <string>

using namespace std;

string double_to_string(double a)
{
  string str = boost::lexical_cast<std::string>(a);
  return str; 
}

int main()
{
  string a="3", b="5";
  double m = atof( a.c_str() ) + atof( b.c_str() );
  string z = double_to_string(m);
  cout << z << endl;
} 
```

c++ 版本有效，所以我需要帮助。如何让链接器工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:30:39.350

在您的 examplewindow.cc 文件中，您`std::string double_to_ustring(double a)`从 ExampleWindow 类中定义。您需要像类的所有其他成员方法一样限定它：`std::string ExampleWindow::double_to_ustring(double a)`

# c++ - 如何从 OpenCV 更新 Bayes NormalClassifier？

> ID：14934065
> 
> 赞同：2
> 
> 时间：2013-02-18T10:25:56.000
> 
> 标签：c++, opencv, machine-learning, bayesian

我正在尝试`CvNormalBayesClassifier`从**OpenCV**使用。但是我无法更新我已经训练过的模型。这是我最初训练模型的代码：

```
Mat training_data = Mat(counter_instances, ALLFEATURESIZE, CV_32FC1);
Mat training_classifications = Mat(counter_instances, 1, CV_32SC1);;

CvNormalBayesClassifier *bayes = new CvNormalBayesClassifier;
//filling the training data, 1 row per instance. 
//filling the classification data, 1 row and 1 column per instance, integer as class label
bayes->train(training_data, training_classifications);
bayes->save("bayes.model"); 
```

因此，这可以正常工作并保存模型。

但是当我尝试加载这个模型并更新它时，我得到了一个错误。我正在使用这段代码：

```
Mat newTraining_data = Mat(1, ALLFEATURESIZE, CV_32FC1);
//fill data with one instance
Mat newLabel = Mat(1, 1, CV_32SC1);
newLabel.at<int>(0, 0) = (int) label; //some label
bayes->load("bayes.model");
bayes->train(newTraining_data, newLabel, Mat(), Mat(), true); 
```

这是我得到的错误：

```
OpenCV Error: Bad argument (There is only a single class) in 
cvPreprocessCategoricalResponses, file /tmp/buildd/libopencv-2.3.1+svn6514+branch23
/modules/ml/src/inner_functions.cpp, line 729 
```

我试图放入我最初使用的所有实例，并在新实例中添加一行。这以某种方式起作用，但需要的时间与训练一个完整的新模型所需的时间相同。这真的很长...

我究竟做错了什么？怎么做才对？

如果没有人能帮我解决这个问题：有谁知道朴素贝叶斯的 C++ 实现，它具有加载/保存功能、更新功能和返回的预测类的概率？

# python - 自定义 ABC 类：__new()__ 正好采用 4 个参数（1 个给定）

> ID：14934066
> 
> 赞同：1
> 
> 时间：2013-02-18T10:25:56.687
> 
> 标签：python, python-2.7

我想实现一个基于插件的文件上传器，它可以将文件上传到不同的服务。它从一个目录加载所有 python 模块，然后根据要上传到的服务调用它们。

我有一个简单的 BaseHandler 它只是所有插件的抽象基类

```
import abc

class BaseHandler():
   __metaclass__ = abc.ABCMeta

   @abc.abstractmethod
   def start(self,startString):
      return 
```

我有一个从 BaseHandler 继承的简单插件

```
from BaseHandler import BaseHandler

class Cloud(BaseHandler):
    def start(self,startString): 
        return 
```

以及加载插件并调用它们的实际代码

```
import logging
import os
import sys
from BaseHandler import BaseHandler

all_plugins = {}

def load_plugins():
    plugin_dir = os.path.join(os.path.dirname(os.path.realpath(__file__)),"Handlers")
    plugin_files = [x[:-3] for x in os.listdir(plugin_dir) if x.endswith(".py")]
    sys.path.insert(0,plugin_dir)
    for plugin in plugin_files:
        mod = __import__(plugin)
    logging.info('Plugins have been loaded from the directory '+plugin_dir)
    for plugin in BaseHandler.__subclasses__():
        logging.info('Plugin:'+plugin.__name__)    
    return BaseHandler.__subclasses__()

logging.basicConfig(level=logging.DEBUG)
loadedPlugins = load_plugins()

for plugin in loadedPlugins:
    all_plugins[plugin.__name__]= plugin.__class__
    handle = all_plugins[plugin.__name__]() 
```

当我尝试在脚本的最后一行创建插件的实际对象时

```
 handle = all_plugins[plugin.__name__]() 
```

我得到一个错误`TypeError: __new__() takes exactly 4 arguments (1 given)`。

编辑：添加了完整的追溯

```
Traceback (most recent call last):
   File "C:\TestCopy\Test.py", line 24, in <
module>
    handle = all_plugins[plugin.__name__]()
TypeError: __new__() takes exactly 4 arguments (1 given) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:27:15.597

您正在注册*元类*，而不是插件本身；

```
>>> BaseHandler()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Can't instantiate abstract class BaseHandler with abstract methods start 
```

我认为您的意思是存储插件本身：

```
all_plugins[plugin.__name__] = plugin 
```

`__class__`属性是类而`BaseHandler`不是；`plugin`对象是类，而不是实例。

# unix - 在服务器上的本地目录中安装包和库

> ID：14934067
> 
> 赞同：0
> 
> 时间：2013-02-18T10:25:59.570
> 
> 标签：unix

我已加入大学服务器：Red Hat Enterprise Linux 6.2 版。

我的工作是测试各种科学分析程序。

我在我的本地目录中解压和运行它们没有问题。但是它们中的大多数都有很多依赖项（perl 库、RE2、GNU SL、glibc.i686）——每当我尝试安装这些依赖项时，我都会遇到权限问题。

所有这些软件包都需要 root 才能安装。

有没有办法让我只在我的本地目录中安装各种不同的软件包而不要求 root 在系统范围内安装它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:37:00.670

是的，但程序因包裹而异。许多现代 Unix 软件包都有一个`configure`必须运行的脚本，该脚本需要一个`--prefix`选项 + 参数来指定软件包的安装位置。诸如此类的目录`$HOME/pkg`将是这些的不错选择。其他配置/构建/安装脚本具有类似的选项。

在构建具有依赖项的包时，请确保您`$HOME/pkg/bin`的、`PATH`和、和 分别传递给编译器和链接器。例如，将以下内容放入您的 shell 启动文件（对于 Bash）：`$HOME/pkg/lib``LD_LIBRARY_PATH``-I$HOME/pkg/include``-L$HOME/pkg/lib``.bashrc`

```
PATH=$HOME/pkg/bin:$PATH
CFLAGS=-I$HOME/pkg/include
LDFLAGS=-L$HOME/pkg/lib
LD_LIBRARY_PATH=$HOME/pkg/lib 
```

（您永远不必安装 glibc。）

# bash - 如何理解这个 bash 脚本调试框架？

> ID：14934072
> 
> 赞同：0
> 
> 时间：2013-02-18T10:26:17.283
> 
> 标签：bash

我尝试了解以下脚本调试框架。

```
#!/bin/bash
_DEBUG="on"
function DEBUG()
{
 [ "$_DEBUG" == "on" ] &&  $@
}

DEBUG echo 'Reading files'
for i in *
do
  grep 'something' $i > /dev/null
  [ $? -eq 0 ] && echo "Found in $i file"
done
DEBUG set -x
a=2
b=3
c=$(( $a + $b ))
DEBUG set +x
echo "$a + $b = $c" 
```

我无法理解函数 DEBUG 及其用法。

我的问题是

(0) $@ 是什么意思？

(1) DEBUG echo 'Reading files' 如何使用 $@ 工作？

(2) 怎么做

```
DEBUG set -x
a=2
b=3
c=$(( $a + $b ))
DEBUG set +x 
```

使用 $@ 工作？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:36:10.423

(0) 见[man bash](http://linux.die.net/man/1/bash)。`$@`是所有位置参数的列表。

(1)`DEBUG echo 'Reading files'`使用两个参数调用 DEBUG`echo`和`Reading files`. 结果，`echo Reading files`是调用。

(2)`set +x`使 bash 在执行时打印命令及其参数。DEBUG 的工作`$@`方式与 (1) 中的相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:34:33.700

**$@**扩展传递给函数（或 bash 脚本本身）的所有参数

例如。如果调用`DEBUG echo "test"`特殊变量`$@`将扩展为`echo "test"`.

该`DEBUG`函数只是检查`$_DEBUG`变量是否设置为`"on"`. 如果是这样，它执行作为参数传递的命令（存储到`$@`变量中）

这`set -x`将使解释器在执行之前打印每个命令，因此它将帮助您了解任何时间点发生的事情。

`set +x`将恢复正常行为

# javascript - 在 SWFUpload 中添加额外的参数

> ID：14934074
> 
> 赞同：3
> 
> 时间：2013-02-18T10:26:21.933
> 
> 标签：javascript, swfupload

我正在尝试为使用上传的每个文件添加一个额外的 post 参数`addFileParam`，[文档](http://demo.swfupload.org/Documentation/#addFileParam)很好地解释了自己，但是当我尝试添加任何内容时，它会将值添加到 size 参数中，导致它执行类似这样的操作

```
SWF DEBUG:   'Filename' => 'image.jpeg',
SWF DEBUG:   'cnid' => 'up5121fcacd30besize=539321',
SWF DEBUG:   'Upload' => 'Submit Query', 
```

当我真正需要的是：

```
SWF DEBUG:   'Filename' => 'image.jpeg',
SWF DEBUG:   'cnid' => 'up5121fcacd30be',
SWF DEBUG:   'size' => '539321',
SWF DEBUG:   'Upload' => 'Submit Query', 
```

我的Javascript：

```
function onQueued(obj) {
    swfu.addFileParam(obj.id, 'cnid', 'up5121fcacd30be');
    swfu.startUpload();
} 
```

知道我做错了什么吗？我也尝试过像这样包装值`'"'`，最后我也尝试过分号。我正在使用[swfupload 的 Yelp 版本，](https://github.com/Yelp/SWFUpload)因为它似乎是最新的。

# ios - iPad中的方向问题？

> ID：14934076
> 
> 赞同：1
> 
> 时间：2013-02-18T10:26:30.630
> 
> 标签：ios, ipad, uitabbarcontroller, orientation

我在 iPad 应用程序中工作，使用 UITabBarController 创建这个应用程序，比如四个标签栏是 A、B、C 和 D。所有标签栏设置横向方向，当我选择第三个标签并按下提交按钮时隐藏标签栏并导航到另一个屏幕（Pdf_reader.m）。我已经在 (Pdf_reader.m) 类中设置了所有方向及其导航纵向，然后单击返回 barbutton 去 ClassC.m 显示纵向模式，但我希望 Pdf_reader 屏幕只旋转所有方向，所有标签栏设置横向模式，如何解决这个问题？

```
ClassC.m //Hide tabbar

-(void)Submit
{

 PDFExampleViewController *open = [[PDFExampleViewController alloc]init];
 open.hidesBottomBarWhenPushed = YES;
 [self.navigationController pushViewController:open animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:02:39.643

看看[这个问题](https://stackoverflow.com/questions/14626633/orientation-issue-with-photo-browser)的答案。您需要注意几件事。

# python - 有什么优雅的方法可以在 python 中构建多级字典吗？

> ID：14934078
> 
> 赞同：5
> 
> 时间：2013-02-18T10:26:43.970
> 
> 标签：python, dictionary

我想构建一个多级字典，例如：

```
A = { 
    'a': {
        'A': {
            '1': {}, 
            '2': {}, 
        },  
        'B': {
            '1': {}, 
            '2': {}, 
        },  
    },  
    'b': {
        'A': {
            '1': {}, 
            '2': {}, 
        },  
        'B': {
            '1': {}, 
            '2': {}, 
        },  
    },  
} 
```

我的问题是它是否存在我可以通过以下方式构建上述词典的功能：

```
D = function(['a', 'b'], ['A', 'B'], ['1', '2'], {}) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T10:39:42.740

这使用复制功能来允许您指定不同的叶节点。否则所有的叶子都会指向同一个字典。

```
from copy import copy

def multidict(*args):
    if len(args) == 1:
        return copy(args[0])
    out = {}
    for x in args[0]:
        out[x] = multidict(*args[1:])
    return out

print multidict(['a', 'b'], ['A', 'B'], ['1', '2'], {}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T10:32:39.540

```
def multi(*args):
    if len(args) > 1:
        return {arg:multi(*args[1:]) for arg in args[0]}
    else:
        return args[0]

multi(['a', 'b'], ['A', 'B'], ['1', '2'], {}) 
```

返回

```
{'a': {'A': {'1': {}, '2': {}}, 'B': {'1': {}, '2': {}}},
 'b': {'A': {'1': {}, '2': {}}, 'B': {'1': {}, '2': {}}}} 
```

**编辑**：在我的解决方案中，最后一个参数`{}`将被复制到输出的每一片叶子中，作为对同一字典的引用。如果这是一个问题（用不可变对象替换它，例如浮点数、整数或字符串是另一回事），请使用`copy.copy`@matt 的想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T10:32:59.880

使用recusion很容易写

```
def multi_level_dict(*args):
    x = dict()
    if args:
        for k in args[0]:
            x[k] = multi_level_dict(*args[1:])
    return x 
```

你的情况是

```
multi_level_dict(["a", "b"], ["A", "B"], ["1", "2"]) 
```

甚至

```
multi_level_dict("ab", "AB", "12") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:32:27.663

dict理解是一种很酷的方法，但前提是你的嵌套深度是固定的：

```
{x:{y:{z:{} for z in ['1', '2']} for y in 'AB'} for x in 'ab'} 
```

# hadoop - 如何知道 HDFS 中添加了新数据？

> ID：14934079
> 
> 赞同：6
> 
> 时间：2013-02-18T10:26:46.483
> 
> 标签：hadoop, mapreduce

我正在实现一个基于发布订阅模型的通知系统，以在数据到达/加载到 HDFS 时通知数据的可用性。我没有找到在哪里寻找这个的方法。是否有任何 HDFS API 可用于执行此操作，或者我应该使用什么方法来获取写入 HDFS 的新数据的信息？我正在使用 Hadoop v2.0.2，我不想使用 HCatalog，我想实现我自己的工具来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:46:30.580

您正在寻找的是`Oozie Coordinator`.

`HDFS`是一个文件系统，所以必须在 HDFS 之上构建一些东西来检查文件的可用性。`HBase`具有触发程序的协处理器。但它仅适用于 HBase 表。因此它不能用于检测 HDFS 中的数据可用性。

[Oozie](http://oozie.apache.org/)是一个用于管理 Hadoop 作业的工作流调度系统。[Oozie 协调](https://github.com/yahoo/oozie/wiki/Oozie-Coord-Use-Cases)器作业是由时间（频率）和数据可用性触发的周期性 Oozie 工作流作业。您也可以从中执行其他程序：

> Oozie 与 Hadoop 堆栈的其余部分集成，支持开箱即用的多种 Hadoop 作业（例如 Java map-reduce、Streaming map-reduce、Pig、Hive、Sqoop 和 Distcp）以及系统特定作业（例如Java 程序和 shell 脚本）。

因此，您也可以将文件可用性触发器用于通知系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:33:45.423

如果您使用 HDFS，您可能需要查看 HBase，因为它具有您想要的功能。在 HBase 中，您可以创建一个预置（或后置）协处理器，基本上相当于 MySQL 触发器 - 每次将数据写入表时运行一些代码。

如果 HBase 不适合您的用例并且您必须使用 HDFS，AFAIK 没有类似的触发器。您可以尝试使用自己的代码包装 HDFS API，以便在适当情况下将数据写入文件系统时执行通知。或者，您可以轮询 HDFS 的更改（这听起来像是一个丑陋的选择）......

希望有帮助

# antlr4 - ANTLR4：匹配所有输入选项exaclty一次

> ID：14934081
> 
> 赞同：17
> 
> 时间：2013-02-18T10:26:48.857
> 
> 标签：antlr4

在 ANTLR 中，如何制定规则以任何顺序仅匹配其所有备选方案一次？

IE

```
rule: ('example\r\n' | 'example2\r\n') nextRule 
```

我希望 'example' 和 'example2' 在进入下一条规则之前只匹配一次。

应匹配以下输入：

```
example
example2 
```

或者

```
example2
example 
```

但不是以下输入：

```
example
example
example2 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-18T22:02:39.507

> 在 ANTLR 中，如何制定规则以任何顺序仅匹配其所有备选方案一次？

“它的所有替代品只有一次”很简单`rule: altA altB altC ...`。那是容易的部分。要求`rule`接受*任何*`altA`安排中的所有替代方案, `altB`,`altC`等意味着适应*每种*安排。这很容易手动处理小数字 ( )。但是我知道没有自动为您处理所有排列的自动捷径。**`rule: (altA altB | altB altA);`**

 **如果没有内置方法并假设您不能放松您的要求，这里有一些方法。警告：我不知道您的问题的全部范围；我不知道你的语法；我不知道你为什么想要你所要求的；我不知道您喜欢哪种类型的解决方案，除了您可能比这些选项中的任何一个都更容易。

* * *

首先，您可以硬着头皮自己生成匹配项的所有排列，无论是手动还是运行排列生成器。然后 ANTLR 会以它理解的方式拥有你想要的东西。它粗糙但高效：它是直接的 ANTLR 语法，因此不涉及外部代码，如下面的选项中所示。

例如，假设您有一个`field`处理输入的规则，如`"public static final x"`，所有三个修饰符都是预期的，但没有特定的顺序。排列看起来像这样：

```
field : modifiers ID EOF;

modifiers
    : PUBLIC STATIC FINAL //ABC
    | PUBLIC FINAL STATIC //ACB
    | STATIC PUBLIC FINAL //BAC
    | STATIC FINAL PUBLIC //BCA
    | FINAL PUBLIC STATIC //CAB
    | FINAL STATIC PUBLIC //CBA
    ; 
```

这就是它的结束。没有外部代码，没有谓词，什么都没有。

* * *

其次，您可以在语法中使用语义谓词来确保提供所有匹配项并且匹配项不重复。有多种方法可以编写谓词本身，但归结为跟踪已进行的匹配（以防止重复），然后测试规则是否匹配了它期望的所有部分。这是一个基本示例，遵循与上一个相同的要求：

```
field 
    locals [java.util.HashSet<String> names = new java.util.HashSet<String>();]
    : modifiers ID EOF;

modifiers
    //Ensure that the full number of modifiers have been provided
    : {$field::names.size() < 3}? modifier modifiers
    | {$field::names.size() == 3}? //match nothing once we have (any) three modifiers
    ;

modifier
    //Ensure that no duplicates have been provided
    : {!$field::names.contains("public")}? PUBLIC {$field::names.add("public");}
    | {!$field::names.contains("static")}? STATIC {$field::names.add("static");}
    | {!$field::names.contains("final")}? FINAL {$field::names.add("final");}
    ; 
```

这里的规则`field`跟踪局部变量中的修饰符名称`names`。规则`modifiers`调用规则`modifier`直到`names`包含三个值。规则`modifier`匹配任何在 中没有对应键的名称`names`。请注意，这些值是手动添加到`names`. 它们可以是任意值，只要`modifier`'s 的替代项将相同的值添加到它匹配的令牌的两侧。

我的实现有点粗糙，因为修饰符最终嵌套在生成的解析树中（因为`modifiers`包含一个`modifier`和一个`modifiers`，其中包含一个`modifier`和一个`modifiers`......），但我希望你明白这一点。

* * *

第三，您可以不理会可怜的解析器并测试调用代码的完整性。这可以在解析期间使用解析器侦听器完成，也可以在解析后使用解析器`ParserRuleContext`生成的对象完成。这将问题分为两部分：让解析器解决“任何 X、Y、Z 以任何顺序”，让调用代码解决“所有且只有 X、Y、Z”。

这是一个使用侦听器方法的示例：

```
//partial grammar

field : modifier* ID EOF; //accept any modifiers in any order

modifier  
    : PUBLIC
    | STATIC
    | FINAL
    ; 
```

```
//snippet of calling code
//initialize lexer and parser

parser.addParseListener(new MyGrammarBaseListener() {
    @Override
    public void exitField(FieldContext ctx) {
        // The field rule has finished. Let's verify that no modifiers
        // were duplicated.

        //TODO check for duplicates, ensure all modifiers are specified.
        //TODO log errors accordingly.

    }
});

//Call the parser.
parser.field(); 
```

语法保持干净。修饰符可以任意出现在输入之前`ID`，任意数量和任意顺序。调用代码通过它选择的任何方式执行测试，记录它想要的任何错误。

* * *

这是一个将我提到的三个选项结合在一起的超级示例，以便更清楚地了解我在说什么。

### 修饰符.g

```
grammar Modifiers;

//Hard-coded version : all the permutations are specified //
permutationField : permutationModifiers ID EOF;

permutationModifiers
    : PUBLIC STATIC FINAL //ABC
    | PUBLIC FINAL STATIC //ACB
    | STATIC PUBLIC FINAL //BAC
    | STATIC FINAL PUBLIC //BCA
    | FINAL PUBLIC STATIC //CAB
    | FINAL STATIC PUBLIC //CBA
    ;

// Predicate version : use semantic predicates to prevent duplicates and ensure all the modifiers are provided //

predicateField 
    locals [java.util.HashSet<String> names = new java.util.HashSet<String>();]
    : predicateModifiers ID EOF;

predicateModifiers
    //Ensure that the full number of modifiers have been provided
    : {$predicateField::names.size() < 3}? predicateModifier predicateModifiers
    | {$predicateField::names.size() == 3}? //match nothing once we have (any) three modifiers
    ;

predicateModifier
    //Ensure that no duplicates have been provided
    : {!$predicateField::names.contains("public")}? PUBLIC {$predicateField::names.add("public");}
    | {!$predicateField::names.contains("static")}? STATIC {$predicateField::names.add("static");}
    | {!$predicateField::names.contains("final")}? FINAL {$predicateField::names.add("final");}
    ;

//Listener version : test everything when the parser calls the listener //

listenerField : listenerModifier* ID EOF;

listenerModifier  
    : PUBLIC
    | STATIC
    | FINAL
    ;

PUBLIC : 'public';
STATIC : 'static';
FINAL  : 'final';
FOO    : 'foo';
ID     : [a-zA-Z]+;
WS     : [ \r\n\t]+ -> skip; 
```

### 修饰符Test.java

```
import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;

import org.antlr.v4.runtime.ANTLRInputStream;
import org.antlr.v4.runtime.BaseErrorListener;
import org.antlr.v4.runtime.CommonTokenStream;
import org.antlr.v4.runtime.RecognitionException;
import org.antlr.v4.runtime.Recognizer;
import org.antlr.v4.runtime.misc.Nullable;

public class ModifiersTest {

    public static void main(String[] args) {

        run("public static final x", "ok");
        run("final static public x", "ok");
        run("static public static final x", "too many modifiers");
        run("static x", "missing modifiers");
        run("final final x", "missing & duplicated modifiers");
    }

    private static void run(String code, String title) {
        System.out.printf("%n---%n**Input : %s**%n%n\t%s%n%n", title, code);

        System.out.println("**Permutation Output**\n");
        runPermutationTest(code);
        System.out.println();

        System.out.println("**Predicate Output**\n");
        runPredicateTest(code);
        System.out.println();

        System.out.println("**Listener Output**\n");
        runListenerTest(code);
        System.out.println();

    }
    private static void runPermutationTest(String code) {
        ModifiersParser parser = createParser(code);

        parser.permutationField();
        System.out.println("\t(done)");
    }

    private static void runPredicateTest(String code) {
        ModifiersParser parser = createParser(code);

        parser.predicateField();
        System.out.println("\t(done)");
    }

    private static void runListenerTest(String code) {
        ModifiersParser parser = createParser(code);

        parser.addParseListener(new ModifiersBaseListener() {
            @Override
            public void exitListenerField(ModifiersParser.ListenerFieldContext ctx) {
                // The field rule has finished. Let's verify that no modifiers
                // were duplicated.

                HashSet<String> uniqueNames = new HashSet<String>();
                ArrayList<String> allNames = new ArrayList<String>();
                HashSet<String> expectedNames = new HashSet<String>();
                expectedNames.add("public");
                expectedNames.add("static");
                expectedNames.add("final");

                if (ctx.listenerModifier() != null && !ctx.listenerModifier().isEmpty()) {
                    List<ModifiersParser.ListenerModifierContext> modifiers = ctx.listenerModifier();

                    // Collect all the modifier names in a set.
                    for (ModifiersParser.ListenerModifierContext modifier : modifiers) {
                        uniqueNames.add(modifier.getText());
                        allNames.add(modifier.getText());
                    }
                }

                // Is the number of unique modifiers less than the number of
                // all given modifiers? If so, then there must be duplicates.
                if (uniqueNames.size() < allNames.size()) {
                    ArrayList<String> names = new ArrayList<String>(allNames);
                    for (String name : uniqueNames){
                        names.remove(name);
                    }
                    System.out.println("\tDetected duplicate modifiers : " + names);
                } else {
                    System.out.println("\t(No duplicate modifiers detected)");
                }

                //Are we missing any expected modifiers?
                if (!uniqueNames.containsAll(expectedNames)) {
                    ArrayList<String> names = new ArrayList<String>(expectedNames);
                    names.removeAll(uniqueNames);
                    System.out.println("\tDetected missing modifiers : " + names);
                } else {
                    System.out.println("\t(No missing modifiers detected)");
                }
            }
        });

        parser.listenerField();

        System.out.println("\t(done)");

    }

    private static ModifiersParser createParser(String code) {
        ANTLRInputStream input = new ANTLRInputStream(code);

        ModifiersLexer lexer = new ModifiersLexer(input);

        ModifiersParser parser = new ModifiersParser(new CommonTokenStream(lexer));

        BaseErrorListener errorListener = createErrorListener();

        lexer.addErrorListener(errorListener);
        parser.addErrorListener(errorListener);
        return parser;
    }

    private static BaseErrorListener createErrorListener() {
        BaseErrorListener errorListener = new BaseErrorListener() {

            @Override
            public void syntaxError(Recognizer<?, ?> recognizer, @Nullable Object offendingSymbol, int line,
                    int charPositionInLine, String msg, @Nullable RecognitionException e) {
                //Print the syntax error 
                System.out.printf("\t%s at (%d, %d)%n", msg, line, charPositionInLine);
            }
        };
        return errorListener;
    }
} 
```

### 测试场景（上面代码的输出）

* * *

**输入：好的**

```
public static final x 
```

**置换输出**

```
(done) 
```

**谓词输出**

```
(done) 
```

**监听器输出**

```
(No duplicate modifiers detected)
(No missing modifiers detected)
(done) 
```

* * *

**输入：好的**

```
final static public x 
```

**置换输出**

```
(done) 
```

**谓词输出**

```
(done) 
```

**监听器输出**

```
(No duplicate modifiers detected)
(No missing modifiers detected)
(done) 
```

* * *

**输入：太多修饰符**

```
static public static final x 
```

**置换输出**

```
extraneous input 'static' expecting 'final' at (1, 14)
(done) 
```

**谓词输出**

```
no viable alternative at input 'static' at (1, 14)
(done) 
```

**监听器输出**

```
Detected duplicate modifiers : [static]
(No missing modifiers detected)
(done) 
```

* * *

**输入：缺少修饰符**

```
static x 
```

**置换输出**

```
no viable alternative at input 'staticx' at (1, 7)
(done) 
```

**谓词输出**

```
no viable alternative at input 'x' at (1, 7)
(done) 
```

**监听器输出**

```
(No duplicate modifiers detected)
Detected missing modifiers : [final, public]
(done) 
```

* * *

**输入：缺少和重复的修饰符**

```
final final x 
```

**置换输出**

```
no viable alternative at input 'finalfinal' at (1, 6)
(done) 
```

**谓词输出**

```
no viable alternative at input 'final' at (1, 6)
(done) 
```

**监听器输出**

```
Detected duplicate modifiers : [final]
Detected missing modifiers : [static, public]
(done) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-18T22:36:16.963

使用 ANTLR 4，我实际上更喜欢使用类似以下内容的内容，其中输入应包含 、 和 中的每个正好`a`1`b`个`c`。

```
items : (a | b | c)*; 
```

然后在监听器中，我会使用如下代码：

```
@Override
public void enterItems(ItemsContext ctx) {
    if (ctx.a().size() != 1) {
        // report error
    } else if (ctx.b().size() != 1) {
        // report error
    } else ...
} 
```**

# python-3.x - IPython Notebook 是否有“初始化单元”？

> ID：14934084
> 
> 赞同：8
> 
> 时间：2013-02-18T10:26:58.933
> 
> 标签：python-3.x, wolfram-mathematica, ipython, ipython-notebook

当我打开一个保存的 IPython Notebook 时，我需要使用导入、函数定义等评估所有单元格以继续处理会话。单击此操作很方便`Cell > Run All`。但是如果我不想重新评估所有计算怎么办？我每次都需要手动挑选细胞进行评估吗？

对于这个问题，Mathematica 有“初始化单元”的概念。您可以将笔记本中的一些单元格标记为初始化单元格，然后在打开笔记本后执行“评估初始化单元格”。

IPython Notebook 有类似的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:54:35.603

首先，当您打开 IPython 笔记本时，这并不意味着内核状态丢失，除非您重新启动服务器或显式停止内核。

否则，没有**标记**的单元格，但在开发版本上有一个“运行到这里”。

此外，如果您使用的是开发版本，使用 Cell Toolbar /metadata 我会说 ~30 行 javascript 它应该是可行的。

我建议您在主要问题跟踪器上打开一个增强请求。这通常可以在 sprint 和/或博客文章期间作为扩展来解释笔记本的内部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-27T13:09:08.960

如果您使用的是最新最好的笔记本（我的是 > 4.1），您请求的功能可通过扩展获得。

扩展，以及可以方便地用于启用/禁用每个单独的扩展的界面，可以安装如下

```
$ git clone https://github.com/ipython-contrib/IPython-notebook-extensions.git
$ cd IPython-notebook-extensions
$ ./setup.py 
```

安装扩展后，启动笔记本服务器

```
$ cd ; jupyter-notebook < /dev/null > .jupiter.log 2>&1 & 
```

并进入扩展管理页面

```
$ xdg-open http://localhost:8888/nbextensions 
```

在最近打开的浏览器窗口中，启用“初始化单元”扩展。

如果您现在打开自己的笔记本，您将在工具栏中看到一个新图标，类似于手持计算器，并在`View/Cell Toolbar`新条目中看到`Initialisation Cell`.

启用此菜单条目并单击要标记为初始化单元格的单元格的工具栏（可能删除单元格的工具栏），然后单击前面描述的图标...

当你加载一个笔记本时，初始化单元会自动运行，所以如果你愿意，你可以把它们放在一个方便的地方，如果你像我一样说笔记本的结尾......

# mysql - mysql查询中的逗号分隔字符串比较

> ID：14934086
> 
> 赞同：1
> 
> 时间：2013-02-18T10:27:11.847
> 
> 标签：mysql

我想从下表中搜索国家/地区：

```
+-----+-------------+
| id  | country     
+-----+-------------+
| 1   | US          
+-----+-------------+
| 2   | US,IN,UK
| 3   | US,NZ
| 4   | AUS 
```

我如何执行 sql 查询以获取包含 country = 'US' 以及其他逗号分隔国家的所有记录？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:29:11.807

您可以使用 FIND_IN_SET 函数，例如 -

```
SELECT * FROM table
WHERE FIND_IN_SET('US', country) ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T09:41:47.043

您可以使用 FIND_IN_SET 函数，例如 -

```
 SELECT * FROM table WHERE FIND_IN_SET('US', country) ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:29:38.057

```
SELECT id, country
FROM yourtable
WHERE FIND_IN_SET('US', country) 
```

或者

```
SELECT id, country
FROM yourtable
WHERE CONCAT(',', country, ',') LIKE '%,US,%' 
```

请[在此处](http://sqlfiddle.com/#!2/67a26/1)查看小提琴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T10:29:42.147

```
SELECT  *
FROM    tableName
WHERE   FIND_IN_SET('US', country) > 0 
```

*   [FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T10:29:58.540

您可以为此使用`LIKE`或。`RLIKE`

```
SELECT * FROM table_name WHERE country RLIKE '(.+?,)*?US(,.+?)*' 
```

或者

```
SELECT * FROM table_name WHERE country LIKE '%US%' 
```

第一个查询避免检索以美国为子字符串的国家/地区的查询`RUS`

```
SELECT * FROM table_name WHERE country RLIKE '(.+,)(.+,)*?US(,.+)*|(.+,)*?US(,.+)(,.+)*' 
```

仅选择与 US 一起至少有另一个条目的那些。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-18T10:30:28.413

试试下面的代码。

```
SELECT ID,COUNTRY FROM TABLE_NAME
WHERE COUNTRY LIKE '%US%; 
```

# javascript - 使用 JavaScript 转换 ISO 8601 持续时间

> ID：14934089
> 
> 赞同：24
> 
> 时间：2013-02-18T10:27:30.617
> 
> 标签：javascript, iso8601

如何使用 JavaScript 转换持续时间，例如：

PT16H30M

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2015-03-19T19:10:50.260

理论上，您可以获得如下所示的 ISO8601 持续时间：

> P1Y4M3W2DT10H31M3.452S

我编写了以下正则表达式将其解析为组：

```
(-)?P(?:([.,\d]+)Y)?(?:([.,\d]+)M)?(?:([.,\d]+)W)?(?:([.,\d]+)D)?T(?:([.,\d]+)H)?(?:([.,\d]+)M)?(?:([.,\d]+)S)? 
```

它不漂亮，更精通正则表达式的人可能能够写出更好的。

这些组归结为以下几点：

1.  符号
2.  年
3.  几个月
4.  周
5.  天
6.  小时
7.  分钟
8.  秒

我编写了以下函数将其转换为一个不错的对象：

```
var iso8601DurationRegex = /(-)?P(?:([.,\d]+)Y)?(?:([.,\d]+)M)?(?:([.,\d]+)W)?(?:([.,\d]+)D)?T(?:([.,\d]+)H)?(?:([.,\d]+)M)?(?:([.,\d]+)S)?/;

window.parseISO8601Duration = function (iso8601Duration) {
    var matches = iso8601Duration.match(iso8601DurationRegex);

    return {
        sign: matches[1] === undefined ? '+' : '-',
        years: matches[2] === undefined ? 0 : matches[2],
        months: matches[3] === undefined ? 0 : matches[3],
        weeks: matches[4] === undefined ? 0 : matches[4],
        days: matches[5] === undefined ? 0 : matches[5],
        hours: matches[6] === undefined ? 0 : matches[6],
        minutes: matches[7] === undefined ? 0 : matches[7],
        seconds: matches[8] === undefined ? 0 : matches[8]
    };
}; 
```

像这样使用：

```
window.parseISO8601Duration('P1Y4M3W2DT10H31M3.452S'); 
```

希望这可以帮助那里的人。

* * *

### 更新

如果您使用[momentjs](http://momentjs.com/docs/#/durations/)，它们具有可用的 ISO8601 持续时间解析功能。您需要一个[插件来格式化](https://github.com/jsmreese/moment-duration-format)它，并且它似乎无法处理在撰写本说明时指定的周数的持续时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T10:47:13.043

```
"PT16H30M".replace(/PT(\d+)H(\d+)M/, "$1:$2"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-10-15T13:25:55.530

包裹了一个小包以促进这一点：

```
import { parse, serialize } from 'tinyduration';

// Basic parsing
const durationObj = parse('P1Y2M3DT4H5M6S');
assert(durationObj, {
    years: 1,
    months: 2,
    days: 3,
    hours: 4,
    minutes: 5,
    seconds: 6
});

// Serialization
assert(serialize(durationObj), 'P1Y2M3DT4H5M6S'); 
```

使用`npm install --save tinyduration`或安装`yarn add tinyduration`

见：[https ://www.npmjs.com/package/tinyduration](https://www.npmjs.com/package/tinyduration)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-06-28T18:06:31.277

Moment.js 与 2.3 版本一起发布了持续时间支持。

```
const iso8601Duration = "PT16H30M"

moment.duration(iso8601Duration)
// -> { _data: { days: 0, hours: 16, milliseconds: 0, minutes: 30, months: 0, seconds: 0, years: 0} ... 

moment.duration(iso8601Duration).asSeconds()
// -> 59400 
```

阅读更多[https://momentjs.com/docs/#/durations/](https://momentjs.com/docs/#/durations/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-18T16:16:26.833

我刚刚这样做了甚至超过一年的时间。
这是一个[小提琴](http://jsfiddle.net/zu8kL/1/)。

```
function convertDuration(t){ 
    //dividing period from time
    var x = t.split('T'),
        duration = '',
        time = {},
        period = {},
        //just shortcuts
        s = 'string',
        v = 'variables',
        l = 'letters',
        // store the information about ISO8601 duration format and the divided strings
        d = {
            period: {
                string: x[0].substring(1,x[0].length),
                len: 4,
                // years, months, weeks, days
                letters: ['Y', 'M', 'W', 'D'],
                variables: {}
            },
            time: {
                string: x[1],
                len: 3,
                // hours, minutes, seconds
                letters: ['H', 'M', 'S'],
                variables: {}
            }
        };
    //in case the duration is a multiple of one day
    if (!d.time.string) {
        d.time.string = '';
    }

    for (var i in d) {
        var len = d[i].len;
        for (var j = 0; j < len; j++) {
            d[i][s] = d[i][s].split(d[i][l][j]);
            if (d[i][s].length>1) {
                d[i][v][d[i][l][j]] = parseInt(d[i][s][0], 10);
                d[i][s] = d[i][s][1];
            } else {
                d[i][v][d[i][l][j]] = 0;
                d[i][s] = d[i][s][0];
            }
        }
    } 
    period = d.period.variables;
    time = d.time.variables;
    time.H +=   24 * period.D + 
                            24 * 7 * period.W +
                            24 * 7 * 4 * period.M + 
                            24 * 7 * 4 * 12 * period.Y;

    if (time.H) {
        duration = time.H + ':';
        if (time.M < 10) {
            time.M = '0' + time.M;
        }
    }

    if (time.S < 10) {
        time.S = '0' + time.S;
    }

    duration += time.M + ':' + time.S;
    alert(duration);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-08T22:58:58.013

专门解决可在 HTML5标签中使用的[DateTime 字符串](https://www.w3.org/TR/2014/REC-html5-20141028/infrastructure.html#valid-duration-string)`<time/>`，因为它们仅限于天、分和秒（因为只有这些可以转换为精确的秒数，因为月和年可以有不同的持续时间）

```
function parseDurationString( durationString ){
    var stringPattern = /^PT(?:(\d+)D)?(?:(\d+)H)?(?:(\d+)M)?(?:(\d+(?:\.\d{1,3})?)S)?$/;
    var stringParts = stringPattern.exec( durationString );
    return (
             (
               (
                 ( stringParts[1] === undefined ? 0 : stringParts[1]*1 )  /* Days */
                 * 24 + ( stringParts[2] === undefined ? 0 : stringParts[2]*1 ) /* Hours */
               )
               * 60 + ( stringParts[3] === undefined ? 0 : stringParts[3]*1 ) /* Minutes */
             )
             * 60 + ( stringParts[4] === undefined ? 0 : stringParts[4]*1 ) /* Seconds */
           );
} 
```

测试数据

```
"PT1D"         returns  86400
"PT3H"         returns  10800
"PT15M"        returns    900
"PT1D12H30M"   returns 131400
"PT1D3M15.23S" returns  86595.23 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-18T12:53:31.640

ISO8601期支持的基本解决方案。

由于 JavaScript 中缺少“持续时间”类型和奇怪的日期语义，它使用日期算法将“周期”应用于“锚”日期（默认为当前日期和时间）。默认是添加期间。

指定 ago: true 以提供过去的日期。

```
 // Adds ISO8601 period: P<dateparts>(T<timeparts>)?
    // E.g. period 1 year 3 months 2 days:  P1Y3M2D
    // E.g. period 1H:                      PT1H
    // E.g. period 2 days 12 hours:         P2DT12H
    // @param period string: ISO8601 period string
    // @param ago bool [optiona] true: Subtract the period, false: add (Default)
    // @param anchor Date [optional] Anchor date for period, default is current date
    function addIso8601Period(period /*:string */, ago /*: bool? */, anchor /*: Date? */) {
        var re = /^P((?<y>\d+)Y)?((?<m>\d+)M)?((?<d>\d+)D)?(T((?<th>\d+)H)?((?<tm>\d+)M)?((?<ts>\d+(.\d+)?)S)?)?$/;
        var match = re.exec(period);
        var direction = ago || false ? -1 : 1;
        anchor = new Date(anchor || new Date());
        anchor.setFullYear(anchor.getFullYear() + (match.groups['y'] || 0) * direction);
        anchor.setMonth(anchor.getMonth() + (match.groups['m'] || 0) * direction);
        anchor.setDate(anchor.getDate() + (match.groups['d'] || 0) * direction);
        anchor.setHours(anchor.getHours() + (match.groups['th'] || 0) * direction);
        anchor.setMinutes(anchor.getMinutes() + (match.groups['tm'] || 0) * direction);
        anchor.setSeconds(anchor.getSeconds() + (match.groups['ts'] || 0) * direction);
        return anchor;
    } 
```

没有保修。这可能有怪癖 - 测试您的用例。

# php - php如何使用连字符访问对象属性？

> ID：14934092
> 
> 赞同：2
> 
> 时间：2013-02-18T10:27:38.703
> 
> 标签：php, json

json 格式。

```
{
  "message-count":"1",
  "messages":[
    {
    "status":"returnCode",
    "error-text":"error-message"
    }
  ]
} 
```

在 php 中，我成功地获得了“状态”值`$response->messages[0]->status`
但是当我想访问“错误文本”属性时，代码`$response->messages[0]->error-text`给了我错误。如何使用连字符访问对象属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T10:29:02.453

这就是方法！

```
$object->{"message-count"};
$response->messages[0]->{'error-text'}; 
```

希望这可以帮助

* * *

任何字符串（字节序列）都可以用作类字段

```
$object->{"123"} = 10; // numbers
$object->{"{a}"} = 10; // special characters
$object->{"òòèè"} = 10; // non ascii characters 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T10:30:30.867

使用`{}`语法：

```
echo $response->messages[0]->{'error-text'}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:33:23.367

请使用标准 PHP 功能 - 访问花括号中的变量：

```
class t {}
$a = new t();
$a->{"o-o"} = 1;
echo $a->{"o-o"}; 
```

因此，您需要编写 $response->messages[0]->{"error-text"}。

# java - 两个线程不能同时作用于同一个对象吗

> ID：14934095
> 
> 赞同：-4
> 
> 时间：2013-02-18T10:27:50.540
> 
> 标签：java, concurrency

我想知道。

两个线程不能同时作用于同一个对象吗？

还

java中的每个线程是否都在自己的JVM中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:31:18.493

默认情况下，没有什么可以阻止两个线程在同一个对象上工作。同步是您可以在代码中指定应该控制来自不同线程的访问的机制 - [http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)

每个线程都在同一个 JVM 中运行（假设您没有在一些花哨的集群环境中运行。如果您不知道这意味着什么，那么您就不是 :-)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:30:06.237

阅读线程的 java 文档。

如果只对对象进行读取操作，那么您可能会称之为“同时对同一对象执行操作”。

# windows-phone-8 - windows phone 8 当前的 db 中用于蜂窝和 wifi 的网络强度

> ID：14934096
> 
> 赞同：0
> 
> 时间：2013-02-18T10:27:53.520
> 
> 标签：windows-phone-8, windows-phone

是否可以获得 Windows Phone 8 设备的蜂窝和 wifi 网络强度（以 dBm 为单位）？

我到处搜索，但找不到与我的问题相关的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:04:17.023

AFAIK，目前的 API 无法做到这一点。

问候。

# forms - 文本框/表单已保存并重新加载

> ID：14934097
> 
> 赞同：0
> 
> 时间：2013-02-18T10:27:54.797
> 
> 标签：forms, text, save, edit

我对文本框或表单有疑问。我对他们没有任何经验。

我想要一个文本框/表单，用户也可以在其中输入/复制文本。

应该有一个保存按钮，保存的文本应该被加载并且可以再次编辑。

这不是一个互联网应用程序，所以我不需要指定用户数据库。

在网上搜索给了我很多部分 asp/.net/php 解决方案。我对这些真的了解不多。

我的问题是，这可能吗？我应该从哪里开始？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:39:20.683

我会为此使用 PHP，如果您不熟悉[W3 Schools PHP tutuorial](http://w3schools.com/php/)以及[PHP.net](http://php.net)上的文档有一些很棒的学习资源，您需要编写一个提交给 php 脚本的 HTML 表单。在此脚本中，您可以使用 fwrite() 函数将文本保存到文件中，并使用 fopen() 加载保存的文本。如果您是新手，请务必查看 w3 Schools php 指南。

# perl - Moose 和 Roles 方法修改器

> ID：14934101
> 
> 赞同：0
> 
> 时间：2013-02-18T10:28:04.380
> 
> 标签：perl, oop, moose, method-modifier

是否可以在 Role 中使用 after 修饰符来获取通过构建器方法填充到消费类中的必需属性？

```
package A::Role;
use Moose::Role;
use IO::File;
use Carp;

requires 'properties_file';

after 'properties_file' => sub {
     my $self = shift;

     $self->_check_prop_file();
     $self->_read_file();
}; 
```

消费类：

```
 package A::B::C;
    use Moose;
    use Carp;
    use Moose;
    use Carp;
    use HA::Connection::SSH;
    use constant {
     ...
    };

    has 'properties_file' => ( is  => 'ro',
                               isa => 'Str',
                               builder => '_build_current_data');

    with 'A::Role';
    sub _build_current_data { ... } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:03:57.260

回答你的问题：是的，你可以。您已经完成了关键部分，即在声明属性后使用角色以便生成访问器方法。

因此，您提供的代码将按照您期望的顺序执行：-

```
my $c = A::B::C->new;
# 'properties_file' is built by _build_current_data()

my $filename = $c->properties_file;
# _check_prop_file() and _read_file() are executed (but before $filename is assigned) 
```

但是，通过*获取* `properties_file`. 如果您只是希望在构建后自动检查和读取属性文件，则角色可以提供一种`BUILD`方法来使用到类中。（`BUILD`在构造后执行，因此`properties_file`已经初始化。）

```
sub BUILD {
    my $self = shift;
    $self->_check_prop_file();
    $self->_read_file();
    return;
} 
```

# java - 递归检查字符串是否平衡

> ID：14934103
> 
> 赞同：1
> 
> 时间：2013-02-18T10:28:12.253
> 
> 标签：java, string, recursion

我想检查一个字符串是否有匹配的大括号、方括号或括号。

```
For example:
{}
()
[] 
```

我可以用堆栈做到这一点。我想用递归来做。我正在阅读类似问题的答案，答案是递归与堆栈混合。一位用户回复了这些答案，说递归也是一个堆栈，因此您的递归方法不应该在参数中包含堆栈——这对我来说很有意义。

不过我有一个大问题，我正在向后查看字符串，并且总是删除我检查的最后一个位置，直到字符串为空，所以我返回 true。如果我的方法中没有额外的参数来保存我要查找的内容，我无法想象如何检查特定部分、大括号、方括号或括号。然而，我一直认为必须有一种更简单的方法来做到这一点。

```
public boolean isBalanced(String in)
{
    if(in.isEmpty())
        return true;

    if(in.charAt(in.length()) == '}')
    {
        return recIsBalanced(in.substring(0, in.length()));
    }

    else if(in.charAt(in.length()) == ']')
    {

    }

    return recIsBalanced(in.substring(0, in.length()));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:32:14.687

使用递归解决此问题的最简单方法是从两个方向收缩字符串。您从左到右迭代，直到看到 . 如果这些不匹配，则字符串不平衡，否则对括在这些大括号之间的字符串应用相同的算法。仅从一端开始会更加棘手，您将不得不存储一些状态。

编辑：感谢 DanielFischer。实际上从一侧迭代，例如左直到找到一个大括号（如果这个大括号没有打开一个 return `false`）。比从另一边迭代（在这种情况下是正确的）直到找到匹配的大括号。现在，当且仅当包含在此大括号内的子字符串是平衡的**并且**右括号右侧的字符串都使用递归平衡时，字符串才会平衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T19:05:06.863

```
 public static boolean isBalanced(String str) {

    if (str.length() == 0) {
        return true;
    }
    if (str.contains("()")) {
        return isBalanced(str.replaceFirst("\\(\\)", ""));
    }

    if (str.contains("[]")) {
        return isBalanced(str.replaceFirst("\\[\\]", ""));
    }

    if (str.contains("{}")) {
        return isBalanced(str.replaceFirst("\\{\\}", ""));
    } else {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-08T01:04:29.077

这是一个解决方案，不替换任何东西，直接递归：

```
/**
 * @param args
 */
public  boolean balance(String s, int start, int end)
{
   System.out.println("start:"+start + " end" + end);
   if (start == s.length()) return end == 0;
   if (end<0) return false;
   //if (end == s.length()-1) return start == 0;
   if (s.charAt(start) == '(')
     return balance(s, start+1, end+1);
   if (s.charAt(start) == ')')
     return balance(s, start+1, end-1);
   return balance(s, start+1, end );

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:04:18.113

可以通过解析输入字符串来完成。这种情况的语法是：

```
P -> (P)
P -> [P]
P -> {P}
P -> e  (Null) 
```

跟踪在字符串中解析的内容更容易，并且递归堆栈包含要关闭的括号。这是简单的python实现。

```
ps = { '{': '}', '(': ')', '[': ']'}
all_ps = set(['{', '}', '(', ')', '[', ']'])
read_position = 0

def _is_balanced( s, closing_par=None ):
  global read_position
  while read_position < len(s):
    if s[read_position] == closing_par:
      read_position += 1         # Read closing parenthesis
      return True
    elif s[read_position] in ps:
      read_position += 1         # Read opening parenthesis
      if not _is_balanced( s, ps[s[read_position-1]] ):
        return False
    else:
      if s[read_position] not in all_ps:
        read_position += 1       # Read non-parenthesis char
      else:
        return False            # It is closing parenthesis, witouh opening before
  return closing_par is None    # Are we looking for a closing parenthesis?

def is_balanced( s ):
  global read_position
  read_position = 0  # Reset parsing position
  return _is_balanced( s ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-05T14:37:37.533

```
boolean isBalanced(String str)
{
    if (str.isEmpty()) {
        return true;
    }
    else if (str.charAt(0) == '(') {
        return str.charAt(str.length() - 1) == ')'
            && isBalanced(str.substring(1, str.length()));
    }
    else if (str.charAt(0) == '[') {
        return str.charAt(str.length() -  1) == ']'
            && isBalanced(str.substring(1, str.length()));
    }
    else if (str.charAt(0) == '{') {
        return str.charAt(str.length() - 1) == '}'
            && isBalanced(str.substring(1, str.length()));
    }
    else {
        return true;
    }

} 
```

# javascript - JQuery 根据选择的选择选项填充表单

> ID：14934104
> 
> 赞同：0
> 
> 时间：2013-02-18T10:28:12.977
> 
> 标签：javascript, jquery

我正在尝试根据用户选择的选项添加一些表单内容。

例如，如果用户选择表单 1 选项，则表单将填充不同的内容，如果用户选择选项 2

```
<select>
<option>Form 1</option>
<option>Form 2</option>
</select>

<form>
Here we get either form 1 content or form 2 content depending on the select option selected by user.
</form>

//Form 1 content
<input type="text" value="something" />
<input type hidden="something here" />

//Form 2 content
<input type="text" value="something else here" />
<input type hidden="something else here" /> 
```

我怎样才能使用 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:43:22.883

## 试试这个：http: [//jsfiddle.net/QUbEE/1/](http://jsfiddle.net/QUbEE/1/)

```
$('select').change(function () {
  if ($('option:selected', this).val() == 1) {
      //$('form').hide();
      $('#form-1').html($('<input />').attr({
        'id': 'textBox1',
            'value': 'Something is here'
    }));
  } else {
      $('#form-1').html($('<input />').attr({
        'id': 'textBox2',
            'value': 'Something ELSE is here'
      }));
  }
}); 
```

`Create elems depends on the change event`然后只是`replace the html of the form with the new input with new values`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:41:09.013

正如您在评论中提到的内容可以被硬编码，那么您可以编写表单并将表单放置在不同的 div 中，并根据从下拉列表中所做的选择切换 div 的可见性

例如，假设您的表单 1 在 div1

```
<div id="div1" class="formDiv">
  <input type="text" id="form1" value="something" />
  <input type hidden="something here" />
</div> 
```

而你的 form2 在 div2

```
<div id="div2" class="formDiv">
  <input type="text" id="form2" value="something" />
  <input type hidden="something here" />
</div> 
```

在你的 CSS 中隐藏两个 div（使用类——例如）

```
.formDiv {
  display: none;
} 
```

说你的下拉菜单看起来像这样

```
<select id="selectForm">
<option value="div1">Form 1</option>
<option value="div2">Form 2</option>
</select> 
```

现在，当用户从下拉列表中选择时，更改 div 的可见性

```
$('#selectForm').on('change',function(){
   $('.formDiv').hide();
   var formID = $('#selectForm').val();  
   $(formID).css('display', 'block');
}); 
```

这只是一个示例，您可以根据可行性和效率提供自己的 ID 和 CLASS。
希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:45:49.470

我建议你用两个分开的表格来保存它。并让它们可见！因此，使用 javascript，您可以隐藏两种形式并显示相关的形式。这样，如果浏览器不支持 javascript，表单仍然可以使用：

```
 <select id="toggle-forms">
    <option value="1">Form 1</option>
    <option value="2">Form 2</option>
  </select>
  <form id="form-1" class="form-to-toggle" acvtion="" method="">
    <input type="text" value="something" />
    <input type hidden="something here" />
    <input type="submit" value="submit form 1"/>
  </form>
  <form id="form-2" class="form-to-toggle" acvtion="" method="">
    <input type="text" value="something" />
    <input type hidden="something here" />
    <input type="submit" value="submit form 2"/>
  </form>
  <script>
  $('#toggle-forms').on('change', function() {
    $('.form-to-toggle').hide();
    $('#form-'+this.value).show();
  }).change();
  </script> 
```

在行动中看到它：http: [//jsbin.com/iwocid/1](http://jsbin.com/iwocid/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:33:29.913

像这样的东西？当您选择选项表格 2 时，您将在表格 2 的输入中添加测试

```
<select>
<option value="1">Form 1</option>
<option value="2">Form 2</option>
</select>

//Form 1 content
<input type="text" id="form1" value="something" />
<input type hidden="something here" />

$('select').on('change',function(){
     $('input#form'+this.value).val('testing');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T10:33:40.000

在表单中添加一个 id。然后使用`document.getElementById('idname').innerHTML`填充值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T10:44:37.543

我会建议这个（正如你所讨论的那样）

```
<select id='this'>
<option value="Form_1">Form 1</option>
<option value="Form_2">Form 2</option>
</select>
<form id='Form_1' style='display:none'>
form1 content
</form>
<form id='Form_2' style='display:none'>
 form2 content
</form> 
```

和js

```
$(document).ready(function() {  
 $('#this').change(function () {
    var form = $('#this').val();
    $('#'+form).show();
  });   
}); 
```

# javascript - 淘汰赛 + chrome 刷新子模型上的数据

> ID：14934110
> 
> 赞同：0
> 
> 时间：2013-02-18T10:28:34.063
> 
> 标签：javascript, google-chrome, knockout.js

我有几个子视图的外壳视图 - 看起来像那样并且工作正常。

```
<div id="shellView" style="display: none;">
<div id="tabView" data-bind="with: Tab(), visible: State() === 'Tab'">
    @Html.Partial("Tab")
</div>
<div id="tab2View" data-bind="with: Tab2(), visible: State() === 'Tab2'">
    @Html.Partial("Tab")
</div> 
```

问题是在切换选项卡时（仅在 chrome 上）。一个选项卡有一个与剔除绑定的图像列表 - 所有图像在控制器上都有 src 到 Action (RedirectResult)，它重定向到我们的服务器或客户端服务器并下载图像：

```
 [HttpGet]
    public RedirectResult DynUrl(int id, string size) 
```

第二个选项卡此时是空的 - 但是当我切换到它们时，谷歌浏览器会请求所有 DynUrl 再次下载图像 - 当前已下载 - 只是隐藏了。

我正在使用淘汰赛 2.1.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:53:49.670

应该像

```
<div id="shellView" style="display: none;">
<!-- ko with: Tab -->
<div id="tabView" data-bind="attr: {display: isVisible}">
    @Html.Partial("Tab")
</div>
<!-- /ko -->
<!-- ko with: Tab2 -->
<div id="tab2View" data-bind="attr: {display: isVisible}">
    @Html.Partial("Tab")
</div>
<!-- /ko --> 
```

并放一个

```
this.isVisible = ko.computed(function(){
if(self.visibleState())return 'block';
else return 'none';
}); 
```

在选项卡视图模型上

# perl - Perl Dancer 斜杠

> ID：14934111
> 
> 赞同：5
> 
> 时间：2013-02-18T10:28:36.187
> 
> 标签：perl, dancer

使用 Perl Web 应用程序框架 Dancer，我在 URL 匹配中遇到了尾随斜杠的一些问题。

例如，我想使用可选的 Id 参数匹配以下 URL：

```
get '/users/:id?' => sub
{
    #Do something
} 
```

两者`/users/morgan`兼得`/users/`。虽然`/users`不会。这似乎不是很统一。因为我更喜欢，只匹配不带斜杠的 URL:s: `/users/morgan`和`/users`. 我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T13:43:18.093

另一种方法是使用命名子 - 所有 Dancer 代码示例都倾向于使用匿名子，但没有任何内容表明它必须是匿名的。

```
get '/users' => \&show_users;
get '/users/:id' => \&show_users;

sub show_users
{
    #Do something
} 
```

请注意，由于 Dancer 进行路线匹配的方式，这取决于顺序，并且根据我的经验，我必须首先列出元素较少的路线。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T11:07:50.347

`id`将包含从`/user/`开始到可选斜杠的所有内容。

```
get qr{^/users/?(?<id>[^/]+)?$} => sub {
  my $captures = captures;
  if ( defined $captures->{id} ) {
    return sprintf 'the id is: %s', $captures->{id};
  }
  else {
    return 'global user page'
  }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-08T06:28:37.083

我知道这是一个老问题，但我最近通过使用 Plack 中间件解决了这个问题。您可以选择其中两个，具体取决于您是否喜欢带有斜杠的 URL：

*   [Plack::中间件::TrailingSlash](https://metacpan.org/pod/Plack::Middleware::TrailingSlash)
*   [Plack::中间件::TrailingSlashKiller](https://metacpan.org/pod/Plack::Middleware::TrailingSlashKiller)

使用上述任何中间件都应该大大简化您的核心 Dancer 应用程序代码和单元测试，因为您不需要处理这两种情况。

此外，正如 Dave Sherohman 所提到的，您绝对应该首先使用较少的元素来安排您的路线，以便首先匹配那些元素，特别是如果您使用 TrailingSlash 中间件来强制尾部斜杠。

# c# - 如何使用 PDFbox (C#) 从 PDF 表单中获取单选按钮值

> ID：14934119
> 
> 赞同：0
> 
> 时间：2013-02-18T10:29:05.140
> 
> 标签：c#, java, pdf, pdfbox

如何使用 PDFbox (C#) 从 PDF 表单中获取单选按钮值

在 Java 中：

```
 doc = PDDocument.load("C:\\Users\\347702\\Desktop\\sample_form.pdf");
            List pages = doc.getDocumentCatalog().getAllPages();
            PDAcroForm form = doc.getDocumentCatalog().getAcroForm();
            List FieldTypes =  form.getFields();
            PDField pdfFields;

            for (int i = 0; i <  FieldTypes.size(); i++) {

              pdfFields = (PDField) ((List) FieldTypes).get(i);
              if (pdfFields instanceof PDRadioCollection) 
                 {
                    String iAsString = Integer.toString(k);
                    System.out.println(iAsString);
                    type = "RadioButton";
                    System.out.println("Radio Button" + "   "
                            + pdfFields.getFullyQualifiedName() + "  ");

                    List kids = pdfFields.getKids();
                    for (Object kid : kids) {
                          if (kid instanceof PDCheckbox) {
                          PDCheckbox checkbox = (PDCheckbox) kid;
                          String Name = checkbox.getOnValue();
                          System.out.println(Name);
                          }
                    } 
```

上面的 java 代码已经成功运行（成功返回 Radiobuttons 的子级），但是当在 c# 中实现相同的逻辑时，它没有按预期运行

下面是我的 C# 代码：

```
 else if (pdfFields is PDRadioCollection)
                {
                    System.Console.WriteLine("Radio Button" + "   "
                            + pdfFields.getFullyQualifiedName() + "  ");

                  List kids = pdfFields.getKids();
                    System.Console.WriteLine(kids);

                   for (int w = 0; w < kids.size(); w++)
                   {
                       kids.get(w);
                       System.Console.WriteLine(kids.get(w));  ---- > Return null 

                       System.Console.WriteLine(kids.get(w).ToString()); -- > Return null
                   }  

                } 
```

有什么可以帮忙的吗谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:17:56.863

终于让它工作了：这里是 :: C#：需要用 IEnumerable 输入大小写：

```
 else if (pdfFields is PDRadioCollection)
                {
                    System.Console.WriteLine("Radio Button" + "   "
                            + pdfFields.getFullyQualifiedName() + "  ");

                    System.Collections.IEnumerable kids = (System.Collections.IEnumerable)pdfFields.getKids();
                    System.Console.WriteLine(kids);

                    foreach (object kid in kids)
                    {
                        PDCheckbox checkbox = (PDCheckbox)kid;
                         checkbox.check();
                    } 
```

# magento - 在magento中的客户注册上将产品添加到购物车

> ID：14934127
> 
> 赞同：0
> 
> 时间：2013-02-18T10:29:36.373
> 
> 标签：magento

我希望当客户注册产品（在后端选择）时应该将其添加到购物车中。我已经这样做了：

```
$product = Mage::getModel('catalog/product')
                            ->setStoreId(Mage::app()->getStore()->getId())
                            ->load(154);

$cart = Mage::getSingleton('checkout/cart');
$cart->addProduct($product, 1)->save();
Mage::getSingleton('checkout/session')->setCartWasUpdated(true); 
```

在 createPostAction() 中的 AccountController.php 中。

但它没有显示，但每当客户购买任何东西时，它都会被添加到购物车中。我做错了什么……？

-Thnx 提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:19:09.180

问题是，会话中的报价对象已经收集了总计，并且在保存购物车时不会再次这样做。因此，即使已成功添加并保存了报价项目，报价的项目计数也为零。像这样修改你的代码：

```
$cart->product($product, 1);
$cart->getQuote()->setData('totals_collected_flag', false);
$cart->save(); 
```

这应该可以解决问题。

`customer_register_success`一个建议：在监听事件的观察者中实现这个功能不是更好吗？

# android - 特定设备中的Android parseException无法解析日期？

> ID：14934135
> 
> 赞同：2
> 
> 时间：2013-02-18T10:29:53.113
> 
> 标签：android, date-format, android-2.2-froyo, date-conversion, parseexception

在我的 android 应用程序中，我使用以下方法将字符串转换为日期

```
public Date convertToDate(String date) {  //(input date format "Feb 18, 2013 01:32 AM")
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.MEDIUM, DateFormat.SHORT);
        try {  
            Date dateObj = dateFormat.parse(date);
            return dateObj;
        } catch (ParseException e) {
            e.printStackTrace();  
        } catch (Exception e) {
            Log.d("Utility", e.getMessage());
        }
        return null;
    } 
```

它在大多数移动设备上都可以正常工作，但由于某种原因，它在 2.2 版本的设备和一些三星设备中无法正常工作并**抛出 parse Exception unparseable date**。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:32:58.570

为您的代码使用 simpledateformat ..

```
 SimpleDateFormat dfDate  = new SimpleDateFormat("MMM dd,yyyy HH:mm a");
 try {
    dateObj  = dfDate.parse(date);
} catch (java.text.ParseException e) {
    e.printStackTrace();
} 
```

# android - 在 iOS 项目中使用 Java 库

> ID：14934138
> 
> 赞同：8
> 
> 时间：2013-02-18T10:30:00.433
> 
> 标签：android, ios, java

我正在开发一个需要基于相对复杂的规则集进行业务逻辑计算的项目。计算将在以下平台上执行：

*   安卓应用
*   iOS 应用
*   Java EE 应用程序容器

业务逻辑不依赖于任何特定于平台的细节，而是严格地关于“数字运算”。

为了避免 Java 和 Objective C 的双重实现，这需要精心测试等等，我想创建一个包含实现的 Java 库并在 iOS 应用程序中使用它。

最好的方法是什么？为Objective C做一个本地移植会更好吗？反过来用Objective C编写库并在Android/Java上使用它会更好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T10:35:03.730

您无法在 iOS 应用程序中使用 Java 库。Java 需要运行时来解释（JRE），而你在 iOS 上没有。

从技术上讲，您可以将 Java 库编译为本机代码（有相应的工具），但我不推荐这样做。

为了在 Android 和 iOS 之间共享业务代码，最好的解决方案是使用纯 C 库。您可以使用 JNI（适用于 Android 的 NDK）从 Java 调用 C 库。

由于 Obj-C 只是纯 C 上的一个小对象层，因此您可以从 Obj-C 轻松使用 C 库。

You can compile Obj-C for NDK, too, but it is much more complicated than just using C.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T10:54:47.810

You could try parsing the java library to Objective C using j2objc [https://code.google.com/p/j2objc/](https://code.google.com/p/j2objc/)

Update: This Swift Java bridge is in development [https://github.com/SwiftJava/SwiftJava/blob/master/README.md](https://github.com/SwiftJava/SwiftJava/blob/master/README.md)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-25T06:34:40.730

Kotlin Native now has a Swift integration. So with some build process overhead you could share business logic written in Kotlin with iOS and Android.

[https://blog.jetbrains.com/kotlin/2017/12/kotlinnative-v0-5-released-calling-kotlin-from-swift-and-c-llvm-5-and-more/](https://blog.jetbrains.com/kotlin/2017/12/kotlinnative-v0-5-released-calling-kotlin-from-swift-and-c-llvm-5-and-more/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T10:34:14.353

在这种情况下，您应该编写逻辑的 C 实现并将 JNI 用于 android 应用程序。

所以你不会重复自己

[http://en.wikipedia.org/wiki/Java_Native_Interface](http://en.wikipedia.org/wiki/Java_Native_Interface)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T10:32:29.873

您无法在 iOS 中使用任何与 java 相关的代码或应用程序。您必须在本地端口上工作。iOS 没有 jvm。

# java - 打开图片库 Android

> ID：14934139
> 
> 赞同：0
> 
> 时间：2013-02-18T10:30:00.073
> 
> 标签：java, android, android-gallery

我制作了一个相机应用程序并将图像保存在 DCIM/Yogyakarta，但我无法打开该目录。它只能在 DCIM/ 中打开。

谁能告诉我为什么我无法打开目录，以及如何修复它？

```
public final class FroyoAlbumDirFactory extends AlbumStorageDirFactory {

@Override
public File getAlbumStorageDir(String albumName) {
    // TODO Auto-generated method stub
    return new File(
      Environment.getExternalStoragePublicDirectory(
        Environment.DIRECTORY_DCIM
      ), 
      albumName
    );
 }
}

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mAlbumStorageDirFactory = new FroyoAlbumDirFactory();

    Button buttonLoadImage = (Button) findViewById(R.id.buttonLoadPicture);

    buttonLoadImage.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
        storageDir = mAlbumStorageDirFactory.getAlbumStorageDir("Yogyakarta");              

            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.fromFile(storageDir),"*/*");

            startActivityForResult(intent, RESULT_LOAD_IMAGE);
         }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:58:13.083

只需将您的`getAlbumStorageDir`方法替换为以下@

```
public File getAlbumStorageDir(String albumName) {
        // TODO Auto-generated method stub

        return new File( Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM),"/"+ albumName);
     } 
```

它需要“/”来获取正确的路径。

# magento - 捆绑产品总是缺货，价格显示 0

> ID：14934143
> 
> 赞同：0
> 
> 时间：2013-02-18T10:30:21.723
> 
> 标签：magento, magento-1.7

我有一个基于社区版 1.7.0.2 的 magento 网站。我在产品页面上捆绑产品有两个问题，它们是：

1.) 产品页面上的价格为零，并且在选择捆绑商品时没有更新。

萤火虫控制台上的错误：

```
 ReferenceError: bundle is not defined
    [Break On This Error]   
    bundle.changeOptionQty(this, event) 
```

2.) 捆绑产品总是缺货。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:50:32.483

在创建捆绑产品时，尽量选择动态的 SKU、重量和价格。
并添加一个有库存的简单产品。
请参阅[链接 1](http://www.magentocommerce.com/knowledge-base/entry/creating-a-bundled-product)。
希望这对您有所帮助。

# java - 如何为简单的 java 项目创建构建作业

> ID：14934145
> 
> 赞同：3
> 
> 时间：2013-02-18T10:30:27.357
> 
> 标签：java, jenkins, continuous-integration

我对詹金斯很陌生。我已经完成了 jenkins 的教程，我想为简单的 java 项目创建一个构建作业。我知道如何创建一个自由式构建，但我没有看到构建和项目之间有任何联系。到底发生了什么。我在 Eclipse 中有我的项目，我如何创建项目的构建。我怎么知道它是这个项目的确切版本。谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:32:43.233

最好的办法是将你的构建移动到一些标准的命令行工具，比如[ant](https://wiki.jenkins-ci.org/display/JENKINS/Ant+Plugin)、[maven](https://wiki.jenkins-ci.org/display/JENKINS/Maven+2+Project+Plugin)、[ivy](https://wiki.jenkins-ci.org/display/JENKINS/Ivy+Plugin)、[gradle](https://wiki.jenkins-ci.org/display/JENKINS/Gradle+Plugin)等，然后你可以在你的 IDE 和 jenkins 上重用相同的构建。请注意，这并不意味着放弃使用您的 IDE - 许多 IDE 可以直接导入这些类型的项目，并为您提供您在 IDE 中习惯的所有好处。它只是意味着您获得了一个“便携”的构建，而不是绑定到您使用的特定 IDE。

我个人认为 maven 在这方面得到最好的支持，但这主要是个人喜好问题。

# mongodb - 在 Salat 和 MongoDB 中使用复合键

> ID：14934146
> 
> 赞同：1
> 
> 时间：2013-02-18T10:30:27.760
> 
> 标签：mongodb, scala, salat

我刚刚阅读[了这篇](https://stackoverflow.com/questions/8882797/what-is-the-best-way-to-deal-with-compsite-keys-when-using-salat-with-mongodb)关于如何在 Salat 和 MongoDB 中使用复合键的帖子……它或多或少地清楚它是如何工作的。不过，我想知道`@Key`即使我的密钥已经命名，注释是否是强制性的`id`。我正在尝试序列化来自外部库的一些案例类，我不想重新定义它们。给定以下外部案例类：

```
case class UserId(id: String, mail: String)
case class User(id: UserId, name: String, surname: String) 
```

是否可以序列化这样的`User`对象（即没有`@Key`注释）？

```
object UserDAO extends SalatDAO[User, UserId](...) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:27:41.190

MongoDB 期望集合中的每个文档都有一个名为“_id”的 id 字段。如果您未能提供“_id”字段，那么 mongo-java-driver 将为您创建一个。

所以你需要做的是：

*   将字段命名为“_id”，而不是“id”
*   序列化时使用`@Key`注释将您的“id”字段重新映射到“_id”`User`
*   添加“id”到“_id”的全局键重映射，这样就不需要`@Key`就地使用了

在处理外部模型时，选项三是最有效的。请参阅此 wiki 文章中的“全局密钥重新映射”部分： [https ://github.com/novus/salat/wiki/CustomContext](https://github.com/novus/salat/wiki/CustomContext)

完成此重新映射后，`UserDAO`应该可以使用复合键正常工作。

请记住，即使您的字段在`User`案例类中命名为“id”，查询也*必须*引用，`_id`因为这是在 MongoDB 文档中调用的字段。

另外，请记住，当您使用复合键时，您将需要创建一个自定义索引，该索引按照您要查询*的顺序覆盖复合键的所有字段。*您可以使用 Dex 分析您的 MongoDB 日志并提出建议： [https ://github.com/mongolab/dex](https://github.com/mongolab/dex)

# jquery - 如何使用 Handsontable 将网站中的表格导出到 EXCEL

> ID：14934150
> 
> 赞同：2
> 
> 时间：2013-02-18T10:30:32.067
> 
> 标签：jquery, handsontable

我有一个问题，现在我正在使用 Handsontable 这个插件在 HTML 中创建表格，这与使用 excel 更改内容、添加行等相同。

但我的问题是如何将这个更改的表导出到 excel。

需要你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T11:34:56.320

您有两种方法可以解决此问题-

*   保存时向服务器发出 AJAX 请求，其中包含所有数据。并使用 Apache POI 之类的东西来创建一个 Excel，如下所述 -

    [将 JQuery Handsontable 保存到服务器上的 excel 文件中](https://stackoverflow.com/questions/12353239/save-jquery-handsontable-to-an-excel-file-on-server)

*   从 jQuery 保存到 Excel - 创建一个用于导出的按钮，单击它会执行以下操作：

> ```
> $("#btnExport").click(function(e) {
>     window.open('data:application/vnd.ms-excel,' + $('#dvData').html());
>     e.preventDefault();
> }); 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-01T04:49:17.417

尝试这个：

```
$("#btnExport").click(function(e) {
    window.open('data:application/vnd.ms-excel,' + encodeURIComponent($('div[id$=dvData]').html()));
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T11:26:16.397

不确定这是否是您正在寻找的答案，但是...

您可以轻松地从掌上电脑复制并粘贴到 Excel 工作表中。

# sql - 从不同的员工id获取余额的最大值

> ID：14934151
> 
> 赞同：1
> 
> 时间：2013-02-18T10:30:32.300
> 
> 标签：sql, sql-server, sql-server-2008

我在使用 SELECT 语句时遇到问题，我想选择每个员工 ID 的最大余额。我有一张这样的桌子。

```
EMPLOYE ID |  BALANCES
  c50-5050   |    100
  c50-5050   |    200
**c50-5050   |    300**
  c50-5051   |    200
**c50-5051   |    300** 
```

带星号的表示我想从表中选择什么。

我实际上需要在 VB.net 的数据网格视图中显示它。你知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:36:15.540

使用以下查询

```
select max(Balances),employe_id from table
group by employe_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T10:34:56.510

您可以`ROW_NUMBER`与`OVER`-clause 一起使用：

```
WITH X AS
(
   SELECT [EMPLOYE ID], BALANCES,
           RN = ROW_NUMBER() OVER (PARTITION BY [EMPLOYE ID] ORDER BY BALANCES DESC)
   FROM dbo.Table
)
SELECT EMPLOYE ID, BALANCES
FROM X
WHERE RN = 1 
```

> 我实际上需要在 VB.net 的数据网格视图中显示它。你知道如何做到这一点吗？

使用 ADO.NET，您可以使用 a`DataAdapter`填充 a `DataTable`：

```
Dim table = New DataTable()
Dim sql = "see sql above"
Using con = New SqlConnection(yourConnectionString)
    Using da = New SqlDataAdapter(sql, con)
       da.Fill(table)
    End Using
End Using
DataGridView1.DataSource = table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:35:42.707

试试下面的代码。

```
SELECT EMPLOYEE_ID,MAX(balances) FROM TABLE_NAME
GROUP BY EMPLOYEE_ID; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T10:38:23.570

查询应该这样`max()` `group by`做

```
select max(balance), employe_id
from yourTable
group by employe_id 
```

# ios - 我如何修复 KERN_INVALID_ADDRESS

> ID：14934153
> 
> 赞同：4
> 
> 时间：2013-02-18T10:30:36.560
> 
> 标签：ios, objective-c

谁能告诉我如何解决我的应用程序中出现的这个崩溃问题。我无法找到这次崩溃发生的原因。我没有任何线索。我搜索我的项目以找到“objectIsKindOfClass”，但我没有使用过这种方法。

![在此处输入图像描述](../Images/55655cd1a973ac4c6dbe580b666c87ea.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:35:14.517

为了找到它，您需要启用 NSZombie 对象。按 Option + Command + R 和

选择“诊断”选项卡。最后，单击“启用僵尸对象”。

# vba - 获取消息框中变量单元格的单元格值

> ID：14934155
> 
> 赞同：1
> 
> 时间：2013-02-18T10:30:40.647
> 
> 标签：vba, messagebox

我有一张包含名称和技能的表格，其中 1 表示“您没有此技能”，3 表示“您有此技能”。当我将它从 1 更改为 3 时，您会收到一个消息框：您确定要这样做吗？我想要msgbox中的名字和技能，但不知道怎么做。

例如，我将单元格 D12 从 1 更改为 3。消息应该说：

您确定要更改（单元格 A12 的值/人名）的（单元格 D1 的值/技能）吗

没关系。但它适用于活动单元格，因此 D1 和 A12 会根据哪个单元格处于活动状态而变化。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:37:46.277

您可以使用[R1C1 Reference Style](http://www.lytebyte.com/2008/04/29/what-are-a1-and-r1c1-reference-style-in-excel/)。在这种情况下，您必须将 Excel 的设置切换为 R1C1 参考样式：

在**Office 2007**中，单击**Office**按钮，然后单击**Excel 选项**，您将在最后的**Exit Excel**附近找到该选项。

转到**公式**选项卡并在**使用公式**下，检查**R1C1 参考样式**以使用它。

如果您`=R[2]C[1]`在`A1`单元格中指定公式，它将从`B3`单元格中返回一个值。

第二种方法是使用以下公式：

```
=OFFSET(INDIRECT(ADDRESS(ROW(), COLUMN())),2,1) 
```

在这种情况下，您不必更改任何设置

***编辑：***

我试过你的例子。如果您想通过使用 VBA 来实现这一点，那就更容易了：

```
Dim skillValue As String
skillValue = Range(Cells(1, Selection.Column), Cells(1, Selection.Column))
Dim nameValue As String
nameValue = Range(Cells(Selection.Row, 1), Cells(Selection.Row, 1))
If MsgBox("Are you sure you want to change " & skillValue & " of " & nameValue & "?", vbOKCancel) = vbOK Then
............... 
```

# php - 上传包含和排除行和列的 .csv 文件

> ID：14934156
> 
> 赞同：0
> 
> 时间：2013-02-18T10:30:42.923
> 
> 标签：php, mysql, file-upload

在 PHP 中上传 .csv 文件或删除特定单词时是否可以删除多余的行？

请看一下我的屏幕截图。当我在 MySQL 中处理上传时，我想排除那些被包围的人。

![截屏](../Images/57f0c495294909fb390b90e0d76b0927.png) [全尺寸](http://oi49.tinypic.com/11k8602.jpg)

这是我在网上找到的代码。

```
<?php

$message = null;

$allowed_extensions = array('csv');

$upload_path = '';

if (!empty($_FILES['file'])) {

    if ($_FILES['file']['error'] == 0) {

        // check extension
        $file = explode(".", $_FILES['file']['name']);
        $extension = array_pop($file);

        if (in_array($extension, $allowed_extensions)) {

            if (move_uploaded_file($_FILES['file']['tmp_name'], $upload_path.'/'.$_FILES['file']['name'])) {

                if (($handle = fopen($upload_path.'/'.$_FILES['file']['name'], "r")) !== false) {

                    $keys = array();
                    $out = array();

                    $insert = array();

                    $line = 1;

                    while (($row = fgetcsv($handle, 0, ',', '"')) !== FALSE) {

                        foreach($row as $key => $value) {
                            if ($line === 1) {
                                $keys[$key] = $value;
                            } else {
                                $out[$line][$key] = $value;

                            }
                        }

                        $line++;

                    }

                    fclose($handle);    

                    if (!empty($keys) && !empty($out)) {

                        $db = new PDO('mysql:host=localhost;dbname=attendance', 'root', 'root');
                        $db->exec("SET CHARACTER SET utf8");

                        foreach($out as $key => $value) {

                            $sql  = "INSERT INTO `report` (`";
                            $sql .= implode("`, `", $keys);
                            $sql .= "`) VALUES (";
                            $sql .= implode(", ", array_fill(0, count($keys), "?"));
                            $sql .= ")";
                            $statement = $db->prepare($sql);
                            $statement->execute($value);

                        }

                        $message = '<span class="green">File has been uploaded successfully</span>';

                    }   

                }

            }

        } else {
            $message = '<span class="red">Only .csv file format is allowed</span>';
        }

    } else {
        $message = '<span class="red">There was a problem with your file</span>';
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:36:58.143

好吧，没有更多信息 - 看起来您要排除的行比其他行少（我假设您也不想要空白行）。

您可以使用该功能

```
$arr= str_getcsv(); 
```

将一行 CSV 数据读入一个数组

```
if(sizeof($arr)!=$validCount) 
```

在结果数组上，您可以排除非特定长度的行 ($validCount)。

显然，我们可以更深入地排除排除，但我猜这会让你开始。

注意 - 这需要 PHP5.3 或更高版本。

高温高压

R

# asp.net-mvc - 使用 LINQ 对项目进行总和

> ID：14934159
> 
> 赞同：0
> 
> 时间：2013-02-18T10:30:51.950
> 
> 标签：asp.net-mvc, linq-to-sql, entity-framework-5

我试图从发票项目的总和中获取表格中每张发票的总和。

我的发票数据模型是

```
public class Invoice
{
    [Key]
    public int InvoiceId { get; set; }
    public int ClientId { get; set; }
    public int CustomerId { get; set; }
    public string Type { get; set; }
    public string Number { get; set; }
    public DateTime Date { get; set; }
    public bool Paid { get; set; }
    public bool Printed { get; set; }
    public string Notes { get; set; }
    public virtual ICollection<InvoiceItem> InvoiceItems { get; set; }
    public virtual Customer customer { get; set; }

} 
```

我的 invoiceitem 数据模型是

```
public class InvoiceItem
{
    [Key]
    public int InvoiceItemId { get; set; }
    public int InvoiceId { get; set; }
    [StringLength(100)]
    public string PartNo { get; set; }
    public string Description { get; set; }
    public int Quantity { get; set; }
    public decimal Price { get; set; }
    public int TaxId { get; set; }
    public virtual Invoice Invoice { get; set; }
} 
```

要填充我有的网格

```
 response.Records.Add(new JqGridRecord(Convert.ToString(x.Invoice.InvoiceId), new InvoiceEditViewModel()
            {
                Id = x.Invoice.InvoiceId,
                CustomerName = x.Customer.Name,
                Total =  x.Invoice.InvoiceItems.Where(p => p.InvoiceId == x.Invoice.InvoiceId).Sum(d => d.Price * d.Quantity ),
                InvType = x.Invoice.Type,
                Notes = x.Invoice.Notes,
                Date = x.Invoice.Date.ToShortDateString(),
                Number = x.Invoice.Number,
                Printed = x.Invoice.Printed,

            }));

        } 
```

但是，这在计算总数时会引发错误

“已经有一个打开的 DataReader 与此命令关联，必须先关闭”

我将不胜感激如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:32:30.123

似乎我需要的是添加

多活动结果集=真；

在我的连接字符串中。

# d3.js - 使用 d3.js 的气泡图中的工具提示

> ID：14934162
> 
> 赞同：0
> 
> 时间：2013-02-18T10:30:53.967
> 
> 标签：d3.js, tooltip

我将 d3.js 用于气泡图。它工作正常，但我需要为我正在显示的数据编写自定义工具提示。目前我只是附加了一个标题标签，所以它只显示一个带有工具提示的数据如果我有更多数据怎么办以表格的形式展示和想要展示。

这是我的代码。

```
d3.json("data/bubble.json", function(error, root) {
var node = svg.selectAll(".node")
  .data(bubble.nodes(classes(root))

  .filter(function(d) { return !d.children; }))
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

node.append("title")
  .text(function(d) { return d.className + ": " + format(d.value); });

node.append("circle")
  .attr("r", function(d) { return d.r; })
  .style("fill", function(d) { return color(d.packageName); });

node.append("text")
  .attr("dy", ".3em")
  .style("text-anchor", "middle")
  .text(function(d) { return d.className.substring(0, d.r / 3); });
}); 
```

# c# - 在已经绑定的gridview中绑定ddl

> ID：14934164
> 
> 赞同：0
> 
> 时间：2013-02-18T10:31:07.853
> 
> 标签：c#, asp.net, .net, gridview

当搜索框返回结果时，我试图绑定 ddl。DDL 绑定如下：

```
<asp:TemplateField HeaderText="Service Area" SortExpression="ServiceArea">
  <EditItemTemplate>
    <asp:DropDownList ID="drp_Val_ServiceArea" runat="server" DataTextField="ServiceArea"
        DataValueField='<%# Eval("ServiceAreaId") %>'>
    </asp:DropDownList>
  </EditItemTemplate>
  <ItemTemplate>
    <asp:Label ID="lbl_Bind_ServiceArea" runat="server" Text='<%# Bind("ServiceArea") %>'></asp:Label>
  </ItemTemplate>
</asp:TemplateField> 
```

当我使用搜索和网格加载时，页面加载正常。当我按下编辑按钮时，异常是对象未设置为实例。和错误`ddl.DataTextField = "ServiceArea"`。

```
protected void grd_User_RowEditing(object sender, GridViewEditEventArgs e)
{
grd_User.EditIndex = e.NewEditIndex;

using (var _db = new dbDataContext())
{
    var result = from s in _db.tbl_ServiceAreas
                    where s.Deleted == false
                    select new
                    {
                        s.ServiceAreaId,
                        s.ServiceArea
                    };

    if ((DataControlRowState.Edit) > 0)
    {

        DropDownList ddl = (DropDownList)grd_User.Rows[e.NewEditIndex].Cells[0].FindControl("drp_Val_ServiceArea");

        ddl.DataTextField = "ServiceArea";
        ddl.DataValueField = "ServiceAreaId";
        ddl.DataSource = result;
        ddl.DataBind();

    }
}
 LoadGrid();
} 
```

这是因为网格已经绑定到 ServiceArea 了吗？

以下是我一直在寻找的答案。

```
 protected void grd_User_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowState == DataControlRowState.Edit)
        {
            DropDownList ddl = (DropDownList)e.Row.FindControl("drp_Val_ServiceArea");

            using (var _db = new dbDataContext())
            {
                var result = from s in _db.tbl_Users
                             where s.Deleted == false
                             select new
                             {
                                 s.ServiceAreaId,
                                 s.tbl_ServiceArea.ServiceArea
                             };

                foreach (var item in result)
                {
                    ddl.DataTextField = item.ServiceArea;
                    ddl.DataValueField = item.ServiceAreaId.ToString();
                    ddl.DataSource = result;
                    ddl.DataBind();
                }

            }
        }
    } 
```

# iphone - 本地化 xib 文件后 iPhone 应用程序崩溃

> ID：14934165
> 
> 赞同：0
> 
> 时间：2013-02-18T10:31:08.167
> 
> 标签：iphone, xcode4, localization

我正在创建我的第一个 iPhone 应用程序，其中第一个屏幕显示用户从中选择的表格视图。它使用以下方法在本地化之前工作。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

// Override point for customization after application launch.
navigationController = [[UINavigationController alloc] init];

[self.window addSubview:[self.navigationController view]];

if(self.selectCategoryViewController == nil)
{
    SelectCategoryViewController *viewTwo = [[SelectCategoryViewController alloc] initWithNibName:@"SelectCategoryViewController" bundle:[NSBundle mainBundle]];
    self.selectCategoryViewController = viewTwo;
    [viewTwo release];
}
[self.navigationController setNavigationBarHidden:YES];//this will hide the navigation bar
[self.navigationController pushViewController:self.selectCategoryViewController animated:YES];

//self.window.rootViewController = self.navigationController;
[self.window makeKeyAndVisible];

return YES;
} 
```

在我通过添加日语本地化文件并将上面的内容更改为以下方式对其进行本地化之后：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

// Override point for customization after application launch.
navigationController = [[UINavigationController alloc] init];

[self.window addSubview:[self.navigationController view]];

if(self.selectCategoryViewController == nil)
{

    NSBundle *myLocalizedBundle=[NSBundle bundleWithPath:[NSString stringWithFormat:[[NSBundle mainBundle]bundlePath],"en.lproj"]];
    NSLog(@"the localized bundle is %@",myLocalizedBundle);
    SelectCategoryViewController *viewTwo=[[SelectCategoryViewController alloc] initWithNibName:@"SelectCategoryViewController" bundle:myLocalizedBundle];

    self.selectCategoryViewController = viewTwo;
    [viewTwo release];

}
[self.navigationController setNavigationBarHidden:YES];//this will hide the navigation bar
[self.navigationController pushViewController:self.selectCategoryViewController animated:YES];

[self.window makeKeyAndVisible];

return YES;
} 
```

它崩溃并出现以下错误：

```
√sh.app>（已加载）
2013-02-18 18:04:35.196 PictureEnglish [5529:207] *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“***-[NSCFString substringFromIndex:]：范围或索引超出范围”
*** 第一次抛出调用堆栈：
(
    0 核心基础 0x012775a9 __exceptionPreprocess + 185
    1 libobjc.A.dylib 0x013cb313 objc_exception_throw + 44
    2 CoreFoundation 0x0122fef8 + [NSException raise:format:arguments:] + 136
    3 CoreFoundation 0x0122fe6a +​​[NSException raise:format:] + 58
    4 基础 0x00033086 -[NSString substringFromIndex:] + 133
    5 图片英文 0x00008524 -[SelectCategoryViewController viewDidLoad] + 937
    6 UIKit 0x00378089 -[UIViewController 视图] + 179
    7 UIKit 0x00376482-[UIViewController contentScrollView] + 42
    8 UIKit 0x00386f25-[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 48
    9 UIKit 0x00385555-[UINavigationController_layoutViewController:] + 43
    10 UIKit 0x00386870-[UINavigationController _startTransition:fromViewController:toViewController:] + 524
    11 UIKit 0x0038132a-[UINavigationController _startDeferredTransitionIfNeeded] + 266
    12 UIKit 0x0049c2e9 -[UILayoutContainerView layoutSubviews] + 226
    13 QuartzCore 0x010a7a5a -[CALayer layoutSublayers] + 181
    14 石英核心 0x010a9ddc CALayerLayoutIfNeeded + 220
    15 石英核心 0x0104f0b4 _ZN2CA7Context18commit_transactionEPNS_11TransactionE + 310
    16 石英核心 0x01050294 _ZN2CA11Transaction6commitEv + 292
    17 UIKit 0x002ca9c9-[UIApplication_reportAppLaunchFinished] + 39
    18 UIKit 0x002cae83-[UIApplication_runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 690
    19 UIKit 0x002d5617-[UIApplication 句柄事件：withNewEvent：] + 1533
    20 UIKit 0x002cdabf -[UIApplication 发送事件：] + 71
    21 UIKit 0x002d2f2e _UIApplicationHandleEvent + 7576
    22 图形服务 0x01bcf992 PurpleEventCallback + 1550
    23 核心基础 0x01258944 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
    24 核心基础 0x011b8cf7 __CFRunLoopDoSource1 + 215
    25 核心基础 0x011b5f83 __CFRunLoopRun + 979
    26 核心基础 0x011b5840 CFRunLoopRunSpecific + 208
    27 核心基础 0x011b5761 CFRunLoopRunInMode + 97
    28 UIKit 0x002ca7d2-[UIApplication_run] + 623
    29 UIKit 0x002d6c93 UIApplicationMain + 1160
    30 图片英文 0x00001cec main + 102
    31 图片英文 0x00001c7d 开始 + 53
    32 ？？？0x00000001 0x0 + 1
)
在抛出“NSException”实例后调用终止

```

关于我应该如何为所选语言调用 SelectCategoryViewController 的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T12:20:39.170

问题 - 这是项目路径的问题，我认为 [self.window makeWindowKeyVisible] 无法找到您第一个分配的控制器的路径... 解决方案 - 有时会发生，当您的项目突然停止工作时，所以没有担心 - 只需将您的项目转移到其他路径，或者只是更改您的项目实际所在的文件夹的名称，它就会开始正常工作......

它成功地为我工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T15:01:14.617

xcode 5：我必须清理构建，清理构建文件夹，删除派生数据，重置模拟器，关闭模拟器，关闭 Xcode。

再次打开项目，它正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:59:47.390

这条线在我看来是错误的：

```
NSBundle *myLocalizedBundle=[NSBundle bundleWithPath:[NSString stringWithFormat:[[NSBundle mainBundle]bundlePath],"en.lproj"]]; 
```

你的意思可能是这样的：

```
NSString* path= [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"];
NSBundle* bundle:myLocalizedBundle = [NSBundle bundleWithPath:path];
SelectCategoryViewController *viewTwo = [[SelectCategoryViewController alloc] initWithNibName:@"SelectCategoryViewController" bundle:myLocalizedBundle]; 
```

此处对此进行了更多讨论：[Manually loading a different local nib in iOs](https://stackoverflow.com/questions/8712049/manually-loading-a-different-localized-nib-in-ios)

请注意，仅当您要进行应用内语言选择时才需要这样做。本地化通常应该使用 iOS 设备选择的语言，在这种情况下，这一切都更加简单（您只需让 iOS 为您选择捆绑包）。

# android - 无法在 android 中建立应用内计费连接

> ID：14934171
> 
> 赞同：1
> 
> 时间：2013-02-18T10:31:31.943
> 
> 标签：android, google-analytics, in-app-billing

我正在尝试将 In app billing v3 集成到我的应用中。我调用以下函数进行初始化。

```
public static void SetupInappBilling()
{
    mHelper = new IabHelper(context, base64EncodedPublicKey);
    mHelper.enableDebugLogging(true);
    mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() 
    {
        public void onIabSetupFinished(IabResult result) 
        {
            if (result.isSuccess())
            {
                Log.e("tag", "connected");
                ConnectionEstablished = true;

            } 
            else
            {
                    Log.e("tag", "not connected");

                    ConnectionEstablished = false;
                }
            }
        });
    } 
```

但我在**OnIabSetupFinishedListener**中没有收到回电 谁能告诉我如何解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:09:57.237

如所讨论的，示例`IabHelper`实现忽略了`bindService()`调用的返回值。

`bindService()``false`如果它无法绑定到服务，则返回。在这种情况下，不会调用任何回调。在这方面， 的返回值`bindService()`对于程序逻辑是必不可少的，决不能忽略；示例应用程序在这里并不完美。

如果我没记错的话，绑定到 IAB V3 的情况是：

*   只有 IAB V2 可用（它使用不同的类名）
*   Google Play 未完全设置

# actionscript-3 - 使用 AS3 PrintJob 打印动态组件

> ID：14934176
> 
> 赞同：0
> 
> 时间：2013-02-18T10:31:37.730
> 
> 标签：actionscript-3, apache-flex

我正在尝试使用 PrintJob（不是 FlexPrintJob）打印动态创建的火花组件。问题是当我将组件传递给 PrintJob 时它打印空白，例如：

printJob.addPage(组件为 Sprite, null, pjo); - 组件是动态创建的。printJob.send();

如何使组件及其内容可用？

任何回应都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:15:07.467

感谢您的帮助。我找到了一个解决方案（尽管它不是我想要的）。我所做的是我使用 Sprite 和 TextField 生成了我的组件，然后我使用 PrintJob 而不是 FlexPrintJob 打印了它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:36:18.903

paren，将您的组件转换为位图数据，创建一个添加到画布的不可见位图，将位图数据附加到其中，将位图数据绘制到新的精灵中并将其传递给您的打印作业。这就是我如何让它在我自己的项目上工作。

# java - 在 XML 上应用 xpath，其中命名空间带有 XOM 的子级

> ID：14934178
> 
> 赞同：0
> 
> 时间：2013-02-18T10:31:50.677
> 
> 标签：java, xml-namespaces, xom

我正在使用 XOM 库来解析 xml。我有以下 XML

```
<ns4:parent xmlns:ns4="http://sample.xml.com/ns4">
    <ns4:child1 xmlns:ns1="http://sample.xml.com/ns1" xmlns:xsi="http://sample.xml.com/xsi">
        <ns1:child2>divaStatus</ns1:child2>
        <xsi:child>something</xsi:child>
    </ns4:child1>
</ns4:parent> 
```

我想应用一个像`ns4:parent/ns4:child1/ns1:child2`. 所以我的代码如下

```
Document doc = new Builder().build(inStream);  //inStream is containing the xml
XPathContext xc = XPathContext.makeNamespaceContext(doc.getRootElement());
doc.query("ns4:parent/ns4:child1/ns1:child2", xc); 
```

我要`XPathException`到这里了。

```
 Exception in thread "main" nu.xom.XPathException: XPath error: XPath expression uses unbound namespace prefix ns1. 
```

我可以理解，由于我仅通过根元素创建命名空间上下文，因此它没有获取其子元素的命名空间。因此，一种解决方法可能是遍历所有孩子并收集他们的命名空间并将其添加到`XpathContext`对象中。但我的 xml 可以是 10 到 20k 行。所以我担心遍历方法的效率会有多高。

期待任何更好的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:28:52.550

这很容易（或者尽可能简单，考虑到 XPath 和 XML 命名空间的设计）。您只需要手动将要使用的任何命名空间添加到上下文中。例如，在这种情况下，

```
XPathContext xc = new XPathContext();
xc.addNamespace("ns4", "http://sample.xml.com/ns4");
xc.addNamespace("ns1", "http://sample.xml.com/ns1");
doc.query("ns4:parent/ns4:child1/ns1:child2", xc); 
```

请注意，您不必在文档使用的 XPath 表达式中使用相同的前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T23:03:50.590

大概您知道与每个元素名称相关联的名称空间。所以你可以写：

```
String xpath = "*[local-name()='parent' and namespace-uri()='http://sample.xml.com/ns4']"+
  "*[local-name()='child1' and namespace-uri()='http://sample.xml.com/ns2']"+
  "*[local-name()='child2' and namespace-uri()='http://sample.xml.com/ns1']"; 
```

我希望它与前缀版本一样有效。

# java - 设计时：如何将同一事件分配给多个 Swing 控件？

> ID：14934181
> 
> 赞同：0
> 
> 时间：2013-02-18T10:32:09.627
> 
> 标签：java, arrays, swing, events

我有 10 个 JSlider、10 个 JLabels 和 10 个 JToggleButton。当用户拖动滑块时，我需要更新其相应的标签并将所有滑块移动到相同的值，并切换相应的按钮。现在，我的问题不是如何做到这一点，而是如何在同一个事件中拥有这一切。

在我美好的 VB 时代（;)）我只需要分配具有相同名称的滑块，以及按钮和标签，并且我将自动拥有可由索引访问的滑块、标签和按钮数组，都触发相同的事件。

在我目前的 C++Builder 时代，我必须为它们中的每一个设置 Tag 属性（一个通用的 int 属性），选择所有滑块并为它们声明相同的事件，然后从 sender 对象中取回标签并将其用作索引。然后我将声明一个标签和按钮指针数组，以便我可以通过索引访问控件。

在 Java 中，如何为 IDE 中的所有滑块设置相同的事件（我使用 NetBeans）？以及如何将标签和切换按钮作为数组访问？

我见过一些例子，但它们都在运行时构建控件，我想以这种方式设计我的表单。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:12:13.407

[`ChangeListener`](http://docs.oracle.com/javase/6/docs/api/javax/swing/event/ChangeListener.html)为每个滑块添加一个。侦听器应该有一个它需要更新的所有其他滑块的集合。

沿着这些思路；

```
public void stateChanged(ChangeEvent e) {
  JSlider source = (JSlider)e.getSource();
  int val = (int)source.getValue();

  for (JSlider slider : otherSliders) {
    slider.setValue(val);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:19:41.410

好的，非常快，这大致是我的想法（可以改进很多，使用一些快捷方式可以更快）：

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import javax.swing.AbstractButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestMVC {

    public static class ModelObject {
        private PropertyChangeSupport pcs;

        public ModelObject() {
            pcs = new PropertyChangeSupport(this);
        }

        public PropertyChangeSupport getPropertyChangeSupport() {
            return pcs;
        }
    }

    public static class Model extends ModelObject {

        private List<Item> items;

        public Model() {
            items = new ArrayList<TestMVC.Item>();
        }

        public List<Item> getItems() {
            return items;
        }

        public void addToItems(Item item) {
            item.setModel(this);
            items.add(item);
            getPropertyChangeSupport().firePropertyChange("item", null, item);
        }

        public void removeFromItems(Item item) {
            items.add(item);
            item.setModel(null);
            getPropertyChangeSupport().firePropertyChange("item", item, null);
        }

    }

    public static class Item extends ModelObject {
        public static final String VALUE = "value";

        public static final String LABEL = "label";

        public static final String ENABLED = "enabled";

        private Model model;

        private boolean enabled;
        private String label;
        private int value;

        public Item() {
        }

        public Item(boolean enabled, String label, int value) {
            super();
            this.enabled = enabled;
            this.label = label;
            this.value = value;
        }

        public Model getModel() {
            return model;
        }

        public void setModel(Model model) {
            this.model = model;
        }

        public boolean isEnabled() {
            return enabled;
        }

        public void setEnabled(boolean enabled) {
            boolean old = this.enabled;
            this.enabled = enabled;
            getPropertyChangeSupport().firePropertyChange(ENABLED, old, enabled);
        }

        public String getLabel() {
            return label;
        }

        public void setLabel(String label) {
            String old = this.label;
            this.label = label;
            getPropertyChangeSupport().firePropertyChange(LABEL, old, enabled);
        }

        public int getValue() {
            return value;
        }

        public void setValue(int value) {
            _internalSetValue(value);
            if (this.isEnabled()) {
                for (Item item : model.getItems()) {
                    if (item != this && item.isEnabled()) {
                        item._internalSetValue(value);
                    }
                }
            }
        }

        private void _internalSetValue(int value) {
            int old = this.value;
            this.value = value;
            getPropertyChangeSupport().firePropertyChange(VALUE, old, value);
        }
    }

    public static class ItemView implements PropertyChangeListener {
        private Item item;

        private JLabel label;
        private JSlider slider;
        private AbstractButton button;

        public ItemView(Item item) {
            super();
            this.label = new JLabel(item.getLabel());
            this.slider = new JSlider(0, 100);
            this.slider.setValue(item.getValue());
            this.slider.setEnabled(item.isEnabled());
            this.button = new JCheckBox((String) null, item.isEnabled());
            this.item = item;
            item.getPropertyChangeSupport().addPropertyChangeListener(this);
        }

        public JLabel getLabel() {
            return label;
        }

        public JSlider getSlider() {
            return slider;
        }

        public AbstractButton getButton() {
            return button;
        }

        @Override
        public void propertyChange(PropertyChangeEvent evt) {
            if (evt.getPropertyName().equals(Item.LABEL)) {
                label.setText(item.getLabel());
            } else if (evt.getPropertyName().equals(Item.ENABLED)) {
                button.setSelected(item.isEnabled());
                slider.setEnabled(item.isEnabled());
            } else if (evt.getPropertyName().equals(Item.VALUE)) {
                slider.setValue(item.getValue());
            }
        }
    }

    private Model model;

    public TestMVC(Model model) {
        super();
        this.model = model;
    }

    protected void initUI() {
        JFrame frame = new JFrame(TestMVC.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new GridBagLayout());
        GridBagConstraints gbc1 = new GridBagConstraints();
        GridBagConstraints gbc3 = new GridBagConstraints();
        gbc3.weightx = 1.0;
        gbc3.fill = GridBagConstraints.HORIZONTAL;
        gbc3.gridwidth = GridBagConstraints.REMAINDER;
        for (final Item item : model.getItems()) {
            final ItemView view = new ItemView(item);
            view.getButton().addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    item.setEnabled(view.getButton().isSelected());
                }
            });
            view.getSlider().addChangeListener(new ChangeListener() {

                @Override
                public void stateChanged(ChangeEvent e) {
                    item.setValue(view.getSlider().getValue());
                }
            });
            panel.add(view.getButton(), gbc1);
            panel.add(view.getLabel(), gbc1);
            panel.add(view.getSlider(), gbc3);
        }
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    private static Model loadModel() {
        Random random = new Random();
        Model model = new Model();
        for (int i = 0; i < 10; i++) {
            Item item = new Item(random.nextBoolean(), "Some label " + random.nextLong(), random.nextInt(100));
            model.addToItems(item);
        }
        return model;
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InstantiationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                Model model = loadModel();
                new TestMVC(model).initUI();
            }
        });
    }

} 
```

# linux - shell脚本错误[：12：意外操作员？

> ID：14934185
> 
> 赞同：0
> 
> 时间：2013-02-18T10:32:16.273
> 
> 标签：linux, shell, ubuntu

```
#!/bin/bash
value=$(</var/www/sym_monitor/manthan.txt)

if [ "$value" == "true" ]; then

     ps -ef|grep sym |grep -v grep |awk '{ print $2 }'|sudo  xargs kill -9;

(cd /var/www/symmetric-ds-3.1.6/bin;sudo ./sym --port 8082 --server);

fi 
```

当我手动运行这个脚本时，它运行良好，但是当我在 cron 中运行这个脚本时，它给出了以下错误。

[：12：意外的运算符

任何想法为什么？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:40:14.510

您不是在 中运行脚本`bash`，而是在不同的 shell 中运行。使用 single`=`而不是`==`POSIX 兼容的 shell。

# extjs - 加载时外部网格过滤默认过滤器激活

> ID：14934186
> 
> 赞同：2
> 
> 时间：2013-02-18T10:32:26.060
> 
> 标签：extjs, filter, grid, extjs4

我已将默认远程过滤器添加到“hiddenFlag”列的网格中，但它在第一次加载时不活动。当我单击列标题菜单时，过滤器似乎处于活动状态，但现在记录是合适的。我应该停用并再次激活它。

![过滤器似乎处于活动状态，但事实并非如此！](../Images/eb8f5c1c74df823210ab58caed21517b.png)

怎么样，我也可以将它配置为在第一次加载时处于活动状态？

```
Ext.define('Ext.migration.CommentGrid', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.commentgrid',            
    xtype: 'grid',
    initComponent: function(){
        filePath = "";
        this.filters = {
                ftype: 'filters',
                encode: false, // json encode the filter query
                local: false, //only filter locally
                filters: [{
                    type: 'numeric',
                    dataIndex: 'id'
                }, {
                    type: 'boolean',
                    dataIndex: 'publishableFlag'
                }, {
                    type: 'boolean',
                    dataIndex: 'hiddenFlag',
                    value:0,
                    active:true
                }
                ]
            };        
        Ext.apply(this, {
            iconCls: 'icon-grid',
            features: [this.filters],
            selType: 'rowmodel',
            columns: [
                {
                    text: 'ID',
                    hideable: false,
                    dataIndex: 'id'
                },
                {
                    xtype: 'checkcolumn', 
                    text: 'Yayınlandı mı?',
                    dataIndex: 'publishableFlag'
                },
                {
                    xtype: 'checkcolumn', 
                    text: 'Gizle',
                    dataIndex: 'hiddenFlag',
                    filter: {
                        value:0,
                        active:true
                    }
                }
            ]
        });
        this.callParent();
    },
    listeners:{
        'afterrender': function(a,b,c){
            //Ext.getCmp()
            console.log("after render", this);

        }
    },
    bbar: Ext.create('Ext.PagingToolbar', {
        store: commentStore,
        displayInfo: true
    })
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T00:08:22.757

确保在`afterrender`事件中创建过滤器，例如：

```
listeners:{
    'afterrender': function(grid){
        grid.filters.createFilters();
    }
}, 
```

如果这不能处理它，您还可以以编程方式设置过滤器（而不仅仅是使用配置）。如[本答案所述](https://stackoverflow.com/a/11606415/1062992)。

# c# - 使用 >of (Open File) 或 Resharper Go To File 命令在 Visual Studio 中查找排除的文件？

> ID：14934190
> 
> 赞同：0
> 
> 时间：2013-02-18T10:32:37.243
> 
> 标签：c#, visual-studio, resharper

是否可以选择允许 Resharpers 的打开文件转到文件功能在搜索中包含排除的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:38:07.440

您可以使用在文件中查找： ++`Ctrl`并 搜索特定文件夹。 要打开第一个位置，请按并继续浏览列表。`Shift``F`
`F8`

# c# - EF codefirst，如何在每个加载的应用程序中仅调用一次 SaveChanges()

> ID：14934201
> 
> 赞同：1
> 
> 时间：2013-02-18T10:33:08.723
> 
> 标签：c#, entity-framework, ninject, code-first

我会尝试解释我想要什么，但这会很困难。) 所以我有实体：

```
public class User
{
    [Key]
    public Int32 Id { get; set; }
    public String Name { get; set; }
    public List<Article> Article { get; set; }

    public String Surname { get; set; }
} 
```

我有实现`DbContext`及其接口：

```
public interface IMyContext
{
    DbSet<T> Set<T>() where T : class;
}

public class MyContext : DbContext, IMyContext
{
    public DbSet<User> Users { get; set; }

    protected override void Dispose(bool disposing)
    {
        this.SaveChanges();
        base.Dispose(disposing);
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        //modelBuilder.Entity<User>().HasMany(e => e.Article).WithRequired(e => e.User).WillCascadeOnDelete(true);
        base.OnModelCreating(modelBuilder);
    }
} 
```

我有这个实体存储库和它的界面：

```
public interface IUserRepository
{
    void Add(User entity);
    void Delete(User entity);
    User GetById(Int32 id);
    List<User> GetAll();
}

public class UserRepository : RepositoryBase<User>, IUserRepository
{
    [Inject]
    public UserRepository(IMyContext context):base(context)
    {
    }
} 
```

另外我正在使用 ninject 来注入依赖项。在使用中它看起来像这样（不要告诉我我不应该直接在我的pressentation层使用存储库，我应该通过`BussinesLogic`层使用它。这只是一个例子）：

```
 var repository = DI.Resolve<IUserRepository>();
    repository.Add(new User(){Name="Vasja1", Id = 1, Surname = "Petrov"}); 
```

让我们想象一下，我们的表示层中有 Asp.NET 应用程序。我的应用程序可以在很多地方修改实体。问题我应该在哪里使用`SaveChanges()`？我把它放在`context.Dispose()`方法中，但也必须调用 dispose。谢谢回答。如果您能举出例子，将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:43:07.330

如果您遵循 MVC 模式，您可以将存储库调用包装在控制器操作中的 using 语句中。using 块中的最后一行可能是 .SaveChanges()。您还可以搜索事务/工作单元模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:58:36.140

我不认为 dispose 中的 savechanges 是一个好主意。

您可以在您的存储库类上实现 SaveChnages，但您经常会看到使用的逻辑工作单元模式。以下是对这种模式的简要说明。

```
public interface ILuw
   OperationStatus Commit();

  public class UoW : IUow
{

  // Constructor... inject context....

     // Properties/Members that work with your repository Interface pattern

      public DbSet<Users> Users  // example
      public DbSet<Entity2>

   public OperationStatus Commit()
    {
     Context.SaveChanges();
     }

} 
```

所以现在你甚至可以注入工作单元类/接口。它又包含遵循接口模式的存储库。

Luw 在上下文中实例化。您将通过 Injection 进行，但为了演示

```
 var myLuw = new Luw(MyContext);
 myLuw.RepositoryPatternofEntityT.Get  // or add, remove etc.
 // otehr rpository changes

 myLuw.Commit 
```

Luw 类可以实现 Idisposable。但不要将 Save 放在 dispose 中。应提交更改集时调用 commit。

然后你可以处理掉 Luw 或再次使用它......另一个讨论

# java - 文件的通用路径

> ID：14934205
> 
> 赞同：0
> 
> 时间：2013-02-18T10:33:23.413
> 
> 标签：java, file-io

如何获得文件的通用路径？这样当您将应用程序传输到另一台计算机时，它就会正常工作。

```
File fireFoxWindowsFile = new File("C:\\Documents and Settings\\User\\IdeaProjects\\QAsetup\\src\\main\\java\\com\\yukon\\qasetup\\xmlService\\FirefoxPortable\\FirefoxPortable.exe"); 
```

预期结果：

```
 File fireFoxWindowsFile = new File("FirefoxPortable\FirefoxPortabl.exe") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:54:00.980

资源的路径完全取决于您正在开发的操作系统和应用程序类型。

对于独立应用程序，我们可以使用系统属性来获取分隔符，而不是对其进行硬编码。

```
System.getProperty("file.separator"); 
```

即使这样，这些都是相对路径，需要明确提及驱动器或根等。AFAIK 没有不同操作系统中文件的通用路径的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:42:37.570

特别是提到的情况，还有其他情况，使用标准的java[桌面](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#browse%28java.net.URI%29)

```
URI uri = ...;
if (Desktop.isDesktopSupported()) {
    Desktop.browse(uri);
} 
```

我只是更仔细地阅读了您的问题（=向右滚动），这可能意味着您想要自己的文件分发方式，或在项目中执行子目录可执行文件。

您可以使用项目目录变量在 IDE 中创建 maven 或 ant 目标。

# java - 在 Joda Time 中获取一年中第一周的第一天的日期

> ID：14934210
> 
> 赞同：3
> 
> 时间：2013-02-18T10:33:50.267
> 
> 标签：java, datetime, jodatime

我有一个 Java 日期：tempDate = Sun Jan 01 00:00:00 GMT+01:00 2012。

我想创建一个新的日期，即 tempDate 年第一周的第一天。

那是：

```
 Mon Jan 02 00:00:00 GMT+01:00 2012 
```

当我尝试使用 Joda Time 时：

```
DateTime cal = new DateTime(tempDate).withWeekOfWeekyear(1).
                     withDayOfWeek(DateTimeConstants.MONDAY); 
```

我得到了我想要的，但在前一年：

```
Mon Jan 03 00:00:00 GMT+01:00 2011 
```

如何在 Joda Time 中完成这项工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T14:11:03.133

您必须了解 DateTime 的年份和它的周年份之间的区别。

在[Joda-Time](http://www.joda.org/joda-time/)中，根据[ISO 8601 标准](https://en.wikipedia.org/wiki/ISO_8601)，星期一是一周的第一天。然而，岁月并不总是从星期一开始。根据 ISO 标准，一年的第一周是包含该年第一个星期四的那一周。因此，一年中的某些日子可能会落入上一年或下一年的一周。

在您的示例中，2012 年 1 月 1 日实际上是这样的一天。它属于 2011 年的第 52 周。所以它的年份（2012 年）不同于它的周年（2011 年）。因此，如果您将日期更改为其一周年的第一周，您将获得2011 年第一周的[DateTime](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)。

为了使这项工作始终如一，您只需确保您的一周年份与您的年份相同：

```
DateTime onTheFirstDayOfTheFirstWeek = dateTime.withWeekyear(dateTime.getYear()).withWeekOfWeekyear(1).withDayOfWeek(1); 
```

*顺便说一句，您评论中的解决方法将无法始终如一地工作，特别是当系统时间落在与一周年份不同的年份时，它将失败。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-07T11:54:57.920

鲍莫尔的[答案](https://stackoverflow.com/a/14938277/642706)是正确的，回答了这个问题。

如果您确实想遵循[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)标准定义的[一周](https://en.wikipedia.org/wiki/ISO_8601#Week_dates)和[第一周](https://en.wikipedia.org/wiki/ISO_week_date#First_week)，这里有一些使用[Joda-Time](http://www.joda.org/joda-time/) 2.3 的示例代码。

请注意`withTimeAtStartOfDay`获取当天第一刻的调用。日子并不总是从`00:00:00`时间开始。

```
DateTimeZone timeZone = DateTimeZone.forID( "Europe/Paris" );

DateTime now = new DateTime( timeZone );
DateTime firstWeekStart = now.withWeekOfWeekyear(1).withDayOfWeek( DateTimeConstants.MONDAY ).withTimeAtStartOfDay();
DateTime firstWeekStop = firstWeekStart.plusWeeks( 1 );
Interval firstWeek = new Interval( firstWeekStart, firstWeekStop ); 
```

转储到控制台...</p>

```
System.out.println( "now: " + now );
System.out.println( "firstWeekStart: " + firstWeekStart );
System.out.println( "firstWeekStop: " + firstWeekStop );
System.out.println( "firstWeek: " + firstWeek );
firstWeek: 2013-12-30T00:00:00.000+01:00/2014-01-06T00:00:00.000+01:00 
```

运行时……</p>

```
now: 2014-02-07T12:49:33.623+01:00
firstWeekStart: 2013-12-30T00:00:00.000+01:00
firstWeekStop: 2014-01-06T00:00:00.000+01:00 
```

# php - php 使用 fputcsv 将 htmlcode 片段作为单个字段包含在 CSV 中

> ID：14934212
> 
> 赞同：0
> 
> 时间：2013-02-18T10:33:56.543
> 
> 标签：php, excel, csv, fputcsv

我正在使用 fputcsv() 从数组数组中生成 csv。其中一个字段包含一个 html 代码片段，当我在 Excel 中打开它时会导致问题。

在 Excel 中打开时，它会跨越多个单元格。

请注意，我在 fputcsv 中用作`,`分隔符和`"`封闭元素。

我仍然可以看到 html 字符串在多个单元格中被破坏，这是由于 htmlcontent 中的逗号而发生的。

那么，我怎样才能完全摆脱内嵌的逗号呢？

目前，我确实用空格替换了逗号。但是，当在 MS Excel 中打开时，我仍然看到一个长的 htmlcode（大约 53823 个字符）跨越多个单元格。Excel中单个单元格可以包含的字符数有上限吗？

请注意，当我在 Notepad++ 中打开我的 csv 时，它显示 CSV 格式正确，中间没有任何中断。但是，我的客户使用 MS Excel，很难让他相信 CSV 实际上格式正确。请帮忙。

这是我一直在使用的代码：

```
//escape the newline characters
$template = str_replace(array("\r\n", "\n", "\r", "\t"), '', $template);
$cache = str_replace(array("\r\n", "\n", "\r", "\t"), '', $cache);

$fh = fopen('abc.csv', 'a');
fputcsv($fh,array($template,$cache),',','"'); 
```

并且将`$template`html`$cache`代码片段作为字段值。

另外，我注意到的是，如果我不转义`,`，字符串会跨越多个单元格。为此，我尝试过`str_replace(",","\,",$string)`但没有用。

更新：问题在于引号和逗号都出现在字符串中的情况。例如考虑一个字符串`I have "big" quesiton, that I want to know.`

`"I have "big" quesiton"`进入一个单元格并`"that I want to know."`进入另一个单元格，而不是整个字符串出现在一列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:39:53.887

最好使用 Eli Dickinson 的免费 PHP excel 导出器类，我在开始使用它时重生了，现在在客户端生成和打开文件时没有任何问题。这是链接：http: [//github.com/elidickinson/php-export-data](http://github.com/elidickinson/php-export-data)

# c - sizeof(int[1]) 是什么意思？

> ID：14934214
> 
> 赞同：9
> 
> 时间：2013-02-18T10:34:11.217
> 
> 标签：c, macros, linux-kernel, sizeof

我是 Linux 内核的新手。我正在阅读文件`ioctl.h`，在那里我遇到了一个宏 `_IOC_TYPECHECK(t)`，它看起来像这样：

```
#define _IOC_TYPECHECK(t) \
        ((sizeof(t) == sizeof(t[1]) && \
          sizeof(t) < (1 << _IOC_SIZEBITS)) ? \
          sizeof(t) : __invalid_size_argument_for_IOC) 
```

你能解释一下这段代码吗？在这段代码中，是什么`sizeof(t[1])`意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T10:51:26.480

这是用来检查//宏的第三个参数的有效性`_IOR`，`_IOW`它`_IOWR`应该是一个类型。它检查参数是否实际上是一种类型（而不是变量或数字），否则会导致编译器或链接器错误。

*   如果`t`是类型，则`t[1]`类型为“1 的数组`t`”。此类型与 具有相同的大小`t`，因此`sizeof(t) == sizeof(t[1])`是正确的。

*   如果`t`是数字，`sizeof(t)`将无法编译。

*   如果`t`是一个简单的（非数组）变量，那么`t[1]`将导致编译器错误。

*   如果`t`是数组变量，则为`sizeof(t) == sizeof(t[1])`假，会导致链接器错误（因为`__invalid_size_argument_for_IOC`未定义）。

该表达式`sizeof(t) < (1 << _IOC_SIZEBITS)`检查类型的大小`t`是否不超过允许的最大值`ioctl`，否则会导致相同的链接器错误。

仍然有一些无效的情况不会被这个宏捕获 - 例如，`t`指向指针的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T10:38:58.630

它的含义与 的所有其他用途相同`sizeof`。它计算表达式的大小。

在这种特殊情况下，我怀疑检查是为了确保`t`我从上下文中不知道的某些属性（应该是类型名称，而不是变量）......也许可以将其视为将排除某些类型的指针（需要用于数组索引）。宏旁边的评论说`/* provoke compile error for invalid uses of size argument */`这似乎支持这一理论。

请注意，这`sizeof`是一个运算符，而不是一个函数。不需要括号，除非您想直接计算类型的大小，然后它们是表达式的一部分（它是一个强制转换表达式）。所以这可以写出来`sizeof t == sizeof t[1] && ...`，或者`(sizeof t == sizeof t[1])`为了清楚起见。

这是一种非常好的使用方式，因为它将计算的大小“锁定”到正确的数组，而不是重复`t`. 所以，如果类型发生变化，表达式会自动适应并仍然计算正确的东西。

`sizeof`出于某种原因，许多 C 程序员似乎更喜欢在所有情况下都在参数周围加上括号。

# boost - 打印无序地图

> ID：14934217
> 
> 赞同：0
> 
> 时间：2013-02-18T10:34:16.277
> 
> 标签：boost, unordered-map

我有 unordered_map。在 std::list 中有客户端及其关联用户。我可以打印我的客户，但不知道如何打印其用户列表。

```
mapType clientUserMap;

clientUserMap.insert (mapType::value_type("C1", std::list<std::string> (userlist)));

boost::unordered_map<std::string, std::list<std::string> >
         ::const_iterator it = clientUserMap.find("C1");

 std::cout << it->first << std::endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:46:30.910

这是一个列表，所以遍历列表并打印.. 例如

```
for(std::list<std::string>::const_iterator l_it = begin(it->second); l_it != end(it->second); ++l_it)
  std::cout << *l_it << std::endl; 
```

当然，还有更多奇特的方法可以做到这一点......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:49:25.003

由于您已经在使用 boost，您还可以使用 BOOST_FOREACH 来遍历用户列表。代码将如下所示：

```
#include <boost/foreach.hpp>
...

boost::unordered_map<std::string, std::list<std::string> >
  ::const_iterator it = clientUserMap.find("C1");

std::cout << it->first << std::endl;

BOOST_FOREACH( std::string user, it->second )
{
   std::cout << user << endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:31:42.473

您所要做的就是遍历列表：

```
std::list<string> const &users = it->second;
std::for_each(users.begin(), users.end(), [](string const& user){std::cout << user << std::endl;} 
```

# javascript - 如何在javascript函数中迭代arraylist值？

> ID：14934220
> 
> 赞同：0
> 
> 时间：2013-02-18T10:34:29.007
> 
> 标签：javascript, jsp, arraylist, jstl, jsp-tags

我有两个名为 asclist、desclist 的数组列表，其中包含升序记录和降序记录。在 JSP 中，我可以迭代这两个数组列表值。它工作正常。我的代码如下

```
List <UserInfo> asclist=new ArrayList<UserInfo>();
asclist=(ArrayList)request.getAttribute("ascend");
if(!asclist.isEmpty())
{
    for(UserInfo info: asclist)
    {
        out.print("<td>"+info.getId()+"</td>");
        out.print("<td>"+info.getName()+"</td>");
        out.print("<td>"+info.getAge()+"</td>");
        out.print("<td>"+info.getSalary()+"</td>");
        out.print("<br>");
    }
   }
    List <UserInfo> desclist=new ArrayList<UserInfo>();
desclist=(ArrayList)request.getAttribute("descend");
if(!desclist.isEmpty())
{
    for(UserInfo info: desclist)
    {
        out.print("<td>"+info.getId()+"</td>");
        out.print("<td>"+info.getName()+"</td>");
        out.print("<td>"+info.getAge()+"</td>");
        out.print("<td>"+info.getSalary()+"</td>");
        out.print("<br>");
    }
   }
%> 
```

我需要的是如何使用具有相同按钮的函数在 javascript 中实现此代码。第一次，通过单击按钮，升序应该可以工作，下次如果我单击按钮，降序应该可以工作。我们怎样才能做到这一点。提前致谢..

> 我的 JavaScript 代码是

```
<script>
function Ascend()
{ 
<%
List <UserInfo> alist=new ArrayList<UserInfo>();
alist=(ArrayList)request.getAttribute("ascend");
if(!alist.isEmpty())
{
    for(UserInfo info: alist)
    {
        out.print("<td>"+info.getId()+"</td>");
        out.print("<td>"+info.getName()+"</td>");
        out.print("<td>"+info.getAge()+"</td>");
        out.print("<td>"+info.getSalary()+"</td>");
        out.print("<br>");
    }
    alist.clear();
}
else
{
    out.print("The list is empty");
}
%>

}
</script>
<input type="button" onclick="Ascend()" value="SORT" /> 
```

> 但它不起作用....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:54:24.290

您应该尝试在函数中填充一个 javascript 数组（可能是一个数组数组），然后使用它来设置 html 中的值

```
function Ascend()
{ 
var list = [];
<%
List <UserInfo> alist=new ArrayList<UserInfo>();
alist=(ArrayList)request.getAttribute("ascend");
if(!alist.isEmpty())
{
    for(UserInfo info: alist)
    {
        out.print("list.push([\"" + info.getId() +"\"]);")
    }
    alist.clear();
}
%>
// write javascript code to iterate over 'list' and create html elements on the client side
}
</script> 
```

基本上你需要使用jsp中的代码生成javascript代码

# qml - QML - 通过模型访问 QList 数据

> ID：14934222
> 
> 赞同：1
> 
> 时间：2013-02-18T10:34:34.217
> 
> 标签：qml

我在尝试访问分配给 QML Repeater 模型的 C++ 列表数据时遇到问题。

可以在没有委托人帮助的情况下访问这些数据吗？

例如：C++：

```
QList<MyOwnStruct>  GetListData() // Invokable from qml
{
   QList<MyOwnStruct> infoData
   .... // Appended data 
   return infoData
} 
```

QML：

```
Row {
    Repeater {
        model: GetListData()
        ....
    }
} 
```

在上面的示例中，我能够获得转发器重复的 infoData 的确切计数。但是我无法从 infoData 中获得更多信息，比如每个单独的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:42:38.613

如果要访问结构的元素，则需要将 MyOwnStruct 转换为 QML 可以理解的内容，例如[QVariantMap](http://qt-project.org/doc/qt-4.8/qvariant.html)。

所以你可以做这样的事情。

```
QVariantMap MyClass::GetData(int index) // Invokable
{
   QVariantMap var;

   MyOwnStruct infoData = infoListData[index];

   // Appended data 
    var.insert("elem_a", infoData.element_a);
    var.insert("elem_b", infoData.element_b);

    return var;
} 
```

然后在 QML 中，您可以访问类似于

```
var data_at_index = getData(index)
var a = data_at_index["elem_a"] 
```

您的中继器模型可以只是一个返回列表计数的 Q_PROPERTY 整数。

# vb.net - 如何在面板 vb.net 上添加 DatagridView 控件数组？

> ID：14934224
> 
> 赞同：0
> 
> 时间：2013-02-18T10:34:39.850
> 
> 标签：vb.net

我必须`Datagridview`在运行时 1 将控件添加到面板上另一个下方。我怎样才能做到这一点，以便能够在另一个下方添加控件位置 1，以及如何处理单击事件、绘制事件等。对于所有数据网格视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:53:43.280

只需执行以下操作：

```
Dim lastCtrl As Control
Panel1.Add(AllDataGrids(0))

For i As Integer = 1 to AllDataGrids.Count - 1
    Dim dgv As DataGridView = AllDataGrids(i)

    lastCtrl = Panel1.Controls(Panel1.Controls.Count - 1)
    Panel1.Add(dgv)

    dgv.Top = lastCtrl.Top + LastCtrl.Height + 5
Next 
```

想法是在最后一个控件之后添加每个控件，因此在循环中您以所需的方式获取最后一个控件，然后在底部添加新控件。为了获得事件，您必须`DataGridView`在循环内手动添加它们：

```
AddHandler dgv.CellClick, AddressOf CellClickMethod 
```

# ios - 条件检查帮助 xcode

> ID：14934226
> 
> 赞同：3
> 
> 时间：2013-02-18T10:34:46.260
> 
> 标签：ios, objective-c, xcode, uilabel

在 viewDidLoad 我在标签上显示一个文本

```
[label setText:@"hello"]; 
```

在某个事件之后，我将其隐藏起来。现在我想要一个条件来检查

```
if([label.text isEqualToString:@"hello"] is visible on screen for >= 30 seconds)
{
//some code......
} 
```

请帮我做这个检查

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:39:14.870

你在寻找这样的东西吗？

```
 {
     //your method.
     [label setText:@"hello"];
     [self performSelector:@selector(afterDelay) withObject:nil afterDelay:30];
    }

   -(void)afterDelay {
    [label setText:@""];
    } 
```

以及您可以使用的条件：

```
 if(label.text.length == 0) {
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:40:17.440

要了解您的文本何时在屏幕上显示 30 秒，您需要使用计时器。IO 的计时器类是`NSTimer`. 查看[Apple 开发中心](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/doc/uid/TP40003747)了解更多信息。

您可能希望使用该`scheduleTimerWithInterval:target:selector:repeats`方法并将其设置为不重复，并将时间间隔设置为 30 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:40:32.103

试试这个代码：

```
 if ([label.text isEqualToString:@"hello"]) {
            NSTimer * tm = [NSTimer scheduledTimerWithTimeInterval:30 target:self selector:@selector(hideLabel) userInfo:nil repeats:NO];
        }

    -(void)hideLabel {
          self.label.hidden = YES;
    } 
```

# android - 如何使用线程在画布上创建图像数组？

> ID：14934228
> 
> 赞同：0
> 
> 时间：2013-02-18T10:34:50.753
> 
> 标签：android, android-canvas, android-animation

我正在开发一个使用不同图像的游戏。我想将该图像设置为背景。并希望在一段时间后更改该图像。看到您无法删除单个图像，我想清除画布并从图像数组中重新绘制图像。我的问题是如何创建一个可从 onDraw 方法访问的数组？以及如何在线程中调用该 onDraw 方法以便更改背景。?

线程类的代码：

```
private class CanvasThread extends Thread {
        private SurfaceHolder surfaceHolder;
        private boolean isRun = false;

        public CanvasThread(SurfaceHolder holder) {
            this.surfaceHolder = holder;
        }

        public void setRunning(boolean run) {
            this.isRun = run;
        }

        @Override
        public void run() {
            // TODO Auto-generated method stub
            Canvas c;

            while (isRun) {
                c = null;
                try {
                    c = this.surfaceHolder.lockCanvas(null);
                    synchronized (this.surfaceHolder) {
                        DrawCanvas.this.onDraw(c);
                        // postInvalidate();

                    }
                } finally {
                    surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }

public class DrawCanvas extends SurfaceView implements Callback {
    private CanvasThread canvasThread;
    private int cnt = 0;
    private int[] drawable = { R.drawable.freevector_grass_sky1,
            R.drawable.freevector_grass_sky2, R.drawable.freevector_grass_sky3,
            R.drawable.freevector_grass_sky4, R.drawable.freevector_grass_sky5,
            R.drawable.freevector_grass_sky6_5,
            R.drawable.freevector_grass_sky6, R.drawable.freevector_grass_sky7,
            R.drawable.freevector_grass_sky8, R.drawable.freevector_grass_sky9,
            R.drawable.freevector_grass_sky10 };

    public DrawCanvas(Context context) {
        super(context);
        // TODO Auto-generated constructor stub 
    }

    public DrawCanvas(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub

        this.getHolder().addCallback(this);
        this.canvasThread = new CanvasThread(getHolder());
        this.setFocusable(true);
    }

    public DrawCanvas(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub

    }

    public void startDrawImage() {
        canvasThread.setRunning(true);
        canvasThread.start();
    }

    @Override
    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceCreated(SurfaceHolder arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder arg0) {
        // TODO Auto-generated method stub
        boolean retry = true;
        canvasThread.setRunning(false);
        while (retry) {
            try {
                canvasThread.join();
                retry = false;
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stubfor

        Bitmap sweet = BitmapFactory.decodeResource(getResources(),
                drawable[cnt]);
        canvas.drawColor(color.black);
        canvas.drawBitmap(sweet, 0, 0, null);

    } 
```

在我的 MainActivity 代码中：

```
if(!isDrawn) {
                DrawCanvas mycanvas = (DrawCanvas)findViewById(R.id.SurfaceView01);
                mycanvas.startDrawImage();
                isDrawn = true;
            } 
```

# facebook - 2013 年 2 月重大变更 + 迁移面板

> ID：14934236
> 
> 赞同：1
> 
> 时间：2013-02-18T10:35:08.817
> 
> 标签：facebook, migration

为什么 2013 年 2 月的重大更改未出现在我的迁移面板上？我的应用程序仪表板上有一条警报，告诉我应该更新我的迁移状态，但到目前为止我还做不到。我相信这个问题会影响我的应用程序可见性，因为我在 Facebook 搜索中找不到它。预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:47:32.390

我遇到了同样的问题，但根据这个帖子： [Facebook 2013 年 2 月的重大变化 - 如何摆脱 App 中的“立即修复”消息？](http://facebook.stackoverflow.com/questions/14820105/facebook-february-2013-breaking-changes-how-to-get-rid-of-fix-now-message-in)

...该问题已作为错误报告给 facebook，并且他们正在对其进行调查。

我希望这有帮助。

# c++ - 捕获有线耳机按钮按下事件 Pocket PC PDA

> ID：14934238
> 
> 赞同：1
> 
> 时间：2013-02-18T10:35:23.097
> 
> 标签：c++, pocketpc, headset

当有线耳机连接到 Windows Mobile 手机时，我有一个关于有线耳机按钮的问题。

Dialer 应用程序如何知道在这种情况下按下了耳机按钮？

如何将有线耳机按钮按下事件接收到我的袖珍电脑 C++ Windows 移动应用程序中？

# python - 如何在 Python 模块中获取方法名称和文档字符串的完整列表？

> ID：14934239
> 
> 赞同：0
> 
> 时间：2013-02-18T10:35:24.653
> 
> 标签：python

如何在 Python 模块中获取方法名称/文档字符串，以便我可以搜索我想要的任何内容是否已经存在？我应该得到所有方法名称和文档字符串。我正在尝试在我们的项目中实现 DRY 方法，因此如果我们可以拥有 API 的可浏览列表，我们将很容易搜索现有函数是否存在或至少某些函数执行类似工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:48:40.000

如果模块/类/方法用文档字符串记录，您可以按`__doc__`属性检索此类文档。

如果您想知道给定对象（模块、类）有哪些属性可用，可以使用`dir()`内置函数。

模块示例`gnupg`（不是内置的，而是开源的）：

```
>>> import gnupg
>>> dir(gnupg)
['Crypt', 'DeleteResult', 'GPG', 'GenKey', ...
>>> gnupg.Crypt.__doc__
'Handle status messages for --encrypt and --decrypt'
>>> 
```

使用`dir()`，`__doc__`您可以将这些信息导出到 Excel 可以使用的 CSV 文件。

# ruby - Rails 获取 radio_button 值

> ID：14934240
> 
> 赞同：1
> 
> 时间：2013-02-18T10:35:27.287
> 
> 标签：ruby, ruby-on-rails-3, checkbox, ruby-on-rails-4

我正在尝试从表单中获取单选按钮的值：

```
<%= form_for Text.new, remote: true do |f| %>
<%= f.radio_button :is_code, false %>
<%= f.text_area(:content, :size => '50x10', :class=>'input_text')%>
<%= f.submit "Send", :class=>'input_send' %>
<% end %> 
```

现在，当我检查控制器中的参数时：

```
 def create
    response.headers["Content-Type"] = "text/javascript"
    attributes = params.require(:text).permit(:content, :name, :is_code)
    attributes[:name]=current_user.name
    Rails.logger.info attributes[:is_code]
    attributes[:content]='code was given' if attributes[:is_code]==true
    @message = Text.create(attributes)
  end 
```

现在，如果未单击单选按钮，我得到的值为空。（我指定了一个默认值，为什么这给我 null？）

如果单击单选按钮，Rails 记录器会给我错误。

它在 null/false 之间切换，而不是在 false/true 之间切换。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:18:07.460

正如文档所述，第三个参数是 HTML 对象的值。[http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-radio_button](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-radio_button)

因此，我相信您必须将其设置为 true，如下所示：

```
<%= f.radio_button :is_code, true %> 
```

然后，如果没有检查，你会得到这个`false/null`值，而不是检查收音机，你会得到这个`true`值。

# c# - 在 Http Get 中获取每个响应

> ID：14934241
> 
> 赞同：0
> 
> 时间：2013-02-18T10:35:28.667
> 
> 标签：c#, .net, http, webclient

我正在使用 WebClient 来获取和发布请求。当我向这样的数据发送http请求时`GET`：

```
WebClient client = new WebClient();  
client.DownloadStringAsync(new Uri(requestUri), "GET"); 
```

我最多可以接收 1 分钟的数据。我可以在 20 秒内收到一些数据，在 30 秒内和完成 1 分钟后收到一些其他数据。我想知道何时收到数据。我在 Web 客户端中是否有任何事件来获取我收到的数据字节.. 任何人都可以帮我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:30:09.607

[`WebClient.DownloadProgressChanged`](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadprogresschanged.aspx)每当异步方法之一接收到数据时，都会引发该事件。但是，没有办法确切地确定读取了哪些数据，因此听起来这不会解决您的问题。

如果您需要完全控制请求，您将不得不放弃`WebClient`并直接使用较低级别的[`WebRequest`](http://msdn.microsoft.com/en-us/library/5t9y35bd.aspx)类。具体来说，您想发送 a`WebRequest`以获取 a`WebResponse`并调用`GetResponseStream`它；返回的流公开了异步功能，可让您做任何您需要的事情。缺点当然是您必须手动编排所有内容，这将远远超过两行代码。

在 MSDN 文档中有一个如何执行此操作的示例[`WebRequest.BeginGetResponse`](http://msdn.microsoft.com/en-us/library/system.net.webrequest.begingetresponse.aspx)。

# haskell - OCaml 中与 Haskell 的类型类最接近的是什么？

> ID：14934242
> 
> 赞同：51
> 
> 时间：2013-02-18T10:35:32.457
> 
> 标签：haskell, polymorphism, ocaml, typeclass

有哪些方法可以完成 Haskell 的类型类在 OCaml 中的功能？基本上，我想写一个多态函数而不写太多代码。进行多态的典型方法是提供一个额外的参数，告诉函数它当前正在处理什么类型。例如，假设我想对一个整数列表进行排序，我必须向函数传递一个额外的比较器。

```
type comparison = Lesser | Equal | Greater

my_sort : (a' -> a' -> comparison) -> 'a list -> 'a list 
```

有没有办法告诉 OCaml 我的类型是可比较的，而无需为我想要排序的每种类型编写比较器函数？这意味着我的排序函数看起来就像这样：

```
my_sort : 'a list -> 'a list 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-18T11:09:43.283

这真的取决于你想要实现什么。

如果您对 OCaml 多态比较函数（它不适用于循环和函数值）感到满意，您可以简单地编写：

```
let my_sort l = List.sort Pervasives.compare l 
```

模仿类型类的更通用的方法是使用仿函数：

```
module type COMPARABLE = sig
  type t
  val compare: t -> t -> int
end

module MySort (C: COMPARABLE) = struct
  let sort l = List.sort C.compare l
end

(* You can now use instantiate the functor *)
module IntAscending = struct
  type t = int
  let compare = (-)
end
module IntDescending = struct
  type t = int
  let compare x y = y - x (* Reverse order *)
end

module SortAsc = MySort(IntAscending)
module SortDesc = MySort(IntDescending) 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-18T12:03:58.537

Derek Dreyer、Robert Harper 和 Manuel MT Chakravarty在“[模块化类型类](http://www.cse.unsw.edu.au/~chak/papers/DHC07.html)”中对此进行了详细解释。在第 34 届 ACM SIGPLAN - SIGACT 编程语言原理研讨会论文集上，ACM 出版社，2007 年。摘自：

> ML 模块和 Haskell 类型类已被证明是用于程序结构的高效工具。模块强调程序组件的显式配置和数据抽象的使用。类型类强调隐式程序构造和即席多态性。在本文中，我们通过将类型类视为一种特定的模块使用模式，展示了如何在显式类型化模块语言的框架内支持类型类编程的隐式类型化风格。此视图提供了模块和类型类的和谐集成，其中类型类特征（例如类层次结构和相关类型）是作为现有模块语言结构（例如模块层次结构和类型组件）的使用而自然出现的。此外，程序员可以明确控制在给定范围内哪些类型类实例可供类型推断使用。我们将我们的方法形式化为 Harper-Stone 风格的细化关系，并提供了一种合理的类型推理算法作为实现指南。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-18T20:34:19.230

我遇到了一篇非常好的文章，展示了 Haskell 中的类型和类型类以及 OCaml 中的模块和模块类型之间的转换：http: [//conway.rutgers.edu/~ccshan/wiki/blog/posts/Translations/](http://conway.rutgers.edu/~ccshan/wiki/blog/posts/Translations/)

基本上，正如@Thomas 所示，Haskell 中的类型类成为 OCaml 中的模块类型，具有一个类型（实现类型类的类型）和一堆使用该类型的值。

然后，对应于 Haskell 中类型类的“实例”，您在 OCaml 中有一个实现模块类型的模块，类型是实例的类型，值是类型类中值的实现.

然后，每次在 Haskell 中有一个“使用”受该类型类约束的类型的函数时，都需要将该函数包装在 OCaml 的模块中。这个模块（实际上是一个仿函数）将接受一个参数模块，它对应于我们正在使用的类型类的实例。

每次使用该函数时，您都需要首先使用该函子创建一个适当的模块，并将类型类的正确实例传递给它。

你会注意到 Haskell 和 OCaml 的一个很大的不同之处在于，在 Haskell 中，当你使用最后一个函数时，编译器会为你*推断*出正确的类型类实例；而使用 OCaml 的方式，用户必须明确指定要使用的实例。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-18T19:47:49.537

尽管不像模块那样接近 Haskell，但对象类层次结构上的[类类型并没有清楚地解释。](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual005.html#toc24)

请参阅[类类型定义](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual017.html#toc60)。

更新：工作示例：

```
type comparison = Lesser | Equal | Greater

class type comparable = object ('a)
  method compareTo: 'a -> comparison
end ;;

class type textualizable = object
  method toString: string
end ;;

(* this corresponds in Haskell to a multiparameter type class *)
class type ['b] printable = object ('a)
  constraint 'b = #textualizable         
  method printWithPrefix: 'b -> unit
end ;;

class type ['b] comparableAndPrintable = object ('a)
  inherit comparable
  inherit ['b] printable
end ;;

(* -------------- *)

class textile (str_init:string): textualizable = object
   val str = str_init
   method toString = str
end ;;

class comparableAndPrintableImpl1 (x_init: int) = object (this:'a)

  constraint 'a = 'b #comparableAndPrintable    (* interface implementation requirement *)
  constraint 'b = textualizable (* concrete type parameter *)

  val x = x_init
  method getx = x
  method compareTo (that:'a) = let r = this#getx - that#getx in
                               match r with
                               | 0 -> Equal
                               | _ when r < 0 -> Lesser
                               | _ -> Greater

  method printWithPrefix (pref: 'b)  = Printf.printf "%s %d\n" pref#toString x
end ;;

let boxSort (pivot: #comparable) (lows, equals, highs) (x: #comparable) =
      match x#compareTo pivot with
                    | Lesser -> x :: lows, equals, highs
                    | Equal -> lows, x :: equals, highs
                    | Greater -> lows, equals, x :: highs
      ;;

let rec qsort (li : #comparable list) =
      match li with
          [] | [_] -> li
          | [a;b] -> (match a#compareTo b with
                     Lesser | Equal -> [a;b]
                     | Greater -> [b;a]
                     )
          | x :: xs -> let (lows, equals, highs) = List.fold_left (boxSort x) ([], [], []) xs in
                       qsort lows @ (x :: equals) @ qsort highs
  ;;

let print_myList (prefix: 'a) (li: 'a #printable list) =
    let print_it it = it#printWithPrefix prefix in
    print_endline "\nlist: " ;
    List.iter print_it li
    ;;

let intlist (lfrom: int) (lto: int) =
   let open BatLazyList in
   to_list (range lfrom lto)              (* lazy range generator from BatLazyList *)
   ;;

let myComparableAndPrintableList =
  List.map (new comparableAndPrintableImpl1) (List.rev (intlist 1 5))
  ;;

let myprefix = new textile "x ="

let sortAndPrint (li: 'a #comparableAndPrintable list) =
   let sorted = qsort li in
   print_myList myprefix li ;
   print_myList myprefix sorted
   ;;

sortAndPrint myComparableAndPrintableList ;; 
```

编译和链接：

```
ocamlfind ocamlc -package batteries -linkpkg test.ml -o test 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-20T20:19:02.653

通常，由于 OCaml 不支持隐式参数，因此您需要某种字典参数来显式传递类型类实例。这可以根据多态记录、一流模块或对象来实现。我有一个示例项目显示了使用模块的方法：[https ://github.com/hongchangwu/ocaml-type-classes](https://github.com/hongchangwu/ocaml-type-classes)

# android - MapView 中的 BalloonView 不隐藏

> ID：14934248
> 
> 赞同：0
> 
> 时间：2013-02-18T10:35:46.650
> 
> 标签：android, android-mapview

我已经搜索了很长时间并尝试了与此相关的所有内容，但我没有成功。欢迎任何相关答案。

我在 BalloonItemizedOverlay 中使用了以下代码

```
protected void hideBalloon() 
    {
        if (balloonView != null) 
        {
            balloonView.setVisibility(View.GONE);
        }
    }

    private void hideOtherBalloons(List<Overlay> overlays) 
    {   
        for (Overlay overlay : overlays) 
        {
            if (overlay instanceof BalloonItemizedOverlay<?> && overlay != this) 
            {
                ((BalloonItemizedOverlay<?>) overlay).hideBalloon();
            }
        }
    } 
```

每当我设置地图视图时，我都会打电话

```
mapView.getOverlays().clear();
mapView.invalidate(); 
```

但是我第一次点击markerpin，我正确地得到了balloonView。当我返回列表并再次使用不同的标记值来到同一个地图视图时，我打开了 balloonView，当我再次点击标记时，我得到了正确的值，但与旧的 BalloonView 重叠。

如何在将新叠加层设置为 mapView 之前隐藏所有的 balloonView。我想为同一 Activity 中不同位置的不同值重用相同的 mapView 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:00:26.913

**我已经按照下面的方式完成了它并且它的工作成功。您必须根据您的要求编辑此代码：-**

```
 public class CustomItemizedOverlay extends ItemizedOverlay<CustomOverlayItem>{

    private ArrayList<CustomOverlayItem> mOverlays = new ArrayList<CustomOverlayItem>();

    public void addDeleteMarker{

    CustomOverlayItem overlaySosItem;

    if(mOverlays.size()!=0){

    for(i=0;i<mOverlays.size();i++){

    //---------To remove (Edit index position according to your logic)----------
    mOverlays.remove(i);

    //---------To Add Overlay-----------

    GeoPoint geoPoint = new GeoPoint((int)(yourlatitude *1e6),(int)(yourlongitude*1e6));
    overlaySosItem = new CustomOverlayItem(geoPoint, "", "");

     mOverlays.add(overlaySosItem);
    }
    }
    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:09:22.660

你只需要做一个好的谷歌搜索。

这是一个彻底的演练：

[https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)

# java - 如何将字符串从首选项转换回数组

> ID：14934250
> 
> 赞同：0
> 
> 时间：2013-02-18T10:35:54.747
> 
> 标签：java, android, arrays, string, android-preferences

`InetAddress.getAllByName(host);`以以下格式返回我的数组

```
www.google.com/74.233.233.22
www.google.com/74.233.233.21
www.google.com/74.233.233.23 
```

我将上述结果转换为字符串并存储在 Android Shared Preference 中

```
String all = inetAddress[i].toString(); 
```

现在，当我从首选项中检索回来时，它会返回我`String`，这很明显，但我希望它采用数组格式，例如`inetAddress[i]`.

```
www.google.com/74.233.233.22 
www.google.com/74.233.233.21
www.google.com/74.233.233.23 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T18:24:28.000

我只建议这样做，因为您正在保存网络操作的结果。显然这很慢，你不想继续重复它。

Java 数组是实现 Serializable 的对象。将数组写入文件然后稍后将其从文件中解组是非常简单的。然后，您的 Preference 将是一个字符串，其中包含数据序列化的文件的名称。

在此处查看代码的答案：

[Android - 具有可序列化对象的 SharedPreferences](https://stackoverflow.com/questions/5816695/android-sharedpreferences-with-serializable-object)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:38:39.843

您可以使用从字符串创建 InetAddress`InetAddress.getByName("yourstring")`

循环遍历您的字符串并将它们转换为 InetAddresses -

```
String[] addresses = getStringArrayOfAddresses();
InetAddress[] inets = new InetAddress[addresses.length];
for ( int i = 0; i < addresses.length; i++ ) {
    inets[i] = InetAddress.getByName(addresses[i]);
} 
```

如果您的字符串是一个长字符串，您可以使用`split()`String 方法拆分此字符串。

```
String addresses = "www.google.com/74.233.233.22 www.google.com/74.233.233.21";
String[] addrSplit = addresses.split(" ");
System.out.println(addrSplit[0]); // will give www.google.com/74.233.233.22 
```

# php - PHP 和 shared_memory：如何检测共享内存段中的“可用空间”？

> ID：14934255
> 
> 赞同：2
> 
> 时间：2013-02-18T10:36:14.087
> 
> 标签：php, shared-memory

我为我的应用程序创建了一个 1MB 的共享内存空间。

每个用户都是一个且只有一个数组，其中包含一些信息，可以从大约 10 个并发进程中访问，并且在其监视器上，用户可以看到每个进程的进度。

Evey 进程从客户的数组中清除其拥有的值。

但是..在不断增长的情况下... 100 万用户，每一个 1 个空数组“在每一刻”都会给我这个

> shm_put_var(): 没有足够的共享内存

...我如何检测共享区域的大小何时“低”？所以我可以种植它

编辑：我正在使用 shm_ 函数（例如[shm_get_var()](http://php.net/manual/en/function.shm-get-var.php)）

在这组函数中，没有什么能告诉我在内存中的数据损坏之前空间不足......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-26T11:42:58.887

也许你可以估计你缓存的对象的大小并自己跟踪剩余空间，通过使用如下的实用函数：

```
public static function getSize($object){
    return self::formatBytes(strlen(serialize($object)));
}

public static function formatBytes($bytes, $precision=2){
    $units = array('B', 'KB', 'MB', 'GB', 'TB');
    $bytes = max($bytes, 0);
    $pow = floor(($bytes ? log($bytes) : 0) / log(1024));
    $pow = min($pow, count($units) - 1);    
    $bytes /= pow(1024, $pow);
    return round($bytes, $precision).' '.$units[$pow];
} 
```

这可能并不总是 100% 准确，但应该接近真实对象的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:46:07.123

您可以使用 shell 命令，但这取决于您的托管服务允许的内容，如果您这样做的话。

使用 shell_exec() 您可以调用系统函数来读取操作系统的任务管理器。

例如，对于 OSX，您可以使用“top”命令行函数实时检索空闲内存。最简单的可能是转储整个活动表并使用正则表达式来获取 PHP 进程。

# javascript - 车把模板使用每个

> ID：14934260
> 
> 赞同：2
> 
> 时间：2013-02-18T10:36:21.683
> 
> 标签：javascript, handlebars.js

我只想显示 id="firstTr-1" 的第一个 tr，但它应该从同一个对象获取数据，其他 tr 应该有除第一个之外的数据。我应该添加任何 registryhelper 还是他们的内置帮助方法！我查看了文档，但无法弄清楚。

模板：

```
 <script id="firsttemp" type="text/x-handlebars-template">
        <tr id="firstTr-1">

        <td class="tableFirstCol"><input type="checkbox" class="check" id="childcheck" /></td>
        <td class="tableFirstCol"><input type="checkbox" class="star" id="childstar" /></td>
        <td class="tableFirstCol"><input type="checkbox" class="alarm" id="childalarm" /></td>
        <td class="tableFirstCol">Hero Honda<span>Hero Honda</span></td>

        </tr>
        {{#each objects}}
        <tr>

        <td class="tableFirstCol"><input type="checkbox" class="check" id="childcheck" /></td>
        <td class="tableFirstCol"><input type="checkbox" class="star" id="childstar" /></td>
        <td class="tableFirstCol"><input type="checkbox" class="alarm" id="childalarm" /></td>
        <td class="tableFirstCol">{{name}}<span>{{name}}</span></td>

        </tr>{{/each}}
</script> 
```

杰森：

```
var company= [

        {
        "name": "Hero Honda",
        "lastprice": 310.2,
        "dayschange": 20.1,
        "dayshigh": 220.9,
        "volume": 140.3,
        "52weekhigh": 200.3,
        "name2": "herohonda",
        "dataset": [1200,3000,3200],
        "lastprice2": "1:10pm",
        "dayschange2": "8%",
        "dayshigh2": "1.5%",
        "volume2": "1:10 Pm",
        "52weekhigh2": "1:10 Pm"
        },
        {
        "name": "Hero Honda",
        "lastprice": 310.2,
        "dayschange": 20.1,
        "dayshigh": 220.9,
        "volume": 140.3,
        "52weekhigh": 200.3,
        "name2": "herohonda",
        "dataset": [3200,3500,5000],
        "lastprice2": "1:10pm",
        "dayschange2": "8%",
        "dayshigh2": "1.5%",
        "volume2": "1:10 Pm",
        "52weekhigh2": "1:10 Pm"
        }] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:38:28.113

我认为你把事情复杂化了。Handlebars 更喜欢在 Handlebars 看到数据之前将逻辑应用到数据。因此，与其乱用可能只会在一个地方使用的自定义助手，不如更改您的数据并用布尔标志标记第一个，以便您可以`{{#if _first}}`在模板中进行简单的检查。

模板如下所示：

```
<script id="firsttemp" type="text/x-handlebars-template">
    {{#each objects}}
        <tr{{#if _first}} id="firstTr-1"{{/if}}>
            <!--...-->
        </tr>
    {{/each}}
</script> 
```

你可以`_first`像这样设置标志：

```
company[0]._first = true; 
```

演示：http: [//jsfiddle.net/ambiguous/3Cq9K/](http://jsfiddle.net/ambiguous/3Cq9K/)

* * *

一旦你解决了这个问题，你手上就会遇到另一个问题：你正在复制`id`复选框上的属性，但[`id`属性必须是唯一的](http://www.w3.org/TR/html-markup/global-attributes.html#common.attrs.id)：

> 文档中**不能**有多个元素具有相同的`id`值。

如果您想避免各种奇怪和令人困惑的问题，您将需要在每个复选框上使用唯一`id`的 s。

# asp.net - 水晶报表在共享服务器中不起作用

> ID：14934261
> 
> 赞同：1
> 
> 时间：2013-02-18T10:36:24.027
> 
> 标签：asp.net, web-applications, configuration, shared-hosting, crystal-reports-2008

我正在尝试将我的网站托管在共享服务器中。但是共享服务器没有水晶报表在服务器中运行时环境。

我的问题：是否有任何替代解决方案来解决该问题？

# jquery - jQuery隐藏不起作用

> ID：14934262
> 
> 赞同：1
> 
> 时间：2013-02-18T10:36:28.377
> 
> 标签：jquery, asp.net, asp.net-mvc

我有这段代码在表 mvc (jquery-1.7.1) 中添加行

```
 <div id="model-form">    
    @Html.Partial("_FormXXX", Model)    
  </div> 
```

```
$(document).ready(function () {
    $("#button-aggiungi-riga").click(function () {
        $.post("mypage", $("form").serialize(), function (data) {
            $("#model-form").html(data);
        });

        ShowHideRows();
        return false;
    });

    $(document).on("click", ".rimuovi-riga", function () {
        // set true in hidden field to set removed
        $(this).next().val("True");

        ShowHideRows();
        return false;
    });

    ShowHideRows();
});

function ShowHideRows() {
  $(".riga").each(function () { //loop over each row

    if ($(this).find("input[id$=__Removed]").val() == "True") {
      $(this).hide(); 
    }
    else {
      $(this).show();
    }

  });
} 
```

在 asp.net mvc 部分视图中，我有以下代码

```
<tr class="riga">
   <td>
    ...
   </td>
   <td>
      <input class="rimuovi-riga" type="button" value="-" />
      @Html.HiddenFor(m => m.Removed)
   </td>
</tr> 
```

该函数`ShowHideRows`是从其他函数（例如`DeleteRow`）调用的，我知道它可以工作。当我从 调用它时`$("#button-aggiungi-riga").click`，它不起作用。我在firebug中调试了它，发现和`val()`值是正确的。它显示所有行。（我没有得到`Style=display:hidden`）。

# java - 使用 liferay 内部表映射休眠对象 - 多对多关系

> ID：14934265
> 
> 赞同：1
> 
> 时间：2013-02-18T10:36:47.313
> 
> 标签：java, hibernate, liferay, hibernate-mapping, liferay-6

我想知道 - 如果可能的话 - 我如何将休眠对象模型映射到内部 liferay 表“user_”。

我的休眠对象模型是：

```
@Entity
@Table(name = "imageviewer_crreviewprotocol")
public class CRReviewProtocol implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue
@Column(name = "RevProtId")
private Long revProtId;

@Column(name = "RevProtDescription")
private String RevProtDescription;

@ManyToMany(cascade = {CascadeType.ALL})
@JoinTable(name="imageviewer_revprot_features", 
joinColumns={@JoinColumn(name="RevProtId")}, 
inverseJoinColumns={@JoinColumn(name="VarId")})
private Set<CRVariable> crvariables = new HashSet<CRVariable>();

@ManyToMany(cascade = {CascadeType.ALL})
@JoinTable(name="imageviewer_revprot_patients", 
joinColumns={@JoinColumn(name="RevProtId")}, 
inverseJoinColumns={@JoinColumn(name="ImPatientId")})
private Set<CRImageData> crimagedata = new HashSet<CRImageData>(); 
```

它为与其他两个实体的 MN 关系构建了一个主表“imageviewer_crreviewprotocol”和另外两个中间表。

我想要另一个中间 MN 表来存储内部（liferay）userId 和 RevProtId。但我将如何映射这个？我试过这样的代码：

```
@ManyToMany(cascade = {CascadeType.ALL})
@JoinTable(name="imageviewer_revprot_reviewers", 
joinColumns={@JoinColumn(name="RevProtId")}, 
inverseJoinColumns={@JoinColumn(name="ReviewerId")})
//private Set<BigInteger> userId = new HashSet<BigInteger>(); 
//private Set<User> user = new HashSet<User>(); 
```

但显然我错过了一些东西！

有相关经验的人吗？

# cmd - 为什么在批处理脚本执行期间删除的文件会神奇地重新出现？

> ID：14934266
> 
> 赞同：1
> 
> 时间：2013-02-18T10:36:53.260
> 
> 标签：cmd, cleartool

`cleartool`我有一个通过命令创建文件的批处理脚本。基本上，ClearCase 活动信息被读取到文件并进行分析。分析后，文件被删除。一切都很好。

稍后在脚本中调用 FTP 命令（使用 PSFTP）来删除 FTP 服务器上的文件。这个命令产生输出，输出写在哪里？当然是创建和删除的文件！我不知道为什么。我什至试图通过`>nul 2>nul`在末尾添加来吞噬 FTP 调用的输出。所有这一切都是恢复已删除的文件，但这次它不附加任何内容。就好像它从未被删除一样。更重要的是，该脚本以此为契机，向文件中附加了很多信息。

我什至尝试在脚本末尾手动删除文件和文件夹，但它都保留了（即使带有`/f`标志）。

任何想法将不胜感激！也许有一种 ot IO 流保持打开状态或 CMD 等价物是什么......

感谢你并致以真诚的问候，

安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:48:04.330

只要您的脚本不启动 cleartool 会话，而是执行一系列 cleartool 命令：

```
cleartool command1
cleartool command2
... 
```

您应该能够在文件中重定向这些命令的输出/stderr，该文件应该独立于任何未来的 sftp 命令。

# php - 如何从 URL 中检索值？

> ID：14934271
> 
> 赞同：0
> 
> 时间：2013-02-18T10:37:05.400
> 
> 标签：php, mysql, zend-framework, url

**我的表格编辑：**

```
$params = array (
    'host' => 'localhost',
    'username' => 'root',
    'password' => '',
    'dbname' => 'my_address_book'
);
$db = Zend_Db::factory('PDO_MYSQL', $params);

$stmt = $db->query('SELECT * FROM user WHERE userName LIKE ?', $name2.'%');

while ($row = $stmt->fetch())
{
    $flag1 = 1;
    $id = $row['userId'];

    echo '<table width="300px">';
    echo '
        <tr>
            <th align="left">Name</th>
            <td>:</td>
            <td align="left">'.$row["userName"].'</td>
            <td><a href ="Edit?id ="'.$id.'">Edit</a></td>
        </tr>
    ';
    echo '
        <tr>
            <th align="left">Address1</th>
            <td>:</td>
            <td align="left">'.$row["addressLine1"].'</td>
            <td><a href="Delete?id="'.$row['userId'].'">Delete</a></td>
        </tr>
    ';
    echo '</table>';
}flag1 = 1;

$id = $row['userId'];
echo '<table width="300px">';
echo '
    <tr>
        <th align="left">Name</th>
        <td>:</td>
        <td align="left">'.$row["userName"].'</td>
        <td><a href ="Edit?id ="'.$id.'">Edit</a></td>
    </tr>
';
echo '
    <tr>
        <th align="left">Address1</th>
        <td>:</td>
        <td align="left">'.$row["addressLine1"].'</td>
        <td><a href ="Delete?id="'.$row['userId'].'">Delete </a></td>
    </tr>';
echo '</table>'; 
```

**在我的编辑控制器中：**

```
if ($this->getRequest()->isPost('$id')){
    $form = new Application_Form_Edit1();
    $this->view->form = $form;  
} 
```

但它永远不会传递给“Edit1”表单。
我对 Zend 真的很陌生。我究竟做错了什么？
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:04:37.730

尝试`$this->getRequest()->getParam('id')`代替`$this->getRequest()->isPost('id')`.

```
if (!empty($this->getRequest()->getParam('id'))){
    $form = new Application_Form_Edit1();
    $this->view->form = $form;  
} 
```

旁注：尝试通过 MVC 标准并将您的 html 推送到视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T14:16:27.877

```
if ($this->_request->isPost()) {
      $data = $this->_request->getPost(); //All your data in $data array. print_r($data) it & you will know.
      $id   = (int)$this->_getParam('id'); // get a variable with name = id
} 
```

# c# - 取消/编组包含结构数组的嵌套结构

> ID：14934274
> 
> 赞同：2
> 
> 时间：2013-02-18T10:37:13.073
> 
> 标签：c#, binary, marshalling, binaryfiles, unmarshalling

我希望能够通过包含已知结构的 TCP/IP 接收一些二进制数据。我不想与 C 或 C++ 进行互操作，因此适用于这种情况的解决方案对我没有帮助。不幸的是，对方无法更改协议。当我尝试读取具有给定格式的二进制文件时，也会出现问题。

我也检查`BinaryFormatter`过和类似的，但他们使用自己的格式，这对我来说是不可接受的。

这是一组示例结构。我希望能够重建结构的嵌套数组（已知长度）。使用当前代码，我得到一个异常：

> 无法从程序集“...”加载类型“NestedStruct”，因为它包含偏移量 2 处的对象字段，该对象字段未正确对齐或被非对象字段重叠。

我希望能够发送/接收（或读/写）`struct MainStruct`.

```
 [StructLayout(LayoutKind.Explicit, Pack = 1, Size = 244, CharSet = CharSet.Ansi)]
    public struct NestedStruct
    {

        [FieldOffset(0)]
        public Int16 someInt;

        [FieldOffset(2), MarshalAs(UnmanagedType.ByValArray, SizeConst = 242)]
        public Byte[] characterArray; // an array of fixed length 242

    }

    [StructLayout(LayoutKind.Explicit)]
    public struct OtherNestedStruct
    {
        [FieldOffset(0)]
        public Int16 someInt;
        [FieldOffset(2)]
        public Int16 someOtherInt;

    }

    [StructLayout(LayoutKind.Explicit)]
    public struct MainStruct
    {
        [FieldOffset(0)]
        public double someDouble;
        [FieldOffset(8)]
        public NestedStruct nestedContent;
        [FieldOffset(8 + 244)]
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = 13 * 4)]
        public OtherNestedStruct[] arrayOfStruct; // fixed array length 13

    } 
```

更新：

这是我的最新版本：

```
 [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public struct NestedStruct
    {

        public Int16 someInt;

        [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.U1, SizeConst = 242)]
        public Byte[] characterArray; // an array of fixed length 242

    }

    [StructLayout(LayoutKind.Sequential , Pack=1)]
    public struct OtherNestedStruct
    {
        public Int16 someInt;
        public Int16 someOtherInt;

    }

    [StructLayout(LayoutKind.Sequential, Pack=1)]
    public struct MainStruct
    {

        public double someDouble;

        public NestedStruct nestedContent;

        [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.Struct,  SizeConst = 13)]
        public OtherNestedStruct[] arrayOfStruct; // fixed array length 13

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:52:11.633

您必须指定 ArraySubType

```
 [StructLayout(LayoutKind.Sequential, Pack = 1)]
    public struct NestedStruct
    {
        public Int16 someInt;
        [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.U1, SizeConst = 242)]
        public Byte[] characterArray; // an array of fixed length 242
    }

     [StructLayout(LayoutKind.Sequential, Pack = 1)]
     public struct OtherNestedStruct
     {
         public Int16 someInt;
         public Int16 someOtherInt;

     }

     [StructLayout(LayoutKind.Sequential, Pack = 1)]
     public struct MainStruct
     {
         public double someDouble;
         public NestedStruct nestedContent;
         [MarshalAs(UnmanagedType.ByValArray, SizeConst = 13 * 4)]
         public OtherNestedStruct[] arrayOfStruct; // fixed array length 13

    }  

    static void Main(string[] args)
    {
        var x = Marshal.SizeOf(typeof(MainStruct));
        //x == 460
    } 
```

# .net - 带有模板文本字段的 GridView

> ID：14934275
> 
> 赞同：1
> 
> 时间：2013-02-18T10:37:13.297
> 
> 标签：.net, sql, visual-studio, gridview

我有一个带有文本字段作为模板的网格视图。我已将它连接到数据库，因此当输入已检查列的文本字段时，我能够执行插入操作。现在我必须更新数据库，所以我想显示数据库中存在的内容，并且只能获得第一列即 Customer_Name，其余的将为空，我该怎么做？

这就是我一直在尝试的

```
 SqlCommand search2 = new SqlCommand("select * from OtherCostData", con);

                SqlDataAdapter da = new SqlDataAdapter(search2);
                DataSet ds = new DataSet();
                da.Fill(ds);
                GridView1.DataSource = ds;
                GridView1.DataBind(); 
```

![我拥有的 GridView](../Images/ed6ccfc51c3a9bd446f758c723c37e30.png) 我无法将我的 gridview aspx 代码放入它给我一些缩进错误但是我尝试格式化它

# ajax - 部分视图中的 Asp.net MVC WebGrid 未通过 Ajax 更新

> ID：14934276
> 
> 赞同：3
> 
> 时间：2013-02-18T10:37:14.227
> 
> 标签：ajax, asp.net-mvc-3, jquery, webgrid

我有 2 个 WebGrid，每个都在不同的局部视图中，显示在视图页面上。一切正常，但是当我在 WebGrid 上进行排序或分页时，它不会通过 ajax 进行更新。我究竟做错了什么？

**部分视图1**：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<CRMEvent.Models.CRM.DatabaseEntities.CRM_Request>>" %>
<%    
  var grid1var = new WebGrid(source: Model, defaultSort: "Id", fieldNamePrefix: "grid1", canSort: true, ajaxUpdateContainerId: "Div1", canPage: true, rowsPerPage: 5);%>
  <div id="Div1">
  <%=grid1var.GetHtml(htmlAttributes: new { id = "grid1" }, tableStyle: "GridTable", headerStyle: "GridHeader", footerStyle: "GridFooter",
  columns: grid1var.Columns(
  grid1var.Column(columnName: "Id", header: "ID", canSort: true),
  grid1var.Column(columnName: "Request_For_Id", header: "Request For", canSort: true),
  grid1var.Column(columnName: "Date_Created", header: "Date", canSort: true, format: item => item.Date_Created.ToString("dd-MM-yyyy"))
))%>
  </div> 
```

**部分视图2**

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<CRMEvent.Models.CRM.DatabaseEntities.CRM_Request>>" %>
<%    
  var grid2var = new WebGrid(source: Model, defaultSort: "Id", fieldNamePrefix: "grid2", canSort: true, ajaxUpdateContainerId: "Div2", canPage: true, rowsPerPage: 5);%>
  <div id="Div2">
  <%=grid2var.GetHtml(htmlAttributes: new { id = "grid2" }, tableStyle: "GridTable", headerStyle: "GridHeader", footerStyle: "GridFooter",
  columns: grid2var.Columns(
  grid2var.Column(columnName: "Id", header: "ID", canSort: true),
  grid2var.Column(columnName: "Request_For_Id", header: "Request For", canSort: true),
  grid2var.Column(columnName: "Date_Created", header: "Date", canSort: true, format: item => item.Date_Created.ToString("dd-MM-yyyy"))
))%>
  </div> 
```

**主页：**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<CRMEvent.Models.CRM.DatabaseEntities.CRM_Request>" %>
<asp:Content ID="Head" ContentPlaceHolderID="HeadContent" runat="server">
<link href="../../Content/Styles/Dashboard.css" rel="stylesheet" type="text/css" />
<script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
</asp:Content>
<asp:Content ID="Main" ContentPlaceHolderID="MainContent" runat="server">
    <%using (Html.BeginForm("Action", "Dashboard", FormMethod.Post)){ %>
    <div id="MainDashboardDiv">
      <div class="LiveTile">
        <div id="PriorityDiv1">
          <%Html.RenderAction("RecentRequests", Model); %>
        </div>  <!--End of PriorityDiv1 -->
        <div id="PriorityDiv2">
        <%Html.RenderAction("PriorityRequests", Model); %>
        </div>  <!--End of PriorityDiv2 -->
      </div>      <!--End of LiveTile -->
    </div><!--End of MainDashboardDiv -->
    <%} %>
</asp:Content> 
```

**母版页 HEAD 标签内容：**

```
<head id="head" runat="server">
    <title><asp:ContentPlaceHolder ID="TitleContent" runat="server" /></title>
    <link href="../../Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="<%: Url.Content("~/Scripts/jquery-1.9.1.min.js") %>" type="text/javascript"></script>
    <script src="<%: Url.Content("~/Scripts/modernizr-1.7.min.js") %>" type="text/javascript"></script>
    <asp:ContentPlaceholder ID="HeadContent" runat="server">
    </asp:ContentPlaceholder>      
    <link href="../../Content/menu.css" rel="stylesheet" type="text/css" />
    <script src="../../Scripts/jquery.js" type="text/javascript"></script>
    <script src="../../Scripts/menu.js" type="text/javascript"></script>
</head> 
```

此外，当我通过 firebug 检查控制台时，我在进行排序和分页时看到了一个错误：错误是：

> TypeError: $(...).parent(...).delegate 不是函数

关于代码：

> $(containerId).parent().delegate(containerId + 'a[data-swhglnk="true"]', 'click', function()

以上代码是由 WebGrid 动态生成的。我不是在写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:17:41.480

如果`webgrid`它包含 jQuery 并且您也引用了 jQuery，那么 jQuery 被定义了两次。这可以解释你的错误：

```
$(containerId).parent().delegate(containerId + ' a[data-swhglnk="true"]', 'click', function() 
```

禁用网页中的链接，它应该可以工作。如果您需要使用 jQuery 1.9+ 并且`webgrid`使用的是旧版本的 jQuery，则将其替换为新版本。

如果与 jQuery 1.9+ 不兼容，您可能会遇到一些错误`webgrid`，然后发表评论以获得更多帮助。

**提示**：检查最终生成的多个 jQuery 包含的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T07:05:04.803

好吧，我知道问题所在，但我是新手。所以这需要我一点时间来整理。问题是您的部分视图导致排序和传播上的事件侦听器停止侦听。如果您尝试使用 Jquery 设置多页表，您将遇到同样的问题；当您切换页面时，您的听众将断开连接。这发生在 Jquery 和其他好处中；它是出于安全原因完成的，所以不要改变它。所以目前有两种方法可以解决这个问题。第一个是每次需要附加时通过回调重新连接，第二个是将侦听职责放到子类中。

我会发布带有答案的示例，但赏金快到了。所以我想要一个机会，如果你有兴趣让我知道，我很快就会有代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T11:59:56.863

```
try this
$(containerId).parent.delegate(containerId + ' a[data-swhglnk="true"]', 'click', function() 
```

# c++ - 为什么通常在类中首先声明构造函数和析构函数？

> ID：14934279
> 
> 赞同：1
> 
> 时间：2013-02-18T10:37:35.003
> 
> 标签：c++, constructor, header, declaration

我总是看到在类中的任何其他内容之前声明构造函数和析构函数。这只是一个很好的编码标准，每个人都使用它来更容易找到它们，还是有它背后的原因。例如，像下面的代码那样在构造函数之前声明一个变量有什么问题吗？

```
class A
{
     public:
         int aVar;
         A() :aVar(20) {}
         ~A() {}
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:40:05.473

没有特别的理由在其他所有事情之前声明构造函数，这只是一个**约定**或编码实践。这就像声明公共函数，然后是公共成员，然后是私有函数，然后是私有成员，然后按字母顺序对函数进行排序。

唯一有原因的排序标准是**不**按字母顺序声明成员，而是按类型大小顺序声明成员，因为这是拥有[较小类](http://www.cprogramming.com/tutorial/size_of_class_object.html)的简单方法。

就个人而言，我将枚举和 typedefs 放在构造函数和析构函数之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T10:42:40.337

习俗。构造函数通常是你想知道的第一件事——除非你有一个对象，否则你不能做太多事情，把析构函数（和赋值）放在它们旁边似乎很自然。不过也有例外；很多人会根据访问权限进行分组，所以如果构造函数是受保护的，而析构函数是公共的（而赋值运算符是私有的），他们不一定会被分组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:38:49.500

根本不是，这只是编码风格的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T10:40:11.310

没有任何原因，除了个人喜好。除了纯粹的审美原因，方法的放置是不相关的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-18T10:41:37.257

我通常在类中为构造函数和析构函数、成员和方法有单独的部分，并通过公共、私有和受保护的方式将所有这些分开。在声明中首先使用构造函数是有意义的，因为构造函数通常是您在类之外使用的第一件事。当然也有一些例外，例如你通常从不调用构造函数的单例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T10:39:52.693

真的只是很好的形式，它对解释器没有任何影响，而且这种形式可能是对早期语言的回归，早期语言可能需要在随后调用它之前声明一个函数......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T11:17:11.223

回答

> 像下面的代码那样在构造函数之前声明变量有什么问题吗？

好吧，它的“错误”在于您有一个公共变量。这在原则上也可以，但大多数 C++ 程序员更喜欢将所有变量都设为私有或公开（作为 POD 结构）。

假设你的意思

```
class A {
  int aVar;
 public:
  A() : aVar(20) {}
  ~A() {}
}; 
```

这确实很好，事实上，FWIW 我喜欢将所有数据成员放在首位：这是 IMO 在尝试了解类如何工作时需要知道的第一件事。
（许多程序员现在会说，文件的主要目的不是`.h`教人们类如何*工作*，而是它的接口是什么。我不同意：这就是例如 Doxygen 文档的用途；您只需费心查看实际如果您想了解内部实现，请使用源代码。） 此外，IMO 使用关键字启动所有类然后使用 恢复它
是很奇怪的，但这几乎不是一个论点。`public``private`

当然，整件事实际上只是关于约定：如果项目中的所有类声明都有特定的布局，你应该坚持下去，否则一切都会令人困惑。

# java - 使用FilterInputStream的skip方法

> ID：14934281
> 
> 赞同：1
> 
> 时间：2013-02-18T10:37:41.487
> 
> 标签：java, inputstream, skip

我想使用 FilterInputStream 类的 skip 方法，它应该从流中跳过所需的字节数。但是跳过方法的文档说 [http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FilterInputStream.html#skip(long)](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FilterInputStream.html#skip(long))

> *跳过并丢弃输入流中的 n 字节数据。**由于各种原因，skip 方法最终可能会跳过一些较小的字节数，可能是 0**。返回实际跳过的字节数。*

使用跳过方法来寻找特定位置真的安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:04:25.780

`FilterInputStream`只是底层的包装器`InputStream`，所以它取决于底层的`InputStream.skip`行为。

例如，如果底层`InputStream`是`FileInputStream`，那么我们应该参考[`FileInputStream#skip`API](https://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html#skip(long))声明：

> `public long skip(long n) throws IOException`
> 
> 跳过并丢弃`n`输入流中的数据字节。
> 
> 由于各种原因，该`skip`方法最终可能会跳过一些较小的字节数，可能为 0。如果`n`为负数，`IOException`则抛出 an，即使在这种情况下超类的`skip`方法`InputStream`什么也不做。返回实际跳过的字节数。
> 
> 此方法可能会跳过比后备文件中剩余的字节更多的字节。这不会产生异常，并且跳过的字节数可能包括超出后备文件 EOF 的一些字节数。在跳过结尾后尝试从流中读取将导致 -1 指示文件的结尾。

从这个描述`FileInputStream.skip`对我来说似乎并不可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:19:59.957

我也发现这个 API 有点问题。它给具体的实现留下了太多的自由：

1）不清楚在流结束的情况下会发生什么

2）不清楚当流非空时，重复调用skip*最终*是否会返回一个正数。

假设您知道 n 没有超出流的末尾，并假设 (2) 成立，那么以下代码可能会有所帮助：

```
public static void skipSecure(InputStream is, long n) throws IOException {
    while (n >= 0) {
        long skipped = is.skip(n);
        n -= skipped;
    }
} 
```

# ios - json在objective-c中没有正确解析

> ID：14934284
> 
> 赞同：0
> 
> 时间：2013-02-18T10:37:53.460
> 
> 标签：ios, objective-c, json

我正在尝试将我的 JSON 解析为 NSDictionary。这是我用于解析的方法。

```
+ (NSDictionary *)executeGenkFetch:(NSString *)query
{
    query = [NSString stringWithFormat:@"%@", query];
    query = [query stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
     NSLog(@"[%@ %@] sent %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), query);
    NSData *jsonData = [[NSString stringWithContentsOfURL:[NSURL URLWithString:query] encoding:NSUTF8StringEncoding error:nil] dataUsingEncoding:NSUTF8StringEncoding];
    NSError *error = nil;
    NSDictionary *results = jsonData ? [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers|NSJSONReadingMutableLeaves error:&error] : nil;
    if (error) NSLog(@"[%@ %@] JSON error: %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), error.localizedDescription);
     NSLog(@"[%@ %@] received %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), results);
    return results;
} 
```

这就是我如何使用这个功能。

```
+(NSArray *)getCommentsWithParam:(NSString *)Param
{
    NSString *request = [NSString stringWithFormat:@"https://graph.facebook.com/comments/?ids=%@",Param];
    NSLog(@"request is %@",request);
    NSString *vfk = [NSString stringWithFormat:@"%@.comments.data",Param];
    return [[self executeGenkFetch:request] valueForKey:vfk];
} 
```

问题是当我记录从 getCommentsWithParam 返回的 NSArray 时，我总是得到 NULL。但是当我查看日志时

```
 NSLog(@"[%@ %@] received %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), results); 
```

我得到了我想要的 JSON。对出了什么问题有任何帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T10:43:02.660

没有看到实际的 JSON 数据很难说，但可能在

```
NSString *vfk = [NSString stringWithFormat:@"%@.comments.data",Param];
return [[self executeGenkFetch:request] valueForKey:vfk]; 
```

您必须使用`valueForKeyPath`而不是`valueForKey`，因为`vfk`它是具有多个关键组件（由点分隔）的*关键路径。*

***更新：***另一个问题是顶级键`Param`是 HTTP URL 并包含点。但是在键值编码中，点用于分隔关键组件。因此不能`Param`用作关键组件。改为用于`objectForKey`顶级键：

```
NSDictionary *results = [self executeGenkFetch:request];
return [[results objectForKey:Param] valueForKeyPath:@"comments.data"]; 
```

# entity-framework-4 - 更新 iSeries 表时出现 DB2 .NET 数据提供程序错误

> ID：14934285
> 
> 赞同：1
> 
> 时间：2013-02-18T10:37:56.570
> 
> 标签：entity-framework-4, db2, ibm-midrange, db2-400

我有一个奇怪的问题。更新 AS400 表时，出现以下错误

> 错误 [55019] [IBM][AS] SQL7008N REXX 变量“<表名>”包含不一致的数据。

相同的代码在 MSSQL 2008 上运行良好

在互联网上搜索后，我发现当我`Non-journaled`在 AS400 上更新表时会出现此问题

为此，我必须`journaling`为该表启用。这不是解决方案，因为我无权访问 AS400 服务器。

互联网上提到的解决方法是在`NOT NULL`查询中添加一个子句，`INSERT,UPDATE, DELETE`这在我的情况下是不可能的，因为我没有直接执行查询，而是使用`DBContext`相同的查询。

另一种解决方法是设置`isolationlevel/commitmode`为`NOCOMMIT or 32`. 我已尝试在 Web 配置中同时设置，但未能收到错误`System.ArgumentException: Invalid argument`和异常`Entity Exception: The underlying provider failed on ConnectionString.`

所以问题很简单怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:03:52.823

尝试设置 DefaultIsolationLevel：

```
iDB2Connection cn = new iDB2Connection();
cn.ConnectionString = "DataSource=myiSeries; DefaultIsolationLevel=Chaos;"; 
```

虽然旧，但这本[红皮书](http://www.redbooks.ibm.com/abstracts/sg246440.html)有一些很好的信息。

# wcf - 对 Web 服务的异步调用

> ID：14934290
> 
> 赞同：0
> 
> 时间：2013-02-18T10:38:11.687
> 
> 标签：wcf, web-services, silverlight, windows-phone-7

我正在使用我自己没有编写的网络服务（因此无法编辑）。我有这个代码：

```
public void GetData()
{
    try
    {
        TelemeterServiceClient client = new TelemeterServiceClient();
        RetrieveUsageRequestType request = new RetrieveUsageRequestType { UserId = Username, Password = Password };
        RetrieveUsageResponseType response = client.retrieveUsage(request);
        Result = response.Item;

        Callback(null);
    }
    catch (Exception e)
    {
       Result = null;
       Callback(e);
    }
} 
```

这在 WPF 项目中运行良好。但是，我现在正在处理一个使用 Silverlight 的 Windows Phone 项目。在这个项目中，找不到retrieveUsage() 方法。

显然 Silverlight 仅支持对 Web 服务的异步调用。事实上，存在一个retrieveUsageAsync() 方法。

但是我如何使用这种方法并得到结果呢？有人可以为我提供一个如何使用异步调用的简单示例吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:41:32.257

这是一个例子：

```
 Dim proxy = new TelemeterServiceClient()

    AddHandler proxy.retrieveUsageCompleted, Sub(o, e)
                                                          action(o, e)
                                                      End Sub

    Using New OperationContextScope(proxy.InnerChannel)
        Dim request = New retrieveUsageRequest
        proxy.retrieveUsageAsync(request)
    End Using 
```

认为它被翻译成 c# 是这样的：

```
 var proxy = new TelemeterServiceClient();

    proxy.retrieveUsageCompleted += MethodYouImplementWhenAsyncIsComplete;
    //or proxy.retrieveUsageCompleted += (s, e) => { do something };

    using (new OperationContextScope(proxy.InnerChannel))
    {
        var request = New retrieveUsageRequest();
        proxy.retrieveUsageAsync(request);
    } 
```

与 一致`action`，action 代表您处理异步结果的委托或操作

如果您在将其翻译成 c# 时遇到问题，请告诉我，然后我会更改它；）

# python - 为配置文件中的同一个键分配多个值

> ID：14934291
> 
> 赞同：1
> 
> 时间：2013-02-18T10:38:12.027
> 
> 标签：python, configparser, configuration-files

我正在尝试创建一个配置文件，并且需要使用 ConfigParser 模块用 python 解析它

例如，我在文件中有以下设置`config.sr`

```
[basic]
basic=bz2,calendar,Core,ctype,curl,date,dom,ereg,exif,fileinfo,filter,ftp,gd,gettext,gmp,mhash,mysql,mysqli,openssl,pcntl,pcre,PDO,pdo_mysql,pdo_sqlite,Phar,readline

[advance]
advance=Reflection,session,shmop,SimpleXML,sockets,SPL,sqlite3,standard,tokenizer,wddx,xdebug,xml,xmlreader,xmlwriter,xsl,zip,zlib,Xdebug 
```

所以你可以看到有更多的值`(29)`用逗号分隔并分配给一个键`basic`，当我使用`ConfigParser`模块解析它并获取结果时工作正常，但是分配的值太长而无法声明。

当我在多行中分配它们时，它会显示一些错误，更多以逗号分隔的值的数量将进一步增加到 50，因此会导致一些可读性问题不断向前移动光标。

最后我想知道的是我们如何在配置的多行中声明与单个键相关的值？

**示例格式**

```
[basic]
basic=bz2,calendar,Core,ctype,curl,date,dom,ereg,exif,fileinfo,filter,ftp,gd,gettext,gmp,

hash,iconv,json,libxml,mbstring,mcrypt,mhash,mysql,mysqli,openssl,pcntl,pcre,PDO,pdo_mysql,

pdo_sqlite,Phar,readline

............. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:49:04.230

缩进它们：

```
[basic]
basic:
    bz2
    calendar
    Core
    ctype
    curl
    date
    dom
    ereg
    exif
    fileinfo
    filter
    ftp
    gd
    gettext
    gmp
    mhash
    mysql
    mysqli
    openssl
    pcntl
    pcre
    PDO
    pdo_mysql
    pdo_sqlite
    Phar
    readline 
```

ConfigParser 然后会有一个列表，你可以用它做你喜欢的事情。

```
config = ConfigParser.ConfigParser()
config.read('config.sr')
basic_list = config.get('basic', 'basic').split('\n') 
```

编辑：

运行代码如下：我的`config.sr`：

```
[basic]
basic:
    bz2
    calendar
    Core
    ctype
    curl
    date
    dom
    ereg
    exif
    fileinfo
    filter
    ftp
    gd
    gettext
    gmp
    mhash
    mysql
    mysqli
    openssl
    pcntl
    pcre
    PDO
    pdo_mysql
    pdo_sqlite
    Phar
    readline

[advanced]
advanced:
    a
    b
    c
    d
    e 
```

还有我的python文件`q_14934291.py`：：

```
import ConfigParser

config = ConfigParser.ConfigParser()
config.read('config.sr')

basic_list = config.get('basic', 'basic').split('\n')
print('Basic list:')
print(basic_list)

advanced_list = config.get('advanced', 'advanced').split('\n')
print('\n\nAdvanced list:')
print(advanced_list) 
```

运行它的输出：

```
Basic list:
['', 'bz2', 'calendar', 'Core', 'ctype', 'curl', 'date', 'dom', 'ereg', 'exif', 'fileinfo', 'filter', 'ftp', 'gd', 'gettext', 'gmp', 'mhash', 'mysql', 'mysqli', 'openssl', 'pcntl', 'pcre', 'PDO', 'pdo_mysql', 'pdo_sqlite', 'Phar', 'readline']

Advanced list:
['', 'a', 'b', 'c', 'd', 'e'] 
```

确保使用正确的缩进（4 个空格）。如果使用错误的缩进，会导致错误。

此外，您需要`.split('\n')`在条目上。我忘了那部分对不起。

如果您不希望在开始时出现空条目，`strip`请输入：

```
basic_list = config.get('basic', 'basic').strip().split('\n') 
```

# c# - 如何使用专用内核进行自旋等待线程？

> ID：14934293
> 
> 赞同：0
> 
> 时间：2013-02-18T10:38:16.837
> 
> 标签：c#, multithreading

我在旋转等待的地方有延迟关键代码。我想在专用核心上运行它（我总共有 12 个核心，所以可以只为该任务花费一个核心）。我试图以这种方式完成它：

```
 new Thread(Work).Start();

    private void Work()
    {
        Process Proc = Process.GetCurrentProcess();
        ProcessThread Thread = Proc.Threads[0];
        var AffinityMask = 0x0002; // use only the second processor, despite availability
        Thread.ProcessorAffinity = (IntPtr)AffinityMask;
        while (true)
        {
            Iterate();
        }
    } 
```

我期待在设置 ProcessorAffinity 后，我的线程将始终在第二个核心上工作，所以我也将 100% 在第二个核心上。但是在任务管理器中，我看不到任何“100”个占用的核心。为什么？如何在专用核心上启动自旋等待线程？

**现在更新**我认为这可能是错误的`Proc.Threads[0]`？我需要有`current`线程而不是`0`线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:47:50.280

您不会看到 100% 仅仅因为您已经在该线程上设置了线程关联，因为操作系统仍会在该内核上调度其他线程，而您的线程只会获得一部分周期。

如果您还设置 Process.BasePriority = RealTime 和 Thread.Priority = Highest，那么您可能会在该核心上看到*接近*100% 的内容。（我不会在生产代码中推荐这个）。

根据*您*的操作的时间紧迫性，.Net 平台可能还不够。

# android - 使用 Ant 构建 android 项目

> ID：14934297
> 
> 赞同：0
> 
> 时间：2013-02-18T10:38:25.083
> 
> 标签：android, ant, build

我需要制作一个自动构建系统。我有一个库项目和其他 5 个引用该库项目的项目。我的要求是，如果我在命令提示符下键入“ant project_name”，则应该构建相应的项目。我已经在我的系统中下载了 Ant。但我不知道如何编写脚本以及在哪里创建脚本。我经历了很多教程。但没有得到一个想法。我是蚂蚁的新手。请帮我。

**编辑** 我需要在哪里编写脚本来构建项目？谁能给我一个使用 Ant 构建项目的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:52:26.967

你只需要做一个好的谷歌搜索。

这是一个彻底的演练：

*   [通过 ANT 构建教程（一步一步）](http://www.vogella.com/articles/AndroidBuildAnt/article.html)
*   [为开发人员提供的更多信息](http://developer.android.com/tools/projects/projects-cmdline.html)

# java - 如何在运行 Tomcat 时获取软件包版本？

> ID：14934299
> 
> 赞同：7
> 
> 时间：2013-02-18T10:38:36.287
> 
> 标签：java, eclipse, maven, tomcat, manifest.mf

如何在运行 Tomcat 时获取软件包版本？

我尝试 getClass().getPackage().getImplementationVersion() 但这总是返回`null`。我想这是因为我的战争还没有打包，Tomcat 执行 .classes（又名爆炸战争）。 `META-INF\MANIFEST.MF`存在于最终战争中，但不在`target\<project.name>\META-INF`文件夹中

> [java.lang.Package](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Package.html)
> 
> 包对象包含有关 Java 包的实现和规范的版本信息。此版本信息由加载类的 ClassLoader 实例检索并提供。通常，它存储在与类一起分发的清单中。

相关的是[在运行时获取 Maven 工件版本](https://stackoverflow.com/questions/2712970/how-to-get-maven-artifact-version-at-runtime)

更新。在我已经为战争构建添加配置之前。但是当从 Eclipse 运行 Tomcat 时，我得到`null`.

```
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.1</version>
    <configuration>
        <archive>                   
            <manifest>
                <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
            </manifest>
        </archive>
        <!-- this actually moves classes from \WEB-INF\classes to new jar 
        <archiveClasses>true</archiveClasses>
        -->
    </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T05:36:48.077

解决方法1）使用 2）编码
在 webapp 文件夹中创建 META-INF\MANIFEST.MF`mvn war:manifest`

```
version  = getClass().getPackage().getImplementationVersion();  
if (version==null) {
    Properties prop = new Properties();
    try {
        prop.load(getServletContext().getResourceAsStream("/META-INF/MANIFEST.MF"));
        version = prop.getProperty("Implementation-Version");
    } catch (IOException e) {
        logger.error(e.toString());
    }
}
logger.info("Starting App version "+version); 
```

感谢@javadude 在[如何读取在 apache tomcat 中运行的 webapp 的清单文件？](https://stackoverflow.com/questions/615493/how-do-i-read-the-manifest-file-for-a-webapp-running-in-apache-tomcat)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:49:42.043

包的版本/标题/供应商信息的正常来源是 JAR 文件清单中的属性。请参阅[JAR 文件规范](http://docs.oracle.com/javase/7/docs/technotes/guides/jar/jar.html#Main_Attributes)。

如果 getter 返回`null`，则表示尚未指定相应的属性。（这对于常规 JAR 文件也是正常的。）

是的，它与链接的问题有关。接受的答案描述了如何告诉 Maven 将一些 Maven 版本详细信息添加到 JAR 清单中，以便您可以在运行时使用`Package`API 访问它们。

* * *

> 如何在运行 Tomcat 时获取软件包版本？

您需要创建 JAR 文件，并将版本信息放入相应的 JAR 清单中。显然，您也可以在 WAR 文件级别执行此操作。

参考： Fred Puls 的[“部署：战争文件版本控制和清单阅读器”](http://fredpuls.com/site/softwaredevelopment/java/deploy/deploy_war_file_versioning_and.htm)。

# java - 替换无限循环

> ID：14934300
> 
> 赞同：-2
> 
> 时间：2013-02-18T10:38:37.207
> 
> 标签：java, loops, wait

我有一个无限循环来测试队列中的消息：

```
 //main class
     boolean brun=true;

     while(brun) 
 {

      if(!queue.isEmpty()) //there's a new message 
      {
       msg=queue.remove(0);  //remove it from the queue
       nqueue--;
       //process the message
       if(msg==0)
       ...
       if(msg=999)
              brun=false; //exit
      }
     } 
```

如何使用 Condition.await() 暂停执行，直到队列不为空？

谢谢你的帮助，佩德罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:43:30.033

不确定你在问什么，但如果你想从队列中获取一个对象并等到队列有一个对象要取，你可以使用[BlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html)。

如果您想等到队列有对象，请使用`queue.take()`. 它将挂起，直到队列有一个对象，并将其从队列中删除。

# android - 使用媒体编解码器将 PCM 转换为 AAC

> ID：14934305
> 
> 赞同：24
> 
> 时间：2013-02-18T10:38:53.363
> 
> 标签：android, pcm, aac

我在 Android (Jelly Bean) 中使用媒体编解码器类将 PCM 格式编码为 AAC。该文件已编码，但没有音乐播放器能够播放该文件。我无法在网上找到任何工作代码或适当的文档。

这是我的代码：

```
public void doConvert()
{

    new AsyncTask<Void, Void, Void>()
    {

        @Override
        protected Void doInBackground(Void... params) 
        {
            try
            {
                int codecCount = MediaCodecList.getCodecCount();

                for ( int i=0; i < codecCount; i++)
                {
                    MediaCodecInfo info = MediaCodecList.getCodecInfoAt(i);
                    Logger.getLogger(MainActivity.class.getSimpleName()).log(Level.INFO, info.getName());
                    for ( String type : info.getSupportedTypes() )
                    {
                        Logger.getLogger(MainActivity.class.getSimpleName()).log(Level.INFO, type);
                    }

                }

                File inputFile = new File( Environment.getExternalStorageDirectory().getAbsolutePath()+"/Download/Ghajini27_Mono_8Khz.wav");
                //File inputFile = new File( sampleFD.get);
                Log.e("File", String.valueOf(inputFile.length()));
                FileInputStream fis = new FileInputStream(inputFile);
                fis.skip(44);//remove wav header

                File outputFile = new File( Environment.getExternalStorageDirectory().getAbsolutePath()+"/Download/out.m4a");
                if ( outputFile.exists()) outputFile.delete();

                FileOutputStream fos = new FileOutputStream(outputFile);

                //BufferedOutputStream bos=new BufferedOutputStream(new FileOutputStream(outputFile));
                MediaCodec codec = MediaCodec.createEncoderByType("audio/mp4a-latm");
                MediaFormat outputFormat = MediaFormat.createAudioFormat("audio/mp4a-latm", 22050, 1);
                outputFormat.setInteger(MediaFormat.KEY_AAC_PROFILE, MediaCodecInfo.CodecProfileLevel.AACObjectLC);
             //  outputFormat.setInteger(MediaFormat.KEY_CHANNEL_MASK, AudioFormat.CHANNEL_CONFIGURATION_MONO);
                outputFormat.setInteger(MediaFormat.KEY_BIT_RATE, 22050  );
                outputFormat.setInteger(MediaFormat.KEY_CHANNEL_COUNT, 1);
                //outputFormat.setLong(MediaFormat.KEY_MAX_INPUT_SIZE, inputFile.length());
                double durationInMs = (inputFile.length()/16000)*1000;
                Log.e("duration",String.valueOf((long)durationInMs));
                outputFormat.setLong(MediaFormat.KEY_DURATION, (long)durationInMs );

                codec.configure(outputFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE );
                codec.start();

                ByteBuffer[] inputBuffers = codec.getInputBuffers();
                ByteBuffer[] outputBuffer = codec.getOutputBuffers();

                boolean hasMoreData = true;   
                MediaCodec.BufferInfo outBuffInfo = new BufferInfo();
                byte readBuffer[] = new byte[48000];
                byte writeBuffer[] = new byte[48000];

                do
                {
                   int nextBuffer = codec.dequeueInputBuffer(5000);
                   Log.e("NextBuffer","nextInputBuffer = "+nextBuffer);

                    if ( nextBuffer >= 0 )
                    {

                        ByteBuffer inBuf = inputBuffers[nextBuffer];
                        inBuf.clear();
                        int bytesRead = fis.read( readBuffer,0, inBuf.capacity() );

                        Log.e("bytesread","Read = "+bytesRead);

                        if ( bytesRead < inBuf.capacity() )
                        {
                            hasMoreData = false;
                        }

                        inBuf.put(readBuffer, 0, bytesRead);

                        codec.queueInputBuffer(nextBuffer, 0, bytesRead, 0, hasMoreData?0:MediaCodec.BUFFER_FLAG_END_OF_STREAM);
                    }

                    int outputBufferIndex = codec.dequeueOutputBuffer( outBuffInfo, 3000);
                /*    logger.log(Level.INFO,"nextOutputBuffer = "+outputBufferIndex);
                    logger.log(Level.INFO,"outBuffInfo offset = "+outBuffInfo.offset);
                    logger.log(Level.INFO,"outBuffInfo size = "+outBuffInfo.size);
                    logger.log(Level.INFO,"outBuffInfo flags = "+outBuffInfo.flags);*/

                    //while ( outputBufferIndex > -1 )
                    //{ 

                        outputBuffer[outputBufferIndex].position(outBuffInfo.offset);
                        outputBuffer[outputBufferIndex].get(writeBuffer,0,outBuffInfo.size);

                        fos.write(writeBuffer,0, outBuffInfo.size);
                      //  logger.log(Level.INFO,"Writing = "+outBuffInfo.size+" bytes");

                        outputBuffer[outputBufferIndex].clear();

                        codec.releaseOutputBuffer(outputBufferIndex, false);

                        if ( outBuffInfo.flags == MediaCodec.BUFFER_FLAG_END_OF_STREAM )
                        {
                            codec.flush();
                            codec.stop();
                            codec.release();
                            break;
                        }

                        //outputBufferIndex = codec.dequeueOutputBuffer( outBuffInfo, 1000 );
                        //logger.log(Level.INFO,"nextOutputBuffer = "+outputBufferIndex);
                    //}

                } while (outBuffInfo.flags != MediaCodec.BUFFER_FLAG_END_OF_STREAM);

                fis.close();
                fos.flush();
                fos.close();

            }
            catch ( Exception e)
            {
                //Logger.getLogger(MainActivity.class.getSimpleName()).log(Level.INFO, "Codec Error",e);
            }

            //logger.log(Level.INFO,"Done");

            return null;
        }

    }.execute();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-28T04:05:44.090

您需要为它选择一个容器。我更喜欢广告。

将有效负载数据复制到对您的容器足够大的数组中，只需添加您的位即可。所以在网上搜索我的解决方案后，我做了一些片段

方法“fillInADTSHeader”

```
 profile =( configParams[0]>>3 )&0x1f;

    frequency_index = (this.configParams[0]&0x7) <<1 | (this.configParams[1]>>7) &0x1;

    channel_config = (this.configParams[1]>>3) &0xf;

    int finallength = encoded_length + 7;       
    ENCodedByteArray[0] = (byte) 0xff;
    ENCodedByteArray[1] = (byte) 0xf1;
    ENCodedByteArray[2] = (byte) ( ((profile - 1) << 6) + (frequency_index << 2) +(channel_config >> 2));
    ENCodedByteArray[3] = (byte) (((channel_config & 0x3) << 6) + (finallength >> 11));
    ENCodedByteArray[4] = (byte)( (finallength & 0x7ff) >> 3);
    ENCodedByteArray[5] = (byte) (((finallength & 7) << 5) + 0x1f) ;
    ENCodedByteArray[6] = (byte) 0xfc; 
```

使用类似的东西

```
 byte chunkADTS[]=new byte[info.size + 7];
            fillInADTSHeader(chunkADTS,info.size);
            outputBuffers[bR].get(chunkADTS,7,info.size);
            buffer.pushData(chunkADTS); 
```

应该在广播等中播放...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-18T23:22:37.767

有一个 android AAC 库 [https://github.com/timsu/android-aac-enc](https://github.com/timsu/android-aac-enc)

尝试通过这个库传递你的缓冲区。它可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-10T08:16:44.970

你需要一个容器。将 MediaCodec 的编码输出发送到 MediaMuxer。使用 mp4 作为容器类型。无需使用@Andy--S 发布的神秘代码。

只需确保为最终文件提供扩展名 .m4a 而不是 mp4。MP4 扩展用于视频。

有关 MediaMuxer 的详细信息，请参阅： [https://developer.android.com/reference/android/media/MediaMuxer#writeSampleData(int,%20java.nio.ByteBuffer,%20android.media.MediaCodec.BufferInfo)](https://developer.android.com/reference/android/media/MediaMuxer#writeSampleData(int,%20java.nio.ByteBuffer,%20android.media.MediaCodec.BufferInfo))

# javascript - 多张图片点击JQuery

> ID：14934306
> 
> 赞同：-2
> 
> 时间：2013-02-18T10:38:54.850
> 
> 标签：javascript, jquery, html, onclick

我在尝试从页面上的多个图像调用 JQuery 函数时遇到了一些麻烦。如果有人可以帮助我，那就太好了。

这是我的代码：

**HTML**

```
 <input type="image" name="rateButton[1]" src="img/Rate1.png" height="40" width="40" value="1" onclick="rateBox(1)"/>
        <input type="image" name="rateButton[2]" src="img/Rate2.png" height="40" width="40" value="1" onclick="rateBox(2)"/>
        <input type="image" name="rateButton[3]" src="img/Rate3.png" height="40" width="40" value="1" onclick="rateBox(3)"/>
        <input type="image" name="rateButton[4]" src="img/Rate4.png" height="40" width="40" value="1" onclick="rateBox(4)"/>
        <input type="image" name="rateButton[5]" src="img/Rate5.png"  height="40" width="40" value="1" onclick="rateBox(5)"/>
        <input type="image" name="rateButton[6]" src="img/Rate6.png" height="40" width="40" value="1" onclick="rateBox(6)"/>
        <input type="image" name="rateButton[7]" src="img/Rate7.png" height="40" width="40" value="1" onclick="rateBox(7)"/>
        <input type="image" name="rateButton[8]" src="img/Rate8.png" height="40" width="40" value="1" onclick="rateBox(8)"/>
        <input type="image" name="rateButton[9]" src="img/Rate9.png"  height="40" width="40" value="1" onclick="rateBox(9)"/>
        <input type="image" name="rateButton[10]" src="img/Rate10.png" height="40" width="40" value="1" onclick="rateBox(10)"/><br> 
```

**jQuery**

```
$(document).ready(function(){
    function rateBox(rating){
        // Ajax Call here...
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:41:19.743

您正在 jQuery 的 DOMReady 事件中定义函数。这将导致异常，因为 JS 引擎已经`rateBox()`在对象内部进行查找`window`。把它移出`$(document).ready()`方法，你应该没问题：

```
<script type="text/javascript">
function rateBox(rating){
    // Ajax Call here...
}
</script> 
```

由于该函数是由图像上的单击事件调用的，因此可以推断在函数执行时 DOM 已经加载，因此将其包装在 DOMReady 中是多余的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T07:15:10.343

您应该`.ready()`按照其他人的建议将您的功能移到功能之外。

此外，将事件附加到多个元素的最佳实践是将事件委托给父元素。它将仅附加一个事件并侦听从使用的选择器冒出的事件。前任。使用 JQuery...

```
$(parent-container).on('click', element-selector, function(e){
  // Ajax call here.
}); 
```

在您的情况下，您可以添加一个父包装器（id =“ratings”）并向您的 rateButtons 添加一个类（class =“rateButton”）

为了清楚起见，减少了 DOM。

```
<div id="ratings">
    <input type="image" class="rateButton" name="rateButton[1]" src="img/Rate1.png" height="40" width="40" value="1"/>
    <input type="image" class="rateButton" name="rateButton[2]" src="img/Rate2.png" height="40" width="40" value="1"/>
    <input type="image" class="rateButton" name="rateButton[3]" src="img/Rate3.png" height="40" width="40" value="1"/>
    <input type="image" class="rateButton" name="rateButton[4]" src="img/Rate4.png" height="40" width="40" value="1"/>
    <input type="image" class="rateButton" name="rateButton[5]" src="img/Rate5.png"  height="40" width="40" value="1"/>
</div>
<br> 
```

然后在父级上绑定事件（当然在准备好的功能之外）

```
$('#ratings').on('click', '.rateButton', function(e){
   /* alternatively if the additional parent element is not desired  
      the event can be delegated to the document */

   var elem = this; // to refer to the clicked object
   var index = $(this).index(); // to get the index, this index is 0 based
   alert('clicked element index: '+index);
   // Ajax call here.
}); 
```

**[例子](http://jsfiddle.net/bDSGf/)**

[jQuery`.on()`文档](http://api.jquery.com/on/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:40:39.113

将其移到 document.ready 函数之外：

```
function rateBox(rating){
    // Ajax Call here...
}

$(document).ready(function(){

}); 
```

通过在 document.ready 之外定义它，它在对象的范围内，`window`并且您的内联`onclick`事件都在`window`对象的范围内，因此可以访问它。

`window`如果您真的想要（但没有理由），您实际上仍然可以从 document.ready 函数中实现范围：

```
$(document).ready(function(){
    window.rateBox = function(rating){
        // Ajax Call here...
    };
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:45:04.180

您应该在 document.ready 函数之外定义 rateBox 函数：

```
function rateBox(rating){
    //do it
}
$(document).ready(function(){
  // Ajax Call here...
}); 
```

# spring - 带有表单的 Spring 错误：Bean 的 BindingResult 和普通目标对象都不是

> ID：14934307
> 
> 赞同：0
> 
> 时间：2013-02-18T10:38:55.210
> 
> 标签：spring, spring-form

我正在尝试用 Spring 制作一个简单的表单，但我遇到了这个错误，我无法解决！我阅读了相关的问题，但没有。

这是我的代码，请帮助我。

```
 package formClasses;

    public class Contact {

    private String name;
    private String surname;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getSurname() {
        return surname;
    }
    public void setSurname(String surname) {
        this.surname = surname;
    }   
} 
```

这是contacts.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>

<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

    <title>Insert Contact</title>

</head>
<body>

    <form:form action="addContact" method="POST" modelAttribute="contact">
        <table>
            <tr>
                <td><form:input path="name" /></td>
            </tr>
            <tr>
                <td><form:input path="surname" /></td>
            </tr>
            <tr>
                <td><input type="submit" value="submit"></td>
            </tr>
        </table>
    </form:form>

</body>
</html> 
```

控制器

```
 package controllers;

import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import formClasses.Contact;

@Controller
public class contactController {

    @RequestMapping(value="addContact", method=RequestMethod.POST)
    public String insertContact (@ModelAttribute("contact") Contact contact, BindingResult result) {

        System.out.println("Welcome " + contact.getName() + " " + contact.getSurname());

        return "Welcome";
    }
} 
```

调度员

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"

    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context-3.0.xsd
      http://www.springframework.org/schema/mvc
      http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <context:component-scan base-package="controllers" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView"></property>
        <property name="prefix" value="../pages/"></property>
        <property name="suffix" value=".jsp"></property>
    </bean>

</beans> 
```

和 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>springform</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
        <servlet-name>springform</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>springform</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/springform-servlet.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

</web-app> 
```

错误是

```
org.apache.jasper.JasperException: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'contact' available as request attribute
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:548)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:466)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:16:20.180

在您的 JSP 中替换：

```
<form:form action="addContact" method="POST" modelAttribute="contact"> 
```

经过：

```
<form:form action="addContact" method="POST" commandName="contact"> 
```

# c#-4.0 - Episerver MVC 中的块渲染

> ID：14934311
> 
> 赞同：7
> 
> 时间：2013-02-18T10:39:00.263
> 
> 标签：c#-4.0, episerver, episerver-7

我有一个问题，最近几天我一直在挣扎。我试图了解在使用 MVC 时块的渲染在 Episerver 7 中是如何工作的。

我当前实际工作的设置如下：

我创建了一个名为“TeaserBlock”的块类型，它有几个属性：

```
[ContentType(DisplayName = "TeaserBlock", GUID = "571582c4-6b99-4c0a-b000-f62265e312a9", Description = "A Teaser Block for show!")]
public class TeaserBlock : BlockData
{
    [Display( GroupName = SystemTabNames.Content, Order = 1)]
    public virtual string TeaserHeading { get; set; }

    [Display(GroupName = SystemTabNames.Content, Order = 2)]
    public virtual string TeaserText { get; set; }    
} 
```

为此，我在 Views/Shared/ 中有一个相应的局部视图，称为 TeaserBlock.cshtml。我猜这个是在视图模式下渲染块？

我最大的问题是让“页面编辑”工作，经过一番尝试和谷歌搜索，我终于让它与以下代码一起工作：

```
[TemplateDescriptor(Inherited = true,
    Tags = new string[] { RenderingTags.Preview },
    TemplateTypeCategory = TemplateTypeCategories.MvcController)]
public class PreviewBlockController : ActionControllerBase, IRenderTemplate<BlockData>
{
    public ActionResult Index(BlockData currentBlock)
    {
        return View(currentBlock);
    }
} 
```

在我向 PreviewBlockController 添加了相应的视图后，它在“页面编辑”中工作，这很好。我花了很长时间才意识到“TemplateTypeCategory = TemplateTypeCategories.MvcController)”行是否不存在它不起作用。任何人都知道为什么这条线是必要的？

使用标签“RenderingTags.Preview”时还涉及一些魔法吗？

假设我的应用程序中有 5 个不同的块，那么我是否还需要 5 个不同的预览控制器和对应的视图？

我想要的是有一个更通用的“块预览控制器”，可以处理我的块的所有“页面编辑”。但是，我不确定这是否可行，因为所有块都将具有不同的属性，因此如果我猜预览有意义，则需要单独的 .cshtml 进行预览。或者有什么方法可以让我在代码中找出块中相关的哪些属性将其发送到我的控制器，以便我可以循环遍历它们？并且借助这个只需要一个预览控制器和一个相应的视图？

有没有关于如何以最佳方式处理这个问题的指导方针？

希望任何人都可以帮助我更好地理解这个概念，我发现很难找到有关表观服务器的一些概念的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:36:48.787

TemplateTypeCategories 等于支持的不同类型的“渲染模板类型”。

```
public enum TemplateTypeCategories
{
    None = 0,
    WebFormsPage = 1,
    UserControl = 2,
    ServerControl = 4,
    WebFormsPartial = 6,
    WebForms = 7,
    MvcController = 8,
    Page = 9,
    MvcView = 16,
    MvcPartialController = 32,
    MvcPartialView = 64,
    MvcPartial = 96,
    Mvc = 120,
} 
```

***设置TemplateTypeCategories.MvcController***会欺骗EPiServer加载 Block，就好像它是一个普通的页面一样，请记住，块实例的工作方式与页面实例的工作方式不同，因此我们必须执行这个小技巧。否则块实例将被注册为***MvcPartialController***的，我们不能直接在 MVC 中加载。

我创建的 PreviewBlockController 比 AlloyMVC 中的更简单。

```
using EPiServer.Core;
using EPiServer.Framework.DataAnnotations;
using EPiServer.Framework.Web;
using EPiServer.Web;
using System.Web.Mvc;
using Site.Externwebb.Content.Blocks;

namespace Site.Externwebb.Controllers.Blocks
{
    [TemplateDescriptor(Inherited = true, 
        Tags = new[] { RenderingTags.Preview }, 
        TemplateTypeCategory = TemplateTypeCategories.MvcController)]
    public class PreviewBlockController : Controller, IRenderTemplate<BlockData>
    {
        public ActionResult Index(BlockData currentBlock)
        {
            var baseType = currentBlock.GetType().BaseType;
            if (baseType == typeof(BarkerBlock))
            {
                return View("Barkers", currentBlock);
            }

            if (baseType == typeof(SlideshowInlineBlock))
            {
                return View("Inline", currentBlock);
            }

            // Standard return (general block controller)
            return View("RightColumn", currentBlock);
        }
    }
} 
```

视图默认放置在 ~/Views/PreviewBlock/xxx.cshtml 这里是一个例子

```
@using EPiServer.Web.Mvc.Html
@model EPiServer.Core.BlockData

@{
    Layout = "~/Views/Shared/Masters/_BlockPreviewMaster.cshtml";
}

@section MainContent{
    <div id="rightContent" style="width:300px;">
        <div id="rightcolumn">
            @{ Html.RenderContentData(Model, false); }
        </div>
    </div>
} 
```

足够好并且易于管理。

祝你好运。

/埃里克·赫利茨

# jquery - 如何处理 jquery.post 中的 404 错误

> ID：14934317
> 
> 赞同：1
> 
> 时间：2013-02-18T10:39:24.150
> 
> 标签：jquery, ajax, post, .post

我不知道如何处理 $.post() 上的 404 错误？

```
$.post(url, data, function(returnedData) { 
```

它只能处理成功数据，但我也想处理 404 错误。我知道如何用 ajax 来做，但不知道这个功能，请帮忙。

```
 function returnData(url,data,type){
        $.post(url, data, function(returnedData) {
        if(type == "contacts")
        {   
        ko.applyBindings(new ContactsViewModel(returnedData,"#KnockOutContacts",url,data),$("#KnockOutContacts")[0]);   
        ko.applyBindings(new ContactsViewModel(returnedData,"#ContactDetails",url,data),$("#ContactDetails")[0]);   
        }
        else if(type == "logs")
        {
        alert(returnedData);
        alert(1);
        ko.applyBindings(new LogsViewModel(returnedData,url,data),$("#KnockOutLogs")[0]);   
        }
        else if(type == "sms")
        {
            ko.applyBindings(new SmsViewModel(returnedData,"#KnockOutSmsData",url,data),$("#KnockOutSmsData")[0]);  
            ko.applyBindings(new SmsViewModel(returnedData,"#KnockOutSms",url,data),$("#KnockOutSms")[0]);  
        }
        else if(type == "calendar")
        {
        ko.applyBindings(new CalendarViewModel(returnedData,"#KnockOutCalendar",url,data),$("#KnockOutCalendar")[0]);   
        }
        else if(type == "search")
        {
        ko.applyBindings(new SearchViewModel(returnedData,"#searchbox",url,data),$("#searchbox")[0]);   
        }
        else if(type == "location")
        {
        ko.applyBindings(new LocationViewModel(returnedData,"#KnockOutMaps",url,data),$("#KnockOutMaps")[0]);   
        }
        else if(type == "photos")
        {
        ko.applyBindings(new PhotosViewModel(returnedData,"#photogallary",url,data),$("#photogallary")[0]); 
        ko.applyBindings(new PhotosViewModel(returnedData,"#PhotosDown",url,data),$("#PhotosDown")[0]); 
        }
    });
} 
```

我在获取数据时基本上应用绑定，但是当我没有获取数据时，它不会进入成功函数，这会破坏我的 js。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T10:41:31.747

[在此处](http://api.jquery.com/jQuery.ajax/)阅读有关`statusCode`回调的信息

```
$.ajax({
    url: "/page.htm",
    type: "POST",
    statusCode: {
        404: function() {
          alert("page not found");
        }
    }
}) 
```

* * *

编辑。

也可以接受`$.post`

```
$.post(url, data, function(returnedData) {
    //callback
}).fail(function(jqXHR, textStatus, errorThrown){
    if(jqXHR.status == 404) {

    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T10:41:12.090

您可以使用全局错误处理程序：

```
$(document).ajaxError(function(e, xhr, settings, exception) {

}); 
```

# spring-security - 预期会出现 BadCredentialsException，但收到 AccountExpiredException

> ID：14934319
> 
> 赞同：3
> 
> 时间：2013-02-18T10:39:31.170
> 
> 标签：spring-security

我正在使用 Spring Security 来支持我的应用程序中的身份验证和授权。我已经定制了安全上下文的一些方面，但我认为这在我的问题/问题中没有作用。

我目前正在使用**Spring 3.1.2.RELEASE**和**Spring Security 3.1.3.RELEASE**，但我即将更新到最新版本。

`AbstractUserDetailsAuthenticationProvider$DefaultPreAuthenticationChecks()`我认为我刚刚发现的内部类存在一个错误，如下所述：

如果我尝试使用用户和错误（不正确）密码登录，但在我的用户存储库中找到该用户，并且他们被锁定、禁用或帐户已过期，则 Spring Security 会以`LockedException`、`DisabledException`或`AccountExpiredException`.

但是，从这个响应中，我刚刚确定该用户存在于存储库中，即使我刚刚猜到了密码，还不知道它是对还是错！相反，Spring Security 应该主要使用 响应`BadCredentialsException`，并且仅当凭据通过身份验证时才响应锁定、禁用或帐户过期异常。

有没有其他人看到/报告过这种行为？我已经搜索过，但在任何地方都看不到这个！

谢谢罗伯

## 编辑

我刚刚升级到**Spring 3.2.1.RELEASE**和**Spring Security 3.2.0.M1**，这种行为仍然保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:27:23.847

只有当异常消息进入 HTTP 响应时，这才会成为问题。检查代码表明，如果您使用默认命名空间配置 ( `<security:form-login>`)，情况并非如此，因为攻击者得到的所有响应都是对登录页面的 HTTP 重定向，而不管`AuthenticationException`服务器端抛出了什么类型的。

然而，阅读代码表明，可以以`AuthenticationFailureHandler`一种导致此信息公开的方式进行配置。
片段来自`SimpleUrlAuthenticationFailureHandler.onAuthenticationFailure()`：

```
 if (defaultFailureUrl == null) {
        logger.debug("No failure URL set, sending 401 Unauthorized error");

        response.sendError(HttpServletResponse.SC_UNAUTHORIZED,
           "Authentication Failed: " + exception.getMessage());
    } 
```

如果您的意思是这个问题，那么我认为您是对的，因为发回异常消息肯定比客户端应该看到的要多。尽管开发人员必须做出一些努力来实现这种不安全的行为，即将 设置`defaultFailureUrl`为 null。如果我没记错的话，这甚至是不可能通过纯粹使用命名空间配置来实现的（如果没有明确设置，则有一个默认值）。

# c++ - cuda-gdb 内核断点不起作用

> ID：14934323
> 
> 赞同：0
> 
> 时间：2013-02-18T10:39:45.533
> 
> 标签：c++, cuda, breakpoints, cuda-gdb

出于某种原因，我在特定内核中设置的断点被完全忽略了......我已经检查了错误状态`cudaGetLastError()`，它告诉我一切运行正常，所以我很确定这应该意味着内核已经执行。放置`printf`语句也不会产生额外的信息，因为没有打印任何内容。即使在进入调试模式的内核中，*调用*`printf`也没有效果。这里有什么问题？！

我们在 Tesla M2075（驱动程序版本 295.41）上运行 Cuda 4.2。调试时输出：

```
(cuda-gdb) break cudaCalcBeamIntersect
Breakpoint 1 at 0x401cfb: file cudacalcbeamintersect.cu, line 109.
(cuda-gdb) r
Starting program: /home/heit/cuda/vfind/vfind singleevent.txt 1 1 1 
[Thread debugging using libthread_db enabled]
[New Thread 0x7ffff5dd5700 (LWP 20241)]
[Context Create of context 0x634220 on Device 0]
[Launch of CUDA Kernel 0 (memset32_post<<<(64,1,1),(64,1,1)>>>) on Device 0]
[Launch of CUDA Kernel 1 (memset32_post<<<(8,1,1),(64,1,1)>>>) on Device 0]
[Launch of CUDA Kernel 2 (memset32_post<<<(64,1,1),(64,1,1)>>>) on Device 0]
[Launch of CUDA Kernel 3 (memset32_post<<<(1,1,1),(64,1,1)>>>) on Device 0]
[Launch of CUDA Kernel 4 (memset32_post<<<(1,1,1),(64,1,1)>>>) on Device 0]
[Launch of CUDA Kernel 5 (memset32_post<<<(8,1,1),(64,1,1)>>>) on Device 0]
[Launch of CUDA Kernel 6 (cudaInitializeGlobals<<<(256,1,1),(128,1,1)>>>) on Device 0]
no error
[Launch of CUDA Kernel 7 (cudaCalcBeamIntersect<<<(256,1,1),(128,1,1)>>>) on Device 0]
no error
Elapsed time: 0.876842 seconds.
[Thread 0x7ffff5dd5700 (LWP 20241) exited]
[Termination of CUDA Kernel 6 (cudaInitializeGlobals<<<(256,1,1),(128,1,1)>>>) on Device 0]

Program exited normally. 
```

“无错误”打印通过调用在内核外部打印`cout << cudaGetErrorString(cudaGetLastError()) << '\n';`，并指示两者`cudaInitializeGlobals()`（可以在 cuda-gdb 中单步执行）并且`cudaCalcBeamIntersect()`没有问题地执行。然而，后者不能被调试。

有问题的内核仍然是一个初步的内核，并计算一些值以存储在（静态）全局内存中。对这些值没有做任何其他事情，所以编译器会完全优化这个调用吗？如果是，为什么？？！！以及如何防止这种行为？（-O0 无效）

干杯!

编辑 - 代码：

** 调用内核的代码 **

```
 uint const nEvents = events.size();     // total number of events

    /* Not important ... */

// Allocate memory to hold the events
    Track *dev_events;                      
    cudaMalloc(&dev_events, linearEvents.size() * sizeof(Track));

// Copy all events to the GPU
    cudaMemcpy(dev_events, &linearEvents[0], linearEvents.size() * sizeof(Track), cudaMemcpyHostToDevice);

// Initialize the global data, like the histogram and the array of z-values
    cudaInitializeGlobals <<< tpb, bpg >>> ();
    cout << cudaGetErrorString(cudaGetLastError()) << '\n';

    cout << "Processing " << nEvents << " event(s)\n";
    uint linearIdx = 0;
    for (uint event = 0; event != nEvents; ++event)
    {
        uint nTracks = events[event].size();

        if (nTracks > MAX_NUMBER_OF_TRACKS)
        {
            cout << "Number of tracks in event " << event << " exceeds maximum number of tracks.\n";
            exit(1);
        }

        cudaCalcBeamIntersect <<< tpb, bpg >>> (dev_events + linearIdx, nTracks, bipThresh, binWidth);
        cout << cudaGetErrorString(cudaGetLastError()) << '\n';

    // Update linear index
        linearIdx += nTracks;
    } 
```

**cudacalcbeamintersect.cu**

```
#include "vfind.cuh"

__device__ float    dev_zMin;
__device__ float    dev_zMax;
__device__ float    dev_zValues[MAX_NUMBER_OF_TRACKS];
__device__ uint     dev_histogram[MAX_NUMBER_OF_BINS];

__constant__ Track dev_beam = 
{
    {0, 0, 1},
    {0, 0, 0}
};

__global__ void cudaInitializeGlobals()
{
    uint const tid = threadIdx.x + blockIdx.x * blockDim.x;
    uint const nThreads = blockDim.x * gridDim.x;

    if (tid == 0)
    {
        dev_zMin = 1e6;
        dev_zMax = -1e6;
    }

    uint idx = tid;
    while (idx < MAX_NUMBER_OF_BINS || idx < MAX_NUMBER_OF_TRACKS)          
    {
        if (idx < MAX_NUMBER_OF_BINS)
            dev_histogram[idx] = 0;

        if (idx < MAX_NUMBER_OF_TRACKS)
            dev_zValues[idx] = 0;

        idx += nThreads;
    }
}

__device__ float dot(float const v1[3], float const v2[3])
{
    // Stuff
}

__device__ float distance(Track const &t1, Track const &t2)
{
    // Even more boring unimportant stuff
}

__device__ Vertex vertex(Track const &t1, Track const &t2)
{
    // Yet even more boring unimportant stuff
}

__global__ void cudaCalcBeamIntersect(Track const *tracks, uint nTracks, float bipTresh, float binWidth)
{
    uint const tid = threadIdx.x + blockIdx.x * blockDim.x;
    uint const nThreads = blockDim.x * gridDim.x;

    uint idx = tid;
    while (idx < nTracks)
    {
        float dist = distance(tracks[idx], dev_beam);
        if (dist < bipTresh)
        {
            float z = vertex(tracks[idx], dev_beam).z;

            if (z < dev_zMin)
                atomicExch(&dev_zMin, z);

            if (z > dev_zMax)
                atomicExch(&dev_zMax, z);

            dev_zValues[idx] = z;
        }

        idx += nThreads;
    }

    __syncthreads();

    // To be continued here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:24:01.490

@JorenHeit 您的内核`cudaCalcBeamIntersect`具有全局内存副作用，不应进行优化。根据发布的 cuda-gdb 输出，看起来启动工作的主机线程没有等待工作完成（通过`cudaDeviceSynchronize()`调用或通过`cudaMemcpy`从设备到主机）。结果，主机线程`cudaCalcBeamIntersect kernel`在 GPU 上执行之前就退出了。请尝试`cudaDeviceSynchronize()`在您的应用程序中每次内核启动后添加一个调用。

# asp.net-mvc-2 - CreateIfNotExists 的命名空间是什么？

> ID：14934325
> 
> 赞同：3
> 
> 时间：2013-02-18T10:39:52.323
> 
> 标签：asp.net-mvc-2, azure

在我的应用程序中，我试图将文档上传到 Azure blob 存储。代码是：

```
// Namespaces for Azure
using Microsoft.WindowsAzure;
using Microsoft.WindowsAzure.StorageClient;

public ActionResult GetPdf(HttpPostedFileBase document)
{
    int pdfocument = Request.ContentLength;

    var doctype=Request.ContentType;

    byte[] pdf = new byte[pdfocument];               
    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(CloudConfigurationManager.GetSetting("Setting1"));
    CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();           
    CloudBlobContainer container = blobClient.GetContainerReference("containername");
    container.CreateIfNotExists();
    var permissions = container.GetPermissions();
    permissions.PublicAccess = BlobContainerPublicAccessType.Blob;
    container.SetPermissions(permissions);
    string uniqueBlobName = "blobname";
    CloudBlockBlob blob = container.GetBlockBlobReference(uniqueBlobName);
    blob.Properties.ContentType = doctype;
    blob.UploadByteArray(pdf);
} 
```

当我构建我的应用程序时，我在`container.CreateIfNotExists()`. 错误是：

> 'Microsoft.WindowsAzure.StorageClient.CloudBlobContainer' 不包含'CreateIfNotExists' 的定义，并且找不到接受类型为'Microsoft.WindowsAzure.StorageClient.CloudBlobContainer' 的第一个参数的扩展方法'CreateIfNotExists'（您是否缺少 using 指令还是程序集参考？）'。

我可以为该错误添加哪个命名空间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T10:50:38.697

CreateIfNotExists 是 Azure 库 2.0 版的一部分。

如果您使用的是 1.7 版 StorageClient 命名空间，那么您需要调用 CreateIfNotExist（非复数）

# javascript - 如何从浏览器剪贴板 api 获取动画 gif 图像？

> ID：14934327
> 
> 赞同：9
> 
> 时间：2013-02-18T10:39:53.617
> 
> 标签：javascript, google-chrome, clipboard, copy-paste, clipboarddata

我正在测试以下代码，当我复制动画 gif 并将其粘贴到网页时，我`image/png`在控制台中看到 - 而不是`image/gif`预期的那样。

为什么？

```
document.onpaste = function(event) {
  console.log(event.clipboardData.items[1]['type']); // 'image/png'
}; 
```

如何匹配 gif 图像？

例如，您可以在此[jsfiddle](http://jsfiddle.net/7RCMH/)使用[此](http://cs521112.userapi.com/u1275628/docs/dfba05c54eae/tumblr_inline_mhpve6KJlC1qz4rgp.gif)gif 图像对其进行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T21:53:39.693

CF_GIF 剪贴板格式很少使用。大多数应用程序仅以 CF_BITMAP、CF_ENHMETAFILE 或 CF_DIB 的形式将图像复制到剪贴板。然后，当您粘贴时，数据将转换为目标应用程序喜欢的任何格式，例如 PNG 或位图。因此，在您的情况下，GIF 很可能作为位图复制到剪贴板，然后在粘贴时转换为 PNG。GIF 的所有动画帧都丢失了。为了保存，您需要使用 CF_HDROP、CF_FileName 等进行拖放或模拟文件粘贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:47:33.553

当您通过（我假设）右键单击图像然后“复制图像”来复制 gif 图像时，您将复制当前帧而不是整个文件。如果您想捕获整个文件，那么我建议在拖放事件中捕获它。

# elasticsearch - ElasticSearch：如何使用 REST API 定义自定义分析器？

> ID：14934328
> 
> 赞同：2
> 
> 时间：2013-02-18T10:39:59.687
> 
> 标签：elasticsearch

我想通过 REST API 定义自定义分析器（我正在使用托管服务 - [http://searchbox.io](http://searchbox.io)），但我不明白该怎么做。

我正在尝试使用以下内容创建对 /myindex/_settings 的 PUT 请求：

```
 index: {
            analysis: {
                    analyzer: {
                            "my_analyzer": {
                                    type: "snowball",
                                    language: "English"
                            }
                    }
            }
    } 
```

但它不起作用，如果我索引一个将“my_analyzer”设置为分析器的字段，我会收到一个错误，它不存在..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:28:01.097

我找到了答案 - 创建索引时必须设置这些设置。

所以对 /myindex 的 POST 请求做到了。

# javascript - 我可以在不使用 Jquery UI 的情况下获得 Jquery 脉动效果吗？

> ID：14934336
> 
> 赞同：6
> 
> 时间：2013-02-18T10:40:20.813
> 
> 标签：javascript, jquery

我有一种情况，我不能使用 Jquery UI 是有原因的。我正在尝试在不使用 Jquery UI 的情况下获得 Jquery UI 脉动效果。与此链接类似，[http://docs.jquery.com/UI/Effects/Pulsate](http://docs.jquery.com/UI/Effects/Pulsate)。我搜索了很多，但找不到任何东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T10:56:06.207

我不知道原始 UI 代码是什么样的，但这是使用 animate 函数的超级简单实现：

```
$.fn.pulse = function(options) {

    var options = $.extend({
        times: 3,
        duration: 1000
    }, options);

    var period = function(callback) {
        $(this).animate({opacity: 0}, options.duration, function() {
            $(this).animate({opacity: 1}, options.duration, callback);
        });
    };
    return this.each(function() {
        var i = +options.times, self = this,
        repeat = function() { --i && period.call(self, repeat) };
        period.call(this, repeat);
    });
};

$("div").click(function() {
    $(this).pulse({times: 4, duration: 500});
}); 
```

检查下面的演示或这个[JsFiddle](http://jsfiddle.net/dfsq/4HUjn/1/)。

```
$("div").click(function() {
    $(this).stop().pulse({times: 4, duration: 300});
});

$.fn.pulse = function(options) {

    var options = $.extend({
        times: 3,
        duration: 1000
    }, options);

    var period = function(callback) {
        $(this).animate({opacity: 0}, options.duration, function() {
            $(this).animate({opacity: 1}, options.duration, callback);
        });
    };
    return this.each(function() {
        var i = +options.times, self = this,
        repeat = function() { --i && period.call(self, repeat) };
        period.call(this, repeat);
    });
};
```

```
div {background-color: green; padding: 20px; display: inline-block;}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div>Click me</div>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T10:43:13.257

您可以复制 jquery 脉动效果的来源并将其添加到您的项目中。

但有什么意义，如果您可以将该文件添加到您的项目中，为什么不添加原始的 jquery ui pulsate 文件。

您不必下载整个 jquery-ui，只需下载您想要的部分：http: [//jqueryui.com/download/](http://jqueryui.com/download/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T10:55:56.587

这里有一个用于脉动效果的独立 jquery 插件：

[https://github.com/jsoverson/jquery.pulse.js](https://github.com/jsoverson/jquery.pulse.js)

# flash - 在 AS2 中循环动态创建 MovieClip

> ID：14934338
> 
> 赞同：1
> 
> 时间：2013-02-18T10:40:22.983
> 
> 标签：flash, actionscript-2, movieclip

我尝试在每个循环中添加一个 MovieClip。

但是我的脚本会覆盖除最后一个之外的所有 MC。

我必须使用 AS2

```
var myXML:XML = new XML();
myXML.ignoreWhite=true;
myXML.load("config.xml");
myXML.onLoad = function(success){

    if (success){
        var images = myXML.firstChild.childNodes;

        for (i = 0; i <  images.length; i++) {
            var imageNumber = i+1;
            var imageValue = images[i].firstChild.nodeValue;
            var imageName = "image"+imageNumber;
            trace(imageName);

            _root.createEmptyMovieClip(imageName, this.getNextHighestDepth());

            trace(imageNumber+": "+imageName + i);

            imageName.loadMovie(imageValue);

            imageName.width=500;
            imageName.height=500;

            _root.imageName.loadMovie(imageValue);

        } // for loop
    } // if success
    trace("________________");
    trace("1: "+image1);
    trace("2: "+image2);    
    trace("3: "+image3);
} 
```

如果我在循环中跟踪 MC，它会起作用。MC们在舞台上。但是，如果我在循环外跟踪剪辑，则只有最后一个 MC 在舞台上。所有其他都是未定义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T14:41:22.347

我猜这个陷阱是在 onLoad 函数中使用“this”。如果您尝试在加载程序中跟踪“this”，您会发现它不会是您所期望的。加载程序的行为与框架上的常规代码不同。

我认为错误发生在这里：

```
_root.createEmptyMovieClip(imageName, this.getNextHighestDepth()); 
```

where`this.getNextHighestDepth()`给你一个恒定的高度，因为在这种情况下，“this”总是指同一个对象，并且新的影片剪辑不断替换相同高度上的旧影片剪辑。改为使用`_root.getNextHighestDepth()`。

如果你真的想在 onLoad 函数中使用“this”，那么将它分配给同一帧上的某个变量，但不在 onLoad 事件中。例如像这样：

```
handle=this;
myXML.onLoad = function(success){
  trace(handle); //what you expect
  trace(this); //not what you expect
} 
```

# java - 小程序 NullPointerException

> ID：14934346
> 
> 赞同：3
> 
> 时间：2013-02-18T10:40:45.850
> 
> 标签：java, applet, nullpointerexception

我一直在小程序中开发游戏。在 Eclipse 中它工作得非常好，但是当我签署它并将它加载到我的浏览器中时，它会抛出一个 NullPointerException，而没有任何进一步的信息。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T17:27:01.977

您在这里没有提供太多信息，但我可以猜测您正在调用`getAppletContext`并且它返回 null，因为浏览器的 java 实现已损坏。试试小程序查看器，然后尝试不同的浏览器，看看它是否在那里工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-01T14:34:34.577

这种事发生在我身上一次。你需要去：

*   配置 Java。
    *   安全。
    *   例外列表
    *   编辑列表，添加您的小程序目录。

我认为这应该可以解决问题！

# java - 安卓媒体播放器

> ID：14934350
> 
> 赞同：0
> 
> 时间：2013-02-18T10:41:01.963
> 
> 标签：java, android, android-mediaplayer

在 Android 中每秒播放媒体播放器有多少位/字节？.这个问题的目的是当我将 5 mb 音频文件转换为字节数组时。当媒体播放器从文件的开头到结尾播放文件时，我只能得到大约 1.5 mb 的文件。我使用一个类读取字节扩展异步任务。我怎样才能获得该文件的完整字节。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:29:02.167

当您遇到带有[https://en.wikipedia.org/wiki/Variable_bitrate](https://en.wikipedia.org/wiki/Variable_bitrate)的 mp3 时，您的方法将失败 您可以事先阅读该文件并对其进行分析。一些材料可以通过 google 找到，例如：[https ://en.wikipedia.org/wiki/MP3#File_structure](https://en.wikipedia.org/wiki/MP3#File_structure)

# c# - 可编辑的数据网格视图抛出异常

> ID：14934352
> 
> 赞同：0
> 
> 时间：2013-02-18T10:41:06.457
> 
> 标签：c#, asp.net, datagridview

我正在尝试创建一个可编辑的 DataGridView，并且我已将“ `AutoGenerateEditButton`”启用为 true，但是当我单击页面上的编辑时，它会引发此异常

> “System.Web.HttpException：GridView 'GridView1' 触发了未处理的事件 RowEditing。”

任何想法为什么？我正在使用的代码如下

我还想知道如何将编辑后的值更新到数据表中，以便更新。

## html

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateEditButton="True" Width="1060px">
</asp:GridView> 
```

## C#（代码隐藏）

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        add();
    }
}

private void add()
{
     DataTable dt = new DataTable();
     dt.Columns.Add("ab", typeof(string));
     dt.Columns.Add("ac", typeof(string));
     dt.Columns.Add("av", typeof(string));
     dt.Columns.Add("ax", typeof(string));
     DataRow row = dt.NewRow();
     row["ac"] = "sndasbfb";
     row["av"] = "sndasbfb";
     row["av"] = "sndasbfb";
     row["ax"] = "sndasbfb";
     dt.Rows.Add(row);
     GridView1.DataSource = dt;
     GridView1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:45:19.247

添加onrowediting事件..

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateEditButton="True" 
                    Width="1060px" Onrowediting="Gridview_rowediting">

                </asp:GridView>

protected void Gridview_rowediting(object sender, GridViewEditEventArgs e)
{

} 
```

要更新 gridview 添加 onrowupdating 事件..

```
protected void Gridview_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
   update();

}
private void update()
{
 DataTable dt = new DataTable();
 dt.Columns.Add("ab", typeof(string));
 dt.Columns.Add("ac", typeof(string));
 dt.Columns.Add("av", typeof(string));
 dt.Columns.Add("ax", typeof(string));
 DataRow row = dt.NewRow();
 row["ac"] = "newvalue";
 row["av"] = "newvalue";
 row["av"] = "newvalue";
 row["ax"] = "newvalue";
 dt.Rows.Add(row);
 GridView1.DataSource = dt;
 GridView1.DataBind();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:44:59.307

您需要为 RowEditing 添加一个事件

在这里查看更多信息： [http ://forums.asp.net/p/1144799/1850877.aspx#1850877](http://forums.asp.net/p/1144799/1850877.aspx#1850877)

* * *

```
gvSalesEventSearch.RowEditing += new GridViewEditEventHandler(gvSalesEventSearch_RowEditing);

void gvSalesEventSearch_RowEditing(object sender, GridViewEditEventArgs e)
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:00:56.387

由于错误提示您尚未处理该`OnRowEditing="GridViewEditEventHandler"`事件。
如果默认`edit link`是点击`gridview`

您将需要`OnRowEditing`按以下方式处理

```
<asp:GridView ID="GridView1" runat="server" OnRowEditing="GridView1_RowEditing"
         AutoGenerateEditButton="True" Width="1060px">
</asp:GridView> 
```

在后面的代码中，您必须按如下方式处理此事件

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
  //  GridView1.SelectedIndex = e.NewEditIndex;
      //do your stuff here
    add();
} 
```

# android - 无法为此类 LatLng 添加标记

> ID：14934353
> 
> 赞同：0
> 
> 时间：2013-02-18T10:41:08.537
> 
> 标签：android, google-maps-android-api-2

我正在使用以下代码在 Google 地图上添加标记，使用 Google-Maps-Android-V2

```
ll = new LatLng(lat, lng);

marker = map.addMarker(new MarkerOptions()
                    .position(ll)
                    .title("Title")
                    .icon(BitmapDescriptorFactory
                    .defaultMarker(BitmapDescriptorFactory.HUE_RED))); 
```

问题是，没有为像这样的值添加标记

> (18.5087013, 73.8125)

对于像

> (18.59672737121582,73.76543426513672)

标记已添加。

用于构造 lat 和 lng 值的任何规则（精度）`LatLng`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:07:54.623

只要改变你的位置：-`ll = new LatLng(lat*1e6, lng*1e6);`

# c# - 如何将 json 字符串反序列化为 c# dot 中的对象列表

> ID：14934360
> 
> 赞同：20
> 
> 时间：2013-02-18T10:41:36.777
> 
> 标签：c#, .net, json, desktop-application

我正在使用以下 JSON 字符串

```
{
"transactions": 
[
   {
    "paymentcharge":"0.0",
    "amount":352,
    "id":13418,
    "shippingcharge":35,
    "shippingtype":2,
    "status":2,
    "paymenttype":1,
    "date":"2012-10-06 16:15:28.0"
   },   
   {
    "paymentcharge":"0.0",
    "amount":42455,
    "id":16305,
    "shippingcharge":0,
    "shippingtype":2,
    "status":2,
    "paymenttype":2,
    "date":"2012-11-30 09:29:29.0"
   },   
   {
    "paymentcharge":"1.0",
    "amount":42456,
    "id":16305,
    "shippingcharge":0,
    "shippingtype":2,
    "status":2,
    "paymenttype":2,
    "date":"2012-11-30 09:29:29.0"
   }
],
"count":3
} 
```

* * *

我有一个如下的类结构来解析和感受 json 数据

```
class clsSalesTran
{
    public double paymentcharge { get; set; }
    public double amount { get; set; }
    public long id { get; set; }
    public int shippingcharge { get; set; }
    public int shippingtype { get; set; }
    public int status { get; set; }
    public int paymenttype { get; set; }
    public DateTime date { get; set; }
} 
```

* * *

如何将上述 JSON 字符串反序列化为 List ？

> 我正在使用*Newtonsoft.Json*进行反序列化。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-18T10:46:28.220

首先创建另一个类：

```
public class SalesTransactions
{
     public List<clsSalesTran> transactions {get;set;}
     public int count{get;set;}
} 
```

然后使用，

```
JsonConvert.DeserializeObject<SalesTransactions>(inputString) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-12-22T10:32:58.127

如下创建一个类
通过创建类“clsSalesTran”的列表和一个“Count”的变量

**注意：JsonProperty 是您的 Json 字符串中的必填项**

```
public class SalesTransactions
{
     [JsonProperty("transactions")]
     public List<clsSalesTran> transactions {get;set;}
     public int count{get;set;}
} 
```

然后你可以使用下面的这个类来反序列化

```
SalesTransactions st = JsonConvert.DeserializeObject<SalesTransactions>(inputString) 
```

使用反序列化对象如下

```
double paymentcharge = st.transactions[0].paymentcharge; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-06T19:24:19.117

要将字符串反序列化为 a`List`类型的对象`clsSalesTran`：

```
var myList = JsonConvert.DeserializeObject<List<clsSalesTran>>(inputString); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-04T12:10:06.137

```
class WeapsCollection
{
    public Dictionary<string, WeaponDetails> Weapons { get; set; }

}

class WeaponList
{
    public WeaponDetails AEK { get; set; }
    public WeaponDetails XM8 { get; set; }
}

class WeaponDetails
{
    public string Name { get; set; }
    public int Kills { get; set; }
    public int Shots_Fired { get; set; }
    public int Shots_Hit { get; set; }
}

class Program  
{
    static void Main(string[] args)
    {
        string json = @"
        {
           'weapons':

                    {
                       'aek':
                            {
                               'name':'AEK-971 Vintovka',
                               'kills':47,
                               'shots_fired':5406,
                               'shots_hit':858
                            },
                       'xm8':
                            {
                               'name':'XM8 Prototype',
                               'kills':133,
                               'shots_fired':10170,
                               'shots_hit':1790
                            },
                    }

        }";

        WeapsCollection weps = JsonConvert.DeserializeObject<WeapsCollection>(json);
        Console.WriteLine(weps.Weapons.First().Value.Shots_Fired);            

        Console.ReadLine();

    }
} 
```

如有任何问题，请回复。

# c++ - 从时钟（）函数获取 EXC_BAD_ACCESS 错误

> ID：14934362
> 
> 赞同：0
> 
> 时间：2013-02-18T10:41:40.030
> 
> 标签：c++, xcode

我有一个非常奇怪的错误，我无法解决。我构建了一个简单的程序来计时一段简单的代码

```
clock_t start, diff;
start = clock();
const int N = 1000;
int a[N][N];

for(int i=0 ; i<N ; ++i){
    for(int j=0 ; j<N ; ++j)
        a[j][i] = 0;
}

diff = clock()-start;
int msec = (int) diff*1000/CLOCKS_PER_SEC;
printf("time: %d milliseconds", msec); 
```

我在 xcode 上运行它（不确定这是否重要）并且运行良好，但是当我将 N 更改为 2000 时，我`EXC_BAD_ACCESS`在该行得到一个（代码 2，地址 = 0xfff5ecbd438）`start = clock()`。

我在这里不知所措，因为我不知道更改数组大小会如何影响`clock()` 命令。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:44:10.243

很可能您刚刚通过尝试将太大的数组分配为局部变量而破坏了堆栈。

2000 * 2000 * sizeof(int) 可能至少为 16MB。

它在那一点崩溃，因为数组是在之后声明的，那是堆栈分配发生的时候。

您可以通过将数组设置为全局和/或静态来将数组移出堆栈，但这可能有点麻烦，您最好使用 std::vector，它将正确分配和管理内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:09:56.947

它可能会让您对错误有所了解。EXC_BAD_ACCESS 这意味着您正在尝试访问无效指针。

# url - Yii url 从 localhost 或 www 开始

> ID：14934369
> 
> 赞同：0
> 
> 时间：2013-02-18T10:42:03.100
> 
> 标签：url, yii, localhost

我从一开始就需要一个 url，就像
`localhost/myApp/index.php?r=controller/action/id`
我在 localhost 和
`www.sitename.com/index.php?r=controller/action/id`.
稍后我会更改格式以使其对 SEO 友好，但现在 Yii::app()->baseUrl 给出`myApp/`
了我可以在 Yii 中使用什么功能从基础生成 url。显然我已经使用它了。但现在无法在[API](http://www.yiiframework.com/doc/api/1.1/)中找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:47:54.873

解决了它：

```
echo Yii::app()->createAbsoluteUrl('site/index'); 
```

从[API](http://www.yiiframework.com/doc/api/1.1/CApplication#createAbsoluteUrl-detail)本身。这将为您提供从根本上的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:54:58.483

您可以使用以下功能：

```
Yii::app()->getRequest()->getBaseUrl(true) 
```

# java - 用目标 c 实现线程锁

> ID：14934370
> 
> 赞同：0
> 
> 时间：2013-02-18T10:42:03.643
> 
> 标签：java, objective-c, multithreading, locking

我正在使用最新的 SDK 开发 iOS 5 及更高版本。

`Thread Lock`我必须在 Objective C中实现一个同步方法。

这是我必须做的Java版本：

```
public abstract class MyClass 
{
    [ ... ]

    private static Object dataLock = new Object();

    public static long dataId = 0;

    [ ... ]

    public static void PostData(byte[] data)
    {
        synchronized (MyClass.getDataLock())
        {
            dataId++;
            MyClass.getDataLock().notify();
        }
    }

    public static byte[] GetData()
    {
        synchronized (MyClass.getDataLock())
        {
            try
            {
                MyClass.getDataLock().wait();
            }
            catch (InterruptedException ex)
            {}

            return MyClass.getData();
        }
    }

    [ ... ]
} 
```

**如何`dataLock`在 Objective C 中实现？作为一个`NSObject`？****在Objective C**
**中我该怎么做`PostData`和方法？`GetData`**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:11:15.777

使用`NSCondition`类。例如：

```
static NSCondition* g_dataLock = nil;

...

+ (void)initialize
{
    if (self == [MyClass class])
    {
        g_dataLock = [NSCondition new];
    }
}

+ (void)postData:(NSData*)data
{
    [g_dataLock lock];
    dataId++;
    [g_dataLock signal];
    [g_dataLock unlock];
}

+ (NSData*)getData
{
    NSData* data = nil;

    [g_dataLock lock];
    [g_dataLock wait];

    data = ...

    [g_dataLock unlock];

    return data;
} 
```

有关更多信息，请参阅[线程编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html#//apple_ref/doc/uid/10000057i-CH8-SW1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:49:54.097

您可以使用 @synchronized(dataLock){...code here...} 但这不是[这里](http://perpendiculo.us/?p=133 "速度比较")描述的最快方式。

# java - 修改后如何保持 Java 日历更新？

> ID：14934372
> 
> 赞同：1
> 
> 时间：2013-02-18T10:42:07.260
> 
> 标签：java, time, calendar

我正在编写一个程序，该程序具有显示当前时间的标题。我想允许用户修改日期/时间设置。但是在用户修改之后，我无法让日历保持最新。它始终显示用户输入的值。例如：

```
Calendar cal = Calendar.getInstance();
System.out.println(cal.getTime());
cal.set(Calendar.MONTH, Calendar.SEPTEMBER);
try {
    Thread.sleep(2000);
} catch (InterruptedException e) {
    e.printStackTrace();
}
System.out.println(cal.getTime()); 
```

假设第一个输出是

```
Mon Feb 18 11:33:07 CET 2013 
```

我想要的是在 2 秒后获得第二个输出

```
Mon Sep 18 11:33:09 CET 2013 // Month = Sep and Seconds = 09 
```

我得到的是

```
Mon Sep 18 11:33:07 CET 2013 // Month = Sep, seconds don't change, still 07!! 
```

如果我`cal = Calendar.getInstance();`在第二个输出之前添加，我会得到

```
Mon Feb 18 11:33:09 CET 2013 // Seconds = 09, month doesn't change, still Feb!! 
```

我认为必须有一个我找不到的简单而明显的实现。

更新：我不能在我正在使用的嵌入式系统上使用 DateFormat。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:08:46.430

日历未更新，因为日历的时间将在创建对象时或您明确设置时间时设置。在您的情况下，它在此行之后设置。

```
Calendar cal = Calendar.getInstance(); 
```

如果你真的想这样做，你需要找到经过的时间并增加日历时间，如下所示，

```
long startTime = System.currentTimeMillis(); // Process start time

try {
    Thread.sleep(2000);
} catch (InterruptedException e) {
    e.printStackTrace();
}

// Calculating elapse time
long elapsedTime = System.currentTimeMillis() - startTime;
// Incrementing the calendar time based on elapsed time
cal.setTimeInMillis(cal.getTime().getTime() + elapsedTime); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:00:10.430

`Calendar`并且`Date`只是快照。创建它们后，它们不会自行更新。

无论您选择哪一种，每次您想要更新显示时都必须创建一个新的。然后对新快照进行调整。

如果您希望 Java 在更改月份时为您更改计算机时间，请参阅这篇文章：[如何在 Java 中设置系统时间？](https://stackoverflow.com/questions/6203857/how-can-i-set-the-system-time-in-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:49:08.587

您应该将月份存储为偏移量，而不是添加月份，然后尝试使用正确的秒数再次计算时间。每次您希望获得更新时间时，计算实际时间，然后添加偏移时间。

您可以将偏移时间计算为 a`long`并将其添加到实时。然而，这是一个更简单的例子 -

```
Calendar start = Calendar.getInstance();
System.out.println(start);
//add offset
int monthsOffset = 3;
//get new time
start.add(Calendar.MONTH, monthsOffset);
System.out.println(start); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:51:18.323

对于您的问题，您不需要使用`Date()`压延机。

原因： Calander 的工作方式与calandar 类似，您的实例指向一个不会改变的calander 的特定实例（如物理实例）。

但是由于 Date() 是动态的，如下所示

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
       //get current date time with Date()
       Date date = new Date();
       System.out.println(dateFormat.format(date)); 
```

**更新：** 回应评论“因为问题特定于嵌入式系统”

请参考[这个答案](https://stackoverflow.com/questions/7364443/how-to-format-a-date-in-java-me)

# jquery - 如何在广场滑块中居中对象

> ID：14934373
> 
> 赞同：3
> 
> 时间：2013-02-18T10:42:09.530
> 
> 标签：jquery, css, galleria

我正在使用 Galleria 插件，但我想做的是将主要对象居中，即 Galleria 滑块内的音频播放器。但是我该怎么做呢？

以下是基本的画廊风格：

```
<style>
    #galleriaaudio_<?php echo $key; ?>{ width: 550px; height: 200px; background: #000; }
</style> 
```

我在这里有演示应用程序页面：[DEMO](http://helios.hud.ac.uk/u0867587/Mobile_app/Text44.php)

更新：

下面是当前代码，尝试在滑块中选择每个特定的音频播放器并将其居中：

```
<?php

                          $j = 0;

        ?>

    <style>
        #galleriaaudio_<?php echo $key; ?>{ width: 550px; height: 200px; background: #000; margin:0; }
    </style>

     <div id="galleriaaudio_<?php echo $key; ?>">
    <?php
    foreach ($arrAudioFile[$key] as $a) { ?>

    <a href="audio.php?key=<?php echo $key; ?>&j=<?php echo $j; ?>&a=<?php echo $a; ?>"><img class="iframe" src="Images/audiothumbnail.png"></a>

    <?php $j++; ?>
    <?php } ?>
    </div><br/>

             <script type="text/javascript">

                          $(window).load(function(){
       var key = '<?php echo $key; ?>';
       var j = '<?php echo $j; ?>';
        $("#galleriaaudio_"+key)
            .find("iframe")
            .contents()
            .find("#jp_container_"+key+"-"+j)
            .attr('style', 'margin: 0 auto');
        });

                Galleria.loadTheme('jquery/classic/galleria.classic.min.js');
                Galleria.run('#galleriaaudio_<?php echo $key; ?>');

              </script> 

Below is releavt divs belonging to each audio player which gives each audio player uniqueness:

      <div id="jquery_jplayer-<?php echo $key.'-'.$j; ?>" class="jp-jplayer"></div>
      <div id="jp_container_<?php echo $key.'-'.$j; ?>" class="jp-audio"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T15:37:56.193

您可以尝试使用下面的 css 来解决问题。

**CSS：**

文件：[http ://helios.hud.ac.uk/u0867587/Mobile_app/jquery/skin/jplayer.blue.monday.css](http://helios.hud.ac.uk/u0867587/Mobile_app/jquery/skin/jplayer.blue.monday.css)

线路：33

```
div.jp-audio {
    margin: 0 auto;
    width: 420px;
} 
```

**截屏：**

![在此处输入图像描述](../Images/39798d9eae0dbee7e96c971ecfadc991.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:41:13.273

在[http://helios.hud.ac.uk/u0867587/Mobile_app/jquery/skin/jplayer.blue.monday.css](http://helios.hud.ac.uk/u0867587/Mobile_app/jquery/skin/jplayer.blue.monday.css)中，更改：

```
div.jp-audio {
    width:420px;
} 
```

至

```
div.jp-audio {
    width:420px;
        margin:0 auto;
} 
```

Margin 0 auto 通常用于以“正确方式”居中元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:10:08.967

使用 CSS 轻松实现（使用您现有的 ID 结构）：

```
#js { text-align: center; }
div.jp-audio { margin: 15px auto 0 auto; } 
```

`div`如果封闭的宽度发生变化，这也将保持流畅

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T11:55:58.410

如果您想用于任何特定项目，请使用此，

```
$(document).ready(function () {
    var key = '<?php echo $key; ?>';
    $("#galleriaaudio_"+key)
        .find("iframe")
        .contents()
        .find("#jp_container_"+key+"-0")
        .attr('style', 'margin: 0 auto');
 }); 
```

希望这会奏效。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-26T12:09:09.730

添加`margin:0 auto;`到`div.jp-audio`jplayer.blue.monday.css 文件的第 33 行

# javascript - 在受代理服务器限制的网络中获取网页 HTML

> ID：14934374
> 
> 赞同：0
> 
> 时间：2013-02-18T10:42:10.843
> 
> 标签：javascript, jquery, ajax

我正在使用以下函数来获取带有 URL url 的网页的 HTML 字符串。

```
 function GetWebPageHTML() {
       $.ajax({
           url: webpageURL,
           type: "GET",
           success: function (data) {
               alert('success');
           },
           error: function (xhr, status, errorThrown) {
               alert(errorThrown + '\n' + status + '\n' + xhr.statusText);
           }
       });
   } 
```

该代码在我的个人互联网上运行时会被执行，但是当该代码在我的办公室互联网环境中运行时，相同的代码会引发错误。原因可能是在我的办公室我们使用代理服务器。我对吗？如果我是对的，那么如何在我的代码中使用代理服务器 URL，以便我可以在所有环境中获取网页 HTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:45:52.997

如果浏览器被配置为使用代理服务器，那么它将自动使用它，您不需要对 JS 做任何特殊的事情来做到这一点。

如果您不喜欢浏览器的配置，那么 JavaScript（在网页中运行）将无法重新配置用户的浏览器以使用代理服务器（或不同的代理服务器或没有代理服务器）。

# windows - 从命令提示符修改目录名称列表

> ID：14934377
> 
> 赞同：0
> 
> 时间：2013-02-18T10:42:22.387
> 
> 标签：windows, directory, cmd

我有一项要求是通过命令提示符修改目录列表的名称。操作系统为 Windows Server 2008 R2。

示例 - 我确实有以下目录结构

*   根
    *   123#5
        *   11
        *   22
    *   123#6
        *   11
        *   22
        *   33
    *   123#7
    *   123#8
        *   44

我想通过批处理文件或命令提示符将上述目录结构更新为以下结构。

*   根
    *   123~5
        *   11
        *   22
    *   123~6
        *   11
        *   22
        *   33
    *   123~7
    *   123~8
        *   44

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:25:46.383

试试这个：

```
@echo off

setlocal EnableDelayedExpansion

for /r "C:\root" %%d in (.) do (
  set dirname=%%~nxd
  echo !dirname! | findstr "#" >nul
  if !errorlevel! equ 0 (
    set newname=!dirname:#=~!
    ren "%%~dpnd" "!newname!"
  )
)

endlocal 
```

# qt - 在 QML 中动态更新动画

> ID：14934378
> 
> 赞同：2
> 
> 时间：2013-02-18T10:42:26.243
> 
> 标签：qt, qml, qt5

我在 QML 中有一个属性动画，可以滚动名称列表。它应该从某个固定的 y 值滚动到其自身高度的负值，以便它恰好从屏幕上消失。

但是，名称列表是动态的，可以随时添加，因此我希望动画在`to`发生这种情况时立即具有更新的值。那部分，我已经下来了，但是动画似乎没有用新值重新初始化，并保留了旧的动画长度。

有什么方法可以在 QML 中做我想做的事吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:53:22.233

我不认为你的方法是正确的。

您可能想查看[`ListView`](http://qt-project.org/doc/qt-4.8/qml-listview.html)Item 及其[`positionViewAtIndex`](http://qt-project.org/doc/qt-4.8/qml-listview.html#positionViewAtIndex-method)方法。

# javascript - 在 jquery/javascript 中检测浏览器关闭以进行跨浏览器

> ID：14934380
> 
> 赞同：-2
> 
> 时间：2013-02-18T10:42:27.447
> 
> 标签：javascript, jquery, asp.net

window.onbeforeunload / window.onunload 在 chrome 中无法检测浏览器关闭事件。需要一些帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:46:26.580

检查这个 [http://help.dottoro.com/ljhtbtum.php](http://help.dottoro.com/ljhtbtum.php)

示例 [http://help.dottoro.com/external/examples/ljhtbtum/onbeforeunload_1.htm](http://help.dottoro.com/external/examples/ljhtbtum/onbeforeunload_1.htm)

代码

```
<head>
    <script type="text/javascript">
        function OnBeforeUnLoad () {
            return "All data that you have entered will be lost!";
        }
    </script>
</head>
<body onbeforeunload="return OnBeforeUnLoad ()">
    <b>Close this window or press F5 to reload the page.</b>
    <br /><br />
    <form>
        User name: <input type="text" name="username" />
        <br />
        City: <input type="text" name="city" />
    </form>
</body> 
```

# java - 2个进程的通用代码

> ID：14934381
> 
> 赞同：0
> 
> 时间：2013-02-18T10:42:28.897
> 
> 标签：java, jar

我有一个用于流程 A 的项目 A 和一个用于流程 B 的项目 B。这两个不同的流程（但它们可以通信）。
它们在进程启动时共享一个通用功能，并且当前代码是重复的。
我想为公共代码创建一个公共库，并将这个库作为两个项目的类路径的一部分。
这是一个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:46:46.503

是的，这是个好主意。

此外，在某些情况下，最好使用完全相同的类路径运行两个进程，但使用不同的主类，或者甚至使用相同的主类，但使用不同的命令行参数。当进程想要交换序列化对象时，这特别方便。

# jenkins - 使用 Jenkins 将构建工件（War 文件）部署到不同的环境（Dev、test、Prod）

> ID：14934382
> 
> 赞同：0
> 
> 时间：2013-02-18T10:42:29.447
> 
> 标签：jenkins, jenkins-plugins

每当开发人员使用 jenkins 将代码签入代码存储库时，我们就能够构建 Java 应用程序，并且生成的 war 文件会自动部署到开发环境（Tomcat 服务器）。稍后我们需要将相同的war文件部署到测试环境。jenkins 中是否有任何功能可以将 war 文件从 dev 部署到测试环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:22:13.623

您应该考虑设置一个工件存储库（Nexus、Artifactory），用于存储您的工件。然后，您的部署应始终从该存储库中获取工件。

要从 Nexus 执行部署，您可以使用部署插件[https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T00:23:34.100

我建议将 WAR 文件发布到 Maven 存储库中，例如[Nexus](http://www.sonatype.org/nexus/)，然后使用[Rundeck](http://rundeck.org/)执行部署。

Rundeck 有适用于[Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/RunDeck+Plugin)和[Nexus的插件](https://github.com/vbehar/nexus-rundeck-plugin)

# sharepoint - Sharepoint 2007 事件接收器 - 在开发环境中调试锁定生产

> ID：14934383
> 
> 赞同：0
> 
> 时间：2013-02-18T10:42:32.770
> 
> 标签：sharepoint, sharepoint-2007

很抱歉这个奇怪的标题，但我很难找到一个很好的问题描述，所以就这样吧。

我在我的项目中创建了一个事件接收器，它在我的开发服务器上以及当我将它（通过 stsadm/wsp）部署到生产环境时也能正常工作。当我调试（断点命中）我的开发人员的某些东西时，就会发生非常奇怪的问题。环境和某人将一个项目添加到附加了事件接收器的列表中。
在生产环境中。浏览器在选择新元素后立即挂起，并且一直保持这种状态，直到我的开发人员。env 不再调试。我在这两个环境之间找不到任何参考，我真的不明白发生了什么。我最好的猜测是开发人员。环境。锁定包含事件接收器的 dll，但如何连接 2 个不同的环境仍然是个谜。

我正在使用 Sharepoint 2007 和 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:16:33.153

我找到了问题的解决方案。

在开发人员创建的列表模板中。环境并移至生产服务器，有一个指向开发人员的静态 url。

出于某种原因，在创建元素时，开发人员请求 as jquery.js，而在调试模式下，IIS 无法响应。

我通过在生产环境中创建一个新的列表模板来解决这个问题。

# facebook - facebook rss - 如何增加拇指图像大小？

> ID：14934385
> 
> 赞同：5
> 
> 时间：2013-02-18T10:42:37.790
> 
> 标签：facebook, rss

我正在通过访问 facebook-rss

```
http://www.facebook.com/feeds/page.php?format=rss20&id=... 
```

**更新：**实际网址：

```
http://www.facebook.com/feeds/page.php?format=rss20&id=170589069647190 
```

但是，图像的拇指太小了。是否可以使用 rss-arg 或 FB-page 设置更改 tumbs 的大小？

（或者我应该以其他方式获取 FB 帖子）

问候，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T11:50:31.963

**免责声明**：这不是一个好方法，因为 Facebook 可能随时更改图像路径。

话虽如此，对于具有此文件名格式的每个图像： `XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX_s.jpg`

您可以将“.jpg”之前的字母“s”更改为“n”并获得更大的版本，如下所示： `XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX_n.jpg`

将其更改为“q”将为您提供宽度不超过 180 像素的图像 `XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX_q.jpg`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T18:30:23.093

您应该为此使用[Facebook Graph API](https://developers.facebook.com/docs/reference/api/)，它更加健壮、通用且维护得更好。

1.  `/PAGE_ID/feed`从端点开始，因此在您的示例`/170589069647190/feed`中。（在[资源](https://developers.facebook.com/tools/explorer)管理器中进行测试）太好了，现在您拥有与该 RSS 提要相同的帖子列表。请注意，每个带有照片的帖子都有一个`object_id`字段。
2.  对于每个`object_id`，转到端点`/OBJECT_ID?fields=images,height,width,source`。如果您要执行多个，最好将[它们批量](https://developers.facebook.com/docs/reference/api/batch/)处理以提高效率

这 2 个简单的步骤将为您提供每张照片状态更新的数据。外部`height`,`width`和`source`是原始上传尺寸和来源。但是该`images`数组为您提供了一堆调整大小的图像。选择最适合您需求的一种。

```
{
  "images": [
    {
      "height": 2048, 
      "width": 1365, 
      "source": "https://sphotos-b.xx.fbcdn.net/hphotos-snc7/s2048x2048/599910_508618522510908_1608434210_n.jpg"
    }, 
    {
      "height": 960, 
      "width": 640, 
      "source": "https://sphotos-b.xx.fbcdn.net/hphotos-snc7/599910_508618522510908_1608434210_n.jpg"
    }, 
    {
      "height": 720, 
      "width": 480, 
      "source": "https://sphotos-b.xx.fbcdn.net/hphotos-snc7/s720x720/599910_508618522510908_1608434210_n.jpg"
    }, 
    {
      "height": 600, 
      "width": 400, 
      "source": "https://sphotos-b.xx.fbcdn.net/hphotos-snc7/s600x600/599910_508618522510908_1608434210_n.jpg"
    }, 
    {
      "height": 480, 
      "width": 320, 
      "source": "https://sphotos-b.xx.fbcdn.net/hphotos-snc7/s480x480/599910_508618522510908_1608434210_n.jpg"
    }, 
    {
      "height": 320, 
      "width": 213, 
      "source": "https://sphotos-b.xx.fbcdn.net/hphotos-snc7/s320x320/599910_508618522510908_1608434210_n.jpg"
    }, 
    {
      "height": 270, 
      "width": 180, 
      "source": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-snc7/599910_508618522510908_1608434210_a.jpg"
    }, 
    {
      "height": 130, 
      "width": 86, 
      "source": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-snc7/599910_508618522510908_1608434210_s.jpg"
    }, 
    {
      "height": 130, 
      "width": 86, 
      "source": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-snc7/s75x225/599910_508618522510908_1608434210_s.jpg"
    }
  ], 
  "height": 720, 
  "width": 480, 
  "source": "https://sphotos-b.xx.fbcdn.net/hphotos-snc7/s720x720/599910_508618522510908_1608434210_n.jpg", 
  "id": "508618522510908", 
  "created_time": "2013-03-04T11:05:09+0000"
} 
```

注意：为了即时执行此操作，您需要一个[App Access Token](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)。

# content-management-system - 果园的子网站

> ID：14934390
> 
> 赞同：3
> 
> 时间：2013-02-18T10:42:56.773
> 
> 标签：content-management-system, orchardcms

我想使用 Orchard cms 来开发我的网站。但要求是在同一域下为每个国家/地区拥有一个站点，例如子站点。

例如：mydomain.com/uk/home、mydomain.com/us/home、mydomain.com/au/home 等

当用户登录时，我们必须检查用户来自哪里并将用户重定向到相应的网站。

在 Orchard，我们只能创建 1 个网站，我不知道如何添加子网站，就像我们在 Sharepoint 中所做的那样。

我的问题类似于下面链接的问题，除了我决定使用 Orchard CMS。 [同一语言的多个域的 CMS](https://stackoverflow.com/questions/13816180/cms-for-multiple-domains-in-same-language)

请告诉我在果园是否可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T14:12:30.023

为了使用相同的 Orchard 实例创建多个站点，您必须启用 MultiTenancy 模块。此外，您可以访问每个站点的详细信息，如下所示：[MultiTenancy Orchard - 如何找出请求来自哪个租户](https://stackoverflow.com/questions/15640465/multitenancy-orchard-how-to-find-out-which-tenant-the-request-is-coming-from)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:40:53.607

我没有尝试过，但是这个artlice：

[http://docs.orchardproject.net/Documentation/Setting-up-a-multi-tenant-orchard-site](http://docs.orchardproject.net/Documentation/Setting-up-a-multi-tenant-orchard-site)

提供有关设置多租户站点的详细信息。

可能有帮助。

# c# - 循环直到资本翻倍c#

> ID：14934394
> 
> 赞同：0
> 
> 时间：2013-02-18T10:43:08.933
> 
> 标签：c#, console-application

我想创建一个循环，该循环具有给定的初始资本和固定的年利率（利息），该循环打印出当年的当前资本，包括资本翻倍的那一年。

例如初始资本为3000，利息为12。

```
//3000*(1 + 12 / 100) = 3360

output
year 1 = 3360
year 2 = 3763.2
year 3 = 4214.78
year 4 = 4720.55
year 5 = 5287,02
year 6 = 5921,46
//end (when the initial capital(3000) has doubled (6000)) 
```

我需要帮助的是创建一个循环，该循环将计算并显示输出，直到资本通过 for 循环或 while 循环翻倍。输出不必像示例但类似。

这是我到目前为止创建的代码：

```
double initialcapital = 0;
double interest = 0;
int year = 0;
double capital = 0;

Console.Write("Initial capital: ");
initialcapital = int.Parse(Console.ReadLine());

Console.Write("Interest: ");
interest = int.Parse(Console.ReadLine());

capital = initialcapital * (1 + interest / 100);
year = year + 1
Console.Writeline(capital); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:52:50.747

```
 void displayCapital(double initalcapital, double interest){
     int year = 1;
     double capital = initialcapital;

     while(initialcapital > capital / 2) {
         Console.Write("Initial capital: ");
         initialcapital = int.Parse(Console.ReadLine());

         Console.Write("Interest: ");
         interest = int.Parse(Console.ReadLine());

         capital = initialcapital * (1 + interest / 100);
         year = year + 1
         Console.Writeline(capital);
     }
} 
```

只需调用 displayCapital(3000, 12); 你完成了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:07:13.783

如果您想在金额翻倍之前找到确切的年数，您可以使用：

```
double exactYears = Math.Log(2) / Math.Log((100 + interest) / 100); 
```

否则，以下内容将为您工作：

```
double initialCapital = 0;
double interest = 0;
int year = 0;
double capital = 0;

Console.Write("Initial capital: ");
initialCapital = int.Parse(Console.ReadLine());

Console.Write("Interest: ");
interest = int.Parse(Console.ReadLine());
capital = initialCapital;

while (capital < initialCapital * 2)
{
    capital = capital * (1 + interest / 100);
    year = year + 1;

    Console.WriteLine("Years: " + year);
    Console.WriteLine("Capital: " + capital);
}

Console.WriteLine("Years: " + year);
Console.WriteLine("Capital: " + capital);

double exactYears = Math.Log(2) / Math.Log((100 + interest) / 100);
Console.WriteLine(string.Format("Capital doubled in exactly: {0:0.000} years", exactYears)); 
```

# android - 在 2.2(Level8) 和 2.3.3(level10) 中工作的 Android 项目在 4.2.2(level16) 中不工作？

> ID：14934399
> 
> 赞同：-2
> 
> 时间：2013-02-18T10:43:21.613
> 
> 标签：android, web-services, response, android-api-levels

在我的项目中 JSONObject 和 JSONArray 数据在第 8 级和第 10 级工作，但相同的代码在第 16 级不工作 为什么这里发生这种情况是我的代码

```
 HttpClient httpclient = new DefaultHttpClient();

    HttpGet httpget = new HttpGet(url);
    HttpResponse response;
    try {
        response = httpclient.execute(httpget);
        Log.i("response", "response" + response);
        HttpEntity entity = response.getEntity();
        Log.i("entity", "entity" + entity);

        if (entity != null) {

            InputStream instream = entity.getContent();
            String result = convertStreamToString(instream);
            JSONObject json = new JSONObject(result);

            JSONObject jsonOnb = json.getJSONObject("query").getJSONObject("pages") ;
            JSONObject pagesObj = jsonOnb.getJSONObject(jsonOnb.names().getString(0));          

            Log.i("pageid", "pageid= " +pagesObj.get("pageid"));                   
            Log.i("title", "title= " +pagesObj.get("title"));  
            instream.close();
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

此代码在 8 级和 10 级工作，但不能在 16 级工作，在 16 级面临此错误

```
02-18 16:00:22.480: D/AndroidRuntime(605): Shutting down VM
02-18 16:00:22.480: W/dalvikvm(605): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
02-18 16:00:22.500: E/AndroidRuntime(605): FATAL EXCEPTION: main
02-18 16:00:22.500: E/AndroidRuntime(605): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.a/com.example.a.MainActivity}: android.os.NetworkOnMainThreadException
02-18 16:00:22.500: E/AndroidRuntime(605):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
02-18 16:00:22.500: E/AndroidRuntime(605):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-18 16:00:22.500: E/AndroidRuntime(605):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-18 16:00:22.500: E/AndroidRuntime(605):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-18 16:00:22.500: E/AndroidRuntime(605):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 16:00:22.500: E/AndroidRuntime(605):  at android.os.Looper.loop(Looper.java:137)
02-18 16:00:22.500: E/AndroidRuntime(605):  at android.app.ActivityThread.main(ActivityThread.java:4745)
02-18 16:00:22.500: E/AndroidRuntime(605):  at java.lang.reflect.Method.invokeNative(Native Method)
02-18 16:00:22.500: E/AndroidRuntime(605):  at java.lang.reflect.Method.invoke(Method.java:511)
02-18 16:00:22.500: E/AndroidRuntime(605):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-18 16:00:22.500: E/AndroidRuntime(605):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-18 16:00:22.500: E/AndroidRuntime(605):  at dalvik.system.NativeStart.main(Native Method)
02-18 16:00:22.500: E/AndroidRuntime(605): Caused by: android.os.NetworkOnMainThreadException
02-18 16:00:22.500: E/AndroidRuntime(605):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
02-18 16:00:22.500: E/AndroidRuntime(605):  at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
02-18 16:00:22.500: E/AndroidRuntime(605):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
02-18 16:00:22.500: E/AndroidRuntime(605):  at java.net.InetAddress.getAllByName(InetAddress.java:214)
02-18 16:00:22.500: E/AndroidRuntime(605):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
02-18 16:00:22.500: E/AndroidRuntime(605):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
02-18 16:00:22.500: E/AndroidRuntime(605):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
02-18 16:00:22.500: E/AndroidRuntime(605):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
02-18 16:00:22.500: E/AndroidRuntime(605):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
02-18 16:00:22.500: E/AndroidRuntime(605):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
02-18 16:00:22.500: E/AndroidRuntime(605):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
02-18 16:00:22.500: E/AndroidRuntime(605):  at com.example.a.MainActivity.onCreate(MainActivity.java:41)
02-18 16:00:22.500: E/AndroidRuntime(605):  at android.app.Activity.performCreate(Activity.java:5008)
02-18 16:00:22.500: E/AndroidRuntime(605):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-18 16:00:22.500: E/AndroidRuntime(605):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-18 16:00:22.500: E/AndroidRuntime(605):  ... 11 more 
```

`line 41 is`响应 = httpclient.execute（httpget）；`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:59:40.550

那是因为您 `webService`在主线程本身中调用网络操作（如）。

根据官方文档：[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

它更好用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:47:50.623

`onCreate()`您需要在函数中添加这两行代码

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

StrictMode.setThreadPolicy(policy); 
```

# c# - WP7 从列表框中删除项目

> ID：14934400
> 
> 赞同：0
> 
> 时间：2013-02-18T10:43:21.780
> 
> 标签：c#, windows-phone-7, listbox

我的页面中有这个列表框：

```
<ListBox x:Name="lstData" Tap="lstData_Tap" ItemsSource="{Binding 
                             Source={StaticResource favoriteAddressCollection}, 
                             Path=DataCollection}" Margin="22">
            <ListBox.ItemTemplate >
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Source="/Images/Search/favorite_red.png" Margin="12" />
                        <TextBlock Text="{Binding Path=Address}" VerticalAlignment="Center" Width="300" />
                        <Button BorderThickness="0"  Width="60" Height="60" HorizontalAlignment="Right"
                                Tap="imgDelete_Tap">
                            <Button.Background>
                                <ImageBrush ImageSource="/Images/Search/unfavorite.png"></ImageBrush>
                            </Button.Background>
                        </Button>
                        <!--<Image x:Name="imgDelete" Source="/Images/Search/unfavorite.png" Width="40" Margin="12" HorizontalAlignment="Right"
                               Tap="imgDelete_Tap" />-->
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

现在我想在单击该图像后删除项目。我没有设置 SelectedItem 或 SelectedIndex 那么我怎么能以其他方式删除项目？我怎样才能知道我在哪一行点击了图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:54:30.633

首先，我不建议在按钮上使用 Tap 事件。为此目的有 Click 事件。其次，与您的问题有关：在您的事件处理程序中（可以是 Tap 或 Click，没关系）您编写如下代码：

```
Button btn = sender as Button;
YourViewModelDataType itemContext = btn.DataContext as YourViewModelDataType; 
```

然后在`itemContext`变量中，您可以引用需要从收藏夹集合中删除的项目，或者对它做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:47:02.193

您应该将 SelectedItem 绑定为该按钮命令的参数/参数。然后，您可以将该按钮命令绑定到视图模型中的方法，其中所选项目会自动作为参数传递。

# asp.net - 谷歌地图 100% 高度在 IE 上不起作用

> ID：14934402
> 
> 赞同：0
> 
> 时间：2013-02-18T10:43:26.133
> 
> 标签：asp.net, internet-explorer, google-maps

我想将谷歌地图添加到我的一个网页中。我在 asp.net 中开发，地图应该是表单标签。因此我添加了以下代码：

```
<div id="map_canvas" style="width:100%; height:500px;margin: 0 auto;"></div> 
```

此代码在 IE 和 FF 上都可以正常工作。地图显示在两个浏览器上。现在，我想让地图填满屏幕的其余部分，所以我将代码更改为：

```
<div id="map_canvas" style="width:100%; height:100%;margin: 0 auto;"></div> 
```

此代码在 FF 上运行良好，但对 IE 无任何显示。有任何想法吗？

# php - 为 PHP 示例运行 Windows Azure 时出错

> ID：14934406
> 
> 赞同：0
> 
> 时间：2013-02-18T10:43:40.740
> 
> 标签：php, rest, azure

参考[http://cloudstory.in/2012/02/windows-azure-storage-for-php-developers/](http://cloudstory.in/2012/02/windows-azure-storage-for-php-developers/)上的示例为什么 require_once 'Microsoft/WindowsAzure/Storage/Blob.php'; 给出一个错误，说无法访问 Microsoft/WindowsAzure/Storage/Blob.php。但是，如果我尝试在位于 pear\WindowsAzure\Blob\Models\Blob.php 的文件夹结构中找到 Blob.php。如果我将此路径更改为正确的路径，则会收到此错误 Class 'Microsoft_WindowsAzure_Storage_Blob' not found。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:33:10.617

您正在使用新的官方 Microsoft Windows Azure PHP 包吗？按照这个[http://www.windowsazure.com/en-us/develop/php/](http://www.windowsazure.com/en-us/develop/php/)的教程，它应该可以工作！

# mongodb - Django Rest Framework 序列化失败：“MetaDict”对象没有属性“pk”

> ID：14934407
> 
> 赞同：2
> 
> 时间：2013-02-18T10:43:45.797
> 
> 标签：mongodb, mongoengine, django-rest-framework

我正在将 Django Rest 框架与 MongoDB 一起使用，我正在尝试从 MongoDB 检索文档，然后将其序列化为 json，以便将其发送回以响应请求。

我有一个看起来像这样的数据库模型：

```
class TTest(Document):
    user_id = StringField()
    submission_status = StringField() 
```

和相应的序列化器：

```
class TTestSerializer(serializers.ModelSerializer):

    class Meta:
        model = models.TTest
        pk = "_id" 
```

现在有了这些，我希望从数据库中检索一个文档，并尝试完全按照关于使用 Django Rest Framework 进行序列化的教程进行操作：

```
queryset = models.TTest.objects.filter(user_id='bbb')   # retrieving documents using mongoengine
serializer = TTestSerializer(queryset)
dt = serializer.data
print "DATA SERIALIZED: ", dt 
```

当我运行这些行，尝试序列化时，我得到了这个错误：

```
AttributeError: 'MetaDict' object has no attribute 'pk' 
```

从理论上讲，我认为它应该可以工作，因为我在序列化程序的元数据中声明主键是“_id”......有人可以帮我提个建议吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T13:00:55.647

Serializer 类中没有这样的选项“pk”，因此不会有任何影响。

我对 mongoengine 了解不多，但如果对象不是标准的 Django 模型实例，我希望您需要使用普通的“Serializer”类而不是“ModelSerializer”。

值得在 REST framework 邮件列表上询问有关 REST framework 和 mongoengine 的问题，因为我知道还有其他一些人一直在做同样的事情。

[https://groups.google.com/forum/?fromgroups#!forum/django-rest-framework](https://groups.google.com/forum/?fromgroups#!forum/django-rest-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:38:21.740

Mongoengine 不是 Django 的 ORM 的直接替代品，因此可能无法与期望正常 ORM 的库本地集成。

您可能想尝试使用 mongoengine 的 http://django-tastypie-mongoengine.readthedocs.org/en/latest/ [。](http://django-tastypie-mongoengine.readthedocs.org/en/latest/)

# c# - “操作无效，因为它会导致对 SetCurrentCellAddressCore 函数的可重入调用。” 不断弹出

> ID：14934408
> 
> 赞同：1
> 
> 时间：2013-02-18T10:43:45.660
> 
> 标签：c#

我有一个 datagridview，它从数据表中获取数据源，其中一列是 int

我希望程序在用户尝试在该列中输入字符串时显示错误

我将此添加到 DataError 事件中

```
 private void dataGridView1_DataError(object sender, DataGridViewDataErrorEventArgs e)
    {
        MessageBox.Show("Incorrect data type was entered");
        e.Cancel = true;
    } 
```

首先，消息框连续显示两次，而不是一次。
其次，在 2 个消息框之后我得到一个恼人的错误：
未处理的异常并出现错误：

> System.InvalidOperationException：操作无效，因为它会导致对 SetCurrentCellAddressCore 函数的可重入调用。

# regex - 仅当字符串中存在选定的单词时，RegEx 才匹配

> ID：14934412
> 
> 赞同：0
> 
> 时间：2013-02-18T10:44:09.460
> 
> 标签：regex, perl

我是 regEx 的新手，我找不到解决方案。如果该字符串中存在两个选定单词中的任何一个，我想匹配该字符串。

我是这样写的

```
perl -e ' "text   -aborted" =~ m/(.*)-[failed aborted]/; print "\n\n$1\n\n";' 
```

但问题是，即使字符串中存在任何失败或中止的字符，它也会匹配，例如

```
 perl -e ' "text   -fa" =~ m/(.*)-[failed aborted]/; print "\n\n$1\n\n";' 
```

我只想匹配失败或中止的完全匹配，有人请帮助如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:51:59.610

正则表达式中的方括号`[]`的行为与您在这里所期望的不同。它们匹配单个字符，并且该字符可以是方括号内的任何字符。例如，如果你想匹配一个小写元音，你可以这样做：

```
m/[aeiou]/ 
```

What you're looking for is an alternation. This will search for the word "failed" or "aborted":

```
m/(failed|aborted)/ 
```

That is, your choices are each separated by pipes `|`, and surrounded with parentheses `()`. You can chain these together too:

```
m/(many|different|acceptable|words)/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T10:51:29.087

*换*一个试试，像这样

```
m/(.*)-(?:failed|aborted)/ 
```

该`(?:...)`序列以与括号相同的方式对项目进行分组，但不形成捕获。

此外，您可以避免使用捕获尾随空格

```
m/(.*?)\s*-(?:failed|aborted)/ 
```

它使用非贪婪量词（带有附加的`?`）来允许模式匹配尽可能*少的*字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:51:21.987

`[...]`引入了一个字符类。列出的任何字符都与该类匹配。你需要一个*交替*：

```
"text -aborted" =~ /(.*)-(?:failed|aborted)/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T10:51:29.360

方括号表示一个[字符类](http://www.regular-expressions.info/charclass.html)，即（正如您正确注意到的）一个与括号内的字符之一匹配的正则表达式标记。

您需要简单的[替换](http://www.regular-expressions.info/alternation.html)( `|`) 以及非捕获括号 ( `(?:...)`)：

```
perl -e ' "text   -aborted" =~ m/(.*)-(?:failed|aborted)/; print "\n\n$1\n\n";' 
```

# php - PHP多个preg_replace函数在同一个实例中

> ID：14934414
> 
> 赞同：0
> 
> 时间：2013-02-18T10:44:15.283
> 
> 标签：php

我目前有这个代码：

```
 <h3><a href="<?php echo (isset($row_getDisplay['post_id']) ? $row_getDisplay['post_id'] : ''); ?>-<?php echo preg_replace('%[^-/+|\w ]%', '', ($row_getDisplay['title'])); ?>.html" ><?php echo (isset($row_getDisplay['title']) ? $row_getDisplay['title'] : ''); ?></a></h3> 
```

哪个输出：

> 海盗湾 - AFK 纪录片评论

但是，你可以看到它是一个 URL；我希望它显示如下：

> the_pirate_bay_afk_documentary_review

我对如何去做这件事完全感到困惑。
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:46:57.383

做第二个 preg_replace：

```
 preg_replace('/\s+/', '_', $url); 
```

然后运行它：

```
 $url=strtolower($url); 
```

然后回应它。

# javascript - 如何使用 jquery 更新表头

> ID：14934415
> 
> 赞同：4
> 
> 时间：2013-02-18T10:44:20.043
> 
> 标签：javascript, jquery, html-table

我有一个表格，我试图根据表格单元格中的值存在来创建类似的东西。

要获得的结果 - [jsFiddle 结果](http://jsfiddle.net/trialcode/3Fsrv/)

```
<table width="100%" border="1" cellspacing="0" cellpadding="0" class="top-table-bg" id="mytable">
                        <tbody><tr>
                            <th style="width:200px"><br>First Row<br>Second Row<br>Third Row<br>Forth Row<br></th>
                            <th style="width:200px"><p>Heading1<br>
                            </p>
                              <p>First Row<br>
                              </p></th>
                            <th style="width:200px"><p>Heading2
                              <br>
                          </p>
                              <p>Second Row
                                <br>
                          Forth Row<br>
                              </p></th>
                            <th style="width:200px"><p>Heading3
                              <br>
                          </p>
                              <p>Second Row<br>
                          Third Row<br>
                          <br>
                              </p></th>                         
                        </tr>
                        <tr>
                            <td style="width:200px;text-align:center;">First Row</td>
                            <td style="width:200px;text-align:center;">20</td>
                            <td style="width:200px;text-align:center;"></td>
                            <td style="width:200px;text-align:center;"></td>
                        </tr>
                        <tr>
                            <td style="width:200px;text-align:center;">Second Row</td>
                            <td style="width:200px;text-align:center;"></td>
                            <td style="width:200px;text-align:center;">20</td>
                            <td style="width:200px;text-align:center;">20</td>
                        </tr>
                        <tr>
                            <td style="width:200px;text-align:center;">Third Row</td>
                            <td style="width:200px;text-align:center;"></td>
                            <td style="width:200px;text-align:center;"></td>
                            <td style="width:200px;text-align:center;">20</td>
                        </tr>   
                        <tr>
                            <td style="width:200px;text-align:center;">Forth Row</td>
                            <td style="width:200px;text-align:center;"></td>
                            <td style="width:200px;text-align:center;">20</td>
                            <td style="width:200px;text-align:center;"></td>
                        </tr>       
                    </tbody></table> 
```

这就是我尝试过的，但它填充了所有值:(

我的尝试 - [jsFiddle 尝试](http://jsfiddle.net/trialcode/PXJjA/2/)

```
$('#mytable>tbody>tr').each( function(){
   if($(this).text() != '' ) {
   $('th').append($(this).children('td').first().text() + "<br>");
   }
}); 
```

让我知道我做错了什么..在jquery中启动..如果是基本的，请原谅

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:00:00.213

```
$('#mytable > tbody > tr').each(function() {
  var $tr = $(this);

  $tr.children("td").not(":nth-child(1)").each(function() {
    if ($(this).text() != '') {
      var index = $(this).index() + 1;

      $("th")
        .filter(":nth-child(" + index + ")")
        .append("<br/>" + $tr.children("td:first").text());
    }
  });
})
```

```
#mytable th {
  width:200px;
}

#mytable td {
  text-align: center;
  width: 200px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<table width="100%" border="1" cellspacing="0" cellpadding="0" class="top-table-bg" id="mytable">
  <tr>
    <th></th>
    <th>Heading1</th>
    <th>Heading2</th>
    <th>Heading3</th>
  </tr>
  <tr>
    <td>First Row</td>
    <td>20</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>Second Row</td>
    <td></td>
    <td>20</td>
    <td>20</td>
  </tr>
  <tr>
    <td>Third Row</td>
    <td></td>
    <td></td>
    <td>20</td>
  </tr>
  <tr>
    <td>Forth Row</td>
    <td></td>
    <td>20</td>
    <td></td>
  </tr>
</table>
```

我还用外部 CSS 替换了内联样式声明。

# jquery - 检查单击的列是否在行中的第一个

> ID：14934421
> 
> 赞同：4
> 
> 时间：2013-02-18T10:44:39.533
> 
> 标签：jquery, html, css

想要一个 Jquery 代码来检查单击的列是否在行中的第一个。

正在使用一个表格来选择某些选项。在单击时，通过使用 jquery 分配一个 CSS 类并从所有同级 td 元素中删除该类（每行一个选择）来显示单击的 td 的背景（一个刻度线）。

问题是它不应该在单击第一列时执行此操作，因为它包含选项/问题的标签。

当前代码如下：

```
 $(document).ready(function () {
    $("table tr td").click(function () {
        $(this).parent().find('td').each(function () {
            $(this).removeClass("CheckMark");
        });
        $(this).addClass("CheckMark");
    });
}); 
```

如果列是第一列，则不应执行任何操作，因为它包含选项的标签。

希望已经充分解释了情况:)。

亲切的问候，阿里

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T10:46:34.353

使用[index()](http://api.jquery.com/index/)找出点击的第一列`td`。如果 index() 给出零，那么它将是第一列，因为`index()`给出了*从零开始的*索引。

```
$(document).ready(function () {
    $("table tr td").click(function () {

        if($(this).index() == 0) return;    

        $(this).parent().find('td').each(function () {
            $(this).removeClass("CheckMark");
        });
        $(this).addClass("CheckMark");
    });
}); 
```

# php - 表单数组被完整发送但部分接收

> ID：14934424
> 
> 赞同：0
> 
> 时间：2013-02-18T10:44:48.300
> 
> 标签：php, jquery, ajax, post, multidimensional-array

我正在向服务器发送一个大表格。

现在看我看到的开发者工具： ![在此处输入图像描述](../Images/7437898f380bc534c172754e7e437dda.png)

由于已经发送了 560 行，但是当`print_r($_POST)` 我看到只有 500 行时。

现在我尝试设置：

```
ini_set('memory_limit', '1024M'); 
```

而且我已经`post_max_size`设置为 8M 并且增加它似乎也不起作用。还尝试设置`max_input_vars`为 1000000 但结果相同。

我正在使用 jQuery 通过 ajax 提交表单。我用 Chrome 和 FF 得到了相同的结果

知道是什么原因造成的吗？

这是客户端脚本：

```
 $.ajax({
    type: 'POST',
    dataType: 'json',
    data: { data : fullTableToJson($('#charges_table').get(0)),title : "sometitle"},
    url: 'url with get parameters',
    success : function(result) {    

    }
}); 
```

`fullTableToJson`是一种将 html 表转换为 json 的方法，它可以像我在代码中的许多地方使用它一样工作。

这可能与我的 url 包含 GET 参数的事实有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:09:22.487

好吧，问题是我`max_input_vars`设置为 3000，我尝试发送 560x6 的项目，即 3360 项目，这解释了飞跃。

现在我尝试用

```
ini_set('max_input_vars', 999999); 
```

并假设它没有解决它，但检查`phpinfo();`我发现它没有改变。

因此在 php.ini 文件中进行了更改并且它起作用了。

# java - java swing客户端服务器有问题的应用程序设计

> ID：14934425
> 
> 赞同：1
> 
> 时间：2013-02-18T10:44:48.663
> 
> 标签：java, swing, netbeans, applet, awt

我正在使用netbeans在java中开发swing客户端服务器应用程序，它是vb的一个项目并在java中制作，

我已经编写了一些初始代码，例如创建的 gui，运行了一个线程进行连接，现在为了将来可扩展，我想让它变得更加独立。例如。gui（这里是NewJFrame.java）与主类分开，另一个类是client.java，它为它处理连接和线程。

所以设计是，**主类**（NewClass.java）

```
public class NewClass {

    public static void main(String args[])
    {
        ClientA A = new ClientA();
        A.go();
    }
} 
```

**GUI 类**(NewJFrame.java )

```
public class NewJFrame extends javax.swing.JFrame {

    public NewJFrame() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jList1 = new javax.swing.JList();
        jTextField1 = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("jButton1");
        jButton1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton1MouseClicked(evt);
            }
        });
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jList1.setModel(new javax.swing.AbstractListModel() {
            String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
            public int getSize() { return strings.length; }
            public Object getElementAt(int i) { return strings[i]; }
        });
        jScrollPane1.setViewportView(jList1);

        jTextField1.setText("jTextField1");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(25, 25, 25)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 355, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jButton1)
                        .addGap(26, 26, 26)
                        .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 86, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(20, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(19, 19, 19)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 220, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(27, 27, 27))
        );

        pack();
    }// </editor-fold>                        

    public void setTexter(String s ) { // the setter method to set text of "jTextField1"
        jTextField1.setText(s);
    }

    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JList jList1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration                   
} 
```

用于套接字或网络的**ClientA类 (ClientA.java)**

```
import java.io.*;
import java.net.*;

public class ClientA {
BufferedReader reader;
Socket sock;
NewJFrame gui;
    public void go()
    {
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                gui  = new NewJFrame();
                gui.setVisible(true);
            }
        });
       setUpNetworking();

    }

        public void setUpNetworking() {
            gui.setTexter("HEllo");
        try {

            String message;
            sock = new Socket("127.0.0.1",8888);
            InputStreamReader streamReader = new InputStreamReader(sock.getInputStream());
            reader = new BufferedReader(streamReader);

            System.out.println("Recieved + " + reader.readLine());

            while((message = reader.readLine() ) != null) {
                System.out.println("Recieved + " + message);
            }
            System.out.println("Network Established !!! from client");
        }  catch (IOException ex) {
            ex.printStackTrace();
        }
    }
} 
```

但问题是，在 Client.java 文件中，使用 NewJFrame.java 中的 setter 方法设置**jTextField 的值**时，Client.java 中发生错误为“线程“main”java.lang.NullPointerException 中的异常”。

我该如何解决它，或者我认为这不是应用程序的正确类设计，那么客户端服务器的客户端应用程序的正确类设计是什么？

# postgresql - 将一组 hstore 值作为表类型的一组记录返回

> ID：14934427
> 
> 赞同：1
> 
> 时间：2013-02-18T10:44:51.507
> 
> 标签：postgresql, hstore

我开始试验 Postgres 的审计日志功能，如[http://wiki.postgresql.org/wiki/Audit_trigger_91plus](http://wiki.postgresql.org/wiki/Audit_trigger_91plus)中所述。 此功能将更改记录的新值存储在 hstore 字段中。

我想检索 hstore 字段值作为记录表的一**组记录**。

Postgres 文档说将 hstore 转换为记录类型如下所示：

```
CREATE TABLE test (col1 integer, col2 text, col3 text);
SELECT * FROM populate_record(null::test, '"col1"=>"456", "col2"=>"zzz"'); 
```

这适用于一个信号记录，但我不知道如何对多个记录做同样的事情。我试过这个：

```
SELECT
  populate_record(null::public.usr, logged_actions.row_data)
FROM
  audit.logged_actions
WHERE
  audit.logged_actions.table_name = 'usr' 
```

...但它为 usr 表的每个记录记录返回一个复合列。

有什么想法可以在这里将 hstore 值集作为 usr 类型的记录集返回吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T15:09:58.453

我在这里找到了答案，非常感谢 Sergey Konoplev：

[http://www.postgresql.org/message-id/CAHot5JHzZ1LRHk3vizuTX2-Bw-C54cz-tFL7Cg=99t6LLaCoZA@mail.gmail.com](http://www.postgresql.org/message-id/CAHot5JHzZ1LRHk3vizuTX2-Bw-C54cz-tFL7Cg=99t6LLaCoZA@mail.gmail.com)

```
SELECT
  (populate_record(null::public.usr, logged_actions.row_data)).*
FROM
  audit.logged_actions
WHERE
  audit.logged_actions.table_name = 'usr' 
```

# android - 针对不同密度缩放相同的图像

> ID：14934428
> 
> 赞同：0
> 
> 时间：2013-02-18T10:44:54.180
> 
> 标签：android, android-layout, android-screen

通常，当我开发应用程序时，我会将每个图像的大小调整为不同的密度（ldpi、mdpi、hdpi、xhdpi）。但是我想知道如果我通过仅提供密度 xhdpi 的图像将任务留给操作系统会有什么不同？图形结果似乎相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:32:38.603

使用 hdpi 和 mdpi，您可以覆盖大多数设备。很少有设备有 xhdpi，我相信不到 1%。还有 ldpi，忘记 ldpi。如果您只想做一种密度来节省一些工作，请至少选择 hdpi，而不是 xhdpi。

如果您让设备自动进行自己的缩放，特别是如果您在其中一部低端手机上执行此操作，我猜想它会在每次实例化您的应用程序时减慢该手机的速度。

# html - div.menu ul li a:visited 是否继承了 div.menu ul li a？

> ID：14934431
> 
> 赞同：0
> 
> 时间：2013-02-18T10:45:02.293
> 
> 标签：html, css

我正在写一些 CSS EDSL，但我无法理解这里的关系

```
div.menu ul li a, div.menu ul li a:visited { 
```

它是默认 Microsoft ASP.NET WebForms 模板的一部分，我不确定这是否正常。

因为如果这是理智的，那么我做的一切都是错的。

我现在能看到的是

```
div.menu ul li a { 
```

将产生相同的效果，因为它`a`必须影响所有其他选择器。

而且我看不出作者在`div.menu ul li a:visited`此处添加的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:54:02.253

用普通话来说：

> 这种风格将应用于每个，`a`即在 a中**，**`li`即在 a`ul`中，在 a 中，在 a 中，在 a 中，在 a 中， 在 a中，在 a中，在 a中。`div``menu` **`:visited` `a``li``ul``div``menu`**

 **换句话说：访问（或不访问）时锚链接的属性将是相同的（对于那个`.menu`）。

另请查看[CSS 选择器参考](http://www.w3schools.com/cssref/css_selectors.asp)以获取更多示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:55:21.817

要将同一属性集应用于多个属性，请使用逗号。所以：

```
 div.menu ul li a, div.menu ul li a:visited {
    color: #ccc;
 } 
```

将为普通链接和访问链接设置颜色。默认情况下，浏览器有自己的颜色：

*   标准链接 - `#0000FF`//蓝色
*   访问过的链接 - `#800080`//紫色
*   活动链接 - `#FF0000`//红色

这是一个标准，但现在每个浏览器都有很大的不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:48:53.307

这意味着，锚链接和访问的锚的属性都是相同的。**

# excel - 无法在中断模式下执行宏

> ID：14934433
> 
> 赞同：7
> 
> 时间：2013-02-18T10:45:06.037
> 
> 标签：excel, excel-2010, vba

我正在尝试编写一个简单的宏来将 1 添加到单元格的当前值：

```
Sub add()
    MsgBox Selection.Value
    Selection.Value = Selection.Value + 1
End Sub 
```

当我单击（数字）单元格并尝试运行宏时，我收到以下错误消息：

```
Cannot Execute in Break Mode 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T10:54:08.097

您已经在执行一个宏并且以某种方式停止了它的执行（例如，由于未处理的错误或因为您在执行期间按下了`Ctrl`- `Break`）。在这种状态下，您不能执行另一个宏。

在 Visual Basic 编辑器中，您需要按下停止按钮： ![在此处输入图像描述](../Images/fe5ba5f9ccb0419be0166a37e4f12f04.png)

然后就可以运行宏了。

如果您想了解当前执行的停止位置，请右键单击代码并选择*Show Next Statement*。如果您然后按`F8`，您可以单步执行代码。`F5`继续执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:25:48.570

您应该检查单元格中的值是否为数字。例子

```
Sub add()
    If IsNumeric(Selection.Value) Then
        Selection.Value = Selection.Value + 1
    Else
        MsgBox ("Not a value selected")
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-12-30T07:34:19.063

```
Sub Lower()
    Range ("e3"), Value = Range("e3"), Value - 1
End Sub

Sub Higher()
    Range ("e3"), Value = Range("e3"), Value + 1
End Sub 
```

# jsp - Bean 和 jsp：classes.UserData 无效

> ID：14934434
> 
> 赞同：0
> 
> 时间：2013-02-18T10:45:14.397
> 
> 标签：jsp, javabeans

我已经阅读了有关以下异常的几个线程：

```
org.apache.jasper.JasperException: /savename.jsp(1,1) The value for the useBean class attribute UserData is invalid. 
```

我看见 ：

[JavaBean 'useBean 类属性 classes.UserData 的值无效'](https://stackoverflow.com/questions/933320/javabean-value-for-the-usebean-class-attribute-classes-userdata-is-invalid?rq=1)

[useBean 类属性的值...无效](https://stackoverflow.com/questions/545177/the-value-for-the-usebean-class-attribute-is-invalid)

所以我有 ：

1.  我的 Bean 有没有 args、setter 和 getter 的构造函数。
2.  我的 .class 在 myApp/WEB-INF/classes/mypackage/
3.  我使用我的 bean 在我的 jsp 中有这些行：

我在这里想念什么？我已经做了所有的要求。

另请参阅我的 bean 代码：

```
package user;
import java.util.*;
import java.io.Serializable;

public class UserData implements Serializable{

    private String user;
    private String mail;
    private String age;

    public UserData(){
    }

    public void setUser(String user){
        this.user = user;
    }

    public void setMail(String mail){
        this.mail = mail;
    }

    public void setAge(String age){
        this.age = age;
    }

    public String getUser(){
        return user;
    }

    public String getMail(){
        return mail;
    }

    public String getAge(){
        return age;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:09:50.020

再次安装tomcat解决了这个问题。我仍然不知道发生了什么事。

# html - 纯粹使用 CSS 分隔动态导航项

> ID：14934436
> 
> 赞同：3
> 
> 时间：2013-02-18T10:45:20.197
> 
> 标签：html, css

我知道我可以使用 javascript 来实现这一点，但是我想知道是否有人有任何聪明的想法如何使用纯 CSS 来完成，这样我就可以避免在 DOM 加载和应用样式或必须在每次页面更改时使用加载 gif 来隐藏它。

基本上，导航具有固定宽度，例如 960。该站点是 CMS 驱动的，因此客户端可以有 2 个菜单项或 10 个菜单项。菜单项应根据其中包含的文本长度调整大小，并且每个菜单项应具有统一的填充，如下所示：

![在此处输入图像描述](../Images/3b8248c0267349657ed42d48e714aa51.png)

![在此处输入图像描述](../Images/8b0a59d467a417285a48548be7b0843c.png)

理想情况下，我想避免使用表格。我很确定我想要实现的目标是不可能的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:47:36.463

您需要的称为 Flex-Box（柔性盒）模型。它并非在所有浏览器中都实现。是的，出于测试目的，您可以继续使用以下 CSS。

**CSS**

```
ul li {
    display: -webkit-box;
    -webkit-box-orient: horizontal;
    display: -moz-box;
    -moz-box-orient: horizontal;
    display: box;
    box-orient: horizontal;
    -webkit-box-flex: 1;
    -moz-box-flex: 1;
    box-flex: 1;
} 
```

[您可以在Quick hits with the Flexible Box Model](http://www.html5rocks.com/en/tutorials/flexbox/quick/)中查看基本和高级示例。

* * *

**Flexbox 模型布局**

普通框
[http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/en/tutorials/flexbox/quick/475x297xflex01.gif.pagespeed.ic.I78_V3_QCI。 webp](http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/en/tutorials/flexbox/quick/475x297xflex01.gif.pagespeed.ic.I78_V3_QCI.webp)
Flexbox 最后一个
[http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/en/tutorials/flexbox/quick/475x297xflex02.gif.pagespeed。](http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/en/tutorials/flexbox/quick/475x297xflex02.gif.pagespeed.ic.sSh_w3N6ER.webp)
最后两个的[ic.sSh_w3N6ER.webp Flexbox](http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/en/tutorials/flexbox/quick/475x297xflex02.gif.pagespeed.ic.sSh_w3N6ER.webp)
[http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/en/tutorials/flexbox/quick/475x297xflex03.gif .pagespeed.ic.QuC9JhvmNd.webp](http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/en/tutorials/flexbox/quick/475x297xflex03.gif.pagespeed.ic.QuC9JhvmNd.webp)

# exception - Extjs 4.1 从服务器成功删除后从商店中删除

> ID：14934439
> 
> 赞同：0
> 
> 时间：2013-02-18T10:45:38.297
> 
> 标签：exception, extjs, proxy, handler, store

我有一种情况，我需要从商店中删除商品，我正在使用 remove(record) 方法，我的目标是仅在服务器删除商品并返回成功消息后才从商店中删除商品。商店使用 ajax 代理对服务器进行 DELETE 调用，并同时使用自动加载和自动同步。当调用 remove(record) 时，它首先从存储中删除记录，然后继续对服务器进行 DELETE 调用。

我觉得这种行为有点奇怪，因为似乎我必须根据服务器的响应手动将模型重新插入到存储中。使情况更加复杂的是，“异常”事件是由代理而不是商店处理的。此外，代理与存储无关，因此在代理中捕获服务器响应生成的异常事件，不允许我在存储上执行诸如rejectChanges 之类的操作。

显然我的实现逻辑有问题，所以我需要了解的是如何在服务器响应后根据服务器的响应更改存储，或者如果不可能将存储返回到操作前的先前状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:06:26.433

我为此使用代理的“异常”事件。例如：

```
store.getProxy().on({
    exception: function() {
        store.rejectChanges();
    }
}) 
```

它也可以添加到您的商店：

```
initComponent: function() {
    this.callParent(arguments);
    this.getProxy().on({
        exception: function(proxy, response, operation) {
            this.rejectChanges();
        }
    });
} 
```

# asp.net - 使用浏览器本地化导出到 excel - ASP.Net

> ID：14934440
> 
> 赞同：0
> 
> 时间：2013-02-18T10:45:41.243
> 
> 标签：asp.net, gridview, localization, export-to-excel

我有gridview，我正在用下面的代码导出到excel那个gridview。

```
Response.ClearContent()
Response.AddHeader("content-disposition", "attachment; 
                       filename=ExcelShipments_" & DateTime.Now.Ticks & ".xls")
Response.ContentType = "application/excel"
Dim sWriter As New StringWriter()
Dim hTextWriter As New HtmlTextWriter(sWriter)
Dim hForm As New HtmlForm()
ucShipmentList.ShipmentGrid.Parent.Controls.Add(hForm)
hForm.Attributes("runat") = "server"
hForm.Controls.Add(ucShipmentList.ShipmentGrid)

hForm.RenderControl(hTextWriter)

Dim sBuilder As New StringBuilder()
sBuilder.Append("<html xmlns:v=""urn:schemas-microsoft-com:vml"" xmlns:o=""urn:schemas-microsoft-com:office:office"" xmlns:x=""urn:schemas-microsoft-com:office:excel"" xmlns=""http://www.w3.org/TR/REC-html40""> <head><meta http-equiv=""Content-Type"" content=""text/html;charset=windows-1252""><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>ExportToExcel</x:Name><x:WorksheetOptions><x:Panes></x:Panes></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head> <body>")
                sBuilder.Append(sWriter.ToString() & "</body></html>")

Response.Write(sBuilder.ToString())
Response.End() 
```

我在页面默认设置中有荷兰语，因此页面上的网格显示是正确的，但是在导出到 excel 时，它显示以英语导出。
如何在导出到 Excel 时保留语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:22:40.467

我会使用 Open XML SDK 并创建一个“真正的”Excel 文档。

# variables - 获取当前正在执行的批处理脚本的父文件夹名称

> ID：14934441
> 
> 赞同：3
> 
> 时间：2013-02-18T10:45:42.673
> 
> 标签：variables, batch-file, path

Windows（XP 和更高版本）上的批处理文件需要知道它所在目录的名称。只有文件夹名称，而不是整个路径，也不是批处理文件名本身。

因此，存储在 C:\temp\abc\script.cmd 中的文件应该在变量中获得名称“abc”。

怎么可能呢？

通常的参数扩展如`%~p0`只能提取整个路径（\temp\abc\），它们只适用于实际参数（%0、%1、%2...）而不适用于其他变量，因此它们不能堆叠或组合. 所以他们对于这项任务来说太有限了。该`for`命令只能寻址从开始处定义位置的令牌，而不是“最后一个”或倒数第二个令牌。

为简化执行和可移植性，它必须是批处理文件 (.cmd)，而不是 PowerShell。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T12:21:14.980

只要您拥有文件的完整路径，您就可以简单地附加`\..`并使用带有正确修饰符的 FOR 循环来获取父文件夹名称。

```
for %%A in ("%~f0\..") do set "myFolder=%%~nxA" 
```

# javascript - 谷歌地图 URL 不返回 JSON 对象？

> ID：14934443
> 
> 赞同：0
> 
> 时间：2013-02-18T10:45:43.697
> 
> 标签：javascript, jquery, google-maps-api-3

```
$(document).ready(function () {
    $.getJSON('https://maps.googleapis.com/maps/api/place/textsearch/json?query=Kfc+sydney&sensor=true&key=AIzaSyD-jxenRCJipqw5Kg-HXQbRXUK8dHNFz3A',
    function (data) {
        alert(data);
    });
}); 
```

当从浏览器请求 JSON 对象时，我的 Google 地图 URL 会显示 JSON 对象，而不是使用 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:21:25.803

使用 Maps-Javascript-API 的[Places-Library](https://developers.google.com/maps/documentation/javascript/places)从 javascript-应用程序请求服务。

```
<script type="text/javascript" 
      src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false">
</script>

<script  type="text/javascript">
/*<![CDATA[*/
$(document).ready(function () {
    new google.maps.places.PlacesService(document.createElement('div'))
     .textSearch({query:'KFC sydney'}, function(data){console.log(data);});
});
/*]]>*/
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:35:01.140

另请参阅：[使用 getJSON 的 Google Maps V3 地理编码查找](https://stackoverflow.com/questions/9216073/google-maps-v3-geocoding-lookup-using-getjson?lq=1)

***仅供参考***- 如果您正在运行服务器端语言，例如 PHP 或 JSP，您将能够使用 maps api url，因为该方法没有 javascript 跨域问题，您可以编写一个页面来有效如果您需要使用 javascript 来处理 JSON，请充当代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:58:37.780

你需要多注意浏览器的 JS 控制台。

> `XMLHttpRequest cannot load https://maps.googleapis.com/maps/api/place/textsearch/json?query=Kfc+sydney&sensor=true&key=AIzaSyD-jxenRCJipqw5Kg-HXQbRXUK8dHNFz3A. Origin http://jsbin.com is not allowed by Access-Control-Allow-Origin.`

您试图违反[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。[此问题](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)的答案中描述了一些变通方法。

# jquery - jQuery Validation Plugin：密码字段未被验证

> ID：14934444
> 
> 赞同：1
> 
> 时间：2013-02-18T10:45:44.810
> 
> 标签：jquery, jquery-mobile, jquery-validate

我在 jQuery Mobile 项目中使用[JQuery 验证插件。](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)我有一个简单的登录表单，我需要确保用户名和密码字段都不为空。这是HTML：

```
 <form id="my_form">
                <input type="text" id="username" placeholder="User" class="required" />
                <input type="password" id="userpsw" placeholder="Password" class="required" />
                <input class="submit" type="submit" value="Login"/>
            </form> 
```

这是代码：

```
 $(document).on("pageinit", function(){        
                $("#my_form").validate({
                    submitHandler: function(form) {
                      alert("All fields ok!");
                    }
                 });
            }); 
```

问题是只有用户名字段正在被验证。仅填写用户名后，当我按下提交按钮时，将显示“所有字段正常”对话框。我在 Chrome 和 Firefox 中测试过，结果是一样的。

难道我做错了什么？这个插件可以使用密码吗？

* * *

更新：我已将密码输入类型更改为“文本”，但一直失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T10:54:05.557

您是否尝试在输入元素上设置名称属性？

jQuery 验证插件要求每个`<input />`元素都有一个有效的 name 属性集。从文档中：

`The name attribute is required for input elements, the validation plugin doesn't work without it.`

[标记建议](http://docs.jquery.com/Plugins/Validation/Reference#Markup_recommendations "富")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:57:05.287

仅替换`class="required"`为**`required`**。

测试：[表格](http://jsfiddle.net/BBKzf/)

# youtube - 有没有办法要求 Youtube 显示前贴片广告？

> ID：14934446
> 
> 赞同：0
> 
> 时间：2013-02-18T10:45:51.393
> 
> 标签：youtube, youtube-api, youtube-javascript-api

是否有某种 url 参数（或其他）告诉 Youtube 显示前贴片广告？我需要它来调试我的扩展程序，目前我需要播放视频，直到我最终得到一个前贴片广告来检查我的新代码更改，这需要太多时间......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:15:30.187

您可以尝试在每次测试之前/之后清除 cookie。大多数广告都有频率上限，仅允许您每天观看某些广告 x 次，但如果 YouTube 不知道您是谁或您看过哪些广告，他们就无法强制执行这些上限。这意味着您也不想在测试时登录 YouTube...

# java - Wickettester 两次提交相同的表格

> ID：14934448
> 
> 赞同：1
> 
> 时间：2013-02-18T10:45:52.723
> 
> 标签：java, wicket-tester

我无法两次发送 wickettester 表单并验证第一次给出的错误消息在第二次提交中被删除。

在下面给出的代码中，我首先提交了一个空表单，它给出了一条错误消息。然后我想提交相同的表单，但输入有效，并断言第一次出现的错误消息现在已被删除。

测试似乎运行正确，但是当我更改被测 java 代码时，它不会在提交搜索时删除错误消息，正确地，第二次测试仍然断言没有错误消息......测试中的第二次提交似乎与第一次提交从同一个地方开始，因此第一次提交没有参加我的测试。

```
@Test
public void assertThatErrorMessagesAreRemoved() {
    PageParameters pp = new PageParameters();
    // given
    WicetTester tester = new WicketTester(new MyApplication());
    tester.startComponentInPage(new MyPanel("myPanel", pp));

    //when
    FormTester form = tester.newFormTester("panel:formcontainer:form");
    form.submit();

    // then
    tester.assertErrorMessages("searchTerm.Required_value");

    //and given
    form = tester.newFormTester("panel:formcontainer:form");
    form.setValue("searchTerm", "a");

    //when
    form.submit();

    // then
    tester.assertNoErrorMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T08:56:22.053

如上所述：

我自己找到了我的问题的解决方案。问题是我没有在 ajax 返回目标 target.add(feedbackpanel); 上添加 FeedbackPanel。我在第二次提交后看到的错误没有在响应中发送，WicketTester 也没有找到它。但是由于我没有在 Ajax 调用的目标上添加 FeedbackPanel，因此 html 确实被重新渲染并且错误仍然可见。

# c# - 将字典（在列表中）绑定到gridview中的下拉列表

> ID：14934451
> 
> 赞同：0
> 
> 时间：2013-02-18T10:46:09.680
> 
> 标签：c#, asp.net

我正在尝试从在列表中构建的字典中填充下拉列表，例如，列表是从事件类构建的（在示例中它已被削减了一点）：

```
public class Events
{

    public Events()
    {
        StartDate = new Dictionary<string, string>();
    }

    [DataMember(Name = "eventId")]
    public Guid EventId { get; set; }

    [DataMember(Name = "eventName")]
    public string EventName { get; set; }

    [DataMember(Name = "startDate")]
    public Dictionary<string, string> StartDate { get; set; }
} 
```

然后是实际的数据绑定：

```
 protected void submitSearch_Click(object sender, EventArgs e)
    {
        if (IsValid)
        {

            IEnumerable<Events> events = EventProvider.FindEvents(eventName.Text);
            eventSearchResults.DataSource = events;
            eventSearchResults.DataBind();
        }
    } 
```

在页面中我有：

```
 <asp:TemplateField HeaderText="Start date">
        <ItemTemplate>
           <p>
               <asp:Label ID="lblStartDate" Text="Start month/year" runat="server" /><br />
               <asp:DropdownList ID="ddlStartDate" DataSource='<%# Eval("startDate") %>' runat="server" />
           </p>    
        </ItemTemplate> 
```

但是键和值都被添加到下拉列表中的值字段中。我哪里错了？任何示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:02:08.410

我认为 [这个链接](https://stackoverflow.com/questions/8152925/how-to-bind-dropdownlist-in-gridview-with-data-not-from-gridview)可以帮助你？基本上你必须定义类似

```
DataValueField="listID" DataTextField="listName" SelectedValue='<%#Bind("listID") %>' 
```

# node.js - 如何在 Express 中获取所有已注册的路线？

> ID：14934452
> 
> 赞同：232
> 
> 时间：2013-02-18T10:46:14.250
> 
> 标签：node.js, express

我有一个使用 Node.js 和 Express 构建的 Web 应用程序。现在我想列出所有已注册的路线及其适当的方法。

例如，如果我执行了

```
app.get('/', function (...) { ... });
app.get('/foo/:id', function (...) { ... });
app.post('/foo/:id', function (...) { ... }); 
```

我想检索一个对象（或与之等效的对象），例如：

```
{
  get: [ '/', '/foo/:id' ],
  post: [ '/foo/:id' ]
} 
```

这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2013-02-18T11:11:55.607

# 快递 3.x

好的，我自己找到的......它只是`app.routes`:-)

# 快递 4.x

[应用程序](http://expressjs.com/4x/api.html#express)- 用`express()`

> `app._router.stack`

[路由器](http://expressjs.com/4x/api.html#router)- 内置`express.Router()`

> `router.stack`

**注意**：堆栈也包括中间件功能，它应该被过滤以仅获取*“路由”*。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2015-01-22T10:52:56.137

```
app._router.stack.forEach(function(r){
  if (r.route && r.route.path){
    console.log(r.route.path)
  }
}) 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2019-04-09T09:38:07.167

`DEBUG=express:* node index.js`

如果您使用上述命令运行您的应用程序，它将使用`DEBUG`模块启动您的应用程序并提供路由，以及所有正在使用的中间件功能。

您可以参考：[ExpressJS - 调试](https://expressjs.com/en/guide/debugging.html)和[调试](https://www.npmjs.com/package/debug)。

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2015-01-28T18:34:55.817

这将获取直接在应用程序上注册的路由（通过 app.VERB）和注册为路由器中间件的路由（通过 app.use）。快递 4.11.0

```
//////////////
app.get("/foo", function(req,res){
    res.send('foo');
});

//////////////
var router = express.Router();

router.get("/bar", function(req,res,next){
    res.send('bar');
});

app.use("/",router);

//////////////
var route, routes = [];

app._router.stack.forEach(function(middleware){
    if(middleware.route){ // routes registered directly on the app
        routes.push(middleware.route);
    } else if(middleware.name === 'router'){ // router middleware 
        middleware.handle.stack.forEach(function(handler){
            route = handler.route;
            route && routes.push(route);
        });
    }
});

// routes:
// {path: "/foo", methods: {get: true}}
// {path: "/bar", methods: {get: true}} 
```

* * *

## 回答 #5

> 赞同：38
> 
> 时间：2016-01-29T16:12:34.083

这是我用来获取 express 4.x 中的注册路径的小东西

```
app._router.stack          // registered routes
  .filter(r => r.route)    // take out all the middleware
  .map(r => r.route.path)  // get all the paths 
```

* * *

## 回答 #6

> 赞同：36
> 
> 时间：2015-02-20T10:24:58.553

我已经根据我的需要改编了一篇不再在线的旧帖子。我使用了 express.Router() 并像这样注册了我的路线：

```
var questionsRoute = require('./BE/routes/questions');
app.use('/api/questions', questionsRoute); 
```

我重命名了 apiTable.js 中的 document.js 文件，并对其进行了如下调整：

```
module.exports =  function (baseUrl, routes) {
    var Table = require('cli-table');
    var table = new Table({ head: ["", "Path"] });
    console.log('\nAPI for ' + baseUrl);
    console.log('\n********************************************');

    for (var key in routes) {
        if (routes.hasOwnProperty(key)) {
            var val = routes[key];
            if(val.route) {
                val = val.route;
                var _o = {};
                _o[val.stack[0].method]  = [baseUrl + val.path];    
                table.push(_o);
            }       
        }
    }

    console.log(table.toString());
    return table;
}; 
```

然后我在我的 server.js 中调用它，如下所示：

```
var server = app.listen(process.env.PORT || 5000, function () {
    require('./BE/utils/apiTable')('/api/questions', questionsRoute.stack);
}); 
```

结果如下所示：

![结果示例](../Images/28dcdcdac8f96ba22bc2d211e6bbd606.png)

这只是一个例子，但可能有用..我希望..

* * *

## 回答 #7

> 赞同：31
> 
> 时间：2017-09-25T05:10:08.867

[由Doug Wilson](https://github.com/dougwilson)在[express github 问题](https://github.com/expressjs/express/issues/3308)上提供的 Hacky 复制/粘贴答案。肮脏但像魅力一样工作。

```
function print (path, layer) {
  if (layer.route) {
    layer.route.stack.forEach(print.bind(null, path.concat(split(layer.route.path))))
  } else if (layer.name === 'router' && layer.handle.stack) {
    layer.handle.stack.forEach(print.bind(null, path.concat(split(layer.regexp))))
  } else if (layer.method) {
    console.log('%s /%s',
      layer.method.toUpperCase(),
      path.concat(split(layer.regexp)).filter(Boolean).join('/'))
  }
}

function split (thing) {
  if (typeof thing === 'string') {
    return thing.split('/')
  } else if (thing.fast_slash) {
    return ''
  } else {
    var match = thing.toString()
      .replace('\\/?', '')
      .replace('(?=\\/|$)', '$')
      .match(/^\/\^((?:\\[.*+?^${}()|[\]\\\/]|[^.*+?^${}()|[\]\\\/])*)\$\//)
    return match
      ? match[1].replace(/\\(.)/g, '$1').split('/')
      : '<complex:' + thing.toString() + '>'
  }
}

app._router.stack.forEach(print.bind(null, [])) 
```

生产

[![抓屏](../Images/b522af9fb6d47ec7b1669fe41961104d.png)](https://i.stack.imgur.com/CkUrX.png)

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2017-06-06T17:45:55.380

[https://www.npmjs.com/package/express-list-endpoints](https://www.npmjs.com/package/express-list-endpoints)效果很好。

**例子**

用法：

```
const all_routes = require('express-list-endpoints');
console.log(all_routes(app)); 
```

输出：

```
[ { path: '*', methods: [ 'OPTIONS' ] },
  { path: '/', methods: [ 'GET' ] },
  { path: '/sessions', methods: [ 'POST' ] },
  { path: '/sessions', methods: [ 'DELETE' ] },
  { path: '/users', methods: [ 'GET' ] },
  { path: '/users', methods: [ 'POST' ] } ] 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2019-03-08T22:52:21.890

## json输出

```
function availableRoutes() {
  return app._router.stack
    .filter(r => r.route)
    .map(r => {
      return {
        method: Object.keys(r.route.methods)[0].toUpperCase(),
        path: r.route.path
      };
    });
}

console.log(JSON.stringify(availableRoutes(), null, 2)); 
```

看起来像这样：

```
[
  {
    "method": "GET",
    "path": "/api/todos"
  },
  {
    "method": "POST",
    "path": "/api/todos"
  },
  {
    "method": "PUT",
    "path": "/api/todos/:id"
  },
  {
    "method": "DELETE",
    "path": "/api/todos/:id"
  }
] 
```

## 字符串输出

```
function availableRoutesString() {
  return app._router.stack
    .filter(r => r.route)
    .map(r => Object.keys(r.route.methods)[0].toUpperCase().padEnd(7) + r.route.path)
    .join("\n")
}

console.log(availableRoutesString()); 
```

看起来像这样：

```
GET    /api/todos  
POST   /api/todos  
PUT    /api/todos/:id  
DELETE /api/todos/:id 
```

这些是基于[@corvid 的](https://stackoverflow.com/a/35089029/8472592)回答

希望这可以帮助

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2020-07-06T09:55:27.660

您可以实现一个`/get-all-routes`API：

```
const express = require("express");
const app = express();

app.get("/get-all-routes", (req, res) => {  
  let get = app._router.stack.filter(r => r.route && r.route.methods.get).map(r => r.route.path);
  let post = app._router.stack.filter(r => r.route && r.route.methods.post).map(r => r.route.path);
  res.send({ get: get, post: post });
});

const listener = app.listen(process.env.PORT, () => {
  console.log("Your app is listening on port " + listener.address().port);
}); 
```

这是一个演示：[https ://glitch.com/edit/#!/get-all-routes-in-nodejs](https://glitch.com/edit/#!/get-all-routes-in-nodejs)

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2014-10-09T09:51:29.303

在 express 4 中记录所有路线的功能（可以轻松调整为 v3~）

```
function space(x) {
    var res = '';
    while(x--) res += ' ';
    return res;
}

function listRoutes(){
    for (var i = 0; i < arguments.length;  i++) {
        if(arguments[i].stack instanceof Array){
            console.log('');
            arguments[i].stack.forEach(function(a){
                var route = a.route;
                if(route){
                    route.stack.forEach(function(r){
                        var method = r.method.toUpperCase();
                        console.log(method,space(8 - method.length),route.path);
                    })
                }
            });
        }
    }
}

listRoutes(router, routerAuth, routerHTML); 
```

日志输出：

```
GET       /isAlive
POST      /test/email
POST      /user/verify

PUT       /login
POST      /login
GET       /player
PUT       /player
GET       /player/:id
GET       /players
GET       /system
POST      /user
GET       /user
PUT       /user
DELETE    /user

GET       /
GET       /login 
```

**把它做成一个 NPM [https://www.npmjs.com/package/express-list-routes](https://www.npmjs.com/package/express-list-routes)**

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2015-07-19T13:00:41.347

我受到 Labithiotis 的 express-list-routes 的启发，但我想一次性了解我所有的路由和粗略的 url，而不是指定路由器，并且每次都找出前缀。我想出的办法是简单地用我自己的函数替换 app.use 函数，该函数存储 baseUrl 和给定的路由器。从那里我可以打印我所有路线的任何表格。

注意这对我有用，因为我在应用程序对象中传递的特定路由文件（函数）中声明了我的路由，如下所示：

```
// index.js
[...]
var app = Express();
require(./config/routes)(app);

// ./config/routes.js
module.exports = function(app) {
    // Some static routes
    app.use('/users', [middleware], UsersRouter);
    app.use('/users/:user_id/items', [middleware], ItemsRouter);
    app.use('/otherResource', [middleware], OtherResourceRouter);
} 
```

这允许我传入另一个具有虚假使用功能的“应用程序”对象，并且我可以获得所有路由。这对我有用（为了清楚起见删除了一些错误检查，但仍然适用于示例）：

```
// In printRoutes.js (or a gulp task, or whatever)
var Express = require('express')
  , app     = Express()
  , _       = require('lodash')

// Global array to store all relevant args of calls to app.use
var APP_USED = []

// Replace the `use` function to store the routers and the urls they operate on
app.use = function() {
  var urlBase = arguments[0];

  // Find the router in the args list
  _.forEach(arguments, function(arg) {
    if (arg.name == 'router') {
      APP_USED.push({
        urlBase: urlBase,
        router: arg
      });
    }
  });
};

// Let the routes function run with the stubbed app object.
require('./config/routes')(app);

// GRAB all the routes from our saved routers:
_.each(APP_USED, function(used) {
  // On each route of the router
  _.each(used.router.stack, function(stackElement) {
    if (stackElement.route) {
      var path = stackElement.route.path;
      var method = stackElement.route.stack[0].method.toUpperCase();

      // Do whatever you want with the data. I like to make a nice table :)
      console.log(method + " -> " + used.urlBase + path);
    }
  });
}); 
```

这个完整的示例（带有一些基本的 CRUD 路由器）刚刚经过测试并打印出来：

```
GET -> /users/users
GET -> /users/users/:user_id
POST -> /users/users
DELETE -> /users/users/:user_id
GET -> /users/:user_id/items/
GET -> /users/:user_id/items/:item_id
PUT -> /users/:user_id/items/:item_id
POST -> /users/:user_id/items/
DELETE -> /users/:user_id/items/:item_id
GET -> /otherResource/
GET -> /otherResource/:other_resource_id
POST -> /otherResource/
DELETE -> /otherResource/:other_resource_id 
```

使用[cli-table](https://www.npmjs.com/package/cli-table)我得到了这样的东西：

```
┌────────┬───────────────────────┐
│        │ => Users              │
├────────┼───────────────────────┤
│ GET    │ /users/users          │
├────────┼───────────────────────┤
│ GET    │ /users/users/:user_id │
├────────┼───────────────────────┤
│ POST   │ /users/users          │
├────────┼───────────────────────┤
│ DELETE │ /users/users/:user_id │
└────────┴───────────────────────┘
┌────────┬────────────────────────────────┐
│        │ => Items                       │
├────────┼────────────────────────────────┤
│ GET    │ /users/:user_id/items/         │
├────────┼────────────────────────────────┤
│ GET    │ /users/:user_id/items/:item_id │
├────────┼────────────────────────────────┤
│ PUT    │ /users/:user_id/items/:item_id │
├────────┼────────────────────────────────┤
│ POST   │ /users/:user_id/items/         │
├────────┼────────────────────────────────┤
│ DELETE │ /users/:user_id/items/:item_id │
└────────┴────────────────────────────────┘
┌────────┬───────────────────────────────────┐
│        │ => OtherResources                 │
├────────┼───────────────────────────────────┤
│ GET    │ /otherResource/                   │
├────────┼───────────────────────────────────┤
│ GET    │ /otherResource/:other_resource_id │
├────────┼───────────────────────────────────┤
│ POST   │ /otherResource/                   │
├────────┼───────────────────────────────────┤
│ DELETE │ /otherResource/:other_resource_id │
└────────┴───────────────────────────────────┘ 
```

哪个踢屁股。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2020-09-30T20:31:30.967

**在您的应用程序中`/routes`显示您的快速路线名称**

```
app.get('/routes', (req, res) => {
    res.send(app._router.stack
        .filter(r => r.route) 
        .map(r => r.route.path))
}) 
```

http://localhost:3000/routes

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-03-07T12:29:42.407

## 快递4

给定具有端点和嵌套路由器的**Express 4**配置

```
const express = require('express')
const app = express()
const router = express.Router()

app.get(...)
app.post(...)

router.use(...)
router.get(...)
router.post(...)

app.use(router) 
```

扩展[@caleb](https://stackoverflow.com/a/28199817/1750243)答案可以递归和排序获取所有路由。

```
getRoutes(app._router && app._router.stack)
// =>
// [
//     [ 'GET', '/'], 
//     [ 'POST', '/auth'],
//     ...
// ]

/**
* Converts Express 4 app routes to an array representation suitable for easy parsing.
* @arg {Array} stack An Express 4 application middleware list.
* @returns {Array} An array representation of the routes in the form [ [ 'GET', '/path' ], ... ].
*/
function getRoutes(stack) {
        const routes = (stack || [])
                // We are interested only in endpoints and router middleware.
                .filter(it => it.route || it.name === 'router')
                // The magic recursive conversion.
                .reduce((result, it) => {
                        if (! it.route) {
                                // We are handling a router middleware.
                                const stack = it.handle.stack
                                const routes = getRoutes(stack)

                                return result.concat(routes)
                        }

                        // We are handling an endpoint.
                        const methods = it.route.methods
                        const path = it.route.path

                        const routes = Object
                                .keys(methods)
                                .map(m => [ m.toUpperCase(), path ])

                        return result.concat(routes)
                }, [])
                // We sort the data structure by route path.
                .sort((prev, next) => {
                        const [ prevMethod, prevPath ] = prev
                        const [ nextMethod, nextPath ] = next

                        if (prevPath < nextPath) {
                                return -1
                        }

                        if (prevPath > nextPath) {
                                return 1
                        }

                        return 0
                })

        return routes
} 
```

* * *

用于基本字符串输出。

```
infoAboutRoutes(app) 
```

[![控制台输出](../Images/4804061cb6beb9718b2bf2ff039537f5.png)](https://i.stack.imgur.com/9Xt0A.png)

```
/**
* Converts Express 4 app routes to a string representation suitable for console output.
* @arg {Object} app An Express 4 application
* @returns {string} A string representation of the routes.
*/
function infoAboutRoutes(app) {
        const entryPoint = app._router && app._router.stack
        const routes = getRoutes(entryPoint)

        const info = routes
                .reduce((result, it) => {
                        const [ method, path ] = it

                        return result + `${method.padEnd(6)} ${path}\n`
                }, '')

        return info
} 
```

* * *

### 更新1：

由于 Express 4 的内部限制，无法检索已安装的应用程序和已安装的路由器。例如，无法从此配置中获取路由。

```
const subApp = express()
app.use('/sub/app', subApp)

const subRouter = express.Router()
app.use('/sub/route', subRouter) 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2018-07-16T18:25:39.927

需要一些调整，但应该适用于 Express v4。包括那些添加了`.use()`.

```
function listRoutes(routes, stack, parent){

  parent = parent || '';
  if(stack){
    stack.forEach(function(r){
      if (r.route && r.route.path){
        var method = '';

        for(method in r.route.methods){
          if(r.route.methods[method]){
            routes.push({method: method.toUpperCase(), path: parent + r.route.path});
          }
        }       

      } else if (r.handle && r.handle.name == 'router') {
        const routerName = r.regexp.source.replace("^\\","").replace("\\/?(?=\\/|$)","");
        return listRoutes(routes, r.handle.stack, parent + routerName);
      }
    });
    return routes;
  } else {
    return listRoutes([], app._router.stack);
  }
}

//Usage on app.js
const routes = listRoutes(); //array: ["method: path", "..."] 
```

编辑：代码改进

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2017-12-13T23:35:35.117

@prranay 的答案略有更新和更实用的方法：

```
const routes = app._router.stack
    .filter((middleware) => middleware.route)
    .map((middleware) => `${Object.keys(middleware.route.methods).join(', ')} -> ${middleware.route.path}`)

console.log(JSON.stringify(routes, null, 4)); 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2020-02-01T06:26:09.860

**初始化快速路由器**

```
let router = require('express').Router();
router.get('/', function (req, res) {
    res.json({
        status: `API Its Working`,
        route: router.stack.filter(r => r.route)
           .map(r=> { return {"path":r.route.path, 
 "methods":r.route.methods}}),
        message: 'Welcome to my crafted with love!',
      });
   }); 
```

*导入用户控制器*

```
var userController = require('./controller/userController'); 
```

*用户路线*

```
router.route('/users')
   .get(userController.index)
   .post(userController.new);
router.route('/users/:user_id')
   .get(userController.view)
   .patch(userController.update)
   .put(userController.update)
   .delete(userController.delete); 
```

*导出 API 路由*

```
module.exports = router; 
```

**输出**

```
{"status":"API Its Working, APP Route","route": 
[{"path":"/","methods":{"get":true}}, 
{"path":"/users","methods":{"get":true,"post":true}}, 
{"path":"/users/:user_id","methods": ....} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-10-31T20:32:42.777

这对我有用

```
let routes = []
app._router.stack.forEach(function (middleware) {
    if(middleware.route) {
        routes.push(Object.keys(middleware.route.methods) + " -> " + middleware.route.path);
    }
});

console.log(JSON.stringify(routes, null, 4)); 
```

输出/输出：

```
[
    "get -> /posts/:id",
    "post -> /posts",
    "patch -> /posts"
] 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2021-05-17T16:53:03.667

在所有服务器中，我就是这样做的

```
app.get('/', (req, res) => {
    console.log('home')
})
app.get('/home', (req, res) => {
    console.log('/home')
})

function list(id) {
    const path = require('path');

    const defaultOptions = {
        prefix: '',
        spacer: 7,
    };

    const COLORS = {
        yellow: 33,
        green: 32,
        blue: 34,
        red: 31,
        grey: 90,
        magenta: 35,
        clear: 39,
    };

    const spacer = (x) => (x > 0 ? [...new Array(x)].map(() => ' ').join('') : '');

    const colorText = (color, string) => `\u001b[${color}m${string}\u001b[${COLORS.clear}m`;

    function colorMethod(method) {
        switch (method) {
            case 'POST':
                return colorText(COLORS.yellow, method);
            case 'GET':
                return colorText(COLORS.green, method);
            case 'PUT':
                return colorText(COLORS.blue, method);
            case 'DELETE':
                return colorText(COLORS.red, method);
            case 'PATCH':
                return colorText(COLORS.grey, method);
            default:
                return method;
        }
    }

    function getPathFromRegex(regexp) {
        return regexp.toString().replace('/^', '').replace('?(?=\\/|$)/i', '').replace(/\\\//g, '/');
    }

    function combineStacks(acc, stack) {
        if (stack.handle.stack) {
            const routerPath = getPathFromRegex(stack.regexp);
            return [...acc, ...stack.handle.stack.map((stack) => ({ routerPath, ...stack }))];
        }
        return [...acc, stack];
    }

    function getStacks(app) {
        // Express 3
        if (app.routes) {
            // convert to express 4
            return Object.keys(app.routes)
                .reduce((acc, method) => [...acc, ...app.routes[method]], [])
                .map((route) => ({ route: { stack: [route] } }));
        }

        // Express 4
        if (app._router && app._router.stack) {
            return app._router.stack.reduce(combineStacks, []);
        }

        // Express 4 Router
        if (app.stack) {
            return app.stack.reduce(combineStacks, []);
        }

        // Express 5
        if (app.router && app.router.stack) {
            return app.router.stack.reduce(combineStacks, []);
        }

        return [];
    }

    function expressListRoutes(app, opts) {
        const stacks = getStacks(app);
        const options = {...defaultOptions, ...opts };

        if (stacks) {
            for (const stack of stacks) {
                if (stack.route) {
                    const routeLogged = {};
                    for (const route of stack.route.stack) {
                        const method = route.method ? route.method.toUpperCase() : null;
                        if (!routeLogged[method] && method) {
                            const stackMethod = colorMethod(method);
                            const stackSpace = spacer(options.spacer - method.length);
                            const stackPath = path.resolve(
                                [options.prefix, stack.routerPath, stack.route.path, route.path].filter((s) => !!s).join(''),
                            );
                            console.info(stackMethod, stackSpace, stackPath);
                            routeLogged[method] = true;
                        }
                    }
                }
            }
        }

    };

    expressListRoutes(app)
}

list(1); 
```

如果你运行它，那么这会发生

获取 C:
获取 C:\home

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-07-21T14:37:25.093

在 Express 3.5.x 上，我在启动应用程序以在我的终端上打印路线之前添加了这个：

```
var routes = app.routes;
for (var verb in routes){
    if (routes.hasOwnProperty(verb)) {
      routes[verb].forEach(function(route){
        console.log(verb + " : "+route['path']);
      });
    }
} 
```

也许它可以帮助...

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-08-27T20:51:52.740

所以我在看所有的答案..最不喜欢..从一些..做了这个：

```
const resolveRoutes = (stack) => {
  return stack.map(function (layer) {
    if (layer.route && layer.route.path.isString()) {
      let methods = Object.keys(layer.route.methods);
      if (methods.length > 20)
        methods = ["ALL"];

      return {methods: methods, path: layer.route.path};
    }

    if (layer.name === 'router')  // router middleware
      return resolveRoutes(layer.handle.stack);

  }).filter(route => route);
};

const routes = resolveRoutes(express._router.stack);
const printRoute = (route) => {
  if (Array.isArray(route))
    return route.forEach(route => printRoute(route));

  console.log(JSON.stringify(route.methods) + " " + route.path);
};

printRoute(routes); 
```

不是最漂亮的..但是嵌套的，并且成功了

还要注意那里的 20...我只是假设不会有 20 种方法的正常路线..所以我推断这就是全部..

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-10-03T15:51:15.840

路线详情为 "express": "4.xx",

```
import {
  Router
} from 'express';
var router = Router();

router.get("/routes", (req, res, next) => {
  var routes = [];
  var i = 0;
  router.stack.forEach(function (r) {
    if (r.route && r.route.path) {
      r.route.stack.forEach(function (type) {
        var method = type.method.toUpperCase();
        routes[i++] = {
          no:i,
          method: method.toUpperCase(),
          path: r.route.path
        };
      })
    }
  })

  res.send('<h1>List of routes.</h1>' + JSON.stringify(routes));
}); 
```

简单的代码输出

```
List of routes.

[
{"no":1,"method":"POST","path":"/admin"},
{"no":2,"method":"GET","path":"/"},
{"no":3,"method":"GET","path":"/routes"},
{"no":4,"method":"POST","path":"/student/:studentId/course/:courseId/topic/:topicId/task/:taskId/item"},
{"no":5,"method":"GET","path":"/student/:studentId/course/:courseId/topic/:topicId/task/:taskId/item"},
{"no":6,"method":"PUT","path":"/student/:studentId/course/:courseId/topic/:topicId/task/:taskId/item/:itemId"},
{"no":7,"method":"DELETE","path":"/student/:studentId/course/:courseId/topic/:topicId/task/:taskId/item/:itemId"}
] 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-10-13T09:25:54.890

只需使用这个 npm 包，它将以格式良好的表格视图提供 Web 输出和终端输出。

[![在此处输入图像描述](../Images/39f2a8508050d624c5817e65ad8d5612.png)](https://i.stack.imgur.com/iNnKn.png)

[https://www.npmjs.com/package/express-routes-catalogue](https://www.npmjs.com/package/express-routes-catalogue)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-01-13T21:00:20.037

对于快递 4.x

这是一个总 1 班轮，适用于添加到的`app`路线和添加到的路线`express.Router()`。

它返回这个结构。

```
[
    {
        "path": "/api",
        "methods": {
            "get": true
        }
    },
    {
        "path": "/api/servermembers/",
        "methods": {
            "get": true
        }
    },
    {
        "path": "/api/servermembers/find/:query",
        "methods": {
            "get": true
        }
    }
] 
```

使用的模块`express.Router()`需要像这样导出：

```
module.exports = {
  router,
  path: "/servermembers",
}; 
```

并像这样添加：

```
app.use(`/api${ServerMemberRoutes.path}`, ServerMemberRoutes.router); 
```

```
app.get(
  "/api",
  /**
   * Gets the API's available routes.
   * @param {request} _req
   * @param {response} res
   */
  (_req, res) => {
    res.json(
      [app._router, ServerMemberRoutes]
        .map((routeInfo) => ({
          entityPath: routeInfo.path || "",
          stack: (routeInfo?.router?.stack || routeInfo.stack).filter(
            (stack) => stack.route
          ),
        }))
        .map(({ entityPath, stack }) =>
          stack.map(({ route: { path, methods } }) => ({
            path: entityPath ? `/api${entityPath}${path}` : path,
            methods,
          }))
        ).flat()
    );
  }
); 
```

当然，`/api`如果需要，基本 url 前缀也可以存储在变量中。

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2020-07-18T19:14:17.807

在快递 4.*

```
//Obtiene las rutas declaradas de la API
    let listPathRoutes: any[] = [];
    let rutasRouter = _.filter(application._router.stack, rutaTmp => rutaTmp.name === 'router');
    rutasRouter.forEach((pathRoute: any) => {
        let pathPrincipal = pathRoute.regexp.toString();
        pathPrincipal = pathPrincipal.replace('/^\\','');
        pathPrincipal = pathPrincipal.replace('?(?=\\/|$)/i','');
        pathPrincipal = pathPrincipal.replace(/\\\//g,'/');
        let routesTemp = _.filter(pathRoute.handle.stack, rutasTmp => rutasTmp.route !== undefined);
        routesTemp.forEach((route: any) => {
            let pathRuta = `${pathPrincipal.replace(/\/\//g,'')}${route.route.path}`;
            let ruta = {
                path: pathRuta.replace('//','/'),
                methods: route.route.methods
            }
            listPathRoutes.push(ruta);
        });
    });console.log(listPathRoutes) 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2021-02-16T05:20:15.800

这个对我有用

```
// Express 4.x
function getRoutes(stacks: any, routes: { path: string; method: string }[] = [], prefix: string = ''): { path: string; method: string }[] {
  for (const stack of stacks) {
    if (stack.route) {
      routes.push({ path: `${prefix}${stack.route.path}`, method: stack.route.stack[0].method });
    }
    if (stack && stack.handle && stack.handle.stack) {
      let stackPrefix = stack.regexp.source.match(/\/[A-Za-z0-9_-]+/g);

      if (stackPrefix) {
        stackPrefix = prefix + stackPrefix.join('');
      }

      routes.concat(getRoutes(stack.handle.stack, routes, stackPrefix));
    }
  }
  return routes;
} 
```

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2021-03-23T20:46:15.843

```
const routes = {}
function routerRecursion(middleware, pointer, currentName) {
  if (middleware.route) { // routes registered directly on the app
    if (!Array.isArray(pointer['routes'])) {
      pointer['routes'] = []
    }
    const routeObj = {
      path: middleware.route.path,
      method: middleware.route.stack[0].method
    }
    pointer['routes'].push(routeObj)
  } else if (middleware.name === 'router') { // inside router
    const current = middleware.regexp.toString().replace(/\/\^\\\//, '').replace(/\\\/\?\(\?\=\\\/\|\$\)\/\i/, '')
    pointer[current] = {}
    middleware.handle.stack.forEach(function (handler) {
      routerRecursion(handler, pointer[current], current)
    });
  }
}
app._router.stack.forEach(function (middleware) {
  routerRecursion(middleware, routes, 'main')
});
console.log(routes);
```

app._router.stack.forEach(function (middleware) { routerRecursion(middleware, routes, 'main') }); console.log(路由);

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2021-04-20T12:17:39.563

静态代码分析方法。

该工具无需启动服务器即可分析源代码并显示路由信息。

```
npx express-router-dependency-graph --rootDir=path/to/project
# json or markdown output 
```

[https://github.com/azu/express-router-dependency-graph](https://github.com/azu/express-router-dependency-graph)

示例输出：

| 文件 | 方法 | 路由 | 中间件 | 文件路径 |
| --- | --- | --- | --- | --- |
| 用户/index.ts |  |  |  |  |
|  | 得到 | /getUserById | 需要查看 | 用户/index.ts#L1-3 |
|  | 得到 | /getUserList | 需要查看 | 用户/index.ts#L4-6 |
|  | 邮政 | /updateUserById | 要求编辑 | 用户/index.ts#L8-10 |
|  | 邮政 | /deleteUserById | 要求编辑 | 用户/index.ts#L12-20 |
| 游戏/index.ts |  |  |  |  |
|  | 得到 | /getGameList | 需要查看 | 游戏/index.ts#L1-3 |
|  | 得到 | /getGameById | 需要查看 | 游戏/index.ts#L4-6 |
|  | 邮政 | /updateGameById | 要求编辑 | 游戏/index.ts#L8-10 |
|  | 邮政 | /deleteGameById | 要求编辑 | 游戏/index.ts#L12-20 |

* * *

## 回答 #29

> 赞同：-2
> 
> 时间：2018-11-20T16:33:18.093

我发布了一个打印所有中间件和路由的包，在尝试审核快速应用程序时非常有用。您将包安装为中间件，因此它甚至会自行打印：

[https://github.com/ErisDS/middleware-stack-printer](https://github.com/ErisDS/middleware-stack-printer)

它打印一种树，如：

```
- middleware 1
- middleware 2
- Route /thing/
- - middleware 3
- - controller (HTTP VERB) 
```

* * *

## 回答 #30

> 赞同：-2
> 
> 时间：2020-04-29T03:10:14.130

这是一个在 Express 中漂亮地打印路线的单行函数`app`：

```
const getAppRoutes = (app) => app._router.stack.reduce(
  (acc, val) => acc.concat(
    val.route ? [val.route.path] :
      val.name === "router" ? val.handle.stack.filter(
        x => x.route).map(
          x => val.regexp.toString().match(/\/[a-z]+/)[0] + (
            x.route.path === '/' ? '' : x.route.path)) : []) , []).sort(); 
```

# ruby-on-rails - 通过rails remotipart gem上传ajax文件

> ID：14934453
> 
> 赞同：1
> 
> 时间：2013-02-18T10:46:16.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave, remotipart

我一直在尝试通过 remotipart 和carrierwave 上传图片。只需 fileupload 工作正常，我还安装了 remotipart gem，它可以通过 ajax 上传文件。现在的问题是如何通过 ajax 发送文件（我的意思是 jquery 部分）。

这就是我试图将文件发送到我的控制器的方式，但它不起作用

```
$("#upload").live("submit",function(e) {

    e.preventDefault();
    var report ={};
    report.file =$("#new_upload").find('#upload_name').val(); 

    $.ajax(this.action, {
        data:  report,
        iframe: true,
        processData: false
    }).complete(function(data) {
        console.log(data);
    });
}); 
```

这是我的表单代码：

```
<%= form_for(@upload,:url => { :action => "save_remotipart" },:html => {:multipart => true },:remote => (params[:action] ==  true )) do |f| %>

  <fieldset>
    <legend class='required'>
      Required fields
    </legend>
      <div class="field">
        <%= f.label :name %><br />
        <%= f.file_field :name %>
      </div>
    </fieldset>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

提交表单时没有参数发送到服务器。在中止我得到这个：

```
{"object Object"=>nil} 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:28:03.307

您不必执行 $("#upload").live(){}，将 :remote => true 添加到表单将执行 Ajax 提交并正确完成文件上传。

我在我的一个项目中使用它（请参阅下面的表单代码）

```
<%= simple_form_for @post, :remote => true, :multipart => true do |f| %>

            <%= f.input :content, :label => false, :input_html => { :rows => '2', :id => "ibtb" } %>

        <%= f.input :file, :label => false %>

        <%= f.button :submit, "Post" %>
<% end %> 
```

我正在使用 simple_form gem，但它也应该适用于普通表单，因为它们最后都会生成 HTML。[gem 的github](https://github.com/JangoSteve/remotipart)页面中的示例也没有使用 simple_form。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T12:31:06.283

我遇到过同样的问题。按照此链接可能会有所帮助。[http://www.javaroots.com/2015/04/asynchronous-file-uploads-in-rails.html#disqus_thread](http://www.javaroots.com/2015/04/asynchronous-file-uploads-in-rails.html#disqus_thread)

# c# - 在绘制事件中以指定角度旋转椭圆

> ID：14934455
> 
> 赞同：1
> 
> 时间：2013-02-18T10:46:18.960
> 
> 标签：c#

我正在尝试使用以下代码根据鼠标点（起点和终点）绘制一个椭圆...

```
private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
{
    start = new Point(e.X, e.Y);
    // Point mouseDownLocation = pictureBox1.PointToClient(new Point(e.X, e.Y))
    mRect = new Rectangle(e.X, e.Y, 0, 0);
} 
```

和

```
private void pictureBox1_MouseUp(object sender, MouseEventArgs e)
{
    end = new Point(e.X, e.Y);

    pictureBox1.Invalidate();

    if (listRect.Count <= 4)
    {
        listRect.Add(mRect);
        this.getObjectPopup(e);
    }
    else
    {
        MessageBox.Show("Maximum 5 selection per Image", "Alert", MessageBoxButtons.OK);
    }
} 
```

并在绘画事件中编写了以下代码

```
private void pictureBox1_Paint(object sender, PaintEventArgs e)
{
    Color c1 = Color.FromArgb(50, Color.Green);
    foreach (Rectangle rect in listRect)
    {
        using (Pen pen = new Pen(Color.Red, 2))
        {
            float angle = (float)Angle(start, end);

            Matrix transformMatrix = new Matrix();
            transformMatrix.Translate(200.0F, 0.0F);
            e.Graphics.RotateTransform(angle);
            // e.Graphics.MultiplyTransform(transformMatrix, MatrixOrder.Append);
            e.Graphics.DrawEllipse(pen, rect.X, rect.Y, rect.Width, rect.Height);

            e.Graphics.FillEllipse(new SolidBrush(c1), rect.X, rect.Y, rect.Width, rect.Height);
            this.WriteText(e,rect);  
        }
    }           
} 
```

椭圆已绘制但未与鼠标起点和终点一起绘制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:09:17.717

您是否尝试过设置水平和垂直对齐？

```
rect.HorizontalAlignment = HorizontalAlignment.Left;
rect.VerticalAlignment = VerticalAlignment.Top; 
```

编辑：分别在椭圆上设置这些属性

# grails - 视图中的 grails 编号（双精度）格式

> ID：14934458
> 
> 赞同：1
> 
> 时间：2013-02-18T10:46:26.033
> 
> 标签：grails, view, formatting, numbers

我是 Grails (2.2.0) 的新手，并试图弄清楚如何在视图中格式化双精度值。我有很多，因此如果可能的话，我更喜欢其中一个配置文件中的一些代码。

视图中的所有值都使用 g:field ... type="number" ... 格式化

在 resources.groovy 我有这个

```
beans = {
localeResolver(SessionLocaleResolver) {
defaultLocale= Locale.ENGLISH
Locale.setDefault (Locale.ENGLISH)
}
} 
```

在我使用的 messages.properties 中

```
default.number.format=#'###'###.# 
```

我不需要 i18n。我删除了那里的所有其他文件。

此问题仅存在于视图中。所有数据都正确保存。

这里有一些我想要的视图示例：

输入 10 输出 10

输入 0 输出 0

输入 0.775 输出 0.775

输入 0.7 输出 0.7

输入 1234567.12345 输出 1'234'567.12345

最后一个示例不是 ENGLISH 的标准格式。而不是千位分隔符，我想要'

我想如果我使用

```
default.number.format=#'###'###.# 
```

我不需要用 g:formatNumber 格式化每个值。

我很感激任何帮助。提前致谢！

**编辑**

以下是我的问题：

为什么 default.number.format=#'###'###.# 在 messages.properties 中不起作用？

例如，我认为这是：

```
<g:field name="mydouble" size="8" maxlength="20" type="number" value="${fieldValue(bean: myInstance, field: 'mydouble')}"/> 
```

如何在此字段上使用 g:formatNumber 标签。我已经阅读了 Grails 文档，但显然我在理解它时遇到了问题。

我写道我是一个初学者，因此我可能遗漏了一些对于了解 Grails 的人来说非常明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:07:09.727

我不确定我是否理解这个问题，但是看看这是否适合你：

```
<g:field value="${g.formatNumber(number: fieldValue(bean: personInstance, field: 'minPrice'), format: g.message(code: 'default.number.format'))}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:00:06.150

`fieldValue`在 GSP 中呈现您的数字时尝试使用。

```
<g:field value="${fieldValue(bean: personInstance, field: 'minPrice')}" /> 
```

不确定这是否是它不使用默认值的问题，因为您缺少问题中的一些细节。所以在这里在黑暗中拍摄。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:06:27.387

那么，您需要使用 a`'`作为小数分隔符吗？试试这样的格式化方法：

```
class NumberUtilities {
    static String format(double d) {
        def format = new DecimalFormat()
        def symbols = format.decimalFormatSymbols
        symbols.groupingSeparator = '\''
        format.decimalFormatSymbols = symbols
        return format.format(d)
    }
} 
```

然后在你看来写`${NumberUtilities.format(1234567.12345)}`。

这只是一个想法，根据您需要的其他格式规则为方法添加更多格式。

# c# - WPF 资源故事板绑定

> ID：14934459
> 
> 赞同：0
> 
> 时间：2013-02-18T10:46:26.590
> 
> 标签：c#, wpf, animation, binding, storyboard

我有以下动画，它就像一个魅力：

```
<Window.Resources>
    <Namespace:MathConverter Core:Key="MathConverter"/>
    <Storyboard Core:Key="MyKey" Completed="OnCompleted">
        <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" BeginTime="00:00:00.0" By="135" Duration="00:00:0.2"/>
        <DoubleAnimation Storyboard.TargetProperty="(FrameworkElement.RenderTransform).(TransformGroup.Children)[1].(ScaleTransform.ScaleX)" BeginTime="00:00:00.2" Duration="00:00:00.1" To="0">
            <DoubleAnimation.EasingFunction>
                <QuinticEase EasingMode="EaseInOut"/>
            </DoubleAnimation.EasingFunction>
        </DoubleAnimation>
    </Storyboard>
</Window.Resources> 
```

现在......我的布局是根据一些特定的基本值动态构建的。我希望我的动画以同样的方式表现。问题是，如果我按如下方式修改我的声明（MultiBinding Converter 的返回值绝对正确，我仔细检查了它）它就会停止正常工作：

```
<Storyboard Core:Key="MyKey" Completed="OnCompleted">
    <DoubleAnimation Storyboard.TargetProperty="(Canvas.Left)" BeginTime="00:00:00.0" Duration="00:00:0.2">
        <DoubleAnimation.By>
            <MultiBinding Converter="{StaticResource MathConverter}" ConverterParameter="((x - y) / 2) + z + w">
                <Binding Source="{Core:Static Namespace:MyClass.RealHeight}"/>
                <Binding Source="{Core:Static Namespace:MyClass.RealWidth}"/>
                <Binding Source="{Core:Static Namespace:MyClass.MarginInner}"/>
                <Binding Source="{Core:Static Namespace:MyClass.RealWidth}"/>
            </MultiBinding>
        </DoubleAnimation.By>
    </DoubleAnimation>
    <DoubleAnimation Storyboard.TargetProperty="(FrameworkElement.RenderTransform).(TransformGroup.Children)[1].(ScaleTransform.ScaleX)" BeginTime="00:00:00.2" Duration="00:00:00.1" To="0">
        <DoubleAnimation.EasingFunction>
            <QuinticEase EasingMode="EaseInOut"/>
        </DoubleAnimation.EasingFunction>
    </DoubleAnimation>
</Storyboard> 
```

“By”值，在运行时调试时为空。为什么不应该在这里绑定工作？有什么解决方法吗？在后面的代码中手动设置该值当然可以......但是很好......

```
m_MyAnimation = (Storyboard)Resources["MyKey"];
((DoubleAnimation)m_MyAnimation.Children[0]).By = ((MyClass.RealHeight - MyClass.RealWidth) / 2D) + MyClass.MarginInner + MyClass.RealWidth; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:21:11.377

问题是我的转换器处理所有返回值的方式：

```
public Object Convert(Object[] values, Type targetType, Object parameter, CultureInfo culture)
{
    try
    {
        String text = parameter.ToString();
        IExpression expression = null;

        if (!m_Expressions.TryGetValue(text, out expression))
            m_Expressions[text] = expression = m_Parser.Parse(text);

        Decimal result = expression.Eval(values);

        if (targetType == typeof(Decimal))
            return result;

        if (targetType == typeof(Double))
            return (Double)result;

        if (targetType == typeof(Int32))
            return (Int32)result;

        if (targetType == typeof(Int64))
            return (Int64)result;

        if (targetType == typeof(String))
            return result.ToString();
    }
    catch { }

    return DependencyProperty.UnsetValue;
} 
```

那种动画值是可以为空的类型......所以我改变了我的方法以使一切都像魅力一样工作：

```
public Object Convert(Object[] values, Type targetType, Object parameter, CultureInfo culture)
{
    try
    {
        String text = parameter.ToString();
        IExpression expression = null;

        if (!m_Expressions.TryGetValue(text, out expression))
            m_Expressions[text] = expression = m_Parser.Parse(text);

        Decimal result = expression.Eval(values);

        if (targetType.IsGenericType && (targetType.GetGenericTypeDefinition() == typeof(Nullable<>)))
            targetType = Nullable.GetUnderlyingType(targetType);

        if (targetType == typeof(Decimal))
            return result;

        if (targetType == typeof(Double))
            return (Double)result;

        if (targetType == typeof(Int32))
            return (Int32)result;

        if (targetType == typeof(Int64))
            return (Int64)result;

        if (targetType == typeof(String))
            return result.ToString();
    }
    catch { }

    return DependencyProperty.UnsetValue;
} 
```

# c# - 将 C# 代码转换为程序集

> ID：14934465
> 
> 赞同：1
> 
> 时间：2013-02-18T10:46:37.387
> 
> 标签：c#, dll, assembly, converter

我有这个用 C# 编写的相当复杂的算法，我现在需要的是在汇编程序中编写相同的东西，我知道基础知识，但我真的很感激有关应用程序结构以及如何在 asm 中处理矩阵的一些线索。（这将是 .dll 我假设）

这是算法： http: [//pastebin.com/iGKcK1rF](http://pastebin.com/iGKcK1rF)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:48:35.173

最快的方法是使用 C 编译器从 C 代码生成汇编代码。然后你可以研究这个生成的代码并改进它。如果您使用的是`gcc`编译器，则可以使用启动`-S`选项来生成汇编代码。如果您使用的是 MS Visual Studio 中名为 的编译器，请将选项`cl`传递`/Fa`给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:52:18.547

添加到上面米哈伊尔的答案：

1.  优化前的配置文件！查找“gprof”。这是一个有用的链接： [http ://www.cs.utah.edu/dept/old/texinfo/as/gprof.html#SEC2](http://www.cs.utah.edu/dept/old/texinfo/as/gprof.html#SEC2)

2.  使用分析结果，将您的代码划分为计算密集型内部循环和“外部代码”。

3.  将内部循环转换为 asm（使用 Mikhail 的建议或其他方法），然后从您的程序中调用它们。

# git - Cygwin - Git/SSH'没有这样的文件或目录'

> ID：14934469
> 
> 赞同：0
> 
> 时间：2013-02-18T10:46:48.327
> 
> 标签：git, cygwin

几天以来，我在 cygwin 下的 git 遇到了问题。我在两边都使用 cygwin，并使用 gitolite 作为 git 服务器。这是 cygwin 的全新安装，在两侧（我的机器和服务器）。服务器似乎运行正常。我可以以我的 git 用户身份与 ssh 连接。git 服务器似乎也运行正常。这不是我的第一次尝试，我有另外两台 gitole 服务器与 cygwin 一起正常运行，我的同事没有遇到这个问题。当问题出现时，我决定在其上重新安装 cygwin，并准备新服务器，但问题仍然存在。

这是我尝试克隆时发生的情况（这与我在卸载 cygwin 之前尝试获取并推送更改时遇到的错误相同），出现的错误有时会根据我猜的崩溃位置而改变：

要求：

```
git clone myuser@ip.of.my.serv:repo 
```

结果

```
Cloning into gitolite-admin...
    error: cannot run index-pack: No such file or directory
    fatal: index-pack failed
    remote: Counting objects: 6, done.
    remote: Compressing objects: 100% (4/4), done.
    remote: Total 6 (delta 0), reused 0 (delta 0)
    fatal: write error: Broken pipe 
```

或者

```
Cloning into gitolite-admin...
    error: cannot run index-pack: No such file or directory
    fatal: index-pack failed 
```

我在互联网上搜索但没有找到解决方案。我尝试了我所知道的一切，但似乎没有任何效果。我认为问题是文件丢失或路径错误。但一切似乎都已确定。我不是专家，我不得不承认，所以也许我错过了一些基本的东西。

# sql - SQL 查询 - 确定支持者状态

> ID：14934482
> 
> 赞同：-2
> 
> 时间：2013-02-18T10:47:47.683
> 
> 标签：sql, sql-server-2008

我的任务是清理组织支持者的数据。虽然我对一些 SQL 查询编码没问题，但我遇到了一些更复杂的问题（对我来说很好！）。

任务是将支持者标记为活跃或失效。

我可以通过查看他们的开始日期来做到这一点，如果从该日期起不到两年，我们可以将其标记为活动，并将任何超过的内容标记为已关闭。遗憾的是，没有什么比这更容易的了，支持者可能会根据他们与组织的互动方式而提升一个额外的水平。

我需要查询做的是看看他们是否有额外的支持者代码。例如，它们不能在两个级别上处于活动状态，我需要查询以查看它们是否处于下一个级别，如果是，则使先前的代码失效，无论它们是否符合上述规则。他们可以上升到5个级别。

我希望这是有道理的。数据看起来像这样。

```
Member ID | Category | Start Date | End Date
123456    | LEG1     | 01/12/2012 |
654321    | LEG1     | 01/01/2009 |   
421124    | LEG1     | 01/05/2011 |   
421124    | LEG2     | 02/04/2011 | 31/12/2012
421124    | LEG3     | 02/04/2011 | 31/12/2012
421124    | LEG4     | 31/12/2012 |   
567888    | LEG2     | 14/03/2012 |   
567888    | LEG3     | 22/08/2012 |   
119119    | LEG2     | 01/01/2011 | 31/12/2012 
```

感激地收到任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:07:21.677

试试这样：

```
DECLARE @t TABLE([Member ID] INT, Category VARCHAR(100), [Start Date] DATE, [End Date] DATE)
INSERT @t 
SELECT a,b,CONVERT(DATE, c, 104) c, CONVERT(DATE, d, 104)
FROM (VALUES
(123456 ,'LEG1', '01/12/2012', NULL),
(654321 ,'LEG1', '01/01/2009', NULL),
(421124 ,'LEG1', '01/05/2011', NULL),
(421124 ,'LEG2', '02/04/2011', '31/12/2012'),
(421124 ,'LEG3', '02/04/2011', '31/12/2012'),
(421124 ,'LEG4', '31/12/2012', NULL),
(567888 ,'LEG2', '14/03/2012', NULL),
(567888 ,'LEG3', '22/08/2012', NULL),
(119119 ,'LEG2', '01/01/2011', '31/12/2012')
-- I added these rows to sample data to show how borderline cases are treated
(100000 ,'LEG1', '17/02/2011', NULL),
(100001 ,'LEG1', '18/02/2011', NULL),
(100002 ,'LEG1', '19/02/2011', NULL)
) tbl(a,b,c,d)

SELECT  *
        , CASE WHEN 
            ROW_NUMBER() OVER (PARTITION BY [Member ID] ORDER BY Category DESC) > 1
            OR 
            [Start Date] < DATEADD(YEAR, -2, CAST(GETDATE() AS DATE))
          THEN 'lapsed' 
          ELSE 'active' 
          END [Status]
FROM    @t
ORDER BY
        [Member ID] 
```

它检查您的两个条件，`ROW_NUMBER()`函数确保不能将未达到最高类别的行标记为活动，并且与今天的日期减去 2 年`DATETIME`之间的比较处理您的第二个条件。`[Start Date]`如果满足这些条件中的任何一个，记录将不会被标记为活动。

# powershell - 使用 EWS PowerShell 获取共享交换日历

> ID：14934486
> 
> 赞同：3
> 
> 时间：2013-02-18T10:47:57.603
> 
> 标签：powershell, exchange-server, exchangewebservices

如何使用 EWS 或 EWS 托管 API 从 Exchange 访问共享日历？我需要能够从中读取项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:50:34.923

有什么可以开始的，也许吧？

```
# Your mailbox here
$mailboxName = "blah@blih.com"

Add-Type -Path "C:\Program Files\Microsoft\Exchange\Web Services\2.0\Microsoft.Exchange.WebServices.dll"  
$version = [Microsoft.Exchange.WebServices.Data.ExchangeVersion]::Exchange2010_SP2  
$service = new-object Microsoft.Exchange.WebServices.Data.ExchangeService($version)  
$service.UseDefaultCredentials = $true  
$service.AutodiscoverUrl($mailboxName)

$folderid = new-object Microsoft.Exchange.WebServices.Data.FolderId([Microsoft.Exchange.WebServices.Data.WellKnownFolderName]::Calendar, $mailboxName)
$calendarFolder = [Microsoft.Exchange.WebServices.Data.calendarFolder]::Bind($service, $folderid)
$calendarView = new-object Microsoft.Exchange.WebServices.Data.CalendarView([System.DateTime]::Now, [System.DateTime]::Now.AddDays(720))
$calendarView.MaxItemsReturned = 200;
$calendarView.PropertySet = new-object Microsoft.Exchange.WebServices.Data.PropertySet([Microsoft.Exchange.WebServices.Data.BasePropertySet]::FirstClassProperties)
$result = $calendarFolder.FindAppointments($calendarView)

$result | Format-Table 
```

# database - 存储空数据时是否占用磁盘空间？

> ID：14934488
> 
> 赞同：6
> 
> 时间：2013-02-18T10:48:11.600
> 
> 标签：database, sqlite, null, diskspace

我使用 sqlite 数据库。
添加记录时，磁盘空间显然用于非空数据。但是包含空值的数据记录呢？为什么我要问的是我将有大量列（50+）和数百万条包含空数据的记录，我想知道它是否是设计我的数据库的最有效方式

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T13:47:06.080

在 SQLite 的[记录格式](http://www.sqlite.org/fileformat2.html#record_format)中，恰好需要一个字节来指定一个值是`NULL`.

如果您对数据库进行规范化，以便每个非`NULL`值有一条记录，则可以保存这些`NULL`字节，但非`NULL`值会产生额外的开销。SQLite 的最小记录开销[是](http://www.sqlite.org/fileformat2.html#cell_payload)：

*   两个字节的单元指针，
*   至少一个字节的有效载荷长度，
*   `rowid`和的几个字节
*   对于您的情况，指向原始记录的外键有几个字节。

此外，将非`NULL`值存储在单独的表中可能需要索引才能获得有效的查找。

# jquery - 如何用逗号以美国格式显示所有数字？

> ID：14934491
> 
> 赞同：0
> 
> 时间：2013-02-18T10:48:15.977
> 
> 标签：jquery, spring

我用的是弹簧。我想以美国格式显示我网站上的所有数字。

例如：1000000000 应显示为 1,000,000,000。

是否有任何 jquery 可用于执行此操作？os还有其他方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:02:52.450

如果您使用 JSP 作为 Spring 视图技术，则可以使用`formatNumber`标签来显示基于区域设置的数字：

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<fmt:formatNumber type="number" value="1000000" /> 
```

如果要确保使用美国语言环境，请在`formatNumber`标记前添加：

```
<fmt:setLocale value="en_US"/> 
```

您不应该为此使用 jQuery，它只会不必要地减慢您的网页速度。最好将已格式化的号码发送给客户端，而不是通过在 Web 浏览器上运行脚本进行格式化。

# cordova - 使用 EmailComposerWithAttachment phonegap/cordova 插件时出错

> ID：14934492
> 
> 赞同：0
> 
> 时间：2013-02-18T10:48:16.720
> 
> 标签：cordova, cordova-2.0.0

我正在尝试使用 Phonegap/cordova EmailComposerWithAttachments[插件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/EmailComposerWithAttachments)。我已按照自述文件中的说明进行操作，但是当尝试在我的 JS 中使用该插件时，我收到以下错误：

```
2013-02-18 10:41:41.743 MyApp[377:907] CDVPlugin class EmailComposer (pluginName: EmailComposer) does not exist.
2013-02-18 10:41:41.745 MyApp[377:907] ERROR: Plugin 'EmailComposer' not found, or is not a CDVPlugin. Check your plugin mapping in config.xml. 
```

我正在使用 Cordova 2.3.0。我已将 MessageUI.framework 添加到项目中，将 .h 和 .m 文件添加到插件目录并添加：

```
<plugin name="EmailComposer" value="EmailComposer" /> 
```

到 config.xml 文件（自述文件提到将其添加到 .plist 但我相信在 2.2.0 之后不存在。

请有人能指出我正确的方向吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:20:20.810

我最终通过构建一个新的科尔多瓦项目来解决这个问题。然后，我在 EmailCompser.m 文件中的一行代码中遇到了一个错误，其中包含一个名为 Dlog 的命令，经过一番谷歌搜索后，我发现将该命令更改为 NSLog 解决了该问题，并且该插件现在可以正常工作 - 希望这对某人有所帮助。

# php - 分发一个 php 命令行工具

> ID：14934493
> 
> 赞同：6
> 
> 时间：2013-02-18T10:48:27.740
> 
> 标签：php, shell

我有一个 php 命令行工具，我想与世界分享。嗯，其实我打算写它，它是一个将设计文档加载到couchdb的工具，但这并不是重点。

无论如何，是否有打包 php 脚本以便分发以便于安装的最佳实践？我在想一些类似于旧的“./configure & make & make install”的东西，但是要为 php 脚本做什么呢？我读过关于 phar 的文章，但它似乎主要用于图书馆。那么有什么想法吗？或者其他项目如何做到这一点的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:09:42.203

[Composer](http://getcomposer.org/)是一个很好的例子，说明了如何打包该工具，既可以作为独立的源代码集，也可以作为可以运行的代码。我将它安装为 phar，现在可以在任何地方运行它 ' `composer --options args`'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:55:00.257

有[作曲家](http://getcomposer.org/)或仍然被广泛使用的旧[PEAR](http://pear.php.net/)，特别是对于 CLI 工具。要创建您自己的 PEAR 频道，[SensioLabs](http://pirum.sensiolabs.org/)（Symfony 开发人员）的 Pirum 就派上用场了。

为了进一步阅读，Stuart Herbert 有一个很棒的[基于组件的开发系列](http://blog.stuartherbert.com/php/php-components/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T08:41:14.240

查看[CLIFramework](https://github.com/c9s/CLIFramework)，它处理子命令、参数验证、选项值（多个、标志、可选、默认）和强大的 zsh/bash 完成生成器。

编译命令也是开箱即用的，可帮助您将控制台应用程序编译为 phar 文件以进行分发。（phpbrew使用这种方式将应用程序分发到世界）

这是使用 zsh 完成生成器的截屏视频（它完成参数和选项）：

![zsh 补全生成器](../Images/79ca70bb8e7c9ab0be73e821fe24d762.png)

还有许多流行的应用程序使用 CLIFramework 和 GetOptionKit。例如，[PHPBrew](https://github.com/phpbrew/phpbrew)、[LazyRecord](https://github.com/c9s/LazyRecord)

# android - 当用户从剪贴板粘贴时收到通知

> ID：14934494
> 
> 赞同：0
> 
> 时间：2013-02-18T10:48:31.417
> 
> 标签：android, clipboard

我的应用程序可以将一系列文本复制到剪贴板。目前，用户转到我的应用程序，选择“复制项目 1”，转到另一个应用程序并粘贴文本，返回，选择“复制项目 2”等。

有没有办法在用户粘贴第一个文本时得到通知，以便我可以直接将下一个文本添加到剪贴板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:55:51.640

你可以试试

```
ClipboardManager clipboard = (ClipboardManager)
    getSystemService(Context.CLIPBOARD_SERVICE); 
```

`addPrimaryClipChangedListener(ClipboardManager.OnPrimaryClipChangedListener what)`然后为[文档](https://developer.android.com/guide/topics/text/copy-paste.html#ClipboardClasses)中的剪辑更改添加一个侦听器

我认为这是在剪辑数据发生变化时触发的（可能会在粘贴时发生），但我从未尝试过。

# entity-framework - 简单的 EF 5 查询没有返回任何结果

> ID：14934499
> 
> 赞同：0
> 
> 时间：2013-02-18T10:48:37.697
> 
> 标签：entity-framework

奇怪的问题：

尝试对我的电子邮件通知表进行简单查询：

```
 using (MyContext context = new MyContext())
        {
            IQueryable<EmailNotification> query = context.EmailNotifications.Where(q => (q.LastSendAttemptStatus == EmailNotificationSendStatuses.Pending) || (q.LastSendAttemptStatus == EmailNotificationSendStatuses.Resend));

            return query.ToList();
        } 
```

即使行在那里，它也不会返回任何结果。事实上，我查看了它生成的 SQL 并在没有任何更改的情况下运行它，它**确实**带来了正确的结果。

```
SELECT 
[Extent1].[EmailNotificationID] AS [EmailNotificationID], 
[Extent1].[From] AS [From], 
[Extent1].[To] AS [To], 
[Extent1].[Cc] AS [Cc], 
[Extent1].[Bcc] AS [Bcc], 
[Extent1].[Subject] AS [Subject], 
[Extent1].[Body] AS [Body], 
[Extent1].[LastSendAttemptOn] AS [LastSendAttemptOn], 
[Extent1].[LastSendAttemptStatus] AS [LastSendAttemptStatus], 
[Extent1].[FailureComments] AS [FailureComments]
FROM [dbo].[EmailNotifications] AS [Extent1]
WHERE (0 =  CAST( [Extent1].[LastSendAttemptStatus] AS int)) OR (3 =  CAST( [Extent1].   [LastSendAttemptStatus] AS int)) 
```

关于我应该检查什么的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:09:13.280

非常遗憾。原来是连接字符串问题。

# java-me - 诺基亚 E5 和 E72 中电话簿和 SIM 卡中的 J2ME 联系人无法读取

> ID：14934502
> 
> 赞同：1
> 
> 时间：2013-02-18T10:48:45.510
> 
> 标签：java-me, nokia, pim

我的 j2me 应用程序具有与电话和 sim 中的联系人进行消息传递的功能。我测试了应用程序，并且在诺基亚 N70 M 和诺基亚 C2-02 上也运行良好。但不能从诺基亚 E5 和 E72 获取联系人。请让我知道我错了的错误可能性，在这里给你代码......

```
public void loadContacts()
{

    System.out.println("into show contacts1");
    try
    { 
    javax.microedition.pim.ContactList addressbook=null;
    javax.microedition.pim.ContactList simaddressbook=null;
    PIM pim = PIM.getInstance();
    System.out.println("into show contacts2");
    String[] allContactLists = PIM.getInstance().listPIMLists(PIM.CONTACT_LIST);
    System.out.println("into show contacts3");
    for(int ctr=0;ctr<allContactLists.length;ctr++)
    {
    pim.openPIMList(PIM.CONTACT_LIST, PIM.READ_ONLY,allContactLists[ctr]);
    addressbook=(javax.microedition.pim.ContactList)(pim.openPIMList(PIM.CONTACT_LIST, PIM.READ_ONLY));
    Contact contact = null;
        Enumeration items = null;
        items = addressbook.items();
        while (items.hasMoreElements()) {
            contact = (Contact) items.nextElement();
            int telCount = contact.countValues(Contact.TEL);
            int nameCount = contact.countValues(Contact.FORMATTED_NAME);
            if (telCount > 0 && nameCount > 0) {
                String contactName = contact.getString(Contact.FORMATTED_NAME, 0);
                    for (int i = 0; i < telCount; i++) {
                          String phoneNumber = contact.getString(Contact.TEL, i);
                         ContactFetcher contactfetcher=new ContactFetcher();
                          contactfetcher.setFotmattedName(contactName);
                          contactfetcher.settelName(phoneNumber);
                          PersistableManager pm=PersistableManager.getInstance();
                          pm.save(contactfetcher);
            }
            }
        }
    }
    if(!nokiaos)
    {
      simaddressbook=(javax.microedition.pim.ContactList)(PIM.getInstance().openPIMList(PIM.CONTACT_LIST, PIM.READ_WRITE,"SIM"));
     Contact contact = null;
     Enumeration simitems=null;
     simitems=simaddressbook.items();
     while (simitems.hasMoreElements()) {
             System.out.println("into show contacts9");
            contact = (Contact) simitems.nextElement();
            int telCount = contact.countValues(Contact.TEL);
            int nameCount = contact.countValues(Contact.FORMATTED_NAME);
            if (telCount > 0 && nameCount > 0) {
                String contactName = contact.getString(Contact.FORMATTED_NAME, 0);
                    for (int i = 0; i < telCount; i++) {
                          String phoneNumber = contact.getString(Contact.TEL, i);
                          ContactFetcher contactfetcher=new ContactFetcher();
                          contactfetcher.setFotmattedName(contactName);

                          contactfetcher.settelName(phoneNumber);
                          PersistableManager pm=PersistableManager.getInstance();
                          pm.save(contactfetcher);
          }
        }
     }

    }

  }

              catch(Exception e)
              {
                  e.printStackTrace();
              }

} 
```

在这里，我检测手机是 s60 还是 s40，如果 s6o 则只读取 s60 中的 pim 联系人和 s40 中的 sim 联系人。提前致谢...：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T12:59:08.580

我终于解决了，我错过了一些存储联系人的命名约定之王。代码如下：- 也运行在诺基亚 E5 和 E72 上。

```
 public void loadContacts()
  {

    System.out.println("into show contacts1");
   try
    { 
    javax.microedition.pim.ContactList addressbook=null;
    javax.microedition.pim.ContactList simaddressbook=null;
    PIM pim = PIM.getInstance();
    System.out.println("into show contacts2");
    String[] allContactLists = PIM.getInstance().listPIMLists(PIM.CONTACT_LIST);
    System.out.println("into show contacts3");

    pim.openPIMList(PIM.CONTACT_LIST, PIM.READ_ONLY,allContactLists[0]);
    addressbook=(javax.microedition.pim.ContactList)(pim.openPIMList(PIM.CONTACT_LIST, PIM.READ_ONLY));
    Contact contact = null;
        Enumeration items = null;
        items = addressbook.items();
        if(addressbook.isSupportedField(Contact.FORMATTED_NAME) && addressbook.isSupportedField(Contact.TEL))
        {
             while (items.hasMoreElements()) {
             System.out.println("into show contacts9");
            contact= (Contact) items.nextElement();
            int telCount = contact.countValues(Contact.TEL);
            int nameCount = contact.countValues(Contact.FORMATTED_NAME);
            if (telCount > 0 && nameCount > 0) {
                String contactName = contact.getString(Contact.FORMATTED_NAME, 0);
                    for (int i = 0; i < telCount; i++) {
                          String phoneNumber = contact.getString(Contact.TEL, i);

                         ContactPerson.addElement(contactName);    
                         Telephone.addElement(phoneNumber);
                         Imagedata.addElement("");

                     }
                }
             }
        }
        else
        {
            while (items.hasMoreElements()) {
            contact = (Contact) items.nextElement();
            String contactName="";
            contactName = contactName+contact.getStringArray(Contact.NAME,
               Contact.ATTR_NONE)[Contact.NAME_FAMILY];

            if(contactName.equals("null"))
            {
                contactName = contact.getStringArray(Contact.NAME,
                        Contact.ATTR_NONE)[Contact.NAME_GIVEN];
            }
            String phoneNumber=contact.getString(Contact.TEL, Contact.ATTR_NONE);
             if (contactName!=null && phoneNumber!=null) 
             {           
                         ContactPerson.addElement(contactName);    
                         Telephone.addElement(phoneNumber);
                         Imagedata.addElement("");

             }
            }
        }

  if(!nokiaos)
    {
      simaddressbook=(javax.microedition.pim.ContactList)(PIM.getInstance().openPIMList(PIM.CONTACT_LIST, PIM.READ_WRITE,"SIM"));
     Contact contactsim = null;
     Enumeration simitems=null;
     simitems=simaddressbook.items();
     if(simaddressbook.isSupportedField(Contact.FORMATTED_NAME) && simaddressbook.isSupportedField(Contact.TEL))
     {
         while (simitems.hasMoreElements()) {
             System.out.println("into show contacts9");
            contactsim= (Contact) simitems.nextElement();
            int telCount = contactsim.countValues(Contact.TEL);
            int nameCount = contactsim.countValues(Contact.FORMATTED_NAME);
            if (telCount > 0 && nameCount > 0) {
                String contactName = contactsim.getString(Contact.FORMATTED_NAME, 0);
                    for (int i = 0; i < telCount; i++) {
                          String phoneNumber = contactsim.getString(Contact.TEL, i);
                         ContactPerson.addElement(contactName);    
                         Telephone.addElement(phoneNumber);
                         Imagedata.addElement("simico.png");

                    }
             }
        }
     }
     else
     {
         while (simitems.hasMoreElements()) {
             System.out.println("into show contacts9");
            contactsim= (Contact) simitems.nextElement();
            String contactName = contactsim.getStringArray(Contact.NAME,
               Contact.ATTR_NONE)[Contact.NAME_GIVEN];

            String phoneNumber=contactsim.getString(Contact.TEL, Contact.ATTR_NONE);
             if (contactName != null && phoneNumber!=null) 
             {
                         ContactPerson.addElement(contactName);    
                         Telephone.addElement(phoneNumber);
                         Imagedata.addElement("simico.png");

             }
          }
        }
     }

 }

              catch(Exception e)
              {
                  e.printStackTrace();
              }
   try
   {
                        ContactFetcher contactfetcher=new ContactFetcher(); 
                         contactfetcher.setFotmattedName(ContactPerson);
                         contactfetcher.settelName(Telephone);
                         contactfetcher.setImage(Imagedata);
                         PersistableManager pm=PersistableManager.getInstance();
                         pm.save(contactfetcher); 
   }
   catch(Exception ex)
   {

   }
} 
```

# c# - NetworkError：Firefox 浏览器中的 WCF REST 服务中不允许使用 405 方法

> ID：14934505
> 
> 赞同：0
> 
> 时间：2013-02-18T10:49:03.847
> 
> 标签：c#, asp.net, rest, jquery, firefox

可能重复： [NetworkError：WCF 中不允许使用 405 方法](https://stackoverflow.com/questions/14827951/networkerror-405-method-not-allowed-in-wcf)

我在 jQuery AJAX POST 中调用了一个 REST 服务。它在 IE8 中运行良好。但在**Firefox中显示“** **NetworkError: 405 Method Not Allowed** ” 。我搜索了很多网站，但无法得到明确的答案。

 **我的**界面**代码：

```
[ServiceContract]
public interface IEShop
{
 [OperationContract]
 [WebInvoke(Method = "POST", UriTemplate = "/InsertDetails", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
 string InsertDetails(EShopInputParameters EcomInput);
} 
```

**jQuery**

```
var postCall = function () {  
var input =
{   
Userid: "123456",
partnerid: "cswp"   
};
alert(JSON.stringify(input));                            
$.ajax({                
type: "POST",
url: "http://localhost:36196/Service.svc/InsertDetails",
data: JSON.stringify(input),
contentType: "application/json",
dataType: "json",
success: function (response) {                        
alert(response);
},
error: function (xhr, status, error) {
alert(error);
}   
});
} 
```

**服务**

```
public string InsertDetails(EShopInputParameters EShopInput)
{
try
{
command = database.GetStoredProcCommand(Data_Template.UspGetInsertDetails);
database.AddInParameter(command, Data_Template.UserID, DbType.String, EShopInput.Userid);
database.AddInParameter(command, Data_Template.PartnerID, DbType.String, EShopInput.partnerid);
database.ExecuteNonQuery(command);
return "0";
}
catch (Exception err)
{
throw err;
} 
```

}

提前致谢..

```
**EDIT** <br/> 
```

从博客[http://blog.weareon.net/calling-wcf-rest-service-from-jquery-causes-405-method-not-allowed/](http://blog.weareon.net/calling-wcf-rest-service-from-jquery-causes-405-method-not-allowed/)我添加了以下代码。但它绕过了**“如果”**条件。

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
{
HttpContext.Current.Response.AddHeader("Cache-Control", "no-cache");
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept, x-requested-with");
HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
HttpContext.Current.Response.End();
}           
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:09:43.243

这是来自此[链接的答案](http://blog.weareon.net/calling-wcf-rest-service-from-jquery-causes-405-method-not-allowed/)

在服务应用程序中添加了以下代码。在 Firefox 中运行良好。

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
{
HttpContext.Current.Response.AddHeader("Cache-Control", "no-cache");
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST");
HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept, x-requested-with");
HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
HttpContext.Current.Response.End();
}           
} 
```**

# c - 使用 while(true) 进行简单的循环；

> ID：14934507
> 
> 赞同：10
> 
> 时间：2013-02-18T10:49:04.557
> 
> 标签：c, loops, do-while

在 C 程序的示例中，我多次遇到这种循环。这些循环到底有什么作用？

```
do {

    while (...) // Check some condition if it is true.
    { 
        calculation 1
    }

    // Some new condition is checked.

} while(true); 
```

`while(true);`它用于无限循环有什么需要？有人可以解释一下上述循环的真正作用。我是 C 编程新手

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-25T14:07:18.650

当人们想要永远循环并且循环的中断条件未知时使用这些循环。在循环内设置某些条件以及要退出循环的**break**或**return语句。**例如：

```
while(true){
    //run this code
    if(condition satisfies)
        break;    //return;
} 
```

这些循环就像任何其他带有停止循环条件的 while 循环一样，它位于 while 循环的主体中，否则它将永远运行（除非需要，否则这不是代码的一部分的意图）。这取决于程序员的逻辑，只取决于他/她想要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:50:33.277

是的，它用于无限循环，在这种情况下，最佳做法是在某个条件下突破外观

```
do {

    while () //check some condition if it is true
     { 
     calculation 1
    }

    //some  new condition is checked,if condition met then break out of loop

    } while(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T07:17:29.903

以下循环之间的一般区别因素：

```
while (condition) {action}
do {action} while (condition) 
```

是前者用于发生*零*次或多次的循环，而后者用于发生*一次*或多次的循环。

换句话说，条件 for`while`在循环开始时被检查，而 for 则在循环`do while`结束时被检查。

通常，您会看到开发人员似乎不*知道*的代码，`do-while`因为他们会编写：

```
result = doSomething();
while (result == NOT_FINISHED) {
    result = doSomething();
} 
```

最好写成：

```
do {
    result = doSomething();
} while (result == NOT_FINISHED); 
```

* * *

但是，在您的特定情况下，条件总是`true`，这并不重要。以下循环基本上是等效`1`的（用于真实情况）：

```
for (;;) { doSomething(); }
for (;;doSomething());

while (1) { doSomething(); }
do { doSomething(); } while (1);

while (doSomething(),1);

BADPAX: doSomething(); goto BADPAX; 
```

第一个`for`循环可能是执行无限循环的规范方式，利用这样一个事实，即如果您省略循环的继续条件，它会假定它始终为真。

第二个`for`循环只是将循环体移动到`for`语句的每次迭代部分。

第`while`一种有时也出现在野外，但`do-while`可能较少见。这里唯一的区别是前者循环永远检查循环顶部，后者循环永远检查循环底部。

最后一个`while`循环以您可能永远不应该使用的方式使用 C 逗号运算符:-)

最后一个现在非常罕见，但可能是他们在机器代码级别上都优化到的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:51:25.103

在 C 中，所有循环都在条件为真时循环。因此`true`，条件中的显式实际上意味着“循环`true`为真”，因此永远循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T10:52:10.103

这个循环是无限的，如果你的程序用这样的 lop 终止，你需要在这样的循环中的给定条件下有一个`break`或一个`return`（或在某些情况下抛出异常）语句，否则这样的程序将永远不会终止。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T10:53:24.590

`for`如果停止条件的检查既不能在前面（如and `while`）也不能在后面（如）完成，则无限循环很有用`do{}while`。相反，您只需永远循环，并且在代码中间您可以检查条件并 break: `if(something) break;`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-18T11:30:48.083

有时我们使用它，例如：

```
do
     recv(s , &buf, len, flags);
while(true) 
```

winsock windows api的一个例子，通过这种方式你可以从一个端口监听。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-06T07:24:20.530

```
do {
  // code here
} while(true); 
```

此循环无限运行，如果不停止可能会导致运行时错误。如果您正在执行这些类型的循环，请确保在内部有一个 break 语句以确保您的循环将在某个时候停止。

与此类似

```
if(condition)
   break; 
```

如果您的程序到达某个条件为真的点，它将自动结束 do-while 循环并继续执行之后的代码。

# android - 如何在 Android 中获取当月 Facebook 好友生日列表

> ID：14934508
> 
> 赞同：4
> 
> 时间：2013-02-18T10:49:08.610
> 
> 标签：android, android-facebook

我正在编写一个**Facebook Android 应用程序**，我想在其中显示当月**生日***的 Facebook 好友列表*，我使用下面的代码来获得：-

 **```
 public static void requestFriends(FacebookRequest facebookRequest) 
    {
    Log.d(LOG_TAG, "requestFriends(" + ")");

    Calendar c = Calendar.getInstance();
    int month = c.get(Calendar.MONTH) + 1;
    String query = "select name, birthday, uid, pic_square from user where uid in (select uid2 from friend where uid1=me())AND birthday_date >= '" + month+ "/01' AND birthday_date <= '" + month+ "/31' ORDER BY birthday_date ASC";

    Bundle params = new Bundle();
    params.putString("method", "fql.query");
    params.putString("query", query);
    FacebookUtility.asyncRunner.request(null, params, 
    new FacebookRequestListener(FacebookRequestListener.FRIENDS, facebookRequest));
} 
```

每当我运行我的应用程序时，我都没有得到任何数据，但是我的 3 个朋友在 2 月份过生日，但我没有得到那些生日。

我的 Logcat 说：-

```
02-18 16:14:39.918: I/Choreographer(978): Skipped 78 frames!  The application may be doing too much work on its main thread.
02-18 16:14:39.918: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:39.928: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.078: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.078: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.108: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.108: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.148: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.148: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.188: I/FacebookUtility(978): LoginListener onComplete Bundle[{access_token=AAAF2qLBdroMBAGZBbot29pzoZAKbOWJkK5GDIxUCz8g0IFnhCO9yclfHevmvZCFJ4ObQSH0aY055x6ILPbFgSuqVjl7EaWYo4MKbLb8BgZDZD, expires_in=5164038, code=AQDqK2l6gUcRILPfFl87Z290PhZQfDhmQValGvFU77bqbnM91wOtcI3MMIL-Usvs49XDVlnbnjZ_mNiPn9a6-CC11rY2Z-aUTb0yz8S6IophHApQstnfnK9mCJNI_BwGsYyyvv9pZ3gbaGSC5IHpryzatZyZGnBlvo5CZXg6h_drmgd6Gfe6e4akqXWJsnSsXUe4ion-jUysuniGNu3Bnbp7}]
02-18 16:14:40.188: D/Facebook Friends(978): onLoginResultReceived(0)
02-18 16:14:40.218: D/FacebookUtility(978): requestFriends()
02-18 16:14:40.239: I/Choreographer(978): Skipped 83 frames!  The application may be doing too much work on its main thread.
02-18 16:14:40.239: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.248: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.248: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.278: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.278: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.278: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.428: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0
02-18 16:14:40.428: W/Trace(978): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:15:26.923

您需要更改以下代码，希望它无法正常工作。

```
Calender cal = Calendar.getInstance();
cal.get(Calender.YEAR);
String yr = cal.gettime();
String query = "select name, birthday, uid, pic_square from user where uid in (select uid2 from friend where uid1=me())AND birthday_date like '"+ yr+ month+"%' ORDER BY birthday_date ASC"; 
```**

# authentication - j_security_check 如何验证用户？我想删除默认值并保留它以进行 ldap 身份验证

> ID：14934513
> 
> 赞同：0
> 
> 时间：2013-02-18T10:49:22.950
> 
> 标签：authentication, j-security-check

我在使用码头的 Web 应用程序中使用 j_security_check。以下是我`jsp`文件中的表格。

```
<form action="/j_security_check" method="post">
    <table>
        <tr>Username:<input type="text" name="j_username"/></tr>
    <tr>Password:<input type="password" name="j_password"/></tr>
        <tr><input type="submit" value="Login"/></tr>
    </table>
</form> 
```

实际上，我正在尝试从 LDAP 服务器对用户进行身份验证。但是第一次，当我尝试进行身份验证时，它是直接登录的。之后，当我尝试使用这些凭据进行访问时，它会直接登录。

我不确定`j_security_check`每次尝试进行身份验证或验证时将用户名和密码保存在哪里。在这方面的任何想法。

以下是`web.xml`我为基于表单的身份验证保留的代码以供参考。

形式

```
 <!-- Note, this needs to match whats in the AdminWebAppLauncher -->
    <realm-name>myRealm</realm-name>

    <form-login-config>
        <form-login-page>/login.html</form-login-page>
        <form-error-page>/loginError.html</form-error-page>
    </form-login-config>
</login-config>

<security-role>
    <role-name>admin</role-name>
</security-role> 
```

对此有任何想法。请建议..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:05:31.763

您需要在数据库中创建两个表。第一个包含`username`and `password`，第二个包含`username`and `role`。另一种方法是创建一个包含`username`、`password`和 的表`role`。

此外，您应该将以下 xml 标签添加到您的`server.xml`or中`context.xml`：

```
<Realm  className="org.apache.catalina.realm.JDBCRealm"
        driverName="com.mysql.jdbc.Driver"
        connectionURL="jdbc:mysql://localhost/test"
        connectionName="root" connectionPassword="password"
        userTable="user" userNameCol="user_name" userCredCol="user_pass"
        userRoleTable="user_role_link" roleNameCol="role_id" /> 
```

# oracle - 在 Oracle 中使用不同类型的 PL/SQL 集合的目的

> ID：14934514
> 
> 赞同：4
> 
> 时间：2013-02-18T10:49:24.267
> 
> 标签：oracle, collections, user-defined-types

在 oracle 中使用集合的主要目的是什么？

1.  按表索引

2.  嵌套表

3.  可变大小数组

你能解释一下上述类型的集合之间的区别吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-18T11:25:30.247

让我们从嵌套表开始，它们是最常见的集合形式，因此代表了有用的比较基础。

嵌套表是一个变量，它可以保存多个实例，通常是数据库表中的一条记录。它们可能会这样声明：

```
type emp_nt is table of emp%rowtype;
emp_rec_nt emp_nt; 
```

每当我们想要存储我们想要做同样事情的多个数据实例时，它们很有用。经典示例是使用 BULK COLLECT 存储多条记录：

```
select * 
bulk collect into emp_rec_nt
from employees; 
```

这给了我们一个可以循环的数据源；至关重要的是，我们可以向后和向前导航，甚至可以跳到结尾或开头，这是我们用光标无法做到的。嵌套表可以是任何数据类型的集合，包括诸如 PL/SQL 记录或用户定义类型之类的组合。

一个 Index By 表最好被称为（正如文档所做的那样）一个 Associative Array 。这些是带有索引的*单个属性的简单集合。*嵌套表也有索引，但它们的索引只是行数。使用关联数组，索引可以是有意义的，即源自数据值。因此它们对于缓存数据值以供以后使用很有用。索引可以是一个数字，或者（从 9iR2 开始）一个非常有用的字符串。例如，这是一个由员工标识符索引的薪水关联数组。

```
type emp_sal_aa is table of emp.sql%type
     index by emp.empno%type;
l_emp_sales emp_sal_aa; 
```

请注意，我可以使用 INDEX BY BINARY_INTEGER 声明该数组，但使用 %TYPE 语法（自记录代码）更清晰。该数组的元素可以通过索引值标识，在本例中为 EMPNO：

```
l_emp_sals(l_emp_no) := l_emp_sal; 
```

除了缓存引用表或类似的查找值之外，关联数组的用例并不多。

变量数组只是嵌套表，对元素的数量有预定义的限制。所以也许这个名字有误导性：它们实际上是固定数组。VArrays 几乎没有我们可以用嵌套表做的事情（除了限制元素的数量，我们很少会想要这样做）。它们是这样声明的：

```
type emp_va is varray(14) of emp%rowtype;
emp_rec_va emp_va; 
```

我们可以使用批量收集来填充 VArray ...

```
select * 
bulk collect into emp_rec_va
from employees; 
```

但是，我们必须确定查询将*最多*返回VArray 声明中指定的元素数量。否则 SELECT 将抛出 ORA-22165。

变量数组没有已知的用例。好吧，这有点苛刻，但几乎所有时候您都会使用嵌套表。VArray 相对于嵌套表的一大优势是它们保证了元素的顺序。因此，如果您必须按照插入元素的顺序取出元素，请使用 VArray。

PL/SQL 文档用一整章的篇幅介绍集合。 [了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/composites.htm#CIHIEBJC)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-23T06:57:14.103

## PL/SQL 提供这些集合类型：-

关联数组，也称为索引表，可让您使用任意数字和字符串查找下标值的元素。这些类似于其他编程语言中的哈希表。

嵌套表包含任意数量的元素。他们使用序号作为下标。您可以定义等效的 SQL 类型，允许将嵌套表存储在数据库表中并通过 SQL 进行操作。

Varrays（可变大小数组的缩写）包含固定数量的元素（尽管您可以在运行时更改元素数量）。他们使用序号作为下标。您可以定义等效的 SQL 类型，允许将可变数组存储在数据库表中。它们可以通过 SQL 存储和检索，但灵活性不如嵌套表。

## 1\. 在嵌套表和关联数组之间进行选择：-

嵌套表和关联数组（以前称为索引表）都使用类似的下标表示法，但在持久性和参数传递的简易性方面它们具有不同的特征。

嵌套表可以存储在数据库列中，但关联数组不能。嵌套表可以简化 SQL 操作，您通常会将单列表与更大的表连接起来。

关联数组适用于相对较小的查找表，其中每次调用过程或初始化包时可以在内存中构建集合。它们适合收集事先未知数量的信息，因为它们的大小没有固定的限制。它们的索引值更灵活，因为关联数组下标可以是负数，可以是非连续的，并且可以使用字符串值而不是数字。

PL/SQL 自动在主机数组和使用数字键值的关联数组之间进行转换。将集合传入和传出数据库服务器的最有效方法是在关联数组中设置数据值，然后将这些关联数组与批量构造（FORALL 语句或 BULK COLLECT 子句）一起使用。

## 2\. 在嵌套表和可变数组之间进行选择：-

在以下情况下，可变数组是一个不错的选择：

元素的数量是预先知道的。

元素通常都是按顺序访问的。

当存储在数据库中时，可变数组保持它们的顺序和下标。

每个 varray 存储为单个对象，或者在它是列的表内（如果 varray 小于 4KB）或在表外但仍然在同一个表空间中（如果 varray 大于 4KB）。您必须同时更新或检索 varray 的所有元素，这在一次对所有元素执行某些操作时最合适。但是您可能会发现以这种方式存储和检索大量元素是不切实际的。

在以下情况下，嵌套表是一个不错的选择：

索引值不是连续的。

没有固定数量的索引值。但是，施加了最大限制。

您需要一次删除或更新一些元素，但不是所有元素。

您通常会创建一个单独的查找表，主表的每一行都有多个条目，并通过连接查询访问它。

嵌套表可以是稀疏的：您可以删除任意元素，而不仅仅是从末尾删除一个项目。

嵌套表数据存储在单独的存储表中，该表是系统生成的与嵌套表关联的数据库表。当您访问嵌套表时，数据库会为您连接表。这使得嵌套表适用于只影响集合中某些元素的查询和更新。

当嵌套表存储在数据库中并从数据库中检索时，您不能依赖嵌套表的顺序和下标保持稳定，因为顺序和下标不会保留在数据库中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-03T12:43:21.450

你可以使用链接

[嵌套数组和关联数组有什么区别？](https://stackoverflow.com/questions/27268567/what-is-the-difference-between-nested-array-and-associative-array?noredirect=1#comment43012684_27268567)

或者只是阅读它。

嵌套表只是一个包含 n 个元素的数组。

```
declare
  type nested_table_of_integer is table of integer;
  v_my_nested_table nested_table_of_integer;
begin
  v_my_nested_table := nested_table_of_integer(); -- initialize
  v_my_nested_table.extend(10); -- add 10 elements
  v_my_nested_table(1) := 100;
  v_my_nested_table(11) := 1000; -- ORA-06533: Subscript beyond count
end; 
```

嵌套表必须如图所示进行初始化。一开始它的元素为零。要添加元素，我们使用 EXTEND。这个嵌套表有 10 个元素。它们的索引为 1 到 10。元素 1 的值为 100。其他元素的值为 null。访问不存在的元素（例如第 11 个元素）会引发错误。

另一方面，关联数组是名称/值对的数组。让我们使用数字（通常是 pls_integer）来命名：

```
declare
      type associative_array_of_integer is table of integer index by pls_integer;
      v_my_associative_array associative_array_of_integer;
    begin
      v_my_associative_array(1) := 100;
      v_my_associative_array(11) := 1000;
      v_my_associative_array(12) := v_my_associative_array(2); -- ORA-01403: no data found

end; 
```

关联数组不需要初始化。它是空的并且被填充。这里我们将名为 1 的元素与值 100 相关联，将名为 11 的元素与值 1000 相关联。所以数组中有两个元素。当我们尝试访问不在数组中的名称时，我们得到一个找不到数据的异常。

我们还可以使用字符串作为名称：

```
declare
  type associative_array_of_integer is table of integer index by varchar2(100);
  v_my_associative_array associative_array_of_integer;
begin
  v_my_associative_array('age father') := 39;
  v_my_associative_array('age mother') := 32;
  v_my_associative_array('age daughter') := 11;
end; 
```

您可以使用这两个集合来获取表数据，但使用方式不同。嵌套表有一个计数，您可以从 1 循环到计数以访问其元素：

```
declare
  type nested_table_of_integer is table of integer;
  v_my_nested_table nested_table_of_integer;
begin
  v_my_nested_table := nested_table_of_integer(); -- initialize
  select table_name bulk collect into v_my_nested_table from user_tables;
  for i in 1 .. v_my_nested_table.count loop
    dbms_output.put_line(v_my_nested_table(i));
  end loop;
end; 
```

然而，必须使用 FIRST 和 NEXT 从碰巧是下一个和下一个和下一个的第一个索引中读取关联数组。

```
declare
  type associative_array_of_integer is table of integer index by pls_integer;
  v_my_associative_array associative_array_of_integer;
  i integer;
 begin
  select table_name bulk collect into v_my_associative_array from user_tables;
  i := v_my_associative_array.first;
  while i is not null loop
    dbms_output.put_line(v_my_associative_array(i));
    i := v_my_associative_array.next(i);
  end loop;
end; 
```

这里的“名称”恰好是 1、2、3 等（因此由批量集合给出），例如，您可以访问 v_my_associative_array(1)。然而，在你的程序后面，在数组中进行一些可能的删除操作之后，可能会出现间隙，所以你不知道是否存在名为 1 的元素，也不知道元素 4 之前的元素是否恰好是元素 3。与批量收集一样元素的“名称”没有任何意义，您不会真正使用它们，而是通过如图所示的链。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-04T08:12:50.293

集合是一组有序的元素，所有元素的类型都相同。每个元素都由一个唯一的下标标识，该下标代表其在集合中的位置

PL/SQL 提供了三种集合类型 -</p>

索引表或关联数组 嵌套表 可变大小数组或 Varray

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-04T08:19:28.777

使用集合的主要目的是提高应用程序性能。通过使用集合，我们可以“缓存”需要频繁访问和需要修改的静态数据。这会减少对数据库的调用。

此外，如果您需要处理许多类似类型的项目，将这些项目存储在一个集合中将使您可以轻松地遍历每个元素，并通过索引引用每个元素。

[有关收集的更多详细信息，请参阅本文](http://www.developer.com/db/article.php/3379271/Oracle-Programming-with-PLSQL-Collections.htm)

# c# - 如何使用 groupby 检索我的数据库数据以将其存储到我的 C# 结构中？

> ID：14934515
> 
> 赞同：0
> 
> 时间：2013-02-18T10:49:24.687
> 
> 标签：c#, mysql, sql

我有一个名为 final_mark 的数据库表，它包含有问题的学生考试成绩。这是我的表结构。 ![在此处输入图像描述](../Images/46944f18847ff39eae1e08ad152f1304.png)

这是我的 C# 结构并创建了我的结构的数组

```
struct finalMarks
        {
            public string studId;
            public Dictionary<string, int> Ques_Mark;
        };
        private finalMarks[] finalMark; 
```

所以，现在我想以 stud_id 方式将表中的数据存储到这个结构中......

例如，

```
 my finalMark[0].studId="s1"
        finalMark[0].Ques_Mark should contain following elements

              "q1"->8
              "q5"->6 
```

就像我的`finalMark[1]`包含`stud_id "s2"`...的详细信息

这是否可以使用 groupby 或 sql(MYSQL) 中的一些其他函数编写查询？

请给我一个方法来得到这个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:34:55.313

要使用 SQL 从数据库中获取数据，您只需要像其中一个这样的查询。

```
-- All the final marks for one student on one test.
select ques_id, final_mark
from final_mark
where test_id = 1 and stud_id = 's1'; 
```

您的数据或描述中没有暗示将 final_marks 添加在一起是有意义的。（假设您正在记录温度。将 20 度添加到 15 度是没有意义的。）但如果它*确实*有意义，您可以获得每个测试和每个学生的最终总分，就像这样。

```
select test_id, stud_id, sum(final_mark) sum_of_final_mark
from final_mark
group by test_id, stud_id 
```

# git - Git：恢复已删除的远程分支

> ID：14934516
> 
> 赞同：4
> 
> 时间：2013-02-18T10:49:39.070
> 
> 标签：git, github

好吧，我犯了一个非常可怕的错误，首先我只想删除与另一个存储库的远程连接。

我做了这样的命令： git push dev :test

在我检查 github 之后，我才意识到分支测试已经删除。

问题：我怎样才能找回分支？是否可以撤消我已经发出的命令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T11:05:08.110

你还带着本地副本吗？运行`git branch`检查，你可能仍然有你的本地分支，因为你没有提到删除本地分支。

如果是这种情况，只需再次推送到远程存储库，`git push dev test`不带冒号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:03:44.377

> 我的存储库上有分支。

如果您还没有在本地存储库中删除它，您可以再次推送它以重新创建它。

```
git push dev localbranch:test 
```

或者，如果您没有分支本身，但仍然记得哪个提交在顶部，您也可以直接推送该提交：

```
git push dev some-commit-hash:test 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T11:01:04.573

删除远程分支后无法恢复。

由于 git 是 DVCS，你会祈祷其他人没有更新他们的本地副本，让他们帮助将你的分支推*送到*`test`远程。我猜这是让你的分支恢复的唯一方法。

既然你在github，也许有一些可用的叉子？这也是一种选择。

# c# - 加入字符串数组的其余部分

> ID：14934518
> 
> 赞同：1
> 
> 时间：2013-02-18T10:49:47.997
> 
> 标签：c#, join, substring, arrays

```
private static string SetValue(string input, string reference)
{
    string[] sentence = input.Split(' ');
    for(int word = 0; word<sentence.Length; word++)
    {
        if (sentence[word].Equals(reference, StringComparison.OrdinalIgnoreCase))
        {
            return String.Join(" ", sentence.subarray(word+1,sentence.Length))
        }
    }
} 
```

我怎样才能`sentence.subarray(word+1,sentence.Length)`轻松完成或以其他方式做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T10:56:43.570

`String.Join`有一个专门为此而[重载：](http://msdn.microsoft.com/en-us/library/tk0xe5h0.aspx)

```
return String.Join(" ", sentence, word + 1, sentence.Length - (word + 1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:00:54.513

如果您正在严格寻找独立于 string.Join() 函数的子数组解决方案，并且您使用的是支持 Linq 的 .NET 版本，那么我可以推荐：

```
sentence.Skip(word + 1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:17:17.207

[`Where`](http://msdn.microsoft.com/en-us/library/bb549418.aspx)您可以使用重载`index`：

```
return string.Join(" ", sentence.Where((w, i) => i > word)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T10:59:52.503

或者，您可以使用`SkipWhile`而不是 for 循环。

```
private static string SetValue(string input, string reference)
{
    var sentence = input.Split(" ");
    // Skip up to the reference (but not the reference itself)
    var rest = sentence.SkipWhile( 
        s => !s.Equals(reference, StringComparison.OrdinalIgnoreCase));
    rest = rest.Skip(1); // Skip the reference
    return string.Join(" ", rest);
} 
```

# c# - 异常“指定的实体不包含在此 EntitySet 中。” 但包含实体

> ID：14934519
> 
> 赞同：0
> 
> 时间：2013-02-18T10:49:50.763
> 
> 标签：c#, silverlight, silverlight-4.0

我有一个例外“ `The specified entity is not contained in this EntitySet.`”。但是当我查看我的数据源时，会看到我的实体。

这是代码：

```
 Class1 item = (Class1)dg.SelectedItem;

     if (item!= null)
     {
         Class2 item2= new Class2();
         item2.Att1= item.Att1;
         item2.Att2= item.Att2;
         item2.Att3= item.Att3;
         MyDataSource.DataView.Remove(item2);

     } 
```

我想删除我的 DataSource 的对象，该对象在我的数据网格中具有所选项目的属性。

当我在 DataSource 上观看时，我的 item2 出现了，为什么我不能从 DataSource 中删除它？相同的类别，相同的属性。我不明白。

我发现了这个，并且效果很好：

```
if (item!= null)
    {
    Class2 myPiece = MyDataSource.DataView.OfType<Class2>().Where(OrEs => OrEs.Att1 == item.Att1).FirstOrDefault() ;

    MyDataSource.dataView.Remove(myPiece);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:54:29.517

基本上你需要删除同一个项目，你正在创建一个新项目，这是一个问题。

应该是这样的

```
Class1 item = (Class1)dg.SelectedItem;

     if (item!= null)
     {
         MyDataSource.DataView.Remove(item );
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:54:48.250

Item2 不是您的数据源的一部分。

相同类型和属性的两个对象并不一定意味着它们相同，它们应该位于相同的内存位置。

您需要在数据源中找到与相同属性匹配的项目，然后将其删除。

# cocos2d-iphone - 精灵根据旋转运动

> ID：14934521
> 
> 赞同：1
> 
> 时间：2013-02-18T10:49:56.733
> 
> 标签：cocos2d-iphone, geometry, trigonometry

我希望这个论坛可以接受这个问题，因为它更像是一个数学问题而不是编程问题。

我正在使用 cocos2d 框架开发一个基本的太空射击游戏，其中用户控制宇宙飞船并射击小行星/敌人，而敌人也向宇宙飞船射击（原来的嗯？）。

敌人发射的“激光”是管状的，通常只能在 x 轴上从右到左移动。这很容易实现，运动是用这行代码创建的：

```
currentEnemyProjectile.position = ccp(currentEnemyProjectile.position.x - ((screenSize.width/kLaserSpeed)* dtSixty), currentEnemyProjectile.position.y); 
```

我还有一个特定的敌人，它位于屏幕中间并旋转以向宇宙飞船发射它的弹丸，所以如果宇宙飞船与敌人处于不同的 y 位置，那么弹丸精灵将旋转然后移动到飞船的位置，所以它也需要通过 y 轴。

我目前正在使用代码来实现这一点：

```
float xDiff = ((screenSize.width/kLaserSpeed)* dtSixty);
float yDiff = (xDiff / 57) * currentEnemyProjectile.rotation;

currentEnemyProjectile.position = ccp(currentEnemyProjectile.position.x - xDiff, currentEnemyProjectile.position.y + yDiff); 
```

我只是将其作为临时解决方案解决，我知道这不是最佳的做事方式。它有点工作，但是当我计算出沿 x 轴运动的 y 偏移量时，如果射弹沿 y 轴移动得更远，它们将移动得更快。理想情况下，如果它们进一步向上或向下移动，它们应该沿着 x 轴移动得更慢，这样任何轨迹的移动速率都是恒定的。（我希望我已经解释得足够好）

我上次上数学课已经大约 10 年了，所以我的几何/三角函数相当模糊/不存在，任何人都可以阐明如何做到这一点吗？

另外，值得注意的是，我想在不使用 cocos2d 操作的情况下执行此操作。我宁愿每帧都移动我的精灵，因为我在作为游戏的一部分操纵时间流时一直在做，所以我需要比 cocos2d 动作所能提供的更多的控制。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T10:51:44.813

试试这个。我意识到既然你知道玩家的向量，你就不需要三角了。您只需要计算 v 和 h 一次，因此您可能希望保存这些值而不是在每一帧上计算它们。

```
// Vector from enemy to player
CGPoint v = enemy.position - player.position;

// distance from enemy to player (sqrt of the dot product of v with v)
float h = sqrt(v.x*v.x+v.y*v.y);

// Desired distance to move along v
delta = ((screenSize.width/kLaserSpeed)* dtSixty);

// delta/h is the % moved along v, find the % moved in the x and y direction 
xDiff = v.x * delta/h;
yDiff = v.y * delta/h; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:48:26.023

使用起始位置、角度和距离来查找位置，公式如下：

```
ccp( x + ( distance * sin( angle ) ), y + ( distance * cos( angle) ) ) 
```

请记住，此公式的角度必须以弧度为单位，而不是度数。您可以像这样将度数转换为弧度：

```
radians = degrees * PI / 180 
```

# r - ggplot错误的颜色分配

> ID：14934522
> 
> 赞同：7
> 
> 时间：2013-02-18T10:49:58.167
> 
> 标签：r, ggplot2

我实现了以下函数来绘制 ggplot 使用的不同颜色。它们的功能还绘制图例中的十六进制颜色值。但是，不知何故，颜色和十六进制值的分配是错误的，我不明白为什么。我对十六进制颜色进行了排序，然后将它们添加到数据框中`data`，然后在 ggplot2 函数中使用。我认为这可以解决问题，但事实并非如此。`col`我还创建了包含十六进制以及我实际上想要作为图例的 rgb 颜色值的向量，但我也在努力让它工作

```
ggplot_colors <- function(n, size=8, alpha=1) {
    library(grDevices)
    hues = seq(15, 375, length=n+1)
    cols_hex <- sort(hcl(h=hues, l=65, c=100)[1:n])
    cols_rgb <- col2rgb(cols_hex)
    cols_rgb <- apply(cols_rgb, 2, function(x){paste(x, collapse=",")})
    cols <- paste(cols_hex, cols_rgb, sep="; ")
    data <- data.frame(x=1:length(cols), 
                       y=1:length(cols), 
                       cols_hex=cols_hex, 
                       cols_rgb=cols_rgb, 
                       cols=cols)
    ggplot(NULL) +
      geom_point(data=data, 
                 aes(x=x, y=y, colour=cols_hex), size=size, alpha=alpha)
}

ggplot_colors(15, 8, 1) 
```

![在此处输入图像描述](../Images/2c0c8daef454341f17b13d0ed984e24d.png)

作为 RGB 值 (248, 118, 109) 和十六进制值 F8766D 的红色在图例中分配了十六进制值 00B0F6

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T11:18:57.310

由于您想为参数提供颜色名称`colour=`并还显示此参数的图例，您应该添加`scale_colour_identity()`到函数的最后一行。此比例确保提供的值将被解释为实际颜色值。`breaks=cols_hex`在函数中添加参数`scale()`将确保图例中名称的顺序。

```
ggplot(NULL) +     
geom_point(data=data, aes(x=x, y=y, colour=cols_hex), size=size, alpha=alpha) + 
        scale_colour_identity(guide="legend",breaks=cols_hex) 
```

![在此处输入图像描述](../Images/4461d032e80f96f92c79ab7ab5659c95.png)

# php - 实现渐进增强时如何防止重复代码？

> ID：14934523
> 
> 赞同：1
> 
> 时间：2013-02-18T10:50:01.187
> 
> 标签：php, javascript, code-duplication, progressive-enhancement

我正在运行一个 PHP webapp，它允许用户查看项目列表。

基本站点使用 PHP 编写 HTML 来显示搜索结果：

```
<body>
   <?php
      foreach($results as $item) {
         echo "<div class='item'>".
                 "<img src='images/items/".$item['imageName'].".png' />".
                 "<span class='itemDescription'>".$item['text']."</span>".
              "</div>";
      }
    ?>
 </body> 
```

但是，当启用 Javascript 时，我使用 AJAX 来显示结果：

```
function fireSearch(query) {
   $.post("ajax/search.php", {q: query}, function(items) {
      for (var i in items) {
         $("body").append(
             "<div class='item'>"+
                "<img src='images/items/"+items[i]['imageName']+".png' />"+
                "<span class='itemDescription'>"+items[i]['text']+"</span>"+
             "</div>";
      }
   }
} 
```

我可以简单地编写一个名为的 PHP 函数`get_item_html($item)`并让 AJAX 请求返回干净的 HTML 并将其简单地放置在 DOM 中，但是如果请求返回大量结果，那么当我真正需要构建 HTML 时，这将是真正的带宽浪费是`imageName`和`text`。

这只是我必须应对的事情还是有一些优雅的解决方案？

这个问题有名字，所以我可以用谷歌搜索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T00:17:31.703

好的，我知道了。

我找到的最佳解决方案是使用[Mustache](http://mustache.github.com/)，编写一些模板并阅读 Javascript 和 PHP 中的模板。

[Mustache](http://mustache.github.com/)库提供[PHP](https://github.com/bobthecow/mustache.php)和[Javascript](https://github.com/janl/mustache.js)实现，所以不用担心：

1.  创建一些`.mustache`模板
2.  在 PHP 中，使用[库](http://mustache.github.com/)提供的类和方法来创建 HTML 和`echo`它
3.  在 Javascript 中，通过添加`mustache.js`脚本来使用模板，并为页面使用的每个模板添加一个脚本标签，其中包含模板文件的内容`echo`：
    `<script id="arbitraryID" type="text/mustache">`
    `<?php echo file_get_contents(__DIR__."/templates/myTmpl.mustache"); ?>`
    `</script>`
    然后可以通过以下方式使用模板（jQuery 样式）：
    `var tmpl = $("#arbitraryID").html();`

希望这可以帮助任何发现这个问题的人......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:38:08.847

正如Bergi所说，使用模板封装信息的显示，在ajax请求中只发送imageName和text。

有很多方法可以实现模板（我听说过很多关于handlebars.js的好东西，还没有尝试过），一个简单的方法是用ajax请求上收到的数据编写html标记并将其附加到容器中，也许使用一个简单的函数，以后可以用适当的模板方法替换它。

```
function drawItem(item) {
    return "<div class='item'>" +
             "<img src='images/items/"+item.imageName+"' />" +
             "<span class='itemDescription'>"+item.text+"</span>" +
           "</div>";
}

function fireSearch(query) {
    $.post("ajax/search.php", {q: query}, function(items) {
        for (var i=0; i<items.length; i++) {
            $("body").append(drawItem(items[i]);
        }
    }, 'json');
} 
```

ajax/search.php 会返回类似： [{"imageName":"blabla.png","text":"moomoo"},...]

由这样的 search.php 文件生成：

```
<?php 
echo json_encode(array(
    array("imageName"=>"blabla.png", "text"=>"moomoo"),
    array("imageName"=>"example2.png", "text"=>"second example")
));

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:12:56.450

我会让 ajax 函数返回一个 json 构建，然后我会将你的 .append() 变成一个自定义的最小化函数以减小大小，这样你就会有很多更清晰的代码。

# jquery - jQuery UI 选项卡无法正确计算宽度

> ID：14934524
> 
> 赞同：0
> 
> 时间：2013-02-18T10:50:02.300
> 
> 标签：jquery, css, jquery-ui, tabs

我在页面上使用 jQuery UI 选项卡。我正在对内容面板应用填充。但是在页面加载时，似乎文本的内部宽度被计算为父宽度（不考虑填充），然后挂在面板外。但是，如果我选择一个新选项卡并返回原始选项卡，它会自行修复（考虑填充）。

以前有没有人遇到过这个问题，如果有，我该如何解决？提前致谢。

![在此处输入图像描述](../Images/613d05d6e31708b188df83b4ad88ad05.png)

# ios - 将 UITextField 对象保存到 NSArray

> ID：14934526
> 
> 赞同：1
> 
> 时间：2013-02-18T10:50:08.230
> 
> 标签：ios, uitextfield, nsarray

我有一个输入表单，该表单将使用 NSArray 动态创建以填充左侧的描述字段（UILabels）。在右侧，每个 UILabel 都应该有一个对应的 UITextField。

我想（我实际上有）动态创建这些 UITextField，将它们保存到 NSArray 中，然后在按下“完成”按钮评估表单时能够访问它们可能修改的文本值。

显然，仅将它们添加到 NSArray 只会以最近的表示形式存储对象的副本。如何存储真正的“链接”？我正在使用 ARC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:35:38.360

没关系。它已经发生了。存储在 NSArray 中的内容似乎是一个链接，毕竟不是副本。我只是有另一个隐藏真实结果的错误。

# linux - Linux CAN 套接字 - 处理错误帧

> ID：14934528
> 
> 赞同：1
> 
> 时间：2013-02-18T10:50:25.140
> 
> 标签：linux, can-bus

我知道，如果[CAN](http://en.wikipedia.org/wiki/CAN_bus)传输出现错误，系统会生成特定的错误帧。但我不知道如何使它工作。

我设置了我的 CAN 套接字，然后写入数据：

```
write(s, (struct sockaddr *)&addr, sizeof(addr)) 
```

总线上没有连接任何东西，所以我期待一个 CAN_ERR_ACK，但什么都没有到达。

PS：启用错误接收。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:32:03.087

您可能必须启用错误接收

```
can_err_mask_t err_mask = CAN_ERR_ACK ;
setsockopt(skt, SOL_CAN_RAW, CAN_RAW_ERR_FILTER,&err_mask, sizeof(err_mask)); 
```

# python - 如何使用 Python 抓取 Twitter 页面？

> ID：14934534
> 
> 赞同：0
> 
> 时间：2013-02-18T10:50:36.910
> 
> 标签：python, twitter, python-2.7

当我尝试使用此代码抓取 Twitter 时：

```
import urllib2
s = "https://mobile.twitter.com/bing/"
html = urllib2.urlopen(s).read()
print html 
```

...我收到以下错误：

```
Traceback (most recent call last):
  File "C:\Users\arpit\Downloads\Desktop\Wiki Code\final Crawler_wiki.py", line 14, in <module>
    html = urllib2.urlopen(s).read()
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 418, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1215, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "C:\Python27\lib\urllib2.py", line 1177, in do_open
    raise URLError(err)
URLError: <urlopen error [Errno 10061] No connection could be made because the target machine actively refused it> 
```

如果我替换`mobile.twitter.com`为`twitter.com`then 它可以工作，但我希望它可以与`mobile.twitter.com`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:59:20.793

twitter 站点可能正在寻找您在通过 urllib api 发出请求时未设置的用户代理。

您可能需要使用[mechanize](http://stockrt.github.com/p/emulating-a-browser-in-python-with-mechanize/)之类的东西来伪造您的用户代理。

但我强烈建议您使用[twitter api](https://dev.twitter.com/)，它提供了许多简单而出色的数据处理方式。

# php - 在 sql 查询中使用 if/else

> ID：14934535
> 
> 赞同：0
> 
> 时间：2013-02-18T10:50:37.910
> 
> 标签：php, mysqli, query-optimization

我有一个多语言网站，并使用它来获取用户使用的语言：

```
$languagestring = array();
$res1 = "SELECT id, text FROM ".$prefix."_language WHERE lang = 'en' ORDER BY id ASC";
if($result1 = $mysqli->query($res1)){ 
    while($row1 = $result1->fetch_object()){
        $langid = $row1->id;

        $res = "SELECT text FROM ".$prefix."_language WHERE fk_id = $langid AND lang = '$language'";
        if($result = $mysqli->query($res)){ 
            $row = $result->fetch_object();
            if(!$row){
                $languagestring[] = $row1->text;
            } else {
                $str = $row->text;
                $languagestring[] = $str;
            }
        }
    }
} 
```

在这个脚本中，我首先获取默认的英语语言，然后检查用户喜欢的语言是否有与英语匹配的字符串。这就像一个魅力，但执行时间很长。是否可以将这两个查询合并为一个，如果是的话......如何？

提前致谢 ;-）

＃＃＃＃＃＃＃＃ 编辑

试过这个没有运气：

```
$res1 = "SELECT t1.text as etext, t2.text 
FROM ".$prefix."_language t1 LEFT JOIN ".$prefix."_language t2 ON t2.fk_id = t1.id AND lang = 'da'";
if($result1 = $mysqli->query($res1)){ 
    while($row1 = $result1->fetch_object()){
        $row1->text.'<br>';
    }
} 
```

它不会返回任何结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:23:43.320

```
SELECT t1.text as etext, t2.text 
FROM language t1 LEFT JOIN language t2 ON t2.fk_id=t1.id AND lang = '$language' 
```

或类似的东西。
主要思想是将英语部分左连接到另一种语言部分。它将返回 2 个文本或仅返回一个英文文本

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T13:29:13.230

使用 UNION 和 Sub-Query 的解决方案可以工作，但如果考虑加载时间，可能不是最好的选择。

```
"( select text from ".$prefix."_language where lang = '$langid') 
union
( select text from ".$prefix."_language where lang = 'en' and fk_id not in ( select fk_id from ".$prefix."_language where lang = '$langid' ))"; 
```

# c# - 通过循环遍历字段数组来创建集合的 LINQ 替代方法

> ID：14934537
> 
> 赞同：1
> 
> 时间：2013-02-18T10:50:45.557
> 
> 标签：c#, linq

我有一个数组，其中包含以下格式的数据结构的字段；

```
[0] = Record 1 (Name Field)
[1] = Record 1 (ID Field)
[2] = Record 1 (Other Field)
[3] = Record 2 (Name Field)
[4] = Record 2 (ID Field)
[5] = Record 2 (Other Field) 
```

等等

我正在将其处理成一个集合，如下所示；

```
for (int i = 0; i < components.Length; i = i + 3)
{
    results.Add(new MyObj
        {
            Name = components[i],
            Id = components[i + 1],
            Other = components[i + 2],
        });
} 
```

这很好用，但我想知道是否有一种很好的方法可以使用 LINQ 实现相同的输出？这里没有功能要求，我只是好奇它是否可以完成。

我确实做了一些按索引分组的实验（在`ToList()`数组之后）；

```
var groupings = components
    .GroupBy(x => components.IndexOf(x) / 3)
    .Select(g => g.ToArray())
    .Select(a => new
        {
            Name = a[0],
            Id = a[1],
            Other = a[2]
        }); 
```

这行得通，但我认为这对于我正在尝试做的事情来说有点矫枉过正。`for`有没有更简单的方法来实现与循环相同的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:55:22.000

我会说坚持你的for循环。但是，这应该适用于 Linq：

```
List<MyObj> results = components
    .Select((c ,i) => new{ Component = c, Index = i })
    .GroupBy(x => x.Index / 3)
    .Select(g => new MyObj{
        Name = g.First().Component,
        Id = g.ElementAt(1).Component,
        Other = g.Last().Component
    })
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:16:51.727

[看起来像是 Josh Einstein 的IEnumerable.Batch](http://josheinstein.com/blog/index.php/2009/12/ienumerable-batch/)扩展的完美候选者。它将一个可枚举对象分割成一定大小的块，并将它们作为数组的枚举提供：

```
public static IEnumerable<T[]> Batch<T>(this IEnumerable<T> self, int batchSize) 
```

在这个问题的情况下，你会做这样的事情：

```
var results = 
    from batch in components.Batch(3)
    select new MyObj { Name = batch[0], Id = batch[1], Other = batch[2] }; 
```

* * *

更新：2 年过去了，我链接到的 Batch 扩展似乎已经消失了。由于它被认为是问题的答案，以防万一其他人发现它有用，这是我当前的实现`Batch`：

```
public static partial class EnumExts
{
    /// <summary>Split sequence into blocks of specified size.</summary>
    /// <typeparam name="T">Type of items in sequence</typeparam>
    /// <param name="sequence"><see cref="IEnumerable{T}"/> sequence to split</param>
    /// <param name="batchLength">Number of items per returned array</param>
    /// <returns>Arrays of <paramref name="batchLength"/> items, with last array smaller if sequence count is not a multiple of <paramref name="batchLength"/></returns>
    public static IEnumerable<T[]> Batch<T>(this IEnumerable<T> sequence, int batchLength)
    {
        if (sequence == null)
            throw new ArgumentNullException("sequence");
        if (batchLength < 2)
            throw new ArgumentException("Batch length must be at least 2", "batchLength");

        using (var iter = sequence.GetEnumerator())
        {
            var bfr = new T[batchLength];
            while (true)
            {
                for (int i = 0; i < batchLength; i++)
                {
                    if (!iter.MoveNext())
                    {
                        if (i == 0)
                            yield break;
                        Array.Resize(ref bfr, i);
                        break;
                    }

                    bfr[i] = iter.Current;
                }
                yield return bfr;
                bfr = new T[batchLength];
            }
        }
    }
} 
```

此操作是延迟的、单次枚举的并在线性时间内执行。与我见过的其他一些实现相比，它相对较快`Batch`，即使它为每个结果分配一个新数组。

这只是表明：在您进行分析之前，您永远无法分辨，并且您应该始终引用代码以防它消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:04:20.180

也许迭代器可能是合适的。

声明一个自定义迭代器：

```
static IEnumerable<Tuple<int, int, int>> ToPartitions(int count)
{
    for (var i = 0; i < count; i += 3)
        yield return new Tuple<int, int, int>(i, i + 1, i + 2);
} 
```

准备以下 LINQ：

```
var results = from partition in ToPartitions(components.Length)
              select new {Name = components[partition.Item1], Id = components[partition.Item2], Other = components[partition.Item3]}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T11:13:45.583

这种方法可以让您了解如何使代码更具表现力。

```
public static IEnumerable<MyObj> AsComponents<T>(this IEnumerable<T> serialized)
    where  T:class
{
    using (var it = serialized.GetEnumerator())
    {
        Func<T> next = () => it.MoveNext() ? it.Current : null;

        var obj = new MyObj
            {
                Name  = next(),
                Id    = next(),
                Other = next()
            };

        if (obj.Name == null)
            yield break;

        yield return obj;
    }
} 
```

就目前而言，我不喜欢检测输入结束的方式，但您可能拥有有关如何更好地执行此操作的特定于域的信息。

# html - 试图环绕照片

> ID：14934538
> 
> 赞同：0
> 
> 时间：2013-02-18T10:50:52.547
> 
> 标签：html, css

我正在尝试使图像保持在主框中的中心并且仍然包裹在边框内，这是自动的，因为有几张图片并且它们的大小不同。

这是CSS：

```
.bild2  {
border:3px solid #999;
-moz-border-radius:8px;
-webkit-border-radius:8px;
-opera-border-radius:8px;
-khtml-border-radius:8px;
border-radius:20px;
box-shadow:rgba(0,0,0,0.5) 0px 0px 24px;
height: auto;
overflow: hidden;
margin: auto; 
```

}

和html：

```
<div class="bild2" style="width:406px;">
  <a href="../index.html">
    <img src="images/boyP.jpg" onclick="var node=parentNode.parentNode.parentNode.parentNode; if( node.click ) { return node.click(); } else { return true; }">
  </a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:56:18.577

我建议将图像放置为 a`background-image`并将其设置`background-position`为`center center`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:38:46.280

这是使用`background-image`代替的解决方案`<img>`：

[http://jsfiddle.net/XhtTJ/1/](http://jsfiddle.net/XhtTJ/1/)

这是`<img>`定位的解决方案：

[http://jsfiddle.net/myRKK/1/](http://jsfiddle.net/myRKK/1/)

请记住，在这两种情况下，您都需要`height`为您的`div`.

# asp.net - WeForm texbox 控件。与 ontextchanged 事件相关的操作未发生

> ID：14934546
> 
> 赞同：0
> 
> 时间：2013-02-18T10:51:20.630
> 
> 标签：asp.net, system.web.ui.webcontrols

Web.UI.Controls.TextBox

在我用过的aspx页面中-

```
<asp:TextBox ID="TextBox1" runat="server"  OnTextChanged="tmaintextchanged"  ></asp:TextBox> 
```

在我后面的代码中：

```
<asp:Label ID="show" runat="server" ></asp:Label >

protected void tmaintextchanged(object sender, EventArgs e)
        {
            show.Text = "working";
        } 
```

当我执行此操作时，为什么标签“显示”的文本没有改变。请帮助。我是否缺少文本框的任何配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:25:58.117

您需要在 TextBox 控件上设置自动回发：

```
<asp:TextBox ID="TextBox1" runat="server" AutoPostBack="true" OnTextChanged="tmaintextchanged"  ></asp:TextBox> 
```

**更新**

看到这个帖子：

[如何在 KeyUp 上进行文本框回发？](https://stackoverflow.com/questions/1758240/how-do-i-make-a-textbox-postback-on-keyup)

# php - 如何用php进行数组操作？

> ID：14934555
> 
> 赞同：-1
> 
> 时间：2013-02-18T10:51:43.670
> 
> 标签：php, arrays

这是我拥有的数组：

```
Array(
    [0] => textfield_1
    [1] => ssss
    [2] => checkboxgroup_1
    [3] => Option 1
    [4] => checkboxgroup_1
    [5] => Option 2
    [6] => checkboxgroup_1
    [7] => Option 3
    [8] => radiobutton_1
    [9] => Option 1
    [10] => radiobutton_1
    [11] => Option 2
    [12] => radiobutton_1
    [13] => Option 3
    [14] => dropdown_1
    [15] => Option 1
    [16] => dropdown_1
    [17] => Option 2
    [18] => dropdown_1
    [19] => Option 3
) 
```

我想像下面这样显示它：

```
Array(
    [0] => textfield_1|ssss
    [1] => checkboxgroup_1|Option 1,Option 2,Option 3
    [2] => radiobutton_1|Option 1,Option 2,Option 3
    [3] => dropdown_1|Option 1,Option 2,Option 3
) 
```

任何人都可以提出任何想法吗？

```
Note: 
```

输出数组是一个新数组......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T11:15:50.137

以下给出了一个我认为比您要求的更容易使用的数组：

```
$arr = array_chunk($arr, 2);
$out = array();
foreach ($arr as $key => $value){
    $out[$value[0]][] = $value[1];
}
print_r($out); 
```

输出：

```
Array
(
    [textfield_1] => Array
        (
            [0] => ssss
        )

    [checkboxgroup_1] => Array
        (
            [0] => Option 1
            [1] => Option 2
            [2] => Option 3
        )

    [radiobutton_1] => Array
        (
            [0] => Option 1
            [1] => Option 2
            [2] => Option 3
        )

    [dropdown_1] => Array
        (
            [0] => Option 1
            [1] => Option 2
            [2] => Option 3
        )

) 
```

如果您需要显示问题中的数据，您可以执行以下操作：

```
foreach ($out as $key => $value){
    echo $key."|".implode(',', $value)."\n";
} 
```

输出：

```
textfield_1|ssss
checkboxgroup_1|Option 1,Option 2,Option 3
radiobutton_1|Option 1,Option 2,Option 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:14:53.153

这是我快速编写的一些代码...

```
$input = array(
    'textfield_1',
    'ssss',
    'checkboxgroup_1',
    'Option 1',
    'checkboxgroup_1',
    'Option 2',
    'checkboxgroup_1',
    'Option 3',
    'radiobutton_1',
    'Option 1',
    'radiobutton_1',
    'Option 2',
    'radiobutton_1',
    'Option 3',
    'dropdown_1',
    'Option 1',
    'dropdown_1',
    'Option 2',
    'dropdown_1',
    'Option 3');

// Assumes input array is ordered key, value, key, ...
function parseToFormattedArray($input)
{
    $intermediate = array();
    $lastKey = '';

    // Loop through all the input values
    for($i = 0; $i < count($input); ++$i)
    {
        if(($i % 2) == 0)
        {
            // Remember the key for next iteration
            $lastKey = $input[$i];
        }
        else
        {
            if(isset($intermediate[$lastKey]))
            {
                // This key already exists, so append the value to the existing values
                $intermediate[$lastKey] .= ",{$input[$i]}";
            }
            else
            {
                // This key doesn't exist yet, so make it
                $intermediate[$lastKey] = "{$lastKey}|{$input[$i]}";
            }
        }
    }

    // Drop the keys and only return the values.
    return array_values($intermediate);
}

$output = parseToFormattedArray($input);
print_r($output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:37:35.110

作为您的问题的解决方案，请参考下面提到的代码片段

```
 $a=array('textfield_1',
'ssss',
'checkboxgroup_1',
'Option 1',
'checkboxgroup_1',
'Option 2',
'checkboxgroup_1',
'Option 3',
'radiobutton_1', 
'Option 1',
'radiobutton_1',
'Option 2',
'radiobutton_1',
'Option 3',
'dropdown_1',
'Option 1',
'dropdown_1',
'Option 2',
'dropdown_1',
'Option 3'
 );

$keys=array();
$values=array();
$res=array();
foreach($a as $key=>$value)
{
 if(($key %2==0 || $key==0))
 {  
    array_push($keys,$value);
 }
 else
 {
    array_push($values,$value);
 }
}

$x=array();

  for($i=0;$i<count($keys);$i++)
  {
   $x[$keys[$i]][]=$values[$i];
  }

 foreach($x as $key=>$value)
 {
   array_push($res,$key.'|'.join(',',$value));
 }

 echo '<pre>';
 print_r($res); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T15:02:09.020

试试这个：

```
$a = array(
    'textfield_1',
    'ssss',
    'checkboxgroup_1',
    'Option 1',
    'checkboxgroup_1',
    'Option 2',
    'checkboxgroup_1',
    'Option 3',
    'radiobutton_1', 
    'Option 1',
    'radiobutton_1',
    'Option 2',
    'radiobutton_1',
    'Option 3',
    'dropdown_1',
    'Option 1',
    'dropdown_1',
    'Option 2',
    'dropdown_1',
    'Option 3'
);

foreach($a as $k => $v)
{
    if(($k%2==0||$k==0))
    {
        $arr[$v][] = $a[$k+1];
    }
}

$kk = 0;
foreach($arr as $k => $v)
{
    $arr2[$kk] = $k.'|'.implode('|',$v);
    $kk++;
}
print_r($arr2);

Array
(
    [0] => textfield_1|ssss
    [1] => checkboxgroup_1|Option 1|Option 2|Option 3
    [2] => radiobutton_1|Option 1|Option 2|Option 3
    [3] => dropdown_1|Option 1|Option 2|Option 3
) 
```

# angularjs - 角度部分无法获取浏览器高度

> ID：14934556
> 
> 赞同：0
> 
> 时间：2013-02-18T10:51:43.730
> 
> 标签：angularjs

我在这里遇到了一个非常讨厌的问题..我在 Angular js 中创建了一个应用程序并使用了部分。我遇到的一个问题是，当我在移动设备上部署应用程序时，它不会将 100% 的浏览器高度传递给内部的部分

这是我的样本：

```
 <html>
    <head>
    .
    .
    </head>
    <body>
    .
    <ng-view></ng-view>
    .
    .
    .
    </body> 
```

在我的 CSS 中我使用这个

```
 html, body {
  min-height: 100%;
  min-width: 100%
  }

  .header {
  height: 20%; /*i expect this to be 20% of body height*/
  background-color: red
  } 
```

这是我的部分内心

```
 <div class="header"></div> 
```

***问题：***带有类标题的 div 不占主体高度的 20%，它根本不显示，而在 dektop 浏览器上运行的相同代码似乎可以工作，顶部区域的 20% 显示为红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:13:31.263

您可能需要在您的身体上专门设置位置和顶部/底部，以使标题按您的预期显示。

看一眼：

[调整网页高度为手机屏幕高度](https://stackoverflow.com/questions/6656055/adjust-webpage-height-to-height-of-mobile-screen)

# mfc - 模式对话框的 WM_KILLFOCUS 不起作用

> ID：14934559
> 
> 赞同：0
> 
> 时间：2013-02-18T10:51:48.350
> 
> 标签：mfc

在我的应用程序中，我有一个标准的 MFC 模式对话框。当用户在对话框窗口外单击时，我想关闭该对话框。为此，我`ON_MESSAGE(WM_KILLFOCUS, OnKillFocus)`手动放入了对话框的消息映射（类向导不提供该选项）：

```
BEGIN_MESSAGE_MAP(CTestTreeCtrlDlg, CDialog)
//{{AFX_MSG_MAP(CTestTreeCtrlDlg)
   ON_NOTIFY(TVN_SELCHANGED, IDC_TREE1, OnSelchangedTree)
//}}AFX_MSG_MAP
   ON_MESSAGE(WM_KILLFOCUS, OnKillFocus)
END_MESSAGE_MAP()
...
void CTestTreeCtrlDlg::OnKillFocus() 
{
  ...
} 
```

现在，如果我在对话框外单击，后者当然会失去焦点，但由于某种原因不会调用 OnKillFocus 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:58:56.610

谢谢帕特里西！

WM_ACTIVATE 完成这项工作：

```
BEGIN_MESSAGE_MAP(CTestTreeCtrlDlg, CDialog)
//{{AFX_MSG_MAP(CTestTreeCtrlDlg)
  ON_NOTIFY(TVN_SELCHANGED, IDC_TREE1, OnSelchangedTree)
//}}AFX_MSG_MAP
  ON_WM_ACTIVATE()
END_MESSAGE_MAP()
...
void CTestTreeCtrlDlg::OnActivate(UINT nState, CWnd* pWndOther, BOOL bMinimized) 
{
  CDialog::OnActivate(nState, pWndOther, bMinimized);

  if (nState == WA_INACTIVE)
    OnOK() ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:30:14.860

快速搜索-> [http://www.itlisting.org/5-windows/964b01901673b4b0.aspx](http://www.itlisting.org/5-windows/964b01901673b4b0.aspx) 我很确定这是一个更好的方法。

# asp.net - 为什么图像按钮 id 无法识别

> ID：14934564
> 
> 赞同：1
> 
> 时间：2013-02-18T10:52:07.553
> 
> 标签：asp.net

为什么我不能调用 ImageButton.ImageUrl？

默认.aspx：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

    <asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="Test1.jpg" CommandName="Delete" OnCommand="ImageButton_Command" />

 </asp:Content> 
```

默认.aspx.cs：

```
void ImageButton_Command(object sender, CommandEventArgs e)  
      {  
       string name = ***ImageButton1.ImageUrl***; //(Error) 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:57:31.227

提供的代码没有理由不识别此控件；这可能是您的文件`.aspx`和`.aspx.cs`文件之间的差异（前者是否与后者正确相关？），或者它可能只是一个构建问题，您是否完成了完整的清理和重建？

无论您当前的情况为何会发生这种情况，一个解决方案可能是这样的：

```
protected void ImageButton_Command(object sender, CommandEventArgs e) {
  var button = sender as ImageButton;
  if (button != null) {
    string name = button.ImageUrl;
  }
} 
```

在这里进行空检查很重要，因为从技术上讲，这个事件处理程序可以被订阅的按钮以外的东西调用以引发事件，即使情况*不*应该如此。

# wpf - 我可以在 RequestNavigate 到 userControl 时挂接什么事件？

> ID：14934566
> 
> 赞同：0
> 
> 时间：2013-02-18T10:52:15.040
> 
> 标签：wpf, user-controls, prism-4

我在使用 PRISM 和 Unity for IOC/DI 编写的 WPF 应用程序中有一个视图。在客户端视图中输入详细信息后，我将详细信息保存到数据库，然后调用我的 regionManagers 的 requestNavigate 到我的主客户端视图。我想在每次将 ClientView 导航到时调用我的 RefreshDetails 命令，我可以将 ClientMainView userControl 上的哪些事件挂钩以绑定到我的 RefreshDetails 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:55:54.100

我绑定到我的 userControls 的 Loaded 事件，如下所示：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
        <i:InvokeCommandAction Command="{Binding RefreshDetailsCommand}"/>
    </i:EventTrigger>
<i:Interaction.Triggers> 
```

我的命令会触发....

# node.js - 无法部署在 Yeoman 中制作的 Angular 应用程序

> ID：14934571
> 
> 赞同：2
> 
> 时间：2013-02-18T10:52:26.087
> 
> 标签：node.js, angularjs, yeoman

我使用 Yeoman 创建了一个应用程序。当“yeoman 服务器”运行时，它在我的本地运行良好。

但是当我创建一个运行“yeoman build”的dist时，它不起作用。这是 github 上代码的链接：[https ://github.com/srijanaravali/yaspa](https://github.com/srijanaravali/yaspa)

Node 正在我的机器上运行，并且 Angular 种子中的演示项目同时运行良好。

# jquery - 使用 JQuery在内部插入中断标记

> ID：14934572
> 
> 赞同：-1
> 
> 时间：2013-02-18T10:52:25.730
> 
> 标签：jquery, html

我需要在`<span>`. 我的跨度标签在`<li>`标签内。

```
<li><span><a href=""></a></span><span>some text</span> <li> 
```

我想在`<span>`包含锚标签的地方放置一个中断标签。

请告诉我如何在代码中找到`<span>`标记并使用 JQuery 添加中断标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T10:54:40.360

```
$("li span:has(a)").after("<br/>"); 
```

***现场演示：http:** [//jsfiddle.net/LkeVE/1](http://jsfiddle.net/LkeVE/1)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T10:54:08.187

使用`insertAfter`with`:has`检查是否`span`有`a`

```
$('li span:has(a)').insertAfter("<br />") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T10:54:25.263

试试这个

```
$('span').after('<br />'); 
```

# java - 我向 activemq 代理发送了一条预定消息，但 Web 控制台中显示了两条消息

> ID：14934580
> 
> 赞同：0
> 
> 时间：2013-02-18T10:52:57.587
> 
> 标签：java, jms, activemq, message-queue

我编写了一个简单的`ActiveMQ`客户端程序来生成如下消息：

```
public static void main(String[] args) throws Throwable
{
    final ActiveMQConnectionFactory conFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
    final QueueConnection connection = conFactory.createQueueConnection();
    final Session session = connection.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);
    final Destination destination = new ActiveMQQueue("MJ_SAF");
    final MessageProducer producer = session.createProducer(destination);

    Message message = session.createTextMessage("test");
    message.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, 20);
    message.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_PERIOD, 1);
    message.setIntProperty(ScheduledMessage.AMQ_SCHEDULED_REPEAT, 1);
    producer.send(message);
} 
```

当这个程序执行时，我希望在预定部分存储一条消息，`ActiveMQ`并在 20 秒后发送`MJ_SAF`队列，但是当我连接到 web consol 时看到以下结果：

![在此处输入图像描述](../Images/b5115b15a382a12c8e56eefd9608bd62.png)

存储了两条消息，`MJ_SAF`这是不正确的，但是当我通常发送消息（没有调度）时，我在 Web 控制台中看到一条消息。

```
public static void main(String[] args) throws Throwable
{
    final ActiveMQConnectionFactory conFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");
    final QueueConnection connection = conFactory.createQueueConnection();
    final Session session = connection.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);
    final Destination destination = new ActiveMQQueue("MJ_SAF");
    final MessageProducer producer = session.createProducer(destination);

    Message message = session.createTextMessage("test");
    producer.send(message);
} 
```

通过上面的代码，一切都很好：

![在此处输入图像描述](../Images/6f379127309dd3683b8050e8258ba35e.png)

我不明白这种行为。有谁知道这其中的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:26:58.090

您将属性`ScheduledMessage.AMQ_SCHEDULED_REPEAT`设置为 1，因此它将重复 1 次，总共给您 2 条消息。

有关属性的说明，请参见[此处](http://activemq.apache.org/delay-and-schedule-message-delivery.html)。据我了解，您当前的设置将等待 20 毫秒，发布 1 条消息，等待 1 毫秒，然后发布第二条消息，然后结束。

# prolog - Prolog 重新分配运算符

> ID：14934585
> 
> 赞同：2
> 
> 时间：2013-02-18T10:53:34.487
> 
> 标签：prolog, operators, redefine, iso-prolog

我是 prolog 的新手，我正在尝试通过更改优先级来重新分配 prolog 中的运算符。我遇到以下 4 个错误：

```
 :-op(1000,yf,+).  %unary plus%
 :-op(1000,yf,-).   %unary minus%
 :-op(750,yfx,"%").   %modulo% 
```

前两个给了我一个类似的错误，如下所示：

```
warning: directive failed (op(1000,xf,+)) with exception (error(permission_error(create,operator,+),op/3)) 
```

我也收到模一错误（一个不同的错误），但我怀疑这是因为我不应该`%`用引号括起来（但我应该如何将它与评论标记区分开来？）。

我重新定义了一堆其他运算符（例如加法运算符`:-op(500,yfx,+).`），它们没有给我带来任何问题。只有上面列出的 3 个给我错误。

任何人都可以对此有所了解吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:47:37.683

您正在尝试定义`+`为后缀运算符。但是，`+`也被定义为中缀运算符，标准不允许将运算符定义为后缀和中缀。如果你真的想这样做，你必须首先使用优先级 0 取消定义中缀运算符。

但是，我只能建议您不要更改标准运算符，例如`+`or `-`。就像您要更改 C、C++、C#、Java、Perl、PHP、Javascript 等中的运算符优先级：这会让您作为程序员的生活非常非常痛苦。

我不建议`%`在 Prolog 中使用 as 运算符：`%`开始评论。如果您想将其用作运算符，则必须一直写`'%'`quoted。Prolog 已经定义为操作符`mod`。`rem`这还不够吗？

您可能正在使用非常符合 ISO 标准的 GNU Prolog。其他 Prolog 允许您同时定义中缀和后缀。见[#237](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/conformity_assessment#237)。但是那些其他 Prologs 做很多不同的事情。

总而言之：作为初学者，最好远离更改操作员表。您确实需要先习惯标准运算符。如果有更多经验，您很可能更愿意只添加与现有运算符具有相似优先级的新运算符。

* * *

[iso-prolog](/questions/tagged/iso-prolog "显示标记为“iso-prolog”的问题")：ISO/IEC 13211-1:1995 6.3.4.3 运算符，最后一段：

> 不能有
> 同名的中缀和后缀运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:49:42.530

GNU Prolog[文档](http://www.gprolog.org/manual/html_node/gprolog038.html#op/3%3a%28Term-input/output%29)指出

> 一个原子可以有多个运算符定义（例如前缀和中缀，如+），但是一个原子不能同时具有中缀和后缀运算符定义。

从这里开始，前两个声明的错误。然后您应该将说明符更改为`fy`. 模运算符将需要单引号。

# salesforce - 标注太多：DataBase.Batchable 中有 11 个

> ID：14934590
> 
> 赞同：1
> 
> 时间：2013-02-18T10:53:43.627
> 
> 标签：salesforce, apex-code

我的 DataBase.Batchable 中有一个代码段

```
if(pageToken!=null)
           deleteEvents(accessToken , pageToken,c.CalendarId__c);

        } 
```

和删除事件功能代码是

```
public static void deleteEvents(String accessToken,String pageToken,String CalendarId){
    while(pageToken != null)
{   String re = GCalendarUtil.doApiCall(null,'GET','https://www.googleapis.com/calendar/v3/calendars/'+CalendarId+'/events?pageToken='+pageToken,accessToken);
                System.debug('next page response is'+ re);
                 re = re.replaceAll('"end":','"end1":');
re = re.replaceAll('"dateTime":','"dateTime1":');  
  JSON2Apex1 aa = JSON2Apex1.parse(re);
   List<JSON2Apex1.Items> ii = aa.items ;
  System.debug('size of ii'+ii.size());
  pageToken = aa.nextPageToken ;
 List<String> event_id =new List<String>();

           if(ii!= null){
           for(JSON2Apex1.Items i: ii){
           event_id.add(i.id);
           }
           }
  for(String ml: event_id)
  System.debug('Hello Worlds'+ml);
            for(String s:event_id)
       {
       GCalendarUtil.doApiCall(null,'DELETE','https://www.googleapis.com/calendar/v3/calendars/'+CalendarId+'/events/'+s,accessToken);

       }

 }   
    } 
```

因为大约有 180 个事件，这就是我收到此错误的原因，但是为了删除它们，我有一个选项，我在其中创建一个自定义对象和一个文本字段（事件 ID），然后再创建一个用于删除的 Database.Batchable 类他们并将其作为一批 9 或任何其他方法传递，以便我能够在 Database.Batchable 接口中进行 100 多个标注？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:41:19.957

10 是最大值。而且 Google 的日历 API 似乎不支持批量删除。

您可以尝试分块您的批处理作业（传递给每个`execute()`调用的记录列表的大小）。例如这样的：

```
global Database.QueryLocator start(Database.BatchableContext bc){
    return Database.getQueryLocator([SELECT Id FROM Event]); // anything that loops through Events and not say Accounts
}

global void execute(Database.BatchableContext BC, List<Account> scope){
    // your deletes here
}

Database.executeBatch(new MyBatchClass(), 10); // this will make sure to work on 10 events (or less) at a time 
```

另一种选择是阅读有关批次菊花链的信息。在执行中，您最多可以删除 10 个，在`finish()`方法中您再次检查是否还有更多工作要做，并且您可以再次触发批处理。

PS 不要使用硬编码的“10”。使用`Limits.getCallouts()`，`Limits.getLimitCallouts()`因此如果 Salesforce 增加限制，它将自动更新。

* * *

例如，在触发器中，您可以设置 10 个 @future 方法，每个方法都有 10 个标注的新限制......仍然批处理听起来是一个更好的主意。

# c# - C# 进程中的标准输入/输出

> ID：14934599
> 
> 赞同：1
> 
> 时间：2013-02-18T10:54:15.320
> 
> 标签：c#, dll, process, stdout, stdin

我的应用程序`App`正在使用我的其他应用程序`SubApp`。`App`需要时`SubApp`，它正在创建过程`SubApp`，将数据放入`SubApp` `stdin`并从中读取`SubApp` `stdout`。

问题是`SubApp`使用了一些有时会写入`stdout`.

代码片段`SubApp`：

```
OutsideLibrary.DoSomeInitialization();  // <-- this sometimes writes to stdout
Stream input = Console.OpenStandardInput();
Stream output = Console.OpenStandardOutput();
data = (dataFormat)formatter.Deserialize(input);
//do some job
formatter.Serialize(output, result); 
```

有什么办法可以防止我没有的代码写入标准输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:38:19.633

假设您要禁用第三方组件输出并且您可以控制其余的 SubApp 代码，您可以执行以下技巧：在应用程序引导时将标准输出重定向到 null。当您需要向 stdout 写入内容时，将临时设置标准输出恢复正常，再次写入并设置为 null。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace stdio
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.SetOut(System.IO.TextWriter.Null);
            Console.WriteLine("This will go to > null");
            WriteOutput("This is written to standard output");
            Console.WriteLine("This will also go to > null");
            Console.ReadKey();
        }

        static void WriteOutput(String someString)
        {
            Console.SetOut(Console.Out);
            Stream output = Console.OpenStandardOutput();
            StreamWriter sw = new StreamWriter(output);
            sw.Write(someString);
            sw.Flush();
            sw.Close();
            output.Close();
            Console.SetOut(System.IO.TextWriter.Null);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:37:45.280

我试过这个：

```
StreamWriter sw = new StreamWriter(@"c:\nul");
Console.SetOut(sw);
Console.WriteLine("hello!"); 
```

但它会在 new StreamWriter() 中引发异常。

以下可能有效（在您的外部模块激活之前调用它）：

```
StreamWriter sw = new StreamWriter(Stream.Null);
Console.SetOut(sw); 
```

一种解决方法是打开一个真实的文本文件并将其删除。

# python - 未来 6 个月的日期

> ID：14934600
> 
> 赞同：5
> 
> 时间：2013-02-18T10:54:15.423
> 
> 标签：python, django, date, datetime, python-datetime

我在 django 中使用 datetime Python 模块。如果到期日期小于或等于当前日期的 6 个月，我希望计算日期。

我想从当前日期生成 6 个月的日期的原因是设置一个警报，以突出显示该事件发生的字段/列。我不知道我的问题是否清楚。我一直在阅读有关 timedelta 函数的信息，但无法真正理解它。我正在尝试编写一个 if 语句来满足这个条件。任何人都可以帮助我吗？我是 django 和 python 的新手。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T11:06:52.957

有两种方法，一种只是稍微不准确，一种以不同的方式不准确：

*   添加`datetime.timedelta()`365.25 / 2 天（平均年长度除以 2）：

    ```
     import datetime
      sixmonths = datetime.datetime.now() + datetime.timedelta(days=365.25/2) 
    ```

    此方法将为您提供未来 6 个月的日期时间戳，我们将 6 个月定义为正好半年（平均）。

*   使用外部[`dateutil`库](https://dateutil.readthedocs.io/)，它有一个优秀的[`relativedelta`](https://dateutil.readthedocs.io/en/stable/relativedelta.html)类，可以根据日历计算将 6 个月添加到您当前的日期：

    ```
     import datetime
      from dateutil.relativedelat import relativedelta
      sixmonths = datetime.datetime.now() + relativedelta(months=6) 
    ```

    此方法将为您提供未来 6 个月的日期时间戳，其中日期的月份部分已转发 6，并且它会考虑月份边界，确保不要跨越它们。例如，8 月 30 日加 6 个月变为 2 月 28 日或 29 日（闰年允许）。

演示可能会有所帮助。在我的时区，在发布时，这转化为：

```
>>> import datetime
>>> from dateutil.relativedelta import relativedelta
>>> now = datetime.datetime.now()
>>> now
datetime.datetime(2013, 2, 18, 12, 16, 0, 547567)
>>> now + datetime.timedelta(days=365.25/2)
datetime.datetime(2013, 8, 20, 3, 16, 0, 547567)
>>> now + relativedelta(months=6)
datetime.datetime(2013, 8, 18, 12, 16, 0, 547567) 
```

所以这两种方法之间有 1 天和 15 小时的差异。

同样的方法也适用于`datetime.date`对象：

```
>>> today = datetime.date.today()
>>> today
datetime.date(2013, 2, 18)
>>> today + datetime.timedelta(days=365.25/2)
datetime.date(2013, 8, 19)
>>> today + relativedelta(months=6)
datetime.date(2013, 8, 18) 
```

当仅应用于日期时，半年时间增量变得不那么准确（现在忽略增量的第 5/8 天部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:02:15.233

如果“6 个月”是指 180 天，您可以使用：

```
import datetime
d = datetime.date.today()
d + datetime.timedelta(6 * 30) 
```

或者，如果您按日历表示实际 6 个月，则您必须查找[日历模块](http://docs.python.org/2/library/calendar.html)并在每个月进行一些查找。例如：

```
import datetime
import calendar

def add_6_months(a_date):
    month = a_date.month - 1 + 6
    year = a_date.year + month / 12
    month = month % 12 + 1
    day = min(a_date.day,calendar.monthrange(year, month)[1])
    return datetime.date(year, month, day) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:03:06.850

I would give [Delorean](http://delorean.readthedocs.org/en/latest/quickstart.html) a look a serious look. It is built on top of `dateutil` and `pytz` to do what you asked would simply be the following.

```
>>> d =  Delorean()
>>> d
Delorean(datetime=2013-02-21 06:00:21.195025+00:00, timezone=UTC)
>>> d.next_month(6)
Delorean(datetime=2013-08-21 06:00:21.195025+00:00, timezone=UTC) 
```

It takes into account all the dateutil calculations as well as provide and interface for timezone shifts. to get the needed datetime simple `.datetime` on the Delorean object.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-07-20T17:39:59.130

如果您想获得特定的日期，这可能对您有用：

```
from calendar import datetime

datetime.date(2019,1,1).strftime("%a %d")
#The arguments here are: year, month, day and the method is there to return a formated kind of date - in this case - day of the week and day of the month. 
```

结果将是：星期二 01

希望能帮助到你！

# php - 将 XML 数组解析为 php 变量

> ID：14934601
> 
> 赞同：0
> 
> 时间：2013-02-18T10:54:15.813
> 
> 标签：php, mysql, xml, arrays

我有一个在一个站点上自动生成的 XML 提要，我正在尝试将其复制到另一个站点并将数据导入 mysql 数据库，但是，我遇到了困难，因为我不熟悉分解为的数组多个元素。

它的处理方式是否与标准数组的处理方式相同，或者是否每个都必须单独处理？下面包括输出的 XML 示例；

```
[str] => Array
    (
        [0] => 0
        [1] => USD
        [2] => USPS
        [3] => 4228547
        [4] => 486948677
        [5] => 7
        [6] => IndyGen3
        [7] => 1
        [8] => 8 units|8
        [9] => N/A
        [10] => 1
        [11] => Unlimited Refill
        [12] => Unlimited Refill
        [13] => www
        [14] => 1297081
        [15] => unitACTIVE4228547
        [16] => 2
        [17] => 0
        [18] => unit-486948677
        [19] => unit
        [20] => ACTIVE
        [21] => unit
        [22] => 1
        [23] => 1
        [24] => 47d 23h 24m
        [25] => 2013-02-15T19:35:15.153Z
    )

[float] => Array
    (
        [0] => 94.88
        [1] => 94.88
    )

[date] => Array
    (
        [0] => 2013-02-15T19:35:15.438Z
        [1] => 2013-02-15T19:33:14Z
        [2] => 2013-02-15T19:35:02Z
        [3] => 2013-04-04T19:00:00Z
    )

[arr] => Array
    (
        [0] => SimpleXMLElement Object
            (
                [@attributes] => Array
                    (
                        [name] => fm_ship_rules
                    )

                [str] => Array
                    (
                        [0] => 6,3,25.0,,2013-04-02T19:00:00Z
                        [1] => 6,7,11.95,,2013-03-22T19:00:00Z
                        [2] => 6,15,19.95,,2013-04-02T19:00:00Z
                        [3] => 6,16,19.95,,2013-04-02T19:00:00Z
                    )

            )

        [1] => SimpleXMLElement Object
            (
                [@attributes] => Array
                    (
                        [name] => fm_dm_rules_desc
                    )

                [str] => Array
                    (
                        [0] => USPS,USPS Priority, 25.0,,2013-04-02T19:00:00Z
                        [1] => USPS,USPS Two Day,11.95,,2013-03-22T19:00:00Z
                        [2] => USPS,USPS International Priority Puerto Rico,19.95,,2013-04-02T19:00:00Z
                        [3] => USPS,USPS International Priority Canada,19.95,,2013-04-02T19:00:00Z
                    )

            )

    )

[int] => Array
    (
        [0] => 8
        [1] => 8
        [2] => 1
    ) 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:46:55.673

要访问像上面那样的多维数组中的信息，您将使用以下符号。假设您的主数组被称为`$arr`.

```
$sql = "INSERT INTO `mytable`
(
    `currency`,
    `postal_service`,
    `date`,
    `amount_1`,
    `amount_2`
) VALUES (
    '".$arr[str][1]."',
    '".$arr[str][2]."',
    '".$arr[date][0]."',
    '".$arr[float][0]."',
    '".$arr[float][1]."'
)"; 
```

这相当于：

```
$sql = "INSERT INTO `mytable`
(
    `currency`,
    `postal_service`,
    `date`,
    `amount_1`,
    `amount_2`
) VALUES (
    'USD',
    'USPS',
    '2013-02-15T19:35:15.438Z',
    '94.88',
    '94.88'
)"; 
```

# java - Java 套接字连接

> ID：14934602
> 
> 赞同：0
> 
> 时间：2013-02-18T10:54:20.057
> 
> 标签：java, sockets

我有一台连接到我的机器（本地到我的电脑）的目标机器（基于 *nix）。我想在这个目标上执行一些命令。

所以，我正在使用 Java 套接字来实现相同的目的。

```
socket = new Socket("100.200.400.300", 23, null, 0 );
                         remote            local 
```

在这里，在上述行之后 -

```
socket.isConnected() returns true. 
```

现在，我有这个 Socket 对象的 I/O 流，我正在做 -

```
while((string = bufferedReader.readLine()) != null) {
     outputStream.write(string .getBytes());
     outputStream.flush(); } 
```

缓冲读取器从本地文件读取命令并写入套接字对象以在目标机器上执行。下面从 Socket 读取的代码 -

```
while((myIntVar = is.read()) != -1) {
//Below line prints some junk data ... hash, updaward arrow and spaces and then
// loop hangs to raise a Socket I/O exception.
System.out.println((char) i);
stringBuffer.append((char) i);} 
```

在这里，我的理解是，因为我已经建立了套接字连接，所以我可以传递我的命令，这些命令应该在另一端执行（如果错了，请纠正我）。

但这不起作用。正如我上面提到的，我收到了垃圾字符，还有一件事 - 我没有传递用户名和密码来建立套接字连接 - 我是否必须像我们为 telnet 所做的那样传递它（如何... ? 我在这里迷路了）。

而且，仅供参考 - 上面的代码就是我所拥有的（没有在其他各种线程中提到的服务器或客户端代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:03:23.160

Telnet 不像您那样使用原始套接字。Telnet 有特殊的结束线路和结束消息的方式。您需要制定正确的协议来使用，实际上有几种不同的 telnet 实现。使用库可能更容易。

一个简单的解决方法是过滤任何不属于我们想要的正确 ascii 范围的字符。

```
private static String cleanMessage(String in) {
    StringBuilder sb = new StringBuilder();
    for (Character i : in.toCharArray()) {
        int charInt = i.hashCode();
        if (charInt >= 32 && charInt <= 126) {
            sb.append(i);
        }
    }
    return sb.toString();
} 
```

[Apache Commons](http://commons.apache.org/net/)库有一个 Telnet 处理的实现，这里有一个[例子](http://commons.apache.org/net/examples/telnet/TelnetClientExample.java)

# report - 当 Microsoft rdlc 子报告中没有行时，如何创建漂亮的消息？

> ID：14934603
> 
> 赞同：0
> 
> 时间：2013-02-18T10:54:20.557
> 
> 标签：report, reporting, reportviewer, subreport, report-viewer2010

我在网站中使用 ReportViewer 控件，我的报告包含 3 个或更多子报告。子报告中的数据通常不存在，因为它是可选数据。我需要输出一个格式良好且对齐的消息，让读者知道。我有以下代码：

```
 protected void ReportViewer1_SubreportProcessing(object sender, SubreportProcessingEventArgs e)
    {
        DataTable dtReport = GetReportSub(reportId);
        foreach (DataRow drRow in dtReport.Rows)
        {
            if (Replace(drRow["subName"].ToString(), " ", "") == e.ReportPath)
            {
                string sSQLMain = SQLReplacer(drRow["subSQL"].ToString());
                DataTable dtData = BuildCollectionArray(sSQLMain, new OdbcParameter());
                if (dtData.Rows.Count == 0)
                {
                    //TODO: Hide the report and show a friendly message
                }
                else
                {
                    ReportDataSource dataSource = new ReportDataSource("DS" + Replace(drRow["subName"].ToString(), " ", ""), dtData);
                    e.DataSources.Add(dataSource);
                }
                break;
            }
        }
    } 
```

它将获取数据并将其添加到需要它的报告中。但是，如果没有数据，则唯一的选择是 NoRowsMessage 属性。但是，每个子报表的主报表中的 NoRowsMessage 属性过于受限。

理想情况下，我希望每个子报告都使用 exporession 或代码来处理 no rows 消息本身。然而，微软工作方式的缺陷似乎是该报告以有数据显示为条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:36:28.863

所以我找到了一个可行的解决方案来解决我的问题。我忽略了默认的无行功能，而是在子报告中进行工作。

我有一个包含我的详细信息的 Tablix，然后我将创建一个带有我的无行消息的额外文本框。根据 DataSet 隐藏 no rows 消息，例如：

```
=iif(Sum(Fields!ActID.Value, "DSSub") > 0, true, false) 
```

# javascript - 不安全的 JavaScript 尝试使用框架访问

> ID：14934605
> 
> 赞同：2
> 
> 时间：2013-02-18T10:54:26.293
> 
> 标签：javascript, iframe, spring-security, security

当我使用 iframe 并尝试将不同的 URL（相同域）访问到 iframe 时，出现错误 - 不安全的 JavaScript 尝试访问框架

错误 - 不安全的 JavaScript 尝试从具有 URL http://www.example.com/Organizations/Dashboard.aspx 的框架访问具有 URL [http://www.example.com/1ad6af14-b2a5-4516-9a0a-ed1bfa3b7239.aspx](http://www.example.com/Organizations/Dashboard.aspx?pagelink=hr)[的](http://www.example.com/1ad6af14-b2a5-4516-9a0a-ed1bfa3b7239.aspx)框架[?pagelink=hr](http://www.example.com/Organizations/Dashboard.aspx?pagelink=hr)。域、协议和端口必须匹配。

但我认为这不是跨域脚本问题，因为我使用的是同一个域。我不确定如何解决这些问题，有人愿意就可能出现的问题提供任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:49:36.843

这已在这里得到回答：

[不安全的 JavaScript 尝试使用 URL 访问框架](https://stackoverflow.com/questions/4324108/unsafe-javascript-attempt-to-access-frame-with-url)

有任何问题，请告诉我。

谢谢法比奥@fcerullo

# ember.js - 为什么@each 使模板重新呈现？

> ID：14934608
> 
> 赞同：2
> 
> 时间：2013-02-18T10:54:32.060
> 
> 标签：ember.js

```
Ember.VERSION : 1.0.0-rc.1
Handlebars.VERSION : 1.0.0-rc.3
jQuery.VERSION : 1.8.2 
```

这是我模型的一部分：

```
first_three: function() {
    var staples = this.get('staples');
    var data = staples.slice(0,3));
    return data;
    }.property('staples.@each.isLoaded') 
```

我在模板中使用它：

```
{{#each staple in album.first_three}}
    {{#linkTo staples.details staple}}
        <img {{bindAttr src="staple.object.image_pict"}}>
    {{/linkTo}}
{{/each}} 
```

结果，我得到了

```
NS_ERROR_DOM_NOT_OBJECT_ERR: Parameter is not an object 
```

和

```
Error: Something you did caused a view to re-render after it rendered but before it was inserted into the DOM. 
```

为什么？我究竟做错了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:56:45.420

NS_ERROR_DOM_NOT_OBJECT_ERR 是一个 jQuery 问题。Ember 在视图中依赖于 jQuery。我有一个类似的问题，我的每个循环都在构建不存在的 HTML 标签（即我忘记在标签上添加“>”）。您的循环是否完全退出了任何迭代？那将是一个很好的起点。

# c# - C#检查两台计算机是否在受信任域中（或：决定winrm连接的身份验证机制）

> ID：14934615
> 
> 赞同：0
> 
> 时间：2013-02-18T10:54:54.003
> 
> 标签：c#, authentication, kerberos, winrm, negotiate

我想通过 winrm 连接到其他计算机。我只得到了我想连接的目标计算机的 FQDN。我不知道目的地是否在受信任的域中。所以基本问题是我现在如何连接需要哪种身份验证机制？是否有任何 C# .NET 方法来检查？

或者是将身份验证机制设置为 kerberos 的更简单方法，如果失败则将其设置为协商？

```
WSManConnectionInfo wci = new WSManConnectionInfo(TargetUri, ShellUri.ToString(), Credential);
wci.AuthenticationMechanism = AuthenticationMechanism.Kerberos; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:02:05.377

有解决办法

[http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/0a5cb5a4-317c-4fcd-9221-85884af1217f](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/0a5cb5a4-317c-4fcd-9221-85884af1217f)

```
//Trusts for current domain
Domain currentDomain = Domain.GetCurrentDomain();
var domainTrusts = currentDomain.GetAllTrustRelationships(); 
```

# android - 更改 AlertDialog 的背景？

> ID：14934616
> 
> 赞同：1
> 
> 时间：2013-02-18T10:54:57.523
> 
> 标签：android, android-alertdialog

我们可以更改每个`TextView`或`Button`其中的属性`AlertDialog`。例如[here](https://stackoverflow.com/a/13063444/1043882)您可以看到更改TextView属性的方法，或者[here](https://stackoverflow.com/a/8077918/1043882) for Button。**但是我的问题是关于更改 AlertDialog 根视图的属性。**它可以用 来完成`findViewById()`，但它需要根视图的 ID，我不知道它或者它可能以另一种方式完成。你知道我该怎么做吗?

注意：我的问题**不**在于创建`custom AlertDialog`.

# php - 如何更改 html 按钮类和功能？

> ID：14934619
> 
> 赞同：0
> 
> 时间：2013-02-18T10:55:00.250
> 
> 标签：php, jquery, ajax, html

我想要的只是**更改按钮类和值**以更改按钮**功能**。

发生的事情是值和类已**成功更改**，但**功能与旧类相同，** 为什么？！

浏览器是否将 jquery 代码存储在某处并从中加载？！在这种情况下我该如何刷新它？

这是我的一段代码：（ *我正在使用带有 html 和 php 的 Jquery Ajax）*

```
 var target_button; // global variable to store the target button

    $(".activateButton").click(function(){

        var serial_number = $(target_button).attr("id");
        var cvc = $("#cvc").val();

        $.ajax({
            type: "GET",
            url: '../ajax/tag.php',
            data:
            {
                s: serial_number,
                c: cvc
            }
        }).done(function(data)
            {
                var result = jQuery.parseJSON(data);
                if (result == "1")
                {
                    $("#message").text('Tag Successfully Activated');
                    $("#overlay_form").fadeOut(500);
                    $(target_button).attr("value", "Disable");
                    $(target_button).removeClass("popActivateButton");    //<---------- REPLACING THE CLASS
                    $(target_button).addClass("enableDisableButton");     //<----------

                } 
```

这是按钮：

```
 if($tags[$i]['Status'] == 1){
        $button = "<input type=\"button\" class=\"enableDisableButton\" id=\"".$tags[$i]['SerialNumber']."\" value=\"Disable\"/>";
    }
    if($tags[$i]['Status'] == 2){
        $button = "<input type=\"button\" class=\"popActivateButton\" id=\"".$tags[$i]['SerialNumber']."\" value=\"Activate\"/>";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:01:48.020

当您使用选择器时，它会选择在您执行代码时匹配的所有元素。以前称为选择器 - 即使已缓存 -在将匹配它们的新元素添加到页面时**不会动态更新。**

如果您已将事件处理程序绑定到元素，那么它们将一直留在那里，直到您 a. 删除事件处理程序，或 b。完全删除元素。仅更改类不会神奇地更改绑定的事件处理程序。

我建议改用事件委托：

```
$(document).on('click', '.enableDisableButton', function() {
    //your code for enableDisableButton
}).on('click', '.popActivateButton', function() {
    // your code for popActivateButton
}); 
```

使用事件委托，选择器在事件触发时检查，而不是在代码执行时检查，因此它将**反映**对页面的更改。

请注意，我`document`在上面的代码示例中使用过。但是，您应该为静态元素（不会被删除的元素）使用选择器，该选择器将包含您要为其执行事件处理函数的元素；它在 DOM 结构中越接近动态元素越好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:05:44.033

是的，一旦分配了事件，您需要清除那些以前的事件并将新事件绑定到每个事件。

假设您有`button`并且您现在已经分配`click`了事件，不幸的是您想要清除`click event`以及您可以按照以下方式执行的其他操作，

```
$(SOMESELECTOR).unbind('previous_event').bind('new_event');
```

.

更多搜索`jQuery bind and unBind`。

# ios - 如何选择正确的应用内类型？

> ID：14934637
> 
> 赞同：1
> 
> 时间：2013-02-18T10:56:17.273
> 
> 标签：ios, in-app-purchase, appstore-approval, subscription

我已经阅读了所有应用内文档，并且厌倦了与应用审查委员会的斗争，这就是为什么我要征求你的意见。

请帮助我为我的应用选择正确的应用内购买类型，并升级我的应用以使用订阅应用内模型（也可以使用非续订订阅）。

这个应用程序有一个娱乐文字和照片内容，每天动态更新两次。

我有一个免费版本，它有：

1.  广告
2.  限制（新消息数量有限）
3.  没有照片

和高级帐户：

1.  无广告
2.  没有限制
3.  照片内容

我想像订阅一样出售此内容（您可以购买一段时间的高级帐户），而且我有一个机制，允许在您拥有的每台设备上使用高级帐户，您可以轻松恢复购买，但应用审查委员会写道：

> 应用审查委员会评估了您的应用，并确定原始拒绝反馈是有效的。您的应用不符合：
> 
> 11.15
> 
> 您的一个或多个应用内购买产品的可购买性类型设置不当。
> 
> 您的应用内购买目前被标记为自动续订订阅。但是，使用非消耗性应用内购买类型会更合适，因为该产品用于解锁应用程序的功能。非消耗性产品仅由用户购买一次，并且始终在与该用户的 iTunes 帐户关联的所有设备上可用。

我应该如何更改我的应用程序以将我的内容作为订阅销售？

# android - android.support.v4.app.getFragmentManager() 返回 null？

> ID：14934640
> 
> 赞同：31
> 
> 时间：2013-02-18T10:56:35.133
> 
> 标签：android, android-fragments, android-support-library

这是我的堆栈跟踪：

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at com.example.test.fragments.LoadingFragment$1.run(LoadingFragment.java:66)
at android.os.Handler.handleCallback(Handler.java:725)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5041)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method) 
```

我的片段的第 66 行：

```
FragmentTransaction ft = fm.beginTransaction(); 
```

fm 是这样的：

```
android.support.v4.app.FragmentManager fm = getFragmentManager(); 
```

我的 Fragment extends `android.support.v4.app.Fragment`，这些是我的导入：

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView; 
```

我从未见过我为 FragmentManager 获得了 null 有人有想法吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-02-18T10:59:52.267

将此替换为此`getFragmentManager()`，`getSupportFragmentManager()`并确保您的活动扩展`FragmentActivity`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-24T18:44:37.470

从`android.support.v4.app.Fragment`来源：

```
// The fragment manager we are associated with.  Set as soon as the
// fragment is used in a transaction; cleared after it has been removed
// from all transactions.
FragmentManagerImpl mFragmentManager; 
```

显然`getFragmentManager()`返回片段管理器的支持版本，但仅在事务期间（或父片段的子片段管理器）。

我将使用这个：

```
public FragmentManager getHostFragmentManager() {
    FragmentManager fm = getFragmentManager();
    if (fm == null && isAdded()) {
        fm = ((AppCompatActivity)getActivity()).getSupportFragmentManager();
    }
    return fm;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-24T06:12:15.993

案例：当您需要从另一个片段（父片段）调用片段（子片段）时

始终使用`getChildFragmentManager()`而不是`getFragmentManager()`在您的父片段内。

* * *

## 回答 #4

> 赞同：-9
> 
> 时间：2013-02-18T11:21:14.120

在清理和重建我的项目以及重新启动我的测试设备之后，这又以某种方式再次起作用。

# javascript - Android浏览器输入类型号

> ID：14934641
> 
> 赞同：1
> 
> 时间：2013-02-18T10:56:37.447
> 
> 标签：javascript, android, html, android-browser

Android 浏览器 (4.03) 中针对以下标记的问题。

```
<html> 
<body> 
Androind 4.03 Browser test page<br />
Type .9 in the input field below and click/tap button below.<br />
Browser validation is clearing contents in input field.<br /></br/>

<input type="number" pattern="[0-9\.]*" step="0.1" min="0.0"></input> <br /><br /><br />

<input type="button" value="Validate" />

</body>
</html> 
```

我希望数字键盘在焦点上，它适用于 iphone 和 android 2.x 浏览器。但是，当我输入小于 1 的小数（如 .9 或 .1）时，它会验证 onblur 并清除输入字段。

我希望输入接受任何数字和小数...

[在此处运行代码示例](http://johnchacko.net/samples/android_number.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T23:10:55.797

旧帖子，但我也遇到过这个问题。

我为解决它所做的工作是捕捉'。在 keydown 上（keyup 在 android 上运行良好，但在 IOS 上导致问题），并在 . 被申请;被应用。然而，我注意到，至少在 android 浏览器上，这会干扰之后完全擦除数字的能力（如果你要退格），所以我也必须抓住它。

```
// within a keydown handler for the input, 
// where "this" is the input, and "e" is the event

// make it 0 before the . gets applied
if((e.keyCode == 190 || e.keyCode = 46)
    && (!this.value || this.value == '.'))
{
    this.value = 0;
    return;
}

// ...but that screws up the cursor position on
// some browsers, so handle the backspace 
if(e.keyCode == 8 && this.value == '0.')
{
    this.value = '';
    return;
} 
```

感觉很hacky，但似乎工作。

# android - 获取 Twitter 关注者列表

> ID：14934644
> 
> 赞同：3
> 
> 时间：2013-02-18T10:56:44.910
> 
> 标签：android, twitter, twitter4j

我正在开发一个 Android 应用程序来获取 Twitter 关注者。以下代码用于身份验证，我已成功登录。

```
consumer = new CommonsHttpOAuthConsumer(
                        key,
                        secret);
                CommonsHttpOAuthProvider provider = new CommonsHttpOAuthProvider(
                        "http://twitter.com/oauth/request_token",
                        "http://twitter.com/oauth/access_token",
                        "http://twitter.com/oauth/authorize");

                String authUrl = provider.retrieveRequestToken(consumer,
                        TWITTER_CALLBACK_URL);
                Log.e("Twittwer ", "Please authorize this app!");

                startActivity(new Intent(Intent.ACTION_VIEW,
                        Uri.parse(authUrl))); 
```

为了获取关注者列表，我使用了下面的代码，但出现错误并附加了 logcat

```
AccessToken accessToken = new AccessToken(consumer.getToken(),
                    consumer.getTokenSecret());
            ConfigurationBuilder builder = new ConfigurationBuilder();
            builder.setOAuthConsumerKey(key);
            builder.setOAuthConsumerSecret(secret);
            Configuration conf = builder.build();
            twitter = new TwitterFactory(conf).getInstance();
            twitter.setOAuthAccessToken(accessToken);
            IDs followersId = twitter.getFollowersIDs(twitter.getId());
            do {
                for (long i : followersId.getIDs()) {

                    System.out.println("follower ID #" + i);
                    System.out.println(twitter.showUser(i).getName());
                    System.out.println(twitter.showUser(i)
                            .getProfileImageURL());
                    System.out.println(twitter.showUser(i).getURL());

                }
            } while (followersId.hasNext());
        } catch (TwitterException e) {
            System.out.println("e........"+e.getMessage());
            e.printStackTrace();

        } 
```

日志猫：

```
02-18 16:13:10.632: W/System.err(734): Received authentication challenge is null 02-18 16:13:10.682: W/System.err(734): Relevant discussions can be found on the Internet at: 02-18 16:13:10.682: W/System.err(734):    http://www.google.co.jp/search?q=a1259409 or 02-18 16:13:10.702: W/System.err(734):     http://www.google.co.jp/search?q=06b97274 02-18 16:13:10.712: W/System.err(734): TwitterException{exceptionCode=[a1259409-06b97274 2e9324ac-d074d7d2], statusCode=-1, message=null, code=-1, retryAfter=-1, rateLimitStatus=null, version=3.0.3} 02-18 16:13:10.752: W/System.err(734):     at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:192) 02-18 16:13:10.903: W/System.err(734):   at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:61) 02-18 16:13:11.012: W/System.err(734):  at twitter4j.internal.http.HttpClientWrapper.get(HttpClientWrapper.java:89) 02-18 16:13:11.062: W/System.err(734):  at twitter4j.TwitterBaseImpl.fillInIDAndScreenName(TwitterBaseImpl.java:126) 02-18 16:13:11.123: W/System.err(734):     at twitter4j.TwitterBaseImpl.getId(TwitterBaseImpl.java:118) 02-18 16:13:11.142: W/System.err(734):     at com.nest.twitterfriendsfinder.MainActivity$getFollowers.doInBackground(MainActivity.java:276) 02-18 16:13:11.152: W/System.err(734):     at com.nest.twitterfriendsfinder.MainActivity$getFollowers.doInBackground(MainActivity.java:1) 02-18 16:13:11.192: W/System.err(734):   at android.os.AsyncTask$2.call(AsyncTask.java:264) 02-18 16:13:11.212: W/System.err(734):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 02-18 16:13:11.232: W/System.err(734):    at java.util.concurrent.FutureTask.run(FutureTask.java:137) 02-18 16:13:11.302: W/System.err(734):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208) 02-18 16:13:11.362: W/System.err(734):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076) 02-18 16:13:11.362: W/System.err(734):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) 02-18 16:13:11.362: W/System.err(734):   at java.lang.Thread.run(Thread.java:856) 02-18 16:13:11.362: W/System.err(734): Caused by: java.io.IOException: Received authentication challenge is null 02-18 16:13:11.372: W/System.err(734):    at libcore.net.http.HttpURLConnectionImpl.processAuthHeader(HttpURLConnectionImpl.java:397) 02-18 16:13:11.372: W/System.err(734):  at libcore.net.http.HttpURLConnectionImpl.processResponseHeaders(HttpURLConnectionImpl.java:345) 02-18 16:13:11.372: W/System.err(734):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:276) 02-18 16:13:11.372: W/System.err(734):    at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:479) 02-18 16:13:11.372: W/System.err(734):    at twitter4j.internal.http.HttpResponseImpl.<init>(HttpResponseImpl.java:34) 02-18 16:13:11.382: W/System.err(734):     at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:156) 
```

这段代码有什么问题。我在一些帖子中读到检查模拟器中的时间戳。但是模拟器中的时间和日期是正确的。请给我一些帮助。提前谢谢..

[编辑] 我 [这](https://stackoverflow.com/a/13042325/1767260)对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T12:07:11.933

在我的项目中，我有这个代码来获取关注者。也许重点与使用`AsyncTask`.

```
 if (twitter == null){
        ConfigurationBuilder builder = new ConfigurationBuilder();
        Configuration conf = builder
        .setOAuthConsumerKey(CONSUMER_KEY)
        .setOAuthConsumerSecret(CONSUMER_SECRET)
        .setOAuthAccessToken(oAuthAccessToken)
        .setOAuthAccessTokenSecret(oAuthAccessTokenSecret)
        .build();
        twitter = new TwitterFactory(conf).getInstance();
    }

    new AsyncTask<Void, Void, Void>() {
        @Override
        protected Void doInBackground(Void... params) {
            long lCursor = -1;
            AccessToken accessToken = new AccessToken(oAuthAccessToken, oAuthAccessTokenSecret);
            long userId = accessToken.getUserId();
            try {
                IDs followersIDs = twitter.getFollowersIDs(userId, lCursor);
                do {
                    for (long i : friendsIDs.getIDs()){
                        Log.d("follower ID #", String.valueOf(i));
                    }
                }while(followersIDs.hasNext());
            } catch (TwitterException e) {
                Log.i("fetchFollowers", e.getErrorMessage());
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void param) {
        }

    }.execute(); 
```

# asp.net - 从数据集中填充数据时报告数据不显示

> ID：14934650
> 
> 赞同：1
> 
> 时间：2013-02-18T10:57:00.503
> 
> 标签：asp.net, telerik

[CrossPost] 我正在尝试将数据从 C# 传递到 Telerik Report。最初，我创建了一个 Web 项目，并将 Telerik Report 添加到项目中。我按照教程创建报告并将数据集分配给报告。在这里，我将设计一份报告。我需要通过数据表分配要报告的数据，该数据表需要填充到我们需要映射列的报告中。在页面加载时，我正在尝试这样做，

在我的页面加载中，我由代码编写为

报告 2 objReport2 = 新报告 2(); objReport2.DataSource = GetAllData(); ReportViewer1.ReportSource = objReport2; ReportViewer1.DataBind(); ReportViewer1.RefreshReport();

从上面的代码中，我看到了没有数据的空白报告。在 Desinger 中我创建了一个表，但我未能创建报表和数据集列之间的映射？我可以知道我该怎么做吗？或者任何人都可以建议我解决这个问题的方案吗？

# excel - 在excel中找出最后一行的问题

> ID：14934653
> 
> 赞同：1
> 
> 时间：2013-02-18T10:57:13.147
> 
> 标签：excel, vbscript

我正在尝试此代码以找出最后一行-

`msgbox objExcel.ActiveWorkbook.Sheets(1).Range("A" & Rows.Count).EndXL(up).Row`

但我不断收到这个错误-

`Object required: Rows`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:40:38.507

尝试

```
objExcel.ActiveWorkbook.Sheets(1).Range("A" & Rows.Count).End(xlUp).Row 
```

只是你的 End(xlUp) 部分是错误的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:25:28.987

这是你正在尝试的吗？

```
Dim oXLApp, wb, ws

'~~> Define xlUp
Const xlUp = -4162

Set oXLApp = CreateObject("Excel.Application")

oXLApp.Visible = True

'~~> Open file. Chnage path as applicable
Set wb = oXLApp.Workbooks.Open("C:\Sample.xlsx")
Set ws = wb.Worksheets(1)

With ws
      MsgBox .Range("A" & .Rows.Count).End(xlUp).Row
End With 
```

还要注意使用`Worksheets`而不是`Sheets`查看此[链接](https://stackoverflow.com/questions/14929344/exporting-some-sheets-from-excel-workbook-to-pdf/14929890#14929890)以获取解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-06T19:42:06.853

这可能有效：

```
dim last as integer
ActiveCell.SpecialCells(xlLastCell).Select
last = ActiveCell.SpecialCells(xlLastCell).Row 
```

# sql - 如何从不同的表中按两个相同的属性排序？

> ID：14934654
> 
> 赞同：0
> 
> 时间：2013-02-18T10:57:13.310
> 
> 标签：sql, oracle

我有这个数据库。对于初学者，我没有创建这个数据库，我不能改变结构，所以我必须处理它。

```
+------+  +--------+  +--------+
| FORM |  | FORM_A |  | FORM_B |
+------+  +--------+  +--------+
| id   |  | form_id|  | form_id|
          | name   |  | name   | 
```

我不是 Oracle 用户，我需要获取将获取 FORM_A 数据和 FORM_B 的所有 FORM，但我需要从两个表中按名称对其进行排序。"name" 是来自 FORM_A 和 FORM_B 的同一种数据，可惜不在 FORM 中。

```
Exemple :
FORM_A = [a, b, d, f]
FORM_B = [e, c, g]
FORM datas must be ordered as FORM_A(a), FORM_A(b), FORM_B(c), FORM_A(d), FORM_B(e)... 
```

起初我想我必须用一些循环手动订购它，但我想知道是否有办法从多个表一起订购，而不是一个接一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:01:19.570

我假设以下表格内容：

```
 FORM               FORM_A              FORM_B
 +----+--------+  +------+---------+  +------+---------+
 | ID | NAME   |  | NAME | FORM_ID |  | NAME | FORM_ID |
 +----+--------+  |+-----+---------+  |+-----+---------+
 |  1 | First  |  | a    |       1 |  | e    |       3 |
 |  2 | Second |  | b    |       2 |  | c    |       4 |
 |  3 | Third  |  | d    |       2 |  | g    |       5 |
 |  4 | Fourth |  | f    |       3 |  +------+---------+
 |  5 | Fifth  |  +------+---------+
 +----+--------+ 
```

您可以使用`UNION`从两个表中进行选择，前提是这两个表具有相同的列结构：

```
SELECT FORM_A.form_id, FORM_A.name
FROM FORM_A 
UNION ALL 
SELECT FORM_B.form_id, FORM_B.name 
FROM FORM_B
ORDER BY name;

   FORM_ID NAME
---------- -----
         1 a
         2 b
         4 c
         2 d
         3 e
         3 f
         5 g 
```

通过将`FORM_ID`与`FORM`表连接起来，您可以从中获取相应的行`FORM`：

```
SELECT ab.Name AS AB, f.Name AS DATA
FROM (SELECT FORM_A.form_id, FORM_A.name
      FROM FORM_A
      UNION ALL
      SELECT FORM_B.form_id , FORM_B.name
      FROM FORM_B
      ORDER BY name) ab
      JOIN FORM f ON f.id=ab.FORM_ID;

AB    DATA
----- ----------
a     First
b     Second
c     Fourth
d     Second
e     Third
f     Third
g     Fifth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:02:02.263

你可以

```
select * 
      from ( select id, null as name from form union all
             select id, name from formA union all
             select id, name from formB 
            ) temp
      order by temp.name 
```

# asp.net - 在 Windows 7 64 位上安装 SQL Server 2008

> ID：14934657
> 
> 赞同：0
> 
> 时间：2013-02-18T10:57:22.747
> 
> 标签：asp.net, sql-server-2008

我真的很困惑。我想下载 SQL Server 2008。我有 Windows 7、64 位。

首先我只下载了 Management Studio ( `SQLManagementStudio_x64_ENU.exe`, 176.5 MB)。我已经安装了。但是没有实例。

后来我意识到要下载 SQL Server Express ( `SQLEXPR_x64_ENU.exe`82.5 MB)。

我访问过这个页面（[http://www.microsoft.com/en-in/download/details.aspx?id=26729](http://www.microsoft.com/en-in/download/details.aspx?id=26729)）

现在我知道了带有 Service Pack 1 的 Microsoft SQL Server 2008 R2 Express。如果我需要工具和实例，我必须下载`SQLEXPRWT_x64_ENU.exe`(329.9 MB)。

它适用于 Windows 7 吗？有人安装这个吗？Microsoft® SQL Server® 2008 R2 SP2 - Express 是什么？

我必须下载 Microsoft® SQL Server® 2008 R2 SP1 或 Microsoft® SQL Server® 2008 R2 SP2。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:07:34.897

我认为您真正想要的是`SQL Server 2008 R2 SP2 with Advanced Services`，其中包括 SQL Server Management Studio SSMS；

[http://www.microsoft.com/en-gb/download/details.aspx?id=30438](http://www.microsoft.com/en-gb/download/details.aspx?id=30438)

选择`SQLEXPRADV_x64_ENU.exe`

这在 Win 7 64 位上运行得很好（这是我在输入这个时正在运行的）

# asp.net-mvc - MVC 路由 - 我想在 URL 中有多个没有控制器的 {action}/{id} 路由

> ID：14934659
> 
> 赞同：1
> 
> 时间：2013-02-18T10:57:26.253
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我已经设法让我的 Home 控制器工作，只使用操作名称来访问它，但是一旦我添加另一个控制器并尝试通过在我的 Home 路由声明中添加另一个相同的路由声明来做同样的事情，所有路由默认为 Home 控制器。

```
routes.MapRoute("HomeTest", "{action}/{id}", new { controller = "Home", action = "TestHome", id = UrlParameter.Optional });
routes.MapRoute("TestTest", "{action}/{id}", new { controller = "Test", action = "Test", id = UrlParameter.Optional });

public class HomeController : Controller
{
    public ActionResult TestHome(int? id)
    {
        return View();
    }
}

public class TestController : Controller
{
    public ActionResult Test(int? id)
    {
        return View();
    }
} 
```

有什么方法可以访问两个控制器而不在 url 中包含控制器名称？

如果这有什么不同，我还包括默认路线。就在这两条路线下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T12:12:04.703

MVC 中的路由按照添加的顺序进行比较。对于您的代码示例，这意味着所有请求都将首先与“HomeTest”路由进行比较，因此任何匹配项都将遵循该路由。“TestTest”路由具有完全相同的格式，这意味着它永远不会被使用，因为任何匹配都已经使用了“HomeTest”路由。如果您想在不使用控制器名称的情况下获得控制器的操作，则路由中必须有一些东西来告诉它使用哪个控制器。这不一定是实际的控制器名称 - 您可以这样做：

```
routes.MapRoute("TestTest", "keyWord/{action}/{id}", new { controller = "Test", action = "Test", id = UrlParameter.Optional });
routes.MapRoute("UsersTest", "otherKeyWord/{action}/{id}", new { controller = "Users", action = "Test", id = UrlParameter.Optional }); 
```

其中关键字基本上充当别名来隐藏您的控制器名称。您甚至可以更进一步并屏蔽您的操作名称，这可以让您在一个 URL 根目录下使用多个控制器：

```
routes.MapRoute("TestTest", "test/key1/{id}", new { controller = "Test", action = "Test", id = UrlParameter.Optional });
routes.MapRoute("UsersTest", "test/key2/{id}", new { controller = "Users", action = "Test", id = UrlParameter.Optional }); 
```

做这样的事情可以让你给你的用户一个更整洁的 URL 结构，帮助他们浏览你的网站并了解链接将把他们带到哪里（可能也方便书签），但这确实意味着你必须手动定义你的 URL，这更工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:42:34.630

通过您定义 url 模式的方式，路由引擎将始终将所有匹配模式 {action}/{id} 的操作重定向到 Home 控制器。

你在找什么可能是这样的：

```
routes.MapRoute("HomeTest", "testhome/{id}", new { controller = "Home", action = "TestHome", id = UrlParameter.Optional });
routes.MapRoute("TestTest", "test/{id}", new { controller = "Test", action = "Test", id = UrlParameter.Optional }); 
```

# php - json_decode/多维数组后访问JSON数组

> ID：14934660
> 
> 赞同：4
> 
> 时间：2013-02-18T10:57:26.953
> 
> 标签：php, arrays, json, twitter

我正在从 Twitter api 中进行搜索，使用 file_get_contents 获取数据，然后传递给 json_decode，这给了我这个数组结构。

```
{"results":[
     {
     "from_user":"A-user-name",
     "from_user_id":457304735,
     "text":"Ich R U #BoysNoize #SuperRola",

          "entities":{

                 "urls":[{
                        "url":"http:\/\/t.co\/WZnUf68j",
                        "expanded_url":"http:\/\/instagr.am\/p\/Vz4Nnbnjd6\/",
                        }]

     }]
] 
```

每次拉出的推文都会重复这个过程，现在我可以使用 foreach 循环访问用户名和文本，并将结果的每个实例分配给一个变量，然后从变量中提取数据。

```
foreach($jsonArr['results'] as $item){    

// Takes the Array jsonArr and for every results heading creates an $item

    $user = mysql_real_escape_string($item['from_user']);
    $text = mysql_real_escape_string($item['text']); 
```

这可以保存正确的变量，但是我似乎无法在结果中获取实体数组中的数据。如果我打印出像我得到的用户名或文本这样的实体变量

```
ArrayArrayArrayArrayArrayArrayArrayArrayArrayArray 
```

所以它保存了返回的每个结果的数组，但是我到底如何访问它，我一直在搞乱我知道的其他一些访问数组数据的方法，但它们似乎都失败了。任何有关如何获得这些值或将它们与 foreach 集成的帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:10:25.230

假设您选择将 JSON 解码为多维数组，而不是对象：

```
foreach ($results as $tweet) {
    $user = $tweet["from-user"];
    $text = $tweet["text"];

    $entities = $tweet["enities"];
    $urls = $entities["urls"];

    foreach ($urls as $url) {
        echo $url["expanded_url"];
    }
} 
```

等等

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T11:27:46.830

```
Array
(
    [results] => Array
        (
            [0] => stdClass Object
                (
                    [entities] => Array
                        (
                            [0] => stdClass Object
                                (
                                    [urls] => Array
                                        (
                                            [0] => stdClass Object
                                                (
                                                    [expanded_url] => http://instagr.am/p/Vz4Nnbnjd6/
                                                    [url] => http://t.co/WZnUf68j
                                                )

                                        )

                                )

                        )

                    [from_user] => A-user-name
                    [from_user_id] => 457304735
                    [text] => Ich R U #BoysNoize #SuperRola
                )

        )

) 
```

访问网址：

```
$json_array['results'][0]->entities[0]->urls[0]->url; 
```

有用的代码：

```
<?php

$json ='{ "results" : [ { "entities" : 
[ { "urls" : [ { "expanded_url" : "http://instagr.am/p/Vz4Nnbnjd6/",
                    "url" : "http://t.co/WZnUf68j"
                  } ] } ],
        "from_user" : "A-user-name",
        "from_user_id" : 457304735,
        "text" : "Ich R U #BoysNoize #SuperRola"
      } ] }';
$json_array = (array)(json_decode($json));
echo '<pre>';
 //print_r($json_array);

 echo $json_array['results'][0]->entities[0]->urls[0]->url; 
```

?>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:30:51.290

只需做一个`print_r($jsonArr);`，您就可以使用解码的 json。

# objective-c - 如何在Objective C中检查变量是否为“void”类型？

> ID：14934662
> 
> 赞同：0
> 
> 时间：2013-02-18T10:57:32.077
> 
> 标签：objective-c, variables, types, void

情况就是这样。我忘记在方法末尾返回 nil 并在以下代码中导致错误的访问错误。

```
- (NSString*) testWithRet{
    NSString* ret = @"js";
    //return ret;
} 
```

...

```
NSString* var = [obj testWithRet];
//can I check here to prevent the bad access below?
NSLog(@"%@", var); // bad access here 
```

我的问题是，我可以在错误访问发生之前进行任何检查吗？

我试图对照 nil 和 NULL 检查“var”但失败了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:59:36.847

不，你不能做任何这样的检查：让一个返回值的函数没有结束`return`是*未定义的行为*，在这种情况下，“返回”的值是未定义的。

你需要注意 Xcode 中的警告，并修复它们。在这种特殊情况下，您应该收到一条消息，说明

> 控制到达非空函数的结尾

在非 void 函数的右花括号的行上。这应该是您向`return`代码添加缺失的信号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T11:01:05.140

看一下这个：

```
NSString* var = [obj testWithRet];
//can I check here to prevent the bad access below?
if([var isKindOfClass:[NSString class]]) {
    NSLog(@"%@", var); // bad access here
} 
```

# jsf-2 - 如何为 HtmlCommandLink#setActionExpression() 创建动作

> ID：14934664
> 
> 赞同：3
> 
> 时间：2013-02-18T10:57:38.320
> 
> 标签：jsf-2

我正在尝试以编程方式添加命令链接，但我无法添加操作。

```
HtmlCommandLink link = new HtmlCommandLink();
link.setValue(data);
link.setActionExpression(no idea); 
```

我如何创建它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:15:47.320

使用[`ExpressionFactory#createMethodExpression()`](http://docs.oracle.com/javaee/6/api/javax/el/ExpressionFactory.html#createMethodExpression%28javax.el.ELContext,%20java.lang.String,%20java.lang.Class,%20java.lang.Class%5B%5D%29).

这是一个方便的方法：

```
private static MethodExpression createMethodExpression(String expression, Class<?> returnType) {
    FacesContext context = FacesContext.getCurrentInstance();
    return context.getApplication().getExpressionFactory().createMethodExpression(
        context.getELContext(), expression, returnType, new Class[0]);
} 
```

`public String doSomething() {}`如果您在由 标识的托管 bean 中有一个操作，那么您可以使用它的方法如下`#{bean}`：

```
link.setActionExpression(createMethodExpression("#{bean.doSomething}", String.class)); 
```

# php - codeigniter 中的无限滚动 jquery 插件

> ID：14934667
> 
> 赞同：0
> 
> 时间：2013-02-18T10:57:58.070
> 
> 标签：php, codeigniter, infinite-scroll, jquery-infinite-scroll

我在配置文件夹中有一个 pagination.php 文件。代码如下

```
$config['num_links'] = 5;
$config['use_page_numbers'] = TRUE;
$config['query_string_segment'] = 'page';

$config['full_tag_open'] = '<div class="pagination"><ul>';
$config['full_tag_close'] = '</ul></div>';

$config['first_link'] = '&laquo; First';
$config['first_tag_open'] = '<li class="prev page">';
$config['first_tag_close'] = '</li>';

$config['last_link'] = 'Last &raquo;';
$config['last_tag_open'] = '<li class="next page">';
$config['last_tag_close'] = '</li>';

$config['next_link'] = 'Next &rarr;';
$config['next_tag_open'] = '<li class="next page">';
$config['next_tag_close'] = '</li>';

$config['prev_link'] = '&larr; Previous';
$config['prev_tag_open'] = '<li class="prev page">';
$config['prev_tag_close'] = '</li>';

$config['cur_tag_open'] = '<li class="active"><a class="navigation" href="">';
$config['cur_tag_close'] = '</a></li>';

$config['num_tag_open'] = '<li class="page">';
$config['num_tag_close'] = '</li>'; 
```

如何在codeigniter中使用jquery插件无限滚动？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T06:52:26.987

我已经使用 jquery ajax 解决了这个解决方案，没有任何插件。代码如下...

```
//declaring variables
var base_url        = '<?php echo base_url(); ?>';
var offset          = 2; //customize this as your need
var request_ajax    = true;
var ajax_is_on      = false;
var session_user    = '<?php echo $_SESSION['user_name ']; ?>';//customize this as your need
var objHeight       = $(window).height() - 50; //customize this as your need
var user_name       = '<?php echo $this->uri->segment('2 '); ?>';//customize this as your need
var last_scroll_top = 0;

$(window).scroll(function(event) {

  var st = $(this).scrollTop();

  if (st <= last_scroll_top)
    return false;

  if (($(window).scrollTop() + 500) <= ($(document).height() - $(window).height()))
    return false

  var user_posts = '';

  if (!request_ajax || ajax_is_on)
    return false;

  ajax_is_on = true;
  $("#loading-gif").removeClass('hideGif')
                   .addClass('displayGif');

  $.ajax({

    url: base_url + 'controller/function/',
    data: {
      page_number: offset,
      user_name: user_name
    },
    type: 'POST',
    async: false,
    dataType: 'JSON',
    success: function(data) {

      $("#loading-gif").removeClass('displayGif').addClass('hideGif');

      if (data != '0') {

        for (var x = 0; x < data.length; x++) {

          user_posts +=
            '<div class="row-fluid">' +
            '<div class="span7" style="">';

          if (data[x].status != '1')
            user_posts += '<div class="label" style="">Unpublished</div>';
          else
            user_posts += '';

          user_posts += HTMLdesignWITHjqueryVARIABLES;
        }

        $('#infiniteContent').append(user_posts);

        offset += 1;

      } else {

        request_ajax = false;
        $("#message").addClass('alert alert-success');
        $("#pagination_message").html('No More Posts');
      }

      ajax_is_on = false;
    }
  });
  last_scroll_top = st;
}); 
```

**已编辑**

这是控制器代码：

```
function index() {

  $this->load->library('pagination');
  $this->load->model('menu_model');
  $category = '';

  $data['menu']           = $this->menu_model->get_menu();
  $data['count_posts']    = $this->post_model->count_active_posts();

  /* common configuration for pagination */
  $config['base_url']     = base_url() . 'home/index';
  $config['total_rows']   = $data['count_posts'];

  /* Pagination 1st column */
  $config['per_page'] = $data['per_page'] = 5;
  $offset             = $this->uri->segment(3);
  if ($this->uri->segment(3) > 0) {
      $offset = $this->uri->segment(3) * $config['per_page'] - $config['per_page'];
  }
  $config['offset'] = $offset;
  $this->pagination->initialize($config);

  $data['posts'] = $this->post_model->get_first_column($config['per_page'], $config['offset'], $category);

  /* Pagination 2nd column */
  $config['per_page'] = $data['per_page'] = 3;
  $offset = $this->uri->segment(3);
  if ($this->uri->segment(3) > 0) {
      $offset = $this->uri->segment(3) * $config['per_page'] - $config['per_page'];
  }
  $config['offset'] = $offset;
  $this->pagination->initialize($config);

  $data['all_posts'] = $this->post_model->get_second_column($config['per_page'], $config['offset'], $category);

  /* Pagination 3rd column */
  $config['per_page'] = $data['per_page'] = 2;
  $offset             = $this->uri->segment(3);
  if ($this->uri->segment(3) > 0) {
      $offset = $this->uri->segment(3) * $config['per_page'] - $config['per_page'];
  }
  $config['offset'] = $offset;
  $this->pagination->initialize($config);

  $data['new_posts'] = $this->post_model->get_third_column($config['per_page'], $config['offset'], $category);

  $this->load->view('home_view', $data); 
```

}

希望有一天有人会需要这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-03T12:13:28.790

我对代码点火器中的滚动分页有简单的步骤，我已经检查过它工作得更好

```
$(window).scroll(function(){
    if  ($(window).scrollTop() == $(document).height() - $(window).height()){
        // run our call for pagination
        var table = document.getElementById("table");
        var lastRowIndex = table.rows.length-1;
        loadMore(lastRowIndex);
    }
});

function loadMore(lastRowIndex)
{
$.ajax({
    url: "http://localhost/CodeIgniter/index.php/form/loadmore",  //form is y controller
    type:'POST',
    data: "row="+lastRowIndex, // row wich is post
    success: function(data){    //here data which recevie form controller
        var json = JSON.parse(data);
        var count = json.length;
        var html;
        for( var i = 0; i < count; i++ )
        {
            html += '<tr>';
            html += '<td><input type="checkbox" name="id[]" id="id[]" class="check" value="'+ json[i].id +' "></td>';
            html += '<td>'+ json[i].id +'</td>';
            html += '<td><img src="http://localhost/CodeIgniter/upload/'+ json[i].image +'" class="img-circle" height="25" width="30"></td>';
            html += '<td> ' + json[i].firstname +'</td>';
            html += '<td> ' + json[i].middlename +'</td>';
            html += '<td> ' + json[i].lastname +'</td>';
            html += '<td> ' + json[i].address +'</td>';
            html += '<td> ' + json[i].mobile +'</td>';
            html += '<td> ' + json[i].email +'</td>';
            html += '<td> ' + json[i].gender +'</td>';
            html += '<td><a href="http://localhost/CodeIgniter/index.php/form/del/'+ json[i].id +'">Delete</a></td>';
            html += '<td><a href="http://localhost/CodeIgniter/index.php/form/edite/'+ json[i].id +'">Update</a></td>';
            html += '</tr>';
        }$("#body").append(html); //add this html to th table body which id='body'
    }   
});
} 
```

我使用这个控制器功能

```
 public function loadmore()
 {
    $page=$_POST['row'];
    $per_page = 10;
    $student = $this->Form_model->getview_detail($per_page,$page);
    if($student !== FALSE)
    {
        echo json_encode($student); //send data to script
    }
} 
```

这是模型

```
public function getview_detail($limit, $start)
{
    $this->db->limit($limit, $start);
    $query = $this->db->get('form');
    return $query->result_array();
} 
```

# c# - 使用 jquery 列出（通用）

> ID：14934669
> 
> 赞同：0
> 
> 时间：2013-02-18T10:58:06.350
> 
> 标签：c#, asp.net, jquery

我在 asp.net 项目中有一个 webmethod 我想在 jquery ajax 方法中传递一个 listview 但我现在不知道如何检测 listview 的元素并使用它们。以下代码是我的 c# 代码。bt 我需要 jquery 代码

```
if (ck != null)
{
      reqnum[0, 0] = "@RequestingBranchID";
      reqnum[0, 1] = ck["BranchID"];
      reqnum[1, 0] = "@ProviderBranchID";
      reqnum[1, 1] = customer.ToString();
      DataTable dt = SqlCommands.FillData(out OutStatus, out OutMessage, "BSD.SW_Boxes_StockOfProviderAndRequestingBranch", CommandType.StoredProcedure, reqnum);
      List<DataRow> rows = dt.Rows.Cast<DataRow>().ToList();
      int x=rows.Count;
      return rows;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:26:37.380

好的，假设您有一个`DataTable`，并且您想将其结果传递`DataTable`给一些 JavaScript 以使用`Ajax`. 所以第一步是我们需要将这些结果转换成[JSON](http://www.json.org/)格式。你可以通过以下方法::

```
public string GetJson(DataTable dt)
{
    System.Web.Script.Serialization.JavaScriptSerializer serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
    List<Dictionary<string, object>> rows = new List<Dictionary<string, object>>();
    Dictionary<string, object> row = null;

    foreach (DataRow dr in dt.Rows) {
        row = new Dictionary<string, object>();
        foreach (DataColumn col in dt.Columns) {
            row.Add(col.ColumnName, dr[col]);
        }
        rows.Add(row);
    }
    return serializer.Serialize(rows);
} 
```

下一步是在 JavaScript 中解析结果[JSON](http://www.json.org/)字符串，我想这是最简单的部分。您可以检查此问题以了解如何将[JSON](http://www.json.org/)字符串解析为对象[安全地将 JSON 字符串转换为对象](https://stackoverflow.com/questions/45015/safely-turning-a-json-string-into-an-object)。如果您想了解更多信息，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:33:49.280

您可以使用[JSON.NET](http://json.codeplex.com/)将数据表序列化为 JSON。然后使用 ajax 调用 web 方法。

在服务器端，

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public static string GetList(int branchID, string customer)
{
    // do your code here
    reqnum[0, 0] = "@RequestingBranchID";
    reqnum[0, 1] = branchID;
    reqnum[1, 0] = "@ProviderBranchID";
    reqnum[1, 1] = customer;
    DataTable dt = SqlCommands.FillData(out OutStatus, out OutMessage, "BSD.SW_Boxes_StockOfProviderAndRequestingBranch", CommandType.StoredProcedure, reqnum);
    if(dt!=null)
    {
          return Newtonsoft.Json.JsonConvert.SerializeObject(dt);
    }
    else{
        //return "[]"; 
    }
} 
```

然后在脚本中调用您的方法并传递该方法的参数。

```
$(function(){});
    $('#myButton').click(function() {
        $.ajax({ 
            type: "POST",
            url: "YourPage.aspx/GetList",
            data: "{'branchID':" + branchID + ",'customer':" + customer + "}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                var jsonResult = $.parseJSON(data.d);
                // do your client side code here
            }
        });
    });
}); 
```

注意：如果您没有使用 web 服务/在代码中编写方法，请`[ScriptService]`在您的类之前使用装饰器并包含以下命名空间。

```
using System.Web.Script.Services;
using System.Web.Services; 
```

# vb.net - 如何在 vb.net 中声明方法返回值

> ID：14934671
> 
> 赞同：-3
> 
> 时间：2013-02-18T10:58:10.570
> 
> 标签：vb.net, methods, return, return-value

我创建了一个名为的类`Cls_ICCID`，在其中声明了`Update_Status`返回 byRef 变量的方法。

* * *

**Cls_ICCID**

```
Public Sub Update_Status(**ByRef massege As String**, ByVal ICCID_No As Integer, ByVal status As Integer)
        Try
            Dim cmd As SqlCommand
            Dim sql As String
            Dim myConnection As SqlConnection = New SqlConnection()
            myConnection.ConnectionString = "Data Source=TEHRANI\TEHRANI;Initial Catalog=GSMProduction;Persist Security Info=True;User ID=sa;Password=1"
            sql = "UPDATE Tbl_ICCID SET Status=status WHERE ICCID=ICCIDNo"
            myConnection = New SqlConnection(sql)
            myConnection.Open()
            cmd = New SqlCommand(sql, myConnection)
            cmd.ExecuteNonQuery()
            cmd.Dispose()
            myConnection.Close()
            massege = "SeccessFully"
        Catch ex As Exception
            massege = "server Error"
        End Try
    End Sub 
```

然后在触发文本框更改事件时执行该方法：

```
 Private Sub Txt_ICCID_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Txt_ICCID.TextChanged
     Dim clsICCID As Cls_ICCID
     clsICCID.Update_Status(lblError.Text, Txt_ICCID.Text, 1)
 End Sub 
```

但这给了我一个例外：

> 算术运算导致溢出。 ![在此处输入图像描述](../Images/19dfa790b4f3c4204d2d29294b85a70c.png) 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:13:20.357

老实说，正如 konrad 所说，如果您想使用此类代码，您应该真正研究基础知识。

还没有尝试过代码，但我认为你想要类似的东西

```
Public Function Update_Status(iccidNo As Integer, status As Integer) As String
    Const sql As String = "UPDATE Tbl_ICCID SET Status=@status WHERE ICCID=@ICCIDNo"
    Const connstr As String = "Data Source=TEHRANI\TEHRANI;Initial Catalog=GSMProduction;Persist Security Info=True;User ID=sa;Password=1"
    Try
        Using myConnection = New SqlConnection()
            myConnection.ConnectionString = connstr
            Using cmd = New SqlCommand(sql, myConnection)
                cmd.Parameters.AddWithValue("@status", status)
                cmd.Parameters.AddWithValue("@ICCIDNo", iccidNo)
                cmd.ExecuteNonQuery()
                Update_Status = "Successfully"
            End Using
        End Using
    Catch ex As SqlException
        Update_Status = "server Error"
    Catch ex As Exception
        Update_Status = "server Error"
    End Try
End Function 
```

但就我个人而言，我不会那样处理异常并返回一个布尔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:14:04.140

您特别要求的是在方法中返回值。而不是`Sub`你必须声明它`Function`，然后返回值`return`：

```
Public Function Update_Status(ICCID_No As Integer, status As Integer) As String
    '...

    return massege
End Function 
```

然后抓住价值：

```
lblError.Text = clsICCID.Update_Status(Txt_ICCID.Text, 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:13:14.793

我应该使用 from Function 而不是 sub 方法。因为 sub 方法是无效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T11:18:11.060

对于返回值的方法，您需要将方法声明为函数，而不是 sub。例如：

```
Public Function Update_Status(ByVal ICCID_No As Integer, ByVal status As Integer) As String
    Return "errorMessage"
End Function 
```

然后可以像这样调用它：

```
returnValue = Update_Status(Txt_ICCID.Text, 1) 
```

见：http: [//msdn.microsoft.com/en-us/library/sect4ck6%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/sect4ck6%28v=vs.80%29.aspx)

**但似乎您的参数可能不匹配：将字符串作为整数发送？**

# mysql - 在mysql中获取嵌套查询的值

> ID：14934672
> 
> 赞同：0
> 
> 时间：2013-02-18T10:58:10.847
> 
> 标签：mysql, nested

```
SELECT *, count(idWallHasWallPost) as republish FROM admin_pw.wall_has_wallpost 
    where WallPost_idWallPost in 
    (select WallPost_idWallPost from wall_has_wallpost where Wall_idWall in 
    (select Wall_idWall from follower where User_idUser=1))
    group by WallPost_idWallPost 
    having republish>1; 
```

我在mysql中有这个嵌套查询。无论如何都可以访问查询中更高级别的嵌套查询中的值。

我想在最后一次选择中访问 Wall_idWall。我将其选为最低的查询，并希望查看 in 运算符使用了哪个 Wall_idWall。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:12:52.470

尝试：

```
SELECT w.*, count(w.idWallHasWallPost) as republish, v.all_Wall_idWall
FROM admin_pw.wall_has_wallpost w
join (select h.WallPost_idWallPost, 
             group_concat(distinct h.Wall_idWall) all_Wall_idWall
      from wall_has_wallpost h
      join follower f on h.Wall_idWall = f.Wall_idWall and f.User_idUser=1
      group by h.WallPost_idWallPost) v
on w.WallPost_idWallPost = v.WallPost_idWallPost
group by WallPost_idWallPost 
having republish>1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:20:41.843

如果您在最后一次选择中只需要 Wall_idWall，请尝试此操作

```
SELECT *, count(idWallHasWallPost) as republish,(select Wall_idWall from follower where User_idUser=1) as Wall_idWall FROM admin_pw.wall_has_wallpost 
where WallPost_idWallPost in 
(select WallPost_idWallPost from wall_has_wallpost where Wall_idWall in 
(select Wall_idWall from follower where User_idUser=1))
group by WallPost_idWallPost 
having republish>1; 
```

或者您可以根据您的要求更改 where 子句。

# android - Android afreechart 自定义 XY 象限

> ID：14934675
> 
> 赞同：2
> 
> 时间：2013-02-18T10:58:15.947
> 
> 标签：android, charts

这是我的问题：

我`AFreeChart`用来在我的`activity`. 我只给我的图表提供积极的输入。

所以我只想在

*   (X,Y) 象限不在 (X,-Y) 象限中
*   (-X,Y) 象限和 (-X,-Y) 象限

有没有可能限制象限？

谁能告诉我有没有办法在 AFreeChart 中自定义象限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T00:16:28.177

您需要强制轴的范围值为正以实现此目的，您可以将范围的下限设置为 0.0 并将上限设置为最大值。像下面这样的东西，

```
axis.setRange(0.0, <+upper limit value>); 
```

# sql - 为什么缺少关键字错误？

> ID：14934676
> 
> 赞同：0
> 
> 时间：2013-02-18T10:58:17.357
> 
> 标签：sql, oracle11g, foreign-keys, constraints, ora-00905

```
CREATE TABLE SORDER (
    C_NO CHAR(4),
    P_NO CHAR(4),
    QUANTITY SMALLINT,
    PRIMARY KEY (C_NO, P_NO),
    CONSTRAINT CNO_FK FOREIGN KEY (C_NO) REFERENCES CUSTOMER ON DELETE RESTRICT,
    CONSTRAINT PNO_FK FOREIGN KEY (P_NO) REFERENCES PRODUCT2 ON DELETE RESTRICT
); 
```

> ORA-00905: 缺少关键字

这是另外两张桌子。

```
CREATE TABLE PRODUCT2 (
    P_NO CHAR(4) PRIMARY KEY,
    P_NAME CHAR(6),
    PRICES DECIMAL(3,2),
    STOCK SMALLINT
);

CREATE TABLE CUSTOMER2 (
    C_NO CHAR(4) PRIMARY KEY,
    C_NAME CHAR(6),
    CITY CHAR(11)
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T11:02:13.483

Oracle 只支持`ON DELETE SET NULL`or`ON DELETE CASCADE`作为关键字。的功能`ON DELETE RESTRICT`是通过省略`ON DELETE`

```
CREATE TABLE SORDER (
    C_NO CHAR(4),
    P_NO CHAR(4),
    QUANTITY SMALLINT,
    PRIMARY KEY (C_NO, P_NO),
    CONSTRAINT CNO_FK FOREIGN KEY (C_NO) REFERENCES CUSTOMER2,
    CONSTRAINT PNO_FK FOREIGN KEY (P_NO) REFERENCES PRODUCT2
); 
```

有关详细信息，请参阅手册：[http ://docs.oracle.com/cd/B28359_01/server.111/b28286/clauses002.htm#CJABCJJF](http://docs.oracle.com/cd/B28359_01/server.111/b28286/clauses002.htm#CJABCJJF)

从手册中引用：

> *ON DELETE 子句允许您确定在删除引用的主键或唯一键值时 Oracle 数据库如何自动维护引用完整性。如果省略此子句，则 Oracle 不允许删除父表中的引用键值，这些键值在子表中具有依赖行*

这是一个 SQLFiddle：[http ://sqlfiddle.com/#!4/07e93/1](http://sqlfiddle.com/#!4/07e93/1)

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-02-18T11:00:21.827

试试下面的代码

```
CREATE TABLE SORDER (
    C_NO CHAR(4),
    P_NO CHAR(4),
    QUANTITY SMALLINT,
    PRIMARY KEY (C_NO, P_NO),
    CONSTRAINT CNO_FK FOREIGN KEY (C_NO) REFERENCES CUSTOMER ON DELETE RESTRICT,
    CONSTRAINT PNO_FK FOREIGN KEY (P_NO) REFERENCES PRODUCT2 ON DELETE RESTRICT
); 
```

# php - 到 xml 的数组在进程中间失败

> ID：14934677
> 
> 赞同：0
> 
> 时间：2013-02-18T10:58:27.063
> 
> 标签：php, xml, simplexml

正如您在下面看到的，一切都顺利进行到`uid`元素`pwd`。突然间以价值观突袭。我在这里错过了什么吗？

原始代码[来自这里](https://stackoverflow.com/questions/1397036/how-to-convert-array-to-simplexml)。

**代码：**

```
$array = array('table'=>'users', 'operation'=>'insert', 'uid'=>'yoyo', 'pwd'=>'123');
$output = serialize($array);

$xml = new SimpleXMLElement('<root/>');
array_walk_recursive(unserialize($output), array($xml, 'addChild'));
echo $xml->asXML(); 
```

**结果：**

```
<?xml version="1.0"?>
<root>
<users>table</users>
<insert>operation</insert>
<yoyo>uid</yoyo>
<123>pwd</123>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:03:55.777

根据您的需要，您必须翻转阵列，因此请尝试，

改变你的线路

```
$output = serialize($array); 
```

和

```
$output = serialize(array_flip($array)); 
```

# c# - 在 SQL Server 2008 表中存储 GridView 数据时出现尾随空格问题

> ID：14934681
> 
> 赞同：0
> 
> 时间：2013-02-18T10:58:41.040
> 
> 标签：c#, asp.net, sql-server-2008

根据我的要求，需要在 SQL Server 2008 中上传 Excel 数据

但是有一个问题......

当我上传 Excel 工作表并在 Gridview 中显示其内容，然后将其存储在 SQL Server 2008 数据库中时；

在 GridView 中，Excel 数据显示完美，但是当我将其存储到数据库中时，在字符串的末尾`&#160;`插入...

表中存储的数据`PETER&#160;`应该是`PETER`

我也尝试过使用该`.Trim()`方法，但没有任何效果

```
foreach (GridViewRow g1 in grvExcelData.Rows)
{
   try
   {
       name = grvExcelData.Rows[g1.RowIndex].Cells[2].Text.Trim(); 
```

这是我的数据示例：

```
 96086 IT085   PATEL RUCHIKKUMAR MAHENDRABHAI&#160;    IT  6   2009-13 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:07:22.813

`&#160;`或者[是非中断空间](http://en.wikipedia.org/wiki/Non-breaking_space)`&nbsp;`的 html 代码。

用它来摆脱它。

```
name = grvExcelData.Rows[g1.RowIndex].Cells[2].Text.Replace(@"&#160;", ""); 
```

# jquery - Rails 3 和 Jquery 的 rateit 插件

> ID：14934685
> 
> 赞同：0
> 
> 时间：2013-02-18T10:58:56.250
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我想在我的食谱应用程序中添加一个星级评分系统，每个用户可以对不同的食谱评分一次。我已经阅读了 Jquery 的速率，这是一个很好的起点。[http://www.radioactivethinking.com/rateit/example/example.htm](http://www.radioactivethinking.com/rateit/example/example.htm)我的问题是关于如何让它在 Rails 3 中工作，我最初的想法是

设置一个看起来像这样的评级模型

```
class Rating < ActiveRecord::Base

has_many :recipes
has_many :users
attr_accessible :recipe_id, :user_id, :number  
validates_uniqueness_of :user_id, :scope => :recipe_id
end 
```

设置模型关系

```
class Recipe < ActiveRecord::Base

has_many :ratings
end

class User < ActiveRecord::Base

has_many :ratings
end 
```

控制器

```
class RatingsController < ApplicationController

 def new
 @rating = Rating.new
 end

 def create
 @rating = Rating.new(params[:rating])
  if @rating.save
    redirect_to my_recipes_path, :notice => "Thanks #{current_user.name} Recipe successfully Rated."
 end 
```

如前所述，我正在考虑使用 Jquery 插件 rateit，它可以使用 HTML 范围输入

```
<input type="range" min="0" max="5" value="0" step="0.5" id="backing2">
<div class="rateit" data-rateit-backingfld="#backing2"></div> 
```

我的想法是，要向模型提交星级评分，我需要将值作为隐藏字段提交，类似于

```
<%= form_for @rating do |f| %>
<%= f.hidden_field :user_id, :value => current_user.id %>
<%= f.hidden_field :recipe_id, :value => recipe.id %>
<%= f.submit 'Rate Recipe' %>
<% end %> 
```

我不确定如何将给定的评级与放入模型中的值联系起来。理想情况下，我想通过 Ajax 请求来实现这一点。

我的关联可能不正确，因为我的很多代码可能？在我希望有人能指出我正确的方向或至少指出我迄今为止的错误之前从未接触过这样的事情

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:31:53.207

使用 The Rateit Gem 怎么样

[https://github.com/ouvrages/rails-rateit](https://github.com/ouvrages/rails-rateit)

我没有使用它，只是在谷歌上搜索了“Rateit Gem”，这是最热门的。

# sql - 触发更新现有数据或在数据不存在时插入（多行支持）

> ID：14934686
> 
> 赞同：3
> 
> 时间：2013-02-18T10:58:58.370
> 
> 标签：sql, sql-server-2008, triggers

我有两个表，两个表都包含类似的“用户名”、“日期”和“时间”列。一个表（表 2）本质上是每个日期的“时间”列的总和，其中 table1 每个日期可以有多个“时间”。

我无法控制用于将数据插入 table1 的任何语句，所以我认为最好的方法是在 table1 上使用触发器，该触发器根据日期是否已经存在一行来**插入**或**更新**table2插入。要做到这一点，类似于以下内容就可以了：

```
IF NOT EXISTS(SELECT * FROM table2 WHERE date = @date/*date from inserted*/)
    --insert into table 2 here
ELSE
    --update table 2 here 
```

但是，问题是我还需要触发器上的多行支持，这会导致之前的`IF`失败。一个想法是循环插入的每一行，但从我读过的内容来看，这将对我想要避免的性能产生很大影响（如果没有更好的方法，这是最后的手段）。

*那么，有没有办法在不*使用某种循环的情况下做我需要的事情？

*我将使用的示例插入：*

```
INSERT INTO table2 (username, date, time)
SELECT i.username, i.date, SUM(w.time) FROM inserted AS i
JOIN (SELECT username, date, time FROM table1/*table with trigger*/) AS w 
ON w.date = i.date AND w.username = i.username 
GROUP BY i.username, i.date 
```

提前感谢您的任何建议！

注意：我是 SQL 新手，如果我遗漏了任何内容/犯了明显的错误，我很抱歉！

**编辑（解决方案）：**

工作解决方案（感谢@Ronak Vyas 的回答）如下：

```
MERGE table2 AS m
USING (SELECT i.username, i.date, SUM(w.time) FROM inserted AS i
JOIN (SELECT username, date, time FROM table1/*table with trigger*/) AS w 
ON w.date = i.date AND w.username = i.username 
GROUP BY i.username, i.date) AS s
ON m.date = s.date AND m.username = s.username
WHEN MATCHED THEN UPDATE SET m.duration = s.duration
WHEN NOT MATCHED THEN
INSERT (username, date, time)
VALUES (s.username, s.date, s.time) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:26:13.397

尝试使用合并语句。

访问[http://blog.sqlauthority.com/2008/08/28/sql-server-2008-introduction-to-merge-statement-one-statement-for-insert-update-delete/](http://blog.sqlauthority.com/2008/08/28/sql-server-2008-introduction-to-merge-statement-one-statement-for-insert-update-delete/)

希望，这会有所帮助。

# javascript - 在 moment.js 中更改年初

> ID：14934691
> 
> 赞同：0
> 
> 时间：2013-02-18T10:59:39.063
> 
> 标签：javascript, date, datetime, prototypejs, momentjs

我正在使用 momentJS 进行日期计算。

在这里，我想更改周计算的年初。

对我来说，年初是 11 月 1 日，年底是 10 月 31 日。

或任何其他允许我这样做的 JS 日期库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:30:38.550

试试这个：- [http://jsfiddle.net/EvLmF/](http://jsfiddle.net/EvLmF/)

```
var EndDate = moment([2008, 0, 29]);//End Date
var StartDate = moment([2007, 0, 28]);//Start Date

alert("Weeks : " + EndDate.diff(StartDate, 'weeks'));
alert("Days : " + EndDate.diff(StartDate, 'days'));
alert("Years : " + EndDate.diff(StartDate, 'years')); 
```

因此，使用您的开始日期和结束日期创建新的时刻对象并根据需要执行操作。

# android - 不支持网址编码

> ID：14934693
> 
> 赞同：5
> 
> 时间：2013-02-18T10:59:41.243
> 
> 标签：android, http, urlencode, android-mediaplayer

我有网上存档。我正在尝试使用`media player using live streaming`. 但是媒体播放器给出了一个`error (-1,1004)` 我认为我的媒体播放器没有得到正确的 url，因为它包含阿拉伯字符所以我**尝试用 Html.encode 或 UrlEncoder 类对其进行编码**仍然得到同样的错误。

因此，最后我在 webview 中加载了该 url，并在页面加载完成时将网页 url 传递给媒体播放器。

```
 WebView webView = new WebView(SongActivity.this);
        webView.setSoundEffectsEnabled(false);
        webView.loadUrl("MY URL");
        webView.setWebViewClient(new WebViewClient() {
            public void onPageFinished(WebView view, String url) {

                try {

                playerService.startPlay(url );// this passes url to media player and url will be played using media player

                } catch (IllegalArgumentException e) {
                    e.printStackTrace();
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

            };

            public void onPageStarted(WebView view, String url,
                    android.graphics.Bitmap favicon) {
                System.out.println("Decoding url:" + strURl);
            };
        }); 
```

它工作正常，也可以播放歌曲，但这不是标准的。对于普通 url（没有阿拉伯字符）媒体播放器代码工作得很好。

你能给我一些标准的解决方案吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:51:31.143

根据错误代码 (-1,1004)，您似乎可能会收到 HTTP 403 Forbidden 作为来自服务器的答案。你以前试过[Uri.encode(String)](http://developer.android.com/reference/android/net/Uri.html#encode(java.lang.String)) .toString()`mediaPlayer.setDataSource(String url)`吗？

来自[https://stackoverflow.com/a/4571518/262462](https://stackoverflow.com/a/4571518/262462)：

> 不要使用 URLEncoder 类！尽管名称如此，但该类实际上是进行 HTML 表单编码，而不是 URL 编码。

# image - 打印 ms 访问数据库中的所有图像

> ID：14934695
> 
> 赞同：1
> 
> 时间：2013-02-18T10:59:46.523
> 
> 标签：image, ms-access

我开发了一个使用 ms 访问的报告工具。它由 10 个表单组成，允许用户输入数据。我还允许用户将图像上传到数据库（图像上传到图像文件夹，链接存储在数据库表中）。用户可以上传多达 30 个图像文件。我想要做的是添加另一个表单来显示用户上传的所有图像。我知道在 php 中可以使用 mysql_num_rows 函数吗？谁能指出我正确的方向？

基本上，当表单打开时，我想运行一个 Sql 语句来检索表数据库中的所有图像，然后在表单上显示图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:08:42.213

使用 MS Access 2010：

\1。创建一个连续的表格，有一个向导将引导您完成。您可以基于表或查询，查询通常是最好的。确保包含保存图像路径的字段。您不需要在表单中包含带有图像路径的字段，它只需要成为记录集的一部分。

\2。添加图像控件

![图像控制](../Images/f45b47e09f53012853e9c42ad18f8e50.png)

\3。将图像控件的控件源设置为包含图像路径的字段的名称。

![图像控制属性](../Images/ccebaa1ff9006153faac8287fd9c51fa.png)

\4。查看表格。

![图像控制形式](../Images/5ac6fe9675bd019a2dad9ee34b624018.png)

**连续形式可以是子形式**

![图像控制和子窗体](../Images/65240d155671272bba61970d4f72dd44.png)

# windows - WSH下使用WinHttp时如何忽略utf-8编码错误？

> ID：14934696
> 
> 赞同：0
> 
> 时间：2013-02-18T10:59:49.507
> 
> 标签：windows, scripting, jscript, wsh, winhttp

我正在使用以下脚本来获取 URL 的内容：

```
WinHTTP = WScript.CreateObject('WinHttp.WinHttpRequest.5.1') ;
WinHTTP.Open( 'GET', theUrl ) ;
WinHTTP.Send() ;
var content = WinHTTP.ResponseText ; 
```

除非 URL 的内容是带有 UTF-8 编码的 XML 并且其中有 latin1 字符，否则它工作正常。
我收到关于多字节代码页中缺少某些内容的错误，并且脚本被终止。

如何告诉 WinHttp 忽略该错误？

PS：该错误发生在 Windows Vista 中，但不在 Windows XP 中（我不知道 Win 7 或 8）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:51:11.010

我认为我[在这里](https://stackoverflow.com/a/15105516/1856504)的回答（关于这个问题的一个变体）也会回答这个问题。

# linux - 不能用任何用户进入centOS

> ID：14934704
> 
> 赞同：-1
> 
> 时间：2013-02-18T11:00:12.480
> 
> 标签：linux, shell, centos

我正在使用没有**GNOME的****cent OS**操作系统。

 **一开始，它问

```
localhost login:
Password: 
```

它在组名 service 下**有一个名为****service**的用户，其密码也是**service**。

 ****我想通过这个名为**service**的用户进入操作系统。

当我这样做时，它会显示这些行

```
Last Login: Mon Feb 18 16:16:26 on tty1
-bash: /home/service/.bashrc: Permission denied
-bash-3.2$ 
```

**我在/etc/sudoers**中进行了更改，并在**root ALL=(ALL) ALL**正下方添加了**service ALL=(** ALL) ALL ，但它没有用。

 **当我尝试从 root 切换到服务时，它显示相同的错误。

**已编辑**

当我运行时`ls -a -l | grep .bashrc`，它显示

```
lrwxrwxrwx 1 root  root   41 Feb 18 11:40 .bashrc -> /home/service/etc/version.symlink/.bashrc
-rw-r--r-- 1 service service 124 Feb 15 13:06 .bashrc-moved-1361167832 
```

帮我。寻找您的善意回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:36:25.690

好吧，根据您的`ls -a -l | grep .bashrc`命令输出，我猜您必须以 root 身份发出此命令：

```
chown service:service /home/service/.bashrc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:05:45.310

这与 sudo 无关。检查`/home/service/.bashrc`它的权限应该归`service:service`. 该用户也应该可以阅读它。

`/home/service`其本身应由所有者和团体拥有`service:service`并对其拥有`rwx`权利。`rx`********

# ruby - Ruby：对 Winsock2 ioctlsocket 的 Win32API 调用失败，地址错误？

> ID：14934705
> 
> 赞同：2
> 
> 时间：2013-02-18T11:00:13.343
> 
> 标签：ruby, winapi, winsock, nonblocking

我想将我的 Winsock2 套接字从阻塞更改为非阻塞。而且我知道这可以通过调用ws2_32.dll库中的“ioctlsocket”函数来实现。但是我的实现未能达到其目的，返回值为 -1，这表示套接字错误。我尝试通过调用 WSAGetLastError 来检索错误代码，它返回 10014，我猜这与无效指针有关。在这种情况下，我的错是什么？我想这是我错误地声明或将值传递给 API 函数，但我不知道为什么。或者任何人都可以建议一种使套接字非阻塞的替代方法？

（由于某些原因，我不能使用 Ruby 的套接字类。）

这是我的代码（@fd 是我的套接字的描述符）：

proc = Win32API.new("ws2_32", "ioctlsocket", "plp", "l") ret = proc.call(@fd, 0x8004667E, 1) # FIONBIO p ret => -1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:43:29.843

事实证明，我需要“打包”数组中的最后一个参数。我认为这只是 C 风格结构的情况，但它以某种方式成功了。现在套接字成功进入非阻塞模式。

工作代码如下所示：

proc.call(@fd, 0x8004667E, [1].pack("l")) # FIONBIO

不过，我认为没有人会需要这个。Ruby 自己的套接字实现功能强大但比自己编写套接字包装器要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:30:22.243

最后一个参数让你崩溃：

`proc = Win32API.new("ws2_32", "ioctlsocket", "plp", "l") ret = proc.call(@fd, 0x8004667E, 1) # FIONBIO p ret => -1`

[`ioctlsocket()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738573%28v=vs.85%29.aspx)的最后一个参数是**指向**long 而不是 long 的指针（[10014 返回码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx)是 WSAEFAULT，这基本上意味着它在尝试取消引用该参数时崩溃了）。我不知道足够的 Ruby 来告诉你如何形成一个指向 long 的指针来传递，但希望这足以让你继续前进。

# java - JUnit java.net.ConnectException

> ID：14934706
> 
> 赞同：3
> 
> 时间：2013-02-18T11:00:17.447
> 
> 标签：java, eclipse, windows-8, junit, connectexception

我是 Java 新手，所以不要粗鲁；-) 我有一个任务要做，并且有一些 JUnit-Tests 来验证我的解决方案。当我尝试运行它们时，需要一些时间，然后出现以下错误：

```
Could not connect to:  : 51219          
java.net.ConnectException: connect: Address is invalid on local machine, or port is not valid on remote machine
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.connect(RemoteTestRunner.java:570)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:381)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

这是我使用的：

*   视窗 8
*   JRE 7
*   JUnit 4
*   Eclipse 经典 4.2.1

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:08:55.807

您的单元测试似乎正在尝试连接到端口 51219，这在您的本地计算机上是不可能的。
尝试启动本地服务器，或“模拟”服务器连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:45:17.527

对于遇到相同问题的其他人：
Windows 8 中的 JRE 7 似乎存在问题。使用 JRE 6 可以解决问题！:)

# objective-c - 如何模拟调用调用块的类？

> ID：14934717
> 
> 赞同：0
> 
> 时间：2013-02-18T11:00:58.240
> 
> 标签：objective-c, tdd, fmdb, ocmock, invocation

我正在使用 SenTestingKit 和 OCMock 深入研究 TDD 和[startet](http://ocmock.org)。我使用[FMDB](https://github.com/ccgus/fmdb)作为我的 SQLite 数据库的包装器。

我不知道如何模拟这个类，所以它正确地用一个对象`DatabaseQueue`调用了调用块。`FMDatabase`

有任何想法吗？

### 客户工厂.h

```
@interface CustomerFactory

// DatabaseQueue inherits from FMDatabaseQueue
@property (nonatomic, retain) DatabaseQueue *queue;

- (id)initWithDatabaseQueue:(DatabaseQueue *)queue;

@end 
```

### 客户工厂.m

```
@implement CustomerFactory

- (id)initWithDatabaseQueue:(DatabaseQueue *)queue
{
    if ((self = [super init]))
    {
        [self setQueue:queue];
    }
}

- (NSArray *)customersByCategory:(NSUInteger)categoryId
{
    __block NSMutableArray *temp = [[NSMutableArray alloc] init];

    [self.queue inDatabase:^(FMDatabase *db)
    {
        FMResultSet *result = [db executeQuery:@"SELECT * FROM customers WHERE category_id = ?", categoryId];

        while ([result next])
        {
            Customer *customer = [[Customer alloc] initWithDictionary:[result resultDictionary]];
            [temp addObject:customer;
        }
    }];

    return temp;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:02:14.103

如果您正在测试**CustomerFactory**类，那么您根本不应该这样做。把它想象成测试我们单元的接口，它是一个**CustomerFactory**实例。您有一个名为*customersByCategory:*的方法，并且您只对从此调用中获取客户对象的 NSArray 感兴趣。**您在内部使用DatabaseQueue**和*FMDatabase*实例的事实是对这个特定单元测试应该是透明的实现细节。

测试**DatabaseQueue**类是另一回事，但看起来实现所需目标的最简单方法是在测试中使用**DatabaseQueue**的真实实例。

# android - 在 Android 中使用 ksoap2 调用 .NET webservice，没有返回结果

> ID：14934724
> 
> 赞同：1
> 
> 时间：2013-02-18T11:01:15.500
> 
> 标签：android, .net, ksoap2

我一直在尝试使用 ksoap2 通过 android 调用一个简单的 .NET web 服务（HelloWorld）（我已经尝试过并成功用于不同的 web 服务）。但这需要身份验证，所以我搜索了如何为身份验证添加标头，但是我的文本视图中仍然没有返回结果。

```
SoapObject Request = new SoapObject(NAMESPACE,METHOD_NAME);  
List<HeaderProperty> headers = new ArrayList<HeaderProperty>();
headers.add(new HeaderProperty("Authorization", "Basic"+Base64.encode("Username:Password".getBytes())));

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet=true;
        envelope.setOutputSoapObject(Request);

        HttpTransportSE aht = new HttpTransportSE(URL);

        try{
            aht.call(SOAP_ACTION,envelope,headers);
            SoapPrimitive resultString = (SoapPrimitive)envelope.getResponse();

            tv.setText("yo :" + resultString);

        }
    catch(Exception e){
        e.printStackTrace();
    } 
```

我的日志中也有错误：

> 错误：附加线程失败，但我不认为这是

这是 HelloWorld 方法的 wsdl：

```
>     <wsdl:types>
>     <s:schema elementFormDefault="qualified" targetNamespace="http://tempuri.org/">
>     <s:element name="HelloWorld">
>     <s:complexType/>
>     </s:element>
>     <s:element name="HelloWorldResponse">
>     <s:complexType>
>     <s:sequence>
>     <s:element minOccurs="0" maxOccurs="1" name="HelloWorldResult" type="s:string"/>
>     </s:sequence>
>     </s:complexType>
>     </s:element> 
```

> 我的问题。有没有人遇到过这种问题，或者我的代码在某些时候是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:45:10.097

.这就是我访问.net Web 服务的方式。在我的情况下，我发送 2 个参数用户名和密码，服务将根据数据库返回一个字符串。如果您没有传递任何参数，请删除我提到的参数并只添加这个

```
PropertyInfo pi = new PropertyInfo();
    pi.setType(String.class);
    request.addProperty(pi); 
```

* * *

别的

```
 public String Call(String username, String password) {
    SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,
            OPERATION_NAME);

    PropertyInfo pi = new PropertyInfo();
    pi.setName("username");
    pi.setValue(username);
    pi.setType(String.class);
    request.addProperty(pi);

    pi = new PropertyInfo();
    pi.setName("password");
    pi.setValue(password);
    pi.setType(String.class);
    request.addProperty(pi);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);

    envelope.dotNet = true;

    envelope.setOutputSoapObject(request);

    HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);
    Object response = null;

    try {

        httpTransport.call(SOAP_ACTION, envelope);
        response = envelope.getResponse();
    }

    catch (Exception exception) {
        response = exception.toString();
    }

    return response.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:31:34.723

尝试这个：

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);    
request.addProperty("requst_name",request_value);//if you have any request add here..                   
 envelope.setOutputSoapObject(request);
 envelope.implicitTypes = true;
 envelope1.dotNet = true;
 int Timeout = 60000;
 HttpTransportSE androidHttpTransport = new HttpTransportSE(URL, Timeout);
 androidHttpTransport.debug = true;
                try {

                    androidHttpTransport.call(SOAP_ACTION, envelope);
                    Object response = envelope.getResponse();
                    String res=response.toString();
                    }

                    }catch (XmlPullParserException e) {

                        e.printStackTrace();
                    } catch (SocketTimeoutException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
```

# c++ - 在 MFC 中运行时更改编辑框属性

> ID：14934727
> 
> 赞同：0
> 
> 时间：2013-02-18T11:01:43.003
> 
> 标签：c++, visual-studio-2008, visual-c++, mfc

在我的应用程序中，我必须在运行时更改编辑框的字体、字体大小、背景颜色属性。当用户选择特定字体时，它的颜色应该会更新并在编辑框中可见。我正在尝试通过使用 CColorDialog 、 CFontDialog 来做到这一点。有什么有效的方法吗？？？我可以使用 Visual Studio 环境中的属性栏来更改设置，我们曾经在开发环境中更改属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:38:54.203

您可以在以 CEdit 作为父类的类中捕获 WM_CTLCOLOR 消息，然后将 CDC 对象更改为您的内容。
例如 ：

```
HBRUSH CMyEdit::CtlColor(CDC* pDC, UINT nCtlColor) 
{
    HBRUSH hBrush;
    hBrush = (HBRUSH)m_myBrush; // An handle on a brush which was created with your background color for the edit
    pDC->SetBkColor(RGB(0, 0, 0)); // Color for the text background
    pDC->SetTextColor(RGB(255, 255, 255)); // Color for the text

    // More changes on the pDC like changing the font, etc...
    return hBrush;
} 
```

# gwt - 我每次都必须创建 smartgwt 选项卡窗格吗？

> ID：14934735
> 
> 赞同：-1
> 
> 时间：2013-02-18T11:01:56.843
> 
> 标签：gwt, tabs, smartgwt

我有一个选项卡的常量窗格，它是 VLayout（比如说' **Layout-A** '）。由于每次创建此布局都需要时间，因此我只创建一次。一个选项卡（让我们说“ **Tab-A** ”）显示这个 Vlayout。但它是可关闭的。第一次打开选项卡时，没关系。我可以看到布局-A。但是当我关闭并重新打开此选项卡时，我使用“新建”创建**Tab-A**并将其窗格设置为**Layout-A**。选项卡为空。

每次打开**Tab-A**时都必须创建**Layout-** A吗？谢谢...

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:19:07.997

我没有找到来源（只是评论），但我知道过去我对此进行了一些测试并且我正在玩

`theTabSet.updateTab(indexOfTheTabToRemove, null);`您可以使用控制台查看被破坏的元素。查看`removeTab`方法的javadoc。

因此，我们必须将窗格设置为空，删除不会破坏您要使用的窗格的选项卡，并且您将能够在需要时重新归因于该选项卡。

有一个[链接](http://forums.smartclient.com/showthread.php?t=13892)在讲这个案例.....（看文末）**

# encryption - 是否值得加密密码哈希？

> ID：14934737
> 
> 赞同：0
> 
> 时间：2013-02-18T11:02:01.813
> 
> 标签：encryption, hash, passwords, sha, password-encryption

我想知道加密密码哈希和/或盐是否是常见的做法，它是否一定会使其更安全，或者只是增加“猜测”密码所需的时间？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:08:09.660

加密加盐哈希不是常见的做法。它可能会稍微提高安全性，但实际上并不值得，因为您必须以某种方式管理密钥，从而使整个过程复杂化。使用带有安全散列算法的加盐散列就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:08:03.920

一般来说，只要你使用好的密码散列函数，你就不需要加密散列。至于盐，加盐最好在加密之前完成，即。salt 确实被加密了。一个例外是一次性餐桌，在这种情况下，您可以轻松地在之后加盐。至于第三个问题，整个加密只不过是增加了“猜测”明文所需的时间，但又是一次性表。现在你的具体问题是什么？你能用某种具体的计算机语言将其表述为一项任务吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T12:34:48.643

如果散列是由“好”算法产生的，那么加密它就没有任何意义，因为你实际上是在加密理论上只有合法用户才能生成的东西。

加密盐不会增加任何真正的安全性。

# sql - 使用 Select * Into 将数据插入临时表

> ID：14934740
> 
> 赞同：1
> 
> 时间：2013-02-18T11:02:06.107
> 
> 标签：sql, sql-server

我想将数据插入到临时表中，因为我正在使用`select * into`语法。

但我收到错误：

```
Msg 102, Level 15, State 1, Line 8
Incorrect syntax near ')'. 
```

尽管 Single Query 执行成功。

代码：

```
Create Table #_Total
(
A   Int,
B   Int,
C   Int,
D   Int
)

Select * InTo #_Total From(
Select 
Sum(Case When Closed=0 And ISNULL(VendorTicketNo,'')='' Then 1 Else 0 End),
Sum(Case When Closed=1 And TicketType<>8 AND ISNULL(VendorTicketNo,'')<>'' Then 1 Else 0 End),
Sum(Case When Closed=1 And CAST(ClosedOn As DATE)= CONVERT(VARCHAR(8),GETDATE(),112) Then 1 Else 0 End),
Sum(Case When Closed=0 And TicketType=8 Then 1 Else 0 End)
From ALBATMStatus.dbo.Ticket
)

Select * From #_Total 
```

数据库 - SQL SERVER 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:05:42.987

由于您是事先创建表格，因此您必须使用

```
INSERT INTO 
```

试试这个

```
Create Table #_Total
(
A   Int,
B   Int,
C   Int,
D   Int
)

Insert Into #_Total 
Select * From(
Select 
Sum(Case When Closed=0 And ISNULL(VendorTicketNo,'')='' Then 1 Else 0 End),
Sum(Case When Closed=1 And TicketType<>8 AND ISNULL(VendorTicketNo,'')<>'' Then 1 Else 0 End),
Sum(Case When Closed=1 And CAST(ClosedOn As DATE)= CONVERT(VARCHAR(8),GETDATE(),112) Then 1 Else 0 End),
Sum(Case When Closed=0 And TicketType=8 Then 1 Else 0 End)
From ALBATMStatus.dbo.Ticket
) AS a

Select * From #_Total 
```

拉吉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:15:55.790

正如@Raj 所说，您要么使用`Create`要么`select into`.

然而他错过了`as ALIAS_NAME`。如下：

```
Create Table #_Total
(
A   Int,
B   Int,
C   Int,
D   Int
)

Insert Into #_Total 
Select * From(
Select 
Sum(Case When Closed=0 And ISNULL(VendorTicketNo,'')='' Then 1 Else 0 End) A,
Sum(Case When Closed=1 And TicketType<>8 AND ISNULL(VendorTicketNo,'')<>'' Then 1 Else 0 End) B,
Sum(Case When Closed=1 And CAST(ClosedOn As DATE)= CONVERT(VARCHAR(8),GETDATE(),112) Then 1 Else 0 End) C,
Sum(Case When Closed=0 And TicketType=8 Then 1 Else 0 End) D
From ALBATMStatus.dbo.Ticket
) as q1

Select * From #_Total 
```

# android - 滚动视图和 OnGestureListener

> ID：14934747
> 
> 赞同：1
> 
> 时间：2013-02-18T11:02:18.743
> 
> 标签：android, scrollview, onfling

这是布局 -

```
 <ScrollView>

<RelativeLayout>

    <Layout1>
    </Layout1>

    <Layout2>
    </Layout2>

    <Layout3>
    </Layout3>

    <Layout4>
    </Layout4>

    <Layout5>
    </Layout5>

    <Layout6>
    </Layout6>
</RelativeLayout>
</ScrollView> 
```

我已经在**Activity中实现了****onGestureListener**。我必须检测滑动操作——在各个布局（*布局 1 到布局 6*）上**向上滑动和向下滑动。**由于布局位于滚动**视图**中，因此未检测到滑动动作（**OnFling ）。**如何检测滚动视图的子元素的 onFling **？**任何帮助将不胜感激。

 *********编辑：添加一些代码 -**

这是**活动**-

```
 public class ServiceScreen extends Activity implements OnFocusChangeListener,
    OnTouchListener, OnGestureListener .... 
```

**布局**和**监听**器-

```
RelativeLayout rlCarBrand;
    ....

    rlCarBrand.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            return gestureScanner.onTouchEvent(event);
        }
    }); 
```

重写方法 -

```
@Override
public boolean onFling(MotionEvent arg0, MotionEvent arg1, float arg2,
        float arg3) {
    // TODO Auto-generated method stub
    Log.i("LogMessage", "On Fling");
    return true;
}

@Override
public boolean onDown(MotionEvent arg0) {
    // TODO Auto-generated method stub
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:12:18.977

尝试扩展 ScrollView 类并覆盖这些 onDown 和 onFling。像这样的东西

```
@Override
public boolean onFling(MotionEvent arg0, MotionEvent arg1, float arg2,
    float arg3) {
    super.onFling(arg0,arg1,arg2,arg3);   
    return false;
} 
```

看看这是否有效。

要点是从消耗手势事件的滚动视图方法返回false。谷歌更多。我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T05:33:22.230

创建一个扩展 ScrollView 的 CustomScrollView 类。

有了这个，我们可以改变 Scrollview 的滚动启用属性。

```
public class CustomScrollView extends ScrollView {

    boolean bScrollable = false;

    public CustomScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setScrollingEnabled(boolean enabled) {
        bScrollable = enabled;
    }

    public boolean isScrollable() {
        return bScrollable;
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        switch (ev.getAction()) {
        case MotionEvent.ACTION_DOWN:
            // if we can scroll pass the event to the superclass
            if (bScrollable) {
                return super.onTouchEvent(ev);
            }

            // only continue to handle the touch event if scrolling enabled
            return bScrollable; // mScrollable is always false at this point

        default:
            return super.onTouchEvent(ev);
        }
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        // Don't do anything with intercepted touch events if
        // we are not scrollable
        if (!bScrollable) {
            return false;
        } else {
            return super.onInterceptTouchEvent(ev);
        }
    }

} 
```*******

# c++ - 如何编写替换链式方法调用的可变参数方法？

> ID：14934749
> 
> 赞同：7
> 
> 时间：2013-02-18T11:02:23.387
> 
> 标签：c++, templates, c++11, variadic-functions

**我正在研究一个递归地图类`group_by`，它对 SQL 同名进行建模。**

例如， gb 是一个`group_by`对象，它将按顺序存储指向`foo`按`std::string`、`int`和`char`键类型分组的指针。

```
group_by<foo,std::string,int,char>  gb; 
```

`group_by`提供了一个`at( I const& key )`访问器方法，可用于查看当前关卡地图。链接`at()`调用以检索更深的地图工作正常。

```
auto& v = gb.at( k1 ).at( k2 ).at( k3 ).get_vec(); 
```

**问题**

*我想创建一个`at()`被调用的替代方法，`at_variadic( Args const& ...args )`它可以在一次调用中检索更深层的地图，而无需链接。*

```
auto& w = gb.at_variadic( k1, k2 );
auto& x = gb.at_variadic( k1, k2, k3 ); 
```

但是，我遇到了一些问题。首先，我不知道如何指定返回类型，因为它取决于可变参数。也许使用`decltype()`，不知何故？

**工作答案**

[Ecatmur 在下面的回答](https://stackoverflow.com/a/14935360/975129)概述了一个好方法。

我不得不使用终端案例`group_by<>`来让编译器满意，但是下面的代码很大程度上基于 Ecatmur 的回答，似乎在 gcc 4.7.2 上工作得很好。

```
#include <cassert>
#include <map>
#include <vector>
#include <iostream>

template< typename T, typename... Args >
struct group_by
{
    using child_type = T;

    std::vector<T*>  m_vec;

    void insert( T* t ) 
    {
        m_vec.push_back( t );
    }

    child_type&
    at( size_t i )
    {
        return *m_vec[i];
    }
};

template< typename T, typename I, typename... Args >
struct group_by<T,I,Args...>
{  
    using child_type = group_by<T,Args...>;

    std::map<I,child_type>  m_map;

    void insert( T* t ) 
    {
        m_map[ *t ].insert( t );
    }

    child_type& at( I const& key ) 
    {
    return m_map.at( key );
    }

    template<typename... Ks>
    auto
    at( I const& i, Ks const&...ks )
    -> decltype( m_map.at( i ).at( ks... ) )
    {
        return m_map.at( i ).at( ks... );
    }
};

// -----------------------------------------------------------------------------

struct foo
{
    std::string  s;
    int          i;
    char         c;

    operator std::string() const { return s; }
    operator int        () const { return i; }
    operator char       () const { return c; }

    bool operator==( foo const& rhs ) const
    {
        return s==rhs.s && i==rhs.i && c==rhs.c;
    }
};

int main( int argc, char* argv[] )
{
    foo f1{ "f1", 1, 'z' };
    foo f2{ "f2", 9, 'y' };
    foo f3{ "f3", 3, 'x' };
    foo f4{ "f1", 4, 'k' };

    group_by<foo,std::string,int,char>  gb;

    gb.insert( &f1 );
    gb.insert( &f2 );
    gb.insert( &f3 );
    gb.insert( &f4 );

    std::string k1{ "f1" };
    int         k2{ 1    };
    char        k3{ 'z'  };

    auto& a = gb.at( k1 ).at( k2 ).at( k3 ).at( 0 );
    auto& b = gb.at( k1 ).at( k2 ).m_map;
    auto& c = gb.at( k1 ).m_map;
    auto& d = gb.at( k1, k2 ).m_map;
    auto& e = gb.at( k1, k2, k3 ).m_vec;
    auto& f = gb.at( k1, k2, k3, 0 );

    assert( a==f1 );
    assert( b.size()==1 );
    assert( c.size()==2 );
    assert( d.size()==1 );
    assert( e.size()==1 );
    assert( f==f1 );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:35:55.320

链式方法调用本质上是递归的，所以需要`at`递归实现：

```
child_type& at( I const& key ) {
    return m_map.at( key );
}

template<typename J, typename... Ks>
auto at(const I &i, const J &j, const Ks &...ks)
-> decltype(m_map.at(i).at(j, ks...)) {
    return m_map.at(i).at(j, ks...);
} 
```

请注意，由于`at`至少需要 1 个参数，因此可变参数形式至少需要 2 个参数。这比在 上调度要容易得多`sizeof...`，并且应该更容易阅读。

# xcode - SVN + Dropbox：在 Windows 和 Mac 上同步项目

> ID：14934756
> 
> 赞同：1
> 
> 时间：2013-02-18T11:02:52.303
> 
> 标签：xcode, windows, svn, osx-lion, dropbox

我是 SVN 的新手，所以请耐心等待我的（也许很奇怪）的问题。

我一直在使用 Tortoise 和 WAMP 在 Windows 7 上使用 SVN 开发一个项目，以便在我的本地机器上进行开发。

由于所有项目都在我的 Dropbox 文件夹中，我想知道是否有办法在我不在家时（使用 xCode 或其他方式）在我的带有 OSX Lion 的 Mac 笔记本电脑上工作，并保持两个系统的一致性。

我在网上阅读了有关在几台 Mac 上将 xcode 项目与 dropbox 同步的信息，但是可以在 windows 和 osx 之间完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:15:49.830

SVN 的想法是您有一个将代码推送到的主机。该主机运行一个 svn 服务器，它管理您的代码并能够将代码分发给多个客户端并接受来自这些客户端的更改。因此，如果您在某处有 SVN 服务器，则根本不需要使用 DropBox - 只需从 Mac 上的服务器中签出您的代码，您就可以使用它并将更改推送到您的服务器。在您的 Windows 系统上，您只需更新您的副本并获取您从 Mac 推送的最新更改。

但是，如果您使用的是本地 SVN 服务器，该服务器将您的存储库存储在您的 Dropbox 文件夹中，情况会有所不同。首先要说的是：我永远不会那样做。第二件事：你必须在你的 OSX 系统上配置一个 SVN 服务器，以使用你的 Dropbox 文件夹中的存储库，就像你在 Windows 系统上配置的服务器一样。如果我需要使用这样的设置，我永远不会使用 SVN。像 git 或 Mercurial 这样的去中心化版本控制系统更适合处理此设置，因为您不需要运行服务器 - 您只需在 DropBox 文件夹和本地副本之间同步即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:15:28.503

为什么不使用 git？如果您是新手，请不要费心学习过时的东西。

请注意，每次从该计算机保存时，不同的 IDE（OSX 上的 XCode 与您在 Win7 上使用的任何东西）可能会破坏您的行尾。

Git 对这类问题有很好的支持：Git [最好的 CRLF（回车、换行）处理策略是什么？](https://stackoverflow.com/questions/170961/whats-the-best-crlf-handling-strategy-with-git)

最后，我不确定您希望如何在两个不同的构建系统之间“共享”该项目。

如果您有适用于 Windows 构建的 Makefile，则可以将其设为跨平台的。看到这个： [makefile 自定义函数](https://stackoverflow.com/questions/9346147/makefile-custom-functions)

# javascript - 在 JavaScript 数组中存储形状以在某些操作后重绘

> ID：14934759
> 
> 赞同：1
> 
> 时间：2013-02-18T11:02:57.493
> 
> 标签：javascript, html5-canvas

我正在用 html5 开发一个编辑器。我有用于在单击时创建形状的按钮，包括三角形、矩形、六边形、五边形、七边形、线条等。现在我还想对这些形状执行操作，例如旋转、翻转、撤消、重做等。我想将这些绘制的对象保存在 JavaScript 数组或其他东西中，以便在对画布执行操作后创建它们，因为单个形状无法在画布中旋转或翻转，我们必须重新绘制它。我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:52:25.303

正如您所说，您必须在更改形状时清除上下文并重新绘制形状。清除和重绘所有上下文不是强制性的，您只需重绘修改形状的区域即可。

因此，您必须将您的形状视为具有自己的属性和渲染方法的对象（以 OOP 方式）。我要做的是创建另一个类来对形状应用变换（翻转只是-1 比例）。

如果你这样做，它可能会成为一项巨大的工作（你添加的功能越多，你的代码就越复杂，并且你的应用程序的第一个设计可能会在工作期间重新考虑）。我可以向您建议的是使用已经完成这项工作的框架。

例如，[cgSceneGraph](http://gwennaelbuchet.github.com/cgSceneGraph/)旨在让开发人员添加自己的渲染方法，并提供了很多方法来操作它们。我是框架的设计者，请随时询问有关如何应用转换或创建自己的节点的更多信息（教程和示例已经在网站上，但我会为您提供帮助）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:09:17.753

我有一个项目，如果你点击一个矩形的图像，你可以画一个矩形，点击一个椭圆然后你可以画一个椭圆。我的形状存储为对象，然后使用 Canvas 绘制并且可以翻转、旋转等我还没有实现撤消重做。

我的项目在[http://canvimation.github.com/](http://canvimation.github.com/)

我的项目的源代码位于[https://github.com/canvimation/canvimation.github.com](https://github.com/canvimation/canvimation.github.com)

master 分支是当前的工作代码。欢迎您使用任何代码或分叉项目。

# javascript - Internet Explorer 的 drop 事件

> ID：14934761
> 
> 赞同：0
> 
> 时间：2013-02-18T11:03:03.393
> 
> 标签：javascript, jquery, internet-explorer

我想通过 drop 事件获取外部文件。我像这样覆盖了默认事件：

```
 $(document).on("dragover drop", function(e) {
      e.preventDefault();
    } 
```

效果很好。

但是当我添加一个新`drop`事件时它不会触发

```
$('div#dropzone').on("drop", function(e) {
   console.log("drop");
   console.log(e.dataTransfer.files);
} 
```

# drupal-7 - 如何在自定义模块中使用 node_save() 和 node_autotitle 模块保存节点？

> ID：14934762
> 
> 赞同：0
> 
> 时间：2013-02-18T11:03:05.133
> 
> 标签：drupal-7, nodes

我正在编写一个 Drupal 自定义模块，在其中我根据自定义值创建一个节点。这是以适当方式创建节点的代码。

```
global $user;
$node = new stdClass();
$node->type = 'my_node_type';
//$node->title  = $nodeInfo->title;
node_object_prepare($node);
$node->language = LANGUAGE_NONE;
$node->uid = $user->uid;    
$node->field_node_refrence_field['und'][0]['nid'] = $nid-of-reference-field;
$node = node_submit($node); 
node_save($node); 
```

我为此内容类型启用了节点自动标题模块。因此，标题显示为空白。我检查了模块，发现`auto_nodetitle_set_title($node)`设置了标题。当我在我的代码中使用这个函数时，什么都没有发生。

谁能给我一个关于如何使用 node_autotitle 设置保存节点的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:34:37.883

从[auto_nodetile_set_title()](http://drupalcontrib.org/api/drupal/contributions!auto_nodetitle!auto_nodetitle.module/function/auto_nodetitle_set_title/7)执行的代码如下。（识别部分代码的注释是我的。）

```
 $types = node_type_get_types();
  $pattern = variable_get('ant_pattern_' . $node->type, '');

  // (1)
  if (trim($pattern)) {
    $node->changed = REQUEST_TIME;
    $node->title = _auto_nodetitle_patternprocessor($pattern, $node);
  }

  // (2)
  elseif ($node->nid) {
    $node->title = t('@type @node-id', array('@type' => $types[$node->type]->name, '@node-id' => $node->nid));
  }

  // (3)
  else {
    $node->title = t('@type', array('@type' => $types[$node->type]->name));
  }
  // Ensure the generated title isn't too long.
  $node->title = substr($node->title, 0, 255);
  // With that flag we ensure we don't apply the title two times to the same
  // node. See auto_nodetitle_is_needed().
  $node->auto_nodetitle_applied = TRUE; 
```

如果该内容类型的标题有设置，则执行第一个控制语句。如果没有，并且您正在更新模块，则执行第二个控制语句，否则执行第三个控制语句。

标题永远不应该为空，因为模块总是设置它。唯一可能为空的情况是 Drupal 没有关于用于节点的内容类型的信息；在这种情况下`$types[$node->type]`将为 NULL，但`$types[$node->type]->name`会引发错误“尝试访问非对象的属性”。

我将使用以下代码来保存节点。

```
global $user;

$node = new stdClass();
$node->type = 'my_node_type';
node_object_prepare($node);

$node->uid = $user->uid;    

$node->language = LANGUAGE_NONE;
$node->field_node_refrence_field[$node->language][0]['nid'] = $nid-of-reference-field;

$node = node_submit($node); 
node_save($node);
auto_nodetitle_set_title($node);
node_save($node); 
```

由于您正在保存一个新节点，因此调用`auto_nodetitle_set_title()`before`node_save()`将不允许该函数执行标有 (2) 的代码，并使用节点 ID 作为标题。一旦`auto_nodetitle_set_title()`被调用，您需要调用`node_save()`以保存新标题。

# mysql - MySQL选择类似路径的位置

> ID：14934763
> 
> 赞同：0
> 
> 时间：2013-02-18T11:03:06.670
> 
> 标签：mysql, select, where, sql-like

将 wordpress 项目设置为其暂存环境，我遇到了一个关于为开发环境设置的路径的问题，并且不适合暂存环境。

所以我需要更新数据库中的路径，从`C:\xampp\htdocs\site.com`到`/var/www/site.com`

起初，我尝试替换，就像替换网址一样：

```
update `wp_slider` set `url` = replace(`url`, 'http://local.', 'http://'); 
```

然后路径：

```
update `wp_slider` set `path` = replace(`path`, 'C:\xampp\htdocs\site.com', '/var/www/site.com'); 
```

这实际上没有用。然后我尝试`SELECT`查看可以检索哪些行：

```
SELECT * FROM `wp_slider` WHERE `path` LIKE "%C:\xampp\htdocs\site.com%" 
```

这将返回一个空结果。我错过了什么？

忘了提，我试图`\`通过做来逃避`\\`，但我仍然没有得到任何结果

我要替换的完整路径如下：`C:\xampp\htdocs\site.com/wp-content/plugins/slider/skins/slider\circle\circle.css`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:06:32.453

您需要转义反斜杠：`\\`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:14:02.607

这大致是要走的路：

```
mysql> SELECT REPLACE('C:\\xampp\\htdocs\\site.com\\foo\\bar.txt', 'C:\\xampp\\htdocs\\site.com', '/var/www/site.com');
+----------------------------------------------------------------------------------------------------------+
| REPLACE('C:\\xampp\\htdocs\\site.com\\foo\\bar.txt', 'C:\\xampp\\htdocs\\site.com', '/var/www/site.com') |
+----------------------------------------------------------------------------------------------------------+
| /var/www/site.com\foo\bar.txt                                                                            |
+----------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> 
```

如果您得到零匹配，那是因为您的数据库记录不包含您认为的内容。确保没有空格或控制字符。如果您的 MySQL 客户端无法轻松发现此类情况，您可以随时使用`HEX()`：

```
SELECT path, HEX(path)
FROM wp_slider
WHERE path NOT LIKE "C:\\xampp\\htdocs\\site.com%" 
```

此外，我不完全确定您可以`\`在 Unix 系统中用作路径分隔符。我建议你也更换它：

```
UPDATE wp_slider
SET path = replace(path, '\\', '/')
WHERE path IS NOT NULL 
```

**更新：**

我要解释的是您的程序基本上是正确的（除了转义`\`并不总是可选的）：

```
mysql> CREATE TABLE wp_slider(
    -> path VARCHAR(2083)
    -> );
Query OK, 0 rows affected (0.06 sec)

mysql> INSERT INTO wp_slider (path) VALUES ('C:\\xampp\\htdocs\\site.com/wp-content/plugins/slider/skins/slider\\circle\\circle.cs
s');
Query OK, 1 row affected (0.04 sec)

mysql> UPDATE wp_slider SET path=REPLACE(path, 'C:\\xampp\\htdocs\\site.com', '/var/www/site.com');
Query OK, 1 row affected (0.03 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> SELECT * FROM wp_slider;
+----------------------------------------------------------------------------+
| path                                                                       |
+----------------------------------------------------------------------------+
| /var/www/site.com/wp-content/plugins/slider/skins/slider\circle\circle.css |
+----------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

如果您没有得到匹配，那是因为您的数据库包含的数据与您想象的不同，例如（但不限于）空格或控制字符：

```
mysql> TRUNCATE TABLE wp_slider;
Query OK, 0 rows affected (0.03 sec)

mysql> INSERT INTO wp_slider (path) VALUES ('C:\xampp\htdocs\site.com/wp-content/plugins/slider/skins/slider\circle\circle.css');
Query OK, 1 row affected (0.02 sec)

mysql> UPDATE wp_slider SET path=REPLACE(path, 'C:\\xampp\\htdocs\\site.com', '/var/www/site.com');
Query OK, 0 rows affected (0.00 sec)
Rows matched: 1  Changed: 0  Warnings: 0

mysql> SELECT * FROM wp_slider;
+------------------------------------------------------------------------------+
| path                                                                         |
+------------------------------------------------------------------------------+
| C:xampphtdocssite.com/wp-content/plugins/slider/skins/slidercirclecircle.css |
+------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

In this last example, we forgot to escape `\` when **inserting** and as a result we don't get a match when replacing because the input data is not what we thought it was.

# c++ - Errors with a Template in C++ regarding operators

> ID：14934764
> 
> 赞同：0
> 
> 时间：2013-02-18T11:03:06.310
> 
> 标签：c++

In my project, I am using a header file for an arrayList. During the main method, I initialize an object of type arrayList where FriendToken is another class defined in my project. However, this gives me quite a few errors while compiling arrayList.h. Apparently, I cannot use the built-in copy method and the operator == is unrecognized for an object of type FriendToken. Should I overload the == operator for FriendToken and if so, how should I do that?

Both errors are marked in the body ArrayList.h.

ArrayList.h:

```
#ifndef arrayList_h
#define arrayList_h

#include "linearList.h"

#include <iostream>
#include <fstream>
#include <ostream>

using namespace std;
template<class T>
class arrayList : public linearList<T> 
{
public:
    // constructor, copy constructor and destructor
    arrayList(int initialCapacity = 10);
    arrayList(const arrayList<T>&);
    ~arrayList() {delete [] element;}
    // ADT methods
    bool empty() const {return listSize == 0;}
    int size() const {return listSize;}
    T& get(int theIndex) const;
    int indexOf(const T& theElement) const;
    void erase(int theIndex);
    void insert(int theIndex, const T& theElement);
    void output(ostream& out) const;
    void changeLength1D(T*& a, int oldLength, int newLength);
    // additional method
    int capacity() const {return arrayLength;}
protected:
    void checkIndex(int theIndex) const;
    // throw illegalIndex if theIndex invalid
    T* element;      // 1D array to hold list elements
    int arrayLength;       // capacity of the 1D array
    int listSize;          // number of elements in list
};
template<class T> 
arrayList<T>::arrayList(int initialCapacity)
{
    // Constructor.
    arrayLength = initialCapacity;
    element = new T[arrayLength];
    listSize = 0;
}
template<class T>
arrayList<T>::arrayList(const arrayList<T>& theList)
{
    // Copy constructor.
    arrayLength = theList.arrayLength;
    listSize = theList.listSize;
    element = new T[arrayLength];
    copy(theList.element, theList.element + listSize, element); 
}
template<class T>
void arrayList<T>::checkIndex(int theIndex) const
{
    // Verify that theIndex is between 0 and 
    // listSize - 1.
    if (theIndex < 0 || theIndex >= listSize)
    {
        cout << "index = " << theIndex << " size = " 
            << listSize;
    } 
}
template<class T>
T& arrayList<T>::get(int theIndex) const
{
    // Return element whose index is theIndex.
    // Throw illegalIndex exception if no such
    // element.
    checkIndex(theIndex);
    return element[theIndex];
}
template<class T>
int arrayList<T>::indexOf(const T& theElement)const
{
    // Return index of first occurrence of theElement.
        // search for theElement
        int theIndex = (int) (find(element, element
        + listSize, theElement) - element);
    // check if theElement was found
    if (theIndex == listSize)
        return -1; // not found
    else return theIndex; 
}
template<class T>
void arrayList<T>::erase(int theIndex)
    {// Delete the element whose index is theIndex.
    checkIndex(theIndex);
    // valid index, shift elements with higher index
//PROBLEM********************************************
    copy(element + theIndex + 1, element + listSize,element + theIndex);
    element[--listSize].~T(); // invoke destructor
}
template<class T>
void arrayList<T>::insert(int theIndex, const T& theElement)
{
    // Insert theElement.
    if (theIndex < 0 || theIndex > listSize)

    {// invalid index
        // code to throw an exception comes here
    }
    // valid index, make sure we have space
    if (listSize == arrayLength)
    {
        // no space, double capacity
        changeLength1D(element, arrayLength, 
        2 * arrayLength);
        arrayLength *= 2;
    }
    // shift elements right one position
//PROBLEM***************************************
    copy_backward(element + theIndex, element + listSize, element + listSize + 1);
    element[theIndex] = theElement;
    listSize++;
}
template<class T>
void arrayList<T>::output(ostream& out) const
{
    // Put the list into the stream out.
    copy(element, element + listSize, ostream_iterator<T>(out, "  ")); 
}
template <class T>
ostream& operator<<(ostream& out, const arrayList<T>& x)
{x.output(out); return out;}

template<class T>
void changeLength1D(T*& a, int oldLength, int newLength)
{
    if (newLength < 0)
        throw illegalParameterValue();
    T* temp = new T[newLength];     
    // new array
    int number = min(oldLength, newLength); 
    // number to copy
    copy(a, a + number, temp);
    delete [] a;                    
    // deallocate old memory
    a = temp;
}

#endif 
```

FriendToken.h

```
#ifndef FriendToken_h
#define FriendToken_h

#include <string>

using namespace std; 

class FriendToken
{
private:
    string birthDate, name, homeTown;
public:
    FriendToken(string birthDate = "01/01", string name = "John, Smith", string homeTown = "New York");
    string getBirthDate();
    string getName();
    string getHomeTown();
    bool equals(FriendToken a);
};

#endif 
```

FriendToken.cpp

```
#include "FriendToken.h"
#include <string>

using namespace std;

FriendToken::FriendToken(string birthDate, string name, string homeTown)
{
    this->birthDate = birthDate;
    this->name = name;
    this->homeTown = homeTown;
}
string FriendToken::getBirthDate()
{
    return birthDate;
}
string FriendToken:: getName()
{
    return name;
}
string FriendToken::getHomeTown()
{
    return homeTown;
}
bool FriendToken::equals(FriendToken a)
{
    return (name == a.getName()) && (homeTown == a.getHomeTown()) && (birthDate == a.getBirthDate());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:59:10.813

It's hard to tell without the compiler errors.

Either way, this is how you overload the operator.

```
template<typename T>
bool arrayList::operator== (const arrayList<T>& theList) 
{
    // Compare the values, and return a bool result.
} 
```

# spring-roo - Spring Roo 在哪里保存它的信息？

> ID：14934767
> 
> 赞同：0
> 
> 时间：2013-02-18T11:03:21.950
> 
> 标签：spring-roo

我想知道的是*Spring roo在执行诸如**topLevelPackage*之类的命令后将执行属性存储在何处。我知道有一个*log.roo*文件列出了所有执行的命令，但这绝对不是*roo在任何文件或包修改期间从上面提到的**topLevelPackage*读取其属性的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:18:50.150

据我了解，roo 不会在任何 roo 特定文件中存储任何信息。而是在实际项目文件中查找信息。例如，从 pom.xml 推断出 topLevelPackage。有一些例外，例如 dbre 模块确实保留了一个 xml 文件。

# css - 水平和垂直方向的 CSS webkit flex 布局

> ID：14934769
> 
> 赞同：1
> 
> 时间：2013-02-18T11:03:29.917
> 
> 标签：css, google-chrome, flexbox

请注意，我只需要为我正在使用的嵌入式设备在 Chrome 中使用它。另外请不要给出任何基于浮点数、表格、内联块等的解决方案——我只对 CSS flex 答案感兴趣。

也就是说，我的标记如下：

```
<div class="wrap">
    <div class="a">red</div>
    <div class="b">blue</div>
    <div class="c">green</div>
</div> 
```

和CSS：

```
.wrap { display: -webkit-flex; height: 100%; }
.a { -webkit-flex: 1; max-width: 100px; background: red; }
.b { -webkit-flex-flow: row; -webkit-flex-direction: row; -webkit-flex: 1; background: blue; }
.c { -webkit-flex-flow: row; -webkit-flex-direction: row; -webkit-flex: 1; background: green; } 
```

我想要实现的布局是：

```
______________
|red |blue   |
|    |_______|
|    |green  |
|    |       |
|____|_______| 
```

红框的高度应为 100%，最大宽度为 100px；蓝色和绿色框组合的高度应为 100%。谁能告诉我如何使用-webkit-flex来实现这一点？你可以看到我尝试过使用 flex flow 和 flex direction 无济于事。

我用代码创建了一个 JSBin 链接：http: [//jsbin.com/usisic/3/edit](http://jsbin.com/usisic/3/edit)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:46:44.043

```
 .wrap { display: -webkit-flex; max-width: 200px; height:200px; -webkit-flex-flow: column wrap;}
.a .b .c {
    max-width: 100px;
  -webkit-flex: 1;
}

.a {
  height:200px;
  background: red;
}

.b {
  background: blue;
  height:50%;
}

.c {
  background: green;
  height:50%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:27:32.880

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta charset=utf-8 />
    <title>nested flex</title>
    </head>
    <body>
      <div class="wrap">
        <div class="a">red</div>
        <div class="nested">
        <div class="b">blue</div>
        <div class="c">green</div>
      </div>
    </div>
</body>
</html>
.wrap { display: -webkit-flex; height: 50px; -webkit-flex-direction: row; -webkit-flex-flow: row; -webkit-flex-wrap: wrap;}
.a { -webkit-flex:1; max-width: 100px;background: red;}
.b { background: blue; height:40%; padding-bottom:5px;}
.c { background: green; height:40%; padding-bottom:5px;}
.nested {-webkit-flex:1; max-width: 50px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T01:01:02.030

## 弹性盒解决方案

我很难让其他答案按预期工作。该解决方案不需要设置高度——响应可变数量的内容。

```
html, body {height: 100%; }

.wrap {
  display: flex;
  flex-direction: column;
  flex-wrap: wrap;
  height: 100%;
}

.a {
  height: 100%;
  max-width: 100px;
}

.b, .c {
  width: 100%;
  flex-grow: 1;
}

.a { background: red; }
.b { background: blue; }
.c { background: green; }
```

```
<div class="wrap">
  <div class='a'>red</div>
  <div class='b'>blue</div>
  <div class='c'>green</div>
</div>
```

# java - 如何在jsp中获取java类对象值

> ID：14934770
> 
> 赞同：0
> 
> 时间：2013-02-18T11:03:31.543
> 
> 标签：java, jsp

我有一个 java 类**Main.java**我正在计算变量中的和和差，比如

```
int sum = a+b;
int diff = a-b; 
```

`a`并且`b`是通过 Hibernate 来自数据库的值。现在我想在 JSP 上显示 sum 和 diff 值。请帮助我将 java 类**Main.java**中的 sum 和 diff 值带到 jsp。请给出 sum 示例代码。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:09:37.803

在 Servlet / JSP 中实例化您的 Main.java

将它放在一个范围内：`session`或`request`

```
like request.setAttribute("myMain",main); 
```

在 jsp usinh 中访问

```
Main myMain = (Main)request.getAttribute("myMain");

myMain.getSum() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:35:14.033

如果你想使用 JSTL 路由

```
<c:out value="${myMain.sum}"/> 
```

# netty - Netty Beta1 上的奇怪行为

> ID：14934773
> 
> 赞同：0
> 
> 时间：2013-02-18T11:03:43.363
> 
> 标签：netty

之前，我们使用 Netty 4.0.0.Alpha7 开发我们的 Websocket 应用程序，一切正常。Netty 4.0.0.Beta1 发布后，我们将它们合并到我们的应用程序中。但是，没有客户端可以连接到应用程序。最初，我认为这是我们的问题，所以我们从 github 获取了 websocket 示例，但它也不起作用。

奇怪的是，当我们在本地机器上运行时，我们的应用程序和示例可以正常工作，但是一旦部署到我们的服务器上，它就无法工作。当我们在同一台服务器上回滚到 Netty Alpha7 时，它又可以正常工作了。有没有人遇到过这种问题？

这是我在我们的服务器（Linux）中运行 Websocket 示例时发现的异常。当我在本地机器（Windows7）上运行时没有发现这个异常

```
io.netty.channel.ChannelPipelineException: io.netty.buffer.IllegalBufferAccessException
    at io.netty.channel.DefaultChannelPipeline.notifyHandlerException(DefaultChannelPipeline.java:1019)
    at io.netty.channel.DefaultChannelHandlerContext.freeHandlerBuffersAfterRemoval(DefaultChannelHandlerContext.java:360)
    at io.netty.channel.DefaultChannelHandlerContext.invokeInboundBufferUpdated(DefaultChannelHandlerContext.java:962)
    at io.netty.channel.DefaultChannelHandlerContext.fireInboundBufferUpdated0(DefaultChannelHandlerContext.java:926)
    at io.netty.channel.DefaultChannelHandlerContext.fireInboundBufferUpdated(DefaultChannelHandlerContext.java:904)
    at io.netty.channel.DefaultChannelPipeline.fireInboundBufferUpdated(DefaultChannelPipeline.java:909)
    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:115)
    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:401)
    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:365)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:302)
    at io.netty.channel.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:110)
    at java.lang.Thread.run(Thread.java:619)
Caused by: io.netty.buffer.IllegalBufferAccessException
    at io.netty.buffer.AbstractReferenceCountedByteBuf.release(AbstractReferenceCountedByteBuf.java:81)
    at io.netty.channel.ChannelInboundByteHandlerAdapter.freeInboundBuffer(ChannelInboundByteHandlerAdapter.java:46)
    at io.netty.channel.DefaultChannelHandlerContext.freeHandlerBuffersAfterRemoval(DefaultChannelHandlerContext.java:358)
    ... 10 more
io.netty.channel.ChannelPipelineException: io.netty.buffer.IllegalBufferAccessException
    at io.netty.channel.DefaultChannelPipeline.notifyHandlerException(DefaultChannelPipeline.java:1019)
    at io.netty.channel.DefaultChannelHandlerContext.freeHandlerBuffersAfterRemoval(DefaultChannelHandlerContext.java:360)
    at io.netty.channel.DefaultChannelHandlerContext.invokeChannelInactive(DefaultChannelHandlerContext.java:823)
    at io.netty.channel.DefaultChannelHandlerContext.access$1300(DefaultChannelHandlerContext.java:38)
    at io.netty.channel.DefaultChannelHandlerContext$5.run(DefaultChannelHandlerContext.java:808)
    at io.netty.channel.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:259)
    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:305)
    at io.netty.channel.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:110)
    at java.lang.Thread.run(Thread.java:619)
Caused by: io.netty.buffer.IllegalBufferAccessException
    at io.netty.buffer.AbstractReferenceCountedByteBuf.release(AbstractReferenceCountedByteBuf.java:81)
    at io.netty.channel.ChannelInboundByteHandlerAdapter.freeInboundBuffer(ChannelInboundByteHandlerAdapter.java:46)
    at io.netty.channel.DefaultChannelHandlerContext.freeHandlerBuffersAfterRemoval(DefaultChannelHandlerContext.java:358)
    ... 7 more 
```

> 更新，看来这是java版本的问题。最初，java 版本是 6u17，应用程序无法运行。将其更新到 6u38 后，应用程序运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:28:53.487

好的，我想您在从 ChannelPipeline 中删除 ChannelHandler 后尝试访问缓冲区。这是不允许的，因为 Beta1 以确保我们在删除时不会泄漏任何内存。如果要删除 ChannelHandler 并将缓冲区中的剩余内容转发到 ChannelPipeline 中的下一个 ChannelHandler ，请使用 ChannelPipeline.removeAndForward(..) 。

另见： [https ://github.com/netty/netty/issues/1054#issuecomment-13760528](https://github.com/netty/netty/issues/1054#issuecomment-13760528)

# c++ - 人脸检测不起作用

> ID：14934780
> 
> 赞同：1
> 
> 时间：2013-02-18T11:04:09.570
> 
> 标签：c++, opencv, face-detection

我在带有 VS2010 (C++) 的 64 位 Win 7 上使用 OpenCV。

我已经尝试了很多用于检测面部的源代码，它们编译并运行，但没有进行检测。

我将举两个例子：1）在第一个例子中，我使用的源代码来自：

[http://www.bsd-noobz.com/opencv-guide/60-3-face-detection](http://www.bsd-noobz.com/opencv-guide/60-3-face-detection)

我得到了图片，但不是正方形。

2）在第二个例子中，我使用的是我之前下载的代码（不记得从哪里下载的）。这个显示来自网络摄像头的流，并且再次没有检测到。

```
#include "stdafx.h"
#include "opencv2/objdetect/objdetect.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"

#include <iostream>

using namespace std;
using namespace cv;

 /** Function Headers */
 void detectAndDisplay2( Mat frame );

 /** Global variables */
 String face_cascade_name = "haarcascade_frontalface_alt.xml";
 String eyes_cascade_name = "haarcascade_eye_tree_eyeglasses.xml";
 CascadeClassifier face_cascade;
 CascadeClassifier eyes_cascade;

//RNG rng(12345);

 /** @function main */
 int main()
 {
   CvCapture* capture;
   Mat frame;

   //-- 1\. Load the cascades
   if( !face_cascade.load( face_cascade_name ) ){ printf("--(!)Error loading face cascade\n"); return -1; };
   if( !eyes_cascade.load( eyes_cascade_name ) ){ printf("--(!)Error loading eye cascade\n"); return -1; };

   //-- 2\. Read the video stream
   capture = cvCaptureFromCAM( 1 );
   if( capture )
   {
     while( true )
     {
   frame = cvQueryFrame( capture );

   //-- 3\. Apply the classifier to the frame
       if( !frame.empty() )
       { detectAndDisplay2( frame ); }
       else
       { printf(" --(!) No captured frame -- Break!"); break; }

       int c = waitKey(10);
       if( (char)c == 'c' ) { break; }
      }
   }
   cvReleaseCapture(&capture);
   cvDestroyWindow("Capture - Face detection");

   return 0;
 }

/** @function detectAndDisplay */
void detectAndDisplay2( Mat frame )
{
  vector<Rect> faces;
  Mat frame_gray;

  cvtColor( frame, frame_gray, CV_BGR2GRAY );
  equalizeHist( frame_gray, frame_gray );

  //-- Detect faces
  face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30, 30) );

  for( int i = 0; i < faces.size(); i++ )
  {
    Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 );
    ellipse( frame, center, Size( faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360, Scalar( 255, 0, 255 ), 4, 8, 0 );

    Mat faceROI = frame_gray( faces[i] );
    vector<Rect> eyes;

    //-- In each face, detect eyes
    eyes_cascade.detectMultiScale( faceROI, eyes, 1.1, 2, 0 |CV_HAAR_SCALE_IMAGE, Size(30, 30) );

    for( int j = 0; j < eyes.size(); j++ )
     {
       Point center( faces[i].x + eyes[j].x + eyes[j].width*0.5, faces[i].y + eyes[j].y + eyes[j].height*0.5 );
       int radius = cvRound( (eyes[j].width + eyes[j].height)*0.25 );
       circle( frame, center, radius, Scalar( 255, 0, 0 ), 4, 8, 0 );
     }
  }
  //-- Show what you got
  imshow( "Processed", frame_gray );
  imshow( "Capture - Face detection", frame );

 } 
```

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-08T17:37:26.567

这是[github](https://github.com/trishume/eyeLike)`opencv`中的一个项目。这个错误源于我可以看到的两个问题。

1) 确保您安装了正确的 OpenCV 版本。我建议这个[安装指南](http://www.samontab.com/web/2014/06/installing-opencv-2-4-9-in-ubuntu-14-04-lts/)……它对我很有效。

2）然后，确保您已添加`haarcascade_frontalface_alt.xml`到可执行文件的内部——它应该在`../build/bin/haarcascade_frontalface_alt.xml`您构建项目时的文件夹中）。

# scala - Akka 2.1 最小远程actor示例

> ID：14934782
> 
> 赞同：7
> 
> 时间：2013-02-18T11:04:13.027
> 
> 标签：scala, akka, actor, remote-actors

**编辑**通知，我需要对此[https://github.com/akka/akka/commit/ce014ece3568938b2036c4ccfd21b92faba69607#L13L6](https://github.com/akka/akka/commit/ce014ece3568938b2036c4ccfd21b92faba69607#L13L6)进行反向更改，以使接受的答案与 AKKA 2.1 一起工作，这是在 akkas 主页上找到的稳定分布！

* * *

我已经阅读了我可以在 AKKA 上找到的所有教程，但没有发现任何“开箱即用”的作品。

使用 eclipse，我想创建 2 个程序。

Program1：启动演员“joe”并以某种方式使其在 127.0.0.1:some_port 上可用

Program2：在 127.0.0.1:some_port 获得对演员“joe”的引用。向“joe”发送问候消息。

程序 1 应该在收到消息时打印一些东西。我想使用 AKKA 2.1 在 Eclipse 中运行这个示例。有人可以列出 2 个程序（程序 1 和程序 2）以及执行此操作的工作 application.conf 文件吗？

* * *

**编辑>** 让我告诉你我到目前为止得到了什么：

**演员**

```
case class Greeting(who: String) extends Serializable

class GreetingActor extends Actor with ActorLogging {
  def receive = {
    case Greeting(who) ⇒ println("Hello " + who);log.info("Hello " + who)
  }
} 
```

**程序1**：

```
package test

import akka.actor.ActorSystem

object Machine1 {

  def main(args: Array[String]): Unit = {
    val system = ActorSystem("MySystem")
  }

} 
```

**程序2**

```
package test

import akka.actor.ActorSystem
import akka.actor.Props
import akka.actor.actorRef2Scala

object Machine2 {
  def main(args: Array[String]): Unit = {
    val system = ActorSystem("MySystem")
    val greeter = system.actorOf(Props[GreetingActor], name = "greeter")
    greeter ! Greeting("Felix")
  }
} 
```

**应用程序.conf**

```
akka {
  actor {
    deployment {
      /greeter {
        remote = "akka://MySystem@127.0.0.1:2553"
      }
    }
  }
} 
```

但是，当我仅启动 Program2 并输出时，该程序有效：

```
Hello Felix
[INFO] [02/18/2013 12:27:29.999] [MySystem-akka.actor.default-dispatcher-2] [akka://MySystem/user/greeter] Hello Felix 
```

似乎它没有接收我的 application.conf。我尝试将它放在我的 Eclipse 项目的 ./src/ 和 ./ 文件夹中。没有不同。另外，我知道这确实是降级部署，但我只需要一个 hello world 程序即可使用 AKKA。我在这方面花了很多时间，却没有得到一个简单的工作应用程序。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-12T17:13:16.247

Akka 2.2.3 更新

可以创建一个最小的远程应用程序，如下所示：

在 Eclipse 中创建 2 个项目：客户端和服务器

服务器：

服务器的代码是

```
package server

import akka.actor.Actor
import akka.actor.ActorLogging
import akka.actor.ActorSystem
import akka.actor.Props

class Joe extends Actor {
  def receive = {
    case msg: String => println("joe received " + msg + " from " + sender)
    case _ => println("Received unknown msg ")
  }
}

object Server extends App {
  val system = ActorSystem("GreetingSystem")
  val joe = system.actorOf(Props[Joe], name = "joe")
  println(joe.path)
  joe ! "local msg!"
  println("Server ready")
} 
```

服务器的 applincation.conf 是

```
akka {
  loglevel = "DEBUG"
  actor {
     provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
     enabled-transports = ["akka.remote.netty.tcp"]
     netty.tcp {
         hostname = "127.0.0.1"
         port = 2552
     }
     log-sent-messages = on
     log-received-messages = on
  }
} 
```

客户：

客户代码是

```
package client

import akka.actor._
import akka.actor.ActorDSL._

object Greet_Sender extends App {

   println("STARTING")

   implicit val system = ActorSystem("GreetingSystem-1")

   val joe = system.actorSelection("akka.tcp://GreetingSystem@127.0.0.1:2552/user/joe")

   println("That 's Joe:" + joe)

   val a = actor(new Act {
      whenStarting { joe ! "Hello Joe from remote" }
   })

   joe ! "Hello"

   println("Client has sent Hello to joe")
} 
```

客户端 application.conf 是：

```
akka {
  #log-config-on-start = on
  stdout-loglevel = "DEBUG"
  loglevel = "DEBUG"
  actor {
      provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    enabled-transports = ["akka.remote.netty.tcp"]
    log-sent-messages = on
    log-received-messages = on
    netty.tcp {
          hostname = "127.0.0.1"
          port = 0
    }
  }  
} 
```

配置必须放在两个名为 application.conf 的文件中，都位于两个项目的 bin 目录中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T13:33:26.000

正如 korefn 提到的，[远程文档](http://doc.akka.io/docs/akka/snapshot/scala/remoting.html)详细解释了它的工作原理。它还链接到一个[示例应用程序](https://github.com/akka/akka/tree/master/akka-samples/akka-sample-remote)。该示例应该为您提供入门所需的一切。

* * *

## 编辑

要运行示例应用程序，请执行以下步骤：

从 GitHub 克隆

```
eecolor@BLACK:~/GihHub$ git clone https://github.com/akka/akka.git 
```

进入`akka`目录并运行`sbt`

```
eecolor@BLACK:~/GihHub/akka$ sbt 
```

切换到`akka-sample-project`

```
akka > project akka-sample-remote 
```

调用`run`项目并选择`CalcApp`

```
Multiple main classes detected, select one to run:

 [1] sample.remote.calculator.java.JCreationApp
 [2] sample.remote.calculator.LookupApp
 [3] sample.remote.calculator.CalcApp
 [4] sample.remote.calculator.java.JLookupApp
 [5] sample.remote.calculator.CreationApp
 [6] sample.remote.calculator.java.JCalcApp

Enter number: 3

[info] Running sample.remote.calculator.CalcApp 
[INFO] [02/19/2013 19:22:09.055] [run-main] [Remoting] Starting remoting
[INFO] [02/19/2013 19:22:09.230] [run-main] [Remoting] Remoting started; listening on addresses :[akka.tcp://CalculatorApplication@127.0.0.1:2552]
Started Calculator Application - waiting for messages 
```

切换到另一个控制台并重复前几个步骤

```
eecolor@BLACK:~/GihHub/akka$ sbt
akka > project akka-sample-remote 
```

调用`run`并选择`LookupApp`

```
akka-sample-remote > run

Multiple main classes detected, select one to run:

 [1] sample.remote.calculator.java.JCreationApp
 [2] sample.remote.calculator.LookupApp
 [3] sample.remote.calculator.CalcApp
 [4] sample.remote.calculator.java.JLookupApp
 [5] sample.remote.calculator.CreationApp
 [6] sample.remote.calculator.java.JCalcApp

Enter number: 2

[info] Running sample.remote.calculator.LookupApp 
[INFO] [02/19/2013 19:23:39.358] [run-main] [Remoting] Starting remoting
[INFO] [02/19/2013 19:23:39.564] [run-main] [Remoting] Remoting started; listening on addresses :[akka.tcp://LookupApplication@127.0.0.1:2553]
Started Lookup Application
Sub result: 14 - 16 = -2
Sub result: 13 - 22 = -9
Add result: 56 + 93 = 149
Add result: 18 + 19 = 37 
```

切换回另一个控制台，您应该会看到如下内容：

```
Calculating 14 - 16
Calculating 13 - 22
Calculating 56 + 93
Calculating 18 + 19 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T13:37:56.063

好吧，在你的例子中，客户端代码从不引用配置文件，它不会工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-29T15:16:04.780

默认情况下，akka 将使用 application.conf 文件 - 因此不需要明确选择它。

如果确实想要，那么代码将是（以上面的代码为例）：

```
val configFile = getClass.getClassLoader.getResource("akka_local_application.conf").getFile
val config = ConfigFactory.parseFile(new File(configFile))
val system = ActorSystem("GreetingSystem",config)
val joe = system.actorOf(Props[Joe], name = "joe") 
```

# apache - .htaccess 重写所有“其他”URL

> ID：14934786
> 
> 赞同：0
> 
> 时间：2013-02-18T11:04:26.180
> 
> 标签：apache, .htaccess, mod-rewrite

希望这是一个简单的。`/admin`我有一个非常基本的 .htaccess ，它可以将任何对（或`/admin/etc`）的请求重写为 .htaccess `/_admin/index.php`。到现在为止还挺好：

```
#Options All -Indexes

RewriteEngine On
RewriteBase /admin

RewriteRule ^admin/$ /_admin/index.php [QSA]
RewriteRule ^admin$ /_admin/index.php [QSA]
RewriteRule ^admin/(.+)$ /_admin/index.php [QSA] 
```

我还想要一个通用的“catch all else”规则，它将任何*其他*url ( `/users`,`/turnips/`等`/some/other/path`) 重写回`/index.php`

我似乎无法让它工作 - 它要么是，要么`server error 500`也`/admin`被重写到根页面。我确定我只需要做一些事情，`RewriteCond`但我无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:42:23.810

在其他规则之后添加它。如果不应用之前的规则，这将是默认规则。

```
RewriteBase /
RewriteCond %{REQUEST_URI} !index\.php [NC]
RewriteRule .*        index.php        [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:10:30.510

首先，我建议您将**L**标志添加到您的重写中，这样您就可以确保在匹配重写后避免意外匹配（当然除非有意）。

其次，WordPress 使用以下代码重写所有不匹配*index.php*的 URL或已存在的文件。这样直接访问的文件（如图像、文本文件、下载等）不会被重写。请注意，最初它还包括`RewriteCond %{REQUEST_FILENAME} !-d`不重写目录的行，但您似乎想要这种行为：

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . /index.php - [L] 
```

请看看这是否符合您的需求。

# ruby-on-rails - 照片 使用 MiniMagick 处理失败，可能不是图像？错误

> ID：14934788
> 
> 赞同：1
> 
> 时间：2013-02-18T11:04:26.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, minimagick

我有以下代码，它调整大小和图像，然后添加一些十六进制背景。在本地主机上这有效，但在heroku上我收到以下错误

```
version :big do
  process :offer_resize_and_pad
 end

def offer_resize_and_pad
  img = resize_and_pad(600, nil, model.hex, 'Center')
  img
end 
```

`"Photo Failed to manipulate with MiniMagick, maybe it is not an image? Original Error: Command (\"mogrify -thumbnail \"600x>\" -background \"#fff\" -gravity \"Center\" -extent \"600x\" /tmp/mini_magick20130217-2-1hts61y.jpg\") failed: {:status_code=>1, :output=>\"mogrify: Empty JPEG image (DNL not supported)`/tmp/mini_magick20130217-2-1hts61y.jpg' @ jpeg.c/EmitMessage/232.\n\"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:59:58.263

我使用了 RMagick 而不是 Mini_magick，并进行了一些语法更改，它似乎可以工作:)。

```
include CarrierWave::RMagick

def offer_resize_and_pad
  img = resize_and_pad(600, 280, model.hex, ::Magick::CenterGravity)
  img
end 
```

# html - 只有中间的div是固定宽度的，三个div怎么扩展父元素？

> ID：14934789
> 
> 赞同：0
> 
> 时间：2013-02-18T11:04:30.630
> 
> 标签：html, css

有没有办法让三个 div 元素扩展父元素的宽度，而只有中间 div 具有固定宽度？中间元素左侧和右侧的 div 元素应具有相等的宽度。

我想要这样的工作：

```
<div style="width:100%">
    <div id="elasticWidth1"></div>
    <div id="fixedWidth"></div>
    <div id="elasticWidth2"></div>
</div> 
```

编辑：结果应该是这样的： ![在此处输入图像描述](../Images/7ceac2990e68bf67382583006a0b3eba.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:23:02.523

你可以使用这样的东西：http: [//jsfiddle.net/Urbrf/6/](http://jsfiddle.net/Urbrf/6/)

**html**

```
<div id="wrapper">
    <div class="halfWidth left">
        <div class="padding">
            <div id="columnOne" class="fullWidth">
            </div>
            <div id="columnTwo" class="fixedWidth">
            </div>
        </div>
    </div>
    <div class="halfWidth right">
        <div class="padding">
            <div id="columnThree" class="fullWidth">
            </div>
        </div>
    </div>
</div> 
```

**CSS**

```
#wrapper {width:100%;}
.halfWidth {width:50%;}
.fullWidth {width:100%;}
.left,
.left .fullWidth {float:left;}
.left .padding {padding-right:100px;} /*half of the fixed width*/
.right,
.right .fullWidth {float:right;}
.right .padding {padding-left:100px;} /*half of the fixed width*/

.fixedWidth {width:200px; margin-right:-200px; float:right;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:08:40.533

我不会使用浮动，而是使用内联块：

```
div {
    display: inline-block;
} 
```

无论如何，当它们是弹性的时，你想如何设置左右 div 的宽度相等？

# mysql - 检查的行数如何大于表中的行数？

> ID：14934795
> 
> 赞同：2
> 
> 时间：2013-02-18T11:04:44.607
> 
> 标签：mysql

我有一张审计表。我使用这个查询来获取当前没有登录的用户。但是，这个查询在过去几天需要很长时间。在从慢查询日志分析时，检查的行数太长。

当天表中的总行数为`6032194`(

```
 select count(*) from audit where audit.created_time 
    between  UNIX_TIMESTAMP(CURRENT_DATE()  - INTERVAL 3 DAY) * 1000
  AND UNIX_TIMESTAMP(CURRENT_DATE()-INTERVAL 2 day) * 1000 
```

）。

**询问**

```
 select count(user_id) from audit where audit.created_time 
between  UNIX_TIMESTAMP(CURRENT_DATE()  - INTERVAL 3 DAY) * 1000  AND 
UNIX_TIMESTAMP(CURRENT_DATE()-INTERVAL 2 day) * 1000 
and operation in ('s','g','y','fb'); 
```

**解释输出**

```
 id: 1
  select_type: SIMPLE
        table: audit
         type: range
possible_keys: IAMAccountAudit_CTndx
          key: IAMAccountAudit_CTndx
      key_len: 9
          ref: NULL
         rows: 16434866
        Extra: Using where 
```

它作为范围查询执行。但它检查`86158436`行。

慢查询日志：

```
 # Time: 130216  1:09:21
# User@Host: root[root] @  [bharathik]
# Query_time: 1853.751416  Lock_time: 0.000101 Rows_sent: 1  Rows_examined: 86158436
SET timestamp=1361005761;
    SELECT UNIX_TIMESTAMP(CURRENT_DATE()  - INTERVAL 1 DAY) * 1000, 'SIGNIN', 0, count(distinct(zuid)) as SIGN_IN_COUNT from audit where  audit.CREATED_TIME BETWEEN 
UNIX_TIMESTAMP(CURRENT_DATE()  - INTERVAL 3 DAY) * 1000  AND 
UNIX_TIMESTAMP(CURRENT_DATE()-INTERVAL 2 day) * 1000 
```

**创建表**

```
+-----------------------+--------------+------+-----+---------+-------+
| Field                 | Type         | Null | Key | Default | Extra |
+-----------------------+--------------+------+-----+---------+-------+
| auto_id               | bigint(19)   | NO   | PRI | 0       |       |
| user_id               | varchar(100) | YES  | MUL | NULL    |       |
| service               | varchar(100) | YES  |     | NULL    |       |
| name                  | varchar(100) | YES  |     | NULL    |       |
| operation             | varchar(15)  | YES  |     | NULL    |       |
| ipaddress             | varchar(50)  | YES  |     | NULL    |       |
| referrer              | varchar(250) | YES  |     | NULL    |       |
| user_agent            | varchar(250) | YES  |     | NULL    |       |
| created_time          | bigint(19)   | YES  | MUL | NULL    |       |
+-----------------------+--------------+------+-----+---------+-------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T21:55:07.073

由于第二个 SQL 查询有一个 IN 子句，因此需要评估额外的“行”。这些额外的“行”代表 IN 子句的临时结果。

# matlab - 在 MATLAB 索引元胞数组中进行反向查找

> ID：14934796
> 
> 赞同：4
> 
> 时间：2013-02-18T11:04:45.447
> 
> 标签：matlab, cell-array

我试图解决这个问题时遇到了一堵砖墙：

给定一个 5x1 单元格数组，该数组包含 n 个元素的数组的索引向量，我需要找到反向映射。

我所拥有的是“在第 2 组中，有元素 15、16、17，......”我想要的是“元素 15 是第 2、4、5 组的成员”。

这是我的单元格数组的结构

```
myCellArray  = 

[1x228 double]
[1x79  double]
[1x136 double]
[1x93  double]
[1x81  double] 
```

这是我的索引向量内容的一部分

```
myCellArray{2}(1:5) =

    15    16    17    18    19 
```

我想要的是一个包含 n 个单元格的单元格数组，其中包含每个元素的组成员资格索引。

帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T11:17:10.257

您可以使用 和 的组合来执行此`cellfun`操作`arrayfun`。首先创建一个元胞数组：

```
>> mycellarray = { [1 2], [4 5], [3 4], [1 2 3 4 5] }; 
```

要获取包含特定数字（例如 1）的元胞数组的元素，您可以使用`cellfun`：

```
>> find( cellfun(@(s)ismember(1, s), mycellarray) )
ans =
    1   4 
```

这告诉您 1 在 的第 1 个和第 4 个元素中`mycellarray`。现在您可以使用`arrayfun`. 生成的数组可能有不同的长度，所以我们需要设置`'UniformOutput'`为`false`.

```
>> n = 5;
>> result = arrayfun(@(i)find(cellfun(@(s)ismember(i,s), mycellarray)), 1:n, ...
                     'UniformOutput', false); 
```

元素是你想要的索引向量——

```
>> result{1}
ans =
     1     4    # since 1 is in the 1st and 4th array
>> result{3}
ans =
     3     4    # since 3 is in the 3rd and 4th array 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T11:21:03.457

您是否必须使用元胞数组来节省空间？

否则，您可以将当前矩阵更改为 MxN 正常矩阵，其中 N 是您定义的 n，M 是组数。然后只需用零填充每一行的末尾。所以它包含相同的信息，但它使您的反向查询易于使用`find`。

因此，如果`n = [1 2 3 4 5 6 7]`

我们有 3 个组，第 1 组是`[1 4 5]`，第 2 组是`[3]`，第 3 组是`[1 2 6 7]`您当前的矩阵

```
M = 3; N = numel(n);

m = zeros(M,N);
m(1, 1:3) = [1 4 5];
m(2, 1) = 3;
m(3, 1:4) = [1 2 6 7]; 
```

now you want to know which group does the number `i` belong to. It's as simple as (updated based on Chris Taylor's observation)

```
find(any(m == i, 2)) 
```

# iis - 使用重写删除部分 url

> ID：14934797
> 
> 赞同：0
> 
> 时间：2013-02-18T11:04:46.097
> 
> 标签：iis, iis-7, url-rewriting

我不熟悉此功能，并且我找到了一些示例如何做某事，但我不知道如何设置这种情况：

我希望这个网址`http://www.domain.co.uk/anything/en`成为`http://www.domain.co.uk/anything/`

我想删除最后的“en”

我试过：

```
^/([_0-9a-z-]+)/([_0-9a-z-]+)/en
/{R:1}/{R:2} 
```

或者

```
^http://www.domain.co.uk/([_0-9a-z-]+)/(en)
http://www.domain.co.uk/{R:1}/ 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:10:47.477

您可以使用以下规则：

```
<rule name="Remove en" stopProcessing="true">
    <match url="^(.*)/en$" />
    <action type="Rewrite" url="{R:1}" />
</rule> 
```

它将匹配任何以结尾的 url`/en`并删除这部分。
从您的示例中，`http://www.domain.co.uk/anything/en`将被**重写**为`http://www.domain.co.uk/anything`

如果您希望用户被**重定向**，请使用以下规则：

```
<rule name="Remove en" stopProcessing="true">
    <match url="^(.*)/en$" />
    <action type="Redirect" url="{R:1}" />
</rule> 
```

没有选项会`type="Redirect"`触发永久（301）重定向。

# azure - Windows Azure 账单

> ID：14934798
> 
> 赞同：5
> 
> 时间：2013-02-18T11:04:45.617
> 
> 标签：azure

我想要根据 Windows Azure 订阅生成的帐单 PDF，我选择了查看帐单，然后转到帐单历史记录。单击下载链接，它会显示使用详细信息，但不显示发票。有人可以建议在哪里获得 PDF 格式的发票吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T11:36:41.863

为了以 PDF 格式查看您的发票，您必须

1.  转到您的[订阅屏幕](https://account.windowsazure.com/Subscriptions)
2.  转到特定订阅屏幕
3.  转到所选订阅的帐单历史记录屏幕

在*计费历史记录*中，您将看到计费周期、您支付的金额、给定期间下载使用情况的链接以及给定期间下载发票的链接。

![帐单历史](../Images/c09750848a5c65aa331e7bda808ed73c.png)

您可以查看我的*Storage Pay-As-You-Go*订阅的示例计费历史记录屏幕。

我希望这会有所帮助。

# arrays - 在二维数组中查找连接的不同元素

> ID：14934799
> 
> 赞同：0
> 
> 时间：2013-02-18T11:04:45.160
> 
> 标签：arrays, 2d

我从两天以来一直在考虑这个问题，但没有找到可行的解决方案：

我有一个二维数组，想要找到最大数量的连接项目（水平和垂直，而不是对角线），但该组中的任何项目都不应该重复。

可能组的示例：

```
--FG- or -F--- or -----
--E--    -E---    ---AF
-BC--    CBD--    ----B
-AD--    -A---    --CDE 
```

这是我的问题的简化视图，因为在“现实”中，数组是 6x9，并且存在三种不同类型的“元素”（比如说数字、字母和符号），每 30 个不同的可能项目和一个空白 (-) 元素。在第一遍中，我检查每个位置并找到相同元素的所有连接项。这使用递归函数相对容易实现，字段 0,0 位于左下角（另一个简化视图）：

```
12AB-1-     The check for    -AB----  
23CD23-     position 2:0     -CD----
2*CE55-     ("C") would      --CE---
#2E2*AA     result in        --E----
#$A23BC     this:            --A----
$$F1+*E                      --F----
21C31*2                      --C---- 
```

检查位置 2:0 "C" 将产生一个包含 10 个连接的“字母”项的数组。现在我在这个新数组中搜索最大数量的不同的连接项，因此这不是新组中的两个重复项。对于位置 2:0，这将导致最多 4 个连接的不同项目，因为如果不触摸已经在组中的项目（这里是另一个 C），您将无法到达另一个项目。

对于我的问题，检测最大值就足够了。10 个项目组中有 6 个不同的连接项目。

上述示例的可能组是（当我检查位置 2:1 “F”时）：

```
--B----
--D----
--C----
--E----
--A----
--F----
------- 
```

我没有找到可以做到这一点的算法，比如我用来查找数组中相同元素的所有项目的简单递归函数。它似乎要复杂得多。

例如，算法还必须认识到它不会将位置 3:4 的 E 添加到组中，而是将位置 2:3 的 E 添加到组中。

我认为上述中间步骤首先找到一个元素的所有连接项是不必要的，但目前我在这里和我的代码中这样做是为了让事情更清楚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:49:55.663

Because all algorithm I tried don't work or would use a big recursive stacks I have done it another way:

For my purpose it is enough to check for max. 5 connected different items in a group of elements. I made masks (around 60) for all possible combinations for 5 items. Here five examples.

```
----- ----- ----- ----- *----
----- ----- ----- ----- *----
----- ----- ----- ***-- ***--
----- ---*- --*-- *---- -----
***** ****- ****- *---- ----- 
```

Now I check each connected component with these masks. If all five items on this positions are different the check is true. The actual start position for the check in the mask is always in one of the four corners.

This way it takes less memory and less calculations than every algorithm I tried, but this resolution would be not acceptable for more than six or seven items because there would be to many masks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:57:18.220

这是一个`DFS`问题。算法应该是；

对于每个连接的组件，`dfs`以 a开头`map`。这是一个伪代码：

```
 void dfs(position pos, map<char, bool> m, int number) {

    //if the element is seen before, quit 
    if(m[array2d[pos] == true)
        return;

    //it is seen now
    m[array2d[pos]] = true;

    //update max value
    maxValue = max(maxValue, number);

    //go to each neighbor
    foreach(neighbor of pos) {
         dfs(neighbor, m, number+1); 
    }

    //unlock the position
    m[array2d[pos]] = false;
 } 
```

我相信你应该`dfs`从数组中的每个位置开始。

# sass - 为什么会创建 Sass 缓存文件夹

> ID：14934800
> 
> 赞同：82
> 
> 时间：2013-02-18T11:04:53.060
> 
> 标签：sass

我已经开始为我的 css 工作尝试 Sass。在我的 Css 文件所在的目录中，我也看到了一个“.sass-cache”文件夹。谁能告诉我为什么要创建这个文件夹，如果我删除它是否安全。

谢谢，

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-02-18T11:37:51.553

默认情况下，Sass 缓存已编译的模板和部分。这极大地加快了重新编译大量 Sass 文件的速度，并且如果将 Sass 模板拆分为单独的文件，这些文件全部 @imported 到一个大文件中，则效果最佳。

如果没有框架，Sass 会将缓存的模板放在`.sass-cache`目录中。在 Rails 和 Merb 中，它们进入`tmp/sass-cache`. 可以使用该`:cache_location`选项自定义目录。

如果您根本不希望 Sass 使用缓存，请将`:cache`选项设置为`false`.

您可以通过在指南针配置文件中设置 Sass 选项来配置 Sass 缓存位置，如下所示：

```
sass_options = {:cache_location => "path\to\tmp\sass-cache"} 
```

资料来源：[Sass 参考资料](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-19T15:23:36.777

如果您的主要问题是“当多个开发人员使用/更改它时抑制对开发环境的推送”，您可以将其添加到您的 .gitignore 文件中。如另一个答案中所述，Sass 缓存文件根据自上次编译后 Sass 文件是否已更改来加快编译速度。

根据我的经验，将它们视为临时文件并从版本控制中忽略它们是标准做法。

# r - 如何修复ubuntu 12.04源列表中Malformed Line的错误

> ID：14934801
> 
> 赞同：0
> 
> 时间：2013-02-18T11:04:56.993
> 
> 标签：r, ubuntu-12.04

我试图在 ubuntu 12.04 中更新我的 R。为此，我输入了以下命令：

```
sudo apt-get update 
```

然后出现以下错误：

```
E: Malformed line 60 in source list /etc/apt/sources.list (dist parse)
E: The list of sources could not be read. 
```

谁能帮我解决这个问题。也请让我知道如何将我的 R 升级到最新版本。目前我正在使用 2.14.1 版本的 R。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:09:11.213

要获得适用于 ubuntu 12.04 的最新 R，您必须在您的 中添加以下行`/etc/apt/sources.list`：

```
deb http://<my.favorite.cran.mirror>/bin/linux/ubuntu precise/ 
```

当然，你必须`<my.favorite.cran.mirror>`用你的镜像的url来替换，比如`cran.r-project.org`.

更多信息在这里：[http ://cran.r-project.org/bin/linux/ubuntu/](http://cran.r-project.org/bin/linux/ubuntu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-22T06:21:41.423

如果是复制内容，我认为是一些空间造成的，建议把每个空间都删掉再回空间试试。

# ios - 如何将 .xcarchive 转换为 .ipa 以供客户端使用 Application Loader 将应用程序提交到应用商店

> ID：14934808
> 
> 赞同：57
> 
> 时间：2013-02-18T11:05:20.293
> 
> 标签：ios, xcode, app-store, xcode4.5, ipa

我们已经使用客户的证书和分发配置文件创建了 .xcarchive 文件代码签名，但我们需要将 .ipa 文件发送给我们的客户，以便他们可以使用 Application Loader 将应用程序上传到 App Store。

在 Xcode 4.5 中创建 .ipa 文件的唯一方法是单击 Distribute -> Save for Enterprise or Ad-Hoc Deployment，其下方有说明“签名并打包应用程序以在 iOS App Store 之外分发”。

如果我们这样保存.ipa文件，会不会导致提交到应用商店出现问题？或者是否有将 .xcarchive 转换为 .ipa 的正确方法？

提前致谢！

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-09-24T10:27:19.130

1.  使用Xcode创建Xarchieve文件，点击product->archive
2.  首先右键单击 xarchive 文件-> 在 finder 中显示
3.  再次右键单击 xarchive 文件-> 显示包内容
4.  然后打开文件夹 products->applications，在这里你得到你的应用程序文件
5.  现在，将这个拖放到 iTunes 商店的应用程序目录（在 iTunes 商店右上角找到应用程序下拉菜单）。这将自动将存档文件转换为 ipa 文件。（在这里，您也可以执行此操作 -> 将 .app 文件拖放到 itunestore 中的任何位置，一旦处理完毕，从搜索框中搜索回来）。

6.  然后再次右键单击它并 -> 在 finder 中显示，这将显示您的 ipa 文件。现在你可以把这个给任何用户

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-10-10T15:23:14.777

*为 Xcode 7 和 8 更新*

这是创建存档和生成 .ipa 的脚本 - 根据需要进行调整：

```
PROJECT=xxx
ARCHIVE_PATH=/tmp/${PROJECT}.xcarchive
EXPORT_PATH=/tmp/${PROJECT} # DIRECTORY
mkdir -p $ARCHIVE_PATH
xcodebuild -project ./${PROJECT}.xcodeproj -scheme ${SCHEME} archive -archivePath $ARCHIVE_PATH -verbose

PLIST='{"compileBitcode":false,"method":"enterprise"}' # edit as needed

EXPORT_PLIST=/tmp/${PROJECT}.plist
echo $PLIST | plutil -convert xml1 -o $EXPORT_PLIST -

xcodebuild -exportArchive -archivePath $ARCHIVE_PATH -exportPath $EXPORT_PATH -exportOptionsPlist $EXPORT_PLIST 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2018-03-25T17:39:03.673

第一个产品>存档，然后右键单击生成的`xcodearchive`文件并选择`Show package content`并转到`Products -> Applications`文件夹。创建一个名为的新文件夹并将文件`Payload`拖到该`.app`文件夹​​中。压缩`Payload`文件夹并将其重命名为您想要的任何名称并将扩展名更改为`.ipa`.

*如果您的应用程序太大，您可以在构建设置中禁用位代码，使其缩小 50-70%。*

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-01-13T10:53:23.690

您可以从 XCArchive 创建 IPA。

1.  右键单击***ProjectName [日期时间].xcarchive***
2.  选择***显示包内容*。**

![第1步](../Images/8b28942643dd77651b24e461f4d82cc3.png)

![第2步](../Images/2345bb1b0a6b1a84bca5debbab5613b3.png)

它包括三件事：

一种。**dSYMs**：dSYM 文件存储应用程序的调试符号。

湾。**Info.plist**：包含详细信息的属性列表，例如 ApplicationProperties、ArchiveVersion、CreationDate、Name、Scheme。

C。**产品**：这包含您项目的应用程序文件。

4.  选择**产品 -> 应用程序**。这包含应用程序文件。

5.  现在，将应用程序文件拖放到 iTunes（MyApps 选项卡）中。

6.  选择您的项目。

7.  右键单击并选择“在取景器中显示”。这将找到新创建的 IPA 文件。

![第4步](../Images/d4c7836e32f362cb36615f4885fdc6be.png)

![第 5 步](../Images/c5bdf11fda5f33875603291aa9024519.png)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-12-14T17:07:42.467

如果您需要从命令行进行此操作，可以在此处找到所有详细信息：http: [//encyclopediaofdaniel.com/blog/xcarchive-to-ipa](http://encyclopediaofdaniel.com/blog/xcarchive-to-ipa)。简而言之：

```
xcodebuild 
   -exportArchive -archivePath <path to archive> -exportPath <path to output> 
   -exportOptionsPlist <path to export options plist> 
```

最小选项 plist 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>method</key>
    <string>app-store</string>
</dict>
</plist> 
```

当然，该*方法*将根据您使用的配置文件类型（`app-store`用于分发配置文件）而改变。运行`xcodebuild --help`以查看可用选项的列表。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-09-24T15:44:06.620

```
XCode > Project > Archive
XCode > Organizer > Distribute > Enterprise/add Hoc > Save As
Saves as YOURAPP.ipa.
Make sure Save for Enterprise Deploy remains UNCHECKED.
Download latest Application Loader.
tap 'Deliver Your App'
make sure new version in itunes connect in WAITING FOR UPLOAD state
Click on Activity... button 
```

* * *

提示：打开 Console.app 以查看 XCode 验证错误

```
Click on ALL MESSAGE on list of logs on right.
Then in search enter 'XCode' or 'Application Loader' 
to monitor any errors with your upload. 
```

笔记：

我做了所有这些，但仍然收到有关缺少 120x120 图标的电子邮件。

忘记在 Build Target > General Tab List of new icon requirements for iOS7 [http://www.icenium.com/resources/forums/icenium-general-discussion/missing-recommended-icon-file中更新它们](http://www.icenium.com/resources/forums/icenium-general-discussion/missing-recommended-icon-file)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2013-02-18T11:10:31.160

我在我的一个项目中也观察到了同样的问题。

我通过更改目标中的设置来解决它。对于主要项目和依赖项。

```
 skip Install  NO 
```

更改后，转到 Xcode->Product->Archive->Save for Enterprise or Ad-Hoc Deployment

我们遵循相同的流程并通过 Application Loader 上传，Apple 批准了该应用程序。

![在此处输入图像描述](../Images/9242c3704d2f81d410da2c11dd41b30b.png)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2021-11-13T18:34:42.430

## xCode 13 及更高版本的更新

1.  选择 xCode 上的存档，然后单击右上角的“**分发应用程序**”按钮。

2.  在下一个屏幕中选择“ **App Store Connect ”。**

3.  选择“**导出**”。

4.  选择签名证书。

导出的文件夹将包含**ipa**文件。

您还可以使用[Transporter](https://apps.apple.com/it/app/transporter/id1450874784)应用程序将您的 ipa 文件上传到 AppStoreConnect。

# asp.net-mvc-3 - 随机“缺少类型映射配置或不支持的映射”。自动映射器中的错误

> ID：14934809
> 
> 赞同：0
> 
> 时间：2013-02-18T11:05:24.590
> 
> 标签：asp.net-mvc-3, unity-container, automapper-2

请参阅[此帖子](https://stackoverflow.com/questions/16303452/automapper-random-errors/16772435#16772435)以获取解决方案。

> 好的，我终于想通了。我的代码中的 AppDomain.CurrentDomain.GetAssemblies() 片段有时无法获取我的映射程序集，因此当它丢失时，我会收到错误消息。通过强制应用程序查找所有程序集来替换此代码解决了我的问题。

我的实体：

```
 /// <summary>
    /// Get/Set the name of the Country
    /// </summary>
    public string CountryName { get; set; }

    /// <summary>
    /// Get/Set the international code of the Country
    /// </summary>
    public string CountryCode { get; set; }

    /// <summary>
    /// Get/Set the coordinate of the Country
    /// </summary>
    public Coordinate CountryCoordinate { get; set; }

    /// <summary>
    /// Get/Set the cities of the country
    /// </summary>
    public virtual ICollection<City> Cities
    {
        get
        {
            if (_cities == null)
            {
                _cities = new HashSet<City>();
            }

            return _cities;
        }
        private set
        {
            _cities = new HashSet<City>(value);
        }
    } 
```

我的 DTO：

```
 public Guid Id { get; set; }

    public string CountryName { get; set; }

    public string CountryCode { get; set; }

    public string Lattitude { get; set; }

    public string Longtitude { get; set; }

    public List<CityDTO> Cities { get; set; } 
```

我的配置

```
 // Country => CountryDTO
        var countryMappingExpression = Mapper.CreateMap<Country, CountryDTO>();
        countryMappingExpression.ForMember(dto => dto.Lattitude, mc => mc.MapFrom(e => e.CountryCoordinate.Lattitude));
        countryMappingExpression.ForMember(dto => dto.Longtitude, mc => mc.MapFrom(e => e.CountryCoordinate.Longtitude)); 
```

在 Global.asax Application_Start 我有：

```
 Bootstrapper.Initialise(); 
```

在 Bootstrapper 我有：

```
public static class Bootstrapper
{
    private static IUnityContainer _container;

    public static IUnityContainer Current
    {
        get
        {
            return _container;
        }
    }

    public static void Initialise()
    {
        var container = BuildUnityContainer();

        DependencyResolver.SetResolver(new UnityDependencyResolver(container));
    }

    private static IUnityContainer BuildUnityContainer()
    {
        _container = new UnityContainer();

        _container.RegisterType(typeof(BoundedContextUnitOfWork), new PerResolveLifetimeManager());

        _container.RegisterType<ICountryRepository, CountryRepository>();  

        _container.RegisterType<ITypeAdapterFactory, AutomapperTypeAdapterFactory>(new ContainerControlledLifetimeManager());

        _container.RegisterType<ICountryAppService, CountryAppServices>(); 

        EntityValidatorFactory.SetCurrent(new DataAnnotationsEntityValidatorFactory());
        var typeAdapterFactory = _container.Resolve<ITypeAdapterFactory>();
        TypeAdapterFactory.SetAdapter(typeAdapterFactory);

        return _container;
    }
} 
```

我的适配器在哪里：

```
public class AutomapperTypeAdapter : ITypeAdapter
{
    public TTarget Adapt<TSource, TTarget>(TSource source)
        where TSource : class
        where TTarget : class, new()
    {
        return Mapper.Map<TSource, TTarget>(source);
    }

    public TTarget Adapt<TTarget>(object source) where TTarget : class, new()
    {
        return Mapper.Map<TTarget>(source);
    }
} 
```

AdapterFactory 是：

```
 public AutomapperTypeAdapterFactory()
    {
        //Scan all assemblies to find an Auto Mapper Profile
        var profiles = AppDomain.CurrentDomain
                                .GetAssemblies()
                                .SelectMany(a => a.GetTypes())
                                .Where(t => t.BaseType == typeof(Profile));

        Mapper.Initialize(cfg =>
        {
            foreach (var item in profiles)
            {
                if (item.FullName != "AutoMapper.SelfProfiler`2")
                    cfg.AddProfile(Activator.CreateInstance(item) as Profile);
            }
        });
    } 
```

所以我**随机**得到一个“缺少类型映射配置或不支持的映射”。错误提示：

```
 public TTarget Adapt<TTarget>(object source) where TTarget : class, new()
    {
        return Mapper.Map<TTarget>(source);
    } 
```

虽然此错误是**随机**发生的，但很难调试并查看会发生什么。我已经搜索了很多没有适当的解决方案。

错误如下：

> 缺少类型映射配置或不支持的映射。
> 
> 映射类型：Country -> CountryDTO MyApp.Domain.BoundedContext.Country -> MyApp.Application.BoundedContext.CountryDTO
> 
> 目标路径：List`1[0]
> 
> 源值：MyApp.Domain.BoundedContext.Country

我的项目是一个带有 Automapper 2.2 和 Unity IoC 的 MVC 3 项目。

我将不胜感激任何想法、建议或解决方案，并感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:46:38.510

如果您使用`Mapper.AssertConfigurationIsValid();`，您将获得更详细的信息：

> 未映射的成员被发现。查看下面的类型和成员。添加自定义映射表达式、忽略、添加自定义解析器或修改源/目标类型

在任何情况下，您都必须映射目标模型的所有属性。您缺少 CityDTO 和 ID。这里：

```
Mapper.CreateMap<City, CityDTO>();

Mapper.CreateMap<Country, CountryDTO>()
    .ForMember(dto => dto.Id, options => options.Ignore())
    .ForMember(dto => dto.Longtitude, mc => mc.MapFrom(e => e.CountryCoordinate.Longtitude))
    .ForMember(dto => dto.Lattitude, mc => mc.MapFrom(e => e.CountryCoordinate.Lattitude)); 
```

也许您需要在 City-CityDTO 上进行一些额外的映射，因为您没有指定它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T16:41:43.750

对我来说，这个错误与我`CreateMap<>()`打电话的地方有关。我已将它放在我的 DTO 的静态初始化程序中。当我将`CreateMap<>()`电话转移到不那么可爱的地方时，一切正常。

# paypal - 贝宝预先批准的付款

> ID：14934811
> 
> 赞同：14
> 
> 时间：2013-02-18T11:05:37.120
> 
> 标签：paypal, payment

我正在为我的众筹网站使用 PayPal PreApproved 付款，只有在项目成功支持的情况下才会向项目支持者收费。

我担心当项目成功时 PayPal API 尝试收取资金时，高支付率会失败：

*   支持者的 PayPal 账户中可能没有任何资金
*   一旦项目成功，支持者可能会关闭他们的账户（故意停止付款）
*   支持者可能会删除/取消他们预先批准的付款
*   ETC...

付款失败的方式有多种，这意味着项目所有者将无法获得资金。

任何人都可以提出一种收紧或确保付款的方法。请注意，PayPal 仅允许您使用 PreApproved 付款进行众筹。另请注意，项目所有者需要能够从我的站点接收资金。有时，这些资金可能小至 10 美元或高达 10,000 美元，因此我们需要使用 PayPal 支付，因为没有其他方法可以将资金提供给项目所有者

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-19T22:52:36.343

我已经实施了 Paypal 自适应付款并将它们用于[http://www.wethetrees.com](http://www.wethetrees.com)的付款，我们遇到了您所描述的确切问题。捕获率几乎是随机的，我们在一次活动中下降到 35%，并且不得不手动发送所有支持者的发票。

捕获时，我们的支持者的账户已关闭/未经授权、资金不足、付款方式不可用等。我们暂时只进行直接捕获，这很好，因为我们获得了 100% 的所有承诺，但 Paypal 在没有通知的情况下关闭了我们的帐户我们的一项活动提到了“古巴”这个词。

最终的解决方案是取消 Paypal，所以现在我们使用 Wepay 和 Dwolla，我们也在考虑使用 Bitpay（比特币）。好像Paypal想杀众筹还是不理解。任何低于 90% 的捕获率都是完全不可接受的，并且会导致项目失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T03:12:05.313

预先批准并不是他们允许您使用的唯一方法。这只是[Adaptive Payments API](https://www.x.com/sites/default/files/pp_adaptivepayments.pdf)的一部分，但您也可以使用[延迟链式付款](https://www.x.com/developers/paypal/documentation-tools/adaptive-payments/how-to/ht_ap-delayedChainedPayment-curl-etc)。

通过这种方式，您的帐户可以被视为托管服务。您可以使用[Pay API](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)在系统中创建相应的在接收方之间分配的付款。不过，一开始只有主要收款人会收到付款，然后您可以调用 ExecutePayment 在 90 天内从主要账户提交二次付款。

通过这种方式，主账户持有所有资金，因此可以在达到目标时进行支付。如果没有达到目标，可以退还款项。

# sql - 有没有办法让一个字段只能由触发器编辑？

> ID：14934820
> 
> 赞同：0
> 
> 时间：2013-02-18T11:06:06.347
> 
> 标签：sql, sql-server, database

在 Sql Server 2008 中，有没有办法设置只能使用触发器更改的字段？

例子：

当您创建一条记录时，它被设置为 NULL，然后由触发器更新为例如 1。用户不应将其设置为 NULL 以外的任何值。然后当它更新时，触发器会将值设置为 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:28:07.543

```
create table tmp (a int primary key, b int)
GO

create trigger tr_insupd_tmp on tmp
instead of insert, update
as
    if not exists(select * from deleted)
        -- Process Insert
        insert into tmp
            select a, 1
            from inserted
    else
        -- Process Update
        update tmp
            set b = 2
        from tmp t
        inner join inserted i on t.a = i.a
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:47:28.450

您是否考虑过使用计算列。如果您希望此列中的数据仅受数据库逻辑控制，那么计算列可能是可行的方法。

# jquery - 将 MsDropDown 与 jQuery 验证引擎一起使用

> ID：14934824
> 
> 赞同：0
> 
> 时间：2013-02-18T11:06:14.770
> 
> 标签：jquery, drop-down-menu, jquery-validation-engine

我正在使用 msDropDown 3.3 来选择这样的表单：

```
 <tr><td>Valutanem *</td><td><select name="valutanem" id="valutanem"  style="width:100%;" class="validate[required]" onchange="getvaluta($('#valutanem option:selected').val());">
<option value='0'>Change</option>      
<option value='HUF'>HUF</option>
  <option value='EUR'>EUR</option>
  </td></tr>

<script>

$(document).ready(function() {

var valutanemDropdown = $("#valutanem").msDropdown().data("dd");

});

</script> 
```

这是该项目的主页：

[http://www.marghoobsuleman.com/jquery-image-dropdown](http://www.marghoobsuleman.com/jquery-image-dropdown)

而且我想使用 jQuery Validation Engine 来确保选择了某些东西！

文档说，只需添加`class="validate[required]"`到选择，但它不起作用！为什么？

验证引擎可以在这里找到：

[https://github.com/posabsolute/jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T16:18:03.280

```
 This is because the select element is being wrapped by a div with the class
    "ddOutOfVision" which has overflow:hidden which makes 
    the validation error to not be visible. 

            In order to fix that you can simply do this in javascript:

             if ($('#valutanem').length > 0) {

          if  ($("#valutanem").hasClass('validate[required]'))
          {
            $("#valutanem_msdd").addClass('validate[required]')

            var element  = document.getElementById("valutanem_msdd")

     // need to clone the element because IE does not allow to set the type 
    //only if it is a newly created element
            var newObject = element.cloneNode(true);  
            newObject.type = "ms-dropdown-source";

            element.parentNode.replaceChild(newObject,element)
          }

        $.valHooks['ms-dropdown-source'] = {
          get: function (el) {
            element_id = $.trim($(el).attr('id').split('_msdd')[0])
            return $("#"+element_id).val();
          },
          set: function (el, val) {
            element_id = $.trim($(el).attr('id').split('_msdd')[0])
            return $("#"+element_id).val(val);
          }
        };

    }

       tested with Chrome, Firefox, IE6, IE7 and IE8 and works. NOt sure about other browsers
Sorry if the identation is wrong. I am not very used to Markdown 
```

# quartz-scheduler - web.xml 中的 Quartz 属性文件配置及其位置

> ID：14934825
> 
> 赞同：3
> 
> 时间：2013-02-18T11:06:17.247
> 
> 标签：quartz-scheduler, web.xml

我试图解决避免长时间加载默认quartz.properties文件的问题。希望有人可以在这里伸出援手。非常感谢！

基本上，我已经阅读了很多关于这个问题的帖子，而他们的解决方案并没有解决我的问题。我已将quartz.properties 文件放在WEB-INF/classes 下，以下是我在web.xml 中使用上下文侦听器的配置：

```
<context-param>
    <param-name>quartz:config-file</param-name>
    <param-value>quartz.properties</param-value>
</context-param>

<context-param>
    <param-name>quartz:shutdown-on-unload</param-name>
    <param-value>true</param-value>
</context-param>

<context-param>
   <param-name>quartz:wait-on-shutdown</param-name>
   <param-value>true</param-value>
</context-param>

<context-param>
   <param-name>quartz:start-on-load</param-name>
   <param-value>true</param-value>
</context-param>

<listener>
   <listener-class>
       org.quartz.ee.servlet.QuartzInitializerListener
   </listener-class>
</listener> 
```

结果仍然显示如下：

```
[INFO] 18 Feb 06:37:29.218 PM main [org.quartz.impl.StdSchedulerFactory]
Using default implementation for ThreadExecutor

[INFO] 18 Feb 06:37:29.265 PM main [org.quartz.core.SchedulerSignalerImpl]
Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl

[INFO] 18 Feb 06:37:29.265 PM main [org.quartz.core.QuartzScheduler]
Quartz Scheduler v.2.1.6 created.

[INFO] 18 Feb 06:37:29.265 PM main [org.quartz.simpl.RAMJobStore]
RAMJobStore initialized.

[INFO] 18 Feb 06:37:29.281 PM main [org.quartz.core.QuartzScheduler]
Scheduler meta-data: Quartz Scheduler (v2.1.6) 'MyQuartzTest' with instanceId       'NON_CLUSTERED'
Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
NOT STARTED.
Currently in standby mode.
Number of jobs executed: 0
Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 12 threads.
Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[INFO] 18 Feb 06:37:29.281 PM main [org.quartz.impl.StdSchedulerFactory]
Quartz scheduler 'MyQuartzTest' initialized from default resource file in Quartz package: 'quartz.properties'

[INFO] 18 Feb 06:37:29.281 PM main [org.quartz.impl.StdSchedulerFactory]
Quartz scheduler version: 2.1.6

[INFO] 18 Feb 06:37:29.281 PM main [org.quartz.core.QuartzScheduler]
Scheduler MyQuartzTest_$_NON_CLUSTERED started.

[INFO] 18 Feb 06:37:29.312 PM MyQuartzTest_Worker-1  [org.quartz.examples.example1.HelloJob]
Hello World! - Mon Feb 18 18:37:29 GMT+08:00 2013

[INFO] 18 Feb 06:38:09.296 PM MyQuartzTest_Worker-2 [org.quartz.examples.example1.HelloJob]
Hello World! - Mon Feb 18 18:38:09 GMT+08:00 2013

[INFO] 18 Feb 06:38:29.296 PM main [org.quartz.core.QuartzScheduler]
Scheduler MyQuartzTest_$_NON_CLUSTERED shutting down.

[INFO] 18 Feb 06:38:29.296 PM main [org.quartz.core.QuartzScheduler]
Scheduler MyQuartzTest_$_NON_CLUSTERED paused.

[INFO] 18 Feb 06:38:29.296 PM main [org.quartz.core.QuartzScheduler]
Scheduler MyQuartzTest_$_NON_CLUSTERED shutdown complete. 
```

我的另一个困惑是，如果它真的在加载默认的quartz.properties 文件，那么为什么线程池和调度程序名称是根据我自定义的quartz.properties 文件正确设置的？

另一方面，我也尝试根据 Quartz 的官方文档[QuartzInitializerListner](http://quartz-scheduler.org/api/2.1.0/org/quartz/ee/servlet/QuartzInitializerListener.html)为 quartz.properties 文件设置不同的路径。例如：

```
<context-param>
     <param-name>quartz:config-file</param-name>
     <param-value>/MyProject/WEB-INF/my_quartz.properties</param-value>
</context-param> 
```

结果显示更糟。这将是完全默认设置。因此，我现在很迷茫。请详细说明这种情况的根本原因。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-08T21:30:27.820

我解决了这个问题，将*quartz.properties*放在我的资源文件夹（src/main/resources）中。

您的上下文参数应如下所示：

```
<context-param>
     <param-name>quartz:config-file</param-name>
     <param-value>quartz.properties</param-value>
</context-param> 
```

看一下石英的代码：

```
InputStream is = null;
Properties props = new Properties();
is = Thread.currentThread().getContextClassLoader().getResourceAsStream(filename); 
```

其中*文件名*是属性文件。

因此，它尝试将文件作为流获取。请查看 Java 文档：

[https://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html](https://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html)

... 玩得开心

# php - 包含带有 .htaccess 的文件夹

> ID：14934826
> 
> 赞同：0
> 
> 时间：2013-02-18T11:06:17.960
> 
> 标签：php, .htaccess, include, apache2, server-side-includes

假设用户访问地址 domain.com/test.php

如果文件 test.php 不存在以包含位于服务器其他位置的其他文件，是否有可能？

如果我的 webroot 位于 /home/user/www/，我在想这样的事情：

```
RewriteCond %{REQUEST_FILENAME} -f [NC,OR]
INCLUDE: /VAR/OTHERDIR/test.php 
```

编辑： /VAR/OTHERDIR/ 是本地路径

如果文件在另一个文件夹中不存在，则首先抛出 E:404。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:19:51.060

您可以执行以下操作：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^test.php$ /other/dir/test.php [L] 
```

如果文件 test.php 存在于您的服务器上，它将被显示。如果不存在，将重定向到 /other/dir/test.php。如果此文件不存在，将显示 404 错误。

# c++ - 引用返回时的返回值优化

> ID：14934828
> 
> 赞同：1
> 
> 时间：2013-02-18T11:06:27.463
> 
> 标签：c++, reference, return-value, return-value-optimization, return-by-reference

我已经阅读了很多关于返回值优化的文章。但是我不确定是否完全理解在以下情况下是否会发生这种情况（地址实际上总是相同的）：

```
#include "stdafx.h"

class Type
{
public:
    Type(int a) { m_a = a; }
private:
    Type(const Type & other) {}
    int m_a;
};

class Base
{
public:
    Base() : instance(42) {}
    virtual Type & GetType()
    {
        printf("Base: Address of instance: %i\n", &instance);
        return instance;
    }

private:
    Type instance;
};

class Derived : public Base
{
public:
    virtual Type & GetType()
    {
        printf("Derived\n");
        return Base::GetType();
    }
};

int main()
{
    printf("Base class\n");
    Base b;
    printf("Main: Address of instance: %i\n", &(b.GetType()));

    printf("\nDerived class\n");
    Derived d;
    printf("Main: Address of instance: %i\n", &(d.GetType()));
} 
```

按引用返回是否始终确保不调用复制构造函数？
或者[RVO](http://en.wikipedia.org/wiki/Return_value_optimization)是否在这里进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:13:58.150

> **按引用返回是否始终确保不调用复制构造函数？**

RVO 是一种优化技术。标准不保证。**当您按值返回**时，大多数编译器都会应用 RVO 。

```
virtual Type & GetType()
        ^^^^^^ 
```

您在这里**通过引用返回**，这意味着不需要创建副本，因此没有复制构造函数调用的开销，因此没有 RVO 的机会或范围。

> **地址实际上总是相同的**

这些地址实际上总是相同的，因为它们是同一类成员的地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T11:09:51.240

> 按引用返回是否始终确保不调用复制构造函数？

是的。当您通过引用传递或返回时（与按值传递/返回相反），不会构造任何副本。

> [RVO](http://en.wikipedia.org/wiki/Return_value_optimization)在这里举行吗？

由于您通过引用返回，因此 RVO 与这里无关。RVO 是一种优化技术，包括消除在*按值返回*时创建的冗余副本。

如果你有这样的功能，RVO 可能会占据一席之地：

```
Type GetType()
{
    Type instance;
    //...
    return instance;
}
//...
Type t = GetType(); 
```

然后使用 RVO，编译器将尝试消除冗余的**复制构造函数**和**析构函数**调用，这意味着函数中的本地`instance`将`GetType`被分配给变量`t`，而不会创建副本。

# android - 获取与键码对应的值的最佳方法

> ID：14934830
> 
> 赞同：1
> 
> 时间：2013-02-18T11:06:33.357
> 
> 标签：android, android-softkeyboard

我正在为我的应用程序实现自定义软键盘。我使用 XML 文件定义键盘，每个键代码和标签定义如下：

```
<Key android:codes="1" android:keyLabel="bla" /> 
```

我也有一个`A`实现`OnKeyboardActionListener`. `A`实现方法

```
public void onPress(int primaryCode) {
        // Here I want to retrieve value that corresponds to key with primaryCode

    } 
```

获得与关键代码相对应的价值的最佳方法是什么？您认为在类中使用（键代码，键值）对定义哈希图`A`是个好主意吗？

我将拥有的密钥集是有限的，大约 40 个。

# javascript - 声明函数之前的“新”运算符

> ID：14934831
> 
> 赞同：1
> 
> 时间：2013-02-18T10:39:12.900
> 
> 标签：javascript

就像探索 javascript 作为我对整个编程的第一个参考，但由于我不是专业人士，所以无法理解很多东西。因此，如果有人能解释幕后实际发生的事情，将不胜感激。

在 body 标签中，我声明了两个函数，一个带有“new”，另一个没有。

*   新功能 sayHi () {alert('hi')}
*   函数 sayHello () {alert('hello')}

所以第一个函数是在不使用 () 的情况下调用的，所以我可以在文档加载时看到“hi”，因为我理解正确。但是要看到“你好”，我应该在代码的某处使用类似 sayHello.call() 的东西。

我想我理解“new”运算符的主要目的是创建对象实例，此外甚至可以假设声明函数对象的实例有或没有“new”运算符之间存在细微差别。

但是实际上会发生什么，以便文档在定义时使用“new”运算符执行函数，而另一个只是留在内存中的某个地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:27:48.450

1）您在定义函数时不使用`new`，而是`new`在您调用函数以创建新对象时使用。

2）如果`new`在定义函数时使用，则意味着它将立即触发。这有时会很方便…………但这确实不是初学者应该学习的方式。此外，这种技术更被接受的版本称为 IIFE（立即调用函数表达式），它看起来像

```
(function () {
/* function stuff in here */
}()); 
```

代替

```
new function () { /* function stuff in here */ } 
```

如果您尝试以这种方式定义函数，稍后尝试使用它时会出现错误（因为未定义）。

这里有两种实际定义函数的方法：

```
var sayHi = function () { console.log("Hi!"); }; 
```

和

```
function sayHello () { console.log("Hello"); } 
```

这些都不用`new`。

为了给他们打电话，让他​​们做他们的工作，你不需要使用`.call()`. `.call()`会起作用，但它有一个特殊的用途，你在很长一段时间内都不需要。

您需要做的就是：

```
sayHello();
sayHi(); 
```

当您想要制作某种对象时，应使用 New。

在 JavaScript 中创建对象非常简单：

```
var obj = {};
var person = { name : "Bob" };

person.name; // "Bob"
person.age = 32; 
```

使用对象非常非常容易。

但是在其他编程语言中，您需要`classes`的就像对象的蓝图一样。

在 JS 中，你可以创建一个这样的类：

```
function Person (name, age) { this.name = name; this.age = age; } 
```

然后像这样使用它：

```
var bob = new Person("Bob", 32);
bob.name; // "Bob";
bob.age;  // 32; 
```

看看我放哪里了`new`？
我用了一个造人的功能，我说我想`bob`成为一个`new Person`.

但同样，在 JS 中，这可以很简单：

```
var mike = { name : "Mike", age : 20 }; 
```

不必构建函数，不必使用`new`. 它刚刚奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:27:57.593

这些是完全不同的事情。第二个是标准的 javascript 函数*声明*（可以用 调用`sayHi();`），而第一个应该重写为

```
new (function sayHi() { alert('hi'); }); 
```

现在你可以看到它是一个[（命名的）函数*表达式*](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)，它直接传递给了[`new`操作符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)。这[不应该使用](https://stackoverflow.com/q/10406552/1048572)，如果你真的想立即调用它（[有应用程序](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)）使用`(function(){…})());`。

# python - 如何根据符合条件的元素在 Python 列表中获取一组（可能重叠）切片？

> ID：14934832
> 
> 赞同：0
> 
> 时间：2013-02-18T11:06:42.477
> 
> 标签：python, list

假设我有一个 python list `l=[1,2,3,4,5]`。我想找到所有以满足 function 的元素开头的 x 元素列表，或者如果没有足够的项目`f(e)`，则子列表将结束。`l`例如，假设`f(e)`is `e%2==0`，`x=3`我想得到`[[2,3,4],[4,5]]`.

有没有一种优雅或“pythonic”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:13:40.687

```
>>> f = lambda e: e % 2 == 0
>>> x = 3
>>> l = [1, 2, 3, 4, 5]
>>> def makeSublists(lst, length, f):
        for i in range(len(lst)):
            if f(lst[i]):
                yield lst[i:i+length]
>>> list(makeSublists(l, x, f))
[[2, 3, 4], [4, 5]]
>>> list(makeSublists(list(range(10)), 5, f))
[[0, 1, 2, 3, 4], [2, 3, 4, 5, 6], [4, 5, 6, 7, 8], [6, 7, 8, 9], [8, 9]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:13:53.413

使用列表推导：

```
>>> l = range(1,6)
>>> x = 3
>>> def f(e):
        return e%2 == 0
>>> [l[i:i+x] for i, j in enumerate(l) if f(j)]
[[2, 3, 4], [4, 5]] 
```

# joomla - joomla 扩展 UPS - 虚拟集市 - 设置配送方式

> ID：14934835
> 
> 赞同：0
> 
> 时间：2013-02-18T11:06:50.710
> 
> 标签：joomla, virtuemart

我们已经购买了扩展[http://extensions.virtuemart.net/extensions-virtuemart-2/ups-detail](http://extensions.virtuemart.net/extensions-virtuemart-2/ups-detail)以放入我们的网站。

我们已经配置了模块和我们的 UPS 帐户。我们面临的问题是关于交付方法。我们想在运输中显示“UPS Ground, UPS 3 Day Select, UPS 2 Day Air, UPS Next Day”。

在 joomla 配置页面中，当我们在交付方式中搜索这些选项时，这些选项不会出现，但其他选项会出现，例如用于国际交付的“Worldwide Express, Worldwide Express Plus, Worldwide Expedited”。

我们缺少什么，以便我们可以在配置面板中获得“2nd Day Air AM、2nd Day Air、3 Day Select”之类的选项。我们搜索了所有内容，但找不到。你能帮我么？

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:29:05.007

感谢乔宾。

我们更新了“商店”选项中的“附加信息”选项卡，并根据美国设置了供应商信息。

谢谢

# android - 在触摸时，即使我的代码总是给出正确的位置

> ID：14934837
> 
> 赞同：2
> 
> 时间：2013-02-18T11:06:51.960
> 
> 标签：android

我正在开发一个 Android 应用程序，我想知道是否可以在固定一个轴的情况下检测运动方向。例如，我想将手机放在桌子上，并在移动时检测方向（左、右、上、下）。距离不是必须的，我只想知道准确的方向。

谢谢！

我的代码是：

```
arg1.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View arg0, MotionEvent event) {

                    float startX = 0;
                    float startY;
                    float endX;
                    float endY;
                    switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        startX = (int) event.getX();
                        startY = (int) event.getY();
                        System.out.println("startX" + startX);
                        System.out.println("startY" + startY);
                        break;
                    case MotionEvent.ACTION_MOVE:

                        endX = event.getX();
                        endY = (int) event.getY();
                        System.out.println("endX" + endX);
                        System.out.println("endY" + endY);
                        float sub = endX - startX;
                        System.out.println("sub" + sub);
                        if ((endX - startX) < 100) {
                            arg0.setBackgroundColor(Color.GREEN);

                        }
                        if ((endX - startX) > 100) {
                            try {
                                TextView ph_tv = (TextView) arg0
                                        .findViewById(R.id.textnum);
                                String Pho_no = ph_tv.getText().toString();
                                arg0.setBackgroundColor(Color.RED);
                                Intent intent = new Intent(
                                        Intent.ACTION_CALL, Uri
                                                .parse("tel:" + Pho_no));
                                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                                startActivity(intent);
                                lv.setBackgroundColor(Color.BLACK);

                            } catch (ActivityNotFoundException e) {
                                Toast.makeText(
                                        getApplicationContext(),
                                        "Error in your phone call"
                                                + e.getMessage(),
                                        Toast.LENGTH_LONG).show();

                            }
                            section(path_name, lv1);

                        }
                        break;

                    case MotionEvent.ACTION_UP:
                        endX = (int) event.getX();
                        endY = (int) event.getY();
                    }
                    return true;
                }

            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:13:58.183

如果您想检测手指移动方向，我认为对您的情况使用 onTouchListener 不是一个好的解决方案。我建议你使用手势监听器这是左右的例子

```
class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            try {
                if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                    return false;
                // right to left swipe
                if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    Toast.makeText(SelectFilterActivity.this, "Left Swipe", Toast.LENGTH_SHORT).show();
                }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    Toast.makeText(SelectFilterActivity.this, "Right Swipe", Toast.LENGTH_SHORT).show();
                }
            } catch (Exception e) {
                // nothing
            }
            return false;
        }

    } 
```

您可以通过计算 Y 距离对上下进行相同的操作

如果您对我的回答有任何其他问题，或者您觉得我的回答不够清楚，请随时将问题留在评论中:)

希望我的回答对你有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:27:46.673

```
private final int mDragInterwell = 5;

private Point mStartPoint;

private final 

@Override
public boolean onTouch(View arg0, MotionEvent event) {

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        mStartPoint = new Point(event.getX(), event.getY());
        break;
    case MotionEvent.ACTION_MOVE:

        final Point current = new Point(event.getX(), event.getY());
        Log.d(getClass().getName(), decideMovement(current));
        break;

    case MotionEvent.ACTION_UP:
       break;
    }
    return true;
}

private String decideMovement(final Point point)
{
    String direction = "invalid";
    boolean changed  = false;
    if( ( mStartPoint.x - point.x ) > mDragInterwell )
    {
        direction = "left";
        changed   = true;
    }else if(  ( mStartPoint.x - point.x ) > -mDragInterwell  )
    {
        changed   = true;
        direction = "right";
    }else if(  ( mStartPoint.y - point.y ) > mDragInterwell  )
    {
        changed   = true;
        direction = "down";
    }else if(  ( mStartPoint.y - point.y ) > -mDragInterwell  )
    {
        changed   = true;
        direction = "up";
    }
    if(changed)
    {
        mStartPoint = point;
    }
    return direction;
} 
```

希望这会有所帮助..

# java - 冒泡排序算法实现

> ID：14934840
> 
> 赞同：-4
> 
> 时间：2013-02-18T11:06:54.090
> 
> 标签：java, algorithm, sorting, bubble-sort

我正在学习冒泡排序算法，我遇到了两种实现它的方法，所以我的问题是哪个更好，为什么？

第一

```
for(k=0;k<array.length-1;k++){ 
            if(array[k] > array[k+1]){
                int temp = array[k];
                array[k] = array[k+1];
                array[k+1] = temp;
            }
        } 
```

* * *

第二

```
for(i=array.length-1;i>=0;i--){
        for(k=0;k<i;k++){ 
            if(array[k] > array[k+1]){
                int temp = array[k];
                array[k] = array[k+1];
                array[k+1] = temp;
            }
        }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:30:54.350

不仅仅是关于哪个更好 - 首先是关于哪个对数组进行排序，答案是**第二个**

检查[这个](http://www.leepoint.net/notes-java/data/arrays/32arraybubblesort.html)以获得更多想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T16:38:06.790

The second one will sort the array. But you can reduce the comparisons in second loop by running it only when there is at least a single swap in last iteration.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T16:18:19.023

[我在 Wikipedia ( http://en.wikipedia.org/wiki/Bubble_sort](http://en.wikipedia.org/wiki/Bubble_sort) )中找到了更有效的方法

```
procedure bubbleSort( A : list of sortable items )
    n = length(A)
    repeat
       newn = 0
       for i = 1 to n-1 inclusive do
          if A[i-1] > A[i] then
             swap(A[i-1], A[i])
             newn = i
           end if
       end for
       n = newn
    until n = 0
end procedure 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T11:57:02.303

您的第一个实现无法正确排序，因为该算法只能切换 2 个相邻元素。

前任。

输入数据 {6,5,4,3,2}

第一次迭代使这个 -> {5,6,4,3,2} 现在 5 在第一个位置并且没有机会改变这个位置，因为循环索引（k）是 1。进一步迭代它会增加..

冒泡排序总是需要 2 个循环

```
public static void bubbleSort(int[] array){
    for (int i = 0; i < array.length - 1; i++) {
        for (int j = 0; j < array.length - i - 1; j++) {
            if(array[j] < array[j+1]){
                int tmp = array[j];
                array[j] = array[j+1];
                array[j+1] = tmp;
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-13T13:46:35.077

您的第一个解决方案将不起作用，它不会对数组进行排序。但是第二个会起作用，它将从最小到最大对数据进行排序。有关更多说明，请参见下文：

嗯，冒泡排序算法背后的想法是遍历数据的数组/集合，同时比较每对相邻的项目，如果它们的顺序错误则交换它们。重复遍历数组/列表，直到不需要交换，这表明列表/数组已排序。时间复杂度：O(n^2)。以及我们将使用原始数组的空间。让我们使用以下数组来说明上段中的讨论：

```
 //array of integer to be sorted
    int[] arrayToSort=new int[]{1,7,81,2,-2,9,9,6,-6};
    //repeat until we're done sorting 
    while (true){
        //flag to check if we did swap number(s)
        boolean didSort=false;
        /*
         *  this inner loop is being used to find numbers that need to be    
         *  swapped and then help in swapping them
         */
        for(int count=0;count<arrayToSort.length-1;count++){
            //check if we need to swap
            if(arrayToSort[count]>arrayToSort[count+1]){
                int temp=arrayToSort[count+1];
                arrayToSort[count+1]=arrayToSort[count];
                arrayToSort[count]=temp;
                //set our swap flag so that we will know that we did swap
                didSort=true;
            }

        }

        //check we did a swap in our last inner loop iteration if not will   
        //be done sorting, then break the outer loop
        if(!didSort){
            break;
        }   
    }

    //let's print the sorted array.
    for(int i=0;i<arrayToSort.length;i++){
        System.out.print(arrayToSort[i]+", ");
    } 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-18T13:55:13.863

不要使用冒泡排序（改用插入排序）。

编辑：

由于人们一直对此投反对票，请阅读[http://warp.povusers.org/grrr/bubblesort_misconceptions.html](http://warp.povusers.org/grrr/bubblesort_misconceptions.html)

冒泡排序是帕累托低效率的，因为它比插入排序和选择排序更慢且更难理解。只是不要使用（也不教）Bubblesort。

# xml - 使用 XSLT 修改 XML 文档的属性

> ID：14934844
> 
> 赞同：2
> 
> 时间：2013-02-18T11:07:11.300
> 
> 标签：xml, xslt

我有一个 XML 文件，其中包含`@url`元素的属性`<matimage>`。目前`@url`属性中有一个特定的图像名称，比如`triangle.png`. 我想应用 XSLT 并修改此 URL，使其类似于`assets/images/triangle.png`.

我尝试了以下 XSLT：

```
<?xml version="1.0"?>
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" />

  <!-- Copy everything -->
  <xsl:template match="*">
    <xsl:copy>
     <xsl:copy-of select="@*" />
     <xsl:apply-templates />
   </xsl:copy>
  </xsl:template>

 <xsl:template match="@type[parent::matimage]">
   <xsl:attribute name="uri">
     <xsl:value-of select="NEW_VALUE"/>
   </xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

作为第一步，我尝试用新值替换旧值，但这似乎不起作用。请告诉我如何为`@url`属性的现有值添加或附加新值。

这是示例 XML：

```
 <material>
    <matimage url="triangle.png">
        Some text
    </matimage>
  </material> 
```

期望的输出：

```
 <material>
    <matimage url="assets/images/triangle.png">
        Some text
    </matimage>
  </material> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T11:22:32.753

您想要实现的解决方案可能是：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <!-- Identity template : copy elements and attributes -->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template> 

    <!-- Match all the attributes url within matimage elements -->
    <xsl:template match="matimage/@url">
        <xsl:attribute name="url">
            <!-- Use concat to prepend the value to the current value -->
            <xsl:value-of select="concat('assets/images/', .)" />
        </xsl:attribute>
    </xsl:template>

</xsl:stylesheet> 
```

# javascript - 使用浮动图创建时间序列图，并以选定的时间格式显示选项视图图

> ID：14934849
> 
> 赞同：0
> 
> 时间：2013-02-18T11:07:25.293
> 
> 标签：javascript, jquery, flot

我正在尝试使用 flotcharts [http://www.flotcharts.org/](http://www.flotcharts.org/)创建时间序列图，并且我正在尝试将用户选项添加到选定的时间格式中，以显示每年或每月或每日格式等数据。但我无法在具有此功能的流程图中找到一个活生生的例子。我想知道 foltcharts 有这个内置功能还是我必须单独编写这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:37:43.627

I believe that [this example](http://www.flotcharts.org/flot/examples/axes-time) does most of what you're looking for.

# c# - 实体框架数据库第一个映射器问题

> ID：14934853
> 
> 赞同：2
> 
> 时间：2013-02-18T11:07:40.647
> 
> 标签：c#, sql, entity-framework, database-first

我正在使用带有 SQL Server 2008 R2 的 VS2010。

我是 c# 和实体框架的完整初学者。

我在下面的示例中遇到的问题是，当我尝试获取与特定选项卡关联的问题时，生成的 SQL 不正确。我认为这与我在 2 个引用同名字段的表上有一个 Tab_ID 外键这一事实有关吗？

但是，当我尝试获取与 Checksheets 关联的选项卡时，生成的 SQL 是正确的。我所做的一切都完全相同，但产生了不同的结果？

任何帮助将不胜感激。

下面我附上了使用的方法和输出以及我使用的数据库关系模型和映射器。

**与 CheckSheets 关联的选项卡（按预期工作）**

```
 public IQueryable<CheckSheetTab> getTabs(int checkSheetId)
    {
        //includes the foreign key information when returning Tab
        var allReturnInfo = CheckSheetTab.Include(x => x.Tab);
        var result = allReturnInfo.Where(p => p.CheckSheet_ID == checkSheetId);
        result = result.OrderBy(x => x.Order_ID);
        return result;
    } 
```

生成的 SQL

```
 {SELECT 
[Extent1].[Table_ID] AS [Table_ID], 
[Extent1].[Tab_ID] AS [Tab_ID], 
[Extent1].[CheckSheet_ID] AS [CheckSheet_ID], 
[Extent1].[Order_ID] AS [Order_ID], 
[Extent2].[Tab_ID] AS [Tab_ID1], 
[Extent2].[Tab_Desc] AS [Tab_Desc]
FROM  [dbo].[tbl_CheckSheet_Tabs] AS [Extent1]
INNER JOIN [dbo].[tbl_Tabs] AS [Extent2] ON [Extent1].[Tab_ID] = [Extent2].[Tab_ID]} 
```

**与标签相关的问题（不起作用）**

```
 public IQueryable<TabQuestion> getQuestions(int tabId)
    {
        //includes the foreign key information when returning Tab
        var allReturnInfo = TabQuestion.Include(x => x.Question);
        // NOTE FOR SOME REASON THIS IS NOT CREATING THE CORRECT SQL!!!!!!!!!
        var result = allReturnInfo.Where(p => p.Tab_ID == tabId);
        result = result.OrderBy(x => x.Order_ID);
        return result;
    } 
```

SQL PRODUCED - EXTENT 3 是问题，我不明白为什么会产生它。

```
{SELECT 
[Extent1].[Table_ID] AS [Table_ID], 
[Extent1].[Question_ID] AS [Question_ID], 
[Extent1].[Tab_ID] AS [Tab_ID], 
[Extent1].[Order_ID] AS [Order_ID], 
[Extent2].[Question_ID] AS [Question_ID1], 
[Extent2].[Question_Desc] AS [Question_Desc], 
[Extent2].[Parent_ID] AS [Parent_ID], 
[Extent3].[Tab_Tab_ID] AS [Tab_Tab_ID]
FROM   [dbo].[tbl_Tab_Questions] AS [Extent1]
INNER JOIN [dbo].[tbl_Questions] AS [Extent2] ON [Extent1].[Question_ID] = [Extent2].[Question_ID]
LEFT OUTER JOIN [dbo].[tbl_Questions] AS [Extent3] ON [Extent1].[Question_ID] = [Extent3].[Question_ID]} 
```

我创建了以下数据库：（我还没有 10 个发布图片的声誉，但链接如下） **[http://imgur.com/3Jchhlb](http://imgur.com/3Jchhlb)**

我为表设置了映射器，如下所示：

```
 class CheckSheetTabConfiguration : EntityTypeConfiguration<CheckSheetTab>
{
    public CheckSheetTabConfiguration() : base()
    {
        HasKey(x => x.Table_ID);

        Property(p => p.Tab_ID)
            .HasColumnName("Tab_ID");

        Property(p => p.CheckSheet_ID)
            .HasColumnName("CheckSheet_ID");

        Property(p => p.Order_ID)
            .HasColumnName("Order_ID");

        //add the foreign key constraint
        HasRequired(p => p.Tab)
            .WithMany()
            .HasForeignKey(x => x.Tab_ID);

        HasRequired(p => p.CheckSheet)
            .WithMany()
            .HasForeignKey(x => x.CheckSheet_ID);

        ToTable("tbl_CheckSheet_Tabs");
    }

}

class TabQuestionConfiguration : EntityTypeConfiguration<TabQuestion>
{
    public TabQuestionConfiguration()
        : base()
    {
        HasKey(x => x.Table_ID);

        Property(p => p.Tab_ID)
            .HasColumnName("Tab_ID");

        Property(p => p.Question_ID)
            .HasColumnName("Question_ID");

        Property(p => p.Order_ID)
            .HasColumnName("Order_ID");

        //add the foreign key constraint
        HasRequired(p => p.Question)
            .WithMany()
            .HasForeignKey(x => x.Question_ID);

        HasRequired(p => p.Tab)
            .WithMany()
            .HasForeignKey(x => x.Tab_ID);

        ToTable("tbl_Tab_Questions");
    }
} 
```

我的课程设置如下：

```
public class CheckSheetTab
{
    public Int32 Table_ID { get; set; }
    public Int32 Tab_ID { get; set; }
    public Int32 CheckSheet_ID { get; set; }
    public Int32 Order_ID { get; set; }
    public virtual Tab Tab { get; set; }
    public virtual CheckSheet CheckSheet { get; set; }
}

public class TabQuestion
{
    public Int32 Table_ID { get; set; }
    public Int32 Question_ID { get; set; }
    public Int32 Tab_ID { get; set; }
    public Int32 Order_ID { get; set; }
    public virtual Question Question { get; set; }  
    public virtual Tab Tab { get; set; }  
} 
```

***标签配置**

```
class TabConfiguration : EntityTypeConfiguration<Tab>
{
    public TabConfiguration() : base()
    {
        HasKey(x => x.Tab_ID);

        Property(p => p.Tab_Desc)
            .HasColumnName("Tab_Desc");

        ToTable("tbl_Tabs");
    }
} 
```

***问题配置**

```
class QuestionConfiguration : EntityTypeConfiguration<Question>
{
    public QuestionConfiguration() : base()
    {
        HasKey(x => x.Question_ID);

        Property(p => p.Question_Desc)
            .HasColumnName("Question_Desc");

        Property(p => p.Parent_ID)
            .HasColumnName("Parent_ID");

        ToTable("tbl_Questions");
    }
} 
```

***检查表配置**

```
class CheckSheetConfiguration : EntityTypeConfiguration<CheckSheet>
{
    public CheckSheetConfiguration() : base()
    {
        HasKey(x => x.CheckSheet_ID);

        Property(p => p.CheckSheet_Desc)
            .HasColumnName("CheckSheet_Desc");

        Property(p => p.Tab_Count)
            .HasColumnName("Tab_Count");

        ToTable("tbl_CheckSheets");
    }
} 
```

**基类**

```
 public class CheckSheet
{
    public int CheckSheet_ID { get; set; }
    public String CheckSheet_Desc { get; set; }
    public int Tab_Count { get; set; }
    public List<Tab> tabs { get; set; }
}

public class Tab
{
    public int Tab_ID { get; set; }
    public string Tab_Desc { get; set; }
    public List<Question> questions { get; set; }
}

public class Question
{
    public int Question_ID { get; set; }
    public int Question_Desc { get; set; }
    public int Parent_ID { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:55:57.170

我找到了错误的原因，这很简单，我试图将一个字符串填充到一个 int 中，我的错误处理没有达到标准，所以跳过它而不是记录它，结果错误表现为错误地生成 SQL。

问题：

```
public class Question
{
    public int Question_ID { get; set; }
    public int Question_Desc { get; set; }
    public int Parent_ID { get; set; }
} 
```

决议

```
public class Question
{
    public int Question_ID { get; set; }
    public string Question_Desc { get; set; }
    public int Parent_ID { get; set; }
} 
```

# python - 有没有办法在无效的 Char 值上恢复 iterparse？

> ID：14934854
> 
> 赞同：2
> 
> 时间：2013-02-18T11:07:41.860
> 
> 标签：python, lxml

我正在使用 lxml`iterparse`来解析一些大的 XML 文件（3-5Gig）。由于其中一些文件包含无效字符，`lxml.etree.XMLSyntaxError`因此会抛出 a。

使用 lxml.etree.parse 时，我可以提供一个解析器，它可以恢复无效字符：

```
parser = lxml.etree.XMLParser(recover=True)
root = lxml.etree.parse(open("myMalformed.xml, parser) 
```

有没有办法为 iterparse 获得相同的功能？

**编辑：** 编码在这里不是问题。在这些 XML 文件中存在无效字符，可以通过使用 recover=True 定义 XMLParser 来清除这些字符。因为我需要为此使用 iterparse，所以我不能使用自定义解析器。所以我在这里寻找上面的片段中提供的功能：

```
context = etree.iterparse(open("myMalformed.xml", events=('end',), tag="Foo") <-- cant recover 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:46:22.410

当您说无效字符时，您是指Unicode字符吗？如果是这样你可以试试

```
lxml.etree.XMLParser(encoding='UTF-8', recover=True) 
```

如果您的意思是格式错误的 XML，那么这显然是行不通的。如果您可以发布您的回溯，我们可以看到`XMLSyntaxError`将提供更多信息的性质。

# asp.net - 整合医学词典帮助asp输入文本：Textbox

> ID：14934861
> 
> 赞同：0
> 
> 时间：2013-02-18T11:07:57.493
> 
> 标签：asp.net, web-applications

我的要求是将医学词典集成到 asp.net 网络应用程序中。我有一个屏幕供医生用来输入每个患者的医疗报告文本。有更多的数据需要填写，而这些数据是医生最不喜欢的。他们需要整合医学词典，以便在他们开始在文本框中输入时获取术语。我用谷歌搜索这对我没有帮助。谁能帮我解决这个要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:59:47.570

我将开始研究具有自动完成支持的 Javascript 框架。

试试这个：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

# ios - 计算实体层次结构中的项目

> ID：14934862
> 
> 赞同：3
> 
> 时间：2013-02-18T11:07:59.243
> 
> 标签：ios, core-data, count, hierarchy

我遇到了一个问题，我确实解决了它，但我觉得它效率很低，这涉及遍历父/子引用的核心数据（iOS）实体层次结构来计算附加到某些实体的项目数量。

让我更具体一点。我有两种类型的实体：`Category`和`Attachment`.

实体通过`Category`父/子引用链接。`Categories`附件以多对一的形式链接（一个类别的多个附件）。

如果我想计算属于给定层次结构的附件数量`Category`，有没有`NSFetchRequest`比这更有效的方法？

```
NSInteger count = 0;

NSMutableArray *stack = [[NSMutableArray alloc] init];
[stack addObject:targetCategory];

while([stack count] > 0)
{
    Category *current = [stack lastObject];
    [stack removeLastObject];

    count += current.attachments.count;

    for (Category *cat in current.children)
    {
        [stack addObject:cat];
    }
} 
```

`targetCategory`是选择的根类别。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:29:06.397

如果您只需要计算对象，请使用`countForFetchRequest:error:`如下：

```
NSError *err = nil;
NSUInteger count = [moc countForFetchRequest:request error:&err];
if(count == NSNotFound) {
  // Handle error
} 
```

显然，@MartinR 的建议仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:36:38.417

*（用“这是不可能的”来回答是有风险的，但是）*我很确定没有递归地获取或计算对象的获取请求。您必须使用递归方法或按照您的方式遍历层次结构。

# sql-server-2008 - 在 SQL Server 2008 中为 smalldatetime 列设置默认值（以分钟为单位）

> ID：14934867
> 
> 赞同：0
> 
> 时间：2013-02-18T11:08:14.810
> 
> 标签：sql-server-2008

我无法为`smalldatetime`SQL Server 2008 中的列设置 5 分钟的默认值。感谢任何帮助

谢谢，绿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:34:05.147

你可以这样做：

```
CREATE TABLE #t(col TIME DEFAULT '00:05')
INSERT #t VALUES (DEFAULT)
SELECT  *
FROM    #t 
```

正如蒂姆建议的那样，更好的办法是使用`TIME`数据类型。

# cordova - 如何播放 PhoneGap 视频

> ID：14934869
> 
> 赞同：-1
> 
> 时间：2013-02-18T11:08:32.517
> 
> 标签：cordova

我是 PhoneGap 开发（Android）的新手。对于从 SD 卡/在线播放视频，这将是最佳选择。有没有人得到这个工作？

我尝试了很多选择，但似乎没有任何效果......但我认为 - 播放视频 - 应该是常见的场景之一，如果有人遇到这种情况 - 请给我一个工作样本......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:18:37.863

要从您的设备播放视频文件，您可以使用 videoplayer 插件 ( [https://github.com/macdonst/VideoPlayer](https://github.com/macdonst/VideoPlayer) )。但是，出于流式传输 youtube 视频的目的，我个人更喜欢将 android 的 webintents 与 youtube api 结合使用，因为这样可以直接从应用程序全屏播放 youtube 视频。如果您使用的是视频播放器插件，如果您尝试播放 youtube 视频，它将打开本机 youtube 应用程序。这一切都取决于你的要求。

# jquery - 如何使用 jQuery 对话框小部件标记帖子？

> ID：14934872
> 
> 赞同：1
> 
> 时间：2013-02-18T11:08:41.537
> 
> 标签：jquery, jquery-ui

我的目标是让用户点击一个标志链接并弹出一个对话框供用户输入一些文本来解释情况。我不完全确定我应该如何设置它，以便标志链接只拉出连接到被标记的帖子的对话框。这是我到目前为止所拥有的：

jQuery：

```
$(document).ready(function() {

    $(".flagDialog").dialog({ 
        autoOpen: false,
        resizable: false,
        width: 550      
             });

    $(".flag").click(function() {
        var target = $(this);
        $(".flagDialog").dialog( "open" );
        $(".flagDialog").dialog("widget").position({
           my: 'left top',
           at: 'left bottom',
           of: target
        });
    });
}); 
```

HTML：

```
while($row = mysql_fetch_assoc($result)) {
     extract($row);

     <div class='flag'>Flag</div>
     <div class="flagDialog" title="Flag">
        <form action="flag.php" class="flagForm" method="post">
             <textarea name="flag_input" class="flagInput" rows="6" cols="55"><?php echo $username; ?></textarea>
         </form> 
     </div>
   } 
```

目前，当我单击任何标志链接时，所有已退出的对话框都抛出了 while 循环弹出窗口，这是有道理的，我只是不确定应该如何区分它们并在jQuery 方面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:17:16.537

您必须以某种方式为标志提供有关其自身的更多信息，生成标志-div 的行将看起来像这样：

```
 <div class="flag" alt="<?php echo $row->ID; ?>">Flag</div> 
```

您只需将有关标志的信息存储在 div 的 alt-Attribute 中

在 jQuery 中，您可以像这样引用 alt-Attribute：

```
$(".flag").click(function() {
    var alt = $(this).attr("alt"); //Do something with it. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:27:54.757

您需要分别识别每个“标志”和对话框（通过 ID、类或其他属性）

或者

如果您的代码 HTML 看起来像您的示例，您可以使用[next() 选择器](http://api.jquery.com/next/)：

```
$(".flag").click(function() { 
    $(this).next('div.flagDialog').dialog( "open" );
    $(this).next('div.flagDialog').dialog("widget").position({
       my: 'left top',
       at: 'left bottom',
       of: $(this)
    });
}); 
```

# python - Werkzeug 中的线程和本地代理。用法

> ID：14934885
> 
> 赞同：6
> 
> 时间：2013-02-18T11:09:19.713
> 
> 标签：python, import, flask, werkzeug

首先，我想确保我理解功能的分配是正确的。分配给通过线程内的模块（包）共享变量（对象）的本地代理功能。我对吗？

其次，我的用法仍然不清楚，可能是因为我误解了一个作业。我使用烧瓶。如果我有两个（或更多）模块：A，B。我想将对象 C 从模块 A 导入到模块 B。但我不能以通常的方式执行此操作`from A import C`，因为它会导致循环导入，然后是 ImportError . 如何使用 Werkzeug 本地代理解决此问题？我应该和 Werkzeug 一起做吗？

模块 A：

```
from werkzeug.local import LocalSomething # LocalProxy or LocalStack

C = 'C'
# Somehow add C to LocalSomething 
```

模块 B：

```
from werkzeug.locla import LocalSomething

C = LocalSomething()['C'] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T12:01:25.870

模块 Z：

```
from werkzeug.local import Local
myLocals = Local() 
```

模块 A：

```
from Z import myLocals
myLocals.C = "C" 
```

模块 B：

```
from Z import myLocals
C = getattr(myLocals, "C", None) 
```

这是你要找的吗？

# c++ - 链表（插入头部）

> ID：14934891
> 
> 赞同：-2
> 
> 时间：2013-02-18T11:09:33.457
> 
> 标签：c++

```
template <class T>
List<T>::~List()
{                
   ListItem<T> *temp,*temp1;
   temp=head;         
   while (temp->next!=NULL)         
   {
          temp1=temp;
          temp=temp->next;
          delete [] temp1;
   }        
}

/* This class just holds a single data item. */ 
template <class T>
struct ListItem
{
vector<string> words;
T value;
ListItem<T> *next;
ListItem<T> *prev;

ListItem(T theVal)
{
    this->value = theVal;
    this->next = NULL;
    this->prev = NULL;
}
};

template <class T>
void List<T>::insertAtHead(T item)
{
 ListItem<T> *node=new ListItem<T>(item);
 if (head==NULL)
 {
     head=node;
 }
 else
 {
     node->next=head;
     head->prev=node;
     head=node;
 }           
}
int main()
{
List<int> Mylist;
for (int i=20;i>0;--i)
{
    Mylist.insertSorted(i);
}
cout<<Mylist.getTail()->value<<endl;
system("PAUSE");
return 0; 
```

}

我正在使用类和模板制作链接列表。当我运行此代码时，它运行良好，但是当我按下一个键退出时，出现以下错误：“main.exe 已停止工作”我正在使用 Dev c++。我有添加了析构函数代码。我没有看到任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:54:15.973

您必须始终`new`与`delete`和`new[]`配对`delete[]`，但您有不匹配

```
ListItem<T> *node=new ListItem<T>(item);
//                ^^^

delete [] temp1;
//^^^^^^^ 
```

# jquery - 切换箭头图像更改

> ID：14934897
> 
> 赞同：0
> 
> 时间：2013-02-18T11:09:52.593
> 
> 标签：jquery, css

我想根据特定的切换面板更改切换箭头图像

[http://jsfiddle.net/47MRH/1/](http://jsfiddle.net/47MRH/1/)

基于点击我想在向右和向下箭头之间切换

CSS：-

```
.icon
{
height:14px;
width:14px;
float:left;
position:relative;
margin-right:10px;
background:url("http://glyphicons.com/wp-   content/themes/glyphicons/images/glyphicons_halflings.png") no-repeat;
}

.icon-rightarrow
{
background-position:-456px -72px;
}

.icon-downarrow
{
background-position:-313px -119px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:16:03.113

您可以使用[AddClass](http://api.jquery.com/addClass/)和[RemoveClass](http://api.jquery.com/removeClass/)函数执行此操作。

以下将向右箭头更改为向下箭头：

```
$("#MyElementId").removeClass("icon-rightarrow");
$("#MyElementId").addClass("icon-downarrow"); 
```

[这是您更新的示例](http://jsfiddle.net/47MRH/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:16:57.653

## 添加这一行：http: [//jsfiddle.net/47MRH/2/](http://jsfiddle.net/47MRH/2/)

```
j(this).closest('li').find('.icon')
                     .toggleClass('icon-rightarrow, icon-downarrow'); 
```

使用`.toggleClass()`to`toggle between the classes`和`right`箭头`down`图标。

# c# - 如何覆盖自定义控制事件？

> ID：14934900
> 
> 赞同：0
> 
> 时间：2013-02-18T11:09:58.960
> 
> 标签：c#, events, gridview, overriding

我制作了一个继承自 GridView 的自定义 gridView 类。

```
public class CustomGridView : GridView {} 
```

它在 footerRow 中添加了一个文本框，我想直接在我的页面中而不是在课堂上管理此文本框的更改事件。

就像是 ：

```
public override void txtSearch_TextChanged(object sender, EventArgs e) { } 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:11:46.663

您必须向您添加一个新事件`CustomGridView`并在文本框事件的处理程序中引发该`TextChanged`事件。

所以，在你的`CustomGridView`：

```
public event EventHandler FooterTextChanged;

private void RaiseFooterTextChanged()
{
    var handler = FooterTextChanged;
    if(handler == null)
        return;

    handler(this, EventArgs.Empty);
}

public override void txtSearch_TextChanged(object sender, EventArgs e)
{
    RaiseFooterTextChanged();
} 
```

在使用的类中`CustomGridView`：

```
customGridView.FooterTextChanged += OnGridFooterTextChanged; 
```

# jquery - 如何将光标移动到textarea中的特定单词？

> ID：14934902
> 
> 赞同：3
> 
> 时间：2013-02-18T11:10:02.440
> 
> 标签：jquery

在文本区域中，我有后续行，

```
hello world. <h2>sub heading</h2>
<img src="" alt="image.jpg"><h3>Test</h3>
More text
<img src="" alt=""> 
```

我希望能够单击一个按钮，将光标移动到空的 alt 属性。如果有“h”标签，那么它们的顺序是否正确。（应该先有 h1 标签，然后是 h2 标签）。如果它们的顺序不正确，则将光标移动到下一个“h”标签。（本示例将光标移动到 h2 标签）。最后光标将移动到最后一个 alt 属性。然后，如果我再次单击按钮，光标将再次移动到“h2”标签。我有以下代码，

```
<script type = "text/javascript">            
      (function ($, undefined) {
 $.fn.getCursorPosition = function() {
    var el = $(this).get(0);
    var pos = 0;
    if('selectionStart' in el) {
        pos = el.selectionStart;
    } else if('selection' in document) {
        el.focus();
        var Sel = document.selection.createRange();
        var SelLength = document.selection.createRange().text.length;
        Sel.moveStart('character', -el.value.length);
        pos = Sel.text.length - SelLength;
    }
    return pos;
  }
})(jQuery);

function setSelectionRange(input, selectionStart, selectionEnd) {
if (input.setSelectionRange) {
input.focus();
input.setSelectionRange(selectionStart, selectionEnd);
}
else if (input.createTextRange) {
var range = input.createTextRange();
range.collapse(true);
range.moveEnd('character', selectionEnd);
range.moveStart('character', selectionStart);
range.select();
}
 else if(input.createTextRange){
 var range = elt.createTextRange();
 range.move('character', pos);
  range.select(); 
 }
 }

 function setCaretToPos (input, pos) {
 setSelectionRange(input, pos, pos);
 }

 function nextAlt(input) {
 var current = input.getCursorPosition();
 var search = input.val().substr( ( 0 == current ? 0 : current + 1 ) );
 var pos = current + search.search(/<[a-zA-Z]+(>|.*?[^?]>)/) + 1;
 if (-1 == pos) {
    alert("No elements found");
 } else {
    setCaretToPos(input.get(0), pos);
 }
 }
    </script> 
```

文本区域和按钮内的文本：

```
 <textarea id="textarea">
 hello world. <h2>sub heading</h2>
 <img src="" alt="image.jpg"><h3>Test</h3>
 More text
 <img src="" alt="">
 </textarea>
 <br>
 <a onclick="nextAlt($('#textarea'));">Next</a> 
```

上面的代码在 IE 中不起作用（需要跨浏览器）。它将光标移动到不同的标签，但我想在将光标放置到特定位置之前使用不同的条件。例如，我想检查标题标签的顺序。如果使用了 h2 和 h3，那么它应该检查 h1 标签并将光标移动到 h2 标签。然后，如果用户再次单击该按钮，它将移动到 alt="" 属性（缺少替代文本）而不是 h3 标记，因为在 h2 之后标题标记的顺序是可以的。当用户再次单击按钮到达末尾时，光标将再次返回“h2”标签。有人可以帮我吗。谢谢

# android - 在 zip 上播放 .mp4 文件而不提取 zip

> ID：14934903
> 
> 赞同：10
> 
> 时间：2013-02-18T11:10:05.997
> 
> 标签：android, zip, android-videoview

在 SD 卡上，我有一个包含一个视频文件 (.mp4) 的 zip 文件。我需要通过 VideoView 播放该视频文件而不提取 zip。

到目前为止，我已经尝试过：

```
ZipFile zipFile = new ZipFile(new File("/sdcard/checking.zip"));
ZipEntry zipEntry = zipFile.getEntry("checking.mp4");
InputStream inStream  = zipFile.getInputStream(zipEntry); 
```

但我没有找到任何从`InputStream`. `zipEntry.getSize()`确实返回值。

`videoView.setVideoURI(Uri.parse("//sdcard/checking.zip!/checking.mp4"));`我从[这里](https://stackoverflow.com/questions/8664247/how-to-read-a-file-directly-from-a-zip-file-without-extracting-it-in-android)试过

但它显示“无法播放视频”。那么我该如何在android上做到这一点（标题中提到）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T12:59:21.973

老实说，我也有同样的问题。但是在扩展文件文档中，它说您需要以特定方式压缩文件才能直接从 zip 文件夹中读取。您不应该对里面的媒体应用任何压缩。

希望这可以帮助...

我只是真的不知道如何像那样压缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:45:46.507

使用 VideoView 或 MediaPlayer 你不能这样做

# c++ - Coverity 和 C++：堆（带有新的）与堆栈分配

> ID：14934911
> 
> 赞同：2
> 
> 时间：2013-02-18T11:10:43.577
> 
> 标签：c++, static-analysis, coverity

我正在使用*覆盖率*（5.5.1）（以及其他）来强化我的代码。我偶然发现了一个问题，现在我怀疑我的覆盖设置不完整。看看这个例子：

```
class A
{
    int _a,_b;
public:
    A(int b) : _a(_b), _b(b)
    { }
};

int main(void)
{
    A *a1 = new A(5);
    delete a1;

    A a2(5);
    return 0;
} 
```

`_b`可以看出，我在`_a`使用`b`. 在[这个](https://stackoverflow.com/questions/14139265/c-init-list-using-non-initialized-members-to-initialize-others-gives-no-warni)问题中，我了解到编译器或任何其他工具发出这样的警告会“很高兴”。

与我对现在发现的问题的最初理解相反，coverity 实际上会发出一个完美匹配的缺陷（*UNINT*），但仅在堆栈上分配时，而不是在使用`new`. 所以在我的`main`-function 中，我得到了警告，`A a2(5)`但没有得到`A *a1 = new A(5)`.

在我看来，覆盖率在使用`new`时处理对构造函数的调用与在堆栈上创建对象时不同。

我的覆盖率配置中有什么我忽略的吗？在堆上分配时，我该怎么做才能发出警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:59:00.343

事实证明，根据支持，这是 Coverity 中的一个已知错误（即使在当前版本中）。次年夏天发布的版本可能会提供修复程序。

该错误列在 ID 下：50128 *UNINIT FN：初始化之前在构造函数中使用的成员*，因此将在修复和发布时放入发行说明中。

# sql - 如何从表中选择独特的年份

> ID：14934913
> 
> 赞同：2
> 
> 时间：2013-02-18T11:10:50.797
> 
> 标签：sql, sql-server-2008

我在 SQL Server 2008 的表中有行

![行](../Images/bddf03bab5180bb8b860c97f7a336718.png)

请告诉我如何从表中选择唯一的年份？

PS：在这个表中唯一的年份是 2013

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T11:11:40.037

使用该[`YEAR`](http://msdn.microsoft.com/en-us/library/ms186313.aspx)函数，`DISTINCT`如下所示：

```
SELECT DISTINCT YEAR([date])
FROM Tablename; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/ad3bb/3)

这会给你：

```
| YEAR |
--------
| 2013 | 
```

* * *

要使用 order by 子句，请给它一个别名并按此别名排序，而不是原始名称，如下所示：

```
SELECT DISTINCT YEAR([date]) AS Year
FROM Tablename
ORDER By Year; 
```

# php - PHP DateTime 格式在某些时区返回 false

> ID：14934917
> 
> 赞同：0
> 
> 时间：2013-02-18T11:11:02.233
> 
> 标签：php, datetime, timezone

我正在尝试获取所有 [PHP 标准时区](http://php.net/manual/en/timezones.php)的当前时间。我正在使用下面的代码来获取所有时区的当前时间。

```
$dateTimeObj = new DateTime( "now", new DateTimeZone( $timezoneName ) );
return $dateTimeObj->format("D, g:i a"); 
```

当 $timezoneName 是以下之一时，$dateTimeObj->format() 返回 false

```
America/Metlakatla,
America/North_Dakota/Beulah,
America/Sitka, 
```

为什么会发生这种情况？

# html - HTML5 上不可编辑的 div

> ID：14934918
> 
> 赞同：0
> 
> 时间：2013-02-18T11:11:08.047
> 
> 标签：html, contenteditable

我刚开始 html 看我下面的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
<title>jklm</title>
</head>
<body style="background-color: black;">
<div contenteditable="false" id="uiti" 
 style="width: 100%; background-color: whitesmoke;">
<img src="universal.bmp" alt="universal" height="80"
 width="60"> &nbsp; &nbsp; &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp;kkk</div>
</body>
</html> 
```

上面创建了一个可以编辑的 div。你可以在上面写任何我不想要的东西。我只是希望它不可编辑怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:16:05.053

我在您的代码中看到了一些小问题：

您需要通过在 > ...之前添加 /来关闭**img标签，如下所示：**

```
<img src="universal.bmp" alt="universal" height="80" width="60"/> 
```

还有……你不需要 contenteditable="false"。默认情况下不可编辑。如果您想让它可编辑，请执行以下操作：`contenteditable="true"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:19:48.773

默认情况下，div 是不可编辑的。您添加该功能并将属性**contenteditable**设置为 true 或仅添加属性本身。

删除它（或将其设置为 false）并将缺少的**/>**添加到图像

```
<body style="background-color: black;">
    <div contenteditable="false" id="uiti" style="width: 100%; background-color: whitesmoke;">
     <img src="universal.bmp" alt="universal" height="80" width="60" /> 
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kkk
    </div>
</body> 
```

这是一个[小提琴](http://jsfiddle.net/JuwVx/1/)

# postgresql - PostgreSQL 和 Glassfish EJB__TIMER__TBL 表

> ID：14934920
> 
> 赞同：3
> 
> 时间：2013-02-18T11:11:19.710
> 
> 标签：postgresql, timer, glassfish

我正在尝试使用 Glassfish 提供的计时器服务。因此，我必须`EJB__TIMER__TBL`在 Glassfish 中创建一个名为并配置 jdbc 资源的表。

我想将此表存储在 postgreSQL 上名为`glassfish`. 所以我的 ddl 就是这个（我将`BLOB`类型替换为`BYTEA`）：

```
CREATE SCHEMA glassfish;

CREATE TABLE glassfish.EJB__TIMER__TBL (
    CREATIONTIMERAW      BIGINT        NOT NULL,
    BLOB                 BYTEA,
    TIMERID              VARCHAR(255)  NOT NULL,
    CONTAINERID          BIGINT        NOT NULL,
    OWNERID              VARCHAR(255)  NULL,
    STATE                INTEGER       NOT NULL,
    PKHASHCODE           INTEGER       NOT NULL,
    INTERVALDURATION     BIGINT        NOT NULL,
    INITIALEXPIRATIONRAW BIGINT        NOT NULL,
    LASTEXPIRATIONRAW    BIGINT        NOT NULL,
    SCHEDULE             VARCHAR(255)  NULL,
    APPLICATIONID        BIGINT        NOT NULL,
    CONSTRAINT PK_EJB__TIMER__TBL PRIMARY KEY (TIMERID) 
);

DROP ROLE IF EXISTS glassfish;                      
CREATE ROLE glassfish WITH NOINHERIT LOGIN PASSWORD '...';
REVOKE ALL PRIVILEGES ON ALL TABLES IN SCHEMA glassfish FROM glassfish;
REVOKE ALL PRIVILEGES ON ALL FUNCTIONS IN SCHEMA glassfish FROM glassfish;
GRANT USAGE ON SCHEMA glassfish TO glassfish;
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA glassfish TO glassfish;
GRANT EXECUTE ON ALL FUNCTIONS IN SCHEMA glassfish TO glassfish;
GRANT USAGE ON ALL SEQUENCES IN SCHEMA glassfish TO glassfish;
ALTER USER glassfish SET search_path to 'glassfish'; 
```

我为 Glassfish 配置了一个 jdbc 池和资源：

```
asadmin create-jdbc-connection-pool 
--datasourceclassname org.postgresql.ds.PGConnectionPoolDataSource 
--restype javax.sql.ConnectionPoolDataSource 
--property User=glassfish:Password=...:PortNumber=5432:DatabaseName=...:ServerName=localhost jdbc/simPool/glassfish

asadmin create-jdbc-resource --connectionpoolid jdbc/simPool/glassfish jdbc/sim/glassfish 
```

我正确输入`jdbc/sim/glassfish`了 jdbc 资源以用于 Glassish GUI 中的计时器服务。

每次我部署我的应用程序时，我都会收到 Exception ：

```
[#|2013-02-18T11:42:42.562+0100|WARNING|glassfish3.1.2|org.eclipse.persistence.session.file

:/E:/softs/serveurs/glassfish3_1122/glassfish/domains/domain1/applications/ejb-timer-service-app/WEB-INF/classes/___EJB__Timer__App|_ThreadID=58;_ThreadName=Thread-2;|Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERREUR: la relation « EJB__TIMER__TBL » n'existe pas
  Position : 193
Error Code: 0
Call: SELECT "TIMERID", "APPLICATIONID", "BLOB", "CONTAINERID", "CREATIONTIMERAW", "INITIALEXPIRATIONRAW", "INTERVALDURATION", "LASTEXPIRATIONRAW", "OWNERID", "PKHASHCODE", "SCHEDULE", "STATE" FROM "EJB__TIMER__TBL" WHERE (("OWNERID" = ?) AND ("STATE" = ?))
    bind => [2 parameters bound]
Query: ReadAllQuery(name="findTimersByOwnerAndState" referenceClass=TimerState sql="SELECT "TIMERID", "APPLICATIONID", "BLOB", "CONTAINERID", "CREATIONTIMERAW", "INITIALEXPIRATIONRAW", "INTERVALDURATION", "LASTEXPIRATIONRAW", "OWNERID", "PKHASHCODE", "SCHEDULE", "STATE" FROM "EJB__TIMER__TBL" WHERE (("OWNERID" = ?) AND ("STATE" = ?))")
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:644)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:535)
    at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:1717) 
```

`EJB__TIMER__TBL`所以Glassfish 似乎无法访问我的桌子。

当我创建另一个项目时，使用`persistence.xml`与我上面的池连接相同的凭据配置一个文件并创建一个简单的查询`SELECT COUNT(*) FROM EJB__TIMER__TBL`，我收到`0`所以我的连接已经建立，并且访问的默认模式与预期的`glassfish`一样。

里面有一些ddls，但postgresql都没有……那我在`${glassfish_root}\glassfish\lib\install\databases`哪里做错了？

注意：当我测试使用 MySQL jdbc 资源配置服务计时器时，它的工作...

感谢帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T13:52:19.977

好的，我找到了我的问题的解决方案。

我不知道 SQL 可以是`case sensitive`. Glassfish`SELECT ... FROM "EJB__TIMER__TBL"`使用双引号调用，因此我必须创建一个名为“EJB__TIMER__TBL”的表，而不是“ejb__timer__tbl”或其他任何名称。

解决方法就是用双引号重新创建我的表：

```
CREATE TABLE glassfish."EJB__TIMER__TBL" (
"CREATIONTIMERAW"      BIGINT        NOT NULL,
"BLOB"                 BYTEA,
"TIMERID"              VARCHAR(255)  NOT NULL,
"CONTAINERID"          BIGINT        NOT NULL,
"OWNERID"              VARCHAR(255)  NULL,
"STATE"                INTEGER       NOT NULL,
"PKHASHCODE"           INTEGER       NOT NULL,
"INTERVALDURATION"     BIGINT        NOT NULL,
"INITIALEXPIRATIONRAW" BIGINT        NOT NULL,
"LASTEXPIRATIONRAW"    BIGINT        NOT NULL,
"SCHEDULE"             VARCHAR(255)  NULL,
"APPLICATIONID"        BIGINT        NOT NULL,
CONSTRAINT "PK_EJB__TIMER__TBL" PRIMARY KEY ("TIMERID") 
); 
```

# php - 计算加班时间并将加班时间更新到表格

> ID：14934921
> 
> 赞同：0
> 
> 时间：2013-02-18T11:11:19.110
> 
> 标签：php, mysql

我有表列`workhours`和`overtime`，我想做一个 SQL 或 PHP 查询来检查`UPDATE`工作时间是否超过 8 小时，如果是，那么它是加班到加班列。

这是我的桌子：

```
id   workinghours    overtime
1,   4.79,           ---
2,   8.73,           ---
3,   7.97,           --- 
```

例如，在第二行有 8.73 小时的工作，因此它将 0.73 小时更新到加班列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:27:47.017

询问 ：

```
update work set overtime= (case when working > 8 then (working - 8) else null end); 
```

检查 [SQL Fiddle 演示](http://sqlfiddle.com/#!2/fa949/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:13:34.060

尝试这样的事情：

```
update mytable
    set overtime =
        case when workinghours > 8 then workinghours - 8 else 0 end
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:28:04.010

```
update YourTable 
       set overtime=workinghours-8 
           where workinghours>8 
```

# c# - 使用基类给出的调用泛型不能从基类转换为 T

> ID：14934924
> 
> 赞同：5
> 
> 时间：2013-02-18T11:11:26.647
> 
> 标签：c#, generics

我有以下设置，似乎我的对象无法转换为泛型类型。虽然它实际上是基类。为什么这不起作用？这对我来说似乎很合乎逻辑。

```
public class AList<T> where T : A
{
    void DoStuff(T foo)
    {
    }

    void CallDoStuff()
    {
        DoStuff(new A()); // ERROR: Cannot convert A to T
    }
}

public class A
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:16:04.277

这里的问题是约束说`T`必须是`A` *或派生自的类`A`*。
现在，当您`AList`使用具体类型进行实例化时，`T`是一个非常具体的类。如果你没有`AList`用`A`它自己实例化，而是用它的一个子类实例化，那么它`T`就是`A`.

您不能将具有基类的运行时类型的实例转换为其子类之一，因为它会丢失子类添加的所有信息。

例子：

```
public class Animal
{
    public int Foo { get; set; }
}

public class Cat : Animal
{
    public int Bar { get; set; }
}

Derived d = new Base(); 
```

您希望该代码能够正常工作吗？当然不是，因为 a`Cat`也是 a`Animal`但 a`Animal`不是 a `Cat`。
如果您希望上面的代码能够实际工作，请问问自己在执行以下代码时应该发生什么：`d.Bar = 42;`
`Animal`不包含`Bar`.

您的代码中也发生了同样的事情 - 它只是被游戏中的泛型所掩盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:15:13.173

`T`也可以是派生自的类，`A`因此您不能将 instance of`A`作为 type 的参数`T`。类似于调用方法的东西，它接受`int`with 和 type 的参数`object`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:14:06.477

`object`这与无法`int`隐式转换为的原因相同。

该方法需要一个子类，并且您正在传递父类，因此您需要显式强制转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T11:15:29.670

因为您要求 T 扩展 A。所以您可以用 A 替换 T，但不能用 T 替换 A。

if Cat : Animal 并不意味着你总是可以将 Animal 转换为 Cat。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T11:18:12.693

尝试并使用`Activator`给你一个`A`from的实例，`T`因为你知道这`T`必须是`A`由于你的约束，所以不需要`new A()`像你一样在任何地方使用`T`，所以你可以只创建一个`T`.

```
T obj = Activator.CreateInstance<T>();
DoStuff(obj); 
```

或者像其他答案提到的那样做一个演员`object`，但这并不适用于所有情况。

```
T obj = (T)new A();
DoStuff(obj); 
```

# naming-conventions - 使用 Windsor 的工厂进行实例化

> ID：14934926
> 
> 赞同：0
> 
> 时间：2013-02-18T11:11:29.223
> 
> 标签：naming-conventions, castle-windsor

下面的代码运行良好，并成功为**DummyComponnent**类创建了一个实例。但是当我将工厂方法名称更改`CreatDummyComponnent()` 为`GetDummyComponnent()`或除**Creat**作为方法名称的开头之外的任何其他名称时，就会出现问题，比如`AnyThingComponent`抛出异常。工厂方法是否有任何指定的命名规则？

```
using System;
using Castle.Facilities.TypedFactory;
using Castle.MicroKernel.Registration;
using Castle.Windsor;

namespace AsFactoryImplementation
{
    public interface IDummyComponnentFactory
    {
        IDummyComponnent CreatDummyComponnent();
//        void Relese(IDummyComponnent factory);
    }

    public interface IDummyComponnent
    {
        void Show();
    }

    public class DummyComponnent:IDummyComponnent
    {
        public DummyComponnent()
        {
            Console.WriteLine("we are working here");
        }
        public void Show()
        {
            Console.WriteLine("just testing this for better performance");
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var container = new WindsorContainer();
            container.AddFacility<TypedFactoryFacility>();

            container.Register(Component.For<IDummyComponnent>().ImplementedBy<DummyComponnent>().Named("FirstConnection"),
                Component.For<IDummyComponnentFactory>().AsFactory());

            var val = container.Resolve<IDummyComponnentFactory>();
            var iDummy = val.CreatDummyComponnent();
            iDummy.Show();
                Console.WriteLine("OK its done ");
                Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:26:10.313

您应该能够使用任何东西来启动 Factory 上的方法名称，除了以 Get 开头。

如果您从 Get 开始，它将尝试按名称而不是按接口解析组件。因此，在您的示例中起作用的是：

var iDummy = val.GetFirstConnection();

祝你好运，

马尔维恩。

# html - 如何从我的页面禁用 Skype 图标？

> ID：14934927
> 
> 赞同：-1
> 
> 时间：2013-02-18T11:11:29.740
> 
> 标签：html, css, skype

如何禁用我在我的页面中发布的电话号码旁边显示的 Skype 图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:35:35.113

我看到我的问题是重复的，但由于某种原因，这个答案对我不起作用。我设法通过在其中添加 html 注释来禁用该图标。

```
555-<!---->409.1115. 
```

# spring - spring 集成的多个入站通道适配器使用同一通道

> ID：14934931
> 
> 赞同：4
> 
> 时间：2013-02-18T11:11:49.323
> 
> 标签：spring, integration

我正在使用 spring 集成的入站通道适配器。我想在两个不同的目录下轮询 - 每个文件类别一个 - 并解析位于那里的文件。我使用的代码是：

```
<int:channel id="inputChannel"/>

<file:inbound-channel-adapter id="fileInOne"                        
                              directory="myDirOne"
                              auto-create-directory="true"
                              channel = "inputChannel">
    <int:poller id="one" cron="1/10 * * * * *"/>
</file:inbound-channel-adapter>

<file:inbound-channel-adapter id="fileInTwo"                        
                              directory="myDirTwo"
                              auto-create-directory="true"
                              channel = "inputChannel">
    <int:poller id="two" cron="1/10 * * * * *"/>
</file:inbound-channel-adapter> 
```

两个入站通道适配器使用相同的通道。所以我想知道文件是从哪个入站通道适配器加载的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:27:22.590

这是我能想到的两种方式：

一个。将每个流传递给一个标头丰富器，添加一个自定义标头，告诉您从哪个目录开始，然后到 inputChannel。

```
<file:inbound-channel-adapter id="fileInOne"                        
                              directory="myDirOne"
                              auto-create-directory="true"
                              channel = "dirOneEnricher">
    <int:poller id="one" cron="1/10 * * * * *"/>
</file:inbound-channel-adapter>

<int:header-enricher input-channel="dirOneEnricher" output-channel="inputChannel">
    <int:header name="fileCategory" value="dirOneTypeCategory"/> 
</int:header-enricher> 
```

..

湾。由于有效负载是 a `java.io.File`，您可以使用 API 找出该文件属于哪个目录并采取一些措施。

# c++ - 代码执行：如何手动创建多维数组？

> ID：14934932
> 
> 赞同：1
> 
> 时间：2013-02-18T11:11:53.883
> 
> 标签：c++, visual-c++, multidimensional-array

如果我手动输入此脚本并调用计算器：

```
integer array[100]; 
```

然后我的计算器将创建一个`vector<int>`名为“array”的对象，其中包含 100 个元素。

但是 C++ 代码是独一无二的。例如，如果我输入并调用：

```
integer array[100][100];
integer array[100][100][100];
//etc 
```

那么模板`vector<int>`是非法的.... :(

很烦人！我试过了，但找不到更好的解决方案。谁能给我一些提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:30:04.247

这个答案涵盖了通常不同的方法。

* * *

要支持**任意嵌套、动态大小的**数组（因此嵌套数组的深度在编译时不受限制），您应该使用类似以下的内容。

脚本语言中的变量类型应该是：

*   整数
*   漂浮
*   （......您想要支持的其他原始类型......）
*   *任何*这些类型的数组（包括数组）
*   （...其他容器类型，例如关联地图，如果您想支持它...）

这通常使用“变体”类型来完成，例如 Qt 中的 Boost Variant 或 QVariant。变体类型基本上是一组类型的联合（所以它是*其中*之一）加上一个类型描述符，它告诉它实际包含的类型。

所以可以表示任何类型的数组，如果这个“任何类型”又是一个数组。因此，您可以支持嵌套数组的动态深度。

请注意，“任何类型的数组”实际上应该是这种变体类型的向量。Boost Variant 的问题是您必须明确列出它可以作为模板参数保存的类型。这将导致递归：

```
boost::variant<int, float, ..., std::vector<boost::variant<..., ...> > >
                                            ^^^^^^^^^^^^^^^^^^^^^^^^
                                                    recursion 
```

在 Qt 中有 QVariant 类型，它基本上可以容纳 Qt 支持的任何类型。QVariant 不是模板类，因此它的类型不包含这样的递归。我不知道是否有类似的提升类型，但我对此表示怀疑。

* * *

如果您的数组在脚本执行期间**无法调整大小**（或者如果它们应该调整大小，您可以分配一个新数组并复制内容），有一个**更简单的解决方案**。只需将数组存储在一维向量中，还将您的脚本语言中数组的维度存储在另一个向量中。然后你可以使用如下的索引方法。

```
class ScriptArray {
    vector<int> dim;
    vector<int> elements;

    int getIndex(vector<int> indexList) const {
        int multiplicator = 1;
        int index = 0;
        for (int i = 0; i < dim.size(); ++i) {
            index = multiplicator * indexList[i];
            multiplicator *= dim[i];
        }
        return index;
    }
}; 
```

这基本上是对以下思想的概括。考虑一个要表示为一维数组（10000 个元素）的二维数组（100 x 100 个元素）。对于原始数组 ( `x, y`) 中的任何索引，您可以将其映射到内部数组 ( `x + 100 * y`) 的一维索引。对于 3 维数组，它只包含另一个乘法 ( `x + 100 * y + 100*100 * z`) 等等......

这个解决方案和调整数组大小的问题是，当维度的大小发生变化时，元素在数组中“移动”（特殊情况：最后一个维度，因为这个维度是“最外层”的维度）。因此，您可以忍受调整大小时数组无效的事实，或者您将内容复制到具有新大小的新数组中，或者您实现一些复杂的调整大小方法，该方法小心地插入空格/删除数组中的一些元素正确的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:24:04.557

我假设您已经创建了自己的语言，并希望使用 C++ 进行解析。您的解析器知道您正在定义一个变量，因为它会`integer`在标识符之前找到类型。然后您要做的是检查是否必须创建普通变量或多维数组。

*   如果不存在括号 ([]) -> 普通变量
*   如果存在括号-> 循环计算有多少。然后分配嵌套向量。只有最终的向量才会有 type 的元素`int`。

因此，实现这一点的最简单方法是忘记数组，而将其视为只有一个括号的多维数组的特例。

# java - 具有相同 where 子句的休眠二级查询缓存问题

> ID：14934948
> 
> 赞同：14
> 
> 时间：2013-02-18T11:12:57.417
> 
> 标签：java, hibernate, jpa, spring-data, spring-data-jpa

我的应用程序使用 JPA (1.2)、Spring (3.1.2)、Spring Data (1.1.0) 和 Hibernate (4.1.7)。数据库：Oracle10g

我们启用了二级缓存。它与实体一起工作得很好，但它在命名查询缓存上产生了问题。

问题是：如果命名查询具有相同的 where 子句但不同的 select 语句，那么无论执行第一个查询，它都会为第二个查询提供相同的结果。

就像我的第一个查询（countRelease）是

```
select count(r) from Release r where r.type in 
(select c.contentTypeId from ContentType c where c.parentContentTypeId is NULL)
order by r.validityStart 
```

第二个查询（findRelease）是

```
select r from Release r where r.type in 
(select c.contentTypeId from ContentType c where c.parentContentTypeId is NULL)   
order by r.validityStart 
```

如果首先运行第一个查询，那么 count 会来，然后如果我运行第二个查询，那么 count 也会来，它应该给我发布实体的列表。

如果我删除查询缓存，它工作正常，如果我在第二个查询 where 子句中进行一些更改，那么它也工作正常，但我不需要这样做。

我们如何解决这个问题？

我的 Java 代码

```
@Query(name="findRelease")
@QueryHints({@QueryHint(name = "org.hibernate.cacheRegion", value ="cvodrelease"),@QueryHint(name = "org.hibernate.cacheable", value ="true") })
public List<Release> findRelease();

@Query(name="countRelease")
@QueryHints({@QueryHint(name = "org.hibernate.cacheRegion", value ="cvodrelease"),@QueryHint(name = "org.hibernate.cacheable", value ="true") })
public Long  countOfRelease(Date today); 
```

缓存配置

```
<property name="hibernate.cache.region.factory_class" value="org.hibernate.cache.ehcache.EhCacheRegionFactory"/>
<property name="hibernate.cache.use_query_cache" value="true"/>
<property name="hibernate.cache.use_second_level_cache" value="true"/>
<property name="hibernate.cache.provider_class" value="net.sf.ehcache.hibernate.EhCacheProvider" /> 
<property name="hibernate.cache.provider_configuration_file_resource_path" value="ehcache.xml" />

<bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager"  p:cacheManager-ref="ehcache"/>

<bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" p:configLocation="ehcache.xml"  p:shared="true"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T07:07:20.677

JPA 1.0 标准没有包括缓存（并且 JPA 1.2 不存在）。

JPA 2.0 标准引入了缓存——包括共享缓存（每个 EntityManagerFactory 实例的“一级缓存”）和应用程序缓存（所有 EntityManagerFactor 实例的二级缓存）。此外，每个 EntityManager 实例的每个 PersistenceContext 都充当其自己的最低级别缓存 - “零级缓存”。

这意味着您的行为都是特定于 Hibernate 4.1.7 的，与任何标准或任何其他产品无关。

> *当数据缓存在查询结果中没有任何 id 的缓存数据时，不使用缓存。*

这是 Apache OpenJPA 文档的直接引用，而不是 Hibernate 或 JPA 规范。您可以忽略，但对于 Hibernate 来说似乎是正确的。

> *不会缓存导致自定义字段类型或 BigDecimal 或 BigInteger 字段投影的查询。*

这是 Oracle Kodo JPA 文档的直接引用，而不是 Hibernate 或 JPA 规范。忽略这一点可能是明智的。

> *查询缓存不缓存缓存中实际实体的状态。它缓存标识符值和值类型的结果。因此，对于那些应该作为查询结果缓存的一部分缓存的实体，始终将查询缓存与二级缓存结合使用。.*

这是 Hibernate 4.1 文档的直接引用。所以你可以遵循这个建议——只要你把它放在上下文中：如果你想缓存从查询返回的实体，它就是说包括二级缓存。如果您不想缓存整个实体对象，而只想缓存包含原始数据类型（投影）的 NamedQueries 的结果，那么您只需要一级缓存。

我的建议：

1.  我认为问题可能是 COUNT(r) 将 BigInteger 返回给 java，它不能转换为 Object 进行缓存。您可以在查询上调用 addScalar("count", Hibernate.LONG) 来告诉 hibernate 使用不同的类型 - LONG。请参阅[blog.pfa-labs.com/2009/12/caching-raw-sql-count-with-hibernate.html](http://blog.pfa-labs.com/2009/12/caching-raw-sql-count-with-hibernate.html) 以及 [是否/可以将 Hibernate 的二级缓存用于 COUNT() 操作？](https://stackoverflow.com/questions/8712066/is-can-hibernates-second-level-cache-be-used-for-count-operations)

2.  查询缓存应该能够处理这个问题。只有实体对象才需要二级缓存。

3.  要非常小心地了解您尝试缓存的对象的读/写行为 - 并确保读取次数远大于写入次数。否则缓存可能不会带来任何好处，甚至会减慢速度并导致数据不一致。

4.  请注意，一些 JDBC 驱动程序也会缓存数据——如果你的驱动程序会影响 JPA 结果，JPA 甚至不会知道它。

来自 Mike Keith 的“Pro JPA 2”：大多数 [JDBC] 驱动程序缓存连接和语句。一些缓存还跟踪表或列的状态，这对 JPA 提供者本质上是透明的，但是在不必去数据库获取每次调用的数据方面仍然可以提供一些节省。仅当已知数据是只读的或驱动程序以独占方式控制数据库访问时，这通常在驱动程序中才可行。

JDBC 缓存（如果可用）应该可以通过特定于驱动程序的配置设置进行控制。

编辑：

在第一个查询中，“order by r.validityStart”什么都不做——你可以删除它，一切都会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:58:26.700

查询缓存维护结果，其中查询连同参数组合构成作为标识符的键和值。

从文档：

> *   当数据缓存在查询结果中没有任何 id 的缓存数据时，不使用缓存。
>     
>     
> *   不会缓存导致自定义字段类型或 BigDecimal 或 BigInteger 字段投影的查询。
>     
>     
> *   请注意，查询缓存不会缓存结果集中实际实体的状态；**它只缓存标识符值和值类型的结果**。查询缓存应始终与二级缓存结合使用。

最好获取整个对象，而不是查询中的字段。

*可能*它忽略了查询的选择部分并缓存了结果。后面的部分对于两个查询都是相同的，因此产生相同的结果。您可以尝试更改查询执行顺序并观察结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:20:48.537

我相信您的问题与二级缓存无关 - 这是另一回事。缓存本身不能改变预期的结果。

更确定的是，您可以在开始第二次查询之前尝试以下代码来清除二级缓存：

```
session.setCacheMode(CacheMode.IGNORE); // session here is the SessionFactory 
```

如果问题仍然存在，那么很明显二级缓存不是罪魁祸首。

# android - 在android中启动后加载服务

> ID：14934949
> 
> 赞同：0
> 
> 时间：2013-02-18T11:13:02.027
> 
> 标签：android, android-service

我从互联网上获取了一个示例，用于实现在手机启动后自动启动的服务。但应用程序显示错误。请帮我解决问题

提前致谢

**xml文件**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.newtest"
android:versionCode="1"
android:versionName="1.0">

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>  
<application>  
    <receiver android:name="com.example.newtest.BootCompletedIntentReceiver"
                      android:permission="android.permission.RECEIVE_BOOT_COMPLETED">  
        <intent-filter>  
            <action android:name="android.intent.action.BOOT_COMPLETED" />  
        </intent-filter>  
    </receiver>  
    <service android:name="com.example.newtest.BackgroundService"/>  
</application>
</manifest> 
```

**广播接收器类**

```
package com.example.newtest;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class BootCompletedIntentReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {  
           Intent pushIntent = new Intent(context, BackgroundService.class);
           context.startService(pushIntent);  
    }
}
} 
```

**服务等级**

```
package com.example.newtest;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.widget.Toast;

public class BackgroundService extends Service {

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    Toast.makeText(this, "OK", Toast.LENGTH_LONG).show();
    super.onCreate();
}

} 
```

**日志猫**

```
02-18 16:32:49.949: E/AndroidRuntime(308): FATAL EXCEPTION: main
02-18 16:32:49.949: E/AndroidRuntime(308): java.lang.RuntimeException: Unable to instantiate receiver com.example.newtest.BootCompletedIntentReceiver: java.lang.ClassNotFoundException: com.example.newtest.BootCompletedIntentReceiver in loader dalvik.system.PathClassLoader[/data/app/com.example.newtest-1.apk]
02-18 16:32:49.949: E/AndroidRuntime(308):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1773)
02-18 16:32:49.949: E/AndroidRuntime(308):  at android.app.ActivityThread.access$2400(ActivityThread.java:117)
02-18 16:32:49.949: E/AndroidRuntime(308):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:981)
02-18 16:32:49.949: E/AndroidRuntime(308):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-18 16:32:49.949: E/AndroidRuntime(308):  at android.os.Looper.loop(Looper.java:123)
02-18 16:32:49.949: E/AndroidRuntime(308):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-18 16:32:49.949: E/AndroidRuntime(308):  at java.lang.reflect.Method.invokeNative(Native Method)
02-18 16:32:49.949: E/AndroidRuntime(308):  at java.lang.reflect.Method.invoke(Method.java:507)
02-18 16:32:49.949: E/AndroidRuntime(308):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-18 16:32:49.949: E/AndroidRuntime(308):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-18 16:32:49.949: E/AndroidRuntime(308):  at dalvik.system.NativeStart.main(Native Method)
02-18 16:32:49.949: E/AndroidRuntime(308): Caused by: java.lang.ClassNotFoundException: com.example.newtest.BootCompletedIntentReceiver in loader dalvik.system.PathClassLoader[/data/app/com.example.newtest-1.apk]
02-18 16:32:49.949: E/AndroidRuntime(308):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
02-18 16:32:49.949: E/AndroidRuntime(308):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
02-18 16:32:49.949: E/AndroidRuntime(308):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
02-18 16:32:49.949: E/AndroidRuntime(308):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1764)
02-18 16:32:49.949: E/AndroidRuntime(308):  ... 10 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:15:22.587

这很简单。

您的包裹名称是`package com.example.newtets;`

并且清单期望`package com.example.newtest;`

所以修正错字，因为你正在通过`com.example.newtets.BootCompletedIntentReceiver`课程

# clojure - 行车灯功能同时进行

> ID：14934952
> 
> 赞同：3
> 
> 时间：2013-02-18T11:13:09.783
> 
> 标签：clojure

我有轻量级的 CPU 密集型功能，我想并行运行。我应该使用什么并发原语？

使用代理和期货是不值得的，因为为这些过程创建新线程的成本是不合理的。

我想基本上同时运行一些轻量级功能，而不创建线程。我可以这样做吗？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T11:40:34.617

你做过基准测试吗？

无论如何，代理很可能是一个很好的解决方案，因为它们使用可重复使用的固定大小的线程池（因此您不会不断地创建新线程）。

我已经在我的机器上快速进行了基准测试，并且可以在 3 秒内完成超过百万次的代理调用：

```
(def ag (agent 0))

(time (dotimes [i 1000000] (send ag inc)))
=> "Elapsed time: 2882.170586 msecs" 
```

如果代理仍然过于重量级（不太可能？），那么您可能应该寻找一种方法将一组功能分批成一个工作块。如果你这样做，那么并发原语的开销将是最小的。

# html - 网页编码，设置矛盾

> ID：14934953
> 
> 赞同：2
> 
> 时间：2013-02-18T11:13:12.060
> 
> 标签：html, http, web

如果一个网页有，

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
…
</head> 
```

但是http头有

```
Content-Type    text/html; charset=UTF-8 
```

那么假设什么编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:40:34.307

在 HTML5 中，优先级定义为：

1.  用户浏览器设置
2.  字节顺序标记
3.  HTTP 标头
4.  `<meta http-equiv="Content-Type">`或`<meta charset>`取决于属性顺序。
5.  语言环境的浏览器默认值。

有关血腥细节，请参见[http://www.w3.org/html/wg/drafts/html/master/syntax.html#determining-the-character-encoding](http://www.w3.org/html/wg/drafts/html/master/syntax.html#determining-the-character-encoding)。

# c# - Asmx Web 服务有时不会响应

> ID：14934955
> 
> 赞同：2
> 
> 时间：2013-02-18T11:13:16.567
> 
> 标签：c#, asp.net, web-services, iis-7, asmx

我在`SharedHosting`服务器上有一个 .asmx Web 服务，在某些情况下它不会响应。当它突然停止工作并且在几个小时内无法工作并且它再次工作时，它会起作用。当它停止工作时，我在服务器上上传 web.config 文件（没有任何文件更改，只需上传并覆盖文件 wia ftp），Web 服务启动行为正常，直到下次停止工作。

网页配置

```
<configuration>
   <system.web>
       <compilation debug="false" targetFramework="4.0"/>
   </system.web>
</configuration> 
```

我做错了什么？我认为这是 web.config 文件的问题。可能它缺少一些配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:17:01.543

不，这不是您的 web.config 文件的问题。
当您上传新的 web.config 时，会导致 IIS 重置您的应用程序。

这确实解决了您的问题，但不是您的根本原因。
实施日志记录以检查您的应用程序正在使用的内存。

应用程序重置可以解决很多内存问题。
我猜你有内存泄漏，几个小时后导致你的应用程序挂起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:16:09.280

听起来您的网络服务有问题。通过上传`web.config`您将重新启动 IIS 应用程序池（有效地这样做：[http](http://technet.microsoft.com/en-us/library/cc732742(v=ws.10).aspx) ://technet.microsoft.com/en-us/library/cc732742(v=ws.10).aspx ），这将重新启动服务，所以这这就是为什么它在您更改/上传新的 web.config 时起作用的原因。您需要诊断服务的问题，**web.config 不是问题**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:17:45.700

查看运行服务的机器上的应用程序和系统事件日志，以获取有关服务失败原因的线索

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-08T21:57:24.480

我有同样的问题。原因可能是您的数据层。您应该检查所有方法并检查您是否正确处理了与`using`块的连接。要测试这个理论，请打开您的 SQL 配置文件，并多次查找“审计注销”。

# c++ - 从多个线程更新最大值

> ID：14934958
> 
> 赞同：5
> 
> 时间：2013-02-18T11:13:28.177
> 
> 标签：c++, multithreading, openmp, atomic

有没有办法使用原子操作从多个线程更新最大值？

说明性示例：

```
std::vector<float> coord_max(128);
#pragma omp parallel for
for (int i = 0; i < limit; ++i) {
    int j = get_coord(i); // can return any value in range [0,128)
    float x = compute_value(j, i);
    #pragma omp critical (coord_max_update)
    coord_max[j] = std::max(coord_max[j], x);
} 
```

在上述情况下，临界区同步访问整个向量，而我们只需要独立同步访问每个值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:10:59.993

根据评论中的建议，我找到了一个不需要锁定的解决方案，而是使用 std::atomic / boost::atomic 中的比较和交换功能。我仅限于 C++03，所以在这种情况下我会使用 boost::atomic。

```
BOOST_STATIC_ASSERT(sizeof(int) == sizeof(float));
union FloatPun { float f; int i; };

std::vector< boost::atomic<int> > coord_max(128);
#pragma omp parallel for
for (int i = 0; i < limit; ++i) {
    int j = get_coord(i);
    FloatPun x, maxval;
    x.f = compute_value(j, i);

    maxval.i = coord_max[j].load(boost::memory_order_relaxed);
    do {
        if (maxval.f >= x.f) break;
    } while (!coord_max[j].compare_exchange_weak(maxval.i, x.i,
        boost::memory_order_relaxed));
} 
```

将浮点值放入整数中涉及一些样板，因为原子浮点数似乎不是无锁的。我不是 100% 使用内存顺序，但限制最少的“放松”级别似乎没问题，因为不涉及非原子内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:23:28.860

比如说，声明一个长度为 128 的`std::vector<std::mutex>`（或`boost::mutex`）然后使用第`j`th 个元素创建一个锁对象怎么样？

我的意思是，类似：

```
std::vector<float> coord_max(128);
std::vector<std::mutex> coord_mutex(128); 
#pragma omp parallel for
for (int i = 0; i < limit; ++i) {
    int j = get_coord(i); // can return any value in range [0,128)
    float x = compute_value(j, i);
    std::scoped_lock lock(coord_mutex[j]);
    coord_max[j] = std::max(coord_max[j], x);     
} 
```

或者，根据[Rahul Banerjee 的建议 #3](https://stackoverflow.com/a/14935184/19254)：

```
std::vector<float> coord_max(128);
const int parallelism = 16;
std::vector<std::mutex> coord_mutex(parallelism); 
#pragma omp parallel for
for (int i = 0; i < limit; ++i) {
    int j = get_coord(i); // can return any value in range [0,128)
    float x = compute_value(j, i);
    std::scoped_lock lock(coord_mutex[j % parallelism]);
    coord_max[j] = std::max(coord_max[j], x);     
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:26:25.643

不确定语法，但从算法上讲，您有三个选择：

1.  锁定整个向量以保证原子访问（这是您当前正在做的）。

2.  锁定单个元素，以便每个元素都可以独立于其他元素进行更新。优点：最大并行度；缺点：需要很多锁！

3.  中间的东西！从概念上考虑将向量划分为 16 个（或 32/64/...）“banks”，如下所示：bank0 由向量元素 0、16、32、48、64 组成，...bank1 由向量元素 1、17 组成, 33, 49, 65, ... bank2 由向量元素 2, 18, 34, 50, 66, ... ... 现在，在访问元素之前使用 16 个显式锁，您最多可以有 16 路并行性。要访问元素 n，请获取锁 (n%16)，完成访问，然后释放相同的锁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T14:23:25.853

只是为了增加我的两分钱，在开始更细粒度的优化之前，我会尝试以下方法来消除对`omp critical`：

```
std::vector<float> coord_max(128);  
float              fbuffer(0);
#pragma omp parallel 
{
  std::vector<float> thread_local_buffer(128);  

  // Assume limit is a really big number
  #pragma omp for       
  for (int ii = 0; ii < limit; ++ii) {
   int  jj = get_coord(ii); // can return any value in range [0,128)
   float x = compute_value(jj,ii);
   thread_local_buffer[jj] = std::max(thread_local_buffer[jj], x);
  } 
  // At this point each thread has a partial local vector
  // containing the maximum of the part of the problem 
  // it has explored

  // Reduce the results
  for( int ii = 0; ii < 128; ii++){
    // Find the max for position ii
#pragma omp for schedule(static,1) reduction(max:fbuffer)
    for( int jj = 0; jj < omp_get_thread_num(); jj++) {
      fbuffer = thread_local_buffer[ii];
    } // Barrier implied here
    // Write it in the vector at correct position
#pragma omp single
    {
      coord_max[ii] = fbuffer;
      fbuffer = 0;
    } // Barrier implied here

  }
} 
```

请注意，我没有编译该片段，因此我可能在其中留下了一些语法错误。无论如何，我希望我已经传达了这个想法。

# django - 如何在 django 中跨多个表查询最新记录

> ID：14934960
> 
> 赞同：1
> 
> 时间：2013-02-18T11:13:35.327
> 
> 标签：django, django-models, django-queryset

我有两个看起来像这样的模型：

```
class Node(models.Model):
    user = models.ForeignKey(User, null=False)
    name = models.CharField(max_length=50)

class Activation(models.Model):
    node = models.ForeignKey(Node, null=False)
    active = models.BooleanField(default=False)
    datetime = models.DateTimeField(default=datetimeM.datetime.now) 
```

激活表存储给定节点是否“活动”。因此，要确定一个节点是否处于活动状态，需要获取该节点的最新激活记录。

我试图弄清楚如何编写一个返回所有活动节点的 django 查询。

这是一些示例数据

```
Node Table
  id  |   name
--------------------
   0  |  andrew
   1  |   bill
   2  |   bob

Activation Table
  id  | nodeId | active | datetime
--------------------
   0  |   0    |  false | 01-01-2013:00:01:02
   1  |   0    |   true | 01-02-2013:00:01:02
   2  |   0    |  false | 01-03-2013:00:01:02
   3  |   1    |  false | 01-04-2013:00:01:02
   4  |   0    |   true | 01-05-2013:00:01:02
   5  |   1    |   true | 01-06-2013:00:01:02
   6  |   2    |  false | 01-07-2013:00:01:02 
```

所以查询需要返回 [node0, node1]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:48:38.627

```
class Node(models.Model):
   user = models.ForeignKey(User, null=False)
    name = models.CharField(max_length=50)

class Activation(models.Model):
   node = models.ForeignKey(Node, null=False, related_name='activations')
   active = models.BooleanField(default=False)
   datetime = models.DateTimeField(default=datetimeM.datetime.now)

   #latest activation record for that node:
   try:
      latest_activation = node.activations.latest('id')
   except:
      latest_activation = None

   # Return all active notes:
    all_active_notes = Node.objects.filter(activations__active=True) 
```

更新：检查我昨天发布的这个问题： [Django reverse query by last created object](https://stackoverflow.com/questions/14922508/django-reverse-query-by-the-last-created-object) 也许这会对你有所帮助。

# php - php 从巨大的文本文件中提取一行

> ID：14934964
> 
> 赞同：3
> 
> 时间：2013-02-18T11:13:55.420
> 
> 标签：php

我对 PHP 很好，但可能没有你们中的一些人那么好。

我基本上是想找到一种方法从一个巨大的文本文件中抓取一行……它基本上是一个我想按行号调用的关键字列表，但在我到达之前最好不要遍历它们行.....否则显然会使我的服务器崩溃。

目前我正在使用这个

```
$lines = file('http://www.mysite.com/keywords.txt');
foreach ($lines as $line_num => $line) {
   echo "$line_num";
} 
```

这行得通，但我确定必须有更好的方法来节省使用量，因为这是将整个文件放入内存中，如果我可以简单地对 php 说给我第 97 行，嗯，规则......

希望你们能想出一个比我聪明得多的解决方案：P ty

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:16:58.463

使用 SplFileObject

```
 $file = "test.txt";
  $line_number = 1000;
  $file_obj = new SplFileObject( $file );
    /*** seek to the line number ***/
  $file_obj->seek( $line_number );

   /*** return the current line ***/
   echo  $file_obj->current(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T11:23:35.800

如果这些行只是文本并且长度可变，则您无法知道哪一行是#97；唯一使它排在第 97 位的是之前有 96 行。

所以你需要阅读整个文件（这就是 SplFileObject 所做的）：

```
$fp = fopen("keywords.txt", "r");
while($line--)
{
    if (feof($fp))
        // ERROR: line does not exist
    $text = fgets($fp, 1024); // 1024 = max length of one line
}
fclose($fp); 
```

但是如果你可以在每行之前存储一个行号，即文件是

```
...
95 abbagnale
96 abbatangelo
97 abbatantuono
98 ... 
```

然后你可以实现一种二进制搜索：

```
- start with s1 = 0 and s2 = file length
- read a keyword and line number at seek position s3 = (s1+s2)/2 (*)
- if line number is less than desired, s1 = s3; else s2 = s3; and repeat previous step.
- if line number is the one desired, strip the number from the text and you get the keyword. 
```

(*) 由于该行很可能不会完全从 s# 开始，因此您需要*两个*fget：一个用于去除虚假的 half 关键字，第二个用于读取行号。当您“关闭”时，读取更大的块并将其分成几行会更快。例如，您查找第 170135 行并读取第 170180 行：您最好将查找位置回退一千字节，读入一千字节的数据，然后在其中查找 170135。

或者，如果各行的长度相差不大，则值得存储固定大小的行（这里的“#”实际上应该是空格，并且在行长中您需要计算行终止符，\n或 \r\n):

```
abbagnale#########
abbatangelo#######
abbatantuono###### 
```

然后，假设每个关键字是 32 个字节，

```
$fp = fopen("keywords.txt", "r");
fseek($fp, 97 * 32, SEEK_SET);
$text = trim(fgets($fp, 32));
fclose($fp); 
```

或多或少是瞬时的。

但是，如果文件位于远程服务器上，您仍然需要下载整个文件（直到所需的行），并且通过在可以运行搜索的远程服务器上放置一个“扫描仪”脚本来为您提供更好的服务。然后你可以运行

```
$text = file_get_contents("http://www.mysite.com/keywords.php?line=97"); 
```

并在几毫秒内获得您的线路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T11:24:13.827

没有任何方法可以从几乎任何语言的文件中获取“行号 x”，而无需先以某种方式阅读它。毕竟，一行只是两个行尾字符之间的东西。虽然可以在不加载整个文件（有一些困难）的情况下从文件中提取“字符编号 x”，但如果不加载直到 x 的所有行（并且在大多数方法中，您需要加载所有行）

将所有行加载到第 x 行的方法如下（使用[fgets](http://php.net/manual/en/function.fgets.php)）：

```
$f = fopen('http://www.mysite.com/keywords.txt');
$i=97
$text=""
while (($text = fgets($f,2048)) !== false && $i>0) {
       $i--
}
echo $text 
```

# r - lm.fit() 的困难：未找到“C_Cdqrls”

> ID：14934975
> 
> 赞同：1
> 
> 时间：2013-02-18T11:14:42.217
> 
> 标签：r

我试图重现 lm.fit 函数正在做什么。但我有一个问题，它调用'C_Cdqrls'例程：

```
n<-100
p<-5
x<-cbind(1,matrix(rnorm(n*(p-1)),n,p-1))
res<-rnorm(n)
y<-x%*%bet+res
tol<-1e-07
z<-.Call(C_Cdqrls, x, y,tol) 
```

我得到：

```
Error: object 'C_Cdqrls' not found 
```

使用 'C_Cdqrls' 代替产生：

```
the Error in .Call("C_Cdqrls", x, y, tol) : 
  C symbol name "C_Cdqrls" not in load table 
```

同样，summary.lm() 在 lm-object 上调用一个名为 qr.lm 的函数，但执行以下操作：

```
qr.lm(lm(y~x-1)) 
```

产量：

```
Error: could not find function "qr.lm" 
```

我的问题是：如何让 .Call(C_Cdqrls, x, y,tol) 和 qr.lm() 分别给出与 lm.fit() 和 summary.lm() 调用时相同的结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T11:53:55.440

`C_Cdqrls`是`stats`包命名空间中未导出的对象。要查看它，请使用`stats:::C_Cdqrls`.

# javascript - 在 cakephp 中包含 jsmenu 我在 cakephp 1.2 中有这个代码： <select onchange="if(this.value.match('Convegni')) { document.getElementById('menu3').style.display = 'block'; } else { document. getElementById('menu3').style.display = 'none'; }">[...] ID：14934976 赞同：0 时间：2013-02-18T11:14:43.543 标签：javascript, cakephp 回答 #1 赞同：0 时间：2013-02-18T14:50:52.803 您将在 webroot/js 中创建该文件。我将使用 menu_match.js 作为示例。里面的代码应该像下面这样格式化（本质上是一样的，除了你需要命名函数但是你稍后会调用它）。 function menu_match() { if(this.value.match('Convegni')) { document.getElementById('menu3').style.display = 'block'; } else { document.getElementById('menu3').style.display = 'none'; } 然后在您的视图中，您将需要包含指向此 js 文件的链接： <?php echo($javascript->link("des_toggle_gen_drug.js")); ?> 然后您需要更改您的选择以引用该函数而不是实际代码。 <select onchange="return menu_match()" ..... </select></select>

# matlab - 向量化标量/向量除法

> ID：14934979
> 
> 赞同：0
> 
> 时间：2013-02-18T11:14:53.040
> 
> 标签：matlab, vectorization

例如，如果我有：

```
Q1=4;
Q2=5;
PG=2:60

A1=Q1./sqrt(PG);
A2=Q2./sqrt(PG);

plot(PG,A1)
plot(PG,A2) 
```

我可以做某事吗：？

```
Q=[Q1,Q2];
A=Q./sqrt(PG);
plot(PG,A(1))
plot(PG,A(2)) 
```

还是……避免A1和A2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:53:54.460

`A=bsxfun(@rdivide,[Q1;Q2],sqrt(PG))``Q1`可以（注意and之间的分号，而不是逗号`Q2`），但如果问题中的代码是您的用例，并且您希望其他人阅读和理解代码，我建议不要使用它。

您必须解决`A`使用`A(1,:)`and的行`A(2,:)`（无论您如何获得`A`），但您可能还是想`plot(PG,A)`要这样做。

[在第一条评论后编辑：] `rdivide`只是通常`./`在 MATLAB 代码中表示的函数的名称，适用于相同大小的数组或标量和数组。`bsxfun`将简单地以它认为最合适的方式将两个参数函数应用于提供给它的其他两个参数（为了简化一点）。`arrayfun`做类似的事情：将一个函数应用于一个数组的所有元素。要在这里应用，需要一个`PG`内部硬编码的函数。

# c - 无法编译 mongo-c-driver 示例

> ID：14934980
> 
> 赞同：6
> 
> 时间：2013-02-18T11:14:53.483
> 
> 标签：c, mongodb, mongo-c-driver

我尝试编写简单的 mongo c 客户端。源文件（ac）：

```
#include <stdio.h>
#define MONGO_HAVE_STDINT
#include <mongo.h>

void mongo_init_c(mongo *con)
{
  mongo_init(con);
}

int main() {
  return 0;
} 
```

我尝试编译它：

```
gcc -I/usr/local/include -L/usr/local/lib -lmongoc a.c 
```

但是得到一个错误：

```
a.c:(.text+0xd): undefined reference to `mongo_init' 
```

文件 /usr/local/include/mongo.h 和 /usr/local/lib/libmongoc.so 存在

我怎样才能正确编译ac？

ps mongo-2.0.4、gcc-4.6、mongo-c-driver - 从 github 提取

**更新**

$ nm /usr/local/lib/libmongoc.so | grep 初始化

```
000034e0 T _init
0000dd10 T bson_init
0000c740 T bson_init_data
0000c7b0 T bson_init_finished_data
0000dc10 T bson_init_size
0000d060 T bson_iterator_init
0000a5e0 T gridfile_init
00009af0 T gridfile_writer_init
000095e0 T gridfs_init
00010a18 R initialBufferSize
00005f40 T mongo_cursor_init
00008da0 T mongo_env_sock_init
00005d90 T mongo_init
000057b0 T mongo_init_sockets
00004800 T mongo_md5_init
00005e40 T mongo_replica_set_init
00005f00 T mongo_replset_init
00005b80 T mongo_write_concern_init 
```

$ gcc -I/usr/local/include -L/usr/local/lib -Wall -Werror -lmongoc ac

```
/tmp/cccuNEp1.o: In function `mongo_init_c':
a.c:(.text+0xd): undefined reference to `mongo_init' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T11:33:27.363

尝试在源文件之后链接库，例如`gcc a.c -lmongoc`. 这是因为您使用的是传统的单通道链接器，它希望满足与命令行上指定的后续对象的依赖关系，而不是先前的对象。

# video - 将输入从合成更改为 s 视频直接显示

> ID：14934983
> 
> 赞同：0
> 
> 时间：2013-02-18T11:15:09.703
> 
> 标签：video, directshow, capture

我有一个 pinnacle 视频捕获设备，我编写了一个基于 DirectShow 的应用程序，该应用程序通过复合输入运行良好，但使用 S_Video First，通过 S_Video 输入没有任何显示（尽管在跟踪中我看到一切正常！）直到我运行 pinnacle studio。之后一切顺利！下一个问题是在 S_Video 和 Composite 之间切换。如果我将输入从 S_Video 更改为 Composite，它不会显示任何内容。我想知道 S_Video 和 Video(Composite) 和 pinnancle sutdio 关闭后如何影响捕获；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:26:58.740

您可以使用 更改输入，有关详细信息`IAMCrossbar::Route`，请参阅[使用交叉开关](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390991%28v=vs.85%29.aspx)。请注意，您也可以通过交叉栏过滤器属性页面与 GraphEdit 交互地执行此操作：

![在此处输入图像描述](../Images/8766f3845efb92c6fd352e78a20aad2e.png)

# c# - c++ wchar数组到c#

> ID：14934986
> 
> 赞同：4
> 
> 时间：2013-02-18T11:15:17.817
> 
> 标签：c#, c++, language-comparisons

我不了解 C++，我必须将一些代码转换为 C#。我已经设法做了一些工作，但我真的不明白如何转换几行，所以我在这里寻求帮助。

这是 C++ 代码：

```
 WCHAR wsSerial[MAX_PATH]={'\0'};
            WCHAR wsS2[MAX_PATH]={'\0'};

            wcscpy_s(wsSerial, MAX_PATH, m_strSerial);
            wcscpy_s(wsS2,MAX_PATH,wsSerial+8);
            wsS2[8]=NULL;
            ULONG ulCode2 = wcstoul(wsS2, NULL,10); 
```

这就是我在 C# 中所拥有的：

```
 string wsSerial;
        string wsS2;

        wsSerial = mSerial; //an external input
        wsS2 = wsSerial + 8;
        wsS2= wsSerial.Substring(0, 8);
        long ulCode2 = long.Parse(wsS2); 
```

所以我有两个问题：

1.  wsSerial 是 C++ 中的一个数组，但我在 C# 中不需要这个数组，对吗？我的意思是，它所做的只是存储一个大数字，然后将其转换为数值，对吗？
2.  这究竟是做什么的？wcscpy_s(wsS2,MAX_PATH,wsSerial+8)。+ 8 让我失望。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:20:57.843

在 C 中，字符串只是一个包含字符“字符串”的连续区域，以特殊字符终止。换句话说，一个数组`char`。（或者`wchar_t`对于宽字符串。）

在 C#（和 C++）中，这不是必需的，因为它有自己的特殊`string`类型，可以在后台处理数组内容。

* * *

关于这`+8`件事，它只是`wsSerial`在复制时跳过了前八个字符。要理解这一点，您应该阅读“指针算术”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:36:18.543

就像这样：

```
string wsSerial = mSerial;
string wsS2 = wsSerial.Substring(8, 8);
long ulCode2 = long.Parse(wsS2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T11:55:57.623

看起来你几乎一直到那里，但调用中的第一个参数

```
wsSerial.Substring() 
```

应该是 8，第二个应该是 MAX_PATH 减 8。

# python - Tweepy 空白搜索

> ID：14934987
> 
> 赞同：4
> 
> 时间：2013-02-18T11:15:18.947
> 
> 标签：python, twitter, tweepy

我一直在网上寻找答案，但我没有找到任何我认为可能是一个简单的问题：

**有没有办法从 tweepy 获得“空白”搜索？**

例如，从位置获取所有推文。

我无法发送没有查询字段的查询：

```
query=  tweepy.api.search(q="", rpp=1000) 
```

它返回：

> tweepy.error.TweepError：您必须输入查询。

我正在寻找的是获取此查询，例如：

[http://search.twitter.com/search.atom?geocode=38.376,-0.5,8km](http://search.twitter.com/search.atom?geocode=38.376,-0.5,8km)

从...获取所有推文

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-04T21:06:23.127

`q`参数是可选的，`geocode`也是（参见[文档](http://pythonhosted.org/tweepy/html/api.html#API.search)）。

这对我有用：

```
import tweepy

auth = tweepy.OAuthHandler(<consumer_key>, <consumer_secret>)
auth.set_access_token(<key>, <secret>)

api = tweepy.API(auth)

results = tweepy.api.search(geocode="38.376,-0.5,8km", rpp=1000)

for result in results:
    print result.text
    print result.location if hasattr(result, 'location') else "Undefined location" 
```

希望有帮助。

# php - 使用 PHP 上传大文件会丢失其他输入值

> ID：14934989
> 
> 赞同：0
> 
> 时间：2013-02-18T11:15:24.010
> 
> 标签：php, forms, upload

我制作了一个简单的脚本来上传通过简单的 html 表单提交的文件，它适用于小于 5 兆字节的文件。当我上传更大的文件时，他们开始搞砸了。

我认为可能是执行时间太短，所以我使用了这个：set_time_limit(500);

可悲的是，它没有任何区别。

在表单中，我有一个隐藏的输入，可以帮助我检测表单是否已提交接下来，我检查了 apache 错误日志，发现该输入为空，所以看起来很长的执行时间会丢失其他值..

有什么简单的解决方案吗？还是我应该更改检测表单是否已提交的方式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:27:48.437

请检查 php.ini 中的 php 设置以获取 post_max_size = 的最大帖子大小？

# maven - 更好地理解 Maven 范围

> ID：14934996
> 
> 赞同：3
> 
> 时间：2013-02-18T11:15:32.523
> 
> 标签：maven

我一直在努力弄清楚[这里](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)提到的 Maven 提供的作用域的用途。

为什么你不应该总是有编译时范围？现实生活中的例子将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:22:54.443

**编译**

将这些 jar 文件复制到准备好的 War 文件中。

例如：hibernate-core.jar 需要在我们准备好的 War 中有。

**提供** 这些罐子将仅在编译时和测试时考虑

例如： `servlet.jar`将由部署的服务器提供，因此无需从我们准备的 War 文件中提供。

**测试**

这些 jar 仅用于运行测试类。

例如：Junit.jar 仅用于运行 Junit 测试类，无需部署这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T11:33:32.160

`compile`范围依赖项仅在编译期间使用。

范围内的`test`- 仅在测试期间。假设您有使用 junit 或 easymock 的测试。您显然不希望最终工件依赖于它们，但希望能够在运行测试时仅依赖这些库。

`provided`当您运行生成的工件时，那些被标记的依赖项应该在您的类路径中。例如：您有一个 webapp，并且您依赖于 servlet 库。显然，你不应该将它打包到你的 WAR 文件中，因为 webapp 容器已经拥有它并且可能会发生冲突。

依赖项具有不同范围的原因之一是构建的不同部分可能依赖于不同的依赖项。例如，如果您只是编译代码而不执行任何测试，那么让 Maven 下载您的测试依赖项是没有意义的（当然，如果它们还没有出现在您的本地存储库中）。另一个原因是，并非所有依赖项都需要放在最终工件中（无论是程序集还是 WAR 文件），因为某些依赖项仅在构建和测试阶段使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-05T21:44:01.713

范围在这里得到了很好的解释： [https ://maven.apache.org/pom.html#Dependencies](https://maven.apache.org/pom.html#Dependencies)

作为参考，我复制了以下段落：

> 范围：该元素指的是手头任务的类路径（编译和运行时、测试等）以及如何限制依赖项的传递性。有五个可用范围：
> 
> **compile** - 这是默认范围，如果没有指定，则使用。编译依赖项在所有类路径中都可用。此外，这些依赖关系会传播到依赖项目。
> 
> **提供**- 这很像编译，但表示您希望 JDK 或容器在运行时提供它。它仅在编译和测试类路径中可用，并且不可传递。
> 
> **运行时**- 此范围表示编译不需要依赖项，但需要执行。它在运行时和测试类路径中，但不在编译类路径中。
> 
> **test** - 此范围表示应用程序的正常使用不需要依赖项，仅可用于测试编译和执行阶段。
> 
> **system** - 此范围类似于提供的范围，只是您必须提供明确包含它的 JAR。工件始终可用，不会在存储库中查找。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T11:28:41.383

有几个原因您可能不希望所有依赖项都成为默认**编译范围**

1.  通过指示不同的范围来减小最终工件（jar，war ...）的大小。
2.  当你有一个多模块项目时，你可以让每个模块都有自己的依赖版本
3.  **通过提供的范围**避免类版本冲突，例如，如果您要将war文件部署到weblogic服务器，则需要摆脱一些javax jar，如javax.servlet、javax.xml.parsers、JPA jar等。否则你最终可能会出现类冲突错误。

# objective-c - 如何向 IKImageBrowserCell 的标题标签添加背景颜色？

> ID：14934998
> 
> 赞同：0
> 
> 时间：2013-02-18T11:15:36.537
> 
> 标签：objective-c, cocoa

如何向[IKImageBrowserCell](http://developer.apple.com/library/mac/#documentation/Quartz/Reference/IKImageBrowserCell_Class/IKImageBrowserCell.html)的标题标签添加背景颜色？

由于背景，文本不再可见，我只想更改标签的背景。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:23:44.703

看起来，它是继承自`NSObject`. 可能无法设置背景颜色。因为`UIBackgroundcolor`是 的财产`UIView`。它有一个叫做`IKImageBrowserView`应该有用的视图。