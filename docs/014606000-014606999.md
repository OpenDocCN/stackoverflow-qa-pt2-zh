# StackOverflow 问答 14606000-14606999

# asp.net - 条码扫描仪和键盘问题

> ID：14606005
> 
> 赞同：2
> 
> 时间：2013-01-30T14:10:55.217
> 
> 标签：asp.net, keyboard, barcode, barcode-scanner

条码扫描仪和键盘。注意：我的条码扫描仪是 USB 类型的。 ![在此处输入图像描述](../Images/916252abd8b1bd76674dd0032445baed.png)

然后... ![在此处输入图像描述](../Images/32620e392feca64bba652dd0f0350880.png)

如果我在 auto.aspx 页面，必须使用什么功能来触发键盘？我试过这段代码但没有成功：

```
var barcode = document.getElementById('barcodenum');
barcode.addEventListener("keypress", function() { alert("Please use Barcode Scanner!"); document.getElementById('barcodenum').value = "";}, true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:37:38.193

恐怕你不能通过 JavaScript 做到这一点。如果您正在开发桌面应用程序，则可以完成。

编辑：JavaScript 中唯一的一种解决方案是测量按键事件之间的时间。条码扫描器比人类更快，所以如果你为两次按键之间的间隙设置 - 实验发明的 - 时间限制，你可能会解决这个问题。（这个想法的[来源](http://forums.codeguru.com/showthread.php?316179-diff-between-barcode-scanner-amp-KeyBoard&p=1039366#post1039366)。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:40:49.730

正如上面@Robert Skarzycki 所指出的，我怀疑您是否可以使用网页与扫描仪集成。

关于按键拦截问题。

将此添加到页面的头部。

```
 <script type="text/javascript">

        window.onload = function() {              
            var barcode = document.getElementById('barcodenum');
            barcode.addEventListener("keyup", function() {
                alert("Please use Barcode Scanner!");
                document.getElementById('barcodenum').value = "";
            }, true);
        };

    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T05:14:31.180

试试这个代码。我假设您了解 Jquery。运行此代码并在聚焦网页的同时从键盘键入任何内容并按 Enter 键。如果这可行，条形码阅读器也可以这样做。配置您的条码阅读器以在代码阅读结束时传递回车键。jQuery 库

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.6.4.js'></script> 
```

jQuery

```
$(document).ready(function() {
    var barcode="";
$(document).keydown(function(e) {

    var code = (e.keyCode ? e.keyCode : e.which);
    if(code==13)// Enter key hit
    {
        alert(barcode);
    }
    else if(code==9)// Tab key hit
    {
        alert(barcode);
    }
    else
    {
        barcode=barcode+String.fromCharCode(code);
    }
});

}); 
```

# c# - 引发了“System.OutOfMemoryException”类型的异常

> ID：14606006
> 
> 赞同：9
> 
> 时间：2013-01-30T14:10:55.330
> 
> 标签：c#, sql-server, entity-framework, c#-4.0, ef-code-first

基本上我使用实体框架来查询一个巨大的数据库。我想返回一个字符串列表，然后将其记录到一个文本文件中。

```
List<string> logFilePathFileName = new List<string>();
var query = from c in DBContext.MyTable where condition = something select c;
foreach (var result in query)
{
    filePath = result.FilePath;
    fileName = result.FileName;
    string temp = filePath + "." + fileName;
    logFilePathFileName.Add(temp);
    if(logFilePathFileName.Count %1000 ==0)
        Console.WriteLine(temp+"."+logFilePathFileName.Count);
} 
```

但是，当`logFilePathFileName.Count=397000`. 例外是：

> 引发了“System.OutOfMemoryException”类型的异常。
> 
> System.Data.Entity.dll 中出现“System.OutOfMemoryException”类型的第一次机会异常

**更新：**

我想使用不同的查询说：选择前 1000 名然后添加到列表中，但我不知道 1000 之后然后呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T14:16:05.113

很可能它不是按`RAM`原样进行的，因此在这种情况下，增加您`RAM`甚至`64`在位机中编译和运行您的代码不会产生积极影响。

`.NET`我认为这与集合仅限于最大`2GB`RAM 空间（没有区别`32`或`64`位）的事实有关。

要解决此问题，请将您的列表拆分为更小的块，您的问题*很*可能会消失。

只有一种可能的解决方案：

```
foreach (var result in query)
{
    ....
    if(logFilePathFileName.Count %1000 ==0) {
        Console.WriteLine(temp+"."+logFilePathFileName.Count);
        //WRITE SOMEWHERE YOU NEED 
        logFilePathFileName = new List<string>(); //RESET LIST !|
    }
} 
```

**编辑**

如果你想分段**查询**，你可以使用`Skip(...)`and`Take(...)`

只是一个解释性的例子：

```
var fisrt1000 = query.Skip(0).Take(1000);
var second1000 = query.Skip(1000).Take(1000); 
```

... 等等..

自然地将其放入您的迭代中，并根据您知道或需要的数据范围对其进行参数化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T14:15:54.040

`List<string>`如果您只需要将数据写入文本文件，为什么还要收集数据？

你也可以：

*   打开文本文件；
*   遍历记录，将每个字符串附加到文本文件（不将字符串存储在内存中）；
*   刷新并关闭文本文件。

您将需要比现在少得多的内存，因为您不会将所有这些字符串不必要地保留在内存中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:17:43.327

您可能需要为内存设置一些 vmargs！另外...考虑将其直接写入您的文件而不是将其保存在列表中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T14:19:37.167

Roy Dictus 所说的听起来是最好的方式。您也可以尝试为您的查询添加限制。所以你的数据库结果不会那么大。

有关信息： [使用实体框架限制查询大小](https://stackoverflow.com/questions/3344493/limiting-query-size-with-entity-framework)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T14:17:24.897

您不应该将数据库中的所有记录都读取到列表中。它需要大量的内存。你结合阅读记录并将它们写入文件。例如从 db 读取 1000 条记录到列表并将它们保存（附加）到文本文件，清除使用的内存（list.Clear（））并继续新记录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T14:19:22.277

从 StackOverflow 上的其他几个主题中，我了解到实体框架并非旨在处理这样的批量数据。EF 将缓存/跟踪上下文中的所有数据，并在大量数据的情况下导致异常。选项是直接使用 SQL 或将记录拆分为较小的集合。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-29T13:13:19.017

我曾经在 VS c++ 中使用与您使用的 gc List 类似的 gc arraylist 来处理小型和中间数据集，但是在使用 Big Dat 时，抛出了同样的问题“System.OutOfMemoryException”。由于这些 gcs 的大小不能超过 2 GB，因此对大数据效率低下，我构建了自己的链表，它提供了相同的功能，动态增加和按索引获取，基本上，它是一个普通的链表类，具有内部的动态数组提供通过索引获取数据，它复制空间，但是您可以在更新数组后删除链表，您不需要它只保留动态数组，这将解决问题。看代码：

```
struct LinkedNode
{
    long data;
    LinkedNode* next;
};

class LinkedList
{
public:
    LinkedList();
    ~LinkedList();
    LinkedNode* head;
    long Count;
    long * Data;
    void add(long data);
    void update();
    //long get(long index);
};

LinkedList::LinkedList(){
    this->Count = 0;
    this->head = NULL;
}

LinkedList::~LinkedList(){
    LinkedNode * temp; 
    while(head){
        temp= this->head ;
        head = head->next;
        delete temp;
    }
    if (Data)
        delete [] Data; Data=NULL;
}

void LinkedList::add  (long data){
    LinkedNode * node = new LinkedNode();
    node->data = data;
    node->next = this->head;
    this->head = node;
    this->Count++;}

void LinkedList::update(){
    this->Data= new long[this->Count];
    long i = 0;
    LinkedNode * node =this->head;
    while(node){
        this->Data[i]=node->data;
        node = node->next;
        i++;
    }
} 
```

如果你用这个，请参考我的作品[https://www.liebertpub.com/doi/10.1089/big.2018.0064](https://www.liebertpub.com/doi/10.1089/big.2018.0064)

# cookies - 安全登录的最佳解决方案是什么？

> ID：14606012
> 
> 赞同：0
> 
> 时间：2013-01-30T14:11:13.147
> 
> 标签：cookies, login, system

PHP 我的网站快完成了，但我遇到了一些安全问题。实际上，我还没有遇到问题，但我需要预防。例如，登录系统，我正在使用 cookie/session。正如人们在这里回答的那样，cookie 很容易克服，而且很容易受到攻击。

做登录系统的最佳方法是什么，包括密码和数据安全？

另外，我正在使用 cookie 在帖子上写下用户的姓名。例如。（假装登录成功）

```
$Cookie = $_COOKIE['username'];
$Cookie = $FetchUserNameFromDatabase;

//Then, on posts to write the name of the user, from the cookie.
$DoPost = "INSERT INTO posts (username, message) VALUES ($Cookie, $AnyMessage)"; 
```

这是从 cookie 值（因为登录后，用户名保存在 cookie 上）在帖子上写用户名的最佳方式吗？

**如果不是**，最好的方法是什么？

先谢谢了。

**@编辑**

我忘了问。另外，防止人们发表大量评论（大量垃圾邮件）的最佳方法是什么？例如，我做了评论（或投票，或其他）并且工作正常。然后，我做了另一条评论，它阻止了我一段时间，直到这段时间到期我才能再次发表评论。最好的方法是什么，或者至少主要网站/论坛使用什么来防止它？

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:20:06.510

为什么不只使用会话 ID？我将使用 https 连接实现登录，然后分配一个 sessionid，它可以根据您的数据库识别用户。为了进一步参考，您甚至不再需要安全连接。

如果您想识别帖子，只需使用类似 "SELECT username FROM users WHERE sessid=" 之类的东西。session_id()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:20:14.233

就观点而言，您应该仅在执行**不会**更改应用程序状态的操作时使用 cookie 信息；就像在页面顶部显示用户名一样。

但是，在您的应用程序正在更改其状态的每种情况下，例如添加新的 POST（在您的示例中），您绝对不能信任客户端 cookie。

要回答“最好的方法”，这取决于您所依赖的技术。

编辑：

为防止大量垃圾邮件，您应该使用 cookie 信息和请求信息（如 IP 地址）。

# jsp - JSTL 中的资源包显示问号？

> ID：14606013
> 
> 赞同：2
> 
> 时间：2013-01-30T14:11:19.113
> 
> 标签：jsp, maven, jstl, resourcebundle

在我的 login.jsp 我有以下内容：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<fmt:setLocale value="${sessionScope.locale}" />
<fmt:setBundle basename="com.ubbcluj.project.res.myProp" />
<!DOCTYPE html> 
```

并尝试以下列方式显示用户名：

myProp.properties 文件如下所示，位于“/Project/src/main/java/com/ubbcluj/project/res”中：

```
username = Username
pass = Password
register = Register
login = Login 
```

当页面加载时，它以下列方式显示：???username???

我尝试添加一个变量，如其他教程中所示：

```
<fmt:message key="username" var="${lang}" /> 
```

但仍然没有工作。

我可以分享我的整个项目，我知道它并不完美，但这只是一个学习项目，欢迎任何建议。 [https://www.dropbox.com/sh/biavimrexisfskp/o9q57IoiUl](https://www.dropbox.com/sh/biavimrexisfskp/o9q57IoiUl)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:17:02.027

您正在使用 Maven 构建项目，并且 Maven 期望非 Java 文件位于 in 中`src/main/resources`，而不是 in 中`src/main/java`（应该只包含 .java 文件）。因此，您的属性文件不会复制到目标目录并包含在已部署的应用程序中。

# c++ - 在另一个文件夹中包含子项目 .pri

> ID：14606014
> 
> 赞同：1
> 
> 时间：2013-01-30T14:11:19.630
> 
> 标签：c++, makefile, project, qt-creator, qmake

我有 qt 项目`proj1`，它依赖于另一个（`proj2`）。

目录树是这样的：

```
common/
      `--/pr1/ 
            proj1.pri
            main.cpp
      `--/pr2/
            proj2.pri
            src1.cpp
            src2.cpp 
```

proj1 包括 proj2：

```
include(../proj2.pri) 
```

而在 proj2.pri 中，源被列出，因为它们在当前（pr2）目录中：

```
SOURCES += src1.cpp \ 
           src2.cpp 
```

因此，当我尝试构建时，`proj1`我遇到了这样的错误：

```
make: *** No rule to make target `src1.cpp', needed by `src1.o'.  Stop. 
```

在 pri-files 的帮助下，是否有任何正确的方法来包含子项目的源代码（我需要这样做以进行调试）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:32:53.067

在 proj1.pri 中，在包含 proj2.pri 之前：

```
PROJECT_ONE_IS_DEFINED = 1 
```

在 proj2.pri 中：

```
isEmpty(PROJECT_ONE_IS_DEFINED){ 
    DEPENDPATH += pr2
    INCLUDEPATH += pr2
} !isEmpty(PROJECT_ONE_IS_DEFINED){
    DEPENDPATH += ..\pr2
    INCLUDEPATH += ..\pr2
} 
```

这样，如果单独使用项目 2 将被正常包含，如果作为项目 1 的一部分使用，将被正确包含......

或者，您可以简单地将pr2的路径添加到project1中的DEPENDPATH，只要将cpp文件的路径添加到dependpath，make就可以正常工作

## 编辑：

允许在许多项目中包含 .pri 文件而无需担心每种情况的特定路径的最有效方法是添加

```
DEPENDPATH += $$PWD
INCLUDEPATH += $$PWD 
```

在每个 .pri 文件的开头。

# android - Android烦人的应用程序崩溃挂起

> ID：14606021
> 
> 赞同：1
> 
> 时间：2013-01-30T14:11:44.793
> 
> 标签：android

我想这是每个人都会遇到的问题，但我想知道是否有办法解决它。

每当应用程序由于未捕获的异常而崩溃时，屏幕会变黑，设备会挂起几秒钟，然后会弹出一条系统消息说应用程序已崩溃并提供报告崩溃的机会。

现在等待这么久真的很烦人，这样我就可以强制关闭应用程序并发送报告。当抛出未捕获的异常时，还有其他方法可以优雅地关闭应用程序吗？

我已经有一个实现`UncaughtExceptionHandler`了我发送错误日志的类。问题是我是否可以以某种方式向其中添加代码，以缩短应用程序崩溃后的挂起时间。

谢谢！

# mysql - 从 MySql 中的派生表中选择

> ID：14606022
> 
> 赞同：0
> 
> 时间：2013-01-30T14:11:45.207
> 
> 标签：mysql, derived-table

我有一张`T`这样的桌子：

```
ID | column 1 | column 2 |...| column n 
```

这里 ID 不是主键。
我执行了一些操作并根据 ID 对结果进行分组，所以我得到了一个`T1`这样的表：

```
ID | column 1 | column 2 |...| column x 
```

现在由于上述操作`T`消除了一些存在的ID 。 现在我想再次对 进行一些操作，并再次希望根据但仅对中列出的那些 ID对结果进行分组。 我怎样才能在 MySql 中做到这一点？`T1`
`T``ID``T1`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T14:23:14.970

你做了什么样的手术？

如果您加入这两个表，只需像这样为每个 id 创建一个别名

```
SELECT t.id AS id_1, t1.id AS id_2 FROM t LEFT JOIN t1 ON ...... 
```

那么你有来自表 T 的表 id_1 和表 T1 的 id_2 的 id

# algorithm - 最优时间计算算法？

> ID：14606024
> 
> 赞同：-1
> 
> 时间：2013-01-30T14:11:49.723
> 
> 标签：algorithm

我开始玩在线游戏，我想知道如何计算最佳资源以选择获得最短时间。所以基本上有4种资源（比如w,x,y,z），我有稳定的收入（比如w=14,x=20,y=17,z=19），一栋楼需要一定的量在每种资源（例如 70、50、40、100）中，我可以选择获得一种收入的提升（比如我选择的任何资源为 40），我可以随时更改提升的资源。我正在考虑它，但无法提出一个好的算法来计算选择什么资源以及在什么时间更改提升的资源，以便我可以尽快获得所需的资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:14:30.357

这类问题通常通过[线性规划](http://en.wikipedia.org/wiki/Linear_programming)来解决。如果您可以通过示例策略提出更精确的问题（即使是次优策略也很好），则可以显示一个示例。

# c# - 在 C# 中检查 DBNull

> ID：14606029
> 
> 赞同：2
> 
> 时间：2013-01-30T14:11:56.727
> 
> 标签：c#, dbnull

我有一个 StronglyTyped 数据行对象，我可以像这样访问它。

```
accountFilter.Currency_ID 
```

Currency_ID（Int 类型）是行名称。AccountFilter 是 DataRow。当它给出一个值时，没问题。但是当列值为 NULL 时，它会给出 DBNull Exception。我想检查 DBNull 的值，但它不起作用。

```
bool a = Convert.IsDBNull(accountFilter.Currency_ID.ToString()); //doesnt work 
```

这些例子[都](http://forums.asp.net/t/1383849.aspx/1)不起作用。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:29:59.673

通常，类型化数据集的表中的一行`IsXYZNull()`对每个可为空的列都有一个方法。你有没有尝试过

```
bool a = accountFilter.IsCurrency_IDNull(); 
```

但是，这仅适用`accountFilter`于类型不是类型`DataRow`而是*来自类型化数据集的专用数据行类型*。

例如：如果您有一个包含名为 的表的类型化数据集`Test`，则将有一个专用的表类`TestTable`和一个名为 的专用数据行类`TestTableRow`。如果`Test`表包含一个可为空的字段`TestField`，则`TestTableRow`该类将包含一个方法`IsTestFieldNull()`，因此您可以调用

```
bool isnull = testTable[0].IsTestFieldNull(); 
```

判断`TestField`第一行的字段是否`TestTable testTable`为`null`。

请注意，以下内容不起作用，因为结果不是 type`TestTableRow`而是 type `DataRow`，因此您必须将其强制转换为`TestTableRow`：

```
bool isnull = testTable.Rows[0].IsTestFieldNull(); // Won't compile
bool isnull = ((TestTableRow)testTable.Rows[0]).IsTestFieldNull(); // Will compile because of cast 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:26:07.640

你能从这里查到吗？

```
accountFilter.Fields["Currency_ID"] 
```

# mysql - 迭代 mysql 查询变慢

> ID：14606032
> 
> 赞同：0
> 
> 时间：2013-01-30T14:12:03.117
> 
> 标签：mysql, performance

我做了一组快速的查询来打破这个： `27JAN2013`进入`2013-01-27`另一个领域。连续 12 次更改要为每个写入的月份更容易。我注意到每个后续查询都需要更长的时间。

首先：

```
update 
   hondaacura 
set transdate1 = concat_ws('-',substr(trxdate,6,4),'01', left(trxdate,2)) 
where substr(trxdate,3,3) = 'JAN'; 
```

更新总表大小为 350 万条记录的时间为 6.27。

接下来运行的 2 月语句占用了 6.9，依此类推，直到 12 月占用了 12.3。

为什么每次后续查询都会减慢速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:59:39.843

我认为您可以使用此更新声明来解决此问题。那你就不用写12条语句连续执行了。

```
update 
   hondaacura 
set transdate1 = STR_TO_DATE(trxdate, '%d%b%Y'); 
```

有关更多信息，请参见[此处](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)。

# css - 表 th 和 tr 中的两个元素的样式相同。如何避免冗余？

> ID：14606033
> 
> 赞同：0
> 
> 时间：2013-01-30T14:12:04.470
> 
> 标签：css

现在我有以下内容：

```
table th.bordered {
  border: 1px solid red;
}

table td.borderd {
  border: 1px solid red;
} 
```

我怎样才能把它放在一个规则中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:16:43.877

Billy 的方法在技术上是正确的，但还有更好的方法：

```
table .bordered {
  border: 1px solid red;
} 
```

甚至（如果你想在桌子以外的东西上使用它）：

```
.bordered {
   border: 1px solid red;
} 
```

做这两个之一将有助于防止过于具体，这将使它更容易维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:24:32.100

只是想添加到比利的答案中，您可以将其缩短为

```
table .bordered {
    border: 1px solid red;
} 
```

甚至

```
.bordered {
    border: 1px solid red;
} 
```

如果特异性不是问题。

性能会稍好一些，因为浏览器在找到具有“bordered”类的元素后不必检查父元素。但在大多数情况下，这可以忽略不计。

您可能还希望您的类名更具语义，而不仅仅是“有界”。诸如“highlightColumn”或“errorCell”之类的东西。例如，以防万一您决定使用橙色背景而不是红色边框，或者想要将不同的边框用于不同的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:13:50.227

像这样组合它们：

```
table th.bordered, table td.bordered {
  border: 1px solid red;
} 
```

# facebook-fql - 我可以通过 fql 访问哪些用户的数据？

> ID：14606036
> 
> 赞同：0
> 
> 时间：2013-01-30T14:12:09.383
> 
> 标签：facebook-fql

好的，总菜鸟问题：

我想了解 FQL 可以做什么，所以在我尝试学习它之前我知道它是否对我有用。通过浏览 Facebook 的文档，我无法理解以下内容：

使用 FQL，我可以在所有注册用户中搜索某个地区的某个年龄和性别的用户吗？或者我只能在我的朋友中搜索？

请提供官方或其他可靠文档的报价和链接以及您的“是”或“否”。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:13:05.920

# emacs - 建议一个emacs交互功能：之前

> ID：14606037
> 
> 赞同：6
> 
> 时间：2013-01-30T14:12:13.503
> 
> 标签：emacs, defadvice, advising-functions

我想预先建议一些使用交互式参数的函数，例如`find-dired`：

```
(defadvice find-dired (before eab-find-dired activate)
  (message "before!")
  (setq find-args '("-iname '**'" . 10))) 
```

但是 emacs 仅在`find-dired`交互式会话之后执行此建议，而我之前无法设置`find-args`。如何化解矛盾？

更新。请注意，[不推荐使用](https://www.gnu.org/software/emacs/manual/html_node/elisp/Porting-old-advices.html#Porting-old-advices)`defadvice`宏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T17:07:27.227

[artscan](https://stackoverflow.com/users/1937596/artscan)用一个可行的答案回答了他自己的问题，但这有点不完整和误导。这也涉及[`'interactive`](http://www.gnu.org/software/emacs/manual/html_mono/elisp.html#Using-Interactive)，它本身可能会令人困惑 - 因为它看起来像是在命令主体内定义的，但实际上是在输入函数*之前*使用的 - 并且在执行任何建议之前（除非建议有`'interactive`调用...)

建议的[文档](http://www.gnu.org/software/emacs/manual/html_mono/elisp.html#Combined-Definition)缺少在这种情况下会有所帮助的许多细节，因此更好的查看位置实际上是源：[`advice.el`](http://git.savannah.gnu.org/cgit/emacs.git/tree/lisp/emacs-lisp/advice.el). 看看那个并找到评论部分`@ Foo games: An advice tutorial`。你也可以在你的 Emacs 中找到源代码`M-x find-library advice RET`。

具体来说，对于这个问题，请查看`advice.el`标记部分`@@ Advising interactive behavior:`- 因为这正是您想要做的。

如果你仔细阅读它，你会注意到建议不需要**是**这种形式`around`，但也可以是`before`，而且它也可以是`after`——尽管那只是自找麻烦。这是因为`interactive`（并且必须）被特殊对待。

因此，以下代码有效（注意`before`）：

```
(defadvice find-dired (before eab-find-dired (dir args) activate)
  "ignore find-args, hard code \"-iname '**'\""
  (interactive
   (list (read-directory-name "Run find in directory: " nil "" t)
         (read-string "Run find (with args): " '("-iname '**'" . 10)
                      '(find-args-history . 1))))) 
```

正如其他人所建议的那样，可能一种更清洁的方法是编写自己的函数，我认为最简单的是[Lindydancer](https://stackoverflow.com/users/623133/lindydancer)的[答案](https://stackoverflow.com/a/14607894/6148)。

建议是一个非常诱人的工具，但很容易过度使用。我不会说它很危险，但应该谨慎使用。当编写自己的函数不起作用时，最好使用它 - 例如，更改由您无法修改的代码调用的函数的行为。我认为可以在[此处](https://stackoverflow.com/a/334600/6148)、[此处](https://stackoverflow.com/a/607866/6148)和[此处](http://trey-jackson.blogspot.com/2010/10/emacs-tip-38-automatically-diff-binary.html)（按我自己的号角）找到这种情况的好例子。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T15:41:54.707

Emacs`interactive`在调用函数之前获取规范。

一般来说，使用 是一个坏主意`defadvice`，因此我建议您定义自己的函数并将其绑定到适当的键。例如：

```
(defun my-find-dired ()
  (interactive)
  (let ((find-args '("-iname '**'" . 10)))
    (call-interactively 'find-dired))) 
```

当然，您也可以简单地执行以下操作，如果您认为此设置是您希望所有调用的内容`find-dired`：

```
(setq find-args '("-iname '**'" . 10)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T16:05:27.453

为什么要建议交互功能？

您可以轻松定义自己的命令

```
(defun find-dired-my-defaults (dir args)
  "just like `find-dired' but with defaults."
  (interactive
   (list (read-directory-name "Run find in directory: " nil "" t)
         (read-string "Run find (with args): " '("-iname '**'" . 1)
                      '(find-args-history . 1))))
  (find-dired dir args)) 
```

如果它已经绑定在一个键映射中，您可以轻松地重新映射它：

```
(define-key foo-mode-map [remap find-dired] 'find-dired-my-defaults) 
```

`defadvice`尽管 wiki 告诉您什么，最终用户几乎不必使用。

**编辑**：@Lindydancer 的答案在这种情况下更好，但我将把这个答案留在这里，以阻止未来的读者`defadvice`以这种人为的方式使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T15:45:04.230

有用：

```
(defadvice find-dired (around eab-find-dired (dir args) activate)
  (interactive
   (list (read-directory-name "Run find in directory: " nil "" t)
         (read-string "Run find (with args): " '("-iname '**'" . 10)
                      '(find-args-history . 1))))
  ad-do-it) 
```

我使用带有替换`interactive form`的函数：直接在表单中放入必要的表达式。使用 with arguments而不是.`find-dired``'("-iname '**'" . 10)``find-args``around-advice``(dir args)``before-advice`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-29T09:46:59.570

我遇到了这个问题，寻找一种简单的方法来扩展`eval-last-sexp`,`describe-function`和类似函数的交互行为，而不必为每个函数编写专门的建议函数。为此，我使用`toggle-debug-on-error`和一个虚拟函数分析了交互式使用的调用堆栈`(defun x () (interactive (list :interactiveform (error "Int"))))`。

*   交互使用*总是*需要调用`call-interactively`.
*   当通过按下热键执行命令时，该命令被传递给`command-execute`，它调用`call-interactively`.
*   当执行 as`M-x COMMAND`时，函数名首先作为字符串传递给`execute-extended-command`（这是由 调用的命令`M-x`），然后调用`command-execute`, ...

根据`interactive`表单的所有调用是否应受通知影响，或者仅直接热键或`M-x`调用，可以建议这些功能之一，例如使用现代`nadvice.el`界面：

```
(defun setup-var-advice (oldfun command &rest r)
  (if (eq command 'save-buffer)
      (let ((myvar t)) (apply oldfun command r)) ;; Advice sets up variable
    (apply oldfun command r))) ;; Advice has no effect

(advice-add #'call-interactively :around #'setup-var-advice) 
```

在这种简单的情况下，与通知功能相关的开销很小，但对于更实际的情况，保持检查通知是否应该有效可能很重要。

# android - 在我按下主页按钮后 ScheduledExecutorService 不在后台运行

> ID：14606039
> 
> 赞同：0
> 
> 时间：2013-01-30T14:12:20.543
> 
> 标签：android, scheduledexecutorservice

我在 onCreate() 和按下主页按钮后创建了它；ScheduledExecutorService 不会在后台每 10 分钟运行一次。为什么？

哪里错了。
请帮帮我。

提前致谢。

```
 ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();
        executor.scheduleWithFixedDelay(new Runnable(){

            public void run() {
//play music to check if it executes every 10 mins

                  mp3.start();
            }

    }, 0, 600, TimeUnit.SECONDS); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:23:34.707

我认为[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)比 Executor 更适合每 10 分钟重复一次任务。

我建议设置一个 AlarmManager 并使用一个广播接收器来“捕捉”它触发的触发器，在你的 onReceive() 方法中，你可以做任何你喜欢的事情，包括启动你的 mp3。我认为这种方式对你来说会更好，特别是如果你打算让你的声音播放，即使你的应用程序当前不是设备上的活动应用程序。

# json - Codeigniter 将值从控制器传递到使用 ajax 请求查看

> ID：14606040
> 
> 赞同：0
> 
> 时间：2013-01-30T14:12:25.867
> 
> 标签：json, ajax, codeigniter

我是 CI 新手，想将 json 编码值传递给查看以进行进一步处理，请参见下文，

jQuery帖子：

```
$('#btn_reset_password').click(function(){
    var parameters = $('#reset_password_form').serialize();
    //alert(parameters);
    $.ajax({
        url: baseurl + 'site/check_email_exist',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(output_str){
            if(output_str.flag == "true"){
                // redirect to change password page
                window.location.replace(baseurl + 'site/change_user_password');

            }else if(output_str == "false"){
                $('#result_msg').html("Your email is not in our database");

            }else{
                $('#result_msg').html(output_str);  
            }
        }
    });

}); 
```

控制器：

```
class Site extends CI_Controller {

public function change_user_password() {
    $this->load->view('header');
    $this->load->view('change_user_password');
    $this->load->view('footer');
}

public function check_email_exist(){
    $email = $this->input->post('email');

    if(!empty($email)){
        $query = $this->db->query('SELECT * FROM users WHERE email="'.$email.'"');

        if($query->num_rows() > 0){
            $row = $query->row();

            $output_str = array('email' => $row->email,
                                'flag' => 'true'
                                );

            //$this->load->view('change_user_password', $output_str);
            //$output_str = "true";

        }else{
            $output_str = "false";
        }

    }else{
        $output_str = "Email cannot leave blank";
    }

    echo json_encode($output_str);
}

} 
```

查看文件'change_user_password.php'：

```
<?php 
//$obj = json_decode($output_str);
echo $email;
?>

<p><div id="result_msg"></div></p>
<p>
<form id="reset_password_form">
<label><b>New Password: </b></label>
<input type="password" name="new_password" style="width:250px;" />
<input type="button" id="btn_change" name="" value="Change" /><br />
</form>
</p> 
```

如何传递/检索数组 $output_str 中的电子邮件值以查看“change_user_password.php”？我尝试了很多方法，但仍然没有解决这个问题，请帮助，非常感谢。

**添加：**

是 Codeigniter 不能以这种方式接受 url 传递参数 => page?email=abc@xyz.com 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:33:39.480

好的，试试这个：

在您的控制器中：

```
public function check_email_exist(){
    $email = $this->input->post('email');

    if(!empty($email)){
        $query = $this->db->query('SELECT * FROM users WHERE email="'.$email.'"');

        if($query->num_rows() > 0){
            $row = $query->row();

            $output_str = array('email' => $row->email,
                                'flag' => 'true'
                                );

            //$this->load->view('change_user_password', $output_str);
            echo json_encode($output_str);

        }else{
            $output_str = "false";
        }

    }else{
        $output_str = "Email cannot leave blank";
    } 
```

然后在你的jQuery中：

```
$('#btn_reset_password').click(function(){
    var parameters = $('#reset_password_form').serialize();
    //alert(parameters);
    $.ajax({
        url: baseurl + 'site/check_email_exist',
        type: 'POST',
        data: parameters,
        dataType: 'json',
        success: function(output_str){
            if(output_str.flag == "true"){
                // redirect to change password page
                window.location.replace(baseurl + 'site/change_user_password/'+output_str.email);

            }else if(output_str == "false"){
                $('#result_msg').html("Your email is not in our database");

            }else{
                $('#result_msg').html(output_str);  
            }
        }
    });

}); 
```

最后的`change_password`功能应该是这样的：

```
public function change_user_password($email = '') {
$data['email'] = $email;
    $this->load->view('header');
    $this->load->view('change_user_password', $data);
    $this->load->view('footer');
} 
```

## 更新：

如果您愿意，可以使用会话：

```
public function check_email_exist(){
    $email = $this->input->post('email');

    if(!empty($email)){
        $query = $this->db->query('SELECT * FROM users WHERE email="'.$email.'"');

        if($query->num_rows() > 0){
            $row = $query->row();

            $output_str = array('email' => $row->email,
                                'flag' => 'true'
                                );

            //$this->load->view('change_user_password', $output_str);
            $this->session->set_userdata('email',$row->email);
            //echo json_encode($output_str);

        }else{
            $output_str = "false";
        }

    }else{
        $output_str = "Email cannot leave blank";
    } 
```

然后使用以下命令在您的视图中检索它：

```
$this->session->userdata('email'); 
```

所以您不必在字符串查询中传递电子邮件。

# cassandra - Cassandra RowKey 过滤器

> ID：14606043
> 
> 赞同：0
> 
> 时间：2013-01-30T14:12:35.790
> 
> 标签：cassandra, bigdata

如果我的 Cassandra 列族中有几个键，格式为

```
ben-jhonson
niel-jhonson
kim-jhonson
George-Williams
Douglous-Peter 
```

- -ETC

是否有任何策略可以检索所有以 Jhonson 结尾的名称？

通常是形式的 sql 查询`select * from tablename where name like '%Jhonson';`

相同的 cassandra 替代品可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:51:56.483

Cassandra 不支持 LIKE 查询。如果您需要这种功能，您可以使用 lastname:firstname 的复合键来实现。这将允许您单独查询姓氏组件并获取所有匹配的名字。请注意，姓氏组件必须是列表中的第一个，因为您必须提供至少一个等于匹配项。

# c# - 外部程序在启动时崩溃，但在 runas 时工作

> ID：14606051
> 
> 赞同：2
> 
> 时间：2013-01-30T14:12:53.367
> 
> 标签：c#, .net, winforms, .net-2.0, impersonation

我的 .Net-Windows-Forms-Application 以另一个用户身份运行。该程序启动另一个从互操作程序集实例化的 .net-exe。尝试从互操作程序集实例化时，外部程序崩溃。如果我按 Shift-RightClick-RunAsOtherUser 启动外部 exe 并输入与模拟相同的登录数据，则程序可以正常工作。

也许它有什么。与我的流程开始通话有关：

```
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.FileName         = Path.Combine(System.Windows.Forms.Application.StartupPath, exeFile);
startInfo.Arguments        = arguments;
Process process            = Process.Start(startInfo);
process.WaitForExit(); 
```

**[编辑]**

**崩溃详细信息：** 在 vmWare 和我的开发机器上：没有异常窗口，什么都没有，外部应用程序被执行然后消失（我在其中放了一些消息框进行检查）。

在客户机器上：异常窗口

```
Unknown error (0xffff...e)
Win32Exception
System
StartWithShellExecuteEx
  at System.Diagnostics.Process.StartWithShellExecuteEx(ProcessStartInfo startInfo)
   at System.Diagnostics.Process.Start()
   at System.Diagnostics.Process.Start(ProcessStartInfo startInfo) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:24:54.847

如果您知道用户名和密码，则可以在进程的启动信息中设置这些属性。如果只有一个模拟令牌，我认为您使用 CreateProcessAsUser ttp://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx 的 pinvoke 卡住了

Process.Start 使用用户名、密码和域重载：http: [//msdn.microsoft.com/en-us/library/sxf2saat.aspx](http://msdn.microsoft.com/en-us/library/sxf2saat.aspx)

PInvoke CreateProcessAsUser 已经有一个 SO 问题和答案：[https ://stackoverflow.com/a/671368/884862](https://stackoverflow.com/a/671368/884862)

# php - 将对象传递给类中的函数

> ID：14606055
> 
> 赞同：0
> 
> 时间：2013-01-30T14:12:58.827
> 
> 标签：php, arrays, class, object

我想知道如何在类中的函数之间传递已在其他地方设置的对象？编辑：*因此，如果尚未设置默认值，则该函数仅使用默认值。*

因此，例如下面我在构造函数中有对象 objAuthParams 中的默认参数。如果我想调用该类并更改这些参数，我知道我可以通过创建一个新类来做到这一点，但在那种情况下，我将如何将新值传递给函数*oauthorise*？

我花了很多时间在网上搜索，但你可能会说我无法很好地表达我正在努力做的事情，而且我对 PHP 非常生疏，我将不胜感激任何关于我要去哪里的指针/解释错误的！

这是代码

```
class oauth {

public $objAuthParams;

// Construnct
public function __construct() {
$this->objAuthParams = (object) array(
        "method" => "GET",
        "access_token" => "a token",
        "access_token_secret" => "a secret",
        "consumer_key" => "b consumer",
        "consumer_secret" => "b secret"     
);  

$this->oauthorise();
}

public function oauthorise() {

echo $this->objAuthParams->method; 

}       

} // eoc

// Attempt to set new params for method
$class = new oauth;

$class->objAuthParams->method = "im a hairy badger"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:44:32.513

您可以将`objAuthParams`对象传递给构造函数。如果已设置，则将`$onjAuthParam`变量设置为注入的变量。

```
<?php

class oauth {

    public $objAuthParams;

    // Construnct
    public function __construct($objAuthParams = false) {
        if(!$objAuthParams)
            $this->objAuthParams = (object) array(
                "method" => "GET",
                "access_token" => "a token",
                "access_token_secret" => "a secret",
                "consumer_key" => "b consumer",
                "consumer_secret" => "b secret"     
            );
        else 
            $this->objAuthParams = $objAuthParams;

        $this->oauthorise();
    }

    public function oauthorise() {
        echo $this->objAuthParams->method; 
    }       

}

$myAuthParams = (object)array(
    "method" => "im a hairy badger",
    "access_token" => "a token",
    "access_token_secret" => "a secret",
    "consumer_key" => "b consumer",
    "consumer_secret" => "b secret"  
);

$class = new oauth($myAuthParams);
print_r($class); 

$class2 = new oauth();
print_r($class2) 
```

这称为依赖注入。-- [http://net.tutsplus.com/tutorials/php/dependency-injection-in-php/](http://net.tutsplus.com/tutorials/php/dependency-injection-in-php/)

# c# - 如何为 C# 调试设置环境变量

> ID：14606056
> 
> 赞同：3
> 
> 时间：2013-01-30T14:12:59.953
> 
> 标签：c#, debugging, dll, environment-variables, path-variables

我正在尝试将托管和本机 dll 加载到我的 C# 应用程序中。我想设置 PATH 环境变量，以便应用程序可以找到要加载的 dll。在 C++ 中这很容易，但我如何在 C# 项目中做到这一点？（顺便说一下，我使用的是 VS2012、.NET、WPF）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:15:12.107

使用[**Environment.SetEnvironmentVariable()**](http://msdn.microsoft.com/en-us/library/z46c489x.aspx)。

```
string currentPath = Environment.GetEnvironmentVariable("path");
Environment.SetEnvironmentVariable("path",currentPath + ";c:\path_to_libraries"); 
```

请记住，这仅适用于当前流程。如果要设置持久环境变量（用户或机器范围），请使用`Environment.SetEnvironmentVariable(string, string, EnvironmentVariableTarget)`重载。 [**请参阅此处**](http://msdn.microsoft.com/en-us/library/96xafkes.aspx)以获取该参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T23:55:24.750

小心这件事。我会明确设置目标，例如 System.Environment.SetEnvironmentVariable("windir", System.Environment.GetEnvironmentVariable("SystemRoot"), EnvironmentVariableTarget.User);

当我没有设置目标时，我的 Windows 会话发生了非常奇怪的事情，需要我注销并登录甚至重新启动。因此，除非此更改确实是在机器或过程级别，否则不要假设默认的结果令人满意

# mysql - MySQL 查询缓存何时刷新？

> ID：14606063
> 
> 赞同：3
> 
> 时间：2013-01-30T14:13:15.947
> 
> 标签：mysql, sql

我有一个innodb mysql db，我想知道查询缓存是否会在表中的任何更改时被刷新，或者当只有这些记录发生更改时它会被刷新？

我有一张大桌子，每隔几分钟就会修改一次，所以我想知道它有多大用处。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:14:27.313

我认为您不是在谈论**Query Cache**，而是在谈论**Buffer Cache**。
查询缓存是最新 SQL 语句的缓存，这些语句永远不会刷新到磁盘。

刷新缓冲区缓存不如刷新**缓冲区日志**重要。日志会跟踪对数据库中的数据执行的更新。它用于在发生故障时恢复数据库，即当缓冲区缓存未刷新到磁盘时。

在 InnoDB 中刷新缓冲日志有 3 种主要方法，它们由参数控制`innodb_flush_log_at_trx_commit`。
*MySQL 文档引用：*

*“如果发生崩溃时您可以承受丢失一些最新提交的事务，您可以将 innodb_flush_log_at_trx_commit 参数设置为 0。无论如何，InnoDB 都会尝试每秒刷新一次日志，尽管无法保证刷新。另外，设置innodb_support_xa 的值为 0，这将减少由于同步磁盘数据和二进制日志而导致的磁盘刷新次数。”*

来源：[http ://dev.mysql.com/doc/refman/5.1/en/innodb-tuning.html](http://dev.mysql.com/doc/refman/5.1/en/innodb-tuning.html)

希望有帮助

# php - 如何用 TinyMCE 替换元素

> ID：14606068
> 
> 赞同：2
> 
> 时间：2013-01-30T14:13:28.323
> 
> 标签：php, javascript, tinymce

我正在使用 TinyMCE，我正在创建一个新插件。

在这个插件中，我需要用其他东西替换我在文本中选择的东西。

有了这个：`var inst = tinyMCE.activeEditor;`我可以有一个我的编辑器的实例。

如何检索我的选择？例如，我如何替换我的选择`<span>MYSELECTION</span>`？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:19:50.577

试试这个：

```
<a href="#" onclick="tinyMCE.execCommand('mceReplaceContent',false,'<span>{$selection}</span>');return false;">[Replace selection]</a> 
```

编辑：关于检索选择看到[这个](https://stackoverflow.com/questions/3985524/getting-selected-html-content-in-tinymce-editor)问题。

# java - Java JFrame 在附加屏幕上最小化

> ID：14606070
> 
> 赞同：2
> 
> 时间：2013-01-30T14:13:36.167
> 
> 标签：java, swing, jframe, monitor, minimized

我正在创建一个可以在两个监视器上运行的应用程序。为此，我创建了 2 个 JFrame。第一个是我的客户端应用程序，它只会显示我必须看到的信息。第二个（我们称之为 TweetForm）是一个 jframe，它将显示每个人都可以看到的信息。（可能的显示器是电视）。我已经搜索了如何将它放在两个单独的屏幕上并找到以下解决方案： [Show JFrame in a specific screen in dual monitor configuration](https://stackoverflow.com/questions/4627553/java-show-jframe-in-a-specific-screen-in-dual-monitor-configuration)

这工作得很好，但是：每当我将注意力集中在我的“主监视器”上时，电视上显示的 tweetForm 就会被最小化。如何防止 jframe 最小化并始终显示？（即使第一个 jframe 是否最小化）

来自第二个 JFRAME 的代码

```
/**
 * Creates new form TweetForm
 */
public TweetForm()  
{
    initComponents();
    dispose();
    setUndecorated(true);
    pack();
    setExtendedState(Frame.MAXIMIZED_BOTH);
    setTitle("Serious Request");
    this.setAlwaysOnTop(true);

    showOnScreen(1, this);
}

public static void showOnScreen( int screen, JFrame frame )
{
    GraphicsEnvironment ge = GraphicsEnvironment
        .getLocalGraphicsEnvironment();
    GraphicsDevice[] gs = ge.getScreenDevices();
    if( screen > -1 && screen < gs.length )
    {
        gs[screen].setFullScreenWindow( frame );
    }
    else if( gs.length > 0 )
    {
        gs[0].setFullScreenWindow( frame );
    }
    else
    {
        throw new RuntimeException( "No Screens Found" );
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:08:21.310

只使用一个`JFrame`。将另一个设置为`JDialog`并在对话框中针对您的框架更新数据。

另见，

[使用多个 JFrame](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice)。

[使用多个 JFrame](https://stackoverflow.com/questions/7889922/working-with-2-or-more-frames?lq=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T16:00:31.220

不确定我是否理解`setFullScreenWindow`使用`setExtendedState(MAXIMIZED)`结合的好处`setUndecorated(true)`。无论如何，无论我是否使用`setFullScreenWindow()`，我都没有观察到您提到的行为（请参见下面的示例代码，用于`ESC`退出应用程序）。

有什么理由调用`dispose()`你的构造函数？对我来说似乎很奇怪。

```
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;

import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class Test2JFrame {

    protected void initUI() {
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        int i = 1;
        for (GraphicsDevice gd : ge.getScreenDevices()) {
            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.add(createLabel(String.valueOf(i)));
            frame.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), "exit");
            frame.getRootPane().getActionMap().put("exit", new AbstractAction() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    System.exit(0);
                }
            });
            frame.setLocation(gd.getDefaultConfiguration().getBounds().getLocation());
            frame.setUndecorated(true);
            frame.setExtendedState(frame.getExtendedState() | JFrame.MAXIMIZED_BOTH);
            frame.setVisible(true);
            gd.setFullScreenWindow(frame);
            i++;
        }
    }

    private JLabel createLabel(String label) {
        JLabel jLabel = new JLabel(label);
        jLabel.setHorizontalAlignment(JLabel.CENTER);
        jLabel.setFont(jLabel.getFont().deriveFont(48.0f));
        jLabel.setFocusable(true);
        return jLabel;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test2JFrame().initUI();
            }
        });
    }

} 
```

# android - 动态添加到表的行不可见

> ID：14606077
> 
> 赞同：0
> 
> 时间：2013-01-30T14:13:51.093
> 
> 标签：android, android-widget

我正在尝试以编程方式向我的 TableLayout 添加一行。但它不可见。

这是我的代码：

```
// Get the TableLayout
    TableLayout tl = (TableLayout) getActivity().findViewById(R.id.table_child_data_01);

    TableRow tr = new TableRow(getActivity());
    tr.setId(100);
    tr.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));

    // Create a TextView to house the name of the province
    TextView labelTV = new TextView(getActivity());
    labelTV.setId(200);
    labelTV.setText("DynamicTV");
    labelTV.setTextColor(Color.BLACK);
    labelTV.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
    tr.addView(labelTV);

    // Create a TextView to house the value of the after-tax income
    TextView valueTV = new TextView(getActivity());
    valueTV.setId(300);
    valueTV.setText("$0");
    valueTV.setTextColor(Color.BLACK);
    valueTV.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
    tr.addView(valueTV);

    // Create a TextView to house the value of the after-tax income
    TextView valueTV2 = new TextView(getActivity());
    valueTV2.setId(400);
    valueTV2.setText("00");
    valueTV2.setTextColor(Color.BLACK);
    valueTV2.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
    tr.addView(valueTV2);

    // Add the TableRow to the TableLayout
    tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

    Utilities.ShowToastMsg(getActivity(), "Row added"); 
```

我错过了什么吗？

我使用`getActivity()`而不是`this`因为上面的代码在 Fragment 而不是 Activity 中。

## 编辑：

在其他两个具有相同问题的线程中，我找到了以下解决方案：

使用`import TableRow.LayoutParams.MATCH_PARENT;`代替`import android.view.ViewGroup.LayoutParams;`

在为 TableRow tr 设置布局参数时使用`TableRow.LayoutParams.MATCH_PARENT`而不是。`LayoutParams.MATCH_PARENT`

但以上都不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:33:36.547

在设置 LayoutParams 时。你必须记住这一点：

-> 如果您设置 LayoutParams 的视图/元素提供 LayoutParams，请使用它们。例如 TableRow 提供了 LayoutParams ( `TableRow.LayoutParams`) 所以在设置 TableRow 的 LayoutParams 时，我们需要专门使用`TableRow.LayoutParams`来代替`LayoutParams`或其他任何东西。

-> 如果视图/元素本身不提供 LayoutParams，请使用提供 LayoutParams 的直接父级的 LayoutParams。例如，在我上面的代码中，`TextView`不提供 LayoutParams。所以我需要查看它的直接父级，即 TableRow（它是否提供 LayoutParams？是的。使用它！！）

所以，在上面的代码中：

```
tr.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT)); 
```

会成为：

```
TableRow.LayoutParams params = new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT);
tr.setLayoutParams(params); 
```

和

这：

```
labelTV.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT)); 
```

会变成这样：

```
TableRow.LayoutParams paramsTVh = new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT);
labelTV.setLayoutParams( paramsTVh ); 
```

这个改变对我有用。希望这对某人有用。

# php - 想要一周的第一天（星期一）

> ID：14606090
> 
> 赞同：0
> 
> 时间：2013-01-30T14:14:11.437
> 
> 标签：php, gnuplot

> **可能重复：**
> [在 PHP 中获取一周的第一天？](https://stackoverflow.com/questions/1897727/get-first-day-of-week-in-php)

如果我给出任何日期，我想要一周的第一天，它适用于除星期一以外的所有日期，因为它给了我前一个星期一，而不是这个星期一。

我的代码：

```
$beginweek = strtotime('last Monday', $timestamp); //$timestamp = a given date 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:21:14.187

您需要写一个条件来查看当天是否是星期一，否则使用'last Monday'

# android - 在Android中的对象之间画一条线

> ID：14606091
> 
> 赞同：3
> 
> 时间：2013-01-30T14:14:15.817
> 
> 标签：android, line, draw

您好，我有一个布局，其中包含 x 个动态创建的按钮。我需要做的是画一条连接第一个和最后一个按钮的线。我怎样才能得到按钮的位置，我怎样才能画线？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-17T05:29:36.920

这是你画线的方式：

```
canvas.drawLine(startPoint.x, startPoint.y, endPoint.x, endPoint.y, paint); 
```

这是在`onDraw`方法中对画布对象完成的。

[以下](https://developer.android.com/reference/android/graphics/Canvas.html#drawLine(float,%20float,%20float,%20float,%20android.graphics.Paint))是更多信息：

# facebook - 使用 FQL 获取我的应用程序的全部安装

> ID：14606092
> 
> 赞同：2
> 
> 时间：2013-01-30T14:14:16.857
> 
> 标签：facebook, facebook-fql

我正在尝试获取已安装我的应用程序的用户数量。我正在发送基于以下信息构建的 fql 查询：

[https://developers.facebook.com/docs/reference/fql/insights/#Metrics](https://developers.facebook.com/docs/reference/fql/insights/#Metrics)

由于这条指令，我需要调用指标 'application_installed_users'，期间未指定“lifetime”和 end_time。

我尝试在[https://developers.facebook.com/tools/](https://developers.facebook.com/tools/)中调用：

`SELECT metric, value FROM insights WHERE object_id=<my_app_id> AND metric='application_installed_users' AND period=period('lifetime')`

此查询给出以下错误：

`{ "error": { "message": "You must specify a bounded date range using unix time stamps as constant values.", "type": "NoIndexFunctionException", "code": 604 } }`

所以我也试过：

`SELECT metric, value FROM insights WHERE object_id=<my_app_id> AND metric='application_installed_users' AND end_time=0 AND period=period('lifetime')`

whick 导致空数据。

调用“application_installed_users”的正确查询是什么？

干杯， Maciek

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:22:20.527

If you look at Facebook's [documentation for the insights table](https://developers.facebook.com/docs/reference/fql/insights), you'll see some fields marked with a half-filled star. These are their index fields, and you must supply values for all of these fields in your WHERE clause.

In your case, you're receiving an empty data package because you're asking for end_time=0, which is limiting the data to the start of epoch time. Try supplying recent end_time and that should solve your issue.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:20:32.913

我刚用了这个`... AND end_time = end_time_date('2013-04-04') ...`，它奏效了。

# java - 从 servlet 尝试时，我没有看到创建的目录。这是为什么？

> ID：14606101
> 
> 赞同：0
> 
> 时间：2013-01-30T14:14:31.453
> 
> 标签：java, tomcat, servlets

下面是一个 servlet，它尝试在该目录中创建一个目录和一个文本文件。

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    String s = request.getServletContext().getRealPath("/");
    PrintWriter out = response.getWriter();
    FileMaker fm  = new FileMaker();
    fm.makeDirectoryTester();
} 
```

* * *

*在其中创建目录和文本文件的类：*

```
public void makeDirectoryTester() {
    try {
        File f = new File("FlushTester/");
        if(!f.exists()) {
            boolean b = f.mkdir();
            System.out.println("Directory Made (Inside makeDirectoryTester) --> " + b);
            PrintWriter writer = new PrintWriter("FlushTester/TESTER.txt");
            writer.println("This is the first statement");
            writer.println("This is the second statement");
            writer.println("This is the third statement");
            writer.close();
        }
    }catch(Exception exc) {
        exc.printStackTrace();
    }
} 
```

问题是布尔*f.mkdir()*返回`true`但我看不到任何创建的目录或其中的任何文件！这是为什么 ？我使用tomcat作为服务器。这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:22:17.220

如果您使用`File f = new File("FlushTester/");`的文件是相对于您的应用程序的起点。对于tomcat，通常是`bin`目录。

如果你在其他地方需要它，你应该使用绝对路径（可能以某种方式配置），或者相对于你的 tomcat`bin`目录的路径。

# android - Android Facebook SDK - “与登录共享对话框”

> ID：14606103
> 
> 赞同：1
> 
> 时间：2013-01-30T14:14:42.827
> 
> 标签：android, facebook

我正在尝试在 Android 中实现“共享对话框”Facebook 按钮。它与示例不同，因为没有单独的登录按钮，所以流程都在 Share 按钮内。在我的 HTC Desire 上它可以工作：用户单击按钮。如果他们未登录，Facebook 原生应用程序将启动，并提示他们授权应用程序用于基本和发布范围（按照文档要求一个接一个），然后他们可以使用原生共享对话框发布到 Facebook。在其他各种手机上，我只是臭名昭著：

“发生了一个错误。请稍后重试。”

我已经在 StackOverflow 上阅读了几个线程，现在尝试了很多东西，但我已经没有想法了，这需要工作。真正让我感到惊讶的是，在线或任何地方都没有演示或示例代码说明如何做到这一点——这肯定是 90% 的开发人员想要使用 Android Facebook SDK 的目的吗？大多数应用程序都没有单独的 Facebook 登录按钮，这样共享才有效，是吗？

这是我的代码。任何帮助都会非常有用！

**在 Application.onCreate() 中：**

```
 String facebook_id = getApplicationContext().getString(R.string.facebook_id);
    facebookSession = Session.getActiveSession();
    Log.d("Application", "** facebookSession = "+facebookSession);

    if (facebookSession == null || facebookSession.getState().isClosed()) {
        facebookSession = new Session.Builder(this).setApplicationId(facebook_id).build();
        Log.d("Application", "** Built new session: "+facebookSession);
        Session.setActiveSession(facebookSession);
    } 
```

**在我的 Fragment 的 Facebook 分享按钮监听器中：**

```
protected void tryFacebookShare() {

    StatusCallback callback = new StatusCallback() {
        public void call(Session session, SessionState state, Exception exception) {
            if (exception != null) {
                Log.d("facebook", "Error in Facebook login: "+exception.getMessage());
                Application.refreshSession();
            }
            Log.d("facebook", "Session StatusCallback returned - state: "+state.toString()+" session: "+session.toString()+" token: "+session.getAccessToken());

            if(state == SessionState.OPENED || state == SessionState.OPENED_TOKEN_UPDATED) {
                if(session.getPermissions().contains("publish_actions")) {
                    Log.d("facebook", "We have permissions, publishing");
                    PollFragment.this.publishPollStory();
                } else {
                    Log.d("facebook", "Requesting publish permissions");
                    Session.NewPermissionsRequest newPermissionsRequest = new Session
                            .NewPermissionsRequest(PollFragment.this, Arrays.asList("publish_actions"));
                    session.requestNewPublishPermissions(newPermissionsRequest);
                }
            }
        }
    };

    Session session = Application.getFacebookSession();
    if(!session.isOpened() && !session.isClosed()) {
        Log.d("facebook", "Opening new session");
        session.openForRead(new Session.OpenRequest(getActivity()).setPermissions(Arrays.asList("basic_info")).setCallback(callback));
    } else {
        Log.d("facebook", "Opening active session...");
        Session.openActiveSession(getActivity(), this, true, callback);
    }
    } 
```

publishPollStory() 打开共享对话框，似乎工作正常。问题发生在它走到这一步之前：通常我会在 StatusCallback 报告它在 SessionState.OPENING 中，然后 WebView 给我“发生错误”并且我被卡住了。我也没有调用 onActivityResult() 。

有任何想法吗？在此先感谢好心的 StackOverflow 用户！:)

# matlab - “FaceDetect.mexw32”：找不到指定的模块

> ID：14606116
> 
> 赞同：0
> 
> 时间：2013-01-30T14:15:37.900
> 
> 标签：matlab, face-detection

我在 32 位 Windows 7 PC 上使用 Matlab R2011a。我需要检测图像中的人脸，为此我使用[Viola Jones 代码](http://www.mathworks.com/matlabcentral/fileexchange/19912-open-cv-viola-jones-face-detection-in-matlab)。无论我将所需文件放在哪里，我都会不断收到此错误：

> `'FaceDetect.mexw32': The specified module could not be found.`

我该如何克服这个问题？

# batch-file - 批处理文件检查我的网线是否拔掉

> ID：14606117
> 
> 赞同：0
> 
> 时间：2013-01-30T14:15:38.283
> 
> 标签：batch-file

我有一个安装在服务器上的应用程序“Lifeline.exe”。要在客户端计算机上执行此应用程序，我需要从服务器创建快捷方式。

有时网络中的某个交换机出现故障，用户无法访问服务器。

我想创建一个 ping 到本地 IP 地址即 localhost 的批处理文件，如果 ping status=false 那么它将执行“网络错误，请联系管理员”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:42:00.503

你可以ping服务器，看看它是否回复。

```
@echo off
ping 192.168.0.1 | find "Reply" >nul
if not %errorlevel%==0 echo Network Error, please contact Administrator
pause >nul 
```

# git - 拉动时netbeans会覆盖我的提交消息

> ID：14606120
> 
> 赞同：0
> 
> 时间：2013-01-30T14:15:39.993
> 
> 标签：git, netbeans, github, overwrite, commit-message

我在带有 GitHub 存储库的 NetBeans 7.2.1 中使用 Git 版本控制。如果我提交我的更改，然后在提交后立即将其推送到远程存储库（假设远程版本自上次推送以来没有更改），我的提交消息将出现在 GitHub 上。当其他协作者进行拉取时，我的提交消息会出现在他们的拉取摘要中。

但问题是，如果我必须在推送之前进行拉取（如果自上次推送后远程版本发生了变化），那么我的提交消息会以某种方式被[https://github.com的“合并分支 'master' 覆盖” /](https://github.com/) ...”。它非常烦人。在这种情况下，我可以保留我的原始提交吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:39:06.017

我认为您的提交消息没有被覆盖，它根本不是日志中的最新消息。

如果您在推送到远程存储库之前不必拉取，您的提交是日志中的最后（最新）内容，因此它显示在顶部。在您必须进行拉动的情况下，Netbeans 会自动`git merge origin/master`创建合并提交。这就是它的`Merge branch master`来源。

如果您查看提交日志，您应该会看到如下内容：

```
M  <-- Merge commit from Netbeans
|\
| \
X  \  <-- Your latest commit
|   O  <-- Commits made by someone else which Netbeans merged. 
```

作为编辑建议，学习在命令行中使用 git 可能会很好。根据我的经验，专门通过 GUI 与 git 交互的开发人员很难理解 git 的工作原理以及他们的存储库发生了什么。

# matlab - MATLAB 中多条 3d 线的梯形网格、轮廓和曲面化

> ID：14606123
> 
> 赞同：2
> 
> 时间：2013-01-30T14:15:48.850
> 
> 标签：matlab, contour, geometry-surface

我的第三个轴有 4 个梯形和 dZ 点。数据分为三组：

![数据图](../Images/9d78979538c6e438c1c8a804f309729c.png)

我想从最小 dz 点制作一个等高线图，并以 0.1 的级别进行。我还想用我的三条线制作一个光滑的表面。

我怎样才能做到这一点？

# php - 打印特定日期的结果 mysql+php

> ID：14606129
> 
> 赞同：-1
> 
> 时间：2013-01-30T14:15:59.247
> 
> 标签：php, mysql, date

大家好）我有桌子和几行。如何打印特定日期的所有结果？像这样的具体日期 - 30.01.2013 。以前保存在 $date 中的日期（在变量中）。

谷歌帮助了我），但它是上个月的..：

```
select id from tab where date_format(real_time, '%Y%m') = date_format(date_add(now(), interval -1 month), '%Y%m'); 
```

保存在 TIMESTAMP 行中的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:29:59.123

```
select ...
from ...
where real_time = '2013-01-30' 
```

# ios - 将 UITableViewController 子类重构为 UIViewController 子类

> ID：14606130
> 
> 赞同：0
> 
> 时间：2013-01-30T14:16:02.667
> 
> 标签：ios, uiviewcontroller, refactoring, uitableview

在我的应用程序中，我想在“全屏”中显示一个表格，所以我创建了一个 UITableViewController 的子类。当我想显示表格时，我只是实例化它并使用`pushViewController:animated:`. 现在我决定我真的想将它显示为一个模式，所以我想给它一个带有“完成”按钮的导航栏。我相信这意味着我现在需要将其设为 UIViewController 子类而不是 UITableViewController 子类，因为它现在不仅仅是一个表。不过，我不确定这是否可以做到；我创建了一个 xib，但 Xcode 似乎不想让我使用那个 xib 在 .h 文件中创建 IBOutlets，所以我不认为这两者是“连接的”。

我以前遇到过这个问题，通过创建一个新的 UIViewController 子类和 xib 并将我需要的所有东西从 UITableViewController 子类的文件复制并粘贴到新的子类的文件中来解决它。我当时就知道，正如我现在所知道的那样，那是一个笨拙且令人不快的解决方案。有谁知道如何正确完成这样的事情？

另外，为了避免将来出现这个问题，我是否应该永远不要在未来制作这样的顶级视图，而只是确保我使用`pushViewController:animated:`或`presentModalViewController:animated:`使用的所有东西都是 UIViewController 子类？或者做我一直在做的事情安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:11:25.497

您在问题中提到的几件事表明存在一些误解。首先，如果你正在推动你的表格视图控制器，那么它必须嵌入到导航控制器中，因此会有一个导航栏——你可以在这个栏上添加一个完成按钮，如果这就是你想要的全部改变。无需重构您的代码。

如果你想使用 UIViewController 而不是表格视图控制器，你应该能够连接你的 nib。您是否将 nib 中文件所有者的类更改为 UIViewController 类？完成此操作后，您应该能够连接插座。

将代码从表视图控制器复制和粘贴到视图控制器中并没有什么“hacky”。我一直这样做，而不是写出所有这些文件。

我不确定你在最后一个问题中问的是什么。如何在屏幕上显示表格视图（推送或呈现）与您显示的是表格视图控制器还是视图控制器无关。您应该使用最适合您需求的一种。

# osx-lion - 在 MacOSX 上使用 Captive Network Assistant 连接到 VPN

> ID：14606131
> 
> 赞同：7
> 
> 时间：2013-01-30T14:16:03.457
> 
> 标签：osx-lion, osx-mountain-lion, vpn, autologin

Apple 在 MacOSX Lion (10.7) 中引入了一个新的“功能”，称为 Captive Network Assistant。在我看来，它只是一个无用且令人讨厌的功能。它的目的是帮助您登录需要身份验证的网络（请参阅：[强制门户](http://en.wikipedia.org/wiki/Captive_portal)），但该功能不存储 cookie 或保存密码。

在我的大学里，我们也使用这样一个需要用户登录的网络。登录不是通过浏览器而是通过 VPN 进行的，这使得 Captive Network Assistant 完全无用且烦人。

因此，我在此处发布了有关如何用实际有用的东西替换此“功能”的指南，我不希望它迷路并对其他人有用

**#1。**创建一个名为“Captive Network Assistant”的 bash 脚本，将以下代码粘贴到其中并在*/System/Library/CoreServices/Captive Network Assistant.app/Contents/MacOS/处用相同的文件替换您的文件*

```
#!/bin/bash
scriptlocation="/System/Library/CoreServices/Captive Network Assistant.app/Contents/MacOS/vpn.scpt"
osascript "$scriptlocation" 
```

**#2。**创建一个名为“vpn.scpt”的applescript，将其放在bash-script中提到的路径下，并将以下代码放入其中：

```
set wlanssid to do shell script "networksetup -getairportnetwork en1 | cut -c 24-"
connectVPN(wlanssid)

on connectVPN(SSID)
    tell application "System Events"
        tell current location of network preferences
            local VPNService
            if (SSID = "XYZXYZ") then --WLANNAME
                set VPNService to service "XYZXYZ-VPN" --VPNNAME
                set isConnected to connected of current configuration of VPNService
                if not isConnected then
                    connect VPNService
                end if
            end if
        end tell
    end tell
end connectVPN 
```

每次您的计算机连接到“强制网络”时都会执行此脚本，如果 WLAN 的 SSID 称为“XYZXYZ”，它将启动名称为 XYZXYZ-VPN 的 VPN-Connection

可以修改脚本以支持多个强制网络。

也可以将 Growl-Notifications 添加到脚本中。我的完整脚本如下所示： http: [//pastebin.com/Rtp9EqQR](http://pastebin.com/Rtp9EqQR)

# java - tomcat vs自己的服务器

> ID：14606135
> 
> 赞同：-1
> 
> 时间：2013-01-30T14:16:13.023
> 
> 标签：java, tomcat

考虑到整体性能是最重要的问题，我想知道用 Java 编写一个简单的 Web 服务器是否足以处理生产。（我说的是提供 java 生成的内容）

期望一个像样的书面套接字应用程序可以提供与 Tomcat 相同的可靠性是否合理？

（我可能想到的一个困难是克服浏览器的错误）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:56:14.453

你应该在这里重视***生产***这个词。编写本地 Web 服务器很容易出错，就像重新发明轮子一样。

处理并发性、安全性、符合规范、重负载下的最佳性能、连接器等将带来重大问题，尤其是当您希望服务器可以***投入生产时***

提供足够可靠的 Web 服务器所涉及的测试将是巨大的。

此外，已经有可靠的网络服务器可用，例如 tomcat v7、jetty，它们的配置足以优化性能，也有足够的钩子来定制。所以IMO，这是一个NO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:18:48.570

谈到速度和可靠性，我选择的 Web 服务器是[Jetty](http://jetty.codehaus.org)

Tomcat 是一个很棒的 Web 服务器，但占用空间更大。但这取决于您需要多少容器功能

如果您的选择是“Tomcat 或我的”，您将不得不考虑线程安全/并发问题在高负载下处理起来并不简单，并且需要小心设计。

你可以看看[Simple Framework](http://www.simpleframework.org/)，它声称是一个快速的 HTTP 服务器，但我从未亲自使用过。

# django - django model.charfield - unicode 或非 unicode

> ID：14606140
> 
> 赞同：5
> 
> 时间：2013-01-30T14:16:20.910
> 
> 标签：django, encoding, django-models

我将我的项目转移到另一台计算机并在运行视图时出错。

我正在获取模型的一些信息，并希望使用 XMLGenerator 将它们保存到 XML。

在一台计算机上它工作正常，`type()`返回`model.charField()`“unicode”

在新计算机上它不起作用，`type()`返回`model.charField()`“str”

工作计算机有 Python 2.7.2

不工作的计算机有 Python 2.5.2

所以在不工作的计算机上，我没有得到可以由 XMLGenerator 处理的 unicode。我试图通过在模型提供的字符串上运行 .decode("utf-8") 来解决这个问题，并且它有效。

但是我怎么知道字符串的编码是什么？我现在猜想它与数据库中的编码相同，但我是对的吗？

问候马丁

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:56:57.793

你能检查一下mysql排序规则设置吗？如果那些也一样？来自 django doc：“在许多情况下，此默认值不会有问题。但是，如果您真的想要对特定列或表进行区分大小写的比较，您可以更改列或表以使用 utf8_bin 排序规则。主要的事情在这种情况下要注意的是，如果您使用的是 MySQLdb 1.2.2，那么 Django 中的数据库后端将为它从数据库接收的任何字符字段返回字节字符串（而不是 unicode 字符串）。” [查看 django doc 排序规则设置](https://docs.djangoproject.com/en/dev/ref/databases/#collation-settings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:59:01.063

假设我们有这个：

```
a = unicode('a')
b = str('b') 
```

快速检查是：

```
print type(a)
print type(b) 
```

如果你想验证它们，你可以这样做：

```
if isinstance(a, str):

if isinstance(a, unicode): 
```

一种对内容进行类型转换的方法：

```
c = str(a)
d = unicode(b) 
```

# c - 简单 C 函数的奇怪行为

> ID：14606141
> 
> 赞同：-1
> 
> 时间：2013-01-30T14:16:21.507
> 
> 标签：c, arrays, pointers

我有 2 个简单的函数，NxM 数组中的一个函数输入不包括 N+2 和 M+2。所以原始数组必须被零包围，而另一个输出整个数组。当调用 out 函数时，我有一个非常奇怪的输出：

![在此处输入图像描述](../Images/5e09cbfefcc1bdf12cdce8a671e0c68c.png)

但是当我将代码移动到主函数时，一切都很好。我尝试在 CodeBlocks 和 NetBeans 中编译此代码。行为是相同的。我不知道那里发生了什么。有人可以解释一下吗？

```
.....
int main()
{
int array[N+2][M+2]={{0}};

local_in(N,M,array);
local_out(N,M,array);

return 0;
}

void local_in(int len, int len2,int arr[][len2])
{
   int i;
   int j;

   for(i = 1; i <= len; i++)
     for(j = 1; j <= len2; j++){
          scanf("%d",&arr[i][j]);

    } 

}
void local_out(int len, int len2,int arr[][len2])
{
   int i;
   int j;

  for(i = 0; i < len+2; i++){
    for(j = 0; j < len2+2; j++)
            printf("%d ",arr[i][j]);
    printf("\n");
  } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:22:13.990

您的`local_*`函数将数组传递为`int arr[][len2]`; 但应该`int arr[][len2+2]`改用。

一般来说，如果您传递了正确的数组维度，然后实施任何关于在`local_*`函数内读取或写入哪些项目的策略，那么代码应该会更清晰。

# javascript - if 语句中的函数也在 if 语句之外运行

> ID：14606142
> 
> 赞同：2
> 
> 时间：2013-01-30T14:16:21.870
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [jQuery 函数在不应该运行时运行](https://stackoverflow.com/questions/14588349/jquery-function-running-when-it-shouldnt)

一直试图让它工作几个小时，但找不到解决方案，所以一些建议将不胜感激！我在一个`if ($window.width() < 1000)`语句中有一个函数，该函数也在该语句之外运行。所以当窗口宽度> 1000 px 时，该函数也会触发。我的问题很简单。为什么？

我正在使用可以正常工作的背景颜色“记录”if/else 语句，调整大小时颜色来回变化。当页面小于 1000 像素时，右侧列表应在视觉上表示为具有选项卡功能的下拉列表（与升降机上的下拉列表相同的功能），当页面大于 1000 时，右侧应在视觉上表示为选项卡。

[代码](http://jsfiddle.net/5f3AF/1/)

[全屏演示](http://jsfiddle.net/5f3AF/1/show/)（更容易滚动）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:35:24.973

第一次在大于 1000 像素的窗口中打开页面时，它会设置 click 事件处理程序。当您将其调整为小于 1000px 的宽度时，仍然会设置单击事件，因此单击时它仍然会做出反应。

您可以执行以下操作：

当宽度大于 1000px 时

```
$('.schedule li').bind('click', function(){... 
```

否则（宽度小于 1000 像素）取消绑定点击。

```
$('.schedule li').unbind('click'); 
```

我希望这会有所帮助。

# xml - 一次在 XSLT 中输出多个表

> ID：14606144
> 
> 赞同：1
> 
> 时间：2013-01-30T14:16:30.373
> 
> 标签：xml, xslt, foreach, xslt-grouping, xmltable

我有一个 XML 文档：

```
<Gym>

<Trainee>
    <Trainee_ID>1521</Trainee_ID>
    <Trainee_Name>Mary Andersen</Trainee_Name>
    <Trainee_Age>23</Trainee_Age>
</Trainee>

<Trainee>
    <Trainee_ID>1522</Trainee_ID>
    <Trainee_Name>Jane Sellers</Trainee_Name>
    <Trainee_Age>56</Trainee_Age>
</Trainee>

<Trainee>
    <Trainee_ID>1523</Trainee_ID>
    <Trainee_Name>Julie Aniston</Trainee_Name>
    <Trainee_Age>32</Trainee_Age>
</Trainee>

<Class>
    <Trainee_ID>1521</Trainee_ID>
    <Course_ID>A21</Course_ID>
    <Class_Room>A1</Class_Room>
</Class>

<Class>
    <Trainee_ID>1522</Trainee_ID>
    <Course_ID>A22</Course_ID>
    <Class_Room>B2</Class_Room>
</Class>

<Class>
    <Trainee_ID>1523</Trainee_ID>
    <Course_ID>B24</Course_ID>
    <Class_Room>B3</Class_Room>
</Class>

<Course>
    <Course_ID>A21</Course_ID>
    <Course_Title>Yoga</Course_Title>
    <Course_Hours_Per_Week>2</Course_Hours_Per_Week>
</Course>

<Course>
    <Course_ID>A22</Course_ID>
    <Course_Title>Pilates</Course_Title>
    <Course_Hours_Per_Week>2</Course_Hours_Per_Week>
</Course>

<Course>
    <Course_ID>B24</Course_ID>
    <Course_Title>Aerobic</Course_Title>
    <Course_Hours_Per_Week>3</Course_Hours_Per_Week>
</Course>

</Gym> 
```

我想要做的是用 XSL 制作 3 个表，标题是子元素的名称（仅一次），子标题是孙元素的名称（仅一次），其余的行和列将填充值的孙子元素。

据我所知：

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/Gym">
    <html>
    <body>
        <xsl:for-each select="*">
            <table border="1">
            <tr>
            <xsl:if test="position()='1' or position()='4' or position()='7'">
            <xsl:value-of select="translate(name(.), 'abcdefghijklnmopqrstuvwxyz', 'ABCDEFGHIJKLNMOPQRSTUVWXYZ')"/>     
            </xsl:if>
            </tr>
            <tr>
            <xsl:if test="position()='1' or position()='4' or position()='7'">
                <xsl:for-each select="*">
                <th><xsl:value-of select="name(.)"/></th>
                </xsl:for-each>
            </xsl:if>
            </tr>
            <tr>        
            <xsl:for-each select="*">   
                <th>            
                <xsl:value-of select="."/>
                </th>
            </xsl:for-each>
            </tr>
            </table>
            <p></p>
        </xsl:for-each>
    </body>
    </html>
</xsl:template>
</xsl:stylesheet> 
```

这是输出：

[![输出](../Images/ab15c287b01e8e21a10bc85596993a70.png)](https://i.stack.imgur.com/mpYU7.png)
[（来源：[UploadScreenshot.com](http://img1.UploadScreenshot.com/images/main/1/2917105455.png)）]

发生的事情是，每次为每个子元素创建一个新表时，但我想要的是一个智能代码，它将自动生成所有 3 个表，然后生成标题和子标题，然后输入数据. 我想要的是这样的（忽略颜色和文本格式）：

![输出](../Images/63a0e1ea58d6b1fd0ac403d6abf3b0ca.png)

我希望我的 XSLT 代码为每个元素实例创建一个表，然后将元素的名称作为标题，然后将子元素作为标题一次，然后用数据填充表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:41:35.003

这里使用的方法是使用 Muenchian 分组和键来查找不同的组及其成员。我相信这应该有效：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:key name="kCategory" match="/*/*" use="local-name()"/>

  <xsl:template match="/*">
    <div>
      <xsl:apply-templates 
        select="*[generate-id() = generate-id(key('kCategory', local-name())[1])]" />
    </div>
    </xsl:template>

  <xsl:template match="/*/*">
    <table>
      <tr class="table-header odd-row">
        <th colspan="3">
          <xsl:value-of select="local-name()"/>
        </th>
      </tr>
      <tr class="column-headers">
        <xsl:apply-templates select="*" mode="colHeader" />
      </tr>
      <xsl:apply-templates select="key('kCategory', local-name())" mode="row"/>
    </table>
  </xsl:template>

  <xsl:template match="/*/*/*" mode="colHeader">
    <td>
      <xsl:value-of select="local-name()"/>
    </td>
  </xsl:template>

  <xsl:template match="/*/*" mode="row">
    <tr>
      <xsl:if test="position() mod 2 = 1">
        <xsl:attribute name="class">odd-row</xsl:attribute>
      </xsl:if>
      <xsl:apply-templates select="*" mode="value" />
    </tr>
  </xsl:template>

  <xsl:template match="/*/*/*" mode="value">
    <td>
      <xsl:value-of select="." />
    </td>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<div>
  <table>
    <tr class="table-header odd-row">
      <th colspan="3">Trainee</th>
    </tr>
    <tr class="column-headers">
      <td>Trainee_ID</td>
      <td>Trainee_Name</td>
      <td>Trainee_Age</td>
    </tr>
    <tr class="odd-row">
      <td>1521</td>
      <td>Mary Andersen</td>
      <td>23</td>
    </tr>
    <tr>
      <td>1522</td>
      <td>Jane Sellers</td>
      <td>56</td>
    </tr>
    <tr class="odd-row">
      <td>1523</td>
      <td>Julie Aniston</td>
      <td>32</td>
    </tr>
  </table>
  <table>
    <tr class="table-header odd-row">
      <th colspan="3">Class</th>
    </tr>
    <tr class="column-headers">
      <td>Trainee_ID</td>
      <td>Course_ID</td>
      <td>Class_Room</td>
    </tr>
    <tr class="odd-row">
      <td>1521</td>
      <td>A21</td>
      <td>A1</td>
    </tr>
    <tr>
      <td>1522</td>
      <td>A22</td>
      <td>B2</td>
    </tr>
    <tr class="odd-row">
      <td>1523</td>
      <td>B24</td>
      <td>B3</td>
    </tr>
  </table>
  <table>
    <tr class="table-header odd-row">
      <th colspan="3">Course</th>
    </tr>
    <tr class="column-headers">
      <td>Course_ID</td>
      <td>Course_Title</td>
      <td>Course_Hours_Per_Week</td>
    </tr>
    <tr class="odd-row">
      <td>A21</td>
      <td>Yoga</td>
      <td>2</td>
    </tr>
    <tr>
      <td>A22</td>
      <td>Pilates</td>
      <td>2</td>
    </tr>
    <tr class="odd-row">
      <td>B24</td>
      <td>Aerobic</td>
      <td>3</td>
    </tr>
  </table>
</div> 
```

我想你可以处理颜色和样式？我`class`在我认为合适的地方添加了两个属性。

你应该能够使用如下的 CSS 来获得你需要的样式（它肯定需要一些调整才能让它恰到好处，但这是一般的想法：

```
th, td
{
    border: 2px solid #9BBA58;
    background-color: #E6EDD4;
}

tr.table-header th, tr.column-headers td
{
    font-weight: bold;
}

tr.table-header th
{
    border-bottom: 4px solid #9BBA58;
}

tr.odd-row th, tr.odd-row td
{
    background-color: white;
} 
```

# php - php 语法错误，意外的 T_VARIABLE，需要 ',' 或 ';' 在第 29 行

> ID：14606145
> 
> 赞同：1
> 
> 时间：2013-01-30T14:16:30.067
> 
> 标签：php, mysql

我试图在一个简单的博客中回显我的数据库中的信息。现在它只是行不通。无论我尝试什么。我试图自己弄清楚，但我陷入了一个错误。

php 语法错误，意外的 T_VARIABLE，需要 ',' 或 ';' 在第 29 行

我只是找不到解决方案..希望你们能帮助我。我被困在这里几个小时变得非常疯狂。

```
require('config.inc.php');
require('template.inc.php');
require('functions.inc.php');

$db_host = "***********";
$db_username = "************0";
$db_pass = "*********";
$db_name = "****************";

@mysql_connect("$db_host","$db_username","$db_pass") or die ("could not connect to        mysql");
@mysql_select_db("$db_name") or die ("no database");

$title=$_POST['title'];
$contents=$_POST['contents'];
$author=$_POST['author'];
$date=$_POST['date'];
$date = strftime("%b %d, %y", strtotime($date));

$sqlcreate = mysql_query("INSERT INTO blog (date, title, contents, author)
            VALUES(now(),'$title','$contents','$author')");
$query="SELECT * FROM tablename";
$result=mysql_query($query);
htmlOpenen('Voeg nieuwe post toe');
while ($result=mysql_query($query) ) {
echo'
<span class="post">
    <h1>'$result['title'];'</h1>
    <h2>'$result['date'];'</h2>
    <p>'$result['contents'];'</p>
    <h3>'$result['author'];'</h3>
';
}
htmlSluiten();
mysql_close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:17:53.983

你忘记了你的连接器：

```
echo'
<span class="post">
    <h1>'$result['title'];'</h1>
    <h2>'$result['date'];'</h2>
    <p>'$result['contents'];'</p>
    <h3>'$result['author'];'</h3>
'; 
```

应该

```
echo'
<span class="post">
    <h1>'.$result['title'].'</h1>
    <h2>'.$result['date'].'</h2>
    <p>'.$result['contents'].'</p>
    <h3>'.$result['author'].'</h3>
'; 
```

# c# - C#中android手机之间的wifi语音

> ID：14606152
> 
> 赞同：0
> 
> 时间：2013-01-30T14:16:49.933
> 
> 标签：c#, android, wifi, monodevelop, voice

我想为我的家庭网络（WiFi）上的两个安卓设备之间的语音通话开发一个应用程序。我是编程新手，所以真的不知道从哪里开始，我已经研究过，但找不到任何适合我需要做的事情。

该应用程序必须用 C# 编写，因为我对该语言有基本的了解，并且这是我想扩展我的知识的语言。我正在使用 MonoDevelop，它允许通过 C# 创建 android 应用程序。

该调用将是点对点的，因此非常基本，在这些早期开发阶段不需要安全或加密。

所有帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:26:09.683

我将从代码项目中的此链接开始：http: [//www.codeproject.com/Articles/138484/Simple-SIP-VOIP-based-phone-in-C](http://www.codeproject.com/Articles/138484/Simple-SIP-VOIP-based-phone-in-C)

您必须将其调整为 android，但这可能是了解如何通过 IP 进行语音的一个很好的起点。

android上可能不同的大事情是：

1.  用户界面
2.  获取麦克风输入的方法
3.  播放音频输出的方法
4.  访问 IP 堆栈

但基本的（编码、解码等）应该在那里。

# android - 在左屏幕的顶部设置 TextView 和在底部的 ImageView

> ID：14606153
> 
> 赞同：0
> 
> 时间：2013-01-30T14:16:51.570
> 
> 标签：android

```
<LinearLayout
                    android:layout_width="fill_parent"
                    android:layout_height="0.0dip"
                    android:layout_marginBottom="1.0dip"
                    android:layout_marginRight="1.0dip"
                    android:layout_weight="1.0"
                    android:background="@drawable/main_buttons_light"
                    android:onClick="btnProfileSettingsClick" >

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="top|left"
                        android:gravity="left"
                        android:paddingLeft="8.0dip"
                        android:paddingTop="8.0dip"
                        android:text="@string/activity_main_button_profile_settings"
                        android:textSize="12.0sp"
                        android:color="@color/maintitletext" />

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="bottom|left"
                        android:gravity="left"
                        android:paddingBottom="10.0dip"
                        android:paddingLeft="8.0dip"
                        android:src="@drawable/profile_settings" />
                </LinearLayout> 
```

`TextViewis`位于顶部且`ImageView`位于底部，但图像位于右侧而不是左侧。如何在屏幕左侧依次设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:19:41.070

您可以使用 RelativeLayout 而不是 LinearLayout 作为 textView 和 imageView 的父视图并设置它们

layout_alignParentLeft
layout_alignParentRight
layout_alignParentTop
layout_alignParentBottom

特性。

此外，如果您使用 RelativeLayout 作为父视图，您可以使用

layout_toLeftOf
layout_toRightOf
layout_above
layout_below

属性依次添加子视图。

编辑：

```
<RelativeLayout 
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/containerLayout"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">

<TextView 
android:layout_alignParentTop="true" 
android:layout_alignParentLeft="true" 
android:id="@+id/myText"  
android:text="Click Me" />

<ImageView 
android:layout_alignParentBottom="true" 
android:layout_alignParentLeft="true" 
android:id="@+id/myImage" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:47:16.813

尝试这个 ：

```
<RelativeLayout  
android:layout_width="match_parent"
android:layout_height="match_parent">

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" 
    android:layout_alignParentBottom="true"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:30:25.553

如果你想保持**线性布局**，只需要改变方向。将此添加到**LinearLayout** xml：

```
android:orientation="vertical" 
```

让它在左边对齐，如果它是根布局，只需添加

```
android:gravity="left" 
```

这将使所有孩子左对齐。

否则，如果 LinearLayout 是另一个布局的子级，则添加：

```
android:layout_alignParentLeft="true" 
```

# ruby-on-rails - rspec 测试的 JSON 数据

> ID：14606157
> 
> 赞同：15
> 
> 时间：2013-01-30T14:16:58.173
> 
> 标签：ruby-on-rails, ruby, json, rspec, factory

我正在创建一个接受 JSON 数据的 API，并且我想为其提供测试数据。

有没有类似于 JSON 数据工厂的东西？我想在对象和 JSON 中提供相同的数据，以便我可以检查导入是否按预期工作。

JSON 具有严格定义的结构，所以我不能调用`FactoryGirl(:record).to_json`.

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-30T14:51:10.290

在这种情况下，我将为要导入的 JSON 创建夹具文件。像这样的东西可以工作：

```
json = JSON.parse(File.read("fixtures/valid_customer.json"))
customer = ImportsData.import(json)
customer.name.should eq(json["customer"]["name"]) 
```

我还没有看到可以使用 FactoryGirl 设置属性，然后将其转换为 JSON 并导入的东西。您可能需要创建一个映射器，该映射器将获取您的 Customer 对象并将其呈现为 JSON，然后将其导入。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-02-16T21:49:41.237

按照 Jesse 的建议，现在您可以在 Rails 5 中使用`file_fixture`（[文档](https://www.relishapp.com/rspec/rspec-rails/v/3-5/docs/file-fixture)）

我只是使用一个小帮手来阅读我的 json 固定装置：

```
def json_data(filename:)
  file_content = file_fixture("#{filename}.json").read
  JSON.parse(file_content, symbolize_names: true)
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-07T22:31:04.027

实际上，您可以使用 factorygirl 执行以下操作。

```
factory :json_data, class: OpenStruct do 
   //fields
end

FactoryGirl.create(:json_data).marshal_dump.to_json 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-29T10:52:16.117

前段时间我们实现[了 FactoryJSON](https://rubygems.org/gems/factory_json) gem 来解决这个问题。到目前为止，它对我们来说效果很好。自述文件涵盖了可能的用例。

# c# - 从包含的 System.Web.UI.Page 访问父 Telerik.Web.UI.RadWindow

> ID：14606158
> 
> 赞同：1
> 
> 时间：2013-01-30T14:16:58.917
> 
> 标签：c#, asp.net, telerik, radwindow

问题在标题中：

我有一个`System.Web.UI.Page`包含在 a 中`Telerik.Web.UI.RadWindow`，但我找不到`RadWindow`从`Page`代码隐藏中访问的方法。

我试图探索这些`Page`属性，我猜想在某些时候对控件进行强制转换，但我没有找到任何东西。

**编辑**：在运行时，我不知道 RadWindow 的来源（它是从应用程序中的任何地方动态生成的），所以我无法访问它来修改 RadWindow 定义。这就是为什么我需要在运行时访问它，以编程方式更改它。

你能帮助我吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:25:02.103

您需要为`xname`您的 RadWindow 分配一个。

```
<telerik:RadWindow x:Name="myWindow">
...
</telerik:RadWindow> 
```

然后，您可以`myWindow`在其中的任何 xaml 的代码隐藏中访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:35:38.313

您无法在内容页面的代码隐藏中访问 RadWindow。这相当于在代码隐藏中从 SomeOtherPage.aspx 访问 Default.aspx。根本没有办法做到这一点。

但是，您可以使用 JavaScript。如果页面都是您的（即相同的应用程序，相同的域），您可以获得对 RadWindow 的引用并使用其客户端 API。看这里：

[http://www.telerik.com/help/aspnet-ajax/window-programming-radwindow-methods.html](http://www.telerik.com/help/aspnet-ajax/window-programming-radwindow-methods.html)

和

[http://www.telerik.com/help/aspnet-ajax/window-programming-calling-functions.html](http://www.telerik.com/help/aspnet-ajax/window-programming-calling-functions.html) - GetRadWindow() 将返回参考

和这里

[http://www.telerik.com/help/aspnet-ajax/window-application-is-page-in-radwindow.html](http://www.telerik.com/help/aspnet-ajax/window-application-is-page-in-radwindow.html)

# c# - 如何从 C# 代码将 Visual Studio 连接到 Team Foundation Server Team Project

> ID：14606159
> 
> 赞同：0
> 
> 时间：2013-01-30T14:17:01.157
> 
> 标签：c#, tfs

是否可以从代码将 Visual Studio 连接到 TFS 团队项目？我找到了如何连接到 TFS 的文章：http: [//msdn.microsoft.com/en-us/library/vstudio/bb286958.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb286958.aspx)但是这允许我从代码对 TFS 执行基本操作，但不连接 Visual Studio。 ![样本](../Images/cc24155c922b192ba409f4a2bf15be64.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:39:12.530

据我了解你的问题，你不能......你有3个选择：

1-为 VS Team Explore 做一个扩展，这个扩展将取决于你已经使用 VS 连接。

[在 Visual Studio 2012 中扩展团队资源管理器](http://blogs.msdn.com/b/buckh/archive/2012/12/21/extending-team-explorer-in-visual-studio-2012.aspx)

2- 制作一个单独的 exe，以便您使用**TeamProjectPicker**，以便您可以选择要连接的 TFS 和团队项目。

```
 using System.Windows.Forms;
    using Microsoft.TeamFoundation.Client;
    using Microsoft.TeamFoundation.Server;
    namespace ConsoleApplication1
    {
        class Program
        {
            static void Main(string[] args)
            {
                Application.EnableVisualStyles(); // Makes it look nicer from a console app.
                //"using" pattern is recommended as the picker needs to be disposed of
                using (TeamProjectPicker tpp = new TeamProjectPicker(TeamProjectPickerMode.MultiProject, false))
                {
                    DialogResult result = tpp.ShowDialog();
                    if (result == DialogResult.OK)
                    {
                        System.Console.WriteLine("Selected Team Project Collection Uri: " + tpp.SelectedTeamProjectCollection.Uri);
                        System.Console.WriteLine("Selected Projects:");
                        foreach (ProjectInfo projectInfo in tpp.SelectedProjects)
                        {
                            System.Console.WriteLine(projectInfo.Name);
                        }
                    }
                }
            }
        }
    } 
```

3- 使用 API for TFS 和硬编码路径或将其放入配置文件中，如下所示：

```
using System;
using System.Collections.ObjectModel;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.Framework.Common;
using Microsoft.TeamFoundation.Framework.Client;

namespace TfsApplication
{
    class Program
    {
        static void Main(String[] args)
        {
            // Connect to Team Foundation Server
            //     Server is the name of the server that is running the application tier for Team Foundation.
            //     Port is the port that Team Foundation uses. The default port is 8080.
            //     VDir is the virtual path to the Team Foundation application. The default path is tfs.
            Uri tfsUri = (args.Length < 1) ?
                new Uri("http://Server:Port/VDir") : new Uri(args[0]);

            TfsConfigurationServer configurationServer =
                TfsConfigurationServerFactory.GetConfigurationServer(tfsUri);

            // Get the catalog of team project collections
            ReadOnlyCollection<CatalogNode> collectionNodes = configurationServer.CatalogNode.QueryChildren(
                new[] { CatalogResourceTypes.ProjectCollection },
                false, CatalogQueryOptions.None);

            // List the team project collections
            foreach (CatalogNode collectionNode in collectionNodes)
            {
                // Use the InstanceId property to get the team project collection
                Guid collectionId = new Guid(collectionNode.Resource.Properties["InstanceId"]);
                TfsTeamProjectCollection teamProjectCollection = configurationServer.GetTeamProjectCollection(collectionId);

                // Print the name of the team project collection
                Console.WriteLine("Collection: " + teamProjectCollection.Name);

                // Get a catalog of team projects for the collection
                ReadOnlyCollection<CatalogNode> projectNodes = collectionNode.QueryChildren(
                    new[] { CatalogResourceTypes.TeamProject },
                    false, CatalogQueryOptions.None);

                // List the team projects in the collection
                foreach (CatalogNode projectNode in projectNodes)
                {
                    Console.WriteLine(" Team Project: " + projectNode.Resource.DisplayName);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T18:21:31.110

在这里您可以找到将 Visual Studio 连接到 TFS 的分步指南

[http://tfs.visualstudio.com/en-us/learn/code/connect-vs/](http://tfs.visualstudio.com/en-us/learn/code/connect-vs/)

# javascript - jquery-ui.css和jquery-ui.css有什么区别？s2j=3.3.1

> ID：14606172
> 
> 赞同：3
> 
> 时间：2013-01-30T14:17:39.150
> 
> 标签：javascript, jquery, struts2-jquery

> **可能重复：**
> [通过参数进行缓存破坏](https://stackoverflow.com/questions/9692665/cache-busting-via-params)

我正在使用`struts2jquery`插件，我想更改一个`jquery-ui.css`名为 .jar 的 jar 文件中的属性`struts2jquery-plugin-3.3.1.jar`。

问题是在我更改该属性后，我可以看到文件中的值已更改，但浏览器仍使用原始值。当我调试问题时，我发现浏览器正在使用一个文件`jquery-ui.css?s2j=3.3.1`，一旦我删除`?s2j=3.3.1`浏览器就会读取我更改的文件并获得新值！

因此，任何人都可以帮助我了解两者之间的区别`jquery-ui.css`以及`jquery-ui.css?s2j=3.3.1`如何更改`jquery-ui.css?s2j=3.3.1`bcz 中的值我不知道该文件在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:24:43.160

这是浏览器缓存。当您将查询字符串附加`?s2j=3.3.1`到 URL 时，浏览器将其视为新资产，仍未缓存，并从服务器获取新副本。

经常看到这种技术被用来避免对 ajax 请求进行缓存。例如，jQuery 每次调用它的`$.ajax`函数时都会在 URL 上附加一个时间戳，并且`cache`选项设置为`false`.

# intellij-idea - 我可以在 Intellij IDEA 中修改 VCS 操作快速列表吗

> ID：14606179
> 
> 赞同：1
> 
> 时间：2013-01-30T14:17:59.943
> 
> 标签：intellij-idea

我想`VCS Operations`在 Intellij IDEA 中添加/删除一些项目，可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:43:19.743

不，但您可以[创建自己的快速列表](http://www.jetbrains.com/idea/webhelp/configuring-quick-lists.html)并为其分配相同的快捷方式，而不是 VCS 操作。

# java - 数据库和类设计

> ID：14606182
> 
> 赞同：0
> 
> 时间：2013-01-30T14:18:08.250
> 
> 标签：java, mysql, database, hibernate

问题 - 我正在为学校创建一个小组论坛应用程序，需要为以下要求创建设计匹配。

*   组和组成员之间的多对多关系。
*   小组成员可以是学生或员工。（将来也可能是其他一些用户角色）。
*   我的数据库中已经存在 Student 和 Staff 表。

环境 - Java、Spring、Hibernate、MySQL

方法 -

1.a) 数据库设计

组：| 编号 | 姓名 | is_active |

组成员：| 编号 | group_id | 用户角色 | 学生ID | 员工编号 | is_banned | is_default_user |

1.b) 类设计（DTO 类）

Group : GroupMember groupMembers[*] 等

GroupMember : UserRole userRole、Student student、Staff staff 等。

2.a) 数据库设计

组：| 编号 | 姓名 | is_active |

组成员：| 编号 | group_id | is_banned | is_default_user |

学生会员：| 编号 | group_member_id | 学生ID |

员工：| 编号 | group_member_id | 员工编号 |

2.b) 类设计

Group : GroupMember groupMembers[*] 等

GroupMember : UserRole userRole、Member member等

接口成员：getMember():Object

StudentMember 扩展 Student 实现 Member：getMember():Student

StaffMember 扩展了员工实现成员：getMember():Staff

我更喜欢第二种方法。似乎它更具可扩展性。在第一种方法中，始终有 1 列为空。这是浪费。

对于此类问题，上述环境（支持休眠：我是新蜜蜂）有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:38:41.327

是的，还有其他方法。基本上，您有一个 Member 实体，该实体有两个子类：StudentMember 和 StaffMember。StaffMember 与 Staff 关联，StudentMamber 与 Student 关联。

这种继承可以用三种不同的方式映射。

1.  一切都在一个表中。这将导致您的第一个数据库设计：user_role 列是鉴别器列，student_id 或 staff_id 为空。

2.  每个具体类都有自己的表。这将导致两个相同的表，除了一个将有一个 student_id 列，一个将有一个 staff_id 列。

3.  每个班级都有自己的桌子。这将导致 3 个表：一个（成员）包含所有公共列（id、banner、group_id 等），一个仅包含 StudentMember 特定列（ID、引用成员表和学生ID），以及包含 StaffMember 特定列（ID、引用成员表和员工 ID）的列。

所有方法都有优点和缺点：

*   第一个导致可以为空的连接列，但非常有效（例如，不需要连接来加载组的所有成员）。另一个表也不可能对 StudentMember 有 FK，而只能对 Member。
*   第二个导致列重复，并且需要加入来加载成员（但没有加入来加载StudentMember或StaffMember），但它没有可为空的外键，并且可以对StaffMember或StudentMember有一个FK，但不是任何会员。
*   第三个效率低下，因为它需要为每个查询连接。但它没有列重复，你可以有任何你想要的外键。

鉴于您只有一个列在子实体之间有所不同，我会选择第一个解决方案，它更易于理解、查询和优化，并导致更简单的查询。

所有这些继承策略都在[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#inheritance-strategies)中进行了描述。

# android - android通过交换服务器发送邮件

> ID：14606183
> 
> 赞同：0
> 
> 时间：2013-01-30T14:18:09.477
> 
> 标签：android, exchange-server, sendmail

我想从我的交换服务器发送邮件。我已经尝试了很多东西。

我看到以后的交换版本不支持 webdav。Activesync 需要许可证才能使用它。

我正在尝试 smtp，但大多数公司帐户都禁用了 smtp。

我真的被困在这一点上。任何关于如何继续的指导都会非常有用。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:19:28.637

如果您的 Exchange 是 Exchange 2010 并且您具有 OWA 访问权限，您可以通过单击OWA 右上角的**圆形问号图标(?)（“****选项**”旁边）查看您的 Exchange 提供哪些邮件 FQDN 和端口，然后单击**关于**。

在弹出的窗口中，您将获得诸如（来自 Office 365）之类的信息

> ```
>  External POP setting:
>  Server name: pod51018.outlook.com
>  Port: 995
>  Encryption method: SSL External IMAP setting:
>  Server name: pod51018.outlook.com
>  Port: 993
>  Encryption method: SSL External SMTP setting:
>  Server name: pod51018.outlook.com
>  Port: 587
>  Encryption method: TLS 
> ```

如果您正在编写一个发送 SMTP 的应用程序，那么您的邮件服务器是否是 Exchange 可能并不重要，因为您不会使用任何特定于 Exchange 的协议。您必须使用 ActiveSync 来利用 Exchange 功能，否则您将只是使用 POP3/IMAP4 作为检索方法，使用 SMTP 作为发送方法，所有这些都是标准协议。

您的 Exchange 服务器（以及正确配置的邮件服务器）可能会阻止 SMTP 开放中继，因此您很可能需要用户对 SMTP 服务器进行身份验证。除了身份验证之外，您还需要使用允许提交和/或中继的正确 SMTP 端口。

端口将是：

*   **25** - 如果您只想将消息提交给同一邮件系统内的收件人（不中继），这应该始终可用。
*   **465** - 传统的安全 SMTP（我不相信这个被广泛使用）。
*   **587** - 经过身份验证的 SMTP（在 Exchange 2010 中，这称为客户端接收连接器或类似名称）
*   ？？？- 管理员指定的自定义端口？

出于测试目的，如果您的测试消息的收件人在 SMTP 服务器接收的邮件系统中，您可能可以通过端口 25 发送标准 SMTP 消息，而无需进行身份验证。这基本上就是来自 Internet 的常规电子邮件的作用。但是，反垃圾邮件系统可能会检测到欺骗尝试，因此请注意这种可能性，如果您没有收到测试消息，请检查所有隔离区。

如果您尝试匿名发送到 SMTP 服务器接收的邮件系统外部的收件人（即中继），这几乎肯定不会起作用。

总而言之：

1.  找到用于中继的开放 SMTP 端口（例如 587）
2.  检查它支持/需要的身份验证方法并提供身份验证
3.  提交消息。

或者，如果发送给该邮件系统内的收件人：

1.  正确格式化 SMTP 消息（发件人、收件人）
2.  向 TCP 25 提交未经身份验证的 SMTP 消息
3.  检查邮箱（注意隔离，以防万一）。

另一种可能性（我没有经验）是使用 Exchange Web 服务（如果您有 Exchange 2010/2013）。看：

[http://msdn.microsoft.com/en-us/library/exchange/aa563049(v=exchg.140).aspx](http://msdn.microsoft.com/en-us/library/exchange/aa563049%28v=exchg.140%29.aspx)

# c# - 缓冲 MySQL 远程访问

> ID：14606185
> 
> 赞同：0
> 
> 时间：2013-01-30T14:18:10.937
> 
> 标签：c#, .net, mysql, remote-access

我正在构建一个需要访问远程 MySQL 数据库的 .NET 应用程序。对我来说，这意味着我需要使用“%”限定符启用“远程 MySQL”访问，以便任何 IP 的任何人都可以访问数据库。这是非常不安全的，对吧？

有没有办法通过中央网站缓冲数据库请求/修改，以便我的 .NET 应用程序的所有用户都将连接到网站并且网站将访问数据库？谁能给我指点文学作品来解释它是如何工作的？我很茫然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:21:04.670

我认为公开 Web 服务 (WCF) 并让所有数据请求通过那里会更有意义。您的 Web 服务将是唯一负责访问数据库的服务。

视需求而定；您可以选择接受 RAW SQL 语句，然后对数据库执行这些语句，或者简单地（最好）提供一个接口（Web 服务中的方法）以对表等进行所有必需的数据修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:25:49.700

这取决于...

在这里，webapp 用户应该与数据库在同一台服务器上。所以你有一台服务器。

```
CREATE USER 'webapp'@'localhost' IDENTIFIED BY 'abc123' 
```

在以下示例中，网络服务器位于 10.0.123.45，并且此登录只能从此服务器使用。

```
CREATE USER 'webapp'@'10.0.123.45' IDENTIFIED BY 'abc123' 
```

除此之外，您应该有一个防火墙来阻止来自外部的访问。

# sql - SQL 用于 SQL Server 上的查询成本估算

> ID：14606189
> 
> 赞同：5
> 
> 时间：2013-01-30T14:18:31.097
> 
> 标签：sql, sql-server, estimation

在 SQL Server 中，是否有一些神奇的 SQL 我可以预先设置我的 SQL 查询以获得估计的查询成本而不是执行的查询？

可能像下面这样的东西是我自己最好的猜测。虽然看起来很冗长

```
SET STATISTICS PROFILE ON
GO

SELECT *  FROM [Account]

GO 
SET STATISTICS PROFILE OFF 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:24:00.023

```
SET SHOWPLAN_XML ON;
GO
SELECT * FROM master..spt_values
GO
SET SHOWPLAN_XML OFF; 
```

`STATISTICS PROFILE`为您提供实际计划，这意味着查询将被执行。`SHOWPLAN_XML`or `SHOWPLAN_ALL`(text plan) 将在不执行查询的情况下为您提供估计的计划。您可以单击 xml 结果以查看图形计划。如果这不起作用，请使用 SQL Sentry Plan Explorer（免费）来显示该计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:23:43.757

您可以使用会给您带来成本的执行计划。您可以通过在右键单击上下文菜单中选择它来执行此操作

# ruby - MAC OSX：Ruby on Rails 和 MongoDB 配置

> ID：14606190
> 
> 赞同：0
> 
> 时间：2013-01-30T14:18:34.400
> 
> 标签：ruby, mongodb, mongoid

这可能是在其他地方问过的，但我要么找不到，要么解决方案对我没有帮助。

我成功安装了 Homebrew、RVM、Ruby on Rails 和 mongoDB。

我在安装 mongoid 时遵循了这些说明[http://mongoid.org/en/mongoid/docs/installation.html](http://mongoid.org/en/mongoid/docs/installation.html)但是当我运行时

`rails g mongoid:config`它说它找不到发电机。

所以我跑了`rails g`，它不在列表中。我检查了我的 gem.lock 文件，它也不在那里。我手动把它放在那里，但仍然没有结果。

当我运行`bundle install`该项目时，它也不存在。我尝试将它安装在我的主目录和项目目录中，但无济于事。

任何方向都将不胜感激，因为我是新手。

编辑：我的 gem.lock 文件：

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.11)
      actionpack (= 3.2.11)
      mail (~> 2.4.4)
    actionpack (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    activemodel (3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
    activerecord (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
    activesupport (3.2.11)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.4)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.4.0)
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    hike (1.2.1)
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.2.0)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    json (1.7.6)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.19)
    multi_json (1.5.0)
    polyglot (0.3.3)
    rack (1.4.4)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.11)
      actionmailer (= 3.2.11)
      actionpack (= 3.2.11)
      activerecord (= 3.2.11)
      activeresource (= 3.2.11)
      activesupport (= 3.2.11)
      bundler (~> 1.0)
      railties (= 3.2.11)
    railties (3.2.11)
      actionpack (= 3.2.11)
      activesupport (= 3.2.11)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.3)
    rdoc (3.12)
      json (~> 1.4)
    sass (3.2.5)
    sass-rails (3.2.6)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sprockets (2.2.2)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.7)
    thor (0.17.0)
    tilt (1.3.3)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.35)
    uglifier (1.3.0)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)

PLATFORMS
  ruby

DEPENDENCIES
  coffee-rails (~> 3.2.1)
  jquery-rails
  rails (= 3.2.11)
  sass-rails (~> 3.2.3)
  sqlite3
  uglifier (>= 1.0.3) 
```

编辑：对不起，这是我的 GEmfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:41:57.100

按照说明，添加

```
gem "mongoid", "~> 3.0.0" 
```

到您的 Gemfile 以使用 Mongoid 3，然后

```
bundle install 
```

确保捆绑安装成功，检查 Gemfile.lock 的 mongoid，然后

```
rails g mongoid:config 
```

# python - 旋转 - TransformOriginPoint - PyQt4

> ID：14606192
> 
> 赞同：1
> 
> 时间：2013-01-30T14:18:39.247
> 
> 标签：python, qt, pyqt4, qgraphicsview

我试图使用 PyQt 构建一个小型 UI。

它在 QGraphicsView 中有一个窗口、一个按钮（旋转）和一个多边形（矩形）。该应用程序的一个目的是允许用户旋转多边形。即在单击按钮并且用户单击某个点之后，最近的顶点会自动向用户单击移动或倾斜。我还将多边形设置为在单击之前可移动，而在单击后不可移动。

问题是如果用户移动多边形然后单击 ，多边形会以一种奇怪的方式旋转。有人可以帮我找出错误吗？我的猜测是它可能与 setTransformOriginPoint 相关。

编辑：我有两个继承自 QtGui.QWidget 和 QtGui.QGraphicsScene 的类。

```
class Window(QtGui.QWidget):
    def polychange(self , sender): //Called by the button , 
        if sender:
                self.view.polyrotate = 1 //self.view is an instance of QGraphicsScene class
                self.view.polyf.setFlag(QtGui.QGraphicsItem.ItemIsMovable , False)

        else:
                self.view.polyrotate = 0 
                self.view.degrees = 0
                self.view.polyf.setFlag(QtGui.QGraphicsItem.ItemIsMovable)

class Example(QtGui.QGraphicsView):
    def mousePressEvent(self , e):
        super(Example , self).mousePressEvent(e)
        self.x = e.x()
        self.y = e.y()
        if self.polyrotate == 1:
            self.Rotate()

    def Rotate(self):

        self.pverticesx = []
        self.pverticesy = []
        distances = []
        for i in range(4):
            self.pverticesx.append(self.polyf.mapToScene(self.polyf.polygon()[i]).x())
            self.pverticesy.append(self.polyf.mapToScene(self.polyf.polygon()[i]).y())

        x1 = self.x
        y1 = self.y      

        for i in range(4):
             distance = math.hypot(self.pverticesx[i] - x1 , self.pverticesy[i] - y1)
             distances.append(distance)
        midpointx = (self.pverticesx[0] +  self.pverticesx[2]) / 2
        midpointy = (self.pverticesy[0] +  self.pverticesy[2]) / 2
        index = distances.index(min(distances))          
        pointx = self.pverticesx[index]                
        pointy = self.pverticesy[index]
        vector1 = [x1 - midpointx , y1 - midpointy]
        vector2 = [pointx - midpointx , pointy - midpointy]
        num = 0

        for i in [0 , 1]:
            num = num + (vector1[i] * vector2[i])  
        den = math.sqrt(sum(map(lambda x : x * x , vector1))) *  math.sqrt(sum(map(lambda x : x * x , vector2)))

        degree = math.degrees(math.acos(num / den))
        self.degrees = degree + self.degrees
        if self.degrees > 360:
            rotation = self.degrees / 360
            self.degrees = self.degrees - (rotation * 360)

        self.polyf.setTransformOriginPoint(midpointx , midpointy)
        self.polyf.setRotation(self.degrees) 
```

这是我的代码的更详尽的链接。[旋转应用程序](http://pastebin.com/SqjaHjt5)。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:25:49.163

我已经找到了我自己问题的答案。在旋转之前， midpointx 和 midpointy 在场景坐标中。所以我不得不将它们映射回 QGraphicsItem 坐标系。self.setRotation() 之前的这一行可以解决问题。

```
self.polyf.setTransformOriginPoint(self.polyf.mapFromScene(QtCore.QPointF(midpointx , midpointy))) 
```

现在我的多边形不会随机移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:16:31.520

我对 PyQt 不太熟悉，但是在旋转时，大多数 API 会围绕点 (0,0) 旋转，因此正确的行为是：1 - 将多边形转换为 0,0 2- 旋转多边形 3- 平移多边形背部

希望这会有所帮助，

问候。

# php - 在 Mysql 数据库中存储贷方和借方金额

> ID：14606193
> 
> 赞同：0
> 
> 时间：2013-01-30T14:18:41.743
> 
> 标签：php

我只是想问是否有一种安全的方法可以将客户的信用存储在 Mysql 中。

假设他支付了 100 美元，我们在数据库中给他 100 分。每个点值一美元。一旦他使用了系统——我们从他的账户中减去一个计算出的金额并在他的仪表板中更新它——这种情况每天都会发生很多次。

我只是想在这里与你们核实一下这是正确的方法吗？因为有人可能会破解系统并将他的金额更新到 100,000 并无休止地使用该系统......这就像一个预付费系统，一个人会为他使用的资源等付费......

我想以某种方式以某种方式保护它，以便我们可以在 PHP 中使用该数量进行计算，并在一天内多次将其更新给许多用户......

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:26:44.410

出色地 ...

1.  聘请负责安全的人员，这样任何人都无法入侵您的系统；

2.  确保您的所有查询都是注入证明；

3.  做定期备份；

4.  为自己创建一个通知系统，通知你奇怪的活动（假设一个客户过去每个月存入 100 美元，然后这个数字突然增加了 10 倍）；

5.  定期同步客户的支出，以及银行账户中的可用金额。

6.  记录所有交易（[@MarkBaker](https://stackoverflow.com/users/324584/mark-baker)）；

7.  加密所有敏感数据（[@apprentice](https://stackoverflow.com/users/1509551/apprentice)）；

等等

# node.js - NodeJS 基准测试

> ID：14606199
> 
> 赞同：5
> 
> 时间：2013-01-30T14:18:58.597
> 
> 标签：node.js, apachebench

我做了基准测试，比较什么是更快的 NodeJS 或 Apache + PHP？

当我测试“Hello world”应用程序节点时速度更快，但当我尝试使用 http.get 函数时，情况就完全不同了。

为什么 NodeJS 变得这么慢？它在 http.get 中处理吗？或者是什么？

**测试环境**

```
CPU Intel(R) Core(TM) i5 CPU M 430 @ 2.27GHz
内存 2927MiB
操作系统 Ubuntu 12.04 LTS
测试平台 Apache Bench
NodeJS v0.8.2
阿帕奇阿帕奇/2.2.22
PHP PHP 5.3.10-1ubuntu3.2 与 Suhosin-Patch (cli)

```

* * *

**1.你好世界应用程序：**

节点代码：

```
var http        = require('http');

http.createServer(function(req, res) {

    res.writeHead(200, {"Content-Type": "text/html"});

    res.end('hello world');    

}).listen(8888); 
```

PHP代码：

```
<?php

    echo "hello world"

?> 
```

结果：

## 标题

**ab -n 10000 -c 10 主机名** 。
10.000 个请求，10 个并发（以秒为单位的时间）

```
节点JS 1.337 1.361 1.313 1.312 1.329
阿帕奇+PHP 3.923 3.910 3.917 3.926 3.921

```

**ab -n 10000 -c 100 主机名**

10.000 个请求，100 个并发（以秒为单位的时间）

```

节点JS 1.326 1.369 1.330 1.333 1.459
阿帕奇+PHP 3.933 3.917 3.940 3.908 3.913

```

**ab -n 100000 -c 300 主机名**

100.000 个请求，300 个并发（以秒为单位的时间）

```
节点JS 13.560 13.647 13.784 13.807 14.082
阿帕奇+PHP 44.061 41.516 41.523 41.466 41.465

```

* * *

**2\. 拉取提要应用：**

节点代码：

```
var http = require('http');

var options1 = {
          host: 'www.google.com',
          port: 80,
          path: '/',
          method: 'GET'
        };

http.createServer(function (req, res) {

    http.get(options1, function(response) {

        response.on('data', function (chunk) {

        });

        response.on('end', function (chunk) {
            res.writeHead(200, {'Content-Type': 'text/html'});
            res.end('ok');
        });

    });

}).listen(8888); 
```

PHP代码：

```
<?php
    file_get_contents('http://www.google.com');

    echo 'ok';
?> 
```

结果：

* *ab -n 100 -c 10 主机名 **

100 个请求，10 个并发（以秒为单位的时间）

```
节点JS 8.034 8.492 8.619 7.464 7.950
阿帕奇+PHP 18.648 16.699 19.428 17.903 18.297

```

* *ab -n 1000 -c 10 主机名 **

1000 个请求，10 个并发（以秒为单位的时间）

```
节点JS 68.361 74.705 78.473 74.138 66.779
阿帕奇+PHP 150.568 159.024 161.179 160.819 157.605

```

* *ab -n 10000 -c 100 主机名 **
10.000 个请求，100 个并发（以秒为单位的时间）

```
节点JS 1666.988 739.370         
阿帕奇+PHP 310.062 244.485         

```

* *ab -n 10000 -c 50 主机名 **
10.000 个请求，50 个并发（以秒为单位的时间）

```
节点JS 256.096 260.625         
阿帕奇+PHP 149.422 154.422         

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T16:03:30.417

我已将代码更改为：

节点代码：

```
var http = require('http');

http.globalAgent.maxSockets = 100000;    

var options1 = {
          host: 'www.google.com',
          port: 80,
          path: '/',
          method: 'GET',
          headers: {
              'Connection':'keep-alive'
          }
        };

http.createServer(function (req, res) {

    http.get(options1, function(response) {

        response.on('data', function (chunk) {

        });

        response.on('end', function (chunk) {
            res.writeHead(200, {'Content-Type': 'text/html'});
            res.end('ok');
        });

    });

}).listen(8888); 
```

但是……变化不大。它有点快，但与 Apache+PHP 相比，它非常慢。

# c# - 删除并添加回用户帐户后，奇怪的 FTP 错误得到解决

> ID：14606200
> 
> 赞同：0
> 
> 时间：2013-01-30T14:18:59.023
> 
> 标签：c#, windows-7

所以我有一个 C# Windows 应用程序，其中我有一个可以肯定工作的 FTP 方法。

奇怪的是，该应用程序在特定用户帐户（具有管理员权限）的 FTP 部分失败，并且并不总是发生。很随意。更奇怪的是，当我们删除该帐户并使用管理员权限重新创建它时，它又可以正常工作了。

PS- FTP 服务器和这个盒子都在同一个网络上，所以 FTP 服务器总是可以 ping 通的。

任何想法为什么它随机失败的FTP？

# excel - 如何阻止一个数据透视表影响从不同数据透视表创建的图表？

> ID：14606205
> 
> 赞同：1
> 
> 时间：2013-01-30T14:19:23.977
> 
> 标签：excel, pivot-table, excel-2013

我正在处理 Excel 2013 中某些服务器上的平均 CPU 负载。我将原始数据放在一个名为 RawData 的表中，该表包含 CPU 负载和每行中的时间戳。我从 RawData 创建了两个数据透视表（loadDaily 和 loadHourly）。在 loadDaily 中，我将时间戳设置为行标签，并将其设置为按天、小时、分钟分组，并从中创建了一个很好的 CPU 负载图表。现在我遇到的问题是，当我尝试仅按小时对 loadHourly 中的时间戳字段进行分组时，它还将分组应用于我的另一个数据透视表 (loadDaily) 以及与之链接的数据透视图。如何使时间戳字段上的分组仅适用于 loadHourly？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:41:35.500

好的，我在玩弄了一些之后回答了我自己的问题。我注意到创建初始组后，在数据透视表字段列表中有新字段（小时和天）。在我的第二个表中，我发现我可以使用第一次创建组时创建的 Hours 字段，而不是添加原始时间戳字段。

# java - 使用 BorderFactory 创建 TitleBorder 后如何从面板中删除蓝线？

> ID：14606206
> 
> 赞同：1
> 
> 时间：2013-01-30T14:19:25.690
> 
> 标签：java, swing, jpanel, border

我创建了一个 JPanel，并添加了一个带有 BorderFactory 的 TitleBorder，但它在面板周围显示了一条蓝线。我想删除这条线。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:55:16.220

如果没有明确给出，*蓝线*（金属）是 TitledBorder 使用的默认边框。如果您不喜欢默认的 EmptyBorder，则需要提供另一个边框：

```
myPanel.setBorder(BorderFactory.createTitledBorder
    (BorderFactory.createEmptyBorder(), someTitle)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T14:40:40.650

*   从未尝试从`TitleBorders AP`I 中提取此值，方法受到保护，或通过使用`UIManager`

*   必须在[TitleBorder 内使用 LineBorder](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/TitledBorder.html)

*   最简单的语法可以是`xxx.setBorder(new TitledBorder(new LineBorder(Color.ORANGE, 1), "label"));`或获取`Color`from（例如）`myPanel.getBackground()`instread of`Color.ORANGE`

*   另一个选项是（可能的）

    1.  移动描述（顶部，底部......）

    2.  改变`Font`

    3.  更改`Foreground`（`Color`用于描述）

*   [Oracle 教程How to Use Borders](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html) (ComounBorders)中的更多选项和描述

例如

![在此处输入图像描述](../Images/c00b2e2aff8089c7cecc4462380dd9e9.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.LineBorder;
import javax.swing.border.TitledBorder;

public class AddComponentsAtRuntime {

    private JFrame f;
    private JPanel panel;
    private JCheckBox checkValidate, checkReValidate, checkRepaint, checkPack;

    public AddComponentsAtRuntime() {
        JButton b = new JButton();
        b.setBackground(Color.red);
        b.setBorder(new LineBorder(Color.black, 2));
        b.setPreferredSize(new Dimension(600, 10));
        panel = new JPanel(new GridLayout(0, 1));
        panel.add(b);
        panel.setBorder(new TitledBorder(new LineBorder(Color.ORANGE, 1),
                "Add Components At Runtime"));
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(panel, "Center");
        f.add(getCheckBoxPanel(), "South");
        f.setLocation(200, 200);
        f.pack();
        f.setVisible(true);
    }

    private JPanel getCheckBoxPanel() {
        checkValidate = new JCheckBox("validate");
        checkValidate.setSelected(false);
        checkReValidate = new JCheckBox("revalidate");
        checkReValidate.setSelected(false);
        checkRepaint = new JCheckBox("repaint");
        checkRepaint.setSelected(false);
        checkPack = new JCheckBox("pack");
        checkPack.setSelected(false);
        JButton addComp = new JButton("Add New One");
        addComp.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JButton b = new JButton();
                b.setBackground(Color.red);
                b.setBorder(new LineBorder(Color.black, 2));
                b.setPreferredSize(new Dimension(600, 10));
                panel.add(b);
                makeChange();
                System.out.println(" Components Count after Adds :" + panel.getComponentCount());
            }
        });
        JButton removeComp = new JButton("Remove One");
        removeComp.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                int count = panel.getComponentCount();
                if (count > 0) {
                    panel.remove(0);
                }
                makeChange();
                System.out.println(" Components Count after Removes :" + panel.getComponentCount());
            }
        });
        JPanel panel2 = new JPanel();
        panel2.add(checkValidate);
        panel2.add(checkReValidate);
        panel2.add(checkRepaint);
        panel2.add(checkPack);
        panel2.add(addComp);
        panel2.add(removeComp);
        return panel2;
    }

    private void makeChange() {
        if (checkValidate.isSelected()) {
            panel.validate();
        }
        if (checkReValidate.isSelected()) {
            panel.revalidate();
        }
        if (checkRepaint.isSelected()) {
            panel.repaint();
        }
        if (checkPack.isSelected()) {
            f.pack();
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                AddComponentsAtRuntime makingChanges = new AddComponentsAtRuntime();
            }
        });
    }
} 
```

# jsf-2 - ui：重复奇怪的行为

> ID：14606210
> 
> 赞同：1
> 
> 时间：2013-01-30T14:19:46.683
> 
> 标签：jsf-2, mojarra, uirepeat

`<ui:repeat>`表现出奇怪的行为。我正在显示一些文本字段和一个删除链接`<ui:repeat>`。单击删除链接时，正在从后端删除正确的行，但视图仍显示已删除的行，而下一行则丢失了。

代码：

```
<h:form>
        <ui:repeat var="tarrifDetail" value="#{tarrifBean.tarrifDetails}">
        <br />
            <p:inputTextarea id="tarrifDetailName" value="#{tarrifDetail.tarrifName}" rows="2" cols="38">
                <p:watermark value="Tarrif Name" for="tarrifDetailName" />
            </p:inputTextarea>

            <p:spacer width="6" />

            <p:inputTextarea id="tarrifDetailValue" value="#{tarrifDetail.tarrifValue}"  rows="2" cols="38">
                <p:watermark value="Tarrif Value" for="tarrifDetailValue" />
            </p:inputTextarea>

            <p:spacer width="6" />

            <p:commandLink value="Delete" action="#{tarrifBean.deleteTarrifDetail(tarrifDetail)}" update="@form" />

            <br />

        </ui:repeat>
</h:form> 
```

塔里夫豆：

```
public void deleteTarrifDetail(TarrifDetailManagedBean detail) throws Throwable
{
    try
    {
        TarrifDetailManagerImpl.getInstance().deleteByPrimaryKey(detail.getTarrifDetailId());
        tarrifDetails.remove(detail);

        // problem is not solved even with this temp list scene part
        List<TarrifDetailBean> temp = new ArrayList<TarrifDetailBean>();
        temp.addAll(tarrifDetails);

        tarrifDetails = temp;

        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Successfully deleted tarrif detail", null));
} 
```

当我在 ui:repeat 中按下第一行的删除链接时，从数据库和列表中删除了正确的元素（我已经调试了代码），但是在视图中，第一行仍然显示，而第二行被删除了.

# objective-c - ARC 属性限定符

> ID：14606220
> 
> 赞同：1
> 
> 时间：2013-01-30T14:20:09.193
> 
> 标签：objective-c, properties, automatic-ref-counting, qualifiers

我对 ARC 比较陌生。我正在制作一个`UIView`子类，它将有两个标签（标题和副标题）。我不想将标签公开为属性，只公开它们的文本。

我目前正在使用这个：

```
@interface MyView : UIView
@property (nonatomic, strong) NSString *title;
@property (nonatomic, strong) NSString *subtitle;
@end 
```

```
@implementation MyView
{
    UILabel *_titleLabel;
    UILabel *_subtitleLabel;
}

- (void)setTitle:(NSString *)title
{
    [_titleLabel setText:title];
}

- (NSString *)title
{
    return [_titleLabel text];
}

- (void)setSubtitle:(NSString *)subtitle
{
    [_subtitleLabel setText:title];
}

- (NSString *)subtitle
{
    return [_subtitleLabel text];
}

@end 
```

我的两个@properties 是否正确声明？我应该使用`strong`,`weak`还是任何其他限定符？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:28:27.593

如果您要使用 setter / getter，我认为合适的标签是`readwrite`. `strong` `weak` `retain`当属性是实例变量的设置器/获取器时，等适用。

# excel - 删除重复的行（仅当它是下一行时！）

> ID：14606222
> 
> 赞同：0
> 
> 时间：2013-01-30T14:20:11.613
> 
> 标签：excel, vba, duplicate-removal

如果它与前一个相同，是否可以使用 Excel 2003 中的函数删除整行？例如：

1.  苹果
2.  苹果
3.  李子
4.  醋
5.  苹果
6.  香蕉
7.  香蕉
8.  香蕉
9.  苹果

我想删除#2、7# 和#8，但我不想删除#5 和#9。仅当它是下一个时，我才想删除重复的条目。我希望我设法让你清楚。如果没有函数，我怎么能在 VBA 中做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:23:39.900

如果它是一次性的，你可以在没有 VBA 的情况下通过在下一列中添加一个公式来相当简单 - 假设你的列是 A：

*   在 B2 中输入以下内容：

    ```
    =IF(A1=A2,"DELETE","") 
    ```

*   向下拖动公式

*   在两列上添加自动过滤器
*   在 B 列中过滤“DELETE”
*   删除所有可见行
*   删除 B 列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:02:30.870

这可能适合，删除所有重复的行（实际上，不仅是单元格数据！），所以请记住，它只能在您使用单列工作表时使用。否则，您将丢失一些其他数据。

```
Sub Unduplicate()
 Dim prev As String
 Dim sel As Range
 Dim i As Integer

 Set sel = Range(Selection, Selection)
 prev = sel.Offset(0).Value     ' set prev as the first value - never will be deleted
 i = 1    ' start from 2nd row
 Do While sel.Offset(i).Value <> "" And sel.Offset(i).Value <> ""
    If sel.Offset(i).Value = prev Then    ' if duplicate - delete row
        sel.Offset(i).EntireRow.Delete
    Else      ' else set new prev, and go further
        prev = sel.Offset(i).Value
        i = i + 1
    End If
 Loop
End Sub 
```

为您的示例运行此宏后，我得到：

![运行后视图 vba](../Images/d46efdc90abdcf78158e056c65f05474.png)

您可以修改它，将值存储在数组中，然后用记住的数组填充列而不是删除行，但这现在应该很容易了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:12:45.873

只是一个简短的说明...如果要删除整行，请确保从范围的底部开始工作。如果您从范围的顶部向下工作，您可能会得到一些意想不到的结果。您可能还需要考虑清除单元格值然后排序，而不是删除。我会为你写一个例子，但我时间不够。如果你卡住了，我可以稍后再写给你。

**编辑：**

我的原始答案不一定正确，如下面的 makciook 解决方案所示。在过去，我错误地以这种方式解决了这个问题（不要将其用作解决方案！！！）：

```
 Sub duplicates()
  Dim c As Range, rng As Range

  Set rng = Selection ''Select the entire list before running

  For Each c In rng

      If c.Value = c.Offset(-1, 0).Value Then c.EntireRow.Delete

  Next

  End Sub 
```

使用此脚本，一旦删除行并向上移动，单元格范围就不会重置。因此，运行它不会在您的列表中捕获第二个香蕉副本。作为替代方案，我通常会找到最后一行，然后一直到第一行，以解决发生删除时行向上移动的问题。如果可能的话，我会给自己一个-1。

# android - 需要在我的谷歌地图上使用 GPS 坐标在 android 应用程序中放置一个图标

> ID：14606228
> 
> 赞同：2
> 
> 时间：2013-01-30T14:20:17.290
> 
> 标签：android, overlay

在此先感谢，我在尝试使用谷歌地图在移动应用程序中显示我当前位置的图标时遇到了困难。目前，我可以使用使用 API 密钥等从 Google maps android api v2 库中检索地图，并且我可以在 GPS 坐标、“纬度”和“经度”上检索我自己的位置，因为它们可以是在我的移动设备的两个文本视图中显示在屏幕上。我现在的问题是如何使用这些坐标在地图上显示我自己的位置的图标。显然，当我尝试实现它时，我做错了。我尝试使用覆盖来实现它，但我遇到了很多错误。我不知道为什么或采取什么方法。这是我的代码。任何帮助我都会非常感激。谢谢

这是我的 MainActivity.java

```
package com.example.location3;

import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.widget.TextView;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity {

    TextView textLat;
    TextView textLong;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Create reference
        textLat = (TextView) findViewById(R.id.textLat);
        textLong = (TextView) findViewById(R.id.textLong);

        // create locationManager object
        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        // create LocationListener object (listen for changes in the location)
        LocationListener ll = new myLocationListener();

        // use lm location manager to get update
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
    }

    // create a LocationListener to do what we want
    class myLocationListener implements LocationListener {
        GoogleMap map = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map)).getMap();

        // implemented method
        @Override
        public void onLocationChanged(Location location) {
            if (location != null) {

                // variables to get and store longitude and latitude
                double pLong = location.getLongitude();
                double pLat = location.getLatitude();

                // set text to display values from longitude and latitude
                textLat.setText(Double.toString(pLat));
                textLong.setText(Double.toString(pLong));

            }

        }

        // implemented method
        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        // implemented method
        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        // implemented method
        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    }

} 
```

这是我的 Activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Latitud"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/textLat"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textLong"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView3"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textLat"
    android:text="Longitud"
    android:textAppearance="?android:attr/textAppearanceSmall" />

</RelativeLayout> 
```

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.location3"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.location3.permissions.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.location3.permission.MAP_RECEIVE" />

    <!-- to be able to use it for mobiles -->
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <!-- Permision to use Internet to get the maps -->
    <uses-permission android:name="android.permission.INTERNET" />
    <!-- Permision for the cache which is done in the external memory -->
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <!-- Permision to use google services -->
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

    <!-- Permision to be able to point in the map where the user is -->
    <!-- Permision to use wifi net -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <!-- Permision to use GPS -->
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <uses-library
             android:required="true"
             android:name="com.google.android.maps" />

        <activity
            android:name="com.example.location3.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- API provided from Google -->
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyCx00iNUdhMi9uyuCO9tTPwX4-nbi4wg6wx" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:49:12.680

您需要创建一个类来处理您想要在地图上贴图的任何位置的叠加层。[在此处](http://code.google.com/p/android-my-map-location/)参考本教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:37:51.650

尝试这个 ：

```
class CurrentLocationOverlay extends ItemizedOverlay<OverlayItem>{

private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

public CurrentLocationOverlay(Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
}

public CurrentLocationOverlay(Drawable defaultMarker , Context context) {
    this(boundCenterBottom(defaultMarker));
}

@Override
protected OverlayItem createItem(int i) {
    return mapOverlays.get(i);
}

@Override
public int size() {
    return mapOverlays.size();
}

public void addOverlay(GeoPoint gp , String title , String msg) {
    OverlayItem overlay = new OverlayItem(gp, title, msg); 
    mapOverlays.add(overlay);
    this.populate();
} 
```

}

添加图标：

```
Drawable mDrawable = getResources().getDrawable(R.drawable.pinpoint);
GeoPoint point = new GeoPoint((int)(lat* 1E6) , (int)(lng* 1E6));
CurrentLocationOverlay currentLocationOverlay = new CurrentLocationOverlay(mDrawable);
currentLocationOverlay.addOverlay(point ,"" , "");
mapView.getOverlays().add(currentLocationOverlay); 
```

# java - 如何使用 xsl 从 cdata 部分检索特定标记值

> ID：14606232
> 
> 赞同：0
> 
> 时间：2013-01-30T14:20:28.993
> 
> 标签：java, xml, xslt, jaxb, cdata

我的 XML 如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<Students>
<![CDATA[<?xml version="1.0" encoding="UTF-8"?> <Student><rno>1</rno><name>xyz</name>     </student>]]>
</Students> 
```

在 XSL 的帮助下，我想检索 cdata 部分中存在的 rno 的值。我如何读取这个值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:41:46.283

首先，在您的 xml 中，您应该替换`</student>`为`</Student>`. 因为这里的 XML 标签是区分大小写的[引用](http://www.w3schools.com/xml/xml_syntax.asp)。

自己做到这一点的诀窍如下：

```
public static String getRNO(){

    String valueRetrieved = null;

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = null;
    Document doc = null;

    try {
        db = dbf.newDocumentBuilder();
        doc = db.parse(new File("D:\\Loic_Workspace\\Test2\\res\\test.xml"));
        NodeList ndList = doc.getElementsByTagName("Students");
        String xmlRetrieved = ndList.item(0).getTextContent();

        if(xmlRetrieved != null) {
            //CALL OF STRING REPLACE METHOD TO PREVENT FROM
            //at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
            //at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source
            xmlRetrieved = xmlRetrieved.replace("<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "");

            doc = db.parse(new InputSource(new StringReader(xmlRetrieved)));
            valueRetrieved = doc.getElementsByTagName("rno").item(0).getTextContent();
        }

    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return valueRetrieved;

} 
```

希望能帮助到你 ;-）

# vim - 如何折叠“#if ... #endif”，但在两者之间跳过“{”？

> ID：14606233
> 
> 赞同：0
> 
> 时间：2013-01-30T14:20:31.700
> 
> 标签：vim

我将此行添加`~/.vimrc`到折叠 C 宏`#if`... `#endif`：

```
au FileType h,c,cpp syn region zhouzmFoldIf start="^\s*#if" end="^\s*#endif" fold transparent extend 
```

它大部分时间都运行良好。但是如果中间有一个`{`，它就不能正确折叠。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:47:27.433

[在这个 vim_use 线程](http://groups.google.com/group/vim_use/browse_thread/thread/49ed223185b6cb07)中，讨论了这个问题。Ben Fritz 发布了以下解决方案。

```
" fold #if...#else...#endif constructs
syn region IfFoldContainer
    \ start="^\s*#\s*if\(n\?def\)\?\>"
    \ end="#\s*endif\>"
    \ skip=+"\%(\\"\|[^"]\)\{-}\\\@<!"\|'[^']\{-}'\|'\\''\|//.*+
    \ transparent
    \ keepend extend
    \ containedin=NONE
    \ contains=SynFoldIf,SynFoldElif,SynFoldElse
syn region SynFoldIf
    \ start="^\s*#\s*if\(n\?def\)\?\>"
    \ end="^\s*#\s*el\(se\|if\)\>"ms=s-1,me=s-1
    \ skip=+"\%(\\"\|[^"]\)\{-}\\\@<!"\|'[^']\{-}'\|'\\''\|//.*+
    \ fold transparent
    \ keepend
    \ contained
    \ nextgroup=SynFoldElif,SynFoldElse
    \ contains=TOP
syn region SynFoldElif
    \ start="^\s*#\s*elif\>"
    \ end="^\s*#\s*el\(se\|if\)\>"ms=s-1,me=s-1
    \ skip=+"\%(\\"\|[^"]\)\{-}\\\@<!"\|'[^']\{-}'\|'\\''\|//.*+
    \ fold transparent
    \ keepend
    \ contained
    \ nextgroup=SynFoldElse
    \ contains=TOP
syn region SynFoldElse
    \ start="^\s*#\s*else\>"
    \ end="^\s*#\s*endif\>"
    \ skip=+"\%(\\"\|[^"]\)\{-}\\\@<!"\|'[^']\{-}'\|'\\''\|//.*+
    \ fold transparent
    \ keepend
    \ contained
    \ contains=TOP 
```

# php - PHP脚本将整个对象从一个类传递到另一个类

> ID：14606237
> 
> 赞同：0
> 
> 时间：2013-01-30T14:20:37.283
> 
> 标签：php, postgresql

为了很好地描述我的问题，我将首先写几句关于我的脚本到目前为止是如何工作的。
所以有一个服务器不时`XML`在某个地址下更新（假设它的（`https://someaddress.com/feedback.xml`）。然后我创建了一个每天运行一次的脚本（使用`cron`）读取`XML`给定的并将新对象放入我的数据库中。

现在我想在我的另一个脚本中获取这些对象（对我来说创建`.php`仅加载最新对象的独立文件很重要`feedback.xml`。这就是问题所在。我可以直接从中加载这些值，`database`但这样我就有了所有的完整列表记录（我只想要最新的）对此的解决方案可能是在表中添加存储`boolean`值的列`New?`问题，但我不能以任何方式改变我的`database`. 我相信我可以将这些对象加载到某些对象，`array`但是如何将其传递给另一个脚本？下面我发布我用来存储记录的方法`database`

```
$xmlstr = file_get_contents(url);

$xml = new SimpleXMLElement($xmlstr);

foreach ($xml->value as $a) {

    //method to check if record exist

    $rec= new Item($db);

    //method to set values of obj

    $rec->Store(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:28:16.723

如果您的脚本在同一台服务器上运行，那么有许多不同的方法可能会起作用：-

(1) 如果您的数据库已经有相关行的时间戳或唯一 ID，那么您可以查询数据库，按这些列之一排序，然后将结果限制为 1 条记录。

```
select [fields] from records order by created desc limit 1 
```

(2) 除了将结果写入数据库之外，您还可以将它们保存在本地文件中并每次都从中读取（这些结果集有多大？）。

(3) 另一种选择是使用 Memcached 将结果集持久保存在内存中，这样您的脚本就可以保持解耦，但访问信息的速度非常快。如果您以前没有使用过 Memcached，请看一下 - 它非常适合此类任务并且使用简单。

如果您的脚本在不同的服务器上运行，那么 (1) 将起作用，但其他脚本需要进一步考虑。

# java - 没有 scriptlet 的 JSP onload 调用 servlet

> ID：14606245
> 
> 赞同：2
> 
> 时间：2013-01-30T14:21:06.350
> 
> 标签：java, html, jsp, servlets

我希望在加载我的 JSP 时调用 servlet。我有这个链接：

```
<a href="ContentServlet?action=userContents">Homepage</a> 
```

但是这样我必须点击链接，我想在加载jsp时自动执行调用。

另一方面，我不需要使用小脚本。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:28:44.503

为什么不使用 JavaScript？

```
 <script type="text/javascript">
        function redirect(){
        window.location = "/ContentServlet?action=userContents"
        }
</script>

    ...

    <body onLoad="redirect()"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:43:16.967

虽然它被标记为已解决，但我正在编辑我的答案以供将来参考：除了 javascript 解决方案之外，您还可以使用 jsp 标签通过另外 2 个选项来完成此操作：

**选项1：** 您可以将请求转发到相应的servlet。使用 jsp 标准动作 jsp:forward，例如：

```
<jsp:forward page="ContentServlet?action=userContents" >
</jsp:forward> 
```

您可以用上面的标签替换您的链接，然后将调用 servlet。

**选项 2：** 您可以使用 JSTL 标记将请求重定向到您的 servlet：

```
<c:redirect url="ContentServlet?action=userContents" /> 
```

同样，您可以用上面的标签替换您的链接。

在 Option1 浏览器的 url 不会改变。在选项 2 中，浏览器的 url 将更改为“ContentServlet?action=userContents”

希望它能解决你的问题。

# ruby-on-rails - Carrierwave/Minimagick 在上传后不处理图像

> ID：14606249
> 
> 赞同：0
> 
> 时间：2013-01-30T14:21:17.340
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, carrierwave, minimagick

我无法在 RoR 中使用 Carrierwave/Minimagick gem 实现简单的图像上传器。

我正在尝试在上传时将文件转换为灰度，但出现错误。这是代码：

**image_uploader.rb：**

```
class ImageUploader < CarrierWave::Uploader::Base

  include CarrierWave::MiniMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  include Sprockets::Helpers::RailsHelper
  include Sprockets::Helpers::IsolatedHelper

  storage :file

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  # Process files as they are uploaded:
   process :convert_to_grayscale

  def convert_to_grayscale
    manipulate! do |img|
      img.quantize(256, Magick::GRAYColorspace)
      img = yield(img) if block_given?
      img
    end
  end 
```

当我尝试上传文件时，出现以下错误：

```
uninitialized constant ImageUploader::Magick

app/uploaders/image_uploader.rb:36:in `block in convert_to_grayscale'
app/uploaders/image_uploader.rb:35:in `convert_to_grayscale' 
```

我相信这是由于 Magick::GRAYColorspace 枚举常量。任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:40:18.053

是`manipulate`将图像加载到内存的功能吗？它是否返回图像列表？

我认为图像未正确加载。问题不在于 Magick 枚举。

这是一个示例：

```
require 'RMagick'

clown = Magick::ImageList.new("clown.jpg")
clown = clown.quantize(256, Magick::GRAYColorspace)
clown.write('monochrome.jpg') 
```

# ember.js - EmberJS：如何创建模态表单

> ID：14606251
> 
> 赞同：2
> 
> 时间：2013-01-30T14:21:28.070
> 
> 标签：ember.js

什么是在 EmberJS 中创建模态表单的好方法或模式。像[这样](http://goo.gl/5Vgv9)的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:11:01.810

我将描述我使用 CSS 方法管理模态视图的方式：

添加 CSS 类名：

```
.modal {

  -webkit-transition: -webkit-transform @modal-duration @ease-animation-style;
  -webkit-transform: translate3d(0,0,0);
  -webkit-backface-visibility: hidden;

}

.modal.from-left.is-hidden {

  -webkit-transform: translate3d(-320px,0,0);

}

.modal.from-right.is-hidden {

  -webkit-transform: translate3d(320px,0,0);

}

.modal.from-up.is-hidden {

  -webkit-transform: translate3d(0,-1*@app-height,0);

}

.modal.from-down.is-hidden {

  -webkit-transform: translate3d(0,@app-height,0);

} 
```

将自定义事件添加到您的应用程序命名空间以在您的视图中接收 transitionEnd 事件：

```
Yn.Application = Em.Application.extend( Em.Evented, {
  customEvents: {
    webkitTransitionEnd:  'transitionEnd',
    ......
  }
}); 
```

现在创建一个要在您的视图中使用的 mixin：

```
Yn.Modal = Em.Mixin.create({

  isHidden: true,
  classNameBindings: ['isHidden'],
  classNames: ['modal'],

  transitionEnd: function(event) {
    // transitionEnd triggers multiple times
    // http://stackoverflow.com/questions/4062105/webkit-transitionend-event-grouping

    if ( event.originalEvent.propertyName === '-webkit-transform' && 
        $(event.target)[0] === this.$()[0] ) {
      var eventName = this.get('isHidden') ? 'transitionHide' : 'transitionShow' ;
      this.trigger(eventName);
    }

  }

}); 
```

您现在可以通过 appendTo 或任何把手视图模板或您使用的任何方法将视图插入 DOM，并使用其**isHidden**属性管理您的视图，该属性可以绑定到例如控制器 UI 属性，您还可以与视图交互视图生命周期挂钩为**didInsertElement**或新定义为**transitionHide**、**transitionShow**挂钩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:40:11.727

你可以使用我修改过的[Bootstrap.ModalPane](https://github.com/pjlammertyn/ember-bootstrap/blob/master/packages/ember-bootstrap/lib/views/modal_pane.js)

前任：

```
App.ContactView = Bootstrap.ModalPane.extend({
  closeOnEscape: false,
  showBackdrop: true,
  showCloseButton: false,
  heading: 'Contact',
  primary: "Save changes",
  secondary: "Cancel",
  classNames: ["large-modal"],

  bodyViewClass: Ember.View.extend({
    templateName: 'contact-body'
  }),  

  callback: function (opts, event) {
    var controller = this.get('controller');
    if (opts.primary) {
        controller.save();
    } else {
        controller.cancel();
    }    
  }
}); 
```

在您的控制器中，您可以执行以下操作：

```
editContact: function (contact) {
   var contactController = this.controllerFor('contact');
    contactController.set('content', contact);
    var contactView = App.ContactView.create({
        controller: contactController
    });
    contactView.append();
}, 
```

您还可以通过自定义定义自己的 modalPaneTemplate。重要的是 Boostrap.ModelPane 的工作原理，默认它只支持底部的 2 个按钮。如果您想要 5 个按钮或标题中的按钮，请开始自己编写代码并创建自定义 modalPaneTemplate。

# r - seq 和 seq_along，两全其美？

> ID：14606252
> 
> 赞同：3
> 
> 时间：2013-01-30T14:21:31.533
> 
> 标签：r

如果我想对两个向量中的所有元素进行编号，向量 1 得到所有奇数，向量 2 得到所有偶数，假设向量的长度为 10，我可以这样做。

```
seq(1, 10, by=2)
[1] 1 3 5 7 9

seq(2, 11, by=2)
[1]  2  4  6  8 10 
```

但如果我的向量只有一个元素，我会遇到问题：

```
 seq(2)
[1] 1 2 
```

所以我使用：

```
seq_along(2)
[1] 1 
```

但我不能`by=`在`seq_long()`. 我如何`seq_along`通过 的功能获得可靠性`seq()`？

* * *

这个例子可能会让事情变得清晰。

想象一下，我有两个列表：

```
list1 <- list(4)
list2 <- list(4) 
```

`list1`必须沿列表元素获得偶数名称。 `list2`必须沿列表元素获取奇数名称。

我不知道列表元素会有多长。

```
seq_along(list1[[1]]) # this will know to only give one name but I cant make it even

seq(list2[[1]]) # this know to give 1 name
#and
seq(2, list1[[1]], by=2) # this gives me even but too nay names 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:51:04.673

这是一个向 seq_along 添加 'by' 参数的函数：

```
seq_along_by = function(x, by=1L, from = 1L) (seq_along(x) - 1L) * by + from 
```

和一些测试用例

```
> seq_along_by(integer(), 2L)
integer(0)
> seq_along_by(1, 2L)
[1] 1
> seq_along_by(1:4, 2L)
[1] 1 3 5 7
> seq_along_by(1:4, 2.2)
[1] 1.0 3.2 5.4 7.6
> seq_along_by(1:4, -2.2)
[1]  1.0 -1.2 -3.4 -5.6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:30:45.383

我刚刚发现的一种方法是：

```
 y <- seq_along(1:20)
  y[y %% 2 == 0 ]
  [1]  2  4  6  8 10 12 14 16 18 20
  y[ !y %% 2 == 0 ]
  [1]  1  3  5  7  9 11 13 15 17 19 
```

但这只有在我的向量是偶数时才有效。必须能够做得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:31:10.953

如果我理解正确，您真正想要的是让“seq”函数分别只返回奇数或烤箱数 1..max 或 2..max。你会这样写：

```
seq(1, max, by=2) # Odd numbers
seq(2, max, by=2) # Even numbers 
```

`max`您的系列中的最高数字在哪里。唯一会中断的情况是 if`max`小于 2。

**更新 1**：关于 OP 的要求似乎有一些讨论。如果我们假设有两个现有的向量要编号，我们可以得到向量项的总数，`max <- length(c(vector1, vector2))`从而获得正在使用的最大数量。然后，索引将被分配如下：

```
vector1 <- seq(1, max, by=2)
vector2 <- seq(2, max, by=2) 
```

这将适用于任何集合，除非一个向量根本没有任何元素。

**更新 2**：如果您的向量不代表 1 和 之间的所有值，您可以采用最后一种方法`max`。这就是它的工作方式：

```
vector1 <- seq(1, length(vector1) * 2, by=2)
vector2 <- seq(1, length(vector2) * 2, by=2) 
```

这会根据 vector1 和 vector2 的长度独立地分配它们的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T14:35:45.903

我不确定您要做什么，但是如果您想要`split`向量中的奇数和偶数元素，您可以这样做：

```
x <- 1:19
split(x,x%%2)
$`0`
[1]  2  4  6  8 10 12 14 16 18

$`1`
 [1]  1  3  5  7  9 11 13 15 17 19 
```

要提取奇数和偶数元素，请`lapply`在此列表中使用 using`seq_along`枚举元素编号：

```
x <- rep(c("odd","even"),times=4)
lapply(split(seq_along(x),seq_along(x)%%2),function(y) "["(x,y))
$`0`
[1] "even" "even" "even" "even"

$`1`
[1] "odd" "odd" "odd" "odd" 
```

这当然可以做成一个函数：

```
split_oe <- function(x) lapply(split(seq_along(x),seq_along(x)%%2),function(y) "["(x,y))
split_oe(1:10)
$`0`
[1]  2  4  6  8 10

$`1`
[1] 1 3 5 7 9

> split_oe(2)
$`1`
[1] 2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T15:13:19.753

我正在添加另一个答案来解决您提出问题的意图，而不是您所说的问题。

假设您有几个数组，`A1`并且`A2`, 带有值，并且您希望将索引链接到这些值，因此您可以说并从if是奇数和if是偶数中`index[n]`获取相应的值。`A1[n/2 + 1]``n``A2[n/2]``n`

我们将构建一个新向量 ，`index`如下所示：

```
# Sample arrays
A1 <- sample(LETTERS, 5, rep=TRUE)
A2 <- sample(LETTERS, 5, rep=TRUE)

n_Max <- length(c(A1,A2))
index <- integer(n_Max)
index[seq(1,n_Max,by=2)] <- A1
index[seq(2,n_Max,by=2)] <- A2 
```

现在，奇数时`index[n]`返回`A1`值，偶数时返回值。如果不等于或小于 1，则会中断。`n``A2``n``length(A2)``length(A1)`

# .net - 将usercontrol的wpf依赖属性传递给子控件

> ID：14606253
> 
> 赞同：3
> 
> 时间：2013-01-30T14:21:32.507
> 
> 标签：.net, wpf, binding, dependency-properties

我有一个自定义 MyControl ：具有依赖属性的 UserControl

```
string Text 
```

在 XAML 中的 MyControl 内，我有一个 TextBox。

我希望将**MyControl**的Text 依赖属性绑定到**TextBox**的 Text 依赖属性。

做这个的最好方式是什么？我可以声明 MyControl 的依赖属性以传递给子依赖属性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:29:47.477

最简单的方法是将`x:Name="root"`属性分配给文件的根目录`MyControl.xaml`，然后为您的`TextBox`:

```
<TextBox Text="{Binding Text, ElementName=root}" /> 
```

（您可以为 指定您自己的名称`root`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:30:11.030

[我在这里](https://stackoverflow.com/questions/9468881/passing-a-gridview-selected-item-value-to-a-different-viewmodel-of-different-use/9470374#9470374)的回答详细说明了如何实现这一点的一个很好的例子。您基本上将控件绑定到视图模型上的属性，子视图模型具有启用对子控件的绑定并将值推送到子视图模型的依赖项属性。该示例在 Silverlight 中，但 WPF 的实现是相同的。

# mysql - 使用多个 JOIN 进行查询优化

> ID：14606254
> 
> 赞同：2
> 
> 时间：2013-01-30T14:21:32.703
> 
> 标签：mysql, performance, join, query-optimization, star-schema

我对星型模式中的事实表“foo_success”进行了查询，该表有大约 600 万行。该表包含对维度表的（整数）引用，仅此而已。我们使用 MyISAM 作为存储引擎。

查询：

```
SELECT 
hierarchy.level0name,
hierarchy.level1name,
hierarchy.level0,
hierarchy.level1,
date.date,
address.city,
user.emailAddress,
foo_object.name,
foo_object.type,
user_group.groupId,
COUNT(user.id) AS count_user_id,
SUM(foo_object_statistic.passes) AS sum_foo_object_statistic_passes,
SUM(foo_object_statistic.starts) AS sum_foo_object_statistic_starts,
SUM(foo_object_statistic.calls) AS sum_foo_object_statistic_calls

FROM 
foo_success,
user,
user_group,
address, 
hierarchy,
foo_object,
foo_object_statistic,
date

WHERE (foo_success.userDimensionId = user.id)
AND (foo_success.userGroupDimensionId = user_group.id)
AND (foo_success.addressDimensionId = address.id)
AND (foo_success.hierarchyDimensionId = hierarchy.id)
AND (foo_success.fooObjectDimensionId = foo_object.id)
AND (foo_success.fooObjectStatisticDimensionId = foo_object_statistic.id)
AND (foo_success.dateDimensionId=date.id)
AND hierarchy.level0 = 'XYZ'
AND hierarchy.level1 IS NOT NULL 
AND hierarchy.level2 IS NOT NULL 
AND hierarchy.level3 IS NOT NULL 
AND hierarchy.level4 IS NOT NULL 
AND hierarchy.level5 IS NOT NULL 
AND hierarchy.level6 IS NULL 
AND hierarchy.level7 IS NULL
GROUP BY hierarchy.level0, foo_object.fooObjectId
LIMIT 0, 25; 
```

到目前为止我已经尝试过：

*   这是简单的连接版本，它在速度上等于 INNER JOIN 替代方案。
*   所有连接或作为条件一部分的字段都有索引。
*   我确实在此查询上使用了 EXPLAIN，发现表用户的查询成本（已处理的行数）为 128596，表 foo_success 的查询成本为 77。
*   我试图删除对用户表的依赖，这导致事实表 foo_success 中处理的行数超过 600 万。

完成此查询大约需要 1.5 分钟，这与我对读取速度优化的数据仓库星型模式的预期相差甚远。有什么办法可以优化这个怪物吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:51:07.363

查询的低效率主要来自于传输了很多你实际上并没有使用的数据：字段`hierarchy.level1name, hierarchy.level0name, hierarchy.level1, date.date, address.city, user.emailAddress, foo_object.name, foo_object.type, user_group.groupId`不包含在`GROUP BY`子句中，这意味着每行都检索信息，加载到内存中然后丢弃。

我建议在子查询中集中检索所有足够的 id 和聚合结果，然后连接到其余表，这样每个连接将产生不超过一行（您甚至可以`LIMIT`在子查询中移动子句以最小化所需的后续 JOIN 操作）。之后，您可能会发现，您没有一些有用的索引。

# c# - 包含 char 数组时的快速读取 C 结构

> ID：14606256
> 
> 赞同：8
> 
> 时间：2013-01-30T14:21:46.633
> 
> 标签：c#, performance, struct, c++-cli, unsafe

我有以下C结构

```
struct MyStruct {
    char chArray[96];
    __int64 offset;
    unsigned count;
} 
```

我现在有一堆用 C 语言创建的文件，其中包含数千个这样的结构。我需要使用 C# 阅读它们并且速度是一个问题。

我在 C# 中完成了以下操作

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi, Size = 108)]
public struct PreIndexStruct {
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 96)]
    public string Key;
    public long Offset;
    public int Count;
} 
```

然后我使用从文件中读取数据

```
using (BinaryReader br = new BinaryReader(
       new FileStream(pathToFile, FileMode.Open, FileAccess.Read, 
                      FileShare.Read, bufferSize))) 
{
    long length = br.BaseStream.Length;
    long position = 0;

    byte[] buff = new byte[structSize];
    GCHandle buffHandle = GCHandle.Alloc(buff, GCHandleType.Pinned);
    while (position < length) {
        br.Read(buff, 0, structSize);
        PreIndexStruct pis = (PreIndexStruct)Marshal.PtrToStructure(
            buffHandle.AddrOfPinnedObject(), typeof(PreIndexStruct));
        structures.Add(pis);

        position += structSize;
    }
    buffHandle.Free();
} 
```

这非常有效，我可以从文件中很好地检索数据。

我已经读到如果我使用 C++/CLI 或 C# 不安全代码而不是使用 GCHandle.Alloc/Marshal.PtrToStructure 可以加快速度。我找到了一些示例，但它们仅指没有固定大小数组的结构。

我的问题是，对于我的特殊情况，是否有更快的方法来处理 C++/CLI 或 C# 不安全代码？

**编辑**

其他性能信息（我使用过 ANTS Performance Profiler 7.4）：

对 Marshal.PtrToStructure 的调用占用了我 66% 的 CPU 时间。

关于 I/O，105 毫秒中只有 6 毫秒用于读取文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:36:23.480

在这种情况下，您不需要显式使用 P/Invoke，因为您不必在托管代码和本机代码之间来回传递结构。所以你可以这样做。它将避免这种无用的 GC 句柄分配，并且只分配需要的东西。

```
public struct PreIndexStruct {
    public string Key;
    public long Offset;
    public int Count;
}

while (...) {
    ...
    PreIndexStruct pis = new PreIndexStruct();
    pis.Key = Encoding.Default.GetString(reader.ReadBytes(96));
    pis.Offset = reader.ReadInt64();
    pis.Count = reader.ReadInt32();
    structures.Add(pis);
} 
```

我不确定你能比这快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:31:49.000

您可能更正确地想使用非托管代码，这就是我要做的：

1.  创建一个 C++/CLI 项目并将现有的 c# 代码移植到那里并运行
2.  确定瓶颈在哪里（使用分析器）
3.  直接用 C++ 重写代码的那部分，从 C++/CLI 代码中调用它并确保它工作，再次分析它
4.  用“#pragma unmanaged”包围你的新代码
5.  再次分析它

您可能会获得一定程度的速度提升，但这可能不是您所期望的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:42:56.687

快速读取一些结构数组是可能的，但是因为这种技术需要 blittable 类型，所以唯一的方法是为 Key 制作一个固定的字节缓冲区，而不是使用字符串。

如果你这样做，你必须使用不安全的代码，所以它可能并不值得。

然而，只是为了好奇，这就是你如何对这些结构进行超级快速的读写，代价是不得不允许不安全的代码和大量的小提琴：

```
using System;
using System.ComponentModel;
using System.Diagnostics;
using System.Diagnostics.CodeAnalysis;
using System.IO;
using System.Runtime.InteropServices;

namespace Demo
{
    public static class Program
    {
        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi, Size = 108)]
        public struct PreIndexStruct
        {
            public unsafe fixed byte Key[96];
            public long Offset;
            public int Count;
        }

        private static void Main(string[] args)
        {
            PreIndexStruct[] a = new PreIndexStruct[100];

            for (int i = 0; i < a.Length; ++i)
            {
                a[i].Count = i;

                unsafe
                {
                    fixed (byte* key = a[i].Key)
                    {
                        for (int j = 0; j < 10; ++j)
                        {
                            key[j] = (byte)i;
                        }
                    }
                }
            }

            using (var output = File.Create(@"C:\TEST\TEST.BIN"))
            {
                FastWrite(output, a, 0, a.Length);
            }

            using (var input = File.OpenRead(@"C:\TEST\TEST.BIN"))
            {
                var b = FastRead<PreIndexStruct>(input, a.Length);

                for (int i = 0; i < b.Length; ++i)
                {
                    Console.Write("Count = " + b[i].Count + ", Key =");

                    unsafe
                    {
                        fixed (byte* key = b[i].Key)
                        {
                            // Here you would access the bytes in Key[], which would presumably be ANSI chars.

                            for (int j = 0; j < 10; ++j)
                            {
                                Console.Write(" " + key[j]);
                            }
                        }
                    }

                    Console.WriteLine();
                }
            }
        }

        /// <summary>
        /// Writes a part of an array to a file stream as quickly as possible,
        /// without making any additional copies of the data.
        /// </summary>
        /// <typeparam name="T">The type of the array elements.</typeparam>
        /// <param name="fs">The file stream to which to write.</param>
        /// <param name="array">The array containing the data to write.</param>
        /// <param name="offset">The offset of the start of the data in the array to write.</param>
        /// <param name="count">The number of array elements to write.</param>
        /// <exception cref="IOException">Thrown on error. See inner exception for <see cref="Win32Exception"/></exception>

        [SuppressMessage("Microsoft.Reliability", "CA2001:AvoidCallingProblematicMethods", MessageId="System.Runtime.InteropServices.SafeHandle.DangerousGetHandle")]

        public static void FastWrite<T>(FileStream fs, T[] array, int offset, int count) where T: struct
        {
            int sizeOfT = Marshal.SizeOf(typeof(T));
            GCHandle gcHandle = GCHandle.Alloc(array, GCHandleType.Pinned);

            try
            {
                uint bytesWritten;
                uint bytesToWrite = (uint)(count * sizeOfT);

                if
                (
                    !WriteFile
                    (
                        fs.SafeFileHandle.DangerousGetHandle(),
                        new IntPtr(gcHandle.AddrOfPinnedObject().ToInt64() + (offset*sizeOfT)),
                        bytesToWrite,
                        out bytesWritten,
                        IntPtr.Zero
                    )
                )
                {
                    throw new IOException("Unable to write file.", new Win32Exception(Marshal.GetLastWin32Error()));
                }

                Debug.Assert(bytesWritten == bytesToWrite);
            }

            finally
            {
                gcHandle.Free();
            }
        }

        /// <summary>
        /// Reads array data from a file stream as quickly as possible,
        /// without making any additional copies of the data.
        /// </summary>
        /// <typeparam name="T">The type of the array elements.</typeparam>
        /// <param name="fs">The file stream from which to read.</param>
        /// <param name="count">The number of elements to read.</param>
        /// <returns>
        /// The array of elements that was read. This may be less than the number that was
        /// requested if the end of the file was reached. It may even be empty.
        /// NOTE: There may still be data left in the file, even if not all the requested
        /// elements were returned - this happens if the number of bytes remaining in the
        /// file is less than the size of the array elements.
        /// </returns>
        /// <exception cref="IOException">Thrown on error. See inner exception for <see cref="Win32Exception"/></exception>

        [SuppressMessage("Microsoft.Reliability", "CA2001:AvoidCallingProblematicMethods", MessageId="System.Runtime.InteropServices.SafeHandle.DangerousGetHandle")]

        public static T[] FastRead<T>(FileStream fs, int count) where T: struct
        {
            int sizeOfT = Marshal.SizeOf(typeof(T));

            long bytesRemaining  = fs.Length - fs.Position;
            long wantedBytes     = count * sizeOfT;
            long bytesAvailable  = Math.Min(bytesRemaining, wantedBytes);
            long availableValues = bytesAvailable / sizeOfT;
            long bytesToRead     = (availableValues * sizeOfT);

            if ((bytesRemaining < wantedBytes) && ((bytesRemaining - bytesToRead) > 0))
            {
                Debug.WriteLine("Requested data exceeds available data and partial data remains in the file.", "Dmr.Common.IO.Arrays.FastRead(fs,count)");
            }

            T[] result = new T[availableValues];

            GCHandle gcHandle = GCHandle.Alloc(result, GCHandleType.Pinned);

            try
            {
                uint bytesRead = 0;

                if
                (
                    !ReadFile
                    (
                        fs.SafeFileHandle.DangerousGetHandle(),
                        gcHandle.AddrOfPinnedObject(),
                        (uint)bytesToRead,
                        out bytesRead,
                        IntPtr.Zero
                    )
                )
                {
                    throw new IOException("Unable to read file.", new Win32Exception(Marshal.GetLastWin32Error()));
                }

                Debug.Assert(bytesRead == bytesToRead);
            }

            finally
            {
                gcHandle.Free();
            }

            return result;
        }

        /// <summary>See the Windows API documentation for details.</summary>

        [SuppressMessage("Microsoft.Interoperability", "CA1415:DeclarePInvokesCorrectly")]
        [DllImport("kernel32.dll", SetLastError=true)]
        [return: MarshalAs(UnmanagedType.Bool)]

        private static extern bool ReadFile
        (
            IntPtr hFile,
            IntPtr lpBuffer,
            uint nNumberOfBytesToRead,
            out uint lpNumberOfBytesRead,
            IntPtr lpOverlapped
        );

        /// <summary>See the Windows API documentation for details.</summary>

        [SuppressMessage("Microsoft.Interoperability", "CA1415:DeclarePInvokesCorrectly")]
        [DllImport("kernel32.dll", SetLastError=true)]
        [return: MarshalAs(UnmanagedType.Bool)]

        private static extern bool WriteFile
        (
            IntPtr hFile,
            IntPtr lpBuffer,
            uint nNumberOfBytesToWrite,
            out uint lpNumberOfBytesWritten,
            IntPtr lpOverlapped
        );
    }
} 
```

# html - css float - 它相对于行高和位置有什么变化

> ID：14606260
> 
> 赞同：-1
> 
> 时间：2013-01-30T14:22:12.937
> 
> 标签：html, css

我正在努力解决一个问题：里面有一个表格单元格和按钮。在我浮动此按钮后，除了向左/向右移动之外，垂直位置也会发生变化 - 特别是浮动按钮会移动到行的顶部。例如：

```
 <table style="width: 100%">
        <tr>
            <td style="background-color: green;">
                <select style="height: 100px;">
                    <option>Option 1</option>
                </select>
                <button>One</button>
                <button>One</button>
                <button style="float: right">Two</button>            
            </td>
        </tr>
        <tr>
            <td style="background-color: red;">
                <select>
                    <option>Option 1</option>
                </select>
                <button>One</button>
                <button>One</button>
                <button style="float: right">Two</button>            
            </td>
        </tr>    
    </table> 
```

[http://jsfiddle.net/qS6gh/1/](http://jsfiddle.net/qS6gh/1/)

重要的一点是**：高度：100px**。如果我使用这个值，按钮总是与选择控件对齐。但浮动按钮总是落在线路的顶部战斗角落。这是为什么？如何强制浮动元素与其他元素对齐？基本上我的目标是在表格单元格的右上角有按钮元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:54:12.137

因为按钮通常设置为 display `inline-block`，有点像文本，所以它们在表格单元格中尊重`vertical-align`（默认为） - 但随后应用强制它们显示，这意味着它们不再显示为内联或尊重文本流。`middle``float``block`

# javascript - SVG。从文本中获取路径

> ID：14606263
> 
> 赞同：4
> 
> 时间：2013-01-30T14:22:17.940
> 
> 标签：javascript, canvas, svg, converter

是否可以将 SVG 文本转换为：

```
<g transform="translate(185 185)">
    <text font-family="'Wednesday'" font-size="40" font-weight="100"
          style="stroke: none;  stroke-width: 1; stroke-dasharray: ; fill: rgb(0,0,0); opacity: 1;"
          transform="translate(-78.5 -28.48)">
        <tspan x="0" y="41.1" fill="rgb(0,0,0)">Test text</tspan>
    </text>
</g> 
```

使用 javascript 到 SVG 路径？独立于字体可用性。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-22T20:06:03.633

opentype.js 可以采用字体并将其分解为路径。它与 svg 或 canvas 无关

# laravel - Laravel Eloquent 和梳理数据发送到 View

> ID：14606264
> 
> 赞同：0
> 
> 时间：2013-01-30T14:22:18.350
> 
> 标签：laravel, eloquent

我试图找出一种方法将两个表中的数据组合成一个变量，然后我可以将其发送到我的视图。我使用授权作为我的身份验证包，因此我设置了以下表格：用户、角色、角色用户。我想将以下数据放入单个变量中。

来自用户表：id、name、email

从角色表中：名称

以下返回 users 表中的所有用户数据：

```
$users = User::all(); 
```

但是，我想制作一个可以获取存储在角色表中的相关数据的链？我希望所有用户和所有每个用户角色在一起。

虽然我可以找到有助于获取单个记录的相关数据的示例，但我无法找到任何参考来检索具有相关数据的整个表。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:15:44.807

```
$users = User::with('roles')->get() 
```

急切加载是您正在寻找的内容，请阅读文档 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:19:41.720

我不是 100% 确定你在追求什么，我认为你应该与 Eloquents 方法建立关系。但是，如果您正在寻找一种方法来合并两个模型返回的数据，您可以执行以下操作：

```
$users = User::all();
$roles = Roles::all(); 

$array = array_merge($users->toArray(), $roles->toArray());
return Response::json($array); 
```

您可以进行模型调用，以便它们准确地返回您所追求的内容，然后将它们合并在一起。如果您希望一个模型返回特定的内容，只需为其创建一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T19:21:54.433

你需要使用类似的东西：

```
$user = User::get();
$roles = Roles::get();

$user .= (object) $roles; //because of that both them are object array and we have to combine them as object array... 
```

比您可以将数据传递给 View

```
return View:make('templatefile')//or Redirect to_route whatever
      ->with('user', $user); 
```

但在你的情况下，最好的方法是 belongs_to 。请阅读文档：

[http://laravel.com/docs/database/eloquent#relationships](http://laravel.com/docs/database/eloquent#relationships)

# jquery-ui - 如何为以前版本的 jqueryui 构建一个 jqueryui 主题

> ID：14606266
> 
> 赞同：0
> 
> 时间：2013-01-30T14:22:27.783
> 
> 标签：jquery-ui

在一个项目中，由于 jquery 版本（1.4），我不能使用 jqueryui 1.9

有没有办法为 jqueryui 1.8 构建自定义主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:25:08.533

您可以通过[http://ui-dev.jquery.com/themeroller/](http://ui-dev.jquery.com/themeroller/)访问它，您甚至可以在下载时为 1.7.3 构建主题。

# angularjs - 在重复中使用控制器，我需要一个指令吗？

> ID：14606267
> 
> 赞同：1
> 
> 时间：2013-01-30T14:22:29.297
> 
> 标签：angularjs

使用 ng-repeat 时，我应该如何在其中使用控制器？

例如，如果我在一周内循环一组天：

```
<ul ng-controller="WeekCtrl">
    <li ng-repeat="d in days">
        <span ng-controller="DayCtrl">
            {{dayOfWeek}} {{date}}: {{info}}
        </span>
    </li>
</ul> 
```

但我`DayCtrl`想知道今天是哪一天`d`，所以必须把它拉出范围：

```
app.controller('DayCtrl', function($scope){
  $scope.date = $scope.d.date;
  $scope.dayOfWeek = 
    ['Mon','Tue','Wed','Thr','Fri','Sat','Sun']
    [$scope.d.date.getDay()];
  $scope.info = '... extra info...';
}); 
```

但这会在显示器和控制器之间产生依赖关系。理想情况下，我想`d.date`作为一个论点传入。

我可以编写一个指令+控制器并`d.date`作为属性传入。但这意味着我必须编写更多内容并将当天的 html 移动到单独的模板中，并且我不打算在其他地方使用 DayCtrl。

或者，我可以尝试使用`<span ng-init="date=d.date">`，但再次感觉很脏。

这样做的正确方法是什么。

Plunker 上的完整示例代码：http://plnkr.co/edit/wUxNFSEGjcDN7KlOLYdv[显示](http://plnkr.co/edit/wUxNFSEGjcDN7KlOLYdv)了我在几天和几周内遇到的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:20:14.457

对我来说，这似乎是一个指令的工作，`d.date`指定为一个属性。
我不知道如何`info`填充，但您的指令可能不需要控制器。

当天的 HTML 不必在单独的/指令模板中，它可以保留在 HTML 中：

```
 <li ng-repeat="d in days">
    <day date="d.date">
       {{dayOfWeek}} {{date}}: {{info}}
    </day>
 </li> 
```

指示：

```
app.directive('day', function() {
  return {
    restrict: 'E',
    scope: { date: '=' },
    link: function(scope) {
     scope.dayOfWeek =  ['Mon','Tue','Wed','Thr','Fri','Sat','Sun'][scope.date.getDay()];
     scope.info = '... extra info...';
    }
  };
}); 
```

[普朗克](http://plnkr.co/edit/wnQanWa3DT2LsY02BT7X?p=preview)。

仅供参考，如果您想使用 ng-init，可以将其包含在 ng-controller 中：

```
<span ng-controller="DayCtrl" ng-init="date=d.date"> 
```

# wordpress - 父页面上的所有子类别

> ID：14606272
> 
> 赞同：1
> 
> 时间：2013-01-30T14:22:55.793
> 
> 标签：wordpress, parent, categories, children

在 Wordpress 中，我有一个这样的菜单；

```
1Parent category
-Sub category
-Sub category
  *Sub sub category 
  *Sub sub category
     **Product

2Parent category 2
-Products 
```

我想要以下东西；

当我单击父类别时，该页面必须在内容中显示他的所有子类别（孩子）。当父类别没有子类别时，他需要显示分配给该类别的帖子。这也与具有子（子）的子类别有关。

**其他说明：** 当我访问网站时，我需要选择一个主要类别。当我单击该类别时，他需要显示子类别，当我单击子类别时，他需要显示他的产品。或者当一个主要类别没有子类别时，他需要展示他的产品。

我希望你们理解它，并且你们现在有一个解决方案。谢谢！！

# blackberry - 在 Mac Osx 64 位上使用 Eclipse 在物理设备上测试黑莓应用程序

> ID：14606273
> 
> 赞同：1
> 
> 时间：2013-01-30T14:23:06.230
> 
> 标签：blackberry, blackberry-eclipse-plugin

我正在尝试在我的黑莓设备上测试我的黑莓应用程序。我收到此错误：

无法找到 RIMUsbJni.dll。如果没有此 dll，IDE 将无法连接到支持 USB 的手持设备。

我在 Mac Osx 64 位上使用带有 Blackberry Java 插件的 Eclipse。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T23:32:35.993

我在 Mac OS X Lion 上遇到了同样的问题。

我通过安装 BlackBerry Desktop Software 并用 Eclipse Mac OS X 32 位替换 Eclipse Mac OS X 64 位解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:01:45.410

在我的系统上，该文件存在于以下位置：

> ./Developer-old/Applications/BlackBerry/Indigo-1.5.2/configuration/org.eclipse.osgi/bundles/198/1/.cp/RIMUsbJni.dll

当然，`/Developer-old/Applications/`恰好是我选择安装它的根目录。这对你来说会有所不同。

但是，我[很难相信这个文件实际上应该在 Mac 机器上使用](https://superuser.com/a/228310/173252)：

```
$ cd /Developer-old/Applications/BlackBerry/Indigo-1.5.2/configuration/org.eclipse.osgi/bundles/198/1/.cp/
$ file RIMUsbJni.dll 
RIMUsbJni.dll: PE32 executable for MS Windows (DLL) (GUI) Intel 80386 32-bit 
```

我认为它只是作为 Windows 用户工具包的工件分发在插件中。

我不记得了，因为我为 BlackBerry 开发配置 Mac 已经有一段时间了，但我认为如果您没有正确的 Mac BlackBerry USB 驱动程序，可能会触发此错误。

您可以尝试安装[适用于 OS X 的 BlackBerry Desktop Software（美国链接）](http://us.blackberry.com/software/desktop/desktop-mac.html)，并确保您可以使用该应用程序与您的设备通信。如果这有效，并且您在 Eclipse 中仍然遇到相同的错误，我会尝试重新安装[最新的 BlackBerry Eclipse Plugin bundle](https://developer.blackberry.com/java/downloads/fetch/BlackBerry_JDE_PluginFull_2.0.0_indigo.zip)。

另外，[请参阅此 BlackBerry 链接](http://us.blackberry.com/sites/developers/resources/macdebug.html)

# jira - 无法通过 REST Api 在 JIRA 中创建问题

> ID：14606280
> 
> 赞同：2
> 
> 时间：2013-01-30T14:23:25.783
> 
> 标签：jira, jira-rest-java-api

我想通过 REST API 调用在 JIRA 中创建一个问题。我得到了一个示例代码和 JSON 文本。当我执行下面的代码时没有错误，但在 JIRA 中也没有创建任何问题。**我使用相同的 JSON 代码在 JIRA 中使用“CURL”命令创建问题。**但我未能使用下面的示例代码创建。任何人都请帮忙。

```
 String host = "localhost";
    int port = 8080;
    String userName = "admin";
    String password = "admin";
    DefaultHttpClient httpClient = new DefaultHttpClient();
    String jsonObj = "{\"fields\":" +
            "{\"project\":{\"key\": \"JAVA\"}," +
            "\"summary\":\"Creating issue in JIRA.\"," +
            "\"description\": \"Creating of an issue using project keys and issue type names using the REST API\", " +
            "\"issuetype\": {\"name\":\"Bug\"}}}";

    httpClient.getCredentialsProvider().setCredentials(new AuthScope(host, port), 
            new UsernamePasswordCredentials(userName, password));

    HttpPost httpPost = new HttpPost("http://localhost:8080/rest/api/2/issue/");
    StringEntity entity = new StringEntity(jsonObj);
    entity.setContentType("application/json");
    httpPost.setEntity(entity);
    HttpResponse httpResponse = httpClient.execute(httpPost);
    httpClient.getConnectionManager().shutdown(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-15T03:37:08.947

尝试使用此代码...

```
 String project ="JAVA";
    String summary ="your summary";
    String description ="your description";
    String issueType ="Bug";

 String jsonObj ="{\"fields\": { \"project\": { \"key\": " + "\"" + project + "\"}, "+
    "\"summary\": " + "\"" + summary + "\", "+
    "\"description\": " + "\"" + description + "\", "+
    "\"issuetype\": { \"name\": \"" + issueType + "\"}}} " 
```

# java - 从打开的会话中获取 GraphUser？

> ID：14606288
> 
> 赞同：0
> 
> 时间：2013-01-30T14:23:50.340
> 
> 标签：java, android, facebook

我正在使用新的 Android Facebook SDK 3.0。

我正在一个专用活动中实现登录按钮，该活动在登录过程之后具有带有用户详细信息的 GraphUser。

我想知道是否有任何方法可以在没有图形请求的情况下在另一个活动中获取 GraphUser 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:08:31.807

您可以使用 GraphUser 的 setter/getter 创建您自己的[Application](http://developer.android.com/reference/android/app/Application.html)子类，并在您的活动中调用 set/get，或者您可以执行以下操作：

```
JsonObject jsonObj = graphUser.getInnerJsonObject();
String jsonString = jsonObj.toString(); 
```

在调用者活动中，并将 jsonString 放入要在意图中传递的包中，然后在被调用者端执行以下操作：

```
String jsonString = bundle.getString("whatever_key_you_used");
JsonObject jsonObj = new JsonObject(jsonString);
GraphUser user = GraphObject.Factory.create(jsonObj, GraphUser.class); 
```

免责声明：我只是输入上面的内容，因此可能存在语法错误，您可能需要在`new JsonObject`.

# jmeter - 使用 JMeter 进行可用性测试

> ID：14606291
> 
> 赞同：0
> 
> 时间：2013-01-30T14:23:55.813
> 
> 标签：jmeter

我的目标是每 15 分钟向一个网站发送一个线程，其中包含一些操作（例如 intro、choose_language、search_term）。我将在哪里断言使用响应断言来检查站点是否可用。

是否可以从 JMeter 本身内部安排这样的 JMeter？是否可以使用任何计时器？我正在考虑使用 Windows 调度程序作为 B 计划来启动我的脚本。

我想我可以用线程组中的 Ramp-Up 来设置它。我的想法是：

*线程数（用户）：1*
*加速期（以秒为单位）：60*

这意味着每 60 秒将启动 1 个用户，但这似乎不是真的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:54:03.853

为了做你想做的事，你可以使用一个用户，并在（登录、介绍、搜索）末尾的调试采样器中添加一个持续 15 分钟的计时器。

您误解了rampup，因为只有1个用户，您设置的内容是无用的。有 15 个用户，这意味着在 60 分钟内启动这 15 个用户中的每一个，然后一旦启动就不再使用

# java - 如何为 Java 中的异常记录尽可能多的信息？

> ID：14606293
> 
> 赞同：73
> 
> 时间：2013-01-30T14:23:58.000
> 
> 标签：java, exception, logging, methods, stack-trace

在 Java 中记录异常时，我遇到过几次常见问题。似乎有各种不同的类型需要处理。例如，有些包装了其他异常，有些则根本没有消息——只有一个类型。

我见过的大多数代码都使用`getMessage()`或`toString(`) 来记录异常。但这些方法并不总能捕获查明问题所需的所有信息——其他方法，例如`getCause()`有时`getStackTrace()`提供附加信息。

例如，我现在在 Eclipse Inspect 窗口中查看的异常是`InvocationTargetException`. 异常本身没有原因，没有消息，没有堆栈跟踪......但是 getCause() 的目标是`InvalidUseOfMatchersException`，并填充了这些详细信息。

*所以我的问题是：给定任何*类型的异常作为输入，请提供一个方法，该方法将输出一个格式良好的字符串，其中包含有关异常的*所有*`getCause()`相关信息（例如，可能递归调用等等？）在发布之前，我几乎自己会尝试一下，但真的不想重新发明轮子-肯定以前做过很多次这样的事情......？

*请不要将我指向任何特定的日志记录或实用程序框架来执行此操作。我正在寻找代码片段而不是库，因为我无权在我正在处理的项目上添加外部依赖项，并且它实际上被记录到网页的一部分而不是文件中。如果是从这样的框架中复制代码片段（并对其进行归因），那很好:-)*

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-30T15:07:53.500

该[`java.util.logging`包在](http://docs.oracle.com/javase/8/docs/api/java/util/logging/package-summary.html)[Java SE](https://en.wikipedia.org/wiki/Java_Platform,_Standard_Edition)中是标准的。它[`Logger`](https://docs.oracle.com/javase/8/docs/api/java/util/logging/Logger.html)包括一个接受[`Throwable`](http://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html)对象的重载日志方法。它将为您记录异常的堆栈跟踪及其原因。

例如：

```
import java.util.logging.Level;
import java.util.logging.Logger;

[...]

Logger logger = Logger.getAnonymousLogger();
Exception e1 = new Exception();
Exception e2 = new Exception(e1);
logger.log(Level.SEVERE, "an exception was thrown", e2); 
```

将记录：

```
SEVERE: an exception was thrown
java.lang.Exception: java.lang.Exception
    at LogStacktrace.main(LogStacktrace.java:21)
Caused by: java.lang.Exception
    at LogStacktrace.main(LogStacktrace.java:20) 
```

顺便说一句，在内部，这完全符合@philipp-wendler 的建议。请参阅 的[源代码`SimpleFormatter.java`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/logging/SimpleFormatter.java?av=h#90)。这只是一个更高级别的接口。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-30T14:40:20.590

（以及每个异常）`printStacktrace()`提供的方法有什么问题？`Throwable`它显示了您请求的所有信息，包括根异常的类型、消息和堆栈跟踪以及所有（嵌套）原因。在 Java 7 中，它甚至会向您显示有关可能在 try-with-resources 语句中发生的“抑制”异常的信息。

当然，您不想写入`System.err`该方法的无参数版本所做的事情，因此请改用可用的重载之一。

特别是，如果您只想获取一个字符串：

```
 Exception e = ...
  StringWriter sw = new StringWriter();
  e.printStackTrace(new PrintWriter(sw));
  String exceptionDetails = sw.toString(); 
```

如果您碰巧使用了很棒的[Guava](http://code.google.com/p/guava-libraries/)库，它提供了一个实用方法来执行此操作：[`com.google.common.base.Throwables#getStackTraceAsString(Throwable)`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/Throwables.html#getStackTraceAsString-java.lang.Throwable-).

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-11-03T21:21:40.180

如果您使用 LogBack 或 SLF4J，这应该很简单。我这样做如下

```
//imports
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

//Initialize logger
Logger logger = LoggerFactory.getLogger(<classname>.class);
try {
   //try something
} catch(Exception e){
   //Actual logging of error
   logger.error("some message", e);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T14:42:44.517

我前段时间编写的日志记录脚本可能会有所帮助，尽管它不是您想要的。它的行为方式类似于 System.out.println，但包含有关 StackTrace 等**的更多**信息。它还为 Eclipse 提供可点击文本：

```
private static final SimpleDateFormat   extended    = new SimpleDateFormat( "dd MMM yyyy (HH:mm:ss) zz" );

public static java.util.logging.Logger initLogger(final String name) {
    final java.util.logging.Logger logger = java.util.logging.Logger.getLogger( name );
    try {

        Handler ch = new ConsoleHandler();
        logger.addHandler( ch );

        logger.setLevel( Level.ALL ); // Level selbst setzen

        logger.setUseParentHandlers( false );

        final java.util.logging.SimpleFormatter formatter = new SimpleFormatter() {

            @Override
            public synchronized String format(final LogRecord record) {
                StackTraceElement[] trace = new Throwable().getStackTrace();
                String clickable = "(" + trace[ 7 ].getFileName() + ":" + trace[ 7 ].getLineNumber() + ") ";
                /* Clickable text in Console. */

                for( int i = 8; i < trace.length; i++ ) {
                    /* 0 - 6 is the logging trace, 7 - x is the trace until log method was called */
                    if( trace[ i ].getFileName() == null )
                        continue;
                    clickable = "(" + trace[ i ].getFileName() + ":" + trace[ i ].getLineNumber() + ") -> " + clickable;
                }

                final String time = "<" + extended.format( new Date( record.getMillis() ) ) + "> ";

                StringBuilder level = new StringBuilder("[" + record.getLevel() + "] ");
                while( level.length() < 15 ) /* extend for tabby display */
                    level.append(" ");

                StringBuilder name = new StringBuilder(record.getLoggerName()).append(": ");
                while( name.length() < 15 ) /* extend for tabby display */
                    name.append(" ");

                String thread = Thread.currentThread().getName();
                if( thread.length() > 18 ) /* trim if too long */
                    thread = thread.substring( 0, 16 ) + "..."; 
                else {
                    StringBuilder sb = new StringBuilder(thread);
                    while( sb.length() < 18 ) /* extend for tabby display */
                        sb.append(" ");
                    thread = sb.insert( 0, "Thread " ).toString();
                }

                final String message = "\"" + record.getMessage() + "\" ";

                return level + time + thread + name + clickable + message + "\n";
            }
        };
        ch.setFormatter( formatter );
        ch.setLevel( Level.ALL );
    } catch( final SecurityException e ) {
        e.printStackTrace();
    }
    return logger;
} 
```

请注意此输出到控制台，您可以更改它，有关更多信息，请参阅[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/Logger.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/Logger.html)。

现在，以下可能会做你想要的。它将遍历 Throwable 的所有原因并将其保存在 String 中。请注意，这不使用`StringBuilder`，因此您可以通过更改它来优化。

```
Throwable e = ...
String detail = e.getClass().getName() + ": " + e.getMessage();
for( final StackTraceElement s : e.getStackTrace() )
    detail += "\n\t" + s.toString();
while( ( e = e.getCause() ) != null ) {
    detail += "\nCaused by: ";
    for( final StackTraceElement s : e.getStackTrace() )
        detail += "\n\t" + s.toString();
} 
```

问候，
丹尼尔

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-05T14:47:08.243

您还可以使用 Apache 的[ExceptionUtils。](https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/exception/ExceptionUtils.html)

例子：

```
import org.apache.commons.lang.exception.ExceptionUtils;
import org.apache.log4j.Logger;

public class Test {

    static Logger logger = Logger.getLogger(Test.class);

    public static void main(String[] args) {

        try{
            String[] avengers = null;
            System.out.println("Size: "+avengers.length);
        } catch (NullPointerException e){
            logger.info(ExceptionUtils.getFullStackTrace(e));
        }
    }

} 
```

控制台输出：

```
java.lang.NullPointerException
    at com.aimlessfist.avengers.ironman.Test.main(Test.java:11) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-27T20:34:04.863

我要做的是拥有一个处理所有异常的静态方法，并将日志添加到 JOptionPane 以将其显示给用户，但您可以将结果写入包含`FileWriter`在`BufeeredWriter`. 对于主要的静态方法，要捕获未捕获的异常，我会这样做：

```
SwingUtilities.invokeLater( new Runnable() {
    @Override
    public void run() {
        //Initializations...
    }
});

Thread.setDefaultUncaughtExceptionHandler( 
    new Thread.UncaughtExceptionHandler() {
        @Override
        public void uncaughtException( Thread t, Throwable ex ) {
            handleExceptions( ex, true );
        }
    }
); 
```

至于方法：

```
public static void handleExceptions( Throwable ex, boolean shutDown ) {
    JOptionPane.showMessageDialog( null,
        "A CRITICAL ERROR APPENED!\n",
        "SYSTEM FAIL",
        JOptionPane.ERROR_MESSAGE );

    StringBuilder sb = new StringBuilder(ex.toString());
    for (StackTraceElement ste : ex.getStackTrace()) {
        sb.append("\n\tat ").append(ste);
    }

    while( (ex = ex.getCause()) != null ) {
        sb.append("\n");
        for (StackTraceElement ste : ex.getStackTrace()) {
            sb.append("\n\tat ").append(ste);
        }
    }

    String trace = sb.toString();

    JOptionPane.showMessageDialog( null,
        "PLEASE SEND ME THIS ERROR SO THAT I CAN FIX IT. \n\n" + trace,
        "SYSTEM FAIL",
        JOptionPane.ERROR_MESSAGE);

    if( shutDown ) {
        Runtime.getRuntime().exit( 0 );
    }
} 
```

在你的情况下，你可以像我之前告诉你的那样写一个日志，而不是向用户“尖叫”：

```
String trace = sb.toString();

File file = new File("mylog.txt");
FileWriter myFileWriter = null;
BufferedWriter myBufferedWriter = null;

try {
    //with FileWriter(File file, boolean append) you can writer to 
    //the end of the file
    myFileWriter = new FileWriter( file, true );
    myBufferedWriter = new BufferedWriter( myFileWriter );

    myBufferedWriter.write( trace );
}
catch ( IOException ex1 ) {
    //Do as you want. Do you want to use recursive to handle 
    //this exception? I don't advise that. Trust me...
}
finally {
    try {
        myBufferedWriter.close();
    }
    catch ( IOException ex1 ) {
        //Idem...
    }

    try {
        myFileWriter.close();
    }
    catch ( IOException ex1 ) {
        //Idem...
    }
} 
```

我希望我有所帮助。

祝你今天过得愉快。:)

# android - 从 android 上的操作栏中删除图标/徽标

> ID：14606294
> 
> 赞同：147
> 
> 时间：2013-01-30T14:23:58.157
> 
> 标签：android, xml, android-layout, android-actionbar, titlebar

我一直在尝试找到某种从操作栏中删除图标/徽标的方法，但在搜索 SO、Android 的文档和 Google 一个小时后，我发现的唯一一件事就是如何完全删除标题栏。那不是我想要的。只想从标题栏中删除图标/徽标。

有谁知道如何做到这一点？最好我想在**XML**中执行此操作。

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2013-02-21T09:02:14.093

在您的操作栏样式中添加以下代码：

```
<item name="android:displayOptions">showHome|homeAsUp|showTitle</item>
<item name="displayOptions">showHome|homeAsUp|showTitle</item>
<item name="android:icon">@android:color/transparent</item> <!-- This does the magic! --> 
```

PS：我正在使用 Actionbar Sherlock，这很好用。

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2013-07-05T09:19:55.287

如果您不希望在特定活动中使用该图标。

```
getActionBar().setIcon(
   new ColorDrawable(getResources().getColor(android.R.color.transparent))); 
```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2014-04-10T21:12:24.997

如果你已经在你`android:logo="..."`的`<application>`标签中定义了`AndroidManifest.xml`，那么你需要使用这个东西来隐藏图标：

## v11 之前的主题

```
<item name="logo">@android:color/transparent</item> 
```

## v11 及以上主题

```
<item name="android:logo">@android:color/transparent</item> 
```

对我来说，这两种样式的使用正确地隐藏了 2.3 和 4.4 设备上的操作栏图标（此应用程序使用[AppCompat](https://developer.android.com/tools/support-library/features.html#v7-appcompat)）。

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2013-10-10T06:54:30.077

这对我有用

```
getActionBar().setDisplayShowHomeEnabled(false); 
```

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2014-03-20T14:23:38.667

打电话

```
mActionBar.setDisplayHomeAsUpEnabled(true); 
```

此外，

```
mActionBar.setDisplayShowHomeEnabled(false); 
```

将隐藏徽标但显示 Home As Up 图标。:)

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2013-12-11T10:32:02.463

意识到：

```
<item name="android:icon">@android:color/transparent</item> 
```

还将使您的选项项目透明。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2014-07-13T12:10:16.110

```
 //disable application icon from ActionBar
    getActionBar().setDisplayShowHomeEnabled(false);

    //disable application name from ActionBar
    getActionBar().setDisplayShowTitleEnabled(false); 
```

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2015-08-18T06:24:44.083

```
getActionBar().setIcon(android.R.color.transparent); 
```

这对我有用。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2015-02-28T12:38:28.280

使用以下方法删除或显示标题：

```
getActionBar().setDisplayShowTitleEnabled(true); 
```

使用以下方法删除或显示徽标：

```
getActionBar().setDisplayUseLogoEnabled(false); 
```

移除所有：

```
getActionBar().setDisplayShowHomeEnabled(false); 
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2015-03-18T18:21:34.757

您还可以在**AndroidManifest.xml**中添加以下代码。

```
android:icon="@android:color/transparent" 
```

它会正常工作。

但我发现这会带来问题，因为启动器图标也会变得透明。

所以我用：

```
getActionBar().setIcon(new ColorDrawable(getResources().getColor(android.R.color.transparent))); 
```

它工作得很好。

但是，如果您有多个活动并且想要使活动上的图标透明，那么前一种方法将起作用。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-06-30T10:09:56.603

我使用了它，它对我有用。

```
 getActionBar().setIcon(
        new ColorDrawable(getResources().getColor(android.R.color.transparent))); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-06-17T12:36:36.723

```
getActionBar().setIcon(new ColorDrawable(getResources().getColor(android.R.color.transparent)));
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-02-16T13:23:03.750

我认为确切的答案是：对于 api 11 或更高版本：

```
getActionBar().setDisplayShowHomeEnabled(false); 
```

否则：

```
getSupportActionBar().setDisplayShowHomeEnabled(false); 
```

（因为它需要一个支持库。）

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-10-07T10:25:11.403

转到您的清单并找到应用程序标签

```
 android:icon="@android:color/transparent"// simply add this on place of your icon 
```

………………

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-08-01T11:06:56.510

Qiqi Abaziz 的回答是好的，但我仍然努力让它与兼容包一起工作并将样式应用于正确的元素。此外，透明度黑客是不必要的。所以这是一个适用于 v8 及更高版本的完整示例：

**值\styles.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="MyActivityTheme" parent="@style/Theme.AppCompat">
        <item name="actionBarStyle">@style/NoLogoActionBar</item> <!-- pre-v11-compatibility -->
        <item name="android:actionBarStyle">@style/NoLogoActionBar</item>
    </style>
    <style name="NoLogoActionBar" parent="@style/Widget.AppCompat.ActionBar">
        <item name="displayOptions">showHome</item> <!-- pre-v11-compatibility -->
        <item name="android:displayOptions">showHome</item>
    </style>
</resources> 
```

**AndroidManifest.xml**（外壳）

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">   
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="19"/>
    <application android:theme="@android:style/Theme.Light.NoTitleBar">
        <activity android:theme="@style/PentActivityTheme"/>
    </application>
</manifest> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-09-25T12:16:08.193

进入您的清单并找到您的活动，然后添加以下代码：

```
android:theme="@android:style/Theme.NoTitleBar" 
```

上面的行隐藏你的`Actionbar`.

如果您需要其他功能，您可以使用 (CLR + SPC) 查看其他选项。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-03-28T10:02:20.943

最快的方法是修改您的 Manifest.xml。例如，如果您想删除活动“活动”的标志，并将标志留在其他活动中，您可以执行以下操作：

```
<activity
      android:name=".home.XActivity"
      android:logo="@android:color/transparent"
      android:configChanges="orientation|keyboardHidden" />
 <activity
      android:name=".home.HomeActivity"
      android:configChanges="orientation|keyboardHidden" /> 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-22T13:55:43.100

以上都没有奏效。

但这成功了：

```
override fun onCreate() {
    setContentView(R.layout.activity_main)

    setSupportActionBar(toolbar)
    toolbar.logo = null 
```

（从工具栏中删除图标）

# php - 类中的php回调函数未被调用

> ID：14606299
> 
> 赞同：1
> 
> 时间：2013-01-30T14:24:19.000
> 
> 标签：php, class, function, callback, gearman

给定这行代码来回调一个函数和回调函数本身：

```
Class MyClass {
    public function doThings() {
        $this->gearman->client->setCompleteCallback("workerCompleted");
    }

    public function workerCompleted() {
        echo "worker is completed!";
    }
} 
```

我明白了`Message: GearmanClient::setCompleteCallback(): function workerCompleted is not callable`

该`setCompleteCallback`方法需要引号中的函数名称，但是如何调用类方法？`$this->"workerCompleted"`显然是错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:25:47.047

```
$this->gearman->client->setCompleteCallback("workerCompleted"); 
```

应该

```
$this->gearman->client->setCompleteCallback( array( $this, "workerCompleted")); 
```

因为您正在指定一个成员函数的回调，它需要一个需要调用的对象（或类名）的数组以及函数的名称。[文档中的](http://www.php.net/manual/en/language.types.callable.php)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:22:40.640

也许您使用该`doBackground`功能将代码发送到 gearman 服务器？这确实不使用回调，因为根据定义，您不关心作业状态并导致您的应用程序代码。

# opencv - OpenCV：如何将 CV_8UC1 垫子转换为 CV_8UC3

> ID：14606302
> 
> 赞同：15
> 
> 时间：2013-01-30T14:24:39.293
> 
> 标签：opencv

如何使用 OpenCV 将 CV_8UC1 Mat 转换为 CV_8UC3？

```
Mat dst;
Mat src(height, width, CV_8UC1, (unsigned char*) captureClient->data());
src.convertTo(dst, CV_8UC3); 
```

但是 dst.channels() = 1

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-30T18:17:41.993

我发现最好的方法是：

```
cvtColor(src, dst, COLOR_GRAY2RGB); 
```

图像看起来与灰度 CV_8UC1 时相同，但它将是 CV_8UC3 类型的 3 通道图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-13T10:34:56.313

约定是，对于 type `CV_8UC3`，像素值范围从`0`to `255`，对于 type`CV_32FC3`从`0.0`to `1.0`。因此，您需要使用`255.0`, 而不是 的比例因子`1.0`：

```
Mat::convertTo(newImage, CV_32FC1, 255.0); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T16:33:36.650

来自convertTo的[文档](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html)

> > void Mat::convertTo(Mat& m, int rtype, double alpha=1, double beta=0) const
> > 
> > rtype - 所需的目标矩阵类型，或者更确切地说，深度**（因为通道数将与源相同）**。如果 rtype 为负数，则目标矩阵将与源矩阵具有相同的类型。

您想为要创建的 3 个通道中的每一个创建一个矩阵，然后使用合并功能。查看[这个](https://stackoverflow.com/questions/9970660/convert-1-channel-image-to-3-channel/13636230#13636230)问题的答案

# asp.net-mvc-3 - 多个淘汰赛绑定并共享它们

> ID：14606313
> 
> 赞同：1
> 
> 时间：2013-01-30T14:25:18.657
> 
> 标签：asp.net-mvc-3, knockout.js, sammy.js

所以我有一个场景，我的主页上有淘汰赛绑定。

索引.cshtml：

```
<div data-bind="foreach breadcrumbs">
<div>

<script>
 var IndexViewModel = function () {
    var self = this;
    self.breadcrumbs = ko.observableArray();
 };
 ko.applyBindings(IndexViewModel);
</script> 
```

以及在 Index.cshtml 中加载的局部视图。部分视图有自己的淘汰赛绑定：

```
<div id="someId">

</div>
<script>
  var PartialViewModel = function () {
        var self = this;
        self.someFunction = function(){
            // Access Breadcrumbs here
        };
  };
  ko.applyBindings(PartialViewModel, "someId");
</script> 
```

我想从第二个局部视图访问面包屑 observableArray 并向它们添加项目。我什至不确定这是否可能。请帮忙。我也在使用 sammy.js，但出于这个目的，它并不那么相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:31:43.110

我不喜欢视图模型之间必须有依赖关系，所以我之前使用了一个 jQuery pubsub 插件来允许视图模型以解耦的方式相互通信。你可以在[这个答案中看到一个例子](https://stackoverflow.com/questions/14555381/variable-dependency-with-knockoutjs/14559492#14559492)

基本上，当您更新面包屑时，使用新数组调用发布，另一个视图模型将订阅该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:44:27.447

一个简单的解决方案（**但不是很干净**）是将 indexViewModel 存储在全局变量中。

索引.cshtml：

```
 var IndexViewModel = function () {
    var self = this;
    self.breadcrumbs = ko.observableArray();
 };
 // we create a global variable here
 window.indexViewModel = new IndexViewModel();

 ko.applyBindings(window.indexViewModel); 
```

然后你可以从你的局部视图模型中访问这个 indexViewModel ：

```
 var PartialViewModel = function () {
        var self = this;
        self.someFunction = function(){
            // Access Breadcrumbs here
            // better use some wrapping functions 
            // instead of accessing the array directly
            window.indexViewModel.breadcrumbs.push({}); 
        };
  };
  ko.applyBindings(new PartialViewModel(), "someId");
</script> 
```

# jms - 骡 jms 连接器

> ID：14606314
> 
> 赞同：1
> 
> 时间：2013-01-30T14:25:19.417
> 
> 标签：jms, mule, endpoint

我是 Mule 和 JMS 的新手。只是想弄清楚如何使用连接器添加 JMS 端点。Mule 是否提供了任何 JMS 实现，或者我是否需要使用外部 JMS 提供程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-07T11:55:09.180

一个简单的例子是：-

```
<jms:activemq-connector name="Active_MQ" brokerURL="tcp://localhost:61616" validateConnections="true" doc:name="Active MQ"/> 
```

向队列发送消息：-

```
<flow name="JmsSendFlow" doc:name="JmsSendFlow" >
 <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8082" path="mainData" doc:name="HTTP"/>
 <set-payload value="Test Data" />
 <jms:outbound-endpoint queue="StudioOUT" connector-ref="Active_MQ" doc:name="JMS"/>
</flow> 
```

从队列接收消息：-

```
<flow name="JmsReceiveFlow" doc:name="JmsReceiveFlow" >
 <jms:inbound-endpoint queue="StudioOUT" connector-ref="Active_MQ1" exchange-pattern="one-way"/>
 <logger message="Message received#[message.payload]" level="INFO" doc:name="Logger"/>
</flow> 
```

有关 JMS 的更多信息：- [http://blogs.mulesoft.com/dev/newbie/mule-school-jms-tutorial/](http://blogs.mulesoft.com/dev/newbie/mule-school-jms-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:08:32.777

这是 Mule JMS 连接器的 ActiveMQ 使用指南。

Mule ActiveMQ 集成 [http://www.mulesoft.org/documentation/display/MULE3USER/ActiveMQ+Integration](http://www.mulesoft.org/documentation/display/MULE3USER/ActiveMQ+Integration)

这应该会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T09:43:33.727

拖出另一个 HTTP 连接器并将其放在画布中以创建新流。为流命名 postTopicMessageFlow。在 HTTP 属性视图中，将连接器配置设置为现有的 HTTP_Listener_Configuration。将路径设置为 /jms，将允许的方法设置为 GET。拖出另一个 JMS 连接器并将其放入流的流程部分。在 JMS 属性视图中，选择主题并将其设置为 jms 连接。将连接器配置设置为现有的 Active_MQ。如果您看到需要属性“操作”警告，请忽略它。在 HTTP 和 JMS 连接器端点之间添加一个 Set Payload 转换器。在 Set Payload Properties 视图中，将显示名称更改为 Set Message 并将值设置为消息查询参数。向 Set Payload 转换器添加断点。在 Set Payload 转换器之后添加一个属性转换器。在“属性”视图中，将显示名称更改为“设置名称”。选择设置属性并将名称设置为名称，并将值设置为您的名称。注意：如果您愿意，可以将其设置为查询参数。保存文件以重新部署应用程序并发出请求 [http://localhost:8081/jms?message=Hello](http://localhost:8081/jms?message=Hello)。查看控制台；您应该会看到您的姓名和信息以及您同学的姓名和信息。

# logging - 穷人使用 IDisposable 进行面向方面的编程和日志记录

> ID：14606320
> 
> 赞同：2
> 
> 时间：2013-01-30T14:25:46.953
> 
> 标签：logging, reflection, automation, aop, idisposable

我的项目中使用任何外部资源（数据库、Web 服务调用等）的每个方法都必须进行日志记录。问题是我最终得到了很多以某种方式重复的代码。句子看起来一样，但它们的参数发生了变化（即方法名称）。

这似乎是重构我的代码的一个很好的点。除了 AOP 库之外，我想知道如何至少避免使用魔术字符串并编写一次性对象并将方法主体包装在 using 语句中，如下所示：

```
public void LoggedMethod(int param)
{
    using (new AutoLog())
    {
        // do whatever needs to be done
    }
} 
```

我的`AutoLog`课程将是一次性的，它将在实例化和处置时编写一个日志调用。我知道我可能会（ab）`StackTrace`为此使用类，但是AFAIK这会大大减慢我的方法，因为这个特定的类非常缓慢。

我的日志条目应该是（当然所有这些都包含方法名称）：

*   方法调用的开始
*   方法调用结束
*   （可选）方法参数 - 当然是序列化的（JSON？）
*   （可选）执行时间

## 问题

我应该如何实现我的`AutoLog`课程以尽可能快地工作？如果我还可以读取方法参数，那就更好了，这样我就可以序列化它们并记录它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:28:06.880

> 我的项目中使用任何外部资源（数据库、Web 服务调用等）的每个方法都必须进行日志记录

我简直不敢相信。您可能[记录了太多](https://stackoverflow.com/a/9915056/264697)。

> 句子看起来一样，但它们的参数发生了变化（即方法名称）。

在这种情况下，您可能在代码中遗漏了一些通用抽象。根据我的经验，您应该：

***对架构上高度相关的代码有一个通用的抽象。***

例如，看看[这篇关于命令处理程序](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)的文章和这篇关于[存储库和自定义查询](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)的文章。两篇文章都围绕架构概念定义了一个通用接口。（您可能应该至少阅读第一篇文章，以了解我的其余答案）。

使用通用接口，可以很容易地用装饰器包装一整套相关操作。以这个装饰器为例，它可以包裹所有执行用例的操作：

```
public class LoggingCommandHandlerDecorator<TCommand>
    : ICommandHandler<TCommand>
{
    private readonly ICommandHandler<TCommand> decoratee;
    private readonly ILogger logger;

    public LoggingCommandHandlerDecorator(
        ICommandHandler<TCommand> decoratee,
        ILogger logger)
    {
        this.decoratee = decoratee;
        this.logger = logger;
    }

    void ICommandHandler<TCommand>.Handle(TCommand command)
    {
        using (new AutoLog())
        {
            this.decoratee.Handle(command);
        }
    }
} 
```

> 我应该如何实现我的 AutoLog 类以尽可能快地工作？

你知道吗，装饰器只是一个薄薄的包装器，几乎没有开销。使用这种方法，您通常拥有的所有方法参数现在都打包在一个对象中。这对于日志记录非常方便，因为您可以简单地将整个序列化为`TCommand`XML、JSon 或更易读的格式，并且您只需编写此代码一次。

并且由于您担心性能，因为这`LoggingCommandHandlerDecorator<TCommand>`是一个泛型类型，您可以做的是向该类型添加一个静态构造函数（静态构造函数在该接口的每个封闭泛型版本运行一次）并预编译一些代码，以便您有效地序列化该命令消息。绝对没有什么可以与之竞争的。甚至 AOP 框架在访问方法的参数时也使用反射并使用装箱构建动态数组。

请注意，像这样应用装饰器并没有什么“穷人的”。但是，当您的架构不遵循[SOLID](https://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则时，当您尝试这样做时，您很快就会遇到麻烦。这些原则是获得灵活且可维护的软件的关键。

# iis-7 - ASP.NET MVC4 仅在 IIS7 上显示 @RenderBody 内容

> ID：14606322
> 
> 赞同：1
> 
> 时间：2013-01-30T14:25:49.820
> 
> 标签：iis-7, asp.net-mvc-4

**ASP.NET MVC4 仅在 IIS7 上显示 @RenderBody 内容**

设置：我有一个运行 Windows 7 的 VM，我在其上安装了带有 Web 平台安装程序的 IIS7、MVC3 和 MVC4。我使用 .NET 4.0 应用程序池在 IIS 中添加了一个新网站，然后使用 Visual Studio 2012 发布选项将 MVC4 Web 应用程序发布到网站的根目录。

问题是我得到的唯一输出是各个视图中的任何内容。没有布局，除了 @RenderBody 内容。

当我使用 Visual Studio 预览它时，它工作正常。

这是我的 _Layout.cshtml：

```
 <!DOCTYPE html>
    <!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
    <!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
    <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <title>@ViewBag.Title</title>
        <link rel="shortcut icon" type="image/x-icon" href="~/favicon.ico">

        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
    </head>
    <body>
        <!-- this is decorative -->
        <div class="topbar"></div>

        <div class="row header">
            <div class="five columns logo">            
                <a href="@Url.Action("Index", "Home")">
                    <img src="@Url.Content("~/Content/images/logo.png")">
                </a>
            </div>
            <div class="seven columns nav">
                @Html.Partial("_TopNavigationPartial")
            </div>
        </div>

        @RenderBody()

        <div class="row">
            <div class="twelve columns box-padding">
                <div class="box">
                    <div class="row footer">
                        <div class="six columns copyright">&copy; 2013 snip.</div>
                        <div class="six columns nav">
                            @Html.Partial("_BottomNavigationPartial")
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @Scripts.Render("~/bundles/jquery")
        @RenderSection("scripts", required: false)     
    </body>
    </html> 
```

将输出的只是视图中的内容，例如：

```
 <div class="row">
        <div class="twelve columns box-padding">
            <div class="box">
                <h1>Home</h1>
                <p>You are here: Home/Index</p>
            </div>
        </div>
    </div> 
```

有人知道为什么会这样吗？

可能只是我没有正确设置IIS7。

**编辑：**我刚刚上传了`Internet application`它，它做了完全相同的事情。仅输出视图内容。所以它绝对是 IIS 中的东西。

**编辑 2：**我在 IIS 中设置了`Internet application`一个应用程序，但它仍然只返回视图内容。奇怪的。

**编辑3：**得到它的工作，不知道如何。[http://i.imgur.com/ZpKb4P5.gif](http://i.imgur.com/ZpKb4P5.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:55:58.537

设法解决了这个问题。不确定到底是什么问题，但我正在创建一个新网站，然后将发布的文件拖入其中，但无法正常工作。

然后我向默认网站添加了一个应用程序，该应用程序有效，但后来我发现[这篇文章](https://stackoverflow.com/a/1446741/1138620)解释了默认网站本身就是一个应用程序。

所以最后我只是将发布的文件复制到默认的根目录中，它就可以工作了。

# javascript - 无法让 jQuery 切换脚本在 jQuery 对话框中运行

> ID：14606325
> 
> 赞同：0
> 
> 时间：2013-01-30T14:25:56.470
> 
> 标签：javascript, jquery, dialog

我有一个使用该`jQuery` `toggle`功能打开和关闭子菜单的菜单。这在我的所有页面中都运行良好，但是，当我尝试将相同的菜单和子菜单添加到 a`jQuery` `dialog box`时，它不会打开子菜单。

这是我的`index.php`代码，包括页面中的`javascript`包含`<head>`：

```
<script src="javascripts/jq/jquery-1.4.2.min.js"></script>
<script src="javascripts/jq/jquery-v1.8.3.js"></script>
<script src="javascripts/jq/jquery-v1.9.2.js"></script>

<p align="center" id="temp_menuOpener">[Click Here to Toggle Menu]</p>

<div id="temp_menu">
    <table cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td class="ui-corner-bl ui-corner-br cus-dialog-content"><?php include("includes/menu.php");?></td>
        </tr>
    </table>
</div>

<script>
    $( "#temp_menu" ).dialog({ autoOpen: false, width: 'inherit'});
    $( "#temp_menuOpener" ).click(function() {
    $( "#temp_menu" ).dialog( "open" );
    });
</script> 
```

这是我的`menu.php`代码：

```
<script>
$(function()
    {
    $('.schedOpener').click(function()
        {
        $('div#submenu_sched').toggle();
        });
    });
</script>

<div id="menu">
    <div class="menu schedOpener">
    <img src="/roster/images/menu/schedule.png" border="0" title="Schedule" alt="Schedule">
    </div>

    <div id="submenu_sched">
        <div class="menu">
        <a href="/roster/sched/sched_month.php" target="_parent"><img src="/roster/images/menu/sched_month.png" border="0" title="Schedule Month View" alt="Schedule Month View"></a>
        </div>
    </div>

</div> 
```

的 CSS`submenu_sched`设置为`display:none;`.

所以，就像我说的，这个菜单完美地工作，直到它被添加到 a`dialog box`然后它失败了。只需`id="temp_menu"`从. `<div>`_`dialog box`

`dialog box`我尝试将它添加到 jsfiddle，但即使我选择了`jQuery 1.8.3`库框架，我也无法让它工作。因此，我将其设置在我的测试服务器上，以便您至少可以明白我的意思。您会注意到在我的测试服务器上，菜单和页面本身比我在这里发布的要多。我试图将静噪比保持在一个良好的水平:)

[岩土石](http://www.iwactite.com/test)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:34:37.640

好吧，在 jsFiddle 上玩了一段时间后，我已经解决了所有问题。首先，JavaScript 不应该在对话框内。其次，您必须使用`($("#temp_menu").dialog("isOpen") == true) ? $("#temp_menu").dialog("close") : $("#temp_menu").dialog("open");`来比较是打开还是关闭对话框。

这是我的工作[jsFiddle](http://jsfiddle.net/GrahamWalters/uVVES/) ，这是全屏版本[jsFiddle](http://jsfiddle.net/GrahamWalters/uVVES/embedded/result/)。

# powershell - 使用方括号重命名文件在 Powershell 中无法按预期工作

> ID：14606326
> 
> 赞同：0
> 
> 时间：2013-01-30T14:25:57.760
> 
> 标签：powershell, rename, file-rename

我已经在这个问题上工作了一周，并且认为我遗漏了一些明显的东西......我需要几双眼睛。

从[这个问题](https://stackoverflow.com/questions/14259317/when-renaming-a-file-with-powershell-how-do-i-handle-filenames-with)开始，我研究了答案中提供的所有链接，并且我正在运行从 MS Connect 收集的以下脚本：

```
$txtPath = "c:\users\xxxxxx\desktop\cgc\tx"
$txtPath2 = "c:\users\xxxxxx\desktop\cgc\tx2"
get-childitem $txtPath | foreach {  
    Move-Item -literalpath $txtPath2.Name $_.Name.Replace ("]" | "[", "_") 
} 
```

两条路径都存在。*\tx 包含 35 个 *.txt 文件，有些名称中带有方括号，有些没有。*\tx2 当前为空，等待脚本的输出文件。

如果我正确地编写了第三个语句，我会将每个子项从 \tx 传递给函数，在该函数中，当文件被移动并重新保存到新位置 \tx2 时，方括号将更改为下划线。

不幸的是，我收到此错误：

```
Expressions are only allowed as the first element of a pipeline.
At C:\users\xxxxxx\desktop\cgc\rni.ps1:4 char:71
+     Move-Item -literalpath $txtPath2.Name $_.Name.Replace ("]" | "[", "_" <<<< )
    + CategoryInfo          : ParserError: (:) [], ParseException
    + FullyQualifiedErrorId : ExpressionsMustBeFirstInPipeline 
```

如果我正确地解释了错误，那么某些东西会阻止近距离的括号被识别。我是否需要某种转义字符作为括号？我尝试在引号内使用反引号转义和反斜杠转义，但这导致了同样的错误。

随着引号外的转义，我得到了这个错误。

```
The term '\]' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling
 of the name, or if a path was included, verify that the path is correct and try again.
At C:\users\xxxxxx\desktop\cgc\rni.ps1:4 char:61
+     Move-Item -literalpath $txtPath2.Name $_.Name.Replace (\"]" <<<<  | \"[", "_")
    + CategoryInfo          : ObjectNotFound: (\]:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:42:51.533

# javascript - 如何在 Google Site Search / Custom Search v2 中指定 as_sitesearch？

> ID：14606329
> 
> 赞同：2
> 
> 时间：2013-01-30T14:26:01.147
> 
> 标签：javascript, google-custom-search

我有一个 Google 自定义搜索（将来会是一个站点搜索），我想使用 Google 提供的代码段：

```
<script>
  (function() {
    var cx = '...';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>

<gcse:search></gcse:search> 
```

我需要将其限制为某些网址。使用xml api时，可以使用参数as_sitesearch来指定这个过滤器。有没有办法用上面的代码做到这一点？

有了这个，我现在可以在加载搜索之前访问 google.search.cse 对象.. 但我仍然不知道参数：

```
<script>

var myCallback = function() {
  if (document.readyState == 'complete') {
    // Document is ready when CSE element is initialized.
    // Render an element with both search box and search results in div with id 'test'.
    google.search.cse.element.render(
        {
          div: "test",
          tag: 'search'
         });
  } else {
    // Document is not ready yet, when CSE element is initialized.
    google.setOnLoadCallback(function() {
       // Render an element with both search box and search results in div with id 'test'.
        google.search.cse.element.render(
            {
              div: "test",
              tag: 'search'
            });
    }, true);
  }
};

// Insert it before the CSE code snippet so that cse.js can take the script
// parameters, like parsetags, callbacks.
window.__gcse = {
  parsetags: 'explicit',
  callback: myCallback
};

  (function() {

    var cx = '007407192365638902354:eyxoavi7oa0';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>

<style>
.gsc-control-cse * {
box-sizing:content-box;
}
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T15:55:18.860

我也有同样的问题。我能够将搜索限制在 Google Site Search 版本 2 中的特定文件夹的唯一方法是将其硬编码到元素中：

```
<gcse:search as_sitesearch="www.mydomain.com/site1"></gcse:search> 
```

如果有一种方法可以通过 JavaScript 添加 as_sitesearch，就像版本 1 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:29:21.760

是的你可以。

在搜索表单中使用隐藏字段：

```
<input type="hidden" name="as_sitesearch" value="your_url_here/directory"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-16T23:15:52.337

限制某些网址：

```
 <gcse:searchbox-only as_sitesearch="mydomain.com" resultsUrl="http://mydomain.com/search-results/" enableAutoComplete="false"></gcse:searchbox-only> 
```

请务必将 mydomain.com 替换为您要限制的相应域。

# java - 使Java中新创建的文件在写入时也不可读

> ID：14606330
> 
> 赞同：0
> 
> 时间：2013-01-30T14:26:04.630
> 
> 标签：java, linux, permissions

您好，我正在使用 java 中的 File 类来编写一个包含超过 100,000 行信息的 txt 文件。我在fedora linux上。在写入文件时，我不希望在完全完成之前允许读取它。

我认为在写入文件之前设置 setReadable(false) 然后最后将其设置为 true 会起作用，但没有人知道我如何正确地做到这一点

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:28:58.597

使用 .tmp 扩展名编写它，然后在完成后将其移动/重命名为真正的扩展名

```
final File file = new File(filename + ".tmp");

// code to save the text to the file

file.renameTo(new File(filename+ ".txt")) 
```

.renameTo 是 linux 上的原子操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:30:17.083

您应该使用[来自 Apache 的事务来](http://commons.apache.org/transaction/)实现它。它允许您在单个事务中写入文件。在您提交之前，您的基本文件甚至都不存在

但你也可以独自完成。将您的文件写入其他位置并在完成后将其移动

# sharepoint - 如何在 SPDesigner 中使用 X-Path 表达式/XSLT 按月分组

> ID：14606335
> 
> 赞同：0
> 
> 时间：2013-01-30T14:26:17.090
> 
> 标签：sharepoint, xslt, xpath, sharepoint-designer

我在 SharePoint 列表上进行了 3 路分组。有一个月份列，这是其中的第三级分组。即使我在设计器中检查了月份列的“升序”，它仍然不能正确地对月份列进行排序。注意：月份是 SharePoint 中基于创建日期计算的计算列，为“MMM”。我试图编辑一个月的排序表达式，但我对此一无所知。请帮助我这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:50:49.240

如果您的列表中有一个 Date 列，其基础值的格式为 yyyy-MM-dd，并且您可以在过滤对话框中使用 XPath 表达式，那么您可以对公式进行排序（在用实际列名替换日期）：

```
substring(Date, 6, 2) 
```

这将按日期的数字月份部分排序。

能够对 Month 字段进行排序的另一种选择是对以下公式的值进行排序：

```
string-length(substring-before('JanFebMarAprMayJunJulAugSepOctNovDec', Month)) + 100 
```

如果该`Month`列的实际值与“Jan”、“Feb”等不同，请相应调整。

最后一个选项是添加一个带有月份数值的月份列，然后对其进行排序。

# mysql - SQL Server 和 MySQL

> ID：14606338
> 
> 赞同：0
> 
> 时间：2013-01-30T14:26:39.577
> 
> 标签：mysql, sql-server-2005

我正在尝试从 MS SQL Server 2005 表中获取数据并将其插入到链接的 MySQL 表中，我的查询如下但它不起作用。我不断收到“查询执行成功，0 行受影响”。任何帮助将不胜感激！

```
INSERT INTO OPENQUERY(WEBSITE, 'SELECT SalesID,Cust,OrderDate,PONum,PartNo,QTY,PartDesc,DiscPct,DueDate,ShipCity,ShipSt,OrderStatus,InvoiceNo,InvDate,OrderTotal FROM orders')
SELECT Orders.SalesID, Orders.CustDesc, Orders.DateEnt, Orders.PONum, OrderDet.PartNo, OrderDet.QtyOrdered, OrderDet.PartDesc, OrderDet.DiscPct, OrderDet.DueDate, Orders.ShipCity, Orders.ShipSt, OrderDet.Status, BillingDet.InvoiceNo, Billing.InvDate, Orders.OrderTotal
FROM Orders INNER JOIN OrderDet ON (Orders.OrderNo = OrderDet.OrderNo)
LEFT JOIN BillingDet ON (Orders.PONum = BillingDet.PONum)
LEFT JOIN Billing ON (BillingDET.InvoiceNo = Billing.InvoiceNo)
WHERE OrderDet.PartNo LIKE '%^%' AND Orders.DateEnt >='2011/12/31' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:32:18.520

假设你想插入`WEBSITE...orders`试试这个：

```
INSERT  INTO WEBSITE...orders
        (
          SalesID,
          Cust,
          OrderDate,
          PONum,
          PartNo,
          QTY,
          PartDesc,
          DiscPct,
          DueDate,
          ShipCity,
          ShipSt,
          OrderStatus,
          InvoiceNo,
          InvDate,
          OrderTotal
        )
        SELECT  Orders.SalesID,
                Orders.CustDesc,
                Orders.DateEnt,
                Orders.PONum,
                OrderDet.PartNo,
                OrderDet.QtyOrdered,
                OrderDet.PartDesc,
                OrderDet.DiscPct,
                OrderDet.DueDate,
                Orders.ShipCity,
                Orders.ShipSt,
                OrderDet.Status,
                BillingDet.InvoiceNo,
                Billing.InvDate,
                Orders.OrderTotal
        FROM    Orders
        INNER JOIN OrderDet
                ON ( Orders.OrderNo = OrderDet.OrderNo )
        LEFT JOIN BillingDet
                ON ( Orders.PONum = BillingDet.PONum )
        LEFT JOIN Billing
                ON ( BillingDET.InvoiceNo = Billing.InvoiceNo )
        WHERE   OrderDet.PartNo LIKE '%^%'
                AND Orders.DateEnt >= '2011/12/31' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:31:47.113

尝试这个：

```
INSERT INTO WEBSITE...orders(SalesID, Cust, OrderDate, PONum, PartNo, QTY, PartDesc, DiscPct, DueDate,
ShipCity, ShipSt, OrderStatus, InvoiceNo, InvDate, OrderTotal)
SELECT O.SalesID, O.CustDesc, O.DateEnt, O.PONum, OrderDet.PartNo,
OrderDet.QtyOrdered, OrderDet.PartDesc, OrderDet.DiscPct, OrderDet.DueDate,
O.ShipCity, O.ShipSt, OD.Status, BD.InvoiceNo, B.InvDate,
O.OrderTotal
FROM Orders O
    INNER JOIN OrderDet OD
        ON (O.OrderNo = OD.OrderNo)
    LEFT JOIN BillingDet BD
        ON (O.PONum = BD.PONum)
    LEFT JOIN Billing B
        ON (BD.InvoiceNo = B.InvoiceNo)
WHERE OD.PartNo LIKE '%^%'
    AND O.DateEnt >='2011/12/31' 
```

# php - WordPress 自定义帖子

> ID：14606340
> 
> 赞同：-1
> 
> 时间：2013-01-30T14:26:45.317
> 
> 标签：php, wordpress

我正在尝试在 Wordpress 中的模板代码中创建自定义帖子。

```
 <div class="demo">     
<?php global $user_ID;
$new_post = array(
'post_title' => 'My New Post',
'post_content' => 'Lorem ipsum dolor sit amet...',
'post_status' => 'publish',
'post_date' => date('Y-m-d H:i:s'),
'post_author' => $user_ID,
'post_type' => 'post',
'post_category' => array(0)
);
$post_id = wp_insert_post($new_post); ?>
</div> 
```

这似乎没有在页面上显示帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:31:12.823

```
 <div class="demo">     
<?php global $user_ID;
$new_post = array(
'post_title' => 'My New Post',
'post_content' => 'Lorem ipsum dolor sit amet...',
'post_status' => 'publish',
'post_date' => date('Y-m-d H:i:s'),
'post_author' => $user_ID,
'post_type' => 'post',
'post_category' => array(0)
);
$post_id = wp_insert_post($new_post); ?> 
```

上面的代码所做的是插入一个新帖子。[阅读更多](http://codex.wordpress.org/Function_Reference/wp_insert_post)

> 这似乎没有在页面上显示帖子？

您在这里尝试做的是插入一个新帖子。如果您希望显示该帖子，请尝试以下代码

```
<?php get_post( $post_id ); ?> 
```

[阅读更多](http://codex.wordpress.org/Function_Reference/get_post)

# coldfusion - cfapplication 变量和错误

> ID：14606342
> 
> 赞同：0
> 
> 时间：2013-01-30T14:26:56.080
> 
> 标签：coldfusion

我刚刚开始 ColdFusion 开发，并且一直在创建一个`cfapplication`存储变量的变量，以便以后使用。导师为我们提供的所有内容如下：

> “创建您自己的 'Application.cfm' 并将其保存在您的 'hello world' 示例旁边的根文件夹中。”

到目前为止我有这个

```
<CFAPPLICATION 
    name=“mySite” 
    sessionmanagement=“yes” 
    clientmanagement=“yes”
    setclientcookies=“yes”&gt; 
```

我想添加一条变量消息，上面写着“hello world”。但我不知道该怎么做。我一直在网上搜索，但找不到任何帮助。我也收到以下消息，但没有找到解决该问题的帮助：

> “SESSIONMANAGEMENT 属性的值无效。该值不能转换为布尔值，因为它不是简单值。简单值是布尔值、数字、字符串和日期时间值。”

如果有人可以帮助我解决这些问题，那就太好了，或者如果您可以为我指出一些更好的 ColdFusion 教程的方向，那就更好了。遗憾的是，周围没有很多像样的 ColdFusion 教程来解释发生了什么。感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:33:58.933

设置变量的语法是：

```
 <cfset application.message = "Hello World"> 
```

您的错误可能是由代码中的大引号引起的。

# jquery - 我在表格中的复选框立即未选中

> ID：14606344
> 
> 赞同：4
> 
> 时间：2013-01-30T14:27:04.143
> 
> 标签：jquery, checkbox, jquery-events, event-delegation

我有一张带复选框的桌子。当一个复选框被选中时，我会用 jQuery 捕获事件，但这个复选框会立即取消选中。

jsfiddle：http: [//jsfiddle.net/K4uDa](http://jsfiddle.net/K4uDa)

```
<table>
  <tr>
    <td><input type='checkbox' /></td><td>AA</td>
  </tr>
  <tr>
    <td><input type='checkbox' /></td><td>BB</td>
  </tr>
  <tr>
    <td><input type='checkbox' /></td><td>CC</td>
  </tr>    
</table>

$(function() {

  $("table tr").live("click", function() {
    alert('row clicked');
  });

  $("table tr td input:checkbox").live("click", function() {
   alert('checked/unchecked'); 
   return false;
  });

}) 
```

问题出在哪里？

抱歉，我在这里更新了我的 jsfiddle：http: [//jsfiddle.net/K4uDa/1/](http://jsfiddle.net/K4uDa/1/)

我添加了一个'return false'，因为我不希望在选中/取消选中复选框时触发其他事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:49:16.337

工作方式`return false`是通过组合`event.preventDefault()`（顾名思义，它可以防止偶数的默认操作，例如取消/选中复选框，点击链接或提交表单......）和`event.stopPropagation()`（这是阻止事件传播到/被其祖先元素“听到”）。IE 的做法略有不同，但实际上您希望在放弃传播的同时保留默认操作（取消/检查）。所以，考虑到这一点，我建议：

```
$('input:checkbox').click(function(e){
    e.stopPropagation();
    alert(this.checked);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/K4uDa/14/)。

顺便说一句，值得指出的`live()`是，在 jQuery 1.7 及更高版本中已弃用（由`on()`方法替换），在 jQuery 1.7 之前的版本中，文档（for `live()`）建议使用`delegate()`。

但是鉴于您将事件直接绑定到元素本身，这表明它们*不是*动态添加的，您也可以直接使用该`click()`方法。

参考：

*   [`click()`](http://api.jquery.com/click/).
*   [`delegate()`](http://api.jquery.com/delegate/).
*   [`event.preventDefault()`](http://api.jquery.com/event.preventDefault/).
*   [`event.stopPropagation()`](http://api.jquery.com/event.stopPropagation).
*   [`live()`](http://api.jquery.com/live/).
*   [`on()`](http://api.jquery.com/on/).
*   [`window.event.cancelBubble`（在 MSDN）](http://msdn.microsoft.com/en-gb/library/ie/ms533545%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T14:50:58.300

而不是`return false`，您应该使用[`event.stopPropagation();`](http://api.jquery.com/event.stopPropagation/). `return false`，除了停止传播（这是您想要的）之外，[还可以防止事件触发的默认操作](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)，因此您的复选框将不会被选中。

此外，`live()`已弃用，因此请使用[`.on()`](http://api.jquery.com/on/)（或`delegate()`<1.7）。

```
$("table tr td").on("click", "input:checkbox", function(e) {
    alert('checked/unchecked'); 
    e.stopPropagation();
}); 
```

[jsFiddle 演示](http://jsfiddle.net/K4uDa/19/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:40:24.643

编辑 - 您需要通过使用`event.stopPropagation()`而不是阻止事件冒泡`return false`

[http://jsfiddle.net/K4uDa/16/](http://jsfiddle.net/K4uDa/16/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:38:51.193

这是因为`return false`它停止检查复选框。

# asp.net - 在 VS2012 中更新引用项目程序集中的源文件 - 一个错误？

> ID：14606346
> 
> 赞同：1
> 
> 时间：2013-01-30T14:27:10.550
> 
> 标签：asp.net, reference, visual-studio-2012, .net-assembly

在一个网站中，我引用了一个类库程序集。当我向源代码添加一些内容并构建解决方案时，更新不会反映到网站的 bin 文件夹中。我首先认为 dll 刷新不起作用，因此我的 bin 文件夹中的 dll 没有更新到最新版本。但后来我发现了两件看起来很奇怪的事情：

1.  我有一个公共结构，里面是公共常量字符串字段的数量。如果我更改任何这些字段的名称并构建解决方案，则更改不会反映在网站端。但是，如果我选择该字段名称，右键单击它并选择“将旧名称重命名为新名称”然后构建，它就可以工作。
2.  当我添加另一个公共 const 字符串字段并构建解决方案时，更新不会得到反映。

这是 VS2012 的已知错误还是预期的功能？我可以理解第一种情况。但是第二种情况绝对似乎是一个错误，没有什么比预期的功能更重要。在将此作为错误报告给 VS 团队之前，我想与 SO 进行核对。

我以前在 Visual Studio 2010 终极版中没有遇到过这个问题。我目前使用的是 Visual Studio 2012 Ultimate

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:14:11.473

这绝对似乎是一个错误。我已经向 Visual Studio 团队报告了这一点。但是对于那些遭受此错误的人，我有一个解决方案，直到错误被修复。

1.  从 bin 文件夹中删除引用。（x.dll、x.pdb、x.dll.refresh 和 x.XML 文件，其中 x 是引用项目的名称。）
2.  选择您的网站或项目，右键单击并单击添加引用
3.  这是有所作为的部分。在左侧窗格中选择解决方案||项目。如果要引用的项目不在中间窗格的列表中，请单击窗口右下方的“浏览”并导航到该项目，它将出现在列表中。选中该框并单击“确定”。我曾经选择浏览（不是解决方案||项目）并直接引用 dll 文件。您会注意到第一个（工作）选项是缺少 x.dll.refresh 文件。我知道这听起来很奇怪，但我不知道当这个文件丢失时如何以及为什么更新引用的 dll。

# c# - 从 (aspx.cs) 获取 jQuery(aspx) 中的 var

> ID：14606347
> 
> 赞同：1
> 
> 时间：2013-01-30T14:27:10.863
> 
> 标签：c#, asp.net, webforms

我在 aspx(html) 上有这个功能

```
<body onload="NewPage2()">
<script type="text/javascript">
    function NewPage2() {
            var url = getUrlVars(url);
            document.getElementById("HiddenField1").Value = url["access_token"];
        }
</script>
    <div class = content>
        <form id="form1" runat="server">
         <asp:HiddenField id="HiddenField1" runat="server" Value=""/>
         </form>
        CODE1: <asp:Label ID="Label1" runat="server" Text="Label" ForeColor="#CC0000" />
        </div>
    </div>
</body> 
```

如何将 var(on jquery(html)) 获取到我在 aspx.cs 中的 variableURL2？

```
protected void Page_Load(object sender, EventArgs e)
{
    string code = HiddenField1.Value;

    Label1.Text = code;

    saveToken(token, code);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:33:07.933

在 .aspx 页面中有一个服务器隐藏控件

```
<asp:HiddenField Id="HiddenField1" runat="server"></asp:HiddenField> 
```

在浏览器中它会像这样呈现

```
<input type="hidden" id="HiddenField1" /> 
```

从 javascript 赋值

```
document.getElementById("HiddenField1").value = "your values here"; 
```

在 aspx.cs 中像这样渲染

```
 string variableURL2 =   HiddenField1.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:35:10.630

有两种方法可以做到这一点，并且都必须来自回发，因为 javascript 在页面加载后被触发。

重定向并附加到查询字符串，然后从 c# 中读取它

javascript: location.href = "/mypage.aspx?variable2=VARFROMJAVASCRIPT";

c# string variable2 = Request.QueryString["variable2"];

或将值设置为像上面一样的隐藏字段

javascript: var $hiddenInput = $('',{type:'hidden',id:'variable2',value:'VARFROMJAVASCRIPT'}); $hiddenInput.appendTo('body');

c# string variable2 = Request["variable2"];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:35:15.593

.aspx：

```
<asp:HiddenField id="HiddenField1" runat="server" value=""/> 
```

javascript:

```
function end(url) {
            var url = getUrlVars(url);
            var url2 = url["access_token"];
            document..getElementById("HiddenField1").value = url2;
            } 
```

.cs 文件：

```
string variableURL2 = HiddenField1.Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:28:30.760

使用服务器控件 HiddenField 首先你必须在你的 aspx/ascx/master 文件中添加控件

```
<asp:HiddenFiled ID="hdn" runat="server"/> 
```

然后就可以在JS中使用这个控件了

```
function end(url) {
var url = getUrlVars(url);
var url2 = url["access_token"];
<%= hdn.ClientId %>.value = url["access_token"];
} 
```

在后面的代码中

```
protected void Page_Load(object sender, EventArgs e)
{
    string variableURL2 = hdn.Value;
} 
```

# python-sphinx - Sorting display by class using sphinx with 'autodoc'?

> ID：14606348
> 
> 赞同：6
> 
> 时间：2013-01-30T14:27:11.593
> 
> 标签：python-sphinx, autodoc

Is there a way to display a "Classes" list / tab using Sphinx, or to organize the html pages generated to show members by class, classes being visually well separated?

I use Sphinx 1.1.3, an try to document a Python extension (a custom one created with Cython). My problem is that the whole extension is displayed in one single block if I enter the modules tab (which is quite unreadable) and, by the other hand, the "Index" tab merges everything together (which is normal). I would like a per class display (something closer to what Doxygen would do).

Does something like:

```
Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`

* :ref:`classindex`  ??? 
```

exists?

Thanks a lot.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T08:54:59.050

The `autosummary` extension, with the `autosummary_generate` configuration variable set to `True`, can be used to 1) generate compact summary listings and 2) generate class documentation with one page per class.

You have to explicitly specify each class to be included, but once this is done you have a setup for generating clear documentation where the classes are visually well separated.

The following markup will output one "stub" .rst page for each class (Class1, Class2, Class3). Each page is based on a template and includes an `.. autoclass::` directive that extracts the full documentation. In the final HTML output, each class page is linked from the corresponding entry in the main autosummary table.

```
:mod:`mymodule` --- Some module
===============================

This module contains several classes. 

.. currentmodule:: mymodule

Class overview
--------------

.. autosummary::
   :toctree: stubs
   :template: class.rst

   Class1
   Class2
   Class3 
```

Details here: [https://www.sphinx-doc.org/en/master/usage/extensions/autosummary.html](https://www.sphinx-doc.org/en/master/usage/extensions/autosummary.html)

# c++ - 结合 C++ 和 C

> ID：14606349
> 
> 赞同：0
> 
> 时间：2013-01-30T14:27:23.347
> 
> 标签：c++, c, directx, directx-11

我试图做一个 DirectX 教程，但我想用 C 而不是 C++ 编写应用程序。所以我用 C 编写了代码，但是当我尝试编译它时，“setupD3D”函数出现了很多错误。所以我只是将一个文件重命名为.cpp。但是新代码也没有编译。我认为将 C 和 C++ 结合起来是问题所在，或者有很多交叉引用。谁能告诉我这段代码有什么问题？

直接3d.h：

```
#include "main.h"

#ifndef DIRECT3D

#define DIRECT3D

int m_videoCardMemory;
char m_videoCardDescription[128];
ID3D11DeviceContext* m_deviceContext = 0;
D3DXMATRIX m_projectionMatrix;
D3DXMATRIX m_worldMatrix;
D3DXMATRIX m_orthoMatrix;

int setupD3D(BYTE vsync, HWND hwnd, float screenDepth, float screenNear);
void terminateD3D();
void beginScene(float red, float green, float blue, float alpha);
void endScene();

#endif 
```

直接3d.cpp

```
#include "direct3d.h"
// code 
```

主.h：

```
#ifndef MAIN_FUNC

#define MAIN_FUNC

#pragma comment(lib, "dxgi.lib")
#pragma comment(lib, "d3d11.lib")
#pragma comment(lib, "d3dx11.lib")
#pragma comment(lib, "d3dx10.lib")

#include <Windows.h>
#include <dxgi.h>
#include <d3dcommon.h>
#include <d3d11.h>
#include <d3dx10math.h>
#include "direct3d.h"

int breedte, hoogte;
LRESULT CALLBACK Actie(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam);
void main_loop(MSG* msg);
void keyevent();

#endif 
```

主程序

```
#include "main.h"
// code 
```

winstart.c

```
#include "main.h"
// code 
```

错误：

```
Error   86  error LNK2005: _m_deviceContext already defined in main.obj
Error   87  error LNK2019: unresolved external symbol _setupD3D referenced in function _Actie@16
Error   88  error LNK2019: unresolved external symbol _terminateD3D referenced in function _Actie@16
Error   89  error LNK2019: unresolved external symbol _beginScene referenced in function _render
Error   90  error LNK2019: unresolved external symbol _endScene referenced in function _render
Error   91  error LNK1120: 4 unresolved externals 
```

我还有 84 条关于宏重定义的警告。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:37:06.870

如果您在 .cpp 文件中声明函数，编译器会将其编译为 C++ 代码（无论它是否为纯 C）。不幸的是，C++ 有一个名为[Name mangling](http://en.wikipedia.org/wiki/Name_mangling)的机制，它允许例如函数重载，而 C 则不允许。如果您现在想从 .c 文件（编译器将其识别为纯 C）调用这样的函数，编译器正在为符号的另一个命名（在您的情况下为函数）创建引用而不是它们存在并且链接器不是能够匹配他们了。

为了解决这个问题，你可以`extern "C"`在你想让 C 调用的每个函数前面加上一个。由于 C 不承认`extern "C"`你必须使这种语言依赖。

解决此问题的常用方法是在头文件中引入以下结构：

```
... your include guard of choice

#ifdef __cplusplus
    extern "C" {
#endif

//-- your declarations

#ifdef __cplusplus
    }
#endif 
```

这指示 C++ 编译器创建符合 C 标准的名称。由于 C 编译器不提供预处理器符号“__cplusplus”，因此它忽略了 extern 语句。（这没关系，因为 C 编译器总是只创建符合 C 的符号名称）

除了更改头文件（有时不允许这样做）之外，包含以下内容的整个头文件也是合法的`extern "C"`：

```
extern "C" {
    #include <My_C_API.h>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:39:50.183

您有两种类型的链接错误：

```
Error   86  error LNK2005: _m_deviceContext already defined in main.obj 
```

是因为您`m_deviceContext`在头文件中定义，然后继续将该头文件包含在多个编译单元中（至少在 direct3d.cpp、main.c 和 winstart.c 中）。将定义移出头文件，并注意包含依赖项（main.h 和 direct3d.h 相互依赖——这看起来很奇怪）。

```
Error   87  error LNK2019: unresolved external symbol _setupD3D referenced in function _Actie@16
Error   88  error LNK2019: unresolved external symbol _terminateD3D referenced in function _Actie@16
Error   89  error LNK2019: unresolved external symbol _beginScene referenced in function _render
Error   90  error LNK2019: unresolved external symbol _endScene referenced in function _render
Error   91  error LNK1120: 4 unresolved externals 
```

是因为您错误地混合了 C 和 C++ 代码。要么使用 C 编译器（或 C++ 编译器）编译所有内容，要么正确使用`extern "C"`. 有关更多详细信息，请检查例如。C++ FAQ Lite的[相关部分](http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:33:48.137

该错误表明 main.o 中已经定义了某些内容。您所做的是将包含放在守卫之前，因此无论它包含什么文件都可能会创建重复的代码。而且你有**循环依赖。**

在文件 direct3d.h 中：

```
#include "main.h"
#ifndef DIRECT3D
#define DIRECT3D 
```

它应该是：

```
#ifndef DIRECT3D
#define DIRECT3D
#include "main.h" 
```

main.c 中的包含：

```
#include "main.h" 
```

是一个问题，因为您已经将它包含在包含 main.h 的 direct3d.h 中。

所以编译器可能是这样的：

```
#include "main.h"
#include "direct3d.h"
#include "main.h"   <-- duplicate code detected
throw error. 
```

将 C 和 C++ 混合在一起没有问题。

# java - 如何在命令行上从 ant java 任务运行 jax-ws Web 服务

> ID：14606350
> 
> 赞同：3
> 
> 时间：2013-01-30T14:27:24.707
> 
> 标签：java, web-services, ant, build, jax-ws

您好我正在尝试从 Ant 运行一个简单的基于 jax-ws soap/wsdl 的 Web 服务。如果我使用纯“java”从命令行运行程序，程序运行良好。蚂蚁炸了。我在 Windows 7 32 位操作系统上使用 JDK jdk1.6.0.26 32 位。我的蚂蚁是1.7.1。

这是构建文件

```
 <?xml version="1.0"?>
<project name="WebSvcUpAndRunning" default="run" >
<description>Compiles and runs a simple program</description>

    <property name="project.name"       value="${ant.project.name}" />
    <property name="project.version"    value="1.0" />
    <property name="main.class"     value="ch01.ts.TimeServerPublisher" />
    <property name="build.dir"      location="." />
    <property name="dist.dir"       location="${build.dir}/dist" />
    <property name="target.name"    value="${project.name}-${project.version}.jar" />
    <property name="target.jar"     location="${dist.dir}/${target.name}" />
    <property name="src.dir" location="${build.dir}/src" />
    <property name="build.classes.dir" location="${build.dir}/classes" />

    <target name="init">
        <mkdir dir="${build.classes.dir}" />
        <mkdir dir="${dist.dir}" />
    </target>

    <path id="compile.classpath">
        <fileset dir="lib">
            <include name="*.jar" />
        </fileset>
        <fileset dir="C:\jdks\jdk1.6.0_26\jre\lib">
            <include name="*.jar" />
        </fileset>
    </path>

    <target name="compile" depends="init" description="Compiles the source code">
        <javac 
                destdir="${build.classes.dir}"
                debug="true"
                srcdir="${src.dir}">
            <classpath refid="compile.classpath" />
        </javac>
    </target>

    <target name="clean" depends="init"
        description="Removes the temporary directories used">
        <delete dir="${build.classes.dir}" />
        <delete dir="${dist.dir}" />
    </target>

    <target name="run" depends="compile" description="Runs the program">
        <echo level="warning" message="running" />
        <java
            classname="${main.class}">
            <classpath>
                <path refid="compile.classpath" />
                <pathelement location="${build.classes.dir}" />
            </classpath>
        </java>
    </target>

    <target name="jar"  depends="compile" description="Creates the JAR file">
        <property name="manifest.mf"    location="${src.dir}/META-INF/manifest.mf" />
        <manifest file="${manifest.mf}" >
            <attribute name="Built-By" value="${user.name}"/>
            <attribute name="Sealed" value="true"/>
            <attribute name="Main-Class" value="${main.class}"/>
        </manifest>
        <jar destfile="${target.jar}"
                duplicate="preserve"
                manifest="${manifest.mf}">
            <fileset dir="${build.classes.dir}"/>
        </jar>
    </target>

    <path id="run.jar.classpath">
        <path refid="compile.classpath"/>
        <pathelement location="${target.jar}"/>
    </path> 

    <!-- Run Java using executable Jar -->
    <target name="run-jar" depends="jar" description="Runs the program">
        <echo level="warning" message="running" />
        <java
            classname="${main.class}"
            classpathref="run.jar.classpath">
        </java>
    </target>

</project> 
```

...这是我收到的错误代码..

```
 [java] java.lang.Error: javax.xml.datatype.DatatypeConfigurationException: Provider org.apache.xerces.jaxp
.datatype.DatatypeFactoryImpl not found
     [java]     at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:194)
     [java]     at org.apache.tools.ant.taskdefs.Java.run(Java.java:764)
     [java]     at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:218)
     [java]     at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:132)
     [java]     at org.apache.tools.ant.taskdefs.Java.execute(Java.java:105)
     [java]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)
     [java]     at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
     [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     [java]     at java.lang.reflect.Method.invoke(Method.java:597)
     [java]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
     [java]     at org.apache.tools.ant.Task.perform(Task.java:348)
     [java]     at org.apache.tools.ant.Target.execute(Target.java:357)
     [java]     at org.apache.tools.ant.Target.performTasks(Target.java:385)
     [java]     at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)
     [java]     at org.apache.tools.ant.Project.executeTarget(Project.java:1306)
     [java]     at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
     [java]     at org.apache.tools.ant.Project.executeTargets(Project.java:1189)
     [java]     at org.apache.tools.ant.Main.runBuild(Main.java:758)
     [java]     at org.apache.tools.ant.Main.startAnt(Main.java:217)
     [java]     at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)
     [java]     at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)
     [java] Caused by: java.lang.Error: javax.xml.datatype.DatatypeConfigurationException: Provider org.apache.
xerces.jaxp.datatype.DatatypeFactoryImpl not found
     [java]     at com.sun.xml.internal.bind.DatatypeConverterImpl.<clinit>(DatatypeConverterImpl.java:775)
     [java]     at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$3.run(JAXBContextImpl.java:262)
     [java]     at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$3.run(JAXBContextImpl.java:260)
     [java]     at java.security.AccessController.doPrivileged(Native Method)
     [java]     at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:260)
     [java]     at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImp
l.java:1100)
     [java]     at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:143)
     [java]     at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:110)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
     [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     [java]     at java.lang.reflect.Method.invoke(Method.java:597)
     [java]     at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:202)
     [java]     at javax.xml.bind.ContextFinder.find(ContextFinder.java:376)
     [java]     at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
     [java]     at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
     [java]     at com.sun.xml.internal.ws.spi.ProviderImpl$2.run(ProviderImpl.java:209)
     [java]     at com.sun.xml.internal.ws.spi.ProviderImpl$2.run(ProviderImpl.java:206)
     [java]     at java.security.AccessController.doPrivileged(Native Method)
     [java]     at com.sun.xml.internal.ws.spi.ProviderImpl.getEPRJaxbContext(ProviderImpl.java:206)
     [java]     at com.sun.xml.internal.ws.spi.ProviderImpl.<clinit>(ProviderImpl.java:77)
     [java]     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
     [java]     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)

     [java]     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.
java:27)
     [java]     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
     [java]     at java.lang.Class.newInstance0(Class.java:355)
     [java]     at java.lang.Class.newInstance(Class.java:308)
     [java]     at javax.xml.ws.spi.FactoryFinder.newInstance(FactoryFinder.java:31)
     [java]     at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:128)
     [java]     at javax.xml.ws.spi.Provider.provider(Provider.java:83)
     [java]     at javax.xml.ws.Endpoint.publish(Endpoint.java:170)
     [java]     at ch01.ts.TimeServerPublisher.main(TimeServerPublisher.java:8)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
     [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     [java]     at java.lang.reflect.Method.invoke(Method.java:597)
     [java]     at org.apache.tools.ant.taskdefs.ExecuteJava.run(ExecuteJava.java:217)
     [java]     at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:152)
     [java]     ... 20 more
     [java] Caused by: javax.xml.datatype.DatatypeConfigurationException: Provider org.apache.xerces.jaxp.datat
ype.DatatypeFactoryImpl not found
     [java]     at javax.xml.datatype.DatatypeFactory.newInstance(DatatypeFactory.java:137)
     [java]     at com.sun.xml.internal.bind.DatatypeConverterImpl.<clinit>(DatatypeConverterImpl.java:773)
     [java]     ... 57 more
     [java] Caused by: java.lang.ClassNotFoundException: org.apache.xerces.jaxp.datatype.DatatypeFactoryImpl
     [java]     at org.apache.tools.ant.AntClassLoader.findClassInComponents(AntClassLoader.java:1400)
     [java]     at org.apache.tools.ant.AntClassLoader.findClass(AntClassLoader.java:1341)
     [java]     at org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java:1094)
     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
     [java]     at javax.xml.datatype.FactoryFinder.getProviderClass(FactoryFinder.java:115)
     [java]     at javax.xml.datatype.FactoryFinder.newInstance(FactoryFinder.java:146)
     [java]     at javax.xml.datatype.FactoryFinder.findJarServiceProvider(FactoryFinder.java:298)
     [java]     at javax.xml.datatype.FactoryFinder.find(FactoryFinder.java:223)
     [java]     at javax.xml.datatype.DatatypeFactory.newInstance(DatatypeFactory.java:131)
     [java]     ... 58 more
     [java] --- Nested Exception ---
     [java] java.lang.Error: javax.xml.datatype.DatatypeConfigurationException: Provider org.apache.xerces.jaxp
.datatype.DatatypeFactoryImpl not found
     [java]     at com.sun.xml.internal.bind.DatatypeConverterImpl.<clinit>(DatatypeConverterImpl.java:775)
     [java]     at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$3.run(JAXBContextImpl.java:262)
     [java]     at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$3.run(JAXBContextImpl.java:260)
     [java]     at java.security.AccessController.doPrivileged(Native Method)
     [java]     at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:260)
     [java]     at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImp
l.java:1100)
     [java]     at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:143)
     [java]     at com.sun.xml.internal.bind.v2.ContextFactory.createContext(ContextFactory.java:110)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
     [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     [java]     at java.lang.reflect.Method.invoke(Method.java:597)
     [java]     at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:202)
     [java]     at javax.xml.bind.ContextFinder.find(ContextFinder.java:376)
     [java]     at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
     [java]     at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
     [java]     at com.sun.xml.internal.ws.spi.ProviderImpl$2.run(ProviderImpl.java:209)
     [java]     at com.sun.xml.internal.ws.spi.ProviderImpl$2.run(ProviderImpl.java:206)
     [java]     at java.security.AccessController.doPrivileged(Native Method)
     [java]     at com.sun.xml.internal.ws.spi.ProviderImpl.getEPRJaxbContext(ProviderImpl.java:206)
     [java]     at com.sun.xml.internal.ws.spi.ProviderImpl.<clinit>(ProviderImpl.java:77)
     [java]     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
     [java]     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)

     [java]     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.
java:27)
     [java]     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
     [java]     at java.lang.Class.newInstance0(Class.java:355)
     [java]     at java.lang.Class.newInstance(Class.java:308)
     [java]     at javax.xml.ws.spi.FactoryFinder.newInstance(FactoryFinder.java:31)
     [java]     at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:128)
     [java]     at javax.xml.ws.spi.Provider.provider(Provider.java:83)
     [java]     at javax.xml.ws.Endpoint.publish(Endpoint.java:170)
     [java]     at ch01.ts.TimeServerPublisher.main(TimeServerPublisher.java:8)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
     [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     [java]     at java.lang.reflect.Method.invoke(Method.java:597)
     [java]     at org.apache.tools.ant.taskdefs.ExecuteJava.run(ExecuteJava.java:217)
     [java]     at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:152)
     [java]     at org.apache.tools.ant.taskdefs.Java.run(Java.java:764)
     [java]     at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:218)
     [java]     at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:132)
     [java]     at org.apache.tools.ant.taskdefs.Java.execute(Java.java:105)
     [java]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)
     [java]     at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
     [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     [java]     at java.lang.reflect.Method.invoke(Method.java:597)
     [java]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
     [java]     at org.apache.tools.ant.Task.perform(Task.java:348)
     [java]     at org.apache.tools.ant.Target.execute(Target.java:357)
     [java]     at org.apache.tools.ant.Target.performTasks(Target.java:385)
     [java]     at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)
     [java]     at org.apache.tools.ant.Project.executeTarget(Project.java:1306)
     [java]     at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
     [java]     at org.apache.tools.ant.Project.executeTargets(Project.java:1189)
     [java]     at org.apache.tools.ant.Main.runBuild(Main.java:758)
     [java]     at org.apache.tools.ant.Main.startAnt(Main.java:217)
     [java]     at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)
     [java]     at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)
     [java] Caused by: javax.xml.datatype.DatatypeConfigurationException: Provider org.apache.xerces.jaxp.datat
ype.DatatypeFactoryImpl not found
     [java]     at javax.xml.datatype.DatatypeFactory.newInstance(DatatypeFactory.java:137)
     [java]     at com.sun.xml.internal.bind.DatatypeConverterImpl.<clinit>(DatatypeConverterImpl.java:773)
     [java]     ... 57 more
     [java] Caused by: java.lang.ClassNotFoundException: org.apache.xerces.jaxp.datatype.DatatypeFactoryImpl
     [java]     at org.apache.tools.ant.AntClassLoader.findClassInComponents(AntClassLoader.java:1400)
     [java]     at org.apache.tools.ant.AntClassLoader.findClass(AntClassLoader.java:1341)
     [java]     at org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java:1094)
     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
     [java]     at javax.xml.datatype.FactoryFinder.getProviderClass(FactoryFinder.java:115)
     [java]     at javax.xml.datatype.FactoryFinder.newInstance(FactoryFinder.java:146)
     [java]     at javax.xml.datatype.FactoryFinder.findJarServiceProvider(FactoryFinder.java:298)
     [java]     at javax.xml.datatype.FactoryFinder.find(FactoryFinder.java:223)
     [java]     at javax.xml.datatype.DatatypeFactory.newInstance(DatatypeFactory.java:131)
     [java]     ... 58 more
     [java] Java Result: -1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:33:00.490

`org.apache.xerces.jaxp.datatype.DatatypeFactoryImpl`不在您的类路径上。java 6 jvm 确实包含嵌入在 rt.jar 中的 Xerces 实现，但包名称不同 - 它是： `com.sun.org.apache.xerces.internal.jaxp.datatype`

您可以在代码中更改预期的 DatatypeFactoryImpl 或通过将单独的 Xerces jar 添加到类路径来覆盖 Xerces 实现。要覆盖 jvm 使用的类，您可以将任何版本的 xerces.jar 添加到 JVm 安装 /lib/endorsed 目录。

[在http://xml.apache.org/xalan-j/faq.html#faq-N100EF](http://xml.apache.org/xalan-j/faq.html#faq-N100EF)和 [Java 6 中的 xerces 序列化中](https://stackoverflow.com/questions/2898793/xerces-serialization-in-java-6)有更多详细信息

# python - Windows 许可证密钥的所有排列

> ID：14606351
> 
> 赞同：97
> 
> 时间：2013-01-30T14:27:26.813
> 
> 标签：python, itertools

我需要为我的笔记本电脑申请 Windows 8 升级，为此我需要笔记本电脑底部的 Windows 7 许可证密钥。

因为微软以其无限的智慧决定创建失效的许可证标签，而我无法清楚地阅读我的许可证密钥，这意味着我无法使用自动化过程为我的笔记本电脑注册 Windows 升级优惠。

通过将笔记本电脑与光线成一定角度，我已经能够验证大部分代码，但有几个字母是模棱两可的（再次感谢 Microsoft 在标签中使用容易误读的字符）。

我有以下（混淆）许可证密钥，

```
MPP6R-09RXG-2H[8B]MT-[B8]K[HN]M9-V[6G]C8R 
```

其中方括号中的字符不明确，因此它是`8`or `B`, `B`or `8`, `H`or `N`, `6`or `G`。

制作 16 种组合。

使用 itertools 生成此许可证密钥的可能排列是否合适，还是有更好的方法？

感谢贡献者，我得到了正确的密钥。检查密钥是否有效的一种非常方便的方法是使用[Windows 7 产品密钥检查器](http://windows-7-product-key-checker.softpedia.com/)。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-01-30T14:36:42.330

**免责声明：**是的，我知道这不是[Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)代码。它突然出现在我的脑海中，我只需*要写*下来。

最简单的方法是使用 shell 扩展：

```
$ echo MPP6R-09RXG-2H{8,B}MT-{B,8}K{H,N}M9-V{6,G}C8R
MPP6R-09RXG-2H8MT-BKHM9-V6C8R
MPP6R-09RXG-2H8MT-BKHM9-VGC8R
MPP6R-09RXG-2H8MT-BKNM9-V6C8R
MPP6R-09RXG-2H8MT-BKNM9-VGC8R
MPP6R-09RXG-2H8MT-8KHM9-V6C8R
MPP6R-09RXG-2H8MT-8KHM9-VGC8R
MPP6R-09RXG-2H8MT-8KNM9-V6C8R
MPP6R-09RXG-2H8MT-8KNM9-VGC8R
MPP6R-09RXG-2HBMT-BKHM9-V6C8R
MPP6R-09RXG-2HBMT-BKHM9-VGC8R
MPP6R-09RXG-2HBMT-BKNM9-V6C8R
MPP6R-09RXG-2HBMT-BKNM9-VGC8R
MPP6R-09RXG-2HBMT-8KHM9-V6C8R
MPP6R-09RXG-2HBMT-8KHM9-VGC8R
MPP6R-09RXG-2HBMT-8KNM9-V6C8R
MPP6R-09RXG-2HBMT-8KNM9-VGC8R 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-01-30T14:31:24.513

```
from itertools import product
for perm in product('8B', 'B8', 'HN', '6G'):
    print 'MPP6R-09RXG-2H%sMT-%sK%sM9-V%sC8R' % perm 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-30T20:11:08.800

生成组合的另一种方法

```
>>> ['MPP6R-09RXG-2H%sMT-%sK%sM9-V%sC8R' % (a, b, c, d)
...  for a in '8B' for b in 'B8' for c in 'HN' for d in '6G']
['MPP6R-09RXG-2H8MT-BKHM9-V6C8R',
 'MPP6R-09RXG-2H8MT-BKHM9-VGC8R',
 'MPP6R-09RXG-2H8MT-BKNM9-V6C8R',
 'MPP6R-09RXG-2H8MT-BKNM9-VGC8R',
 'MPP6R-09RXG-2H8MT-8KHM9-V6C8R',
 'MPP6R-09RXG-2H8MT-8KHM9-VGC8R',
 'MPP6R-09RXG-2H8MT-8KNM9-V6C8R',
 'MPP6R-09RXG-2H8MT-8KNM9-VGC8R',
 'MPP6R-09RXG-2HBMT-BKHM9-V6C8R',
 'MPP6R-09RXG-2HBMT-BKHM9-VGC8R',
 'MPP6R-09RXG-2HBMT-BKNM9-V6C8R',
 'MPP6R-09RXG-2HBMT-BKNM9-VGC8R',
 'MPP6R-09RXG-2HBMT-8KHM9-V6C8R',
 'MPP6R-09RXG-2HBMT-8KHM9-VGC8R',
 'MPP6R-09RXG-2HBMT-8KNM9-V6C8R',
 'MPP6R-09RXG-2HBMT-8KNM9-VGC8R']
>>> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-30T14:49:11.857

同时使用 itertools 和 functools 怎么样？

```
>>> from operator import mod
>>> from functools import partial
>>> from itertools import product
>>> map(partial(mod, 'MPP6R-09RXG-2H%sMT-%sK%sM9-V%sC8R'), product('8B', 'B8', 'HN', '6G'))
['MPP6R-09RXG-2H8MT-BKHM9-V6C8R', 'MPP6R-09RXG-2H8MT-BKHM9-VGC8R', 'MPP6R-09RXG-2H8MT-BKNM9-V6C8R', 'MPP6R-09RXG-2H8MT-BKNM9-VGC8R', 'MPP6R-09RXG-2H8MT-8KHM9-V6C8R', 'MPP6R-09RXG-2H8MT-8KHM9-VGC8R', 'MPP6R-09RXG-2H8MT-8KNM9-V6C8R', 'MPP6R-09RXG-2H8MT-8KNM9-VGC8R', 'MPP6R-09RXG-2HBMT-BKHM9-V6C8R', 'MPP6R-09RXG-2HBMT-BKHM9-VGC8R', 'MPP6R-09RXG-2HBMT-BKNM9-V6C8R', 'MPP6R-09RXG-2HBMT-BKNM9-VGC8R', 'MPP6R-09RXG-2HBMT-8KHM9-V6C8R', 'MPP6R-09RXG-2HBMT-8KHM9-VGC8R', 'MPP6R-09RXG-2HBMT-8KNM9-V6C8R', 'MPP6R-09RXG-2HBMT-8KNM9-VGC8R'] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-30T14:30:44.407

[http://www.magicaljellybean.com/keyfinder/](http://www.magicaljellybean.com/keyfinder/)

> Magical Jelly Bean Keyfinder 是一个免费软件实用程序，可检索用于从注册表安装 Windows 的产品密钥（cd 密钥）。它还有一个社区更新的配置文件，用于检索许多其他应用程序的产品密钥。

只需在您想要密钥的安装上运行它。

# asp.net-mvc - jQuery 自动完成

> ID：14606361
> 
> 赞同：3
> 
> 时间：2013-01-30T14:27:57.353
> 
> 标签：asp.net-mvc, jquery, autocomplete

我的 jQuery 自动完成字段有问题。它有点奇怪。

这是我的自动完成字段和脚本。我的 mvc 函数的响应工作正常。下拉列表是可见条目。但是当我试图选择一个项目时，结果列表就会消失。有人有想法吗？

```
 <div class="ui-widget">
    <input id="newPlayerName" type="text" name="newPlayerName" onkeyup="checkRegistration()" />
 </div> 
```

代码：

```
<script type="text/javascript">
  $(function () {
      $('#newPlayerName').autocomplete({
          source: function (request, response) {
              $.ajax({
                  url: '/Trainer/Search',
                  data: {
                      searchTerm: request.term
                  },
                  dataType: 'json',
                  type: 'POST',
                  minLength: 1,

                  success: function (data) {
                      response(data);
                  }
              });
          },
          select: function (event, ui) {
              checkRegistration(ui.item.value);
          },
          focus: function (event, ui) {
              event.preventDefault();
              $("#newPlayerName").val(ui.item.label);
          }
      });
  });
</script> 
```

啊...这是我正在使用的 jquery 脚本...

```
<script src="/Scripts/jquery-1.9.0.js" type="text/javascript"></script>
<script src="/Scripts/jquery-ui-1.10.0.custom.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery-ui-1.10.0.custom.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:31:03.923

您显示的代码似乎有问题的一件事是您已经包含了`jquery-ui`两次脚本（缩小版和标准版）。你应该只有一个：

```
<script src="/Scripts/jquery-1.9.0.js" type="text/javascript"></script>
<script src="/Scripts/jquery-ui-1.10.0.custom.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T07:30:42.803

```
$(function () {
  var getData = function (request, response) {
    $.ajax({
      type: "POST",
      contentType: "application/json; charset=utf-8",
      url: "Default.aspx/GetMultiProductList",
      data: "{'term':'" + $("#txtAutoCompleteMulti").val() + "'}",
      dataType: "json",
      success: function (data) {
        response($.map(data.d, function (item) {
          if (item != null)
            return { label: item.label, title: item.value }//value: item.label,
            }))
      },
      error: function (result) {
        alert("Error");
      }
    });
  };
  var selectItem = function (event, ui) { $("#txtAutoCompleteMulti").val(ui.item.value); return false; }
  $("#txtAutoCompleteMulti").autocomplete({
    source: getData,
    select: selectItem,
    _resizeMenu: function () {
      this.menu.element.outerWidth(500);
    },
    search: function (event, ui) { },
    minLength: 1,
    change: function (event, ui) {
      if (!ui.item) {
        $('#txtAutoCompleteMulti').val("")
      }
    },
    select: function (event, ui) {
      $("#txtAutoCompleteMulti").prop('title', ui.item.title)
    },
    autoFocus: true,
    delay: 500
  });
});
```

```
 .ui-autocomplete {
            max-height: 300px;
            overflow-y: auto;
            overflow-x: hidden;
        }
        .ui-autocomplete-loading {
            background: url('img/Progress_indicator.gif') no-repeat right center;
        }
        .seachbox {
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 250px;
            padding: 6px 25px 6px 6px;
            transition: border-color 0.15s ease-in-out 0s, box-shadow 0.15s ease-in-out 0s;
        }
```

```
<link href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>

<div>
   <table style="width: 100%;">
     <tr>
       <td style="width: 20%">Product Name :</td>
       <td>
         <input type="text" id="txtAutoCompleteMulti" placeholder="Seach Product" class="seachbox" />
       </td>
     </tr>
  </table>
</div>
```

[c#代码使用webmethod](http://i.stack.imgur.com/4qln1.png)

# google-apps-script - Google Apps 脚本中 getOwner 方法的奇怪权限问题

> ID：14606362
> 
> 赞同：1
> 
> 时间：2013-01-30T14:28:04.363
> 
> 标签：google-apps-script, google-drive-api

在 Google Apps 脚本中使用这行代码时

```
 var user = folders[n].getOwner().getEmail() 
```

我收到一条错误消息，提示我无权执行此类操作（您的版本可能有所不同，我是从意大利语翻译的）。

是什么赋予了？我只是在检索信息，例如文件夹的所有者。

* * *

当脚本处理我拥有的文件夹时，不会出现错误，当遇到不属于我的文件夹时会出现错误。问题是这行代码仅用于发现不属于我的文件夹，以避免发出会正确引发错误的方法，例如`setTrashed`. 该脚本查找空文件夹以删除它们，但我不能删除我当然不是所有者的文件夹。是的，我喜欢 Google 商业应用程序，这有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:33:03.923

没有关于 的任何特定警告`file.getOwner().getEmail()`，但有[Class Session](https://developers.google.com/apps-script/class_session#getActiveUser)。

> 在有限权限的执行中（例如响应 onOpen 或 onEdit），如果用户和脚本所有者都属于同一个域，我们只返回活动用户的身份。这是为了保护消费者用户的隐私，他们可能不希望他们的电子邮件地址暴露。

我在消费者帐户中对此没有任何问题。

以下函数摘自[我为上一个问题发布的要点](https://gist.github.com/4644369)。`.getEmail()`它将对（或`getUserLoginId()`如果您愿意）的调用包装在一个`try ... catch`块中，因此它可以避免跨应用程序域的用户出错。

```
function getFileInfo (file,fileType) {
  var fileInfo = {
    id: file.getId(),
    name: file.getName(), 
    size: file.getSize(),
    type: (fileType == "file") ? docTypeToText_(file.getFileType()) : "folder",
    created: file.getDateCreated(),
    description: file.getDescription(),
    owner: file.getOwner()
  }
  try {
    fileInfo.owner = file.getOwner().getEmail()//.getUserLoginId()
  } catch(e)
  {
    // Possible permission problem
    fileInfo.owner = "unknown";
  }
  return fileInfo;
} 
```

**更新：**自从首次发布以来，情况发生了变化。现在，我的消费者帐户在尝试访问`getOwner()`从另一个帐户共享的文件时遇到上述错误。（2013 年 3 月 3 日）

# java - Axis 1.4 log4j-1.2.8.jar 与 XPage 不兼容？

> ID：14606364
> 
> 赞同：0
> 
> 时间：2013-01-30T14:28:10.880
> 
> 标签：java, xpages, axis, lotus-domino, lotus

我正在尝试将 Apache Axis 1.4 中的一些 JAR 添加到`WebContent/WEB-INF/lib`目录中。JAR 之一是`log4j-1.2.8.jar`.

只要将此 JAR 添加到 lib 目录，NSF 中的所有 XPage 就会停止工作。我只是收到错误 500 并显示以下消息：

> “HTTP Web 服务器：命令未处理异常”。

以下消息将写入错误日志：

```
java.lang.RuntimeException: com.ibm.xsp.FacesExceptionEx: org.apache.commons.logging.LogConfigurationException: java.lang.reflect.InvocationTargetException
.    
.    
.    
.    
Caused by: java.lang.NoClassDefFoundError: org/apache/log4j/Logger
at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:102) 
```

[链接到完整的堆栈跟踪](http://juno.qchi.co.uk/log4j-xpages-error-130130.txt)

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:40:33.867

**已编辑**

AXIS jar 包含在 Domino 安装中，因为 Domino Web 服务使用它们。这就是为什么如果你也包括它们会发生冲突。

我建议使用比 Axis 更新的 JAX-WS。[以下是如何将它用于 Web 服务客户端](http://www-10.lotus.com/ldd/xpagesforum.nsf/topicThread.xsp?action=openDocument&documentId=8BCB11252D985E5885257AAF0016BC5A#7FB2E32EDB655B9985257AB800600B97)。无需添加任何 JAR。您还可以使用 JAX-WS *wsdl2java*而不是 Apache 之一。

需要在*java.policy*文件中授予这两个权限才能使其工作：

```
permission java.lang.RuntimePermission "setContextClassLoader";
permission java.lang.reflect.ReflectPermission "suppressAccessChecks"; 
```

请注意，任何类型的服务器更新（fe fixpack install）都会将 java.policy 文件重置为默认值。

# javascript - d3.js 是否支持动态 Sunbursts

> ID：14606366
> 
> 赞同：1
> 
> 时间：2013-01-30T14:28:11.650
> 
> 标签：javascript, d3.js, sunburst-diagram

我想创建一个功能的混搭，如从

[http://bl.ocks.org/4063423](http://bl.ocks.org/4063423)和[http://philogb.github.com/jit/static/v20/Jit/Examples/Sunburst/example2.html](http://philogb.github.com/jit/static/v20/Jit/Examples/Sunburst/example2.html)

我想使用 d3.js 或至少一个纯 javascript 解决方案，但该解决方案将响应鼠标单击以显示有关所选部分的更多信息。

放大和缩小不是强制性的，但如果我能做到，那就太好了。

现在我的问题是，是否有一个框架可以支持这一点，还是我必须自己将它们混合起来。

免责声明：谷歌并没有那么有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:47:32.553

单独使用 D3 很容易：http: [//bl.ocks.org/4678148](http://bl.ocks.org/4678148)如果单击任何元素，该元素将被*聚焦*并转换为 90 度，并`selected`在其上设置类。

此外，右上角的图例文本更改为所选元素的名称。实现这种耦合的代码部分是：

```
d3.selectAll("path").on("click", function (d, i) {
  var newAngle = - (d.x + d.dx / 2);

  innerG
    .transition()
      .duration(1500)
      .attr("transform", "rotate(" + (180 / Math.PI * newAngle) + ")");

  // Set the class "selected" on the chosen element.
  path
    .classed("selected", function (x) { return d.name == x.name; });

  // Update the text box with the right context
  // This can be arbitrarily complex to show as many details about the
  // object as required.
  textBox.data(["Clicked: " + d.name])
      .text(String);
}); 
```

* * *

**更新**

对于可缩放的行为，例如单击的元素过渡到中心，您可以使用与[here](http://bl.ocks.org/4348373)或[here](http://bl.ocks.org/4348373)几乎相同的代码。我对代码做了一些小改动，以显示如何提取有关单击了哪个项目的信息：http: [//bl.ocks.org/4747342](http://bl.ocks.org/4747342)

所需的代码更改比以前更简单：

```
d3.selectAll("path").on("click", function (d, i) {  

  // Zooming
  path.transition()
    .duration(750)
    .attrTween("d", arcTween(d));

  // Update the text box with the right context
  // This can be arbitrarily complex to show as many details about the
  // object as required.
  textBox.data(["Clicked: " + d.name])
      .text(String);
}); 
```

# python - 目录中的python导入

> ID：14606369
> 
> 赞同：0
> 
> 时间：2013-01-30T14:28:18.157
> 
> 标签：python

我有一个python项目，我把它分成两部分，一个库部分和一个二进制部分。

出于组织原因，我希望有这样的层次结构：

```
project/
    lib/
        __init__.py
        module1.py
        module2.py
    bin/
        binary1.py # contains: import module1
        binary2.py # contains: import module2
    doc/
    ... 
```

问题当然是二进制{1,2}.py 中的简单导入不起作用，至少在编码阶段（安装之前）。

有什么建议么？编码时如何测试代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:30:53.017

我到处使用绝对进口。

```
project/
    __init__.py
    lib/
        __init__.py
        module1.py
        module2.py
    bin/
        __init__.py
        binary1.py # contains: import module1
        binary2.py # contains: import module2
    doc/
    ... 
```

将 PYTHONPATH 设置为上面的目录，您可以像这样`project`导入`module1`：`binary1.py`

```
from project.lib import module1 
```

这些`__init__.py`文件可以使导入更简单，假设在每个文件中都有一个类。通常你必须像这样导入类（包括文件名）：

```
from project.lib.module1 import Module1 
```

但是，如果您编辑`lib/__init__.py`以包含此行：

```
from project.lib.module1 import Module1 
```

您可以使用 的命名空间直接从以下位置`lib`导入：`Module1``lib`

```
from project.lib import Module1 
```

# c# - 基于 XML 结构设置类的值

> ID：14606374
> 
> 赞同：1
> 
> 时间：2013-01-30T14:28:28.210
> 
> 标签：c#, linq, reflection

我想`XML`根据对象中与 XML 中元素名称匹配的属性将字符串的某些元素处理为对象。

的示例结构`XML`如下：

```
<Bar>
  <Body>
    <Header>
      <A>Value</A>
      <B>true</B>
    </Header> 
    <Data>
      <D>Value</D>
    </Data>
    <Data>
      <D>Value2</D>
    <Data>  
  </Body>
</Bar> 
```

XML 中可以有**许多** `<Data>`元素，但`<Header>`只存在一次。我设置的课程是这样的：

```
public class Foo
{
  public string A { get; set; }
  public bool B { get; set; }
  public List<FooData> { get; set; }
  public void ProcessXml(string xml)
  {
    XDocument xDoc = XDocument.Load(new StringReader(xml));
    var propVals = (from ele in xDoc.Descendants()
                    join prop in this.GetType().GetProperties() on ele.Name.LocalName equals prop.Name
                    select new
                    {
                      prop = prop,
                      val = new Func<object>(() =>
                        {
                          object objValue = null;
                          prop.PropertyType.TryParse(ele.Value, ref objValue);
                          return objValue;
                        }).Invoke()
                    });
    propVals.ToList().ForEach(x => x.prop.SetValue(this, x.val, null));
  }
}
public class FooData
{
  public string D { get; set; }
} 
```

我想出了`ProcessXml`开始设置的方法，但是现在我只设置`Header`值（A，B），关于如何轻松地将许多`FooData`项目添加到`List`同一方法中的任何想法？

```
public static class TypeExtensions
{
  public static void TryParse(this Type t, object valIn, ref object valOut)
  {
    //Do some parsing logic
    try{
      out = TypeDescriptor.GetConverter(t).ConvertFromInvariantString(valIn);
      return true;
    } catch(Exception) { return false; }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:29:11.303

我走的路线与我对标题内容所做的类似，因为没有一种简单的方法可以将其组合成一行。

```
var dataElements = (from dataDescendants in (from ele2 in xDoc.Descendants()
                                             Where ele2.Name.LocalName == "Data"
                                             select ele2.Descendants())
                    from dataDescendant in dataDescendants
                    join prop in typeof(FooItem).GetProperties() on prop.Name equals dataDescendant.Name.LocalName
                    select Element = dataDescendant, Property = prop, dataDescendants
                    group by dataDescendants into g = group
                    select g).ToList();
dataElements.ForEach(dataElement =>
                     {
                       FooItem fi = new FooItem();
                       dataElement.ToList.ForEach(x =>
                                                  {
                                                    object objVal = null;
                                                    x.Property.PropertyType.TryParse(x.Element.Value, objVal);
                                                    x.Property.SetValue(fi, objVal, null);
                                                  }
                       DataItems.Add(fi);
                     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:05:26.467

如果您的 XML 真的那么简单，您可以使用序列化来获得这种动态/自加载行为，方法是使用适当的[XML 序列化属性](http://msdn.microsoft.com/en-us/library/2baksw0z%28v=vs.80%29.aspx)装饰您的模型类，尽管对于文档中的每一级缩进至少需要一个类：

```
void Main()
{
    var xml = @"<Bar>
  <Body>
    <Header>
      <A>Value</A>
      <B>true</B>
    </Header> 
    <Data>
      <D>Value</D>
    </Data>
    <Data>
      <D>Value2</D>
    </Data>  
  </Body>
 </Bar>";

    var serializer = new XmlSerializer(typeof(Bar));
    serializer.Deserialize( new MemoryStream( Encoding.ASCII.GetBytes( xml ) ) ).Dump();
}

public class Bar
{
    public Body Body { get; set; }
}

public class Body
{
    public Header Header { get; set; }

    [XmlElement]
    public Data[] Data { get; set; }
}

public class Header
{
    public string A { get; set; }
    public string B { get; set; }
}

public class Data
{
    public string D { get; set; }
} 
```

（已**编辑**：我错过了只有 1 个 Header 元素）

# python - 如何从 scipy.interpolate.RectSphereBivariateSpline 反向计算纬度和经度？

> ID：14606376
> 
> 赞同：0
> 
> 时间：2013-01-30T14:28:38.367
> 
> 标签：python, scipy, interpolation

使用子包中函数的[THIS](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.RectSphereBivariateSpline.html)示例，我想反向计算以度为单位的纬度和经度数组，以及网格上每个坐标的插值数据值的数组。`RectSphereBivariateSpline``scipy.interpolate`

创建的插值数据对象`RectSphereBivariateSpline`似乎是数据值的*u*和*v*分量，网格的每个度数变化都有一个值（本例中纬度 = 180 和经度 = 360）。

### 那正确吗？

### 我如何回算纬度、经度及其各自的绘图数据值？

```
import numpy as np
from scipy.interpolate import RectSphereBivariateSpline

def geo_interp(lats,lons,data,grid_size_deg):
        '''We want to interpolate it to a global one-degree grid'''
        deg2rad = np.pi/180.
        new_lats = np.linspace(grid_size_deg, 180, 180) * deg2rad
        new_lons = np.linspace(grid_size_deg, 360, 360) * deg2rad
        new_lats, new_lons = np.meshgrid(new_lats, new_lons)

        '''We need to set up the interpolator object'''
        lut = RectSphereBivariateSpline(lats*deg2rad, lons*deg2rad, data)

        '''Finally we interpolate the data. The RectSphereBivariateSpline 
        object only takes 1-D arrays as input, therefore we need to do some reshaping.'''
        data_interp = lut.ev(new_lats.ravel(),
                        new_lons.ravel()).reshape((360, 180)).T
        return data_interp

if __name__ == '__main__':
        import matplotlib.pyplot as plt

        '''Suppose we have global data on a coarse grid'''
        lats = np.linspace(10, 170, 9) # in degrees
        lons = np.linspace(0, 350, 18) # in degrees
        data = np.dot(np.atleast_2d(90\. - np.linspace(-80., 80., 18)).T,
                        np.atleast_2d(180\. - np.abs(np.linspace(0., 350., 9)))).T

        '''Interpolate data to 1 degree grid'''
        data_interp = geo_interp(lats,lons,data,1)

        '''Looking at the original and the interpolated data, 
        one can see that the interpolant reproduces the original data very well'''
        fig = plt.figure()
        ax1 = fig.add_subplot(211)
        ax1.imshow(data, interpolation='nearest')
        ax2 = fig.add_subplot(212)
        ax2.imshow(data_interp, interpolation='nearest')
        plt.show() 
```

我想我可能会使用向量加法（即毕达哥拉斯定理），但这不起作用，因为每个度数变化我只有一个值，而不是点

```
pow((pow(data_interp[0,:],2.0)+pow(data_interp[:,0],2.0)),1/2.0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-22T09:14:36.767

似乎可以用于绘图的纬度和经度向量是在我们的“geo_interp”函数（“net_lats”和“new_lons”）中生成的。如果您在主程序中需要这些，您应该在函数之外声明这些向量，或者您应该让函数返回这些生成的向量以在主程序中使用。

希望这可以帮助。

# sitecore - 日期选择器样式 Sitecore

> ID：14606378
> 
> 赞同：0
> 
> 时间：2013-01-30T14:28:46.820
> 
> 标签：sitecore, web-forms-for-marketers

我正在使用**WFFM**（面向营销人员的 Web 表单）的 sitecore 项目，我有一个表单并想更改日期选择器的样式。默认情况下，它与 -'s 一起出现。我蚂蚁/的。

一种方法是：

```
$('.scfDatePickerTextBox').val().replace(/-/g,'/') 
```

没有选项可以更改样式？我知道的？任何帮助指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:05:12.457

当使用 WFFM 作为表单生成器时，我认为无法设置日期格式的样式。添加日期字段时，它始终显示为三个下拉列表：请参见此图像：[http ://content.screencast.com/users/MoonCrawler/folders/Jing/media/627a9a76-de8d-4ad7-9097-81e21d38f54c/2013- 01-30_1658.png](http://content.screencast.com/users/MoonCrawler/folders/Jing/media/627a9a76-de8d-4ad7-9097-81e21d38f54c/2013-01-30_1658.png)

如果要更改样式（显示），请分配不同的 css 类。如果您的日期显示为 -'s 而不是 /'s 那么我认为您使用的是自定义表单，您应该能够通过代码隐藏文件配置日期的输出。

如果这没有帮助，请提供 sitecore 版本、WFFM 版本和使用的表格类型。

# .net - 活动日志上不显示打开图形读取操作

> ID：14606380
> 
> 赞同：0
> 
> 时间：2013-01-30T14:28:54.597
> 
> 标签：.net, facebook-graph-api, azure, facebook-opengraph

我们执行了读取操作。这里发生了什么：

*   当我们从应用程序执行 POST 时，它运行良好，没有错误，并返回 ID。

*   使用此 ID，我可以在 Graph Api Explore 上看到有关我的读取操作的 json 数据。

*   article 参数，包含带有 OG 元标记到 Article 对象的 url。如果我们得到我们的 url 并使用 Facebook 调试工具 ( [https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug) )，我们可以看到正确的元标记，没有错误。

**现在，问题是：如果我在 Facebook 帐户上访问我的活动日志，我看不到读取操作。就像它从未发布到 Facebook 一样。**

奇怪的是，我们还有其他要 PUBLISH 的操作。它使用相同的代码来构建参数并发布到 Facebook，效果很好。

我们发布的 api 网址：

*   **阅读**：[https ://graph.facebook.com/me/news.reads](https://graph.facebook.com/me/news.reads)
*   **发布**：[https ://graph.facebook.com/me/news.publishes](https://graph.facebook.com/me/news.publishes)

我们正在向用户请求“ **publish_actions** ”权限。

文章参数 uri 上的 OG 元标记示例：

```
<meta property="fb:app_id" content="00000000"> 
<meta property="og:type" content="article"> 
<meta property="og:url" content="http://domain.cloudapp.net/article/article-title">
<meta property="og:site_name" content="Web Site Name">
<meta property="og:image" content="http://domain.blob.core.windows.net/public/cover/rld9a28ok8smi63d33q8s1iwhve8taf2.png">
<meta property="og:title" content="James Bond: 50 Years of Movies">
<meta property="og:description" content="James Bond: 50 Years of Movies infographic from hrblock.com is all about Bond, James Bond. See the top grossing films, iconic bond accessories and more."> 
<meta property="article:published_time" content="2013-01-28"> 
```

更多信息：

*   我在我们 Facebook 应用程序的开发人员部分。

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:36:25.327

**更新：**

Facebook 的一位工程师回复[了与内置操作类型有关的工单，](https://developers.facebook.com/bugs/452585014808810)说明：

> 抱歉，这是设计使然。我们已弃用这些操作类型，因为它们会造成糟糕的用户体验。用户抱怨这些行为是垃圾邮件。如果您愿意，您仍然可以发布和检索它们，但我们不会在用户的时间线或活动日志中显示它们。

[这张](https://developers.facebook.com/bugs/149874215169614)专门关于 news.reads 操作的工单被标记为上述工单的副本。

* * *

我目前有同样的问题。向 news.reads 发布的操作返回成功的 Open Graph 对象，但活动日志中的任何通知都消失了……事实上，我的应用程序过去的所有 news.reads 也都消失了。

我对 http://www.huffingtonpost.com/&fref=ts">Huffington Post 的社交阅读器应用程序做了一些试验，发现他们应用程序的阅读操作也没有在我的 Facebook 活动日志中生成任何通知，尽管事实上打开图表操作有效。

Facebook 的文档确实暗示，由于消费内容，他们正在不再强调应用程序操作（这可以通过所有 Open Graph 操作上相对较新的[“显式共享”选项看出）：](https://developers.facebook.com/docs/technical-guides/opengraph/explicit-sharing/)

> 有些活动在您的应用流程中自然发生，您可能希望发布这些活动，但用户可能不想在他们的时间线上明确突出显示这些活动。这些可能是诸如听歌或阅读文章之类的动作。

不幸的是，这只是猜测，因为 Facebook 没有提及他们的[开发者路线图](https://developers.facebook.com/roadmap/completed-changes/)的变化。

# angularjs - Laravel 和 AngularJS 视图结构

> ID：14606382
> 
> 赞同：11
> 
> 时间：2013-01-30T14:29:00.733
> 
> 标签：angularjs, laravel

我最近开始研究 angularjs，对我的新项目有很大帮助，但我坚持使用视图结构部分。

所以我真正不明白的是，如何建立它。如果我创建 html 角度部分而不创建 laravel 视图可以吗，所以 laravel 只会处理数据库 instert fecth edit delete，而角度部分视图将处理结果显示和表单。

所以我的壮举看起来像这样。我的资产文件夹

```
/css
/img
/js
 /lib
 /partials
         /home
             index.html
         /users
             users.html
             details.html 
```

并`restful controllers`为他们创建上面列出的句柄

或者，如果有人可以向我展示一个基本的例子，只是控制器和视图部分，如何建立一个显示结果的单个页面，以及一个通过 id 抓取的页面，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-30T16:44:30.363

在启动 Laravel 和 AngularJS 项目时，你负责后端和前端。基本上你有3个选择。

1.  将整个应用程序保存在同一个文件夹中，并将 angularjs 内容保存在公共文件夹中。
2.  将整个应用程序保存在同一个文件夹中，并将 AngularJS 视图保存在 laravel 视图文件夹中。
3.  完全分离你的后端和前端。

第一个和第二个选项是最简单的，如果您有一个中小型应用程序，则可以。在这种情况下，只需将所有 AngularJS 文件保存在 public 文件夹中，或者如果您选择将它们与 laravel 视图混合，只需删除 .blade 扩展名（或更改 laravel Blade/angularjs 模板语法）

我认为在做一个 SPA 应用程序时，最好让后端尽可能保持安静，重点是将逻辑推送到浏览器，这意味着如果你将 php 和 js 混合太多，你的应用程序可能会变得一团糟。

文件夹结构完全取决于您，您选择什么选项都没有关系。但一个好的开始是将您的应用程序分成逻辑部分。

```
/app
    application.js
    /partials
         user.html
         login.html
         etc.html
    /vendor
         Angular.js
         Lodash.js
         Etc.js
    /controllers
         User.js
         Etc.js
    /directives
         Charts.js
         Etc.js
    /filters
         Custom.js
         Etc.js
    /services
         Backend.js
         Etc.js 
```

您还可以检查[这个](https://github.com/mgechev/angularjs-style-guide)以获得良好的 angularjs 样式指南。

以上是一个基本的文件夹结构，你可以根据自己的喜好自定义它。如果您有一个小型应用程序，您可以删除文件夹并只拥有一个`controllers.js directives.js and services.js (etc)`并将所有 javascript 保存在同一个文件中。这完全取决于你。当应用程序增长时分离，并始终重构。

如果您选择第三个选项，您将不得不稍微自定义后端。这可能是最难的选择，但它也为您提供了极大的灵活性。基本上你可以把 laravel 放在一起，然后在 node.js 中构建后端，或者使用 laravel 作为另一个用 Ember.js 编写的 SPA 应用程序的后端，而无需对代码进行任何更改。请注意，如果您选择此选项，您将无法使用一些 laravel 的东西，例如刀片模板。您还必须为 CORS 设置您的 laravel 应用程序，并注意，在安全性方面可能会有更多编码，例如 CSRF 令牌等。

使用您的应用程序进行生产时，您可以使用构建工具将前端应用程序最小化并合并到一个文件中。结帐[ng-min](https://github.com/btford/ngmin)以进行缩小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T16:10:10.693

这是我正在进行的项目之一。您可以看到我在 Angular js 中如何获得部分视图。如上所述，没有必要将您的视图文件放在公用文件夹中。

[https://github.com/naveensky/wm-demo-tracker](https://github.com/naveensky/wm-demo-tracker)

# asp.net-mvc-3 - 菜单标题设置图像，但另一个页面仅显示图标

> ID：14606389
> 
> 赞同：1
> 
> 时间：2013-01-30T14:29:38.123
> 
> 标签：asp.net-mvc-3, razor

我的布局页面菜单标题设置图像...我的默认页面显示正确，但单击另一个页面仅显示菜单图标显示...

我的布局页面如下：

```
 <li><a href="@Url.Action("Index", "Home")"><span><img src="Images/menu-home.png" width="30" height="11" alt="home" border="0" /></span> </a></li>

       <li><a href="@Url.Action("About", "Home")"><span><img src="Images/menu-aboutus.png" width="52" height="11" alt="about us" border="0" /></span> </a></li>

       <li><a href="@Url.Action("IAmNew", "Home")"><span><img src="Images/menu-iamnew.png" alt="iam new" border="0" /></span> </a></li>

       <li><a href="@Url.Action("CommingSoon", "Home")"><span><img src="Images/menu-comingsoon.png" width="75" height="11" alt="coming soon" border="0" /></span> </a></li>

       <li><a href="@Url.Action("FastFavourites", "Home")"><span><img src="Images/menu-past-favorites.png" width="81" height="11" alt="past favorites" border="0" /></span> </a></li>

       <li><a href="@Url.Action("SiteMap", "Home")"><span><img src="Images/menu-sitemap.png" width="44" height="11" alt="sitemap" border="0" /></span> </a></li>

       <li><a href="@Url.Action("Contact", "Home")"><span><img src="Images/menu-contactus.png" width="63" height="11" alt="contact us" border="0" /></span> </a></li> 
```

# sql-server-2005 - 检测 NULL 日期并在 SSRS 中显示空字符串

> ID：14606390
> 
> 赞同：19
> 
> 时间：2013-01-30T14:29:43.790
> 
> 标签：sql-server-2005, reportingservices-2005

我正在尝试格式化 Reporting Services 报告中将包含`DateTime?`值或不包含值的某些单元格。

如果基础数据有一个`NULL`，`DateTime?`我不想显示任何内容（空单元格） - 如果该数据源包含一个值，我想以短日期格式显示日期（`dd.MM.yyyy`在我的语言环境中）。

所以我试着把这个公式放到相关的SSRS单元格中

```
=FormatDateTime(Fields!DatumBSE.Value, 2) 
```

但现在我得到`01.01.0001`了所有的`NULL`日期......

`IsNothing()`我似乎无法理解`NULL`如何在 SSRS (VB) 公式中执行此操作....在这种情况下显示一个空字符串？

**解决方案：**

我最终使用了这个功能：

```
=IIF(IsNothing(Fields!DatumBSE.Value), "", FormatDateTime(Fields!DatumBSE.Value, 2)) 
```

现在对我来说似乎工作得很好。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-30T14:52:16.993

我刚刚测试了以下表达式，它用`null`空字符串替换了日期：

```
=IIF(Fields!DatumBSE.Value is nothing, nothing, FormatDateTime(Fields!DatumBSE.Value, 2)) 
```

我要提出的另一个建议是，您可以通过`CASE`在日期值周围放置表达式来将日期格式化为报表数据集中的正确格式。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-04-22T07:13:54.560

使用这样的代码：

```
If(isNull([date field]),Null, elsequote) 
```

# qt - Gtk-CRITICAL **：IA__gtk_widget_style_get：断言“GTK_IS_WIDGET（小部件）”失败

> ID：14606396
> 
> 赞同：5
> 
> 时间：2013-01-30T14:29:56.900
> 
> 标签：qt, ubuntu, build, widget, gtk

在静态构建我的 qt 应用程序之后

```
./configure -static -debug-and-release  -confirm-license -nomake demos -nomake examples -nomake tools 
```

它工作正常，但我收到几条输出消息大喊：

```
(MyApplication:32030): Gtk-CRITICAL **: IA__gtk_widget_style_get: assertion `GTK_IS_WIDGET (widget)' failed 
```

真的有一个关键问题，我应该用不同的选项重建 qt 吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T00:40:53.223

这有点晚了，但希望它可以节省其他人一些时间。

对我来说，错误是由两件事的结合引起的：`QCleanlooksStyle`和`QTableWidget`. 在 ubuntu 上，默认样式是`QCleanlooksStyle`or `QGtkStyle`（继承自`QCleanlooksStyle`）。当 a`QTableWidget`用这些样式中的任何一种绘制时，我看到了该错误。我的解决方案是这样的：

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    a.setStyle(new QPlastiqueStyle());

    MainWindow w;
    w.show();

    return a.exec();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-05T14:57:24.103

在 PyQt5 中，您可以使用以下代码来避免该问题。

```
app = QApplication()
app.setStyle('Fusion') 
```

我认为这是“GTK+”风格的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T11:27:13.287

Qt的静态构建也有这个问题。如果您将此代码放在 main 方法中的所有其他内容之前，问题就会消失：

```
#ifdef Q_WS_X11
    qputenv("LIBOVERLAY_SCROLLBAR", 0);
#endif 
```

# php - PHP中的视频上传，找不到上传目录？

> ID：14606400
> 
> 赞同：0
> 
> 时间：2013-01-30T14:30:00.813
> 
> 标签：php, video, upload

我正在使用这个 php 视频上传脚本。我已经将我的目录路径设置为一个名为 video 的文件夹，我使用与 php 文件相同的目录创建了该文件夹。但我找不到正在上传的视频。

它不会进入我要求的目录吗？为什么有人可以帮助我。

我没有收到任何错误。

谢谢。

HTML：

```
<form action="upload_videos_process.php" method="post"   enctype="multipart/form-data">
  <label for="file">Filename:</label>
     <input type="file" name="uploadFile" id="uploadFile" />
<br />
<input type="submit" name="submit" value="Upload File" />
</form> 
```

.php 文件：

```
<?php

//This handles the maximum size for the video file in kbs

define ("MAX_SIZE","500");

//This function reads the extension of the file to ensure that it is an video file

function getExtension($str) {

$i = strrpos($str,".");

if (!$i) { return ""; }

$l = strlen($str) - $i;

$ext = substr($str,$i+1,$l);

return $ext;

}

//This variable handles an error and won't upload the file if there is a problem with it

$errors=0;

//checks if the form has been submitted

if(isset($_POST['Submit']))

{

//reads the name of the file the user submitted for uploading

$video=$_FILES['video']['name'];

//if it is not empty

if ($video)

{

//get the original name of the file from the clients machine

$video_filename = stripslashes($_FILES['video']['name']);

$video_extension = getExtension($filename);

$video_extension = strtolower($extension);

//if it is not a known extension, we will suppose it is an error and will not upload the file, otherwise we will do more tests

if (($video_extension != "mpeg") && ($video_extension != "avi") && ($video_extension != "flv") && ($video_extension != "mov"))

{

echo '<h1>Unknown extension!</h1>';

$errors=1;

}

else

{

//get the size of the video

$size=filesize($_FILES['video']['tmp_name']);

//compare the size with the maxim size we defined and print error if bigger

if ($size > MAX_SIZE*1024)

{

echo '<h1>You have exceeded the size limit!</h1>';

$errors=1;

}

//give the video a unique name in case a video already exists with the name on the server
$video_name=time().'.'.$extension;

//assign a folder to save the video to on your server

$newname="video/".$video_name;

//verify that the video has been loaded

$copied = copy($_FILES['video']['tmp_name'], $newname);

if (!$copied)

{

echo '<h1>Copy unsuccessful!</h1>';

$errors=1;

}}}}

//If no errors registered, print the success message

if(isset($_POST['Submit']) && !$errors)

{

echo "<h1>File Uploaded Successfully! Try again!</h1>";

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:35:58.340

你盲目地假设一切都运行良好。事情失败了。第一步：检查上传是否真的做了什么：

```
if ($_FILES['video']['error'] !== UPLOAD_ERR_OK) {
    die("Upload failed with error code " . $_FILES['video']['error']);
} 
```

错误代码在这里定义：http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

同样`copy()`，一旦您确认上传成功，请勿在上传文件上使用。有[move_uploaded_file()](http://php.net/move_uploaded_file)是有原因的——它有额外的安全检查来确保文件没有在服务器上被篡改，并且它实际上**移动**了文件。copy() 会降低性能，尤其是在大文件上，因为您正在复制文件，而不是仅仅做一些文件系统内务处理。

您还相信用户不会篡改文件名。在上传之前没有**什么**可以阻止恶意用户做的事情`ren nastyvirus.exe cutekittens.avi`，而且你的脚本会很高兴地接受那个 .exe，因为它的文件名只是被改变了。使用服务器端 mime-detection（例如[http://www.php.net/manual/en/book.fileinfo.php](http://www.php.net/manual/en/book.fileinfo.php)[在此处输入链接描述](http://www.php.net/manual/en/book.fileinfo.php)）来解决这个问题。**永远不要**相信来自用户的**任何东西。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:41:05.800

这可能是因为您的 php 配置不允许上传大文件。尝试设置

```
upload_max_filesize = 500M 
```

甚至在 php.ini 中大于 500M 并且正如 ppl 在评论中提到的那样，启用错误

```
ini_set('display_errors', 1);
ini_set('error_reporting', 8191); 
```

# sql - 如果在同一个表中匹配值，则更新记录

> ID：14606401
> 
> 赞同：1
> 
> 时间：2013-01-30T14:30:03.107
> 
> 标签：sql, ms-access, vba

我有一个带有事务列表的 MS Access 数据库。我正在尝试更新两条记录上的“匹配”字段，它们在字段中具有一些相同的值（文档编号、凭证编号、子标题）但数量相反。它还需要避免重复。

```
 Document Number     Amount   ABS     Match
    N6809561990112      438.48   438.48
    N6809561990112      438.48   438.48
    N6809561990112     -438.48   438.48 
```

我在 SQL 之后的最终结果应该是什么样子

```
 Document Number     Amount   ABS     Match
    N6809561990112      438.48   438.48   Y
    N6809561990112      438.48   438.48
    N6809561990112     -438.48   438.48   Y 
```

表名是“tblUnmatched”

我尝试了以下方法，但它将表中的每条记录更新为“Y”

```
strSql = "Update tblUnmatched SET match = 'Y' WHERE EXISTS(select * " & _
        "from tblUnmatched t1 " & _
        "inner join tblUnmatched t2 on " & _
        "t1.[DOCUMENT NUMBER] = t2.[DOCUMENT NUMBER]" & _
        "where t1.ABS = t2.ABS AND t1.AMOUNT <> t2.AMOUNT AND t1.SUBH = t2.SUBH)"
DoCmd.RunSQL strSql 
```

我也试过这个，但它无法处理重复的问题。

```
strSql = "Update tblUnmatched SET match = 'Y' WHERE [DOCUMENT NUMBER] IN(select t1.[DOCUMENT NUMBER] " & _
        "from tblUnmatched t1 " & _
        "inner join tblUnmatched t2 on " & _
        "t1.[DOCUMENT NUMBER] = t2.[DOCUMENT NUMBER]" & _
        "where t1.ABS = t2.ABS AND t1.AMOUNT <> t2.AMOUNT AND t1.SUBH = t2.SUBH)"
    DoCmd.RunSQL strSql 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:38:10.767

在没有主键字段的 Access SQL 中，您的任务是不切实际的。尽管您导入的数据源中没有这样的键，但这并不禁止您在 Access 中添加一个。

将自动编号主键 , 添加`id`到`tblUnmatched`. 然后对于每一批新的传入数据：

1.  导入临时表，`tblScratch`
2.  `DELETE FROM tblUnmatched`
3.  将行追加`tblScratch`到`tblUnmatched`

`SELECT FROM <your data source>`（如果您可以使用直接附加到`tblUnmatched`，而不是首先导入到 ，则该过程可能会更简洁`tblScratch`。）

将以下`SELECT`语句另存为`qryFindMatches`：

```
SELECT
    sub.[Document Number],
    sub.Amount,
    sub.MinOfid,
    DCount(
        "*",
        "tblUnmatched",
        "[Document Number]='" & [Document Number]
            & "' AND Amount = -1 * " & [Amount]
        ) AS match_count
FROM
    (
        SELECT [Document Number], Amount, Min(id) AS MinOfid
        FROM tblUnmatched
        GROUP BY [Document Number], Amount
    ) AS sub; 
```

那么`UPDATE`你想要的可以很容易地创建。注意性能可能不会很快；希望您可以每月容纳一次。

```
UPDATE tblUnmatched
SET [Match] = True
WHERE id In
    (
        SELECT MinOfId
        FROM qryFindMatches
        WHERE match_count > 0
    ); 
```

我在您的示例数据中添加了一行，并使用 Access 2007 进行了测试。我认为这就是您想要的...

```
id Document Number Amount   Match
 1 N6809561990112   $438.48 True
 2 N6809561990112   $438.48 False
 3 N6809561990112 ($438.48) True
 4 N6809561990112     $5.00 False 
```

# html - WebGL：防止颜色缓冲区被清除

> ID：14606408
> 
> 赞同：6
> 
> 时间：2013-01-30T14:30:16.647
> 
> 标签：html, webgl

即使我删除

```
gl.clearColor(c[0],c[1],c[2],1.0);
gl.clear(gl.COLOR_BUFFER_BIT ); 
```

在下一个绘制周期开始时屏幕仍会被清除。有没有办法防止这种情况。我想实现某种重绘效果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T02:03:36.147

当您创建 WebGLRenderingContext 时，您可以告诉它保留绘图缓冲区。

```
gl = someCanvas.getContext("webgl", { preserveDrawingBuffer: true }); 
```

默认是`preserveDrawingBuffer: false`因为它在某些情况下更快。

# android - 以编程方式在 TextView 中居中文本

> ID：14606412
> 
> 赞同：3
> 
> 时间：2013-01-30T14:30:28.373
> 
> 标签：android, android-layout, textview

我以编程方式创建了一个带有文本和背景可绘制对象的 TextView。我想在 TextView 中居中文本，但文本居中在顶部。

![在此处输入图像描述](../Images/a5136aa2135524ce3fb7ca93c247b8d7.png)

这是我在 TextView 中居中文本的代码：

```
protected class TileView extends TextView{
    private int tileType;
    private int col;
    private int row;

protected TileView(Context context, int row, int col, int tileType) {

    super(context);
    this.col = col;
    this.row = row;
    this.tileType = tileType;

    String result = Integer.toString(RandomNumber(1,9));            
    Drawable image = getResources().getDrawable(tile_id[tileType]);
    setBackgroundDrawable(image);
    setClickable(true);
    setText(result);        
    setTextAppearance(context, R.style.boldText);           
    setOnClickListener(GameView.this);
}
} 
```

这是我在 onLayout() 中的代码

```
int left = oneFifth * tileView.getCol();
int top = oneFifth * tileView.getRow();
int right = oneFifth * tileView.getCol() + oneFifth;
int bottom = oneFifth * tileView.getRow() + oneFifth;
tileView.layout(left, top, right, bottom);
tileView.setGravity(Gravity.CENTER); 
```

如何在 TextView 中将文本居中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:33:15.770

试试这个希望它可以帮助你

```
textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);   

 yourTextView.setGravity(Gravity.CENTER); 
```

检查此[链接](https://stackoverflow.com/questions/12775743/programmatically-center-textview-text)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:34:36.933

你可以这样做：

```
textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:35:06.190

您必须将其添加到 layoutparams 中，例如：

```
LayoutParams params = new LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
            params.weight = 1.0f;
            params.gravity=17; 
```

17 是[文档](https://developer.android.com/reference/android/view/Gravity.html#CENTER)中 CENTER 的常量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T14:32:51.117

我使用 .XML 将我的文本居中 `android:gravity="center_vertical|center_horizontal"`

# c# - 检索不同的行并声明标量变量

> ID：14606421
> 
> 赞同：1
> 
> 时间：2013-01-30T14:30:51.810
> 
> 标签：c#, sql-server

我正在尝试从特定的“deliverySerial”中从我的数据库中检索不同的行。

但是我遇到了一个错误，提示我“声明标量变量 =“@deliverySerial”。

我尝试了许多其他方法，但问题仍然存在。

这是连接：

```
public class DlDbConn
{
public DlDbConn()
{

}

public SqlConnection GetConnection()
{
    SqlConnection dbConn;

    dbConn = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\test.mdf;Integrated Security=True;User Instance=True");

    return dbConn;
   }
  } 
```

数据层中的方法：

```
 private String errMsg;
    private DlDbConn dbConn;

public testing()
{

    dbConn = new DlDbConn();
}

public DataSet Details(String supplierLogo, String supplierName, String supplierAddr, int poNum, String dateSent, int deliverySerial, String deliveryDate,
                          int quantity, String catSerial, String catName)
{
    SqlConnection conn;
    StringBuilder sql;
    SqlDataAdapter da;
    DataSet detail;

    conn = dbConn.GetConnection();
    detail = new DataSet();
    sql = new StringBuilder();

    sql.AppendLine("SELECT * FROM (select PO.poNum, PO.dateSent, ViewDelivery.deliverySerial, Supplier.supplierName, Supplier.supplierAddr, Supplier.supplierLogo, ViewDelivery.deliveryDate,  Catalog.catSerial, Catalog.catName, PO.quantity, ROW_NUMBER() OVER (PARTITION BY Catalog.catSerial ORDER BY Catalog.catSerial) AS num FROM PO INNER JOIN Supplier ON PO.supplierID = Supplier.supplierID INNER JOIN ViewDelivery ON PO.poNum = ViewDelivery.poNum INNER JOIN Catalog ON PO.catSerial = Catalog.catSerial)AS a WHERE a.num = 1 ");
    sql.AppendLine("AND ViewDelivery.deliverySerial = @deliverySerial");
    try
    {
        conn.Open();
        da = new SqlDataAdapter(sql.ToString(), conn);
        da.SelectCommand.Parameters.AddWithValue("@deliverySerial", deliverySerial);
        da.Fill(detail);
    }
    catch (Exception ex)
    {
        errMsg = ex.Message;
    }
    finally
    {
        conn.Close();
    }

    return detail;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:45:46.157

您必须使用 MySQL 的参数表示法，`?`而不是`@deliverySerial`在您的查询中。

此外，`ViewDelivery`查询的外部部分无法访问表。

利用：

```
AND a.deliverySerial = ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:02:17.970

我认为您的查询不正确。这是[小提琴](http://sqlfiddle.com/#!2/c5008/1)——你不能在 ViewDelivery 上查询，因为它在你的子查询之外。

尝试从您的 WHERE 条件中删除它，因为该字段在您的子查询中返回：

```
sql.AppendLine("AND deliverySerial = @deliverySerial"); 
```

我认为您不需要“？”，但我可能弄错了。

祝你好运。

# android - 缓存 Google 地图以供离线使用 (api v2)

> ID：14606425
> 
> 赞同：5
> 
> 时间：2013-01-30T14:30:59.803
> 
> 标签：android, google-maps, google-maps-android-api-2

我想在 Android 应用程序中实现这一点，并能够在离线模式下使用应用程序。是否可以通过 Android google maps api v2 做到这一点？App 谷歌地图可以做到，所以我想是可以实现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:33:33.443

Google map android API V2 可以在阅读时保存缓存。您可以编写一个循环来读取所有地图并获取缓存并离线使用

# .net - 如何使用 windows azure 创建虚拟数据室

> ID：14606429
> 
> 赞同：0
> 
> 时间：2013-01-30T14:31:11.140
> 
> 标签：.net, azure

我对应用程序开发很陌生，实际上才刚刚开始。我希望创建一个“虚拟数据室”，使多个用户能够安全地访问一组文件（总共大约 10gb 的数据），并且还应该记录数据访问。

该应用程序将呈现一个基于网站的界面，用户可以通过任何标准的网络浏览器访问所述文件。而且由于我最熟悉 .NET 和 C#，所以这将是我选择的平台。

我对 Azure 平台不是很熟悉，但我对基本的编程概念有深刻的理解，并且使用过 C# .NET 和 Java。

最好的方法是什么？我决心使用 Azure，因为在开发过程中了解该平台对我来说同样重要。

我无法弄清楚虚拟机、网站和云服务等各种服务有何不同。指向良好资源的链接也会有所帮助。

但首要任务是能够构建和部署应用程序。我愿意接受所有建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:27:31.317

如果你想称之为答案。

如果您使用过 ASP.NET 网站，那么不同之处在于您在 Azure 中有一个网站，并且文件存储在 blob 中而不是文件系统中。如果您使用 MemberShip 进行身份验证，那么它的设置会有所不同。

# ssis - 哪个 SSIS 转换可以执行 SQL 查询中使用的“NOT IN”约束？

> ID：14606432
> 
> 赞同：3
> 
> 时间：2013-01-30T14:31:18.877
> 
> 标签：ssis

我有两个具有相似列的 OLEDB 数据源：

```
TMP_CRUZTRANS
-------------
CUENTA_CTE numeric (20,0)

TMP_CTACTE_S_USD
----------------
CON_OPE numeric(20,0) 
```

我需要减去这两个表之间的所有相似值并保留不同的行。SSIS 中是否有可以执行**`NOT IN`**SQL 查询中通常使用的约束的转换/任务？

目前，我正在使用`Execute SQL Task`on执行此操作`Control Flow`。

![在此处输入图像描述](../Images/2a8b0429c15e799f6876dc6bbdf7431b.png)

顶部数据流创建第一个表`TMP_CRUZTRANS`（合并其他 2 个表之间的连接......但我想这对我的问题并不重要）我需要在第二个表中保留不同的值。

在 中`Execute SQL Task`，我有以下声明：

```
INSERT  INTO [dbo].[TMP_CYA] 
SELECT RUT_CLIE, CUENTA_CTE, MONTO_TRANSAC 
FROM [dbo].[TMP_CRUZTRANS]
WHERE CUENTA_CTE NOT IN (SELECT CON_OPE FROM TMP_CTACTE_S_USD) 
```

最后，有了这张新桌子，`TMP_CYA`我可以继续我的工作了。

这种方法的问题是`TMP_CRUZTRANS`得到了大约 500 万行，因此使用 Execute SQL Task 将所有这些数据插入到表中非常慢。执行此操作大约需要 5 个小时。这就是为什么我需要在数据流任务中执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T15:03:19.933

您可以**`Lookup transformation`**在 Data Flow 任务中使用 available 来实现您的要求。

这是一个示例，说明了您要实现的目标。

创建带有数据流任务的包。在数据流任务中，使用 OLE DB Source 从源表中读取数据`TMP_CRUZTRANS`。使用查找转换来验证`dbo.TMP_CTACTE_S_USD`给定列之间的表是否存在值。然后将不匹配的输出重定向到 OLE DB 目标以将行插入表中`dbo.TMP_CYA`

以下是数据流任务代替您当前使用的执行 SQL 任务的样子。

![数据流任务](../Images/f87588990355336d59bd3a7c8dc89768.png)

配置`Lookup transformation`如下图：

在 General 选项卡页上，选择`Redirect rows to no match output`from，`Specify how to handle rows with no matching entries`因为您只对不匹配的行感兴趣。

![查找转换一般](../Images/41bc99ecd14e62a0ad1df57688deaebe.png)

在 Connection 选项卡页面上，选择适当的 OLE DB Connection manager 并选择表 dbo.TMP_CTACTE_S_USD。这是您要验证数据的表。

![查找转换连接](../Images/e145e6412742512a29dd8b49075470ae.png)

在 Columns 选项卡页面上，将 CUENTA_CTE 列拖放到 CON_OPE 上，以建立源表和查找表之间的映射。单击确定。

![查找转换列](../Images/3e3832e0ea51eee2756c03668649bd98.png)

当您将*Lookup 转换*与*OLE DB Destination*连接时，将出现**Input Output Selection**对话框。请务必选择**`Lookup No Match Output`**。

这是执行包之前的示例。

![执行前](../Images/c3c05af14edcab88fa822c5e879e23f7.png)

您可以看到只有 2 行不匹配的行已传输到 OLE DB 目标。

![执行](../Images/5ae85a5ef3550d3b39b20b50e379fcdc.png)

您可以注意到，在包执行后，目标表现在包含两个不匹配的行。

![执行后](../Images/0c53111e63be362184d854fa5da84229.png)

希望有帮助。

# c++ - std::function 指向接受右值争论的成员函数的指针 MSVC2010 SP1

> ID：14606433
> 
> 赞同：2
> 
> 时间：2013-01-30T14:31:21.227
> 
> 标签：c++, rvalue-reference, std-function, stdbind

我想创建一个 std::function 绑定到采用右值参数的成员函数。这是我无法编译的尝试（“xxfunction(154): error C2664: ... You cannot bind an lvalue to a rvalue reference”等等）。

```
 class C
    {
    public:
        void F(std::string &&s)
        {
                //do something with s
        }
        C(){}
    };
    C c;
    std::function<void(std::string&&)> pF = std::bind(&C::F,&c,std::placeholders::_1);
    //somewhere far far away
    pF(std::string("test")); 
```

我做了一些阅读，我认为这与 std::function 没有使用完美转发有关，但我不知道如何让它工作。

编辑：

```
std::function<void(std::string&)> pF = [&c](std::string&in){c.F(std::move(in));}; 
```

这是一个半可行的解决方法，但它并不完美，因为调用 pF 现在将使用左值并移动它。

```
std::string s("test");
pF(s);
auto other = s; //oops 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:42:11.820

您的`std::bind`实现似乎不支持通过占位符进行完美转发，但是由于您拥有 C++11 并且`std::bind`无论如何都很难看，请使用 lambda：

```
std::function<void(std::string&&)> pF 
  = [&c](std::string&& str)
{ 
  c.F(std::move(str)); 
}; 
```

**编辑：**

*Note*: Although accepted, this answer is not a solution to the problem at hand, because it is not `std::bind` but MSVC10's `std::function` implementation that is flawed. However, the suggestion has led to a workaround and therefore was accepted by [PorkyBrain](https://stackoverflow.com/users/893819/porkybrain).

# iphone - 当我们的 iPhone 应用程序崩溃时

> ID：14606438
> 
> 赞同：0
> 
> 时间：2013-01-30T14:31:38.123
> 
> 标签：iphone, memory-management, crash

告诉我我们的 iPhone 应用程序会因为内存不足而崩溃

(1) 当它使用的内存比 RAM 内置的多时。

或者

(2)它独立于 RAM 内存，当应用程序占用内存超过包括辅助（虚拟）内存的整个 iPhone 时，它​​会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:35:28.183

iPhone 上没有虚拟内存。系统和所有应用程序必须适合 RAM。如果您的应用开始使用大量内存并接近此限制，您将收到内存警告。

App Delegate 将收到

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application 
```

大多数 UIKit 视图控制器会通知他们的子视图控制器这已经发生了。这意味着在您的视图控制器中，您可能会收到以下消息：

```
- (void)didReceiveMemoryWarning 
```

还发布了一个通知，您可以收听

```
UIApplicationDidReceiveMemoryWarningNotification 
```

在这些方法中，您需要摆脱可能占用大量您不再需要的内存的对象，例如图像缓存和大量数据。

如果您的应用程序继续消耗内存，那么您的应用程序将被系统杀死。这对用户来说就像一个崩溃。

# jboss - JBoss AS7 域管理设置

> ID：14606440
> 
> 赞同：1
> 
> 时间：2013-01-30T14:31:40.260
> 
> 标签：jboss, jboss7.x

是否需要有一个单独的实例来充当域主主机控制器？相同的 JBoss 安装是否还可以启动从属主机控制器，其中服务器组在不同的端口偏移上运行多个服务器实例？

那么如果有 2 个虚拟机需要在每个虚拟机中运行 3 个服务器实例，那么第一个虚拟机也可以是域控制器吗？或者在这 2 个 VM 中的一个或不同的 VM 上运行一个单独的域控制器是个好主意吗？

域控制器是否会在控制多个实例时产生单点故障？如果域控制器出现故障会怎样？是否必须启动和停止从属主机控制器及其服务器实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:41:47.413

您可以在每台主机上运行多个 JBoss 实例，只需在文件中添加`server`元素。`host-master.xml`

至于端口，域控制器（与主机控制器一样，作为域控制器是具有额外中心化角色的主机控制器）仅开放管理端口。每个节点仅存在一个控制器（主机或域）。`server`在主机配置文件中为每个服务器创建一个 JBoss 服务器`servers`（可以提供端口偏移量）。

我认为让每个 VM 运行一件事更容易管理（VM 已经这样做了），但如果你的资源有限（VM 有开销），你可以使用一个节点作为域控制器 + JBoss 实例.

域控制器（还没有？）集群，但是当它关​​闭时，JBoss 实例仍将运行，因此您只会失去配置的中心点。JBoss 实例实际上会退回到独立模式，您仍然可以更新它们的配置，但只能直接连接到它们中的每一个。当控制器返回时，配置的中心点将返回。

# android - 从 sqlite android 检索数据

> ID：14606444
> 
> 赞同：0
> 
> 时间：2013-01-30T14:31:43.303
> 
> 标签：android, android-sqlite, android-alertdialog, android-cursor

我正在使用以下代码在 listView 中显示来自 sqlite 的数据

```
public class AndroidSQLite extends Activity {

ListView listContent;
private SQLiteAdapter mySQLiteAdapter;
Button addZekr;
EditText zekrTxtEditor;

String[] items;
 boolean[] itemsChecked ;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_android_sqlite);

    listContent = (ListView)findViewById(R.id.contentlist);

    mySQLiteAdapter = new SQLiteAdapter(this);
    mySQLiteAdapter.openToWrite();
    mySQLiteAdapter.deleteAll();

    mySQLiteAdapter.insert(getResources().getString(R.string.zekr1));
    mySQLiteAdapter.insert(getResources().getString(R.string.zekr2));
    mySQLiteAdapter.insert(getResources().getString(R.string.zekr3));
    mySQLiteAdapter.insert(getResources().getString(R.string.zekr4));
    mySQLiteAdapter.insert(getResources().getString(R.string.zekr5));

    // Open the same SQLite database and read all it's content.
    mySQLiteAdapter = new SQLiteAdapter(this);
    setDataInList();

    Button addZekr = (Button) findViewById(R.id.addZekrBtn);
    addZekr.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            zekrTxtEditor = (EditText)findViewById(R.id.zekr_text);
            String newZekr = zekrTxtEditor.getText().toString();
            System.out.println("newZekr: "+newZekr);
             mySQLiteAdapter.openToWrite();
             mySQLiteAdapter.insert(newZekr); 

             setDataInList();

            }
        });

    mySQLiteAdapter.close();

    listContent.setOnItemLongClickListener(new OnItemLongClickListener() {

        @Override
        public boolean onItemLongClick(AdapterView<?> parentView, View childView,
                int position, long id) {
            // TODO Auto-generated method stub

            String itemPostion = listContent.getItemAtPosition(position).toString();
            System.out.println("in Long Press itemPostion: "+itemPostion);

            return false;
        }

    });

    listContent.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parentView, View childView,
                int position, long id) {
            // TODO Auto-generated method stub
            String itemPostion = listContent.getItemAtPosition(position).toString();
            System.out.println("in Normal Press itemPostion: "+itemPostion);
        }
    });

}

 public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.delete: {

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Dialog with simple text");
            builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                    for (int i = 0; i < items.length; i++) {
                    if (itemsChecked[i]) {
                        Toast.makeText(getBaseContext(), items[i] + " checked!", Toast.LENGTH_LONG).show();
                    }
                }
                }
            });
            builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    Toast.makeText(getBaseContext(), "Cancel clicked!", Toast.LENGTH_LONG).show();
                }
            });
            builder.setMultiChoiceItems(items, itemsChecked, new DialogInterface.OnMultiChoiceClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which, boolean isChecked) {
                    Toast.makeText(getBaseContext(), items[which] + (isChecked ? "checked!" : "unchecked!"), Toast.LENGTH_SHORT).show();
                }
            });
            builder.create();
            builder.show();
        }

        break;
        }
        return true;
    }

public void setDataInList(){

        mySQLiteAdapter.openToRead();

        Cursor cursor = mySQLiteAdapter.queueAll();
        startManagingCursor(cursor);

        items = new String[]{SQLiteAdapter.KEY_CONTENT};
        int[] to = new int[]{R.id.text};

        String myContent = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_CONTENT)).toString().trim();

       // long id = cursor.getLong(cursor.getColumnIndex(SQLiteAdapter.KEY_ID));

        System.out.println("itemssss: "+myContent);

        itemsChecked = new boolean[items.length];

        SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(getApplicationContext(), R.layout.row, cursor, items, to);

        listContent.setAdapter(cursorAdapter);

        mySQLiteAdapter.close();
}

} 
```

我想要的是获取 KEY_CONTENT 列的数据并将它们放在一个数组中以在 AlertDialog 中显示它们

所以我把这条线

```
String myContent = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_CONTENT)).toString().trim(); 
```

但它给了我这个例外：

> CursorIndexOutOfBoundsException：请求索引 -1，大小为 5

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:07:26.453

异常意味着光标位于第一行**之前**，就像它创建时的情况一样。[您应该使用moveToFirst()](https://developer.android.com/reference/android/database/Cursor.html#moveToFirst%28%29)将其移动到第一行

例如 ：

```
if (moveToFirst()) {
    String myContent = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_CONTENT)).toString().trim();
    ...
} else {
   // no data
} 
```

或者，您可以使用[moveToNext()](https://developer.android.com/reference/android/database/Cursor.html#moveToNext%28%29)，例如在循环中。

# .net - WPF Viewbox 和 WebBrowser 控件

> ID：14606456
> 
> 赞同：4
> 
> 时间：2013-01-30T14:32:03.207
> 
> 标签：.net, wpf, xaml

有人知道为什么 WPF`Viewbox`控件不能缩放 WPF`WebBrowser`控件吗？

有可能做吗？

**XAML：**

```
<Window x:Class="WpfApplication12.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Background="Yellow">
<Viewbox Stretch="Fill"  VerticalAlignment="Stretch" HorizontalAlignment="Stretch" >
<WebBrowser VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Source="http://stackoverflow.com"></WebBrowser>
</Viewbox>
</Window> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:33:08.327

因为它继承自：（`System.Windows.Interop.HwndHost`承载 Win32 窗口）

它不是纯 WPF 对象。

然后效果，缩放等不能应用在它上面。

WPF 4.5 Developer Preview 支持 HwndHost 控件的缩放、旋转、倾斜，但他们似乎在最终版本中删除了此功能。

# java - 无法使用 Spring Converter 将 Enum 转换为 int

> ID：14606457
> 
> 赞同：2
> 
> 时间：2013-01-30T14:32:07.910
> 
> 标签：java, apache-flex, blazeds, spring-flex

我的应用程序使用 BlazeDS 在 Flex 和 Java 之间进行通信。我正在使用 Spring 在 Java 中进行 BlazeDS 集成。

我有一个名为 TransactionStatus 的枚举。在 flex 方面，相应的属性被设置为整数。我正在尝试使用[自定义转换器](http://static.springsource.org/spring-flex/docs/1.5.x/reference/html/index.html#amf-custom-converters)来处理这种转换。这是我的转换器：

```
public class TransactionStatusIntConverter implements Converter<TransactionStatus, Integer> {

    @Override
    public Integer convert(TransactionStatus src) {
        if(src == null){
            return 0;
        } else {
            return src.getValue();
        }
    }

} 
```

和

```
public class IntTransactionStatusConverter implements Converter<Integer, TransactionStatus> {

    @Override
    public TransactionStatus convert(Integer src) {
        return TransactionStatus.fromInt(src);
    }

} 
```

当从 Flex 客户端向 Java 发送数据时，转换成功，我得到了预期的 TransactionStatus 实例。但是当从 Java 向 Flex 发送数据时，从不执行转换函数。这两个转换器肯定都在我的 ConfigProcessor 类中注册

```
@Override
protected void configureConverters(ConverterRegistry registry) {
    registry.addConverter(new IntTransactionStatusConverter());
    registry.addConverter(new TransactionStatusIntConverter());
} 
```

这里发生了什么？

# asp.net-mvc - 如何格式化出现在 Html.DropDownListFor 中的日期？

> ID：14606458
> 
> 赞同：1
> 
> 时间：2013-01-30T14:32:17.743
> 
> 标签：asp.net-mvc, razor

我有一个对象：

```
class Milk {
    public DateTime ExpirationDate {get;set;}
    ...
} 
```

在模型的集合中：

```
class GroceryModel {
    public IList<Milk> Milks {get;set;}
    public Milk SelectedMilk {get;set;}
} 
```

我正在使用 Razor 填充一个下拉列表：

```
@Html.DropDownListFor(m => m.ExpirationDate, Model.Milks, ...); 
```

如何格式化该下拉列表中显示的日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:55:53.380

在您的控制器中：

model.SelectMilk 将保存一个 SelectListItems 列表

```
 model.SelectMilk =
            Milks.Select(
                item =>
                new SelectListItem
                    {
                        Selected = false, 
                        Value = item.ExpirationDate , 
                        Text = datetime.ToShortDateString() //or whatever format you need
                    }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:54:32.027

您可以尝试使用以下方法注释属性：

```
[DisplayFormat(DataFormatString = "{0:MM/dd/yyyy}", ApplyFormatInEditMode = true)] 
```

# ios - 为什么reloadData会重置UITableView的高度？

> ID：14606460
> 
> 赞同：1
> 
> 时间：2013-01-30T14:32:20.333
> 
> 标签：ios, uitableview, height, reloaddata

为了让我的问题可以理解，这里是我的代码的摘录：

```
[UIView animateWithDuration:0.5 animations:^{

    taskTable.frame = CGRectMake(
        taskTable.frame.origin.x,
        taskTable.frame.origin.y,
        taskTable.frame.size.width,
        127
    );

} completion:^(BOOL finished) {

    [self.taskTable reloadData];

}]; 
```

这是基本情况：taskTable 是一个 UITableView，它集成在一个 UIViewController 中。第一个块正常工作，taskTable 在高度上减少了 0.5 秒。

我的问题从完成块开始：重新加载taskTable后，taskTable再次等于原始高度。顺便说一下，故事板中设置了原始高度。

有人可以告诉我这样做的原因吗？我可以防止这种行为吗？

这是故事板的快照：

![在此处输入图像描述](../Images/3fc10f2b7727797a0b3dd057dc40ba79.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:25:47.650

给这个问题一个答案：

您可以禁用自动布局来解决问题，但这不是最好的方法。

我如何解决这个问题：我在超级视图的顶部和 tableView 之间定义了一个约束。之后，我在代码中添加以下内容（taskTableTop 是那个约束）：

```
[self.view removeConstraint:taskTableTop]; 

[self.view addConstraint:[NSLayoutConstraint constraintWithItem:taskTable
                                                      attribute:NSLayoutAttributeTop
                                                      relatedBy:NSLayoutRelationEqual
                                                         toItem:jobDesc
                                                      attribute:NSLayoutAttributeBottom
                                                     multiplier:0
                                                       constant:size.height + 38]]; 
```

我不知道是否有更简单的方法可以做到这一点。

如果有人准备好更好的答案，请随时告诉我（我们）;o）

# vb.net - VB.NET 将枚举文件夹添加到目录

> ID：14606461
> 
> 赞同：0
> 
> 时间：2013-01-30T14:32:28.340
> 
> 标签：vb.net, list, directory

我需要创建一个应用程序，允许普通用户将文件夹添加到已经包含文件夹的目录中。

它的设置方式是文件夹按作业编号排序，因此我们有几个以数字命名的文件夹。

我需要做的是读取一个目录并知道该目录中的最后一个数字是什么，并根据用户输入添加更多文件夹。

我在这里查看并找到了很多方法来列出现有文件夹中的目录。比如这个[Get all folder/directories list in VB.net](https://stackoverflow.com/questions/2428136/get-all-folder-directories-list-in-vb-net)但我对 VB.NET 并不熟悉，因为我需要修改它以将最后一个文件夹保留在目录中并使用它来添加更多。

# android - 使用 corona 开发应用程序并将其添加到现有的 android 原生应用程序中

> ID：14606464
> 
> 赞同：0
> 
> 时间：2013-01-30T14:32:31.287
> 
> 标签：android, ios, coronasdk, native-code

我要求我必须使用 Corona SDK 开发一个应用程序，然后将此应用程序作为一项功能添加到现有的 Android 和 iOS 应用程序中。意味着有两个现有的适用于 Android 和 iOS 的应用程序。我实际上必须添加一个游戏功能。我听说 Corona 是跨平台 SDK。所以我决定在 Corona 中创建，然后将其源代码添加到 Android 和 iOS 应用程序中。我想问有可能吗？corona 是否提供为 Android 和 iOS 平台生成本机代码的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:49:34.597

您可以使用 Corona Enterprise 来做到这一点。

Corona Enterprise 使 Corona 作为您应用程序的库运行，因此 Corona Enterprise 完全按照您的意愿行事。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T14:46:18.323

不，电晕构建过程对您关闭。您不会获得应用程序的任何本机源代码，您将获得针对您要求构建的平台编译的独立应用程序。

# php - If 语句和 While 循环之间的区别

> ID：14606466
> 
> 赞同：4
> 
> 时间：2013-01-30T14:32:39.557
> 
> 标签：php

我阅读了 PHP.com 关于[While 循环](http://php.net/manual/en/control-structures.while.php)的手册。

我不明白 PHP 中 While 循环的目的。

对我来说，它看起来就像一个`if`声明。

if 语句和 while 循环有什么区别？

while 循环是如何工作的，它们有什么作用，什么时候应该使用它们？

例如，不能这样：

```
$i = 1;
while ($i <= 10) {
    echo $i++;
} 
```

像这样完成？：

```
$i = 1;
if ($i <= 10) {
    echo $i++;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T14:34:15.187

`if`语句检查表达式是真还是假，然后仅当它为真时才运行语句内的代码。循环内的代码**只运行一次**......

```
if (x > y)
{
   // this will only happen once
} 
```

`while`语句是一个循环。基本上，无论表达式为真多长时间，**它都会继续执行**while 语句中的代码。

```
while (x > y)
{
  // this will keep happening until the condition is false.
} 
```

**何时使用 while 循环：**

当您不确切知道可能必须循环一个条件的次数时，最好使用循环 - 如果您确切知道要测试一个条件的次数（例如 10 次），那么您将使用 for 循环反而。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T14:36:59.247

当条件为真时，while 循环将根据需要运行多次，即，*直到该条件为假*。

如果条件为真，if 语句将执行**一次。**

当您刚刚学习一门语言时，理解此类概念的一个好方法是尝试它们：

```
<?php
$i = 1;
while ($i <= 10) {
    echo $i++;
}

echo "\n";

$i = 1;
if ($i <= 10) {
    echo $i++;
} 
```

这导致：

```
12345678910
1
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T06:08:53.713

if 命令一次只在一个条件下运行，并且一次只在一个语句中执行

while 循环用于无限时间循环语句 while 一次在多个语句中执行

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-04-24T20:42:41.943

这是一个例子：

假设您想要一个循环遍历数组并为数组的每个元素发出一声哔哔声的脚本。

WHILE 循环不会为空数组生成哔声。

FOR 循环将始终至少运行一次，因此空数组会发出一声哔哔声。

# tidesdk - 使用 Tidesdk 下载文件

> ID：14606472
> 
> 赞同：1
> 
> 时间：2013-01-30T14:33:07.473
> 
> 标签：tidesdk

如何下载文件并将其存储在本地？我搜索了文档和谷歌，找不到它的例子。

我试过这个：

```
this.copyRemote = function(path,path2){
    reader = Ti.Network.createHTTPClient();
    writer = Ti.Filesystem.getFile(path2);

    reader.open('GET',path);
    reader.receive(writer);
} 
```

但是 Tidesdk 在尝试下载文件时崩溃，控制台上的最后一条消息是：

```
[12:42:39:647] [Ti.Network.HTTPClient] [Debug] Changing readyState from 0 to 1 for url:https://buttonpublish.com/api/images/7/image257189x142.jpg
[12:42:39:671] [Ti.Proxy] [Debug] Looking up proxy information for: https://buttonpublish.com/api/images/7/image257189x142.jpg
[12: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T04:22:16.393

似乎使用以下代码在[TideSDK Google Group上取得了成功：](https://groups.google.com/d/msg/tidesdk/v04FNXT3WIA/GEJOb7Jy4_QJ)

```
var httpClient = Ti.Network.createHTTPClient();
httpClient.open('GET', path);
httpClient.receive(function(data) {
  var file = Ti.Filesystem.getFile(path2);
  var fileStream = file.open(Ti.Filesystem.MODE_APPEND);
  fileStream.write(data);
  fileStream.close();
}); 
```

希望这会有所帮助，至少可以指出正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T15:01:58.053

我发现这可以满足我的需要，这只是为了将文件放到机器上：

```
function downloadFile( url ){
    Ti.Platform.openApplication( url );
} 
```

这将使用机器的默认浏览器打开 URL。这种方法的一个缺点是通常会提示用户确认下载。我使用 downloadFile 功能，以防我将来想更改它的工作方式。

# vb.net - 循环强类型数据集

> ID：14606475
> 
> 赞同：1
> 
> 时间：2013-01-30T14:33:10.297
> 
> 标签：vb.net, datatable, dataset, strongly-typed-dataset

如何遍历强类型数据集？

我们在 DataSet 设计器中定义了以下内容：

```
DataSet name:      DataSetSchedules
DataTable name:    DataTableSchedules
TableAdapter name: DataTableDataAdapterSchedules 
```

这是我使用 Google 找到的代码示例：

```
Dim col As DataColumn
Dim dt as DataTable
Dim dr as DataRow
Dim strMyValue AS String = ""

dt = ds.Tables(0)

For Each dr In dt.Rows
   For Each col In dt.Columns
    StrMyValue = dr(col.ColumnName)
   Next
Next 
```

由于已经在 DataSet desiner 中创建了一个 DataSet，我尝试了这个：

```
Dim col As DataColumn
Dim dt as DataTable
Dim dr as DataRow
Dim strMyValue AS String = ""

dt = DataSetSchedules.Tables(0) 
```

Intellisence 告诉我“表格”不是一个选择，所以我被卡住了。

我发现的大多数代码示例都表明这是如何做到的，但我认为这不适用于强类型数据集。

您能否显示循环遍历 DataSetSchedules 并获取 dr(col.ColumnName) 中的值所需的正确编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:46:37.920

尝试这个 ：

```
 Dim DS as new DataSetSchedules

    DT = DS.Tables(0)

 For Each DR as DataRow In DT.Rows
   ' Code
 Next 
```

或@Tim 建议使用强类型表。见[MSDN](http://msdn.microsoft.com/en-us/library/esbykkzb%28v=vs.71%29.aspx)

> 类型化 DataSet 是派生自 DataSet 的类。因此，它继承了 DataSet 的所有方法、事件和属性。此外，类型化 DataSet 提供强类型化方法、事件和属性。这意味着您可以按名称访问表和列，而不是使用基于集合的方法

# mongodb - Iron Python 和 PyMongo 错误

> ID：14606480
> 
> 赞同：2
> 
> 时间：2013-01-30T14:33:29.840
> 
> 标签：mongodb, pymongo

当我尝试使用 Iron Python 连接到 mongodb（使用 pymongo）时出现此错误...

```
Traceback (most recent call last):
  File "test.py", line 3, in <module>
  File "c:\Program Files (x86)\IronPython 2.7\lib\site-packages\pymongo\connecti
on.py", line 179, in __init__
  File "c:\Program Files (x86)\IronPython 2.7\lib\site-packages\pymongo\mongo_cl
ient.py", line 269, in __init__
pymongo.errors.ConnectionFailure: Specified cast is not valid. 
```

代码很简单，我已经替换了数据库名称。

```
import pymongo

c = pymongo.Connection('mongodb://testuser:test123@linus.mongohq.com:10021/sometestdb') 
```

它适用于常规 python。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:11:03.313

pymongo 不支持 Ironpython - 所以我不建议尝试使用它。您可以在 pypi 页面上看到支持的实现列表：http: [//pypi.python.org/pypi/pymongo](http://pypi.python.org/pypi/pymongo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T14:05:15.310

另请在此处查看答案：[Working with PTVS, IronPython and MongoDB](https://stackoverflow.com/questions/22099096/working-with-ptvs-ironpython-and-mongodb/26661575#26661575)

* * *

您可能无法将 pymongo 与 IronPython 一起使用，但您可以使用 IronPython 中用于 MongoDB 的 C#/.NET 驱动程序。

有关驱动程序的信息在[这里](http://docs.mongodb.org/ecosystem/drivers/csharp/)。如此链接中所述，您可以使用 nuget ( `PM> Install-Package mongocsharpdriver`) 进行安装，或者只下载 dll。

安装后，您可以在 IronPython 中以正常方式使用程序集：

```
 # Add reference to the Mongo C# driver
    import clr
    clr.AddReferenceToFileAndPath("MongoDB.Bson.dll")
    clr.AddReferenceToFileAndPath("MongoDB.Driver.dll") 
```

然后根据[MongoDB C# Driver API 使用](https://api.mongodb.org/csharp/current/)，例如：

```
 # Get the MongoDB database
    from MongoDB.Driver import MongoClient
    client = MongoClient("mongodb://localhost")
    server = client.GetServer()
    database = server.GetDatabase("test")

    # Get a collection
    collection = database.GetCollection("users")

    # Add a document
    from MongoDB.Bson import BsonDocument
    user = BsonDocument({'first_name':'John', 'last_name':'Smith'})
    collection.Insert(user) 
```

有关更多信息，请参阅[MongoDB C# 驱动程序 API](https://api.mongodb.org/csharp/current/)。

# jquery - jquery mobile 通过 jquery 添加 data-add-back-btn

> ID：14606485
> 
> 赞同：0
> 
> 时间：2013-01-30T14:33:36.913
> 
> 标签：jquery, cordova, jquery-mobile

我正在尝试`data-add-back-btn="true"`通过 jQuery 将 a 添加到元素中。我怎样才能做到这一点？

我一直在寻找一个选项，但到目前为止我还没有成功。

也许这里有人可以提供一些帮助。

```
<div data-role="page" id="item" data-add-back-btn="true">
  <div data-role="header" data-position="fixed">
    <h1>ProjectName</h1>
  </div>

  <div data-role="content">   
    <h1 id="newsTitel"></h1> 
    <p id="newsContent"></p>    
  </div>
</div> 
```

这是块。该按钮现在是硬编码的，但我希望它是动态添加的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:39:05.110

为此，您需要将**addBackBtn**添加到 jQuery Mobile 的初始化事件中，如下所示：

```
$(document).bind("mobileinit", function(){
    $.mobile.page.prototype.options.addBackBtn=true;
}); 
```

# ocaml - 摆脱 ;; 在 OCaml 顶层

> ID：14606489
> 
> 赞同：3
> 
> 时间：2013-01-30T14:33:48.203
> 
> 标签：ocaml

我喜欢[Try Ocaml](http://try.ocamlpro.com)的顶级行为：`;;`当我按下时隐式添加`Enter`，并且我可以`Shift-Enter`用于多行编辑。

这是否可能在标准顶层或中获得相同的功能`utop`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:25:44.853

不是现在。您可以想象将此功能实现为[utop](https://github.com/diml/utop)顶部（没有双关语）的补丁。

# actionscript-3 - 加载进度条和 7 个 flv 视频

> ID：14606491
> 
> 赞同：0
> 
> 时间：2013-01-30T14:33:53.083
> 
> 标签：actionscript-3, video, flv

所以我有一个很大的促销页面。我将在哪里播放 7 个不同的视频。我需要在此之前加载整个内容。我将使用 swf 文件来完成。第一个将只是加载程序，第二个将是带有视频（主要）的。到目前为止，这是我的代码....我需要知道我是在加载电影 + ( main ) 还是只加载 ( main ) 而没有电影。谢谢。

这是装载机：

```
var loader:Loader = new Loader()

loader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onProgress);

loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);

loader.load(new URLRequest("main.swf"));

function onProgress(event:ProgressEvent):void
{

    var percentageLoader:Number = Math.floor ( ( event.bytesLoaded*100) / event.bytesTotal);

    myLoadText.text = percentageLoader + "%";
    myLoadBar.width = percentageLoader * 4.5;

}

function onComplete(event:Event):void
{

    loader.contentLoaderInfo.removeEventListener(ProgressEvent.PROGRESS, onProgress);
    loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, onComplete);

    addChild(loader.content);
} 
```

这是第二个（主要）

```
stop();
var nc:NetConnection = new NetConnection();
nc.connect(null);

var ns:NetStream = new NetStream(nc);
loader.Video_1.attachNetStream(ns);

var listener:Object = new Object();
listener.onMetaData = function(evt:Object):void {};
ns.client = listener;

ns.play("video_1.flv");

loader.Video_1.addEventListener(Event.COMPLETE,completefunc);
function completefunc(e)
{
gotoAndPlay (1);

}

loader.button_01.addEventListener(MouseEvent.CLICK, play_video_01);

function play_video_01 (event:Event):void{
    ns.play("video_1.flv");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:16:56.780

这可能有效，但更好的方法是明确告诉您的“main.swf”加载视频。您应该将它们视为单独的类而不是 SWF。您可以编写一个处理所有加载过程的加载器类和一个处理所有播放的 Player 类。我建议查看 Greensock 的 LoaderMax 库。它具有令人难以置信的文档，可以大大简化加载视频和播放。[http://greensock.com](http://greensock.com)

# opencv - 访问多维 Mat 范围 OpenCV

> ID：14606493
> 
> 赞同：1
> 
> 时间：2013-01-30T14:34:00.623
> 
> 标签：opencv, mat, submatrix

我有一个使用创建的 3x3x1000 OpenCV Mat 矩阵

```
int sz[] = {3,3,1000};
Mat bigCube(3, sz, CV_8U); 
```

我想对 1000 个单独的 3x3 子矩阵进行矩阵运算。但我找不到办法做到这一点。最明显的是在使用 Range 的 for 循环中，例如；

```
bigCube(Range(0,3),Range(0,3),Range(i,i+1));
//Do some operations... 
```

但这不会编译。有没有办法做到这一点？

# ios6 - collectionView，didSelectItemAtIndexPath 问题

> ID：14606497
> 
> 赞同：2
> 
> 时间：2013-01-30T14:34:17.840
> 
> 标签：ios6, uicollectionview, uicollectionviewcell

我有一个有趣的问题`collectionView`，特别是`didSelectItemAtIndexPath`。

我的应用程序有一个带有背景图像的特定视图，可通过 SQL 访问。在该视图中是一个带有 collectionView 的弹出框，用于更改父视图的背景，并访问其他可供购买的“集合”。

我的问题是背景的变化。所有项目都在集合视图中正确显示，并且父级的背景会发生应有的变化。问题是选择的项目不是显示的项目，即使通过`NSLog`，我可以看到正在选择正确的图像并将其传递回父项。父级中有一个对应`NSLog`的，它显示与弹出框相同的图像 id `NSLog`。

中的第一项`collectionView`，当点击时，会将父项的背景更改为白色，就好像没有可用的图像一样。点击第二个单元格将显示第一个单元格的图像。点击第三个单元格将显示第二个单元格的图像......等等。有 15 张图片可供选择。

这是`didSelect`方法：

```
-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    if ([_currentView isEqualToString:@"New_Journal"])
    {
        MyAppDelegate *appDelegate = (MyAppDelegate *)[UIApplication.sharedApplication delegate];
        // to get the variable back to the parent
        appDelegate.loadBackgroundID = indexPath.row; 
        // interact with the SQL via _settingsDao
        [_settingsDao updateJournalBackgroundId:_journalId withBackgroundId:appDelegate.loadBackgroundID];
        NSLog(@"Selected background: %d", indexPath.row);
        // notification to let EntryView know the background has changed
        [NSNotificationCenter.defaultCenter postNotificationName:@"aBackgroundChanged" object:self];
    }
} 
```

编辑以显示 SQL 交互方法：

```
-(void)updateJournalBackgroundId:(int)journalID withBackgroundId:(int)newBackgroundId
{
    NSString *query = @"UPDATE BgIconBorderSettings SET background_id = ? WHERE journal_id = ?";
    FMDatabase *db = [dbUtils sharedDB];
    [db executeUpdate:query,[NSNumber numberWithInt:newBackgroundId],[NSNumber numberWithInt:journalID]];
    if([db hadError])
    {
        NSLog(@"Error %d: %@",[db lastErrorCode],[db lastErrorMessage]);    
    }       
} 
```

任何人都对如何显示被点击单元格的正确图像有任何想法？感谢您为解决此问题提供的任何帮助。

正如 jhilgert 指出的那样……它是 SQL 数据库。它从 1 而不是 0 开始。更改了 ID，它按预期工作。

# php - 更改上传文件名php

> ID：14606499
> 
> 赞同：0
> 
> 时间：2013-01-30T14:34:21.990
> 
> 标签：php, upload

我在更改上传文件名时遇到问题。我希望 de 文件名是 1.pat 用于第一次上传 2.pat 用于第二次等等。我怎样才能做到这一点？（“plaatje”在荷兰语中是图像的意思）

```
<?php
function patuploader()
{ 
echo '
    <div id="uploadForm">
    <form action="'.$_SERVER['PHP_SELF'].'" method="post" enctype="multipart/form-data">
        <label for="plaatje">Plaatje:</label>
            <input type="file" name="plaatje" id="plaatje" /><br />
        <label for="submit"></label>
            <input type="submit" name="submit" id="submit" value="Verstuur bestand!"       /><br />
</form>
</div>
 ';

 if(isset($_POST['submit']) && isset($_FILES['plaatje']) && $_FILES['plaatje']           ['type']=="application/octet-stream"){

move_uploaded_file($_FILES['plaatje']['tmp_name'], './upload/'.time().''.$_FILES['plaatje']['name']);

}elseif(isset($_FILES['plaatje']) && $_FILES['plaatje']['type']!="application/octet-stream"){

    echo '<span id="warning">it's not possible to upload this file. you can only upload .pat files.</span>';

}

# Lees de inhoud van de map uit
$bestandenRij = scandir('./upload');
$bestandenRij = array_reverse($bestandenRij);

foreach($bestandenRij as $bestand){
    # Toon alle bestanden anders dan . (localdir) en .. (magic escalator)
    if($bestand != '.' && $bestand != '..'){
        echo "\t<img src=\"./upload/".$bestand."\" width=\"20\"/><br />\r\n";
    }
 }
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:36:10.787

您应该阅读[move_uploaded_file的文档](http://php.net/manual/en/function.move-uploaded-file.php)

# javascript - Math.tan (45) 答案

> ID：14606501
> 
> 赞同：0
> 
> 时间：2013-01-30T14:34:32.643
> 
> 标签：javascript, math

在 JavaScript 中，函数 Math.tan(45); 返回以弧度为单位的值，即 1.6197751905438615。基本上，我如何让 Math.tan(45) 返回答案 1？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T14:36:36.057

好吧，答案不是弧度，因为答案是长度的一小部分。您应该`Math.tan(45 * Math.PI / 180)`改为使用，因为参数必须以弧度表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:37:29.380

[`Math.tan`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/tan)接受弧度，因此您需要将度数显式转换为弧度：

```
Math.tan(45 * Math.PI / 180);  // 0.9999999999999999 
```

# javascript - 跟踪javascript中的内存使用情况

> ID：14606504
> 
> 赞同：5
> 
> 时间：2013-01-30T14:34:37.970
> 
> 标签：javascript, memory-management

javascript中有没有办法跟踪应用程序使用的内存？我不是在考虑用于调试内存泄漏等的浏览器扩展，而是让应用程序跟踪它自己的内存消耗，以便能够就是否释放内存做出合格的决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:56:18.580

尽管我同意评论者关于 JS 内存管理的观点，但 ECMAScript 6 中有一个名为“WeakMaps”的有趣功能，虽然不完全符合您的要求，但它是相关的：

> “使用弱映射的典型示例是创建一个与特定 DOM 元素相关的对象。例如，jQuery 在内部维护一个对象缓存，一个用于已引用的每个 DOM 元素的缓存。使用弱映射将允许 jQuery 自动释放从文档中删除与 DOM 元素相关联的内存。”

[http://www.nczonline.net/blog/2012/11/06/ecmascript-6-collections-part-3-weakmaps/](http://www.nczonline.net/blog/2012/11/06/ecmascript-6-collections-part-3-weakmaps/)

[https://developer.mozilla.org/en-US/docs/JavaScript/ECMAScript_6_support_in_Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/ECMAScript_6_support_in_Mozilla)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:47:16.237

> 能够对是否释放内存做出合格的决定。

JavaScript 有一个自动垃圾收集器来管理内存。您不能手动释放内存，也不能调用垃圾收集器（例如在 java 和 c# 中）。

# shell - 当路径包含 HP-UX 中的转义空格时，Eval (java) 不起作用

> ID：14606506
> 
> 赞同：0
> 
> 时间：2013-01-30T14:34:44.013
> 
> 标签：shell, unix, escaping, hp-ux

我有一个简单的脚本如下：

```
#!/bin/ksh

JAVA_SRC="/home/myuser/Setup\ Files/jre/bin/java"
eval $JAVA_SRC 
```

当我在 HP-UX 上运行它时，我得到这个错误：

```
$ spacetest.sh
/home/myuser/Setup^BFiles/jre/bin/java:  not found 
```

似乎 shell 无法正确处理转义的空格并且正在放置垃圾而不是“\”。这在其他 *NIX 平台上运行良好。如果我在 eval 之前回显 $JAVA_SRC，则路径显示正常。

有没有办法在 HP-UX 上正确处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:49:16.000

解决方案是简单地，就像上面威廉建议的那样，在变量名 ("$JAVA_SRC") 周围使用引号。

# mysql - 插入查询在jsp中不起作用

> ID：14606514
> 
> 赞同：1
> 
> 时间：2013-01-30T14:35:16.317
> 
> 标签：mysql, jsp, prepared-statement

我想`insert`在查询中使用该语句，但输出显示`Unable to connect database`. 我使用这种形式：

```
<form class="form-signin" action="CreateTeam.jsp">
                <h2 class="form-signin-heading">Create new team</h2>
                <input type="text" class="input-block-level" placeholder="Team name" name="name" id="name" required />
                <input type="text" class="input-block-level" placeholder="Team description" name="desc" id="desc" required />
                <button class="btn btn-large btn-primary" type="submit" >Create!</button>
                </form> 
```

我的jsp代码是：

```
<%
                String name = request.getParameter("name");
                String desc = request.getParameter("desc");

                Connection connection = null;
                PreparedStatement pstatement = null;
                Class.forName("com.mysql.jdbc.Driver").newInstance();
                int updateQuery = 0;
                if (name != null && desc != null) {
                    if (name != "" && desc != "") {

                        try {
                            connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "root");
                            String queryString1 = "insert into teams (name,desc) values (?, ?)";
                            pstatement = connection.prepareStatement(queryString1);
                            pstatement.setString(1, name);
                            pstatement.setString(2, desc);
                            updateQuery = pstatement.executeUpdate();
                            if (updateQuery != 0) {
                                response.sendRedirect("../AdministrationControlPanel.jsp");
                            }
                        } catch (Exception ex) {
                            out.println("Unable to connect to database.");

                        } finally {
                            pstatement.close();
                            connection.close();
                        }
                    }
                }
            %> 
```

数据库`test`在本地主机上运行。我正在修改它，但我不知道问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:36:11.790

`DESC`，在您的一个专栏中，是 MySQL 保留关键字。您应该使用反引号将其转义，

```
INSERT INTO teams (name,`desc`) values (?, ?) 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

为了避免将来出现问题，**最好避免**使用 MySQL 保留关键字的关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:37:00.137

`desc`是`MySQL`你必须引用的关键字。

# php - CodeIgniter 奇怪的行为

> ID：14606517
> 
> 赞同：0
> 
> 时间：2013-01-30T14:35:26.140
> 
> 标签：php, json, codeigniter, session, activerecord

因为这个，我把头撞到墙上

我知道这是一个很长的问题，但这就是我所拥有的:(

我与 CI 合作一年多，但这个错误让我很生气问题是我从模型中获取数据，所以它返回

```
Unknown column 'albums' in 'where clause'</p><p>SELECT *
FROM (`albums`)
WHERE `id` =  '1'
AND `albums` IS NULL
AND `id` =  '1' 
```

**模型函数为**

```
function get($id = 0 )
   {
        if($id == 0 )
        {
            $q =  $this->db->get('albums')->result(); 
            return $q; 
        }
        else
        {
            $this->db->where("id",$id); 
            $q = $this->db->get('albums'); 
            return $q->row(); 
        }
   } 
```

如果我删除了对函数的调用，当我调试 $data 时，我会从 json_encode 收到另一个错误，我会得到以下信息

```
Array
(
    [response] => CI_DB_mysql_driver Object
        (
            [dbdriver] => mysql
            [_escape_char] => `
            [_like_escape_str] => 
            [_like_escape_chr] => 
            [delete_hack] => 1
            [_count_string] => SELECT COUNT(*) AS 
            [_random_keyword] =>  RAND()
            [use_set_names] => 
            [ar_select] => Array
                (
                )

            [ar_distinct] => 
            [ar_from] => Array
                (
                )

            [ar_join] => Array
                (
                )

            [ar_where] => Array
                (
                    [0] => `id` =  '1'
                    [1] => AND `albums` IS NULL
                )

            [ar_like] => Array
                (
                )

            [ar_groupby] => Array
                (
                )

            [ar_having] => Array
                (
                )

            [ar_keys] => Array
                (
                )

            [ar_limit] => 
            [ar_offset] => 
            [ar_order] => 
            [ar_orderby] => Array
                (
                )

            [ar_set] => Array
                (
                    [`title`] => ' asdasd'
                    [`description`] => 'Hello '
                )

            [ar_wherein] => Array
                (
                )

            [ar_aliased_tables] => Array
                (
                )

            [ar_store_array] => Array
                (
                )

            [ar_caching] => 
            [ar_cache_exists] => Array
                (
                )

            [ar_cache_select] => Array
                (
                )

            [ar_cache_from] => Array
                (
                )

            [ar_cache_join] => Array
                (
                )

            [ar_cache_where] => Array
                (
                )

            [ar_cache_like] => Array
                (
                )

            [ar_cache_groupby] => Array
                (
                )

            [ar_cache_having] => Array
                (
                )

            [ar_cache_orderby] => Array
                (
                )

            [ar_cache_set] => Array
                (
                )

            [ar_no_escape] => Array
                (
                )

            [ar_cache_no_escape] => Array
                (
                )

            [username] => root
            [password] => 123456
            [hostname] => localhost
            [database] => sawt
            [dbprefix] => 
            [char_set] => utf8
            [dbcollat] => utf8_general_ci
            [autoinit] => 1
            [swap_pre] => 
            [port] => 
            [pconnect] => 1
            [conn_id] => Resource id #30
            [result_id] => 1
            [db_debug] => 1
            [benchmark] => 0.00059294700622559
            [query_count] => 1
            [bind_marker] => ?
            [save_queries] => 1
            [queries] => Array
                (
                    [0] => UPDATE `pulling_questions` SET `status` = 0 WHERE `status` =  1 AND `end_date` <=  1359556250
                )

            [query_times] => Array
                (
                    [0] => 0.00059294700622559
                )

            [data_cache] => Array
                (
                )

            [trans_enabled] => 1
            [trans_strict] => 1
            [_trans_depth] => 0
            [_trans_status] => 1
            [cache_on] => 
            [cachedir] => 
            [cache_autodel] => 
            [CACHE] => 
            [_protect_identifiers] => 1
            [_reserved_identifiers] => Array
                (
                    [0] => *
                )

            [stmt_id] => 
            [curs_id] => 
            [limit_used] => 
            [stricton] => 
        )

) 
```

`get`上面的代码在另一个控制器中运行良好，如果我从视图中调用，模型的调用不会出现任何错误

我在此之前调用更新，它也不会更新

```
function update($id,$title,$description,$path)
    {
        $this->db->where('id',$id); 

        $this->db->set('title',$title);
        $this->db->set('description',$description);
        if($path != 'none')
            $this->db->set('path',$path);
        $q1 = $this->db->where('albums');

        return $q1;   
    } 
```

这是控制器方法

```
public function update2($action = "show",$id = 0 ,$row = 0 )
    {
        $data = array();
        if($action == "show"):
            $data['id'] = $id; 
            $data['row_number'] = $row; 
            $this->load->view('albums/edit_album',$data);
        else:

            $id = $this->input->post('id'); 
            $title = $this->input->post('title');
            $description = $this->input->post('description');
            $path  = $this->session->userdata('image_name_album');
            $this->form_validation->set_rules('title', 'Title', 'trim|required|xss_clean');
            $this->form_validation->set_rules('description', 'Description', 'trim|required|xss_clean');

            if ($this->form_validation->run() == FALSE):
                $errors = array();
                $errors =  $this->form_validation->errors_array();
                $data['errors'] = $errors;
                $data['response'] = "Errors";
                echo json_encode($data);
                die();
            else:

                //update($id,$author,$title,$albums,$short,$lang,$status)
                $data['response'] = $this->albums_model->update($id,$title,$description,$path);; 
                $data['query'] = $this->albums_model->get($id); 
                print_r($data); 
                echo json_encode($data);
                die();
            endif;
        endif;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:38:19.203

您的更新函数中有一个杂散的 db->where ，在它之后没有被调用，因此它被添加到接下来运行的任何查询中。如果它应该遵循 db->set 你需要用括号括起来 {}

```
 $q1 = $this->db->where('albums'); 
```

# ruby - 在一次操作中从 Ruby Set 中获取和删除元素

> ID：14606524
> 
> 赞同：5
> 
> 时间：2013-01-30T14:35:55.303
> 
> 标签：ruby, set

我有一组元素，我想从中取出并多次删除前几个元素。有没有比这更短的方法（所以一个操作而不是两个）来做到这一点：

```
require 'set'
s = Set[1, 2, 3, 4]       # => #<Set: {1, 2, 3, 4}> 

first_two = s.take(2)     # => [1, 2]
s.subtract(first_two)     # => #<Set: {3, 4}> 
```

（所以基本上我想知道我是否忽略了一个`shift`for Sets）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:04:53.250

您可以向 Set 类添加一个新方法`take!`（或`remove!`任何合适的名称）：

```
class Set
  def take!(args)
    taken = self.take(args)
    self.subtract(taken)
    return taken
  end
end

a = Set[1, 2, 3, 4] # <Set: {1, 2, 3, 4}>
a.take!(2) # <Set: {1, 2}>
a # <Set: {3, 4}> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T20:28:41.253

使用内置方法没有更短的方法。

对于返回和删除一个元素的方法有一个[开放的功能请求；](https://bugs.ruby-lang.org/issues/4553)您可能想帮助改进 API？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:06:45.163

来自[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html)：

> Set 实现了一组无重复的**无序值。**这是 Array 的直观互操作设施和 Hash 的快速查找的混合体。

*在对index*一无所知的对象上实现 shift 和 pop 之类的方法会很奇怪，而且可能不合逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-16T20:21:35.753

我迟到了，但这是我的解决方案。先将集合转换为数组，然后所有的 Enumerable 方法都可用。从阵列中取出 2，然后确保也从集合中移除 2。集合中的两个值被删除并返回。

```
require 'set'
s = Set[1, 2, 3, 4]     # => #<Set: {1, 2, 3, 4}> 

first_two = s.to_a.take(2).tap {|a| s.subtract(a)}  # => [1, 2]
s                       # => #<Set: {3, 4}> 
```

# recursion - RavenDB 和分层文档

> ID：14606548
> 
> 赞同：6
> 
> 时间：2013-01-30T14:37:18.020
> 
> 标签：recursion, ravendb, hierarchical-data

我在使用 RavenDB 解决这个问题时遇到了困难。我有这些课。我从它们中排除了很多属性以保持示例简单。

```
public class Menu
{
    public string Name { get; set; }
    public List<NavigationNode> Nodes { get; set; }
}

public class NavigationNode
{
    public string Text { get; set; }
    public Guid? PageId { get; set; }
    public string NodeType { get; set; }
    public List<NavigationNode> Nodes { get; set; }
}

public class Page
{
    public Guid PageId { get; set; }
    public string Slug { get; set; }
} 
```

如您所见，这是关于渲染导航菜单的。节点列表是分层的，可以深入，理论上无限（当然实际上只有 2-4 个子级别）。起初我将 Slug 存储在节点中，但意识到，如果页面 Slug 更改会发生什么，当页面更改 slug 时更改所有节点我将不得不遍历所有菜单，爬下层次结构并找到所有要更改的 Slug它们，这听起来不像是最佳解决方案。

所以我认为应该可以建立一个索引，将 Page Slug 与来自节点的其余数据以分层结构相结合。

我一直在阅读有关 Map Reduce、Multimap 和递归的信息，但我什至不知道从哪里开始。

我发现了这个[http://ravendb.net/docs/2.0/client-api/querying/static-indexes/indexing-hierarchies](http://ravendb.net/docs/2.0/client-api/querying/static-indexes/indexing-hierarchies)

这是一个简单的例子，我只是为了开始做一些事情，但我什至无法让它工作，因为我真的不明白我上面链接到的页面上的例子。

```
 public class NavigationIndex : AbstractIndexCreationTask<Menu>
   {
        public NavigationIndex()
        {
            Map = menus => from menu in menus
                           from node in Recurse(menu, x => x.Nodes)
                           select new
                                      {
                                          WhatIsThis = node // <- Why is this a collection?
                                      };
        }
    } 
```

根据示例节点不应该是一个集合，而是一个实际的 NavigationNode 对象。

是否有可能在 RavenDB 中实现我想要的以及我在示例中做错了什么？

请随时提出任何您感到困惑的问题。

我为混乱道歉。我会试着解释一下。

**编辑：**

将 PageId 更改为字符串不会有问题。我正在使用 Guids，因为我需要能够在插入之前生成主键 ID：s。无论如何，我想从索引中查询的是包含 Pages Slug 的导航链接的层次结构树。所以我可以递归地循环出网站上的导航菜单。

回答马特约翰逊的问题：

1.  我想要一个你可以在下面看到的类的输出
2.  页面是一个单独的文档
3.  我只会按菜单名称查询

    公共类 NavigationIndexItem{ 公共字符串 MenuName { 获取；放; } 公共字符串文本 { 获取；放; } 公共字符串蛞蝓 { 得到；放; } 公共字符串节点类型 { 获取；放; } 公共列表 ChildItems { 获取；放; } }

现在，当我看到上面的课程时，我想我可能有点走错路了。

但无论如何，我会做一些小的改动，并感谢马特的回答。但是我仍然遇到和以前一样的问题。

**您示例中的这一行： where node.PageId != null**

node 不是特定 NavigationNode 的实例，而是另一个集合，因此我无法检查其上的 PageId 属性。我只得到一个 LINQ 扩展列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T17:04:04.383

我正在对你想要什么做一些假设。请参阅我对原始问题的评论。但我认为这就是你所追求的。

首先 - 您需要将`Page`类的 id 更改为`Id`而不是`PageId`. 这样 Raven 将使用您的 guid 作为其文档 ID 的一部分。确实，使用字符串 ID 会更好，但这仍然有效。

然后您可以执行以下操作：

```
public class NavigationIndex : AbstractIndexCreationTask<Menu>
{
    public NavigationIndex()
    {
        Map = menus => from menu in menus
                       from node in Recurse(menu, x => x.Nodes)
                       where node.PageId != null
                       let page = LoadDocument<Page>("pages/" + node.PageId)
                       select new
                       {
                           menu.Name,
                           node.Text,
                           node.PageId,
                           page.Slug
                       };
    }
} 
```

这使用了 RavenDB 2.0 的新[LoadDocument](http://ravendb.net/docs/client-api/querying/static-indexes/indexing-related-documents)功能，它比多地图更适合您的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T01:39:59.123

将其更改为：

```
 from node in Recurse(menu, x => x.Nodes.AsEnumerable()) 
```

# python - django-registration 中激活模板的内容

> ID：14606552
> 
> 赞同：0
> 
> 时间：2013-01-30T14:37:29.997
> 
> 标签：python, django, django-registration

根据官方[文档](http://docs.b-list.org/django-registration/0.8/quickstart.html) ，`registration/activate.html`是

> 在帐户激活失败时使用。使用默认设置，具有上下文 :activation_key

那么，我应该在这个模板中添加什么？一条错误消息？或者，一个激活链接，如

```
http://{{ site.domain }}{% url registration_activate activation_key %} 
```

目前我把这个链接放在`activation_email.txt`

请告诉我正确的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:42:47.950

是的，它仅在出现错误时显示。如果成功，它将重定向到成功的 url。因此，您应该在此模板中添加一条错误消息

# java - Playframework2 - Scala，控制器范围的动作组合

> ID：14606553
> 
> 赞同：2
> 
> 时间：2013-01-30T14:37:32.323
> 
> 标签：java, scala, playframework-2.0

在 playframework 2 中，如果您使用 Java，则可以将任何动作组合注释直接放在 Controller 类上，然后将其应用于此控制器定义的所有动作方法，因为它记录在playframework2 文档中的[动作组合部分。](http://www.playframework.org/documentation/2.0.1/JavaActionsComposition)

```
@With(MyLogger.class)
public Admin extends Controller {
    ..
} 
```

Java 中的注解是由 Scala 中的辅助方法（装饰器）完成的。但是在 Scala 中，playframework2 文档中[的唯一示例是每个方法。](http://www.playframework.org/documentation/2.0.1/ScalaActionsComposition)

我有一个日志装饰器，它记录每个操作之前和之后的日志，并测量执行该操作所需的时间。有没有办法将此装饰器添加到控制器中，以便将其应用于控制器中的每个操作方法，就像在 Java 中一样？

我知道我可以用我的 LoggingAction 包装每个方法：

```
def index = LoggingAction { request =>
  Ok("I have been logged")    
} 
```

但是，当您想将日志记录操作应用于项目范围内的所有操作方法时，这似乎很难看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:02:56.133

我认为动作组合不可能。一个解决方案可能是通过覆盖 onRouteRequest 方法来使用 ScalaInterceptors。

这是一个例子：

```
import play.api._
import play.api.mvc._
import scala.util.matching.Regex

// Note: this is in the default package.
object Global extends GlobalSettings {

  private val controllerRoutePaths : List[Regex] =
List("""^/mycontroller/.*""".r,"""^/anOtherRegexFormycontroller/.*""".r)
  override def onRouteRequest(request: RequestHeader): Option[Handler] = {
     if(controllerRoutePaths.map(_.findFirstIn(request.path).isDefined).foldLeft(false)(_ || _)) {
       println("executed before every action in mycontroller:" )
       super.onRouteRequest(request)
     }
     else{
       super.onRouteRequest(request)
     }
  }

} 
```

# ruby - 通过加密密码过滤器进行 Ruby LDAP 搜索

> ID：14606554
> 
> 赞同：0
> 
> 时间：2013-01-30T14:37:32.320
> 
> 标签：ruby, active-directory, ldap

我正在尝试使用加密的密码过滤器进行搜索，但它不匹配任何东西！有没有办法与之匹配！！！

这是我的代码：

```
 ldap = Net::LDAP.new :host => "----",
:port => 389,
:auth => {
:method => :simple,
:username => "----",
:password => "----"
}

filter = Net::LDAP::Filter.eq("userPassword", "1212")
filter2 = Net::LDAP::Filter.eq("cn", "general*")
tree_base = "dc=----,dc=---"

ldap.search(:base => tree_base, :filter => filter & filter2) do |entry|
puts "mail: #{entry.mail}"
puts "pw: #{entry.userPassword}"

end 
```

它不会返回任何结果，但是当我用另一个过滤器替换 pw 过滤器时它可以工作！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:36:46.997

这不是 LDAP 中的正确技术。您应该首先仅按用户名搜索用户，然后尝试使用该用户名和密码绑定到 LDAP。如果成功，则密码正确。

# java - 将几个表/列放入 CSV 文件

> ID：14606556
> 
> 赞同：4
> 
> 时间：2013-01-30T14:37:37.733
> 
> 标签：java, android, mysql, sql

我目前正在做一个项目，我在表格中收集了大量有关进程和 CPU 使用情况、电池使用情况等的信息。

例如，“日志表”包含列“进程”、“Pid”、“电池”，另一个表“CPU 表”包含例如“进程”、“CPU 时间”、“CPU 使用率”。该程序同时写入所有这些表，因此每个读数在所有表中都有自己的行。

我创建了一个程序，它获取所有这些信息并为所有进程创建一个单独的 CSV 文件。在这些文件中，我希望获得所有四个表中有关该特定进程的所有信息。

我遇到的问题是，由于某种原因，当我尝试将信息带入时，其中一个表复制了另一个表中每条记录的记录。

![问题](../Images/cb9b2a607cab657dbec5c60428ff3650.png)

如您所见，“日志表”中的信息正确写入，但“CPU 表”中的信息（最右边的 7 列）为“日志”的每个条目重复第一条记录，然后对其次，对于每条 Log 记录。

Procs[i] 包含所有唯一的进程名称。

目前，我使用的sql语句是，周围的基本代码是：

```
String query = "SELECT * FROM log, cpuinfo WHERE log.Process = " + "'" + procs[i] + "'" + " AND cpuinfo.Process = " + "'" + procs[i] + "'";
                System.out.println(query);
                rs = sment.executeQuery(query);

                writer = new CSVWriter(new FileWriter(procs[i] + ".csv"), ',');
                //writer = new CSVWriter(procs[i] + ".csv");
                //System.out.println("Writing.....");

                //rs.beforeFirst();

                writer.writeAll(rs, true);
                //writer.

                writer.flush(); 
```

谁能看到程序为什么这样做并以这种方式编写 CSV？任何帮助将不胜感激，被困在这个程序上数周无济于事，谷歌没有帮助！

谢谢。

如果您需要任何信息或代码查看，请询问！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:09:58.560

您正在隐式执行两个表`log`和`cpuinfo`此处的内部联接，您需要决定如何正确关联来自 的一条记录和来自`log`的一条记录`cpuinfo`。`log`您编写的查询有效地为来自 的每条记录与来自 的每条记录连接起来创建一个结果记录`cpuinfo`，然后您的`WHERE`子句将该结果集限制为仅处理匹配的那些记录。

这似乎不是您想要的；在我看来，您可能希望将流程匹配且时间戳也匹配的记录关联起来。天真地，这可能如下所示：

```
SELECT * FROM log, cpuinfo WHERE log.Process = ?  AND cpuinfo.Process = ? 
  AND log.Timestamp = cpuinfo.Timestamp 
```

但是，我相信您的解决方案实际上比天真地比较时间戳要复杂一些。看起来可能有一种方法可以将时间戳从一个表匹配到另一个表，但似乎相关的时间戳可能并不相同。例如，最早的时间戳 in`log`看起来像 26:04.2 而不是 26:04.3 in `cpuinfo`。您需要根据应用程序逻辑决定将两个时间戳相互关联的方式。这将`WHERE`相应地影响您的条款。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:04:05.923

以下应该可以工作并删除重复的记录。

```
Select * FROM log, cpuinfo WHERE log.Process = cpuinfo.Process and      log.Process = ? 
```

# c++ - 将 OLECHAR* 转换为 CHAR* 以构建 string()

> ID：14606558
> 
> 赞同：4
> 
> 时间：2013-01-30T14:37:42.910
> 
> 标签：c++, c, winapi, com

我有一个 OLECHAR* 并且我想将它转换为 CHAR* 以便从中创建字符串，但我没有找到一种方法。

OLECHAR 是常规字符吗？没有它的想法。

在此先感谢，加尔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:45:32.050

`OLECHAR`是一串`wchar_t`字符。我推荐阅读[The Complete Guide to C++ Strings, Part II - String Wrapper Classes](http://www.codeproject.com/Articles/3004/The-Complete-Guide-to-C-Strings-Part-II-String-Wra)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:03:35.287

`OLECHAR*`是一个 Unicode (UTF-16)`wchar_t`字符串。如果要将其转换为`CHAR*`字符串，则必须阐明要用于转换的特定编码。

例如，您可能希望从 UTF-16 转换为 UTF-8（这是一种无损转换），并且可以将 UTF-8 字符串存储在`char*`/中`std::string`（我更喜欢使用健壮的字符串类而不是 C++ 中的原始指针代码）。

要执行转换，您可以使用[`WideCharToMultiByte()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)Win32 API。`CP_UTF8`如果要从 UTF-16 转换为 UTF-8，可以使用“代码页”值。对于（可能有损的）“ANSI”转换，您可以使用`CP_ACP`等。

（上述 Win32 API也有[方便的 ATL 包装器](http://msdn.microsoft.com/en-us/library/87zae4a3%28v=vs.80%29.aspx)`CW2A`，例如，但我不确定这些包装器的 VC6 版本中可用的功能级别。）

# python - python嵌套类

> ID：14606559
> 
> 赞同：17
> 
> 时间：2013-01-30T14:37:47.027
> 
> 标签：python, python-3.x

首先，这是我的测试代码，我使用的是 python 3.2.x：

```
class account:
    def __init__(self):
        pass

    class bank:
        def __init__(self):
            self.balance = 100000

        def balance(self):
            self.balance

        def whitdraw(self, amount):
            self.balance -= amount

        def deposit(self, amount):
            self.balance += amount 
```

当我做：

```
a = account()
a.bank.balance 
```

我希望得到返回的余额值，而不是得到函数“余额”，这是为什么呢？当我这样做时，它会返回余额值：

```
class bank:
    def __init__(self):
        self.balance = 100000

    def balance(self):
        self.balance

    def whitdraw(self, amount):
        self.balance -= amount

    def deposit(self, amount):
        self.balance += amount

a = bank()
a.balance 
```

所以我想知道为什么会这样，如果有人能想出一种方法来给我嵌套版本中平衡的价值，那就太好了。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-30T15:06:48.340

我的代码版本，带有注释：

```
#
# 1\. CamelCasing for classes
#
class Account:
    def __init__(self):
        # 2\. to refer to the inner class, you must use self.Bank
        # 3\. no need to use an inner class here
        self.bank = self.Bank()

    class Bank:
        def __init__(self):
            self.balance = 100000

        # 4\. in your original code, you had a method with the same name as 
        #    the attribute you set in the constructor. That meant that the 
        #    method was replaced with a value every time the constructor was 
        #    called. No need for a method to do a simple attribute lookup. This
        #    is Python, not Java.

        def withdraw(self, amount):
            self.balance -= amount

        def deposit(self, amount):
            self.balance += amount

a = Account()
print(a.bank.balance) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T14:39:01.950

有几个问题：

1.  您正在`balance`为数据成员和函数使用名称。
2.  您`return`在`balance()`.
3.  `balance()`对 的*实例*进行操作`bank`。: 中没有实例，`a.bank.balance`这里`a.bank`指的是内部类本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:40:44.957

`a.bank`是**类（不是***实例*），因为您从未在`a`. 所以 if`a.bank`是一个类，`a.bank.balance`是一个绑定到该类的方法。

但是，这有效：

```
class account:
    def __init__(self):
        self.bank = account.bank()

    class bank:
        def __init__(self):
            self.balance = 100000

        def whitdraw(self, amount):
            self.balance -= amount

        def deposit(self, amount):
            self.balance += amount

a = account()
print a.bank.balance 
```

当然，当您展示没有嵌套类的工作代码时，它确实引出了一个问题，即*为什么*要为此使用嵌套类。我认为非嵌套版本要干净得多。

# c# - 删除 bmp 标头进行加密

> ID：14606565
> 
> 赞同：2
> 
> 时间：2013-01-30T14:38:30.193
> 
> 标签：c#, encryption, header, bmp

我对 C# 还很陌生，并且收到了这个关于图像的 AES 加密项目。我可能在这里遗漏了一件非常简单的事情。我正在尝试从 bmp 中删除标头并加密其余部分，然后重新添加标头。如果我不删除标题，程序运行良好。要删除，我试过这个（bmp 标头是 54 字节）：

```
MyImage = new Bitmap("path");
MemoryStream ms = new MemoryStream();

MyImage.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);

byte[] Header=null, picture=null, pictureFull = ms.ToArray();

for (int i = 0; i < pictureFull.Length; i++)
{
    if (i < 54)
    { Header[i] = pictureFull[i]; }
    else 
    { picture[i - 54] = pictureFull[i]; }
}

byte[] demoKeyBytes = new byte[] {  0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f};

PaddingMode padding = PaddingMode.ISO10126;

EncryptedImg = EncryptCall(demoKeyBytes, padding, picture); 
```

问题是，如果我尝试继续加密和解密“图片”，我会得到一个空值。如果我继续使用完整图像“pictureFull”进行编码/解码，我也会得到一个空值。我需要完全删除 FOR 以便程序能够正常地编码/解码“pictureFull”，尽管 FOR 甚至没有修改它。是否有其他方法可以保存 byte[] 数组或有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:44:31.103

试试这个，而不是 FOR：

```
byte[] pictureFull = ms.ToArray();
byte[] Header = pictureFull.Take(54);
byte[] picture = pictureFull.Skip(54); 
```

并继续加密。PS 不要忘记添加 System.Linq 命名空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:46:51.947

`byte[]`是一个对象，因此您不想将该类型的变量初始化为`null`. 您可能希望`Header`像这样初始化：

```
byte[] Header = new byte[54]; 
```

并且长度至少等于实际图像数据长度，如下所示`picture`：`new byte[]`

```
byte[] picture = new byte[pictureFull.Length - 54]; 
```

然后你可以把东西复制给他们。

# xmpp - 如何在 MUC 中找到用户的真实用户 JID？

> ID：14606570
> 
> 赞同：1
> 
> 时间：2013-01-30T14:38:51.697
> 
> 标签：xmpp

当我加入房间 XMPP xmpp 时，通常其他用户会看到我的 JID`myconference@conference.localhost/myname`而不是`myname@localhost`. 当我与一些朋友交谈时，Pidgin 也能够恢复我的真实 JID ( `myname@localhost`)。

这怎么可能？我应该向服务器发出什么样的请求？这对我来说很重要，因为当我开始与某人交谈时，我不想打开两个标签，只是因为我的客户认为我可以在我的花名册和小组花名册中看到的朋友不是同一个人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:08:47.110

参见[XEP-0045，第 7.2.4 节](http://xmpp.org/extensions/xep-0045.html#enter-nonanon)。在非匿名房间中，服务器将在所有参与者的存在节中发送所有参与者的 jid：

```
<presence
    from='coven@chat.shakespeare.lit/thirdwitch'
    id='17232D15-134F-43C8-9A29-61C20A64B236'
    to='crone1@shakespeare.lit/desktop'>
  <x xmlns='http://jabber.org/protocol/muc#user'>
    <item affiliation='none'
          jid='hag66@shakespeare.lit/pda'
          role='participant'/>
  </x>
</presence> 
```

# c# - 使用 Type 对象调用具有动态返回类型的方法

> ID：14606583
> 
> 赞同：0
> 
> 时间：2013-01-30T14:39:27.220
> 
> 标签：c#, .net, wcf, dynamic, methods

假设我有一个定义如下的方法：

```
public T InvokeMethod<T>(string serviceName, string methodName, params object[] args) 
```

假设我想使用 Type 对象调用它，如下所示，它不起作用：

```
int i = 100;
Type x = i.GetType();
invoker.InvokeMethod<x>(method.Item1, method.Item2, null); 
```

我知道我可以通过实际指定如下类型来调用此方法，但我希望它是动态的。

```
invoker.InvokeMethod<int>(method.Item1, method.Item2, null); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:43:34.220

因为 x 不是可以在泛型类中使用的类型，所以 x 是 type 的实例`Type`。这是在运行时计算的。泛型类需要一个在编译时计算的类名。这个答案更好地解释了这一点：

[https://stackoverflow.com/a/7120375/](https://stackoverflow.com/a/7120375/)

从根本上说，x 是一个类的实例，但在 中`invoker.InvokeMethod<int>`，`int`是一个类的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:42:10.667

我知道您可能不喜欢我的回答，但在 WCF 中使用泛型并没有多大意义，因为所有合同都必须可转换为 WSDL，因此`KnownType`无论如何您都必须使用属性。

# eclipse - Eclipse、junit、Hibernate 在“获取数据库的子项”期间发生内部错误

> ID：14606584
> 
> 赞同：1
> 
> 时间：2013-01-30T14:39:30.087
> 
> 标签：eclipse, hibernate, hibernate-tools

当我尝试在 Eclipse 中打开休眠透视图时，我收到上述错误，并带有以下堆栈跟踪：

```
java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
at org.apache.commons.logging.impl.SLF4JLocationAwareLog.debug(SLF4JLocationAwareLog.java:133)
at org.hibernate.cfg.reveng.dialect.JDBCMetaDataDialect.getTables(JDBCMetaDataDialect.java:26)
at org.hibernate.cfg.reveng.JDBCReader.processTables(JDBCReader.java:476)
at org.hibernate.cfg.reveng.JDBCReader.readDatabaseSchema(JDBCReader.java:74)
at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter$2.execute(LazyDatabaseSchemaWorkbenchAdapter.java:126)
at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)
at org.hibernate.console.ConsoleConfiguration.execute(ConsoleConfiguration.java:107)
at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter.readDatabaseSchema(LazyDatabaseSchemaWorkbenchAdapter.java:115)
at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter.getChildren(LazyDatabaseSchemaWorkbenchAdapter.java:65)
at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.fetchDeferredChildren(BasicWorkbenchAdapter.java:106)
at org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:235)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

这是我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
    xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>

    <repositories>
        <repository>
            <id>caf</id>
            <name>caf-repo</name>
            <url>http://artifactory.fao.org/artifactory/caf-release-local</url>
        </repository>
    </repositories>
    <groupId>org.fao.fipdt</groupId>
    <artifactId>fip-dt</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>FIP-Dt Tool</name>
    <properties>
        <org.springframework.version>3.2.0.RELEASE</org.springframework.version>
        <javax.servlet.jstl.version>1.2</javax.servlet.jstl.version>
    </properties>

    <profiles>
        <profile>
            <id>development</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <properties>
                ...
            </properties>
        </profile>
    </profiles>

    <dependencies>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.2.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.2.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-jpa</artifactId>
            <version>1.0.1.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.2.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.2.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.2.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>3.2.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.2.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.fao.caf</groupId>
            <artifactId>caf-client</artifactId>
            <version>3.3.3</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>${javax.servlet.jstl.version}</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.1</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.1.1</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>20040616</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.9.Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.9.Final</version>
        </dependency>

    </dependencies>

    <build>

        <finalName>fip-dt</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <encoding>UTF8</encoding>
                </configuration>
                <inherited>true</inherited>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
            </plugin>
        </plugins>

        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
                <includes>
                    <include>**/*.xml</include>
                </includes>
            </resource>
        </resources>
        <testResources>
            <testResource>
                <directory>src/test/resources</directory>
                <filtering>true</filtering>
                <includes>
                    <include>**/*.xml</include>
                </includes>
            </testResource>
            <testResource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
                <includes>
                    <include>**/*.xml</include>
                </includes>
            </testResource>
        </testResources>
    </build>
</project> 
```

我浏览了该站点，我知道问题与 sfl4j 包含有关，但不幸的是我试图排除它，更新它，添加依赖项，但每次尝试都失败了。

我可以从依赖层次结构中看到的版本是 1.6.1，并且与休眠核心 pom 中的版本相同（但在那个版本中，范围是 test.

该库包含该类和方法，但我不知道为什么休眠工具找不到它们。

我尝试使用 Spring Tool Suite ide，并使用全新的 eclipse juno 安装。

我的想法不多了。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-29T09:57:30.607

Review your project pom and eclipse configuration: you've two different versions of log4j/slf4j.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T06:48:08.870

The problem is with two or more versions of the same jar in the classpath as indicated by David.

In this situation you may try these:

•Your hibernate tools plugin (< eclipse_directory >/plugins/) and your project maven repository (< user_directory >/.m2/repository/org/slf4j) have different SLF4J jar version. Maintain same version in both of these folders (read classpath). Keep the latest one in both of these and delete the older one. It's a dirty hack but an acceptable way to keep jar versions in-sync.

•Another (better) way, keep your data access objects in a separate project. Create a simple maven POJO project and automate code generation through hibernate tools. Import this project into the project where you're maintaining business logic. This is a standard design in big projects and, the good part, you don't have to suffer the version conflict.

# windows-phone - Windows Phone 8 中的 NameValueCollection

> ID：14606588
> 
> 赞同：1
> 
> 时间：2013-01-30T14:39:47.217
> 
> 标签：windows-phone, namevaluecollection

我想在 windows phone 8 中使用 NameValueCollection，但我在 WP8 SDK 中看不到这个选项。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:13:05.877

此功能已被删除。

但是可以使用解析和 SortedDictionary 来操作查询。即这个片段对查询字符串进行排序：

```
public string sortQuery(string myUrl)
    {
        string url = myUrl.Substring(0, myUrl.IndexOf("?") + 1);
        string q = myUrl.Substring(myUrl.IndexOf("?") + 1);
        string[] pr = q.Split('&');
        SortedDictionary<string,string> d = new SortedDictionary<string,string>();

        foreach (string s in pr)
        {
            string[] prm = s.Split('=');
            string key = prm[0];
            string value = "";
            if (prm.Length > 1) { value = "=" + prm[1]; }
            d.Add(key, value);
        }

        string result = "";

        foreach (var k in d.Keys)
        {
            result += k + d[k] + "&";
        }

        result = result.Substring(0, result.Length - 1);
        return url + result;
    } 
```

# php - 按类别复制的wordpress相关帖子

> ID：14606596
> 
> 赞同：0
> 
> 时间：2013-01-30T14:40:21.867
> 
> 标签：php, wordpress

我在让 $do_not_duplicate 正常工作时遇到问题 我的博客上有几个标题重复，我需要它停止。这是我到目前为止所拥有的：

```
<?php if (is_single()): ?>
<section>
<h3>Related Posts</h3>
<?php 
            global $post;
            $cats = wp_get_post_categories($post->ID);
            $do_not_duplicate[] = $post->ID; 
            if ( count ( $cats ) > 0):
            $args = array( 'numberposts' => 3, 'category' => implode($cats, ","), 'exclude' => $post->ID, 'post__not_in' => $do_not_duplicate );
            $related_posts = get_posts( $args );
            if (count($related_posts)): ?>

            <ul>
                <?php foreach ($related_posts as $post) :  setup_postdata($post); ?>
                <li><a href="<?php the_permalink() ?>"><?php while ( have_posts() ) : the_post(); $do_not_duplicate[] = $post->ID; if ( get_the_title() ) the_title(); else the_ID(); ?><?php 
endwhile; 
wp_reset_query(); ?>
                </a></li>

                <?php endforeach; ?>
            </ul>

            <?php else: ?>
            <p>No related posts found.</p>
            <?php endif; ?>
            <?php else: ?>
            <p>No related posts found.</p>
            <?php endif; ?>

        </section>
        <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:37:02.930

您在 foreach 中有一段时间 (have_posts() )，这会产生重复。您可以将循环更改为以下内容：

```
<?php 
        global $post;
        $cats = wp_get_post_categories($post->ID);
        $do_not_duplicate[] = $post->ID; 
        if ( count ( $cats ) > 0):
        $args2 = array( 'numberposts' => 3, 'category' => implode($cats, ","), 'exclude' => $post->ID, 'post__not_in' => $do_not_duplicate );
        $related_posts = get_posts( $args2 );
        if (count($related_posts)): 
  ?>

  <ul>
    <?php foreach ($related_posts as $post) :  setup_postdata($post); ?>
            <li><a href="<?php the_permalink() ?>" ><?php $do_not_duplicate[] = $post->ID; if ( get_the_title() ) the_title(); else the_ID(); ?></a></li>
    <?php endforeach; ?>
        </ul>
        <?php wp_reset_query(); ?>
  <?php endif;endif; ?> 
```

在循环结束时，var $do_not_duplicate 保存帖子的 id 和相关帖子的所有 id。

# sql-server - 存储过程在 VB6 中不起作用

> ID：14606598
> 
> 赞同：2
> 
> 时间：2013-01-30T14:40:31.807
> 
> 标签：sql-server, stored-procedures, vb6, timeout

我有一个经常调用的存储过程，因为它用于检索帐户对帐单。实际存储过程在 MSSMS 的查询窗口中大约需要 10 毫秒，并且通常运行良好，但有时会在我的 VB6 应用程序中决定超时（超时设置为 120 秒）。SP 连接 2 个数据库之间的表，一个包含当前事务 (DB #1)，另一个包含存档事务 (DB #2)。使用“sp_who2”，似乎没有 SPID 占用或阻塞系统。

这是我设置的 SQL 变量：

```
DECLARE @rtnRecs int;
strSQL = "EXEC spA_StatementData 
        @sAccountNr = '123abc', 
        @bIncludeHistory = 1, 
        @bShowAllTransactions = 1, 
        @iValidRecords = @rtnRecs OUTPUT" 
```

我在VB6中使用的方法是：

```
rs.Open sql, con, adOpenStatic 
```

其中 rs 是 ADODB.Recordset，con 是到数据库的连接。

这段代码在很长一段时间内运行良好，比如 2 个月，并被多个运营商使用。然后它突然无缘无故地停止工作 - 但在 MSSMS 中仍然可以正常工作。我强调的是 VB6，因为那是问题首次出现的地方，但同样的事情也发生在我的 VB.net 代码中。

需要注意的一点是，“@bIncludeHistory”参数是将 JOIN 设置为存档数据库 (DB #2) 的条件。当 '@bIncludeHistory' 设置为 0 时，不会发生超时。

重置服务可以解决问题，但只能作为最后的手段。还有什么我可以尝试的吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:31:48.220

当心存储过程中的参数嗅探。尝试这个

```
CREATE PROC spA_StatementData (
        @sAccountNr             VARCHAR(1000)
        , @bIncludeHistory      BIT
        , ...
) AS
SET NOCOUNT ON

DECLARE @_sAccountNr            VARCHAR(1000)
        , @_bIncludeHistory     BIT
        , ...

--- prevent parameter sniffing
SELECT  @_sAccountNr = @sAccountNr
        , @_bIncludeHistory = @bIncludeHistory
        , ...

--- use local @_sAccountNr, @_bIncludeHistory, etc. instead of parmeter variables 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T08:00:26.790

同样的问题发生在我身上，我错过了STORE PROCEDURE中的以下代码

```
SET NOCOUNT ON 
```

希望这可以帮助。确保您的 SP 有此代码。

# android - Android 中的 DecorView 和 ViewRootImpl 之间有什么关系？

> ID：14606602
> 
> 赞同：3
> 
> 时间：2013-01-30T14:40:41.243
> 
> 标签：android, android-layout, android-framework

我不确定我是否理解两者之间的关系。据我了解 ViewRootImpl 持有 mView ，它是每个窗口的主视图，而 DecorView 也是每个窗口的主视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T08:19:36.423

事实证明 ViewRootImpl 中的 mView 是 DecorView 所以这回答了我自己的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-19T05:51:32.333

ViewRootImpl 是视图层次结构的顶部，它实现了 View 和 WindowManager 之间所需的协议。

DecorView 是 Window 视图层次结构的真正根。它既包含“装饰”（即窗口的标题，也包含内容视图。

[![在此处输入图像描述](../Images/18eb246742d6611de0441adc2e3312ea.png)](https://i.stack.imgur.com/Z0eWX.png) [![在此处输入图像描述](../Images/1a8ceb3fafd73176a527add4bbae3a3b.png)](https://i.stack.imgur.com/Jcirv.png)

# gradle - gradle的默认代码是什么

> ID：14606606
> 
> 赞同：1
> 
> 时间：2013-01-30T14:41:00.630
> 
> 标签：gradle

有人开始使用 gradle 时向我提出了一个非常棒的问题，我意识到它会非常酷并且可能已经存在。

当我们去覆盖像 jar 这样的任务时，很多时候你想真正看到用于 jar 任务或 compileJava 任务的原始 gradle 代码。这样的事情存在吗？（或者他们最终是否用java编写了那些东西）。如果确实存在，请给我们一个链接？并且连接到命令行或在线文档会很棒（或者它可能连接到某个地方而我错过了它，因为在线文档是一本大书，这很棒，不要误会我的意思。）。

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:54:19.513

代码在 github 上，[在网站](http://www.gradle.org/development)上有详细说明，因此您可以轻松查看并 grep 以获取特定实现。

例如[，这是 Jar 任务的代码](https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/groovy/org/gradle/api/tasks/bundling/Jar.groovy)。

您在脚本中使用的 Gradle 构建语言是用 Groovy 和 Java 实现的 DSL。[语言参考](http://www.gradle.org/docs/current/dsl/)是一个有用的资源，用于映射您在项目中编写的内容和底层代码的 API 文档。

# android - 如何在 TextView 中将文本与其复合可绘制对象对齐？

> ID：14606611
> 
> 赞同：6
> 
> 时间：2013-01-30T14:41:10.043
> 
> 标签：android, textview, compound-drawables

我不知道如何在 TextView 中设置文本及其复合可绘制对象（小于文本）的对齐方式。似乎默认对齐方式是中心，但我需要将它们对齐边缘。

PS：`android:gravity`如果复合绘图大于文本，则效果很好，但如果更小，则效果不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:53:14.323

听起来您正在使用具有固定尺寸的图像`android:drawableLeft`。

尝试使用[九个补丁](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)或通过 XML 资源文件定义可绘制对象。这样，您的可绘制对象的尺寸将拉伸以`TextView`按照您想要的方式对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-22T19:29:59.863

我有一个类似的问题，我想使用 setCompoundDrawables 为浮动提示设置顶部可绘制对象，但是 TextView (EditText) 将顶部可绘制对象设置为居中，而不管其宽度是多少。

我正在使用一个自定义的 Drawable，在它的 draw 方法中，我抓住了 clipBounds，并在它的顶部向左平移以返回到 TextView 的 0,0 位置。

另一种简单的方法是从 0,0 获取矩阵和 mapPoints，然后取它们的负数并以这种方式转换回 0,0。

# c# - 如何使用处理程序检查图像是否存在于图像控件中以显示图像

> ID：14606612
> 
> 赞同：2
> 
> 时间：2013-01-30T14:41:10.073
> 
> 标签：c#, asp.net, httphandler, ashx, ascx

**处理程序**

```
public class Handler2 : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        string id = context.Request.QueryString["Id"];
        string constr = System.Configuration.ConfigurationManager
            .ConnectionStrings["EmployeeDatabase"].ConnectionString;
        SqlConnection con = new SqlConnection(constr);

        con.Open();
        SqlCommand cmd = new SqlCommand("GetImage", con);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@EmpID", id);
        //cmd.Parameters.AddWithValue("@Gender", ge);
        SqlDataReader dr = cmd.ExecuteReader();
        dr.Read();

        if (dr.HasRows)
        {
            byte[] imageBytes = (byte[])dr.GetValue(0);
            context.Response.BinaryWrite(imageBytes);
        }

        dr.Close();
        con.Close();
    } 
```

**用户控制**

```
public void BindGridviewData()
{
    String empid1 = Name;
    // String empid1 = Request.QueryString["MyText"];
    int empid = int.Parse(empid1);
    //int empid = 1500422;
    string constr = System.Configuration.ConfigurationManager
        .ConnectionStrings["EmployeeDatabase"].ConnectionString;
    SqlConnection con = new SqlConnection(constr);

    con.Open();
    SqlCommand cmd = new SqlCommand("GetEmployeeDetails", con);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add("@EmpID", SqlDbType.Int, 0).Value = empid;
    SqlDataReader dr = cmd.ExecuteReader();
    dr.Read();

    Label9.Text = dr[0].ToString();
    Label2.Text = dr[1].ToString();
    Label3.Text = dr[2].ToString();
    Label4.Text = dr[3].ToString();
    Label5.Text = dr[4].ToString();
    Label6.Text = dr[5].ToString();
    Label7.Text = dr[6].ToString();
    Label8.Text = dr[7].ToString();

    Image2.ImageUrl = "~/Handler2.ashx?Id=" + empid;
} 
```

在上面的程序中，如果我们没有在图像控件中获取图像，我们需要将按钮上的文本显示为“添加您的图像”，如果我们有图像，我们需要将其显示为“更新您的图像”

我使用了以下不起作用的方法：

**选项1**

```
 if (Image2.ImageUrl != null)
 {
     PageLinkButton.Text = "Upadte your Image";
 }
 else
 {
     PageLinkButton.Text = "Add your Image";
 } 
```

**选项 2**

```
WebClient client = new WebClient();
byte[] Value = client.DownloadData(Image2.ImageUrl);

if (Value != null)
{
    PageLinkButton.Text = "Update your Image";
}
else
{
    PageLinkButton.Text = "Add your Image";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:16:37.923

如果图像不存在，您可以让通用处理程序返回 404 状态代码：

```
public void ProcessRequest(HttpContext context)
{
    string id = context.Request.QueryString["Id"];
    string constr = System.Configuration.ConfigurationManager.ConnectionStrings["EmployeeDatabase"].ConnectionString;
    using (var con = new SqlConnection(constr))
    using (var cmd = con.CreateCommand())
    {
        con.Open();
        cmd.CommandText = "GetImage";
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@EmpID", id);
        using (var dr = cmd.ExecuteReader())
        {
            if (dr.Read())
            {
                // the image was found
                byte[] imageBytes = (byte[])dr.GetValue(0);
                // Don't forget to set the proper content type
                context.Response.ContentType = "image/png";
                context.Response.BinaryWrite(imageBytes);
            }
            else
            {
                // no record found in the database => return 404
                context.Response.StatusCode = 404;
            }
        }
    }
} 
```

然后在客户端上，您可以使用 WebClient 来测试图像是否存在：

```
var imageUrl = "~/Handler2.ashx?Id=" + empid;
var baseUri = new Uri(Request.Url.GetLeftPart(UriPartial.Authority));
var url = new Uri(baseUri, VirtualPathUtility.ToAbsolute(imageUrl));
using (var client = new HttpClient())
{
    var request = new HttpRequestMessage(HttpMethod.Head, url);
    var response = client.SendAsync(request).Result;
    if (response.IsSuccessStatusCode)
    {
        // the image exists:
        PageLinkButton.Text = "Update your Image";
        Image2.ImageUrl = imageUrl;
    }
    else
    {
        // the image does not exist:
        PageLinkButton.Text = "Add your Image";
    }
} 
```

# junit - 将@Test 方法动态添加到junit 测试类

> ID：14606617
> 
> 赞同：0
> 
> 时间：2013-01-30T14:41:26.390
> 
> 标签：junit, junit4, junit3

我们有一个文本文件，其中给出了搜索查询列表和预期结果。如，

## 搜索结果

```
a:120         result1
b:220         result2
.....
..... 
```

现在，我们需要编写一个 JUnit（在我们的日常构建中大量使用）测试类，其中每一行代表一个`@Test method`. 因此，我们知道哪个搜索案例失败（UI）。

我们已经有了一个解决方案，我们只有一个 @Test 方法，并且我们有日志来检查哪个案例通过或失败。

但是，我们正在尝试实现每个案例都表示为一个 junit 方法。是否真的可以为 JUnit 架构动态创建一个 @Test 方法。

我们的 @Test 方法对于每个搜索案例都是相同的。这意味着，我们只想每次都传递一个不同的参数。

**我想出了一个 JUnit3 解决方案来解决我的问题。需要帮助将其翻译成 Junit4。**

```
public static Test suite()
   {
      TestSuite suite = new TestSuite();
      for ( int i = 1; i <= 5; i++ ) {

         final int j = i;
         suite.addTest(
            new Test1( "testQuery" + i ) {
               protected void runTest()
               {
                  try {
                     testQuery( j );
                  } catch ( MalformedURLException e ) {

                     // TODO Auto-generated catch block
                     e.printStackTrace();
                  } catch ( SolrServerException e ) {

                     // TODO Auto-generated catch block
                     e.printStackTrace();
                  }
               }
            }
            );
      }

      return suite;
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T18:35:38.760

在 JUnit 4 中有一个称为“参数化测试”的概念正是用于此目的。

我不完全理解你上面的测试，但这应该给你一个提示：

```
@RunWith(Parameterized.class)
public class ParameterizedTest {

    private String query;
    private String expectedResult;

    public ParameterizedTest(String query, String expectedResult) {
        this.query = datum;
        this.expectedResult = expectedResult;
    }

    @Parameters
    public static Collection<Object[]> generateData() {
        Object[][] data = {
                { "a:120", "result1" },
                { "b:220", "result2" },
        };
        return Arrays.asList(data);
    }

    @Test
    public void checkQueryResult() {
        System.out.println("Checking that the resutl for query " + query + " is " + expectedResult);
        // ...
    }

} 
```

# json - 带有根元素的 JSON 序列化在 RestEasy/Jettison/JBossAS7 中不起作用

> ID：14606618
> 
> 赞同：1
> 
> 时间：2013-01-30T14:41:27.517
> 
> 标签：json, rest, jboss, jaxb, jettison

我正在拼命寻找一种方法来使用根元素进行 JSON 序列化，以便在启用了 RestEasy 和 Jettison 提供程序的 JBoss AS 7.1 上工作。

尽管根据 RestEasy 文档，返回 JSON 根元素应该可以工作，但在请求 REST servlet 时我从不检索。

我使用对象工厂：

```
@XmlRegistry
public class ObjectFactory {

    private final static QName _NotificationList_QNAME = new QName("xxx:xxx:xxx", "notificationList");

   public NotificationList createNotificationList() {
        return new NotificationList();
    }

    @XmlElementDecl(namespace = "xxx:xxx:xxx", name = "notificationList")
    public JAXBElement<NotificationList> createNotificationList(NotificationList value) {
        return new JAXBElement<NotificationList>(_NotificationList_QNAME, NotificationList.class, null, value);
    }

} 
```

使用以下 XML 对象：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "NotificationList", namespace = "xxx:xxx:xxx:xxx", propOrder = {
    "any"
})
@XmlRootElement (name = "notificationList" )
public class NotificationList {

    @XmlAnyElement(lax = true)
    protected List<Object> any;

    @XmlElement (name="notificationList")
    public List<Object> getAny() {
        if (any == null) {
            any = new ArrayList<Object>();
        }
        return this.any;
    }
} 
```

我希望与根元素“notificationList”一起返回通知列表，但我不明白。我默认使用 Jettison 提供程序，但也切换到 Jackson。两者都不适合我。

也许值得一提的是，REST 方法并没有返回对象本身，而是将 AsynchronousResponse 传递给另一个对象，该对象处理并最终将 JSON 对象返回给我在创建响应时使用 AsynchronousResponse

编辑：有关实际使用 NotificationList 的类的更多信息：

以下 REST 类使用 NotificationChannel 类（此处不感兴趣）并将异步响应对象传递给另一个类。此响应对象最终返回 NotificationList。以简化的方式，如下所示：

```
 @Path("/notificationchannel/v1")
            public class NotificationChannelService {

        @POST
        @Path("/{userid}/channels")
        @Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
        @Mapped(namespaceMap = {
           @XmlNsMap(namespace = "XXXX:XXXX:XXXX:XXXX", jsonName = "notificationChannel")
               })

        public void createNotificationChannel(
            final @Suspend(10000) AsynchronousResponse response,
            final JAXBElement<NotificationChannel> ncParam, 
            @PathParam("userid") String userID) {

            NotificationManager nMan = new NotificationManager(resp);

        }
 } 
```

响应创建并返回如下：

```
 public class NotificationManager {

      public NotificationManater(AsynchronousResponse resp){

      //dostuff

      notificationList = objectFatory.creatNotificationList();

      //add notification object (also defined int ObjectFactory)
       notificaitonList.addObject(messageNotification)
       notificaitonList.addObject(statusNotification)
       notificaitonList.addObject(inviteNotification)

       //dostuff

       resp.setResponse(Response.created(UriBuilder.fromUri(nc.getResourceURL()).build())
                        .entity(notificationList)
                        .type(MediaType.APPLICATION_JSON)

                    .build());
        }
     } 
```

在客户端，我希望得到以下响应：

```
{"notificationList": {
    "inboundMessageNotification": {"inboundMessage": {
        "destinationAddress": "tel:+19585550100",
        "inboundMMSMessage": {"subject": "Who is RESTing on the beach?"},
        "link": {
            "href": "http://example.com/exampleAPI/v1/messaging/inbound/subscriptions/sub123",
            "rel": "Subscription"
        },
        "messageId": "msg123",
        "resourceURL": "http://example.com/exampleAPI/v1/messaging/inbound/registrations/reg123/messages/msg123      ",
        "senderAddress": "tel:+19585550101"
    }},
    "presenceNotification": {
        "callbackData": "1234",
        "link": {
            "href": "http://example.com/exampleAPI/v1/presence/tel%3A%2B19585550101/subscriptions/presenceSubscriptions/        tel%3A%2B19585550100/sub001",
            "rel": "PresenceSubscription"
        },
        "presence": {"person": {"mood": {"moodValue": "Happy"}}},
        "presentityUserId": "tel:+19585550100",
        "resourceStatus": "Active"
    }
}} 
```

但我确实得到了这个（没有 RootElement 名称，没有通知对象名称）：

```
{
    {
        "destinationAddress": "tel:+19585550100",
        "inboundMMSMessage": {"subject": "Who is RESTing on the beach?"},
        "link": {
            "href": "http://example.com/exampleAPI/v1/messaging/inbound/subscriptions/sub123",
            "rel": "Subscription"
        },
        "messageId": "msg123",
        "resourceURL": "http://example.com/exampleAPI/v1/messaging/inbound/registrations/reg123/messages/msg123      ",
        "senderAddress": "tel:+19585550101"
    },
    {
        "callbackData": "1234",
        "link": {
            "href": "http://example.com/exampleAPI/v1/presence/tel%3A%2B19585550101/subscriptions/presenceSubscriptions/        tel%3A%2B19585550100/sub001",
            "rel": "PresenceSubscription"
        },
        "presence": {"person": {"mood": {"moodValue": "Happy"}}},
        "presentityUserId": "tel:+19585550100",
        "resourceStatus": "Active"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T18:50:45.820

我遇到了完全相同的问题，问题是基于 Jackson 的 json 提供程序（resteasy-jackson-provider）实际上正在接管序列化（由于隐式模块依赖性）。我所做的是使用具有以下内容的特定部署描述符*META-INF/jboss-deployment-structure.xml*。

```
 <jboss-deployment-structure>
  <deployment>
    <exclusions>
      <module name="org.jboss.resteasy.resteasy-jackson-provider" />
    </exclusions>
    <dependencies>
      <module name="org.jboss.resteasy.resteasy-jettison-provider" />
    </dependencies>
  </deployment>
</jboss-deployment-structure> 
```

它将强制容器为您的应用程序切换到 jettison 提供程序。

# linux - Bash如何打印以元音开头并以数字结尾的参数

> ID：14606620
> 
> 赞同：0
> 
> 时间：2013-01-30T14:41:32.100
> 
> 标签：linux, bash, grep

我正在编写一个脚本，该脚本打印以元音开头并以数字结尾的参数

```
Example : ./script Alex1GB0 Bud1GG0 Ethan8DC0 Chad5XZ7d 
```

输出应该是

```
Alex1GB0 Ethan8DC0 
```

这是我迄今为止尝试过的

```
 #!/bin/bash
 for x in $*; do
     o=$(echo $x | grep '\<[AEIOUaeiou]...[0-9].\>')

     if[$? -eq 0]; then
            echo $o
     fi
 done
 exit 0 
```

它不起作用；我应该改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:50:41.397

`...`bash中没有省略号 ( ) 之类的东西。相反，使用`.*`. 另外，后面的点`[0-9]`表示数字后面有东西，这违反了规范。

`grep`事实上，当我们进行模式匹配时，不需要运行 subshel​​l 和：

```
#! /bin/bash
for x in "$@"; do
    if [[ $x == [AEIOUaeiou]*[0-9] ]] ; then
        echo "$x"
    fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:47:03.433

**grep**

```
grep -oP '(?<=\s)[AEIOUaeiou][^ ]*[0-9](?=\s)' 
```

你的例子：

```
kent$  echo "Example : ./script Alex1GB0 Bud1GG0 Ethan8DC0 Chad5XZ7d"|grep -oP '(?<=\s)[AEIOUaeiou][^ ]*[0-9](?=\s)'
Alex1GB0
Ethan8DC0 
```

**awk**

```
awk '{for(i=1;i<=NF;i++)if($i~/^[AEIOUaeiou][^ ]*[0-9]$/)print $i}' file 
```

你的例子：

```
kent$  echo "Example : ./script Alex1GB0 Bud1GG0 Ethan8DC0 Chad5XZ7d"|awk '{for(i=1;i<=NF;i++)if($i~/^[AEIOUaeiou][^ ]*[0-9]$/)print $i}'
Alex1GB0
Ethan8DC0 
```

# coldfusion - 为什么 Coldfusion 评估这些数字不相等？

> ID：14606621
> 
> 赞同：4
> 
> 时间：2013-01-30T14:41:33.550
> 
> 标签：coldfusion, coldfusion-8

为什么 Coldfusion 8 将 47.0000 * 15.40 eq 723.8 评估为假？

```
<cfset test = false />
<cfset a = 47.0000 />
<cfset b = 15.40 />
<cfset c = 723.8 />

<cfif (a * b) eq c>
  <cfset test = true />
</cfif>

<cfdump "#test#"> 
```

测试输出为假。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T15:19:14.817

您可以使用[PrecisionEvaluate()](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_m-r_13.html)让 CF 使用 BigDecimals 进行数学运算。

```
<cfset test = false />
<cfset a = 47.0000 />
<cfset b = 15.40 />
<cfset c = 723.8 />

<cfif PrecisionEvaluate(a * b) eq c>
  <cfset test = true />
</cfif>

<cfdump var="#test#" abort="true"> 
```

这导致预期的答案为真。

# ajax - 延迟 GET 直到所有 POST 方法都完成，而不是刚刚开始

> ID：14606626
> 
> 赞同：3
> 
> 时间：2013-01-30T14:41:45.250
> 
> 标签：ajax, jquery, ubuntu

我的 jQuery 记录插入过程遇到了两个问题，我希望这个出色的 SO 社区可以帮助我解决至少*一个*问题。这些是问题：

**问题 1 - 间歇性服务器延迟**

`POST`第一个问题与我的 Ubuntu 10.04 服务器在对 mySQL 数据库执行数据时似乎表现出间歇性的 4.5 秒延迟有关。大多数`POST`命令在正常的毫秒内执行，但是当出现延迟时，似乎总是大约 4.5 秒。这不是一个繁忙的公共服务器，所以它不应该是服务器负载的问题。这些短片展示了我要解释的内容：

[视频 1](http://tinypic.com/player.php?v=4k9qtg&s=6) [视频 2](http://tinypic.com/player.php?v=2jfbn8p&s=6)

我在[serverfault](https://serverfault.com/questions/473747/ubuntu-10-04-server-delay-when-post-to-mysql)上发布了一个问题，正在等待来自该论坛的一些输入，这可能更适合此问题 1。

**问题 2 - jQuery POST 和 GET 方法的时序**

我要解决的真正问题是**在**`GET`所有调用完成之前`POST`阻止调用。目前，我已实施延迟发送. 这是代码：**`$.when.apply``GET`**

 **```
function(){
  $.when.apply(undefined, InsertTheAPPs()).done(function (){
    $.ajax({
      url: sURL + "fileappeal/send_apps_email",
      success: function() {
        var m = $.msg("my message",
        {header:'my header', live:10000});
        setTimeout(function(){
          if(m)m.setBody('...my other message.');
        },3000);
        setTimeout(function(){
          if(m)m.close(function(){
              window.location.replace(sURL+'client/view');
          });
        },6000);
        $('#ajaxShield').fadeOut(1000);
      },
      error: function(){
          $.msg("error message",
          {header:'error header', live:10000});
      }
    });
  });
} 
```

我的问题是由于上述问题 1 中描述的延迟而出现的。`GET`在所有`POST`方法都**开始**后调用该方法，但我需要该`GET`方法等到所有`POST`方法都**结束**。这是我需要帮助的问题。基本上，这里发生的事情是错误的，我的确认电子邮件是在所有记录**完全**插入到 mySQL 数据库之前发送的。

这是 jQuery`$.each`循环的代码。这是不仅需要**begin**，而且必须在上面的 ajax 调用之前**结束**`fileappeal/send_apps_email`的代码：

```
function InsertTheAPPs(){
  $('input[name=c_maybe].c_box').each(function(){
    var jqxhrs = [];
    if($(this).prop('checked')){
      var rn = $(this).prop('value');
      jqxhrs.push(
        $.ajax({
          url: sURL + 'fileappeal/insert_app',
          type:"POST",
          dataType: 'text',
          data: {'rn': rn},
          error: function(data) {console.log('Error:'+rn+'_'+data);}
        })
      )
    return jqxhrs;
    }
  });
} 
```

有人对我如何解决服务器延迟问题并防止`GET`在所有`POST`方法完成之前调用 有任何建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:18:45.143

你的帖子有点小问题。在你解决它之后，这篇文章应该可以帮助你完成你的代码：[jQuery Deferred - waiting for multiple AJAX requests to finish](https://stackoverflow.com/questions/6538470/jquery-deferred-waiting-for-multiple-ajax-requests-to-finish)

您正在返回内部，`.each`但函数本身不返回任何内容。所以你的延迟没有得到等待的ajax调用数组。而且，由于您的 jqhrs 是在 each 内部定义的，因此范围是每个 c_box 上的每次迭代。您的方法应如下所示：

```
function InsertTheAPPs(){
    var jqxhrs = [];

    $('input[name=c_maybe].c_box').each(function(){         
        if($(this).prop('checked')){ 
            var rn = $(this).prop('value'); 
            jqxhrs.push(
                $.ajax({
                    url: sURL + 'fileappeal/insert_app',
                    type:"POST",
                    dataType: 'text',
                    data: {'rn': rn},
                    error: function(data) {console.log('Error:'+rn+'_'+data);}
                })
            )
        }
    });

    return jqxhrs;
} 
```

您还可以使您的代码更容易。由于您只想知道是否检查了某些内容，因此可以使用 jquery 伪类过滤器`:checked`，例如：

```
function InsertTheAPPs(){
    var jqxhrs = [];

    $('input[name=c_maybe].c_box').filter(':checked').each(function(){         
        var rn = $(this).prop('value'); 
        jqxhrs.push(
            $.ajax({
                url: sURL + 'fileappeal/insert_app',
                type:"POST",
                dataType: 'text',
                data: {'rn': rn},
                error: function(data) {console.log('Error:'+rn+'_'+data);}
            })
        )
    });

    return jqxhrs;
} 
```

您可以将过滤器组合`:checked`到主过滤器中，`$('input[name=c_maybe].c_box:checked')`但我将其保留为长格式以真正展示发生了什么。**

# jquery - Jquery UI 手风琴菜单

> ID：14606627
> 
> 赞同：0
> 
> 时间：2013-01-30T14:41:46.420
> 
> 标签：jquery, asp.net, jquery-ui

我在用户控件中创建了一个 jquery 手风琴菜单，并在项目母版页中使用了该用户控件。

我想根据超链接设置手风琴的活动索引（保持打开状态:)），用户正在点击。

用户控制代码，

```
<div id="accordion1">       
    <div class="headeritem"><asp:Image runat="server" CssClass="headerimage" ImageUrl="" /><span class="headerspan">link1</span></div>
    <div class="content">
        <asp:HyperLink ID="hlMenuItem1" runat="server" Text="Search Appearances" NavigateUrl="" CssClass="menuitem"></asp:HyperLink>        
    </div>
    <div class="headeritem"><asp:Image ID="Image1" runat="server" CssClass="headerimage" ImageUrl="" /><span class="headerspan">Link2</span></div>
    <div class="content">
        <asp:HyperLink ID="hlMenuItem4" runat="server" Text="Published Feedback" NavigateUrl="" CssClass="menuitem"></asp:HyperLink>        
    </div>
</div> 
```

单击链接时如何保存索引值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:17:38.577

我通过查询字符串传递索引并检索该值以设置活动索引。

# extjs - 使用模态叠加将 Ext.window.MessageBoxView 渲染到特定区域

> ID：14606628
> 
> 赞同：0
> 
> 时间：2013-01-30T14:41:53.083
> 
> 标签：extjs, extjs4, loading, messagebox, mask

我正在使用以下代码将消息框呈现给我的应用程序中的特定 div。

我只想屏蔽我渲染到的 div 并将消息框和按钮放置在 div 的中心。

模态出现在整个文档上，这是不可取的，并且消息框也不在 div 中居中。看不到将其配置为所需结果的方法。

```
Ext.Msg.show({
    title: 'Access',
    msg: 'You do not have access to the current client, would you like access?',
    buttons: Ext.Msg.YESNOCANCEL,
    icons: Ext.Msg.QUESTION,
    renderTo: Ext.get('client-reports-tab'),
    modal: false
}); 
```

我尝试了一个加载掩码，它只是掩盖了 div，但没有给我行动号召：

```
Ext.get('client-reports-tab').mask('You do not have access to this client, <a href="javascript:void()" class="client-coverage">please request access<\/a>', 'cct-msg-mask'); 
```

请避开*javascript:void()*它不会进入生产版本:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:59:52.530

用*alignTo*解决：

```
var msg = Ext.Msg.show({
            title: 'Access',
            msg: 'You do not have access to the current client, would you like access?',
            buttons: Ext.Msg.OK,
            icons: Ext.Msg.QUESTION,
            modal: false
        });

msg.alignTo(Ext.get('client-reports-tab'), 'c-c'); 
```

在以下人员的帮助下：

[将 loadMask() 应用于 extjs 中的单个元素？](https://stackoverflow.com/questions/6776238/applying-loadmask-to-a-single-element-in-extjs?rq=1)

# node.js - 如何在 NodeJS 中链接文件（+ 让用户在点击文件时下载文件）？

> ID：14606630
> 
> 赞同：0
> 
> 时间：2013-01-30T14:42:00.650
> 
> 标签：node.js, express

我想这只是一个简单的问题，但我无法自己解决。

（我正在使用 Express + NodeJS）

我想要的是一个目录列表，其中包含文件。这些文件应被链接，以便用户只需单击链接即可下载它们（如您获得的标准目录列表，例如，如果您有没有任何索引文件的 apache 服务器）。

列出我使用的目录内容

```
var fs = require('fs');
fs.readdir('./anydir', function(err, files){
    files.forEach(function(file){
        res.send(file);
    });
}); 
```

（注意：如您所见，我没有在此示例中包含任何错误处理）

现在我尝试通过修改来链接文件

```
res.send(file) 
```

至

```
res.send('<a href=\"' + file + '\">' + file + '<br>'); 
```

但这只是打印出错误消息：

```
Cannot GET /anydir/File 
```

...因为我没有处理 app.js 中的每个文件请求。

我怎样才能实现我上面提到的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:16:46.170

只需使用`express.directory`and`express.static`作为中间件，可能使用用户定义的中间件来设置`Content-Disposition`标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:56:54.627

这对我有用：

```
var fs = require('fs');
fs.readdir('/var/', function(err, files){
    files.forEach(function(file){
        res.write('<a href=\"' + file + '\">' + file + '<br>');
    });
}); 
```

您将内容放在 write() 而不是 send() 中。试试这个，让我知道。我可以看到正确显示的文件列表。希望这对您有所帮助。

# cordova - 骨干路由器获取后退按钮的历史长度

> ID：14606634
> 
> 赞同：0
> 
> 时间：2013-01-30T14:42:18.387
> 
> 标签：cordova, backbone.js, back-button, backbone-routing

我在 PhoneGap 应用程序中使用 Backbone。像每个移动应用程序一样，我需要一个后退按钮功能。它基本上可以与 Backbone 完美配合，因为我可以简单地使用`window.history.back()`它并且它可以正常工作。

我唯一的问题是决定何时显示后退按钮。using`window.history.length`不起作用，因为它在使用时没有减少`back()`（当然，因为你也可以去`forward()`）。

有没有办法检测是否有更多历史记录或者我是否已经在堆栈的底部？由于浏览器似乎没有提供此信息（[如何检查用户是否可以返回浏览器历史记录](https://stackoverflow.com/questions/3588315/how-to-check-if-the-user-can-go-back-in-browser-history-or-not)），Backbone 是否会跟踪此信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:42:40.090

你可以很容易地实现这样的东西

```
Backbone.history.length = 0;
Backbone.history.on('route', function () { ++this.length; });
myRouter.back = function () {
  Backbone.history.length -= 2;
  window.history.back();
}; 
```

而只是`myRouter.back()`用来回去。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:39:34.107

Casey Foster 的答案乍一看看起来不错，但有一个缺陷：当使用`router.navigate`with`trigger`和`replace`both 设置为时，`true`你最终会得到一个错误的计数器。

我想出了一个更简单的解决方案：基本上只有一条路线我不需要后退按钮，这就是`index`路线。因此我的代码现在看起来像

```
Backbone.history.on('route', _.bind(function(router, route) {
    if(route === 'index') {
        this.$el.removeClass('has-back-button');
    } else {
        this.$el.addClass('has-back-button');
    }
}, this)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:18:40.270

基于[@CaseyFoster 的回答](https://stackoverflow.com/questions/14606634/backbone-router-getting-history-length-for-back-button/14607910#14607910)，您可以自己跟踪历史。除了您自己的后退按钮之外，您还需要抓住设备的硬件后退按钮按下。

PhoneGap[`backbutton`](http://docs.phonegap.com/en/2.3.0/cordova_events_events.md.html#backbutton)为此提供了事件：

```
document.addEventListener("backbutton", function() {
  Backbone.history.length -=2;
}, false); 
```

请注意，`Backbone.history.length`在 Casey Foster 的回答中定义，它不是 Backbone 本身的一部分。

# c++ - 指针是否存储在 std::set const 中？

> ID：14606637
> 
> 赞同：0
> 
> 时间：2013-01-30T14:42:37.633
> 
> 标签：c++, stl, iterator, set, constants

我正在寻找代码中的错误，但有一个问题：

```
 class a
 {
 public:
 void foo(int a) {}
 }

  std::set<a*> set;
  std::set<a*>::iterator it = set.begin();

  it->foo(55); //gives me error:
  // error: request for member ‘foo’ in ‘* it.std::_Rb_tree_const_iterator<_Tp>::operator-><a*>()’, which is of pointer type ‘a* const’ (maybe you meant to use ‘->’ ?) 
```

为什么它不允许我在上面使用非常量函数？如果不使用强制转换，我该怎么做才能拥有一组非常量指针？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T14:44:05.470

您需要取消引用*两次*：

```
(*it)->foo(55); 
```

–`it`是指向指针的迭代器。如果你有一个`std::set<a>`而不是一个`std::set<a*>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T14:46:23.737

问题是您需要尊重迭代器，然后是指针。替换`it->foo(55);`为`(*it)->foo(55);`这将起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T14:46:11.970

你是间接的一级。

```
(*it)->foo(55); 
```

有效，因为`it`它实际上是一个指向存储类型的指针，它本身就是一个指针。

# php - 在 PHP 中创建安全的 Web 服务

> ID：14606638
> 
> 赞同：0
> 
> 时间：2013-01-30T14:42:39.553
> 
> 标签：php

我需要一些帮助来理解概念，因为我不确定如何实现这一点。

我在网上有一个数据库，它与它所写的 php 一起工作得很好。我现在需要为 asp.net 页面创建查询我的 php 数据库并以相当的格式返回结果的能力在另一端易于操作，json 会很好。

我遇到的问题是 php 数据库的安全性。如果我在文件中嵌入了凭据（如下所示），我运行的数据库对查询不安全。所以做一些研究，看起来我需要研究 web 服务，因为我可以使用 SOAP 标头安全地从 ASPX 页面传递用户名和密码。有人可以确认这是真的吗？

```
$databaseName = 'MySample';
$userName = 'MyUserName';
$passWord = 'MyPassword';

$db = & new Database();
$db->setProperty('database', $databaseName);
$db->setProperty('username', $userName);
$db->setProperty('password', $passWord);

//this is the find
$findCMD = $db->newFindCommand('Web');
$findCMD->AddFindCriterion('Field1',$_POST['Param1']);
$findCMD->AddFindCriterion('Field2',$_POST['Param2']);

//finally execute and return $Results back to the ASPX app
$Results = $findCMD->execute(); 
```

SOAP 可以以 JSON 形式返回结果，还是特别是 XML？我也一直在尝试在为 PHP 5.3 设置 Web 服务时找到一些教程，其中大多数指向 nusoap - 我尝试遵循失败的基本教程。据报道，该库与 5.3 不兼容，并且有一个端口，但这是尝试使用的最佳库还是我应该尝试使用内置的 soap 库，关于它的教程不多？

我的主要目标是从 ASPX 页面提供对我的 PHP 数据库的安全访问，PS 一切都在 HTTPS 中完成。

任何建议都会很好，同时继续搜索以筛选 RESTful 服务，看看它们是否是我应该使用的。

一如既往的感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:38:14.107

1.  确定要支持的协议。SOAP、REST 或其他东西。
2.  确定您的 api 将使用哪种授权方案。我个人更喜欢HMAC。如果数据包在请求中被截获，那么伪造请求就会变得更加困难。

SOAP 主要是 XML。您可以在 SOAP 响应中发送 json 消息，但它可能不会非常有效。休息时，您可以发回您想要的任何格式和/或使用上下文切换以您喜欢的格式发送响应。

# jquery - html中的jQuery动画php回显错误

> ID：14606639
> 
> 赞同：0
> 
> 时间：2013-01-30T14:42:40.410
> 
> 标签：jquery

我正在尝试对主 html 页面中的 php 表单验证中的某个给定错误进行动画处理。我的问题是我不知道如何传递错误以触发 jquery 脚本在浏览器页面的表单顶部滑动消息。

html-contact.php

```
<form method="post" name="contact_form" action="message_handler.php">
<input type="text" class="textbox" name="name" maxlength="12" />
<input type="text" class="textbox" name="last_name" maxlength="12" />
<input type="text" class="textbox" name="email" maxlength="40" />
<input type="text" class="textbox_2" name="title" maxlength="40" />
<textarea name="message" ></textarea>
<input type="submit" value="Send Form">
</form> 
```

php - message_handler.php

```
 $name = $last_name = $visitor_email = $title = $message = $about = $validation = '';
  $name = $_POST['name'];
  $last_name = $_POST['last_name'];
  $visitor_email = $_POST['email'];
  $title = $_POST['title'];
  $message = $_POST['message'];
  $about = $_POST['about'];
  $validation = $_POST['validation'];
  $errors = array();

  if( empty($name) || empty($visitor_email) || empty($message) || empty($validation))
  { 
        echo 'Required fields.';
  } 
```

jquery - general_script.js

```
$('.error_message').animate({'width':300}, {queue:false, duration:200}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:03:48.807

首先，没有必要使用 php 验证表单。您也可以通过 jquery 来完成。在表单提交上使用 jquery，并在那里进行所有验证。

（给提交按钮类 .submit。还将 .error_message div 定位到您希望使用 css 显示错误的位置，并将其隐藏。）

**HTML**

```
<div class='error_message' style='display:none'></div> 
```

**jQuery**

```
$(document).ready(function() {
     $('form').on('click', '.submit', function() {
          var name = $("input[name='name']").val();
          var lname = $("input[name='lastname']").val();
          var email = $("input[name='email']").val();
          var title = $("input[name='title']").val();

          if(name.length == 0 || lname.length == 0 || email.length == 0 || title.length == 0) {
               $('.error_message').html("All fields required.");
               $('.error_message').fadeIn();
          }

          // .. more validation can be done here ..

          return false;
     });
}) 
```

# javascript - Chrome 和 IE 自动对 JSON 对象进行排序，如何禁用它？

> ID：14606640
> 
> 赞同：3
> 
> 时间：2013-01-30T14:42:42.740
> 
> 标签：javascript, json, internet-explorer, google-chrome

我正在使用以下 JSON 使用 JavaScript 创建几个复选框。

```
{"5":"5.5\" x 8.5\"",
"11":"7\" x 10\"",
"4":"8.5\" x 11\"",
"8":"8.5\" x 14\"",
"12":"10\" x 7\"",
"2":"11\" x 8.5\"",
"10":"11\" x 17\"",
"6":"14\" x 8.5\"",
"9":"17\" x 11\""}) 
```

创建这些复选框的 JavaScript 是：

```
for(id in dimensions) {
    $("#the_dimensions").append('<label class="checkbox">' + 
                                '<input type="checkbox" class="dimensions-filter" value="' + id + '">' +
                                dimensions[id] + '</label>');
} 
```

在 Firefox 上，复选框是按照 JSON 对象中的顺序创建的。因此，"5":"5.5\" x 8.5\"" 成为第一个元素，"11":"7\" x 10\"" 成为第二个元素，依此类推。

但是在 Chrome 和 IE 上，JSON 对象会按照键的升序自动排序。因此，"2":"11\" x 8.5\"" 成为第一个元素，"4":"8.5\" x 11\"" 成为第二个元素，依此类推。

如何在 Chrome 和 IE 上禁用自动排序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T08:51:10.500

同样的问题。我的 JSON 对象如下所示：

```
{
  "15" : { "name" : "abc", "desc" : "Lorem Ipsum" },
  "4"  : { "name" : "def", "desc" : "Foo Bar Baz" },
  "24" : { "name" : "ghi", "desc" : "May be" },
  "8"  : { "name" : "jkl", "desc" : "valid" }
} 
```

该对象在服务器（AZ词汇表）上按名称排序，我想呈现一个列表：

```
var data = myObject, i;

console.log(data);

for (i in data) {
    if (data.hasOwnProperty(i)) {
         // do stuff
    }
} 
```

铬日志：

```
Object {4: Object, 8: Object, 15: Object, 24: Object} 
```

我的 for-in 循环导致排序错误。它由浏览器自动排序，但我需要 ID。

**我的解决方案：**
我决定更改带有前缀下划线的键。我的对象现在看起来：

```
{
  "_15" : { "name" : "abc", "desc" : "Lorem Ipsum" },
  "_4"  : { "name" : "def", "desc" : "Foo Bar Baz" },
  "_24" : { "name" : "ghi", "desc" : "May be" },
  "_8"  : { "name" : "jkl", "desc" : "valid" }
} 
```

现在 Chrome 日志：

```
Object {_15: Object, _4: Object, _24: Object, _8: Object} 
```

我的清单是正确的。

# deployment - Jenkins - 服务器重启后自动触发构建

> ID：14606644
> 
> 赞同：2
> 
> 时间：2013-01-30T14:42:51.377
> 
> 标签：deployment, jenkins, restart

是否可以在服务器重启后（例如，当 Jenkins 启动时）触发 Jenkins 运行作业？

我认为这将非常简单，但没有通过简短的谷歌搜索找到答案。

背景是我们的Jenkins在测试通过后会自动部署两个Play应用在同一个服务器上进行测试使用。（对于这两个应用程序，我们都有一个触发部署构建的测试构建）。现在，如果应用程序在服务器重新启动后启动并运行，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:22:42.150

有一个应用程序...错误插件，为此:)

[https://wiki.jenkins-ci.org/display/JENKINS/Startup+Trigger](https://wiki.jenkins-ci.org/display/JENKINS/Startup+Trigger)

# php - 对包含字母的自定义字段进行数字排序

> ID：14606650
> 
> 赞同：0
> 
> 时间：2013-01-30T14:43:11.690
> 
> 标签：php, wordpress

我正在尝试在自定义字段上的 WP_Query 中进行排序。自定义字段包含“E100”、“E500”和“E123b”等字符串。我想对这些值进行数字排序，即对自定义字段进行排序，就好像字符不存在一样。

我的查询如下所示：

```
$subpages = new WP_Query(array(
    "post_type" => "page",
    "meta_key" => "[customFieldNameHere]",
    "orderby" => "meta_value_num",
    "order" => "ASC",
    "posts_per_page" => 5000
)); 
```

但它不起作用。它做了某种排序，但不是数字。是否可以从字段中删除所有字符/字母，然后对剩余值进行数字排序，还是有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:32:54.703

您不能对带有字母的字符串进行排序，就好像它都是数字一样。如果你尝试，你会得到一个字母数字排序——或多或少你会做什么，如果你按字母顺序排列某些东西，但它使数字看起来很奇怪，因为它匹配所有第一个字符，然后是第二个，依此类推，使数字看起来像：

*   1
*   10
*   101
*   2
*   20

我不知道 MySQL 中内置的任何东西可以满足您的需求，也没有`WP_Query`任何此类功能。我最好的解决方案是将您的结果未排序，然后再对它们进行排序。您想提取未排序的内容，这样数据库就不会做额外的工作。

```
$subpages = new WP_Query(array(
    "post_type" => "page",
    "meta_key" => "[customFieldNameHere]",
    "posts_per_page" => 5000
));

$sorted = array();
foreach ($subpages as $s) {
  $kname = preg_replace('/[^0-9]+/','',$s->customFieldNameHere]);
  $sorted[$kname] = $s;
}
// you may need
// ksort($sorted); 
var_dump($sorted); 
```

一个问题是碰撞。如果你最终得到两个匹配`$knames`，你会破坏数据，坦率地说，如果你有很多数据，这似乎很有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:48:33.833

我最终从所有字符串中删除了前导 E。对字符串进行数字排序并不能真正解决最初的问题，但至少现在可以了。

# tridion - 从 Tridion UGC 返回 ItemStats

> ID：14606657
> 
> 赞同：6
> 
> 时间：2013-01-30T14:43:37.827
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, ugc

我想知道是否有人可以对此提供任何指示。我正在尝试从 Tridion UGC Web 服务返回 ItemStats，但在尝试绑定结果时出现以下错误：-

封闭类型 TridionWebUGC.CDS.ItemStat 没有对应的 LastRatedDate 可设置属性。

代码示例是：-

```
WebServiceClient ugcCall2 = new WebServiceClient();
    Uri uri = new Uri("http://new.ugc.service/odata.svc");
    CDS.ContentDeliveryService cds = new CDS.ContentDeliveryService(uri);

var myItemStats = cds.ItemStats.Where(p => p.PublicationId == 68 && p.Id == 17792 && p.Type==16); 
```

我可以毫无问题地获得评论和评分。例如

```
 var myComments = cds.Comments.Where(p => p.ItemId == 17805).OrderBy(p => p.CreationDate); 
```

只是 ItemStats 给了我一个问题。有人有什么想法吗？

谢谢

约翰

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T15:14:15.103

不幸的是，UGC WebService 的元数据在 ItemsStats 方面是不正确的。对您而言，这意味着 Web 服务元数据不会公开 ItemStat 实体包含该`LastRatedDate`属性的事实。这会使您的 .NET 代理不知道此属性并使您的查询失败。要解决此缺陷，您有两种选择：

1.  将以下属性添加到您的服务中：`cds.IgnoreMissingProperties = true`;。这种方法的优点是您可以在 2 秒内完成它。缺点是您将无法访问该属性（如果您实际使用它）；
2.  修改 Visual Studio 生成的代理并将该属性手动添加到 ItemStat 类。这种方法的优点是您将能够从您的项目中访问该属性。缺点是从编码的角度来看完全无法管理，升级或重新生成代理时需要小心，手动添加属性很容易出错。

注意 1：要从浏览器访问 webServer 的元数据，您可以转到`/odata.svc/$metadata`.

注意 2：仔细观察，webService 元数据中缺少 2 个属性：`LastRatedDate`和`LastCommentedDate`.

希望这可以帮助。

# php - Zend Framework 2 中的闭包

> ID：14606659
> 
> 赞同：1
> 
> 时间：2013-01-30T14:43:44.637
> 
> 标签：php, closures, zend-framework2

当我阅读 ZF2 中的 Zend\MVC\Service\ServiceManagerConfig.php 时。我有问题。这是代码：

```
$serviceManager->addInitializer(function ($instance) use ($serviceManager) {
        if ($instance instanceof EventManagerAwareInterface
            && !$instance->getEventManager() instanceof EventManagerInterface
        ) {
            $instance->setEventManager($serviceManager->get('EventManager'));
        }
    }); 
```

我知道“addInitializer”方法中有一个闭包。但让我感到困惑的是参数“$instance”。这是一个参数，但真正的价值来自哪里？$instance 的 var_dump() 发现它是一个对象，即 "Zend\ModuleManager\Listener\ServiceListener" ；它从哪里来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:33:58.370

当您这样做时，`$sm->get('something');`将使用定义的工厂创建对象，然后将其传递给初始化程序。`$instance`参数就是那个对象。

[你可以在这里](https://github.com/zendframework/zf2/blob/master/library/Zend/ServiceManager/ServiceManager.php#L518)看到

# mysql - 通过 ssh 隧道连接到 MySQL 到 localhost

> ID：14606660
> 
> 赞同：13
> 
> 时间：2013-01-30T14:43:48.353
> 
> 标签：mysql, ssh, localhost, tunnel

我想通过具有“localhost”访问权限的用户通过 ssh 隧道连接到远程 MySQL。

我用它来制作隧道：

```
ssh -f -N -L 33306:localhost:3306 user@remote-host 
```

这要连接到主机：

```
mysql -h 127.0.0.1 -P 33306 -uuser -ppassword 
```

我得到的错误是：

```
ERROR 1045 (28000): Access denied for user 'user'@'remote-host' (using password: YES) 
```

问题是用户'user'@'remote-host'（或'user'@'%'）不存在，只有'user'@'localhost'存在。

有没有办法强制远程主机，**而无需服务器端修改**认为我来自本地主机？这就是我无论如何都会通过 ssh 隧道进行连接的唯一原因。

* * *

*笔记：*

如果我想用这个命令连接：

```
mysql -h localhost -P 33306 -uuser -ppassword 
```

我收到此错误：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) 
```

* * *

**附加数据：**

在 /etc/hosts 中的远程服务器上，值如下所示：

```
127.0.0.1       localhost
remote-ip       remote-host 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-03-02T11:42:30.323

创建 MySQL Tunnel 到 REMOTE HOST 的简单方法：

```
$ ssh -fNL TEMP_PORT:localhost:MYSQL_SERVER_PORT USER@SERVER_NAME 
```

测试：

```
$ mysql -u root -p -h 127.0.0.1 -P TEMP_PORT 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-30T07:00:22.587

请注意`localhost`和`127.0.0.1`在 mysql on unix 中的处理方式不同。报价：

> 在 Unix 上，MySQL 程序对主机名 localhost 进行了特殊处理，与其他基于网络的程序相比，这种方式可能与您所期望的不同。对于到 localhost 的连接，MySQL 程序尝试使用 Unix 套接字文件 [http://dev.mysql.com/doc/refman/5.7/en/connecting.html](http://dev.mysql.com/doc/refman/5.7/en/connecting.html)连接到本地服务器：

此外，即使您在命令行上显式指定 -P，mysql 客户端也会默默地尝试使用套接字文件：

> 即使给出 --port 或 -P 选项来指定端口号，也会发生这种情况。要确保客户端与本地服务器建立 TCP/IP 连接，请使用 --host 或 -h 指定主机名值 127.0.0.1

实际上，使用此命令 `mysql -h localhost -P 33306 -uuser -ppassword` 您只是尝试连接到缺少的本地 mysqld

考虑到这一点，您的问题归结为通过域套接字连接到可用的远程服务器。

如果安装附加软件满足您的要求“**无需服务器端修改**”，您可以`socat`按照此处所述使用： [https](https://www.debian-administration.org/users/dkg/weblog/68) ://www.debian-administration.org/users/dkg/weblog/68 。

为 mysql 量身定做，它可以如下工作：

1.  `socat`两端安装
2.  `socat "UNIX-LISTEN:your_local_path/mysql.sock,reuseaddr,fork" EXEC:'ssh user@remote-host socat STDIO UNIX-CONNECT\:/your_server_path/mysql.sock"`
3.  `mysql -S your_local_path/mysql.sock -u user`

# tfs - 在 TFS 2010 中，如何在签入时搜索输入到注释中的值？

> ID：14606661
> 
> 赞同：1
> 
> 时间：2013-01-30T14:43:53.297
> 
> 标签：tfs, history, changeset

我们有一个签到记录的团队项目集合源代码控制设置，要求每次签到都捕获一个“跟踪号”。此数字在 TFS 外部。我需要搜索具有特定跟踪编号的所有变更集。

生成的变更集列表告诉我要获得最新版本，每月部署。

我们不使用工作项。

问题 1) 笔记存储在 tfs_default_collection 的什么位置？一种易于查看的方法是使用 .SQL 进行查询。我在任何数据库模式中都没有看到“Note”。

问题 2) 如果我无法使用 .SQL 进行搜索，Microsoft.TeamFoundation.VersionControl.Client.dll 中的哪些对象引用会给我签入说明的详细信息？

* * *

如果我知道变更集编号是什么，那么我可以做这样的事情来给我列表。

-- 这些是在 '2013-01-28' 在 $Release 中检查的所有 .slq 对象

```
SELECT 
    chg_set.CreationDate,
    chg_set.ChangeSetId, 
    v.FullPath
FROM dbo.tbl_ChangeSet (nolock)AS chg_set 
    INNER JOIN dbo.tbl_Version (nolock)AS v ON chg_set.ChangeSetId = v.VersionFrom 
    LEFT OUTER JOIN dbo.tbl_File (nolock) AS f ON v.FileId = f.FileId
WHERE chg_set.CreationDate >= '2013-01-31'
and FullPath like '%Tracker\Releases\2013.02.31%'
and FullPath like '%.sql%'
ORDER BY chg_set.CreationDate, v.FullPath 
```

在深入研究 TFS_DefaultCollection 之后，我找到了它。

我可以将这些结果与上面的查询结合起来，看看我在寻找什么。

```
SELECT ReleaseNoteId, FieldName, BaseValue
from Tfs_DefaultCollection.dbo.tbl_ReleaseNoteDetails
  where ReleaseNoteId in (SELECT ReleaseNoteId
FROM Tfs_DefaultCollection.dbo.tbl_ReleaseNote
  where DateCreated between '2013-01-18' and '2013-02-22')
    and FieldName = 'Tracker #'
    and BaseValue <> '0'  -- base value of zero is a merge from $Main 
```

先感谢您。

# python - 在python中，为什么我不能以简单的方式继承pandas.Series？

> ID：14606663
> 
> 赞同：1
> 
> 时间：2013-01-30T14:44:12.533
> 
> 标签：python, inheritance, pandas, series

我想创建一个继承自 pandas.Series 的新类。我通常在 python 中创建子类没有任何问题，但在这种情况下我遇到了问题。

这是一个简单的继承方案：

```
class Test(object):
    def __new__(cls, *args, **kwargs):
        print "new Test"
        return object.__new__(cls, *args, **kwargs)
    def __init__(self):
        print "init Test"

class A(Test):
    def __new__(cls, *args, **kwargs):
        print "new A"
        return Test.__new__(cls, *args, **kwargs)
    def __init__(self):
        print "init A"

print "creating an instance of A"
a = A()
print "type: ", type(a) 
```

输出：

```
creating an instance of A
new A
new Test
init A
type:  <class '__main__.A'> 
```

现在让我们尝试一个系列：

```
import pandas as pd
class subSeries(pd.Series):
    def __new__(cls, *args, **kwargs):
        print "new subSeries"
        return pd.Series.__new__(cls, *args, **kwargs)

    def __init__(self):
        print "init subSeries"
print "creating an instance of subSeries"
s = subSeries()
print "type: ", type(s) 
```

我们得到：

```
creating an instance of subSeries
new subSeries
type:  <class 'pandas.core.series.Series'> 
```

为什么是`s`系列而不是子系列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T21:56:17.070

在 pandas github 网站上有一个关于此主题的问题：

[https://github.com/pydata/pandas/issues/60](https://github.com/pydata/pandas/issues/60)

我自己在为光谱库数据格式（按波长索引）对 Series 进行子类化时遇到了这个问题。这很粗糙，有很多猴子修补和编写方法，它们显式地调用了 Series 方法，但只是在返回之前将其替换为我的 Spectrum 类。我必须在**new**和**init**中定义一些逻辑。

它显然与 Cython 和 Python 以及 numpy C API 的混合以及 _constructor() 方法的不一致使用有关。不过，我最近没有检查它。我知道从 ndarray 到另一个中间类 NDFrame 发生了变化，作为 Dataframe 和 Series 父类（或者它可能仍在进行中）。

# php - 使用 MySQLi 和 PHP 检索过程结果

> ID：14606665
> 
> 赞同：0
> 
> 时间：2013-01-30T14:44:17.320
> 
> 标签：php, mysql, mysqli

我使用以下代码从 php 中的 sql 检索数据

```
if ($q=$db->prepare("call p_test(?)")){
    $q->bind_param('s',$token);
    $q->execute();

    $q->bind_result($r1, $r2, $r3);

    if ($q->fetch()){
        echo $r1.
    }
} 
```

上面的代码在不调用过程时工作正常。但是当我用来调用一个程序时，我遇到了一个奇怪的结果集问题。当程序只返回一列时，$r1 将被填写。但是当我在结果中有多个列时，提取完成但没有给出结果。在这两个测试中，结果和 bind_result 列的数量是相同的。

我无法理解这种行为的原因。我尝试从程序中获得预期结果的方式有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:47:10.057

您的过程可能返回多个结果集。您可能需要使用类似`next_result`的东西（至少在 mysqli 中是这样的）。

# prolog - 为序言表达式设置一些顺序

> ID：14606666
> 
> 赞同：2
> 
> 时间：2013-01-30T14:44:20.270
> 
> 标签：prolog, prolog-dif

我的 Prolog 程序中有一条规则，`blanket(X,Y)`它检查 X 是否在某种 Y 集合中，其中包括：

*   Y的父母
*   Y的孩子们
*   Y的共同父母

我将其定义如下：

```
blanket(Y,X) :- different(Y,X),parent(Y,X);child(Y,X);coparent(Y,X). 
```

但是，这并不像我预期的那样工作。它正确地识别了 X 的父母、孩子和共同父母（如果有的话），但它将自己列为父母和共同父母，这是我不想要的。是否可以设置某种顺序，以便`different(Y,X)`首先独立评估？当然，我尝试了类似 :`different(Y,X),(parent(Y,X);child(Y,X);coparent(Y,X)).`的方法，但这会产生语法错误，因为我仍然对这种语言非常不熟悉。

任何建议将不胜感激。

编辑：这里是`child`,`different`和`coparent`关系：

```
child(X,Y) :- parent(Y,X).

different(X,Y) :- not(X == Y).

coparent(Y,X) :- parent(Y,Z),parent(X,Z). 
```

为了完整性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:54:26.370

```
blanket(Y,X) :- different(Y,X), parent(Y,X).
blanket(Y,X) :- different(Y,X), child(Y,X).
blanket(Y,X) :- different(Y,X), coparent(Y,X). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-24T17:46:28.303

问题是您对共同父母的定义。它是允许将自身作为有效结果返回的语句。

我建议您重新定义它，例如：

```
coparent(Y,X) :- parent(Y,Z),parent(X,Z), X \= Y. 
```

这样，您可以简单地：

```
blanket(Y,X) :-parent(Y,X);child(Y,X);coparent(Y,X). 
```

当然，您可以保留“coparent”的定义，仅将毯子修改为：

```
blanket(Y,X) :-parent(Y,X);child(Y,X);(coparent(Y,X), X\=Y). 
```

# c++ - 将字节数组转换为位图图像

> ID：14606667
> 
> 赞同：1
> 
> 时间：2013-01-30T14:44:21.457
> 
> 标签：c++, bytearray, bitmapimage, data-conversion

我有一个名为`pBuffe`type的字节数组`unsigned char* pBuffer`，它在捕获图片后由高功率相机提供一个“图像”（一堆字节）。如何将此字节数组转换为可查看的位图图像文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:58:46.383

我认为您可以使用著名且流行的[EasyBMP](http://easybmp.sourceforge.net/)库轻松解决此问题。它创建正确的文件头和你需要的一切。作为奖励，它支持多个平台。

# php - TinyMCE，在列表框中的元素上添加 css 样式（工具栏）

> ID：14606672
> 
> 赞同：1
> 
> 时间：2013-01-30T14:44:32.850
> 
> 标签：php, javascript, tinymce

我正在创建一个新插件，工具栏上的一个列表框。

此列表框允许您更改所选文本的大小。

这是我在编辑器工具栏上添加列表框的代码：

```
tinymce.create('tinymce.plugins.ListBoxPlugin', {
    createControl: function(n, cm) {
        switch (n) {
            case 'listeStyle':
                var mlb = cm.createListBox('listeStyle', {
                    title : 'Styles',
                    onselect : function(v) {                        
                        tinyMCE.execCommand('mceReplaceContent',false,'<span class='+v+'>{$selection}</span>');
                     }
                });

               <?php               
               foreach($matches[1] as $m){
                    echo "mlb.add('".$m."', '".$m."');";
               }
               ?>               
                return mlb;
        }
        return null;
    }
});
tinymce.PluginManager.add('listBox', tinymce.plugins.ListBoxPlugin); 
```

所以，为了在我的列表框中添加元素，它是这一行：

```
echo mlb.add('".$m."', '".$m."'); 
```

例如，与`mlb.add('medium', '15');`ii 在我的列表框中有一个名为“medium”的元素，当我单击时，我检索值“15”。

那么，我怎么能使用 tinymce 在这个列表框中使用 css 显示元素呢？例如，对于这个元素，我需要以“15”的大小显示他。

我需要的 ：![在此处输入图像描述](../Images/00d30adc81e66bb001610e55cbb63655.png)

我有的 ：![在此处输入图像描述](../Images/a572e36b63d0fcb9059792f6e445631e.png)

你明白吗 ？谢谢 ：）

编辑：我动态创建这个列表框

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:26:21.087

嗯，这是一项艰巨的任务。最简单的方法似乎是在 tinymce 事件 init 上应用自定义样式。然后浏览器就准备好了。

**更新**：这应该给你一些东西来构建你的列表框。您将需要调整`sizes`并`description`（动态地）满足您的需求：

```
if (mlb) {
    var i =0 ;
    var sizes = [{ fontSize:"5"},{ fontSize:"10"},{ fontSize:"20"}];
    var description = ['Text1','Text2','Text3'];
    each(sizes, function(v, k) {
       var size = v.fontSize;

       if (size >= 1 && size <= 7)
           size = t.sizes[parseInt(size) - 1] + 'pt';

       c.add(y[i], v, {'style' : 'font-size:' + size});
       i++;
    });
}
return mlb; 
```

# c# - 页面加载超时 - 使用 C# 的 Selenium Webdriver

> ID：14606675
> 
> 赞同：1
> 
> 时间：2013-01-30T14:44:46.577
> 
> 标签：c#, selenium, selenium-webdriver, settimeout, page-load-time

我正在使用 Selenium 2.25 WebDriver

我在查找页面上的元素时遇到问题，有时我的测试用例能够找到元素，有时页面未加载，这是由于页面加载所致，如果我在下面添加此行，它似乎可以正常工作：

```
 driver.Manage().Timeouts().SetPageLoadTimeout(TimeSpan.FromSeconds(2)); 
```

我的问题是，我不想让我的代码分散在上面的代码行中，有没有办法让它集中在一个地方？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:53:11.937

如果您设置一次超时，它会设置为驱动程序实例的生命周期。你不需要一直重置它。您可以在创建驱动程序后立即进行设置。

```
IWebDriver driver = new FirefoxDriver();
driver.Manage().Timeouts.SetPageLoadTimeout(TimeSpan.FromSeconds(2)); 
```

使用此超时的唯一警告是，并非每个浏览器都可以完全支持它（IE 确实支持，我认为 Firefox 也支持，但我认为 Chrome 不支持）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:25:15.087

您可以尝试这样的解决方法：

观察页面中最后加载的元素并找到它的 id（或任何其他标识符）。然后做这样的事情：

```
 while (true)
        {
            try
            {   
                IWebElement element = driver.FindElement(By.Id(...));
                if (element.Displayed)
                {
                    break;
                }
            }
            catch (Exception)
            {
                continue;
            }
        } 
```

这将继续循环，直到显示最后加载的元素并随后中断。捕获元素未找到异常并继续循环，直到元素不显示。

# c++ - 排序算法中的递归 - 总是不好？

> ID：14606676
> 
> 赞同：7
> 
> 时间：2013-01-30T14:44:48.117
> 
> 标签：c++, algorithm, recursion, mergesort

合并排序、快速排序可能是最知名的 nlogn 排序算法。他们的解释和 c++ 代码示例在大多数情况下都包含递归。但据我了解，当数据量很大时，我们将面临堆栈溢出的巨大风险。那么忽略关于排序算法的递归解释是否合理，因为它不能在现实生活中使用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T14:51:19.677

> 但据我了解，当数据量很大时，我们将面临堆栈溢出的巨大风险。

这取决于几件事：

*   [*如今，尾调用*](http://en.wikipedia.org/wiki/Tail_call)几乎总是被优化，因此即使您递归`O(2^N)`时间，您也永远不会在尾递归中遇到堆栈溢出（算法仍然很慢，但不会溢出堆栈）。
*   大多数排序算法都会递归停机`Log2(N)`时间。每 TB 数据排序最多 40 个级别 - 不足以溢出能够在其内存中保存 TB 数据的任何东西的堆栈。

> 忽略无法在现实生活中使用的排序算法的递归解释是否合理？

不，忽略这些解释是不合理的：如果算法在逻辑上是递归的，那么最好的解释也是递归的。即使您使用使用动态分配的堆栈来避免堆栈溢出的循环来实现该算法，该算法的性质仍将保持递归，因此了解正在发生的事情的最佳方法是假装进行了递归调用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T14:47:20.260

使用`O(n log n)`排序算法，递归算法引起的调用栈高度通常为`O(log n)`（假设每次递归迭代问题大小划分相对均衡）

异常发生在最坏情况下的快速排序场景中，当数组已经排序时，总是使用最后一个元素作为枢轴的简单实现，在这种情况下，您将有一个`O(n^2)`运行时间并导致调用堆栈高度为`O(n)`.

（如果它可以帮助您可视化：这有点类似于 DFS 使用比 BFS 更少空间的原理——前者一次只跟踪调用堆栈中的一个“搜索路径”，而后者跟踪所有这些)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T14:47:59.747

在`O(n logn)`算法中，我们通常关注`log2(n)`递归级别。

举一个具体的例子，`log2(1,000,000,000) = 30`因此几乎没有堆栈溢出的主要风险。

如果允许递归深度增长为`O(n)`. 可扩展的算法需要确保不会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T05:32:16.737

正如其他人指出的那样，堆栈的深度等于最深的递归级别，通常是 order log(n)。

递归的“问题”通常是进行方法调用和传递参数所涉及的开销。例如考虑阶乘方法

int factorial(int k) {if (k==1) return 1 else return k*factorial(k-1);}

如果你用 n=21 调用它，那么你会做 20 次乘法，但你也有设置和从 20 次方法调用返回的开销 - 更多的工作。如果您确实想使用递归算法，您可以设置一个私有堆栈并使用 while 循环来实现该算法，而无需大量（相对昂贵的）方法调用。当然，改进（如果有的话）将是特定于语言的。

# python - 在 HTML 页面中可视化可点击的图表

> ID：14606677
> 
> 赞同：7
> 
> 时间：2013-01-30T14:44:53.170
> 
> 标签：python, html, graph

我已经使用[pygraph](http://code.google.com/p/python-graph/)定义了一个数据结构。我可以`PNG`使用`graphviz`.

![节点图](../Images/34fe24eaf31a17ab6551c179e1dbaf12.png)

我想以图形方式显示数据，但使图中的每个节点都可点击。每个节点必须链接到不同的网页。我将如何处理这个？

我想要的是：

1.  `href`为每个节点分配一个
2.  将所有图形显示为图像
3.  使图像中的每个节点都可点击
4.  事件工具提示`hover`：每当光标位于边缘/节点的顶部时，应显示工具提示

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T15:20:08.367

我相信 graphviz 已经可以将图像输出为地图以在 html 中使用。

查看[此文档](http://www.graphviz.org/doc/info/output.html#d%3acmapx)或[此](http://www.graphviz.org/doc/info/output.html#d%3aimap)文档以了解如何告诉 graphviz 输出要使用的坐标图。它甚至会附加您指定的 url，甚至还有一个[版本](http://www.graphviz.org/doc/info/output.html#d%3aimap_np)只使用矩形来映射链接

编辑：

您还可以查看LanyeThomas 的[这份文档，其中概述了基本步骤：](http://c2.com/cgi/wiki?GraphVizForInteractiveDevelopmentDiagrams)

> 使用所需的链接信息创建一个 GraphViz 点文件，可能使用脚本。
> 
> 运行一次 GraphViz 以生成图形的图像。
> 
> 再次运行 GraphViz 以生成图形的 html 图像映射。
> 
> 创建一个 index.html（或 wiki 页面），带有图形的 IMG 标记，后跟图像地图的 html。
> 
> 将图像映射 url 指向带有每个节点名称的 Wiki 页面 - 如果需要，自动生成 Wiki 页面。
> 
> 或者，直接链接到 DoxyGen 生成的类层次结构图像。将 Wiki 页面链接到任何其他文档，包括 DoxyGen 文档、图像等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-16T09:19:11.330

您可以使用[pygraphviz](http://pygraphviz.github.io/)和 cmapx

```
import pygraphviz
my_graph = pygraphviz.AGraph(id="my_graph", name="my_graph")
my_graph.add_node("node", 
                  label="my_node",
                  tooltip="tooltip text \r next line",  # use \r for new line
                  URL="http://ya.ru/",
                  target="_blank")
my_graph.layout(prog='dot')
my_graph.draw(path="my_graph.map", format="cmapx")  
my_graph.draw(path="my_graph.svg", format="svg") 
```

然后在 html 中使用 my_graph.map 的内容

```
<IMG SRC="my_graph.svg" USEMAP="#my_graph" />
... [content of my_graph.map] ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:55:42.803

您可以使用点击地图：

```
 <img src="graph.png" width="400" height="300" usemap="#mygraphmap">

<map name="mygraphmap">
  <area shape="circle" coords="100,100,30" href="f8a08.htm">
  <area shape="circle" coords="200,100,30" href="1d0f.htm">
</map> 
```

您显然必须以某种方式找出坐标。

*编辑：* 您也可以使用矩形或多边形作为形状属性。我认为您还可以向区域元素添加鼠标悬停或标题属性。

*更多编辑：* 或者您可以制作可以集成到 html5 DOM 中的 graphviz 输出 svg。我的意思是您可能能够将图表中的元素作为 DOM 对象来处理。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-16T19:08:52.423

如果您正在寻找一个 graphviz 替代品，也许您可​​以使用[jsPlumb Library](https://github.com/sporritt/jsPlumb)。在此处查看一些[示例](https://jsplumbtoolkit.com/community/demo/flowchart/index.html)

还[可以查看 JavaScript InfoVis Toolkit](http://philogb.github.com/jit/demos.html)

# python - 使用 Python 合并具有类似于列表的结构的自定义对象

> ID：14606679
> 
> 赞同：1
> 
> 时间：2013-01-30T14:45:00.240
> 
> 标签：python, merge, linked-list

我正在尝试为我的研究论文实现某种算法（编程不是我的主要研究领域），我需要一些帮助。考虑以下类型的数据结构（例如 a 和 b），其中我们有一条线性时间线，并且对象放置在该时间轴上，彼此相距一定距离（实际上这些对象表示数据包，其宽度等于传输数据包所需的时间）。我想将它们对齐在右侧，使其成为我们的参考点（时间 t=0），然后合并这两个列表（a 和 b），如果我可以称它们为列表，并得到一个结果列表，如 c 所示。重叠的对象被移动以形成单个列表，并且这些对象之间的间隙相应地发生变化。知道我应该如何进行吗？链表？（如果它们存在于 python 中）。可以将两个以上的列表合并到一个列表中。提前致谢

```
 ____          _____            ____
    __| a3 |________| a2  |__________| a1 |  (a)

       ____             _____         ____
    __| b3 |___________| b2  |_______| b1 |  (b)

            ____  ____     ______  _____   ____  ____
    _______| a3 || b3 |___| a2   || b2  |_| a1 || b1 |  (c) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T16:49:27.410

例如，数据项的 dict 和数据序列的列表：

数据1：

**[{'start':0, 't': 10, 'dtype': 'a'}, {'start': 30, 't':20, 'dtype': 'a'}, {'start': 50，'t'：30，'dtype'：'a'}]**

数据2：

**[{'start':15, 't': 10, 'dtype': 'b'}, {'start': 40, 't':20, 'dtype': 'b'}, {'start': 50，'t'：30，'dtype'：'b'}]**

和合并列表（按开始时间排序）：

```
sorted(data1+data2, key=lambda x:x['start']) 
```

结果：

**[{'start': 0, 't': 10, 'dtype': 'a'}, {'start': 15, 't': 10, 'dtype': 'b'}, {'start': 30, 't': 20, 'dtype': 'a'}, {'start': 40, 't': 20, 'dtype': 'b'}, {'start': 50, 't': 30, 'dtype': 'a'}, {'start': 50, 't': 30, 'dtype': 'b'}]**

对于延期交货，在 sorted 函数中使用参数“reverse=True”。要查找重叠元素，您只需在列表迭代期间检查**item['start'] + item['t'] > nextitem['start']** ===> items 重叠，并且您必须根据您的算法调整 nextitem 开始位置。

# jquery - 由于内部元素的值，我如何订购商品？

> ID：14606680
> 
> 赞同：1
> 
> 时间：2013-01-30T14:45:08.793
> 
> 标签：jquery, sorting

我有这个代码：

```
<div id="main-container">
    <div class="comunicato-item">
        <div class="item item-1">Marco</div>
        <div class="item item-2">3</div>
        <div class="item item-2">2012</div>
    </div>

    <div class="comunicato-item">
        <div class="item item-1">Andrea</div>
        <div class="item item-2">2</div>
        <div class="item item-2">2013</div>
    </div>  

    <div class="comunicato-item">
        <div class="item item-1">Paul</div>
        <div class="item item-2">9</div>
        <div class="item item-2">2003</div>
    </div>  
</div> 
```

`comunicato-item`由于（例如）`.item.item-2`元素值，我想订购物品。所以结果应该是，排序后：

```
<div id="main-container">
    <div class="comunicato-item row">
        <div class="item item-1">Andrea</div>
        <div class="item item-2">2</div>
        <div class="item item-2">2013</div>
    </div>  

    <div class="comunicato-item row">
        <div class="item item-1">Marco</div>
        <div class="item item-2">3</div>
        <div class="item item-2">2012</div>
    </div>

    <div class="comunicato-item row">
        <div class="item item-1">Paul</div>
        <div class="item item-2">9</div>
        <div class="item item-2">2003</div>
    </div>  
</div> 
```

用jquery可以吗？尝试过这样的事情：

```
var a = [];
$(".comunicato-item .item.item-2").each(function(i,e){
    a.push(e);
});
$.each(a.sort(),function(i,e){
    $("#"+e).appendTo('#main-container');
}); 
```

但它失败了！任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:56:18.267

你很接近，但排序方法需要一个函数来评估这个实例中的数组......

```
var a = [];

$(".comunicato-item").each(function() {
    a.push(this);
});

a.sort(function(x, y) {
    var xval = parseInt($(".item-2:first", x).text(), 10);
    var yval = parseInt($(".item-2:first", y).text(), 10);
    if (xval > yval) return 1;
    else if (xval < yval) return -1;
    else return 0;
});

$.each(a, function() {
    $(this).appendTo('#main-container');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:00:45.010

您可以使用[.sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)函数对集合进行排序。由于 jQuery 已经将元素存储在数组中，因此无需循环并将其推送到数组中。也不需要循环和附加元素

```
var x = $('#main-container > .comunicato-item').sort(function(a,b){
    var f = +$(a).find('.item-2:first').text();
    var s = +$(b).find('.item-2:first').text();
    return f-s; // no need for if/else because these are numbers
});
$('#main-container').html(x);
// or $('#main-container').append(x);
// or x.appendTo('#main-container'); 
```

[http://jsfiddle.net/SuCyz/](http://jsfiddle.net/SuCyz/)

**编辑**

如果按单词排序，则必须使用 if/else

```
var x = $('#comunicato-items > .comunicato-item').sort(function(a,b){
    var f = $(a).find('.item-2:first').text();
    var s = $(b).find('.item-2:first').text();
    return f > s ? 1 : f < s ? -1 : 0;   
});
$('#comunicato-items').html(x); 
```

在哪里

```
f > s ? 1 : f < s ? -1 : 0; 
```

等于

```
if(f > s){
   return 1;
}else if(f < s){
   return -1;
}else{
   return 0;
} 
```

[http://jsfiddle.net/u5Nxw/](http://jsfiddle.net/u5Nxw/)

# ios - 仅在选择时出现的选择器轮

> ID：14606681
> 
> 赞同：0
> 
> 时间：2013-01-30T14:45:14.730
> 
> 标签：ios, objective-c, uipickerview

我有一个视图控制器，它显示各种`UITextfield`s 来编辑信息。一方面`UITextfield`，我需要一个选择轮来选择预定义的状态。

问题是我没有足够的空间来集成选择轮，是否有可能仅在选择文本框时才出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:00:27.660

您可以将 设置`UIPickerView`为`UITextField`'s `inputView`。

这将确保选择器在文本字段获得焦点时自动显示，并在丢失时隐藏它。

例如

```
myTextField.inputView = self.myPickerView; 
```

请参阅有关此属性的[文档。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/doc/uid/TP40006888-CH3-SW53)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:59:28.197

你需要调用你的 UIPicker`(BOOL)textFieldShouldBeginEditing:`

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField{

    if (textField==self.yourtextfield) {
         //call your wheel in here 
    }
} 
```

查看 [如何在选择 UITextField 时显示 UIPickerView](https://stackoverflow.com/questions/7077258/how-to-show-uipickerview-when-selecting-uitextfield)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T14:53:15.927

假设您的“选择器轮”是一个 UIView，只需将您的控制器连接为 UITextField 的委托并实现以下内容：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
   self.pickerWheel.hidden = NO;
} 
```

# qt4 - QThread 和声子

> ID：14606682
> 
> 赞同：0
> 
> 时间：2013-01-30T14:45:19.510
> 
> 标签：qt4, qthread, phonon

我正在使用 Qt Creator（基于 32 位 QT 4.8.0）编写 C++ GUI 应用程序。我的目标是创建一个随机播放自然声音的应用程序，每种声音都有不同的属性。我正在尝试使用 Phonon 库来播放这些声音。

我有一个名为 ZooKeeper 的类，它继承自公共 QThread。这个类有一个循环的主要运行函数：

```
while(true)
{
   ManageCritters();
   QThread::msleep(10);
} 
```

在`ManageCritters();`函数内部，我在给定时间根据特定动物的特定文件名播放声音文件。这是我执行它的方式：

```
// create our media objects and an audio-output
Phonon::MediaObject *mediaObject = new Phonon::MediaObject(this);
Phonon::AudioOutput *autioOut = new Phonon::AudioOutput(Phonon::MusicCategory, this);

// link the two together
Phonon::createPath(mediaObject, audioOut);

// set our audio source to the filename we want to play
mediaObject->setCurrentSource(filename);

// play the audio file
mediaObject->play(); 
```

这一切都编译得很好 - 但是我得到一个运行时错误：

```
QObject: Cannot create children for a parent that is in a different thread.
(Parent is QThread(0x82c7e48), parent's thread is QThread(0x8166ee8), current thread is QThread(0x82c7e48)
WARNING: Phonon needs QCoreApplication::applicationName to be set to export audio output names through the DBUS interface 
KGlobal::locale() must be called from the main thread before using i18n() in threads. KApplication takes care of this. If not using KApplication, call KGlobal::locale() during initialization.
The program has unexpectedly finished. 
```

似乎我无法理解如何在 QThreads 中设置音频播放，但我没有看到错误发生在哪里，也没有看到如何修复它。

我应该有不同的设置来处理音频播放吗？这都是面向对象的。我确实有另一个类`Critter()`，它代表一个单独的生物（虫子、鸟等）。理想情况下，我想让每个“小动物”处理自己的音频播放（让音频播放`Critter()`类的功能）。但我不确定如何让这个`Critter()`类链接到 Phonon 库并播放音频文件。

有什么建议或示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:55:18.973

把这个

```
QCoreApplication::setApplicationName( "phonon" ); 
```

在你创建媒体对象之前的上面的代码

# android - 我是否需要两个活动才能在两部手机之间发送消息？

> ID：14606684
> 
> 赞同：0
> 
> 时间：2013-01-30T14:45:24.037
> 
> 标签：android

我的任务是实现一个在两部手机之间发送字符串的应用程序。客户端在提示用户输入服务器的Ip后打开与服务器的连接。为此，我使用了一个 EditText 字段和一个按钮。建立连接后，我希望显示一个新的 EditText 字段和一个按钮，并且用户能够输入字符串并单击按钮将这些字符串发送到服务器。服务器将在屏幕上显示消息。我应该为每个 EdiText&button 创建不同的活动吗？那将是2个活动。在这种情况下，我如何传递第一个活动将打开的套接字以建立与第二个活动的连接？是否可以仅在一项活动中做到这一点？考虑到每个活动都有 1 个关联的布局，我发现很难实现，

谢谢

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_client);

    serverIp = (EditText) findViewById(R.id.server_ip);
    connectPhones = (Button) findViewById(R.id.connect_phones);
    connectPhones.setOnClickListener(connectListener);

}

private OnClickListener connectListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        if (!connected) {
            serverIpAddress = serverIp.getText().toString();
            if (!serverIpAddress.equals("")) {
                Thread cThread = new Thread(new ClientThread());
                cThread.start();
            }
        }
    }
};

public class ClientThread implements Runnable {

    public void run() {
        try {
            Log.d("ClientActivity", serverIpAddress);
            InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
            Log.d("ClientActivity", "C: Connecting...");
            Socket socket = new Socket(serverAddr, ServerActivity.SERVERPORT);
            connected = true;
            while (connected) {
                try {
                    Log.d("ClientActivity", "C: Sending command.");
                    PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                                .getOutputStream())), true);
                        // where you issue the commands
                        out.println("message");
                        Log.d("ClientActivity", "C: Sent.");
                } catch (Exception e) {
                    Log.e("ClientActivity", "S: Error", e);
                }
            }
            socket.close();
            Log.d("ClientActivity", "C: Closed.");
        } catch (Exception e) {
            Log.e("ClientActivity", "C: Error", e);
            connected = false;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:47:50.533

您知道套接字是双向连接，因此您不需要为读取和写入执行两个活动，但我不确定的是：我不知道您的应用程序是否能够显示传入的消息，因为您不允许这样做在主线程上联网，使用另一个线程可能不会影响 UI

# c# - 自定义控件序列化

> ID：14606685
> 
> 赞同：2
> 
> 时间：2013-01-30T14:45:30.867
> 
> 标签：c#, serialization, dictionary

我在 C# 中序列化和反序列化某些对象时遇到了一些问题。

我有一个自定义控件，其中包含一些要保存的属性，定义如下

```
[Serializable()]
public partial class customUC: UserControl, ISerializable
{
    (...)some methods here

    public customUC(SerializationInfo info, StreamingContext ctxt)
    {
        this.att = (int)info.GetValue("att", typeof(int));
    }

    public void GetObjectData(SerializationInfo info, StreamingContext ctxt)
    {
        info.AddValue("att", this.att);
    }
} 
```

在另一个类中，我有一个字典，我正在序列化如下：

```
[Serializable()]
public partial class data: ISerializable 
{
    public Dictionary<int, customUC> states  { get; private set;}

    (...)some methods here

    public IVRDataModel(SerializationInfo info, StreamingContext ctxt)
    {
        **this.states = (Dictionary<int,customUC>)info.GetValue("states",typeof(Dictionary<int,customUC>));**
    }

    public void GetObjectData(SerializationInfo info, StreamingContext ctxt)
        {            
            info.AddValue("states", this.states);
        }
} 
```

我正在使用二进制格式化程序序列化类数据，如下所示：

```
using (var stream = File.Create(path))
{
    BinaryFormatter bFormatter = new BinaryFormatter();
    bFormatter.Serialize(stream, this);
} 
```

并使用反序列化：

```
Stream stream = File.Open(path, FileMode.Open);
BinaryFormatter bFormatter = new BinaryFormatter();
data d = (data)bFormatter.Deserialize(stream);
stream.Close(); 
```

问题是我无法反序列化字典中的项目。这

```
info.GetValue("states",typeof(Dictionary<int,customUC>) 
```

似乎返回一个空字典。

# haskell - 如何将多个管道合并为一个，反之亦然

> ID：14606692
> 
> 赞同：4
> 
> 时间：2013-01-30T14:46:05.273
> 
> 标签：haskell, conduit

是否可以将多个管道合并为一个，反之亦然？

我正在努力实现以下功能。

```
merge :: (Monad m) => [Pipe l i o u m r] -> Pipe [l] [i] [o] m [r]

split :: (Monad m) => Pipe [l] [i] [o] m [r] -> [Pipe l i o u m r] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:20:47.937

From your comment, it sounds like you can more easily accomplish what you're trying to do just by chaining some sinks together:

```
import Data.Conduit
import Data.Serialize.Put (putListOf, putWord32le)
import qualified Data.Conduit.Binary as Cb
import qualified Data.Conduit.List as Cl
import qualified Data.Conduit.Cereal as Cc

main :: IO ()
main = do
  let source = Cl.sourceList [[1,2,3],[4,5,6],[7,8,9]]
      encoder = Cc.conduitPut $ putListOf putWord32le

  runResourceT . runPipe $ source >+> do
    Cl.isolate 1 >+> encoder >+> Cb.sinkFile "/tmp/1.bin"
    Cl.isolate 1 >+> encoder >+> Cb.sinkFile "/tmp/2.bin"
    Cl.isolate 1 >+> encoder >+> Cb.sinkFile "/tmp/3.bin"
    Cl.sinkNull 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:35:44.403

正如其他人评论的那样，合并管道具有多种语义。

我知道在`pipes-core`（Paolo Capriotti 的 Gabriel Gonzalez`pipes`库的分支，它是 iteratees 的另一种实现`conduit`）中，有一些非常通用的用于单曲面和乘法类别的代码。

[http://hackage.haskell.org/packages/archive/pipes-core/0.1.0/doc/html/Control-Pipe-Category.html#t:PipeC](http://hackage.haskell.org/packages/archive/pipes-core/0.1.0/doc/html/Control-Pipe-Category.html#t:PipeC)

例如，使用`PipeC`，一个移动类型变量以形成`PipeC m r`有效类别的新类型，我们可以将独立信号多路复用为`Either`s。

您还有类似的东西`sequence`适用于整个`Monad`实例。

```
sequence :: [m a] -> m [a] 
```

这将“垂直”排列各种管道（一个运行然后下一个）让我们编写类似的东西（使用`Control.Pipe.Pipe`来自 Gonzalez 的`pipes`包）

```
takeNPipe :: Int -> Pipe a b m [a]
takeNPipe n = sequence (replicate n await) 
```

* * *

您要求的类型同时暗示了这两种“合并”。这（我相信）是不可能的，因为您同时想要并行（多路复用）和顺序（垂直）组合。

# extjs - gridPanel 列中的替代 dataIndex 值

> ID：14606694
> 
> 赞同：0
> 
> 时间：2013-01-30T14:46:14.643
> 
> 标签：extjs

我有一个带有以下列的 gridPanel：

```
header:        'Current plan',
                        tooltip:       'Current plan',
                        dataIndex:     'plan_id',
                        editor:      new Ext.form.ComboBox({
                           allowBlank:          true,
                           typeAhead:           true,
                           triggerAction:       'all',
                           lazyRender:          true,
                           mode:                'local',
                           valueNotFoundText:   'no data',
                           valueField:          'id',
                           displayField:        'text',
                           store:               new Ext.data.ArrayStore({
                              fields:  ['id', 'text'],
                              data: [
                                 ['1', 'Plan one'],
                                 ['2', 'Plan two'],
                                 ['3',  'Plan three'],
                                 ['4',  'Plan four']
                              ]
                           })
                        }), 
```

因此，当我在列中编辑此字段时 - 我将“计划一”、“计划二”、“计划三”、“计划四”作为要选择的值，当我选择它们时 - dataIndex 设置为 1-2-3- 4并像这样显示在列字段中。我想要的是 dataIndex 字段保持 1-2-3-4 值（因为它是我在后端使用的值），但我希望它们显示在我的列字段中，如“计划一”、“计划二”等.

我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:16:21.180

解决了

```
renderer: function(dataIndex){
                            switch(dataIndex)
                            {
                               case '1':
                                 return 'Plan one';
                                 break;
                               case '2':
                                 return 'Plan two';
                                 break;
                               case '3':
                                 return 'Plan three';
                                 break;
                               case '4':
                                 return 'Plan four';
                                 break;
                            }
                         }, 
```

在列模型中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:34:51.797

更好地使用此代码：

```
var comboBoxRenderer = function(combo) {
  return function(value) {
    var idx = combo.store.find(combo.valueField, value);
    var rec = combo.store.getAt(idx);
    return (rec === null ? '' : rec.get(combo.displayField) );
  };
} 
```

# iphone - 地址簿：Exchange 设置时的自定义电话号码标签

> ID：14606695
> 
> 赞同：0
> 
> 时间：2013-01-30T14:46:14.760
> 
> 标签：iphone, contacts, addressbook, abaddressbook

我有一个应用程序部分复制了本机联系人应用程序功能。然后，我遇到了这样的错误：在某些设备上，我创建新联系人，使用 kABPersonPhoneIPhoneLabel 添加电话号码，保存并稍后阅读，该号码没有标签！经过调查，我发现只有在打开 Exchange 帐户联系人同步（在我的情况下为 Google）时才会出现该问题。此外，请检查标签列表以在 Exchange 同步打开和关闭时选择。（请注意，您的通讯录中应该没有联系人）

Exchange 已关闭，可用标签的电话号码为：

*   手机、iPhone、家庭、工作、主要、家庭传真、工作传真、其他传真、寻呼机、其他

用户可以添加自定义标签。

交换是开启的，标签是：

*   移动、家庭、工作、家庭传真、工作传真、寻呼机、助理、汽车、公司主、收音机

并且用户不能添加自定义标签

我的应用程序仅处理第一种情况中提到的标准标签。

所以，问题是：如何检索可用标签列表，以及如何知道用户是否允许添加自定义标签？

感谢您的回答，或有关此的任何相关信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T05:16:31.963

您可以添加标签：

```
bool ABMultiValueAddValueAndLabel (
   ABMutableMultiValueRef multiValue,
   CFTypeRef value,
   CFStringRef label,
   ABMultiValueIdentifier *outIdentifier
); 
```

# objective-c - 有没有办法重新排列数组列表的内容？

> ID：14606697
> 
> 赞同：0
> 
> 时间：2013-01-30T14:46:20.593
> 
> 标签：objective-c

有没有办法重新排列对象数组，以便重新排列内容，以便所有第 x^个元素都分组到另一个数组中？我不确定解释这一点的最佳方法，所以我将举例说明：

theArray 有 5 个属性：数量、颜色、大小、高度、质量。该数组有 50 个实例，每个实例具有不同的属性。

我想重新排列它，所以有 5 个数组，每个数组中有 50 个项目。

我会这样做的方式是：

```
NSMutableArray *innerTemp = [[NSMutableArray alloc] initWithCapacity:49];
NSMutableArray *outerTemp = [[NSMutableArray alloc] initWithCapacity:4];

for (int i = 0 ; i < [theArray count]; i++){
    [innerTemp addObject:[[theArray objectAtIndex:i] number]];
    [innerTemp addObject:[[theArray objectAtIndex:i] color]];
    [innerTemp addObject:[[theArray objectAtIndex:i] height]];
    [innerTemp addObject:[[theArray objectAtIndex:i] age]];
    [innerTemp addObject:[[theArray objectAtIndex:i] quality]];

    [outerTemp addObject:temp];
} 
```

所以我想我的问题是，有没有更简单/更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:20:31.133

只需使用 KVC（[键值编码](http://developer.apple.com/documentation/Cocoa/Conceptual/KeyValueCoding/)）：

假设您的班级看起来像这样：

```
@interface InstanceClass : NSObject

// IIRC properties need to be objects (hence the NSValue around NSSize), there is no auto-wrapping.
@property (readwrite, strong, nonatomic) NSNumber *number;
@property (readwrite, strong, nonatomic) NSColor *color;
@property (readwrite, strong, nonatomic) NSValue *sizeValue;
@property (readwrite, strong, nonatomic) NSNumber *height;
@property (readwrite, strong, nonatomic) NSNumber *quality;

@end 
```

你有一个像

```
NSArray *instances = @[instance1, instance2, instance3, instance4, ...]; 
```

那么这就是你所需要的：

```
NSArray *numbers   = [instances valueForKey:@"number"];  // array of numbers.
NSArray *colors    = [instances valueForKey:@"color"];   // array of colors.
NSArray *sizes     = [instances valueForKey:@"size"];    // array of sizes.
NSArray *heights   = [instances valueForKey:@"height"];  // array of heights.
NSArray *qualities = [instances valueForKey:@"quality"]; // array of qualities. 
```

这会成功的。

假设您在`instances`数组中的项目是从`1..n`调用中编号的，`[instances valueForKey:@"number"]`那么将返回一个**NSArray**，如`@[@1, @2, @3, @4, ...]`.

# mysql - MySQL - 可以使用按 desc 限制 1 的 order 来优化 3 个子查询的查询以重试最新记录？

> ID：14606701
> 
> 赞同：2
> 
> 时间：2013-01-30T14:46:25.097
> 
> 标签：mysql, optimization, subquery

我正在努力优化检索某些产品及其先前记录的定价详细信息的查询。

因为我的 3 个子查询使用 desc 顺序和限制 1 来返回最后记录的价格，并且日志表包含数万行（从长远来看可能包含数百万行），所以它在5秒的区域产生查询结果（大约有3000个产品）。

```
SELECT products.*, 
    (SELECT value_new FROM log_actions 
     WHERE action='edit' AND target_entity='net_price_euro' 
     AND target_table='products' 
     AND target_id=products.product_id
     ORDER BY log_time DESC LIMIT 1
    ) AS previous_net_price_euro,
    (SELECT value_new FROM log_actions 
     WHERE action='edit' AND target_entity='retail_sterling' 
     AND target_table='products' AND target_id=products.product_id
     ORDER BY log_time DESC LIMIT 1
     ) AS previous_retail_sterling,
    (SELECT value_new FROM log_actions 
     WHERE action='edit' AND target_entity='gp' 
     AND target_table='products' 
     AND target_id=products.product_id
     ORDER BY log_time DESC LIMIT 1
    ) AS previous_gp
FROM products
WHERE products.deleted IS NULL ORDER BY products.status asc 
```

据我所知，我已将所有相关字段编入索引。在上面运行 EXPLAIN 会返回以下内容：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   PRIMARY     products    ALL     deleted     NULL    NULL    NULL    3192    Using where
4   DEPENDENT SUBQUERY  log_actions     ref     target_entity,target_id,action,target_table     target_id   4   products.product_id     4   Using where; Using filesort
3   DEPENDENT SUBQUERY  log_actions     ref     target_entity,target_id,action,target_table     target_id   4   products.product_id     4   Using where; Using filesort
2   DEPENDENT SUBQUERY  log_actions     ref     target_entity,target_id,action,target_table     target_id   4   products.product_id     4   Using where; Using filesort 
```

我已经阅读了添加 desc 索引可以提高性能，但进一步阅读似乎 MySQL 目前不支持这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:09:04.663

这个查询重新思考了一点问题。你说得对，mysql还不支持DESC索引，这就是为什么我试图做一个比你的订购次数少的查询（你订购了3次）：

```
SELECT products.*, 
    l1.value_new AS previous_net_price_euro,
    l2.value_new AS previous_retail_sterling,
    l3.value_new AS previous_gp
FROM products
    INNER JOIN (
            SELECT target_id, target_entity, MAX(log_time) AS mx FROM log_actions
            WHERE
                action='edit' 
            AND target_table='products'
            GROUP BY target_id, target_entity
        ) lastvalues ON lastvalues.target_id = products.product_id
    INNER JOIN (
            SELECT target_id, target_entity, log_time, value_new FROM log_actions
            WHERE
                target_entity = 'net_price_euro' 
            AND action='edit' 
            AND target_table='products'
        ) l1 ON l1.target_id            = lastvalues.target_id 
                AND l1.log_time         = lastvalues.mx 
                AND l1.target_entity    = lastvalues.target_entity
    INNER JOIN (
            SELECT target_id, target_entity, log_time, value_new FROM log_actions
            WHERE
                target_entity = 'retail_sterling' 
            AND action = 'edit' 
            AND target_table = 'products'
        ) l2 ON l2.target_id            = lastvalues.target_id 
                AND l2.log_time         = lastvalues.mx 
                AND l2.target_entity    = lastvalues.target_entity
    INNER JOIN (
            SELECT target_id, target_entity, log_time, value_new FROM log_actions
            WHERE
                target_entity = 'gp' 
            AND action = 'edit' 
            AND target_table = 'products'
        ) l3 ON l3.target_id            = lastvalues.target_id 
                AND l3.log_time         = lastvalues.mx 
                AND l3.target_entity    = lastvalues.target_entity
WHERE products.deleted IS NULL 
ORDER BY products.status ASC 
```

在这种情况下，您可以使用另一个包含 log_time 的索引，它可能会加速内部连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:53:58.553

三个内联子查询都是相似的：

```
(SELECT value_new FROM log_actions 
 WHERE action = 'edit' 
   AND target_entity = 'net_price_euro' 
   AND target_table = 'products' 
   AND target_id = products.product_id
 ORDER BY log_time DESC LIMIT 1
) 
```

我会在以下位置添加一个索引：

```
 (action, target_table, target_entity
 ,target_id, log_time, value_new) 
```

索引中列的顺序对于前 3 列无关紧要，但对于后三列却很重要：`(..., target_id, log_time, value_new)`

# c# - 在 Winform 中动态更改本地资源图像

> ID：14606705
> 
> 赞同：1
> 
> 时间：2013-01-30T14:46:33.403
> 
> 标签：c#, winforms

一旦用户在文本字段中输入图像名称，我想要做的是动态更改存储在媒体驱动器中的图像集合。目前我所能做的就是加载一张奇异的图像。

我想做的甚至可能吗？如果是这样，我该怎么做？

我对 winform 编程非常陌生，我的谷歌搜索并没有出现太多。

编辑

设法解决了这个问题。我需要的代码行如下：

```
 pictureBox1.Image = Image.FromFile("Image Location"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:58:57.773

如果你的意思是`Embedded Resource`

答案是**不能修改**本地资源下的图片

这是一个很好的解释：[如何编辑资源文件](https://stackoverflow.com/questions/6398119/how-to-edit-a-resource-file)

# php - 在颜色框中使用 PHP Cookie

> ID：14606707
> 
> 赞同：1
> 
> 时间：2013-01-30T14:46:40.900
> 
> 标签：php, cookies, colorbox, setcookie

我在 login.php 中创建了一个 cookie

```
setcookie("mes_mod_kull",$userid,time() + 3600,'/'); 
```

我有一个打开颜色框的链接，如下所示：

```
<a href="file_add.php" class="colorbox">Add File</a> 
```

在 file_add.php 我必须使用 cookie。我的意思是，我必须访问我在 login.php 中创建的 cookie

我使用此代码测试 cookie 值：`print $_COOKIE["mes_mod_kull"];`但这里有一个错误：注意：`Undefined index: mes_mod_kull in..........`

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:20:51.240

问题出在 setcookie 函数中。它需要定义域。

我更改以下代码

```
setcookie("mes_mod_kull",$userid,time() + 3600,'/'); 
```

到

```
setcookie("mes_mod_kull",$userid,time() + 3600,'/','mydomain.com'); 
```

它奏效了。这有点荒谬。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:49:03.273

假设您的打印调用与 setcookie 位于相同的脚本中，则您必须等到脚本的 NEXT 执行才能使用该新 cookie 填充 $_COOKIE。PHP 在脚本初始化时构建/填充超全局（_GET、_POST、_COOKIE 等）**一次**，然后在脚本的生命周期内不再接触它们。setcookie 为您更新 $_COOKIE。

# jquery - CSS：仅将样式应用于两个类的组合，但不应用于其他类

> ID：14606712
> 
> 赞同：0
> 
> 时间：2013-01-30T14:47:04.167
> 
> 标签：jquery, css

以下是我用来注入需要应用于具有这两种样式组合的 Div 的样式：**.noindex**和**.ms-wpContentDivSpace**

```
<script>
$(document).ready(function(){
$('.noindex, .ms-wpContentDivSpace')..css({
   overflow: auto,
   height : '150px'
});
});
</script>

<style> 
    .autoScrolListViewWP 
    {   
        HEIGHT: 150px; 
        OVERFLOW: auto 
    } 
</style>
<script> 
    $(document).ready
    (
        function()
        { 
            $('.noindex, .ms-wpContentDivSpace').addClass('autoScrolListViewWP');
        }
    );
</script> 
```

好吧，但我需要的是，上面的新 CSS **autoScrollListViewWP**应该只添加到那些 CSS 组合仅适用于这两个类 **.noindex**和**.ms-wpContentDivSpace 的元素中**

但是上面的脚本会将样式应用于存在这两个类的任何 CSS 组合。例如**.ms-WPBody**、**.noindex** 和**ms-wpContentDivSpace autoScrollListViewWP**

我的问题是如何仅识别 CSS 类的特定组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:50:49.190

编辑我之前的代码：

```
$("[class*='.noindex .ms-wpContentDivSpace']").addClass('autoScrolListViewWP'); 
```

这应该有效。

编辑：它工作，见例子：**[JsFiddle](http://jsfiddle.net/toroncino/CQw9a/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T06:15:59.210

一个解决方案是获取这两个类的所有元素，然后遍历它们并查看它们是否有其他类。IE：

```
$('.noindex.ms-wpContentDivSpace').each(function(i, elem) {
    var classes = elem.className.split(/\s+/);
    if (classes.length === 2) { // they should have only these two classes
        $(elem).addClass('autoScrolListViewWP');
        // alternatively elem.className += ' autoScrolListViewWP'; (untested)
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:54:12.170

把空间拿出来。

```
$('.noindex.ms-wpContentDivSpace').addClass('autoScrolListViewWP'); 
```

这只会将一个类添加到一个同时具有类`noindex`和`ms-ContentDivSpace`.

是的，jQuery 非常聪明。这就像使用 CSS 一样。

**编辑：**

*如果元素具有*这两个类*但没有其他类*，我没有意识到您想选择该元素。这有点棘手。

如果您知道不想包含哪个课程，那么这是最简单（也是最快）的方法：

```
$('.noindex.ms-wpContentDivSpace').not('.theClassYouDontWant').addClass('autoScrolListViewWP'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:54:16.637

尝试

`$('.noindex.ms-wpContentDivSpace').addClass('autoScrolListViewWP');`

这是具有两个类的元素的标准css触发器

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-30T14:51:10.300

在您的 jQuery 调用中，

```
$('.noindex, .ms-wpContentDivSpace')..css({ 
```

表示每个 .noindex 和每个 .ms-wpContentDivSpace

```
$('.noindex.ms-wpContentDivSpace')..css({ 
```

表示 .noindex AND .ms-wpContentDivSpace

# sql - 如何在 sql 查询中聚合数字

> ID：14606723
> 
> 赞同：0
> 
> 时间：2013-01-30T14:47:27.180
> 
> 标签：sql, oracle, oracle11g

我有这个 SQL 查询，它搜索父母和孩子并计算权重。

```
select componentid,
         (select sum(cs.weightkg)
            from component c2, componentstats cs
           where c2.componentstatsid = cs.componentstatsid
               start with c2.componentid = c1.componentid
         connect by prior c2.componentid = c2.fkcomponentid) sum_weightkg
from component c1
start with c1.fkcomponentid = 100
connect by prior componentid = fkcomponentid 
```

问题是我希望 SQL 查询将总权重作为数字返回（它发现要聚合的所有数字）。

这是我得到的结果：

```
COMPONENTID            SUM_WEIGHTKG           
---------------------- ---------------------- 
201                    410                    
231                    210                    
323                    10 
```

你能帮我重写 SQL 查询吗？

[http://www.sqlfiddle.com/#!4/def0e/2](http://www.sqlfiddle.com/#!4/def0e/2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:31:07.847

```
select max(sum_weightkg) from
(select componentid,
             (select sum(cs.weightkg)
                from component c2, componentstats cs
               where c2.componentstatsid = cs.componentstatsid
                   start with c2.componentid = c1.componentid
             connect by prior c2.componentid = c2.fkcomponentid) sum_weightkg
    from component c1
   start with c1.fkcomponentid = 100
   connect by prior componentid = fkcomponentid); 
```

我不确定这是最好的方法，但它应该有效。

# java - Java 中的动态类加载 - 引用类

> ID：14606726
> 
> 赞同：0
> 
> 时间：2013-01-30T14:47:37.480
> 
> 标签：java, eclipse

我只是在测试动态类负载并且正在这样做：

```
package P1;
public class Class1
{
    public static void main(String[] args)
    {
         Bird myBird = null;
         String myClassName = "P2.Bird";
         Class x = Class.forName(myClassName);
         myBird = (Bird)x.newInstance();
    }
} 
```

`Bird`是来自 的类`package P2`，并且`Class1`来自`P1`。我应该在代码中添加什么以使其工作，因为该`String myClassName...`行显示错误（找不到类）。`Bird`我搬进来后尝试了相同的代码`package P1`，即使那样它也不起作用。

相关问题：为什么有人会使用动态类加载，它有什么优势吗？仅使用“new”运算符进行静态类加载要简单得多（至少对我而言），在这种情况下，我知道如何从不同的包中引用该类。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:58:28.080

您的 Bird 类提供了一个没有参数的默认公共构造函数？

动态类加载可能很有用，例如指定要在配置文件中使用的类（如果您曾经使用过 log4j 或其他允许将您自己的实现用于其中一个接口的库，您会遇到这种情况）。在这种情况下，库不知道您将使用哪个类，并且您不必编写代码来初始化库（这将是动态类加载的替代方案，但不太方便）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:01:33.957

对于第一个问题的答案，请尝试提及完整的包名称。我已经尝试过了，它有效

# java - 位置计算的不需要的结果

> ID：14606733
> 
> 赞同：1
> 
> 时间：2013-01-30T14:47:53.100
> 
> 标签：java, android

在我的应用程序中，我每 5 分钟生成一个位置，如果它符合我的标准，则将其发送到数据库。标准之一是生成的新位置不等于旧位置。以下条件应该涵盖它（和其他一些东西），但实际上它不会。

```
if(newLocation != null)
{
  if(location != null)
  {
    if(location.getAccuracy() > newLocation.getAccuracy() + 100)
      sendTask();
    else
      if(newLocation.distanceTo(location) > 1800)
      sendTask();
  }
  else
    sendTask();
} 
```

发送任务方法的意思是，发送到数据库。如果 newLocation 和 Location 具有相同的坐标，则不应执行 sendTask 方法，它是！

为什么？

# hbase - 无法使用 Spring 的 hbase 模板从 Hbase 查询

> ID：14606736
> 
> 赞同：0
> 
> 时间：2013-01-30T14:48:00.790
> 
> 标签：hbase, spring-data

我正在尝试使用 Spring Data 模块中的 HbaseTemplate 通过 zookeeper 连接到我的 HBase 集群。会话建立发生得很好，但 find 方法永远不会返回值。它永远挂在那里。

我正在附加配置文件和测试用例。任何帮助表示赞赏。

弹簧配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:hdp="http://www.springframework.org/schema/hadoop" xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/hadoop http://www.springframework.org/schema/hadoop/spring-hadoop-1.0.xsd">

    <bean id="hbaseTemplate" class="org.springframework.data.hadoop.hbase.HbaseTemplate"
        p:configuration-ref="hbaseConfiguration" />

        <hdp:configuration>

        </hdp:configuration>

    <hdp:hbase-configuration zk-quorum="hadoop-host-2" zk-port="2181" delete-connection="true">
    </hdp:hbase-configuration>

</beans> 
```

Junit测试类：

```
import java.util.List;

import org.apache.hadoop.hbase.client.HTableInterface;
import org.apache.hadoop.hbase.client.Put;
import org.apache.hadoop.hbase.client.Result;
import org.apache.hadoop.hbase.util.Bytes;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.hadoop.hbase.HbaseTemplate;
import org.springframework.data.hadoop.hbase.RowMapper;
import org.springframework.data.hadoop.hbase.TableCallback;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("file:src/main/webapp/WEB-INF/spring/hbase/hbase-config.xml")
public class HBaseConnectionTest {

    @Autowired
    private HbaseTemplate hbaseTemplate;

    @Test
    public void testConnection() {

        List<String> list = hbaseTemplate.find("testTab",
                "testcf:testCol", new RowMapper<String>() {

                    @Override
                    public String mapRow(Result result, int arg1)
                            throws Exception {

                        return result.toString();

                    }
                });

        System.out.println(list);

    } 
```

输出：

信息：org.apache.hadoop.hbase.zookeeper.RecoverableZooKeeper - 此进程的标识符是 8916@WINDOWS-8KV8O4B 信息：org.apache.zookeeper.client.ZooKeeperSaslClient - 客户端不会进行 SASL 身份验证，因为默认的 JAAS 配置部分'找不到客户。如果您不使用 SASL，则可以忽略这一点。另一方面，如果您希望 SASL 能够工作，请修复您的 JAAS 配置。信息：org.apache.zookeeper.ClientCnxn - 与 iaps-hadoop-host-2/192.168.111.242:2181 建立的套接字连接，正在启动会话信息： org.apache.zookeeper.ClientCnxn - 服务器 hadoop-host-2 上的会话建立完成/192.168.111.242:2181，sessionid = 0x13c8bcf1cd7000a，协商超时 = 60000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:46:07.273

这失败了，因为我们的 hadoop 集群中的一些主机无法从我的客户端访问。添加主机名和 ips 正确地解决了这个问题。

这可能对某人有帮助。

干杯普拉文

# mysql - 分组结果集 - mysql

> ID：14606738
> 
> 赞同：1
> 
> 时间：2013-01-30T14:48:02.150
> 
> 标签：mysql, sql

我有以下 sql 它返回按状态分组的书籍总数

```
 select COUNT(BOOK_ID) AS book_num, BOOK_STATUS_FK from BOOKS group by BOOK_STATUS_FK;

+---------+------------------+
| book_num | BOOK_STATUS_FK |
+---------+------------------+
|      57 |                2 |
|     162 |                3 |
|    9736 |                4 |
|     104 |                5 |
|      29 |               22 |
|       1 |               23 |
|       5 |               25 |
|      14 |               54 |
+---------+------------------+ 
```

我想将结果集分组为 2 行，其中一行表示 BOOK_STATUS_FK > 4 的书籍数量，第二行表示 BOOK_STATUS_FK <= 4 的书籍数量

有没有办法在sql中做到这一点？

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:49:38.777

这是一个带有 case 语句的聚合：

```
select (case when book_tatus_fk > 4 then '>4' else '<=4' end) as grp, count(*)
from books
group by (case when book_tatus_fk > 4 then '>4' else '<=4' end) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:52:18.770

当计数之一为 0 时，Gordon Linoff 建议的 2 行解决方案不会产生 2 行。

以下将在一行中给出两个计数：

```
select ifnull( sum( if( book_status_fk > 4, 1, 0 ) ), 0), ifnull( sum( if( book_status_fk <= 4, 1, 0 ) ), 0 )
from books 
```

编辑：添加了 ifnull 的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T15:11:21.737

如果您总是需要两行，即使一个组的计数为 0，您也可以使用回文的解决方案，或者您可以使用 Gordon Linoff 查询的这个稍微修改的版本：

```
select grp.g, count(BOOK_STATUS_FK)
from
  (select '<=4' g union all select '>4') grp left join books
  on grp.g = case when book_status_fk > 4 then '>4' else '<=4' end
group by grp.g 
```

# c# - 从列表中的每个结构中获取一个字段并使用 lambda 表达式创建一个数组

> ID：14606739
> 
> 赞同：1
> 
> 时间：2013-01-30T14:48:06.027
> 
> 标签：c#, lambda

我定义了一个结构：

```
public struct STRUC
{
    public int field1;
    public int field2;
    ...
    public int fieldn;
} 
```

现在，我有一个这个结构的列表，`List<STRUC> l;`我想创建一个数组，从list 中的`field2`每个中获取。`STRUC``l`

当然，`for`我完成了一个简单的循环：

```
int [] arr = new int[l.Count]; 

for(int i=0; i<l.Count; i++)
{
     arr[i] = l[i].field2;
} 
```

但我想用 lambda 来做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:49:30.450

你只需要[`Select`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx)和[`ToArray`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)：

```
int[] arr = l.Select(s => s.field2).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:49:35.127

```
var fields = l.Select(x=>x.field2); 
```

你会得到`IEnumerable`可以迭代的。

```
foreach(var f in fields) {
    //DO SOMETHING ...
} 
```

# highcharts - 发布动态变化的 HighCharts 图表标题

> ID：14606741
> 
> 赞同：4
> 
> 时间：2013-01-30T14:48:17.133
> 
> 标签：highcharts

我有一个问题在图表中动态更改标题。我正在按照[此处](http://jsfiddle.net/highcharts/39C3U/3/)的解决方法更改图表标题，以便在导出图表时反映更改。[此处](https://github.com/highslide-software/highcharts.com/issues/48)的错误报告中引用了此解决方法。但是，当您在解决方法示例中单击“设置标题”两次时，图表磁贴会丢失其格式。有没有办法解决这个问题？

```
chart.setTitle( { text: 'Head Count Terminations' }, { text: 'Sales' } );
chart.options.title = {
    text: 'Head Count Terminations'
};
chart.options.subtitle = {
    text: 'Sales'
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T16:24:18.820

它可能会丢失其格式，因为整个标题对象已被替换。只设置 text 属性怎么样？

```
chart.setTitle( { text: 'Head Count Terminations' }, { text: 'Sales' } );
chart.options.title.text = 'Head Count Terminations';
chart.options.subtitle.text = 'Sales'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:54:29.883

您可以通过覆盖导出按钮和导出选项来避免该问题。

示例：http: [//jsfiddle.net/HvHVU/](http://jsfiddle.net/HvHVU/)

功能：

```
function exportActualChart() {
    this.exportChart({}, {
        title: {
            text: this.title.text
        },
        subtitle: {
            text: this.subtitle.text
        }
    });
} 
```

图表选项

```
 exporting: {
        buttons: {
            exportButton: {
                menuItems: [{
                    text: 'Standard export',
                    onclick: function () {
                        this.exportChart();
                    }
                }, {
                    text: 'With new title',
                    onclick: exportActualChart
                },
                null,
                null]
            }
        }
    } 
```

# html - Chrome 输入 =“日期”打破 tabindex

> ID：14606743
> 
> 赞同：1
> 
> 时间：2013-01-30T14:48:31.350
> 
> 标签：html, forms, google-chrome, date

我有一个包含 html5 日期输入元素的表单。表单上的每个输入都在 tabindex 序列中仔细排序。但是日期元素打破了 Chrome 中的顺序，将焦点发送回第一个元素。如果我将其恢复为简单的文本输入，则相同的元素会起作用。任何想法如何解决这个问题？任何非 JS 解决方案都会得到特别提及。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T12:23:59.233

如果您在页面呈现后使用`Javascript`添加`tabIndex`日期类型的输入，它应该让您完成预期的选项卡索引行为。

例如（日期类型的输入被赋予类'dateInput'和一些数字的索引）：

```
$(".dateInput").attr("tabIndex", some-number); 
```

就我而言，在从日期类型的输入中删除 tabIndex 之前，我无法浏览文档。

# ios - 在 iOS 中使用 YouTube 和 LinkedIn URL 方案

> ID：14606744
> 
> 赞同：2
> 
> 时间：2013-01-30T14:48:36.190
> 
> 标签：ios, youtube, linkedin, url-scheme

我正在尝试从我们自己的应用程序中打开 YouTube 应用程序。我正在使用以下代码执行此操作：

```
if([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"youtube://"]])
{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"youtube://?????"]];
}
else
{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://youtube.com/user/..."]];
} 
```

如果 youtube 应用程序可用，则使用给定的 URL 打开它，否则打​​开 YouTube 的网络版本。现在我的问题是我需要用什么来代替问号才能在 YouTube 应用中打开用户帐户/个人资料页面？我已经尝试填写 youtube://user/username 但这不起作用。

我对 LinkedIn 应用程序有完全相同的问题。

```
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"linkedin://"]])
{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"linkedin://?????"]];
}
else
{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.linkedin.com/company/...."]];
} 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T02:41:41.643

要在linkedin上打开用户页面，您可以使用：

`linkedin://#profile/<profile_id>`

我无法使用个人资料名称，只能使用数字 ID。此外，我无法将其与公司合作，只能与人合作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T14:00:18.430

链接的正确格式是： `youtube://www..youtube.com/user/username`

（编辑说明：我怀疑 www 后的两个句点是错字，但我不是专家 - 请删除此说明并在需要时修复）。

# joomla - 如何为某些用户隐藏 joomla 中的类别？

> ID：14606746
> 
> 赞同：1
> 
> 时间：2013-01-30T14:48:47.590
> 
> 标签：joomla, joomla2.5

描述：我有两个顶级类别 SiteContent 和 UserArticles。
SiteContent 包含所有站点页面（主页、关于、联系人），而 UserArticles 包含 5 个类别（音乐、电影、体育、娱乐和其他）。

我创建了一个访问级别为*Manager*的用户，他将负责在 UserArticles 类别中发布内容。他无权编辑主要的 SiteContent 页面。

*我想做的事 ？*Ans：当*经理*使用管理员面板登录时，他应该只看到 UserArticles 类别和相关文章。他应该无法查看 SiteContent 类别及其各自的文章。

*我试过什么？*Ans: 我已经编辑了 SiteContent -*经理的类别权限*更改为创建 - 不允许、删除 - 不允许、编辑 - 不允许、编辑状态 - 不允许、编辑自己 - 不允许。但是为用户*Manager*显示类别 SiteContent（类别和文章） ；它唯一被禁用。*我希望将它们完全删除*并仅显示 UserArticles 类别及其各自的文章。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:07:58.313

这对于核心 Joomla 是不可能的，但可以进行布局覆盖并包括对此的访问检查。Joomla 管理员的理论是，如果您可以访问后台和特定管理员，您可以看到所有内容但不能做所有事情。

# php - 如何使用 3 个键插入或更新 mysql 表

> ID：14606747
> 
> 赞同：2
> 
> 时间：2013-01-30T14:48:48.057
> 
> 标签：php, mysql

我的 mysql 中有一个如下所示的表：

```
location(char17), id(int9), sideid(int9), total(int9), other...(other) 
```

仅当未找到 ID 和 SideID 时，我才必须将新内容插入此表中，如果它们都相同则更新。我的困境是我需要它来检查 ID 和 SideID 是否存在。

所以在我的表中添加了一些东西之后，它应该看起来像这样：

```
mplace1, 100, 4, 10, other data...
mplace1, 100, 5, 6,  other data...
mplace1, 100, 3, 6,  other data...
mplace1, 50,  3, 6,  other data...
mplace1, 50,  6, 6,  other data... 
```

前 3 列基本上是一个巨大的键。可以有多个位置，一个位置内可以有多个 ID，并且其中可以有多个 SideID。但它不可能有一个完全匹配的。所以如果Location、ID、SideID都匹配，就不应该插入数据库，而是更新“其他数据”。

在单个 mysql_query 中拥有它也非常重要......我已经尝试了几个星期，但仍然迷路。希望有人知道如何做到这一点。请注意，如果不能在一个查询中完成，那么我猜我会接受。这是一项特殊的任务。

只是为了澄清。我的意思是这 3 列（位置、id、边）不能重复。因此其他列将能够具有不同的值。

因此，如果**mplace1, 100, 4, 10, "Some other data 1"**在表中。插入这个**mplace1, 100, 4, 999, "Some other"**会更新。如何指定要检查的列以及无关紧要的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:38:18.113

```
INSERT OR REPLACE INTO table (column1, column2) VALUES ('value1', 'value2'); 
```

这将自动检查重复项（例如重复的 ID），因此如果需要它会执行`update`其他操作，它只会`insert`执行新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T10:51:19.487

```
INSERT OR REPLACE INTO table (column1, column2) VALUES ('value1', 'value2'); 
```

# php - 如何使用 1 个查询来做到这一点？

> ID：14606751
> 
> 赞同：0
> 
> 时间：2013-01-30T14:48:59.560
> 
> 标签：php

```
delete from table1 where user_id = ...
delete from table2 where user_id = ...
delete from table3 where user_id = ...
delete from table4 where user_id = ... 
```

我尝试从这个 1 查询中进行，但不是结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:52:23.470

我认为这会奏效

```
DELETE table1.*, table2.*,table3.* FROM table1, table2, table3 
WHERE table1.user_id=? and table2.user_id=? and table3.user_id=?; 
```

还有另一种可能有效的解决方案：

```
DELETE FROM table1, table2, table3 
USING table1 
    INNER JOIN table2 USING(user_id) 
    INNER JOIN table3 USING(user_id) 
WHERE table1.user_id= ? 
```

无论如何，您可以使用选项在表上定义[外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)`ON DELETE CASCADE`，然后从父表中删除记录会从子表中删除所有记录。

# php - PHP ZipArchive 下载工作但不能将文件添加到 zip

> ID：14606753
> 
> 赞同：2
> 
> 时间：2013-01-30T14:49:01.663
> 
> 标签：php, http, ziparchive

我知道关于 ZipArchive 及其工作原理有很多问题，但是在遵循所有这些之后，我仍然无法让我的程序正常工作。

我不知道我哪里出错了，因为我有死亡方法并且没有一个被激活。

```
$path = "/export/scripts/CLOUD/logs/web/Private_Testbox/Jan_28_2013_16_20_44_atvts78_rollout_config/";

$fileName = explode('/', $path);
$zipname = $fileName[count($fileName) - 2];

$zip = new ZipArchive;
$handle = opendir($path);

//Check whether Zip can be opened
if ($zip->open($zipname, ZIPARCHIVE::CREATE) !== TRUE) {
    die("Could not open archive");
}

//Add all files to an array
while ($file = readdir($handle)) 
{
    $zip->addFile($path, $file);
}

closedir($handle);
$zip->close();

//Send zip folder 
header('Content-Type: application/zip');
header('Content-disposition: attachment; filename=' . $zipname . '.zip');
readfile($zip); 
```

此文件下载 zip 文件夹，但其中没有任何内容。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:52:53.507

`die()`您在通话中忘记了 a `->addFile()`，这意味着您假设文件实际上已添加。

readfile() 不返回目录中文件的完整路径，只返回实际的“本地”文件名，这意味着您正在添加脚本当前工作目录中不存在的文件。尝试：

```
$zip->addFile($file, $path . $file);
              ^^^^^^^^^^^^^^^^^^^^^ 
```

反而。就目前而言，您的代码`$path`用作嵌入到 zip 中的文件名，并且目录不能用作文件名。如果没有`$path . $file`, addFile 正在寻找错误的位置，例如它相当于`getcwd() . $file`instead 。

# python - Gdk：如何从 Python 中的事件掩码中删除位？

> ID：14606759
> 
> 赞同：4
> 
> 时间：2013-01-30T14:49:27.187
> 
> 标签：python, gtk, bitwise-operators, gdk

我想`POINTER_MOTION_MASK`从我的窗口事件中删除。我试过了：

```
win.set_events(win.get_events() & ~Gdk.EventMask.POINTER_MOTION_MASK) 
```

但是，我收到此错误：

```
TypeError: Expected a Gdk.EventMask, but got int 
```

我应该如何从事件掩码中删除该位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:41:41.523

~ 运算符更改结果类型：

```
>>> type(Gdk.EventMask.POINTER_MOTION_MASK)
<class 'gi.repository.Gdk.GdkEventMask'>
>>> type(~Gdk.EventMask.POINTER_MOTION_MASK)
<type 'int'> 
```

所以你需要转换结果。我想这应该可行：

```
win.set_events(win.get_events() & (Gdk.EventMask)~Gdk.EventMask.POINTER_MOTION_MASK)) 
```

# web-applications - 是否可以在 JSTL 自定义标记 doTag() 中获取页面上下文？

> ID：14606763
> 
> 赞同：0
> 
> 时间：2013-01-30T14:49:43.787
> 
> 标签：web-applications, jstl, custom-tags

我只是一个初学者，正在开发我的第一个 Web 应用程序。我正在尝试支持多种语言，因此我在我的 JSTL 自定义标记逻辑的主体中使用基于包的消息。像这样：

```
ResourceBundle rs = ResourceBundle.getBundle("i18n.messages");

JspWriter out = getJspContext().getOut();
try {

out.print("<table><thead>");
        out.print("<th>"+ rs.getString("table.id") +"</th>");
        out.print("<th>"+ rs.getString("table.name") +"</th>");
        out.print("<th>"+ rs.getString("table.entry") +"</th>");
        out.print("<th>"+ rs.getString("table.diagnosis") +"</th>");
        out.print("<th>"+ rs.getString("table.doctor") +"</th>");
        out.print("<th>"+ rs.getString("table.release") +"</th>");
        out.print("</thead><tbody>"); 
```

问题是 - 我找不到任何可能为这个捆绑包设置一个语言环境而不声明一个多余的标签属性。有点：

```
<attribute>
  <name>locale</name>
  <required>true</required>
  <rtexprvalue>true</rtexprvalue>
  <type>java.lang.String</type>
</attribute> 
```

接着：

```
<table:patients locale="${pageContext.request.locale}" /> 
```

但它似乎工作不正确，总是传递相同的语言环境字符串（默认到我的浏览器？？？），与我在标题中设置的内容无关

```
<fmt:setLocale value="${param.locale}" scope="session"/> 
```

有没有什么聪明的方法可以在 doTag() 正文中获取会话上下文？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:32:10.813

JSTL 还提供了一个可能有用的 Java API，但您需要实现`Tag`接口（不是`SimpleTag`），因为您需要一种获取`PageContext`实例的方法。假设您正在扩展`TagSupport`，请尝试以下操作：

```
import javax.servlet.jsp.jstl.fmt.LocaleSupport;

    public int doEndTag() throws JspException {
        //...
        String tableId = LocaleSupport.getLocalizedMessage(this.pageContext, "table.id", "i18n.messages");
        //...
        return EVAL_PAGE;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-23T20:38:05.813

您可以使用 SimpleTagSupport 访问 JSTL 自定义标记实现中的请求、响应、会话和其他对象：

```
class MyCustomTag extends SimpleTagSupport {
    @Override
    public void doTag() throws JspException, IOException {
        final PageContext pageContext = (PageContext) getJspContext();
        final ServletRequest request = pageContext.getRequest();
        final ServletResponse response = pageContext.getResponse();
        final HttpSession session = pageContext.getSession();
    }
} 
```

# oauth - 使用 oauth 2.0 访问 Gmail 邮件

> ID：14606766
> 
> 赞同：-2
> 
> 时间：2013-01-30T14:49:46.170
> 
> 标签：oauth

> **可能重复：**
> [获取对 GMail 的 OAuth 访问权限？](https://stackoverflow.com/questions/14107563/get-oauth-access-to-gmail)

我想创建一个可以使用 google oauth 2.0 访问其他人的 gmail 邮件的应用程序，这是否可行，或者我应该使用任何其他的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:27:50.927

Yes, according to this [article](http://techcrunch.com/2012/09/17/google-oauth-2-0-for-gmail-and-talk/) and this [blog post](http://googledevelopers.blogspot.se/2012/09/adding-oauth-20-support-for-imapsmtp.html), as of September 2012 you can use OAuth 2.0 to access Gmail over IMAP/SMTP and XMPP.

# vb.net - 在此上下文中无法访问“System.Delegate._methodPtr”，因为它是“朋友”

> ID：14606767
> 
> 赞同：0
> 
> 时间：2013-01-30T14:49:46.793
> 
> 标签：vb.net

尝试访问委托对象的 methodptr 属性时，出现错误：

```
"System.Delegate._methodPtr' is not accessible in this context because it is 'Friend' 
```

，是否有某种方法可以访问该值并将其分配给变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:59:26.827

> 是否有某种方法可以访问该值并将其分配给变量？

您可以使用[反射](http://msdn.microsoft.com/en-us/library/f7ykdhsy.aspx)¹来检索该值。但是，您可能不想这样做：这个值是`Friend`有原因的。这是一个实现细节，作为框架的使用者，您无权直接访问它：它可能会工作，也可能会突然中断（例如，当 Microsoft 分发库的更新时）。您的代码也不适用于其他 .NET 实现，例如 Mono。

特别是，[此成员未在 MSDN 中记录，](http://msdn.microsoft.com/en-us/library/system.delegate.aspx)因此不能依赖其存在或行为。

* * *

¹以下应该可以解决问题：

```
Dim delegateType = yourDelegateObject.GetType()
Dim field = delegateType.GetField("_methodPtr", _
        BindingFlags.Instance Or BindingFlags.NonPublic)
Dim methodPtr = DirectCast(field.GetValue(yourDelegateObject), IntPtr) 
```

未经测试，因为我只有 Mono 并且（如上所述）它无论如何都不会在这里工作。

# c# - 在 Visual C# Express 中使用多个解决方案的良好实践

> ID：14606770
> 
> 赞同：7
> 
> 时间：2013-01-30T14:49:54.200
> 
> 标签：c#, build-automation, visual-c#-express-2010

**背景**：我的团队由 3 名相当缺乏经验的开发人员组成。我们正在为公司开发内部软件。目前，我们有许多较小且独立的解决方案。其中许多是相互依存的。目前，这些依赖是通过引用相应发布文件夹中的输出 dll 来实现的。通过手动重建相关解决方案来推送更新。

**示例：** 解决方案 A 使用解决方案 B 的功能。建立连接时解决方案 A 引用 ...\Release\B.dll 。对 B 的更改通过构建解决方案 B、然后构建解决方案 A 等来传播。

这之前工作得很好，但现在我们正在从手动（头脑麻木）“版本控制系统”（folder1，folder2，folder2New ...）转移到使用正确的（git）。

似乎不建议对 .dll 进行版本控制。这意味着每次有人想要构建新版本的 A 时，他还需要构建 B（可能还有 5 个其他解决方案）才能拥有最新版本的 B。

我认为必须有更好的方法来做到这一点。我一直在考虑将相关解决方案组合成一个主解决方案，但我不知道如何在 Visual C# Express（我们正在使用）中做到这一点。

**所以最后的问题是：**

1.  是否有一个可以构建一切的主解决方案？- 从 MSDN 看来是这样，但我不知道如何在 Visual C# Express 2008 中执行此操作，这让我

2.  这在 Visual C# Express 中是否可行？如果没有，有什么好的方法可以解决这个问题？

**编辑**感谢大家在下面的好建议。这是我最终做的总结。

简而言之，问题的答案是：“是”和“有点，但大多是”。我实现如下：为了了解依赖关系，我按照下面的建议进行操作，并绘制了二进制产品的映射，箭头从 dll 或 exe 的名称指向其所有依赖项。

对于每个*项目*，我打开了其对应的*解决方案*（因为一开始有*一个*解决方案 pr 项目）。然后，我在图中显示的树结构中添加了每个依赖项的项目文件（通过右键单击解决方案资源管理器中的解决方案），因此还包括依赖项的依赖项等。然后我删除了旧的引用（直接指向 .dll）并添加了对项目的引用。

重要的结果是：

*   当一个项目的解决方案被构建时，它的所有依赖项都是用它构建的，所以在部署时，你知道所有的构建产品都是自动的最新版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T15:01:06.533

我将创建一个新的解决方案并将所有相互关联的项目添加到它。您可以通过将每个原始解决方案中的项目放在新解决方案中的不同解决方案文件夹中来对它们进行分组。这样，当您构建一个项目时，它所依赖的所有项目也将被构建。这也意味着您的所有项目都将使用相同的配置（即发布或调试）构建。这意味着您的*所有*项目都可以在 Debug 中构建，而不仅仅是依赖关系树中的顶部项目，而它下面的所有项目都是发布程序集。使调试更容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T16:36:47.283

我有 Visual C# Express 2010，当我创建一个新项目时，它会自动创建一个默认解决方案。如果它是可见的，那么您可以右键单击解决方案并选择添加>现有项目。

如果解决方案不可见，（我似乎记得 C# Express 2005/8 中的这个问题），那么您可以通过 File>Add>Existing Project 添加现有项目。现在应该可以看到解决方案。

在操作方面，我通常做的是：

必须一起构建的所有东西都应该在一个解决方案中，并且这些应该是项目而不是 DLL。我尝试[按照 Joel List](http://www.joelonsoftware.com/articles/fog0000000043.html)生活，您应该能够在其中一步构建您的项目。如果它是一个可部署的单元，那么应该有一个解决方案。我的所有项目都在部署之前构建在构建服务器上，因此所有项目都应该在需要构建的解决方案中。

有时为了调试方便，有些人会把 WCF 服务项目和客户端放在同一个项目中，但这取决于你是否要独立部署客户端和服务器。通常对于较大的项目，我将它们分开。

最后有一个例外。我们有一个供不同团队使用的中央公共库。如果它包含在不同的解决方案中，并且一个团队改变了某些东西，我们最终会破坏另一个团队的构建。在这种情况下，我们创建一个包含所有库项目的单一解决方案。这些被构建到我们存储版本的 DLL 中。我们将这些视为其他解决方案可以使用的框架。例如，团队 A 使用 CommonLibrary 1.1，团队 B 使用 CommonLibrary 1.2。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T15:29:09.850

您需要将解决方案视为“项目分组”——这些项目是实际“构建”的，而不是“解决方案”（嗯，这并不*完全*正确，解决方案变成了引用包含的“元项目”项目，但它足够接近真相）

如果解决方案之间存在相互依赖关系，我建议在大白板上绘制所有项目，然后绘制表示项目之间依赖关系的箭头。完成此操作后，您将一眼就能看出适当的“项目分组”是什么意思。这些成为您的解决方案文件。

例如，如果您有项目 A、B、...、F，其中：

*   A 取决于 B
*   B 取决于 C
*   D 取决于 C
*   E 取决于 F

一种可能的拆分方式是项目 A、B、C、D 的解决方案 1 和项目 E、F 的解决方案 2。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-30T15:03:36.593

我会想出一个公共区域来推送所有 dll。我的公司使用“R”驱动器，它只是一个本地（不是网络，所以没有人可以触摸另一个人的文件夹）映射文件夹，每个人都有。每个解决方案都将以此为基础。右键单击一个项目，属性->构建并更改输出。或者您可以添加一个构建后命令以将 dll 推送到那里。之后，让您的所有项目都引用此位置。

一旦完成并且一切都指向同一个地方，您甚至可以将不同的项目组合添加到不同的解决方案中。如果开发人员只想要 ui 项目，他们可以打开一个特殊的“ui”解决方案，它是整体的一个子集。

这是我在项目属性->构建事件中使用的构建后事件

```
rem when building on local workstation copy dll to local R:\
if '$(BuildingInsideVisualStudio)' (
    xcopy $(TargetDir)$(TargetName).* R:\Extranet\$(TargetName)\1.0\  /Y
)
rem if "Enterprise" build then copy dll to Corp R:\ drive and to Build Machine R:\
if '$(Reason)' == 'Manual' (
    xcopy $(TargetDir)$(TargetName).* \\folder\$(TargetName)\1.0\ /Y
    xcopy $(TargetDir)$(TargetName).* R:\Extranet\$(TargetName)\1.0\ /Y
) 
```

# android - 如何获取最后一张照片 Uri

> ID：14606773
> 
> 赞同：2
> 
> 时间：2013-01-30T14:49:59.293
> 
> 标签：android, path, uri, android-camera, android-edittext

*   ***我正在尝试使用 android 相机意图拍摄一张照片，并获取这张照片的位置来编辑文本以供将来用于上传它。如何将最后拍摄的照片 Uri 放入我的编辑文本以供将来使用？***

**拍照的打开意图：**

```
Intent camera_intent = new Intent(

android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

startActivityForResult(camera_intent, ACTIVITY_CAMERA); 
```

**获取结果的活动：**

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if ((resultCode == RESULT_OK) && (requestCode == ACTIVITY_CAMERA)) {
            Bitmap photo = (Bitmap) data.getExtras().get("data");
            my_image.setImageBitmap(photo);
            data.putExtra("Camera", true);
        } 
```

# mysql - 在现有数据库上将 Mysql 5.1 升级到 5.5

> ID：14606775
> 
> 赞同：1
> 
> 时间：2013-01-30T14:50:00.943
> 
> 标签：mysql, mysql-5.5, mysql-5.1

我需要用现有数据库将mYsql 5.1升级到5.5。当我在其他站点搜索时，我发现我们需要导出现有数据库的完整转储，升级后我们需要再次导入完整转储。现有数据库大小为超过 1 TB。如果我们尝试导出这个的转储，将需要更多时间。我们如何在不导出现有数据库的转储的情况下升级 mysql 5.5？

# scroll - 使用 jScrollPane 无限滚动

> ID：14606777
> 
> 赞同：0
> 
> 时间：2013-01-30T14:50:01.067
> 
> 标签：scroll, jscrollpane, infinite, jquery-jscrollpane

我想实现一个类似于 Facebook 的控件，用于将分页内容自动加载到具有自定义样式滚动条的 DIV 中。对于自定义滚动条，我使用 jScrollPane 插件，但无法弄清楚当滚动条到达底部时如何侦听事件以将额外的 html 附加到此 DIV。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:38:47.653

侦听`jsp-scroll-y`事件并检查事件处理程序中传递的`isAtBottom`标志。详细信息和演示[在这里](http://jscrollpane.kelvinluck.com/events.html)。

# jquery - jquery tablesorter - 用空格排序数字

> ID：14606778
> 
> 赞同：2
> 
> 时间：2013-01-30T14:50:02.193
> 
> 标签：jquery, tablesorter

我对 jQuery tablesorter 和 12 345 678,91 之类的数字有疑问

```
$(document).ready(function() {
    $.tablesorter.addParser({ 
        id: 'thousands',
        is: function(s) { 
            return false; 
        }, 
        format: function(s) {
            return s.replace(' ','').replace(/,/g,'');
        }, 
        type: 'numeric' 
    }); 

    $("#tablesorter").tablesorter({
    headers: { 
                3: { sorter:'thousands' }, 
                4: { sorter:'thousands' }, 
                5: { sorter:'thousands' } 
            }
    });
}); 
```

输出过滤器：

```
-1 295,76
-331,2
-330,01
-290
0
3 986 495,06
1 942 503,09
0
0 
```

当我替换它时： s.replace(' ','').replace(/,/g,''); 通过这个： s.replace(new RegExp(/[^0-9/A-Za-z. ]/g),""); ……甚至比以前更糟。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:19:28.100

解析器并没有替换所有的空格；using`replace(' ','')`只会替换第一个空格。此外，逗号应替换为小数点，因为它表示分数。所以，试试这个（[演示](http://jsfiddle.net/Mottie/eY8uH/367/)）：

```
$.tablesorter.addParser({
    id: 'thousands',
    is: function (s) {
        return false;
    },
    format: function (s) {
        return s.replace(/\s+/g, '').replace(/,/g, '.');
    },
    type: 'numeric'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:12:19.143

Internet Explorer 将空格转换为`&nbsp;`. 对我来说是这样的：

```
return s.replace(/&nbsp;/g,'').replace(/\s+/g, '') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:31:40.770

@Triple_6：

在实施解决方案之前了解含义：我的猜测是您不需要空格或 ，或任何纯数字。

下面的表达式表示用“”替换除数字、字母、小数点和空格以外的所有内容。

```
s.replace(new RegExp(/[^0-9/A-Za-z. ]/g),""); 
```

以上是我建议的。

**解决方案：**

如果您不想要空格，则将其从表达式中删除。

```
s.replace(new RegExp(/[^0-9/A-Za-z.]/g),""); 
```

如果你想要这个标志，那么包括那个

```
s.replace(new RegExp(/[^0-9/A-Za-z.+-]/g),""); 
```

**Regex 表达式的含义：** new RegExp(/[Except this list]/g)," replace all with this");

工作jsfiddle：http: [//jsfiddle.net/rK5s4/1/](http://jsfiddle.net/rK5s4/1/)

下次请务必提及您希望删除多次出现的内容。从你的问题中不清楚。

还可以在合并之前尝试将它们通过 jsfiddle。

# mysql - 查询多个计数值

> ID：14606779
> 
> 赞同：5
> 
> 时间：2013-01-30T14:50:02.870
> 
> 标签：mysql, sql, select, count

```
SELECT  cm.commenter_id,
        cm.comment,
        m.id,
        (
            SELECT COUNT(*) AS r_count
            FROM comments
            GROUP BY comments.commenter_id
        ) AS count,
        m.display_name
FROM    comments cm
        INNER JOIN members m
            ON cm.commenter_id = m.id 
```

从这个查询中，我想获得评论数最多的人的 display_name。任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:54:26.233

```
SELECT  m.id, m.display_name, COUNT(*) totalComments
FROM    comments cm
        INNER JOIN members m
            ON cm.commenter_id = m.id
GROUP   BY m.id, m.display_name
HAVING  COUNT(*) =
    (
        SELECT  COUNT(*) totalCount
        FROM    Comments
        GROUP   BY  commenter_id
        ORDER   BY totalCount DESC
        LIMIT 1
    ) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/a1666/1)
*   [SQLFiddle 演示（*有重复*）](http://www.sqlfiddle.com/#!2/36025/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:36:47.853

我认为最简单的方法就是对查询进行排序并取第一行：

```
SELECT  cm.commenter_id,
        cm.comment,
        m.id,
        (
            SELECT COUNT(*) AS r_count
            FROM comments
            GROUP BY comments.commenter_id
        ) AS count,
        m.display_name
FROM    comments cm
        INNER JOIN members m
            ON cm.commenter_id = m.id
order by count desc
limit 1 
```

# python - 使用 lxml 访问有和没有命名空间的元素

> ID：14606781
> 
> 赞同：2
> 
> 时间：2013-01-30T14:50:07.467
> 
> 标签：python, lxml

有没有办法在使用 lxml 的带有和不带有名称空间的文档中同时搜索相同的元素？例如，我想获取元素的所有出现，`identifier`而不管它是否与特定的命名空间相关联。我目前只能按如下方式单独访问它们。

**代码：**

```
from lxml import etree

xmlfile = etree.parse('xmlfile.xml')
root = xmlfile.getroot()

for l in root.iter('identifier'):
   print l.text

for l in root.iter('{http://www.openarchives.org/OAI/2.0/provenance}identifier'):
   print l.text 
```

**文件：xmlfile.xml**

```
<?xml version="1.0"?>
<record>
  <header>
    <identifier>identifier1</identifier>
    <datestamp>datastamp1</datestamp>
    <setSpec>setspec1</setSpec>
  </header>
  <metadata>
    <oai_dc:dc xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/oai_dc/ http://www.openarchives.org/OAI/2.0/oai_dc.xsd">
      <dc:title>title1</dc:title>
      <dc:title>title2</dc:title>
      <dc:creator>creator1</dc:creator>
      <dc:subject>subject1</dc:subject>
      <dc:subject>subject2</dc:subject>
    </oai_dc:dc>
  </metadata>
  <about>
    <provenance  xmlns="http://www.openarchives.org/OAI/2.0/provenance" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/provenance http://www.openarchives.org/OAI/2.0/provenance.xsd">
      <originDescription altered="false" harvestDate="2011-08-11T03:47:51Z">
        <baseURL>baseURL1</baseURL>
        <identifier>identifier3</identifier>
        <datestamp>datestamp2</datestamp>
        <metadataNamespace>xxxxx</metadataNamespace>
        <originDescription altered="false" harvestDate="2010-10-10T06:15:53Z">
          <baseURL>xxxxx</baseURL>
          <identifier>identifier4</identifier>
          <datestamp>2010-04-27T01:10:31Z</datestamp>
          <metadataNamespace>xxxxx</metadataNamespace>
        </originDescription>
      </originDescription>
    </provenance>
  </about>
</record> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:09:07.743

您可以使用 XPath 来解决此类问题：

```
from lxml import etree

xmlfile = etree.parse('xmlfile.xml')
identifier_nodes = xmlfile.xpath("//*[local-name() = 'identifier']") 
```

# c# - 使用 Dapper Extensions 时导航属性

> ID：14606783
> 
> 赞同：1
> 
> 时间：2013-01-30T14:50:15.793
> 
> 标签：c#, dapper

我使用 DapperExtensions 库进行简单的 CRUD 操作。当我向模型添加导航属性时，我收到一条错误消息，指出该列不在数据库中。你能以任何方式改变它，让 Dapper Extensions 忽略这个属性吗？

我的模型示例

```
public class Order : EntityBase
{
    public int OrderId { get; set; }
    public int MarketId { get; set; }
    public int ModelId { get; set; }
    public int ContactId { get; set; }
    public string Project { get; set; }
    public decimal Undertaking { get; set; }

    public virtual Model Model { get; set; }
    public virtual Contact Contact { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:16:11.457

使用属性上方的 Write 属性

```
[Write(false)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-06T14:12:37.797

1.  添加 dapperextensions 的包
2.  自动地图（）；只要您具有相同的字段名称，就会映射所有其他属性。

```
public class CustomMapper : DapperExtensions.Mapper.ClassMapper<Photo>
    {
        public CustomMapper()
        {
           Table("TableName if diffrent than the Model calss name");
           Map(f => f.SomePropertyIDontCareAbout).Ignore();
           AutoMap();
        }
    } 
```

# perl - 如何在 mod_perl 下查看所有警告

> ID：14606784
> 
> 赞同：2
> 
> 时间：2013-01-30T14:50:18.137
> 
> 标签：perl, logging, apache2, warnings, mod-perl2

在 mod_perl 下运行脚本时，如何确保看到所有 Perl 的警告和错误消息？（Apache/2.2.16 (Debian) [...] mod_perl/2.0.4 Perl/v5.10.1）

我觉得我做的一切都正确：我在 httpd.conf 中有“PerlWarn On”，我有

```
use strict;
use warnings FATAL => 'all'; 
```

在我所有的 Perl 文件中，当我自己使用 warn() 时，我在 /var/log/apache2/error.log 中看到了结果。

但是很多消息仍然没有收到我的信息。例如，“无法定位对象方法”永远不会出现在日志中。剧本只是死了，我必须自己弄清楚在哪里以及为什么。

有什么我可能忽略的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:12:02.833

该声明

```
use warnings FATAL => 'all'; 
```

是一个[词法警告 pragma](http://perldoc.perl.org/perllexwarn.html)。它仅适用于当前块（在这种情况下是您的脚本），而不适用于您的脚本调用的模块或其他文件。

考虑[`Carp::Always`](http://search.cpan.org/~ferreira/Carp-Always-0.12/lib/Carp/Always.pm)在所有代码中获取这种行为以进行调试。

# android - 屏幕锁定+方向更改=黑屏

> ID：14606785
> 
> 赞同：1
> 
> 时间：2013-01-30T14:50:18.403
> 
> 标签：android, opengl-es, glsurfaceview

我正在使用 GlSurfaceView 来绘制我的游戏。初始化发生在 java 端，使用本机 c++。

现在我遇到了一个问题：

当用户启动我的游戏，锁定屏幕（通过按电源按钮关闭屏幕），然后将设备从横向旋转到纵向，解锁屏幕（通过按电源按钮然后解锁触摸屏），我的游戏反复是留下空白的黑屏。

我的游戏本身可以很好地处理旋转（屏幕锁定为横向模式，`android:screenOrientation="landscape"`）

锁屏/睡眠模式本身证明没有问题。

但是两者的结合不断导致黑屏错误的发生。我认为，Logcat 没有说任何有用的东西。

# gstreamer - 不显示 GST_LOG_OBJECT 跟踪

> ID：14606787
> 
> 赞同：2
> 
> 时间：2013-01-30T14:50:21.690
> 
> 标签：gstreamer

我正在编写我的第一个 gstreamer 插件，但我无法显示我的调试跟踪。

我使用：gst-template-0.10/gst-plugin/tools/make_elem 来生成我自定义的插件模板。

我的第一个动作是在 gst_demux_hbb_tv_chain 中添加一个宏 GST_LOG_OBJECT 来获取缓冲区的大小。

但不显示跟踪。

1.  我阅读了有关为 gstreamer 开发插件的文档，其中有一个[调试部分](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/section-checklist-debug.html)，我在模板中得到的内容完全相同。

2.  我以这种方式启动了我的管道： GST_DEBUG=demuxhbbtv=5 gst-launch fakesrc ！**demuxhbbtv**静音=真！假水槽

(GST_DEBUG_CATEGORY_INIT (gst_demux_hbb_tv_debug, " **demuxhbbtv** ", 0, "模板 demuxhbbtv");)

1.  我尝试放置一个 g_print 并且它可以工作。

我错过了什么？

这是我的代码的一部分：

```
GST_DEBUG_CATEGORY_STATIC (gst_demux_hbb_tv_debug);
#define GST_CAT_DEFAULT gst_demux_hbb_tv_debug

static gboolean demuxhbbtv_init (GstPlugin * demuxhbbtv)
{
 ...
   GST_DEBUG_CATEGORY_INIT (gst_demux_hbb_tv_debug, "demuxhbbtv", 0, "Template demuxhbbtv");
 ...
}

static GstFlowReturn
gst_demux_hbb_tv_chain (GstPad * pad, GstBuffer * buf)
{
  ...
demuxHbbTv = GST_DEMUXHBBTV (gst_pad_get_parent (pad));
GST_LOG_OBJECT (demuxHbbTv, "!!!!!!!!!!!!!!!!!!!!!!!!!!==> buffer size= %d ....\n", GST_BUFFER_SIZE(buf) );
 ...
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:14:13.883

它是 GST_DEBUG=demuxhbbtv:5 （将第二个 = 替换为 :)

# ruby-on-rails - 如何测试表单重置按钮

> ID：14606792
> 
> 赞同：0
> 
> 时间：2013-01-30T14:50:44.243
> 
> 标签：ruby-on-rails, capybara, reset

谷歌搜索并没有找到有效的解决方案...使用 Rails 3.2.11，RSpec 2.12.2 Capybara 2.0.2 我正在尝试测试表单上的“重置按钮”（使用浏览器测试时效果很好）

我试过这段代码

```
scenario "Fill form then reset it" do
  visit contact_path
  fill_in 'message_name', :with => 'abc'
  fill_in 'message_email', :with => 'abc'
  fill_in 'message_subject', :with => 'abc'

  click_on 'Reset form'

  expect(page).to find_field('message_name').value.should == ''
end 
```

测试失败并出现此错误

```
 expected: ""
 got: "abc"
(compared using ==) 
```

似乎这些字段根本没有重置..（但在浏览器中它们是）

我错过了什么？这个版本的 Capybara 或 Rspec 有什么新东西吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:36:48.687

我的错，

这种类型的功能/场景需要js驱动。

硒包含在水豚宝石中，但我忘记在我的功能中激活它。为了让它工作，我只需要换线

```
scenario "Fill form then reset it" do 
```

对这个

```
scenario "Fill form then reset it", :js => true do 
```

根据文档[https://github.com/jnicklas/capybara#using-capybara-with-rspec](https://github.com/jnicklas/capybara#using-capybara-with-rspec)。现在一切正常...

希望它可以帮助别人......干杯

# sql - pagelinks 表是否包含重定向？

> ID：14606797
> 
> 赞同：1
> 
> 时间：2013-01-30T14:50:59.260
> 
> 标签：sql, database, mediawiki

我想计算每个 MediaWiki 页面有多少入站链接。我想知道是否需要考虑`pagelinks`表中的重定向。

MediaWiki 数据库有`pagelinks`包含所有链接的表。该表具有三个属性`'pl_from'`，`'pl_namespace'`和`'pl_title'`。我想`pagelinks.sql`从 MediaWiki 数据库转储文件中提取链接。

你知道是否`'pl_from'`可以有重定向页面的 id 并且`'pl_title'`可以有重定向标题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:33:40.683

出于 的目的`pagelinks`，重定向被视为普通页面。

因此，例如，如果您有一个包含以下代码的重定向页面：

```
#REDIRECT [[Some page]]

[[Another link]] 
```

然后这个页面将有两个条目`pl_from`：一个 for `Some page`，另一个 for `Another link`。这意味着重定向将始终为其目标页面保留一行，但它也可以包含其他行。

并`pl_title`包含基于页面代码的链接页面的标题。因此，如果有一个页面带有指向重定向的链接，则该重定向的标题将显示为`pl_title`.

# python - "\r" 在下面的脚本中做了什么？

> ID：14606799
> 
> 赞同：30
> 
> 时间：2013-01-30T14:51:05.623
> 
> 标签：python, telnet

我正在使用以下脚本使用 Telnet 重新启动路由器：

```
#!/usr/bin/env python

import os
import telnetlib
from time import sleep

host = "192.168.1.1"
user = "USER"
password = "PASSWORD"
cmd = "system restart"

tn = telnetlib.Telnet(host)
sleep(1)

tn.read_until("Login: ")
tn.write(user + "\n\r")
sleep(1)

tn.read_until("Password: ")
tn.write(password + "\n\r")
sleep(1)

tn.write(cmd + "\n\r") 
```

我不知道为什么，但删除`"\r"`会破坏此代码。那么`"\r"`这个脚本做了什么，我`"\r"`一般什么时候使用？

注意：我知道“回车”，但仍然无法弄清楚我的脚本中使用了它。我在 Linux 中运行这个脚本。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-30T14:54:37.603

该`'\r'`字符是回车符，并且在网络虚拟终端会话中换行符都需要回车符-换行符对。

* * *

从[旧的 telnet 规范（RFC 854）](https://www.rfc-editor.org/rfc/rfc854)（第 11 页）：

> 定义的序列“CR LF”将导致 NVT 位于下一个打印行的左边距（例如，序列“LF CR”）。

但是，从[最新规范（RFC5198）](https://www.rfc-editor.org/rfc/rfc5198)（第 13 页）：

> 1.  ...
>     
>     
> 2.  在 Net-ASCII 中，CR 不得出现，除非紧跟在 NUL 或 LF 之后，后者 (CR LF) 指定“换行”功能。今天，如上所述，CR 通常只应在 LF 之后出现。因为页面布局以其他方式更好地完成，因为 NUL 在某些编程语言中有特殊的解释，为了避免其他类型的混淆，最好避免使用 CR NUL，如上所述。
>     
>     
> 3.  LF CR 不应该出现，除非是多个 CR LF 序列的副作用（例如，CR LF CR LF）。

所以 Telnet 中的换行符应该始终是`'\r\n'`，但大多数实现要么没有更新，要么保留旧`'\n\r'`的以向后兼容。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-30T14:57:28.557

`'\r'`表示“回车”，类似于`'\n'`“换行”或更常见的“换行”

在打字机的旧时代，您必须将写字的托架移回行首，然后将行向下移动才能写到下一行。

在现代计算机时代，出于多种原因，我们仍然拥有此功能。但大多数情况下，我们只使用`'\n'`并自动假设我们想从行首开始写作，否则就没有多大意义。

但是，有时我们想使用 JUST the `'\r'`，那就是如果我想在输出中写一些东西，而不是下一行写其他东西，我想在我写的东西上写一些东西已经写过，这是 linux 或 windows 命令行中有多少程序能够拥有在同一行上更改的“进度”信息。

现在大多数系统只使用`'\n'`来表示换行符。但有些系统同时使用两者。

您可以在其他一些答案中看到这样的示例，但最常见的是：

*   窗口结束行`'\r\n'`
*   mac 以`'\r'`
*   Unix/Linux 使用`'\n'`

并且其他一些程序也有它们的特定用途。

[有关这些角色历史的](http://en.wikipedia.org/wiki/Newline#History)更多信息

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-30T14:52:28.927

`\r`是 ASCII[回车](http://en.wikipedia.org/wiki/Carriage_return)(CR) 字符。

不同的操作系统使用不同的换行符约定。最常见的是：

*   CR+LF ( `\r\n`);
*   LF ( `\n`);
*   CR ( `\r`)。

( `\n\r`LF+CR) 看起来非常规。

**编辑：**我对[Telnet RFC](https://www.rfc-editor.org/rfc/rfc854)的阅读表明：

1.  CR+LF 是 telnet 协议使用的标准换行符序列。
2.  LF+CR 是可接受的替代品：

> 定义的序列“CR LF”将导致 NVT 位于下一个打印行的左边距（例如，序列“LF CR”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:55:00.207

`\r\n`实际上，这与通常的 Windows / Unix vs`\n`问题无关。TELNET 协议本身定义`\r\n`为行尾序列，独立于操作系统。请参阅[RFC854](https://www.rfc-editor.org/rfc/rfc854)。

# java - 多行正则表达式匹配问题

> ID：14606800
> 
> 赞同：2
> 
> 时间：2013-01-30T14:51:05.647
> 
> 标签：java, regex

我有以下字符串，我试图通过正则表达式匹配：

```
;IF TEST_DATE <= 200112 THEN E>=90 AND S>=90
 OR P = "25" ENDIF
IF TEST_DATE >= 200201 AND TEST_DATE < 200407 THEN E>=89
AND S>=90 OR P = "25" ENDIF 
```

我正在使用以下正则表达式尝试从分号（旨在成为注释）到第一个 ENDIF 进行匹配：

```
;\s*IF (\d|\D)+ ENDIF 
```

不幸的是，这种模式一直匹配到第二个 ENDIF。我已经尝试了使用 Java Pattern.DOTALL 以及 (?s) 标志的各种解决方案，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:52:45.673

您正在使用`greedy`量词，因此您的模式`(\d|\D)`匹配所有内容，直到找到最后一个`ENDIF`.

`reluctant quantifier - +?`如果您希望您的正则表达式首先停止匹配，则需要使用`ENDIF`：-

```
;\s*IF (\d|\D)+? ENDIF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:57:07.970

使用非贪婪限定符。

```
;\s*IF (\d|\D)*? ENDIF 
```

# php - php获取2个数组之间的匹配键

> ID：14606803
> 
> 赞同：1
> 
> 时间：2013-01-30T14:51:11.297
> 
> 标签：php, arrays, array-intersect, array-key

在两个关联数组之间获取匹配键的最佳方法是什么：

```
Array (
    [array_1] => Array (
        [abc] => 111
        [def] => 222
    ),
    [array_2] => Array (
        [ghi] => 995
        [jkl] => 996
        [mno] => 997
    )
) 
```

和

```
Array (
    [array_1] => Array (
        [123] => 111
        [345] => 222
    ),
    [array_2] => Array (
        [123] => 995
        [432] => 996
        [345] => 997
    ),
    [array_3] => Array (
        [456] => 995
        [345] => 996
        [234] => 997
    )
) 
```

我希望返回一个仅包含值的数组：`array_1`和`array_2`.

`array_intersect`在这里不起作用，array_intersect_key 也不会，因为它会返回子数组

我想要这个结果：

```
array('array_1','array_2') 
```

因为这些是匹配的键

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:11:09.087

```
$theListOfKeysWotIWant = array_keys(
    array_intersect_key(
        $array1,
        $array2
    )
); 
```

# xcode - git - 尝试合并，但在 xcodeproj/project.pbxproj 中发生冲突

> ID：14606808
> 
> 赞同：1
> 
> 时间：2013-01-30T14:51:31.257
> 
> 标签：xcode, git

当我现在执行 git status 时，我将其作为结果的一部分

```
#   both modified:      BusinessPlan.xcodeproj/project.pbxproj 
```

这是一个重要的文件，因为 Apple 的 xCode 使用它来打开整个项目。我什至不确定它应该在 git 中。应该是？

我该如何解决这个问题？不应该提交这个文件吗？我想我可能已经从其他开发人员那里得到了更改。我该如何清理它以及长期使用这种文件的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:14:12.473

是的，恐怕你必须合并这个文件。事实上，在大多数情况下，它可以正确且自动地完成。你不需要自己合并它。

ps：关于iOS项目使用git的策略，有很多讨论。谷歌诸如[iOS gitignore 之](https://www.google.com/#hl=fr&safe=off&tbo=d&sclient=psy-ab&q=ios+gitignore&oq=ios+git&gs_l=hp.3.3.0j0i30l3.1033.2348.0.5965.7.7.0.0.0.0.194.764.4j3.7.0...0.0...1c.1.ZGF0JSdFgNY&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.41642243,d.d2k&fp=215dc585e082e8a3&biw=1294&bih=738)类的东西，比你可以找到[link1](https://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects)或[link2](https://stackoverflow.com/questions/8026429/should-i-git-ignore-xcodeproject-project-pbxproj-file)等...

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-30T15:12:00.980

为了让 Git 和 Xcode 很好地协同工作，你需要告诉 Git 忽略 Xcode 使用的一些无关文件。

`.gitignore`在项目的根文件夹中创建一个名为的文件，并包含以下文本：

```
# files created by Xcode 3 or older
*.pbxuser
*.mode1
*.mode1v3
*.mode2v3
*.perspectivev3
*.xcclassmodel/
# files created by Xcode 4
xcuserdata/
# build products
*.build/
build/
DerivedData/
# Misc
.svn
.DS_Store 
```

这将指示 Git 忽略所有会导致问题的文件。

[取自使用 XCode 4 设置 Git](http://support.beanstalkapp.com/customer/portal/articles/95580-setting-up-git-with-xcode-4)的 Beanstalk 页面。

# php - 如何让这个 Joomla 模块正常工作？

> ID：14606812
> 
> 赞同：0
> 
> 时间：2013-01-30T14:51:36.590
> 
> 标签：php, joomla, module

我不得不将网站移动/复制到不同的 TLD。我唯一没有让它工作的是主页上用来显示最新消息的模块。

这就是该网站的外观：[http](http://www.sednagroup.it/) ://www.sednagroup.it/ ... 这就是它的外观：[http ://www.sednagroup.ro/](http://www.sednagroup.ro/)

带有图像和摘录的侧边栏。我无法让它工作。如果有帮助，这是模块：

```
<?php // no direct access
defined('_JEXEC') or die('Restricted access'); ?>
<ul class="latestnews<?php echo $params->get('moduleclass_sfx'); ?>">
<?php foreach ($list as $item) :  ?>
<li class="latestnews<?php echo $params->get('moduleclass_sfx'); ?>">
    <a href="<?php echo $item->link; ?>" class="latestnews<?php echo $params->get('moduleclass_sfx'); ?>">
        <?php echo $item->text; ?></a>
</li>
<?php endforeach; ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:19:17.873

你是如何移动或复制它的？

新站点`.ro`（1.5.x。（我假设是 1.5，因为你没有指定你的 Joomla! 版本）。

原始站点 ( `.it`) 正在显示其他内容，可能是“[阅读更多](http://docs.joomla.org/Splitting_an_Article_into_an_introduction_with_a_link_to_read_more)”之前的内容（如果存在）。

这可能意味着该模块的[模板模块覆盖](http://docs.joomla.org/Understanding_Output_Overrides#Module_Layout_Overrides)已创建或有人更改了核心模块文件（*顺便说一句坏主意*）。我会开始：

1.  `template/yourtemplate/`在目录中寻找覆盖文件
2.  如果您找不到覆盖以`mod_latestnews`将其`.it` `modules/mod_latestnews/`与同一目录进行比较`.ro`

最后，如果您确实发现核心文件已被黑客入侵，我可以建议您实际复制`mod_latestnews`并将其重命名为类似的名称，`mod_latestnews_extended`而不是在您的`.ro`站点中入侵核心。

# c++ - Visual Studio 中的 Boost 测试

> ID：14606815
> 
> 赞同：1
> 
> 时间：2013-01-30T14:51:44.997
> 
> 标签：c++, visual-studio-2010, boost-test

我正在尝试在 Visual Studio 2010 中编译简单的单元测试项目。我有一个 testrunner.cpp：

```
#define BOOST_TEST_DYN_LINK

#define BOOST_TEST_MODULE "BaumWelch Unit Tests"
#include <boost/test/unit_test.hpp> 
```

和exampletests.cpp

```
#include <boost/test/unit_test.hpp>

int add( int i, int j ) { return i+j; }

BOOST_AUTO_TEST_CASE( my_test )
{
  // seven ways to detect and report the same error:
  BOOST_CHECK( add( 2,2 ) == 4 );        // #1 continues on error
  BOOST_REQUIRE( add( 2,2 ) == 4 );      // #2 throws on error

  if( add( 2,2 ) != 4 )
     BOOST_ERROR( "Ouch..." );            // #3 continues on error

  if( add( 2,2 ) != 4 )
    BOOST_FAIL( "Ouch..." );             // #4 throws on error

  if( add( 2,2 ) != 4 ) throw "Ouch..."; // #5 throws on error

  BOOST_CHECK_MESSAGE( add( 2,2 ) == 4,  // #6 continues on error
    "add(..) result: " << add( 2,2 ) );
  BOOST_CHECK_EQUAL( add( 2,2 ), 4 );      // #7 continues on error
} 
```

此示例在 Linux 中运行良好，但此处无法编译：

```
1>------ Build started: Project: Test, Configuration: Release Win32 ------
1>Build started 30/01/2013 14:47:48.
1>InitializeBuildStatus:
1>  Touching "Release\Test.unsuccessfulbuild".
1>ClCompile:
1>  All outputs are up-to-date.
1>boost_unit_test_framework-vc100-mt-1_46_1.lib(boost_unit_test_framework-vc100-mt-1_46_1.dll) : error LNK2005: "class boost::unit_test::master_test_suite_t & __cdecl boost::unit_test::framework::master_test_suite(void)" (?master_test_suite@framework@unit_test@boost@@YAAAVmaster_test_suite_t@23@XZ) already defined in libboost_unit_test_framework-vc100-mt-1_46_1.lib(framework.obj)
1>MSVCRT.lib(crtexew.obj) : error LNK2001: unresolved external symbol _WinMain@16
1>C:\Users\ga1009\Documents\dev\Oasis\Release\Test.exe : fatal error LNK1120: 1 unresolved externals
1>
1>Build FAILED. 
```

我做错了什么，我该如何解决？

编辑：应用 Arne Mertz 的答案后，我得到：

```
1>------ Build started: Project: Test, Configuration: Release Win32 ------
1>Build started 30/01/2013 15:09:54.
1>InitializeBuildStatus:
1>  Touching "Release\Test.unsuccessfulbuild".
1>ClCompile:
1>  All outputs are up-to-date.
1>boost_unit_test_framework-vc100-mt-1_46_1.lib(boost_unit_test_framework-vc100-mt-1_46_1.dll) : error LNK2005: "class boost::unit_test::master_test_suite_t & __cdecl boost::unit_test::framework::master_test_suite(void)" (?master_test_suite@framework@unit_test@boost@@YAAAVmaster_test_suite_t@23@XZ) already defined in libboost_unit_test_framework-vc100-mt-1_46_1.lib(framework.obj)
1>C:\Users\ga1009\Documents\dev\Oasis\Release\Test.exe : fatal error LNK1169: one or more multiply defined symbols found
1>
1>Build FAILED. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:03:32.567

检查项目的链接器属性：有一个属性`System/SubSystem`应该设置为`/SUBSYSTEM:CONSOLE`.

**编辑：** 对于多重定义错误，您似乎有以下情况：在您的 testrunner.cpp 中，您定义`BOOST_TEST_DYN_LINK`了一个动态链接，`boost_unit_test_framework-vc100-mt-1_46_1.dll`其中包含 master_test_suite 函数的定义。在另一个 .cpp 中，您不定义该符号，以便一个静态链接到该符号，`boost_unit_test_framework-vc100-mt-1_46_1.lib`与 dll 一起给出两个定义。

解决方案：`#define`在包含标题之前在每个源中使用。

# php - 链接字符串的正则表达式，php

> ID：14606818
> 
> 赞同：-2
> 
> 时间：2013-01-30T14:52:07.513
> 
> 标签：php, preg-match

我试图为字符串做正则表达式，如：

```
/Foteliai-Svetaines-baldai/kaina/internetu/1947?pg=1&rodPo=36&rusiuoti=bv 
```

我试试这个：

```
if(preg_match('/^[a-zA-Z0-9+]./kaina/internetu/.[\d+]+$/', '/Foteliai-Svetaines-baldai/kaina/internetu/1947?pg=1&rodPo=36&rusiuoti=bv')){
die('ok');
} 
```

但它不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:00:20.357

正则表达式`\/[\w-]*\/kaina\/internetu\/\d*`将匹配字符串。

如果您想捕获字符串的一部分`Foteliai-Svetaines-baldai`或`1947`部分，请使用：

`\/([\w-]*)\/kaina\/internetu\/(\d*)`

使用`preg_match`您将获得一个数组（如果您选择查看这些值）：

```
Array
(
    [0] => /Foteliai-Svetaines-baldai/kaina/internetu/1947
    [1] => Foteliai-Svetaines-baldai
    [2] => 1947
) 
```

否则`preg_match`只会返回`1`成功，您的`die('ok')`将被执行。

# xslt - 如何使用 xsl 获取 xml 数据的平均值

> ID：14606819
> 
> 赞同：0
> 
> 时间：2013-01-30T14:52:07.363
> 
> 标签：xslt

我正在尝试获取以下内容的平均值

```
 <SectorWeightings Currency="xxx">
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="A B||16.324500000000" Date="8/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="C||16.744400000000" Date="7/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="C S||10.177400000000" Date="8/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="C S||8.8950000000000" Date="7/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="E||12.841600000000" Date="8/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="E||13.551700000000" Date="7/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="Fi S||14.157900000000" Date="8/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="Fi S||15.221200000000" Date="7/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="H Care||12.508900000000" Date="7/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="H Care||13.198200000000" Date="8/31/2011" />
 </SectorWeightings> 
```

以前 5 行数值为例并计算平均值。

这是改进的代码

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">

  <xsl:template match="/">
    <html>
      <body>
        <h2> zzzzzzzzz  </h2>

        <table style="width:50%;font-size:12px;" cellspacing="0" cellpadding="0">
          <tr style="width:50%; text-align:left;background-color:E6F1F9;">
            <th>    xxxxx   </th>
            <th>    yyyyy     </th>
          </tr>

          <xsl:apply-templates
            select="FundPricePerf/Group[@Name='xxxxx']/SubGroup[@Name='S']
                    /Fund[@FundCode='vv']/SectorWeightings
                    /SectorWeightingsEntry[@Type='Sector Name||Sector Weight (%)']">
            <xsl:sort select="substring-after('||', @Value)" data-type="number"
                      order="descending" />
          </xsl:apply-templates>
        </table>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="SectorWeightingsEntry">
   <xsl:if test="position() &lt;= 5">
    <tr>
      <td>
        <xsl:value-of select="format-number(substring-after(@Value, '||'), '#.#')"/>
      </td>
    </tr>
   </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

谁能帮我计算平均值？我需要继续上面的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:24:01.133

你可以使用`sum()`,就像`div`这样`count()`......

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common"
  xmlns:so="http://stackoverflow.com/questions/14606819"
  exclude-result-prefixes="xsl exsl so">
<xsl:output indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="/">
  <average>
    <xsl:variable name="weights">
      <xsl:apply-templates select="*/SectorWeightingsEntry/@Value" mode="extract-weight" />
    </xsl:variable> 
    <xsl:variable name="w" select="exsl:node-set($weights)/so:weight" />
    <xsl:value-of select="sum( $w) div count( $w)" />
  </average>
</xsl:template>

<xsl:template match="@Value" mode="extract-weight">
  <so:weight>
    <xsl:value-of select="substring-after(.,'||')" />
  </so:weight>
</xsl:template>

</xsl:stylesheet> 
```

这产生...

```
<average>13.362079999999997</average> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:25:08.940

请试一试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">

  <xsl:template match="/">
    <xsl:variable name="items"
            select="FundPricePerf/Group[@Name='xxxxx']/SubGroup[@Name='S']
                    /Fund[@FundCode='vv']/SectorWeightings
                    /SectorWeightingsEntry[@Type='Sector Name||Sector Weight (%)']" />
    <html>
      <body>
        <h2> zzzzzzzzz  </h2>

        <table style="width:50%;font-size:12px;" cellspacing="0" cellpadding="0">
          <tr style="width:50%; text-align:left;background-color:E6F1F9;">
            <th>    xxxxx   </th>
            <th>    yyyyy     </th>
          </tr>

          <xsl:apply-templates select="$items">
            <xsl:sort select="substring-after(@Value, '||')" data-type="number"
                      order="descending" />
          </xsl:apply-templates>
        </table>

        <xsl:call-template name="ShowAverage">
          <xsl:with-param name="items" select="$items" />
        </xsl:call-template>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="SectorWeightingsEntry">
    <xsl:if test="position() &lt;= 5">
      <tr>
        <td>
          <xsl:value-of select="format-number(substring-after(@Value, '||'), '#.#')"/>
        </td>
      </tr>
    </xsl:if>
  </xsl:template>

  <xsl:template name="ShowAverage">
    <xsl:param name="items" />

    <xsl:variable name="sumTopItems">
      <xsl:choose>
        <xsl:when test="$items">
          <xsl:apply-templates select="$items" mode="sumItems">
            <xsl:with-param name="items" select="$items" />
            <xsl:sort select="substring-after(@Value, '||')" data-type="number"
                      order="descending" />
          </xsl:apply-templates>
        </xsl:when>
        <xsl:otherwise>0</xsl:otherwise>
      </xsl:choose>
    </xsl:variable>
    <xsl:variable name="itemsToAvg"
                  select="5 * (count($items) >= 5 or not($items)) + 
                              count($items) * (count($items) &lt; 5)" />

    <xsl:value-of select="concat('Average: ', 
                  format-number($sumTopItems div $itemsToAvg, '#.#'))"/>
  </xsl:template>

  <xsl:template match="SectorWeightingsEntry" mode="sumItems">
    <xsl:param name="items" />
    <xsl:param name="limit" select="5" />
    <xsl:param name="tally" select="0" />

    <xsl:if test="position() = 1">
      <xsl:if test="$limit &lt;= 0">
        <xsl:value-of select="$tally"/>
      </xsl:if>
      <xsl:if test="$limit > 0">
        <xsl:variable name="remaining"
                      select="$items[generate-id(.) != generate-id(current())]" />
        <xsl:apply-templates select="$remaining" mode="sumItems">
          <xsl:with-param name="items" select="$remaining" />
          <xsl:with-param name="limit" select="$limit - 1" />
          <xsl:with-param name="tally"
                          select="$tally + substring-after(@Value, '||')" />
          <xsl:sort select="substring-after(@Value, '||')" data-type="number"
                    order="descending" />
        </xsl:apply-templates>
      </xsl:if>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

在示例 XML 上运行时的输出：

```
<html>
  <body>
    <h2> zzzzzzzzz  </h2>
    <table style="width:50%;font-size:12px;" cellspacing="0" cellpadding="0">
      <tr style="width:50%; text-align:left;background-color:E6F1F9;">
        <th>    xxxxx   </th>
        <th>    yyyyy     </th>
      </tr>
      <tr>
        <td>16.7</td>
      </tr>
      <tr>
        <td>16.3</td>
      </tr>
      <tr>
        <td>15.2</td>
      </tr>
      <tr>
        <td>14.2</td>
      </tr>
      <tr>
        <td>13.6</td>
      </tr>
    </table>Average: 15.2</body>
</html> 
```

# asp.net - 如何在 ASP.NET FileUpload 控件中键入文件名

> ID：14606820
> 
> 赞同：0
> 
> 时间：2013-01-30T14:52:14.580
> 
> 标签：asp.net, file-upload, controls

我第一次使用 ASP.NET FileUpload 控件，到目前为止它的工作，除了一件事：似乎无法键入路径和文件名，如

C:\Temp\myfile.txt

直接进入 FileUpload 控件。我总是必须使用 OpenFileDialog。

**有没有办法启用 FileUpload 控件的文本框，所以我可以输入它？**

我正在使用 ASP.NET 4.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:56:17.620

从来没听说过。我相信这样做的原因是您理论上可以编写 javascript 以使用“c:\path\to\awesome\file.txt”填充它并在用户不知情的情况下静默上传，因此无法在其中输入内容或以任何方式预先填充它。

# javascript - Wordpress wp_enqueue_script 不工作

> ID：14606823
> 
> 赞同：5
> 
> 时间：2013-01-30T14:52:19.127
> 
> 标签：javascript, wordpress

我正在开发一个主题并试图让 wp_enqueue_script 工作。奇怪的是，什么都没有出现。它什么也没做。这是我的设置：

在functions.php中我有：

```
function named_scripts() {

    global $named_options;

    if( is_admin() ) return;

    wp_deregister_script( 'jquery' );
    wp_register_script( 'screen', tz_JS . '/screen.js', array( 'jquery' ) );
    wp_enqueue_script( 'screen' );
    wp_enqueue_script( 'bootstrap', tz_JS . '/bootstrap/bootstrap.js', array( 'jquery' ) );

    wp_register_style( 'custom-style', get_template_directory_uri() . '/css/custom-style.css', array(), '20120208', 'all' );  
    wp_enqueue_style( 'custom-style' );

}

add_action( 'init', 'named_scripts' ); 
```

在 header.php 我调用

```
named_scripts(); 
```

而在 HTML 中，什么也没有出现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T15:08:56.053

删除默认的 wordpress jquery 后，您应该已经注册了 jquery 文件。我使用此代码..希望它有所帮助..

```
function load_external_jQuery() { // load external file  
    wp_deregister_script( 'jquery' ); // deregisters the default WordPress jQuery  
    wp_register_script('jquery', ("http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"), false);
    wp_enqueue_script('jquery');
    wp_register_script('blur', get_template_directory_uri() . '/_/js/blur.js', array('jquery') );
    wp_enqueue_script('blur');
}  
add_action('wp_enqueue_scripts', 'load_external_jQuery'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T15:01:11.677

杰拉德是正确的。您已经注销了 Wordpress 附带的 jQuery，而没有注册替代版本。

如果您想直接从 CDN 加载，通常会删除已发布的版本。下面是一个例子；

```
 wp_deregister_script('jquery');
  wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js', false, '1.7.2');
  wp_enqueue_script('jquery'); 
```

如果你想注销它，你需要在加入其他依赖于 jQuery 的 JS 之前立即注册另一个版本

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T15:01:10.077

常量“tz_JS”的定义是否正确？假设是，您应该能够像这样简化您的功能：

```
function named_scripts() {

    wp_enqueue_script( 'jquery' );
    wp_enqueue_script( 'screen', tz_JS . '/screen.js', array( 'jquery' ) );
    wp_enqueue_script( 'bootstrap', tz_JS . '/bootstrap/bootstrap.js', array( 'jquery' ) );

    wp_enqueue_style( 'custom-style', get_template_directory_uri() . '/css/custom-style.css', array(), '20120208', 'all' );  

}
add_action( 'wp_enqueue_scripts', 'named_scripts' ); 
```

`wp_enqueue_scripts`是用于加载前端脚本的正确挂钩（[请参阅 Codex](http://codex.wordpress.org/Plugin_API/Action_Reference/wp_enqueue_scripts)）。您无需检查`is_admin()`，因为`admin_enqueue_scripts`在管理员端加载脚本的相应钩子。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-19T02:10:16.953

如果您正在开发**子主题**`get_stylesheet_directory_uri()`，请在主题目录中加载 js 时使用。

```
function named_scripts() {
  wp_enqueue_script('jquery');
  wp_enqueue_script(
        'default_scripts', 
        get_stylesheet_directory_uri() . '/js/scripts.js', 
        array('jquery'),
        '1.0',
        false
        );
}
add_action( 'wp_enqueue_scripts', 'named_scripts' ); 
```

# php - 了解工厂设计模式

> ID：14606824
> 
> 赞同：1
> 
> 时间：2013-01-30T14:52:18.730
> 
> 标签：php, design-patterns

我正在学习 php 中的工厂设计模式。据我了解，这种模式在我们有一堆类的情况下很有用，比如**class_1、class_2、class_3**等。如果必须实例化的特定类仅在运行时才知道，那么不要使用新的运算符为这些类创建对象，我们创建一个工厂类来为我们完成这项工作。

工厂类看起来有点像这样：

```
class Factory
{
// $type will have values 1, 2, 3 etc.
public function create_obj($type)
{
  $class_name = "class_".$type;
  if(class_exists($class_name))
  {
        return new $class_name();
  } 
}
} 
```

我的问题是在这里使用工厂**类**有什么好处？为什么不只使用一个**简单的函数**而不是一个会使事情复杂化的类呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:44:07.927

您的代码片段中的方法不是工厂方法，而只是一个辅助方法，它执行一项众所周知的[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)任务：根据其名称实例化一个类。这与[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)的用途完全相反：*创建对象（产品）而不指定将要创建的对象**的确切类***。

正如维基百科中所解释的：

> 这种模式的本质是*“定义一个用于创建对象的接口，但让实现该接口的类决定实例化哪个类”。*

您可能对[Wikipedia 关于工厂模式的文章中的最后一个](http://en.wikipedia.org/wiki/Factory_method_pattern)[PHP 示例](http://en.wikipedia.org/wiki/Factory_method_pattern#PHP_2)感到困惑，是的，这是一个糟糕的示例。检查上面的[Java 示例](http://en.wikipedia.org/wiki/Factory_method_pattern#Java_3)以获得有意义的示例（尝试将其转换为 PHP 的人错过了整个要点）。Java 示例根据其扩展名返回一个文件读取器，这正是工厂模式的用例。创建您自己的个人“规则”，即某些类需要具有某个名称前缀，这很可能是一个糟糕的设计决策。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:56:15.937

在问题的基本根源上，您*可以*使用一个简单的函数来实现目标。这打破了程序员的最佳实践，你想要低耦合，高内聚。

函数本身在您的应用程序设计中扮演着特殊的角色，并且将其与具有不同角色和目的的其他函数放在一起是不直观的维护和阅读。请记住，模式用于简化项目域（几乎）普遍面临的常见问题，因此它们倾向于与代码库的其余部分分离，以帮助区分它们。

此外，通过将模式放在它自己的类中，任何需要使用它的类都不需要知道 class_1/2/3/etc 的类结构。而是只需要引用父类，允许您创建更多的类，相应地修改模式，而无需解决剩余代码中的依赖关系和链接。这与低耦合有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T08:40:35.380

使用工厂模式的另一个重要原因是考虑当您必须**在设计和代码中添加类时代码会发生什么。**
如果您不使用工厂模式，您的代码将越来越**紧密地耦合，**您将不得不在许多不同的地方进行更改。您必须确保您必须接触代码的每个地方都与您必须接触的所有其他（紧密耦合的）地方相协调。 **测试变得非常复杂，**而且有些东西会坏掉。

工厂模式为您提供了一种减少耦合的方法，并帮助您将职责封装到几个地方。使用工厂模式，添加额外的类意味着在更少的地方接触代码。简化了测试（构建测试用例以及运行测试）。

在现实世界中，大多数代码“足够”复杂，工厂模式的好处显而易见。更改、改进和扩展对象模型，在快速变化的情况下尽可能完整和严格地进行测试，并确保您的代码尽可能不死板（同时要意识到多个人将在几个月/几年的时间里一直在努力）——工厂模式通常是不费吹灰之力的。

举一个简单的例子，很难看出使用工厂模式的优势。（如果你的代码真的很琐碎，那么这种模式可能不会给你带来太多收益。）这是我在网上搜索时看到的许多示例的问题——这些示例往往侧重于“你可以确定在运行时上课！并且很简单。

这是一个不太简单的例子，我认为让人们思考该模式的所有可能好处： [Bob Tarr 的工厂模式演示文稿 (pdf)](http://userpages.umbc.edu/~tarr/dp/lectures/Factory.pdf)。（示例 2，从第 10 页开始。）假设您正在编写一个迷宫游戏，其中一个人必须探索迷宫和迷宫中的所有房间。您的对象模型包括一个由**Doors**、**Rooms**、**Walls**之类的东西组成的**Maze**，并且还有一个**Map**也必须跟踪它们。很简单。但是当你开始添加**魔法房间**和魔法门和**魔法****窗户**时会发生什么？****************会说话的图片**和**曲折的小段落**？你最终会得到很多类来代表一切；您要确保在添加新类时必须更改（触摸）尽可能少的代码。并且您不希望修改**Map**类中的代码，例如，每次添加新类时：您希望使这些类专注于它们真正应该负责的内容。**************

 ****不仅要考虑在运行时实例化的内容，还要考虑代码的复杂性。
他还举了一个在 UI 组件中使用工厂模式（特别是工厂方法）的示例——工厂模式在其中出现了很多。（对于初学者，或者从未处理过 UI 代码的人，我认为这个例子不是很清楚。）

请记住，大多数编码都是在现有代码上完成的：大部分时间都花在修改已经存在的代码上。您希望确保您的代码能够在不脆弱的情况下处理更改。减少耦合和封装责任将大大有助于实现这一目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T14:58:15.060

这个概念是你设计一个接口，然后你可以在以后换掉这个类。

暂时忘记这种模式，考虑一下：

```
if (type == "manager")
    employee = new manager();
else
    employee = new employee();

employee.name = "myname"; 
```

在这种情况下，员工和经理都继承自同一个类。在 if 语句之后，您可以像对待人一样对待它们，并且从它们的实际实现中抽象出来。您可以实现工厂模式，而不是到处都有 if 语句。如果你只有一对，那么这种模式可能是矫枉过正的。如果您想在将来轻松扩展程序，请考虑一种模式。****

# android - Eclipse 对先前 API 的支持

> ID：14606827
> 
> 赞同：0
> 
> 时间：2013-01-30T14:52:29.097
> 
> 标签：android

我已经格式化了我的系统并安装了“Eclipse - Juno”。我也完成了所有 Java 路径设置和 SDK 设置。但eclipse显示最低目标API级别为17，Android版本为4.2。我如何让它支持从 8 开始的 API 级别？

我如何获得以前级别的 SDK？我可以使用 SDK Manager 安装它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:13:48.573

您需要下载所有必需的 SDK。也就是说，当您安装新的 ADT 实例时，它只包含最新的 API 支持。要下载 SDK，请按照以下步骤操作。

```
Open Eclipse (Juno in your case)

Select Window -> Android SDK Manager 
```

等待几秒钟，直到它加载所有 SDK 的列表（已安装和未安装，请参阅状态栏下方）。

选中您要下载的所有 API、工具和附加组件的**复选框，然后单击****安装 nn 包...**按钮。选择“**全部接受**”单选按钮并单击**安装**按钮并等待它下载所有 SDK。

如果您在安装期间/之后更改了它，您可能需要提供正确的 SDK 路径。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:54:06.593

在清单中将最低级别 api 设置为 8。还请记住您已经安装了所需的 sdks，并且 eclipse 知道您在哪里安装它。此外，在您的 C:\Users{USERNAME}\android-sdks\extras\android\support 中具有 v4、v7、13 向后能力支持库，将其添加到构建路径以使用以前的 api。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:54:19.843

您是否下载了相应的 API 级别的 SDK？

# ajax - 如何通过显示 JavaScript 警报来处理 ViewExpiredException？

> ID：14606828
> 
> 赞同：0
> 
> 时间：2013-01-30T14:52:30.530
> 
> 标签：ajax, jsf, primefaces, myfaces, viewexpiredexception

我已阅读问题[Handle ViewExireException/ajax 并显示 Primefaces 对话框](https://stackoverflow.com/questions/14340357/handle-viewexireexception-ajax-and-display-a-primefaces-dialog)和 BalusC 的答案。我想`ViewExpiredException`通过显示带有刷新页面信息的警报来处理。我接受了 BalusC 向用户`RequestContext`提出的让 JavaScript 执行的建议，并且我已经删除了 JSF 重定向，因为我没有使用它：

```
@Override
public void handle() throws FacesException {
    for (Iterator<ExceptionQueuedEvent> i = getUnhandledExceptionQueuedEvents().iterator(); i.hasNext();) {
        ExceptionQueuedEvent event = i.next();
        ExceptionQueuedEventContext context = (ExceptionQueuedEventContext) event.getSource();
        Throwable t = context.getException();
        if (t instanceof ViewExpiredException) {
            ViewExpiredException vee = (ViewExpiredException) t;
            try {
                log.info("Catched ViewExpiredException for view {}", vee.getViewId());
                RequestContext.getCurrentInstance().execute("handleViewExpired("+vee.getViewId()+")");
                return;
            } finally {
                i.remove();
            }
        } 
    }
    // At this point, the queue will not contain any ViewExpiredEvents.
    // Therefore, let the parent handle them.
    getWrapped().handle();

} 
```

问题是，我`NullPointerException`在从处理程序执行句柄方法时得到了`wrapped`。我添加了return子句，添加后效果是一样的：

> [30.01.13 15:45:59:140 CET] 0000002e ErrorPageWrit E 发生异常 javax.faces.FacesException: java.lang.NullPointerException at org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.wrap(ExceptionHandlerImpl.java:241 ) 在 org.apache.myfaces.lifecycle 的 my.project.web.handler.ViewExpiredExceptionExceptionHandler.handle(ViewExpiredExceptionExceptionHandler.java:59) 的 org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:156)。 LifecycleImpl.executePhase(LifecycleImpl.java:191) 在 org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)

所以，父句柄方法被执行，认为应该有来自方法的返回（信息字符串被记录）。

我正在使用**PrimeFaces 3.4**和**MyFaces 2.0.7**，**WebSphere 7**上的所有内容。

我不明白这里发生了什么。是否有可能实现我想要的，如果可以，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:17:08.717

最好的方法是在客户端处理该异常。它非常简单，而且完全透明：

```
var originalPrimeFacesAjaxResponseFunction = PrimeFaces.ajax.AjaxResponse;
PrimeFaces.ajax.AjaxResponse = function(data, status, xhr) {
  var errorName = $(data.documentElement).find("error-name").text();
  if (errorName == 'javax.faces.application.ViewExpiredException') {
    alert('View has expired, redirection will follow');
    window.location.reload();
  } else {
    originalPrimeFacesAjaxResponseFunction.apply(this, arguments);
  }
}; 
```

服务器上没有 2 个新课程，没有`faces-config.xml`变化，这就是我在编程中喜欢的。

# java - 从java编译c++文件

> ID：14606830
> 
> 赞同：4
> 
> 时间：2013-01-30T14:52:43.310
> 
> 标签：java, c++

我的问题是关于在 java 中编译 c++ 文件。我试过执行c#，没问题。此提取代码用于编译 c#

```
ProcessBuilder launcher = new ProcessBuilder("gmcs","HelloWorld.cs");` 
```

但是，我的 C++ 代码

```
ProcessBuilder launcher =new ProcessBuilder("g++", "HelloWorld.cpp -o HelloWorld"); 
```

`launcher.directory(new File(path))` 返回错误= 2，没有这样的文件或目录来指示我在两种情况下都使用的路径

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T14:54:34.700

您需要单独提供参数：

```
ProcessBuilder launcher =
    new ProcessBuilder("g++", "HelloWorld.cpp", "-o", "HelloWorld"); 
```

否则，整个参数字符串作为*一个*参数传递给`g++`可执行文件，并`g++`尝试找到一个名为的文件`HelloWorld.cpp\ -o\ HelloWorld`（使用转义空格，就像在 Linux 终端上一样）。

[有关用法的详细信息，请参阅文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html#ProcessBuilder(java.lang.String...))。

# java - SQLException: 列 AD 不在指定的表中 - 从未指定列 AD

> ID：14606834
> 
> 赞同：0
> 
> 时间：2013-01-30T14:52:49.433
> 
> 标签：java, sql

我尝试创建一个 PreparedStatement：

```
stmt = conn.prepareStatement("SELECT POLBRP, POLTYP, POLNOP, INCPTP, TRMTHP, " +
            "CLTKYP , CANDTP, POLSTP, EXPRYP, OINCPP, CANRNP, PAYMDP,
            KCNFLP, KCRTSP, KACADP, KSCHMP, EXPRYP FROM " 
            + POLHDR + " WHERE POLNOP = " + idNumber + 
            " AND POLBRP = " + branch + " AND POLTYP = " + product + 
            " AND OINCPP <= "+date ); 
```

这会引发 SQLException: [SQL0206] Column AD not in specified tables。

我不知道它从哪里获取 AD 列，因为我从未在 select 子句中指定它（除非我完全盲目和愚蠢）

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:58:49.433

如果您的变量是字符串，例如`branch`

```
" AND POLBRP = " + branch + " ... 
```

然后你忘了引用值

```
" AND POLBRP = '" + branch + "' ... 
```

但真正的解决方案是使用占位符

```
... AND POLBRP = ? ... 
```

这将一劳永逸地防止此类问题，这就是 PreparedStatement 的设计目的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:00:02.897

[在 Java 中防止 SQL 注入](https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java)显示了正确使用`PreparedStatement`：

> 准备好的语句作为参数传递给准备好的语句的变量将被 JDBC 驱动程序自动转义。
> 
> 示例：ps.1

```
String selectStatement = "SELECT * FROM User WHERE userId = ? ";
PreparedStatement prepStmt = con.prepareStatement(selectStatement);
prepStmt.setString(1, userId);
ResultSet rs = prepStmt.executeQuery(); 
```

来自同一来源，在同一部分中：

> 尽管 Prepared Statements 有助于防御 SQL 注入，但通过不恰当地使用 Prepared Statements 可能会引发 SQL 注入攻击。下面的示例解释了输入变量直接传递到 Prepared Statement 从而为**SQL 注入攻击**铺平道路的情况。
> 
> 示例：ps.2

```
String strUserName = request.getParameter("Txt_UserName"); 
PreparedStatement prepStmt = con.prepareStatement("SELECT * FROM user WHERE userId = '+strUserName+'"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:02:18.020

尝试将您的查询更改为：

```
SELECT
  POLBRP,
  POLTYP,
  POLNOP,
  INCPTP,
  TRMTHP,
  CLTKYP,
  CANDTP,
  POLSTP,
  EXPRYP,
  OINCPP,
  CANRNP,
  PAYMDP,
  KCNFLP,
  KCRTSP,
  KACADP,
  KSCHMP,
  EXPRYP
FROM TableName WHERE POLNOP = ? AND POLBRP = ? AND POLTYP = ? AND OINCPP <= ?"; 
```

然后使用：

```
stmt.setString(1, "ValueOfPOLNOP");
... 
```

执行查询时，`?`将替换为您传递给[PreparedStatement#setString(int, String)](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setString%28int,%20java.lang.String%29)方法的值

# java - 无法恢复密钥

> ID：14606837
> 
> 赞同：47
> 
> 时间：2013-01-30T14:52:53.380
> 
> 标签：java, android, eclipse, key

两天前，我在 Play 商店中发布了我的应用程序的第一个版本。我使用了具有已知别名和密码的密钥。

然后，我在eclipse中更改了我的应用程序的名称，只更改了一个字母。现在，我想在eclipse中导出版本2，尝试使用第一次的密钥并输入别名和密码。我确定他们是正确的！

在最后一步，Eclipse 告诉我“无法恢复密钥”。我尝试了一个新的，但 Play Store 显示错误。我能做些什么？？

**编辑：**

![在此处输入图像描述](../Images/5a3209e33187fc429414976b4437ea85.png)

![在此处输入图像描述](../Images/1649167e01c1e1d2a698e31cbdb16820.png)

![在此处输入图像描述](../Images/fe3fdab3229b0b8d7523043c9ace7936.png)

就像您在第二张图片中看到的那样，它必须是正确的密码，否则别名将不会出现在下拉框中。第二个密码也是正确的，它是第一个密码的副本。我只有一个别名！

最后一张图片中的目标APK文件链接无关紧要吗？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-07-20T01:45:44.490

**解决方案：KeyStore 密码和 Key 密码应该相同。**

使用 keytool 更改两个密码

**更改密钥库密码**

```
keytool -storepasswd -new %newpassword% -keystore %YourKeyStore%.jks 
```

*将 %newpassword% 替换为您的实际密码，与 YourKeyStore 相同*

**更改别名密钥密码**

```
keytool -keypasswd -alias %MyKeyAlias% -new %newpassword% -keystore KeyStore.jks 
```

注意：在要求时为密钥库和别名提供旧密码

（引自[http://karim-ouda.blogspot.com/2010/07/errors-solutions-5.html](http://karim-ouda.blogspot.com/2010/07/errors-solutions-5.html)）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-03-23T14:50:59.407

如果您的密码中有特殊字符，请使用此工具进行更改：

[http://keystore-explorer.org/](http://keystore-explorer.org/)

我已经在 Windows 上尝试过这些[命令](https://stackoverflow.com/a/17757850/5436000)，但它不起作用（可能是因为特殊字符）。

[![在此处输入图像描述](../Images/4c6d16ff72ade260296a6ae03598c1af.png)](https://i.stack.imgur.com/1t0bm.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-30T14:57:18.143

签署应用程序时更改应用程序名称不会产生任何问题。您可能输入了错误的密码或密钥库别名。

而且您无法创建新的密钥库来签署应用程序。如果您这样做了，那么它是另一个应用程序，您无法更新当前存在的应用程序。

尝试使用正确的密钥库别名和密码使用 First Keystore 重新签署应用程序。这对您来说可能很难，但如果您未能使用第一个密钥库文件重新签名，那么您将无法使用第二个版本更新应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-06T13:24:10.057

在我的情况下，错误是由于密码中的特殊字符：`Ç`.

# android - android：多个屏幕尺寸的imageview顶部的按钮

> ID：14606848
> 
> 赞同：2
> 
> 时间：2013-01-30T14:53:48.150
> 
> 标签：android, image, button, size, screen

嗨，我正在开发一个在 android 上的应用程序，我有一些布局，我希望有一个可以填充`screen-width`横向模式的图像。最重要的是，我想要一些特定位置的按钮。

我使用了一个`scrollview`（因为如果图像填充了屏幕的宽度，它的高度就不适合），其中有一个相对布局。

在那个相对布局中，我放置了`imageview`和 按钮。图像填充宽度并包装高度的内容。通过在相对布局中设置左边距和上边距来放置按钮。

在我测试过的手机上一切看起来都不错，但是当我在不同的设备（其他屏幕尺寸和密度）上测试时，所有按钮都在错误的位置并且不再足够大。

我怎样才能改变这一点，使所有比例保持不变？与图像相比，按钮必须位于完全相同的位置并且必须具有相同的大小。

我的代码：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/svCentralAmerica"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true" >

    <RelativeLayout
        android:id="@+id/rlCentralAmerica"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/ivCentralAmerica"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:adjustViewBounds="true"
            android:src="@drawable/mapcentralamerica" />

        <Button
            android:id="@+id/mexu"
            android:layout_width="36dp"
            android:layout_height="36dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="16dp"
            android:layout_marginTop="33dp"
            android:background="@drawable/usa_y"
            android:onClick="onCountryClick"
            android:paddingTop="3dp"
            android:scaleType="fitCenter"
            android:tag="1;U"
            android:text="2"
            android:textColor="@color/Black"
            android:textSize="15sp"
            android:textStyle="bold" />

        <Button
            android:id="@+id/mexr"
            android:layout_width="36dp"
            android:layout_height="36dp"
            android:layout_alignTop="@id/mexu"
            android:layout_marginLeft="4dp"
            android:layout_toRightOf="@id/mexu"
            android:background="@drawable/russia_n"
            android:onClick="onCountryClick"
            android:paddingTop="18dp"
            android:scaleType="fitCenter"
            android:tag="1;R"
            android:text="3"
            android:textColor="@color/Red"
            android:textSize="15sp"
            android:textStyle="bold" />

    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:49:35.073

我使用这些辅助函数根据屏幕高度和宽度的百分比来移动我的按钮。首先，我在图形布局中为 320 x 480 屏幕布局屏幕以创建 xml，然后在我的 onCreate 方法中移动按钮。

这是我使用的导入：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Display;
import android.view.View;
import android.view.WindowManager;
import android.widget.AbsoluteLayout;
import android.widget.Button;
import android.content.Context;
import android.util.Log; 
```

以下是在 onCreate 中移动按钮的调用：

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    moveBtn(0.1843,0.1187,0.128,0.7375,R.id.credits_button);
    moveBtn(0.1843,0.1187,0.3125,0.7375,R.id.website_button);
    moveBtn(0.1843,0.1187,0.5,0.7375,R.id.facebook_button);
    moveBtn(0.1843,0.1187,0.6906,0.7375,R.id.support_button);
} 
```

以下是辅助函数：

```
//----------------------------------------------------------------------------------------------
//  public void moveBtn(double percent_width, double percent_height, double percent_x, double  percent_y, int myObject)
//----------------------------------------------------------------------------------------------
public void moveBtn(double percent_width, double percent_height, double percent_x, double  percent_y, int myObject) {
    int width = (int)Math.round((ScWth(this) * percent_width));
    int height = (int)Math.round((ScHgt(this) * percent_height));
    int x = (int)Math.round((ScWth(this) * percent_x));
    int y = (int)Math.round((ScHgt(this) * percent_y));

     Log.d(TAG, "Object: " + myObject + "/Width: " + width + "/Height: "+ height + "/x: "+ x + "/y: "+ y);

    AbsoluteLayout.LayoutParams myParam = new AbsoluteLayout.LayoutParams(width, height, x, y); 

    Button thisButton = (Button)findViewById(myObject);
    thisButton.setLayoutParams(myParam);

}

//----------------------------------------------------------------------------------------------
//  public static double ScWth(Context context)
//----------------------------------------------------------------------------------------------
    //return the screen width of the device
public static double ScWth(Context context){
    WindowManager windowManager = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = windowManager.getDefaultDisplay();
    return display.getWidth();
}

//----------------------------------------------------------------------------------------------
//  public static double ScHgt(Context context)
//----------------------------------------------------------------------------------------------
    //return the screen height of the device
public static double ScHgt(Context context){
    WindowManager windowManager = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = windowManager.getDefaultDisplay();
    return display.getHeight();
} 
```

我希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:58:00.150

我真的做到了你的想法。不幸的是，如果您想在任何屏幕尺寸上精确控制定位以及精确的纵横比，那么您将不得不以编程方式定位资源。如果你使用xml，你可以非常接近，但不会有精确的定位控制。对于初学者来说，以编程方式定位可能很乏味。由于您只是在这里和那里放置几个按钮，因此应该不会太麻烦。

我是怎么做到的：以编程方式获取屏幕宽度和屏幕高度。然后计算按钮的纵横比。接下来，计算按钮相对于屏幕宽度和屏幕高度的位置（以 % 为单位）。有了所有这些信息，您应该能够在具有特定方向的任何屏幕尺寸上将按钮准确定位在您想要的位置。我建议将其他所有内容都放在 xml 上，并且只以编程方式执行按钮。在方向改变时，您将需要重新计算所有内容，这可能很烦人。我建议您坚持 1 个方向，以后可能支持多个方向。

# php - 在 Google 地图上更改 Google 标记大小

> ID：14606849
> 
> 赞同：0
> 
> 时间：2013-01-30T14:53:55.863
> 
> 标签：php, google-maps

我有以下代码可以构建这样的自定义谷歌地图标记：

```
 mapa.markers[ind] = new google.maps.Marker({
                                position: mposition,
                                map:mapa.map,
                                title:mapa.json.markers[ind].timestamp,
                                icon: "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+ind+"|000000|FFF",
                            }); 
```

[在这里](https://stackoverflow.com/questions/7842730/change-marker-size-in-google-maps-v3)使用这个解决方案，我试图将此代码集成到上面，但出现语法错误？我究竟做错了什么？

```
null, /* size is determined at runtime */
null, /* origin is 0,0 */
null, /* anchor is bottom center of the scaled image */
new google.maps.Size(42, 68) 
```

这是显示语法错误的更新代码：

```
 mapa.markers[ind] = new google.maps.Marker({
                                    position: mposition,
                                    map:mapa.map,
                                    title:mapa.json.markers[ind].timestamp,
                                    icon: "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+ind+"|000000|FFF",
                                    null, /* size is determined at runtime */
                                    null, /* origin is 0,0 */
                                    null, /* anchor is bottom center of the scaled image */
                                    new google.maps.Size(42, 68)
                                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:00:06.353

你的语法不正确。

一个[图标对象](https://developers.google.com/maps/documentation/javascript/reference#Icon)应该这样定义：

```
mapa.markers[ind] = new google.maps.Marker({
         position: mposition,
         map:mapa.map,
         title:mapa.json.markers[ind].timestamp,
         icon: {url:"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld="+ind+"|000000|FFF",
         scaledSize:new google.maps.Size(42, 68)}
}); 
```

（感谢@andrewap 测试它和 jsfiddle）

`size`不需要该属性（它会在图像加载时自动设置），除非您使用的是精灵，这里不是这种情况。

**工作示例：http:** [//jsfiddle.net/fUEDh/](http://jsfiddle.net/fUEDh/)

# javascript - ExtJS4 内存泄漏

> ID：14606852
> 
> 赞同：3
> 
> 时间：2013-01-30T14:53:59.187
> 
> 标签：javascript, extjs, memory-leaks, extjs4.1

我有一个用 ExtJS 4.1.1 编写的应用程序，它经常使用一个商店。我从服务器获取数据样本，经过一些验证后，我使用其“添加”方法将其添加到存储中。我会定期执行此操作，并且还会从商店中删除我不需要的记录。

问题是，随着时间的推移，我的应用程序正在消耗越来越多的 RAM，我似乎找到了问题的根源，但我不知道如何处理它。

这是我的商店定义：

```
this.store = Ext.create('Ext.data.Store', {
        fields: ['when', 'data1', 'data2', 'data3', 'data4', 'data5', 'data6', 'data7', 'data8', 'data9'],
        proxy: {
            type: 'memory',
            reader: {
                type: 'json',
                root: 'users'
            }
        },
        sorters: [{
            property: 'when',
            direction: 'ASC'
        }]
    }); 
```

这就是我从中删除记录的方式：

```
var record = self.store.getAt(j);
if((record.get('when') <= newMinDate) && (record.get('data'+id) !==' ')) {
  self.store.remove(record);
  record.destroy();
  record = null;
  j--;
  ln--;
} 
```

但是当我在调试这个问题时检查控制台时，我可以看到，记录实际上是从存储中删除的，而不是从内存中删除的。

编辑/更新：我尝试使用您的答案中的建议来解决问题，但都无法解决。可以肯定的是，我得到了正确的问题源，我提取了我的商店代码以更仔细地检查它，看看它是否真的导致了问题。您可以在下面看到整个代码：

```
Ext.define('TestApp.App', {
extend: 'Ext.app.Application'
});

Ext.application({
extend: 'MyApp.app.Application',

store: null,

launch: function() {
    var self = this;
    self.store = Ext.create('Ext.data.Store', {
        fields: ['when', 'data1', 'data2', 'data3', 'data4', 'data5', 'data6', 'data7', 'data8', 'data9'],
        proxy: {
            type: 'memory'
        },
        sorters: [{
            property: 'when',
            direction: 'ASC'
        }]
    });
    self.beginTask();
},

beginTask: function() {
    var self = this;
    Ext.TaskManager.start({
        run: function() {
            var jsonRaw = *very large json*; //about 650 samples
            var json = Ext.JSON.decode(jsonRaw, true);
//                self.store.add(json.data.samples);
//                var ln = self.store.getCount();
//                for (var j=0; j<ln; j++) {
//                    var record = self.store.getAt(j);
//                    self.store.remove(self.store.getAt(j));
//                    j--;
//                    ln--;
//                    record.destroy();
//                    delete record;
//                }
            json = null;
            jsonRaw = null;
        },
        interval: 1000
    });
}
}); 
```

现在奇怪的部分是：即使存储部分像上面的代码清单一样被注释，内存泄漏仍然存在。我在任务管理方面犯了一些错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:02:16.560

我发现使用 Ext JS 的许多陷阱之一是它`Ext.data.Model#destroy`实际上并没有在本地清理记录。该`destroy`方法使用商店的代理发送对该记录的销毁请求（例如，如果您需要从数据库中删除相应的记录）。如果这是您的预期行为，那么不用担心。

当您从存储中删除记录时，该存储会在名为 的数组中保留对该记录的引用`removed`。[您可以在Ext.data.Store#remove](http://docs.sencha.com/ext-js/4-1/source/Store.html#Ext-data-Store-method-remove)方法的底部看到它。我建议使用 JavaScript 调试器并在删除几次后检查您的商店对象，以查看您的记录是否被缓存。如果是这样，调用`store.removed.length = 0;`清除它很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:58:06.470

如果您`store.sync()`在删除后执行 a 会发生什么？不知道这是否有助于内存代理，但我认为它应该删除对已删除记录的引用。`remove(record)`仅对记录执行操作并不会真正删除该记录，它只是将其标记为要删除，并停止将其公开为商店中可用的状态。至少对于其他代理类型是这样。只有在商店的修改记录（添加、删除、更新）通过`store.sync();`. 那时，商店将新状态的记录保存在其内部列表中。

也许 sra 无论如何都是正确的，而您自己在其他地方的闭包中持有对记录的引用？

# javascript - 为什么 document.ready() 不能在这个页面上工作？

> ID：14606859
> 
> 赞同：-1
> 
> 时间：2013-01-30T14:54:14.737
> 
> 标签：javascript, jquery

所以我有一个简单的 jquery 代码来突出显示导航菜单。

```
$(document).ready(function(){
$('#header .mm a').each(function(){

    if( $(this).attr('href') == window.location.href ){
        $(this).addClass('active');
    }

    var value = window.location.href.substring(window.location.href.lastIndexOf('/') + 1);

    if( $(this).attr('href') == '/site/' && (value == '') ){
        $(this).addClass('active');
    }

});
}); 
```

在此页面上：http: [//perfectlanding.com.au/creativity](http://perfectlanding.com.au/creativity)

我不知道为什么代码不会运行。控制台中没有错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:00:20.473

该代码不在脚本标签内。修复它，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T14:59:31.820

查看页面源，有问题的脚本不在任何标签之间。您可以看到它在页面底部的页脚下方发出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:57:06.130

复制粘贴这个：

```
<script type="text/javascript">
$(document).ready(function(){
  $('#header .mm a').each(function(){

    if( $(this).attr('href') == window.location.href ){
        $(this).addClass('active');
    }

    var value = window.location.href.substring(window.location.href.lastIndexOf('/') + 1);

    if( $(this).attr('href') == '/site/' && (value == '') ){
        $(this).addClass('active');
    }

  });
});
</script> 
```

# matlab - Matlab 索引到逻辑索引

> ID：14606863
> 
> 赞同：10
> 
> 时间：2013-01-30T14:54:20.093
> 
> 标签：matlab, logical-operators, matrix-indexing

我给出了一个索引列表，例如`i = [3 5]`和一个向量`v = 1:6`。我需要一个函数，它返回给定索引`f`的向量的逻辑映射，例如：`v``i`

```
f(i, length(v)) = [0 0 1 0 1 0] 
```

因为我会调用这个函数几百万次，所以我想让它尽可能快。是否有执行此任务的**内置函数？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T15:35:25.000

我知道我迟到了，但我真的很想找到一个更快的解决方案，它和`ismember`. 确实有一个，它使用了未记录的[`ismembc`](http://undocumentedmatlab.com/blog/ismembc-undocumented-helper-function/)功能：

```
ismembc(v, i) 
```

### 基准

```
N = 7;
i = [3 5];

%// slayton's solution
tic
for ii = 1:1e5
    clear idx;
    idx(N) = false;
    idx(i) = true;
end
toc

%// H.Muster's solution
tic
for ii = 1:1e5
    v = 1:N;
    idx = ismember(v, i);
end
toc

%// Jonas' solution
tic
for ii = 1:1e5
    idx = sparse(i, 1, true, N, 1);
end
toc

%// ismembc solution
tic
for ii = 1:1e5
    v = 1:N;
    idx = ismembc(v, i);
end
toc 
```

这是我得到的：

```
Elapsed time is 1.482971 seconds.
Elapsed time is 6.369626 seconds.
Elapsed time is 2.039481 seconds.
Elapsed time is 0.776234 seconds. 
```

神奇的是，`ismembc`确实是最快的！

*编辑：*
对于非常大的值`N`（*即*何时`v`是一个大数组），更快的解决方案实际上是 slayton 的（和 HebeleHododo 的，就此而言）。您有多种策略可供选择，请谨慎选择:)

*H.Muster 编辑：*
以下是基准测试结果，包括`_ismemberoneoutput`：

```
Slayton's solution:
   Elapsed time is 1.075650 seconds.
ismember:
   Elapsed time is 3.163412 seconds.
ismembc:
   Elapsed time is 0.390953 seconds.
_ismemberoneoutput:
   Elapsed time is 0.477098 seconds. 
```

有趣的是，乔纳斯的解决方案不适合我，因为我得到一个`Index exceeds matrix dimensions.`错误......

*hoogamaphone 编辑：*
值得注意的是，`ismembc`要求两个输入都是数字的、排序的、非稀疏的、非 NaN 值，这是[源文档](http://undocumentedmatlab.com/blog/ismembc-undocumented-helper-function/)中很容易遗漏的细节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T14:58:48.983

只需创建一个逻辑索引向量并将所需位置设置为真/假

```
idx = false( size( v) );
idx( i ) = true; 
```

这可以包装在这样的函数中：

```
function idx = getLogicalIdx(size, i)
  idx = false(size);
  idx(i) = true;
end 
```

如果您需要为每百万次操作中的每个操作分配一次相同大小的索引向量，然后在每次迭代中对其进行操作：

```
idx = false(size(v)); % allocate the vector
while( keepGoing)

  idx(i) = true; % set the desired values to true for this iteration

  doSomethingWithIndecies(idx);

  idx(i) = false; % set indices back to false for next iteration

end 
```

如果您真的需要性能，那么您可以编写一个 mex 函数来为您执行此操作。这是我编写的一个非常基本的未经测试的函数，它比其他方法快约 2 倍：

```
#include <math.h>
#include <matrix.h>
#include <mex.h>

void mexFunction(int nlhs, mxArray *plhs[],
                 int nrhs, const mxArray *prhs[])
{
    double M;
    double *in;

    M = mxGetScalar(prhs[0]);
    in = mxGetPr(prhs[1]);
    size_t N = mxGetNumberOfElements(prhs[1]);

    plhs[0] = mxCreateLogicalMatrix( M,1 );
    mxLogical *out= mxGetLogicals( plhs[0] );

    int i, ind;
    for (i=0; i<N; i++){
        out[ (int)in[i] ] = 1;
    }

} 
```

在 matlab 中有几种不同的方法来分配向量。有些比其他更快，请参阅此未记录的 Matlab 帖子以获得很好的总结：

以下是比较不同方法的一些快速基准。最后一种方法是迄今为止最快的，但它要求您为每个操作使用相同大小的逻辑索引向量。

```
N = 1000;
ITER = 1e5;

i = randi(5000,100,1);
sz = [N, 1];

fprintf('Create using false()\n');
tic;
for j = 1:ITER
    clear idx;
    idx = false( N, 1 );
    idx(i) = true;
end
toc;

fprintf('Create using indexing\n');
tic;
for j = 1:ITER
    clear idx;
    idx(N) = false;
    idx(i) = true;
end
toc;

fprintf('Create once, update as needed\n');
tic;
idx = false(N,1);
for j = 1:ITER
    idx(i) = true;
    idx(i) = false;
end
toc;

fprintf('Create using ismembc\n');
a = ones(N,1);
tic;
for j = 1:ITER

    idx = ismembc(1:N, i);
end
toc; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-30T15:08:20.750

您可以使用[`ismember`](http://www.mathworks.de/de/help/matlab/ref/ismember.html)

```
 i = [3 5];
 v = 1:6;

 ismember(v,i) 
```

将返回

```
ans =

     0     0     1     0     1     0 
```

对于可能更快的版本，您可以尝试

```
builtin('_ismemberoneoutput', v, i) 
```

请注意，我仅针对您指定的行向量对此进行了测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T15:03:12.430

只需使用 idx 矩阵寻址一个新变量，它就会为您填充零：

```
idx = [3 5];
a(idx) = true 
```

不需要函数，也不需要传递长度，除非你也想要尾随零。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-30T15:13:26.810

我希望@slayton 的解决方案最快。但是，这是一种单线替代方案，如果向量很大，它至少可以为您节省一些内存。

```
vecLen = 6;
logicalIdx = sparse(idx,1,true,vecLen,1); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-30T15:00:22.620

你可以写一个这样的函数：

```
function logicalIdx = getLogicalIdx(idx, v)
    logicalIdx = zeros(1,size(v,2));
    logicalIdx(idx) = 1;
end 
```

当你调用函数时：

```
v = 1:6;
idx = [3 5];
getLogicalIdx(idx,v) 
```

输出将是：

```
ans =

     0     0     1     0     1     0 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-23T03:06:34.917

你能简单地做 v(i) =1 吗？

例如，如果您说 x = zeros(1,10); 和 a = [1 3 4]；

x(a) = 1 将返回 1 0 1 1 0 0 0 0 0 0

# sublimetext2 - 如何更改 Sublime Text 2 中的缩进引导线数？

> ID：14606868
> 
> 赞同：4
> 
> 时间：2013-01-30T14:54:28.763
> 
> 标签：sublimetext2, sublimetext

当前的缩进指导线仅以 12 个空格为间隔显示。我希望它们以 4 个空格的间隔显示，因此它们与我的标签宽度完全匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T21:34:11.447

使用等宽字体。要么，注释掉*设置 - 用户*`font_face`文件中的设置，要么将其更改为操作系统中可用的等宽字体。

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-26T01:01:47.510

我遇到了同样的问题，发现我的文档（2）的“标签宽度”与设置“tab_size”（4）不同

我必须做的是更改“标签宽度”： **视图/缩进/标签宽度***

# javascript - Node.js 模块加载

> ID：14606872
> 
> 赞同：0
> 
> 时间：2013-01-30T14:54:48.300
> 
> 标签：javascript, jquery, node.js

我目前正在使用 Node 构建一个 Web 应用程序，我很好奇 Node 如何加载其所需的文件或模块。

我正在使用 express 进行视图和服务器配置，但是我发现所有 Node 示例（我知道 express 提供了一个 MVC 示例）并不真正符合一般的 MVC 模式。我也知道 Node 不一定适合 MVC，但请耐心等待，因为我喜欢 MVC。

如果您考虑以下路由声明，将其用作控制器将是有效的，因为您可以在这里控制请求和响应逻辑：

```
module.exports = function (app) {

app.get('/', function (req, res) {

    res.render('index', { layout: false });

}); 
```

为了尝试并遵循 MVC 架构，我有效地将路由划分为其相关路径，从而有效地创建控制器。但是，每当我有不同的路由文件时，它都必须包含自己的一组必需模块。例如：

```
var mongo = require('mongoskin'); 
```

然后，我将在包含服务器配置设置的 app.js 或 server.js 文件中声明所需的路由文件。

我想知道这样拆分路由是否会减慢应用程序的速度，因为我不知道 Node 如何加载其模块。如果它是根据需要加载的，那么这个实现肯定会减慢它的速度吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:22:50.160

所需的模块只加载一次然后[缓存](http://nodejs.org/api/modules.html#modules_caching)，因此您可以随意将您的应用程序分解为尽可能多的模块，以清晰地组织您的应用程序。如果您有 20 个调用 的文件`require('mongoskin')`，则该模块仍然只加载一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T15:23:11.877

引用 node.js[文档](http://nodejs.org/api/modules.html#modules_caching)：

> 模块在第一次加载后被**缓存。**这意味着（除其他外）每次调用 require('foo') 都将返回完全相同的对象，如果它会解析为同一个文件。
> 
> 多次调用 require('foo') 可能不会导致模块代码被多次执行。这是一个重要的特点。有了它，可以返回“部分完成”的对象，从而允许加载传递依赖项，即使它们会导致循环。

# android - DialogFragment / 方向切换

> ID：14606874
> 
> 赞同：2
> 
> 时间：2013-01-30T14:54:53.800
> 
> 标签：android, android-dialogfragment

我有一个相当简单的 DialogFragment。它看起来像：

```
import android.support.v4.app.DialogFragment;

public class MyDialogFragment extends DialogFragment {

    private String mData = "empty";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d(LOG_TAG, "onCreate");

        setStyle(DialogFragment.STYLE_NO_TITLE, 0);
        // setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.mydialog, container);

        ....

        return view;
    }

    public setData(String _data) {
        mData = _data;
    }
} 
```

我像这样从我的加载这个片段`FragmentActivity`：

```
FragmentManager lFM = getSupportFragmentManager();
MyDialogFragment lDialog = new MyDialogFragment();
lDialog.setData("not empty");
lDialog.show(lFM, "MyDialog"); 
```

上面的代码工作正常。但是，我想将片段保留在方向开关上，以便保留 mData 字段。如果我添加`setRetainInstance(true);`（并且在进行一些调试之后）我可以看到片段确实保留在方向开关上 -`onCreate()`这次没有被调用。我可以看到`onCreateView()`正在被调用并且我返回了一个正确的`View`对象，但是屏幕上没有显示对话框。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:33:31.630

在阅读了baboo给我的答案后，我实现了如下解决方案..我希望这是正确的（至少它可以正常工作......）

```
@Override
public void onCreate(Bundle savedInstanceState) {

  // ....

  FragmentManager lFM = getSupportFragmentManager();
  if(lFM.findFragmentByTag("MyDialog")!=null)
    ((MyDialogFragment)lFM.findFragmentByTag("MyDialog")).show(lFM, "MyDialog");

  // ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:01:47.777

在您的片段活动中尝试以下逻辑：

使用 put 方法将值存储在 onSaveInstanceState() 中：

```
protected void onSaveInstanceState(Bundle icicle) {
  super.onSaveInstanceState(icicle);
  icicle.putBoolean("dialogDisplayed", value);    // set value = true when displayin dialog...
} 
```

并恢复 onCreate() 中的值：

```
 public void onCreate(Bundle icicle) {
   if (icicle != null){
     value = icicle.getBoolean("dialogDisplayed");
   }
   if(value)
       //Display Dialog here.... 

 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-31T11:24:39.397

只要您执行以下操作，就应该自动保留对话框片段：

1.  如果您调用 Activity onSaveInstanceState()，**请确保调用超级函数！！！！**. 就我而言，这是关键。还要确保你在 Fragment 中做同样的事情。
2.  如果您使用`setRetainInstance`，您将需要手动存储这些值并重新应用它们。否则，在大多数情况下，您应该不必担心。如果你正在做一些更复杂的事情，你可能需要`setRetainInstance(true)`，否则忽略它。就我而言，我需要用它来为我的一个课程存储一个随机种子，但除此之外我还可以。
3.  有些人抱怨支持库中的一个错误，即在不应该发送关闭消息时发送。最新的支持库似乎已经解决了这个问题，所以你不必担心这个问题。

您不需要做任何花哨的事情，例如手动存储片段，如果您按照这些步骤操作，它应该会自动完成。

# asp.net-mvc-3 - 在 mvc 中显示要下载的文件名和链接

> ID：14606875
> 
> 赞同：2
> 
> 时间：2013-01-30T14:54:56.370
> 
> 标签：asp.net-mvc-3

我将文件保存在项目文件夹中

```
D:\Maarjaa\Marjaa\Content\Uploads 
```

现在我想显示这些文件的名称（不是完整的 URL）

作为

```
lakes of kaghan.jpg
lakes of gilgit.jpg 
```

不像

```
D:\Maarjaa\Marjaa\Content\Uploads\lakes of kaghan.jpg 
```

此外，我想提供这些文件的下载链接，以便用户可以下载这些文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:01:02.220

我做到了，在我看来

```
 <ul>
            @foreach(var Item in(IEnumerable<Marjaa.Data.MultimediaFile>) ViewData["Files"]) 
            {

               <li><a href=" @Url.Content("~/Content/Uploads/" + System.IO.Path.GetFileName(Item.MultimediaFileUrl))">@System.IO.Path.GetFileName(Item.MultimediaFileUrl)</a> </li>
             }                
            </ul> 
```

从我的控制器刚刚发送了一个列表来查看

```
IList<MultimediaFile> list = d.MultimediaFiles.Where(l => l.MultmediaId == id).ToList();
        ViewData["Files"] = list; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T16:51:53.587

许多不同的方法可以做到这一点。这是一个：

为您的文件创建一个类

```
public class Image
        {
            public string Name { get; set; }
            public string Path { get; set; }
        } 
```

和一个视图模型类

```
public class ViewModel
        {
            public List<Image> Images { get; set; }
            public string Path { get; set; }
        } 
```

然后在您的控制器中，为列表中的每个 Image 对象填充视图模型以及名称和路径属性。您需要导入 System.IO 命名空间。

```
public ActionResult DisplayFilesForDownload( )
        {
            var viewModel = new ViewModel
            {
                Path = @"D:\Maarjaa\Marjaa\Content\Uploads", 
                Images = new List<Image>()
            };
            var paths = Directory.GetFiles(viewModel.Path).ToList();
            foreach (var path in paths)
            {
                var fileInfo = new FileInfo( path );
                var image = new Image
                {
                    Path = path, Name = fileInfo.Name
                };
                viewModel.Images.Add(image);
            }
            return View( viewModel);
        } 
```

以及允许下载的方法。我假设你所有的文件都是图像。如果没有，只需根据需要调整 MediaTypeName。

```
public FileResult Download(string filePath, string fileName)
        {
            var file = File(filePath, System.Net.Mime.MediaTypeNames.Image.Jpeg, fileName);
            return file;
        } 
```

最后是视图。Image.Name 用于显示缩短的文件名，Image.Path 用于告诉下载方法从哪里获取文件。

```
@model FullyQualified.Path.ToYour.ViewModel

@foreach (var image in Model.Images)
{
    <p>@Html.ActionLink(image.Name, "Download", "ControllerName", new{filePath = image.Path, fileName = image.Name}, null)</p>
} 
```

希望这可以帮助您上路。

# ios - 将 plist 加载到我的 tableview 后，如何将信息传递给第二个视图控制器？（NS词典）

> ID：14606878
> 
> 赞同：0
> 
> 时间：2013-01-30T14:55:02.820
> 
> 标签：ios, objective-c, plist

我将我的 pList 加载到与视图控制器相连接的表视图控制器中。我不知道如何加载与点击到此视图控制器上的标签中的单元格相对应的数据。顺便说一下，plist 是一个 NSDictionary。

在表视图控制器的 viewDidLoad 中，我有：

```
 NSString *myFile = [[NSBundle mainBundle]
                    pathForResource:@"recipes" ofType:@"plist"];

recipes = [[NSDictionary alloc] initWithContentsOfFile:myFile]; 

courseKeys = [recipes allKeys]; 
```

我不知道如何告诉标签选择的食谱名称是 X，所以你显示 X 的成分。

谢谢您的帮助！

凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:01:35.990

不要忘记 - a`UITableView`是一种显示数据的方式。`UITableViewDelegate`一旦用户在 UITableView 中选择了一行，您就会通过您的方法（特别是`didSelectRowAtIndexPath`）得到通知。您可以使用 indexPath 从您正在使用的任何数据结构（在您的情况下，`NSDictionary`）中获取您需要的任何数据，并通过`prepareForSegueue`正确实现该方法将其传递给您接下来要显示的任何控制器。我建议在下一个 UIViewController 中定义一个属性，并为其分配要传递的数据`prepareForSegueue`。但是，我会考虑您是希望传递对数据的直接引用还是传递数据的深层副本——这实际上取决于您在该 VC 中要完成的工作。

# java - 关闭 FileInputStream 如何导致“设备上没有剩余空间”错误？

> ID：14606882
> 
> 赞同：10
> 
> 时间：2013-01-30T14:55:16.507
> 
> 标签：java, exception, ioexception, fileinputstream

我对我的程序最近开始抛出的错误有点困惑。

```
java.io.IOException: No space left on device
    at java.io.FileInputStream.close0(Native Method)
    at java.io.FileInputStream.close(FileInputStream.java:259)
    at java.io.FilterInputStream.close(FilterInputStream.java:155) 
```

我假设因为这是一个 FileInputStream，所以这个文件被保存在内存中，而不是物理磁盘上。内存级别看起来很棒，磁盘空间也很棒。这尤其令人困惑，因为它发生在 FileInputStream 关​​闭时。感谢您对如何发生这种情况的任何解释。

编辑：审查代码

```
if (this.file.exists()) {
            DataInputStream is = new DataInputStream(new FileInputStream(this.file));
            this.startDate = new DateTime(is.readLong(), this.timeZone);
            this.endDate = new DateTime(is.readLong(), this.timeZone);
            is.close();
        } 
```

正如您在上面看到的，我只是打开文件，读取一些内容，然后关闭文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:44:18.033

在这种情况下，从关闭流`IOException`的方法中抛出。`native`

将其定义为抛出异常的原因是因为该`close`操作执行最终操作`flush`- 因此，如果`IOException`在刷新期间发生 an ，它将被抛出。

您收到的异常有几个原因：

*   您可能缺乏对特定文件夹的写入权限。

*   您可能已超出配额。

我个人也建议你使用以下关闭流的方法：

```
if (this.file.exists()) {
    try {
        DataInputStream is = new DataInputStream(new FileInputStream(this.file));
        this.startDate = new DateTime(is.readLong(), this.timeZone);
        this.endDate = new DateTime(is.readLong(), this.timeZone);
    } catch (Exception ex) {
        // Handle the exception here
    } finally {
        is.close();
    }
} 
```

您还可以使用不会引发异常的[IOUtils](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#closeQuietly%28java.io.InputStream%29)方法，因为在您的情况下您没有更改文件并且您可能对该方法的结果不感兴趣。`closeQuietly``close`

**编辑：**

亨利是对的。我阅读`InputStream`并自动将其更改为`OutputStream`.

对文件的`close`操作`InputStream`不会改变文件本身，但可以改变`metadata`文件的 - 例如上次访问时间等。

# groovy - 如何将 groovy 中的方法的结果传递给 SOAPUi 中的请求正文

> ID：14606883
> 
> 赞同：0
> 
> 时间：2013-01-30T14:55:20.493
> 
> 标签：groovy, soapui

我可以先说我是编程和 SoapUI 的新手（更像是一周前）。对于提出我将要提出的问题，我提前道歉。

## 问题

基本上，我正在尝试自动化 web 服务。我需要在soapui 中使用Groovy 创建xml 并将其作为请求主体的一部分发送到Web 服务（REST 不是SOAP），并对收到的响应做一些断言。我将发送相当多的请求，因此是自动化的原因。

## 我提出的解决方案（我不确定）

```
import groovyx.net.http.HTTPBuilder
import groovyx.net.http.ContentType
import groovyx.net.http.Method

class XmlGenerator {

  // I created a class i.e. called XmlGenerator with a
  // static method called GetXML() which looks like this:
  public static def GetXML() 
  {
    def  writer = new StringWriter()
    def  xml = new MarkupBuilder(writer)
    xml.GetDMessage() //creating the xml message
    {
      PrescribedItems 
      {
        PrescribedMethod(xml,'Some Value','Some Value','Some Value')
        PrescribedItem
        {
          PrescribedMethod(xml,'Some Value','Some Value','Some Value')
        }
      }
    }
    return writer
  }

  // This method creates the XML needed but then i need to
  // pass the xml generated to a request boy; so i
  //create another method within the same class:  
  static def postXML(String baseUrl, String path)
  {
    def RequestBody = XmlGenerator.GetXML()  // i am not sure if this will work
    try 
    {
      def ret = null
      def http = new HTTPBuilder(baseUrl)
      http.request(Method.POST, ContentType.XML) 
      {
        uri.path = path
        body = RequestBody
      }
    }
    catch (groovyx.net.http.HttpResponseException ex) 
    {
      ex.printStackTrace()
      return null
    }
    catch (java.net.ConnectException ex) 
    {
      ex.printStackTrace()
      return null
    }
  }
} 
```

## 概括

一个用 2 个方法调用的类`XmlGenerator()`；`GetXML()`（用于生成 XML ）和`postXML()`（用于将生成的 XML 发送`GetXML()`到 Webservice。）

## 问题

1.  我如何确保其他请求消息使用这两种方法（`GetXML()`和`postXML()`），即我是否需要导入 groovy scripte.g。我是否进行导入... GroovyScriptName ，如果是，请如何？

2.  如何创建 xml 并在后续请求消息中运行请求。例如; 我这样做吗？`XmlGenerator() gen = new XmlGenerator()`, 然后做`gen.GetXML()`and`gen.postXML()`来创建和运行请求。另外，testRunner 在这一切中可以扮演什么角色

3.  `HTTPBuilder, ContentType , Method can not be resolved`即使我已在脚本中导入它们，运行代码当前也会抛出（见上文）

4.  最后，财产在构建这个框架中可以发挥什么作用？请记住，每个请求都将独立于另一个请求，即在测试执行期间没有任何内容从一个请求传递到另一个请求

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T22:42:22.110

您可以使用标准的 soapui 功能指定您正在测试的 REST 请求，如下所述：

[http://www.soapui.org/REST-Testing/getting-started.html](http://www.soapui.org/REST-Testing/getting-started.html)

按照上述页面中的步骤创建一个：

1.  新的 REST 服务
2.  新的 REST 资源
3.  新的 REST 方法

然后，您可以向调用该请求的测试用例添加 REST 测试步骤。

然后，您可以在 REST 测试步骤之前插入一个 Groovy 测试步骤来构建您的 xml 正文；这是一个构建 XML 字符串的简单示例：

```
import groovy.xml.MarkupBuilder

context.writer = new StringWriter()
def xml = new MarkupBuilder(context.writer)
xml.books() {
  book(name:'blue ocean') {
    format ('paperback')
    year ('2010')
  }
  book(name:'quicksilver') {
    format ('hardback')
    year ('2011')
  }
} 
```

请注意，将 XML 分配给上下文变量 (context.writer)。这使得它可以在测试运行期间用于测试用例范围内的后续步骤。

然后，将以下代码插入到 REST 测试步骤的正文中：

```
${=context.writer} 
```

最后，您可以选择在 REST 测试步骤中添加断言；这里有一些信息：

[http://www.soapui.org/Functional-Testing/getting-started-with-assertions.html](http://www.soapui.org/Functional-Testing/getting-started-with-assertions.html)

# c - 正态分布/标准偏差

> ID：14606884
> 
> 赞同：0
> 
> 时间：2013-01-30T14:55:21.940
> 
> 标签：c

我的说明：编写一个程序，开始询问用户正态分布的均值 u 和标准差 s（参见[wiki 文章](http://en.wikipedia.org/wiki/Normal_distribution)）

然后程序请求一个 N，然后请求 N 个值 x。对于每个 x，它都会写到`f(x)`屏幕上。请注意，程序仅向用户询问 u、s 和 N 一次。之后，它会一一请求 x 的 N 个值。在每个值 x 之后，它会写出函数的相应值。

我感到困惑的是**N**应该代表什么。我以为这是 x 的数量，但有人可以为我澄清一下吗？

```
#include <stdio.h>
#define _USE_MATH_DEFINES 
#include <math.h>
#include <stdlib.h>

int main()
{
double u,s, N, x1,math1, math2, math3,n, v, x;

printf("Enter Mean: ");
scanf("%lf", &u);
printf("Enter Standard Deviation: ");
scanf("%lf", &s);
printf("Enter number of x's: ");
scanf("%lf", &N);

    for (v=1; v<=N; v++)
    {
    printf("Enter Value: ");
    scanf("%lf", &x);
    n=(-1/2);
    printf("f(x)= ");
    math1 =1/(u*sqrt(2*M_PI));
    math2= (x-u)/s * (x-u)/s;
    math3= M_E * exp(n);
    x1 = math1 * exp(math3)*exp(math2);
    printf("%lf  \n", x1);
    }
system("Pause");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:58:17.133

`N`代表输入的数量

从这部分非常清楚： `for (v=1; v<=N; v++)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:59:32.313

如果您的说明是给定的，那么 N 确实代表所需的*x*值的数量。

您的程序就是这样做的，要求*x的**N*个值。

 *首先，它在程序开始时声明了一个变量*N*：

```
double u,s, N, x1,math1, math2, math3,n, v, x; 
```

然后它提示输入为整数：

```
printf("Enter number of x's: ");
scanf("%lf", &N); 
```

...最后使用该整数读取*x的**N*个值。

 *```
for (v=1; v<=N; v++)
{ 
```**

# eclipse - 在 Eclipse 中将项目重新连接到 SVN

> ID：14606888
> 
> 赞同：15
> 
> 时间：2013-01-30T14:55:33.660
> 
> 标签：eclipse, svn

我有一个项目已经由 SVN 版本控制了几个月，但现在突然之间，Eclipse 似乎没有将项目识别为处于版本控制之下。在团队菜单中，我只有 Apply Patch... 和 Share Project...

我按照其他地方的建议尝试了 Share Project，但 Eclipse 不认为该项目受版本控制。

所有 svn 目录都存在。

有趣的是，我尝试将项目共享到不同的存储库，但我收到一条错误消息，指出该项目已经是另一个 URL 的工作副本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T18:37:26.787

您可以尝试一些事情。

*   如果项目与 SVN 同步，可能最简单的方法是删除它并重新检查。
*   否则，您可以尝试从工作区（*而不是*磁盘！）中删除项目，然后将其重新导入工作区。
*   如果这不起作用，您可以尝试使用 SVN 命令行工具，例如`svn commit`，将您的本地项目与 SVN 存储库同步（并使用 Eclipse 重新检查）。
*   如果 SVN 命令行工具不起作用，则 SVN 文件可能存在实际问题。在这种情况下，您可以备份您的项目（包含未同步的更改），从 SVN 签出项目，并使用*diff*或*meld*等离线差异工具将更改转移到新签出的项目中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-30T15:00:55.677

尝试以下操作：在断开连接的项目中单击 -> Team->'share projectS'（复数，单数不起作用）

我现在无法在我的 PC 中重现它，但出现了重新连接到 svn 的选项 - 或使用项目中存在的 svn 信息进行连接 - 。（就像你将一个新项目放入 svn 一样，它会看到 svn 信息并要求你使用它）

我讨厌那些问题......

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-14T07:12:30.660

**团队 > 共享项目**工作正常。缺点是SVN支持**一个一个**共享项目，而不是一次共享多个项目。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-09T11:37:48.947

4 年太晚了，但对于任何面临这个问题的人来说：

*   如果在与 SVN 断开连接时，元数据被删除：

右键单击项目->

**团队**->**共享项目**-> **SVN** ->

使用现有存储库位置 -> 下一步 ->

浏览到项目的主干文件夹 -> 确定 -> 下一步 ->

在这里，您将获得一个提交评论框。只需按完成 - >

弹出窗口中会显示一个警告标志，上面写着“项目 xxx 已存在于存储库中并且有一些内容。您要继续吗？” ->

点击是->

将弹出一个窗口，显示准备提交的进度 ->

完成后，您将获得实际的提交窗口，显示所有已修改的资源 ->

点击此处**取消**->

它会将您的本地项目连接到 SVN，并且不会提交任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-14T23:16:59.627

我对“共享项目”的单数版本有更好的运气。必须手动将“主干”添加到建议的存储库路径。

# php - 使用简单的 HTML Dom 解析器获取连字符属性

> ID：14606889
> 
> 赞同：6
> 
> 时间：2013-01-30T14:55:35.923
> 
> 标签：php

StackOverflow 上有一个类似的问题。但是，我的问题有点不同。

我已经选择了具有我想要的图像的所需类的图像。早些时候，我用

`element->src`

获取 src 属性的值，但现在站点已将其替换为“data-src”。

我没有标签的全部内容，因此我不能使用 preg_replace。我有必需的元素，我只想能够做类似的事情

`$element->data-src`

我正在尝试使用 PHP SIMPLE HTML DOM PARSER 执行此操作，但还没有运气。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T15:02:07.453

尝试使用

```
$element->{'data-src'} 
```

# java - 如何防止在页面加载期间在文本框中重新键入键入的文本

> ID：14606894
> 
> 赞同：0
> 
> 时间：2013-01-30T14:55:45.270
> 
> 标签：java, html, servlets

当有一个没有内容的文本框时，我有一个页面可以处理错误。现在例如我有 3 个文本框，然后我只在两个文本框上放置文本。当我提交页面时，像“*”这样的错误处理程序将出现在提交过程之前的空文本框旁边。但是两个文本框的内容都不见了，所以我需要重新输入我之前输入的内容。如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:58:55.643

只需从请求参数映射中重新显示提交的值。

```
<input type="text" name="foo" value="${fn:escapeXml(param.foo)}" /> 
```

[JSTL](https://stackoverflow.com/tags/jstl/info) 不是强制显示的[`fn:escapeXml()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/escapeXml.fn.html)，但它可以帮助您避免[XSS 攻击漏洞](http://en.wikipedia.org/wiki/Cross-site_scripting)。

### 也可以看看：

*   [我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- hello world 示例完全相同，也许您从未见过我们的 JSP/Servlet/JSTL/EL wiki 页面，它们对于像您这样的初学者非常有用
*   [将表单提交到 Servlet 后，如何在 JSP 中保留 HTML 表单字段值？](https://stackoverflow.com/questions/3937624/how-can-i-keep-jsp-form-fields-values-in-the-form-after-submitting-the-form/3937783#3937783)
*   [JSP/Servlet Web 应用程序中的 XSS 预防](https://stackoverflow.com/questions/2658922/xss-prevention-in-java/2658941#2658941)

# mysql - MySQL，创建一个简单的函数

> ID：14606900
> 
> 赞同：41
> 
> 时间：2013-01-30T14:56:11.787
> 
> 标签：mysql, function, stored-procedures

我想创建一个简单的 MySQL 函数，我有这个 MySQL 程序：

```
CREATE PROCEDURE getUser(gU INT)
   SELECT * FROM Company
   WHERE id_number = gU;

CALL getUser(2); 
```

我需要一些帮助才能把它变成一个 MySQL 函数。在过程中使用函数的优缺点是什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-30T15:25:20.527

这是一个mysql函数示例。我希望它有所帮助。（我还没有测试过，但应该可以）

```
DROP FUNCTION IF EXISTS F_TEST //
CREATE FUNCTION F_TEST(PID INT) RETURNS VARCHAR
BEGIN
/*DECLARE VALUES YOU MAY NEED, EXAMPLE:
  DECLARE NOM_VAR1 DATATYPE [DEFAULT] VALUE;
  */
  DECLARE NAME_FOUND VARCHAR DEFAULT "";

    SELECT EMPLOYEE_NAME INTO NAME_FOUND FROM TABLE_NAME WHERE ID = PID;
  RETURN NAME_FOUND;
END;// 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-26T18:45:59.053

## MySQL函数示例：

**打开mysql终端：**

```
el@apollo:~$ mysql -u root -pthepassword yourdb
mysql> 
```

**如果该函数已存在，则删除该函数**

```
mysql> drop function if exists myfunc;
Query OK, 0 rows affected, 1 warning (0.00 sec) 
```

**创建函数**

```
mysql> create function hello(id INT)
    -> returns CHAR(50)
    -> return 'foobar';
Query OK, 0 rows affected (0.01 sec) 
```

**创建一个简单的表来测试它**

```
mysql> create table yar (id INT);
Query OK, 0 rows affected (0.07 sec) 
```

**将三个值插入表 yar**

```
mysql> insert into yar values(5), (7), (9);
Query OK, 3 rows affected (0.04 sec)
Records: 3  Duplicates: 0  Warnings: 0 
```

**从 yar 中选择所有值，每次运行我们的函数 hello：**

```
mysql> select id, hello(5) from yar;
+------+----------+
| id   | hello(5) |
+------+----------+
|    5 | foobar   |
|    7 | foobar   |
|    9 | foobar   |
+------+----------+
3 rows in set (0.01 sec) 
```

**将刚刚发生的事情用语言表达并内化：**

您创建了一个名为 hello 的函数，它接受一个参数。该参数被忽略并返回一个`CHAR(50)`包含值“foobar”的值。您创建了一个名为 yar 的表并在其中添加了三行。select 语句`hello(5)`为 yar 返回的每一行运行该函数。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2014-03-10T10:56:56.157

尝试`CREATE FUNCTION F_TEST(PID INT) RETURNS VARCHAR` 将此部分更改为 `CREATE FUNCTION F_TEST(PID INT) RETURNS TEXT`

并更改以下行。

`DECLARE NAME_FOUND TEXT DEFAULT "";`

它应该工作。

# xslt - 通用访问的非通用元素名称

> ID：14606909
> 
> 赞同：0
> 
> 时间：2013-01-30T14:56:30.687
> 
> 标签：xslt, xslt-1.0

如何创建一个 xsl 方法来获取通用的“list_object_1”或“list_object_2”，然后使用方法中的数字。被解析的数据无法更改。

要解析的数据

```
<list_objects>
  <list_object_1/>
  <list_object_1>
    <list_object_2/>
    ...
  </list_object_1> 
```

我认为创建一个名称与元素名称“list_object_”的开头匹配的模板会非常简单。这可能吗？我看到的所有关于starts_with 的示例都使用了元素名称，然后解析了值，而不仅仅是元素名称。

预期的模板类似于

```
<xsl:template match="starts-with(list_object_)>
   <bb>
   <xsl:apply-templates/>
   </bb>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:00:47.227

你几乎拥有它。这就是你需要的：

```
<xsl:template match="*[starts-with(local-name(), 'list_object_')]">
   <bb>
      <xsl:apply-templates/>
   </bb>
</xsl:template> 
```

# qt - QTCreator : 使用 qt 项目到另一个

> ID：14606910
> 
> 赞同：6
> 
> 时间：2013-01-30T14:56:34.753
> 
> 标签：qt, project, qt-creator

我想知道如何在 QTCreator 中将 QT 项目用于另一个项目。我用这个层次结构创建了一个子目录测试项目：

```
MainProject
  MainProject.pro
  ConsoleSubProject
    ConsoleSubProject.pro
    main.cpp
    firstclass.hpp
    firstclass.cpp
  GuiSubProject
    GuiSubProject.pro
    main.cpp
    mainwindow.hpp
    mainwindow.cpp 
```

我想在 GuiSubProject 中使用类“firstclass”（ConsoleSubProject）。为此，我在 GuiSubProject.pro 中添加了这一行：

```
include(../ConsoleSubProject/ConsoleSubProject.pro) 
```

当我尝试构建项目时，它给了我错误：

```
MainProject/GuiSubProject/mainwindow.hpp:4: error: QMainWindow: No such file or directory 
```

如果您对如何将项目类用于另一个项目有任何想法？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:29:00.680

你可以这样做：

**MainProject/common.pri**

```
 INCLUDEPATH  += $$PWD/ConsoleSubProject
    SOURCES      += $$PWD/ConsoleSubProject/firstclass.cpp
    HEADERS      += $$PWD/ConsoleSubProject/firstclass.hpp 
```

**MainProject/ConsoleSubProject/ConsoleSubProject.pro**

```
 include(../common.pri)
    QT += core
    SOURCES      += main.cpp 
```

**MainProject/GuiSubProject/GuiSubProject.pro**

```
 include(../common.pri)
    QT += core gui
    SOURCES      += main.cpp mainwindow.cpp
    HEADERS      += mainwindow.hpp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:06:48.880

而不是你的 GuiSubProject.pro 中的 include(../.....) 它应该是

```
 INCLUDEPATH    = ../ConsoleSubProject 
```

# django - 表单中的 Django 请求变量

> ID：14606912
> 
> 赞同：0
> 
> 时间：2013-01-30T14:56:44.593
> 
> 标签：django, internationalization, translation

我的表单需要来自 request 变量的数据，`request.LANGUAGE_CODE`但 forms.py 文件没有任何获取 request 变量的方法。

我使用“set_language 重定向视图”来设置语言，它工作正常，但我需要为表单随机生成一个选择下拉列表，我根本无法让 django 给我使用的语言代码。

下面`translation.get_language()`的代码片段中使用的仅返回“en-us”，但适用于每种语言。

```
class C21Form(ModelForm):
    principal_procedure_code= forms.ModelChoiceField(label=_('BlaBla'), queryset=diagCode.objects.filter(language=translation.get_language())) 
```

更新：

`forms.py`

```
class C21Form(ModelForm):
    principal_procedure_code= forms.ModelChoiceField(label=_('BlaBla'), queryset=diagCode.objects.filter(language=language_code))

    def __init__(self, language_code=None, *args, **kwargs):
        self.language_code = language_code
        super(C21Form, self).__init__(*args, **kwargs) 
```

`views.py`

```
 form = C21Form(request.LANGUAGE_CODE, request.POST) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:34:56.547

```
class C21Form(ModelForm):
    principal_procedure_code= forms.ModelChoiceField(label=_('BlaBla'), queryset=None)

    def __init__(self, language_code="hu", *args, **kwargs):
        super(C21Form, self).__init__(*args, **kwargs)
        self.fields['principal_procedure_code'].queryset = diagCode.objects.filter(language=language_code) 
```

是一种工作方式，首先我创建一个空查询集，然后过滤它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:10:09.670

您可以在初始化表单时传递变量。

在views.py中：

```
form = C21Form(request.LANGUAGE_CODE, request.POST or None) 
```

在 form.py 中：

```
def __init__(self, language_code=None, *args, **kwargs):
    self.language_code = language_code
    super(C21Form, self).__init__(*args, **kwargs) 
```

# javascript - Ajax 请求支持 Android

> ID：14606915
> 
> 赞同：2
> 
> 时间：2013-01-30T14:56:50.347
> 
> 标签：javascript, android, ajax, android-jsinterface

android(4.0 +) 是否支持 Ajax 请求。如果是这样，请提供一些帮助。我需要使用 javascript 从 android WebView 调用 ajax。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T14:38:57.293

我认为，这是 4.0.x 到 4.1.0 的问题

# treeset - 加载树集

> ID：14606925
> 
> 赞同：0
> 
> 时间：2013-01-30T14:57:25.740
> 
> 标签：treeset, ceil

嗨，我正在做一个项目，我将值加载到树集中。关键是时间。时代在增加（显然：）。将所有内容加载到树集后，我将返回并以特定间隔取出样本值（我不知道时间是多少，这就是我使用树以使用天花板方法的原因）我也想要稍后将所有点加载到数据库中。

我的问题是我是否使用树集使其过于复杂，因为这是一棵红黑树，它将不断调整大小，因为键显然是连续的。但我不确定是否有其他数据结构可以让我使用上限功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:31:47.350

我认为这是使用现成选项（在 Java 中）最简单的选项。[从我对 Google 的Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/overview-summary.html)的快速研究来看，我没有看到任何提供这种方法的东西，但如果我担心插入性能，我会围绕优先级队列构建一个层。

# javascript - 使用 JSON 规则验证 HTML 表单

> ID：14606927
> 
> 赞同：0
> 
> 时间：2013-01-30T14:57:29.710
> 
> 标签：javascript, jquery, html, json, validation

我想使用 JSON 创建一个表单，还需要验证 JSON 中定义的规则。

下面是我的 JSON 的样子：

```
{
   "modules":[
      {
         "type":"form",
         "action":"submit.aspx",
         "name":"registrationform",
         "container":"#maincontent",
         "fields":[
            {
               "id":"firstname",
               "label":"First Name",
               "name":"fname",
               "type":"text",
               "value":""
            },
            {
               "id":"email",
               "label":"Email",
               "name":"email",
               "type":"text",
               "value":""
            }
         ],
         "rules":
            {
                "fname" : "required", 
                "email"     :   {
                                    "required": "true",
                                    "email": "true"
                                }
            },
         "messages":
            {
                "fname" : "Enter your firstname",
                "email" :   {
                                "required": "Please enter a valid email address",
                                "minlength": "Please enter a valid email address"
                            }
            }
      }
   ]
} 
```

如何编写动态代码以使用 JSON 规则验证我的表单元素并显示错误消息（如 JSON 中所定义）？

是否有一些我可以直接使用的 jQuery 方法？

# javascript - Javascript 范围。如何插入 HTML 节点？

> ID：14606928
> 
> 赞同：1
> 
> 时间：2013-01-30T14:57:38.920
> 
> 标签：javascript, jquery, nodes, rich-text-editor

我的目标是替换文本并将其放在 tag 内。问题是“为什么要更改 'createHtmlCode' 的 createTextNode？”

```
 var pannel = $("#text");            
        var $iframe = $("<iframe>").attr("src","iframe.php");
        var iframe = $iframe.get(0);

        pannel.html($iframe);

       //BOLD BUTTON CLICK
        $("#bold").click(function(){                
            iframe.contentWindow.focus();
            iframe.focus();
            iframe.contentDocument.execCommand('bold', false);
            iframe.focus();
        });

        //H1 CLICK, HERE'S THE PROBLEM    
        // Replace the content with tags h1 + actual selection
        $("#h1").click(function(){
            var doc = iframe.contentWindow.document;
            var selected = iframe.contentWindow.getSelection(); 
            console.info(selected);
            if(selected.rangeCount){
                var range = selected.getRangeAt(0);
                var content = range;                    
                var text = new String(selected);
                range.deleteContents();       
                range.insertNode(iframe.contentDocument.createTextNode('<h1>' + text + '<h1>'));                    
            }

        }); 
```

# css - CSS - 保持悬停状态和延迟转换

> ID：14606932
> 
> 赞同：0
> 
> 时间：2013-01-30T14:58:06.747
> 
> 标签：css, hover, transition

我正在尝试在列表中的标签上创建过渡效果`<a>`，这将使嵌套列表显示。这很好，除了我希望它与 上的过渡效果一致`<a>`，持续 0.5 秒。尽管尝试了过渡延迟，但它似乎总是立即过渡。基本上，我希望在嵌套列表出现之前有 0.5 秒的延迟。

我还想要它，这样当用户将鼠标悬停在嵌套列表中的某个项目上时，该`<a>`元素仍保持其悬停状态。这可能吗？

我想尝试尽可能多地使用纯 CSS。

任何人都可以给我任何指导吗？我希望我已经解释得足够好。

JS 小提琴在这里：http: [//jsfiddle.net/WKfuW/1/](http://jsfiddle.net/WKfuW/1/)

请原谅奇怪的字符 - 我正在使用 @font-face 作为图标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:07:32.370

[http://jsfiddle.net/WKfuW/2/](http://jsfiddle.net/WKfuW/2/)

我能够通过转换不透明度而不是转换显示来实现您想要的目标。显示是一个切换 - 它可以打开或关闭。但是不透明度是一个范围，从 0 到 1。所以通过使用它，我能够延迟它、淡化它，并反过来做同样的事情。

有用的 CSS 是：

```
.option-list ul li ul
{
    display: block;
    opacity: 0;

    transition:opacity 0.5s ease 0.5s;
}

.option-list ul li:hover ul {
    opacity: 1;

    transition: opacity 0.5s ease 0.5s;
} 
```

# c# - 字典中的“已添加具有相同键的项目”

> ID：14606933
> 
> 赞同：3
> 
> 时间：2013-01-30T14:58:11.040
> 
> 标签：c#, .net, dictionary

我的 C# 代码有问题。我不断收到错误消息“已添加具有相同密钥的项目”，我尝试了网上建议的各种方法，但似乎无法摆脱它。有人可以帮忙吗。我在这条线上得到了错误

```
ExistIncInsList.Add(WSIncInstOutput[Insrow][0], Int32.Parse(WSIncInstOutput[Insrow][1])); 
```

以下是涉及此的代码部分。

卡拉博

```
Dictionary<string, int> ExistIncInsList = new Dictionary<string, int>();
for (int Insrow = 2; Insrow < WSIncInstOutput.Count(); Insrow++)
{
    int existincWSInsID = Int32.Parse(WSIncInstOutput[Insrow][1]);
    if (!ExistIncInsList.ContainsKey(WSInsName))
    {
         ExistIncInsList.Add(WSIncInstOutput[Insrow][0], Int32.Parse(WSIncInstOutput[Insrow][1]));
    }
    if (MaxIncIndID < existincWSInsID)
    {
        MaxIncIndID = existincWSInsID;
        if (MaxIncIndID > MaxIndID)
        {
            MaxIndID = MaxIncIndID;
        } 
     }
}

if (ExistIncInsList.ContainsKey(WSInsName))
{
    WSInsID = ExistIncInsList[WSInsName];
}
else
{
    WSInsID = MaxIndID + 1;
    MaxIndID++;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T15:01:24.620

检查正确的密钥：

```
if (!ExistIncInsList.ContainsKey(WSIncInstOutput[Insrow][0])) 
```

代替：

```
if (!ExistIncInsList.ContainsKey(WSInsName)) 
```

# sencha-touch-2 - 如何在 Sencha Touch 2 中将 html 附加到列表的底部？

> ID：14606937
> 
> 赞同：0
> 
> 时间：2013-01-30T14:58:17.327
> 
> 标签：sencha-touch-2

我想在列表下方附加一个加载 div，就像列表分页是如何做到的。（出于其他原因，我没有使用列表分页）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:00:37.097

将容器的布局设置为“vbox”，并在列表下方添加一个带有 html 的容器。

**例子：**

```
Ext.define("MyApp.view.MyView", {
    extend : "Ext.Container",
    config : {
        layout : 'vbox',
        fullscreen : true,
        items : [{
            xtype : 'list',
            itemTpl : '{name}',
            store : 'MyStore',
            layout : 'fit',
            flex : 1                    
        }, {
            height : 50,
            xtype : 'container',
            html : "HELLO WORLD"
        }]        
    }
}); 
```

Sencha Fiddle 示例：[http ://www.senchafiddle.com/#GJqsv](http://www.senchafiddle.com/#GJqsv)

# javascript - 在移动网站上构建类似 iOS 的照片查看器

> ID：14606938
> 
> 赞同：1
> 
> 时间：2013-01-30T14:58:19.833
> 
> 标签：javascript, html, css, slideshow, pinchzoom

我正在构建一个移动网站，我的客户所需的功能之一是一个类似 iOS 的照片查看器，用于查看他的产品照片。

每个产品有 3-4 张照片。我希望能够通过手势滚动浏览它们，并对它们中的每一个进行缩放。

我开始使用hammer.js 库来实现它，但我不确定它是否是我需要的。

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:40:51.730

我不知道hammer.js，但我发现iScroll 可以让您以最小的努力实现所有这些：http: [//cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

# php - 使用 PHP 生成多个图像

> ID：14606941
> 
> 赞同：0
> 
> 时间：2013-01-30T14:58:29.637
> 
> 标签：php, image-processing, gd

**代码**

```
$files = scandir("images");
$exclude = array(".", "..");

$images = array_diff($files, $exclude);

foreach($images as $image) {

    $original_image  = imagecreatefromjpeg("images/{$image}");
    $original_width  = imagesx($original_image);
    $original_height = imagesy($original_image);

    $new_width  = 180;
    $new_height = floor($original_height * ($new_width/$original_width));
    $new_image  = imagecreatetruecolor($new_width, $new_height);

    imagecopyresampled($new_image, $original_image, 0, 0, 0, 0, $new_width, $new_height, $original_width, $original_height);

    header("Content-Type: image/jpeg");

    imagejpeg($new_image);
} 
```

**问题**

代码的调整大小部分工作得很好，但它只输出第一个调整大小的图像。我怎样才能让它转储所有调整大小的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:14:34.477

你不能这样做。`imagejpeg`“打印”图像的字节（这就是为什么结合正确的标题，您会在浏览器中看到该图片）。但是，打印多个图像（加上尝试更改标题）将不起作用，因为您正在“修改”第一个图像的字节，而不是将新图像附加到输出中。如果您想使用这样的解决方案，您可以：

1.  将每个图像保存在服务器中，然后以另一种方式访问​​这些图像（通过打印`<img>`指向图片的标签或抛出某种列出图像的结构）。

2.  如果您不想保存它们，您始终可以使用 base64 对字节进行编码，然后将其用作`<img src>`：

    ```
    ob_start ();
    imagejpeg ($new_image);
    $image_data = ob_get_contents ();
    ob_end_clean ();
    $image_data_base64 = base64_encode ($image_data);
    echo '<img src="data:image/jpg;base64,'.$image_data_base64.'" />'; 
    ```

你应该每次都这样做。

并且**非常重要**：始终`imagedestroy($new_image)`在 php 中输出（或完成您的工作）图像对象后使用：它将释放资源，因此您不会那么容易收到“内存耗尽”错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:22:22.040

该行：

```
header("Content-Type: image/jpeg"); 
```

让您的浏览器了解您的内容是**图像**。

这就是如果您在一个文件夹中选择 2 个图像，右键单击并打开它们。您的图像不会像只有一张一样显示在一起。

完成工作的一种方法是创建一个执行 2 件事的页面：

*   如果有参数则显示图像
*   `<img>`如果没有参数，则将所有图像显示为标签

这是一个例子。

```
// The argument is set: we display one image as png
if (array_key_exists('img', $_GET)) {

    $image = $_GET['img'];

    // security: prevents access to unauthorized directories (by giving "../../file.jpg" as file)
    $goodPath = realpath('images');
    $wantedImage = realpath("images/{$image}");
    if (strncmp($wantedImage, $goodPath, strlen($goodPath)) != 0) {
        die();
    }

    // if user wants an image that does not exists, we prevent GD errors
    if (!is_file($wantedImage))
    {
        die();
    }

    // and your code here, to display only ONE image

    $original_image  = imagecreatefromjpeg("images/{$image}");
    $original_width  = imagesx($original_image);
    $original_height = imagesy($original_image);

    $new_width  = 180;
    $new_height = floor($original_height * ($new_width/$original_width));
    $new_image  = imagecreatetruecolor($new_width, $new_height);

    imagecopyresampled($new_image, $original_image, 0, 0, 0, 0, $new_width, $new_height, $original_width, $original_height);

    header("Content-Type: image/jpeg");
    imagejpeg($new_image);
    die();

// No argument: we display all images as image tags
} else {

    // security: prevents from xss exploits 
    $self = htmlentities($_SERVER['PHP_SELF']);

    // glob will get all files that matches your pattern
    $files = glob("images/*.[jJ][pP][gG]");

    // display image tags
    foreach ($files as $image) {
       $image = htmlentities($image);
       echo "<img src='{$self}?img={$image}' />";
    }

    die();

} 
```

# node.js - 来自nodejs的heroku api调用

> ID：14606942
> 
> 赞同：0
> 
> 时间：2013-01-30T14:58:33.273
> 
> 标签：node.js, heroku

有没有调用heroku api的nodejs模块？

我试过这个：node-heroku

有用：

```
heroku = require("heroku");
client = new heroku.Heroku({key: "deadbeef"});
client.get_releases("my_app", function (error, result) {}); 
```

但我无法开始工作：post_key、put_app ......有没有这方面的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:51:12.280

[GitHub 上有 node.js](https://github.com/avdgaag/heroku-api)的Heroku-API 包装器。看起来文档已关闭，因此您必须深入研究代码。

# ios - 异步绘图和触摸

> ID：14606943
> 
> 赞同：3
> 
> 时间：2013-01-30T14:58:34.683
> 
> 标签：ios, objective-c, uiview, drawrect

我有一个绘制区域（UIView），我在 CGContextRef 中绘制。
当然，我正在捕捉绘画。虽然 drawRect 方法会缓慢地绘制大量现有对象，但不会捕捉到触摸。
如果我在单独的线程中或使用函数“dispatch_async”在 drawRect 中调用绘图，它不会绘制，因为它没有适当的上下文。
我搜索了很多，但一无所获。

```
dispatch_async(dispatch_get_main_queue(), ^{
    [_mainArea setNeedsDisplay];
}); 
```

*   这些东西也无济于事。

我能做些什么？任何人都可以帮助捕捉触摸并同时绘制大量物体吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T18:21:40.923

当您在保持图形更新时遇到问题时，在开始使用多线程之前...

1.  `display`您应该删除所有对or的调用`setNeedsDisplay`并将其替换为`setNeedsDisplayInRect:`

2.  您应该优化您的`drawRect:`方法，以便您只重绘视图中需要它的部分。您可以在此方法中获得更多幻想，并忽略该方法中的`rect`参数并获取从中提取的原始矩形`getRectsBeingDrawn:count:`。

3.  如果您正在绘制移动对象，请使用 CoreAnimation。

4.  如果您有很多重复的对象，请使用`CGLayerRef`s

`setNeedsDisplay`用 a调用`dispatch_async()`不会使视图在另一个线程上绘制；所有绘图都发生在 中`drawRect:`，并且`drawRect:`总是由主线程/队列调用。

`UIGraphicsGetCurrentContext()`不是线程安全的。然而，你*可以*做的是在你的异步块中创建一个位图上下文，描边并填充它，然后将这个上下文作为一个 CGImageRef 获取，它可以被编译到运行在主线程。它看起来像这样：

```
@implementation BGDrawingClass : UIVew {
    CGImageRef bgImage;
}

-(void)prepBGImage {

CGRect rect = TheRectISpendALotOfTimeIn();
dispatch_async(_myBGQueue,^{

        CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();
        CGContextRef ctx = CGBitmapContextCreate(nil, rect.size.width, rect.size.height, 8, rect.size.width * (CGColorSpaceGetNumberOfComponents(space) + 1), space, kCGImageAlphaPremultipliedLast);
        CGColorSpaceRelease(space);

        /* do expensive drawing in this context */

        bgImage = CGBitmapContextCreateImage(ctx);

        dispatch_async(dispatch_get_main_queue(),^{ 
             [self setNeedsDisplayInRect:rect];
        });
    });
}

-(void)drawRect:(NSRect)rect {
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    /* do drawing behind this ... */
    if (CGRectIntersectsRect(rect, TheRectISpendALotOfTimeIn()) {
        CGContextDrawImage(ctx, TheRectISpendALotOfTimeIn(), bgImage);
    }
    /* do drawing in front of this */
}
@end 
```

# c# - 包含未从 Nest 返回的同义词的结果

> ID：14606952
> 
> 赞同：1
> 
> 时间：2013-01-30T14:59:00.097
> 
> 标签：c#, elasticsearch, nest

我们正试图让我们的弹性搜索索引返回一个找到同义词的结果集

```
 var synonyms = new List<string> { "egg , embryo"};
        var indexSettings = new IndexSettings();
       // <snip>
        indexSettings.Analysis.TokenFilters.Add("synonym",
                                                new SynonymTokenFilter
                                                {
                                                    Synonyms = synonyms,
                                                    Expand = false,
                                                    IgnoreCase = true,
                                                }); 
```

通过 Elastic Search Head 查看索引元数据，我们检查了已创建的索引是否包含我们的同义词列表。一个示例同义词条目如下所示；“鸡蛋，胚胎”但是当我们做一个简单的查询时，我们没有得到任何结果

```
return ElasticClient.Search(s => s
            .Query(q => q
                 .QueryString(qs => qs
                     .Query("egg")
                 )
             )
        ); 
```

我们的实体看起来像这样（显示相关属性）

```
[ElasticType(Name = "Entry", IdProperty = "Id")]
public class Entry
{
        public int Id { get; set; }
        public string Title { get; set; }
} 
```

我们有一个索引条目，其标题为“胚胎”。我们尝试使用“=>”语法，并将 Expand 的各种排列设置为 true 和 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:23:54.407

您已成功注册名为“同义词”的新分析器，但仍需要将其应用到要设置同义词分析器的属性

[https://github.com/elasticsearch/elasticsearch-net/blob/master/src/Tests/Nest.Tests.Integration/Indices/Analysis/Analyzers/AnalyzerTests.cs](https://github.com/elasticsearch/elasticsearch-net/blob/master/src/Tests/Nest.Tests.Integration/Indices/Analysis/Analyzers/AnalyzerTests.cs)

对此有各种集成测试。

# javascript - HTML5 音频“触发播放”在 iPad 上不起作用

> ID：14606957
> 
> 赞同：3
> 
> 时间：2013-01-30T14:59:10.003
> 
> 标签：javascript, jquery, html, html5-audio

我有一个 HTML5 音频播放器，*应该*在单击元素时播放。它适用于所有桌面浏览器。它只是无法在 iPad 上运行。

我读过 ios 不支持自动播放，并且用户必须启动播放......据我所知，这正是我通过在点击函数中包含我的代码所做的事情？

```
 var item = $('.type-aud'),
        path = item.attr('file'),
        html = '<audio controls><source src="'+path+'" type="audio/mpeg" class="audio"></audio><span class="play"></span>',
        playerClass = item.find('.audio');

        if (!playerClass.hasClass('audio')) {
            item.append(html);          
        } 

        item.click(function() { 
            var player = item.find('audio');

            if (!player.hasClass('playing')) {
                $(player).addClass('playing').trigger("play").next().addClass('pause').removeClass('play');
            } else {
                $(player).removeClass('playing').trigger("pause").next().removeClass('pause').addClass('play');
            }
        }); 
```

我已经启用了调试控件，如果我在本机控件上按“播放”，它就会开始工作......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:23:16.570

我最近在做类似的事情，发现您无法使用`trigger`事件播放音频。

例如我在尝试

```
$('#btn').click(function(){
    myAudioControl.play();
});

$('#btn').trigger('click'); 
```

此代码将永远无法在 iOS5 上运行，因为它需要物理单击元素。

这里有一个很好的解决方案[通过 iOS 5 HTML5 应用程序中的 javascript 事件播放声音，](https://stackoverflow.com/questions/7856502/play-a-sound-via-javascript-event-in-ios-5-html5-app)我使用它来找到问题的解决方案。

当用户单击按钮时，我基本上让音频播放无声 mp3 文件，然后更新音频`src`。然后我可以通过任何触发器或事件动态播放音频文件。

# php - PHP / MySQL 中的任务队列：竞争条件

> ID：14606959
> 
> 赞同：2
> 
> 时间：2013-01-30T14:59:11.800
> 
> 标签：php, mysql, queue, conditional-statements, race-condition

我正在用 PHP 实现一个离线任务队列。在线页面在此表中插入一条记录以安排工作：

```
create table sl_task_queue (
    task_id int primary key auto_increment,
    task_data varchar(255) not null,
    started_date datetime,
    completed_date datetime,
    priority int not null default 10
) ENGINE=Innodb; 
```

然后，在离线状态下，我有一个 PHP CLI 进程池，它们处于循环等待工作的状态。为了查询工作，他们运行这个函数：

```
$SEMKey = "849039";
$seg = sem_get( $SEMKey, 2, 0666, -1) ; 

function getTask() {
    sem_acquire($GLOBALS['seg']);

    // This function returns null for no results, or a Task ORM object on success
    $Task = eSqlObject("Task", "select * from sl_task_queue 
        where started_date is null 
        order by task_id asc limit 1 for update"); 

    if( $Task ) {
        // Set started_date to claim this task
        $Task = new LucidityTask($hash);
        $Task['started_date'] = date("Ymd H:i:s");
        $Task->save(); // performs an UPDATE query
    }

    sem_release($GLOBALS['seg']);   

    return $Task;
} 
```

我在这里尝试了两件事，一个 PHP 信号量和 MySQL 的“SELECT ... FOR UPDATE”功能。我还尝试了一个完整的 LOCK TABLE 命令。尽管如此，我仍然在守护进程中的两个进程声称同一行时遇到问题，我无法确定原因。几个怀疑 - 当您执行单独的 CLI 进程时，PHP 的信号量是否进入 derp 模式？或者 MySQL 是否在花时间实际更新基础表数据，以便在此函数退出后，SELECT 查询仍会在短时间内返回旧数据？

还有其他想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:12:32.397

嘎！这就是为什么复制/粘贴是邪恶的。这是问题所在：

```
$seg = sem_get( $SEMKey, 2, 0666, -1) ; 
```

“2”允许两个进程一次获取信号量。谢谢，路易斯H.！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T14:51:41.900

添加其他字段...例如 uniqueID

1）生成唯一ID ...

```
$uniqueID = uniqid(); 
```

2）更新一行。设置字段 uniqueID = $uniqueID

3) 选择 1 行，其中 uniqueID = $uniqueID 如果行存在 -> 做其他工作 -> 尝试标记/获取另一条记录

4) 作业完成时删除 uniqueID = $uniqueID 的行。

利润！:)

另外，您可以设置“endTime” = currentDateTime + N_Minutes（分钟 - 该行将被锁定多长时间）并在 endTime < now() 时清除 uniqueID

# php - PHP试图获取非对象的属性

> ID：14606970
> 
> 赞同：0
> 
> 时间：2013-01-30T15:00:00.177
> 
> 标签：php, apple-push-notifications

我正在运行一个 APNS PHP 脚本，它工作正常，但是一个文件引发 PHP 错误，我想知道我应该如何修复它。

弹出以下错误：

```
/usr/bin/php -f /usr/share/nginx/www/processFeedback.php

<br/>Started processing FeedbackPHP Notice:  Trying to get property of non-object in /usr/share/nginx/www/processFeedback.php on line 46
PHP Warning:  stream_socket_client(): unable to connect to  (Failed to parse address "") in /usr/share/nginx/www/classes/Apns.php on line 66
PHP Notice:  Undefined variable: errstrn in /usr/share/nginx/www/classes/Apns.php on line 69
PHP Fatal error:  Uncaught exception 'Exception' with message '<br/>Failed to connect 0 ' in /usr/share/nginx/www/classes/Apns.php:69
Stack trace:
#0 /usr/share/nginx/www/classes/Apns.php(49): Apns->connect()
#1 /usr/share/nginx/www/processFeedback.php(46): Apns->__construct(NULL, 'certificates/ck...', 'passwd')
#2 {main}
  thrown in /usr/share/nginx/www/classes/Apns.php on line 69 
```

第 46 行：

```
$apns = new apns($server->ServerUrl, $certificatePath, $certificate->Passphrase); 
```

第 66 行：

```
$this->stream = stream_socket_client($this->server, $err, $errstr, 60, STREAM_CLIENT_CONNECT, $ctx); 
```

第 69 行：

```
throw new Exception("<br/>Failed to connect $err $errstrn"); 
```

PHP文件：[https ://github.com/bortuzar/PHP-Mysql---Apple-Push-Notification-Server/blob/master/processFeedback.php](https://github.com/bortuzar/PHP-Mysql---Apple-Push-Notification-Server/blob/master/processFeedback.php)

DataService.php：[https ://github.com/bortuzar/PHP-Mysql---Apple-Push-Notification-Server/blob/master/classes/DataService.php](https://github.com/bortuzar/PHP-Mysql---Apple-Push-Notification-Server/blob/master/classes/DataService.php)

APNS.php：[https ://github.com/bortuzar/PHP-Mysql---Apple-Push-Notification-Server/blob/master/classes/Apns.php](https://github.com/bortuzar/PHP-Mysql---Apple-Push-Notification-Server/blob/master/classes/Apns.php)

我不是 PHP 专家，所以我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:04:19.007

刚刚在堆栈跟踪中发现了这个：

```
#1 /usr/share/nginx/www/processFeedback.php(46): Apns->__construct(NULL, 'certificates/ck...', 'passwd') . 
```

这清楚地表明 $server 为 NULL。您期望 ServerUrl 是什么？也许您可以在相关行中将其作为字符串输入，如下所示：

```
$apns = new apns('myServerUrl', $certificatePath, $certificate->Passphrase) 
```

# apache-flex - 如何识别 Flex 是否将 NaN 传递给 ColdFusion

> ID：14606973
> 
> 赞同：2
> 
> 时间：2013-01-30T15:00:05.400
> 
> 标签：apache-flex, coldfusion, nan, remoteobject

Flex 应用程序通过 RemoteObject 执行远程 ColdFusion 方法。远程方法参数是 VO。VO 的数字字段之一是 NaN。如何在 CF 端识别 NaN？

我试过以下：

这返回“真”：

```
isDefined("vo.numeric_field_NaN")
isNumeric(vo.numeric_field_NaN) 
```

这将返回“假”：

```
isNull(vo.numeric_field_NaN) 
```

所以，我使用了以下表达式，它在 vo.numeric_field_NaN 为 NaN 时返回“true”：

```
((vo.numeric_field_NaN GT 0) AND (vo.numeric_field_NaN LT 0)) 
```

如果有办法更明确地确定 NaN，请提出建议。

PS：

我试图将此值写入文件，但写入“？” 而且我没有成功找到正确显示符号的编码。我试过嗅探器显示对“%FD”的请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:20:16.280

将变量传递给 setter 时，用 val() 包装变量。任何字符串值都将被转换为零。

# android - Soundex/Metaphone 用于 android 上的 phonegap

> ID：14606974
> 
> 赞同：3
> 
> 时间：2013-01-30T15:00:08.333
> 
> 标签：android, sql, cordova, soundex

我需要使用类似的东西进行 sql-searches:`soundex`或`metaphone`for `android`over `phonegap`。

但既不工作`soundex`也不`metaphone`工作。

例子： `SELECT * FROM customers WHERE soundex(surname) = soundex('Mayer');`

这给我带来了`soundex`未知的信息。

有人知道我如何使用（）或类似的`soundex`东西吗？`soundex``phonegap``android`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-25T02:43:52.897

可以在您的电话间隙代码中创建 soundex/metaphone 索引。在 Javascript 中，您可以使用[clj-fuzzy 库](http://yomguithereal.github.io/clj-fuzzy/javascript.html#double_metaphone)。

1.  将 soundex/metaphone 列添加到您的`customers`表中。
2.  当您插入/更新记录时，在 Javascript 中计算 soundex/metaphone 索引，并插入/更新该值。
3.  执行搜索时，您可以计算搜索条件的 soundex/metaphone 索引，并根据 soundex/metaphone 列检查其相等性。

所以插入可能看起来像：

`insert into customers (surname, surname_metaphone) values ('Smith', 'SM0')`

和选择喜欢：

`select * from customers where surname_metaphone = 'SM0'`

# highcharts - 多个独立轴

> ID：14606977
> 
> 赞同：3
> 
> 时间：2013-01-30T15:00:17.473
> 
> 标签：highcharts

嗨，我正在尝试设置一个图表，如下所示：

[http://jsfiddle.net/tXz73/](http://jsfiddle.net/tXz73/)

本质上是一个更高/更低的百分比堆积图，然后是右手轴上的索引图（不是基于百分比）

我有一个问题，“索引”中的数据似乎正在影响堆叠柱形图的比例？

我已经设置

```
yAxis: 1 
```

但这似乎并没有孤立这个系列？

我可以设置一个标志来阻止这种情况发生吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:24:58.763

知道了！在图表设置中：

```
alignTicks: false, 
```

这将取消 2 个轴的链接，然后：

```
gridLineWidth: 0, 
```

在第二个 y 轴定义内保持图表整洁！

# javascript - 同时淡入淡出

> ID：14606985
> 
> 赞同：0
> 
> 时间：2013-01-30T15:00:34.403
> 
> 标签：javascript, jquery

我想同时淡入/淡出。我有以下内容：

```
visiblePanel.fadeOut(FU.featureTiming.transition, function () {
    visiblePanel.next().fadeIn(FU.featureTiming.transition, function () {
        visiblePanel.next().find('img').removeClass('displayNone')
    });
}); 
```

如何淡出图像并同时淡入下一个图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:02:49.087

只需不要在回调中调用下一个淡入淡出，而是立即调用它：

```
visiblePanel.fadeOut(FU.featureTiming.transition);
visiblePanel.next().fadeIn(FU.featureTiming.transition, function(){
    visiblePanel.next().find('img').removeClass('displayNone')
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:09:37.793

这是一个 div 淡入和另一个同时淡出的示例：

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#box1').fadeOut('slow', function() {
                 // Animation complete
            });
            $('#box2').fadeIn('slow', function() {
                 // Animation complete
         });
});
</head>
<body>
    <div style="width:100px; height:100px; background-color:green" id="box1"></div>
    <div style="width:100px; height:100px; background-color:red; display:none"  id="box2"></div>
</body>
</html> 
```

如果您希望事件同时发生，请不要使用回调。回调函数在动画结束时执行

# ruby - 我应该如何处理 APP_KEY 和 APP_SECRET (Dropbox API)

> ID：14606988
> 
> 赞同：4
> 
> 时间：2013-01-30T15:00:44.690
> 
> 标签：ruby, security, dropbox, dropbox-api

我使用 Dropbox API 编写了一段简单的代码，这意味着我的应用程序使用了 APP_KEY 和 APP_SECRET。假设有人也想使用我的应用程序。我创建了一个 github 存储库，推送代码等等，但是，当然，我没有放 APP_KEY 和 APP_SECRET**值**。用户是否必须注册自己的此应用程序实例？有没有其他的处理方式？也许共享 APP_KEY 和 APP_SECRET 就足够安全了？

换句话说，Dropbox 禁止使用用户名-密码对进行身份验证（而他们自己的官方应用程序正是这样做的），但我想（例如）为 KDE 的 Dolphin 制作一个插件，用于从上下文菜单和用户获取文件的公共链接甚至不应该知道所有这些秘密，钥匙等等。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:32:55.020

在我看来，应用程序密钥和秘密应该标识您的应用程序实例/版本，而不是代码本身。因此，如果您想发布代码本身，例如在 github 上，则不应包含应用程序密钥和秘密。（这样做的一种方法是将它们保存在应用程序将从中读取的配置文件中，但不要将配置文件包含在公共存储库中。）

然后，当您发布您的应用程序（即，向最终用户供一般用途）时，它可以包含嵌入其中的应用程序密钥和秘密，用户无法清楚地看到。当然，这里的细节是根据场景来判断的。例如，未编译的应用程序（例如，shell 脚本）默认情况下以纯文本形式提供源代码，即使在“发布”时也是如此，因此您可能不想包含它们。

但或者，如果任何其他开发人员想要使用代码并自己构建应用程序（从源代码），他们应该注册并使用自己的应用程序密钥/秘密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T06:45:08.920

您可以使用[Dropbox API Key Encoder](https://dl-web.dropbox.com/spa/pjlfdak1tmznswp/api_keys.js/public/index.html)对您的密钥进行编码，并使用[dropbox.js 对其](https://github.com/dropbox/dropbox-js)进行解码。这样你就不需要暴露你的密钥

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-10T22:06:42.667

我正在使用 Figaro Gem 隐藏我的 Dropbox 密钥：[https ://github.com/laserlemon/figaro](https://github.com/laserlemon/figaro)

# c++ - 检测伴随的 DLL 链接和通信 (C++)

> ID：14606998
> 
> 赞同：0
> 
> 时间：2013-01-30T15:01:09.970
> 
> 标签：c++, dll

我试图寻找答案，但没有什么能完全满足我的要求。

我正在编写一组可以作为包使用或单独使用的 DLL。如果应用程序还链接到 DLL-B，我将如何在 DLL-A 中进行检测

该应用程序并不总是由我编写，只是 DLL 的。

一旦我确认 DLL-B 是程序的一部分，我希望能够在 2 个 DLL 之间进行通信。

如果这没有意义，请告诉我，现在已经很晚了：P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:41:36.423

只需[`GetModuleHandle()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683199%28v=vs.85%29.aspx)使用您要检查的 DLL 的名称进行调用，无需路径。如果它返回`NULL`，则未加载 DLL。如果它以其他方式返回，则加载它。

然后您可以继续[`GetProcAddress()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)使用 DLL 句柄和您要调用的函数的名称进行调用。它将返回一个指向该函数的指针，您可以将其转换为适当的函数指针类型并调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:31:33.427

您需要创建一个`DLLMain`函数，该函数将在您的 DLL 被加载或卸载时调用。

[http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682583(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682583(v=vs.85).aspx)

```
BOOL WINAPI DllMain(HINSTANCE hinstDLL,
DWORD     fdwReason,
LPVOID    lpvReserved)
{
    switch (fdwReason)
    {
        case DLL_PROCESS_ATTACH:
            /* Init Code here */
            break;

        case DLL_THREAD_ATTACH:
            /* Thread-specific init code here */
            break;

        case DLL_THREAD_DETACH:
            /* Thread-specific cleanup code here.
            */
            break;

       case DLL_PROCESS_DETACH:
            /* Cleanup code here */
            break;
    }
    /* The return value is used for successful DLL_PROCESS_ATTACH */
        return TRUE;

} 
```

现在在这里，您需要调用您设计的函数来注册 DLL 加载的事实（注意确保您查看上面每个开关案例的含义并进行适当的初始化）。老实说，它几乎可以做任何事情，但可能会调用一个[单例](https://stackoverflow.com/questions/1008019/c-singleton-design-pattern)并在那里注册（创建你的接口的一个实例？）。

一旦你有了它，你应该能够做你想做的事。如果您以相同的方式注册两个 DLL，您将获得 2 路通信。

注意，如果您提供 API，如果您对两个 DLL 有一些共同的初始化调用，以便用户设置“共享环境”，那可能会很好