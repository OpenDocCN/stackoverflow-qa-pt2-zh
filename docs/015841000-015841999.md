# StackOverflow 问答 15841000-15841999

# ios - UIView Gradient 使用 CAGradientLayer 总是蓝色

> ID：15841004
> 
> 赞同：1
> 
> 时间：2013-04-05T18:28:59.457
> 
> 标签：ios, objective-c, uiview, cagradientlayer

我正在尝试`UIView`使用深灰色渐变创建一个：

```
UIView *sectionSpacer = [[UIView alloc] init];
sectionSpacer.backgroundColor = [UIColor clearColor];
CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.frame = sectionSpacer.bounds;
gradient.colors = [NSArray arrayWithObjects:(id)[RGB(80, 83, 88) CGColor], (id)[RGB(69, 71, 73) CGColor], nil];
[sectionSpacer.layer addSublayer:gradient]; 
```

![在此处输入图像描述](https://i.stack.imgur.com/jKx2J.png)

由于某种原因，即使 RGB 值是深灰色，渐变视图也始终为蓝色。为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:32:58.443

如果您只是`init`没有框架的视图，它将默认为`CGRectZero`，因此您的图层也将具有`0`宽度和高度，这就是您看不到它的原因（您看到的渐变看起来像`UITableView`可能来自其他地方的标准标题，我怀疑它甚至与您在显示的代码中初始化的视图相同）。

# python - python fabric找不到主机必须手动设置'env.host_string'

> ID：15841024
> 
> 赞同：5
> 
> 时间：2013-04-05T18:30:17.447
> 
> 标签：python, fabric, env

有没有办法让它与 env.hosts 一起工作？而不是每当我有多个主机运行它时必须手动循环？

我正在尝试使用fabric api，而不必使用非常不方便且笨拙的fabric 命令行调用。我在一个模块/类中设置了 env.hosts 变量，然后调用另一个类实例方法来运行结构命令。在被调用的类实例中，我可以打印出 env.hosts 列表。然而，当我尝试运行命令时，它告诉我找不到主机。

如果我遍历 env.hosts 数组并为 env.hosts 数组中的每个主机手动设置 env.host 变量，我可以让运行命令工作。奇怪的是，我还在调用类中设置了 env.user 变量并且它*被*拾取。

例如这有效：

```
 def upTest(self):
        print('env.hosts = ' + str(env.hosts))
        for host in env.hosts:
            env.host_string = host
            print('env.host_string = ' + env.host_string)
            run("uptime") 
```

输出：

```
env.hosts = ['ec2-....amazonaws.com']
env.host_string = ec2-....amazonaws.com
[ec2-....amazonaws.com] run: uptime
[ec2-....amazonaws.com] out:  18:21:15 up 2 days,  2:13,  1 user,  load average: 0.00, 0.01, 0.05
[ec2-....amazonaws.com] out: 
```

这不起作用...但是如果您从“fab”文件运行它确实有效...对我来说毫无意义。

```
 def upTest(self):
        print('env.hosts = ' + str(env.hosts))
        run("uptime") 
```

这是输出：

```
No hosts found. Please specify (single) host string for connection: 
```

我确实尝试在方法上放置一个@task 装饰器（并删除'self'引用，因为装饰器不喜欢那样）。但无济于事。

有没有办法让它与 env.hosts 一起工作？而不是每当我有多个主机运行它时必须手动循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T09:50:25.663

**最后，我通过使用 execute() 和 exec 解决了这个问题。**

主文件

```
#!/usr/bin/env python

from demo import FabricSupport

hosts = ['localhost']

myfab = FabricSupport()
myfab.execute("df",hosts) 
```

演示.py

```
#!/usr/bin/env python

from fabric.api import env, run, execute

class FabricSupport:
    def __init__(self):
        pass

    def hostname(self):
        run("hostname")

    def df(self):
        run("df -h")

    def execute(self,task,hosts):
        get_task = "task = self.%s" % task
        exec get_task
        execute(task,hosts=hosts) 
```

蟒蛇主.py

```
[localhost] Executing task 'hostname'
[localhost] run: hostname
[localhost] out: heydevops-workspace 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-11T09:26:53.150

我发现最好不要`env.hosts`在代码中设置，而是根据您的配置文件定义角色并使用 fab 工具指定角色。它对我有用

my_roles.json

```
{
    "web": [ "user@web1.example.com", "user@web2.example.com" ],
    "db": [ "user@db1.example.com", "user@db2.example.com" ]
} 
```

工厂文件.py

```
from fabric.api import env, run, task
import json

def load_roles():
    with open('my_roles.json') as f:
        env.roledefs = json.load(f)

load_roles()

@task
def my_task():
    run("hostname") 
```

命令行界面

`fab -R web my_task`

`my_task`每个运行的输出`web1`和`web2`在这里

# c++ - 仅当窗口处于焦点时才查找按键

> ID：15841027
> 
> 赞同：0
> 
> 时间：2013-04-05T18:30:25.703
> 
> 标签：c++

我正在编写一个与一些测试设备接口的程序。我希望用户能够按下按钮来停止测试，但前提是程序处于焦点。这是因为他们可以同时使用他们的电脑进行其他工作。这就是我现在所拥有的。

if ((GetAsyncKeyState(VK_ESCAPE) & 0x8000)&&(GetFocus() == FindWindow(NULL,TEXT("窗口名称")))){

```
 break; 
```

}

问题是，即使用户正在处理其他程序，按键仍然是确定的。我也希望在不等待用户输入的情况下发生这种情况，以便程序可以继续运行（我意识到我可能可以使用线程，但我认为在这种情况下这似乎有点矫枉过正）。如果有人知道我可以在 IF 语句的后半部分使用的语句，那将是很棒的，甚至是完全不同的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:39:47.537

狂猜这个。也许您可以使用 GetForegroundWindow 函数并根据您的测试窗口句柄检查句柄。可能更好的方法是让您的测试窗口处理 WM_KEYDOWN 消息。我的理解是，仅当窗口具有焦点时才会发布此消息。

# java - 在创建侦听器时省略空函数签名

> ID：15841028
> 
> 赞同：0
> 
> 时间：2013-04-05T18:30:25.987
> 
> 标签：java, inner-classes

对不起新手问题 - 在实现 MouseListener 类（或所有其他内部类）时是否可以省略空函数签名？
所以代码会缩小几行？

```
 JButton btnExit = new JButton("Exit");
    btnExit.addMouseListener(new MouseListener() {
        @Override public void mouseReleased(MouseEvent arg0) {}
        @Override public void mousePressed(MouseEvent arg0) {System.exit(0);}
        @Override public void mouseExited(MouseEvent arg0) {}
        @Override public void mouseEntered(MouseEvent arg0) {}
        @Override public void mouseClicked(MouseEvent arg0) {}
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:36:41.410

使用[`MouseAdapter`](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseAdapter.html)并仅覆盖所需的功能

```
btnExit.addMouseListener(new MouseAdapter() {

    @Override public void mousePressed(MouseEvent arg0) {System.exit(0);}

}); 
```

# c++ - 返回地图循环的问题

> ID：15841032
> 
> 赞同：0
> 
> 时间：2013-04-05T18:30:36.910
> 
> 标签：c++, for-loop, iterator, stdmap

我有一个包含与精灵关联的字符串的地图。此函数用于返回要在屏幕上绘制的精灵。这是功能：

```
sf::Sprite LoopSprite()
{
    for (std::map<std::string,sf::Sprite>::iterator it=SpriteMap.begin(); it!=SpriteMap.end(); ++it)
    {
       return it->second;
    }
} 
```

我曾经将它们放在一个矢量中，这使得绘制循环变得容易，但我想使用一个地图来更容易识别以维护代码。上面的函数只允许从地图中绘制一张图像。这个功能有问题吗？

```
sf::Sprite LoopSprite(int element)
{
    return vec[element];
} 
```

正如所指出的，这是有效的，因为它需要一个元素，所以只有一个返回，但我想要相同的结果，除了地图。问题是发送 0-vec.size 很容易。我唯一的想法是拥有一个字符串向量以允许轻松循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:42:11.703

您的函数将简单地`return`在第一次迭代中，仅返回地图中的第一个元素。

您在评论中说，最初，当您使用向量时，该函数接受一个`int`参数并返回该元素。如果你仍然想要这个功能，你可以用这样的地图来实现同样的功能：

```
sf::Sprite LoopSprite(std::string key)
{
    return SpriteMap[key];
} 
```

如果您想遍历内部地图的元素`LoopSprite`，那么您需要将实际上对每个元素执行某些操作的代码行移动到函数中：

```
void LoopSprite()
{
    for (std::map<std::string,sf::Sprite>::iterator it=SpriteMap.begin(); it!=SpriteMap.end(); ++it)
    {
       // Do something with it->second
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:01:07.867

首先，您要返回不允许的局部变量。即使从函数返回后，它也可能为 null 或无效。

您只返回`SpriteMap.begin()`实际上无用的这部分。这段代码要容易得多。

```
sf::Sprite LoopSprite(string key)
{
    std::map<std::string,sf::Sprite>::iterator it = SpriteMap.begin();

    while(it!=SpriteMap.end())
    {
       if(check) // check if this is your desired key
           return value;
       ++it;
    }
    return null;
} 
```

map 通常以简单的方式使用：

```
string key = "keyItem";    
sf::Sprite ans = SpriteMap[key]; 
```

# asp.net - LINQ 中的匿名类型成员声明符无效

> ID：15841035
> 
> 赞同：12
> 
> 时间：2013-04-05T18:30:40.707
> 
> 标签：asp.net, linq

我有两个实体。一个是“学生”，另一个是“科目”。

这两个实体的详细信息类似于：

```
students { id, name}

subjects { studentID, subjectName, passed} 
```

其中“通过”是布尔类型。

现在我想查询他可以通过的学生姓名和科目数量如下：

```
var result = from s in db.students 
select new {s.name, s.subjects.Count(i => i.passed.Equals(true)}; 
```

但我收到错误消息：无效的匿名类型成员声明符。必须使用成员分配、简单名称或成员访问来声明匿名类型成员。

我不知道如何解决它。有人会帮我吗？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-05T18:33:03.617

这意味着您需要命名无法推断的匿名类型的属性

```
select new 
{
    s.name, 
    Count=s.subjects.Count(i => i.passed.Equals(true))
}; 
```

通常，属性名称就足够了，但是您使用的是 Count 方法，因此该属性没有固有名称

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-05T18:32:47.980

您必须添加匿名类型属性名称：

```
var result = from s in db.students 
             select new {
                 s.name,
                 count = s.subjects.Count(i => i.passed.Equals(true)
             }; 
```

只有在使用成员分配时才能跳过它们。编译器将从该成员中获取名称。这就是为什么`s.name`可以在不指定属性名称的情况下应用的原因。`Count()`是一个表达式，因此您必须指定属性的命名方式。

来源：[匿名类型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)

> 如果未在匿名类型中指定成员名称，编译器会为匿名类型成员提供与用于初始化它们的属性相同的名称。您必须为使用表达式(...)**初始化的属性提供名称**

# java - NullPointerException，试图将 JPanel 数组添加到容器

> ID：15841037
> 
> 赞同：0
> 
> 时间：2013-04-05T18:30:41.743
> 
> 标签：java, swing, nullpointerexception, jframe, jlabel

无法弄清楚为什么我会收到此异常，控制台返回此消息：

```
public static void main(String [] args){
JFrame b = new JFrame("Lotus");
Container pieces = new Container();
JLabel[] labelsP1 = new JLabel[10];
JLabel[] labelsP2 = new JLabel[10];

for(int i = 0 ; i < labelsP1.length ; i++){
    labelsP1[i] = new JLabel(B1); 
    for(int j = 0 ; j < labelsP2.length ; j++){
        labelsP2[j] = new JLabel(B2); 
    }
    for (JLabel label : labelsP1) {
        pieces.add(label);
    }

    Container c = b.getContentPane();
    c.setLayout(new GridLayout(13,3)); 
    c.add(pieces);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:37:16.240

您的第三个内部循环正在迭代抛出一个空数组

```
 for (JLabel label : labelsP1) {
        pieces.add(label);
    } 
```

//

```
for(int i = 0 ; i < labelsP1.length ; i++)
{
    labelsP1[i] = new JLabel(B1); 
    for(int j = 0 ; j < labelsP2.length ; j++)
    {
        labelsP2[j] = new JLabel(B2); 
    }
    for (JLabel label : labelsP1)   // null only labelsP1[0] is initialized
    {
        pieces.add(label);        
    }

    Container c = b.getContentPane();
    c.setLayout(new GridLayout(13,3)); 
    c.add(pieces);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T18:36:01.747

对于初学者来说，您似乎并没有向我们展示所有困难的代码。其次，您的第一个 for 循环是否包含它之后的所有代码？您似乎有支架错位的问题。我猜你需要一个闭合支架。

```
for(int i = 0 ; i < labelsP1.length ; i++){
        labelsP1[i] = new JLabel(B1); 
        for(int j = 0 ; j < labelsP2.length ; j++){
            labelsP2[j] = new JLabel(B2); 
    } 
```

到

```
for(int i = 0 ; i < labelsP1.length ; i++) {
    labelsP1[i] = new JLabel(B1);
}

for(int j = 0 ; j < labelsP2.length ; j++) {
    labelsP2[j] = new JLabel(B2); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:39:44.543

在下面的代码中：

```
for(int i = 0 ; i < labelsP1.length ; i++){
labelsP1[i] = new JLabel(B1); 
for(int j = 0 ; j < labelsP2.length ; j++){
    labelsP2[j] = new JLabel(B2); 
}
for (JLabel label : labelsP1) {
    pieces.add(label);
} 
```

您正在将**JLabels**一个一个地添加到数组**labelsP1**中，并且还对数组进行迭代。但是您正试图从中访问所有不存在的元素。

我建议您删除嵌套的 for 循环以获得正确的行为并避免 NullPointerException。

# opencart - Opencart 管理员登录重定向到购物车

> ID：15841042
> 
> 赞同：2
> 
> 时间：2013-04-05T18:30:50.473
> 
> 标签：opencart

我有一个全新安装的 opencart 1.5.5.1

当我访问管理员时，我得到登录页面，我登录并被重定向到`/admin/index.php?route=common/login`显示购物车主页而不是管理面板的页面。

如何访问管理面板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:37:10.933

如果您尝试登录并进行重定向以从非 www 版本转到您域的 www 版本（反之亦然），就会发生这种情况。如果你有这个，你需要调整你`/admin/config.php`以使用正确的域（即不需要重定向）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T14:14:22.683

检查您的管理员 htacess 文件！
就我而言，这就是问题所在。所以导航到这里：/admin 并搜索这个文件：
**.htacess.txt**
删除 txt 就可以了！

# html - 两个 HTML 问题：宽度 100% 不起作用和 Div 没有相互分离

> ID：15841043
> 
> 赞同：0
> 
> 时间：2013-04-05T18:30:54.183
> 
> 标签：html, width

首先，在显示图像的投资组合部分中，css 属性

```
width: 100% 
```

不管用。

其次，我有两个 DIV，由于某种原因，它们粘在一起。

我将如何解决这些问题？

小提琴在这里：http: [//jsfiddle.net/WjP9H/](http://jsfiddle.net/WjP9H/)

澄清：粘在一起的两个 div 是“images”和“about”div。如您所见，“about” div 的背景颜色也粘在“images” div 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:35:21.323

第一个问题：将 margin:0 添加到你的身体。第二个问题：你指的是哪个div？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:37:25.547

DIV 中是否有任何内容？有时，如果 DIV 中没有任何内容，即使将宽度设置为 100%，它也会折叠。

至于 DIV 粘在一起，您是否尝试过为 DIV 添加边距？

```
<div style="margin: 5px">Some content here.</div>
<div style="margin: 5px">Other content here.</div> 
```

# serial-port - ATMEGA32 UART 通信

> ID：15841050
> 
> 赞同：1
> 
> 时间：2013-04-05T18:31:13.257
> 
> 标签：serial-port, avr, atmel, atmega, usart

我正在尝试在 ATMEGA32 中进行串行通信，但我有一个问题：

在异步串行通信中，寄存器`UBRRH`和`UCSRC`寄存器都具有相同的位置。我不知道该位置将充当`UBRRH`哪些条件，以及对于哪些条件，它将充当`UCSRC`. 根据分配给这些寄存器的工作，我需要每个寄存器的不同值

在数据表中，他们提到了使用`URSEL`位在两个寄存器之间进行选择，但不知何故我不明白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T20:47:56.907

答案是：是的，`URSEL`有点。根据数据表：

> 当对该 I/O 位置进行写访问时，写入值的高位，即 USART 寄存器选择 (URSEL) 位，控制将写入两个寄存器中的哪一个。如果在写操作期间 URSEL 为零，则 UBRRH 值将被更新。如果 URSEL 为 1，则将更新 UCSRC 设置。

这意味着，当您写入 时`UCSRC`，无论您想放什么值，也要设置该`URSEL`位（确保`URSEL`是`1`）：

```
UCSRC = (1<<URSEL)| ... whatever else ... 
```

当您写入 时`UBRRH`，请确保该`URSEL`位必须为零。以下是一些不同的方法：

```
UBRRH = (0<<URSEL)| ... whatever else ...  // just showing that URSEL isn't set
UBRRH = ...some value...                   // simple not setting URSEL
UBRRH = (someValue)&(~(1<<URSEL)           // Ensuring that URSEL isn't set 
```

`URSEL`位只是一个高位。因此，无论您写入什么值`UCSRC`，设置（打开、制作`1`）高位（第 7 位）。写入时`UBRRH`，请确保清除第 7 位。另一种思考方式是，您写入的每个值都`UBRRH`必须小于 128。并且您要写入的每个值都`UCSRC`添加 128：这将打开第 7 位。这只是作为一种解释方式，代码上面比较清楚。

* * *

这是怎么做到的？我不知道，我不是uC设计师。看起来很可能是相同的 IO 位置位置映射到处理器中的两个不同寄存器。假设您有一个名为 的寄存器`foo`，当您向其写入值时，uC 检查是否设置了高位。如果是，则将值写入内部存储器位置`1`，如果不是，则将值写入内部存储器位置`2`。

* * *

如果您正确使用该`URSEL`位，则正确写入值。您的测试没有显示正确的值，因为您没有正确阅读它们。数据表第 162 页：

> 对 UBRRH 或 UCSRC 寄存器进行读访问是一个更复杂的操作。然而，在大多数应用中，很少需要读取这些寄存器中的任何一个。
> 
> 读访问由定时序列控制。读取 I/O 位置一次会返回 UBRRH 寄存器内容。如果在前一个系统时钟周期读取寄存器位置，则在当前时钟周期读取寄存器将返回 UCSRC 内容。请注意，读取 UCSRC 的时序是原子操作。因此，必须在读操作期间控制中断（例如通过全局禁用中断）。

所以当你第一次读`UBRRH`/你得到。如果您*立即*再次阅读，您将阅读。但正如文档所暗示的，没有真正的理由去读取这些寄存器。您似乎不信任数据表，但这是一个错误：数据表是有关此类问题的最佳信息来源：没有数据表，我们将一事无成。`UCSRC``UBRRH`*`UCSRC`*

# iphone - 多行uitextview

> ID：15841052
> 
> 赞同：0
> 
> 时间：2013-04-05T18:31:18.793
> 
> 标签：iphone, xcode, multiline

我希望在创建类似于雅虎在其 iPhone 应用程序上使用的用户名和密码框方面能获得一些帮助。它似乎在单个文本视图框中有一个分隔符。我对使用 Cocoa 还是很陌生，所以我还有很多东西要学。

我附上了我拍摄的屏幕截图的图像。

谢谢！

[截屏](http://i.stack.imgur.com/62b3m.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:59:10.730

The Yahoo screenshot shows what looks like a grouped UITableView with two cells. The separator is the line between the cells, and each of the cells would contain a UITextView.

# ios - 带 iAd 的应用和不带广告的应用应该在不同的项目中？

> ID：15841057
> 
> 赞同：0
> 
> 时间：2013-04-05T18:31:25.147
> 
> 标签：ios, browser, uialertview, iad, appstore-approval

这是我的问题，我制作了一个应用程序并放在了应用程序商店，但我希望对没有任何 iAd 的版本收费 69p ...以及免费内置 iad 的版本...

那么，我应该为每个版本制作两个单独的项目吗？如果弹出警报建议用户去应用商店购买无广告版本，我如何使用 iAd 制作免费版本？它只是一个带有委托方法的普通 UIAlertView 来调用 App Store 或在浏览器中将其作为 UIWeb 打开吗？我该如何实施？

有什么建议吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:18:53.260

您可以使用编译器标志来包装您的代码，以便您可以拥有一个源，并从同一个项目创建多个目标并构建多个应用程序（具有不同的应用程序标识符和所有内容）。

但是，这导致您必须在应用商店中管理两个不同的应用（两次输入相同的元数据），并处理两个不同应用的审核流程。

此外，人们可能会跳过您的付费版本，而他们会安装您的免费版本，然后再升级。

我建议您在应用商店中拥有一个来源、一个项目、一个目标和一个应用，并使用应用内购买 (IAP) 来关闭广告。

# iphone - 通过 AVFoundation 使用 iPhone 相机时如何避免阻塞 UI？

> ID：15841058
> 
> 赞同：10
> 
> 时间：2013-04-05T18:31:27.297
> 
> 标签：iphone, ios, camera, avfoundation, grand-central-dispatch

我试图在我的 iPhone 应用程序中嵌入一个简单的视图来快速拍摄快照。一切正常，但我在相机启动时间方面遇到了一些问题。在 Apple 示例项目中，AVCaptureSession`-startRunning`没有在主线程上执行，这似乎是必要的。我在视图初始化期间设置捕获会话，并在单独的线程中启动它。现在我添加`AVCaptureVideoPreviewLayer`in `-didMoveToSuperview`。没有多线程一切都很好（用户界面被阻塞了大约一秒钟），但使用 GCD 用户界面有时可以工作，有时用户界面“解冻”或显示预览需要太长时间。

如何在不阻塞主线程的情况下以可靠的方式处理相机的启动延迟（延迟本身不是问题）？

我希望你们能理解我的问题：D

提前致谢！

顺便说一句：这是我的概念验证项目（没有 GCD）我现在正在为另一个应用程序重用：http: [//github.com/dariolass/QuickShotView](http://github.com/dariolass/QuickShotView)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T22:39:06.247

So I figured it out by myself. This code works for me and produces the least UI freezing:

```
- (void)willMoveToSuperview:(UIView *)newSuperview {
    //capture session setup
    AVCaptureDeviceInput *newVideoInput = [[AVCaptureDeviceInput alloc] initWithDevice:self.rearCamera error:nil];
    AVCaptureStillImageOutput *newStillImageOutput = [[AVCaptureStillImageOutput alloc] init];
    NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys:
                            AVVideoCodecJPEG, AVVideoCodecKey,
                            nil];
    [newStillImageOutput setOutputSettings:outputSettings];

    AVCaptureSession *newCaptureSession = [[AVCaptureSession alloc] init];

    if ([newCaptureSession canAddInput:newVideoInput]) {
        [newCaptureSession addInput:newVideoInput];
    }

    if ([newCaptureSession canAddOutput:newStillImageOutput]) {
        [newCaptureSession addOutput:newStillImageOutput];
        self.stillImageOutput = newStillImageOutput;
        self.captureSession = newCaptureSession;
    }
    // -startRunning will only return when the session started (-> the camera is then ready)
    dispatch_queue_t layerQ = dispatch_queue_create("layerQ", NULL);
    dispatch_async(layerQ, ^{
        [self.captureSession startRunning];
        AVCaptureVideoPreviewLayer *prevLayer = [[AVCaptureVideoPreviewLayer alloc]initWithSession:self.captureSession];
            prevLayer.frame = self.previewLayerFrame;
            prevLayer.masksToBounds = YES;
            prevLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
            prevLayer.cornerRadius = PREVIEW_LAYER_EDGE_RADIUS;
        //to make sure were not modifying the UI on a thread other than the main thread, use dispatch_async w/ dispatch_get_main_queue
        dispatch_async(dispatch_get_main_queue(), ^{
            [self.layer insertSublayer:prevLayer atIndex:0];
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-06T00:50:01.583

我认为另一种避免的方法是您可以将“启动相机”代码放在 viewDidAppear 中，而不是将它们放在 viewWillAppear 中。

# gwt - 在 GWT 中，如何在单元格表的标题顶部添加一行？

> ID：15841066
> 
> 赞同：4
> 
> 时间：2013-04-05T18:32:22.317
> 
> 标签：gwt, header, header-files, celltable, gwtquery

这很有趣，我们如何在 GWT 中的 celltable 的顶部添加一行？

好的，说，GWT Header 只支持排序，但我也想在每一列上做其他的东西（比如过滤器，隐藏，....）

所以我想在单元格表的标题顶部添加一行。一行上有r个按钮，每个按钮对应一列。当用户单击按钮时，他们可以执行其他操作，例如过滤或隐藏。

例子：

按钮 1 - 按钮 2 - 按钮 3。

页眉 1 - 页眉 2 - 页眉 3。

单元 11 - 单元 12 - 单元 13。

单元格 21 - 单元格 22 - 单元格 23。

更多细胞....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T09:40:50.677

使用 GWT 的唯一方法是扩展实现并在创建其标头`CellTable`的部分创建您自己的黑客代码。`CellTable`此外，您还必须考虑添加许多方法来添加按钮、处理程序等。我之前已经处理过这个问题，这是一项非常乏味的任务。

但是您可以选择`DOM`在创建表后进行修改。有很多方法可以做到这一点，但我知道的更简单的方法是使用 gwtquery aka gquery。

在你的情况下，我会使用这样的代码：

```
 // import gquery stuff
 import static com.google.gwt.query.client.GQuery.*;

 // Create your table and add its colums
 final CellTable<MyObject> celltable = ...
 [...] 

 // Delay until the table has been full rendered, I use gquery delay() because 
 // of its syntax but you could use Scheduler or Timer as well
 $(celltable).delay(0, new Function(){
    public void f() {

     // Now we add a div to each header, you could add any html though
     $("th", celltable).prepend($("<div class='mypanel' style='height: 40px'/>"));

     // gquery's widget plugin is able to promote certain dom elements 
     // like div/th/... etc into HTMLpanels
     GQuery panels = $(".mypanel", celltable).as(Widgets).panel();

     // gquery can return a sorted list of widgets asociated with a set of elements
     List<HTMLPanel> list = panels.widgets(HTMLPanel.class);

     // Now you can add any gwt widget to your panels
     for (int i = 0; i < list.size(); i++) {
       list.get(i).add(new Button("Button: " + i));
     }
   }
}); 
```

这是生成上述代码的屏幕截图：

![带按钮的 CellTable](https://i.stack.imgur.com/pOq3N.png)

这种方法意味着您必须将[gwtquery](https://code.google.com/p/gwtquery/)导入您的项目，但老实说，我不认为我在没有它的情况下从事 GWT 项目:-)，

当设计人员要求增强 gwt-widgets 并且您不想强制执行调整（这通常意味着复杂的编码和调查）来执行非常简单的事情（例如修改小部件生成的 dom）时，Gquery 有很大帮助。

此外，Gquery 提供了很多可以利用的东西，比如简单的 ajax 语法、promise、插件、使用 js 方法和属性而无需编写 jsni 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:36:54.073

好吧，几乎不可能，在标题顶部添加一行`cell table.`

但是你说的功能可以通过添加一个horizantalpanel`zero padding`并将你添加 `buttons`到该面板来实现（显然按钮的宽度应该与你的列宽度相同并且几乎没有css。）

单击每个按钮后，您可以进行操作或排序`celltable.`

*免责声明：这是我可能的解决方案*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:59:22.007

从 GWT 2.5 开始，应该可以提供自定义`HeaderBuilder`或扩展[AbstractHeaderOrFooterBuilder](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/cellview/client/AbstractHeaderOrFooterBuilder.java?r=10597) / [DefaultHeaderOrFooterBuilder](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/DefaultHeaderOrFooterBuilder.html)来解决您的问题。
你可以看看这个[CustomTableGrid](http://showcase2.jlabanca-testing.appspot.com/#!CwCustomDataGrid)展示。它定义了一个自定义`CellTableBuilder`，但同样的原则也应该适用于`HeaderBuilder`接口。

# c++ - 在处理 winapi 时，python ctypes 与 c++ 有什么不同吗？

> ID：15841068
> 
> 赞同：0
> 
> 时间：2013-04-05T18:32:28.980
> 
> 标签：c++, ctypes

我更喜欢像 python 这样的动态语言，因为它的语法比像 c++ 这样的强类型语言更简单

我将编写广泛使用 win32 api 的代码，我的问题是在调用 winapi 时，ctypes 在性能和执行速度方面是否与 c++ 不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T00:56:06.140

纯 Python 代码不如 C++ 快。如果您计划广泛使用 Win32 API，与直接使用带有 Win32 API 的 C++ 相比，频繁地从 Python 类型转换为 C 类型并再次转换回来的成本很高。

您还应该查看[pywin32](http://sourceforge.net/projects/pywin32/)，这是一个将大部分 Win32 API 暴露给 Python 的库。正如@eryksun 在下面的评论中提到的那样，使用直接的 ctypes 意味着必须为 C 函数编写包装器、为结构编写定义以及为资源编写上下文管理器，这很容易出错。Pywin32 缓解了常用 Win32 API 的问题，但它并不包含所有这些。

# kinect - 没有找到现成的 kinect？

> ID：15841069
> 
> 赞同：4
> 
> 时间：2013-04-05T18:32:36.650
> 
> 标签：kinect

我是 Kinect 编程的初学者。我已经安装了windows sdk。我尝试在开发人员 takeit 中运行示例。但是，它说“没有找到现成的 kinect”。我知道知道为什么。谁能帮我解决这个问题？非常感谢！

元辉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-21T05:59:39.810

我也是初学者。其实我昨天刚拿到kinect，遇到了和你一样的问题。我安装的sdk是v1.8。这是我检查所有内容并解决它的方法：

1.  查看设备管理器以检查驱动程序是否已全部设置；
2.  检查您是否安装了最新的 DirectX，[方法](http://support.microsoft.com/kb/179113)如下；
3.  检查是否安装了.Net 4.0或以上版本；
4.  确保您的安装是干净的，这意味着在安装过程中应该拔掉 kinect。并确保在安装 sdk 和开发人员工具包后重新启动计算机。

# java - 使用 JFace 在表中呈现重复元素的索引

> ID：15841074
> 
> 赞同：0
> 
> 时间：2013-04-05T18:32:52.993
> 
> 标签：java, eclipse, jface

我一直在尝试使用 jface 渲染表格。问题是我渲染的列之一保存了数组内元素的索引。我执行以下操作：

```
TableViewerColumn tableViewerColumn = new TableViewerColumn(tableViewer, SWT.NONE);
tableViewerColumn.setLabelProvider(new ColumnLabelProvider() {      
    public String getText(Object object) {
        //EmployeeNames is list of String
        return String.valueOf(company.getEmployeeNames().indexOf(object)+ 1);
    }
}); 
```

如果有任何重复，这将始终返回第一个索引出现。我没有更改 EmployeeNames 类型的奢侈。

你能给我一个提示来处理这个索引问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:48:07.903

## 解决方案 1：单元格索引

这里有一个小类，可以用作列标签提供程序，以在 JFace TableViewer 中显示行号。

基本上，它不查找与单元格关联的对象的索引，而是查找单元格本身。

```
import java.util.Arrays;
import org.eclipse.jface.viewers.CellLabelProvider;
import org.eclipse.jface.viewers.ColumnViewer;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.jface.viewers.ViewerCell;
import org.eclipse.jface.viewers.ViewerColumn;

public class RowNumberLabelProvider extends CellLabelProvider {

    private TableViewer viewer;

    protected void initialize(ColumnViewer viewer, ViewerColumn column) {
        super.initialize(viewer, column);
        this.viewer = null;
        if (viewer instanceof TableViewer) {
            this.viewer = (TableViewer) viewer;
        }
    }

    public void update(ViewerCell cell) {
        super.update(cell);
        if (viewer != null) {
            int index = Arrays.asList(viewer.getTable().getItems()).indexOf(cell.getItem());
            cell.setText("" + (index + 1));
        }
    }
} 
```

要使用它，只需将其设置为列的标签提供者

```
TableViewerColumn tableViewerColumn = new TableViewerColumn(tableViewer, SWT.NONE);
tableViewerColumn.setLabelProvider(new RowNumberLabelProvider()); 
```

我不确定在启用过滤器或对表格进行排序时它是否也能正常工作。

* * *

## 解决方案 2：按参考搜索

作为替代方案，您也可以尝试通过引用查找对象：

```
 TableViewerColumn tableViewerColumn = new TableViewerColumn(tableViewer, SWT.NONE);
 tableViewerColumn.setLabelProvider(new ColumnLabelProvider() {

     public String getText(Object object) {
         int index = 1;
         for (String employee : company.getEmployeeNames()) {
             if (employee == object) 
                 return String.valueOf(index);
             index++;
         }
         return "";
     }
}); 
```

# java - 需要多个一对多映射的休眠示例

> ID：15841075
> 
> 赞同：0
> 
> 时间：2013-04-05T18:32:58.253
> 
> 标签：java, hibernate

一直在寻找，找不到这样的例子..我是 Hibernate 的新手，但可以创建一个单级 JSON ......如果我使用准备好的语句和多个数组，我可以做到这一点，但我无法得到它使用 Hibernate 和 createSQLQuery 工作。

我需要创建具有多个 1 到多个级别的 JSON，即：

{“成功”：真，“计数”：1，“消息”：“”，“数据”：[

{“进行中”：假，“项目”：“372”，“时间”：“09:00”，“日期”：“2013-03-22”，“状态”：“进行中”，

“标签”：[“第一”，“第二”，“第三”，“最后”]，

“项目”：[{“排名”：“第一”，“时间”：“6:36:05”，

“细节”：[{“间隔”：“1：31.63”}，

{“间隔”：“1：32.63”}，

{“间隔”：“1：35.99”}，

{ “间隔”：“1:38.63”} ] } ] } ] }

因此，多个项目中可以有多个详细信息，并且有多个标签。

```
 Query query = session.createSQLQuery(sql)
                    .addScalar("item",Hibernate.STRING)
                    .addScalar("time",Hibernate.STRING)
                    .addScalar("date",Hibernate.STRING)
                .addScalar("futureProgression",Hibernate.STRING) 
            .setResultTransformer(Transformers.aliasToBean(ABC.class));

            resultList = query.list(); 
```

我可以创建顶级，但我不知道如何使用 .addEntity 将实体插入该级别......

任何人有一个方便的例子吗？

谢谢，杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:42:15.973

听，如果您`query.createSQLQuery(String sql)`在调用时使用`query.list()`它将返回一个列表，每个列表元素都有对象数组 [来自数据库的行，用另一种语言]。

如果您喜欢从休眠中使用 JSON，则有一个示例：

```
import org.json.*;
//.... your imports here :
//

public class JSONObjectRetriever{

    public JSONObject getDataByID(){
        ArrayList<Object[]> resultList = HibernateManager.getItems();
        ArrayList<Item> finalJsonList = new ArrayList<Item>();

        if(resultList != null)
        {
           Iterator<Object[]> it = resultList.iterator();
           while(it.hasNext())
           {
               Object [] obj = it.next(); // fetching one row from the database.

               //---- Deprecated ...
               //finalJsonList.add(obj[0]);
               //finalJsonList.add(obj[1]);
               //finalJsonList.add(obj[2]);

               //---- the new fragment is : How Add Label to the values :
               //------------------------------------

               finalJsonList.put("Item ID", obj[1]);
               finalJsonList.put("Item Name", obj[2]);
               finalJsonList.put("Item Price", obj[3]);

           }
           JSONArray jsonArray = new JSONArray(catList);
       HashMap<String, JSONArray> map = new HashMap<String, JSONArray>();

       map.put("finalJsonList", jsonArray);
       JSONObject jsonObject = new JSONObject(map);
       return jsonObject;
        }
        else{
           return null;
        }
    }
} 
```

现在休眠管理器将是这样的：

```
public class HibernateManager{

   private SessionFactory sessionFactory;
   static{
       //initialize the session factory here.....
   }

   public static List getItems(){
     String sql = "...."; // put your sql here full String;
     Session session = sessionFactory.openSession();
     session.beginTransaction();
     Query query = session.createSQLQuery(sql);
     List resultList = query.list();
     session.getTransaction().commit();
     return resultList;
   }
} 
```

然后你需要 Servlet 并定义这个 servlet 里面的响应类型是 application/json ：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    JSONObjectsRetriever jR = new JSONObjectsRetriever();
    JSONObject jsonObj = jR.getDataByID();

    response.setCharacterEncoding("UTF-8");
    response.setContentType("application/json");

    PrintWriter writer = response.getWriter();
    //System.out.println(jsonObj);
    writer.print(jsonObj);
    writer.flush();
    writer.close();
} 
```

然后在你的 ajax 技能或 jQuery 中，你可以在回调方法中使用这个 servlet 来根据需要提取值：在这个示例中，我使用了 jquery ....

```
$.ajax(
{
      url : CONTEXT_ROOT+"ItemsJSONFromHibernateServlet",
  type : "GET",
  dataType : "json",
      data : {"param1": value, "param2" : value2, ... etc}, //if you are like to send parameters to the database
  success: function(data){
         // this will return JSON Object do what do you like here ...

         //Iterating through JSON will be like this :

        for (var key in data) 
        {
          if (data.hasOwnProperty(key))
          {
        //alert(key + " -> " + data[key]);
        var subData = data[key];
        //alert(subData.ID+"Before");
        for(var j=0; j < subData.length; j++)
            {
       //alert(subData[j].Key);
       if(subData[j].Key == val)
               {
         alert(subData[j].Value);
         break;
           }
             }
       }
    }
      },
      error: function(jqHXR){
         // to handle errors
      }
}); 
```

我希望这有帮助......

〜艾哈迈德·塔哈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:08:35.250

通过以下链接查看如何使用映射定义一对多关系

[http://docs.jboss.org/hibernate/orm/3.3/reference/en-US/html/example-parentchild.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en-US/html/example-parentchild.html)

如果您将顶级对象与一组较低级别的对象持久化，hibernate 将负责在表中创建顶级和较低级别的条目。

session.save（父）

# servlets - 只创建了一个无状态 bean

> ID：15841080
> 
> 赞同：0
> 
> 时间：2013-04-05T18:33:13.123
> 
> 标签：servlets, ejb, stateless-session-bean

我创建了一个会话 bean 并在 servlet 中调用它，如下所示：

```
@WebServlet(name = "NewServlet1", urlPatterns = {"/NewServlet1"})
public class NewServlet1 extends HttpServlet {
@EJB NewSessionBean bean;
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        out.println("<!DOCTYPE html>");
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet NewServlet1</title>");            
        out.println("</head>");
        out.println("<body>");
             out.println("<h2>"+bean.helloWorld()+"</h2>");
        out.println("<h1>Servlet NewServlet1 at " + request.getContextPath() + "</h1>");
        out.println("</body>");
        out.println("</html>");
    } finally {            
        out.close();
    }
} 
```

这是我的会话 bean：

```
@Stateless
public class NewSessionBean {
private int counter = 0;

public NewSessionBean() {
    System.out.println("Constructor works");
}

public String helloWorld(){

return "Hello you are: "+counter++;
} 
```

当我部署这个源时，我在 Glassfish 中看到只创建了一个会话 bean 实例——“构造函数工作”只出现过一次。当我尝试从多台计算机刷新我的站点时，我发现只存在一个 bean 实例。当我创建两个使用 NewSessionBean 的 servlet 时，仍然只有一个实例。当我读到会话 bean 时，我明白应该有 bean 池，所以应该有几个 bean。那么为什么在我的示例中只创建了一个 bean。帮助我了解这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:56:54.780

只创建了一个 servlet 实例，并且由于它快速生成响应，因此不需要额外的无状态 bean。如前所述，如果您实现`helloWorld`一个长操作，并在操作完成之前生成一个新请求，您将看到正在创建新 bean。

# git - 从 git 推送到 subversion 存储库

> ID：15841081
> 
> 赞同：1
> 
> 时间：2013-04-05T18:33:14.253
> 
> 标签：git, git-svn

我的工作在 git 存储库中，我的一些同事希望将其合并到他们的 subversion 存储库中。我将继续使用 git，但最好有一个 subversion repo 作为遥控器，我可以偶尔推送一次。

我不打算退出它。如果这是可行的，我们将理解，从我的角度来看，颠覆遥控器是只写的，从他们的角度来看是只读的。他们已经可以访问 git repo，并且无论如何都会在那里工作（是的，这有点荒谬，但我无法改变它）。

这是 git-svn 可以处理的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:03:10.683

是的。如果您用于`git-svn`设置 SVN 远程，您可以随后使用`dcommit`无限期地随意推送更改。如果你想强制执行只有你可以推送到 SVN repo 的工作流，可以使用 Subversion 的访问控制机制来实现；例如，请参阅[如何在 SVN 中设置访问控制？](https://stackoverflow.com/questions/81361/how-to-setup-access-control-in-svn).

由于默认情况下会重新设置`dcommit`您要从中更新 SVN 的 Git 分支，因此您应该考虑维护一个本地分支，以便将更改发布到 SVN。最简单的情况是 SVN 存储库只需要接收来自的提交`master`而不尝试跟踪合并。

# sed - 删除空间组

> ID：15841083
> 
> 赞同：0
> 
> 时间：2013-04-05T18:33:26.007
> 
> 标签：sed, awk, solaris

我有一个文本文件，我想在其中删除每行 2 个或更多空格字符的组。

这是一行的示例：

```
Company Management                                      Company Management                                      Company Management Reports                              Shipment - Text                                                                     Program 
```

应该是这样的：

```
Company Management  Company Management  Company Management Reports  Shipment - Text Program 
```

注意：每个“列”前都有一个制表符

注 2：每行有 4 或 5 个“列”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:44:46.640

```
sed 's/   *//g' file 
```

.....................

# android-layout - 我有一个不接受 onclick 方法的自动生成列表

> ID：15841086
> 
> 赞同：0
> 
> 时间：2013-04-05T18:33:38.583
> 
> 标签：android-layout, listview

我有这个自动生成的列表

```
 <ListView
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textIsSelectable="true"
    android:longClickable="true"    
    android:onClick="onClick"       /> 
```

并且调试器无法获取“android:onClick”方法，

我正在尝试获取“长按”的特定项目并将其删除，我的删除工作正常，我知道我需要获取

```
position = lv.getPositionForView(view);
(Object) getListAdapter().getItem(position); 
```

但我不确定如何制作侦听器并将其附加到代码中以执行此操作。有任何想法吗？

我的 onCreate 方法中有这个：

```
final ListView lv = (ListView) findViewById(android.R.id.list);

    lv.setOnLongClickListener( new View.OnLongClickListener() { 
        @ Override 
        public boolean onLongClick(View v) {
            int position = lv.getPositionForView(v);
            Log.d(TAG, "position in here: " + position);
            if (getListAdapter().getCount() > 0) {
                Encouragement encouragement = (Encouragement) getListAdapter().getItem(position);
                datasource.deleteEncouragement(encouragement);
                adapter.remove(encouragement);
                adapter.notifyDataSetChanged();
            }

            return false;
        } 
    }); 
```

但它没有到达 Log.d(TAG, "position in here: " + position);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:33:18.630

使用此代码制定解决方案

```
import android.widget.AdapterView.OnItemLongClickListener;

lv.setOnItemLongClickListener(new OnItemLongClickListener() {

public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        Log.d(TAG, "clicked on item "+arg1);
        return false;
} }); 
```

问题是我没有从列表中选择一个特定的项目，只是一个一般项目让编译器感到困惑。

# python - Python Loop 重复超过 1 次

> ID：15841092
> 
> 赞同：0
> 
> 时间：2013-04-05T18:34:25.110
> 
> 标签：python

我需要循环一个包含 2 个列表的动作，但是当我尝试循环它时，它会为里面的每个列表循环超过 1 次。很难解释。这是我的代码：

```
import os

#pregunta el Path
userPath=("/mnt/die/go")

#Hace la lista de objetos
lista = ("r.alas", "r.guantes","r.cabeza","r.res")      

# Corta la Lista para tener solo objeto
listaCorta = []

for each in lista:
    listaCorta.append  (str(each).split(".")[1])

for lis in lista:   
    for r in listaCorta:
        direccion='%s/%s_1.pc2' % (userPath, r)
        print lis,direccion 
```

这就是我得到的：

```
# r.alas /mnt/die/go/alas_1.pc2
# r.alas /mnt/die/go/guantes_1.pc2
# r.alas /mnt/die/go/cabeza_1.pc2
# r.alas /mnt/die/go/res_1.pc2
# r.guantes /mnt/die/go/alas_1.pc2
# r.guantes /mnt/die/go/guantes_1.pc2
# r.guantes /mnt/die/go/cabeza_1.pc2
# r.guantes /mnt/die/go/res_1.pc2
# r.cabeza /mnt/die/go/alas_1.pc2
# r.cabeza /mnt/die/go/guantes_1.pc2
# r.cabeza /mnt/die/go/cabeza_1.pc2
# r.cabeza /mnt/die/go/res_1.pc2
# r.res /mnt/die/go/alas_1.pc2
# r.res /mnt/die/go/guantes_1.pc2
# r.res /mnt/die/go/cabeza_1.pc2
# r.res /mnt/die/go/res_1.pc2
# ('r.alas', '/mnt/die/go/res_1.pc2')
# ('r.guantes', '/mnt/die/go/res_1.pc2')
# ('r.cabeza', '/mnt/die/go/res_1.pc2')
# ('r.res', '/mnt/die/go/res_1.pc2') 
```

我只需要一个，像这样：

```
r.ala , /mnt/die/go/alas_1.pc2
r.guantes , /mnt/die/go/guantes_1.pc2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:44:24.927

我想你想要这样的东西：

```
for each in lista:   
    direccion='%s/%s_1.pc2' % (userPath, str(each).split(".")[1])
    print lis,direccion 
```

而不是所有的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:43:42.100

拆分原始字符串，创建“方向”变量并在第一个循环中打印它们。for 循环内的命令块（在另一个循环内）执行 mxn 次（其中 m 是外循环的大小，n 是内循环的大小）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:43:57.423

你的 for 循环

```
for lis in lista:   
    for r in listaCorta:
        direccion='%s/%s_1.pc2' % (userPath, r)
        print lis,direccion 
```

是导致循环的原因。所以你需要这样做：

```
for lis in lista:
    direccion='%s/%s_1.pc2' % (userPath, str(lis).split(".")[1]) 
```

这样您就可以完全摆脱 1 for 循环。

```
import os
userPath=("/mnt/die/go")

lista = ("r.alas", "r.guantes","r.cabeza","r.res")

for lis in lista:   
    direccion='%s/%s_1.pc2' % (userPath, str(lis).split(".")[1])
    print lis, direccion 
```

# jquery - 如何通过 jQuery 获取具有特定类的所有父元素，并且它们的子元素在其给定属性中具有特定字符串值？

> ID：15841093
> 
> 赞同：0
> 
> 时间：2013-04-05T18:34:28.010
> 
> 标签：jquery, jquery-selectors

如何获取所有具有称为 css 类的 html 父元素，`".example"`并且它们的子元素是通过 jQuery在其属性`<a></a>`中包含字符串值的元素？`sample-section``href`

这是一个例子：

```
<li class="example">
    <a href="root/sample-section/p01">Page 1</a>
</li>
<li class="example">
    <a href="root/sample-section/p02">Page 2</a>
</li>
<li class="example">
    <a href="root/another-section/p01">Page 1</a>
</li>
<li class="example">
    <a href="root/another-section/p02">Page 2</a>
</li> 
```

我希望能够`<li></li>`使用上述标准通过 jQuery 获取此示例中的第一个和第二个元素（它们包含字符串“sample-section”），并向它们添加某些其他类。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:36:27.787

```
$('a[href*=sample-section]').parent('.example'); 
```

[http://jsfiddle.net/mblase75/eG82u/](http://jsfiddle.net/mblase75/eG82u/)

或者

```
$('.example').filter(function(){
    return $(this).children('a[href*=sample-section]').length;
}); 
```

[http://jsfiddle.net/mblase75/kWV86/](http://jsfiddle.net/mblase75/kWV86/)

-- 应该返回相同的结果。

[http://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)

[http://api.jquery.com/filter/](http://api.jquery.com/filter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:36:41.463

使用属性选择器`^`获取所有以给定文本开头的href

试试这个..

```
 console.log($('a[href^="root/sample-section/"]').parent()) 
```

或`*`选择所有具有指定属性且值包含给定子字符串的元素。

```
console.log($('a[href*="sample-section"]').parent()) 
```

[在这里摆弄](http://jsfiddle.net/AUJfm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:36:41.877

试试这个：

```
$('li.example > a[href*="sample-section"]').closest('li.example'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T18:40:40.087

在一行中：

```
$('li.example a[href*="sample-section"]').parent(); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/pjacf/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T18:40:40.180

```
$('li.example a[href*="another-section"]').each(function() {
  $(this).closest('li');
}); 
```

# proxy - 远程客户端通过 Fiddler 代理 HTTPS 流量失败？

> ID：15841101
> 
> 赞同：7
> 
> 时间：2013-04-05T18:34:42.910
> 
> 标签：proxy, fiddler, remote-connections

在一台机器上启动提琴手，启用远程连接和 HTTPs。当尝试在远程机器上打开 IE 浏览器（手动配置代理设置后）并尝试浏览到[https://www.gmail.com](https://www.gmail.com)时，我收到了通常的警告。当尝试“继续访问网站”时，我收到“证书错误：导航失败”。

当 Fiddler 和浏览器在同一台机器上运行时，一切正常。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T18:49:54.603

您必须将客户端计算机配置为信任 Fiddler 服务器的证书。

从[帮助](http://www.fiddler2.com/fiddler/help/httpsdecryption.asp)：

问：Fiddler 可以解密来自不同机器的 HTTPS 流量吗？

答：是的，如果您已将 Fiddler 配置为代理来自第二台计算机或设备的流量，您可以解密该流量，但有两个注意事项：

1.  如果客户端计算机本身之前在 HTTPS 解密模式下运行 Fiddler，则所有访问受其他计算机版本的 Fiddler 保护的 HTTPS 页面的尝试都将失败，并出现未指定的证书错误。要解决此问题，请使用 certmgr.msc**删除客户端受信任的根证书存储中的旧 Fiddler 根证书。**（不匹配的根证书会导致问题，因为每个 Fiddler 实例都会生成自己唯一的根）。

2.  如果您希望客户端计算机信任 Fiddler 证书，则必须将 Fiddler 根证书复制或下载到客户端计算机并手动将其安装到受信任的根证书颁发机构存储中。您可以使用以下 URL 访问下载 Fiddler 根证书：

    [http://hostname.of.FiddlerMachine:8888/FiddlerRoot.cer](http://hostname.of.FiddlerMachine:8888/FiddlerRoot.cer)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-04T16:28:46.627

如果您已经使用 Fiddler 很长时间，**尤其是跨更新使用它时**，您可能会发现无论您做什么，对于任何浏览器，Fiddler 都不会捕获流量，即使您单击`Trust Root Certificate`直到您脸色发青。

[![信任根证书通常是答案，但不是当 Fiddler 用坏证书填满你的证书存储时](https://i.stack.imgur.com/T5nb3.png)](https://i.stack.imgur.com/T5nb3.png)

我在 IE 中遇到了这`There is a problem connecting securely to this website.`条消息，而 Chrome 正在放弃幽灵`Your connection is not private`

然而，非常简单的解决方法是让 Fiddler 从您的机器中清除所有旧证书并重新开始。通过单击 来执行此操作`Reset All Certificates`。

[![在此处输入图像描述](https://i.stack.imgur.com/73WtY.png)](https://i.stack.imgur.com/73WtY.png)

这将删除 Fiddler 的所有旧证书并创建一个新的主拦截证书。

注意：这*不会*删除您的任何其他证书，只会删除 Fiddler 的证书。

这在两个单独的实例中对我有用，无需重新启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-26T13:54:46.193

我想分享对我有用的问题和解决方案我正在使用提琴手版本--v4.6.3.50306，突然它没有捕获 Https 流量，它在***提琴手 Inspector***选项卡中显示错误，如下所示-：

错误描述 -:

> “与 server-xxxx.com 的 Https 握手失败。System.Security.Cryptography.CryptographyException。指定的网络密码不正确”

我做了以下事情来解决问题

> 重置Tools-->Fiddler Option-->Https-->Action button-->Reset all certificate下的所有证书但是不起作用。

然后经过 3 天令人沮丧的事情解决了我的问题-:)

1.  打开注册表
2.  搜索所有带有单词“fiddler”和“eric”的条目
3.  删除所有注册表文件
4.  重启机器
5.  使用管理员权限再次安装提琴手
6.  重启机器
7.  现在它开始捕获 Https 流量并进行解密。

希望这对您有所帮助。

谢谢，帕思沙阿

# php - 现在从雅虎为我的网站创建联系人导入器

> ID：15841105
> 
> 赞同：0
> 
> 时间：2013-04-05T18:34:53.550
> 
> 标签：php, contact, yahoo-api

我尝试为我的网站创建联系人导入器
我阅读了这个页面： http: [//developer.yahoo.com/oauth/guide/oauth-requesttoken.html](http://developer.yahoo.com/oauth/guide/oauth-requesttoken.html) 我创建这样的代码：

```
<?php
$time = time();
$key = 

'dj0yJmk9c21MVnlUNnlpcTFwJmQ9WVdrOU5tWmtWVVE0Tm0wbWNHbzlNVEkyTmpreE1qYzJNZy0tJxxxxxx';
$secret = '58b907a5a67caf9cd837821c53fxxxxxxxx';
header("location: https://api.login.yahoo.com/oauth/v2/get_request_token?oauth_nonce=ce2130523f788f313f76314ed3965ea6&oauth_timestamp=$time&oauth_consumer_key=$key&oauth_signature_method=plaintext&oauth_signature=$secret&oauth_version=1.0&xoauth_lang_pref=\"en-us\"&oauth_callback=\"http://mysite/yahoo.php\""); 
```

?>
但是当它转到 yahoo 时我找不到页面！什么是问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:57:21.407

问题已解决
，我们必须使用 firebug 来查看 oauth 的错误，因为当您的代码有问题时，
雅虎返回 401 错误，我们只是看到未找到页面
，但 firebug 向您显示您的代码问题是什么
，您可以解决它

# hyperlink - 在网页上保持图片链接稳定。

> ID：15841106
> 
> 赞同：1
> 
> 时间：2013-04-05T18:34:54.317
> 
> 标签：hyperlink

完全披露，我以前从未做过网站，我正在学习。

我在网站上搜索了这个问题的答案，但我什至不知道我应该使用/寻找的术语是。

我正在尝试制作一个带有背景图像层的主页，顶部是水平图案的圆圈（想想波尔卡圆点），它们具有指向其他页面的链接。我把圆圈和悬停效果放在了他们身上。我不明白如何让他们坚持他们所在的位置，以便不同的浏览器尺寸或分辨率不会隐藏其中的一些。我可以使用 backstretch 脚本在背景图像上执行此操作，但是如何将其应用于点？我下载了 Modernizr 脚本，但我什至不确定它是否正确。

基本上我试图让页面像这样：[https://thankfulregistry.com/](https://thankfulregistry.com/)或[http://assemblylondon.com/](http://assemblylondon.com/)调整大小时。

如果您知道我要做什么，我将不胜感激。即使你只是告诉我我应该寻找什么来自己研究这件事（正确的术语）。

谢谢！

-苏菲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:44:01.913

如果您想定位它们，您应该使用 CSS（级联样式表）。该网站将帮助您解决问题！ [http://w3schools.com/css/default.asp](http://w3schools.com/css/default.asp)

对于成为链接的圆圈，您可以使用图像映射，也可以将圆圈的图像作为链接

```
<a href="WHERE YOU WANT TO LINK TO"><img src="URL/LOCATION OF THE PICTURE" height="NUMBER IN PIXELS OR PERCENT" width="NUMBER IN PIXELS OR PERCENT"/></a> 
```

如果您需要更多帮助，请告诉我！

# html - 始终不可见的可选换行 HTML 实体

> ID：15841109
> 
> 赞同：55
> 
> 时间：2013-04-05T18:35:06.167
> 
> 标签：html, line-breaks, html-entities

`word-wrap: break-word;`我想要一个与CSS 样式一起使用的始终不可见的可选换行符。

这里有一些细节。我的目标是在合理的地方分解长链接。这些字符是一个很好的起点：`-`, `.`, `_`, `/`, `\`. 这不是特定于 Rails 的问题，但我想分享一些我现在正在使用的代码：

```
module ApplicationHelper
  def with_optional_line_breaks(text)
    text.gsub(%r{([-._/\\])}, '\1&shy;')
  end
end 
```

这是上面代码的问题：当`&shy;`生效时（在带有：的表中`word-wrap: break-word;`），`&shy;`显示为`-`. 我不想看到`-`; 我想要一个不显示任何字符的换行符。

* * *

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-04-05T19:18:05.163

`&#8203;`是 Unicode 字符的 HTML 实体，称为零宽度空间 (ZWSP)。

> “在 HTML 页面中，此空格可用作长词中的潜在换行符，以替代`<wbr>`标记。”-[零宽度空格 - 维基百科](https://en.wikipedia.org/wiki/Zero-width_space)

[正如Aaron 的回答](https://stackoverflow.com/a/15841314/109618)`<wbr>`所提到的，该标签也有效。我认为我更喜欢 HTML 实体而不是标签，因为实体看起来更简单：unicode 处理它，而不是 Web 浏览器。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-05T18:48:05.060

`<wbr>`看起来它可以满足您的需求，**但**看起来对它的支持，而且`&shy;`就此而言，[非常不一致](https://stackoverflow.com/a/227284/2603)。所以不幸的是，可能没有特别好的方法来做你想做的事。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-02-17T12:23:03.453

我将在 2019 年将其作为答案发布，尽管它的实质内容完全来自此页面上的其他贡献：使用`<wbr>`。它可以很好地允许长 URL 的包装，因此不会让它们脱离内容框。`<wbr>`根据 caniuse.com 和我自己在 Chrome 和 Firefox for Android 中的快速测试，用户能够将您显示的链接粘贴到网络浏览器中确实很重要，并且在现代浏览器中支持很好。我用正斜杠和 WBR 替换了正斜杠，现在 URL 可以很好地换行。

# jquery-ui - 在确认后将值传递给 jQuery UI 对话框以进行 AJAX 发布

> ID：15841111
> 
> 赞同：0
> 
> 时间：2013-04-05T18:35:16.973
> 
> 标签：jquery-ui, jquery

我正在使用 jQuery UI 对话框来确认删除请求。当我用户确认删除请求时，我正在尝试将 ID 传递给 AJAX 帖子。提前感谢您的任何见解。

这是HTML：

```
<table width="100%" cellspacing="1" cellpadding="5" border="0" class="detailTbl" id="myTable">
<tbody>
<tr class="divider" id="editRow220">
<td align="top">Lorem Ipsum is simply dummy text of the printing and typesetting industry. </td>
<td align="top">                                    
    <a class="btn_delete deleteMe form-tip" href="#" id="220" title="Delete this item"></a>
    <span>Lorem Ipsum is simply dummy text of the printing and typesetting industry. </span>
</td>
</tr>
</tbody>                                         
</table> 
```

这是脚本：

```
$("#myTable tbody").on("click", "a.deleteMe", function (e) {
    e.preventDefault();
    var RemoveID = $(this);
    alert(RemoveID.attr("id")); // ***correct ID here ***

    var $myDialog = $('<div></div>')
        .html('Are you sure you want to delete this item?')
        .dialog({
            autoOpen: false,
            title: 'Confirmation',
            buttons: {"Yes": function(e) { 
            alert(RemoveID.attr("id")); // ***RemoveID is undefined here*** 
                // AJAX Call here //

                return true;
            }, "No": function() {
          $(this).dialog("close");
                return false;
            }
  }
     });

    return $myDialog.dialog('open');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:53:23.113

这可能是一个草率的解决方案，但您可以尝试将 ID 分配给全局变量，然后使用它：

```
var mID;

$("#myTable tbody").on("click", "a.deleteMe", function (e) {
e.preventDefault();
mID = $(this).attr("id");

var $myDialog = $('<div></div>')
    .html('Are you sure you want to delete this item?')
    .dialog({
        autoOpen: false,
        title: 'Confirmation',
        buttons: {"Yes": function(FmoPmoToRemove) { 
             alert(mID); //shouldnt be undefined anymore

..rest of code.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:07:03.947

I made a simple moch-up on jsFiddle www.jsfiddle.net/bphamous/rQ3MC and it appears to be working. Issue must be in my code.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:02:01.130

像这样使用 Java 脚本的 cofirm() 时有什么问题：

```
function delete(Id){
   boolean b = confirm("Deleting : "+Id", Are you sure ..??");
   if(b == true){
    // make the delete process here ...
   }
   else{
      // do dtuff .....
   }
 } 
```

# c# - 从数据表创建 Excel 数据透视表

> ID：15841126
> 
> 赞同：2
> 
> 时间：2013-04-05T18:36:14.413
> 
> 标签：c#, vsto, pivot

我有一个托管大量定价数据的 Web 服务，并返回与某些规定的查询参数相关的数据。数据作为 Datatable 对象（在 C# 中）返回 - 对象类型本身并不重要，因为数据直接进入内存并且不在主机 Excel 对象的电子表格中。

现在，我想根据这些数据创建一个数据透视表。

我一直在网上寻找高低，我看不到任何人解释如何做到这一点。这是不可能的吗？建议将 VSTO 作为未来唯一支持的使用 Web 服务数据的方式似乎是愚蠢的，但是却不可能从该数据中提取数据透视表。

我唯一的解决方案是 kludges，在我做这些丑陋的事情之一之前，我想确保没有一个优雅的解决方案：

1.  将数据表转储到 excel 工作表并将数据透视表指向 excel 范围。这远非理想，因为我要么对整个数据集进行逐行删除（慢得见鬼），要么以 2 倍的内存消耗达到峰值
2.  将数据表转储到文件系统并将数据透视表指向平面文件。这甚至更糟，但至少没有内存缺陷。

这些真的是执行此操作的唯一方法吗？必须有更优雅的东西。

数据表：http: [//msdn.microsoft.com/en-us/library/system.data.datatable.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)

PivotCache： http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.pivottable.pivotcache (v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.pivottable.pivotcache(v=office.11).aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:33:33.750

Excel 必须能够查看和访问数据才能从中创建数据透视表。因此，您必须确保数据位于数据透视表加载器可以读取的位置。此外，Excel 是基于 COM 的，既不能查看也不能处理 .NET 对象。

就这么简单。

您的选择是：

1.  将数据加载到 Excel 范围内

2.  将数据保存到文件

3.  将数据存储到数据库中（Access、SQL Server 等）

4.  将数据存储在数据仓库（SSAS、离线 Cube 等）中

而已。唯一其他可能的远程方法是实现呈现为 OLE DB 或 ODBC 数据源所必需的 COM 接口，但这将是大量工作。

# c++ - 多次使用同一个文件流对象

> ID：15841127
> 
> 赞同：0
> 
> 时间：2013-04-05T18:36:14.920
> 
> 标签：c++, filestreams

我编写了以下源代码：

```
ifstream leggiFile;
leggiFile.open("Questions.txt",ios::in);

if (!leggiFile.good())
{
  cerr << "\n\n\n\tErrore during file opening Questions.txt\n\n\n" << endl;
}
else
{
    // ...
};

leggiFile.close();
system("pause"); 
```

现在我想使用同一个对象来处理第二个文件。

```
leggiFile.open("Answers.txt",ios::in);

i=0;
if(!leggiFile.good())
{
  cerr << "\n\n\n\tError during opening of file answers.txt\n\n\n" << endl;
}
else
{
    // ...
} 
```

问题：第二次无法打开文件并出现错误消息。为什么？你能建议我一个解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:44:33.667

您可能已经在流上完成了设置一个或多个错误标志的工作，例如`eofbit`.

关闭流并不会清除其错误标志，您必须手动进行。`leggiFile.clear();`关闭后调用。

不过，从 C++11 开始，这是由 自动完成的`open()`。如果您已经在使用 C++11 编译器，那么您的问题就在其他地方（不能说在哪里，您没有显示足够的代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:12:36.530

了解`singleton`日志记录或对任何文件的任何多次访问的设计模式。您还可以使用互斥锁，以便代码等待文件等资源。但是同时使用同一个文件是不明智的。可以为代码的生命周期打开文件。这不是问题。

# mysql - SQL 语法问题

> ID：15841133
> 
> 赞同：0
> 
> 时间：2013-04-05T18:36:31.823
> 
> 标签：mysql, sql, database

我试图这样做：

```
String insertQuery=" DELETE FROM Accounts WHERE Username= " + Username + ";"; 
```

但我收到这个错误：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'sam' in 'where clause' 
```

它获得了正确的用户名等我通过测试知道这一点，我认为语法错误但我没有语法错误？

该表称为帐户。列是用户名和密码，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:38:09.947

您缺少单引号。在您的情况下（它是字符串）变量需要包含在它们中，否则它将被解释为列。

```
String insertQuery = "DELETE FROM Accounts WHERE Username = '" + Username + "'"; 
```

## 推荐：

因此，我建议您使用**占位符**来避免此类问题。不要忘记关心安全性（例如[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)）。值得一提的是，*参数化语句*也更易于阅读、更安全、更快速。

我不喜欢“硬编码”查询。让我们想象一个场景，如果您有一个包含十列的表，并想象在这种情况下您的查询**会是什么样子：绝对是人类不可读的**。

参数化语句的使用总是非常有效和舒适的做法。您的代码看起来不错并且变得易于阅读，并且“主要”解决方案更加安全和清洁。

看看[PreparedStatements](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)。基本示例：

```
private final String deleteQuery = "DELETE FROM Accounts WHERE Username = ?";

public boolean deleteObject(String username) {
   Connection c = null;
   PreparedStatement ps = null;
   try {
      c = DataSource.getConnection();
      ps = c.prepareStatement(deleteQuery);
      ps.setString(1, username); // numbering starts with 1 not 0!
      return ps.executeUpdate() > 0;
   }
   catch (SQLException ex) {
      System.out.println("Error in deleteObject() method: " + ex.getMessage());
      return false;
   }
   finally {
      if (c != null) {
         try {
            c.close();
         }
         catch (SQLException ex) {
            System.out.println("Error in closing conn: " + ex.getMessage());
         }
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T18:37:48.837

如果用户名是 varchar，则需要在 where 子句中的值周围添加单引号。

```
String insertQuery=" DELETE FROM Accounts WHERE Username= '" + Username + "';"; 
```

由于没有引用该值来标识用户名，因此我假设它的 Sam 作为一列。

# python - 循环中的python线程

> ID：15841140
> 
> 赞同：0
> 
> 时间：2013-04-05T18:36:45.733
> 
> 标签：python, multithreading, loops

我有一个项目需要一堆大矩阵，这些矩阵存储在~200 MB 文件中，相互交叉相关（即 FFT * conj(FFT)）。文件的数量如此之多，以至于我不能将它们全部加载然后进行处理。另一方面，根据需要读取每个文件比我想要的要慢。

我到目前为止是这样的：

```
result=0
for i in xrange(N_files):
    f1 = file_reader(file_list[i])

    ############################################################################
    # here I want to have file_reader go start reading the next file I'll need #
    ############################################################################

    in_place_processing(f1)
    for j in xrange(i+1,N_files):
        f2 = file_reader(file_list[j])

        ##################################################################
        # here I want to have file_reader go start reading the next file #
        ##################################################################

        in_place_processing(f2)
        result += processing_function(f1,f2) 
```

所以基本上，我只想有两个线程，每个线程都会读取一个文件，当我要求它时（或者在我要求它完成后立即给我），然后开始阅读下一个文件我要它。file_reader 返回的对象相当大且复杂，所以我不确定多处理是否是这里的方法......

我已经阅读了有关线程和队列的信息，但似乎无法弄清楚我要求线程去读取文件的部分，并且可以在它执行时继续执行程序。我不希望线程简单地在后台处理它们的业务——我是否在这里遗漏了一个细节，或者线程不是要走的路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:10:02.153

下面是一个使用模块的示例，该`multiprocessing`模块将产生子进程来调用您的`file_reader`方法并将其结果排队。队列满时应该阻塞，因此您可以控制要使用`QUEUE_SIZE`常量执行的预读次数。

这利用了多进程通信的标准生产者/消费者模型，子进程充当生产者，主线程是消费者。类析构函数中的`join`方法调用确保正确清理子进程资源。有一些打印语句穿插用于演示目的。

此外，我为 QueuedFileReader 类添加了将工作卸载到工作线程或在主线程中运行的功能，而不是使用子进程进行比较。这是通过将类初始化时的模式参数分别指定为`MODE_THREADS`或来完成的`MODE_SYNCHRONOUS`。

```
import multiprocessing as mp
import Queue
import threading
import time

QUEUE_SIZE = 2 #buffer size of queue

## Placeholder for your functions and variables
N_files = 10
file_list = ['file %d' % i for i in range(N_files)]

def file_reader(filename):
    time.sleep(.1)
    result = (filename,'processed')
    return result

def in_place_processing(f):
    time.sleep(.2)

def processing_function(f1,f2):
    print f1, f2
    return id(f1) & id(f2)

MODE_SYNCHRONOUS = 0  #file_reader called in main thread synchronously
MODE_THREADS = 1      #file_reader executed in worker thread
MODE_PROCESS = 2      #file_reader executed in child_process
##################################################
## Class to encapsulate multiprocessing objects.
class QueuedFileReader():
    def __init__(self, idlist, mode=MODE_PROCESS):
        self.mode = mode
        self.idlist = idlist
        if mode == MODE_PROCESS:
            self.queue = mp.Queue(QUEUE_SIZE)
            self.process = mp.Process(target=QueuedFileReader.worker,
                                      args=(self.queue,idlist))
            self.process.start()
        elif mode == MODE_THREADS:
            self.queue = Queue.Queue(QUEUE_SIZE)
            self.thread = threading.Thread(target=QueuedFileReader.worker,
                                           args=(self.queue,idlist))
            self.thread.start()

    @staticmethod
    def worker(queue, idlist):
        for i in idlist:
            queue.put((i, file_reader(file_list[i])))
            print id(queue), 'queued', file_list[i]
        queue.put('done')

    def __iter__(self):
        if self.mode == MODE_SYNCHRONOUS:
            self.index = 0
        return self

    def next(self):
        if self.mode == MODE_SYNCHRONOUS:
            if self.index == len(self.idlist): raise StopIteration
            q = (self.idlist[self.index],
                 file_reader(file_list[self.idlist[self.index]]))
            self.index += 1
        else:
            q = self.queue.get()
            if q == 'done': raise StopIteration
        return q

    def __del__(self):
        if self.mode == MODE_PROCESS:
            self.process.join()
        elif self.mode == MODE_THREADS:
            self.thread.join()

#mode = MODE_PROCESS
mode = MODE_THREADS
#mode = MODE_SYNCHRONOUS
result = 0
for i, f1 in QueuedFileReader(range(N_files),mode):

    in_place_processing(f1)

    for j, f2 in QueuedFileReader(range(i+1,N_files),mode):
        in_place_processing(f2)
        result += processing_function(f1,f2) 
```

如果您的中间值太大而无法通过队列，您可以在自己的进程中执行外循环的每次迭代。一个方便的方法是使用下面的示例中的`Pool`类。`multiprocessing`

```
import multiprocessing as mp
import time

## Placeholder for your functions and variables
N_files = 10
file_list = ['file %d' % i for i in range(N_files)]

def file_reader(filename):
    time.sleep(.1)
    result = (filename,'processed')
    return result

def in_place_processing(f):
    time.sleep(.2)

def processing_function(f1,f2):
    print f1, f2
    return id(f1) & id(f2)

def file_task(file_index):
    print file_index
    f1 = file_reader(file_list[file_index])
    in_place_processing(f1)
    task_result = 0
    for j in range(file_index+1, N_files):
        f2 = file_reader(file_list[j])
        in_place_processing(f2)
        task_result += processing_function(f1,f2)
    return task_result

pool = mp.Pool(processes=None) #processes default to mp.cpu_count()
result = 0
for file_result in pool.map(file_task, range(N_files)):
    result += file_result
print 'result', result

#or simply
#result = sum(pool.map(file_task, range(N_files))) 
```

# python - python中的漏桶

> ID：15841141
> 
> 赞同：0
> 
> 时间：2013-04-05T18:36:54.113
> 
> 标签：python, multithreading, bucket

嗨，我正在尝试在 Python 中开发一个具有无限存储桶容量的leakybucket。我希望它是线程安全的和 CPU 高效的，具有最少的线程数。它现在通常可以工作。但是有一些小错误。

我将带宽限制为 500 kbps。但第三行似乎打破了这一点。另外，谁能告诉我这是否是实现leakybucket的正确方法？谢谢。

> > > 费率：500.00 费率：500.00 费率：550.00 费率：500.00 费率：500.00 费率：500.00 费率：500.00 费率：500.00

代码在这里：

```
from collections import deque
import threading, time
class LeakyBucket:
    '''the leaky bucket throttling the bit rate'''

    def __init__(self, node, bitsPerSec, measIntv, LBtype):
        self.node = node
        self.bitsPerSec = bitsPerSec  #the rate limit
        self.measIntv = measIntv      #the measure interval, tokens will become full at the beginning of each interval
        self.LBtype = LBtype          #the type of the bucket  
        self.lastTime = 0             #the start time of the last measure interval
        self.bitsDone = 0             #the bits that have been transmitted
        self.BDLock = threading.Lock() #the lock for the bits sent
        self.packDQ = deque()          #the packet Q 
        self.maxToken = bitsPerSec*float(measIntv)  #the max token (bits)
        self.token = self.maxToken      #the current token
        self.condition = threading.Condition()  #sync lock

    def packIn(self, msg):
        '''Insert a packet'''
        self.condition.acquire()
        self.packDQ.append(msg)
        self.condition.notify()
        self.condition.release()

    def keepPoping(self):
        '''keep poping new pack'''
        self.lastTime = time.time()   #record the start time
        while True:
            timeNow = time.time() 
            if  timeNow - self.lastTime > self.measIntv:     
                #new intv, need to reset token
                self.token = self.maxToken
                self.lastTime = timeNow
            self.condition.acquire()
            if self.packDQ: # the queue is not empty
                pack = list(self.packDQ)[0]
                packLen = len(pack[2])*8
                if  packLen > self.token:   #no enough token?
                    #self.packDQ.popleft()
                    self.condition.release()
                    time.sleep(max(self.lastTime+self.measIntv-time.time(),0)) #wait for enough token
                    else:              #enough token, can send out the packet
                    self.packDQ.popleft()
                    self.condition.release()
                    self.changeBitsDone(packLen)
                    self.token = self.token - packLen #consume token
            else:
                self.condition.wait()
                self.condition.release()

    def begin(self):
        '''begin the leakybucket'''
        aThread = threading.Thread(target = self.keepPoping, args = [])
        aThread.start()

    def getBitsDone(self):
        '''get and reset bitsDone, for testing'''
        self.BDLock.acquire()
        reV = self.bitsDone
        self.bitsDone = 0
        self.BDLock.release()
        return reV

    def changeBitsDone(self,length):
        '''change bitsDone, for testing'''
        self.BDLock.acquire()
        self.bitsDone += length
        self.BDLock.release()

    def measure(self, intv):
        '''measure the throughput of the leaky bucket'''
        while True:
            bitsDone = self.getBitsDone()
            rate = bitsDone / float(intv*1024)
            print 'rate: %.2f' % rate
            time.sleep(intv)

    def startMeasure(self, intv):
        '''start measure the rate'''
        #print 'here'
        aThread = threading.Thread(target = self.measure, args = [intv])
        aThread.start()        

#===============================
def main():
    pack = 1000*'a'
    msg = ('192.168.1.1', 16000, pack)
    print 'here'
    LB = LeakyBucket(None, 500*1024, 1, 'reg')
    LB.begin()
    LB.startMeasure(10)
    numMsg = 0

    while numMsg < 10000:
        LB.packIn(msg)
        #print 'pack in'
        numMsg += 1

if __name__ == '__main__':
    main() 
```

# debugging - C++/CLI 似乎跳过了一行代码，调试不显示该行中声明和定义的变量

> ID：15841142
> 
> 赞同：0
> 
> 时间：2013-04-05T18:36:56.073
> 
> 标签：debugging, c++-cli, clr

我现在只用 C++/CLI 和 C++ 开发了几个月，但在我看来，编程语言在这个问题上应该无关紧要。

在下面的代码行中，`double k = (yEnd - yStart) / (xEnd - xStart);`似乎没有执行。

```
//double k = 1.0;
if (xEnd - xStart == 0)
{
    selected = true;
    return true;
}

// Checks if Y-coordinate corresponds to X-coordinate
else 
{
    // Calculating the slope of the line
    double k = (yEnd - yStart) / (xEnd - xStart);

    if (fabs(y - (yStart + k * (x - xStart))) < (double)selectionTolerance)
    {
        selected = true;
        return true;
    }
} 
```

我尝试使用 F11 逐行调试它并且还设置了断点，尽管这些断点在从所述行运行调试器时移动到`if (fabs(y - (yStart + k * (x - xStart))) < (double)selectionTolerance)`它之后。

我已经检查了 Visual Studio 的选项以不跳过属性/操作，但它也没有帮助。当调试器在 if 处停止程序时，我看不到 的任何值`k`，但可以毫无问题地看到所有其他值（除了 char selectionTolerance 和 bool selected，它们都是 double 的）。

感谢您的帮助，我在网上和 stackoverflow 上搜索了很长时间，但找不到像这样简单（并且可能是一般性）的行的问题。

## 更新：

感谢 David Yaw 和 GK，我能够看到 k 的值。我仍然对这里说明的一个问题感到困惑：http: [//i.imgur.com/MyVGTwJ.png](https://i.imgur.com/MyVGTwJ.png)（还不能发布图片）

即使`yEnd`, `yStart`, `xEnd`,`xStart`都是类型`double`并且具有如上图所示的值，但当程序在执行之前在第 254 行停止时`k=ydif/xdif;`，`k`等于`0.0000000000000000`。我添加了三行

> 双 ydif= (yEnd-YStart);
> 双xdif=xEnd-xStart；
> k=ydif/xdif；

看看 if`k`会根据需要计算，但在再次按 F11 后它得到相同的值（程序在第 256 行停止）。

我在这里发现了一个与跳跃断点问题有关的问题：[Visual Studio breakpoints beingmoved](https://stackoverflow.com/questions/9384371/visual-studio-breakpoints-being-moved)

计算`k`我尝试的方式有什么问题，正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:39:40.803

您没有提到计算不正确，只是代码行没有受到影响。我假设计算是正确的。

局部变量可能已被编译器优化。由于您只`k`在一个地方使用，它消除了局部变量，并在`if`语句中内联计算斜率。

我已经看到 C++/CLI 编译器对方法调用做了类似的事情：我遇到了堆栈跟踪列出了我不调用的方法的异常：我调用的方法是内联的，堆栈跟踪指向的方法它叫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:23:14.457

我正在使用 Visual Studio 10.0 C++ 编译器。调试配置在调试时使用以下命令行开关 /Gm /Od /RTCs /Zi /LDd 抱歉，我不记得每个开关的作用。您可以在 CLI 中运行编译器并获取所有命令行开关的功能列表。这些基本上是所有优化的转变。

# eclipse - 如何在 Eclipse 文本小部件中禁用单键绑定

> ID：15841143
> 
> 赞同：2
> 
> 时间：2013-04-05T18:36:57.790
> 
> 标签：eclipse, eclipse-rcp, eclipse-juno, eclipse-plugin

我正在开发一个 Eclipse RCP 应用程序，并为我的编辑器定义了一个自定义上下文 (org.eclipse.ui.contexts)。每当我调用我的一位编辑器时，都会激活此上下文。

此外，我已经定义了一个单键键绑定（org.eclipse.ui.bindings），我已经将其限定在这个上下文中，当在编辑器上下文中键入它时，它会调用一个命令/处理程序（我将使用字母'J ' 对于这个例子）。

一切都按预期工作。当我启动/选择我的一个自定义编辑器时，上下文被激活并且“J”执行我的处理程序。当我启动/选择视图部件时，我的自定义编辑器的上下文被停用并且“J”不再执行处理程序。但是，当我单击窗口修剪区域中某处的文本小部件时（比如说快速访问字段）并键入字母“J”，击键被消耗并执行我的处理程序，这是我不想要的行为。

原因是选择另一个工作台部件具有激活其上下文并停用前一个的效果。但是，单击工作台窗口区域中的任何其他位置（除了另一个部分）不会停用先前的上下文。我确信这是设计使然，并且是一种完全合理的方法。但是，它阻止我定义单键键绑定。

有没有人a）以前遇到过这个问题，b）如果有，你是怎么解决的？

现在，我正在使用一个完整的 hack，它涉及使用全局侦听器在检测到进入 Text 小部件时完全禁用键绑定服务，并在退出 Text 小部件时重新启用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-01T07:50:22.777

在扩展点`<extension point="org.eclipse.ui.bindings">`中，不要指定将替换现有密钥的命令 ID。

有关详细信息，请参阅[文档](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_ui_commands.html)。

**commandId** - 分配了此键绑定指定的键序列的命令的唯一标识符。如果此属性的值为空字符串，则键序列被分配给内部“无操作”命令。这对于在特定的键配置和上下文中“取消定义”键绑定很有用，这些键可能是从它们的父级借来的。

# api - 获取 archive.org 保存的文件的最新版本

> ID：15841145
> 
> 赞同：0
> 
> 时间：2013-04-05T18:37:11.447
> 
> 标签：api, rest, web, web-scraping, archive

我有一组收获的原子提要。他们中的一些人有几年的时间，有些帖子链接到不再存在的图像。

[有什么方法可以获取Way Back Machine](http://archive.org/)保存的最新版本？

我知道我可以手动完成，但我想自动化这个过程。archive.org 提供了一个宁静的 API，但据我所知，它似乎没有提供我需要的特定调用。我想我总是可以退回到网络抓取，但我更喜欢更优雅的解决方案，如果有的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:27:30.290

弄清楚了。要获取文件的最新版本，您只需访问`GET`URL（不要忘记检查 HTTP 状态代码是否为`200`）：

`http://web.archive.org/web/form-submit.jsp?type=replay&url=<file_url>`

# git - 无法在 OpenShift 上从 GitHub 安装 Python 模块

> ID：15841148
> 
> 赞同：1
> 
> 时间：2013-04-05T18:37:20.150
> 
> 标签：git, github, pip, openshift, paas

尝试将 Python 应用程序部署到 OpenShift 中，顺便说一句，这是我的第一个 OpenShift 部署。一切正常，但是安装了一个托管在 GitHub 上的模块。我一直在尝试很多方法。任何人都可以帮助我吗？提前谢谢了。似乎 OpenShift Git 版本（1.7.1）与我想要实现的目标不兼容。这是错误输出：

```
 Obtaining django-filter from git+https://github.com/jpardobl/django-filter.git@8a3d092a99feaacea6b85c5ae5a987dc9ea970ab#egg=django_filter-dev (from -r /var/lib/openshift/515ebbc650044643fa00000d/app-root/repo/requirements.txt (line 1))
remote:   Found command 'git' at '/usr/bin/git'
remote: Command /usr/bin/git config remote.origin.url failed with error code 1
remote: Exception information:
remote: Traceback (most recent call last):
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/basecommand.py", line 126, in main
remote:     self.run(options, args)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/commands/install.py", line 223, in run
remote:     requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/req.py", line 936, in prepare_files
remote:     req_to_install.update_editable(not self.is_download)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/req.py", line 384, in update_editable
remote:     vcs_backend.obtain(self.source_dir)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/vcs/git.py", line 104, in obtain
remote:     if self.check_destination(dest, url, rev_options, rev_display):
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/vcs/__init__.py", line 183, in check_destination
remote:     existing_url = self.get_url(dest)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/vcs/git.py", line 116, in get_url
remote:     show_stdout=False, cwd=location)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/__init__.py", line 255, in call_subprocess
remote:     % (command_desc, proc.returncode))
remote: InstallationError: Command /usr/bin/git config remote.origin.url failed with error code 1
remote: 
remote: Storing complete log in /var/lib/openshift/515ebbc650044643fa00000d/.pip/pip.log
remote: Traceback (most recent call last):
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/bin/pip", line 9, in <module>
remote:     load_entry_point('pip==1.0.2', 'console_scripts', 'pip')()
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/__init__.py", line 116, in main
remote:     return command.main(initial_args, args[1:], options)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/basecommand.py", line 151, in main
remote:     log_fp = open_logfile(log_fn, 'w')
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/basecommand.py", line 177, in open_logfile
remote:     os.makedirs(dirname)
remote:   File "/usr/lib64/python2.6/os.py", line 157, in makedirs
remote:     mkdir(name, mode)
remote: OSError: [Errno 13] Permission denied: '/var/lib/openshift/515ebbc650044643fa00000d/.pip'
remote: Running .openshift/action_hooks/build
remote: Obtaining django-filter from git+https://github.com/jpardobl/django-filter.git@8a3d092a99feaacea6b85c5ae5a987dc9ea970ab#egg=django_filter-dev (from -r /var/lib/openshift/515ebbc650044643fa00000d/app-root/repo/requirements.txt (line 1))
remote:   Found command 'git' at '/usr/bin/git'
remote: Command /usr/bin/git config remote.origin.url failed with error code 1
remote: Exception information:
remote: Traceback (most recent call last):
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/basecommand.py", line 126, in main
remote:     self.run(options, args)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/commands/install.py", line 223, in run
remote:     requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/req.py", line 936, in prepare_files
remote:     req_to_install.update_editable(not self.is_download)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/req.py", line 384, in update_editable
remote:     vcs_backend.obtain(self.source_dir)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/vcs/git.py", line 104, in obtain
remote:     if self.check_destination(dest, url, rev_options, rev_display):
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/vcs/__init__.py", line 183, in check_destination
remote:     existing_url = self.get_url(dest)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/vcs/git.py", line 116, in get_url
remote:     show_stdout=False, cwd=location)
remote:   File "/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/lib/python2.6/site-packages/pip-1.0.2-py2.6.egg/pip/__init__.py", line 255, in call_subprocess
remote:     % (command_desc, proc.returncode))
remote: InstallationError: Command /usr/bin/git config remote.origin.url failed with error code 1 
```

接下来，我的 setup.py 文件

```
 from setuptools import setup

    setup(name='nautivel', 
version='0.8.1', 
description='OpenShift App', 
author='Javier Pardo Blasco', 
author_email='xxxxxxx', 
url='http://jpardobl.com', 
install_requires=( 
'Django == 1.5', 
'argparse == 1.2.1', 
'distribute == 0.6.24', 
'moment == 0.0.15', ), ) 
```

还有我的 requirements.txt 文件

```
-e git+https://github.com/jpardobl/django-filter.git@8a3d092a99feaacea6b85c5ae5a987dc9ea970ab#egg=django_filter-dev 
```

最后是 .openshift/action_hooks/build 文件（它没有使用环境变量来减少尝试时的错误风险）

```
 !/bin/bash
    source /var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/bin/activate 
/var/lib/openshift/515ebbc650044643fa00000d/python-2.6/virtenv/bin/pip install -v -r /var/lib/openshift/515ebbc650044643fa00000d/app-root/repo/requirements.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:41:41.880

我没有使用 setup.py 进行安装，而是使用了一种解决方法。我从构建操作挂钩安装模块，如下所示。

```
# .openshift/action_hooks/build

#!/bin/bash
MESSAGES_PATH=$HOME/python-2.6/virtenv/lib/python2.6/site-packages/django-messages-patch-src
git clone git://github.com/jpardobl/django-messages-patched.git $MESSAGES_PATH
ln -s $MESSAGES_PATH/django_messages $HOME/python-2.6/virtenv/lib/python2.6/site-packages/messages 
```

就是这样！！！

# parsing - RFC 2822 电子邮件地址解析 - 任何好的测试用例列表？

> ID：15841151
> 
> 赞同：2
> 
> 时间：2013-04-05T18:37:27.540
> 
> 标签：parsing, testing, rfc2822

我正在开发一个 RFC 2822 地址解析器（*不是*验证器），并且想知道是否有人知道一个很好的测试用例列表来练习可能出现的极端案例？地址格式的规范非常复杂，我不相信我完全理解它以确保识别所有可能出现的奇怪情况。

为了清楚起见，我说的是地址，因为它们可能出现在标题行中，所以像奇怪地方的注释之类的东西是我正在考虑的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-05T16:04:54.730

我在寻求相同的过程中发现了这一点：

[http://isemail.info/_system/is_email/test/?all](http://isemail.info/_system/is_email/test/?all)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:45:50.910

我在 MSDN 博客上找到了一篇博文，其中提供了一些特定于 RFC2822 的测试用例。我不确定它是否是最终的测试用例列表，但它可能是一个很好的起点。

[电子邮件地址测试用例](http://blogs.msdn.com/b/testing123/archive/2009/02/05/email-address-test-cases.aspx)

# ios - 带有表情编辑的 UITextView

> ID：15841152
> 
> 赞同：6
> 
> 时间：2013-04-05T18:37:28.057
> 
> 标签：ios, text, uitextview, emoji, emoticons

我正在开发 xmpp-client 应用程序。其中一项功能是发送微笑，用户应该能够像往常一样编辑其文本。[Viber App](https://itunes.apple.com/ie/app/viber-free-phone-calls-text/id382617920?mt=8)中的表情编辑是我想要实现的最佳示例。

我已经尝试了三种解决问题的方法：

*   我像通常的 UIImageView 一样创建表情符号，并使用当前插入符号将其作为子视图放置在 UITextView 上。我在文本视图中使用 5 个空格作为文本占位符。有两个问题：在中间插入文本时将表情符号放在新行上（打印空格不会使插入符号移动到新行）；当用户使用放大镜放置插入符号时，他可以通过表情符号（通过 5 个空格）移动插入符号，因为在此过程中不调用委托方法。
*   我试过[EGOTextView](https://github.com/enormego/EGOTextView)。应该添加新行时插入符号位置和调整大小存在问题。并且在使用一种线号时会出现一些渲染伪影。
*   我也尝试过使用 UIWebView。但是，在成为第一响应者时，基于文本大小和其他具有响应速度的工件来调整大小存在很大问题。

可能有人可以给我真正可行的解决方案的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:48:53.023

我并不真正了解 UITextView/UITextInput 的矩形和范围机制，但我尝试给你一个（未经测试的）建议，也许可以达到预期的结果。

内置的 iOS 表情符号是简单的字符，因此我们可以通过构建自定义字体（或扩展现有字体）来遵循相同的路径。我们有两个选择：

*   如果您想针对**iOS 6.0**（在 UIKit 类中具有原生支持`NSAttributedString`），您可以尝试构建一个包含您需要的所有表情符号的自定义字体，并在您的`NSAttributedString`（属性字符串可以混合不同的字体、字体大小、样式等等）。

*   **你可以用iOS 5**做类似的事情，但是因为你不能`NSAttributedString`在里面使用`UITextView`（所以你被限制为整个文本只有一种字体）你应该使用一种结合实际字符和自定义表情符号的字体：所以你应该通过添加所有表情符号来扩展您要用于打字的字体。无论如何，我不知道这是否会对许可证产生影响。

否则，您总是可以更底层，使用 CoreText 实现您自己的自定义[textView](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)，但我认为这将是一项艰巨的工作。

# python - 如何使用 Twython 将 oauth_callback 值传递给 oauth/request_token

> ID：15841155
> 
> 赞同：3
> 
> 时间：2013-04-05T18:37:36.570
> 
> 标签：python, django, twitter, twitter-oauth, twython

Twitter最近刚刚强制执行以下操作：

1) 您必须将`oauth_callback`值传递给 oauth/request_token。这不是可选的。即使你已经在 dev.twitter.com 上设置了一个。如果您正在执行带外 OAuth，请通过`oauth_callback=oob`.

2) 您必须将`oauth_verifier`您从执行的回调中收到的或您收到的最终用户手动输入的信息传递给 oauth/access_token。这是推特线程（[https://dev.twitter.com/discussions/16443](https://dev.twitter.com/discussions/16443)）

这导致 Twython`get_authorized_tokens`抛出此错误：

```
Request: oauth/access_token

Error: Required oauth_verifier parameter not provided 
```

我有两个问题：

**1\. 如何`oauth_callback`使用 Twython 将值传递给 oauth/request_token？**

**2.你是如何传递的`oauth_verifier`？**

我可以`oauth_verifier`从回调 url 获取 with request.GET['oauth_verifier'] 但我不知道从那里使用 Twython 做什么。我到处搜索，但没有找到任何答案，所以我决定发布这个。这是我的第一篇文章，所以请善待；）

这是我的代码：

```
def register_twitter(request):
    # Instantiate Twython with the first leg of our trip.
    twitter = Twython(
        twitter_token = settings.TWITTER_KEY,
        twitter_secret = settings.TWITTER_SECRET,
        callback_url = request.build_absolute_uri(reverse('account.views.twitter_thanks'))
    )

    # Request an authorization url to send the user to
    auth_props = twitter.get_authentication_tokens()

    # Then send them over there
    request.session['request_token'] = auth_props
    return HttpResponseRedirect(auth_props['auth_url'])

def twitter_thanks(request, redirect_url=settings.LOGIN_REDIRECT_URL):

    # Now that we've got the magic tokens back from Twitter, we need to exchange
    # for permanent ones and store them...
    twitter = Twython(
        twitter_token = settings.TWITTER_KEY,
        twitter_secret = settings.TWITTER_SECRET,
        oauth_token = request.session['request_token']['oauth_token'],
        oauth_token_secret = request.session['request_token']['oauth_token_secret'],
    )

    # Retrieve the tokens
    authorized_tokens = twitter.get_authorized_tokens()

    # Check if twitter user has a UserProfile
    try:
        profile = UserProfile.objects.get(twitter_username=authorized_tokens['screen_name'])
    except ObjectDoesNotExist:
        profile = None 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T00:30:51.057

我解决了我自己的答案。如果它可以帮助其他任何人，这是解决方案：

在文件 Twython.py 中，我向`oauth_verifier`Twython 类构造函数添加了一个新参数。我从twitter_thanks 视图中获得了`oauth_verifier`价值。`callback_url`

在`get_authorized_tokens`我删除了这行代码：

```
response = self.client.get(self.access_token_url) 
```

并添加了以下代码：

```
callback_url = self.callback_url or 'oob'
request_args = urllib.urlencode({'oauth_callback': callback_url, 'oauth_verifier':self.oauth_verifier })
response = self.client.post(self.access_token_url, params=request_args) 
```

它现在就像一个魅力，并且符合 OAuth 1.0A。

# c# - 为什么我的 WPF listview 代码在以编程方式选择行时抛出异常

> ID：15841156
> 
> 赞同：0
> 
> 时间：2013-04-05T18:37:37.727
> 
> 标签：c#, wpf, listview, selection, listviewitem

我正在尝试使用 VS2008 和 .NET 框架的 3.5 以编程方式突出显示 WPF listview 控件中的第一行。这是用于此的 C# 代码：

```
ListViewItem Val = (ListViewItem)ListView1.Items[0];
Val.IsSelected = true; 
```

代码在第一行引发异常，这是在 ListView1 填充数据之后。异常中的消息说：

“无法将‘Message.LV1Data’类型的对象转换为‘System.Windows.Controls.ListViewItem’类型。”

LV1Data 是我用来绑定此控件中的列的类。因此，它看起来像是在尝试返回 LV1Data 对象而不是 ListViewItem 对象。有没有人对我做错了什么或我需要做什么以以编程方式突出显示列表视图行有任何建议？

下面是 ListView 控件的 XAML 代码：

```
<ListView x:Name="ListView1" ItemContainerStyle="{StaticResource alternatingListViewItemStyle}" AlternationCount="2" SelectionChanged="ListView1_SelectionChanged"
 SelectionMode="Multiple" HorizontalAlignment="Left" ItemsSource = "{Binding ElementName=LobbyWindow, Path=ListCollection1}">
   <ListView.View>
      <GridView>
         <GridViewColumn DisplayMemberBinding="{Binding Game}">
         <GridViewColumnHeader Content="Game" FontWeight="Bold" />
         </GridViewColumn>
         <GridViewColumn DisplayMemberBinding="{Binding Stakes}">
         <GridViewColumnHeader Content="Stakes" Width="68" FontWeight="Bold" />
         </GridViewColumn>
         <GridViewColumn Width="30" DisplayMemberBinding="{Binding Seats}">
         <GridViewColumnHeader Content="Seats" FontWeight="Bold" />
         </GridViewColumn>
      </GridView>
   </ListView.View>
</ListView> 
```

**编辑**

```
<!-- Define the resource for the alternating background background used in the ListView objects.  -->
<StackPanel.Resources>
   <Style x:Key="alternatingListViewItemStyle" TargetType="{x:Type ListViewItem}">
      <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
      <Style.Resources>
         <!-- Foreground for Selected ListViewItem -->
         <!-- <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black"/> -->
         <!-- Background for Selected ListViewItem -->
         <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Green"/>
         <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Brown"/>
      </Style.Resources>
      <Style.Triggers>
         <!-- setting up triggers for alternate background colors -->
         <Trigger Property="ItemsControl.AlternationIndex" Value="1">
            <Setter Property="Background" Value="#FFD9F2BF"></Setter>
         </Trigger>
         <Trigger Property="ItemsControl.AlternationIndex" Value="2">
            <Setter Property="Background" Value="White"></Setter>
         </Trigger>
         <Trigger Property="IsSelected" Value="True">
            <Setter Property="Background" Value="LightBlue"></Setter>
         </Trigger>
         <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="BorderBrush" Value="LightBlue" />
         </Trigger>
         <MultiTrigger>
            <MultiTrigger.Conditions>
               <Condition Property="IsSelected" Value="True"></Condition>
               <Condition Property="ItemsControl.AlternationIndex" Value="0"></Condition>
            </MultiTrigger.Conditions>
            <Setter Property="Background" Value="LightBlue"></Setter>
         </MultiTrigger>
         <MultiTrigger>
            <MultiTrigger.Conditions>
               <Condition Property="IsSelected" Value="True"></Condition>
               <Condition Property="ItemsControl.AlternationIndex" Value="1"></Condition>
            </MultiTrigger.Conditions>
            <Setter Property="Background" Value="LightGreen"></Setter>
         </MultiTrigger>
      </Style.Triggers>
      <!-- setting row height here -->
   </Style>
</StackPanel.Resources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:47:10.363

您绑定到项目源，这意味着请求 items[x] 将返回您绑定到的数据类型（ListCollection1 中存储的任何类型）。

如果要更改它的 IsSelected，则必须在 ListCollection1 中的类型上创建该属性，并在样式或模板中绑定到它。

您创建的 IsSelected 属性必须实现为 DependencyProperty，或者它所在的类型必须实现 INotifyPropertyChanged，并在属性更改时触发该事件。

```
<ListView ItemsSource="...">
   <ListView.ItemContainerStyle>
      <Style TargetType="{x:Type ListViewItem}">
         <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
      </Style>
   </ListView.ItemContainerStyle>
</ListView> 
```

然后，您将转换为该数据对象类型，并将其设置为 IsSelected 值。

在您的代码中找到`ListCollection1`. 它的定义看起来像`List<Element>`。`Element`是您需要转换为的类型。

元素需要看起来像

```
public class Element : INotifyPropertyChanged
{
   private _IsSelected;
   public Boolean IsSelected 
   { 
      get { return _IsSelected; }
      set 
      { 
          _IsSelected = value; 
          if (PropertyChanged != null) 
             PropertyChanged("IsSelected");
      }
   }    

   //snip Implement interface INotifyPropertyChanged.

   //snip your other code
} 
```

*-或者-*

```
public class Element : DependencyObject
{
    public static DependencyProperty IsSelectedProperty =
       DependencyProperty.Register("IsSelected" ...

   //snip your other code
} 
```

那么你的代码应该是这样的。

```
Element Val = (Element)ListView1.Items[0];
Val.IsSelected = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:46:58.040

Items 绑定到您的业务对象，这就是它实际上没有返回列表视图项的原因。你可以尝试三件事：

[使用 SetSelectedItems](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.setselecteditems.aspx)并且只传入`IEnumerable`一个对象

或者，您可以获取对象，然后询问`ListViewItem`它所指的

```
(ListViewItem)ListView1.ItemContainerGenerator.ContainerFromItem(ListView1.Items[0]) 
```

或者，您可以绑定到该`IsSelected`属性并在您的视图模型中管理它

# vbulletin - 如果我删除了所有与 vBulletin 相关的文件会怎样？

> ID：15841159
> 
> 赞同：0
> 
> 时间：2013-04-05T18:37:44.807
> 
> 标签：vbulletin

我想完全删除耗尽站点子文件夹的 vBulletin 论坛。我已经通过 .htaccess 删除了对公告的访问权限，但现在我想摆脱整个 shebang。

我可以通过 ftp 进入并删除所有 vBulletin 文件还是会导致问题？

除了安全和资源保护之外，我现在想删除公告的原因是因为现在，在移动到新服务器后，我收到了有关数据库错误的电子邮件（我假设这是因为公告没有t 连接到新服务器上的数据库）。

如果它有任何区别，这就是错误：

mysql_connect() [function.mysql-connect]: 未知的 MySQL 服务器主机 'blah.blah.blah.some.url.associated.with.my.old.hosts.nameserver.com' (1) /path/to/my/第 317 行的 forum/includes/class_core.php

提前感谢您提供的任何建议/信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:50:44.550

要完全删除 vbulletin，您要删除 FTP 中的所有文件并删除数据库。数据库通常比论坛文件大很多。但要停止错误，您将删除 ftp 文件。

# c++ - 将 MSVC10 库与 MVSC11 一起使用

> ID：15841163
> 
> 赞同：2
> 
> 时间：2013-04-05T18:37:51.570
> 
> 标签：c++, visual-studio-2012, visual-studio-2010

有没有办法将 Visual Studio 2010 库与 Visual Studio 2012 工具集一起使用？我的项目使用目前仅使用 MSVC9 和 MSVC10 构建的免费软件库。

我已经熟悉 Properties->General->Platform Toolset 选项，但如果可能的话，我希望将它保留在 Visual Studio 2012 (v110) 上。

# vb.net - 防止VB代码中的Excel弹出消息

> ID：15841165
> 
> 赞同：0
> 
> 时间：2013-04-05T18:37:56.403
> 
> 标签：vb.net, excel

当我将文件导入我的程序时，我遇到了从 excel 弹出的“文件现在可用”消息框的问题。

[http://oi50.tinypic.com/23wajt.jpg](http://oi50.tinypic.com/23wajt.jpg)

```
Private Function XLSSelect_Click(strFileName As String) As DataTable

    Dim connectionStringTemplate As String = "Provider=Microsoft.ACE.OLEDB.12.0;" + "Data Source={0};" + "Extended Properties=""Excel 12.0;HDR=Yes;IMEX=1"""
    Dim connectionString As String = String.Format(connectionStringTemplate, strFileName)

    Try
        Dim sqlSelect As String = "SELECT * FROM [" & GetExcelSheetNames(strFileName)(0) & "];"
        ' Load the Excel worksheet into a DataTable
        Dim workbook As DataSet = New DataSet()
        Dim excelAdapter As System.Data.Common.DataAdapter = New System.Data.OleDb.OleDbDataAdapter(sqlSelect, connectionString)
        excelAdapter.Fill(workbook)

        For i As Integer = 0 To workbook.Tables(0).Columns.Count - 1
            workbook.Tables(0).Columns(i).ColumnName = workbook.Tables(0).Columns(i).ColumnName.ToString.Trim.Replace(" ", "")
        Next

        Return workbook.Tables(0).Copy
    Catch
        Throw New Exception("Error reading from Excel Spreadsheet. Are you sure this file isn't currently open in Excel, and that it has been saved as a .xls through Excel at least once?")
    End Try
    Return Nothing
End Function

Private Shared Function GetExcelSheetNames(excelFile As String) As [String]()
    Dim objConn As OleDbConnection = Nothing
    Dim dt As System.Data.DataTable = Nothing

    Try
        Dim connString As [String] = "Provider=Microsoft.ACE.OLEDB.12.0;" & "Data Source=" & excelFile & ";Extended Properties=Excel 12.0;"
        ' Create connection object by using the preceding connection string.
        objConn = New OleDbConnection(connString)

        ' Open connection with the database.
        objConn.Open()
        ' Get the data table containg the schema guid.
        dt = objConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, Nothing)

        If dt Is Nothing Then
            Return Nothing
        End If

        Dim excelSheets As [String]() = New [String](dt.Rows.Count - 1) {}
        Dim i As Integer = 0

        'Add the sheet name to the string array.
        For Each row As DataRow In dt.Rows
            excelSheets(i) = row("TABLE_NAME").ToString()
            i += 1
        Next

        Return excelSheets
    Catch ex As Exception
        Return Nothing
    Finally
        ' Clean up.
        If objConn IsNot Nothing Then
            objConn.Close()
            objConn.Dispose()
        End If
        If dt IsNot Nothing Then
            dt.Dispose()
        End If
    End Try
End Function 
```

任何人都知道我可以如何禁用这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:46:09.873

```
Dim appExcel As Excel.Application

Set appExcel = New Excel.Application
appExcel.Workbooks.Open "e:\development\test.xls", 0

'  Do your thing here...

appExcel.DisplayAlerts = False  '  Surpress save dialog box.
appExcel.Quit  '  Quit without saving. you can change as you want
Set appExcel = Nothing 
```

在你的代码中

```
Try
        Dim connString As [String] = "Provider=Microsoft.ACE.OLEDB.12.0;" & "Data Source=" & excelFile & ";Extended Properties=Excel 12.0;"
        ' Create connection object by using the preceding connection string.
        objConn = New OleDbConnection(connString)

        ' Open connection with the database.
        objConn.Open() 
```

appExcel.DisplayAlerts = False ' 在这里试试！

```
 ' Get the data table containg the schema guid.
        dt = objConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, Nothing) 
```

资料来源：[http ://www.xtremevbtalk.com/showthread.php?t=16007](http://www.xtremevbtalk.com/showthread.php?t=16007)

# javascript - PhoneGap iframe 一指滚动

> ID：15841166
> 
> 赞同：0
> 
> 时间：2013-04-05T18:37:56.380
> 
> 标签：javascript, jquery, html, cordova, jquery-mobile

我正在`PhoneGap`使用 2.4`jQuery`和`jQuery Mobile`. 该应用程序有一个顶部栏和底部导航栏，两者都是固定的。中间是所有动作发生的地方。

中间部分是一个 DIV，我正在尝试将位于 div 内部的云`PDF`加载`iframe`。但是，就像 iOS 一样，`PDF`一旦`iframe`加载`PDF`到`iframe`. 我可以用两根手指滚动，但这不是想要的结果。

所以我的问题是，我怎样才能`iframe`用一根手指滚动。

另外，如果可能的话，我可以在其中启用捏缩放`iframe`以增加/减小 的大小`PDF`吗？iOS 仅显示`PDF`iPad 宽度的一半左右。

这是`CSS`我正在使用/尝试的：

```
iframe {
width: 200%;
height: 200%;
overflow: auto;
-webkit-overflow-scrolling: touch;
zoom: 200%;
}

#display_area {
max-width: 1024px;
min-height: 558px !important;
height: 558px !important;
max-height: 558px !important;
overflow-y:scroll;
padding: 0px;
} 
```

# sql - 如何将值的数组参数输入到 Firebird 存储过程？

> ID：15841167
> 
> 赞同：10
> 
> 时间：2013-04-05T18:38:00.810
> 
> 标签：sql, arrays, parameters, firebird

我想将ID的**数组参数输入到****Firebird Stored Procedure**。

:INPUT_LIST_ID = [1, 2, 12, 45, 75, 45]

我需要执行这个 SQL 命令：

```
SELECT *
FROM CITY
WHERE ID_CITY IN (:INPUT_LIST_ID) 
```

是否可以？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-06T23:36:16.767

你也可以使用这样的东西：

```
SELECT *
FROM CITY
WHERE ID_CITY IN (SELECT ID FROM GetIntegerList('1, 2, 12, 45, 75, 45')) 
```

您必须创建一个名为“GetIntegerList”的新 Firebird 过程，它看起来像这样：

```
CREATE OR ALTER PROCEDURE "GETINTEGERLIST"("AINTEGERLIST" VARCHAR(32000))
returns (
  ID integer
)
as
  declare variable IntegerList varchar(32000);
  declare variable CommaPos integer;
  declare variable IntegerVal varchar(10);
begin
  IntegerList = AIntegerList || ' ';
  CommaPos = Position(',', IntegerList);

  while (CommaPos > 0) do
  begin
    IntegerVal = Trim(SubString(IntegerList from 1 for CommaPos - 1));

    if (Char_Length(IntegerVal) > 0) then
    begin
      if (IntegerVal similar to '[0-9]*') then
      begin
        ID = Cast(IntegerVal as integer);
        suspend;
      end
    end

    if (Char_Length(IntegerList) > CommaPos) then
      IntegerList = SubString(IntegerList from CommaPos + 1);
    else
      IntegerList = '';

    CommaPos = Position(',', IntegerList);
  end

  IntegerList = Trim(IntegerList);

  if (Char_Length(IntegerList) > 0) then
  begin
    if (IntegerList similar to '[0-9]*') then
    begin
      ID = Cast(IntegerList as integer);
      suspend;
    end
  end
end 
```

请注意，这是在 Firebird 2.5.2 中完成的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T20:35:19.623

AFAIK 不，那是不可能的。虽然 Firebird 确​​实有数组数据类型，但对它的支持是基本的，通常不建议使用数组。我认为最简单的解决方案是将数组作为（逗号分隔）字符串传递，然后使用该[`for execute statement`](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-psql-execstat.html#langrefupd25-psql-execstat-multirow)语句来获取结果集，例如

```
create procedure CITY (INPUT_LIST_ID varchar(1024)) 
returns( ... )
as
begin
  for execute statement
    'select ... from T where ID_CITY IN ('|| INPUT_LIST_ID ||')' into ...
  do begin
     suspend;
  end
end 
```

然而，这意味着您用来获取结果的语句也会发生变化，而不是`WHERE`您将使用存储过程的参数`CITY`：

```
SELECT * FROM CITY('1, 2, 12, 45, 75, 45') 
```

发送参数列表的另一个选项是使用[全局临时表](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-ddl-table.html)。这样做的好处是您可以发送大量 ID 而不会超过允许的最大语句大小，但设置呼叫需要更多工作......

```
create global temporary table SP_CITY_PARAMS (
  id int not null primary key
)
on commit delete rows;

create procedure CITY
returns( ... )
as
begin
  for select ... from T where ID_CITY IN (
      select id from SP_CITY_PARAMS
  ) into ...
  do begin
     suspend;
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-30T13:54:16.417

如果您使用 Firebird 1.5（它也应该适用于更高版本），您可以使用我制作的这个简单函数将单个字符串转换为整数数组：

```
create or alter procedure INTEGER_LIST (
    input varchar(4096))
returns (
    INT_VALUE integer)
as
declare variable CHAR_COUNT integer;
declare variable PARAM_LENGTH integer;
declare variable READ_VALUE char(1);
declare variable CURRENT_INTEGER varchar(20);
begin
    param_length = strlen(input);
    char_count = 0;
    current_integer = '';
    while (char_count < param_length) do begin
        char_count = :char_count + 1;
        read_value = substr(:input, :char_count, :char_count);
        if (:read_value <> ',') then begin
            current_integer = :current_integer || :read_value;
        end else if (:read_value <> ' ') then  begin
            int_value = cast(:current_integer as integer);
            current_integer = '';
            suspend;
        end

        if (:char_count = :param_length) then begin
            int_value = cast(:current_integer as integer);
            suspend;
        end
    end
end 
```

**用法**

`select int_value from integer_list('1,2,3,4, 5, 200, 1, 598415, 2')`

将返回：

```
INT_VALUE
1
2
3
4
5
200
1
598415
2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-14T12:20:06.687

试试这个：

```
 SELECT *
    FROM CITY
    WHERE '/city1/city2/city.../' containing '/' || ID_CITY || '/'; 
```

# java - 屏幕关闭时的 Android 音量按钮侦听器

> ID：15841168
> 
> 赞同：3
> 
> 时间：2013-04-05T18:38:08.533
> 
> 标签：java, android, android-mediaplayer, volume, onkeydown

我有一个使用 onKeyDown() 监听音量按钮事件的活动，但是当屏幕关闭时我无法看到这些事件。

屏幕关闭时，有什么方法我仍然可以听音量按钮按下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:39:48.117

不，这通常是不可能的，因为屏幕灯关闭时广播接收器无法工作，因为屏幕关闭后，您的音量按钮会锁定并且音量不会改变。

**执行此操作的替代方法：**

但是您可以在后台无限次使用零声音运行媒体播放器来实现，让您的音量按钮始终处于活动状态，或者您可以使用唤醒锁定来实现此目的。

但我不建议长时间使用这种方法，因为它会很快耗尽电池电量。您可以使用这些替代方法在短时间内执行此操作，否则手机电池会迅速下降。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-16T09:32:58.387

如果您希望控制通过您的应用播放的音频音量，请使用 setVolumeControlStream() 方法。它将音量键按下定向到您指定的音频流。

```
setVolumeControlStream(AudioManager.STREAM_MUSIC); 
```

但是，如果您希望将音量按钮设置为您的应用程序的快捷键，恐怕没有直接的解决方案。

# c# - 从文本文件中读取并更新

> ID：15841170
> 
> 赞同：4
> 
> 时间：2013-04-05T18:38:17.423
> 
> 标签：c#, io

我是编程新手，遇到了一个问题，我不知道如何处理它。

我用线

```
 textBox2.Text = System.IO.File.ReadAllText(path); 
```

从文本文件中读取并将内容粘贴到 textBox2 中。

现在的问题是我试图阅读的文本文件是一个大的（几兆字节）文本文件。此文本文件包含来自程序的日志，新日志总是添加到文件底部。
现在，如果更新了文本文件，我想更新 textBox2。但是我不确定如何以有效的方式做到这一点。一种方法是再次读取整个文本文件，但由于文本文件太大，这是一个非常缓慢的过程。

我有兴趣找到一种不同的、更快的方法来处理这个问题。我对确切的代码并不真正感兴趣，我只是希望找出我应该看的方向以及可以考虑的选项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T18:40:32.680

好吧，您可以检查两件明显的事情：

*   文件大小 ( [`FileInfo.Length`](http://msdn.microsoft.com/en-GB/library/system.io.fileinfo.length.aspx))
*   上次写入时间 ( [`FileSystemInfo.LastWriteTimeUtc`](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.lastwritetimeutc.aspx))

如果您跟踪这些，您应该能够检测到文件何时更改 - 至少具有合理的置信度。

此外，您可以使用[`FileSystemWatcher`](http://msdn.microsoft.com/en-GB/library/system.io.filesystemwatcher.aspx)来监视更改。

此外，您可能需要考虑跟踪您已阅读到的位置 - 这样您就可以通过查找文件中的正确位置来读取新数据。

最后，`TextBox`对于一个巨大的日志文件来说，a 可能并不是最好的用户界面。如果这是一个*结构化*日志文件，最好在 UI 中显示该结构 - 例如，每个日志条目在表中一行，可能带有过滤选项等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T18:40:55.040

您可以每隔 X 秒检查一次。如果文件更改了，则更新，如果没有，则不执行任何操作。您可以保留文件的修改时间以了解它是否已更改。

# ios - Heroku Core Data buildpack，没有检测到雪松支持的应用程序

> ID：15841171
> 
> 赞同：0
> 
> 时间：2013-04-05T18:38:19.370
> 
> 标签：ios, heroku, afincrementalstore

[我正在尝试使用AFIncrementalStore 和 Core Data Buildpack](https://devcenter.heroku.com/articles/ios-core-data-buildpack-app)将现有的 Core Data（带有本地存储）项目迁移到 Heroku ，但推送到 Heroku 一直失败。

我的应用程序设置与上述教程中的主要区别：

*   我已经使用 AFNetworking/AFIncremental 依赖项设置了 Xcode 工作区，但实际上还没有更改任何代码。

*   包含 Xcode 项目/工作区文件的目录比我的 git 存储库的根目录低一级。这意味着`heroku create --buildpack git://github.com/mattt/heroku-buildpack-core-data.git`无法创建名为 的 git 远程`heroku`，但我可以`cd ..`而且`heroku git:remote -a appname`这似乎很酷。

*   我`master`在我的 git repo 之外的一个分支上工作，所以当我推送到 Heroku 时，我需要使用`git push heroku my_local_branch:master`.

然而，这`git push`并没有得到任何地方，甚至没有进入核心数据构建包的东西（据我所知）：

```
-----> Fetching custom git buildpack... done
 !     Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:appname.git
 ! [remote rejected] my_local_branch -> master (pre-receive hook declined) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:45:30.147

我刚刚完成了我的一个项目并安排它来模仿你的。

`.xcdatamodeld`如果不在根目录的 1 个文件夹级别内，则buildpack 将失败。我建议[在 Github 上提交问题](https://github.com/heroku/heroku-buildpack-core-data/issues/new)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T22:23:57.127

当你创建 Heroku 应用程序时，可能你没有传入`--buildpack`参数。您可以通过运行检查`heroku config`并验证是否有`BUILDPACK_URL`指向 buildpack 存储库的设置。如果缺少，您可以添加它：

```
heroku config:add BUILDPACK_URL=https://github.com/some/buildpack.git -a myapp 
```

文档[在这里](https://devcenter.heroku.com/articles/third-party-buildpacks)。

# c# - 按数组内容分组

> ID：15841178
> 
> 赞同：0
> 
> 时间：2013-04-05T18:38:58.983
> 
> 标签：c#, linq, lambda, linq-group

我有一个`List<Tuple<string,long,byte[]>>`，我想按字节数组的内容进行分组。

`GroupBy`有没有一种简单的方法可以使用 lambda来做到这一点？

理想情况下，我想在不创建中间数据结构（如保存数组元素的字符串）的情况下做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:47:13.807

您可以使用自定义`IEqualityComparer<byte[]>`（甚至更好，通用的：）实现来`IEqualityComparer<T[]>`实现：

```
class ArrayComparer<T> : IEqualityComparer<T[]>
{
    public bool Equals(T[] x, T[] y)
    {
        return x.SequenceEqual(y);
    }

    public int GetHashCode(T[] obj)
    {
        return obj.Aggregate(string.Empty, (s, i) => s + i.GetHashCode(), s => s.GetHashCode());
    }
} 
```

我很确定`GetHashCode`可以更好地实施，但这只是一个例子！

**用法：**

```
var grouped = source.GroupBy(i => i.Item3, new ArrayComparer<byte>()) 
```

# nginx - NGINX，包含在我的虚拟主机文件中

> ID：15841180
> 
> 赞同：0
> 
> 时间：2013-04-05T18:39:10.960
> 
> 标签：nginx, virtualhost

我有一个带有 MediaTemple 的 DV 服务器，最近他们的支持启用了 ngnix 网络服务器。我一直在 DV 上的 WordPress 网站上将他们的 ProCDN 与 Super Cache 集成。

我在这个域 convoyofhope.eu 上注意到 CDN 工作正常，但是如果您在 Firefox 上查看该站点，由于跨域问题，字体无法正常工作。我发现这个网站似乎可以解决问题[http://www.red-team-design.com/firefox-doesnt-allow-cross-domain-fonts-by-default](http://www.red-team-design.com/firefox-doesnt-allow-cross-domain-fonts-by-default)

我的问题是，在网站上它说：

此外，如果您使用 nginx 作为网络服务器，则需要在虚拟主机文件中包含以下代码：

```
location ~* \.(eot|otf|ttf|woff)$ {
    add_header Access-Control-Allow-Origin *;
} 
```

我只是不确定我把它放在我的服务器上的什么地方。我检查了 convoyofhope.eu 的虚拟主机，但我没有看到我会在哪里添加它来完成这项工作。感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:52:42.063

它通常会放在具有该`server`主机块的 nginx 配置文件中：

```
server {
    listen       80;
    server_name  convoyofhope.eu;

    ...
    location ~* \.(eot|otf|ttf|woff)$ {
        add_header Access-Control-Allow-Origin *;
    }
    ...
} 
```

在 RHEL 相关的发行版上，这将位于文件系统上的`/etc/nginx/`. 您的特定分布可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T20:49:53.830

在 MediaTemple 上，在您的 Plesk 控制面板中，转到网站与域（选项卡）-> Web 服务器设置，然后向下滚动到“其他 nginx 指令”。将您的位置...指令放在文本框中。

# programming-languages - 神秘的编程语言

> ID：15841181
> 
> 赞同：11
> 
> 时间：2013-04-05T18:39:15.933
> 
> 标签：programming-languages

我在清理服务器时发现了一些随机代码，似乎没有人知道它是什么编程语言。

行尾没有分号 它使用关键字“if”、“then”、“for”、“to”、“do”，但没有使用“end” 它使用关键字“as”，因此可能是面向对象的

到目前为止，它看起来像 F# 或 Haskell 语法

它还使用#0

我们认为这是用于表示字符的 Pascal 样式符号，因此 #0 将等同于 C 中的 '\0'

任何帮助都会很棒。

下面是代码的摘录。

```
bc=(ay*ax*az)
check1 = ((bc+bc)*(ax+acx)*(az+acz))
check2 = p_ar.count-9
if check1!=check2 then change(messagebox "rebuild")

--position
dmorr1=#0
dmar2=#0
dmar3=#0

--Y update
if acy>0 and bc
{
    dmar1=#0
    dmar2=#0
    rnum = (bp+ch)
    for i=1 to pcount do
    {
        if (sag m)!=0 then
        {
            append dmar2(getUserProp cnode("cp" + (i as string)))
        }
        else
        }
            append dmar2(getUserProp dconde("cp" + (i as string)))
            append imgt1 dmar2
            dmar2=#0
        } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T19:07:46.430

如前所述，看起来像[MaxScript](http://docs.autodesk.com/3DSMAX/15/ENU/MAXScript-Help/) for 3ds / AutoDesk。总是为了容易点暴食:)

# c# - WinRT 如何测试和模拟暂停状态

> ID：15841188
> 
> 赞同：0
> 
> 时间：2013-04-05T18:39:53.670
> 
> 标签：c#, windows-8, windows-runtime

我寻找一种可能性来测试我的应用程序的暂停行为。

有没有办法强制暂停 Windows 8 / WinRT C# 应用程序？

# php - 如何在课堂上访问我的课堂 var？

> ID：15841192
> 
> 赞同：-1
> 
> 时间：2013-04-05T18:40:18.443
> 
> 标签：php

我有一堂课：

```
class MyClass {
    public $a = 'blablabla';
} 
```

而且我想在`$a`不需要使用任何函数的情况下访问类中的变量，比如

```
class MyClass {
    public $a = 'blablabla';
    public $b = $a;
} 
```

我尝试使用`public $b = $this->a`,`public $b = MyClass->a`和许多其他替代方法来尝试做我想做的事，但什么也没做。而且我在谷歌上没有找到任何可以解释我想要什么的东西。

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:45:37.457

我不确定为什么简单的变量调用不起作用，但您可以尝试：

```
 class MyClass {
  public $a = 'blablabla';

   function geta(){
   return $this->a;
    }
   $b=geta();
} 
```

# python - 获取列表中 N 个最大值的索引，使这些值符合给定条件

> ID：15841203
> 
> 赞同：0
> 
> 时间：2013-04-05T18:41:04.800
> 
> 标签：python

```
Ids = [ i for i, v in heapq.nlargest(RN, enumerate(score_real_test), key=operator.itemgetter(1))] 
```

这将给出列表 score_real_test 中 RN 最大值的索引。是否可以获取“在列表 score_real_test 中并满足布尔条件 COND”的 RN 最大值的索引？

Ids 应该包含 RN 索引。

编辑：现在我使用这个解决方案，但它不是最好的：

```
score_real_test_2 = np.sort( [ v for i,v in enumerate(score_real_test) if pred_real_test[i] == NOVEL ] )
score_real_test_2 = score_real_test_2[len(score_real_test_2)-RN:]
large_dist_ids = [i for i in range(len(score_real_test)) if score_real_test[i] in score_real_test_2] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:59:01.830

If you want to keep this is a one-liner, you can simply replace enumerate by a list comprehension(or generator expression) that pre-filters your data based on the condition.

Like so:

```
Ids = [i for i, v in heapq.nlargest(RN, [(j,v) in enumerate(score_real_test) if pred_real_test[i] == NOVEL], key=operator.itemgetter(1))] 
```

Or if you want to keep it clearer, you can add a filtering step before the selection(still no need for pre-sorting):

```
tmp = [item for item in enumerate(score_real_test) if pred_real_test[item[0]] == NOVEL]
Ids = [i for i, v in heapq.nlargest(RN, tmp, key=operator.itemgetter(1))] 
```

# java - Eclipse 4\. 2 Java 控制台更改背景颜色

> ID：15841207
> 
> 赞同：8
> 
> 时间：2013-04-05T18:41:20.167
> 
> 标签：java, eclipse, console

我一直在尝试更改我的 Java 控制台颜色，但我设置的运行/调试首选项似乎不起作用。我已经安装了“Eclipse Color Themes”和“Eclipse Chrome”插件，它们运行良好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T19:02:11.423

我尝试在旧版本上更改该设置并且它有效。

也许一个插件导致了这个问题。您可以将它们一一删除，直到它再次起作用。

或者可能是 4.2 的一个错误。尝试以前的版本。

或检查错误存储库：[https ://bugs.eclipse.org/bugs/](https://bugs.eclipse.org/bugs/)

![工作环境图片](https://i.stack.imgur.com/xfsYZ.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-07T11:21:53.150

直到我运行一个程序，我才真正发生变化，然后更新背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-15T10:34:01.507

在首选项（在 mac 上单击“Eclipse”，在 PC 或 Linux 上单击“Window”）部分，搜索“console”。在“构建/控制台”下，设置您希望应用的颜色。重新启动 Eclipse，并构建您的项目。当控制台显示编译过程的输出时，您应该在暗模式下看到您喜欢的配色方案。

每当您点击运行/调试项目而不是构建它时，“运行/调试”下的设置就会激活。因此，您可能希望为“构建”和“运行/调试”选项保留相同的设置。

# ruby-on-rails - rails 选择字段自定义属性

> ID：15841212
> 
> 赞同：0
> 
> 时间：2013-04-05T18:41:51.793
> 
> 标签：ruby-on-rails, forms

我目前有一个带有默认新建、编辑、创建等方法的脚手架。

我的新方法如下所示：

```
 def new
   @group = params[:id]
   @people = Person.all 
```

现在我想创建一个方法“选择”，如

```
def select
    render action: 'select'
end 
```

并且 select.html.erb 应该只包含一个选择框来选择组，我需要它作为新方法的输入。

像这样的（形式？）看起来如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:11:37.150

首先

```
def select
    render action: 'select'
end 
```

肯定不会做任何事情，并且可能会导致无限循环错误，因为`render :action=>your_action`渲染控制器的动作，在这里你渲染这个动作本身。

要与视图交互，您需要方法

```
respont_to do |format|
format.html
end 
```

据我了解，您需要使用单选按钮。来自 API：

```
<%= radio_button_tag(:age, "child") %>
<%= label_tag(:age_child, "I am younger than 21") %>
<%= radio_button_tag(:age, "adult") %>
<%= label_tag(:age_adult, "I'm over 21") %> 
```

# draw - 绘制多条线并删除单条线

> ID：15841213
> 
> 赞同：0
> 
> 时间：2013-04-05T18:41:54.220
> 
> 标签：draw, kineticjs

我可以在画布上画多条线；使用 drawScene 将它们添加到图层

```
dlayerA1.add(line);
line.getPoints()[0].x = mousePos.x;
line.getPoints()[0].y = mousePos.y;
line.getPoints()[1].x = mousePos.x;
line.getPoints()[1].y = mousePos.y;
moving = true;
dlayerA1.drawScene(); 
```

[http://jsfiddle.net/user373721/xzEad/1/](http://jsfiddle.net/user373721/xzEad/1/)。

有没有办法删除个别行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:32:17.313

目前，您必须像这样修改点数组：

line.getPoints()[0].splice(index, 1);

由于数组是通过引用修改的，因此修改返回的数组会修改“真实来源”点数组 attr

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T05:03:54.260

我为每个对象分配了一个唯一的 ID，并在单击它时使用以下内容将其删除：

```
 r = r + 1;
                        var mousePos = stage1.getMousePosition();
                        rectA1 = new Kinetic.Rect({
                            x: mousePos.x - rOffset,
                            y: mousePos.y - rOffset,
                            width: 0,
                            height: 0,
                            stroke: 'red',
                            strokeWidth: 4,
                            id:"rectA" + r
                          });

                        rectA1.setListening(true);
                         myRect1[r] = rectA1;
                        background1.add(myRect1[r]);
                        //start point and end point are the same
                        rectA1.setX(mousePos.x - rOffset);
                        rectA1.setY(mousePos.y - rOffset);
                        rectA1.setWidth(0);
                        rectA1.setHeight(0);
                        moving = true;

                        background1.drawScene();
                        myRect1[r].on("click", function () {  

                            this.remove();
                        }); 
```

我的解决方案基于这个很好的答案：[How to select an object in kinetic.js?](https://stackoverflow.com/questions/15315925/how-to-select-an-object-in-kinetic-js)

# django - 如何在 django 中获取所有相关对象的不同集合？

> ID：15841216
> 
> 赞同：2
> 
> 时间：2013-04-05T18:42:01.560
> 
> 标签：django, django-models

我有这个设置：

```
class ModelA:
    name = models.TextField('Name')

class ModelB:
    name = models.TextField('Name')
    a = models.ForeignKey(ModelA) 
```

我想做的是获取 ModelB 拥有的所有不同 ModelA 的列表。例如，我的数据库如下所示：

```
a1 = ModelA(name='a1')
a2 = ModelA(name='a2')
a2 = ModelA(name='a3')
b1 = ModelB(name='b1', a=a1)
b2 = ModelB(name='b2', a=a1)
b2 = ModelB(name='b2', a=a3) 
```

然后我希望查询的结果是 [a1, a3]。

实际上，在一个地方，我想要的只是列表的计数，但我认为如果我能得到列表的计数，那是微不足道的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:48:09.013

您可以结合使用[反向查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships) [和`distinct`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.distinct)

```
ModelA.objects.filter(modelb__isnull=False).distinct("name") 
```

> 您可以传递位置参数 (*fields) 以指定应应用 DISTINCT 的字段的名称。这将转换为 SELECT DISTINCT ON SQL 查询。这就是区别。对于普通的 distinct() 调用，数据库在确定哪些行是不同的时比较每一行中的每个字段。对于具有指定字段名称的 distinct() 调用，数据库将仅比较指定的字段名称。

# python - 使用 pdb 时如何忽略一行？

> ID：15841217
> 
> 赞同：5
> 
> 时间：2013-04-05T18:42:02.627
> 
> 标签：python, pdb

对于一些快速的 Python 调试，我偶尔`import pdb;pdb.set_trace()`会插入一行代码，让我进入调试器。非常便利。但是，如果我想调试一个循环，它可能会运行很多很多次，它会在某种程度上失去它的有效性。我可以继续混搭`c`很多很多次，但是有没有办法删除/忽略那个硬编码的断点，这样我就可以让它完成？

我可以设置一个全局标志并有条件地运行它，但是我会失去单行断点的“独立性”，也需要为每个`pdb.set_trace()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:12:50.653

我的另一个答案是一种快速破解，并不完美（将禁用对 的**所有**调用`set_trace`）。这是一个更好的解决方案。

我们定义了一个模块包装`pdb`。其中，`set_trace`是一个可调用对象，维护一个禁用调用者列表（由文件名/行号标识）。

```
# mypdb.py
import inspect
import sys
try:
    import ipdb as PDB
except ImportError:
    import pdb as PDB

class SetTraceWrapper(object):
    def __init__(self):
        self.callers_disabled = set()
        self.cur_caller = None
    def __call__(self):
        self.cur_caller = self.get_caller_id()
        if self.cur_caller in self.callers_disabled:
            # already disabled for caller
            #print 'set_trace SKIPPED for %s' % ( self.cur_caller, )
            return
        #print 'set_trace BREAKING for %s' % ( self.cur_caller, )
        try:
            PDB.set_trace(sys._getframe().f_back)
        except TypeError:
            PDB.set_trace()
    def disable_current(self):
        #print 'set_trace DISABLING %s' % ( self.cur_caller, )
        self.callers_disabled.add(self.cur_caller)
    def get_caller_id(self, levels_up = 1):
        f = inspect.stack()[levels_up + 1]
        return ( f[1], f[2] )  # filename and line number

set_trace = SetTraceWrapper() 
```

在您的代码中，确保使用包装器：

```
import mypdb as pdb; pdb.set_trace() 
```

当您想禁用当前的`set_trace`呼叫线路时，请执行以下操作：

```
pdb.set_trace.disable_current() 
```

笔记：

1.  我个人更`ipdb`喜欢`pdb`

2.  使用时`pdb`，由于实际调用的函数`pdb.set_trace`在包装器中，因此中断时的当前帧将在其中。该`up`命令为您提供所需的框架。`ipdb`如果使用（包装器中的实现确保在正确的位置中断），则不会发生这种情况。

3.  使用时`ipdb`，我发现它报告调用者帧行号不一致。这意味着你第一次这样做`pdb.set_trace.disable_current()`，它可能不成立。如果下一次它坏了，就再做一次——第二次成立。

4.  一般来说，拥有自己的`pdb`包装器对其他事情也很有用。我有自己的`set_trace`包装器，可以避免中断 if `not sys.stdout.isatty`（如果进程未连接到终端，也不会在将 stdout 重定向到文件/管道时中断）。也就是说，拥有自己的`pdb`包装器并调用它`set_trace`而不是`pdb`'s 是一种很好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T20:04:12.683

以下 hack 将禁用当前运行中的**所有其他调用**`set_trace`（即，从代码中的任何位置）。

创建这个`noop_pdb`插件：

```
# noop_pdb.py
def set_trace(*args, **kwargs):
    pass 
```

然后，一旦您的代码在实际中中断`pdb.set_trace`，并且您想要禁用对 的其余调用`set_trace`，请执行以下操作：

```
sys.modules['pdb'] = __import__('noop_pdb') 
```

下次解释器遇到如下行：

```
import pdb;pdb.set_trace() 
```

它避免了重新导入内置的`pdb`，拿起插件。

编辑：另一种实现这种不需要的hack的方法`noop_pdb`是用noop替换`set_trace`，而不是整个`pdb`模块：`pdb.set_trace = lambda: None`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T02:51:35.410

您是否尝试过使用 pdb 提供的“直到”命令？

从[http://docs.python.org/2/library/pdb.html#debugger-commands](http://docs.python.org/2/library/pdb.html#debugger-commands)：

> **直到）**
> 
> 继续执行，直到到达行号大于当前行的行或从当前帧返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T18:47:15.173

你看了`condition bpnumber`吗？您可以禁用断点，然后使其成为有条件的。或者，您可以首先使用`break`或`tbreak`使断点成为条件断点。详细信息可以在[这里](http://docs.python.org/2/library/pdb.html)找到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-11T16:54:52.147

在 pdb 中使用 'return' 可以在循环中传递 pdb.set_trace() 并跳转到当前函数的最后一行。

# mod-rewrite - mod_rewrite：transform = 和斜线中的 &

> ID：15841220
> 
> 赞同：1
> 
> 时间：2013-04-05T18:42:06.930
> 
> 标签：mod-rewrite, url-rewriting, friendly-url

我只是在寻找一种解决方案，将查询字符串中的任何 =,?,& 转换为简单的斜杠 /。更具体地说，我的链接类似于：

[http://www.mydomain.com/product.php?c=1&sc=12&products_id=15](http://www.mydomain.com/product.php?c=1&sc=12&products_id=15)

我想要这样： [http ://www.mydomain.com/product.php/c/1/sc/12/products_id/15](http://www.mydomain.com/product.php/c/1/sc/12/products_id/15)

无论母版页是什么（在本例中是 product.php，但也可以是 foo.php、bar.php...或其他）。我用谷歌搜索了很多，但没有找到任何好的解决方案来实现我正在寻找的东西。我发现了复杂的重写规则，但它们都包含“页面名称”：即

*重写规则 ^/?index/([^/]+)/([^/]+)$ /index.php?foo=$1&bar=$2 [L,QSA]*

该规则仅适用于 index.php 和已知变量，如 foo、bar。我需要一个更通用的，无论母版页是什么，无论变量是什么。这可以做到吗？

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:32:09.117

我假设您使用的是 apache >= 2.2。将此添加到您的 apache conf：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    # you absolutely need to use RewriteBase if this snippet is in .htaccess
    # if the .htaccess file is located in a subdirectory, use
    # RewriteBase /path/to/subdir
    RewriteBase /

    RewriteCond %{QUERY_STRING} ^(=|&)*([^=&]+)(=|&)?(.*?)=*$
    RewriteRule ^(.*)$ $1/%2?%4= [N,NE]

    RewriteCond %{QUERY_STRING} ^=$
    RewriteRule ^(.*)$ $1?  [R,L]
</IfModule> 
```

第一个 RewriteCond/RewriteRule 对重复匹配由 & 或 = 分隔的标记并将其添加到路径中。重要的标志是导致整个规则集重新开始的 [N]，就像规则匹配的频率一样。此外，a = 附加到查询字符串的末尾。这是为了在 URL 中创建一个标记，表明至少发生了一次重写。

第二个规则集检查在 URL 完全重写后保留的 = 标记并发出重定向。

查看[http://wiki.apache.org/httpd/RewriteQueryString](http://wiki.apache.org/httpd/RewriteQueryString)以获得一些有用的提示。

# regex - 差异，同时忽略一行内的模式，但不是整行

> ID：15841223
> 
> 赞同：8
> 
> 时间：2013-04-05T18:42:12.500
> 
> 标签：regex, unix, compare, diff

我经常需要比较两个文件，而忽略这些文件中的某些更改。我不想忽略整行，只是其中的一部分。最常见的情况是行上的时间戳，但我也需要忽略其他几十种模式。

文件1：

```
[2012-01-02] Some random text foo
[2012-01-02] More output here 
```

文件2：

```
[1999-01-01] Some random text bar
[1999-01-01] More output here 
```

在此示例中，我想查看第 1 行的差异，而不是第 2 行的差异。

使用 diff 的 -I 选项将不起作用，因为它会忽略整行。理想输出：

```
--- file1       2013-04-05 13:39:46.000000000 -0500
+++ file2       2013-04-05 13:39:56.000000000 -0500
@@ -1,2 +1,2 @@
-[2012-01-02] Some random text foo
+[1999-01-01] Some random text bar
 [2012-01-02] More output here 
```

我可以使用 sed 预处理这些文件：

```
sed -e's/^\[....-..-..\]//' < file1 > file1.tmp
sed -e's/^\[....-..-..\]//' < file2 > file2.tmp
diff -u file1.tmp file2.tmp 
```

但后来我需要把这些临时文件放在某个地方，然后记得清理它们。此外，我的 diff 输出不再引用原始文件名，也不再发出原始行。

是否有广泛可用的 diff 变体或类似工具可以作为单个命令执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:01:56.347

您可以使用临时流来避免文件创建和清理，语法如下：

```
$ diff <(command with output) <(other command with output) 
```

在你的情况下：

```
diff <(cat f1 | sed -e's/^\[....-..-..\]//') <(cat f2 | sed -e's/^\[....-..-..\]//') 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:02:12.047

由于我不确定如何保留日期，因此这不完全是您要查找的内容，但这确实解决了您的几个问题：

```
diff -u --label=file1 <(sed 's/^\[....-..-..\]//' file1) --label=file2 <(sed 's/^\[....-..-..\]//' file2) 
```

输出：

```
--- file1
+++ file2
@@ -1,2 +1,2 @@
- Some random text foo
+ Some random text bar
  More output here 
```

# php - 如何获得真实 IP？

> ID：15841226
> 
> 赞同：-6
> 
> 时间：2013-04-05T18:42:37.313
> 
> 标签：php, web, ip-address, registration

我开发了一个网站。我使用 $_SERVER 变量来查找客户端的 IP。刷新互联网连接时，它显示不同的IP。如何获取真实IP，让客户在一台电脑上只能注册一个账号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:51:55.417

不幸的是，无法保证一台计算机（或用户）只会注册一个帐户。即使您的大多数用户都有一个固定的 IP 地址，想要破坏您的系统的人也只会想方设法通过不同的路线连接到您的网站，这样您的支票就不会意识到他们每次都是同一个人。

您可以将您的系统设计为需要一个有效的电子邮件地址，这将减少篡改量，但不会阻止有决心的人使用一次性电子邮件地址在您的网站上注册多个帐户。

# android - 按钮的文字只有一半可见

> ID：15841232
> 
> 赞同：0
> 
> 时间：2013-04-05T18:42:58.917
> 
> 标签：android, button, android-linearlayout, android-relativelayout

我在解决以下问题时遇到了麻烦。我有一个带有文本 OK 的按钮。该按钮嵌套在一个`LinearLayout`. 此布局嵌套在两个`RelativeLayout`. 第二个/内部`RelativeLayout`有`android：layout_margin =“15dp”。这导致按钮内的文本只有一半可见。XML 如下。我正在使用它，因为它为我提供了右上角带有 (X) 按钮的“弹出”对话框。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    >

    <RelativeLayout 
        android:orientation="vertical"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_margin="15dp" 
        android:padding="2dp"
        android:background="@drawable/xml_round_corners_background"
        >
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" 
                android:padding="15dp"
                android:background="@drawable/xml_round_corners_background"
                android:gravity="center_vertical|center_horizontal"
                                    android:layout_weight="1"

                >
                <LinearLayout 
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" 
                    android:layout_weight="1"
                    >
                    <TextView
                        android:id="@+id/exitTV"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_vertical|center_horizontal"
                        android:textAlignment="center"
                        android:text="TEXT....\n\n\n" 
                        android:textColor="@color/white"
                    />
               </LinearLayout>

               <LinearLayout
                    android:layout_weight="1"
                    android:id="@+id/bluetooth_error_button_linearlayout"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:orientation="horizontal" 
                    android:layout_below="@+id/exitTV"
                    >
                    <Button
                        android:layout_margin="15dp" 
                        android:id="@+id/bt_error_message_ok_button"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:background="@drawable/xml_botton1"
                        android:text="OK"
                        android:textColor="@color/DarkMagenta" />
                </LinearLayout>

            </LinearLayout>

    </RelativeLayout>

    <Button 
        android:id="@+id/bt_error_message_x_button"
        android:layout_alignParentRight="true" 
        android:text="X"
        android:textColor="#FFF" 
        android:background="@drawable/xml_round_dismiss_button"
        android:gravity="center_vertical|center_horizontal"
        android:layout_margin="7sp" 
        android:layout_height="30sp"
        android:layout_width="30sp" 
        android:textSize="15sp" 
        android:textStyle="bold"
        android:onClick="cancelActivity" />
</RelativeLayout> 
```

谁能告诉我我该怎么做才能使文本完全可见？我已经更改/添加/删除了 the和`LinearLayout`the 以及 the的属性。但我无法让它工作。`RelativeLayout``TextView``Button`

谢谢

编辑：这张照片是 Eclipse 显示窗口的方式，它实际上是我想要的。 ![照片 1](https://i1237.photobucket.com/albums/ff468/kingsinnersoul/1.png)

这是我手机的部分屏幕截图。三星 Galaxy S III mini（4.0" 屏幕） ![照片 2](https://i1237.photobucket.com/albums/ff468/kingsinnersoul/2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:36:31.060

我意识到我正在使用另一个 XML 文件作为每个按钮的背景。这个 XML 导致了这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:51:06.963

与其尝试在 XML 中使用“背景”“文本”，不如尝试使用 drawableTop（或 ~Left ~Right 或 ~Bottom）。这些设置文本，使drawable高于“drawableTop”你的文本或你想要的任何地方

# internet-explorer - Facebook 徽章图片未显示在 Internet Explorer 中

> ID：15841235
> 
> 赞同：0
> 
> 时间：2013-04-05T18:43:08.697
> 
> 标签：internet-explorer, facebook-like, facebook-social-plugins

这是 IE 错误的高度，我正在将**Facebook Like Badge**添加到我的网站，它可以在所有其他浏览器上完美运行。但在**Internet Explorer**中，它根本不显示图像。

这是图像的 URL：[https ://www.facebook.com/profile/pic.php?oid=AWx871Lpn7AYEi4T-uzfdAeOryMPDODTbt9fflde-TT-bwSrfhACl0_-eGXhWVFwV-o&size=square](https://www.facebook.com/profile/pic.php?oid=AWx871Lpn7AYEi4T-uzfdAeOryMPDODTbt9fflde-TT-bwSrfhACl0_-eGXhWVFwV-o&size=square)

它会出现在IE之外的所有地方。最糟糕的是它也没有出现在**IE 10**中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:15:27.543

问题是它`Content-Type`是`image/jpeg`但图像本身是 GIF。您可以通过简单地使用扩展名在本地重命名 GIF `.jpeg`，然后尝试在 IE 中打开它来重现此问题。您将看到带有红色 X 的框。如果您使用`.gif`扩展名命名文件，它将正常打开。

# css - 在 CSS 中将 margin-top 更改为 div

> ID：15841237
> 
> 赞同：4
> 
> 时间：2013-04-05T18:43:33.803
> 
> 标签：css, html, margin

我正在尝试更改 WordPress 主题中 div 的 margin-top 属性，但它似乎不起作用。我在自定义 CSS 样式表中添加了以下行：

```
 div#primary {
     display: block;
     margin-top:50px;
   } 
```

但是，我要更改其属性的 div 不会向下移动。该示例可以在以下 URL 中找到：[http](http://who.designbond.co.uk/contact-2/) ://who.designbond.co.uk/contact-2/ 我需要向下移动的 div 是包含 Phylosophy 文本的那个。谁能向我解释我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:45:23.933

它`div`有一个内联样式`margin-top: 0px`，它覆盖了您的样式表。

您需要删除或修改该内联样式，或者（在紧要关头，不要告诉任何人我说过这个）添加`!important`到您的样式表规则中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T18:46:11.200

```
div#primary {
     display: block;
     margin-top:50px !important;
} 
```

我知道这不是一件好事（添加！important），但它可以提供帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T18:46:45.913

有些东西正在那个 div 上设置一些内联样式。您可以使用覆盖它`!important`。

```
#primary {
    margin-top: 50px !important;
} 
```

此外，由于该元素上有一个 id，因此您可以将 css 选择器简化`#primary`为`div#primary`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T18:50:24.487

我看到 id 为主要的 div 有一个行内样式表。内联样式表优先于基于类的样式表。您的内联样式表有 margin-top:0px，它忽略了基于类的样式。删除它，它会工作。

# php - 如果用户未登录 Omeka，则隐藏元素

> ID：15841243
> 
> 赞同：1
> 
> 时间：2013-04-05T18:43:56.300
> 
> 标签：php

我试图根据用户是否登录来隐藏数组中的一些元素。例如，如果用户未登录，我不希望他们能够查看“主题”元素。

在 show.php 文件的 items 文件夹中，有一行代码我认为需要编辑。

```
<?php echo all_element_texts('item'); ?> 
```

有没有办法使用类似的东西

```
if current user display element else hide? 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:40:19.417

使用 Jeremey Boggs 的这段代码

```
<?php

/**
* Unset elements if there is not current authenticated user.
*/
function filter_elements($elementsBySet) {

/* An array of elements in sets to be hidden from non-authenticated users. */
$hiddenElements = array(
    'Dublin Core' => array(
        'Description',
        'Creator'
    )
);

if (!current_user()) {
    foreach ($hiddenElements as $setName => $elementNames) {
        foreach ($elementNames as $elementName) {
            unset($elementsBySet[$setName][$elementName]);
        }
    }
}

return $elementsBySet;
}

add_filter('display_elements', 'filter_elements'); 
```

# if-statement - 是否有将 DRY 与多个部分重叠的逻辑流一起使用的最佳实践？

> ID：15841244
> 
> 赞同：0
> 
> 时间：2013-04-05T18:43:56.517
> 
> 标签：if-statement

我不确定如何搜索这个，所以如果已经回答，请指点我。

我再次遇到一个相当普遍的情况，我不确定最佳实践。考虑一个函数具有三个可能值之一的情况；我们会说它们是“a”、“b”和“c”。

如果我收到“a”或“b”，在某些特定情况下，我有大量的重叠处理要做。但是，如果我收到“c”，我需要做一些完全不同的事情。举例来说，这是微不足道的，但我有一些非常重要的例子。

示例（Python）：

```
def doStuff(self, val):
    if   val == 'a':
        self.counter += 1
        print val, "is very good"
        self.passing = True
        self.doMoreStuff()
    elif val == 'b':
        self.counter += 2
        print val, "is not too bad"
        self.passing = True
        self.doMoreStuff()
    elif val == 'c':
        self.counter -= 1
        self.passing = False
        print val, "is unacceptable"
        self.weAreDoneHere() 
```

所以这个想法是，对于“a”或“b”，有一些特定于案例的说明和一些重复的东西，但对于“c”，它是完全不同的。在某些情况下，只留下三个单独的案例并不算太糟糕，尽管它让我干涩的眼睛抽搐着看它。在其他情况下，如果有很多重复的代码，这可能是一个更大的问题。

一种解决方案如下所示：

```
def doStuff(self, val):
    if   val == 'a' or val == 'b':
        if val == 'a':
            self.counter += 1
            print val, "is very good"
        elif val == 'b':
            self.counter += 2
            print val, "is not too bad"
        self.passing = True
        self.doMoreStuff()
    elif val == 'c':
        self.counter -= 1
        self.passing = False
        print val, "is unacceptable"
        self.weAreDoneHere() 
```

这种双重检查值方法好吗？它也让我干涩的眼睛有点抽搐，但不如重复大量代码。

我想，我真正的问题是**在某个地方讨论过这个问题，还是有一个标准的“最佳实践”方法来做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:38:17.573

我不知道 python，但在大多数情况下，你会重构 A 和 B 之间的所有共同点并将它们放在一个私有函数中，然后从 A 和 B 调用它。

javascript中的一个例子：

```
var someFunction = function (someArg) {
    var stuffCommonToAandB = function () {
        // stuff for both A and B
    };

    switch (true) {
        case someArg === 'A':
            stuffCommonToAandB();
            // stuff for A only
            break;
        case someArg === 'B':
            stuffCommonToAandB();
            // stuff for B only
            break;
        case someArg === 'C':
            // stuff for C only
            break;
    }
}; 
```

可能值得一提的是，将这样的标志传递给函数以切换不同的行为有时可能表明您的函数违反了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，在这种情况下，您需要退后一步并进一步重新考虑您的设计。

# php - 意义？header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"');

> ID：15841245
> 
> 赞同：8
> 
> 时间：2013-04-05T18:43:57.173
> 
> 标签：php, mysql, header

我经常在帖子中看到下面的这段代码。这是什么意思，这如何伤害或帮助某人将其添加到标题中？

```
ob_start();
header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:53:53.383

**隐私偏好平台项目**( P3P) 是一种协议，允许网站声明其收集的有关浏览用户的信息的预期用途。P3P 由万维网联盟 (W3C) 开发，旨在让用户在浏览时更好地控制他们的个人信息。

规范在这里：[http ://www.w3.org/TR/P3P/](http://www.w3.org/TR/P3P/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T18:54:12.443

P3P 是隐私保护项目平台。它旨在制定紧凑的隐私政策声明。

[您可以根据此](http://web.archive.org/web/20141127114127/http://www.p3pwriter.com/LRN_111.asp)资源分解此语句：

*   **IDC**：这是一个访问描述符。这允许访问可识别的联系信息。
*   **DSP**：这是一个关于争议解决的隐私政策令牌。
*   **COR**：您的服务造成的错误将由您的服务纠正。
*   **ADM**：信息可用于技术支持，无需同意
*   **DEVi**：等等等等等等（我不打算介绍所有这些。）

我不知道为什么任何黑客会将其放入标题中，但请确保您还原更改。

# drupal-6 - 如何使用 Drupal 6 在多语言网站中拥有不同的样式文件？

> ID：15841249
> 
> 赞同：1
> 
> 时间：2013-04-05T18:44:01.917
> 
> 标签：drupal-6, multilingual, drupal-theming

我一直在使用 Drupal 6 开发一个多语言网站。语言是英语和西班牙语。我想为他们提供一些不同的背景和 css。但两者都只使用 style.css。

如何为他们创建不同的 style.css 文件？例如 style-sp.css 用于西班牙语，en-style.css 用于英语？

是否可以 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:11:13.413

将此代码附加到您的主题中的 template.php ：

```
global $language;
drupal_add_css(path_to_theme().'/style-'.$language->language.'.css','file'); 
```

# c# - 递归函数导致溢出，尽管它不是无限的

> ID：15841255
> 
> 赞同：0
> 
> 时间：2013-04-05T18:44:44.377
> 
> 标签：c#, recursion, stack-overflow

我编写的以下函数导致程序由于堆栈溢出而崩溃，尽管递归是有限的。

```
public static void Key(char[] chars, int i, int l, string str) {
    string newStr=null;

    for(int j=0; j<l; j++)
        newStr+=chars[i/(int)Math.Pow(68, j)%68];

    if(newStr==str)
        return;

    Key(chars, ++i, l, newStr);
} 
```

当我使用这些参数调用该方法时，一切正常：

```
Key(chars, 0, 4, "aaaa"); 
```

但是当涉及到更多的调用时，它会抛出`StackOverflowException`. 所以我认为问题是尽管方法是有限的，但调用堆栈在方法的工作完成之前就被填满了。所以我对此有几个问题：

1.  为什么函数没有从堆栈中清除，它们不再需要，它们不返回任何值。

2.  如果是这样，有没有办法我可以手动清除堆栈？我尝试了这`StackTrace`门课，但在这种情况下它是无助的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:52:17.137

1) 函数在结束执行后清零。在自身内部调用 Key 意味着对它的每次调用都将在堆栈上，直到最后一次调用结束，在此阶段它们都将以相反的顺序结束。

2）您无法清除堆栈并继续调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:06:49.330

So, regardless of whether your code reaches its base case or not, your code should never get a stack overflow exception in production.

For example, this should give us a stack overflow right?

```
private static void Main(string[] args)
{
    RecursorKey(0);
}

public static int RecursorKey(int val)
{
    return RecursorKey(val ++);
} 
```

In fact it doesn't, if you use .NET 4 and are not debugging and your binary is compiled as release.

This is because the clr is smart enough to do what is called [tail recursion](https://stackoverflow.com/questions/33923/what-is-tail-recursion). Tail recursion isn't applicable everywhere, but in your case it is, and I was easily able to reproduce your exact problem. In your case, each time you call the function it pushes another [stack frame](http://en.wikipedia.org/wiki/Call_stack) onto the stack, so you get the overflow, even though the algorithm would theoretically end at some point.

To solve your issue, [here](http://msdn.microsoft.com/en-us/library/t0hfscdc%28v=vs.71%29.aspx) is how you can enable optimizations.

However, I should point out that [Jon Skeet](https://stackoverflow.com/a/7281569/310196) recommends to not rely on tail call optimizations. Given that Jon's a smart guy, I'd listen to it him. If your code is going to encounter large stack depths, try rewriting it without recursion.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:47:01.490

堆栈仍然有限。对于标准 C# 应用程序，它是 1 MB。对于 ASP，它是 256 KB。如果您需要更多的堆栈空间，您将看到异常。

如果您自己创建线程，则可以使用此[构造函数](http://msdn.microsoft.com/en-us/library/5cykbwz4.aspx)调整堆栈大小。

或者，您可以重写您的算法，以便在不使用递归的情况下跟踪状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T18:48:58.060

看起来 NewStr == Str 的退出条件永远不会发生，最终你会用完堆栈。

# go - 如何确定 fmt.Fscanf 消耗的空白数量？

> ID：15841257
> 
> 赞同：0
> 
> 时间：2013-04-05T18:44:53.687
> 
> 标签：go, scanf, off-by-one

我正在尝试在 Go 中实现 PPM 解码器。PPM 是一种图像格式，由纯文本标题和一些二进制图像数据组成。标头看起来像这样（来自[规范](http://netpbm.sourceforge.net/doc/ppm.html)）：

> 每个 PPM 映像包含以下内容：
> 
> 1.  用于识别文件类型的“幻数”。ppm 图像的幻数是两个字符“P6”。
> 2.  空格（空格、TAB、CR、LF）。
> 3.  宽度，格式为十进制的 ASCII 字符。
> 4.  空白。
> 5.  高度，同样是 ASCII 十进制。
> 6.  空白。
> 7.  最大颜色值 (Maxval)，同样以 ASCII 十进制表示。必须小于 65536 且大于零。
> 8.  单个空白字符（通常是换行符）。

我尝试使用该`fmt.Fscanf`函数解码此标头。以下调用 `fmt.Fscanf`解析标头（不解决下面解释的警告）：

```
var magic string
var width, height, maxVal uint

fmt.Fscanf(input,"%2s %d %d %d",&magic,&width,&height,&maxVal) 
```

国家的[文件](http://golang.org/pkg/fmt)`fmt`：

> 注意：`Fscan`etc. 可以在它们返回的输入之后读取一个字符（符文），这意味着调用扫描例程的循环可能会跳过一些输入。仅当输入值之间没有空格时，这通常是一个问题。如果 reader 提供给`Fscan`implements `ReadRune`，该方法将用于读取字符。如果读者也实现了`UnreadRune`，该方法将用于保存字符并且连续调用不会丢失数据。要将`ReadRune` 和`UnreadRune`方法附加到没有该功能的阅读器，请使用 `bufio.NewReader`.

`fmt.Fscanf`由于最后一个空格之后的下一个字符已经是图像数据的开头，我必须确定读取后消耗了多少空格`MaxVal`。我的代码必须在调用者提供的任何阅读器上工作，并且它的部分内容不得超过标头的末尾，因此将内容包装到缓冲阅读器中不是一种选择；缓冲阅读器从输入中读取的内容可能比我实际想要阅读的内容更多。

一些测试表明，最后解析一个虚拟字符可以解决问题：

```
var magic string
var width, height, maxVal uint
var dummy byte

fmt.Fscanf(input,"%2s %d %d %d%c",&magic,&width,&height,&maxVal,&dummy) 
```

可以保证按照规范工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:46:27.080

不，我不认为那是安全的。虽然它现在可以工作，但文档指出该函数保留将值读取一个字符的权利，除非您有`UnreadRune()`方法。

通过将您的阅读器包装在一个 中`bufio.Reader`，您可以确保阅读器有一个`UnreadRune()`方法。然后，您需要自己阅读最后的空白。

```
buf := bufio.NewReader(input)
fmt.Fscanf(buf,"%2s %d %d %d",&magic,&width,&height,&maxVal)
buf.ReadRune() // remove next rune (the whitespace) from the buffer. 
```

**编辑：**

正如我们在聊天中讨论的那样，您可以假设 dummy char 方法有效，然后编写一个测试，以便您知道它何时停止工作。测试可以是这样的：

```
func TestFmtBehavior(t *testing.T) {
    // use multireader to prevent r from implementing io.RuneScanner
    r := io.MultiReader(bytes.NewReader([]byte("data  ")))

    n, err := fmt.Fscanf(r, "%s%c", new(string), new(byte))
    if n != 2 || err != nil {
        t.Error("failed scan", n, err)
    }

    // the dummy char read 1 extra char past "data".
    // one byte should still remain
    if n, err := r.Read(make([]byte, 5)); n != 1 {
        t.Error("assertion failed", n, err)
    }
} 
```

# excel - 为数据抓取工作表并粘贴到单独的工作表

> ID：15841262
> 
> 赞同：-4
> 
> 时间：2013-04-05T18:45:18.830
> 
> 标签：excel, vba

这个简短的脚本在“下一步”中断。我想将此数据保存在一个集合中，以便我可以转储和自定义它在工作簿中的呈现方式。谢谢你的帮助

编辑：更新了我的代码。仍然遇到问题。

资源类

```
''''''''''''''''''''''
' Name property
''''''''''''''''''''''
Public Property Get Name() As String
    Name = pName
End Property
Public Property Let Name(Value As String)
    pName = Value
End Property

''''''''''''''''''''''
' City property
''''''''''''''''''''''
Public Property Get City() As String
    City = pCity
End Property
Public Property Let City(Value As String)
    pCity = Value
End Property

''''''''''''''''''''''
' Title property
''''''''''''''''''''''
Public Property Get Title() As String
    Title = pTitle
End Property
Public Property Let Title(Value As String)
    pTitle = Value
End Property 
```

剧本

```
 Sub searchResources()

Dim a As Range
Dim cell As Variant
Dim Resources As Collection
Dim Emp As Resource
Dim Count As Integer

For Each cell In a.Rows
    If cell.Value = "Dallas" Or cell.Value = "Oklahoma City" Or cell.Value = "Houston" Then
    Set Emp = New Resource
        Emp.City = cell.Value
        cell.Offset(0, -2).Select
        Emp.Title = cell.Value
        cell.Offset(0, -1).Select
        Emp.Name = cell.Value
            Resources.Add Emp

                  End If

Resume Next

For Each Emp In Resources

ActiveWorkbook.Sheets("A").Activate
a.Select
    Debug.Print Emp.Name
    Debug.Print Emp.City
    Debug.Print Emp.Title
Next Emp

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:10:02.990

我稍微修改了 CLass（添加了私有变量，并更正了 proc。在 proc 中我使用 'Selected Cells' 作为我的范围变量，我不知道你打算如何传递它。我也让它创建一个新工作表，并添加了一小段代码以确保我们给它的工作表名称是唯一的。

班上：

```
Private pName As String
Private pCity As String
Private pTitle As String

''''''''''''''''''''''
' Name property
''''''''''''''''''''''
Public Property Get Name() As String
    Name = pName
End Property
Public Property Let Name(Value As String)
    pName = Value
End Property

''''''''''''''''''''''
' City property
''''''''''''''''''''''
Public Property Get City() As String
    City = pCity
End Property
Public Property Let City(Value As String)
    pCity = Value
End Property

''''''''''''''''''''''
' Title property
''''''''''''''''''''''
Public Property Get Title() As String
    Title = pTitle
End Property
Public Property Let Title(Value As String)
    pTitle = Value
End Property 
```

和程序：

```
Sub searchResources()
Dim a As Range
Dim cell As Range 'As Variant (This is a range)
Dim Resources As Collection
Dim Emp As Resource
Dim Count As Integer
'---------
Dim oWS As Worksheet
Dim iRow As Integer, iTest As Integer
Set Resources = New Collection

'Setting the range to selected range on active sheet for my tests
'Assign your range as you see fit
Set a = Application.Selection

For Each cell In a.Cells
    If cell.Value = "Dallas" Or cell.Value = "Oklahoma City" Or cell.Value = "Houston" Then
    Set Emp = New Resource

        Emp.City = cell.Value
        Emp.Title = cell.Offset(0, -2).Value
        Emp.Name = cell.Offset(0, -1).Value
        Resources.Add Emp
    End If
Next cell

Set oWS = Worksheets.Add(After:=Worksheets(Worksheets.Count))

'create a unique name
iRow = 1
On Error Resume Next 'Turn on error handling
iTest = Len(Worksheets("Resources").Name)
'check for error
If Err.Number <> 0 Then 'Sheet doesn't exist
    oWS.Name = "Resources"
Else
    Do
        iTest = Len(Worksheets("Resources" & iRow).Name)
        If Err.Number <> 0 Then
            oWS.Name = "Resources" & iRow
            Exit Do
        Else
            iRow = iRow + 1
        End If
        DoEvents 'Allows CTRL-BREAK to break execution during the cycle
    Loop
End If
On Error GoTo 0 'Turn off error handling
iRow = 2
oWS.Range("A1").Value = "Name"
oWS.Range("B1").Value = "Title"
oWS.Range("C1").Value = "City"

For Each Emp In Resources
    oWS.Range("A" & iRow) = Emp.Name
    oWS.Range("C" & iRow) = Emp.City
    oWS.Range("B" & iRow) = Emp.Title
    iRow = iRow + 1
Next Emp

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:36:25.773

```
For Each cell In a.Rows
    If cell.Value = "Dallas" Then
    Set Emp = New Resource
        Emp.City = cell.Value
        cell.Offset(0, -2).Select
        Emp.Title = cell.Value
        cell.Offset(0, -1).Select
        Emp.Name = cell.Value
            Resources.Add Emp

            >> Resume Next

    ElseIf cell.Value = "Oklahoma City" Then
    Set Emp = New Resource
        Emp.City = cell.Value
        cell.Offset(0, -2).Select
        Emp.Title = cell.Value
        cell.Offset(0, -1).Select
        Emp.Name = cell.Value
            Resources.Add Emp

           >> Resume Next

    ElseIf cell.Value = "Houston" Then
    Set Emp = New Resource
        Emp.City = cell.Value
       cell.Offset(0, -2).Select
        Emp.Title = cell.Value
        cell.Offset(0, -1).Select
        Emp.Name = cell.Value
            Resources.Add Emp

         >> Resume  Next

            End If
>>> Next

For Each Emp In Resources

ActiveWorkbook.Sheets("A").Activate
a.Select
    Debug.Print Emp.Name
    Debug.Print Emp.City
    Debug.Print Emp.Title
Next Emp

End If <<<Why here have end if? i think you should delete it, cause it doesnt have IF stand for it

UPDATE 
```

我认为您的脚本太长了，不需要同时重复

```
For Each cell In a.Rows
    If cell.Value = "Dallas" or cell.Value = "Oklahoma City" or cell.Value = "Houston" Then
    Set Emp = New Resource
        Emp.City = cell.Value
        cell.Offset(0, -2).Select
        Emp.Title = cell.Value
        cell.Offset(0, -1).Select
        Emp.Name = cell.Value
            Resources.Add Emp
                  End If
else
'based on you want to EXIT FOR or RESUME NEXT
Next

For Each Emp In Resources

ActiveWorkbook.Sheets("A").Activate
a.Select
    Debug.Print Emp.Name
    Debug.Print Emp.City
    Debug.Print Emp.Title
Next Emp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:34:37.250

看起来您`Resume Next`在应该使用的地方使用`Next cell`请参阅下面的更正代码：

```
Sub searchResources()

Dim a As Range
Dim cell As Variant
Dim Resources As Collection
Dim Emp As Resource
Dim Count As Integer

For Each cell In a.Rows
    If cell.Value = "Dallas" Or cell.Value = "Oklahoma City" Or cell.Value = "Houston" Then
    Set Emp = New Resource
        Emp.City = cell.Value
        cell.Offset(0, -2).Select
        Emp.Title = cell.Value
        cell.Offset(0, -1).Select
        Emp.Name = cell.Value
            Resources.Add Emp

                  End If

Next cell

For Each Emp In Resources

ActiveWorkbook.Sheets("A").Activate
a.Select
    Debug.Print Emp.Name
    Debug.Print Emp.City
    Debug.Print Emp.Title
Next Emp

End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T13:01:35.070

通过美化器运行您的代码给了我一个提示：没有`Next cell`对应的`For Each cell In a.Rows`

美化器可以在[这里](http://www.oaltd.co.uk/Indenter/Default.htm)找到。（该网站只显示到Office 2003，但我在2007年和2010年都测试过，效果很好）

美化后的结果代码：

```
Sub searchResources()

Dim a As Range
Dim cell As Variant
Dim Resources As Collection
Dim Emp As Resource
Dim Count As Integer

For Each cell In a.Rows
    If cell.Value = "Dallas" Or cell.Value = "Oklahoma City" Or cell.Value = "Houston" Then
        Set Emp = New Resource
        Emp.City = cell.Value
        cell.Offset(0, -2).Select
        Emp.Title = cell.Value
        cell.Offset(0, -1).Select
        Emp.Name = cell.Value
        Resources.Add Emp

    End If

    Resume Next

    For Each Emp In Resources

        ActiveWorkbook.Sheets("A").Activate
        a.Select
Debug.Print Emp.Name
Debug.Print Emp.City
Debug.Print Emp.Title
    Next Emp

    End Sub 
```

请注意，与声明`End Sub`不符`Sub()`

# wsdl - 可以将 org.apache.cxf.service.factory.ReflectionServiceFactoryBean 配置为缓存 WSDL 吗？

> ID：15841265
> 
> 赞同：3
> 
> 时间：2013-04-05T18:45:25.987
> 
> 标签：wsdl, jboss7.x, soap-client, jboss-weld

我正在使用 JBoss 7.1.1，但每次我的 EAR 发出 SOAP 请求时，JBoss 创建所需的每个服务大约需要 2 分钟：

```
14:30:14,822 INFO  [org.apache.cxf.service.factory.ReflectionServiceFactoryBean] (http--0.0.0.0-8081-3) Creating Service {http://services.discretewireless.com/v2009_1/}AuthenticationManagerV1Port from WSDL: http://services.discretewireless.com/v2009_1/AuthenticationManagerV1.wsdl 
```

而不是在运行时创建服务，每次使用它们时，我可以在某处配置一些东西，这样它就不必下载 WSDL 和 ...Creating Service...from WSDL:... 每次我的 bean 发出 SOAP 请求？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-11T23:42:49.827

您可以在运行客户端之前下载 wsdl 并以两种不同的方式使其可用：首先，CXF 的 wsdl2java 生成器可以让您在类路径上修复 wsdl (wsdlLocation) 的位置，并且 wsdl 甚至可以存档在同一个 jar 中你的存根。或者，第二，您可以将 url（引用本地文件）传递给服务的构造函数，其中 url 类似于 'file://path...'

# canvas - 不使用 WebGL 进行渲染

> ID：15841267
> 
> 赞同：0
> 
> 时间：2013-04-05T18:45:33.800
> 
> 标签：canvas, webgl, processing, processing.js

我们可以用 Processing.js 做到这一点吗？

我们在 P3D 中构建了一个系统渲染，它通过一些相机移动来绘制简单的框和文本。

我们需要让它在没有 WebGL 的浏览器中工作。它很简单，不需要高帧率、纹理贴图或 WebGL 的 GPU 加速。

你会如何建议我们这样做？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:47:28.090

P3D 和 OpenGL 模式在 Processing.js 中使用 webgl，所以：不，如果您使用 3D API 中的任何内容，Processing.js 将使用 WebGL 上下文进行渲染（因为 Canvas2D 没有伪 3D 函数，并实现它们在 Pjs 中将是一个令人难以置信的工作量，同时也非常慢 =)

# smartgwt - 如何在左侧和右侧的工具条中添加按钮

> ID：15841269
> 
> 赞同：1
> 
> 时间：2013-04-05T18:45:47.043
> 
> 标签：smartgwt

它可能在左侧和右侧的工具条中添加按钮，如下图所示。

我尝试添加 css 样式，但不可能在图像 div 上添加样式。

PS。我使用萤火虫创造了这种效果。

![工具条中的按钮](https://i.stack.imgur.com/KSDMp.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:18:42.083

使用[LayoutSpacer](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/layout/LayoutSpacer.html)。

```
ToolStrip toolStrip = new ToolStrip();
...
toolStrip.setMembers(leftBtn1, leftBtn2, new LayoutSpacer(), rightBtn1, rightBtn2); 
```

这将使前两个按钮向左对齐，其他两个按钮向右对齐。

# java - 持久性 - 实体类与 Hibernate 框架与其他

> ID：15841278
> 
> 赞同：2
> 
> 时间：2013-04-05T18:46:13.280
> 
> 标签：java, sql, hibernate, entity

我正在制作一个网络应用程序。它从 SQL 数据库中获取数据。我在jsp中有一些代码来查询数据库，但是，用户可以通过源代码使用该代码，这不是一个好习惯，对吗？所以，我决定使用实体类 - bc，这就是 netbeans 似乎想要我做的。但是，“数据库中的实体类”~wizard 不会为我创建类（它会冻结）所以，我已经求助于自己构建类 - 这非常非常困难（至少对我来说...... ) 而且我无法让课程正常工作。Soo，问题是：我应该使用实体类还是其他东西？而且，如果有别的东西，什么冬眠？或者....????谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:54:08.847

实际上，用户无法获得 JSP 文件的源代码。JSP 文件在 java 类文件中编译，然后生成发送到用户浏览器的 HTML。用户唯一可以访问的是生成的 HTML，即 JSP 页面的输出。简而言之：JavaScript 对最终用户可见，Java 源代码不可见。

如果您想使用 netbeans 构建实体类，我建议您从教程开始，而不是您自己的数据库，例如[netbeans 7.1 的这个](https://platform.netbeans.org/tutorials/nbm-crud.html)。

我最近使用[jooq](http://jooq.org/)构建的实体类做了一个项目，我对结果很满意。如果您不需要使用 hibernat 或 JPA，您可能需要使用 jooq。我发现它更简单，更容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:53:42.303

我建议使用 MVC 框架。模型部分将从实体获取数据，并使用 hibernate 或 jpa 创建实体类。

# ios - 将 card.io SDK 添加到 iOS 项目时出现链接器错误

> ID：15841285
> 
> 赞同：0
> 
> 时间：2013-04-05T18:46:37.833
> 
> 标签：ios, card.io

我按照说明进行操作，这是错误：

```
duplicate symbol _kGPUImageGaussianBlurFragmentShaderString in:
/.../CardIO/libCardIO.a(CardIOGPUTransformFilter.o)
/.../CardIO/libCardIO.a(CardIOGPUGaussianBlurFilter.o)
duplicate symbol _kGPUImageGaussianBlurVertexShaderString in:
/.../CardIO/libCardIO.a(CardIOGPUTransformFilter.o)
/.../CardIO/libCardIO.a(CardIOGPUGaussianBlurFilter.o)
duplicate symbol _kPassthroughFragmentShader in:
/.../CardIO/libCardIO.a(CardIOGPUTransformFilter.o)
/.../CardIO/libCardIO.a(CardIOGPUGaussianBlurFilter.o)
duplicate symbol _kTransformVertexShader in:
/.../CardIO/libCardIO.a(CardIOGPUTransformFilter.o)
/.../CardIO/libCardIO.a(CardIOGPUGaussianBlurFilter.o)
ld: 4 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我正在使用 XCode 4.6 和 card.io SDK 版本 3.0.10。我的链接器标志只是 -ObjC 和 -lstdc++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:32:24.847

来自 card.io 的 Josh 在这里。这是一个错误；我们有一个修复程序，很快就会发布一个新版本。一旦它出来，我会在这里更新。

更新：修复已经结束。请获取最新版本。

# api - Lua 内部与 C/Delphi 函数冲突？

> ID：15841288
> 
> 赞同：0
> 
> 时间：2013-04-05T18:46:51.523
> 
> 标签：api, lua

我为我的项目实现了计时器（对于 lua 5.1，完整的源代码、dll 和测试可在[http://wintarif.narod.ru/products.htm](http://wintarif.narod.ru/products.htm)获得，所以我将跳过有问题的完整源代码）。Timer 创建对象并实现 CreateTimerQueueTimer。我做了 3 个不同行为的测试：共享部分测试脚本

```
require('timer')

-- params same as CreateTimerQueueTimer: DueTime, Period, Flags
-- flag WT_EXECUTEONLYONCE = 8, timer will stops, enabled set to false
local mt = timer(1000, 1000, 0)

local i = 0;
function myOnTimer()
    print('wow!')
    if i < 5 then
        i = i + 1
    else
        print("stopping timer")
        mt:StopTimer()
    end
end

mt:SetEvent('OnTimer', myOnTimer)
mt:StartTimer() 
```

当我使用

```
while mt:GetEnabled() do --more buggy way
end 
```

有“未处理的异常”，但它`wow!`每秒不间断地打印。
和

```
while true do --buggy way, stack conflict during callback?
    local enabled = mt:GetEnabled()
    if not(enabled) then
        break
    end
end 
```

`5: bad argument #-2 to 'GetEnabled' (attempt to concatenatetimerLOADLIB: a table valuetimerstring)`或或之类的错误`5: bad argument #-2 to 'GetEnabled' (timer expected, got table)`可以工作，直到来自 dll 的第一个事件并在没有错误的情况下停止。

仅有的

```
function WaitForTimer()
    while true do
        local is_enabled = mt:GetEnabled()
        if not(is_enabled) then
            print("not enabled")
            return coroutine.yield()
        end
    end
end

co = coroutine.create(WaitForTimer)
coroutine.resume(co) 
```

工作没有错误。

`GetEnabled()`非常简单的静态 cdecl 函数的 dll 实现

```
function StaticThunk(L: Plua_State): integer; cdecl;
var
  o: TLuaWrapper;
begin
  o := TLuaWrapper(lua_topointer(L, lua_upvalueindex(1)));
  result := o.Thunk(L);
end; 
```

提取对象，对象的 Thunk

```
function TLuaWrapper.Thunk(L: Plua_State): integer;
var
  i: integer;
  pobj: PtrT;
begin
  { redirect method call to the real thing }
  i := lua_tointeger(L, lua_upvalueindex(2)); // function's index, index is 2 since 1 is self ptr now
  lua_pushnumber(L, 0);
  lua_gettable(L, 1); // get the class table (i.e, self)

  pobj := PtrT(luaL_checkudata(L, -1, PAnsiChar(REG_NAME)));
  lua_remove(L, -1); // remove the userdata from the stack
  lua_remove(L, 1); // remove object from the stack

  try
    result := ClassApiArray[i].func(L, pobj^); // execute the thunk
  except
      result := 0;
  end;
end; 
```

并且准确

```
function TLuaWrapper.GetEnabled(L: Plua_State; obj: TQueuedTimer): integer;
begin
  // lua_settop(L, 0);
  lua_pushboolean(L, obj.Enabled);
  result := 1;
end; 
```

Lua 内部究竟发生了什么？为什么我有冲突？

更多信息：在`lua.exe`from下执行的脚本`LuaForWindows`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:02:47.280

传递给您的回调函数`CreateTimerQueueTimer()`将由 Windows**在另一个线程中**异步执行。
但是你不能同时使用来自两个不同线程的相同 Lua 状态。
因此，当您的主脚本在此 Lua 状态下运行时，您无法在 Lua 状态下执行回调函数。
从多个线程使用 Lua 状态会导致不可预知的行为和奇怪的错误消息。
如果您的回调函数变得更复杂，您的带有协同程序的代码（目前可以正常工作）也会出错。

Lua 状态不是线程安全的。
因此， 的功能`CreateTimerQueueTimer`不能绑定到 Lua。Пичалька:-(

# regex - Python 中的字符串替换 - 使用 Re.sub - 具有额外的不必要字符

> ID：15841294
> 
> 赞同：0
> 
> 时间：2013-04-05T18:47:07.983
> 
> 标签：regex, python-2.7, str-replace

我在这里使用 Python 2.7，其中有一个 String `"portalColumn":"col-0","portlet":`，我试图用“col-1”或“col-2”替换“col-0”。所以，我正在尝试使用 Python 的`s = re.sub("col-(.*?)", column, portletJsonString)`

当我在变量`"col-10"`中传递“col-1”时，它将“col-0”替换为我想要替换的字符串。所以我在 re.sub 调用之后看到了这个： `column``portletJsonString``"portalColumn":"col-10","portlet"`

替换我的字符串家伙的正确方法是什么？它保持 0 不变。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:58:27.847

我想到了 ：-）

只是用来`.?`代替`.*?`.. 那里不必要的 * 。

此外，正如 Kenneth 提到的，可以使用`\d+`

# python - 运行应用程序时出现“错误：无法分配该 IP 地址”

> ID：15841295
> 
> 赞同：11
> 
> 时间：2013-04-05T18:47:08.697
> 
> 标签：python, django

每当我尝试使用 LAN ip 启动 Django 服务器应用程序时，都会收到错误消息：

```
Django version 1.4.1, using settings 'servidorMain.settings'
Development server is running at http://192.168.1.XX:8080/
Quit the server with CONTROL-C.
Error: That IP address can't be assigned-to. 
```

在 localhost 中，它可以完美运行。我也在检查网络配置，我认为一切都是正确的，所以我看不出问题出在哪里。

提前致谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-05T19:10:42.263

采用：

```
python manage.py runserver 0:8000 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-23T17:18:50.337

您应该**检查您的 IP**，因为我的 IP 已更改并且出现相同的错误

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T18:53:31.863

相当于c语言错误列表中的错误代码#99，用这个术语来描述：

> 无法分配请求的地址

这不是权限问题，因为权限的错误代码不同所以我认为这是因为您的计算机上没有设置该IP地址。当您尝试在指定的 IP 地址上运行服务器时，您应该在您的网络接口之一上设置它。

只是您尝试在其上运行服务器的 IP 地址不是您当前的 IP 地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-30T18:08:08.793

1.  在你的 cmd 中运行 ipconfig 并复制 ipv4 地址。

2.  转到项目的设置文件和 IP 作为允许主机中的字符串。

3.  现在使用命令运行服务器`python manage.py runserver 0:8080`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-05T18:12:51.937

如果您使用的是 Amazon EC2 或 Lightsail，请使用如下私有和公共 IP：

浏览器公开：`<your-public-ip>:8000`

命令行专用：`python manage.py runserver <your-PRIVATE-ip>:8000`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-01T11:21:01.850

检查您在 CMD 或终端中使用`ipconfig`Windows 和`ifconfig`linux 的网络 IP 地址，并在 Settings.py 中为允许的主机相应更改 IP

**注意：**您的 IP 地址可能会因服务提供商添加更多子网而发生更改，因此您只需将旧 IP 替换为新 IP

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-25T09:40:14.297

只需在 settings.py 中将“localhost”添加到 ALLOWED_HOSTS。然后，python manage.py runserver localhost:8000。在您的网址中运行 localhost:8000 ，它应该可以工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-21T09:47:59.290

我收到了同样的错误。

我通过以下命令安装 Django 租户及其模式模块。并解决了错误。

1.  `pip install django-tenants`
2.  `pip install django-tenant-schemas`

*注意：- 它可能是您系统中的 pip3*

# matlab - 在 Matlab 中练习

> ID：15841297
> 
> 赞同：1
> 
> 时间：2013-04-05T18:47:11.433
> 
> 标签：matlab

鉴于柯西问题

y '= (y-1) ^ 2 (y-2) (ya) 和 y(1) = y0;

其中 a = 0、a = 1 或 a = 2：

编写一个程序，在不同的情况下得出问题的解决方案。它必须符合以下步骤： a) 程序将输入变量。

b) 将视口划分为三个子图，位于两个...中（第一个和第二个中的两个）。如果第一个子图选择 a = 0，则使用命令，如果 a = 1，则选择第二个，如果 a = 2，则选择第三个。

c) 创建一个坐标轴固定大小 [1, 10] x [-1, 3]。使用命令 ode45 并绘制红色固定点。放置轴名称和标题图，指示我们的情况（a = 0，a = 1 或 a = 2）。

这是我的决议：

```
function exercise6(a)

disp('partB')
f=inline('(y-1)^2*(y-2)(y-a)','y','a');
if a==0
subplot(2,2,1) 
hold on
end
if a==1
subplot(2,2,2)
hold on
end
if a==2
subplot(2,2,3)
hold on
end

disp('partC')

%f=inline('(y-1)^2*(y-2)(y-a)','y','a');
linspace(-1,3,50)
axis([-1,3,1,10])
[t,y]=ode45(inline('(y-1)^2*(y-2)(y-a)','y','a'),'0');
[t2,y2]=ode45(inline('(y-1)^2*(y-2)(y-a)','y','a'),'1');
[t3,y3]=ode45(inline('(y-1)^2*(y-2)(y-a)','y','a'),'2');
plot(t,y,'r')
plot(t2,y2,'r')
plot(t3,y3,'r')

if a ~= 0,1,2
disp('must take values 0,1,2') 
```

和错误：

使用 inline/feval 时出错（第 25 行）内联函数的输入过多。

odearguments 错误（第 38 行） [def_tspan,def_y0,def_options] = feval(ode,[],[],'init',extras{:});

ode45 错误（第 114 行）[neq, tspan, ntspan, next, t0, tfinal, tdir, y0, f0, odeArgs, odeFcn, ...

Ejercicio6 中的错误（第 23 行）[t,y]=ode45(inline('(y-1)^2*(y-2)(ya)','y','a'),'0');

请问有什么解决办法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:40:26.743

显示了多个错误行，但都归结为最上面的错误行。您创建了无效的内联语句。

如果你想修复它，这是你需要搜索的地方：

```
inline('(y-1)^2*(y-2)(y-a)','y','a') 
```

我不知道内联，但我猜`y`and`a`不属于内联语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:50:00.310

我认为您的问题只是求解器函数的语法。根据手册：

[X,T] = ode45(@F,TimeSpan,Xo,[选项,P1,P2,P3...])

尝试切换

```
ode45(inline('(y-1)^2*(y-2)(y-a)','y','a'),'2'); 
```

至：

```
ode45(inline('(y-1)^2*(y-2)(y-a)','t','y','a'),[t0 tf],y0,,2); 
```

其中：t0 = 开始时间，tf = 结束时间，y0 = y 初始值。

您得到的问题是因为求解器的输入函数必须只有 2 个输入（时间和当前 y 值）。如果您在 ODE45 命令的末尾声明它们，则接受附加输入。（在这种情况下，附加输入是在 ODE45 的最后一个参数上定义的“a”。空参数是“OPTIONS”输入，可以留空。

阅读：[http](http://www.its.caltech.edu/~ae121/ae121/ode45_Ref2.pdf) ://www.its.caltech.edu/~ae121/ae121/ode45_Ref2.pdf了解更多信息。

# java - 运行和启动线程的区别

> ID：15841301
> 
> 赞同：7
> 
> 时间：2013-04-05T18:47:21.040
> 
> 标签：java, multithreading

我不明白启动和运行线程之间的区别，我测试了这两种方法并且它们输出相同的结果，首先我使用了 run() 和在同一个线程上启动的组合，它们执行以下相同的功能：

```
public class TestRunAndStart implements Runnable {
public void run() {
    System.out.println("running");
}
public static void main(String[] args) {
     Thread t = new Thread(new TestRunAndStart());
     t.run();
     t.run();
     t.start(); 
} 
```

}

输出是：

```
running
running
running 
```

然后我看到 run() 方法的 javadoc 说： `If this thread was constructed using a separate Runnable run object, then that Runnable object's run method is called; otherwise, this method does nothing and returns` 所以我尝试使用 run() 方法而不使用单独的可运行对象，如下所示：

```
public class TestRun extends Thread {
public void run(){
    System.out.println("Running Normal Thread");
}
public static void main(String[]args){
    TestRun TR=new TestRun();
    TR.run();
   }

} 
```

它还执行 run() 方法并打印，`Running Normal Thread`尽管它是在没有单独的可运行文件的情况下构造的！那么这两种方法的主要区别是什么

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-05T18:48:26.603

`Thread.run()`不会产生新线程，而`Thread.start()`确实会产生，即`Thread.run`实际上与调用者的线程在同一线程上运行，而`Thread.start()`会创建一个运行任务的新线程。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-05T18:48:50.187

当您调用 时`run`，您只是`run`在当前线程中执行该方法。因此，您的代码不会是多线程的。

如果您调用`start`，这将启动一个新线程，并且该`run`方法将在这个新线程上执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T18:51:01.383

线程在其生命周期中会经历不同的阶段。当您调用**start() 方法时，线程进入可运行状态而不是运行状态。**

然后调度程序从等待执行的线程池中提取一个线程并将其置于**运行阶段。**在这个线程的实际执行发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T18:50:11.427

在您的第一个示例中，您直接从主线程调用 run() 方法，然后通过调用 t.start() 从单独的线程调用一次。

在第二种情况下，t.start() 创建一个单独的线程上下文，并从该上下文调用 t.run()。

您还包括了 run() 方法的文档：

> 如果该线程是使用单独的 Runnable 运行对象构造的，则调用该 Runnable 对象的 run 方法；否则，此方法不执行任何操作并返回

这是真的，因为如果您不覆盖 run() 方法，那么它将简单地返回，导致该线程终止。您已经覆盖了 Thread 对象中的 run() 方法，因此不会调用被覆盖的方法（什么都不做）。

# objective-c - UICollectionView 的问题 - 一个选定的单元格意味着其他选择

> ID：15841303
> 
> 赞同：-2
> 
> 时间：2013-04-05T18:47:25.363
> 
> 标签：objective-c, cocoa-touch, ios6, uicollectionview

在我的集合视图中允许多项选择。

当我点击一个项目时，系统会自动选择一个不可见的项目。

这是我的代码：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView 
                 cellForItemAtIndexPath:(NSIndexPath *)indexPath 
{
    ButtonCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ButtonCell" 
                                                                 forIndexPath:indexPath];

    NSString *title = self.ingredientsBook.names[indexPath.item];
    cell.label.text = title;
    return cell;
}

-(void)collectionView:(UICollectionView *)collectionView 
       didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    self.searchButton.enabled = YES;

    ButtonCell *cell = (ButtonCell *)[collectionView cellForItemAtIndexPath:indexPath];
    cell.backgroundColor = [UIColor whiteColor];
    cell.label.textColor = [UIColor blueColor];

    NSString *name = self.ingredientsBook.names[indexPath.item];
    [self.selectedIngredientNames addObject:name];
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T20:02:52.150

这是因为您声明了 2 次您的单元格：

```
ButtonCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ButtonCell" 
                                                             forIndexPath:indexPath]; 
```

和：

```
ButtonCell *cell = (ButtonCell *)[collectionView cellForItemAtIndexPath:indexPath]; 
```

尝试在 .h 文件中声明您的单元格并替换我在没有类 ButtonCell 的代码上编写的代码：

```
cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ButtonCell" 
                                                             forIndexPath:indexPath]; 
```

和：

```
cell = (ButtonCell *)[collectionView cellForItemAtIndexPath:indexPath]; 
```

# javascript - Javascript数组变量在循环中丢失

> ID：15841306
> 
> 赞同：1
> 
> 时间：2013-04-05T18:47:33.023
> 
> 标签：javascript, variables, loops, tinymce

因此，我试图在 wordpress 上的 tinyMCE 所见即所得编辑器中添加其他按钮。他们正在出现并且正在发挥作用（有点）。单击时，它们只是输出数组中的最后一个变量，这很奇怪，因为我在循环中的其他位置使用该变量并且它工作正常。

```
(function() {
  tinymce.create('tinymce.plugins.col', {
    init : function(ed, url) {
      var col_id = ['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven'];
      for(var i = 0; i < col_id.length; i++){
        var colNum = col_id[i];
        ed.addButton(colNum+'_col', {
          title : colNum+' Column',
          image : url+'/images/mce/'+colNum+'.png',
          onclick : function() {
            ed.selection.setContent('['+colNum+'_col]' + ed.selection.getContent() + '[/'+colNum+'_col]');
           }
         }); // ***** Col *****
         ed.addButton(colNum+'_col_first', {
           title : colNum+' Column First',
           image : url+'/images/mce/'+colNum+'.png',
           onclick : function() {
             ed.selection.setContent('['+colNum+'_col_first]' + ed.selection.getContent() + '[/'+colNum+'_col_first]');
            }
          });  // ******  Col First ******
          ed.addButton(colNum+'_col_last', {
            title : colNum+' Column Last',
            image : url+'/images/mce/'+colNum+'.png',
            onclick : function() {
              ed.selection.setContent('['+colNum+'_col_last]' + ed.selection.getContent() + '[/'+colNum+'_col_last]');
            }
          });   //*********  Col Last **********
        }
      },
      createControl : function(n, cm) {
        return null;
      },
    });
    tinymce.PluginManager.add('col', tinymce.plugins.col);
  })(); 
```

当我单击其中一个按钮时会发生什么，它会输出 [eleven_col][/eleven_col] 的短代码，这让我感到困惑，因为标题和图像 url 输出正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:49:38.157

我认为这是经典的闭包问题，希望可以在这里进行解释：[JavaScript 闭包内循环 - 简单的实际示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)

将所有内容包装在`for`循环中：

```
(function (colNum) {
    // Your code in the for loop
})(col_id[i]); 
```

并删除您的`var colNum = col_id[i];`线路

所以最终的代码将如下所示：

```
(function() {
    tinymce.create('tinymce.plugins.col', {
        init : function(ed, url) {
            var col_id = ['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven'];
            for(var i = 0; i < col_id.length; i++){
                (function (colNum) {    // <---------------------- ADDED THIS
                    ed.addButton(colNum+'_col', {
                        title : colNum+' Column',
                        image : url+'/images/mce/'+colNum+'.png',
                        onclick : function() {
                            ed.selection.setContent('['+colNum+'_col]' + ed.selection.getContent() + '[/'+colNum+'_col]');

                        }
                    }); // ***** Col *****

                    ed.addButton(colNum+'_col_first', {
                        title : colNum+' Column First',
                        image : url+'/images/mce/'+colNum+'.png',
                        onclick : function() {
                            ed.selection.setContent('['+colNum+'_col_first]' + ed.selection.getContent() + '[/'+colNum+'_col_first]');

                        }
                    });  // ******  Col First ******

                    ed.addButton(colNum+'_col_last', {
                        title : colNum+' Column Last',
                        image : url+'/images/mce/'+colNum+'.png',
                        onclick : function() {
                            ed.selection.setContent('['+colNum+'_col_last]' + ed.selection.getContent() + '[/'+colNum+'_col_last]');

                        }
                    });   //*********  Col Last **********
                })(col_id[i]);    // <------------------------- ADDED THIS
            }
        },
        createControl : function(n, cm) {
            return null;
        }
    });
    tinymce.PluginManager.add('col', tinymce.plugins.col);
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T18:55:37.293

@Ian 的答案是正确的，但您可能希望以这种方式组织代码，在循环中使用命名函数而不是[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)。

函数的`col_id`参数实际上是不必要的，因为函数具有`col_id`变量的可见性，但我认为这样更清楚一些。

```
(function () {
    tinymce.create('tinymce.plugins.col', {
        init: function (ed, url) {
            function handleColumn(col_id, i) {
                // loop code in here
            }

            var col_id = ['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven'];
            for (var i = 0; i < col_id.length; i++) {
                handleColumn(col_id, i);
            }
        },
        createControl: function (n, cm) {
            return null;
        },
    });
    tinymce.PluginManager.add('col', tinymce.plugins.col);
})(); 
```

# php - Codeigniter .htaccess 不工作，显示“500 Internal Server Error”消息

> ID：15841308
> 
> 赞同：0
> 
> 时间：2013-04-05T18:47:35.807
> 
> 标签：php, .htaccess, codeigniter

我正在使用 wamp 并且在我的 www 文件夹中，我在文件夹名称**ci**下安装了 codeigniter 。在使用**.htaccess**之前，我的 codeigniter 工作正常，运行项目时我可以看到 codeigniter 欢迎消息。**在ci**目录中创建**.htaccess**文件后，我在运行项目时总是收到“500 Internal Server Error”。**这是我的config.php**文件的一部分-

 ****```
 $config['base_url'] = 'http://localhost/ci/';
    $config['index_page'] = '';
    $config['uri_protocol'] = 'REQUEST_URI'; 
```

这是我的**.htaccess**文件-

```
 <IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /ci/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
    </IfModule> 
```

这是我的 apache 错误日志消息-

```
 [Sat Apr 06 00:04:47 2013] [alert] [client 127.0.0.1] C:/wamp/www/ci/.htaccess: RewriteEngine not allowed here, referer: http://localhost/ 
```

我还在 apache 中启用了 rewrite_module。现在我还能做什么？我希望有人帮助我

注意我的 codeigniter 版本 2.1.3，Apache 版本：2.2.11，PHP 版本：5.3.1，MySQL 版本：5.1.32

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:27:31.393

您需要[`AllowOverride All`](http://httpd.apache.org/docs/current/mod/core.html#allowoverride)在`ci`目录上下文中

```
<Directory /path/to/ci>
    Options FollowSymLinks
    AllowOverride all
    # any other options/directives needed
</Directory> 
```****

# json - 在 WebApi 方法中反序列化 JSON 对象列表

> ID：15841309
> 
> 赞同：1
> 
> 时间：2013-04-05T18:47:44.007
> 
> 标签：json, serialization, asp.net-mvc-4, asp.net-web-api

我正在尝试研究如何从 WEBAPI 调用中的 JSON 请求中提取对象列表。在这个对象列表中有一个 Dictionary 对象、一个 List 对象和一个 List> 对象。

我的 MVC 控制器的请求看起来有点像这样：

```
//Gets a list of various objects
List<object> values = new List<object>(); 
values.add(GetItem1()); //Returns a Dictionary<string, string> object
values.add(GetItem2()); //Returns a List<string> object
values.add(GetItem3()); //List<KeyValuePair<string, string>> 

var content = new StringContent(JsonConvert.SerializeObject(values), Encoding.UTF8, "application/json");
HttpResponseMessage postResult = client.PostAsync(baseURL, content).Result; 
```

在 WEBAPI 对象中，我有这个函数接收来自 MVC 控制器的调用。这是我遇到麻烦的地方，我无法将数据从列表中取出。列表中的第一项恰好是字典。

```
[HttpPost]
public void LogError(List<object> myObjectList)
{
    Dictionary<string, string> items = (Dictionary<string, string>)myObjectList[0];
    List<string> moreItems = (List<string>)myObjectList[1];
    List<KeyValuePair<string, string>> evenMoreItems = (List<KeyValuePair<string, string>>)myObjectList[2];
} 
```

如果我尝试开始使用该对象，则会收到错误消息：

```
Cannot cast 'myObjectList[0]' (which has an actual type of 'Newtonsoft.Json.Linq.JObject') to 'System.Collections.Generic.Dictionary<string,string>' 
```

不幸的是，我完全不知道下一步该做什么。我似乎找不到将 List 反序列化为这些单独对象类型的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:20:01.120

您遇到强制转换异常的原因是客户端和服务器丢失了类型信息。

使您的方案发挥作用的一种方法是执行以下操作

1.  使用 ObjectContent 而不是 StringContent 所以我们让格式化程序（即 JsonMediaTypeFormatter）来处理序列化和反序列化
2.  在客户端和服务器上打开 TypeNameHandling，以便在线发送类型信息

服务器（WebApiConfig.cs）：

```
 config.Formatters.JsonFormatter.SerializerSettings.TypeNameHandling = Newtonsoft.Json.TypeNameHandling.All; 
```

客户：

```
 //Gets a list of various objects
        List<object> values = new List<object>();
        values.Add(GetItem1()); //Returns a Dictionary<string, string> object
        values.Add(GetItem2()); //Returns a List<string> object
        values.Add(GetItem3()); //List<KeyValuePair<string, string>> 

        var formatter = new JsonMediaTypeFormatter();
        formatter.SerializerSettings.TypeNameHandling = Newtonsoft.Json.TypeNameHandling.All;

        var content = new ObjectContent<List<object>>(values, formatter);
        HttpResponseMessage postResult = client.PostAsync(baseURL, content).Result; 
```

样品请求正文：

> {"$type":"System.Collections.Generic.List `1[[System.Object, mscorlib]], mscorlib","$values":[{"$type":"System.Collections.Generic.Dictionary`2[[System.String, mscorlib],[System.String, mscorlib]], mscorlib","DictionaryKey1":"DictionaryValue1"},{"$type" :"System.Collections.Generic.List `1[[System.String, mscorlib]], mscorlib","$values":["ListItem1"]},{"$type":"System.Collections.Generic.List`1[[System.Collections.Generic.KeyValuePair`2[[System.String, mscorlib],[System.String, mscorlib]], mscorlib]], mscorlib","$values" :[{"Key":"KeyValuePairKey","Value":"KeyValuePairKeyValue"}]}]}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T18:49:55.860

我可能是错的，但在我脑海中你不能有一个

列表[对象]

因为它将如何知道类型是什么？您需要指定传入类型的具体对象吗？

从简单的事情开始：

```
public class TestClass
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

列表值 = 新列表（）；values.Add(new TestClass() { Id = 1, Name = "test1" }); values.Add(new TestClass() { Id = 12, Name = "test2" });

```
var content = new StringContent(JsonConvert.SerializeObject(values), Encoding.UTF8, "application/json");
HttpResponseMessage postResult = client.PostAsync(baseURL, content).Result; 
```

接收 webapi 方法：

```
public void LogError(List<TestObject> myObjectList)
{ // breakpoint here and see what myObjectList contains

} 
```

# filepicker.io - 为 aviary 保存的图像保存永久 url（使用 filepicker.io 和 aviary 工具）

> ID：15841310
> 
> 赞同：1
> 
> 时间：2013-04-05T18:47:44.323
> 
> 标签：filepicker.io, aviary

我正在尝试让用户上传已使用 filepicker 选择然后使用 aviary 编辑的图片。我可以在保存图像时获得新的 url，但我不确定如何让它持久存在（即我希望这个 url 保持永久状态，以便我可以将它保存在数据库中并不断使用图像）。有没有办法做到这一点？感谢您的帮助。这是我现在的代码：

```
$(function()  {
  var a=new Aviary.Feather({

        apiKey:'##################',
        apiVersion:2,
        tools: 'all',
        initTool: 'crop',
        cropPresets: [['Square','1:1']],
        onSave: function(imageID, newURL) {

            /*
            filepicker.store(newURL,{},function(new_fpfile) {

                console.log(JSON.stringify(new_fpfile));

                            });
             */

            //used to store the url, but I assume this url is temporary
            $.getJSON(
                      "/aviary_store.php", // The server URL
                      { aviary_id : newURL }, // Data you want to pass to the server.
                      function(json) {

                        var aviary_url = json[0];

                      });

                 console.log(JSON.stringify(newURL));
                 console.log(JSON.stringify(imageID));
        },

        onError:function(a){},appendTo:"editpane"});filepicker.setKey(server_vars.apikey);$(".openbutton").click(function(){filepicker.pick({mimetype:'image/*'},function(b){var c=$('<img id="#editimage"/>');c.attr("src",b.url);$(".editpane").empty().append(c);a.launch({image:c[0],url:b.url});});});}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T05:56:42.017

最好的方法是使用`filepicker.storeUrl`，它将获取保存的鸟舍图像的内容并将其下载以永久存储在您的 S3 上。

# sql - 有什么好方法可以在 SQL Server 中构建逗号分隔的列表吗？

> ID：15841319
> 
> 赞同：2
> 
> 时间：2013-04-05T18:48:15.573
> 
> 标签：sql, sql-server, aggregate-functions

在 Firebird 中，有一个名为的聚合[`List()`](http://www.firebirdsql.org/refdocs/langrefupd21-aggrfunc-list.html)将多个结果转换为逗号分隔的字符串。

SQL Server 中似乎不存在此函数。是否有任何等价物不涉及使用或构建自己的 CLR UDF的大、长、丑、**慢**的解决方法？`for xml`（是的，我知道这些方法。寻找我可能不知道的东西。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T18:50:52.523

不，这些是您必须使用的解决方法。自 2006 年以来，我们一直在要求提供`GROUP_CONCAT`等价物：

[http://connect.microsoft.com/SQLServer/feedback/details/247118/sql-needs-version-of-mysql-group-concat-function](http://connect.microsoft.com/SQLServer/feedback/details/247118/sql-needs-version-of-mysql-group-concat-function)

...但该项目仅获得 13 个赞成票（和 1 个反对票）。因此，我并不完全责怪微软专注于产品的其他增强功能以​​推动销售和客户满意度。没有多少人抱怨（至少不是直接抱怨），`GROUP_CONCAT`也不是营销人员可以在幻灯片或商业广告中使看起来性感的东西 - 开发人员的生产力并不是销售许可证的确切内容。（另一方面，我想见见 14 多位设法得到类似`EOMONTH`并`IIF`实施的愚蠢事情的人。）

因此，如果您认为拥有此功能很重要，请投票，更重要的是，评论这将如何提高您的生产力/底线：

FWIW，XML版本很丑，但不难掌握。我已经在 SO 上的几十个答案中使用了它，我什至不必再去查找它了。我也不觉得它非常慢。为什么你认为微软原生的东西会更快？它必须做基本相同的事情。

# jquery - Onclick 显示子菜单但隐藏其他子菜单

> ID：15841320
> 
> 赞同：1
> 
> 时间：2013-04-05T18:48:16.607
> 
> 标签：jquery, jquery-ui, menu, submenu

我正在使用 jQuery UI 菜单小部件在我的页面上进行标题导航

这是一个模拟[http://jsfiddle.net/ctL6T/1/](http://jsfiddle.net/ctL6T/1/)

我的问题是，如果单击另一个主菜单，我想关闭任何其他显示的子菜单，如果单击一个主存根，您可以在我的小提琴中看到，如果单击另一个主存根，子菜单保持打开状态

我想通过在点击事件上使用 $.each ，我可以使用相同的代码来切换遍历元素并来回翻转它们，但这会打开相反的菜单

```
 $('.has-sub').on('click', function(){
            $('#mainmenu li').each(function () {
                $(".submenu" ).toggle();
            });
            $(this).toggleClass('ui-state-active').children('span').toggleClass('ui-icon-triangle-1-s ui-icon-triangle-1-n');
            return false;
         }); 
```

这只是一团糟

```
 $('.has-sub').on('click', function(){
$('#mainmenu li').each(function () {
  $(".submenu" ).toggle();
  $(this).toggleClass('ui-state-active').children('span').toggleClass('ui-icon-triangle-1-s ui-icon-triangle-1-n');
});
return false;
 }); 
```

一如既往地感谢任何帮助

*由于无样式内容的闪烁，我决定使用一些 jquery ui 主题类将主菜单作为静态 html，它不应该影响我所要求的功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:52:18.937

试试这个：

```
$(function() {

            $( ".submenu" ).menu({
                position: {at: "left bottom"},
                icons: { submenu: "ui-icon-triangle-1-s" }
            });
            $('.has-sub').on('click', function(){
                $(this).next(".submenu").toggle();
                $(this).toggleClass('ui-state-active').children('span').toggleClass('ui-icon-triangle-1-s ui-icon-triangle-1-n');
                $('.has-sub').not($(this)).each(function(){
                   $(this).next(".submenu").hide();
                    $(this).removeClass('ui-state-active');
                });
                return false;
                });     
}); 
```

**jsFiddle**：http: [//jsfiddle.net/ctL6T/6/](http://jsfiddle.net/ctL6T/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:00:17.553

`<a>`我的解决方案是在您单击导航中的任何元素时触发一个事件。当您单击其中一个`<a>`元素时，`#mainmenu`所有具有类的元素都`submenu`将被隐藏。此外，任何具有类的元素`ui-state-active`都将`ui-state-active`删除该类。

这是我添加的内容，以使其一切正常！

```
$('#mainmenu a').on('click', function(){
    $('.submenu').hide();
    $('.ui-state-active').removeClass('ui-state-active');
}); 
```

这是一个小提琴！[http://jsfiddle.net/ctL6T/5/](http://jsfiddle.net/ctL6T/5/)

**经过修改的版本**

我添加了一些额外的逻辑来确保当你点击一个链接时它会关闭下拉菜单。如果您单击下拉列表中的链接，它将关闭下拉导航并删除活动状态。此外，如果您单击主页链接，它将关闭下拉导航并删除活动状态。

这应该可以帮助你！

小提琴：http : [//jsfiddle.net/ctL6T/8/](http://jsfiddle.net/ctL6T/8/)

# php - 来自多个表的 mysql 查询，没有任何共同点

> ID：15841321
> 
> 赞同：0
> 
> 时间：2013-04-05T18:48:19.933
> 
> 标签：php, mysql

编辑：对不起，伙计们，我不知道您可以像那样在同一页面上执行三个 SELECT 查询，我认为限制是 1 个查询/页面而不是 1 种类型的查询/页面。我已经通过将它分成多个查询来解决我的问题，但问题仍然存在（只是出于好奇）：是否可以在没有连接表的 WHEN 子句**且**没有得到笛卡尔积的情况下查询多个表？

感谢您的回复，您的许多“将其划分为多个查询”回复让我说“如果……那么容易吗？” :)。下面的原始问题：

* * *

我对 mqsql 很陌生，我遇到了令人讨厌的笛卡尔积。我正在尝试查询三个没有共同列的表（实际上第二个和第三个表之间存在连接，但忽略它）。我有表 t1(c1,c2,c3), t2(c4,c5), t3(c6,c7) 我想做类似的事情：

```
$query="SELECT * FROM t1, t2, t3";
$request=  mysql_query($query);
$row = mysql_fetch_array($query);
$i=0; while ($row = mysql_fetch_array($request))
{
    $array1[$i]=$row['c1'];
    $array2[$i]=$row['c2'];
    $array3[$i]=$row['c3'];
    $array4[$i]=$row['c4'];
    $array5[$i]=$row['c5'];
    $value6=$row['c6'][1];
    $value7=$row['c7'][1];
    $i++;
} 
```

我想要的只是同一php页面上的数组1-7（不添加框架集/框架ecc。）？[在这个人的示例http://www.dev-explorer.com/articles/multiple-mysql-queries](http://www.dev-explorer.com/articles/multiple-mysql-queries)之后，我也尝试在多个查询中打破它，但它没有用。

编辑：示例数据

表格1：

```
----------------------------
fruit_id | f_name | f_color
----------------------------
1        | apple  | red
2        | banana | yellow 
```

表 2：

```
----------------------------
player_id | player_name
----------------------------
1         | John
2         | Scott
3         | Mike
4         | George 
```

表3：

```
----------------------------
other_id | other_name
----------------------------
1        | Alex 
```

我希望能够在同一页面中获取数组 $fruit_id 的值 ['1','2'], $f_name ['apple','banana'], $f_color ['red','green' ], $player_id['1','2','3','4'] ecc..

它不一定是 mysql，只要我得到那些数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:57:32.097

1.  您在示例中所做的是执行三个表的**[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product "笛卡尔积")**。这意味着将显示三个表中包含的元组的**每个组合。**

    这可能不是您要查找的内容，因此您应该查看**joins**以限制行数。

    如果您想冒险进行一些更复杂和嵌套的查询，MySql 还支持像**Union这样的**[Set 操作。](http://dev.mysql.com/doc/refman/5.0/en/union.html)但是我建议坚持**[加入](http://www.sitepoint.com/understanding-sql-joins-mysql-database/)**

***   如果数据实际上没有以任何方式连接，请尝试发出多个查询（不要尝试将所有内容放入单个 SQL 语句中），然后以您想要显示的任何形式手动输出数据。** 

 **没有关于你在做什么的更多信息，我不能给你任何其他建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T22:47:31.960

只需运行 3 个单独的查询，并将结果放入不同的数组变量中。你让这种方式太难了；不看代码就停下来想一想你的问题

您还应该考虑使用 PDO 而不是您正在使用的已弃用的 my_sql_* 函数。这将使您开始：

[http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)**

# xpath - 在此示例中正确输出标题的 Xpath？

> ID：15841326
> 
> 赞同：-1
> 
> 时间：2013-04-05T18:48:59.860
> 
> 标签：xpath

我正在使用这段代码，试图弄清楚如何通过 XPATH 提取标题信息，并且由于它位于内部网络上，因此我无法访问 Firepath 之类的东西。

```
<div style="float:left">
<table border="0">
<tbody>
   <tr width="100%">
      <td valign="top">Code that does not matter</td>
      <td colspan="2">
          <span class="textinfo">
          <a href="http.....">
             <b> HI!  I am the TITLE!</b>
          </a>
          </span>
      </td>
   </tr>
   <tr></tr>
   <tr></tr>
   <tr width="100%">
      <td valign="top">Code that does not matter</td>
      <td colspan="2">
          <span class="textinfo">
          <a href="http.....">
             <b> HI!  Here is another TITLE!</b>
          </a>
          </span>
      </td>
    </tr>
   </tbody>
  </table>
  </div> 
```

这种情况持续了一段时间。基本上有 10 个结果，我试图弄清楚如何获得所有标题。有任何想法吗？我是否提供了足够的信息？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:53:22.720

您在示例中拥有的不是有效的 XML，它应该有一个根元素。如果我们假设没有定义命名空间（不应该有），那么......

您可以使用元素的内部文本：

```
//td/span[@class='textinfo']/text() 
```

我不会把`a`and放在`b`那里 - “禁用”标题不会有`a`例如。无论哪种情况，使用 XPath 查找“标题”都不是一种非常可靠的方法

# linux - 我们可以在内核空间调用系统调用吗？

> ID：15841327
> 
> 赞同：11
> 
> 时间：2013-04-05T18:49:00.923
> 
> 标签：linux, kernel, system-calls

有时，当我们必须在内核系统中调用系统调用时，我们调用它的帮助程序或相关的内核函数，而不是执行“系统调用”。我仍然想知道我们可以在内核空间中调用系统调用吗？如果没有，是什么阻止了我们这样做。

我的问题有点奇怪。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T21:47:28.737

实际上，与流行的看法（以及这里的一些答案）相反，答案是，是的，你可以，但取决于哪个操作系统：

*   在 Linux 中，如果你能找到它们的内核导出，你就可以调用几乎所有的系统调用（例如做`cat /proc/kallsysms | grep sys_`一个例子）。通过设置数据段（KERNEL_DS），在大多数系统调用（那些接受用户模式*的系统调用）中有一个小“技巧”​​来绕过保护。不完全推荐，但如果您需要从内核（例如 SELinux）访问文件，它肯定是有意义的。

*   在 Windows 中，内核中的大多数 Nt* 调用也可用作 Zw* 调用 - 例如，执行“dumpbin /exports C:\windows\system32\ntoskrnl.exe | findstr Zw (or Nt)”。

*   在 Mac OS X 中，它在技术上是不允许的，尽管有一些巧妙的技巧可以绕过它。

尽管系统调用确实是用户模式和内核之间的接口，但令人惊讶的是，在很多情况下，即使是具有生产价值的代码也会这样做——但要仔细遵守警告。

# java - 如何从不同的android类“运行方法”

> ID：15841334
> 
> 赞同：-3
> 
> 时间：2013-04-05T18:49:36.753
> 
> 标签：java, android

首先，和很多人一样，我最近才开始尝试学习 Java 和 Android 开发。我正在关注一些教程等。无论如何，我正在尝试做一些可能非常简单的事情，但我不确定要完成的语法，因此，不知道如何在互联网上成功搜索它。

我的问题：我有一个“Main.java”文件和第二个“Tabs.java”。main 具有您对默认存根所期望的一切：

```
package com.example.main;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class Main extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

我的 Tabs.java 看起来像：

```
package com.example.main;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class Tabs extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabs);

        //Initiate tabs
        TabHost th = (TabHost)findViewById(R.id.tabhost);
        th.setup();

        //Create tab1
        TabSpec specs = th.newTabSpec("tag1");
        specs.setContent(R.id.tab1);
        specs.setIndicator("Reservation List");
        th.addTab(specs);
    }
} 
```

我希望在程序启动时启动此选项卡类，以设置选项卡式视图。我可以把它放到主类中，但我想我会尝试通过将它们分开来保持代码更整洁。我怎样才能完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:18:59.660

“答案”是这是一个坏主意。但是，我认为值得解释为什么这是一个坏主意。听起来您混淆了两个基本概念 -`class`存在于面向对象语言`Java`中的 a 和 android `Activity`。

An`Activity`真的很像一个单独的程序。它包含执行特定任务所需的所有（或至少大部分）材料。一个应用程序可以组合多个活动来处理一种以上的任务——例如，在消息传递应用程序中，您可能有一个活动显示用户联系人，另一个活动允许您向他们发送消息。这些活动是分开的。正如@codeMagic 所提到的，您可以在它们之间传输数据，`Intents`但在大多数情况下，每个`Activity`都是自包含的。

A`class`是面向对象编程的一个概念，用作创建该类型对象的蓝图。[Oracle Java 文档](http://docs.oracle.com/javase/tutorial/java/concepts/class.html)提供了这个概念的一个很好的例子。类很有用，因为它们允许您设置一种对象的属性，以便稍后在您的应用程序中使用，从而大大提高了灵活性。

我在上面引用的聊天应用程序示例是了解您将在何处/如何使用类的好方法。在那种情况下，当您必须显示一个人的联系人列表时，您将无法提前知道该列表中包含的每个用户、您将获得哪些信息或将有多少人。为了处理这种情况，您将创建一个`class`被调用用户。用户类将包含您想要显示的有关特定人员的所有详细信息。也许这将包括他们的姓名、地址、电话号码等等。您可以设置一个普遍适用于所有用户的属性列表，然后为您希望显示的每个人创建用户类的各个实例，并填写提供的数据。

简而言之-您的活动与 a 的工作方式不同`class`（但请参阅可以表现相似的[片段）。](http://developer.android.com/guide/components/fragments.html)对于您要执行的操作，请在您的主要活动中创建选项卡。

# python - 当数组 ndim 直到运行时才知道时，如何获取 numpy 子数组视图？

> ID：15841337
> 
> 赞同：1
> 
> 时间：2013-04-05T18:49:42.347
> 
> 标签：python, numpy

我有一个带有 shape 的 Python numpy N 维数组`M x N x ... x T`，但直到运行时我才知道数组的维数（秩）。

如何创建该数组的子数组的视图，由两个长度为 rank:`extent`和的向量指定`offset`？将 numpy 导入为 np

```
def select_subrange( orig_array, subrange_extent_vector, subrange_offset_vector ):
    """
    returns a view of orig_array offset by the entries in subrange_offset_vector
    and with extent specified by entries in subrange_extent_vector.
    """
    # ??? 
    return subarray 
```

我被卡住了，因为我发现的切片示例需要`[ start:end, ... ]`每个数组维度的条目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:56:41.030

如果我理解正确，请使用

```
orig_array[[slice(o, o+e) for o, e in zip(offset, extent)]] 
```

例子：

```
>>> x = np.arange(4**4).reshape((4, 4, 4, 4))
>>> x[0:2, 1:2, 2:3, 1:3]
array([[[[25, 26]]],

       [[[89, 90]]]])
>>> offset = (0, 1, 2, 1)
>>> extent = (2, 1, 1, 2)
>>> x[[slice(o, o+e) for o, e in zip(offset, extent)]]
array([[[[25, 26]]],

       [[[89, 90]]]]) 
```

# c++ - c++ -

> ID：15841338
> 
> 赞同：35
> 
> 时间：2013-04-05T18:49:43.753
> 
> 标签：c++, function, templates

在我的类`Mat`中，我想要一个函数，它将另一个函数作为参数。现在我有下面的 4 个函数，但是在调用 print() 时出现错误。第二行给了我一个错误，但我不明白为什么，因为第一行有效。唯一的区别是函数`f`不是类的成员`Mat`，而是`f2`。失败是：`error: no matching function for call to Mat::test( < unresolved overloaded function type>, int)'`

```
template <typename F>
int Mat::test(F f, int v){
    return f(v);
}

int Mat::f2(int x){
    return x*x;
}

int f(int x){
    return x*x;
}

void Mat::print(){
    printf("%d\n",test(f ,5));    // works
    printf("%d\n",test(f2 ,5));    // does not work
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-05T19:18:54.667

的类型与`pointer-to-member-function`不同`pointer-to-function`。

函数的类型取决于它是普通函数还是某个类的**非静态成员函数**：

```
int f(int x);
the type is "int (*)(int)" // since it is an ordinary function 
```

和

```
int Mat::f2(int x);
the type is "int (Mat::*)(int)" // since it is a non-static member function of class Mat 
```

注意：如果是 Fred 类的静态成员函数，其类型与普通函数相同：`"int (*)(char,float)"`

> 在 C++ 中，成员函数有一个指向对象的隐式参数（成员函数内的 this 指针）。普通的 C 函数可以被认为具有与成员函数不同的调用约定，**因此它们的指针类型（指向成员函数的指针与指向函数的指针）不同且不兼容。**C++ 引入了一种新类型的指针，**称为指向成员的指针，它只能通过提供 object 来调用**。
> 
> 注意：不要试图将指向成员函数的指针“转换”为指向函数的指针；结果是不确定的，可能是灾难性的。例如，**指向成员函数的指针不需要包含适当函数的机器地址。**如上一个示例所述，如果您有一个指向常规 C 函数的指针，请使用顶级（非成员）函数或静态（类）成员函数。

更多关于[这里](http://www.parashift.com/c++-faq/fnptr-vs-memfnptr-types.html)和[这里](http://www.parashift.com/c++-faq-lite/addr-of-memfn.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-05T19:01:15.297

这里的问题是它`f2`是一个方法 on `Mat`，而`f`只是一个自由函数。你不能自己调用`f2`​​，它需要一个实例`Mat`来调用它。解决这个问题的最简单方法可能是：

```
printf("%d\n", test([=](int v){return this->f2(v);}, 5)); 
```

那里将`=`捕获`this`，这是您需要调用`f2`的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-09-17T00:34:16.950

我因未使用括号进行函数调用而收到此错误。我有这个：

`Eigen::Quaterniond value; ... myFunction(value.x);`

我通过将最后一行更改为以下内容来解决此问题：

`myFunction(value.x());`

# shell - 带 args 的 Shell 脚本，其中 args 是带空格的文件

> ID：15841350
> 
> 赞同：0
> 
> 时间：2013-04-05T18:51:02.660
> 
> 标签：shell, image-processing, imagemagick, zsh

我希望使用一个 shell 脚本来接受 imagemagick 脚本的目录的 for 循环。shell脚本是这样的：

```
#!/bin/sh
# ~/scripts/mkhdr.sh

convert -gaussian $1 $2 - | composite -compose overlay $2 - $3 
```

因此for循环是：

```
for i in *.(tif|jpg);do;echo converting $i;~/scripts/mkhdr.sh 3 ./$i ./SSP_JPGs/$i:r.jpg;done 
```

在没有空格的文件目录上工作正常。在文件名包含空格的目录上失败。

### 更新：

感谢[Adrian Frühwirth](https://stackoverflow.com/users/612462/adrian-fruhwirth)，以下是有效的方法：

```
#!/bin/sh
# ~/scripts/mkhdr.sh

convert -gaussian "$1" "$2" - | composite -compose overlay "$2" - "$3" 
```

命令行：

```
for file in *.(tif|jpg);do;echo converting "${file}";~/scripts/mkhdr.sh 3 "${file}" "/Users/me/Desktop/${file}";done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T10:42:29.127

您发布的两个片段都有一些问题。让我们从第二个开始：

```
for i in *.(tif|jpg); do
    echo converting $i
    ~/scripts/mkhdr.sh 3 ./$i ./SSP_JPGs/$i:r.jpg
done 
```

1.  正如已经指出的，您需要引用变量以说明文件名中的空格。
2.  我不熟悉`zsh`'s 的`:r`语法，但是由于您正在搜索`.jpg`AND`.tif`文件`:r.jpg`，因此不会考虑这些`.tif`文件。

现在第一个片段：

```
#!/bin/sh
# ~/scripts/mkhdr.sh

convert -gaussian $1 $2 - | composite -compose overlay $2 - $3 
```

即使您在另一个代码段中引用了变量，它们在这里也没有被引用，并且再一次，带有空格的文件名将是一个问题。

现在让我们应用一些修复，从对话片段开始：

```
#!/bin/sh
# ~/scripts/mkhdr.sh

convert -gaussian "$1" "$2" - | composite -compose overlay "$2" - "$3" 
```

*   始终引用您的变量以确保安全。

和调用片段：

```
for file in *.tif *.jpg; do
        echo "converting '${file}'"
        ~/scripts/mkhdr.sh 3 "${file}" "./SSP_JPGs/${file%.*}"
done 
```

*   引用变量。
*   `*.(tif|jpg)`将语法更改为`*. tif *.jpg`. 这应该适用于所有`zsh`,`bash`和`ksh93`，但您不必使用它。
*   改为。`$i:r.jpg`_ 这从 的 值后面`${i%.*}`删除了短匹配，这恰好是文件扩展名。这应该适用于所有,和.`.*``i``zsh``bash``ksh93`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:49:07.090

您可以使用`read`; 然后引用所有出现的`$i`：

```
ls *.tif *.jpg | while read i; do
  echo converting "$i";
  ~/scripts/mkhdr.sh 3 "./$i" "./SSP_JPGs/$i:r.jpg";
done 
```

我不确定该`$i:r.jpg`部分，它将**:r.jpg**附加到文件名？

# javascript - jquery ajax 数据容器

> ID：15841352
> 
> 赞同：0
> 
> 时间：2013-04-05T18:51:13.917
> 
> 标签：javascript, jquery, containers

我正在开发一个客户端应用程序，它将通过 ajax 加载大量数据并将其存储在 javascript 模型中的某个位置。简而言之，我的应用程序具有以下元素：

*   AJAX调用：加载用户列表、加载财务数据（用户收入和结果、加载基于收入/结果的图表数据）
*   用户列表在初始页面加载期间加载（并且不会更改）
*   可以检索给定时间段内选定用户的财务数据
*   有一个带有用户复选框列表的对话框 - 提交对话框后，将为这些用户检索财务数据（通过 ajax）

因此，每次整个页面加载都会有一些 ajax 调用，并且每次更改任何过滤器时都会调用一些 ajax 调用。

我发现 jquery 提供了一个`.data()`将数据绑定到特定 DOM 对象的函数。但是，正如您所看到的，我不需要将我的数据绑定到特定的 DOM 对象，而只是为了全局管理它。有没有推荐的方法，你会建议什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:04:12.870

对于全局数据，您可以考虑包含值的全局 javascript 对象。例如，声明 globalData：

```
var globalData = {users : /*Put User List Here*/ }; 
```

然后只需在检索全局数据对象时为其赋值。

```
$.ajax(success:function(data){
    globalData.transactions = data;
}); 
```

您可以使用 .data() 函数将数据分配给特定的 UI 元素。例如，如果您有显示帐户列表的页面部分，则使用 .data() 函数，例如此 ajax 请求帐户列表。

```
$.ajax(success:function(data){
    $("#accountList").data(data);
}); 
```

# user-interface - 无法删除带有淘汰赛的剑道网络网格项目

> ID：15841355
> 
> 赞同：2
> 
> 时间：2013-04-05T18:51:23.367
> 
> 标签：user-interface, web, knockout.js, grid, kendo-ui

我有一个剑道网络网格与淘汰赛相结合。网格的最后一列包含一个用于删除该行的按钮。但是removeItem方法的参数

```
this.removeItem = function (item) {
        this.FilteredClients.remove(item);
    }.bind(this); 
```

得到错误的值。

看看[http://jsfiddle.net/zeQMT/93/](http://jsfiddle.net/zeQMT/93/)

少了什么东西？

顺便提一句。我不想使用行模板，因为我想自己设置列标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:28:17.210

如果您不使用行模板，则以这种方式绑定不是无缝的。尽管您可以处理单击单元格中的按钮，找到与该行关联的数据项，然后找到视图模型项，但有几种非常简单的方法。

例如，您可以像这样绑定列：

```
 columns: [
                { field: "id", title: "id"},
                { field: "name", title: "name"}, 
                { command:[{text: "x", click: removeItem}]}
            ] 
```

然后，您的`removeItem`函数需要找到适当的视图模型项，例如：

```
this.removeItem = function(e) {
    var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
    if (dataItem && dataItem.id) {
        self.items.remove(function(item) {
           return item.id === dataItem.id; 
        });
    }
}; 
```

示例：http: [//jsfiddle.net/rniemeyer/EpkPy/](http://jsfiddle.net/rniemeyer/EpkPy/)

如果您想保持视图模型代码更简洁（避免在其中引用事件/元素），那么您可以附加一个处理程序来定位项目，然后调用视图模型。这将是我的偏好。

就像是：

```
 columns: [
                { field: "id", title: "id"},
                { field: "name", title: "name"}, 
                { command:[{text: "x", className: "btnRemove" }]}
            ] 
```

然后，将一个处理程序不显眼地附加到按钮上，例如：

```
$("#myGrid").on("click", ".btnRemove", function(e) {
    var widget = $("#selectedServices").data("kendoGrid");
    var dataItem = widget.dataItem($(e.currentTarget).closest("tr"));
    if (dataItem && dataItem.id) {
          vm.removeItem(dataItem.id);
    }
}); 
```

然后，您的 vm 上的`removeItem`方法将只接受 id，例如：

```
this.removeItem = function(id) {
    self.items.remove(function(item) {
        return item.id === id; 
    });
}; 
```

[http://jsfiddle.net/rniemeyer/AwX5N/](http://jsfiddle.net/rniemeyer/AwX5N/)

# windows - 为什么full GC时出现很多page fault

> ID：15841356
> 
> 赞同：1
> 
> 时间：2013-04-05T18:51:28.910
> 
> 标签：windows, memory-management, garbage-collection, operating-system, jvm

它是 Window 2003 服务器。

我们正在运行一些性能测试，我们看到的是：

1.  在前 5 小时内，page fault/sec 非常小，例如 10 或 20

2.  在过去 1 小时内，缺页率跃升至 500 次缺页/秒

3.  在过去的 1 小时内，我们看到了很多 full GC。

注意，我们有足够的内存，比如 64G，整个系统只使用了一半，所以应该不会有很多硬页错误。

我想知道的是，当 JVM 进行 GC 时，与没有 GC 相比，预计会看到大量的软页面错误/秒吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:19:36.027

[增量垃圾收集器](http://www.ravenbrook.com/project/mps/master/manual/html/glossary/i.html#term-incremental-garbage-collection)将它们的执行与[mutator](http://www.ravenbrook.com/project/mps/master/manual/html/glossary/m.html#term-mutator)交错。这可能会导致两种问题：

1.  mutator 可能会更改垃圾收集器已经分析过的对象（例如，更新引用）。在这种情况下，需要通知收集器有关更改，以便它可以考虑更改。

2.  在[复制收集器](http://www.ravenbrook.com/project/mps/master/manual/html/glossary/c.html#term-copying-garbage-collection)的情况下，mutator 可能想要查看收集器已移动的对象。在这种情况下，需要通知收集器尝试从移动的对象中读取，以便可以将 mutator 重定向到对象的新副本。（使用存储在“[破碎的心”中的](http://www.ravenbrook.com/project/mps/master/manual/html/glossary/b.html#term-broken-heart)[转发指针](http://www.ravenbrook.com/project/mps/master/manual/html/glossary/f.html#term-forwarding-pointer)。）

问题 (1) 可以通过收集器在已完成分析的页面上放置[硬件写入屏障来解决。](http://www.ravenbrook.com/project/mps/master/manual/html/glossary/w.html#term-write-barrier)问题 (2) 可以通过收集器在包含已移动对象的页面上放置[硬件读取屏障来解决。](http://www.ravenbrook.com/project/mps/master/manual/html/glossary/r.html#term-read-barrier)

当 mutator 遇到这些障碍时，就会产生[页面错误](http://www.ravenbrook.com/project/mps/master/manual/html/glossary/p.html#term-page-fault)，并且错误处理程序从垃圾收集器运行适当的函数。

（我不确定这是否是 JVM 垃圾收集器在 Windows 上的工作方式，但在增量垃圾收集期间预计会增加页面错误。）

# c# - AppHarbor JabbR 500 错误

> ID：15841359
> 
> 赞同：2
> 
> 时间：2013-04-05T18:51:51.787
> 
> 标签：c#, appharbor, jabbr

我已经让 appharbor 构建和部署解决方案，但是在我尝试登录后它给了我 500 错误。错误日志中也没有任何内容，并且该教程似乎不再适用。

有谁知道这可能是什么原因？

编辑：当我下拉构建并在 IIS 中运行时，似乎出现以下错误

处理程序“Owin”的模块列表中有一个错误模块“ManagedPipelineHandler”

编辑：较早的错误是无效的，并且是由我的应用程序池未设置为 asp.net 4.0 引起的，但最终出现以下错误

无法加载文件或程序集“Microsoft.Owin.Host.SystemWeb”或其依赖项之一。该系统找不到指定的文件。

编辑：

再次尝试使用新的存储库，我仍然无法推送到 appharbor 我认为这与以前的错误没有任何关系，因为它让我注册一个帐户并让我尝试登录然后失败。

（感谢从信号器到 jabbr 选项卡的更改，似乎没有 jabbr 标签，由于得分，我无法制作新标签。）

# php - 如何对使用嵌套集模型存储的树中的数据进行重新排序？

> ID：15841364
> 
> 赞同：1
> 
> 时间：2013-04-05T18:51:56.637
> 
> 标签：php, mysql, model, nested, set

我有一个具有以下结构的表

```
CREATE TABLE `nested_set`
(
    `id` int(11) unsigned NOT NULL auto_increment,
    `lft` int(11) NOT NULL,
    `rgt` int(11) NOT NULL,
    `id_parent` int(11) NULL,
    `Name` varchar(255) NULL,
    PRIMARY KEY (`id`),
    KEY `fk_nested_sets` (`id_parent`)
) 
```

我想保留级别结构，但要按字母顺序对每个节点中的节点进行重新排序。我如何使用 MySQL 或（PHP 和 MySQL）来实现这一点？

（id_parent 被添加到模型中，所以我可以轻松地向上或向下移动节点）

# git - 如何在 git repo 中取回我已删除和提交的文件？

> ID：15841365
> 
> 赞同：1
> 
> 时间：2013-04-05T18:51:59.840
> 
> 标签：git, githooks

我有一个关于 git 的项目。我的项目有如下文件：

```
file1.js
file2.html
file3.js
file4.css
file5.html
file6.jpg
file7.html
file8.js
file9.css 
```

我为所有文件做了一个 git -rm 文件名并提交了它们，直到我剩下

```
file1.js
file2.html 
```

我需要取回我的 file6.jpg

我如何获得 file6.jpg 所以我的回购将有

```
file1.js
file2.html
file6.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:04:07.960

```
git checkout HEAD~N -- file6.jpg 
```

在哪里存在`N`的时间提交的数量在哪里`file6.jpg`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:03:48.520

`git checkout`可能是单个文件最简单的选项。

1.  用于`git log`查看您的提交历史记录。在删除相关文件*之前*找到提交的哈希值。例如：

    ```
    commit 5faff7e3f74c3408985acecd1dbb90feeb7b1d75 <--- "hash"
    Author: Nick Tomlin <myemail@email.com>
    Date:   Fri Apr 5 11:34:03 2013 -0500 
    ```

2.  然后运行`git checkout <hash> path/to/file6.jpg`替换`<hash>`上面的字符串（您通常只需要最后 5 个左右，但为了安全起见，现在让我们全部使用它们。如果您在`file6.jpg`驻留的目录中，您可以这样做`git checkout <hash> file6.jpg`

这是一种访问提交的更长形式的方法，可以只使用`HEAD~6`，但在引用比`HEAD~3`. 使用相对引用更容易引用错误的提交`~`，我最终会查看我的日志以找出我需要的确切提交:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:16:32.113

```
git checkout $(git log -1 --pretty='%h' -- <path>)^ -- <path> 
```

**分解**

*用于`git log`查找影响所需文件的最后一次提交*

`$(git log -1 --pretty='%h' -- <path>)`

*   使用仅显示哈希的格式运行`git log`命令。`--pretty`
*   使用`--`分隔符显式指定文件而不是提交引用。
*   后面是我们要检索的文件的路径和文件名。
*   把所有这些都包装进去，`$()`这样我们就可以像变量一样将它嵌入到另一个 git 命令中。
*   这将返回删除给定文件的提交。

`$()`如果您只是想知道该文件何时被删除，这当然可以单独使用- 更改或删除漂亮的格式将为您提供有关它找到的提交的更多信息。

*用于检索`git checkout`给定提交中的文件*

`git checkout <ref>^ -- <path>`

*   `git checkout`使用提交并指定路径运行。
*   当指定路径时，git 只需在提供的引用处重新创建该路径的状态。
*   通过在引用中添加胡萝卜`^`，我们实际上指向了直接祖先。
*   我们想要直接的祖先，因为我们从日志中获得的提交将没有文件——因为它是删除文件的提交。

将它们放在一起，您就可以在文件被删除之前检查该文件的提交状态。如果您在尚未删除的文件上运行此命令，它将撤消最近对该文件所做的任何更改。

**别名**

```
git config --global alias.unrm '!COMMIT=$(git log -1 --pretty='%h' -- "$1"); git checkout $COMMIT^ -- "$1"' 
```

我创建了一个名为 的别名`unrm`，就像在 un-remove 中一样。如果你运行上面的命令，从那时起你只需要运行..

```
git unrm <path> 
```

**编辑：我在命令中添加了一些反馈。**

```
git config --global alias.unrm '!COMMIT=$(git log -1 --pretty='%h' -- "$1"); git checkout $COMMIT^ -- "$1"; echo "File: $1, was restored from commit $COMMIT"; git show -s $COMMIT' 
```

现在它会通知您它所做的事情，并向您显示它从中恢复文件的提交。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T19:05:42.150

假设 file6.jpg 之前已提交，您可以通过以下方式在 git 存储库中获取 file6.jpg 的所有修订：

```
git rev-list --objects --all | grep file6.jpg 
```

然后你可以使用恢复文件

```
git cat-file {sha} > file6.jpg 
```

添加文件并提交。

另请参阅有关如何从 git 存储库获取所有对象的答案：[https ://stackoverflow.com/a/7350019](https://stackoverflow.com/a/7350019)

还有这个关于 git 对象内部的网站：http: [//git-scm.com/book/en/Git-Internals-Git-Objects](http://git-scm.com/book/en/Git-Internals-Git-Objects)

# javascript - 平均访问时长在午夜达到峰值

> ID：15841370
> 
> 赞同：12
> 
> 时间：2013-04-05T18:52:24.077
> 
> 标签：javascript, html, google-analytics

上周四，我对 GA 脚本进行了更改——我添加了[增强的链接属性](http://support.google.com/analytics/answer/2558867?hl=en)并添加了 setDomainName 属性。从那时起，我们的大部分统计数据都很好，但平均访问持续时间已经完全疯了。

我们从平均约 4 分钟/次访问到每天早上在访问时间超过两个小时的午夜后出现大幅高峰。我认为这一定是我做错了什么，因为它在我部署更改的同一个小时开始失控。

在找出原因之前，我不想对生产进行更改 - 任何帮助或建议将不胜感激。

**平均访问持续时间的每小时分析：**

![访问持续时间从平均 3 分钟开始，周四之后，每天早上午夜刚过大约 2 个半小时/访问开始飙升，到一天结束时下降到约 4 分钟/访问。](https://i.stack.imgur.com/D2COs.png)

**当前的 GA 脚本**

```
var _gaq = _gaq || [];
var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';

_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
_gaq.push(['_setCustomVar', 1, 'Locale', 'en_CA', 2]);
_gaq.push(['_setAccount', 'REDACTED']);
_gaq.push(['_setSiteSpeedSampleRate', 10 ]);
_gaq.push(['_setDomainName', 'REDACTED']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-19T21:08:29.400

**编辑**我解决了。请参阅下面的详细信息 - 但总结是它的自动刷新 javascript 导致会话跨越多天的症状。GA 在午夜重置所有会话，因此看起来好像许多长会话在午夜开始，但实际上并非如此，它们可能在一天中的任何时间开始。

* * *

你有没有弄清楚原因是什么？我们也看到了同样的情况，平均会话长度的巨大峰值——最近才开始。也是半夜。

我们尝试了@newUserNameHere 的建议——我们为这些长会话创建了一个高级段（有时长达 10 小时，但平均为 1.5 小时）——我们看到它由大约 700 个唯一用户组成——跨越所有浏览器版本，包括chrome 的多个点补丁版本，覆盖整个世界和整个美国。所以它看起来不像是一个单一的机器人......或者至少如果它是 - 它是一个非常分布式和多样化的机器人？![图1](https://i.stack.imgur.com/phxrW.png) ![图2](https://i.stack.imgur.com/KqYYU.png)

**编辑**

***我解决了！***

我发现开发人员已经在我们的网站上实现了“自动”刷新，每 15 分钟一次。这实质上导致 Google Analytics（分析）将任何保持浏览器打开的用户视为无休止的长时间会话（只要您在 30 分钟内访问该站点，它就会延长会话）。由于[Google Analytics 会在午夜重置所有会话](http://analytics.blogspot.com/2011/08/update-to-sessions-in-google-analytics.html)，并且由于上图显示的会话基于它们的开始时间 - 我们看到许多非常长的会话从午夜开始。实际上，长时间的会议只会持续一整天，并且可以随时开始。

这实际上是我们的产品团队要求的，但我不知道。

在深入研究了 Google Analytics 中的数据后，我只是推测一定会发生类似的事情，不断地 ping 站点（或至少是 Google Analytics）以在 30 分钟结束之前保持会话处于活动状态。

我在打开 Charles HTTP Debugger 的情况下打开了一个浏览器，几个小时看看发生了什么，我发现了这种行为。

当我把这个带回给开发人员和产品团队时，他们说“当然，我们只是在两周前提出并实施了这种行为。”

（实际上看起来很奇怪，很科学。我看到了一些奇怪的症状。我有一个关于什么可能导致它的理论。我建立了一个实验来测试它（浏览器+查尔斯打开），实验证明了我的理论。）

如果您仍然看到这个问题，我建议您尝试上述方法（让浏览器打开几个小时，同时使用 Charles HTTP 调试器）。如果您没有看到页面定期刷新，可能它不是主页 - 您应该使用高级细分来确定发生这种情况的页面，并在该页面上尝试此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-30T22:37:09.170

只是一个猜测，但这可能是与时区相关的错误。

尝试更改您的 GA 帐户的时区，看看是否会更改报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T16:00:49.183

这可能与 Google 跟踪会话的方式有关。会话会在一天结束时自动结束，因此如果有人在午夜之前一直在与您的网站进行积极互动，那么除了该小时内实际的新访问之外，他们将在午夜成为新的访问。

[Google Analytics（分析）中如何计算访问次数](https://support.google.com/analytics/answer/2731565?hl=en)

另一种可能性是它是由用户机器上的 __utma 和 __utmz cookie 的重复版本引起的。从同步到异步 GATC 的更改可能会导致它。要解决这个问题，您可能需要以某种方式删除额外的 cookie。

# git - Git改变.png文件的透明背景？

> ID：15841371
> 
> 赞同：0
> 
> 时间：2013-04-05T18:52:24.780
> 
> 标签：git, png, transparency

您是否遇到过您创建一个具有透明背景的 .png 文件并在本地环境中正常显示，但是当您从实时站点中提取更改时，图像以白色背景显示？为什么会这样？你解决了那个问题吗？如何？（不同于直接上传 .png 文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:55:38.553

我会 99% 肯定地说，这*不是*git 所做的。Git 的业务是跟踪文件更改，而不是进行更改。如果它以某种方式是 git，则会在日志中显示更改（您可以使用 进行检查`git log`）。有关您的开发/生产环境的更多细节以及相关 png 的链接，将有助于诊断问题。我的猜测是这是一个环境问题。

# android - Android：消除文件路径的歧义

> ID：15841380
> 
> 赞同：10
> 
> 时间：2013-04-05T18:53:17.490
> 
> 标签：android

在我的应用程序中，用户选择文件。在内部，我存储有关文件的信息，我根据文件路径对其进行键控。下次使用该文件时，我会处理存储的信息。麻烦的是我实例化我的文件：

`File file1 = new File(Environment.getExternalStorageDirectory() + "/test.txt");`

然后，在特定的 JB 设备上，file1.getCanonicalPath() 给出：“/storage/emulated/0/test.txt”。

问题是当其他应用程序使用 Intent 中的文件路径启动我的应用程序时，它们发送的路径往往看起来像：“/mnt/sdcard/test.txt”。

有没有一种聪明的策略来消除这两条路径的歧义？可能我应该以不同的方式实例化我的文件？

编辑：

问题是，这两个文件的两个规范路径不相等。对于以下内容，`cp1=="mnt/sdcard/test/txt"`并且`cp2=="/storage/emulated/0/text/txt"`：

```
File file1 = new File("/mnt/sdcard/test.txt");
File file2 = new File("/storage/emulated/0/test.txt");

String cp1 = file1.getCanonicalPath();
String cp2 = file2.getCanonicalPath(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:35:34.000

首先，获取外部路径的唯一正确方法是在 Android中使用`getExternalStorageDirectory`and other 。`getExternalStorageXXX`

Android 将首先尝试解析两个系统变量：

```
String rawExternalStorage = System.getenv(ENV_EXTERNAL_STORAGE);
String rawEmulatedStorageTarget = System.getenv(ENV_EMULATED_STORAGE_TARGET); 
```

而`ENV_EXTERNAL_STORAGE = "EXTERNAL_STORAGE"`和`ENV_EMULATED_STORAGE_TARGET = "EMULATED_STORAGE_TARGET"`。如果`EMULATED_STORAGE_TARGET`设置了变量，则表示设备有模拟存储，则存储路径为`EMULATED_STORAGE_TARGET`（Android 4.2 后支持多用户外置存储，路径后有 /0 或 0）但如果是未设置且`EXTERNAL_STORAGE`已设置，路径将为`EXTERNAL_STORAGE`. 如果两者都没有设置，则`/storage/sdcard0`默认为路径。因此，不同的设备可能包含不同的外部存储路径。

正如[外部存储技术信息](http://source.android.com/tech/storage/)所说，您可以通过设置 init.rc 文件来自定义设备的存储。例如在默认的金鱼之一中：

```
export EXTERNAL_STORAGE /mnt/sdcard
mkdir /mnt/sdcard 0000 system system
symlink /mnt/sdcard /sdcard 
```

如果你使用`getExternalStorageDirectory`你会得到`/mnt/sdcard`, but`/sdcard`是一个指向那个目录的符号链接。

因此，在您的情况下， init.rc 可能包含：

```
export EMULATED_STORAGE_TARGET /storage/emulated
symlink /storage/emulated/0 /mnt/sdcard 
```

所以它们不是模棱两可的，它们实际上是相同的。

我认为[getCanonicalPath()](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getCanonicalPath%28%29)可能适用于您的绝大多数用例。

> 规范路径名是绝对且唯一的。规范形式的精确定义取决于系统。如果需要，此方法首先将此路径名转换为绝对形式，就像调用 getAbsolutePath() 方法一样，然后以系统相关的方式将其映射到其唯一形式。这通常涉及删除冗余名称，例如“。” 和路径名中的“..”，解析符号链接（在 UNIX 平台上），并将驱动器号转换为标准大小写（在 Microsoft Windows 平台上）。
> 
> 每个表示现有文件或目录的路径名都有唯一的规范形式。每个表示不存在的文件或目录的路径名也具有唯一的规范形式。不存在的文件或目录的路径名的规范形式可能与创建文件或目录后相同路径名的规范形式不同。类似地，现有文件或目录的路径名的规范形式可能与删除文件或目录后相同路径名的规范形式不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T10:32:27.627

对此可能没有简单的解决方案。问题在于，文件系统中显然有两个不同的挂载点实际上指向同一个位置。File.getCanonicalPath() 只能解析符号链接，不能解析不同的挂载点。

例如在我的 Nexus 4 上，这段代码：

```
File file1 = new File(Environment.getExternalStorageDirectory() + "/Android");
System.out.println("file 1: " + file1.getCanonicalPath());
File file2 = new File("/sdcard/Android");
System.out.println("file 2: " + file2.getCanonicalPath()); 
```

印刷

```
file 1: /storage/emulated/0/Android
file 2: /storage/emulated/legacy/Android 
```

我使用此代码执行“mount”并打印输出：

```
Process exec = Runtime.getRuntime().exec("mount");
InputStream in = exec.getInputStream();
BufferedReader br = new BufferedReader(new InputStreamReader(in));
while (true) {
    String line = br.readLine();
    if (line == null)
        break;
    System.out.println(line);
}
in.close(); 
```

相关输出是：

```
/dev/fuse /storage/emulated/0 fuse rw,nosuid,nodev,relatime,user_id=1023,group_id=1023,default_permissions,allow_other 0 0
/dev/fuse /storage/emulated/legacy fuse rw,nosuid,nodev,relatime,user_id=1023,group_id=1023,default_permissions,allow_other 0 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T04:12:42.383

看看[这里](https://stackoverflow.com/a/813730/119592)的答案。它还使用规范路径，但方式略有不同，可能对您有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-17T09:00:37.667

在较新的 Android 版本上，SD 存储可通过多种途径获得，例如：

```
/storage/emulated/0
/storage/emulated/legacy (root account most of the time)
/sdcard
/data/media 
```

如果您检查这些路径位于哪个设备上，有些设备位于不同的设备上（因为 fuse 'virtual' 文件系统），因此即使它们实际上是相同的文件，获取它们的规范路径也不会导致相同的文件路径。

此外，在 Marshmallow 上，情况似乎变得更糟，甚至 /sys 下的文件路径（充满重定向/链接）都没有正确报告，并且 getCanonicalPath() 返回原始路径而不是实际的规范路径。

虽然给定文件路径上的 ls -l（或 readlink）将显示实际的规范路径，但 API 不再起作用。不幸的是，运行 readlink 或 ls -l 非常慢（shell 已经运行时平均为 130 毫秒），与已经很慢但快得多的 getCanonicalPath() 相比，这很遗憾。

结论，getCanonicalPath 坏了，而且一直坏。

# asp.net - SelectList 从 ViewBag 中提取信息：不在生成的 html 中创建 value="..."

> ID：15841388
> 
> 赞同：1
> 
> 时间：2013-04-05T18:53:45.087
> 
> 标签：asp.net, razor, drop-down-menu, selectlist

我正在尝试使用 Razor 视图引擎在 MVC4 应用程序中创建经过客户端验证的下拉列表。

视图中生成下拉列表的代码如下：

```
 @Html.DropDownList("Test", new SelectList(ViewBag.AvailableLoBsDescriptions, ViewBag.AvailableLoBsIds), "--none--") 
```

请注意，ViewBag.AvailableLoBsDescriptions 是使用 IList 在控制器中创建的，而 ViewBag.AvailableLoBsIds 也是使用 IList 在控制器中创建的。

我期望发生的是让 Razor 生成一个下拉菜单，其中描述填充每个的内部 html，而 Ids 填充 value="..."。但是，根本没有产生任何价值，导致这样的事情：

```
<select id="Test" name="Test"><option value="">--none--</option>
<option>N/A</option>
<option>aaaa</option>
<option>bbbb</option>
<option>cccc</option>
<option>dddd</option>
<option>eeee</option>
<option>ffff</option>
</select> 
```

查看 SelectList 文档[http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist%28v=vs.108%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist%28v=vs.108%29.aspx)在我看来这应该可行。有谁知道为什么除了占位符之外没有为其他任何东西生成值？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:07:08.393

您正在使用的构造函数如下所示：

```
SelectList(IEnumerable, Object) 
```

这里的第二个参数表示*当前*从第一个参数的集合中选择的对象。它没有规定将对象用作值列表。

你应该做的是使用`SelectList(IEnumerable, String, String)`. 这允许您传递一个属性的名称（每个元素的`IEnumerable`）以用于描述和一个用于值。然后你可以产生这样的东西：

**控制器：**

```
// Create your IEnumerable
var LoBs = new List<LoB>();

// Assign some parameters to your objects
var exampleItem = new LoB();
exampleItem.Description = "Option text";
exampleItem.Value = "myValue";

// Populate your list and return your view.
LoBs.Add(exampleItem);
ViewBag.LoBs = LoBs;
return View(); 
```

**看法：**

```
@Html.DropDownList("Test",
    new SelectList(ViewBag.LoBs, "Value", "Description"),
    "--none--") 
```

**等等...**

```
<select id="Test" name="Test">
    <option value="">--none--</option>
    <option value="myValue">Option text</option>
</select> 
```

# c# - 使用 DbContext 保存对象后如何获取对象的主键

> ID：15841392
> 
> 赞同：3
> 
> 时间：2013-04-05T18:53:51.083
> 
> 标签：c#, entity-framework, entity-framework-5

鉴于我的代码的上下文片段：

```
var calibration = new Calibration
{
    CalibrationType = SelectedTest.TestTypeId
    ,Expiration = expirationDate
    ,LastSaved = DateTime.Now
    ,StatusTypeId = 1
    ,TechnicianId = SelectedTechnician.Id
    ,Phases = BuildCalibrationPhases()
};

db.Calibrations.Add(calibration);
db.SaveChanges(); 
```

实体框架有没有办法在完成后获取为校准对象选择（播种）的主键`db.SaveChanges();`？

换句话说，在提交后如何获取该对象的主键？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:55:44.820

在上下文中重新加载条目：

```
db.Entry(calibration).Reload(); 
```

然后就可以访问新创建的PK

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:00:57.807

此外，您可以从`Calibration.PrimaryKeyProperty`db.SaveChanges(); 之后获取

方法，

```
var calibration = new Calibration
{
    CalibrationType = SelectedTest.TestTypeId
    ,Expiration = expirationDate
    ,LastSaved = DateTime.Now
    ,StatusTypeId = 1
    ,TechnicianId = SelectedTechnician.Id
    ,Phases = BuildCalibrationPhases()
};

db.Calibrations.Add(calibration);
db.SaveChanges();

int value = Calibration.PrimaryKeyProperty; 
```

# struts2 - Struts2 验证注解给出多条消息

> ID：15841398
> 
> 赞同：2
> 
> 时间：2013-04-05T18:54:16.600
> 
> 标签：struts2, struts-validation, struts2-convention-plugin

我正在使用约定插件。下面是@Validations 注释。

```
@Validations(
        requiredFields={@RequiredFieldValidator(type = ValidatorType.SIMPLE, fieldName = "revenue", message = "You must enter a value for field.")},
         intRangeFields =
                { @IntRangeFieldValidator(type = ValidatorType.SIMPLE, fieldName = "revenue", min = "1", max = "100", message = "id must be between 1 to 100.")},
         conversionErrorFields={@ConversionErrorFieldValidator(message="Not a valid Number", type= ValidatorType.SIMPLE, fieldName="id")}
        ) 
```

所以每当我在字段中给出一个字符而不是数字来测试时。我收到这 3 条消息。

```
Invalid field value for field "id".
Not a valid Number
You must enter a value for field. 
```

相反，我希望只得到第二个或第一个。N 从我得到第一个错误的地方。正如我们所看到的，我没有给出任何这样的信息。那么我怎样才能一次只收到一条适当的消息。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T05:54:44.543

在定义了您的操作类的同一包中创建新文件。“actionclassname.properties”并在该文件中使用此“invalid.fieldvalue.FieldName=give msg for user”。在我的情况下它也可以正常工作

# excel - 从excel中删除由*和/分隔的文本字符串

> ID：15841400
> 
> 赞同：0
> 
> 时间：2013-04-05T18:54:24.243
> 
> 标签：excel, excel-formula, excel-2010, vba

我有一列包含以下样本的单元格

```
a1 = D11F2/J3C2/FENCE*25A/23A/21A/20A
a2 = d11f2/00A/123/d6f2 
```

我想删除任何 3 位代码“/00A”，它们通常由 / 分隔，但与 A1 中的情况一样，它由星号“*25a”分隔

该公式/宏将导致：

```
a1 = D11F2/J3C2/FENCE
a2 = d11f2/d6f2 
```

感谢所有的帮助！

我尝试使用替代公式，但它只在分隔符后删除了第一个或第二个字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:36:37.633

以下 VBA 函数似乎可以满足您的要求：

```
Function stripThree(s As String)
' find any sequence of three "digits"
' that are separated by either ' ', '*', or '/'
' and remove them, including their leading separator

Dim ii, l, lastGood, lastSep As Integer
Dim retval As String

lastGood = 0
lastSep = 0

For ii = 1 To Len(s)
  l = Mid(s, ii, 1)
  retval = retval & l
  If l = "/" Or l = "*" Or l = " " Then
    If ii - lastSep = 4 Then
      retval = Left(retval, Len(retval) - 5) & l
    End If
    lastSep = ii
  End If
Next ii

' if last "separator" is the end of the string
' we still need to remove the three digit/letter code
If lastSep + 4 = ii Then
  retval = Left(retval, Len(retval) - 4)
End If

stripThree = retval

End Function 
```

此代码的工作示例：

```
input:  D11F2/J3C2/FENCE*25A/23A/21A/20A
output: D11F2/J3C2/FENCE

input:  d11f2/00A/123/d6f2
output: d11f2/d6f2 
```

正如问题中规定的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-12T05:18:08.407

在这里，我提供了另一种没有编码或公式的解决方案。每个人都将很容易做到这一点。

1.  选择数据区域。例如。A1:A20
2.  按“<strong>Ctrl+H”调用替换功能。
3.  要填充的查找区域：**~****查找星号，替换为区域：/ 然后您可以将所有星号（*）替换为斜杠（/）*

     *查找：~*

    代替：/

    对于垫片替换，使用相同的方式，空格只需输入“”。没有”，不需要~。

    查找：（<--有一个间隔）

    代替：/* 
**   再次Ctrl+H。

    抬头： /？？？/

    代替：/* 

 *现在您替换了除 /xxx 5 后缀之外的所有 /3 数字。使用过滤器选择后缀为 /xxx 的代码

筛选： */？？？

分别处理。也许还需要一个公式：**= left(A1,len(A1)-4)***

# java - JAR 中的资源在 IntelliJ 中未正确解析

> ID：15841401
> 
> 赞同：0
> 
> 时间：2013-04-05T18:54:25.230
> 
> 标签：java, intellij-idea, freemarker

我有一个 freemarker ftl 模板文件，它包含在 IntelliJ 项目中的 taglibs 中。问题是 JspTaglibs 没有在 IntelliJ 中解决。错误突出显示文本`JspTaglibs`，错误消息是“无法解析变量'JspTaglibs'”。文件内容如下：

```
<#assign page=JspTaglibs["/WEB-INF/taglibs/sitemesh-page.tld"]>
<#assign decorator=JspTaglibs["/WEB-INF/taglibs/sitemesh-decorator.tld"]>
<#assign security=JspTaglibs["/WEB-INF/taglibs/security.tld"]> 
```

这是一个导入的 Maven 项目。包含的 ftl 位于已编译的 JAR 文件中，我将其作为内容根包含在 Web 模块中。

关于解决“JspTaglibs”以便可以为 Freemarker 标签启用自动完成和验证的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:24:46.410

事实证明，解决方案是将资源文件夹添加为库中的源目录，而不是作为模块中的内容根目录。JAR 一直在库中，作为依赖项包含在内，但需要将特定目录添加为源文件夹。

# c++ - 抛出异常时使用 cout 语句尝试块行为

> ID：15841402
> 
> 赞同：1
> 
> 时间：2013-04-05T18:54:25.447
> 
> 标签：c++, exception, try-catch

如果 try 块在同一个块中引发异常之前包含 cout 语句，这些语句会打印到控制台，还是会表现得好像 try 块从未执行过？例如：

```
void foo()
{
  try
  {
    cout << "1" << endl;
    cout << "2" << endl;
    bar();               //exception thrown in this function, but caught below
  }

  catch (exception e)
  {
    cout << e.what();    //assume the message is "error"
  }
} 
```

这个函数的输出是

```
1
2
error 
```

或者

```
error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:55:48.610

输出将是

```
1
2
error 
```

例外不会“撤消”

```
cout << "1" << endl;
cout << "2" << endl; 
```

# javascript - 粘贴 url 后如何显示 youtube 视频数据，就像 Facebook 的 Wall 表单一样？

> ID：15841407
> 
> 赞同：2
> 
> 时间：2013-04-05T18:54:45.077
> 
> 标签：javascript, jquery, facebook

粘贴 url 后，如何在表单下方显示 youtube 视频数据，就像 Facebook 墙表单一样？像下面这样： ![在此处输入图像描述](https://i.stack.imgur.com/NVNG9.png)

如何才能做到这一点？是否有任何 jquery 插件能够做到这一点？对于图片网址，我也将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:49:58.093

这个使用[YouTube API](https://developers.google.com/youtube/)的 jsfiddle将为您提供一个基本示例来帮助您入门：

[http://jsfiddle.net/g3x84/1/](http://jsfiddle.net/g3x84/1/)

这是完整的示例（因为我还必须包含一些代码）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">

</style>
<script type="text/javascript">
function parse_str (str, array)
{
    var strArr = String(str).replace(/^&/, '').replace(/&$/, '').split('&'),
        sal    = strArr.length,
        fixStr = function (str)
        {
            return decodeURIComponent(str.replace(/\+/g, '%20'));
        },
        i, j, ct, p, lastObj, obj, lastIter, undef, chr, tmp, key, value, postLeftBracketPos, keys, keysLen;

    if (!array)
    array = this.window;

    for (i = 0; i < sal; i++)
    {
        tmp   = strArr[i].split('=');
        key   = fixStr(tmp[0]);
        value = (tmp.length < 2) ? '' : fixStr(tmp[1]);

        while (key.charAt(0) === ' ')
        key = key.slice(1);

        if (key.indexOf('\x00') > -1)
        key = key.slice(0, key.indexOf('\x00'));

        if (key && key.charAt(0) !== '[')
        {
            keys = [];
            postLeftBracketPos = 0;

            for (j = 0; j < key.length; j++)
            {
                if (key.charAt(j) === '[' && !postLeftBracketPos)
                {
                    postLeftBracketPos = j + 1;
                }
                else if (key.charAt(j) === ']')
                {
                    if (postLeftBracketPos)
                    {
                        if (!keys.length)
                        keys.push(key.slice(0, postLeftBracketPos - 1));

                        keys.push(key.substr(postLeftBracketPos, j - postLeftBracketPos));
                        postLeftBracketPos = 0;

                        if (key.charAt(j + 1) !== '[')
                        break;
                    }
                }
            }

            if (!keys.length)
            keys = [key];

            for (j = 0; j < keys[0].length; j++)
            {
                chr = keys[0].charAt(j);

                if (chr === ' ' || chr === '.' || chr === '[')
                keys[0] = keys[0].substr(0, j) + '_' + keys[0].substr(j + 1);

                if (chr === '[')
                break;
            }

            obj = array;

            for (j = 0, keysLen = keys.length; j < keysLen; j++)
            {
                key = keys[j].replace(/^['"]/, '').replace(/['"]$/, '');
                lastIter = j !== keys.length - 1;
                lastObj = obj;

                if ((key !== '' && key !== ' ') || j === 0)
                {
                    if (obj[key] === undef)
                    obj[key] = {};

                    obj = obj[key];
                }
                else
                {
                    ct = -1;

                    for (p in obj)
                    {
                        if (obj.hasOwnProperty(p))
                        {
                            if (+p > ct && p.match(/^\d+$/g))
                            ct = +p;
                        }
                    }

                    key = ct + 1;
                }
            }

            lastObj[key] = value;
        }
    }
}

function search(url)
{
    if (url.indexOf("?") === -1 || url.indexOf("v=") === -1)
    return;

    var query_string = url.substr(url.indexOf("?")+1),
        arr = [];

    parse_str(query_string, arr);

    var xhr = new XMLHttpRequest();

    xhr.onload = function(oEvent)
    {
        if (xhr.status == 200 && xhr.responseText)
        {
            var obj = JSON.parse(xhr.responseText);

            var content = [];

            content.push(
                '<img src="//img.youtube.com/vi/' + arr['v'] + '/0.jpg" style="width:80px; height:80px;" />',
                obj.entry.title['$t'],
                url,
                obj.entry['media$group']['media$description']['$t'],
                obj.entry.author[0].name['$t']
            );

            document.getElementById('data').innerHTML = content.join('<br /><br />');
        }
    }

    xhr.open("GET", "https://gdata.youtube.com/feeds/api/videos/" + arr['v'] + "?v=2&alt=json", false)
    xhr.send(null);
}
</script>
</head>

<body>

Input YouTube video URL:<br />
<input type="text" id="url" oninput="search(this.value)" /><br />

<br />

<div class="data" id="data">

</div>

</body>
</html> 
```

注意 - parse_str 函数由[php.js提供](http://phpjs.org/functions/parse_str/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:24:23.987

您可以在 onchange 事件上解析 textarea 值。然后对 Youtube 服务进行简单的 ajax 调用，如[http://gdata.youtube.com/feeds/api/videos/BWBuW2GvF6A?v=2&alt=json](http://gdata.youtube.com/feeds/api/videos/BWBuW2GvF6A?v=2&alt=json)并从接收到的数据中呈现带有标题的缩略图。

# sql - 从 sql 脚本创建整个数据库

> ID：15841408
> 
> 赞同：-1
> 
> 时间：2013-04-05T18:54:51.467
> 
> 标签：sql, sql-server

我有一个`myDatabase.sql`我创建的数据库的 SQL 脚本。我将如何在 SQL Server Management Studio 中运行此脚本以在那里创建我的数据库？我可以打开它并在程序中运行它还是我必须先做任何事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:58:10.487

是的，那会奏效。或者您可以使用文本编辑器打开它，然后将内容复制粘贴到您的 DBMS 中并运行它！

# powershell-2.0 - 当服务器关闭时，Powershell get-service 运行时间很长

> ID：15841411
> 
> 赞同：0
> 
> 时间：2013-04-05T18:55:02.337
> 
> 标签：powershell-2.0

我有一个脚本，用于检查远程服务器上的服务，并在服务关闭时发送电子邮件。但是，如果在脚本运行时服务器发生故障，可能会导致脚本运行很长时间。有什么方法可以加快这个过程吗？我希望脚本继续执行直到完成。任何帮助将不胜感激。另外，如果我在这个脚本中还有什么可以改进的，请让我知道，因为我是 powershell 新手。谢谢！

```
#******************  Function To Send E-Mail  ******************#

function sendEmail {

send-mailmessage -to "recipient <admin@mail.com>" -from "sender <admin@mail.com>" `
-subject "$eSubject" `
-body "$eBody" -smtpServer mail.smtpServer.com

}

#******************  Set Variables  ******************#
$erroractionpreference = "SilentlyContinue"
$date = Get-Date

$servicesPath = "C:\path_to_file\services.txt"
$serversPath = "C:\path_to_file\servers.txt"

$services = Get-Content $servicesPath
$servers = Get-Content $serversPath

#******************  Check Services And Send E-Mail  ******************#

foreach ($service in $services) { 

foreach ($server in $servers) 
{

    #Check If Service Exist On Server
    $checkService = Get-Service -ComputerName $server -DisplayName $service

    #If The Service Exists Evaluate Status
    if($checkService)
    {
        if ($checkService.status -notlike "Running")
        {
            #Get Server Last Boot Up Time, Set E-Mail Subject And Body, And Send E-Mail
            $OperatingSystem = Get-WmiObject -Class Win32_OperatingSystem -ComputerName $server
            $LastBootUp = $OperatingSystem.ConvertToDateTime($OperatingSystem.LastBootUpTime)
            $eSubject = "$service DOWN on $server"
            $eBody = "$date`r`n$service DOWN on $server`r`nLast bootup time for $server is: $LastBootUp"
            sendEmail
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:13:30.127

在调用之前`Get-Service`，请检查服务器是否在线。下面会发送一个 ping 看服务器是否在线，如果不在线，会跳到`$servers`. 将其放在您调用的行之前`Get-Service`。

```
if ((Test-Connection -computername $server -quiet -count 1) -eq $false) {
    continue;
} 
```

# facebook - 应用程序生成的对用户朋友的请求

> ID：15841415
> 
> 赞同：0
> 
> 时间：2013-04-05T18:55:31.247
> 
> 标签：facebook, request

Facebook 文档说我可以使用应用程序生成的请求与安装了我的应用程序的用户进行交流。是否也可以将应用生成的请求发送给该用户尚未安装我的应用的朋友？

我想我已经看到了 Farmville 等游戏提出的一些此类要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:12:20.830

我认为不可能将应用程序发送给尚未安装该应用程序的用户朋友的用户请求 -有关应用程序的更多详细信息，请参阅[https://developers.facebook.com/docs/howtos/requests/#app_to_user](https://developers.facebook.com/docs/howtos/requests/#app_to_user)对用户的要求。

[您可以做的是，通过请求对话框https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)让用户邀请他们的朋友使用您的应用程序。您可以只预选尚未安装的朋友。

# python - 如何检查变量是否为类对象

> ID：15841417
> 
> 赞同：17
> 
> 时间：2013-04-05T18:55:34.560
> 
> 标签：python, class, python-2.7

假设一个简单的类：

```
class MyClass(object):
    pass

.
.
.
m = MyClass
print type(m) # gets: <type 'classobj'>
# if m is classobj, how can i check a variable is class object? 
```

我的问题是：我如何检查一个变量是一个类对象？

一个简单的解决方案：

```
if str(type(m)) == "<type 'classobj'>":
    # do something 
```

但我认为至少有一种经典的方法可以检查这一点。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-05T19:07:15.030

使用[检查](http://docs.python.org/2/library/inspect.html#inspect.isclass)：

```
import inspect
print inspect.isclass(obj) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-05T19:00:07.827

在 2.x 中，类对象可以是 a `type`（new-style classes）或 a `classobj`（classic classes）。`type`类型是内置的，但类型`classobj`不是。那么，你如何得到它？这就是[`types`](http://docs.python.org/2/library/types.html)模块的用途。

```
isinstance(MyClass, (types.TypeType, types.ClassType)) 
```

在 3.x 中，您无需担心经典类，因此：

```
isinstance(MyClass, type) 
```

* * *

即使你想直接比较类型，你也不应该通过它们来比较*任何*对象`str`。比较：

```
>>> class MyClassicClass:
...     pass
>>> str(type(MyClassicClass)) == "<type 'classobj'>"
True
>>> str("<type 'classobj'>") == "<type 'classobj'>"
True 
```

您几乎总是可以直接比较对象：

```
>>> type(MyClassicClass) == types.ClassType
True
>>> "<type 'classobj'>" == types.ClassType
False 
```

（在极少数情况下，由于某种原因您确实需要比较字符串表示形式，您需要的是`repr`，而不是`str`。）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-05T19:06:06.047

新样式类（如您的示例中显式派生`object`，或在 Python 3 中隐式派生）不是 type `classobj`。只有旧式类是`classobj`s。因此，对于您编写的示例类，您可以简单地检查是否`MyClass`是 的实例`type`，因为所有新样式类都是：

```
isinstance(MyClass, type) 
```

因为所有新式类都派生自`object`你也可以这样做：

```
issubclass(MyClass, object) 
```

我建议不要：

```
type(MyClass) == type 
```

如果类的类型不是`type`，而是元类，这将失败。当然，尽管可能会有用例。

如果你真的需要看看你是否有一个老式的类，你可以导入`types`模块并使用`types.ClassType`，或者只是声明一个老式的类，看看你正在测试的类是否属于同一类型：

```
class OldStyleClass:
   pass
OldStyleClass = type(OldStyleClass)

isinstance(MyClass, OldStyleClass) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-05T18:58:40.597

这是你要找的吗？

```
>>> class A(object):
...    pass
>>> isinstance(A, type)
True

>>> isinstance("asd", type)
False 
```

但仅适用于从对象继承的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-19T17:39:13.690

有时下一个正在工作（如果您想确定如何打印对象）：

```
def is_class(o):
    return hasattr(o, '__dict__') 
```

# php - 用 html 表单替换 Htaccess 弹出框？

> ID：15841420
> 
> 赞同：0
> 
> 时间：2013-04-05T18:55:43.650
> 
> 标签：php, mysql, .htaccess, password-protection

我在我的网站上使用 htaccess 对目录进行了密码保护。当我输入文件夹的 URL 时，我会看到一个简单的弹出框，我可以在其中输入我的信息。一切皆好。但我真正想做的是我有一个可以登录的 html/php/mySQL 表单，而不是弹出框。有没有办法做到这一点？注意：我要保护的目录有数百个文件。

我知道如何制作表单、查询数据库，我只想用 html 表单替换弹出窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:15:10.157

*一种可能的方法...*

假设您要保护“受保护”目录。

使用`.htaccess`, 通过放置来限制对该目录的所有访问

```
Options -Indexes

# Block External Access
deny from all 
```

`.htaccess`在“受保护”目录中的文件中。

接下来，使用 RewriteRule 捕获所有 URL 到主`.htaccess`文件中的“受保护”目录。例如：

```
RewriteEngine on
RewriteRule ^protected/(.*) accessprotected.php?url=$1 
```

通常，RewriteRule 应该捕获所有进入“受保护”目录的 URL，并将它们传输到 accessprotected.php 页面。

在 accessprotected.php 页面上，检查登录状态。

```
if (isset($_SESSION['LoggedIn'])) { // or something like this
    /*
       Here, you should check what file type is being
       requested and handle this properly.
    */
} else {
    // put code for login form here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:08:53.167

如果此人未登录，您需要这样做，以便网站上的任何登录页面将您重定向回初始登录页面。此登录页面需要是 HTML 才能设置样式。

*.htaccess*控件是 Apache 的一个功能，不能使用 PHP 或 CSS 或类似的东西来设置样式。它们依靠内置的浏览器控件来返回默认对话框。

# c# - Exchange Web API 项目可以在一台电脑上工作，但不能在另一台电脑上工作？

> ID：15841421
> 
> 赞同：1
> 
> 时间：2013-04-05T18:55:44.497
> 
> 标签：c#, .net, exchangewebservices

我有一个 .NET 项目，它使用 Exchange Webservice API 来侦听 Exchange 服务器上的新邮件和任务。

我有一台新电脑，所以我想我可以将项目文件夹复制/粘贴到新电脑上，然后继续我的项目开发。但它不起作用。

目前它只是一个控制台应用程序，在旧电脑上运行时它工作正常。如果我在 SendNotification 方法（INotificationServicePortType 接口的）中放置一个断点，它会在我在 Outlook 中创建新邮件或任务时调用。在新电脑上，我可以编译并运行测试应用程序，但它不会调用 SendNotification 方法中的断点。

我尝试在新电脑上编写一些代码来使用 Webservice API 发送一封简单的邮件，并且效果很好。

我在两台电脑上都安装了 Exchange Webservice API。

我还能错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:31:20.673

权限和防火墙是要寻找的主要问题。

第 1 步是完全关闭防火墙，看看是否有任何改变。

如果没有，第 2 步是以管理员身份运行您的应用程序（关闭防火墙）。

您可能还想查看您的 Windows 事件日志，看看是否有任何消息来自您的应用程序。打开它，运行您的应用程序，然后刷新事件日志。

另一个潜在问题是以前机器上存在的库在新机器上不存在 - 或者它存在，但版本不同。

也可能是 Web 服务地址的自动发现在服务器端损坏，但您的开发机器已缓存该地址。

应该有一个随 EWS 一起安装的[Test-OutlookWebServices](http://technet.microsoft.com/en-us/library/bb124509%28v=exchg.150%29.aspx)工具。试试看它是否报告任何错误。

# php - url中的codeigniter公共目录

> ID：15841423
> 
> 赞同：1
> 
> 时间：2013-04-05T18:55:46.860
> 
> 标签：php, .htaccess, codeigniter, directory, rewrite

例如：

```
- index.php
- /system
- /application
   - /controller
      - test.php (class:test ; function index() ; echo "hi")
- /public
   - style.css 
```

我将浏览器指向[http://mysite.com/](http://mysite.com/)它会显示“hi”

如果我想要style.css，我必须指向[http://mysite.com/public/style.css](http://mysite.com/public/style.css)

但我想指出[http://mysite.com/style.css](http://mysite.com/style.css)也可以显示 style.css

我尝试在系统和应用程序之前将 index.php 移动到公共添加前缀 ../

我还在根目录中设置了一个 htaccess，然后我可以成功地将[http://mysite.com/style.css](http://mysite.com/style.css)指向style.css

但是还有另一个问题，我不能再指向我的测试控制器了，它显示错误 404

我怎样才能保留两个网址？

**更新：**

根目录中的 htaccess：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^public/.+$ - [L]

RewriteCond %{DOCUMENT_ROOT}/public/$0 -f
RewriteRule ^.+$ /public/$0 [L]

RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

当我访问[http://mysite.com/style.css](http://mysite.com/style.css)可以显示 style.css

但控制器测试不起作用，我访问[http://mysite.com/test/test/index](http://mysite.com/test/test/index)显示 404 不是“嗨”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:11:56.210

您可以使用 a 测试[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)请求的文件是否来自公共目录

```
# prevent requests for the public directory from being rewritten
RewriteRule ^public/.+$ - [L]

RewriteCond %{DOCUMENT_ROOT}/public/$0 -f
RewriteRule ^.+$ /public/$0 [L] 
```

您必须在 Codeigniter 规则之前插入此规则，否则文件可能会被重写为`/index.php/...`.

**更新**：

首先，您必须省略`RewriteCond !-f/!-d`.

的 URL`test/index`必须是`http://mysite.com/test/index`或`http://mysite.com/test`。

# php - 使用 CURL 循环的 PHP Multi XML POST

> ID：15841429
> 
> 赞同：0
> 
> 时间：2013-04-05T18:55:56.593
> 
> 标签：php, xml, post, curl, while-loop

我有多个`XML_PAYLOAD`要发布（每个 while 循环的不同 xml 帖子）。当我运行循环时，它只会`POST`显示第一个`$i`循环的数据。如何获取`POST`每个`$i`循环的新数据？

```
$i = 0;
while ($i < $num) {

...data

define("XML_PAYLOAD", "<?xml stuff and tags?>");
define("XML_POST_URL", "http://theurl");

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, XML_POST_URL);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
curl_setopt($ch, CURLOPT_POSTFIELDS, XML_PAYLOAD);

$result = curl_exec($ch);
curl_close($ch);

$i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:05:20.493

[define](http://php.net/define)定义一个常量。这意味着它一旦设置就无法更改。你应该使用这样的变量：

```
define("XML_POST_URL", "http://theurl");
$i = 0;
while ($i < $num) {

...data

$xml_payload = "<?xml stuff and tags?>";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, XML_POST_URL);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 30);
curl_setopt($ch, CURLOPT_POSTFIELDS, XML_PAYLOAD);

$result = curl_exec($ch);
curl_close($ch);

$i++;
} 
```

# cakephp - Heroku 上 CakePHP 的 SSL 重定向“重定向太多”

> ID：15841431
> 
> 赞同：2
> 
> 时间：2013-04-05T18:56:02.570
> 
> 标签：cakephp, redirect, ssl, heroku

我`[310] Too many redirects`在 heroku 上遇到错误，当我的蛋糕应用程序在使用`SecurityComponent::requireSecure()`.

```
public function beforeFilter() {
    $this->Security->blackHoleCallback = '_blackholeCallback';
    $this->Security->requireSecure('login', 'register');
}

// ...

public function _blackholeCallback($type) {
    if ($type == 'secure') {
        $this->redirect('https://' . env('SERVER_NAME') . $this->here);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T18:56:02.570

问题是 CakePHP 和 heroku 以不同的方式处理它们的安全连接。

Cake 检查环境变量“HTTPS”的真假。heroku 不提供此环境，而是发送带有“https”值的标头“X-Forwarded-Proto”。

您必须添加一个新的（或覆盖旧的“ssl”）检测器并检查此标头。我是这样做的：

```
class AppController extends Controller {

    public function beforeFilter() {
        $this->request->addDetector('ssl', array('callback' => function() {
            return CakeRequest::header('X-Forwarded-Proto') == 'https';
        }));

    // ...

    }
} 
```

希望我能帮助在我之后遇到这个问题的每个人。我花了几个小时才弄清楚这一点。

# html5-canvas - 新手在画布中不断丢失 alpha 值

> ID：15841434
> 
> 赞同：0
> 
> 时间：2013-04-05T18:56:04.303
> 
> 标签：html5-canvas, alpha

我可能在这里做了一些愚蠢的事情，但我很难让 alpha 值在 Canvas 中进行合作。我正在尝试从画布上的一个点采样不透明的颜色，使其更透明，然后将其放在另一个点上——但 alpha 部分似乎不起作用。剥离它有点像这样（从散布在脚本中的函数浓缩）：

```
p = ground.ctx.getImageData(loc.x, loc.y, 1, 1).data; 
col = {R: p[0], G: p[1], B: p[2], a: p[3]};
col.a = col.a - 0.1;
ground.ctx.fillStyle = 'rgba(' + col.R + ', ' + col.G + ', ' + col.B + ', ' + col.a + ')';
ground.ctx.fillRect(nuLoc.x, nuLoc.y, sqrSize, sqrSize); 
```

这一切都运行了，但是当我测试 fillStyle 的值时，我只得到一个标准的 RGB“#fa674c”或其他任何东西——没有提到任何 alpha——当我从新绘制的 Rect 中获取图像数据（）时，该值再次完全不透明.

我无法通过经验或阅读每个教程（和规范）来弄清楚的另一件事是 alpha 是否希望为 0-1.0 或 0-255。大多数消息来源都在谈论 0-1.0 ——但 getImageData() 返回 0-255 ......我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:15:13.250

**使用 context.globalAlpha 而不是使用 rgba 填充：**

```
p = ground.ctx.getImageData(loc.x, loc.y, 1, 1).data; 
col = {R: p[0], G: p[1], B: p[2], a: p[3]};

// note: globalAlpha uses a scale of 0-1
// and getImageData uses a scale of 0-255
ground.ctx.globalAlpha = a/255-.1;

ground.ctx.fillStyle = 'rgb(' + col.R + ', ' + col.G + ', ' + col.B + ')';
ground.ctx.fillRect(nuLoc.x, nuLoc.y, sqrSize, sqrSize);

// reset globalAlpha when you're done
ground.ctx.globalAlpha = 1; 
```

# c - SIGSEGV 错误不断出现

> ID：15841436
> 
> 赞同：0
> 
> 时间：2013-04-05T18:56:16.733
> 
> 标签：c, segmentation-fault

我尝试在 spoj.pl 上提交的每个程序都会出现此错误

在给定的代码中，我需要找到 m - n 之间的素数以表示 t no。的测试用例。问题陈述：[http](http://www.spoj.com/problems/PRIME1/) ://www.spoj.com/problems/PRIME1/ 出现同样的错误..谁能告诉我为什么这个错误再次出现..这是我的代码

```
#include<stdio.h>
#include<math.h>
#include<stdlib.h>

int main()

{
  int t;
  scanf("%d",&t);
  int *m,*n;
  m=(int *)malloc(sizeof(int)*t);
  n=(int *)malloc(sizeof(int)*t);
  int i=0;
  while(i<t)
     {
          scanf("%d%d",(m+i),(n+i));
          i++;
      }
  i=0;
  while(i<t)
    {
      long long int *list,j,k;
      list=((long long int*)malloc(sizeof(long long int)*(n[i]+1)));
      list[0]=list[1]=0;
      for(j=2;j<=*(n+i);j++)
           {
               *(list+j)=1;
           }
      float l=sqrt(*(n+i)+1);
      //int l=sqrt(*(n+i)+1);

      for(j=2;j<=l;j++)
           {
               if(*(list+j)==1)
                   {
                       //printf("\n%ld",j);
                       for(k=j*j;k<=*(n+i);k=k+j)
                           *(list+k)=0;
                    }
            }
      for(j=m[i];j<=n[i];j++)
           {
               if(*(list+j)==1)
                   {
                       printf("\n%ld",j);
                    }
            }
      printf("\n");
      free(list);
      i++;
 }
free(m);
free(n);  
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:22:27.477

首先——[你不应该强制转换 malloc——](https://stackoverflow.com/a/605858/28169)它可能会导致意外错误。

其次，没有验证您分配了所需的内存。您在三个不同的地方请求内存并且永远不会查看 malloc 是否返回 NULL 结果...如果`t`和/或`(n[i]+1)`足够大， malloc() 可能无法获得足够大的内存块来满足请求，在这种情况下，您尝试分配一个 NULL 指针并得到一个 SIGSEGV - 问题描述中给出了提示

> 警告：大量输入/输出数据，请注意某些语言（尽管如果算法设计良好，大多数应该没问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:14:56.363

似乎在我的计算机上工作正常，除了关于使用 %ld 的警告（应该使用 %lld）。将 0 作为 n[i] 的值时，我只能获得 SIGSEGV 错误。你能指出你用来产生那个错误的值吗？

编辑：您正在测试值“1 888888888 1000000000”。您的计算机根本无法分配如此大小的数组。您在内存中询问大小为 1000000001 的数组。这大约是 8GB（因为 long long int 大约是 8B，至少在我的计算机上是这样），这对您的计算机来说几乎是不可撤销的。

# curl - 使用 Selenium 检索反向链接、HTTP 代码和 IP 地址

> ID：15841438
> 
> 赞同：1
> 
> 时间：2013-04-05T18:56:38.347
> 
> 标签：curl, selenium, selenium-webdriver

我使用 Selenium 来“废弃”页面，寻找指向我网站的反向链接。我一直在使用普通的 curl 来抓取，但是 curl 不能很好地与 JavaScript 配合使用（实际上它们根本不会播放）。

我的问题是我需要从我抓取的页面中获取 HTTP 标头响应（200、301、404、503 等）代码。理想情况下，我也想获取我正在抓取的域的 IP 地址。

我在以下链接中使用 facebook php webdriver for PHP，但我找不到如何检索任何标题信息。

[https://github.com/facebook/php-webdriver](https://github.com/facebook/php-webdriver)

我的问题是，有没有办法让 Selenium 返回标头信息和/或 IP 地址？

如果您不知道该问题的答案，那么您知道抓取和/或获取 HTTP 标头的更好方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:09:26.817

Selenium 不执行 HTTP 状态代码或标头。我从未使用过它，但通常推荐的工具是[BrowserMob 代理](http://opensource.webmetrics.com/browsermob-proxy/)，由 Selenium 提交者之一创建。它捕获请求和响应，包括标头、状态代码和时间信息。

# javascript - 覆盖函数以识别任何 dom 更改，包括 jquery 等插件

> ID：15841440
> 
> 赞同：0
> 
> 时间：2013-04-05T18:56:45.387
> 
> 标签：javascript

需要覆盖哪些函数才能识别任何 DOM 内容更改（应用程序端），包括 jquery 之类的插件？不建议突变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:26:29.643

您可能想看看[这种](http://www.backalleycoder.com/2012/08/06/css-selector-listeners/)依赖 CSS 动画关键帧的技术。

如上所述，突变规范要么已弃用，要么尚未实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:02:01.883

您可以尝试使用 jQuery 本身并将处理程序绑定到`DOMSubtreeModified`事件。

```
$(document).on('DOMSubtreeModified', function() {
  console.log('changed');
}) 
```

实际上[w3.org 上有一条警告](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMSubtreeModified)说它已被弃用。不过，这是我知道的唯一方法。

# java - EJB3 的例外情况

> ID：15841441
> 
> 赞同：0
> 
> 时间：2013-04-05T18:56:47.203
> 
> 标签：java, eclipse

我在会话 bean 中使用一个方法，该方法被一个带有 IOException 的 try 和 catch bloc 包围，当我尝试从 java 项目客户端调用方法时，它看起来像一个问题，所以这是我的 bean 代码

```
package com.et;
import com.gestionfichier.gestion.*;
import java.io.IOException;
import javax.ejb.ApplicationException;
import javax.ejb.Stateless;

@Stateless
public class PremierEJB3Bean implements PremierEJB3 {

    public String envoicode(String Code)  {
       String s = null;
       try {
           s = GestionFichier.CopierCode(Code);
       } catch (IOException e) {
           e.printStackTrace();
       }
       CompilerFichierC.CompilerFichier(s,s);
       return "Compilation réussie !";
    }
} 
```

这是我的客户端 bean 代码：

```
package com.et;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

public class PremierEJB3Client {

    public static void main(String[] args)   {
        try {
           Context context = new InitialContext();
           PremierEJB3 beanRemote = (PremierEJB3)
           context.lookup("PremierEJB3Bean/remote");
           System.out.println(beanRemote.envoicode("somthing"));
       } catch (NamingException e) {
           e.printStackTrace();
       }
    }
} 
```

这就是我在控制台中得到的

```
 Exception in thread "main" java.lang.reflect.UndeclaredThrowableException
at $Proxy0.envoicode(Unknown Source)
at com.et.PremierEJB3Client.main(PremierEJB3Client.java:15)
    Caused by: java.lang.ClassNotFoundException: [Ljava.lang.StackTraceElement;
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
    And more.... 
```

所以我很确定我的 bean 中的异常导致了我这个问题，但我不知道如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T17:52:04.607

为了从独立客户端执行 EJB 的 JNDI 查找，需要添加上下文属性。

类似于下面的东西。

```
Hashtable<String, String> ht = new Hashtable<String, String>();
ht.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");
Context ct=new InitialContext(ht); 
```

# enums - 有没有办法在打字稿中创建环境枚举？

> ID：15841443
> 
> 赞同：4
> 
> 时间：2013-04-05T18:56:56.753
> 
> 标签：enums, typescript

在 typescript 0.9 发布后编辑：**现在支持枚举：**

```
enum Select { every, first, last } 
```

原始问题：

此处讨论了 typescript 中的枚举，但没有解决方案导致环境设计。环境枚举定义意味着枚举仅由编译器处理，编译后的 js 输出文件仅处理原始数值。就像在 C++11 中一样。

我得到的最接近的是

```
declare var Color = { red: 1, blue: 2, green: 3 } // DOES NOT COMPILE 
```

但编译器不接受这一点：“环境变量不能有初始化程序”。

**编辑**
合并dmck的答案：

```
declare var Color: { Red: number; Green: number; Blue: number; }; 
```

这不会输出任何 js 代码。换句话说，它是环境的。然而，这也使它无用：

```
declare var Color: { Red: number; Green: number; Blue: number; };

function test() {
  var x = Color.Blue;    // null ref exception, no Color object
  console.log(x == Color.Red);
} 
```

将产生运行时错误，因为颜色未在 js 中定义。ts 声明只是声称 js 中有一些 Color 对象，而实际上，没有定义，就没有。Ti 修复这个我们可以添加

```
var Color = {
   Red: 1,
   Green: 2,
   Blue: 3
}; 
```

但是现在枚举实现不是“环境”的，因为打字稿编译器做了 C++ 编译器所做的事情，将所有出现的枚举值减少为纯数字。**当前的环境声明允许类型检查，但不允许替换。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-29T15:41:28.507

TypeScript 0.9 允许这样做：

```
declare module A { export enum E { X, Y, Z } } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-20T12:49:51.057

添加答案，因为从 TypeScript 1.4 开始有新功能；

使用`const enum`给出预期的结果。

这是一个普通的枚举：

```
//TypeScript:
enum StandardEnum {FirstItem, SecondItem, ThirdItem};

//Compiled javascript:
var StandardEnum;
(function (StandardEnum) {
    StandardEnum[StandardEnum["FirstItem"] = 0] = "FirstItem";
    StandardEnum[StandardEnum["SecondItem"] = 1] = "SecondItem";
    StandardEnum[StandardEnum["ThirdItem"] = 2] = "ThirdItem";
})(StandardEnum || (StandardEnum = {})); 
```

这是一个常量枚举：

```
//TypeScript:
const enum ConstantEnum { FirstItem, SecondItem, ThirdItem };

//Compiled javascript:
; 
```

这篇博客文章详细解释了它：[https ://tusksoft.com/blog/posts/11/const-enums-in-typescript-1-4-and-how-they-differ-from-standard-enums](https://tusksoft.com/blog/posts/11/const-enums-in-typescript-1-4-and-how-they-differ-from-standard-enums)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T20:59:40.203

你可以这样做：

```
declare var Color: { Red: number; Green: number; Blue: number; }; 
```

请记住，设计***环境声明对代码的输出没有影响***。因此，您需要在某个地方实际声明 Color 和每个枚举成员的值。

# logic - 三开关一灯

> ID：15841450
> 
> 赞同：-1
> 
> 时间：2013-04-05T18:57:22.597
> 
> 标签：logic, state, xor, circuit-diagram

我不能 100% 确定堆栈溢出是发布此内容的正确交换；如果不是，请告诉我。

我有三个开关，都对应一个灯。当任何一个开关被翻转时，灯应该从 ON 变为 OFF 或从 OFF 变为 ON。对于这个实现，我只被允许使用 XOR 门。

画出真值表后，很明显，只有当其中一个开关处于 UP 位置时，灯才处于 ON 状态，或者三个开关都处于 UP 位置（最初三个开关都处于关闭状态）开关处于向下位置）。通过简单地对每对开关（3 对）进行异或运算，我能够推断出单开关 UP 情况下灯的新状态。但是，我不确定如何找出如何区分处于 UP 位置的所有三个开关（对应于灯亮）和处于 DOWN 位置的所有三个开关（灯熄灭）。据我了解，不可能从 XOR 门创建 AND 门，所以我被困在这里..

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:05:51.107

Let's say the three switches are A, B and C : you could try `A XOR B XOR C`.

# wordpress - 可以使用高级自定义字段构建整个站点吗？

> ID：15841451
> 
> 赞同：2
> 
> 时间：2013-04-05T18:57:23.927
> 
> 标签：wordpress, custom-fields

我正在 Wordpress 中创建一个新站点，发现这个插件非常强大，最终为网站的几乎每个部分创建了自定义字段，我什至放置了所见即所得编辑器而不是内置编辑器，因为它更容易编码我的模板。

是否可以使用高级自定义字段构建整个站点，或者将来可能会成为问题？由于网页基于静态产品数据，因此很少需要 WP 或插件更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T21:14:33.497

```
Is it ok to build an entire site with Advanced Custom Fields 
```

### 国际海事组织

使用插件构建整个站点是“好的”，但我会推荐它吗？可能不是。

唯一的原因是，如果您安装了破坏 ACF 插件的“坏”插件，您永远不知道您的网站会发生什么。

或者说出于某种奇怪的原因，他们停止为 ACF 提供支持或出于任何原因对其进行更新。我已经看到很多拥有良好支持系统的应用程序消亡或被企业集团收购，它们停止了公共开发和支持。

```
 WP or plugins updates will rarely be needed. 
```

无论您是否应该继续将您的 wordpress 更新到当前版本，您永远不会知道人们发现的安全漏洞，wordpress 核心开发人员会推出新版本来对抗这些漏洞。

这也适用于插件。

### 亲自

我喜欢自己构建东西，一般不依赖插件。

这样我就只有我需要的工具，而不是插件可能附带的额外工具。

有时几行代码可以走很长的路，而不是依赖可能有数千行代码的插件。

更不用说 wordpress 有很多原生选项可供您依赖或扩展，而不是严重依赖 ACF 或任何其他插件。

# jquery - 如何向这个 jquery ajax 函数添加加载器

> ID：15841452
> 
> 赞同：0
> 
> 时间：2013-04-05T18:57:28.100
> 
> 标签：jquery, ajax, loading, radajaxloadingpanel

我有以下 HTML

```
<a href="/loadme.html" class="next">Load this content</a>
<a href"/loadmeto.html" class="next">Load some other content</a>

<div id="ajaxcontent"></div>
<div id="ajaxloader">*obligatory animated gif*</div> 
```

下面的 jquery 在初始页面加载时首先加载一些内容，然后在单击 .next 按钮时用其他内容覆盖它：

```
// Load the default initial content 
$(document).ready(function() {
$('#ajaxcontent').load('/keyplate/1');
});

// Dynamically GET the content via Ajax
$(document).on("click", ".next", function(){
    var link = $(this).attr('href');

    $('#ajaxcontent').fadeOut('fast', function() {
        $.get(
            link +' #ajaxcontent', 
            function(data) {
                $("#ajaxcontent").html(data).fadeIn('fast');
            }, 
            "html"
        );

    });
    return false;

}); 
```

我需要一些帮助是如何显示/隐藏加载 div：

a) 最初当页面加载默认内容时；b) 随后在加载 .next href 内容时

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:20:07.517

这是我想出的有效方法，但不确定它是否如此有效-很高兴听到更好的选择:-)

```
// Load the default initial content 

$(document).ready(function() {
    $('#ajaxcontent').load('/keyplate/1');
});

$(document).ajaxComplete(function() {
    $("#ajaxloader").hide();
});

// Dynamically GET the content via Ajax
$(document).on("click", ".next", function(){
    var link = $(this).attr('href');

    $('#ajaxcontent').fadeOut('fast', function() {
        $("#ajaxloader").show();
        $.get(
            link +' #ajaxcontent', 
            function(data) {
                $("#ajaxcontent").html(data).fadeIn('fast');
            $("#ajaxloader").hide();
            }, 
            "html"
        );

    });
    return false;

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:10:24.653

尝试使用[ajaxStart()](http://api.jquery.com/ajaxStart/)和[ajaxStop()](http://api.jquery.com/ajaxStop/)方法：

HTML

```
<div id="ajaxloader">
    <img src="/images/ajax-loader.gif" alt="Loading..."/>
</div> 
```

CSS：

```
div#ajaxloader
{
    display: none;
    width:100px;
    height: 100px;
    position: fixed;
    top: 50%;
    left: 50%;
    text-align:center;
    margin-left: -50px;
    margin-top: -100px;
    z-index:2;
    overflow: auto;
} 
```

JS

```
$('#ajaxloader').ajaxStart(function () {
    $(this).fadeIn('fast');
}).ajaxStop(function () {
    $(this).stop().fadeOut('fast');
}); 
```

这将在 Ajax 请求启动时显示加载图像，并在 Ajax 请求停止时将其隐藏。

# javafx-2 - 如何定位 JavaFx 图表轴刻度线标签

> ID：15841453
> 
> 赞同：2
> 
> 时间：2013-04-05T18:57:30.357
> 
> 标签：javafx-2

我对 JavaFx 很陌生。我正在使用带有 NumberAxis 的 LineChart，并且想更改 X 轴上刻度线标签的位置，以便刻度线标签与刻度线位于同一行，并且紧邻刻度线（而不是在刻度线正下方居中）？我没有看到一个明显的方法来完成这件事。看起来除了旋转之外，无法控制刻度线标签的位置。我可以创建自己的从 ValueAxis 延伸的轴，但我仍然看不到重新定位刻度线标签的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T18:19:51.493

您必须扩展 Chart 才能做到这一点。

公共抽象类 YourCustomXYChart 扩展图表 {

# mysql - 声明变量 MySQL 触发器

> ID：15841455
> 
> 赞同：25
> 
> 时间：2013-04-05T18:57:35.023
> 
> 标签：mysql, sql, stored-procedures, triggers

如果您习惯 MySQL，我的问题对您来说可能很简单。我习惯了 PostgreSQL SGBD，我正在尝试将 PL/PgSQL 脚本转换为 MySQL。

这是我所拥有的：

```
delimiter //

CREATE TRIGGER pgl_new_user 
AFTER INSERT ON users FOR EACH ROW
BEGIN
    DECLARE m_user_team_id integer;
    SELECT id INTO m_user_team_id FROM user_teams WHERE name = "pgl_reporters";

    DECLARE m_projects_id integer;
    DECLARE cur CURSOR FOR SELECT project_id FROM user_team_project_relationships WHERE user_team_id = m_user_team_id;

    OPEN cur;
        ins_loop: LOOP
            FETCH cur INTO m_projects_id;
            IF done THEN
                LEAVE ins_loop;
            END IF;
            INSERT INTO users_projects (user_id, project_id, created_at, updated_at, project_access) 
            VALUES (NEW.id, m_projects_id, now(), now(), 20);
        END LOOP;
    CLOSE cur;
END// 
```

但是 MySQL Workbench 给了我一个错误`DECLARE m_projects_id`。我真的不明白，因为我在上面两行有相同的指令......

有什么提示吗？

编辑：neubert 解决了这个错误。谢谢。

但是，当我尝试插入用户时：

```
Error Code: 1329\. No data - zero rows fetched, selected, or processed 
```

你有什么主意吗 ？或者更好，你知道我怎样才能得到更好的错误信息吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-05T19:02:30.053

所有 DECLARE 都必须位于顶部。IE。

```
delimiter //

CREATE TRIGGER pgl_new_user 
AFTER INSERT ON users FOR EACH ROW
BEGIN
    DECLARE m_user_team_id integer;
    DECLARE m_projects_id integer;
    DECLARE cur CURSOR FOR SELECT project_id FROM user_team_project_relationships WHERE user_team_id = m_user_team_id;

    SET @m_user_team_id := (SELECT id FROM user_teams WHERE name = "pgl_reporters");

    OPEN cur;
        ins_loop: LOOP
            FETCH cur INTO m_projects_id;
            IF done THEN
                LEAVE ins_loop;
            END IF;
            INSERT INTO users_projects (user_id, project_id, created_at, updated_at, project_access) 
            VALUES (NEW.id, m_projects_id, now(), now(), 20);
        END LOOP;
    CLOSE cur;
END// 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:19:01.140

同意 neubert 关于 DECLARE 语句，这将修复语法错误。但我建议您避免使用打开游标，它们可能会很慢。

对于您的任务：使用 INSERT...SELECT 语句，这将帮助您仅使用一个查询将数据从一个表复制到另一个表。

[插入...选择语法](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)。

# ios - 如何访问 Monotouch 6.2 (Xamarin.iOS) 中 DidReceiveMemoryWarning 中的当前内存警告级别？

> ID：15841459
> 
> 赞同：2
> 
> 时间：2013-04-05T18:57:59.217
> 
> 标签：ios, xamarin.ios, didreceivememorywarning

我想知道如何在使用 iOS6 的 Monotouch 6.2（现在称为 Xamarin.iOS）中以编程方式访问 DidReceiveMemoryWarning 中的当前内存警告级别。

另外，有多少个内存警告级别？

这样做的原因是我想查看警告的严重性，并相应地在释放内存资源时做必要的事情。

如果有一种方法可以使用 Objective C 来实现，我可能会在 Monotouch 中找到等效的方法。我在 Monotouch 文档中没有找到任何关于此的内容。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T22:38:50.657

可能只有一个警告，也可能是无限量。

如果您收到警告并且没有释放任何东西，那么您的应用很可能会在您获得另一个应用之前被杀死。如果您释放内存，然后再次使用它，您可能会收到另一个警告，并且这可能会无限期地持续下去。

当您收到内存警告时，您应该尽可能多地释放内存，没有办法知道 iOS 实际需要多少内存，因此请谨慎行事并尽可能多地清理。

# java - java.io.FileNotFoundException:(系统找不到指定的路径)机器移动后

> ID：15841463
> 
> 赞同：0
> 
> 时间：2013-04-05T18:58:17.770
> 
> 标签：java, svn, netbeans

我正在我的笔记本电脑上开发一个应用程序，使用 java.net 上的 subversion 备份项目，将其下载到我的桌​​面上继续工作，我现在收到此错误：

```
java.io.FileNotFoundException: D:\My Documents\NetBeansProjects\printing~subversion\fileupload\buildweb\resources\Directory Files\directoryFiles.txt (The system cannot find the path specified) 
```

但是，如果您将路径粘贴到 Windows 文件资源管理器中，它会按原样打开文件。

这是如何引起的，我该如何解决？

# delphi - 从 ListBox 到 DataSet 的数据

> ID：15841465
> 
> 赞同：0
> 
> 时间：2013-04-05T18:58:19.703
> 
> 标签：delphi, listbox, dataset

我有`DBGrid`我将名称从`DataSetPeople`关联加载到`table_people`. 我创建了一个拖放过程，用户可以在其中将名称拖放到`ListBox`. 用户可以放入 a`listbox_employees`或`listbox_manager`。

**我的问题**

`table_people`我想通过使用用户在两个列表框中放置的名称来创建人与人之间的关系。我创建`table_relationship`where `employeeID`match with `managerID`。

那么，如何从 each 中获取名称`listbox`，将此名称与 ID 相关联，并将此 ID 放入 a`employeeID`或`managerID`from `DataSetRelationship`associated to 中`table_relationship`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:55:16.957

如果您的 ID 是数字（整数）值，您可以`TListBox.Items.Objects`在填写时使用 来存储它（在表单上的 drop 事件处理程序中）：

```
var
  PersonName: string;
  PersonID: Integer;
begin
  with YourDataModule do  // Gives access to the tables in the data module
  begin
    PersonName := table_people.FieldByName('employeeName').AsString;
    PersonID   := table_people.FieldByName('employeeID').AsInteger);
  end;
  listbox_employees.Items.AddObject(PersonName, TObject(PersonID);
end; 
```

对于经理，只需更改为经理的列表框和经理的字段值。

要获取 ID 以用于`INSERT`语句：

```
// Make sure both listboxes have the same number of items, of course.
var
  EmployeeID: Integer;
  ManagerID: Integer;
  i: Integer;
begin
  for i := 0 to ListBox_Employees.Items.Count - 1 do
  begin
    EmployeeID := Integer(ListBox_Employees.Items.Objects[i]);
    ManagerID := Integer(ListBox_Manager.Items.Objects[i]);
    if not YourDataModule.MakeRelationship(EmployeeID, ManagerID) then
      ShowMessage('Unable to relate this employee and manager!');
  end;
end;

// If you're using a SQL query, the `INSERT` should be created like this
// somewhere, like in your datamodule's OnCreate event
//   qryRelationShips.SQL.Clear;
//   qryRelationShips.SQL.Add('INSERT INTO table_relationship (employeeID, managerID)');
//   qryRelationShips.SQL.Add('VALUES (:employeeID, :managerID)';
//
// Or you can type it into the SQL property in the Object Inspector at designtime 
//   INSERT INTO table_relationship (employeeID, managerID) VALUES (:employeeID, :managerID)

function TYourDataModule.MakeRelationship(const EmpID, MgrID: Integer):  Boolean;
begin
  Result := False;
  // INSERT into your dataset:
  qryRelationShips.ParamByName('employeeID').AsInteger := EmpID;
  qryRelationShips.ParamByName('managerID').AsInteger := MgrID;
  try
    qryRelationShips.ExecSQL;
    Result := qryRelationShips.RowsAffected;
  finally
    qryRelationShips.Close;
  end;
end;

// If you're using a table instead of a query, getting a result is harder
function TYourDataModule.MakeRelationship(const EmpID, MgrID: Integer):  Boolean;
begin
  Result := True;
  try
    tblRelationShips.Insert;
    tblRelationShips.FieldByName('employeeID').AsInteger := EmpID;
    tblRelationShips.FieldByName('managerID').AsInteger := MgrID;
    tblRelationShips.Post;
  except
    Result := False;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:06:10.293

我希望你已经使用 SQLite 数据库制作了表格。因此，您可以通过使用查询插入行来实现。使用 db.execSQL(); 您可以保留一个计数器来增加 id 值。

# c# - oracle mdsys.vertex_set_type 自定义映射 c#

> ID：15841468
> 
> 赞同：0
> 
> 时间：2013-04-05T18:58:27.903
> 
> 标签：c#, oracle

我正在开发适用于 oracle 数据库的 ac# 应用程序。我正在使用 oracle.dataaccess 提供程序。但是当我尝试运行这个查询时：

```
select sdo_util.getVertices(sdo_geom.sdo_intersection(geo1,geo2,0.005))
from geotable1
where sdo_anyinteract(geo1,geo2) = 'TRUE' and id1 = 59 
```

ID 号仅作为示例。此查询的结果符合 Oracle 规范 MDSYS.VERTEX_SET_TYPE，它由一个 VERTEX_TYPE 对象表组成。

这是第一个问题。当我尝试通过 oracle.dataaccess 提供程序运行此查询时，我收到错误“'dataSource='...' schemaName='MDSYS' typeName='VERTEX_SET_TYPE'' 的自定义类型映射未指定或无效。我已搜索对于解决方案，它应该实现这个自定义映射，但没有成功。

所以我试图由我来实现这一点。这是代码：

```
[OracleCustomTypeMappingAttribute("MDSYS.VERTEX_SET_TYPE")]
public class VertexSetType : OracleCustomTypeBase<VertexSetType>
{

    private enum OracleObjectColumns { VERTEX_TYPE }

    private List<VertexType> vertexType;

    [OracleObjectMappingAttribute(0)]
    public List<VertexType> VertexType
    {
        get { return vertexType; }
        set { vertexType = value; }
    }

    public override void MapFromCustomObject()
    {
        SetValue((int)OracleObjectColumns.VERTEX_TYPE, VertexType);
    }

    public override void MapToCustomObject()
    {
        VertexType = GetValue<List<VertexType>>((int)OracleObjectColumns.VERTEX_TYPE);
    }
} 
```

我定义的 VertexType 为：

```
[OracleCustomTypeMappingAttribute("MDSYS.VERTEX_TYPE")]
public class VertexType : OracleCustomTypeBase<VertexType>
{

    private enum OracleObjectColumns { X, Y, Z, W, ID }

    private decimal? x;

    [OracleObjectMappingAttribute(0)]
    public decimal? X
    {
        get { return x; }
        set { x = value; }
    }

    private decimal? y;

    [OracleObjectMappingAttribute(0)]
    public decimal? Y
    {
        get { return y; }
        set { y = value; }
    }

    private decimal? z;

    [OracleObjectMappingAttribute(0)]
    public decimal? Z
    {
        get { return z; }
        set { z = value; }
    }

    private decimal? w;

    [OracleObjectMappingAttribute(0)]
    public decimal? W
    {
        get { return w; }
        set { w = value; }
    }

    private decimal? id;

    [OracleObjectMappingAttribute(0)]
    public decimal? Id
    {
        get { return id; }
        set { id = value; }
    }

    public override void MapFromCustomObject()
    {
        SetValue((int)OracleObjectColumns.X, x);
        SetValue((int)OracleObjectColumns.Y, y);
        SetValue((int)OracleObjectColumns.Z, z);
        SetValue((int)OracleObjectColumns.W, w);
        SetValue((int)OracleObjectColumns.ID, id);
    }

    public override void MapToCustomObject()
    {
        X = GetValue<decimal?>((int)OracleObjectColumns.X);
        Y = GetValue<decimal?>((int)OracleObjectColumns.Y);
        Z = GetValue<decimal?>((int)OracleObjectColumns.Z);
        W = GetValue<decimal?>((int)OracleObjectColumns.W);
        Id = GetValue<decimal?>((int)OracleObjectColumns.ID);
    }

} 
```

但是当我再次运行查询时，我得到了错误：

> 无法将“spatial.VertexSetType”类型的对象转换为“Oracle.DataAccess.Types.IOracleArrayTypeFactory”类型。

由于 oracle 数据类型的 c# 自定义映射非常少，我无法摆脱这种情况。所以，如果有人应该提供帮助，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:52:37.953

没关系，我自己修好了。MDSYS.VERTEX_SET_TYPE 应该定义为简单的 Oracle 数组，包含 VertexType 对象。

```
[OracleCustomTypeMappingAttribute("MDSYS.VERTEX_SET_TYPE")]
public class VertexSetType : OracleArrayTypeFactoryBase<VertexType> { } 
```

# c# - 从 C# 调用类 ASP Web 服务

> ID：15841472
> 
> 赞同：0
> 
> 时间：2013-04-05T18:58:43.523
> 
> 标签：c#, class, asp-classic, biztalk

我有一个似乎是用经典 asp 编写的 web 服务，因为它的 url 看起来像这样：[http ://www.example.com/xmlrequest.asp](http://www.example.com/xmlrequest.asp)

我有一些通过附加 URL 参数 ?xml="actualxml" 来调用此服务的 Java 代码。

如何通过调用 xml 作为查询字符串参数在 C# 中实现这一点？

# visual-studio-2010 - Microsoft Coded UI Test 需要很长时间才能刷新带有级联下拉列表的页面

> ID：15841477
> 
> 赞同：1
> 
> 时间：2013-04-05T18:59:29.227
> 
> 标签：visual-studio-2010, coded-ui-tests, cascadingdropdown

不幸的是，我无法发布任何源代码，但我已经在多个网站上看到了这种行为。

我有一个包含 3 个下拉菜单的页面。第一个下拉将填充第二个，第二个填充第三个。

每个下拉菜单都会启动一个回发。在定期浏览该网站时，它运行得非常快，没有任何障碍。但是，在 Coded UI 测试中，每次选择后加载页面需要很长时间。我猜自从页面回发以来，测试在继续之前必须做一些*事情。*

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T11:14:39.070

I think this behavior occurs because `CodedUI Tests` are collecting many data from the pc they are executed.

I suggest you to disable all `Data and Diagnostics`, by [editing the TestSettings](http://msdn.microsoft.com/en-us/library/vstudio/ee256991%28v=vs.100%29.aspx#CreateLocal) file.

Then, if your tests are running faster try to find the balance between the Data you want to collect and the test's optimization.

# c - C 编译器重定位与另一个变量重叠的指针

> ID：15841478
> 
> 赞同：0
> 
> 时间：2013-04-05T18:59:41.797
> 
> 标签：c

我正在做一些实验来看看 C 如何在堆栈上分配变量。以下代码出现了一些奇怪的行为。C 似乎正在向下增长堆栈，因此在以下示例中，字符 c 分配在紧接在 short s 之前的字节中。然后我创建一个 int 指针`bigRandP`并将其指向 c 占用的同一位置，因此它看到的“int”与 s 占用的堆栈空间重叠。然后我尝试为 int 指针引用的位置分配一些东西。

```
unsigned short nameSum = 0;
unsigned char smallRand = 0;
unsigned int* bigRandP;

//The "int" pointed to by iP should overlap s
bigRandP = (unsigned int*)(&smallRand);
printf("%p %p %p\n", &nameSum, &smallRand, bigRandP);
printf("%u %u %u\n", smallRand, nameSum, *bigRandP);
*bigRandP = 0;
printf("%p %p %p\n", &nameSum, &smallRand, bigRandP);
printf("%u %u %u\n", smallRand, nameSum, *bigRandP);

0028FF1A 0028FF19 0028FF19
0 0 419430400
0028FF1A 0028FF19 0028FF00
0 0 4210788 
```

打印的结果很有趣。不仅分配失败（bigRandP 指向的 int 未设置为 0），而且 int 指针本身被静默地*重新定位*以指向堆栈下方的其他位置。到底是怎么回事？这是 C 编译器阻止我用重叠指针覆盖其他变量的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:05:05.027

`bigRandP`是指向 的指针`unsigned int`。

你把它指向一个`unsigned char`对象，然后你*修改*了指向的`unsigned int`对象。`bigRandP`

显然`smallRand`，并且`bigRandP`彼此靠近存储在内存中。通过尝试修改`sizeof (unsigned int)`1 字节对象的字节，您破坏了指针对象本身的一部分。

底线：您的程序的行为未定义。

此外，虽然这可能与您看到的行为无关，但`%p`格式需要一个`void*`参数。如果要打印其他类型的指针，应将其转换为`void*`：

```
printf("%p %p %p\n", (void*)&nameSum, (void*)&smallRand, (void*)bigRandP); 
```

在所有指针具有相同表示的系统上，无论是否使用强制转换，它都可能“工作”，但具有强制转换的版本在所有系统上都更正确。

# android - Android错误膨胀类com.actionbarsherlock.internal.widget.ActionBarContainer

> ID：15841479
> 
> 赞同：0
> 
> 时间：2013-04-05T18:59:44.580
> 
> 标签：android, actionbarsherlock, inflate

最近我在我的 android 项目中添加了 ActionBarSherlock。添加它并在 AVD 4.1 版上测试应用程序后一切正常，但在 2.3.3 版启动应用程序在 setContentView 启动活动时会出现下一种错误：

```
> 04-05 18:55:03.277: E/AndroidRuntime(659): FATAL EXCEPTION: main
04-05 18:55:03.277: E/AndroidRuntime(659): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.fitness.calculator/com.fitness.calculator.ProportionsActivity}: android.view.InflateException: Binary XML file line #26: Error inflating class com.actionbarsherlock.internal.widget.ActionBarContainer
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.os.Looper.loop(Looper.java:123)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-05 18:55:03.277: E/AndroidRuntime(659):  at java.lang.reflect.Method.invokeNative(Native Method)
04-05 18:55:03.277: E/AndroidRuntime(659):  at java.lang.reflect.Method.invoke(Method.java:507)
04-05 18:55:03.277: E/AndroidRuntime(659):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-05 18:55:03.277: E/AndroidRuntime(659):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-05 18:55:03.277: E/AndroidRuntime(659):  at dalvik.system.NativeStart.main(Native Method)
04-05 18:55:03.277: E/AndroidRuntime(659): Caused by: android.view.InflateException: Binary XML file line #26: Error inflating class com.actionbarsherlock.internal.widget.ActionBarContainer
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-05 18:55:03.277: E/AndroidRuntime(659):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(ActionBarSherlockCompat.java:1045)
04-05 18:55:03.277: E/AndroidRuntime(659):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(ActionBarSherlockCompat.java:915)
04-05 18:55:03.277: E/AndroidRuntime(659):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:849)
04-05 18:55:03.277: E/AndroidRuntime(659):  at com.actionbarsherlock.app.SherlockActivity.setContentView(SherlockActivity.java:229)
04-05 18:55:03.277: E/AndroidRuntime(659):  at com.fitness.calculator.MainMenuActivity.onCreate(MainMenuActivity.java:45)
04-05 18:55:03.277: E/AndroidRuntime(659):  at com.fitness.calculator.ProportionsActivity.onCreate(ProportionsActivity.java:90)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-05 18:55:03.277: E/AndroidRuntime(659):  ... 11 more
04-05 18:55:03.277: E/AndroidRuntime(659): Caused by: java.lang.reflect.InvocationTargetException
04-05 18:55:03.277: E/AndroidRuntime(659):  at java.lang.reflect.Constructor.constructNative(Native Method)
04-05 18:55:03.277: E/AndroidRuntime(659):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
04-05 18:55:03.277: E/AndroidRuntime(659):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
04-05 18:55:03.277: E/AndroidRuntime(659):  ... 24 more
04-05 18:55:03.277: E/AndroidRuntime(659): Caused by: java.lang.NoSuchMethodError: com.actionbarsherlock.internal.widget.ActionBarContainer.setBackground
04-05 18:55:03.277: E/AndroidRuntime(659):  at com.actionbarsherlock.internal.widget.ActionBarContainer.<init>(ActionBarContainer.java:58)
04-05 18:55:03.277: E/AndroidRuntime(659):  ... 27 more 
```

有谁知道什么可能导致这种类型的错误？有任何想法吗？我找不到这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:39:44.033

我通过重新添加 clear ActionBarSherlock 库解决了这个问题。我第一次修复了库中的所有警告，这导致了问题。所以不要试图修复 ActionBarSherlock 中的警告。希望这会对某人有所帮助。

# php - php：array（）和{}之间的不同

> ID：15841484
> 
> 赞同：-1
> 
> 时间：2013-04-05T19:00:04.270
> 
> 标签：php, arrays, data-structures

有什么不同

```
Array
    (
        [user_id] => 1
        [username] => user
        [first_name] => hello
        [last_name] => world
    ) 
```

和

```
{
    user_id: "1",
    username:"user",
    first_name:"hello",
    last_name:"world"
} 
```

? 以及如何在 php 中转换它们？

编辑：添加详细信息

实际上我正在使用 redis zunionstore 和 zrevrange 来组合用户数据。结果返回给我类似的东西：

```
Array
(
    [0] =>{"user_id":"1","username":"user","first_name:hello","last_name:world"}
    [1] => ...
) 
```

由于我必须处理数据，我想要这样的东西：

```
Array
(
    [0] => Array
        (
            [user_id] => 1
            [username] => user
            [first_name] => hello
            [last_name] => world
        )
 ...
) 
```

那么有没有简单的方法来转换它而不是使用 for 循环来 json_decode 每个元素？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:01:11.873

第一个字符串是`print_r`函数的输出。例子：

```
$array=array('key'=>'value');
print_r($array); 
```

输出：

```
Array
(
    [key] => value
) 
```

你的第二个是类似 JSON 的，但它缺少键的双引号。
您**不能**直接转换它们。

`json_decode`如果您的第二个字符串是这样的，您可以将 JSON 转换为 PHP 数组：

```
{
    "user_id": "1",
    "username":"user"
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:02:03.263

如前所述，第一个是 PHP，第二个是 JavaScript 数组。

要将数组转换为 JSON，请使用`json_encode()`;

* * *

将 JavaScript 数组转换为 JSON 文本，然后再转换为 PHP 数组（关联）；使用`JSON.stringify()`和`json_decode()`。

* * *

对于您的任务，最好的选择是`array_walk`函数：

```
array_walk( "json_decode", $MyArry ); 
```

# websphere-portal - Websphere 门户停用门户页面

> ID：15841487
> 
> 赞同：0
> 
> 时间：2013-04-05T19:00:11.727
> 
> 标签：websphere-portal

当我启动 Websphere Portal 控制台并转到管理页面时，我看到一大堆处于活动状态的门户页面。基本上，这些是 IBM 内部的 portlet 页面。我不使用它们。有什么方法可以安全地停用这些 portlet 中的至少一些？目标是节省门户服务器的启动时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:54:53.113

有几种选择。第一个链接是 Portal light 模式，第二个是开发者模式。两者都做类似的事情，但开发者模式在启动时加载的东西更少。

此外，激活或禁用页面不应影响启动时间。不过，防止 portlet 应用程序在启动时启动会有所帮助。您在问题中使用了这两个术语，所以我想确保这一点很清楚，并且您不会禁用期望改进的页面。

[http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+8+Product+Documentation#action=openDocument&res_title=Using_portal_light_mode_wp8&content=pdcontent](http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+8+Product+Documentation#action=openDocument&res_title=Using_portal_light_mode_wp8&content=pdcontent)

[http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+8+Product+Documentation#action=openDocument&res_title=Changing_to_developer_mode_wp8&content=pdcontent](http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM+WebSphere+Portal+8+Product+Documentation#action=openDocument&res_title=Changing_to_developer_mode_wp8&content=pdcontent)

# mysql - Grails 事务永远不会完成

> ID：15841489
> 
> 赞同：0
> 
> 时间：2013-04-05T19:00:15.910
> 
> 标签：mysql, grails, transactions, grails-orm, grails-2.0

考虑下面的代码，它尝试`SerpKeyword`在事务中创建一个新的并打印到控制台以显示它在哪里。

```
 if (!serpKeyword) {
        println "I DIDN'T FIND THE KEYWORD!"
        SerpKeyword.withNewTransaction {
            println "SO NOW I'M BEGINNING A TRANSACTION"
            serpKeyword = new SerpKeyword(
                    keyword: searchKeyword,
                    geoKeyword: geoKeyword,
                    concatenation: concatenation,
                    locale: locale
            )
            println "NOW I'LL SAVE THE KEYWORD"
            serpKeyword.save(failOnError: true, flush: true)
            println "AND NOW THE KEYWORD IS SAVED"
        }
    } 
```

我马上看到的控制台输出是：

```
I DIDN'T FIND THE KEYWORD!
SO NOW I'M BEGINNING A TRANSACTION
NOW I'LL SAVE THE KEYWORD 
```

我从来没有看到我的输出的最后一行，表明记录永远不会保存。我已经尝试过这个有和没有我传入的选项`save`。无论如何，它只是挂了一段时间，最终我得到了这个堆栈跟踪：

```
Got error -1 from storage engine. Stacktrace follows:
java.sql.SQLException: Got error -1 from storage engine
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3491)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3423)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2019)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1937)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1922)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at com.reachlocal.grails.sales.AdvertiserConnectionService$_findOrCreateSerpKeyword_closure9$$EO2A9QHA.doCall(AdvertiserConnectionService.groovy:624)
    at org.grails.datastore.gorm.GormStaticApi.withNewTransaction(GormStaticApi.groovy:696)
    at com.reachlocal.grails.sales.AdvertiserConnectionService$$EO2A9QHA.findOrCreateSerpKeyword(AdvertiserConnectionService.groovy:615)
    at com.reachlocal.grails.sales.AdvertiserConnectionService$$EO2A9QHA.createSerpEntryForKeyword(AdvertiserConnectionService.groovy:659)
    at com.reachlocal.grails.sales.AdvertiserConnectionService$$EO2A9QHA.addKeyword(AdvertiserConnectionService.groovy:51)
    at com.reachlocal.grails.serp.SerpController$_closure9.doCall(SerpController.groovy:77)
    at grails.plugin.cache.web.filter.PageFragmentCachingFilter.doFilter(PageFragmentCachingFilter.java:195)
    at grails.plugin.cache.web.filter.AbstractFilter.doFilter(AbstractFilter.java:63)
    at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:65)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680) 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:57:04.123

由于以下几个原因，您可能会收到“存储引擎出现错误 -1”：

1.  您的数据库磁盘空间不足
2.  `innodb_force_recovery`您的 my.cnf 文件中有开关
3.  MySQL 表空间 ID 不匹配。

解决此问题的最佳方法是查看[MySQL 错误日志](http://dev.mysql.com/doc/refman/5.1/en/error-log.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T03:48:09.967

您是否将 id 生成策略设置为域类中的`assigned`a 以外的任何内容？`sequence/auto``serpKeyword`

如果您也可以在帖子中添加域类，这将有助于调试。

# c# - 如何在 NHibernate 中的会话之间复制对象

> ID：15841491
> 
> 赞同：0
> 
> 时间：2013-04-05T19:00:19.667
> 
> 标签：c#, mysql, sqlite, nhibernate

我想将我的实体从 MySQL 数据库复制到全新的 SQLite 数据库（导出）。我有以下代码：

```
IEnumerable<Foo> fooList;
using (var sf = CreateMySqlSessionFactory("user", "password"))
using (var source = sf.OpenSession())
using (var sf2 = Class1.CreateSqliteSessionFactory(outputPath))
using (var dest = sf2.OpenSession())
{
     fooList = source.Query<Foo>();
     foreach (var foo in fooList)
     {
         dest.SaveOrUpdate(foo);
     }
     dest.Flush();
} 
```

两个会话工厂的创建都没有问题。不幸的是 SaveOrUpdate 抛出 LazyInitializationException 并带有消息：

*非法尝试将代理与两个打开的会话相关联*

我知道这两个会话都是开放的，但我找不到任何巧妙的解决方案。我唯一能找到的是关于深度克隆每个 foo，这太麻烦了（foo 具有 bar 对象的属性，它具有 boo 对象的另一个属性等）。

如何使用 NHibernate 执行这样的批量复制？请注意，源数据库和目标数据库的架构不同。我使用不同的映射来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:04:20.970

您是否尝试过使用以下方法从会话中分离 foo：

```
source.Evict(foo) 
```

# gwt - 无法在 Eclipse 中使用 GWTQuery 编译 GWT 项目

> ID：15841494
> 
> 赞同：1
> 
> 时间：2013-04-05T19:00:29.580
> 
> 标签：gwt, gwtquery, gquery

我正在尝试在 GWT 项目中开始使用 GWTQuery。

*   我在 Eclipse 中创建了示例 GWT 项目
*   将 gwtquery-1.3.2.jar 添加到 war/WEB-INF/lib
*   编辑了 Myproject.gwt.xml（添加了 <inherits name='com.google.gwt.query.Query'/>）

当我编译项目时，它会写入很多延迟错误，但最后会出现：

```
 Scanning for additional dependencies: jar:file:/C:/eclipseBacklog/Backlog/war/WEB-INF/lib/gwtquery-1.3.2.jar!/com/google/gwt/query/client/GQuery.java
      Computing all possible rebind results for 'com.google.gwt.query.client.GQuery'
         Rebinding com.google.gwt.query.client.GQuery
            Checking rule <replace-with class='com.google.gwt.query.client.impl.SelectorEngineNativeIE8'/>
               [ERROR] Errors in 'jar:file:/C:/eclipseBacklog/Backlog/war/WEB-INF/lib/gwtquery-1.3.2.jar!/com/google/gwt/query/client/Properties.java'
                  [ERROR] Line 20: The import com.google.gwt.core.shared cannot be resolved
                  [ERROR] Line 39: GWT cannot be resolved
               [ERROR] Unable to find type 'com.google.gwt.query.client.GQuery'
                  [ERROR] Hint: Previous compiler errors may have made this type unavailable
                  [ERROR] Hint: Check the inheritance chain from your module; it may not be inheriting a required module or a module may not be adding its source path entries properly
   [ERROR] Errors in 'jar:file:/C:/eclipseBacklog/Backlog/war/WEB-INF/lib/gwtquery-1.3.2.jar!/com/google/gwt/query/client/GQuery.java'
      [ERROR] Line 1483:  Failed to resolve 'com.google.gwt.query.client.GQuery' via deferred binding 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:24:46.183

检查您的 gwt 版本，您必须更新到 GWT-2.5.x。因为这个 gquery 的工件对它有不希望的依赖。2.5有两个`GWT.java`类，gquery`com.google.gwt.core.shared`错误的依赖新的。

在 gwtquery 站点上打开一个问题，因为此版本也应该适用于较旧的 gwt 版本。

您还可以将 gquery 版本更改为 1.3.1 或 1.4.0-SNAPSHOT

**更新：**我刚刚[弃用了 1.3.2 版本](https://code.google.com/p/gwtquery/wiki/Downloads)，并发布了[1.3.3](http://repo1.maven.org/maven2/com/googlecode/gwtquery/gwtquery/1.3.3/gwtquery-1.3.3.jar)版本，它与以前的 gwt 版本一起编译

# c++ - c++中extern的使用

> ID：15841495
> 
> 赞同：16
> 
> 时间：2013-04-05T19:00:33.860
> 
> 标签：c++, extern

我很难理解“外部”是如何工作的。我搜索了谷歌，但似乎没有我正在尝试的特定示例

如果我有一个引用 one.h 的文件 main.cpp 并且在其中我有一个名为 LIST1 的列表（它是一个 100 x 100 的双精度数组），那么我有一个双精度 List1[100][100];

请问如何在 one.cpp 中使用此列表？

```
extern double LIST1[100][100] 
```

不管用 ：/

主.cpp：

```
#include "one.h"

extern double LIST1[100][100]; 
```

一个.cpp：

```
void one::useList()
{
for(j = 0; j < 100; j++)
   {
     for(i = 0; i < 100; i++)
    {
         LIST1[j,i] = 0.5;
    }
 }
} 
```

这就是我所拥有的。

我得到的错误：

> 1>main.obj : 错误 LNK2001: 无法解析的外部符号 "double (* LIST1)[100]" (?LIST1@@3PAY0GE@NA)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-05T19:05:29.903

A variable declaration at namespace scope is always a definition *unless* you put `extern` on it; then it's just a declaration.

An important rule in C++ is that you can't have multiple definitions of objects with the same name. If your header file just contained `double LIST1[100][100];`, this would work as long as you only ever included it in one translation unit. But as soon as you include the header file in multiple translation units, you have multiple definitions of `LIST1`. You've broken the rule!

So to have a global variable accessible from multiple translation units, you need to make sure there is only a declaration in the header file. We do this with `extern`:

```
extern double LIST1[100][100]; 
```

However, you cannot just include the header and try to use this object because there isn't a definition yet. This `LIST1` declaration just says that an array of this type exists somewhere, but we actually need to define it to create the object. So in a single translation unit (one of your `.cpp` files usually), you will need to put:

```
double LIST1[100][100]; 
```

Now, each of your `.cpp` files can include the header file and only ever get the declaration. It's perfectly fine to have multiple declarations across your program. Only *one* of your `.cpp` files will have this definition.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-05T19:04:57.040

In C++, like C before it, each source file is compiled to an object file. Then all the object files are linked to create the executable program.

To share symbols (functions, global variables), there are several keywords that tell the compiler which are local to the file, which are private, and which are imported from other file.

The `extern' keyword means that a symbol can be accessed, but not defined. It should be defined (as a global) in some other module. If not, you get an 'undefined symbol' error at link time.

# java - JFrame 组件能够通过重绘调用paintComponent，尽管使用了flowlayout

> ID：15841496
> 
> 赞同：1
> 
> 时间：2013-04-05T19:00:35.263
> 
> 标签：java, swing, concurrency, jframe, paintcomponent

我在 FlowLayout 中有一个 JFrame，其中添加了多个 JLabel，但是当我在 JLabels 上调用 repaint 时，没有调用它们的 paintComponent。如果我删除 FlowLayout，则只有最后添加的 JLabel 会显示并正确重绘。我尝试使用面板，但它不起作用。我不确定我是否正确使用它。

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.Toolkit;
import javax.swing.JFrame;

public class RacingLetters {

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {
            public void run() {
                final JFrame jframe = new JFrame();
                jframe.setTitle("Racing letters");
                jframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                //jframe.setExtendedState(Frame.MAXIMIZED_BOTH);
                Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();
                int x = (int) ((dimension.getWidth() - jframe.getWidth()) / 2);
                int y = (int) ((dimension.getHeight() - jframe.getHeight()) / 2);
                jframe.setLocation(x, y);
                jframe.setMinimumSize(new Dimension(500, 200));
                FlowLayout fl = new FlowLayout();
                jframe.setLayout(fl);
                //jframe.setLayout(null);
                jframe.setVisible(true);    

                StringBuffer[] stringBufferArray = new StringBuffer[20];
                char ch = 'A';

                int yy = 20;
                for (int i = 0; i < 5; i++) {
                    stringBufferArray[i] = new StringBuffer("");
                    BufferThread bt = new BufferThread(stringBufferArray[i], ch, 10, yy);
                    //pane.add(bt);
                    jframe.add(bt);

                    new Thread(bt).start();
                    ch++;
                    yy += 20;
                }

            }
        });

    }
} 
```

..

```
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.util.Random;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JLabel;

public class BufferThread extends JLabel implements Runnable {

    char ch;
    StringBuffer sb;
    int x,y;

    BufferThread(StringBuffer sb, char ch,int x, int y) {
        this.sb = sb;
        this.ch = ch;
        this.x = x;
        this.y = y;
    }

    @Override
    public void run() {
        Random rand = new Random();

        for (int i = 0; i < 5; i++) {
            sb.append(ch);
            System.out.println(x + " " + y + " " + ch);
            repaint();

            try {
                Thread.sleep(rand.nextInt(500));
            } catch (InterruptedException ex) {
                Logger.getLogger(BufferThread.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }

    public void paintComponent(Graphics g) {
        //System.out.println(x + " " + y + " " + ch);
        //System.out.println("aaaa");
        //stem.out.println(sb);
        Graphics2D g2 = (Graphics2D) g;

        Font f = new Font("Serif", Font.PLAIN, 24);
        //if (sb.toString().indexOf("E") < 0)
            g2.drawString(sb.toString(), x, y);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:59:30.693

核心问题是`JLabel`没有向框架的布局管理器提供任何关于它想要多大的信息。它实际上也没有告诉框架的布局管理器它已更新并且需要调整大小。

为什么你试图在标签上绘制文本超出了我的理解，因为这就是标签的设计。

`Thread`在处理 Swing 组件时应避免使用`javax.swing.Timer`，应`SwingWorker`尽可能使用。

```
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Ticker {

    public static void main(String[] args) {
        new Ticker();
    }

    public Ticker() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new FlowLayout());
                frame.add(new TickerLabel());
                frame.setSize(100, 100);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TickerLabel extends JLabel {

        private int counter;

        public TickerLabel() {
            Timer timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if (counter > 4) {
                        ((Timer)e.getSource()).stop();
                    } else {
                        String text = getText();
                        text += (char)(((int)'A') + counter);
                        setText(text);
                    }
                    counter++;
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

    }

} 
```

# algorithm - 匹配给定 ASCII 文本文件中的 CLOSEST 文件

> ID：15841500
> 
> 赞同：7
> 
> 时间：2013-04-05T19:01:09.163
> 
> 标签：algorithm, data-structures, ascii, information-retrieval

**问题：**

我有大约 20 个 ASCII 文本文件，每个文件的大小都小于**10^9 字节**。给出了另一个 ASCII 文本文件（比如 FOO）。程序是将 FOO 的内容与给定的 20 个文件进行战略匹配，并打印 CLOSEST 匹配文件的名称。FOO 的内容可能仅部分匹配。

由于文件太大，我想知道：

1.如何使用信息检索（因为我对IR不太了解）

2.我应该使用哪种数据结构来存储这些信息

3.实现它的最佳算法是什么。

我知道我问的太多了，但我真的被这个问题困住了，无法找到解决方法。任何帮助都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T06:51:47.893

所以我假设一个文件包含一些文本。所以我们可以说每个文件都是一个大字符串。现在制作 20 个向量或数组。浏览文件并将每个单词作为向量中的一个元素。现在创建一个大小为 20 的向量来存储每个文件的匹配现在也为给定文件创建一个词向量。现在创建一个循环来遍历这些向量，如果在任何给定索引处您发现与这 20 个向量和给定向量中的任何一个匹配。增加匹配存储向量中对应文件的值。最后，匹配存储向量中的最高值将指示具有最佳匹配的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T04:40:43.983

Vampire Coder 的解决方案假设文档是词袋，意思是词的顺序无关紧要。但是“部分匹配”是指某些句子匹配，那将没有任何好处。

您可以将每个文档分成重叠的子集，并获取每个子集的哈希值。然后，您将文档转换为一组哈希。然后你可以比较哈希值。这是您可以做您想做的事情的一种方式。

对于每个文档，一旦您缩小了潜在匹配范围，您就可以提高划分文档的分辨率。假设您最初将它们分成两份，现在您可以将它们分成10份。这是为了最大限度地减少运行时间。

你也应该使用局部敏感散列算法，如：[http ://en.wikipedia.org/wiki/Nilsimsa_Hash](http://en.wikipedia.org/wiki/Nilsimsa_Hash)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-26T19:03:41.537

我对“最接近”的猜测是两个文件之间差异最小的文件。

我会寻找差异算法或最长公共子序列[https://en.m.wikipedia.org/wiki/Longest_common_subsequence_problem](https://en.m.wikipedia.org/wiki/Longest_common_subsequence_problem)

# php - WordPress 下一个父页面链接

> ID：15841507
> 
> 赞同：1
> 
> 时间：2013-04-05T19:01:23.280
> 
> 标签：php, wordpress, pagination, hierarchy

这是一个自我问答。

通常在 WordPress 中，您使用页面层次结构来构建项目结构。例如，在做投资组合网站时，这很常见：

*   工作
    *   宝马
        *   楷模
            *   3系列
            *   5系列
    *   奥迪
        *   楷模
            *   A3
            *   A4

因此，当用户在 3 系列页面上时，您通常希望有一个指向“下一个汽车制造商”的链接。如果没有插件，你怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:01:23.280

这些功能允许您设置要用于确定下一页的深度。因此，在问题中，用户使用的是“3 系列”，因此深度为 2。因此，返回的链接将是“Audi”页面。

它在您的模板中像这样使用（我的示例是使用图像作为链接文本）：

```
$nextIMG = '<img src="'.get_template_directory_uri().'/images/icon-nav-right.png"/>';            
echo next_project_link($nextIMG); 
```

并将其放在functions.php中：

```
 /*
 * Next Project Link
 */
    function next_project_link($html) {
        global $post;

        // Change this to set what depth you want the next page of
        $parent_depth = 2;

        $ancestors = get_post_ancestors($post);     
        $current_project_id = $ancestors[$parent_depth-1];

        // Check for cached $pages
        $pages = get_transient( 'all_pages' );
        if ( empty( $transient ) ){
            $args = array(
                'post_type'         => 'page',
                'order'             => 'ASC',
                'orderby'           => 'menu_order',
                'post_parent'       => $ancestors[$parent_depth],
                'fields'            => 'ids',
                'posts_per_page'    => -1
            );
            $pages = get_posts($args);   
            set_transient('all_pages', $pages, 10 );
        }       

        $current_key = array_search($current_project_id, $pages);
        $next_page_id = $pages[$current_key+1];

        if( isset($next_page_id) ) {
            // Next page exists
            return '<a class="next-project" href="'.get_permalink($next_page_id).'">'.$html.'</a>';
        }

    } 

/*
 * Previous Project Link
 */
    function previous_project_link($html) {
        global $post;

        // Change this to set what depth you want the next page of
        $parent_depth = 2;

        $ancestors = get_post_ancestors($post);
        $current_project_id = $ancestors[$parent_depth-1];

        // Check for cached $pages
        $pages = get_transient( 'all_pages' );
        if ( empty( $transient ) ){
            $args = array(
                'post_type'         => 'page',
                'order'             => 'ASC',
                'orderby'           => 'menu_order',
                'post_parent'       => $ancestors[$parent_depth],
                'fields'            => 'ids',
                'posts_per_page'    => -1
            );
            $pages = get_posts($args);   
            set_transient('all_pages', $pages, 10 );
        }       

        $current_key = array_search($current_project_id, $pages);
        $prev_page_id = $pages[$current_key-1];

        if( isset($prev_page_id) ) {
            // Previous page exists
            return '<a class="previous-project" href="'.get_permalink($prev_page_id).'">'.$html.'</a>';
        }

    } 
```

# c++ - 从字符串变量执行 C++

> ID：15841511
> 
> 赞同：14
> 
> 时间：2013-04-05T19:01:29.643
> 
> 标签：c++

在 C++ 中可以从字符串变量执行 C++ 代码。就像在 Javascript 中一样：

```
var theInstructions = "alert('Hello World'); var x = 100";

var F=new Function (theInstructions);

return(F()); 
```

我想要一些非常相似的东西，比如 C++ 中的 Javascript。怎么做 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T19:08:05.790

不，C++ 是静态类型，编译为本机二进制语言。

尽管您可以使用 LLVM JIT 编译，但在不中断运行时的情况下进行编译和链接。应该是可行的，但它只是不在 C++ 领域。

如果你想要一个 C++ 下的脚本引擎，你可以使用例如 JS——它是迄今为止最快的动态解决方案。Lua、Python、Ruby 也可以，但通常速度较慢，考虑到您只是将它用于脚本编写，这可能不是一件可怕的事情。

例如，在 Qt 中，您可以执行以下操作：

```
int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    QScriptEngine engine;
    QScriptValue value = engine.evaluate("var a = 20; var b = 30; a + b");

    cout << value.toNumber();

    return a.exec();
} 
```

你会得到 50 ;)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-05T19:07:14.563

您将需要调用编译器来编译代码。此外，您将需要生成一些代码来将字符串包装在函数声明中。最后，您将需要以某种方式加载已编译的代码。

如果我这样做（我**不**会这样做），我会：

1.  在代码周围连接一个标准包装函数头
2.  通过命令行 ( ) 调用编译器`system()`来构建共享库（`.dll`在 windows 或`.so`linux 上）
3.  加载共享库并映射函数
4.  调用函数

在大多数情况下，这确实不是您想要编写 C 代码的方式。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-05T19:06:31.590

直接说不行。但是你可以：

*   将该字符串写入文件。
*   调用编译器并编译该文件。
*   执行生成的二进制文件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-05T19:06:58.973

C++ 是一种*编译*语言。您将 C++ 源代码编译成机器代码，即可执行文件。即被加载并执行。编译器了解 C++（并且拥有所有可用的库头文件）。可执行文件没有，这就是为什么它不能将字符串转换为可执行代码的原因。如果字符串恰好包含机器代码指令，您确实可以*执行*它的内容，但这通常是一个非常糟糕的主意......

这并不意味着*不可能*进行这种运行时编译。在 C++ 中，很少（如果确实有的话）是不可能的。但是你要做的是实现一个 C++ 编译器对象......在决定你真的想要这个之前先看看其他编译器项目。

*解释型*语言可以轻松做到这一点——它们只需要将字符串传递给已经在运行程序的解释器。他们在其他方面为这种灵活性付出了代价。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-16T10:43:32.737

您可以使用 Cling 作为 C++ 解释器。

我创建了小型 CMake 项目以便于 Cling 集成：C++ 作为编译时脚本语言 ( [https://github.com/derofim/cling-cmake](https://github.com/derofim/cling-cmake) )

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T19:07:14.813

简短的回答是否定的。黑客将有一个实地日。但是，您可以使用 Windows IActiveScriptSite 界面来利用 Java/VB 脚本。Google IActiveScriptSite，网上有很多例子。或者你可以做我目前正在做的事情，滚动你自己的脚本引擎。

# sql - 在 SQL Server 中查找重复的行组

> ID：15841515
> 
> 赞同：2
> 
> 时间：2013-04-05T19:01:35.700
> 
> 标签：sql, sql-server, group-by, duplicates

我有一个包含材料信息的表格，其中一种材料具有从一种到多种成分。

该表如下所示：

```
material_id contstiuent_id constituent_wt_pct
   1             1              10.5
   1             2              89.5
   2             1              10.5
   2             5              15.5
   2             7              74
   3             1              10.5
   3             2              89.5 
```

通常，我可以拥有`ID`具有相同成分（`ID`'s 和重量百分比）的不同材料，但具有相同重量百分比的相同成分 id 可以在多种材料中。

我需要找到`ID`具有完全相同数量的成分、相同成分 ID 和相同重量百分比的材料（在数据示例中，材料 ID 为 1 和 3）最好有如下输出：

> `ID Duplicate ID's`
> `1 1,3`
> 2 15,25
> ....

只是为了澄清这个问题：我有数千种材料，如果我只获得重复行的 id 对我没有帮助 - 我想看看是否可以在同一行中获得重复材料 id 的组或领域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:21:31.060

在包含所有成分的 CTE 中构建一个 XML 字符串，并使用该字符串来确定哪些材料是重复的。

[SQL小提琴](http://sqlfiddle.com/#!3/eceb2/1)

**MS SQL Server 2008 架构设置**：

```
create table Materials
(
  material_id int, 
  constituent_id int, 
  constituent_wt_pct decimal(10, 2)
);

insert into Materials values
(1, 1, 10.5),
(1, 2, 89.5),
(2, 1, 10.5),
(2, 5, 15.5),
(2, 7, 74),
(3, 1, 10.5),
(3, 2, 89.5); 
```

**查询 1**：

```
with C as
(
  select M1.material_id,
        (
        select M2.constituent_id as I,
                M2.constituent_wt_pct as P
        from Materials as M2
        where M1.material_id = M2.material_id
        order by M2.constituent_id,
                 M2.material_id
        for xml path('')
        ) as constituents
  from Materials as M1
  group by M1.material_id
)
select row_number() over(order by 1/0) as ID,
       stuff((
       select ','+cast(C2.material_id as varchar(10))
       from C as C2
       where C1.constituents = C2.constituents
       for xml path('')
       ), 1, 1, '') as MaterialIDs
from C as C1
group by C1.constituents
having count(*) > 1 
```

**[结果](http://sqlfiddle.com/#!3/eceb2/1/0)**：

```
| ID | MATERIALIDS |
--------------------
|  1 |         1,3 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T06:43:08.810

那么您可以使用以下代码来获取重复值，

```
Select EMP_NAME as NameT,count(EMP_NAME) as DuplicateValCount   From dbo.Emp_test
group by Emp_name having count(EMP_NAME) > 1 
```

# java - 在 OnCreate Button.getLeft 返回 0

> ID：15841517
> 
> 赞同：0
> 
> 时间：2013-04-05T19:01:49.523
> 
> 标签：java, android

在 OnCreate Button.getLeft 返回 0。Button 是动态创建的，并且 Button.performClick() 工作正常。如何离开 OnCreate？在 OnCreate 之后，我可以获得真正的剩余价值。

```
@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.my_activity);

        create_buttons();

        final Button bt = (Button) findViewById(Active);

        bt.performClick();

        msg(bt.getLeft()); //returns 0, why?

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:09:18.187

根据[这个问题](https://stackoverflow.com/a/12053094/804773)的答案，您将无法在 Activity 实例化期间检索 View 对象的 getLeft() 。对于我链接的情况，他谈到了`OnResume`但由于`OnCreate`发生在`OnResume` [生命周期](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)之前，您将看到类似的结果。

如需解决方案，请拨打您的`msg()`电话并将其转至`onWindowFocusChanged`

# javascript - 总是将 jQuery 弹出窗口放在页面的中心？

> ID：15841524
> 
> 赞同：0
> 
> 时间：2013-04-05T19:02:05.747
> 
> 标签：javascript, jquery, html, css

我得到了这段代码，当单击特定图像时，它可以弹出一个漂亮的窗口。这为我制作的画廊带来了更大的图像。但是由于某种原因，我无法让它出现在用户窗口的中心，因为所有图像的大小都不同，它们会根据显示的图像移动。

链接在：

[http://zeendesign.co.uk/cherrieimogen/cherrieimogen/cherrieImogen/portfolio.html](http://zeendesign.co.uk/cherrieimogen/cherrieimogen/cherrieImogen/portfolio.html)

（该css称为reveal.css）

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:09:35.890

您假设容器上的 left 必须设置为 20%，这就是脚本所做的。

尝试根据 (windowWidth-containerwidth)/2 设置 left。

IE：

```
v = Math.floor(($(window).width()-$("#myModal").outerWidth())/2)+"px";
$("#myModal").css("left",v); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:10:17.777

加载图像后定位对话框。

```
$('#dlg') 
.dialog('open')            
.dialog({position:'center'}); 
```

# visual-studio-2012 - 某些组总计的总和

> ID：15841525
> 
> 赞同：1
> 
> 时间：2013-04-05T19:02:08.900
> 
> 标签：visual-studio-2012, crystal-reports, sql-server-2008-r2, crystal-reports-2010, group-summaries

我正在使用 Crystal Reports for VS2012 制作水晶报告，以显示在日期范围内订购的要切割的绳索数量。除了一个部分，我已经完成了所有工作，我什至不确定这是可能的。

现在如何设置报告是这样的：

1.  第 1 组（日期）（例如 2013 年 3 月 13 日）

    *   第 2 组（谁订购）（例如 Dan）

        *   ...详细信息（包括电线长度）

            *   总长度（例如 Dan 2013 年 3 月 13 日的总长度）
    *   第 2 组（例如汤姆）

        *   ...细节

            *   总长度（例如 2013 年 3 月 13 日汤姆的总长度）
2.  第 1 组（例如 2013 年 3 月 14 日）

    *   第 2 组（例如 Dan）

        *   ...细节

            *   总长度（例如 Dan 2013 年 3 月 14 日的总长度）
    *   第 2 组（例如 Bob）

        *   ...细节

            *   总长度（例如 Bob 2013 年 3 月 14 日的总长度）

我想要做的是最后能够为我们的 3 个主要人员中的每个人提供一个总和，并为报告页脚中的任何其他名称提供另一个总和，所以它看起来像这样：

总计：
Dan：###（Dan 的所有绳索总长度的总和）
Tom：###（所有 Tom 的绳索总长度的总和）
Bob：###（所有 Bob 的绳索长度总和的总和）
其他：# ##（除 Dan、Tom、Bob 以外的人的所有剪线总数）

有没有办法做到这一点，还是我只是要求太多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:53:45.457

你可以像这样得到3个人的总和：

插入 --> 摘要 --> 总计

所以你可以得到所有用户的总和

仅获取特定组的总和

插入 --> 摘要 --> GroupTotal

尝试这个...............

# html - IE的样式问题

> ID：15841531
> 
> 赞同：0
> 
> 时间：2013-04-05T19:02:16.747
> 
> 标签：html, css

我对此很陌生。这可能是基本的东西......我对 IE 有问题，它不会像 chrome 和 FF 那样呈现网页。这三个盒子，boxleft，boxcenter 和 boxright odes 没有出现在一行中。最后一个，box out 似乎就在 boxcenter 下方。我试图找到答案，但没有运气。这是html和css。非常欢迎任何形式的帮助。谢谢。

```
<!DOCTYPE html>
<html>
   <head>
      <title></title>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <link rel="stylesheet" type="text/css" href="mainstyle.css" />
      <!--[if IE 6]>
      <link href="default_ie6.css" rel="stylesheet" type="text/css" />
      <![endif]-->
   </head>
   <body>
      <div id="header" class="container">
         <div id="logo">
            <img src="layout/img.png" width="415" height="90" alt="img" />
         </div>
         <!--END LOGO-->
         <div id="mainmenu">
            <ul>
            <li><a href="#">item 4</a></li>
            <li><a href="#">item 3</a></li>
            <li><a href="#">item 2</a></li>
            <li><a href="#">item 1</a></li>
            <ul>
         </div>
         <!--END MAIN MENU-->
      </div>
      <!--END HEADER-->
      <div id="mainmiddle" class="container"></div>
      <!--END MAIN-MIDDLE SECTION-->
      <div id="bottomsection" class="container">
         <div id="bottomsectionName">
            <p>PRODUCTS:</p>
         </div>
         <!-- END BOTTOM SECTION NAME-->
         <div id="boxholder">
            <div id="boxLeft">
               <div class="label">
                  <p>
                     <a href="#">text
                     <a>
                  </p>
               </div>
               <!--END LABEL-->
               <img src="layout/products.jpg" width="312" height="157" alt="" />
            </div>
            <!--END BOX LEFT-->
            <div id="boxRight">
            <div class="label">
            <p><a href="#">exclusive</a></p>
            </div><!--END LABEL-->
            <img src="layout/products.jpg" width="312" height="157" alt="" />
            </div><!--END BOX RIGHT-->
            <div id="boxCenter">
               <div class="label">
                  <p><a href="#">frost</a></p>
               </div>
               <!--END LABEL-->
               <img src="layout/products.jpg" width="312" height="157" alt="" />
            </div>
            <!--END BOX CENTER-->
         </div>
         <!--END BOX HOLDER-->
      </div>
      <!-- END BOTTOM SECTION-->
      <div id="info" class="container">
         <div id="infoboxLeft"  class="infotext"></div>
         <!-- END INFO BOX LEFT-->
         <div id="infoboxRight" class="infotext">
            <p>info:<br />Address: </p>
         </div>
         <!-- END INFO BOX RIGHT-->
      </div>
      <!--END INFO SECTION-->
      <div id="footer">
         <p>Copyright: </p>
      </div>
      <!--END FOOTER-->
   </body>
</html> 
```

CSS

```
html, body
{
    height: 100%;
}
body
{
    margin: 0;
    padding: 0;
}
.container
{
    margin: 0 auto;
    width: 960px;
}
#header
{
    background-color: #ffffff;
    height: 180px;
    overflow: hidden;
}
#logo
{
    height: 100px;
    margin: 0px, 0px, 0px, 0px;
}
#logo img
{
    padding-top: 10px;
}
#mainmenu
{
    height: 24px;
    margin-top: 60px;
}
#mainmenu ul
{
    list-style: none;
}
#mainmenu ul li
{
    display: inline;
    float: right;
    font-family: Verdana;
    font-size: 1.125em;
    margin-top: -2px;
    padding-left: 10px;
    text-transform: uppercase;
}
#mainmenu ul li a
{
    color: #c93159;
    text-decoration: none;
}
#mainmenu ul li a:hover
{
    text-decoration: none;
}
#mainmiddle
{
    background: url(layout/norway.jpg) no-repeat;
    height: 400px;
}
#bottomsection
{
    height: 185px;
    margin-top: 0px;
    padding-top: 0px;
}
#bottomsectionName
{
    height: 28px;
    overflow: hidden;
}
#bottomsectionName p
{
    color: 000000;
    float: right;
    font-family: Verdana;
    font-size: 1.125em;
    margin-top: 3px;
}
#boxholder
{
    height: 157px;
}
.label
{
    background-color: #c93159;
    height: 24px;
    margin-left: 104px;
    margin-top: 109px;
    position: absolute;
    width: 208px;
    z-index: 10;
}
.label p
{
    color: #ffffff;
    float: right;
    font-family: Verdana;
    font-size: 1.125em;
    margin-right: 7px;
    margin-top: 0px;
}
.label p a
{
    color: #ffffff;
    text-decoration: none;
    text-transform: lowercase;
}
#boxLeft
{
    float: left;
    height: 157px;
    width: 312px;
}
#boxCenter
{
    height: 157px;
    margin-left: 324px;
    width: 312px;
}
#boxRight
{
    float: right;
    height: 157px;
    width: 312px;
}
.infotext
{
    font-family: Verdana;
    font-size: 0.667em;
}
#info
{
    height: 150px;
    margin: 0px, 0px,0px,0px;
    overflow: hidden;
}
#infoboxLeft
{
    float: left;
    height: 150px;
    width: 480px;
}
#infoboxRight
{
    float: right;
    height: 150px;
    width: 480px;
}
#infoboxRight p
{
    float: right;
    margin-right: 5px;
    margin-top: 110px;
    text-align: right;
}
#footer
{
    overflow: hidden;
    padding: 0px 0px 10px 0px;
}
#footer p
{
    font-family: Verdana;
    font-size: 0.667em;
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:20:22.237

您将不得不编写 IE 特定的 CSS。我的建议是使用这样的条件注释来做到这一点：

```
<!--[if IE]>
.container
{
margin: 0 auto;
width: 960px;
}
#header
{
background-color: #ffffff;
height: 180px;
overflow: hidden;
}
<![endif]-->

<!--[if IE 6]>
My page's CSS goes here
<![endif]-->

<!--[if gte IE 8]>
My page's CSS goes here
<![endif]-->

<!--[if lt IE 9]>
My page's CSS goes here
<![endif]--> 
```

您可以使用这些类型的 if 语句来为特定版本的 IE 设置 CSS。您必须调整每一个中的值并在 IE 中进行测试以使其看起来像您想要的那样。这不会影响它在其他浏览器中的显示方式。此外，您不必将所有页面的 CSS 都放在这些评论中，只是在 IE 中无法正确显示的内容。

# encryption - C#.NET 在一台机器上加密 XML 并在另一台机器上解密

> ID：15841536
> 
> 赞同：0
> 
> 时间：2013-04-05T19:02:32.987
> 
> 标签：encryption, x509, x509certificate2, xml-encryption

我需要在**httpwebrequest**`GET/PUT/DELETE/POST`上留言。

 **我的请求正文包含 XML。

我需要**加密**正文 XML 中的内容并在客户端/接收器端**解密**。

我看到有多种加密 XML 的方法。其中之一在这里[http://msdn.microsoft.com/en-us/library/sb7w85t6.aspx](http://msdn.microsoft.com/en-us/library/sb7w85t6.aspx)

但我担心的是，接收者应该能够解密它。并且接收者应该在不同的平台上可能不在 .NET 框架上。

任何人都可以为此建议一种最佳方法。

到目前为止我已经尝试过：

// 创建一个新的 Rijndael 密钥。

```
 key = new RijndaelManaged();
            // Load an XML document.
            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.PreserveWhitespace = true;
            xmlDoc.Load("test.xml");

            // Encrypt the "creditcard" element.
            Encrypt(xmlDoc, "creditcard", key);

            Console.WriteLine("The element was encrypted");

            Console.WriteLine(xmlDoc.InnerXml);

            Decrypt(xmlDoc, key);

            Console.WriteLine("The element was decrypted");

            Console.WriteLine(xmlDoc.InnerXml); 
```

这看起来正在做这项工作。但我担心关键

```
 key = new RijndaelManaged();
Decrypt(xmlDoc, key); 
```

这个**Key**是什么，不同机器、不同框架和不同技术上的客户端能够解密这个消息吗？

# 更新

在研究了几种加密方法后，我发现 X509Certificate2 是最好的加密选项，如果在他们的机器上安装了相同的 X509 证书，客户端也可以解密它。我可以找到一个脚本来加密

```
public static void Encrypt(XmlDocument Doc, string ElementToEncrypt, X509Certificate2 Cert)
        {
            // Check the arguments.   
            if (Doc == null)
                throw new ArgumentNullException("Doc");
            if (ElementToEncrypt == null)
                throw new ArgumentNullException("ElementToEncrypt");
            if (Cert == null)
                throw new ArgumentNullException("Cert");

            XmlElement elementToEncrypt = Doc.GetElementsByTagName(ElementToEncrypt)[0] as XmlElement;
            // Throw an XmlException if the element was not found. 
            if (elementToEncrypt == null)
            {
                throw new XmlException("The specified element was not found");

            }

            EncryptedXml eXml = new EncryptedXml();

            // Encrypt the element.
            EncryptedData edElement = eXml.Encrypt(elementToEncrypt, Cert);
            EncryptedXml.ReplaceElement(elementToEncrypt, edElement, false);
        } 
```

如果发现此代码进行解密

```
 public static void Decrypt(XmlDocument Doc)
        {
            // Check the arguments.   
            if (Doc == null)
                throw new ArgumentNullException("Doc");

            // Create a new EncryptedXml object.
            EncryptedXml exml = new EncryptedXml(Doc);

            // Decrypt the XML document.
            exml.DecryptDocument();
        } 
```

我的问题是这种解密方法不需要 X509 密钥。那么它是如何解密的，是否需要和密钥才能解密。这种解密是否也适用于其他机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:57:10.230

存在几种加密方法。

对称加密使用相同的密钥来加密和解密数据。AES 加密算法就是这种加密的一个例子。

非对称（基于公钥和私钥）加密使用一对密钥。在这种模式下，您使用某人的公钥*为某人加密数据。*他使用他的私钥（你没有也不应该拥有）来解密为他准备的数据。非对称加密是使用基于证书的 PKCS#7 / CMS 标准或使用 OpenPGP 完成的。

现在关于 XML。您可以使用上述方法之一对其进行加密，就好像它是二进制数据一样。或者您可以使用 XMLEnc 标准对其进行加密。

使用方式取决于谁决定或要求加密格式和方法。如果是您做出决定，那么决定应该基于双方可以使用哪些功能（库、代码）以及如何管理密钥（PKI*比*对称密钥更难管理，但通常 PKI 更安全的）。

请注意：我们的 SecureBlackbox 产品支持 .NET、Java 和其他平台上的对称加密和基于证书的加密（二进制、XMLEnc 和 OpenPGP）。**

# r - ggplot2 轴标签中的希腊语和字母数字

> ID：15841538
> 
> 赞同：10
> 
> 时间：2013-04-05T19:02:50.113
> 
> 标签：r, ggplot2

我想使用 ggplot2 制作一个轴标签为 uL 的图表，其中“u”是希腊语“mu”。
只添加亩，我发现这行得通

```
p <- ggplot(data.frame(x = 1:3, y = 1:3), aes(x= x, y=y)) + geom_point()
p + ylab(expression(mu)) 
```

但我无法在它旁边放置任何其他东西。这些不起作用

```
p + ylab(paste(expression(mu), "foo"))
p + ylab("expression(mu)~foo") 
```

提前致谢

山姆

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-05T19:06:51.863

这个怎么样：

```
p <- ggplot(data.frame(x = 1:3, y = 1:3), aes(x= x, y=y)) + geom_point()
p + ylab(expression(paste(mu,L))) 
```

# html - 未调用脚本

> ID：15841539
> 
> 赞同：6
> 
> 时间：2013-04-05T19:02:51.473
> 
> 标签：html, css, node.js, express

我正在使用 ExpressJS。我的脚本或 CSS 将无法加载。

```
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
<title>Customer Info</title>

    <link rel="stylesheet" href="/stylesheets/testing.css" type="text/css" media="screen" charset="utf-8"/>

    <script type="text/javascript" src="/javascripts/jquery-1.9.1.js"></script>
    <script src="/javascripts/jquery-ui-1.10.2.custom.js" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript" src="/javascripts/testing.js"></script>

  </head>
   <body>
        //body contents
   </body>
</html> 
```

我知道问题不在于位置。当我以 express 呈现此 EJS 视图时，没有加载任何脚本。我不明白为什么它适用于几乎相同的视图，但不是这个。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:02:46.773

# 第1步

在您的`node.js`文件中找到您配置 express 的部分。

它会像。

```
 var express = require('express')
               , app = express();

 app.configure(function() {
    //configure the express codes go here
 } 
```

在那检查您配置为静态文件提供服务的文件夹的代码行。比如图片、css和js。我会喜欢的。

```
app.use(express.static(__dirname + '/public')); 
```

在上述情况下，这里`public`应该正是包含您在上述 html 中提到的文件`stylesheets`夹的父文件夹的名称。`javascripts`

像

```
--app.js
--package.json
--views/
--node_modules/
--public/
     --stylesheets/
        --testing.css
     --javascripts/
        --jquery-1.9.1.js
        --jquery-ui-1.10.2.custom.js
        --testing.js 
```

# 第2步

如果以上配置正确，那么您可以确保

```
app.use(express.static(__dirname + '/public')); 
```

在配置中领先于

```
app.use(app.router); 
```

这样您就可以确保您在路由器中编写的 404 路由处理程序不会忽略您的线路。

# 第 3 步

`Firebug`您可以使用or检查呈现的页面，`Chrome inspector`并在网络选项卡中检查您收到的针对您提到的 js 和 css 文件的响应。根据您的问题，它应该是 404 文件未找到，如果它有其他问题，您应该在问题中更新它。

# 第4步

如果您仍然无法解决问题，那么您必须使用您正在使用的 node.js 代码更新问题。这样我们就可以调查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:51:43.450

我相信是每个 src 行开头的“/”没有使其加载。例如..以这种方式使用它们

```
<link rel="stylesheet" href="stylesheets/testing.css" type="text/css" media="screen" charset="utf-8"/>

<script type="text/javascript" src="javascripts/jquery-1.9.1.js"></script>
<script src="javascripts/jquery-ui-1.10.2.custom.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="javascripts/testing.js"></script> 
```

好吧，这些脚本和 css 文件位于它们各自的文件夹中，要引用它们，您只需直接从其名称开始源，例如`src="folder/script.css"`

这是如果文件夹比 html 文件高一级。例如

您的 index.html 文件位于 folder1

您的 style.css 文件位于 folder1 >> css

您的 script.js 文件位于文件夹 1 >> 脚本中

那么对于这个级别，上述建议将 100% 起作用。如果存在其他类型的级别，例如

index.html 在文件夹 1 >> 文件夹 2 >> index.html

style.css 位于文件夹 1 >> css

script.js 在文件夹 1 >> js

那么你的 src 应该看起来像

```
<link rel="stylesheet" href="./stylesheets/testing.css" type="text/css" media="screen" charset="utf-8"/>

<script type="text/javascript" src="./javascripts/jquery-1.9.1.js"></script>
<script src="./javascripts/jquery-ui-1.10.2.custom.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" src="./javascripts/testing.js"></script> 
```

请注意一个“。” 点在开始。这意味着代码将引用后面一个文件夹中的文件。如果文件在后面 2 个文件夹，则使用它两次，例如`././folder1/css`

希望有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T17:54:20.860

您必须将 expressJS 设置为使用**静态链接**链接您的资产或包含 js 和 css 文件夹的公用文件夹。

```
express.static(__dirname + '/assets', { maxAge: 24*60*60*1000 } 
```

然后在 href 链接的开头使用点或简单地添加服务器 url。例如：

`<link rel="stylesheet" href="../css/test.css" type="text/css" >`

# c# - 如果服务器没有断开/关闭套接字，如何将套接字重新连接到服务器？

> ID：15841540
> 
> 赞同：0
> 
> 时间：2013-04-05T19:02:52.923
> 
> 标签：c#

我有一个 TCP 异步项目，如果连接已关闭，则将客户端重新连接到服务器时会出现问题。（服务器未关闭）。

当服务器关闭时，客户端收到以下错误：

```
An existing connection was forcibly closed by the remote host at EndReceive(IAyncResult ar) at ReceiveCallback(IAsyncResult ar) 
```

PS：客户端只能接收来自服务器的流。

话虽如此，我知道我需要以某种方式重新连接到服务器。我试图做某事，但它没有奏效，因为客户端没有响应并退出。

我所做的是，在包含以下步骤的接收回调的 catch 块中，我将 ClientSocket 设置为 Disconnected(true) 并在 while 循环 (!ClientSocket.Connected) 中，我正在回忆启动异步的主要方法再次操作，最后一行代码是 Thread.Sleep(n);

这些事情都是在receive回调中完成的

1.  从缓冲区中获取字符串
2.  做任何事..用字符串
3.  再次调用 BeginReceive

PS：我不想使用其他端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:21:46.223

您必须捕获该异常（您可以查找特定的错误代码），然后关闭该套接字并摆脱它。然后从头开始创建一个新的。

# mysql - 为什么不是所有字符都适合 MySQL 新表中的新 TEXT 字段？

> ID：15841541
> 
> 赞同：1
> 
> 时间：2013-04-05T19:03:02.470
> 
> 标签：mysql, fieldtype

我将 varchar(140) 中的几个文本与 MySQL 中的 GROUP_CONCAT 字段聚合到一个新表中。新字段自动变为字段类型 TEXT，根据文档应包含 65535 个字符。仍然只有一些文本字符出现在新表中（下面的“full_text”列）。我已经检查过了，应该有更多的文本和字符，应该在新的表格列中。我没有更改 MySQL 服务器中的任何内容，例如 max_package_size，它都是默认值。

这是我的 MySQL 查询：

```
DROP TABLE IF EXISTS tempsumdate;
CREATE TABLE tempsumdate ENGINE=MyISAM CHARACTER SET utf8 COLLATE utf8_swedish_ci AS
SELECT tw.from_user, MONTH(tw.created_at) AS month, GROUP_CONCAT(tw.text) AS full_text  
FROM tweets AS tw
GROUP BY tw.from_user, month;´ 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:04:55.067

RTLM：[http ://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

默认情况下 group_concat() 的长度限制为 1024 个字符。

# ruby-on-rails - 数据库重置后，列“sender_id”不能为空

> ID：15841542
> 
> 赞同：0
> 
> 时间：2013-04-05T19:03:05.980
> 
> 标签：ruby-on-rails

我正在尝试修复在执行 rake db:migrate:reset 后发生的一些新错误。我已经修复了所有这些，除了这个。对于我的自定义收件箱，单击发送新消息后，我收到此错误：

> Mysql2::Error: 列 'sender_id' 不能为空：INSERT INTO `messages`( `body`, `container`, `created_at`, `read_at`, `recepient_deleted`, `recepient_id`, `sender_deleted`, `sender_id`, `subject`, `updated_at`) VALUES ('test 1', 'draft', '2013-04-05 18:59:08', NULL, 0, 16, 0, NULL, '测试 1', '2013-04-05 18:59:08')

现在介绍一些背景信息。在我进行重置之前，我更改了迁移。那么也许这正在发挥作用？

原始迁移：

```
class CreateMessages < ActiveRecord::Migration
    def up
        create_table :messages do |t|
            t.string :sender_id,:null => false
            t.string :recepient_id
            t.boolean :sender_deleted, :recepient_deleted, :default => false
            t.string :subject,:null => false
            t.text :body
            t.datetime :read_at
            t.string :container,:default => "draft"
            t.timestamps
        end
    end

    def down
        drop_table :messages
    end
end 
```

修改了迁移，因此我可以从字符串更改为整数：

```
class ChangeSenderIdAndRecepientIdColumns < ActiveRecord::Migration
  def change
    change_column :messages, :sender_id, :integer
    change_column :messages, :recepient_id, :integer
  end

  def down
     change_column :messages, :sender_id, :string
     change_column :messages, :recepient_id, :string
  end
end 
```

消息控制器：

```
 def create
    @message = Message.new(params[:message])
    @message.sender_id = @user_id
    if @message.save
      flash[:notice] = "Message has been sent"
      redirect_to user_messages_path(current_user, :mailbox=>:inbox)
    else
      render :action => :new
    end
  end 
```

# windows - vc dll 自动注销自己

> ID：15841543
> 
> 赞同：0
> 
> 时间：2013-04-05T19:03:06.363
> 
> 标签：windows

我们有 2 个 DLL。两个 dll 的功能基本相同。一个 DLL (DLL_A) 在一个目录中供网页运行。另一个 DLL (DLL_B) 在另一个目录中，另一个网页将调用它。两个网页都是隔离的。没有从一个 myWebA.htm 到 myWebB.htm 的联系。
D:\mywebA\myWebA.htm
D:\mywebA\DLL_A.dll

D:\myWebB\myWebB.htm
D:\myWebB\DLL_B.DLL

DLL_A 是几年前编写的。最近我们创建了要在 myWebB 中使用的 DLL_B。现在我们注意到了这个问题。

如果用户网页调用 DLL_A.dll，则注销 DLL_B.dll。反之亦然。

两个 DLL 都可以注册。调用 FIRST 的 DLL 将注销另一个 DLL。

我注意到的一件事是，正在运行的 DLL 将在服务器上具有相同的 PID（Windows 2003）。

如果我可以用不同的 PID 注册这些，会解决问题吗？如果是这样怎么办？

还有其他建议吗？

TIA史蒂夫42

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T05:09:22.603

首先，我假设您在这里谈论的是 COM DLL，而不是其他任何东西。在这种情况下，可能您的两个 DLL 都具有相同的 GUID。在这种情况下，它会产生一个问题，因为一次只能注册一个 DLL，因为 GUID 需要在机器范围内是唯一的。

如果您安装了 Visual Studio，则有许多工具，例如 COM Viewer，它们会在拖放时告诉您两个 DLL 的 GUID。

# image - grails 在文件夹中显示图像

> ID：15841547
> 
> 赞同：0
> 
> 时间：2013-04-05T19:03:14.517
> 
> 标签：image, grails, gsp

我正在尝试做一个 Grails webapp，现在我正在尝试在一个文件夹中显示所有图像。

为此，我有以下内容：

```
def display(){
        def dir = new File("/tmp/images")
        def list = []
        dir.eachFileRecurse() { file ->
            def avatarFilePath = new File(file.path)
            response.setContentType("application/jpg")
            OutputStream out = response.getOutputStream();
            out.write(avatarFilePath.bytes);
            out.close();
        }
    } 
```

因此，使用上面的代码，我使用以下方法显示一张图像：

```
<img class="thumbnail" src='${createLink(controller: "images", action: "display")}' /> 
```

使用此代码，我正在显示一张图像。如何显示该文件夹中的所有图像？我需要建立一个列表吗？什么清单？输出流列表？在这种情况下，我应该在我的 gsp 文件中放入什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:30:15.377

如果图像文件夹在应用程序结构中，您可以直接创建指向图像的链接。在这种情况下，我认为您需要一个控制器操作来输出一个文件的内容，以及另一个获取图像列表并请求文件内容的操作。

```
class MyController {
  private static final File IMAGES_DIR = new File('/tmp/images')

  //get the list of files, to create links in the view
  def listImages() {
    [images: IMAGES_DIR.listFiles()]
  }
  //get the content of a image
  def displayImage() {
    File image = new File(IMAGES_DIR.getAbsoluteFilePath() + File.separator + params.img)
    if(!image.exists()) {
      response.status = 404
    } else {
      response.setContentType("application/jpg")
      OutputStream out = response.getOutputStream();
      out.write(avatarFilePath.bytes);
      out.close();
    }
  }

} 
```

你的 gsp 可以做类似的事情

```
<g:each in="${images}" var="img">
  <img class="thumbnail" src='${createLink(controller: "myController", action: "displayImage", params:[img: img.name])}' />
</g:each> 
```

PS：代码未经测试，可能需要一些调整。

# ios - 两个弱变量可以创建一个保留循环吗？

> ID：15841549
> 
> 赞同：0
> 
> 时间：2013-04-05T19:03:26.003
> 
> 标签：ios, objective-c, xcode

在 ARC 中，如果 A 持有对 B 的强引用，而 B 持有对 A 的强引用，则会有一个保留循环。

下面的代码也会创建一个保留周期吗？

```
 __weak MyClass *weakSelf = self;
    [self doSomething:^{

        weakSelf.someVariable = YES;

        [weakSelf doSomething:^{

            weakSelf.someVariable = YES;
        }];

    }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:06:47.607

使用 ARC，weakSelf 指针被复制，但由于它很弱，指针的复制不会导致保留计数增加。所以不，它不会创建保留周期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:07:39.127

不，不会的。事实上，如果你不保留对象并且由于某种原因在`MyClass`对象被释放后会调用块，你最终会导致运行时崩溃

# android - 在左侧的自定义操作栏视图上添加下拉菜单，并带有可检查的项目

> ID：15841550
> 
> 赞同：0
> 
> 时间：2013-04-05T19:03:30.457
> 
> 标签：android, drop-down-menu, checkbox, android-actionbar

我在开发动作栏时遇到了很多问题。以下是我的需求：

*   我想在我的操作栏中添加一个下拉菜单，由于一些自定义操作（例如动画），它正在使用自定义视图。

*   下拉菜单必须可以从图像按钮（不是显示所选元素的文本区域的微调器）访问。

*   允许显示下拉菜单的图像按钮必须位于操作栏的左侧。

*   出现的下拉菜单必须包含可检查的项目，并且当用户检查一个项目时，下拉菜单必须不被隐藏（这允许用户一次检查多个项目）。

*   我的应用程序必须从 android 2.3 开始工作（我为此使用了 action bar sherlock，我指定这个是因为我不能在 android 2.3 上使用 PopupMenu）。

通过将自定义视图 (actionBar.setCustomView(...)) 与菜单 (menuInflater.inflate(...)) 相结合，我已成功在操作栏中添加了一个下拉菜单。我认为我的 customview 的代码不是很重要，这是我的菜单的代码：

```
<item
    android:title="test"
    android:drawable="@drawable/dropdown_icon"
    android:showAsAction="always">

    <menu>

        <item
            android:id="@+id/item1"
            android:title="item 1"
            android:checkable="true"/>

        <item
            android:id="@+id/item2"
            android:title="item 2"
            android:checkable="true"/>

        <item
            android:id="@+id/item3"
            android:title="item 3"
            android:checkable="true"/>

    </menu>

</item> 
```

使用此解决方案，我有以下问题：

*   我无法将下拉项放在左侧（目前在右侧）
*   当我检查下拉列表中的项目时，我的下拉列表会自行隐藏。我希望下拉菜单保持其显示状态。

我怎样才能达到我想要的？

PS：如你所见，英语不是我的母语。这些问题很难解释（即使用我的母语），所以如果有些句子不能理解，请告诉我，我会努力改进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:11:53.127

我建议做最简单的事情：删除所有与 ActionBarSherlock 相关的代码，并在布局中添加您自己的视图，并将它们编程为动画、弹出、显示和隐藏。

# javascript - 使用 javascript 验证表单不会被触发

> ID：15841564
> 
> 赞同：0
> 
> 时间：2013-04-05T19:04:42.040
> 
> 标签：javascript, html, forms, validation

我有一个更改密码的表单，对所有表单字段进行 javascript 验证检查，但是，我认为 Javascript 甚至不会被触发。输入提交将我直接带到我的控制器中的空指针异常错误。我错过了什么吗？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Change Password Page</title>    
    <script type="text/javascript">
        function validate(){

            var username=document.form.j_username.value;
            var oldPassword=document.form.j_old_password.value;
            var newPassword=document.form.j_new_password.value;
            var confirmPassword=document.form.j_confirm_password.value;

            if(username==""){
             alert("Enter Username!");
              return false;
                }

            if(oldPassword==""){
             alert("Enter Old Password!");
              return false;
                }

            if(newPassword==""){
                 alert("Enter New Password!");
                  return false;
                }

            if(confirmPassword==""){
                 alert("Enter Confirm Password!");
                  return false;
                }

            return true;

        }       
    </script>
</head>

<body>
    <div class="change_password-header">
    <h1>Blah Blah</h1>
    </div>
    <div class="L" style="float: left; left; padding: 1em; background-color: #8eb4e3; border: 1px solid black;">
    <form action="changepassword" method="post" onsubmit="return validate()">
        <p><strong style="color: #e3f7ff">Username: </strong>
            &nbsp;<input type="text" name="j_username" size="25" />
        </p>

        <p><strong style="color: #e3f7ff">Old Password: </strong>
            &nbsp;<input type="password" size="25" name="j_old_password" />
        </p>

        <p><strong style="color: #e3f7ff">New Password: </strong>
            &nbsp;<input type="password" size="25" name="j_new_password" />
        </p>

        <p><strong style="color: #e3f7ff">Confirm New Password: </strong>
            &nbsp;<input type="password" size="25" name="j_confirm_password" />
        </p>

        <div style="text-align: center;">
            <input type="submit" value="Submit" class="button-login" style="background-color: #c7d9f1; border: 1px solid black;" />
            <input type="reset" value="Reset" class="button-login" style="background-color: #c7d9f1; border: 1px solid black;"/>
        </div>
    </form>
    </div>

    <div style="float: left; width: 100%; font-size: 12px; padding: 0 0 0 2em" class="change_password-footer">
        <div><a href = "login">Return back to login screen</a></div>
        <br/>
    </div>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:11:17.697

您只是忘记命名您的表单：

```
<form action="changepassword" name="test" method="post" onsubmit="return validate()"> 
```

并像这样在JS中引用：

```
var username=document.forms.test.j_username.value; 
```

[http://jsfiddle.net/gq79y/](http://jsfiddle.net/gq79y/)

# r - BLAS-LAPACK-ATLAS-R installation with multithreading?

> ID：15841565
> 
> 赞同：3
> 
> 时间：2013-04-05T19:04:54.683
> 
> 标签：r, gcc, atlas

I am trying to setup ATLAS, BLAS, LAPACK, and R on an OpenSuSE 12.2 server with an 8 core AMD athlon FX-8320\. I have turned off the CPU frequency scaling using cpufreq and a script cfu from paste.opensuse.org/92162247 made by James McDaniel.

So following the instructions, here [http://math-atlas.sourceforge.net/atlas_install/node45.html](http://math-atlas.sourceforge.net/atlas_install/node45.html) I didn't need to install gcc (that I know yet) I have gcc (SUSE Linux) 4.7.1 20120723 installed, g++, and gfortran the same version as gcc.

The instructions are to make a bogus configuration of ATLAS to determine the compiler flags to use. ATLAS is configured in the instructions as '../configure -b 64 -D c -DPentiumCPS=2200 -Fa alg -fPIC'. I modify this to what I think will work for my setup ' ../configure -b 64 -t 8 -Fa alg -fpic -A x86_64 -D c -DpentiumCPS=3500 -Si latune 1 --prefix=/usr/local/lib64 --with-netlib-lapack-tarfile=/opt/maths/lapack-3.4.2.tgz' I get these errors.

```
OS configured as Linux (1)

Assembly configured as GAS_x8664 (2)

Vector ISA Extension configured as  AVXMAC (3,504)
ERROR: enum fam=6, chip=8, mach=0
make[3]: *** [atlas_run] Error 44
make[2]: *** [IRunArchInfo_x86] Error 2
/bin/sh: line 1: 13849 Segmentation fault      ./xarchinfo_linux -a > config0.out
make[3]: *** [atlas_run] Error 139
make[2]: *** [IRunArchInfo_linux] Error 2

Architecture configured as  UNKNOWNx86 (35)
ERROR: enum fam=6, chip=8, mach=0
make[3]: *** [atlas_run] Error 44
make[2]: *** [IRunArchInfo_x86] Error 2

Clock rate configured as 3500Mhz
Parallel make command configured as '$(MAKE) -j 8'
ERROR: enum fam=6, chip=8, mach=0
make[3]: *** [atlas_run] Error 44
make[2]: *** [IRunArchInfo_x86] Error 2
Cannot detect CPU throttling. 
```

Atlas makes a Make.inc and if I fgrep F77 and F77 flags I get 'gfortran-4.7' AND '-O -mavx -fpic -m64'. Maybe the -mavx flag handles the AVXMAC error? Do I need -mavx? I will proceed with my instructions...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:47:42.110

（不是真正的答案，但很难作为评论阅读）：

关于 Dirk 建议使用 OpenBLAS 的更多注意事项。

我还使用 OpenBLAS（在 Ubuntu 和 CentOS 系统上）。

*   在 8 核和 12 核机器上对我来说重要的一个考虑因素是 OpenBLAS 允许*动态*设置要使用的线程数，而[ATLAS 不允许](http://math-atlas.sourceforge.net/faq.html#tnum)。为了从 R 中动态设置线程数，我使用[Simon Fuller 的 OpenBLASThreads](https://github.com/simonfullernuim/OpenBlasThreads)。

*   OpenBLAS 在这两个系统上构建起来非常简单。

*   二进制 .deb 包可用，但上次我检查它们时，它们的最大可能线程数设置为 2。[但是，这将改变](https://bugs.launchpad.net/ubuntu/+source/openblas/+bug/817212)。到目前为止，我还在具有> 2 个内核的 Ubuntu 机器上从源代码构建库。

# java - Error installing Java ME SDK 3.3 (preview) in NetBeans

> ID：15841567
> 
> 赞同：0
> 
> 时间：2013-04-05T19:04:55.293
> 
> 标签：java, netbeans

I've installed NetBeans 7.3 (with Java SE) and Java ME SDK 3.3 in Windows 8 Pro 64 bits.

I've downloaded the NetBeans plugin for Java ME SDK 3.3 and when I try to install it I get the following errors

![NetBeans Error](https://i.stack.imgur.com/W7wtb.png)

I've never used Java before so any clue is welcome

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:38:08.627

尝试打开工具>>插件

打开`Available Plugins`选项卡并安装`Mobility`插件

看看能不能解决问题：）

# iphone - 表格视图占用整个视图而不是输入宽度和高度

> ID：15841569
> 
> 赞同：0
> 
> 时间：2013-04-05T19:04:58.743
> 
> 标签：iphone, ios, objective-c, xcode, restkit

我想在我的应用程序中有一个相对较小的表格视图。但我似乎没有运气，因为表格视图占据了整个屏幕。

```
 -(void)viewDidLoad{
 UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(0.0, 0.0, 20.0, 60.0) style:UITableViewStylePlain];

   self.view = tableView;
 }

   - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *MyCellIdentifier = @"MyCellIdentifier";

UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:MyCellIdentifier];

if(cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyCellIdentifier];
}

return cell;
   }

  - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return 5;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:08:44.247

在您的 viewDidLoad 方法中替换`self.view = tableView`为

```
[self.view addSubview:tableView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:10:46.053

您必须创建一个属性并为您的 tableView 命名：

> @property(strong, nonatomic) IBOutlet UITableView* myTableView;

之后，您必须连接代表并执行

> @synthesize myTableView;

然后像这样使用你的代码：

> myTableView = [[UITableView alloc] initWithFrame:CGRectMake(0.0, 0.0, 20.0, 60.0) style:UITableViewStylePlain];

没有这个 -> self.view = tableView;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:17:29.647

我经常遇到这个问题。根据我的经验，处理这个问题的最好方法是创建一个容器视图控制器，它将表 vc 作为子 vc。

我创建了一个简单的类来管理它。您可以在 IB 中设置 vc。

```
#import <UIKit/UIKit.h>

@interface ContainerViewController : UIViewController

@property (weak, nonatomic) IBOutlet UIView *contentViewPlaceholderView;
@property (strong, nonatomic) IBOutlet UIViewController *contentViewController;

@end

#import "ContainerViewController.h"

@interface ContainerViewController ()

@property (assign, nonatomic)BOOL isContentVCAdded;

@end

@implementation ContainerViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        [self setup];
    }

    return self;
}
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        [self setup];
    }

    return self;
}

- (void)setup
{
    self.isContentVCAdded = NO;
}

- (void)insertAndShowContentVC
{
    [self removeAllChildVCs];
    self.contentViewController.view.frame = self.contentViewPlaceholderView.bounds;
    [self addChildViewController:self.contentViewController];
    [self.contentViewPlaceholderView addSubview:self.contentViewController.view];
    [self.contentViewController didMoveToParentViewController:self];
    self.isContentVCAdded = YES;
}

- (void)removeAllChildVCs
{
    for (UIViewController *vc in self.childViewControllers) {
        [vc willMoveToParentViewController:nil];
        [vc.view removeFromSuperview];
        [vc removeFromParentViewController];
    }
}

- (void)setContentViewController:(UIViewController *)contentVC
{
    _contentViewController = contentVC;
    if (contentVC == nil) {
        [self removeAllChildVCs];
    }
    else {
        [self insertAndShowContentVC];
    }
}

#pragma mark Lifecycle

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    if (nil != _contentViewController && !self.isContentVCAdded) {
        [self insertAndShowContentVC];
    }
} 

@end 
```

您只需要创建一个`contentViewPlaceholderView`（在 IB 或代码中）具有您希望表格视图具有的框架。然后，您只需根据需要创建表 vc 并将其设置`contentViewController`为`ContainerViewController`

# debugging - 在 Pyramid 中调试 Mako 模板

> ID：15841570
> 
> 赞同：2
> 
> 时间：2013-04-05T19:05:01.660
> 
> 标签：debugging, pyramid, mako

这与这个问题有关： [您如何调试 Mako 模板？](https://stackoverflow.com/questions/390409/how-do-you-debug-mako-templates)

[一个回复](https://stackoverflow.com/questions/390409/how-do-you-debug-mako-templates#answer-536087)提到了 Mako 中的内置[调试系统，](http://docs.makotemplates.org/en/latest/usage.html#handling-exceptions)并且[有评论说它在 Pyramid 中如何运作良好](https://stackoverflow.com/questions/390409/how-do-you-debug-mako-templates#comment-6382443)。但是，我不知道您将如何将提到的内容合并到 Pyramid 中，因为您从不直接调用 Mako 的模板渲染方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T21:05:33.387

有一个金字塔设置可以捕获 mako 异常。

*   [mako.error_handler](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/environment.html#mako-error-handler)

针对金字塔中的 mako 异常的小型金字塔扩展。

*   [金字塔网络错误](https://github.com/blaflamme/pyramid_weberror)

如果你想直接接触 mako 渲染方法，你可以去一个 mako 预处理器。

*   [mako.预处理器](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/environment.html#mako-preprocessor)

此方法的示例代码。

*   [添加指定 mako 预处理器的可能性](https://github.com/Pylons/pyramid/pull/183)

# mysql - VB.NET：从（CheckedListBox-ComboBox）更新 MySQL 数据库

> ID：15841573
> 
> 赞同：0
> 
> 时间：2013-04-05T19:05:10.880
> 
> 标签：mysql, vb.net, for-loop, combobox, checkedlistbox

我已经制作了一个表格，该表格应该获取特定会话的出勤详细信息。使用的元素是：

1-选中列表框

2-组合框：CB_Students

3- 按钮：更新

我的表是学生，其中包含代码| 名字| 姓氏| 第1天| 第2天| 第3天| 第4天| Day5，其中 Days 的类型为 tinyint，指的是存在或缺席。

我希望用户从 CheckedListBox 中检查学生的姓名，因此我在 CheckedListBox 中填充了名字和姓氏的串联，每个项目都显示全名。

由于 CheckedListBox 是由数据库记录**间接**创建的，我想我无法将其直接连接到数据库，因此我创建了一个隐藏的 ComboBox，其 Code 值对应于 CheckedListBox 中显示的每个学生。

例如，我的学生表如下：

代码 | F_Name | L_名称

1 | F1 | L1

2 | F2 | L2

CheckedListBox 包含：F1 L1 和 F2 L2，ComboBox 包含 1 和 2。

在表单加载期间也可以找到天数并保存为公共变量 Inquiry。

以下是我的更新按钮代码：

```
Dim j, S As Integer
    sqlstr = "UPDATE Student SET Day'" & Inquiry & "'=@field1 WHERE Code='" & CB_Students.Items.Item(j) & "'"
    DBCmd = New MySql.Data.MySqlClient.MySqlCommand(sqlstr, DBConn)
    With DBCmd
        For j = 0 To CheckedListBox1.Items.Count - 1
            S = CheckedListBox1.GetItemCheckState(j)
            If S = 1 Then
                .Parameters.AddWithValue("@field1", 1)
            ElseIf S = 0 Then
                .Parameters.AddWithValue("@field1", 0)
            End If
        Next j
    End With
    DBCmd.ExecuteNonQuery()
    DBCmd.Dispose() 
```

但是，在执行过程中，我收到错误消息：“参数'@field1'已被定义。”

我应该如何处理这个问题？此外，语句 CB_Students.Items.Item(j) 是否正确用于为我的 sql 字符串提供 ComboBox 中的学生代码？

更新1：

查询是一个整数。我还尝试了以下代码：

```
 For j = 0 To CheckedListBox1.Items.Count - 1
        S = CheckedListBox1.GetItemCheckState(j)
        If S = 1 Then
            With DBCmd
                .Parameters.AddWithValue("@field1", 1)
                .ExecuteNonQuery()
                .Dispose()
            End With
        ElseIf S = 0 Then
            With DBCmd
                .Parameters.AddWithValue("@field1", 0)
                .ExecuteNonQuery()
                .Dispose()
            End With
        End If
    Next j 
```

但是，正如我对 Never_Mind 的回复一样，我在第一行 DBCmd.ExecuteNonQuery() 收到以下错误：“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册以获取正确的语法在第 1 行的 ''4' =1 WHERE Code='6'' 附近使用。

这些值似乎是正确的。Day number 是 4，Field1 是 1，Code 是 6。我不明白问题出在哪里。

更新 2：

下面是在表单加载中填充 CheckedListBox 和 ComboBox 的代码。C_Code 是班级代码，学生表中的另一个字段。ClassID 是前面形式保存的公共整数变量。此表单使用 .ShowDialog 方法显示。

```
sqlstr = "SELECT * FROM Student WHERE C_Code = '" & ClassID & "'"
DBCmd = New MySql.Data.MySqlClient.MySqlCommand(sqlstr, DBConn)
DBDR = DBCmd.ExecuteReader
    While (DBDR.Read())
        Std_Name = DBDR("F_Name") & " " & DBDR("L_Name")
        CheckedListBox1.Items.Add(Std_Name)
        CB_Students.Items.Add(DBDR("Code"))
    End While
    DBCmd.Dispose()
    DBDR.Close() 
```

此外，代码是整数。

更新 3：

我已将 Inquiry 的数据类型更改为 String 并删除了单引号。

无论如何，我在想也许我可以制作不同的字段编号。像这样的东西：

```
Dim j, S, k As Integer
    sqlstr = "UPDATE Student SET D" & Inquiry & " =@field" & k & " WHERE Code='" & CB_Students.Items.Item(j) & "' "
DBCmd = New MySql.Data.MySqlClient.MySqlCommand(sqlstr, DBConn)
For j = 0 To CheckedListBox1.Items.Count - 1
        For k = 1 To CheckedListBox1.Items.Count
            S = CheckedListBox1.GetItemCheckState(j)
            If S = 1 Then
                With DBCmd
                    .Parameters.AddWithValue("@field" & k, 1)
                    .ExecuteNonQuery()
                    .Dispose()
                End With
            ElseIf S = 0 Then
                With DBCmd
                    .Parameters.AddWithValue("@field" & k, 0)
                    .ExecuteNonQuery()
                    .Dispose()
                End With
            End If
        Next k
    Next j 
```

但这不起作用。我认为我在通过命令添加时连接 @field 和 k 的方式应该有问题。我怎样才能让它工作？

我非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:14:54.230

试试这个

```
 With DBCmd
        For j = 0 To CheckedListBox1.Items.Count - 1
            S = CheckedListBox1.GetItemCheckState(j)
            If S = 1 Then
                .Parameters.AddWithValue("@field1", 1)
 .ExecuteNonQuery()
            ElseIf S = 0 Then
                .Parameters.AddWithValue("@field1", 0)
 .ExecuteNonQuery()
            End If
        Next

    End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:45:44.733

**首先**从字符串 Inquiry 中删除单引号，以将字段的渐进式连接到单词 day。**当心**。我想您可以完全控制 Inquiry 变量的值，并在连接到 Day 字之前检查它是否是有效数字

**其次**，在循环外使用虚拟值定义一次参数，然后在循环内将值设置为当前项的状态并执行查询

**第三**使用参数也用于代码值

```
j = 0 ' you should initialize this variable to a valid index inside the items collection of the combo'
sqlstr = "UPDATE Student SET Day" & Inquiry & "=@field1 WHERE Code=@code"
DBCmd = New MySql.Data.MySqlClient.MySqlCommand(sqlstr, DBConn)
With DBCmd
    .Parameters.AddWithValue("@field1", 0)
    .Parameters.AddWithValue("@code", Convert.ToInt32(CB_Students.Items(j)))
    For j = 0 To CheckedListBox1.Items.Count - 1
        S = if(CheckedListBox1.GetItemCheckState(j) = CheckState.Checked, 1, 0)
       .Parameters("@field1").Value = S
       .ExecuteNonQuery()
    Next j
End With 
```

这种方法效率不高，因为对每天的项目（检查或不检查）执行更新命令，但要消除这种低效率将需要完全重写此代码。

至于组合框项目的用法，我认为您应该使用 SelectedValue 属性，但这取决于您如何填充组合以及将哪个值分配给 ValueMember 属性以及哪个数据类型是`code`数据库字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T07:37:41.007

才想到答案。由于我们无法重新创建@field1，我们通过将其放入循环来重新创建 sql 字符串（整个内容）。

```
For j = 0 To CheckedListBox1.Items.Count - 1
        S = CheckedListBox1.GetItemCheckState(j)
        sqlstr = "UPDATE Student SET D" & Inquiry & " =@field1 WHERE Code='" & CB_Students.Items.Item(j) & "' "
        DBCmd = New MySql.Data.MySqlClient.MySqlCommand(sqlstr, DBConn)
            If S = 1 Then
                With DBCmd
                .Parameters.AddWithValue("@field1", 1)
                    .ExecuteNonQuery()
                    .Dispose()
                End With
            ElseIf S = 0 Then
                With DBCmd
                .Parameters.AddWithValue("@field1", 0)
                    .ExecuteNonQuery()
                    .Dispose()
                End With
            End If
    Next j 
```

这一个是相当艰难的！但是，见鬼，当它解决了它就变得容易了，是吗？

# algorithm - Recursive algorithm to find the smallest element

> ID：15841575
> 
> 赞同：-1
> 
> 时间：2013-04-05T19:05:24.007
> 
> 标签：algorithm, search, recursion, binary-tree

I want to write a recursive algorithm to find a smallest element. I draw a binary tree in which leaf represents the elements and internal nodes are smallest elements after comparison.

Input to algo is :

5 3 1 9 8 7 6 10

Binary Tree :

![enter image description here](https://i.stack.imgur.com/lqDGY.jpg)

Output : 1

I need to find an algorithm that somehow incorporates this binary tree. First compare pair of elements and than reduced the problem to n/2 then n/4 .. and when n become 1 we get the answer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:19:22.467

使用[分而治之](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)。

让`M(i, j)`表示“子数组”的最小元素`[i...j]`。然后`M(i, j) = min(M(i, k), M(k + 1, j))`，如果`i < j`（我留给你找出合适的`k`）。

此外，您需要处理好案件`i = j`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:18:49.807

这是一个在树中找到最小值的函数：

```
function smallest(tree)
    if isEmpty(tree)
        return infinity
    return min( tree.value,
                smallest(tree.leftKid),
                smallest(tree.rightKid) ) 
```

但我不明白你的问题。如果输入是数组的形式，则不需要构建树。只需遍历数组，成对比较值，在每一步保持最小值，并在最后输出最小值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:11:56.617

伪代码：

```
mydata = [5 3 1 9 8 7 6 10];
n = 8;
while n > 1
  for ii = 2 to n Step 2
    mydata[ii/2]=min(mydata[ii-1],mydata[ii]);
  next ii
  n = n/2;
wend 
```

# jquery - persistent listview in Jquery Mobile

> ID：15841579
> 
> 赞同：1
> 
> 时间：2013-04-05T19:05:39.323
> 
> 标签：jquery, jquery-mobile, markup, persistent, jquery-mobile-listview

In jquery mobile you can have a navbar which has a class of persistent which makes the nav button which is chosen to highlight in a different colour. this indicates to the user where he/she is located within the menu. Is it possible to have that same effect on a listview? What I am trying to do is when a user selects an anchor within the list it stays highlighted. So if the user goes back to the same list the user can see which option in the list was previously selected.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:37:54.940

这是一个工作示例：http: [//jsfiddle.net/Gajotres/WA7qZ/](http://jsfiddle.net/Gajotres/WA7qZ/)

我想这就是你想要的。不幸的是，没有任何 jQuery Mobile 内置功能，因此必须手动完成。

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <title></title>`enter code here`
    <link href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
</head>
<body>
    <div data-role="page" id="profile">
        <div data-role="header" data-position="fixed">
          <h3>Example</h3>
        </div>
        <!-- /header -->
        <div data-role="content">
            <ul id="mylist" data-role="listview" data-inset="true">
                <li data-theme='a'><a id='a1' href='#' rel='external'>TEST 1</a></li>
                <li data-theme='a'><a id='a2' href='#' rel='external'>TEST 2</a></li>
            </ul>
        </div>
        <div id='divtest'>

        </div>
        <!--/content-->
        <div data-role="footer" data-position="fixed">
        </div>
        <!--/footer-->
    </div>
    <div data-role="page" id="second">
        <div data-theme="a" data-role="header">
            <a href="#profile" class="ui-btn-left">Back</a>
            <h3>
                Second Page
            </h3>
        </div>

        <div data-role="content" class="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>     
</body>
</html> 
```

**Javascript：**

```
$(document).live('pagebeforeshow','#profile', function(e,data){
    $(document).off('click', '#mylist li').on('click', '#mylist li',function(e) {
        setNewTheme('a', '#mylist li');
        setNewTheme('b', $(this));
        $.mobile.changePage("#second", {
            reloadPage: false,
            transition: "slide",
            reverse: false
        });        
    });      
});

function setNewTheme(newTheme, object) {
    $.mobile.activePage.find(object).removeClass('ui-btn-up-a ui-btn-up-b ui-btn-up-c ui-btn-up-d ui-btn-up-e ui-btn-hover-a ui-btn-hover-b ui-btn-hover-c ui-btn-hover-d ui-btn-hover-e').addClass('ui-btn-up-' + newTheme ).attr('data-theme', newTheme );
} 
```

# jquery - 如何在 Jquery 映射函数中显示输入字段的标题属性

> ID：15841581
> 
> 赞同：0
> 
> 时间：2013-04-05T19:05:45.227
> 
> 标签：jquery, append, javascriptserializer

我有以下脚本将输入值列表附加到文本区域中。

```
<script>
   function showValues() {
       var fields = $(".content :input").serializeArray();
       var tokens = jQuery.map(fields, function(field) {
               return (field.value) ? (field.value + ' ' + field.name) : null;
           });
       $("#contentlist_copy").val(tokens.join(', '));
   }
      $("input").change(showValues);
      showValues();     
</script> 
```

`field.name`我不想显示返回字段的名称属性，而是显示标题属性。我已经尝试了一些技巧，没有什么是给予。

我应该指出，这是该主题的后续问题：[How to hide appended input names when the value is empty](https://stackoverflow.com/questions/15836404/how-to-hide-appended-input-names-when-the-value-is-empty)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:15:37.520

标题属性不存储在`serializeArray`. 你必须`.map`直接使用`$(".content :input")`

```
function showValues() {
   var tokens = $(".content :input").map(function() {
       return (this.value) ? (this.value + ' ' + this.title) : null;
   }).get();
   $("#contentlist_copy").val(tokens.join(', '));
}
$("input").change(showValues);
showValues(); 
```

# python - 如何从过程中将项目附加到全局列表

> ID：15841587
> 
> 赞同：10
> 
> 时间：2013-04-05T19:06:12.107
> 
> 标签：python, global-variables, append

执行此操作时出现语法错误：

```
p = []
def proc(n):
    for i in range(0,n):
        C = i
        global p.append(C) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-05T19:11:22.513

只需将其更改为以下内容：

```
def proc(n):
    for i in range(0,n):
        C = i
        p.append(C) 
```

该[`global`](http://docs.python.org/2/reference/simple_stmts.html#global)语句只能在函数的最顶部使用，并且仅在分配给全局变量时才需要。如果您只是修改一个可变对象，则不需要使用它。

下面是一个正确用法的例子：

```
n = 0
def set_n(i):
    global n
    n = i 
```

如果没有上述函数中的 global 语句，这只会在函数中创建一个局部变量，而不是修改全局变量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T10:23:22.920

问题是您尝试直接打印列表而不是在打印之前转换为字符串，并且由于数组是学生类的成员，因此您需要使用“自我”来引用它。

以下代码有效：

```
class Student:
    array = []
    def addstudent(self,studentName):
        print("New Student is added "+studentName)
        self.array.append(studentName)
        print(str(self.array))
    def removeStudent(self,studentName):
        print("Before Removing the Students from the  list are "+ str(self.array))
        self.array.remove(studentName)
        print("After Removing the students from the list are "+ str(self.array))
if __name__ == '__main__':
   studata = Student()
   studata.addstudent("Yogeeswar")
   studata.addstudent("Linga Amara")
   studata.addstudent("Mahanti")
   studata.removeStudent("Yogeeswar") 
```

# bash - 在 for 循环中获取多个扩展名以转换 jpg、JPG 和 jpeg 文件

> ID：15841588
> 
> 赞同：3
> 
> 时间：2013-04-05T19:06:14.560
> 
> 标签：bash, shell

我想将当前目录中的所有 jpg（独立于小写或大写或 jpeg 扩展名）转换为 95% 优化的文件。但是，我没有在我的 for 循环中正确获取 JPG、jpg 和 jpeg 文件的文件：/

```
#!/bin/bash
PIC=$(ls "$PWD"/*.{jpg,jpeg,JPG})
for i in $PIC
  do
   echo $i
   # convert $i -quality 95 ${i%.*}_resaved.jpg
done 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T19:11:02.280

尝试：

```
find -iname "*.jpg" -o -iname "*.jpeg" | while read f; do
  echo "$f"
  convert "$f" -quality 95 "${f%.*}_resaved.jpg"
done 
```

# ocaml - Defunctorizer for OCaml

> ID：15841589
> 
> 赞同：3
> 
> 时间：2013-04-05T19:06:14.470
> 
> 标签：ocaml, functor

In the past, Julien Signoles programmed `ocamldefun`, a program that took OCaml source code with functors and obtained an equivalent program without functors. This is useful for optimization, analysis and other purposes.

It seems that `ocamldefun` is no longer maintained. Does there exist some equivalent tool?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:20:27.140

Markus Mottl 展示了一个 camlp4 技巧来进行编译时仿函数实例化（有一些限制）。看看[这里](https://bitbucket.org/mmottl/ocaml-prog-pats/overview)

# html - 单选按钮选择多个

> ID：15841591
> 
> 赞同：1
> 
> 时间：2013-04-05T19:06:17.703
> 
> 标签：html, angularjs, radio-button

在使用 Angular 连接后端时，我有一个输入类型的收音机。然而，它目前允许多选，这完全是奇怪的，因为收音机默认是单选的。

```
<div ng-repeat="s in survey">
  <input type="radio" data-ng-model="s.isSelected">{{s.id}}
</div> 
```

有没有人遇到过这个，或者注意到我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:09:18.717

`name`为同一组中的所有单选按钮分配具有相同值的属性。

前任：

```
 <input type="radio" name="group1" data-ng-model="s.isSelected">{{s.id}} 
```

# python - write table cell real-time python

> ID：15841592
> 
> 赞同：0
> 
> 时间：2013-04-05T19:06:18.267
> 
> 标签：python, real-time, pymongo

I would like to loop trough a database, find the appropriate values and insert them in the appropriate cell in a separate file. It maybe a csv, or any other human-readable format. In pseudo-code:

```
for item in huge_db:
   for list_of_objects_to_match:
      if itemmatch():
         if there_arent_three_matches_yet_in_list():
            matches++
            result=performoperationonitem()
            write_in_file(result, row=object_to_match_id, col=matches)
         if matches is 3:
            remove_this_object_from_object_to_match_list() 
```

can you think of any way other than going every time through all the outputfile line by line? I don't even know what to search for... even better, there are better ways to find three matching objects in a db and have the results in real-time? (the operation will take a while, but I'd like to see the results popping out RT)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:59:37.080

假设`itemmatch()`是一个相当简单的函数，这将比你的伪代码做我认为你想要的更好：

```
for match_obj in list_of_objects_to_match:
  db_objects = query_db_for_matches(match_obj)
  if len(db_objects) >= 3:
      result=performoperationonitem()
      write_in_file(result, row=match_obj.id, col=matches)
  else:
      write_blank_line(row=match_obj.id)  # if you want 
```

然后诀窍就变成了编写`query_db_for_matches()`函数。没有详细信息，我假设您正在寻找与某个特定字段匹配的对象，称之为`type`. 在 pymongo 中，这样的查询看起来像：

```
def query_db_for_matches(match_obj):
    return pymongo_collection.find({"type":match_obj.type}) 
```

为了让它有效地运行，请确保您的数据库在您正在查询的字段上具有索引，方法是首先调用：

```
pymongo_collection.ensure_index({"type":1}) 
```

您第一次调用`ensure_index`它可能需要很长时间才能获得大量收藏。但是每次之后它都会很快——足够快，你甚至可以把它放在`query_db_for_matches`你的前面`find`，这很好。

# php - MySQL 和 PHP 语句中的错误

> ID：15841595
> 
> 赞同：-2
> 
> 时间：2013-04-05T19:06:32.557
> 
> 标签：php, mysql, while-loop

我有以下代码，但它似乎打破了`$result = $mysqli->query($query);`声明中的页面。我究竟做错了什么？

```
$ids = join(',',$newArray);  
$query = "SELECT name, image FROM logos WHERE id IN ($ids)";
$result = $mysqli->query($query);

while ($row = $result->fetch_assoc()) {
 $imageLink = $row['logoImageLink'];

 echo "<li><img src=\"$imageLink\"/></li>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:39:55.387

如果您提供错误，它将帮助我们回答问题。因为我回答了你的最后一个问题：

您很可能需要定义`$mysqli`，如下所示：

```
$mysqli = new mysqli("localhost", "user", "password", "database"); 
```

# ruby - Opscode Nagios Cookbook Not pulling Cloud IP address

> ID：15841597
> 
> 赞同：1
> 
> 时间：2013-04-05T19:06:37.483
> 
> 标签：ruby, amazon-web-services, chef-infra, nagios, cookbook

I am trying to generate the nagios hosts.cfg file from the standard opscode nagios cookbook. Using the standard recipe I am continually getting the same errors from the following lines:

```
 Chef::Mixin::Template::TemplateError (undefined method `[]' for nil:NilClass) on line #19:

     17:   if node['cloud'].nil? && !n['cloud'].nil?
     18:     ip = n['cloud']['public_ipv4'].include?('.') ? n['cloud']['public_ipv4'] : n['ipaddress']
     19:   elsif !node['cloud'].nil? && n['cloud']['provider'] != node['cloud']['provider']
     20:     ip = n['cloud']['public_ipv4'].include?('.') ? n['cloud']['public_ipv4'] : n['ipaddress']
     21:   else
     22:     ip = n['ipaddress'] 
```

The full File is here:

[http://pastebin.com/FqcdUnSE](http://pastebin.com/FqcdUnSE)

Notations on the original file were as follows:

```
 <% # decide whether to use internal or external IP addresses for this node
    # if the nagios server is not in the cloud, always use public IP addresses for cloud nodes.
    # if the nagios server is in the cloud, use private IP addresses for any
    #   cloud servers in the same cloud, public IPs for servers in other clouds
    #   (where other is defined by node['cloud']['provider'])
    # if the cloud IP is nil then use the standard IP address attribute.  This is a work around
    #   for OHAI incorrectly identifying systems on Cisco hardware as being in Rackspace 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:24:39.413

Instead of trying to fix this, I did the following workaround:

```
 define host {
    use server
    address <%= node['ipaddress'] %>
    host_name <%= node[node['nagios']['host_name_attribute']] %>
    hostgroups <%= node['nagios']['server_role'] %>,<%= node['os'] %>
    } 
```

This worked instead of using the cloud ip configs.

# blackberry - bb and windows or microsoft equivalent to ios webkit

> ID：15841605
> 
> 赞同：1
> 
> 时间：2013-04-05T19:06:54.137
> 
> 标签：blackberry, html-email

Can you please advise – certain code to be added to stop blackberry devices changes the font size, it might be a bb equivalent of ios -webkit-text-size-adjust? Blackberry: [https://s3.amazonaws.com/resultcaptures/bbf72760-1234-4efa-9e57-647b723624d1.fullpage.png](https://s3.amazonaws.com/resultcaptures/bbf72760-1234-4efa-9e57-647b723624d1.fullpage.png)

same here the

tag font size is supposed 11px – a windows or Microsoft equivalent of ios -webkit-text-size-adjust HTC Windows 7.5 [https://s3.amazonaws.com/resultcaptures/c0076514-4f30-47a2-9603-07474f5a3c4d.fullpage.png](https://s3.amazonaws.com/resultcaptures/c0076514-4f30-47a2-9603-07474f5a3c4d.fullpage.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T03:49:34.070

```
@media (max-width: 800px) {* td { -webkit-text-size-adjust:none !important; }} 
```

[强制黑莓中正确的字体大小以在 HTML 电子邮件中呈现？](https://stackoverflow.com/questions/12372898/force-the-correct-font-size-in-blackberry-for-rendering-in-an-html-email)

# android - Adt bundle, eclipse segmentation fault, on linux

> ID：15841615
> 
> 赞同：1
> 
> 时间：2013-04-05T19:07:19.350
> 
> 标签：android, eclipse

I'm new to Android devt. so I've been trying to follow the instructions.

I'm running Ubuntu 12.04 on an Asus 1201n laptop.

I have downloaded the adt bundle into my home directory and started eclipse.

I fixed the hyperlinks so they properly display the right help pages (really what kind of release is that?)

When I try to launch the virtual device manager, I get a segmentation fault...

Any ideas would be a great help. Thanks, Bob

```
~/adt-bundle-linux-x86-20130219/eclipse$ ./eclipse 
(ADT:5792): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed
(ADT:5792): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed
(ADT:5792): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed
(ADT:5792): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed
(ADT:5792): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed
(ADT:5792): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed
(ADT:5792): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed
(ADT:5792): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed
(ADT:5792): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed
(ADT:5792): LIBDBUSMENU-GTK-CRITICAL **: watch_submenu: assertion `GTK_IS_MENU_SHELL(menu)' failed
No bp log location saved, using default.
[000:000] Browser XEmbed support present: 1
[000:000] Browser toolkit is Gtk2.
[000:000] Using Gtk2 toolkit
No bp log location saved, using default.
[000:454] No bp log location saved, using default.
[000:455] Browser XEmbed support present: 1
[000:455] Browser toolkit is Gtk2.
[000:455] Using Gtk2 toolkit
[000:000] No bp log location saved, using default.
java version "1.6.0_27"
OpenJDK Runtime Environment (IcedTea6 1.12.3) (6b27-1.12.3-0ubuntu1~12.04.1)
OpenJDK Client VM (build 20.0-b12, mixed mode, sharing)
Segmentation fault 
```

# java - 在数据库中存储 jXDatePicker1 日期值时出错

> ID：15841616
> 
> 赞同：0
> 
> 时间：2013-04-05T19:07:28.970
> 
> 标签：java, sql, derby, swingx

我正在使用 swingxLabs 的组件 jXDatePicker1 以图形格式选择日期并尝试将其存储在 derby 制作的数据库中。我的代码是这样的：

```
Date date=jXDatePicker1.getDate();

 PreparedStatement statement = connect
      .prepareStatement("INSERT INTO BILLING (DATE, DHRNUMBER) VALUES('"+date+"', "+dhrNumber+")"); 
```

我得到的错误是：

```
java.sql.SQLDataException: The syntax of the string representation of a datetime value is incorrect. 
```

我做对了吗？或者可以有其他方法来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:48:14.083

Derby 的内置 DATE 数据类型支持字符串格式的简短列表：http: [//db.apache.org/derby/docs/10.9/ref/rrefsqlj18730.html](http://db.apache.org/derby/docs/10.9/ref/rrefsqlj18730.html)

由于您使用的是 PreparedStatement，因此最好的办法是准备语句

```
INSERT INTO BILLING (DATE, DHRNUMBER) VALUES(?,?) 
```

然后使用 setDate() 和 setInt() 方法替换您的实际值：http: [//docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:06:33.853

这种替代方案对我完全有用：

```
 Date d=jXDatePicker1.getDate();
    System.out.println(d);
    DateFormat df=new SimpleDateFormat("MM/dd/yyyy");
    String date=df.format(d);
    System.out.println(date);

PreparedStatement statement = connect
      .prepareStatement("INSERT INTO BILLING (DATE) VALUES('"+date+"')"); 
```

# ruby-on-rails - 如果 action_name Rails

> ID：15841617
> 
> 赞同：7
> 
> 时间：2013-04-05T19:07:32.033
> 
> 标签：ruby-on-rails, ruby

例如，我使用 if action_name 来定义布局

```
layout :layout_by_action_name

def layout_by_action_name
  if action_name == 'new'
    "layout_file"
  else
    "application"
  end
end 
```

如何添加另一个动作名称`new`，例如`edit`. 我试过：

```
layout :layout_by_action_name

def layout_by_action_name
  if action_name == 'new' && 'edit'
    "layout_file"
  else
    "application"
  end
end 
```

但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T19:09:03.590

尝试：

```
if action_name == "new" or action_name == "edit" 
```

或者：

```
if ["new", "edit"].include? action_name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T19:11:30.220

你可能想要这个：

```
if action_name == 'new' || action_name == 'edit' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-23T11:30:59.397

所以我尝试了 MrDanA 的答案，但它需要括号才能工作，如下所示：

```
if ["new", "edit"].include?(action_name) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-22T15:48:49.443

Rails 3.1+ 提供了这个`in?`方法，所以你现在可以这样写：

```
layout :layout_by_action_name

def layout_by_action_name
  if action_name.in?('new','edit')
    'layout_file'
  else
    'application'
  end
end 
```

在 Rails 4+ 中，你可以更简洁地做到这一点，因为 layout 需要一个 proc：

```
layout ->{ action_name.in?('new','edit') ? 'layout_file' : 'application' } 
```

另一方面，如果您有一组特别复杂的需求，那么案例陈述可能更有意义：

```
def layout_by_action_name
  case action_name
  when 'new','edit'
    'layout_file'
  when 'delete'
    'other_file'
  else
    'application'
  end
end 
```

最后，您可以通过在调用中指定布局来以老式方式执行此操作`render`：

```
def new
  ...
  render layout: 'layout_file'
end

def edit
  ...
  render layout: 'layout_file'
end 
```

如果您只是覆盖少量操作的布局，最后一个甚至可能是最佳选择，因为它非常清晰。

# javascript - Active link background

> ID：15841618
> 
> 赞同：0
> 
> 时间：2013-04-05T19:07:35.880
> 
> 标签：javascript, html, css

I am trying to keep a background image for active link and hover for a navigational bar on this site

**Sitelink:** `http://67.23.226.231/~edutubei/onepage/#about`

using below code

```
$(document).ready(function() {
  $('#navigation a[href^="#' + location.pathname.split("#")[1] + '"]').addClass('current'); 
}); 
```

with the below css

```
ul.navigation .current{
  background:url(../images/current_page.png) no-repeat right bottom;
}    
ul.navigation .current a, ul.navigation .current a:hover{
  color:#FFF;
} 
```

but this is not working how can i keep a background image/highlight the active and hover links

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:22:26.527

你的选择器不对。它应该是 '.navigation' 代替 '#navigation'

location.pathname 仅返回 /~edutubei/onepage/。所以你必须改用 window.location.href 。

```
 $('.navigation a[href="#' + window.location.href.split("#")[1] + '"]').addClass('current'); 
```

# json - @XmlValue 的 JAXBContext 处理

> ID：15841625
> 
> 赞同：2
> 
> 时间：2013-04-05T19:08:07.933
> 
> 标签：json, jaxb, eclipselink, moxy

我在我的代码中遇到了这个问题：当除了声明的字段之外的所有字段都为`@XmlValue`空时，MOXy 会将该字段编组，就好像它是整个对象的唯一值一样。我意识到这可能是一个有目的的实现，但我想知道是否有任何解决方法。注意：我目前正在使用 eclipselink moxy，但这似乎是所有 jaxb 绑定的标准

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class foo {
@XmlValue
private final String name;
@XmlAttribute(name = "name2", required = true)
private final String name2;
>....getters, setters, etc....<
public foo(String name, String name2) {
    this.name = name;
    this.name2 = name2;
    }
} 
```

我只是在跑步

```
JAXBContext jc = JAXBContext.newInstance(moxyTest.foo.class);

    Marshaller marsh = jc.createMarshaller();

    marsh.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    marsh.setProperty("eclipselink.media-type", "application/json");
    StringWriter strWriter = new StringWriter();
    foo example = new foo("blah", null);

    marsh.marshal(example, strWriter); 
```

我希望我的输出是

```
{
   "foo" : {
       value: "blah"
    }
} 
```

但是由于`@XmlValue`注释，它是

```
{
   "foo" : "blah"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:58:56.933

**更新**

此问题现已在 EclipseLink 2.5.1 和 2.6.0 流中得到修复。**从2013 年 8 月 8 日**开始，您可以从以下链接下载包含此修复程序的每晚构建版本。

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

* * *

**原始答案**

我为此问题打开了以下错误。您可以使用它来跟踪我们的进度。

*   [http://bugs.eclipse.org/405039](http://bugs.eclipse.org/405039)

# c++ - 用于大型向量的空间高效 C++ 向量分配器？

> ID：15841631
> 
> 赞同：2
> 
> 时间：2013-04-05T19:08:14.440
> 
> 标签：c++, memory-management, stdvector

我正在使用一些 C++ 代码来实现使用大量小内存块的图形算法（gSpan 的一个亲戚，但这并不重要）。该代码是用 C++ 实现的，并使用 std::vectors 来存储许多小元素（每个大约 64 个字节）。但是，我在比原始作者更大的数据集上使用它，而且内存不足。

但是，我似乎过早地耗尽了内存。碎片化？我怀疑这是因为 std::vectors 每次需要更多内存时都试图增加大小，而向量坚持使用连续内存。我有 8GB 的​​内存和 18GB 的​​交换空间，但是当 std::bad_alloc 被抛出时，我只使用 6.5GB 常驻内存和 ~8GB 虚拟内存。我已经捕获了 bad_alloc 调用并打印出向量大小，这就是我所看到的：

```
size: 536870912
capacity: 536870912
maxsize: 1152921504606846975
terminate called after throwing an instance of 'std::bad_alloc'
    what():  std::bad_alloc 
```

所以，很明显，我们已经达到了向量的最大大小，库试图分配更多，但失败了。

所以我的问题是：

*   我是否正确假设这是问题所在？
*   解决方案是什么（除了“购买更多 RAM”）。我愿意用 CPU 时间换取内存。
*   我应该将整个代码转换为使用 std::list （并以某种方式在代码使用它的地方实现 operator[] 吗？）.. 那会更高效吗？至少它会允许列表元素是不连续的......对吗？
*   是否有更好的分配器可以用来覆盖此用例的向量标准？
*   我还缺少哪些其他解决方案？

由于我不知道最终将使用多少内存，我知道即使我进行了更改，仍然可能没有足够的内存来进行计算，但我怀疑我至少可以走得更远，然后我得到现在，这似乎很快就放弃了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:29:40.263

我会尝试将`std::deque`其用作`vector`. 有一种可能性是，由于它（通常）使用一组块，扩展`deque`a 可能比扩展 a 便宜得多`vector`（就所需的额外内存而言）。

# jprofiler - 如何在 OS/X 10.8.3 64 位上将 JProfiler 7.2.2 与 Scala IDE 3.0.0 集成？

> ID：15841632
> 
> 赞同：0
> 
> 时间：2013-04-05T19:08:14.630
> 
> 标签：jprofiler, scala-ide

JProfiler 可以很好地集成到 IntelliJ IDEA 12.0.4 和 Eclipse 4.2.2 中，但它没有集成到 Scala IDE 3.0.0 中。

我全新安装了 Scala IDE 3.0.0（基于 Eclipse Indigo）和 JProfiler 7.2.2。并在“Window->Customize Perspective”下启用了“Profile”操作。

配置文件按钮全部被禁用，并且在 Preferences 对话框中没有 JProfiler 条目。

没有明显的错误消息，但 ~/.jprofiler7/config.xml 不包含 eclipse 3.7 的集成条目。包括成功的 IntelliJ 和 Eclipse 4.2.2 条目，相关部分如下所示：

```
<integrations>
  <netbeansConfig targetDir="" />
  <eclipseConfig targetDir="/Applications/eclipse-4.2.2" />
  <ideaConfig targetDir="/Users/richard/Library/Application Support/IntelliJIdea12" />
  <jdeveloperConfig targetDir="" />
</integrations> 
```

是否支持 Scala IDE 3.0.0？

**编辑**

JProfiler 集成将这些文件安装在 Eclipse 应用程序文件夹下：

```
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/META-INF
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/META-INF/MANIFEST.MF
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/eclipse3-jprofiler.jar
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/icons
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/icons/bundle_obj.gif
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/icons/eclipse_launcher.gif
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/icons/java_app.gif
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/icons/java_applet.gif
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/icons/jprofiler.png
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/icons/julaunch.gif
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/icons/julaunchpgn.gif
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/icons/swt_launcher.gif
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/jprofiler.properties
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/plugin.properties
/Applications/eclipse/plugins/com.jprofiler.integrations.eclipse/plugin.xml 
```

我还注意到 Eclipse 3.7 的 JProfiler 安装中没有集成 zip 文件：

```
/Applications/jprofiler7/integrations/eclipse33-jprofiler.zip
/Applications/jprofiler7/integrations/eclipse34-jprofiler.zip
/Applications/jprofiler7/integrations/eclipse35-jprofiler.zip
/Applications/jprofiler7/integrations/eclipse36-jprofiler.zip
/Applications/jprofiler7/integrations/eclipse42-jprofiler.zip 
```

**编辑 2** 这些日志文件都没有提到探查器：

```
$ locate log | grep eclipse | grep "\.log$"
/Applications/eclipse/Eclipse 4.2 Classic.app/Contents/Profile/configuration/1365105032164.log
/Applications/eclipse/Eclipse 4.2 Classic.app/Contents/Profile/configuration/1365105063165.log
/Applications/eclipse/Eclipse 4.2 Classic.app/Contents/Profile/configuration/1365185736428.log
/Applications/eclipse/configuration/org.eclipse.update/install.log
/Users/richard/.eclipse/610389151/configuration/1345715718730.log
/Users/richard/coursera/progfun/workspace/.metadata/.plugins/org.eclipse.ui.views.log
/Users/richard/workspaces/eclipse37/.metadata/.log
/Users/richard/workspaces/eclipse42/.metadata/.log 
```

**编辑 3** 这是工作区的 .metadata.log 文件的内容”

```
!SESSION 2013-04-10 09:48:50.570 -----------------------------------------------
eclipse.buildId=3.0.0-vfinal-20130326-1146-Typesafe
java.version=1.6.0_43
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
Framework arguments:  -keyring /Users/richard/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -keyring /Users/richard/.eclipse_keyring -showlocation

!ENTRY org.eclipse.core.net 1 0 2013-04-10 09:49:10.083
!MESSAGE System property http.nonProxyHosts has been set to local|*.local|169.254/16|*.169.254/16 by an external source. This value will be overwritten using the values from the preferences 
```

# jquery - JQuery .click() 函数或 .text() 不更改文本

> ID：15841633
> 
> 赞同：-2
> 
> 时间：2013-04-05T19:08:17.927
> 
> 标签：jquery

我不知道为什么当单击按钮时，以下代码不会将“Hi”更改为“Does this work”。我对 JQuery 很陌生，但从我所看到的情况来看，这里没有任何问题。帮助会很棒。谢谢！

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        $("#btn1").click(function(){
            $("#textplace").text("Does this work?");
        });
    });
</script>
</head>
<body>
    <label>Text should appear here</label>
        <p id="textplace">hi</p>
    <button id="btn1">Click here</button>
</body>
</html> 
```

我有这个 JQuery，其中“btn1”是一个按钮，“textplace”是一个`<p>`. 该段落被硬编码为“嗨”。但是当我单击按钮时，文本不会改变。btn1 和 textplace 都是 button 和 p 的 id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:19:57.200

尝试这个：

```
$("#btn1").click(function () {
    $("#textplace").prev('label').text("Does this work?");
}); 
```

# c# - 如何在 WCF 中将接口用作 DataContract

> ID：15841636
> 
> 赞同：2
> 
> 时间：2013-04-05T19:08:27.183
> 
> 标签：c#, wcf, interface, datacontract, operationcontract

我需要使用标准 wsdl 调用 web 服务操作，但客户端和服务器中的数据对象必须不同。

使用通用库中数据对象的接口，在客户端和服务器中为其创建代理类。

然后，我使用接口声明操作合同，但 WCF 不识别它。

我还尝试过使用 DataContractSerializerBehavior 并设置 knownTypes，但还没有成功。

有人可以帮我吗？我附上了一个包含更多细节的完整解决方案。

```
public interface Thing
{
   Guid Id {get;set;}
   String name {get;set;}
   Thing anotherThing {get;set;}
}

[DataContract]
public class ThingAtServer: BsonDocument, Thing // MongoDB persistence
{ 
   [DataMember]
   Guid Id {get;set;}
   //... 
}

[DataContract]
public class ThingAtClient: Thing, INotifyPropertyChanged // WPF bindings
{ 
   [DataMember]
   Guid Id {get;set;}
   //... 
}

[ServiceContract]
public interface MyService
{
  [OperationContract]
  Thing doSomething(Thing input);
} 
```

**单击此处在 GitHub 上查看带有 TestCases的[示例项目](https://github.com/josefernandotolentino/InterfaceDataContract)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:35:58.033

我用合同创建了 WCF 服务：

```
[OperationContract]
CompositeTypeServer GetDataUsingDataContract( CompositeTypeServer composite ); 
```

我的`CompositeTypeServer`样子是这样的：

```
[DataContract( Namespace = "http://enes.com/" )]
public class CompositeTypeServer
{
    [DataMember]
    public bool BoolValue { get; set; }

    [DataMember]
    public string StringValue { get; set; }
} 
```

然后我创建了类型为的客户端项目`CompositeTypeClient`：

```
[DataContract( Namespace = "http://enes.com/" )]
public class CompositeTypeClient
{
    [DataMember]
    public bool BoolValue { get; set; }

    [DataMember]
    public string StringValue { get; set; }
} 
```

然后我添加了对我的服务的引用并选择重用类型。一切都像魅力一样。我能够`CompositeTypeClient`在客户端使用。

所以诀窍是为 DataContract 指定命名空间，以便它们在客户端和服务上都匹配。

```
[DataContract( Namespace = "http://enes.com/" )] 
```

PS。我可以根据要求提供完整的 VS 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:55:35.157

根据`ServiceKnownTypeAttribute`（[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceknowntypeattribute.aspx)），我根据情况更改了预期的类型。主要思想在类中实现，负责根据情况`XHelper`返回正确的：`Type[]`

```
public static class XHelper
{

    public static Boolean? IsClient = null;
    public static Type[] ClientTypes;
    public static Type[] ServerTypes;

    public static IEnumerable<Type> GetKnownTypes(ICustomAttributeProvider pProvider)
    {
        if (!IsClient.HasValue)
            throw new Exception("Invalid value");
        if (IsClient.Value)
            return ClientTypes;
        return ServerTypes;
    }
} 
```

您必须在具有to know类`ServiceKnownType`的接口中包含标记。`ServiceContract``XHelper`

```
[ServiceContract(Namespace = MyProxyProvider.MyNamespace)]
[ServiceKnownType("GetKnownTypes", typeof(XHelper))]
public interface MyService
{
    [OperationContract]
    Thing2 CopyThing(Thing1 input);
} 
```

在测试单元开始时，它被告知`Type[]`每种情况的权利：

```
 [AssemblyInitialize]
    public static void TestInitialize(TestContext pContext)
    {
        XHelper.ClientTypes = new Type[] { typeof(Thing1ProxyAtClient), typeof(Thing2ProxyAtClient), typeof(Thing2ProxyAtClient) };
        XHelper.ServerTypes = new Type[] { typeof(Thing1ProxyAtServer), typeof(Thing2ProxyAtServer), typeof(ThingNProxyAtServer) };
    } 
```

**单击此处查看 GitHub 上带有 TestCases的最终代码[示例项目](https://github.com/josefernandotolentino/InterfaceDataContract)**

# javascript - angularjs $resource 类级回调，或后处理

> ID：15841642
> 
> 赞同：9
> 
> 时间：2013-04-05T19:08:52.433
> 
> 标签：javascript, angularjs, ngresource

我有一个`$resource`其 API 将始终返回一些需要在进入表示层之前清理的数据。具体来说，它是 .NET 以可爱的`'/Date(...)/'`格式返回 Date 对象。

我不想每次打电话`.query()`或`.get()`. 是否有某种方法可以通过在更新实例属性的 REST 方法上调用的回调来扩展资源，或者通过添加某种`$watch`在日期属性更改时触发的回调？基本上每个 this 实例都会发生一些事情`$resource`。

```
angular.module('myAppServices', ['ngResource'])
    .factory('Participant', ['$resource', function ($resource) {
        var res = $resource('api/url/participants/:id', { id: '@id' });

        // This obviously doesn't work, but something kinda like this?
        res.prototype.$watch(this.FieldName, function(newVal, oldVal) {
            if (needsCleaning(newVal.fieldName) {
                this.FieldName = cleanupField(newVal);
            }
        };
    }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T20:08:03.367

啊哈，我找到了解决方法，并将其留在这里。在 1.1.2 版本中，他们添加了对将所有`$http.config`选项传递给`$resource`. 当然，我使用的 CDN 没有足够新的 angular-resource.js 版本，但切换 CDN 解决了​​这个问题。

我只是使用该`transformResponse`选项在数据返回时对其进行修改。

```
angular.module('myAppServices', ['ngResource'])
    .factory('Participant', ['$resource', '$http', function ($resource, $http) {
        var res = $resource('api/url/participants/:id', { id: '@id' }, {
        save: {
            method: 'POST',
            transformResponse: $http.defaults.transformResponse.concat([
                function (data, headersGetter) {
                    data.FieldName = yourDateParsingFunction(data.FieldName);

                    return data;
                }
            ])
        }
    }); 
```

我只是将我`$httpProvider`的转换器添加到 transformResponse 中，它将完成所有的反序列化等。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T20:00:12.013

一种简单的方法是用自己的方法覆盖`$resource`您想要进行后处理的现有方法。有关示例，请参见下面的代码和注释。

```
angular.module('myAppServices', ['ngResource'])
    .factory('Participant', ['$resource', function ($resource) {
        var res = $resource('api/url/participants/:id', { id: '@id' }, {
            // create aliases for query and get to be used later
            _query: { method: 'GET', isArray: true },
            _get:   { method: 'GET' }
        });

        // redefine the query method
        res.query = function() {
            // call the original query method via the _query alias, chaining $then to facilitate
            // processing the data
            res._query.apply(null, arguments).$then(function(res) {
                var data = res.data;
                // do any processing you need to do with data here
                return data;
            });
        };

        // redefine the  method
        res.get = function() {
            // call the original get method via the _get alias, chaining $then to facilitate
            // processing the data
            res._get.apply(null, arguments).$then(function(res) {
                var data = res.data;
                // do any processing you need to do with data here
                return data;
            });
        };

        return res;
    }); 
```

您可以像当前`Participant`在代码中使用它一样使用它，通过`Participant.query()`或`Participant.get()`。您在链接的 $then 处理程序中返回的数据将用于解决`$resource`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T12:47:59.267

我这样做的方法是向模块添加服务：

```
angular.module('keeniolab', ['ngResource']).
factory('KeenIO',function ($resource) {
    // factory implementation
}).service('KeenModel', function (KeenIO) {
    var KeenSession = function () {
        this.data = {};
    };

    KeenSession.prototype.fetch = function (query) {
        var self = this;

        KeenIO.get(query, function (result) {
            self.data = result;
        });
    };

    return new KeenSession();
}); 
```

现在您可以简单地监视集合：

```
$scope.$watchCollection(function () {
    return KeenModel.data;
},
function (value) {
    // code here
}); 
```

[具有服务模型的 Keen.IO 资源工厂](https://gist.github.com/webhat/5721162)

# java - Android 处理程序和线程在开始时没有运行？

> ID：15841644
> 
> 赞同：2
> 
> 时间：2013-04-05T19:08:58.743
> 
> 标签：java, android, multithreading, handler, runnable

我试图在我的应用程序开始时创建一个处理程序，这样我就可以让两个线程工作 1 UI 和 2 我的服务器，我这样做是为了服务器不会阻止 UI 滞后，并且有用地整理我的滞后问题，但无论如何，我正在查看这个网站[http://crodrigues.com/updating-the-ui-from-a-background-thread-on-android/](http://crodrigues.com/updating-the-ui-from-a-background-thread-on-android/)，这家伙创建了一个可运行的方法，运行方法，还有一个叫做 updateGame 的方法，它总是在运行该方法时被调用，现在我已经像这样尝试了他的代码

```
public class MainActivity extends Activity {

private static final String TAG = gameObject.class.getSimpleName();
//Create a handler to deal with the server
private Handler serverHandler = new Handler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //Turn off title
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    //Make the application full screen
    getWindow().setFlags(
            WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView( new gamePanel( this ) );
    Log.d( TAG, "View added" );

    //Server method
    new Thread(new Runnable() { onServer( ); } ).start( );
}

final Runnable updateRunnable = new Runnable() {
    public void run() {
        //call the activity method that updates the UI
        updateGame();
    }
};

//Give the positions to the game
public void updateGame()
{
    Log.d(TAG, "Update that game");
}

//Update/run the server
private void onServer()
{
    if( gamePanel.rtnServerState() == true )
    {
        Log.d(TAG, "Start the server");
    }

    serverHandler.post( updateRunnable );
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onDestroy()
{
    Log.d( TAG,  "Destroying... " );
    super.onDestroy();
}

public void onStop()
{
    Log.d( TAG,  "Stopping... " );
    super.onStop();
}
} 
```

而我的 updateGame 只运行一次。谁能看到为什么它不能在后台继续运行的问题？

帆布

更新帖子

```
public class MainActivity extends Activity {

private static final String TAG = gameObject.class.getSimpleName();
private final Handler serverHandler = new Handler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //Turn off title
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    //Make the application full screen
    getWindow().setFlags(
            WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView( new gamePanel( this ) );

    TextView textView = new TextView(this);
    textView.setTextSize(40);
    String message = "hello";
    textView.setText(message);

    Log.d( TAG, "View added" );
    //Server method
    new Thread(new Runnable() { 

    @Override
    public void run() { onServer( ); } } ).start( );
}

private void updateServer()
{
    Log.d(TAG, "testing");
}

//Update/run the server
private void onServer()
{
    if( gamePanel.rtnServerState() == true )
    {
        Log.d(TAG, "Start the server");
    }

    serverHandler.post( updateRunnable );
}

//Update/server
final Runnable updateRunnable = new Runnable() {
    public boolean running = true;
    public void run() {
        while(running){
            //call the activity method that updates the UI
            updateServer();
        }
    }
};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onDestroy()
{
    Log.d( TAG,  "Destroying... " );
    super.onDestroy();
}

public void onStop()
{
    Log.d( TAG,  "Stopping... " );
    super.onStop();
}
} 
```

更新编号 2

```
public class MainActivity extends Activity {

private static final String TAG = gameObject.class.getSimpleName();
private final Handler serverHandler = new Handler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //Turn off title
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    //Make the application full screen
    getWindow().setFlags(
            WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView( new gamePanel( this ) );

    TextView textView = new TextView(this);
    textView.setTextSize(40);
    String message = "hello";
    textView.setText(message);

    Log.d( TAG, "View added" );
    //Server method
    Runnable server = new Runnable() {
        public boolean running = true;
        public void run() {
            while(running){
                onServer();  // Make sure this blocks in some way
            }
        }
    };
}

private void updateServer()
{
    Log.d(TAG, "testing");
}

//Update/run the server
private void onServer()
{
    if( gamePanel.rtnServerState() == true )
    {
        Log.d(TAG, "Start the server");
    }

    serverHandler.post( updateRunnable );
}

//Update/server
final Runnable updateRunnable = new Runnable() {
    public void run() {
        //call the activity method that updates the UI
        updateServer();
    }
};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onDestroy()
{
    Log.d( TAG,  "Destroying... " );
    super.onDestroy();
}

public void onStop()
{
    Log.d( TAG,  "Stopping... " );
    super.onStop();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:11:29.773

Runnable*对象*的`run`方法只被调用一次，在一个新的线程被创建以响应你的`.start()`调用之后。

通常你会做类似的事情：

```
final Runnable myRunnable = new Runnable() {
    public boolean running = true;
    public void run() {
        while(running){
            doSomething();
        }
    }
}; 
```

但我不确定这是最好的方法。该`updateGame()`方法将不断被不必要地调用。

相反，将您的服务器逻辑放在可运行的`run()`方法中。在那里使用`while(running){...}`我上面列出的构造，但要确保那里有一些阻塞调用。无论是来自网络套接字、BlockingQueue 等。这样它就不会不必要地循环。

* * *

**编辑**

来自评论中的讨论。离开

```
final Runnable updateRunnable = new Runnable() {
    public void run() {
        //call the activity method that updates the UI
        updateGame();
    }
}; 
```

照原样改变

```
new Thread(new Runnable() { onServer( ); } ).start( ); 
```

到

```
Runnable server = new Runnable() {
    public boolean running = true;
    public void run() {
        while(running){
            onServer();  // Make sure this blocks in some way
        }
    }
}
new Thread(server).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:20:44.677

在教程中，UI 仅在按钮单击时更新，但您只在`onCreate`方法中执行一次。如果您以@jedwards 的方式执行此操作，您的 UI 将在您编写时冻结。不要一直更新 UI。尝试使用[timer](http://developer.android.com/reference/java/util/Timer.html)或使用[sockets](http://developer.android.com/reference/java/net/Socket.html)更新它。它会更有效，并且您的 UI 不会冻结。

定时器示例

```
import java.util.Timer;
import java.util.TimerTask;
...

TimerTask task = new TimerTask() {
    @Override
    public void run() {
        // update UI
    }
};
Timer timer = new Timer();
// 1000 - after 1 second run this timer
// 3000 - and do it every 3 second
timer.schedule(task, 1000, 3000); 
```

我不会写套接字示例，因为要写的东西太多了。我找到[了本](http://www.edumobile.org/android/android-development/socket-programming/)教程，您可以在其中阅读有关 android 套接字编程的信息。

顺便说一句，当然您应该只使用套接字或计时器更新实体数据，而不是整个 UI。

# ios - iOS：MDM 与无线配置文件交付和配置之间的区别

> ID：15841645
> 
> 赞同：3
> 
> 时间：2013-04-05T19:09:00.920
> 
> 标签：ios, mobile, configuration

我正在寻找 iOS 世界上的设备管理解决方案，我发现了两种方法：移动设备管理 ( [http://www.apple.com/ipad/business/it-center/deployment-mdm.html](http://www.apple.com/ipad/business/it-center/deployment-mdm.html) ) 和 Over -the-Air 配置文件交付和配置 ( [http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/Introduction/Introduction.html) )。但是，我似乎无法找到两种方法之间的区别，或者在实践中两者是否相同。有人可以澄清这个话题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:07:37.400

移动设备管理是一个更广泛的术语，包括配置管理、应用程序管理等。而 OTA 部署是一种关于如何将配置文件发送到设备的机制。OTA 配置文件交付的替代方案是，

1.  使用 IPCU
2.  电子邮件
3.  使配置文件在 Web 位置可用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-22T15:38:27.833

无线配置文件交付用于在 iOS 设备上交付配置文件。虽然 MDM 使用该机制来传递其初始（MDM 配置）有效负载，但相似之处到此为止。MDM 也可以提供配置文件，但它可以做的更多。

例如：

*   删除配置文件
*   安装和删除应用程序
*   锁定/擦除设备
*   等等

# java - 320x480 Android (Galaxy Ace) 的配置限定符

> ID：15841651
> 
> 赞同：0
> 
> 时间：2013-04-05T19:09:23.073
> 
> 标签：java, android, dpi, screen-size

我有一个应用程序，我正在努力使 Galaxy Ace 320*480 mdpi 看起来正确。

使用 drawable-sw320dp-mdpi 似乎会影响大多数其他屏幕，例如 Galaxy S2 (480*800 hpdi)，即使我有一个应该在更高分辨率上自动使用的 drawable-sw480dp 等？

对此感到非常困惑，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:57:37.497

My guess is if it's not showing up right on the Ace, that it's identifying itself as a different screen size/density than you think it should be. My guess is that it's actually a lower density than you think, but without some kind of screen shots or further description on what you're seeing I don't know anyone can offer much more help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:01:57.567

//you need to run this in API level 13 OS version 3.2 and above.

for the < 3.2 you need to declare normal `drawable-mdpi`

as your samsung ACE OS version might be 2.2.1

# javascript - jQuery Mobile 脚本中的 url 参数未发出警报

> ID：15841652
> 
> 赞同：0
> 
> 时间：2013-04-05T19:09:34.603
> 
> 标签：javascript, jquery, jquery-mobile, parameter-passing

在我的第一个 html 页面中单击文章链接后，第二个页面的 URL 如下所示：

localhost/basket/newstext.html?url= [http://www.basket-planet.com/ru/news/9235](http://www.basket-planet.com/ru/news/9235)

在 JS 中，我试图获取 url=... 并对其进行处理。这是我的脚本：

page2.html：

```
<body>
  <div data-role="page" id="newstext">
    <div data-role="content">
      <div id="textcontent"></div>
    </div>
  </div>
<script src="js/newstext.js"></script>
</body> 
```

新闻文本.js：

```
$('#newstext').bind('pageshow', function(event) {
var url = getUrlVars()["url"];
alert (url);
});

function getUrlVars() {
var vars = [], hash;
var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
for(var i = 0; i < hashes.length; i++)
{
    hash = hashes[i].split('=');
    vars.push(hash[0]);
    vars[hash[0]] = hash[1];
}
return vars;
} 
```

如果您需要查看我的第一页以及 js 和 php 文件，请告诉我。奇怪的是我以前和现在都在工作……我不知道发生了什么。我尝试将脚本放在头部标签之间，但不起作用。这里有什么问题？

# php - php array_search 具有多次点击的单个数组

> ID：15841655
> 
> 赞同：6
> 
> 时间：2013-04-05T19:09:47.687
> 
> 标签：php, arrays

我正在做一个日历，每天可能有超过 1 个与日期匹配的事件。目前，我对如何使用array_search 发现比第一个匹配项更多的内容感到困惑。这就是我现在正在做的事情。

```
if (array_search($date_today, $event_start) !== FALSE ) {
     $date_match = array_search($date_today, $event_start);
     $name       = $event_name[$date_match];    
   } 
```

我可以使用“while”或“for each”语句推进 array_search 以查找多个匹配项吗？万一这很重要，我的日期变量是像 1368680400 这样的日期。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T19:12:38.050

[array_search 的文档](http://www.php.net/manual/en/function.array-search.php)告诉我们：

> 如果在 haystack 中多次找到 needle，则返回第一个匹配的键。要返回所有匹配值的键，请使用带有可选 search_value 参数的 array_keys()。

# c++ - 无法在我的矩阵中插入符号

> ID：15841656
> 
> 赞同：0
> 
> 时间：2013-04-05T19:09:48.700
> 
> 标签：c++, visual-studio

我在这里写了一个矩阵，它在屏幕上显示得很好，但我想把符号放进去。我似乎无法让符号 (X) 出现在其中。抱歉，这是我第一次使用数组。

```
#include <iostream>
#define WIDTH 70    
#define HEIGHT 20
using namespace std;

void main ()
{
    char world[HEIGHT][WIDTH];
    // draws matrix
    for ( char i = 0; i < HEIGHT; i++ ) {
            for ( char j = 0; j < WIDTH; j++ ) {
                world[i][j] = '.';
                cout << world[i][j];
            }
            cout << endl;
    }
    // 1st symbol at coordinates 1, 1
    int x, y;
    x = 1, y = 1;
    world[x][y] = 'x';
    cout << world[x][y];

    // 2nd symbol at coordinates 2, 2
    x = 2, y = 2;
    world[x][y] = 'x';
    cout << world[x][y];

    //so on.. 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:13:24.603

您必须*先插入*`x`s，然后*打印*网格，而不是相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:15:58.327

首先，`main`应该声明为要么`int main()`或`int main(int argc, const char* argv[])`；它当然不会返回`void`。

标准输出`cout`按顺序工作。您只需告诉它要打印什么，它就会一个接一个地打印。考虑以下：

```
int x = 1;
std::cout << x;
x = 2;
std::cout << x; 
```

因为我们更改了 的值，`x`然后`cout`再次将其传递给，所以您似乎期望输出为：

```
2 
```

实际上输出是：

```
12 
```

`cout`不在乎我们将相同的变量传递了两次。它只是一个接一个地打印我们给它的每一件事。

你将不得不设置你想成为的矩阵的每个元素`'x'`，然后再次循环并打印出来。

# javascript - 在 Windows 7 上运行 Docco 时出现问题

> ID：15841658
> 
> 赞同：0
> 
> 时间：2013-04-05T19:09:55.907
> 
> 标签：javascript, docco

我在 Windows 7 上运行 Docco 时遇到问题。我执行了以下操作：

1.  下载并安装了python和perl
2.  安装节点js
3.  运行 npm install -g 咖啡脚本
4.  运行 easy_install pygments
5.  运行 npm install -g pygments
6.  运行 npm install -g docco

我使用 javascript 源导航到目录：

```
C:\javascript>docco animation.js
docco: animation.js -> docs\animation.html

fs.js:427
  return binding.open(pathModule._makeLong(path), stringToFlags(flags), mode);
                 ^
Error: ENOENT, no such file or directory 'C:\javascript\docs\animation.html'
    at Object.fs.openSync (fs.js:427:18)
    at Object.fs.writeFileSync (fs.js:966:15)
    at write (C:\Users\myaccount\AppData\Roaming\npm\node_modules\docco\docco.js:111:15)
    at C:\Users\myaccount\AppData\Roaming\npm\node_modules\docco\docco.js:29:11

    at fs.js:266:14
    at Object.oncomplete (fs.js:107:15) 
```

知道问题是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:14:03.193

查看 Docco 资源，这就是问题所在：

```
ensureDirectory = function(dir, callback) {
  return exec("mkdir -p " + dir, function() {
    return callback();
  });
}; 
```

换句话说：它假定`mkdir`存在一个名为的可执行文件，并使用它来创建必要的目录（包括输出目录）。但是`mkdir`是 Unix 主义，并且（通常）在 Windows 上不可用。所以它失败了（并且由于 Docco 没有检查任何错误，它愉快地继续，好像什么都没发生......）。

**编辑：**似乎这些问题[最近得到了修复](https://github.com/jashkenas/docco/pull/181)，所以如果你使用 Github 托管的 Docco 版本，你可能会得到它的工作。

# asp.net-mvc - MVC 控制器返回内容而不是 JSON

> ID：15841660
> 
> 赞同：0
> 
> 时间：2013-04-05T19:10:02.837
> 
> 标签：asp.net-mvc, json, model, controller

我一直在做一个项目，我的所有要求都涉及 JSON。但是现在突然我需要从我的模型中返回可以在输入元素值字段中使用的结果。我无法使用我一直使用的解决方案，因为我得到了返回的对象而不是值的纯文本。这是我一直在使用的控制器模式：

```
public virtual JsonResult fooData()
{
    var fooresults = new fooQueries().fooTotal();
    return new JsonResult 
        { JsonRequestBehavior = JsonRequestBehavior.AllowGet, Data = fooresults };
} 
```

有没有办法使用返回内容而不是 JsonResult？我对 .NET MVC 框架相当陌生，并且很难找到正确的方法来做到这一点。

我当前的结果格式如下：

```
[{ "foo", 3 }] 
```

相反，我更喜欢获取纯文本，以便我可以使用 AJAX 请求将 3 值传递到输入元素 value="" 字段。

我与控制器一起使用的 AJAX 调用：

```
$.ajax({
    type: 'GET',
    url: $('#fooValue').data('url'),
    success: function (data) {
        $('#fooValue').val(data);
    }
}); 
```

data-url 等价于：

```
../fooController/fooData 
```

我只是在使用 T4MVC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:12:44.180

返回 a`ContentResult`而不是 a`JsonResult`

```
public virtual ContentResult gooData()
{
    var fooresults = new fooQueries().fooTotal();
    return Content(fooresults);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:42:39.440

我不确定它的形状`fooresults`是什么，但您应该能够将您的 AJAX 调用更改为以下内容：

```
$.ajax({
   type: 'GET',
   url: $('#fooValue').data('url'),
   success: function (data) {
    $('#fooValue').val(data.foo);
   }
}); 
```

如果未明确设置 jQuery ajax 调用的 dataType 属性，则 jQuery 将尝试根据 MIME 类型推断返回结果的类型，在您的情况下将是 JSON。因此 jQuery 会将 JSON 反序列化为 JSON 对象。有关详细信息，请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:14:42.083

您可以将内容返回为：

```
return Content(fooresults); 
```

但这对您将元素分开，因为 JSON 返回是不干净的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T17:43:11.370

要返回 Json，方法应更改如下：

```
public JsonResult fooData()
{
    var fooresults = new fooQueries().fooTotal();
    return  Json(fooresults , JsonRequestBehavior.AllowGet);    
} 
```

# java - Junit 最佳实践：公共方法调用多个私有方法

> ID：15841662
> 
> 赞同：5
> 
> 时间：2013-04-05T19:10:05.253
> 
> 标签：java, unit-testing, junit, junit4

我开始为遗留代码库编写 JUnit 测试用例。其中一个公共方法有多个 if 语句，并根据条件调用不同的私有方法。
**我应该只编写一种测试方法并测试所有条件吗？**或**每种情况的一种方法？**

如果我为每个 if 条件编写单独的方法，我不会失去一致性吗？

测试私有方法的方法是什么？私有方法逻辑可能比公共方法更复杂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:20:13.303

方法的数量取决于您要测试的场景数量，它与被测试的事物所具有的方法无关。

如果每个场景都使用自己的代码进行设置，那么您将获得每个场景的一种测试方法。如果您可以对测试进行参数化，那么您可以使用一种测试方法并为每个场景传递不同的数据。

重要的是，对于每种输入组合，您希望测试独立于其他测试成功或失败。如果您将所有测试硬塞到一个方法中，那么这不会发生，第一个测试失败将阻止其余测试运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:14:38.767

我同意内森的观点。测试应该通过场景而不是方法。有时遗留代码的编写方式需要您直接测试私有方法。是的，代码应该被重构。但是，如果您不能重构或想要先进行测试...

**选项 1 - 使方法包私有访问**

这是一个非常安全的重构。

**选项 2 - 使用反射直接调用静态方法**

如果你真的不能触摸代码，这是你能做的最好的。我会质疑不触摸代码的要求。如果我们不能改进代码，我们应该把它留在角落里腐烂吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:18:34.367

从我的角度来看，在单元测试中使用较小的单元通常会导致更好的测试。对您来说，这意味着将私有方法更改为封装私有并为每个方法编写测试。

# mysql - MySQL错误'表中不存在键列'

> ID：15841663
> 
> 赞同：1
> 
> 时间：2013-04-05T19:10:07.267
> 
> 标签：mysql

这是我在命令行中的输入，您可以看到我尝试以不同的方式添加外键并不断收到相同的错误我做错了什么？

```
mysql> create table membership(

-> m_no char(3) primary key,
-> m_fname varchar(15) not null,
-> m_lname varchar(15) not null,
-> m_street varchar(30) not null,
-> m_city varchar(20) not null,
-> m_st char(2) not null,
-> m_balance varchar(3)); 
```

查询正常，0 行受影响（1.06 秒）

```
mysql> create table rental(

-> r_no char(4) primary key,
-> r_date date not null,
-> foreign key (m_no) references membership(m_no));
ERROR 1072 (42000): Key column 'm_no' doesn't exist in table

mysql> create table rental(
-> r_no char(4) primary key,
-> r_date date not null,
-> foreign key (m_no) references membership);
ERROR 1072 (42000): Key column 'm_no' doesn't exist in table

mysql> create table rental(
-> r_no char(4) primary key,
-> r_date date not null,
-> foreign key (m_no) references membership)
-> engine=innodb;
ERROR 1072 (42000): Key column 'm_no' doesn't exist in table

mysql> create table rental(

-> r_no char(4) primary key,
-> r_date date not null,
-> foreign key (m_no) references membership(m_no))
-> engine=innodb;
ERROR 1072 (42000): Key column 'm_no' doesn't exist in table

mysql> create table rental(

-> r_no char(4) primary key,
-> r_date date not null); 
```

查询正常，0 行受影响（0.22 秒）

```
mysql> alter table rental add foreign key (m_no) references membership(m_no);

ERROR 1072 (42000): Key column 'm_no' doesn't exist in table 
```

mysql>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:13:40.267

错误说明很清楚。您的出租表中没有名为“m_no”的列。

这就是你所追求的：

```
Create table rental
(
    r_no char(4) primary key,
    r_date date not null,
    foreign key (r_no) references membership(m_no)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:12:23.057

正如错误消息所述：`rental`没有名为`m_no`.

要么引用现有列（即`FOREIGN KEY (r_no) REFERENCES membership(m_no)`），要么将`m_no`列添加到`rental`. 我不确定您要做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T19:12:44.690

您必须更改对表中`r_no`列的外键引用`rental`：

```
create table rental(
 r_no char(4) primary key,
 r_date date not null,
 foreign key (r_no) references membership(m_no)); 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/4be5c)

# r - 如何制作一个列联表，其中一个变量根据给定的休息时间进行分类

> ID：15841671
> 
> 赞同：3
> 
> 时间：2013-04-05T19:10:44.487
> 
> 标签：r

给定一个如下的data.frame

```
ID  Card.Type  Mount
001   Basic    500
002   Basic    400
003   Basic    700
004   Basic    1000
005   Silver   1200
006   Silver   1300
007   Basic    800
008   Silver   1400
009   Gold     2500
0010  Gold     5000
0012  Gold     7000
0013  Gold     15000 
```

我想创建一个列联表，其中的值`Mount`根据向量分类为区间`B=c(0,100,500,1000,2000,3000,4000,5000)`。结果将是这样的表：

```
Card.Type   0-100 101-500 501-1000 1001-2000 2001-3000 3001-4000 4001-5000 >5000
Basic         0       2      2         0          0        0         0       0
Silver        0       0      0         3          0        0         0       0
Gold          0       0      0         0          1        0         1       2 
```

我正在尝试一个`data.table`解决方案，但无法得到这个结果。如何制作此表或在调用`table()`函数以获得此结果时添加额外选项？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T19:16:53.703

```
DF <- read.table(text="ID  Card.Type  Mount
001   Basic    500
002   Basic    400
003   Basic    700
004   Basic    1000
005   Silver   1200
006   Silver   1300
007   Basic    800
008   Silver   1400
009   Gold     2500
0010  Gold     5000
0012  Gold     7000
0013  Gold     15000",header=TRUE)

DF$inter <- cut(DF$Mount,c(-1,100,500,1000,2000,3000,4000,5000,Inf))
table(DF[,c(2,4)])

# Card.Type (-1,100] (100,500] (500,1e+03] (1e+03,2e+03] (2e+03,3e+03] (3e+03,4e+03] (4e+03,5e+03] (5e+03,Inf]
# Basic        0         2           3             0             0             0             0           0
# Gold         0         0           0             0             1             0             1           2
# Silver       0         0           0             3             0             0             0           0 
```

# javascript - 注入的 li 项目未使用 CSS 样式格式化

> ID：15841675
> 
> 赞同：-7
> 
> 时间：2013-04-05T19:10:55.797
> 
> 标签：javascript, jquery, jquery-mobile, markup, jquery-mobile-listview

附件找到了一个显示元素注入的 jfiddle `<li>`- 所有方式的输出都没有定义的 CSS - 与硬编码`<li>`的相反 - 为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:19:47.360

动态添加的列表视图元素必须使用此功能增强其标记：

```
$('#listviewID').listview('refresh'); 
```

工作示例：http: [//jsfiddle.net/Gajotres/LrAyE/](http://jsfiddle.net/Gajotres/LrAyE/)

如果您收到此错误：

> 无法在初始化之前调用 listview 上的方法

然后用这个重新设置你的列表视图：

```
$('#listviewID').listview().listview('refresh'); 
```

第一个 listview 函数将初始化 listview，第二个函数将重新设置它的样式。但只有在显示前面提到的错误时才这样做。

最后一件事，如果您使用 for 循环或每个循环添加大量 li 元素，则只有在所有内容都添加到 ul 元素后才使用 listview('refresh') 。

在我的另一篇文章/答案中阅读有关它的更多信息：**[jQuery Mobile：动态添加内容的标记增强](https://stackoverflow.com/a/14550417/1848600)**，搜索章节：**增强单个组件/小部件**。

# python - python pandas set_value不持久？

> ID：15841679
> 
> 赞同：1
> 
> 时间：2013-04-05T19:11:03.240
> 
> 标签：python, pandas, setvalue

我正在尝试用 Python 编写一个小程序来跟踪一年多的股票投资组合，所以基本上记录每一次买卖，并跟踪余额。我正在浏览订单列表并更新我保存投资组合的 Pandas 数据框。代码看起来很晦涩，但我对 Pandas/numpy 很陌生：

```
orders_book = DataFrame(np.zeros((num_of_days,num_of_companies+1)), ldt_timestamps, columns = book_keys)

for equity_sym in ls_symbols[1:2]:
    for trade_date in ldt_timestamps:
        if trade_date == ldt_timestamps[0]:
            current_number = orders_book.xs(trade_date)[equity_sym]
        for transaction in trades:
            transaction_date = transaction[0]
            transaction_sym  = transaction[1]
            if ( ( trade_date == transaction_date ) and (equity_sym == transaction_sym ) ):
                transaction_order  = transaction[2]
                transaction_number =  transaction[3]
                if str(transaction_order) == 'Buy':
                    current_number += transaction_number
                if str(transaction_order) == 'Sell':
                    current_number -= transaction_number
        orders_book.ix[trade_date,equity_sym, current_number] = current_number 
```

[equity_sym] 我保留了这些评论来说服你，我通过在运行时打印我检查了这个复杂的循环工作正常（如你所见，我`orders_book`使用更新`set_value`）。但是，当循环结束时，我尝试简单`print orders_book['GOOG']`，然后`orders_book`看起来就像开始时一样，即循环之前。这是为什么？感谢您的帮助:)

编辑：代码现在已更改并且可以正常工作。这不是 Panda 的错，而是代码中更新/写入功能的错误放置。感谢您的努力！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:24:17.293

根据Pandas 作者的[这个回答](https://stackoverflow.com/a/10132552/419338)`set_value`，返回对新对象的引用。您需要使用`concat` 或`append`向数据表中添加行。请参阅 Pandas 手册中的[“合并、连接和连接”部分。](http://pandas.pydata.org/pandas-docs/stable/merging.html)

# java - Android mp4 视频无法在模拟器和设备中播放

> ID：15841683
> 
> 赞同：1
> 
> 时间：2013-04-05T19:11:17.493
> 
> 标签：java, android, video-streaming, mp4

我想在我的 Android 应用程序中从我的 Android 手机流式传输 mp4 视频。视频存储在服务器中。我只有他们的网址。我尝试了下面的代码，但它没有播放我的视频（它在模拟器和设备上都可以正常使用 .3gp 视频）我使用的是 Galaxy Y 硬件，而模拟器是 4.2 版的 Android。请不要引用我的任何链接，老实说，我做了很多搜索，但所有这些都是徒劳的。我不能使用`WebView`，我必须`VideoView`在我的应用程序中使用。代码是：

```
private void playVideo() {

    try {

    final String path = mPath.getText().toString();
        Log.v(TAG, "path: " + path);
        if (path == null || path.length() == 0) {
            Toast.makeText(MainActivity.this, "File URL/path is empty",
                    Toast.LENGTH_LONG).show();

    } else {
            // If the path has not changed, just start the media player
            if (path.equals(current) && mVideoView != null) {
                mVideoView.start();
                mVideoView.requestFocus();
                return;
            }
            current = path;
            mVideoView.setVideoPath(getDataSource(path));
            mVideoView.start();
            mVideoView.requestFocus();

        }
    } catch (Exception e) {
        Log.e(TAG, "error: " + e.getMessage(), e);
        if (mVideoView != null) {
            mVideoView.stopPlayback();
        }
    }
} 
```

将路径初始化为链接的位置：

`path = http://download.itcuties.com/teaser/itcuties-teaser-480.mp4`

任何帮助将不胜感激。

# visual-studio-2010 - 一个按计时器间隔移动的VB进度 条？

> ID：15841689
> 
> 赞同：0
> 
> 时间：2013-04-05T19:11:35.710
> 
> 标签：visual-studio-2010

我在 Visual Basic 2010 中制作程序，想知道进度条是否可以在计时器上移动记帐？如果是的话，这对我目前的任务非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T21:32:13.650

在 VB.NET 中尝试这样的事情：

```
Do

    Threading.Thread.Sleep(100)
    ProgressBar1.PerformStep() 

Loop Until ProgressBar1.Value >= ProgressBar1.Maximum 
```

[http://checktechno.blogspot.com/2013/03/example-progressbar-in-visual-basic.html](http://checktechno.blogspot.com/2013/03/example-progressbar-in-visual-basic.html)

或在 C# 中：

```
do {
    System.Threading.Thread.Sleep(100);
    ProgressBar1.PerformStep();
} while (!(ProgressBar1.Value >= ProgressBar1.Maximum)); 
```

其中“睡眠”设置为 100 毫秒的常数。您只需将该值动态设置为您的计时器。

# jquery - 我正在尝试选择输入的复选框类型，然后附加表格列

> ID：15841693
> 
> 赞同：0
> 
> 时间：2013-04-05T19:11:52.163
> 
> 标签：jquery

我有多个输入类型复选框-如果选中其中任何一个，我想附加一列（仅一次）-即，如果在第一个复选框类型之后标记了任何其他复选框类型，我不想添加再次列，它确实继续这样做。对于每个复选框类型的输入，我确实只添加了一次。但是，我还想在整个文档中添加一列（即在页面上的所有复选框中）。

这是代码的相关部分

```
<table id="edhist_table" >
<tr id="table_headings">
    <th>Graduated?</th>     
</tr>

    <tr>            
       <td><input type="checkbox" name="college_grad" value="yes">yes</input></td>

</tr>   
<tr id='grad_part'>

    <td><input type="checkbox" name="grad_grad1" value="yes">yes</input></td>   

</table>

<script>
//if any of the checkboxes are checked  - shoudl append column  
$( "[type=checkbox]").one("click",function() {
    $( "#table_headings" ).append("<th id='degree_heading'>Degree/Certificate Name</th>"); 
```

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:13:55.923

每个`.one`元素最多执行一次，这意味着它将为每个元素触发一次（这会导致重复。您需要检查元素是否已添加，如果未添加。您可以将其更改为：

```
$( "[type=checkbox]").one("click",function() {
   if ( $( "#table_headings #degree_heading" ).length==0)
      $( "#table_headings" ).append("<th id='degree_heading'>Degree/Certificate Name</th>");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:14:36.137

只需关闭您的功能：

```
$( "[type=checkbox]").one("click",function() {
    $( "#table_headings" ).append("<th id='degree_heading'>Degree/Certificate Name</th>");
}); // <-- Here 
```

演示：http: [//jsfiddle.net/pYx6b/](http://jsfiddle.net/pYx6b/)

# c - 为什么我不需要在打印之前取消引用 C 中的字符指针？

> ID：15841696
> 
> 赞同：9
> 
> 时间：2013-04-05T19:11:55.753
> 
> 标签：c

为什么这段代码有效？我希望我需要取消引用`ptr`， `printf("%s\n", *ptr);`然后才能打印出来，但`Segmentation Fault`如果我尝试这样做，我会得到一个。

```
#include <stdio.h>

int main(int argc, char *argv[])
{
        char name[] = "Jordan";
        char *ptr = name;
        printf("%s\n", ptr);
} 
```

希望大家能给我一些见解。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-05T19:14:35.867

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-05T19:14:40.273

This is because the `%s` format specifier in the format string you pass to `printf` means that the corresponding argument should be a string, not a single character. And in C, a string is a pointer to the beginning of a block of characters that has a null character (byte with a value of 0) at the end.

Basically, this works because you're doing exactly what you're supposed to in order to print a string.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T19:15:41.297

The `%s` formatter to printf expects a "string", which is really a pointer to a null-terminated array of characters.

That is to say, printf *expects* you to pass the pointer to it. When you dereference the pointer, it's taking the letter J, whose value in ascii is 74 (decimal), and tries treating that as a pointer to an array. That's an area of memory that's inaccessible, so you get the segmentation violation.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T19:14:07.423

格式说明符`%s`告诉`printf`期望一个指向以空字符结尾的字符数组的指针。这是什么`name`和`ptr`是。

`*name`而`*ptr`不是。如果你取消引用它们，你会得到一个单一的`char`，这基本上是在撒谎`printf`——导致未定义的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T19:15:05.213

`*ptr` is essentially a reference to a single `char`, not to the string of `char`'s. due to this `char *` and `char[]` are essentially the same thing

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T19:16:27.387

When you declare char *prt = name thats where you are dereferencing it. the "*" here isn't part of the variable just a way to show you want what that variable points to. If you were to put the *prt again in your printf you are doing it twice. name is an array of characters and *ptr is a dereferenced pointer to those characters.

Hope that explaination helps :-)

# bash - shell脚本含义

> ID：15841701
> 
> 赞同：0
> 
> 时间：2013-04-05T19:12:09.000
> 
> 标签：bash, shell

e我想了解这个过程有什么问题；当一个进程正在运行时，它不会返回计数。它直接回显**“No QMS process found running on $PWD”**这种情况。

```
QMS_PROCESS=`ps -ef | grep $PWD/qms_kernel | grep -v grep | cut -f6 -d' '`
QMS_PROCESS_COUNT=`echo $QMS_PROCESS | egrep [0-9] | wc -c`
if [ $QMS_PROCESS_COUNT -eq 0 ]
  then
    echo "No QMS process found running on $PWD" 
  else
    kill -15 $QMS_PROCESS
    echo "QMS process $QMS_PROCESS stopped on $PWD" 
fi 
```

任何人都可以帮助我理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:56:07.423

这种方法怎么样：

```
QMS_PROCESS=`pidof "$PWD/qms_kernel"`
if [ -z "$QMS_PROCESS" ]; then
  echo "No QMS process found running on $PWD" 
else
  kill -15 $QMS_PROCESS
  echo "QMS process ($QMS_PROCESS) stopped on $PWD" 
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:38:22.100

第一行运行`ps -ef`列出所有进程，查找特定`qms_kernel`进程，其前面有当前目录的路径（这是`$PWD`部分，有点令人惊讶），然后过滤掉`grep`命令并运行一个神秘的`cut`命令来收集第 6 个字段。

第二行计算位数，这也有点奇怪。

该`if`块检查值是否`$QMS_PROCESS_COUNT`为 0。如果是，它会报告“无 QMS 进程”，否则会尝试终止（信号 15，又称 TERM 或 SIGTERM）进程并报告进程已停止。

# c# - 如何拆分通用数组

> ID：15841702
> 
> 赞同：2
> 
> 时间：2013-04-05T19:12:15.127
> 
> 标签：c#, arrays, split

我想模仿通用数组的[String.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)功能。

我想出了这种似乎适用于双打的方法。

```
public static double[][] Split(this double[] vals, double t)
{
    List<double[]> ret = new List<double[]>();

    int last = -1;
    for (int i = 0; i <= vals.Length; i++)
    {
        if (i != vals.Length && vals[i] != t)
            continue;

        int len = i - last - 1;
        if (len <= 0)
        {
            last = i;
            continue;
        }

        double[] arr = new double[len];
        Array.Copy(vals, last + 1, arr, 0, len);
        last = i;

        ret.Add(arr);
    }

    return ret.ToArray();
} 
```

而这个用于仿制药...

```
public static T[][] Split<T>(this T[] vals, T t) where T : EqualityComparer<T>
{
    List<T[]> ret = new List<T[]>();

    int last = -1;
    for (int i = 0; i <= vals.Length; i++)
    {
        if (i != vals.Length && vals[i] != t)
            continue;

        int len = i - last - 1;
        if (len <= 0)
        {
            last = i;
            continue;
        }

        T[] arr = new T[len];
        Array.Copy(vals, last + 1, arr, 0, len);
        last = i;

        ret.Add(arr);
    }

    return ret.ToArray();
} 
```

所以，我有三个问题：

1.  有没有更好/通用的 C# 方法来做到这一点？
2.  我怎样才能让模板方法工作？（我得到一个错误`vals[i] != t`） - 现在修复
3.  我怎样才能让它变得更好（现在有点难看，IMO）

示例用法：

```
double[] vals = new double[] { 0, 1, 2, 0, 0, 2, 3, 0, 4, 5, 6 };
double[][] res = vals.Split(0);

// res[0] = [1, 2]
// res[1] = [2, 3]
// res[2] = [4, 5, 6] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:16:50.987

好吧，你可以懒惰地做它，在任何序列上，并作为一种扩展方法。我也会摆脱`IComparable<T>`约束 - 无论如何你都不会在这里使用它。您*可以*使用`CompareTo`而不是尝试使用`!=`（正如您所知道的那样，它不起作用），但由于您只对*equal*感兴趣，因此使用`EqualityComparer<T>`.

```
public static IEnumerable<IEnumerable<T>> Split<T>(this IEnumerable<T> source,
                                                   T separator)
{
    List<T> currentList = new List<T>();
    var comparer = EqualityComparer<T>.Default;
    foreach (var item in source)
    {
        if (comparer.Equals(item, separator))
        {
            yield return new ReadOnlyCollection<T>(currentList);
            currentList = new List<T>();
        }
        else
        {
            currentList.Add(item);
        }
    }
    yield return new ReadOnlyCollection<T>(currentList);
} 
```

请注意，如果您在开头或结尾有分隔符，或者重复的分隔符，这*将*返回空集合。当然，您总是可以忽略调用方的那些：

```
var nonEmptySequences = original.Split(value)
                                .Where(sequence => sequence.Any()); 
```

简短但完整的示例代码：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;

public static class MoreExtensions
{
    public static IEnumerable<IEnumerable<T>> Split<T>
        (this IEnumerable<T> source, T separator)
    {
        List<T> currentList = new List<T>();
        var comparer = EqualityComparer<T>.Default;
        foreach (var item in source)
        {
            if (comparer.Equals(item, separator))
            {
                yield return new ReadOnlyCollection<T>(currentList);
                currentList = new List<T>();
            }
            else
            {
                currentList.Add(item);
            }
        }
        yield return new ReadOnlyCollection<T>(currentList);
    }

}

class Test
{
    static void Main()
    {
        int[] source = { 0, 1, 2, 0, 0, 2, 3, 0, 4, 5, 6 };
        foreach (var group in source.Split(0).Where(x => x.Any()))
        {
            Console.WriteLine("[{0}]", string.Join(",", group));
        }
    }    
} 
```

输出：

```
[1,2]
[2,3]
[4,5,6] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:16:12.060

> 我怎样才能让模板方法工作？（我得到一个错误`vals[i] != t`）

`!=`不会为任意类型定义运算`T`符。但是，您知道`T`imments `IComparable<T>`，因此请利用：

```
vals[i].CompareTo(t) != 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T19:26:24.580

您可以使用以下通用扩展方法通过某些分隔符拆分序列。它使用默认比较器将每个项目与分隔符进行比较。

```
public static IEnumerable<T[]> Split<T>(this IEnumerable<T> source, T separator)
{
    List<T> bucket = new List<T>();
    var comparer = Comparer<T>.Default;

    foreach (var item in source)
    {
        if (comparer.Compare(item, separator) != 0)
        {
            bucket.Add(item);
            continue;
        }

        if (bucket.Any())
        {
            yield return bucket.ToArray();
            bucket = new List<T>();
        }
    }

    if (bucket.Any())        
        yield return bucket.ToArray();        
} 
```

用法：

```
double[] vals = new double[] { 0, 1, 2, 0, 0, 2, 3, 0, 4, 5, 6 };
double[][] res = vals.Split(0).ToArray(); 
```

# regex - 用户定义的正则表达式模式匹配，如何？

> ID：15841705
> 
> 赞同：0
> 
> 时间：2013-04-05T19:12:18.997
> 
> 标签：regex, shell, sed, awk

我得到了一个复杂的文件，其内容如下：

[原始文件](https://bitbucket.org/albertop/twophaseeulerpimplefoam/src/d009d119637c/testCases/fallingBlockFine/system/fvSolution)

```
AAA
{      
  "(BBB|KKK)"
  {
    B_1 abc;
    B_2 bcd;
    B_3 efg;
    B_4 xyz;
  }

  CCC
  {
    C_1 cbc;
    C_2 dcd;
  }
}

DDD
{

  EEE
  {
    E_1 ebc;
    E_2 fcd;
  }

  "(FFF|LLL|MMM|NNN)"
  {
    F_1 gbc;
    F_2 hcd;
  }
}

GGG
{
  G_1 ibc;
}

HHH
{
  III
  {
    JJJ
    {
      J_1 jbc;
      J_2 kbc;
    }
  }
} 
```

我想使用 awk 或一些工具来获取输出（仅举个例子）

```
F_1 = gbc
G_1 = ibc
J_1 = jbc 
```

我的问题是：如何定义正则表达式模式以便匹配，首先说搜索关键字，然后输出最近的手镯和`FFF`之间的内容？`{``}`

```
F_1 gbc;
F_2 hcd; 
```

然后可以进一步传输这些内容，并使用`grep`我可以获得`gbc`item的值`F_1`。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:29:37.047

这是一个仅适用于第二级嵌套组数据的脚本：

```
$ awk -v var="FFF" '$1=="}"{p=0}p{sub(/^ */,"");print};$1==var{p=1;getline}' file
F_1 gbc;
F_2 hcd; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T22:16:57.093

这将允许您“定义一个正则表达式模式以便匹配，首先说搜索关键字 FFF，然后输出最近的手镯 { 和 } 之间的内容”：

```
$ gawk -v RS='\0' '{ print gensub(/.*\yFFF\y[^{]+{[[:space:]]*\n([^}]+)\n[[:space:]]*}.*/,"\\1","") }' file
    F_1 gbc;
    F_2 hcd; 
```

不要将输出通过管道传输到 grep。无论您想要什么，都可以在单个 awk 调用中轻松完成。

# python - For 循环标题取决于 if 语句（Python）

> ID：15841708
> 
> 赞同：0
> 
> 时间：2013-04-05T19:12:25.160
> 
> 标签：python, if-statement, for-loop, python-2.7, numpy

我想写一个条件for循环，如果一个数组的长度为1，使用一个for循环标题，如果这个len（array）> 1和== len（array2），使用不同的for循环标题，如果这些条件都不是真的，退出我选择的错误。真正的问题是我不想有这个 if 语句，然后是 for 循环，当 for 循环实际上是相同的时，除了标题，而且相当长，所以加倍代码似乎是一种浪费。

有没有一种很好的方法可以做到这一点，我只需要编写一次 for 循环的内容吗？

注意：xarray 和 tarray 是多维 numpy 数组，即）xarray = array([[1,2,3],[4,5,6]])

代码片段如下所示：

```
if len(tarray) > 1 and len(xarray) == len(tarray):
        for x,ts in zip(xarray,tarray):
           #stuff
if len(tarray) == 1:
        for x in xarray:
           #same stuff as above for loop
else:
        print 'Dimension Mismatch -- Quitting:'
        quit() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:22:00.210

如果 for 循环的内容相同，那么您可以从两个 for 循环中调用一个包含公共代码的函数。

如果您希望满足条件，则需要检查 if 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:38:08.600

如果我正确理解您的问题，在 for 循环之前您应该能够执行以下操作：

```
try:
    xx, tt = np.broadcast_arrays(xarray,tarray)
 except ValueError:
    # raised if two arrays cannot be broadcast together

for x, t in zip(xx,tt):
    # do stuff 
```

因此，例如：

```
>>> xarray = np.arange(6).reshape((2,3))
>>> tarray = np.atleast_2d(np.arange(3))
>>> xarray
array([[0, 1, 2],
       [3, 4, 5]])
>>> tarray
array([[0, 1, 2]])
>>> xx, tt = np.broadcast_arrays(xarray,tarray)
>>> xx
array([[0, 1, 2],
       [3, 4, 5]])
>>> tt
array([[0, 1, 2],
       [0, 1, 2]])
>>> tarray = np.arange(6,12).reshape((2,3))
>>> tarray
array([[ 6,  7,  8],
       [ 9, 10, 11]])
>>> xx, tt = np.broadcast_arrays(xarray,tarray)
>>> tt
array([[ 6,  7,  8],
       [ 9, 10, 11]]) 
```

我还建议事先检查`xarray`和`tarray`都是二维的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T19:49:10.460

这应该有效：

```
if len(tarray) >= 1:
    res = zip(tarray, xarray) if len(tarray) == len(xarray) else xarray
else:
    # Error message

for each in res:
    # Do some stuff 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T20:04:04.567

为了`for`在运行时更改循环头，您可以使用`exec`.

```
codeToRun = "";

if len(tarray) > 1 and len(xarray) == len(tarray):
        codeToRun += """for x,ts in zip(xarray,tarray): """
elif len(tarray) == 1:
        codeToRun += """for x in xarray:"""
else:
        codeToRun += """print 'Dimension Mismatch -- Quitting:'
        quit()"""

exec codeToRun + """# rest of code """ 
```

请参阅[如何在 Python 中执行包含 Python 代码的字符串？](https://stackoverflow.com/questions/701802/how-do-i-execute-a-string-containing-python-code-in-python)并考虑使用`eval`.

# excel - Onclick 将查询结果从 Access 导出到 Excel

> ID：15841710
> 
> 赞同：2
> 
> 时间：2013-04-05T19:12:33.753
> 
> 标签：excel, ms-access, vba

我正在尝试将我的访问数据库中的数据导出到 Excel 电子表格。在我尝试为表单编写 onclick 事件之前，一切都很顺利。这是代码：

```
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12, "ReportQuery", "C:\helloworld.xlsx", True 
```

我得到的错误是“运行时错误 3051”Microsoft Access 数据库引擎无法打开或写入文件......它已经被另一个用户以独占方式打开，或者您需要查看和写入其数据的权限。

我很难相信引擎没有获得许可。这里有设置或我缺少的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T22:15:12.247

您似乎没有足够的权限写入 drive 的根目录`C:`。测试时，请始终选择“安全”位置（例如您的 Documents 文件夹）来创建或更新文件。

`acSpreadsheetTypeExcel12Xml`顺便说一句，如果您使用而不是`acSpreadsheetTypeExcel12`创建`.xlsx`文件时，您可能会获得更好的成功。

# php - 用于创建状态下拉列表的 PHP 数组 - 需要将特定状态设置为默认值

> ID：15841718
> 
> 赞同：0
> 
> 时间：2013-04-05T19:12:50.050
> 
> 标签：php, arrays

我有一个正在使用的插件，它使用数组创建美国各州的下拉列表，然后使用循环填充选择框。这是数组

```
//Define the US State Array to be used to generate the STATE select box
  $usStates = array(
    "AL" => "Alabama",
    "AK" => "Alaska",
    "AZ" => "Arizona",
    "AR" => "Arkansas",
    "CA" => "California",
    "CO" => "Colorado",
    "CT" => "Connecticut",
    "DE" => "Delaware",
    "FL" => "Florida",
    "GA" => "Georgia",
    "HI" => "Hawaii",
    "ID" => "Idaho",
    "IL" => "Illinois",
    "IN" => "Indiana",
    "IA" => "Iowa",
    "KS" => "Kansas",
    "KY" => "Kentucky",
    "LA" => "Louisiana",
    "ME" => "Maine",
    "MD" => "Maryland",
    "MA" => "Massachusetts",
    "MI" => "Michigan",
    "MN" => "Minnesota",
    "MS" => "Mississippi",
    "MO" => "Missouri",
    "MT" => "Montana",
    "NE" => "Nebraska",
    "NV" => "Nevada",
    "NH" => "New Hampshire",
    "NJ" => "New Jersey",
    "NM" => "New Mexico",
    "NY" => "New York",
    "NC" => "North Carolina",
    "ND" => "North Dakota",
    "OH" => "Ohio",
    "OK" => "Oklahoma",
    "OR" => "Oregon",
    "PA" => "Pennsylvania",
    "RI" => "Rhode Island",
    "SC" => "South Carolina",
    "SD" => "South Dakota",
    "TN" => "Tennessee",
    "TX" => "Texas",
    "UT" => "Utah",
    "VT" => "Vermont",
    "VA" => "Virginia",
    "WA" => "Washington",
    "WV" => "West Virginia",
    "WI" => "Wisconsin",
    "WY" => "Wyoming"
    ); 
```

和循环...

```
//Loop through the state array to build the state select box
   foreach( $usStates as $key => $value ) {
    $selected = "";
    if($_POST['orderState'] == $key) $selected = "selected";
    $wpgft_post_content .= '<option value="'.$key.'" ' . $selected . '>'. $value .'</option>';
    }
    $wpgft_post_content .='</select>';
    if($error_state) $wpgft_post_content .='<br /><span class="wpgft_error">'.$error_state.'</span></dd>';
   } else {
    $wpgft_post_content .='<dt>State / Province / Region:</dt>';
    $wpgft_post_content .= '<select name="orderState"'.$ro.'>'; 
```

如果我需要将科罗拉多州设置为默认州，我应该在哪里/如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:14:37.790

```
$wpgft_post_content .= 
    '<option value="'.$key.'" ' . ($key==='CO'?'selected':'') 
     . '>' . $value . '</option>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:16:10.730

设置另一个变量，它要么是你的 $_POST 值，要么是 colorado，如果它是空的。然后在循环中使用该 var 来检查/设置`selected`属性：

```
if (isset($_POST['orderState']) && !empty($_POST['orderState'])) {
    $state = $_POST['orderState'];
} else {
    $state = 'CO';
}

foreach($arr as $key => $val) {
    $selected = ($state == $val) ? 'selected': '';
} 
```

# android - Android 画布 - 画一个洞

> ID：15841719
> 
> 赞同：4
> 
> 时间：2013-04-05T19:13:06.407
> 
> 标签：android, canvas, paint, ondraw

是否可以在Android中用canvas实现如下图？

![带孔的图片](https://i.stack.imgur.com/zg4uw.png)

我想在黄色的红色图层上打一个洞，而不仅仅是一个圆圈。`onDraw()`我在我的-Method中使用以下代码尝试了这个（但失败了） ：

```
canvas.drawBitmap(yellow, 0, 0, paint);
canvas.drawBitmap(red, 0, 200, paint);
Paint p = new Paint();
p.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
canvas.drawCircle(300, 300, radius, p); 
```

但是当我使用这段代码时，它会在两个位图上打一个洞。最后，这个应用程序应该是一个有球、洞和其他东西的迷宫。当球掉进洞里时，它应该出现在红色位图下。是否有可能实现这一点？

**回答：**

如果有人应该有同样的问题：使用**View**而不是 SurfaceView。那是我的错，因为 SurfaceView 的背景无法设置为透明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:19:45.147

我认为您误解了画布/位图的工作方式。没有存储层或对象（除非您存储它们）。它只是所显示图像的逐像素表示。*红色方块上*的黄色圆圈就是您在上图中显示的内容。

如果你真的想要一个红色层，你必须合成两个位图。在一张位图中画出红色方块上的洞，在一张位图中画出黄色层。在画布上，绘制黄色位图，然后在顶部绘制“带孔的红色正方形”位图。

# c# - C# 或 VB.NET 中的 std::bind 等效项

> ID：15841725
> 
> 赞同：4
> 
> 时间：2013-04-05T19:13:27.300
> 
> 标签：c#, c++, vb.net, .net-4.0, stdbind

我正在将“同步”代码（即使用 Windows 事件等到其他线程完成某事）重构为“异步”代码（使用委托来实现回调机制）。

在同步代码中，有时我需要在等待结束后使用局部变量。当这样的代码异步时，那些局部变量会丢失（回调处理程序无法访问它们）。我可以将它们存储为类属性，但感觉很浪费。

在 C++ 中，我`std::bind`用来解决这个问题。我只需将尽可能多的参数添加到回调处理程序所需的局部变量，并在调用异步方法时绑定它们。例如，假设异步方法回调接收到一个类型为的对象，而调用者使用了两个类型为和`CallbackParam`的局部变量。`LocalA``LocalB`

```
void AsyncClass::MethodWhichCallsAsyncMethod(){
    LocalA localVarA;
    LocalB localVarB;
    // OnAsyncMethodDone will need localVarA and localVarB, so we bind them
    AsyncMethod( std::bind( &AsyncClass::OnAsyncMethodDone, this, std::placeholders::_1, localVarA, localVarB ) );
}

void AsynClass::AsyncMethod( std::function<void(CallbackParam)> callback ){
    CallbackParam result;
    //Compute result...
    if( callback )
        callback( result );
}

void AsyncClass::OnAsyncMethodDone( CallbackParam p, LocalA a, LocalB b ){
   //Do whatever needs to be done
} 
```

在 C# 和 VB.NET 中是否有某种等价物？使用代表或其他东西？

**更新**：为了完整起见，这是基于@lasseespeholt 回答的我的示例的 C# 等效项：

```
using System;

public class AsyncClass {

        public void MethodWhichCallsAsyncMethod() {
            var a = new LocalA();
            var b = new LocalB();
            //Anonymous callback handler (equivalent to AsyncClass::OnAsyncMethodDone)
            Action<CallbackParam> callback = result => {
                //Do what needs to be done; result, a and b can be accessed
            };
            AsyncMethod( callback );
        }

        private void AsyncMethod( Action<CallbackParam> callback ) {
            var result = new CallbackParam();
            //Compute result...
            if( callback != null )
                callback( result );
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:25:54.850

**更新：这几乎肯定不应该使用。在 C# 中使用 async/await 关键字**

你可以利用如下的闭包：

```
void MethodWhichCallsAsyncMethod()
{
    int foo = 1;

    AsyncCallback callback = result =>
    {
        Console.WriteLine(foo); // Access to foo
    };

    AsyncMethod(callback);
}

void AsyncMethod(AsyncCallback callback)
{
    IAsyncResult result = null; // Compute result
    callback(result);
} 
```

编译器生成一个包含“foo”的类，所以你不用这种方法保存任何东西，但它很干净。

# php - 如何正确连接用户？

> ID：15841729
> 
> 赞同：0
> 
> 时间：2013-04-05T19:13:42.843
> 
> 标签：php, oop, concatenation

我正在处理一个网站的分页，我到了需要突出显示页面编号的地步。

我在下面这行的语义上遇到了困难，更具体地说，**. 整个代码也在下面。

请注意，** 不是代码的一部分。

谁能帮忙把这条线放在一起。

```
 <? $saida .='<li><a'.**if $i == $_GET['page'] echo 'class="active"';**.'href="?page='.$i.'">'.$i.'</a></li>'; ?> 
```

这是我的整个代码

```
<?php

function montaTexto($texto){
    $texto = str_replace("<hr>","<hr />",$texto);
    $texto = str_replace("<hr/>","<hr />",$texto);
    $texto = explode('<hr />',$texto);

    $x = 0;
    foreach($texto as $s =>$v){
        $x++;
        $texto[$x] = $v;
    }

    if (!empty($_GET['page'])){
        $saida = $texto[$_GET['page']];
    } else {
        $saida = $texto[1];
    }

    if ($x > 1){
        $saida .= '<div class="pagination bottom">
              <p>-'.strip_tags($categoria['titulo_topo']).'-</p>
              <ul>';              
        for ($i = 1; $i <= $x; $i++){
              $saida .='<li><a'. if $i == $_GET['page'] echo 'class="active"'; .'href="?page='.$i.'">'.$i.'</a></li>';
        }
        $saida .='</ul>
              <p><a href="?page='.($x).'">&gt;&gt;</a></p>
              </div> ';
    }
    return $saida;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:16:29.220

您需要一个三元条件运算符：

```
$saida .='<li><a'. ($i == $_GET['page'] ? ' class="active"' : '') .' href="?page='.$i.'">'.$i.'</a></li>'; 
```

[你可以在这里](http://php.net/manual/en/language.expressions.php)阅读更多关于它的信息。

**编辑**修复了一个错误:)

测试：

```
$ cat paging.php 
<?php
    $_GET['page'] = '5';

    for ($i = 0; $i < 10; $i++) {
        $saida .='<li><a'. ($i == $_GET['page'] ? ' class="active"' : '') .' href="?page='.$i.'">'.$i.'</a></li>' . "\n";
    }

    var_dump($saida);
$ php paging.php 
string(345) "<li><a href="?page=0">0</a></li>
<li><a href="?page=1">1</a></li>
<li><a href="?page=2">2</a></li>
<li><a href="?page=3">3</a></li>
<li><a href="?page=4">4</a></li>
<li><a class="active" href="?page=5">5</a></li>
<li><a href="?page=6">6</a></li>
<li><a href="?page=7">7</a></li>
<li><a href="?page=8">8</a></li>
<li><a href="?page=9">9</a></li>
" 
```

# python - 主成分分析 (PCA) - 访问形状

> ID：15841730
> 
> 赞同：0
> 
> 时间：2013-04-05T19:13:43.767
> 
> 标签：python, numpy, pca, face-recognition, principal-components

我是 python 的初学者，我正在尝试将主成分分析 (PCA) 应用于一组图像。我想将图像放在矩阵中以便能够执行 PCA。我还处于起步阶段，但我遇到了错误。

```
import numpy as np
import Image
import os

#insert images to matrix
dirname = 'C:\Users\Karim\Downloads\shp_marcel_train\Marcel-Train\A'
X = [np.asarray(Image.open(os.path.join(dirname, fn))) for fn in os.listdir(dirname)]

#get dimensions
num_data,dim = X.shape 
```

它给`AttributeError: 'list' object has no attribute 'shape'`

有人可以帮忙吗？

详细教程的链接将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:18:13.883

正如您所定义的，`X`是一个列表：

```
X = [... for fn in ...] 
```

Python 列表没有形状属性。在这个列表中是 NumPy 数组，它们*确实*具有 shape 属性。所以你可以说

```
num_data = len(X)
shape_of_first_array = X[0].shape 
```

（你没有解释`dim`应该代表什么......）

* * *

这是使用 PCA 和状态向量机完成的人脸识别[示例。](http://scipy-lectures.github.io/advanced/scikit-learn/index.html#id9)这是[另一个相关的例子](http://scikit-learn.org/dev/auto_examples/applications/face_recognition.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:18:26.697

当你这样做

`[np.asarray(Image.open(os.path.join(dirname, fn))) for fn in os.listdir(dirname)]`

它将返回一个数组，该数组存储在局部变量中`X`

您正在尝试从列表中提取变量，因此会出现错误。

其中的单个元素`X`具有形状属性。因此，您需要做这样的事情（根据`shape`定义为的数据结构修改它）

`dim0 = X[0].shape`等等

# ravendb - 使用多个属性查询 RavenDB 文档

> ID：15841733
> 
> 赞同：0
> 
> 时间：2013-04-05T19:13:52.973
> 
> 标签：ravendb

我需要对匹配多个属性的文档集合进行查询。
（来自邮件列表的交叉帖子：[https](https://groups.google.com/forum/?fromgroups=#!topic/ravendb/r5f1zr2jd_o) ://groups.google.com/forum/?fromgroups=#!topic/ravendb/r5f1zr2jd_o ）

这是文件：

```
public class SessionToken
{
    [JsonProperty("jti")]
    public string Id { get; set; }

    [JsonProperty("aud")]
    public Uri Audience { get; set; }

    [JsonProperty("sub")]
    public string Subject { get; set; }

    [JsonProperty("claims")]
    public Dictionary<string, string> Claims { get; set; }
} 
```

这是测试：

```
[TestFixture] 
public class RavenDbTests 
{ 
    private IDocumentStore documentStore; 

    [SetUp]   
    public void SetUp() 
    { 
        this.documentStore = new EmbeddableDocumentStore() { RunInMemory = true }; 
        this.documentStore.Initialize(); 
    } 

    [Test] 
    public async void FirstOrDefault_WhenSessionTokenExists_ShouldReturnSessionToken() 
    { 
        var c = new SessionToken() 
                { 
                    Audience = new Uri("http://localhost"), 
                    Subject = "NUnit", 
                    Claims = new Dictionary<string, string>() 
                                { 
                                    { ClaimTypes.System, "NUnit" } 
                                } 
                }; 

        using (var session = this.documentStore.OpenAsyncSession())
        {
            await session.StoreAsync(c); 
            await session.SaveChangesAsync(); 

            // Check if the token exists in the database without using Where clause 
            var allTokens = await session.Query<SessionToken>().ToListAsync(); 
            Assert.That(allTokens.Any(x => x.Subject == "NUnit" && x.Audience == new Uri("http://localhost"))); 

            // Try getting token back with Where clause
            var token = await session.Query<SessionToken>().Customize(x => x.WaitForNonStaleResults()).Where(x => x.Subject == "NUnit" && x.Audience == new Uri("http://localhost")).ToListAsync(); 
            Assert.IsNotNullOrEmpty(token.First().Id); 
        } 
    } 
} 
```

最后一个断言是失败的。我必须承认我不确定这是我的错误还是失败。
据我了解，这应该有效。

PS。我尝试过使用独立的文档存储以及嵌入而不在内存中运行，但结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:06:12.077

你得到过时的结果。在单元测试中，您需要留出时间进行索引。

添加`.Customize(x=> x.WaitForNonStaleResults())`到您的查询中，测试应该通过。

另外，我认为您`Id`在剪切/粘贴时将属性从问题中排除，因为它不会按原样编译。

**更新**

根据评论中的讨论，问题在于您将`[JsonProperty]`属性应用于`Id`属性。由于该`Id`属性表示文档键，并且没有作为 JSON 文档的一部分进行序列化，因此您不能将`[JsonProperty]`属性应用于它。

# c++ - linux上的gcc 4.7中的std :: async是否损坏？

> ID：15841746
> 
> 赞同：5
> 
> 时间：2013-04-05T19:14:51.757
> 
> 标签：c++, asynchronous, c++11, pthreads, gcc4.7

在实际代码中使用它之前，我正在`std::async`隔离测试，以验证它在我的平台（即 ubuntu 12.10 64 位）上是否正常工作。

它有效（很少见）并且通常只是挂起。如果它对你有用，不要妄下结论。多试几次，它可能会挂起。

如果我删除 pthread_mutex 测试，它不会挂起。这是我可以重现挂起的最小代码。是否有某些原因不能将 C pthread 代码与 C++ 异步代码混合使用？

```
#include <iostream>
#include <pthread.h>
#include <chrono>
#include <future>
#include <iomanip>
#include <sstream>
#include <type_traits>

template<typename T>
std::string format_ns(T &&value)
{
    std::stringstream s;
    if (std::is_floating_point<T>::value)
        s << std::setprecision(3);

    if (value >= 1000000000)
        s << value / 1000000000 << "s";
    else if (value >= 1000000)
        s << value / 1000000 << "ms";
    else if (value >= 1000)
        s << value / 1000 << "us";
    else
        s << value  << "ns";
    return s.str();
}

template<typename F>
void test(const std::string &msg, int iter, F &&lambda)
{
    std::chrono::high_resolution_clock clock;
    auto st = clock.now();

    int i;
    for (i = 0; i < iter; ++i)
        lambda();
    auto en = clock.now();
    std::chrono::nanoseconds dur = std::chrono::duration_cast<
        std::chrono::nanoseconds>(en-st);

    std::cout << msg << format_ns(dur.count() / i) << std::endl;
}

int test_pthread_mutex()
{
    pthread_mutex_t m = PTHREAD_MUTEX_INITIALIZER;

    test("pthread_mutex_lock/pthread_mutex_unlock: ", 1000000000,
    [&]()
    {
        pthread_mutex_lock(&m);
        pthread_mutex_unlock(&m);
    });

    pthread_mutex_destroy(&m);

    return 0;
}

int test_async()
{
    test("async: ", 100,
    [&]()
    {
        auto asy = std::async(std::launch::async, [](){});
        asy.get();
    });

    return 0;
}

int main()
{
    test_pthread_mutex();
    test_async();
} 
```

这是构建命令行：

```
g++ -Wextra -Wall  --std=c++11 -pthread mutexperf/main.cpp 
```

没有构建输出消息。

这是 g++ -v 的输出

```
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.2-2ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:50:05.287

我在几台不同的计算机上进行了尝试，发现它确实像@johan 评论的那样运行良好。我调查了我正在使用的机器，发现硬盘驱动器开始出现故障的证据。它有一些坏扇区，并且`dmesg`在异常的 4 秒冻结后还报告了几次硬盘“硬重置”。奇怪，在发布问题之前我没有看到任何问题。在编译/链接或加载可执行文件时，这可能是一些微妙/间歇性的损坏。

```
[44242.380936] ata3.00: exception Emask 0x10 SAct 0x0 SErr 0x800000 action 0x6 frozen
[44242.380942] ata3.00: irq_stat 0x08000000, interface fatal error
[44242.380946] ata3: SError: { LinkSeq }
[44242.380950] sr 2:0:0:0: CDB: 
[44242.380952] Get event status notification: 4a 01 00 00 10 00 00 00 08 00
[44242.380965] ata3.00: cmd a0/00:00:00:08:00/00:00:00:00:00/a0 tag 0 pio 16392 in
[44242.380965]          res 50/00:03:00:08:00/00:00:00:00:00/a0 Emask 0x10 (ATA bus error)
[44242.380968] ata3.00: status: { DRDY }
[44242.380974] ata3: hard resetting link
[44242.700025] ata3: SATA link up 1.5 Gbps (SStatus 113 SControl 300)
[44242.704849] ata3.00: configured for UDMA/100
[44242.720055] ata3: EH complete
[44970.117542] ata3.00: exception Emask 0x10 SAct 0x0 SErr 0x800100 action 0x6 frozen
[44970.117547] ata3.00: irq_stat 0x08000000, interface fatal error
[44970.117551] ata3: SError: { UnrecovData LinkSeq }
[44970.117555] sr 2:0:0:0: CDB: 
[44970.117557] Get event status notification: 4a 01 00 00 10 00 00 00 08 00
[44970.117570] ata3.00: cmd a0/00:00:00:08:00/00:00:00:00:00/a0 tag 0 pio 16392 in
[44970.117570]          res 50/00:03:00:08:00/00:00:00:00:00/a0 Emask 0x10 (ATA bus error)
[44970.117573] ata3.00: status: { DRDY }
[44970.117579] ata3: hard resetting link
[44970.436662] ata3: SATA link up 1.5 Gbps (SStatus 113 SControl 300)
[44970.443159] ata3.00: configured for UDMA/100
[44970.456639] ata3: EH complete 
```

感谢任何花时间查看我的问题的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:04:51.743

您是否尝试复制互斥锁而不是在 lambda 中通过引用传递？

```
int test_pthread_mutex()
{
    pthread_mutex_t m = PTHREAD_MUTEX_INITIALIZER;

    test("pthread_mutex_lock/pthread_mutex_unlock: ", 1000000000,
    [=]()
    {
        pthread_mutex_lock(&m);
        pthread_mutex_unlock(&m);
    });

    pthread_mutex_destroy(&m);

    return 0;
} 
```

# c#-4.0 - 为什么当引用改变时可变的 StringBuilder 的行为就像不可变的字符串？

> ID：15841748
> 
> 赞同：3
> 
> 时间：2013-04-05T19:14:55.160
> 
> 标签：c#-4.0, immutability, stringbuilder, reference-type

Albaharis 的“C# 4.0 IN A NUTSHELL”第 4 版书在第 249 页上指出：“......调用 object.ReferenceEquals 保证正常的引用相等性。”

所以，我决定测试一下。

首先我尝试了这样的值类型。

```
 int aa1 = 5;
 int aa2 = aa1;
MessageBox.Show("object.ReferenceEquals(aa1,aa2) is: " + object.ReferenceEquals(aa1, aa2)); 
```

正如我所料，结果是假的：object.ReferenceEquals(aa1, aa2) is: **False**

生活很好。然后我尝试了一个像这样的可变引用类型。

```
System.Text.StringBuilder sblr1 = new System.Text.StringBuilder();
sblr1.Append("aaa");
System.Text.StringBuilder sblr2 = sblr1;          
MessageBox.Show("object.ReferenceEquals(sblr1,sblr2) is: " + object.ReferenceEquals(sblr1, sblr2)); 
```

正如我所料，结果是真的 object.ReferenceEquals(sblr1, sblr2) is: **True**

生活还是不错的。然后我想，既然它是一种可变引用类型，那么如果我将一个变量更改为 null，那么两者都应该为 null。所以我尝试了以下方法。

```
System.Text.StringBuilder sblr1 = new System.Text.StringBuilder();
sblr1.Append("aaa");
System.Text.StringBuilder sblr2 = sblr1;
sblr1 = null;
MessageBox.Show("object.ReferenceEquals(sblr1,sblr2) is: " + object.ReferenceEquals(sblr1, sblr2)); 
```

我希望它们都为空。但我得到的结果是 False: object.ReferenceEquals(sblr1, sblr2) is: **False**

现在生活不是那么好。我认为如果它覆盖了 sblr1 的内存位置，那么它也会覆盖 sblr2 的内存位置。

然后我想也许他们指向两个不同的空值，所以我尝试了这个：

```
System.Text.StringBuilder sblr1 = new System.Text.StringBuilder();
sblr1.Append("aaa");
System.Text.StringBuilder sblr2 = sblr1;
sblr2 = null;
MessageBox.Show("sblr1 == " + sblr1 + " and sblr2 == " + sblr2); 
```

但在这里，只有一个像这样指向一个空值。sblr1 == aaa 和 sblr2 ==

只有一个是空的。

它显示了我对字符串对象等不可变引用类型所期望的行为。使用字符串对象，我可以执行以下操作：

```
string aa1 = "aaX";
string aa2 = "aaX";
MessageBox.Show("object.ReferenceEquals(aa1,aa2) is: " + object.ReferenceEquals(aa1, aa2)); 
```

他们都会引用同样的东西。object.ReferenceEquals(aa1, aa2) 是：**True** 因为“aaX”只被写入程序集一次。

但如果我这样做：

```
string aa1 = "aaX";
string aa2 = "aaX"; 
aa1 = null; 
MessageBox.Show("After aa1 is null(" + aa1 + "), then aa2 is: " + aa2); 
```

然后他们指向不同的东西是这样的： aa1 为 null() 之后，然后 aa2 为：aaX

那是因为字符串对象是不可变的。内存位置不会被覆盖。相反，该变量指向堆内存中存在新值的不同位置。在上面的示例中将 aa1 更改为 null 意味着 aa1 将指向堆内存上的不同位置。

那么为什么可变引用类型的行为与不可变引用类型相同呢？

* * *

编辑下午 4:03 和 4:08

我最近试过这个：

```
System.Text.StringBuilder sblr1 = new System.Text.StringBuilder();
sblr1.Append("aaa");

// sblr1 and sblr2 should now both point to the same location on the Heap that has "aaa".
System.Text.StringBuilder sblr2 = sblr1;

System.Text.StringBuilder sblr3 = new System.Text.StringBuilder();
sblr3.Append("bbb");

sblr1 = sblr3;
MessageBox.Show("sblr1 == " + sblr1 + " and sblr2 == " + sblr2 + " and sblr3 == " + sblr3); 
```

这给了我： sblr1 == bbb 和 sblr2 == aaa 和 sblr3 == bbb

这更像是我所期待的结果。多亏了评论，我现在看到，我下意识地期望 null 充当内存位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:20:57.737

> 我认为如果它覆盖了 sblr1 的内存位置，那么它也会覆盖 sblr2 的内存位置。

这是你的误解。

当你写这个：

```
System.Text.StringBuilder sblr2 = sblr1; 
```

您将`sblr2`变量分配为对与`StringBuilder`指向的实例相同的实例的引用`sblr1`。这两个变量现在指向同一个引用。

然后你写：

```
sblr1 = null; 
```

这会将`sblr1`变量更改为现在为空引用。您根本没有更改内存中的实例。

这与引用是否为可变类型无关。您正在更改变量，而不是它们引用的实例。

至于您的字符串示例：

> 那是因为字符串对象是不可变的。内存位置不会被覆盖

这实际上是不正确的。您将一个字符串变量设置为这一事实`null`与字符串是不可变的并没有任何关系。这是一个单独的问题。

> 那么为什么可变引用类型的行为与不可变引用类型相同呢？

您看到的行为与可变性无关。它是所有引用类型（无论是不可变的还是可变的）的标准行为。可变性是一个不同的问题。

可变性的主要问题是：

假设你有一个类，像这样：

```
class Foo
{
    public int Bar { get; set; }
} 
```

如果你这样写：

```
Foo a = new Foo();
a.Bar = 42;
Foo b = a;
b.Bar = 54;
Console.WriteLine(a.Bar); // Will print 54, since you've changed the same mutable object 
```

对于不可变类型，这不会发生，因为您无法更改`Bar`- 相反，如果您创建一个不可变类：

```
class Baz
{
    public Baz(int bar) { this.Bar = bar; }

    public int Bar { get; private set; }
} 
```

你需要写：

```
Baz a = new Baz(42);
Baz b = a;

// This isn't legal now:
// b.Bar = 54;
// So you'd write:
b = new Baz(54); // Creates a new reference 
```

或者，您可以让类在“更改”操作上返回一个新引用，即：

```
class Baz
{
    public Baz(int bar) { this.Bar = bar; }

    public int Bar { get; private set; }

    public Baz Alter(int newValue) { return new Baz(newValue); } // May copy other data from "this"
} 
```

然后当你写：

```
Baz a = new Baz(42);
Baz b = a.Alter(54); // b is now a new instance 
```

这就是发生的情况`string`- 所有方法都返回一个新实例，因为字符串是不可变的，因此您永远不能“更改”现有副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:23:21.110

这与可变性**无关。**此处涉及的规则对于*所有*引用类型都是相同的。引用类型的非非`ref`变量`out`（或成员或集合中的槽）是引用（duh）。这意味着它指的是某个对象。它不*引用*另一个*引用*，或者另一个引用所在的位置（例如，一个变量）。当您分配给变量（或成员，或集合中的槽）时，您会更改该位置的引用；您不会覆盖任何对象的任何部分（当然，您分配*给*的成员除外，如果它是成员）。

在您的代码中，有两个变量`srbl1`和`srbl2`，每个变量都存储对同一字符串构建器对象的引用。分配给任一更改会覆盖其中一个引用（例如，使用`null`，或使用对不同对象的引用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:28:25.133

更改引用只是更改某些内容所指的内容。它不会改变对象本身。

一种看待它的方法是想象一个整数数组：

```
int[] foo = new int[] {0, 1, 2, 3, 4, 5}; 
```

您可以创建两个索引来引用数组中的项目：

```
int ix = 1;
int iy = ix; 
```

然后`foo[ix] == foo[iy]`。

如果您然后 write `foo[ix] = 42`， then`foo[ix] == foo[iy]`仍然是正确的，因为您更改了索引引用的值。

但是，如果您更改索引，那么`ix = 3`, 那么`ix`和`iy`指的是不同的东西。

引用类型的工作方式完全相同。

当您编写 时`sblr1 = new StringBuilder()`，您已经创建了一个新的`StringBuilder`对象实例并`sblr1`指向它。如果你然后写`sblr2 = sblr1`，你只是在`sblr2`指出同一件事。然后`sblr1 = null`只是说，“sblr1 不再指向任何东西。” 它实际上不会影响它所引用的项目，就像将索引更改为数组不会影响被索引的项目的值一样。

# javascript - 如何在开始更改屏幕方向之前检测实际位置？

> ID：15841752
> 
> 赞同：2
> 
> 时间：2013-04-05T19:15:05.417
> 
> 标签：javascript, jquery, html, css, responsive-design

我试图在开始改变方向之前检测我的页面滚动的实际位置。

它将决定我的“新”屏幕（在新方向）的显示位置。

我尝试检查每个滚动事件的实际位置，如下所示：

```
$(window).scroll(function() {       

    var scrollTop = $(window).scrollTop();

    if (scrollTop >= window.secao1 && scrollTop <= window.secao1){
        window.secaoIDSet = "s1";
    }

    if (scrollTop >= window.secao2 && scrollTop <= window.secao2){
        window.secaoIDSet = "s2";
    }

    if (scrollTop >= window.secao3 && scrollTop <= window.secao3){
        window.secaoIDSet = "s3";
    }

    if (scrollTop >= window.secao4 && scrollTop <= window.secao4){
        window.secaoIDSet = "s4";
    }

    if (scrollTop >= window.secao5-2){
        window.secaoIDSet = "s5";
    }       
}); 
```

然后我想将位置设置为以新方向显示，但我不知道何时执行此操作：

```
$(window).scrollTop($('#' + window.secaoIDSet).offset().top + 'px'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:03:48.677

首先创建偶数处理程序

```
$(window).on("mousewheel", function() {
    alert($(document).scrollTop());
} 
```

然后打电话

```
$(window).mousewheel(); 
```

希望它会有所帮助。

# java - 使用不同的参数多次运行相同的选择查询

> ID：15841754
> 
> 赞同：5
> 
> 时间：2013-04-05T19:15:12.433
> 
> 标签：java, mysql, select, jdbc, prepared-statement

我有一个 Java 程序需要遍历 a`HashMap`以获取一个参数，然后用于查询 MySQL 数据库。

**代码如下：**

```
Iterator<Entry<String, Double>>it = ws.entrySet().iterator();
Connection con = null;

while(it.hasNext())  
{
    Entry<String, Double>pairs = it.next();
    PreparedStatement ps = con.prepareStatement("select doc_freq from lookup where word=?");
    ps.setString(1, pairs.getKey());
    ResultSet rs = ps.executeQuery();
} 
```

为循环的每次迭代（大约 500 次）重复访问数据库的过程正在减慢我的应用程序的速度。有什么方法可以一次发送所有这些参数，以便我只访问一次数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:29:44.373

考虑到 ws 是一个地图，您可以这样进行单个查询：

```
Connection con = getConnection();
Set<String> ks = ws.keySet();

if (ks.size() > 0) {
    StringBuilder inStatement = new StringBuilder("?");
    for (int i = 1; i < ks.size(); i++) {
        inStatement.append(", ?");
    }

    PreparedStatement ps = con.prepareStatement("select doc_freq from lookup where word in (" + inStatement.toString() + ")");

    int k = 1;
    for (String key : keySet) {
        ps.setString(k++, key);
    }
    ResultSet rs = ps.executeQuery();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:20:44.123

准备语句一次然后迭代并为其设置参数然后执行。这是来自 javadoc

> 带或不带 IN 参数的 SQL 语句可以预编译并存储在`PreparedStatement`对象中。然后可以使用该对象多次有效地执行该语句。此方法针对处理受益于预编译的参数化 SQL 语句进行了优化。如果驱动支持预编译...

```
Iterator<Entry<String, Double>>it = ws.entrySet().iterator();
Connection con = getConnection();

PreparedStatement ps = con.prepareStatement("select doc_freq from lookup where word=?");
while(it.hasNext())  
{
    Entry<String, Double>pairs = it.next();
    ps.setString(1, pairs.getKey());
    ResultSet rs = ps.executeQuery();
} 
```

当查询编译到数据库时，它可以更快地执行和逐一检索结果，这与执行一个带有多个参数的查询相同。性能是平等的。

但是，如果您准备好，编译相同的 SQL 查询多种类型，那么每次编译查询时，数据库都会创建执行计划，这很不合时宜。

这就是为什么这种技术在文档中称为高效的原因。该术语也称为解释计划，它由数据库创建以更好地优化查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:27:34.893

从问题中不清楚为什么它很慢，但一个常见的问题是每笔交易的开销。

您可以将[innodb_flush_log_at_trx_commit](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_flush_log_at_trx_commit)设置为 0 或 2，一切都会更快。请注意，默认值 1 是唯一符合 ACID 的设置。对于大多数设置，2 是一个非常好的值。

```
set global innodb_flush_log_at_trx_commit = 2; 
```

# workflow-foundation-4 - Windows 工作流程、TrackingParticipant 和空闲与未加载

> ID：15841755
> 
> 赞同：1
> 
> 时间：2013-04-05T19:15:17.480
> 
> 标签：workflow-foundation-4, workflow-foundation, workflowservice

我正在使用 Windows 工作流服务，并且需要知道工作流实例何时空闲。使用[http://code.msdn.microsoft.com/Windows-Workflow-b9d5ccb7](http://code.msdn.microsoft.com/Windows-Workflow-b9d5ccb7)作为资源，我创建了一个 TrackingParticipant 并在某些状态发生时被“通知”，例如空闲、完成、持续、恢复、卸载、删除， ETC。

我所期望的是，只有当工作流实例完成处理当前活动时，状态才会进入空闲状态。但是，即使工作流实例需要执行更多处理，它似乎也会进入空闲状态。例如，我可能会看到同一工作流实例的连续“空闲”状态。因此，“空闲”状态对我确定工作流实例何时不再处理任何活动不是很有帮助。

然而，“卸载”状态似乎给了我想要的东西。“Unloaed”状态（据我所知）仅在工作流实例没有其他要执行的活动时出现。

所以我的问题是：依靠“卸载”状态来确定工作流实例是否不再处理任何活动或者我应该使用其他一些技术是否安全？

谢谢你的帮助，埃里克

# php - Print_r() 到 PHP error_log() 不起作用。（非打印字符）

> ID：15841762
> 
> 赞同：0
> 
> 时间：2013-04-05T19:15:47.140
> 
> 标签：php, arrays, object, error-log, non-printing-characters

我在帮助类 Utility::error_log() 中有一个静态方法，用于帮助我们优雅地调试 PHP 中的 HUGE 对象。该方法及其辅助方法 Utility::toArray() 如下：

```
static function error_log($message, $data=null, $max=2)
{

    if(is_array($data) || is_object($data))
        $data = print_r(self::toArray($data, $max),true);
    if(is_array($message) || is_object($message))
        $message = print_r(self::toArray($message, $max),true);

    if(!empty($data))
        $data = "\n".$data;

    if (!strstr($message, PHP_EOL))
        $message = str_pad(" ".$message." ", 50,'=',STR_PAD_BOTH);

    error_log($message.$data);

}

static function toArray($object, $max = 2, $current = 0)
{
    if($current > $max)
        return ucfirst(gettype($object)).'( ... )';

    $current++;
    $return = array();
    foreach((array) $object as $key => $data)
        if (is_object($data))
            $return[$key] = self::toArray($data, $max, $current);
        elseif (is_array($data))
            $return[$key] = self::toArray($data, $max, $current);
        else
            $return[$key] = $data;

    return $return;
} 
```

现在这可能有点看，但要点是，toArray 使一个巨大的对象（大量递归）数量级更小，并将所有属性作为数组或字符串返回。使用起来更容易......这个想法是`print_r($array,true)`让数组成为一个字符串，然后我们记录它。

然而，这并没有按预期工作。结果是：

```
[05-Apr-2013 05:29:00] ==================================== PERSISTING SUITS & SHIRTS ===================================
Array
(
    [ 
```

然后什么也没有，当我调用`print_r($data)`并打印到浏览器时，我得到：

```
Array
(
    [BRS\PageBundle\Entity\Pageroot_folder_name] => Pages
    [id] => 43
    [title] => Suits & Shirts
    [depth_title] => Suits & Shirts
    [description] => ( ... AND SO ON ... ) 
```

在你说这是一个 error_log() 长度限制之前，我会提到我可以成功地`$data = var_export($data,true)`将结果发送到 error_log() 没有问题：

```
[05-Apr-2013 06:00:08] ==================================== PERSISTING SUITS & SHIRTS ===================================
array (
    '' . "\0" . 'BRS\\PageBundle\\Entity\\Page' . "\0" . 'root_folder_name' => 'Pages',
    'id' => 43,
    'title' => 'Suits & Shirts',
    'depth_title' => 'Suits & Shirts',
    'description' => ( ... AND SO ON ... ) 
```

问题是什么？为什么它可以与`var_export($data,true)`, 和一起使用`print_r($data,false)`，但不能与`print_r($data,true)`??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:15:47.140

答案是不可打印的字符。在对象到数组的转换以及它们的各种属性到字符串的转换中，这些字符串包含我们从未见过的非打印控制字符，但它们的存在打破了 PHP 的`error_log()`.

解决方案相当简单，但必不可少：

```
$data= preg_replace('/[^\x0A\x20-\x7E\xC0-\xD6\xD8-\xF6\xF8-\xFF]/','',$data);

// Or to preserve extended characters, use the below expression.
// Mind you many of these still may not display correctly in logs.
$data= preg_replace('/(?!\n)[[:cntrl:]]+/','',$data); 
```

在将 $message 发送到错误日志之前调用，这会删除许多非打印字符，同时保留许多我发现已删除的其他 pregs 字符。以防万一您需要它们：

```
\x0A = [newline]
\x20-\x7E = [space] ! " # $ % & ' ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ; < = > ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~
\xC0-\xD6 = À Á Â Ã Ä Å Æ Ç È É Ê Ë Ì Í Î Ï Ð Ñ Ò Ó Ô Õ Ö
\xD8-\xF6 = Ø Ù Ú Û Ü Ý Þ ß à á â ã ä å æ ç è é ê ë ì í î ï ð ñ ò ó ô õ ö
\xF8-\xFF = ø ù ú û ü ý þ ÿ 
```

最后，进行了一些额外的重写，以隔离一些功能以供其他地方使用，但最终的解决方案同样简单。

编辑：经过进一步审查，这似乎与[Bug #64439 - "\0 导致 error_log 字符串被截断"](https://bugs.php.net/bug.php?id=64439)更具体相关。

对于那些想知道的人，\0（或 \x00 或 \x0）是 NULL 字符，在上述特定情况下，它是将对象转换为数组的结果，它返回的 Key 值为`NULL.classname.NULL.propname`。

# command-prompt - MS DOS 命令提示符 - 在一个命令中提供多个输入文件名

> ID：15841765
> 
> 赞同：0
> 
> 时间：2013-04-05T19:15:54.780
> 
> 标签：command-prompt, dos

可能是基本问题，但要么我找不到答案，要么我不知道用什么词来搜索它们。

我有一个命令行程序，它在调用 .exe 后接受三个文件名。我还有一个程序，旨在运行该程序并自动测试它的输出。所以情况是我正在运行一个程序，需要给它说明如何运行另一个程序。通过程序的约束，我需要提供一个将执行模型的单行命令。我的问题是：我如何在 MS DOS 命令提示符下 1）执行程序和 2）在一个命令中提供三个已知文件名。

谢谢！

进一步的上下文：这两个程序不是我写的，而是两个命令行可执行文件。“第一个”程序是一个通过命令提示符运行的简单模型。第二个是校准程序，它需要运行模型（可能数百次）来校准某些输入参数。因此我需要告诉校准程序如何运行模型。但是我需要在一行或一个批处理文件中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:20:26.523

我认为这会奏效

```
C:\>program.exe "file1" "file2" "file3" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:31:11.437

我相信你在追求所谓的“管道”。一个程序的输出馈送到另一个程序的输入。这在一个命令行中表示。

例如，`dir`生成一系列行并`sort`读取行，对它们进行排序并写出它们。所以，

`dir | sort`

您可以根据需要将任意数量的程序连接在一起，并传递它们需要的任何参数。

`dir | find "2013" | sort`

编辑：根据您的评论进行更新。

如果第二个程序只是读取第一个程序的输出，那么你可以这样做。

`first <filelist.txt | second`

其中 filelist.txt 是一个文本文件，其中包含程序所需的三个响应`first`。这`<`意味着`first`不会读取键入的内容，而是从文件中读取。

# java - 如何验证 EWS Java API

> ID：15841767
> 
> 赞同：8
> 
> 时间：2013-04-05T19:16:01.713
> 
> 标签：java, exchangewebservices, ewsjavaapi

我们正在使用 EWS Java API 在我们的 Java 应用程序上使用 Outlook 日历。我在 EWS 上遇到身份验证问题。

我在 rackspace 提供的云 Outlook 帐户上尝试了该应用程序，一切正常，所以我知道凭据是准确的。

这是代码：

```
import java.net.URI;
import java.net.URISyntaxException;
import microsoft.exchange.webservices.data.*;

public class TestClass {

    public static void main(String[] args) {
        TestClass obj = new TestClass();
        obj.testMethod();
    }

    public void testMethod() {
        ExchangeService service = new ExchangeService(
                ExchangeVersion.Exchange2007_SP1);
        ExchangeCredentials credentials = new WebCredentials("username",
                "password");

        service.setCredentials(credentials);

        try {
            service.setUrl(new URI("https://domain/EWS/Exchange.asmx"));
        } catch (URISyntaxException e) {
            e.printStackTrace();
        }

        EmailMessage msg;
        try {
            msg = new EmailMessage(service);
            msg.setSubject("hello world");
            msg.setBody(MessageBody
                    .getMessageBodyFromText("Sent using the EWS API"));
            msg.getToRecipients().add("test@test.com");
            msg.send();
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

} 
```

rackspace 的 url 是：`https://connect.emailsrvr.com/EWS/Exchange.asmx` 当我输入这个帐户的用户名和密码并且它工作时，我看到控制台吐出这个：

```
Apr 05, 2013 1:40:28 PM org.apache.commons.httpclient.auth.AuthChallengeProcessor selectAuthScheme
INFO: NTLM authentication scheme selected 
```

我们的客户端使用的是 ExchangeVersion.Exchange2007_SP1 而 Rackspace 使用的是 ExchangeVersion.Exchange2010 但是当我使用我们的客户端提供的凭据（用户名、密码和 url）时，我收到此错误：

```
Apr 05, 2013 1:49:13 PM org.apache.commons.httpclient.auth.AuthChallengeProcessor selectAuthScheme
INFO: Basic authentication scheme selected
Apr 05, 2013 1:49:13 PM org.apache.commons.httpclient.HttpMethodDirector processAuthenticationResponse
SEVERE: Invalid challenge: Basic
org.apache.commons.httpclient.auth.MalformedChallengeException: Invalid challenge: Basic
at org.apache.commons.httpclient.auth.AuthChallengeParser.extractParams(AuthChallengeParser.java:98)
at org.apache.commons.httpclient.auth.RFC2617Scheme.processChallenge(RFC2617Scheme.java:94)
at org.apache.commons.httpclient.auth.BasicScheme.processChallenge(BasicScheme.java:112)
at org.apache.commons.httpclient.auth.AuthChallengeProcessor.processChallenge(AuthChallengeProcessor.java:162)
at org.apache.commons.httpclient.HttpMethodDirector.processWWWAuthChallenge(HttpMethodDirector.java:694)
at org.apache.commons.httpclient.HttpMethodDirector.processAuthenticationResponse(HttpMethodDirector.java:668)
at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:193)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323)
at microsoft.exchange.webservices.data.HttpClientWebRequest.executeRequest(HttpClientWebRequest.java:358)
at microsoft.exchange.webservices.data.ServiceRequestBase.getEwsHttpWebResponse(ServiceRequestBase.java:930)
at microsoft.exchange.webservices.data.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:825)
at microsoft.exchange.webservices.data.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:46)
at microsoft.exchange.webservices.data.MultiResponseServiceRequest.execute(MultiResponseServiceRequest.java:144)
at microsoft.exchange.webservices.data.ExchangeService.internalCreateItems(ExchangeService.java:464)
at microsoft.exchange.webservices.data.ExchangeService.createItem(ExchangeService.java:535)
at microsoft.exchange.webservices.data.Item.internalCreate(Item.java:215)
at microsoft.exchange.webservices.data.EmailMessage.internalSend(EmailMessage.java:125)
at microsoft.exchange.webservices.data.EmailMessage.send(EmailMessage.java:253)
at com.aurora.trials.TestClass.testMethod(TestClass.java:43)
at com.aurora.trials.TestClass.main(TestClass.java:17)

microsoft.exchange.webservices.data.EWSHttpException: Connection not established
at microsoft.exchange.webservices.data.HttpClientWebRequest.throwIfConnIsNull(HttpClientWebRequest.java:394)
at microsoft.exchange.webservices.data.HttpClientWebRequest.getResponseHeaders(HttpClientWebRequest.java:280)
at microsoft.exchange.webservices.data.ExchangeServiceBase.processHttpResponseHeaders(ExchangeServiceBase.java:1045)
at microsoft.exchange.webservices.data.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:58)
at microsoft.exchange.webservices.data.MultiResponseServiceRequest.execute(MultiResponseServiceRequest.java:144)
at microsoft.exchange.webservices.data.ExchangeService.internalCreateItems(ExchangeService.java:464)
at microsoft.exchange.webservices.data.ExchangeService.createItem(ExchangeService.java:535)
at microsoft.exchange.webservices.data.Item.internalCreate(Item.java:215)
at microsoft.exchange.webservices.data.EmailMessage.internalSend(EmailMessage.java:125)
at microsoft.exchange.webservices.data.EmailMessage.send(EmailMessage.java:253)
at com.aurora.trials.TestClass.testMethod(TestClass.java:43)
at com.aurora.trials.TestClass.main(TestClass.java:17) 
```

我找不到这个问题的任何解决方案。请提供您认为我可以获得 EWS 身份验证的任何信息。是什么导致这些异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T14:12:59.837

我遇到了与您完全相同的错误，并浪费了 5 个小时来修复它。我的结论是，您不应该浪费更多时间来尝试使 EWS 代码库工作，EWS 代码很混乱，您必须深入了解该库中的错误。

我决定使用 javax.mail 实现，它可以满足我的需要。 [https://stackoverflow.com/a/18043717/445131](https://stackoverflow.com/a/18043717/445131)

# ios - 核心数据：关系和用户对象

> ID：15841778
> 
> 赞同：-1
> 
> 时间：2013-04-05T19:16:36.567
> 
> 标签：ios, core-data, nsfetchrequest, nsfetchedresultscontroller, datapersistance

我将 StackMob 与 CoreData（远程数据库）一起使用，但我认为这是一个通用的 Core Data 问题。

我有 3 个实体：

1.  用户登录）
2.  汽车
3.  自行车

每个实体都有几个属性。

一个用户可以有多个 Cars 和 Bikes 对象（一对多关系）。汽车和自行车只能有一个所有者（用户）（反对一关系）。

现在假设我们有 2,000 个用户。每个用户都是汽车经销商，在 CoreData 中存储了 500 辆汽车和 300 辆自行车记录/对象。我希望用户根据汽车和自行车的属性进行获取。我计划为此使用谓词。为了减少不断的获取请求，我还计划使用缓存。

但是，我的问题是：

1.  我应该如何保存每个用户下的记录/对象？CoreData 中有这个术语吗？

2.  我希望用户登录并能够仅在用户创建的对象中根据其属性（型号、制造商、日期戳等）获取所有汽车/自行车。我想我要避免的是当用户根据 Cars and Bikes 实体中的属性执行获取请求时，它只在自己的用户对象下搜索。我不希望获取请求搜索所有其他用户的对象，因为这将是一种浪费，因为我担心这会减慢应用程序的速度。在 CoreData 中设置它的最佳方法是什么？

刚刚浏览了两本核心数据书籍，我不知道如何处理这个问题。我知道我不是最聪明的，所以我向专家寻求建议。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:04:00.923

CoreData 实际上经过了非常出色的优化。你需要的是一个 NSSearchPredicate 和 NSFetchedResultsController。这些都很复杂，我不能只是“告诉”你如何使用它们。我发现这个开放课程非常有帮助

[http://www.stanford.edu/class/cs193p/cgi-bin/drupal/](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)

它使用核心数据在 iOS 中构建网站获取应用程序。检查核心数据集，如果您不知道他在说什么，请返回并观看一些较早的集

# sql - Ruby datamapper - 在标志值中搜索

> ID：15841785
> 
> 赞同：2
> 
> 时间：2013-04-05T19:16:59.910
> 
> 标签：sql, ruby, ruby-datamapper

我有一个用户表（数据映射器模型），它有一个名为的列`permission`，其中包含位掩码值。

`property :permission, Flag[:perm1, :perm2, :perm3]`

我想找到所有有一定权限的用户，比如perm1和perm2

所以我打电话，

`User.all(:permission => [:perm1, :perm2])`

这使得查询

`select * from user where permission = 3` 这是不正确的。虽然正确的查询应该是（因为它是类型 - `flag`）

`select * from user where permission &1 != 0 and permission &2 != 0`

有没有人在 ruby​​ datamapper 中，如何调用在标志值中进行搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:36:08.217

我找不到任何直接的方法来做到这一点。所以确实使用了这个黑客。

`User.all(:conditions => ['permission & ? != 0 and permission & ? != 0', 1,2])`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T13:39:42.740

你运行的是哪个版本？在 1.2 下，我`SELECT ... FROM "users" WHERE "permission" IN (1, 2) ...`得到`User.all(:permission => [:perm1, :perm2])`.

一种选择是建立一个联盟：`User.all(:permission => :perm1) | User.all(:permission => :perm2)`.

或者可以`User.perm1s | User.perm2s`通过类方法缩短为：

```
class User
  # ...
  def self.perm1s; all :permission => :perm1 end
  def self.perm2s; all :permission => :perm2 end
end 
```

与您显示的任何一个查询都不完全相同，但结果应该是相同的。

# sql - 用 c# 编写这个 sql 查询的一种相当快速的方法是什么？

> ID：15841790
> 
> 赞同：3
> 
> 时间：2013-04-05T19:17:22.300
> 
> 标签：sql, linq, linq-to-entities

我有这个 SQL 查询：

```
select 
    sum(h.nbHeures) 
from 
    Heures h
join 
    HeuresProjets hp on h.HpGuid=hp.HPId
join 
    ActivityCodes ac on h.Code=ac.ActivityId
join 
    MainDoeuvre mdo on ac.ActivityId=mdo.CodeGuid
where 
    hp.ExtraGuid = '61E931C8-3268-4C9C-9FF5-ED0213D348D0' 
    and mdo.NoType = 1 
```

它在不到一秒的时间内运行，这很好。我的项目使用 LINQ to 实体来获取数据。这个（非常类似于 sql）查询非常慢，需要一分钟多的时间。

```
 var result = (from hp in this.HeuresProjets
                join h in ctx.Heures on hp.HPId equals h.HpGuid
                join ac in ctx.ActivityCodes on h.Code equals ac.ActivityId
                join mdo in ctx.MainDoeuvre on ac.ActivityId equals mdo.CodeGuid
                where hp.ExtraGuid == this.EntityGuid && mdo.NoType == (int)spType
                select h.NbHeures).Sum();
  total = result; 
```

我尝试使用嵌套循环。它更快但仍然很慢（〜15秒）。

```
foreach (HeuresProjets item in this.HeuresProjets)
{
         foreach (Heures h in ctx.Heures.Where(x => x.HpGuid == item.HPId))
         {
               if (h.ActivityCodes != null && h.ActivityCodes.MainDoeuvre.FirstOrDefault() != null && h.ActivityCodes.MainDoeuvre.First().NoType == (int)type)
               {
                      total += h.NbHeures;
               }
          }
} 
```

我在做一些明显错误的事情吗？如果没有办法对此进行优化，我将只调用一个存储过程，但我真的希望将逻辑保留在代码中。

**编辑**

我根据 IronMan84 的建议修改了我的查询。

```
decimal total = 0;

var result = (from hp in ctx.HeuresProjets
              join h in ctx.Heures on hp.HPId equals h.HpGuid
              join ac in ctx.ActivityCodes on h.Code equals ac.ActivityId
              join mdo in ctx.MainDoeuvre on ac.ActivityId equals mdo.CodeGuid
              where hp.ExtraGuid == this.EntityGuid && mdo.NoType == (int)spType
              select h);

if(result.Any())
  total = result.Sum(x=>x.NbHeures); 
```

这几乎可以工作。它运行速度很快并返回一个小数，但是：
1\. 它不是正确的值
2\. 结果被清楚地缓存了，因为它返回具有不同参数的完全相同的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:29:00.590

通过查看您的代码，我认为您的查询正在从您要加入的那些表中获取每条记录（因此需要很长时间）。我看到你在使用`this.HeuresProjets`，我假设它是你已经从数据库中获取的数据库对象的集合（这就是你不使用的原因`ctx.HeuresProjets`）。那么，当您进行联接查询时，该集合可能已经被水合了。在这种情况下，它变成了一个 LINQ-To-Objects 查询，需要 EF 去抓取所有其他表的记录以完成连接。

假设我的假设是正确的（如果我错了，请告诉我），你可能想试试这个：

```
var result = (from hp in ctx.HeuresProjets
                join h in ctx.Heures on hp.HPId equals h.HpGuid
                join ac in ctx.ActivityCodes on h.Code equals ac.ActivityId
                join mdo in ctx.MainDoeuvre on ac.ActivityId equals mdo.CodeGuid
                where hp.ExtraGuid == this.EntityGuid && mdo.NoType == (int)spType
                select h).Sum(h => h.NbHeures);
total = result; 
```

此外，如果`this.HeuresProjets`是仅包含特定对象的过滤列表，则您只需添加到`where`查询的子句以确保 ID 在`this.HeuresProjets.Select(hp => hp.HPId)`

# security - Jboss 5.1.0 EJB 安全性（通过 JNDI 未经身份验证的主体）

> ID：15841791
> 
> 赞同：2
> 
> 时间：2013-04-05T19:17:28.997
> 
> 标签：security, ejb-3.0, jndi, jboss5.x, jaas

在 JBoss-5.1.0.GA 应用服务器中，如何保护远程 EJB 不受未经身份验证的主体的影响？配置我的 ejb 安全性后，我仍然可以使用 JNDI 查找访问远程 EJB，而无需传入主体和凭据？这是一个安全风险。本质上，我想禁用远程 EJB 上所有未经身份验证的 JNDI 查找。

**这是我的*server/conf/login-config.xml*配置：**

```
 <application-policy name="<my security domain name>">
    <authentication>
        <login-module code="org.jboss.security.auth.spi.DatabaseServerLoginModule" flag="required">         
            <module-option name="dsJndiName">**java:jdbc/<my datasource name>**</module-option>
            <module-option name="principalsQuery"><my users query></module-option>
            <module-option name="rolesQuery"><my roles query></module-option>
            <module-option name="debug">true</module-option>
        </login-module>
    </authentication>
  </application-policy> 
```

**这是我的 ejb jar 中的*jboss.xml配置：***

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jboss PUBLIC
"-//JBoss//DTD JBOSS 5.0//EN"
"http://www.jboss.org/j2ee/dtd/jboss_5_0.dtd">
  <jboss>
 <security-domain><my security domain name from login-config></security-domain>
  </jboss> 
```

**这是我如何进行 JNDI 查找以作为客户端访问我的 bean** *注意主体和凭据没有被传递到上下文*

```
 Hashtable<String, String> props = new Hashtable<String, String>();
     props.put(Context.INITIAL_CONTEXT_FACTORY,"org.jnp.interfaces.NamingContextFactory");      
    props.put(Context.URL_PKG_PREFIXES,"org.jboss.naming:org.jnp.interfaces");      

    props.put(Context.PROVIDER_URL,"jnp://localhost:1099"); 
    //props.put(Context.SECURITY_PRINCIPAL,""); 
    //props.put(Context.SECURITY_CREDENTIALS,"");   
    ctx = new InitialContext(props);
    ctx.lookup("<earname>/<ejb interface definition>/remote"> 
```

**问题是什么？** 当没有/错误的主体/凭证被传递时，用户被认证为匿名主体，并且可以通过 JNDI 完全访问远程 EJB

**我已经尝试解决的问题：**

*   *我从我的server/conf/login-config.xml*中的所有登录模块中删除了以下行，但它没有效果

    ```
    <module-option name="unauthenticatedIdentity">anonymous</module-option> 
    ```

*   *我从server/conf/jboss-service.xml*中删除了以下行，认为它会解决问题，但没有效果

    ```
     <attribute name="DefaultUnauthenticatedPrincipal">anonymous</attribute> 
    ```

*   我从默认情况下存在的 login-config.xml 中删除了应用程序策略“client-login”，因为我使用的是 DatabaseLoginModule

*   我在*server/depoly/security/security-policies-jboss-beans.xml中的***jboss-ejb-policy**和**jboss-web-policy**正在扩展 login-config.xml 中的 DatabaseLoginModule 策略

**   我的 ejb 类/接口中没有与安全相关的注释* 

 ***其他注意事项**

*   我在 Jboss-as-7.1.1.final 中测试了这个场景，我得到**EjbAccessException: invalid User**这是正确的（你将它添加到 jboss-ejb3.xml 它将通过安全域保护所有 EJB）

    ```
    <assembly-descriptor>
       <s:security>
         <ejb-name>*</ejb-name>
         <s:security-domain><security domain name here></s:security-domain>
       </s:security>
     </assembly-descriptor> 
    ```

*   这里的问题不是授权，而是身份验证所有 ejb 安全注释都无济于事

*   我想要做的是完全阻止匿名主体进行 JNDI 调用

*   我在 org.jboss.security 上启用了 TRACE 日志记录，我可以看到，每当我调用 JNDI 时，我都会在日志中得到以下命中

    ```
    Principal: anonymous:callerRunAs=null:callerRunAs=null:ejbRestrictionEnforcement=false:ejbVersion=null];    policyRegistration=org.jboss.security.plugins.JBossPolicyRegistration@1f51a2f; 
    ```

*   当我通过 WebAuthetication 使用编程登录时，我已经验证了我的所有配置工作，并且 DatabaseLoginModule 工作正常

*   即使从数据库传递初始上下文一个有效的主体/凭证，使用匿名主体也表明主体/凭证甚至没有被上下文处理

*   我可能可以通过@RolesAllowed @DeclareRoles 保护我的EJB ...但就像我提到的那样，这将是授权问题而不是身份验证，而且如果我有很多角色和EJB，就可维护性而言，这不会很好

如何像在 JBoss 7.1.1 中那样自动禁用/防止对整个应用程序进行未经身份验证的匿名 JNDI 查找？我知道我可以将我的应用程序服务器升级为一种解决方案，但我没有选择这样做。这在 Jboss 5.1.0 中应该是可能且容易做到的。但是我到处寻找答案却找不到？谢谢你的帮助。*

# android - 如何将列表实例发送到另一个活动？

> ID：15841794
> 
> 赞同：0
> 
> 时间：2013-04-05T19:17:30.733
> 
> 标签：android, android-activity, instance, send

我有课 ：

```
public class ClassList 
{   
    private String Language1;
    private String Language2;
    public ClassList(String Language1,String Language2)
    {
        this.Language1 = Language1;
        this.Language2 = Language2;
    }
    public String Language1() 
    {
        return this.Language1;
    }
    public String Language2()
    {
        return this.Language2;
    }

} 
```

我想通过使用此类的实例将 ArrayList 发送到另一个活动。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:22:13.527

> 我想通过实例将 ArrayList 发送到另一个活动。有可能的？

假设您的意思是，使用发送`ClassList`给另一个，您必须查看界面：`Activity``Intent``Parcelable`

[这是一个很好的例子，说明如何做到这一点](http://prasanta-paul.blogspot.nl/2010/06/android-parcelable-example.html)

# python - 在循环中在 Tkinter 中制作一个输入框网格

> ID：15841797
> 
> 赞同：0
> 
> 时间：2013-04-05T19:18:06.600
> 
> 标签：python, loops, widget, grid, tkinter

我想制作一个输入框网格，我可以对其进行编辑并将其保存到其他地方的文本文件中，但是每次我运行我的代码时，如果我调用变量“e”，我只能编辑最后一个制作的框。

```
from Tkinter import *

class Application(Frame):

    def __init__(self, master):
        Frame.__init__(self, master)
        self.grid()
        self.create_widgets()

    def create_widgets(self):
        self.TXTlist = open('txtlist.txt', 'r+')
        self.row = self.TXTlist.readline()
        self.row = self.row.rstrip('\n')
        self.row = self.row.replace('characters = ', "") #should end up being "6"
        self.columns = self.TXTlist.readline()
        self.columns = self.columns.rstrip('\n')
        self.columns = self.columns.replace('columns = ', "") #should end up being "9"
        i = 0
        x = 0
        for i in range (int(self.row)):
            for x in range (int(self.columns)):
                sroot = str('row' + str(i) + 'column' + str(x))
                e = Entry(self, width=15)
                e.grid(row = i, column = x, padx = 5, pady = 5, sticky = W)
                e.delete(0, END)
                e.insert(0, (sroot))
                x = x + 1
            x = 0
            i = i + 1
root = Tk()
root.title("Longevity")
root.geometry("450x250")
app = Application(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:23:51.820

我会将条目存储在某种数据结构中，以便以后轻松访问它们。列表列表可以很好地解决这个问题：

```
 self.entries = []
    for i in range (int(self.row)):
        self.entries.append([])
        for x in range (int(self.columns)):
            ...
            e = Entry(self, width=15)
            self.entries[-1].append(e)
            ... 
```

现在您有了对输入框的引用：

```
 self.entries[row_idx][col_idx] 
```

您可以随意修改它。

# apache - SPA 中 SEO 的 RewriteRule 不起作用

> ID：15841800
> 
> 赞同：0
> 
> 时间：2013-04-05T19:18:22.973
> 
> 标签：apache, seo

我希望为我的单页应用程序网站实施 SEO（假设它位于 www.myexample.com）

在阅读了谷歌的文档（[https://developers.google.com/webmasters/ajax-crawling/docs/getting-started](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)）后，我开始尝试这个网站的主页。这意味着， www.myexample.com?_escaped_fragment_= 应该“映射到” www.myexample.com/staticIndex.html

我在网站的 public_html 文件夹中的 .htaccess 文件中添加了以下内容：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ^_escaped_fragment_=
RewriteRule ^_escaped_fragment_= /staticIndex.html [PT] 
```

进行此更改后，当我在浏览器中尝试 URL www.myexample.com?_escaped_fragment_= 时，我希望浏览器向我显示文件 staticIndex.html 的内容相反，它向我显示 www.myexample.com (index.html) 的内容并且浏览器 URL 保持不变为 www.myexample.com?_escaped_fragment_=

有人可以帮我改写规则吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:42:41.883

试试这个：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ^_escaped_fragment_=$
RewriteRule (.*) staticIndex.html [PT] 
```

# entity-framework-5 - EF 5.0 - 大容量插入表

> ID：15841803
> 
> 赞同：0
> 
> 时间：2013-04-05T19:18:28.400
> 
> 标签：entity-framework-5

我有一个工作表，我们用它来存储来自具有大量记录（可能是数百万行）的其他表的合并/连接选择。如果我有这个表的实体映射 - 有没有办法将结果插入到这个表中，而不会将数据拉到我在应用程序中的上下文中？我宁愿在不手写 SQL 的情况下执行此操作（现在就是这样做的）。

存储过程是一个考虑因素。

谢谢

# postgresql - 在 Postgresql 中创建一个常量

> ID：15841807
> 
> 赞同：2
> 
> 时间：2013-04-05T15:34:24.920
> 
> 标签：postgresql

假设我有这个查询：

```
select * 
from myTable
where myTable.myCol in (1,2,3) 
```

我想这样做：

```
with allowed_values as (1,2,3)
select * 
from myTable
where myTable.myCol in allowed_values 
```

它在第一行给我一个语法错误，你能帮我解决它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:14:32.507

我能想到的最接近你的语法：

```
WITH allowed_values (id) AS 
  ( VALUES
      (1), (2), (3)
  )
SELECT * 
FROM myTable
WHERE id IN 
   (TABLE allowed_values) ; 
```

在**[SQL-Fiddle中测试](http://sqlfiddle.com/#!12/83694/1)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T19:58:38.227

接近你可能想到的：

```
WITH allowed_values AS (SELECT '{1,2,3}'::int[] AS arr)
SELECT * 
FROM   my_table
      ,allowed_values   -- cross join with a single row
WHERE  my_col = ANY (arr); 
```

更好的：

```
WITH allowed_values (my_col) AS (VALUES (1), (2), (3))
SELECT * 
FROM   allowed_values
JOIN   my_table USING (my_col) 
```

但实际上，您可以简化：

```
SELECT * 
FROM  (VALUES (1), (2), (3)) AS allowed_values (my_col)
JOIN   my_table USING (my_col); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T15:48:23.887

尝试

```
with allowed_values as (select 1 as tst union all select 2 union all select 3)    
select * from myTable a
inner join c1 b ON (b.tst = a.myCol) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T19:03:16.573

最简单的方法是更正您的公用表表达式，然后在子选择中使用它。

```
with allowed_values as (
  select 1 id
  union all
  select 2
  union all
  select 3
)
select * from myTable
where myTable.id in (select id from allowed_values) 
```

# actionscript-3 - 在 AS3 中向子影片剪辑添加/删除事件侦听器

> ID：15841815
> 
> 赞同：0
> 
> 时间：2013-04-05T19:18:58.273
> 
> 标签：actionscript-3, flash, flash-cs5

简而言之，这是我想要完成的：

1.  点击影片剪辑，添加孩子
2.  单击子影片剪辑，播放声音
3.  再次点击孩子，停止声音
4.  第三次点击子项，删除子项

可悲的是，我只到了第 1 步。我已经弄清楚了如何在单击父影片剪辑时播放声音（我正在使用链接），但是当我尝试与孩子进行相同操作时，我收到以下错误：

~~TypeError：错误＃1010：术语未定义且没有属性。~~（我不再收到此错误）

场景 1，图层“动作”，第 1 帧，第 29 行 1120：访问未定义的属性 newBox。

```
    leftBox.addEventListener(MouseEvent.CLICK, addBox);
    函数添加框（事件：鼠标事件）：无效

    {
    var newBox:right_box = new right_box();
    addChild(newBox);
    新盒子.x = 0;
    新盒子.y = 0;
    newBox.width = leftBox.width;
    newBox.height = leftBox.height /2;

    }
    newBox.addEventListener(MouseEvent.CLICK, playSound);
    函数播放声音（事件：事件）
    {
    var mySound:testSound = new testSound();
    mySound.play();

    }

```

任何帮助将非常感激。

谢谢！

（PS我是n00b，所以拜托，乖一点！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:07:31.537

您正在尝试在 newbox 创建之前将事件侦听器添加到它。尝试如下：

```
// mySound should be availible in scope
var mySound:testSound = new testSound();

// newBox also
var newBox:right_box;
// here is a channel for you
var channel: SoundChannel;

// ok this adds the first listener...
leftBox.addEventListener(MouseEvent.CLICK, addBox);

function addBox(event:MouseEvent):void {
    newBox = new right_box();
    addChild(newBox);
    newBox.x = 0;
    newBox.y = 0;
    newBox.width = leftBox.width;
    newBox.height = leftBox.height /2;
    // you should add listener here...
    newBox.addEventListener(MouseEvent.CLICK, playSound);
    // you have to avoid multiple newBoxes on each other and
    // leaving the older ones under..
    // So stop listening to the newBox generating event: 
    leftBox.removeEventListener(MouseEvent.CLICK, addBox);
}

function playSound(event:Event){
    channel = mySound.play();
    // On next click you want sound to stop so
    // First remove the old listener to avoid play over:  
    newBox.removeEventListener(MouseEvent.CLICK, playSound);
    // and hook listener to stop method
    newBox.addEventListener(MouseEvent.CLICK, stopSound);
 }

 function stopSound(event:Event){
    channel.stop();
    // On next click you want to remove newBox 
    // First remove the old listener to avoid play over:  
    newBox.removeEventListener(MouseEvent.CLICK, stopSound);
    newBox.addEventListener(MouseEvent.CLICK, removeNewBox);
 }

 function removeNewBox(event:Event){
    // First remove the listener :  
    newBox.removeEventListener(MouseEvent.CLICK, removeNewBox );
    removeChild(newBox); // now remove from display list
    newBox = null; // make contents eligible for garbage collection 
 } 
```

# c# - 将应用程序注册到 URI 方案

> ID：15841820
> 
> 赞同：2
> 
> 时间：2013-04-05T19:19:06.810
> 
> 标签：c#, wpf, windows, registry

我有一个 wpf 应用程序，我通过执行以下操作注册为 URI 方案。

```
HKEY_CLASSES_ROOT
-->myappname
   -->shell
      -->open
         -->command
            (Default) = "c:\pathtomyapp\app.exe" 
```

极好的！但是，我的应用程序强制一次只能运行一个实例。如何检测我的应用程序已经在运行，例如将其置于前台？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:22:19.947

您可以使用命名互斥锁来检测该应用程序是否已在运行。或者，如果你有一个 GUI 应用程序，你可以从[VisualBasic 的 SingleInstance 应用程序](http://msdn.microsoft.com/en-us/library/w3xx6ewx%28v=vs.80%29.aspx)继承你的表单，它也会为你做同样的事情。

```
 public class SingleInstanceController
    : WindowsFormsApplicationBase
  {
    public SingleInstanceController()
    {
      // Set whether the application is single instance
      this.IsSingleInstance = true;

      this.StartupNextInstance += new
        StartupNextInstanceEventHandler(this_StartupNextInstance);
    }

    void this_StartupNextInstance(object sender, StartupNextInstanceEventArgs e)
    {
      // Here you get the control when any other instance is
      // invoked apart from the first one.
      // You have args here in e.CommandLine.

      // You custom code which should be run on other instances
    }

    protected override void OnCreateMainForm()
    {
      // Instantiate your main application form
      this.MainForm = new Form1();
    }
  }

[STAThread]
static void Main(string[] args)
{    
  SingleInstanceController controller = new SingleInstanceController();
  controller.Run(args);
} 
```

无论何时用 C# 编写代码都没有关系，因为此类可作为 .Net 框架的一部分并适用于所有语言。

这是[WPF 的包装器](http://www.codeproject.com/Articles/47958/WPF-Application-Wrapper-with-Single-Instance-Suppo)

# spring - 在哪里将非标准化数据格式化为标准格式（视图、服务或 DAO 层）？

> ID：15841822
> 
> 赞同：1
> 
> 时间：2013-04-05T19:19:07.963
> 
> 标签：spring, model-view-controller, formatting

我将 Spring MVC 用于我的表示层，并且还将 Spring 用于我的服务和 DAO 层。通常我会在 MVC 的视图层（在我的例子中是 JSP）中格式化数据，但是如果从数据库中检索到的数据不是标准化格式怎么办？

例如，我正在从我公司的一个数据库中提取电话号码，但它们可能采用任何格式 (111)-555-1234 或 1115551234 等。这似乎需要太多的功能和处理才能放入JSP/视图层。我宁愿将所有数字以相同格式放在其他地方，然后在视图上重新格式化。在这种情况下我应该在哪里格式化 - 服务层？道？

这也将允许我利用我无法从 JSP 调用的库（或者从 JSP 调用没有意义的库）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:36:26.983

我会让 DAO 查询方法从电话号码中删除格式字符，并让表示层为它们提供一致的格式（可能在 JSP 标记中）。我不喜欢将业务逻辑放入 DAO，但这似乎与数据非常相关。

（实际上，如果格式化代码在进行自己的格式化之前首先删除任何预先存在的格式，那么您可能无需在其他任何地方删除格式化字符就可以过关。我只是喜欢以规范的形式来处理。）

作为将formatting-char-removal 放入DAO 的替代方法，如果您使用Hibernate，则可以创建[自定义用户类型](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-custom)，从电话号码属性中删除或插入格式字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:30:07.317

我通常进行格式化，当我将模型映射到值对象（VO 或任何你想调用的对象）时，主要是在表示层中（或者我在表示层和服务层之间放置一个层，如果我有太多东西要做）。如果您想要的话，这会在整个应用程序中带来格式的一致性。

当我希望名称以驼峰形式出现时，我会这样做

```
BeanUtils.copyProperties(userAccount, userAccountVO, ignoreProperties);
userAccountVO.setName(StringUtilities.convertToCamelCase(userAccountVO.getName())); 
```

# android - nexus 7 with flash builder Error adobe air version not installed state offline

> ID：15841824
> 
> 赞同：3
> 
> 时间：2013-04-05T19:19:08.620
> 
> 标签：android, flash, flash-builder

自从我之前的问题不被视为问题以来，我已经做了一些研究。我有 nexus 7 与 Flash Builder 4.6 一起使用。

我最初下载了 Android SDK 并安装了 Google USB 驱动程序。我打开了我的nexus的调试选项，我也做`USB computer connection`了PTP连接。

最后，我从 Flash Builder 运行一个应用程序，我得到以下屏幕：

![http://i.stack.imgur.com/BSkXs.png](https://i.stack.imgur.com/cJsvK.png)

我尝试卸载 adobe air 并重新安装，但没有成功。拜托我需要你的帮忙。我的笔记本电脑是windows 7操作系统。我还运行命令行并检查了我的`platform-tools`并运行 `adb devices`.

它识别出我的关系附有它的序列号和“设备”字样。还有一件事，nexus 连接也显示设备正在充电。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T19:20:39.440

我遇到了同样的问题。正如用户 user1986244 所说，我必须对可执行文件进行一些移动。我将提到的所有 .EXE（adb.exe 和其他）放入 `<FlashBuilderDir>\sdks\4.6.0\lib\android\bin`文件夹中，但是，我还必须将它们放在这里：

```
<FlashBuilderDir>\eclipse\plugins\com.adobe.flash.compiler_4.7.0.349722\AIRSDK\lib\android\bin 
```

然后它要求我安装 AIRSDK，我的应用程序开始工作。

我假设这里有一个更优雅的解决方案，但是，我还没有找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T20:26:22.250

这两天，我试图找到解决方案。终于奏效了。我想完成这些步骤。安装 ADT 捆绑包附带的 android sdk 后。运行 SDK 管理器。从选项列表中检查工具和谷歌 USB 驱动程序。我的设备是nexus 7。然后我安装了 Flash builder 4.6。我创建了简单的 Hello 程序，然后运行。但是正如我在上面最初的问题中提到的那样，给了我屏幕“未安装 adobe air”和“离线”状态。接下来，我从 adobe 论坛帮助中阅读了一篇帖子，上面写着从 android ADT 文件夹复制 adb.exe 并将其粘贴到 flash builder。我的实际路径在 ADT 文件夹 sdk/platform-tools/adb 中是这样的。所以我复制 adb 并转到 Adob​​e flash builder 4.6 文件夹/sdks/4.6.0/lib/android/bin。在这个文件夹中我粘贴了我复制的内容，弹出消息说你不能粘贴它是打开的。而不是让它跳过。我 ctrl + alt + 从应用程序中删除并关闭 adb.exe。现在，我返回并单击重试。它粘贴了它接下来运行我的 android 测试，它问我“你想安装 adobe air 吗？” 在您的设备上。我点击是，然后它起作用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T11:05:03.453

就像 LordJalek 说的，我必须将 adb 复制到这两个文件夹中。如果这些文件夹不存在，请从 Flash Builder 首选项中找到它们。然后我需要重新启动 adb：

> adb 停止服务器
> 
> adb 启动服务器

然后，当我在“选择设备”屏幕上单击刷新时，它工作了，现在我看到我的设备在线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T17:38:38.370

您可能需要手动安装驱动程序 [http://fr.asus.com/Tablet/Nexus/Nexus_7/#download](http://fr.asus.com/Tablet/Nexus/Nexus_7/#download)

然后在您的设备上允许 USB 调试

# google-chrome - 为什么空的 IndexedDB 仍然占用空间？

> ID：15841828
> 
> 赞同：5
> 
> 时间：2013-04-05T19:19:14.073
> 
> 标签：google-chrome, google-chrome-devtools, indexeddb

我正在使用 IndexedDB 在 Chrome 中保存游戏数据。

一个普通的游戏大约是 4MB。保存一些游戏，然后删除它们后，开发控制台的“资源”选项卡显示我的 indexedDB 为空，正如预期的那样，但如果我进入内容设置“Cookie 和站点数据”，它显示的 indexedDB 大约为 12MB磁盘上的大小。

这是*在*刷新甚至*重新启动*Chrome 之后。以下是我的删除代码，当我删除并且对旧数据的查询没有返回任何内容时，我得到了成功，正如预期的那样。

```
database.indexedDB.deleteGame = function(nameIn){
    var db = database.indexedDB.db;
    var trans = db.transaction(["saves"], "readwrite");
    var store = trans.objectStore("saves");
    var wipeSlate = store.delete(nameIn);
    wipeSlate.onsuccess = function(e) {
        console.log("Old game wiped");
    };
    wipeSlate.onerror = function(e) {
        console.log("I don't think the old game existed..." + e);
    };
}; 
```

我已经检查了以下问题（搜索结果也没有显示任何有希望的东西）：

*   [为什么空数据库占用兆字节空间](https://stackoverflow.com/questions/2431180/why-does-an-empty-database-take-megabytes-of-space)
*   [空字段是否占用数据库中的空间](https://stackoverflow.com/questions/14932258/does-an-empty-field-take-up-space-in-database)
*   [IndexedDB deleteDatabase 不重置版本](https://stackoverflow.com/questions/11216744/indexeddb-deletedatabase-does-not-reset-version)
*   [我似乎从 IndexedDB 索引中获得了脏读。这可能吗？](https://stackoverflow.com/questions/15240232/i-seem-to-be-getting-a-dirty-read-from-an-indexeddb-index-is-this-possible)

但是他们都没有处理*我的*问题，非常感谢任何和所有的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T02:55:07.527

Chrome 不会立即从磁盘中删除数据，它只是被标记为已删除。如果您向 IndexedDB 再写入约 4 兆字节，LevelDB 将进行压缩，并且包含旧条目的文件将被删除。

Chrome 没有 50mb 的限制，并且永远不会请求用户对 IndexedDB 的许可。

这个问题可能会有所帮助。 [Google Chrome 浏览器上的索引数据库的存储限制是多少？](https://stackoverflow.com/questions/10988569/what-are-the-storage-limits-for-the-indexed-db-on-googles-chrome-browser/11077695#11077695)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T00:13:37.007

你为什么担心？

操作系统和浏览器可能会采取整体方法来优化用户体验。存储就是其中之一。在大多数情况下，将它们标记为已删除比删除更有效。

# python - 为静态文件配置 Python GAE app.yaml

> ID：15841835
> 
> 赞同：2
> 
> 时间：2013-04-05T19:19:24.650
> 
> 标签：python, google-app-engine, python-2.7, yaml

我正在尝试获取对 .css 文件的所有 URL 引用，以指向 GAE Python 2.7 项目中的单个 css 目录。例如，我想要所有这些 URL...

```
http://website.com/style.css
http://website.com/a/style.css
http://website.com/a/b/c-d-e/style.css 
```

...指向GAE中的这个文件...

```
/css/style.css 
```

这是我一直在玩的 app.yaml 条目：

```
- url: /.*([^/]*\.css)
  static_files: css/\1
  upload: css/.* 
```

我认为我正在做的是......
url：使用任何带有 .css 结尾的 URL。在末尾分组一个不包含正斜杠且以“.css”结尾的字符串。
static_files：使用组来引用css文件夹中的文件。
上传：选择css文件夹中的所有文件作为符合条件的文件。

我究竟做错了什么？如果您能解释您的回复，请加分。如果您可以解释上传项目的真正用途，则可以加分。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T23:45:52.093

这对我有用：

```
- url: /.*?([^/]*\.css)
  static_files: css/\1
  upload: css/.*\.css 
```

首先是在 url 正则表达式中。在 /.* 之后你应该放 '?' 因为您希望您的正则表达式变得懒惰而不是贪婪。否则它只会把整个 url 吸到 .css 部分，因为，为什么不呢。

第二件事是 - 在上传部分我在最后添加了 .css。这是我的疯狂猜测，我还没有弄清楚为什么它有帮助.. :)

希望这会有所帮助。那是你想要的吗？

# c# - Caliburn.micro 和用户控件点击处理程序

> ID：15841836
> 
> 赞同：1
> 
> 时间：2013-04-05T19:19:28.043
> 
> 标签：c#, wpf, user-controls, caliburn.micro

我创建了一个非常简单的用户控件 ImageButton

```
<UserControl x:Class="SampleApp.Controls.ImageButton"
             Name="ImageButtonControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             d:DesignHeight="300"
             d:DesignWidth="300"
             mc:Ignorable="d">
    <Button>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="1*" />
                <RowDefinition Height="6*" />
                <RowDefinition Height="2*" />
                <RowDefinition Height="1*" />
            </Grid.RowDefinitions>
            <Image Grid.Row="1" Source="{Binding ElementName=ImageButtonControl, Path=Image}" VerticalAlignment="Stretch" HorizontalAlignment="Center" />
            <TextBlock Grid.Row="2" Text="{Binding ElementName=ImageButtonControl, Path=Text}" VerticalAlignment="Stretch" HorizontalAlignment="Center" />
        </Grid>
    </Button>
</UserControl> 
```

后面有代码：

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;

namespace SampleApp.Controls
{
    /// <summary>
    /// Interaction logic for ImageButton.xaml
    /// </summary>
    public partial class ImageButton : UserControl
    {
        public ImageButton()
        {
            InitializeComponent();
        }

        public string Text
        {
            get { return (string)GetValue(TextProperty); }
            set { SetValue(TextProperty, value); }
        }

        public static readonly DependencyProperty TextProperty =
          DependencyProperty.Register("Text", typeof(string), typeof(ImageButton), new UIPropertyMetadata(""));

        public ImageSource Image
        {
            get { return (ImageSource)GetValue(ImageProperty); }
            set { SetValue(ImageProperty, value); }
        }

        public static readonly DependencyProperty ImageProperty =
           DependencyProperty.Register("Image", typeof(ImageSource), typeof(ImageButton), new UIPropertyMetadata(null)); 
    }
} 
```

现在我想在我的小示例应用程序中使用它

```
xmlns:controls="clr-namespace:SampleApp.Controls"

<controls:ImageButton Grid.Row="1"
                              Grid.Column="1"
                              Margin="2"
                              Image="/Images/link.png"
                              Text="DoSomething">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <cal:ActionMessage MethodName="DoSomething" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </controls:ImageButton> 
```

如果我给它 ax:Name，比如

```
<controls:ImageButton x:Name="DoSomething" 
```

例如 DoSomething`DoSomething`显示视图时直接调用具有该名称的方法，即当我激活包含该按钮的视图模型时，就像我单击按钮一样（如果它是普通按钮而不是用户控件，它将以这种方式工作)，但按钮单击处理程序永远不会在单击时调用。

现在我尝试添加一个 ActionMessage ，如上所示，但它也不起作用......

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:51:41.470

这是因为没有为您的用户控件类型配置约定。您可以通过`ConventionManager`（请参阅[http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Conventions](http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Conventions)）添加约定，或者您可以从中派生您的类型`Button`。

您也不能使用自定义用户控件，而只需将图像添加到视图中的`Content`属性。`Button`

# image - 如何从 Magento 中的模型（目录/产品图像）中获取位置值？

> ID：15841839
> 
> 赞同：0
> 
> 时间：2013-04-05T19:19:36.077
> 
> 标签：image, magento

我只有这个 Magento 模型（catalog/product_image）。我有什么方法可以获取该图像的位置值或标签值。当我 var dump 这个模型时，我只能得到宽度、高度、质量、_keepAspectRatio 等。我能从中得到的最有价值的数据是这样的图像文件名：/s/e/productABC.png

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:14:31.367

我不太确定您是否会从 catalog/product_image 模型中获得更多有用的信息。从您的问题来看，您似乎想要获取图像标签。如果您有权访问产品对象，则可以使用：

```
$_product->getMediaGalleryImages()->getItemByColumnValue('label', 'LABEL_NAME')->getUrl(); 
```

这将返回图像的标签。

如果您需要更多帮助，请分享您可以访问的对象以及您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T02:50:16.560

在那个类中，只有一个属性、一个集合和一个文件获取函数

财产 ：`protected $_baseFile;`

功能

```
/**
     * Set filenames for base file and new file
     *
     * @param string $file
     * @return Mage_Catalog_Model_Product_Image
     */
    public function setBaseFile($file) 
```

和

```
public function getBaseFile()
    {
        return $this->_baseFile;
    } 
```

这意味着：您不会使用此对象获得位置。只需检查`getBaseFile`将返回一个字符串。

我总是建议对于任何给定的对象，如果从`varien_object`使用中扩展，`$object->debug();`因为这提供了关于它存储的所有内容的大量信息。

# android - 如何以编程方式设置 layout_alignParentRight="false"？

> ID：15841842
> 
> 赞同：14
> 
> 时间：2013-04-05T19:19:42.167
> 
> 标签：android, android-relativelayout, android-layoutparams

如何以`android:layout_alignParentRight="false"`编程方式设置？我可以`true`通过此代码将其设置为，但我想以`false`编程方式将其设置为：

```
RelativeLayout.Layoutparams params =
(RelativeLayout.LayoutParams)myView.getLayoutParams();
params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
button.setLayoutParams(params); 
```

有一个方法[removeRule(int)](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#removeRule%28int%29)但它是在（API 级别 17）中添加的。我想在 API 级别 7 或 8 中使用类似的东西。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-05T19:41:54.997

此代码会将其设置为 false：

```
addRule(RelativeLayout.ALIGN_PARENT_RIGHT,0) 
```

# excel - Excel Web App 的工作表 RowXColumn 限制是什么？

> ID：15841851
> 
> 赞同：0
> 
> 时间：2013-04-05T19:19:59.970
> 
> 标签：excel, web-applications

例如，客户端程序在此处列出了工作表限制：

[http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010342495.aspx](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010342495.aspx)

但我找不到任何关于网络应用程序限制的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T17:02:31.037

根据@Tim Williams 的回复，我认为 Excel 网络应用程序的行和列限制为 16384 列 x 1048576 行。

# jquery - 将有效负载中的键值对转换为 json 对象

> ID：15841852
> 
> 赞同：0
> 
> 时间：2013-04-05T19:20:00.577
> 
> 标签：jquery, json

这是我的 json 有效负载

```
"multiList": [
  {
    "Key": "my_key",
    "Value": this is my key
  },
  {
    "Key": "my_text_box",
    "Value": "This is my text box"
  }, 
```

]

如何使用 jquery 动态转换它

```
"multiList": [
  {
    "my_key" : "this is my key"
  },
  {
    "my_text_box": "This is my text box"
  }, 
```

]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:21:52.447

例如 ：

```
yourobj.multiList = yourobj.multiList.map(function(v) {
   var r = {};
   r[v.Key] = v.Value;
   return r;
}); 
```

如果你想支持 IE8，你必须[使用 shim 来映射](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)或使用`for`而不是`map`：

```
for (var i=0; i<yourobj.multiList.length; i++) {
    var v = yourobj.multiList[i];
    var r = {};
    r[v.Key] = v.Value;
    yourobj.multiList[i] = r;
} 
```

# wordpress - wordpress 中出现的奇怪字符

> ID：15841854
> 
> 赞同：2
> 
> 时间：2013-04-05T19:20:04.437
> 
> 标签：wordpress, utf-8, character-encoding

我有一个琐碎的 wordpress 问题

每当我在我创建的 wordpress 帖子中添加撇号时

`'`

它保存为一组奇怪的字符

`â€™`

我用过wordpress很多次，从来没有遇到过这个问题

我已经卸载了每个插件，但问题仍然存在

我在某处阅读以注释掉这些行，`wp-config.php`但这对新帖子没有帮助

```
/** Database Charset to use in creating database tables. */
//define('DB_CHARSET', 'utf8');

/** The Database Collate type. Don't change this if in doubt. */
//define('DB_COLLATE', ''); 
```

有人能帮我吗？是否需要将字符集设置为覆盖某处？如何？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:18:48.947

如果那个奇怪的字符存储在 DB 中，那么您的 DB 似乎没有设置 UTF8 字符集，因此您可以取消注释 wp-config.php 中的这两行，因为它们不是问题的根源。

您有一个全面的教程如何使用[WordPress 数据库](http://codex.wordpress.org/Converting_Database_Character_Sets)转换字符集，但这里是简短的列表：

*   备份您的数据库
*   也许最好在您的本地计算机上复制您的网站并在那里尝试以下更改

*   转换数据库（这不会影响现有的表，只会影响那些未来新创建的表）

    更改数据库 MyDb 字符集 utf8；

*   转换数据库中尚未采用所需格式的任何表。

    关注表**wp_posts**和**wp_postmeta**

    ALTER TABLE wp_posts CHARACTER SET utf8

    ALTER TABLE wp_postmeta 字符集 utf8

*   单独更改每个表的每一列以使用正确的字符集。这不是一个简单的过程，请仔细阅读上述链接[中有关列](http://codex.wordpress.org/Converting_Database_Character_Sets#Changing_the_charset_of_individual_columns)的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:50:34.197

我必须更新线程，如下所示。我几乎遵循了解决 utf-8 不匹配的所有教程，没有任何帮助 最后我们发现一些网络钓鱼代码已被注入根索引文件（也链接到一些第 3 方成人网站，但我们的网站没有重定向，不用说，我们清理了非常感谢大家的帮助，特别是@user850010 我希望这个线程对其他人有用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-11T12:43:31.647

运行此查询：

```
ALTER DATABASE MyDb CHARACTER SET utf8; 
```

编辑*wp_config.php*并设置后：

```
define('DB_CHARSET', 'utf8'); 
```

# android - 不会将值插入数据库 || 不会跑

> ID：15841855
> 
> 赞同：0
> 
> 时间：2013-04-05T19:20:04.763
> 
> 标签：android, sqlite

我最近做了一些小改动，似乎看不出是什么错误导致了这一切。任何帮助是极大的赞赏

主要的

```
package com.androidhive.androidsqlite;

import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class AndroidAss2SQL extends Activity {
    /** Called when the activity is first created. */
    TextView text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        DatabaseHandler db = new DatabaseHandler(this);

        /**
         * CRUD Operations
         * */
        // Inserting Contacts
        Log.d("Insert: ", "Inserting ..");
        db.addContact(new Coms("Gold", "100.00", "0"));
      db.addContact(new Coms("Silver", "300.00", "3"));
      db.addContact(new Coms("Wheat", "500.00", "4"));
      db.addContact(new Coms("Sugar", "750.00", "0"));
      db.addContact(new Coms("Coffee", "433.00", "9"));

        // Reading all contacts
        Log.d("Reading: ", "Reading all coms..");
        List<Coms> contacts = db.getAllContacts();       

        for (Coms cn : contacts) {
            String log = "Id: "+cn.getID()+" ,Name: " + cn.getName() + " ,Phone: " + cn.getPhoneNumber() + " ,Quantity: " + cn.getQuan();
                // Writing Contacts to log
        Log.d("Name: ", log);

        }

        Coms rando = db.getContact(1);
        text = (TextView) findViewById(R.id.textView2);
        text.setText(String.valueOf(rando));

        Coms rando1 = db.getContact(2);
        text = (TextView) findViewById(R.id.textView4);
        text.setText(String.valueOf(rando1));

        Coms rando2 = db.getContact(3);
        text = (TextView) findViewById(R.id.textView6);
        text.setText(String.valueOf(rando2));

        Coms rando3 = db.getContact(4);
        text = (TextView) findViewById(R.id.textView8);
        text.setText(String.valueOf(rando3));

        Coms rando4 = db.getContact(5);
        text = (TextView) findViewById(R.id.textView10);
        text.setText(String.valueOf(rando4));

    }
} 
```

通讯类

```
package com.androidhive.androidsqlite;

public class Coms {

    //private variables
    int _id;
    String _name;
    String _price;
    String _quan;

    // Empty constructor
    public Coms(){

    }
    // constructor
    public Coms(int id, String name, String price){
        this._id = id;
        this._name = name;
        this._price = price;
    }

    // constructor
    public Coms(String name, String price){
        this._name = name;
        this._price = price;
    }
    // constructor
        public Coms(String name){
            this._name = name;
        }
        public Coms(String name, String price, String quan){
            this._name = name;
            this._price = price;
            this._quan = quan;
        }
        public Coms(int id, String name, String price, String quan){
            this._id = id;
            this._name = name;
            this._price = price;
            this._quan = quan;
        }
    @Override
    public String toString(){
           return this._price;
        }
    // getting ID
    public int getID(){
        return this._id;
    }

    // setting id
    public void setID(int id){
        this._id = id;
    }

    // getting name
    public String getName(){
        return this._name;
    }

    // setting name
    public void setName(String name){
        this._name = name;
    }

    // getting phone number
    public String getPhoneNumber(){
        return this._price;
    }

    // setting phone number
    public void setPhoneNumber(String phone_number){
        this._price = phone_number;
    }
    // getting name
        public String getQuan(){
            return this._quan;
        }

        // setting name
        public void setQuan(String name){
            this._quan = name;
        }
} 
```

DB Handler - 我的大部分更改都是在这里进行的，尝试添加 Quantity (quan)

```
package com.androidhive.androidsqlite;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "comstuff";

    // Contacts table name
    private static final String TABLE_CONTACTS = "coms";

    // Contacts Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_PRICE = "price";
    private static final String KEY_QUAN = "quantity";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
                + KEY_PRICE + " TEXT," + KEY_QUAN + " TEXT" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

        // Create tables again
        onCreate(db);
    }

    /**
     * All CRUD(Create, Read, Update, Delete) Operations
     */

    // Adding new contact
    void addContact(Coms contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName()); // Contact Name
        values.put(KEY_PRICE, contact.getPhoneNumber()); // Contact Phone
        values.put(KEY_QUAN, contact.getQuan()); // Contact Phone

        // Inserting Row
        db.insert(TABLE_CONTACTS, null, values);
        db.close(); // Closing database connection
    }

    // Getting single contact
    Coms getContact(int id) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
                KEY_NAME, KEY_PRICE, KEY_QUAN }, KEY_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        Coms contact = new Coms(Integer.parseInt(cursor.getString(0)),
                cursor.getString(1), cursor.getString(2), cursor.getString(3));
        // return contact
        return contact;
    }
    Coms getName(int id) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_CONTACTS, new String[] {
                KEY_NAME, KEY_PRICE, KEY_QUAN }, KEY_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        Coms contact = new Coms(Integer.parseInt(cursor.getString(0)),
                cursor.getString(1), cursor.getString(2), cursor.getString(3));
        // return contact
        return contact;
    }

    // Getting All Contacts
    public List<Coms> getAllContacts() {
        List<Coms> contactList = new ArrayList<Coms>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Coms contact = new Coms();
                contact.setID(Integer.parseInt(cursor.getString(0)));
                contact.setName(cursor.getString(1));
                contact.setPhoneNumber(cursor.getString(2));
                //when this is changed from 2 to 3 it causes an error
                contact.setQuan(cursor.getString(3));
                // Adding contact to list
                contactList.add(contact);
            } while (cursor.moveToNext());
        }

        // return contact list
        return contactList;
    }

    // Updating single contact
    public int updateContact(Coms contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName());
        values.put(KEY_PRICE, contact.getPhoneNumber());
        values.put(KEY_QUAN, contact.getQuan());

        // updating row
        return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
                new String[] { String.valueOf(contact.getID()) });
    }

    // Deleting single contact
    public void deleteContact(Coms contact) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(TABLE_CONTACTS, KEY_ID + " = ?",
                new String[] { String.valueOf(contact.getID()) });
        db.close();
    }

    // Getting contacts Count
    public int getContactsCount() {
        String countQuery = "SELECT  * FROM " + TABLE_CONTACTS;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();

        // return count
        return cursor.getCount();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:38:14.253

数据库表仅在第一次运行时创建。如果创建了数据库，则不会再次调用 onCreate。因此，如果您向表中添加新列并插入涉及新列的记录，您将得到错误。
清除数据或卸载您的应用程序，然后重新安装并运行。
在模拟器中检查“擦除用户数据”。

# object - OpenGL - 定向强光？

> ID：15841857
> 
> 赞同：0
> 
> 时间：2013-04-05T19:20:07.133
> 
> 标签：object, opengl, 3d, lighting

我补充说，光在物体上看起来很弱？我希望它更亮，我不想给 Light 位置。我的意思是，我想要一个明亮的灯光在所有屏幕上，在中间或角落有相同的亮度？

```
float[] lightColor = {1, 1, 1, 0};
float[] lightPosition = {0, 0, 10, 0};  

@Override
public void render () {

    ...
    gl.glEnable(GL10.GL_LIGHTING);
    ...
    gl.glEnable(GL10.GL_LIGHT0);
    gl.glLightfv(GL10.GL_LIGHT0, GL10.GL_DIFFUSE, lightColor, 0);
    gl.glLightfv(GL10.GL_LIGHT0, GL10.GL_POSITION, lightPosition, 0);
} 
```

# vb.net - 在 vb.net 中访问莲花笔记的后端类

> ID：15841859
> 
> 赞同：1
> 
> 时间：2013-04-05T19:20:08.953
> 
> 标签：vb.net, lotus-notes

我需要从 vb.net 应用程序访问 Lotus Notes 的后端类。实际上我想获得COM接口。我可以在 C++ 中轻松地做到这一点：

```
...
NOTESSESSIONPtr itfNotesP;
NOTESDATABASEPtr itfDatabaseP;
...
try
{
    hrNotesSession = itfNotesP.CreateInstance(__uuidof(NOTESSESSION));
    hrNotesUiWorkspace = ptrUIWP.CreateInstance(__uuidof(NOTESUIWORKSPACE));
}
... 
```

但是在 vb.net 中，我已经没有解决方案来使用 Notes32.tlb 中的 lotus.NOTESSESSION 和 lotus.NOTESUIWORKSPACE 来实现相同的目标

有人知道我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:18:33.440

你读过[这个](http://www.ibm.com/developerworks/lotus/library/domino-msnet/)吗？它有点老了，至少有一件重要的事情没有提到，但我认为它足以让你开始。

它没有提到的事情（这对您是否重要）是 Win64 不支持 Domino COM 类。（请参阅此 IBM[技术](http://www-01.ibm.com/support/docview.wss?uid=swg21454291)说明。）您会在 StackOverflow 上找到一些遇到困难的人提出的问题，并且有一些答案可以帮助您解决该技术说明中的特定问题。事实上，大多数类都可以工作，但某些类中的一些方法根本不起作用。除了社区帮助之外，您只能靠自己，因为 IBM 不会回答有关不受支持的内容的问题。

# java - MySQL 和 SQLite 的类

> ID：15841861
> 
> 赞同：1
> 
> 时间：2013-04-05T19:20:19.563
> 
> 标签：java, mysql, sqlite, class, bukkit

我正在编写一个 Bukkit 插件，一个用于“我的世界”游戏的服务器。我不会写SQL，只是一些语法。

我正在寻找 Java 类来访问 MySQL 和 SQLite。该插件一次只使用一个数据库，在配置文件中设置，MySQL 或 SQLite。

我发现了这个：

```
import java.io.*;
import java.sql.*;
import java.util.logging.*;
import org.bukkit.plugin.*;

public class Db {
    private final Plugin plugin;
    private final String url;
    private Logger log;
    Connection connection = null;  
    ResultSet resultSet = null;  
    Statement statement = null;  

    public Db(final Plugin plugin, final String host, final String database,
            final String user, final String password) {
        this.plugin = plugin;
        url = "jdbc:mysql://" + host + "/" + database + "?user=" + user
                + "&password=" + password;
        log = plugin.getServer().getLogger();
        initDriver("com.mysql.jdbc.Driver");
    }

    public Db(final Plugin plugin, final String filePath) {
        this.plugin = plugin;
        url = "jdbc:sqlite:" + new File(filePath).getAbsolutePath();
        log = plugin.getServer().getLogger();
        initDriver("org.sqlite.JDBC");
    }

    private void initDriver(final String driver) {
        try {
            Class.forName(driver);
        } catch (final Exception e) {
            log.severe("Database driver error:" + e.getMessage());
        }
    }

    public int resultInt(ResultSet result, int column) {
        if (result == null)
            return 0;
        try {
            result.next();
            int integer = result.getInt(column);
            result.close();

            return integer;
        } catch (SQLException e) {
            log.severe("Database result error: " + e.getMessage());
        }
        return 0;
    }

    public String resultString(ResultSet result, int column) {
        if (result == null)
            return null;
        try {
            result.next();
            String string = result.getString(column);
            result.close();
            return string;
        } catch (SQLException e) {
            log.severe("Database result error: " + e.getMessage());
        }
        return null;
    }

    public ResultSet query(final String query) {
        return query(query, false);
    }

    public ResultSet query(final String query, final boolean retry) {
        try {
            final Connection connection = DriverManager.getConnection(url);
            final PreparedStatement statement = connection
                    .prepareStatement(query);
            if (statement.execute())
                return statement.getResultSet();
        } catch (final SQLException e) {
            final String msg = e.getMessage();
            log.severe("Database query error: " + msg);
            if (retry && msg.contains("_BUSY")) {
                log.severe("Retrying query...");

                plugin.getServer().getScheduler()
                        .scheduleSyncDelayedTask(plugin, new Runnable() {
                            @Override
                            public void run() {

                                query(query);
                            }
                        }, 20);
            }
        }
        return null;
    }
} 
```

但我不知道如何关闭连接和语句。在这段代码中，我必须使用

```
base = new Db(this, getDataFolder() + File.separator + "SQLite.db"); 
```

但是使用该代码会创建多个线程，这会给我带来错误。我必须找到一个可以关闭连接和语句的类。我只学习了几个星期的 Java，而且我知道的不多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:22:53.987

我建议您至少阅读一点[Java 教程：JDBC 基础知识](http://docs.oracle.com/javase/tutorial/jdbc/basics/processingsqlstatements.html)。几乎所有的东西都在那里解释...

简短的回答是：在处理完每个对象后，只需调用`ResultSet.close()`, 。 或者使用 Spring's 、[MyBatis](http://blog.mybatis.org/)或[Hibernate](http://www.hibernate.org/)，它们在上述框架技术之上添加了另一层抽象（和复杂性）。`Statement.close()``Connection.close()`
[`JdbcTemplate`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T12:37:06.733

好的...我有新的工作代码。我编辑过旧的:)

```
import java.io.*;
import java.sql.*;

public class Db {
    private final String url;
    ResultSet resultSet = null;
    Statement statement = null;
    final String driver;
    String user = "";
    String database = "";
    String password = "";
    String port = "";
    String host = "";
    Connection c = null;

    public Db(String Host, String db, String username, String password) {
        this.host = Host;
        this.database = db;
        this.user = username;
        this.password = password;
        url = "jdbc:mysql://" + host + "/" + database + "?user=" + user
                + "&password=" + password;
        driver = ("com.mysql.jdbc.Driver");
    }

    public Db(String filePath) {
        url = "jdbc:sqlite:" + new File(filePath).getAbsolutePath();
        driver = ("org.sqlite.JDBC");
    }

    public Connection open() {
        try {
            Class.forName(driver);
            this.c = DriverManager.getConnection(url);
            return c;
        } catch (SQLException e) {
            System.out
                    .println("Could not connect to MySQL/SQLite server! because: "
                            + e.getMessage());
        } catch (ClassNotFoundException e) {
            System.out.println("JDBC Driver not found!");
        }
        return this.c;
    }

    public boolean checkConnection() {
        if (this.c != null) {
            return true;
        }
        return false;
    }

    public Connection getConn() {
        return this.c;
    }

    public void closeConnection(Connection c) {
        c = null;
    }
} 
```

# c# - 为什么我的 MenuStrip 在第一次点击时出现在不正确的位置？

> ID：15841863
> 
> 赞同：4
> 
> 时间：2013-04-05T19:20:20.717
> 
> 标签：c#, .net, vb.net, winforms

我正在开发一个 VB Winforms 项目（尽管我对 C# 解决方案也很好）并进行了以下设置：

*   我在表单上有一个 ContextMenuStrip，`msCreateReports`
*   我在表单顶部有一个 MenuStrip，其中一个菜单项被`Create Reports`设置`DropDown`为`msCreateReports`
*   我在表单上有一个命令按钮`cmdCreateReports`

现在，对于我的命令按钮，我有以下`click`事件代码：

```
Private Sub cmdCreateReports_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdCreateReports.Click
    msCreateReports.Show(Cursor.Position.X, Cursor.Position.Y)
End Sub 
```

**编辑（更新/解释）：**

* * *

基本上，我在功能方面寻找的是让这个 contextmenustrip 能够显示在两个不同的地方之一，这取决于用户点击的位置......如果他们点击菜单选项，上下文菜单显示为`Create Reports`菜单项上的下拉菜单，**或者**如果用户单击命令按钮，菜单将作为鼠标指针一侧的上下文菜单出现。我希望相同的菜单能够出现在这两个位置之一，具体取决于用户单击以使该菜单出现的位置。

* * *

现在，我的问题是，**只有第一次单击命令按钮时**，ContextMenuStrip 才会出现在菜单的顶部，而不是像我希望的那样显示在命令按钮的顶部。

第一次点击后，菜单出现在正确的位置......我做错了什么/我该如何解决这个问题？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:47:03.230

我有同样的问题（我使用的是 Visual Studio 2010 SP1 和 C#）。我不认为我们做错了什么，对我来说它看起来像是一个 Winforms 错误。

我这样修复它：

1）我已取消设置（使用视觉设计器）`DropDown`主条项目的属性。

2) 我在 contextMenuStrip 上定义了 Opening 事件，在主条形项目上定义了 DropDownOpening 事件，如下所示：

```
private void toolStripMyMenuItem_DropDownOpening(object sender, EventArgs e)
{
    toolStripMyMenuItemMyLists.DropDown = contextMenuStrip;
}

private void contextMenuStrip_Opening(object sender, CancelEventArgs e)
{
    toolStripMyMenuItemMyLists.DropDown = contextMenuStrip;
} 
```

而且我再也没有这个问题了。希望它也能帮助你:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:26:41.533

`Cursor.Position.X`并且`Cursor.Position.Y`是相对于 Form 的，需要使用 Overloaded 方法`ContextMenuStrip.Show(Control control, Point pos)`

例子 ：

```
//control = the control you have added context menu
msCreateReports.Show(control, new Point(Cursor.Position.X, Cursor.Position.Y)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-22T21:15:34.573

我有同样的问题。我相信这也是一个错误，因为这种行为只发生在第一次。所以我强迫它在用户有机会与之交互之前打开然后关闭它。所以实际上我在用户使用它之前使用它一次，然后它就会正确运行。这是我在表单加载方法中添加的代码。我的组合框用于允许用户从打印机列表中进行选择。

```
 printerToolStripMenuItem.ShowDropDown();
        toolStripComboBoxPrinter.Owner.Hide();
        printerToolStripMenuItem.Owner.Hide(); 
```

# xpath - Xpath/HtmlAgilityPack：从 href 标签获取特定属性

> ID：15841864
> 
> 赞同：0
> 
> 时间：2013-04-05T19:20:22.840
> 
> 标签：xpath, tags, html-parsing, href, html-agility-pack

我正在使用 HtmlAgilityPack 来解析 html 文件中的 href 标记。href 标签如下所示：

```
<h3 class="product-name"><a href="http://www.somewebsite.com/blahblah" title="Click Here to View This Product">Super Cool Product</a></h3> 
```

到目前为止，我可以成功地将url和title一起拉出来，并显示在一个列表中。这是我用来解析 html 的主要代码：

```
var linksOnPage = from lnks in document.DocumentNode.SelectNodes("//h3[@class='product-name']//a")
                        where
                            lnks.Attributes["href"] != null && 
                            lnks.InnerText.Trim().Length > 0
                      select new
                      {
                          Url = lnks.Attributes["href"].Value,
                          Text = lnks.InnerText
                      }; 
```

上面的代码给了我一个看起来像这样的结果：

```
Super Cool Product - http://www.somewebsite.com/blahblah 
```

我试图弄清楚如何分别提取名称和网址，并将它们放入单独的字符串中，而不是将它们拉在一起并将它们放入一个字符串中。我猜我可以使用某种 Xpath 表示法来做到这一点。如果有人能引导我走向正确的方向，我将非常感激

谢谢， 迈尔斯

# powershell - 设置 Outlook 的“首先显示此地址列表”选项

> ID：15841870
> 
> 赞同：2
> 
> 时间：2013-04-05T19:20:37.170
> 
> 标签：powershell

我需要在数千台计算机上更改 Outlook 2010 中的默认地址列表。要在 Outlook 中手动执行此操作，请转到地址簿>工具>选项>并从“打开地址簿时，首先显示此地址列表：”下拉框中选择一个地址簿。

这是我到目前为止所拥有的：

```
$outlook = $(New-Object -ComObject Outlook.Application)
$Session = $outlook.Session
$Session.Logon()
$ab = $Session.AddressLists | ? {$_.Name -eq 'Example Address Book')}
$abdialog = $Session.GetSelectNamesDialog()
$abdialog.InitialAddressList = $ab 
```

我收到的错误是：

> 异常设置“InitialAddressList”：“无法转换“System._ComObject *”类型的“System.* _ComObject#{00063049-0000-0000-c000-000000000046}”键入“Microsoft.Office.Interop.Outlook.AddressList”。在 line:1 char:1 + $abdialog.InitialAddressList = $Session.AddressLists | ? {$_.name -eq 'BAE 系统 ... + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : NotSpecified: ( :) [], SetValueInvocationException + FullyQualifiedErrorId : ExceptionWhenSetting

请帮助我要疯了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:00:31.037

我不知道这是否是一个错字，但在：

```
$ab = $Session.AddressLists | ? {$_.Name -eq 'Example Address Book')} 
```

您应该删除最后一个右括号

```
$ab = $Session.AddressLists | ? {$_.Name -eq 'Example Address Book'} 
```

之后你的代码对我有用。

# php - php 使用 WCF SSL SOAP 客户端 1.2

> ID：15841875
> 
> 赞同：3
> 
> 时间：2013-04-05T19:20:49.677
> 
> 标签：php, wcf, ssl, nusoap

我在使用 PHP 的 wsHttpBinding WCF 时遇到了一些问题。我最初尝试使用 SOAP1.2，但无法指定 WS Action。

我下载了 nusoap 库。我最初收到一条错误消息，指出由于类型不匹配（文本/xml 而不是预期的应用程序/soap+xml），webservice 不会接受数据。我设法对 nusoap.php 进行了更改，以将数据作为 application/soap+xml) 发送。现在这不会引发错误，我从服务器收到 400 bad request 错误。

我可以使用 WCFTestClient 和 SOAPUI 提供的服务，而不会造成任何混乱，但不能让它从 PHP 中运行。我什至从 SOAPUI 复制了整个肥皂信封，并将 nusoap.php 中的 $soapmsg 设置为完全一样，但它仍然失败。

所以任何人都想提供一些指导。

**编辑** 这是我在 SOAP 1.2 中尝试的代码

```
$params  = array("soap_version"=> SOAP_1_2,
                "trace"=>1,
                "exceptions"=>0,
                );

$client = @new SoapClient('https://localhost/wcftest/Service.svc?wsdl',$params);

$retval = $client->GetData(array('value'=>'stuff'));
if (is_soap_fault($retval)) {
    trigger_error("SOAP Fault: (faultcode: {$retval->faultcode}, faultstring: {$retval->faultstring})", E_USER_ERROR);
} 
```

编辑#2 这是在 SOAPUI 中起作用的代码

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:tem="http://tempuri.org/">
   <soap:Header xmlns:wsa="http://www.w3.org/2005/08/addressing"><wsa:Action>http://tempuri.org/IService/GetData</wsa:Action></soap:Header>
   <soap:Body>
      <tem:GetData>
         <!--Optional:-->
         <tem:value>stuff</tem:value>
      </tem:GetData>
   </soap:Body>
</soap:Envelope> 
```

按照下面的 Gords 链接手动添加 SoapHeaders 后，我在使用 netbeans 进行调试时将其作为 __last_request 得到，但仍然出现相同的错误

```
 "<?xml version="1.0" encoding="UTF-8"?>
    <env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:ns1="http://tempuri.org/">
<env:Header>
<ns1:Action>http://tempuri.org/IService/GetData</ns1:Action>
</env:Header>
<env:Body><ns1:GetData><ns1:value>stuff</ns1:value></ns1:GetData></env:Body></env:Envelope> 
```

有什么建议吗？？

谢谢！安迪

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T22:24:41.643

好的，所以我得到了这个工作。感谢 Gord 让我仔细检查了我之前忽略的东西。

我结束了放弃 nusoap 并坚持使用 SOAP 1.2。这是我的php代码

```
//Declare some paramaters for our soapclient. Need to make sure its set to soap 1.2
$params  = array("soap_version"=> SOAP_1_2,
                "trace"=>1,
                "exceptions"=>0,
                );

//Create the soap client
$client = new SoapClient('https://localhost/wcftest/Service.svc?wsdl',$params);
//add some WSAddressing Headers in. Ensure that you have the Namespace as the address if you are using wsHttpBinding on the endpoint
//This was the step that took me the longest to figure out!
$actionHeader = new SoapHeader('http://www.w3.org/2005/08/addressing','Action','http://tempuri.org/IService/GetData',true);
//Add the headers into the client
$client->__setSoapHeaders($actionHeader);
//Make the call and pass in the variables that we require to go to the server
$retval = $client->__soapCall('GetData',array('value'=>'stuff'));
//Some Error Catching
if (is_soap_fault($retval)) {
    trigger_error("SOAP Fault: (faultcode: {$retval->faultcode}, faultstring: {$retval->faultstring})", E_USER_ERROR);
} 
```

和工作信封

```
 <?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:ns1="http://tempuri.org/" xmlns:ns2="http://www.w3.org/2005/08/addressing"> 
    <env:Header> 
        <ns2:Action env:mustUnderstand="true">http://tempuri.org/IService/GetData</ns2:Action>
    </env:Header>
    <env:Body>
        <ns1:GetData/>
    </env:Body>
</env:Envelope> 
```

和来自 WCF 服务的 web.config 文件

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
  <connectionStrings>
    <add name="Timeforce" connectionString="Data Source=apps.ziptrek.com;Initial Catalog=qqest;User ID=qqest; Password=qqest;"
      providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="TransportSecurity">
          <security mode="Transport">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <services>
      <service name="Service" behaviorConfiguration="Service1">
        <endpoint address="https://localhost/wcftest/Service.svc" binding="wsHttpBinding" bindingConfiguration="TransportSecurity" contract="IService"></endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Service1">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpsGetEnabled="true"/>

          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="httpsService1">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="false"/>

  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

# matlab - 级联信号滤波系统的线性度

> ID：15841877
> 
> 赞同：0
> 
> 时间：2013-04-05T19:20:51.567
> 
> 标签：matlab, filter, signal-processing

我有一个信号 s[n] 和一个带通滤波器，它可以滤除信号中非常低和非常高的频率分量。我想将信号存储到 Matlab 数组中并通过滤波器。

但是，我无法将 s[n] 存储在 Matlab 中，因为分配的内存不足以包含如此长的信号。我决定将信号分成 N 段，然后将每个段通过那个带通滤波器，最后在滤波后将它们组装起来。

我想知道这种方法是否存在任何线性问题。如果这无效，那么还有其他方法可以实现我想要的吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T00:14:02.127

如果您使用的是 FIR 滤波器，则可以使用[卷积](http://www.mathworks.com/help/matlab/ref/conv.html)：

```
x = rand(1000,1)
b = fir1(100, 0.5)
y1 = zeros(1100, 1)
% compute the response using the first 400 points of x
y1(1:500) = conv(x(1:400),b)
% compute the response using the last 600 points of x
y1(401:1100) = y1(401:1100) + conv(x(401:1000),b)
% compute the whole response just to compare
y2 = conv(x,b) 
```

注意 conv(a,b) 的长度是 length(a) + lenght(b) - 1

但是总响应将具有与您的方法相同的长度，您可能会遇到相同的内存问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T03:15:56.000

重叠相加和重叠保存是在进行 FFT 快速卷积时处理分段数据窗口的方法，但也应与具有（有限）FIR 滤波器内核的分段直接线性卷积一起使用。

在进行 IIR 滤波时，需要跨段边界保存和恢复内部滤波器状态。

如果您不执行上述操作，那么您通常会在块边界处出现短暂的点击。

# css - CSS 中的 attr() 及其实现

> ID：15841881
> 
> 赞同：0
> 
> 时间：2013-04-05T19:21:08.510
> 
> 标签：css

我正在尝试制作一种 css 样式，它从 html 标记中获取一个属性并在 css 属性中使用它。我有这个：

```
a[href="some_url_1"]
{
    content:attr(title url);
} 
```

然而这并没有奏效，经过一番搜索，我了解到支持这一点的 CSS 草案尚未在常见的浏览器中实现。（或者它以非常严格的形式实施）。我试图搜索更多，但我无法准确找到哪些浏览器已经实现了这一点。或者，如果有人可以帮助我将其改编为 CSS2.1。我只能访问网页的 css，因此我无法编辑 html。有一个标签：

```
<a href="some_url_1" title="some_url_2">link</a> 
```

我想将文本替换为仅使用 css 的带有 some_url_2 的图像。当前的 CSS 实现有可能吗？

# ios - 由于未捕获的异常“NSUnknownKeyException”，iOS 终止应用程序

> ID：15841885
> 
> 赞同：3
> 
> 时间：2013-04-05T19:21:24.563
> 
> 标签：ios, nsuserdefaults

我对目标 c 和 iOS 编程很陌生，我遇到了这个非常奇怪的错误。有问题的应用程序使用我使用 NSObject 制作的自定义类型的一组预设值初始化 NSMutableArray。这是由应用程序操纵的。如果在应用程序运行时添加了新值，它们会使用 NSUserDefaults 保存，并在下次打开应用程序时从 NSUserDefaults 连同默认值一起出现。

这是我得到的错误：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<__NSCFConstantString 0xb404> valueForUndefinedKey:]: this class is not key value coding-compliant for the key score.'
*** First throw call stack:
(0x1c9b012 0x10d8e7e 0x1d23fb1 0xb84d1d 0xaf100b 0xaf0fbd 0xb0f247 0xb3023c 0xb30056 0x3e40 0x3c5f 0x11f5ad 0x10ec705 0x202c0 0x20258 0x242ff4 0x10ec705 0x202c0 0x20258 0xe1021 0xe157f 0xe1056 0x246af9 0x10ec705 0x202c0 0x20258 0xe1021 0xe157f 0xe06e8 0x4fcef 0x4ff02 0x2dd4a 0x1f698 0x1bf6df9 0x1bf6ad0 0x1c10bf5 0x1c10962 0x1c41bb6 0x1c40f44 0x1c40e1b 0x1bf57e3 0x1bf5668 0x1cffc 0x290d 0x2835)
libc++abi.dylib: terminate called throwing an exception 
```

我不太确定错误是什么或如何调试它。

以前这段代码完美无缺，我所做的只是从预设的默认元素列表中删除一两个元素，然后在模拟器中模拟删除应用程序并重新编译代码。自从我的程序崩溃，上面的消息，我不知道如何修复它。

因此，如果有人可以就如何调试它给我一些帮助，那就太好了。我可以根据需要附加代码，我不确定要显示哪些代码相关，并且发布项目中涉及的所有代码可能太多了。

用于编码和解码名为 name.h 的自定义 Name NSObject 类的属性的代码：

```
-(void)encodeWithCoder:(NSCoder *)encoder
{
    [encoder encodeObject:self.name forKey:@"name"];
    [encoder encodeInteger:self.score forKey:@"score"];

}

-(id)initWithCoder:(NSCoder *)decoder
{
    if((self = [super init]))
    {
        self.name = [decoder decodeObjectForKey:@"name"];
        self.score = [decoder decodeIntegerForKey:@"score"];
    }

    return self;
} 
```

从类中检索数据，如果这很重要，此代码出现在 appdelegate.m 中：

```
NSData *data = [[NSUserDefaults standardUserDefaults] objectForKey:@"dataArray"];

NSInteger score = 0;

NSMutableArray *temp = [[NSMutableArray alloc] initWithObjects:@"name", nil];

NSMutableArray *tempList = [[NSMutableArray alloc] init];

for(NSString *y in temp)
{
    Name *name = [[Name alloc] init];
    name.name  = y;
    name.score = score;
    [tempList addObject:name];

}

if (data)
{

    NSArray *list = [NSKeyedUnarchiver unarchiveObjectWithData:data];
   NSMutableArray *names = [[NSMutableArray alloc]initWithArray:list];
  // [_nameList addObjectsFromArray:temp];
    NSMutableArray *t = [[names arrayByAddingObjectsFromArray:tempList ] mutableCopy];

    _nameList = [[NSMutableArray alloc]init];

    [_nameList addObjectsFromArray:t];

}
else 
{
    //First time load or data is not saved yet
    _nameList = [[NSMutableArray alloc] initWithObjects:@"name", nil];

} 
```

在关闭时保存数组：

```
- (void)applicationWillTerminate:(UIApplication *)application
{
// Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
NSData *data =[NSKeyedArchiver archivedDataWithRootObject:_nameList];

[[NSUserDefaults standardUserDefaults] setObject:data forKey:@"dataArray"];
} 
```

相同的代码在 applicationDidEnterBackground 中。

按“分数”排序的代码

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:    (UIViewController *)viewController
{

    if(viewController == _viewController3)
    {
        [self sortNames:_nameList];
        [[(ThirdViewController*)_viewController3 topList] reloadData];

    }
}

-(void)sortNames:(NSMutableArray*)test
{

NSArray* temp = [[NSArray alloc] initWithArray:test];

NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"score" ascending:NO];
NSArray *sortedLinks = [[temp sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]] mutableCopy];

_nameList = (NSMutableArray*) sortedLinks;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:17:23.073

这是我的两分钱。你有这一行：

```
[encoder encodeObject:self.name forKey:@"name"]; 
```

然后这一行：

```
Name *name = [[Name alloc] init]; 
```

这让我觉得“self.name”属性是这些“Name”自定义子类之一。

我相信，如果您创建了一个自定义子类并且想要它`encodewithcoder`，您必须将该`encodewithcoder`方法添加到您的自定义子类中，并`encodewithcoder`尽可能原始地拥有它的所有属性和实例变量。

这意味着，您的 Name 类需要有自己的 encodewithcoder 方法，该方法对其所有属性和实例变量进行编码，这些属性和实例变量已存储为工厂对象或 c 原语。

编辑：我还是很新，很重视我的代表。如果我错了，请发表评论，我会删除，但请不要让我被遗忘

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:56:57.690

这里：

```
_nameList = [[NSMutableArray alloc] initWithObjects:@"name", nil]; 
```

您正在向数组中添加`NSString`一个`_nameList`。稍后您保存该数组。下次加载该数组时，您将拥有`NSString` `@"name"`它。我想在某些时候你会遍历其中的项目并`_nameList`尝试获取或设置.`score``NSString``NSUnknownKeyException`

我认为你想要的是用这样的东西替换上面的行：（假设`name.h`你上面提到的文件中的类被称为`Name`）

```
Name *newName = [[Name alloc] init]; //or initialize the way you need to
_nameList = [[NSMutableArray alloc] initWithObjects:newName, nil]; 
```

# c# - 使用 jquery 选择下拉列表值

> ID：15841887
> 
> 赞同：0
> 
> 时间：2013-04-05T19:21:38.747
> 
> 标签：c#, javascript, jquery, asp.net, drop-down-menu

我正在尝试使用 jquery 设置下拉列表的值。我从该站点尝试了一些解决方案，但它们都不适用于我的解决方案。这就是我所拥有的：

```
$(document).on("click", ".open-EditContract", function () {               
            var id = $(this).data('id');
               $('#<%=ddlTsaIdEdit.ClientID%>').val(id);                
            $('#editContract').modal('show');
        }); 
```

同样在后端，我有填充 page_load 事件下拉列表的代码：

```
 Dictionary<string, string> dict = new Dictionary<string, string>();        
            dict.Clear();
            dict = util.TsaIdForContract(Convert.ToInt32(Request.QueryString[0]));       
            ddlTsaIdEdit.DataSource = dict;
            ddlTsaIdEdit.DataTextField = "Value";
            ddlTsaIdEdit.DataValueField = "Key";
            ddlTsaIdEdit.DataBind();
            ddlTsaIdEdit.Items.Insert(0, new ListItem("-- Select TSA ID --", "0")); 
```

我在 gridview 动作中触发了要显示的模式弹出窗口：

```
 <asp:TemplateField HeaderText="Edit">
                         <ItemTemplate>                                                          
                             <a style="text-decoration:none;" class="btn btn-info open-EditContract" data-id='<%#Eval("ID") %>' href="#"><i class="icon-edit icon-white"></i></a>                                          
                         </ItemTemplate>
                     </asp:TemplateField> 
```

使用该方法设置文本框的值效果很好，但不适用于下拉菜单，所以我希望有人给出他们的建议。我也可以在源代码中看到该值，并且当我在 JS 中执行 alert(id) 时，我可以在消息框中看到该值。欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:34:44.190

添加此功能：

```
function SetDropDownList(ddl, value) {
    var a = document.getElementById(dropdownlist);
    for (i = 0; i < a.length; i++) {
        if (a.options[i].value == value) {
            a.selectedIndex = i;
        }
    }
} 
```

并像这样设置下拉值：

```
var id = $(this).data('id');
SetDropDownList('<%=ddlTsaIdEdit.ClientID %>', id) 
```

这总是对我有用。还要确保`id`通过发出警报或签入`console.log`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:07:57.467

我有一个几天前实施的类似解决方案。可能有用。我使用了一个带有其值的 HTML 表，但您可以使用任何页面控件。

```
$("#GridViewProducts").find('tbody > tr').each(function() {
    if ($(this).find('#SequenceNumber').text() == SequenceNumber) {

        $('[id*="DropDownListProductDetailCountry"]').val($(this).find('#CountryId').text());

    }
}); 
```

希望这有帮助。

# c# - 为什么我的 Funq 容器不能正常工作？

> ID：15841890
> 
> 赞同：4
> 
> 时间：2013-04-05T19:21:49.973
> 
> 标签：c#, asp.net-mvc, servicestack

在访问尝试访问数据库的代码时，出现空引用异常。

这是在 global.asax 中，我已经通过调试器逐步执行此代码。

```
public class MvcApplication : System.Web.HttpApplication
{
    public class DmsAppHost : AppHostBase
    {
        public DmsAppHost() : base("API", typeof(AppUsersService).Assembly) { }

        public override void Configure(Funq.Container container)
        {
            var dbConnectionFactory = new OrmLiteConnectionFactory("Server=localhost;Port=5432;User Id=dms; Password=dms; Database=dms", PostgreSqlDialect.Provider);
            container.Register<IDbConnectionFactory>(dbConnectionFactory);
            container.RegisterAutoWiredAs<AppUserRepository, IAppUserRepository>();
        }
    }

    protected void Application_Start()
    {
        new DmsAppHost().Init();

        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BootstrapSupport.BootstrapBundleConfig.RegisterBundles(System.Web.Optimization.BundleTable.Bundles);
    }

} 
```

当我点击这段代码时（使用 (var db = DbConnectionFactory.OpenDbConnection())），我得到了 NullReferenceException。

你调用的对象是空的。

```
public class AppUserRepository : IAppUserRepository
{
    public IDbConnectionFactory DbConnectionFactory { get; set; }

    public AppUser GetAppUserByUsername(string username)
    {
        AppUser appUser;
        using (var db = DbConnectionFactory.OpenDbConnection())
        {
            appUser = db.QuerySingle<AppUser>(new { username });
        }
        return appUser;
    }
} 
```

我是假设我的 Connection 有问题，还是我没有做正确的事情来使 Funq 工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T08:31:11.917

您已经展示了一些将依赖项注入您的`AppUserRepository`类的 Funq 容器配置。但是你还没有展示这个类是如何以及在哪里使用的。由于您的问题被标记为`asp.net-mvc`我假设这发生在 ASP.NET MVC 控制器操作中。类似于以下内容：

```
public class HomeController: Controller
{
    private readonly IAppUserRepository repo;
    public HomeController(IAppUserRepository repo)
    {
        this.repo = repo;
    }

    public ActionResult Index(int id)
    {
        var model = this.repo.Get(id);
        return View(model);
    }
} 
```

如果你想在 ASP.NET MVC 中使用依赖注入框架，你将不得不编写一个自定义[`dependency resolver`](http://msdn.microsoft.com/en-us/library/system.web.mvc.idependencyresolver%28v=vs.98%29.aspx)注入到控制器中。

所以让我们继续为 Funq 写一个：

```
public class FunqDependencyResolver : IDependencyResolver
{
    private readonly ContainerResolveCache cache;
    public FunqDependencyResolver(Container container)
    {
        this.cache = new ContainerResolveCache(container);
        var controllerTypes =
            (from type in Assembly.GetCallingAssembly().GetTypes()
             where typeof(IController).IsAssignableFrom(type)
             select type).ToList();
        container.RegisterAutoWiredTypes(controllerTypes);
    }

    public object GetService(Type serviceType)
    {
        return this.cache.CreateInstance(serviceType, true);
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return Enumerable.Empty<object>();
    }
} 
```

然后我们可以注册它`Application_Start`：

```
protected void Application_Start()
{
    var container = new Container();
    var dbConnectionFactory = new OrmLiteConnectionFactory("Server=localhost;Port=5432;User Id=dms; Password=dms; Database=dms", PostgreSqlDialect.Provider);
    container.Register<IDbConnectionFactory>(dbConnectionFactory);
    container.RegisterAutoWiredAs<AppUserRepository, IAppUserRepository>();
    DependencyResolver.SetResolver(new FunqDependencyResolver(container));

    AreaRegistration.RegisterAllAreas();

    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BootstrapSupport.BootstrapBundleConfig.RegisterBundles(System.Web.Optimization.BundleTable.Bundles);
} 
```

另外，我建议您为您的`AppUserRepository`类使用构造函数注入，因为这`DbConnectionFactory`是该类正常工作的绝对必需的依赖项：

```
public class AppUserRepository : IAppUserRepository
{
    private readonly IDbConnectionFactory dbConnectionFactory;
    public class AppUserRepository(IDbConnectionFactory dbConnectionFactory)
    {
        this.dbConnectionFactory = dbConnectionFactory;
    }

    public AppUser GetAppUserByUsername(string username)
    {
        AppUser appUser;
        using (var db = this.dbConnectionFactory.OpenDbConnection())
        {
            appUser = db.QuerySingle<AppUser>(new { username });
        }
        return appUser;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:35:04.913

告诉容器如何`IAppUserRepository`使用以下配置进行解析。

`container.RegisterAutoWiredAs<AppUserRepository, IAppUserRepository>();`

`RegisterAutoWiredAs`将注入`IDbConnectionFactory`依赖

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:29:15.583

您没有展示您的 resolve 方式`IAppUserRepository`，但使用 Funq，您必须在注册抽象时在您的工厂委托实例中进行任何项目注入。

有关详细信息，请参阅[http://funq.codeplex.com/discussions/217686](http://funq.codeplex.com/discussions/217686)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T07:29:57.523

你的问题是它`DbConnectionFactory`不会成为一个对象，所以它仍然是空的

就像你会这样做

```
public TextBlock nullBlock; // it's your public IDbConnectionFactory DbConnectionFactory { get; set; }
nullBlock.Text;             //           DbConnectionFactory.OpenDbConnection() 
```

你需要设置一个对象

在你的情况下，像

```
var obj = new AppUserRepository();
obj.DbConnectionFactory = .... // 
```

如果您将其填写在一些隐藏代码中，则附加

你应该这样做并设置一个断点，也许你的过度处理的对象是空的

```
private IDbConnectionFactory _dbConnectionFactory
public IDbConnectionFactory DbConnectionFactory 
{
      get {return _dbConnectionFactory; }
      set {_dbConnectionFactory=value;}
} 
```

# java - Hibernate 的 createCriteria() 是否清理输入？

> ID：15841894
> 
> 赞同：7
> 
> 时间：2013-04-05T19:22:05.290
> 
> 标签：java, hibernate, sql-injection

今天遇到了一些使用 Hibernate 执行查询的代码。该查询使用从表单提交的值。这让我很好奇这种代码是否“清理”了它的输入。

```
public List<School> search(String query) {
    Session session = this.getCurrentSession();
    query = "%" + query + "%";
    Criteria criteria = session.createCriteria(getPersistentClass());
    criteria.createAlias("country", "a");
    Criterion nameCriterion = Restrictions.ilike("name", query);
    Criterion cityCriterion = Restrictions.ilike("city", query);
    Criterion countryCriterion = Restrictions.ilike("a.name", query);
    Criterion criterion = Restrictions.or(Restrictions.or(nameCriterion, cityCriterion), countryCriterion);
    criteria.add(criterion);
    return criteria.list();
} 
```

这安全吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T19:48:40.693

Hibernate Criteria Queries 在 Sql Injection 方面是安静安全的，因为它们在执行任何获取时将字符串作为参数传递。甚至，除非您通过字符串文字构建查询，否则 Hql 是安静安全的。

有关更多详细信息，您应该查看通过打开休眠 sql 日志记录在数据库级别触发的查询。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T20:09:48.460

如果你认为是 SQL 注入攻击，那么是的，Hibernate Criteria API 是安全的。

它将通过首先从指定的查询字段编译它并且仅在应用查询参数之后生成基础查询（它应该使用经典的`PreparedStatement`）。这样 JDBC 驱动程序将知道查询的哪一部分是字段，哪一部分是参数。然后驱动程序将注意清理参数。

`Criteria`如果您需要在那里放置参数，您应该注意应用于 的 SQL 限制。例如

```
String vulnerable = //parameter from user interface 

criteria.add(
    Restrictions.sqlRestriction("some sql like + vulnerable") //vulnerable

criteria.add(
    Restrictions.sqlRestriction("some sql like ?", 
              vulnerable, Hibernate.STRING)) //safe 
```

在这种情况下，`vulnerable`参数可能会“泄漏”到查询字段部分，并被 JDBC 驱动程序检查绕过，就像在正常的易受攻击的 SQL 查询中一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-16T17:16:01.383

Hibernate 对清理输入很有用，但清理输入并不是防止 SQL 注入攻击的最佳实践。随着您的代码随着时间的推移而开发，您需要记住随着数据库和客户端应用程序的更改而更改您的 Hibernate 环境；这为错误留下了很大的空间，任何一个错误都可能危及您的数据库。

为了防止 SQL 注入攻击，最好使用准备好的语句。在准备好的语句中，您的客户端应用程序将发出一个非 SQL 请求并让您的服务器生成您的 SQL 语句。

例如，如果用户想要城市“达拉斯”中的所有用户，那么您的客户端应用程序应该发出类似于*用户名等于“达拉斯”*的请求，然后您的服务器可以生成：

```
SELECT * FROM users WHERE name='Dallas' 
```

# windows - 是否有可以与 GUI 交互的自动“鼠标单击”库？

> ID：15841895
> 
> 赞同：2
> 
> 时间：2013-04-05T19:22:06.600
> 
> 标签：windows, user-interface, python-2.7, mouse

由于对被解雇的偏执，我通过提供一个类似的项目来伪装我的真实项目。

我有以下任务：我打开一个 GUI 程序。这个 GUI 有 3 个数字字段（年龄、身高、体重）和 3 个按钮（“确定”、“打印”和“清除所有”）。该程序的作用如下。用户在 3 个单独的字段中输入 3 个数字，单击“确定”，程序会吐出符合该描述的美国人数。

我的老板要求我确保程序正常运行。他说请执行以下操作“检查每个可能的组合，单击确定，然后单击打印。收集所有打印出来的数字，并确保它们加起来是 350,000,000（美国的全部人口）。这基本上就是我接下来几个月要做的事情：*单击“全部清除”*输入年龄：1（月）*输入身高：1（厘米）*输入体重：1（盎司）*单击“确定”*单击“打印”开始下一个循环： * 单击“全部清除” * 输入年龄：1 个月 * 输入身高：1 厘米 * 输入体重：2 盎司 * 单击“确定” * 单击“打印”</p>

我必须做每一种可能的组合。我的问题是：是否有某种 python 库，我可以使用它基本上说“通过单击此处选择此字段，输入数字 X，然后选择此字段，输入数字 Y，然后选择他的字段，输入数字 Z，然后单击在屏幕的该区域（该区域表示“确定”按钮），然后单击该区域（“打印”按钮上方的区域）。然后单击“全部清除”并输入 X、Y 和 Z+1。

理想情况下，当我离开电脑时，我想经历每一个可能的循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:23:22.400

[Sikuli](http://www.sikuli.org/)正是这样做的，并使用 Python 作为其脚本语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-12T15:10:24.497

我发现 pywinauto 正是我想要的。我可以点击并填写 GUI 中的字段。唯一困难的部分是向 pywinauto 描述按钮，因为它需要一些特殊的格式，但幸运的是，你是 SWAPY，它实际上为你提供了可复制粘贴的代码，它是按钮的描述。

所以 pywinauto 和 SWAPY 是为了胜利！

# paypal - PayPal Payments Pro 中的采集卡功能

> ID：15841904
> 
> 赞同：0
> 
> 时间：2013-04-05T19:22:33.120
> 
> 标签：paypal

据我了解，Capture Card 允许卖家通过购物车安全地接受带有信用卡名称、号码和代码的在线订单。我们随后可以发货，将运费添加到发票中，并将总金额提交到信用卡付款。付款后，信用卡信息将从订单中删除。

我被引导相信我可以使用 PayPal Payments Pro 帐户来做到这一点，所以我创建了一个并使用我自己的信用卡发送了一张测试发票。含税发票金额立即过帐到我的 PayPal 帐户，没有机会添加运费。

这个论坛上的任何人都可以提供解决方案或解决方法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:07:38.863

您最初是将其作为销售还是授权来处理。如果您想将 DoDirectPayment API 与 Website Payments Pro 一起使用，您可以处理 1.00 授权来验证卡。然后执行您需要执行的所有计算，然后使用 DoReferenceTransaction API 调用处理付款，您可以在其中发送您想要向买家卡收取的全部金额。您只需参考上次成功的 1.00 身份验证的交易 ID，PayPal 将使用相同的信用卡信息。否则，您还可以在结帐时使用全额金额处理 DoDirectPayment API 调用，并只需使用 DoReferenceTransactions API 调用来收取最初未收取的任何额外费用，例如税费和运费。

另一种选择是使用 Express Checkout，并将交易作为订单处理。这将允许您对订单进行一次以上的授权/捕获。您还可以在 Express Checkout API 调用中设置最大金额。

# mysql - MySql 错误的命令

> ID：15841907
> 
> 赞同：1
> 
> 时间：2013-04-05T19:22:52.107
> 
> 标签：mysql, sql

我在 sql 中有两个表：

```
client
id   first
1    david
2    jenna
3    ben

rating
id  clientid userid rating ratetext         date
1   1        3      4      Very good        12/4/2012
2   3        6      3      Simple bla bla   5/3/2013 
```

我想获得所有的评分，`userid` 所以我尝试了类似的方法：

```
SELECT rating,ratetext,date,first FROM rating r 
INNER JOIN client c ON r.userid = 3; 
```

但我总是得到我不需要的其他行的行。知道我的命令有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:24:30.060

大概您想选择具有明确指定 ID 的评级，以及相应的客户端，因为`clientid`存储在`rating`记录中：

```
SELECT rating,ratetext,date,first FROM rating r 
INNER JOIN client c ON c.id = r.clientid
WHERE r.userid = 3; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T19:25:06.117

```
SELECT rating, ratetext, date, first 
FROM   rating r INNER JOIN client c 
ON     r.clientid = c.id
WHERE  r.userid = 3; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T19:25:09.490

您的连接应该描述连接两个表的两条信息。你想要一些类似的东西：

```
SELECT * FROM rating r, client c WHERE r.clientid=c.id AND r.userid=3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T19:27:27.450

我相信这就是您正在寻找的：

```
SELECT r.rating, r.ratetext, r.date, c.first
FROM rating AS r
INNER JOIN client AS c
  ON r.clientid = c.id
WHERE r.userid = 3 
```

您应该加入两个表的客户端 id 列，然后在 where 子句中使用 userid 进行过滤。

确保您在 r.clientid 和 r.userid 上有索引。

# python - “int”对象不可调用错误python

> ID：15841910
> 
> 赞同：2
> 
> 时间：2013-04-05T19:23:07.140
> 
> 标签：python, int

嘿伙计们，所以我在运行此代码时收到此“TypeError：'int' object is not callable”错误，我做了一些研究，我认为这与我的变量命名有关？有人可以向我解释什么是错的吗？

```
class account(object):
    def set(self, bal):
        self.balance = bal
    def balance(self):
        return balance 
```

这是我的示例运行：

```
>>> a = account()
>>> a.set(50)
>>> a.balance()
Traceback (most recent call last):
  File "<pyshell#12>", line 1, in <module>
    a.balance()
TypeError: 'int' object is not callable 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T19:24:28.327

您正在`balance`使用实例属性掩盖您的方法`balance`。重命名一个或另一个。您可以通过在实例属性前面加上下划线来重命名实例属性，例如：

```
def set(self, bal):
    self._balance = bal

def balance(self):
    return self._balance 
```

实例上的属性胜过类上的属性（数据描述符除外；think `property`s）。从[类定义文档](http://docs.python.org/3/reference/compound_stmts.html#class-definitions)中：

> 类定义中定义的变量是类属性；它们由实例共享。实例属性可以在带有 的方法中设置`self.name = value`。类和实例属性都可以通过符号“<code>self.name”访问，并且以这种方式访问​​时，实例属性会隐藏同名的类属性。

# sql - sql删除重复数据

> ID：15841911
> 
> 赞同：0
> 
> 时间：2013-04-05T19:23:08.463
> 
> 标签：sql, sql-server-2008

我对需要过滤掉以生成报告的数据有疑问。

基本上每天我们都会获取一个文件并将其加载到系统中，但该文件是累积文件，基本上每天都会重新导入相同的信息和新数据。

这会将数据库加载到两个表中，即标题表和详细表。

在标题表中，我有 No_ 的键字段、导入日期以及数据用于（期间）的月份和年份，例如“Apr2013”​​。

详细表包含您可以想象的所有导入信息。

我要做的是忽略所有旧数据，只查看该月的最新导入。

希望有人可以帮助我，如果您希望我发布任何示例数据或任何内容，请告诉我，我会添加它。

提前致谢！

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:32:04.557

如果您无法更改流程以停止一遍又一遍地重新导入相同的数据 - 特别是如果数据*完全相同*- 您可以尝试以下查询：

```
WITH MostRecentData AS
(
    SELECT MAX(dateImported) dateImported, month, year
    FROM header
    GROUP BY month, year
)
SELECT ...
FROM detail d
INNER JOIN header h ON h.[key] = d.[key]
INNER JOIN MostRecentData r ON h.month = r.month AND h.year = r.year 
    AND h.dateImported = r.dateImporter 
```

这将提取每个月和年的最新行（基于导入的日期）。

老实说，如果可能的话，我会尝试更改导入过程。这听起来像是浪费了很多空间和后续处理来提取你想要的数据。

# android - 将数据从服务传递到活动

> ID：15841916
> 
> 赞同：0
> 
> 时间：2013-04-05T19:23:19.313
> 
> 标签：android, android-intent, service, android-activity

如果我将我的服务和活动放在同一个包中，我可以使用一些全局变量在它们之间交换数据吗？我想要优化性能，所以，全局变量的想法似乎不错，但有可能吗？如果没有，最好的选择是什么。如果意图是要走的路，那么性能是否足够好？顺便说一句，该服务有一个很大的 hashMap（可能是多个）。活动需要访问此地图吗？

谢谢，拉胡尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:32:42.183

我知道如果您在一个项目中有多项活动，则可以使用某些参数启动一项活动。

[http://getablogger.blogspot.com/2008/01/android-pass-data-to-activity.html](http://getablogger.blogspot.com/2008/01/android-pass-data-to-activity.html)

不过，这可能不是您要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:36:25.990

不要使用全局变量。由于活动生命周期，它们是易变的，因此您冒着被垃圾收集的风险。

您可以使用 ResultReceivers 完成您想要的。这是一个很好的教程：

[http://lalit3686.blogspot.com.br/2012/06/how-to-update-activity-from-service.html](http://lalit3686.blogspot.com.br/2012/06/how-to-update-activity-from-service.html)

# javascript - javascript 是否有类似于 Ruby 的 `ri` 的东西

> ID：15841918
> 
> 赞同：3
> 
> 时间：2013-04-05T19:23:21.610
> 
> 标签：javascript, ri

我最喜欢 Ruby 的一件事就是学习它是多么容易。如果我想发现新的东西，我可以打开 irb 和 ri，然后找到轻松做事的新方法。

我发现在 javascript 中做到这一点并不容易。

我喜欢能够将开发人员工具或 Firebug 用作 REPL，但我没有找到用于离线使用或连接速度较慢的快速参考资料。

所以... 有什么 javascript 的，就像 Ruby 的一样`ri`，所以我可以快速学习。我不必总是在加载 w3schools.com 页面时必须查找桌面参考或等待 5 秒钟，这样我就可以尝试操作 DOM...

* * *

下面有一条评论要求解释 irb 和 ri 是什么。irb 是一个交互式红宝石外壳。ri 是一个交互式 ruby​​ 参考，您可以从命令提示符调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-19T02:11:27.453

您正在寻找节点。

在终端提示符中键入 node ，它将执行 ruby​​ 的 irb 的 javascript 版本。

[~：>节点

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-24T15:27:35.220

过了一段时间，我真的不得不推荐 DocHub ( [https://github.com/rgarcia/dochub](https://github.com/rgarcia/dochub) )

这是一个节点应用程序，它提供从网络上抓取的文档并将它们保存在本地以加快速度或让您离线使用它们。

# ruby-on-rails - 应用 i18n 后 RSpec 测试中断

> ID：15841920
> 
> 赞同：1
> 
> 时间：2013-04-05T19:23:29.233
> 
> 标签：ruby-on-rails, rspec, internationalization

完成[RailsTutorial.org](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book?version=4.0)后，我决定 i18n 我的应用程序，突然我的测试开始失败，出现以下问题，

失败：

> 1) 用户页面索引失败/错误：登录用户 Capybara::ElementNotFound: Unable to find field "Email" # ./spec/support/utilities.rb:5:in `sign_in' # ./spec/requests/user_pages_spec.rb:11:in`block (3 levels)

我所做的唯一改变是，

路线.rb

```
SampleApp::Application.routes.draw do
  scope '(:locale)' do
    resources :users
    resources :sessions, only: [:new, :create, :destroy]
    root to: 'static_pages#home'
    match '/signup',    to: 'users#new',              via: 'get'
    match '/signin',    to: 'sessions#new',           via: 'get'
    match '/signout',   to: 'sessions#destroy',       via: 'delete'
    match '/help',      to: 'static_pages#help',      via: 'get'
    match '/about',     to: 'static_pages#about',     via: 'get'
    match '/contact',   to: 'static_pages#contact',   via: 'get'
  end 
```

和 config/initializers/i18n.rb

```
I18n.default_locale = :en

LANGUAGES = [
  ['English',               'en'],
  ['Portuguese',        'pt']
] 
```

在 i18n 之前，路线如下所示，

```
users_path  GET     /users(.:format)    users#index
    POST    /users(.:format)    users#create
new_user_path   GET     /users/new(.:format)    users#new
edit_user_path  GET     /users/:id/edit(.:format)   users#edit
user_path   GET     /users/:id(.:format)    users#show
    PATCH   /users/:id(.:format)    users#update
    PUT     /users/:id(.:format)    users#update
    DELETE  /users/:id(.:format)    users#destroy
sessions_path   POST    /sessions(.:format)     sessions#create
new_session_path    GET     /sessions/new(.:format)     sessions#new
session_path    DELETE  /sessions/:id(.:format)     sessions#destroy
root_path   GET     /   static_pages#home
signup_path     GET     /signup(.:format)   users#new
signin_path     GET     /signin(.:format)   sessions#new
signout_path    DELETE  /signout(.:format)  sessions#destroy
help_path   GET     /help(.:format)     static_pages#help
about_path  GET     /about(.:format)    static_pages#about
contact_path    GET     /contact(.:format)  static_pages#contact 
```

现在，

```
users_path  GET     (/:locale)/users(.:format)  users#index
    POST    (/:locale)/users(.:format)  users#create
new_user_path   GET     (/:locale)/users/new(.:format)  users#new
edit_user_path  GET     (/:locale)/users/:id/edit(.:format)     users#edit
user_path   GET     (/:locale)/users/:id(.:format)  users#show
    PATCH   (/:locale)/users/:id(.:format)  users#update
    PUT     (/:locale)/users/:id(.:format)  users#update
    DELETE  (/:locale)/users/:id(.:format)  users#destroy
sessions_path   POST    (/:locale)/sessions(.:format)   sessions#create
new_session_path    GET     (/:locale)/sessions/new(.:format)   sessions#new
session_path    DELETE  (/:locale)/sessions/:id(.:format)   sessions#destroy
root_path   GET     /(:locale)(.:format)    static_pages#home
signup_path     GET     (/:locale)/signup(.:format)     users#new
signin_path     GET     (/:locale)/signin(.:format)     sessions#new
signout_path    DELETE  (/:locale)/signout(.:format)    sessions#destroy
help_path   GET     (/:locale)/help(.:format)   static_pages#help
about_path  GET     (/:locale)/about(.:format)  static_pages#about
contact_path    GET     (/:locale)/contact(.:format)    static_pages#contact 
```

user_pages_spec.rb

```
require 'spec_helper'

describe "User pages" do

    subject { page }

    describe "index" do
        let(:user) { FactoryGirl.create(:user) }

        before (:each) do
            sign_in user
            visit users_path
        end

        it { should have_title('All users') }
        it { should have_content('All users') }

        describe "pagination" do
            before(:all) { 30.times { FactoryGirl.create(:user) } }
            after(:all) { User.delete_all }

            it { should have_selector('div.pagination') }

            it "should list each user" do
                User.paginate(page: 1).each do |user|
                    expect(page).to have_selector('li', text: user.name)
                end
            end
        end

        describe "delete links" do

            it { should_not have_link('delete') }

            describe "as an admin user" do
                let(:admin) { FactoryGirl.create(:admin) }
                before do
                  sign_in admin
                  visit users_path
                end

                it { should have_link('delete', href: user_path(User.first)) }
                it "should be able to delete another user" do
                    expect{ click_link('delete') }.to change(User, :count).by(-1)
                end
                it { should_not have_link('delete', href: user_path(admin)) }
            end
        end
    end

    describe "profile page" do
        let(:user) { FactoryGirl.create(:user) }
        before { visit user_path(user) }

        it { should have_content(user.name) }
        it { should have_title(user.name) }
    end

    describe "signup page" do
        before { visit signup_path }

        it { should have_content('Sign up') }
        it { should have_title(full_title('Sign up')) }
    end

    describe "signup" do

        before { visit signup_path }

        let(:submit) { "Create my account" }

        describe "with invalid information" do
            it "should not create a user" do
                expect { click_button submit }.not_to change(User, :count)              
            end

            describe "after submission" do
                before { click_button submit }

                it { should have_title('Sign up') }
                it { should have_content('error') }
            end
        end

        describe "with valid information" do
            before do
              fill_in "Name",           with: "Example User"
              fill_in "Email",          with: "user@example.com"
              fill_in "Password",       with: "password"
              fill_in "Confirm Password",   with: "password"
            end

            it "should create a user" do
                expect { click_button submit }.to change(User, :count).by(1)
            end

            describe "after saving the user" do
                before { click_button submit }
                let(:user) { User.find_by(email: 'user@example.com') }

                it { should have_link('Sign out') }
                it { should have_title(user.name) }
                it { should have_selector('div.alert.alert-success', text: 'Welcome') }
            end
        end
    end

    describe "edit" do
        let(:user) { FactoryGirl.create(:user) }
        before do
          sign_in user
          visit edit_user_path(user)
        end

        describe "page" do
            it { should have_content("Update your profile") }
            it { should have_title("Edit user") }
        end

        describe "with invalid information" do
            before { click_button "Save changes" }

            it { should have_content('error') }
        end

        describe "with valid information" do
            let(:new_name) { "New Name" }
            let(:new_email) { "new@example.com" }
            before do
              fill_in "Name",               with: new_name
              fill_in "Email",              with: new_email
              fill_in "Password",           with: user.password
              fill_in "Confirm Password",   with: user.password
              click_button "Save changes"
            end

            it { should have_title(new_name) }
            it { should have_selector('div.alert.alert-success') }
            it { should have_link('Sign out', href: signout_path) }
            specify { expect(user.reload.name).to eql(new_name) }
            specify { expect(user.reload.email).to eql(new_email) }
        end

        describe "forbidden attributes" do
            let(:params) do
                { user: { admin: true, password: user.password, password_confirmation: user.password } }
            end
            before { patch user_path(user), params }
            specify { expect(user.reload).not_to be_admin }
        end
    end
end 
```

实用程序.rb

```
include ApplicationHelper

def sign_in(user)
    visit signin_path
    fill_in "Email",        with: user.email
    fill_in "Password",     with: user.password
    click_button "Sign in"
    #Sign in when not using Capybara as well.
    cookies[:remember_token] = user.remember_token
end 
```

有人可以为初学者提供一些提示吗？感谢所有的支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:56:15.623

如果您要将所有路由的范围包括 a `locale`，则需要在`locale`测试它们时将 a 传递到您的路径中（正如您在新输出中看到的那样`rake routes`， a`:locale`是预期的），所以你应该把, 说, `visit users_path`, 你会放
`visit users_path(locale)`. 你会`locale`从你的列表中得到你的`I18n.available_locales`。您还需要将用于查找字段的字符串更改为它们的 i18n 等效项，例如
`fill_in "Email"`变为`fill_in I18n.t('sessions.new.email')`

我对我的示例应用程序进行了 i18n 化，所以[这是我的**user_pages_spec.rb**](https://github.com/paulfioravanti/sample_app/blob/master/spec/features/user_pages_spec.rb)，希望它能让您了解您可能需要进行哪些更改。

# html - 对齐 div 的对边

> ID：15841922
> 
> 赞同：1
> 
> 时间：2013-04-05T19:23:46.283
> 
> 标签：html, css

我希望绿色框始终位于红色标题的左下角，即使用户放大和缩小网页。

演示：http: [//jsfiddle.net/BvQcx/](http://jsfiddle.net/BvQcx/)

现在，我希望将一些 margin-left 属性赋予绿色框。或者红色框总是在中心。有人可以为我提供一个 jsfiddle 解决方案吗？解决方案必须是基于 div 的布局。

类似问题：[对齐 div 的相对边缘](https://stackoverflow.com/questions/15841922/aligning-opposite-edges-of-divs)

> ```
>  |Red Box|
>                |Green Box| 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:36:50.230

我使用 jQuery 解决了这个问题

[http://jsfiddle.net/XX28t/](http://jsfiddle.net/XX28t/)

```
var sectionSize = $('.leftSection').width();
$('.header').css('marginLeft', sectionSize); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:29:01.560

~~`Float:left`也为此设置`header`。我希望这能解决你的问题。~~

[~~小提琴~~](http://jsfiddle.net/XX28t/1/)

为您的标题设置位置，如 relative（用于支持 Left 属性。*注意：*这不仅是支持 left 和 top 的位置。）。然后将其左侧设置为20％。

[小提琴](http://jsfiddle.net/XX28t/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:31:13.403

像这样？

[http://jsfiddle.net/XX28t/2/](http://jsfiddle.net/XX28t/2/)

需要页眉留边距，页眉留白边距应该等于绿框的宽度

```
margin-left: 20% 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T19:31:59.217

试试这个

```
<table>
  <tr>
<td>&nbsp;</td>
<td><div style="border: 1px solid red">
    This is the header.
</div></td>
  </tr>
  <tr>
<td><div style="border: 1px solid green">
    This is the header.
</div></td>
<td>&nbsp;</td>
  </tr>
<table> 
```

工作示例[http://jsfiddle.net/mQBKx/](http://jsfiddle.net/mQBKx/)

# ruby-on-rails - Omniauth with Devise - 处理邀请场景

> ID：15841923
> 
> 赞同：0
> 
> 时间：2013-04-05T19:23:49.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth

我正在将 Omniauth 和 Devise 集成到我的第一个 ruby​​ on rails 应用程序中。目前在谷歌工作。

它有效，我喜欢这一切。我可以通过点击我的应用程序中的链接成功注册，在谷歌中进行身份验证，然后重定向回来......一切都符合预期。

我需要支持当前用户邀请新用户一起开展项目。为此，我允许当前用户创建新用户行，并指定新用户的电子邮件地址。该行作为存根添加，因此可以将工作分配给新用户。

我希望新用户在此之后的某个时候通过单击我的应用程序中的 google 链接、在 google 中进行身份验证，然后重定向回我的应用程序来注册。

发生这种情况时，我收到此错误：

```
1 error prohibited this user from being saved:
Email has already been taken 
```

我理解为什么，但我正在努力寻找我可以&应该使用的正确钩子来改变行为，以允许注册用户接管为他创建的存根用户行。

**编辑：** 相关宝石列表（我认为）：

```
 - devise (2.2.3)
 - oauth (0.4.7)
 - oauth2 (0.8.1)
 - omniauth (1.1.3)
 - omniauth-facebook (1.4.1, 1.4.0)
 - omniauth-google (1.0.2)
 - omniauth-google-oauth2 (0.1.13)
 - omniauth-oauth (1.0.1)
 - omniauth-oauth2 (1.1.1, 1.0.3) 
```

**编辑 - 设计模块**

```
 devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :omniauthable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:28:14.323

自答....

我从来没有找到修改行为的方法，所以放了一个hack。我创建了一个新表来保存邀请，当邀请未注册的人时插入该邀请。受邀者第一次来到网站时，我会自动接受邀请。

似乎应该有一个更优雅的解决方案......随时为后代分享！

# c - 如何将堆栈跟踪中的符号名称存储在 GDB 脚本变量中？

> ID：15841935
> 
> 赞同：1
> 
> 时间：2013-04-05T19:25:02.260
> 
> 标签：c, gdb

假设这是我的堆栈跟踪：

```
#0 f1 () at foo.c:n
#1 f2 () at foo.c:n
#2 f3 () at foo.c:n
#3 f4 () at foo.c:n 
```

我希望能够在 GDB 脚本中做这样的事情：

```
printf "function %s called function %s\n", $f1_name, $f2_name 
```

这可能吗？在某处有这种元数据的结构吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T17:33:08.443

最简单的方法是使用 Python API。

还有一种更可怕的方法：使用“设置日志记录”重定向到文件。然后，“bt”或您喜欢的其他任何内容。然后，撤消日志记录。使用“shell”命令将文件重写为设置便利变量的 gdb 脚本。最后，“源”脚本。

不过，我建议坚持使用 Python 方法。您可以在 Python 中编写一个方便的函数来轻松地公开这一点。

# android - 提取数据

> ID：15841941
> 
> 赞同：0
> 
> 时间：2013-04-05T19:25:18.010
> 
> 标签：android, jquery, html

我想从网站中提取数据这样的数据结构

```
<td  class="text-anouncments"><span class="nav-white"><marquee onmouseover=this.stop() onmouseout=this.start() behavior="scroll"  width="100%"  direction="left" scrollamount="3" scrolldelay="3"  ><strong>
                    <a href="index.php?name=News&file=article&topic=3&sid=1510" class="nav-white">Title</a></strong> , &nbsp;&nbsp;&nbsp;&nbsp;<strong>
                    <a href="index.php?name=News&file=article&topic=3&sid=1508" class="nav-white">Title </a></strong> , &nbsp;&nbsp;&nbsp;&nbsp;<strong>
                    <a href="index.php?name=News&file=article&topic=3&sid=1502" class="nav-white">Title</a></strong> , &nbsp;&nbsp;&nbsp;&nbsp;<strong>
                    <a href="index.php?name=News&file=article&topic=3&sid=1501" class="nav-white">Title</a></strong> , &nbsp;&nbsp;&nbsp;&nbsp;<strong>
                    <a href="index.php?name=News&file=article&topic=3&sid=1497" class="nav-white">Title</a></strong> , &nbsp;&nbsp;&nbsp;&nbsp;</marquee></span></td> 
```

我的问题是我可以得到`<a></a>`标签之间的链接标题将它们放在一个列表中以构建一个 android web 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:38:05.073

使用下面的示例代码，您可以获得`<a>`标签之间的文本，在您的示例中是`Title`

如果您想要每个链接的实际链接，那么它将存储在`link`变量中，在您的示例中是`index.php?name=News&file=article&topic=3&sid=1510`等。

```
$('.nav-white').each(function() {
  var txt = $(this).text(); //the text between the <a> tags
  var link = $(this).attr('href'); //the link that each one points to
  //print them to the console just to see that it actually works
  console.log(txt);
  console.log(link );
}); 
```

您可以创建`txt`和`link`变量数组，以便您可以根据需要在另一个函数中使用它们。

```
var texts = new Array();
var links = new Array();

$('.nav-white').each(function() {
  texts.push( $(this).text() ); //the text between the <a> tags
  links.push( $(this).attr('href') ); //the link that each one points to
}); 
```

您也输入了错误的`strong`属性。这是`<strong>`一些文本`</strong>`。在您发布的代码中，您将其反转。

# ruby-on-rails - NoMethod 错误 - 一对多关联

> ID：15841942
> 
> 赞同：0
> 
> 时间：2013-04-05T19:25:22.743
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller

尝试调试一些没有任何意义的东西几个小时

错误是：

```
undefined method `proposals' for nil:NilClass 
```

我在以下模型中有两个一对多关联：

```
entrepreneur.rb
...
 has_many :findentrepreneurs, :dependent => :destroy
... 
```

精细企业家.rb

```
 belongs_to :entrepreneur
    has_many :proposals 
```

提案.rb

```
belongs_to :findentrepreneur 
```

我使用以下方法进行了嵌套路由模型：

```
resources :entrepreneurs do
             resources :messages do
               collection do
                 post :delete_selected
               end
             end
             resources :findentrepreneurs do
            resources :proposals
          end
           end 
```

最后是我的proposals_controller.rb 新动作

```
def new
    @proposal = @findentrepreneurs.proposals.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @proposal }
    end
  end 
```

希望有人可以帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:26:27.800

您实际上没有在任何地方初始化`@findentrepreneurs`. Rails 并不神奇，您需要在使用之前为该变量实际分配一些东西。否则，它的值为`nil`，并且您会看到您看到的错误，这告诉您您已在`proposals`上调用该方法`nil`。

# jquery - jQuery blueimp 文件上传不会通过 ssl 删除

> ID：15841944
> 
> 赞同：3
> 
> 时间：2013-04-05T19:25:31.277
> 
> 标签：jquery, file-upload, ssl, blueimp

我正在使用此处找到的插件：[https ://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

我像这样初始化它：

```
$('#fileupload').fileupload({
    formData: {task: taskId},
    url: '/file'
}); 
```

似乎除了删除之外一切正常。当我尝试删除文件时，即使整个站点都使用 SSL，请求也会通过 HTTP 而不是 HTTPS。

**更新**：

看起来每当文件作为“现有”文件加载时（当插件初始化或文件成功上传时），该行的删除按钮都有一个名为`data-url`“http://”的属性像这样：

```
<button class="btn btn-danger delete" data-type="DELETE" data-url="http://mysite.com/file?file=test.pdf&amp;hash=cd8d4d2dd2a9028cfc533b70b05f70329c288500">
    <i class="icon-trash icon-white"></i>
    <span>Delete</span>
</button> 
```

有人知道这是从哪里加载的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:30:14.773

您需要在服务器端更改它，其中指定了您的删除 url。

# php - 如何在执行 MYSQL 查询之前检查条件？

> ID：15841946
> 
> 赞同：-3
> 
> 时间：2013-04-05T19:25:39.777
> 
> 标签：php, mysql, conditional-statements

我试图在执行 mysql 更新之前检查是否存在条件。下面的代码有效：

```
if (!mysql_query(
"UPDATE customers SET available_credit = available_credit where userid = '$userid';"
))

{
die('Sorry, a database error occurred');
} 
```

...但我试图向它添加另一个条件，如下所示：

```
if (!mysql_query && ($tradein_status == 'Accepted CREDIT')(
"UPDATE customers SET available_credit = available_credit where userid = '$userid';"
))

{
die('Sorry, a database error occurred');
} 
```

..这不起作用 - 它会生成此错误：“解析错误：语法错误，第 235 行 /home/bohemeth/public_html/tradeins/save_tradeins.php 中的意外 '('”

我想知道的第二件事是为什么这部分是：

```
if (!mysql_query(
"UPDATE customers SET available_credit = available_credit where userid = '$userid';"
)) 
```

...在条件之后没有用两个括号和花括号编写，看起来你可以在其他任何地方进行条件测试，如下所示：

```
if (!mysql_query){
"UPDATE customers SET available_credit = available_credit where userid = '$userid';"
} 
```

感谢您的任何帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:28:47.557

`mysql_query`是一个函数。它是这样使用的：`mysql_query('SQL QUERY');`

它的写法就像您的问题一样，旨在使其更具可读性：

```
if(!mysql_query(
'SQL QUERY'
)) 
```

也可以这样写：

```
if(!mysql_query('SQL QUERY')) 
```

`mysql_query`因此，要添加另一个子句，请在调用之前或之后添加它。

```
if($tradein_status == 'Accepted CREDIT' && mysql_query('SQL QUERY')) 
```

在`if`语句中`{}`可以省略。在这种情况下，如果情况属实，下一行就是运行的那一行。

所以，最终确定：

```
if($tradein_status == 'Accepted CREDIT' && mysql_query('SQL QUERY')){
    die('Sorry, a database error occurred');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:31:19.413

```
if ($tradein_status == 'Accepted CREDIT' && !mysql_query (
"UPDATE customers SET available_credit = available_credit where userid = '$userid';"
))

{
die('Sorry, a database error occurred');
} 
```

mysql_query 是一个函数，而不是一个变量。第二个括号中的字符串是参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:29:32.470

```
if ($tradein_status == 'Accepted CREDIT')
    mysql_query("UPDATE customers SET available_credit = available_credit where userid = '$userid';") or die("Sorry, a database error occurred"); 
```

您不能在函数名和参数之间编写其他代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T19:29:59.810

`mysql_query`是一个函数调用，它将您的查询`"UPDATE customers SET available_credit = available_credit where userid = '$userid';"`作为字符串参数传递。

这意味着它`mysql_query`必须是以下形式：

```
mysql_query("UPDATE customers SET available_credit = available_credit where userid = '$userid';") 
```

mysql_query 返回一个 RESOURCE.. 这是您查询的结果。

要添加第二个条件语句，请执行以下操作：

```
if (!mysql_query("UPDATE customers SET available_credit = available_credit where userid = '$userid';") && ($tradein_status == 'Accepted CREDIT')) 
```

# javascript - 跨不同域拖放图像，例如 Google 图片搜索

> ID：15841952
> 
> 赞同：1
> 
> 时间：2013-04-05T19:26:22.643
> 
> 标签：javascript, jquery, html

谷歌究竟是如何做到这一点的？也就是说，能够从另一个域（如 facebook.com）拖动图像并使用它进行搜索？

使用 jQuery 和`drop`事件我们无法真正做到这一点，因为如果我们获得了 url 然后发出了 XMLHttpRequest，我们就会遇到跨域限制异常。有没有办法解决这个问题？

# mysql - Mysql从管道导入

> ID：15841956
> 
> 赞同：3
> 
> 时间：2013-04-05T19:26:25.333
> 
> 标签：mysql, linux, mysqlimport

我试图弄清楚如何在没有任何运气的情况下将输出通过管道传输到 mysqlimport 中。我有一个巨大的文件（~250 GB），我想在处理它后通过管道传输到 mysqlimport。我不想创建中间文件/表。我在想象这样的事情：

猫基因组.mpileup | nawk 'sub("^...","")' | mysqlimport -uuser -ppassword 数据库

但显然这是行不通的。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T19:41:41.873

它看起来不像 mysqlimport 可以从 STDIN 读取，但您也许可以尝试使用[命名管道](http://linux.die.net/man/3/mkfifo)。像这样的东西（未经测试）

```
mkfifo bigfile
mysqlimport -uuser -ppassword Database bigfile &
cat genome | nawk > bigfile 
```

或者你可以使用bash[的扩展](https://en.wikipedia.org/wiki/Process_substitution)来运行命令而不是文件

```
mysqlimport -uuser -ppassword Database <(cat genome | nawk) 
```

# jquery - 将模板代码复制到页面中

> ID：15841959
> 
> 赞同：-1
> 
> 时间：2013-04-05T19:26:34.440
> 
> 标签：jquery

我想将一些html DIV 隐藏在我的页面底部，并带有display:none。我想定期复制这些 DIV 之一，进行一些自定义更改 (display:block, for one)，然后将其插入 DOM 中的某个位置。在操作结束时，模板 DIV 仍应保持在页面底部不变。

我想知道是否有人可以建议最好的 jQuery 来完成这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:40:02.293

我同意上面的 couzzi，这些应该是动态创建的。但是，这就是我解释您的问题的方式（简单概念）：http: [//jsfiddle.net/5xJBN/](http://jsfiddle.net/5xJBN/)

```
<div>You can see me!</div>

<div id="append"></div>

<input type="button" value="click me" id="btn"/>

<div id="hidden1" style="display: none;">You cant see this!</div> 
```

上面可以看到底部的d​​iv是隐藏的。我将选择它，取出内容，将其附加到具有 ID: 附加的 div，然后将颜色更改为红色（单击按钮）。

```
$("#btn").click(function() {
var hiddenDiv = $("#hidden1").html();
$("#append").html(hiddenDiv).css("color", "red");
}); 
```

隐藏的 div 保持不变，并且不可见。

# javascript - 创建 XSS 易受攻击的网页

> ID：15841964
> 
> 赞同：7
> 
> 时间：2013-04-05T19:26:48.643
> 
> 标签：javascript, html, security

我想创建一个 XSS 易受攻击的网页，该网页执行在输入框中输入的脚本。在这里，我编写了这段代码，但是每当我输入脚本时，什么都没有发生。

```
<html>

<head>
</head>

<body>
<script type="text/javascript">
function changeThis(){
    var formInput = document.getElementById('theInput').value;
    document.getElementById('newText').innerHTML = formInput;
    localStorage.setItem("name","Hello world!!!");
}
</script>

<p>You wrote: <span id='newText'></span> </p> 

<input type='text' id='theInput' value='Write here' />
<input type='button' onclick='changeThis()' value='See what you wrote'/>
</body>

</html> 
```

请帮忙。我应该如何修改代码？
更新：我试图做反射型 XSS。据我说，如果我在输入中输入脚本它应该执行。仅当我不检查用户是否输入了有效输入并采取措施不执行脚本时才会发生这种情况。
这是一个网页`www.insecurelabs.org/task/Rule1`，当我输入以下脚本时，该网页易受 XSS 攻击：`<script> alert("hell"); </script>`在输入字段中执行脚本。
我想知道这与我在做什么之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:35:10.390

如果您使用innerHTML 注入脚本标签...脚本将无法运行！

您可以做的是注入带有 onload 事件处理程序的图像：

```
<img src="someImage.gif" onload="alert('hacked!')" /> 
```

[更新]关于您的最后一个问题：主要区别在于您使用的是 innerHTML，而 insecurelabs 页面使用的是 jQuery.html()。jQuery 方法将运行脚本。

现场演示：http: [//jsfiddle.net/wqqWt/](http://jsfiddle.net/wqqWt/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-05T19:37:41.590

只是[`eval`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)代码：

```
function changeThis(){
    var formInput = document.getElementById('theInput').value;
    eval(formInput);
} 
```

# java - 如何在java中定义Avro联合

> ID：15841965
> 
> 赞同：5
> 
> 时间：2013-04-05T19:26:49.500
> 
> 标签：java, serialization, avro

我已经定义了一个 Avro 模式，该模式由一个记录组成，该记录包含两个（或多个）不同记录的联合，例如：

```
{
  "type":"record",
  "name":"MyCompositeRecord",
  "fields":
  [
    {"name":"SomeCommonData","type":"string"},
    {"name":"MoreCommonData","type":"float"},
    {"name":"CompositeRecord","type":
      [
        {
          "type":"record",
          "name":"FirstOption",
          "fields":
          [
            {"name":"x","type":"string"},
            {"name":"y","type":"long"}
          ]
        },
        {
          "type":"record",
          "name":"SecondOption",
          "fields":
          [
            {"name":"z","type":"int"},
            {"name":"w","type":"float"},
            {"name":"m","type":"double"},
            {"name":"l","type":"boolean"}
          ]
        }
      ]
    }
  ]
} 
```

看起来不是很清楚，但我希望你明白：我有一个由一些数据（“SomeCommonData”和“MoreCommonData”）组成的记录和两种不同类型记录（“FirstOption”和“SecondOption”）的联合. 在序列化/反序列化时，我应该能够创建两个子记录之一并序列化“MyCompositeRecord”。

我没有尝试为模式生成代码，因为我打算只使用通用记录。但是，我不确定是否以及如何序列化此类通用记录。我在网上找不到任何例子。我将使用 java 进行序列化/反序列化。我能够为模式创建一个写入器/读取器，如下所示：

```
Schema.Parser parser = new Schema.Parser();
Schema schema = parser.parse(COMPOSITE_SCHEMA);
DatumWriter<GenericRecord> writer = new GenericDatumWriter<>(schema);
DatumReader<GenericRecord> reader = new GenericDatumReader<>(schema);
GenericRecord datum = new GenericData.Record(schema); 
```

关于如何从这里开始实际建立记录的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:45:41.287

基本上对于一个联合来说，它与设置任何其他字段没有什么不同：

```
GenericRecord datum = new GenericData.Record(schema);

datum.set(1, data); 
```

其中 1 是联合字段编号，数据是设置的值。

如果您查看[AvroEditor - Helper](https://sourceforge.net/p/avroeditor/code/HEAD/tree/Source/AvroEditor/src/net/sf/RecordEditor/Avro/JRecord/Def/AvroHelper.java)中 的**getDefaultValue**，您将看到我为每个 Avro 类型使用的默认值。数组必须实现**GenericArray**。

# cakephp - CakePHP 1.3 - 使用 oracle 烘焙时出现问题

> ID：15841966
> 
> 赞同：1
> 
> 时间：2013-04-05T19:26:52.667
> 
> 标签：cakephp, cakephp-1.3

当我的数据库是 MySQL 时，命令“cake bake all”工作正常，但是当我尝试使用 Oracle 生成 mvc 代码时它失败了。

当 database.php 文件被修改为使用我的 oracle 数据库后，应用程序按预期工作，然后使用 MySQL 生成 mvc 代码。

所以我相信神谕不是问题。

当 oracle 是我的默认数据库时，如何让“cake bake all”工作？

数据库.php代码：

```
 var $default = array(
    'driver' => 'oracle',
    'persistent' => false,
    'login' => 'LOGIN',
    'password' => 'PASSWORD',
    'database' => 'IP:1521/DATABASE'
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T08:21:02.727

您必须确保您使用的 cakephp 数据库正确，并且还支持 php 和 wamp/mamp/lampserver 的版本，
然后开始配置。
CakePHP支持的[数据库 从这里](http://h3rald.com/articles/16/)
查找 CakePHP 支持的数据库列表

[从此处](http://phplens.com/adodb/supported.databases.html)查找驱动程序列表

并进行配置。像这里的东西[配置 PHP-sqlsrv Wamp Server](https://stackoverflow.com/questions/7624436/how-to-connect-cakephp-1-3-with-ms-sqlserver-2008/16414416#16414416)

# ruby-on-rails-3 - heroku pgbackups - 它是如何工作的？

> ID：15841967
> 
> 赞同：4
> 
> 时间：2013-04-05T19:26:53.797
> 
> 标签：ruby-on-rails-3, postgresql, heroku

我正在尝试使用 pgbackups 将数据库从现有应用程序迁移到新应用程序，但我遇到了问题。我已经阅读了 heroku 开发网站上的文档，但我仍然遇到错误。

我已经为两个数据库安装了插件，我可以成功地转到我的源数据库并复制/捕获它。

```
$ heroku pgbackups:capture -a costrecovery --expire

HEROKU_POSTGRESQL_ONYX_URL (DATABASE_URL)  ----backup--->  b007

←[0KCapturing... doneB -
←[0KStoring... done 
```

然后我切换到我想要将数据库复制到的应用程序的目录，并按照 heroku 列出的说明进行操作。问题是我不知道它是否不起作用，因为它们是一个错误，或者是因为我没有正确解释指令，这是完全可能的。首先，我将列出 heroku 开发站点的说明，然后列出我尝试过的命令。

HEROKUS 说明

```
$ heroku pgbackups:restore DATABASE -a target-app \
    `heroku pgbackups:url -a source-app` 
```

我尝试过的命令

```
$ heroku pgbackups:restore DATABASE_URL -a boiling-reef-2060 \
> heroku pgbackups:url -a costrecovery
!    Backup not found

$ heroku pgbackups:restore HEROKU_POSTGRESQL_GREEN_URL -a boiling-reef-2060 \
> 'heroku pgbackups:url -a costrecovery'
!    Backup not found

$ heroku pgbackups:restore DATABASE -a boiling-reef-2060 \
> 'heroku pgbackups:url -a costrecovery'
!    Backup not found

$ heroku pgbackups:restore DATABASE_URL -a costrecovery-copy2 \
> heroku pgbackups:"https://s3.amazonaws.com/hkpgbackups/app405411@heroku.com/b
007.dump?AWSAccessKe
> yId=AKIAJFDIRYCGYNFXR4FQ&Expires=1365184330&Signature=po0wZ982Jbx%2Fkv0bKk0iv
P%2
> FRWac%3D"
!    Resource not found 
```

有人可以用正确的语法帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T20:38:24.050

pgbackups 可以从同一个应用程序上的数据库或任何 pgbackups URL 中恢复，例如您在源应用程序/数据库中捕获的那个。说明使用反引号 (`) 从源应用程序中提取和获取 pgbackups URL。pgbackups:url 命令将提供这样一个 URL。尝试运行它，以了解发生了什么：

```
heroku pgbackups:url -a costrecovery 
```

（假设 costrecovery 是您捕获数据的位置）。

知道了这一点，您应该能够简单地运行：

```
heroku pgbackups:restore DATABASE_URL --app boiling-reef-2060 `heroku pgbackups:url --app costrecovery 
```

# python - 比较两个 csv 文件并将共享项目写入新的 csv 文件

> ID：15841969
> 
> 赞同：0
> 
> 时间：2013-04-05T19:27:16.287
> 
> 标签：python, csv

我有两个格式相同的 csv 文件（两列数据）：

```
 Name        Link
    Name        Link
    Name        Link
    Name        Link 
```

它们之间的唯一区别是这两列中的数据（不同的名称和不同的链接）。我想找到两个 csv 文件中出现的名称和链接，并将它们写入一个新的 csv 文件。到目前为止，我已经尝试过：

```
 import csv

    f1 = file('/path/to/f1.csv', 'r')
    f2 = file('/path/to/f2.csv', 'r')
    f3 = file('/path/to/f3.csv', 'w')

    c1 = csv.reader(f1)
    c2 = csv.reader(f2)
    c3 = csv.writer(f3)

    masterlist = [row for row in c2]

    for hosts_row in c1:
        row = 1
        found = False
        for master_row in masterlist:
            results_row = hosts_row
            if hosts_row[3] == master_row[1]:
                results_row.append('FOUND in master list (row ' + str(row) + ')')
                found = True
                break
            row = row + 1
        if not found:
            results_row.append('NOT FOUND in master list')
        c3.writerow(results_row)

    f1.close()
    f2.close()
    f3.close() 
```

这是基于对[类似问题](https://stackoverflow.com/questions/5268929/python-comparing-two-csv-files-and-searching-for-similar-items)的回答，但是我意识到在这种情况下 csv 文件的格式是不同的。所以我得到这个错误：

```
 masterlist = [row for row in c2]
    _csv.Error: new-line character seen in unquoted field - do you need to open the file in universal-newline mode? 
```

如何调整上述代码以适合我的 csv 文件的格式。还是有更好的方法来做到这一点？任何帮助将不胜感激，因为我刚刚开始使用 python，而且我认为我还没有完全掌握比较两个文件中的数据的概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:41:16.833

```
l1 = set(open('f1.csv'))
l2 = set(open('f2.csv'))
open('f3.csv', 'wb').writelines(l1 & l2) 
```

`l1`并且`l2`分别是 f1.csv 和 f2.csv 中的行集。`l1 & l2`评估为在两个文件中找到的行的[集合交集](http://en.wikipedia.org/wiki/Intersection_%28set_theory%29)，并将它们输出到 f3.csv。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:41:27.427

你的文件有多大？你能把它们都加载到内存中吗？上面的代码加载其中之一。而且因为您对整行感兴趣（我猜），所以您不必在行内比较内容。

您也不需要 csv 阅读器。

所以，试试

```
f1 = open('/path/to/f1.csv', 'r').readlines()
f2 = open('/path/to/f2.csv', 'r').readlines()
f3 = open('/path/to/f3', 'a')

for lines in f1:
    if lines in f2:
          f3.write(lines)

f1.close()
f2.close()
f3.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T20:06:21.883

根据文件的大小，使用字典来确定是否已在 master_row 中找到 host_rows[3] 可能是有意义的。您的算法复杂度将从 N1xN2 下降到 N1 因为字典访问是 O(1)

它会是这样的：

```
master_dct = {}
for master_row in master_list :
    master_dct[master_row[3]] = None
results_row = []
for hosts_row in c1 :
    if hosts_row[1] in master_dct :
        results_row.append(hosts_row) 
```

# ios - 如何防止 Nuance 的 DragonMobile 关闭 VoiceOver？

> ID：15841977
> 
> 赞同：1
> 
> 时间：2013-04-05T19:27:40.617
> 
> 标签：ios, accessibility, screen-readers, voiceover

`SKRecognizer`Nuance 的 DragonMobile 组件显然会在初始调用's`initWithType:detection:language:delegate`和组件调用之间关闭 VoiceOver 通知`recognizerDidFinishRecording:`。他们这样做是有道理的，因为他们不希望 VoiceOver 公告被麦克风拾取并转录。

问题是识别器的初始化和对`recognizerDidBeginRecording:`. 为了防止用户的前几个单词被抄录出来，有必要使用`recognizerDidBeginRecording:`向用户指示他们应该开始讲话（即您不能只是让他们按下麦克风按钮并立即开始讲话）。

我的问题是，由于 DragonMobile 会在被呼叫时立即关闭 VoiceOver `initWithType:`，我无法向 VoiceOver 用户指示他们应该在适当的时间开始通话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:40:02.680

找到了一种解决方法：DragonMobile 允许您指定`SKEarcon`s，它们是在录制开始、停止或取消时播放的音频文件。我将录制 VoiceOver 发出我需要的公告，然后将这些录音用作耳标，这样它听起来就像 VoiceOver 的其余部分。

根据我刚刚采访过的 Nuance 技术代表的说法，DragonMobile 确实接管了音频层并在录制过程中抑制了任何输出，而且除了耳塞之外，他们不会暴露任何其他方式。

# clickonce - clickonce app.publish\setup.exe 过去的修改日期错误

> ID：15841978
> 
> 赞同：0
> 
> 时间：2013-04-05T19:28:01.173
> 
> 标签：clickonce, publish, bootstrapper, setup.exe

尝试通过 clickonce 在 VS2010 Ultimate 上发布 WPF 应用程序时出现错误：错误 MSB3169：生成引导程序时发生错误：无法开始更新 bin\Debug\app.publish\setup.exe 的资源

我注意到我的 app.publish\setup.exe 过去的修改日期错误 创建日期是：5-05-2013、14:47:07 修改日期是：18-04-2010、04:21： 40 我觉得这很奇怪......

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:50:08.390

On vs2010 Go to tools->import and Export Settings then click on Reset all settings. This solve my problem

You can also use publish button from the top menu : Build->publish

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T00:19:07.963

尝试通过 Build 菜单发布，而不是使用屏幕上的 Publish 按钮。这可能是由竞争条件引起的。

我看到推荐的另一件事是在 Visual Studio 上进行修复；这可能是 setup.bin 文件损坏的问题。

# javascript - 在我将 hoverintent 更改为 mouseevent 后，Sprytabs 不再工作

> ID：15841982
> 
> 赞同：0
> 
> 时间：2013-04-05T19:28:15.737
> 
> 标签：javascript, jquery, html

我刚刚更改了一个下拉菜单以触发 mouseevent，但我有一些 sprytabs 坐落在 dropcontent 中，现在不再工作。我唯一改变的是

这个（我的标签工作正常）

```
$(function(){
        $('#navigation_horiz').delay(50).fadeIn(50);
        $('#navigation_horiz').naviDropDown({
        dropDownWidth: 'auto',  //the default width of drop down elements
        slideDownDuration: 500, //easing duration for slideDown
        slideUpDuration: 200 //easing duration for slideUp    
        });
}); 
```

对此（现在选项卡不再在放置内容中工作）

```
$(function(){
    $('#navigation_horiz ul li').bind('mouseenter',function(e){
        $('#navigation_horiz ul li').removeClass('active');
        $(this).addClass('active');
        if($(this).children('.dropdown').length>0){
            $('#navigation_horiz ul').next('.dropdown').attr('id',$(this).children('.dropdown').attr('id'));            
            $('#navigation_horiz ul').next('.dropdown').html($(this).children('.dropdown').html());
            $('#navigation_horiz ul').next('.dropdown').slideDown(500);
            $('#navigation_horiz ul').next('.dropdown').children().css('opacity',0);
            $('#navigation_horiz ul').next('.dropdown').children().animate({opacity:0},0).animate({opacity:1},1000,'linear');
        }
    });

    $('#navigation_horiz').bind('mouseleave',function(){
        $('#navigation_horiz ul li').removeClass('active');
        $('#navigation_horiz ul').next('.dropdown').delay(500).slideUp(500);
    });
}); 
```

有人看到解决此问题所需的问题吗？

# ios - 如何从 iPod Library 中的 MPMediaItems 中获取“购买日期”或“添加日期”

> ID：15841983
> 
> 赞同：4
> 
> 时间：2013-04-05T19:28:16.460
> 
> 标签：ios, itunes, mpmediaitem, mpmediaquery, mpmediaitemcollection

当用户从 iTunes Store 将新歌曲下载到他们的 iPod 音乐库中时，我想以编程方式在表格视图中列出这些歌曲。是否可以从 MPMediaItemCollection 中获取“添加日期”或“购买日期”？我看到有诸如播放计数和上次播放日期之类的属性键。我知道数据存在，因为它可以在 iTunes 中查看，但我没有找到它。关于在哪里找到它或如何得出它的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:05:26.733

正如您在 MPMediaItem 的 Apple 文档[http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaItem_ClassReference/Reference/Reference.html#//apple_ref/occ/cl/MPMediaItem](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaItem_ClassReference/Reference/Reference.html#//apple_ref/occ/cl/MPMediaItem)中看到的，您可以访问通过`enumerateValuesForProperties:usingBlock:`或的所有属性`valueForProperty:`，但没有添加日期或购买日期信息的属性。

这并不意味着数据没有存储在某个地方（肯定是）：这只是意味着您无法通过公共 API 访问该信息，可能是出于隐私问题。

无论如何我不知道是否有办法通过一些私有 API 调用来获取这些信息，但如果存在，你不能将它用于 AppStore 应用程序，因为它会导致你在审核过程中被拒绝。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-08T10:12:53.157

从 iOS 10 开始，我们似乎可以访问两个 dateAdded 属性。

**注意：**在撰写本文时，iOS 10 仍处于测试阶段 (4)，因此情况可能会发生变化。

作为日期对象：

```
MPMediaItem.dateAdded 
```

并作为字符串：

```
MPMediaItemPropertyDateAdded 
```

来源：[https ://developer.apple.com/library/prerelease/content/releasenotes/General/iOS10APIDiffs/Objective-C/MediaPlayer.html](https://developer.apple.com/library/prerelease/content/releasenotes/General/iOS10APIDiffs/Objective-C/MediaPlayer.html)

# javascript - 可以为视频流式传输下载媒体文件的链接吗

> ID：15841987
> 
> 赞同：1
> 
> 时间：2013-04-05T19:28:36.697
> 
> 标签：javascript, html, video-streaming, download

嘿，我有一些来自外部站点的 url，它们返回一些媒体文件作为下载。

响应是作为附件的媒体文件。

我正在尝试从我正在做的网站中的此链接流式传输以学习东西。

而且我在播放它时遇到了问题，因为它提供了指向普通 html js 播放器的链接。

我想标题是这个的原因。

文件响应带有标题

```
Connection:keep-alive
Content-Disposition:attachment
Content-Length:259639762
Content-Range:bytes 0-259639761/259639762
Content-Type:application/octet-stream
Date:Fri, 05 Apr 2013 18:05:43 GMT
Last-Modified:Mon, 05 Mar 2012 17:23:58 GMT
Server:nginx 
```

触发下载。

谁能告诉我是否可以使用 js 播放器在页面内流式传输此媒体，或者根本不可能。

这是出于学习目的，如果有人可以让我更深入地了解下载通常是如何发生的，那将会很有帮助，或者如果有人可以指出一些资源也会很有帮助..

谢谢

# java - 排序数组...似乎无法得到它

> ID：15841988
> 
> 赞同：-4
> 
> 时间：2013-04-05T19:28:39.137
> 
> 标签：java, arrays, sorting

我需要编写一个程序，让用户输入导师姓名列表。最多只能聘请 10 名同伴导师。然后，程序将根据按姓氏字母顺序排列的列表显示每个名称。这就是我到目前为止所拥有的。几个小时以来，我一直在研究如何对数组进行排序，但我似乎无法弄清楚。如果有人可以简单地向我解释我做错了什么，所以我不会再犯同样的错误，我将不胜感激。

以下是我得到的错误：

```
 errors: PeerTutorReport.java:11: error: method tutorNames in class PeerTutorReport cannot be applied to       given types;
    int[] numTutors = tutorNames();
                      ^
required: int
found: no arguments
reason: actual and formal argument lists differ in length
PeerTutorReport.java:46: error: cannot find symbol
    String[] listNames = new String[numTutor];
                                    ^
 symbol:   variable numTutor
 location: class PeerTutorReport
  PeerTutorReport.java:48: error: cannot find symbol
    for (x = 0; x <= listNames.length; x++) {
         ^
  symbol:   variable x
 location: class PeerTutorReport
  PeerTutorReport.java:48: error: cannot find symbol
    for (x = 0; x <= listNames.length; x++) {
                ^
 symbol:   variable x
 location: class PeerTutorReport
 PeerTutorReport.java:48: error: cannot find symbol
    for (x = 0; x <= listNames.length; x++) {
                                       ^
 symbol:   variable x
  location: class PeerTutorReport
 PeerTutorReport.java:49: error: cannot find symbol
    numTutors[x] = JOptionPane.showMessageDialog(" Tutor LAST NAME and FIRST NAME Listed in              Alphabetically Order"+(x+1)+ " " + "For example: 'Smith, John'");
              ^ 
```

这是我的代码。我的第一种方法没有问题，但我的第二种方法......我遇到了麻烦。

```
import javax.swing.JOptionPane;
import java.util.Arrays;

public class PeerTutorReport {
    public static void main(String[] args) {
        String[] listNames = getTutorNames();
        int[] numTutors = tutorNames();
    }

    public static String[] getTutorNames() {
        String firstName;
        String lastName;
        String[] listNames = new String[10];

        for (int x = 0; x < listNames.length; x++) {
            firstName = JOptionPane.showInputDialog(null, "Enter Tutor's First Name: ");
            lastName = JOptionPane.showInputDialog(null, "Enter Tutor's Last Name: ");
            listNames[x] = lastName + ", " + firstName;
        }
        return listNames;
    }

    public static String[] tutorNames(int numTutors) {
        String[] listNames = new String[numTutor];

        for (x = 0; x <= listNames.length; x++) {
            numTutors[x] = JOptionPane.showMessageDialog(
                    "Tutor LAST NAME and FIRST  NAME Listed in Alphabetically Order"
                            + (x + 1) + " " + "For example: 'Smith, John'");
            Arrays.sort(listNames);
        }
        return listNames;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:32:14.540

编辑：让我们也看看`main`方法：

```
public static void main(String[] args) {
    String[] listNames = getTutorNames();
    int[] numTutors = tutorNames();
} 
```

*   您没有*使用*您在`getTutorNames`. 如果您不打算将它们传递给其他任何东西，为什么要问它们？
*   该`tutorNames`方法有一个`int`参数，但你没有传递任何参数
*   该`tutorNames`方法被声明为返回 a `String[]`，但您试图将结果分配给一个`int[]`变量。

请注意，*这些*问题都与排序无关——它们比这更基本。我建议您停下来*仔细*查看您的所有代码。

* * *

编辑：好的，让我们看看另一种方法：

```
public static String[] tutorNames(int numTutors) {
    String[] listNames = new String[numTutor];

    for (x = 0; x <= listNames.length; x++) {
        numTutors[x] = JOptionPane.showMessageDialog("...");    
        Arrays.sort(listNames);
    }
    return listNames;
 } 
```

尽管`numTutors[x]`这`numTutors`是一个`int`. 那是行不通的。两者都不是`new String[numTutor]`，因为`numTutor`变量不存在。

您还在每次迭代中对数组（从不填充）进行排序......为什么？

* * *

编辑：我在问题得到纠正之前写了这个答案......

好吧，这是第*一个*问题：

```
for (int x = 0; x < listNames.length; x++) {
    firstName = JOptionPane.showInputDialog(null, "Enter Tutor's First Name: ");
    lastName = JOptionPane.showInputDialog(null, "Enter Tutor's Last Name: ");
} 
```

您要求 10 对名称......但每次都将它们存储在`firstName`and变量中。`lastName`你的`listNames`变量永远不会被触及。你可能想要这样的东西：

```
for (int x = 0; x < listNames.length; x++) {
    String firstName = JOptionPane.showInputDialog(null, "Enter Tutor's First Name: ");
    String lastName = JOptionPane.showInputDialog(null, "Enter Tutor's Last Name: ");
    listNames[x] = lastName + ", " + firstName;
} 
```

请注意我是如何在循环内部`firstName`和`lastName`内部移动变量声明的——无论如何，您都不会在循环外部使用它们，因此提前声明它们没有任何好处。一般来说，尽量限制局部变量的范围。

或者只要求每位导师提供一个姓名：

```
for (int x = 0; x < listNames.length; x++) {
    listNames[x] = JOptionPane.showInputDialog(null, "Enter Tutor's Name: ");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:59:26.230

I'm just throwing this out there, because I can't make sense of the `int[] numTutors = tutorNames()` line, but try the following

```
public static void main(String[] args) {

    String[] listNames = getTutorNames();
    Arrays.sort(listNames);
    for(int i=0; i<listNames.length; i++)
    {
        JOptionPane.showMessageDialog(listNames[i]);
    }
} 
```

assuming that `String[] listNames = getTutorNames();`, executed correctly, It should correctly sort your names. and then display them.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:34:42.130

好吧，一方面看起来你的utorNames 函数的返回类型是一个字符串数组，但是你试图在main() 中将它分配给一个int 数组变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T20:05:03.783

我不会为你做功课，但这将是一种更好的方式来形成你的程序，用伪代码：

```
public class Whatever {

    public static void main(String[] args) {
        int desiredListSize = 10;
        String[] listNames = getTutorNames(intDesiredListSize);

        // if you display the list of names right now,
        // they should be in the order the user entered them
        displayListOfNamesToUser(listNames);

        // now sort the array
        Arrays.sort(listNames);

        // now display it again, it should be sorted
        displayListOfNamesToUser(listNames);
    }

    public static String[] getTutorNames(int numberOfInputs) {
        String firstName, lastName;
        String[] names = new String[numberOfInputs];
        for (int x = 0; x < numberOfInputs; x++) {
            firstName = JOptionPane.showInputDialog(null, "Enter Tutor's First Name: ");
            lastName = JOptionPane.showInputDialog(null, "Enter Tutor's Last Name: ");
            listNames[x] = lastName + ", " + firstName;
        }
        return names;
    }

    public void displayListOfNamesToUser(String[] names) {
        for (int x = 0; x < names.length; x++) {
            //display names[x]
        }
    }
} 
```

# c++ - 在 Visual C++ 2010 中安装 Eigen 库

> ID：15841991
> 
> 赞同：8
> 
> 时间：2013-04-05T19:28:57.327
> 
> 标签：c++, eigen

如何在 Visual C++ 2010 中安装 Eigen 库？[我从eigen.tuxfamily](http://eigen.tuxfamily.org)下载了这个库

但我不知道如何将它安装在我的 Visual C++ 上。我想运行我下载的程序，它具有以下内容：

```
#include <Eigen/Core>
using namespace Eigen; 
```

我怎样才能做到这一点？我试图在网上看，但我似乎感到困惑。有人可以向我解释我该怎么做吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T19:37:54.210

Eigen 主要是仅标头库。您只需将特征路径添加到（MSVC2010）：

**项目属性**-> **C/C++** ->**常规**->**附加包含目录**

假设您在文件夹**C:/folder1/folder2/Eigen/中有标题****Core**，即：

 **```
C:/folder1/folder2/Eigen/Core 
```

因此，您应该将路径**C:/folder1/folder2**添加到**Additional Include Directories**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T19:38:24.937

从[特征文档](http://eigen.tuxfamily.org/dox/GettingStarted.html)：

> ### 如何“安装”本征？
> 
> 为了使用[Eigen](http://eigen.tuxfamily.org/dox/namespaceEigen.html)，您只需要下载并提取 Eigen 的源代码（请参阅[wiki](http://eigen.tuxfamily.org/index.php?title=Main_Page#Download)以获取下载说明）。事实上，`Eigen`子目录中的头文件是使用 Eigen 编译程序所需的唯一文件。所有平台的头文件都相同。不需要使用 CMake 或安装任何东西。
> 
> ...
> 
> ### 编译和运行你的第一个程序
> 
> 没有可链接的库。编译上述程序时唯一需要记住的是编译器必须能够找到 Eigen 头文件。您放置 Eigen 源代码的目录必须在包含路径中。

所以你实际上并没有安装任何东西。**

# java - Gradle -> 如何从 WEB-INF/lib 中省略一些 jars

> ID：15841994
> 
> 赞同：8
> 
> 时间：2013-04-05T19:29:02.030
> 
> 标签：java, jar, war, gradle, apache-tomee

我有一个带有战争规范的子项目，如下所示：

```
war {
    from('resources')  {
        include '*.properties'
        into 'WEB-INF/classes/'
    }    
    webXml = file('src/main/webapp/WEB-INF/web.xml')
} 
```

效果很好。创建可部署到 Tomcat 的单个胖战争文件。问题是，在部署到 TomEE 和 JBoss 时，我遇到了冲突（即与 Javax Servlet、Jersey 等）。所以我想排除一组罐子被战争。我查看了 Gradle 战争文档，看起来我需要为此使用排除项。我尝试了两种不同的方式，并且罐子没有被排除在战争之外：

```
war {

    // copy properties file in classes so that 
    // they may be loaded from classpath
    from('resources')  {
        include '*.properties'
        into 'WEB-INF/classes/'
    }

    // specify web xml
    webXml = file('src/main/webapp/WEB-INF/web.xml')

    // remove jars that conflict with TomEE
    exclude '**/javax.inject-1.jar'
    exclude '**/javax.servlet-2.5.0.v201103041518.jar'
    exclude '**/servlet-api-2.5.jar'
    exclude '**/validation-api-1.0.0.GA.jar'

} 
```

这是在 github 上托管的 NetFlix/karyon 项目的一个子项目（karyon-examples）中。子项目中的依赖项如下所示：

```
dependencies {
    compile 'org.slf4j:slf4j-api:1.7.0'
    runtime 'org.slf4j:slf4j-simple:1.7.0'
    compile project(':karyon-extensions')
    compile project(':karyon-admin-web')
} 
```

而且我想避免编辑诸如编译与运行时依赖项之类的东西，尤其是在其他文件和子项目中。事实上，我在上面试图排除的罐子在使用码头和常规 tomcat 运行时是良性的。

我只是想在不使构建脚本复杂化的情况下排除这些 jar。我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T20:33:26.477

the obvious way to go is to move the dependencies you don't want to have in your war from the `compile` configuration to `providedCompile` and from `runtime` to `providedRuntime`. the provided configurations are added to your build when the war plugin is applied.

One other note on your snippet above: I think the exclude does not work because you referencing the target path in your exclude statements instead you should just reference it by `/servlet-api-2.5.jar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-28T06:13:52.940

你可以这样

```
dependencies {
  compile fileTree(dir: 'WebContent/WEB-INF/lib', include: ['*.jar'])
  compile("org.apache.tomcat:tomcat-jni:8.0.37")
  providedRuntime("org.apache.tomcat:tomcat-jni:8.0.37") 
```

}

# c# - 错误循环通过 IntPtr 构建结构数组

> ID：15841996
> 
> 赞同：1
> 
> 时间：2013-04-05T19:29:16.557
> 
> 标签：c#, marshalling, intptr

我在从另一个中构建一个`struct`s数组时遇到问题。`IntPtr``struct`

此结构由我正在使用的[Windows API返回：](http://msdn.microsoft.com/en-us/library/windows/desktop/bb524809%28v=vs.85%29.aspx)

```
public struct DFS_INFO_9 {
    [MarshalAs(UnmanagedType.LPWStr)]
    public string EntryPath;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string Comment;
    public DFS_VOLUME_STATE State;
    public UInt32 Timeout;
    public Guid Guid;
    public UInt32 PropertyFlags;
    public UInt32 MetadataSize;
    public UInt32 SdLengthReserved;
    public IntPtr pSecurityDescriptor;
    public UInt32 NumberOfStorages;
    public IntPtr Storage;
}

[DllImport("netapi32", CharSet = CharSet.Auto, SetLastError = true)]
public static extern int NetDfsEnum([MarshalAs(UnmanagedType.LPWStr)]string DfsName, int Level, int PrefMaxLen, out IntPtr Buffer, [MarshalAs(UnmanagedType.I4)]out int EntriesRead, [MarshalAs(UnmanagedType.I4)]ref int ResumeHandle); 
```

我正在尝试获取`DFS_STORAGE_INFO_1`s 引用的数组`IntPtr Storage`。

这是那个结构（如果重要的话）：

```
public struct DFS_STORAGE_INFO_1 {
    public DFS_STORAGE_STATE State;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string ServerName;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string ShareName;
    public IntPtr TargetPriority;
} 
```

到目前为止，此代码一直在努力使`DFS_INFO_9`s 仅具有一个存储空间，但在尝试编组数组中的第二项时失败。

```
DFS_INFO_9 info = GetInfoFromWinApi();
List<DFS_STORAGE_INFO_1> Storages = new List<DFS_STORAGE_INFO_1>();
for (int i = 0; i < info.NumberOfStorages; i++) {
    IntPtr pStorage = new IntPtr(info.Storage.ToInt64() + i * Marshal.SizeOf(typeof(DFS_STORAGE_INFO_1)));
    DFS_STORAGE_INFO_1 storage = (DFS_STORAGE_INFO_1)Marshal.PtrToStructure(pStorage, typeof(DFS_STORAGE_INFO_1));
    Storages.Add(storage);
} 
```

我得到一个`FatalExecutionEngineError`吐出错误代码0x0000005（拒绝访问）的错误代码。我假设 的大小`DFS_STORAGE_INFO_1`被错误计算，导致元帅尝试访问为数组分配的内存之外的内存。但这发生在`i = 1`，可能有 7 个存储需要通过。也许我的想法有缺陷，但我不知道如何纠正这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:24:19.660

的实际定义`DFS_STORAGE_INFO_1`是这样的：

```
public struct DFS_STORAGE_INFO_1 {
    public DFS_STORAGE_STATE State;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string ServerName;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string ShareName;
    DFS_TARGET_PRIORITY TargetPriority;
} 
```

TargetPriority 是一个结构，[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/bb524797%28v=vs.85%29.aspx)定义：

```
public struct DFS_TARGET_PRIORITY {
    public DFS_TARGET_PRIORITY_CLASS TargetPriorityClass;
    public UInt16 TargetPriorityRank;
    public UInt16 Reserved;
}

public enum DFS_TARGET_PRIORITY_CLASS {
    DfsInvalidPriorityClass = -1,
    DfsSiteCostNormalPriorityClass = 0,
    DfsGlobalHighPriorityClass = 1,
    DfsSiteCostHighPriorityClass = 2,
    DfsSiteCostLowPriorityClass = 3,
    DfsGlobalLowPriorityClass = 4
} 
```

至于`FatalExecutionEngineError`，我认为结构的大小`DFS_STORAGE_INFO_1`计算错误，因为它的定义不正确。当试图将指针转换为它们引用的结构时，下一个索引是错误的，因为大小不正确。在转换内存块时，它可能引用了一个不应访问的块，从而引发“拒绝访问 (0x0000005)”错误。

# android - 保存 Parcelable 数据

> ID：15841997
> 
> 赞同：1
> 
> 时间：2013-04-05T19:29:23.810
> 
> 标签：android, file-io, marshalling, parcelable, parcel

我有一个实现 Parcelable 的类，但无法实现 Serializable，因为它包含一些我无法修改的基本 Android 类。

此类中的一些对象例如 Location 和 PendingIntent （它们都可以方便地 Parcelable）。

我的问题是在我的主要活动实例之间保存这些信息。

目前，我持有对此类的静态引用，效果很好。但我假设当我重新安装应用程序时，并且可能会出现更新时，我将无法相信这个静态成员不会被重新初始化。

我试图将此 Parcelable 写入文件，但使用 marshall() 并不总是有效（我收到 Binder 无法编组错误）。

我怎样才能安全地保存这些信息？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:37:00.327

在您的示例中使用 static 会导致内存泄漏，并且不是做任何事情的好方法。

我建议仅在 3 种情况下使用静态：

1.  static final String 或 int - 常量
2.  在内部类上（这样它们不包含对外部类的引用）
3.  在 util 或某些情况下（如 CustomFragment.newInstance）工厂方法

问题是你为什么要坚持 PendingIntent？它的用例是用于进程间通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T19:45:49.280

我使用 StateControl 类来处理对磁盘的读/写：

```
 public class StateControl {

    Context mContext;

    Thread worker;
    WriteObjectToFile writer;

    // StateControl Constructor 
    public StateControl(Context context) {
        mContext = context; 

        // Construct a writer to hold and save the data
        writer = new WriteObjectToFile();

        // Construct a worker thread to handle the writer
        worker = new Thread(writer);

    }// end of StateControl constructor

    // Method to save the global data
    public void saveObjectData(Object object, String key) {

        if (object == null){
            // I had a different action here
        } else {

            // Write the data to disc
            writer.setParams(new WriteParams(object, key));         
            worker.run();

        }

    }// end of saveGlobalData method

    // Method to read the Global Data
    public Object readObjectData(String key){

        Object returnData = (Object) readObjectFromFile(key);

        if (returnData == null){        
            // I had a different action here
        } else {    
            return returnData;
        }

    }// end of readGlobalData method

    // Method to erase the Global data
    public void clearObjectData(String key){

        writer.setParams(new WriteParams(null, key));       
        worker.run();

    }// end of clearGlobalData method   

    private class WriteObjectToFile implements Runnable {

        WriteParams params;

        public void setParams(WriteParams params) {
            this.params = params;
        }

        public void run() {         
            writeObjectToFile(params.getObject(), params.getFilename());                
        }

        private boolean writeObjectToFile(Object object, String filename) {

            boolean success = true;

                ObjectOutputStream objectOut = null;
                try {

                    FileOutputStream fileOut = mContext.openFileOutput(filename, Activity.MODE_PRIVATE);
                    objectOut = new ObjectOutputStream(fileOut);
                    objectOut.writeObject(object);
                    fileOut.getFD().sync();

                } catch (IOException e) {
                    success = false;
                    e.printStackTrace();
                } finally {
                    if (objectOut != null) {
                        try {
                            objectOut.close();
                        } catch (IOException e) {
                            // do nothing
                        }

                    }// end of if 
                }// End of try/catch/finally block

            return success;
        }

    }// end of writeObjectToFile method

    private Object readObjectFromFile(String filename) {

        ObjectInputStream objectIn = null;
        Object object = null;
        try {

            FileInputStream fileIn = mContext.getApplicationContext().openFileInput(filename);
            objectIn = new ObjectInputStream(fileIn);
            object = objectIn.readObject();

        } catch (FileNotFoundException e) {
            // Do nothing
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } finally {
            if (objectIn != null) {
                try {
                    objectIn.close();
                } catch (IOException e) {
                    // do nowt
                }
            }
        }

        return object;
    }

    private static class WriteParams {

        Object object;
        String filename;

        public WriteParams(Object object, String filename) {
            super();
            this.object = object;
            this.filename = filename;
        }

        public Object getObject() {
            return object;
        }

        public String getFilename() {
            return filename;
        }

    }

} 
```

然后调用公共方法来开始写/读。对于这个版本，我也在一个单独的线程中进行，但如果需要，您可以修改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:42:19.080

> **粘合剂**
> 
> 大多数开发人员不会直接实现这个类，而是使用*aidl*工具来描述所需的接口，让它生成适当的Binder 子类。

[来自官方文档](http://developer.android.com/reference/android/os/Binder.html)

您是否需要将`Binder`对象与对象的其余部分一起存储？也许您可以在没有实例的情况下保存对象，并在恢复对象后重新`Binder`创建对象`Binder``aidl`