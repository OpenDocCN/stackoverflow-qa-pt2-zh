# StackOverflow 问答 15066000-15066999

# android - 获取 android.app.RemoteServiceException：自定义通知中从包发布的错误通知

> ID：15066001
> 
> 赞同：1
> 
> 时间：2013-02-25T11:32:17.967
> 
> 标签：android, remoteview

我正在尝试使用远程视图创建自定义通知。

遵循的步骤：
1\. 创建一个布局并放置在 res/layout 文件夹中
2\. 扩展 RemoteViews 类并实现一些辅助方法。
3\. 实例化扩展类的对象，我通过在 Notification.Builder 中使用 setContent() 将其作为内容提供。
4\. 缓存实例化的扩展类。

现在大多数时候，即使在将扩展类对象提供给 Notification.Builder 之前，我也会执行操作，但它会崩溃。

```
E/AndroidRuntime(10194): android.app.RemoteServiceException: Bad notification posted from
package com.motorolasolutions.ptt.mpttclient: Couldn't expand RemoteViews for: 
StatusBarNotification 
```

我尝试了以下功能

```
setBoolean(R.id.textview1, "setEnabled", false); 
```

请让我知道如何调用远程视图上的功能。

我尝试了很多在Android源代码中有@android.view.RemotableViewMethod标签的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:03:09.777

尽管“setEnabled”函数在基类 (View.java) 中有 @RemotableViewMethod 标记。这在派生类中被覆盖，并且没有 @RemotableViewMethod 标记。如果它被覆盖，我们必须检查子类的标签。

# html5-canvas - 如何解决在 Android 浏览器中使用 Box2D JS 物理引擎移动对象时的性能延迟？

> ID：15066005
> 
> 赞同：0
> 
> 时间：2013-02-25T11:32:36.433
> 
> 标签：html5-canvas, box2d, game-engine, box2dweb

我正在计划使用 Box2D js 框架开发针对 Android 和 iPhone 平台的基于 HTML5-Canvas 的跨平台游戏。我的游戏包含一些很好的物理动作，因此我选择了 Box2D JS（[http://box2d-js.sourceforge.net/](http://box2d-js.sourceforge.net/)）。

所以，我最近在我的安卓手机/安卓平板电脑上运行了一些 Box2D HTML 示例（[http://box2d-javascript-fun.appspot.com/ ）。](http://box2d-javascript-fun.appspot.com/)在运行基本的物理动作时，我真的觉得这些页面的性能很低。

谁能建议如何解决它？

任何人都可以推荐其他可以提供良好性能的引擎，这些引擎必须具有像 Box2D 这样的应用物理动作吗？

PS：我的 Android 平板电脑有 1 GHz 的处理器和 512 MB 的 RAM。当我在页面上方运行时，几乎 240 MB 是免费的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:28:24.333

是的，canvas 在移动设备上的性能确实较差——所以 box2d 也会更慢。

在 box2dJS 中，您可以调整时间间隔和分辨率迭代以适应速度较慢的移动设备。调整时间间隔将导致游戏动画更快或更慢。调整分辨率迭代将导致游戏在物理上的准确性更高/更低。也许您可以“微调”box2d 并仍然使用它。

我建议调整而不是放弃 box2d。像愤怒的小鸟这样的游戏使用 box2d 物理引擎并且在移动设备上运行良好。如此高效的编程使box2d表现良好（而糟糕的编程会使box2d表现不佳）。

不过，您的问题更多：Matt Greer 上个月对物理引擎进行了一些测试，他的结果在这里：[http ://buildnewgames.com/game-engine-comparison/](http://buildnewgames.com/game-engine-comparison/)

最后，如果你不需要更高级的物理，比如恢复和摩擦，你可以“自己动手”！您可以从众多开源物理引擎之一中提取矩阵变换和碰撞代码，困难的部分已经为您完成。除了了解他们如何优化性能之外，您最终将获得一个小型且快速的物理引擎，该引擎可以根据您的确切需求进行调整。

# java - jpa spring-test 刷新错误

> ID：15066009
> 
> 赞同：1
> 
> 时间：2013-02-25T11:32:44.890
> 
> 标签：java, spring, jpa, junit, spring-test

我的数据库中有类似字段的表`Product`：

```
@Transient
private Map<Locale, String> description = new HashMap<>(); 
```

`description`在类中定义`ProductLocalization`。

在我添加`columnDefinition = "LONGTEXT"`到

```
@Column(name = Product.COLUMN_DESCRIPTION, columnDefinition = "LONGTEXT")
private String description; 
```

在该课程中，我可以根据需要设置超过 255 分的描述，但是我的 2 个测试在`productDao.saveAndFlush(product)`at之前开始失败`product.setDescription(descriptions)`，重要的是，当我在应用程序中执行该操作时，而不是在测试中一切正常，只测试导致问题

`saveAndFlush()`是我从包中得到的方法`org.springframework.data.jpa.repository`

两个测试中的错误相同：

```
javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: PRODUCT_LOCALIZED
Error Code: -5501
Call: INSERT INTO product_localized (description, entity_id, language) VALUES (?, ?, ?)
    bind => [angielski, 3, en]
Query: InsertObjectQuery(ProductLocalization{description=angielski})
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.flush(EntityManagerImpl.java:804) 
```

这是测试代码：

```
 @Test
public void testMultilingualCreate() {
    // Given
    String polish = "polski", english = "angielski";
    Product product = new Product();
    product.setName("Product name");
    Map<Locale, String> descriptions = new HashMap<>(); 
    descriptions.put(Locale.ENGLISH, english);
    descriptions.put(Messages.POLISH, polish);

    // When
    product.setDescription(descriptions);
    Product p = productDao.saveAndFlush(product);
    product = productDao.findOne(p.getId());

    // Then
    assertEquals(polish, product.getDescription(Messages.POLISH));
    assertEquals(english, product.getDescription(Locale.ENGLISH));
} 
```

和

```
@Test
public void testMultilingualUpdate() {
    // Given
    String polish = "polski", english = "angielski", english2 = "another english description";
    Product product = new Product();
    product.setName("Product name");
    Map<Locale, String> descriptions = new HashMap<>(); 
    descriptions.put(Locale.ENGLISH, english);
    descriptions.put(Messages.POLISH, polish);

    // When
    product.setDescription(descriptions);
    product = productDao.saveAndFlush(product);
    assertEquals(english, product.getDescription(Locale.ENGLISH));
    descriptions.put(Locale.ENGLISH, english2);
    product.setDescription(descriptions);
    product = productDao.saveAndFlush(product);

    // Then
    assertEquals(polish, product.getDescription(Messages.POLISH));
    assertEquals(english2, product.getDescription(Locale.ENGLISH));
} 
```

这里有什么问题我该如何解决？

# iphone - iOS Facebook SDK - FBLoginView

> ID：15066010
> 
> 赞同：1
> 
> 时间：2013-02-25T11:32:51.367
> 
> 标签：iphone, ios, objective-c, facebook, facebook-graph-api

出于某种原因，我无法让这段代码工作：

```
// Create Login View so that the app will be granted "status_update" permission.
FBLoginView *loginview = [[FBLoginView alloc] init];

loginview.frame = CGRectOffset(loginview.frame, 5, 5);
loginview.delegate = self;

[self.view addSubview:loginview];

[loginview sizeToFit]; 
```

我在我的 viewdidload 中调用它`ViewController`。

我有 ：

```
#import <Social/Social.h>
#import <FacebookSDK/FacebookSDK.h>
#import <Accounts/Accounts.h>
#import <AdSupport/AdSupport.h> 
```

和 ：

```
@interface FacebookVCViewController : UIViewController <FBLoginViewDelegate> { 
```

`loginView`根本没有出现。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:17:06.457

解决方案：

将 FacebookSDKResources.bundle 文件添加到项目中（确保将其复制并添加到目标）可以解决问题。

FacebookSDKResources.bundle 位于：

```
 FacebookSDK/FacebookSDK.framework/Resources/FacebookSDKResources.bundle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:41:33.940

在 viewDidApear 方法中调用此代码，希望它会起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T08:54:43.600

这对我有用..在界面生成器（尺寸检查器）中寻找自动调整大小选项..删除框中间的箭头..:)。无需使用捆绑包或框架进行调整

![在此处输入图像描述](../Images/292b66741db949a8edda801660069436.png)

# javascript - 服务器端排序 JQGrid 排序按钮不起作用

> ID：15066026
> 
> 赞同：0
> 
> 时间：2013-02-25T11:34:07.533
> 
> 标签：javascript, jquery, sorting, asp-classic, jqgrid

我已经在我的 jqgrid 中使用“json”数据声明了这一点：

```
sortname: 'CascadeId',
sortorder: 'asc',
sortable: true, 
```

但排序按钮不起作用。我已经用asp实现了服务器端排序。但按钮不起作用。你能指出如何启用按钮吗？

**更新：** 初始 GET 请求：

`http://localhost/myHandler.ashx?_search=false&nd=1361795033464&rows=20&page=1&sidx=CascadeId&sord=asc`

Col型号：

`colModel: [ { name: 'CascadeId', index: 'CascadeId', width: 85, sortable: true, editable: true, editrules: { custom: true, custom_func: validateCascadeID, required: true} }, { name: 'VenuProfile', index: 'VenuProfile', width: 150, sortable: false, editable: true, edittype: 'select', editoptions: { value: VenuProfile, width: 90, align: 'left'} }, { name: 'Location', index: 'Location', width: 210, sortable: false, editable: true }, ]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:57:24.563

如果您在 POST `sidx`&中看到排序信息，`sord`并且您正在服务器上接收这些值（再次`sidx`& `sord`），那么您需要`order by`在服务器获取数据时执行等效操作。

例如，在 C# 中`order by`，数据的分页请求如下所示：

```
var pagedQuery = dataset.OrderBy(sidx + " " + sord).Skip((page - 1) * rows).Take(rows); 
```

编辑我的一个工作网格的一部分，它以`DateTimeMail' column in`desc 顺序的排序开始。

客户端：

```
 $('#Mailbox').jqGrid({
            datatype: 'json',
            url: '/Mail/MailboxGetGridData',
            mtype: 'POST',
            autoencode: true,
            postData: { Mailbox: 'Inbox' },
            colNames: ['IdMail', 'From', 'To', 'Date / Time', 'Subject', 'Message', 'HasBeenRead'],
            colModel: [
                { name: 'IdMail', index: 'IdMail', width: 95, align: 'center', sortable: false, hidden: true, editable: false },
                { name: 'IdSender', index: 'IdSender', width: 150, align: 'center', sortable: true, firstsortorder: 'desc', hidden: false, editable: false },
                { name: 'IdRecipient', index: 'IdRecipient', width: 150, align: 'center', sortable: true, firstsortorder: 'desc', hidden: false, editable: false },
                { name: 'DateTimeMail', index: 'DateTimeMail', width: 150, align: 'center', sortable: true, firstsortorder: 'desc', hidden: false, editable: false },
                { name: 'Subject', index: 'Subject', width: 250, align: 'left', sortable: false, hidden: false, editable: false },
                { name: 'Message', index: 'Message', width: 150, align: 'center', sortable: false, hidden: true, editable: false },
                { name: 'HasBeenRead', index: 'HasBeenRead', width: 150, align: 'center', sortable: false, hidden: true, editable: false },
            ],
            pager: $('#MailboxPager'),
            rowNum: 5,
            rowList: [5, 10, 20, 50],
            sortname: 'DateTimeMail',
            sortorder: "desc",
.... 
```

服务器端：

```
 public ActionResult MailboxGetGridData(string sidx, string sord, int page, int rows, bool _search, string filters)
{
  .....
  var pagedQuery = filteredQuery.OrderBy(sidx + " " + sord).Skip((page - 1) * rows).Take(rows);
  var jsonData = new
            {
                total = (totalRecords + rows - 1) / rows,
                page = page,
                records = totalRecords,
                rows = (
                    from item in pagedQuery.ToList()
                    select new
                    {
                        cell = new string[] {
                            item.IdMail.ToString(),
                            HelperClasses.HelperMethods.getUserName(item.IdSender),
                            HelperClasses.HelperMethods.getUserName(item.IdRecipient),
                            ((DateTime)item.DateTimeMail).ToString("g"),
                            item.Subject,
                            item.Message,
                            (Mailbox == "Inbox") ? item.HasBeenRead.ToString() : "True"
                        }
                    }).ToArray()
            };

            return Json(jsonData, JsonRequestBehavior.AllowGet); 
```

# android - 在不破坏和重新创建活动的情况下更改横向布局

> ID：15066028
> 
> 赞同：3
> 
> 时间：2013-02-25T11:34:10.403
> 
> 标签：android, android-orientation

大家好，我是 android 新手，遇到了方向问题不破坏和重新创建活动的景观

请帮我摆脱这个问题

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:39:20.807

作为一名长期的 Android 程序员，我的建议是：

**不要这样做！**

让活动被销毁并使用正确的布局重新构建。

只需搜索和研究在方向更改期间保留数据的所有几种方法，并将它们应用于您的特定案例。下面几个来说明：

1.  `onCreate(Bundle)`接收包含在 onSavedInstances(Bundle) 期间保存的信息的包；
2.  使用没有 UI 的片段（不要调用 onCreateView）并将其设置为在旋转中保留`setRetainInstance(true)`并使用它来记住数据
3.  使用[Loader 模式](http://developer.android.com/guide/components/loaders.html)自动接收它在上一个活动中生成的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:22:04.857

代替

```
layout-large-land 
```

和

```
layout-land-large 
```

***防止活动重新创建/销毁***

将属性添加`android:configChanges="orientation"`到`AndroidManifest.xml`文件中的活动声明。

该`android:configChanges`属性的目的是防止在真正需要时重新创建活动。

请让我知道这对你有没有用..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T11:49:57.823

尝试这个，

将此代码添加到您的 mainfest.xml 中的每个活动。

```
android:ConfigChanges="keyboardHidden|orientation" 
```

# php - fetch() 不返回第一行

> ID：15066035
> 
> 赞同：0
> 
> 时间：2013-02-25T11:34:31.573
> 
> 标签：php, pdo, fetch

我正在尝试更新使用准备好的语句编写的代码。这是我第一次使用它们，我很难检索所有结果。当我使用直接 SQL 语句时，它可以工作，所以我认为这不是问题所在。

在至少有两个与查询匹配之前，代码不会返回任何结果，然后它将返回除第一行之外的所有结果。我尝试使用 fetchAll，但这给出了关于调用未定义方法的不同错误。

提前感谢您提供的任何帮助。如果问的不多，请提供示例或参考，我可以参考并完成我的理解。

```
function html_competitive_make_gallery ($init) {
global $USER;
    $user_id     = $USER->id;
    $page_name = 'competitive';
    $base_name = $init['base_name'];

    global $link;
     $sql_pre = "SELECT form_id, community_id FROM frm_root WHERE user_id = ? 
AND page_name = ? ORDER BY last_modified_date DESC LIMIT 1";
     $stmt = $link->prepare($sql_pre);
     $stmt->bind_param('is', $user_id, $page_name);
     $stmt->execute();
     $stmt->bind_result($form_id,$community_id);
     $stmt->fetch();
     $stmt->close();
$sql = "SELECT data FROM tester WHERE type= '".$base_name."' 
AND form_id= '".$form_id ."' AND community_id= '". $community_id ."' LIMIT 5";
$stmt = $link->prepare($sql);
$stmt->execute();
$stmt->bind_result($data);
$stmt->fetch();

$html[]='<div class="gallery" style ="width:100%;height:30%;overflow:hidden;">';

while ($stmt->fetch()){

                   echo $data;

                }
$stmt->close();

$html[]='</div>';

return implode ( $html);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:46:07.960

您`fetch()`在进入循环之前正在运行，因此删除了结果的第一行：

```
$stmt->execute();
$stmt->bind_result($data);
$stmt->fetch();                    // <<< THIS LINE SHOULD NOT BE HERE

$html[]='<div class="gallery" style ="width:100%;height:30%;overflow:hidden;">';

while ($stmt->fetch()){
       echo $data;
}
$stmt->close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:36:21.260

试试这个：

```
while ($data = $stmt->fetch()){

               echo $data;

            }
$stmt->close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:48:48.540

您的主要问题称为“ **mysqli** ”。
只要您将 mysqli 与准备好的语句一起使用，您就会面临这样的问题。

只需退出它并使用 PDO：

```
function html_competitive_make_gallery ($init) {
    global $USER;
    global $link;

    $sql_pre = "SELECT form_id, community_id FROM frm_root WHERE user_id = ? 
                AND page_name = ? ORDER BY last_modified_date DESC LIMIT 1";
    $stmt = $link->prepare($sql_pre);
    $stmt->execute(array($USER->id, 'competitive'));
    return $stmt->fetch();
} 
```

# android - Nexus 7 上的 dpi 错误

> ID：15066041
> 
> 赞同：0
> 
> 时间：2013-02-25T11:34:47.967
> 
> 标签：android, dpi, nexus-7

我在 Nexus 7 上的用户界面不正确。

我有带 mdpi 的 10" 平板电脑，我的 UI 还可以。但是在 7" nexus 7 上，所有图像和文本看起来都很大。

我处理了从 mdpi 到 tvdpi 的图像。现在，对我来说没问题。

但是，拥有 2 个具有相同图像的文件夹是否正确？如何解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:47:50.697

正确阅读此内容。对于不同的像素密度，您将需要不同的图像。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

> 但是，拥有 2 个具有相同图像的文件夹是否正确？

您可以这样做，但图像看起来不清晰，因为您将 MDPI 图像用于 XHDPI 设备。阅读指南后您应该了解。

# c# - 如何在asp.net C#代码后面的菜单控件中禁用特定菜单项

> ID：15066046
> 
> 赞同：5
> 
> 时间：2013-02-25T11:35:14.190
> 
> 标签：c#, asp.net, master-pages

在母版页中：

```
 <asp:Menu ID="Menu1" runat="server" Orientation="Horizontal" Width="60%" 
            BackColor="#336699" Font-Bold="True" 
            ForeColor="White">
            <StaticMenuStyle BackColor="#336699" />
            <StaticSelectedStyle BackColor="#336699" />
            <StaticMenuItemStyle BackColor="#336699" />
            <DynamicHoverStyle BackColor="#336699" />
            <DynamicMenuStyle BackColor="#336699" />
            <DynamicMenuItemStyle BackColor="#336699" />
            <StaticHoverStyle BackColor="#336699" />
        <Items>
            <asp:MenuItem Text="Dashboard" NavigateUrl="~/Timecard/Dashboard.aspx">
            </asp:MenuItem>
                            <asp:MenuItem Text="Timecard" NavigateUrl="~/Timecard/TimeCardEntry.aspx">
            </asp:MenuItem>
                            <asp:MenuItem Text="Reports">
                            <asp:MenuItem Text="Employee Time card Report" NavigateUrl="~/Reports/Employee_Timecard .aspx"></asp:MenuItem>
                            <asp:MenuItem Text="Employee Leave Detail Report" NavigateUrl="~/Reports/Employee Leave Details.aspx"></asp:MenuItem>
                            <asp:MenuItem Text="Project wise Report" NavigateUrl="~/Reports/ProjectWise.aspx"></asp:MenuItem>
            </asp:MenuItem>
                            <asp:MenuItem Text="Master">
                                <asp:MenuItem Text="Company" NavigateUrl="~/Admin/CompanyList.aspx"></asp:MenuItem>
                                <asp:MenuItem Text="Designation" NavigateUrl="~/Admin/DesignationList.aspx"></asp:MenuItem>
                                <asp:MenuItem Text="Task" NavigateUrl="~/Admin/TaskList.aspx"></asp:MenuItem>
                                <asp:MenuItem Text="Project" NavigateUrl="~/Admin/ProjectList.aspx"></asp:MenuItem>
                                <asp:MenuItem Text="Employee" NavigateUrl="~/Admin/EmployeeList.aspx"></asp:MenuItem>
                                <asp:MenuItem Text="Employee Transfer/Promotion" NavigateUrl="~/Admin/EmployeeTransferList.aspx"></asp:MenuItem>
                            <asp:MenuItem Text="Holiday" NavigateUrl="~/Admin/HolidayList.aspx"></asp:MenuItem>
            </asp:MenuItem>
        </Items>
        </asp:Menu> 
```

我想在代码隐藏中禁用报告和主菜单。我必须检查它是否是管理员。如果用户处于管理员状态意味着所有菜单项都应该显示，如果用户不是管理员意味着我必须为报告和主菜单设置 visible=false。请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T11:48:07.217

尝试像下面它会工作......

```
if(UserStatus != "Admin")
{
 Menu1.Items.Remove(Menu1.FindItem("Reports"));
 Menu1.Items.Remove(Menu1.FindItem("Master"));
} 
```

如果您的菜单在母版页中然后尝试如下...

```
var menu = Page.Master.FindControl("Menu1") as Menu;
if (menu != null)
{
menu.Items.Remove(menu.FindItem("Reports"));
menu.Items.Remove(menu.FindItem("Master"));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T11:47:24.540

我得到了解决方案：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (strAdmin == "False")
        {
            MenuItem mnuItem = Menu1.FindItem("Reports"); // Find particular item
            Menu1.Items.Remove(mnuItem);
            MenuItem mnuItem1 = Menu1.FindItem("Master"); // Find particular item
            Menu1.Items.Remove(mnuItem1);
            Menu1.Width = Unit.Percentage(30);
        }
    } 
```

# php - 代码点火器中的变量

> ID：15066052
> 
> 赞同：0
> 
> 时间：2013-02-25T11:35:33.350
> 
> 标签：php, codeigniter, controller

我只是 php 和 codeigniter 的初学者，我试图将数据从模型传递到控制器，然后在视图中，但我有未初始化的变量，我将如何初始化它们？这是我的代码：

survaycontroller.php

```
 <?php
class Survaycontroller extends CI_Controller{
   // 'QID, Question, qA, qB, qC'

    function index()
    {
            $this->load->view('survay_view');

            $this->load->model('survay');
            $survay_data = $this->survay->dosurvay($Question, $qA, $qB, $qC);

            $viewData = array();
            $viewData['survay_data'] = $survay_data;
            $this->load->view(survay_view, $viewData);   
        }
}
?> 
```

survay_view.php

```
</head>

<body>
    <?php form_open('index'); ?>
    <h1><?php echo $Question;?></h1>
    <?php echo $qA; ?><?php form_checkbox('qA'); ?>
    <?php echo $qB; ?><?php form_checkbox('qB');?>
    <?php echo $qC; ?><?php form_checkbox('qC'); ?>

</body> 
```

survay.php

```
 <?php
class Survay extends CI_Model{

    function dosurvay($Question, $qA, $qB, $qC){
        $this->db->select('QID, Question, qA, qB, qC');
        $this->db->from('tblquestions');
        $this->db->where('Question', $Question);
        $this->db->where('qA', $qA);
        $this->db->where('qB', $qB);
        $this->db->where('qC', $qC);
         $this -> db -> limit(1);

   $query = $this -> db -> get();

   if($query -> num_rows() == 1)
   {
     return $query->result();
   }
   else
   {
     return false;
   }
 }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:47:12.193

在您的控制器中：

```
function index()
    {
        //store your post form data into an array 
         $arrData = array();
         $arrData["qA"]     = $this->input->post("qAfieldName");
         $arrData["qB"]     = $this->input->post("qBfieldName");
         $arrData["qC"]     = $this->input->post("qCfieldName");
         $arrData["question"]     =  $this->input->post("questionfieldName");
         $this->load->model('survay');
         //pass data array into model          
         $survay_data = $this->survay->dosurvay($arrData);
    } 
```

在模型中：

```
 function dosurvay($arrData){        
        $this->db->select('QID, Question, qA, qB, qC');
        $this->db->from('tblquestions');
        $this->db->where('Question', arrData['Question']);
        $this->db->where('qA', $arrData['qA']);
        $this->db->where('qB', $arrData['qB']);
        $this->db->where('qC', $arrData['qC']);
        $this -> db -> limit(1);

............other stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:39:20.203

这是给您带来问题的行，因为您尚未初始化变量：

```
$survay_data = $this->survay->dosurvay($Question, $qA, $qB, $qC); 
```

变量`$Question, $qA, $qB, $qC`尚未传递给函数或在代码中的任何位置初始化。

您需要定义要发送给函数的变量：

```
$question = 'How are you?';
$qA = 'qA';
$qB = 'qB';
$qC = 'qC'; 
```

除此之外，您还将一个包含 1 个元素的数组传递给您的视图：`$viewData['survay_data']`。此变量包含您要查找的变量数组。相反，只需执行以下操作：

```
$viewData = $survay_data; 
```

您还需要将视图名称放在引号中：

```
$this->load->view('survay_view', $viewData); 
```

# c# - 使用新关键字

> ID：15066053
> 
> 赞同：2
> 
> 时间：2013-02-25T11:35:33.070
> 
> 标签：c#, new-operator

我对何时使用 New 感到有些困惑。这两个语句有什么区别：

```
List<myObject> myData = GetDataFromDatabase(id); 
```

和

```
List<myObject> myData = new List<myObject>();
myData = GetDataFromDatabase(id); 
```

对于第二次使用，Resharper 给了我这个警告：

> 局部变量 myData 只被赋值，但它的值从未被使用

的返回类型`GetDataFromDatabase(id)`是`List(Of myObject)`。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:37:32.623

**您**需要在创建对象的新实例时使用`new`。 如果您调用返回实例的方法，它会使用代替您。 **`new`**

 **例如：

```
List<myObject> myData = GetDataFromDatabase(id)

List<myObject> GetDataFromDatabase(int id)
{
    // Here "they" used the new keyword.
    return new List<myObject>();        
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T11:37:44.837

你`new`用来实例化一个对象。

调用`GetDataFromDatabase`返回一个对象，由该函数实例化一个新对象或返回一个现有对象。

Resharper 的警告是准确的。您的第二个代码块实例化一个新对象并将对该新对象的引用存储在`myData`：

```
List<myObject> myData = new List<myObject>(); 
```

然后，您的代码会立即丢失该引用，将其替换为函数调用返回的任何内容：

```
myData = GetDataFromDatabase(id); 
```

换句话说，第一行，即使用的那一行`new`是没有意义的，不应该出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:38:34.567

关键字为对象分配内存并返回对该`new`对象的引用，因此您可以使用它。如果你调用一个方法并且这个方法返回一个对象的引用，你就不需要为这个对象分配内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:39:12.123

如果您创建`New`对象的实例，则使用 new 关键字。在不知道该方法`GetDataFromDatabase`做什么的情况下，我假设它正在返回一个列表，这就是为什么您可以使用方法调用来实例化一个新列表的原因。

这样将创建的新列表将是该方法返回的列表的副本。

简而言之，new 关键字用于创建对象的新实例。有人称这是与其他类的有关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T11:39:13.410

如果函数返回您实际上不需要创建`GetDataFromDatabase`的新实例，然后`List<myObject>``new List<myObject>();``GetDataFromDatabase(id);`

使用`new`关键字时，您要求创建 的新实例`List<myObject>`，但是当您使用时，`myData = GetDataFromDatabase(id);`您正在创建一个新实例，GC 将收集前一个实例

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T11:39:39.867

重塑器只是告诉您，您将值放入列表中，但您不对列表中的值执行任何操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T11:38:26.917

在第二个示例中，您创建一个新对象。然后将 myData 的引用更改为另一个对象（由该方法创建），因此您创建的对象对其没有引用，它将在下一个垃圾回收周期中从内存中删除。所以简而言之，第二个例子没有意义。如果不使用它，为什么要创建一个新对象？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-25T14:04:07.693

我同意所有答案。我会尝试根据一些有趣的程序员观点给出一个最好的例子。

新运营商的一些观点

1.  当我们的程序“运行时间”条件时，一个新的操作员工作。编译器创建一个运行时环境的实例。
2.  如果我们调用任何类的方法，编译器将检查该类的实例。
3.  我们有许多创建任何类的实例。
4.  new 运算符不能重载。
5.  我们可以说一个 New 操作符在我们的程序执行的地方创建了一个块（空间）。
6.  创建程序的边界。
7.  两个程序通信相互帮助的对象。创建的对象，我很熟悉NEW操作符。

下面是一个与 new 运算符一起使用的简单程序。

```
class Program
{
    int x = 20;
    public void pro1()
    {
       Console.WriteLine( this.x);

        Console.WriteLine("pr1 call");

    }
}
static class porgram2
{
  static  int x = 10;
    public static void pro2()
    {
    Console.WriteLine(    porgram2.x); //Not need a object 
        Console.WriteLine("pro2 call");
                                     // This keyword is not allowed.  

    }

    static void Main(string[] args)
    {

        porgram2.pro2(); // no need a object created. 
        Program pr = new  Program();//Must be a created object. 
        pr.pro1();
        Program pr2 = new Program(); // i have many time of create a object.
        pr2.pro1(); 
```**

# html - 为什么IE7设置宽度为100%并换行 元素？

> ID：15066055
> 
> 赞同：0
> 
> 时间：2013-02-25T11:35:43.467
> 
> 标签：html, css, internet-explorer-7, html-lists, internet-explorer-6

这在 chrome 和 firefox 中运行良好，但 IE7 包装了每个 LI 项目。

我可以在 li 项目上设置一个宽度来解决问题，但是，每个项目的宽度都是可变的，我更喜欢“更清洁”的解决方案......

我错过了什么？

CSS：

```
.container {
  height: 200px;
}
.container ul {
  display: block;
}
.container ul li {
  float: left;
  display: block;
  text-align: center;
  margin: 6px 6px 0 0;
}
.container ul li a {
  font-family: Arial;
  display: block;
  padding: 25px 9px 0 9px;
  border: 2px solid transparent;
  -moz-border-radius: 5px;
  border-radius: 5px;   
}
.container ul li a:hover {
  border: 2px solid rgb(227, 227, 227);
  background-color: rgb(243, 243, 243);
  background-image: -webkit-gradient(linear,left top,left bottom,from(white),to(rgb(243, 243, 243)));
  background-image: -webkit-linear-gradient(top,white,rgb(243, 243, 243));
  background-image: -moz-linear-gradient(top,white,rgb(243, 243, 243));
  background-image: -ms-linear-gradient(top,white,rgb(243, 243, 243));
  background-image: -o-linear-gradient(top,white,rgb(243, 243, 243));
  background-image: linear-gradient(to bottom,white,rgb(243, 243, 243));
}
.container ul li a .name {
  display: block;
  width: 100%;
  color: rgb(0, 23, 58);
  font-size: 12px;
  text-transform: uppercase;
  margin: 22px 0 0 0;
}
.container ul li a .more {
  font-family: Arial;
  font-size: 12px;
  color: rgb(0, 23, 58);
  overflow: hidden;
  width: 36px;
  height: 36px;
  margin: 35px auto 17px auto;
} 
```

HTML：

```
<div class="container">
    <ul>
        <li>
            <a href="[url]">
                <span class="name">Peter</span>
                <span class="more">More</span>
            </a>
        </li>
        <li>
            <a href="[url]">
                <span class="name">Paul</span>
                <span class="more">More</span>
            </a>
        </li>
        <li>
            <a href="[url]">                            
                <span class="name">Mary</span>
                <span class="more">More</span>
            </a>
        </li>
        <div class="clear"></div>      
    </ul>
</div><!-- END: container --> 
```

[http://jsfiddle.net/SCRtb/](http://jsfiddle.net/SCRtb/)

# liferay - 如何将门户 URL 转换为其对应的友好 URL

> ID：15066058
> 
> 赞同：0
> 
> 时间：2013-02-25T11:35:48.250
> 
> 标签：liferay, liferay-6, friendly-url

我已经成功地为我的几个自定义 portlet 实现了友好 URL，它工作正常。

生成可点击链接时，它会正确显示友好网址。

现在我的要求是，我需要将此渲染 URL（例如`URL01`）作为参数（`param02`）发送到另一个 URL（`URL02`），`URL01`然后将其显示在另一个页面上。

生成方式`URL01`是这样的：

```
<portlet:renderURL var="URL01" windowState="<%=WindowState.MAXIMIZED.toString() %>">
    <portlet:param name="redirect" value="<%= currentURL %>" />
    <portlet:param name="myId" value="<%= String.valueOf(myObject.getMyId()) %>" />
    <portlet:param name="title" value="<%= myObject.getTitle() %>" />
    <portlet:param name="name" value="<%= myObject.getName() %>" />
</portlet:renderURL> 
```

是这样`URL02`生成的

```
<portlet:renderURL var="URL02" windowState="<%= LiferayWindowState.POP_UP.toString() %>">
    <portlet:param name="redirect" value="<%= currentURL %>" />
    <portlet:param name="URL01" value="<%=URL01 %>" />
    <portlet:param name="ownerId" value="<%= String.valueOf(ownerId) %>" />
    <portlet:param name="groupId" value="<%= String.valueOf(scopeGroupId) %>" />
</portlet:renderURL> 
```

这`URL02`将打开一个弹出窗口，并`URL01`在 JSP 中显示如下：

```
URL: <%= ParamUtil.getString(request, "URL01") %> 
```

但这显示`URL01`(unfriendly-URL) 为：

```
URL: http://localhost:8080/web/guest/mypage?p_p_id=my_WAR_myportlet&p_p_lifecycle=0&p_p_state=maximized&p_p_mode=view&_my_WAR_myportlet_myId=10989&_my_WAR_myportlet_title=This+is+miine&my_WAR_myportlet_name=What+name 
```

如果这是一个可点击的链接，它会完美地生成为（友好的 URL）：

```
<a href="http://localhost:8080/web/guest/mypage/-/mine/10989/This+is+miine/What+name/maximized"> Click me! </a> 
```

所以我需要一个可以将我的 unfriendly-url 转换为friendly-URL 的实用程序，就像`String`传递了一个 unfriendly-url 一样 - 它会将其转换为上面显示的friendly-url。

或者我必须创建自己的实现来实现这一目标？

**编辑：**

```
<route>
    <pattern>/{myId:\d+}/{title:.+}/{name:.+}/{p_p_state}</pattern>        
    <ignored-parameter name="redirect" /> 
    <implicit-parameter name="p_p_id">my_WAR_myportlet</implicit-parameter>
    <implicit-parameter name="p_p_lifecycle">0</implicit-parameter>
    <implicit-parameter name="p_p_mode">view</implicit-parameter>
</route> 
```

是的，`URL01`它写`URL02`在 JSP 的上方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:13:20.500

我认为您可以创建自己的，当您创建带有标记`<portlet-url-class>`的 portlet URL 时将使用它。`<portlet:renderURL>`

在`liferay-portlet.xml`中，您可以定义`<portlet-url-class>`条目。

如果您检查 的源代码`PortletResponseImpl.java`，该方法会`createLiferayPortletURL()`检查`PortletURLGenerationListener`该 portlet 的 。

我认为，您可以根据需要创建一个并修改 URL。

# bash - 使用 Bash 实用程序根据另一列数字向空格分隔的数据添加新的数字列

> ID：15066059
> 
> 赞同：0
> 
> 时间：2013-02-25T11:35:48.473
> 
> 标签：bash, text, add, whitespace, delimited

我想使用 Bash 实用程序（例如 cut 和 bc）对以空格分隔的数据列中的每个数字执行简单的计算。数据可能如下所示：

```
string 0.998663 string string string
string 0.998592 string string string
string 0.999096 string string string 
```

假设我想将第二列中的数字显示更改为三位有效数字。我想在第二列之后直接将这些新数字的另一列添加到此数据中。因此，结果可能如下所示：

```
string 0.998663 0.999 string string string
string 0.998592 0.999 string string string
string 0.999096 0.999 string string string 
```

我知道我可以手动循环遍历所有这些数据，然后构造新的数据列，但我想有一种更有效的方法可以做到这一点。你会碰巧知道一些聪明的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:49:51.453

试试这条短线：

```
awk '$2=$2" "sprintf("%.3f",$2)' file 
```

使用您的示例数据：

```
kent$  echo "string 0.998663 string string string
string 0.998592 string string string
string 0.999096 string string string"|awk '$2=$2" "sprintf("%.3f",$2)'
string 0.998663 0.999 string string string
string 0.998592 0.999 string string string
string 0.999096 0.999 string string string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:42:39.473

您可以尝试：

```
awk '{printf("%s %s %.3f %s %s %s\n",$1,$2,$2,$3,$4,$5)}' file 
```

**测试**

```
$ awk '{printf("%s %s %.3f %s %s %s\n",$1,$2,$2,$3,$4,$5)}' file
string 0.998663 0.999 string string string
string 0.998592 0.999 string string string
string 0.999096 0.999 string string string 
```

# java - 将scenebuilder UI fxml与javafx应用程序连接起来

> ID：15066062
> 
> 赞同：0
> 
> 时间：2013-02-25T11:35:55.080
> 
> 标签：java, javafx, fxml

我在 javafx 场景构建器中设计了一个 UI，它在 stackpane 中有一个简单的按钮。我将控制器类命名为 simplecclass。我已将 fxml 保存为 simple.fxml。我在 netbeans 中创建了一个控制器类，它只是在单击按钮时打印一些消息。

在 NewFXBuilder java 中，我加载了 simple.fxml。请在下面找到 NewFXBuilder.java 代码。

```
package javafxapplication2;
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.layout.StackPane;
import javafx.scene.layout.AnchorPane;
import javafx.stage.Stage;
import java.util.logging.Level;
import java.util.logging.Logger;
import javafx.fxml.FXMLLoader;

public class NewFXbuilder extends Application {

    @Override
    public void start(Stage primaryStage) {
        try {
            StackPane page = (StackPane) FXMLLoader.load(NewFXbuilder.class.getResource("simple.fxml"));
            Scene scene = new Scene(page);
            primaryStage.setScene(scene);
            primaryStage.setTitle("FXML is Simple");
            primaryStage.show();
        } catch (Exception ex) {
            Logger.getLogger(NewFXbuilder.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    public static void main(String[] args) {
        Application.launch(NewFXbuilder.class, (java.lang.String[])null);
  }
} 
```

我的 simple.fxml、simplecclass.java 和 NewFXbuilder.java 都驻留在同一个文件夹 javafxapplication2 中。

在运行 NewFXBuilder.java 时，但它给了我以下错误。

javafxapplication2.NewFXbuilder 开始严重：空 javafx.fxml.LoadException：java.lang.ClassNotFoundException：simplecclass

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:55:07.760

我犯的错误是忘记在场景构建器的控制器类名字段中添加java包名。它应该是 packagename.simplecclass 但我只给了 simplecclass，这是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:05:34.787

> javafxapplication2.NewFXbuilder 开始严重：空 javafx.fxml.LoadException：java.lang.ClassNotFoundException：simplecclass

看起来像 FXML 文件中的问题。确保在 FXML 文件中导入 simplecclass。

# android - 无法在android中录制声音？

> ID：15066063
> 
> 赞同：-3
> 
> 时间：2013-02-25T11:35:57.973
> 
> 标签：android

```
import java.io.IOException;

import android.media.MediaPlayer;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity implements OnClickListener{

Button mStart;
Button mStop;
Button mPlay;
Button mPlayStop;

 private static final String LOG_TAG = "AudioRecordTest";
  private static String mFileName = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mStart = (Button)findViewById(R.id.strt);
    mStart.setOnClickListener(this);

    mStop = (Button)findViewById(R.id.stp);
    mStop.setOnClickListener(this);

    mPlay = (Button)findViewById(R.id.ply);
    mPlay.setOnClickListener(this);

    mPlayStop = (Button)findViewById(R.id.plystp);
    mPlayStop.setOnClickListener(this);
     mFileName = getFilesDir().getAbsolutePath();
        mFileName += "/audiorecordtest1111";

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View v) {
    switch(v.getId())
    {
    case R.id.strt:start();

                    break;
    case R.id.stp: stop();
                    break;
    case R.id.ply: play();
                break;
    case R.id.plystp:playstop();
                break;

    }
}

public void start(){
    MediaRecorder recorder = new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
    recorder.setOutputFile(mFileName);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
    try {
        recorder.prepare();
    } catch (IOException e) {
        Log.e(LOG_TAG, "prepare() failed");
    }

    recorder.start();

}
public void stop()
{
    MediaRecorder recorder = new MediaRecorder();
    recorder.stop();
    recorder.release();
    recorder = null;

}
public void play()
{
    MediaPlayer mPlayer = new MediaPlayer();
    try {
        mPlayer.setDataSource(mFileName);
        mPlayer.prepare();
        mPlayer.start();
    } catch (IOException e) {
        Log.e(LOG_TAG, "prepare() failed");
    }

}
public void playstop()
{
    MediaPlayer mPlayer = new MediaPlayer();
    mPlayer.release();
    mPlayer = null;

}

} 
```

LOGCAT

```
02-25 11:32:18.383: E/MediaRecorder(12854): start failed: -2147483648
02-25 11:32:18.403: E/AndroidRuntime(12854): FATAL EXCEPTION: main
02-25 11:32:18.403: E/AndroidRuntime(12854): java.lang.RuntimeException: start failed.
02-25 11:32:18.403: E/AndroidRuntime(12854):    at android.media.MediaRecorder.start(Native Method)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at com.example.recorder.MainActivity.start(MainActivity.java:93)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at com.example.recorder.MainActivity.onClick(MainActivity.java:68)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at android.view.View.performClick(View.java:4202)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at android.view.View$PerformClick.run(View.java:17340)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at android.os.Handler.handleCallback(Handler.java:725)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at android.os.Looper.loop(Looper.java:137)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at android.app.ActivityThread.main(ActivityThread.java:5039)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at java.lang.reflect.Method.invokeNative(Native Method)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at java.lang.reflect.Method.invoke(Method.java:511)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-25 11:32:18.403: E/AndroidRuntime(12854):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:52:41.473

几个想法供您尝试：

1.  尝试将此添加到您的 AndroidManifest.xml：

    ```
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.STORAGE" /> 
    ```

2.  如果您在模拟器上运行代码，请不要这样做，因为它不应该工作[（此处的文档）](http://developer.android.com/reference/android/media/MediaRecorder.html#start%28%29)

如果您需要更多帮助，我还建议您改进您的问题并添加有关您的设置的更多信息。

* * *

**编辑：这是一个完整的工作解决方案**

您的代码中有几处被破坏：

1.  您在每个 start()/stop() 调用中都使用了 MediaRecoder 的新实例。你不能那样做，那些是有状态的对象。当您使用一个对象开始录制/播放时，您不能将其取消，再次实例化并调用 stop()。
2.  您正在将音频文件写入应用程序的缓存目录。事实证明，它坏了 - 修复是使用 SD 卡存储文件。它需要额外的许可：

    ```
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
    ```

这是代码。我删除了一些部分以使其更短一些 - 你必须填写这些地方：

```
 public class MainActivity extends Activity implements OnClickListener{

    /* TODO: Initialize buttons & other stuff here */ 

    private static String mFileName = null;

    /* NOTE: using one instance of player and recorder. */
    private MediaRecorder mRecorder;
    private MediaPlayer mPlayer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /* TODO: Buttons code here */

        /* NOTE: Writing to SD card, not app cache */
        mFileName = Environment.getExternalStorageDirectory().getAbsolutePath();
        mFileName += "/audiorecordtest1111";
    }

    @Override
    public void onClick(View v) {
        /* TODO: your old code here */
    }

    public void start() {
        /* NOTE: Use class variable, not local one. */
        mRecorder = new MediaRecorder();

        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
        mRecorder.setOutputFile(mFileName);
        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
        try {
            mRecorder.prepare();
        } catch (IOException e) {
            Log.e(LOG_TAG, "prepare() failed");
        }

        mRecorder.start();
    }

    public void stop()
    {
        /* NOTE: Use class variable, not local one. */
        mRecorder.stop();
        mRecorder.release();
        mRecorder = null;
    }

    public void play()
    {
        /* NOTE: Use class variable, not local one. */
        mPlayer = new MediaPlayer();

        try {
            mPlayer.setDataSource(mFileName);
            mPlayer.prepare();
            mPlayer.start();
        } catch (IOException e) {
            Log.e(LOG_TAG, "prepare() failed");
        }
    }

    public void playstop()
    {
        /* NOTE: Use class variable, not local one. */
        mPlayer.release();
        mPlayer = null;
    }
    } 
```

# vba - 在宏中选择一个字段并在循环中将其剪切出来

> ID：15066065
> 
> 赞同：0
> 
> 时间：2013-02-25T11:36:07.220
> 
> 标签：vba, excel

我需要在 Excel 工作表中选择一个单元格字段（表格），将所选内容剪掉，然后将其粘贴到新的单独工作表中。在这张工作表中，有上千张桌子彼此下方，我想自动将它们剪下来并将它们粘贴到单独的工作表中。这些表格由内部带有 # 符号的单元格分隔，但我不知道它是否有任何帮助。当我为第一个表录制这个宏时，它运行如下：

```
Sub Makro1()
Range("A2:AB20").Select
Selection.Cut
Sheets.Add After:=Sheets(Sheets.Count)
ActiveSheet.Paste
End Sub 
```

现在我想创建一个遍历整个工作表的循环，动态选择每个表，这些表将由列 A 中的 # 符号分隔并将其粘贴到新工作表中。我不想选择精确的范围 A2:AB20，但我想根据这个 # 符号进行选择。

这是一个屏幕截图 ![在此处输入图像描述](../Images/1160bd574386a4c0d3949b042e8bf215.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:14:22.080

这将使用所有哈希值的索引填充一个数组。这应该为您提供收集适当数据所需的参考点。

```
Sub FindHashmarksInColumnA()

    Dim c As Range
    Dim indices() As Long
    Dim i As Long
    Dim iMax As Double
    Dim ws As Worksheet

    Set ws = ActiveSheet

    i = 0
    iMax = Application.WorksheetFunction.CountIf(ws.Range("A:A"), "#")
    ReDim indices(1 To iMax)

    For Each c In ws.UsedRange.Columns(1).Cells
        If c.Value = "#" Then
            i = i + 1
            indices(i) = c.Row
        End If
    Next c

    ' For each index,
    ' Count rows in table,
    ' Copy data offset from reference of hashmark,
    ' Paste onto new sheet in appropriate location etc.

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:31:59.360

试试这个代码。您可能需要根据需要调整前 4 个常量：

```
Sub CopyToSheets()
    Const cStrSourceSheet As String = "tabulky"
    Const cStrStartAddress As String = "A2"
    Const cStrSheetNamePrefix As String = "Result"
    Const cStrDivider As String = "#"

    Dim rngSource As Range
    Dim lngMaxRow As Long, lngLastDividerRow As Long, lngRowCount As Long
    Dim wsTarget As Worksheet
    Dim lngCounter As Long

    Application.ScreenUpdating = False
    Application.Calculation = xlCalculationManual

    'Delete old worksheets
    Application.DisplayAlerts = False
    For Each wsTarget In Sheets
        If InStr(wsTarget.Name, cStrSheetNamePrefix) Then wsTarget.Delete
    Next
    Application.DisplayAlerts = True

    With Sheets(cStrSourceSheet)
        Set rngSource = .Range(cStrStartAddress)
        lngLastDividerRow = rngSource.Row
        lngMaxRow = .Cells(Rows.Count, 1).End(xlUp).Row
    End With

    Set rngSource = rngSource.Offset(1)
    While rngSource.Row < lngMaxRow
        If rngSource = cStrDivider Then
            lngCounter = lngCounter + 1
            Set wsTarget = Sheets.Add(After:=Sheets(Sheets.Count))
            wsTarget.Name = cStrSheetNamePrefix & " " & lngCounter
            lngRowCount = rngSource.Row - lngLastDividerRow - 1
            rngSource.Offset(-lngRowCount - 1).Resize(lngRowCount).EntireRow.Copy _
                wsTarget.Range("A1").Resize(lngRowCount).EntireRow

            lngLastDividerRow = rngSource.Row
        End If
        Set rngSource = rngSource.Offset(1)
    Wend

    Application.ScreenUpdating = True
    Application.Calculation = xlCalculationAutomatic

End Sub 
```

# php - 从另一个实体中移除实体

> ID：15066067
> 
> 赞同：1
> 
> 时间：2013-02-25T11:36:07.733
> 
> 标签：php, orm, doctrine-orm, doctrine, entitymanager

为了简单起见，假设我有两个具有一对多关系的对象：

> 用户 --(1:n)--> 请求

用户定义为

```
class User {
...
/** @OneToMany(targetEntity="Request", mappedBy="user", cascade={"all"}) */
   private $request;
...
} 
```

和请求定义为

```
class Request {
...
/** @ManyToOne(targetEntity="User", inversedBy="request", cascade={"persist"}) */
    private $user;
...
} 
```

是否可以创建一种方法来**从**用户实体中删除与用户关联的所有请求？

我需要的是这样的：

```
class User {
....
    public function removeAllMyRequests() {
        foreach ($this->getAllMyRequests() as $req)
            $this->em->remove($req);
    }
....
} 
```

但显然我不应该从实体内部调用实体管理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:34:58.860

[您可以使用"Orphan Removal"](http://docs.doctrine-project.org/en/latest/reference/working-with-associations.html#orphan-removal)标记关联：

```
/** 
 * @Entity 
 */
class User
{
    /** 
     * @OneToMany(
     *   targetEntity="Request",
     *   mappedBy="user", 
     *   cascade={"all"}, 
     *   orphanRemoval=true
     * ) 
     */
    private $requests;
} 
```

从集合中移除的任何`Request`对象`User#requests`都将被标记为在下一次`EntityManager#flush()`调用期间移除。

要一次删除所有项目，您可以简单地使用`Doctrine\Common\Collections\Collection#clear()`：

```
public function removeAllMyRequests() {
    $this->requests->clear();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:17:34.773

我认为您正在寻找“级联”选项：[http ://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations)

# python-2.7 - 属性套接字的 Massconnect 丢失

> ID：15066068
> 
> 赞同：2
> 
> 时间：2013-02-25T11:36:08.287
> 
> 标签：python-2.7, twisted, autobahn

我正在运行该`massconnect.py`模块以模拟打开许多并行 web-socket 连接，但是当我尝试打开 15000 个连接（在 massconnect json 中指定）一段时间后，我收到以下错误消息：

```
Unhandled Error
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\twisted\python\log.py", line 88, in callWithLogger
    return callWithContext({"system": lp}, func, *args, **kw)
  File "C:\Python27\lib\site-packages\twisted\python\log.py", line 73, in callWithContext
    return context.call({ILogContext: newCtx}, func, *args, **kw)
  File "C:\Python27\lib\site-packages\twisted\python\context.py", line 118, in callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File "C:\Python27\lib\site-packages\twisted\python\context.py", line 81, in callWithContext
    return func(*args,**kw)
--- <exception caught here> ---
  File "C:\Python27\lib\site-packages\twisted\internet\iocpreactor\reactor.py", line 120, in _callEventCallback
    evt.callback(rc, bytes, evt)
  File "C:\Python27\lib\site-packages\twisted\internet\iocpreactor\tcp.py", line 285, in cbConnect
    self.socket.setsockopt(
exceptions.AttributeError: 'Client' object has no attribute 'socket' 
```

web-socket 连接的打开被中断，我得到了这个异常。

我调整了我的`massconnect.py`模块以确认应用程序的 web-socket 身份验证。我正在测试，以便每次分配客户端时都会发送唯一的身份验证消息。

我已经`MaxUserPort`在注册表中设置为 65534。我认为这个问题可能会导致我的内存不足，但在用不同的机器检查后，我意识到这不是原因。

这可能是一个已知的 python/twisted 问题吗？

@字形：

这是 massconnect.py 源代码：

```
'''
Created on Jan 29, 2013

@author: boro.petrovic
'''
###############################################################################
##
##  Copyright 2011,2012 Tavendo GmbH
##
##  Licensed under the Apache License, Version 2.0 (the "License");
##  you may not use this file except in compliance with the License.
##  You may obtain a copy of the License at
##
##      http://www.apache.org/licenses/LICENSE-2.0
##
##  Unless required by applicable law or agreed to in writing, software
##  distributed under the License is distributed on an "AS IS" BASIS,
##  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
##  See the License for the specific language governing permissions and
##  limitations under the License.
##
###############################################################################

import sys
import time
from twisted.internet import reactor
from twisted.internet import error
from twisted.internet.defer import Deferred, returnValue, inlineCallbacks
from twisted.internet.interfaces import IReactorTime
from autobahn.websocket import connectWS
from autobahn.websocket import WebSocketClientFactory, WebSocketClientProtocol
import time

f='start'

class MassConnectProtocol(WebSocketClientProtocol):   

    def sendHello(self, message):
        #self.sendMessage("Hello from Python!")
        self.sendMessage(payload=message)
        #reactor.callLater(2, self.sendHello(message='test'))

    def onOpen(self):
        global f
        wstoken = f.readline().rstrip()
        message = 'messagecontent'+wstoken
        self.factory.test.onConnected()
        self.sendHello(message)
        self.wstoken = wstoken

    def onMessage(self, msg, binary):
        print "Got message from wstoken " + self.wstoken + " :" + msg

class MassConnectFactory(WebSocketClientFactory):

    def clientConnectionFailed(self, connector, reason):
        if self.test.onFailed():
            reactor.callLater(float(self.retrydelay)/1000., connector.connect)

    def clientConnectionLost(self, connector, reason):
        if self.test.onLost():
            reactor.callLater(float(self.retrydelay)/1000., connector.connect)

class MassConnect:

    def __init__(self, name, uri, connections, batchsize, batchdelay, retrydelay):
        self.name = name
        self.uri = uri
        self.batchsize = batchsize
        self.batchdelay = batchdelay
        self.retrydelay = retrydelay
        self.failed = 0
        self.lost = 0
        self.targetCnt = connections
        self.currentCnt = 0
        self.actual = 0

    def run(self):
        self.d = Deferred()
        self.started = time.clock()
        self.connectBunch()
        return self.d

    def onFailed(self):
        self.failed += 1
        return True

    def onLost(self):
        self.lost += 1
        return True

    def onConnected(self):
        #sprint "connect"
        self.actual += 1
        if self.actual % self.batchsize == 0:
            sys.stdout.write(".")
        if self.actual == self.targetCnt:
            self.ended = time.clock()
            duration = self.ended - self.started
            print " connected %d clients to %s at %s in %s seconds (retries %d = failed %d + lost %d)" % (self.currentCnt, self.name, self.uri, duration, self.failed + self.lost, self.failed, self.lost)
            try:
                reactor.run()
            except twisted.internet.error.ReactorAlreadyRunning:
                pass

            result = {'name': self.name,
                  'uri': self.uri,
                  'connections': self.targetCnt,
                  'retries': self.failed + self.lost,
                  'lost': self.lost,
                  'failed': self.failed,
                  'duration': duration}
            self.d.callback(result)

    def connectBunch(self):

        if self.currentCnt + self.batchsize < self.targetCnt:
            c = self.batchsize
            redo = True
        else:
            c = self.targetCnt - self.currentCnt
            redo = False
        for i in xrange(0, c):
            factory = MassConnectFactory(self.uri, origin=None, protocols=[("myprotocol")])
            factory.test = self
            factory.retrydelay = self.retrydelay
            factory.protocol = MassConnectProtocol
            factory.setProtocolOptions(version=13)
            factory.setSessionParameters(url="myurl", origin=None, protocols=["myprotocol"])
            connectWS(factory)
            self.currentCnt += 1
        if redo:
            reactor.callLater(float(self.batchdelay)/1000., self.connectBunch)

class MassConnectTest:

    def __init__(self, spec):
        global f
        f = open("C:/tokens.txt", "r")
        self.spec = spec

    @inlineCallbacks
    def run(self):
        global f
        res = []
        for s in self.spec['servers']:
            t = MassConnect(s['name'],
                            s['uri'],
                            self.spec['options']['connections'],
                            self.spec['options']['batchsize'],
                            self.spec['options']['batchdelay'],
                            self.spec['options']['retrydelay'])
            r = yield t.run()
            res.append(r)
        returnValue(res)
        f.close() 
```

在脚本中，我用虚拟字符串替换了机密数据。

从 token.txt 文件中，我正在读取我通过 web-socket 连接到被测应用程序的 15000 个用户中的每个用户的身份验证令牌。通过这种方式，我模拟了许多不同用户的连接，并且对于每个用户，我都有活动的独立 Web 套接字连接。

不幸的是，我没有达到建立所有 15000 个连接的地步，因为在运行脚本（建立连接）时，我收到了未处理的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-26T22:10:52.393

如果您减少`massconnect.py`到[SSCCE](http://sscce.org)会很有帮助。但是，如果问题仅在数千个并发连接的级别出现，您可能会用完文件描述符（抱歉，Twisted 的错误消息不是很好）。

有关在操作系统中更改此参数的一些信息，请参阅[此问题。](https://stackoverflow.com/questions/34588/how-do-i-change-the-number-of-open-files-limit-in-linux)

# android - 使用 Fragment 的 setRetainInstance(true) 真的是处理旋转变化的好习惯吗

> ID：15066075
> 
> 赞同：28
> 
> 时间：2013-02-25T11:36:28.583
> 
> 标签：android

我指的是[为什么使用 Fragment#setRetainInstance(boolean)？](https://stackoverflow.com/questions/11160412/why-use-fragmentsetretaininstanceboolean)

我这么问的原因是为了`Activity`处理轮换，[官方活动文档](http://developer.android.com/guide/topics/manifest/activity-element.html#config)鼓励我们在轮换期间让`Activity`关机和重启。

> android:configChanges 列出活动将自行处理的配置更改。当运行时发生配置更改时，默认情况下会关闭并重新启动 Activity，但使用此属性声明配置会阻止 Activity 重新启动。相反，活动保持运行并调用其 onConfigurationChanged() 方法。注意：应避免使用此属性，并且仅将其用作最后的手段。有关如何正确处理由于配置更改而重新启动的更多信息，请阅读处理运行时更改。

任何更改此 Activity 默认行为的尝试似乎都是不好的做法。为了避免Activity在重启过程中重新加载耗时的数据结构，我们使用了`onRetainNonConfigurationInstance`and `getLastNonConfigurationInstance`。-[官方处理运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)

但是，当谈到在 Fragment 中处理轮换时，Google 是否给了我们不同的建议？他们不希望我们关闭并重新启动 Fragment 吗？

[公共对象 onRetainNonConfigurationInstance ()](http://developer.android.com/reference/android/app/Activity.html#onRetainNonConfigurationInstance%28%29)

> 此方法在 API 级别 13 中已弃用。请改用新的 Fragment API setRetainInstance(boolean)；这也可以通过 Android 兼容包在旧平台上使用。

1.  为什么 Google 鼓励我们在轮换期间关闭并重启 Activity，而鼓励我们在轮换期间保留 Fragment？
2.  如果`setRetainInstance(true)`擅长处理轮换，为什么 Google 不将其作为 Fragment 的默认行为？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-25T11:59:40.943

*   **配置更改**：当屏幕突然变得更宽且高度更小（典型的风景）时，视觉组件倾向于更新其显示并更智能地使用可用的屏幕。配置更改的另一个示例是用户滑动硬件键盘、更改设备语言等。为什么要重新开始：

    *   Android 组件偏爱声明式布局，您可以加载一堆 XML 布局，然后从那里开始工作。查找每个视图并实时重新排列/更新它会很麻烦，更不用说重新连接所有事件处理程序和其他自定义视图代码了。它更容易重新加载另一组布局文件。

    *   此外，在 Android 中，Activity 有点受系统支配，因此很自然地，Activity 生命周期的设计（和推荐）使其能够随时按需重新创建自己，就像以前一样被摧毁。此模式适用于所有重新启动，以及由于配置更改而导致的重新启动。如果您使您的活动和片段能够维持一个永恒的状态，那么配置更改将不是那么大的问题。

    *   保留状态数据（模型），而不是显示它的东西（UI 和视图）。

*   **setRetainInstance(true)**：建议仅与**不包含任何引用的片段一起使用，这些片段将**在旋转时重新创建。这意味着您不应该在任何包含上下文、视图等的片段上使用它。典型的视觉片段可以。但它对于保存对象的片段非常有用，如运行线程、异步任务、数据集合、加载的资产、获取的结果等。此方法有助于将非可视片段用作可拆卸的持有者，用于 Activity 的非上下文相关对象.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T11:54:29.660

因为你误解了它的用途。`setRetainInstance(true)`只能用于类似于单独元素/模块的片段。处理套接字等的片段没有 GUI 真正受益于保留。带有 GUI 的片段可能不应该使用`setRetainInstance(true)`. 此外，任何进入后台堆栈的片段都不应该使用`setRetainIstance(true)`.

您可以将其推广到任何只处理数据/连接等的片段应该使用`setRetainInstance(true)`. 但是有许多不同的方法可以使用 Fragments，这不会从`setRetainInstance(true)`.

# android - 在 Android 中存储、检索和删除数据（本例中为地图）的最简单方法

> ID：15066084
> 
> 赞同：0
> 
> 时间：2013-02-25T11:37:08.647
> 
> 标签：android, sharedpreferences

我一直`SharedPreferences`在我的应用程序中使用来保存有关文本文件的详细信息，因为它很容易访问和更改。我遇到的问题是，当我删除文本文件时，很难删除关联的`SharedPreferences`文件，因为它存储在不同设备上的不同位置，并且没有`getSharedPreferenceDir()`像 @CommonsWare 提到的那样[通用](https://stackoverflow.com/a/5533286/1902059)。

我的问题是：我应该使用另一种方法来存储与创建和检索信息`HashMap`一样易于使用`SharedPreferences`但也易于删除的方法吗？

我知道该`sharedPrefs.clear()`方法，但我指的是删除实际的 XML 文件，而不是简单地清除其内容。提前致谢。

# java - 如何在 Java 中创建包含 Javascript 代码的 JSONArray？

> ID：15066087
> 
> 赞同：3
> 
> 时间：2013-02-25T11:37:19.027
> 
> 标签：java, javascript, json

我正在创建一个 JSONArray 并将其解析为字符串，但由于它甚至包含字符串而不是代码，因此它不会按我的需要输出。

```
for(Place place: places){
    locations.put("new google.maps.LatLng("+place.getContactData().getLatitude()+","+place.getContactData().getLongitude()+")");
}
return locations.toString(); 
```

它输出为：`["new google.maps.LatLng(53.5608,9.96357)","new google.maps.LatLng(53.5608,9.96357)"]`但我需要它不带引号，`[new google.maps.LatLng(53.5608,9.96357),new google.maps.LatLng(53.5608,9.96357)]`以便被javascript正确解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:01:49.900

另一种方法是：

创建一个只有坐标的数组：

```
for(Place place: places){
    JSONObject obj = new JSONObject();
    obj.put("lat",place.getContactData().getLatitude());
    obj.put("lng",place.getContactData().getLongitude());
    locations.put(obj);
} 
```

然后在javascript中：

```
var places = (yourPlacesJson);
var placeObjects = [];

for(var i=0;i<places.length;i++)
{
    placeObjects[placeObjects.length] = new google.maps.LatLng(places[i].lat,places[i].lng);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:58:49.237

JSON 仅支持普通旧数据。它不能包含任何可执行代码（a`new`是可执行代码）。这是设计使然 - 当 JSON 能够包含可执行代码时，您必须更加小心地从不受信任的来源导入 JSON。

您所能做的就是`eval()`在解析 JSON 后将 javascript 代码作为字符串传递并在 JS 端传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:51:01.160

如果您将json解析为另一种语言，您也可以使用正则表达式删除“

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-25T11:43:15.117

我有一个类似的问题，我做这项工作的方式：

而不是在 json 转换之前编写 javascript，而是插入一个占位符。

```
locations.put("%mapsPlaceholder1%"); 
```

然后在用占位符填充数组后，执行：

```
locations.toString().replaceFirst("\"%mapsPlaceholder1%\"","yourJsCode"); 
```

类似的东西

您也可以手动创建数组字符串

# iphone - 视图框架显示方向变化的意外结果

> ID：15066088
> 
> 赞同：0
> 
> 时间：2013-02-25T11:37:19.057
> 
> 标签：iphone, objective-c

在纵向时，我在键盘出现时将视图内容向上推，并在按下返回键时将其向下推。视图的框架是 x=0，y=20（放置状态栏）。在 xib 中，视图大小设置为自由格式。当更改为横向时，新视图的框架的原点是 x=20 y=0。理想情况下它应该是 x=0 和 y=20 对吧？下面是代码。

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation

{

if(toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation ==  UIInterfaceOrientationPortraitUpsideDown)
{
   // [self.view setFrame:CGRectMake(0, 20, 320, 460)];

}
else if(toInterfaceOrientation==UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight )
{
   // [self.view setFrame:CGRectMake(0, 20, 480, 300)];
}
    return YES;

}

-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{

if(toInterfaceOrientation==UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight )
{

    [lblFirstName setFrame:CGRectMake(100, 134, 84, 21)]; 
    [lblLastName setFrame:CGRectMake(100, 193, 83, 21)];
    [txtFirstName setFrame:CGRectMake(273, 129, 142, 31)];
    [txtLastName setFrame:CGRectMake(273, 188, 142, 31)];
    [btnSubmit setFrame:CGRectMake(194, 243, 93, 37)];

}
else if(toInterfaceOrientation==UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
{

    [lblFirstName setFrame:CGRectMake(37, 198, 84, 21)]; 
    [lblLastName setFrame:CGRectMake(37, 282, 83, 21)];
    [txtFirstName setFrame:CGRectMake(165, 193, 127, 31)];
    [txtLastName setFrame:CGRectMake(165, 277, 127, 31)];
    [btnSubmit setFrame:CGRectMake(114, 349, 93, 37)];

}

}

//Hide keypad on background touch
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
if(self.view.frame.origin.y<0)
{
    [self setViewMovedUp:NO];
}
[self.view endEditing:YES];

//[self keyboardWillHide];

}

-(void)textFieldDidBeginEditing:(UITextField *)sender
{
if ([sender isEqual:txtLastName])
{
    //move the main view, so that the keyboard does not hide it.
    NSLog(@"view frame original is %f %f",self.view.frame.origin.x,self.view.frame.origin.y);
    if  (self.view.frame.origin.y >= 0)
    {
        [self setViewMovedUp:YES];
    }
}

}

//method to move the view up/down whenever the keyboard is shown/dismissed
-(void)setViewMovedUp:(BOOL)movedUp
{

[UIView animateWithDuration:0.3 animations:^{
    CGRect rect = self.view.frame;
    if (movedUp)
    {
        // 1\. move the view's origin up so that the text field that will be hidden comes above the keyboard 
        // 2\. increase the size of the view so that the area behind the keyboard is covered up.
        rect.origin.y -= OFFSET_FOR_KEYBOARD;
        rect.size.height += OFFSET_FOR_KEYBOARD;
    }
    else
    {
         //revert back to the normal state.
        rect.origin.y += OFFSET_FOR_KEYBOARD;
        rect.size.height -= OFFSET_FOR_KEYBOARD;
    }
    self.view.frame = rect;
     NSLog(@"view frame modified is %f %f",self.view.frame.origin.x,self.view.frame.origin.y);

}];

}

//Return key click handled.
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
if(self.view.frame.origin.y<0)
{
    [self setViewMovedUp:NO];
}

[textField resignFirstResponder];

return YES;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T03:19:16.237

我在iOS7中遇到了同样的问题。同时，相同的代码在 iOS8 中运行良好。

要解决此问题，您需要移动 view.bounds 而不是 view.frame

# ruby-on-rails - 在 ruby on rails 中添加好友

> ID：15066089
> 
> 赞同：0
> 
> 时间：2013-02-25T11:37:22.223
> 
> 标签：ruby-on-rails

我正在关注这篇文章，以便在 ruby​​ on rails 中将用户添加为好友

[http://asciicasts.com/episodes/163-self-referential-association](http://asciicasts.com/episodes/163-self-referential-association)

我可以通过 Rails 控制台将用户添加为朋友，但不能通过实际页面...这是我的控制器代码

```
class FriendshipsController < ApplicationController
  def new
  end

  def create  
    @friendship = current_user.friendships.build(:friend_id => params[:friend_id])  
    if @friendship.save  
      flash[:notice] = "Added friend."  
      redirect_to phones_index_path  
    else  
      flash[:notice] = "Unable to add friend."  
      redirect_to phones_index_path
    end  
  end 

  def show
  end
end 
```

型号： 用户：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable
has_many :contacts
has_many :phones
has_many :friendships
has_many :friends, :through => :friendships
has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id"  
has_many :inverse_friends, :through => :inverse_friendships, :source => :user  
  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :user_id
  # attr_accessible :title, :body
end 
```

朋友们：

```
class Friendship < ActiveRecord::Base
  attr_accessible :friend_id, :user_id
  belongs_to :user
  belongs_to :friend, :class_name => 'User'
end 
```

看法：

```
<h1>Phones#index</h1>
<center>Users in the system<center><br/>
<p><% @phones.each do |variable|%>
    <% if @phn.email!= variable.email %>
    <br/><%= variable.email %> &nbsp; <%= link_to 'Add as Friend' , friendships_path(:friend_id => @user), :method => :post %>
    <%end%>
    <%end%>
<p>friends</p>
<% for user in current_user.friends %>
<p><%= user.email %></p>
<%end%> 
```

我的视图工作正常.. 如果我通过控制台添加朋友并提交它，它会显示在视图中.. 我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:14:26.983

我能够更正它..我的视图文件中有错误的代码..非常感谢 jvnill....如果不是你，我不会检查我的视图文件... :)

更改`friendships_path(:friend_id => @user)` 为`friendships_path(:friend_id => variable) did the trick`

# php - 计算数组中的特定变量

> ID：15066090
> 
> 赞同：0
> 
> 时间：2013-02-25T11:37:26.453
> 
> 标签：php, arrays, foreach

我有这个以下数组。在这里，我想计算`fraction`值为 1 的变量。根据出现次数，我想做一些操作。我知道的一种方法是，通过使用循环数组`foreach`并放置一个增量器来识别有多少`fraction`值为 1。但我想知道有没有比上述更简单的方法？

有人可以建议我吗？

```
Array
(
    [0] => Array
        (
            [answer] => <p>
    Quiz Test Interoperability</p>

            [feedback] => 
            [fraction] => 0
        )

    [1] => Array
        (
            [answer] => <p>
    Quiz Test Interrelationship</p>

            [feedback] => <br />

            [fraction] => 0
        )

    [2] => Array
        (
            [answer] => <p>
    Quiz Team Interoperability</p>

            [feedback] => <br />

            [fraction] => 0
        )

    [3] => Array
        (
            [answer] => <p>
    Queation Test Interoperability</p>

            [feedback] => <br />

            [fraction] => 1
        )

) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:40:40.260

您可以使用[`array_reduce()`](http://www.php.net/manual/en/function.array-reduce.php)：

```
<?php
function countFractionIs1 ($element) {
   return ($element['fraction'] == 1) ? 1 : 0;
}

$count = array_reduce($yourarray, "countFractionIs1", 0); 
```

# spring - Spring中的循环依赖

> ID：15066092
> 
> 赞同：0
> 
> 时间：2013-02-25T11:37:29.993
> 
> 标签：spring, cycle

如果我有 bean A 引用 bean B 并且 bean B 依赖于 bean A。在这种情况下 spring 抛出 ObjectCurrentlyInCreationException ，但它是如何在内部发生的以及它将在哪个对象上抛出这个错误。例如：

```
<bean id='A'>
    <ref bean='B'>
</bean>

 <bean id='B'>
      <ref bean='A'>
 </bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:02:37.630

如果你的 A 类和 B 类有默认构造函数（A()、B()），我相信一切都会顺利。这个问题的可能骗局：[春天的循环依赖](https://stackoverflow.com/questions/3485347/circular-dependency-in-spring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-02T10:41:48.970

这是Spring中循环依赖的典型例子。Spring可以通过setter-injection来解决循环依赖。在调用 setter 方法之前构造对象。两个（而不是循环依赖中涉及的所有类）类都需要默认构造函数，以帮助 Spring 在调用 setter 方法之前构造空对象

# android - IAB V3 中的 IllegalStateException

> ID：15066095
> 
> 赞同：1
> 
> 时间：2013-02-25T11:37:37.713
> 
> 标签：android, in-app-billing

我正在尝试在 app billing v3 中使用 android，并且我的应用程序崩溃并出现以下错误 **Can't start async operation (consume) because another async operation(consume) is in progress**

堆栈跟踪如下

```
02-25 16:56:54.811: E/AndroidRuntime(6913): FATAL EXCEPTION: main
02-25 16:56:54.811: E/AndroidRuntime(6913): java.lang.IllegalStateException: Can't start async operation (consume) because another async operation(consume) is in progress.
02-25 16:56:54.811: E/AndroidRuntime(6913):     at com.seven.BillingHelper.IabHelper.flagStartAsync(IabHelper.java:711)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at com.seven.BillingHelper.IabHelper.consumeAsyncInternal(IabHelper.java:832)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at com.seven.BillingHelper.IabHelper.consumeAsync(IabHelper.java:623)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at com.seven.javalib.InAppBilling$15.run(InAppBilling.java:350)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at android.os.Handler.handleCallback(Handler.java:587)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at android.os.Looper.loop(Looper.java:143)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at android.app.ActivityThread.main(ActivityThread.java:4196)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at java.lang.reflect.Method.invokeNative(Native Method)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at java.lang.reflect.Method.invoke(Method.java:507)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-25 16:56:54.811: E/AndroidRuntime(6913):     at dalvik.system.NativeStart.main(Native Method) 
```

谁能告诉我如何解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:43:18.957

由于上一次尝试中`flagEndAsync`没有调用该方法的原因，请确保`IabHelper`在所有情况下（成功或失败）`flagEndAsync`都调用了该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T14:02:27.193

这可能会发生，因为`IabHelper.handleActivityResult(requestCode, resultCode, data);`没有在`onActivityResult()`您的活动方法中调用。您可能想要验证它是否被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-18T08:35:42.867

而不是更新所有代码。在 IabHelper 中公开 flagEndSync 方法更容易。

然后每次调用 IabHelper 时，首先调用 Mhelper.flagEndAsync()。然后你肯定知道你从一个干净的 Asynctask 开始。

我再也没有崩溃了。

# sql-server - 如何撤消 TRUNCATE 命令

> ID：15066098
> 
> 赞同：2
> 
> 时间：2013-02-25T11:37:43.470
> 
> 标签：sql-server, sql-server-2008

我不小心在错误的表上执行了 TRUNCATE 命令，我的所有数据都消失了。我们确实有一个备份，但它是 2 周前的，并且没有所有最新数据。

有什么想法我们如何回滚这个命令并在可能的情况下取回数据？有没有第三方工具可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T03:12:32.607

简单的答案是——如果事务已经提交，你不能回滚它，但你可以做其他事情来取回数据（或至少部分数据）。

当您执行 truncate 语句时，您的数据仍在 MDF 文件中，但它不可见，因为 SQL Server 现在将其视为可用空间（truncate 基本上是告诉 SQL Server 释放数据页）。

取回数据的唯一方法是以某种方式读取已释放的数据页并将它们转换为可读数据。

重要提示：您必须迅速采取行动，因为如果尚未使用新数据，则可用空间将被覆盖。如果您可以停止 SQL Server 实例并制作 MDF 和 LDF 文件的副本，这将为您争取更多时间。

尝试使用[ApexSQL 恢复](http://www.apexsql.com/sql_tools_recover.aspx)。据我所知，它是唯一可以进行这种恢复的可用工具。如果你真的很擅长 SQL，你可以尝试像[这样](http://raresql.com/2012/04/08/how-to-recover-truncated-data-from-sql-server-without-backup/)修改和执行很长的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:42:12.797

除非它是 Transaction Wrapped，否则恐怕你不走运。这是一个类似的帖子，但这也有更多的解释。

[http://www.sql-server-performance.com/forum/threads/how-to-rollback-truncate-operation.16968/](http://www.sql-server-performance.com/forum/threads/how-to-rollback-truncate-operation.16968/)

# visual-studio-2012 - 这个紫色的“T”图标在 Visual Studio/TFS 2012 中是什么意思

> ID：15066103
> 
> 赞同：36
> 
> 时间：2013-02-25T11:37:57.083
> 
> 标签：visual-studio-2012, tfs, icons

我正在使用 Visual Studio 2012，链接到 TFS 2012 进行源代码控制。

我刚刚分支了一些代码，但是在创建分支文件后它告诉我我没有“管理分支”权限。

不是问题，我可以解决这个问题，但我的谷歌技能让我无法弄清楚这个紫色小“T”图标在源浏览器窗口中的含义。

![在此处输入图像描述](../Images/3c8797e7fcd2978cce1c8e9f1abb7c52.png)

我认为这是一个待定的更改？

那天晚些时候：在整理完权限后，我检查了新分支 ok 并且图标消失了，但我仍然想知道它的含义，以及如何识别可能出现的任何其他图标。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-01T23:39:52.583

它只是待处理的分支操作的新 VS2012 图标。如果你仔细观察，它不是一个“T”，而是一个向上的分裂箭头。如果您查看文件 -> 源代码管理 -> 分支和合并 -> 分支菜单项，可以看到更大版本的图标。

通常你不会看到这个，因为分支操作通常是在服务器端执行的。在您的情况下，由于您没有权限，因此它被跟踪为待处理的分支请求，并在您的权限问题得到解决后清除。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-02T14:44:35.397

**当您签入新分支时，紫色图标将消失。**

紫色 T 符号将显示在新创建的有待更改的分支中的所有文件旁边（分支已创建但未签入）。我认为这是源代码控制或分支级别的“待更改”指示器。

# c++ - 什么是 C 中的泛型库？

> ID：15066104
> 
> 赞同：-4
> 
> 时间：2013-02-25T11:38:00.907
> 
> 标签：c++, c, data-structures

我第一次遇到这个称为泛型库的术语，我无法理解泛型库的含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:44:38.257

泛型库是一种可以与一种以上类型一起使用的库，例如，一种以上的数字类型

在 c11 中，通用定义可能如下所示：

```
#define cbrt(X) _Generic((X), long double: cbrtl, \
                              default: cbrt, \
                              float: cbrtf)(X) 
```

在早期版本的 C 中，必须使用各种宏技巧，例如，如[评论](https://stackoverflow.com/questions/15066104/what-is-a-generic-library-in-c/15066211#comment21184995_15066104)中[@user1929959 所指的 SO 问题所示](https://stackoverflow.com/questions/326202/generic-list-manipulation-function-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:50:21.620

这里的“通用”可能意味着“参数化数据类型”（来自 Java？）。唉，C 在处理（数据）类型方面非常薄弱——在“类型安全”的意义上。**因此，C 语言中的常用方法是使用回调函数**对算法进行参数化，您必须实现这些回调函数才能完成特定于类型的工作。数据本身通常由`void*`.

作为示例，您可以查看 C 标准函数`qsort`（来自*man sort*）：

```
#include <stdlib.h>

void qsort(void *base, size_t nmemb, size_t size,
           int(*compar)(const void *, const void *)); 
```

`base`是指向您的数据的“通用”指针，`nmemb`并且`size`是有关您的数据的附加信息，并且`compar`将是您必须提供的能够比较数据类型的两个元素的回调函数。

有许多库为您提供算法。这个数字太大了，您需要指定...

# c# - 快速找到它们的并集等于基集的最佳子集计数

> ID：15066115
> 
> 赞同：0
> 
> 时间：2013-02-25T11:38:32.077
> 
> 标签：c#, performance, algorithm

我有具有 4,000,000 个成员的基本集，并且基本集中有 50 个子集

我想选择它们的联合等于我的基本集的子集的最佳数量

如果有两个子集我可以做到这一点，否则我必须找到 3 个子集和....

速度是我解决这个问题的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:42:04.500

您描述的问题是一个 NP-Complete 问题，称为[Set Cover Problem](http://en.wikipedia.org/wiki/Set_cover_problem)，已知各种算法（精确或近似）。

# javascript - 在 Javascript 中按条件添加和设置属性的优雅方式

> ID：15066118
> 
> 赞同：0
> 
> 时间：2013-02-25T11:38:37.510
> 
> 标签：javascript

我正在创建要使用 Ajax 发送到服务器的数据对象。我发现自己重复这些行以向数据对象添加属性：

```
var param1, param2;
if (param1 = $("field1").val())
  data.param1 = param1;

if (param2 = $("field2").val())
  data.param2 = param2;

etc. 
```

我只是好奇在我的情况下是否有更优雅的方式来填充数据对象？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:42:55.557

您可以定义一个 setter 函数：

```
data.set = function(key, value, fieldName){
    if(value = $(fieldName).val()){    
        this[key] = this[value]
    }
} 
```

那么你只需调用 data.set('param1', param1, 'field1);

这本身不是一个修复，而只是一个较短的放置方式

# java - 搜索具有可变列大小的数组java

> ID：15066121
> 
> 赞同：0
> 
> 时间：2013-02-25T11:38:46.277
> 
> 标签：java

我想在将 .txt 文件复制到新文件后在屏幕上显示它的一些内容。文本文件的内容自始至终不是完全相同的结构。

当我这样做时

```
if (m[11].equals("Channel") && m[12].equals("ID")){ System.out.println("Wavelenght ID = " + m[9]); 
```

我得到一个错误数组超出范围。

> 测试步骤：调试*** Fpga 配置 ECFG ***：EED 3：通道 ID

如果找到此行，我希望它显示 Wavelenght ID = 3

```
String p = path.replace("\\", "\\\\");
    File file = new File(p);
    File[]   files = file.listFiles();
    BufferedReader inputStream = null;
    PrintWriter outputStreamI = null;
    PrintWriter outputStreamO = null;

    try {
        String l,c;
        for (int i=0; i<files.length; i++){

            inputStream = new BufferedReader(new FileReader(files[i].getAbsolutePath()));
            outputStreamI = new PrintWriter(new FileWriter("S:\\WRED_IBP\\" + files[i].getName().replaceFirst("[.][^.]+$", "")+ "Ingress.txt"));
            outputStreamO = new PrintWriter(new FileWriter("S:\\WRED_IBP\\" +files[i].getName().replaceFirst("[.][^.]+$", "")+ "Egress.txt"));  

            while ((l = inputStream.readLine())!= null) {
                String[] m=l.split(" ");
                for(int d=0; d<m.length; d++){ 
                    c=m[d];
                    if (c.equalsIgnoreCase("ied_wred") ){outputStreamI.println(l); if (outputStreamI.checkError()){System.err.println("Error in output stream");}} //|| c.equalsIgnoreCase("WARNING") || c.equals("ERROR")
                    else if (c.equalsIgnoreCase("eed_brc_ibp")){outputStreamO.println(l); if (outputStreamO.checkError()){System.err.println("Error in output stream");}} // || c.equalsIgnoreCase("WARNING") || c.equals("ERROR") 
                }   
            }
        }

    } catch(IOException e){
        System.err.println("Caught IOException: " + e.getMessage());
    }//wait(10);
    finally {
        if (inputStream != null) {
            try{ inputStream.close();} catch (IOException e) {e.printStackTrace();}}
        if (outputStreamI != null) {outputStreamI.close();}
        if (outputStreamO != null) {outputStreamO.close();}

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:43:04.543

您可以使用：

```
if (m.length > 12 && m[11].equals("Channel") && m[12].equals("ID")){ 
    System.out.println("Wavelenght ID = " + m[9]);
} 
```

所以这里不会发生索引越界。

确保将这些行放在`for`循环之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:45:10.800

`TESTSTEP: DEBUG * Fpga Config ECFG *: EED 3 : Channel ID`

我假设这是文件中的文本。当您阅读本文时，您正在尝试根据空格进行拆分。你应该做的是基于`:`.

# python - 通过用户给定的正则表达式检查字符串

> ID：15066124
> 
> 赞同：0
> 
> 时间：2013-02-25T11:38:59.553
> 
> 标签：python, regex, django

我是我的 Django 应用程序之一，我需要使用标志进行字符串验证。我的意思是：在管理面板中，我添加了例如：

*   `baduser*@gmail.com`
*   `spambot-?@gmail.com`

ETC...

不会有严格的 pythonic 正则表达式，而是 '*' 或 '?' 由普通管理员提供

当有人注册时，我必须通过 Python 正则表达式检查所有凭据。我需要检查：

*   `*`作为任何标志，一次或多次
*   `?`作为 1 个标志。

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T11:43:46.823

您可以将其转换为正则表达式，然后使用它来匹配电子邮件地址。

这并不难做到：

```
import re

def translate_pattern(pattern):
    res = []
    for c in pattern:
        if c == '*':
            res.append('.+')  # 1 or more
        elif c == '.':
            res.append('.')   # exactly 1
        else:
            res.append(re.escape(c))  # anything else is a literal character
    return re.compile(''.join(res)) 
```

该函数返回已编译好的正则表达式：

```
>>> translate_pattern('baduser*@gmail.com').search('baduser12345@gmail.com')
<_sre.SRE_Match object at 0x107467780>
>>> translate_pattern('baduser*@gmail.com').search('gooduser@gmail.com') 
```

请注意，因为您匹配`.`任何*字符*，所以以下也匹配：

```
>>> translate_pattern('baduser*@gmail.com').search('baduser12345@gmail-com')
<_sre.SRE_Match object at 0x1074677e8> 
```

因为`.`匹配`-`in `gmail-com`。

# web-services - 如何在 WebService 运行时更改 NameSpaceUri 以将其指向不同的端点？

> ID：15066131
> 
> 赞同：1
> 
> 时间：2013-02-25T11:39:13.887
> 
> 标签：web-services, spring, jax-ws, spring-ws

我正在使用`org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean`配置我的客户端 WebService，但我无法更改接口 targetNameSpaceUri 以使其指向不同的 URL。

使用`<property name="namespaceUri" value="http://localhost:9191/my/" />`不是这样做。

我的配置看起来像这样

```
 <bean id="myService" class="org.springframework.remoting.jaxws.JaxWsPortProxyFactoryBean">
        <property name="namespaceUri" value="http://localhost:9191/my/" />          
        <property name="serviceName" value="my" />
        <property name="portName" value="myPort" />
        <property name="serviceInterface" value="br.com.asis.my.myService" />           
        <property name="wsdlDocumentUrl" value="http://localhost:9191/my/?wsdl" />
        <property name="lookupServiceOnStartup" value="false" />
    </bean>     
    <bean id="myHandler" class="br.com.cflex.asis.my.myHandler">
        <property name="service"            ref="myService"></property>
    </bean> 
```

我有带有这个注释的 br.com.asis.my.myService 接口。

```
@WebService(name = "myService")
public interface myService {

/**
 * 
 * @param message
 * @return
 *     returns java.lang.String
 */
@WebMethod(operationName = "Sendmessages")
@WebResult(targetNamespace = "")
@RequestWrapper(localName = "Sendmessages", className = "br.com.asis.my.Sendmessages")
@ResponseWrapper(localName = "SendmessageResponse", className = "br.com.asis.my.SendmessageResponse")
public String sendmessages(
    @WebParam(name = "message")
    message message); 
```

}

但改变

```
<property name="namespaceUri" value="http://localhost:9191/my/" /> 
```

在我的 Spring 配置中，不会更改服务 URI，我希望能够更改它并将其应用于我的所有客户端服务接口，而不必使用这样的注释

```
@WebService(name = "myService", targetNamespace="http://localhost:9191/myService/") 
```

可能吗 ？

# java - 如何在 JavaFx 中捕获强制退出或意外关闭的事件？

> ID：15066132
> 
> 赞同：6
> 
> 时间：2013-02-25T11:39:15.340
> 
> 标签：java, javafx-2

我正在制作一个具有服务器登录和注销功能的桌面应用程序。

每当有人关闭窗口时，我都需要从应用程序中注销，所以我正在使用这些代码

```
primaryStage.setOnCloseRequest(new EventHandler<WindowEvent>() {
                @Override
                public void handle(WindowEvent event) {
                    event.consume();
                    closeWindow();
                }
            }); 
```

其中 closeWindow() 包含注销和其他相关步骤。

现在，当应用程序意外关闭或有人从任务管理器强行退出/关闭它（通过结束进程）时，就会出现问题。

JavaFX 是否有任何事件可以捕获强制退出或意外关闭？或者有什么方法可以阻止它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:07:24.880

当您的应用程序通过`TaskManager`您唯一的选择关闭时，您将使用 VM 的[关闭挂钩](http://docs.oracle.com/javase/1.5.0/docs/guide/lang/hook-design.html)。

周围有一些例子，例如[here](https://stackoverflow.com/questions/2921945/useful-example-of-a-shutdown-hook-in-java/2922031#2922031)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T12:07:56.963

有一种方法

```
@Override
public void stop() throws Exception {
    super.stop();
    System.out.println("logout");
} 
```

在应用程序类中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-17T07:40:11.747

```
public class Gui extends Application {

    static {
        Runtime.getRuntime().addShutdownHook(new Thread() {
            @Override
            public void run() {
                closeWindow();
            }
        });
    }

    @Override
    public final void start(Stage primaryStage) throws Exception {
        // ...
    }

    @Override
    public void stop() throws Exception {
        // ...
        System.exit(0);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:08:55.607

如果您正在为该注销过程使用任务，请尝试使用`setDaemon`方法。我通过显示“加载”窗口并在任务完成后关闭该窗口解决了类似的情况。你也可以试试。

# box2d - 当施加超过一定的力时实现关节断裂

> ID：15066140
> 
> 赞同：5
> 
> 时间：2013-02-25T11:39:33.797
> 
> 标签：box2d, revolute-joints

我有两个动态的身体和一个旋转关节连接在一起。两个主体还连接到另一端的静态主体。当施加超过一定量的力时，我需要两个动态主体之间的关节断裂，也就是说，当质量超过关节能够抵抗时。这是如何在 Box2d 中完成的？我猜这不是由 Box2d 自动处理的。这是我想要实现的图形概述。

![在此处输入图像描述](../Images/d18cac9d58db16cbeb57fc16dfe819dc.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T14:55:14.227

使用 b2Joint::GetReactionForce。

在每个时间步检查中，如果关节的反作用力小于某个临界值。当力量变得更大时，破坏关节。

```
void update(float timeStep)
{
    b2Vec2 reactionForce = joint->GetReactionForce(1/timeStep);
    float forceModuleSq = reactionForce.LengthSquared();
    if(forceModuleSq > maxForceSq)
    {
        world->DestroyJoint(joint);
    }
} 
```

world - 指向 b2World 的指针，joint - 指向 b2RevoluteJoint 的指针，maxForceSq - 最大力的平方。

看，那里计算LengthSquared，并与平方maxForce进行比较。这将提高性能，因为不需要计算平方根。

最大力可以计算为重力：maxMass*9.8。

# asp.net-mvc - 阻止特定路由的身份验证

> ID：15066142
> 
> 赞同：0
> 
> 时间：2013-02-25T11:39:33.577
> 
> 标签：asp.net-mvc, forms-authentication

我有一个 MVC Web 应用程序。它使用表单身份验证。

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="90" />
</authentication> 
```

我怎样才能绕过这个单一的路线，比如 xyz.com/us/ht/ht？

我想绕过整个功能以防止获取 aspxanonymous cookie，并且我不想在此路由的成员数据库中输入条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:01:20.883

解决此问题的一种方法是为路由 /us/ht/ht/ 使用自定义 AnonymousIdentificationModule。

东西在这里处理->

System.Web.Security.AnonymousIdetificationModule

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:49:22.817

如果您使用的是 MVC4，只需将`[AllowAnonymous]`标签添加到您的控制器操作中。

否则在你的 web.config 中这样做

```
<configuration>
   <location path="route/thatanon/isallowed">
      <system.web>
         <authorization>
            <allow users="?"/>
         </authorization>
      </system.web>
   </location>
</configuration> 
```

# wpf - 数据绑定到具有属性的另一个类中的类的属性

> ID：15066143
> 
> 赞同：0
> 
> 时间：2013-02-25T11:39:35.803
> 
> 标签：wpf, xaml, data-binding

如果我绑定到的属性（在这种情况下为上下文）是一个具有**其属性 (Unit)的****类（LatestReading 类）** ，那么执行数据绑定的正确方法是什么。

 **数据上下文设置为类的根。这是我班级的层次结构。MonitoringPoint.LatestReading.Unit

```
<DataTemplate x:Key="TrackBallInfoTemplate"
              DataType="{x:Type winGRAPH_Core:MonitoringNode}">
    <StackPanel Margin="3">
        <Grid Height="Auto">
            <StackPanel Height="Auto"
                        VerticalAlignment="Top"
                        Orientation="Horizontal">
                <TextBlock TextWrapping="Wrap"                                       
                           Text="{Binding DataPoint.Value, FallbackValue=0.00}"
                           FontWeight="Bold"
                           FontSize="16" />
                <TextBlock TextWrapping="Wrap"
                           Text="{Binding LatestReading.Unit, FallbackValue=°C}"
                           Margin="2,3,0,0" />
            </StackPanel>
        </Grid>
        <Grid Height="Auto">
            <TextBlock TextWrapping="Wrap"
                       Text="{Binding DataPoint.Category, FallbackValue=time}"
                       d:LayoutOverrides="Width, Height"
                       FontStyle="Italic"
                       Margin="0,2,0,0" />
        </Grid>
    </StackPanel>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:50:35.420

如果分配给您的 DataContext 的类型是 a`LatestReading`那么只需使用 property `Unit`。DataContext 已经设置在更高级别（**如果**您记得设置它 - 这是一个容易忘记的常见错误）自动级联到子控件。**

# c++ - 使用 malloc 和 new - C++

> ID：15066146
> 
> 赞同：0
> 
> 时间：2013-02-25T11:39:44.483
> 
> 标签：c++, malloc

我是 C/C++ 新手并正在开发 C++ 应用程序。我对 new 和 malloc 有疑问。我的应用程序有点复杂，而且还有一些 C 结构。在某些时候，我想为 MyData 类型的类（包含双端队列）分配新内存，后来我将该指针分配给 C 结构中的指针。我的代码的较小版本如下。

```
#include <deque>
class MyData 
{
public:
    MyData(){};
    ~MyData() {};

    std::deque<int>& GetDequeMyDataSet() {return deque_MyDataSet; };

private:
    std::deque<int>     deque_MyDataSet;//contains ohlc data for the symbol   
};

int _tmain(int argc, _TCHAR* argv[])
{
    MyData* pMyData = new MyData();
    MyData* p_Data = (MyData*)malloc(sizeof(MyData*));
    p_Data = pMyData;
    p_Data->GetDequeMyDataSet().push_back(10);
    p_Data->GetDequeMyDataSet().push_back(11);
    //.... Several other push back and operations releated to this deque goes here. 
    delete pMyData;// At the end I free both memories.
    free(p_Data);
    return 0;
} 
```

在为两个指针分配内存后，我在 malloc 指针 (p_Data) 上使用了 GetDequeMyDataSet() 方法。我的问题是是否可以将项目 push_back 到这个 malloc 指针上的双端队列，因为我只为指针分配了内存？malloc 可以处理双端队列的动态内存分配吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T11:42:36.460

简而言之，这是您的情况：

```
void * p = malloc(1);
void * q = malloc(1);

q = p;

free(q);
free(p); 
```

你能发现问题吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:05:45.060

如果您主要是 push_back 元素，则使用 deque 毫无意义。与向量插入相比，它在推回元素时速度较慢，而在 push_front 中速度更快。同样使用 malloc 只是在问问题。新的也是如此，如果您确实需要动态分配您的类对象，请使用 std::shared_ptr 或 std::unique_ptr 。他们会为你处理内存释放。

```
 #include <vector>

 class MyData 
 {
 public:
     MyData() {};
     ~MyData() {};
     std::vector<int>& GetMyDataSet() { return m_myDataSet; }
 private:
     std::vector<int> m_myDataSet;
 };

 int _tmain(int argc, _TCHAR* argv[])
 {
     MyData myData;
     myData.GetMyDataSet().push_back(10);

     //or dynamically
     auto pMyData = std::make_shared<MyData>();
     pMyData->GetMyDataSet().push_back(10);

     return 0;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:43:22.860

malloc 和 new 之间的区别在于前者不调用类的构造函数，而后者调用。构造函数依次调用成员变量的构造函数，就像`deque_MyDataSet`在这种情况下一样。所以你所做的不会调用双端队列的构造函数。

始终使用 new in`C++`以避免以后出现问题。并确保一切都正确初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:45:02.177

混合`malloc()`和`new`是一个坏主意。另外，什么是“C类”？

无论如何，这个：

```
MyData* p_Data = (MyData*)malloc(sizeof(MyData*)); 
```

完全错误，您没有分配正确的内存量。你的意思是：

```
MyData* p_Data = (MyData *) malloc(sizeof *p_Data); 
```

因为您必须具有`MyData`所指向的结构的实际大小。*您的代码只为指针*分配了足够的空间，这不是您的意思。

请注意，强制转换在 C++ 中是必需的，但[在 C 中是不好的做法](https://stackoverflow.com/a/605858/28169)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T12:10:58.533

> 我的问题是是否可以 push_back 项目以在这个 malloc 指针上进行双端队列，因为它只为指针分配了内存？

通常，无论它是如何初始化的（动态分配或在堆栈上），都可以将项目 push_back 到对象中。虽然在这种情况下，`p_Data`已分配，但根本没有初始化。

要看到这一点，您需要了解 malloc 和 new 之间的区别：

malloc 是 C 函数，它分配一块内存并返回一个 (void) 指向它的指针。它存在于 C++ 中的原因是因为 C++ 最初与 C 兼容并且能够使用它的库（现在它是向后兼容所必需的。

new 是 C++ 运算符，它分配一块内存，将其解释为一个对象，并透明地调用该对象的构造函数。这两个功能不可互换。

为对象分配内存时，请始终使用 new。malloc 不会调用对象的构造函数（也不会自由调用对象的析构函数）。

等效代码：

```
class MyData { /* same as in your question */ };

// 1: normal C++ dynamic object allocation
MyData* pMyData = new MyData();

// 2: allocate through malloc and call constructor through placement new 
void*   block = (MyData*)malloc(sizeof(MyData)); // allocate sizeof(MyData) bytes
MyData* pMyData = new(block) MyData(); // call constructor on block memory 
```

这意味着如果您使用 malloc 和 free，您的对象不会被初始化，即使您通常（直观地）期望它们是这样的。

TL:DR：永远不要在 C++ 中使用 malloc 和 free。

> 在为两个指针分配内存后，我在 malloc 指针（p_Data）上使用了 GetDequeMyDataSet() 方法

那不应该奏效。不应初始化 malloc 的指针（分配是，初始化否）。

最重要的是，由于您 assign `p_Data = pMyData;`，您对 free 的调用将尝试释放已由 delete 语句分配的内存（因为两者都指向相同的地址）。

这应该被视为访问冲突错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T12:12:41.573

在 C++ 中，通常不需要动态分配东西。您只需在需要时创建一个新对象：

```
int _tmain(int argc, _TCHAR* argv[])
{
    MyData myData;   // No pointers, no new

    MyData* p_Data = &myData;   // Create a pointer to myData, if you need one
    p_Data->GetDequeMyDataSet().push_back(10);
    p_Data->GetDequeMyDataSet().push_back(11);
    //.... Several other push back and operations releated to this deque goes here. 

    // Nothing to delete or free here

    return 0;
} 
```

# c# - 如何编写 http 隧道

> ID：15066147
> 
> 赞同：0
> 
> 时间：2013-02-25T11:39:48.350
> 
> 标签：c#, port, packet-capture, http-tunneling

我基本上想捕获选定端口中的所有数据包并通过 HTTP 传输它们。最好的方法是什么？我应该为此使用像 SharpPcap 这样的数据包捕获程序吗？

编辑：我想允许 2 台运行安全网络的计算机相互连接。为此，我需要编写一个客户端程序和一个服务器程序。所以client1将通过HTTP将数据包发送到服务器，服务器将通过HTTP将数据包发送到client2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:48:43.437

你的问题有点含糊，通过HTTP传输它们是什么意思？将它们转移到哪里，然后做什么？

以 Tor 为例。Tor 会在本地设置一个 SOCKS 和 HTTP 代理供你使用。只要客户端支持其中一种协议，您就可以连接到代理。然后，本地代理将通过 Tor 网络将请求路由到出口节点，然后该节点将连接到更广阔的世界。

在你的情况下，你想要类似的东西。本地的 SOCKS 或 HTTP 代理，然后将 HTTP 请求发送到某个出口点，然后该出口点将真正执行相关请求。

您在任何时候都不需要进行数据包捕获，因为这只会使事情变得过于复杂并在另一个层面上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:50:23.410

我刚刚搜索了“http 隧道示例”并找到了以下链接。也许他们会帮助你。

[链接 1](https://stackoverflow.com/questions/2272482/http-tunneling-to-pass-firewall-in-c-sharp-tcp)

[链接 2](http://www.codeproject.com/Articles/17216/HttpTunnel-in-C)

# if-statement - 如何测试xslt 1.0中的值是否为零

> ID：15066149
> 
> 赞同：1
> 
> 时间：2013-02-25T11:39:50.110
> 
> 标签：if-statement, xslt-1.0, conditional-statements

我的 xslt 1.0 中有以下情况

```
<xsl:when test="string-length(//Record/CIMtrek_CI_OPEX_200910_FrDiv/text()) != 0" ></xsl:when 
```

但即使值为 ，也会执行此`CIMtrek_CI_OPEX_200910_FrDiv`条件`0`，

我不希望在值为`CIMtrek_CI_OPEX_200910_FrDiv`is时执行此条件`0`

如何在 xslt 1.0 中执行此操作

请帮我完成这件事。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:59:20.170

**使用**：

```
test="translate(//Record/CIMtrek_CI_OPEX_200910_FrDiv, '0', '')" 
```

# codeigniter - 控制器中的变量未发送到 CodeIgniter 中的视图

> ID：15066150
> 
> 赞同：1
> 
> 时间：2013-02-25T11:39:52.173
> 
> 标签：codeigniter

我正在将 HMVC 与 CodeIgniter 一起使用。

我的 testmodule 控制器中有这个：

```
public function index()
{ 
     $this->view_data['main_content'] = 'frontpage';
     $this->load->view('template', $this->view_data);
} 
```

这在我的视图中由该控制器加载的该控制器的 template.php ：

```
 <?php 

      $this->load->view('includes/header');

      $this->load->view($main_content);

      $this->load->view('includes/footer'); 

    ?> 
```

但是，当我在视图中 var_dump($main_content) 和 die() 它显示**null**而不是**首页**

怎么来的？我完全不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:01:19.130

如果你想使用`$this->view_data`你必须先声明`$view_data`为一个[属性](http://www.php.net/manual/en/language.oop5.properties.php)（在你的控制器的顶部）：

```
class TestModule extends CI_Controller
{
  public $view_data = array();

  public function index()
  {
    // Now you can use $this->view_data in this function:
    $this->view_data['main_content'] = 'frontpage';
    $this->load->view('template', $this->view_data);
  }
} 
```

# php - Explode 方法不会在 php 中爆炸字符串

> ID：15066151
> 
> 赞同：1
> 
> 时间：2013-02-25T11:39:52.620
> 
> 标签：php, html-table, explode

这是代码，但`explode()`方法不会在`<tr>`发生时从字符串中拆分数据。让我知道在这个简单的案例中我做错了什么。在这种情况下最好不使用正则表达式。

**编辑**

它在 Codepad codepad.org/K9ETKzUN 中工作，但浏览器没有输出 php 呈现的代码。

```
<?php

$tabledata = '<table width="90%" cellspacing="1" cellpadding="4" border="3" bgcolor="#f5f5f5">
<tbody>

<tr>
<th>No</th>
<th>AnimalNo</th>
<th>Name</th>
<th colspan="1">Sub1</th>
<th colspan="1">Sub2</th>
<th colspan="1">Sub3</th>
</tr>

<tr>
<th colspan="1"></th>
<th colspan="1"></th>
<th colspan="1"></th>
<th colspan="1">Subpart1</th>
<th colspan="1">Subpart2</th>
<th colspan="1">Subpart3</th>
</tr>

<tr>
<th colspan="1"></th>
<th colspan="1"></th>
<th colspan="1"></th>
<td class="countcompfield">Max mark1</td>
<td class="countcompfield">Max mark2</td>
<td class="countcompfield">Max mark3</td>
</tr>

<tr>
<td></td>
<td>A1</td>
<td>Name1</td>
<td>34</td>
<td>56</td>
<td>67</td>
</tr>

<tr>
<td></td>
<td>B2</td>
<td>Name2</td>
<td>89</td>
<td>76</td>
<td>56</td>
</tr>

<tr>
<td></td>
<td>C1</td>
<td>Name3</td>
<td>34</td>
<td>17</td>
<td>23</td>
</tr>

</tbody>
</table>';

$myarr = explode('<tr>',$tabledata);

echo "<pre>";
print_r($myarr); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:46:13.037

它的工作...运行脚本并查看源代码。

右键->查看源代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:46:20.083

发布的代码有效。您遇到的问题是您在浏览器中将结果作为网页查看，这导致除了最后一个元素之外的所有元素都保持隐藏状态。如果您在浏览器中查看>源代码，您将看到预期的正确结果。

HTML 解析的更好选择是本机[DOMDocument](http://php.net/manual/en/class.domdocument.php)。

> 它在 Codepad codepad.org/K9ETKzUN 中工作，但在浏览器中运行它不会

那是因为键盘不复制浏览器，键盘上的输出是文字。HTML 标记不会像在网页上那样被解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T11:46:23.983

你怎么断定它没有爆炸？也许通过在浏览器中查看 print_r 的输出，您实际上弄错了。无论您所做的一切都在正常工作。将 print_r($myarr) 替换为 var_dump($myarr) 你就会明白我的意思了。

浏览器最后只是将表格一起渲染:)

# jaas - 如何在 Cloudbees 的 JavaEE 堆栈中定义安全领域？

> ID：15066152
> 
> 赞同：0
> 
> 时间：2013-02-25T11:40:03.370
> 
> 标签：jaas, cloudbees

我正在尝试在 CloudBees 的 JavaEE 堆栈中运行一个简单的 Web 应用程序。作为此应用程序的一部分，我定义了一个安全领域，即 DataSourceRealm

```
 <login-config>
    <auth-method>FORM</auth-method>
    <realm-name>ResmanRealm</realm-name>
    <form-login-config>
        <form-login-page>/welcome.xhtml</form-login-page>
        <form-error-page>/welcome.xhtml</form-error-page>
    </form-login-config>
</login-config> 
```

迄今为止，我已经使用本地 Glassfish3 服务器编写了这个，我在其中针对 JDBC 资源定义了 ResmanRealm。在 Glassfish3-config-speak 中，最终看起来像这样

```
 <auth-realm classname="com.sun.enterprise.security.auth.realm.jdbc.JDBCRealm" name="ResmanRealm">
      <property name="jaas-context" value="jdbcRealm"></property>
      <property name="encoding" value="Hex"></property>
      <property name="password-column" value="password"></property>
      <property name="datasource-jndi" value="jdbc/ResManPool"></property>
      <property name="group-table" value="V_USER_ROLE"></property>
      <property name="user-table" value="USER"></property>
      <property name="group-name-column" value="role"></property>
      <property name="digest-algorithm" value="SHA-256"></property>
      <property name="user-name-column" value="name"></property>
    </auth-realm> 
```

所以，这一切都在本地工作。我看到在 Cloudbees 中有一个 cloudbees xml 文件，doco 声明它是遗留的，但看起来它对此有某种形式的支持。我找不到任何关于如何将安全领域定义为配置参数的示例。看起来 if 可能是一种资源（在 CloudBees 中），您可以在将数据库绑定到应用程序时定义它。但是，一个例子会很好，因为现有的资源示例（至少我能找到的）有点笼统。

另外，我的（当前不成功的）应用程序启动的输出日志没有显示 DataSourceRealms 正在加载？

```
[#|2013-02-25T11:03:51.319+0000|INFO|glassfish3.1.2|javax.enterprise.system.core.security.com.sun.enterprise.security|_ThreadID=12;_ThreadName=AutoDeployer;|SEC1010: Entering Security Startup Service|#]

[#|2013-02-25T11:03:51.333+0000|INFO|glassfish3.1.2|javax.enterprise.system.core.security.com.sun.enterprise.security|_ThreadID=12;_ThreadName=AutoDeployer;|SEC1143: Loading policy provider com.sun.enterprise.security.provider.PolicyWrapper.|#]

[#|2013-02-25T11:03:51.452+0000|INFO|glassfish3.1.2|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=12;_ThreadName=AutoDeployer;|SEC1115: Realm [admin-realm] of classtype [com.sun.enterprise.security.auth.realm.file.FileRealm] successfully created.|#]

[#|2013-02-25T11:03:51.461+0000|INFO|glassfish3.1.2|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=12;_ThreadName=AutoDeployer;|SEC1115: Realm [file] of classtype [com.sun.enterprise.security.auth.realm.file.FileRealm] successfully created.|#]

[#|2013-02-25T11:03:51.483+0000|INFO|glassfish3.1.2|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.realm|_ThreadID=12;_ThreadName=AutoDeployer;|SEC1115: Realm [certificate] of classtype [com.sun.enterprise.security.auth.realm.certificate.CertificateRealm] successfully created.|#]

[#|2013-02-25T11:03:51.498+0000|INFO|glassfish3.1.2|javax.enterprise.system.core.security.com.sun.enterprise.security|_ThreadID=12;_ThreadName=AutoDeployer;|SEC1011: Security Service(s) Started Successfully|#] 
```

因此，如果有人成功地在 CloudBees 中的 JavaEE 堆栈中定义 DataSourceRealms，我将不胜感激任何朝着正确方向发展的推动。感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T09:56:01.523

CloudBees 现在支持 Glassfish3 和 Glassfish4 堆栈上的 JaaS 身份验证和安全领域，如下所述：

*   玻璃鱼3：
    *   文档：[https ://developer.cloudbees.com/bin/view/RUN/Glassfish3_JaaS_Authentication](https://developer.cloudbees.com/bin/view/RUN/Glassfish3_JaaS_Authentication)
    *   演示应用：[https ://github.com/CloudBees-community/glassfish-clickstart](https://github.com/CloudBees-community/glassfish-clickstart)
*   玻璃鱼4：
    *   文档：[https ://developer.cloudbees.com/bin/view/RUN/Glassfish4_JaaS_Authentication](https://developer.cloudbees.com/bin/view/RUN/Glassfish4_JaaS_Authentication)
    *   演示应用：[https ://github.com/CloudBees-community/glassfish4-clickstart](https://github.com/CloudBees-community/glassfish4-clickstart)

请注意**，Glassfish3 和 Glassfish4 的 CloudBees 安全领域完全基于 JdbcRealms**，这似乎是您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T06:20:29.207

基于容器的身份验证在 CloudBees 堆栈上不可用，但由于遗留原因而在 tomcat6 上可用。首选方法是使用安全框架（spring-security 或任何其他）来检测应用程序

# highcharts - Highcharts：标记半径似乎不起作用

> ID：15066153
> 
> 赞同：0
> 
> 时间：2013-02-25T11:40:07.133
> 
> 标签：highcharts, highstock

我无法让标记半径与高库存图表一起使用。我一直在尝试使用这两个绘图选项和直接针对该系列的设置来使其工作：

`plotOptions: { series: { marker: { radius: 90 } } },`

（或见[http://jsfiddle.net/zMH7Q/](http://jsfiddle.net/zMH7Q/)）。

更改其他属性（例如标记形状）可以正常工作，但似乎忽略了对半径的任何更改。我尝试在两个情节选项中设置此选项，并直接针对该系列但无济于事。[文档（ http://api.highcharts.com/highstock#plotOptions.area.marker.radius](http://api.highcharts.com/highstock#plotOptions.area.marker.radius) ）中肯定提到了它，所以除非我做一些愚蠢的事情（很有可能），否则它应该可以工作。

任何帮助，将不胜感激 ：-）

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:55:02.050

在 HighStock 中，与 HighCharts 不同，标记的默认值是启用的：false，这是因为数据往往非常密集，标记不会为用户的数据理解增加太多价值。

您需要将代码修改为：

```
plotOptions: {
    series: {
        marker: {
            enabled: true,
            radius: 90
        }
    }
}, 
```

让标记出现。

**编辑：**如果有人遇到这个并需要它，我会保留以上内容。大卫真正想知道的是悬停期间的系列符号是否可以更改。代码是：

```
plotOptions: {
            series: {
                marker: {
                    lineColor: null,
                    states: {
                        hover: {
                            fillColor: 'white',
                            radius: 10
                        }
                    }
                }
            }
        } 
```

[直接来自http://api.highcharts.com/highcharts#plotOptions.scatter.marker.states.hover.radius](http://api.highcharts.com/highcharts#plotOptions.scatter.marker.states.hover.radius)的 Highcharts API 参考

# c# - 如何在 HttpWebRequest POST 中将对象作为参数传递？

> ID：15066156
> 
> 赞同：6
> 
> 时间：2013-02-25T11:40:09.970
> 
> 标签：c#, asp.net, rest, httpwebrequest

在这里，我从我的 Web 应用程序调用 Restful WCF 服务，但我不知道如何在这个应用程序中将对象作为参数传递。这是我的客户代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    UserInputParameters stdObj = new UserInputParameters
    {
        AssociateRefId = "323",
        CpecialLoginId = "a@gmail.com",
        PartnerId = "aaaa",
        FirstName = "aaaa",
        LastName = "bbbb",
        Comments = "dsada",
        CreatedDate = "2013-02-25 15:25:47.077",
        Token = "asdadsadasd"
    };

    string url = "http://localhost:13384/LinkService.svc/TokenInsertion";

    try
    {
        ASCIIEncoding encoding = new ASCIIEncoding();
        System.Net.WebRequest webReq = System.Net.WebRequest.Create(url);
        webReq.Method = "POST";
        webReq.ContentType = "application/json; charset=utf-8";
        DataContractJsonSerializer ser = new DataContractJsonSerializer(stdObj.GetType());
        StreamWriter writer = new StreamWriter(webReq.GetRequestStream());
        writer.Close();
        webReq.Headers.Add("URL", "http://localhost:13381/IntegrationCheck/Default.aspx");
        System.Net.WebResponse webResp = webReq.GetResponse();
        System.IO.StreamReader sr = new System.IO.StreamReader(webResp.GetResponseStream());
        string s = sr.ReadToEnd().Trim();
    }
    catch (Exception ex)
    {
    }
} 
```

还有我的服务方法：

```
 public string UserdetailInsertion(UserInputParameters userInput) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T11:44:43.650

您必须以格式解析对象并将其写入RequestStream。

你的班

```
[Serializable]
class UserInputParameters {
    "your properties etc"
}; 
```

序列化对象的代码

```
private void SendData(UserInputParameters stdObj) {
    DataContractJsonSerializer ser = new DataContractJsonSerializer(stdObj.GetType());
    StreamWriter writer = new StreamWriter(webReq.GetRequestStream());
    JavaScriptSerializer jss = new JavaScriptSerializer();

    // string yourdata = jss.Deserialize<UserInputParameters>(stdObj);
    string yourdata = jss.Serialize(stdObj);
    writer.Write(yourdata);
    writer.Close();
} 
```

这应该是诀窍。

该类`JavaScriptSerializer`位于`System.Web.Script.Serialization`可以在程序集中找到的命名空间中，`System.Web.Extensions (in System.Web.Extensions.dll)`这里是 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/bb337131.aspx](http://msdn.microsoft.com/en-us/library/bb337131.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-20T11:26:55.040

我们不能使用 C# 中的 WebRequest 类从服务器端代码将对象数据发送到远程服务器，因为我们只能将流数据发送到远程服务器，并且内存中的对象表示不是流。因此，在发送对象之前，我们需要对其进行序列化作为流，然后我们可以将其发送到远程服务器。下面是完整的代码。

```
 namespace SendData
    {
      public class SendObjectData
        {
            static void Main(string[] args)
            {

              Employee emp = new Employee();
              emp.EmpName = "Raju";
              emp.Age = 30;
              emp.Profession = "Teacher";

              POST(emp);
            }

           // This method post the object data to the specified URL.
            public static void POST(Employee objEmployee)
            {
              //Serialize the object into stream before sending it to the remote server
                MemoryStream memmoryStream = new MemoryStream();
                BinaryFormatter binayformator = new BinaryFormatter();
                binayformator.Serialize(memmoryStream, objEmployee);

              //Cretae a web request where object would be sent
                WebRequest objWebRequest = WebRequest.Create(@"http://localhost/XMLProvider/XMLProcessorHandler.ashx");
                objWebRequest.Method = "POST";
                objWebRequest.ContentLength = memmoryStream.Length;
              // Create a request stream which holds request data
                Stream reqStream = objWebRequest.GetRequestStream();
             //Write the memory stream data into stream object before send it.
                byte[] buffer = new byte[memmoryStream.Length];
                int count = memmoryStream.Read(buffer, 0, buffer.Length);
                reqStream.Write(buffer, 0, buffer.Length);

             //Send a request and wait for response.
                try
                {
                    WebResponse objResponse = objWebRequest.GetResponse();
             //Get a stream from the response.
                    Stream streamdata = objResponse.GetResponseStream();
             //read the response using streamreader class as stream is read by reader class.
                    StreamReader strReader = new StreamReader(streamdata);
                    string responseData = strReader.ReadToEnd();
                }
                catch (WebException ex) {
                    throw ex;
                }

            }
        }
   // This is an object that needs to be sent. 
        [Serializable]
        public class Employee
        {

            public string EmpName { get; set; }
            public int Age { get; set; }
            public string Profession { get; set; }

        }
    } 
```

# java - 如何在josql中求和

> ID：15066158
> 
> 赞同：0
> 
> 时间：2013-02-25T11:40:15.470
> 
> 标签：java, josql

我正在使用 JOSql 在 java 中处理数据我想在以下查询中获取值的总和

```
 q.parse ("SELECT value,planType from com.mbcl.ytd.Enrolment group by planType"); 
```

当我使用 JOSql 函数作为

```
 GroupingFunctions groupingFunctions = new GroupingFunctions();
 groupingFunctions.sum(aggregateList,"value") 
```

它给了我所有值的总和如何使用计划类型获得总和表单列表。请指导我在哪里失踪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:18:40.687

您可以使用`q.parse ("SELECT sum(value),planType from com.mbcl.ytd.Enrolment group by planType");`

# c#-4.0 - 无法从程序集“CLRviaCSharp，版本=1.0.0.0，文化=中性，PublicKeyToken=null”加载类型“MarshalByRefType”

> ID：15066161
> 
> 赞同：2
> 
> 时间：2013-02-25T11:40:52.687
> 
> 标签：c#-4.0, appdomain

**这是通过 C# 3e (Microsoft)**出现在 CLR 书中的代码， 但它在运行时出错

> 未处理 TypeLoadException 无法从程序集“CLRviaCSharp，版本=1.0.0.0，文化=中性，PublicKeyToken=null”加载类型“MarshalByRefType”。

除了方法'Main'，所有代码都是上面提到的书。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Threading;
using System.Reflection;
using System.Runtime.Remoting;

namespace CLRviaCSharp
{

    class Program
    {
        static void Main(string[] args)
        {
            Marshalling();
        }

        private static void Marshalling()
        {
            // Get a reference to the AppDomain that that calling thread is executing in
            AppDomain adCallingThreadDomain = Thread.GetDomain();
            // Every AppDomain is assigned a friendly string name (helpful for debugging)
            // Get this AppDomain’s friendly string name and display it
            String callingDomainName = adCallingThreadDomain.FriendlyName;
            Console.WriteLine("Default AppDomain’s friendly name={0}", callingDomainName);
            // Get & display the assembly in our AppDomain that contains the ‘Main’ method
            String exeAssembly = Assembly.GetEntryAssembly().FullName;
            Console.WriteLine("Main assembly={0}", exeAssembly);
            // Define a local variable that can refer to an AppDomain
            AppDomain ad2 = null;
            // *** DEMO 1: Cross-AppDomain Communication using Marshal-by-Reference ***
            Console.WriteLine("{0}Demo #1", Environment.NewLine);
            // Create new AppDomain (security & configuration match current AppDomain)
            ad2 = AppDomain.CreateDomain("AD #2", null, null);
            MarshalByRefType mbrt = null;
            // Load our assembly into the new AppDomain, construct an object, marshal
            // it back to our AD (we really get a reference to a proxy)
            mbrt = (MarshalByRefType)
            ad2.CreateInstanceAndUnwrap(exeAssembly, "MarshalByRefType");
            Console.WriteLine("Type={0}", mbrt.GetType()); // The CLR lies about the type
            // Prove that we got a reference to a proxy object
            Console.WriteLine("Is proxy={0}", RemotingServices.IsTransparentProxy(mbrt));
            // This looks like we’re calling a method on MarshalByRefType but, we’re not.
            // We’re calling a method on the proxy type. The proxy transitions the thread
            // to the AppDomain owning the object and calls this method on the real object.
            mbrt.SomeMethod();
            // Unload the new AppDomain
            AppDomain.Unload(ad2);
            // mbrt refers to a valid proxy object; the proxy object refers to an invalid AppDomain
            try
            {
                // We’re calling a method on the proxy type. The AD is invalid, exception is thrown
                mbrt.SomeMethod();
                Console.WriteLine("Successful call.");
            }
            catch (AppDomainUnloadedException)
            {
                Console.WriteLine("Failed call.");
            }

            // *** DEMO 2: Cross-AppDomain Communication using Marshal-by-Value ***
            Console.WriteLine("{0}Demo #2", Environment.NewLine);
            // Create new AppDomain (security & configuration match current AppDomain)
            ad2 = AppDomain.CreateDomain("AD #2", null, null);
            // Load our assembly into the new AppDomain, construct an object, marshal
            // it back to our AD (we really get a reference to a proxy)
            mbrt = (MarshalByRefType)
            ad2.CreateInstanceAndUnwrap(exeAssembly, "MarshalByRefType");
            // The object’s method returns a COPY of the returned object;
            // the object is marshaled by value (not be reference).
            MarshalByValType mbvt = mbrt.MethodWithReturn();
            // Prove that we did NOT get a reference to a proxy object
            Console.WriteLine("Is proxy={0}", RemotingServices.IsTransparentProxy(mbvt));
            // This looks like we’re calling a method on MarshalByValType and we are.
            Console.WriteLine("Returned object created " + mbvt.ToString());
            // Unload the new AppDomain
            AppDomain.Unload(ad2);
            // mbvt refers to valid object; unloading the AppDomain has no impact.
            try
            {
                // We’re calling a method on an object; no exception is thrown
                Console.WriteLine("Returned object created " + mbvt.ToString());
                Console.WriteLine("Successful call.");
            }
            catch (AppDomainUnloadedException)
            {
                Console.WriteLine("Failed call.");
            }

            // DEMO 3: Cross-AppDomain Communication using non-marshalable type ***
            Console.WriteLine("{0}Demo #3", Environment.NewLine);
            // Create new AppDomain (security & configuration match current AppDomain)
            ad2 = AppDomain.CreateDomain("AD #2", null, null);
            // Load our assembly into the new AppDomain, construct an object, marshal
            // it back to our AD (we really get a reference to a proxy)
            mbrt = (MarshalByRefType)
            ad2.CreateInstanceAndUnwrap(exeAssembly, "MarshalByRefType");
            // The object’s method returns an non-marshalable object; exception
            NonMarshalableType nmt = mbrt.MethodArgAndReturn(callingDomainName);
            // We won’t get here...
        }
    }

    // Instances can be marshaled-by-reference across AppDomain boundaries
    public sealed class MarshalByRefType : MarshalByRefObject
    {
        public MarshalByRefType()
        {
            Console.WriteLine("{0} ctor running in {1}",
            this.GetType().ToString(), Thread.GetDomain().FriendlyName);
        }
        public void SomeMethod()
        {
            Console.WriteLine("Executing in " + Thread.GetDomain().FriendlyName);
        }
        public MarshalByValType MethodWithReturn()
        {
            Console.WriteLine("Executing in " + Thread.GetDomain().FriendlyName);
            MarshalByValType t = new MarshalByValType();
            return t;
        }
        public NonMarshalableType MethodArgAndReturn(String callingDomainName)
        {
            // NOTE: callingDomainName is [Serializable]
            Console.WriteLine("Calling from ‘{0}’ to ‘{1}’.",
            callingDomainName, Thread.GetDomain().FriendlyName);
            NonMarshalableType t = new NonMarshalableType();
            return t;
        }
    }
    // Instances can be marshaled-by-value across AppDomain boundaries
    [Serializable]
    public sealed class MarshalByValType : Object
    {
        private DateTime m_creationTime = DateTime.Now; // NOTE: DateTime is [Serializable]
        public MarshalByValType()
        {
            Console.WriteLine("{0} ctor running in {1}, Created on {2:D}",
            this.GetType().ToString(),
            Thread.GetDomain().FriendlyName,
            m_creationTime);
        }
        public override String ToString()
        {
            return m_creationTime.ToLongDateString();
        }
    }
    // Instances cannot be marshaled across AppDomain boundaries
    // [Serializable]
    public sealed class NonMarshalableType : Object
    {
        public NonMarshalableType()
        {
            Console.WriteLine("Executing in " + Thread.GetDomain().FriendlyName);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-04T07:08:57.147

当您使用AppDomain.CreateInstanceAndUnwrap 方法时，您应该将类​​型的全名传递给typeName 参数。所以，更换

```
ad2.CreateInstanceAndUnwrap(exeAssembly, "MarshalByRefType"); 
```

和

```
ad2.CreateInstanceAndUnwrap(exeAssembly, typeof(MarshalByRefType).FullName); 
```

# ios - NSPredicate 在 fecthRequest 与过滤数组时返回不同的结果

> ID：15066162
> 
> 赞同：2
> 
> 时间：2013-02-25T11:40:58.693
> 
> 标签：ios, cocoa-touch, sqlite, core-data, nspredicate

我有一个 Core Data SQLite 类型存储，我的实体中名为 Article 的属性之一是一个名为 markAsArchived 的字符串属性。

我想做的是设置一个获取请求来获取前 100 个 markAsArchived 不是 YES（字符串值，不是 bool）的项目。

所以，这是我用来设置获取请求的代码，它返回 0 个结果。

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Article"];
fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"date" ascending:NO]];
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"markAsArchived != 'YES'"]];
[fetchRequest setFetchLimit:100];
NSError *error = nil;
self.articles = [NSMutableArray arrayWithArray:[self.managedObjectContext executeFetchRequest:fetchRequest error:&error]];

if (error) {
    //Handle the error
    NSLog(@"%@", error);
} 
```

但是，如果我采用完全相同的谓词，将其从 fetch 请求中删除，而是使用它来过滤 fetch 请求返回的数组，我会得到一些想要的结果。这是我用来执行此操作的代码。

```
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Article"];
fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"date" ascending:NO]];
[fetchRequest setFetchLimit:100];
NSError *error = nil;
self.articles = [NSMutableArray arrayWithArray:[self.managedObjectContext executeFetchRequest:fetchRequest error:&error]];

if (error) {
    //Handle the error
    NSLog(@"%@", error);
}
self.articles = [NSMutableArray arrayWithArray:[self.articles filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"markAsArchived != 'YES'"]]]; 
```

现在，我的问题是，由于我正在过滤包含 100 个提取项的数组，因此过滤后的数组通常最终小于 100，这不是我想要的。

我的猜测是，在使用谓词设置获取请求时，我正在做一些令人难以置信的事情。关于我可能做错了什么的任何指示？

**PS：**将 markAsArchived 更改为 bool 属性而不是 string 属性不是一种选择。

**更新：**我查看了以下问题，但似乎没有一个对我有帮助。

[NSPredicate 使用 Fetch 请求不返回任何结果，适用于数组过滤](https://stackoverflow.com/questions/5405897/nspredicate-returns-no-results-with-fetch-request-works-with-array-filtering)

[谓词适用于数组但不适用于 fetchRequest](https://stackoverflow.com/questions/5107452/predicate-works-for-array-but-not-for-fetchrequest)

**更新（2013 年 3 月 1 日）：***据我所知，executeFetchRequest 返回一个空数组，而不是 nil。我仔细检查以确定。

这是我使用启动参数得到的调试输出......

```
2013-03-01 20:29:48.218 PROJECTNAME[753:907] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZCONTENT, t0.ZDATE, t0.ZENCLOSURELENGHT, t0.ZENCLOSURETYPE, t0.ZENCLOSUREURL, t0.ZFULLTEXT, t0.ZIDENTIFIER, t0.ZIMAGE, t0.ZLINK, t0.ZMARKASARCHIVED, t0.ZREAD, t0.ZREADPOSITION, t0.ZSUMMARY, t0.ZTITLE, t0.ZUPDATED, t0.ZFEED FROM ZARTICLE t0 WHERE  t0.ZMARKASARCHIVED <> ? ORDER BY t0.ZDATE DESC LIMIT 119
2013-03-01 20:29:48.221 PROJECTNAME[753:907] CoreData: details: SQLite bind[0] = "YES"
2013-03-01 20:29:48.287 PROJECTNAME[753:907] CoreData: annotation: sql connection fetch time: 0.0689s
2013-03-01 20:29:48.289 PROJECTNAME[753:907] CoreData: annotation: fetch using NSSQLiteStatement <0x1f218d70> on entity 'Article' with sql text 'SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZCONTENT, t0.ZDATE, t0.ZENCLOSURELENGHT, t0.ZENCLOSURETYPE, t0.ZENCLOSUREURL, t0.ZFULLTEXT, t0.ZIDENTIFIER, t0.ZIMAGE, t0.ZLINK, t0.ZMARKASARCHIVED, t0.ZREAD, t0.ZREADPOSITION, t0.ZSUMMARY, t0.ZTITLE, t0.ZUPDATED, t0.ZFEED FROM ZARTICLE t0 WHERE  t0.ZMARKASARCHIVED <> ? ORDER BY t0.ZDATE DESC LIMIT 119' returned 0 rows with values: ( )
2013-03-01 20:29:48.291 PROJECTNAME[753:907] CoreData: annotation: total fetch execution time: 0.0734s for 0 rows. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:58:57.793

我偶然发现了同样的问题......在我的情况下，它与构建谓词字符串有关。如果你使用引号，你需要小心。在您的代码中，我看到：

```
[NSPredicate predicateWithFormat:@"markAsArchived != 'YES'"]; 
```

但实际上可能需要：

```
[NSPredicate predicateWithFormat:@"markAsArchived != YES"]; 
```

我有同样的问题是 NSNumber 被包裹在引号中。

哈利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:21:04.380

假设您需要该属性`markedAsArchived`是一个字符串（您会同意这是糟糕的设计），那么获取请求的正确谓词是：

```
[NSPredicate predicateWithFormat:@"markedAsArchived != %@", @"YES"] 
```

在谓词格式字符串中将常量替换为文字是不安全的。以上是检查此属性的标准方法。

# vba - VBA 函数调用：Excel 按钮与 VBS 调用

> ID：15066170
> 
> 赞同：1
> 
> 时间：2013-02-25T11:41:21.200
> 
> 标签：vba, vbscript

我正在努力使用由按钮调用的 VBA Sub。此 Sub 从硬编码文件路径打开一个 Configuration.xls Excel 电子表格。一个 MsgBox 告诉我有关当前工作区的信息 - 工作区从当前文件更改为刚刚打开的文件。这里一切都很好。

我现在想从调用 VBS 的外部批处理执行此子，该 VBS 调用 VBA 子。打开 Configuration.xls 文件后的工作区保持不变，不会更改为 Configuration.xls。此外，当通过 VBS 调用 Sub 时，该函数会执行两次 - 不知道为什么。

所以我的问题是 - 为什么我在两种调用机制之间有不同的行为？

我简化了下面的代码，因为它显示了与我更复杂的真实代码相同的行为。

```
Sub ReadConfiguration()

MsgBox ActiveWorkbook.Name
FileExcel = "D:\_Trash\VBA_VBS\Configuration.xls"
Workbooks.Open Filename:=FileExcel, ReadOnly:=True, IgnoreReadOnlyRecommended:=True
strFileName = FunctionGetFileName(FileExcel)
MsgBox ActiveWorkbook.Name

On Error Resume Next
Set wBook = Workbooks(strFileName)
If Err Then
    Exit Sub
End If
ActiveWorkbook.Close savechanges:=False
End Sub
'*****************************************************
Function FunctionGetFileName(FullPath As Variant)
Dim StrFind As String
Do Until Left(StrFind, 1) = "\"
    iCount = iCount + 1
    StrFind = Right(FullPath, iCount)
    If iCount = Len(FullPath) Then Exit Do
Loop
FunctionGetFileName = Right(StrFind, Len(StrFind) - 1)
End Function
'***************************************************** 
```

VBS 看起来像这样

```
Dim args, objExcel
Set args = WScript.Arguments
Set objExcel = CreateObject("Excel.Application")
objExcel.Workbooks.Open args(0)
objExcel.Visible = False
objExcel.Run "Module1.ReadConfiguration()"
objExcel.ActiveWorkbook.Close(0)
objExcel.Quit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:24:41.237

我只是想让你知道这个问题的解决方案，虽然我不能完全解释。解决方案是去掉宏调用后面的“()”。这会导致 VBS 脚本运行两次并且工作簿“范围”混淆。

如此简单的解决方案，但仍然是一个问题，为什么 - 添加“（）”时我还要告诉函数什么？

谢谢你的帮助！

疯狂的马特

# asp.net - 日历突出显示日期...如何更改颜色？

> ID：15066179
> 
> 赞同：1
> 
> 时间：2013-02-25T11:42:17.120
> 
> 标签：asp.net, calendar

```
<asp:Calendar ID="calendarToDisplayWorkSiteDates" runat="server"> 
```

绑定到后面代码中的列表 - 突出显示列表中的所有日期。（在屏幕上）

当用户单击某个日期时，页面会重新刷新，但用户刚刚选择的日期会更改为与突出显示的日期（通过列表）相同的颜色“银色”。

无论如何要更改颜色，以便用户可以知道他们单击了哪个日期以及哪些日期通过列表突出显示。

谢谢

尝试：BackColor="Red" 但不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:53:53.467

尝试`DayRender`活动（[链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.dayrender%28v=vs.80%29.aspx)）

```
protected void cal_DayRender(object sender, DayRenderEventArgs e)
{
  if (e.Day.IsToday)
    e.Cell.BackColor = Color.Red;
  else if (e.Day.IsWeekend)
    e.Cell.BackColor = Color.Yellow;
  else if (e.Day.IsSelected)
    e.Cell.BackColor = Color.Orange;
  // else if day exists in your list
  // Color the cell in different color
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:48:07.243

使用以下代码更改所选日期的颜色。

```
 calendarToDisplayWorkSiteDates.SelectedDayStyle.BackColor = System.Drawing.Color.Green; 
```

# php - Magento：将多个添加到购物车按钮和数量字段添加到产品视图页面

> ID：15066182
> 
> 赞同：2
> 
> 时间：2013-02-25T11:42:28.550
> 
> 标签：php, magento, e-commerce

我目前正在使用以下内容在产品视图页面上对名称相似的产品进行分组：

```
 $model =Mage::getModel('catalog/product');
    $collection = $model->getCollection();;

    $currentProduct = Mage::registry('current_product');
    $collection->addAttributeToFilter('name', $currentProduct->getName());

    echo "<table>";
    foreach($collection as $product){
    echo '<tr>';
    echo '<td>'.$product->getSKU().'</td>';
    echo '<td>'.$product->getName().'</td>';
    echo '<td><a href="'.$product->getProductUrl().'">VIEW THIS PRODUCT</td>';
    echo '</tr>';

    }
    echo "</table>"; 
```

但是，我需要用添加到购物车按钮和数量输入字段替换“查看此产品”链接。这甚至可以通过仅编辑 product/view.phtml 来实现吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:53:32.860

假设您只添加简单的产品而没有任何选项

```
.....
foreach($collection as $product){
  <form action="/path/to/app/checkout/cart/add" method="get">
   <input type="hidden" name="product" value="<?php echo $product->getId() ?>" />

    echo $product->getSKU();
    echo $product->getName();

   <input type="text" name="qty" value="1" />
   <input type="submit" name="submit" value="Add to cart" />
  </form>
} 
```

请参阅[通过查询字符串将产品添加到购物车](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/catalog/adding_a_product_to_the_cart_via_querystring)

# amazon-web-services - 防止图片盗链但允许直接访问

> ID：15066183
> 
> 赞同：1
> 
> 时间：2013-02-25T11:42:33.433
> 
> 标签：amazon-web-services, amazon-s3

我使用 Amazon S3 存储我网站的图像。我有一个存储桶策略，可以阻止其他网站盗链我的图片。

为了让它发挥作用，我在 S3 中将文件权限设置为“私有”，然后存储桶策略只允许访问我的网站。

这很好用，但是因为文件是“私有的”，所以我不能直接在浏览器中查看图像，这是我想要允许的。

这是政策

```
{
  "Version": "2008-10-17",
  "Id": "preventHotLinking",
  "Statement": [
    {
      "Sid": "1",
      "Effect": "Allow",
      "Principal": {
        "AWS": "*"
      },
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::mybucket/*",
      "Condition": {
        "StringLike": {
          "aws:Referer": [
            "http://mydomain.com/*",
            "http://www.mydomain.com/*"
          ]
        }
      }
    }
  ]
} 
```

所以，总结一下：

*   文件本身设置为私有
*   上述政策允许图像显示在域“mydomain.com”的页面上，但不允许显示在“someoneelsesdomain.com”的页面上

不过，这也会阻止直接访问，因此将[http://jbtestyt.s3.amazonaws.com/archie.jpg](http://jbtestyt.s3.amazonaws.com/archie.jpg)粘贴到浏览器中不会显示图像（因为它是私有的）。

但我希望显示图像以供直接访问。

可能的解决方案是公开文件，然后拒绝除我列出的所有推荐人之外的所有推荐人？但我不确定，也找不到类似的东西。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:55:38.583

我推断您正在寻找“本机”S3 解决方案，所以就到这里。仔细想想，盗链本质上就是“直接访问”文件。因此，“文件本身设置为私有”将始终确保（至少在 AWS 上）无论如何您都无法直接访问它。这是在 S3 上设计的。您建议将推荐人列入白名单可能是您单独使用 S3 完成此任务的唯一直接方法。

# c# - StreamReader 无法从已处置的对象中读取

> ID：15066188
> 
> 赞同：1
> 
> 时间：2013-02-25T11:42:48.827
> 
> 标签：c#, streamreader

我正在使用`StreamReader`，但如果尝试使用两个`StreamReader`-objects 从同一流中读取，我会收到错误消息 I `can't read from dispose object (reader3.ReadLine)`。由于我没有处理任何对象，我做错了什么？

```
Stream responseStream2;
FtpWebResponse ftpResponse2;

string casefile = CNCElement.ID_CASE_TEST_FILE;
string casepath;
if (FileManager.PathCombine(result, lock_root_folder, casefile, out casepath) == false)
    return false;
if (fm.DownloadFtp(result, casepath, out responseStream2, out ftpResponse2) == false)
    return false;

StreamReader reader2 = new StreamReader(responseStream2);
StreamReader reader3 = new StreamReader(responseStream2);
byte[] contents=null;
//if cycle is not present update case file
//if cycle is present, case file is already correct
if (reader2.ReadToEnd().Contains(cycle) == false)
{
    byte seekcase = CNCElement.ID_CASE.Value;
    int casecount = 1;
    string line;
    using (MemoryStream ms = new MemoryStream())
    {
        while ((line = reader3.ReadLine()) != null
              || casecount <= seekcase)
        {
            if (line.Contains("\"\"") == true)
            {
                if (casecount == seekcase)
                    line = line.Replace("\"\"", "\"" + cycle + "\"");
            }
            byte[] app = StrToByteArray(line);
            ms.Write(app, 0, line.Length);
            contents = ms.ToArray();
        }
    }
}

if (reader2 != null)
    reader2.Close();
if (ftpResponse2 != null)
    ftpResponse2.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:47:02.127

当您调用`ReadToEnd()`底层蒸汽时，所有内容都被读入内存并且您已经走到了尽头。

每次调用该函数时`ReadLine()`，底层流都会移动到下一行。

这意味着当您的应用程序到达`Reader3.ReadLine()`循环时，因为您已经到达文件末尾，读取器将失败。

如果预期的文件流不是太大，我建议您将`ReadToEnd()`调用的结果分配给一个变量，并对该变量执行后续操作。

如果流很大，请尝试重置`Position`属性（如果支持 -[请参阅文档](http://msdn.microsoft.com/en-GB/library/system.io.stream.position.aspx)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T11:49:22.477

当你读到结尾时，`reader2`你实际上是在读到底层流的结尾（`responseStream2`）。此时，从该流中的另一次读取将失败。

虽然可以预料到特定的异常，但将相同的流包装在不同的流中`StreamReaders`会做一些奇怪的事情，因为这是一件很奇怪的事情。

如果您需要两次读取流，则需要使用支持将其位置重置为开头（即随机访问）的流，然后为第二次读取创建一个新的读取器；或者（在这种情况下似乎很可能：我怀疑任何网络流都支持随机访问）自己缓冲流内容。

# sql - SQL 将行合二为一

> ID：15066193
> 
> 赞同：0
> 
> 时间：2013-02-25T11:43:07.740
> 
> 标签：sql, tsql

```
| fk | red | brown | green |
|1337|  1  |   0   |   0   |
|1337|  0  |   1   |   0   |
|1337|  0  |   0   |   1   | 
```

在 tSql 中，我如何将这些作为一行返回，以说明 1337 在某些时候是红色、棕色和绿色？

```
| fk | red | brown | green |
|1337|  1  |   1   |   1   | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:45:24.783

使用`Max`功能`Grouping by fk`

```
select fk, max(red) red, max(brown) brown, max(green) green
from yourTable
group by fk 
```

如果*`red`*, *`brown`*&*`green`*是*`bit type`*字段然后尝试如下

```
select fk, max(red+0) red, max(brown+0) brown, max(green+0) green
from yourTable
group by fk 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T11:45:31.573

通过分组：

```
Select  fk , 
        Max(red) as red,
        Max(brown) as brown, 
        Max(green) as green 
FROM    myTableName
GROUP   BY fk 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T11:45:40.080

像这样：

```
SELECT  fk
       ,MAX(red)
       ,MAX(brown)
       ,MAX(green)
FROM   yourtable
GROUP  BY fk 
```

# asp.net - 在 ASP.Net 页面中播放视频

> ID：15066202
> 
> 赞同：0
> 
> 时间：2013-02-25T11:43:49.067
> 
> 标签：asp.net, sql-server-2008

我想在我的 asp.net 页面中播放视频。我正在使用代码

```
<object classid="clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6" id="Player1" width="440" height="379">
          <param name="URL" value="~/DBVideo/citibank.mpeg">
          <param name="http://">
          <param name="AutoStart" value="1">
          <param name="ShowControls" value="">
          <param name="ShowStatusBar" value="1">
          <param name="ShowDisplay" value="1">
          <param name="stretchToFit" value="1">
              <param name="volume" value="32" />
              <embed runat="server" id="Video"
              type="application/x-mplayer2" pluginspage="http://www.microsoft.com/Windows/Downloads/Contents/MediaPlayer/" 
             width="440" height="379" src="~/DBVideo/citibank.mpeg"
              filename="~/DBVideo/citibank.mpeg" autostart="1" showcontrols="1" showstatusbar="1" showdisplay="1">
              </embed>
       </object> 
```

现在只有媒体播放器符号来了，但视频没有播放。

有人可以帮我解决问题吗？？如果我想从 SQL Server 2008 数据库（varbinary 字段）播放视频，我会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:19:35.773

如果你被允许使用 HTML5，你可以使用 video 标签

```
<video width="320" height="240" controls>
    <source src="movie.mp4" type="video/mp4">
    <source src="movie.ogg" type="video/ogg">
    <source src="movie.webm" type="video/webm">
    Your browser does not support the video tag.
</video> 
```

至于从 sql 获取视频：您可以使用从 SQL 中提取文件并可能缓存它的 http 处理程序[http://msdn.microsoft.com/en-us/library/46c5ddfy%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/46c5ddfy%28v=vs.100%29.aspx)

# javascript - WebSql：如果达到大小限制，事务会回滚

> ID：15066203
> 
> 赞同：0
> 
> 时间：2013-02-25T11:44:01.243
> 
> 标签：javascript, web-sql

我刚刚注意到，如果您将数据插入 WebSQL，并且达到最大大小限制，iPad 会弹出用户警报，询问您是否要增加大小。但是，即使您批准，当前事务也会回滚。我想知道是否可以采取任何措施来防止回滚，所以您可以继续吗？

[这](http://jsfiddle.net/994Jd/)是测试代码。实际执行回滚的代码是

```
db.transaction(function (tx) {
    ... // create the table // ...
    for( var i = 0; i < 10000; i++ ) {
        insertData(tx) ;
    }
},
function() {
    console.log("Transaction error -> rollback") ;
},
function() {
    console.log("transaction is ready") ;
}) ; 
```

有什么建议么 ？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T13:17:47.283

[我的博客文章](http://oligofren.wordpress.com/2013/08/06/dealing-with-quotas-in-websql-on-iphone/)中详细介绍了一种使用 WebSQL 处理空间不足情况的方法。基本上，你没有权力拒绝浏览器提示用户，所以你必须处理这种情况。简单的做法就是通知用户您需要更多空间，然后强制重新提示增加大小，其中事务的成功回调调用您的原始代码。

如果您真正想说的是您想保持所有代码运行，直到空间不足，您可以保留一个外部索引，说明在事务回滚之前您设法走了多远，然后重做事务之前的限制。这样，所有可能塞进的数据都会在那里（其余的永远不会被写入）。

# jquery - 如何获取单击的单选按钮的值？

> ID：15066218
> 
> 赞同：1
> 
> 时间：2013-02-25T11:45:09.940
> 
> 标签：jquery

我的表单中有许多从数据库中获取的单选按钮：

```
 ... <tr>';
                        for ( $i = $data["figure"]["cnt"] / 2; $i < $data["figure"]["cnt"]; $i++) {
                         $tabFields[4]['html'] .= '<td align="center">
                            <img src="' . HTTP_IMAGES .'figures/' . $data["figure"][$i]["fig_image"] . '" width="60px" />
                        </td>';

                        }
                    $tabFields[4]['html'] .= '  
                    </tr>
                    <tr>' ;

                        for ( $i = $data["figure"]["cnt"] / 2; $i < $data["figure"]["cnt"]; $i++) {
                        $tabFields[4]['html'] .= '
                        <td align="center">     
                        <input type="radio" name="fig_code" value="' . $data["figure"][$i]["fig_code"] . '"  />
                        </td>';

                        }
                        $tabFields[4]['html'] .= '
                    </tr> 
```

我想知道被点击的收音机的价值。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:47:17.163

> 我想知道被点击的收音机的价值

如果我正确理解了这个问题并*单击*了= *checked*，那么你想要这个：

```
$('input[type="radio"]:checked').val() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T11:48:18.777

通过使用 val();

```
var selected = $('input[type="radio"]:checked').val() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T11:48:38.277

像这样的东西

```
$(document).ready(function(){
      $("input[type='radio']:checked").val();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T11:49:10.900

如果您仅在页面加载后获取所选单选按钮的值，请尝试此操作。

```
$(document).ready(function(){
    var selected = $('input:radio:checked').val();
}); 
```

如果你想获取选中单选按钮的值，只要有变化，你可以试试这个：

```
$(document).ready(function(){
    $('input:radio').change(function(){
        var selected = $('input:radio:checked').val();
    });
    var selected = $('input:radio:checked').val();
}); 
```

# android - 从 Android 设备的图库应用中选择图像

> ID：15066222
> 
> 赞同：0
> 
> 时间：2013-02-25T11:45:24.300
> 
> 标签：android, android-intent, gallery

在我的 android 应用程序中，我实现了从图库中选择图像的功能。为此，我早些时候正在这样做-

```
Intent pickImageIntent = new Intent(Intent.ACTION_GET_CONTENT);
pickImageIntent.setType("image/*");
startActivityForResult(pickImageIntent, GALLERY_REQUEST_CODE); 
```

通过这样做，会显示一个对话框，其中包含所有可用的图像源应用程序（如 Dropbox，包括 Native Gallery 应用程序），并要求选择一个。然后我改为

```
Intent pickImageIntent = new   Intent(Intent.ACTION_PICK,
android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
pickImageIntent.setType("image/*");
startActivityForResult(pickImageIntent, GALLERY_REQUEST_CODE); 
```

通过这样做，大多数应用程序都没有被显示，但仍然有一些像 Picasa 被显示。我只想从设备的本机图库应用程序中选择图像，或者我们可以说从设备的内部或外部存储器而不是任何第三方应用程序。

如果有人对此有解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:50:11.457

> 仅从图库中选择图像

```
Intent pickImageIntent = new Intent(Intent.ACTION_PICK);
pickImageIntent.setType("image/*"); 
startActivityForResult(pickImageIntent, GALLERY_REQUEST_CODE); 
```

# java - '字段列表'中的java休眠未知列''

> ID：15066227
> 
> 赞同：19
> 
> 时间：2013-02-25T11:45:42.867
> 
> 标签：java, hibernate

我需要帮助。

当我使用`getAllStreets()`方法时，我在 HQL 中有错误：

```
org.hibernate.exception.SQLGrammarException: Unknown column 'this_1_.houses_id' in 'field list' 
```

我想他必须`this_1_id`改写`this_1_.houses_id`

可能是我做错了实体和关系吗？

2 个实体 - 房屋和街道

ER - 型号：

桌街

*   ID
*   姓名
*   Houses_id

餐桌屋

*   ID
*   姓名

我的课程：

街道

```
@Entity
@Table(name="Streets")
public class Street {
    private Long id;
    private String name;
    private Long houses_id;
    private House house;
    public Street(){}    
    @Id
    @GeneratedValue(generator="increment")
    @GenericGenerator(name="increment", strategy="increment")
    @Column(name="id")
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }
    @Column(name="name")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    @ManyToOne
    @JoinTable(name="Houses", joinColumns = @JoinColumn(name="id"), inverseJoinColumns=@JoinColumn(name="houses_id"))
    public House getHouse() {
        return house;
    }
    public void setHouse(House house) {
        this.house = house;
    }
    @Column(name="houses_id")
    public Long getHouses_id() {
        return houses_id;
    }
    public void setHouses_id(Long houses_id) {
        this.houses_id = houses_id;
    }
} 
```

房子

```
@Entity
@Table(name="Houses")
public class House {

    private Long id;
    private String name;
    public House(){}

    @Id
    @GeneratedValue(generator = "increment")
    @GenericGenerator(name="increment", strategy="increment")
    @Column(name="id")
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }
    @Column(name="name")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

我的 DAOIMP：

StreetDAOImp：

```
public class StreetDAOImpl implements StreetDAO {
    @Override
    public void addStreet(Street street) throws SQLException {
        // TODO Auto-generated method stub
        Session session = null;
        try {
            session = HibernateUtil.getSessionFactory().openSession();
            session.beginTransaction();

            session.save(street);
            session.getTransaction().commit();
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
        finally{
            if(session != null && session.isOpen()){
                session.close();
            }
        }
    }
    @Override
    public Collection getAllStreets() throws SQLException {
        // TODO Auto-generated method stub
        Session session = null;
        List<Street> streets = new ArrayList<Street>(); 
        try {
            session = HibernateUtil.getSessionFactory().openSession();

            streets = session.createCriteria(Street.class).list();
            //Query q = session.createQuery("select str from com.ff.model.Street str join str.houses h where h.id = str.houses_id");
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
        return streets;
    }
} 
```

HouseDAOImpl：

```
public class HouseDAOImpl implements HouseDAO {

    @Override
    public void addHouse(House house)throws SQLException {
        // TODO Auto-generated method stub
        Session session = null;
        try {
            session = HibernateUtil.getSessionFactory().openSession();
            session.beginTransaction();
            session.save(house);
            session.getTransaction().commit();
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
        finally{
            if(session != null && session.isOpen()){
                session.close();
            }
        }
    }

    @Override
    public Collection getAllHouses() throws SQLException {
        // TODO Auto-generated method stub
        Session session = null;
        List<House> houses = new ArrayList<House>();

        try {
            session = HibernateUtil.getSessionFactory().openSession();
            houses = session.createCriteria(House.class).list();
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
         finally {
              if (session != null && session.isOpen()) {
                session.close();
              }

    }
    return houses;
}} 
```

错误：

```
log4j:WARN 找不到记录器 (org.jboss.logging) 的附加程序。
log4j:WARN 请正确初始化 log4j 系统。
休眠：选择this_.id 作为id1_1_，this_.houses_id 作为houses2_1_1_，this_.name 作为name1_1_，this_1_.houses_id 作为houses3_0_1_，house2_.id 作为id0_0_，house2_.name 作为name0_0_ 从Streets this_left outer join Houses this_1_ on this_.id =this_1_.id 在 this_1_.houses_id=house2_.id 上左外连接 Houses house2_
org.hibernate.exception.SQLGrammarException：“字段列表”中的未知列“this_1_.houses_id”
    在 org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:82)
    在 org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    在 org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    在 org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    在 org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    在 org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    在 $Proxy14.executeQuery（未知来源）
    在 org.hibernate.loader.Loader.getResultSet(Loader.java:2031)
    在 org.hibernate.loader.Loader.executeQueryStatement（Loader.java:1832）
    在 org.hibernate.loader.Loader.executeQueryStatement（Loader.java:1811）
    在 org.hibernate.loader.Loader.doQuery(Loader.java:899)
    在 org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:341)
    在 org.hibernate.loader.Loader.doList(Loader.java:2516)
    在 org.hibernate.loader.Loader.doList(Loader.java:2502)
    在 org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2332)
    在 org.hibernate.loader.Loader.list(Loader.java:2327)
    在 org.hibernate.loader.criteria.CriteriaLoader.list（CriteriaLoader.java:124）
    在 org.hibernate.internal.SessionImpl.list(SessionImpl.java:1621)
    在 org.hibernate.internal.CriteriaImpl.list（CriteriaImpl.java:374）
    在 com.ff.DAO.StreetDAOImpl.getAllStreets(StreetDAOImpl.java:48)
    在 FFMain.main(FFMain.java:58)
引起：com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：“字段列表”中的未知列“this_1_.houses_id”
    在 sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    在 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    在 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    在 java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    在 com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
    在 com.mysql.jdbc.Util.getInstance(Util.java:381)
    在 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1030)
    在 com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
    在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3491)
    在 com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3423)
    在 com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
    在 com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
    在 com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542)
    在 com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734)
    在 com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1885)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    在 java.lang.reflect.Method.invoke(Method.java:597)
    在 org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 16 更多

```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-29T02:20:29.210

请确保您调用的表具有正确的列。我遇到了问题，我发现映射的域列在数据库中不匹配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T12:19:19.987

看看这段代码：

```
@JoinTable(name="Houses", joinColumns = @JoinColumn(name="id"), inverseJoinColumns=@JoinColumn(name="houses_id")) 
```

我不确定你想在这里实现什么，但[JoinTable](http://docs.oracle.com/javaee/5/api/javax/persistence/JoinTable.html)通常用于解决与中间表的多对多关系。因此，此代码意味着您有`Houses`带有`id`和`houses_id`列的表。错误消息说表中没有`houses_id`（`Houses`这对我来说听起来很合乎逻辑）
也许您应该尝试 ManyToOne 和 JoinColumn 代替？例如：

```
@JoinColumn(name="house_id") 
```

或者`houses_id`如果那是您在街道表中的外键。如果这真的是多对一的关系，复数听起来很奇怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-05T10:48:01.777

我注意到，当我使用像 userName 或 bloodGroup 这样的变量名时，它会出现错误“由：java.sql.SQLSyntaxErrorException：'字段列表'中的未知列'user0_.blood_group'”为了克服这个问题，请更改变量名比如用户名或blood_Group。我希望它会得到例外的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-24T12:03:48.450

还要检查你班级上的 getter 和 setter 名称，都必须相同

```
 public String getNome() {//wrong Nome
        return name;
    }

    public void getName(String name) {//right
        this.name = name;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-09T09:56:30.443

我知道有一个公认的答案。我想为在此页面上遇到相同问题的任何人提一个替代答案 - 字段列表中的未知列。

当我通过映射查询 UserSurveyLog（两个表之间有共同的 SurveyID）时，我试图获取调查详细信息（来自调查表）

UserSurvey 表中的映射

```
@OneToOne(fetch = FetchType.EAGER)
@JoinColumn(referencedColumnName = "SurveyID")
private Survey survey;

public Survey getSurvey() {    return survey;  }

public void setSurvey(Survey survey) {   this.survey = survey;  }

public Integer getUserSurveyLogID() {
    return userSurveyLogID;
} 
```

看看我收到的这个错误

> Hibernate：插入 hifiniteDB.UserSurveyLog（CompletedDate、CreatedByUserName、CreatedDate、ExpiryDate、LastDeliveredDate、ModifiedByUserName、ModifiedDate、OrgNodeID、ProgramUserID、RootOrgNodeID、survey_SurveyID、SurveyID、SurveyStatus、SurveyTriggerID、SurveyTriggerType、UserDiagnosisID、UserID）值（？，？，？， ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 2019-10-09 14:39:45.722 [https-jsse-nio-8443-exec-3 ] 错误 ohejdbc.spi.SqlExceptionHelper -“字段列表”中的未知列“survey_SurveyID”

观察我在调查表上所做的映射添加了survey_SurveyID。不知道为什么只是进行提取将此列添加到本应独立的 UserSurvey Log 上的插入中。

我解决这个问题的方法是在@join 列上添加一个 insertable=false, updatable = false 。

```
@OneToOne(fetch = FetchType.EAGER)
@JoinColumn(referencedColumnName = "SurveyID", insertable = false,updatable = false)
private Survey survey; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-04-09T05:14:31.680

只需检查 POJO 中的变量名称和数据库中提供的名称。当它们不相同时，将引发此错误。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-06-21T03:30:06.347

请检查您的数据库是否包含所有表。如果表中缺少任何表或属性，请将它们添加到您的数据库并重新添加您的休眠映射文件。我以这种方式修复了这个错误。我的数据库的两个表中缺少 2 个属性，一旦添加它们并重新添加休眠，错误就修复了。

# delphi - 当 TabPosition 为 tpLeft 时，TPageControl 选项卡显示错误的颜色和样式

> ID：15066228
> 
> 赞同：2
> 
> 时间：2013-02-25T11:45:43.023
> 
> 标签：delphi, delphi-xe2

首先，我制作了一个新表格并制作了它的颜色`clWhite`。然后，我加入了一个`TPageControl`并添加了 2 个新页面。一切都很好，一切的背景都是白色的（不活动的标签页眉除外）。但是，然后在页面控件上，我将属性更改`TabPosition`为`tpLeft`并且选项卡标题更改为默认窗口颜色，而其他所有内容都保持为白色。

`TabPosition = tpTop`

![顶部的标签](../Images/3dc392a9a360e7ff08094ce7be181bee.png)

`TabPosition = tpLeft`

![左侧标签](../Images/6e4982776764cfb6c3f5848f2cab6491.png)

当标签位于左侧时，有什么方法可以使其正确显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:58:05.633

内置控件中没有任何内容可让您更改此行为。事实上，您观察到的行为是底层 Windows 控件的设计行为。您可以通过使用该样式创建原始 Win32`SysTabControl32`控件来轻松验证这一点。[`TCS_VERTICAL`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760549.aspx)所以控件已经正确显示。

如果你真的想改变外观，你需要自己绘制标签。

# objective-c - 直接从 Ipad 中的 UiTextView 创建多页 PDF

> ID：15066231
> 
> 赞同：3
> 
> 时间：2013-02-25T11:45:56.547
> 
> 标签：objective-c, pdf-generation

我创建了具有特定布局的 pdf。问题是当文本视图的内容很长时，Pdf 不会自动生成新页面，我无法预定义在运行时将创建多少页。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:34:43.310

您可以尝试使用此代码，这可以帮助您在界面生成器中保留一个文本视图和一个按钮，并使用按钮操作方法并生成 pdf 导入这些框架

```
#import <QuartzCore/QuartzCore.h>
#import <CoreText/CoreText.h>

    -(NSString*)getPDFFileName
    {
        NSString* fileName = @"sample.PDF";
        NSArray *arrayPaths =
        NSSearchPathForDirectoriesInDomains(
                                            NSDocumentDirectory,
                                            NSUserDomainMask,
                                            YES);
        NSString *path = [arrayPaths objectAtIndex:0];
        NSString* pdfFileName = [path stringByAppendingPathComponent:fileName];
        return pdfFileName;

    }
    -(IBAction)PdfGeneration:(id)sender{
        // Prepare the text using a Core Text Framesetter.
        CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, (__bridge CFStringRef)txtObj.text, NULL);
        if (currentText) {
                CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);
                if (framesetter) {

                NSString *pdfFileName = [self getPDFFileName];

                // Create the PDF context using the default page size of 612 x 792.

                UIGraphicsBeginPDFContextToFile(pdfFileName, CGRectZero, nil);
                CFRange currentRange = CFRangeMake(0, 0);
                NSInteger currentPage = 0;
                BOOL done = NO;
                do {

                    UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, 612, 792), nil);
                    currentPage++;
                    [self drawPageNumber:currentPage];
                    currentRange = [self renderPage:currentPage withTextRange:currentRange andFramesetter:framesetter];
                    if (currentRange.location == CFAttributedStringGetLength((CFAttributedStringRef)currentText))

                        done = YES;

                } while (!done);
                UIGraphicsEndPDFContext();
               CFRelease(framesetter);
            } else {

                NSLog(@"Could not create the framesetter needed to lay out the atrributed string.");

            }

            // Release the attributed string.

            CFRelease(currentText);

        } else {

            NSLog(@"Could not create the attributed string for the framesetter");

        }
    }
    // Use Core Text to draw the text in a frame on the page.

    - (CFRange)renderPage:(NSInteger)pageNum withTextRange:(CFRange)currentRange

           andFramesetter:(CTFramesetterRef)framesetter

    {

        // Get the graphics context.

        CGContextRef    currentContext = UIGraphicsGetCurrentContext();
        CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);
        CGRect    frameRect = CGRectMake(72, 72, 468, 648);
        CGMutablePathRef framePath = CGPathCreateMutable();
        CGPathAddRect(framePath, NULL, frameRect);
        CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
        CGPathRelease(framePath);
        CGContextTranslateCTM(currentContext, 0, 792);
        CGContextScaleCTM(currentContext, 1.0, -1.0);
        CTFrameDraw(frameRef, currentContext);
        currentRange = CTFrameGetVisibleStringRange(frameRef);
        currentRange.location += currentRange.length;
        currentRange.length = 0;
        CFRelease(frameRef);
        return currentRange;

    }
    - (void)drawPageNumber:(NSInteger)pageNum

    {

        NSString *pageString = [NSString stringWithFormat:@"Page %d", pageNum];
        UIFont *theFont = [UIFont systemFontOfSize:12];
        CGSize maxSize = CGSizeMake(612, 72);
        CGSize pageStringSize = [pageString sizeWithFont:theFont constrainedToSize:maxSize lineBreakMode:UILineBreakModeClip];
        CGRect stringRect = CGRectMake(((612.0 - pageStringSize.width) / 2.0),720.0 + ((72.0 - pageStringSize.height) / 2.0),pageStringSize.width,pageStringSize.height);
           [pageString drawInRect:stringRect withFont:theFont];

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:50:54.110

```
//StartNewPage
                UIGraphicsBeginPDFPageWithInfo(pageFrame, nil); 
```

如果输入的文本视图中的文本高度超过您的页面框架设置，则查找文本的高度调用此方法 PageFrame 是 pdf 的新页面框架

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-28T13:20:10.793

**如此多的用户正在搜索此代码以兼容 SWIFT 版本。所以这里适用于 swift 4 和 5。**

// PDF 名称并在本地路径上生成：

```
func writeToPDF(filenameStr:String)

{
    pageSize = CGSize.init(width: 768, height: 10000)

   // let fileName: NSString = "test.pdf"
    let fileName = String.init(format: "%@.pdf", filenameStr)
    let documentDirectory = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true).first!
    let pdfPathWithFileName =   documentDirectory.appending("/" + fileName)//  documentDirectory.appending(fileName as String)
    self.PdfGeneration(filePath: pdfPathWithFileName)

    //lines written to get the document directory path for the generated pdf file.
    if let documentsPath = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask).first?.path {
        print("documentsPath",documentsPath)
        // “var/folder/…/documents ” copy the full path

    }

} 
```

// 生成pdf文件的方法，以显示pdf文件中的文本和图像。

```
func PdfGeneration(filePath: String)
{
// Prepare the text using a Core Text Framesetter.
//CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, (__bridge CFStringRef)txtObj.text, NULL);
let currentText = CFAttributedStringCreate(nil, (self.textVW_file.text as? CFString?)!, nil)
if(currentText != nil)
{
let framesetter = CTFramesetterCreateWithAttributedString(currentText!)
if (framesetter !=  nil) {
UIGraphicsBeginPDFContextToFile(filePath, .zero, nil)
    var currentRange = CFRangeMake(0, 0)
    var currentPage = 0
    var done = false

repeat {
 repeat {
UIGraphicsBeginPDFPageWithInfo(CGRect.init(x:0, y:0, width:612, height:792), nil)
currentPage = currentPage + 1
self.drawPageNumber(currentPage)
currentRange = self.renderPage(currentPage, withTextRange: currentRange, andFramesetter: framesetter)
let aText:CFAttributedString = currentText!
    print("currentText %@",currentText!)
    print("currentRange.location %@ and %@",currentRange.location,CFAttributedStringGetLength(aText))
if (currentRange.location == CFAttributedStringGetLength(aText)) {
done = true
}
}while (!done)
 UIGraphicsEndPDFContext()
}
else
{
print("Could not create the framesetter needed to lay out the atrributed string.")
}
}
else
{
print("Could not create the framesetter needed to lay out the atrributed string.")

}

} 
```

// 使用 Core Text 在页面的框架中绘制文本。

```
func renderPage(_ pageNum: Int, withTextRange currentRange: CFRange, andFramesetter framesetter: CTFramesetter?) -> CFRange {
    var currentRangeIn:CFRange
let currentContext = UIGraphicsGetCurrentContext()
currentContext?.textMatrix = .identity
let frameRect = CGRect(x: 72, y: 72, width: 468, height: 648)
let framePath = CGMutablePath()
framePath.addRect(frameRect, transform: .identity)
    let frameRef = CTFramesetterCreateFrame(framesetter!, currentRange, framePath, nil)
currentContext?.translateBy(x: 0, y: 792)
currentContext?.scaleBy(x: 1.0, y: -1.0)
    CTFrameDraw(frameRef, currentContext!)
currentRangeIn = currentRange
 currentRangeIn = CTFrameGetVisibleStringRange(frameRef)
currentRangeIn.location += currentRange2.length
currentRangeIn.length = 0
return currentRangeIn
} 
```

//并在底部绘制页码

```
func drawPageNumber(_ pageNum: Int) {
    let pageString = "Page \(pageNum)"
    let theFont = UIFont.systemFont(ofSize: 12)
    let maxSize = CGSize(width: 612, height: 72)
    let pageStringSize: CGSize = pageString.size(withAttributes: [NSAttributedString.Key.font: UIFont.systemFont(ofSize: 14.0)])

    //let pageStringSize = pageString.size(with: theFont, constrainedTo: maxSize, lineBreakMode: [])
    let stringRect = CGRect(x: (612.0 - pageStringSize.width) / 2.0, y: 720.0 + ((72.0 - pageStringSize.height) / 2.0), width: pageStringSize.width, height: pageStringSize.height)
    pageString.draw(in: stringRect, withAttributes: [NSAttributedString.Key.font : theFont])
} 
```

# visual-studio-2012 - VS2012上的CA1506代码分析问题

> ID：15066247
> 
> 赞同：1
> 
> 时间：2013-02-25T11:46:38.077
> 
> 标签：visual-studio-2012, code-analysis

我遇到了[CA1506](http://msdn.microsoft.com/en-us/library/bb397994.aspx)问题。它仅出现在 VS 2012 Ultimate 中。当我在 VS2010 Premium 中打开解决方案并运行代码分析时，一切正常。

有谁知道这种行为的原因是什么，我应该怎么做才能在两种环境中都有相同的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:59:12.120

许多元素的`[CodeGenerated]`属性[已从类型级别更改为方法级别](http://blog.jessehouwing.nl/2012/11/net-framework-sdk-45-changes-visual.html)。这将导致这些类型现在由代码分析评估，而它们之前被忽略。

此外，还对 FxCop 引擎（代码分析和代码度量的底层引擎）进行了一些修复，从而提高了规则的准确性。因此，一些规则现在在它们真正应该触发时触发，或者在原本不应该触发时不再触发。

鉴于 Visual Studio 2010 将使用 10.0 版本的规则和引擎，而 2012 将使用 11.0 版本的规则和引擎，您会发现获得所需行为的唯一真正方法是要么专门使用 2010 或 2012。

无论您决定如何，Visual Studio 2012 报告的项目很可能是您想要调查和修复的实际问题，无论 2010 是否发现并报告它们。

# django - Djangobooks搜索栏错误第7章

> ID：15066253
> 
> 赞同：1
> 
> 时间：2013-02-25T11:46:59.493
> 
> 标签：django, django-forms, django-templates, django-views

我不确定为什么在我的两个搜索功能之间会发生这种情况。

这是我的第一个搜索功能

```
 def search(request):
    if 'q' in request.GET and request.GET['q']:
    q = request.GET['q']
    books = Book.objects.filter(title__icontains = q)
    return render_to_response('search_results.html', {'books': books, 'query': q})
    else:
    return render_to_response('search_form.html', {'error': True}) 
```

有了这个功能，当我进入

```
 http://127.0.0.1:8000/search/ 
```

在我的浏览器中，将显示一个搜索栏和我创建的消息。此外，当我按下搜索按钮时，链接会自动更新为

```
 http://127.0.0.1:8000/search/?q= 
```

但是对于我的搜索功能的第二个版本

```
 def search(request):
        error = False
        if 'q' in request.GET['q']:
            q = request.GET['q']
            if not q:
             error = True
            else:
             books = Book.objects.filter(title__icontains = q)
             return render_to_response('search_results.html', {'books': books, 'query': q})
    return render_to_response('search_form.html',{'error':error}) 
```

如果我要进入

```
 http://127.0.0.1:8000/search/ 
```

进入我的浏览器，我会得到

```
 Exception Type:      MultiValueDictKeyError
    Exception Value:    "Key 'q' not found in <QueryDict: {}>" 
```

如果我要在浏览器中手动创建链接

```
 http://127.0.0.1:8000/search/?q= 
```

错误消息会消失，但如果我要进行性能搜索，我会得到一个搜索栏，除了将链接更新到我在搜索栏中输入的任何内容并运行搜索之外什么都不做。

```
 EX: searched for eggs --> http://127.0.0.1:8000/search/?q=eggs 
```

这是我的 HTML 文件

search_results.html

```
 <p>You searched for: <strong>{{ query }}</strong></p>

    {% if books %}
        <p>Found {{ books|length }} book{{ books|pluralize }}.</p>
        <ul>
            {% for book in books %}
            <li>{{ book.title }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No books matched your search criteria.</p>
    {% endif %} 
```

search_form.html

```
 <html>
    <head>
        <title>Search</title>
    </head>
    <body>
        {% if error %}
            <p style = "color: red;">Please submit a search term.</P>
        {% endif %}
        <form action = "/search/" method = "get">
            <input type = "text" name = "q">
            <input type = "submit" value = "Search">
        </form> 
    </body>
    </html> 
```

任何帮助深表感谢！谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:53:29.633

你输入：

```
if 'q' in request.GET['q']: 
```

你应该输入：

```
if 'q' in request.GET: 
```

它失败是因为您尝试访问丢失的项目。
你也可以这样做：

```
if request.GET.get('q', False): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:06:24.500

补充一下 Zulu 说的，可以使用`get()`属于字典的方法稍微整理一下代码：

```
def search(request):

    query = request.GET.get("q", None)

    if query:
        books = Book.objects.filter(title__icontains = query)
        return render_to_response("search_results.html", {"books": books, "query": query})

    # if we're here, it's because `query` is None
    return render_to_response("search_form.html", {"error": True}) 
```

# c++ - clang 无法链接 2 行主功能程序

> ID：15066258
> 
> 赞同：3
> 
> 时间：2013-02-25T11:47:14.227
> 
> 标签：c++, linker, clang

我对clang进行了apt-get-ed，这就是我尝试编译简单的2行程序时发生的情况：（我的机器上有g ++，IDK如果这是问题的原因）

> clang teststring.cpp -v Ubuntu clang 版本 3.0-6ubuntu3 (tags/RELEASE_30/final) (基于 LLVM 3.0) 目标：i386-pc-linux-gnu 线程模型：posix "/usr/bin/clang" -cc1 -triple i386-pc-linux-gnu -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name teststring.cpp -mrelocation-model static -mdisable-fp-elim -masm-verbose - mconstructor-aliases -target-cpu pentium4 -target-linker-version 2.22 -momit-leaf-frame-pointer -v -resource-dir /usr/bin/../lib/clang/3.0 -fmodule-cache-path /var /tmp/clang-module-cache -internal-isystem /usr/include/c++/4.6 -internal-isystem /usr/include/c++/4.6/i686-linux-gnu -internal-isystem /usr/include/c++/4.6 /backward -internal-isystem /usr/local/include -internal-isystem /usr/bin/../lib/clang/3.0/include -internal-externc-isystem /usr/include/i686-linux-gnu -internal-externc-isystem /usr/include -fdeprecated-macro -ferror-limit 19 -fmessage-length 80 -fgnu-runtime -fobjc- runtime-has-arc -fobjc-runtime-has-weak -fobjc-fragile-abi -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -o /tmp/teststring-e3FNx4.o -x c++ teststring。 cpp clang -cc1 版本 3.0 基于 i386-pc-linux-gnu 上托管的 llvm 3.0 忽略不存在的目录“/usr/include/i686-linux-gnu” 忽略不存在的目录“/usr/include/c++/4.6//i686- linux-gnu/32" 忽略不存在的目录 "/usr/include/i686-linux-gnu/" 忽略不存在的目录 "/usr/include/i686-linux-gnu" 忽略重复的目录 "/usr/include/c++/4.6"忽略重复目录“/usr/include/c++/4.6/i686-linux-gnu" 忽略重复目录 "/usr/include/c++/4.6/backward" 忽略重复目录 "/usr/include/c++/4.6" 忽略重复目录"/usr/ include/c++/4.6/backward"忽略重复目录"/usr/include/c++/4.6"忽略重复目录"/usr/include/c++/4.6/i686-linux-gnu"忽略重复目录"/usr/include/c++ /4.6/backward”忽略重复目录“/usr/local/include”忽略重复目录“/usr/bin/../lib/clang/3.0/include”忽略重复目录“/usr/include”包含“... " 搜索从这里开始：include <...> 搜索从这里开始： /usr/include/c++/4.6 /usr/include/c++/4.6/i686-linux-gnu /usr/include/c++/4.6/backward6/i686-linux-gnu"忽略重复目录"/usr/include/c++/4.6/backward"忽略重复目录"/usr/include/c++/4.6"忽略重复目录"/usr/include/c++/4.6/backward "忽略重复目录"/usr/include/c++/4.6"忽略重复目录"/usr/include/c++/4.6/i686-linux-gnu"忽略重复目录"/usr/include/c++/4.6/backward"忽略重复目录 "/usr/local/include" 忽略重复目录 "/usr/bin/../lib/clang/3.0/include" 忽略重复目录 "/usr/include" include "..." 搜索从这里开始：include < ...> 从这里开始搜索：/usr/include/c++/4.6 /usr/include/c++/4.6/i686-linux-gnu /usr/include/c++/4.6/backward6/i686-linux-gnu"忽略重复目录"/usr/include/c++/4.6/backward"忽略重复目录"/usr/include/c++/4.6"忽略重复目录"/usr/include/c++/4.6/backward "忽略重复目录"/usr/include/c++/4.6"忽略重复目录"/usr/include/c++/4.6/i686-linux-gnu"忽略重复目录"/usr/include/c++/4.6/backward"忽略重复目录 "/usr/local/include" 忽略重复目录 "/usr/bin/../lib/clang/3.0/include" 忽略重复目录 "/usr/include" include "..." 搜索从这里开始：include < ...> 从这里开始搜索：/usr/include/c++/4.6 /usr/include/c++/4.6/i686-linux-gnu /usr/include/c++/4.6/backward忽略重复目录“/usr/include/c++/4.6/backward”忽略重复目录“/usr/include/c++/4.6”忽略重复目录“/usr/include/c++/4.6/backward”忽略重复目录“/usr/ include/c++/4.6" 忽略重复目录 "/usr/include/c++/4.6/i686-linux-gnu" 忽略重复目录 "/usr/include/c++/4.6/backward" 忽略重复目录"/usr/local/include " 忽略重复目录 "/usr/bin/../lib/clang/3.0/include" 忽略重复目录 "/usr/include" include "..." 搜索从这里开始： include <...> 搜索从这里开始： /usr/include/c++/4.6 /usr/include/c++/4.6/i686-linux-gnu /usr/include/c++/4.6/backward忽略重复目录“/usr/include/c++/4.6/backward”忽略重复目录“/usr/include/c++/4.6”忽略重复目录“/usr/include/c++/4.6/backward”忽略重复目录“/usr/ include/c++/4.6" 忽略重复目录 "/usr/include/c++/4.6/i686-linux-gnu" 忽略重复目录 "/usr/include/c++/4.6/backward" 忽略重复目录"/usr/local/include " 忽略重复目录 "/usr/bin/../lib/clang/3.0/include" 忽略重复目录 "/usr/include" include "..." 搜索从这里开始： include <...> 搜索从这里开始： /usr/include/c++/4.6 /usr/include/c++/4.6/i686-linux-gnu /usr/include/c++/4.6/backward忽略重复目录“/usr/include/c++/4.6” 忽略重复目录“/usr/include/c++/4.6/backward” 忽略重复目录“/usr/include/c++/4.6” 忽略重复目录“/usr/include/ c++/4.6/i686-linux-gnu"忽略重复目录"/usr/include/c++/4.6/backward"忽略重复目录"/usr/local/include"忽略重复目录"/usr/bin/../lib/ clang/3.0/include" 忽略重复目录 "/usr/include" 包含 "..." 搜索从这里开始：include <...> 搜索从这里开始：/usr/include/c++/4.6 /usr/include/c++/ 4.6/i686-linux-gnu /usr/include/c++/4.6/backward忽略重复目录“/usr/include/c++/4.6” 忽略重复目录“/usr/include/c++/4.6/backward” 忽略重复目录“/usr/include/c++/4.6” 忽略重复目录“/usr/include/ c++/4.6/i686-linux-gnu"忽略重复目录"/usr/include/c++/4.6/backward"忽略重复目录"/usr/local/include"忽略重复目录"/usr/bin/../lib/ clang/3.0/include" 忽略重复目录 "/usr/include" 包含 "..." 搜索从这里开始：include <...> 搜索从这里开始：/usr/include/c++/4.6 /usr/include/c++/ 4.6/i686-linux-gnu /usr/include/c++/4.6/backward忽略重复目录“/usr/include/c++/4.6”忽略重复目录“/usr/include/c++/4.6/i686-linux-gnu”忽略重复目录“/usr/include/c++/4.6/backward”忽略重复目录"/usr/local/include" 忽略重复目录 "/usr/bin/../lib/clang/3.0/include" 忽略重复目录 "/usr/include" include "..." 搜索从这里开始：include <. ..> 搜索从这里开始：/usr/include/c++/4.6 /usr/include/c++/4.6/i686-linux-gnu /usr/include/c++/4.6/backward忽略重复目录“/usr/include/c++/4.6”忽略重复目录“/usr/include/c++/4.6/i686-linux-gnu”忽略重复目录“/usr/include/c++/4.6/backward”忽略重复目录"/usr/local/include" 忽略重复目录 "/usr/bin/../lib/clang/3.0/include" 忽略重复目录 "/usr/include" include "..." 搜索从这里开始：include <. ..> 搜索从这里开始：/usr/include/c++/4.6 /usr/include/c++/4.6/i686-linux-gnu /usr/include/c++/4.6/backward忽略重复目录“/usr/bin/../lib/clang/3.0/include” 忽略重复目录“/usr/include” 包括“...” 从这里开始搜索：include <...> 从这里开始搜索：/ usr/include/c++/4.6 /usr/include/c++/4.6/i686-linux-gnu /usr/include/c++/4.6/backward忽略重复目录“/usr/bin/../lib/clang/3.0/include” 忽略重复目录“/usr/include” 包括“...” 从这里开始搜索：include <...> 从这里开始搜索：/ usr/include/c++/4.6 /usr/include/c++/4.6/i686-linux-gnu /usr/include/c++/4.6/backward
> /usr/local/include /usr/bin/../lib/clang/3.0/include /usr/include
> /usr/include/i386-linux-gnu/ /usr/include/clang/3.0/include/ /usr/ lib/gcc/i686-linux-gnu/4.6/include/
> /usr/lib/gcc/i686-linux-gnu/4.6/include-fixed/ 搜索列表结束。
> "/usr/bin/ld" -z relro --hash-style=gnu --as-needed --build-id --eh-frame-hdr -m elf_i386 -dynamic-linker /lib/ld-linux.so .2 -o a.out /usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/crt1.o /usr/lib/gcc/i686-linux -gnu/4.6/../../../i386-linux-gnu/crti.o /usr/lib/gcc/i686-linux-gnu/4.6/crtbegin.o -L/usr/lib/gcc/ i686-linux-gnu/4.6 -L/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu -L/lib/i386-linux-gnu -L /usr/lib/i386-linux-gnu -L/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu -L/usr/lib/gcc/ i686-linux-gnu/4.6/../../.. -L/lib/i386-linux-gnu -L/lib -L/usr/lib/i386-linux-gnu -L/usr/lib /tmp /teststring-e3FNx4.o -lgcc --as-needed -lgcc_s --no-as-needed -lc -lgcc --as-needed -lgcc_s --no-as-needed /usr/lib/gcc/i686-linux -gnu/4.6/crtend.o /usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/crtn.o
> /tmp/teststring-e3FNx4.o：在函数std::basic_string、std::allocator`main':
> teststring.cpp:(.text+0x18): undefined reference to`
> 
> > ::basic_string()' teststring.cpp:(.text+0x2b): 未定义引用`std::string::operator+=(char const*)' teststring.cpp:(.text+0x3e): undefined reference to`std::basic_string, std::allocator >::~basic_string()' teststring.cpp:(.text+0x58): 未定义引用to `std::basic_string<char, std::char_traits<char>, std::allocator<char> ::~basic_string()' teststring.cpp:(.text+0x79): undefined reference to`std::terminate()' /tmp/teststring-e3FNx4.o:(.eh_frame+0x13): undefined reference to `__gxx_personality_v0' clang: error: linker command failed with exit code 1 (use -v to see invocation)

好奇程序的 PS 是：

```
#include <string>
int main()
{
        std::string s;
        s+="banana";
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T11:49:38.780

这是 C++ 代码，因此请尝试使用`clang++`而不是`clang`链接 C++ 标准库。

# javascript - 在元素前添加 li

> ID：15066261
> 
> 赞同：1
> 
> 时间：2013-02-25T11:47:41.740
> 
> 标签：javascript, jquery, list

我想使用 jQuery`li`在如下元素之前附加一个：起初它是：

```
<div>
    <div>
        <p> content </p>
    </div>
</div> 
```

之后应该是：

```
<li>
    <div>
        <div>
            <p> content </p>
        </div>
    </div>
</li> 
```

对于我的代码，它会发生这种情况：

```
<li></li>
<div>
    <div>
        <p> content </p>
    </div>
</div> 
```

这不是我想要的。我正在寻找第二个例子。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:49:10.910

试试这个

```
 <div id="here" >
         <div>
         <p> content </p>
         </div>
   </div>

$('#here').wrap('<li>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:48:46.277

[`wrap`](http://api.jquery.com/wrap/)可以这样做：

```
$("selector for your div").wrap("<li>"); 
```

**但是**，我无法立即想象一个有效的结构。要么`div`无效（因为您不能将 a`div`作为 a 、 或 的直接子代[`ul`](http://www.w3.org/TR/html5/grouping-content.html#the-ul-element)）[`ol`](http://www.w3.org/TR/html5/grouping-content.html#the-ol-element)，[`menu`](http://www.w3.org/TR/html5/interactive-elements.html#the-menu-element)要么一旦放入`li`，*它就*无效（因为**必须**是 a 、 或 的直接子代）。[`li`](http://www.w3.org/TR/html5/grouping-content.html#the-li-element) **`ul``ol``menu`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:49:09.900

不要尝试附加..

创建独立的 LI 并将其包装在 div 上。

```
<div id="myDiv" >
         <div>
         <p> content </p>
         </div>
   </div>

$('#myDiv').wrap('<li>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:56:38.493

我认为这应该是这样的：

```
$('p:contains(content)').parent().parent().wrap('<li>'); 
```**

# iphone - iPhone 应用视网膜和非视网膜

> ID：15066264
> 
> 赞同：0
> 
> 时间：2013-02-25T11:47:57.627
> 
> 标签：iphone, ipad, xcode4.5, iphone-5

我在 xcode 4.5 中开发了 ipad 和 iPhone 应用程序，并通过检查设备来做到这一点：

```
 if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
{
   //code for ipad.Adjusting sizes for all the controls 
}
    if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPhone)
{
   //code for iphone.Adjusting sizes for all the controls 
} 
```

但是当我在模拟器中检查 iphone5 的 Retina(4) 时，所有控件的大小都发生了变化，并且我为 iphone 提供的先前分辨率不匹配。

在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:51:22.757

```
This is the other optional way to find out for check iPhone5

#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

如果你想从底部显示组件..

```
#define GET_Y_AXIS_FROM_BOTTOM(a)(( double )([[ UIScreen mainScreen ] bounds ].size.height)-a) 
```

CGRectMake(0,GET_Y_AXIS_FROM_BOTTOM(50),320,50)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:56:18.990

您必须创建两个 xib 文件（一个用于 iPhone4 和 iPhone5），或者必须以编程方式创建所有控件，并将其放入循环中，就像这样。

```
 CGRect screenBounds = [[UIScreen mainScreen] bounds];
    if (screenBounds.size.height == 568) {
        //put your iphone 5 control here
    } else {
        //put your iphone 4 control here
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:23:49.117

```
if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)
{

    //code

}
else
{

    //code

} 
```

# javascript - 使用 jquery cookie 插件设置 body 类

> ID：15066265
> 
> 赞同：0
> 
> 时间：2013-02-25T11:47:59.370
> 
> 标签：javascript, jquery, cookies

我正在尝试使用[jQuery Cookie 插件创建一个“高对比度”样式切换器](https://github.com/carhartl/jquery-cookie)

我现在已经忙了几个小时了，在 stackoverflow.com 上阅读了很多问题，但我没有解决我的问题。

想法是在单击 ID 为“switch”的 span 元素时在 body 标记上切换类“high contrast”。在 CSS 样式表中，我有一组规则，如果 body 标记具有“高对比度”类，我想应用这些规则。

这是上述场景的 jQuery 代码：

```
$("#switch").click(function () {
    $.cookie('bodyclass', 'highcontrast', { expires: 7, path: '/' });
    $('body').toggleClass('highcontrast');
}); 
```

如果你点击 switch 元素 body 类被切换。现在，如果您转到另一个页面，cookie 在那里并且值已设置，但主体类“highcontrast”不再存在。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T12:33:01.030

好的，这是经过验证和工作的......

HTML：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Style Switcher</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="../../plugins/cookie/jquery.cookie.js"></script>
<script src="switch.js"></script>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>

<span id="switch">Switch</span>

</body>
</html> 
```

jQuery：

```
 $(document).ready(function(){
        // Check (onLoad) if the cookie is there and set the class if it is
        if ($.cookie('highcontrast') == "yes") {
            $("body").addClass("highcontrast");
        }

        // When the span is clicked
        $("#switch").click(function () {
            // Check the current cookie value
            // If the cookie is empty or set to no, then add highcontrast
            if ($.cookie('highcontrast') == "undefined" || $.cookie('highcontrast') == "no") {
                // Set cookie value to yes
                $.cookie('highcontrast','yes', {expires: 7, path: '/'});
                // Add the class to the body
                $("body").addClass("highcontrast");
            }
            // If the cookie was already set to yes then remove it
            else {
                $.cookie('highcontrast','no',  {expires: 7, path: '/'});
                $("body").removeClass("highcontrast");
            }
        }); 
    }); 
```

CSS：

```
 body {
        width:100%;
        height:100%;
    }
    body.highcontrast {
        background-color:#000;
        color:#fff;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:54:37.997

在页面加载时尝试这样的事情：

```
if ( $.cookie('bodyclass') ) {
    $('body').toggleClass('highcontrast');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:55:46.340

您需要根据用户的需要设置值`highcontrast`，并在页面加载时读取它。

```
// switch cookie
$("#switch").click(function() {

    // check current cookie
    var current = $.cookie('highcontrast');

    // set new cookie and adjust contrast
    if (current) {

        // remove cookie
        $.cookie('highcontrast', null);

        // remove class
        $('body').removeClass('highcontrast');

    } else {

        // add cookie
        $.cookie('highcontrast', 1, { expires: 7, path: '/' });

        // add class
        $('body').addClass('highcontrast');
    }

});

// set contrast on page load
$(function() {

    var value = $.cookie('highcontrast');

    if (value) {

        // add contrast class
        $('body').addClass('highcontrast');

    }

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:56:55.010

`document.ready`检查 cookie 预设和值是否存在，然后将其添加到正文。

**例子**

```
$(document).ready(function(){
   if($.cookie('bodyclass'))
   {
       $('body').addClass($.cookie('bodyclass'));
   }
}); 
```

# tinymce - 类名中的tinymce通配符用法

> ID：15066269
> 
> 赞同：1
> 
> 时间：2013-02-25T11:48:16.263
> 
> 标签：tinymce

```
tinymce.activeEditor.formatter.register('div_class', {block : 'div', classes : '%value'});
tinymce.activeEditor.formatter.remove('div_class',{value : 'alert*'}); 
```

我正在尝试删除所有“alert*”类。像警报错误，警报信息等。似乎类名中的通配符不起作用..对此有什么建议吗？

# jqgrid - 当列支持文本换行时，jqGrid 自动滚动中断

> ID：15066272
> 
> 赞同：0
> 
> 时间：2013-02-25T11:48:21.273
> 
> 标签：jqgrid, jqgrid-asp.net

在启用**自动滚动**功能后，即在**jqGrid, v4.4.1**`scroll: 1`的列中启用自动换行后，如果由于 1 列或更多列中的文本换行而导致行高发生更改，则网格/表格无法滚动到最后一条记录。如果所有行只使用一行（不换行），那么自动滚动功能效果很好。如果某些行使用多于一行（整个表格中的行高度可变），则自动滚动功能开始失效。这通常意味着您无法到达结果的最后一页，因为网格计算的垂直滚动条的长度不正确。

 **支持自动换行的样式：

```
.ui-jqgrid tr.jqgrow td {
  font-weight: normal; 
  overflow: hidden; 
  white-space: pre-wrap !important; /* changed to enable word wrap */
  height: 22px;
  padding: 0 2px 0 2px;
  border-bottom-width: 1px; 
  border-bottom-color: inherit; 
  border-bottom-style: solid;
} 
```

有没有办法来解决这个问题？目前我正在关闭文本换行并只是加宽列。

可以`populateVisible`修改以不同地计算垂直滚动条的长度吗？好像是根据`height of the first row x num rows (line 852 of v4.4.1)`. 我怀疑答案是否定的，但是......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:58:51.973

我能想到的唯一答案是为每个 td 设置一个固定的高度，并且仍然允许自动换行。但这并不是直截了当的：

1.  改变高度`.ui-jqgrid tr.jqgrow td`。`.ui-jqgrid tr.jqgroup td`（如果你也使用这种风格，可能需要复制这种风格。）

    ```
    .ui-jqgrid tr.jqgrow td {
      font-weight: normal; 
      overflow: hidden; 
      white-space: pre;
      height: 42px; /* higher fixed height, default is 22px */
      padding: 0 2px 0 2px;
      border-bottom-width: 1px; 
      border-bottom-color: inherit; 
      border-bottom-style: solid;
    } 
    ```

2.  使用[Master Oleg](https://stackoverflow.com/users/315935/oleg)的解决方案来[限制 jqgrid 中行的最大高度](https://stackoverflow.com/a/6574194/1123275)。即一个自定义格式化程序，它`td`用`div`.

注意：最后我只使用了 22px 的单行（默认），没有换行并将列设置得更宽一些——更快，并且仍然允许工具提示显示任何隐藏的文本。**

# c++ - 使用 STD 库在 C++ 中连接动态大小的矩阵

> ID：15066273
> 
> 赞同：2
> 
> 时间：2013-02-25T11:48:31.160
> 
> 标签：c++, matrix, std, stdvector

我有一条短信，例如：

```
string text = "HELLO WORLD!" 
```

对于每个字符，如果必须放置一个“像素”来绘制文本，则返回一个 0/​​1 矩阵的函数：

```
matrix translate(char * value,int height);    
matrix translate("H",3); 
```

必须返回具有以下值的矩阵：

```
101
111   equal <H>
101 
```

调用每个字符的翻译函数，我想将所有数据存储在一个动态矩阵中：

```
10101110...
11101100... equal <H><SPACE><E><SPACE>...  etc
10101110... 
```

存储值的最佳方法是什么？

1）我考虑了一个矩阵，但是是静态的。

2）我考虑过使用二维向量，但这个问题非常复杂。

3）当知道最终的列数时，我考虑使用一个大矩阵，但这取决于字母是什么，我需要 1 次迭代来计算列数（每个字母可能大于 3）和另一个来存储数据.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:56:54.347

在使用点阵、喷墨和激光打印机后，我建议您使用一个固定大小的矩阵，该矩阵具有您将输出的最大列数。

例如，对于 8.5 英寸宽、每英寸 600 点的纸张，将有 5100 列。

行数取决于您需要多少行或方便多少行。

此外，您可能希望使用带有空格 == 5x7 空白（零）的 5x7 矩阵。在字母之间留一些空白列，并专注于固定间距或位图字体。

对于每个字符，您都需要一个矩阵或位图。数组对此非常有效。与字符相关的位图（矩阵）的集合称为字体。

您可能需要编写矩阵函数来将字体从纵向旋转到横向，反之亦然。

**编辑1：**
您不能考虑每个句子的列，但是在您必须刷新（或处理）缓冲区之前，有多少句子将适合您的缓冲区。句子可以非常小到非常大（看看这个答案）。由于字符矩阵在字符之间具有固定的宽度和间距，因此确定一个字符或多个字符是否可以容纳只是一个数学函数。

# android - Zxing Android 无法扫描 Code 128

> ID：15066283
> 
> 赞同：2
> 
> 时间：2013-02-25T11:48:48.870
> 
> 标签：android, barcode, zxing, code128

我已经在我的 android 应用程序中集成了 ZXing 条码阅读器。

它可以扫描大部分代码，但我有一个无法扫描的电费单（使用 Galaxy Ace 5.0MP）。我认为问题出在相机分辨率和焦点上，因为当我在使用 Xperia SL (12.1MP) 时尝试使用相同的条形码时，我得到了结果。那么有没有办法解决这个问题呢？

我附上了条形码的示例图像。

[![有效的 XHTML](../Images/34616a024f668d1140ef12b40ce2cf88.png)](https://i.stack.imgur.com/K1AlS.png) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:04:05.097

这会由库本身立即扫描：

[http://zxing.org/w/decode?u=http%3A%2F%2Fs8.postimage.org%2Fhohyonvzp%2FBSESExample.png](http://zxing.org/w/decode?u=http%3A%2F%2Fs8.postimage.org%2Fhohyonvzp%2FBSESExample.png)

是的，这可能取决于您的相机。我不认为你做错了什么。

# shell - 从以创建日期为后缀的目录中查找最新文件

> ID：15066286
> 
> 赞同：0
> 
> 时间：2013-02-25T11:49:03.410
> 
> 标签：shell

我在“yyyymmddhhmmss”中名为/dir/file.$creation date 的目录中有文件。现在我想使用“yyyyddmmhhmmss”部分根据创建日期在该目录中选择最新创建的文件。

请建议如何使用 shell 脚本来实现。

我正在使用 K 壳牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:04:38.773

使用`ls`和`sort`如下：

```
ls dir/file.* | sort -n -t . -k 2 | tail -1 
```

如果你有太多文件，上面的命令会失败，会出现“参数太多”的错误，所以请`find`改用：

```
find dir -name "file.*" -maxdepth 1 | sort -n -t. -k2 | tail -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:05:53.203

```
ls -t1 /IN/UR/DIR | head -1 
```

如果它是最后创建的，可能对你有用......

# c# - 打开 xml sdk 读取数字和日期时间/数字值

> ID：15066287
> 
> 赞同：2
> 
> 时间：2013-02-25T11:49:06.730
> 
> 标签：c#, excel, openxml-sdk

我正在使用 Open XML SDK 2.0 来读取 excel 文件。该文件包含如下信息。

编号 DataFound 摘要

10 2012-12-12 abslsoddsdls

20 2012-11-12 sllsdislkdrr

当我使用 Open XML SDK 从文件中获取数据时，我总是将单元格 DataType 设为 String(sharedstring)。我需要获取 Excel 文件中的数据类型。看看我下面的代码。有什么想法可以像在 excel 文件中一样获取单元格的数据类型吗？

```
 SpreadsheetDocument spreadSheetDocument = SpreadsheetDocument.Open(dataStream, false);
            WorkbookPart workbookPart = spreadSheetDocument.WorkbookPart;
            IEnumerable<Sheet> sheets = spreadSheetDocument.WorkbookPart.Workbook.GetFirstChild<Sheets>().Elements<Sheet>();
            string relationshipId = sheets.First().Id.Value;
            WorksheetPart worksheetPart = (WorksheetPart)spreadSheetDocument.WorkbookPart.GetPartById(relationshipId);
            Worksheet workSheet = worksheetPart.Worksheet;
            SheetData sheetData = workSheet.GetFirstChild<SheetData>();
            IEnumerable<Row> rows = sheetData.Descendants<Row>();
            foreach (Cell cell in rows.ElementAt(0))
            {
                dt.Columns.Add(GetCellValue(spreadSheetDocument, cell));
            }

            foreach (Row row in rows) //this will also include your header row...
            {
                DataRow tempRow = dt.NewRow();

                for (int i = 0; i < row.Descendants<Cell>().Count(); i++)
                {
                    tempRow[i] = GetCellValue(spreadSheetDocument, row.Descendants<Cell>().ElementAt(i ));
                }

                dt.Rows.Add(tempRow);
            }
            dt.Rows.RemoveAt(0);

public static string GetCellValue(SpreadsheetDocument document, Cell cell)
        {
  SharedStringTablePart stringTablePart = document.WorkbookPart.SharedStringTablePart;
            string value = cell.CellValue.InnerXml;

            if (cell.DataType != null && cell.DataType.Value == CellValues.SharedString) //cell.DataType is always SharedString!
            {
                return stringTablePart.SharedStringTable.ChildElements[Int32.Parse(value)].InnerText;
            }
            else
            {
                return value;
            }
        } 
```

# javascript - Mapbox.js：从 CSV 文件添加标记？

> ID：15066295
> 
> 赞同：2
> 
> 时间：2013-02-25T11:49:34.487
> 
> 标签：javascript, mapbox

我开始掌握 mapbox.js。我有一个 CSV 文件，其中包含我想添加为标记的点。

我的 CSV 文件如下所示：

```
 event,lat,lon,title,num_people
 arson,47.14,8.01,Company 1,2
 arson,46.68,9.50,Company 2,120
 robbery,46.57,6.62,Company 3,3 
```

我想在地图上为每一行添加一个标记，将其着色为红色或橙色，并根据是纵火还是抢劫添加 Maki 图标，根据受影响的人数调整大小，并在鼠标悬停时添加工具提示与标题。

这是据我所知：

```
var markerLayer = mapbox.markers.layer();
$.get("/data/crimes.csv", function(data) { 
    var crimes = $.csv.toObjects(data); 
    $.each(crimes, function(i, crime) {
      var newfeature = {
          geometry: { coordinates: [crime.lon,crime.lat] }
      };
      // How to define colour/size/icon here?
      markerLayer.add_feature(newfeature);
      map.addLayer(markerLayer);
    });
  }); 
```

它为每个事件添加一个灰色标记。如何根据事件类型设置标记样式，并在鼠标悬停时添加工具提示？

有[一些关于 CSV 文件的 mapbox 文档](http://mapbox.com/mapbox.js/example/marker-csv/)，但它似乎期望 CSV 文件作为一个字符串并采用非常特殊的格式，并具有颜色/大小/图标的预定义设置。

如果可能的话，我宁愿使用数据对象并定义我自己的交互，因为我想用数据做其他事情。

更新：我已经想出了如何添加工具提示，所以现在只需要制定标记样式：

```
 var markerLayer = mapbox.markers.layer();
  var interaction = mapbox.markers.interaction(markerLayer);
  interaction.formatter(function(feature) {
    console.log(feature);
      var o = '<strong>' + feature.properties.title + '</strong>';
      return o;
  });
  $.get("/data/crimes.csv", function(data) { 
    var crimes = $.csv.toObjects(data); 
    $.each(crimes, function(i, crime) {
      var newfeature = {
          geometry: { coordinates: [crime.lon,crime.lat] },
          properties:  {
            title: crime.title
          }
      };
      markerLayer.add_feature(newfeature);
      map.addLayer(markerLayer);
    });
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:15:30.650

此示例[http://mapbox.com/mapbox.js/example/single-marker/](http://mapbox.com/mapbox.js/example/single-marker/)演示了一种以预期语法请求自定义标记的方法。

# css - 在css3背景渐变或带有图片的表格中的框？我需要重新创建这个盒子，请建议我

> ID：15066297
> 
> 赞同：0
> 
> 时间：2013-02-25T11:49:38.990
> 
> 标签：css, background

我正在尝试重新创建此页面右侧的菜单：[http](http://www.bandbw.co.uk/properties/chateau-de-la-cazine/index.html) ://www.bandbw.co.uk/properties/chateau-de-la-cazine/index.html （度假村-投资地点等。 ..)。

你认为最好的方法是什么？Css3 渐变（不适用于 ie） 带有图像的表格（我想用 css 来做） 背景图像，然后用背景大小拉伸它？（边角会变形）。

请帮帮我，我被卡住了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:57:40.103

为什么你需要渐变，它只有一种颜色，只要放边框半径就可以了

# javascript - 如何在源代码中加密 javascript 和 php？

> ID：15066299
> 
> 赞同：-6
> 
> 时间：2013-02-25T11:49:41.117
> 
> 标签：javascript

我正在尝试从源代码中隐藏或加密我的 javascript 代码。

我的代码是：

```
<script type="text/javascript">
 function getValue() {

    return "<?php echo "ab"; ?>";

}
</script>
</head>

<body>
<form name="form">
        An input field:
        <input type="text" name="input">
        <input type="submit" name="submit">
    </form>
<script type="text/javascript">

        document.form.input.value = getValue();

    </script> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:53:46.633

您无法从源代码中加密 JavaScript 代码，但您可以使用 JavaScript 最小化器来优化它，如下所示：

[http://www.minifyjavascript.com/](http://www.minifyjavascript.com/)

# jquery-ui - 如何确定 jQuery toggle() 的当前状态

> ID：15066304
> 
> 赞同：9
> 
> 时间：2013-02-25T11:49:55.607
> 
> 标签：jquery-ui, html, toggle

当单击另一个 div 时，我正在显示和隐藏 div。我需要能够确定一个特定的 div 是显示还是隐藏。

最终我要做的是，当单击某个 div 时，应隐藏所有其他“显示/隐藏”div，然后确定是否显示 clicked-div 的相关 div，如果是则隐藏它，否则显示它.

我还需要根据其切换状态向显示/隐藏的 div 添加/删除一个 css 类（用于背景颜色）。

这是我用来切换 div 的显示/隐藏状态的 jQuery 代码：

```
$('#movieListTable').on('click', 'div.vitalsTable', function (e) {

    // Don't do anything if the Edit button or Delete checkbox is clicked
    if (event.target.className !== 'btnEditMovie' && event.target.className !== 'chkDeleteMovie') {

        $(this).parent().parent().find('div.detailsTable').toggle('blind','easeInOutQuart', 300);
    }
}); 
```

奇怪且令人沮丧的是，我读过的所有内容，包括 SO 的答案，都表明我应该能够检查显示状态（“无”）或可见属性，但在控制台中也不能检查其中正在显示/隐藏的 div 上设置。

我创建了一个[jsFiddle](http://jsfiddle.net/eventide/wWaDm/)供您使用。

toggle() 上的[jQuery 文档在](http://api.jquery.com/toggle/)页面下方大约 3/4 处讨论了一个布尔参数“showOrHide”，用于一种使用 toggle() 的方法，但我无法弄清楚如何使用那我自己...

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-25T11:54:47.460

您可以使用`$(div).is(':visible')`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-02T15:56:16.977

```
$('.elem').slideToggle('fast', function() {
    alert($(this).is(':visible'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-28T07:47:14.950

```
var className = $(el).attr("class"); 
```

可以从那里检索当前类的逻辑可以接管测试并修改元素：

*   `if(className == "yourCss")`
*   `el.addClass("YourCSS");`
*   `el.removeClass("YourCSS");`

我仍然相信[jvnill 的答案](https://stackoverflow.com/a/15066386/452708)是有效的，除非必须测试多个类案例。

`toggle()`：只需[通过更改 CSS 显示属性](http://api.jquery.com/toggle/)在选定元素的[hide() 和 show()之间切换。](http://www.w3schools.com/jquery/eff_toggle.asp)

**注意：**当一个类被添加到元素中时，元素的类属性（列表）会被附加，除非被`.removeClass()`调用删除。

# javascript - 将非字符串值序列化为 JSON

> ID：15066312
> 
> 赞同：0
> 
> 时间：2013-02-25T11:50:18.260
> 
> 标签：javascript, json, serialization

我有一个 javascript 对象，其中包含许多整数属性以及日期值和整数数组。每当我在对象上调用 JSON.stringify(entityModel, null, 2) 并将结果传递给 HTTP 处理程序时，我都会得到如下结果：

```
{
 "UserId": "12345",
 "Name": "Stewart",
 "PositionId": "2",
 "NextBirthday": "10-11-2013",
 "FavouriteColour": "Blue",
 "Hobbies": "1,3" // this is an array of ints in the client object prior to stringificaiton
} 
```

当我想要的是

```
{
 "UserId": 12345,
 "Name": "Stewart",
 "PositionId": 2,
 "NextBirthday": "10-11-2013",
 "FavouriteColour": "Blue",
 "Hobbies": [1,3]
} 
```

我是 JSON 新手，但有人可以告诉我我哪里出错了吗？基本上在服务器端，我的反序列化器不会将 Hobbies 属性反序列化为整数数组，并且当它们被 JSON 视为字符串时，整数可能会出现问题。

＃＃ 编辑

当页面加载时，我的客户对象是这样的：

```
function EntityModel(){
   this.UserId = null;
   this.Name = null;
   this.PositionId = null;
   this.NextBirthday = null;
   this.FavouriteColour = null;
   this.Hobbies = null;
} 
```

然后我给它赋值，检查这个值是否是一个数字，并在适当的地方使用 parseInt 赋值一个整数值。对于爱好属性，我分配了一个整数数组，如下所示：

```
var checkedValues = new Array();
element.find("input[type=checkbox]:checked").each(function () {
   checkedValues.push(parseInt($(this).val()));
});
return checkedValues; 
```

所以我的对象最终应该看起来像这样

```
function EntityModel(){
   this.UserId = 123;
   this.Name = "Stewart";
   this.PositionId = 2;
   this.NextBirthday = '10-11-2013';
   this.FavouriteColour = 'blue';
   this.Hobbies = [1,2];
} 
```

然后我将对象传递给处理程序，如下所示：

```
var json = JSON.stringify(entityModel, null, 2);
$.ajax({
  url: handlerPath,
  contentType: "application/json; charset=utf-8",
  type: 'POST',
  dataType: "json",
  data: json,
  success: OnComplete,
  error: OnFail
}); 
```

最后在处理程序端，我检索 JSON 字符串

```
using (StreamReader inputStream = new StreamReader(      HttpContext.Current.Request.InputStream ))
{
   jsonString = inputStream.ReadToEnd();
} 
```

它看起来像这样

```
"{\n  \"UserId\": \"12345\",\n  \"Name\": \"Stewart\",\n  \"PositionId\": \"2\",\n  \"NextBirthday\": \"2013-11-10\",\n  \"FavouriteColour\": \"Blue\",\n  \"Hobbies\": \"1,2,3\"\n}" 
```

# 编辑 2

以下是我用来为我的客户对象赋值的函数。第一个函数返回一个整数数组（如果该值基于复选框列表选择）或一个 int（如果值是一个数字）或一个字符串

```
function getElemValue(element, elementType, targetType) {
        switch (elementType) {
            case "System.Web.UI.WebControls.CheckBoxList":
                var checkedValues = new Array();
                element.find("input[type=checkbox]:checked").each(function () {
                    checkedValues.push(parseInt($(this).val()));
                });
                return checkedValues;
            default:
                return TryParseInt(element.val());   
        }
    }

    function TryParseInt(str) {
        var retValue = str;
        if (str != null) {
            if (str.length > 0) {
                if (!isNaN(str)) {
                    retValue = parseInt(str);
                }
            }
        }
        return retValue; 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:08:19.050

我的印象是该功能`getElementValue`并没有完全按照您的想法进行。

这是我看到的一些（潜在）问题：

*   参数是`element`jQuery 对象吗？如果没有，`element.val()`可能会抛出异常。浏览器的控制台是否显示任何错误？
*   您在`parseInt`没有第二个参数（基数）的情况下使用；这意味着如果字符串以零 ( `0`) 开头，它将被解释为**八进制**数。为防止这种情况，请使用`parseInt(str, 10)`（或`Number(str)`，但它也将接受浮点数）。
*   您的功能`TryParseInt`看起来不必要的复杂。做 a 应该就足够了`parseInt(str, 10)`，如果产生了`NaN`，则返回原始字符串。

例如：

```
function tryParseInt(str) {
    var retValue = parseInt(str, 10);
    return isNaN(retValue) ? str : retValue;
} 
```

最后：我在这里看到的只是将一些值分配给`checkedValues`数组，但没有分配给`EntityModel`对象。所以我们仍然错过了最后的任务——我有一种预感，这正是它出错的地方，一切都被转换为字符串。

# c# - Windows Store 应用程序中的 GetWindowDC() 等效项

> ID：15066313
> 
> 赞同：0
> 
> 时间：2013-02-25T11:50:21.380
> 
> 标签：c#, api, microsoft-metro, windows-store-apps

我们可以`GetWindowDC()`在 Windows 桌面应用程序中获取窗口 ( ) 的设备上下文，但在 Windows 应用商店应用程序中，它会使 API 支持应用程序失败。我正在用 c# 开发 Windows Store 应用程序。请让我知道它的等效方法，因为我的整个应用程序都依赖于此。

更新：我有一个绘图应用程序，在 Canvas 中我添加了 TextBlock 并且只想在文本上绘制，而不是在外部绘制。为了实现这一点，我使用了 (GetWindowDC()) 和 (GetPixel()) 方法，然后进行了所需的检查。现在我的应用未能通过 Windows 应用认证工具包测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:56:52.090

您正试图在 Windows RT 环境中调用 Win32 API 函数。这实际上是不可能的，因为 Windows Store 应用程序可以在任何具有 Windows RT 运行时的设备上运行（如平板电脑和手机）。这些环境不支持 Win32 API 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:01:24.837

中可访问的所有内容的[文档](http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx)`WinRT`。请注意，您只能访问 的一小部分，`Win32 API`并且它通过`WinRT API`.

# java - AndEngine SpriteBatch setColor（）不起作用

> ID：15066317
> 
> 赞同：1
> 
> 时间：2013-02-25T11:50:23.923
> 
> 标签：java, android, sprite, andengine

我正在用*AndEngine*编写游戏，然后我将几十个精灵放入一个*SpriteBatch 中*。这需要完成，否则当我自己绘制每个精灵时，帧速率会急剧下降。我的问题是，如何更改完整*SpriteBatch*的颜色？

这就是我创建*SpriteBatch*的方式：

```
ArrayList<Sprite> dozenSprites; // these are all the sprites of one SpriteBatch in a list
SpriteBatch spriteBatch = new SpriteBatch(spriteBatchTextureAtlas, dozenSprites.size(),vertexBufferObjectManager);

for (Sprite sprite : dozenSprites) {
        spriteBatch.draw(sprite);
}
spriteBatch.submit(); 
```

好吧，没有什么特别的。一切准备就绪后，我将*SpriteBatch*附加到我的场景并按预期显示。但是，当我打电话时，`spriteBatch.setColor(0.5f,0.5f,0.5f);`什么也没有发生。*仅当我在绘制SpriteBatch*之前将颜色（...）设置为每个精灵时，颜色才会发生变化我 在这里做错了吗？还有其他方法吗？

每一个小提示都值得赞赏！谢谢你。

**编辑：我的解决方案**
正如*Cameron Fredmans 所*建议的（再次感谢！）我首先尝试`SpriteBatch class`直接扩展并实现该`setColor()`方法。但我不知道怎么做，所以我选择了快速而肮脏的变体：

```
 // initialize the SpriteBatch as above
 // and to change the color call:
 spriteBatch.reset();
 for (Sprite sprite : dozenSprites) {
        sprite.setColor( theNewColor );
        spriteBatch.draw(sprite);
 }
 spriteBatch.submit(); 
```

使用 spriteBatch 带来了更多的性能，保持 ArrayList 与所有原始精灵并每次重新初始化批处理对我来说仍然足够快。但是，当有人成功扩展 SpriteBatch 类时，我当然会非常感兴趣！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T17:07:42.697

尽管 SpriteBatch 有一个 setColor()，但这实际上只是它扩展 Shape 的产物。两种可能的解决方案：

**(1) 分别为每个精灵着色。**

```
ArrayList<Sprite> dozenSprites; // these are all the sprites of one SpriteBatch in a list
SpriteBatch spriteBatch = new SpriteBatch(spriteBatchTextureAtlas, dozenSprites.size(),vertexBufferObjectManager);

for (Sprite sprite : dozenSprites) {
        sprite.setColor(.5f, .5f, .5f);
        spriteBatch.draw(sprite);
}
spriteBatch.submit(); 
```

**(2)在AndEngine中修改SpriteBatch**

如果您真的不想为每个精灵着色，那么如何修改 AndEngine 中的 SpriteBatch 类并添加一个覆盖 setColor() 的方法。向 spritebatch 添加一个颜色字段，让 setcolor 调整该字段，然后在 draw 方法中，让 spritebatch 将它正在绘制的精灵的颜色设置为其存储的颜色字段。

如果你在 AndEngine 中干净地实现它，你甚至可以将它作为对源的可能更改提交。（它是开源的。参与其中很有趣。）

# tsql - 使用 DateDIFF 的复杂 SQL 查询

> ID：15066319
> 
> 赞同：1
> 
> 时间：2013-02-25T11:50:29.067
> 
> 标签：tsql, datediff

我需要编写一个查询以丢弃不超过预定余量（例如 2 秒）的访问日志。也就是说，如果每条记录是由用户在特定日期/时间制作的，我不想让那些其日期/时间不超过与上一条记录的日期/时间相比范围的人。我认为一个例子更清楚。

例子：

```
LogIndex, UserID, Date / Time

1\. 01551, 20.02.2013 17:41:45.000
2\. 01551, 20.02.2013 17:41:45.900 *
3\. 01551, 20.02.2013 17:41:46.150 *
4\. 01551, 20.02.2013 20:41:47.000

5\. 01552, 02/20/2013 17:42:45.000
6\. 01552, 20.02.2013 17:42:46.000 *
7\. 01552, 02/20/2013 19:45:45.000 * 
```

被丢弃的记录，因为它的日期/时间不超过上一条记录的 2 秒余量。在第一种情况下，应该丢弃两条记录，因为它们都没有超过这个边距。

这是创建临时表并添加先前记录以进行测试的代码：

```
CREATE TABLE # TEMP (LogIndex int, UserID nvarchar (10), LogTime datetime)

insert into # temp select 1, '01551 ', '20 / 02/2013 17:41:45.000'
insert into # temp select 2, '01551 ', '20 / 02/2013 17:41:45.900'
insert into # temp select 3, '01551 ', '20 / 02/2013 17:41:46.150'
insert into # temp select 4, '01551 ', '20 / 02/2013 20:41:47.000'
insert into # temp select 5, '01552 ', '20 / 02/2013 17:42:45.000'
insert into # temp select 6, '01552 ', '20 / 02/2013 17:42:46.000'
insert into # temp select 7, '01552 ', '20 / 02/2013 19:45:45.000'

select * from # temp

DROP TABLE # temp 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:37:21.843

您是否考虑过反过来解决任务？

您可以在存储访问日志的表上创建一个`INSERT`-Trigger 并拒绝与前任的时间差小于您定义的数据。获取最后保存的数据并将其与当前数据进行比较应该更容易，`userID`而不是在收集数据后编写一个查询来解决您的任务。

您还可以通过 -Trigger 将这些日志保存在单独的表中`INSERT`（我相信这些数据来自访问控制，因此您不允许删除这些记录，是吗？）

不过，如果您更喜欢事后通过查询来实现，请尝试以下操作：

```
WITH "CTE" AS
(
    SELECT 
        T1.* 
        , diff = DATEDIFF( MS, T2.LogTime, T1.LogTime )
    FROM 
        #TEMP AS T1
        LEFT JOIN #TEMP AS T2
            ON 1 = 1
            AND T1.LogIndex = T2.LogIndex + 1
            AND T1.UserID = T2.UserID
)
, "ROLSUM" AS
(
    SELECT
        *
        , sumDiff = ( SELECT SUM(diff) FROM "CTE" AS C2 WHERE C2.LogIndex <= C1.LogIndex AND C2.UserId = C1.UserId )
    FROM
        "CTE" AS C1
)
SELECT 
    LogIndex, UserID, LogTime
FROM 
    ROLSUM
WHERE
    sumDiff > 2000 OR sumDiff IS NULL 
```

请注意，此查询只是一个提示。它适用于您的演示数据，但如果您添加更多数据，则会失败，`userID`这会添加另一组数据，这些数据应该在之前的有效和无效数据间隔之后被拒绝。

我更喜欢第一个变体。如果您能够更早、更轻松地获得想要的东西，为什么还要存储数据并在之后进行处理？！

# php - php regex 一年前后的一切

> ID：15066320
> 
> 赞同：0
> 
> 时间：2013-02-25T11:50:29.700
> 
> 标签：php, regex

我有这个中间有一年的字符串。我想提取年份以及它之前和之后的所有内容。

我正在使用以下单个正则表达式：

1.  提取日期：`'/\d{4}\b/'`
2.  提取日期之前的所有内容：（`'/(.*?)\d{4}\b/';`我不知道如何从结果中排除日期，但这不是问题......）
3.  提取日期之后的所有内容：（`'/d{4}\/(.*?)\b/'`这个不起作用）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T11:57:19.117

```
$str = 'The year is 2048, and there are flying forks.';
$regex = '/(.*)\b\d{4}\b(.*)/';
preg_match($regex,$str,$matches);

$before = isset($matches[1])?$matches[1]:'';
$after = isset($matches[2])?$matches[2]:'';

echo $before.$after; 
```

* * *

编辑：回答 OP（Luis'）关于拥有多年的评论：

```
$str = 'The year is 2048 and there are 4096 flying forks from 1999.';
$regex = '/(\b\d{4}\b)/';
$split = preg_split($regex,$str,-1,PREG_SPLIT_DELIM_CAPTURE);
print_r($split); 
```

`$split`提供一个数组，如：

```
Array
(
    [0] => The year is 
    [1] => 2048
    [2] =>  and there are 
    [3] => 4096
    [4] =>  flying forks from 
    [5] => 1999
    [6] => .
) 
```

第二个示例还显示了对可解析数据的假设所涉及的风险（请注意，4096 处的分叉数与 4 位数年份相匹配）。

# iphone - 如果打开静音模式，如何停止播放声音

> ID：15066323
> 
> 赞同：0
> 
> 时间：2013-02-25T11:50:42.633
> 
> 标签：iphone, ios, objective-c, avaudioplayer

我的代码：

```
NSString *soundName = [[NSBundle mainBundle] pathForResource:@"music" ofType:@"mp3"];
NSURL *soundURL = [NSURL fileURLWithPath:soundName];
NSError *error = [[NSError alloc] init];
self.backgroundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundURL error:&error];

if (self.backgroundPlayer == nil) {
    NSLog(@"error = %@",[error description]);
} else {
    [self.backgroundPlayer setDelegate:self];
    [self.backgroundPlayer setNumberOfLoops:HUGE_VAL];
    [self.backgroundPlayer setVolume:0.5f];
    [self.backgroundPlayer prepareToPlay];
    if ([self.backgroundPlayer prepareToPlay]) {
        if ([self.backgroundPlayer play]) {
            NSLog(@"playing");
        }
    } else {
        NSLog(@"error!");
    }
} 
```

当我将 iPhone 切换到静音模式时，声音仍在播放。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T12:06:41.770

这个我没试过，但是你可以在播放文件之前设置音频类别：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategorySoloAmbient error:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:11:01.327

```
CFStringRef state;

UInt32 propertySize = sizeof(CFStringRef);

AudioSessionInitialize(NULL, NULL, NULL, NULL);
AudioSessionGetProperty(kAudioSessionProperty_AudioRoute, &propertySize, &state);
if(CFStringGetLength(state) == 0)
{
//SI

    else
    {
    //NOT SILENT

    } 
```

您可以检测手机的状态并停止播放器.. :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:07:48.367

您需要使用 AVAudioSessionCategoryAmbient 进行音频会话。通过[音频会话编程指南](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Basics/Basics.html#//apple_ref/doc/uid/TP40007875-CH2-SW2)。

# magento-1.7 - 我的产品不显示在前端

> ID：15066326
> 
> 赞同：0
> 
> 时间：2013-02-25T11:50:52.783
> 
> 标签：magento-1.7

我在本地服务器上安装了 Magento 1.7.0.0，并在我的 Magentoshop 中添加了新的类别和产品。但它没有显示在主页（frontend-myshop）上......

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:11:55.497

检查以下事项：

*   确保产品设置为活动/可见
*   确保所有类别和产品都在一个“根”类别中
*   查看正确的类别页面。
*   如果产品未显示在父类别中，请确保父类别设置为锚（在管理员中，转到`Catalog > Categories`并在正确的类别中，有一个选项“是锚”，将其设置为“是”。

例如，如果您有一个包含子类别“计算机”和“平板电脑”的类别“电子产品”，如果您希望计算机和平板电脑中的产品显示在此处，则需要将电子产品设置为锚点。

* * *

“锚定”类别还有一种您可能不想要的附加效果。将类别设置为“锚”会激活 Magento 所谓的“分层导航”，这基本上是一些额外的排序和过滤选项。我不知道如何禁用此功能，但如果您不想显示此功能，最简单的解决方案是使用 CSS 隐藏块/div。

# css - Bootstrap CSS 更改自定义 CSS 的字体

> ID：15066328
> 
> 赞同：0
> 
> 时间：2013-02-25T11:50:56.497
> 
> 标签：css, twitter-bootstrap

我有一个当前使用自定义 CSS 文件样式设置的网站，所有这些我都很满意。

现在我想添加[boostrap](http://twitter.github.com/bootstrap/)的东西，因为我想加入很多东西，最值得注意的是一个日期选择器和一个模态对话框。

但是我发现当我添加默认的引导 CSS（.min 和 datepicker 的额外文件）时，我的自定义 CSS 的字体被覆盖。

有没有办法“选择”（因为需要更好的短语）哪个文件获胜？

我想答案将是编辑引导 CSS 或尝试选择您想要的内容，而不是仅仅获取默认的最小文件，我想我试图避免这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:54:46.517

一些 Bootsrap 默认变量可以通过将你的值传递给它们来覆盖，你可以在这里看到它：

[http://twitter.github.com/bootstrap/customize.html#variables](http://twitter.github.com/bootstrap/customize.html#variables)

确保在导入引导程序后覆盖它们，你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:58:54.843

您将需要通过以下方式重新排列您的 css 文件：

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">

<link href="css/datepicker.css" rel="stylesheet">

<link href="/css/yourstylesheet.css" rel="stylesheet"> 
```

# asp.net-mvc - MVC4 试图让安全模型与我的环境一起工作

> ID：15066329
> 
> 赞同：1
> 
> 时间：2013-02-25T11:50:59.897
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我希望有人能够让我走上正确的轨道，现在已经尝试解决这个问题几个小时了。
我目前正在重新开发 Web 应用程序，我想使用 MVC4 属性来管理对应用程序各个部分的访问。我遇到的问题是身份验证和权限都由 Web 应用程序必须与之交互的中间件应用程序处理。

我想知道即使有这个限制，我是否能够使用安全属性并让 Web 应用程序知道用户已通过身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:53:20.233

是的，您将能够使用现有的 Authorize 属性。您所要做的就是编写一个自定义[`Membership`](http://msdn.microsoft.com/en-us/library/f1kyba5e%28v=vs.100%29.aspx)和[`Role`](http://msdn.microsoft.com/en-us/library/8fw7xh74%28v=vs.100%29.aspx)提供程序，它们将使用您现有的服务，而不是依赖默认的 SQL 数据库。

如果您不想经历所有这些麻烦，您还可以编写自定义授权属性（派生自`AuthorizeAttribute`）并在`AuthorizeCore`方法内部调用您的服务以检查当前用户是否具有所需的角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:46:21.740

确实。这不仅是可能的，而且非常容易。如果您可以将 ASP.NET 角色视为“活动”，那么您不需要派生任何东西；您需要的一切都内置。

这些示例假设`securityService`是与您的中间件应用程序通信的服务，并且具有两种方法，`GetUser`并且`GetUserRoles`：

**您的登录操作方法**

```
[HttpPost]
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (!ModelState.IsValid) return View();

    var user = securityService.GetUser(model.Username, model.Password);
    if (user == null)
    {
        ModelState.AddModelError("", "Username or password are incorrect.");
        return View();
    }

    FormsAuthentication.SetAuthCookie(user.Username, model.Remember);
    return Redirect(returnUrl);
} 
```

**在您的 Global.asax.cs**

```
protected void Application_AuthenticateRequest()
{
    if (Request.IsAuthenticated)
    {
        string username = User.Identity.Name;
        string[] roles = securityService.GetUserRoles(username);
        IIdentity identity = new GenericIdentity(username);
        Context.User = new GenericPrincipal(identity, roles);
    }
} 
```

而已。`Login`处理身份验证（当用户登录时），同时`Application_AuthenticateRequest`处理授权（在每个请求上）。然后，您继续装饰您的操作方法，`Authorize(Roles = "XYZ")`确保“XYZ”与您的`GetUserRoles`方法返回的内容相匹配。

# java - Ljava.lang.Object 错误 - Matlab/Java

> ID：15066331
> 
> 赞同：1
> 
> 时间：2013-02-25T11:51:07.490
> 
> 标签：java, matlab, object

我对java很陌生，我正在尝试做一些涉及嵌套类的java，我正在`Matlab`. 所以我有我的内部类和我的外部类，我正在尝试创建这个新类的一个实例，它需要两个`java.lang.Objects`作为它的构造函数，但是当我尝试这样做时，我得到一个错误，它说我试图通过这个`Ljava.lang.Object`而不是一个 java.lang.Object。对此进行了一些关于它是如何编码的名称的研究，但我不太明白。任何帮助将不胜感激，我的代码（来自`Matlab`）如下！

```
>> p = innerclass.getConstructors();

>> p(1) 

ans = 

public innerclassName(java.lang.Object, java.lang.Object)

>> k=javaArray('java.lang.String',3);
>> k(1)=java.lang.String('a');
>> k(2)=java.lang.String('b');
>> k(3)=java.lang.String('c');

>> v=javaArray('java.lang.Integer',3,2);
>> v(1,1) = java.lang.Integer(1);
>> v(2,1) = java.lang.Integer(2);
>> v(3,1) = java.lang.Integer(3);
>> v(1,2) = java.lang.Integer(4);
>> v(2,2) = java.lang.Integer(5);
>> v(3,2) = java.lang.Integer(6);

>> o=[java.lang.Object();java.lang.Object()];
>> o(1) = k;
>> o(2) = v;
>> o.getClass()

ans =

class [Ljava.lang.Object;

>> types=javaArray('java.lang.Class',2) ;
>> types(1)=o.getClass();
>> types(2)=o.getClass();
>> in1 = innerclass.getConstructor(types).newInstance(o)
??? Java exception occurred:
java.lang.NoSuchMethodException: innerclassName.<init>([Ljava.lang.Object;, [Ljava.lang.Object;) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:09:37.990

`[L`in`class [Ljava.lang.Object;`表示该类是紧跟在 L 之后的*数组。另请参阅*[什么是 `[Ljava.lang.Object;?](https://stackoverflow.com/questions/3442090/java-what-is-this-ljava-lang-object)

当您这样做时，您将分配给值“对象数组”的`types(1)=o.getClass();types(2)=o.getClass();`两个元素。然后尝试找到一个构造函数，如果它将*两个对象数组*作为参数，并且没有找到一个，因此.`types``innerclass.getConstructor(types)``innerclass`*`NoSuchMethodException`*

 *要么创建一个构造函数，要么更改to`public innerclassName(java.lang.Object[], java.lang.Object[])`的两个值，这可能是你想要做的（尽管不知道你想做什么，如果你知道你会传入数组，前者可能更合理）。`types``java.lang.Object.class`*

# ios - 我可以将视频从 iphone 应用程序上传到 Twitter 吗？

> ID：15066334
> 
> 赞同：0
> 
> 时间：2013-02-25T11:51:15.873
> 
> 标签：ios, objective-c, xcode

我使用图像和音频文件创建视频。现在我想把它上传到 Twitter、YouTube 和 Facebook 上。我成功地把它上传到了 Facebook 上。

我还没有找到任何通过我的 iPhone 应用程序在 Twitter 和 YouTube 上上传视频的确切链接。

我使用 xcode 4.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:55:04.920

看看[ShareKit](https://github.com/ShareKit/ShareKit)，它是为您的应用程序添加社交媒体支持的最简单方法。我不认为它有 YouTube 对盒子的支持，但我看到人们谈论添加它。

# twitter-bootstrap - Bootstrap 响应式布局无法正常工作

> ID：15066335
> 
> 赞同：0
> 
> 时间：2013-02-25T11:51:20.553
> 
> 标签：twitter-bootstrap

使用引导程序 2.2 我遇到了以下问题：

当我使用响应式布局缩小我的 Firefox 窗口时，导航栏消失了，而我在右上角得到了一个按钮。但是单击该按钮不会执行任何操作（通常应该会弹出菜单）。

我复制了这个 HTML：

[http://www.w3resource.com/twitter-bootstrap/example-responsive-design-with-twitter-bootstrap.html](http://www.w3resource.com/twitter-bootstrap/example-responsive-design-with-twitter-bootstrap.html)

我用以下内容替换了 CSS 和 JS 导入：

```
<link href="bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
<script src="bootstrap/js/bootstrap.js"></script> 
```

这是下载 Bootstrap 时获得的标准 .css 和 js 文件。CSS 和 bootstrap.js 已正确加载。

bootstrap.js 确实包含折叠部分（我在下面粘贴了该部分）

有没有人知道，为什么在折叠后单击按钮没有任何效果？

我使用的是 firefox 18.0.2，响应式布局在打开其他站点时有效。

非常感谢

bootstrap.js 的折叠部分：

```
/* =============================================================
 * bootstrap-collapse.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

!function ($) {

  "use strict"; // jshint ;_;

 /* COLLAPSE PUBLIC CLASS DEFINITION
  * ================================ */

  var Collapse = function (element, options) {
    this.$element = $(element)
    this.options = $.extend({}, $.fn.collapse.defaults, options)

    if (this.options.parent) {
      this.$parent = $(this.options.parent)
    }

    this.options.toggle && this.toggle()
  }

  Collapse.prototype = {

    constructor: Collapse

  , dimension: function () {
      var hasWidth = this.$element.hasClass('width')
      return hasWidth ? 'width' : 'height'
    }

  , show: function () {
      var dimension
        , scroll
        , actives
        , hasData

      if (this.transitioning) return

      dimension = this.dimension()
      scroll = $.camelCase(['scroll', dimension].join('-'))
      actives = this.$parent && this.$parent.find('> .accordion-group > .in')

      if (actives && actives.length) {
        hasData = actives.data('collapse')
        if (hasData && hasData.transitioning) return
        actives.collapse('hide')
        hasData || actives.data('collapse', null)
      }

      this.$element[dimension](0)
      this.transition('addClass', $.Event('show'), 'shown')
      $.support.transition && this.$element[dimension](this.$element[0][scroll])
    }

  , hide: function () {
      var dimension
      if (this.transitioning) return
      dimension = this.dimension()
      this.reset(this.$element[dimension]())
      this.transition('removeClass', $.Event('hide'), 'hidden')
      this.$element[dimension](0)
    }

  , reset: function (size) {
      var dimension = this.dimension()

      this.$element
        .removeClass('collapse')
        [dimension](size || 'auto')
        [0].offsetWidth

      this.$element[size !== null ? 'addClass' : 'removeClass']('collapse')

      return this
    }

  , transition: function (method, startEvent, completeEvent) {
      var that = this
        , complete = function () {
            if (startEvent.type == 'show') that.reset()
            that.transitioning = 0
            that.$element.trigger(completeEvent)
          }

      this.$element.trigger(startEvent)

      if (startEvent.isDefaultPrevented()) return

      this.transitioning = 1

      this.$element[method]('in')

      $.support.transition && this.$element.hasClass('collapse') ?
        this.$element.one($.support.transition.end, complete) :
        complete()
    }

  , toggle: function () {
      this[this.$element.hasClass('in') ? 'hide' : 'show']()
    }

  }

 /* COLLAPSE PLUGIN DEFINITION
  * ========================== */

  var old = $.fn.collapse

  $.fn.collapse = function (option) {
    return this.each(function () {
      var $this = $(this)
        , data = $this.data('collapse')
        , options = typeof option == 'object' && option
      if (!data) $this.data('collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  $.fn.collapse.defaults = {
    toggle: true
  }

  $.fn.collapse.Constructor = Collapse

 /* COLLAPSE NO CONFLICT
  * ==================== */

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }

 /* COLLAPSE DATA-API
  * ================= */

  $(document).on('click.collapse.data-api', '[data-toggle=collapse]', function (e) {
    var $this = $(this), href
      , target = $this.attr('data-target')
        || e.preventDefault()
        || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') //strip for ie7
      , option = $(target).data('collapse') ? 'toggle' : $this.data()
    $this[$(target).hasClass('in') ? 'addClass' : 'removeClass']('collapsed')
    $(target).collapse(option)
  }) 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:43:38.013

通过以下方式在引导程序中创建响应式菜单： JSfiddle with nav [Navigation bootstrap](http://jsfiddle.net/shail/DJtsa/)
注意：您尚未将 jquery 文件包含到您的 html 页面中，请使用以下方式：

```
<link href="bootstrap/css/bootstrap.css" rel="stylesheet">

<link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

<script src="bootstrap/js/bootstrap.js"></script>

<div class="navbar">
<div class="navbar-inner">
  <a data-toggle="collapse" data-target=".nav-collapse" class="btn btn-navbar">
   <i class="icon-bar"></i>
  </a>

<a class="brand" href="">New Icon Menu</a>

    <div class="nav-collapse">
        <ul class="nav nav-pills pull-right">
            <li><a href=""><i class="icon-home icon-2x"></i> Home<br></a>
            </li>
            <li><a href=""><i class=" icon-pencil icon-2x"></i>About Us</a>
            </li>
            <li><a href=""><i class=" icon-briefcase icon-2x"></i>Portfolio</a>
            </li>
            <li><a href=""><i class=" icon-envelope icon-2x"></i>Contact Us</a>
            </li>
        </ul>
    </div>
   </div>
 </div> 
```

# php - PHP - 从连接中同时循环而不是循环

> ID：15066340
> 
> 赞同：0
> 
> 时间：2013-02-25T11:51:35.060
> 
> 标签：php, loops

我正在尝试从公司表中显示公司名称，然后从另一个表中循环输出新闻。这两个表已连接。这意味着：我只想从连接中的一个表中挑选一行，并从连接中的另一个表中循环出数据。这可能吗？我下面的代码仅在我的循环中的新闻表中显示三分之二的帖子。

谢谢！

```
$sql = "SELECT 
            newID, newTitle, newSummary, newDate,
            comID, comName, comImageThumb
        FROM 
            tblNews a RIGHT JOIN tblCompanies b
        ON a.newCompanyID = b.comID
        ORDER BY newDate DESC";

// Get company name and display
$companyData = mysql_fetch_assoc($result);
$comName = $companyData['comName'];

echo "<a href='#' class='name'>$comName</a>";

// Looping news
while($news = mysql_fetch_assoc($result)) {
    // Display news posts
    $newTitle = $news['newTitle'];

    echo $newTitle;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:54:20.860

您应该查看 mysql`GROUP_CONCAT`以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:56:11.640

最简单的解决方案可能是跟踪您是否处于第一次迭代中：

```
// query company name and news entries here

$firstRow = true;
while($news = mysql_fetch_assoc($result)) {
    if ($firstRow) { echo $news['comName']; }
    $firstRow = false;

    echo $news['newTitle'];
} 
```

您还可以保留当前代码并`mysql_data_seek(0)`在先提取公司名称后使用重置光标。

附带说明：不要再使用`mysql_*`函数了！请改用[PDO](http://ca2.php.net/manual/en/ref.pdo-mysql.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:41:30.260

将 fetch 操作移到循环的末尾：

```
$companyData = mysql_fetch_assoc($result);
$comName = $companyData['comName'];

echo "<a href='#' class='name'>$comName</a>";

    // you've already fetched a news item....

$news=$companyData;
do {
   $newTitle = $news['newTitle'];
   echo $newTitle;
} while ($news=mysql_fetch_assoc($result)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:53:30.083

将所有内容放入while循环并尝试：

```
while($news = mysql_fetch_assoc($result)) {
// Get company name and display

$comName = $news ['comName'];

echo "<a href='#' class='name'>$comName</a>";

// Looping news

    // Display news posts
    $newTitle[] = $news['newTitle'];

    echo $newTitle;
} 
```

# datetime - HighChart 中具有相同 xAxis 数据的多个系列

> ID：15066342
> 
> 赞同：3
> 
> 时间：2013-02-25T11:51:39.163
> 
> 标签：datetime, highcharts, time-series

我正在使用 Highchart 在两个 yAxes 和一个日期时间 xAxis 上绘制多个系列（大约 20 个）。数据通过提供 JSON 答案的 PHP 脚本动态加载。到目前为止，一切都很好。

我的问题是，为了符合 Highchart，我必须通过网络发送每个系列的日期时间信息（当然，我可以在仅收到一次日期时间信息后更改 JS 中的 JSON 数据，但这也很麻烦） . 500 个数据点乘以 20 个系列乘以 13 个字节的时间戳 = 每次刷新的 130KB 流量，而其中的 1/20 就足够了。

我的问题是：是否有可能将“系列”（日期时间）信息传递给 xAxis，然后按出现顺序将 yAxes 系列分配给 xAxis 值？即我通过：

[1361796390000,1361796400000,1361796410000] 到 xAxis，[1,2,3] 到 yAxis

Highchart 将 1 分配给 1361796390000，将 2 分配给 1361796400000 等等？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:07:07.950

您实际上不需要为系列中的每个数据点传递日期时间。您只需要传递系列的开始日期时间，然后使用 pointStart 让图表知道何时开始计数，如下所示：

```
series: [{
    name: 'Wind Speed',
    data: [0.52, 0.778, 0.746, 0.594, 0.716, 0.793, 0.648, 0.828, 0.202, 0.066, 0.116, 0.116, 0.17, 0.195, 0.051, 0, 0.368, 2.365, 2.841, 2.693, 2.416, 2.541, 2.429, 2.888],
    pointStart: 1360893600000,
    pointInterval: 3600000
}] 
```

请参阅：http: [//jsfiddle.net/Reality_Extractor/pNFYL/](http://jsfiddle.net/Reality_Extractor/pNFYL/)

pointStart 预计[Unix 时间](http://en.wikipedia.org/wiki/Unix_time)，尽管您可以通过多种不同的方式轻松得出所需的特定时间。出于演示目的，我只是在示例中对其进行了硬编码。

当您使用 pointStart 时，需要 pointInterval 才能准确地将时间分配给数据点。值得注意的是，这只适用于具有常规 pointIntervals 的数据。如果您有不规则的数据，您确实需要为每个数据点提供一个日期时间。

这并不能完全回答您关于将时间作为数组传递然后将其分配给 xAxis 的问题，但我确实相信 pointStart 方法没有数组分配复杂。

此外，有些相关，取决于您的数据更新频率，您应该将其缓存在服务器和客户端上，以防止在数据实际上没有更改时通过网络进行不必要的刷新。

# sql - 从非规范化数据库中导出数据

> ID：15066346
> 
> 赞同：0
> 
> 时间：2013-02-25T11:51:55.967
> 
> 标签：sql, sql-server, database, export

我需要将数据从有**多个列的****非规范化数据库**导出到新的规范化数据库。 一个例子是*Products*表，它有 30 个布尔列（ValidSize1，ValidSize2 ecc...），每条记录都有一个外键，指向一个*Sizes*表，其中有 30 列带有尺寸代码（XS，S，M 等...）。为了获取产品的有效尺寸，我必须扫描两个表并仅在产品上的 ValidSizeX 为真时从 Sizes 表中获取值 SizeCodeX。像这样的东西：

 ****```
Products Table
--------------
ProductCode <PK>
Description
SizesTableCode <FK>
ValidSize1
ValidSize2
[...]
ValidSize30

Sizes Table
-----------
SizesTableCode <PK>
SizeCode1
SizeCode2
[...]
SizeCode30 
```

现在我正在使用重复 30 次的“模板”查询：

```
SELECT
    Products.Code,
    Sizes.SizesTableCode, -- I need this code because different codes can have same size codes
    Sizes.Size_1
FROM Products
INNER JOIN Sizes
ON Sizes.SizesTableCode = Products.SizesTableCode
WHERE Sizes.Size_1 IS NOT NULL
AND Products.ValidSize_1 = 1 
```

我只是将此查询放在一个循环中，并将“_1”替换为循环索引：

```
SET @counter = 1;
SET @max     = 30;
SET @sql     = '';

WHILE (@counter <= @max)
BEGIN
    SET @sql = @sql + ('[...]'); -- Here goes my query with dynamic indexes

    IF @counter < @max
        SET @sql = @sql + ' UNION ';

    SET @counter = @counter + 1;
END

INSERT INTO DestDb.ProductsSizes EXEC(@sql); -- Insert statement
GO 
```

有没有更好、更清洁或更快的方法来做到这一点？我正在使用**SQL Server**，我只能使用**SQL/TSQL**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:15:07.560

您可以使用 SYS.Syscolumns 表准备动态查询以获取行中的所有值

```
DECLARE @SqlStmt                 Varchar(MAX)
 SET @SqlStmt=''
 SELECT @SqlStmt = @SqlStmt + 'SELECT '''+ name +''' column ,  UNION ALL ' 
 FROM SYS.Syscolumns WITH (READUNCOMMITTED)
 WHERE Object_Id('dbo.Products')=Id AND ([Name] like 'SizeCode%' OR [Name] like  'ProductCode%')

  IF REVERSE(@SqlStmt) LIKE REVERSE('UNION ALL ') + '%'
    SET @SqlStmt = LEFT(@SqlStmt, LEN(@SqlStmt) - LEN('UNION ALL '))

   print ( @SqlStmt ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:25:05.717

好吧，似乎一个“干净”（而且速度更快！）的解决方案是[UNPIVOT](http://msdn.microsoft.com/it-it/library/ms177410%28v=sql.105%29.aspx)函数。
我在这里找到了一个很好的例子：

[http://pratchev.blogspot.it/2009/02/unpivoting-multiple-columns.html](http://pratchev.blogspot.it/2009/02/unpivoting-multiple-columns.html)****

# android - 在android中单击ImageView时不可点击

> ID：15066347
> 
> 赞同：0
> 
> 时间：2013-02-25T11:51:56.707
> 
> 标签：android, layout, widget, onclick, imageview

我的应用程序中有 4 个活动，它们是菜单项，如果我单击第一个活动的菜单，所有项目都会显示，但在第二个或前面的活动菜单上是不可点击的，并且菜单项也没有显示，已经给出所有活动的编码相同，但我仍然没有得到结果。这是我的第二个活动的代码

```
public class About extends Activity {
LinearLayout line1, line2;
ImageView menu;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_about);
line1=(LinearLayout) findViewById(R.id.ll1);
line2=(LinearLayout)findViewById(R.id.ll2);

menu=(ImageView)findViewById(R.id.menu);

menu.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {
menu.setVisibility(View.VISIBLE);
// TODO Auto-generated method stub
line1.setVisibility(View.VISIBLE);
 if (line2.getVisibility() == View.INVISIBLE || line2.getVisibility() == View.GONE) {
  line2.setVisibility(View.VISIBLE); } 
 else { 
  line2.setVisibility(View.INVISIBLE); 
 } 
 }
});

      ImageView home = (ImageView) findViewById(R.id.home);
      home.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v){
            startActivity(new Intent(About.this, Home.class));
         }
          });

      ImageView jobs = (ImageView) findViewById(R.id.jobs);
       jobs.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v){
            startActivity(new Intent(About.this, Jobs.class));
         }
          });

      ImageView log = (ImageView) findViewById(R.id.log);
      log.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v){
            startActivity(new Intent(About.this, Login.class));
         }
          });

      ImageView about = (ImageView) findViewById(R.id.about);
      about.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v){
            startActivity(new Intent(About.this, About.class));
         }
          }); 
```

xml 代码。

```
<LinearLayout
android:id="@+id/ll1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@color/black" 
android:layout_alignParentTop="true"
android:layout_alignParentRight="true">

  <ImageView
android:id="@+id/menu"
android:layout_width="50dp"
android:layout_height="50dp"
android:src="@drawable/menu" />
  </LinearLayout>

 <LinearLayout
android:id="@+id/ll2"
android:layout_width="199dp"
android:layout_height="wrap_content"
android:background="@color/black" 
android:layout_toRightOf="@+id/ll1"
android:visibility="gone"
>

<ImageView
android:id="@+id/about"
android:layout_width="50dp"
android:layout_height="50dp"
android:layout_above="@+id/textView1"
android:layout_toLeftOf="@+id/jobs"
android:src="@drawable/about" />

<ImageView
android:id="@+id/jobs"
android:layout_width="50dp"
android:layout_height="50dp"
android:src="@drawable/jobs" />

 <ImageView
  android:id="@+id/log"
  android:layout_width="50dp"
  android:layout_height="50dp"
  android:src="@drawable/log" />

 <ImageView
android:id="@+id/home"
android:layout_width="50dp"
android:layout_height="50dp"
android:src="@drawable/home" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:25:03.423

尝试添加`android:clickable="true"`到布局 xml 中的每个 ImageView。

# objective-c - 调用超类中的Objective C setter而不是子类

> ID：15066352
> 
> 赞同：0
> 
> 时间：2013-02-25T11:52:25.537
> 
> 标签：objective-c, overriding, nsnull

我正在尝试继承 UILabel 以便设置器 setText 检查 null 以避免如果提供的参数是 NSNULL: [NSNull isEqualToString:]: unrecognized selector sent to instance

代码如下。我进入了一个调试器，它没有进入我调用的新设置器：

```
 [someSubClassLabel setText:someValueWhichMayBeNull]; 
```

其中 someSubClassLabel 是 UILabelWithNULLHandler。

在.h

```
#import <UIKit/UIKit.h>
@interface UILabelWithNULLHandler : UILabel
- (void) setText:(NSString *) newText;
@end 
```

在.m中定义了方法：

```
- (void) setText:(NSString *) newText
{
    if(![newText isKindOfClass:[NSNull class]])
    {
        super.text = newText;
    }
    else
    {
        super.text = @"";
    }
} 
```

编辑：我想我可以添加代码来处理 nil，但目前，我正在处理从 NSDictionary 中提取的 NSNUll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:02:40.383

@Hot Licks 是对的。我的故事板中仍然有一个 UILabel。需要在自定义类下的身份检查器中设置新的类名。

# php - 使用 php 获取日期时间选择器的值

> ID：15066356
> 
> 赞同：-1
> 
> 时间：2013-02-25T11:52:49.547
> 
> 标签：php, html, datetimepicker

此代码是一个 html 代表表单上的日期选择器控件，我想获取该值以便将其插入 Mysql DB，我使用 Php

我尝试过类似的方法：$_POST[我不知道这里要包含什么]

提前致谢

```
<li class="form-line form-line-column" id="id_10">
    <label class="form-label-top" id="label_10" for="input_10"> National ID :<span class="form-required">*</span> </label>
    <div id="div" class="form-input-wide"><span class="form-sub-label-container">
      <input class="form-textbox validate[required]" id="q10_10[day]" name="day1" type="tel" size="2" maxlength="2" value="23" />
      <span class="date-separate">&nbsp;/</span>
      <label class="form-sub-label" for="q10_10[day]" id="sublabel_day"> Day </label>
      </span><span class="form-sub-label-container">
        <input class="form-textbox validate[required]" id="q10_10[month]" name="month1" type="tel" size="2" maxlength="2" value="02" />
        <span class="date-separate">&nbsp;/</span>
      <label class="form-sub-label" for="q10_10[month]" id="sublabel_month"> Month </label>
        </span><span class="form-sub-label-container">
          <input class="form-textbox validate[required]" id="birth_date" name="year1" type="tel" size="4" maxlength="4" value="2013" />
      <label class="form-sub-label" for="birth_date" id="sublabel_year"> Year </label>
          </span><span class="form-sub-label-container"><img alt="Pick a Date" id="input_10_pick" src="images/calendar.png" align="absmiddle" />
      <label class="form-sub-label" for="input_10_pick"> &nbsp;&nbsp;&nbsp; </label>
          </span> </div>
  </li>

$natdate = date_create(sprintf('%d/%d/%d', $_POST['year1'], $_POST['month1'], $_POST['day1']);

 $sql="INSERT INTO memdata(NatDate)
VALUES('$natdate') 
```

当我尝试这个时，我得到解析错误：语法错误，意外';'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:55:19.503

我不确定，但也许应该是：

```
$date = $_POST['day1'].'/'.$_POST['month1'].'/'.$_POST['year1']; 
```

`i have concat the day , month and year together.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:56:27.310

```
Day :  $_POST["day1"]
Month: $_POST["month1"]
Year:  $_POST["year1"] 
```

看看这个例子： [http ://www.w3schools.com/php/php_post.asp](http://www.w3schools.com/php/php_post.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:04:50.743

MySQL 日期字段接受 Ymd 格式的日期。

尝试

```
$date = $_POST['year1'].'/'.$_POST['month1'].'/'.$_POST['day1']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:07:04.970

这将获取数据，验证它是否是正确的日期并对其进行格式化，以便您可以将其传递给 MySQL（最好通过 PDO）。

```
$date = date_create(sprintf('%d/%d/%d', $_POST['year1'], $_POST['month1'], $_POST['day1']); 
```

# node.js - 编辑 node.js 核心文件不起作用

> ID：15066357
> 
> 赞同：0
> 
> 时间：2013-02-25T11:52:52.370
> 
> 标签：node.js, ubuntu

我试图更好地了解节点的工作原理，因此我进行了更改`/usr/lib/nodejs/fs.js`，更改似乎没有按预期工作，所以我添加`throw "fasd"; process.exit();`到开头`fs.js`，期望需要该模块崩溃的所有其他脚本，但是它没有发生：`require('fs'); console.log("i don't care");`成功打印该行。

我的操作系统是 Ubuntu 12.04，`dpkg -L nodejs | grep fs.js$`没有显示任何其他文件，我尝试在`fs.js`in 中搜索`/usr`，但也没有找到另一个 fs.js。

我确实意识到更改核心文件是不行的，我稍后会恢复更改，但现在我试图找出为什么我的更改被忽略了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:23:23.143

显然核心模块，例如`fs`被编译成[二进制文件](http://nodejs.org/api/modules.html#modules_core_modules)，所以我求助于复制文件并使用`require('./fs')`.

# powerbuilder - PowerBuilder、DataWindow 条件格式

> ID：15066358
> 
> 赞同：2
> 
> 时间：2013-02-25T11:52:54.217
> 
> 标签：powerbuilder

我有带有“名称”和“代码”的 DataWindow。同样在这个 DW 的 SELECT 中，我有 PM。如果 PM 为空，那么我希望名称为粗体。

我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T12:18:07.163

您应该执行以下步骤：

1.  打开数据窗口
2.  选择“名称”列
3.  点击“字体”标签页（右侧）
4.  粗体复选框右侧有一个小方块（单击它，将出现表达式弹出窗口）
5.  粘贴这个：

    if(IsNull(PM), 700, 0)

列值将根据需要加粗。

兄弟。加博尔

# android - 水平 listView 一次可见 1 个项目

> ID：15066360
> 
> 赞同：4
> 
> 时间：2013-02-25T11:53:00.427
> 
> 标签：android, android-listview

我想`Horizontal listView`一次只用一个可见的项目来实现。我已经实施[了这个项目](http://www.dev-smart.com/archives/34)，但这些项目彼此相邻。

我希望一次屏幕中只有一项，滚动时下一项应该进入

# neo4j - Spring data neo4j DynamicProperties 去掉前缀

> ID：15066361
> 
> 赞同：2
> 
> 时间：2013-02-25T11:53:01.910
> 
> 标签：neo4j, spring-data-neo4j

我有一个这样的实体：

```
@NodeEntity
public class User {
    @GraphId
    private Long id;
    private DynamicProperties properties = new DynamicPropertiesContainer();
} 
```

我放在动态属性中的所有属性都会添加一个前缀`"properties-"`，我可以配置一些东西来删除它吗，比如我在这个属性中放了一个键“name”和值“Neo”，我可以获得一个属性“name”但没有“属性名称”？

谢谢

# apache - Apache 重定向问题

> ID：15066369
> 
> 赞同：0
> 
> 时间：2013-02-25T11:53:40.627
> 
> 标签：apache, mod-rewrite, redirect

我认为这个重定向会起作用，但它不是：

```
RewriteCond %{HTTP_HOST} ^(.*)\.sub\.my-domain\.com$
RewriteRule ^(.*)$ http://sub.my-domain.com/$0 [R=301,L] 
```

它应该像这样工作：

```
*.sub.my-domain.com -> sub.my-domain.com
123.sub.my-domain.com -> sub.my-domain.com
asdf.sub.my-domain.com -> sub.my-domain.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:22:04.763

最好的方法是使用虚拟主机容器，因为它不需要任何额外的解析即可工作。

将所有内容重定向到，`sub.my-domain.com`同时保留任何路径

```
<VirtualHost *:80>
    ServerName *.sub.my-domain.com
    Redirect permanent / http://sub.my-domain.com/
</VirtualHost> 
```

然后你就有了正常的虚拟主机容器`sub.my-domain.com`。

如果你想用重写来做，你需要这个。它检查主机是否正确，如果不正确则重定向

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_HOST} !^sub\.my-domain\.com$ [NC]
RewriteRule ^(.*)$ http://sub.my-domain.com/$1 [R=301,NC,L] 
```

# sql - 基于多个条件排序

> ID：15066375
> 
> 赞同：0
> 
> 时间：2013-02-25T11:54:08.990
> 
> 标签：sql

我正在做一个练习，我将在数据库上发起一个查询并获得大约 500 个结果。现在我想根据一些条件对这个列表进行排序，并在客户端显示排序后的列表。我正在使用 Java/Java EE 和 MySQL 服务器 5.5 条件是这样的，示例：考虑一个列出了汽车的表所以，我将在表上触发一个查询，它将列出大约 500 辆汽车。现在我想根据用户标准对这个列表进行排序。条件是车龄、车色和车内设施。列表应该像这样排序首先出现满足所有三个条件的汽车列表，即最终用户提到的相同年龄，相同颜色和所有设施用户选择。第二个出现任意 2 个满足汽车列表的条件和一个不满足的条件。第三个出现满足汽车列表的任何一个条件，而不是其他两个。

我怎样才能做到这一点。我在谷歌上搜索过，在 irc 频道中询问过这个问题。无法得到任何帮助。我尝试通过定义 CASES 并最终按 RANK 排序来使用 RANK 函数。当条件字段（列）在同一个表中时，它对我有用。在我的情况下，这些字段来自父表及其与父表具有多对一关系的子表。就像在这个例子中一样，汽车的年龄和颜色存储在父表中，汽车拥有的设施存储在另一个表中。我尝试使用内部连接做同样的事情，但没有运气。

我试过这样的事情：

询问：

```
select distinct t0.id,t0.name,t0.price,
CASE
WHEN   
t1.age='2' AND t1.colour='Red'  AND t2.facilities_id=9 THEN 1
WHEN   
 t1.age='2' AND t1.colour='Red' AND t2.facilities_id!=9  THEN 2 
WHEN  
t1.age='2' AND t1.colour!='Red'  AND t2.facilities_id=9  THEN 3
WHEN   
t1.age!='2' AND t1.colour='Red'  AND t2.facilities_id=9  THEN 4
WHEN   
t1.age!='2' AND t1.colour='Red'  AND t2.facilities_id!=9  THEN 5
WHEN   
t1.age='2' AND t1.colour!='Red'  AND t2.facilities_id!=9  THEN 6
WHEN   *
t1.age!='2' AND t1.colour!='Red'  AND t2.facilities_id=9  THEN 7
ELSE 8
END as pre_status
from cars_listing t0
inner join
cars_listing_details t1
on t0.id=t1.mg_listing_id
inner join
cars_facilities_listing t2 
on t1.cars_listing_id=t2.listing_id
where t0.type='new_cars'
order by pre_status 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:01:18.230

尝试通过类似...的方式订购

```
order by
   case when first_condition then 1 else 0 end
  + case when second_condition then 1 else 0 end
  + case when third_condition then 1 else 0 end  DESC

select distinct 
      t0.id,
      t0.name,
      t0.price,
      case when t1.age = '2' then 1 else 0 end as MatchedAge,
      case when t1.colour='Red' then 1 else 0 end as MatchedColor,
      case when t2.facilities_id = 9 THEN 1 else 0 end as MatchedFacility
   from 
      cars_listing t0
         inner join cars_listing_details t1
            on t0.id = t1.mg_listing_id
            inner join cars_facilities_listing t2 
               on t1.cars_listing_id = t2.listing_id
   where 
      t0.type = 'new_cars'
   order by 
        case when t1.age = '2' then 1 else 0 end
      + case  when t1.colour='Red' then 1 else 0 end
      + case when t2.facilities_id = 9 THEN 1 else 0 end DESC 
```

如果一个领域的优先级更高——比如一辆红色汽车，你甚至可以按顺序比另一个领域赋予更多的权重……所以设施 5 的红色汽车将在设施 9 的蓝色汽车之前显示将顺序更改为类似

```
 order by 
        case when t1.age = '2' then 1 else 0 end
      + case  when t1.colour='Red' then 5 else 0 end  <-- applyi higher Wgt to color match vs other criteria
      + case when t2.facilities_id = 9 THEN 1 else 0 end DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:15:41.427

好吧，我已经在我的项目中完成了动态 sql where 条件。它可能会帮助你。我为 SELECT 查询创建了一个存储过程。（我已经在**SQL Server 2008 R2**中完成了）。如果您需要更多帮助，请告诉我。

```
USE [DATABASE_NAME]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[PROCEDURE_NAME]
@Id int = NULL,
@Requester varchar(20) = NULL,
@Suggester varchar(20) = NULL
AS
BEGIN
    DECLARE @sql nvarchar(4000)

    SELECT @sql='SELECT Id, Suggester, Requester from DATABASE_NAME.dbo.TABLE_NAME WHERE 1=1 '
    If (@Id) IS NOT NULL
            SELECT @sql=@sql + ' AND Id=(@Id) '
    If (@Suggester) IS NOT NULL
            SELECT @sql=@sql + ' AND Suggester like (@Suggester) '
    If (@Requester) IS NOT NULL
            SELECT @sql=@sql + ' AND Requester like (@Requester) '
    EXEC sp_executesql @sql, N'@id int, @Requester varchar(20), @Suggester varchar(20)', 
                   @Id, @Requester, @Suggester
END

GO 
```

在这个 SP 中；Id,Requester,Suggester 是字段名称。

# javascript - Angularjs自定义表单控件范围重复

> ID：15066377
> 
> 赞同：2
> 
> 时间：2013-02-25T11:54:12.593
> 
> 标签：javascript, coffeescript, angularjs, angularjs-directive

我创建了一个简单的 angularjs 指令来输入城市和邮政编码。它工作得很好，除非我在同一个控制器中使用它两次，输入字段中的值是重复的！我相信这是一个范围问题，但我不知道如何解决？

```
FDVilleModule = angular.module('FDVille', []).
  directive('fdVille', () ->
    return {
      restrict: 'E'
      require: 'ngModel'

      template: """                                                                                                                                                                                                                                                             
        <div class=\"row-fluid\">                                                                                                                                                                                                                                               
          <div class=\"span4\">                                                                                                                                                                                                                                                 
            <input                                                                                                                                                                                                                                                              
              ng-model=\"cp\"                                                                                                                                                                                                                                                   
              ng-change=\"edit()\"                                                                                                                                                                                                                                              
              maxlength=\"5\"                                                                                                                                                                                                                                                   
              type=\"text\"                                                                                                                                                                                                                                                     
              class=\"input-block-level\"                                                                                                                                                                                                                                       
              placeholder=\"Code Postal\" />                                                                                                                                                                                                                                    
          </div>                                                                                                                                                                                                                                                                
          <div class=\"span8\">                                                                                                                                                                                                                                                 
            <select ng-model=\"selected_ville\"                                                                                                                                                                                                                                 
              ng-options=\"v.id as v.nom for v in villes\"                                                                                                                                                                                                                      
              class=\"input-block-level\">                                                                                                                                                                                                                                      
            </select>                                                                                                                                                                                                                                                           
          </div>                                                                                                                                                                                                                                                                
        </div>"""

      link: (scope, elem, attr, ctrl) ->
        scope.$watch('selected_ville', (value)->
          ctrl.$setViewValue(value))

      controller: ($scope) ->
        download_villes = (cp) -> $.getJSON('/ws/villes/cp', {cp:cp}, set_data)
        download_villesid = (id) -> $.getJSON('/ws/villes/id', {id:id}, set_init_data)

        set_data = (results) ->
          $scope.villes = results
          $scope.selected_ville = results[0].id if results.length
          $scope.$apply()

        saved_cp = ""
        $scope.edit = () ->
          if isNaN($scope.cp)
            $scope.cp = saved_cp
          else
            saved_cp = $scope.cp
            if saved_cp.length == 5
              download_villes(saved_cp)
            else
              $scope.selected_ville = null
              $scope.villes = []
    }
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:15:01.740

实际上我在文档中找到了答案：

> 范围 - 如果设置为：
> 
> true - 然后将为此指令创建一个新范围。如果同一元素上的多个指令请求一个新范围，则只会创建一个新范围。新的范围规则不适用于模板的根，因为模板的根总是获得一个新的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T20:00:43.747

在其他情况下，您可以尝试

```
replace: true 
```

注意：您需要有一个根元素。

这是我们不知道的读者的文档链接：

[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

# android - 从非活动中完成活动

> ID：15066378
> 
> 赞同：7
> 
> 时间：2013-02-25T11:54:17.757
> 
> 标签：android, android-activity, android-alertdialog

我正在开发一个应用程序。我想从第一个活动中调用一个警报对话框。警报对话框是在另一个非活动类中编写的。应用程序的需要是调用活动应该从写在非活动类中的警报完成。调用警报的代码如下。

从第一个活动中调用警报：

```
public class Activity1 extends Activity {
    /** Called when the activity is first created. */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_layout);
    }// End of onCreate.

        /** Back Button. */
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            String message = "Do you Want to Exit.";
            Utility.callAlert(message, getApplicationContext());
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }   
} 
```

具有警报对话框的被调用类是：

```
public class Utility {
    // callAlert method to display alert, when exception occur.
    public static void callAlert(String message, final Context context){
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
        alertDialogBuilder.setTitle("MyApplication.");
        alertDialogBuilder.setMessage(message);
        alertDialogBuilder.setNeutralButton("Ok", new DialogInterface.OnClickListener() {                   

            public void onClick(DialogInterface dialog, int which) {
                ((Activity1)context.getApplicationContext()).finish();
            } //end onClick.
        }); // end alertDialog.setButton.
        alertDialogBuilder.show();  
    }
} 
```

但这给了我错误：

```
02-25 17:00:45.961: D/AndroidRuntime(444): Shutting down VM
02-25 17:00:45.961: W/dalvikvm(444): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-25 17:00:45.971: E/AndroidRuntime(444): FATAL EXCEPTION: main
02-25 17:00:45.971: E/AndroidRuntime(444): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.view.ViewRoot.setView(ViewRoot.java:531)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.app.Dialog.show(Dialog.java:241)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
02-25 17:00:45.971: E/AndroidRuntime(444):  at com.xxx.myapp.specialclasses.Utility.callAlert(Utility.java:25)
02-25 17:00:45.971: E/AndroidRuntime(444):  at com.xxx.myapp.activities.Activity1.onKeyDown(Activity1.java:149)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.view.KeyEvent.dispatch(KeyEvent.java:1256)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.app.Activity.dispatchKeyEvent(Activity.java:2078)
02-25 17:00:45.971: E/AndroidRuntime(444):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1663)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2560)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2535)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1867)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.os.Looper.loop(Looper.java:123)
02-25 17:00:45.971: E/AndroidRuntime(444):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-25 17:00:45.971: E/AndroidRuntime(444):  at java.lang.reflect.Method.invokeNative(Native Method)
02-25 17:00:45.971: E/AndroidRuntime(444):  at java.lang.reflect.Method.invoke(Method.java:507)
02-25 17:00:45.971: E/AndroidRuntime(444):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-25 17:00:45.971: E/AndroidRuntime(444):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-25 17:00:45.971: E/AndroidRuntime(444):  at dalvik.system.NativeStart.main(Native Method)
02-25 17:05:46.061: I/Process(444): Sending signal. PID: 444 SIG: 9 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T11:58:41.630

代替：

```
Utility.callAlert(message, getApplicationContext()); 
```

利用：

```
Utility.callAlert(message, Activity1.this); 
```

和

```
public void onClick(DialogInterface dialog, int which) {
                ((Activity)context).finish();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T11:57:19.347

尝试这个：

```
public class Utility {
  // callAlert method to display alert, when exception occur.
  public static void callAlert(String message, final Activity activity){
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(activity);
    alertDialogBuilder.setTitle("MyApplication.");
    alertDialogBuilder.setMessage(message);
    alertDialogBuilder.setNeutralButton("Ok", new DialogInterface.OnClickListener() {                   

        public void onClick(DialogInterface dialog, int which) {
            activity.finish();
        } //end onClick.
    }); // end alertDialog.setButton.
    alertDialogBuilder.show();  
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-02T07:50:24.373

我想我知道你的答案，因为我自己做过一次。这是我的代码，它运行良好！

((Activity)context) 可以用来调用你的Activity。

```
NonActivityClass nonActivityClass = new NonActivityClass(YourActivityClass.this);
nonActivityClass.finishIt(); 
```

这是非活动类。

```
public class NonActivityClass() {
    private Context context;

    public NonActivityClass(Context context) {
        this.context=context;
    }

    public void finishIt() {
        //Remember to import android.app.Activity; in this class!
        ((Activity)context).finish(); //This destroy the your activity class
    }
} 
```

此外，它还可用于从非 Activity 类运行您的 UI 线程。例如，

```
((Activity)context).runOnUiThread() {
    //Your stuff here!
} 
```

希望对你有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:01:00.137

试试这个，你不是在创造`Dialog`

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context).create(); 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-02-25T11:57:12.987

在活动中，创建一个新类

```
static public void finishThisActivity() {
    finish();
} 
```

并从您的对话类中调用它

```
YourActivityName.finishThisActivity(); 
```

或尝试

```
YourActivityName.finish(); 
```

# c# - 如何使用 xml 在 MSTest 中创建参数化性能测试？

> ID：15066382
> 
> 赞同：3
> 
> 时间：2013-02-25T11:54:27.693
> 
> 标签：c#, visual-studio-2010, mstest, load-testing, performance-testing

我需要使用 MSTest (LoadTests) 和 Visual Studio 2010 生成一些性能测试。我需要对一个 restful 服务进行测试并收集指标。

我已经创建了一个请求一个 URL 的集成测试（类似于`http://hostname/get/201212`或任何 ID 的东西）。后来我创建了一个负载测试并设法执行数千次集成测试并调查响应时间和服务器指标（CPU 负载、内存等）

现在我需要执行类似的场景，但每个测试都需要从包含数千个的给定 XML 读取不同的 ID。这个想法是没有任何缓存。

**到目前为止我已经尝试/想到了什么？**

1.  “冒泡排序”解决方案是创建数千个测试，每个测试都有一个 id。不可行
2.  下一种方法是创建一个读取 xml 的测试，遍历它并发出请求。这种方法的问题是我将结束一个需要几分钟才能运行的大型测试。
3.  我有一个可能的解决方法，使用**[ClassInitialize]**从 XML 加载所有 ID，并使用**[TestInitialize]**在每次测试执行时更改全局变量...

我不确定最后一个选项是否是最好的。**MSTests 中是否有任何机制允许我使用从 XML 读取的不同 ID 执行 LoadTests？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:03:08.743

我不喜欢回答我自己的问题，但我把它放在这里，以供将来有同样问题的人参考。

**为什么其他第三个选项是错误的**

第三个选项的问题是，在具有 1000 次迭代且 ID 列表为 1000**的 LoadTest 中，LoadTest 使用第一个 ID 运行 1000 次**而不是 1000 次，每个 ID 都有一个。我使用了某种 nosql 分析器来证明这一点。

**如果我的 Loadtest 有 1000 次迭代并且我的 csv 列表有 1000 个 ID，则使用以下解决方案，每个 ID**将执行 1000 个测试。如果你的 LoadTest 有更多的迭代，比如 2000，那么在 LoadTest 中，1001 将从 csv 列表的开头重新开始。

**我的解决方案**

注意：此解决方案使用 csv 文件。它可以很容易地适应使用另一个不同的数据源，如 xml、excel、SQL server 中的表等。

实现此目的的正确选项是使用 DataSource属性**创建测试。**例如，您创建一个**csv**文件，其中包含要在测试中使用的 ID。我的 csv 文件示例：

```
ID
1003002-20121211120000
1004071-20121211120000 
```

您需要在测试中添加**DataContext**：

```
private TestContext testContextInstance;
public TestContext TestContext
{
    get { return testContextInstance; }
    set { testContextInstance = value; }
} 
```

最后，你的测试应该是这样的：

```
 [TestMethod,DeploymentItem("DataOrigin\\list.csv"), DataSource("Microsoft.VisualStudio.TestTools.DataSource.CSV", "|DataDirectory|\\list.csv", "list#csv", DataAccessMethod.Sequential)]
    public void TestScenario_1_DATADRIVEN()
    {
        // PREPARATION
        string ID = TestContext.DataRow["ID"].ToString();
        string querystring = CreateQueryWithErrorDebug(ID);

        // EXECUTION
        string result = RunXCCQuery(querystring);

        // ASSERTS
        Assert.IsTrue(result.Length > 0);
        Assert.IsTrue(result.Contains(ID));
    } 
```

**DeploymentItem**属性复制 csv 文件。**DataSource**属性读取它并遍历它。

此行是您的测试从 TestContext 读取的位置。

```
string ID = TestContext.DataRow["ID"].ToString(); 
```

**CSV 文件中有 n 个 ID 将导致测试运行 n 次，每个 ID 一个。**

我在调查中发现了一些有用的链接：

*   [MSDN 信息](http://msdn.microsoft.com/en-us/library/ms182527.aspx)
*   [StackOverflow 中的这个问题](https://stackoverflow.com/questions/13923203/data-driven-mstest-datarow-is-always-null)
*   [MSDN 解释如何访问不同的DataSources](http://msdn.microsoft.com/en-us/library/ms243192%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:54:22.223

> “冒泡排序”解决方案是创建数千个测试，每个测试都有一个 id。不可行

完全同意。这是不可能的。

> 下一种方法是创建一个读取 xml 的测试，遍历它并发出请求。这种方法的问题是我将结束一个需要几分钟才能运行的大型测试。

这种方法不是负载测试。您一次只有一个测试发送一个请求。

我认为最好的方法是有一些变化的第三种方法。我解决类似问题的方法是：

1.  创建一个类（比方说`DataInput`），它将为每个测试提供不同的数据。
2.  正在从 scv 文件中`DataInput`读取数据，并具有提供我想要的数据的静态方法（例如 getNextUserName）。
3.  在`[ClassIntialize]`我创建一个静态`DataInput`对象。
4.  在`[TestInitialize]`我通过从`DataInput`.

这样所有的测试都有不同的数据。

# hibernate - javax.validation.validationException : 必须创建至少一条自定义消息

> ID：15066391
> 
> 赞同：3
> 
> 时间：2013-02-25T11:55:04.873
> 
> 标签：hibernate, validation, jsf

根据用hibernate JSR 303 chackCase [contraintValidator编写的checkCase约束验证器](http://docs.jboss.org/hibernate/validator/4.2/reference/en-US/html_single/#validator-customconstraints-constraintannotation)

```
public boolean isValid(Group group, ConstraintValidatorContext constraintValidatorContext) {
    boolean isValid = false;
    ...

    if(!isValid) {
        constraintContext.disableDefaultConstraintViolation();
        constraintValidatorContext
            .buildConstraintViolationWithTemplate( "{my.custom.template}" )
            .addNode( "myProperty" ).addConstraintViolation();
    }
    return isValid;
} 
```

在 JSF using 中应用此验证器`<f:validateBean>`将导致此异常： javax.validation.validationException：如果在使用此验证器时
默认错误消息被禁用，则必须创建至少一条自定义消息

```
package com.mycompany;

import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;

public class CheckCaseValidator implements ConstraintValidator<CheckCase, String> {

    private CaseMode caseMode;

    public void initialize(CheckCase constraintAnnotation) {
        this.caseMode = constraintAnnotation.value();
    }

    public boolean isValid(String object, ConstraintValidatorContext constraintContext) {

        if (object == null)
            return true;

        if (caseMode == CaseMode.UPPER)
            return object.equals(object.toUpperCase());
        else
            return object.equals(object.toLowerCase());
    }

} 
```

没有**constraintValidatorContext**会在`<h:messages>`

# dos - 从txt文件中提取数据？

> ID：15066392
> 
> 赞同：0
> 
> 时间：2013-02-25T11:55:06.570
> 
> 标签：dos, extract

从文本文件中提取数据，该文件包含以下内容，例如：

```
<img src="a.jpg" alt="abc" height="12px" width="12px">
<div class="ab3" id="1122">
<img src="b.jpg" alt="abc" height="12px" width="12px">
<div class=cd5" id="9876"> 
```

我想从上面显示的文本文件中提取“id”值......输出应该是：

```
1122
9876 
```

我尝试使用 findstr、find 等（DOS-COMMANDS），但无法找到完美的正则表达式，

还有其他方法吗，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:06:16.420

我同意@izogfif，您应该考虑一些其他工具来完成这项任务。

但是，为了回答你的要求，我得到了这个正则表达式：

```
id="[0-9]+" 
```

它会给你这样的输出：

```
id="1122"
id="9876" 
```

从那里你可以保存这些结果（或使用管道，但是你在 DOS 中这样做），然后是这个正则表达式：

```
[0-9]* 
```

会给你这个输出：

```
1122
9876 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T12:55:39.237

使用以下代码：

```
( id=")[^"]*" 
```

这将匹配任何 Id 的值。

您可以替换`id`为您正在搜索的任何属性。

# vb.net - EF：如何查询本地数据

> ID：15066394
> 
> 赞同：0
> 
> 时间：2013-02-25T11:55:19.237
> 
> 标签：vb.net, entity-framework

这是EF4。我有一个简单的问题。假设我向上下文对象添加了一些销售订单，例如：

```
Dim NewOrder = context.SalesOrders.CreateObject()
NewOrder.Number= 123
context.SalesOrders.AddObject(NewOrder) 
```

我还没有调用 SaveChanges() 并且想看看在上下文中是否有一个 Number=123 的订单使用这个：

```
context.SalesOrder.FirstOrDefault(Function(x) x.Number=123) 
```

为什么上面的查询什么都不返回？它是在搜索数据库而不是本地上下文对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:58:18.490

数字是 SalesOrder 实体的主键吗？

如果是这样，您可以只使用 .Find() 因为它首先查询本地实体，然后才在本地实体集合中找不到任何内容时才查询数据库：

```
context.SalesOrders.Find(number); 
```

请注意，与其他 LINQ 操作一样，find 只能接受主键，不能接受 lambda。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:15:14.043

您可以通过对象状态管理器搜索本地实体：（C# 语法，但 VB.NET 等效项对您来说应该很明显）

```
context.ObjectStateManager.GetObjectStateEntries(EntityState.Added | EntityState.Modified | EntityState.Unchanged).Select(entry => entry.Entity).OfType<SalesOrder>() 
```

这实际上`DbSet.Local`也是幕后的工作。将其作为通用辅助函数在您的上下文中提供可能是值得的。

# c++ - 为什么 C++ 被视为静态语言

> ID：15066397
> 
> 赞同：0
> 
> 时间：2013-02-25T11:55:26.180
> 
> 标签：c++, static, programming-languages

从我的朗诵课上——

> 在[自由变量](http://en.wikipedia.org/wiki/Free_variables_and_bound_variables)中（在函数激活中）：
> 
> *   静态范围：自由变量在函数定义出现的上下文中进行评估。包括许多你知道的：ML、Java、C++。
>     
>     
> *   动态范围：函数体中的自由变量在函数调用的上下文中进行评估
>     
>     
> *   静态语言：通用 包括许多你知道的：ML、Java、C++ 优点 模块化 编译器更容易访问变量

你能举一个例子来描述为什么 C++ 被认为是**静态语言**吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:02:10.480

静态语言的意思是“静态类型语言”。例如，变量的类型不能在编译时更改和静态定义。
[但不是因为你提到的任何原因]

```
int i = 10; 
```

`i`int 可以是 char。

例如，在相反的 Python 中：

```
>>> x = "yourname"      # x is pointing string 
>>> x = 5               # x pointing number 
```

所以Python是“动态类型语言”的一个例子</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:01:38.327

当在编译时而不是运行时执行类型检查时，据说编程语言使用静态类型。`In C++, variables need to be defined before they are used so that compilers know what type they are, and hence is statically typed`.

请看下面的文章

[http://www.jvoegele.com/software/langcomp.html](http://www.jvoegele.com/software/langcomp.html)
[http://existentialtype.wordpress.com/2011/03/19/dynamic-languages-are-static-languages/](http://existentialtype.wordpress.com/2011/03/19/dynamic-languages-are-static-languages/)
[http://en.wikipedia.org /wiki/Type_system](http://en.wikipedia.org/wiki/Type_system)
[http://en.wikipedia.org/wiki/C%2B%2B](http://en.wikipedia.org/wiki/C%2B%2B)

# ios - 我可以像在 Android 中那样通过 ID 获取视图的实例吗？

> ID：15066399
> 
> 赞同：2
> 
> 时间：2013-02-25T11:55:36.540
> 
> 标签：ios, objective-c, cocoa-touch, uiview

我有一个表格视图，它是在 Interface Builder 中添加的。如何在视图控制器中获取它的实例？

有没有像在Android中使用的方法`getViewById()`？

如果是这样，我在哪里给视图提供它的 ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T12:08:35.503

我认为你是 iPhone sdk 的初学者，解决方案如下：

1.  首先在视图控制器的 .h 文件中，添加这些行，`IBOutlet UITableview * myTableView;`
2.  现在打开同一视图控制器的 .Xib 文件，然后将`TableView`xib 链接到文件所有者，那里`TableView`将出现名称。
3.  还要链接`Tableview`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:01:10.080

`UITableView`以编程方式创建和添加并使用它对象（*这仅用于`UITableView`*）。

```
self.tblView            = [[UITableView alloc] init];
self.tblView.frame      = CGRectMake(0, 87, self.view.frame.size.width, 374);
self.tblView.delegate   = self;
self.tblView.dataSource = self;
[self.view addSubview:self.tblView]; 
```

这`self.tblView`是`UITableView`您可以根据需要使用它的对象。

或者获取子视图的每个对象`UIView`

```
NSArray *subViewArray = [self.view subviews];
for (id obj in subViewArray)
{
  // here **`obj`** get each object of subView of UIView.
} 
```

# magento - 在 Magento 中做事的多种方式——哪一种是正确的？（我的例子是属性集/组）

> ID：15066401
> 
> 赞同：0
> 
> 时间：2013-02-25T11:55:38.113
> 
> 标签：magento, magento-1.7

更多的是一个最佳实践问题，因为我不想走错路。

Magento Wiki 中的以下链接显示了如何以编程方式添加属性集：[here](http://www.magentocommerce.com/wiki/5_-_modules_and_development/catalog/programmatically_adding_attributes_and_attribute_sets)。

看来您也可以使用该类`Mage_Eav_Model_Entity_Setup`并访问其中的方法来添加属性等，即

```
$groupSetup = new Mage_Eav_Model_Entity_Setup('core_setup');
$groupSetup->addAttributeSet($entityTypeId, $name); 
```

在我看来，第二个选项更快更简单，但是否有关于如何添加这些数据的规则？即一个选项可能会改变而另一个选项不会？

# oracle - 如何在 Oracle 中查找授予用户的权限和角色？

> ID：15066408
> 
> 赞同：81
> 
> 时间：2013-02-25T11:55:51.007
> 
> 标签：oracle, security, oracle10g, user-accounts

我用的是Linux，Oracle10g。我创建了一个名为 test 的用户。并授予同一用户的创建会话和选择任何字典权限。

我还将 sysdba 和 sysoper 角色授予相同的用户。

现在我想显示授予用户的所有权限和角色。我发现了以下查询，但它仅显示创建会话和选择字典权限。

```
select privilege 
from dba_sys_privs 
where grantee='SAMPLE' 
order by 1; 
```

请帮助解决问题。

谢谢

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-01-15T21:21:35.587

除了 VAV 的回答，第一个在我的环境中最有用

```
select * from USER_ROLE_PRIVS where USERNAME='SAMPLE';
select * from USER_TAB_PRIVS where Grantee = 'SAMPLE';
select * from USER_SYS_PRIVS where USERNAME = 'SAMPLE'; 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-02-25T12:01:43.800

看看[http://docs.oracle.com/cd/B10501_01/server.920/a96521/privs.htm#15665](http://docs.oracle.com/cd/B10501_01/server.920/a96521/privs.htm#15665)

使用这些选择语句检查 USER_SYS_PRIVS、USER_TAB_PRIVS、USER_ROLE_PRIVS 表

```
SELECT * FROM USER_SYS_PRIVS; 
SELECT * FROM USER_TAB_PRIVS; 
SELECT * FROM USER_ROLE_PRIVS; 
```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2016-04-01T02:52:44.887

其他答案都不适合我，所以我写了自己的解决方案：

**从 Oracle 11g 开始。**

将 USER 替换为所需的用户名

**授予角色：**

```
SELECT * 
  FROM DBA_ROLE_PRIVS 
 WHERE GRANTEE = 'USER'; 
```

**直接授予用户的权限：**

```
SELECT * 
  FROM DBA_TAB_PRIVS 
 WHERE GRANTEE = 'USER'; 
```

**授予用户的角色权限：**

```
SELECT * 
  FROM DBA_TAB_PRIVS  
 WHERE GRANTEE IN (SELECT granted_role 
                     FROM DBA_ROLE_PRIVS 
                    WHERE GRANTEE = 'USER'); 
```

**授予的系统特权：**

```
SELECT * 
  FROM DBA_SYS_PRIVS 
 WHERE GRANTEE = 'USER'; 
```

如果要查找当前连接的用户，可以将表名中的 DBA 替换为 USER 并删除 WHERE 子句。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-10-28T16:49:57.180

结合前面的建议来确定您的个人权限（即“用户”权限），然后使用：

```
-- your permissions
select * from USER_ROLE_PRIVS where USERNAME= USER;
select * from USER_TAB_PRIVS where Grantee = USER;
select * from USER_SYS_PRIVS where USERNAME = USER;

-- granted role permissions
select * from ROLE_ROLE_PRIVS where ROLE IN (select granted_role from USER_ROLE_PRIVS where USERNAME= USER);
select * from ROLE_TAB_PRIVS  where ROLE IN (select granted_role from USER_ROLE_PRIVS where USERNAME= USER);
select * from ROLE_SYS_PRIVS  where ROLE IN (select granted_role from USER_ROLE_PRIVS where USERNAME= USER); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-12-16T15:28:53.250

如果通过某些角色将权限授予用户，则可以使用以下 SQL

```
select * from ROLE_ROLE_PRIVS where ROLE = 'ROLE_NAME';
select * from ROLE_TAB_PRIVS  where ROLE = 'ROLE_NAME';
select * from ROLE_SYS_PRIVS  where ROLE = 'ROLE_NAME'; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-24T16:20:30.203

```
SELECT * 
FROM DBA_ROLE_PRIVS 
WHERE UPPER(GRANTEE) LIKE '%XYZ%'; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-15T09:16:57.563

```
select * 
from ROLE_TAB_PRIVS 
where role in (
    select granted_role
    from dba_role_privs 
    where granted_role in ('ROLE1','ROLE2')
) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-11T23:23:40.303

始终使 SQL 可重用：-:)

```
-- ===================================================
-- &role_name will be "enter value for 'role_name'".
-- Date:  2015 NOV 11.

-- sample code:   define role_name=&role_name
-- sample code:   where role like '%&&role_name%'
-- ===================================================

define role_name=&role_name

select * from ROLE_ROLE_PRIVS where ROLE = '&&role_name';
select * from ROLE_SYS_PRIVS  where ROLE = '&&role_name';

select role, privilege,count(*)
 from ROLE_TAB_PRIVS
where ROLE = '&&role_name'
group by role, privilege
order by role, privilege asc
; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-08T13:15:23.407

我能够理解的唯一可见结果是首先与我想获得权限的用户联系，然后使用以下查询：

```
SELECT GRANTEE, PRIVILEGE, TABLE_NAME FROM USER_TAB_PRIVS; 
```

# c++ - 如何识别 Qt 中哪个 QObject 发出了信号？

> ID：15066410
> 
> 赞同：1
> 
> 时间：2013-02-25T11:55:58.653
> 
> 标签：c++, qt

`QLineEdit`我的*主窗口*中有很多。我将`editingFinished()` `SIGNAL`每个对象的 连接到`SLOT`我`QMainWindow`班级中的一个。我想实现自己的***撤消/重做***功能。我发现***Qt Undo 框架*** *很难理解并且实现起来很复杂*。所以我想维护一个`QList <QLineEdit *> undoList;`将存储`QLineEdit`被修改的 's 的序列。我正在维护一个`int`变量来跟踪当前状态。撤消/重做完成后，我可以简单地更新`int`变量并找到`QLineEdit`在该状态下编辑的变量，然后调用`undo()`它`QLineEdit`。目前我最大的问题是，因为我已经将我所有的`QLineEdit`'s 连接到一个`SLOT`，我没有关于哪个`QLineEdit`发出的信息`SIGNAL`。所以我想知道是否有任何方法可以让我理解哪个`QLineEdit`发出了`SIGNAL`. 谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T11:59:24.903

在插槽内使用`sender()`以获取`QObject`发出连接到它的信号的那个。

# jquery - 动画渐进式虚线 HTML5 Canvas & Jquery

> ID：15066411
> 
> 赞同：5
> 
> 时间：2013-02-25T11:56:02.110
> 
> 标签：jquery, html, canvas

如何修改以下代码以使绘制的线为虚线，您可以在提供的 jfiddle 中看到它的实际效果。

```
<html>
    <style>
        #canvas
        {
        border-style:solid;
        border-width:1px;
        }
    </style>
    <div id="canvas"> 
        <p>Hover over me</p>        
    </div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</html>

$(function() {

    animateLine = function(canvas, hoverDivName, colorNumber, pathString) {
        $('#' + hoverDivName).hover(

        function() {
            var line = canvas.path(pathString).attr({
                stroke: colorNumber
            });
            var length = line.getTotalLength();

            $('path[fill*="none"]').animate({
                'to': 1
            }, {
                duration: 5000,
                step: function(pos, fx) {
                    var offset = length * fx.pos;
                    var subpath = line.getSubpath(0, offset);
                    canvas.clear();
                    canvas.path(subpath).attr({
                        stroke: colorNumber
                    });

                },
            });
        }, function() {
            $('path[fill*="none"]').stop(true, false).fadeOut();
        });
    };

    var canvas = Raphael('canvas', 200, 200);
    var pathString = "M10 10L10 200L100 200Z";

    animateLine(canvas, "canvas", "#000", pathString);

}); 
```

[http://jsfiddle.net/eA8bj/](http://jsfiddle.net/eA8bj/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T12:17:07.363

使用“stroke-dasharray”属性：

[http://jsfiddle.net/eA8bj/70/](http://jsfiddle.net/eA8bj/70/)

[https://developer.mozilla.org/en-US/docs/SVG/Attribute/stroke-dasharray](https://developer.mozilla.org/en-US/docs/SVG/Attribute/stroke-dasharray)

例如：

```
 canvas.path(subpath).attr({
                stroke: colorNumber,
                "stroke-dasharray":"--"
            }); 
```

# javascript - 使用 Sinon 在 Javascript 中测试私有成员

> ID：15066412
> 
> 赞同：16
> 
> 时间：2013-02-25T11:56:02.263
> 
> 标签：javascript, testing, mocha.js, sinon

我开始编写一些 javascript 测试并试图找出检查模块构造函数的私有成员的最佳方法。例如，在下面的示例中，我使用显示模块模式将公共 api 公开给我的模块。我想测试在ajax 请求`privateVar`回调期间是否正确设置。`$.getJSON`

第二个测试`it('should update privateVar', ...),`不起作用，因为`myModule.privateVar`（故意）不在模块的公共 api 中。

所以，我的问题是，**测试这种行为的最佳方法是什么，而不必使 privateVar 成为公共 api 的一部分？**有没有更好的方法来考虑这个代码进行测试，或者可能有一种方法可以使用像 SinonJs 这样的东西来监视私人成员？

```
define('myModule',
    ['jquery'],
    function ($) {
        var
            myVar = "something",
            privateVar = "something else",

            doSomething = function() {
                return $.getJSON('http://myapi.com/do-something', { requestData : "some data" }, function(response){
                    myVar = response.data.value1;
                    privateVar = response.data.value2;
                });
            };

        return {
            doSomething : doSomething,
            myVar : myVar
        };
    }
);

define('test/test.myModule',
    ['myModule', 'chai', 'sinon', 'mocha'],
    function (myModule, chai, sinon) {

        describe("myModule", function() {
            var expect = chai.expect;

            describe('doSomething', function() {

                var value1 = 'value1 value',
                    value2 = 'value2 value';

                beforeEach(function() {
                    sinon.stub($, 'ajax').yieldsTo('success', {
                        data : { value1 : value1, value2 : value2 }
                    });
                });

                afterEach(function() {
                    $.ajax.restore();
                });

                it('should update myVar', function(done) {
                    myModule.doSomething();
                    expect(myModule.myVar).to.equal(value1);
                    done();
                });

                it('should update privateVar', function(done) {
                    myModule.doSomething();
                    expect(myModule.privateVar).to.equal(value2);
                    done();
                });
            });

        });

    }
); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T09:22:37.063

不幸的是，您在这里谈论的内容需要集成测试，您希望测试一个变量是否是由于外部操作而设置的，您应该相信外部方法只适用于您的测试，因为您在测试中将其存根已经完成了 sinon 这需要处理外部调用。

您需要做的是控制测试的条件（比如说未经身份验证和身份验证），然后测试该实例中函数的结果。作为一项规则，我通常根本不测试私有成员，但我会测试由已知的好值和坏值导致的期望行为。

我不久前也读过[这篇](http://blog.millermedeiros.com/a-case-against-private-variables-and-functions-in-javascript/)文章，其中讨论了私有变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T23:39:50.643

以这种方式访问​​私有变量的唯一方法是添加一个公共 getter，您可以稍后在测试中调用它来验证状态：

在你的课堂上：

> getPrivateVar : function(){ return privateVar; }

然后添加到return语句：

> 返回 { getPrivateVar : getPrivateVar, };

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T10:28:53.210

实际上为什么要测试私有变量？这是不可能/困难的。该变量的目的是什么？如果它要作为参数传递给函数，当然可以通过监视函数是否使用分配给私有变量的特定值来调用函数来测试函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-08T16:23:24.233

您可以使用重新布线

```
let revertBack = renderCtrl.__set__(privateMember,substituteMember); 
```

要恢复，只需调用 revertBack(); 有关更多详细信息，请参阅[https://www.npmjs.com/package/rewire](https://www.npmjs.com/package/rewire)

# java - Imap idle(false) 未收到所有电子邮件

> ID：15066415
> 
> 赞同：0
> 
> 时间：2013-02-25T11:56:14.517
> 
> 标签：java, imap, jakarta-mail

我尝试实现一个邮件服务器，该服务器使用 sun IMAPFolder 和 idle 命令解析传感器发送的电子邮件。

不幸的是，空闲状态在 30 分钟后关闭并引发 FolderClosedException。为了模拟在空闲重新启动时电子邮件到达的最坏情况，我在异常正文中发送了一封测试电子邮件，并查看电子邮件是否被处理。

我的代码：

```
public void run() {
    try {
        Properties props = System.getProperties();
        props.setProperty("mail.imap.connectiontimeout", "5000");
        props.setProperty("mail.imap.timeout", "5000");

        for(;;) {
            try {
                Session session = Session.getInstance(props, null);
                Store store = session.getStore("imap");
                store.connect("localhost", "test@email.db.de", "testpw1");
                Folder folder = store.getFolder("inbox");

                if ((folder == null) || !folder.exists()) {
                    logger.error("folder -inbox- is invalid.");
                    return;
                }

                folder.open(Folder.READ_WRITE);

                // Add messageCountListener to listen for new messages
                folder.addMessageCountListener(new MessageCountAdapter() {
                    @Override
                    public void messagesAdded(MessageCountEvent event) {
                        Message[] messages = event.getMessages();
                        processMessages(messages);                  
                    }               
                });     

                logger.debug("idle start");
                IMAPFolder f = (IMAPFolder) folder;
                f.idle();   //idle state

            } catch (FolderClosedException ex) {
                logger.info("idle timeout");
                long time = Calendar.getInstance().getTimeInMillis();
                DateFormat df = DateFormat.getDateTimeInstance();
                SendEmail.send("test@email.db.de", "TestSubject", "This mail is sent when idle is off" + df.format(new Date(time));
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }//endfor

    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

不幸的是，我得到了两个不同的输出，我不知道为什么。

有时会处理电子邮件：

```
02/25/2013 11:45:04.202 DEBUG [Thread-0]    logger     - idle start
02/25/2013 12:15:04.202 INFO  [Thread-0]    logger     - idle timeout
This mail is sent when idle is off 25.02.2013 12:15:04
02/25/2013 12:15:04.235 DEBUG [Thread-0]    logger     - idle start
Got 1 new messages
02/25/2013 12:15:04.267 DEBUG [Thread-0]    logger     - idle start 
```

有时不是：

```
02/25/2013 10:41:28.895 DEBUG [Thread-0]    logger     - idle start
02/25/2013 11:11:28.898 INFO  [Thread-0]    logger     - idle timeout
This mail is sent when idle is off 25.02.2013 11:11:28
02/25/2013 11:11:28.962 DEBUG [Thread-0]    logger     - idle start 
```

我的目标是不再抛出 folderClosedException 或始终处理捕获正文中的电子邮件。

我怎样才能做到这一点？为什么我这里有两种类型的输出？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:23:09.360

IDLE 仅持续 30 分钟。之后，远程服务器可以关闭您的 TCP 连接。连接关闭时，您将看不到新电子邮件。（但是您应该能够在重新连接时通过比较 EXISTS 计数和 UID 来获取它）。

更好的做法是在大约 29 分钟时中断 IDLE，并在服务器关闭 TCP 连接之前重新建立它。

您仍然应该处理连接中断，因为这些可能由于多种原因而发生。

# ruby-on-rails - rails partial rspec 中的 view.stub 给出了“未定义的方法 view_context”

> ID：15066417
> 
> 赞同：4
> 
> 时间：2013-02-25T11:56:18.363
> 
> 标签：ruby-on-rails, rspec

使用 Rails 3.2.11

我有几个视图 rspec 测试，我需要在其中存根“current_user”调用。

我在常规视图测试中成功使用了它，如下所示：

```
require 'spec_helper'

describe "projects/_my_project.html.erb" do

  before(:each) do
    @client = FactoryGirl.create(:user)
    view.stub(:current_user) { @client }  
  end

  describe "new proposals notice" do
    it "does not display new_propsals if in state posted and clicked after last submitted"  do
      @my_project = FactoryGirl.build(:project, status: "posted", last_proposals_click: "2012-02-02 14:01:00", last_proposal_submitted: "2012-02-02 14:00:00")
      render :partial => "/projects/my_project", :locals => { :my_project => @my_project }
      rendered.should_not have_content "You received new proposals"
    end
  end
end 
```

Current_user 由 Devise 在 controllers/helpers.rb （在 gem 中）中定义。我在视图或控制器中到处使用它作为 current_user（作为方法，而不是实例）。

问题似乎与 view.stub 中的视图有关，此处为 nil，是否有另一个对象用于部分情况？我只是不明白为什么这在常规视图中很完美，而不是在部分视图中。

我得到：

```
Failure/Error: view.stub(:current_user) { @client }
 NoMethodError:
   undefined method `view_context' for nil:NilClass 
```

这是视图中的行，其中 current_user 用于完整性：

```
<% if my_project.user_id == current_user.id %> 
```

有谁知道我怎样才能成功地存根 current_user，我在这里不知所措......

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T10:24:17.487

事实证明，将 view.stub(:current_user) { @client } 移动到每个“it”块中解决了问题；如果它位于“之前：每个/全部”块中，它似乎不起作用。

# php - 从 cakephp 中的给定 url 中提取所有命名参数

> ID：15066421
> 
> 赞同：0
> 
> 时间：2013-02-25T11:56:46.350
> 
> 标签：php, cakephp, cakephp-2.0

我对此有1个疑问...

我有一个这样的网址

[http://www.SpiderWeb.com/vendors/search_results/scid:0/atr:1/mbp:1/bc:2/bc:1/mbpo:2/atrt:5/atop:1/opel:4](http://www.SpiderWeb.com/vendors/search_results/scid:0/atr:1/mbp:1/bc:2/bc:1/mbpo:2/atrt:5/atop:1/opel:4)

我想提取数组 vars 中的所有命名参数，以便我拥有变量的名称以及它在 url 中的值，以便我可以将它们用于某些处理......

有什么方法可以让我通过一些内置功能来实现这一点，而不是单独分配它们

IE

```
$some_var = $this->request->params['named']['id']; 
```

我想要它的原因是因为命名参数是动态的......

这是针对此的更新解决方案...

```
<?php
$url = 'http://www.SpiderWeb.com/vendors/search_results/scid:0/atr:1/mbp:1/bc:2/bct:1/mbpo:2/atrt:5/atop:1/opel:4';
$arr_url = parse_url($url);
//print_r($arr_url);
$res  = explode("/vendors/search_results/",$arr_url['path']);
//print_r($res);
//print_r($res[1]);
$vars  = explode("/",$res[1]);
//print_r($vars);
$result = array();
foreach($vars as $key => $val){
  if (strpos($val, ":") !== false) {
     $newvars  = explode(":",$val);
     //print_r($newvars);
     $result[$newvars[0]] = $newvars[1];
  }
}
print_r($result);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:06:35.143

只需遍历命名的 params 数组

```
foreach ($this->request->params['named'] as $name => $param) {
   pr("The param name is {$name}");
   pr("The param value is {$param}");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:58:38.390

尝试这个 ：

```
$url = 'http://www.SpiderWeb.com/vendors/search_results/scid:0/atr:1/mbp:1/bc:2/bc:1/mbpo:2/atrt:5/atop:1/opel:4';

$myarr = parse_url($url);

$res  = explode("/",$myarr['path']);

foreach($res as $val){
  if (strpos($val, ":") !== false) {
     $vars  = explode(":",$val);
     $$vars[0]  = $vars[1];
  }
}

echo $scid; 
```

# nhibernate - 如何使用nhibernate使用外键引用获取第二个表（财务）中不存在的第一个表（项目）中的记录

> ID：15066424
> 
> 赞同：1
> 
> 时间：2013-02-25T11:56:53.550
> 
> 标签：nhibernate, fluent-nhibernate

我正在尝试查询 nhibernate 和 MSSQL 中的简单数据结构

**dbo.Projects** : Id(int, not null)

**dbo.Finances** : Id(int, not null), ProjectId(int,not null), dbo.projects 的外键引用

我想获取项目表中不存在于财务表中的所有记录，其中财务表具有外键引用 ProjectId。我要从 EntityFramework 迁移到 (Fluent) Nhibernate 3？

```
 //So far I have got here: 
    public IQueryable<ProjectModel> GetProjectsNotPresentInFinance()
    {
        var factory = Fluently.Configure()
            .Database(MsSqlConfiguration
                .MsSql2008
                    .ConnectionString(m_connectionString))
            .Mappings(m => m.FluentMappings
                .AddFromAssemblyOf<ProjectMap>()                   
               ).BuildSessionFactory();

        using (var session = factory.OpenSession())
        {
            var allprojects = session.QueryOver<ProjectModel>();
            var projectsToReturn = allprojects.List<ProjectModel>().AsQueryable();

       //---    Something like : all the records not in finances table ---------
       // .Where( proj => !db.Finances.Where(fin => fin.ProjectId == proj.Id).Any())
       // .Select(project => new ProjectModel
       // {
       //     Id=project.Id,
       //     ProjectName = project.ProjectName,                 
       // });

            return projectsToReturn;
        }            

    }

public class FinanceModel
{
    public virtual int Id { get; set; }
    public virtual int ProjectId { get; set; }       
}

public class ProjectModel
{
    public virtual int Id { get; set; }
    public virtual string ProjectName { get; set; }
}

public class ProjectMap:ClassMap<ProjectModel>
{
    public ProjectMap() {
        Table("Projects");
        Id(x => x.Id);
        Map(x => x.ProjectName);
    }
}

public class FinanceMap : ClassMap<FinanceModel>
{
    public FinanceMap()
    {
        Table("Finances");
        Id(x => x.Id);
        References(x => x.ProjectModel);
    }
}

    //-------------------------------------------------------
    //This is an Equivalent working code Using EntityFramework :
    public IQueryable<ProjectModel> GetProjectsNotPresentInFinance() {
        IQueryable<ProjectModel> projectList = db.Projects
        .Where( proj => !db.Finances.Where(fin => fin.ProjectId == proj.Id).Any())
        .Select(project => new ProjectModel
        {
            Id=project.Id,
            ProjectName = project.ProjectName,                 
        });
        return projectList;
    }
    //------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:33:16.137

再三考虑，您可以在不更改任何映射的情况下尝试使用子查询：

```
var notOrphanProjectIdsSubquery = QueryOver.Of<FinanceModel>()
                                    .Select(x => x.ProjectId);

var orphanProjects =  session.QueryOver<ProjectModel>()
                         .WithSubquery
                         .WhereProperty(x=>x.Id)
                         .NotIn(notOrphanProjectIdsSubquery)
                         .List(); 
```

------------------------**初步回答**

假设您的班级中有一个映射的`Finances`属性`Project`，并且根据[https://stackoverflow.com/a/14980450/1236044](https://stackoverflow.com/a/14980450/1236044)，它应该类似于：

```
var orphanProjects = session.QueryOver<ProjectModel>()
    .WhereRestrictionOn(x => x.Finances).IsEmpty()
    .List(); 
```

我必须承认我不精通 FluentNH。我猜类和映射应该是这样的，希望我不会让你走错路……

```
public class FinanceModel
{
    public virtual int Id { get; set; }
    public virtual int ProjectId { get; set; }       
    public virtual ProjectModel Project{get;set;}
}

public class ProjectModel
{
    public virtual int Id { get; set; }
    public virtual string ProjectName { get; set; }
    public virtual IList<FinanceModel> Finances { get; set; }
}

public class ProjectMap:ClassMap<ProjectModel>
{
    public ProjectMap() {
        Table("Projects");
        Id(x => x.Id);
        Map(x => x.ProjectName);
        HasMany(x => x.Finances);
    }
}

public class FinanceMap : ClassMap<FinanceModel>
{
    public FinanceMap()
    {
        Table("Finances");
        Id(x => x.Id);
        References(x => x.Project);
    }
} 
```

# list - 按标题获取列表项

> ID：15066427
> 
> 赞同：1
> 
> 时间：2013-02-25T11:57:06.323
> 
> 标签：list, sharepoint-2010

谁能帮我解决这个问题。问题是，我有清单，其中有项目。通常我们通过 ID 而不是标题访问列表项。

```
/Lists/Issue%20Log/DispForm.aspx?ID=118&ContentTypeId=0x010001B2A64F3F5AF64BB47CC5044286787E 
```

我们得到了按 TITLE 访问列表项的新要求

```
/Lists/Issue%20Log/DispForm.aspx?Title=Help me to call list item by title. 
```

通过访问带有标题的项目不起作用。任何人都可以让我知道我必须做什么才能按标题获取列表项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:53:28.743

我敢打赌，开箱即用是不可能的。

1.  您可以添加过滤器 WebPart 并帮助他们更轻松地找到他们的项目。或者
2.  您可以创建一个读取 URL 查询的 WebPart 进行查找（假设标题是唯一的）并重定向页面以显示所需的项目。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T05:59:51.067

可以这样尝试：

```
http://yourSharePoint.com/Lists/ListName/DispForm.aspx?Title=YourItemTitle 
```

希望能帮助到你

# rfc - RFC 4122 版本 4 的最大长度

> ID：15066429
> 
> 赞同：5
> 
> 时间：2013-02-25T11:57:11.530
> 
> 标签：rfc

我看到[http://www.ietf.org/rfc/rfc4122.txt](http://www.ietf.org/rfc/rfc4122.txt)

RFC 4122 第 4 版的最大长度是多少？换句话说，它是否总是与从文档中获取的示例字符串值相同的最大长度？f81d4fae-7dec-11d0-a765-00a0c91e6bf6

我认为答案在于“UUID 字符串表示的正式定义由以下 ABNF 提供”部分

为了数据库表列（varchar），我想要第二个意见。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-05T20:27:54.900

根据[RFC 4122](http://www.ietf.org/rfc/rfc4122.txt)：

> UUID 的长度为 128 位，可以保证跨时空的唯一性。

但是如果我们想知道字符串表示，我们需要检查 ABNF：

```
 UUID                   = time-low "-" time-mid "-"
                           time-high-and-version "-"
                           clock-seq-and-reserved
                           clock-seq-low "-" node
  time-low               = 4hexOctet
  time-mid               = 2hexOctet
  time-high-and-version  = 2hexOctet
  clock-seq-and-reserved = hexOctet
  clock-seq-low          = hexOctet
  node                   = 6hexOctet
  hexOctet               = hexDigit hexDigit
  hexDigit =
        "0" / "1" / "2" / "3" / "4" / "5" / "6" / "7" / "8" / "9" /
        "a" / "b" / "c" / "d" / "e" / "f" /
        "A" / "B" / "C" / "D" / "E" / "F" 
```

我们总共有 16 个 hexOctet。我们用 hexOctet 计算 2 个字符加上字符“-”的 4 倍。**无论版本如何，**我们总共有 16 * 2 + 4 = 36 个字符。

# asp.net - 无法在服务器上上传两个不同的框架网站

> ID：15066430
> 
> 赞同：1
> 
> 时间：2013-02-25T11:57:12.503
> 
> 标签：asp.net, iis, application-pool

我正在尝试在服务器上上传两个不同的框架（2.0 和 4.0）网站。

如果启用了 iis 目标框架 4.0，那么我的网站 2.0 会显示错误：`Server Application Unavailable`

如果启用了 iis 目标框架 2.0，那么我的网站 4.0 会显示错误

```
Unrecognized attribute target Framework. 
 Note that attribute names are case-sensitive. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:59:14.233

## 编辑1

问题可能是`Framework`。由于它是区分大小写
的您可以按如下方式设置框架

```
<compilation debug="true" targetFramework="4.0"> 
```

## 老的

您需要创建不同的应用程序池。
一个应用程序池应该正在使用`framework 2.0`
，另一个应用程序池应该相应地`framework 4.0`
在两个应用程序中使用 Apply。

这是一个很好的链接
[http://www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0](http://www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0)
[MSDN 文章链接](http://technet.microsoft.com/en-us/library/cc731784%28v=ws.10%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:00:21.880

一个 IIS 应用程序只能在一个框架下运行。然而，每个应用程序都被分配到一个应用程序池，该应用程序池确定要运行的框架版本。

您可以简单地创建一个与不同版本的框架一起使用的新应用程序池。

有关如何执行此操作的详细信息，请参阅[MS Technet 文章。](http://technet.microsoft.com/en-us/library/cc731784%28v=ws.10%29.aspx)

来自 IIS7 的文章：

1.  打开 IIS 管理器。有关打开 IIS 管理器的信息，请参阅打开 IIS 管理器 (IIS 7)。

2.  在 Connections 窗格中，展开服务器节点并单击 Application Pools。

3.  在应用程序池页面的操作窗格中，单击添加应用程序池。

4.  在“添加应用程序池”对话框中，在“名称”框中键入应用程序池的友好名称。

5.  从 .NET Framework 版本列表中，选择托管应用程序、模块和处理程序所需的 .NET Framework 版本。或者，如果您在此应用程序池中运行的应用程序不需要 .NET Framework，请选择“无托管代码”。

6.  从托管管道模式列表中，选择以下选项之一：

    *   集成，如果您想使用集成的 IIS 和 ASP.NET 请求处理管道。

    *   经典，如果您想分别使用 IIS 和 ASP.NET 请求处理模式。在经典模式下，托管代码是通过使用 Aspnet_isapi.dll 而不是 IIS 7 集成管道来处理的。

7.  选择立即启动应用程序池以在启动 WWW 服务时启动应用程序池。默认情况下，此选项处于选中状态。

8.  单击确定。

# symfony - Symfony 2.2 和 Monolog 流处理程序 - 自动创建目录

> ID：15066437
> 
> 赞同：3
> 
> 时间：2013-02-25T11:57:35.460
> 
> 标签：symfony, monolog

我使用 Symfony 2.2 和 Monolog 包。

我在 Monolog 中的处理程序：

```
monolog:
    handlers:
        type: stream
        path: "%kernel.logs_dir%/%kernel.environment%/my-path/error.log"
        level: error 
```

但如果目录不存在，流处理程序不会自动创建目录。如何自动创建目录？可以事件调度程序，但我在独白上看不到事件（（

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:14:40.790

解决这个问题：

*   创建自己的流处理程序
*   覆盖基本流处理程序

例子：

流处理程序：

```
namespace Acme\DemoBundle\Component\Monolog;

use Monolog\Handler\StreamHandler as BaseStreamHandler;

class StreamHandler extends BaseStreamHandler
{
    /**
     * @{inerhitDoc}
     */
    public function write(array $record)
    {
        if (null === $this->stream) {
            // From original monolog stream handler
            if (!$this->url) {
                throw new \LogicException('Missing stream url, the stream can not be opened. This may be caused by a premature call to close().');
            }

            $dir = dirname($this->url);

            if (!is_dir($dir)) {
                if(!@mkdir($dir, 0777, TRUE)) {
                    // Control errors
                }
            }
        }

        parent::write($record);
    }
} 
```

并覆盖 symfony monolog 包中的基本流处理程序：

```
<parameter key="monolog.handler.stream.class">Acme\DemoBundle\Component\Monolog\StreamHandler</parameter> 
```

**注意：** 这是 Symfony 2 包中覆盖独白处理程序的基本示例！

# android - Android In-App Billing 添加项目

> ID：15066442
> 
> 赞同：0
> 
> 时间：2013-02-25T11:58:12.310
> 
> 标签：android, in-app-billing

我正在根据文档为我的应用程序实施应用计费

*   [下载示例应用程序](http://developer.android.com/training/in-app-billing/preparing-iab-app.html#GetSample)
*   [实施应用内结算](http://developer.android.com/google/play/billing/billing_integrate.html)

文档说您必须在开发人员控制台上添加项目

我可以在应用程序启动时在运行时添加项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:10:05.023

不，你不能。没有用于此的 API，并且如您所知，文档在该主题中很清楚。

# xml - 如何在word中选择一些文本并使用宏粘贴到xml文档中？

> ID：15066444
> 
> 赞同：-1
> 
> 时间：2013-02-25T11:58:39.110
> 
> 标签：xml, vba, ms-word, macros

我正在使用宏从 word 文档创建 xml，我想将复制的文本从 word 文档粘贴到 xml，我使用下面的代码来选择文本

```
Sub ShowSelection()
    Dim strText As String
    strText = Selection.Text
End Sub 
```

如何将选定的文本粘贴到 xml 中？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T14:45:28.873

我不了解 Word 宏，但您为什么不直接将 word 文档作为字符串读取，以您最喜欢的语言手动将其解析为 XML？

# java - 压缩根文件夹内容，而 zip 文件中没有根目录

> ID：15066445
> 
> 赞同：2
> 
> 时间：2013-02-25T11:58:40.560
> 
> 标签：java, zip, java-io, apache-commons-io

我有以下文件夹结构：

```
根文件夹
|
|
| -->F1-->F1.1-->t1.txt,t2.txt
  -->F2-->F2.2-->t3.txt

```

我已经成功，使用以下代码获取以下 zip 文件：

result.zip--> 包含：

```
根文件夹
|
|
| -->F1-->F1.1-->t1.txt,t2.txt
  -->F2-->F2.2-->t3.txt

```

我需要创建一个包含整个“RootFolder”内容的 zip 文件，而无需创建根文件夹“RootFolder”；

我的意思是我需要的结果是：

result.zip--> 包含：

```
|
|
| -->F1-->F1.1-->t1.txt,t2.txt
  -->F2-->F2.2-->t3.txt

```

```
public static void main(String[] args) throws Exception {
    zipFolder("c:/new/RootFolder", "c:/new/result.zip");
}

static public void zipFolder(String srcFolder, String destZipFile)
throws IOException, FileNotFoundException {
    ZipOutputStream zip = null;
    FileOutputStream fileWriter = null;

    fileWriter = new FileOutputStream(destZipFile);
    zip = new ZipOutputStream(fileWriter);

    addFolderToZip("", srcFolder, zip);
    zip.flush();
    zip.close();
}

static private void addFileToZip(String path, String srcFile,
        ZipOutputStream zip) throws IOException, FileNotFoundException {

    File folder = new File(srcFile);
    if (folder.isDirectory()) {
        addFolderToZip(path, srcFile, zip);
    } else {
        byte[] buf = new byte[1024];
        int len;
        FileInputStream in = new FileInputStream(srcFile);
        zip.putNextEntry(new ZipEntry(path + "/" + folder.getName()));
        while ((len = in.read(buf)) > 0) {
            zip.write(buf, 0, len);
        }
        in.close();
    }
}

    static public void addFolderToZip(String path, String srcFolder,
            ZipOutputStream zip) throws IOException, FileNotFoundException {
        File folder = new File(srcFolder);

        for (String fileName : folder.list()) 

{
        if (path.equals("")) {
            addFileToZip(folder.getName(), srcFolder + "/" + fileName, zip);
        } else {
            addFileToZip(path + "/" + folder.getName(), srcFolder + "/"
                    + fileName, zip);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:14:09.240

我试图找出解决问题的最简单方法。我解决了它只是删除根目录名称，同时使用以下内容保存在 zip 文件中：

```
String pathAfterOmittingtheRootFolder=path.replace(ROOT_FOLDER_NAME, ""); 
```

完整的方法将是：

```
static private void addFileToZip(String path, String srcFile,
        ZipOutputStream zip,String exportedRootDirectory) throws IOException, FileNotFoundException {

    File folder = new File(srcFile);
    if (folder.isDirectory()) {

    addFolderToZip(path, srcFile, zip,exportedRootDirectory);
} else {
    byte[] buf = new byte[1024];
    int len;
    FileInputStream in = new FileInputStream(srcFile);
    String pathAfterOmittingtheRootFolder=path.replaceFirst(exportedRootDirectory, "");
    zip.putNextEntry(new ZipEntry(pathAfterOmittingtheRootFolder + "/" + folder.getName()));
    while ((len = in.read(buf)) > 0) {
        zip.write(buf, 0, len);
    }
    in.close();
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:05:44.207

您需要做的是添加文件，而不是从根文件夹开始，而是从其内容开始。

就像是：

```
filelist = getFileList(rootFolder)  
foreach(File f : filelist){  
    addFolderToZip(f)
} 
```

抱歉伪代码，不记得原始函数名称，现在无法检查它们，但可以很容易地用谷歌搜索它们。

关键是跳过在存档中为根文件夹创建文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:28:56.420

我编写了一些实用方法来使用 NIO File API（库是开源的）将目录复制到 Zip 文件：

马文：

```
<dependency>  
    <groupId>org.softsmithy.lib</groupId>  
    <artifactId>softsmithy-lib-core</artifactId>  
    <version>0.3</version>  
</dependency> 
```

教程：

[http://softsmithy.sourceforge.net/lib/current/docs/tutorial/nio-file/index.html#AddZipResourceSample](http://softsmithy.sourceforge.net/lib/current/docs/tutorial/nio-file/index.html#AddZipResourceSample)

API：[CopyFileVisitor.copy](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-core/org/softsmithy/lib/nio/file/CopyFileVisitor.html#copy%28java.nio.file.Path,%20java.nio.file.Path%29)

# ios - iOS：UIView 不显示

> ID：15066451
> 
> 赞同：0
> 
> 时间：2013-02-25T11:59:03.990
> 
> 标签：ios, uiview

我定制了一个 UIView

```
@implementation PaiLifePageDetail

@synthesize pageIndex = _pageIndex;

#define MARGINTOTOP 200.0
#define MARGINTOLEFT 20.0
#define WIDTH 120.0
#define HEIGHT 150.0

- (id) initWithDataSource : (NSArray *) dataSource
{
self = [super init];
if (self)
{
    if (dataSource)
    {
        for (PaiLifeCustomImageView *imageView in dataSource)
        {
            //page 1 line 1
            if (_pageIndex == 1)
            {
                if ([imageView.location isEqualToString:@"r11"])
                {
                    imageView.frame = CGRectMake(MARGINTOLEFT, MARGINTOTOP, WIDTH, HEIGHT * 2);
                    [self addSubview:imageView];
                }
                else if ([imageView.location isEqualToString:@"r12"])
                {
                    imageView.frame = CGRectMake(MARGINTOLEFT + WIDTH + 20, MARGINTOTOP, WIDTH, HEIGHT);
                    [self addSubview:imageView];
                }
            }
            //not page 1 line 1
            else
            {
                if ([imageView.location isEqualToString:@"r11"])
                {
                    imageView.frame = CGRectMake(MARGINTOLEFT, MARGINTOTOP, WIDTH, HEIGHT);
                    [self addSubview:imageView];
                }
                else if ([imageView.location isEqualToString:@"r12"])
                {
                    imageView.frame = CGRectMake(MARGINTOLEFT + WIDTH + 20, MARGINTOTOP, WIDTH, HEIGHT);
                    [self addSubview:imageView];
                }
                else if ([imageView.location isEqualToString:@"r13"])
                {
                    imageView.frame = CGRectMake(MARGINTOLEFT + (WIDTH + 20) * 2, MARGINTOTOP, WIDTH, HEIGHT);
                    [self addSubview:imageView];
                }
            }

            // line 2
            if ([imageView.location isEqualToString:@"r21"])
            {
                imageView.frame = CGRectMake(MARGINTOLEFT, MARGINTOTOP + HEIGHT + 20, WIDTH, HEIGHT);
                [self addSubview:imageView];
            }
            else if ([imageView.location isEqualToString:@"r22"])
            {
                imageView.frame = CGRectMake(MARGINTOLEFT + WIDTH + 20, MARGINTOTOP + HEIGHT + 20, WIDTH, HEIGHT);
                [self addSubview:imageView];
            }
            else if ([imageView.location isEqualToString:@"r23"])
            {
                imageView.frame = CGRectMake(MARGINTOLEFT + (WIDTH + 20) * 2, MARGINTOTOP + HEIGHT + 20, WIDTH, HEIGHT);
                [self addSubview:imageView];
            }

            // line 3
            if ([imageView.location isEqualToString:@"r31"])
            {
                imageView.frame = CGRectMake(MARGINTOLEFT, MARGINTOTOP + (HEIGHT + 20) * 2, WIDTH, HEIGHT);
                [self addSubview:imageView];
            }
            else if ([imageView.location isEqualToString:@"r32"])
            {
                imageView.frame = CGRectMake(MARGINTOLEFT + WIDTH + 20, MARGINTOTOP + (HEIGHT + 20) * 2, WIDTH, HEIGHT);
                [self addSubview:imageView];
            }
            else if ([imageView.location isEqualToString:@"r33"])
            {
                imageView.frame = CGRectMake(MARGINTOLEFT + (WIDTH + 20) * 2, MARGINTOTOP + (HEIGHT + 20) * 2, WIDTH, HEIGHT);
                [self addSubview:imageView];
            }

        }
    }
}
[self setNeedsDisplay];
return self;
}
@end 
```

这是我的观点

```
implementation PaiLifeViewController

@synthesize detail = _detail;

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
UIImage *i = [UIImage imageNamed:@"menu_patcode_normal"];
PaiLifeCustomImageView *c1 = [[PaiLifeCustomImageView alloc] initWithImage:i];
c1.location = @"r11";
PaiLifeCustomImageView *c2 = [[PaiLifeCustomImageView alloc] initWithImage:i];
c2.location = @"r12";
PaiLifeCustomImageView *c4 = [[PaiLifeCustomImageView alloc] initWithImage:i];
c4.location = @"r21";
PaiLifeCustomImageView *c5 = [[PaiLifeCustomImageView alloc] initWithImage:i];
c5.location = @"r22";
PaiLifeCustomImageView *c6 = [[PaiLifeCustomImageView alloc] initWithImage:i];
c6.location = @"r23";
PaiLifeCustomImageView *c7 = [[PaiLifeCustomImageView alloc] initWithImage:i];
c7.location = @"r31";
PaiLifeCustomImageView *c8 = [[PaiLifeCustomImageView alloc] initWithImage:i];
c8.location = @"r32";
PaiLifeCustomImageView *c9 = [[PaiLifeCustomImageView alloc] initWithImage:i];
c9.location = @"r33";

NSArray *c = [[NSArray alloc] initWithObjects:c1,c2,c4,c5,c6,c7,c8,c9, nil];

//PaiLifePageDetail *pagec
_detail.pageIndex = 1;
_detail= [[PaiLifePageDetail alloc] initWithDataSource:c];
[_detail awakeFromNib];
}
@end 
```

但它不显示，我不知道为什么，帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:46:49.883

```
[self.view addSubview:_detail]; 
```

在视图控制器 viewdidload

# google-apps-script - 从 Google Drive 上传到 Dropbox

> ID：15066453
> 
> 赞同：7
> 
> 时间：2013-02-25T11:59:10.043
> 
> 标签：google-apps-script, dropbox, dropbox-api

作为测试用例，我正在尝试使用 Google Scripts 将文件从 Google Drive 复制到 Dropbox

```
function pushBuild() {
  // Setup OAuthServiceConfig
  var oAuthConfig = UrlFetchApp.addOAuthService("dropbox");
  oAuthConfig.setAccessTokenUrl("https://api.dropbox.com/1/oauth/access_token");
  oAuthConfig.setRequestTokenUrl("https://api.dropbox.com/1/oauth/request_token");
  oAuthConfig.setAuthorizationUrl("https://www.dropbox.com/1/oauth/authorize");
  oAuthConfig.setConsumerKey(ScriptProperties.getProperty("dropboxKey"));
  oAuthConfig.setConsumerSecret(ScriptProperties.getProperty("dropboxSecret"));

  var fileName = "blah.zip"
  var folderName = "upload_dir"

  var docs = DocsList.getFolder(folderName).find(fileName);
  for(n=0;n<docs.length;++n){
    if(docs[n].getName() == fileName){
      var ID = docs[n].getId();
      var options = {
        "oAuthServiceName" : "dropbox",
        "oAuthUseToken" : "always",
        "method" : "put",
        "payload" : docs[n].getBlob().getBytes(),
        "contentType" : "application/zip"        
    };

  var response = UrlFetchApp.fetch("https://api-content.dropbox.com/1/files_put/sandbox/upload_dir/" + fileName, options);

  Logger.log(response);
  }
 }

} 
```

Dropbox中出现应用程序的授权请求，告诉我已经成功授权我的应用程序，但是当我检查时，该应用程序不在“我的应用程序”列表中，文件尚未上传，也没有日志中的条目。GD 和 DB 上都存在目录“upload_dir”。我用“App Folder”和“Full Dropbox”应用程序类型尝试了相同的代码，但得到了相同的结果。

此外，再次运行脚本会再次触发授权页面，类似于

![这个](../Images/e20f186992a28d8af067af57ca966f16.png)

要出现，单击“允许”然后显示成功屏幕，但该应用程序未列在“我的应用程序”中。再次运行脚本会重复该过程。

谁能指出我做错了什么？

更新

所以，我现在尝试使用单独的 api 调用来实现这一点，但仍然没有任何成功。

```
function testOAuth() {

  var timestamp = getTimestamp();
  var nonce = getNonce(timestamp);

  var authString = 'OAuth oauth_version="1.0", oauth_signature_method="PLAINTEXT", oauth_signature="' + encodeURIComponent(ScriptProperties.getProperty("dropboxSecret") + '&') + '", oauth_consumer_key="' + ScriptProperties.getProperty("dropboxKey") + '"';

  Logger.log(authString)

  var options = {
    method : "POST",
    headers : {"Authorization" : authString}
  }

  var response = UrlFetchApp.fetch("https://api.dropbox.com/1/oauth/request_token",options);  
  var params = response.getContentText().split("&");  
  var map = new Map;  
      for(i = 0; i < params.length; i++){
        var param = params[i].split("=");
        map.put(param[0],param[1]);        
      }

  var authStringx = "https://www.dropbox.com/1/oauth/authorize?oauth_token=" + map.get("oauth_token");

  Logger.log(authStringx);

  var response2 = UrlFetchApp.fetch(authStringx);

  Logger.log(response2.getContentText());

  var authString2 = 'OAuth oauth_version="1.0", oauth_signature_method="PLAINTEXT", oauth_token="' + map.get("oauth_token") + '" , oauth_signature="' + encodeURIComponent(ScriptProperties.getProperty("dropboxSecret") + '&' + map.get("oauth_token_secret")) + '", oauth_consumer_key="' + ScriptProperties.getProperty("dropboxKey") + '",oauth_timestamp="'+ timestamp +'", oauth_nonce="' + nonce +'"';

  Logger.log(authString2);

  var options3 = {
    "method" : "POST",
    "Authorization" : authString2  
  }

  var response3 = UrlFetchApp.fetch("https://api.dropbox.com/1/oauth/access_token", options3);

  Logger.log(response3.getContentText());
}

var getTimestamp = function(){
  return (Math.floor((new Date()).getTime() / 1000)).toString()
}

var getNonce = function(timestamp){
  return timestamp + Math.floor( Math.random() * 100000000)
} 
```

地图的代码实现在[这里](http://pastebin.com/KBi63NAj)。我可以看到的主要问题是授权步骤不调用 Dropbox 授权端点（即没有发生浏览器重定向来授权应用程序）。如果我在该行之后放置一个断点`Logger.log(authStringx);`并手动访问粘贴 authStringx 内容的网页，我将获得授权我的应用程序的屏幕。我接受并收到该应用程序已在“我的应用程序”中注册的消息。我现在让程序继续，我收到了消息

![在此处输入图像描述](../Images/ba6f108e29eb9ef61474467a05a4c5f8.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T04:49:16.097

婴儿车，

我试图完成同样的任务并遇到了你的帖子。我不是程序员，所以我也无法弄清楚第二部分（启动授权页面失败），但我能够在第三步中完成该过程并成功连接我的应用程序。

代替：

```
var authString2 = 'OAuth oauth_version="1.0", oauth_signature_method="PLAINTEXT", oauth_token="' + map.get("oauth_token") + '" , oauth_signature="' + encodeURIComponent(ScriptProperties.getProperty("dropboxSecret") + '&' + map.get("oauth_token_secret")) + '", oauth_consumer_key="' + ScriptProperties.getProperty("dropboxKey") + '",oauth_timestamp="'+ timestamp +'", oauth_nonce="' + nonce +'"';

Logger.log(authString2);

var options3 = {
"method" : "POST",
"Authorization" : authString2  
}

var response3 = UrlFetchApp.fetch("https://api.dropbox.com/1/oauth/access_token", options3);

Logger.log(response3.getContentText()); 
```

我用了：

```
var authtokenURL = "https://api.dropbox.com/1/oauth/access_token";

var authString2 = "?oauth_signature_method=PLAINTEXT&oauth_token=" + [MY_OAUTH_REQUEST_TOKEN] + "&oauth_signature=" + encodeURIComponent([MY_DROPBOX_CONSUMER_SECRET] + "&" + [MY_OAUTH_REQUEST_SECRET]) +"&oauth_consumer_key=" + [MY_DROPBOX_CONSUMER_KEY];

Logger.log(authString2);

var response3 = UrlFetchApp.fetch("https://api.dropbox.com/1/oauth/access_token" + authString2);    

Logger.log(response3.getContentText()); 
```

然后我收到一封电子邮件，确认我将一个新应用程序连接到 Dropbox，并且我的应用程序确实显示在我帐户的“设置”下。无论如何，正如我所说，我不是程序员，对于丑陋的代码非常抱歉。感谢您为我提供您的代码以实现这一目标。我希望这至少可以帮助您继续前进，即使它不能解决根本问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:51:28.887

我也能看到这个问题。Dropbox 在这里发生了一些特别的事情。您应该查看他们的论坛或与他们的 API 支持团队联系。看起来他们没有正确接受回调参数。也许这是开发模式的限制（相对于生产模式）。或者他们可能对谷歌不支持的一些 POST 与 GET 差异非常严格。

下面的代码显示了您描述的授权从未完成的相同问题。

```
function dropbox() {
  var oAuthCfg = UrlFetchApp.addOAuthService("dropbox");
  oAuthCfg.setAccessTokenUrl('https://api.dropbox.com/1/oauth/access_token');
  oAuthCfg.setRequestTokenUrl('https://api.dropbox.com/1/oauth/request_token');
  oAuthCfg.setAuthorizationUrl('https://api.dropbox.com/1/oauth/authorize');
  oAuthCfg.setConsumerKey('DROPBOX_KEY');
  oAuthCfg.setConsumerSecret('DROPBOX_SECRET');

  var options = {oAuthServiceName:'dropbox',oAuthUseToken:'always'}

  var url = 'https://api.dropbox.com/1/account/info';
  var response = UrlFetchApp.fetch(url, options).getContentText();
  Logger.log(response);
} 
```

但是，相同的代码在 Twitter OAuth 1 API 上运行没有问题。下面的代码应该从您的流中转储 JSON（一旦您从[http://dev.twitter.com中的设置中替换了令牌](http://dev.twitter.com)

```
function twitter(){
  var oAuthCfg = UrlFetchApp.addOAuthService('twitter');
  oAuthCfg.setAccessTokenUrl('http://api.twitter.com/oauth/access_token');
  oAuthCfg.setRequestTokenUrl('http://api.twitter.com/oauth/request_token');
  oAuthCfg.setAuthorizationUrl('http://api.twitter.com/oauth/authorize');
  oAuthCfg.setConsumerKey('TWITTER_KEY');
  oAuthCfg.setConsumerSecret('TWITTER_SECRET');

  var options = {oAuthServiceName:'twitter',oAuthUseToken:'always'}

  var url = "http://api.twitter.com/1/statuses/user_timeline.json";
  var response = UrlFetchApp.fetch(url, options).getContentText();
  Logger.log(response);
} 
```

如果您能够将其缩小到 Google 问题，请在[问题跟踪器](https://code.google.com/p/google-apps-script-issues/issues/list)上记录一个错误。

# php - 从嵌套的批处理脚本中执行 PHP 脚本

> ID：15066456
> 
> 赞同：2
> 
> 时间：2013-02-25T11:59:13.187
> 
> 标签：php, windows, batch-file, filezilla

我正在尝试重写为 IIS 创建的 Windows FTP 服务器配置脚本，现在我们正在尝试为 Filezilla Server 提供类似的工作。

结构是这样的，我们有一个批处理文件，它是另一个批处理文件的 for 循环，所以我们可以批量配置我们的 FTP 网站。我目前正在尝试使用的这个批处理文件包含一行代码来执行 PHP 脚本，以在 Filezilla 中设置 FTP 用户名和密码，以及做一些其他简洁的事情。

现在，跑步`CreateIIStmp.bat var1 var2`效果很好。但是执行BatchCreateIIS.bat好像跳过了php脚本的执行，或者php脚本失败了。（我只是在研究如何在 PHP 脚本中进行一些错误处理以捕获任何错误并显示它，但我不是（PHP）开发人员/编码人员，所以当我弄清楚时我会更新它.)

这是我正在谈论的精简版：

初始批处理文件 BatchCreateIIS.bat：

```
@Echo off

for /f %%X in (NewWebsiteEntries.txt) do start cmd.exe /c "CreateIIStmp.bat %%X %%X"

echo ...
echo *** BATCH PROCESS HAS BEEN COMPLETED ***
pause 
```

CreateIIStmp.bat：

```
@ echo off
C:\php5\php-win.exe -f filezilla-user-script.php -- %1 %2
pause
@echo on 
```

NewWebsiteEntries.txt：

```
somedomain.com ftpuname
somedomain2.net ftpuname2 
```

文件zilla-user-script.php：

```
<?php

$xmlfolder = 'C:/Program Files (x86)/FileZilla Server/';
$xmlfilename = 'FileZilla Server.xml';

$ftpRoot = 'C:/inetpub/wwwroot/';
$ftpDocumentation = 'C:/Documentation ftp server/';

$xmlfile = $xmlfolder . $xmlfilename;
$xmlbackupfile = $xmlfolder . @date("Y-m-d-H-i-s") . '_FileZilla_Server.xml';

// Copy Config for backup
createXMLbackup($xmlfile,$xmlbackupfile);

//Load XML file
$xml = simplexml_load_file($xmlfile);

$msg = "Allowed usernames: 20 characters out of a...z A...Z 0...9 _ \n\nPlease input username (Ctrl+C to quit)";

// Copy Config for backup before each change, too.
createXMLbackup($xmlfile,$xmlbackupfile);

    echo "\n\n";
    $input = ($argv[2]);
    echo "\n";
//echo 'Userinput: ' . $input . "\n";
    $isvalid = isUserID($input);
//var_dump($isvalid);

    if($isvalid)
    {

        $ftpUserFolder = $ftpRoot . ($argv[1]);

        if ((file_exists($ftpUserFolder) && is_dir($ftpUserFolder)))
        {
            echo "The directory $ftpUserFolder exists.\nPlease select another user name.\n";
        }
        else
        {
            //echo "The directory $ftpUserFolder does not exist\n";

            if(!check_user_exists($xml,$input))

            {
                echo "Adding user $input...\n";

                if (!mkdir($ftpUserFolder))
                {
                    die("Could not create directory $ftpUserFolder \n");
                }
                else
                {
                    echo "Directory $ftpUserFolder created.\n";
                }

                $password = generatePassword();
                //echo 'Password: ' . $password . "\n";

                $user = $xml->Users->addChild('User');
                $user->addAttribute('Name', $input);

                $option = $user->addChild('Option', md5($password));
                $option->addAttribute('Name', 'Pass');

                $option = $user->addChild('Option');
                $option->addAttribute('Name', 'Group');

                $option = $user->addChild('Option', '0');
                $option->addAttribute('Name', 'Bypass server userlimit');

                $option = $user->addChild('Option', '0');
                $option->addAttribute('Name', 'User Limit');

                $option = $user->addChild('Option', '0');
                $option->addAttribute('Name', 'IP Limit');

                $option = $user->addChild('Option', '1');
                $option->addAttribute('Name', 'Enabled');

                $option = $user->addChild('Option', 'none');
                $option->addAttribute('Name', 'Comments');

                $option = $user->addChild('Option', '0');
                $option->addAttribute('Name', 'ForceSsl');

                $filter = $user->addChild('IpFilter');
                $filter->addChild('Disallowed');
                $filter->addChild('Allowed');

                $permissions = $user->addChild('Permissions');
                $permission = $permissions->addChild('Permission');

                $permission->addAttribute('Dir', str_replace("/","\\",$ftpUserFolder));

                $option =  $permission->addChild('Option', '1');
                $option->addAttribute('Name', 'FileRead');

                $option =  $permission->addChild('Option', '1');
                $option->addAttribute('Name', 'FileWrite');

                $option =  $permission->addChild('Option', '0');
                $option->addAttribute('Name', 'FileDelete');

                $option =  $permission->addChild('Option', '1');
                $option->addAttribute('Name', 'FileAppend');

                $option =  $permission->addChild('Option', '1');
                $option->addAttribute('Name', 'DirCreate');

                $option =  $permission->addChild('Option', '0');
                $option->addAttribute('Name', 'DirDelete');

                $option =  $permission->addChild('Option', '1');
                $option->addAttribute('Name', 'DirList');

                $option =  $permission->addChild('Option', '1');
                $option->addAttribute('Name', 'DirSubdirs');

                $option =  $permission->addChild('Option', '1');
                $option->addAttribute('Name', 'IsHome');

                $option =  $permission->addChild('Option', '0');
                $option->addAttribute('Name', 'AutoCreate');

                $speed = $user->addChild('SpeedLimits');
            $speed->addAttribute('DlType', '1');
            $speed->addAttribute('DlLimit', '10');
            $speed->addAttribute('ServerDlLimitBypass', '0');
            $speed->addAttribute('UlType', '1');
            $speed->addAttribute('UlLimit', '10');
                $speed->addAttribute('ServerUlLimitBypass', '0');
                $speed->addChild('Download');
                $speed->addChild('Upload');

                $rv = $xml->asXML($xmlfile);
                //echo $rv . "\n";
                if(!$rv)
                {
                    die('SimpleXML could not write file');
                }

//$newentry = $xml->addChild('element', iconv('ISO-8859-1', 'UTF-8', $write));
//The DOM extension uses UTF-8 encoding. Use utf8_encode() and utf8_decode()
//to work with texts in ISO-8859-1 encoding or Iconv for other encodings.
//make human readable, parse using DOM function
//otherwise everything will be printed on one line

                if( !file_exists($xmlfile) ) die('Missing file: ' . $xmlfile);
                else
                {
                    $dom = new DOMDocument("1.0","ISO-8859-1");
                    //Setze die Flags direkt nach dem Initialisieren des Objektes:
                    $dom->preserveWhiteSpace = false;
                    $dom->formatOutput = true;

                    //$dl = @$dom->load($xmlfile); // remove error control operator (@) to print any error message generated while loading.
                    $dl = $dom->load($xmlfile); // remove error control operator (@) to print any error message generated while loading.
                    if ( !$dl ) die('Error while parsing the document: ' . $xmlfile);
                    //echo $dom->save($xmlfile) . "\n";
                    if(!$dom->save($xmlfile))
                    {
                        die('DOMDocument could not write file');
                    }
                }

//Create documentation

                $docuFile = $ftpDocumentation . $input . '.txt';
                //echo $docuFile . "\n";

                $docuString = "Username: " . $input . "\n";
                $docuString = $docuString . "Password: " . $password . "\n";
                $docuString = $docuString . "Folder: " . str_replace("/","\\",$ftpUserFolder) . "\n";
                $docuString = $docuString . "Date: " . @date("d.m.Y") . "\n";
                // $docuString = $docuString . "\n";
                // $docuString = $docuString . "Direct link:\n";
                // $docuString = $docuString . "ftp://" . $input . ":" . $password . "@ftp.yourcompany.com";

                $handleDocuFile = fopen($docuFile, "wt");
                if(!$handleDocuFile)
                {
                    die('Could not fopen docu file');
                }

                $rv = fwrite($handleDocuFile, $docuString);
                if(!$rv)
                {
                    die('Could not fwrite docu file');
                }

                // Close xml file
                $rv = fclose($handleDocuFile);
                if(!$rv)
                {
                    die('Could not fclose docu file');
                }
                echo "Documentary file written.\n";

                $ftpExecutable = "\"C:\\Program Files (x86)\\FileZilla Server\\FileZilla server.exe\" /reload-config";

                $command = $ftpExecutable;

                $last_line = system($command, $retval);

                echo ("Filezilla reloaded, user active.\n");

                echo ("Close Notepad to add another user or quit.\n");

                $command = "C:\\Windows\\System32\\notepad.exe $docuFile";
                $last_line = system($command, $retval);

            }
            else
            {
                echo "Username $input already exists...\n";

            }

        }

    }
    else
    {
        echo "Username $input is invalid\n";
    }

function check_user_exists($xml,$username)
{
    $children=$xml->Users->children();

    foreach($children as $child)
    {
        if ($child->getName()=='User')
        {

            foreach($child->attributes() as $attributes )
            {
                if(trim($attributes) == trim($username))
                {
                    echo "Username $username already exists... \n";
                    return true;
                }

            }

        }

    }

    return false;
}

function isUserID($username)
{
    //return preg_match('/^\w{2,20}$/', $username);
    return preg_match('/^[A-Za-z0-9][A-Za-z0-9]*(?:_[A-Za-z0-9]+)*$/', $username);
}

function isValid($str)
{
    //return !preg_match('/[^A-Za-z0-9.#\\-$]/', $str);
    return !preg_match('/[^A-Za-z0-9\_\-]/', $str);
}

function getInput($msg)
{
    fwrite(STDOUT, "$msg: ");
    $varin = trim(fgets(STDIN,20));
    return $varin;

    //$input = fgets($fr,128);        // read a maximum of 128 characters
}

function createXMLbackup($xmlfile,$xmlbackupfile)
{
    // Copy Config for backup
    $rv = copy($xmlfile,$xmlbackupfile);
    if(!$rv) 
    {
        die('Problem creating xml backup file');
    }
    echo "\nBackup file created\n";
}

function generatePassword ($length = 15)
{

    // start with a blank password
    $password = "";

    $possible = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";

    // we refer to the length of $possible a few times, so let's grab it now
    $maxlength = strlen($possible);

    // check for length overflow and truncate if necessary
    if ($length > $maxlength)
    {
        $length = $maxlength;
    }

    // set up a counter for how many characters are in the password so far
    $i = 0;

    // add random characters to $password until $length is reached
    while ($i < $length)
    {

        // pick a random character from the possible ones
        $char = substr($possible, mt_rand(0, $maxlength-1), 1);

        // have we already used this character in $password?
        if (!strstr($password, $char))
        {
            // no, so it's OK to add it onto the end of whatever we've already got...
            $password .= $char;
            // ... and increase the counter by one
            $i++;
        }

    }

    // done!
    return $password;

}
?> 
```

我环顾四周，有一些地方建议在调用 PHP 之前使用 @ 所以：`@C:\php5\php-win.exe -f filezilla-user-script.php -- %1 %2`但这不起作用，我可以看到我的脚本确实有效，只是不是以这种嵌套形式。

也许我缺少解决这个问题的方法？或者我不知道在嵌套批处理脚本中执行脚本的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T10:37:16.500

在您的 BatchCreateIIS.bat 中，当您使用它时：

```
start cmd.exe /c "CreateIIStmp.bat %%X %%X" 
```

父 cmd.exe 不会等待 CreateIIStmp.bat（和子进程）的每个实例完成。由于您似乎正在写入同一个 XML 文件，因此最后写入的 DOM 很可能仍然存在。而是试试这个：

```
call "CreateIIStmp.bat %%X %%X" 
```

# titanium - Appcelerator Titanium - 我如何在固定的时间打开窗户

> ID：15066462
> 
> 赞同：0
> 
> 时间：2013-02-25T11:59:32.290
> 
> 标签：titanium, appcelerator

我是使用 appcelerator Titan 的新手，我正在使用这个平台来创建一个警报应用程序。但我面临一个问题。我不知道如何在固定的时间打开应用程序的窗口（即使我的应用程序已关闭且设备处于睡眠状态）。像 Android OS 中的 Alarm 和 BroadcastReceiver 有什么功能吗？请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:25:06.160

您想响应哪些警报？

在 iOS 上，当您的应用程序通常在后台时，您不能等待此类事件，并且您无法使用钛来监听它们。使用 Titanium，您可以使用[LocalNotification](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.App.iOS.LocalNotification)（像计时器一样工作）。在他们的回调中，您应该设置一个属性，当用户打开您的应用程序时，您应该检查此属性并打开您的窗口。

在 Android 上，您可以创建一个后台服务，但我不知道如何在 android 上监听本机事件（电池除外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:13:00.807

感谢您的回复。

我正在寻找一种能够在设备处于睡眠状态时唤醒设备然后在我的应用程序中打开一个窗口的机制。在Android中，我知道一种称为Alarm的机制，我可以向Android OS注册一个Alarm，并且在指定的时间（在我注册Alarm时指定）之后，Android OS将唤醒设备（如果它正在睡眠）并且发送意向。然后，在我的应用程序中，我可以注册一个 BroadcastReceiver 来监听 Android 操作系统发送的 Intent。在那个 BroadcastReceiver 中，我可以做一些事情，比如启动服务、打开新窗口（在 Android 中称为 Activity）。

# javascript - 用Javascript改变背景位置？

> ID：15066465
> 
> 赞同：1
> 
> 时间：2013-02-25T11:59:39.427
> 
> 标签：javascript, html, css, image, css-sprites

虽然我可以看到在我真正需要一个不使用 JQuery 的解决方案之前已经问过这个问题，但它用于嵌入式 Web 界面，我不希望加载 jQuery 的开销。我需要能够仅使用单个页面上的 JS 来操作精灵，精灵的状态取决于某些 JS 变量。我确信这一定是可能的，但是如果不使用 JQuery 就找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:07:00.950

我认为您可以使用 Object.style.backgroundPosition="position" 来更改所需的背景位置。

试试这个代码

```
 <!DOCTYPE html>
<html>
<head>
<style>
div
{
background-image: url('example.png');
background-repeat: no-repeat;
width: 400px;
height: 400px;
border: 1px solid #000000;
}
</style>
<script>
function displayResult()
{
document.getElementById("div1").style.backgroundPosition="center bottom";  
}
</script>
</head>
<body>

<button type="button" onclick="displayResult()">Position background image</button>
<br>
<div id="div1">
</div>

</body>
</html> 
```

[参考](http://www.w3schools.com/jsref/prop_style_backgroundposition.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T12:13:37.713

最简单的方法（我认为）是定义自己的 css 类并在某些事件上更改这些类。IE

```
<style type="text/css">
.bg1{
/* Some attributes set here */
background-position:cen‌​ter;
}
.bg2{
/* Some attributes set here */
background-position:left;
}

</style> 
```

然后你把你的javascript像这样

```
document.getElementById("some_id").class = "bg2"; 
```

# pdf - 提供大量 PDF 的网站的可访问性问题

> ID：15066466
> 
> 赞同：2
> 
> 时间：2013-02-25T11:59:40.297
> 
> 标签：pdf, accessibility

我正在开发一个提供大量 PDF 供下载的网站，并且我正在努力提高网站的可访问性。我能想到的只有：

1.  尽可能为 PDF 提供等效内容（例如文本或 HTML）。
2.  为 PDF 文档提供说明，然后使用可以下载它们。
3.  当用户使用网站搜索时，可以在 PDF 文件中进行搜索。
4.  制作带有漂亮图标标记的 PDF 链接。
5.  通知用户他们需要第三方应用程序（Acrobat 或其他 PDF 查看器）才能打开文档。

还有其他改进方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:45:25.200

就像 Jared 所说，辅助技术可以很好地处理 PDF。问题是你有什么样的质量控制。有几种不同的方法可以组合 PDF。一种方法是扫描文档，结果是由图像制成的 PDF。当辅助技术出现时，它说的只是图像图像图像，很有帮助吧？

现在 Adob​​e 内置了光学字符识别能力（第二种方式），多年来有所改进，但与质量相差甚远。例如，我收到了一个带有 OCR 的 PDF。第一行有一个单词 Articles，斜体字，OCR 吐出`Art/e5`。第三种方法是生成包含实际文本的 PDF。现在的 Office 2007/2010，可以保存为 PDF。在点击保存之前，单击选项按钮并确保选中“可访问性文档标签”框。

PDF 具有标签结构，如 HTML，可通过标签面板/窗格找到。2010 年的输出比 2007 年要干净一些，但我仍然推荐使用 Commonlook Office 之类的工具来创建 PDF。

> 4\. 制作带有漂亮图标标记的 PDF 链接。

您可以在链接中放置一个图标。有些人这样做：

```
<a href="...">Link text</a> <img src=".." alt="PDF icon"/> 
```

Some people using assistive tech just browse via links, so they won't know it is a PDF before they open it. So, it is better to do:

```
<a href="....">Link text <img src="" alt="PDF"/></a> 
```

> 5.Inform the users that they will need a third party application (Acrobat or other PDF viewers) in order to open the documents.

It is a good idea to do this, in fact Section 508 requirements say to do this. I recommend linking to Adobe Reader for two reasons.

1- if the person does not have a PDF viewer, they'll probably call their "computer expert" who probably heard of Adobe Reader, and knows the site isn't pushing some ad-ware.
2- Adobe Reader has the most built-in accessibility of the readers out there, to my knowledge. So, why would you not give the best.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:25:57.887

您可以做几件事来提高 PDF 本身的可访问性。

*   为图像提供“替代描述”
*   为方程式或缩写等项目提供“替换文本”
*   替换文本也可用于提示姓名的发音
*   标记语言，尤其是混合语言

这将有助于屏幕阅读器正确理解 PDF。这对于仅包含常规段落布局中的文本的页面并不重要 - 读者通常可以弄清楚事情。如果有图片、说明文字、行话、人名等，这将大大提高阅读者的表现。

# firefox - Firebug 1.11.2 不适用于 Mozilla Firefox 18.0.2

> ID：15066476
> 
> 赞同：0
> 
> 时间：2013-02-25T12:00:21.400
> 
> 标签：firefox, browser, firefox-addon, firebug

右键单击“使用萤火虫检查元素”曾经向我显示 HTML 内容，但它突然停止了。我将其删除并在 Mozilla Firefox 18.0.2 上安装了 Firebug 1.11.2。仍然“用萤火虫检查元素”什么也没显示。我也安装了用户代理切换器和查看 cookie。此外，如果没有 Firefox 中的 firebug，我将无法做很多事情，因为在 chrome 中，“Firebug Lite for Google Chrome™ 1.4.0.11967”没有提供编辑 HTML 内容的选项。因此它没有多大用处。如果我能在 Firefox 中检查 HTML 就好了。我知道这个问题非常具体，仍然可以做任何事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:03:50.760

尝试将 Firefox 更新到版本 19

# ios - 在表视图上遇到 AsyncImageView 图像问题

> ID：15066479
> 
> 赞同：0
> 
> 时间：2013-02-25T12:00:26.550
> 
> 标签：ios

我正在使用从 URL`AsyncImageView`加载图像。`TableView`它在第一次加载表格时正常工作，但是当我滚动时`TableView`出现问题，有些单元格不包含图像，所以我将图像 alpha 设置为 0 ，但在此之前，单元格会显示前一个图像以进行一些拆分时间如何处理，任何人都可以建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:05:44.173

[在这里](https://github.com/rs/SDWebImage/tree/master/SDWebImage)尝试 SDWebimage 框架。它包含一个占位符图像选项，用于显示加载图像，直到实际图像被下载。

# cascade - BlackBerry Cascades 无需用户交互即可发送电子邮件

> ID：15066480
> 
> 赞同：0
> 
> 时间：2013-02-25T12:00:32.060
> 
> 标签：cascade, blackberry-10, blackberry-cascades

我想在没有用户交互的情况下发送电子邮件......意味着用户只需要按下一个按钮，邮件就会自动发送给特定的人......

以及如何在黑莓 z10 中获取设备 ID、操作系统版本、当前运行/安装的应用程序等信息？

如果有人知道这一点，请回复代码或一些很好的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:19:08.267

Cascades 的大部分文档都可从 BlackBerry ( [Cascades API](http://developer.blackberry.com/cascades/reference/) ) 获得，其中包含所有项目的详细信息：

*   发送电子邮件/消息：http: [//developer.blackberry.com/cascades/documentation/device_platform/pim/messages.html](http://developer.blackberry.com/cascades/documentation/device_platform/pim/messages.html)
*   [*设备*](http://developer.blackberry.com/cascades/reference/bb__device__hardwareinfo.html#property-pin)ID/PIN/序列号：[http :](http://developer.blackberry.com/cascades/reference/bb__device__hardwareinfo.html#property-pin) [//developer.blackberry.com/cascades/reference/bb_device_hardwareinfo.html#property-pin](http://developer.blackberry.com/cascades/reference/bb__device__hardwareinfo.html#property-pin)
**   操作系统版本/平台信息：http: [//developer.blackberry.com/cascades/reference/platform_info.html](http://developer.blackberry.com/cascades/reference/platform_info.html)*   硬件信息：[*http*](http://developer.blackberry.com/cascades/reference/bb__device__hardwareinfo.html) [:](http://developer.blackberry.com/cascades/reference/bb__device__hardwareinfo.html) [//developer.blackberry.com/cascades/reference/bb_device_hardwareinfo.html](http://developer.blackberry.com/cascades/reference/bb__device__hardwareinfo.html)**   已安装/正在运行的应用程序：（尚未找到，可能不可用）*   位置：http: [//developer.blackberry.com/cascades/reference/location.html](http://developer.blackberry.com/cascades/reference/location.html)*   BBM： http: [//developer.blackberry.com/cascades/reference/app_integration_bbm.html](http://developer.blackberry.com/cascades/reference/app_integration_bbm.html) 等。**

 **对于当前不可用的任何项目，可以在公共[Cascades 路线图](http://developer.blackberry.com/cascades/download/roadmap/)中对其进行跟踪。

*（请耐心等待，我正在逐个链接所有项目）***

# javascript - 任何人都可以将其转换为 jQuery 吗？

> ID：15066481
> 
> 赞同：-5
> 
> 时间：2013-02-25T12:00:34.287
> 
> 标签：javascript, jquery

我有以下 JavaScript 来使用模态覆盖。这可以转换为 jQuery 吗？

```
 function overlay() {
    el = document.getElementById("overlay");
    el.style.visibility = (el.style.visibility == "visible") ? "hidden" : "visible"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:01:47.497

```
function overlay() {
    var overlay = $('#overlay');
    if (overlay.css('visibility')==='hidden'){
        overlay.css('visibility', 'visible');
    } else {
        overlay.css('visibility', 'hidden');
    }
} 
```

有关 css() 函数的详细信息，请参阅[http://api.jquery.com/css/](http://api.jquery.com/css/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:05:40.123

```
function overlay() {
    var el = $("#overlay");
    el.css("visibility",((el.css("visibility") == "visible")?"Hidden":"visible"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:05:38.807

```
function overlay() {
  el = $("#overlay");
  if(el.css('visibility')=='hidden') {
    el.css('visibility', 'visible');
  } else {
    el.css('visibility', 'hidden');
  }
} 
```

# android - 撤消“默认主屏幕”作为我的默认主屏幕

> ID：15066484
> 
> 赞同：0
> 
> 时间：2013-02-25T12:00:45.790
> 
> 标签：android

在我的应用程序中，我试图覆盖默认主屏幕。为此，我创建了一个“家庭”类别的活动。当应用程序启动时，它会提示用户选择应用程序（显示我的应用程序和默认启动器）以完成操作。如果我选择“启动器”（默认主屏幕），则无法选择我的应用程序作为默认主屏幕。

有人可以告诉我是否有办法撤消“默认主屏幕”作为我的主页活动的默认启动器？

谢谢， 普拉文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:55:37.340

[`clearPackagePreferredActivities()`on`PackageManager`](http://developer.android.com/reference/android/content/pm/PackageManager.html#clearPackagePreferredActivities%28java.lang.String%29)应该允许您以编程方式为您自己的应用程序执行此操作。

# .net - 用于静态字典缓存的 .NET 线程安全

> ID：15066486
> 
> 赞同：1
> 
> 时间：2013-02-25T12:00:58.513
> 
> 标签：.net, multithreading, dictionary, thread-safety

在我的 ASP.NET Web 应用程序中，所有对页面的请求都访问这个公共静态缓存类。（所以它必须是线程安全的）

通过调用 Cache 类的 Refresh 方法来刷新此缓存是否安全，如下所示。或者它会导致同步问题？

```
 static class Cache
    {
        static Dictionary<string, string> cachedCodeNames;
        static readonly object sync = new object();

        public static string GetName(string code)
        {
            return CodeNames[code];
        }

        public static void Refresh()
        {
            cachedCodeNames = null;
        }

        static Dictionary<string, string> CodeNames
        {
            get
            {
                if (cachedCodeNames == null)
                {
                    lock (sync)
                    {
                        if (cachedCodeNames == null)
                        {
                            cachedCodeNames = WebServiceManager.GetCodeNameCache();
                        }
                    }
                }
                return cachedCodeNames;
            }
        }
    }

    static class WebServiceManager
    {
        internal static Dictionary<string, string> GetCodeNameCache()
        {
            throw new NotImplementedException();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:05:28.483

这里肯定有竞争条件。如果一个线程刚刚退出`lock`并且此时另一个线程调用（并完成）`Refresh`，则第一个线程`null`将从`CodeNames`. 如果`CodeNames`是从内部读取`GetName`，这将立即导致一个`NullReferenceException`.

为防止这种情况，您需要`Refresh`使用 a进行保护`lock(sync)`或重写`CodeNames`如下：

```
lock (sync)
{
    if (cachedCodeNames == null)
    {
        var codeNames = WebServiceManager.GetCodeNameCache();
        cachedCodeNames = codeNames;
        return codeNames;
    }
} 
```

当然，在这种情况下，你应该应用大量的评论来明确这个看似毫无意义的仪式实际上是一个重要的特征。

# wicket - 让 Apache Wicket 为所有页面加载 jquery

> ID：15066492
> 
> 赞同：12
> 
> 时间：2013-02-25T12:01:14.130
> 
> 标签：wicket

除了使用 Wickets 之外，我的页面上还有一些 javascript。然而，Wicket 只在它认为需要它的页面上加载 jquery。有没有办法让 Wicket 在所有页面上加载 jquery？

我不想第二次包含 jquery。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-25T12:58:16.627

是的。您可以将它包含在您的基本页面中，以便它可用于所有页面：

```
@Override
public void renderHead(IHeaderResponse response) {
    super.renderHead(response);

    response.render(JavaScriptHeaderItem.forReference(getApplication().getJavaScriptLibrarySettings()
            .getJQueryReference()));  
} 
```

Wicket 足够聪明，即使在其他地方也有请求，也不会多次包含参考。

# java - java.lang.OutOfMemoryError：启动时的 Java 堆空间

> ID：15066495
> 
> 赞同：3
> 
> 时间：2013-02-25T12:01:24.027
> 
> 标签：java, matlab, out-of-memory

几天前，我开始`java.lang.OutOfMemoryError: Java heap space`在启动 MATLAB 时遇到异常 - 在我运行任何代码或向路径添加任何内容之前。MATLAB 加载的默认目录也没有文件。

我在 Windows 7 64 位上运行 MATLAB R2012a。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:06:35.043

使用提供启动您的应用程序`java -Xmx -Xms option` -

```
-Xmx <number> : max memory allocation to app
-Xms <number> : Min memory at startup 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-14T06:13:46.413

要`-Xmx`在较新版本的 Matlab 中设置参数，请转到**Preferences**（在工具栏/功能区上），然后

```
MATLAB > General > Java Heap Memory 
```

那里有一个滑块。必须重新启动 Matlab 才能生效。

但是有一个[警告](https://au.mathworks.com/help/matlab/matlab_external/java-heap-memory-preferences.html)：

> 注意：增加 Java 堆大小会减少可用于在数组中存储数据的内存量。

我猜这意味着 Matlab 不在其 Java 堆空间中存储数组。但是，如果我们只是设置上限，这有关系吗？我不这么认为。更具体地说，看看当我将上面的滑块设置为 36 GB 时会发生什么，Matlab 启动并立即其虚拟内存（如图所示`top`）变为 39.9 GB。但物理内存使用量仅为 300 MB 左右。因此，除非它实际上在该堆空间中放置了一些东西，否则不会有更少的物理内存可供例如数组使用。所以看起来这个警告可以忽略。

* * *

如果您只能通过终端以非图形方式访问 Matlab，则上述命令的效果是将以下行添加到 中`~/.matlab/R2016a/matlab.prf`，因此您可以手动执行此操作。

```
JavaMemHeapMax=I36532 
```

在我使用滑块将首选项设置为 36,532 MB 并退出 Matlab 后，出现了这条线。如果找不到您的`matlab.prf`文件，请[在此处查看](http://undocumentedmatlab.com/blog/changing-system-preferences-programmatically)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:05:05.940

请参阅此[如何在 MATLAB 6.0 (R12) 及更高版本中增加 Java VM 的堆空间？](http://www.mathworks.in/support/solutions/en/data/1-18I2C/) **EDIT** `-Xms`设置堆的*初始*大小。更改它不会对`java.lang.OutOfMemory`错误产生影响。要使用的选项是`-Xmx`设置堆的*最大*大小。[有关详细信息，请参见此处。](http://www.mathworks.in/support/solutions/en/data/1-18I2C/)

# android - 两个模拟器之间的Eclipse套接字连接问题？

> ID：15066507
> 
> 赞同：2
> 
> 时间：2013-02-25T12:02:02.420
> 
> 标签：android, eclipse, android-wifi, serversocket

我将在 2 个仿真器之间创建一个 SOCKET 连接，我有以下代码，但没有任何反应。Server 类返回我这个 IP 地址：

```
 10.0.2.15 
```

我在我的客户端类中使用它，但没有任何反应，我没有在服务器上收到消息我正在使用来自此链接的服务器和客户端的代码[Android 上两个应用程序之间的套接字通信](https://stackoverflow.com/questions/10968671/socket-communication-between-two-apps-on-android)

请帮助我，我的代码与上面的链接相同，我在客户端使用 10.0.2.15 与服务器连接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T08:28:57.010

实际上模拟器是没有ip地址的，它总是包含这种类型的ip地址“10.0.2.15”，实际上无法从手机或其他设备访问，因为它是一个模拟器。相反，模拟器可以向其他服务器发送连接请求，例如我的手机，其 ip 地址为“172.23.0.101”，因此在这种情况下，模拟器（作为客户端）和电话（作为服务器）之间将建立连接。在我的项目中，我有这个 IP 地址，它运行良好

```
Mobile Phone IP Add: 172.23.0.101  (SERVER)
Emulator     IP Add: 10.0.2.15     (CLIENT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:07:14.703

Okkkkkk !!!，我解决了我的问题。我正在将消息从**模拟器**客户端发送到我运行服务器程序的**移动设备。**我的移动设备ip是

```
 192.168.180.101 
```

所以，我在客户端程序中使用这个 IP 地址并成功地从客户端发送短信到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:17:15.393

您无法通过 TCP 将两个 android 模拟器实例连接在一起的问题是它们都在单独的子网上运行。

Android 文档详细介绍了该主题，并为您希望将不同的模拟器实例连接在一起的情况提供了解决方案，您可以在此处查看：[Android 模拟器网络](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)

还有几个问题与您的问题类似： [here](https://stackoverflow.com/questions/14819737/android-emulator-udp-cannot-receive-works-fine-on-phone/14820258#14820258)和[here](https://stackoverflow.com/questions/5588160/emulators-connection-using-tcp)。

# c# - 我无法从自定义事件访问数据网格

> ID：15066508
> 
> 赞同：0
> 
> 时间：2013-02-25T12:02:03.743
> 
> 标签：c#, winforms, datagridview

我有一个查看剪贴板的简单脚本。更改后，它会引发一个事件，该事件会查看包含的文本并使用该文本来填充数据网格。

该事件工作正常并按预期检索文本，但是当我尝试向数据网格添加一行时没有任何反应。有什么建议吗？

```
 public void ClipBoardHasChanged(ClipboardMonitor m, ClipboardChangedEventArgs e)
    {
        string clipBoardValue = (string)e.ClipboardChangedEventArgsT.GetData(DataFormats.StringFormat, true);
        this.dataGridView1.Rows.Add();
        this.dataGridView1.Rows[0].Cells[0].Value = clipBoardValue;
    } 
```

剪贴板类

```
namespace MarketMatrixCorrelation
    {
        [DefaultEvent("ClipboardChanged")]
        public class ClipboardMonitor : Control
        {
            IntPtr nextClipboardViewer;

            [DllImport("User32.dll")]
            protected static extern int SetClipboardViewer(int hWndNewViewer);

            [DllImport("User32.dll", CharSet = CharSet.Auto)]
            public static extern bool ChangeClipboardChain(IntPtr hWndRemove, IntPtr hWndNewNext);

            [DllImport("user32.dll", CharSet = CharSet.Auto)]
            public static extern int SendMessage(IntPtr hwnd, int wMsg, IntPtr wParam, IntPtr lParam);

            public ClipboardMonitor()
            {
                this.BackColor = System.Drawing.Color.Red;
                this.Visible = false;

                nextClipboardViewer = (IntPtr)SetClipboardViewer((int)this.Handle);
            }

            /// <summary>
            /// Clipboard contents changed.
            /// </summary>
            public delegate void ClipboardChanged(ClipboardMonitor s, ClipboardChangedEventArgs e);
            public event ClipboardChanged ClipboardChangedT = delegate { };

            protected override void Dispose(bool disposing)
            {
                ChangeClipboardChain(this.Handle, nextClipboardViewer);
            }

            protected override void WndProc(ref System.Windows.Forms.Message m)
            {
                // defined in winuser.h
                const int WM_DRAWCLIPBOARD = 0x308;
                const int WM_CHANGECBCHAIN = 0x030D;

                switch (m.Msg)
                {
                    case WM_DRAWCLIPBOARD:
                        SendMessage(nextClipboardViewer, m.Msg, m.WParam, m.LParam);

                        OnClipboardChanged();
                        break;

                    case WM_CHANGECBCHAIN:
                        if (m.WParam == nextClipboardViewer)
                            nextClipboardViewer = m.LParam;
                        else
                            SendMessage(nextClipboardViewer, m.Msg, m.WParam, m.LParam);
                        break;

                    default:
                        base.WndProc(ref m);
                        break;
                }
            }

            //Catch when something is posted on the clipboard
            private void OnClipboardChanged()
            {
                try
                {
                    ClipboardChangedEventArgs iData = new ClipboardChangedEventArgs();
                    iData.ClipboardChangedEventArgsT = Clipboard.GetDataObject();

                    if (iData.ClipboardChangedEventArgsT.GetDataPresent(DataFormats.StringFormat))
                    {
                        ClipboardChangedT(this, iData);
                    }
                }
                catch (Exception e)
                {
                    MessageBox.Show(e.ToString());
                }
            }
        }

        public class ClipboardChangedEventArgs : EventArgs
        {
            private IDataObject DataObject;

            public IDataObject ClipboardChangedEventArgsT
            {
                set
                {
                    DataObject = value;
                }
                get
                {
                    return this.DataObject;
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:14:46.303

只需将其`ClipBoardMonitor`放入您的`Form`并将其粘贴到`Form Load Event`

```
private void Form1_Load(object sender, EventArgs e)
{
    this.clipboardMonitor1.ClipboardChangedT += (o, ex) =>
    {
        string clipBoardValue = (string)ex.ClipboardChangedEventArgsT.GetData(DataFormats.StringFormat, true);
        object[] row = { clipBoardValue };
        this.dataGridView1.Rows.Add(row);
    };
} 
```

# c++ - 生成 .dll 期间出现“错误 LNK1104：无法打开文件”

> ID：15066511
> 
> 赞同：0
> 
> 时间：2013-02-25T12:02:05.160
> 
> 标签：c++, dll, point-cloud-library, .lib

我正在开发一个使用 PCL 的项目（boost 是 PCL 使用的程序之一）。我得到的错误：

> 错误 LNK1104：无法打开文件“libboost_date_time-vc100-mt-gd-1_50.lib”

我想要做的是生成一个.dll，这在以前有效。我检查了工作和失败项目的设置，链接和 C/C++ 设置没有区别，但不知何故，这个不起作用。

我不知道这是否重要，但它确实可以用作静态库 (.lib)。

# android - android + scala + 预装的 scala 库 + 禁用的 proguard 抛出 ClassNotFoundException

> ID：15066516
> 
> 赞同：1
> 
> 时间：2013-02-25T12:02:17.500
> 
> 标签：android, scala, classnotfoundexception, rooted-device

这个壮举的最终目的：通过快速编译使用android设备进行开发，而无需每次都使用proguard（这会导致巨大的延迟）

第一次尝试是在**索尼爱立信 Xperia Mini Pro上**

我已经在其中安装了**Cyanogenmod**，它已经**植根**并且根检查器应用程序已经对其进行了验证。

这是我用来在 android 设备中**嵌入 Scala 库**2.9.1 的应用程序：
[https](https://github.com/jbrechtel/Android-Scala-Installer)
://github.com/jbrechtel/Android-Scala-Installer 这些行`uses-library android:name="scala_...`现在包含在 AndroidManifest 中

完成上述操作后，我在**“project/Build.scala”**中做了一些小改动，如下行：`useProguard in Android := false,`

我可能遗漏了一些东西，因为在重新编译和执行之后，`android:start-device`我得到了**java.lang.ClassNotFoundException**
，这是您在没有完成前面的步骤（生根设备并在设备内安装 scala 库）时期望得到的错误

欢迎任何想法！谢谢

PS：*Intellij 是当前项目选择的 IDE，所以 eclipse 和相关插件不是一个选项*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:00:26.673

我上面说的没有错！

但是 Android Scala 安装程序中有一个命令，它请求将“/system”文件夹挂载为可写。不幸的是，这在我的姜饼安卓手机上不起作用，这可能是一般情况。

我只是将 mount /system 的操作注释为可写（并且命令 mount /system 为只读）并且库安装成功！
*请注意，我在安装库之前手动将 /system 的权限设置为可写*

事实上，我分叉了 github 存储库，因此您可以在这里找到我的实现： [https ://github.com/pligor/scala-android-libs](https://github.com/pligor/scala-android-libs)

总结一下。是的，您的 scala android 源代码中唯一需要的更改是将 Build.scala 文件中的设置设置为 proguard 为 false，并且您`<uses-library android:name="scala_...`在 Android Manifest 中包含使用。

# php - 将项目动态添加到数组 PHP 的中间

> ID：15066517
> 
> 赞同：0
> 
> 时间：2013-02-25T12:02:22.067
> 
> 标签：php, arrays, json

所以这是我在 PHP 中的原始数组

```
$data = array(
  "results" => array(
    "course" => "$cc",
    "books" => array(
      "book" =>
      array(  
      //Place temp here;  
      )
    )
  )
); 
```

这是我在数组中间有更多数据要走的地方，可能是数百个，甚至可能只有一个

```
foreach ($my_array as $counter => $bc) {
        $temp = array(
          "-id" => "$id[$counter]",
          "-title" => "$title[$counter]",
          "-isbn" => "$isbn[$counter]",
          "-borrowedcount" => "$borrowedcount[$counter]"
        );
    } 
```

所以它可以用有效的 JSON 方式编码，看起来像

```
{
 "results": {
  "course": "CC167",
  "books": {
   "book": [
    {
      "-id": "585457",
      "-title": "Beginning XNA 20 game programming : from novice to professional",
      "-isbn": "1590599241",
      "-borrowedcount": "16"
    },
    {
      "-id": "325421",
      "-title": "Red Hat Linux 6",
      "-isbn": "0201354373",
      "-borrowedcount": "17"
    },
    {
      "-id": "424317",
      "-title": "Beginner's guide to darkBASIC game programming",
      "-isbn": "1592000096",
      "-borrowedcount": "46"
    },
    {
      "-id": "437390",
      "-title": "Objects first with Java : a practical introduction using BlueJ",
      "-isbn": "0131249339",
      "-borrowedcount": "89"
    },
    {
      "-id": "511094",
      "-title": "Objects first with Java : a practical introduction using BlueJ",
      "-isbn": "2006044765",
      "-borrowedcount": "169"
    }
   ]
  }
 }
} 
```

感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:04:31.790

循环并添加所有值后，将`book`数组元素分配给值。`$temp`

```
$data['results']['books'] = $temp; 
```

或者，首先循环，当`$data`您已经拥有所需的值时设置数组：

```
$data = array("results" => array("course" => "$cc", "books" => $temp)); 
```

# actionscript-3 - 将参数类型限制为包，可能吗？

> ID：15066519
> 
> 赞同：1
> 
> 时间：2013-02-25T12:02:26.830
> 
> 标签：actionscript-3, flash, apache-flex

在`AS3`中，以下方法接受任何类型的参数：

```
public function myFunc(data:*) :void 
```

是否可以将类型限制为特定的包？可能是这样的：

```
public function myFunc(data:(my.package:*)) //Accepts any type from my.package 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:11:33.600

这是可能的，但只会在运行时进行类型控制。

```
import flash.utils.getQualifiedClassName;
public function myFunc(data:*):void {
    if (data is Object) {
        var fqcn:String=getQualifiedClassName(data);
        if (fqcn.slice(0,10)!='my.package') return; // otherwise work
        // work here
    } // simple types process if needed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:44:10.890

这听起来像是一个设计问题。在编译期间进行这项工作的一种方法是，如果参数类型是自定义类：

```
public function myFunc(data:MyCustomClass):void 
```

假设其中的所有类`my.package`都是不同的，您可以创建一个自定义基类，该基类扩展`Object`并让您的所有类都`my.package`从该基类扩展。当然，但是，如果您的`my.package`类的继承范围不那么广泛，那么您就不需要这么远了。例如，只有`DisplayObject`当其中的所有类`my.package`都属于该类型时，您才应该扩展 from。

可能还有一种方法可以完成您想要使用的内容`namespaces`，但我不确定。

# asp.net-mvc - 如何为同一个控制器+动作方法显示不同的面包屑标题？

> ID：15066520
> 
> 赞同：1
> 
> 时间：2013-02-25T12:02:26.347
> 
> 标签：asp.net-mvc, mvcsitemapprovider

我有一个`Home`控制器和一个`Business`控制器。业务控制器上有几个操作方法：`Search`, `Create`, `Update`, `Delete`。

在我的主页上，我有指向控制器上的`Search`和`Create`视图的链接。`Business`该`Search`视图还具有指向该`Create`视图的链接。

`Create`当从主页访问时，我希望面包屑如下所示：

```
Home > Create 
```

…当从搜索页面访问创建时，我希望它如下所示：

```
Home > Business > Create 
```

在这两种情况下，控制器/操作方法是相同的，但我想要显示的面包屑是不同的。是否可以使用 来做到这一点`MvcSiteMapProvider`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:53:24.463

据我所知，这不支持开箱即用。这意味着您必须根据需要调整 HtmlHelper 模板，请参阅[https://github.com/maartenba/MvcSiteMapProvider/wiki/HtmlHelper-functions](https://github.com/maartenba/MvcSiteMapProvider/wiki/HtmlHelper-functions)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T21:45:29.153

可以做到这一点的唯一方法是，如果您在路由中添加一些信息以区分一个请求与另一个请求，那么您可以配置 2 个不同的节点来创建两个面包屑路径。

我在我的博客上有一个如何做到这一点的工作示例：http: [//www.shiningtreasures.com/post/2013/08/10/mvcsitemapprovider-4-seo-features#canonical-tag](http://www.shiningtreasures.com/post/2013/08/10/mvcsitemapprovider-4-seo-features#canonical-tag)。请务必查看代码下载。

# jquery - IE7 jquery z-index

> ID：15066521
> 
> 赞同：0
> 
> 时间：2013-02-25T12:02:28.763
> 
> 标签：jquery, css, internet-explorer-7, z-index

在 jquery 滑块前面有一个带有菜单的网站。在 IE7 中，下拉菜单位于菜单后面。

该网站是： http: [//lkanlaeg.stom.dk/](http://lkanlaeg.stom.dk/)

到目前为止我尝试了什么？

*   jquery 修复，它没有工作。
*   将所有顶部元素定位为“相对”并相应地设置 z-index。

你建议我接下来尝试什么？重复定位过程？我的代码是这样的：

```
#wrapper, .content-wrapper, #header-wrapper, #primary-menu, #new-royalslider-1, #primary-menu ul{
position: relative;
z-index: auto; 
```

加

```
#primary-menu ul li ul{
z-index: 900;
position: absolute; 
```

我在这里错了吗？

我发现的唯一“半解决方案”是将滑块的 z-index 设置为 -1 - 这实际上有帮助.. 但我觉得它更像是最后一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:53:44.113

我在第`content-wrapper`75 行添加了第一个，在第 142 行添加`style="z-index:10;"`了第二个样式块。这解决了它。`content-wrapper``z-index:5;`

顶部包装需要大于主体，这会将菜单推到一切之上。我在 browserstack 中测试了它，它工作正常。

![在此处输入图像描述](../Images/c9cac4d99942500f158ad64d5c3d256c.png)

# yui-compressor - YUI Compressor 注释语法错误

> ID：15066527
> 
> 赞同：1
> 
> 时间：2013-02-25T12:02:42.620
> 
> 标签：yui-compressor

我在 Symfony2 中使用 YUI Compressor 和资产包。我有个问题：

如果一个 jquery 文件以 /* 注释开头，我会收到语法错误......为了摆脱它，我需要从所有 js 文件中删除所有 /* 注释......这开始成为一个问题，因为每次我更新评论返回的其他捆绑包。有人知道如何解决这个问题吗？这是一个已知的问题？

YUI 压缩器版本：2.4.8

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T06:21:03.093

似乎无法找到发生这种情况的原因。这很可能是一个错误。如果您使用 Dreamweaver，请尝试使用[它](http://www.trentmueller.com/blog/search-and-replace-wildcard-characters-in-dreamweaver.html)来简化您的工作。如果您不使用 Dreamweaver，请[在此处](https://www.google.com/search?btnG=1&pws=0&q=using%20wildcards%20to%20search%20and%20replace)找到您最喜欢的程序。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T14:58:16.717

检查文件的编码。如果我的 .js 和 .css 文件不是 UTF-8，我就遇到了 YUI Compressor 的问题。

# javascript - 如何找到选中的所有复选框

> ID：15066528
> 
> 赞同：0
> 
> 时间：2013-02-25T12:02:43.510
> 
> 标签：javascript, html

我有一个复选框列表，我需要编写一个 javascript 函数来找出单击了所有复选框。有人可以帮忙吗？

```
 <input type="checkbox" name="check_group[]" id="name" /> name
   <input type="checkbox" name="check_group[]" id="age" /> age
   <input type="checkbox" name="check_group[]" id="school" /> school
   <input type="checkbox" name="check_group[]" id="company"> company 
```

因此，如果我只点击 2，我需要知道我点击了哪些是 2，以便我可以发送服务器端处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:12:56.780

鉴于复选框都具有相同的名称，您可以使用如下函数：

```
function getChecked(name) {
  var els = document.getElementsByName(name);

  for (var i=0, iLen=els.length; i<iLen; i++) {

    if (els[i].checked) {
      // els[i] is checked, do stuff
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:07:40.443

有一个输入类型按钮并在点击时调用此函数

```
function callMeOnButtonClick()
{

  var selectedBox  = document.querySelectorAll('input[name*=check_group]');
  // You may also use
  // var selectedBox = document.getElementsByName('check_group[]');
  // The above two statements will give you the same result. i.e., array of checkboxes having name check_group[]

  var count++;
  for(var i=0; i<selectedBox.length; i++)
  {
      if(selectedBox[i].checked)
      {
          count++;
          // Do processing
      }
  }
  alert("Number of selected checkbox: "+count);
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-25T12:05:28.377

您可以使用 jQuery 在 javascript 中查找选中的元素

```
alert($("check_group[]:[checked=checked]").length); 
```

然后您可以使用这些值发送服务器端进行处理

# android - SherlockListFragment setRetainInstance(true) 无法按预期工作

> ID：15066529
> 
> 赞同：1
> 
> 时间：2013-02-25T12:02:47.500
> 
> 标签：android

我使用`setRetainInstance(true)`on `SherlockListFragment`，并希望它在屏幕旋转期间不会破坏和重新创建自己。然而，事实并非如此。`onActivityCreated`每次我执行旋转时它仍然会调用。

## WatchlistFragment.java

```
package org.yccheok.jstock.gui;

import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

import com.actionbarsherlock.app.SherlockFragment;
import com.actionbarsherlock.app.SherlockListFragment;

public class WatchlistFragment extends SherlockListFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i(TAG, "WatchlistFragment onCreate");
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        Log.i(TAG, "WatchlistFragment onActivityCreated");

        // Not sure why. After I setRetainInstance to true, onActivityCreated is still
        // called for each screen rotation changes.
        setRetainInstance(true);

        setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, getTimeConsumingData()));
    }

    public String[] getTimeConsumingData() {
        Log.i(TAG, "WatchlistFragment getTimeConsumingData");
        return new String[] { "A", "B", "C"};
    }

    private static final String TAG = WatchlistFragment.class.getSimpleName();
} 
```

## JStockFragmentActivity.java

```
package org.yccheok.jstock.gui;

import android.os.Bundle;
import android.util.Log;

import com.actionbarsherlock.app.SherlockFragmentActivity;

public class JStockFragmentActivity extends SherlockFragmentActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.i(TAG, "JStockFragmentActivity onCreate");
        super.onCreate(savedInstanceState);     
        setContentView(R.layout.jstock_fragment_activity);
    }

    private static final String TAG = JStockFragmentActivity.class.getSimpleName();
} 
```

## jstock_fragment_activity.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <fragment class="org.yccheok.jstock.gui.WatchlistFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

每次轮换我都会得到以下 logcat

```
02-25 20:11:10.562: I/JStockFragmentActivity(6989): JStockFragmentActivity onCreate
02-25 20:11:10.597: I/WatchlistFragment(6989): WatchlistFragment onCreate
02-25 20:11:10.613: I/WatchlistFragment(6989): WatchlistFragment onActivityCreated
02-25 20:11:10.613: I/WatchlistFragment(6989): WatchlistFragment getTimeConsumingData
02-25 20:11:12.078: I/JStockFragmentActivity(6989): JStockFragmentActivity onCreate
02-25 20:11:12.109: I/WatchlistFragment(6989): WatchlistFragment onCreate
02-25 20:11:12.121: I/WatchlistFragment(6989): WatchlistFragment onActivityCreated
02-25 20:11:12.121: I/WatchlistFragment(6989): WatchlistFragment getTimeConsumingData
02-25 20:11:17.492: I/JStockFragmentActivity(6989): JStockFragmentActivity onCreate
02-25 20:11:17.519: I/WatchlistFragment(6989): WatchlistFragment onCreate
02-25 20:11:17.527: I/WatchlistFragment(6989): WatchlistFragment onActivityCreated
02-25 20:11:17.527: I/WatchlistFragment(6989): WatchlistFragment getTimeConsumingData 
```

我想有没有应该在轮换期间一次又一次地`setRetainInstance(true)`创造？`WatchlistFragment`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:08:52.740

[这是对规格](https://developer.android.com/reference/android/app/Fragment.html#setRetainInstance%28boolean%29)的正确编码：

> *   `onDestroy()`不会被调用（但`onDetach()`仍然会被调用，因为片段正在与其当前活动分离）。
> *   `onCreate(Bundle)`不会被调用，因为片段没有被重新创建。
> *   `onAttach(Activity)`并且**`onActivityCreated(Bundle)`仍然会被调用**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:09:34.230

是的，它调用`onActivityCreated()`但它不调用`onCreate()`and `onCreateView()`。因此，将您不想被再次调用的代码移动到`onCreate()`.

# c# - asp.net 以编程方式创建的表和 css 优先级

> ID：15066531
> 
> 赞同：1
> 
> 时间：2013-02-25T12:03:04.133
> 
> 标签：c#, css, asp.net, hover, css-tables

我有一个表，我在文件后面的代码中以编程方式创建了一个表，并将备用行的颜色设置为灰色以便于查看，如下所示：

```
<New cells and rows created here>

tblResults.GridLines = GridLines.Both;
tblResults.BorderStyle = BorderStyle.Solid;
tblResults.HorizontalAlign = HorizontalAlign.Center;

if (rowNumber % 2 == 1)
{
    tblRow.BackColor = System.Drawing.Color.LightGray;
}
tblResults.Rows.Add(tblRow);

tblResults.CssClass = "myclass" ;
pnlContent.Controls.Add(tblResults); 
```

当用户将鼠标悬停在它们上方时，我还希望突出显示这些行，如下所示：

```
.myclass tr:hover
{
   background: #FCF;
} 
```

现在，悬停似乎仅适用于我假设优先于 css 的 c# 代码中未突出显示为灰色的行。

我怎样才能让这些灰色行与 CSS 悬停一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:14:13.830

试试这个希望它有所帮助，我认为页面内的样式覆盖了你的浅灰色背景。试试这个会很容易找到解决方案

```
if (rowNumber % 2 == 1)
{
tblRow.Attributes.Add("Class","ClassName_grey");
}
else{
tblRow.Attributes.Add("Class","ClassName_nothing")
}

.myclass tr:hover
{
   background: #FCF;
}
.ClassName_grey {
background: #eeeeee; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:10:03.163

你可以试试

```
.myclass tr:hover
{
   background-color: #FCF;
} 
```

或添加 !important 限定符。前者基本上设置了与服务器端代码相同的样式，而您的代码设置了不太具体的背景（它的所有方面，而不仅仅是颜色）。

否则，请尝试查看源代码或使用开发人员工具来查看需要覆盖的样式属性。

# ios - iOS - NSOperation 中的异步 NSURLConnection

> ID：15066532
> 
> 赞同：8
> 
> 时间：2013-02-25T12:03:04.530
> 
> 标签：ios, xcode, cocoa-touch, nsurlconnection, nsoperation

我知道这个问题在 SO 上被问了很多次，但我没有设法让它在我的项目中工作......

所以，我想子类化`NSOperation`并让它使用`NSURLConnection`. 正确的方法是什么？这是我的代码不起作用：首先，我将所有操作添加到一个循环中：

```
DownloadFileOperation *operation;
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
for (int i=0; i<10; i++) {
operation = [[DownloadFileOperation alloc] init];
operation.urlString = pdfUrlString;
[queue addOperation:operation];
operation = nil; } 
```

这是我的子类：

```
@interface DownloadHandbookOperation : NSOperation <NSURLConnectionDelegate>
{

}

@property (strong, nonatomic) NSString *urlString;

@end

@implementation DownloadHandbookOperation
{
    NSString *filePath;
    NSFileHandle *file;
    NSURLConnection * connection;
}

- (void)start
{
    if (![NSThread isMainThread])
    {
        [self performSelectorOnMainThread:@selector(start) withObject:nil waitUntilDone:NO];
        return;
    }

    NSURL *url = [[NSURL alloc] initWithString:[self.urlString stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]];

    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
    [req addValue:@"Basic ***=" forHTTPHeaderField:@"Authorization"];
    connection = [[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES];

}

- (void)connection:(NSURLConnection *)conn didReceiveResponse:(NSURLResponse *)response
{
    NSString *filename = [[conn.originalRequest.URL absoluteString] lastPathComponent];
    filename = [filename stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    filePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:filename];
    [[NSFileManager defaultManager] createFileAtPath:filePath contents:nil attributes:nil];

    file = [NSFileHandle fileHandleForUpdatingAtPath:filePath] ;
    if (file)
    {
        [file seekToEndOfFile];
    }
    else
        [self finish];
}

- (void)connection:(NSURLConnection *)conn didReceiveData:(NSData *)data
{
    if (file) {
        [file seekToEndOfFile];
    }
    [file writeData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)conn
{
    [file closeFile];
    [self finish];
}

- (void)connection:(NSURLConnection *)conn didFailWithError:(NSError *)error
{
    connection = nil;

    [self finish];
}

- (void)cancel
{
    [super cancel];
    [connection cancel];
}

- (void)finish
{
    NSLog(@"operationfinished.");
}

@end 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T12:46:58.767

您需要正确配置您的操作以作为“并发操作”执行

[并发编程指南：为并发执行配置操作](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationObjects/OperationObjects.html#//apple_ref/doc/uid/TP40008091-CH101-SW8)

您需要以符合 KVO 的方式返回并`isConcurrent = YES`正确管理其他状态标志。`isExecuting``isFinished`

* * *

为了说明这里的总体思路，Pulse 工程师的一篇文章描述了他们的解决方案，其中包含一些易于理解的演示代码，您可以下载和查看。

[Pulse Engineering 博客：使用 NSOperationQueues 进行并发下载](http://web.archive.org/web/20110812034830/http://eng.alphonsolabs.com/concurrent-downloads-using-nsoperationqueues/)**

此代码还通过确保它在主线程上启动它来处理在具有活动运行循环的线程上启动 NSURLConnection 的要求。

（** 链接现在指向archive.org，我认为Pulse 已被收购，并已将他们的旧网站关闭）

# javascript - 更改所有内容 使用 JavaScript 的标签

> ID：15066533
> 
> 赞同：6
> 
> 时间：2013-02-25T12:03:06.173
> 
> 标签：javascript, html, css, tags, pre

我想知道如何更改文档中的所有 pre 标签...

我正在使用这个：

```
var preContent = document.getElementById('code').innerHTML; 
```

但这只会改变 1 个 pre 标签的内容......带有 ID 'code' 的那个。

如果你能告诉我如何使用 JavaScript 更改所有 pre 标签，我很感激

这是所有代码：

```
window.onload = function () {
    var preContent = document.getElementById('code').innerHTML;
    var codeLine = new Array();
    var newContent = '<table width="100%" border="1" ' 
        + 'cellpadding="0" cellspacing="0" >';

    codeLine = preContent.split('\n');
    for (var i = 0; i < codeLine.length; i++) {
        newContent = newContent + '<tr><td class="codeTab1" >' 
            + i.toString() + '</td><td class="codeTab2">' 
            + codeLine[i] + '</td></tr>';
    }
    newContent = newContent + '</table>';

    document.getElementById('code').innerHTML = newContent;
} 
```

PS：这是为了让一个普通的编译器看起来像在行 PPS 之前带有数字的普通编译器：每个 pre 标签都会有不同的内容，我希望使用相同的脚本来更改它（如果可能的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:05:18.033

您可以使用[getElementsByTagName](https://developer.mozilla.org/en/docs/DOM/document.getElementsByTagName)：

```
var preElements = document.getElementsByTagName('pre');

for(var i = 0; i < preElements.length; ++ i)
{
    var element = preElements[i];

    /* modify element.innerHTML here */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:53:39.790

代码中的第一个问题。文档中没有两个元素可以具有相同的 id 。

因此，您可以使用 jquery 轻松更改它。看代码。

```
$('pre').html("what ever text you want to show "); 
```

或者使用 javascript 你可以这样做：

```
var x = document.getElementsByTagName('pre');
for(var i = 0; i < x.length; ++ i)
{
   x.innerHTML = "what ever text you want to show";
} 
```

# php - mysql concat字符串与结果

> ID：15066534
> 
> 赞同：1
> 
> 时间：2013-02-25T12:03:08.047
> 
> 标签：php, mysql

我有一张这样的桌子

```
Name  Country State
John  US      California 
```

我想用一个 concat 做一个 select 语句，所以我得到了这样的东西

```
http:// getmehelp / US / John.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:05:56.827

您正在寻找的查询应该是这个：

```
SELECT concat('http://getmehelp/',Country,'/',Name,'.txt')
FROM table; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:06:39.650

```
SELECT CONCAT ( 'http://getmehelp/', country , '/', name , '.txt') AS link; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:04:09.437

```
select concat('http://getmehelp/', country, '/', name, '.txt')
from your_table 
```

# image - Highslide：单击外部区域时缩小图像

> ID：15066539
> 
> 赞同：0
> 
> 时间：2013-02-25T12:03:45.303
> 
> 标签：image, highslide

我唯一喜欢 highslide 的东西是，当我单击缩略图并且它变大时，我只能在我准确单击图像区域时将其缩小。

在图像区域外单击时是否可以缩小图像？

（当我用鼠标光标悬停在图像之外时，还可以选择缩小它吗？）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:24:24.287

如果您使用变暗背景（例如 hs.dimmingOpacity=0.7），单击图像区域外部将关闭扩展器。这需要 highslide-full.js。如果您不想要变暗的背景，只需将不透明度设置为一个很小的值，例如 hs.dimmingOpacity=0.01。

当您将鼠标悬停在图像外时，可能包含一个 onAfterExpand 事件来关闭扩展器，但我想我可以保证您不会喜欢它。如果访问者单击缩略图，但在打开时没有碰巧将鼠标悬停在图像上，它会立即再次关闭。对于网站访问者来说，这将是*非常*令人沮丧的行为。

# android - 服务中的 Android 位置更新

> ID：15066540
> 
> 赞同：9
> 
> 时间：2013-02-25T12:03:45.563
> 
> 标签：android, location, android-service

我想做这样的事情：

*   当我的应用程序启动时，我想启动一个服务来检查我的位置

*   当应用程序进入后台时，我想停止服务

我有两个主要问题：

1.  如何检测我的应用程序进入后台？我有几个活动，我在 MainActivity 中尝试了覆盖 onPause，但是当我开始其他活动时也会调用 onPause。

2.  这个问题更重要：我的服务应该如何检查我的位置？我尝试了几种方法，但没有成功。

我的服务看起来像这样，但它不起作用。我应该改变什么才能让它工作？

```
package com.pivoscore.service;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;

public class LocationService extends Service {

    private LocationListener locationListener;

    @Override
    public IBinder onBind(final Intent intent) {
        return null;
    }

    @Override
    public int onStartCommand(final Intent intent, final int flags, final int startId) {
        super.onStartCommand(intent, flags, startId);
        return Service.START_STICKY;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        final LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
        this.locationListener = new MyLocationListener();
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 100, 0, this.locationListener);
    }

    private static class MyLocationListener implements LocationListener {

        @Override
        public void onLocationChanged(final Location location) {
        }

        @Override
        public void onProviderDisabled(final String provider) {
        }

        @Override
        public void onProviderEnabled(final String provider) {
        }

        @Override
        public void onStatusChanged(final String provider, final int status, final Bundle extras) {
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:09:29.513

这将有助于明确您的要求，但不要忘记添加我在评论中添加的权限，也不要忘记在清单文件代码片段中添加服务标签正在关注

```
public class LocationService extends Service {
public static final String BROADCAST_ACTION = "Hello World";
private static final int TWO_MINUTES = 1000 * 60 * 2;
public LocationManager locationManager;
public MyLocationListener listener;
public Location previousBestLocation = null;

Intent intent;
int counter = 0;

@Override
public void onCreate() {
    super.onCreate();
    intent = new Intent(BROADCAST_ACTION);      
}

@Override
public void onStart(Intent intent, int startId) {      
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    listener = new MyLocationListener();        
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, listener);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);
}

@Override
public IBinder onBind(Intent intent) {
    return null;
}

protected boolean isBetterLocation(Location location, Location currentBestLocation) {
    if (currentBestLocation == null) {
        // A new location is always better than no location
        return true;
    }

    // Check whether the new location fix is newer or older
    long timeDelta = location.getTime() - currentBestLocation.getTime();
    boolean isSignificantlyNewer = timeDelta > TWO_MINUTES;
    boolean isSignificantlyOlder = timeDelta < -TWO_MINUTES;
    boolean isNewer = timeDelta > 0;

    // If it's been more than two minutes since the current location, use the new location
    // because the user has likely moved
    if (isSignificantlyNewer) {
        return true;
    // If the new location is more than two minutes older, it must be worse
    } else if (isSignificantlyOlder) {
        return false;
    }

    // Check whether the new location fix is more or less accurate
    int accuracyDelta = (int) (location.getAccuracy() - currentBestLocation.getAccuracy());
    boolean isLessAccurate = accuracyDelta > 0;
    boolean isMoreAccurate = accuracyDelta < 0;
    boolean isSignificantlyLessAccurate = accuracyDelta > 200;

    // Check if the old and new location are from the same provider
    boolean isFromSameProvider = isSameProvider(location.getProvider(),
            currentBestLocation.getProvider());

    // Determine location quality using a combination of timeliness and accuracy
    if (isMoreAccurate) {
        return true;
    } else if (isNewer && !isLessAccurate) {
        return true;
    } else if (isNewer && !isSignificantlyLessAccurate && isFromSameProvider) {
        return true;
    }
    return false;
}

/** Checks whether two providers are the same */
private boolean isSameProvider(String provider1, String provider2) {
    if (provider1 == null) {
      return provider2 == null;
    }
    return provider1.equals(provider2);
}

@Override
public void onDestroy() {       
   // handler.removeCallbacks(sendUpdatesToUI);     
    super.onDestroy();
    Log.v("STOP_SERVICE", "DONE");
    locationManager.removeUpdates(listener);        
}   

public static Thread performOnBackgroundThread(final Runnable runnable) {
    final Thread t = new Thread() {
        @Override
        public void run() {
            try {
                runnable.run();
            } finally {

            }
        }
    };
    t.start();
    return t;
}

public class MyLocationListener implements LocationListener
{

    public void onLocationChanged(final Location loc)
    {
        Log.i("**************************************", "Location changed");
        if(isBetterLocation(loc, previousBestLocation)) {
            loc.getLatitude();
            loc.getLongitude();             
            intent.putExtra("Latitude", loc.getLatitude());
            intent.putExtra("Longitude", loc.getLongitude());     
            intent.putExtra("Provider", loc.getProvider());                 
            sendBroadcast(intent);          
            /*final Geocoder geocoder = new Geocoder(getApplicationContext(), Locale.getDefault());         
            String Text = "";
            try {
                List<Address> addresses = geocoder.getFromLocation(loc.getLatitude(), loc.getLongitude(), 1);                
                Text = "My current location is: "+addresses.get(0).getAddressLine(0); 

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Text = "My current location is: " +"Latitude = " + loc.getLatitude() + ", Longitude = " + loc.getLongitude();  
            }
            */
            //Toast.makeText( getApplicationContext(), "Location polled to server", Toast.LENGTH_SHORT).show();
        }                               
    }

    public void onProviderDisabled(String provider)
    {
        Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
    }

    public void onProviderEnabled(String provider)
    {
        Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();
    }

    public void onStatusChanged(String provider, int status, Bundle extras)
    {

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:45:18.310

1.  应用程序不是 Android 中的可视化组件。它分为活动，每个活动在可见时运行，在其他情况下暂停和销毁。因此，没有整个应用程序进入后台的概念，活动在其各自可见性的基础上暂停和恢复，并且在这件事上完全独立于其他活动。

2.  您的服务应在其位置管理器中`onCreate()`注册，在其中注销`onDestroy()`。它`onBind()`应该返回一个`Messenger`对象。并且，`onLocationChanged()`它应该通过其 shared 发送消息`Messenger`。无需使用`START_STICKY`，因为您不希望 Service 一直运行。

3.  Activity（可以是 App 中的任何 Activity）只需要调用`bindService()`它的`onStart()`，如果还没有启动该服务，Activity 会`Messenger`从服务中获取一个。此外，Activity 应该`unbindService()`从它的`onStop()`. 当没有任何绑定时，服务将自动停止。

4.  如果您需要在应用程序（任务）级别执行第 3 点中的内容，请实现[`Application`](http://developer.android.com/reference/android/app/Application.html)该类，并使用它的`onCreate()`and `onTerminate()`. 应用程序类不会像 Activity 那样暂停或停止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-08T06:07:33.607

建议你使用google提供的最新位置api（也兼容2.2版本）。

这是一个示例，展示了如何使用它： [https ://github.com/chenjishi/android_location_demo](https://github.com/chenjishi/android_location_demo)

当您的应用程序运行到后台时，您可以调用 disconnect 来停止位置更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:09:40.373

试试这个代码..通过使用这个你可以找到你的应用程序是在前台还是后台。希望这会帮助你。

```
try {
    foreground = new ForegroundCheckTask().execute(ctx).get();
}

======================================

class ForegroundCheckTask extends AsyncTask<Context, Void, Boolean> {

@Override
protected Boolean doInBackground(Context... params) {
    final Context context = params[0].getApplicationContext();
    return isAppOnForeground(context);
}

private boolean isAppOnForeground(Context context) {
    ActivityManager activityManager = (ActivityManager) context
            .getSystemService(Context.ACTIVITY_SERVICE);
    List<RunningAppProcessInfo> appProcesses = activityManager
            .getRunningAppProcesses();
    if (appProcesses == null) {
        return false;
    }
    final String packageName = context.getPackageName();

    String activePackageName = activityManager.getRunningTasks(1).get(0).topActivity.getPackageName();
    if (activePackageName.equals(packageName)) {
        return true;
    }
    else{
        return false;
    }

}

} 
```

# android - 使用 IOMX 列出组件名称和型号时未找到编码器，但 android 仍然可以使用 H264 编码帧录制 .mp4 文件

> ID：15066543
> 
> 赞同：2
> 
> 时间：2013-02-25T12:03:52.367
> 
> 标签：android, media-player, stagefright

我一直在尝试通过与媒体播放器服务绑定来列出使用[IOMX的 android 设备中所有支持的编解码器，如此处所示。](http://www.slideshare.net/RaghavanVenkateswaran/iomx-in-android)我让我的代码正常工作并获得了组件列表。但我观察到没有编码器组件。仅列出了所有解码器组件。然后我转到android提供的内置相机应用程序并开始录制以mp4文件格式存储的视频。当我从 VLC 播放器检查 mp4 文件的编解码器信息时，它显示“H264 mpeg4 part10 avc”。所以我的疑问来了。如果没有列出 h264/avc 编码的组件，那么 android 如何编码 h264 格式的帧？

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:25:51.580

在 android 发行版中，有一套由 Google 捆绑的编解码器，通常称为“plain vanilla codecs”。在 H.264 的情况下，捆绑了一个编码器，其源位于`frameworks/av/media/libstagefright/codecs/avc/enc/`. 因此，当您从相机编码时，此默认编解码器用于对帧进行编码。为了验证这一点，您可以启用登录`OMXCodec`或`ACodec`并观察编码器组件的名称是`OMX.google.h264.encoder`。

编解码器的完整列表`SoftOMXPlugin.cpp`位于`frameworks/av/media/libstagefright/omx/`

# java - 调试套接字通信程序

> ID：15066545
> 
> 赞同：0
> 
> 时间：2013-02-25T12:03:55.220
> 
> 标签：java, network-programming

我有 2 个类 (`Client`和`Server`) 用于在我的应用程序中实现简单的通信。我的代码如下所示：

***服务器：***

```
public class Server {
    public static void main(String[] ar) {
        int port = 1025; // just a random port. make sure you enter something between 1025 and 65535.
        try {
            ServerSocket ss = new ServerSocket(port); // create a server socket and bind it to the above port number.
            System.out.println("Waiting for a client...");
            Socket socket = ss.accept();
            InputStream sin = socket.getInputStream();
            OutputStream sout = socket.getOutputStream();
            DataInputStream in = new DataInputStream(sin);
            DataOutputStream out = new DataOutputStream(sout);
            BufferedReader keyboard = new BufferedReader(new InputStreamReader(
                    System.in));
            System.out.println("enter meter id ");
            String line = null;

            while (true) {
                line = in.readUTF(); // wait for the client to send a line of text.
                System.out.println("client send me this id number " + line);
                line = keyboard.readLine();
                out.writeUTF(line);
                out.flush();
                //line = in.readUTF(); 
                System.out.println("Waiting for the next line...");
                System.out.println();
            }
        } catch (Exception x) {
            x.printStackTrace();
        }
    }
} 
```

***客户：***

```
public class Client {
    public static void main(String[] ar) {
        int serverPort = 1025;
        String address = "localhost";
        try {
            InetAddress ipAddress = InetAddress.getByName(address); // create an object that represents the above IP address.
            System.out.println(" IP address " + address + " and port "
                    + serverPort);
            Socket socket = new Socket(ipAddress, serverPort); // create a socket with the server's IP address and server's port.
            InputStream sin = socket.getInputStream();
            OutputStream sout = socket.getOutputStream();
            DataInputStream in = new DataInputStream(sin);
            DataOutputStream out = new DataOutputStream(sout);
            // Create a stream to read from the keyboard.
            BufferedReader keyboard = new BufferedReader(new InputStreamReader(
                    System.in));
            String line = null;
            System.out.println("ClientConnected.");
            System.out.println("enter meter id");

            while (true) {
                line = keyboard.readLine(); // wait for the user to type in something and press enter.
                System.out.println("Sending this number to the server...");
                out.writeUTF(line); // send the above line to the server.
                out.flush(); // flush the stream to ensure that the data reaches the other end.
                line = in.readUTF(); // wait for the server to send a line of text.
                System.out
                        .println("The server was very polite. It sent me this : "
                                + line);
                System.out.println();
            }
        }
        catch (Exception x) {
            x.printStackTrace();
        }
    }
} 
```

`out.flush`我的问题是，在测试程序时，我确实在客户端和服务器之间进行了通信，但是在调试时，在行中有一个断点`Server.java`，它没有到达预期的目的地。这个预定的目的地`line = in.readUTF();`是`Client.java`. 谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:30:24.547

[如this question](https://stackoverflow.com/questions/8377291/objectinputstreamsocket-getinputstream-does-not-work)所述，在您的套接字上打开`OutputStream`s*之前*的s是一种很好的做法。`InputStream`

这个[问题](https://stackoverflow.com/questions/8186135/java-sockets-program-stops-at-socket-getinputstream-w-o-error)也说明了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-19T12:31:52.507

我在这里怀疑的是您的客户端和服务器在两个不同的 JVM 进程中运行，并且 java 调试器无法同时调试两个 JVM。

# sunspot - 太阳黑子跟踪搜索，拒绝按条件创建刻面

> ID：15066547
> 
> 赞同：0
> 
> 时间：2013-02-25T12:04:00.073
> 
> 标签：sunspot, faceted-search, sunspot-rails, sunspot-solr, facets

我在 Ruby on Rails 的全文搜索中使用 sunspot_rails gem，
我将布尔字段（'show_facet'）添加到我的模型产品和 solr 索引
然后我想做下一步：

*   如果 'show_facet' == true 然后在搜索列表和构面列表中显示产品
*   如果 'show_facet' == false 则仅在搜索列表中显示产品

我阅读了所有文档、论坛和 api，但我找不到这个问题的答案 我可以
用太阳黑子做这个吗？

```
型号代码
可搜索的
    字符串：关键字，多个：true    
    字符串：状态
    布尔值：显示
    布尔值：show_facet
    时间：updated_at
    文本：keyword_long，存储：true
    文本：jtitle，存储：true
    整数：id
    整数：company_id
  结尾

控制器

  定义显示
    @product_search = OpenStruct.new(params[:product_search])
    @search = search_plain
  结尾

  私人的

  def search_plain
    basic_search 做 |搜索|
      search.fulltext(@product_search.fulltext) 做
        字段 *(%w[jtitle keyword_long])
        突出显示：keyword_long
        突出显示：jtitle
      结尾
    结尾
  结尾

  def basic_search
    Product.solr_search 做 |搜索|
      产量搜索
      search.with(:show, true)
      search.order_by(:random)
      search.paginate 页面：params[:page]，per_page：10
      search.with(:keywords).all_of(@product_search.keywords)
      search.facet：关键字
    结尾
  结尾

```

我需要在 facet(:keywords) 中仅包含 show_facet = true 的产品方面，但在搜索中显示所有产品（show_facet true 或 false）

# javascript - 从外部 .js 文件动态访问变化的变量

> ID：15066548
> 
> 赞同：1
> 
> 时间：2013-02-25T12:04:00.497
> 
> 标签：javascript, html

我对javascript（通常是c ++）非常陌生，我认为这个问题对你们所有人来说应该是非常基本的。

我有一个脚本，它获取在外部 .js 文件中定义的变量并使用警报显示它。

.html 文件中的代码如下所示。

```
<html>
<head>
<title></title>
<script> 

function addScript(url){
    var extScript = document.createElement('script');
    extScript.type = 'text/javascript';
    extScript.src = url;
    extScript.id = 'extScript'

    //If there is already a script with the ID 'extScript'
    //get rid of it
    var headList = document.getElementsByTagName('head');
    var scriptList = headList[0].getElementsByTagName('script');
    for(var i = 0; i < scriptList.length; i++)
    {
        if(scriptList[i].id =='extScript')
        {
            document.getElementsByTagName('head')[0].removeChild(scriptList[i]);
        }
    }

    document.getElementsByTagName('head')[0].appendChild(extScript);

}

function newNewChangeMode()
{
    addScript("C:/Users/Suzaku/Documents/Javascript/controller.js");
    alert("Neo controllerMode variable is reading " + controllerMode);
}

</script>
</head>
<body>
<a href="javascript:newNewChangeMode()">Get externally defined mode</a>
</body>
</html> 
```

文件“controller.js”看起来像这样。

```
var controllerMode = 1111; 
```

（而已！）

当我单击“获取外部定义模式”链接时，我的 javascript 运行并且警报正确显示。显示“Neo controllerMode 变量正在读取 1111”。

但是，如果我将变量 controllerMode 的定义（在 controller.js 中）更改为

```
 var controllerMode = 2222; 
```

，点击保存，然后再次单击按钮（不刷新），它仍然提示“Neo controllerMode 变量正在读取 1111”。而它**应该**说“Neo controllerMode 变量正在读取 2222”。

看起来这个脚本不是动态添加的。我需要能够更改此变量而无需刷新 .html。

提前致谢，

盖伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:11:39.190

听起来您的浏览器只是在检索缓存的 javascript 文件。确保您直接转到更新的 javascript 文件 (controller.js) 并按 F5 以确保您正在加载新版本，而不是缓存的版本。否则，您的浏览器将继续将旧的缓存脚本（已定义 1111）插入到您的脚本中。常见问题！

# sql - TOAD 认为 &String 是绑定变量

> ID：15066558
> 
> 赞同：3
> 
> 时间：2013-02-25T12:04:37.950
> 
> 标签：sql, oracle, plsql, toad, bind-variables

我正在使用 Oracle Data Integrator 开发一些 ETL，有时还通过 TOAD 测试我的部分代码。今天我遇到了 TOAD 的问题，我有一条线像

```
AND column_value like('DEV&PROD') 
```

当我尝试运行包含上述过滤器的 SQL 时，TOAD 询问 PROD 的值，它认为 PROD 是一个绑定或替换变量。TOAD 设置中是否有任何选项可以打开此功能。我正在使用带有列 (:) 的绑定变量，并且我的数据包含 & 所以我需要使用它。

此代码在 ODI 中完美运行，我只需要 TOAD 的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:11:26.197

1）使用`set define off;`（并使用 F5 键运行整个脚本）
或
2）使用`'DEV&'||'PROD'`而不是`'DEV&PROD'`
或
3）为变量设置另一个前缀符号来 启动您的脚本

```
set define ~;
select 'drag&drop', ~column_name from ~table_name; 
```

（系统将提示您输入 column_name 和 table_name，但不会提示您输入“drop”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:37:57.550

此外 - 可以在任何工具或 SQL 提示符下工作：

```
SELECT ('DEV'||'&'||'PROD') val FROM dual
/

-- Q-quote operator introduced in Oracle 10g --
SELECT 'DEV' || q'[&]'||'PROD' AS val FROM dual
/ 
```

使用 Egor 或我的示例 - 复制/粘贴，为 :bind_var 输入 1：

```
SELECT 'DEV&'||'PROD' val FROM dual
 WHERE :bind_var = 1
/ 
```

# wpf - 可重用的 ItemsControl（例如 ListViews）+ MVVM

> ID：15066560
> 
> 赞同：1
> 
> 时间：2013-02-25T12:04:41.020
> 
> 标签：wpf, mvvm, itemscontrol

我正在使用 WPF 构建一个 MVVM 应用程序，该应用程序使用许多相对复杂的列表视图。我采用了列表视图绑定到的集合是 View-Model 对象的集合，而不是底层模型对象的列表的模式 - 我通过数据绑定到一个完全独立的列来完成此操作，该列填充有看起来有点像这样的代码

```
var itemsSource = messages.Select(i => new MessageViewModel(i)); 
```

在这种情况下，列表视图`Message`向用户显示对象列表。这工作正常，但是相当笨重 - 特别是在处理集合更改事件时。

现在我想在我的应用程序的其他地方重新使用这个 ListView 以一致的方式向用户显示不同的消息列表 - 我可以看到的选项是

*   创建一个列表视图，该列表视图派生自`ListView`并且数据绑定到类型的集合`MessageViewModel`
*   创建一个控件，该控件数据绑定到对象集合，`Message`该对象集合包含或派生自绑定到某些内部构造的集合的列表视图数据`MessageViewModel`

第一个选项要求使用该控件的每个人都运行构建和维护`MessageViewModel`集合的笨重代码，第二个选项封装了此视图模型集合的维护，但这意味着我需要重新实现`ListView`其中暴露底层项目的任何成员集合，以便它们可以转换回原始`Message`类型。

我有许多类似的列表视图具有类似的可重用性问题。

是否有更好的方法来处理基于 WPF ItemsControl 的视图，允许在 MVVM 应用程序中重用这些视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:43:03.183

在我看来，您想要重用两件事：

1.  暴露一个 MessageViewModel 的集合，因此您可以将此集合绑定到 ListView 的 itemsSource。
2.  （可选），您在特定列表视图上有一个样式（或内容展示器或数据模板），您希望重用它。这部分可能还包括代码隐藏、触发器等。

您不应该将两者混为一谈。

＃2可以通过您将应用于列表视图或数据模板的样式来实现。就个人而言，我喜欢将专用类定义为 MessageViewModel 的集合，并在您的数据模板中将 TargetType 设置为该类。

#1 是一个实现 Collection、INotifyCollecitonChanged 和 INotifyPropertyChanged 的​​类。最好的方法（也是最简单的）只是将它包裹在 ObservableCollection 周围。在构造中，执行 Select 方法。然后有记账的方法。

下面是一些示例（工作！）代码。请注意，视图背后没有代码。我将这两个列表两次放入网格中。ContentControl 和 DataTemplate 的使用是我的风格 - 还有很多其他方法可以做到这一点。

======= Model.cs ====

```
using System;

namespace SO
{
    class Message
    {
        public string from { get; set; }
        public string to { get; set; }
        public string subject { get; set; }
        public DateTime received { get; set; }
    }
} 
```

======= ViewModel.cs ====

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Collections.ObjectModel;
using System.ComponentModel;

namespace SO
{
    class MessageVM : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private Message m_model;

        public MessageVM( Message model ) {
            m_model = model;
        }

        private void raize( string prop ) {
            PropertyChanged( this, new PropertyChangedEventArgs("prop") );
        }

        public string from {
            get { return m_model.from; }
            set { m_model.from = value; raize("from"); }
        }

        public string to {
            get { return m_model.to; }
            set { m_model.subject = value; raize("to") ); }
        }

        public string subject {
            get { return m_model.subject; }
            set { m_model.subject = value; raize("subject") ); }
        }

        public DateTime received {
            get { return m_model.received; }
            set { m_model.received = value; raize("recieved") ); }
        }

    }

    class FolderVM : ObservableCollection<MessageVM>
    {
        public FolderVM( IEnumerable<Message> models )
            :base( models.Select( msg => new MessageVM(msg) ) )
        {
        }
    }

    class SampleData
    {
        //static public FolderVM folder { get; set; }

        static public FolderVM folder;

        static SampleData( )
        {
            // create a sample model
            List<Message> model = new List<Message>();
            model.Add( new Message { from = "Bill", to = "Steve", subject = "Resusable Items Control", received = DateTime.Now.AddDays(-4) } );
            model.Add( new Message { from = "Steve", to = "Bill", subject = "Resusable Items Control", received = DateTime.Now.AddDays( -3 ) } );
            model.Add( new Message { from = "Bill", to = "Jeff", subject = "stack", received = DateTime.Now.AddDays( -2 ) } );

            // initialize the view model
            folder = new FolderVM( model );
        }
    }
} 
```

======= MainWindow.xaml ====

```
<Window x:Class="Paf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:src="clr-namespace:SO"
        Title="MainWindow" Height="350" Width="525"
        >

    <Window.Resources>
        <DataTemplate DataType="{x:Type src:FolderVM}">
            <ListView ItemsSource="{Binding}">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="from" Width="80" DisplayMemberBinding="{Binding Path=from}" />
                        <GridViewColumn Header="to" Width="80" DisplayMemberBinding="{Binding Path=to}" />
                        <GridViewColumn Header="subject" Width="200" DisplayMemberBinding="{Binding Path=subject}" />
                        <GridViewColumn Header="received" Width="160" DisplayMemberBinding="{Binding Path=received}" />
                    </GridView>
                </ListView.View>
            </ListView>
        </DataTemplate>        
    </Window.Resources>

    <StackPanel>
        <ContentControl Content="{Binding Source={x:Static src:SampleData.folder}}" />
        <ContentControl Content="{Binding Source={x:Static src:SampleData.folder}}" />
    </StackPanel>

</Window> 
```

# html - 使用 HTML 按钮启动 GET 请求

> ID：15066561
> 
> 赞同：1
> 
> 时间：2013-02-25T12:04:49.713
> 
> 标签：html

我有这两行代码：

```
<form method="link" action="insert.php">
<input id="nav" type="submit" value="Add">
</form> 
```

和

```
echo "<a href='#' onclick='delete_user( {$id} );'>Delete</a>"; 
```

我想做的是我可以回显一个删除数据库中原始数据的按钮。该链接现在就可以了，但看起来真的很糟糕。我想是否可以用按钮替换相同的操作。是否可以？

是不是有点像：

```
echo "<input id='nav' value='Delete' type='submit' onclick='delete_user( {$id} )'; 
```

可能不是，因为那不起作用：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:07:54.213

试试这个：

```
<button onclick='delete_user( {$id} )'>Delete</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:07:10.610

更改 :并`type='submit'`尝试`type='button'`

# regex - 使用正则表达式从字符串中提取数字

> ID：15066562
> 
> 赞同：-2
> 
> 时间：2013-02-25T12:04:50.527
> 
> 标签：regex

我刚刚在解决正则表达式时遇到了问题

[http://regexone.com/lesson/13](http://regexone.com/lesson/13)？

真正的问题是，提供一个正则表达式来取出文本字符串中的数字。给出的示例字符串是屏幕分辨率，例如 800X600 、 1024X768 等。

我们必须捕获数字，例如 1024X768 中的 1024 任何知道的人请告诉我解决方案，因为我已经浪费了半天的时间来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:07:04.173

您正在寻找任意数量的数字，后跟 x 后跟任意数量的数字：

`(\d+)x(\d+)`

# linq - Linq 将 null 传递给 Where 子句

> ID：15066566
> 
> 赞同：1
> 
> 时间：2013-02-25T12:04:59.277
> 
> 标签：linq

我有接受 Linq Where 子句表达式的方法。有时我想忽略 Where 子句并且不使用它。

我试图将 null 传递给这样的方法

```
GetUsersView(null) 
```

但有例外。如何正确地做到这一点？

```
 private IQueryable<UserView> GetUsersView(Expression<Func<User, bool>> expression)
        {            
            return _userRepository.GetAll().
                                   Where(expression).
                                   Select(p => new UserView
                                   {
                                       Id = p.Id,
                                       Active = p.Orders.Any(c => c.Active && (c.TransactionType == TransactionType.Order || c.TransactionType == TransactionType.Subscription)),
                                       DateStamp = p.DateStamp,
                                       Email = p.Email,
                                       FirstName = p.FirstName,
                                       LastName = p.LastName,
                                       Message = p.Message,
                                       UsersManager = p.Orders.Select(o => o.Product).Any(w => w.UsersManager && w.Active)
                                   });
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:59:37.667

将空值传递给方法是一个可怕的想法。通过`u => true`也不是很可读。改为创建两种方法 - 一种有参数，另一种没有。我还看到您的方法有两个职责 - 它过滤用户，并将它们转换为 UserViews。我认为按谓词过滤用户应该发生在存储库中。

您还可以创建扩展方法`IQueryable<UserView> ToViews(this IQueryable<User> source)`。

```
public static IQueryable<UserView> ToViews(this IQueryable<User> source)
{
    return source.Select(u => new UserView
         {
            Id = u.Id,
            Active = u.Orders.Any(o => o.Active && 
                            (o.TransactionType == TransactionType.Order ||
                             o.TransactionType == TransactionType.Subscription)),
            DateStamp = u.DateStamp,
            Email = u.Email,
            FirstName = u.FirstName,
            LastName = u.LastName,
            Message = u.Message,
            UsersManager = u.Orders.Select(o => o.Product)
                                   .Any(p => p.UsersManager && p.Active)
         });     
} 
```

在这种情况下，代码将如下所示：

```
private IQueryable<UserView> GetUserViews()
{
    return _userRepository.GetAll().ToViews();
}

private IQueryable<UserView> GetUserViews(Expression<Func<User, bool>> predicate)
{
    // move filtering to repository      
    return _userRepository.GetAll(predicate).ToViews();        
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:14:38.227

尝试使用

```
GetUsersView(u=>true); 
```

或者，如果您不想一直键入表达式，您可以创建一个提供默认表达式的重载函数。

```
IQueryable<UserView> GetUsersView()
{
   return GetUsersView(u=>true);
} 
```

# google-maps-sdk-ios - 如何使用适用于 iOS 的 google maps sdk 获取位置的 CGPoint？

> ID：15066567
> 
> 赞同：6
> 
> 时间：2013-02-25T12:05:03.910
> 
> 标签：google-maps-sdk-ios

如何使用适用于 iOS 的 google maps sdk 获取位置的 CGPoint？我需要在用户位置上添加 pinview。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-25T12:30:42.143

这基本上与[这个问题](https://stackoverflow.com/questions/15007528/convertpoint-tocoordinatefromview-method-for-google-maps-ios-sdk)相反，例如：

```
GMSMapView* mapView = ...;
CLLocationCoordinate2D coordinate = ...;
...
CGPoint point = [mapView.projection pointForCoordinate: coordinate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:08:45.153

好的，根据您的问题，您是否要将用户位置转换为 cgpoint，是吗.. 尝试使用它。

```
CGPoint newCenter = [self.map convertCoordinate:coord toPointToView:self.map]; 
```

问候。

# android - Can't play this video error in android WebView using RTSP stream

> ID：15066571
> 
> 赞同：0
> 
> 时间：2013-02-25T12:05:22.370
> 
> 标签：android, webview, rtsp

我的应用程序有一个加载简单 html 的 WebView。但是，此 html 链接到 rtsp 实时视频流并且 WebView 能够加载它，但是当我单击一个视频时，它显示为正在加载播放器，但一段时间后收到消息“无法播放此视频..当我在本机 Android 浏览器中打开 rtsp 链接，它加载并工作正常，所以我知道这不是视频流不兼容。WebView 中是否有可以启用以允许播放 rtsp 视频流的东西？我都试过了模拟器和原始设备。谢谢！

```
public class MainActivity extends Activity 
{
private Button button;
public void onCreate(Bundle savedInstanceState) 
{
    final Context context = this;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    button = (Button) findViewById(R.id.buttonUrl);
    button.setOnClickListener(new OnClickListener() 
    {
        @Override
        public void onClick(View arg0) 
        {
            Intent intent = new Intent(context, WebViewActivity.class);
            startActivity(intent);
        }

    });

} 
```

}

```
public class WebViewActivity extends Activity 
{
    private WebView webView;

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);

    webView = (WebView) findViewById(R.id.webView1);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadUrl("http://myurl.com/");
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T13:54:31.673

我能够使用以下方法将流重定向到视频播放器：

```
webView.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.startsWith("rtsp")) {
            Uri uri = Uri.parse(url);
            Intent intent = new Intent(Intent.ACTION_VIEW, uri);
            startActivity(intent);
            return true;
        }
        return super.shouldOverrideUrlLoading(view, url);
    }
}); 
```

# ruby-on-rails - 活动资 源参数序列化问题

> ID：15066580
> 
> 赞同：1
> 
> 时间：2013-02-25T12:05:41.680
> 
> 标签：ruby-on-rails, rest, activeresource, url-parameters, query-parameters

我正在尝试将以下 ruby​​ 哈希传递到活动资源 (3.0.9) find(:from) 调用中。

```
my_hash = {
            :p => {:s => 100, :e => 2},
            :k => "blah",
            :f => [
                   {
                     :fl => :bt,
                     :tp => :trm,
                     :vl => "A::B"
                   },
                   {
                     :fl => :jcni,
                     :tp => :trm,
                     :vl => [133, 134]
                   },
                   {
                     :mnfl => :bmns,
                     :mxfl => :bmxs,
                     :tp => :rfstv,
                     :vl => 1e5
                   },
                   {
                     :fl => :bpo,
                     :tp => :rftv,
                     :op => :eta,
                     :vl => 1.months.ago.strftime("%Y-%m-%d")
                   }
                  ]
          }    

Resource.find_by_x_and_y(:all, :from => :blah, params: my_hash) 
```

在服务器端操作中，当我打印参数哈希时，一切都搞砸了。（数组中的最后 3 个哈希映射到 :f ）

```
{
  "f" => [
          {
            "fl" => "bt",
            "tp" => "trm",
            "vl" => "A::B"
          },
          {
            "fl" => "jcni",
            "tp" => "trm",
            "vl" => [
                     "133",
                     "134"
                    ],
            "mnfl" => "bmns",
            "mxfl" => "bmxs"
          },
          {
            "tp" => "rfstv",
            "vl" => "100000.0",
            "fl" => "bpo",
            "op" => "eta"
          },
          {
            "tp" => "rftv",
            "vl" => "2013-01-25"
          }
         ],
  "k" => "blah",
  "p" => {
    "e" => "2",
    "s" => "100"
  },
  "action" => "blah",
  "controller" => "x/Y",
  "format" => "json"
} 
```

my_hash.to_query 给了我

```
f[][fl]=bt&f[][tp]=trm&f[][vl]=A%3A%3AB&f[][fl]=jcni&f[][tp]=trm&f[][vl][]=133&f[][vl][]=134&f[][mnfl]=bmns&f[][mxfl]=bmxs&f[][tp]=rfstv&f[][vl]=100000.0&f[][fl]=bpo&f[][op]=eta&f[][tp]=rftv&f[][vl]=2013-01-25&k=blah&p[e]=2&p[s]=100 
```

它没有索引，因此混淆了。

这种类型的序列化是否有使用“[]”的名称？这是否保证忠实地序列化/反序列化任意嵌套的哈希/数组/基元？如何使活动资源表现良好？

# c# - c# Metro App 增量加载

> ID：15066581
> 
> 赞同：0
> 
> 时间：2013-02-25T12:05:43.720
> 
> 标签：c#, microsoft-metro

对于大数据，我需要在我的商店应用程序中进行增量加载。我在 mdsn 上看到了示例，并阅读了另一个答案。如果我的数据是三个并且所有这些数据都需要在 GridView 中绑定，我如何增量加载数据`ObservableCollection<T>`？（对不起我的英语）示例我的意思是：

```
private async Task<LoadMoreItemsResult> LoadDataAsync(uint count)
{                                       
    XDocument document = await ParseUrl("");
    var xmlreader = document.CreateReader();
    feed results = GetFeed(xmlreader);
    newsFeed = results; 
    return new LoadMoreItemsResult {Count = count};
}

public class feed 
{

    public ObservableCollection<> Posts { get; set; }
    public ObservableCollection<> Profiles { get; set; }
    public ObservableCollection<> Groups { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:27:06.687

我认为这可能是最合适的例子

[http://www.silverlightshow.net/items/Windows-8-metro-Improve-GridView-and-ListView-with-SemanticZoom-and-Incremental-Loading.aspx](http://www.silverlightshow.net/items/Windows-8-metro-Improve-GridView-and-ListView-with-SemanticZoom-and-Incremental-Loading.aspx)

看看它..它支持增量加载，因为你正在尝试使用它。

# hibernate - Hibernate 注释与 Eager fetch 的多对多反向关系

> ID：15066587
> 
> 赞同：0
> 
> 时间：2013-02-25T12:05:54.503
> 
> 标签：hibernate, many-to-many, hibernate-mapping, hibernate-annotations

> 你好呀，
> 
> > 我有一个具有多对多关系的用户和角色模型，如下所示

```
@Entity
@Table(name = "USER")
@Indexed
@XmlRootElement
public class User extends BaseObject implements Serializable, UserDetails,     PersistentObject, HasRevision, org.activiti.engine.identity.User {

private Set<Role> roles = new HashSet<Role>();
@ManyToMany(fetch = FetchType.EAGER)
@JoinTable(
        name = "USER_ROLE",
        joinColumns = { @JoinColumn(name = "USER_ID") },
        inverseJoinColumns = @JoinColumn(name = "ROLE_ID")
)
public Set<Role> getRoles() {
    return roles;
}
public void setRoles(Set<Role> roles) {
    this.roles = roles;
} 
}

@Entity
@Table(name = "ROLE")
@NamedQueries({
    @NamedQuery(
            name = "findRoleByName",
            query = "select r from Role r where r.name = :name "
    )
})
public class Role extends BaseObject implements Serializable, GrantedAuthority {

private Set<User> users = new HashSet<User>();
@ManyToMany(fetch = FetchType.EAGER,mappedBy = "roles")
public Set<User> getUsers() {
    return users;
}
    public void setUsers(Set<User> users) {
    this.users = users;
}
} 
```

> 当我创建或更新具有角色分配的用户时，异常将如下所示
> 
> > 用户 id：用户 org.springframework.orm.hibernate4.HibernateOptimisticLockingFailureException：类 [com.model.User] 的对象，标识符为 [user]：乐观锁定失败；嵌套异常是 org.hibernate.StaleObjectStateException：行已被另一个事务更新或删除（或未保存的值映射不正确）：[com.model.User#user] ....
> > 
> > 原因：org.hibernate.StaleObjectStateException：行已被另一个事务更新或删除（或未保存的值映射不正确）：[com.model.User#user]
> 
> 我不能放懒而不是急切地获取它会导致一些其他问题（我无法从会话中获取角色），并且我不能删除它会导致角色删除的反向关系。
> 
> 所以欢迎我如何解决问题的建议，并提前感谢。

# c++ - 寻找翻译应用程序的方法

> ID：15066590
> 
> 赞同：0
> 
> 时间：2013-02-25T12:06:01.923
> 
> 标签：c++, windows, localization

我开始设计一个应用程序，我希望它从一开始就支持多种语言，以避免以后必须更改大量代码以启用多种语言。

我很早就编写了一个 C 应用程序，其中消息在一个*结构*中，所以我有几个带有翻译字符串的头文件，这些文件将被集成到应用程序本身中，所以要添加一种新语言，我必须重新编译。

我想要的是能够拥有一个本地化系统，允许我翻译应用程序并轻松添加新语言，而无需重新编译应用程序。理想情况下，使用一种非常直接的方式来翻译和测试翻译（例如编辑文本文件并在应用程序中查看结果），而不必依赖 3rd 方工具进行翻译。

我正在考虑为它编写自己的系统，例如可能基于 XML 用于包含翻译的文件，但我想知道是否有人有这方面的经验，并会推荐一个轻量级的库来提供我想要的（即使翻译不像编辑文本文件那么直接）。我强调轻量级是因为我认为应用程序本身的重量不会超过几兆字节。

如果与此事相关，它将是一个 Windows 应用程序。到目前为止，我还没有决定我使用的图形工具包，但我可能会使用默认的 Windows 提供而不使用跨平台的工具包（如 wxWidgets、Qt、GTK+ ......）。但这并不是一成不变的，如果有一个提供显着优势，它会考虑它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:07:32.850

我不确定轻量级有多轻，但是[qt 对国际化有很好的支持](http://qt-project.org/doc/qt-4.8/internationalization.html)。

然后您可以使用[QtLinguist](http://code.google.com/p/qtlinguistdownload/)来简单地翻译您的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:15:09.523

不要发明自己的系统。国际化（i18n）和本地化（l10n）几乎总是包含在一些现有的库中。

如果您为 Windows 开发，此链接[Globalizing and Localizing .NET Framework Applications](http://msdn.microsoft.com/en-us/library/h6270d0z.aspx)可能会很有用。

# objective-c - 将“2013 年 3 月 13 日 05:30pm”转换为 NSDate

> ID：15066592
> 
> 赞同：1
> 
> 时间：2013-02-25T12:06:11.440
> 
> 标签：objective-c, cocoa-touch, nsdate, nsdateformatter, date-parsing

我有以下字符串`"Mar 13, 2013 05:30pm"`。我想将其转换为`NSDate`对象。

我尝试了以下方法，但它不起作用。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MMM:dd, YYYY hh:mm:aa"];
date=[dateFormatter dateFromString:dateString]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:14:45.200

```
NSDateFormatter *dFormate = [[NSDateFormatter alloc] init];
[dFormate setDateFormat:@"MM dd, yyyy hh:mma"];
[dFormate setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

NSString *dateStr = @"Mar 13, 2013 05:30pm";
NSDate *date = [dFormate dateFromString:dateStr];

NSLog(@"Date : %@", date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:10:48.217

试试这个 ：-

```
NSString *stringDate = @"Mar 13, 2013 05:30pm";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MMM dd, yyyy hh:mmaa"];
NSDate *date=[dateFormatter dateFromString:stringDate];
NSLog(@"Date : %@",date); 
```

希望对你有帮助。。

# python - 继承模型和外键

> ID：15066594
> 
> 赞同：-1
> 
> 时间：2013-02-25T12:06:16.827
> 
> 标签：python, django

`Apartament`如果我添加和`Land`对象也`Contact`形成和形成，如何显示`Photo`？

```
class Property(models.Model):
    title = models.CharField(max_length=255)
    slug = models.SlugField()
    desc = models.TextField()

class Apartament(Property):
    bedrooms = models.IntegerField()
    levels = models.IntegerField()
    something = models.CharField(max_length=255)

class Land(Property):
    something = models.CharField(max_length=255)

class Contact(models.Model):
    name = models.CharField(max_length=100)
    phone = models.CharField(max_length=20)
    property = models.ForeignKey(Property)

class Photo(models.Model):
    photo = models.ImageField(upload_to='images')
    property = models.ForeignKey(Property) 
```

管理员.py：

```
class PhotoInline(admin.StackedInline):
    model = Photo
    can_delete = True

class ContactInline(admin.StackedInline):
    model = Contact
    can_delete = True

class PropertyAdmin(admin.ModelAdmin):
    inlines = [PhotoInline, ContactInline, ] 
```

仅当我添加 Property 对象时才有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:12:44.870

Admin(inline)s 不是对称的，您还需要为这些模型注册管理类，包括您需要的内联。

# python - 将值插入日志消息的正确方法

> ID：15066602
> 
> 赞同：2
> 
> 时间：2013-02-25T12:06:44.427
> 
> 标签：python, logging

是否有一些将值插入日志消息的最佳实践？我的 google-fu 在这里无效，但我得到这样[的](https://code.djangoproject.com/ticket/17358)例子：

```
#Change all logging from this

logger.warning("This is a %s" % var)

#to

logger.warning("This is a %s", var) 
```

就像每个人都必须遵循的最佳实践一样。有原因吗？（如类的对象）的任何值`var`会在这里失败吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:08:20.373

使用后者。日志模块只会*在处理消息时*插入值。

这意味着您可以节省调试消息的 CPU 周期，例如，如果日志级别排除它们。

这记录在[`logging`HOWTO，“优化”一章中](http://docs.python.org/2/howto/logging.html#optimization)：

> 消息参数的格式化被推迟到无法避免为止。

您可能希望遵循该章中给出的其余建议，以避免仅用于日志记录的昂贵计算。

在内部，`logging`模块使用第一种形式，因此任何不能转换为字符串的值都会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:08:13.703

我认为第二种形式更好，因为记录器有机会`warning`在进行替换之前检查是否启用了级别。

# python - Python 多处理队列文件描述符

> ID：15066603
> 
> 赞同：3
> 
> 时间：2013-02-25T11:09:52.740
> 
> 标签：python, queue, multiprocessing

我想知道队列是否有文件描述符以及如何找到它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T11:35:38.193

该类`Queue`使用单向[`multiprocessing.Pipe()`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.Pipe)通信进行通信。

您可以通过连接的（私有）`._reader`和`._writer`属性获得该管道的任一端，并且（至少在 POSIX 上），这些具有`.fileno()`方法：

```
>>> import multiprocessing
>>> queue = multiprocessing.Queue()
>>> queue._reader.fileno()
3
>>> queue._writer.fileno()
4 
```

让我强调那里的“私人”绰号；和属性是实现细节`._reader`，`._writer`因此可以在不破坏已发布 API 的情况下更改未来版本。使用风险自负。

# javascript - jquery animate 在 ie8 中无法正常工作

> ID：15066606
> 
> 赞同：0
> 
> 时间：2013-02-25T12:07:01.473
> 
> 标签：javascript, jquery, html, css

**它在除IE8**之外的所有浏览器中都能正常工作。

在 IE8 中，鼠标悬停时，所有框都向上，鼠标离开时，所有框都向下，仅在 IE8 中发生。

IE7 和 IE9 运行良好。

js

```
var timeoutId;

$('.box').mouseenter(function () {
    var $this = $(this);
    if (!timeoutId) {
        timeoutId = window.setTimeout(function () {
            timeoutId = null;
            $this.stop().animate({
                marginTop: '-224px',
                height: '300px'
            })
            $this.find('.rotate-arrow').addClass('rotate');
            $this.find('.header-content-span').css('display', 'none');
        },500); 
    }
});
$('.box').mouseleave(function () {
    var $this = $(this);
    if (timeoutId) {
        window.clearTimeout(timeoutId);
        timeoutId = null;  
    }
    $this.stop().animate({
        marginTop: '0px',
        height: '77px'
    })
    $this.find('.rotate-arrow').removeClass('rotate');
    $this.find('.header-content-span').css('display', 'block');
}); 
```

html ( 3 盒)

```
<div class="box">
    <div class="box-heading bgc-cl1"></div>
    <div class="box-content"></div>
</div> 
```

css

```
.box{
    float: left;
    width: 290px;
    height: 77px;
    margin: 0px 8px;
    overflow: hidden;
    cursor: pointer;
    -moz-box-shadow: 5px 5px 8px #888;
    -webkit-box-shadow: 5px 5px 8px #888;
    box-shadow: 5px 5px 8px #888;
    position: relative;
    z-index: 999;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    position: relative;
} 
```

# prolog - Prolog 查找和删除谓词

> ID：15066610
> 
> 赞同：0
> 
> 时间：2013-02-25T12:07:06.330
> 
> 标签：prolog

我有代码：

```
locdiff([A|T], [A|_], T).
locdiff([H|T], L2, [H|T2]) :-
    locdiff(T, L2, T2). 
```

当我用它进行测试时`locdiff([(a,1), (b,2), (b,3), (c,3), (c,4)], [(b,_)], L3)`，它只会找到并删除其中`[(b,_)]`之一`(b,2)`。我需要它来查找和删除两者`(b,2)`和`(b,3)`/或所`[(b,_)]`包含的内容。谁能帮我解决我错过的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:32:01.990

可能是你需要一些东西：

```
locdiff([], _, []).

locdiff([(b,_)|T], [(b,_)], T1) :-
    !, locdiff(T, [(b,_)], T1).

locdiff([H|T], L2, [H|T2]) :-
    locdiff(T, L2, T2). 
```

但是你为什么写[A| _] 如果列表中只有一个元素？

[编辑] 我忘记了！在第二条规则中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:31:24.223

如果您遵循 larsman 的提示，有一个值得注意的技术并发症，我会以这种方式直接实施

```
locdiff([], _, []).
locdiff([A|T], [A|_], R) :-
    !, locdiff(T, [A|_], R).
locdiff([H|T], L2, [H|T2]) :-
    locdiff(T, L2, T2). 
```

有了这个

```
?- locdiff([(a,1), (b,2), (b,3), (c,3), (c,4)], [(b,_)], L3).
L3 = [ (a, 1), (b, 3), (c, 3), (c, 4)]. 
```

您可以看到第一个实例被删除，最后一个实例被删除。那是因为第一个匹配*绑定*了匿名变量，然后禁止后面的匹配，除了最后一个`(b,_)`

然后一个完整的程序将读取

```
locdiff([], _, []).
locdiff([H|T], [A|_], R) :-
    \+ \+ H = A,  % double negation allows matching without binding
    !, locdiff(T, [A|_], R).
locdiff([H|T], L2, [H|T2]) :-
    locdiff(T, L2, T2). 
```

现在结果就是你所需要的。

或者，您需要更精确地进行模式匹配，避免过度绑定

```
locdiff([], _, []).
locdiff([(A,_)|T], [(A,_)|_], R) :-
    !, locdiff(T, [(A,_)|_], R).
locdiff([H|T], L2, [H|T2]) :-
    locdiff(T, L2, T2).

?- locdiff([(a,1), (b,2), (b,3), (c,3), (c,4)], [(b,_)], L3).
L3 = [ (a, 1), (c, 3), (c, 4)]. 
```

请注意，某些库具有特定功能，例如SWI-Prolog 中的[exclude](http://www.swi-prolog.org/pldoc/doc_for?object=exclude/3) /3，但您仍然需要注意避免绑定：

```
eq([(E,_)|_], (E,_)).
locdiff(L, E, R) :-
  exclude(eq(E), L, R). 
```

# mysql - MYSQL 内连接和派生表

> ID：15066615
> 
> 赞同：0
> 
> 时间：2013-02-25T12:07:31.203
> 
> 标签：mysql

我有 2 个单独工作的查询，但不知道如何将它们组合成一个。

第一个计算一个工厂的可用性，如下所示：

```
SELECT *, 
(off_time - on_time)/(UNIX_TIMESTAMP('x') - UNIX_TIMESTAMP('y')) AS A
FROM(
 SELECT equipment_id,
  IF(time_on < 'x', UNIX_TIMESTAMP('x'), UNIX_TIMESTAMP(time_on)) AS on_time,
   (CASE  
    WHEN (time_off IS NULL) THEN UNIX_TIMESTAMP(NOW())
    WHEN (time_off > 'y') THEN UNIX_TIMESTAMP('y')
    ELSE UNIX_TIMESTAMP(time_off)
   END) AS off_time
  FROM r) AS T
GROUP BY equipment_id 
```

但我只想显示被标识为可用于服务的工厂，该工厂存储在单独的表中，所以我认为我必须使用 JOIN，例如：

```
SELECT r.equipment_id, r.time_on, r.time_off, i.in_service
FROM r
INNER JOIN i
ON r.equipment_id=i.equipment_id 
```

但是，我尝试将两者结合起来以失败告终。我是自学成才，对此非常陌生，因此感谢任何帮助、评论甚至只是对我的查询的一些批评。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:41:56.780

那么你可以像这样加入它。

```
SELECT
  *,
  ((off_time - on_time)/(UNIX_TIMESTAMP('x') - UNIX_TIMESTAMP('y'))) AS A
FROM (SELECT
    r.equipment_id,
    i.in_service,
    IF(time_on < 'x', UNIX_TIMESTAMP('x'), UNIX_TIMESTAMP(time_on)) AS on_time,
    (CASE WHEN (time_off IS NULL) THEN UNIX_TIMESTAMP(NOW()) WHEN (time_off > 'y') THEN UNIX_TIMESTAMP('y') ELSE UNIX_TIMESTAMP(time_off) END) AS off_time
      FROM r
    left join i
      ON r.equipment_id = i.equipment_id) AS T
GROUP BY equipment_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:42:42.150

如果我正确理解您的问题，以下是您要查找的 SQL：

```
SELECT *, 
(off_time - on_time)/(UNIX_TIMESTAMP('x') - UNIX_TIMESTAMP('y')) AS A, i.in_service
FROM(
 SELECT equipment_id,
  IF(time_on < 'x', UNIX_TIMESTAMP('x'), UNIX_TIMESTAMP(time_on)) AS on_time,
   (CASE  
    WHEN (time_off IS NULL) THEN UNIX_TIMESTAMP(NOW())
    WHEN (time_off > 'y') THEN UNIX_TIMESTAMP('y')
    ELSE UNIX_TIMESTAMP(time_off)
   END) AS off_time
  FROM r) AS T 
INNER JOIN i
ON T.equipment_id=i.equipment_id
GROUP BY T.equipment_id 
```

# html - 如何将 display:inline 插入外部 div

> ID：15066624
> 
> 赞同：0
> 
> 时间：2013-02-25T12:07:43.330
> 
> 标签：html, outer-join

我有 4 个模拟时钟小部件，我试图在我的网页上水平排列。有人告诉我，我必须“在每个时钟的外部 div 中插入 display:inline”。为了让它们水平排列，但我不知道该怎么做（抱歉，我的 html/css 知识只涉及更改颜色和字体）。如果您能帮助我解决这个问题，我将不胜感激。时钟代码的示例可在他们的网站上找到：http: [//localtimes.info/Europe/United_Kingdom/London/getwidget/119/](http://localtimes.info/Europe/United_Kingdom/London/getwidget/119/)（它将是 4 个不同的城市排队）提前谢谢你 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:25:05.057

还有另一种水平排列方式。

创建一个`div`，然后将时钟容器`divs`放入该 paran`div`中。然后添加`float:left`. 为时钟`divs`。它将水平对齐。如果你想

[http://jsfiddle.net/arjuncc/9Vj6Y/](http://jsfiddle.net/arjuncc/9Vj6Y/)

[http://jsfiddle.net/arjuncc/9Vj6Y/1/](http://jsfiddle.net/arjuncc/9Vj6Y/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:12:00.880

将样式设置为：

```
<div style="display:inline"> 
```

对于钟表...

# c# - 如果任何字段为 NULL，如何使用 LINQ to SQL 复制数据表

> ID：15066627
> 
> 赞同：0
> 
> 时间：2013-02-25T12:07:49.217
> 
> 标签：c#, exception, datetime, linq-to-sql

我有一个方法可以将数据表从 LINQ 返回到 SQL

IE

```
 public static DataTable LinqToDataTable<T>(IEnumerable<T> source)
   {
       DataTable output = new DataTable();
       try
       {
           PropertyInfo[] properties = typeof(T).GetProperties();
           foreach (var prop in properties)
           {
               output.Columns.Add(prop.Name, Nullable.GetUnderlyingType(
               prop.PropertyType) ?? prop.PropertyType);
           }
           foreach (var item in source)
           {
               DataRow row = output.NewRow();
               foreach (var prop in properties)
               {
                   row[prop.Name] = prop.GetValue(item, null) ?? DBNull.Value;
               }
               output.Rows.Add(row);
           }
       }
       catch (Exception ex)
       {
           MessageBox.Show(ex.Message);
       }
       return output;
   } 
```

我的问题是，如果任何 DateTime 字段为空，则此方法会引发异常

```
The null value cannot be assigned to a member with type System.DateTime which is a non-nullable value 
```

类型。

如何纠正错误。请任何人帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:12:25.747

将属性声明为 DateTime 怎么样？. 无论您在哪里拥有日期时间属性，都可以将类型更改为 DateTime？从日期时间。

您创建了一个 DateTime 类型的列，并尝试将 null 设置为该列。

# asp.net-mvc - 如何在未经身份验证的情况下根据 facebook url 获取 facebook 用户的公开帖子

> ID：15066629
> 
> 赞同：0
> 
> 时间：2013-02-25T12:07:53.253
> 
> 标签：asp.net-mvc, facebook, facebook-graph-api, facebook-oauth

我正在研究 asp.net mvc。我正在尝试通过 facebook url 搜索用户的公开 facebook 帖子。即我的网页中有一个文本框，该用户将输入他的 Facebook 网址，例如**[https://www.facebook.com/xxx.yyy](https://www.facebook.com/xxx.yyy)**并基于该网址我需要找到特定用户并需要显示该用户的所有公开帖子用户。我尝试过使用开放图形 api，例如，

**[https://graph.facebook.com/search?q=](https://graph.facebook.com/search?q=) {在 url 中找到的用户名}&type=user**

但它问我访问令牌。只有当用户登录 Facebook 时我才会获得 accesstoken，但我需要显示用户的公开帖子而不要求他进行身份验证。请指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:42:56.487

您不一定需要用户访问令牌来从[https://graph.facebook.com/search](https://graph.facebook.com/search)获取结果，您可以使用您的[应用访问令牌](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)来检索结果。您还可以使用相同的 App Access Token 通过调用 Facebook 的端点来查询用户的公开帖子，例如

```
https://graph.facebook.com/<user-id>/posts 
```

在哪里**是文本框中指定的值**

 **```
https://www.facebook.com/<user-id> 
```**

# iphone - 通过 App 连接 WiFi 网络

> ID：15066632
> 
> 赞同：11
> 
> 时间：2013-02-25T12:07:55.123
> 
> 标签：iphone, ios, cocoa, wifi

我实际上创建了一个应用程序，其中对内容的访问应该受到用户连接的 WiFi 网络的限制。

那么是否可以通过 App 自动登录到安全的 WiFi？我不想强迫用户手动操作。对于用户来说，它应该尽可能简单。

也许有一种方法可以为设备安装网络配置文件或类似的东西？

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:19:01.260

您可以使用 CaptiveNetwork 框架中的功能来执行此操作...

您还可以在 Apple Configurator 中创建网络配置文件，然后将它们导出到网站。然后您的用户需要做的就是单击指向该文件的链接，您可以通过电子邮件发送给他们或将其放在您的网站或任何地方......

[CaptiveNetwork 参考](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html)

# android - 如何在android中拖放多个不同样式的形状

> ID：15066644
> 
> 赞同：2
> 
> 时间：2013-02-25T12:08:27.593
> 
> 标签：android, drag-and-drop, drawable

我正在尝试在 android 中拖放形状。我在屏幕上使用带有 4 个单独部分的网格视图。我正在使用 android ic-launcher 获取图像。我可以将每个图像拖放到gridview的其他部分，但是我想在gridview的每个部分中有多个形状，想法是它们混合在一起，因此用户必须将它们拖放到所有圆圈中在一个部分中，在另一个部分中的正方形等等，我希望你到目前为止得到我的想法！我附上了我的 shape.xml、shape_droptarget.xml、main.xml 和我的 activity.java。我已经尝试了一些事情，但只是不知道如何去做。任何可以让我朝着正确方向前进的想法都会非常有帮助。谢谢

**形状.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle" >

    <stroke
        android:width="2dp"
        android:color="#FFFFFFFF" />

    <gradient
        android:angle="225"
        android:endColor="#DD2ECCFA"
        android:startColor="#DD000000" />

    <corners
        android:bottomLeftRadius="7dp"
        android:bottomRightRadius="7dp"
        android:topLeftRadius="7dp"
        android:topRightRadius="7dp" />

</shape> 
```

**shape.droptarget.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle" >

    <stroke
        android:width="2dp"
        android:color="#FFFF0000" />

    <gradient
        android:angle="225"
        android:endColor="#DD2ECCFA"
        android:startColor="#DD000000" />

    <corners
        android:bottomLeftRadius="7dp"
        android:bottomRightRadius="7dp"
        android:topLeftRadius="7dp"
        android:topRightRadius="7dp" />

</shape> 
```

**主要的.xml**

```
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:columnCount="2"
    android:columnWidth="300dp"
    android:orientation="vertical"
    android:rowCount="2"
    android:stretchMode="columnWidth" >

    <LinearLayout
        android:id="@+id/topleft"
        android:layout_width="160dp"
        android:layout_height="200dp"
        android:layout_column="0"
        android:layout_row="0"
        android:background="@drawable/shape" >

        <ImageView
            android:id="@+id/myimage1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_column="0"
            android:layout_row="0"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/topright"
        android:layout_width="160dp"
        android:layout_height="200dp"
        android:layout_column="1"
        android:layout_row="0"
        android:background="@drawable/shape" >

        <ImageView
            android:id="@+id/myimage2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_column="0"
            android:layout_row="0"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/bottomleft"
        android:layout_width="160dp"
        android:layout_height="200dp"
        android:layout_column="0"
        android:layout_row="1"
        android:background="@drawable/shape" >

        <ImageView
            android:id="@+id/myimage3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/bottomright"
        android:layout_width="160dp"
        android:layout_height="200dp"
        android:layout_column="1"
        android:layout_row="1"
        android:background="@drawable/shape" >

        <ImageView
            android:id="@+id/myimage4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_column="0"
            android:layout_row="0"
            android:src="@drawable/ic_launcher" />
    </LinearLayout>

</GridLayout> 
```

**DragActivity.java**

```
public class DragActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        findViewById(R.id.myimage1).setOnTouchListener(new MyTouchListener());
        findViewById(R.id.myimage2).setOnTouchListener(new MyTouchListener());
        findViewById(R.id.myimage3).setOnTouchListener(new MyTouchListener());
        findViewById(R.id.myimage4).setOnTouchListener(new MyTouchListener());
        findViewById(R.id.topleft).setOnDragListener(new MyDragListener());
        findViewById(R.id.topright).setOnDragListener(new MyDragListener());
        findViewById(R.id.bottomleft).setOnDragListener(new MyDragListener());
        findViewById(R.id.bottomright).setOnDragListener(new MyDragListener());
    }

    private final class MyTouchListener implements OnTouchListener {
        public boolean onTouch(View view, MotionEvent motionEvent) {
          if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
            ClipData data = ClipData.newPlainText("", "");
            DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
            view.startDrag(data, shadowBuilder, view, 0);
            view.setVisibility(View.INVISIBLE);
            return true;
          } else {
            return false;
          }
        }
      }

    class MyDragListener implements OnDragListener {
        Drawable enterShape = getResources().getDrawable(R.drawable.shape_droptarget);
        Drawable normalShape = getResources().getDrawable(R.drawable.shape);

        @Override
        public boolean onDrag(View v, DragEvent event) {
          int action = event.getAction();
          switch (event.getAction()) {
          case DragEvent.ACTION_DRAG_STARTED:
            // Do nothing
            break;
          case DragEvent.ACTION_DRAG_ENTERED:
            v.setBackgroundDrawable(enterShape);
            break;
          case DragEvent.ACTION_DRAG_EXITED:
            v.setBackgroundDrawable(normalShape);
            break;
          case DragEvent.ACTION_DROP:
            // Dropped, reassign View to ViewGroup
            View view = (View) event.getLocalState();
            ViewGroup owner = (ViewGroup) view.getParent();
            owner.removeView(view);
            LinearLayout container = (LinearLayout) v;
            container.addView(view);
            view.setVisibility(View.VISIBLE);
            break;
          case DragEvent.ACTION_DRAG_ENDED:
            v.setBackgroundDrawable(normalShape);
          default:
            break;
          }
          return true;
        }
      }

} 
```

# android - Facebook 页面更新

> ID：15066648
> 
> 赞同：1
> 
> 时间：2013-02-25T12:08:42.103
> 
> 标签：android, facebook

我在 Android 中使用 facebook sdk。我可以使用以下方法获取好友列表信息：

```
 Bundle params = new Bundle();
    params.putString("fields", "name, picture,location");
    Utility.mAsyncRunner.request("me/friends", params,new FriendsRequestListener()); 
```

如何获取状态、图像、照片、视频等页面帖子？

# magento - magento customer_save_after 模型/观察者未调用，捕捉客户 -> 编辑 -> 保存功能

> ID：15066649
> 
> 赞同：1
> 
> 时间：2013-02-25T12:08:43.647
> 
> 标签：magento

我是 magento 的新手，并试图为它写一点扩展（magento 1.7）。

我在客户->编辑中创建了选项卡，它打印多选，没关系，问题是我无法进入观察者文件以在保存之前捕获多选选项并将它们保存到数据库中的自定义表中。

有一些代码片段：app/code/local/Gone/Brands/etc/config.xml

```
 <adminhtml>
    <layout>
        <updates>
            <customertab>
                <file>customertab.xml</file>
            </customertab>
        </updates>
    </layout>
    <events>
        <customer_save_after>
            <observers>
                <brands_hide_manufacturers>
                    <type>model</type>
                    <class>Gone_Brands_Model_Observer</class>
                    <method>saveHideManufacturers</method>
                </brands_hide_manufacturers>
            </observers>
        </customer_save_after>
    </events>
</adminhtml> 
```

app/code/local/Gone/Brands/Model/Observer.php

```
<?php
class Gone_Brands_Model_Observer
{
 public function _construct()
 {
    echo "ssssssssssssssssssssssssssss";
    echo "<script>alert('aaa');</script>";
 }

 public function saveHideManufacturers() {
    echo "ssssssssssssssssssssssssssss";
    echo "<script>alert('bbbb');</script>";
 }
} 
```

Maye还有其他解决方案如何从客户->编辑->我创建的带有自定义字段的选项卡中捕获表单？

谢谢你。

```
================================================================================== 
```

最后，为此花了四个小时。也许这对其他人有帮助。

配置文件

```
customer_save_after -> change to -> adminhtml_customer_save_after 
```

现在工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:06:33.100

最后，为此花了四个小时。也许这对其他人有帮助。

配置文件

```
customer_save_after -> change to -> adminhtml_customer_save_after 
```

现在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:23:22.463

在 magento 中，您不会链接到具有完整类名的类。您必须使用框架：

代替 ：

```
<class>Gone_Brands_Model_Observer</class> 
```

经过 ：

```
<class>gonebrands/observer</class> 
```

“gonebrands”（或其他）是指在 config.xml 中定义模型层的 XML 节点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:37:31.360

事件定义必须在“全局”标签内。此外，您的观察者类中不需要 _construct 方法

```
<global>
    <events>
        <customer_save_after>
            <observers>
                <brands_hide_manufacturers>
                   <type>singleton</type>
                   <class>Gone_Brands_Model_Observer</class>
                   <method>saveHideManufacturers</method>
                </brands_hide_manufacturers>
            </observers>
        </customer_save_after>
    </events>
</global> 
```

# ios - 如何重新加载 UIAlertView 消息

> ID：15066657
> 
> 赞同：0
> 
> 时间：2013-02-25T12:09:24.487
> 
> 标签：ios, objective-c, uialertview

[我从github](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)拿了这个项目。

它是自定义的 AlertView。我明白它是如何工作的。为我的项目修改它，像这样

![在此处输入图像描述](../Images/4907bcb652c991ded1aed8cad37e96ff.png)

Course1 - 一些产品的名称，'1' - 是它的数量。当我输入加/减金额时，金额会增加/减少。但它只适用于我的变量（我在这个 AlertView 上加载它，当我显示它时，它是 1）。如何通过更改 var（数量）重新加载此警报视图的消息。我无法理解。这是我的代码。

在我的课堂上，我通过此代码调用警报视图

```
BlockAlertView *alert = [BlockAlertView alertWithTitle: title message:ac.acCount];

[alert setCancelButtonWithTitle:@"-" block:nil];
[alert setDestructiveButtonWithTitle:@"+" block:^{
            int u = [ac.acCount intValue];
            u++;
            ac.acCount = [NSString stringWithFormat:@"%d", u];
            NSLog(@"%d", u);
        }];
        [alert addButtonWithTitle:@"Ok" block:^{
            NSMutableArray *container = [[NSMutableArray alloc] init];
            [container addObject:title];
            [container addObject:price];
            [container addObject:bId];
            [container addObject:ac.acCount];
            [container addObject:depid];
            [[NSNotificationCenter defaultCenter] postNotificationName:@"MyNotification" object:container];
        }];
        [alert show]; 
```

Show 方法只是使用来自 alertWithTitle: title message:ac.acCount 的参数绘制警报视图。这是代码

```
+ (BlockAlertView *)alertWithTitle:(NSString *)title message:(NSString *)message
 {
    return [[[BlockAlertView alloc] initWithTitle:title message:message] autorelease];
 } 
```

这是

```
- (id)initWithTitle:(NSString *)title message:(NSString *)message 
{
NSLog(@"title - %@ message - %@", title, message);

if ((self = [super init]))
{
    UIWindow *parentView = [BlockBackground sharedInstance];
    CGRect frame = parentView.bounds;
    frame.origin.x = floorf((frame.size.width - background.size.width) * 0.5);
    frame.size.width = background.size.width;

    _view = [[UIView alloc] initWithFrame:frame];
    _blocks = [[NSMutableArray alloc] init];
    _height = kAlertViewBorder + 6;

    if (title)
    {
        CGSize size = [title sizeWithFont:titleFont
                        constrainedToSize:CGSizeMake(frame.size.width-kAlertViewBorder*2, 1000)
                            lineBreakMode:UILineBreakModeWordWrap];

        UILabel *labelView = [[UILabel alloc] initWithFrame:CGRectMake(kAlertViewBorder, _height, frame.size.width-kAlertViewBorder*2, size.height)];
        labelView.font = titleFont;
        labelView.numberOfLines = 0;
        labelView.lineBreakMode = UILineBreakModeWordWrap;
        labelView.textColor = kAlertViewTitleTextColor;
        labelView.backgroundColor = [UIColor clearColor];
        labelView.textAlignment = UITextAlignmentCenter;
        labelView.shadowColor = kAlertViewTitleShadowColor;
        labelView.shadowOffset = kAlertViewTitleShadowOffset;
        labelView.text = title;
        [_view addSubview:labelView];
        [labelView release];

        _height += size.height + kAlertViewBorder;
    }

    if (message)
    {
        CGSize size = [message sizeWithFont:messageFont
                          constrainedToSize:CGSizeMake(frame.size.width-kAlertViewBorder*2, 1000)
                              lineBreakMode:UILineBreakModeWordWrap];

        UILabel *labelView = [[UILabel alloc] initWithFrame:CGRectMake(kAlertViewBorder, _height, frame.size.width-kAlertViewBorder*2, size.height)];
        labelView.font = messageFont;
        labelView.numberOfLines = 0;
        labelView.lineBreakMode = UILineBreakModeWordWrap;
        labelView.textColor = kAlertViewMessageTextColor;
        labelView.backgroundColor = [UIColor clearColor];
        labelView.textAlignment = UITextAlignmentCenter;
        labelView.shadowColor = kAlertViewMessageShadowColor;
        labelView.shadowOffset = kAlertViewMessageShadowOffset;
        labelView.text = message;
        [_view addSubview:labelView];
        [labelView release];

        _height += size.height + kAlertViewBorder;
    }

    _vignetteBackground = NO;
}

return self; 
```

}

我试着用这样的东西

```
-(void)reloadAlertView: (NSString *) title: (NSString *) message{
[self initWithTitle:title message:message];
} 
```

并从我的课堂上调用它，在那里我显示警报视图。

```
[alert reloadAlertView: title: newMessage]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T10:21:10.630

您需要在您的 CustomAlertView.h 中引用一个新标签

```
@property (nonatomic, strong) IBOutlet UILabel *mylab; 
```

那么就可以通过CustomAlertView.h类的对象来获取这个标签的属性

```
BlockAlertView *alert ...;
alert.mylab.text = @"hello"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:41:04.417

1.  解决方案（简单，不需要破解`BlockAlertView.m`）只要`+`单击按钮，警报就会消失，然后再次出现。

**视图控制器.m**

```
@implementation ViewController {

        BlockAlertView *alert ;
        NSInteger value;
    }

    -(void) viewDidLoad {
      value = 0;

        [self reloadAlert];

    }

    -(void) reloadAlert {
        value += 1;

        __block ViewController* _self = self;
        alert = [[BlockAlertView alloc] initWithTitle:@"Course1" message:[[[NSNumber alloc] initWithInteger:value ] stringValue]];

        [alert setDestructiveButtonWithTitle:@"PLUS" block:^{

            [_self reloadAlert];

        }];
        [alert show];

    }
   } 
```

1.  解决方案，如果您想保留`AlertView`剩余的，而不弹出。

一种。修改`BlockAlertView.h`为带`messageLabelView` 外访问 from `ViewController`，以便我们稍后可以重绘消息。

**块警报视图.h**

```
@interface BlockAlertView  { 
...
}
@property (nonatomic, retain) UILabel *messageLabelView; 
```

`UIView *_view` 如果愿意，您也可以`@protected`取而代之`@property`。在这种情况下，`messageLabelView`可以通过 _view 的子视图访问

湾。修改`BlockAlertView.m` `dismissWithClickedButtonIndex:animated:`以禁用在签名按钮`removeView`时调用函数-硬编码为.`buttonIndex == PLUS``buttonIndex``0`

可能有更好的选择来停止 PLUS 按钮的块 obj 内的执行线程，但我不知道该怎么做:)

C。修改以在消息标签的呈现过程中`BlockAlert.m` `initWithTitle:message:`添加对`messageLabelView`into的引用。`labelView`

**块警报视图.m**

```
@synthesize messageLabelView;

     - (id)initWithTitle:(NSString *)title message:(NSString *)message 
    {
     ...
    // code to initialize messageLabelView
     if (message)
            {

               .... 
                // code to render labelView for message. add reference to messageLabelView
                 messageLabelView = labelView;
                  // [labelView release];

            }
    }

    - (void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated 
    {
        if (buttonIndex >= 0 && buttonIndex < [_blocks count])
        {
            id obj = [[_blocks objectAtIndex: buttonIndex] objectAtIndex:0];
            if (![obj isEqual:[NSNull null]])
            {
                ((void (^)())obj)();
            }
        }

    // there may be a better option to stop the execution thread inside the block obj above
        if(buttonIndex == 0) {// or whatever index of Plus Button, dont removeView
            return;
        }

    // code to removeView below, keep as usual
        if (animated)
        {
           ...
        }
        else
        {
        ....
        }
    }
} 
```

d。更改 reloadAlert 在`ViewController.m`

**视图控制器.m**

```
-(void) reloadAlert {

    value += 1;

    alert.messageLabelView.text = [[[NSNumber alloc] initWithInteger:value ] stringValue];
    [alert.messageLabelView setNeedsDisplay];
} 
```

# sql - 按索引列排序

> ID：15066666
> 
> 赞同：0
> 
> 时间：2013-02-25T12:09:53.760
> 
> 标签：sql, sql-server, performance, indexing, sql-order-by

我不清楚以下几点：
假设我有一个表`A`，并且我在 column 上创建了一个索引`X`。
如果我确实根据将排序结果的列进行选择，对吗？
但是如果由于某种原因我做了一个选择，然后是一个`ORDER BY X`（例如，我不知道该列已被索引），SQL 服务器会执行顺序访问的排序还是会使用索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T12:15:04.393

如果您没有`ORDER BY`在`SELECT`查询中指定 an ，那么就**没有任何类型的保证/没有确定性**排序。

数据将被返回 - 但不能保证任何顺序（或者下次查询时它会以相同的顺序返回）

因此，如果您**需要一个订单**- 那么您**必须**`ORDER BY`在您的- 中指定一个`SELECT`- 就这么简单。

是的——如果有一个索引，并且有意义的话——那么 SQL Server 查询优化器确实会使用那个索引。但是涉及到很多*ifs*和*buts* - 它可能 - 或可能不 - 使用索引 - 这完全取决于优化器来决定（这取决于很多因素 - 太多无法在此处列出）。

（*这特别适用于我熟悉的 SQL Server - 我不知道其他 RDBMS 如何处理这种情况*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:49:22.170

如果您的 SELECT 中没有 ORDER BY，则不存在任何类型的确定性排序。

索引加排序是一个相当复杂的故事。它取决于 RDBMS 、 RDBMS 版本和表中的数据。

```
1 000 000 rows in table

comment table
i - int, unique number from sequence/auto_increment etc. 
created - long, indexed
updated - long, indexed
title - varchar(50) - indexed
body - text 
```

选择：

```
SELECT id FROM comments; 
```

Oracle、MySQL、Postgresql 完全随机返回记录。你可以有秩序的错觉。然而，经过一些行政工作真空，表分析，优化表；一切都会改变

```
SELECT * FROM comments ORDER BY created DESC; 
```

Postgresql 和 Oracle 将执行全表扫描。

```
SELECT created FROM comments ORDER BY created; 
```

Oracle 将执行全索引扫描（仅索引数据），但 Postgresql 将执行全表扫描。

```
SELECT * FROM comments WHERE created>sysday-7 ORDER BY created DESC; 
```

Postgresql 和 Oracle 将执行索引范围扫描并从表中读取数据。

```
SELECT created FROM comments WHERE created>sysday-7  ORDER BY created; 
```

Oracle 将执行索引范围扫描（不从表中读取），但 Postgresql 将执行索引范围扫描并从表中读取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:25:21.167

RDMS 是否使用索引取决于 SQL 查询中的谓词、表上还有哪些其他索引以及优化器选择执行查询的方式。

因此，如果您有 SELECT A, X FROM T WHERE A = some_value ORDER BY X

并且 A 上有一个索引，然后 RDMS 可能（强调 MAY）选择通过该索引而不是 T 上的索引来访问数据。这意味着 SELECT 之后将进行排序。

与大多数数据库问题一样，答案是**“视情况而定”**

# wpf - 从基类继承用户控制

> ID：15066668
> 
> 赞同：0
> 
> 时间：2013-02-25T12:10:01.513
> 
> 标签：wpf

我做了很多搜索并找到了很多答案，但由于某种原因它对我不起作用。我在 WPF 中有一个 VB 应用程序。我想要一些用于用户控件的通用代码。

所以我做了一个这样的基类：

```
Public Class cU
    Inherits UserControl
    Public Value As Double
End Class 
```

和一个用户控件，Xaml 像这样开始：

```
<UserControl x:Class="UserControl3" 
```

因此，据我所知，我所要做的就是将其更改为：

```
<local:cU x:Class="UserControl3" 
```

但是，虽然 Xaml 窗口中没有显示任何错误，但我在错误列表中得到了错误：“local”是一个未声明的前缀。第 1 行。位置 2。XML 无效

（顺便说一句，当我在winrt中这样做时效果很好）

我尝试将其更改为 Controls 的本地，并将 cU 放在名为 local 的命名空间中，但它没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:34:24.810

在 XAML 中为窗口标记或控件标记添加命名空间（取决于您使用的任何一个）。

```
<Window x:Class="YourNamespace.YourClass"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:YourNamespace"> 
```

然后你可以使用`<local:UserControl3 />`标签

你的`YourNamespace`情况是`WpfApplication1`

# javascript - 在 IF 中优化 OR

> ID：15066671
> 
> 赞同：2
> 
> 时间：2013-02-25T12:10:04.653
> 
> 标签：javascript, jquery

我有这样的代码：

```
if (action == 'John' || action == 'John Beckham' || action == 'Henry John'){
     alert('true!');
} 
```

如何最小化此代码？

应该在IE7中工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T12:11:38.710

如果“John”总是出现，最简单的就是：

```
if (action.toLowerCase().indexOf("john") !== -1) {
    // Do something
} 
```

...但是由于您的问题已经改变了您检查`action`一次的值，所以我不愿假设。另请注意，它将匹配“xxxjohnxxx”，这可能不是您想要的。

原始建议（针对您编辑的新`action`值进行了更新）：

* * *

有很多方法，所有显示都使用区分大小写**，**因为您在评论中提到了这一点：

`String#indexOf`：

```
if ("|john|john beckham|john henry|giggs john|scholes john|john messi|".indexOf("|" + action.toLowerCase() + "|") !== -1) {
    // Do something
} 
```

* * *

常用表达：

```
if (/^(?:John|John Beckham|John Henry|Giggs John|Scholes John|John Messi)$/i.test(action)) {
    // Do something
} 
```

因为您只是使用真/假结果，所以我使用[`test`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.6.3)的是只返回真/假，而不是[`exec`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.6.2)返回匹配结果。在这种情况下两者都可以工作，但浏览器可能能够稍微优化`test`（但是，如果您的目标是最快的结果或最少的内存使用，那么正则表达式不太可能是最佳解决方案）。

* * *

或`switch`：

```
switch (action.toLowerCase()) {
    case "john":
    case "john beckham":
    case "john henry":
    case "giggs john":
    case "scholes john":
    case "john messi":
        // Do something
} 
```

* * *

或对象查找：

```
var actions = {
    "john":         true,
    "john beckham": true,
    "john henry":   true,
    "giggs john":   true,
    "scholes john": true,
    "john messi":   true
};

if (actions[action.toLowerCase()]) {
    // do something
} 
```

*（这还有一个好处是让你说*要做*什么——例如，`true`可以用你调用的函数替换。）*

* * *

或者（在启用 ES5 的环境或使用 ES5 垫片）`Array#indexOf`：

```
if (["john", "john beckham", "john henry", "giggs john", "scholes john", "john messi"].indexOf(action.toLowerCase()) !== -1 {
    // Do something
} 
```

或者由于您使用 jQuery，您可以使用以下方法避免旧浏览器上的 shim [`inArray`](http://api.jquery.com/jQuery.inArray/)：

```
if ($.inArray(action.toLowerCase(), ["john", "john beckham", "john henry", "giggs john", "scholes john", "john messi"]) !== -1) {
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T12:13:06.210

如果使用 jquery，那么你可以这样做：

```
var arr = ['a','b','c','d','e','f','g'];
if( $.inArray(action, arr) !== -1 ) {
  alert("true");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T12:11:48.417

试试这个，它使用[indexOf](http://www.w3schools.com/jsref/jsref_indexof_array.asp)：

```
if (['a', 'b', 'c', 'd', 'e'].indexOf(action) > -1) {
  alert(true);
} 
```

更新：如果您想支持 IE7 及以下版本，请使用[此问题的答案](https://stackoverflow.com/questions/6829101/old-ie-javascript-doesnt-support-indexof)

如果你使用 jQuery，你可以[`$.inArray`](http://api.jquery.com/jQuery.inArray/)这样使用：

```
if ($.inArray(action, ['a','b','c','d') > -1) {
  alert(true);
} 
```

**更新**

您还可以将正则表达式与[`test`](http://www.w3schools.com/jsref/jsref_regexp_test.asp)（该组使正则表达式不匹配`"John Langhammerer"`/带有额外字符的操作与要匹配的字符匹配）：

```
if ((/^(John Langhammer|Piet Krauthammer|Some Guy)$/i).test(action)) {
  alert(true);
} 
```

**更新**：`/i`使正则表达式不区分大小写。

*下面是一个适用于单字符操作的解决方案：*

您还可以使用IE7 支持的[String.indexOf](http://www.w3schools.com/jsref/jsref_indexof.asp)（如果您的操作都是一个字符）：

```
if ('abcde'.indexOf(action) > -1) {
  alert(true);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T12:12:34.853

如下创建一个数组。

```
var newAry = array('a','b','c'); 
```

现在只需检查如下。

```
$(function()
{
    var newAry = Array('a','b','c');
    if($.inArray(action,newAry)){ alert(action); }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T12:18:47.727

跨浏览器解决方案：

```
if ( action in {'John':1, 'John Beckham':1, 'John Henry':1, 'Giggs John':1, 'Scholes John':1, 'John Messi':1 } ){
     alert('true!');
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T12:25:47.153

此外`indexOf`，您还可以在 Javascript 中使用条件运算符。

```
names = ['John' , 
         'John Beckham', 
         'John Henry' , 
         'Giggs John' , 
         'Scholes John', 
         'John Messi'
];
names.indexOf(action) != -1? alert('True') : alert ('False'); 
```

而且你想做的不仅仅是简单的陈述，比如：

```
 names.indexOf(action) != -1? doSomethingOnTrue() : doSomethingOnFalse(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T12:12:01.787

```
if('abcdefg'.indexOf(action) > -1){
    // action is one of 'abcdef'
} 
```

# java - 在使用 OpenCMIS 维护版本历史的同时创建和更新文档

> ID：15066672
> 
> 赞同：0
> 
> 时间：2013-02-25T12:10:15.303
> 
> 标签：java, alfresco, opencmis

有人可以发布创建新文档所需的 OpenCMIS 代码，然后通过更新其内容流来更新该文档吗？我不想丢失原始文档——我想在更新新文档时保留版本历史记录。我正在使用 Alfresco，但这应该适用于任何 CMIS 存储库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T17:32:45.583

在 Alfresco 中，要创建新版本，只需获取结帐后返回给您的私有工作副本，更新 PWC 的内容流，然后将其重新签入。Alfresco 将为您管理版本。这是一个例子。

```
Folder folder = (Folder) getSession().getObjectByPath("/cmis-demo");

String timeStamp = new Long(System.currentTimeMillis()).toString();
String filename = "cmis-demo-doc (" + timeStamp + ")";

// Create a doc
Map <String, Object> properties = new HashMap<String, Object>();
properties.put(PropertyIds.OBJECT_TYPE_ID, "cmis:document");
properties.put(PropertyIds.NAME, filename);
String docText = "This is a sample document";
byte[] content = docText.getBytes();
InputStream stream = new ByteArrayInputStream(content);
ContentStream contentStream = getSession().getObjectFactory().createContentStream(filename, Long.valueOf(content.length), "text/plain", stream);

Document doc = folder.createDocument(
           properties,
           contentStream,
           VersioningState.MAJOR);

System.out.println("Created: " + doc.getId());
System.out.println("Content Length: " + doc.getContentStreamLength());
System.out.println("Version label:" + doc.getVersionLabel());

// Now update it with a new version
if (doc.getAllowableActions().getAllowableActions().contains(org.apache.chemistry.opencmis.commons.enums.Action.CAN_CHECK_OUT)) {
   doc.refresh();
   String testName = doc.getContentStream().getFileName();
   ObjectId idOfCheckedOutDocument = doc.checkOut();
   Document pwc = (Document) session.getObject(idOfCheckedOutDocument);
   docText = "This is a sample document with an UPDATE";
   content = docText.getBytes();
   stream = new ByteArrayInputStream(content);         
   contentStream = getSession().getObjectFactory().createContentStream(filename, Long.valueOf(content.length), "text/plain", stream);          
   ObjectId objectId = pwc.checkIn(false, null, contentStream, "just a minor change");
   doc = (Document) session.getObject(objectId);
   System.out.println("Version label is now:" + doc.getVersionLabel());
} 
```

运行时，它会输出以下内容：

```
Created: workspace://SpacesStore/d6f3fca2-bf9c-4a0e-8141-088d07d45359;1.0
Content Length: 25
Version label:1.0
Version label is now:1.1
Done 
```

# ios - SmartSVN：如何从主干分支工作副本

> ID：15066673
> 
> 赞同：4
> 
> 时间：2013-02-25T12:10:17.337
> 
> 标签：ios, macos, svn, smartsvn

我在我的 Mac OS X 10.8 上使用 SmartSVN 6.6。我需要从 iOS 项目主干中的工作副本创建新分支。任何人都可以解释所需的步骤吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:47:10.367

Subversion 中的一个分支只不过是一个副本。

```
svn cp URL_TO_TRUNK URL_TO_BRANCH
svn switch . URL_TO_BRANCH 
```

另请参阅以下链接：

*   [http://www.svnforum.org/threads/30924-howto-branch-working-copy-changes-without-committing](http://www.svnforum.org/threads/30924-howto-branch-working-copy-changes-without-committing)
*   [http://svnbook.red-bean.com/en/1.7/svn.branchmerge.using.html#svn.branchmerge.using.create](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.using.html#svn.branchmerge.using.create)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-21T11:44:14.003

还有一种快速方法，我使用 SmartSVN 学习过，您可以在不使用终端的情况下分支代码。

第 1 步：在您的分支文件夹中创建一个文件夹，并提供您想提供的任何名称。

第 2 步：通过选择文件夹并单击添加按钮将文件夹添加到存储库。

第 3 步：右键单击您的主干文件夹中的项目，然后选择复制选项。

第 4 步：选择您刚刚创建的目标文件夹。

第5步：选择新分支的选项，你就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-23T09:02:45.940

打开终端

1]在桌面上创建空文件夹

2] cd 桌面文件夹路径 svn checkout 服务器路径

3] svn结帐服务器路径

在您的空白桌面文件夹上创建了一个文件夹，例如您的文件夹名称是 AR，然后自动创建了一个子文件夹 ARTEMP。

4] cd 子文件夹名/

5]将您的代码复制到您的子文件夹中。

6] svn status 子文件夹显示EX。温度

7] svn 添加代码文件夹名称（TEMP）

8] svn commit -m "推送代码"

提交事务...提交修订 1。

就是这样。

# installation - 如何在不安装的情况下查询 InstallShield 安装程序 exe 以获取产品代码？

> ID：15066676
> 
> 赞同：0
> 
> 时间：2013-02-25T12:10:32.250
> 
> 标签：installation, windows-installer, installshield

我的应用程序是基于 Install Shield 的安装程序。我的要求是使用 /s 命令行参数在构建机器中静默安装此安装程序。

为此，我们必须生成 setup.iss 文件，该文件将用于静默安装安装程序。为了自动化生成 .iss 文件的过程，我们需要在文件中填充安装程序的产品代码。

无论如何，只要通过查询就可以获得 Install Shiled installer.exe 的产品代码而不安装它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:33:54.603

由于您使用的是 InstallScript MSI 项目，您的问题过于复杂。这种项目类型的主要“功能”是丰富的 UI。但是，如果您的应用程序打算以静默方式安装在构建服务器上，那么谁在乎 UI 的外观呢？

将您的安装程序重写为基本 MSI 并使用标准命令 msiexec /i foo.msi /qn REBOOT=R，您无需为安装和卸载创建响应文件而进行所有这些操作。

我在一家使用 SCCM 将安装程序部署到 300,000 台机器的公司工作，而这些响应文件驱动的安装程序的故障率总是要高得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:04:23.697

如果您执行管理安装 ( [`setup.exe /a ...`](https://stackoverflow.com/a/8694205/89999))，将提取 .msi 文件。[从那里您可以使用Windows 安装程序 API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372860.aspx)查询 .msi 文件以获取其产品代码（请参阅安装程序数据库部分）。

# java - JTextField 中的 getText() 问题

> ID：15066678
> 
> 赞同：1
> 
> 时间：2013-02-25T12:10:44.010
> 
> 标签：java, swing, jframe, scope, jtextfield

我在`.getText()`尝试从`JTextField`. 我一直在寻找解决方案，但找不到。有没有人可以看到我做错了什么？

我想做的是一个弹跳球，可以改变弹性、重力和初始速度等参数。

尝试编译时出现以下消息：

> BBPanel.java 中的错误（第 88 行）重力输入无法解析

谢谢！

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

/////////////////////////////////////////////////////////////////// BBPanel
class BBPanel extends JPanel {
BallInBox n_bb;   // The bouncing ball panel

//========================================================== constructor
/** Creates a panel with the controls and bouncing ball display. */
BBPanel() {
//... Create components
    n_bb = new BallInBox();        
    JButton startButton = new JButton("Start");        
    JButton stopButton  = new JButton("Stop");
    JButton resetButton = new JButton("Reset");
    JButton gveButton = new JButton("GetData");

    JLabel gravityLbl = new JLabel (" set gravity " );
    JLabel velocity_yLbl = new JLabel (" set initial y-dir speed " );
    JLabel elasticityLbl = new JLabel (" set elasticity [0-100%]" );

    JTextField gravity_input = new JTextField(20);
    JTextField velocity_y_input = new JTextField(20);
    JTextField elasticity_input = new JTextField(20);

    //... Add Listeners
     startButton.addActionListener(new StartAction() );
     stopButton.addActionListener(new StopAction()  );
     resetButton.addActionListener(new ResetAction() );
     gveButton.addActionListener(new DataAction()  );

    //... Layout inner panel with three buttons horizontally
     JPanel buttonPanel = new JPanel();
     buttonPanel.setLayout(new FlowLayout());
     buttonPanel.add(startButton);
     buttonPanel.add(stopButton);
     buttonPanel.add(resetButton);

//
JPanel variablePanel = new JPanel();
variablePanel.setLayout(new GridLayout(0,2));

variablePanel.add(gravityLbl);
variablePanel.add(gravity_input);
variablePanel.add(velocity_yLbl);
variablePanel.add(velocity_y_input);
variablePanel.add(elasticityLbl);
variablePanel.add(elasticity_input);
variablePanel.add(gveButton);

    //... Layout outer panel with button panel above bouncing ball
    this.setLayout(new BorderLayout());
    this.add(buttonPanel  , BorderLayout.NORTH);
    this.add(n_bb         , BorderLayout.CENTER);
    this.add(variablePanel, BorderLayout.EAST);

}//end constructor

////////////////////////////////////// inner listener class StartAction
class StartAction implements ActionListener {
    public void actionPerformed(ActionEvent e) {
            n_bb.setAnimation(true);
    }
}

//////////////////////////////////////// inner listener class StopAction
class StopAction implements ActionListener {
    public void actionPerformed(ActionEvent e) {
            n_bb.setAnimation(false);
    }
}
///////////////////////////////////////// inner listener class ResetAction
class ResetAction implements ActionListener {
    public void actionPerformed(ActionEvent e) {
    n_bb.resetAnimation(true);
    }
  }
////////////////////////////////////////// inner listener class GravityAction
 class DataAction implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        String gravityIn = gravity_input.getText();
        //System.out.println(gravityIn);
        n_bb.setData(true);
    }
}
}//endclass BBPanel 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:14:19.003

该变量`gravity_input`仅在 的构造函数范围内本地定义`BBPanel`。如果你想让它对你的类可见，你需要让它成为一个类成员变量`DataAction`。

```
public class BBPanel extends JPanel {
   private JTextField gravity_input; // to be initialized...
   ... 
```

旁注：Java 使用驼峰式大小写，这会使`gravity_input` `gravityInput`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:14:25.720

您的问题是范围之一。Gravity_input 在构造函数或方法中声明。要在这些块之外可见，它应该在类中声明，类似于声明 n_bb 字段的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:15:34.923

您的变量`gravity_input`应声明为实例变量（在构造函数之外），以便以后访问。

您定义它的方式，**名称**（不是文本字段）在构造函数代码终止（到达右大括号）后立即`gravity_input` *消失*`}`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:15:44.273

将以下参数传递给 的构造函数`DataAction`：

```
class DataAction implements ActionListener {
    final JTextField textField;
    final BallInBox bb;
    public DataAction(final JTextField textField, final BallInBox bb) {
        this.textField = textField;
        this.bb = bb;
    }
    public void actionPerformed(ActionEvent e) {
        String gravityIn = textField.getText();
        //System.out.println(gravityIn);
        bb.setData(true);
    }
} 
```

并像这样使用它：

```
gveButton.addActionListener(new DataAction(gravity_input, n_bb)); 
```

然后以类似的方式重构您的其他操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T12:15:49.207

问题是，您的班级`DataAction`不知道您的`gravity_input`文本字段。

文本字段`gravity_input`仅对类可见`BBPanel`。要使其对类可见`DataAction`，您必须将文本字段传递给该类，如下所示：

```
class DataAction implements ActionListener {

    private JTextField gravity_input;

    public DataAction(JTextField txtField) {
        gravity_input = txtField;
    }

    public void actionPerformed(ActionEvent e) {
        String gravityIn = gravity_input.getText();
        //System.out.println(gravityIn);
        n_bb.setData(true);
    }
} 
```

并将您的 BBPanel 构造函数更改为：

```
BBPanel() {
    //... omitted
    gveButton.addActionListener(new DataAction(gravity_input));
    //... omitted
} 
```

# html - 如何摆脱框架和框架集之间的单个边框？

> ID：15066689
> 
> 赞同：0
> 
> 时间：2013-02-25T12:11:34.540
> 
> 标签：html, iframe, frame, frameset, frameset-iframe

我在顶部框架中有一个带有工具栏的页面。我想要除工具栏和它所接壤的两个框架之间的所有其他框架之间的边框。

```
<html><head><title>Test</title></head>
<frame src="toolbar.html" name="toolbar">
<frameset rows="44%,*">
<frameset cols="50%,50%">
  <frame src="frame1.html" name="frame1">
  <frame src="frame2.html" name="frame2">
</frameset>
<frameset rows="28%,28%" cols="50%,50%">
  <frame src="frame3.html" name="frame3">
  <frame src="frame4.html" name="frame4">
  <frame src="frame5.html" name="frame5">
  <frame src="frame6.html" name="frame6">
</frameset></frameset></html> 
```

那么，我将如何删除“工具栏”和“frame1”/“frame2”之间的边界，同时保留所有其他边界（包括 frame1 和 frame2 之间的边界）？如果可以的话，我愿意使用 iframe，但我需要查看代码示例，因为我从未使用过它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:18:18.450

我认为您无法充分控制框架边界来做您想做的事。最好是根本不使用框架集，但如果你真的想要，你最好的希望是隐藏所有框架边框，并在每个框架中的 html 边缘周围有 1px 的暗边距或填充以代替框架边框，除非在您不希望边框出现的地方。

# c# - 将项目添加到列表 string[]

> ID：15066692
> 
> 赞同：1
> 
> 时间：2013-02-25T12:11:41.203
> 
> 标签：c#, list, struct

我正在尝试使用此结构将从 DataTable 中获得的几行添加到我的列表中：

```
protected struct roleProperties
{
    public string roleName { get; set; }
    public string[] functionTitle { get; set; }
} 
```

如您所见，我想要方法字符串中的更多`Title`字符串

我一直在尝试这样做：

```
public void getRoleFuncs(int roleId)
{
    List<roleProperties> roles = new List<roleProperties>();
    int i = 1;

    SqlParameter ro_id = new SqlParameter("@ro_id", roleId);
    string q = "SELECT ro_name, fu_title FROM roles INNER JOIN rolefunctions ON roles.ro_id = rolefunctions.fk_role_id INNER JOIN functions ON rolefunctions.fk_func_id = functions.fu_id WHERE ro_id = @ro_id";
    SqlDataReader r = gm.returnReader(q, ro_id);
    while (r.Read())
    {
        roleProperties item = new roleProperties();
        item.roleName = r["ro_name"].ToString();
        foreach (IDataRecord str in r)
        {
            item.functionTitle[i] = r["fu_title"].ToString();
            i++;
        }
        roles.Add(item);
    }
} 
```

但我在这一行得到一个空引用：

```
item.functionTitle[i] = r["fu_title"].ToString(); 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:14:03.817

`item.functionTitle`是`null`因为数组是引用类型，并且您没有在任何地方初始化该属性（因此它具有默认值：`null`对于引用类型）。

即使这不是问题（假设`functionTitle`是一个空数组）`item.functionTitle[i]`也会再次抛出，因为它试图访问超出范围的索引。最后，您遇到了一个错误：数组中的第一个元素的索引是`0`，而不是`1`。

您可以通过将代码更改为来解决上述所有问题

```
while (r.Read())
{
    roleProperties item = new roleProperties();
    item.roleName = r["ro_name"].ToString();
    item.functionTitle = r.Select(o => o["fu_title"].ToString()).ToArray();
    roles.Add(item);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:14:12.093

先初始化数组。

```
item.functionTitle = new string[n]; // where n is an int 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:18:14.263

您的数组未初始化，因此为 null，因为您不知道您将需要的数组的大小，这似乎是一种更适合使用列表的方法

将您的结构更改为

```
protected class roleProperties
{
    public string roleName { get; set; }
    public IList<string> functionTitle { get; private set;}
    public roleProperties(){
        functionTitle = new List<string>();
    }
} 
```

然后改变

```
item.functionTitle[i] = r["fu_title"].ToString(); 
```

到

```
item.functionTitle.Add(r["fu_title"].ToString()); 
```

我已将结构更改为类，因为它是可变的，而[可变结构是邪恶的](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)。

# javascript - Signalr 检查集线器是否已经启动

> ID：15066693
> 
> 赞同：32
> 
> 时间：2013-02-25T12:11:41.160
> 
> 标签：javascript, signalr

我有多个带有 signalR 函数的 javascript 块。

我不知道执行顺序，所以我想启动集线器

`$.connection.hub.start();`

如果它还没有开始。

如何检查集线器是否已经启动？多次启动它会引发错误。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-06-03T20:43:57.243

有几种方法可以解决这个问题。首先是创建您自己的连接状态跟踪变量，您可以使用连接回调事件进行设置：

```
$.connection.hub.start().done(function() { ConnectionStarted = true; }) 
```

您可以在尝试开始连接之前检查 ConnectionStarted。不幸的是，这不会很好地工作，因为 start() 是异步的，因此许多实例可能会在一个连接完成之前尝试启动连接并将 ConnectionStart 设置为 true。

所以，工作解决方案。那里有两个。首先，让每个实例都使用自己的连接对象（即：不要使用默认的 $.connection.hub，而是使用手动连接创建器：

```
var localConnection = $.hubConnection(); 
var localHubProxy= localConnection.createHubProxy('HubNameHere'); 
```

这不是很好，因为大多数浏览器每页允许的连接数量有限，而且它通常是矫枉过正的。

IMO，最好的解决方案是使用带有默认代理（$.connection.hub）的单个自动连接并查看连接状态（我刚刚遇到的东西）。每个连接对象都有一个状态：

```
$.signalR.connectionState
Object {connecting: 0, connected: 1, reconnecting: 2, disconnected: 4} 
```

所以，在每种情况下，都选择这样的东西吗？：

```
if ($.connection.hub && $.connection.hub.state === $.signalR.connectionState.disconnected) {
  $.connection.hub.start()
} 
```

另请注意，当您创建连接时，它将处于“断开连接”/ 4 状态，直到对其调用 start 。一旦调用 start ，连接显然会不断尝试重新连接（如果它被中断），直到调用 $.connection.hub.stop() （然后将返回状态“断开连接”）。

参考：

[http://www.asp.net/signalr/overview/hubs-api/hubs-api-guide-javascript-client#establishconnection](http://www.asp.net/signalr/overview/hubs-api/hubs-api-guide-javascript-client#establishconnection) [https://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-30T11:19:31.950

您可以检查每个功能中的连接状态，例如：

```
function doSomething {
        if ($.connection.hub.state === $.signalR.connectionState.disconnected) {
            $.connection.hub.start().done(function () { myHub.server.myHubMethod(); });
        }
        else {
            myHub.server.myHubMethod();
        }
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-25T12:17:49.957

您可以使用 .done() 检测集线器何时开始

```
$.connection.hub.start().done(function () {
}); 
```

使用此方法，您可以执行以下操作（取自文档：[https](https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs) ://github.com/SignalR/SignalR/wiki/SignalR-JS-Client-Hubs ），然后您可以自己跟踪连接是否打开。

```
function connectionReady() {
    alert("Done calling first hub serverside-function");
};

$.connection.hub.start()
                .done(function() {
                    myHub.server.SomeFunction(SomeParam) //e.g. a login or init
                         .done(connectionReady); 
                })
                .fail(function() {
                    alert("Could not Connect!");
                 }); 
```

# jquery - 如何使用 JQuery 在每次单击时重复使用 css 设置的动画？

> ID：15066700
> 
> 赞同：5
> 
> 时间：2013-02-25T12:11:55.887
> 
> 标签：jquery, html, css, animation

我在 css 中创建了一个旋转动画，它需要 1 秒，并且设置了 .comet 类的“转发”。我怎样才能让动画在每次点击外部元素时开始？

```
 #carousel #big_bubble #cometa.rotation{animation:rotation 1s forwards; -moz-animation:rotation 1.5s forwards; -webkit-animation:rotation 1s forwards; -o-animation:rotation forwards 1s; }
    @-moz-keyframes rotation{
        from{transform:rotate(0deg);}
        to{transform:rotate(-360deg);}
 @-webkit-keyframes rotation{
        from{-webkit-transform:rotate(0deg);}
        to{-webkit-transform:rotate(-360deg);}
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-19T00:44:53.613

```
$(function() {// Shorthand for $( document ).ready()
    $( ".trigger" ).click(function(e) {
        e.preventDefault();
        $(this).addClass( "animation" ).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend", function(){
            $(this).removeClass( "animation" );
        });
    });
}); 
```

资源：

1.  [如何在 JavaScript 中捕获 CSS3 动画事件](http://www.sitepoint.com/css3-animation-javascript-event-handlers/)
2.  [jQuery .one()](http://api.jquery.com/one/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T12:42:10.367

不确定我是否理解正确。反正：

```
$('#button').click(function() {
    var el = $('#cometa').addClass('rotation');
    setTimeout(function() {
        el.removeClass('rotation');
    }, 1000);
}); 
```

[http://jsfiddle.net/EPv3B/](http://jsfiddle.net/EPv3B/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:19:07.773

每次单击 a 元素时，都会将 css 类添加到元素中。检查此代码。

如果`.comet`是你的 CSS 动画类那么

```
$(document).ready(function(){
     $('#everybutton_element_id').click(function (e) {
            $(this).addClass('comet');
            $(this).delay(2000).removeClass('comet');
     });
}); 
```

对要实现它的任何元素重复相同的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:43:14.410

```
$('body').on('click', '#next', function() {
     $("#cometa").addClass("rotation");
     setTimeout(function () {
    $("#cometa").removeClass('rotation');
}, 1500);
}); 
```

这适用于我的问题。动画时间结束后，我删除了该类。

# php - PHP ActiveRecord - 如何列出 MySql 数据库的所有表名？

> ID：15066701
> 
> 赞同：0
> 
> 时间：2013-02-25T12:11:56.980
> 
> 标签：php, mysql, phpactiverecord

我在我的应用程序中使用[PHP ActiveRecord](http://www.phpactiverecord.org/)

如何列出数据库的所有表名

这里我已经配置了数据库的连接如下

```
require_once ActiveRecordDIR.'/ActiveRecord.php';
ActiveRecord\Config::initialize(function($cfg){

    $cfg->set_model_directory('core/models');
    $cfg->set_connections(array('development' =>'mysql://root:pass@localhost/dbname'));
}); 
```

在此之后我想列出数据库“dbname”中的所有表名

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:31:10.800

该方法**[`Connection::tables()`](http://www.phpactiverecord.org/docs/ActiveRecord/Connection#methodtables)**返回数据库中所有表的数组。然后，您可以 foreach 数组来检索表名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:22:53.847

[Active Record](http://martinfowler.com/eaaCatalog/activeRecord.html)表示单个表中的单行并向其添加业务逻辑，因此在模式方面应该没有办法从 ActiveRecord 查询数据库中的所有表，因为在模式中没有用例。

但是，根据该框架的文档，您可以使用

*   [`Connection::query()`](http://www.phpactiverecord.org/docs/ActiveRecord/Connection#methodquery)- 对数据库执行原始 SQL 查询。

因此使用原始 SQL 来获取所有表名。我带你知道SQL。

还有一种方法

*   [`Connection::query_for_tables()`](http://www.phpactiverecord.org/docs/ActiveRecord/Connection#methodquery_for_tables)- 查询当前数据库中的所有表。结果必须只包含一列，该列具有表的名称。

这可能正在做你想做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:23:42.537

```
YourModel::find_by_sql("SELECT `TABLE_NAME` FROM `information_schema`.`TABLES` WHERE `TABLE_SCHEMA`=?",array('YOUR_DB_NAME')); 
```

# multithreading - Delphi：来自 Indy TCPServer 线程的 DDE 调用

> ID：15066705
> 
> 赞同：0
> 
> 时间：2013-02-25T12:12:04.207
> 
> 标签：multithreading, delphi, tcp, indy, dde

我尝试从 Indy TCP Server 线程连接到 (Uni)DDE 服务器。从正常应用程序我可以连接，并且可以获取/设置任何 PLC 变量。

但是当我使用来自 Indy 线程的相同命令（来自 Execute(AThread: TIdPeerThread) 事件）时，SetLink 命令失败。

```
procedure ReadDDE(AppPath, Service, Topic, Cmd: string; out Eredmeny : string; out HibaSzint : string);
var
    DDE: TDDEClientConv;
    pc : PChar;
begin
    Eredmeny := '';
    HibaSzint := '';
    DDE := TDDEClientConv.Create(nil);
    try
        DDE.ConnectMode := ddeAutomatic;
        DDE.ServiceApplication := AppPath;
        DDE.FormatChars := False;
        HibaSzint := 'SetLink';
        if DDE.SetLink(Service, Topic) then begin
            HibaSzint := '';
            pc := DDE.RequestData(PChar(Cmd));
            Eredmeny := StrPas(pc);
            StrDispose(pc);
        end;
   finally
        DDE.Free;
   end;
end; 
```

也许 DDE 正在使用 Windows 消息，或者其他东西不是线程安全的，或者在线程级别无法捕获？

感谢您提供有关此的任何信息：dd

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:25:24.190

DDE 建立在 Windows 消息之上。您需要确保在具有 DDE 连接的线程上发送消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T00:44:00.947

我知道为时已晚，但可能有人需要此指示。我为此做了太多的工作。我有同样的问题（但是openlink方法，而不是Set Link方法。我使用的连接模式ddeManual不是自动的）。最后我找到了一些东西。Delphi ddeMgr 在 VCL 单元中，需要像 Synchronize(yourProcedure) 一样调用它。当我编写另一个过程（该过程包括我所有的 dde ​​交互）并在线程 Execute 方法中，我使用 Synchronize 调用我的过程。我的代码看起来像这样。

```
procedure TAskYTSThread.MakeDDEConv;
begin
 with TDDEClientConv.Create(Form1) do
 begin
    ConnectMode:=ddeManual;
    ServiceApplication:='explorer.exe';
    SetLink('Folders', 'AppProperties') ;
    Form1.Memo1.Lines.Add('Openlink çağrılacak Gönderilecek.');
    if OpenLink then
    begin
      Form1.Memo1.Lines.Add('Link Open Edildi.');
      ExecuteMacro('[FindFolder(, C:\)]', False) ;
      CloseLink;
    end
    else
    begin
      Form1.Memo1.Lines.Add('OLMADIIIIIII');
    end;
    Free;
  end;
end;

procedure TAskYTSThread.Execute;
var
  blnRunning : boolean ;
  FYtsTopicName, strMacro : string ;
begin
  inherited;
  FDDE_BUSY.Enter ;
  try
    blnRunning := IsYTSRunning;
    Synchronize(MakeDDEConv); // this is key point

  finally
    FDDE_BUSY.Leave ;
  end;
end; 
```

我希望这些信息对其他人有所帮助:)

# javascript - 移动到悬停的内容时保持悬停

> ID：15066708
> 
> 赞同：1
> 
> 时间：2013-02-25T12:12:25.800
> 
> 标签：javascript, jquery, html, css

我有两个 div (#one, #two) - 一个位于上层，另一个包含在许多其他 div 中（例如，这里只有一个）：

```
<body>
  <div>
    <div id="two"></div>
  </div>
  <div id="one"></div>
</body> 
```

两个 div 彼此绝对靠近。#one 被 JQuery 隐藏`.hide()`。当我将鼠标悬停在 #two 上时，我会用 JQuery 显示 #one `.show()`。有没有办法从#two 移动到#one，所以悬停效果保持不变并且#one 不会隐藏，直到我从它们两者上悬停。

[http://jsfiddle.net/Q5ZtP/](http://jsfiddle.net/Q5ZtP/) - 用于说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:13:45.497

选择两者`"#one"`并`"#two"`使用此选择器`$('#two,#one');`

```
$('#one').hide();
$('#two,#one').hover(
    function() {
        $('#one').show();
    },
    function() {
       $('#one').hide(); 
    }
); 
```

在这里演示[http://jsfiddle.net/Q5ZtP/1/](http://jsfiddle.net/Q5ZtP/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:15:15.217

最简单的方法是放在`one`里面`two`。冒泡效果将导致您仍然在悬停，`two`即使您悬停在 上`one`。

```
<div id="two"><div id="one"></div></div> 
```

小提琴[http://jsfiddle.net/Q5ZtP/2/](http://jsfiddle.net/Q5ZtP/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:15:59.203

尝试改变：

```
$('#two').hover(...) 
```

至

```
$('#one, #two').hover(...) 
```

在你的代码中。

# entity-framework - 从“通过”接口实例化的第二个数据库上下文获取数据时出错

> ID：15066709
> 
> 赞同：3
> 
> 时间：2013-02-25T12:12:30.480
> 
> 标签：entity-framework, interface, ef-code-first

目前在 .net 4.5 上使用 codefirst v5

我有 1 个“主”上下文，其中包括一个名为“Geonames”的位置表（下面的片段）

```
public class CoreContext : DbContext
            : base("Conn")
{
    public DbSet<GeoName> GeoNames { get; set; }
} 
```

这里的参考只是为了能够管理表上的迁移。

站点将能够“插入”不同的位置提供程序，并且 geonames 表可以提供本地提供程序实现。提供者在网站的配置中设置，只需设置实际实现的类名和命名空间。它使用这样的接口（简化）

```
public interface ILocationProvider
{
    IEnumerable<Location> LocationsByName(String Name);
} 
```

具体实现如下（简化）

```
 public static ILocationProvider GetLocationProvider()
    {

        ILocationProvider Provider = null;

        Provider = Activator.CreateInstance(Type.GetType("{selected namespace.classname}")) as ILocationProvider;
        }
        catch (Exception ex)
        {
            throw ex;
        }

        if (Provider == null)
        {
            throw new NullReferenceException("Could not create an instance of the location Provider");
        }

        return Provider;
    } 
```

具体实现如下（简化）

```
public class LocalLocationProvider : ILocationProvider
{
    public IEnumerable<Location> LocationsByName(string Name)
    {
        List<Location> locations = new List<Location>();

        using (var db = new LocalLocationContext())
        {   

            foreach (var item in db.GeoNames.Where(X => X.Name.Contains(Name)))
            {   
                locations.Add(
                    new Location { Id = item.Id, Name = item.Name, GeoLocation = item.GeoLocation }
                );
            }
        }

        return locations;
    }

    private class LocalLocationContext : DbContext
    {
        public LocalLocationContext()
            : base("Conn")
        {
            Database.SetInitializer<LocalLocationContext>(null);
        }

        public DbSet<GeoName> GeoNames { get; set; }
    }
} 
```

具体的实现实例化得很好，我将方法称为“LocationsByName”..但问题就在这里。当下面的代码行执行时

```
foreach (var item in db.GeoNames.Where(X => X.Name.Contains(Name)))
{
  ..
} 
```

我收到以下错误。

```
Exception Details: System.ComponentModel.Win32Exception: The wait operation timed out

[Win32Exception (0x80004005): The wait operation timed out]

    [SqlException (0x80131904): Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.]
   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +1753986
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +5296058
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +558
   System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) +1682
   System.Data.SqlClient.SqlDataReader.TryConsumeMetaData() +59
   System.Data.SqlClient.SqlDataReader.get_MetaData() +90
   System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +365
   System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite) +1379
   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite) +175
   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +53
   System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method) +134
   System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior) +41
   System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior) +10
   System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior) +437 
```

我试图在不使用 'Activator.CreateInstance()' 方法的情况下实例化 'LocalLocationContext' 我可以很好地查询数据。

对我来说，很明显这与我如何获得位置提供程序的实际实现有关，只是无法发现错误或问题是什么。

提前致谢。

# json - 在 IE9 中解析 JSON 响应

> ID：15066714
> 
> 赞同：0
> 
> 时间：2013-02-25T12:12:54.363
> 
> 标签：json, asp.net-mvc-3, asp.net-mvc-4

在我的 MVC4 网络应用程序中，我使用 FineUploader 上传文件。

上传文件后，我从控制器发送 json 响应，如下所示：

```
return this.Json(packageUploadResult, "text/plain", System.Text.Encoding.UTF8); 
```

我不得不将“application/json”修改为“text/plain”，因为我在 IE [(info here)](https://stackoverflow.com/questions/5388893/ie9-json-data-do-you-want-to-open-or-save-this-file)中获得了“Save As”“Open”选项。仅在 IE 中。它在所有其他浏览器中都能正常工作。

看法：

```
...
        }).on('complete', function (event, id, filename, json) {
            if (json.success) {
                if (json.IsSignature) {
                    alert("IN");
                }
... 
```

如何解析 Json 响应以使其在 IE 中工作：

示例响应：

```
{"PackageErrorType":0,"PackageId":"AGI-MM-CFG-NUB-2.0.1.2.2","SignatureMatch":false,"IsSignature":false,"success":true} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:34:55.693

您可以使用以下方法解析服务器返回的文本/纯文本`$.parseJSON`：

```
var json = $.parseJSON(textReturnedByServer);
if (json.success) {
    if (json.IsSignature) {
        alert("IN");
    }
} 
```

当然，您应该只对不支持 HTML5 File API 的旧版浏览器（例如 Internet Explorer）执行此操作。

# visual-studio - Visual Studio 2012 设计器引发异常 0x80270257

> ID：15066717
> 
> 赞同：1
> 
> 时间：2013-02-25T12:13:11.050
> 
> 标签：visual-studio, windows-8, windows-store-apps, windows-server-2012, remoteapp

**TLDR；尝试在将 VS2012 作为 RemoteApp 运行的设计器中编辑 XAML 时，VS2012 会引发如下异常。**

是的，我可能在错误的地方问这个问题，但我对此束手无策。基本上我想要实现的是在我的 Surface RT 上运行 VS2012 以快速编辑 Windows 应用商店应用程序。这样做的方法是将它作为[RemoteApp](http://www.daveamenta.com/2012-11/using-remoteapps-on-surface-rt-windows-rt/)运行，考虑到您可以直接在 Surface 上按 F5 来构建和启动以进行调试，这实际上工作得很好，问题是 VS Designer 炸弹并抛出下面的异常。

对于初始实验室测试，我将 VDI 作为会话模式设置运行 - 即 VS2012 在 WS2012 上运行，这给出了与本文所述完全相同的异常。但是在与一些比我更喜欢 VDI 的人讨论它之后，我们得出的结论是，这是因为它运行在 WS2012 而不是 Windows 8 上。所以我继续围绕在虚拟化模式下运行 VDI 进行了更改。

说了又做了，我花了一天时间安装和定制带有 VS2012、各种 SDK 和诸如此类的 Windows 8 Pro 映像。当涉及到 sysprep 时，我遇到了一个不同的问题，即 sysprep 会因“致命错误”而崩溃，在又一天浏览网络并表示支持后，我决定这是因为预装的 Windows Store 应用程序已更新。所以又过了一天重新安装所有东西，这次 sysprep 工作正常，我能够调试虚拟桌面，但是当再次将 Visual Studio（以及其他）发布为 RemoteApp 时，我遇到了问题。经过一天半的谷歌搜索、binging、推特和最终调用支持，这是因为只有 Windows 8 企业版可以用于 RemoteApp 发布......谢谢 MS，你不能 t 在您的“最佳实践”中明确说明了吗？无论如何，再花一天时间重新安装 Windows 和所有应用程序、SDK 和文档。这一次，我终于能够同时进行系统准备、委托和发布 RemoteApps。是的，我很高兴看到我终于可以做我想做的事情了——直接在我的 Surface RT 上进行快速 XAML 编辑和调试。

不是这样.. 例外的是，大约 500 次重新安装之后仍然抬起它丑陋的脑袋。我最初与之交谈的“大师”和我一样被难住了，只能说“它应该工作”和“它对我配置它的人来说工作得很好”。

因此，任何想法都非常感谢这里。虽然我可以使用文本编辑器来编辑 XAML 并且 Bob 是我叔叔的快速修复和调试会话，但我更希望它能够正常工作并能够使用可视化设计器（或 Blend - 因为同样的异常被抛出那里）进行某些更改。

[这是实际的例外](https://i.stack.imgur.com/W9dqv.png)； ![System.Runtime.InteropServices.COMException 需要应用程序管理器来激活应用程序，但未运行。 （来自 HRESULT 的异常：0x80270257）](../Images/ab90dfb56f374b69c9f9e672aa968fa2.png)[2](https://i.stack.imgur.com/W9dqv.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T18:08:47.360

我有同样的问题，我刚刚找到了解决方案。

我停用了 Windows 'explorer' shell，因为我使用的是 BBlean（Windows 的备用 shell，基于 BlackBox）。显然这阻止了应用程序管理器。禁用 BBlean 并启动 Windows 通常会修复该错误。

因此，如果您碰巧使用了替换外壳，请尝试禁用它。

# c# - Wpf TextBox 数据绑定更新

> ID：15066721
> 
> 赞同：0
> 
> 时间：2013-02-25T12:13:18.113
> 
> 标签：c#, wpf, data-binding

我有一个 TextBox，它绑定到一个字符串属性：

文本框：

```
<TextBox x:Name="SearchBox"
     Text="{Binding SearchText, Source={StaticResource SearchEngine}, Mode=TwoWay}"
</TextBox> 
```

以及绑定到的类：

```
public class SearchEngine : ViewModelBase 
{
    private string _searchText = string.Empty;

    public SearchEngine() {
        Console.Out.WriteLine("this = {0}", this);
        SearchText = "Search";
    }

    public string SearchText 
    {
        get { return _searchText; }
        set 
        {
            if (_searchText != value) 
            {
                _searchText = value;
                Console.Out.WriteLine("AAAAAAAAAAAA: " + value);
                NotifyPropertyChanged();
            }
        }
    }
} 
```

问题是当我输入文本框时，`SearchText`没有更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:26:03.170

请执行下列操作：

```
<TextBox x:Name="SearchBox" Text="{Binding SearchText, Mode=TwoWay}" /> 
```

并在您的代码隐藏中将 DataContext 属性分配给您的实例，即

```
SearchEngine searchEngine = new SearchEngine();
SearchBox.DataContext = searchEngine; 
```

见[这里](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:29:28.913

您必须在您的 xaml 中使用 updatesourcetrigger，例如：

```
<TextBox x:Name="SearchBox" Text="{Binding SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged"/> 
```

# html - 页面重定向就像在 facebook 中一样

> ID：15066724
> 
> 赞同：0
> 
> 时间：2013-02-25T12:13:28.847
> 
> 标签：html

在 facebook 中，如果您的任何照片被标记，那么您会在邮件中收到通知。当您按下邮件上的链接时

1.  如果已经登录 facebook，带有标签照片的页面将打开
2.  登录，如果尚未登录，将访问标记的照片。

我在前端和 asp.net 服务中制作纯 html、jquery 作为后端。我怎样才能实现它。假设我的网站有 3 个页面：first-login_page.html、second-second_page.html、third-third_page.html。

现在邮件包含指向第三页的链接。

1.  如果已经登录，我会直接打开third_page。
2.  如果未登录，我必须转到第一页（登录页面）。然后用户输入用户名和密码并按 Enter，然后将转到第三页。

你能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:31:30.907

在第 2 和第 3 页，使用一个**隐藏字段**。假设有人登录然后在隐藏字段中存储一些**令牌密钥**或任何内容....现在有人通过电子邮件发送的链接来...通过**javascript / jQuery**检查**隐藏字段**是否为**NULL**，还设置逻辑...检查**隐藏字段**是否具有有效值。从这里您可以检查用户是否已经**登录**......假设他没有登录，然后在登录页面上重定向，否则继续......

希望您熟悉代码语法..享受

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:20:52.403

在第三页上，您检查用户是否已登录

如果用户尚未登录，则将用户重定向到登录页面

# linux - 如何从`callq func@PLT`中获取`func`的实际地址

> ID：15066725
> 
> 赞同：5
> 
> 时间：2013-02-25T12:13:32.100
> 
> 标签：linux, function, assembly, shared-libraries

在我的 Linux 程序中，我需要一个函数来获取地址`addr`并检查`callq`放置的指令是否`addr`正在调用`func`从共享库加载的特定函数。我的意思是，我需要检查我是否有类似`callq func@PLT`at的东西`addr`。

`func`那么，在 Linux 上，如何从`callq func@PLT`指令中获取函数的真实地址呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T10:52:06.480

*只有在动态链接器解析*实际加载地址之后，您才能在运行时找到相关信息。
警告：接下来是更深层次的魔法......

为了说明正在发生的事情，请使用调试器：

```
#include <stdio.h>

int main(int argc, char **argv) { printf("Hello, World!\n"); return 0; } 
```

编译它（`gcc -O8 ...`）。`objdump -d`在二进制节目上（`printf()`被替换`puts()`为无法承受的普通字符串的优化......）：

```
.init 部分的反汇编：
[ ... ]
.plt 部分的反汇编：

0000000000400408 < __libc_start_main@plt-0x10 >:
   *400408* : ff 35 a2 04 10 00 pushq 1049762(%rip) # 5008b0 <_GLOBAL_OFFSET_TABLE_+0x8> >
  40040e: ff 25 a4 04 10 00 jmpq *1049764(%rip) # 5008b8 <_GLOBAL_OFFSET_TABLE_+0x10>
[ ... ]
0000000000400428 <puts@plt>：
  400428: ff 25 9a 04 10 00 jmpq *1049754(%rip) # 5008c8 <_GLOBAL_OFFSET_TABLE_+0x20>
  40042e: 68 01 00 00 00 推 0x1
  400433: e9 d0 ff ff ff jmpq    *400408 * <_init+0x18>
[ ... ]
0000000000400500 <主>：
  400500: 48 83 ec 08 sub $0x8,%rsp
  400504: bf 0c 06 40 00 移动 $0x40060c,%edi
  400509：e8 1a ff ff ff callq 400428 <puts@plt>
  40050e: 31 c0 xor %eax,%eax
  400510: 48 83 c4 08 添加 $0x8,%rsp
  400514：c3 retq

```

现在将其加载到`gdb`. 然后：

```
$ gdb ./tcc
GNU gdb 红帽 Linux (6.3.0.0-0.30.1rh)
[ ... ]
(gdb) x/3i 0x400428
0x400428: jmpq *1049754(%rip) # 0x5008c8 <_GLOBAL_OFFSET_TABLE_+32>
0x40042e：pushq $0x1
0x400433：jmpq 0x400408
(gdb) x/gx 0x5008c8
0x5008c8 <_GLOBAL_OFFSET_TABLE_+32>：0x000000000040042e

```

请注意，此值指向直接跟在第一个 ; 后面的指令`jmpq`；这意味着该`puts@plt`插槽在第一次调用时将简单地“通过”到：

```
(gdb) x/3i 0x400408
0x400408: pushq 1049762(%rip) # 0x5008b0 <_GLOBAL_OFFSET_TABLE_+8>
0x40040e: jmpq *1049764(%rip) # 0x5008b8 <_GLOBAL_OFFSET_TABLE_+16>
0x400414：无
(gdb) x/gx 0x5008b0
0x5008b0 <_GLOBAL_OFFSET_TABLE_+8>：0x0000000000000000
(gdb) x/gx 0x5008b8
0x5008b8 <_GLOBAL_OFFSET_TABLE_+16>：0x0000000000000000

```

函数地址和参数尚未初始化。
这是程序加载后、执行前的状态。现在开始执行它：

```
(gdb) 中断主要
0x400500 处的断点 1
(gdb) 运行
启动程序：tcc
（未找到调试符号）
（未找到调试符号）

断点 1, 0x0000000000400500 in main()
(gdb) x/i 0x400428
0x400428: jmpq *1049754(%rip) # 0x5008c8 <_GLOBAL_OFFSET_TABLE_+32>
(gdb) x/gx 0x5008c8
0x5008c8 <_GLOBAL_OFFSET_TABLE_+32>：0x000000000040042e

```

所以这还没有改变*-*但*目标*（初始化的`GOT`内容`libc`）现在不同了：

```
(gdb) x/gx 0x5008b0
0x5008b0 <_GLOBAL_OFFSET_TABLE_+8>：0x0000002a9566b9a8
(gdb) x/gx 0x5008b8
0x5008b8 <_GLOBAL_OFFSET_TABLE_+16>：0x0000002a955609f0
（gdb）disas 0x0000002a955609f0
函数_dl_runtime_resolve的汇编代码转储：
0x0000002a955609f0 <_dl_runtime_resolve+0> : sub $0x38,%rsp
[ ... ]

```

即在程序加载时，动态链接器将首先解析“ `init`”部分。它将`GOT`引用替换为重定向到动态链接代码的指针。

因此，当第一次通过引用调用外部到二进制函数时`.plt`，它会再次跳转到链接器。让它这样做，然后检查程序 - 状态再次改变：

```
(gdb) 中断 *0x0000000000400514
0x400514 处的断点 2
(gdb) 继续
继续。
你好世界！

断点 2, 0x0000000000400514 in main()
(gdb) x/i 0x400428
0x400428: jmpq *1049754(%rip) # 0x5008c8 <_GLOBAL_OFFSET_TABLE_+32>
(gdb) x/gx 0x5008c8
0x5008c8：0x0000002a956c8870
（gdb）disas 0x0000002a956c8870函数puts
的汇编代码转储：
0x0000002a956c8870 <puts+0>: mov %rbx,0xffffffffffffffe0(%rsp)
[ ... ]

```

所以现在有你的重定向`libc`-最终得到解决的`PLT`引用。`puts()`

*链接器在哪里插入实际函数加载地址*的指令（我们已经看到它这样做`_dl_runtime_resolve`来自 ELF 二进制文件中的特殊部分：

```
$ readelf -a tcc
[ ... ]
程序标题：
  类型 偏移 VirtAddr PhysAddr
                 FileSiz MemSiz 标志对齐
[ ... ]
  中断 0x00000000000000200 0x0000000000400200 0x0000000000400200
                 0x000000000000001c 0x000000000000001c R 1
      [请求程序解释器：/lib64/ld-linux-x86-64.so.2]
[ ... ]
偏移 0x700 处的动态部分包含 21 个条目：
  标签类型名称/值
 0x0000000000000001（需要）共享库：[libc.so.6]
[ ... ]
偏移 0x3c0 处的重定位节“.rela.plt”包含 2 个条目：
  偏移信息类型 Sym。价值符号。姓名+加号
0000005008c0 000100000007 R_X86_64_JUMP_SLO 0000000000000000 __libc_start_main + 0
0000005008c8 000200000007 R_X86_64_JUMP_SLO 0000000000000000 看跌期权 + 0

```

ELF 不仅仅是上面的内容，但这三部分告诉内核的二进制格式处理程序“这个 ELF 二进制文件有一个*解释器*”（它是动态链接器）需要首先加载/初始化，它*需要* `libc.so.6`，并且偏移当实际执行动态链接步骤时，`0x5008c0`程序`0x5008c8`的可写数据部分中的 和 必须分别*替换*为`__libc_start_main`和的加载地址。`puts`

从 ELF 的角度来看，这究竟是如何发生的，取决于*解释器*的细节（也就是动态链接器的实现）。

# c# - 反序列化 XML 对象时忽略的值

> ID：15066733
> 
> 赞同：0
> 
> 时间：2013-02-25T12:14:09.043
> 
> 标签：c#, xml

我在反序列化 XML 对象时遇到问题。原始 XML 显示 nonexpiredcredits 值为 5，但该对象被反序列化，值为 0。最重要的是，没有遇到异常，反序列化过程似乎只是跳过了该元素。任何帮助，将不胜感激。

原始 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<theObject>
    <mobilecredits>
        <nonexpirecredits>5</nonexpirecredits>
    </mobilecredits>
</theObject> 
```

物体：

```
[Serializable()]
[XmlRoot("theObject")]
public class mobilecreditsWrapper
{
    [XmlElement("mobilecredits")]
    public mobilecredits credits { get; set; }
}
[Serializable()]
public class mobilecredits
{
    [XmlElement("nonexpiredcredits")]
    public int nonexpiredcredits { get; set; }
} 
```

反序列化片段：

```
XmlSerializer s = new XmlSerializer(typeof(T));
    //T is set to mobilecreditsWrapper in the generic function this code snippet is found in
var sr = new StringReader(res);
try
{
    obj = (T)s.Deserialize(sr);
}
catch (Exception ex)
{
    //this is not hit
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:26:28.380

标签名称不一样。在您的 XML 中，您拥有`nonexpirecredits`，在您的班级中，您拥有`nonexpiredcredits`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:22:06.410

你为什么要反序列化这个简单的xml ..你可以改用**LINQ2XML** ..

```
XDocument doc=XDocument.Load(yourXML);
int no=(int)doc.Descendants().Element("nonexpirecredits"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:28:48.383

你有一个错字 - 你的 xml 属性指定了 nonexpiredcredits，但你的 xml 没有 d - 你称之为 nonexpirecredits。

# function - WordPress使用functions.php在the_content内有条件地显示页面标题

> ID：15066734
> 
> 赞同：0
> 
> 时间：2013-02-25T12:14:11.927
> 
> 标签：function, wordpress-theming, wordpress

**快速概览：** 我试图让页面标题显示在 the_content() 中，但这需要有条件，并且仅在页面有附加图像时显示。这也需要通过函数文件来完成。

**我在哪里：** 这是我到目前为止的代码......但它不起作用，我认为问题在于它在循环之外......我如何使用代码来查找页面ID。 ..或者我怎样才能让它工作？

```
<?php

        if ( has_post_thumbnail() ) {
        add_filter('the_content', 'contentTitle');
            function contentTitle($content='')
            {
                $theTitle = '<h1>' . get_the_title() . '</h1>';
                return $theTitle . $content;
            }
        } else {
                // Do nothing
            } 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:15:35.217

您应该全球化帖子对象，以便帖子 ID 可用。

```
add_filter('the_content', 'contentTitle');

function contentTitle($content='')
{
 global $post;
 if( has_post_thumbnail( $post->ID ){ 
   $theTitle = '<h1>' . get_the_title( $post->ID ) . '</h1>';
   return $theTitle . $content;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:10:20.273

**解决方案**

“if”应该在函数本身内部。

```
<?php
add_filter('the_content', 'contentTitle');

function contentTitle($content='') {

   if ( has_post_thumbnail() ) {
   $theTitle = '<h1>' . get_the_title() . '</h1>';
   return $theTitle . $content;

   } else {

   // Do nothing

   }
}
?> 
```

# c# - 如何使用输入文本文件在 C# 中搜索和返回字符串值

> ID：15066735
> 
> 赞同：-4
> 
> 时间：2013-02-25T12:14:12.323
> 
> 标签：c#

我有以下格式的日志文件：

```
[BugServices] WX Edit Bug: 4027909 Server: nomos-scanner.corp.adobe.com User:karansha appGUID: wx Elapsed Time: 1204ms method:bug.updateBug Date: Mon Jan 14 09:42:05 IST 2013
[BugServices] WX Edit Bug: 4027909 Server: nomos-scanner.corp.adobe.com User:karansha appGUID: wx Elapsed Time: 1204ms method:bug.updateBug Date: Mon Jan 14 09:42:05 IST 2013
[BugServices] WX Edit Bug: 4027909 Server: nomos-scanner.corp.adobe.com user:vader appGUID: wx Elapsed Time: 1204ms method:bug.updateBug Date: Mon Jan 14 09:42:05 IST 2013
[BugServices] WX Edit Bug: 4027912 Server: nomos-scanner.corp.adobe.com User:gulanand appGUID: wx Elapsed Time: 1204ms method:bug.updateBug Date: Mon Jan 14 09:42:05 IST 2013 
```

我如何设法获取所有字符串值，例如用户：值，使用 C#？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:19:15.060

您可以遍历文件中的每一行，然后将正则表达式应用于该行以过滤内容。

一个简单的例子在这里[如何：使用正则表达式搜索字符串（C#编程指南）](http://msdn.microsoft.com/en-us/library/ms228595%28v=vs.80%29.aspx)

我最近通过 TekPub 观看了 Jon Skeet 做这件事的视频，我相信这是正则表达式视频[TekPub Mastering C#](http://tekpub.com/productions/csharp4)

我用来测试正则表达式的网站是[Rubular](http://rubular.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:21:57.970

您可以使用像这样的正则表达式 @"User:(?.*?) appGUID" 并且您将获得用户名列表+您可以将另一个组添加到具有值的正则表达式。下面的例子：

```
 StreamReader reader = new StreamReader("sample.txt");
        string x = reader.ReadToEnd();
        List<string> users = new List<string>();
        int numberOfUsers;

        Regex regex = new Regex(@"(U|u)ser:(?<username>.*?) appGUID");
        MatchCollection matches = regex.Matches(x);
        foreach (Match match in matches)
        {
            string user = match.Groups["username"].ToString().Trim();
            if (!users.Contains(user)) users.Add(user);
        }
        numberOfUsers = users.Count; 
```

# jquery - 无法输入 HTML 文本框 --- Jquery

> ID：15066748
> 
> 赞同：1
> 
> 时间：2013-02-25T12:14:52.903
> 
> 标签：jquery, asp.net-mvc, html

我的剃刀视图中有一个 html 文本框

```
<input type="text" id="txtComments" name="txtComments" placeholder="Enter your comments"
                                    style="width: 500px; height: 50px;" /> 
```

在点击输入时，我正在进行 ajax jquery 调用并保存数据。但我无法在文本框中输入。如果我将其更改`id="txtComments"`为其他可以输入的内容。

我做错了什么？

添加了我的脚本文件：

```
$("#txtComments").keypress(function (e) {
    var comments = "";
    e.preventDefault();
    var code = e.keyCode ? e.keyCode : e.which;
    if (code == 13) {
        comments = $("#txtComments").val();
        var request = $.ajax({
            url: "/Home/SaveCommentsData",
            type: "POST",
            data: { 'CommentEntered': comments },
            dataType: "json",
            success: function (data, textStatus) {
                if (textStatus) {
                    $('#enteredComments').append('<span>' + comments + '</span>');
                    alert("Comment Saved");
                }
            },
            error: function (textstatus) {
                alert(textstatus);
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:21:30.660

那是因为您正在使用`preventDefault()`which 阻止事件的默认操作，在这种情况下是*键入*。

```
$("#txtComments").keypress(function (e) {
     var comments = "";
     // e.preventDefault(); 
```

您可以将该语句移动到您的 if 语句：

```
$("#txtComments").keypress(function (e) {
     var comments = "";
     if (e.which == 13) {
        e.preventDefault();
        comments = this.value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:24:13.107

这是因为您在每次按键时都使用了阻止默认值，

您只需要在按下回车键时执行此操作

```
if (code == 13) {
   e.preventDefault()
   //...
} 
```

这是一个小提琴：http: [//jsfiddle.net/johanhaest/q36Gg/](http://jsfiddle.net/johanhaest/q36Gg/)

# mysql - 链接mysql表

> ID：15066749
> 
> 赞同：0
> 
> 时间：2013-02-25T12:14:55.867
> 
> 标签：mysql, join

我对 mysql/php 和我还很陌生，试图从 2 个表中获取数据：

1.  organization_dep (id, orgid, depname )
2.  组织（id，组织名）

我要做的是链接表格并回显结果，因此它以包含两列的表格形式出现：`organization Name`和`organization Department Name`

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:23:41.230

您问题上的“JOIN”标签实际上是正确的关键词。

```
SELECT
    org.orgname,
    dep.depname
FROM
    organization_dep dep
    INNER JOIN organization org
        ON dep.orgid = org.id 
```

[在MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/join.html)中阅读有关连接表的更多信息。

# iphone - iOS - 从 iTunes 访问购买的视频列表

> ID：15066753
> 
> 赞同：-2
> 
> 时间：2013-02-25T12:15:01.177
> 
> 标签：iphone, ios, itunes

我想问一下如何以编程方式访问从 iTunes 购买的电影、播客、歌曲列表。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:43:20.823

您无法访问通过 iTunes 购买的电影，它们受 DRM 保护，但您可以访问购买的电影剪辑。

看看 MediaPlayer 框架。有用于查询 iTunes 数据库的 MPMediaQuery 和 MPMediaPickerController 看起来应该可以让你挑选电影但似乎只适用于歌曲。这是一个有争议的问题，因为如果它只有效，你就不能对它可以选择的电影做任何有趣的事情。

如果它只是一个演示，为什么不在 Documents 文件夹中粘贴一些非 DRMed 电影并从那里打开呢？

# c# - 循环期间未替换字符串

> ID：15066756
> 
> 赞同：1
> 
> 时间：2013-02-25T12:15:04.627
> 
> 标签：c#, string, replace

我正在为*Skype 机器人*做一个消息循环，这意味着我可以轻松地做广告/群发消息。但是，在循环中的第一个名称字符串被类中的名称替换后，它将仅使用该名称，而不会在下一个循环中替换新名称。

代码：

```
if(listView2.SelectedItems.Count<=0)
    return;

string value="Hi %name%!";
string body="";

if(Program.InputBox("New Message", "Body of the message:", ref value)==DialogResult.OK) {
    body=value;
}

foreach(ListViewItem i in listView2.SelectedItems) {
    String rawID=i.SubItems[7].ToString();
    String[] splitID=rawID.Split('}');
    String[] ID=splitID[0].Split(new char[] { '{' });

    body=body.Replace("%handle%", SkypeUser.Users[Convert.ToInt32(ID[1])].Handle);
    body=body.Replace("%name%", SkypeUser.Users[Convert.ToInt32(ID[1])].Name);
    body=body.Replace("%status%", SkypeUser.Users[Convert.ToInt32(ID[1])].Status);
    body=body.Replace("%country%", SkypeUser.Users[Convert.ToInt32(ID[1])].Country);
    body=body.Replace("%mood%", SkypeUser.Users[Convert.ToInt32(ID[1])].Mood);
    body=body.Replace("%about%", SkypeUser.Users[Convert.ToInt32(ID[1])].About);

    if(!(body==String.Empty)) {
        skype.SendMessage(SkypeUser.Users[Convert.ToInt32(ID[1])].Handle, body);
    }
} 
```

如果我选择三个人，分别是 Jim、Tim 和 Derp，那么所选列表中的第一个人就是 Jim。如果我使用`%name%`，它将在给 Jim 的消息中正确替换为“Jim”，但给 Tim 和 Derp 的消息也将包含“Jim”，而不是字符串替换`%name%`为他们的名字。

* * *

**编辑：**

我知道在循环中放置`value`和`body`if 语句；但我希望只需要输入一次消息。这就是大众信息的全部意义所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:19:42.810

以下语句应在 for 循环内。

```
 string value = "Hi %name%!";
            string body = "";
            if (Program.InputBox("New Message", "Body of the message:", ref value) == DialogResult.OK)
            {
                body = value;
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:20:41.173

第一次通过循环时，`%%`占位符被有效地销毁。如果你进去：

```
body = "Hi %name%"; 
```

在第一次迭代后你得到：

```
body = "Hi Jim"; 
```

当循环第二次运行时，它`%name%`在“Hi Jim”中搜索，没有找到要替换的内容，不理会字符串，最终将“Hi Jim”发送给 Derp。避免修改 body 的原始值，并在每次迭代中使用一个新的变量：

```
foreach (ListViewItem i in listView2.SelectedItems)
{
   string userBody = body;
   ...
   userBody = userBody.Replace("%name%", SkypeUser.Users[Convert.ToInt32(ID[1])].Name);
   ...
} 
```

另请注意，`string`C# 中的类是不可变的，这意味着循环中的每个字符串操作都会创建一个具有修改内容的字符串的新实例，并将先前的值作为垃圾进行收集。如果您进行重要的字符串操作（并且您确实这样做了），请查看[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)该类，该类旨在用于字符串操作。您的代码看起来有点像：

```
foreach (ListViewItem i in listView2.SelectedItems)
{
   StringBuilder userBodyBuilder = new StringBuilder(body);
   ...
   userBodyBuilder.Replace("%name%", SkypeUser.Users[Convert.ToInt32(ID[1])].Name);
   ...
} 
```

此代码将浪费更少的内存并且比原始代码更快，因此您将能够更有效地向您的联系人发送垃圾邮件：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:22:44.760

我认为第一次替换数据时`%XXX%`（`"%name%"`例如），下一次传入循环时，您将不再拥有它们。

在循环中使用新变量：

```
foreach[...]
{
  string currentBody = body;
  currentBody = body.Replace[...]
  [...]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:44:43.863

发送消息后再次替换字符串<3

简单的代码供您复制

```
if(SkypeUser.Users[Convert.ToInt32(ID[1])].Handle!=String.Empty) {
    body=body.Replace(SkypeUser.Users[Convert.ToInt32(ID[1])].Handle, "%handle%");
}

if(SkypeUser.Users[Convert.ToInt32(ID[1])].Name!=String.Empty) {
    body=body.Replace(SkypeUser.Users[Convert.ToInt32(ID[1])].Name, "%name%");
}

if(SkypeUser.Users[Convert.ToInt32(ID[1])].Status!=String.Empty) {
    body=body.Replace(SkypeUser.Users[Convert.ToInt32(ID[1])].Status, "%status%");
}

if(SkypeUser.Users[Convert.ToInt32(ID[1])].Country!=String.Empty) {
    body=body.Replace(SkypeUser.Users[Convert.ToInt32(ID[1])].Country, "%country%");
}

if(SkypeUser.Users[Convert.ToInt32(ID[1])].Mood!=String.Empty) {
    body=body.Replace(SkypeUser.Users[Convert.ToInt32(ID[1])].Mood, "%mood%");
}

if(SkypeUser.Users[Convert.ToInt32(ID[1])].About!=String.Empty) {
    body=body.Replace(SkypeUser.Users[Convert.ToInt32(ID[1])].About, "%about%");
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-25T12:20:27.177

那是因为您要替换循环中的字符串主体。在循环中创建一个临时变量并分配给它。

# php - 查找 HTML 块并将其分隔为数组

> ID：15066758
> 
> 赞同：1
> 
> 时间：2013-02-25T12:15:06.773
> 
> 标签：php, html, regex, parsing, dom

首先，我想描述一下这个想法 - 任何人都知道任何 CMS 或简单的网站都有某种块，例如在 wordpress 的主页上的文章列表，每个块都显示在一个信息块中：标题、作者、内容、日期等。所以主要思想是如何找到和分离这些 HTML 块并将它们中的每一个附加到一个数组中。我认为首先需要清除它们：类、ID 和样式。 **步骤1：**

```
<div id="box1">
    <h3 class="title_style">Title1</h3>
    <p>content for box1</p>
    <div class="author">Author Name1<span class="style_date">date1<span>any text</div>
</div>
<div id="box2">
    <h3 class="title_style">Title2</h3>
    <p>content for box2</p>
    <div class="author">Author Name2<span class="style_date">date2<span>any text2</div>
</div> 
```

至

```
<div>
    <h3>Title1</h3>
    <p>content for box1</p>
    <div>Author Name1<span>date1<span>any text</div>
</div>
<div>
    <h3>Title2</h3>
    <p>content for box2</p>
    <div>Author Name2<span>date2<span>any text2</div>
</div> 
```

**第2步：** 我需要找到每个块并将它们写入一个数组，这样我就可以将每个块放在表中的一行中，如下所示：（请注意，这些块几乎存在于任何站点上，所以它的标签无关紧要有，它们只是重复不同的内容和属性，只是结构相同）

```
<table>
    <tr id="block1">
        <td>Title1</td>
        <td>content for box1</td>
        <td>Author Name1</td>
        <td>date1</td>
        <td>any text</td>
    </tr>
    <tr id="block2">
        <td>Title2</td>
        <td>content for box2</td>
        <td>Author Name2</td>
        <td>date2</td>
        <td>any text</td>
    </tr>
</table> 
```

有任何想法吗 ？我需要如何做到这一点的逻辑，而不是代码本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:20:32.283

您可以使用 PHP 的 DOMDocument 类遍历文档的 DOM。

所以你可以做这样的事情：

```
 $str = <<<STR
      <div id="box1">
        <h3 class="title_style">Title1</h3>
        <p>content for box1</p>
        <div class="author">Author Name1<span class="style_date">date1</span>any text</div>
      </div>
      <div id="box2">
       <h3 class="title_style">Title2</h3>
       <p>content for box2</p>
       <div class="author">Author Name2<span class="style_date">date2</span>any text2</div>
      </div>
    STR;

    $dom = new DOMDocument();
    $dom->loadHTML($str);

$divs = $dom->getElementsByTagName('div');

foreach ($divs as $div) {
  //read child elements
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:18:06.123

试试这个库[Simple HTML Dom Parser。](http://sourceforge.net/projects/simplehtmldom/)

# sql - 返回超过 1 个值错误

> ID：15066765
> 
> 赞同：1
> 
> 时间：2013-02-25T12:15:24.713
> 
> 标签：sql, sql-server-2008-r2

我已经发布了我的 sql server 查询。当我运行这段代码时，我得到一个错误：

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

我尝试了很多方法，但仍然出错 - 我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:20:47.250

该错误非常简单。您的子查询返回超过 1 行。由于查询的工作方式，这是不允许的。子句中的事物`SELECT`不能定义多行，这必须在`FROM`子句中。

有很多方法可以解决这个问题，其中一些：

```
SELECT (SELECT MAX(field) ...)
SELECT (SELECT field ... GROUP BY field)
SELECT (SELECT TOP 1 field ...) 
```

问题是**以上所有内容**`GROUP BY`（除了可能不起作用的 可能例外）**很**可能会**返回**不需要的数据 -**原始查询中的每一行只有一行**。

您可能希望使用`XML PATH`将**所有这些值连接**到一个单元格中。

**或者，如果您对多行`JOIN`**感到满意，请**改用**：

```
SELECT someAlias.field
...
JOIN table as someAlias ON someAlias.somefield = someothertable.someotherfield 
```

**如：**

```
SELECT A.MR_EMPLOYEE_CHECKROLL_TYPE_ID
FROM   T_PR_CHECKROLL_WISE_LOG
       JOIN T_TR_CLOSING
         ON T_TR_CLOSING.CLOSING_ID = T_PR_CHECKROLL_WISE_LOG.CLOSING_ID
       JOIN T_PR_EMPLOYEE_LOG
         ON T_PR_EMPLOYEE_LOG.CLOSING_ID = T_TR_CLOSING.CLOSING_ID
       JOIN T_PR_EMPLOYEE_LOG AS A
         ON A.EMP_ID = T_PR_CHECKROLL_WISE_LOG.EMP_ID
WHERE  T_PR_CHECKROLL_WISE_LOG.CLOSING_ID = '1' 
```

# asp.net-mvc - asp.net mvc 4 - 谁调用_ViewStart.cshtml，步骤顺序是什么

> ID：15066770
> 
> 赞同：12
> 
> 时间：2013-02-25T12:15:35.750
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我是 MVC 的新手，所以请多多包涵。我试图找出谁调用 Viewstart.cshtml 以及其中涉及的步骤顺序是什么？它是在访问路由表之后还是之前调用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-25T13:51:07.547

RazorViewEngine 有一个内部只读字段“ViewStartFileName”，它指定开始视图的名称。每次呈现 RazorView 实例时（特别是在执行 RenderView() 方法时）都会调用 _ViewStart.cshtml（或 .vbhtml）。因此，“谁”将是 RazorViewEngine 及其相应的 RazorView 类（包括它们的基类）。为了对 MVC 请求管道有一个很好的了解，我推荐这个[pdf](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/be-ahead-of-the-game-poster1)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-25T12:21:03.573

检查下图...（[与 ASP.NET WebForms 相比，ASP.NET MVC 页面的“页面生命周期”是什么？](https://stackoverflow.com/questions/460145/what-is-the-page-lifecycle-of-an-asp-net-mvc-page-compared-to-asp-net-webform)）

![在此处输入图像描述](../Images/703b1a7279b85e99d33f85cb1b364ecc.png)

# java - 使用 GLPK 读取带有二进制变量的 LP 文件

> ID：15066773
> 
> 赞同：0
> 
> 时间：2013-02-25T12:15:41.350
> 
> 标签：java, optimization, solver

我正在尝试将一个非常简单的 LP 文件读入 GLPK。这个 LP 文件有 4 个变量，其中 2 个是二进制的，看起来 GLPK 对这 2 个二进制变量（HACE_MESAS、HACE_SILLAS）的读取很差。它记录：

> 警告：重新定义变量 HACE_MESAS 的下限 警告：重新定义变量 HACE_MESAS 的上限 警告：重新定义变量 HACE_SILLAS 的下限 警告：重新定义变量 HACE_SILLAS 的上限

它解决得不好，因为将实际值赋予这两个变量：

```
HACE_MESAS = 0.01
HACE_SILLAS = 0.02 
```

LP文件是这样的：

```
Maximize
 obj: 5 MESAS + 3 SILLAS
Subject To
 IloC0: MESAS + 2 SILLAS >= 0
 IloC1: MESAS + 2 SILLAS <= 50
 IloC2: 2 MESAS + SILLAS >= 0
 IloC3: 2 MESAS + SILLAS <= 40
 IloC4: MESAS - 1000 HACE_MESAS <= 0
 IloC5: SILLAS - 1000 HACE_SILLAS <= 0
 IloC6: HACE_MESAS + HACE_SILLAS <= 1
Bounds
      MESAS >= 0
      SILLAS >= 0
 0 <= HACE_MESAS <= 1
 0 <= HACE_SILLAS <= 1
Binaries
 HACE_MESAS  HACE_SILLAS 
Generals
 MESAS  SILLAS 
End 
```

谁能告诉我我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:06:00.983

只需删除多余的界限（它们是不必要的，但正如您所见会造成麻烦）

```
 0 <= HACE_MESAS <= 1
 0 <= HACE_SILLAS <= 1 
```

也就是说，我运行这个模型：

```
Maximize
 obj: 5 MESAS + 3 SILLAS
Subject To
 IloC0: MESAS + 2 SILLAS >= 0
 IloC1: MESAS + 2 SILLAS <= 50
 IloC2: 2 MESAS + SILLAS >= 0
 IloC3: 2 MESAS + SILLAS <= 40
 IloC4: MESAS - 1000 HACE_MESAS <= 0
 IloC5: SILLAS - 1000 HACE_SILLAS <= 0
 IloC6: HACE_MESAS + HACE_SILLAS <= 1
Bounds
      MESAS >= 0
      SILLAS >= 0
Binaries
 HACE_MESAS  HACE_SILLAS 
Generals
 MESAS  SILLAS 
End 
```

一切都按预期工作：

```
Problem:    
Rows:       7
Columns:    4 (4 integer, 2 binary)
Non-zeros:  14
Status:     INTEGER OPTIMAL
Objective:  obj = 100 (MAXimum)

   No.   Row name        Activity     Lower bound   Upper bound
------ ------------    ------------- ------------- -------------
     1 IloC0                      20             0               
     2 IloC1                      20                          50 
     3 IloC2                      40             0               
     4 IloC3                      40                          40 
     5 IloC4                    -980                           0 
     6 IloC5                       0                           0 
     7 IloC6                       1                           1 

   No. Column name       Activity     Lower bound   Upper bound
------ ------------    ------------- ------------- -------------
     1 MESAS        *             20             0               
     2 SILLAS       *              0             0               
     3 HACE_MESAS   *              1             0             1 
     4 HACE_SILLAS  *              0             0             1 

Integer feasibility conditions:

KKT.PE: max.abs.err = 0.00e+00 on row 0
        max.rel.err = 0.00e+00 on row 0
        High quality

KKT.PB: max.abs.err = 0.00e+00 on row 0
        max.rel.err = 0.00e+00 on row 0
        High quality

End of output 
```

# wordpress - 高级自定义字段 - 复选框值消失

> ID：15066777
> 
> 赞同：0
> 
> 时间：2013-02-25T12:15:48.323
> 
> 标签：wordpress

当我尝试添加带有复选框的高级自定义字段时，值会在保存时消失。

我添加一个新字段，选择复选框选项，输入一些数据（蓝色：蓝色，红色：红色等），然后点击更新。但是当我这样做时，所有数据都会被删除。其他类型，如单选按钮、选择和 True / False 可以完美运行。请参见下面的示例：

![复选框错误](../Images/71e8e12de6f4ed3100beba98ce68803e.png) [例子](https://i.imgur.com/f48bqo5.png)

有任何想法吗？

ACF 版本：v3.5.8.1 WP 版本：3.5.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:40:17.297

通过从 Github 下载最新版本解决了问题。

# php - 如何以编程方式创建 LinkedIn 小组讨论？

> ID：15066781
> 
> 赞同：-3
> 
> 时间：2013-02-25T12:15:58.667
> 
> 标签：php, linkedin, modx-evolution

我希望与 LinkedIn Groups API 交互，以便使用 PHP 以编程方式将内容添加到我的组页面。典型的流程是：

1.  检测 CMS 何时在我的网站上发布新项目
2.  提取新闻项目的标题、描述和 URL
3.  使用 LinkedIn API 进行身份验证
4.  在我的 LinkedIn 组中创建一个新的讨论线程（使用步骤 2 中的信息）

我使用 MODx 作为 CMS，可以轻松编写步骤 1 和 2。至于 LinkedIn 部分，我不知所措。使用搜索（Google 和 SO），我只遇到不完整的代码片段，几乎没有解释。

使用 LinksAlpha 之类的第三方应用程序是可以接受的。但是他们只提供一个 WordPress 插件。遗憾的是，适应不同 CMS 的文档不足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:52:43.010

Linked In 使用 OAuth 作为身份验证手段，他们[在文档中以合理的详细程度详细介绍了这些步骤](http://developer.linkedin.com/documents/authentication)。

有一个关于如何在 Linked In API 文档上[创建小组讨论的示例。](http://developer.linkedin.com/documents/groups-api#create)本质上，您 POST 到`http://api.linkedin.com/v1/groups/{group-id}/posts`XML 描述新帖子，形式为：

```
<post>
  <title>New Group Discussion</title>
  <summary>What does everyone think about platform development?</summary>
  <content>
    <submitted-url>http://developer.linkedin.com</submitted-url>
    <title>Build the Professional Web with LinkedIn</title>
    <description>A great resource for finding documentation and answers related to developing on the LinkedIn Platform</description>
  </content>
</post> 
```

# matlab - 将字符矩阵转换为数字矩阵

> ID：15066783
> 
> 赞同：0
> 
> 时间：2013-02-25T12:16:04.470
> 
> 标签：matlab

我必须从一个 7 位数字的串联中生成一个 4 x 7 的随机矩阵，然后对生成的矩阵进行一些操作。但是，矩阵由字符组成。我将如何将其转换为数字以使其保持不变（即二进制）。目前我拥有的代码是：

```
t = dec2bin(12426171242617,28);
Gran = [t(1:7);t(8:14);t(15:21);t(22:28)] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:20:41.830

你可以这样做：

`Gran2 = (Gran == '1');`

这给出了一个逻辑矩阵。如果你想要一个双打矩阵：

`Gran3 = 1*Gran2;`

# python - 来自谷歌的 Python 请求以希伯来语返回

> ID：15066785
> 
> 赞同：1
> 
> 时间：2013-02-25T12:16:07.853
> 
> 标签：python

当我使用（来自以色列 IP 地址）时：

```
requests.get('https://accounts.google.com/ServiceLogin') 
```

响应是希伯来语的（在隐身模式下的浏览器中也可以看到）

我想以某种方式指定 get 方法，一个参数，意思是“我想用英文得到响应”。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:18:56.383

尝试

```
requests.get('https://accounts.google.com/ServiceLogin?lp=1&hl=en') 
```

（注意底部的语言选择器）

# ios - 单击按钮时在 tableViewCell 中配置数据

> ID：15066788
> 
> 赞同：0
> 
> 时间：2013-02-25T12:16:22.630
> 
> 标签：ios, objective-c, uitableview, uilabel

我正在`UITableViewCell`使用我的 coreData 属性配置 a 。我能够显示文本。但我想在单击按钮时用其他数据重新加载单元格。

```
-(void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
  Book *entity = [self.fetchedResultsController objectAtIndexPath:indexPath];
  firstLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 10, 120, 21)];
  secondLabel = [[UILabel alloc]initWithFrame:CGRectMake(120, 10, 120, 21)];

  firstLabel.text = entity.title;
  secondLabel.text = entity.author;

  [cell.contentView addSubview:firstLabel];
  [cell.contentView addSubview:secondLabel];

  //On button Click i want to change firstLabel.text = entity.date and secondlabel.text =   entity.details

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:19:43.117

试试这个代码..

设置全局变量

```
int buttonCliked; 
```

设置按钮的操作

```
- (IBAction)aaaa:(id)sender
{
    buttonCliked =1;
    [_myTable reloadData];
} 
```

用数据加载 tableviewCell

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

Book *entity = [self.fetchedResultsController objectAtIndexPath:indexPath];

firstLabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 10, 120, 21)];
secondLabel = [[UILabel alloc]initWithFrame:CGRectMake(120, 10, 120, 21)];

if(!buttonClicked)
{
    firstLabel.text = entity.title;
    secondLabel.text = entity.author;
}
else
{
    firstLabel.text =  entity.date;
    secondLabel.text = entity.details;

    if(indexPath.row >= [tableView numberOfRowsInSection:indexPath.section] && indexPath.section >= [tableView numberOfSections])
    {
        buttonCliked =0;
    }

}

[cell.contentView addSubview:firstLabel];
[cell.contentView addSubview:secondLabel];

return cell;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-20T10:32:56.393

1）使用所有按钮创建一个自定义单元格

2) 为您喜欢的每个事件创建一个枚举（即 SendType、LikeType 等）

3）为您的单元创建一个协议，并且委托必须是每个单元的控制器。

4）您的六个按钮的操作必须保留在单元格中，并且单元格将调用其代表，为您的事件类型传递一个 ENUM，PLUS 单元格参考。

5) 控制器将被所需的协议方法调用，并使用单元格引用和事件类型决定做什么。

即1）创建一个自定义单元格（ContactCell）并添加：

```
property (id<TapOnSixButtonsProtocol>) tapDelegate;

  - (void)fillCellWithID:(NSString*)ID
             idContact: (NSString*)idContact
          withDelegate: (id<TapOnSixButtonsProtocol>) tapDelegate;
{
    self.tapDelegate = tapDelegate 
```

2)

```
typedef NS_ENUM(NSInteger, CustomTypeOfEvent) {
    Like = 1,
    Send =  2,..
}; 
```

3)

```
 @protocol TapOnSixButtonsProtocol <NSObject>
    -(void)didClickonCell: (CustomCell*)cell withType:(CustomTypeOfEvent)t;
    @end 
```

4)

```
self.Btn1 = [UIButton buttonWithType:UIButtonTypeCustom];
[self.Btn1  addTarget:self
                  action:@selector(tapped:)
        forControlEvents:UIControlEventTouchUpInside];
self.Btn1.tag = Like;
(repeat for all...) 
```

..

```
 void tapped:(UIBUtton*)sender{
        CustomTypeOfEvent t = sender.tag // get back type..
        [self.tapDelegate didClickOnCell: self withType]; 
```

5）在控制器中：

在： - (UITableViewCell *)tableView:(UITableView *)tableView

```
cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  ContactCell cell = [tableView dequeueReusable..
   [cell fillCellWithID: @"234444"
                 idContact: "67899999"
              withDelegate: self];

//delegate:
    -(void)didClickOnCell: (CustomCell*)cell withType:(CustomTypeOfEvent)t {
       switch(t){...
    } 
```

# php - 在 Wordpress 中调用外部 PHP 时出现 403 禁止

> ID：15066790
> 
> 赞同：0
> 
> 时间：2013-02-25T12:16:33.197
> 
> 标签：php, http-status-code-403

我在 Wordpress 中创建了一个新页面。在此页面上，我放置了以下 HTML 代码：

```
Please click this <a href="http://sitename.com/blog/wp-content/themes/twentytwelve/statistics.php" title="link">link</a> to view the details. 
```

statistics.php 具有查询后端 MySQL 数据库、获取详细信息并以表格格式显示的代码。

但是，当我单击 Wordpress 页面上的链接时，我会收到一条 403 禁止消息。

```
Forbidden

You don't have permission to access /blog/wp-content/themes/twentytwelve/statistics.php on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

我尝试将 PHP 文件的权限设置为 644 和 755。错误仍然存​​在。

我什至尝试在 PHP 文件中添加这样的简单代码：

```
<?php echo "welcome"?> 
```

即使那样，同样的 403 禁止错误。

现在，我在这个 Wordpress 网站上有另一个页面。在该页面中，我有一个 HTML 表单，它向名为 process.php 的 PHP 文件发送 POST 请求，该文件与 statistics.php 位于同一目录中。该页面正常工作。

因此，我尝试将新页面中的 URL 从 statistics.php 替换为 process.php。这不会给出 403 禁止错误。

为什么我无法从我的 wordpress 页面访问一个 PHP 文件？我是否只允许从 wordpress 页面链接到一个外部 PHP 文件？

statistics.php 和 process.php 具有相同的权限。然而，虽然一个页面能够轻松访问 process.php，但另一个页面却给出了 statistics.php 的错误。

帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:23:12.167

您的脚本所在的目录不可读，也不应该如此。wordpress用来存放主题的，这个目录只能被wordpress读取，以便将主题输出到前端。

尝试将您的脚本放在 WordPress 不控制/不需要的目录中。即，在您的公共根目录上，创建一个新的可读目录并将您需要的任何脚本放在该目录下。

# ios - UIImageView 动画启动并出现内存不足警告

> ID：15066795
> 
> 赞同：0
> 
> 时间：2013-02-25T12:16:45.353
> 
> 标签：ios, objective-c, xcode, uiimageview, uianimation

我的 ImageView 动画有问题。在我看来，有超过 10 个视图，每个视图都从它的标签值中识别出来，我有`UIImageView`和`UIButton`. 当点击按钮时，必须为视图的特定图像设置动画。如果任何其他图像被动画化，则必须停止。这是我的代码：

```
-(void)makeAnimation:(UIButton *)sender {

UIView *tagView=(UIView *)[self.view viewWithTag:sender.tag];
UIView *next=nil;
UIView *previous=nil;

NSLog(@"%d",sender.tag);
for (UIImageView * imageview in [tagView subviews]) {
     if ([imageview isKindOfClass:[UIImageView class]]) {

        if ([imageview isAnimating]) {
            NSLog(@"Animation Happens");

        }

        else{

            imageview.animationDuration=2.0;

            imageview.animationImages=[animationArray objectAtIndex:sender.tag-1];
            imageview.animationRepeatCount=2;
            imageview.tag=sender.tag;
            [imageview startAnimating];
        }
    }

}
   next=(UIView*)[self.view viewWithTag:sender.tag+1];
    previous=(UIView*)[self.view viewWithTag:sender.tag-1];
    NSLog(@"NOT IDEA");

    [self previousview:previous nextview:next];
 }

-(void)previousview:(UIView *)previous nextview:(UIView*)next
{
for (UIImageView * imageview in [previous subviews]) {

    if ([imageview isKindOfClass:[UIImageView class]]) {

        [imageview stopAnimating];
        NSLog(@"PRREVIOUS");

              }

}

for (UIImageView * imageview in [next subviews]) {

    if ([imageview isKindOfClass:[UIImageView class]]) {

        [imageview stopAnimating];
        NSLog(@"NEXT");

     }
   }
} 
```

现在我的问题是当我一个接一个地选择超过 4 个按钮时，我的应用程序因内存警告而崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:58:32.627

在运行时使用配置文件找到泄漏的确切位置并使用@autorelease{}手动处理内存就像这样..

```
-(void)makeAnimation:(UIButton *)sender {
@autorelease{
UIView *tagView=(UIView *)[self.view viewWithTag:sender.tag];
UIView *next=nil;
UIView *previous=nil;

NSLog(@"%d",sender.tag);
for (UIImageView * imageview in [tagView subviews]) {
     if ([imageview isKindOfClass:[UIImageView class]]) {

        if ([imageview isAnimating]) {
            NSLog(@"Animation Happens");

        }

        else{

            imageview.animationDuration=2.0;

            imageview.animationImages=[animationArray objectAtIndex:sender.tag-1];
            imageview.animationRepeatCount=2;
            imageview.tag=sender.tag;
            [imageview startAnimating];
        }
    }

}
   next=(UIView*)[self.view viewWithTag:sender.tag+1];
    previous=(UIView*)[self.view viewWithTag:sender.tag-1];
    NSLog(@"NOT IDEA");

    [self previousview:previous nextview:next];
}
 } 
```

# asp.net-mvc - SQL Server 表 ID 接近最大长度

> ID：15066796
> 
> 赞同：1
> 
> 时间：2013-02-25T12:16:55.670
> 
> 标签：asp.net-mvc, sql-server-2008, entity-framework, long-integer, sqldatatypes

我有 SQL Server 2008 的代码优先 MVC 4 应用程序。

我的一张表用得很多，所以每天都有很多数据存储在上面，一段时间后我删除了旧数据。这就是为什么，元素的`ID`迅速增加。

我将其定义`ID`为`int`模型中的类型。我担心桌子会在一段时间后填满。

如果表 ID 将达到最大长度，我该怎么办？我从来没有遇到过这种情况。

我的第二个问题是，如果我将 ID 的类型从类型更改`int`为`long`导出导入数据库，这种`long`类型会影响（降低）站点的速度吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T12:19:04.290

如果您使用从 1 开始的值，并且您**每秒**、一年中的每一天、全年都`INT IDENTITY`插入一行- 那么您需要 66.5**年**才能达到 20 亿的限制...

 ****如果你害怕 - 这个命令告诉你什么？

```
SELECT IDENT_CURRENT('your-table-name-here') 
```

你***真的***接近 2,147,483,647 - 还是你还有很长的路要走？

如果您应该“太接近”：您始终可以将列的数据类型更改为`BIGINT`- 如果您使用从 1 开始的 a，并且您**每秒**`BIGINT IDENTITY`插入一千行，您需要一个令人难以置信的**2.92 亿年**才能达到922 万亿极限....

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:02:18.787

据我所知，目前还没有任何有效的方法来防止达到自动增加身份的限制。您可以将其设置为足够大的数据类型，以便在创建表时持续很长时间。但是，这是我能想到的一种解决方案。

创建一个具有相同数据结构的新临时表，其中已包含自动增量列并设置为主键。然后，在 Management Studio 中，将数据从旧表导入到新表中。当您被要求复制数据或编写自己的查询时，只需选择编写查询，然后从旧表中选择除 ID 之外的所有内容。这可以将身份重置为从 1 开始。之后您可以删除旧表并重命名新的临时表。虽然您必须右键单击数据库本身才能访问导入和导出命令，但您可以在选项中将源数据库和目标数据库设置为相同。

这种方法非常简单，我自己做过几次。********

# facebook - Facebook Like Box - 如何在不登录的情况下使其显示？

> ID：15066803
> 
> 赞同：0
> 
> 时间：2013-02-25T12:17:08.990
> 
> 标签：facebook, cross-browser, facebook-like, facebook-social-plugins

```
<%--Facebook Like Box--%>
   <div class="fb_iframe_widget">
        <iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fpages%2FRumour-Entertainments-Agency%2F63822323174&amp;width=260&amp;height=350&amp;show_faces=false&amp;colorscheme=light&amp;stream=true&amp;border_color&amp;header=true&amp;appId=123233914444256" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:260px; height:350px;" allowTransparency="true"></iframe>
    </div> 
```

看起来脸书又在修修补补了！如果您的网站上有一个赞框，它只会在您登录 facebook 时才会显示！有什么意义呢？如果一个人没有脸书怎么办？有没有办法在网站上保留点赞框，而无需登录 facebook 来查看点赞框？

如果有的话，我没有通过 facebook 安全检查吗？不知道比以前有什么变化，现在有点不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:30:30.117

我认为原因是您指的是需要身份验证的页面。我看到你的 URL 的 src 属性值如下：

[http://www.facebook.com/pages/FRumour-Entertainments-Agency/63822323174](http://www.facebook.com/pages/FRumour-Entertainments-Agency/63822323174)

当您在浏览器中单独尝试时，它需要身份验证

# c# - 进度条线程在执行后不会中止，应用程序崩溃-WPF

> ID：15066804
> 
> 赞同：2
> 
> 时间：2013-02-25T12:17:10.950
> 
> 标签：c#, wpf, progress-bar

当用户尝试登录系统时，我试图显示进度条。在操作期间，我向用户显示进度条窗口。我使用后台工作人员做到了这一点，它可以工作。但有时系统崩溃。似乎 Windows 8 正在制造这个问题。因为它在 Windows 7 中运行而没有任何错误。这是我的 loadingview.xaml.cs 代码，其中包含与进度条相关的代码

```
public partial class LoadingViewControl : Window
{
    System.ComponentModel.BackgroundWorker mWorker;

    public LoadingViewControl()
    {
        InitializeComponent();
        Load();
    }

    public LoadingViewControl(bool Close)
    {
        this.Close();
    }
    public void Load()
    {
        mWorker = new System.ComponentModel.BackgroundWorker();
        mWorker.DoWork += new System.ComponentModel.DoWorkEventHandler(worker_DoWork);
        mWorker.ProgressChanged += new System.ComponentModel.ProgressChangedEventHandler(worker_ProgressChanged);
        mWorker.WorkerReportsProgress = true;
        mWorker.WorkerSupportsCancellation = true;
        mWorker.RunWorkerCompleted += new System.ComponentModel.RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
        mWorker.RunWorkerAsync();

        while (pbProcessing.Value < 99)
        {
            if (!mWorker.CancellationPending)
            {
                try
                {
                    if (pbProcessing.Value > 95)
                    {
                        mWorker.CancelAsync();
                        //Uri uri = new Uri("/View/LoginchildView.xaml", UriKind.Relative);
                        break;
                    }
                    else
                    {
                    pbProcessing.Value = (pbProcessing.Value + 0.005) % 100;
                    }
                }
                catch (System.Exception ex)
                {
                    // No action required
                }
            }
            else
            {
                break;
            }

            System.Windows.Threading.Dispatcher.CurrentDispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Background,
                                   new System.Threading.ThreadStart(delegate { }));
        }           
    }

    private void worker_DoWork(object sender, System.ComponentModel.DoWorkEventArgs e)
    {
        // Do your work here, its on seperate thread          
    }

    private void worker_ProgressChanged(object sender, System.ComponentModel.ProgressChangedEventArgs e)
    {
        pbProcessing.Value = e.ProgressPercentage;
    }

    private void worker_RunWorkerCompleted(object sender, System.ComponentModel.RunWorkerCompletedEventArgs e)
    {
        // Stop Progressbar updatation             
    }

    private void LoadingViewControl_Load(object sender, EventArgs e)
    {
        SetFocus();
    }

    public void SetFocus()
    {
        this.Focus();
        this.Activate();
    }
} 
```

现在，我将向您展示实现进度条的 Loginviewform.xaml.cs 代码。

```
 if (txtUserName.Text != "")
        {
            if (txtPassword.Password != "")
            {

                if (STAThread == null)
                {
                    STAThread = new Thread(() => { new LoadingViewControl().ShowDialog(); });
                    STAThread.SetApartmentState(ApartmentState.STA);
                    STAThread.IsBackground = true;
                    STAThread.Start();
                }
                else
                {
                    STAThread.SetApartmentState(ApartmentState.STA);
                    STAThread.IsBackground = true;
                    STAThread.Start();
                }

                result = User.Instance.Authenticicate(txtUserName.Text, txtPassword.Password);
                if (result == true)
                {

                    pbProcessing.Value = 100;
                    ServiceLocator.Current.GetInstance<ContainerViewModel>().ExecuteLobbyBasicViewCommand();

                    //redirect on specific page.
                    if (STAThread.IsAlive)
                    {
                        Thread.CurrentThread.Interrupt();
                        STAThread.Interrupt();
                        STAThread.Abort();
                        STAThread = null;
                    }
                    PopUp objpopup = new PopUp();
                    objpopup.txtNotice.Text = "sign in";
                    objpopup.txtMessage.Text = "successfully sign in.";
                    objpopup.ShowDialog();
                    Global.GetUserName = txtUserName.Text;
                }
                else
                {
                    //MessageBox.Show("Sign In was unsuccessful. Please correct the errors and try again.", "Error", MessageBoxButton.OK, MessageBoxImage.Error);

                    STAThread.Abort();
                    STAThread = null;
                    PopUp objPopUp = new PopUp();
                    objPopUp.txtNotice.Text = "Error";
                    objPopUp.txtMessage.Text = "Sign In was unsuccessful. Please correct the errors and try again.";
                    objPopUp.ShowDialog();
                    txtUserName.Focus();
                    //pbProcessing.Value = 0;
                    stackpanelLoading.Visibility = System.Windows.Visibility.Hidden;
                }
            }
            else
            {
                //MessageBox.Show("Please enter the valid Password.", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
                PopUp objPopUp = new PopUp();
                objPopUp.txtNotice.Text = "Error";
                objPopUp.txtMessage.Text = "Please enter the valid Password.";
                objPopUp.ShowDialog();
                txtPassword.Focus();
                stackpanelLoading.Visibility = System.Windows.Visibility.Hidden;
            }
        }
        else
        {
            //MessageBox.Show("Please enter the valid Player ID.", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
            PopUp objPopUp = new PopUp();
            objPopUp.txtNotice.Text = "Error";
            objPopUp.txtMessage.Text = "Please enter the valid Player ID.";
            objPopUp.ShowDialog();
            txtUserName.Focus();
            stackpanelLoading.Visibility = System.Windows.Visibility.Hidden;
        } 
```

知道出了什么问题吗？任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:01:26.113

这是非常奇怪的代码。尝试像这样重构它：

```
public partial class LoadingViewControl : Window
{
    public LoadingViewControl(string userName, string password)
    {
        InitializeComponent();
        Initialize(userName, password);
    }

    private void Initialize(string userName, string password)
    {
        pbProcessing.IsIndeterminate = true;
        var thread = new Thread(() =>
                                    {
                                        DialogResult = User.Instance.Authenticicate(userName, password);
                                        Close();
                                    });
        thread.IsBackground = true;
        thread.Start();
    }
} 
```

还有一些方法：

```
public void Do()
        {
            if (string.IsNullOrEmpty(txtUserName.Text))
            {
                if (string.IsNullOrEmpty(txtPassword.Password))
                {
                    var view = new LoadingViewControl(txtUserName.Text, txtPassword.Password);
                    result = view.ShowDialog();
                    if (result == true)
                    {
                        ServiceLocator.Current.GetInstance<ContainerViewModel>().ExecuteLobbyBasicViewCommand();
                        PopUp objpopup = new PopUp();
                        objpopup.txtNotice.Text = "sign in";
                        objpopup.txtMessage.Text = "successfully sign in.";
                        objpopup.ShowDialog();
                        Global.GetUserName = txtUserName.Text;
                    }
                    else
                    {
                        //MessageBox.Show("Sign In was unsuccessful. Please correct the errors and try again.", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
                        PopUp objPopUp = new PopUp();
                        objPopUp.txtNotice.Text = "Error";
                        objPopUp.txtMessage.Text = "Sign In was unsuccessful. Please correct the errors and try again.";
                        objPopUp.ShowDialog();
                        txtUserName.Focus();
                        stackpanelLoading.Visibility = Visibility.Hidden;
                    }
                }
                else
                {
                    PopUp objPopUp = new PopUp();
                    objPopUp.txtNotice.Text = "Error";
                    objPopUp.txtMessage.Text = "Please enter the valid Password.";
                    objPopUp.ShowDialog();
                    txtPassword.Focus();
                    stackpanelLoading.Visibility = Visibility.Hidden;
                }
            }
            else
            {
                PopUp objPopUp = new PopUp();
                objPopUp.txtNotice.Text = "Error";
                objPopUp.txtMessage.Text = "Please enter the valid Player ID.";
                objPopUp.ShowDialog();
                txtUserName.Focus();
                stackpanelLoading.Visibility = Visibility.Hidden;
            }
        } 
```

这种方法看起来很难看，您必须将其重构为。但我只想展示主要思想

# hibernate - 子插入在一对多休眠映射中失败（因为子中的唯一键）但父仍然保持不变

> ID：15066808
> 
> 赞同：0
> 
> 时间：2013-02-25T12:17:26.460
> 
> 标签：hibernate, unique-constraint, one-to-many

我在 BookShelf 和 Book 之间有一对多的关系。book 表中的 ISBN 号是一个唯一字段。现在，当我尝试插入带有一组书籍的书架（具有相同的 isbn 编号）时，我得到了一个违反约束的异常，并且未插入书籍表中的记录。我的问题是，货架记录仍然被插入。hibernate 不会在事务或批次中插入一个书架记录及其对应的书籍记录。我想要的是，如果由于重复条目而导致书籍表中的插入失败，那么书架表中的记录不会被插入。任何机构都可以告诉我如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T06:15:26.517

如果您不使用 JTA，请检查您的 persistence.xml，您的事务类型应为 RESOURCE_LOCAL

`<persistence-unit name="PU" transaction-type="RESOURCE_LOCAL">
<non-jta-data-source>java:/comp/env/jdbc/DS</non-jta-data-source>`

检查这个样本

```
EntityManagerFactory emf = Persistence
        .createEntityManagerFactory("PU");
EntityManager em = emf.createEntityManager();
try {
  em.setFlushMode(FlushModeType.COMMIT);
  em.getTransaction().begin();

  BookShelf bs = new BookShelf();
  bs.setName("Adventure");

  Book b1 = new Book();
  b1.setTitle("Spider Man");
  bs.addBook(b1);

  Book b2 = new Book();
  b2.setTitle("Spider Man"); //Duplicate 
  bs.addBook(b2);

  em.persist(bs);
  try {
    em.getTransaction().commit();
  } catch (Throwable t) {
    t.printStackTrace();
    em.getTransaction().rollback();  
  }
} catch (Throwable t2) {
  t2.printStackTrace();
} finally {
  em.close();
  emf.close();
} 
```

书架.java

```
@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy = "bookShelf")    
private List<Book> bookList;

public void addBook(Book book) {    
if (bookList == null) {
  bookList = new java.util.ArrayList<Book>();
}
book.setBookShelf(this);
bookList.add(book);       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:28:35.820

阅读[Hibernate 官方文档的事务和并发](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#transactions)一章，并使用您在其中找到的程序化事务管理原则（13.2.1）：

```
Session sess = factory.openSession();
Transaction tx = null;
try {
    tx = sess.beginTransaction();
    //do your database work
    tx.commit();
}
catch (RuntimeException e) {
    if (tx != null) tx.rollback();
    throw e; // or display error message
}
finally {
    sess.close();
} 
```

否则，请寻找将为您处理事务和会话管理的容器管理事务。

# c# - Window.Loaded - ShowDialog() - 无法执行操作

> ID：15066809
> 
> 赞同：2
> 
> 时间：2013-02-25T12:17:29.693
> 
> 标签：c#, wpf, invalidoperationexception, showdialog

## 描述

你好，我一直在网上搜索这方面的信息，但没有找到任何可以修复它的东西。

我想在我的主窗口加载时显示一个对话框，因此我为我`MainWindow`的 Loaded 事件分配了一个事件处理程序。处理程序如下：

```
private void Window_Loaded(object sender, RoutedEventArgs e) {
    if (Settings.Instance.GetBool(ConfigFunctionalityGroup, "CheckForUpdatesOnStartup")) {
        worker = new BackgroundWorker();
        worker.DoWork += worker_DoWork;
        worker.ProgressChanged += worker_ProgressChanged;
        worker.WorkerReportsProgress = true;
        worker.RunWorkerAsync();
    }

    findandreplacedialog = new FindAndReplaceDialog() { Owner = this };

    Open_Environment_Click(null, null);
} 
```

`Open_Environment_Click`是菜单项的事件处理程序，编写如下：

```
private void Open_Environment_Click(object sender, RoutedEventArgs e) {
    SelectEnvironmentDialog dialog = new SelectEnvironmentDialog(Environments);

    if (dialog.ShowDialog().Value == true) {
        dialog.SelectedEnvironment.Open();
    }
} 
```

## 例外

当我在中调用`ShowDialog`of 对话框时发生异常`Open_Environment_Click`。

异常详情如下：

```
 System.InvalidOperationException was unhandled
  HResult=-2146233079
  Message=Cannot perform this operation while dispatcher processing is suspended.
  Source=WindowsBase
  StackTrace:
       at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
       at System.Windows.Window.ShowHelper(Object booleanBox)
       at System.Windows.Window.Show()
       at System.Windows.Window.ShowDialog()
       at UnrealSed.MainWindow.Open_Environment_Click(Object sender, RoutedEventArgs e) in c:\Users\ZéLuís\Documents\Visual Studio 2012\Projects\Unreal Sed\UnrealSed\MainWindow.xaml.cs:line 610
       at UnrealSed.MainWindow.Window_Loaded(Object sender, RoutedEventArgs e) in c:\Users\ZéLuís\Documents\Visual Studio 2012\Projects\Unreal Sed\UnrealSed\MainWindow.xaml.cs:line 89
       at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
       at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
       at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
       at System.Windows.UIElement.RaiseEvent(RoutedEventArgs e)
       at System.Windows.BroadcastEventHelper.BroadcastEvent(DependencyObject root, RoutedEvent routedEvent)
       at System.Windows.BroadcastEventHelper.BroadcastLoadedEvent(Object root)
       at MS.Internal.LoadedOrUnloadedOperation.DoWork()
       at System.Windows.Media.MediaContext.FireLoadedPendingCallbacks()
       at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()
       at System.Windows.Media.MediaContext.RenderMessageHandlerCore(Object resizedCompositionTarget)
       at System.Windows.Media.MediaContext.RenderMessageHandler(Object resizedCompositionTarget)
       at System.Windows.Media.MediaContext.Resize(ICompositionTarget resizedCompositionTarget)
       at System.Windows.Interop.HwndTarget.OnResize()
       at System.Windows.Interop.HwndTarget.HandleMessage(WindowMessage msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Interop.HwndSource.HwndTargetFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.Dispatcher.LegacyInvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.HwndSubclass.DefWndProcWrapper(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
  InnerException: 
```

## 更多细节

有趣的是，当我在 's 的构造函数中的新窗口上调用 Show 时，我没有收到错误`MainWindow`，维护上面的代码（只需在构造函数中添加这一行）：

```
new GotoDialog().Show(); 
```

请注意，我没有缩短提供的任何代码，`ShowDialog`不是自定义的，也不是打开窗口`Loaded`而是从菜单工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T12:28:02.607

您可能遇到了这个问题，因为`ShowDialog`当 WPF 忙于计算布局时代码调用。在布局调度程序处理暂停期间，这意味着不能处理任何窗口管理器消息（因此您不能显示对话框，因为这样做依赖于正在处理的消息）。

通常，解决这个问题的方法是简单地安排操作（在这种情况下，`ShowDialog`），只要有可能，就可以使用类似的东西

```
Dispatcher.CurrentDispatcher.BeginInvoke((Action)(...)); 
```

但是，您不能在此处执行此操作，因为您希望同步提供对话框的结果。而且你不能使用`Invoke`，因为那会抛出或死锁（我没有尝试过）。

您可以整体`BeginInvoke`调用：`Open_Environment_Click`

```
Dispatcher.CurrentDispatcher.BeginInvoke(
    new Action(() => Open_Environment_Click(null, null))); 
```

# c# - 来自具有特定延迟的线程的方法调用

> ID：15066810
> 
> 赞同：2
> 
> 时间：2013-02-25T12:17:34.647
> 
> 标签：c#, multithreading, thread-synchronization

我需要同步一个方法调用，以便线程可以在 500 毫秒睡眠后调用这个方法。我有 10 个可能同时运行的线程，所以简单地引入`Thread.Sleep(500)`并没有帮助。我怎样才能以最简单的方式实现这一目标？你有什么建议？

```
_pool = new Semaphore(0, 10);
_pool.Release(10);
...
pool.WaitOne();

Thread thr = new Thread(WorkerThread);
t.Start(param);
...
public static void WorkerThread(object parameterData)
{
    ...
    MethodToBeSynced();
    ...
    _pool.Release();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:53:04.427

如果您知道并发线程的数量（并且考虑到它们大约在同一时间开始），您可以将 a`Barrier`与`PostPhaseAction`委托一起使用。

```
 var barrier = new Barrier(10, (x) => Thread.Sleep(500)); 
```

屏障一直等到 10 个线程处于某个代码点，一旦发生这种情况，每个线程将休眠 500 毫秒，然后继续。

如果确切的线程数未知，您可以指定等待超时以不阻塞无限。

```
// Waits up until N threads are at the barrier or after the timeout has elapsed.
 _barrier.SignalAndWait(500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:39:19.870

使用 System.Threading.Timer

您可以给它一个回调函数以及调用此函数的时间间隔。

# objective-c - 从父调用子覆盖方法

> ID：15066816
> 
> 赞同：0
> 
> 时间：2013-02-25T12:17:47.860
> 
> 标签：objective-c

我很难找到在Objective-C中实现类似于抽象类的方法。

我实际上并不关心限制使用我的基类而不对其进行子类化，我想要的是：我想要具有类似方法的 A 类（父/基/抽象），`- (void)makeRequest`并且我想在 B 类中对其进行子类化,C,D 等，并且具有`- (id)getCachedResult`从类的 A 方法调用的方法。所以基本上我希望A类实现一些基本逻辑，我希望它的子类修改这个基本逻辑的一些细节和部分。

听起来很琐碎，但我无法确定在 Objective-C 中实现这种模式的方法。

更新：

这是我正在尝试做的事情：

```
@interface A : NSObject

- (void)makeRequest;
- (NSString *)resultKey;

@property (strong) NSMutableDictionary * result;

@end

@implementation A

- (void)makeRequest
{
    self.result[self.resultKey] = @"Result";
}

- (NSString *)resultKey
{
    @throw [NSException exceptionWithName:NSInternalInconsistencyException
                                   reason:[NSString stringWithFormat:@"%@ should be overrided in subclass", NSStringFromSelector(_cmd)]
                                 userInfo:nil];
    return nil;
}

@end

/////////////////////////////

@interface B : A

@end

@implementation B

- (NSString *)resultKey
{
    return @"key";
}

@end 
```

当我创建 B 类的实例并尝试调用它的方法时`- (void)makeRequest`，我遇到了异常，这很明显。我想要的是一种为相同目的正确设计我的课程的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:58:40.377

根据要求：您应该`resultKey`在 B 的界面中声明。:-)

# c# - 从旧的数据表创建一个新的数据表，其中包含一些行的总和

> ID：15066819
> 
> 赞同：0
> 
> 时间：2013-02-25T12:17:54.793
> 
> 标签：c#, datatable

我有一个有 1000 行的数据表。一个字段是 ID。不同 ID 的计数为 500。还有一个货币列。我必须创建一个有 500 行的数据表。我想你可以猜到哪 500 个。是的，对于每个不同的 id，我必须将所有金额相加。就这样。

我有的数据表：

```
ID    |   Money
---------------- 
1     |   120 
2     |   75 
1     |   300 
2     |   545 
```

我想要的数据表：

```
ID    |   Money
---------------- 
1     |   420 
2     |   620 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:22:43.957

```
 DataTable dt = new DataTable();
  dt.Columns.Add("ID");
  dt.Columns.Add("Money", typeof(double));
  DataTable dt2 = new DataTable();
  dt2.Columns.Add("ID");
  dt2.Columns.Add("Money", typeof(double));
  dt.Rows.Add("1", 20.50);
  dt.Rows.Add("1", 20.50);
  dt.Rows.Add("2", 15.30);
  dt.Rows.Add("2", 10.70);

  var rows = dt.Rows.Cast<DataRow>().GroupBy(x => x["ID"]).Select(x => new { ID = x.Key, Money = x.Sum(row => row.Field<double>("Money")) });
  foreach (var row in rows)
  {
    dt2.Rows.Add(row.ID, row.Money);
  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T12:39:13.890

为什么不使用 SQL 查询从数据库中实际计算？使用 MS SQL Server 中的一些存储过程或其他东西......我认为它更健壮和更快。

像这样的东西......

```
SELECT ID, Money, SUM(Money)
FROM theTable  
GROUP BY ID, Money 
```

# maven-3 - Maven 父 pom 配置文件被 settings.xml 遮蔽

> ID：15066829
> 
> 赞同：0
> 
> 时间：2013-02-25T12:18:39.113
> 
> 标签：maven-3

我正在使用 Maven 存储库，它在 settings.xml 中配置

```
<settings>
<mirrors>
<mirror>
<id>nexus</id>
<mirrorOf>*</mirrorOf>
<url>http://localhost:8080/nexus/content/groups/public/</url>
</mirror>
</mirrors>
<profiles>
<profile>
<id>nexus</id>
<repositories>
<repository>
<id>central</id>
<url>http://central</url>
<releases><enabled>true</enabled></releases>
<snapshots><enabled>true</enabled></snapshots>
</repository>
</repositories>
<pluginRepositories>
<pluginRepository>
<id>central</id>
<url>http://central</url>
<releases><enabled>true</enabled></releases>
<snapshots><enabled>true</enabled></snapshots>
</pluginRepository>
</pluginRepositories>
</profile>
</profiles>
<activeProfiles>
<activeProfile>nexus</activeProfile>
</activeProfiles>
</settings> 
```

按此顺序拥有一个 Maven 项目

```
parent
|
+child1
|
+child2
|
+child3 
```

并在父 pom 中配置配置文件，

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.test</groupId>
  <artifactId>parent</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>pom</packaging>
  <name>parent</name>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <modules>
    <module>child1</module>
    <module>child2</module>
    <module>child3</module>
  </modules>

  <profiles>
  <profile>
  <id>p1</id>
  <modules>
    <module>child1</module>
    <module>child2</module>
  </modules>
  </profile>
  <profile>
  <id>p2</id>
  <modules>
    <module>child2</module>
    <module>child3</module>
  </modules>
  </profile>
  </profiles>

</project> 
```

现在我只想构建 child1 & child2，所以我给出以下命令

```
mvn -P p1 clean 
```

它正在构建所有孩子（child1，child2，child3）

```
mvn -P p1 help:active-profiles 
```

显示以下配置文件处于活动状态，

*   关系（来源：外部）
*   p1（来源：com.test:parent:0.0.1-SNAPSHOT）

我如何才能只构建选择性项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:48:21.233

如果你想在你的多模块构建中构建一个孩子，你应该使用这样的命令行：

```
mvn -pl child1 clean package 
```

也许你需要给

```
mvn -pl -amd child1 clean package 
```

但不要将配置文件用于此类目的。

# ruby-on-rails - 添加自定义数据属性 rails image 标签

> ID：15066830
> 
> 赞同：21
> 
> 时间：2013-02-25T12:18:41.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我需要在我的 Rails 应用程序中为 Galleria 添加数据描述和数据标题，但我看不到如何使用图像标签执行此操作。到目前为止，我有这个：

```
<div id="galleria">
<% @entries.each do |entry| %>
     <%= image_tag entry.filename, :title => "title", :class => "class", :data-description => entry.caption, :data-title => entry.caption  %>
 <% end %>
 </div> 
```

但这会引发未定义的局部变量或方法“描述”错误，那么我将如何在 rails 3 中执行此操作？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-25T12:20:48.060

正确的语法是

```
<%= image_tag entry.filename, :title => "title", :class => "class", :data => { :description => entry.caption, :title => entry.caption }  %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-23T18:18:35.313

从 rails 5.1 开始，这种语法应该可以工作：

```
<%= image_tag entry.filename, title: "title", class: "class", data: {description: entry.caption, title: entry.caption} %> 
```

阅读更多关于可以包含在`image_tag`示例中的属性的信息：[**rails api docs**](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_tag)。

# c# - 字符串连接/缩短算法

> ID：15066833
> 
> 赞同：3
> 
> 时间：2013-02-25T12:18:49.267
> 
> 标签：c#, string, algorithm

我想在 Twitter 上为我们的客户发布服务器消息。
不幸的是，Twitter 只允许发布 140 个字符或更少。这是一种耻辱。

现在，我必须编写一个算法，将来自服务器的不同消息连接在一起，但将它们缩短到最多 140 个字符。

这很棘手。

* * *

## 代码

```
static string concatinateStringsWithLength(string[] strings, int length, string separator) {
    // This is the maximum number of chars for the strings
    // We have to subtract the separators
    int maxLengthOfAllStrings = length - ((strings.Length - 1) * separator.Length);

    // Here we save all shortenedStrings
    string[] cutStrings = new string[strings.Length];

    // This is the average length of all the strings
    int averageStringLenght = maxLengthOfAllStrings / strings.Length;

    // Now we check how many strings are longer than the average string
    int longerStrings = 0;
    foreach (string singleString in strings)
    {
        if (singleString.Length > averageStringLenght)
        {
            longerStrings++;
        }
    }

    // If a string is smaller than the average string, we can more characters to the longer strings
    int maxStringLength = averageStringLenght;
    foreach (string singleString in strings)
    {
        if (averageStringLenght > singleString.Length)
        {
            maxStringLength += (int)((averageStringLenght - singleString.Length) * (1.0 / longerStrings));
        }
    }

    // Finally we shorten the strings and save them to the array
    int i = 0;
    foreach (string singleString in strings)
    {
        string shortenedString = singleString;
        if (singleString.Length > maxStringLength)
        {
            shortenedString = singleString.Remove(maxStringLength);
        }

        cutStrings[i] = shortenedString;
        i++;
    }

    return String.Join(separator, cutStrings);
} 
```

* * *

## 这个问题

该算法有效，但不是很优化。它使用的字符比实际使用的要少。

这样做的主要问题是该变量`longerStrings`是相对于`maxStringLength`, 并且是向后的。

这意味着如果我改变`longerStrings`，`maxStringLength`就会改变，等等。我必须做一个while循环并执行此操作，直到没有更改为止，但我认为对于这样一个简单的情况没有必要。

你能告诉我如何继续吗？

或者也许已经存在类似的东西？

谢谢！

* * *

## 编辑

我从服务器收到的消息如下所示：

*   信息
    *   学科
    *   日期
    *   身体
*   信息
    *   学科
    *   日期
    *   身体

等等。

我想要的是用分隔符连接字符串，在这种情况下是分号。
应该有一个最大长度。长字符串应首先缩短。

## 例子

这是一个主题
这是身体，有点长...
25.02.2013

这是...
这是...
25.02.2013

我想你应该已经明白了 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:12:59.290

比你的慢五倍（在我们的简单示例中），但应使用最大可用空间（不检查临界值）：

```
static string Concatenate(string[] strings, int maxLength, string separator)
{
    var totalLength = strings.Sum(s => s.Length);
    var requiredLength = totalLength - (strings.Length - 1)*separator.Length;

    // Return if there is enough place.
    if (requiredLength <= maxLength)
        return String.Concat(strings.Take(strings.Length - 1).Select(s => s + separator).Concat(new[] {strings.Last()}));

    // The problem...
    var helpers = new ConcatenateInternal[strings.Length];
    for (var i = 0; i < helpers.Length; i++)
        helpers[i] = new ConcatenateInternal(strings[i].Length);

    var avaliableLength = maxLength - (strings.Length - 1)*separator.Length;
    var charsInserted = 0;
    var currentIndex = 0;

    while (charsInserted != avaliableLength)
    {
        for (var i = 0; i < strings.Length; i++)
        {
            if (charsInserted == avaliableLength)
                break;

            if (currentIndex >= strings[i].Length)
            {
                helpers[i].Finished = true;
                continue;
            }

            helpers[i].StringBuilder.Append(strings[i][currentIndex]);
            charsInserted++;
        }
        currentIndex++;
    }

    var unified = new StringBuilder(avaliableLength);
    for (var i = 0; i < strings.Length; i++)
    {
        if (!helpers[i].Finished)
        {
            unified.Append(helpers[i].StringBuilder.ToString(0, helpers[i].StringBuilder.Length - 3));
            unified.Append("...");
        }
        else
        {
            unified.Append(helpers[i].StringBuilder.ToString());
        }

        if (i < strings.Length - 1)
        {
            unified.Append(separator);
        }
    }

    return unified.ToString();
} 
```

和*ConcatenateInternal*：

```
class ConcatenateInternal
{
    public StringBuilder StringBuilder { get; private set; }
    public bool Finished { get; set; }

    public ConcatenateInternal(int capacity)
    {
        StringBuilder = new StringBuilder(capacity);
    }
} 
```

# java - 启动 Android 应用程序时出现 Class Not Found Exception。谁能告诉我原因？

> ID：15066844
> 
> 赞同：0
> 
> 时间：2013-02-25T12:19:41.263
> 
> 标签：java, android, cordova

我是 android 应用程序的新手，我正在`classNotFound exception`运行 android 应用程序。

我粘贴了 logcat、manifest 文件和 java 代码。

谁能知道问题的原因？

**日志猫：-**

```
02-25 12:10:20.071: W/dalvikvm(273): Unable to resolve superclass of Lcom/phonegap/plugins/downloader/MainActivity; (35)
02-25 12:10:20.071: W/dalvikvm(273): Link of class 'Lcom/phonegap/plugins/downloader/MainActivity;' failed
02-25 12:10:20.071: D/AndroidRuntime(273): Shutting down VM
02-25 12:10:20.071: W/dalvikvm(273): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
02-25 12:10:20.101: E/AndroidRuntime(273): FATAL EXCEPTION: main
02-25 12:10:20.101: E/AndroidRuntime(273): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.phonegap.plugins.downloader/com.phonegap.plugins.downloader.MainActivity}: java.lang.ClassNotFoundException: com.phonegap.plugins.downloader.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.phonegap.plugins.downloader-1.apk]
02-25 12:10:20.101: E/AndroidRuntime(273):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
02-25 12:10:20.101: E/AndroidRuntime(273):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-25 12:10:20.101: E/AndroidRuntime(273):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-25 12:10:20.101: E/AndroidRuntime(273):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-25 12:10:20.101: E/AndroidRuntime(273):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-25 12:10:20.101: E/AndroidRuntime(273):  at android.os.Looper.loop(Looper.java:123)
02-25 12:10:20.101: E/AndroidRuntime(273):  at android.app.ActivityThread.main(ActivityThread.java:4627)
02-25 12:10:20.101: E/AndroidRuntime(273):  at java.lang.reflect.Method.invokeNative(Native Method)
02-25 12:10:20.101: E/AndroidRuntime(273):  at java.lang.reflect.Method.invoke(Method.java:521)
02-25 12:10:20.101: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-25 12:10:20.101: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-25 12:10:20.101: E/AndroidRuntime(273):  at dalvik.system.NativeStart.main(Native Method)
02-25 12:10:20.101: E/AndroidRuntime(273): Caused by: java.lang.ClassNotFoundException: com.phonegap.plugins.downloader.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.phonegap.plugins.downloader-1.apk]
02-25 12:10:20.101: E/AndroidRuntime(273):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
02-25 12:10:20.101: E/AndroidRuntime(273):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
02-25 12:10:20.101: E/AndroidRuntime(273):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
02-25 12:10:20.101: E/AndroidRuntime(273):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
02-25 12:10:20.101: E/AndroidRuntime(273):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577) 
```

**Java代码：-**

```
package com.phonegap.plugins.downloader;
import org.apache.cordova.DroidGap;
import android.os.Bundle;
public class MainActivity extends DroidGap {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/download/download.html");
    }

} 
```

**清单文件：-**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.phonegap.plugins.downloader"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.phonegap.plugins.downloader.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.phonegap.plugins.downloader.Downloader" />
    </application>
</manifest> 
```

**下载器.java**

```
package com.phonegap.plugins.downloader;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;
import android.os.Environment;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;

public class Downloader extends Plugin {

    @Override
    public PluginResult execute(String action, JSONArray args, String callbackId) {

        if (!action.equals("downloadFile")) 
            return new PluginResult(PluginResult.Status.INVALID_ACTION);

        try {

            String fileUrl = args.getString(0);
            JSONObject params = args.getJSONObject(1);

            String fileName = params.has("fileName") ? 
                    params.getString("fileName"):
                    fileUrl.substring(fileUrl.lastIndexOf("/")+1);

            String dirName = params.has("dirName") ?
                    params.getString("dirName"):
                    Environment.getExternalStorageDirectory().getPath() + "/download";

            Boolean overwrite = params.has("overwrite") ? params.getBoolean("overwrite") : false;

            return this.downloadUrl(fileUrl, dirName, fileName, overwrite, callbackId);

        } catch (JSONException e) {

            e.printStackTrace();
            return new PluginResult(PluginResult.Status.JSON_EXCEPTION, e.getMessage());

        } catch (InterruptedException e) {
            e.printStackTrace();
            return new PluginResult(PluginResult.Status.ERROR, e.getMessage());
        }

    }

    private PluginResult downloadUrl(String fileUrl, String dirName, String fileName, Boolean overwrite, String callbackId) throws InterruptedException, JSONException {

        try {

            Log.d("PhoneGapLog", "Downloading "+fileUrl + " into " + dirName + "/" + fileName);

            File dir = new File(dirName);
            if (!dir.exists()) {
                Log.d("PhoneGapLog", "directory " + dirName + " created");
                dir.mkdirs();
            }

            File file = new File(dirName, fileName);

            if (!overwrite && file.exists()) {
                Log.d("DownloaderPlugin", "File already exist");

                JSONObject obj = new JSONObject();
                obj.put("status", 1);
                obj.put("total", 0);
                obj.put("file", fileName);
                obj.put("dir", dirName);
                obj.put("progress", 100);

                return new PluginResult(PluginResult.Status.OK, obj);
            }

            URL url = new URL(fileUrl);
            HttpURLConnection ucon = (HttpURLConnection) url.openConnection();
            ucon.setRequestMethod("GET");
            ucon.connect();

            Log.d("PhoneGapLog", "Download start");

            InputStream is = ucon.getInputStream();
            byte[] buffer = new byte[1024];
            int readed = 0, 
                progress = 0,
                totalReaded = 0,
                fileSize = ucon.getContentLength();

            FileOutputStream fos = new FileOutputStream(file);

            while ((readed = is.read(buffer)) > 0) {

                fos.write(buffer, 0, readed);
                totalReaded += readed;

                int newProgress = (totalReaded*100/fileSize);               
                if (newProgress != progress)
                 progress = informProgress(fileSize, newProgress, dirName, fileName, callbackId);

            }

            fos.close();

            Log.d("PhoneGapLog", "Download finished");

            JSONObject obj = new JSONObject();
            obj.put("status", 1);
            obj.put("total", fileSize);
            obj.put("file", fileName);
            obj.put("dir", dirName);
            obj.put("progress", progress);

            return new PluginResult(PluginResult.Status.OK, obj);

        }
        catch (FileNotFoundException e) {
            Log.d("PhoneGapLog", "File Not Found: " + e);
            return new PluginResult(PluginResult.Status.ERROR, 404);
        }
        catch (IOException e) {
            Log.d("PhoneGapLog", "Error: " + e);
            return new PluginResult(PluginResult.Status.ERROR, e.getMessage());
        }

    }

    private int informProgress(int fileSize, int progress, String dirName, String fileName, String callbackId) throws InterruptedException, JSONException {

        JSONObject obj = new JSONObject();
        obj.put("status", 0);
        obj.put("total", fileSize);
        obj.put("file", fileName);
        obj.put("dir", dirName);
        obj.put("progress", progress);

        PluginResult res = new PluginResult(PluginResult.Status.OK, obj);
        res.setKeepCallback(true);
        success(res, callbackId);

        //Give a chance for the progress to be sent to javascript
        Thread.sleep(100);

        return progress; 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:24:55.063

检查您的 java 构建路径以获取正确的 Phonegap 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T21:38:12.813

如果您使用的是 eclipse，请将 cordova-XXX.jar 添加到 java 构建路径并记住在“Order and Export”选项卡中选中 cordova-XXX.jar 旁边的框。

# javascript - 如何检测mousemove何时停止

> ID：15066849
> 
> 赞同：23
> 
> 时间：2013-02-25T12:20:14.863
> 
> 标签：javascript, jquery, html

完成后如何使用 eventListener 进行检测`mousemove`？

```
document.AddEventListener('mousemove', startInteractionTimer, false);

function startInteractionTimer(){
  clearInterval(touchInterval);
  touchInterval = setInterval(noAction, 6000);
} 
```

我想`startInteractionTimer`在 mousemove 结束后立即启动该功能，我想抓住它。在上面的代码示例中，如果鼠标移动，它就会启动。

谢谢

**编辑：**好的，我回答了我自己的问题，上面的脚本--^ 很好。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T13:18:24.253

你总是可以为它制作一个自定义事件：

```
(function ($) {
    var timeout;
    $(document).on('mousemove', function (event) {
        if (timeout !== undefined) {
            window.clearTimeout(timeout);
        }
        timeout = window.setTimeout(function () {
            // trigger the new event on event.target, so that it can bubble appropriately
            $(event.target).trigger('mousemoveend');
        }, 100);
    });
}(jQuery)); 
```

现在你可以这样做：

```
$('#my-el').on('mousemoveend', function () {
    ...
}); 
```

**编辑：**

此外，为了与其他 jQuery 事件保持一致：

```
(function ($) {
    $.fn.mousemoveend = function (cb) {
        return this.on('mousemoveend', cb);
    });
}(jQuery)); 
```

现在你可以：

```
$('#my-el').mousemoveend(fn); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-25T12:31:06.103

您可以尝试仅设置/清除超时以检测移动鼠标的结束...

```
var x;
document.addEventListener('mousemove', function() { 
    if (x) clearTimeout(x); 
    x = setTimeout(startInteractionTimer, 200); 
}, false); 
```

你想等多久取决于你。我不知道你想说多久是“鼠标移动的结束”

示例：http: [//jsfiddle.net/jeffshaver/ZjHD6/](http://jsfiddle.net/jeffshaver/ZjHD6/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-28T20:02:28.340

这是另一个自定义事件解决方案，但没有 jQuery。它创建一个名为的事件，该事件`mousestop`将在鼠标指针所在的元素上触发。它会像其他鼠标事件一样冒泡。

因此，一旦包含了那段代码，就可以将事件侦听器添加到任何元素`addEventListener('mousestop', fn)`：

```
(function (mouseStopDelay) {
    var timeout;
    document.addEventListener('mousemove', function (e) {
        clearTimeout(timeout);
        timeout = setTimeout(function () {
            var event = new CustomEvent("mousestop", {
                detail: {
                    clientX: e.clientX,
                    clientY: e.clientY
                },
                bubbles: true,
                cancelable: true
            });
            e.target.dispatchEvent(event);
        }, mouseStopDelay);
    });
}(1000));

// Example use
document.getElementById('link').addEventListener('mousestop', function(e) {
    console.log('You stopped your mouse while on the link');
    console.log('Mouse coordinates are: ', e.detail.clientX, e.detail.clientY);
    // The event will bubble up to parent elements.
});
```

```
<h1>Title</h1>
<div>
    content content<br>
    <a id="link" href="#">stop your mouse over this link for 1 second</a><br>
    content content content
</div>
```

# iphone - ESPN API 集成问题

> ID：15066850
> 
> 赞同：0
> 
> 时间：2013-02-25T12:20:14.890
> 
> 标签：iphone, ios, espn

我正在实现 espn api，但是有一些问题，大多数 api 都会给我这个响应。

```
{"timestamp" :"2013-02-25T11:19:02Z","message" :"This action is forbidden for the requested resource at your permission level. Please review the documentation for account level access.","status" :"error","code" :403} 
```

* * *

我正在使用这个 api [Espn MLB Standing](http://api.espn.com/v1/sports/baseball/mlb/standings?apikey=mkygnjtr7tz5cv4ea892s9f6)

我想知道在哪里查看文档，我是否需要购买一些 api 或其他任何东西？

**[编辑]**

还有一件事`?apikey=:yourkey`，所以这个密钥对于所有用户都是相同的，或者我们必须根据用户登录来获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T18:46:31.137

我的代表不允许发表评论，但我想我会在这里添加以下内容：

*   少量 ESPN API 数据是免费的，但很多需要付费。
*   出于安全原因，您可能不想公开共享您的个人 API 密钥。
*   转到[http://developer.espn.com/io-docs](http://developer.espn.com/io-docs)并插入您的 API 密钥并使用 GUI 生成 API 调用/响应。这是查看有效的工作语法的好方法，然后您可以将其放入您的应用程序并根据需要进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:40:46.843

我认为您使用了错误的**apikey**或者您的 URL 查询中存在一些问题。

您的应用程序将具有唯一的**apikey**。此密钥对于所有使用该应用程序的用户都是相同的。

您应该通过注册到他们的网站来获得一个 apikey 并将其用于开发目的。

# selenium - Selenium，无法通过包含子节点后的文本来查找元素

> ID：15066851
> 
> 赞同：2
> 
> 时间：2013-02-25T12:20:18.363
> 
> 标签：selenium, selenium-webdriver

一点背景知识：HTML 看起来像这样：

```
 <table>
        <thead>
            <tr>
                <th>Head1</th>
                <th>Head2</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <span>
                       <span class="icon">S</span>
                        "Auto"
                    </span>
                </td>
                <td>
                    <span>
                        Cost, Time
                    </span>
                </td>
            </tr>
        </tbody>
    </table> 
```

代码的简单版本如下所示：（在 pry 中运行）

```
[69] pry> e = driver.find_element(:xpath, "//table/tbody/tr/td/span")
=> #<Selenium::WebDriver::Element:0x7ba9a4d694458ec id=":wdc:1361791490676">

[70] pry> e.text
=> "SAutomotive"

[71] pry> e = driver.find_element(:xpath, "//table/tbody/tr/td/span[contains(text(),'Auto')]")

Selenium::WebDriver::Error::NoSuchElementError: The element could not be found
from /Users/ben/.rvm/gems/ruby-1.9.3-p194/gems/selenium-webdriver-2.29.0/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok' 
```

我无权更改 HTML 代码虽然此表中只有一行，但可能会添加更多行，我无法预测该行的位置，这就是我尝试按名称查找它的原因

我的正常代码是：

```
e = driver.find_element(:xpath, "//table/tbody/tr[td/span[contains(text(),'Auto')]]") 
```

我遇到的问题是我找不到任何方法来通过第一个表格单元格的文本中给出的名称来获取表格中的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:31:12.007

在xpath下面使用

```
"//table/tbody/tr/td/span[contains(.,'Auto')]" 
```

# c# - C# 资源处理

> ID：15066852
> 
> 赞同：1
> 
> 时间：2013-02-25T12:20:21.017
> 
> 标签：c#, wpf, resources

我使用 File -> New item > Resource 创建了一个资源文件，并放置了 2 个键和 2 个值。
如果我将其设置为嵌入式资源，那么我可以执行并接收该值：

```
ResourceName.ResourceManager.GetString("Key"); 
```

但是当我没有嵌入资源时这样做时，我得到了异常。

```
A first chance exception of type 
'System.Resources.MissingManifestResourceException' occurred in mscorlib.dll 
```

如何创建使用我创建的资源初始化自身的 ResourceManager 对象？

我试过：

```
ResourceManager resourceManager = ResourceManager.CreateFileBasedResourceManager
(resourceFile, filePath, null); 
```

当路径和文件名正常但对象为空并引发异常时。

我[从源代码中跟踪这个读取值..](https://stackoverflow.com/questions/7644796/read-value-from-resource-file-using-string)但也没有工作。文件无法加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:32:05.443

要回答 ilansch 在原始问题的评论中添加的问题：

> 我也想有一个可以打电话和搜索钥匙的会员

这是一种方法（假设您已经在项目中添加了一个名为“ResourceName.resx”的“资源文件”）：

```
ResourceSet rs = ResourceName.ResourceManager.GetResourceSet(
    Thread.CurrentThread.CurrentUICulture, true, true);
Dictionary<string, object> resources = rs.Cast<DictionaryEntry>().ToDictionary(r => (string) r.Key, r => r.Value);

// Can now list all keys, e.g.:
foreach (string key in resources.Keys)
{
    Debug.WriteLine(key);
}

// ...or can find out whether a key is present:
object v;
if (resources.TryGetValue("Key", out v))
{
    Debug.WriteLine(v);
} 
```

这会将资源文件中的所有资源加载到 中`Dictionary<string, object>`，然后您可以使用它来发现密钥。不过，这可能效率不高，因为它将整个资源集加载到内存中。

如果你只想要一个键列表，你可以这样做：

```
string[] keys = rs.Cast<DictionaryEntry>().Select(r => (string) r.Key).ToArray(); 
```

不确定这是否真的有帮助，因为我不清楚你的总体目标是什么。

# java - 是否有可能以某种方式继承修改字节码的最终类？

> ID：15066858
> 
> 赞同：8
> 
> 时间：2013-02-25T12:20:42.110
> 
> 标签：java, bytecode, java-bytecode-asm

是否可以使用字节码操作继承最终类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:19:15.083

是和不是。

您可以使用字节码操作将`final`类更改为非`final`动态。这甚至不会破坏二进制兼容性，因此不存在类加载器/验证器错误的风险。

但是，您必须将字节码修改应用于`final`类本身。您不能对子类进行字节码操作以使其从`final`父类继承。或者更准确地说，如果你这样做，修改后的子类将在与`final`父类一起加载时被验证器拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:57:00.840

[这](http://en.wikipedia.org/wiki/Java_class_file)描述了类文件格式。在偏移处`10+cpsize`有 2 个字节定义此类的访问标志。这些标志之一称为[ACC_FINAL (0x0010)](http://viralpatel.net/blogs/tutorial-java-class-file-format-revealed/)。我想您可以掩盖这一点并使该课程成为非最终课程。

# javascript - JQuery mousedown 和 mouseup 事件的意外行为

> ID：15066862
> 
> 赞同：2
> 
> 时间：2013-02-25T12:21:01.727
> 
> 标签：javascript, jquery, tooltip, mouseevent

我正在开发一个小型 Web 应用程序，用户在从 div 中选择一段文本（contenteditable = true）后会获得一个带有选项的工具提示。

如果用户选择一个文本，`fadesIn` “mouseup”事件的工具提示。该事件`mousedown`用于`fadeOut`工具提示。

只要用户不选择整个文本，一切都像魅力一样。如果他这样做了，然后单击 div 上的其他位置，则工具提示会淡出并再次出现。

可以在以下位置找到此行为的示例：http: [//jsfiddle.net/7NEk3/275/](http://jsfiddle.net/7NEk3/275/) 事件编码如下：

```
 $('#show-bubb-text').mouseup(function(e) {
                var selection = getSelected();
                if (selection && (selection = new String(selection).replace(/^\s+|\s+$/g, ''))) 
                {
                    selectionImage.attr('href', 
                    url.replace('{term}', encodeURI(selection))).css({
                        top: e.pageY - 30, //offsets
                        left: e.pageX - 13 //offsets
                    }).fadeIn();
                }
            });

            $(document.body).mousedown(function() {
                selectionImage.fadeOut();
            }); 
```

1.  选择例如“CREATE A LOGO”，你会看到一个工具提示淡入，如果你点击 div 中的其他地方，工具提示将淡出。

2.  现在选择整个文本块，即从“SMS”到“/”。工具提示将按预期显示，但如果您单击选择或未选择的部分，工具提示将淡出并重新显示。

这是预期的行为吗？我究竟做错了什么？

**编辑：**这似乎在 Firefox 上运行良好。但是，它不在 Chrome 或 Safari 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:26:48.313

当您在活动选择中单击时会发生这种情况。您可以通过进行任何选择并在活动选择内单击来重新创建它。原因是事件被调用的顺序。在调用“getSelection”函数之前，不会清除活动选择。因此，您的应用程序正在检测活动选择，即使选择在您“鼠标上移”后立即被清除。

一种解决方案可能是清除“mousedown”上的选择。就像是：

```
function clearSelection() {
    if ( document.selection ) {
        document.selection.empty();
    } else if ( window.getSelection ) {
        window.getSelection().removeAllRanges();
    }
} 
```

然后在你的'mousedown'函数中：

```
$(document.body).mousedown(function() {
     clearSelection();
     selectionImage.fadeOut();
}); 
```

# c# - 可以在单个站点中同时运行 C# 和 Vb 代码

> ID：15066864
> 
> 赞同：0
> 
> 时间：2013-02-25T12:21:06.927
> 
> 标签：c#, asp.net, vb.net

是否可以在一个站点中同时拥有 c# 和 Vb (default.aspx.cs,index.aspx.vb )。如果是这样，你能给我一些想法或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:24:50.553

如果您正在创建一个“网站”，那么每个页面都可以使用指定的语言，因为基本上每个页面都是单独编译的。有些可以使用VB，有些可以使用C#。

否则只能使用一种语言的“网络应用程序”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:22:36.090

这个问题在这里被问过很多次了。

例如，请参阅此博客 - [http://timheuer.com/blog/archive/2007/02/28/14002.aspx](http://timheuer.com/blog/archive/2007/02/28/14002.aspx)

但是，我个人建议您不要在同一个项目中混合使用多种语言。仅仅因为你可以并不意味着你应该和所有这些......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:29:52.080

考虑将您的业务逻辑与您的页面分离并使其***松散耦合***。

然后，您可以在单独的项目中构建类库，`C#`这些类库`VB.Net`将代表您的逻辑并引用 DLL 并以您的单一语言从 a`aspx.cs`或`aspx.vb`.

我不会混合使用这两种语言，尤其是在不需要它的领域。

我什至会使用[代码转换](http://www.developerfusion.com/tools/convert/vb-to-csharp/)器使您的网页成为一种语言。

# jquery - Jquery .change() 函数在本地主机上不起作用

> ID：15066865
> 
> 赞同：3
> 
> 时间：2013-02-25T12:21:10.000
> 
> 标签：jquery, input, controls, textchanged

以下代码适用于 jsfiddle，但不适用于 localhost，您能帮帮我吗？

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script>
        $('.puankontrol').change(function() {
          var x = $(this).val() * 1;   
          if((x < 1) ||  (x > 5))
          {
              $(this).val(3);
              alert("Please enter value between 1-5!");
          }
        });
    </script>
</head>
<body>

     <form>
      <input class="puankontrol" type="text" name="puan"/><BR>
      <input class="puankontrol" type="text" name="puan"/><BR>
      <input class="puankontrol" type="text" name="puan"/><BR>
    </form>
    <div id="other">
      Trigger the handler
    </div>

</body>
</html> 
```

`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T12:23:24.020

尝试

```
$(document).ready(function(){
   //change function declaration.
}); 
```

也`<script type="text/javascript">`用于添加`script`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:37:34.920

每当您想在 jQuery 中编写任何代码时，都必须将该代码添加到

```
$(document).ready(function(){}); 
```

加载文档的所有元素后，jQuery 会调用此方法回调。它确认我们在其中访问的所有元素都已加载。

# php - 非常慢的 SQL 连接

> ID：15066874
> 
> 赞同：1
> 
> 时间：2013-02-25T12:21:51.573
> 
> 标签：php, mysql, phpmyadmin

我有 2 个巨大的 mysql 表：

*   表**用户详细信息**：id，名称，地址，国家
*   表用户数据：id、 **productname**、producturl、price

我想从 userdata 创建一个 excel 表，其中 id 是 userdetails 中国家是西班牙的用户的 id，所以我们有：

```
id, name, address, country, productname, producturl.... 
```

一个简单的加入有帮助吗？我试过但挂起我的系统，因为我在 userdata 中有 500 万条记录，在 userdetails 中有 20,000 条记录。

我可以在 phpMyadmin 中执行此操作吗？还是用php会更好？最好的优化脚本是什么？

```
SELECT column_name(s)
FROM table_name1
INNER JOIN table_name2
ON table_name1.column_name=table_name2.column_name 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T12:26:35.257

# asp.net - 错误：“Provider=Microsoft.ACE.OLEDB.12.0”提供程序未在本地计算机上注册

> ID：15066877
> 
> 赞同：1
> 
> 时间：2013-02-25T12:22:00.660
> 
> 标签：asp.net, web-applications, ado.net, oledb

我开发了一个使用 Access 数据库 (Microsoft.Jet.OLEDB.4.0) 的 32 位 Web 应用程序。
现在我已将其转换为 64 位。
为此，我已将 Target CPU 属性更改为 x64。
我收到错误

```
 The 'Provider=Microsoft.Jet.OLEDB.4.0' provider is not registered on the local machine. 
```

然后我安装了 Microsoft.ACE.OLEDB.12.0。
但现在它给出了错误

```
The 'Provider=Microsoft.ACE.OLEDB.12.0' provider is not registered on the local machine. 
```

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:25:47.947

Microsoft.ACE.OLEDB.12.0 有两个版本，分别用于 32 位和 64 位。您必须安装它的 64 位版本，因为您的应用程序是 64 位的。

“AccessDatabaseEngine_x64.exe”

尝试将配置更改为 x86。

# twitter-bootstrap - 使 toastr 警报看起来像引导警报

> ID：15066882
> 
> 赞同：18
> 
> 时间：2013-02-25T12:22:11.337
> 
> 标签：twitter-bootstrap, toastr

我想让 toastr 的弹出窗口看起来与 Bootstrap 警报相同或非常接近。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-25T12:48:08.340

包括引导警报的 CSS，然后在您的 toastr 选项中，更改 toastClass 和 iconClasses 的值：

```
toastr.options = {
    toastClass: 'alert',
    iconClasses: {
        error: 'alert-error',
        info: 'alert-info',
        success: 'alert-success',
        warning: 'alert-warning'
    }
}, 
```

然后在 toastr 的 CSS 中，删除阴影`#toast-container > div`，使其最终看起来像：

```
#toast-container > div {
    width: 300px;
} 
```

如果需要，您可以保留填充，或者将其添加到您自己的 CSS 文件中，而不是编辑 toastr（最好是确保之后加载您的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-11T20:55:24.807

为了使它们与 bootstrap 3.2.0 相同，我使用了所选答案的组合 - 尽管`alert-error`应该是`alert-danger`- 和这个 gist，它用 fontawesome 图标替换了图标

[https://gist.github.com/askehansen/9528424](https://gist.github.com/askehansen/9528424)

为了让它们看起来完全一样，我也

*   将 toast 的不透明度设置为 1
*   更改标题和消息颜色以匹配引导程序

CSS是

```
#toast-container > div {
    opacity: 1;
    -ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
    filter: alpha(opacity=100);
}

#toast-container > .alert {
    background-image: none !important;
}

#toast-container > .alert:before {
    position: fixed;
    font-family: FontAwesome;
    font-size: 24px;
    float: left;
    color: #FFF;
    padding-right: 0.5em;
    margin: auto 0.5em auto -1.5em;
}

#toast-container > .alert-info:before {
    content: "\f05a";
}
#toast-container > .alert-info:before,
#toast-container > .alert-info {
    color: #31708f;
}

#toast-container > .alert-success:before {
    content: "\f00c";
}
#toast-container > .alert-success:before,
#toast-container > .alert-success {
    color: #3c763d;
}

#toast-container > .alert-warning:before {
    content: "\f06a";
}
#toast-container > .alert-warning:before,
#toast-container > .alert-warning {
    color: #8a6d3b;
}

#toast-container > .alert-danger:before {
    content: "\f071";
}
#toast-container > .alert-danger:before,
#toast-container > .alert-danger {
    color: #a94442;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-06T18:53:29.767

这篇文章有点旧，但我想我会添加另一个可能的解决方案。

我发现默认的引导程序“警报”配色方案对于 toastr 消息来说有点轻。我使用了一个自定义的 LESS 文件并执行了以下操作来使它们变暗。

```
#toast-container {
   @darken-amount: 10%;

   .toast-error {
      background-color: darken(@brand-danger, @darken-amount);
   }

   .toast-warning {
      background-color: darken(@brand-warning, @darken-amount);
   }

   .toast-success {
      background-color: darken(@brand-success, @darken-amount);
   }

   .toast-info {
     background-color: darken(@brand-info, @darken-amount);
   }
} 
```

或者，您还可以更改消息中文本的颜色：

```
.toast-message {
   color: #000;
} 
```

# ruby - 如何获取水豚中的隐藏元素值？

> ID：15066884
> 
> 赞同：12
> 
> 时间：2013-02-25T12:22:16.543
> 
> 标签：ruby, capybara

我需要获取隐藏元素的值。

我尝试了以下代码：

```
page.find(:xpath, "//span[@id='sample']").text 
```

它返回零。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-25T20:19:51.710

从 Capybara 2.1 开始，无论驱动程序如何，您都可以传递`:all`和使用`text`。`find('#sample').text(:all)`

您也可以使用`:text`匹配器选项（它们将在内部传递`:all`给`text`if `:visible`is `false`）：

```
page.should have_css('#sample', visible: false, text: 'expected text') 
```

* * *

在较早的 Capybara 2.0.x`text`中没有这样的选项并且只返回可见文本。

要返回可见和不可见文本，您可以使用：

*   硒：

```
page.evaluate_script("document.getElementById('sample').textContent") 
```

*   机架测试：

```
find('#sample').native.text 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-05-30T09:45:02.840

您可以简单地找到隐藏的元素并获得它的价值。

```
find('#sample', visible: false).value 
```

很简单 ;）

# iphone - 当我关闭我的应用程序时，如何将 ALAssetsLibrary 保存到 usersDefault？

> ID：15066885
> 
> 赞同：0
> 
> 时间：2013-02-25T12:22:18.433
> 
> 标签：iphone, ios, objective-c

当我在 ALAssetsLibrary 中保存图像时，可以在我的表格中显示它们，但是当我从多任务栏关闭我的应用程序时 - 记录被清除。当我再次运行我的应用程序时，如何保存它们并在我的表中保持负载？？？

我[在 NSUserDefaults 中找到了这个保存 ALAsset URL](https://stackoverflow.com/questions/11554399/saving-alasset-url-in-nsuserdefaults?rq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:56:36.987

我认为您想节省资源，以便以后可以使用它们。如果是这样，您可以将资源路径保存到用户默认值或核心数据中，并将它们存储到“相册”中。当你需要它时，只需使用字符串中的路径作为资源路径即可。

看看[ALAssetsLibrary+CustomPhotoAlbum](https://github.com/Kjuly/ALAssetsLibrary-CustomPhotoAlbum/blob/dev/Demo/ALAssetsLibraryCustomPhotoAlbum_BasicDemo/ALAssetsLibraryCustomPhotoAlbum_BasicDemo/Controllers/PhotosTableViewController.m#L280)，也许你会喜欢。;)

# android - 从远程 URL 下载图像

> ID：15066886
> 
> 赞同：0
> 
> 时间：2013-02-25T12:22:19.313
> 
> 标签：android, json, android-youtube-api

目前我正在开发一个包含列表视图的 Android 应用程序，其中显示 Youtube 视频的链接。应用程序以 JSON 格式从服务器获取其数据。现在我正在尝试显示来自该子域的这些视频的缩略图 -`http://img.youtube.com/vi/` .

但图像不会显示在列表视图中。

这是该项目的代码：

1 - canticlesActivity.java

```
package com.shadatv.shada;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.ArrayList;
import java.util.HashMap;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class canticlesActivity extends ListActivity {

    TextView httpStuff;
    HttpClient client;
    JSONArray canticles;
    String picpath = "http://img.youtube.com/vi/";

    File sdcard = Environment.getExternalStorageDirectory();

    File shadaRoot = new File(sdcard.getAbsolutePath() + "/shada_Folder");

    private static final String CA_NAME = "ca_name";
    private static final String CA_LINK = "ca_link";
    private static final String CA_IMG = "ca_img";
    private static final String URL = "http://dt-works.com/ags/shadatv/canticles/android_data";

    ArrayList<HashMap<String, String>> canticlesList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.canticles);

        httpStuff = (TextView) findViewById(R.id.textView1);
        client = new DefaultHttpClient();
        new Read().execute();
    }

    public JSONArray allCanticles() throws ClientProtocolException, IOException, JSONException {
        StringBuilder url = new StringBuilder(URL);

        HttpGet get = new HttpGet(url.toString());
        HttpResponse r = client.execute(get);
        int status = r.getStatusLine().getStatusCode();

        if (status == 200) {
            HttpEntity e = r.getEntity();
            String data = EntityUtils.toString(e);
            JSONArray canticles = new JSONArray(data);          
            return canticles;

        } else {
            Toast.makeText(getBaseContext(), "error", Toast.LENGTH_SHORT).show();
            return null;
        }
    }

    public void downloadImage(String fileURL) {
        try {
//          Toast.makeText(getBaseContext(), "baaad", Toast.LENGTH_SHORT).show();
            String finlpth = "";
            finlpth = picpath + fileURL + "/2.jpg";
            shadaRoot.mkdirs();

            URL u = new URL(finlpth);
            HttpURLConnection c = (HttpURLConnection) u.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();

            File DownloadedFile = new File(shadaRoot, fileURL + ".jpg");
            // if(!outfile.exists())
            FileOutputStream f = new FileOutputStream(DownloadedFile);

            InputStream in = c.getInputStream();

            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ((len1 = in.read(buffer)) > 0) {
                f.write(buffer, 0, len1);
            }

            f.close();

        } catch (Exception e) {
            Log.d("Downloader", e.getMessage());
        }
    }

    public class Read extends AsyncTask<String, String, String>{

        @Override
        protected String doInBackground(String... params) {

            canticlesList = new ArrayList<HashMap<String, String>>();
            try {
                canticles = allCanticles();
                for (int i = 0; i < canticles.length(); i++) {
                    JSONObject canticle = canticles.getJSONObject(i);
                    String ca_name = canticle.getString(CA_NAME);
                    String ca_link = canticle.getString(CA_LINK);                   

                    downloadImage(ca_link);

                    HashMap<String, String> map = new HashMap<String, String>();                                        
                    map.put(CA_NAME, ca_name);
                    map.put(CA_LINK, ca_link);
                    map.put(CA_IMG, ca_link + ".jpg");
                    canticlesList.add(map);                                                     
                }

            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {

            ListAdapter adapter = new SimpleAdapter(canticlesActivity.this, 
                                                    canticlesList,R.layout.list_item, 
                                                    new String[] {CA_NAME, CA_LINK, CA_IMG},
                                                    new int[] {R.id.ca_name, R.id.ca_link, R.id.ca_img});
            setListAdapter(adapter);

        }       
    }
} 
```

2 - list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_selector"
    android:orientation="horizontal" >

    <!-- Product id (pid) - will be HIDDEN - used to pass to other activity -->

    <ImageView
        android:id="@+id/ca_img"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:contentDescription="@string/desc"              
         />

    <TextView
        android:id="@+id/ca_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
         />

    <!-- Name Label -->
    <TextView
        android:id="@+id/ca_link"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="6dip"
        android:paddingLeft="6dip"
        android:textSize="17sp"
        android:textStyle="bold"
        android:visibility="gone" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:24:45.910

您可以使用[UniversalImageLoader](https://github.com/nostra13/Android-Universal-Image-Loader) ，它的使用非常简单 -`imageLoader.displayImage(imageUri, imageView);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:35:52.243

在 youtube JSON 数据中，整个视频信息将在 "entry" JSON 数组中。您正在为 Hashmap 中的所有整体创建相同的标签名称。如果您为所有条目提供相同的标签，那么它将显示最后一个条目图像。请将 TAG NAME 更改为 "map.put(CA_IMG+i, ca_link + ".jpg");" 我希望这个解决方案对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:36:44.760

下载图像然后在 ListView 中显示是不好的过程。因为想想如果你有超过 100 张图像，那么显示它需要更多时间。

现在我建议的优化是：在 ListView 中实现延迟加载图像的逻辑。

请参考以下示例：

1.  [Fedor 的懒惰列表](https://stackoverflow.com/a/3068012/379693)
2.  [通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)
3.  [诺沃达的 ImageLoader](http://androidimageloader.com/)

# c# - 如何在小部件之前呈现临时形状

> ID：15066889
> 
> 赞同：1
> 
> 时间：2013-02-25T12:22:23.403
> 
> 标签：c#, asp.net-mvc, orchardcms

我的 Layout.cshtml 中有以下代码，用于将用户控件添加到标题中：

`WorkContext.Layout.Header.Add(New.User(), "10");`

然而，在标题中

`<article class="widget-HeaderMenu widget-header widget-menu-widget widget" shape-id="5">`

之前渲染

`<div class="user-display" shape-id="15">`（这是注入 WorkContext 的东西）

两者都是向右浮动的，但是需要颠倒顺序以使用户控件出现在菜单的右侧。

我怎么做？

我很好奇它是否与第二个参数有关`WorkContext.Layout.Header.Add(New.User(), "10");`，即使我将它设置为超过 9000，它似乎也没有任何作用？顺便说一句，我将左侧参数识别为 Clay 对象的实例化。

编辑

经过一些实验后，似乎第二个参数是区域内注入形状的顺序。

编辑2

我得到了我想要将 bij 添加`<li>@Display(New.User())</li>`到 MenuWidget 备用的效果。

替代方案将是：

```
@{
// Model is Model.Menu from the layout (Layout.Menu)
var tag = Tag(Model, "ul");

var items = (IList<dynamic>)Enumerable.Cast<dynamic>(Model.Items);

if (items.Any()) {
    items[0].Classes.Add("first");
    items[items.Count - 1].Classes.Add("last");
    }    
}
<nav id='topnav'>

    <ul>
       @DisplayChildren(Model.Menu)
        <li>@Display(New.User())</li>
    </ul>
</nav> 
```

另请参阅：[如何控制 Orchard 中菜单的呈现](https://stackoverflow.com/questions/15019611/how-to-control-the-rendering-of-a-menu-in-orchard)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:29:23.873

最简单的可能是为您引入一个新区域。

# java - 使用 jasper 和 servlet 以 pdf 格式创建报告

> ID：15066892
> 
> 赞同：0
> 
> 时间：2013-02-25T12:22:38.303
> 
> 标签：java, servlets, jasper-reports

我想使用 servlet、.jasper 文件创建 pdf 格式的报告，但有一个**例外：**

> HTTP 状态 500 - Servlet 执行引发异常
> 
> ```
> --------------------------------------------------------------------------------
> 
> type Exception report
> 
> message Servlet execution threw an exception
> 
> description The server encountered an internal error that prevented it from fulfilling     this request.
> 
> exception 
> ```
> 
> javax.servlet.ServletException：Servlet 执行引发异常
> 
> 根本原因
> 
> java.lang.NoClassDefFoundError: net/sf/jasperreports/engine/JasperRunManager one.Patient.doGet(Patient.java:46) javax.servlet.http.HttpServlet.service(HttpServlet.java:621) javax.servlet.http.HttpServlet .service(HttpServlet.java:728)
> 
> note Apache Tomcat/7.0.34 日志中提供了根本原因的完整堆栈跟踪。
> 
> * * *

小服务程序代码是：

```
package one;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.sql.Connection;
import java.util.HashMap;

import javax.servlet.Servlet;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

//import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JasperRunManager;

/**
 * Servlet implementation class Patient
 */
@WebServlet("/Patient")
public class Patient extends HttpServlet implements Servlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public Patient() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        Connection con=DBCon.getConnection();
        InputStream inS=getServletContext().getResourceAsStream("/report-src/ganeshaji.jashper");

        OutputStream outS=response.getOutputStream();
        response.setContentType("application/pdf");

        try {
            JasperRunManager.runReportToPdfStream(inS, outS, new HashMap<String, Object>(),con);
            outS.flush();
            con.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            response.setContentType("text/html");
            e.printStackTrace();
        }   
        }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

请。给我解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:30:01.627

通过调查根本原因

```
java.lang.NoClassDefFoundError: net/sf/jasperreports/engine/JasperRunManager 
```

似乎您要么错过了 jasper jar，要么使用了不支持 JasperRunManager 的错误版本。

在类路径中包含正确的 jar 将解决您的问题。

请下载这些罐子：

```
itext-4.2.0.jar 

itextpdf-5.3.4.jar 

jasperreports-4.0.1.jar 

jasperreports-fonts-4.0.0.jar 
```

并编写如下代码：

```
try { 
FileInputStream fis = new FileInputStream(YOURREPORTPATH.jasper"); 
BufferedInputStream bufferedInputStream = new BufferedInputStream(fis); 
jasperReport = (JasperReport) JRLoader.loadObject(bufferedInputStream); 
} catch (Exception e2) {
 e2.printStackTrace(); 
} 
```

然后在填写参数和数据源后创建pdf，如下所示：

```
JasperExportManager.exportReportToPdfFile(jasperPrint, OUTPUTFILENAME+".pdf"); 
```

谢谢...

777先生

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:27:26.537

检测到在 NoClassDefFoundError:net/sf/jasperreports/engine/util/JRStyledTextParser 之前抛出的根异常：

```
java.lang.NoClassDefFoundError: sun/awt/X11GraphicsEnvironment 
```

Unix 和 Linux 上的 Sun AWT 类依赖于 X Window 系统。当您使用这些类时，它们期望加载 X 客户端库并能够与 X 显示服务器通信。如果您的客户端有 GUI，这是有道理的；不幸的是，即使您的客户使用 AWT 但没有 GUI（在我的情况下，从 Web 应用程序生成报告），它也是必需的

绕过这个的方法是`java.awt.headless=true`在系统启动时设置系统属性。

**例如**

**通过将静态块移动到类的顶部，让 java 尽可能早地执行它！**

```
 public class Foo() {
    static { /* works fine! ! */
      System.setProperty("java.awt.headless", "true");
      }

     public static void main() {}
  } 
```

**或者**

我认为可以通过将其作为参数传递给 Java 虚拟机来设置此参数，例如

-Djava.awt.headless=true。不确定这是否会对您的应用程序的其他组件产生影响。

**或者**

试着把它放在你的 ${CATALINA_HOME}/bin/catalina.sh 脚本中：

```
export JAVA_OPTS="${JAVA_OPTS} -Djava.awt.headless=true" 
```

[来自](https://stackoverflow.com/a/3651196/1602230)- https://stackoverflow.com/a/3651196/1602230

# c++ - GCC-寄存器的无效使用

> ID：15066898
> 
> 赞同：4
> 
> 时间：2013-02-25T12:22:48.517
> 
> 标签：c++, c, gcc, codeblocks

我正在为 Windows 编译 VS2012 和 GCC (CodeBlocks) 下的项目。在 VS2012 上一切正常。在 GCC 下，我得到以下编译错误：

```
C:\Users\Piotrek\AppData\Local\Temp\ccfdl0Ye.s|164|Error: invalid use of register|
C:\Users\Piotrek\AppData\Local\Temp\ccfdl0Ye.s|166|Error: invalid use of register|
C:\Users\Piotrek\AppData\Local\Temp\ccfdl0Ye.s|221|Error: invalid use of register|
||=== Build finished: 3 errors, 14 warnings (0 minutes, 0 seconds) ===| 
```

我正在使用编译器选项 -fpermissive - 它应该与错误无关。

我只是不明白为什么它指向Local Temp文件夹下的临时文件，并说我使用了错误的寄存器？

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:35:51.137

看起来您在编译器中遇到了错误。错误消息（从“源”文件名判断）来自汇编程序。汇编器应该生成错误消息的唯一时间是当汇编器中有一些非法的东西时，C++ 编译器*永远不*应该生成非法的汇编器；如果它不能生成合法的汇编程序，它应该输出一个错误信息并且失败。

当您收到此类消息时，真正的问题是要弄清楚您的代码中是什么触发了它。g++ 有一个选项告诉它不要删除任何中间文件。使用它，然后尝试查看这些行的汇编文件中发生了什么。（当你要求 g++ 输出汇编程序时，它会在其中添加漂亮的注释以帮助找到相应的源。我不知道在生成汇编程序作为中间文件时它是否也这样做。）然后尝试剪切代码（如果更糟的话更糟糕的是，使用二进制搜索），直到你可以得到一两行程序的错误。尝试猜测它们有什么特别之处，并改变它们以不同的方式做同样的事情。

并且不要不向 g++ 报告错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:18:34.517

感谢 James Kanze 的建议，我决定告诉编译器不要删除临时文件。这是由标志完成的：

> -保存临时

正如 James 所说，汇编器生成了一些很好的注释，它们准确地告知我们的 C++ 代码中的哪一行引发了错误。就我而言，它似乎不接受这样的指令：

```
asm
(
    ".intel_syntax noprefix\n"
    "lock dec [DWORD PTR eax]\n"
    ".att_syntax \n"
    :
    : "a" (data)
    :
); 
```

我不知道他为什么不再接受 Intel Syntax，因为它与以前的 GCC 版本一起工作，现在我更新了它，它不再。

无论如何，此类问题的解决方案是詹姆斯提到的解决方案：只是不要删除中间文件，以便您可以直接窥探汇编代码出了什么问题。

关于 INTEL 语法的问题，知道为什么它不再起作用了吗？

# c# - Json.net 全局设置

> ID：15066904
> 
> 赞同：21
> 
> 时间：2013-02-25T12:22:54.860
> 
> 标签：c#, json.net

有没有办法为 Json.net 指定全局设置？

我们遇到的问题是它将所有 DateTimes 都放在 UTC 中（这是正确的）。出于遗留目的，我们希望默认为当地时间。我不想到处乱写以下代码：

```
var settings = New JsonSerializerSettings();
settings.DateTimeZoneHandling = DateTimeZoneHandling.Local;
JsonConvert.DeserializeObject(json, settings); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-05-08T11:05:23.800

所以，这被添加到[Json.net 5.0 Release 5](http://james.newtonking.com/archive/2013/05/08/json-net-5-0-release-5-defaultsettings-and-extension-data.aspx)

```
JsonConvert.DefaultSettings = () => new JsonSerializerSettings
{
    DateTimeZoneHandling = DateTimeZoneHandling.Local
}; 
```

从[发行说明](http://james.newtonking.com/archive/2013/05/08/json-net-5-0-release-5-defaultsettings-and-extension-data.aspx)：

> 在应用程序中设置一次，所有对/和/[`JsonConvert.DefaultSettings`](https://www.newtonsoft.com/json/help/html/P_Newtonsoft_Json_JsonConvert_DefaultSettings.htm)的调用将自动使用默认设置。任何用户为这些调用提供的设置都将覆盖默认设置。`JsonConvert.SerializeObject``DeserializeObject``JToken.ToObject``FromObject`
> 
> 因为在某些情况下 JSON 不应该被自定义，例如 Facebook 或 Twitter 库，默认情况下`JsonSerializer`不会使用`DefaultSettings`，因此为那些框架或应用程序中不应使用默认设置的地方提供选择退出。要创建一个`JsonSerializer`确实使用它们的方法，有一种新`JsonSerializer.CreateDefault()`方法。

请注意，当 ASP.NET 直接调用 Newtonsoft 时，例如在模型绑定或响应格式中，它会选择不使用这些全局默认设置。要配置 ASP.NET 内部使用的默认值，请参阅[Andrei](https://stackoverflow.com/users/2061604/andrei)的[这个答案](https://stackoverflow.com/a/44642045/3744182)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-06-20T00:47:09.377

是的，您确实可以按照 Lodewijk 的[解释](https://stackoverflow.com/a/16439024/3744182)设置默认的 Json.Net 设置。但是 Web API 使用自己的设置，您必须单独设置它们。

## Web API（.NET Core 3.x 及更高版本）

在这些版本中，默认情况下不使用 Json.NET。要使用它，请参考[`Microsoft.AspNetCore.Mvc.NewtonsoftJson`](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.NewtonsoftJson)NuGet 包并执行以下操作：

```
services.AddControllers()
.AddNewtonsoftJson(options => 
{
    options.SerializerSettings.Converters.Add(nnew StringEnumConverter());
}); 
```

## Web API（.NET Core 1.x 和 2.x）

```
services.AddMvc(opts =>
{
    var jsonFormatter = (JsonOutputFormatter) opts.OutputFormatters
        .First(formatter => formatter is JsonOutputFormatter);
    jsonFormatter.PublicSerializerSettings.Converters.Add(new StringEnumConverter());
}); 
```

## Web API (.NET 框架)

```
var config = GlobalConfiguration.Configuration;
config.Formatters.JsonFormatter.SerializerSettings.Converters
    .Add(new StringEnumConverter()); 
```

## 默认全局设置

Json.NET 现在也有一个 API 来设置默认的全局设置：

```
JsonConvert.DefaultSettings = () =>
{
    var settings = new JsonSerializerSettings();
    settings.Converters.Add(new StringEnumConverter());
    settings.ContractResolver = new CamelCasePropertyNamesContractResolver();
    return settings;
}; 
```

# jquery - jquery BA BBQ 添加动画

> ID：15066908
> 
> 赞同：1
> 
> 时间：2013-02-25T12:23:09.730
> 
> 标签：jquery, animation

我想稍微修改一下[jquery BA BBQ](http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic)。我想添加一些动画。

我尝试用这样的动画替换 show() 和 hide() 函数：

```
$( '.bbq-content' ).animate({ height: "100%" },1000); 
```

但它不能正常工作。

我不知道在哪里替换原始 jQuery 中的代码：

```
    $(函数(){

    // 为缓存目的保留 url 到容器的映射。
    变量缓存 = {
    // 如果 url 是 '' （没有片段），显示这个 div 的内容。
    '': $('.bbq-default')
     };

     // 绑定一个事件到 window.onhashchange，当历史状态改变时，
     // 从哈希中获取 url 并显示我们缓存的内容或获取
     // 要显示的新内容。
    $(window).bind('hashchange', function(e) {

    // 以字符串形式获取哈希（片段），删除任何前导 #。注意
    // 在 jQuery 1.4 中，你应该使用 e.fragment 而不是 $.param.fragment()。
    var url = $.param.fragment();

    // 从任何以前的“当前”链接中删除 .bbq-current 类。
    $('a.bbq-current').removeClass('bbq-current');

    // 隐藏任何可见的 ajax 内容。
    $( '.bbq-content' ).children( ':visible' ).hide();

    // 仅当 url 不为空时，将 .bbq-current 类添加到“当前”导航链接。
    url && $( 'a[href="#' + url + '"]' ).addClass( 'bbq-current' );

    如果（缓存[url]）{
      // 因为元素已经在缓存中，所以不需要
      // 已创建，所以不要再次创建它，让我们展示一下吧！
      缓存[url].show();

    } 别的 {
      // 在加载 AJAX 内容时显示“加载”内容。
      $( '.bbq-loading' ).show();

      // 为这个 url 的内容创建容器，并在其中存储对它的引用
      // 缓存。
      缓存[url] = $('')

        // 将内容容器附加到父容器。
        .appendTo('.bbq-content')

        // 通过 AJAX 加载外部内容。请注意，为了保持这个
        // 精简示例，仅显示.infobox 中的内容。你会
        // 想根据你的需要改变它。
        .load（网址，函数（）{
          // 内容加载，隐藏“加载”内容。
          $( '.bbq-loading' ).hide();
        });
    }
     })

     // 由于事件只有在hash变化时才会触发，所以我们需要触发
     // 现在的事件，用于处理页面可能已加载的哈希。
     $(window).trigger('hashchange');

     });`

```

对不起英语，我是法国人。

# python - 如何连接 QLineEdit focusOutEvent

> ID：15066913
> 
> 赞同：2
> 
> 时间：2013-02-25T12:23:25.160
> 
> 标签：python, pyqt4, qlineedit

`QLineEdit`在 Designer 的帮助下，我在 PyQt4 中设计了一个带有 a 的窗口。我转换`.ui`为`.py`使用`pyuic4`. 我创建了另一个`.py`文件并导入和子类化`Ui_Class`.

我想在`QLineEdit`失去焦点时执行一些任务。

只需行按钮单击事件 i 即可连接`QLineEdit`丢失焦点事件

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T15:07:39.427

使用`eventFilter`：

```
class Filter(QtCore.QObject):
    def eventFilter(self, widget, event):
        # FocusOut event
        if event.type() == QtCore.QEvent.FocusOut:
            # do custom stuff
            print 'focus out'
            # return False so that the widget will also handle the event
            # otherwise it won't focus out
            return False
        else:
            # we don't care about other events
            return False 
```

在你的窗口中：

```
# ...
self._filter = Filter()
# adjust for your QLineEdit
self.ui.lineEdit.installEventFilter(self._filter) 
```

# sql - SQL 按不存在的行返回信息

> ID：15066914
> 
> 赞同：2
> 
> 时间：2013-02-25T12:23:26.957
> 
> 标签：sql, sql-server-2008

我在 SQLPlus 上遇到了这个问题：

从这段代码：

```
select distinct username, name, surname
from users
where username in ('user1', 'user2'); 
```

我得到：

```
username         name           surname   
--------------- -------------- -------------
user1            Alex            Ander 
```

但是我需要：

```
username         name           surname   
--------------- -------------- -------------
user1            Alex            Ander
user2            not exists     not exists 
```

或者类似的东西。如果用户不存在，表必须写用户名，其余的也像“不存在”，

请帮忙，

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:36:18.580

这也应该有效；

```
select distinct T.username, 
                coalesce(u.name, 'not exists'), 
                coalesce(u.surname, 'not exists')
from  (values ('user1'),('user2'),('user3')) as T(username)
      left join Users u on T.username = u.username 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:27:14.550

希望现在更清楚地解释它：

我现在拥有的原始代码是：

```
select distinct username, name, surname
from users u, accounts a
where u.user_nr = a.user_nr
and username in (
'existing_user',
'not_existing_user'
) order by username; 
```

它给了我：

```
USERNAME                  NAME            SURNAME  
------------------------- --------------- ---------------
existing_user              Hello           All

1 row selected. 
```

我需要：

```
USERNAME                  NAME            SURNAME  
------------------------- --------------- ---------------
existing_user             Hello           All
not_existing_user     Not Exists      Not Exists

2 row selected. 
```

问题：用户 not_existing_user 在数据库中不存在，但查询必须从代码中显示他，信息 - 用户不在数据库中。对于 500 个用户，我不能单独检查每个人：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:25:43.080

```
select  distinct username
,       coalesce(name, 'not exists')
,       coalesce(surname, 'not exists')
from    (
        select 'user1' as username
        union all
        select 'user2'
        ) list
left join
        users
on      list.username = users.username 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T12:37:31.677

```
SELECT DISTINCT username,
ISNULL(Name,'Not Exists'),
ISNULL(Surname,'Not Exists')
FROM users
  WHERE (username IN ('user1','user2') OR username IS NULL) 
```

# jquery - 使用 nodejs 运行 jquery 组件

> ID：15066915
> 
> 赞同：3
> 
> 时间：2013-02-25T12:23:31.773
> 
> 标签：jquery, node.js

我有一个完全开发的 jquery 组件，比如[jquery full calendar](http://arshaw.com/fullcalendar/)

我的组件似乎在浏览器中运行缓慢（不是那个日历）。所以我想到了使用nodeJs在服务器中运行它。

我想在服务器中进行所有 dom 操作，只需将 html 页面发送到浏览器。如果我从头开始，似乎一切皆有可能，但我不想这样做。这是我打算做的

*   如果用户输入 url，那么它必须访问服务器。
*   然后在服务器中所有的 Js 和 css 都必须被编译
*   然后它必须将 html 文件返回给浏览器
*   当用户再次执行某些操作时，它必须访问服务器并进行所有更改，然后它必须发送到服务器

谁能告诉我如何做到这一点或任何其他最佳替代方式来实现我想要的？一个简单的演示应用程序会更好。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:03:34.883

我认为您关于 DOM 工作方式的问题可能有些混淆。

[虽然可以使用jsDom 之](https://github.com/tmpvar/jsdom)类的库在 node.js 服务器上呈现具有 DOM 的应用程序，但当将相同的页面提供给客户端时，它具有完全不同的 DOM 实例，并且没有任何方法可以两人之间的交流。因此，您的应用程序对服务器上的 DOM 所做的任何更改都不能轻易地传播到客户端上的 DOM。

如果您的组件似乎在浏览器中运行缓慢，那么与尝试将 DOM 操作卸载到服务器相比，您更有可能通过处理组件以使其更有效率获得良好的结果。

如果您查看这两种不同的场景并将它们分解为浏览器实际执行的操作，您就会明白为什么这是一个坏主意。

场景（一）——在服务端渲染 Dom 变化

1.  第 1 步 - 客户端从服务器加载初始 html 页面（慢）
2.  第 2 步 - 用户与客户端页面交互（快速）
3.  第 3 步 - 客户端将用户交互发送回服务器（vslow）
4.  第 4 步 - 服务器加载一个 Dom（慢）
5.  第 5 步 - 服务器运行 Dom 更改（快速）
6.  第 6 步 - 服务器将重新渲染的 HTML 发送回客户端（慢）
7.  第 7 步 - 客户端从服务器呈现新的 HTML（慢）

场景（2）——在客户端渲染 Dom 变化

1.  第 1 步 - 客户端从服务器加载初始 html 页面（慢）
2.  第 2 步 - 用户与客户端页面交互（快速）
3.  第 3 步 - 客户端运行 Dom 更改（快速）
4.  第 4 步 - 客户端呈现更改的 DOM（慢）

与尝试将 DOM 渲染卸载到服务器相比，仅在组件上工作以使其更快会好得多。[这是一篇关于如何加速 jquery 代码的好博文](http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/)。

如果您真的想继续您在问题中建议的工作流程，我建议您查看[jsDom](https://github.com/tmpvar/jsdom)库，但我真的不推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:27:47.433

有一个 jquery 节点包。因此，您可以安装该软件包并使用 jquery，否则您会这样做

为 node.js 安装 jquery

```
npm install jquery 
```

然后将此行添加到您的脚本中

```
var $ = require('jquery'); 
```

如果您在 Windows 上，则在安装 jquery 时可能会遇到 contextify 问题。如果您确实搜索错误消息（本质上您需要为您的环境设置 make）

# oracle-apex - wwv_flow.debug() 与 apex_debug.message()

> ID：15066922
> 
> 赞同：5
> 
> 时间：2013-02-25T12:23:53.363
> 
> 标签：oracle-apex

我编写了一个自定义的 pl sql 函数来进行授权。我知道 Apex 的授权钩子正在调用我的函数。但我需要调试我的 authz 函数内部发生的事情。

在调试我对存储过程进行的 ajax 调用之前，我已经成功地使用了 wwv_flow.debug()。我可以在 apex 的调试窗口中看到我的消息。

但是在调试我的授权功能时，我看不到我的调试消息。我正在尝试同时使用 wwv_flow.debug() 和 apex_debug.message()

这给我带来了两个问题：

1.  wwv_flow.debug() 和 apex_debug.message() 有什么区别？什么时候应该使用每个？

2.  关于为什么我的调试消息在调用我的授权函数期间没有显示的任何想法？

谢谢。

更新：原来我的消息没有显示，因为授权被缓存并且我的 pl/sql 代码没有被调用，所以我解决了问题 #2。我可以看到我的 wwv_flow.debug() 和 apex_debug.messages()。问题＃1仍然存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:40:29.277

**wwv_flow.debug**是一个旧版本，仍然支持向后兼容。

**apex_debug.message**是更现代的版本，支持替换字符串，例如

```
apex_debug.message('the value of %s + %s equals %s', 3, 5, 'eight'); 
```

该示例来自[APEX 4.2 文档](https://docs.oracle.com/database/121/AEAPI/apex_debug.htm#AEAPI29182)

# java - TreeTableModel 和 TreeTableNode 示例

> ID：15066924
> 
> 赞同：1
> 
> 时间：2013-02-25T12:24:04.987
> 
> 标签：java, swingx, treetable, jxtreetable

`TreeTableModel`尽管我在谷歌上搜索，但我还没有找到 a和 a的示例实现`TreeTableNode`。我正在尝试实现 a`JXTreeTable`并且不确定该怎么做。

# c - c 中名称相同但大小写变量和函数名称不同

> ID：15066925
> 
> 赞同：0
> 
> 时间：2013-02-25T12:24:12.610
> 
> 标签：c, microcontroller, keil

我有一个名为 setlocal 的变量和一个名为 void SetLocal(void) 的函数

我正在使用 C51 keil 编译器构建代码，链接器给出以下错误：

“外部属性不匹配公共”

函数和变量不能使用相同的名称吗？有不同的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-02T06:57:33.893

That particular compiler is for embedded systems (using the 8051 chips) and is really targeted for those environments. I've seen compilers in that arena that don't even support floating point, and Keil make it clear that, while it's *based* on C90, there are [deviations](http://www.keil.com/support/man/docs/c51/c51_xa.htm) from that standard.

As per the compiler limitations listed on the [Keil website](http://www.keil.com/support/man/docs/c51/c51_xd.htm):

> Names may be up to 255 characters long. The C language provides for case sensitivity in regard to function and variable names. However, **for compatibility reasons, all names in the object file appear in capital letters.** It is therefore irrelevant if an external object name within the source program is written in capital or small letters.

So it's a safe bet that, as far as the linker is concerned, you have a conflict between the `setlocal` variable and the `SetLocal` function, both of which would be seen as `SETLOCAL`.

That also explains (as stated in one on your comments) why changing the variable name to `setlocal1` fixes your problem. While the symbols are not case sensitive, they *are* unique to 255 characters.

# html - 如何在 html 中将一个 div 放在另一个 div 前面？

> ID：15066929
> 
> 赞同：-5
> 
> 时间：2013-02-25T12:24:21.180
> 
> 标签：html

我有一个问题，我有两个 div：

1.  是一个图像，也是它首先写在 html 代码中
2.  是一些文本，写在第一个 div 之后

现在我遇到了问题：我看到第二个 div 上的第一个 div 这意味着我看不到文本。我想如果我在第一个之后写第二个，我会在第一个之上写第二个。

这是正常的吗？任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:38:19.903

这就是你看的..？

```
 <html>
    <body>
      <style>

       #div_1
       {
         position:absolute;
         left:0px;
         top:0px;
         z-index:-1;
       }
     </style>

    <div id='div_1'>
       <img src="https://www.google.co.in/images/srpr/logo3w.png" > 
    </div>

    <div style="color:#0000FF"  id='div_2'>
       <p>This is some text.</p> 
    </div>

    </body>
  </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:27:05.110

您可以尝试调查 css 属性[z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

# c - 如何处理 Linux Crypto API 的多个页面缓冲区和分散列表？

> ID：15066932
> 
> 赞同：2
> 
> 时间：2013-02-25T12:24:24.530
> 
> 标签：c, memory, linux-kernel, cryptography

我在处理大型缓冲区时遇到了一些麻烦。因为我只在非常小的缓冲区（不大于`PAGE_SIZE`）上测试我的代码，所以我以前没有遇到过这种情况。该代码只是关于加密或解密缓冲区。

目前，代码只设置一个`scatterlist`对象，`sg_set_buf()`调用源缓冲区和目标缓冲区。但看起来，在做这么简单的事情时，如果缓冲区大小超过`PAGE_SIZE`.

显然，我可以通过分配一个较小的缓冲区来绕过该问题，该缓冲区适合单个页面并通过适当的`memcpy()`调用“逐步”处理较大的缓冲区。但由于这是丑陋的，时间和资源消耗......

我想知道是否有办法很好地处理`scatterlist`这种缓冲区的对象？

**编辑**：我忘了说我已经解决了[这个问题](https://stackoverflow.com/questions/13376825/linux-kernel-scatterlist-maximum-length-allowed)。

* * *

**其他编辑**：事实上，我的问题与[user173586 完全相同](https://stackoverflow.com/questions/13376825/linux-kernel-scatterlist-maximum-length-allowed)。问题是，我无法提前知道交给我的缓冲区是否分配有`vmalloc()`or `kmalloc()`。要确定这一点，我只需检查给定地址是否在 [ `VMALLOC_START`, `VMALLOC_END`] 范围内。完成后，我仍然需要很好地设置`scatterlist`对象 - 这是困难的部分 -。

`vmalloc()`我知道我可以检索与-ed 缓冲区对应的页面`vmalloc_to_page()`。至此，我就有了一个`struct page`与我给的地址对应的对象。**我不知道如何获得相应页面中的偏移量。**

我怎样才能知道`page`对象“有效性”？`vmalloc()`我的意思是-ed 缓冲区实际使用了页面的哪个区域。乍一看，似乎我需要检索用于缓冲区的每个页面并为其设置一个`scatterlist`条目，但我不知道应该如何做。

*（任何关于内部`vmalloc()`功能的见解都会有所帮助。我目前对此的了解可以从[这篇文章](http://www.makelinux.net/ldd3/chp-8-sect-4)中推断出来）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T18:01:54.370

关键是 kmalloc 将始终返回物理连续页面中的空间，但 vmalloc 不会。您可以使用 virt_addr_valid 检测 kmalloc 的缓冲区。如果失败，您必须遍历缓冲区中的所有页面并创建单独的分散列表条目。[您可以通过查看最近提交](https://github.com/kohler/click/pull/90)的[click](https://github.com/kohler/click/)来查看示例，尽管此代码重用了相同的单个分散列表。也可以分配 (len/PAGE_SIZE) + 1 个分散列表（最后一个可能实际上没有被使用）并以相同的方式填充它们。

# java - 如何在tomcat上动态加载一个类？

> ID：15066935
> 
> 赞同：3
> 
> 时间：2013-02-25T12:24:42.727
> 
> 标签：java, tomcat, classloader

我已经学会了如何将“.class”文件动态加载到我的程序中，但是如果我在 tomcat id 上运行它就不起作用。这是代码：

```
package testPackage;

public class ModuleEngine {

    public static void main(String pth, String name) {

        ModuleLoader loader = new ModuleLoader(pth, ClassLoader.getSystemClassLoader());

        try {
            Class clazz = loader.loadClass(name);
            Protocol execute = (Protocol)clazz.newInstance(); 
            execute.run();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
    }
}

public class ModuleLoader extends ClassLoader {

    private String pathtobin;

    public ModuleLoader(String pathtobin, ClassLoader parent) {
        super(parent);    
        this.pathtobin = pathtobin;    
    }

    @Override
    public Class findClass(String className) throws ClassNotFoundException {
        try {
            byte b[]= fetchClassFromFS(pathtobin + className + ".class");
            return defineClass(null, b, 0, b.length);
        } catch (FileNotFoundException ex) {
            return super.findClass(className);
        } catch (IOException ex) {
            return super.findClass(className);
        }
    }
} 
```

我在 ModuleEngine 类中运行 main 方法，其中包含类协议子类的路径。这个子类放在不同的包中。因此，当我尝试定义它（defineClass）时，它会尝试加载超类（协议）但未能做到这一点。这是堆栈跟踪：

```
java.lang.ClassNotFoundException: testPackage.Protocol
    at java.lang.ClassLoader.findClass(Unknown Source)
    at testPackage.ModuleLoader.findClass(ModuleLoader.java:30)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at testPackage.ModuleLoader.findClass(ModuleLoader.java:28)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at testPackage.ModuleEngine.main(ModuleEngine.java:13)
    at testPackage.HtmlPage.doGet(HtmlPage.java:27)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T12:26:36.597

而不是`ClassLoader.getSystemClassLoader()`尝试使用`ModuleEngine.class.getClassLoader ()`. 这将返回知道类附近的`ModuleEngine`类的类加载器。

# powershell-3.0 - powershell invoke-webrequest 纯文本文件

> ID：15066937
> 
> 赞同：2
> 
> 时间：2013-02-25T12:24:46.793
> 
> 标签：powershell-3.0

我在 webserve 上有一个 php 脚本，它显示（作为纯文本，没有 html 格式）dhcp 离开信息。输出格式如下，用逗号分隔：

```
dnsname,leavetime,macaddress,ipaddress 
```

我希望能够使用invoke-webrequest powershell 命令解析这些信息并获取mac 地址。

我尝试了以下代码：

```
invoke-webrequest "http://www.xxx.xxx" 
```

控制台的输出是：

```
StatusCode        : 200
StatusDescription : OK
Content           : *hostname*,in 7 days ,**Mac Address**,*ip address*

RawContent        : HTTP/1.1 200 OK
                Keep-Alive: timeout=2, max=100
                Connection: Keep-Alive
                Content-Length: 50
                Content-Type: text/plain; charset=ISO-8859-1
                Date: Mon, 25 Feb 2013 12:04:33 GMT
                Server: Apache

                ega008...
Forms             :
Headers           : {[Keep-Alive, timeout=2, max=100], [Connection, Keep-Alive],        [Content-Length, 50], [Content-Type,
                text/plain; charset=ISO-8859-1]...}
Images            : {}
InputFields       : {}
Links             : {}
ParsedHtml        :
RawContentLength  : 50 
```

而不是这一切，我想要的只是mac地址（突出显示的粗体）

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:59:19.520

你应该使用[`System.Net.Webclient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)

```
$webclient = new-object System.Net.WebClient
$webpage = $webclient.DownloadString("http://www.xxx.xxx") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T14:15:09.167

如果您将下载的内容作为字符串提供（可能使用 CharlesB 建议的 WebClient），您可以使用以下内容将其拆分为键/值对字典：

```
$data=@{}
$webpage.split("`n") |% { $record=$_.split(":"); if($record[1]) { $data[$record[0].trim()]=$record[1].trim() }} 
```

然后您可以将“内容”行的值拆分为一个数组：

```
$content = $data["Content"].split(",")
#
# retrieve the mac with:
$content[2] 
```

# asp.net-mvc - 缓存 Razor 视图，不包括 _Layout

> ID：15066941
> 
> 赞同：0
> 
> 时间：2013-02-25T12:24:57.200
> 
> 标签：asp.net-mvc, caching, asp.net-mvc-4

是否可以缓存视图的内容，不包括共享的 _Layout 我在我的控制器上为 ViewResult 类型的操作设置了输出缓存属性，它还缓存了在 _Layout 上定义的内容。这意味着它会缓存用户名等内容，如果我未登录但之前在登录时访问过该页面，则这些内容可能无效。

将操作更改为 PartialViewResult 会解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:33:54.567

在 MCV 中，缓存基于控制器而不是 View，因此您不能使用 view 或 PartialViewResult`@Html.Action`进行缓存，但您可以使用部分缓存在这种情况下，您必须为所有 Partial 项目定义一个新操作并从结果中调用视图那个动作。

最后不要忘记`Layout = null;`您从操作中调用它的部分视图中的代码，因为它会导致缓存错误，并且对于这个问题也有相同的数据注释，但忘记了它我认为它只是`[PartialAction]`不确定是诚实的。

# wordpress - 如何使用 css 显示边框图像？

> ID：15066944
> 
> 赞同：-1
> 
> 时间：2013-02-25T12:25:14.270
> 
> 标签：wordpress, css

此代码仅在 Google Chrome 和 Mozilla Firefox 中显示边框图像，但在 IE 9 或 10 中不显示。需要对 CSS 和 WordPress 中使用的此代码进行哪些更改？有没有我可以用来实现这一点的插件？

```
.Offset1 {
    width:525px;
    height:auto;
    float:left;
    margin-left:8px;
    border-style:double;
    border-width:30px 30px 30px 30px;
    -moz-border-image:url("<?php echo  $vtheme_options['logo']; ?>") 30 30 30 30 stretch stretch; 
    -webkit-border-image:url("<?php echo  $vtheme_options['logo']; ?>") 30 30 30 30 stretch stretch; 
    -o-border-image: url("<?php echo  $vtheme_options['logo']; ?>")30 30 30 30 stretch stretch;
    border-image:url("<?php echo  $vtheme_options['logo']; ?>") 30 30 30 30 stretch stretch; 
    behavior:url(PIE.htc);
    position: relative; 
}

@media (max-width: 767px) {
    .Offset1{ width:222px;
        margin-left:3px;
    }
} 
```

![在此处输入图像描述](../Images/a56c2725cf132efbc2d9eba5800fec2a.png)

![在此处输入图像描述](../Images/aada016f287626b873995753a7e9823c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:28:55.537

据我所知，`border-image`Internet Explorer 不支持该属性。请参阅此[1](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_border-image_button)个小示例代码。尝试使用不同的浏览器，除了 Internet Explorer 之外的所有工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:05:19.140

那是因为[Internet Explorer 根本不支持border-image，](http://caniuse.com/#search=border-image)而且[PIE 的支持非常具体和有限](http://css3pie.com/documentation/supported-css3-features/#border-image)，更何况IE10 根本不支持。

换句话说，根据 PIE 的文档，您必须拥有非常具体的代码才能使其在 IE9 及更低版本中运行，而**您根本无法使其在 IE 10 中运行**。

我强烈建议只为 Internet Explorer 做一个后备并完成它。

# python - GAE 上具有联合类型应用程序的通配符域

> ID：15066947
> 
> 赞同：0
> 
> 时间：2013-02-25T12:25:22.783
> 
> 标签：python, google-app-engine, webapp2

我已经使用[Steps](https://stackoverflow.com/questions/14695812/programatically-setting-subdomain-on-google-app-engine/14709839#14709839)制作通配符子域以在 Google 应用引擎、Godaddy 和亚马逊路由上工作。它适用于具有身份验证类型的应用程序（在 appengine 仪表板的应用程序设置中找到）是 Google Accounts API。

但是，当我将应用程序身份验证类型更改为联合帐户时，它停止支持通配符子域。使其与联合类型应用程序一起工作的任何想法。

一如既往地感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:19:32.217

发现的问题与应用程序身份验证类型无关。但是，app.yaml 文件存在问题。

# scala - 在没有 @RunWith(classOf[JUnitRunner]) 舞蹈的情况下运行所有 测试？

> ID：15066949
> 
> 赞同：1
> 
> 时间：2013-02-25T12:25:33.170
> 
> 标签：scala, junit, intellij-idea, specs2

有什么方法可以设置 IntelliJ 的 JUnit“运行所有测试”命令来自动获取 Scala Specs2？即删除此片段中的样板注释：

```
@RunWith(classOf[JUnitRunner])
class MySpec extends Specification 
```

必须记住添加这个非常烦人。

我见过`SpecificationWithJUnit`，但这也有点像 hack（并且与 不兼容`TestKit`）。我正在寻找一个 maven/sbt/intelliJ 方面的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:53:15.577

使用 Intellij，您不需要注释来执行您的规范，因为它有自己的 specs2 运行器。我正在使用 IntelliJ 123.100 和最新版本的 Scala 插件（我认为是 82），一切正常（除了[这个问题](http://youtrack.jetbrains.com/issue/SCL-4798)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T10:01:11.007

改用 也许这可以帮助你`@RunWith(classOf[JUnitPlatform])`：`JUnitRunner`

```
import org.junit.jupiter.api.{DisplayName, Test}
import org.junit.platform.runner.JUnitPlatform
import org.junit.runner.RunWith
import org.scalatest.{BeforeAndAfterAll, Matchers}
import org.scalatest.junit.JUnitSuite

@RunWith(classOf[JUnitPlatform])
class Junit5Test  extends JUnitSuite with Matchers with BeforeAndAfterAll {

  override def beforeAll: Unit = { println(">>> beforeAll <<< ") }

  @Test
  @DisplayName("Example with JUnitSuite")
  @throws(classOf[RuntimeException])
  def throwsExceptionWhenCalled() {
    println("Запуск теста...")
    assertThrows[RuntimeException] { throw new RuntimeException }
  }

} 
```

和`build.sbt`文件：

```
val junitJupiter  = "5.2.0"
val junitPlatform = "1.2.0"
libraryDependencies ++= Seq(
  "junit"              % "junit"                   % "4.12" % Test,
  "org.junit.jupiter"  % "junit-jupiter-api"       % junitJupiter % Test,
  "org.junit.jupiter"  % "junit-jupiter-engine"    % junitJupiter % Test,
  "org.junit.jupiter"  % "junit-jupiter-params"    % junitJupiter % Test,
  "org.junit.platform" % "junit-platform-launcher" % junitPlatform % Test,
  "org.junit.platform" % "junit-platform-engine"   % junitPlatform % Test,
  "org.junit.platform" % "junit-platform-runner"   % junitPlatform % Test,
) 
```

# eclipse - java.lang.ClassNotFoundException：org.hibernate.criterion.Projection

> ID：15066950
> 
> 赞同：0
> 
> 时间：2013-02-25T12:25:41.557
> 
> 标签：eclipse, hibernate, servlets

早上好，我不知道如何解决该异常，我在 Eclipse 下使用 ApcheTomcat 7，每次运行我的 servlet 时都会抛出该异常，为了更清楚，这里是我的 servlet：

```
package servlets;

import java.util.*;
import java.io.IOException;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
 import dao.*;

@WebServlet("/AdminServlt")
public class AdminServlt extends HttpServlet {
private static final long serialVersionUID = 1L;
CarHome carDao;

public void init(ServletConfig config) throws ServletException{
    carDao = new CarHome();
    }

protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    populateAdminView(request, response);
}

protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
}

  public void populateAdminView(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException{
    ArrayList productsList = (ArrayList) carDao.extractAdminAttributes();
    HttpSession session = request.getSession(true);
    session.setAttribute("product_list",productsList);
    RequestDispatcher rd = request.getRequestDispatcher("Admin.jsp");
    rd.forward(request, response);
}

} 
```

这是`CarHome.java`

```
package dao;
import java.util.ArrayList;
import java.util.List;
import javax.naming.InitialContext;
import org.apache.commons.logging.Log;  
import org.apache.commons.logging.LogFactory;
import org.hibernate.LockMode;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.*;
import entity.*;

    public class CarHome {

private static final Log log = LogFactory.getLog(CarHome.class);

private final SessionFactory sessionFactory = getSessionFactory();

public List extractAdminAttributes() {
    log.debug("Extracting car attributes for administrator view");
    try {
        ArrayList results = (ArrayList) sessionFactory
                .getCurrentSession()
                .createCriteria("pojo.Car")
                .setProjection(
                        Projections.projectionList()
                                .add(Projections.property("carDesc"))
                                .add(Projections.property("price"))
                                .add(Projections.property("quantity")));

        return results;
    } catch (RuntimeException re) {
        log.error("find by admin view failed");
        throw re;
    }
  }
  } 
```

这是异常的堆栈跟踪

```
java.lang.ClassNotFoundException: org.hibernate.criterion.Projection
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
servlets.AdminServlt.init(AdminServlt.java:31)
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T10:50:53.573

我已经解决了我的问题，这很简单，主要原因是当我把 hibernate.cor.jar 文件放在应用程序的 web 内容下的 lib 文件夹中时，它工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-25T14:28:44.463

我遇到了同样的问题，但在我的情况下，我使用 eclipse 在顶部重新订购了 hibernate-cor.jar

选择项目-->右键单击-->构建路径-->订单选项卡-->选择hibernate-cor.jar点击顶部

# iphone - 如何在 iOS 中将 Maya 二进制 (.mb) 文件导出到 openGL

> ID：15066952
> 
> 赞同：0
> 
> 时间：2013-02-25T12:25:44.177
> 
> 标签：iphone, ios, opengl-es, maya, after-effects

我有由 Maya 创建的带有动画的 .mb(Maya Binary) 文件。我想在 iOS 的 OpenGL 项目中使用这个文件。我已经搜索了这个，我得到了一个结果，一些脚本将给定目录中的所有 Maya 二进制 (.mb) 文件转换为 OpenGL Performer 二进制 (.pfb) 格式。

但是如何使用这个 .pfb 文件。谁能告诉我如何在 iOS 的 openGL 项目中使用 .mb 或 .pfb 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:13:20.257

根据我对 Maya 的了解，最好使用 .ma 文件而不是 .mb，因为它是用未压缩的文本编写的，因此您可以更好地解释它。一个例子是，一些动画师使用 ma 文件格式，以便他们可以使用文本编辑器打开它，并在某些事情搞砸导致 Maya 崩溃时直接更改值（我以前发生过这种情况）。但无论如何，如果你这样做，那么你可能会创建一些从中提取信息的东西。

# iphone - iPhone之间的屏幕共享

> ID：15066956
> 
> 赞同：2
> 
> 时间：2013-02-25T12:25:49.010
> 
> 标签：iphone, ios, xcode, networking

我想使用本地网络在两部 iPhone 之间共享屏幕，但不幸的是我没有看到任何教程或帮助，任何人都可以指导我如何实现这个？

场景如下：

我在两部 iPhone 上安装了我的应用程序：iPhoneA 和 iPhoneB。iPhoneA 就像服务器一样，向 iPhoneB 发送请求以共享它的屏幕，因为 iPhoneB 接受请求，iPhoneB 的屏幕将开始在 iPhoneA 上监控。iPhoneA 只能查看屏幕，不能做任何其他事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:50:20.183

几个想法作为起点，

1.  你可以看看 AirPlay 的能力。您可以使用 AirPlay 轻松地与 Mac 连接的屏幕共享您的 iPhone 屏幕，也许这可以用来在两台 iPhone 之间进行共享？
2.  有一个类似于 AirPlay 的流媒体音乐应用程序（我不记得它的名字了）也许这会有所帮助
3.  ZeroC Ice 框架可用于流式传输。我已经设法让它在 Android 上运行，但没有使用他们的 iOS 产品[Ice Touch的经验](http://www.zeroc.com/icetouch/index.html)

# android - 如何使用 WSDL2Code 生成的文件？

> ID：15066958
> 
> 赞同：2
> 
> 时间：2013-02-25T12:25:52.797
> 
> 标签：android, asmx, ksoap2, android-ksoap2, android-parser

我正在开发一个 android 应用程序。我需要使用网络服务。我有一个 .NET 网络服务。[我从WSDL2Code](http://www.wsdl2code.com/Pages/Home.aspx)转换器生成了 Java 文件，但我不知道如何对这些文件使用服务，因为没有示例。我正在实施客户端。如果有人知道如何解决这个问题，请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T22:57:08.803

检查生成的文件，“SampleService.java”属性“url”，可能是空的。填写您的 Web 服务 URL。

```
public String NAMESPACE ="http://************/";
public String url="";
public int timeOut = 60000;
public IWsdl2CodeEvents eventHandler;
public SoapProtocolVersion soapVersion; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T06:46:38.083

在这个站点中有一个示例部分，您无法联系 support@wsdl2code.com 寻求帮助...

一般来说，类 - “servicename”具有所有方法，例如（从站点复制粘贴）

```
 SampleService srv1 = new SampleService();
 req = new Request();                     
 req.companyId = "1";
 req.userName = "userName";                                     
 req.password = "pas";
 Response response =    srv1.ServiceSample(req); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T12:47:12.870

如果您阅读服务类（例如：Log_Service），您可以看到 url 属性为空。在使用方法之前，您可以在实例中设置它。

```
 ls = new Log_Service();
 ls.setUrl('http://ws.whatyouwant.here'); 
```

然后提出你的要求。

# android - 如何构建一个与来自 android sdk 的 adb 大小相同的 adb

> ID：15066960
> 
> 赞同：1
> 
> 时间：2013-02-25T12:26:08.360
> 
> 标签：android, adb

我想从android官方源代码构建一个adb工具。我可以通过键入以下 cmds 来完成这项工作：

```
apt-get install mingw32
make USE_MINGW=y adb 
```

我的问题是从源代码构建的 adb 工具大小约为 4.4MB ，而 android sdk/platform-tools 中的 adb 大小只有 796KB 。

这种差异是怎么来的？任何人都可以给出任何想法吗？我想知道如何编辑 make 文件或源代码以减小输出文件的大小。

======

google了一段时间后，据说只是删除调试信息以减小大小，所以似乎我接近最终的解决方案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T05:36:57.823

除了 Longerian 的回答之外，还有其他技巧可以导致适度减小尺寸。有关详细信息，请参阅[Android NDK：如何减少二进制文件大小](http://blog.algolia.com/android-ndk-how-to-reduce-libs-size/)。您可能需要更改一些构建标志和选项。

# algorithm - 如何在允许添加和删除的数字流中找到最频繁的元素

> ID：15066961
> 
> 赞同：0
> 
> 时间：2013-02-25T12:26:18.447
> 
> 标签：algorithm, hash, heap

我是论坛的新手，但我已经阅读了指南并检查了重复项（这是我找到的最接近的：（[如何在词流中找到最常见的词？](https://stackoverflow.com/questions/11547686/how-to-find-the-most-frequent-word-in-a-word-stream)）但这会搜索出现超过 51% 的数字时间。如果它已经存在，请给我指出一个副本。

所以我的问题是给定一个数字流，找到最常出现的数字。例如：2,3,4,2,5：Ans = 2。这很简单，但如果我可以删除和添加新数字会发生什么。示例：2,3,5,3,4,2,2：Max = 2 Delete(2)：Max = 2；删除（2）：最大 = 3 ...

我想到了一个最大堆以及一个包含指向堆中每个节点的指针的哈希表，因此更新为 O(log n)，找到最大值为 O(1)。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:31:49.983

如果您主要对快速更新感兴趣，您可以使用将键（整数）与值（每个整数的当前出现计数）相关联的任何数据结构。“添加”和“删除”整数将通过增加和减少外观计数来简单地处理。

对于基于二叉树的容器，操作为 O(logN)，而对于哈希表，操作为 O(1)。在每种情况下，“找到最大值”都是 O(N)。

如果您主要对快速“找到最大值”感兴趣，那么您提出的解决方案就是最好的。

# c - 执行/时间差异取决于语句样式

> ID：15066962
> 
> 赞同：1
> 
> 时间：2013-02-25T12:26:22.347
> 
> 标签：c, iar

以下两个语句在时间/执行方面有何不同。我正在研究 AT91CSAM7x512 设备。我们能够通过更改以下分配样式来解决一个麻烦的错误。

我正在使用 IAR Embedded Workbench Ver 4.41A。这是由于某些编译器指令还是其他原因而发生的？

* * *

```
AT91C_BASE_PIOA->PIO_PER  |= (((unsigned int)1<<12) | ((unsigned int)1<<13));  
AT91C_BASE_PIOA->PIO_ODR  |= (((unsigned int)1<<12) | ((unsigned int)1<<13));  
AT91C_BASE_PIOA->PIO_IFER |= (((unsigned int)1<<12) | ((unsigned int)1<<13));  
MARK1.occurrence = 0;  
MARK2.occurrence = 0; 
```

* * *

```
AT91C_BASE_PIOA->PIO_PER  |= (unsigned int)1<<12) ;  
AT91C_BASE_PIOA->PIO_ODR  |= (unsigned int)1<<12) ;  
AT91C_BASE_PIOA->PIO_IFER |= (unsigned int)1<<12) ;  
MARK1.occurrence = 0;

AT91C_BASE_PIOA->PIO_PER  |= (unsigned int)1<<13) ;  
AT91C_BASE_PIOA->PIO_ODR  |= (unsigned int)1<<13) ;  
AT91C_BASE_PIOA->PIO_IFER |= (unsigned int)1<<13) ;  
MARK2.occurrence = 0; 
```

这与处理堆栈的方式有什么关系吗@指令我对处理器比较陌生，需要帮助。

# django - Django Admin：根据先前的字段值填充字段

> ID：15066971
> 
> 赞同：3
> 
> 时间：2013-02-25T12:26:56.613
> 
> 标签：django, django-admin

我在 django admin 中有一个模型如下

```
ChoiceA= (
      ("on-false","on-false"),
       ("on-true","on-true"),
     )

ChoiceB =  (
        ("always","always"),
        ("never","never"),
       )
   id = models.CharField(verbose_name="Field",max_length=32)
   type = models.CharField(verbose_name="Expression",max_length=32)
   action = models.CharField(max_length=32, choices=x) 
```

现在基于用户输入的类型，即如果用户输入 type = "a"，则操作的选择应设置为 ChoiceA，如果用户输入 type =“b”，则操作的选择应设置为 ChoiceB。如何在 Django Admin 中实现这一点？

编辑：

action_change.js

```
jQuery(document).ready(function(){
$("#id_type").change( function(event) {
$.ajax({
        "type"     : "POST",
        "url"      : "/action_choices/",
        "dataType" : "json",
        "cache"    : false,
        "error"   :  alert("hello"),  
        "success"  : function(json) {
            $('#id_action >option').remove();
            for(var j = 0; j < json.length; j++){
                $('#id_action').append($('<option></option>').val(json[j][0]).html(json[j][1]));
            }
        }

});
});
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T05:40:47.250

您可以使用 Ajax 和 jQuery 来实现它：

### 模型.py：

```
type   = models.CharField(verbose_name="Expression",max_length=32)
action = models.CharField(max_length=32, choices = (('', ''), )) 
```

### 管理员.py：

```
class MyModelAdmin(admin.ModelAdmin):
    list_display = ('type', )

    class Media:
        js = ['/static/js/action_change.js']

admin.site.register(MyModel, MyModelAdmin) 
```

### 网址.py：

```
url(r'^action_choices/', 'myproject.myapp.views.action_choices'), 
```

### 视图.py：

```
def action_choices(request): 
    action_list = []
    ChoiceA = ("on-false", "on-true")
    ChoiceB = ("always", "never")

    action_type = request.GET.get('action_type')
    if str(action_type).lower() == 'a':
        choices = ChoiceA
    elif str(action_type).lower() == 'b':
        choices = ChoiceB
    else:
        choices = ()

    [action_list.append((each,each)) for each in choices]
    json = simplejson.dumps(action_list)
    return HttpResponse(json, mimetype='application/javascript') 
```

`action_change.js`在您的静态文件夹中创建具有以下内容的文件，并`class Media`在`ModelAdmin`.

### action_change.js

```
(function($){   
    $(function(){
        $(document).ready(function() {
            $('#id_type').bind('keyup', type_change);           
            $('#id_action >option').show();
        });
});  
})(django.jQuery);

// based on the type, action will be loaded

var $ = django.jQuery.noConflict();

function type_change()
{
    var action_type = $('#id_type').val();
    $.ajax({
            "type"     : "GET",
            "url"      : "/action_choices/?action_type="+action_type,
            "dataType" : "json",
            "cache"    : false,
            "success"  : function(json) {
                $('#id_action >option').remove();
                for(var j = 0; j < json.length; j++){
                    $('#id_action').append($('<option></option>').val(json[j][0]).html(json[j][1]));
                }
            }           
    })(jQuery);
} 
```

这应该适用于您要求的场景。我在下面给出我的建议：

### 模型.py

```
type   = models.CharField(verbose_name="Expression",max_length=32, choices = (('a', 'a'), ('b', 'b'), ))
action = models.CharField(max_length=32, choices = (('', ''), )) 
```

### action_change.js（第 5 行）

```
$('#id_type').bind('change', type_change); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:46:47.217

您必须`action`使用所有可能的选择来初始化该字段，否则 Django 会抱怨以前不存在的选择不是有效的选择。

我的建议是使用所有可能的选项来初始化该字段，并使用 JavaScript 来切换选项的可见性，具体取决于`type`. 有一些插件可以处理 Django admin 中的动态字段，但我见过的大多数插件都处理需要查找的 ForeignKey 或 ManyToMany 字段。

您可能最好通过`Media`元类将一些 JavaScript 添加到您的管理表单并自己处理。

# arrays - 排序 d 个已排序数组的算法

> ID：15066972
> 
> 赞同：2
> 
> 时间：2013-02-25T12:27:00.220
> 
> 标签：arrays, algorithm, insertion-sort

请帮助理解以下算法的运行时间
我已经对总共 n 个元素的数组（每个数组有超过 1 个元素）进行了排序。 如果我没记错的话
，我想要一个大小为 n 的排序数组 如果我将这个 d 数组连接成一个 n 元素数组并用插入排序对其进行排序，那么插入排序在部分排序的数组上线性运行，它 不是部分排序的数组在这个数组上插入排序的运行时间不会是 O(n) 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:32:40.437

插入排序是**O(n²)**，即使原始数组是几个预排序数组的串联。您可能需要使用[mergesort](http://en.wikipedia.org/wiki/Merge_sort)将多个排序数组组合成一个排序数组。这将为您提供**O(n·ln(d))**性能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T12:30:53.920

不，这将花费二次时间。插入排序只有在每个元素与它在排序数组中的点之间的距离最多为恒定距离*d*时才是线性的，在这种情况下它需要 O( *nd* ) 时间——这就是部分排序的含义。你没有那个保证。

只有在子数组的数量保证是一个小常数的假设下，您才能在线性时间内执行此操作。在这种情况下，您可以使用[*k*路合并](http://xlinux.nist.gov/dads/HTML/kwaymerge.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:35:26.473

如果已知数组已排序，则只需将每个数组视为一个队列，对“头”进行排序，选择最小的头放入新数组中，然后从其数组中“弹出”选定的值.

如果 D 很小，那么简单的冒泡排序可以很好地对头部进行排序，否则您应该使用某种插入排序，因为只需将一个元素放入顺序中。

我相信这基本上是一种“合并排序”。当要排序的列表超出工作存储空间时非常有用，因为您可以先对较小的列表进行排序，而无需颠簸，然后使用非常少的工作存储空间进行组合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T12:30:07.930

**对于较小**的 N 值，插入排序是相当（相对）线性的。如果 N 很大，那么您的性能很可能是 N^2。

我相信，如果 N 足够大，子数组排序的事实不会有太大帮助。

[Timsor](http://en.wikipedia.org/wiki/Timsort) t 是部分排序数组的良好候选者

# android - 后应检测到文本更改

> ID：15066975
> 
> 赞同：1
> 
> 时间：2013-02-25T12:27:29.017
> 
> 标签：android, android-edittext, autocompletetextview

在 AutoCompleteTextView 中，我想在用户输入暂停 1 秒后显示自动完成列表。我尝试使用处理程序

```
handler.postDelayed( new Runnable() {

            @Override
            public void run() {

                // TODO Auto-generated method stub
                if ( text.length() >= 3 ) {
                    // do something                     

                } else if ( text.length() == 0 ) {
                    // do something

                }
            }

        }, 1000 ); 
```

此代码是 onTextChanged 的​​一部分。所以它发生的情况是，只要在那一刻有文本更改 postDelayed 被调用，内部代码将在一秒钟后被调用。那么我怎样才能防止这种情况发生，所以只有当用户在输入时有 1 秒的暂停时才会调用内部代码。

例如：如果我输入 Ind（暂停 1 秒），则应该执行内部代码。但是我输入 India 然后内部代码不应该为 Ind, Indi, India 执行。需要你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:30:55.653

创建两个包含时间戳的静态变量。
`lastTimeStamp`，`currentTimeStamp`然后你可以做这样的事情：

```
 @Override
        public void run() {
            if (currentTimeStamp - lastTimeStamp > 1000) {
               // TODO Auto-generated method stub
               if ( text.length() >= 3 ) {
                  // do something                     

               } else if ( text.length() == 0 ) {
                     // do something

               }
            }
        } 
```

**新的方法：**

在 onTextChanged 方法的开头，将当前 TimeStamp 放入类变量中。
此后在 onTextChanged 中创建一个 AsyncTask，这只是 `Thread.sleep(1000)`在 doInBackground 方法中执行的操作。
然后您在 postExcute 方法中创建一个 if 语句，检查类变量中的 TimeStamp 与当前 TimeStamp 之间的差异是否大于 1000 发布您的处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-05T16:07:45.770

我只是站在同样的问题上。
我正在调用 Google 地理编码建议 API onTextChanged()，这导致了很多问题。用户键入会导致大量 API 请求，其中大多数不是必需的，并且会耗尽 API（成本）并降低用户从应用程序获得的体验。

我在这里考虑了解决方案，但最后我不喜欢其中的任何一个，它们看起来不干净或像黑客一样。
我不想进一步调用 UI 来获取 View 的当前值（再次）或检查系统时间。

最初的问题实际上已经解决了这个问题，它只是在用户键入时导致多个可运行文件处于活动状态。
所以问题应该是：“如何在它引起麻烦之前删除我的匿名可运行文件？”

您所要做的就是使用原始方法（使用匿名可运行的延迟调用），并且每当调用 onTextChanged 函数时，您都可以删除任何以前的可运行。
您还可以扩展代码并检查值是否真的发生了变化（例如使用全局先前值字符串），因此如果用户输入一个字符并再次删除它，则可运行对象不会被杀死。

因此，您需要做的就是： 1\. 将 Handler 设为类的变量，而不是在 onTextChanged 中创建它。
2\. 在 onTextChanged 开始时，从处理程序中删除可运行对象

这是一个功能齐全的示例：

```
 Handler onchangeHandler =  new Handler();
    String last_onTextChanged=""; // may speed up some cases of user input, can be removed
    @Override
    public void onTextChanged(CharSequence charSequence, int i, int i2, int i3)
    {
        final String value = charSequence.toString();
        if (value.length() < 3) {autoCompleteAdapter.clear();return;} // threshold of 3 chars

        if (!last_onTextChanged.equals(value))
            onchangeHandler.removeCallbacksAndMessages(null);
        else
            return;
    last_onTextChanged=value;
    onchangeHandler.postDelayed(new Runnable()
    {
        @Override
        public void run()
        {
            // RUN CODE HERE, fill your autoCompleteAdapter etc.
        }
    },800);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:55:55.853

有2个选项：

1.  当您要运行下一个任务时，使用 Timer 并在以前的任务上调用 cancel()。

2.  扩展 Runnable 并为此自动完成传入一个字符串。如果此字符串不等于视图中的当前字符串（这意味着用户更改了字符串），则不应显示自动完成。

代码示例：

```
abstract class MyRunnable {
    private String str;

    public MyRunnable(String str) {
        this.str = str;
    }
}

...

handler.postDelayed(new MyRunnable(currentViewStr) {

    @Override
    public void run() {
        if (currentViewStr.equals(str)) {
            // show autocompletion
        }
    }
}, 1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T13:23:07.243

您也可以`Runnable`先取消消息队列中的前一个消息`onTextChanged()`

# php - 格式回显 json_encode

> ID：15066976
> 
> 赞同：4
> 
> 时间：2013-02-25T12:27:29.057
> 
> 标签：php, json

我想格式化回显 json_encode，目前的输出是

```
{"results":{"course":"CC140","books":{"book":[[{"id":"300862","title":"Building object-oriented software","isbn":"0070431965","borrowedcount":"6"}]]}}} 
```

而我想像这样输出：

```
{
    "results": {
        "course": "CC140",
        "books": {
            "book": [
                [
                    {
                        "id": "300862",
                        "title": "Building object-oriented software",
                        "isbn": "0070431965",
                        "borrowedcount": "6"
                    }
                ]
            ]
        }
    }
} 
```

这是生成 JSON 的代码

```
$temp = array();
    foreach ($my_array as $counter => $bc) {
        $temp['id'] = "$id[$counter]";
        $temp['title'] = "$title[$counter]";
        $temp['isbn'] = "$isbn[$counter]";
        $temp['borrowedcount'] = "$borrowedcount[$counter]";
        $t2[] = $temp;
    }

        $data = array(
  "results" => array(
    "course" => "$cc",
    "books" => array(
      "book" =>
      array(  
        $t2
      )
    )
  )
);
    echo json_encode($data); 
```

任何帮助或指点将不胜感激，谢谢

添加这个

```
header('Content-type: application/json');
echo json_encode($data, JSON_PRETTY_PRINT); 
```

格式化 JSON，但标头也超出了整个 HTML 文档

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-25T12:31:31.357

我要给出的第一条建议是：不要。JSON 是一种数据格式。使用工具处理它，而不是尝试让您的服务器格式化它。

如果您要忽略这一点，请参阅该[`json_encode`函数](http://php.net/json_encode)的手册，其中提供了一个*选项*列表，其中包括`JSON_PRETTY_PRINT`描述为*在返回的数据中使用空格来格式化它。自 PHP 5.4.0 起可用。*

因此，步骤是：

1.  确保您使用的是 PHP 5.4.0 或更新版本
2.  `json_encode($data, JSON_PRETTY_PRINT);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T12:31:30.907

您可以`json_encode($data, JSON_PRETTY_PRINT)`在 php 5.4+中使用

在 php 5.3 及以下版本中，您可以尝试使用正则表达式对其进行格式化，但这不太安全（或者您可以使用库来编码 json）。

# ms-access - 更新由连接表提供支持的子表单中的记录

> ID：15066977
> 
> 赞同：0
> 
> 时间：2013-02-25T12:27:34.190
> 
> 标签：ms-access

我的访问数据库包含以下表格：Person、Object 和 Sub。

Sub是Person和Object之间的关系表。一个 Object 最多可以有 1 个 Person，一个 Person 可以有任意数量的 Object。

我有一个显示人员详细信息的人员表单和一个数据表子表单，显示人员的所有分配对象 - 即对象的复合主键（两个字段）和子表中的两个附加列。

到目前为止一切正常。我可以在 Person 表单中插入、更新和删除子分配。但是子表单也应该显示来自 Object 表的两列。如果我只是将子表单数据源设置为连接查询，我仍然可以插入记录但不能更新现有记录：

> 您对表请求的更改不成功，因为它们会在索引、主键或关系中创建重复值。

我尝试过使用外部连接和子选择，但我无法让它工作。我已在设计视图中将对象列的文本字段更改为组合框，因此我可以使用单独的查询，但我只能输入一个有界列 - 但我有一个复合主键。

如何在不破坏修改的情况下显示这两个附加列？

# sql - 如何跨多个数据库服务器使用 MERGE 语句？

> ID：15066982
> 
> 赞同：1
> 
> 时间：2013-02-25T12:27:48.210
> 
> 标签：sql, sql-server, ssis

我的源和目标表存在于不同的服务器上。我正在使用*`Execute SQL Task`*编写合并语句来同步它们。

谁能解释我如何引用我内部不同服务器上存在的两个不同数据库*`Execute SQL Task`*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:37:12.390

### 可能的方法：

我建议采用以下方法，而不是尝试在两个数据库服务器之间使用*`MERGE`*语句。*`Execute SQL Task`*

### 方法#1：

*   *`OLEDB Connection Managers`*为每个 SQL Server 实例创建两个。例如，如果您有两个数据库 SourceDB 和 DestinationDB，您可以创建两个名为*`OLEDB_SourceDB`*和的连接管理器*`OLEDB_DestinationDB`*。如果您愿意，也可以使用 ADO.NET 连接管理器。根据我在基于 SSIS 的书籍中阅读的内容，OLEDB 的性能优于 ADO.NET 连接管理器。

*   将 a 拖放`Data Flow Task`到“*控制流*”选项卡上。

*   在*Data Flow Task*中，配置一个*`OLE DB Source`*从源数据库表中读取数据。

*   使用*`Lookup Transformation`*它使用源表和目标表之间的唯一键检查数据是否已存在于目标表中。

*   如果目标表中的源表行**`does not exist`**，则使用插入行到目标表中`OLE DB Destination`

*   如果源表行在**`exists`**目标表中，则使用另一个`OLE DB Destination`.

*   *在控制流*选项卡*`Execute SQL Task`*上的数据流任务之后放置一个。编写一个查询，该查询将使用临时表数据更新目标表中的数据。

 *检查以下 SO 问题的答案以获取详细步骤。

*[如何优化 SSIS 包中的 Upsert（更新和插入）操作？](https://stackoverflow.com/questions/14819999/how-do-i-optimize-upsert-update-and-insert-operation-within-ssis-package)*

### 方法#2：

*   *`OLEDB Connection Managers`*为每个 SQL Server 实例创建两个。例如，如果您有两个数据库 SourceDB 和 DestinationDB，您可以创建两个名为*`OLEDB_SourceDB`*和的连接管理器*`OLEDB_DestinationDB`*。

*   将 a 拖放`Data Flow Task`到“*控制流*”选项卡上。

*   在*数据流任务*中，配置一个*`OLE DB Source`*以从源数据库表中读取数据并使用*`OLE DB Destination`*.

*   *`Execute SQL Task`*在*控制流*选项卡*`Data Flow Task`*上放置一个。编写一个在临时表和目标表之间使用 MERGE 语句的查询。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:39:27.047

请参阅此链接 - [http://technet.microsoft.com/en-us/library/cc280522%28v=sql.105%29.aspx](http://technet.microsoft.com/en-us/library/cc280522%28v=sql.105%29.aspx)

基本上，要做到这一点，您需要使用数据流任务将来自不同服务器的数据获取到同一个位置，然后执行执行 SQL 任务来进行合并。

Merge 和 Merge Join SSIS Data Flow 任务看起来不像您想做的那样。**

# magento - Magento 如何压缩已上传的产品图片

> ID：15066987
> 
> 赞同：1
> 
> 时间：2013-02-25T12:28:27.943
> 
> 标签：magento

我想知道如何压缩我的 magento 商店中已有的产品图像，以便更快地加载我的网站。

是否有任何技术可以帮助我更快地加载网站哪些内容重图像

每个图像内容大小超过 1 MB

有人对此有任何想法吗？

我只是想提高我的网站性能，我尝试重新调整它的大小以输出它们，但它会降低图像的质量，而且它不会影响我的网站性能。

期待您的热心回复！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T13:55:43.790

[尝试使用Imagemagick](http://www.imagemagick.org/)处理它们：

```
find /path/to/media/catalog -type f -iname "*.jpg" -print0 | xargs -0 mogrify -strip -interlace Plane -quality 85% -monitor 
```

这将剥离元数据，启用渐进式加载并将 jpg 质量降低到 85%。一定要先做好备份！

# sql - 如果结果为空，PostgreSQL 不过滤

> ID：15066988
> 
> 赞同：1
> 
> 时间：2013-02-25T12:28:31.803
> 
> 标签：sql, postgresql, query-optimization, conditional

我想知道是否可以仅通过一个查询获得以下行为。

过滤结果，`WHERE`但仅在结果不为空时才应用过滤器，例如可选的`WHERE`.

例如，考虑到有一个 users 表，我想从西班牙检索所有用户，但如果没有，那么我想要所有用户（比如 Where 不会被应用）。

代替：

```
SELECT * FROM users WHERE country = sp

If result empty then

SELECT * FROM users 
```

我想在一个 sql 语句中执行此行为...有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:46:30.847

```
select *
from users
where
    country = sp
    or not exists (select 1 from users where country = sp) 
```

# c# - 如何在没有列表定义的情况下将列表列添加到列表实例？

> ID：15066990
> 
> 赞同：2
> 
> 时间：2013-02-25T12:28:43.683
> 
> 标签：c#, xml, sharepoint-2010

列出实例 Elements.xml 文件：

```
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <ListInstance Title="listname"
                OnQuickLaunch="TRUE"
                TemplateType="100"
                FeatureId="00bfea71-de22-43b2-a848-xxXxxxXxx"
                Url="Lists/listname"
                Description="">
  </ListInstance>
</Elements> 
```

是否可以仅在此文件可用的情况下添加列？还是我被迫使用列表定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T05:31:23.390

将一个新文件添加到名为 Schema.xml 的列表实例中。
把代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<List xmlns:ows="Microsoft SharePoint" Title="listname" FolderCreation="FALSE" Direction="$Resources:Direction;" Url="Lists/listname" BaseType="0" xmlns="http://schemas.microsoft.com/sharepoint/">
  <MetaData>
    <ContentTypes>
      <ContentType ID="0x01" Name="Item" Group="List Content Types" Description="Create a new list item."  Overwrite="TRUE" FeatureId="{d725a6e2-53f9-40f6-897a-d0e6a05f9588}">
        <Folder TargetName="Item" />
        <FieldRefs>
          <FieldRef Name="LinkTitleNoMenu"></FieldRef>
          <FieldRef Name="LinkTitle"></FieldRef>
          <FieldRef Name="Title"/>
          <FieldRef ID="{07BCD344-0A65-4201-BB9F-302C52EA326C}" Name="User" DisplayName="User"/>
        </FieldRefs>
      </ContentType>
    </ContentTypes>
    <Fields>
      <Field ID="{2C5C4E9D-91D8-4995-8B08-20F323E42DF2}" Name="LinkTitle" DisplayName="Title" Type="Text"></Field>
      <Field ID="{D9B62993-78E7-45D0-BD1A-5DAE2C87E84A}" Name="LinkTitleNoMenu" DisplayName="Title" Type="Text"></Field>
      <Field ID="{34124B16-F636-4894-92C1-22BDCAA6FAFE}" Name="Title" DisplayName="Title" Type="Text" Required="TRUE"></Field>
      <Field ID="{07BCD344-0A65-4201-BB9F-302C52EA326C}" Name="User" DisplayName="User" Type ="Text"></Field>
    </Fields>
    <Views>
      <View BaseViewID="0" Type="HTML" MobileView="TRUE" TabularView="FALSE">
        <Toolbar Type="Standard" />
        <XslLink Default="TRUE">main.xsl</XslLink>
        <RowLimit Paged="TRUE">30</RowLimit>
        <ViewFields>
          <FieldRef Name="LinkTitleNoMenu"></FieldRef>
          <FieldRef ID="{07BCD344-0A65-4201-BB9F-302C52EA326C}" Name="Value" DisplayName="Value"/>
        </ViewFields>
        <Query>
          <OrderBy>
            <FieldRef Name="Modified" Ascending="FALSE"></FieldRef>
          </OrderBy>
        </Query>
        <ParameterBindings>
          <ParameterBinding Name="AddNewAnnouncement" Location="Resource(wss,addnewitem)" />
          <ParameterBinding Name="NoAnnouncements" Location="Resource(wss,noXinviewofY_LIST)" />
          <ParameterBinding Name="NoAnnouncementsHowTo" Location="Resource(wss,noXinviewofY_ONET_HOME)" />
        </ParameterBindings>
      </View>
      <View BaseViewID="1" Type="HTML" WebPartZoneID="Main" DisplayName="$Resources:core,objectiv_schema_mwsidcamlidC24;" DefaultView="TRUE" MobileView="TRUE" MobileDefaultView="TRUE" SetupPath="pages\viewpage.aspx" ImageUrl="/_layouts/images/generic.png" Url="AllItems.aspx">
        <Toolbar Type="Standard" />
        <XslLink Default="TRUE">main.xsl</XslLink>
        <RowLimit Paged="TRUE">30</RowLimit>
        <ViewFields>
          <FieldRef Name="LinkTitle"></FieldRef>
          <FieldRef ID="{07BCD344-0A65-4201-BB9F-302C52EA326C}" Name="User" DisplayName="User"/>
        </ViewFields>
        <Query>
          <OrderBy>
            <FieldRef Name="ID"></FieldRef>
          </OrderBy>
        </Query>
        <ParameterBindings>
          <ParameterBinding Name="NoAnnouncements" Location="Resource(wss,noXinviewofY_LIST)" />
          <ParameterBinding Name="NoAnnouncementsHowTo" Location="Resource(wss,noXinviewofY_DEFAULT)" />
        </ParameterBindings>
      </View>
    </Views>
    <Forms>
      <Form Type="DisplayForm" Url="DispForm.aspx" SetupPath="pages\form.aspx" WebPartZoneID="Main" />
      <Form Type="EditForm" Url="EditForm.aspx" SetupPath="pages\form.aspx" WebPartZoneID="Main" />
      <Form Type="NewForm" Url="NewForm.aspx" SetupPath="pages\form.aspx" WebPartZoneID="Main" />
    </Forms>
  </MetaData>

</List>
<br/> 
```

不要更改 3 个字段 LinkTitle、LinkTitleNoMenu、Title。
在用户下添加新字段并更改新添加字段的 GUID。
如图所示更改 Schema.xml 文件的属性。
![在此处输入图像描述](../Images/c87a2c764e02664c7d1691adf7bf9b7f.png)

# sencha-touch-2 - Sencha 骨架应用没有Router

> ID：15066995
> 
> 赞同：1
> 
> 时间：2013-02-25T12:29:08.183
> 
> 标签：sencha-touch-2

我对 Sencha 很陌生，从今天开始。我有一个基于我使用“sencha generate app”命令创建的骨架应用程序的简单应用程序。

一切正常，直到我添加了一个用于登录的控制器。部署和运行应用程序时，我收到以下错误：

```
Uncaught TypeError: Object #<Object> has no method 'getRouter' Controller.js:476
Ext.define.applyRoutes Controller.js:476
setter sencha-touch.js:5441
Base.implement.initConfig sencha-touch.js:4882
Ext.define.constructor Controller.js:386
Class sencha-touch.js:5170
(anonymous function)
Ext.ClassManager.instantiate sencha-touch.js:6749
Ext.ClassManager.instantiateByAlias sencha-touch.js:6661
Ext.apply.factory sencha-touch.js:9779
Ext.define.factoryItem Container.js:609
Ext.define.add Container.js:682
Base.implement.callOverridden sencha-touch.js:4734
etc...... 
```

当我跟踪此错误时，似乎应用程序需要一个路由器对象，但它没有得到它。我在任何地方都找不到如何配置路由器（在我看来，默认情况下应该有一个）。

```
applyRoutes: function(routes) {
    var app    = this instanceof Ext.app.Application ? this : this.getApplication(),
        router = app.getRouter(), // THIS IS WHERE IT FAILS 
```

我在 App.js 中指定了控制器

```
views : ['Main', 'Home', 'Contact', 'Login', 'CreateAccount'],
controllers : ['LoginController'], 
```

这是控制器：

```
Ext.define("MyApp.controller.LoginController", {
extend : "Ext.app.Controller",

xtype : 'logincontroller',

config : {
    refs : {
        loginForm : "#loginFormPanel"
    },
    control : {
        'button[action=login]' : {
            tap : "authenticateUser"
        }
    },
    views : ['Login']
},

authenticateUser : function(button) {

    this.getLoginForm().submit({
        url : 'php/process_login.php',
        method : 'POST',
        success : function(form, result) { debugger;
            var jsonoutput = Ext.decode(result);
            // json parsing
            Ext.MessageBox.alert('Error', "Success");

        },
        failure : function(form, result) {//This block of code is not executing even after JSON response
            Ext.MessageBox.alert('Error', "Invalid username/password");
        }
    });
} 
```

});

登录表单

```
Ext.define('MyApp.view.Login', {
extend : 'Ext.form.Panel',
id : 'loginFormPanel',
xtype : 'loginform',

requires : ['Ext.form.FieldSet', 'Ext.field.Password'],

config : {
    title : 'Login',
    iconCls : 'login',
    items : [{
        xtype : 'fieldset',
        title : 'Logingegevens',
        items : [{
            xtype : 'textfield',
            name : 'username',
            label : 'Gebruikersnaam'
        }, {
            xtype : 'passwordfield',
            name : 'password',
            label : 'Wachtwoord'
        }]
    }, {
        xtype : 'button',
        text : 'Login',
        id : 'loginButton',
        ui : 'action',
        action : 'login'
    }]
} 
```

});

谢谢你的帮助，科恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:04:42.847

您没有在控制器的配置中指定任何路由。看看 Sencha 的路由[文档](http://docs.sencha.com/touch/2-1/#!/api/Ext.app.Controller-cfg-routes)。

```
...
config: {
    routes: {
        ...
    },

    refs: {
        ...
     }
},
... 
```

# javascript - 如何使用 Javascript 找到（快速 - 15-20 毫秒）LatLong 的地址？

> ID：15066997
> 
> 赞同：2
> 
> 时间：2013-02-25T12:29:25.480
> 
> 标签：javascript, geolocation, google-geocoder

我有一个 socket.io，它每 15-20 毫秒 ping 一个新地址。对于这个地址，我必须获取经纬度并将标记放在谷歌地图中。所以在这 15-20 毫秒内（如果不是，可能在 50-60 毫秒内）我必须得到 GeoLocation。目前我正在使用`geocoder = new google.maps.Geocoder();`然后`geocoder.geocode({address: data}, myFunction(){});`

但是这个用于地图的 API 非常慢。它在 400-500 毫秒内返回 GeoLocation，这使我的中间地址请求为空。我需要一个非常快的 API。

作为参考，下面是 socket.io 的代码片段：

```
geocoder = new google.maps.Geocoder();
    var socket = io.connect('http://localhost');
    socket.on('new_address', function (data) {
        //Gets called everytime a new request for GeoLocation comes
        geocoder.geocode({address: data}, placeMarker);
    });

var placeMarker = function(){
    //Add Marker to GoogleMaps
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:44:08.887

正如评论中所提到的，您实际上不能期望互联网上的 20 毫秒内得到响应，它只是不能那样工作。但是，您可以做的是使用地址创建一个池，并让地理编码器（或者可能是 4 个中的 3 个）按照自己的步调处理它。

这可能看起来有点像这样（只是在这里给出一个方向，不要指望它立即起作用）：

```
var addresses = [];
var socket = io.connect('http://localhost');
socket.on('new_address', function (data) {
    //Gets called everytime a new request for GeoLocation comes
    //Adds an address to the list when it comes in from the backend
    adresses.push(data);
});

var geocoder = new google.maps.Geocoder();
//This function is called in a loop.
var addressCheck = function() {
    //When the list of addresses is empty, because we haven't received anything from the backend, just wait for a bit and call this function again.
    if(addresses.length == 0) {
        setTimeout(addressCheck, 400);
        return;
    }
    //Get the first one on the list.
    var data = addresses[0];
    //Process it.
    geocoder.geocode({address: data}, function() {
        placeMarker();
            //remove the first element from the adresses list.
        addresses.shift();
            //Call the entire function again, so it starts with a new address.
        addressCheck();
    });
}
var placeMarker = function(){
    //Add Marker to GoogleMaps
};

addressCheck(); 
```