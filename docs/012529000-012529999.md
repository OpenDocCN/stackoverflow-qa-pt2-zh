# StackOverflow 问答 12529000-12529999

# web-config - 项目文件上的 Prefer32Bit 标志

> ID：12529002
> 
> 赞同：2
> 
> 时间：2012-09-21T10:43:50.010
> 
> 标签：web-config, clr, app-config, .net-4.5, corflags

将项目从面向 .NET 4 更改为 .NET 4.5 时，我将以下内容添加到每个构建配置的项目文件中：

```
<Prefer32Bit>false</Prefer32Bit> 
```

这是什么意思？我在 MSDN 上能找到的唯一[文档](http://msdn.microsoft.com/en-us/library/microsoft.build.tasks.managedcompiler.prefer32bit%28v=vs.110%29.aspx)不太清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:13:47.473

> 设置 32BITPREFERRED 标志。该应用程序即使在 64 位平台上也可以作为 32 位进程运行。仅在 EXE 文件上设置此标志。如果在 DLL 上设置了该标志，则 DLL 无法在 64 位进程中加载​​，并引发 BadImageFormatException 异常。带有此标志的 EXE 文件可以加载到 64 位进程中。.NET Framework 4.5 中的新功能。

来自 Corflags 文档

[http://msdn.microsoft.com/en-us/library/ms164699.aspx](http://msdn.microsoft.com/en-us/library/ms164699.aspx)

# python - 使用多处理的文件处理器

> ID：12529003
> 
> 赞同：2
> 
> 时间：2012-09-21T10:43:49.687
> 
> 标签：python, multiprocessing, python-2.6

我正在编写一个文件处理器，它可以（希望）解析任意文件并对解析的内容执行任意操作。文件处理器需要连续运行。我遵循的基本思想是

1.  每个文件将有两个关联的进程（一个用于读取，另一个用于解析和写入其他地方）
2.  阅读器会将一行读入公共缓冲区（例如 a `Queue`），直到 EOF 或缓冲区满。然后等待（睡觉）
3.  编写器将从缓冲区读取，解析内容，将其写入（比如说）DB，直到缓冲区不为空。然后等待（睡觉）
4.  中断主程序会导致读写器安全退出（缓冲区可以不写就被冲走）

程序运行良好。但是，有时 Writer 会先初始化并发现缓冲区为空。所以它会去睡觉。Reader 也会填满缓冲区并休眠。所以对于`sleep_interval`我的代码什么都不做。为了解决这个问题，我尝试使用 a`multiprocessing.Event()`向写入器发出信号，表明缓冲区有一些可以处理的条目。

我的代码是

```
import multiprocessing
import time
import sys
import signal
import Queue

class FReader(multiprocessing.Process): 
    """
    A basic file reader class
    It spawns a new process that shares a queue with the writer process
    """
    def __init__(self,queue,fp,sleep_interval,read_offset,event): 
        self.queue = queue
        self.fp = fp
        self.sleep_interval = sleep_interval
        self.offset = read_offset
        self.fp.seek(self.offset)
        self.event = event
        self.event.clear()
        super(FReader,self).__init__()

    def myhandler(self,signum,frame): 
        self.fp.close()
        print "Stopping Reader"
        sys.exit(0)

    def run(self): 
        signal.signal(signal.SIGINT,self.myhandler)
        signal.signal(signal.SIGCLD,signal.SIG_DFL)
        signal.signal(signal.SIGILL,self.myhandler)
        while True: 
            sleep_now = False
            if not self.queue.full(): 
                print "READER:Reading"
                m = self.fp.readline()
                if not self.event.is_set(): 
                    self.event.set()
                if m: 
                    self.queue.put((m,self.fp.tell()),block=False)
                else: 
                    sleep_now = True 
            else: 
                print "Queue Full"
                sleep_now = True

            if sleep_now: 
                print "Reader sleeping for %d seconds"%self.sleep_interval
                time.sleep(self.sleep_interval)            

class FWriter(multiprocessing.Process): 
    """
    A basic file writer class
    It spawns a new process that shares a queue with the reader process
    """
    def __init__(self,queue,session,sleep_interval,fp,event): 
        self.queue = queue
        self.session = session
        self.sleep_interval = sleep_interval
        self.offset = 0
        self.queue_offset = 0
        self.fp = fp
        self.dbqueue = Queue.Queue(50)
        self.event = event
        self.event.clear()
        super(FWriter,self).__init__()

    def myhandler(self,signum,frame): 
        #self.session.commit()
        self.session.close()
        self.fp.truncate()
        self.fp.write(str(self.offset))
        self.fp.close()
        print "Stopping Writer"
        sys.exit(0)

    def process_line(self,line): 
        #Do not process comments
        if line[0] == '#': 
            return None
        my_list = []
        split_line = line.split(',')
        my_list = split_line
        return my_list

    def run(self): 
        signal.signal(signal.SIGINT,self.myhandler)
        signal.signal(signal.SIGCLD,signal.SIG_DFL)
        signal.signal(signal.SIGILL,self.myhandler)
        while True: 
            sleep_now = False
            if not self.queue.empty(): 
                print "WRITER:Getting"
                line,offset = self.queue.get(False)
                #Process the line just read
                proc_line = self.process_line(line)
                if proc_line: 
                    #Must write it to DB. Put it into DB Queue
                    if self.dbqueue.full(): 
                        #DB Queue is full, put data into DB before putting more data
                        self.empty_dbqueue()
                    self.dbqueue.put(proc_line)
                    #Keep a track of the maximum offset in the queue
                    self.queue_offset = offset if offset > self.queue_offset else self.queue_offset
            else: 
                #Looks like writing queue is empty. Just check if DB Queue is empty too
                print "WRITER: Empty Read Queue"
                self.empty_dbqueue()
                sleep_now = True
            if sleep_now: 
                self.event.clear()
                print "WRITER: Sleeping for %d seconds"%self.sleep_interval
                #time.sleep(self.sleep_interval)
                self.event.wait(5) 

    def empty_dbqueue(self): 
        #The DB Queue has many objects waiting to be written to the DB. Lets write them 
        print "WRITER:Emptying DB QUEUE"
        while True: 
            try: 
                new_line = self.dbqueue.get(False)
            except Queue.Empty: 
                #Write the new offset to file
                self.offset = self.queue_offset
                break
            print new_line[0]

def main(): 
    write_file = '/home/xyz/stats.offset'
    wp = open(write_file,'r')
    read_offset = wp.read()
    try: 
        read_offset = int(read_offset)
    except ValueError: 
        read_offset = 0
    wp.close()
    print read_offset
    read_file = '/var/log/somefile'
    file_q = multiprocessing.Queue(100)
    ev = multiprocessing.Event()
    new_reader = FReader(file_q,open(read_file,'r'),30,read_offset,ev)
    new_writer = FWriter(file_q,open('/dev/null'),30,open(write_file,'w'),ev)
    new_reader.start()
    new_writer.start()
    try: 
        new_reader.join()
        new_writer.join()
    except KeyboardInterrupt: 
        print "Closing Master"
        new_reader.join()
        new_writer.join()

if __name__=='__main__': 
    main() 
```

Writer 中的 dbqueue 用于将数据库写入批处理在一起，并且对于每一行，我都保留该行的偏移量。写入 DB 的最大偏移量在退出时存储到偏移量文件中，这样我就可以在下次运行时找到我离开的地方。DB 对象（会话）仅`'/dev/null'`用于演示。

以前而不是做

```
self.event.wait(5) 
```

我在做

```
time.sleep(self.sleep_interval) 
```

哪个（正如我所说的）运作良好，但引入了一点延迟。但随后流程完美退出。

`Ctrl-C`现在在主进程上做一个，阅读器退出但作者抛出一个 OSError

```
^CStopping Reader
Closing Master
Stopping Writer
Process FWriter-2:
Traceback (most recent call last):
  File "/usr/lib64/python2.6/multiprocessing/process.py", line 232, in _bootstrap
    self.run()
  File "FileParse.py", line 113, in run
    self.event.wait(5)
  File "/usr/lib64/python2.6/multiprocessing/synchronize.py", line 303, in wait
    self._cond.wait(timeout)
  File "/usr/lib64/python2.6/multiprocessing/synchronize.py", line 212, in wait
    self._wait_semaphore.acquire(True, timeout)
OSError: [Errno 0] Error 
```

我知道 event.wait() 以某种方式阻止了代码，但我不知道如何克服这个问题。我尝试将`self.event.wait(5)`和包装`sys.exit()`在一个`try: except OSError:`块中，但这只会使程序永远挂起。

我正在使用 Python-2.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:17:03.613

我认为最好为 Writer 类使用[Queue](http://docs.python.org/library/multiprocessing.html#pipes-and-queues)阻塞超时 - 使用 Queue.get(True, 5)，然后如果在时间间隔内将某些东西放入队列中，则 Writer 会立即唤醒.. Writer然后循环将类似于：

```
while True: 
    sleep_now = False
    try:
        print "WRITER:Getting"
        line,offset = self.queue.get(True, 5)
        #Process the line just read
        proc_line = self.process_line(line)
        if proc_line: 
            #Must write it to DB. Put it into DB Queue
            if self.dbqueue.full(): 
                #DB Queue is full, put data into DB before putting more data
                self.empty_dbqueue()
            self.dbqueue.put(proc_line)
            #Keep a track of the maximum offset in the queue
            self.queue_offset = offset if offset > self.queue_offset else self.queue_offset
    except Queue.Empty: 
        #Looks like writing queue is empty. Just check if DB Queue is empty too
        print "WRITER: Empty Read Queue"
        self.empty_dbqueue() 
```

# java - 如何在运行时查找堆/堆栈中对象的强引用数

> ID：12529004
> 
> 赞同：2
> 
> 时间：2012-09-21T10:43:53.813
> 
> 标签：java, c, garbage-collection, heap-memory

团队，

java中是否有可能知道当前可用的对象有多少活动/强引用？

例如在下面的代码中；A 类的对象可以被项目中的许多类持有。但我想在监视器线程中打印它。

```
public class A {
  public static A a = new A();
  public static A getInstance() {
     return a;
  }

  private A() {
     new Monitor(this).start();
  }

  class Monitor extends Thread {
      A refA;
      public Monitor(A ref) {
         this.refA = ref;
      }
      public void run () {

      //TODO Print how many references currently available for Object A referenced by refA;
      //Sure It will be minimum one. (which is "a" in this class A)   
      } 

   }
} 
```

请不要太重视这个示例程序。我的问题是如何找到堆/堆栈中对象可用的强引用数量？唯一的好处是我们为该对象提供了一个强有力的参考。

如果在 java 中是不可能的；我可以通过这个对 C 语言的强引用吗？从C语言我能做到吗？

我只是想知道探查器/工具是如何做到这一点的？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:46:43.257

不，如果不更改 VM 上的类或分支工具（由于对性能的影响，很难在生产中进行），您将无法获得准确的计数。

使用[ref 包](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ref/package-summary.html)，如果一个对象即将被垃圾（并在此时采取行动）但没有可用的计数（并且并不总是由 VM 处理），您可以收到通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:52:45.237

您可以执行堆转储并对其进行分析以查找对任何对象的引用数。

你这样做的要求是什么，你将如何处理这些信息，因为我怀疑有一种更简单/更好的方法来实现你想要的。

* * *

基于WeakHashMap

```
/**
 * Reference queue for cleared WeakEntries
 */
private final ReferenceQueue<Connection> queue = new ReferenceQueue<>();

List<WeakReference<Connection>> usedConnections = ....

// when you have a new connection

Connection connection = ....
usedConnections.add(new WeakReference(connection, queue));

// checking the queue for discarded objects.

    // remove null references from usedConnections

    for (Connection x; (x = queue.poll()) != null; ) {
        synchronized (queue) {
           x.close();
        }
     } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T11:28:11.850

你可以试试这样的东西

```
Class A
{
   static int instanceCount = 0;
   public A()
   {
      instanceCount++;
   }

   protected finalize()
   {
      instanceCount--;
   }

   public static int getInstanceCount()
   {
       return instanceCount;
   }
} 
```

我相信这是最接近使用代码对类进行引用的方法。希望能帮助到你 ...

# android - 通过 mediastore 读取 android 中的所有内部存储器图像

> ID：12529008
> 
> 赞同：0
> 
> 时间：2012-09-21T10:44:06.547
> 
> 标签：android, android-gallery, android-image, mediastore

我可以通过 Android 中的媒体存储读取所有外部图像，但我也想读取内部存储器的所有图像。

请帮助..!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:44:49.377

内存中唯一可以读取的图像是您自己的图像，这些图像是您自己为自己的应用程序放置的。由于您知道它们在哪里，您可以自己阅读它们（例如，使用 Java 文件 I/O 列出目录中的文件）。

# c# - C# 使用 Linq 连接具有 2 个相同列的 2 个表

> ID：12529010
> 
> 赞同：2
> 
> 时间：2012-09-21T10:44:13.680
> 
> 标签：c#, linq, join, var

我想加入 2 个表，它们有 2 个相同的列。我已经尝试过了，但在新 {} 等于新 {} 上出现错误。

**我的代码：**

```
var results = from table1 in table.AsEnumerable()
    join table2 in comment.AsEnumerable()
    //Comment
    on new {table1.Field<string>("SignalName"), table1.Field<int?>("MessageID")} 
    equals new {table2.Field<string>("SignalName"), table2.Field<int?>("MessageID")} 

    into prodGroup
    from table3 in prodGroup.DefaultIfEmpty()

    select new
    {
       // something is there
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T10:50:51.007

尝试...

```
var results = from r1 in table.AsEnumerable()
              join r2 in comment.AsEnumerable()
              on new {
                        signal=r1.Field<string>("SignalName"), 
                        message=r1.Field<int?>("MessageID")
               } 
              equals new {
                        signal=r2.Field<string>("SignalName"), 
                        message=r2.Field<int?>("MessageID")
              } into prodGroup
              from r3 in prodGroup.DefaultIfEmpty(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:51:15.783

尝试命名匿名类型的属性。

来自 MSDN：

> *因为匿名类型的 Equals 和 GetHashCode 方法是根据属性的 Equals 和 GetHashcode 方法定义的，所以相同匿名类型的两个实例只有在它们的所有属性都相等时才相等。*

# javascript - 从 JavaScript 数组返回唯一键

> ID：12529011
> 
> 赞同：0
> 
> 时间：2012-09-21T10:44:20.473
> 
> 标签：javascript, jquery

我希望我的问题是使用正确的术语...

有人可以向我解释如何执行以下操作：

如果我有一个包含以下内容的数组：

> 对象 { id=1498, brandName="Booths", quality="Standard"} 对象 { id=1499, brandName="Booths", quality="Standard"}

如何遍历该数组并返回另一个不同的“键”数组？

最终我想要一个返回如下内容的数组：

[id,brandName,quality] （但原始数组将在不同时间返回不同的键。

我说得有道理吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:50:37.920

您可以使用`Object.keys`：

```
var a1 = [{ id:1498, brandName:"Booths", quality:"Standard"}, 
          { id:1499, brandName:"Booths", quality:"Standard"}],
    a1Keys = a1.map(function(a){return Object.keys(a);});
//a1Keys now:
[['id','brandName','quality'],['id','brandName','quality']] 
```

该`keys`方法在[@MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)中进行了描述，包括用于旧版浏览器的 shim

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:51:47.280

```
var a = {"a": 1, "b": "t" };
var keys = new Array();
for(var o in a){
    keys.push(o);
}
console.log(keys) 
```

# cron - 如何在免费的 bsd 上每天固定时间创建一个 cron 作业以运行 perl 脚本？

> ID：12529014
> 
> 赞同：0
> 
> 时间：2012-09-21T10:44:24.123
> 
> 标签：cron, freebsd

我有 perl 脚本，我想在每天的固定时间使用 cron 作业执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:47:38.020

> $ crontab -e 1 2 3 4 5 /path_to_your_perl_script

用 :wq 保存

> 在哪里，
> 
> ```
> 1: Minute (0-59)
> 2: Hours (0-23)
> 3: Day (0-31)
> 4: Month (0-12 [12 == December])
> 5: Day of the week(0-7 [7 or 0 == sunday])
> /path_to_your_perl_script  - Script or command name to schedule 
> ```

# qt - Qt - 不兼容的.lib - LNK1112

> ID：12529016
> 
> 赞同：1
> 
> 时间：2012-09-21T10:44:48.420
> 
> 标签：qt, windows-ce, qt-creator

我想为 Windows CE 编写一个应用程序。我已经完成了所有相关步骤，并开始使用 Qt Creator 编写应用程序。

但是，当我开始构建代码时，出现以下错误消息：

```
QtCored4.lib(QtCored4.dll) : fatal error LNK1112: module machine type 'X86' conflicts with target machine type 'THUMB' 
```

也许更多细节：我下载了 Windows CE 库，并使用以下参数配置了 Qt-Opensource-Version 4.8.3：

```
configure -platform win32-msvc2008 -xplatform wince50standard-armv4i-msvc2008 
```

一切顺利。Qt Creator 确实识别了新版本并添加了 Windows CE 作为支持的平台。

现在，我想，QtGuid4.lib 也会有同样的问题。有谁知道，我在哪里得到一个兼容的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T00:14:28.890

DLL 的导入库 - .LIB 文件 - 包含链接到程序中的机器代码存根，这些存根通过 EXE 的导入表调用。因此，它们必须与您正在编译的处理器系列相匹配。

您需要为 QtCored4.dll 的 Windows CE ARMv4I 版本获取 .lib 文件。尝试[这些说明以构建 Qt for Windows CE](http://www.qtcentre.org/wiki/index.php?title=Building_Qt_on_Windows_CE)。

# jquery - 如何使用 jQuery 制作图像幻灯片？

> ID：12529021
> 
> 赞同：1
> 
> 时间：2012-09-21T10:45:09.903
> 
> 标签：jquery, jquery-plugins, slideshow, jquery-slider, jquery-slide-effects

我对 JavaScript 和 jQuery 还很陌生。我正在尝试向我的网页添加一个滑块。所以我想让它看起来像[http://www.orthoimplantcompany.com/products/](http://www.orthoimplantcompany.com/products/)上的滑块， 谁能给我一个关于如何做到这一点的想法？我有三个产品。单击一个产品后，它应该打开图片库，以便用户可以看到产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:51:57.100

Google 上的第三个结果：http: [//speckyboy.com/2009/06/03/15-amazing-jquery-image-galleryslideshow-plugins-and-tutorials/](http://speckyboy.com/2009/06/03/15-amazing-jquery-image-galleryslideshow-plugins-and-tutorials/)

StackOverflow 旨在让我们知道您尝试过什么，并就该做什么提出明确的问题，或者为什么某些特定代码不起作用。

这不是真正的“我该怎么做？” 网站 - [https://stackoverflow.com/faq](https://stackoverflow.com/faq)

尝试一些滑块，试一试，完成它，然后询问具体问题，如果你不能让它工作。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:52:26.597

如果您刚开始使用 JavaScript 和 jQuery，请使用符合您需要的免费插件之一，例如[Tiny Carousel](http://www.jsplugins.com/Scripts/Plugins/View/Tiny-Carousel/)。

了解插件的工作原理后，您可能需要对其进行调整或从头开始编写自己的插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:58:08.303

有以下js框架

[http://flexslider.woothemes.com/thumbnail-controlnav.html](http://flexslider.woothemes.com/thumbnail-controlnav.html)

如果你想去其他页面，你需要将IMG标签包装成A

# css - 仅 CSS 缩略图滑块

> ID：12529022
> 
> 赞同：2
> 
> 时间：2012-09-21T10:45:14.177
> 
> 标签：css, slider, thumbnails

我正在尝试制作一个缩略图，在悬停时会将其图像（比包装器长）一直移动到左侧，仅使用 CSS 并使用`img`元素而不是带有`background-image`.

我遇到的问题是，鉴于图像具有不同的宽度，我不知道如何找到移动它的距离。

我做[了一个演示](http://jsfiddle.net/g5JGd/3)，其中左侧图像正确移动，因为我计算了它需要移动多少，而具有相同 CSS 的右侧图像移动不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:58:16.297

目前尚不清楚为什么您将自己限制为单独操作 img 元素，而不是探索更常见的背景图像精灵类悬停事件操作。

看看这篇[Codrops 文章](http://tympanus.net/codrops/2012/06/18/3d-thumbnail-hover-effects/)和他们的[演示在这里](http://tympanus.net/Tutorials/3DHoverEffects/)（注意菜单中有 5 个演示）。

提供的技术不会产生您所追求的确切最终结果，但它们确实包括您需要使用的事件类型和操作的结构。

# html - Textarea光标不是从头开始

> ID：12529023
> 
> 赞同：57
> 
> 时间：2012-09-21T10:45:14.273
> 
> 标签：html

我有一个`<textarea>`HTML。当我将光标放在其中时，它不是从头开始，而是在中间闪烁。

### HTML

```
<TD width="21%">
    <textarea class="txtarea" style="height:30px;" rows="3" name="Text" Id="Text" value=""> </textarea>
</TD> 
```

### CSS

```
.txtarea{
    border-right: #646464 ;
    border-top: #646464;
    border-left: #646464;
    border-bottom: #646464;
    width:100%;
    background: #ffffcc;
} 
```

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-09-21T11:52:48.780

```
<textarea class="txtarea" style="height:30px;" rows="3" name="Text" Id="Text" value=""> </textarea> 
```

你所拥有的是`<textarea>`和`</textarea>`标签之间的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-30T05:27:43.903

Textarea 的开始和结束标记必须在同一行，因为无论在 textarea 标记之间，它都将被视为 textarea 的“值”。现在对于下面的代码占位符也将按预期显示。

```
<textarea
  placeholder="Enter text here" 
  class="txtarea"
  style="height:30px;"
  rows="3"
  name="Text"
  id="text"
></textarea> 
```

# android - 无法在 ViewFlipper 中的 ScrollView 上进行水平投掷以冒泡

> ID：12529024
> 
> 赞同：6
> 
> 时间：2012-09-21T10:45:15.557
> 
> 标签：android

我在 ViewFlipper 中有一个垂直 ScrollView（实际上是一个自定义 ScrollView，代码如下）。ViewFlipper 工作正常，除非我在 ScrollView 上水平滑动以翻转到上一个/下一个视图。ScrollView 本身可以正常工作。

这是设计。绿色框是ScrollView，应该是垂直的。

![在此处输入图像描述](../Images/841394a8b201f8affc1385ef2087820c.png)

这是滚动视图：

```
public class SCScrollView extends ScrollView {

    private float xDistance, yDistance, lastX, lastY;

    GestureDetector gestureDetector = new GestureDetector(new MyGestureDetector());
    OnTouchListener gestureListener;

    public SCScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);

        gestureListener = new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }
                return false;
            }    
        };

    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN:
                xDistance = yDistance = 0f;
                lastX = ev.getX();
                lastY = ev.getY();
                break;
            case MotionEvent.ACTION_MOVE:
                final float curX = ev.getX();
                final float curY = ev.getY();
                xDistance += Math.abs(curX - lastX);
                yDistance += Math.abs(curY - lastY);
                lastX = curX;
                lastY = curY;
                if(xDistance > yDistance)
                     return false;
        } 

        return false;
        //return super.onInterceptTouchEvent(ev);
     }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
         super.onTouchEvent(event);
         return gestureDetector.onTouchEvent(event);
    } 

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev){
         gestureDetector.onTouchEvent(ev);
        super.dispatchTouchEvent(ev);
        return true;
    } 

    /** GestureDetector used to swipe between classes */
    class MyGestureDetector extends GestureDetector.SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float     velocityY) {
            return false;
       }
    }

 } 
```

我一直在尝试将解决方案建立[在 ScrollView Touch Handling 中的 Horizo​​ntalScrollView](https://stackoverflow.com/questions/2646028/android-horizontalscrollview-within-scrollview-touch-handling)和此处[Swipe/Fling tab-changeing with ScrollView?](https://stackoverflow.com/questions/5102993/swipe-fling-tab-changing-in-conjunction-with-scrollview) 但无论我从回调中返回什么，我都无法让 ViewFlipper 看到 ScrollView 上的一闪而过，坦率地说，我迷失在触摸和手势监听器链中。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T05:12:00.603

如文件所述

[http://developer.android.com/reference/android/widget/ScrollView.html](http://developer.android.com/reference/android/widget/ScrollView.html)

> ScrollView 只支持垂直滚动。对于水平滚动，使用 Horizo​​ntalScrollView。

所以，我需要问你为什么真的想使用你的自定义滚动视图？

如果您只打算能够滚动，则可能不需要使用它

只有RelativeLayout.scrollBy(x,y); 足够的

你可以看看这个链接

[在android中垂直和水平滚动视图](https://stackoverflow.com/questions/2044775/scrollview-vertical-and-horizontal-in-android)

# 编辑

好的，所以你需要让手势检测到 ScrollView 上的投掷。

您可以在 Activity 中制作它，而无需制作自定义 ScrollView

首先，你需要

```
implements OnGestureListener, OnTouchListener, GestureDetector.OnDoubleTapListener 
```

并在您的班级中创建gestureDetector

```
gd = new GestureDetector(this); 
```

和你的 ScrollView 对象，刚刚声明

```
sv.setOnTouchListener(this); 
```

然后，在覆盖 onTouch 方法

```
@Override
public boolean onTouch(View v, MotionEvent event) {
        onTouchEvent(event); // throw to onTouchEvent

    return false;
} 
```

并在覆盖 onTouchEvent 方法

```
@Override
public boolean onTouchEvent(MotionEvent me)
{
    return gd.onTouchEvent(me); // gd = gesturedetector
} 
```

现在像这样覆盖你的 onFling 方法

```
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {

    if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
        // "Left Swipe"
        vf.showPrevious(); // vf = ViewFlipper

    }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
        // "Right Swipe"
        vf.showNext();
    }

    return false;
} 
```

* * *

这是整个代码

ViewFlipperActivity 类

```
import android.os.Bundle;
import android.app.Activity;
import android.view.GestureDetector;
import android.view.GestureDetector.OnGestureListener;
import android.view.View.OnTouchListener;
import android.view.MotionEvent;
import android.view.View;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.widget.HorizontalScrollView;
import android.widget.ScrollView;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.ViewFlipper;

public class ViewFlipperActivity extends Activity implements OnGestureListener, OnTouchListener, GestureDetector.OnDoubleTapListener
{

    TextView tv;
    GestureDetector gd;
    ScrollView sv;
    ViewFlipper vf;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        gd = new GestureDetector(this);

        setContentView(R.layout.activity_viewflipper);

        tv = (TextView)findViewById(R.id.textView1);
        sv = (ScrollView)findViewById(R.id.scrollView1);
        vf = (ViewFlipper)findViewById(R.id.viewFlipper1);

        sv.setOnTouchListener(this);

    }

    @Override
    public boolean onDoubleTap(MotionEvent arg0) {
        tv.setText("double tap");
        return false;
    }

    @Override
    public boolean onDoubleTapEvent(MotionEvent arg0) {
        tv.setText("double tap event");
        return false;
    }

    @Override
    public boolean onSingleTapConfirmed(MotionEvent arg0) {
        tv.setText("single tap confirm");
        return false;
    }

    @Override
    public boolean onTouchEvent(MotionEvent me)
    {
        return gd.onTouchEvent(me);
    }

    @Override
    public boolean onDown(MotionEvent arg0) {
        tv.setText("down");
        return false;
    }

    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {

        if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            tv.setText("Left Swipe");
            vf.showPrevious();

        }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
            tv.setText("Right Swipe");
            vf.showNext();
        }

        return false;
    }

    @Override
    public void onLongPress(MotionEvent arg0) {
        tv.setText("long press");

    }

    @Override
    public boolean onScroll(MotionEvent arg0, MotionEvent arg1, float arg2,
            float arg3) {
        tv.setText("scroll");
        return false;
    }

    @Override
    public void onShowPress(MotionEvent arg0) {
        tv.setText("show press");
    }

    @Override
    public boolean onSingleTapUp(MotionEvent arg0) {
        tv.setText("single tab up");
        return false;
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        onTouchEvent(event);

        return false;
    }
} 
```

和activity_viewflipper.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="TextView" />

    <ViewFlipper
        android:id="@+id/viewFlipper1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@+id/textView3"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="28dp"
                android:layout_marginTop="63dp"
                android:layout_toLeftOf="@+id/textView2" >

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:scaleType="matrix"
                    android:src="@drawable/thailandmap" />

            </ScrollView>

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignTop="@+id/scrollView1"
                android:layout_marginRight="30dp"
                android:text="TextView" />

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignRight="@+id/scrollView1"
                android:layout_marginBottom="250dp"
                android:layout_marginRight="29dp"
                android:text="TextView" />

        </RelativeLayout>

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:scaleType="matrix"
            android:src="@drawable/thwriting" />

    </ViewFlipper>

</RelativeLayout> 
```

# c# - AppDomain.AssemblyLoad 事件捕获事件处理程序中引发的所有异常

> ID：12529025
> 
> 赞同：1
> 
> 时间：2012-09-21T10:45:24.953
> 
> 标签：c#, .net, exception-handling, appdomain, .net-assembly

.NET 事件似乎`AppDomain.AssemblyLoad`捕获了它的事件处理程序中引发的任何异常，而不是将它们传播给触发程序集加载的调用者（例如`Assembly.LoadFile()`）。

我的第一个问题是为什么这会捕获所有异常行为？Microsoft 通常非常严格地确保异常始终在其 BCL 中传播。

我的第二个问题，有没有办法关闭这种行为？

背景：我需要在加载程序集时对其进行扫描，并确保它们符合某些约定。如果他们不这样做，则应该抛出异常（并被可能触发程序集负载的多种机制捕获到更高的位置）。

注意：我已经找到了这个问题['Throw exception from AppDomain.AssemblyLoad event'](https://stackoverflow.com/questions/4957965/throw-exception-from-appdomain-assemblyload-event)，这不是重复的。我的问题合乎逻辑地源于该问题的结论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:00:25.153

不，异常被 CLR 吞没了，没有办法改变这种行为。大多数 AppDomain 事件都是这种情况：AssemblyLoad、DomainUnload 和 ProcessExit。SSCLI20 源代码没有说明为什么这样做的注释。

粗略的猜测是代码被埋在 CLR 堆栈帧内太深，无法进行合理的诊断和展开帧，并且恢复状态太难了。AssemblyLoad 因为几乎总是在抖动忙于生成代码时引发该事件， DomainUnload 和 ProcessExit 因为 CLR 忙于关闭所有代码执行。

解决方法很明确，如果您必须捕获异常，那么您需要在事件处理程序中使用 try/catch 语句。

# asp.net - 什么是 FormAuthentication 模式以及如何实现它？

> ID：12529031
> 
> 赞同：0
> 
> 时间：2012-09-21T10:45:54.277
> 
> 标签：asp.net, asp.net-mvc, iis-7

表单认证模式：

假设用户请求 Application/LogOn ，并且登录页面在浏览器中打开，现在当用户点击登录按钮时，我从 DB 值中检查用户名和密码，如果正确则将用户重定向到 Application/Home ，如果用户名和密码不正确正确然后显示警报框以显示凭据不正确的消息。

**现在我的问题是**：

1.  什么是 FormAuthentication 。

2.  它与我上面提到的场景有何不同。

3.  如何在我的应用程序中实现它，我必须对 webconfig 和我的代码进行哪些更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:50:29.457

这是[`nice guide`](http://www.asp.net/mvc/tutorials/older-versions/security/authenticating-users-with-forms-authentication-cs)阅读有关表单身份验证的内容。

# c# - 在哪里实现 Global.asax 方法

> ID：12529035
> 
> 赞同：0
> 
> 时间：2012-09-21T10:46:06.923
> 
> 标签：c#, asp.net, vb.net, global-asax

我正在开发一个 ASP.Net 应用程序，目前 Global.asax 包含通常的 5 种方法：

1.  应用程序_启动
2.  申请_结束
3.  会话开始
4.  会话_结束
5.  应用程序错误

但是，我也需要实现该`Application_AuthenticateRequest`方法，这不是问题，我刚刚在 Global.asax 中添加了它，但在另一个应用程序中，我看到该方法在另一个实现`IHttpModule`接口的类的其他地方实现。

这怎么可能？同一个应用程序`Application_AuthenticateRequest`在 Global.asax 中没有，它们的 Global.asax 看起来像这样：

```
void Application_BeginRequest(object sender, EventArgs e)
{
    myConfig.Init();
}

void Application_Start(object sender, EventArgs e)
{
    // Code that runs on application startup
    myConfig.Init();
    if (InstallerHelper.ConnectionStringIsSet())
    {
        //initialize IoC
        IoC.InitializeWith(new DependencyResolverFactory());

        //initialize task manager
        TaskManager.Instance.Initialize(NopConfig.ScheduleTasks);
        TaskManager.Instance.Start();
    }
}

void Application_End(object sender, EventArgs e)
{
    //  Code that runs on application shutdown
    if (InstallerHelper.ConnectionStringIsSet())
    {
        TaskManager.Instance.Stop();
    }
} 
```

是什么让该`Application_AuthenticateRequest`方法运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:57:08.693

我首先建议您阅读[ASP.NET 中的 HTTP 处理程序和模块](http://msdn.microsoft.com/en-us/library/bb398986%28v=vs.100%29.aspx)。然后您将知道，在 ASP.NET 应用程序中，您可以注册多个模块，这些模块将为每个请求运行，并且您可以订阅请求生命周期的不同事件，就像在 Global.asax 中一样。这种方法的优点是您可以将模块放入可在多个应用程序中使用的可重用程序集中，从而避免您一遍又一遍地重复相同的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:18:43.600

基本上，我一直在查看的示例创建了自己的 HTTP 模块并将其注册到 web.config 文件中：

他们创建了一个新的 HTTP 模块，如下所示：

```
public class MembershipHttpModule : IHttpModule
{
    public void Application_AuthenticateRequest(object sender, EventArgs e)
    {
        // Fires upon attempting to authenticate the user
        ...
    }

    public void Dispose()
    {
    }

    public void Init(HttpApplication application)
    {
        application.AuthenticateRequest += new EventHandler(this.Application_AuthenticateRequest);
    }
} 
```

还将以下内容添加到 web.config 文件中：

```
<httpModules>
  <add name="MembershipHttpModule" type="MembershipHttpModule, App_Code"/>
</httpModules> 
```

正如上面@Darin Dimitrov 的[链接](http://msdn.microsoft.com/en-us/library/bb398986%28v=vs.100%29.aspx)中所解释的：必须注册模块才能接收来自请求管道的通知。注册 HTTP 模块的最常用方法是在应用程序的 Web.config 文件中。在 IIS 7.0 中，统一请求管道还允许您通过其他方式注册模块，包括通过 IIS 管理器和通过 Appcmd.exe 命令行工具。

# windows-8 - 为什么我的应用程序没有在 Windows 8 的 VS 2012 express 上运行？

> ID：12529037
> 
> 赞同：1
> 
> 时间：2012-09-21T10:46:19.787
> 
> 标签：windows-8

我在我的系统中安装了适用于 Windows 8 的 Windows 8 RP 和 VS 2012 Express。以前我做了示例应用程序并成功执行它。但是在调试应用程序时突然应用程序没有运行，仅显示“构建已启动”但不显示输出。

虽然在我的应用程序中设置断点并没有解决问题。为什么 Metro 应用程序没有在 VS 2012 express 中运行？不显示任何错误不显示任何输出，仅显示构建开始消息。

请帮我..

下面是屏幕截图... ![在此处输入图像描述](../Images/dc3b28f1e2bbc6630e972eb690f7f84f.png)

仅显示该消息始终不提供任何输出....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:57:56.560

如果您运行的是 Windows 8 Release Preview，则需要运行 Visual Studio 2012 **Release Candidate**，您可以在此处下载：

[http://www.microsoft.com/en-us/download/details.aspx?id=29931](http://www.microsoft.com/en-us/download/details.aspx?id=29931)

# c# - DataGridView 行在验证时被清除

> ID：12529040
> 
> 赞同：0
> 
> 时间：2012-09-21T10:46:27.680
> 
> 标签：c#, .net, datagridview

我有一个 DataGridView，我需要运行一个 CellValidating 事件以确保从 ComboBox 中只选择有效值。这是必需的，因为 ComboBox 包含用于显示类别的虚拟行，用户可以选择的字段列在每个类别下方。

虽然我的验证代码工作正常，但有一个不受欢迎的副作用，即所有值都被从正在验证的行中擦除。我已将事件处理程序中的代码剥离到此，问题仍然存在：

```
private void dgvInformation_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
{
    DataGridView dgv = this.dgvInformation;    
    DataGridViewCell cell = dgv.Rows[e.RowIndex].Cells[e.ColumnIndex];
} 
```

如果我删除

```
DataGridViewCell cell = dgv.Rows[e.RowIndex].Cells[e.ColumnIndex]; 
```

行，则问题不会发生。

DGV 不受约束，我认为这是导致问题的原因。作为测试，我制作了一个简单的表单并填充了未绑定的 DGV 值，并且每次 CellValidating 事件触发该行时都会被清除，但是当我创建 List<> 并将其用作 DataSource 时，值不会被清除。这可能是未绑定 DGV 的错误吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:52:44.807

我对句子有疑问：“确保从 ComboBox 中只选择有效值。” 使用组合框实际上应该防止在文本框等控件中提示错误的值，为什么不只在组合框中显示有效值，或者如果您需要验证组合框的组合，则在完成所有销售后进行验证，因此您可能需要一些东西像一个提交按钮来运行验证例程。

如果您仍然认为必须在每次销售后验证组合框，那么您必须以某种方式在组合框的 SelectionChanged 事件上运行验证。

# iphone - 如何使用 iOS UIAutomation 截取点击的按钮？

> ID：12529043
> 
> 赞同：0
> 
> 时间：2012-09-21T10:46:34.770
> 
> 标签：iphone, ios, instruments, ui-automation, ios-ui-automation

我尝试了`tapAndHold()`UIAElement 的功能

```
var target = UIATarget.localTarget();
target.frontMostApp().mainWindow().buttons()["Button"].tapAndHold()
target.captureScreenWithName("shot") 
```

但这会因 JavaScript 错误而失败：`'undefined' is not a function (evaluating target.frontMostApp().mainWindow().buttons()["Button"].tapAndHold()`.

**更新**：

我也试过

```
target.frontMostApp().mainWindow().buttons()["Button"].touchAndHold(1.5)
target.captureScreenWithName("shot") 
```

至少确实突出显示了按钮，但是当屏幕截图被制作时，它已经再次被停用。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T04:03:21.027

插入延迟（1）。

```
target.frontMostApp().mainWindow().buttons()["Button"].touchAndHold(1.5)
target.delay(1);
target.captureScreenWithName("shot") 
```

你在 iPod 上运行它吗？您正在测试的设备也很重要。我建议使用 iPhone 3GS、4S 检查更多品种。

# qt - Qt - 如何在依赖于其他动态库的项目中构建一个动态库

> ID：12529048
> 
> 赞同：2
> 
> 时间：2012-09-21T10:46:45.247
> 
> 标签：qt, shared-libraries

我有两个动态库 library1.so library2.so （使用 library1.so ，路径是绝对的）

其中 library2.so 正在使用 library1.so，因此当我构建使用 library2.so（绝对路径）的项目时，它会为 library1.so 中的所有方法（未定义引用）提供错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:04:43.863

在您的 qmake 配置中，您可以添加任意库：

```
LIBS += -llibrary2 
```

或者

```
LIBS += /abspath/to/library2.so 
```

# xcode - SIGABRT。如何从代码中获取行，这会导致错误？

> ID：12529050
> 
> 赞同：0
> 
> 时间：2012-09-21T10:46:53.507
> 
> 标签：xcode, llvm, sigabrt, dylib

使用 xCode 4.5 SDK 6.0 + cocos2d 2.1

然后 xCode 发出 SIGABRT，我们看到这个： [图 1](http://i.stack.imgur.com/MuZm2.png)

在日志中，我们读取方法，它发出错误。例如：[IntroLayer zeroMethods]；**没关系。** 我们需要在项目中手动找到这个方法。但是，在之前的版本（~4.0）中，xCode 显示了导致错误的行。

那么，如何从代码中获取行，这会导致错误？（[IntroLayer zeroMethods]；- 第 24 行，IntroLayer.m）

我希望它是这样的： [图 2](http://i.stack.imgur.com/5011K.png)

# c# - 显示任何内容的标签

> ID：12529054
> 
> 赞同：0
> 
> 时间：2012-09-21T10:47:27.110
> 
> 标签：c#, c#-4.0, wmi

我有下面的代码，它使用 WMI 获取本地磁盘信息（从我正在学习的另一个站点获取）。无论如何，我创建了所有标签和组合框，并且组合工作正常 - 它显示计算机上的本地磁盘。

但是，当我尝试从 WMI 中为磁盘取回任何内容并显示它时，标签旁边什么也没有显示。WMI 工作正常，因为我可以使用 powershell 来显示 get-wmiobjects，而我带回来的两个对象实际上通过 powershell 显示了一些东西......只是不在这个应用程序上。

有任何想法吗？

```
namespace diskdrive_info
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            //Get all the disk drives
            ManagementObjectSearcher mosDisk = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive");
            // Loop through each object (disk) retrieved by WMI
            foreach (ManagementObject moDisk in mosDisk.Get())
            {
                cmbHdd.Items.Add(moDisk["Model"].ToString());
            }
        }

        private void cmbHdd_SelectedIndexChanged(object sender,EventArgs e)
        {
            ManagementObjectSearcher mosDisks = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive WHERE Model = '" + cmbHdd.SelectedItem + "'");
            foreach (ManagementObject moDisk in mosDisks.Get())
            {
                lblType.Text = "Type:" + moDisk["MediaType"].ToString();
                lblModel.Text = "Model: " + moDisk["Model"].ToString();
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:02:40.707

那 foreach 运行了多少次？看起来您只是在 .Text 属性上写了很多次，因为 mosDisks.Get() 集合中有元素。.Get() 上次在该循环中运行时是否有可能是空白或 null？

标签中是否显示“类型：”和“型号：”？

还可以尝试在 foreach 中放置断点以查看返回的内容

```
 moDisk["MediaType"].ToString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:48:01.580

大声哭泣……想通了！这是我从网络驱动器运行脚本的事实，我注意到当我加载脚本时 VS 出错说从这个位置运行它存在安全风险......所以我将它移到 C: 驱动器和嘿，一切都很好！

# asp.net-mvc-3 - 服务器端 markdownsharp 转换和清理时的链接渲染问题 - 如何获得与 pagedown 相同的输出

> ID：12529057
> 
> 赞同：0
> 
> 时间：2012-09-21T10:47:41.567
> 
> 标签：asp.net-mvc-3, markdown, wmd, markdownsharp, pagedown

我正在使用[pagedown](http://code.google.com/p/pagedown/wiki/PageDown)编辑器。我用于生成预览的代码如下：

```
$(document).ready(function () {
    var previewConverter = Markdown.getSanitizingConverter();
    var editor = new Markdown.Editor(previewConverter);
    editor.run();
}); 
```

当我在输入中输入一些文本时：

![在此处输入图像描述](../Images/d49ac8450cf36ba66a5e0233457082ab.png)

动态生成的输出预览将符合预期，如下所示：

![在此处输入图像描述](../Images/8c94580196cf7a07deef3808ac695157.png)

然后将内容（如下所示的纯输入文本）保存到数据库：

```
"http://www.google.com\n\n<script>alert('hi');</script>\n\n[google][4]\n\n\n  [1]: http://www.google.com" 
```

在服务器端，在呈现页面之前，我正在使用这个[markdownsharp 库 v1.13.0.0](http://code.google.com/p/markdownsharp/)转换从数据库文本中获取的内容。转换后，我正在使用 Jeff Atwood 的代码清理 html，我在[这里](https://stackoverflow.com/questions/3136084/sanitizing-html-using-jeff-atwoods-example)找到了该代码：

```
 private static Regex _tags = new Regex("<[^>]*(>|$)",
    RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled);
private static Regex _whitelist = new Regex(@"
    ^</?(b(lockquote)?|code|d(d|t|l|el)|em|h(1|2|3)|i|kbd|li|ol|p(re)?|s(ub|up|trong|trike)?|ul)>$|
    ^<(b|h)r\s?/?>$",
    RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace);
private static Regex _whitelist_a = new Regex(@"
    ^<a\s
    href=""(\#\d+|(https?|ftp)://[-a-z0-9+&@#/%?=~_|!:,.;\(\)]+)""
    (\stitle=""[^""<>]+"")?\s?>$|
    ^</a>$",
    RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace);
private static Regex _whitelist_img = new Regex(@"
    ^<img\s
    src=""https?://[-a-z0-9+&@#/%?=~_|!:,.;\(\)]+""
    (\swidth=""\d{1,3}"")?
    (\sheight=""\d{1,3}"")?
    (\salt=""[^""<>]*"")?
    (\stitle=""[^""<>]*"")?
    \s?/?>$",
    RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace);

/// <summary>
/// sanitize any potentially dangerous tags from the provided raw HTML input using 
/// a whitelist based approach, leaving the "safe" HTML tags
/// CODESNIPPET:4100A61A-1711-4366-B0B0-144D1179A937
/// </summary>
public static string Sanitize(string html)
{
    if (String.IsNullOrEmpty(html)) return html;

    string tagname;
    Match tag;

    // match every HTML tag in the input
    MatchCollection tags = _tags.Matches(html);
    for (int i = tags.Count - 1; i > -1; i--)
    {
        tag = tags[i];
        tagname = tag.Value.ToLowerInvariant();

        if(!(_whitelist.IsMatch(tagname) || _whitelist_a.IsMatch(tagname) || _whitelist_img.IsMatch(tagname)))
        {
            html = html.Remove(tag.Index, tag.Length);
            System.Diagnostics.Debug.WriteLine("tag sanitized: " + tagname);
        }
    }

    return html;
} 
```

转换和消毒过程如下：

```
 var md = new MarkdownSharp.Markdown();            
    var unsafeHtml = md.Transform(content);
    var safeHtml = Sanitize(unsafeHtml);
    return new HtmlString(safeHtml); 
```

`unsafeHtml`包含

```
"<p>http://www.google.com</p>\n\n<script>alert('hi');</script>\n\n<p><a href=\"http://www.google.com\">google</a></p>\n" 
```

`safeHtml`包含

```
"<p>http://www.google.com</p>\n\nalert('hi');\n\n<p><a href=\"http://www.google.com\">google</a></p>\n" 
```

这呈现为：

![在此处输入图像描述](../Images/5986fcfe4cebef3aff9b74ca78de0f3e.png)

因此，清理和第二个链接按预期进行了转换。不幸的是，第一个链接不再是链接，只是文本。如何解决这个问题？

也许更好的方法是不使用服务器端转换，而只是使用 javascript 在页面上呈现 markdown 文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:23:07.233

在`Markdown.Converter.js`我们可以找到`_DoAutoLinks(text)`函数。有一个部分会自动添加`<`和`>`围绕未修饰的原始超链接，然后自动链接任何类似`<http://example.com>`. 这就是为什么

```
http://www.google.com 
```

将首先转换为：

```
<http://www.google.com> 
```

然后到：

```
<a href="http://www.google.com">http://www.google.com</a> 
```

我的临时解决方法是在 c# 端做一些类似的事情：

```
var unsafeHtml = DoAutolinks(md.Transform(content));

private static string DoAutolinks(string content)
{            
    /* url pattern - from msdn.microsoft.com/en-us/library/ff650303.aspx */
    const string url = @"(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?";
    const string pattern = @"<p>(?<url>" + url + ")</p>";
    var result = Regex.Replace(content, pattern, "<p><a href=\"${url}\">${url}</a></p>");
    return result;
} 
```

是否应该将此类功能（负责简单链接转换）包含在 markdownsharp 中？

# android - Android聊天应用-xml布局

> ID：12529059
> 
> 赞同：1
> 
> 时间：2012-09-21T10:47:56.147
> 
> 标签：android, xml, layout, client-server, chat

我正在为 Android 制作一个聊天应用程序。聊天画面应该如何？谁能告诉我在 XML 布局中应该使用哪些视图？它是一个编辑文本和一个列表视图吗？请帮忙。我需要制作一个像我们在 Gtalk 中看到的那样的聊天屏幕。双方的聊天消息应该对齐到屏幕的两侧（请参阅 Gtalk 聊天框对齐样式）。这就是我想要的..我该如何实现这种布局？ [http://upload.wikimedia.org/wikipedia/en/7/75/Google_talk.gif](http://upload.wikimedia.org/wikipedia/en/7/75/Google_talk.gif)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:28:27.250

找到合适的了。所以我在这里分享

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" 
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<ScrollView 
    android:layout_width="fill_parent"
    android:layout_height="0dip" 
    android:layout_weight="1"  >
    <TextView 
        android:text="@string/text" 
        android:id="@+id/textOutput"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:paddingLeft="5dp" 
        android:paddingRight="5dp" 
        android:paddingTop="5dp" />
</ScrollView>

<LinearLayout 
    android:id="@+id/linearLayout1"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:paddingLeft="5dp" 
    android:paddingRight="5dp"
    android:paddingBottom="5dp"
    android:baselineAligned="true">
    <EditText android:layout_weight="1" android:id="@+id/textInput"
        android:layout_height="45dp" android:layout_width="0dip">
        <requestFocus></requestFocus>
    </EditText>
    <Button android:text="Send"
        android:layout_height="45dp" android:layout_width="125dp"
        android:id="@+id/btnSend"></Button>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-21T16:19:47.097

你应该查看一些关于回收器视图和适配器的教程。您可以创建两个查看器，一个用于发送的消息，另一个用于接收的消息，并根据消息的类型对它们进行扩展。

此链接提供了有关如何创建聊天 UI 的示例。 [https://blog.sendbird.com/android-chat-tutorial-building-a-messaging-ui](https://blog.sendbird.com/android-chat-tutorial-building-a-messaging-ui)

# css - 包含时不加载 IE 的 CSS 条件

> ID：12529062
> 
> 赞同：1
> 
> 时间：2012-09-21T10:48:17.900
> 
> 标签：css, jsf, load, conditional

有 xhtml`templ.xhtml`布局。

将其包含到其他 .xhtml 中，例如：

```
<ui:composition template="/template/templ.xhtml"> 
```

在 templ.xhtml 中定义条件，例如：

```
<h:head>
 <h:outputText value="&lt;!--[if lt IE 8]&gt;&lt;h:outputStylesheet library=&quot;css&quot; name=&quot;styleie8.css&quot; /&gt;&lt;![endif]--&gt;" escape="false" />
</h:head> 
```

`styleie8.css`未加载，但是当`templ.xhtml`Tomcat运行时发生更改并保存时，它加载正常。

Tomcat启动时JSF如何立即加载条件？

**注意：**
尝试使用以下替代方案：
**1。**

```
<!--[if lt IE 8]>
                <h:outputStylesheet name="styleie8.css" library="css"/>
<![endif]--> 
```

**2.**

```
<o:conditionalComment if="lte IE 8">
            <link rel="stylesheet" href="styleie8.css" />
</o:conditionalComment> 
```

**3.** `#{request.contextPath}/resources`而不是简单的路径。
结果是一样的——我需要**重新保存**.xhtml 模板才能加载条件 css。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T12:05:16.763

您的初始代码段是错误的。您不能`<h:outputStylesheet>`在 a 中打印 a `<h:outputText escape="false">`。这`<h:outputStylesheet>`是一个 JSF 组件，它应该生成 HTML，但在 a 中`<h:outputText escape="false">`它会按原样打印。如果您在浏览器中打开页面并右键单击，*查看源代码*，那么您应该自己发现了这一点。这个不对。网络浏览器只理解应该是`<link rel="stylesheet">`.

如果您已将样式表放在 中`/resources/css/styleie8.css`，那么以下内容应该可以工作：

```
<h:outputText value="&lt;!--[if lte IE 8]&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;#{request.contextPath}/resources/css/styleie8.css&quot; /&gt;&lt;![endif]--&gt;" escape="false" /> 
```

至于您尝试过的替代方案，1）将无法工作，因为它会被转义。2) 假设`href`指向正确的 URL 应该可以工作。在您发布的示例中，它假定 CSS 文件与视图位于同一文件夹中。但是，如果它仍然位于`/resources/css/styleie8.css`，那么您应该使用：

```
<o:conditionalComment if="lte IE 8">
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/styleie8.css" />
</o:conditionalComment> 
```

3) 应该可以工作，假设您提供了正确的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:36:08.490

以下行将仅输出您的字符串：

```
<h:outputText value="&lt;!--[if lt IE 8]&gt;&lt;h:outputStylesheet library=&quot;css&quot; name=&quot;styleie8.css&quot; /&gt;&lt;![endif]--&gt;" escape="false" /> 
```

`h:outputStylesheet`也只是输出**而不**作为组件处理。像这样`h:outputStylesheet` **用作**组件：

```
<h:outputText value="&lt;!--[if lt IE 8]&gt;" escape="false" />
<h:outputStylesheet library="css" name="styleie8.css" />
<h:outputText value="&lt;![endif]--&gt;" escape="false" /> 
```

我认为您与第二种选择很接近。由于那里缺少上下文路径，您可能遇到了 404 错误。

# asp.net-mvc - 在 Asp.net MVC 的空项目中使用 WebApi

> ID：12529064
> 
> 赞同：1
> 
> 时间：2012-09-21T10:48:24.653
> 
> 标签：asp.net-mvc, asp.net-web-api

是否可以在 Asp.Net MVC 4 的现有项目中使用 Web Api？实际上我们已经开始使用 Empty MVC Application 模板构建项目，现在想在项目中使用 Web Apli 功能。是否有可能或者我需要在项目中添加一些 Web Api DLL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:52:03.327

对的，这是可能的。当您从空模板创建新的 ASp.NET MVC 4 应用程序时，您已经引用了所有必需的程序集，甚至 API 路由设置 ( `~/App_Start/WebApiConfig.cshtml`)。

所以现在剩下的就是右键单击`Controllers`解决方案资源管理器中的文件夹并选择*Add -> Controller*并选择 Empty API Controller 模板：

```
public class ValuesController : ApiController
{
    public string Get()
    {
        return "Hello from a Web API controller";
    }
} 
```

然后运行应用程序并导航到`/api/values`将触发该`Get`操作的位置。

# c - Eclipse 中的 printf

> ID：12529065
> 
> 赞同：2
> 
> 时间：2012-09-21T10:48:30.837
> 
> 标签：c, eclipse

我必须在 C 中使用 eclipse。我编写了一个简单的程序，但是我遇到了一个`printf`不能正常工作的命令的问题。任何想法？这是代码：

```
#include <stdio.h>
void change(double *x, double *y)
{
 double help = *x;
  *x = *y;
 *y = help;
 return;
}

int main()
{
double x=0, y=0;

printf("please give a value to a  \n ");
scanf("%f",&x);
printf("please give a value to b  \n");
scanf("%f",&y);

printf("x=%.2f\t y=%.2f\n",x,y);
printf("will give \n");
change(&x,&y);
printf("x=%.2f\t y=%.2f\n",x,y);
return 0;
} 
```

所以问题是我没有先得到这个`printf`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:51:57.217

你所有的价值观都是`double`你必须使用的`%lf`。但是您正在使用`%f`它调用未定义的行为。

在您的 scanfs 和打印中更改`%f`为。`%lf`

# postgresql - 在 postgreSQL 中引发错误

> ID：12529069
> 
> 赞同：17
> 
> 时间：2012-09-21T10:48:39.700
> 
> 标签：postgresql, plpgsql, quoting

```
CREATE OR REPLACE FUNCTION msgfailerror() RETURNS trigger AS 
' BEGIN 
    IF NEW.noces< new.first_column THEN 
        RAISE EXCEPTION 'cannot have a negative salary'; 
    END IF; 
   return new; 
END' LANGUAGE plpgsql 
```

扳机

```
create trigger msgfail before insert on first for each row 
execute procedure msgfailerror() 
```

给出错误：

> “cannot”处或附近的语法错误 LINE 5: RAISE EXCEPTION 'cannot have a negative ...

我对行的每个字段都有几乎一个验证。我想在插入完成时触发检查所有验证，然后一劳永逸地引发错误日志。我应该在 raise notice 上使用 raise exception 吗？

例如：

```
Insert into first (first_column, noces,dob) values ('4545','75','545') 
```

我正在检查`noces`小于`first_column`，对于同一行，我想检查 dob > 80 以及 first_column 是否为整数并为所有验证引发错误。提前致谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-21T10:58:45.390

引用是错误的。使用美元引号 $$ 更容易：

```
CREATE OR REPLACE FUNCTION msgfailerror() 
RETURNS trigger AS 
$$
BEGIN 
  IF NEW.noces< new.first_column THEN 
    RAISE EXCEPTION 'cannot have a negative salary'; 
  END IF; 
  return new; 
END;
$$
LANGUAGE plpgsql; 
```

但另一方面，检查约束有什么问题？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-23T09:02:49.943

你没有错，唯一的问题是使用引号

请更换 ：

```
RAISE EXCEPTION 'cannot have a negative salary'; 
```

到：

```
RAISE EXCEPTION ''cannot have a negative salary''; 
```

'' 不同于 "

'' = 两个单引号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:51:04.333

我同意弗兰克的观点，你可以更好地使用约束，但你称之为验证。验证通常在插入发生之前完成。如果您想验证插入，您可以使用函数而不是触发器或约束。

何时编写函数是您提出异常或通知的问题的答案，只要没有写入操作，通知就足够了（连同离开函数）。一旦对数据库进行了写入，您是否必须在执行回滚时使用异常。

像这样：

```
CREATE OR REPLACE FUNCTION field_validate(p_int int) RETURNS boolean AS $$

DECLARE
 i_id int;
BEGIN 
  if p_int > 10 then
   raise notice 'should be smaller then 10';
   return false;
  end if;
  insert into tbl_numbers(firstfield) values(p_int) returning id in i_id;
  insert into tbl_fake(nofield) values(i_id);
  return true;
EXCEPTION
  WHEN raise exception THEN
   return false;
END;
$$ LANGUAGE plpgsql; 
```

# ios - 如何在没有 AppStore 更新但使用 iOS SDK 付款的情况下创建 DLC 系统

> ID：12529070
> 
> 赞同：0
> 
> 时间：2012-09-21T10:48:43.557
> 
> 标签：ios, app-store

根据这个问题：[需要为我的iOS游戏制作一个DLC“包”系统](https://stackoverflow.com/questions/11433470/need-to-make-a-dlc-packet-system-for-my-ios-game)。如果我想从我的来源下载数据包但我仍然想通过 iOS SDK 进行支付怎么办？

**描述**：我有一个应用程序，在该应用程序中我将有一个更新按钮。如果有人单击该按钮，该应用程序将连接到我的服务器并获取免费和付费套餐列表。一个包里会有2-5张图片，文字。

**我的问题**是，我应该如何解决付款问题以及该包裹的外观（zip 或什么？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:40:52.753

就我而言，我使用[Objective-Zip](http://code.google.com/p/objective-zip/)。

# ipad - 如何在 iOS 6 中使用 Webkit 变换和过渡时修复闪烁

> ID：12529073
> 
> 赞同：8
> 
> 时间：2012-09-21T10:48:49.623
> 
> 标签：ipad, css, ios6

我们为 ipad 构建了一个 HTML5 应用程序，它使用 Webkit 转换和动画转换。过去，我们不得不使用`-webkit-transform: translate3d(0,0,0);`启用硬件加速来防止动画闪烁并显得流畅。我们已经更新到 iOS 6，但这种技术似乎不再有效。是否有一种新方法可以在 iOS 6 中为动画调用硬件加速？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T15:45:01.357

试试这个：

```
-webkit-perspective: 1000;
-webkit-backface-visibility: hidden; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T19:37:10.097

Apple 在 iOS6 中更改了 safari，因此[使用 translate3d 不会自动触发 GPU 加速](http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers)。我认为人们现在正在使用不同的方法来弄清楚如何实现这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-10T20:26:37.997

我最终通过将 translate3d(0, 0, 0) 应用于我正在转换的每个元素来解决这个问题。

```
.content * { -webkit-transform:translate3d(0,0,0); } 
```

# c - 在代码中找不到错误

> ID：12529075
> 
> 赞同：-3
> 
> 时间：2012-09-21T10:49:04.180
> 
> 标签：c

我编写加密\解密系统（原型）。该系统有 188 字节的数据包。并加扰：

加密（Python）：

```
#key = 40
packet[4]+packet[40:]+packet[4:40] 
```

解密（C）：

```
//in_buffer - main char* massive
//offs - offset of packet (length 188)
//key - int for separator (40 in example before)

void encryption(byte* in_buffer, int offs, int key)
{
  byte temp[188];
  int i;
  //write packet[4:40] to temp
  for(i = 4;i < key; i++)
  {  
    temp[i] = in_buffer[offs+i];
  }
  //write packet[40:] to top
  for(i = 4;i < 188 - key+4; i++)
  {  
    in_buffer[offs+i] = in_buffer[offs+i+key-4];
  }
  //write packet[4:40] of temp to in_buffer[152:]
  for(i = 4;i < key; i++)
  {  
    in_buffer[offs+i+188-key] = temp[i];
  }
} 
```

它适用于 key = 96，但不适用于任何其他键！为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:03:11.860

所有这些数组下标算术都是令人讨厌且容易出错的。用于`memcpy`将各个部分“附加”到位：

```
byte temp[188];
int pos = 0;

memcpy(temp + pos, in_buffer, 4); // append in_buffer[:4]
pos += 4;
memcpy(temp + pos, in_buffer + 188 - key + 4, key - 4); // append in_buffer[188-key+4:188]
pos += key-4;
memcpy(temp + pos, in_buffer + 4, 188 - key); // append in_buffer[4:188-key+4] 
```

# php - javascript中的多个复选框值

> ID：12529079
> 
> 赞同：0
> 
> 时间：2012-09-21T10:49:28.433
> 
> 标签：php, javascript, jquery, ajax

我有这个表单，我使用 ajax 和 jquery 提交，或者据说.. 好吧，我有这个多个复选框，从中我得到了一些值。

现在我在这里犯了一个错误，因为复选框的值没有发布在数据库中。这是 html/php 部分：

```
while($row = mysql_fetch_assoc( $result )) {
echo '<input type="checkbox" value="'.$row['regione'].'" id="regioni_gestite_ag" name="regioni_gestite_ag[]">' . $row['regione'] . '<br>';
} 
```

这就是我用javascript得到它的方式：

```
var js_regioni_gestite_ag = $('input:checkbox[name=regioni_gestite_ag]:checked').val(); 
```

这是我在提交表单后清理它的方式：

```
$("#regioni_gestite_ag").prop("checked", false); 
```

最后，我用来将其发布到数据库中的查询：

```
$postRegioni_gestite_ag = filter_var($_POST["postRegioni_gestite_ag"], FILTER_SANITIZE_STRING);
$selected_regioni = "";
foreach ($postRegioni_gestite_ag as $postRegioni_gestite_ag) {
$selected_regioni .= $postRegioni_gestite_ag . "/ ";
}
$selected_regioni = substr($selected_regioni, 0, -2); 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:04:18.857

您的复选框数组的名称是`$_POST['regioni_gestite_ag']`，但在您使用的代码`$_POST['postRegioni_gestite_ag']`中不存在。
尝试使用这行代码：

```
$postRegioni_gestite_ag = filter_var($_POST["regioni_gestite_ag"], FILTER_SANITIZE_STRING); 
```

建议：

*   用于`print_r($_POST)`显示表单提交的内容
*   请记住，所有未选中的复选框都不会提交，也不会出现在 $_POST 中。这是正常行为，不是错误

# javascript - 将 Require.js 与 Angular.js 一起使用是否有意义？

> ID：12529083
> 
> 赞同：449
> 
> 时间：2012-09-21T10:49:38.887
> 
> 标签：javascript, requirejs, angularjs

我是 Angular.js 的新手，并试图了解它与 Backbone.js 的不同之处......我们曾经在使用 Backbone 时使用 Require.js 管理我们的包依赖项。对 Angular.js 做同样的事情有意义吗？

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-09-21T12:54:07.840

是的，与可用于模块化组件的 where`angular.js`一起使用是有意义的。`require.js``require.js`

有一个[种子项目](https://github.com/tnajdek/angular-requirejs-seed)使用`both angular.js and require.js`.

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2013-09-04T13:56:57.503

重申我认为OP的问题确实是：

> 如果我主要在 Angular 1.x 中构建应用程序，并且（隐式）在 Grunt/Gulp/Broccoli 和 Bower/NPM 时代这样做，并且我可能有几个额外的库依赖项，是否需要添加清晰、具体价值超出了我使用 Angular 而没有 Require 所获得的价值？

或者，换一种说法：

> “*如果我有其他处理基本脚本加载的方法，香草 Angular 是否需要 Require 来有效管理基本 Angular 组件加载？* ”

我相信对此的基本答案是：“除非你有其他事情发生，和/或你无法使用更新、更现代的工具，否则不会。”

首先让我们明确一点：RequireJS 是一个伟大的工具，它解决了一些非常重要的问题，并开始了我们正在走的道路，朝着更可扩展、更专业的 Javascript 应用程序迈进。重要的是，这是许多人第一次遇到模块化和使事物脱离全局范围的概念。因此，如果您要构建一个需要扩展的 Javascript 应用程序，那么 Require 和 AMD 模式对于这样做来说是不错的工具。

但是，**Angular 有什么特别之处可以让 Require/AMD 特别适合吗？**不。事实上，Angular 为您提供了自己的模块化和封装模式，这在许多方面使 AMD 的基本模块化特性变得多余。而且，将 Angular 模块集成到 AMD 模式中并非不可能，但它有点……挑剔。您肯定会花时间让这两种模式很好地集成。

对于 Angular 团队本身的一些观点，[这](http://briantford.com/blog/huuuuuge-angular-apps.html)是来自 Angular Batarang 的作者，现在是 Angular 核心团队成员的 Brian Ford 的观点：

> 我不建议将 RequireJS 与 AngularJS 一起使用。虽然这当然是可能的，但我还没有看到任何 RequireJS 在实践中有益的例子。

因此，关于 AngularJS 的一个非常具体的问题：Angular 和 Require/AMD 是正交的，并且在某些地方重叠。您*可以*一起使用它们，但没有理由与 Angular 本身的性质/模式特别相关。

### 但是对于可扩展的 Javascript 应用程序的内部和外部依赖项的基本管理呢？不需要在那里做一些对我来说非常重要的事情吗？

我建议查看 Bower 和 NPM，尤其是 NPM。我并不是要就这些工具的相对优势发起一场圣战。我只想说：还有其他方法可以给猫剥皮，这些方法*可能*比 AMD/Require 更好。（它们在 2015 年末肯定有更受欢迎的势头，尤其是 NPM，结合 ES6 或 CommonJS 模块。请参阅[相关的 SO 问题](https://stackoverflow.com/questions/18641899/what-is-the-difference-between-bower-and-npm/31633281#31633281)。）

### 延迟加载呢？

请注意，延迟加载和延迟下载是不同的。Angular 的延迟加载并不意味着你直接从服务器中拉取它们。在带有 javascript 自动化的 Yeoman 风格的应用程序中，您将整个 shebang 连接并缩小到一个文件中。它们存在，但直到需要时才执行/实例化。这样做所带来的速度和带宽改进大大超过了延迟下载特定的 20 线控制器所带来的任何所谓的改进。事实上，该控制器浪费的网络延迟和传输开销将比控制器本身的大小大一个数量级。

但是假设您确实需要延迟下载，也许是针对您的应用程序中不经常使用的部分，例如管理界面。这是一个非常正当的案例。Require 确实可以为您做到这一点。但是还有[许多](http://www.appelsiini.net/projects/lazyload)[其他](https://chris.lu/article/read/506de698268c420f0d000004)[可能](http://w3bits.com/async-javascript/)[更](https://oclazyload.readme.io/) [灵活](https://stackoverflow.com/questions/20578731/how-to-lazy-load-non-angular-javascript-files-using-angularjs)的[选项](http://www.smashingmagazine.com/2015/02/redefining-lazy-loading-with-lazy-load-xt/)[可以](https://friendlybit.com/js/lazy-loading-asyncronous-javascript/)完成同样的事情。Angular 2.0 显然会为我们解决这个问题，内置于[router](https://github.com/angular/router)中。（[详情](http://www.syntaxsuccess.com/viewarticle/lazy-loading-in-angular-2.0)。）

### 但是在我的本地 dev boxen 的开发过程中呢？

如何在不需要手动将它们全部附加到 index.html 的情况下加载所有数十个/数百个脚本文件？

看看 Yeoman 的 generator-angular 中的子生成器，或者[generator-gulp-angular](https://github.com/Swiip/generator-gulp-angular)中体现的自动化模式，或者 React 的标准 Webpack 自动化。这些为您提供了一种干净、可扩展的方式：在构建组件时自动附加文件，或者如果它们存在于某些文件夹中/匹配某些 glob 模式，则简单地自动获取它们。一旦有了后一种选择，您就再也不需要考虑自己的脚本加载了。

### 底线？

对于某些事情，Require 是一个很好的工具。但尽可能随心所欲，并尽可能分离你的关注点。让 Angular 担心 Angular 自己的模块化模式，考虑使用 ES6 模块或 CommonJS 作为通用模块化模式。让现代自动化工具担心脚本加载和依赖管理。并以细粒度的方式处理异步延迟加载，而不是将其与其他两个问题纠缠在一起。

也就是说，如果您正在开发 Angular 应用程序，但由于某种原因无法在您的机器上安装 Node 以使用 Javascript 自动化工具，那么 Require 可能是一个很好的替代解决方案。而且我已经看到了非常复杂的设置，人们希望动态加载每个声明自己的依赖项或其他东西的 Angular 组件。虽然我可能会尝试以另一种方式解决这个问题，但对于那种非常特殊的情况，我可以看到这个想法的优点。

但除此之外......当从头开始使用新的 Angular 应用程序和创建现代自动化环境的灵活性......你有很多其他的、更灵活、更现代的选择。

*（不断更新以跟上不断发展的 JS 场景。）*

* * *

## 回答 #3

> 赞同：136
> 
> 时间：2013-03-27T17:10:41.247

是的，这是有道理的。

> Angular 模块不会尝试解决脚本加载顺序或延迟脚本获取的问题。这些目标是正交的，两个模块系统可以并存并实现它们的目标。
> 
> *来源：[Angular JS官网](http://docs.angularjs.org/tutorial/step_07)*

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2012-09-21T14:51:41.633

This I believe is a subjective question, so I will provide my subjective opinion.

Angular has a modularization mechanism built in. When you create your app, the first thing you would do is

```
var app = angular.module("myApp"); 
```

and then

```
app.directive(...);

app.controller(...);

app.service(...); 
```

If you have a look at the angular-seed which is neat starter app for angular, they have separated out the directives, services, controllers etc into different modules and then loaded those modules as dependancies on your main app.

Something like :

```
var app = angular.module("myApp",["Directives","Controllers","Services"]; 
```

Angular also lazy loads these modules ( into memory) not their script files.

In terms of lazy loading script files, to be frank unless you are writing something extremely large it would be an overkill because angular by its very nature reduces the amount of code you write. A typical app written in most other frameworks could expect a reduction in around 30-50% in LOC if written in angular.

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2014-01-06T16:11:07.080

将 RequireJS 与 AngularJS 一起使用是有意义的，但前提是您了解它们各自在**依赖注入**方面的工作方式，因为尽管它们都注入依赖项，但它们注入的东西却截然不同。

AngularJS 有自己的依赖系统，可以让你将 AngularJS 模块注入到新创建的模块中，以便重用实现。假设您创建了一个实现 AngularJS 过滤器“greet”的“第一个”模块：

```
angular
  .module('first', [])
  .filter('greet', function() {
    return function(name) {
      return 'Hello, ' + name + '!';
    }
  }); 
```

现在假设您想在另一个名为“second”的模块中使用“greet”过滤器，该模块实现了“goodbye”过滤器。您可以将“第一个”模块注入“第二个”模块：

```
angular
  .module('second', ['first'])
  .filter('goodbye', function() {
    return function(name) {
      return 'Good bye, ' + name + '!';
    }
  }); 
```

问题是，为了在没有 RequireJS 的情况下正常工作，您必须确保在创建“第二个”AngularJS 模块之前在页面上加载了“第一个”AngularJS 模块。引用文档：

> 依赖于模块意味着需要在加载所需模块之前加载所需模块。

从这个意义上说，这里是 RequireJS 可以帮助您的地方，因为 RequireJS 提供了一种将脚本注入页面的干净方式，帮助您组织彼此之间的脚本依赖关系。

回到“第一个”和“第二个”AngularJS 模块，这里是如何使用 RequireJS 分离不同文件上的模块以利用脚本依赖加载：

```
// firstModule.js file
define(['angular'], function(angular) {
  angular
    .module('first', [])
    .filter('greet', function() {
      return function(name) {
        return 'Hello, ' + name + '!';
      }
    });
}); 
```

```
// secondModule.js file
define(['angular', 'firstModule'], function(angular) {
  angular
    .module('second', ['first'])
    .filter('goodbye', function() {
      return function(name) {
        return 'Good bye, ' + name + '!';
      }
    });
}); 
```

您可以看到，在执行 RequireJS 回调的内容之前，我们依赖于要注入的“firstModule”文件，这需要加载“第一个”AngularJS 模块以创建“第二个”AngularJS 模块。

旁注：需要在“firstModule”和“secondModule”文件上注入“angular”作为依赖项，以便在 RequireJS 回调函数中使用 AngularJS，并且必须在 RequireJS 配置中配置它以将“angular”映射到库代码。您可能也以传统方式（脚本标记）将 AngularJS 加载到页面，尽管这会破坏 RequireJS 的好处。

更多关于从我的博客文章 2.0 版本的 AngularJS 核心获得 RequireJS 支持的详细信息。

**根据我的博*文“用 AngularJS 理解 RequireJS”*，这里是[链接](https://medium.com/@leog/making-sense-of-requirejs-with-angularjs-7f437b485eee)。**

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2012-09-22T12:11:04.290

正如@ganaraj 提到的，AngularJS 的核心是依赖注入。在使用和不使用 RequireJS 构建玩具种子应用程序时，我个人发现 RequireJS 对于大多数用例来说可能是多余的。

这并不意味着 RequireJS 对它的脚本加载功能和在开发过程中保持代码库的清洁没有用处。将 r.js 优化器 ( [https://github.com/jrburke/r.js](https://github.com/jrburke/r.js) ) 与almond ( [https://github.com/jrburke/almond](https://github.com/jrburke/almond) ) 相结合可以创建一个非常精简的脚本加载故事。但是，由于它的依赖管理功能在应用程序核心中的 Angular 并不重要，因此您还可以评估其他客户端（HeadJS、LABjs、...）甚至服务器端（MVC4 Bundler、...）脚本加载解决方案为您的特定应用程序。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2013-11-20T13:26:58.050

是的，它确实如此，特别是对于非常大的 SPA。

在某些情况下，RequireJS 是必须的。例如，我使用同样使用 Google Map API 的 AngularJS 开发 PhoneGap 应用程序。如果没有像 RequireJS 这样的 AMD 加载程序，应用程序在离线时启动时会简单地崩溃，因为它无法获取 Google Map API 脚本。AMD 加载程序让我有机会向用户显示错误消息。

但是，AngularJS 和 RequireJS 之间的集成有点棘手。我创建了 angularAMD 来让这个过程变得不那么痛苦：

[http://marcoslin.github.io/angularAMD/](http://marcoslin.github.io/angularAMD/)

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2014-01-21T16:54:40.833

Short answer is, it make sense. Recently this was discussed in ng-conf 2014\. Here is the talk on this topic:

[http://www.youtube.com/watch?v=4yulGISBF8w](http://www.youtube.com/watch?v=4yulGISBF8w)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-05-28T09:46:26.957

如果您计划延迟加载控制器和指令等，则将 requirejs 与 angularjs 一起使用是有意义的，同时还将多个延迟依赖项组合到单个脚本文件中以更快地延迟加载。RequireJS 有一个[优化工具](http://requirejs.org/docs/optimization.html)，使组合变得容易。请参阅[http://ify.io/using-requirejs-with-optimisation-for-lazy-loading-angularjs-artefacts/](http://ify.io/using-requirejs-with-optimisation-for-lazy-loading-angularjs-artefacts/)

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2013-05-27T15:03:17.633

是的，将 requireJS 与 Angular 一起使用是有意义的，我花了几天时间测试了几种技术解决方案。

我在服务器端使用 RequireJS 制作了一个 Angular 种子。很简单的一个。我对没有 AMD 模块而不是 AMD 使用 SHIM 表示法，因为我认为处理两个不同的依赖注入系统非常困难。

我使用 grunt 和 r.js 连接服务器上的 js 文件取决于 SHIM 配置（依赖）文件。所以我在我的应用程序中只引用了一个 js 文件。

有关更多信息，请访问我的 github Angular Seed： [https ://github.com/matohawk/angular-seed-requirejs](https://github.com/matohawk/angular-seed-requirejs)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-11-07T20:49:03.110

我会避免使用 Require.js。我见过的应用程序会导致多种类型的模块模式架构混乱。AMD、Revealing、不同风格的 IIFE 等。还有其他按需加载的方法，例如[loadOnDemand Angular mod](https://github.com/AndyGrom/loadOnDemand)。添加其他内容只会使您的代码充满杂乱无章，并导致[低信噪比](http://java.dzone.com/articles/whats-your-signal-noise-ratio)并使您的代码难以阅读。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-02-26T18:12:14.533

这是我使用的方法：http: [//thaiat.github.io/blog/2014/02/26/angularjs-and-requirejs-for-very-large-applications/](http://thaiat.github.io/blog/2014/02/26/angularjs-and-requirejs-for-very-large-applications/)

该页面显示了 AngularJS + RequireJS 的可能实现，其中代码按功能拆分，然后按组件类型拆分。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-06-30T02:17:24.430

布赖恩福特的回答

AngularJS 有它自己的模块系统，通常不需要像 RJS 这样的东西。

参考：[https ://github.com/yeoman/generator-angular/issues/40](https://github.com/yeoman/generator-angular/issues/40)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-09-15T08:04:52.327

我认为这取决于您的项目复杂性，因为 Angular 几乎是模块化的。您的控制器可以被映射，您只需在 index.html 页面中导入这些 JavaScript 类。

但是如果你的项目变得更大。或者您预计到这种情况，您应该将 Angular 与 requirejs 集成。在[本文](http://angularcorner.blogspot.co.il/)中，您可以看到用于此类集成的演示应用程序。

# asp.net-mvc-3 - 实体框架多个父表

> ID：12529086
> 
> 赞同：0
> 
> 时间：2012-09-21T10:50:11.540
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework

我有一个试图通过 Entity Framework 4.3 访问的现有数据库。大多数表格和关系都不是问题，但是这组表格给我带来了一些我似乎无法找到答案的问题。

以下是（浓缩的）实体：

**顾客**

```
public class Customer
{
    public int CustomerID { get; set; }
    public string Name { get; set; }

    private int addressSourceTypeID = 2;
    [NotMapped]
    public int AddressSourceTypeID { 
        get { return addressSourceTypeID; } 
        set { addressSourceTypeID = value; } }

    public virtual ICollection<User> Users { get; set; }
    public virtual ICollection<Contract> Contracts { get; set; }
    public virtual ICollection<Address> Addresses { get; set; }
} 
```

**合同**

```
public class Contract
{
    public int ContractID { get; set; }
    public string Name { get; set; }

    private int addressSourceTypeID = 4;
    [NotMapped]
    public int AddressSourceTypeID { 
        get { return addressSourceTypeID; } 
        set { addressSourceTypeID = value; } }

    public virtual int CustomerID { get; set; }
    public virtual Customer Customer { get; set; }

    //public virtual ICollection<Address> Addresses { get; set; }
} 
```

**地址**

```
public class Address
{
    [Key]
    public int AddressID { get; set; }
    public int AddressSourceTypeID { get; set; }

    [ForeignKey("Customer")]
    public int SourceKey { get; set; }

    public virtual Customer Customer { get; set; }
    //public virtual Contract Contract { get; set; }
    public virtual ICollection<Contact> Contacts { get; set; }
} 
```

我上面有两个实体`Customer`，`Contract`它们都可以有`Address`子实体。当前，`Address`实体设置为`Customer`实体的子实体，并且由于没有指向`Contract`from的链接，因此可以正常工作`Address`。

正如您从注释掉的代码段中看到的那样，我已经尝试像对实体所做的那样添加`Contract`到实体中。不幸的是，这不起作用，但由于在ForeignKey 注释中的引用，我并不感到惊讶。我什至尝试创建实体的特定版本（即），但是当多个实体尝试绑定到同一个表时出现错误。`Address``Customer``Customer``Address``Address``CustomerAddress`

我也尝试`ModelBuilder`在 EF中使用，`DBContext`但是我在这里的知识非常有限，我不知道在这种情况下该怎么做。

总的来说，我需要的是以下内容：

*   拥有一组子地址的客户实体。
*   合同实体拥有一组子地址。

这些“父”表与地址表之间的链接使用以下内容：

*   客户：CustomerID => 地址：SourceKey 和客户：AddressSourceTypeID（始终为 2）=> 地址：AddressSourceTypeID。
*   合同：ContractID => 地址：SourceKey 和合同：AddressSourceTypeID（始终为 4）=> 地址：AddressSourceTypeID。

如果有人可以帮助我或为我指出正确的方向，那就太好了。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:32:24.320

您可以让 EF`SourceKey`使用 Table per Hierarchy Inheritance 强制执行您的属性 - 然后您的映射将中断，或者您可以`SourceKey`在您的业务逻辑中强制执行并且只让 EF 管理主`Address`类。

如果您必须维护当前的数据库模式，我认为让您的业务逻辑强制您`SourceKey`作为鉴别器是您唯一的选择：

```
public class Address
{
    public int AddressID { get; set; }
    public int AddressSourceTypeID { get; set; }
    public int SourceKey { get; set; }
    public virtual Contract Contract { get; set; }
    public virtual Customer Customer { get; set; }
}
public class Contract
{
    public Contract()
    {
        this.Addresses = new List<Address>();
    }

    public int ContractID { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Address> Addresses { get; set; }
}
public class Customer
{
    public Customer()
    {
        this.Addresses = new List<Address>();
    }

    public int CustomerID { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Address> Addresses { get; set; }
} 
```

这在您的流利映射中：

```
 modelBuilder.Entity<Address>().HasOptional(t => t.Contract)
            .WithMany(t => t.Addresses)
            .HasForeignKey(d => d.SourceKey);
        modelBuilder.Entity<Address>().HasOptional(t => t.Customer)
            .WithMany(t => t.Addresses)
            .HasForeignKey(d => d.SourceKey); 
```

或者 - 如果你创建了一个`CustomerAddress`and `ContractAddress`，你可以使用 TPH 继承来强制`SourceKey`- 但目前没有办法映射 Nav 属性：

```
public abstract class Address
{
    [Key]
    public int AddressID { get; set; }
    public int AddressSourceTypeID { get; set; }

    public int SourceKey { get; set; }
}

public class CustomerAddress : Address
{
    public virtual Customer Customer { get; set; }
}

public class ContractAddress : Address
{
    public virtual Contract Contract { get; set; }
} 
```

这作为您的映射：

```
 modelBuilder.Entity<Address>()
            .Map<ContractAddress>(m => m.Requires("AddressSourceTypeID").HasValue(2))
            .Map<CustomerAddress>(m => m.Requires("AddressSourceTypeID").HasValue(4)); 
```

这将`AddressSourceTypeID`作为您的鉴别器强制执行 - 不幸的是，这里的细分是将您的导航属性映射回 ContractAddress 和客户地址。请参阅具有相同基本问题的[相关帖子。](https://stackoverflow.com/questions/11949742/entity-framework-multitenant-shared-data-architecture-single-column-multiple-f/12065892#12065892)也许这至少会让你朝着正确的方向前进。

# jms - 是否可以在生产者端使用 CLIENT_ACKNOWLEDGE？- JMS

> ID：12529088
> 
> 赞同：1
> 
> 时间：2012-09-21T10:50:27.290
> 
> 标签：jms

是否可以`CLIENT_ACKNOWLEDGE`在 JMS 的生产者端使用？那么它是什么意思呢？我的意思是承认是消费者方面的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:35:12.253

不，消息确认纯粹是消费者方面的概念。创建 JMS 会话时，您可以在多种确认模式中进行选择。消息确认背后的想法与面向消息的中间件 (MOM) 中保证交付的概念有关。简而言之，当您通过 MOM 实现发送消息时，该消息将被持久化（由生产者），直到它被发送给消费者并且消费者确认它的传递（或直到消息过期）。如果消费者在合理的时间内没有收到确认，则生产者重新发送消息。每种模式对消息传递的影响不同。

在 AUTO_ACKNOWLEDGE 模式下，消费者通过会话接收到的任何消息都将在接收时由底层 JMS 运行时的消费者自动确认。

在 CLIENT_ACKNOWLEDGE 模式下，消费者通过会话接收到的每条消息都必须被显式确认。这意味着确认消息的责任落在应用程序而不是 JMS 运行时。通常，消费者需要`acknowledge()`在处理完方法中的消息后调用会话上的`onMessage()`方法。

还有一个类似于 AUTO_ACKNOWLEDGE 的 DUPS_OK_ACKNOWLEDGE 设置，但是由 JMS 实现延迟发送确认，这可能会导致重复接收消息。

通常，当您需要对消息的确认进行显式控制时，您会使用 CLIENT_ACKNOWLEDGE 模式。

# visual-studio-2012 - 变量的自动名称 vs2012

> ID：12529091
> 
> 赞同：0
> 
> 时间：2012-09-21T10:50:36.953
> 
> 标签：visual-studio-2012

Resharper 有一个非常有用的功能。当用户键入对象名称（类名称）时，它会建议变量的名称。我可以在不重新锐化的情况下获得相同的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:00:27.607

不是没有像 ReSharper 这样的附加组件。

# jquery - Jhtmlarea - 使用 jquery 将 textarea 内容复制到另一个 textarea

> ID：12529093
> 
> 赞同：1
> 
> 时间：2012-09-21T10:50:50.013
> 
> 标签：jquery, textarea, jhtmlarea

我正在尝试使用下面的代码将文本从 jhtmlarea 复制到另一个 textarea 但它不起作用。

```
 <textarea id="attrArticleHtml"></textarea>
  <textarea id="attrArticleSecond"></textarea>

$(function() {
    $('#attrArticleHtml').keyup(function() {
        var textareaHtml = $('#attrArticleHtml').htmlarea('toHtmlString');
        console.log(textareaHtml);
        $('#attrArticleSecond').text(textareaHtml);

    });     
}); 
```

我应该使用什么 ID 来获取使用 keyup 复制的文本？似乎 jhtmlarea 正在使用 iframe，因此 attrArticleHtml 不正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:00:45.257

这对我有用：

```
 $("#ctl00_Kontent_taHtmlEditor").htmlarea({
    loaded: function() {
        var mycontrol = { jhtmlarea: this };
        $(mycontrol.jhtmlarea.editor.body).keypress(function(e) {
            var segedmezo = $("#divDrop").find("iframe").contents().find("body");
            $("#ctl00_Kontent_hfHtmlWithCodes").val(reduceCodes(segedmezo.html()));
        });
    },
    toolbar: [... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:10:04.873

您应该使用 VAL()，而不是 HTML、TEXT。所以你的代码必须是这样的：

```
$(function() {
    $('#attrArticleHtml').keyup(function() {
        $('#attrArticleSecond').val($('#attrArticleHtml').val());

    });     
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:49:13.453

您需要为创建区域的参数添加负载。

```
 $("#attrArticleHtml").htmlarea({
                loaded: function () {

                    $(this.editor).find('BODY').keyup(function (e) { 

                    var htmlValue =  $('#attrArticleHtml').val();
                    $('#attrArticleSecond').val(htmlValue )

        }); 
```

如果这对您有用，请不要忘记点击代表。

# split - 使用“-”分隔符拆分文本

> ID：12529096
> 
> 赞同：0
> 
> 时间：2012-09-21T10:51:09.270
> 
> 标签：split, delimiter

我有一个文本框，'txtSearch'。文本框可能包含类似“100-110”的值

我想在“-”之间拆分字符串，以便比较 100 和 110。我想将 100 分配给变量“a”，将 110 分配给变量“b”

我该怎么做？

语言是javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:54:48.037

```
var str= document.getElementById('txtSearch').value;
var n=str.split("-"); 
```

// n 的结果将是一个包含值的数组：你可以像这样得到它。

```
for (var i = 0; i < n.length; i++) {
    alert(n[i]);
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:18:52.603

检查这个：

```
var str= document.getElementById('txtSearch').value;
var n=str.split("-"); 

var a = n[0];
var b = n[1]; 
```

# android - Android中的异步网络流

> ID：12529097
> 
> 赞同：0
> 
> 时间：2012-09-21T10:51:10.790
> 
> 标签：android, networking, client

我有一个使用我的自定义异步网络的 android 客户端，它运行良好，接收良好。但是，在某些时候，服务器几乎同时发送 2 条消息（服务器中有 2 个不同的线程）但是在客户端，当这种情况发生时，它只收到第一条消息，已经尝试使用 runnable，在解析时保持接收消息，但没有成功。如果有人可以帮助我，我该如何解决这个问题。

我的接收代码：

```
 interface RecieveCallback {
    void callback(int recievedBytes, InputStream stream);
}

public class Recieve implements Runnable {
    private RecieveCallback callback;
    private InputStream stream;
    private byte[] buffer;

    public Recieve(InputStream inStream, byte[] _buffer, RecieveCallback _callback) {
        callback = _callback;
        stream = inStream;
        buffer = _buffer;
    }

    public void run() {
        try {
            while (true) {
                final int recievedBytes = stream.read(buffer);
                (new Runnable() {

                    public void run() {
                        callback.callback(recievedBytes, stream);                       
                    }
                }).run();       
            }
        } catch (IOException e) {
            Log.e("Recieve", e.getMessage());
        }
    }

}

public Connection() {
    this(host, port);
}

public Connection(String ip, int _port) {
    inMessage = new NetworkMessage();
    try {
        serverAddres = InetAddress.getByName(ip);
        socket = new Socket(serverAddres, _port);
        socketOut = socket.getOutputStream();
    } catch (IOException e) {
        Log.e("Connect", e.getMessage());
    }
}

public void Connect() {
    try {
        BeginRecieve(socket.getInputStream(), inMessage.getBuffer(), new RecieveCallback() {            
            public void callback(int recievedBytes, InputStream stream) {
                OnRecieve(recievedBytes, stream);               
            }
        });
    } catch (IOException e) {
        Log.e("BeginRecieve", e.getMessage());
    }
}

public boolean EndRead(int recievedBytes, InputStream stream) {
    int size = (int)inMessage.GetUInt32() + 4;

    while (recievedBytes < size) {
        try {
            recievedBytes += stream.read(inMessage.getBuffer(), recievedBytes, (size - recievedBytes));
        } catch (IOException e) {
            e.printStackTrace();
            return false;
        }
    }

    inMessage.setLength(size);

    return true;
}

public void OnRecieve(int recievedBytes, InputStream stream) {
    inMessage.setPosition(0);

    if (!EndRead(recievedBytes, stream)) {
        return;
    }

    NetworkMessage tempMessage = inMessage;

    if (!ParseMessage(tempMessage)) {
        //Tratar erro
    }
}

public void BeginRecieve(InputStream inStream, byte[] _buffer, RecieveCallback _callback) {
    if (beginRecieve != null && beginRecieve.isAlive()) {
        beginRecieve.interrupt();
    }

    beginRecieve = new Thread(new Recieve(inStream, _buffer, _callback));
    beginRecieve.start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:41:09.427

我得到了解决方案。问题是客户端在同一个缓冲区中接收两条消息。但它只处理第一个，所以我不得不更改代码，以便它会在同一个缓冲区中获得超过 1 条消息，并将所有消息放在一条消息中，这样我就可以按原样解析它。

# iphone - Kobold2d - 方向

> ID：12529101
> 
> 赞同：1
> 
> 时间：2012-09-21T10:51:46.783
> 
> 标签：iphone, ios, orientation, kobold2d

我在 cocos2d 中创建了一个游戏，因为我想使用一些我发现 kobold2d 的 UIKit 元素。

我移植了游戏，但问题是我的 iPhone 刺激器是旋转的，

但不是显示的节点。

必须使用：

```
background.rotation = 270; 
```

对于我创建的每个精灵，或者我忽略了一个方法

我将 Kobold2D v2.0.3 与 xCode 4.5 结合使用。![在此处输入图像描述](../Images/5859b77d288828fb71f377b917a9b85b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:11:19.060

在 KKAppDelegate.m 中，更改此行：

```
// set the Navigation Controller as the root view controller
[window addSubview:navController.view]; 
```

对此：

```
// set the Navigation Controller as the root view controller
window.rootViewController = navController; 
```

我会尽快发布更新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:59:05.390

您必须在资源中启用 lua 文件中的自动旋转 ..！

# php - 具有许多查询的导入脚本会导致网站运行缓慢

> ID：12529103
> 
> 赞同：0
> 
> 时间：2012-09-21T10:51:49.760
> 
> 标签：php, mysql, xml, import, export

我们为我们的离线程序建立一个链接到我们的网站。在我们的离线程序中，我们有 50.000 条记录要推送到我们的网站。我们现在要做的是：

在离线程序中，我们构建了一个包含 1500 条记录的 xml 文件，并将其发布到我们网络服务器上的 php 文件中。在网络服务器上，我们读取 xml 并将其推送到 mysql 数据库，在我们这样做之前，我们首先检查记录是否已经存在，然后我们更新记录或将其作为新记录插入。

完成后，我们向我们的离线程序返回一个批处理完成的消息。离线程序使用接下来的 1500 条记录构建一个新的 xml 文件。重复此过程，直到达到最后 1500 条记录。

问题是网络服务器在将记录推送到数据库时变得非常慢。可能那是因为我们首先检查已经存在的记录（这是一个查询），然后将其写入数据库（这是第二个查询）。因此，对于每个批次，我们必须运行 3000 个查询。

我希望你们有一些技巧来加快这个过程。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:01:09.530

1.  在开始导入之前，请阅读您拥有的所有数据 ID，不要对每个插入的项目进行检查查询，而是在现有的 php 数组中检查它。
2.  修复数据库表上的键。
3.  在一个请求上进行所有插入，或使用事务。

以这种方式导入大量数据没有问题，我有很多经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:13:39.830

一件好事是编写一个由分号分隔的所有插入语句的串联组成的单个查询：

```
INSERT INTO table_name
        (a,b,c)
    VALUES
        (1,2,3)
    ON DUPLICATE KEY
        UPDATE a = 1, b = 2, c = 3;
INSERT INTO table_name
    ... 
```

您可以连接 100-500 个插入语句并将它们包装在一个事务中。

将许多语句包装到一个事务中会有所帮助，因为它不会在插入每一行后立即将数据提交到磁盘，它将整个 100-500 个批处理保存在内存中，当它们全部完成时，它会将它们全部写入磁盘 -这意味着更少的间歇性磁盘 IO。

您需要找到一个合适的批量大小，我举例说明了 100-500，但取决于您的服务器配置、每条语句的数据量以及插入与更新的数量，您必须对其进行微调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:57:58.113

阅读有关 Mysql 唯一索引约束的一些信息。这应该有助于：

[Mysql 索引教程](http://www.tizag.com/mysqlTutorial/mysql-index.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:03:20.327

4 个月前我遇到了同样的问题，我在 java 而不是 php 中获得了更多的性能编码，并且避免了 xml 文档。我的提示：您可以读取整个表（如果您执行一次比逐个进行多次查询要快）并将此表保存在内存中（例如在 HashMap 中）。在插入记录之前，您可以检查它是否存在于您的本地结构中（您不必打扰数据库）。你可以通过这种方式提高你的表现。

# jquery - HTML5 离线应用数据库

> ID：12529109
> 
> 赞同：0
> 
> 时间：2012-09-21T10:52:05.237
> 
> 标签：jquery, json, html, offline-caching

如何使用`JSON`字符串（相当大）作为数据库`HTML5`

我知道我们可以`localStorage.setItem('key',value)`用来存储一个特定的值。我有一个`JSON`包含 200 到 300 条记录的字符串

```
[{"key":"value"....},
{"key":"value"....},
{"key":"value"....},
......
.....
...
//around 300
] 
```

现在我把这整个`JSON`放在一个`div`with `display`said to并像这样`none`访问它`JSON`

```
$.parseJSON($('#mydivid').html()); 
```

还有其他替代建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:58:13.580

我不确定我是否理解这个问题。

假设你有一个由你的服务器生成的 json 文件（如果你喜欢的话，很多 MB），你可以用一个简单的 ajax 查询来获取它，解析它，然后将它用作

```
var myval = database['somekey']; 
```

您不应该将它包装在您的 html 中，如果只有数据库更改，它会阻止您的页面的正常缓存。

您的 json 将存储或生成在第二个单独的 .json 文件中（您可以在 PHP 中很好地生成该文件）。

获取它的函数如下所示：

```
var database;

function fetchDatabse(callback) {
    var httpRequest = new XMLHttpRequest();
    httpRequest.onreadystatechange = function() {
        if (httpRequest.readyState === 4) {
            if (httpRequest.status === 200) {
                database = eval('('+httpRequest.responseText+')');
                if (callback) callback();
            }
        }
    };
    httpRequest.open('GET', 'database.json?time='+(new Date().getTime()));
    httpRequest.send(); 
} 
```

请注意，通常最好使用 ajax 查询仅获取数据库的一部分。

* * *

如果您**真的**想将 json 嵌入页面中，而不是将其嵌入隐藏的 div 中，请将其嵌入脚本中：

```
<script>
var database = {
   ...
};
</script> 
```

# qt - 我们如何获取 QTabWidget 的标题高度

> ID：12529112
> 
> 赞同：2
> 
> 时间：2012-09-21T10:52:12.490
> 
> 标签：qt, qt4.8, qtabwidget

有没有办法获取 QTabWidget 中标题栏的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:15:29.493

尝试以下操作：

```
QTabWidget *myTabWidget = new QTabWidget();
int titleBarHeight = myTabWidget->tabBar->height(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T00:13:19.677

您需要在 QTabBar 的子类中重新实现 tabSizeHint() 方法。然后，如果您愿意，您也可以获取大小，并将 QTabWidget 的选项卡调整为您想要的任何大小。希望这可以帮助。干杯。

# sql - SQL 排序表和更新列

> ID：12529113
> 
> 赞同：2
> 
> 时间：2012-09-21T10:52:16.483
> 
> 标签：sql, excel, ms-access

嗨，谁能告诉我如何在 MS Access 数据库中使用 SQL 执行以下操作。？

我有一个看起来像这样的表：

我的表

```
Plan    Item        Sort_Number
-------------------------------------
11026    ZSC1753D   
11018    PS13-2     
11026    ZSC1753B   
11018    PSHH278B   
11026    ZSO1753A   
11018    PS3169     
11027    ZSC1754B   
11027    ZSC1754A   
11026    ZSC1753A   
11026    ZSC1753C 
```

我有一个表（上图），需要首先按计划（第 1 列）排序，然后按项目的升序（第 2 列）排序，第三列排序编号需要填充 1 到 xx 的序列号。对于每个不同的计划。

所以最终的排序表将如下所示：

我的表

```
Plan    Item    Sort_Number
-------------------------------------
11018   PS13-2      1
11018   PS3169      2
11018   PSHH278B    3
11026   ZSC1753A    1
11026   ZSC1753B    2
11026   ZSC1753C    3
11026   ZSC1753D    4
11026   ZSO1753A    5
11027   ZSC1754A    1
11027   ZSC1754B    2 
```

我可以用 SQL 做到这一点吗？在 MS Access 数据库中。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:24:49.110

```
UPDATE myTable d, 
    (SELECT Plan, Item, 
       (SELECT count(*) + 1 
        FROM myTable i 
        WHERE i.Plan = o.Plan and i.Item < o.Item) as Sort_Number
    FROM myTable o) as s
SET d.Sort_Number = s.Sort_Number
WHERE d.Plan = s.Plan and d.Item = s.Item 
```

或者

```
UPDATE myTable d INNER JOIN 
    (SELECT Plan, Item, 
       (SELECT count(*) + 1 
        FROM myTable i 
        WHERE i.Plan = o.Plan and i.Item < o.Item) as Sort_Number
    FROM myTable o) s
ON d.Plan = s.Plan and d.Item = s.Item
SET d.Sort_Number = s.Sort_Number 
```

**编辑**：我知道这效率不高，但对于有限数量的记录，它可以毫无问题地工作。

**EDIT2**：请注意，我没有在 MS-Access 中尝试过这个查询。我希望它能为您提供有关如何完成的信息。

**EDIT3**：使用临时表

```
SELECT Plan, Item, 
       (SELECT count(*) + 1 
        FROM myTable i 
        WHERE i.Plan = o.Plan and i.Item < o.Item) as Sort_Number
INTO TEMPTABLEFORTEST
FROM myTable o

UPDATE myTable i 
INNER JOIN TEMPTABLEFORTEST o 
ON i.Plan = o.Plan and i.Item = o.Item set i.Sort_Number = o.Sort_Number

DROP Table TEMPTABLEFORTEST 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:31:25.777

创建要*更新* `Sort_Number`的 SQL 语句具有挑战性。但是，用于此的 VBA 过程相当简单。我在 Access 2007 中使用名为“ *Plans* ”的表中的示例数据对此进行了测试。在下面的“FROM”行中替换您的真实表名。

```
Public Sub Update_Sort_Numbers()
    Dim db As DAO.Database
    Dim rs As DAO.Recordset
    Dim strSelect As String
    Dim lngCurrentPlan As Long
    Dim lngSortNum As Long

    strSelect = "SELECT p.Plan, p.Item, p.Sort_Number" & vbCrLf & _
        "FROM Plans AS p" & vbCrLf & _
        "ORDER BY p.Plan, p.Item;"
    Set db = CurrentDb
    Set rs = db.OpenRecordset(strSelect)
    With rs
        Do While Not .EOF
            If rs!Plan <> lngCurrentPlan Then
                lngCurrentPlan = rs!Plan
                lngSortNum = 1
            End If
            Debug.Print !Plan, ![Item], lngSortNum
            .Edit
            !Sort_Number = lngSortNum
            .Update
            lngSortNum = lngSortNum + 1
            .MoveNext
        Loop
        .Close
    End With
    Set rs = Nothing
    Set db = Nothing
End Sub 
```

# c++ - 我可以在 .hpp 文件中#include 吗？

> ID：12529119
> 
> 赞同：0
> 
> 时间：2012-09-21T10:52:42.523
> 
> 标签：c++, class, pointers, compiler-construction, forward-declaration

我有一个名为 A 的类，它有它的`.cpp`和`.hpp`文件。这取决于类`B`和`C`. 现在，我想知道，我应该`#include B.hpp`and `#include C.hpp`in `A.cpp`or`A.hpp`吗？我认为这对我来说是有益`#include`的`A.hpp`，因为我正在创建一个`B*`'s 的向量，而且我不确定`B`如果我只转发声明它编译器是否会知道正确的大小（所以我不能t 指针正确递增）...通过“前向声明” `class B;`，我的意思是`class C;`在`A.hpp`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:29:14.680

正如已经提到的，您通常可以`#include`通过使用前向声明来解决必须填充的问题，实际上最好的做法是尽量减少包含的其他标头的数量。

但是：要回答您的问题标题：是的，您可以，避免“循环包含”的常见机制如下

A.hpp：

```
#ifndef A_HPP_INCLUDED
#define A_HPP_INCLUDED

... // code

#endif 
```

现在如果说 B.hpp 包含 A.hpp，随后，C.hpp 看起来像：

```
#ifndef C_HPP_INCLUDED
#define C_HPP_INCLUDED

#include "A.hpp"
#include "B.hpp"

...
#endif 
```

然后你不会得到一个错误，说明例如'class A'已经被定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:54:59.830

如果它是 的向量`B*`，则不需要包含`B.hpp`在其他标头中。前向声明很好。指针具有相同的大小，无论它们指向什么。

最好只在必要时才包含，这当然看起来不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:09:06.367

我不知道我是否理解你的类层次结构，在我看来是这样的：

`B.hpp`

```
class B
{
    B();
}; 
```

`B.cpp`

```
B::B() {}; 
```

`C.hpp`

```
class C
{
    C();
}; 
```

`A.cpp`

```
A::A() {}; 
```

`A.hpp`

```
class A
{
    A();
    B *b;
    C *C;
}; 
```

`A.cpp`

```
#include "B.hpp"
#include "C.hpp"

A::A() :
    b(NULL), c(NULL)
{
}; 
```

它是否正确？（如果没有，请考虑提供一些代码；）如果您`class A`有指针`class B`并且`class C`前向声明必须是您唯一需要的。

> 如果我只转发声明它，我不确定编译器是否会知道 B 的正确大小

是的，只要你在文件中包含`B.hpp`and ，编译器就可以推断出它的大小（类大小，指针大小总是相同的）。为什么？只是因为在文件中它知道正确的大小，因为. 我发现[这个答案](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)有助于理解我想说的话。`C.hpp``A.cpp``cpp``#include`

`hpp`在文件中会很好吗？也许，如果您`A.hpp`不会包含在其他文件中，`class B`并且`class C`不会打扰并传播到其他文件中。所以，如果是这种情况，那就没有必要了。`#include`但恕我直言，最好的做法是在可能的情况下转发声明和`cpp`文件。

# csv - Microsoft Dynamics 数据导入失败并出现未解决的查找

> ID：12529121
> 
> 赞同：1
> 
> 时间：2012-09-21T10:52:43.600
> 
> 标签：csv, import, dynamics-crm, lookup

我正在尝试在 Microsoft Dynamics 2011 中导入 csv 文件。该文件是从我们的网站导出的销售数据，我正在尝试使用此数据创建新的客户、联系人、发票、订单、发票产品和订单产品实体. 我正在使用多实体数据映射来执行此操作。

但是，当我尝试导入时，创建发票失败并显示“无法解析查找引用”消息。与货币领域有关。该字段是与货币名称相关的查找，在所有情况下都是“美元”。这与我们数据库中的美元货币名称完全相同，但由于某种原因，查找拒绝正确分配它。我们的数据库中没有其他具有此名称的货币。

谁能向我解释为什么会发生这种情况以及我可以采取什么措施来处理它？非常感谢。

编辑：有关我的问题的更多信息。

当我尝试使用重复项执行多实体导入时，似乎会出现问题。我从此导入创建的所有新条目都依赖于使用相同数据创建的其他新条目。例如，我正在创建帐户，然后创建客户以分配给这些帐户。如果所述帐户已经在系统中具有重复项，则它们将被忽略。这是意料之中的。但是，在创建分配给该帐户的客户时，查找失败并出现“找到重复的查找引用”错误。当数据库中有多个符合我在查找中使用的值时，就会发生此错误。

我不是 100% 确定，但我认为它同时计算了被忽略的帐户和执行查找时系统中已经存在的原始帐户。谁能提供更多关于我如何解决这个问题的见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:09:23.600

我不确定这是否是您的问题，但我猜是。

在导入向导中，您可以选择他如何解析您的查找。即：当您的 CSV 文件中的列包含货币名称时，您必须在导入向导中为货币字段选择名称字段。

在此处的屏幕中，您可以看到国家/地区是一个查找项，国家/地区的名称是 CSV 文件的值。它必须与查找的字段匹配。如果我选择“创建于”它找不到查找。因为没有国家存在等于“比利时”。因此，您选择查找的名称字段，这就是他将在您定义的查找字段中的 CSV 中检查您的值的方式。

![查找参考](../Images/4118a369b8161a9f190a2b4d69f8408e.png)

1.将每种记录类型的记录放在单独的文件中。

2.将不同所有者的记录放在单独的文件中。

3.如果您希望导入向导自动*映射数据，请确保文件的第一行包含列标题并且它们与 CRM 属性显示名称完全匹配。*如果您打算导入与另一条记录相关的记录，则需要自动映射（参见#6）。即使您不想要相关记录，我也强烈建议您使用自动映射。

4.确保第一列标题不是记录类型的名称。

5.确保您的源文件中存在所有 CRM 必填字段的数据（在 CRM 表单上用红色星号表示）。

6.确保每列都存在一些数据。如果一列没有数据，则删除该列。

7.如果您的数据应该与另一条记录相关（即向现有客户添加联系人），请确保列标题与 CRM 查找属性显示名称匹配。如果您在 CRM 中有两个具有相同显示名称的不同属性，您将收到错误消息（例如，如果您创建了自定义状态选项列表值来替换文本版本并保持显示名称相同“地址 1：州/省”） . 还要确保公司名称值与相应的客户记录匹配（即，不会将具有 Microsoft Corp. 父客户值的联系人添加到 CRM 帐户 Microsoft）并且系统中没有重复的帐户，因为导入不会能够解决正确的父客户。

8.如果您要导入下拉列表，请确保所有值都存在于 CRM 中，并且源文件中没有印刷错误和一致的大小写。

编辑：您的数据库中似乎确实有多条记录可以适合该 1 次查找。由于无法解决查找问题，因此他对此给出错误是正常的。CRM 不知道要记录哪条记录。此外，如果您正在导入 MN 关系，您可能需要注意。您将不得不与代码建立 MN 关系。标准导入向导无法处理多对多关系

# c# - lucene.net 语音过滤器

> ID：12529126
> 
> 赞同：2
> 
> 时间：2012-09-21T10:52:57.793
> 
> 标签：c#, lucene.net, phonetics

我正在尝试将文本数据存储到 lucene。

搜索应该是拼音！

我应该在哪里添加语音过滤器？

```
Lucene.Net.Store.Directory dir =
FSDirectory.Open(new DirectoryInfo(Application.StartupPath + "\\Index"));

IndexReader indexReader = IndexReader.Open(dir, true);
Searcher indexSearch = new IndexSearcher(indexReader);
//IndexReader indexReader = IndexReader.Open(dir, true);
//Searcher indexSearch = new IndexSearcher(indexReader);
Analyzer analyzer = new Lucene.Net.Analysis.De.GermanAnalyzer();

//Analyzer analyzer = new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_29);
var queryParser = new QueryParser(Lucene.Net.Util.Version.LUCENE_29,"content", analyzer);
var query = queryParser.Parse(textBox1.Text+"~0.8");

Console.WriteLine("Searching for: " + query.ToString());
TopDocs resultDocs = indexSearch.Search(query, indexReader.MaxDoc());

Console.WriteLine("Results Found: " + resultDocs.TotalHits) 
```

问候，英戈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:58:31.690

一种方法是实现将`Analyzer`其添加到`TokenStream`链中，或直接使用 TokenStream。

IE：

```
System.IO.TextReader someText = ....;
TokenStream phonetics = new PhoneticFilter(new LowerCaseFilter(new WhitespaceTokenizer(someText ))); 
```

替换`PhoneticFilter`为`TokenFilter`您实现的，并在搜索和索引时都使用它。

# vb.net - 以秒为单位找出两个日期时间之间的差异

> ID：12529127
> 
> 赞同：15
> 
> 时间：2012-09-21T10:53:01.593
> 
> 标签：vb.net, visual-studio, visual-studio-2005

我快速浏览了一下，我在 vb.net 中找不到答案，或者我可以转换成 vb.net 的东西。

我在 vb.net 的“日期”类中有两个日期时间。我想在几秒钟内找到这些之间的区别。我可以做ab，但答案仍然是“约会”。我可以使用`.seconds` `.minutes`etc. 并乘以，但是当我几个月时我会遇到问题。

有没有一种简单的方法可以做到这一点，还是我需要编写一些精心设计的代码？

非常感谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-21T10:54:57.943

[相互减去](http://msdn.microsoft.com/en-us/library/1905yhe2.aspx)值 - 返回的`DateTime`类型将是 a [`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)。

`TotalSeconds`从中获取价值。

```
(date1 - date2).TotalSeconds 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T22:32:21.693

实际上还有一个功能为此`DateDiff(DateInterval.Second, d1, d2)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:55:26.937

像这样的东西怎么样

```
Dim secs As Double = DateTime.Today.Subtract(DateTime.Today.AddDays(-1)).TotalSeconds 
```

查看[DateTime.Subtract 方法（DateTime）](http://msdn.microsoft.com/en-us/library/8ysw4sby.aspx)和[TimeSpan.TotalSeconds 属性](http://msdn.microsoft.com/en-us/library/system.timespan.totalseconds.aspx)

# routing - 通过angularjs中的路由重定向

> ID：12529129
> 
> 赞同：26
> 
> 时间：2012-09-21T10:53:20.217
> 
> 标签：routing, angularjs

我有以下要求：应该为所有带有编辑和删除链接的项目显示一个列表。当用户点击编辑时，编辑表单应该出现文本框和保存按钮。现在，当用户编辑数据并单击保存按钮时，应保存数据，并且列表页面应再次显示修改后的数据。一切正常，但我如何通过 angularjs 中的路由再次重定向到列表页面？下面是一些代码：

路由控制器：

```
 angular.module('productapp', []).
    config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/productapp', {templateUrl: 'partials/productList.html', controller: productsCtrl}).
        when('/productapp/:productId', {templateUrl: 'partials/edit.html', controller: editCtrl}).
        otherwise({redirectTo: '/productapp'});
}]); 
```

编辑表格：

```
 <div>
    <form method="POST">
    <label>Add New Product:</label>
        <input type="text" name="keywords" ng-model="product.name" placeholder="enter name..." value="{{product.name}}">
        <input type="text" name="desc" ng-model="product.description" placeholder="enter description..." value="{{product.description}}">
        <button type="submit" ng-click="save(product.product_id,$event)" >Save</button>
    </form>
</div> 
```

我如何重定向到相同的列表页面？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-21T12:32:29.220

您需要在控制器中注入[$location](http://docs.angularjs.org/api/ng.%24location)服务。`editCtrl`

然后，在您的保存函数中添加以下内容以执行重定向（注意路径与您的路线匹配）。

```
$scope.save = function (...) {
    // ...
    $location.path('/productapp');
} 
```

[这个 Youtube 视频](http://www.youtube.com/watch?v=5uhZCc0j9RY)也可能对您有所帮助。

# mysql - 用于更新/插入的通用 SQL

> ID：12529130
> 
> 赞同：2
> 
> 时间：2012-09-21T10:53:24.927
> 
> 标签：mysql, sql, sql-server, database, oracle

我正在编写一个与 MS SQL Server、MySQL 和 Oracle 对话的数据库层。我需要一个操作，如果它包含某些数据，它可以更新现有行，否则插入一个新行；一站式 SQL 操作。

本质上，如果存在，我需要保存现有数据，如果不存在，则添加它

从概念上讲，这与 upsert 相同，只是它只需要在单个表上工作。我试图确保我不需要删除然后插入，因为这会影响性能。

是否有通用 SQL 来执行此操作，还是我需要供应商特定的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:54:56.383

您需要供应商特定的 SQL，因为 MySQL（与 MS 和 Oracle 不同）不支持`MERGE`

[http://en.wikipedia.org/wiki/Merge_(SQL](http://en.wikipedia.org/wiki/Merge_(SQL) )

我怀疑你迟早会需要一个供应商特定的数据库层实现——只要你做任何稍微高级的事情，SQL 可移植性几乎就是一个神话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:55:11.067

我很确定这将是特定于供应商的。对于 SQL Server，您可以使用[MERGE](http://msdn.microsoft.com/en-us/library/bb522522%28v=sql.105%29.aspx)语句完成此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T10:58:11.503

如果您使用的是 SQL Server 2008，请使用 Merge 语句。但请记住，如果您的 Insert 零件涉及某些条件，则不能使用它。在这种情况下，您需要编写自己的方式来完成此操作。在您的情况下，它必须是因为您涉及没有合并语句的 MySQL。

为什么不为此目的使用 ORM 层（如实体框架）？

只是一些伪代码（在 C# 中）

```
public int SaveTask(tblTaskActivity task, bool isInsert)
        {
            int result = 0;

            using (var tmsEntities = new TMSEntities())
            {

                if (isInsert) //for insert
                {
                    tmsEntities.AddTotblTaskActivities(task);
                    result =  tmsEntities.SaveChanges();
                }
                else //for update
                {
                    var taskActivity = tmsEntities.tblTaskActivities.Where(i => i.TaskID == task.TaskID).FirstOrDefault();
                    taskActivity.Priority = task.Priority;
                    taskActivity.ActualTime = task.ActualTime;
                    result = tmsEntities.SaveChanges();
                }
            }
            return result;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T21:34:15.500

在 MySQL 中，你有一些类似于合并的东西：

在重复键更新时插入 ...

[MySQL 参考 - 在重复键更新时插入](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# arm - 如何从 imx50evk 上的 uImage 启动

> ID：12529131
> 
> 赞同：0
> 
> 时间：2012-09-21T10:53:26.943
> 
> 标签：arm, embedded-linux

我需要使用 linux 的 dd 命令从已经刷入 sdcard 的内核映像 uImage 启动。从 u-boot 提示 u-boot>....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:05:13.700

要从 SD 卡加载内核，您可能需要执行以下操作：

```
> mmc dev 1
> mmc read ${loadaddr} 0x800 0x2000
> bootm 
```

# asp.net - 使用 HTTPS 时，“大”文件上传随机失败

> ID：12529132
> 
> 赞同：1
> 
> 时间：2012-09-21T10:53:27.850
> 
> 标签：asp.net, iis, file-upload, iis-7, backbone.js

我们有一个网站，它需要允许用户上传大小从几 KB 到最多 40MB 的文件。它有一个由 Backbone.js 提供支持的单页前端（使用[jQuery 表单插件](https://github.com/malsup/form)上传文件）和一个使用 ASP.NET MVC 构建的 API，它托管在 IIS7 上。它也仅通过 HTTPS 提供服务。

在 Chrome 中，超过 4MB 的文件往往无法上传 - 通常没有来自服务器的响应（在检查网络响应时）。在 Firefox 中，相同的文件通常可以正常上传，*但*偶尔会出现 413 错误（我连续上传了大约 5 次相同的文件，最后一次出现 413 错误）。

当我们禁用 HTTPS 时，一切似乎都正常……但我们需要开启 HTTPS。

web.config 文件包含`maxAllowedContentLength`并将`maxRequestLength`值设置为足够高的值。

我们还需要调整或启用其他任何东西以使其通过 HTTPS 更可靠地工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:00:30.117

尝试查看 httpRuntime 配置的 executionTimeout

# arrays - JSON 数组限制 ¿60 个对象？

> ID：12529133
> 
> 赞同：1
> 
> 时间：2012-09-21T10:53:29.440
> 
> 标签：arrays, json, limit, jsonpath

我正在使用 Twitter API，并且我检查了 json 不能识别超过 60 个成员的数组。

我已经用这个工具检查了这个问题：http: [//jsonpath.curiousconcept.com/](http://jsonpath.curiousconcept.com/)

如果我将 60 个对象放入数组中，它将停止解析 json，例如，如果您查询 $..results[*] （尽管它是有效的）。关于这个问题的任何线索？

数组中只有一个对象的 json

```
{"completed_in":0.138,"max_id":249066208408788992,"max_id_str":"249066208408788992","next_page":"?page=2&max_id=249066208408788992&q=bezoya%20OR%20lanjar%EF%BF%BD&lang=es&rpp=100","page":1,"query":"bezoya+OR+lanjar%EF%BF%BD","refresh_url":"?since_id=249066208408788992&q=bezoya%20OR%20lanjar%EF%BF%BD&lang=es","results":[{"created_at":"Wed, 19 Sep 2012 14:58:39 +0000","from_user":"villarroya093","from_user_id":781564459,"from_user_id_str":"781564459","from_user_name":"Javier Villarroya","geo":null,"id":248435942728290304,"id_str":"248435942728290304","iso_language_code":"es","metadata":{"result_type":"recent"},"profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/2550477368\/IMG-20120824-WA002_normal.png","profile_image_url_https":"https:\/\/si0.twimg.com\/profile_images\/2550477368\/IMG-20120824-WA002_normal.png","source":"&lt;a href=&quot;http:\/\/blackberry.com\/twitter&quot;&gt;Twitter for BlackBerry\u00ae&lt;\/a&gt;","text":"RT @Xarlyfrasno: @villarroya093 #villarroyarules\nBeba agua mineral Bezoya, entra por la boca y sale..... muy bien de precio.","to_user":null,"to_user_id":0,"to_user_id_str":"0","to_user_name":null}],"results_per_page":100,"since_id":0,"since_id_str":"0"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:31:05.250

这很可能是该工具的创建者设置的限制。这些限制将到位，以防止用户使用非常大的数据集给服务器带来压力。

# ios - Xcode 更新到 4.5 版后按钮不起作用

> ID：12529137
> 
> 赞同：4
> 
> 时间：2012-09-21T10:53:35.500
> 
> 标签：ios, xcode, button, ibaction, xcode4.5

我更新了我的 Xcode，突然所有在情节提要中连接到选择器的按钮都不再工作了。所有以编程方式编码的按钮和手势识别器都可以工作。部分原因是，他们调用了相同的 IBAction。

我做了什么...

只需在情节提要中的视图中添加一个按钮和一个标签。在 View Controller .h 中，我向 Label 添加了一个 Outlet 并声明了 IBAction。文件：

**。H**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
@property (strong, nonatomic) IBOutlet UILabel *myLabel;

-(IBAction)button_pressed:(id)sender;
-(IBAction)swipe_active:(id)sender;

@end 
```

**.m**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize myLabel;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UISwipeGestureRecognizer *swipe_left = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipe_active:)];
    swipe_left.direction = UISwipeGestureRecognizerDirectionLeft;
    [self.view addGestureRecognizer:swipe_left];
}

-(IBAction)button_pressed:(id)sender{
    myLabel.text=@"Button is Running";
}
-(IBAction)swipe_active:(id)sender{
    myLabel.text=@"Swipe is Running";
}

@end 
```

而且只是按钮不起作用。

故事板：[https ://i.stack.imgur.com/1hruM.png](https://i.stack.imgur.com/1hruM.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:42:06.610

升级到 xcode 4.5 后，我遇到了同样的问题。IBActions 看起来好像它们在 IB 中设置正确，但如果您查看 .h 和 .m 文件，您会发现它们不是。如果你去你的故事板并点击你的视图控制器，在出口下查看，你会看到一个“接收到的动作”选项卡。将您的控件连接到那里的操作，它们将再次起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T20:43:11.667

对于我们的许多应用程序，我都看到了完全相同的问题。在我的所有情况下，它都是通过重新连接 Interface Builder 中的操作来修复的。

# git - 如何确定 git 子模块是否有新提交

> ID：12529141
> 
> 赞同：1
> 
> 时间：2012-09-21T10:54:02.487
> 
> 标签：git, git-submodules

我们有很多带有子模块的存储库，我们想报告哪些子模块是升级的候选者，因为它们引用的存储库有新的提交。有没有办法在不更改当前签出版本的情况下做到这一点？

基本上我们想知道 3 个不同的提交；
1) 源的包含存储库指向
的提交 2) 本地包含存储库指向的提交（这可能与 1 不同，因为手动拉取子模块
3）子模块存储库的头。

如果本地落后于原点，我们想做一个子模块更新。
如果 local 是提前来源，我们不想进行子模块更新，因为它可能已被开发人员更改。
如果 local 位于子模块存储库的头部之后，我们希望收到警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:13:36.873

这有点冗长，但您可以使用`awk`,`sed`等将其修剪为相关信息，但我会以`git submodule foreach git remote show`or开头`git submodule foreach git fetch; git submodule foreach git log master..origin/master`。这应该提供足够的信息来构建脚本来执行自动更新等。

# android - 跨市场应用内计费

> ID：12529143
> 
> 赞同：3
> 
> 时间：2012-09-21T10:54:15.807
> 
> 标签：android

有没有人遇到过任何设计模式/建议/库来干净地实现一种在跨多个市场的应用程序中引入应用程序内计费的方法，例如 Google Play、亚马逊应用程序市场（现在也有应用程序内购买）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:02:16.730

这可能是一个很好的起点，但表示它还没有准备好生产。

[GitHub 上的 RoboBilling](https://github.com/christopherperry/RoboBillingLibrary.git)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T19:04:58.360

这是另一个看起来很主题的[东西——Github 上的 SOOMLA](https://github.com/soomla/android-store) 我注意到还有一个[示例应用程序](https://play.google.com/store/apps/details?id=com.soomla.store.example&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5zb29tbGEuc3RvcmUuZXhhbXBsZSJd)

# c# - 如何解决 Fill: SelectCommand.Connection 属性尚未初始化

> ID：12529165
> 
> 赞同：1
> 
> 时间：2012-09-21T10:55:43.127
> 
> 标签：c#, asp.net, initialization, selectcommand

我有一门课，我在那里写了我所有的方法。然后我有我的网页应用程序的第一页，我在那里有一些代码。我面对这个

*   $exception {“填充：SelectCommand.Connection 属性尚未初始化。”} System.Exception {System.InvalidOperationException}

在行中：

```
sda.Fill(dsUsers.tblMembers); 
```

这是我的代码，所以我希望你能帮助我：

```
namespace MosquesNetwork
{
public class cUsers2
{
    SqlConnection scn;
    SqlDataAdapter sda;
    SqlCommandBuilder scb;
    SqlCommand SqlStr;

    public cUsers2()
    {
        SqlConnection scn = new SqlConnection (ConfigurationManager.ConnectionStrings["MosquesDBConnectionString"].ConnectionString);

        sda = new SqlDataAdapter();
        scb = new SqlCommandBuilder(sda);

    }

public bool CheckUserName(string UserName)
    {
        DsUsers2 dsUsers=new DsUsers2();
         bool Success;
        string SqlStr="select * from tblUsers where Username='"+UserName+"' ";
        sda.SelectCommand=new SqlCommand(SqlStr, scn);
        sda.Fill(dsUsers.tblMembers);
        sda.Fill(dsUsers.tblMembers);
        Success=dsUsers.tblMembers.Rows.Count>0;
        return Success;
    } 
```

然后在webform中按下登录按钮时我有这个代码：

```
 protected void Button1_Click(object sender, EventArgs e)
    {

        if (txtuser.Text.Trim().Length>0 && txtpass.Value.Length>0 )
        {  
            cUsers2 cUsers=new cUsers2();
            DsUsers2 dsUser=new DsUsers2();
            bool Success;
            if (txtuser.Text.Trim()=="admin")
            {
                Success=cUsers.CheckAdminPass(txtuser.Text.Trim(),txtpass.Value.Trim());  
                if (Success)
                {
                    Response.Redirect("WebForm2.aspx");
                }
            }

            dsUser=cUsers.Checkpassword(txtuser.Text.Trim(), txtpass.Value.Trim(),out Success);
            if(Success)
            {
                Session["ID"]=dsUser.tblMembers.Rows[0][dsUser.tblMembers.IDUserColumn].ToString();
                System.Web.HttpContext.Current.Response.Redirect("frmProfile.aspx");

            }
            else lblerror.Text="invalid username & password";

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:59:02.157

看看你的构造函数：

```
SqlConnection scn = new SqlConnection(...); 
```

那是声明一个*单独* `scn`的局部变量，因此`scn` *实例*变量保持为空。如果您只是将其更改为：

```
scn = new SqlConnection(...); 
```

这很可能解决眼前的问题。在我看来，这不是一个好的设计——我更愿意在你真正需要它`SqlConnection`的`using`块中创建它——但这就是现在的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T13:31:17.493

Vishal 先生，如果您遇到这个问题，请确定您是否将“cmd”传递给 SQL 数据适配器。例如：

```
ad = new SqlDataAdapter(cmd); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T17:44:44.837

```
//Try To Fetch The Value Like this...
protected void Search_Emp_Click(object sender, EventArgs e)
{
    SqlCommand cmd;
    SqlConnection con;
    SqlDataAdapter ad;
    con = new SqlConnection(); //making instance of SqlConnection

    con.ConnectionString = ConfigurationManager.ConnectionStrings["cn"].ConnectionString; //Invoking Connection String

    con.Open(); //Opening Connection

    if (Ddl_Emp_Search.SelectedItem.Text == "Date Of Joining")
    {
        cmd = new SqlCommand("Select Emp_Name,Contact_No,City,Emp_Desig,Place_Code from emp_registration where Emp_Doj=@Emp_Doj",con);
        cmd.Parameters.Add("@Emp_Doj", SqlDbType.NVarChar, 50).Value = TextBox1.Text;
    }
    else if (Ddl_Emp_Search.SelectedItem.Text == "Name")
    {
        cmd = new SqlCommand("Select Emp_Name,Place_Code,Emp_Code,Emp_Desig from emp_registration where Emp_Name=@Emp_Name", con);
        cmd.Parameters.Add("@Emp_Name", SqlDbType.NVarChar, 50).Value = TextBox1.Text;
    }
    else if (Ddl_Emp_Search.SelectedItem.Text == "Employee Code")
    {
        cmd = new SqlCommand("Select Emp_Name,Contact_No,City,Emp_Desig,Place_Code from emp_registration where Emp_Code=@Emp_Code", con);
        cmd.Parameters.Add("@Emp_Code", SqlDbType.NVarChar, 50).Value = TextBox1.Text;
    }
    else if (Ddl_Emp_Search.SelectedItem.Text == "City")
    {
        cmd = new SqlCommand("Select Emp_Name,Contact_No,City,Emp_Desig,Place_Code from emp_registration where City=@City", con);
        cmd.Parameters.Add("@City", SqlDbType.NVarChar, 50).Value = TextBox1.Text;
    }
    else
    {
        Response.Write("There is Something Worng....");
    }

    ad = new SqlDataAdapter(cmd); // Here IS THE PROBLEM WHEN YOU DOES'NT PASS CMD (Command instance) to the Data Adapter then there is a problem of ( Fill: SelectCommand.Connection property has not been initialized)

    DataSet ds = new DataSet();
    ad.Fill(ds);
    GridView1.DataSource = ds;
    GridView1.DataBind();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-01T08:12:03.043

我也遇到了这个问题。搜索问题后发现我提供的 SqlDataAdapter 连接对象未初始化，因此连接传递为 null

# html - 如何解决跨域安全错误。在 html 5 中使用 Canvas.getImageData

> ID：12529168
> 
> 赞同：2
> 
> 时间：2012-09-21T10:56:20.817
> 
> 标签：html, canvas, cross-domain, getimagedata

使用来自亚马逊的图像时，我遇到了跨域问题。我尝试使用 Canvas.getImageData 函数，但存在安全问题。当我将它设置为 img.crossOrigin = 'anonymous' 但即 9 时，它可以在 firefox 上运行，但 safari 和 chrome 无法正常工作。

除了使用 img.crossOrigin 解决安全问题之外，有没有办法解决这个问题。除了使用代理方法之外，这可以使用其他方式解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:17:51.787

为了避免同源策略，您可以在您的服务器上使用代理，将图像下载到您的服务器，然后通过同源访问它，我认为这将是最好的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:59:19.953

您是否使用签名的 url 来访问图像？

您是否在 Amazon 服务器上正确配置了 CORS？

# java - Log4J 阻止 HTTPClient 登录到 MySQL

> ID：12529169
> 
> 赞同：0
> 
> 时间：2012-09-21T10:56:33.093
> 
> 标签：java, log4j

我正在使用 org.apache.http.client 库，这有一些默认日志记录。我还设置了 log4j 来处理我的常规日志记录和 http 客户端日志记录。

我遇到的问题是我不希望 http 客户端登录到 MySQL 数据库。

这是 log4j 的属性文件：#define 控制台附加程序 log4j.appender.consoleAppender = org.apache.log4j.ConsoleAppender

```
# now define the layout for the appender
log4j.appender.consoleAppender.layout = org.apache.log4j.PatternLayout
log4j.appender.consoleAppender.layout.ConversionPattern==%d{yyyy MM dd HH:mm:ss} %p %t %c - %m%n

# now map our console appender as a root logger, means all log messages will go to this appender
log4j.rootLogger = DEBUG, debugTrack, DB
log4j.logger.org.apache=DEBUG, debugTrack, DB
log4j.logger.infoLogger=INFO, infoTrack, DB
log4j.logger.org.apache.http=httpcomm
log4j.logger.org.apache.http.wire=httpcomm

log4j.additivity.org.apache=false
log4j.additivity.infoLogger=false

log4j.appender.debugTrack=org.apache.log4j.RollingFileAppender
log4j.appender.debugTrack.Threshold=DEBUG
log4j.appender.debugTrack.File=log//debugTrack.log
log4j.appender.debugTrack.MaxFileSize=2MB
log4j.appender.debugTrack.MaxBackupIndex=2
log4j.appender.debugTrack.layout = org.apache.log4j.PatternLayout
log4j.appender.debugTrack.layout.ConversionPattern=%d{yyyy MM dd HH:mm:ss} %p %t %c - %m%n

log4j.appender.infoTrack=org.apache.log4j.RollingFileAppender
log4j.appender.infoTrack.Threshold=INFO
log4j.appender.infoTrack.File=log//infoTrack.log
log4j.appender.infoTrack.MaxFileSize=2MB
log4j.appender.infoTrack.MaxBackupIndex=2
log4j.appender.infoTrack.layout = org.apache.log4j.PatternLayout
log4j.appender.infoTrack.layout.ConversionPattern=%d{yyyy MM dd HH:mm:ss} %p %t %c - %m%n

log4j.appender.httpcomm=org.apache.log4j.RollingFileAppender
log4j.appender.httpcomm.Threshold=DEBUG
log4j.appender.httpcomm.File=log//HTTPCommunication.log
log4j.appender.httpcomm.MaxFileSize=2MB
log4j.appender.httpcomm.MaxBackupIndex=2
log4j.appender.httpcomm.layout=org.apache.log4j.PatternLayout
log4j.appender.httpcomm.layout.ConversionPattern=%d{yyyy MM dd HH:mm:ss} %p %t %c - %m%n

log4j.appender.DB=org.apache.log4j.jdbc.JDBCAppender
log4j.appender.DB.URL=jdbc:mysql://server/database
log4j.appender.DB.driver=com.mysql.jdbc.Driver
log4j.appender.DB.user=root
log4j.appender.DB.password=********
log4j.appender.DB.sql=INSERT INTO tbl_logs(logDate,logger,level,message) VALUES('%d{yyyy-MM-dd HH:mm:ss}','%C','%p','%m')
log4j.appender.DB.layout=org.apache.log4j.PatternLayout 
```

有一个信息记录器和一个调试记录器，我希望继续记录到文件和数据库。我还希望将 HTTP 客户端记录到文件而不是数据库。

有人可以指出我实现这一目标的正确方向吗？

非常感谢内森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:00:43.380

您已为父包设置了`additivity`to `false`，这意味着不会从那里传播任何内容。要获得`log4j.logger.org.apache.http`包的这种行为，您也需要设置它：

```
log4j.additivity.org.apache=false
log4j.additivity.org.apache.http=false
log4j.additivity.infoLogger=false 
```

另请注意，无需同时指定`log4j.logger.org.apache.http`和`log4j.logger.org.apache.http.wire`，第一个应涵盖两者。

# ruby - 碰撞检测实施中的哪些错误导致相互碰撞的球旋转

> ID：12529171
> 
> 赞同：1
> 
> 时间：2012-09-21T10:56:39.040
> 
> 标签：ruby, language-agnostic, collision-detection, game-engine, game-physics

嗨，我在 ruby​​ 中有以下球对球碰撞检测的实现，它适用于大多数碰撞。当球在某些角度相互撞击时，怎么会有一些缺陷。

如果您需要更多信息告诉我，我已将我的实现放在这里。但我想知道更多笼统的说法。是什么导致球在某些冲击角度下相互旋转。

```
def ball_collider! ball
        for ball2 in @balls do
          next if ball.object_id == ball2.object_id
          next unless box_overlap ball2.boundbox, ball.boundbox
          next unless ball_overlap ball, ball2
          dx = ball2.x - ball.x
          dy = ball2.y - ball.y
          dist=Math.sqrt(dx**2 + dy**2)
          bonuce_point_x = ball2.x - (ball.radii + ball2.radii) * dx / dist
          bonuce_point_y = ball2.y - (ball.radii + ball2.radii) * dy / dist

          bounce_line =  [[bonuce_point_x,bonuce_point_y],[bonuce_point_x-dy,bonuce_point_y+dx]]

          ball2.bounce! bounce_line
          ball.bounce! bounce_line
          motion_left = ball.unmove! bounce_line, true
       ball_controller! ball if motion_left > 0.1
  end
end

def box_overlap box1, box2
  return (box1[:width] + box2[:width] > (box1[:x] - box2[:x]).abs) && (box1[:width] + box2[:width] > (box1[:y] - box2[:y]).abs)
end

def ball_overlap ball1, ball2
  dx = ball2.x - ball1.x
  dy = ball2.y - ball1.y
  return (dx**2 + dy**2) < (ball1.radii+ball2.radii)**2
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:26:33.867

在您的物理模型中，您可能正在更新位置并以离散的时间间隔进行碰撞检查。这意味着，当您检测到一对球之间的碰撞时，实际碰撞会在此之前发生，因此您的计算将基于错误的运动矢量。您可以进行计算以获得正确的撞击时间，但这可能会因为其他物体与您在同一时间间隔内检查的两个物体发生碰撞而变得混乱。尝试增加频率（即减少您的时间间隔）以限制问题。

至于为什么你会得到“漩涡”效果：计算将导致球在你修改它们的向量后仍然相互碰撞，即使它们现在彼此远离，这将再次导致你的下一次迭代拉它们再次朝向彼此的中心，依此类推。

# php - 使用 PHP 处理关注/关注者

> ID：12529175
> 
> 赞同：1
> 
> 时间：2012-09-21T10:56:50.347
> 
> 标签：php, mysql

在我的网站中，我有一个互相关注的概念，有点推特，我有一个具有以下结构的用户连接表，

==================================================== =============

**连接到 | 连接者 | 会话ID | 连接状态 | 记录日期**

==================================================== =============

**ConnectedTo**持有您要连接的用户

**Connected** By 持有正在连接的用户

**SessionID**再次持有正在连接的用户

现在假设我们假设用户 A 连接到用户 B 表条目将像

================================

**B_id | A_id | A_id | 连接 | 日期**

================================

现在A跟随B，现在即使B跟随A条目也会像

================================

**A_id | B_id | B_id | 连接 | 日期**

================================

现在我想要的是如果两者都在互相关注，我有一个叫做网络的页面，所以如果我是用户 A 并且我登录，如果我去我的网络页面，我应该看到正在关注的人正在关注我，但是无法弄清楚我应该如何检测哪些用户正在关注我……这就像谷歌加我猜想，如果你关注一个用户，你就在关注他，但是如果他关注你而不是你的朋友..所以我应该再添加 1 个字段，有点说是字段**X**，在连接之前我检查该用户是否在关注我，我应该将两个记录更新为字段 X 中的朋友。

PS我尝试了很多东西，所以不要问我尝试了什么，我尝试过，尝试过，但仍然无法做出判断

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:07:16.073

```
$query = "SELECT c.ConnectedTo, cc.ConnectedBy
          FROM connections c
          LEFT JOIN connections cc ON c.ConnectedTo=cc.ConnectedBy AND cc.ConnectedTo='" . $loged['my_loged_user_id'] . "'
          WHERE c.ConnectedBy='" . $loged['my_loged_user_id'] . "'";
$sql = $mysqli->query($query);
while($row = $sql->fetch_assoc()) {
    if(isset($row['ConnectedBy'])) {
        // I'm connected with $row['ConnectedTo'] who is also following me
    } else {
       // I'm connected with $row['ConnectedTo'] but he don't follows me
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:13:02.020

假设您的用户 ID 是`@id`，连接表名称是`CONNECTION`。然后以下查询将列出所有与您连接的用户的 ID：

```
select 
   me2friend.ConnectedTo
from 
   CONNECTION me2friend,
   CONNECTION friend2me
where
   me2friend.ConnectedBy = @id and
   me2friend.ConnectedTo = friend2me.ConnectedBy and
   friend2me.ConnectedTo = @id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:10:26.763

这似乎是一个非常简单的问题。您只需先查询用户是否已经有连接，看看是否应该将其设为相互连接。

```
SELECT * FROM tbl_connections WHERE ConnectedTo = $foreign_user_id OR connectedBy = $foreign_user_id 
```

一旦你有你的行（或没有），你判断关系的方向并根据需要附加用户 ID：

```
if($result->rowCount() > 0){
    foreach($result as $row){
        if($row['ConnectedTo'] == $my_user_id) $row['ConnectedBy'] = $foreign_user_id;
        if($row['ConnectedBy'] == $my_user_id) $row['ConnectedTo'] = $foreign_user_id;
        $row['Connect_Status'] = 2; // 2 denotes that it is a mutual connection on the graph
        // Save row
        break;
    }
}else{
    // Insert new row
} 
```

这只是一个快速的临时答案。

确实，它不是最优雅的解决方案，但它在如何以及何时建立相互关系方面提供了更大的力量。您会注意到 G+ 上的两个人之间的双重关系并不总是意味着朋友。它实际上也取决于您将它们放入的组。

## 编辑

上面的代码只会在你结交新朋友时使用。查询时，您可以只查询所有行，然后显示一个由 connect_status 判断的相互连接的标签，或者您可以只查询该 connect_status：

```
SELECT * FROM tbl_connections WHERE Connect_status = 2 
```

将获得所有相互联系。

# sendmail - 未发送带有大附件的 PHP mail()

> ID：12529176
> 
> 赞同：0
> 
> 时间：2012-09-21T10:56:53.777
> 
> 标签：sendmail, email-forwarding

我正在实现一个电子邮件转发器 PHP 程序。这是我的要求：

*   定期阅读特定电子邮件帐户的收件箱
*   传入的邮件可能有附件，也可能没有附件。
*   附件可能尺寸较大。
*   将收到的邮件转发到带有附件的目的地，就像它们在原始邮件中一样，但一些邮件正文将被删除。

我几乎成功了。带有小文件附件的邮件被转发到目的地，但问题在于大文件附件（我尝试了大约 23MB 的 zip 文件）。
在我看来，邮件发送是成功的，因为我没有看到[mail()](http://php.net/manual/en/function.mail.php)函数产生任何错误，但我没有在我的目的地收到它。

mail() 函数有什么问题？或者我应该使用[imap_mail()](http://php.net/manual/en/function.imap-mail.php)吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:37:50.560

当您在命令行上使用 php 时，我想，我唯一可以减少的 php 限制是[memory-limit](http://php.net/manual/en/ini.core.php#ini.memory-limit)。但这很可能不是 php 问题，而是您遇到了[MTA](http://en.wikipedia.org/wiki/Message_transfer_agent)的限制。Squirrelmail 有一些关于[MTA 限制](http://squirrelmail.org/wiki/AttachmentSize)的信息（“发送带有附件的邮件”部分）。

# android - 签署android APK时eclipse中缺少关键别名

> ID：12529185
> 
> 赞同：6
> 
> 时间：2012-09-21T10:57:41.630
> 
> 标签：android, android-keystore

我已经创建了一个密钥库，签署了 apk 并将其发布到了 Play 商店。

现在我已经修复了一些错误，使用相同的密钥库和密码，然后在导出 android 应用程序向导中单击下一步。

它向我显示了一个别名的下拉框，上面没有别名。但是昨天同样的东西对我有用，可以签署同一个项目，现在它看起来是空的。

我也在命令行上尝试过，但它说“密钥库被篡改或密码不正确”，但我非常确定密码 id 是正确的，密钥库也是如此。

这对我来说是一个表演终结者。请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T09:41:40.743

首先，您应该检查您是否真的输入了正确的密码。如果在 Eclipse 中进行签名导出时键入了错误的密钥库密码，则 Eclipse 中的别名下拉列表将为空（并且不可编辑）。该对话框还将在顶部显示消息“密钥库被篡改，或密码不正确”，而不是消息“输入密钥密码”。

如果您绝对确定您拥有正确的密码并使用正确的密钥库，那么我能想到的唯一其他解释是密钥库出了问题。也许您将它保存为 ASCII 在您的 CVS/SVN 中？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-15T13:32:21.953

我遇到了同样的问题，经过长时间的搜索，我设法解决了它。

**是什么导致了错误？**

该错误发生在

1.  您输入了错误的密钥库密码
2.  您的密钥库由于某种原因已损坏

**我的案例场景**

就我而言，我使用了**正确**的密码，这意味着我的密钥库已损坏。

自从我重命名我的应用程序后一切正常，并且我更改了密钥库和 apk 的位置。然后我对密钥库和 apk 的位置感到困惑，在这种混乱中，我可能已经用损坏密钥**库的新 apk 替换了密钥**库，但我不能 100% 确定。

**我是如何解决的**

修复很简单。对于win7：**找到损坏的“原始”密钥库，右键单击它，选择属性，以前的版本，当密钥库正常时选择一个较早的版本，然后单击恢复**

当您单击以前的版本时，您必须**给它一些时间**（我的花了大约 30 秒）。如果仍然没有任何反应，那么您尝试恢复的密钥库可能不是“原始”，它可能是副本或其他东西。

（我说“原始”是因为我尝试了其他方法来修复此错误并且我必须制作密钥库的副本，因此请确保**使用原始损坏的密钥库**）

**如果仍然没有发生**

如果您执行了上述操作，但 Eclipse 仍然没有显示别名，那么您可能已经像我一样更改了密钥库的目录。

**如果您更改了您的密钥库目录，您应该执行上述所有操作，然后将其放在之前工作的目录中，否则 eclipse 将无法找到别名！**

要查看您的密钥库是否在不使用 Eclipse 的情况下工作，您可以使用 KeyTool。

1.  找到 keytool.exe 所在的 Java JRE bin 文件夹（我的是 C:\Program Files\Java\jre1.8.0_25\bin）
2.  在那里复制您的密钥库（以简化操作）
3.  打开命令行并运行这些命令

*cd C:\Program Files\Java\jre1.8.0_25\bin*

*keytool -list -keystore "你的密钥库名称"*

然后你应该被要求输入密钥库密码，如果没有，密钥库仍然损坏，这意味着恢复不起作用。

*请记住，每次发布应用程序时都要制作工作密钥库的副本，并且您知道密钥库工作正常。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T09:48:26.980

我认为您输入了错误的密码...请确保密码正确...否则别名不会显示在下拉列表中...

或者

可能是您的密钥库位置已更改...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:59:39.570

如果你记得名字，试着把它作为一个新的来介绍，它会强制刷新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-17T14:42:39.553

遇到同样的问题，我的情况是我第一次输入错误的密码，所以它没有填充别名列表。

如果您记得密码，只需清理所有项目 -> 构建并从头开始。它工作并成功上传到谷歌播放。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-12T02:59:13.140

抱歉，但我遇到了同样的问题，并意识到我所缺少的只是将密钥存储在另一个文件夹中时放置的位置。当我尝试更新 APK 时，它没有显示密钥别名，因为我试图从中读取它的文件夹中没有密钥。所以我意识到我已经将它保存在另一个文件夹中。一旦我重新定位了正确的文件夹，密钥别名就会出现，并且从那里一切都很好。

# mysql - 如何设置用户以在 MySQL 中与 ODBC 一起使用？

> ID：12529198
> 
> 赞同：0
> 
> 时间：2012-09-21T10:58:31.613
> 
> 标签：mysql, odbc

我已经建立了一个将用于在我的数据库中报告的用户。我只`SELECT`授予了必要数据库的权限。

例如，我可以从 phpMyAdmin 登录 MySQL，并且我对用户做了应该做的事情。

但是，一旦您尝试从 ODBC 读取，就会出现以下错误：

`[MySQL][ODBC 3.51 Driver]Access denied for user user@server_ip (using password: YES)`

我需要做一些额外的事情吗？访问`root`没有这个问题，但显然，出于安全原因，我不想向该用户授予所有权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:58:26.500

您必须首先确保用户在本地连接时具有您想要的访问权限。您可以使用 MySQL 查询浏览器或 MySQL 命令行客户端进行测试。

现在，如果在本地测试时没有问题，并且如果 root 用户**能够**从远程计算机访问表，那么用户的权限一定有问题，这会阻止它从远程主机访问表。检查您是否已正确授予用户所需的权限。这是正确的语法：

```
mysql> CREATE USER 'custom'@'host47.example.com' IDENTIFIED BY 'obscure';
mysql> GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP
    ->     ON expenses.*
    ->     TO 'custom'@'host47.example.com'; 
```

请参阅MySQL 参考手册中的[添加用户帐户](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)。

# java - 不可调整大小的窗口边框和定位

> ID：12529200
> 
> 赞同：7
> 
> 时间：2012-09-21T10:58:37.167
> 
> 标签：java, windows, swing, aero, absolutelayout

如果我创建不可调整大小的 JFrame，并且启用了 windows Aero`setLocation`似乎没有正确考虑窗口边框。

在下面的代码中，我希望第二帧位于第一帧的右侧，而不是边框​​重叠。如果 Aero 被禁用或者我删除了对它的调用，`setResizable`则按预期完成。

```
import java.awt.Rectangle;
import javax.swing.JFrame;
public class FrameBorders {
public static void main(String[] args) {
    JFrame frame1 = new JFrame("frame 1");
    JFrame frame2 = new JFrame("frame 2");

    frame1.setResizable(false);
    frame2.setResizable(false);

    frame1.setVisible(true);        
    Rectangle bounds = frame1.getBounds();      
    frame2.setLocation(bounds.x+bounds.width, bounds.y);
    frame2.setVisible(true);

}
} 
```

我做错了什么还是这是一个错误？如何在没有重叠边框的情况下并排显示 2 个不可调整大小的对话框？

编辑：添加屏幕截图（也将 frame2 更改为 JDialog 而不是 JFrame）

航空开启： ![航空开启](../Images/1e56aefc7f1383c5feefff3b8fca4fb0.png)

航空关闭： ![航空关闭](../Images/d7374104ab0a37d7e131f5e053482c7d.png)

Aero 开启但可调整大小： ![Aero 开启但可调整大小](../Images/dfbf90e35be1c8519f6fe1fbba687303.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T14:12:09.237

> 在不可调整大小的容器上设置边界有什么问题？

假设您调整边界以在您的平台上看起来不错。假设用户的平台有一个不同的字体，比如说更大，`FontMetrics`. 这个例子有点做作，但你明白了。如果您更改不可调整大小的容器的边界，请确保无论主机平台的默认字体如何，任何文本都是可见的。

![图片](../Images/eabae85b149332919e0ac1d68adaea77.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

/**
 * @see http://stackoverflow.com/a/12532237/230513
 */
public class Evil extends JPanel {

    private static final String s =
        "Tomorrow's winning lottery numbers: 42, ";
    private JLabel label = new JLabel(s + "3, 1, 4, 1, 5, 9", JLabel.LEFT);

    public Evil() {
        this.add(label);
    }

    private void display() {
        JFrame f = new JFrame("Evil");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this, BorderLayout.WEST);
        f.pack();
        int w = SwingUtilities.computeStringWidth(
            label.getFontMetrics(label.getFont()), s);
        int h = f.getHeight();
        f.setSize(w, h);
        f.setResizable(false);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Evil().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T14:22:03.850

看起来这不是 Java 问题，而是 aero appcompat 问题，如此[处](https://stackoverflow.com/questions/8838621/how-to-determine-actual-windows-form-size-with-all-nonclient-elements-when-run)所述。

我在 Java 中看到的一种解决方案是让窗口可调整大小，然后解决[setMaximumSize 错误](http://bugs.sun.com/view_bug.do?bug_id=6464548)

# c++ - OpenCV：查找照片中线条交叉点的坐标

> ID：12529205
> 
> 赞同：3
> 
> 时间：2012-09-21T10:58:47.747
> 
> 标签：c++, opencv, vision

我刚刚开始学习 OpenCV 编程。我想知道是否可以从这张照片中获得线（静脉）交叉点的坐标。

[http://mormometricanalysis.wu.cz/photo.JPG](http://mormometricanalysis.wu.cz/photo.JPG)

在照片中，用红色标记了需要的点。我想计算线之间的角度、线的长度和面积 - 下面的例子。

[http://mormometricanalysis.wu.cz/](http://mormometricanalysis.wu.cz/)

我对这个问题做了一些研究。但大多数例子都是关于在二进制图像中寻找线条 - 我不知道我是否可以在 OpenCV 中从这张照片制作高质量的二进制图像。点坐标的计算应尽可能精确。

OpenCV中是否有任何功能可以做到这一点？你知道如何解决这个问题吗？

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:58:02.953

我必须传递寻找交叉点部分，但为了获得二值图像，您的第一步应该如下：

阈值图像。如果对比度始终与示例中的一样高，这应该可以正常工作。或者尝试边缘检测。

至于寻找适合静脉的线条，我有一个模糊的想法。让我试着用文字来表达：

*   尝试在二值图像中找到一个高密度区域并确定中心[x1，y1]。
*   定义一条在该区域中心有一个固定点的直线 f(x-x1) = m*x + y1
*   通过改变 m 来旋转线并优化线的二进制图像和静脉的二进制图像之间的最大相关性
*   当您找到相关性的最大值时，切掉实际上与静脉重叠的线段
*   与下一个高密度中心重复

这可能/应该为您提供一堆参数定义的线，您可以在其中轻松确定交叉点和角度。

# java - 从哪里获取 11.2.0.3 的 Oracle jar 文件 - xdb、aq、i18n、xmlparser

> ID：12529215
> 
> 赞同：8
> 
> 时间：2012-09-21T10:59:15.693
> 
> 标签：java, jdbc, oracle11g, oracle-aq, oracle-xdk

我正在尝试更新旧版 Java 应用程序以与 Oracle 11g 版本 11.2.0.3 兼容。

该应用程序在 Oracle 10g 版本 10.2.0.4 上运行并使用 Oracle 高级队列。它声明了 Maven 依赖项：

*   水 10.2.0.4.0
*   xdb 10.2.0.4.0
*   xmlparser 10.2.0.4.0
*   i18n 10.2.0.4.0

我正在努力为 11g 找到相同的文件，特别是 11.2.0.3。我环顾了各个地方，例如我的 Oracle 主目录、JDeveloper 安装和在线，发现各种名称和版本的 jar 文件令人眼花缭乱，这些都是候选但不是我需要的。

谁能告诉我在哪里可以找到正确的 jar 文件？

看来现在`aq`JDBC驱动里面有一些类了，但是包名从`oracle.aq`变成了`oracle.jdbc.aq`. 虽然我很高兴进行一些重构，但我希望有信心在继续之前这样做是正确的。这里的任何建议都是有价值的。

**编辑：** 当尝试使用混搭的版本运行时，我设法找到我在尝试运行应用程序单元测试时收到以下错误：

```
java.lang.NoSuchMethodError: oracle.i18n.text.converter.CharacterConverterOGS.getInstance(I)Loracle/i18n/text/converter/CharacterConverter;
at oracle.sql.converter.CharacterConverterFactoryOGS.make(CharacterConverterFactoryOGS.java:43)
at oracle.sql.CharacterSetWithConverter.getInstance(CharacterSetWithConverter.java:97)
at oracle.sql.CharacterSetFactoryThin.make(CharacterSetFactoryThin.java:129)
at oracle.sql.CharacterSet.make(CharacterSet.java:514)
at oracle.sql.CHAR.<clinit>(CHAR.java:72) 
```

**编辑：**`orai18n.jar`通过下载和`xdb6.jar`从[Oracle 的 Oracle 数据库 11g 第 2 版 JDBC 驱动程序页面](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html) ，设法解决了在我的单元测试中导致错误的问题。但是，我仍然缺少`aq`and `xmlparser`。

**编辑：** 找到看起来很有希望[的 Oracle XDK 主页](http://www.oracle.com/technetwork/developer-tools/xmldevkit/index.html)`xmlparser`，但是在一个明显的地方没有可用的下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-13T20:04:19.320

[http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html)

Oracle 数据库 11g 第 2 版 JDBC 驱动程序

xdb6 和驱动程序在这里

编辑：请注意，oracle 12c 驱动程序将适用于 12c 和 11g！

[https://www.oracle.com/technetwork/database/application-development/jdbc/downloads/index.html](https://www.oracle.com/technetwork/database/application-development/jdbc/downloads/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T19:36:01.897

JAR 文件包含在 Oracle 完整数据库客户端中。我认为客户端尚未公开下载 11.2.0.3，除非可能作为 Oracle XE 的一部分。如果您安装了 Oracle EE，则可以从磁盘 4 获得独立的完整客户端。

您将在客户端的 $ORACLE_HOME/jdbc/lib、$ORACLE_HOME/lib、$ORACLE_HOME/rdbms/jlib 和 $ORACLE_HOME/jlib 中找到正确的 JAR 文件。请记住在包含 orai18n.jar 以支持 XQJ 时包含 orai18n-collat​​ion.jar，并且仅使用与来自客户端的 JAR 相同版本的 ojdbcX.jar（即，不要使用 ojdbc5.jar 或 ojdbc14.jar - 使用 ojdbc6 。罐）。

# cdn - Windows Azure CDN 中的更新文件

> ID：12529221
> 
> 赞同：7
> 
> 时间：2012-09-21T10:59:42.907
> 
> 标签：cdn, azure-storage

我有 blob 存储和 CDN 端点，用于存储我的静态内容。现在我想更新 app.js 文件，因为它被修改了，但是当我将此文件写入 blob 时，CDN 仍然给我旧的 app.js 文件。如何更新我的 app.js 文件？或者我必须等到我的缓存不会结束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-04T12:10:46.800

只是您无法在缓存对象到期之前对其进行更新。

来自[https://msdn.microsoft.com/en-us/library/azure/gg680303.aspx](https://msdn.microsoft.com/en-us/library/azure/gg680303.aspx)：

> 如果不再希望在 Azure 内容交付网络 (CDN) 中缓存对象，可以采取以下步骤之一：
> 
> *   对于 Azure Blob，可以从公共容器中删除 Blob。
>     
>     
> *   您可以将容器设为私有而不是公开。有关详细信息，请参阅限制对容器和 Blob 的访问。
>     
>     
> *   您可以使用 Azure 管理门户禁用或删除 CDN 终结点。
>     
>     
> *   您可以修改托管服务以不再响应对象请求。
>     
>     
> 
> 已缓存在 CDN 中的对象将保持缓存状态，直到对象的生存时间到期。当生存时间到期时，CDN 将检查 CDN 端点是否仍然有效以及对象是否仍然可以匿名访问。如果不是，则该对象将不再被缓存。
> 
> 当前没有可用于 Azure CDN 的显式“清除”工具。

如果可能，其他解决方法包括使用假查询字符串或新文件名。见这里：[https ://stackoverflow.com/a/8773202/908336](https://stackoverflow.com/a/8773202/908336)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-01T02:29:44.733

很久以前就问过这个问题。我只是想更新对我有用的方法。它是微软推荐的。本质上，您需要在 Blob 存储中设置缓存控制标头。您可以使用值“public, max-age=3600”设置缓存控制标头。这会将您的文件缓存大约 1 小时。

[https://azure.microsoft.com/en-us/documentation/articles/cdn-manage-expiration-of-blob-content/](https://azure.microsoft.com/en-us/documentation/articles/cdn-manage-expiration-of-blob-content/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T18:20:52.957

CDN 很简单。当请求进来时，它会从源（在本例中为 blob 存储）获取内容，然后根据标头将其缓存一段时间`Cache-Control`。它将继续提供相同的内容，直到缓存过期。

没有办法告诉 CDN 提前过期。

其他人可能会提出有关如何处理此问题的更有用的建议（例如查询字符串参数），但我只是想简单地解释一下 CDN 的缓存是如何工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-25T10:33:53.807

你可以从 Azure 新管理门户中清除内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-28T15:03:53.333

现在唯一能做到这一点的方法是联系 Azure 支持，然后他们将向 Verizon EdgeCast 开一张支持票，以从 CDN 中删除该文件，届时该文件将更新。在基本的 Azure 支持计划中，整个过程大约需要 8 小时。这不是一个好的解决方案，我真的希望他们将其更新到我们可以以编程方式从 CDN 中清除某些内容的位置。这似乎是他们缺乏的一个基本功能。我认为现在最好的选择是启用查询字符串状态，然后在更新时更新该查询字符串。我们对像 /js/custommix.js?version=1 这样的 js 文件执行此操作。然后，当我们需要更新它们时，我们会从我们的配置中附加一个新版本。

[http://azure.microsoft.com/en-us/blog/best-practices-for-the-windows-azure-content-delivery-network/](http://azure.microsoft.com/en-us/blog/best-practices-for-the-windows-azure-content-delivery-network/)

**如何清除 Windows Azure CDN 中的内容或使其无效？**

从 1.4 开始，没有可用的清除功能。此功能正在开发中。最好的新鲜度控制是设置好的缓存过期标头，如本文档和 MSDN 上的 Windows Azure CDN 文档中所述。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-06-20T08:34:08.390

看来默认到期时间是 7 天。

来自：http: [//msdn.microsoft.com/en-us/library/azure/gg680306.aspx](http://msdn.microsoft.com/en-us/library/azure/gg680306.aspx)

> 从 Azure CDN 缓存中受益最多的 Blob 是在其生存时间 (TTL) 期间经常访问的 Blob。Blob 在缓存中保留 TTL 时间段，然后在该时间过后由 Blob 服务刷新。然后该过程重复。
> 
> 控制 TTL 有两种选择：
> 
> 1.  不要设置缓存值，因此使用 7 天的默认 TTL。
>     
>     
> 2.  在 Put Blob、Put Block List 或 Set Blob Properties 请求上显式设置 x-ms-blob-cache-control 属性，或使用 Azure 托管库设置 BlobProperties.CacheControl 属性。设置此属性会设置 Blob 的 Cache-Control 标头的值。标头或属性的值应以秒为单位指定适当的值。例如，要将最大缓存期限设置为一年，您可以将请求头指定为 x-ms-blob-cache-control: public, max-age=31556926。有关设置缓存标头的详细信息，请参阅 HTTP/1.1 规范。

# javascript - jQuery; 通过 slideDown() 跟踪正在动画的元素的高度

> ID：12529222
> 
> 赞同：0
> 
> 时间：2012-09-21T11:00:08.133
> 
> 标签：javascript, jquery

我正在为 jQuery 中的一个元素设置动画，并且我还需要`margin`另一个元素的动画来跟随`height`动画元素的向下滑动。

因此，例如，该`slideDown()`函数从**元素 x**`animate`开始，并且相应元素的函数以某种方式知道**元素 x**的高度***，因为它***向下滑动并复制它，同时生成动画。

希望我已经解释得很好，如果您想要更清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:03:13.380

您可以使用[`step`](http://api.jquery.com/animate/)属性：

```
$("#first").animate({ /* properties */ }, {
    step : function() {
        var height = $(this).height();
        $("#second").css("margin-top", height);
    }
}); 
```

# java - 获得所需的 ResultSet 后关闭 Connection 对象

> ID：12529223
> 
> 赞同：2
> 
> 时间：2012-09-21T11:00:13.743
> 
> 标签：java, jdbc

`Connection`如果我得到我的对象后关闭我的对象会有什么影响`ResultSet`吗？

```
Connection con= DriverManager.getConnection();
Statement st = con.createStatement();
ResultSet rs = st.executeQuery(query);
con.close(); 
```

除此之外，我使用我的`rs`对象，我觉得不会对它产生任何影响。因为`ResultSet`和`Statement`是相互联系的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T07:11:22.000

关闭与数据库的连接后，您无法立即访问结果集。因为，当您使用`resultset.next()`方法时，它会向数据库发送请求以获取下一条记录；但实际上连接已关闭。因此，`Exception`您的语句会抛出an `resultset.next()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T11:05:45.767

`Connection`关闭后，不得使用其他资源（ `Statement`s 或s）。`ResultSet`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T11:35:02.630

`Connection`连接关闭后，您不得使用从 a 派生的任何内容。

这实际上是因为在您实际使用它们之前，可能不会将结果集之类的东西传输到您的机器上。数据库可以并且确实使用传输批处理和服务器游标 - 这是一种复杂的方式，可以说它们仅在您通过移动结果集游标（例如使用`ResultSet#next()`）实际请求它们时将一行行传输给您。

结果集的其他部分，如 BLOB 或其他 LOB 类型，在您实际从结果集中读取它们之前根本不会被传输。那是因为它们可以任意大，并且 DB 驱动程序（好的，一个*好的*DB 驱动程序）希望最小化它在客户端中使用的内存。

数据库服务器本身通常比驱动程序复杂得多（它只是一个通信仲裁器），最好将“繁重的工作”（结果集的编组和临时存储）留给数据库 :-)

因此，您可以看到关闭连接将释放所有与您的查询相关的服务器资源 - 并且可能有很多资源。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T11:05:51.490

如果要`ResultSet`在关闭后访问，则无法关闭连接。当您尝试访问数据时，您将丢失`ResultSet`数据并获得异常。

这是因为`ResultSet`实例链接到数据库连接。

# google-maps - 使用来自 KML 层的 href 打开地标 ID（Google Maps Api v3）

> ID：12529225
> 
> 赞同：0
> 
> 时间：2012-09-21T11:00:16.887
> 
> 标签：google-maps, google-maps-api-3

我创建了一个谷歌地图经销商定位器。所有 (55) 个经销商都保存到一个 KML 文件中，我将其加载到我的谷歌地图中：

见： http: [//paste2.org/p/2248187](http://paste2.org/p/2248187)

我有一个搜索功能，可以找到离您最近的经销商。结果打印在列表中。请注意，此列表位于 Google 地图之外，位于 html 侧边栏中。当我点击最近的经销商时，我想使用它的 ID 打开该经销商/地标的信息窗口。

所以简而言之，点击谷歌地图外的一个按钮，一个信息窗口应该在谷歌地图内打开。

我对此进行了很多搜索，但找不到任何有关打开 KML 地标信息窗口的信息。

它应该像这样简单：http: [//paste2.org/p/2248193](http://paste2.org/p/2248193)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:18:59.143

KmlLayer 不提供该功能（至少现在不可用）。

要么使用第三方 KML 解析器，如[geoxml3](http://code.google.com/p/geoxml3/)或[geoxml-v3](http://code.google.com/p/geoxml-v3/)，要么将您的 KML 导入 FusionTables 并使用它。

[使用 geoxml3 的示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linkto.html?filename=http://www.geocodezip.com/geoxml3_test/AfricaMap1.xml)

[使用融合表的示例](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_Watershed_Stewards_Map_sidebar2.html)

# c# - 将数据包捕获数据写入 SQL

> ID：12529227
> 
> 赞同：0
> 
> 时间：2012-09-21T11:00:24.477
> 
> 标签：c#, .net, database, packet

我一直在寻找一些有助于将数据包捕获注入数据库的工具。我很幸运找到了 COMMAND FIVE PTY LTD 的一种工具。该工具称为C5 SIGMA，根据描述，它可以从捕获中获取数据并将其放入数据库中。

我下载了文件并准备好运行环境，但是执行时出现很多错误

[警告] - 无法转换字段值。名称：frame.time_relative 值：6.874690000 错误：输入字符串的格式不正确。[ERROR] - 处理数据包时出错。索引：5179 错误：异步失败太多。

我下载了源文件，并调试，但我发现代码正常，解析很好。这是源文件： http: [//www.commandfive.com/downloads/c5sigma.html](http://www.commandfive.com/downloads/c5sigma.html)

如果有人可以提供帮助，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T10:52:14.220

我刚刚下载了相同的产品，我也收到了错误：异步失败太多错误。

我已经给他们发了一封电子邮件，所以如果/当我收到回复时，我会告诉你。

刚刚将输出转储到文本文件，在所有异步失败之前都是这个错误：

[错误] - 异步写入失败。错误：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供 r：命名管道提供程序，错误：40 - 无法打开与 SQL Server 的连接）

可能值得检查您的 SQL 服务器是否按预期连接。我目前正在使用 SQL Express，因此将在成熟的 SQL 服务器上试用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:56:36.457

实际上，有同样的问题。我发现通过减小 pcap 大小，C5 Sigma 没有出错。

# iphone - 获取与单击按钮相对应的表格视图控制器中特定行的数据

> ID：12529232
> 
> 赞同：1
> 
> 时间：2012-09-21T11:00:48.383
> 
> 标签：iphone, objective-c

我是IOS开发的新手。我正在开发一个应用程序，其中我有几行，每行前面都有一个按钮。在 cellForRowAtIndexPath 中，我创建了一个名为 buttonPressed() 的函数，在该函数中，我想获取仅与我单击的按钮相对应的数据。你能帮我解决这个问题吗？

这就是我正在做的事情。

```
 -(void) buttonPressed: (id) sender withEvent: (UIEvent *) event 
   {
       UITouch *touch= [[event allTouched] anyObject];
       CGPoint location = [touch locationInView: self.tableView];
       NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:location];
       trackedUser = [searchResult obectAtIndex:indexPath.row];
   } 
```

trackedUser 是一个类的对象，其中包含用户的详细信息，例如他的姓名、ID 等。 SearchResult 是一个数组，它在表格视图控制器中显示用户名列表（在搜索栏中搜索时）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:10:50.870

```
//Instead of using Touch Handlers, you can make it more simple!! 
```

在`cellForRowAtIndexPath`数据源中添加标签以`UIButton`喜欢`yourButton.tag = indexPath.row;`

```
-(void) buttonPressed: (UIButton *) sender 
{
    NSLog(@"The row %d button was pressed",sender.tag);

    //To get data, simply pass sender.tag as index in your NSArray or WhatEver you're using for storing data.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:57:45.980

将您的**cellForRowAtIndexPath-Adding 按钮修改为单元格**代码，如下所示

```
UIButton *yourButton = [[UIButton alloc] initWithtarget:..] //creating UIButton with frame and target method
yourButton.tag= indexPath.row;
[cell addSubview:yourButton];
[yourButton release]; 
```

然后修改你的**buttonPressed**方法如下

```
-(void) buttonPressed: (id) sender withEvent: (UIEvent *) event 
{
       UIButton *myBtn = (UIButton *)sender;
       trackedUser = [searchResult obectAtIndex:myBtn.tag];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:46:19.237

当您创建按钮时，将标签设置为按钮。

```
btn.tag= indexPath.row; 
```

当你的按钮被按下然后访问带有标签值的按钮

```
-(void) buttonPressed: (UIButton *) sender 
{
    UIButton *btn = (UIButton*)sender;
    switch (btn.tag) {
        case 0:
            //Thing you want to perform
            break;

        default:
            break;
    }
} 
```

# c# - 无法将类型“Microsoft.SolverFoundation.Services.Term”隐式转换为“bool”

> ID：12529234
> 
> 赞同：2
> 
> 时间：2012-09-21T11:00:54.397
> 
> 标签：c#, ms-solver-foundation

我在下面的代码中遇到异常“无法将类型'Microsoft.SolverFoundation.Services.Term' 隐式转换为'bool'”，我应该如何解决？

```
Term a=null;
            if(a==null)//<--this line exception
            {

            } 
```

下面是截图

![在此处输入图像描述](../Images/a4c84ec29780632d6fae35507e55567c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T11:02:40.380

问题是`Term`该类以一种不返回 bool 而是另一个的方式覆盖相等运算符：http `Term`: [//msdn.microsoft.com/en-us/library/ff525374%28v=vs.93%29。 aspx](http://msdn.microsoft.com/en-us/library/ff525374%28v=vs.93%29.aspx)

我不确定他们为什么会做这样的事情，因为它违背了关于覆盖操作员的任何建议......

要解决您的问题，请改用以下代码：

```
if(ReferenceEquals(a, null)) 
```

# visual-studio-2012 - Blend in Visual Studio 2012：缺少我在 Blend 4 中使用的“资源”窗口

> ID：12529238
> 
> 赞同：1
> 
> 时间：2012-09-21T11:01:23.640
> 
> 标签：visual-studio-2012, expression-blend, blend-2012, resourcedictionary

在 blend 4 中，我经常通过单击“资源”选项卡（右侧窗格的属性选项卡旁边）打开资源字典（即“Generic.xaml”），导航到资源并单击其图标以在设计师。

在 Visual Studio 2012 的混合中，我似乎找不到资源选项卡？然后我如何能够编辑资源字典中的资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T02:05:31.070

从**VS2012 Update 2+ 开始**，我们可以再次创建桌面 WPF 应用程序，以便返回**资源**选项卡。

*“此外，Visual Studio 2012 Update 2 及更高版本增加了对 Silverlight 和 WPF 编辑以及 SketchFlow 的支持。开发人员现在可以利用适用于所有平台的整合工具，作为与 Visual Studio 完全集成的解决方案的一部分。”* (1)

* * *

(1)《微软表达变化》，[http://www.microsoft.com/expression/eng/，2013-9-20](http://www.microsoft.com/expression/eng/)检索

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T15:55:42.403

我假设这是一个 XAML 项目。窗户开着吗？主工具栏 -> 窗口 -> 资源...是否已选中？如果没有，请检查。

# java - 使用 Spring Security 委托/转发 Kerberos 票证

> ID：12529243
> 
> 赞同：4
> 
> 时间：2012-09-21T11:01:45.443
> 
> 标签：java, spring, single-sign-on, kerberos

我正在尝试查找 Kerberos 的 Spring Security 实现是否处理授权票证的委托/转发以便我的应用服务器可以调用其他 Kerberos 服务重用主体 TGT 的信息？任何有关此的文档将不胜感激。干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-24T13:21:36.920

[自Spring Security Kerberos](http://projects.spring.io/spring-security-kerberos/) 1.0.0发布以来，这是可能的。

`SunJaasKerberosTicketValidator`可以配置为存储身份验证上下文：

```
ticketValidator.setHoldOnToGSSContext(true); 
```

这里有一些代码可以帮助您入门：

```
Authentication authentication = SecurityContextHolder.getContext().getAuthentication();

if (authentication instanceof KerberosServiceRequestToken) {
    KerberosServiceRequestToken token = (KerberosServiceRequestToken) authentication;

    if (token.getTicketValidation() == null) {
        // No delegation possible...
    } else {
        GSSContext context = token.getTicketValidation().getGssContext();

        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:52:47.580

Spring security 不实现任何 Kerberos 功能。如果您指的是 kerberos**[扩展](http://static.springsource.org/spring-security/site/extensions/krb/index.html)**，那么答案是否定的。它只进行身份验证，它只是 Java JAAS API 的包装器[`Krb5LoginModule`](http://docs.oracle.com/javase/7/docs/jre/api/security/jaas/spec/com/sun/security/auth/module/Krb5LoginModule.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-22T13:06:13.973

正如 Koraktor 所提到的，SunJaasKerberosTicketValidator 类具有与 JAAS 配置文件等效的详细信息。但是，`SunJaasKerberosTicketValidator`已将`isInitiator`标志设置为 false。这会导致`context.getCredDeleg()`返回 false，并且您不能委派凭据。我做了一个 POC，我的观察是委托/转发只有在`isInitiator`设置为 true 时才有效。

我通过编写自己的方法解决了这个问题`TicketValidator`，一切都`SunJaasKerberosTicketValidator`保持原样，除了将 isInitiator 标志的条目更改为 `options.put("isInitiator", "true");`

# c# - 使用 itextsharp 在 PDF 中直接插入 HTML

> ID：12529244
> 
> 赞同：0
> 
> 时间：2012-09-21T11:01:46.493
> 
> 标签：c#, itextsharp

我有 WPF 应用程序，其中用户在富文本框（rtb）中输入一些文本，我将该 rtb 字符串转换为 HTML，然后将该 HTML 转换为图像，然后将其插入 PDF 文档

```
using (Stream inputPdfStream = new FileStream("sample.pdf", FileMode.Open, FileAccess.Read, FileShare.Read))
using (Stream outputPdfStream = new FileStream("result2.pdf", FileMode.Create, FileAccess.Write, FileShare.None))
{
  var reader = new PdfReader(inputPdfStream);
  var stamper = new PdfStamper(reader, outputPdfStream);

  PdfContentByte pdfContentByte = null;

  int c = reader.NumberOfPages;
  iTextSharp.text.Image image =   TextSharp.text.Image.GetInstance(ConvertXamltohtmltoImage(xamlstring));

  foreach (var item in lst)
  {
      image.ScaleToFit(item._Size.Width, item._Size.Height);
      image.SetAbsolutePosition(item.Location.X, item.Location.Y);
      pdfContentByte = stamper.GetOverContent(item.pageNo);
      pdfContentByte.AddImage(image);
  }
  stamper.Close();
} 
```

我的问题是我可以将 HTML 直接插入 PDF 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:19:57.357

您需要一个额外的 DLL 来执行此操作：http: [//sourceforge.net/projects/itextsharp/files/xmlworker/](http://sourceforge.net/projects/itextsharp/files/xmlworker/) 查看演示：[http](http://demo.itextsupport.com/xmlworker/) ://demo.itextsupport.com/xmlworker/ 不幸的是，文档尚未更新最近。我们正在努力。

# jquery - .fadeOut 和 .fadeIn 在 IE 中不起作用

> ID：12529247
> 
> 赞同：1
> 
> 时间：2012-09-21T11:02:10.193
> 
> 标签：jquery, opencart

我目前在 Open Cart 中安装的付费扩展存在问题，它的目的是显示选项的价格差异，而不是显示选项的价格差异，在原始基本选项价格旁边加上 +，它补充说两者在一起。

例如，没有模块的原始 Open Cart 将显示显示价格的位置：

选择的基础产品价格显示：“£10.00”

可选额外选择：显示的价格：“10.00 英镑 + 1.50 英镑”

使用 Extension 时，它会将 1.50 英镑添加到价格中并显示“11.50 英镑”。

在 FireFox 和 chrome 中一切正常，但在 IE8 中（并且该站点必须在 IE8 及更高版本中运行）扩展中有一行代码似乎不起作用。

The code below makes the old price fade out when an optional extra is selected, and makes the new price fade in, IE8 reports errors on these lines and when an optional extra is selected the price just vanishes, no fade out, no fade in,并且即使选择了没有可选附加项的原始产品也不返回。

这是有问题的代码：

```
jQuery('#opu_price').fadeOut('100').queue(function(n){jQuery(this).html(mydata.price); n();}).fadeIn('100');
jQuery('#opu_special').fadeOut('100').delay(100).queue(function(n){jQuery(this).html(mydata.special); n();}).fadeIn('100');
jQuery('#opu_tax').fadeOut('100').delay(200).queue(function(n){jQuery(this).html(mydata.tax); n();}).fadeIn('100'); 
```

如果你能帮助我，我想要的是移除淡入效果并立即显示价格，如果没有淡入效果，这没什么大不了的，但我对 jQuery 和 JavaScript 没有经验，不要' t真的知道如何修改代码。

**编辑：**

以下是所要求的 IE8 错误消息

网页错误详情

```
Message: Object doesn't support this property or method Line: 485 Char: 4 Code: 0 URI: http://www.cfmachinery.co.uk/index.php?route=product/product&product_id=383
Message: Object expected Line: 484 Char: 81 Code: 0 URI: http://www.cfmachinery.co.uk/index.php?route=product/product&product_id=383 
```

您将无法访问该网站，因为它还没有上线，所以这里分别是第 484 和 485 行：

```
$('#opu_price').fadeOut('100').queue(function(n){$(this).html(mydata.price); n();}).fadeIn('100');
$('#opu_special').fadeOut('100').delay(100).queue(function(n){$(this).html(mydata.special); n();}).fadeIn('100'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:51:36.463

请您显示更多您的 OpenCart 页面代码。尝试`charset`在`script`标签内添加。

```
<script type="text/javascript" charset="utf-8" src="//some-cdn.com/j.js"></script>
<script type="text/javascript" charset="utf-8">
    $('#opu_price').fadeOut('100').queue(function (n) {
        $(this).html(mydata.price);
        n();
    }).fadeIn('100');
    $('#opu_special').fadeOut('100').delay(100).queue(function (n) {
        $(this).html(mydata.special);
        n();
    }).fadeIn('100');
</script> 
```

# iphone - AVAssetExportSession 输出文件

> ID：12529250
> 
> 赞同：7
> 
> 时间：2012-09-21T11:02:19.017
> 
> 标签：iphone, ios, video, compression, avassetexportsession

AVAssetExportSession 输出文件应该是什么样子？我正在尝试从 ALAsset 项目压缩视频，但它不起作用。我猜输出文件与它有关。

这是我正在使用的代码：

```
NSString *destinationPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Movie"];
[self convertVideoToLowQualityWithInputURL:asset.defaultRepresentation.url outputURL:[NSURL URLWithString:destinationPath]];

- (void)convertVideoToLowQualityWithInputURL:(NSURL*)inputURL outputURL:(NSURL*)outputURL {

    if([[NSFileManager defaultManager] fileExistsAtPath:[NSString stringWithContentsOfURL:outputURL encoding: 0 error:Nil]]) [[NSFileManager defaultManager] removeItemAtURL:outputURL error:nil];

    AVURLAsset *assetAV = [AVURLAsset URLAssetWithURL:inputURL options:nil];

    NSLog(@"url string from asset: %@", assetAV.URL);
    NSLog(@"output url: %@", [outputURL absoluteString]);

    [[NSFileManager defaultManager] createFileAtPath:[outputURL path] contents:nil attributes:nil];

    NSLog(@"duration: %lld", assetAV.duration.value); //it logs a valid value, so it's all good so far

    AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:assetAV presetName:AVAssetExportPresetLowQuality];
    exportSession.outputURL = outputURL;
    exportSession.outputFileType = AVFileTypeQuickTimeMovie;
    [exportSession exportAsynchronouslyWithCompletionHandler:^(void) {
        if (exportSession.status == AVAssetExportSessionStatusCompleted) {
            NSLog(@"success");
        } else {
            NSLog(@"error: %@", [exportSession error]);
            //error: Error Domain=AVFoundationErrorDomain Code=-11800 "The operation could not be completed" UserInfo=0x2023b720 {NSLocalizedDescription=The operation could not be completed, NSUnderlyingError=0x2023bb70 "The operation couldn’t be completed. (OSStatus error -12780.)", NSLocalizedFailureReason=An unknown error occurred (-12780)}
        }
    }];
} 
```

有人可以帮帮我吗？

更新：

找到了解决方案。我认为问题出在输出文件上，所以这里是生成有效文件的代码：

```
 NSUInteger count = 0;
            NSString *filePath = nil;
            do {
                NSString *extension = ( NSString *)UTTypeCopyPreferredTagWithClass(( CFStringRef)AVFileTypeQuickTimeMovie, kUTTagClassFilenameExtension);
                NSString *fileNameNoExtension = [[asset.defaultRepresentation.url URLByDeletingPathExtension] lastPathComponent];
                NSString *fileName = [NSString stringWithFormat:@"%@-%@-%u",fileNameNoExtension , AVAssetExportPresetLowQuality, count];
                filePath = NSTemporaryDirectory();
                filePath = [filePath stringByAppendingPathComponent:fileName];
                filePath = [filePath stringByAppendingPathExtension:extension];
                count++;

            } while ([[NSFileManager defaultManager] fileExistsAtPath:filePath]);

            NSURL *outputURL = [NSURL fileURLWithPath:filePath]; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-26T11:16:52.220

您的问题是 [NSURL URLWithString:destinationPath] 仅此而已。您需要像在解决方案中那样使用 [NSURL fileURLWithPath:xxx]。发布此内容只是为了澄清这是唯一的问题。

# joomla - JCE Mediabox 问题

> ID：12529252
> 
> 赞同：0
> 
> 时间：2012-09-21T11:02:37.043
> 
> 标签：joomla, popup, joomla2.5

我正在尝试使用 JCE Mediabox 弹出窗口打开联系表。当我单击链接时，会打开弹出窗口，并与该弹出窗口一起打开“打印属性”。我无法理解 Print 属性的来源。我以前使用过 JCE mediabox，一切正常（没有打开打印属性）。

如何查看它的来源或如何禁用它？或者这不适合最新的 Joomla 版本。

我在一个空白站点上尝试过，并且有同样的事情。所以问题不能在我的网站上，我想。

我刚刚制作了空白站点以显示问题。也许有人可以理解问题出在哪里。[这是链接](http://weblabor.eu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:46:01.743

`</body>`在tag.which 打开打印弹出窗口之前有一个脚本

```
<script type="text/javascript">window.print();</script> 
```

很可能它将在您当前模板文件夹的 component.php 中。

喜欢`joomla root->templates->your_template->component.php`

愿这能解决你的问题。

# macos - 启动tomcat OSX时intellij冻结

> ID：12529259
> 
> 赞同：0
> 
> 时间：2012-09-21T11:03:12.627
> 
> 标签：macos, tomcat, intellij-idea

有没有人遇到过tomcat 7在OSX上冻结intellij（11和12）大约2分钟的问题-tomcat本身启动正常（我可以在intellij返回之前访问webapps）。

这似乎不是一个内存问题，因为我只是堆的 25% 的用户，当 intellij 确实返回时，内存占用没有改变。

我正在使用 mountian lion & JDK 1.7.0_05 & 可以确认这个问题不会发生在 Win7 上相同版本的 intellij 上。

谢谢，

伊恩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:06:04.350

经过大量研究和玩，没有解决问题，所以提出了与jetbrians的问题......

# java - Spring DataJPA 自定义查询问题：

> ID：12529268
> 
> 赞同：0
> 
> 时间：2012-09-21T11:03:36.107
> 
> 标签：java, jpa, spring-data

我有一个 JPA (hibernate + postgresql) 和 MongoDB 的设置：

```
 <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-mongodb</artifactId>
        <version>1.0.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-jpa</artifactId>
        <version>1.1.0.RELEASE</version>
    </dependency> 
```

我的存储库接口是：

```
@Repository
public interface JpaModelRepository extends JpaRepository<ModelEntity, Integer> {
    public ModelEntity findByName(String modelNameSample);
} 
```

我的实体：

```
@Entity
@Table (name = "model")
public class ModelEntity implements GenericId<Integer>, Serializable {

    ....
    @Column (name = "name_tx")
    private String name; 
```

存储库接口的实现由 SpringData 自动生成。如果我删除 findByName，我的项目中一切正常。如果我离开它，我在 tomcat 错误日志中有这个：

```
Caused by: java.lang.NoSuchMethodError: org.springframework.data.repository.query.parser.Part.getProperty()Lorg/springframework/data/repository/query/parser/Property;
    at org.springframework.data.jpa.repository.query.JpaQueryCreator.toPredicate(JpaQueryCreator.java:163)
    at org.springframework.data.jpa.repository.query.JpaQueryCreator.create(JpaQueryCreator.java:95)
    at org.springframework.data.jpa.repository.query.JpaQueryCreator.create(JpaQueryCreator.java:49)
    at org.springframework.data.repository.query.parser.AbstractQueryCreator.createCriteria(AbstractQueryCreator.java:109)
    at org.springframework.data.repository.query.parser.AbstractQueryCreator.createQuery(AbstractQueryCreator.java:88)
    at org.springframework.data.repository.query.parser.AbstractQueryCreator.createQuery(AbstractQueryCreator.java:73)
    at org.springframework.data.jpa.repository.query.PartTreeJpaQuery$QueryPreparer.<init>(PartTreeJpaQuery.java:102)
    at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.<init>(PartTreeJpaQuery.java:59)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:93)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:164)
    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:71)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.<init>(RepositoryFactorySupport.java:269)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:142)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:114)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:38)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    ... 85 more 
```

尝试使用此文档但由于某种原因失败： [Spring Doc](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#jpa.query-methods.query-creation)

希望你们中的一个人设法创建了一个自定义查询（如 findBySomeProperty(...)）...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:04:17.280

Spring 数据 API 在 1.0 和 1.1 版本之间发生了更改，这就是此错误的原因。对您的两个依赖项使用相同的版本，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-29T18:10:47.277

我有同样的问题

```
org.springframework.data.repository.query.parser.PartTree.isCountProjection()Ljava/lang/Boolean; 
```

但是我通过使用适当的罐子组合来解决它

```
spring-data-jpa-1.2.0.RELEASE.jar <BR>
spring-data-commons-1.6.3.RELEASE.jar <BR>
spring-data-commons-core-1.4.1.RELEASE.jar<BR>
hibernate-entitymanager-4.1.12.final.jar<BR>
hibernate-jpa-2.1-api-1.0.0.final.jar<BR>
hibernate-validator-4.2.0.final.jar<BR>
hibernate-commons-annotations-4.0.0.CR2.jar<BR> 
```

并使用 Spring core 3.2.5 版本的 jars。问题解决了。

我还使用了正确的方言，即连接到数据库的正确驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T23:49:50.873

我找到了答案：

```
 <spring.version>3.1.2.RELEASE</spring.version>
    <spring-data.jpa.version>1.2.0.BUILD-SNAPSHOT</spring-data.jpa.version>
    <spring-data.mongodb.version>1.1.0.BUILD-SNAPSHOT</spring-data.mongodb.version> 
```

[https://github.com/SpringSource/spring-data-multistore-test](https://github.com/SpringSource/spring-data-multistore-test)

我在那个 git 存储库上做了一些 maven 测试组合版本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T08:38:48.250

我在尝试使用 Spring Data JPA + Hibernate + Spring Framework 4.0 时遇到了同样的问题。问题是 Spring Data 项目没有跟上 Spring Framework 项目的速度。

我使用正确的 JAR 版本组合并排除任何其他 Spring 项目来解决问题，以便可以根据“Spring Data”pom.xml 文件正确并自动下载那些依赖的 JAR。在此处检查所有 Spring Data 依赖项：[http ://search.maven.org/#artifactdetails%7Corg.springframework.data%7Cspring-data-jpa%7C1.6.0.RELEASE%7Cjar](http://search.maven.org/#artifactdetails%7Corg.springframework.data%7Cspring-data-jpa%7C1.6.0.RELEASE%7Cjar)

我将我的 maven pom.xml 文件更改为：

```
 <properties>

    <!-- Generic properties -->
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>

    <!-- Spring -->
    <spring-framework.version>3.2.9.RELEASE</spring-framework.version>
    <spring-data.version>1.6.0.RELEASE</spring-data.version>

    <!-- Hibernate / JPA -->
    <hibernate.version>3.6.10.Final</hibernate.version>

    <!-- Test -->
    <junit.version>4.11</junit.version>

    </properties>

    <dependencies>

    <!-- Spring framework -->
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-jpa</artifactId>
        <version>${spring-data.version}</version>
    </dependency>

    <!-- Hibernate -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${hibernate.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>${hibernate-jpa.version}</version>
    </dependency>

            ....
</dependencies> 
```

# objective-c - 如何在 NSLog 中获取 MapView 的当前位置？

> ID：12529273
> 
> 赞同：0
> 
> 时间：2012-09-21T11:03:41.350
> 
> 标签：objective-c, mkmapview, currentlocation

我能够获取用户当前位置的经度和高度，但不能获取 location 的名称。我使用 userLocation 属性如下：

```
NSLog(@"Current location=%@",mapView.userLocation); 
```

但是，它给了我输出 `Current location=<MKUserLocation: 0x1f59e8c0>`

我想获取该位置的字符串值而不是 0x1f59e8c0。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:18:06.090

```
NSLog(@"Current location %@",mapView.userLocation.title); 
```

PS 还有更多属性字幕

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:36:11.613

从 MKMapView 文档开始：http: [//developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)

您可以沿着链条向下查找经度是 CLLocationCoordinate2D 的一部分（并且是双精度） [http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CoreLocationDataTypesRef/Reference/reference.html# //apple_ref/doc/c_ref/CLLocationCoordinate2D](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CoreLocationDataTypesRef/Reference/reference.html#//apple_ref/doc/c_ref/CLLocationCoordinate2D)

```
NSLog(@"Current longitude = %f",mapView.userLocation.location.coordinate.longitude); 
```

# c# - 使用递归获取整数中的位数

> ID：12529279
> 
> 赞同：2
> 
> 时间：2012-09-21T11:04:24.653
> 
> 标签：c#, recursion

我正在编写一个函数，它应该使用递归来获取整数中的位数，例如 236 有 3 位数。到目前为止我有这个，但它不工作。另外，那里有递归的很好的解释吗？

```
namespace ConsoleApplication3
{
    class Program
    {
        static void Main(string[] args)
        {
          Console.WriteLine(getDigits(5428, 0));
          Console.ReadLine();
        }

        public static int getDigits(int digits, int i)
        {
            if (digits != 0)
            {
                i++;
                getDigits(digits/10, i);                
            }

            return i;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T11:07:53.220

好吧，您需要稍微调整一下递归函数：

```
public static int GetDigits(int number, int digits)
{
    if (number == 0)
        return digits;

    return GetDigits(number / 10, ++digits);
} 
```

您的错误是，您没有返回递归调用的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:19:01.113

您正在返回`i`，但是当函数从递归返回时， 的值为`i`1，然后您返回 1。

您必须返回递归的结果。

```
return getDigits(...) 
```

* * *

```
public static int getDigits(int digits, int i)
{
    if (digits != 0)
    {
        i++;
        getDigits(digits/10, i);                
    }

    return i;
} 
```

步骤1：

```
digits = 5428
i      = 0 
```

第2步：

```
digits = 542
i      = 1 
```

[...] 你增加`i`了，但你没有返回你的递归结果，你正在返回`i`第 1 步的值。

现在，如果你这样做：

```
public static int GetDigits(int number, int digits)
{
    if (number == 0)
    {
        return digits == 0 ? 1 : digits;
    }

    return GetDigits(number / 10, ++digits);
} 
```

您将从递归中返回值。

步骤1：

```
number = 5428
digits = 0 
```

第2步：

```
number = 542
digits = 1 
```

第 3 步：

```
number = 54
digits = 2 
```

第4步：

```
number = 5
digits = 3 
```

步骤#5：

```
number = 0
digits = 4 
```

步骤#5 输入 的条件`(number == 0)`并返回到步骤#4 `digits`，在这一步是。`4`

第 4`GetDigits(number / 10, ++digits);`步将第 5 步的结果返回到第 3 步。

第 3`GetDigits(number / 10, ++digits);`步将第 4 步的结果返回到第 2 步。

步骤#2 将`GetDigits(number / 10, ++digits);`步骤#3 的结果返回到步骤#1。

然后步骤 #1 返回值，该值`4`是您从递归的最后一次交互中获得的结果。

[c#中前缀和后缀操作的](https://stackoverflow.com/q/7812178/340760)解释（++digits over digits++）

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-21T11:07:40.733

这是错误的条件`if (digits != 0)`，你不能通过除法得到零，你必须使用 if 语句

```
if (digits != 0)
{
     i++;
     return getDigits(digits/10, i);                
}
else
{
     return i;
} 
```

# android - 在 WebView 中加载 URL 并使 Top 20dp 不可见

> ID：12529283
> 
> 赞同：0
> 
> 时间：2012-09-21T11:04:45.510
> 
> 标签：android, android-webview

我有一个网站的 URL，我想在 WebView 中加载它。该网站必须可以上下滚动，页面顶部 20dp 除外。这意味着网站的标题不能在 WebView 中可见，不会影响网站整体的可滚动性，也不会用笨拙的纯色 View 覆盖 WebView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:27:18.620

您可以尝试在 XML 本身中进行复杂的布局设计。

取一个 FrameLayout 并将 WebView 和一个 ImageView 放入其中，像这样

```
<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/webView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

         />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_gravity="top"
        android:layout_width="fill_parent"
        android:layout_height="20dp"
        android:background="@drawable/whiteBG"/>
</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:22:45.340

一种解决方案可能是注入 javascript。

```
mWebView.loadUrl("javascript:(function() { " +
   "document.getElementsByClassName('headerClassName')[0].style.display=\"none\"; "+
   "})()"); 
```

如果您知道标题所在的类，这将隐藏标题。

# android - Android：如何将背景图像设置为给定“wrap_content”的按钮

> ID：12529285
> 
> 赞同：3
> 
> 时间：2012-09-21T11:04:46.970
> 
> 标签：android, button, background

首先我有一个这样的按钮：

```
<Button
    android:id="@+id/prefButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="Edit" /> 
```

因为我没有指定和 textSize，所以它采用设备字体设置的默认面。添加按钮的宽度和高度看起来不错。

现在的问题是当我想添加背景图像（实际上是背景颜色但无法获得确切的 argb 值，因此使用图像）时，我添加了：

```
 android:background="@drawable/backgroundImage" 
```

并且图像大小约为 300x300 像素。因此，现在我得到了大小为 300x300 的按钮（显然）。

所以，现在我必须硬编码高度和宽度的值。并检查这些值是否看起来不错，如果不是，我还必须再次对 TextSize 进行硬编码。

有没有办法让 Button 与以前一样，只需添加背景图像（可能更大）。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:13:19.547

我能想到的解决您的问题的更好方法是使您的图像更小并将其设置为 9patch 图像，这将使其拉伸以填充文本，就像默认按钮图像一样。在 9patch 图像中，您可以定义图像的拉伸部分，使其在拉伸时不会变形。[在这里](http://developer.android.com/intl/es/tools/help/draw9patch.html)您可以看到如何绘制九个可拉伸部件。

这是从[此处](http://developer.android.com/intl/es/guide/topics/graphics/2d-graphics.html)获取的九补丁图像的解释：

Nine-patch NinePatchDrawable 图形是可拉伸的位图图像，Android 会自动调整其大小以适应您将其作为背景放置的 View 的内容。NinePatch 的一个示例使用是标准 Android 按钮使用的背景——按钮必须拉伸以适应各种长度的字符串。NinePatch drawable 是一个标准的 PNG 图像，包括一个额外的 1 像素宽的边框。它必须以扩展名 .9.png 保存，并保存到项目的 res/drawable/ 目录中。

边框用于定义图像的可拉伸和静态区域。您可以通过在边框的左侧和顶部绘制一条（或多条）1 像素宽的黑线来指示可拉伸部分（其他边框像素应完全透明或白色）。您可以拥有任意数量的可拉伸部分：它们的相对大小保持不变，因此最大的部分始终保持最大。

您还可以通过在右边和底线上绘制一条线来定义图像的可选可绘制部分（实际上是填充线）。如果 View 对象将 NinePatch 设置为其背景，然后指定 View 的文本，它会自行拉伸，以使所有文本仅适合右线和底线指定的区域（如果包括）。如果不包括填充线，Android 使用左边和顶线来定义这个可绘制区域。

为了阐明不同线条之间的区别，左侧和顶部的线条定义了允许复制图像的哪些像素以拉伸图像。底部和右侧的线定义了允许视图内容位于图像内的相对区域。

这是一个用于定义按钮的示例 NinePatch 文件：

![按钮九补丁](../Images/5650612f0a7420fef586d15d79d2bb46.png)

这个 NinePatch 用左、顶线定义了一个可拉伸区域，用底线和右线定义了一个可绘制区域。在顶部图像中，灰色虚线标识将被复制以拉伸图像的图像区域。底部图像中的粉红色矩形标识了允许 View 内容的区域。如果内容不适合该区域，则图像将被拉伸以使其适合。

Draw 9-patch 工具提供了一种非常方便的方式来创建您的 NinePatch 图像，使用所见即所得的图形编辑器。如果您为可拉伸区域定义的区域由于像素复制而有产生绘图伪影的风险，它甚至会发出警告。

# ios - iOS6 UIwebView CSS3D 转换不是硬件加速的

> ID：12529286
> 
> 赞同：14
> 
> 时间：2012-09-21T11:04:57.903
> 
> 标签：ios, css, ios6, hardware-acceleration

我在 iOS6 UIWebView 组件中的滚动性能不佳时遇到问题。不过，在 iOS5 中，滚动非常流畅。所以我在网上搜索了一下，发现了这个（iOS6 beta 更新日志的一部分）。

> WebKit 不再总是使用 -webkit-transform: preserve-3d 选项为元素创建硬件加速层。作者应该停止使用此选项作为获得硬件加速的一种方式。

这可能是原因，因为我的应用程序显示的 html 网站使用了大量的 css3 转换。请有任何人提供解决方案或建议如何强制 webview 切换回加速渲染模型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T13:58:28.103

除了已经提到的（或不）触发硬件加速的 CSS 属性的变化之外，我注意到 iOS6 上的另一个变化并没有在 iOS5 上持续存在（或者至少我之前没有真正注意到它） **：硬件加速元素和非加速元素会减慢渲染和应用程序的速度。**

如果加速元素和非加速元素之间有任何重叠，请确保将硬件加速添加到其他元素，即使它们没有动画，因为它们也将被重新渲染，这将完全抑制或在某些情况下案例恢复了加速效应。

如果您想查看它，我还写了一篇关于此的简短文章：http: [//indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/](http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T02:41:16.247

如果您使用 3D 变换（例如`-webkit-transform: translateZ(0)`），UIWebView 仍然会进行硬件加速。如果您*只*使用`-webkit-transform-style: preserve-3d`.

如果您有一个示例正在执行 3D 转换，但在 iOS 6 中变慢了，您应该在[Apple 的 Bug Reporter](http://bugreporter.apple.com)上报告它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T19:48:27.757

我附上了一个简单的测试用例，它在 iOS6 中重现了这个错误，并且在 iOS5.1 上运行得非常好（在 iPhone 4 和 4S 上）。iOS Chrome 应用程序是运行此测试的好地方，因为它嵌入了 UIWebView。我有一个视频，一旦它上传两个 iPhone 4（运行 iOS 5.1，另一个运行 iOS 6）在 PhoneGap 2.0 UIWebView 中运行此示例脚本，我将附上该视频。

现在，这些元素似乎正在被硬件加速，但苹果的低级管道中存在一个会降低性能的错误。我们已经尝试了许多硬件加速的变通方法，而且似乎任何在 iOS5.1 上调用 GPU 的东西都会导致 iOS6 上的大幅减速。

我很想找到一个修复程序，因为我们正在构建的应用程序在很大程度上依赖于它的正常工作。如果有人可以指出此示例中的错误，那也将不胜感激。

**编辑：**即使您如下修改 animate 函数，该错误仍然存​​在。

```
function animate(node) {
    node.style.webkitAnimation = 'sample 5s infinite';
    node.style.webkitPerspective = 1000;
    node.style.webkitBackfaceVisibility = 'hidden';
} 
```

这似乎强化了调用 GPU 会导致这种减速。

**编辑 2：**在[http://bvgam.es/apple/](http://bvgam.es/apple/)上托管了一个附加示例，它在 iOS 5.1 上运行顺畅，在 iOS 6 上获得 1-2 FPS。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Animation Playground</title>
        <style>
            @-webkit-keyframes sample {
                0% { -webkit-transform: translate3d(0px, 0px, 0px); opacity: 1; }
                10% { -webkit-transform: translate3d(0px, 0px, 0px); opacity: 0; }
                20% { -webkit-transform: translate3d(10px, 0px, 0px); opacity: 1; }
                40% { -webkit-transform: translate3d(10px, 10px, 0px); opacity: 0; }
                50% { -webkit-transform: translate3d(10px, 20px, 0px); opacity: 1; }
                80% { -webkit-transform: translate3d(20px, 20px, 0px); opacity: 0; }
                100% { -webkit-transform: translate3d(0px, 0px, 0px); opacity: 1; }
            }
        </style>
        <script type="text/javascript">
            function fib(node, a, b) {
                node.innerHTML = a;
                setTimeout(function() {
                    fib(node, a + b, b);
                }, 0);
            }

            function animate(node) {
                node.style.webkitAnimation = 'sample 5s infinite';
            }

            function createNode(row, column) {
                var node = document.createElement('div');
                node.style.width = '7px';
                node.style.height = '7px';
                node.style.position = 'absolute';
                node.style.top = 30 + (row * 9) + 'px';
                node.style.left = (column * 9) + 'px';
                node.style.background = 'green';
                return node;
            }

            function run() {
                for (var row = 0; row < 20; ++row) {
                    for (var column = 0; column < 20; ++column) {
                        var node = createNode(row, column);
                        document.body.appendChild(node);
                        animate(node);
                    }
                }

                var output = document.getElementById('output');
                fib(output, 0, 1);
            }
        </script>
    </head>
    <body onload="run()">
        <div id="output" style="font-size: 40px; position: absolute; left: 220px;"></div>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T11:27:59.133

尝试替换所有实例`-webkit-transform: translate3d(0,0,0);`

和

`-webkit-transform: translate3d(0,0,0) scale3d(1,1,1);`

它确实对我有用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-22T15:48:45.397

CSS 转换在 iOS 6 中确实慢了很多，至少在我在 iPhone 4 上的应用程序中是这样。

我将基本 translate() 设置为 element，而不是 translate3d()，并且性能保持不变，所以我认为即使 translate3d() 不再触发 GPU 加速。这听起来像一个错误。

作为一种解决方法，我尝试在元素上设置不同的 CSS 属性（如 rotate3d()、scale3d()、perspective 等），但它们似乎都没有触发硬件加速。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T12:38:28.253

`-webkit-transform: translate3d(0,0,0);`尝试用替换所有实例`-webkit-perspective: 1000; -webkit-backface-visibility: hidden;`。这对我有用。似乎`-webkit-transform: translate3d(0,0,0);`不再调用硬件加速。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T17:55:43.517

那些报告 -webkit-transform: translate3d(0,0,0); 在 iOS 6 中速度较慢，请提供一些显示此内容的示例内容的 URL。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-26T18:01:36.273

只是让一些人知道，如果与硬件加速转换（如 translateZ(0)）一起使用，-webkit-transform-origin 以前是硬件加速的，但现在不再是。

# visual-studio-2010 - 添加到 SQL Server 2008 的连接，我需要打开什么？

> ID：12529287
> 
> 赞同：1
> 
> 时间：2012-09-21T11:05:01.020
> 
> 标签：visual-studio-2010, sql-server-2008, firewall, portforwarding, windows-firewall

我正在尝试将 Visual Studio 2010 中的数据连接添加到给定 IP（通过 Internet）的 SQL Server 2008 数据库。我需要打开和转发哪些端口才能让奇迹发生？

我需要设置 SQL Server 中的任何设置以允许外部连接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:10:21.680

端口 1433 是默认使用的端口。

有关详细信息，请参阅[通过防火墙与 SQL 通信所需的 TCP/IP 端口号](http://support.microsoft.com/kb/287932)。

> 默认 SQL Server 端口为 1433，客户端端口分配一个介于 1024 和 5000 之间的随机值。

和：

> 端口不必是 1433，但 1433 是 SQL Server 的官方 Internet 号码分配机构 (IANA) 套接字号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:09:39.503

到 sql server 配置管理器检查正在使用的端口并打开该端口。

此外，在 Sql Server Management Studio 上，右键单击实例 -> 属性 -> 连接 -> 选中“允许远程连接到此服务器”。

# php - PHP - 电子邮件被标记为垃圾邮件

> ID：12529293
> 
> 赞同：0
> 
> 时间：2012-09-21T11:05:49.323
> 
> 标签：php

> **可能重复：**
> [如何通过电子邮件发送源代码而不被标记为垃圾邮件？](https://stackoverflow.com/questions/1809082/how-do-you-email-source-code-without-getting-flagged-as-spam)
> [如何降低电子邮件的垃圾邮件分数？](https://stackoverflow.com/questions/1860937/how-can-i-lower-the-spam-score-of-my-email-message)

我正在使用下面的代码通过 PHP 发送带有附件的电子邮件。（只是一个中等大小的图像和一个没有任何垃圾内容的小描述）

问题是某些服务将电子邮件标记为垃圾邮件或完全拒绝它。

我是 PHP 新手，在 SO 上找到了这段代码。标题有什么问题或可能导致这种情况吗？

```
<?php
    $file         = $_POST["thefile"];         
        $text_message = $_POST["themessage"];       
        $subject      = $_POST["thesubject"];        
        $from         = $_POST["thesender"];        
        $to           = $_POST["theaddress"];                 

          $attachment=uniqid(rand(), true) . '.png';

       $headers="From: $from\r\n";
        $headers.="Reply-to: $from\r\n";
        $headers.="Return-Path: $from\r\n";

    if (isset($_ENV["SERVER_NAME"])) 
        $headers.="Message-Id: <" . md5(uniqid(microtime())) . "@" . $_ENV["SERVER_NAME"] . ">\r\n";
    else
        $headers.="Message-Id: <" . md5(uniqid(microtime())) . "@" . 'unknown' . ">\r\n";
    $headers.="Date: " . date("r") . "\r\n";
    $headers.="X-Mailer: PHP\r\n";
    if (isset($_ENV["REMOTE_ADDR"])) 
        $headers.="X-SenderIP: " . $_ENV["REMOTE_ADDR"] . "\r\n";
    else
        $headers.="X-SenderIP: " . 'unknown' . "\r\n";
    if (isset($_ENV["SERVER_NAME"])) 
        $headers.="X-WebSite: " . $_ENV["SERVER_NAME"] . "\r\n";
    else
        $headers.="X-WebSite: " . 'unknown' . "\r\n";
    $headers.="X-Script: SWF_Generator\r\n";
    $bound_text=md5(uniqid(time()));

        $headers.="MIME-Version: 1.0\r\n" . "Content-Type: multipart/mixed; boundary=\"PHP-mixed-$bound_text\"\r\n";
        $message="--PHP-mixed-$bound_text\r\n"      
                ."Content-Type: text/html; charset=\"utf-8\"\r\n"
                ."Content-Transfer-Encoding: 7bit\r\n\r\n"  
                ."<html><head></head><body>"
                ."<div style=\"font-family: Arial, Helvetica, sans-serif; font-size : 1.3em; color: #000000;width: 100%;text-align: left;\">$text_message</div></body></html>\r\n\r\n"  
                ."--PHP-mixed-$bound_text\r\n"  
                ."Content-Transfer-Encoding: base64\r\n"
                ."Content-Disposition: attachment; filename=\"$attachment\"\r\n"
                ."Content-Type: image/png; name=\"$attachment\"\r\n\r\n"
        .chunk_split($file)
        ."\r\n\r\n"
                ."--PHP-mixed-$bound_text--\r\n\r\n";

  mail($to,$subject,$message,$headers);
}
?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:13:08.353

好吧，使用 PHP 发送电子邮件并不像调用 mail() 函数那么简单......

我建议您使用有效的 SMTP 服务器（例如 gmail 服务器）和现成的 php 组件/类，如[PHPmailer](http://phpmailer.worxware.com/)。

对于 99% 的情况，这应该足够了。

# css - 无法在 CSS 中设置 div 宽度

> ID：12529296
> 
> 赞同：0
> 
> 时间：2012-09-21T11:05:55.527
> 
> 标签：css, layout

我想让三个内部 div 具有相同的大小。你能告诉我这有什么问题吗？

[http://jsfiddle.net/8uasY/](http://jsfiddle.net/8uasY/)

实际上，我希望内部 div 间隔均匀，所以当我添加边距时，我得到：http: [//jsfiddle.net/8uasY/11/](http://jsfiddle.net/8uasY/11/)，内部 div 不再在同一行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:07:59.910

检查此[链接](http://jsfiddle.net/venkateshwar/8uasY/1/)您没有正确使用选择器。这使您的六个`div's`宽度相同，而不是只有三个 child `div's`。

**采用**

```
.pricing div div{
float :left ;
width:33% ;

} 
```

**代替**

```
.pricing div{
float :left ;
width:33% ;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:21:27.757

这里是：http: [//jsfiddle.net/4kzhk/](http://jsfiddle.net/4kzhk/)

通过从*.inner* div中删除*浮动并且***不**指定宽度，宽度是动态的，它允许您自由使用填充和边距。

 ***更重要的一件事：注意我将选择器从：

```
.pricing div {
 ...
} 
```

到：

```
.pricing > div {
 ...
} 
```

> 符号表示**仅**选择**直接子代** 这是*'.pricing'的 div*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:10:49.293

您不需要所有的包装 div，只需选择 div.inner

```
.inner 
{
    border : 1px solid #ccc ;
    border-radius: 8px 8px 0 0;
    min-height :120px ;
    box-shadow: 0 0 8px rgba(0, 0, 0, .3);
    padding :20px ;
    box-sizing: border-box; 
    float: left ;
    width: 33%;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/8uasY/12/](http://jsfiddle.net/Kyle_Sevenoaks/8uasY/12/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:13:08.853

宽度 33% 将应用于您主 div 下的所有 div。你需要给你的容器 div 一个类，像这样改变你的 HTML/CSS ...

```
<div class="pricing">   
   <div class="outer"><div   class="inner">  satarter   </div> </div>
   <div class="outer"><div  class="inner">   best value </div> </div>
   <div class="outer"><div  class="inner">   busness    </div> </div>
</div>
<style>
.pricing div.outer {
    float :left ;
    Width:33% ;

}

.inner 
{
    border : 1px solid #ccc ;
    Background-color: yellow;
    -webkit-border-radius: 8px 8px 0 0;
    -moz-border-radius: 8px 8px 0 0;
    border-radius: 8px 8px 0 0;
    min-height :120px ;
     box-shadow: 0 0 8px rgba(0, 0, 0, .3);
     /*margin :10px ;*/
     padding :20px ;
      -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box; 
   /*width:180px ;*/
Width: 100%;
   display :block ;
   float: left ;
}

</style> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T11:13:50.447

您没有正确选择 div。

您可以：

```
.pricing {width: 100%}
.pricing div {
float: left;
width: 33%
} 
```

并删除一个包装 div：

```
<div class="pricing">   
   <div class="inner">  satarter   </div>
   <div class="inner">   best value </div>
   <div class="inner">   busness    </div>
</div> 
```

或者只是选择实际的 div 来增加大小：

```
.pricing {width: 100%}
.pricing div div {
float: left;
width: 33%
} 
```***

# database - 在数据库的所有表中搜索关键字的存储过程

> ID：12529301
> 
> 赞同：1
> 
> 时间：2012-09-21T11:06:29.397
> 
> 标签：database, search, stored-procedures

我正在研究一个数据库，在那里我可以搜索一个关键字（可能是名称、地址或城市等）。现在我需要创建一个存储过程来在数据库的所有表中进行搜索..!!

任何人都可以帮我解决这个问题.. !!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:37:26.097

我来回答一下，

您必须选择您想要执行搜索功能的列，

然后开始这样的事情。

```
SELECT * FROM TABLE1
LEFT OUTER JOIN TABLE2 on TABLE2.a = TABLE1.a
LEFT OUTER JOIN TABLE3 on TABLE3.a = TABLE1.a
LEFT OUTER JOIN TABLE4 on TABLE4.a = TABLE3.a

WHERE TABLE1.a LIKE '%'. Keyword . '%' OR
      TABLE2.b LIKE '%'. Keyword . '%' OR
      TABLE3.a LIKE '%'. Keyword . '%' OR
      TABLE4.c LIKE '%'. Keyword . '%' OR
      TABLE1.b LIKE '%'. Keyword . '%' 
```

ETC...

这是基本方法之一，但是 v 将有更有效的方法..

可能会帮助某人..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:47:58.397

没有数据库内置支持这种要求。因此，您必须根据环境和标准开发自己的解决方案。

现在，一个通用的解决方案是创建一个迭代所有表中的所有列并找到匹配列的过程。这通常意味着相当大的性能成本，具体取决于数据库的大小，必须避免或仔细检查性能。可以使用列类型检查等技术来减少搜索空间并避免不必要的成本。

根据您的数据库类型，其他解决方案可能可用。例如，如果您的数据库是 Oracle，我发现[这里](https://forums.oracle.com/forums/message.jspa?messageID=3360446#3360446)给出的技术很有用。此外，包括 Oracle 在内的最广泛使用的数据库支持全文搜索功能，可有效搜索文本列内的模式。您应该查阅数据库手册以找到完成这项工作的有效方法。

# android - 活动生命周期以及如何清理临时文件

> ID：12529304
> 
> 赞同：2
> 
> 时间：2012-09-21T11:06:30.497
> 
> 标签：android, android-activity, lifecycle, temporary-files, resource-cleanup

我正在编写一个应用程序，允许用户制作照片然后对其进行一些处理。

我使用 IMAGE_CAPTURE 意图启动相机，并提供将照片保存在那里的路径。

这张照片是临时的，我想在我的应用完成后将其删除。

我有一个显示照片并允许用户与之交互的活动，我认为删除它的最佳方法是使用 onDestroy 方法。

我遇到的问题是，当用户更改设备的方向时，活动被破坏并被新的活动替换，但我不能仅仅因为用户改变方向，因为以后需要它而删除文件。

那么，我能做些什么来删除这些文件呢？

是否有任何其他方法可以覆盖，例如 onAppExit，我可以在其中删除所有临时文件？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:11:09.597

我认为最好的方法是在您活动的覆盖 onBackPressed() 方法中删除它。您会看到，后按事件是唯一的退出点，这意味着用户已完成与此活动实例的交互并将更新返回到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:12:51.170

始终使用[getExtExternalCacheDir()](http://developer.android.com/reference/android/content/Context.html#getExternalCacheDir%28%29) API 来获取 sdcard 上的缓存目录。在此路径中创建所有临时文件。卸载您的应用后，此缓存将被销毁

更好地使用[getCacheDir()](http://developer.android.com/reference/android/content/Context.html#getCacheDir%28%29)作为本地存储中的缓存目录路径。当设备内存不足时，此内存将自动清除。

这是一篇解释如何手动清除缓存的帖子：[如何删除应用程序的缓存文件夹？](https://stackoverflow.com/questions/8326852/how-to-delete-cache-folder-of-app)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:15:23.833

所以声明全局布尔旋转并使用它：

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {      
    super.onRestoreInstanceState(savedInstanceState);
    rotation=false;
}
@Override
protected void onSaveInstanceState(Bundle outState) {
    // TODO Auto-generated method stub
    rotation = true;
    super.onSaveInstanceState(outState);
} 
```

然后在`onDestroy()`使用

```
if(!rotation){
//delete here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-30T01:06:49.460

You could check the `isFinishing()` method from within the `onDestroy()` as outlined in the accepted answer for this question [How to distinguish between orientation change and leaving application android](https://stackoverflow.com/questions/9620841/how-to-distinguish-between-orientation-change-and-leaving-application-android)

# linux - Timthumb 和 tmp 文件夹

> ID：12529305
> 
> 赞同：0
> 
> 时间：2012-09-21T11:06:38.490
> 
> 标签：linux, wordpress, image-resizing, timthumb

最近一个网站空间用完了。现在我发现`tmp`主目录外的文件夹中充满了这些文件：`timthumb_tmpimg_00BZyC`. 其中一些文件无法打开。为什么`timthumb`将文件存储在主目录之外？该`tmp`文件夹位于同一级别，如`dev`、`etc`、`proc`、`root`等`sys`。

该网站是否存在安全问题？有些设置不正确吗？

Timthumb 在 2.8.5 版本中由 Wordpress 插件使用`vSlider`。该网站还使用`Simple Post Thumbnails`了在 v. 2.7 中使用 Timthumb。我用 Timthumb 2.8.10 替换了两者。

或者它是否与 timthumb 创建的临时文件有关，这些临时文件从未被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:33:18.233

`/tmp`旨在成为世界可写的——尽管如果您尝试以下操作：

```
ls -l / | grep tmp 
```

您会看到它打开了粘性 ( `t`) 位，这意味着用户创建的文件只能由同一用户或超级用户删除，以防止不同用户破坏彼此的临时文件。这类似于`%SYSTEMDIR%\TEMP`Windows 中的目录。

因此，这不是 Linux 方面的安全问题，尽管它可能是您正在使用的 WordPress 插件的错误配置或错误。是否有限制保留多少缩略图的选项？

# outlook - 在微软是否可行。办公室。互操作。Outlook.userproperties 添加数组

> ID：12529307
> 
> 赞同：1
> 
> 时间：2012-09-21T11:06:52.343
> 
> 标签：outlook, vsto, ms-office, outlook-addin

是否可以`Microsoft.Office.Interop.Outlook.UserProperties`添加整数数组/列表以及如何添加？类型的使用`OlUserPropertyType.olEnumeration`导致在参数添加阶段出现异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:31:57.300

[MAPI 支持](http://msdn.microsoft.com/en-us/library/office/bb208152%28v=office.12%29.aspx)的用户属性中没有数组支持。您必须使用某些序列化数组格式（XML、CSV、JSON 等）将数组序列化为字符串 - [`OlUserPropertyType.OlText`](http://msdn.microsoft.com/en-us/library/office/bb208152%28v=office.12%29.aspx)( [*`PT_STRING8`*](http://msdn.microsoft.com/en-us/library/dd920447%28v=office.12%29.aspx))。

# c++ - char*-数组作为参数

> ID：12529309
> 
> 赞同：-3
> 
> 时间：2012-09-21T11:06:55.000
> 
> 标签：c++, arrays, multidimensional-array, parameters, function-pointers

我想将以下代码放在一个函数中：（代码不完整，但我认为您应该清楚）

```
char *parsedData[SEPERATOR];

for(int i=0; i<SEPERATOR; i++)
{
    parsedData[i]=tmp;
} 
```

该函数应如下所示：

```
int main()
{
    char *parsedData[SEPERATOR];
    Parser(WTString, parsedData);
}
int Parser(char *WTString, *parsedData[SEPERATOR])
{
    for(int i=0; i<SEPERATOR; i++)
    {
        parsedData[i]=tmp;
    }
} 
```

该代码在一个函数中运行良好。通过将代码分成两个函数，我没有得到可用的数据。

如果有人可以帮助我，我将不胜感激。我不想使用更多的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:10:50.273

`char *parsedData[SEPERATOR];` 为什么？

为什么需要`char`在 C++ 中使用原始指针数组？

你为什么不直接使用 a`std::vector<std::string>` 并为自己省去一大堆痛苦和绝望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:17:54.233

这样做的 C++ 方式如下所示：

```
#include <string>
#include <vector>

std::vector<std::string> Parser(const char *WTString)
{
    std::vector<std::string> result;
    for(std::size_t i = 0; i != SEPERATOR; ++i)
    {
        result.push_back(tmp); // whatever tmp is 
    }
    return result;
} 
```

> 我不想使用更多的库。

别担心，我的代码示例只需要标准库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:19:49.140

如果您不想使用 stl，我建议使用此功能：

```
int PointToDefault(char* target, char** parsedData, unsigned int count)
{
  for (unsigned int i=0; i<count; i++)
    {
      parsedData[i] = target;
    }
} 
```

这个电话：

```
#define SEPERATOR 15
int main()
{
  char tmp[] = "default string";

  char *parsedData[SEPERATOR];
  PointToDefault(tmp, parsedData, SEPERATOR);
} 
```

# javascript - 输入字段的掩码输出

> ID：12529310
> 
> 赞同：0
> 
> 时间：2012-09-21T11:07:03.127
> 
> 标签：javascript

一旦传递到下一页，有什么方法可以屏蔽输入字段的输出

> 进卡：123456789011

数据传递到下一页后，显示时应如下所示

> ```
> Card info: ********9011 
> ```

前 8 位数字已转换为星号，卡的后 4 位数字可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:30:28.607

如果您已经确保卡号是有效长度：

```
card = "123456789011";
output = "********" + card.substring(card.length-4); 
```

就是你所需要的。输出现在将如您所愿，尽管 Starx 的回答是动态的：它也是矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:14:37.323

像这样的东西

```
var card = "123456789011";
var str = "";

//Create the "*" for exactly 4 digits short
for(var i=1; i <= card.length-4; i++) {
   str += "*";
}
//Join the asterisk and last 4 characters
ecard = str + card.substr(card.length-4);

console.log(ecard); 
```

[**演示**](http://jsfiddle.net/fdRTR/)

# mysql - 复杂的数据不知道如何解释

> ID：12529316
> 
> 赞同：0
> 
> 时间：2012-09-21T11:07:28.143
> 
> 标签：mysql, sql, sqlite

嗨，我有一个名为 Users 的表和一个名为 friends 的表，friends 表有两种数据类型 UserID 和 FriendID，（两种数据类型的外键都是 Users 表的主键），

我需要提供一个 ID 并找到该人朋友姓名的列表，我不确定我是否错误地设计了表格或者我应该重写查询。

我的查询如下，（到目前为止它只显示了第一个匹配的人的详细信息）

```
 SELECT Users.Name 
 FROM Users 
 WHERE Users.ID = SELECT Friends.UserID 
                  FROM Friends,Users 
                  WHERE Users.ID = (Select Users.ID  
                                    From Users 
                                    WHERE Users.Username = 'John') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:14:35.157

试试这个：

```
SELECT Users.Name FROM Users WHERE Users.ID IN  -- Get names that belongt to ID's
(SELECT FriendID FROM Friends WHERE UserID =    -- All ID's of the Friends of 
(SELECT UserID FROM Users WHERE Name = 'John')) -- Johns ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:25:09.220

我已经通过将第一个 = 更改为 IN 来解决它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T11:21:35.937

这是你想要实现的吗？用户

1.  用户 ID (PK)
2.  姓名

朋友

1.  好友ID (PK)
2.  用户 ID (FK)

    `select User.Name from User u join Friend f on f.UserID = u.UserID where Name = 'John'`

# javascript - 存储下拉列表旧值并重新填充它们

> ID：12529320
> 
> 赞同：-6
> 
> 时间：2012-09-21T11:07:57.487
> 
> 标签：javascript, jquery

如何存储下拉列表的旧值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:19:43.083

> 请告诉我如何存储下拉列表的旧值。

一种可能性是使用以下[`.map()`](http://api.jquery.com/map/)函数将它们存储在临时 javascript 数组中：

```
var oldValues = ​$('#myselect option')​.map(function() {
    return { value: $(this).val(), text: $(this).text() };
}); 
```

或使用以下方法完全克隆下拉列表[`.clone()`](http://api.jquery.com/clone/)：

```
var dropdown = $('#myselect').clone(true); 
```

然后恢复它。

# objective-c - 为什么 NSMutableString 继承自 NSString 而不是相反？

> ID：12529322
> 
> 赞同：-6
> 
> 时间：2012-09-21T11:08:09.360
> 
> 标签：objective-c, ios, cocoa-touch, oop

`NSMutableString`继承自`NSString`，但是

1.  继承是一种“是”关系。所以猫“是”动物。但是一个`NSMutableString`“不是”一个`NSString`。（因为`NSString`不能变异（不能改变））

2.  通常，子类能做什么，那么基类应该能做什么。比如鱼会游泳，有些动物会游泳。但是一个`NSMutableString`可以改变，而且`NSString`根本不能改变——没有`NSString`任何东西可以改变。

那么为什么`NSMutableString`继承自`NSString`？此外，`NSMutableArray`继承自`NSArray`. 不应该`NSString`继承自`NSMutableArray instead`，而是将“不更改标志”设置为 YES ？这背后的原理是什么？

**更新：**一些答案会说：`NSMutableString`可以做所有可以做的事情`NSString`，因此`NSMutableString`继承自`NSString`. 但是这个原理能用吗？石头可以静止不动。猫可以静止不动，也可以移动。猫可以做石头能做的所有事情，但我们不能让猫继承石头，对吧？

如果我有两个游戏对象类：一个是弹性对象，一个是非弹性对象，我认为将弹性对象实现为基类是有意义的，并且非弹性对象从它继承并带有表示外部边界的标志不能变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:19:57.167

> 继承是一种“是”关系。所以猫“是”动物。但是 NSMutableString “不是” NSString

错误的。NSMutableString**是**一个 NSString，因为它可以做*任何 NSString 可以做的事情。*

> 通常，子类做什么，那么基类应该能够做什么

也错了。这是相反的方式。而是“基类可以做什么，子类也必须可以做”。

> NSString 不应该从 NSMutableArray 继承吗？

我什至看不到两者之间的关系（只要`wchar_t`不是有效的 Objective-C 对象）。

总而言之：原因是 NSMutableString 比 NSString 能做更多的事情，并且可以做任何 NSString 能做的事情，因此继承的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:11:57.403

可变版本为不可变版本添加了额外的功能，这就是它们从另一个版本继承的原因。

但是您缺少的另一个原因是具有可变/不可变版本的类实际上是隐藏了很多实现的[类集群的成员。](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/ClassCluster.html)因此，您所认为的简单类继承远不止于此。

继承还允许应用[Liskov 替换原则的便捷方法](http://en.wikipedia.org/wiki/Liskov_substitution_principle)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:54:48.983

子类<->类关系通常被称为“is-a”关系。但实际上我认为 Java`extends`更好地描述了它：子类扩展了它的基类的功能。

NSString 对象知道保存字符串和编码的所有内容。
NSMutableString 对象知道所有这些，但还知道如何更改存储的字符串，因此说“NSMutableString extends NSString”非常有意义

来自一条评论：

> 基类应该更广泛和通用。一个动物更加宽泛和笼统，就像可变字符串更加宽泛和笼统一样。不可变的字符串更“特殊”。所以这就是为什么以这种方式看待它的原因，基本情况应该是可变的情况是有道理的

NSString 更通用，因为它让您有机会创建它的另一个子类，可以添加更改功能，而无需使用 NSMutableString 的实现，为什么您会想要这样做。如果将功能放置在 NSString 本身中，您将只添加第二次，并且您的对象将携带代码，这是重复的，这将导致代码膨胀。还有很多情况下，您的字符串永远不会改变，即按钮上的标签。如果将其实例化为可变对象以及所有用于突变的代码，那将是浪费资源。

> 如果我有两个游戏对象类：一个是弹性对象，一个是非弹性对象，我认为将弹性对象实现为基类是有意义的，并且非弹性对象从它继承并带有表示外部边界的标志不能变。

不，那将是一个弱设计，因为非弹性对象将携带所有用于执行弹性行为的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:18:04.477

我认为继承意味着其原始类的扩大和多样性，尤其是功能。哺乳动物通常是陆生动物，但海豚可能生活在海中。可以说，海豚是从哺乳动物那里继承下来的，在海里生活的功能扩大了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T11:21:41.960

说继承作为“是”关系起作用是正确的，但完全是误导性的。英文中的“is a”意味着“to be”的完整含义。在继承的情况下，“is a”仅暗示子类型关系（最好对类进行编码，以便满足更强的 Liskov 替换原则要求）。

一个更好的英语术语（仍然不完美，但更好）是“X 做了 Y 所做的一切”。更好的是，在典型的 OO 术语中，这意味着“X 拥有 Y 拥有的所有成员”。

A`NSMutable*`确实是 an 的子类型，`NS*`而不是相反，因为 an 的任何（本质上非变异）消息和属性`NS*`也适用于，`NSMutable*`而后者的任何变异消息或可变属性都不适用于前者。

*通常，子类能做什么，那么基类应该能做什么。*是不正确的。事实上，情况恰恰相反。基类能做什么，派生类也应该能做什么。

至于字符串和数组，在 Objective-C 中，数组和字符串有非常不同的方法集。只需检查类文档。因此，它们在继承层次结构中完全分离（当然，除了 common `NSObject`）。

关于石头和猫的例子，石头的**唯一**特征是它静止不动，猫的**唯一**特征是它静止不动或可以移动，对于这些属性的适当定义，拥有一个非常有意义猫继承了一块石头。

# c - 错误：预期的说明符限定符列表之前

> ID：12529325
> 
> 赞同：0
> 
> 时间：2012-09-21T11:08:23.817
> 
> 标签：c, compiler-errors

我收到以下错误，

我有一个“Ac”文件，其中包含一个“bh”文件，该文件有一个“ch”文件。现在这个 ch 具有正在使用的结构，它们都是 int。这些结构以下列方式使用：

在“ch”文件中

```
struct abc{

int a;<---- error

}; 
```

在“bh”中

```
struct def{

struct abc;

}; 
```

我`struct def`在文件“Ac”文件中使用过。请帮助我知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:10:24.313

您可能有一些嵌套错误、缺失`;`或使编译器感到困惑的东西。

我建议尝试获取预处理器输出，以便在执行后查看编译器看到的内容`#includes`。

# java - 创建 JSON 对象

> ID：12529326
> 
> 赞同：1
> 
> 时间：2012-09-21T11:08:38.573
> 
> 标签：java, android, json

我正在使用 Java 向服务器发出 JSON 请求。这是以下参数。

```
{method:'SearchBySearchConfiguration',params:[{{SearchCriteria:'%arriva',
 IsAccountSearch:true,IsContactSearch:false,SearchByName:true,SearchByAddress:false
 CRMTextValues:[], CRMCurrencyValues:[]}]} 
```

我可以这样做。

```
 JSONObject json=new JSONObject();
 json.put("method", "SearchBySearchConfiguration"); 
```

如何将名称-值对中的其余参数添加到 JSON 对象？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:32:18.743

我能想到的一种方法是使用[org.json](http://www.json.org/)库。我写了一个示例来构建您的请求对象的一部分：

```
public static void main(String[] args) throws JSONException {

    JSONObject jsonObject = new JSONObject();
    jsonObject.put("method", "SearchBySearchConfiguration");

    JSONArray jsonArray = new JSONArray();
    JSONObject innerRecord = new JSONObject();
    innerRecord.put("SearchCriteria", "%arriva");
    innerRecord.put("IsAccountSearch", true);

    jsonArray.put(innerRecord);
    jsonObject.put("params",jsonArray);

    System.out.println("jsonObject :"+jsonObject);

} 
```

输出是：

```
jsonObject :{"method":"SearchBySearchConfiguration","params":[{"IsAccountSearch":true,"SearchCriteria":"%arriva"}]} 
```

另一种技术是构建类似于您的请求结构的 Java 对象。然后，您可以使用[Jackson](http://jackson.codehaus.org/)库的 ObjectMapper 类将其转换为 json。

在这两种情况下，一旦获得 json 字符串，就可以直接将其写入请求正文中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:21:14.793

```
JSONObject json=new JSONObject();
  json.put("method", "SearchBySearchConfiguration"); 
  JSONArray paramsArr = new JSONArray();
    JSONObject arrobj = new JSONOject();
      arrobj.put("SearchCriteria","%arriva");
      arrobj.put("IsAccountSearch","true");
      arrobj.put("IsContactSearch","false");
      arrobj.put("SearchByName","true");
      arrobj.put("SearchByAddress","false");
      arrobj.put("CRMTextValues",new JSONArray());
      arrobj.put("CRMCurrencyValues",new JSONArray());
    paramsArr.put(arrobj);
  json.put("params",paramsArr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:21:59.040

最好为此使用[gson](http://code.google.com/p/google-gson/)。

首先，您需要创建具有以下成员的类：

```
public class TestClass{

    private String method;
    private ParamClass params;

    }
public class ParamClass{
    private String SearchCriteria;
    private boolean IsAccountSearch;
    private boolean IsContactSearch;
    private boolean SearchByName;
    private boolean SearchByAddress;
    private String[] CRMTextValues;
    private String[] CRMCurrencyValues;
} 
```

用法 ：

序列化：

```
Gson gson = new Gson();    
String jsonString = gson.toJson(testClassObject); 
```

反序列化：

```
Gson gson = new Gson();
TestClass testClassObject = gson.fromJson(jsonString , TestClass.class); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:22:58.153

**请参阅下面的示例，其中返回 JSONArray，然后我如何将其转换为 JSONObject 形式...**

```
public JSONArray go() throws IOException, JSONException {

JSONArray json = readJsonFromUrl("http://www.xxxxxxxx.com/AppData.aspx");

return json;
 }

JSONArray jarr;

for(int i=0 ; i<jarr.length() ; i++){

JSONObject jobj = jarr.getJSONObject(i);

String mainText = new String();
String provText = new String();
String couText = new String();      

try{

mainText = jobj.getString("Overview");
System.out.println(mainText);
}catch(Exception ex){}

try{

JSONObject jProv = jobj.getJSONObject("Provider");
provText = jProv.getString("Name");
System.out.println(provText);
}catch(Exception ex){}

try{                

JSONObject jCou = jobj.getJSONObject("Counterparty");
couText = jCou.getString("Value");
System.out.println(couText);
}catch(Exception ex){} 
```

**Jackson 做 JSON Parsing 的效率很高**

**请参阅此链接：**

[http://jackson.codehaus.org/](http://jackson.codehaus.org/)

**Gson 由 google 提供，这也是处理 JSON 的好方法。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T11:12:01.337

您可以创建`JSONArray`并将该数组放入`JSONObject`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T11:39:06.707

要添加**params**，`JSONArray`使用。在 params 中，我们用于`JSONObject`添加 SearchByAddress、IsAccountSearch 等数据。参考[http://www.mkyong.com/java/json-simple-example-read-and-write-json/](http://www.mkyong.com/java/json-simple-example-read-and-write-json/)

```
package com.test.json;

import java.io.FileWriter;
import java.io.IOException;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.JSONValue;

public class JsonSimpleExample {
     public static void main(String[] args) {

    JSONObject obj = new JSONObject();
    obj.put("method", "SearchBySearchConfiguration");

    JSONArray list = new JSONArray();
    JSONObject innerObj = new JSONObject();

    innerObj.put("SearchCriteria","%arriva" );
    innerObj.put("IsAccountSearch",true);
    innerObj.put("IsContactSearch",false);
    innerObj.put("SearchByName",true);
    innerObj.put("SearchByAddress",false);
    innerObj.put("CRMTextValues",new JSONArray());
    innerObj.put("CRMCurrencyValues",new JSONArray());

    list.add(innerObj);

    obj.put("params", list);
    System.out.print(obj);

     }

} 
```

# javascript - 如何根据属性（不是索引）合并 2 个数组

> ID：12529329
> 
> 赞同：1
> 
> 时间：2012-09-21T11:08:51.790
> 
> 标签：javascript, jquery

正如我们所知，`jQuery.extend(true, obj1, obj2)`将对象的属性从 obj2 深度复制到 obj1 的方法。如果是数组，它会根据索引复制属性。但是我需要根据以下示例基于某些属性（例如，在我的情况下为 id）进行复制：

```
obj1 = [{id:"id1", name:"name1"},{id:"id2", name:"name2"}]
obj2 = [{id:"id3", name:"name3"}{id:"id1", name:"name1_modified"}] 
```

`jQuery.extend`将返回：

```
[{id:"id3", name:"name3"}{id:"id1", name:"name1_modified"}] 
```

但我需要输出为：

```
[{id:"id1", name:"name1_modified"},{id:"id2", name:"name2"}{id:"id3", name:"name3"}] 
```

有什么方法/库可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:22:57.743

我在处理我的项目时遇到了同样的问题。所以我用jquery扩展来根据它的属性来完成数组合并。如果要基于属性合并数组，请将属性名称作为合并函数中的最后一个参数传递。我创建了一个[jsfiddle](http://jsfiddle.net/WE7LN/1/)，在浏览器控制台中查看结果。

```
function merge() {
    var options, name, src, copy, copyIsArray, clone, targetKey, target = arguments[0] || {}, i = 1, length = arguments.length, deep = false;
    var currentId = typeof arguments[length - 1] == 'string' ? arguments[length - 1] : null;
    if (currentId) {
        length = length - 1;
    }
    // Handle a deep copy situation
    if (typeof target === "boolean") {
        deep = target;
        target = arguments[1] || {};
        // skip the boolean and the target
        i = 2;
    }

    // Handle case when target is a string or something (possible in deep
    // copy)
    if (typeof target !== "object" && !jQuery.isFunction(target)) {
        target = {};
    }

    // extend jQuery itself if only one argument is passed
    if (length === i) {
        target = this;
        --i;
    }

    for (; i < length; i++) {
        // Only deal with non-null/undefined values
        if ((options = arguments[i]) != null) {
            // Extend the base object
            for (name in options) {
                if (!options.hasOwnProperty(name)) {
                    continue;
                }
                copy = options[name];
                var mm = undefined, src = undefined;
                if (currentId && jQuery.isArray(options) && jQuery.isArray(target)) {
                    for (mm = 0; mm < target.length; mm++) {
                        if (currentId && (isSameString(target[mm][currentId], copy[currentId]))) {
                            src = target[mm];
                            break;
                        }
                    }
                }
                else {
                    src = target[name];
                }

                // Prevent never-ending loop
                if (target === copy) {
                    continue;
                }
                targetKey = mm !== undefined ? mm : name;
                // Recurse if we're merging plain objects or arrays
                if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {
                    if (copyIsArray) {
                        copyIsArray = false;
                        clone = src && jQuery.isArray(src) ? src : [];

                    }
                    else {
                        clone = src && jQuery.isPlainObject(src) ? src : {};
                    }

                    // Never move original objects, clone them
                    if (currentId) {
                        target[targetKey] = merge(deep, clone, copy, currentId);
                    }
                    else {
                        target[targetKey] = merge(deep, clone, copy);
                    }

                    // Don't bring in undefined values
                }
                else if (copy !== undefined) {
                    target[targetKey] = copy;
                }
            }
        }
    }

    // Return the modified object
    return target;
};
 function isSameString (a , b){
        return a && b && String(a).toLowerCase() === String(b).toLowerCase();
    }
obj1 = [ {
    id : "id1",
    name : "name1"
}, {
    id : "id2",
    name : "name2"
} ]
obj2 = [ {
    id : "id3",
    name : "name3"
}, {
    id : "id1",
    name : "name1_modified"
} ];
console.log(merge(true, obj1, obj2, "id"));​ 
```

# java - 如何使用 Tab 键聚焦 ap:selectBooleanButton 组件？

> ID：12529333
> 
> 赞同：2
> 
> 时间：2012-09-21T11:09:17.137
> 
> 标签：java, jsf-2, primefaces

我们开始使用 PrimeFaces 3.4、JSF 2.0 和 Tomcat 7.0 进行开发。我们面临的问题是，当我们制作表单页面时，我们可以使用所有 PrimeFaces 输入组件上的选项卡按钮进行导航，除了[`<p:selectBooleanButton>`](http://www.primefaces.org/showcase/ui/selectBooleanButton.jsf). 例如，

```
<h:form id="formId">
    <p:inputText id="inputId1" />
    <p:inputText id="inputId2" />
    <p:selectBooleanButton id="buttonId" onLabel="Yes" offLabel="No" />
    <p:inputText id="inputId3" />
    <p:inputText id="inputId4" />
</h:form> 
```

按 T​​ab 键`inputId2`直接进入`inputId3`。这是预期的行为吗？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T13:30:43.087

`<p:selectBooleanButton>`这是因为PrimeFaces 实际呈现的状态复选框的方式[`SelectBooleanButtonRenderer`](http://code.google.com/p/primefaces/source/browse/primefaces/tags/3_4/src/main/java/org/primefaces/component/selectbooleanbutton/SelectBooleanButtonRenderer.java)：

```
<div id="formId:buttonId" type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only">
    <input id="formId:buttonId_input" name="formId:buttonId_input" type="checkbox" class="ui-helper-hidden">
    <span class="ui-button-text">no</span>
</div> 
```

`display:none`该复选框被类中的 CSS属性完全隐藏，`.ui-helper-hidden`因此**永远无法**获得焦点。

如果我们查看对应的复选框[`<p:selectBooleanCheckbox>`](http://www.primefaces.org/showcase/ui/selectBooleanCheckbox.jsf)，它也将复选框替换为一个视觉上更吸引人的实际上是可聚焦的小部件*，*然后我们会看到该复选框并没有被 CSS 完全隐藏，而是通过被包裹在`<div>`绝对不可见的由 CSS`position:absolute`在`.ui-helper-hidden-accessible`类中定位，因此仅被复选框小部件覆盖：

```
<div id="formId:checkboxId" class="ui-chkbox ui-widget">
    <div class="ui-helper-hidden-accessible">
        <input id="formId:checkboxId_input" name="formId:checkboxId_input" type="checkbox">
    </div>
    <div class="ui-chkbox-box ui-widget ui-corner-all ui-state-default">
        <span class="ui-chkbox-icon"></span>
    </div>
</div> 
```

我不会考虑无法`<p:selectBooleanButton>`聚焦的“预期”或“直觉”行为，如果我是你，我肯定会将这个 UX 问题[报告](http://code.google.com/p/primefaces/issues/list)给 PrimeFaces。

* * *

同时，解决此问题的最佳方法是创建一个自定义渲染器，该渲染器将覆盖[`encodeMarkup()`](http://code.google.com/p/primefaces/source/browse/primefaces/tags/3_4/src/main/java/org/primefaces/component/selectbooleanbutton/SelectBooleanButtonRenderer.java#57)PrimeFaces 的方法，`SelectBooleanButtonRenderer`如下所示，以便`class="ui-helper-hidden"`从复选框中删除 并将其包装在 a 中`<div class="ui-helper-hidden-accessible>`，就像`<p:selectBooleanCheckbox>`正在做的那样：

```
public class MySelectBooleanButtonRenderer extends SelectBooleanButtonRenderer {

    @Override
    protected void encodeMarkup(FacesContext context, SelectBooleanButton button) throws IOException {
        ResponseWriter writer = context.getResponseWriter();
        String clientId = button.getClientId(context);
        boolean checked = Boolean.valueOf(ComponentUtils.getValueToRender(context, button));
        boolean disabled = button.isDisabled();
        String inputId = clientId + "_input";
        String label = checked ? button.getOnLabel() : button.getOffLabel();
        String icon = checked ? button.getOnIcon() : button.getOffIcon();

        //button
        writer.startElement("div", null);
        writer.writeAttribute("id", clientId, "id");
        writer.writeAttribute("type", "button", null);
        writer.writeAttribute("class", button.resolveStyleClass(checked, disabled), null);
        if(disabled) writer.writeAttribute("disabled", "disabled", null);
        if(button.getTitle()!= null) writer.writeAttribute("title", button.getTitle(), null);
        if(button.getStyle() != null) writer.writeAttribute("style", button.getStyle(), "style");

        //input
        writer.startElement("div", null); // <-- Added.
        writer.writeAttribute("class", "ui-helper-hidden-accessible", null); // <-- Added.
        writer.startElement("input", null);
        writer.writeAttribute("id", inputId, "id");
        writer.writeAttribute("name", inputId, null);
        writer.writeAttribute("type", "checkbox", null);
        // writer.writeAttribute("class", "ui-helper-hidden", null); <-- Removed.

        if(checked) writer.writeAttribute("checked", "checked", null);
        if(disabled) writer.writeAttribute("disabled", "disabled", null);
        if(button.getOnchange() != null) writer.writeAttribute("onchange", button.getOnchange(), null);

        writer.endElement("input");
        writer.endElement("div"); // <-- Added.

        //icon
        if(icon != null) {
            writer.startElement("span", null);
            writer.writeAttribute("class", HTML.BUTTON_LEFT_ICON_CLASS + " " + icon, null);
            writer.endElement("span");
        }

        //label
        writer.startElement("span", null);
        writer.writeAttribute("class", HTML.BUTTON_TEXT_CLASS, null);
        writer.writeText(label, "value");
        writer.endElement("span");

        writer.endElement("div");
    }

} 
```

*（查看该`//input`部分，我添加了`<--`注释来解释我在复制粘贴的原始源代码中添加/删除了哪些行）*

要让它运行，请在以下位置注册它`faces-config.xml`：

```
<render-kit>
    <renderer>
        <component-family>org.primefaces.component</component-family>
        <renderer-type>org.primefaces.component.SelectBooleanButtonRenderer</renderer-type>
        <renderer-class>com.example.MySelectBooleanButtonRenderer</renderer-class>
    </renderer>
</render-kit> 
```

*（`component-family`和`renderer-type`值是从`SelectBooleanButton`组件中提取的）*

这对我有用，嗯，有点。获得焦点，`<p:selectBooleanButton>`您可以使用空格键切换布尔状态。但是，焦点以任何方式在视觉上都不可见。这需要在 JavaScript 端解决。当隐藏的复选框获得焦点时，`<div class="ui-button">`代表按钮应该获得一个类。`.ui-state-focus`以下 jQuery 实现了这一点：

```
$(".ui-button input[type=checkbox]").focus(function() {
    $(this).closest(".ui-button").addClass("ui-state-focus");
}).blur(function() {
    $(this).closest(".ui-button").removeClass("ui-state-focus");
}); 
```

[现在它完全适合我](http://screencast.com/t/C37ep1hAxA)。

在真正的 PrimeFaces 源代码中，这应该通过文件`init()`的`PrimeFaces.widget.SelectBooleanButton`功能来解决`forms.js`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T14:47:36.407

以下是应用 BalusC 提出的完全相同的解决方法的另一种方法。

好处：

*   您只需要创建和声明渲染器类：无需向您的 facelet 添加更多 JavaScript 代码以添加聚焦状态的视觉线索
*   渲染器扩展并没有取代整个超级`encodeMarkup`实现，而是装饰它；如果 PF 升级稍微改变了超级实现，这应该会更健壮一些，除非它们完全改变 DOM 结构和/或计算 inputId 的方式

这个想法是添加一个操作原始标记的 JavaScript 脚本，以便使用 BalusC 提出的相同技术（基于应用适当的 CSS 类）为组件提供可聚焦性。

```
package com.example;

import java.io.IOException;

import javax.faces.context.FacesContext;
import javax.faces.context.ResponseWriter;

import org.primefaces.component.selectbooleanbutton.SelectBooleanButton;
import org.primefaces.component.selectbooleanbutton.SelectBooleanButtonRenderer;

public class MySelectBooleanButtonRenderer extends SelectBooleanButtonRenderer {

    @Override
    protected void
            encodeMarkup(FacesContext context, SelectBooleanButton button)
                    throws IOException {
        super.encodeMarkup(context, button);
        ResponseWriter writer = context.getResponseWriter();
        writer.startElement("script", null);
        writer.writeAttribute("type", "text/javascript", null);
        writer.append(getMakeButtonFocusableScript(button.getClientId(context)));
        writer.endElement("script");
    }

    protected String getMakeButtonFocusableScript(final String clientId) {
        String inputId = clientId + "_input";
        return "{\r\n"
                + "  var input = document.getElementById('"
                + inputId
                + "');\r\n"
                + "  input.classList.remove('ui-helper-hidden');\r\n"
                + "  var mainDiv = document.getElementById('"
                + clientId
                + "');\r\n"
                + "  var newDiv = document.createElement('div');\r\n"
                + "  newDiv.setAttribute('class', 'ui-helper-hidden-accessible');\r\n"
                + "  newDiv.appendChild(input);\r\n"
                + "  mainDiv.appendChild(newDiv);\r\n"
                + "  input.onfocus = function() {document.getElementById('"
                + clientId + "').classList.add('ui-state-focus'); };\r\n"
                + "  input.onblur = function() { document.getElementById('"
                + clientId + "').classList.remove('ui-state-focus'); };\r\n"
                + "}";
    }
} 
```

# c# - 资源字典与 .cs 文件

> ID：12529338
> 
> 赞同：2
> 
> 时间：2012-09-21T11:10:00.567
> 
> 标签：c#, resources, constants, embedded-resource

我有一些我想在应用程序级别拥有的常量，例如存储过程名称、用户消息等。我改变这些资源的可能性很小。

请让我知道在我们的应用程序中保持常量的好习惯。

资源字典是否优于 .cs 文件。

问候机管局

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:00:40.360

对于初学者来说，你在思考这些东西时走在了正确的轨道上。魔术字符串和其他魔术值之所以不好，有很多原因。

以下是我们使用的一些准则：

1.  常量只允许用于 REAL-WORLD 常量。如果您需要使用“My bonnie lie over the {0}”作为格式字符串，请使用 RESOURCE。
2.  可能会改变的事情，永远，不是一成不变的。对于这些东西，你有几个选择。
3.  如果它不是你的逻辑的一部分，它就不会出现在源代码中。它位于以下外部位置之一并在源代码中被引用，因此您不必重新编译即可进行更改。

我们通常每个程序集有三个文件，根据需要：首先，一个常量文件。这通常和 Constants.cs 一样简单。将您的常量（以及非编译时常量且永不更改的只读静态变量）放入此文件中。您还可以包含可配置但必须具有默认值的内容。

```
internal class Constants
{
    public const LogLevel DEFAULT_LOG_LEVEL = LogLevel.Error;

    public static readonly string APP_NAME = Configuration.ApplicationName ?? "Test Application";
} 
```

其次，一个读取配置值并将它们作为静态值返回的文件。这通常是 Configuration.cs，负责返回所有配置值。这使您不必重新编译以更改连接字符串、处理设置或其他内容。实际值位于 .ini 文件、web.config 或 app.config、数据库表或源代码之外的其他位置等位置。如果在下面的示例中，您可以在整个代码中使用 ConfigurationManager.AppSettings["ApplicationName"]，但是如果您想更改该 appsetting 的键怎么办？你必须找到一个重命名它的所有引用。只需要额外的 30 秒来做这样的事情，以及所有的 Configuration.ApplicationName。

```
internal class Configuration
{
    public static string ApplicationName
    {
        get
        {
            return ConfigurationManager.AppSettings["ApplicationName"];
        }
    }
} 
```

最后，一个或多个资源文件。这是我们放置图标、图像、不寻常字体、本地化（或只是可更改）字符串等用于显示目的的地方......

没有特定的正确方法来做这些事情，但我认为以上内容将为您提供一个起点。

# c# - 如何从具有 int 索引的列表<> 中获取对象？

> ID：12529341
> 
> 赞同：1
> 
> 时间：2012-09-21T11:10:08.713
> 
> 标签：c#, list

如何从具有 int 索引的列表<> 中获取对象？

```
List<BasicLow> _list = new List<BasicLow>();

int positionInList=0; //for example from position zero!

BasicLow aux = new BasicLow();

aux = _list.**WHAT I PUT HERE?** 
```

谢谢！

编辑

谢谢，但我试试这个（aux = _list [positionInlist];）！给我一个错误“索引超出范围。必须是非负数并且小于集合的大小。”

但我保证 positionInlist 存在于 _list 上！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:12:04.713

尝试

```
aux = _list[positionInList]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:12:11.037

试试这样：

```
aux = _list[positionInList]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:12:36.780

您需要使用[索引器](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx)：

```
BasicLow aux = _list[positionInList]; 
```

注意：如果您要立即替换为查找结果，则初始化新对象是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:12:36.257

你不能这样做吗？

```
aux = _list[positionInList]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T11:13:08.657

```
_list[positionInList] 
```

会给你对象

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T11:39:12.533

您的示例显示列表中没有放置任何内容。如果列表为空，则没有有效索引的索引。

# javascript - Disqus 评论线程告诉我升级到 IE9。. . 使用 IE9 时

> ID：12529342
> 
> 赞同：0
> 
> 时间：2012-09-21T11:10:14.050
> 
> 标签：javascript, html, disqus

Disqus 评论线程在除 IE9 之外的所有浏览器中都运行良好，我收到一条错误消息，告诉我升级到 IE9。关于我如何摆脱这个的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:12:35.053

是不是您在 IE 开发工具中以不同的模式运行（按 f12 并查看您在哪种浏览器模式和文档模式下运行）。

# regex - 信用卡公司会发布官方正则表达式吗？

> ID：12529345
> 
> 赞同：1
> 
> 时间：2012-09-21T11:10:21.333
> 
> 标签：regex, credit-card

我们都见过（并且可能使用过）用于验证各种信用卡的众多正则表达式模式之一......

卡公司自己是否发布了任何“官方”正则表达式模式？

这些模式都是社区简单提交的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:25:10.803

没有可以完美验证卡号的正则表达式模式。现有的各种解决方案都是非常基本的检查，仅涵盖前几位数字。实际上，在尚未由任何发卡机构分配卡的范围内，通常存在巨大差距。

您可以检查前几位数字、卡片长度和[luhn 校验位](http://en.wikipedia.org/wiki/Luhn_algorithm#Calculation_of_the_check_digit)，但完全验证卡片的唯一方法是将其提交给处理器进行验证和授权。

# html - Get HTML file produced by JavaDocs

> ID：12529351
> 
> 赞同：0
> 
> 时间：2012-09-21T11:10:42.990
> 
> 标签：html, javadoc

I understand that *Javadoc is a documentation generator from Sun Microsystems for generating API documentation in HTML format from Java source code.* I infer that the documentation is stored onto an HTML file.

Is there a way I can access it?

If yes where is it stored?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:29:27.617

The word **Javadoc** can refer to

*   special comments in Java source files (preceding a declaration, and of the form `/** ... */`)
*   a program which converts these comments (as well as the declarations themselves) to readable output
*   the output itself, usually in HTML form.

The [Javadoc program](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html) is contained in Sun's (or now Oracle's) Java Development Kit (JDK).

If you have installed a JDK (which you should if you do Java development), you can call it on the command line, passing it the package names to document, or some source file names. You should also indicate the output directory, using the `-d` option.

I'm assuming the following directory (and package) structure in my example below:

*   current directory
    *   source
        *   de
            *   dclj
                *   paul
                    *   examples
                        *   HelloWorld.java [containing `package de.dclj.paul.examples;` and `public class HelloWorld { ... }`]
    *   docs

Then you use the following command line:

```
javadoc -sourcpath source -d docs de.dclj.paul.examples 
```

It will then create a the documentation in the docs directory, with an `index.html` which you can open in your web browser, and other files reachable from it.

For more details have a look at the documentation linked above. For an example output, have a look at the [Java Standard API Javadoc](http://docs.oracle.com/javase/7/docs/api/).

If you are using an IDE, you likely have a *generate Javadoc* button there, and the IDE might even show the formatted output of documentation of single classes or methods on the fly.

# jsf - 我可以用吗 在自动完成组件内？

> ID：12529353
> 
> 赞同：3
> 
> 时间：2012-09-21T11:10:46.290
> 
> 标签：jsf

我可以`<f:setPropertyActionListener>`在自动完成组件中使用吗？

例如，自动完成使用 managedbean `mbAC`，我想将`cliCod`它发送到另一个 bean：

```
<f:setPropertyActionListener target="#{targetBean.cliCod}" value="#{mbAC}" /> 
```

这`<f:setPropertyActionListener>`是正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:48:52.377

`<f:setPropertyActionListener>`仅在组件实现接口内部起作用，[`ActionSource`](http://docs.oracle.com/javaee/6/api/javax/faces/component/ActionSource.html)例如`<h:commandButton>`, `<h:commandLink>`。目前尚不清楚您在谈论什么自动完成组件，但 PrimeFaces`<p:autoComplete>`没有实现它。

您需要寻找替代解决方案，例如将 bean 放在正确的范围内和/或使用`@ManagedProperty`和/或使用`<p:ajax>`代替。确切的解决方案取决于您没有说明的具体功能要求。

在未来的问题中，如果你问如何实现给定的功能需求，而不是问如何实现一个你认为是正确的解决方案但毕竟不是的解决方案，这对我们和你自己会更有帮助。

# eclipse - 无法在 Eclipse Indigo 上安装 glassfish 服务器 -EJB 3.1-

> ID：12529357
> 
> 赞同：0
> 
> 时间：2012-09-21T11:11:06.047
> 
> 标签：eclipse, glassfish, ejb-3.1, eclipse-indigo, eclipse-juno

我正面临 glassfish 服务器适配器的问题。每当我下载适配器时，我都无法使用它，因为我在向导中看不到它。

我使用“下载附加服务器适配器”下载它，但即使成功下载，我仍然无法选择使用 glassfish，因为它的适配器没有显示在屏幕上。

有人可以帮忙吗？

![在此处输入图像描述](../Images/e263a1a88b9c14aff744a69448fbb0c6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:49:04.203

嗨，我找到了解决方案，

首先我使用的是 Windows 7 ,64 位

因此，当我将 JRE 1.6 用于 64 位并使用“以管理员身份运行”运行 eclipse 时，适配器下载并出现在向导中。

谢谢

# iphone - RedPark Cable readBytesAvailable 每次读取两次

> ID：12529360
> 
> 赞同：0
> 
> 时间：2012-09-21T11:11:10.137
> 
> 标签：iphone, objective-c, ipad, serial-port

我无法在任何地方找到这些信息。使用 TTL 版本的 redpark 电缆可以发送多长时间的字符串？

当我从 Arduino 打印完整的串行内容时，会调用以下委托方法两次，字符串示例如下：144;480,42;532,40;20e

```
- (void) readBytesAvailable:(UInt32)length{ 
```

当我使用检索可用数据的新函数方法 [getStringFromBytesAvailable] 时，我只会得到 144;480,42;532,40; 然后再次调用整个函数，字符串现在包含字符串的其余部分：20e

以下方法适用于附加两个字符串，但前提是数据传输速率“慢”（每秒 1 次，我希望至少每秒 10 次）。

-

```
 (void) readBytesAvailable:(UInt32)length{

    if(string && [string rangeOfString:@"e"].location == NSNotFound){
        string = [string stringByAppendingString:[rscMgr getStringFromBytesAvailable]];
        NSLog(string);
        finishedReading = YES;
    }
    else{
        string = [rscMgr getStringFromBytesAvailable];

    }

    if (finishedReading == YES) 
     {

        //do stuff

     }
        finishedReading = NO;
        string = nil;
    }

} 
```

但是你能告诉我，如果我写一个“长”字符串，为什么这些方法会被调用两次，以及如何避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:36:00.303

这就是串行端口的工作方式。你不能也不需要避免这些问题。软件/硬件的任何级别都没有尝试保持您的串行数据流完好无损，因此在您的代码中对此做出任何假设都是错误的。串行数据只是一个字节流，没有打包的概念。因此，您必须处理可能必须读取部分数据并稍后读取其余数据的事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:05:42.307

由于您的程序片段运行速度比发送字符串所需的时间快，因此您需要捕获字节并将它们附加到字符串中。

如果串行数据以回车结束，您可以测试它以了解您何时收到整个字符串。

然后你可以让你的 Arduino 每秒发送 10 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T02:05:36.467

事实上，RedPark 提供的 redparkSerial 头文件中的 serialPortConfig 确实为您提供了比您可能意识到的更多的配置控制。readBytesAvailable:length 方法是抽象的，仅在满足以下两个条件之一时调用：主缓冲区中的数据超出 rxForwardingTimeout 值（默认设置为 100 毫秒）或达到 rxForwardCount（默认设置为 16 个字符）。

因此，在您的情况下，看起来您在初始读取后仍然在缓冲区中获得数据，这意味着将再次调用 readBytesAvailable:length 方法（从主运行循环）以检索剩余数据。我建议使用 rxForwardingTimeout 和 rxForwardCount 直到它按您的预期执行。

不过，正如已经提到的，我建议至少在数据包的末尾添加一个标志（不必是回车），以进行识别。

另外，这里有一些很好的建议：[如何为嵌入式系统设计串行命令协议？](https://stackoverflow.com/questions/1445387/how-do-you-design-a-serial-command-protocol-for-an-embedded-system)

祝你好运！

# iphone - 将应用程序提交到与 iPhone 5 屏幕不兼容的应用程序商店

> ID：12529361
> 
> 赞同：3
> 
> 时间：2012-09-21T11:11:11.710
> 
> 标签：iphone, ios, app-store, iphone-5

我提交了一个与 iPhone 5 屏幕不兼容的应用程序。我收到了 App Store 团队的回复如下：

> 亲爱的xxx，
> 
> 如果您正在为 iPhone 5 和 iPod touch（第 5 代）更新您的应用程序，您必须提供额外的屏幕截图以支持 App Store 的新屏幕尺寸。新的屏幕截图尺寸为： 640 x 1136（纵向） 640 x 1096（纵向） 1136 x 640（横向） 1136 x 600（横向） 要提供新的屏幕截图，请转到 iTunes Connect 上“管理您的应用程序”模块中的“版本详细信息”页面. 如果您交付的新应用程序二进制文件利用了 iPhone 5 或 iPod touch（第 5 代）的新屏幕尺寸而没有新尺寸的屏幕截图，则您的应用程序的状态将更改为 Missing Screenshot。在您上传尺寸正确的屏幕截图之前，我们不会审核您的应用。您还需要为您在 iTunes Connect 上设置的任何添加的本地化上传屏幕截图。有关屏幕截图要求的更多信息，请参阅 iTunes Connect 开发人员指南中的资产规范部分。问候， App Store 团队

由于我不是针对 iPhone 5 的应用程序，我应该遵循哪些步骤重新提交它？任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:24:42.390

您最近提交的应用程序真的被拒绝了吗？请重新检查其状态，因为我什至没有提交新版本就收到了相同的电子邮件。这可能只是一个巧合！

我认为这只是 Apple 发给所有开发者的一般说明。此外，它还显示“**如果**您正在为 iPhone 5 更新您的应用程序......”。所以，如果你**不是**，你可以放心地忽略其余的。

# c# - Jameleon 等功能测试工具

> ID：12529364
> 
> 赞同：0
> 
> 时间：2012-09-21T11:11:38.433
> 
> 标签：c#, .net, functional-testing

.net 世界中是否有任何功能测试工具，如 Jameleon（java 中）？

**目的**我正在测试用 C# 编写的 API。我不想编写单元或集成测试来测试它们（从 QA 的角度来看）。所以，我只想建立一个自定义工具，通过它我可以决定传递各种测试参数和文件。

只是为了完成，Jameleon 提供了 Jelly 脚本，这些脚本与 xml 一样易于配置。然后可以像测试用例一样执行这些果冻脚本。jelly 脚本的每个标签都由执行所需功能的 Java 类支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:20:28.150

看看[SpecFlow](http://www.specflow.org/specflownew/)，它是.Net的[Cucumber](http://cukes.info/)

# java - 如何区分作为解析的 json 对象 Jackson Json 解析器返回的类似字段名？

> ID：12529365
> 
> 赞同：0
> 
> 时间：2012-09-21T11:11:43.043
> 
> 标签：java, json, parsing, jackson

我有一个 Json 文本，在下面我得到两个相似的名称，用于所需的字段名称“localscope”

```
{"processingTime":"0.002522",
 "version":"1.6.0.801 build 120621",
 "documentLength":"22",
 "document":{
   "administrativeScope":{
     "woeId":"23424848",
     "type":"Country",
     "name":"India",
     "centroid":{
       "latitude":"21.7866","longitude":"82.7948"}
     },
     "geographicScope":{
       "woeId":"23424848","type":"Country","name":"India","centroid":{"latitude":"21.7866","longitude":"82.7948"}},
        "localScopes":[{"localScope":{"woeId":"55953775","type":"Suburb","name":"Vinod Nagar, Rajkot, Gujarat, IN (Suburb)","centroid":{"latitude":"22.2554","longitude":"70.8101"},"southWest":{"latitude":"22.2463","longitude":"70.8003"},"northEast":{"latitude":"22.2645","longitude":"70.8199"},
         "ancestors":[{"ancestor":{"woeId":"2295404","type":"Town","name":"Rajkot"}},{"ancestor":{"woeId":"12586430","type":"District","name":"Rajkot"}},{"ancestor":{"woeId":"2345743","type":"State","name":"Gujarat"}},{"ancestor":{"woeId":"23424848","type":"Country","name":"India"}}]}},{"localScope":{"woeId":"23424848","type":"Country","name":"India (Country)","centroid":{"latitude":"21.7866","longitude":"82.7948"},"southWest":{"latitude":"6.7471","longitude":"68.0323"},"northEast":{"latitude":"36.2617","longitude":"97.403"},"ancestors":"\n"}}],"extents":{"center":{"latitude":"22.2554","longitude":"70.8101"},"southWest":{"latitude":"6.7471","longitude":"68.0323"},"northEast":{"latitude":"36.2617","longitude":"97.403"}},"0":{"placeDetails":{"placeId":"1","place":{"woeId":"23424848","type":"Country","name":"India","centroid":{"latitude":"21.7866","longitude":"82.7948"}},"placeReferenceIds":"1","matchType":"0","weight":"1","confidence":"10"}},"1":{"placeDetails":{"placeId":"2","place":{"woeId":"55953775","type":"Suburb","name":"Vinod Nagar, Rajkot, Gujarat, IN","centroid":{"latitude":"22.2554","longitude":"70.8101"}},"placeReferenceIds":"2","matchType":"0","weight":"1","confidence":"10"}},
   "referenceList":[
    {"reference":{
     "woeIds":"23424848",
     "placeReferenceId":"1",
     "placeIds":"1",
      "start":"17",
      "end":"22",
      "isPlaintextMarker":"1",
      "text":"india",
      "type":"plaintext",
      "xpath":""}
     },{
     "reference":{
      "woeIds":"55953775",
      "placeReferenceId":"2",
      "placeIds":"2",
      "start":"5",
      "end":"16",
      "isPlaintextMarker":"1",
      "text":"vinod nagar",
      "type":"plaintext",
      "xpath":""
    }
   }
  ]
 }
} 
```

现在我试图找出 localscope 但由于有两个 localscope 作为字段，我的以下代码没有给我想要的结果

```
private boolean parseLocal(JsonParser jp, PlaceMakerObject obj) throws IOException {

        while (jp.nextToken() != JsonToken.END_OBJECT) {
            String fieldname = jp.getCurrentName();   
 if ("localscope".equalsIgnoreCase(fieldname)) {
                while (jp.nextToken() != JsonToken.END_OBJECT) {
                    String fieldname2 = jp.getCurrentName();
                   // System.out.println(fieldname2);
                    if ("woeid".equalsIgnoreCase(fieldname2)) {
                        jp.nextToken();
                        obj.setWoeid(jp.getText());
                    }

                    if ("type".equalsIgnoreCase(fieldname2)) {
                        jp.nextToken();
                        System.out.println(jp.getText());
                        obj.setType(jp.getText());
                    } 
```

因此，当我打印类型时，它会从两个 localscopes 打印郊区和国家/地区的字段，但是我只想要一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:23:35.723

为什么要使用 Streaming API 而不是数据绑定？只需将 JSON 绑定到 POJO（您可以构建类，省略您不关心的字段，配置映射器以忽略未知属性），然后选择您想要的值。

# c# - 当我将数据发布到 WCF 服务时，我的 Java 代码总是返回错误请求 400

> ID：12529367
> 
> 赞同：1
> 
> 时间：2012-09-21T11:11:55.457
> 
> 标签：c#, wcf, post, java-me

我有这个 WCF 服务：

```
 [ServiceContract]
        public interface IService
        {
            [OperationContract]
            [WebInvoke(Method = "POST", UriTemplate = "/PostComments", BodyStyle = WebMessageBodyStyle.Wrapped,
                       RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
            string PostComments(string ItemId, string Comments, string FullName, string Location);
        }

    [DataContract]
        public class Comment
        {
            [DataMember]
            public string ItemId { get; set;}
            [DataMember]
            public string Comments { get; set;}
            [DataMember]
            public string FullName { get; set;}
            [DataMember]
            public string Location { get; set;}
        }

public class Service : IService
    {
       int i = 0;
       public string PostComments(string ItemId, string Comments, string FullName, string Location)
         {
            int Id;
            Id = Convert.ToInt32(ItemId);           
                adp = new SqlDataAdapter("insert into tblComment(intId,strComments,strFullName,strLocation,dtPosted,blnApprove) values("+Id+",'"+Comments+"','"+FullName+"','"+Location+"',GetDate(),1)", offcon);
                adp.Fill(ds1,"Comment");
                DataTable dt = ds1.Tables["Comment"];
                i++;
            }
            if (i > 0)
            {
                return "Comment Successfully Submitted.";
            }
            else
            {
                return "Comment falied to Submit.";
            }
        } 
```

最终 URL 是 ::http://192.168.1.11/Service.Svc/PostComments

现在**我的主要问题**是当客户端是 JAVA 时如何在 WCF 中执行 POST 操作？

我得到这个错误：

> 服务器在处理请求时遇到错误。异常消息是“传入消息具有意外消息格式“原始”。该操作的预期消息格式为“Xml”、“Json”。这可能是因为尚未在绑定上配置 WebContentTypeMapper。有关详细信息，请参阅 WebContentTypeMapper 的文档。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：
> 
> 在 System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter.DeserializeRequest（消息消息，对象 [] 参数）在 System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest（消息消息，对象 [] 参数）在 System.ServiceModel.Dispatcher.CompositeDispatchFormatter.DeserializeRequest（消息消息，Object[] 参数）在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在System.ServiceModel.Dispatcher.ImmutableDispatchRuntime 中的 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc)。ProcessMessage4(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System. System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 的 ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc)ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(布尔 isOperationContextSet)ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(布尔 isOperationContextSet)

这是我尝试在服务中运行 Post 方法时出现的错误。我不知道如何修复。但它在 .net 应用程序中运行良好。但不是在 JAVA 中。如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:43:44.920

对不起，伙计们，这是该死的内容类型错误：我将内容类型设置为 application/json

在此之后，错误是关于从 JAVA 代码获取原始数据，我告诉他们向我发送 JSON 对象意味着纯 Json 数据。

在此之后，剩下的错误是只有外键值冲突。完成所有这些后，错误终于解决了。

但也不要忘记检查您的 Java 代码，因为您的代码可能是检查所有代码的内容类型的问题。

# python - django windows无法导入设置

> ID：12529372
> 
> 赞同：0
> 
> 时间：2012-09-21T11:12:21.983
> 
> 标签：python, django, windows

尝试执行此操作时出现此错误`python manage.py runseerver 0.0.0.0:8000`：

```
E:\server\website>python manage.py runserver 0.0.0.0:8000
Traceback (most recent call last):
  File "manage.py", line 11, in <module>
    execute_manager(settings)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 459, in execute_manager
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\Python27\lib\site-packages\django\core\management\commands\runserver.py", line 8, in <module>
    from django.core.servers.basehttp import AdminMediaHandler, run, WSGIServerException, get_internal_wsgi_application
  File "C:\Python27\lib\site-packages\django\core\servers\basehttp.py", line 26, in <module>
    from django.views import static
  File "C:\Python27\lib\site-packages\django\views\static.py", line 95, in <module>
    template_translatable = ugettext_noop(u"Index of %(directory)s")
  File "C:\Python27\lib\site-packages\django\utils\translation\__init__.py", line 75, in gettext_noop
    return _trans.gettext_noop(message)
  File "C:\Python27\lib\site-packages\django\utils\translation\__init__.py", line 48, in __getattr__
    if settings.USE_I18N:
  File "C:\Python27\lib\site-packages\django\utils\functional.py", line 184, in inner
    self._setup()
  File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "C:\Python27\lib\site-packages\django\conf\__init__.py", line 95, in __init__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'app.settings' (Is it on sys.path?): No module named settings

E:\server\website>
E:\server\website>ls
app  __init__.py  __init__.pyc  ctrl  manage.py  settings.py  settings.pyc  urls.py  app2

E:\server\website> 
```

# variables - Umbraco - xslt 变量转换为数据属性

> ID：12529388
> 
> 赞同：6
> 
> 时间：2012-09-21T11:13:26.227
> 
> 标签：variables, xslt, umbraco

我在 xslt 中有一个值，我需要将它放入 p 标签的数据时间属性中

```
 <xsl:value-of select="current()/eventTime" />
 <p class="time" data-time="1">Duration: <xsl:value-of select="current()/eventTime" /> hour(s)</p> 
```

这会产生错误

```
<p class="time" data-time="<xsl:value-of select="current()/eventTime" />">Duration: <xsl:value-of select="current()/eventTime" /> hour(s)</p> 
```

知道我是如何做到这一点的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T11:25:02.110

“属性值模板”是您的朋友

```
<p class="time" data-time="{current()/eventTime}">
   Duration: <xsl:value-of select="current()/eventTime" /> hour(s)
</p> 
```

花括号表示这是一个属性值模板，因此包含要评估的表达式。

请注意，另一种方法是使用**xsl:attribute**元素

```
<p class="time">
   <xsl:attribute name="data-time">
       <xsl:value-of select="current()/eventTime" />
   </xsl:attribute>
   Duration: <xsl:value-of select="current()/eventTime" /> hour(s)
</p> 
```

虽然这不是那么优雅。如果需要动态属性名称，您只需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:36:02.230

像这样的东西？

```
<xsl:variable name="eventtime" select="current()/eventTime"/>

<xsl:element name="p">
  <xsl:attribute name="class">time</xsl:attribute>
  <xsl:attribute name="data-time">
     <xsl:value-of select="$eventtime" />
  </xsl:attribute>
  Duration: 
  <xsl:value-of select="$eventtime" />
</xsl:element> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-23T09:07:31.777

`<xsl:attribute>`也可以在 ' `{}`' 括号中使用缩写形式。在你的情况下，它会是这样的：

`<xsl:value-of select="current()/eventTime" /> <p class="time" data-time="{$eventtime}">Duration: <xsl:value-of select="current()/eventTime" /> hour(s)</p>`

# windows-8 - 如何在 Popup.MessageDialog (Metro) 中使用从右到左

> ID：12529393
> 
> 赞同：2
> 
> 时间：2012-09-21T11:13:54.830
> 
> 标签：windows-8, microsoft-metro, windows-runtime, right-to-left, messagedialog

我想显示[从右到左的](http://dotancohen.com/howto/rtl_right_to_left.html)MessageDialog。但似乎不存在这样的选择。

我看到了这样的问题（[How to center Popup in Metro style app in c#](https://stackoverflow.com/questions/12226099/how-to-center-popup-in-metro-style-app-in-c-sharp)），但我认为 RTL 是一个不同的问题。

唯一的解决方案是编写我自己的“ **RTL** Popup”吗？如果是这样，怎么办？

先感谢您。

我试过使用这段代码： ![RTL 消息代码](../Images/0756b1d6e74275304f99a05e062d554a.png)

但结果不是 RTL： ![结果 - 不是 RTL](../Images/236998ae82e52f1ec038857dab807612.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-13T20:27:50.700

由于`MessageDialog`该类是密封的，并且目前无法设置属性以将方向更改为 rtl，因此您最好的选择是创建自己的。一种方法是将 a 设置`Grid`为页面上的最后一项，`Visibility`设置为`Collapsed`，然后`Visible`在需要时进行设置。一种居中的方法是这样的：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition Height="Auto"/>
        <RowDefinition/>
    </Grid.RowDefinitions>
    <Border Grid.RowSpan="3" Background="Gray" Opacity="0.3"/> <!-- this locks the controls behind-->
    <Border HorizontalAlignment="Stretch" Background="White" Grid.Row="1" Height="300">
        <TextBlock Text="Test" HorizontalAlignment="Center" Width="300"/>
    </Border>
</Grid> 
```

这将使您的内容垂直居中，水平居中，并防止用户与任何背景内容交互，直到`Collapsed`再次出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T20:13:55.170

我不知道任何 C#，但是也许您可以覆盖该`messageDialog.OnPaint`方法。我在 VB 中这样做是为了在启用设置为 false 时在按钮上获取不同颜色的文本。

```
Protected Overrides Sub OnPaint(ByVal pevent As System.Windows.Forms.PaintEventArgs)
    If MyBase.Enabled Then
        If Me.Text = "" Then
            MyBase.OnPaint(pevent)
            Dim sf As SizeF = pevent.Graphics.MeasureString("Login", Me.Font, Me.Width)
            Dim ThePoint As New Point((Me.Width / 2) - (sf.Width / 2), (Me.Height / 2) - (sf.Height / 2))
            pevent.Graphics.DrawString("Login", Me.Font, Brushes.Black, ThePoint)
        Else
            MyBase.OnPaint(pevent)
        End If

    Else
        Me.Text = ""
        MyBase.OnPaint(pevent)
        Dim sf As SizeF = pevent.Graphics.MeasureString("Not Ready...", Me.Font, Me.Width)
        Dim ThePoint As New Point((Me.Width / 2) - (sf.Width / 2), (Me.Height / 2) - (sf.Height / 2))
        pevent.Graphics.DrawString("Not Ready...", Me.Font, Brushes.Red, ThePoint)
    End If

End Sub 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-24T08:10:41.503

您可以在您的方法中使用下面的消息对话框。

```
var messageDialog = new MessageDialog(" You Can Show Message Here");
                messageDialog.Title = "Alert";
                // Add commands and set their callbacks; both buttons use the same callback function instead of inline event handlers
                messageDialog.Commands.Add(new UICommand(
                    "OK",
                    new UICommandInvokedHandler(this.CommandInvokedHandlerAddPics)));

                messageDialog.Commands.Add(new UICommand(
                    "No",
                    new UICommandInvokedHandler(this.CommandInvokedHandlerback)));

                // Set the command that will be invoked by default
                messageDialog.DefaultCommandIndex = 0;

                // Set the command to be invoked when escape is pressed
                messageDialog.CancelCommandIndex = 1;

                // Show the message dialog
                await messageDialog.ShowAsync(); 
```

确定或否按钮的方法和方法

```
private void CommandInvokedHandlerAddPics(IUICommand command)
    {
        if (command.Label.Equals("OK"))
        {

        }
        else if (command.Label.Equals("No"))
        {

        }
    } 
```

# c# - 使用实体框架按需加载数据

> ID：12529395
> 
> 赞同：2
> 
> 时间：2012-09-21T11:14:05.320
> 
> 标签：c#, entity-framework

我正在创建图形应用程序，用户可以在其中从 SQL Sever 数据库导入图形数据。此应用程序应该能够处理至少 100,000 多个实体。更快加载数据的想法是在打开数据库文件的同时加载可视数据，非可视数据将按需加载。所以，我面临的问题是使用实体框架从数据库加载数据。

每个实体都有一个可视数据和一个非可视数据相关联，以下是其中一个实体的示例：

```
class Polyline
{
  Guid ID {get; set;}
  PolylineGeometry PGeometry {get; set;}
  PolylineAttribData PAttribData {get; set;}
}
class PolylineGeometry
{
  List<Point3D> PointCollection {get; set;}
}
class PolylineAttribData
{
  Image ImageData {get; set;}
} 
```

我的上下文类如下：

```
class GeometryData : DbContext
{
  DbSet<Polyline> Polylines {get; set;}
} 
```

因此，当我们最初创建数据库上下文或几何数据时，只会将 ID 加载到折线中，而不会加载 PGeometry & PAttribData。那么，如何加载这些数据呢？

谢谢你，

潘卡伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:27:48.270

我认为您必须将导航属性（指其他实体）设置为虚拟的。

然后，无论您是否使用延迟加载：只要您的上下文未处理，相关实体将“按需”加载。

或者您可以在需要时显式加载它们，使用`Load()`

你可以在这里找到一篇关于惰性加载、急切加载、显式加载、优缺点的好文章：

[http://msdn.microsoft.com/en-us/magazine/hh205756.aspx](http://msdn.microsoft.com/en-us/magazine/hh205756.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:22:00.303

您应该明确编写包含语句；

```
GeometryData gD = new GeometryData();
var polyLinesWithGeometryAndAttributes = gD.Polylines.Include("PGeometry").Include("PAttribData"); 
```

# c - 在存在中断的情况下，读内存屏障如何工作？

> ID：12529400
> 
> 赞同：1
> 
> 时间：2012-09-21T11:14:30.890
> 
> 标签：c, concurrency, atomic, lock-free

关于内存屏障的使用，我有一些不明白的地方，我希望得到澄清。

所以，假设我们有一个 Treibers 堆栈，但是我们使用的是 SMR，所以没有与每个指针关联的计数器 - 我们必须在我们的原子操作中正确获取指针（这与 ABA 无关 - 我们使用的是 SMR，处理 ABA，这不是问题的一部分）。

现在，假设我们正在使用 Intel (x86/x64)，因此每个 CAS 都带有完整的内存屏障。我*认为*CASing 时会发生什么情况是缓存行被锁定，发出读屏障，这会清除无效队列，缓存行因此加载该缓存行的最新版本，发生比较，然后写屏障是发出，刷新存储缓冲区，最后我们释放缓存行锁。

所以，我们有下面的pop代码；

```
BARRIER_PROCESSOR_READ;

original_top = stack_state->top;

do
{
  if( original_top == NULL )
    return( 0 );

  copy_of_original_top = original_top;

  original_top = compare_and_swap( &stack_state->top, original_top->next, original_top );
}
while( copy_of_original_top != original_top );

*user_data = original_top->user_data; 
```

所以，我们首先发出一个读屏障——这确保我们刷新我们的无效队列。但是这样做和读取 state_state->top 之间存在差距。在清除无效队列和读取 state_stack->top 之间，*任何事情都可能发生*。核心可以服务中断，发生总线争用并且非常慢，您可以命名它 - 可以重新加载无效缓存行（并由另一个处理器重新无效）。基本上 - 无效队列可以重新填充。这意味着我们实际上不能相信 original_top 的值；我们可能正在读取一个实际上是错误的本地缓存行（我们还没有使它失效）并且这样做，错误地认为它的值为 NULL 并返回 0。

所以基本上，我看不出阅读障碍有什么*帮助*，因为在障碍之后但在您希望执行的实际阅读之前，任何事情仍然可能发生。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:50:24.963

我不完全理解你的问题，但我强烈怀疑你遗漏了一个细节。

内存防护用于保证更改的可见性，而不是同步进程。单独的防护不会锁定对数据的访问。

另一方面，原子操作和锁（如互斥锁或临界区或信号量或任何其他同步原语）都将保证只有一个线程访问给定的内存区域（假设所有访问都被编码为在您“拥有”时发生这样的锁或原子）。但它们不能保证有序的可见性。

如果需要**，则同时**需要独占访问**和**防护（注意：防护通常已经作为高级同步原语（如互斥锁）的一部分实现，因此如果您使用它们，则不必显式地担心防护）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:47:49.177

我不完全确定我理解你的问题，但是，在发出读取障碍之后，任何后续读取肯定会在障碍之前发生的读取之后排序。根据 BARRIER_PROCESS_READ 的定义方式，它还可能强制后续读取从共享内存而不是特定于处理器的高速缓存行中提取数据，其效果是在其他处理器上执行的写入将是可见的（假设这些写入后面跟着一个适当的写屏障！）。

在存在中断的情况下，这些事情仍然正确。即使缓存行在读屏障之后从中断处理程序中被填充，那么从这些缓存行中读取仍然会给你一个相对于读屏障语义有效的值。

我怀疑在您提供的代码示例中，读取屏障的目的实际上是使其他处理器的写入可见，以确保下一行`original_top = stack_state->top;` - 检索新值而不是读取后已在本地缓存的值这发生在屏障之前。如果中断处理程序读取相同的地址，则此约束仍然成立。读取的值不会是“新鲜的”，但至少不会是缓存了无限时间的值。

# visual-studio-2008 - 每次我做出改变时如何告诉视觉工作室重建？

> ID：12529408
> 
> 赞同：4
> 
> 时间：2012-09-21T11:15:02.230
> 
> 标签：visual-studio-2008, visual-c++

当我点击播放或运行可执行按钮时，如何告诉 Visual Studio 每次进行更改时重建？

我正在尝试一个 C++ 应用程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:25:59.053

![工具 -- 选项 -- 项目和解决方案](../Images/0c2d7caf2b8fa6e8cf5751642ae6bd8d.png)

**我认为您在工具 -- 选项 -- 项目和解决方案**下寻找这个

 **我不知道您可以将其配置为 ReBuild（与 Build 相比）。

一种选择是录制宏，然后将热键附加到它。

我在VS2008中记录了这个

```
Option Strict Off
Option Explicit Off
Imports System
Imports EnvDTE
Imports EnvDTE80
Imports EnvDTE90
Imports System.Diagnostics

Public Module RecordingModule

    Sub RebuildThenRun()
    DTE.ExecuteCommand ("Build.RebuildSolution")
    DTE.Debugger.Go(False)
    End Sub
End Module 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T11:23:15.237

检查`Tool->Options->Projects and solutions->Build and run->On Run`，当项目过期时”应该是“提示构建”或“始终构建”**

# php - PHP 可以安全地使用 unix 时间戳查询 mysql 数据库吗？

> ID：12529411
> 
> 赞同：2
> 
> 时间：2012-09-21T11:15:21.273
> 
> 标签：php, mysql, timezone

有很多关于处理日期的建议。我只是想澄清一点。比方说：

*   用户正在向数据库中插入记录
*   为该记录生成插入日期的 unix 时间戳

现在用户想要查询数据库中的日期间隔：

*   用户在他的本地时区提供 2 个日期
*   使用这些值将时区转换为 UTC 并获取时间戳
*   根据转换中的 2 个整数查询数据库中的记录（例如 WHERE date >= FIRST 和 date <= SECOND）
*   将检索到的时间戳再次转换为本地时区以进行显示

我知道使用 PHP 可以做到这一点，但在这种情况下不需要关心 mysql 的时区设置——只有 php 的。该系统将是 64 位的，因此存储日期的空间不足不是问题。但 ...

这会引发任何其他严重问题，例如 DST 更改或其他问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:19:07.793

**Unix 时间戳与时区无关。**

这也是您可以更改此步骤的原因：

> 使用这些值将时区转换为 UTC 并获取时间戳

进入这个：

> 将值转换为 Unix 时间戳

尽管**在数据库（例如 MySQL）中存储时间戳非常简单**。如果您愿意，可以确保 PHP 具有 Unix 时间戳：

*   使用`FROM_UNIXTIME()`MySQL 的函数保存值（将 Unix 时间戳作为参数，您将根据 MySQL 的设置接收日期时间），
*   通过使用`UNIX_TIMESTAMP()`MySQL 的函数检索值（将字段名称或值作为参数），因此您将根据 MySQL 的设置在数据库中存储的 datetime 获得 Unix 时间戳（整数）。

只要记住使用`TIMESTAMP`列类型来存储时间戳。这样时间将以与时区无关的方式存储，仅根据 MySQL 的设置显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:30:42.470

Tadeck 认为 Unix 时间戳与时区无关是正确的。

但是当在整个应用程序中使用时间戳时，您应该在数据库中存储和使用时间戳作为纯 INT。在应用程序级别（在 PHP 中）与本地时区相互转换。这允许您只关心 PHP 中的时区，而不是 2 个系统中的时区。它还简化了在应用程序级别为单个用户设置时区。

# javascript - jQuery：为什么这个动画步骤函数不起作用？

> ID：12529417
> 
> 赞同：3
> 
> 时间：2012-09-21T11:15:45.377
> 
> 标签：javascript, jquery

我正在使用[此 Stackoverflow Question](https://stackoverflow.com/questions/3216230/jquery-recreate-slidedown-effect-using-the-animation-function)中建议的方法来重新创建 jQuery`slideDown`函数`animate`，以便我可以使用该`step`属性。

但是，我无法让 step 属性工作。这是我的代码：

```
 infoClone.animate({
        "height": "show",
        "marginTop": "show",
        "marginBottom": "show",
        "paddingTop": "show",
        "paddingBottom": "show",

        step : function() {
            console.log('Step!');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T11:17:36.640

你应该把它改成

```
infoClone.animate({
    "height": "show",
    "marginTop": "show",
    "marginBottom": "show",
    "paddingTop": "show",
    "paddingBottom": "show"
    }, {
    step : function() {
        console.log('Step!');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:18:09.313

试试这个：

```
infoClone.animate({
        "height": "show",
        "marginTop": "show",
        "marginBottom": "show",
        "paddingTop": "show",
        "paddingBottom": "show"
},
{
  step : function() {
            console.log('Step!');
        }
}); 
```

# algorithm - 树的路径长度的递归定义

> ID：12529420
> 
> 赞同：5
> 
> 时间：2012-09-21T11:15:51.917
> 
> 标签：algorithm, recursion, tree

计算树的路径长度的一种简便方法是对所有 k 求和，将 k 与第 k 层节点数的乘积相加。

树的路径长度是树的所有节点的层数之和。路径长度可以有如下简单的递归定义。

N个节点的树的路径长度是其根的子树的路径长度加上N-1的总和。

我无法遵循上述递归定义。请用简单的例子解释。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T11:34:27.743

## 理解递归

> 路径长度可以有如下简单的递归定义。
> 
> N个节点的树的路径长度是其根的子树的路径长度加上N-1的总和。

首先，您必须了解路径长度是什么：它是节点和根之间所有距离的总和。

考虑到这个想法，很容易看出没有子节点的根节点的路径长度为 0：没有节点与根节点有距离。

假设我们已经知道一些树的路径长度。如果我们要创建一个新节点`R`，将我们已经拥有的所有树连接到该节点，请考虑到根节点的距离如何变化。

以前，距离测量到树的根（现在是子树）。现在，对根节点还有一步，即所有距离都增加一。

因此，我们添加`N - 1`，因为根节点有`N - 1`后代，现在它们都离根节点更远，并且`1*(N-1) = N-1`

* * *

您可以通过多种方式轻松计算路径长度，您可以计算边或节点。

## 计数节点

```
 A        Level 0
           /   \      
          B     C     Level 1
         / \   / \
        D   E F   G   Level 2 
```

我们从路径长度 0 开始：

*   节点`A`是根，总是在级别 0。它对路径长度没有贡献。（您无需遵循任何路径即可到达它，因此为 0）
    *   `0 + (0) = 0`
*   在级别 1，您有两个节点：`B`和`C`：
    *   `0 + (1 + 1) = 2`
*   在第 2 级，您有四个节点：`D, E, F`和`G`：
    *   `2 + (2 + 2 + 2 + 2) = 10`

## 计数边

```
 A        
           /   \      Level 1
          B     C     
         / \   / \    Level 2
        D   E F   G 
```

*   `0`，我们的初始总和
*   `+ 1*2`在水平上`1`，有`2`边缘
*   `+ 2*4`在水平上`2`，有`4`边缘

## 将定义转化为数学

> 计算树的路径长度的一种简便方法是对所有 k 求和，将 k 与第 k 层节点数的乘积相加。

令 L [i]表示水平上的节点集`i`并`h`表示高度，即从节点到根的最大距离：

![在此处输入图像描述](../Images/7033777367eaf5633ceeb415e7b3372e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:29:04.360

```
 A
           /   \
          B     C
         / \   / \
        D   E F   G 
```

这里，N = 总数。树中的节点数 = 7

（叶节点的路径长度取为零。）

会计。递归定义：

```
Path length of tree = Path length with Root A
                    = Path length with Root B + Path length with Root C + (7-1)

                    = (Path length with Root D + Path length with Root E + (3-1))
                    + (Path length with Root F + Path length with Root G + (3-1))
                    + (7-1)

                    = ((0 + 0 + 2) + (0 + 0 + 2)) + 6
                    = 10 
```

它的实现可以如下：

```
int Recurse(Node root, int totalNodes)
{
    if (totalNodes == 1)
        return 0;
    int noOfNodes1 = CountNodes(root.left);
    int noOfNodes2 = CountNodes(root.right);
    return ( Recurse(root.left, noOfNodes1)
           + Recurse(root.right, noOfNodes2) + totalNodes - 1);
} 
```

# jquery - Ajax 响应但不执行 PHP 服务

> ID：12529424
> 
> 赞同：0
> 
> 时间：2012-09-21T11:16:28.780
> 
> 标签：jquery, asp.net, ajax

我正在对发送邮件的文件执行 Ajax 请求。它给了我正确的回复，即“已发送消息”，但未发送邮件。当我尝试使用相同的 GET Headers 从浏览器执行该文件时，它会发送邮件。

那么这里有什么问题呢？

ajax 请求运行良好，并在 jquery 中使用 (success) 关键字触发以确保它成功。

帮我 ！

对于 ajax 方面：

```
function SendEmail(To, Subject, Message) 
{
 var URL = 'mail-service.php?to=' + To + '&subject=' + Subject + '&msg=' + Message;

$.ajax({
    url: URL,
    type: 'GET',
    success: function (res) {
        alert("Message Sent to : " + To);
    }
});
  } 
```

对于 PHP 方面：

```
<?php
$url = "http://mydomain.com/mail/mail.php?to=".$_GET['to']."&subject=".$_GET['subject']."&msg=".urlencode($_GET['msg']);

$link = fopen($url,"r");

while($res = fread($link,100))
{
    echo $res;
}

fclose($link);
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:41:29.120

你对函数的理解有误，`success`AJAX请求的函数一旦**请求成功**就会执行，它并不关心请求的页面*做*了什么或*没有做什么*。

为确保您收到正确的消息，您必须设置 PHP 处理文件以返回响应。

在你的脚本中

```
success: function (res) {
    alert(res); //Display the response text
} 
```

并确保您的 PHP 文件将响应文本作为输出返回。

```
while($res = fread($link,100))
{
    echo $res; //Make sure this is like "Message sent" or "Message sending failed"
} 
```

# jquery - jquery 1.8 包含不区分大小写的 + 开头

> ID：12529426
> 
> 赞同：2
> 
> 时间：2012-09-21T11:16:35.703
> 
> 标签：jquery, contains, case-insensitive, startswith

我正在寻找 jquerys 的插件/扩展：包含不区分大小写的选择器，并且只匹配以 :contains 文本开头的单词

这样，如果您键入“count”，您将不会得到“account”结果

提前致谢

编辑：我结束了以下

```
$.expr.pseudos.Contains = $.expr.createPseudo(function(arg) {
return function(elem) {
  var sentence = $(elem).text().trim().toLowerCase();
  var words = sentence.split(' ');
  arg = arg.toLowerCase();
  var args = arg.split(' ');
  var searchfound = true;

  for(var ix = 0, lx = args.length; ix < lx; ix++) {

    var thisfound = false;

    for(var i = 0, l = words.length; i < l; i++) {
      var wordpos = sentence.indexOf(words[i]);
      var restofsentence = sentence.slice(wordpos, wordpos+args[ix].trim().length);
      if(restofsentence == args[ix].trim() ){             
        thisfound = true;
      }
    }

    if (thisfound == false) {
      searchfound = false;
    }

  }

  return searchfound;  

};
}); 
```

它从每个搜索条目的开头进行搜索，如果有匹配项，则返回 true，而不管条目顺序如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:26:26.587

您可以轻松地为此创建自己的伪选择器：

```
$.expr.pseudos.startsWith = $.expr.createPseudo(function(arg) {
    return function(elem) {
        return $(elem).text().trim().slice(0, arg.length).toLowerCase() == arg.toLowerCase();
    };
}); 
```

[演示](http://jsfiddle.net/stSR6/)

为了匹配任何单词，您需要将它们按空格拆分并遍历集合：

```
$.expr.pseudos.anyWordStartsWith = $.expr.createPseudo(function(arg) {
    return function(elem) {
        var words = $(elem).text().trim().toLowerCase().split(' ');
        arg = arg.toLowerCase();

        for(var i = 0, l = words.length; i < l; i++) {
            if(words[i].slice(0, arg.length) == arg)
                return true;
        }

        return false;
    };
}); 
```

[演示](http://jsfiddle.net/6EA9S/)

该函数获取`text()`主题元素的内容，修剪任何空白，将其转换为小写，以便不区分大小写比较，并将字符串拆分为数组，其中空格被视为列表分隔符 ( `"a b c" => ["a", "b", "c"]`)。

然后`arg`，为了不区分大小写的比较，它会将您的搜索短语转换为小写。

它继续遍历单词数组，并将每个单词的子字符串与目标短语进行比较。我使用`.slice(0, n)`而不是`.substring(0, n)`因为如果主题字符串的长度小于`n`字符，后者会抱怨。

If any such match is found, the iteration will break immediately, returning true, otherwise it will iterate over the entire collection and reach the last line where it returns false.

# jquery - 使用 jQuery / CSS 模仿这个进度条示例

> ID：12529429
> 
> 赞同：1
> 
> 时间：2012-09-21T11:16:46.160
> 
> 标签：jquery, asp.net, css, progress-bar

我想开发一个如下所示的进度条：（取自[ZocDoc.com](https://www.zocdoc.com/booking/start?startTime=634838256000000000&professionalId=41297&locationId=29436&specialtyId=345&procedureId=1296&referrerType=&repeatPatient=false)）

![例子](../Images/65b7949c5fde8e5743a35d7a1c54493b.png)

谁能指出我从哪里开始的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:18:31.440

使用 jQuery UI [http://jqueryui.com/demos/progressbar/](http://jqueryui.com/demos/progressbar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:20:33.243

你想开发进度条还是使用进度条？

如果你想使用一个，就像建议的那样，只需谷歌它（jQuery UI 或 Bootstrap 是我的首选）......

如果你想开发一个，你应该更具体的问题是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:20:36.067

您提供的链接中的进度条是纯 CSS（通过纯 CSS，我的意思是完成的步骤类仍然由 javascript/jQuery 应用），因为最终用户实际上并不直接难以处理。但是，如果您希望最终用户能够与之交互，那么您肯定需要 javascript/jQuery 来开发此类。

# jquery - 如何使 jQuery Mobile 锚点工作？

> ID：12529434
> 
> 赞同：3
> 
> 时间：2012-09-21T11:17:41.787
> 
> 标签：jquery, mobile, anchor

我有这个链接：

```
<a rel="external" href="/feed/123/#comment">comment</a> 
```

当我转到该页面时，会发生以下情况：
- 浏览器将我带到锚点，但片刻后我又回到顶部。我试过这个：

```
$(window.document).bind("mobileinit", function() {
    $.mobile.ajaxEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.changePage.defaults.changeHash = false;
    $.mobile.pushStateEnabled = false;
}); 
```

所以，这些都没有帮助。我还尝试在`pagecreate`活动中做类似的事情`window.location.href = window.location.hash`。那没起效。

任何人都可以对这个谜团有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:30:00.850

你有没有尝试过 ：

```
<div data-role="page">
<a rel="external" href="#comments">comment</a>
...
</div>

<div data-role="page" id="comments">
...
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:13:17.567

我有同样的问题，我在 jqm 1.2.0 中找到了这一行： `$window.load( $.mobile.silentScroll );`

注释掉它，然后它不会滚动回顶部。也许它是为了迎合旧的 iOS 浏览器，因为我没有看到我的 ipod touch（iOS 5）有什么不同。

# xhtml - 使用名称而不是位置获取树节点

> ID：12529438
> 
> 赞同：0
> 
> 时间：2012-09-21T11:17:46.050
> 
> 标签：xhtml, primefaces

如何使用名称而不是子节点列表中节点的范围来获取子树节点。

我找到了这个方法，但它使用了子列表中元素的位置：

```
selectedNode.getChildren().get(i). 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:26:32.727

您通过调用收到的集合`getChildren()`是标准的 Java 集合 IIRC，并且不按名称索引。我能想到实现这一点的唯一方法是创建自己的 Node 实现或迭代集合（我认为这是最简单的解决方案）。

```
public Node getNodeByName(String name)
{
    for (Node n : selectedNode.getChildren())
    {
        if (name.equals(n.getName())
        { return n; }
    }
    return null;
} 
```

# haskell - 类和实例声明之间有什么区别？

> ID：12529439
> 
> 赞同：3
> 
> 时间：2012-09-21T11:17:46.933
> 
> 标签：haskell, instance, typeclass

我目前正在阅读[这篇](http://www.haskell.org/tutorial/classes.html)文章，但老实说，我很难看到什么

```
class Eq a where 
  (==)                  :: a -> a -> Bool 
```

达到，其中

```
instance Eq Integer where 
  x == y                =  x `integerEq` y 
```

没有达到。我知道第二个代码定义了对两个 Integer 类型执行相等的结果应该是什么。那么第一个的目的是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T14:08:12.243

声明说“`class`我现在要定义一堆函数，它们将适用于几种不同的类型”。声明说“这`instance`就是这些函数对*这种*类型的工作方式”。

在您的具体示例中，`class Eq`表示“`Eq`表示具有名为`==`”的函数的任何类型，而`instance Eq Integer`表示“这就是“`==`的工作方式`Integer`”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T11:25:00.640

第一个定义必须为类型提供哪些操作才能进行相等比较。然后，您可以使用它来编写对*任何*可比较相等的类型进行操作的函数，而不仅仅是整数。

```
allSame :: Eq a => [a] -> Bool
allSame [] = []
allSame (x:xs) = foldr True (==x) xs 
```

此函数适用于整数，因为`Eq Integer`存在的实例。它也适用于字符串 ( `[Char]`)，因为`Eq Char`存在的实例和具有实例的类型列表的实例`Eq`也存在 ( `instance Eq a => Eq [a]`)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T11:22:28.943

不同类型有一个类和多个实例。这就是类指定所需签名（接口；类也可以指定默认实现，但这不是重点）和实例主体（实现）的原因。然后，您使用类名作为约束，这意味着“任何`a`实现`Eq`操作的类型，即在其中有一个实例`Eq`”。

阅读[Learn you a Haskell](http://learnyouahaskell.com/)或[Real World Haskell](http://book.realworldhaskell.org/read/)，它们比 haskell.org 教程更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T20:17:26.570

假设您想实现一个通用算法或数据结构，“通用”意味着多态：它应该适用于任何数据类型。例如，假设您要编写一个函数来确定三个输入值是否相等。

以特定的（单态）情况为例，您可以对整数执行此操作：

```
eq3 :: Int -> Int -> Int -> Bool
eq3 x y z = x == y && y == z 
```

当然，我们希望上述定义也适用于其他类型，但如果我们只是告诉编译器该函数应该适用于*任何*类型：

```
eq3 :: a -> a -> a -> Bool
eq3 x y z = x == y && y == z 
```

...编译器抱怨该`==`函数不适用于我们的泛型`a`：

```
<interactive>:12:49:
    No instance for (Eq a)
      arising from a use of `=='
    In the first argument of `(&&)', namely `x == y'
    In the expression: x == y && y == z
    In an equation for `eq3': eq3 x y z = x == y && y == z 
```

我们必须告诉编译器我们的类型`a`是类型类的一个*实例*，`Eq`你已经注意到它是`==`函数被声明的地方。看看这里的区别：

```
eq3 :: Eq a => a -> a -> a -> Bool
eq3 x y z = x == y && y == z 
```

`a`现在我们有了一个可以对属于`Eq`类型类的任何类型进行统一操作的函数。

# ruby-on-rails - 在 ruby on rails 中验证模型

> ID：12529450
> 
> 赞同：1
> 
> 时间：2012-09-21T11:18:07.667
> 
> 标签：ruby-on-rails, rails-models

我有一个模型：

```
class HelloRails < ActiveRecord::Base
  attr_accessible :filename, :filevalidate
  include In4systemsModelCommon

  validates :filename, presence: true

  def update
      parameters = [self.filename, @current_user]
      parameters.map!{|p| ActiveRecord::Base.connection.quote p}
      sql = "call stored_procedure(#{parameters.join(',')})"
      ActiveRecord::Base.connection.execute(sql)
  end
end 
```

在视图中，我有一个`text_field`称为 as `:filename`。当我单击提交按钮时，它会在模型​​中调用此更新方法来调用存储的过程来执行。现在验证不起作用。

我不想接受`nil`文件名。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:41:07.053

它不验证，因为您正在直接执行 sql：

```
ActiveRecord::Base.connection.execute(sql) 
```

仅当您使用“普通”ActiveRecord 方法（如`save`和）时才会运行验证`update_attributes`。要手动运行验证，您可以调用`valid?`您的对象。

模型：

```
def update
  return false unless self.valid? # validation failed: return false
  parameters = [self.filename, @current_user]
  parameters.map!{|p| ActiveRecord::Base.connection.quote p}
  sql = "call stored_procedure(#{parameters.join(',')})"
  ActiveRecord::Base.connection.execute(sql)
  true
end 
```

然后在您的控制器中，您必须检查是否`@object.update`返回`true`或`false`在必要时在视图中显示错误。

控制器：

```
# This is just an example. I don't know your code.
def update
  @object = HelloRails.find(params[:id])

  if @object.update
    redirect_to somewhere
  else
    render :action => 'edit'
  end
end 
```

# android - 重命名时图像在 Android 图库中消失

> ID：12529454
> 
> 赞同：0
> 
> 时间：2012-09-21T11:18:11.917
> 
> 标签：android, android-layout, image-processing, android-intent

我正在尝试重命名从相机拍摄的图库中的图像以提供新名称。当我重命名文件时，原始图像消失，显示 2 个黑色方块。任何人都可以通过告诉我重命名图库图像的过程来帮助我解决这个问题。

路径如下：`/mnt/sdcard/DCIM/Camera`

我尝试通过内容提供商更新图像标题，如下所示：

```
ContentValues val = new ContentValues();
val.put(Images.Media.TITLE, "ImageTitle23");
getContentResolver().update(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, val, null, null); 
```

图库中的图像标题已更改。

但是当我尝试如下查询更新的图像时，我得到的名称与前一个相同：

```
final String[] imageColumns = { MediaStore.Images.Media._ID, MediaStore.Images.Media.DATA };
final String imageOrderBy = MediaStore.Images.Media._ID+" DESC";   
Cursor imageCursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, imageColumns, MediaStore.Images.Media._ID+"="+id, null, imageOrderBy);  
if(imageCursor.moveToFirst()){    
  int idd = imageCursor.getInt(imageCursor.getColumnIndex(MediaStore.Images.Media._ID)); 
  String fullPath = imageCursor.getString(imageCursor.getColumnIndex(MediaStore.Images.Media.DATA)); 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:44:56.990

MediaStore 会在您的图片中查找更改，但它不会实时响应所有更改。每次进行此类修改时，都应要求 MediaScanner 扫描此文件：

```
MediaScannerConnection.scanFile(
  getApplicationContext(), 
  new String[]{file.getAbsolutePath()}, 
  null, 
  new OnScanCompletedListener() {
     @Override
     public void onScanCompleted(String path, Uri uri) {
        Log.v("grokkingandroid", 
              "file " + path + " was scanned seccessfully: " + uri);
     }
  }); 
```

此外，您应该查看[这篇博客文章](http://www.grokkingandroid.com/adding-files-to-androids-media-library-using-the-mediascanner/)，其中提供了有关此用例的许多有用信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:35:47.180

Gallery 正在与 MediaStore 内容提供程序进行交互。如果您更改图像文件的名称，您可能需要更新内容提供程序中的字段。

您可以在 MediaStore 参考中阅读它：http: [//developer.android.com/reference/android/provider/MediaStore.Images.Media.html](http://developer.android.com/reference/android/provider/MediaStore.Images.Media.html)

潜在地，您可以触发 MediaStore 的刷新。看看这个线程：[如何在 Android 上刷新 MediaStore？](https://stackoverflow.com/questions/3300137/how-can-i-refresh-mediastore-on-android)

# c++ - 使用 kinect SDK 进行简单的斑点检测

> ID：12529457
> 
> 赞同：0
> 
> 时间：2012-09-21T11:18:30.340
> 
> 标签：c++, visual-c++, kinect

据我了解官方 Kinect 1.5 SDK，它带有人脸跟踪和骨骼跟踪。简单的斑点检测怎么样？我想做的就是跟踪一个圆形/椭圆形的物体。我在 SDK 中找不到任何代码，所以我应该使用 opencv 或其他库吗？

（我的代码是 C++）

**EDIT1**是否可以调整面部跟踪器，以便它可以检测一般的圆形（而不是面部）？

**EDIT2** 这里是 SDK 附带的示例中的深度处理代码。如何让 OpenCV 从中提取 blob？

```
void CDepthBasics::ProcessDepth()
{
    HRESULT hr;
    NUI_IMAGE_FRAME imageFrame;

    // Attempt to get the depth frame
    hr = m_pNuiSensor->NuiImageStreamGetNextFrame(m_pDepthStreamHandle, 0, &imageFrame);
    if (FAILED(hr))
    {
        return;
    }

    INuiFrameTexture * pTexture = imageFrame.pFrameTexture;
    NUI_LOCKED_RECT LockedRect;

    // Lock the frame data so the Kinect knows not to modify it while we're reading it
    pTexture->LockRect(0, &LockedRect, NULL, 0);

    // Make sure we've received valid data
    if (LockedRect.Pitch != 0)
    {
        BYTE * rgbrun = m_depthRGBX;
        const USHORT * pBufferRun = (const USHORT *)LockedRect.pBits;

        // end pixel is start + width*height - 1
        const USHORT * pBufferEnd = pBufferRun + (cDepthWidth * cDepthHeight);

        while ( pBufferRun < pBufferEnd )
        {
            // discard the portion of the depth that contains only the player index
            USHORT depth = NuiDepthPixelToDepth(*pBufferRun);

            // to convert to a byte we're looking at only the lower 8 bits
            // by discarding the most significant rather than least significant data
            // we're preserving detail, although the intensity will "wrap"
            BYTE intensity = static_cast<BYTE>(depth % 256);

            // Write out blue byte
            *(rgbrun++) = intensity

            // Write out green byte
            *(rgbrun++) = intensity;

            // Write out red byte
            *(rgbrun++) = intensity;

            // We're outputting BGR, the last byte in the 32 bits is unused so skip it
            // If we were outputting BGRA, we would write alpha here.
            ++rgbrun;

            // Increment our index into the Kinect's depth buffer
            ++pBufferRun;

        }

        // Draw the data with Direct2D
        m_pDrawDepth->Draw(m_depthRGBX, cDepthWidth * cDepthHeight * cBytesPerPixel);
    }

    // We're done with the texture so unlock it
    pTexture->UnlockRect(0);

    // Release the frame
    m_pNuiSensor->NuiImageStreamReleaseFrame(m_pDepthStreamHandle, &imageFrame);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:28:05.903

您可以使用它，因为遗憾的是 OpenCV 本身不支持处理 blob：

[http://opencv.willowgarage.com/wiki/cvBlobsLib](http://opencv.willowgarage.com/wiki/cvBlobsLib)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:29:40.777

从 Kinect 获得所需的图像后，您可以随意使用任何图像处理库来处理结果。

您可以使用 OpenCV 的[Hough Circle Transform](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html)来检测圆圈。您可能需要先将 Kinect 图像格式转换为 cv::Mat。

我想 OpenCV 不是唯一具有该功能的库。如果您有兴趣，请在一般情况下查找 Hough 变换。

我不认为调整面部跟踪器是要走的路。

# java - Java查询只找到第一个条目

> ID：12529462
> 
> 赞同：0
> 
> 时间：2012-09-21T11:18:55.840
> 
> 标签：java

如果我在 Java 中尝试以下查询，Java 只会返回表的第一个条目而没有任何错误。但是，如果我将相同的查询复制到 Access，Access 将返回所有 33 个条目。

询问：

`SELECT Country, Sum(SumOfNumber) AS number FROM CountryList WHERE Year=2012 AND (Month=1 Or Month=2 Or Month=3) AND Entity='xxx' GROUP BY Country ORDER BY Sum(SumOfNumber) DESC`

```
rs.last();
System.out.println(rs.getRow()); 
```

返回 1。

有什么建议吗？

好的，现在我删除了therm“ORDER BY Sum(SumOfNumber) DESC”，Java返回了所有国家并在最后抛出了一个异常“无效的游标状态”

```
public void doconnect(){
    try{
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
        conn = DriverManager.getConnection(ConnectURL,user,pw);
        Statement stmt = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);

        String query = "SELECT Country, Sum(SumOfNumbers) AS number FROM CountryList WHERE Year=2012 AND (Month=1 Or Month=2 Or Month=3) AND Entity='xxx' GROUP BY Country ORDER BY Sum(SumOfNumbers) DESC";
        System.out.println(query);
        ResultSet rs = stmt.executeQuery(query);

        while(rs.next()){
            System.out.println(rs.getString("Country"));
        }
        rs.close();

    }
    catch(Exception e){
        System.err.println(e);
        e.printStackTrace();
    }
    finally{
        if(conn!=null){
            try{
                conn.close();

            }
            catch(Exception e){
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:23:28.930

改变

```
rs.last();
System.out.println(rs.getRow()); 
```

to（获取所有国家/地区）

```
while (rs.next()) {
    System.out.println(rs.getString("Country"));
} 
```

从所有行而不是最后一行获取结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:29:55.727

`rs.last()`将光标移动到最后一行，`resultSet`这意味着在您阅读该行之后，没有更多数据可用，我也建议您使用提供的功能

> Keppil: while (rs.next()) { System.out.println(rs.getRow()); }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:26:53.373

当然，您只会得到一排（最后一排）。这是因为您使用 直接转到 ResultSet 的最后一行`rs.last()`。尝试遍历 ResultSet 以返回所有行。

要查看返回了多少行，您可以运行 query :`SELECT count(*) as count FROM CountryList WHERE Year=2012 AND (Month=1 Or Month=2 Or Month=3) AND Entity='xxx'`然后使用

```
while(rs.next()){
  int count = rs.getInt("count");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:22:52.710

来自 java API resultSet.last() **将光标移动到此 ResultSet 对象的最后一行。** [在此处检查](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html#last%28%29)，删除 rs.last 并像这样遍历结果集

```
 while(rs.next()) {
    sysout(rs.getString("your column name"));
 } 
```

# objective-c - 从 UIImages 问题构建视频

> ID：12529463
> 
> 赞同：1
> 
> 时间：2012-09-21T11:19:00.367
> 
> 标签：objective-c, xcode, video, photo

我想从 UIImages 数组创建电影。我试过这段代码：

```
-(void)writeImageAsMovie:(UIImage*)image toPath:(NSString*)path size:(CGSize)size          duration:(int)duration 
{
NSError *error = nil;
AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:
                              [NSURL fileURLWithPath:path] fileType:AVFileTypeQuickTimeMovie
                                                          error:&error];
NSParameterAssert(videoWriter);

NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:size.width], AVVideoWidthKey,
                               [NSNumber numberWithInt:size.height], AVVideoHeightKey,
                               nil];
AVAssetWriterInput* writerInput = [[AVAssetWriterInput
                                    assetWriterInputWithMediaType:AVMediaTypeVideo
                                    outputSettings:videoSettings] retain];

AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor
                                                 assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput
                                                 sourcePixelBufferAttributes:nil];
NSParameterAssert(writerInput);
NSParameterAssert([videoWriter canAddInput:writerInput]);
[videoWriter addInput:writerInput];

//Start a session:
[videoWriter startWriting];
[videoWriter startSessionAtSourceTime:kCMTimeZero];

//Write samples:
CVPixelBufferRef buffer = [Utils pixelBufferFromCGImage:image.CGImage size:size];
[adaptor appendPixelBuffer:buffer withPresentationTime:kCMTimeZero];
[adaptor appendPixelBuffer:buffer withPresentationTime:CMTimeMake(duration-1, 2)];

//Finish the session:
[writerInput markAsFinished];
[videoWriter endSessionAtSourceTime:CMTimeMake(duration, 2)];
[videoWriter finishWriting];
} 
```

但是输出不好。

图像是这样的：

[http://imageshack.us/photo/my-images/854/screenshot20120921at140.png/](http://imageshack.us/photo/my-images/854/screenshot20120921at140.png/)

视频输出为：

[http://imageshack.us/photo/my-images/856/screenshot20120921at140.png/](http://imageshack.us/photo/my-images/856/screenshot20120921at140.png/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:50:13.483

检查您为缓冲区提供的大小。试试这个尺寸，看看一次：

```
buffer = [self pixelBufferFromCGImage:[[array objectAtIndex:0] CGImage] size:CGSizeMake(480, 320)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T10:30:54.613

试试这个 [https://github.com/meslater/MSImageMovieEncoder](https://github.com/meslater/MSImageMovieEncoder)

# mysql - 查找具有相同票证的不同条目之间的天数差异

> ID：12529468
> 
> 赞同：-2
> 
> 时间：2012-09-21T11:19:24.483
> 
> 标签：mysql, database

我有下表：

```
ticket    arrivaltime        resolution time    status

t1        '2012-09-03'        null               new
t2        '2012-09-04'        null               new
t1        (can be anything)   '2012-09-14'       verified    
t1        (can be anything)   '2012-09-16'       verified
t2        (can be anything)   '2012-09-06'       verified 
```

例如，现在我想找到 t1 的天数差异：

```
Age(t1)=(resolution time of last entry) - (arrival time of first entry) 
```

同样，我会为 t2 找到它。

我怎样才能找到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:32:07.727

您可以执行以下操作：

```
SELECT TICKET, DATE_DIFF(MAX(RESOLUTION_TIME) - MIN(ARRIVAL_TIME)) AS DIFF FROM TABLE GROUP BY TICKET 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:37:10.490

有关语法，请参阅以下链接

[MySQL中的日期差异来计算年龄](https://stackoverflow.com/questions/1383516/date-difference-in-mysql-to-calculate-age)

```
SELECT TICKET, DATE_DIFF(MAX(RESOLUTION_TIME),MIN(ARRIVAL_TIME)) From TABLE 
```

# php - PHP - Working of Cookies

> ID：12529469
> 
> 赞同：0
> 
> 时间：2012-09-21T11:19:24.470
> 
> 标签：php, cookies, setcookie, httpcookie

I am facing a difficulty in understanding the usage of cookies in PHP, Please consider the following code snippet

```
 public function preExecute() {

setcookie("testCookie", "Hello123", time() + 31536000, "/", WebServer::getServerName());
echo "Before Value of cookine in decommission::".$_COOKIE["testCookie"];
setcookie("testCookie", "Hello456", time() + 31536000, "/", WebServer::getServerName());
echo "After Value of cookine in decommission::".$_COOKIE["testCookie"];
} 
```

The output that i am expecting for this code

Before Value of cookine in decommission::**Hello123**

After Value of cookine in decommission::**Hello456**

But the output i am getting for the above code snippet is

Before Value of cookine in decommission::**Hello456**

After Value of cookine in decommission::**Hello456**

Will appreciate if someone explain me the working, i have gone through resources available in internet, but still i am not clear.

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:23:52.720

`$_COOKIE` holds the cookies that have been received **in the current request**. It is not automatically updated when you call `setcookie` to set cookies in your response. The cookies you set via `setcookie` will only appear in `$_COOKIE` on the *next* request, when the cookies are sent back to the server.

So what you're seeing is that the second cookie overwrites the first, so only the later value is sent back to the server. I'll guess you have refreshed the page several times already, so you're seeing the cookie. If you clean your cookies and run this again, on the *first* try you won't see any output, because `$_COOKIE` is empty and stays empty for the whole request, no matter how often you call `setcookie`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:41:36.150

If you dont want to change this usage, use sessions. $_SESSION is a global array. You can reach from everywhere (inside class,function) and use instantly (no need to wait next request/page load).

# c++ - Boost单元测试主要功能？

> ID：12529470
> 
> 赞同：11
> 
> 时间：2012-09-21T11:19:24.767
> 
> 标签：c++, unit-testing, boost

`main()`使用 boost 进行测试时如何定义自己的函数？

Boost 使用的是它自己的 main 函数，但我使用的是自定义内存管理器，需要在分配任何内存之前对其进行初始化，否则会出错。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-22T07:13:02.043

我不相信你真的需要你自己的主。[我认为使用global fixture](http://www.boost.org/doc/libs/1_51_0/libs/test/doc/html/utf/user-guide/fixture/global.html)你会更好：

```
struct AllocatorSetup {
    AllocatorSetup()   { /* setup your allocator here */ }
    ~AllocatorSetup()  { /* shutdown your allocator/check memory leaks here */ }
};

BOOST_GLOBAL_FIXTURE( AllocatorSetup ); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T18:13:34.683

你必须定义

`BOOST_TEST_NO_MAIN`

在提升包括之前。

`BOOST_TEST_MAIN`

是默认值。 [http://www.boost.org/doc/libs/1_36_0/libs/test/doc/html/utf/compilation.html](http://www.boost.org/doc/libs/1_36_0/libs/test/doc/html/utf/compilation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T17:34:41.123

您可以定义一个静态对象，他的构造函数将在 main 之前执行：

```
class Alloc_Setup {
   Alloc_Setup() {
       // Your init code
   }
   ~Alloc_Setup() {
       // Your cleanup
   }
};
Alloc_Setup setup;
int main() {} // (generated by boost) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T11:30:06.047

内存可以在之前分配`main`：

```
static int* x = new int(1);
int main() { return *x; } 
```

你也可以让你的内存管理器成为一个全局变量，
但是你不能强制执行全局变量初始化的特定顺序。（至少在标准 C++ 中）

在 Windows 中，您可以将内存管理器放入 DLL 中，它将在调用应用程序入口点之前被初始化，但是，其他东西可能会在之前分配内存 - 另一个 DLL 或 DLL 的 CRT。

# python - 使用 Python 的 subprocess.call 杀死 firefox 进程

> ID：12529471
> 
> 赞同：1
> 
> 时间：2012-09-21T11:19:29.337
> 
> 标签：python, linux, firefox

我正在尝试使用以下脚本杀死作为 python 脚本的一部分在我的系统上运行的任何 firefox 进程：

```
 if subprocess.call( [ "killall -9 firefox-bin" ] ) is not 0:
        self._logger.debug( 'Firefox cleanup - FAILURE!' )
    else:
        self._logger.debug( 'Firefox cleanup - SUCCESS!' ) 
```

我遇到了如下所示的以​​下错误，但是只要我直接在终端中使用“killall -9 firefox-bin”就可以正常工作而没有任何错误。

```
 Traceback (most recent call last):
 File "./pythonfile", line 109, in __runMethod
 if subprocess.call( [ "killall -9 firefox-bin" ] ) is not 0:
 File "/usr/lib/python2.6/subprocess.py", line 478, in call
 p = Popen(*popenargs, **kwargs)
 File "/usr/lib/python2.6/subprocess.py", line 639, in __init__
 errread, errwrite)
 File "/usr/lib/python2.6/subprocess.py", line 1228, in _execute_child
 raise child_exception
 OSError: [Errno 2] No such file or directory 
```

我是否遗漏了什么，或者我应该尝试完全使用不同的 python 模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:20:52.040

使用时需要分开参数`subprocess.call`：

```
if subprocess.call( [ "killall", "-9", "firefox-bin" ] ) > 0:
    self._logger.debug( 'Firefox cleanup - FAILURE!' )
else:
    self._logger.debug( 'Firefox cleanup - SUCCESS!' ) 
```

`call()`通常不会像 shell 那样处理您的命令，并且不会将其解析为单独的参数。有关完整说明，请参阅[常用参数](http://docs.python.org/library/subprocess.html#frequently-used-arguments)。

如果您必须依赖 shell 解析您的命令，请将`shell`关键字参数设置为`True`：

```
if subprocess.call( "killall -9 firefox-bin", shell=True ) > 0:
    self._logger.debug( 'Firefox cleanup - FAILURE!' )
else:
    self._logger.debug( 'Firefox cleanup - SUCCESS!' ) 
```

请注意，我将您的测试更改`> 0`为更清楚地了解可能的返回值。由于 Python 解释器中的实现细节，该`is`测试恰好适用于小整数，但*不是*测试整数相等的正确方法。

# android - 为 listView 添加标题

> ID：12529477
> 
> 赞同：0
> 
> 时间：2012-09-21T11:19:56.497
> 
> 标签：android

朋友 我正在使用列表视图添加特定记录。我需要在列表视图中为特定列添加标题。请帮助我。请在这篇文章中找到 xml 文件代码和屏幕截图。![在此处输入图像描述](../Images/33162ef44f133c7789cb02b542c63254.png)

文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_toLeftOf="@+id/imageView1"
        android:orientation="horizontal"
        android:paddingLeft="10dp" >

        <TextView
            android:id="@+id/title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Title"
            android:textColor="#ffffffff"
            android:textSize="15sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/detail"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Detail"
            android:textColor="#ffffffff"
            android:textSize="15sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/country"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="India"
            android:textColor="#ffffffff"
            android:textSize="15sp"
            android:textStyle="bold" />
    </LinearLayout>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_alignParentRight="true"
        android:background="@drawable/error"
        android:scaleType="centerCrop" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:24:22.367

您可以根据需要制作自定义行 xml 文件并将其与 listview 绑定， [请参见](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

# json - RESTful Collection Resources - 惯用的 JSON 表示和往返

> ID：12529480
> 
> 赞同：7
> 
> 时间：2012-09-21T11:20:03.407
> 
> 标签：json, api, http, rest, odata

我有一个名为 Columns 的集合资源。A `GET`with`Accept: application/json` [不能直接返回一个集合](http://haacked.com/archive/2009/06/24/json-hijacking.aspx)，所以我的表示需要将它嵌套在一个属性中：-

```
{ "propertyName": [
   { "Id": "Column1", "Description": "Description 1" },
   { "Id": "Column2", "Description": "Description 2" }
  ]
} 
```

问题：

1.  上面的标识符**propertyName使用的***最佳*名称是什么？应该是：

     ***   **d**（即**d**是既定约定还是特定于某些特定框架（[MS WCF](http://www.west-wind.com/weblog/posts/2007/Oct/04/WCF-and-JSON-Services)和[MS ASP.NET AJAX](http://encosia.com/a-breaking-change-between-versions-of-aspnet-ajax/)？）
    *   **结果**（即**结果**是既定惯例还是特定于某些特定规范（[MS OData](http://msdn.microsoft.com/en-us/library/dd942341%28v=prot.10%29.aspx)）？）
    *   **列**（即顶级属性应该有一个清晰的名称，它有助于消除我将泛型`application/json`用作媒体类型的歧义）

    *注意，我觉得应该有一些东西来包装它，并且正如@tuespetre 所指出的那样，XML 或任何其他表示形式无论如何都会迫使你在某种程度上包装它*** 
***   当 PUT 内容返回时，是否应该保留所述属性中的相同包装[鉴于出于安全原因实际上没有必要，并且可能传统的 JSON 使用习惯用法可能是放弃 PUT 和 POST 的这种嵌套，因为它们没有必要保护防止脚本攻击] ?

    *我的直觉告诉我，它应该与其他所有表示一样对称，但可能存在删除**d** /* *results** 的现有技术 [假设这是第 1 部分的答案]*

    ...或者是否应该 PUT-back（或 POST）放弃对包装属性的需求，然后使用：-

    ```
    [
           { "Id": "Column1", "Description": "描述 1" },
           { “Id”：“Column2”，“描述”：“描述 2”}
     ]

    ```

    *   如果希望添加根级元数据，它会去哪里？
    *   制作 POST 的人如何/将只知道它需要是对称的？**

 *** * *

编辑：我对一个具有合理理由的答案特别感兴趣，该理由特别考虑了 JSON 对客户端使用的影响。例如，[HAL](http://stateless.co/hal_specification.html)会注意定义对两种目标表示都有意义的绑定。

编辑2：**尚未接受，为什么？**到目前为止，答案没有引文或任何使它们在我搜索并从似乎合理的前 20 首热门歌曲中脱颖而出的东西。我是不是太挑剔了？我想我是（或者更有可能我只是无法正确提问：D）。有点生气的是一周零三天，即使有一个）不可否认的微不足道的奖金仍然只有 123 次观看（其中 3 个答案还不错）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T20:45:48.673

# 更新的答案

解决您的问题（而不是在我的原始答案中有点切线：D），这是我的意见：

1）我对此的主要看法是我不喜欢`d`. 作为使用 API 的客户，我会觉得这很混乱。它到底代表什么？数据？

其他选项看起来不错。`Columns`很好，因为它反映了用户的要求。

如果您正在进行分页，那么另一个选项可能类似于`page`或`slice`向客户表明，他们没有收到集合的全部内容。

```
{
    "offset": 0,
    "limit": 100,
    "page" : [
        ...
    ]
} 
```

2) TBH，我认为你选择哪种方式并没有太大的不同，但是如果是我，我可能不会费心寄回信封，因为我认为没有任何必要（见下面）以及为什么使请求结构比它需要的更复杂？

我认为邮寄信封会很奇怪。POST 应该允许您将项目添加到集合中，那么为什么客户端需要发布信封来执行此操作？

从 RESTful 的角度来看，将信封放回去可能是有意义的，因为它可以被视为更新与整个集合相关的元数据。我认为值得考虑您将在信封中公开的那种元数据。我认为适合此信封的所有内容（例如分页、聚合、搜索方面和类似的元数据）都是只读的，因此客户端将其发送回服务器是没有意义的。如果您发现自己在信封中有大量数据可以让客户端发生变异 - 那么这可能是一个迹象，即将该数据分解为一个单独的资源，并将列表作为子集合。垃圾例子：

`/animals`

```
{
    "farmName": "farm",
    "paging": {},
    "animals": [
        ...
    ]
} 
```

可以分解为：

`/farm/1`

```
{
    "id": 1,
    "farmName": "farm"
} 
```

和

`/farm/1/animals`

```
{
    "paging": {},
    "animals": [
        ...
    ]
} 
```

注意：即使使用此拆分，您仍然可以使用[Facebook](https://developers.facebook.com/docs/reference/api/field_expansion/)或[LinkedIn 的](http://developer.linkedin.com/documents/field-selectors)字段扩展语法将两者组合为单个响应返回。例如`http://example.com/api/farm/1?field=animals.offset(0).limit(10)`

作为回应，您的问题是客户端应该如何知道他们发布和放置的 JSON 有效负载应该是什么样子 - 这应该反映在您的 API 文档中。我不确定是否有更好的工具来解决这个问题，但[Swagger提供了一个规范，允许您使用](http://swagger.wordnik.com/)[JSON Schema](http://en.wikipedia.org/wiki/JSON#Schema)记录您的请求主体应该是什么样子- 查看[此页面](https://github.com/wordnik/swagger-core/wiki/datatypes)了解如何定义您的模式，并查看[此页面](https://github.com/wordnik/swagger-core/wiki/parameters)了解如何将它们作为类型的参数引用`body`。不幸的是，Swagger 还没有在其精美的 Web UI 中可视化请求主体，但它是开源的，所以你总是可以添加一些东西来做到这一点。

# 原始答案

查看[William](http://haacked.com/archive/2009/06/24/json-hijacking.aspx#84979)在该页面的讨论线程中的评论 - 他提出了一种完全避免漏洞利用的方法，这意味着您可以安全地在响应的根目录中使用 JSON 数组，然后您就不必担心你们中的任何一个问题。

您链接到的漏洞利用依赖于您的 API，使用 Cookie 来验证用户的会话 - 只需使用查询字符串参数即可删除漏洞利用。无论如何，这样做可能是值得的，因为在 API 上使用 Cookie 进行身份验证不是非常 RESTful - 您的一些客户端可能不是 Web 浏览器并且可能不想处理 cookie。

## 为什么此修复程序有效？

该漏洞利用是 CSRF 攻击的一种形式，它依赖于攻击者能够`script`在他/她自己的页面上将标签添加到您 API 上的敏感资源中。

```
<script src="http://mysite.com/api/columns"></script> 
```

受害者网络浏览器会将存储在您的服务器下的所有 Cookie 发送`mysite.com`到您的服务器，这看起来像是一个合法请求 - 您将检查`session_id`cookie（或您的服务器端框架调用的任何 cookie）并查看用户是否经过身份验证。请求将如下所示：

```
GET http://mysite.com/api/columns
Cookie: session_id=123456789; 
```

如果您更改您的 API，您将忽略 Cookie 并改用 session_id 查询字符串参数，攻击者将无法欺骗受害者的 Web 浏览器将 session_id 发送到您的 API。

一个有效的请求现在看起来像这样：

```
GET http://mysite.com/api/columns?session_id=123456789 
```

如果使用 JavaScript 客户端发出上述请求，您可以从 cookie 中获取 session_id。使用来自另一个域的 JavaScript 的攻击者将无法执行此操作，因为您无法获取其他域的 cookie（*[请参见此处](https://stackoverflow.com/questions/8834436/how-to-get-cookies-from-a-different-domain-with-php-and-javascript#tab-top)*）。

现在我们已经解决了这个问题并且忽略了 session_id cookie，攻击者网站上的脚本标签仍然会发送一个类似的请求，其中包含这样的 GET 行：

```
GET http://mysite.com/api/columns 
```

但是您的服务器将响应，`403 Forbidden`因为 GET 缺少必需的 session_id 查询字符串参数。

# 如果我不为此 API 验证用户怎么办？

如果您没有对用户进行身份验证，那么您的数据就不会是敏感的，任何人都可以调用 URI。CSRF 应该不是问题，因为没有身份验证，即使您防止 CSRF 攻击，攻击者也可以调用您的 API 服务器端来获取您的数据并以他/她想要的任何方式使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T18:27:08.750

1.  I would go for **'d'** because it clearly separates the 'envelope' of your resource from its content. This would also make it easier for consumers to parse your responses, as opposed to 'guessing' the name of the wrapping property of a given resource before being able to access what it holds.

2.  I think you're talking about two different things:

    *   POST request should be sent in `application/x-www-form-urlencoded`. Your response should basically mirror a GET if you choose to include a representation of the newly created resource in your reply. (not mandatory in HTTP).
    *   PUTs should definitely be symmetric to GETs. The purpose of a PUT request is to replace an existing resource representation with another. It just makes sense to have both requests share the same conventions, doesn't it?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T07:00:03.300

1.  使用“列”，因为它在语义上是有意义的。考虑一下 JSON 和 XML 如何相互镜像会有所帮助。

2.  如果您要将集合放回原处，您不妨使用相同的媒体类型（语法、格式、您将如何称呼它。）**

# php - php 在注销页面中使用 header() 重定向

> ID：12529481
> 
> 赞同：1
> 
> 时间：2012-09-21T11:20:06.840
> 
> 标签：php, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我想重定向到某个页面，所以我尝试了这样。

```
www.example.com/logout.php?redirect=www.index-page.com/index.php
         echo $redirect = "'Location: http://".$_GET['redirect']."'";
       //redirects to index
       header($redirect); 
```

但这对我不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:36:36.603

像这样的东西：

在注销链接中：

```
<a href="http://www.example.com/logout.php?redirect=<?=urlencode('http://www.index-page.com/index.php')?>"> Logout </a> 
```

在 logout.php 页面上：

```
<?
    // destroy session
    header('location:'.urldecode($_GET['redirect']));
    die();
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:22:47.197

如果不是它会生成，你不​​能使用`echo`之前的标题`Warning: Cannot modify header information - headers already sent by`

```
 $redirect = "Location: http://". $_GET['redirect'];
    header($redirect); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:21:27.123

你不应该需要额外的`'`

```
$redirect = "Location: http://".$_GET['redirect']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T11:30:24.407

这是将用户重定向到 Google 的示例

```
$link='http://Google.com';
header("location: $link"); 
```

你可以把它变成一个函数

```
function redirectUser($link){
    header("location: $link");
} 
```

然后你可以这样称呼它

```
redirectUser('http://google.com'); 
```

或者

```
echo redirectUser('http://google.com'); 
```

不会发生错误！

我建议你`die();`在重定向代码之后使用，中止来电代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T11:23:42.020

你只能使用`redirect`没有`echo`：

```
header("Location: http://".$_GET['redirect']); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T11:25:35.050

问题就在这里

```
echo $redirect = "'Location: http://".$_GET['redirect']."'";
//redirects to index
header($redirect); 
```

你不应该在 header 之前使用 echo ，这会导致 warning `header already sent`。

像这样使用它

```
$redirect = "Location: http://".$_GET['redirect'];
//redirects to index
header($redirect); 
```

# android - 移动 android 的 PayPal 快速结帐

> ID：12529483
> 
> 赞同：1
> 
> 时间：2012-09-21T11:20:13.703
> 
> 标签：android, paypal, express-checkout

我正在尝试在我的应用程序中实现 MCEL，以便能够销售一些数字商品。

以前我有 MCL，它很容易设置，但 MCEL 让我有点困惑。

贝宝 MECL 给出的示例代码正在访问一些基于 weburl 的 .jsp

如果我想使用 MCEL

1.  我需要 SSL 服务器吗？ SSL 网站？

2.  我有使用 PHP 的 linux 主机。MCEL 够用吗？

3.  Paypal 说我们需要从安全服务器传递这个 url

    ```
    https://www.paypal.com/cgi-bin/webscr?cmd=_express-checkoutmobile " +
        "&drt=" +_deviceReferenceToken + "&token=valueFromSetExpressCheckoutResponse"; 
    ```

4.  我在初始化贝宝实例时获得了 deviceReferenceId，但我在哪里获得 ValueFromSetExpressCheckoutResponse？

5.  谁能告诉我一些如何从 MCEL 开始的代码？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-14T04:25:45.273

我认为您需要先使用 ExpressCheckout API：

发送这样的链接：`"https://api-3t.sandbox.paypal.com/nvp?METHOD=setExpressCheckout&VERSION=87.0&USER=xxx&PWD=xxxx&SIGNATURE=xxx&RETURNURL=http://www.google.com/&CANCELURL=http://www.mydomain.com/checkout/order/error&L_PAYMENTREQUEST_0_NAME0=Toggi+Calgary&L_PAYMENTREQUEST_0_NUMBER0=TOGGICALGARY&L_PAYMENTREQUEST_0_DESC0=Colour%3A+Black%2C+Size%3A+4%2 &L_PAYMENTREQUEST_0_AMT0=58.60&L_PAYMENTREQUEST_0_QTY0=1&PAYMENTREQUEST_0_CURRENCYCODE=USD&PAYMENTREQUEST_0_ITEMAMT=58.60&PAYMENTREQUEST_0_SHIPPINGAMT=30.00&PAYMENTREQUEST_0_TAXAMT=14.65 &PAYMENTREQUEST_0_AMT=103.25"`

然后你可以得到回应：

```
TOKEN=EC%2d0TU74507629133059&TIMESTAMP=2012%2d10%2d14T03%3a58%3a24Z&CORRELATIONID=a6920fdc12539&ACK=Success&VERSION=87%2e0&BUILD=3893058 
```

这里是你需要的token。如果你没有（&USER=xxx&PWD=xx&SIGNATURE=xx），你需要在沙盒上创建一个卖家账户

# c - 二维数组的问题

> ID：12529484
> 
> 赞同：4
> 
> 时间：2012-09-21T11:20:19.023
> 
> 标签：c, arrays, pointers, 2d

我用 C 编写了以下代码：

```
#include<stdio.h>

int  main()
{
  int a[10][10]={1};
  //------------------------
  printf("%d\n",&a);
  printf("%d\n",a);
  printf("%d\n",*a);
  //-------------------------
  printf("%d",**a);

  return 0;
} 
```

使用上述 3 个 printf 语句，我得到了相同的值。在我的机器上它是 2686384。但是最后一条语句我得到了 1。

是不是出事了？这些陈述意味着：

1.  地址`a`是2686384
2.  存储的`a`值为2686384
3.  存储在指向的变量地址`a`（即 2686384）的值是 2686384。

这意味着`a`必须是一个指向自身的变量......

那为什么输出是`*(*a)`1呢？为什么不评价为`*(*a)=*(2686384)=2686384`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-01T02:53:48.850

```
#include<stdio.h>

int  main()
{
  // a[row][col]
  int a[2][2]={ {9, 2}, {3, 4} };
  // in C, multidimensional arrays are really one dimensional, but
  // syntax alows us to access it as a two dimensional (like here).

  //------------------------
  printf("&a            = %d\n",&a);
  printf("a             = %d\n",a);
  printf("*a            = %d\n",*a);
  //-------------------------

  // Thing to have in mind here, that may be confusing is:
  // since we can access array values through 2 dimensions,
  // we need 2 stars(asterisk), right? Right.

  // So as a consistency in this aproach,
  // even if we are asking for first value,
  // we have to use 2 dimensional (we have a 2D array)
  // access syntax - 2 stars.

  printf("**a           = %d\n", **a );         // this says a[0][0] or *(*(a+0)+0)
  printf("**(a+1)       = %d\n", **(a+1) );     // a[1][0] or *(*(a+1)+0)
  printf("*(*(a+1)+1)   = %d\n", *(*(a+1)+1) ); // a[1][1] or *(*(a+1)+1)
  // a[1] gives us the value on that position,
  // since that value is pointer, &a[i] returns a pointer value
  printf("&a[1]         = %d\n", &a[1]);
  // When we add int to a pointer (eg. a+1),
  // really we are adding the lenth of a type
  // to which pointer is directing - here we go to the next element in an array.

  // In C, you can manipulate array variables practically like pointers.
  // Example: littleFunction(int [] arr) accepts pointers to int, and it works vice versa,
  //          littleFunction(int* arr) accepts array of int.

  int b = 8;
  printf("b             = %d\n", *&b);

  return 0;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:30:49.343

包含数组名称的表达式可以*衰减*为指向数组第一个元素的指针。所以即使`a`有类型`int[10][10]`，也可以衰减到`int(*)[10]`。

现在，这种衰减发生在表达式中`*a`。因此表达式具有类型`int[10]`。重复相同的逻辑，这再次衰减到`int*`，因此`**a`是 a `int`，而且它是数组的第一个元素的第一个元素`a`，即`1`。

其他三个打印语句分别打印出数组的*地址*，数组的第一个元素，数组的第一个元素的第一个元素（当然都是同一个地址，只是类型不同）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:55:46.963

首先，关于数组的一个词......

除非它是`sizeof`,`_Alignof`或一元运算符的操作数 0 `&`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of”类型的*表达式*`T`将被转换（“decay”）为类型为“pointer to `T`”的表达式，表达式的值将是数组中第一个元素的地址。

表达式`&a`的类型为“指向 10 元素数组的 10 元素数组的指针`int`”，或`int (*)[10][10]`. 该表达式`a`的类型为“10 元素数组的 10 元素数组`int`”，根据上面的规则衰减为“指向 10 元素数组的指针`int`”，或者`int (*)[10]`。最后，表达式`*a`（相当于`a[0]`）的类型为“10-element array of `int`”，再次按照上面的规则衰减为“pointer to `int`”。

*所有三个表达式都具有相同的值*，因为数组的地址和它的第一个元素的地址相同：`&a[0][0]`== `a[0]`== `*a`== `a`== `&a`。但是，表达式的*类型*是不同的，这在进行指针运算时很重要。例如，如果我有以下声明：

```
int (*ap0)[10][10] = &a;
int (*ap1)[10]     =  a;
int *ip            = *a; 
```

then`ap0++`将前进`ap0`指向 的下一个 10x10 数组`int`，`ap1++`将前进`ap1`到指向`int`(or `a[1]`) 的下一个 10 元素数组的指针，并`ip++`前进`ip`到指向下一个`int`( `&a[0][1]`)。

`**a`等价于`*a[0]`等价于`a[0][0]`。这是和 的第一个元素的*值*`a`，具有类型`int`和值`1`（请注意，*仅* `a[0][0]`初始化为`1`；所有其余元素都初始化为`0`）。

请注意，您应该使用`%p`打印出指针值：

```
printf("&a = %p\n", &a);
printf(" a = %p\n",  a);
printf("*a = %p\n", *a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:29:12.783

首先，如果您想打印出指针值，请使用`%p`- 如果您使用的是 64 位机器，则 int 几乎可以肯定小于指针。

`**a`是双重取消引用实际上是 a `int**`，所以你最终得到第一个子数组的第一个元素是：1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T11:49:21.517

**从 C99 标准**

考虑由声明定义的数组对象

```
int x[3][5]; 
```

这里 x 是一个 3 × 5 的整数数组；更准确地说，x 是一个由三个元素对象组成的数组，每个对象都是一个由五个整数组成的数组。在等价于 (*((x)+(i))) 的表达式 x[i] 中，**x 首先被转换为指向五个 int 的初始数组的指针**。然后根据 x 的类型调整 i，这在概念上需要将 i 乘以指针指向的对象的大小，即由五个 int 对象组成的数组。添加结果并应用间接以产生五个整数的数组。当在表达式 x[i][j] 中使用时，该数组又被转换为指向第一个 int 的指针，因此 x[i][j] 产生一个 int。

所以，

初始数组将仅为 x[0][0]。

所有 x、&x 和 *x 都将指向 x[0][0]。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T11:37:18.873

如果定义`a`为`T a[10]`(where `T`is some typedef)，那么简单朴素的`a`意思*就是数组的起始地址*，同`&a[0]`. 他们都有 type `T*`。

`&a`也是数组开始的地址，但它的类型为`T**`.

存在多维数组时，事情变得更加棘手。要查看发生了什么，使用 typedef 将事情分解成更小的块更容易。所以，你有效地写了

```
typedef int array10[10];
array10 a[10]; 
```

[练习给读者：什么是类型`a`？（*不是* `int**`）]

`**a`正确计算为`int`数组中的第一个`a`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T11:53:31.113

不，您的代码没有任何问题。就像你在想的那样……我想得越多，我就越难以解释，所以在我开始讨论之前，请记住以下几点：

1.  **数组不是指针**，不要那样想它们，它们是不同的类型。
2.  [] 是一个运算符。这是一个移位和顺从运算符，所以当我写作时，`printf("%d",array[3]);`我正在移位和顺从

所以一个数组（让我们考虑一维开始）在内存中的某个地方：

```
int arr[10] = {1};
//Some where in memory---> 0x80001f23
                            [1][1][1][1][1][1][1][1][1][1] 
```

所以如果我说：

```
*arr; //this gives the value 1 
```

为什么？因为它与`arr[0]`它为我们提供数组开头地址处的值相同。这意味着：

```
arr; // this is the address of the start of the array 
```

那么这给了我们什么？

```
&arr; //this will give us the address of the array. 
      //which IS the address of the start of the array
      //this is where arrays and pointers really show some difference 
```

所以`arr == &arr;`。数组的“工作”是保存数据，数组不会“指向”其他任何东西，因为它保存着自己的数据。时期。另一方面，指针的作用是指向其他东西：

```
int *z;     //the pointer holds the address of someone else's values
z = arr;    //the pointer holds the address of the array
z != &z;    //the pointer's address is a unique value telling us where the pointer resides
            //the pointer's value is the address of the array 
```

**编辑：另** 一种思考方式：

```
int b;   //this is integer type
&b;      //this is the address of the int b, right?

int c[]; //this is the array of ints
&c;      //this would be the address of the array, right? 
```

所以这是可以理解的：

```
*c;   //that's the first element in the array 
```

那行代码告诉你什么？如果我尊重`c`，那么我会得到一个 int。这意味着只是一个简单`c`的地址。由于它是数组的开头，它是数组的地址，因此：

```
c == &c; 
```

# java - 玩！框架 - 未编译视图？

> ID：12529489
> 
> 赞同：7
> 
> 时间：2012-09-21T11:20:34.920
> 
> 标签：java, web, webserver, playframework-2.0

我创建了一个新项目并使用 eclipse（使用的`eclipsify`命令）。
基本上，我将`app`目录从旧项目移到了我创建的新项目中。

问题是 Eclipse 无法识别这些视图。我收到如下错误：

> views.html.viewTopic 无法解析为类型

我尝试过，`play compile`但没有帮助。
所以我有40个错误。所有这些都与视图未编译的事实有关，因此日食无法识别它们（当然是我的猜测）。

**我能做些什么？**
顺便说一句，旧项目编译并运行没有问题（我使用intellij）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-02-08T16:00:26.070

对于带有 Eclipse Mars 的 Java Play Framework v2.4.6（激活器 v1.3.7）：

为了避免`viewTopic.render()`您的.`<classpathentry kind="lib" path="target/scala-2.11/classes"/>``.classpath``target/scala-2.11/classes`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-09T16:46:22.343

*   在命令行上运行“play eclipse”
*   在 Eclipse 中，通过按 F5 刷新您的项目

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-11T13:47:25.477

这次在游戏控制台中使用源重新运行命令：
$ eclipse with-source=true

然后去eclipse并清理你的项目并构建所有

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-30T10:05:16.713

根据 jetbrains 的说法，模板的问题已得到解决。如果您在 IDEA 项目中播放了 2 个生成的源代码，那么您应该从项目中排除此文件夹

[http://www.jetbrains.com/idea/webhelp/configuring-folders-within-a-content-root.html](http://www.jetbrains.com/idea/webhelp/configuring-folders-within-a-content-root.html)

并执行文件 | 使缓存无效并重新启动。

如果你有一个 SBT 项目，在 IDEA 中通过 File | 打开它 导入项目 | Sbt型项目

确保使用最新的 Scala 和 Play 2 插件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-19T14:21:24.767

1.  关闭eclipse项目
2.  激活剂日食
3.  激活器编译
4.  打开eclipse项目
5.  将 target/scala-[your-version-here]/classes 作为类文件夹添加到您的构建路径

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T15:08:42.460

好的，我解决了。

*   我再次创建了一个新应用
*   移动`app`目录
*   **然后才**运行命令`play idea`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T12:29:41.817

你能做的最好的就是搜索 Stack Overflow，因为这个话题已经讨论过很多次了。

*   [Playframework - Eclipse 无法检测到新模板](https://stackoverflow.com/questions/11739119)
*   [如何让 Eclipse 看到 Play 中的变化！编译模板？](https://stackoverflow.com/questions/10042987)
*   [scala 代码在 eclipse 中导致 playframework-2.0 错误](https://stackoverflow.com/questions/10960538)
*   等等等等……

# java - Swing-GUI 不知道在构造函数中实例化的外部类

> ID：12529491
> 
> 赞同：0
> 
> 时间：2012-09-21T11:20:36.517
> 
> 标签：java, swing, constructor

我有一个 Swing-GUI 和一个外部类。在 Swing GUI 的构造函数中，我实例化了外部类的一个新对象。但是我不能从 GUI 类的其他方法（例如在动作侦听器中）使用这个对象。如果我直接在动作监听器中实例化对象，那么我可以使用外部类的所有方法。

以下是相关的代码片段；如果你需要更多告诉我:-)

1）我的外部课程

```
public class ExternalClass
{
    private int a = 100;
    public int getA() {
        return a;
    }
} 
```

2) 我的 GUI 类的一部分

公共类 GUI 扩展 javax.swing.JFrame {

```
// constructor
public GUI()
{
    initComponents();
    ExternalClass e = new ExternalClass();
}
//...
    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)
{

    int u = e.getA();
// this doesn't work - the object e is not known by the method

}
//...
        java.awt.EventQueue.invokeLater(new Runnable()
    {

        public void run()
        {
            new GUI().setVisible(true);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:26:06.337

您在构造函数中声明并实例化`e`变量，因此它仅在构造函数中可见。

将其声明为成员变量，您可以在此处或在构造函数中实例化它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:26:50.403

您的`e`对象的范围（范围意味着变量的可见性）仅限于构造函数，因为您`ExternalClass e`在该构造函数中说过。

最简单的解决方案是让这个变量成为类的成员——而不仅仅是在构造函数中定义。

将声明`ExternalClass e`移到构造函数之外，但仍在类本身中。在您的构造函数中，只需执行`e = new ExternalClass();`. `e`在这里的构造函数中是可见的，因为构造函数的作用域比类本身低，并且`jButton1ActionPerformed`出于同样的原因，它在方法中也可见。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T11:33:18.743

该对象在构造函数中声明。因此，它只存在于构造函数本身中。如果你想在其他方法中使用它，你必须在外面声明它，作为类的属性，例如这样。

```
ExternalClass e;    

// constructor
public GUI()
{
    initComponents();
    e = new ExternalClass();
} 
```

请注意，该字段将对包含您的 GUI 类的包中的所有类可见。您可能想要指定访问级别（私有、公共或无包访问）。

# ios - ios cocos2d 2.0 用什么代替 glNormalPointer

> ID：12529495
> 
> 赞同：1
> 
> 时间：2012-09-21T11:20:48.430
> 
> 标签：ios, cocos2d-iphone, opengl-es-2.0

在我的项目中，我需要使用透视旋转 3d 精灵。除透视外，所有变换都可以正常工作（使用 kmGLRotatef(angle,1, 0, 0);)。我发现了一些旧代码：

```
-(void) draw
{
glEnableClientState(GL_NORMAL_ARRAY); 
glNormalPointer (GL_FLOAT, 0, Normals); 

[super draw];   

glDisableClientState( GL_NORMAL_ARRAY ); 
} 
```

但我找不到任何关于使用什么来代替 glNormalPointer 和 glEnableClientState 的信息；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:59:17.387

Cocos2D 2.0 现在默认使用 2D 投影。它可能就像切换回 3D 投影一样简单。在项目的 AppDelegate 中可以找到切换投影的代码：

```
 [director setProjection:kCCDirectorProjection2D];
//  [director setProjection:kCCDirectorProjection3D]; 
```

# c - 如何从内核空间将数据附加到数据包上？

> ID：12529497
> 
> 赞同：6
> 
> 时间：2012-09-21T11:20:53.533
> 
> 标签：c, linux, kernel-module, netfilter

我正在尝试在内核空间的数据包上附加一些数据。我有一个回显客户端和服务器。我在命令行中输入： ./client "message" 并且服务器只是回显它。服务器使用 ./server 运行。

现在，客户端和服务器在两台不同的机器上（可能是虚拟机）。我正在编写一个在客户端机器上运行的内核模块。它的工作是在数据包离开机器时在“消息”之后附加“12345”。我在下面展示代码。

```
/*
 * This is ibss_obsf_cat.c
 */

#include <linux/module.h>
#include <linux/moduleparam.h>
#include <linux/kernel.h>
#include <linux/netfilter.h>
#include <linux/skbuff.h>
#include <linux/netdevice.h>
#include <linux/udp.h>
#include <linux/ip.h>

#undef __KERNEL__
#include <linux/netfilter_ipv4.h>
#define __KERNEL__

/*
 * Function prototypes ...
 */

static unsigned int cat_obsf_begin (unsigned int hooknum,
                struct sk_buff *skb,
                const struct net_device *in,
                const struct net_device *out,
                int (*okfn)(struct sk_buff *));

static void hex_dump (char str[], int len)
{

}

/*
 * struct nf_hook_ops instance initialization
 */

static struct nf_hook_ops cat_obsf_ops __read_mostly = {
    .pf = NFPROTO_IPV4,
    .priority = 1,
    .hooknum = NF_IP_POST_ROUTING,
    .hook = cat_obsf_begin,
};

/*
 * Module init and exit functions. 
 * No need to worry about that.
 */

static int __init cat_obsf_init (void)
{
    printk(KERN_ALERT "cat_obsf module started...\n");
    return nf_register_hook(&cat_obsf_ops);
}

static void __exit cat_obsf_exit (void)
{
    nf_unregister_hook(&cat_obsf_ops);
    printk(KERN_ALERT "cat_obsf module stopped...\n");
}

/*
 * Modification of the code begins here. 
 * Here are all the functions and other things.
 */

static unsigned int cat_obsf_begin (unsigned int hooknum,
                struct sk_buff *skb,
                const struct net_device *in,
                const struct net_device *out,
                int (*okfn)(struct sk_buff *))
{ 
    struct iphdr *iph;
    struct udphdr *udph;
    unsigned char *data;
    unsigned char dt[] = "12345";
    unsigned char *tmp;
    unsigned char *ptr;

    int i, j, len;

    if (skb){
        iph = ip_hdr(skb);

        if (iph && iph->protocol && (iph->protocol == IPPROTO_UDP)){
            udph = (struct udphdr *) ((__u32 *)iph + iph->ihl);
            data = (char *)udph + 8;

            if(ntohs(udph->dest) == 6000){
                for (i=0; data[i]; i++);
                len = i;

                //printk(KERN_ALERT "\nData length without skb: %d", len);
                //printk(KERN_ALERT "Data is: %s", data);
                //printk(KERN_ALERT "dt size: %lu", sizeof(dt));
                //printk(KERN_ALERT "skb->len: %d", skb->len);
                tmp = kmalloc(200*sizeof(char), GFP_KERNEL);

                memcpy(tmp, data, len);
                ptr = tmp + len;
                memcpy(ptr, dt, sizeof(dt));

                printk(KERN_ALERT "tmp: %s", tmp);

                printk(KERN_ALERT "skb->tail: %d", skb->tail);
                //skb_put(skb, sizeof(dt));
                printk(KERN_ALERT "skb->end: %d", skb->end);
                printk(KERN_ALERT "skb->tail: %d", skb->tail);
                printk(KERN_ALERT "skb->tail(int): %d", (unsigned int)skb->tail);

                //memset(data, 0, len + sizeof(dt));

                //memcpy(data, tmp, len + sizeof(dt));

                //skb_add_data(skb, tmp, len+sizeof(dt));

                printk(KERN_ALERT "Now data is: %s", data);
                for(i=0; data[i]; i++);
                printk(KERN_ALERT "data length: %d", i);

                kfree(tmp);

            }       
        }   
    }
    return NF_ACCEPT;
}

/*
 * Nothing to be touched hereafter
 */

module_init(cat_obsf_init);
module_exit(cat_obsf_exit);

MODULE_AUTHOR("Rifat");
MODULE_DESCRIPTION("Module for packet mangling");
MODULE_LICENSE("GPL"); 
```

我希望在从内核空间发送客户端计算机时将“消息”变为“message12345”。这样服务器将获得“message12345”并将其回显，而客户端将仅读取“message12345”但是我在使用 skb_put() 和 skb_add_data() 函数时遇到了问题。我不明白我犯了什么错误。如果有人可以帮助我编写代码，我将不胜感激。提前致谢。为了方便起见，我还提供了 Makefile。这是针对分发内核的，而不是针对构建内核的。

```
#If KERNELRELEASE is defined, we've been invoked from the
#kernel build system and use its language
ifneq ($(KERNELRELEASE),)
    obj-m := ibss_obsf_cat.o

#Otherwise we were called directly from the command
#line; invoke the kernel build system.
else

    KERNELDIR ?= /lib/modules/$(shell uname -r)/build
    PWD := $(shell pwd)

default:
    $(MAKE) -C $(KERNELDIR) M=$(PWD) modules

endif 
```

现在我非常确信 skb->end - skb->tail 是如此之小，以至于我必须在内核空间中创建新的数据包。我已经使用 alloc_skb() skb_reserve() skb_header_pointer() 和其他有用的 skb 函数来创建新的 skb，但我不知道如何在数据包流动路径中路由新创建的数据包。如何使用
ip_route_me_harder() 我在 xtables-addons 包中寻找建议，但他们使用的函数与 linux 内核中的函数不同。欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T22:18:39.983

大约一年前，对于内核 2.6.26，我是这样做的：

```
// Do we need extra space?
if(len - skb_tailroom(skb) > 0){

  // Expand skb tail until we have enough room for the extra data
  if (pskb_expand_head(skb, 0, extra_data_len - skb_tailroom(skb), GFP_ATOMIC)) {
    // allocation failed. Do whatever you need to do
  }

  // Allocation succeeded

  // Reserve space in skb and return the starting point
  your_favourite_structure* ptr = (your_favourite_structure*) 
                                  skb_push(skb, sizeof(*ptr)); 

  // Now either set each field of your structure or memcpy into it.
  // Remember you can use a char*

} 
```

不要忘记：

*   重新计算 UDP 校验和，因为您更改了传输数据中的数据。

*   更改`tot_len`ip 标头中的字段（总长度），因为您将数据添加到数据包中。

*   重新计算 IP 标头校验和，因为您更改了该`tot_len`字段。

**额外说明**：这只是一件简单的事情。我在您的代码中看到您分配`tmp`为 200 字节数组并使用它来存储您的消息数据。如果您发送更大的数据包，您将很难调试它，因为由于内存溢出导致内核崩溃太痛苦了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:03:37.397

我已经解决了这个问题。这是微不足道的。我要做的就是发布我的代码以供将来参考和讨论。

```
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/skbuff.h>
#include <linux/netfilter.h>
#include <linux/netdevice.h>
#include <linux/ip.h>
#include <linux/udp.h>
#include <linux/mm.h>
#include <linux/err.h>
#include <linux/crypto.h>
#include <linux/init.h>
#include <linux/crypto.h>
#include <linux/scatterlist.h>
#include <net/ip.h>
#include <net/udp.h>
#include <net/route.h>

#undef __KERNEL__
#include <linux/netfilter_ipv4.h>
#define __KERNEL__

#define IP_HDR_LEN 20
#define UDP_HDR_LEN 8
#define TOT_HDR_LEN 28

static unsigned int pkt_mangle_begin(unsigned int hooknum,
                        struct sk_buff *skb,
                        const struct net_device *in,
                        const struct net_device *out,
                        int (*okfn)(struct sk_buff *));

static struct nf_hook_ops pkt_mangle_ops __read_mostly = {
    .pf = NFPROTO_IPV4,
    .priority = 1,
    .hooknum = NF_IP_LOCAL_OUT,
    .hook = pkt_mangle_begin,
};

static int __init pkt_mangle_init(void)
{
    printk(KERN_ALERT "\npkt_mangle module started ...");
    return nf_register_hook(&pkt_mangle_ops);
}

static void __exit pkt_mangle_exit(void)
{
    nf_unregister_hook(&pkt_mangle_ops);
    printk(KERN_ALERT "pkt_mangle module stopped ...");
} 

static unsigned int pkt_mangle_begin (unsigned int hooknum,
                        struct sk_buff *skb,
                        const struct net_device *in,
                        const struct net_device *out,
                        int (*okfn)(struct sk_buff *))
{ 
    struct iphdr *iph;
    struct udphdr *udph;
    unsigned char *data;

    unsigned int data_len;
    unsigned char extra_data[] = "12345";
    unsigned char *temp;
    unsigned int extra_data_len;
    unsigned int tot_data_len;

    unsigned int i;

    __u16 dst_port, src_port;

    if (skb) {
        iph = (struct iphdr *) skb_header_pointer (skb, 0, 0, NULL);

        if (iph && iph->protocol &&(iph->protocol == IPPROTO_UDP)) {
            udph = (struct udphdr *) skb_header_pointer (skb, IP_HDR_LEN, 0, NULL);
            src_port = ntohs (udph->source);
            dst_port = ntohs (udph->dest);

            if (src_port == 6000) {
                printk(KERN_ALERT "UDP packet goes out");
                data = (unsigned char *) skb_header_pointer (skb, IP_HDR_LEN+UDP_HDR_LEN, 0, NULL);
                data_len = skb->len - TOT_HDR_LEN;

                    temp = kmalloc(512 * sizeof(char), GFP_ATOMIC);
                memcpy(temp, data, data_len);

                unsigned char *ptr = temp + data_len - 1;
                extra_data_len = sizeof(extra_data);
                memcpy(ptr, extra_data, extra_data_len);
                tot_data_len = data_len + extra_data_len - 1;

                skb_put(skb, extra_data_len - 1);

                memcpy(data, temp, tot_data_len);

                /* Manipulating necessary header fields */
                iph->tot_len = htons(tot_data_len + TOT_HDR_LEN);
                udph->len = htons(tot_data_len + UDP_HDR_LEN);

                /* Calculation of IP header checksum */
                iph->check = 0;
                ip_send_check (iph);

                /* Calculation of UDP checksum */
                udph->check = 0;
                int offset = skb_transport_offset(skb);
                int len = skb->len - offset;
                udph->check = ~csum_tcpudp_magic((iph->saddr), (iph->daddr), len, IPPROTO_UDP, 0);

                 }
        }
    }
    return NF_ACCEPT;
}

module_init(pkt_mangle_init);
module_exit(pkt_mangle_exit);

MODULE_AUTHOR("Rifat Rahman Ovi: <rifatrahmanovi@gmail.com>");
MODULE_DESCRIPTION("Outward Packet Mangling and Decryption in Kernel Space");
MODULE_LICENSE("GPL"); 
```

问题是，我忘记更新长度字段并忘记更新校验和。现在，如果我在这里正确显示代码，一切都会顺利。还有一些其他的辅助函数，这里没有包含。

# login - 使用不同方式登录时如何识别用户

> ID：12529498
> 
> 赞同：-1
> 
> 时间：2012-09-21T11:21:03.350
> 
> 标签：login, oauth, user-registration

SO 正在使用多种方式让用户登录，例如使用来自 gmail、yahoo、facebook、stackexchange 和 open ID 的电子邮件地址。

用户可以使用例如；gmail 并享受了几天，然后由于任何或某种原因（我假设，他忘记了实际方式），他开始使用 facebook。现在 SO 将为同一用户提供多条记录。有什么办法，网站可以识别那里的老会员？

这只是一个混乱，我对这个概念很好奇。就像注册和登录的一种方式就足够了，并且有助于保持会员的 SINGLE 记录。我更喜欢网站自己的注册和登录表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:39:13.760

使用不同方式“登录”时，您无法识别用户。除非您要求用户将不同的方式链接到一个用户配置文件。StackExchange 使这成为可能，您可以简单地向您的用户添加另一个 OpenID 身份。

一旦您通过 OpenID 或 OAuth 为您的服务启用用户身份验证，您将面临这个挑战，并且可以选择通过启用身份“链接”到用户工件来解决它，或者您可以选择忽略它。

您对 OpenID 的好处感到困惑吗？

# android - Android Fragment 回栈的问题

> ID：12529499
> 
> 赞同：126
> 
> 时间：2012-09-21T11:21:11.540
> 
> 标签：android, android-fragments, back-stack

我在 android 片段 backstack 的工作方式上遇到了一个大问题，并且非常感谢提供的任何帮助。

想象一下你有 3 个片段

`[1] [2] [3]`

我希望用户能够导航`[1] > [2] > [3]`但在返回的路上（按下返回按钮）`[3] > [1]`。

正如我想象的那样，这将通过`addToBackStack(..)`在创建将片段`[2]`带入 XML 中定义的片段持有者的事务时不调用来实现。

现实情况似乎是，如果我不想`[2]`在用户按下返回按钮时再次出现`[3]`，我就不能调用`addToBackStack`显示片段的事务`[3]`。这似乎完全违反直觉（可能来自 iOS 世界）。

无论如何，如果我这样做，当我离开`[1] > [2]`并按回时，我会按`[1]`预期返回。

如果我去`[1] > [2] > [3]`然后按回来，我会跳回`[1]`（如预期的那样）。现在，当我尝试`[2]`再次从`[1]`. 首先是在进入视野`[3]`之前简要显示。`[2]`如果我此时按下返回，`[3]`则会显示，如果我再次按下返回，应用程序将退出。

谁能帮我理解这里发生了什么？

这是我的主要活动的布局 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:orientation="vertical" >

<fragment
        android:id="@+id/headerFragment"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        class="com.fragment_test.FragmentControls" >
    <!-- Preview: layout=@layout/details -->
</fragment>
<FrameLayout
        android:id="@+id/detailFragment"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"

        /> 
```

**更新** 这是我用来通过 nav heirarchy 构建的代码

```
 Fragment frag;
    FragmentTransaction transaction;

    //Create The first fragment [1], add it to the view, BUT Dont add the transaction to the backstack
    frag = new Fragment1();

    transaction = getSupportFragmentManager().beginTransaction();
    transaction.replace(R.id.detailFragment, frag);
    transaction.commit();

    //Create the second [2] fragment, add it to the view and add the transaction that replaces the first fragment to the backstack
    frag = new Fragment2();

    transaction = getSupportFragmentManager().beginTransaction();
    transaction.replace(R.id.detailFragment, frag);
    transaction.addToBackStack(null);
    transaction.commit();

    //Create third fragment, Dont add this transaction to the backstack, because we dont want to go back to [2] 
    frag = new Fragment3();
    transaction = getSupportFragmentManager().beginTransaction();
    transaction.replace(R.id.detailFragment, frag);
    transaction.commit();

     //END OF SETUP CODE-------------------------
    //NOW:
    //Press back once and then issue the following code:
    frag = new Fragment2();
    transaction = getSupportFragmentManager().beginTransaction();
    transaction.replace(R.id.detailFragment, frag);
    transaction.addToBackStack(null);
    transaction.commit();

    //Now press back again and you end up at fragment [3] not [1] 
```

非常感谢

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2013-01-12T16:30:28.643

# 说明：这里发生了什么事？

如果我们记住这`.replace()`与`.remove().add()`我们从文档中知道的相同：

> 替换已添加到容器中的现有片段。这本质上与调用`remove(Fragment)`所有当前添加的片段相同，这些片段使用相同的参数添加`containerViewId`，然后`add(int, Fragment, String)`使用此处给出的相同参数。

然后发生的事情是这样的（我在片段中添加数字以使其更清楚）：

```
// transaction.replace(R.id.detailFragment, frag1);
Transaction.remove(null).add(frag1)  // frag1 on view

// transaction.replace(R.id.detailFragment, frag2).addToBackStack(null);
Transaction.remove(frag1).add(frag2).addToBackStack(null)  // frag2 on view

// transaction.replace(R.id.detailFragment, frag3);
Transaction.remove(frag2).add(frag3)  // frag3 on view 
```

^(（这里所有误导性的东西都开始发生了）)

请记住，这`.addToBackStack()`是仅保存**事务**而不是**片段**本身！所以现在我们有了`frag3`布局：

```
< press back button >
// System pops the back stack and find the following saved back entry to be reversed:
// [Transaction.remove(frag1).add(frag2)]
// so the system makes that transaction backward!!!
// tries to remove frag2 (is not there, so it ignores) and re-add(frag1)
// make notice that system doesn't realise that there's a frag3 and does nothing with it
// so it still there attached to view
Transaction.remove(null).add(frag1) //frag1, frag3 on view (OVERLAPPING)

// transaction.replace(R.id.detailFragment, frag2).addToBackStack(null);
Transaction.remove(frag3).add(frag2).addToBackStack(null)  //frag2 on view

< press back button >
// system makes saved transaction backward
Transaction.remove(frag2).add(frag3) //frag3 on view

< press back button >
// no more entries in BackStack
< app exits > 
```

# 可能的解决方案

考虑实施[`FragmentManager.BackStackChangedListener`](http://developer.android.com/reference/android/app/FragmentManager.OnBackStackChangedListener.html)以观察后端堆栈中的变化并在方法中应用您的逻辑[`onBackStackChanged()`](http://developer.android.com/reference/android/app/FragmentManager.OnBackStackChangedListener.html#onBackStackChanged%28%29)：

*   跟踪交易计数；
*   按名称检查特定交易[`FragmentTransaction.addToBackStack(String name);`](http://developer.android.com/reference/android/app/FragmentTransaction.html#addToBackStack%28java.lang.String%29)
*   等等。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-10-17T12:50:11.677

当按下返回时，似乎片段 [3] 没有从视图中删除，因此您必须手动执行！

首先，不要使用`replace()`，而是分别使用 remove 和 add 。好像`replace()`不能正常工作。

下一部分是覆盖该`onKeyDown`方法并在每次按下后退按钮时删除当前片段。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if (keyCode == KeyEvent.KEYCODE_BACK)
    {
        if (getSupportFragmentManager().getBackStackEntryCount() == 0)
        {
            this.finish();
            return false;
        }
        else
        {
            getSupportFragmentManager().popBackStack();
            removeCurrentFragment();

            return false;
        }

    }

    return super.onKeyDown(keyCode, event);
}

public void removeCurrentFragment()
{
    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

    Fragment currentFrag =  getSupportFragmentManager().findFragmentById(R.id.detailFragment);

    String fragName = "NONE";

    if (currentFrag!=null)
        fragName = currentFrag.getClass().getSimpleName();

    if (currentFrag != null)
        transaction.remove(currentFrag);

    transaction.commit();

} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-08-22T18:26:20.517

首先感谢@Arvis 大开眼界的解释。

对于这个问题，我更喜欢这里接受的答案的不同解决方案。我不喜欢在绝对必要的情况下搞乱重写行为，当我尝试自己添加和删除片段时，按下返回按钮时没有默认返回堆栈弹出，我发现自己处于片段地狱:) 如果你.删除时在 f1 上添加 f2 f1 不会调用任何回调方法，如 onResume、onStart 等，这可能是非常不幸的。

无论如何，这就是我的做法：

目前展出的只有片段 f1。

f1 -> f2

```
Fragment2 f2 = new Fragment2();
this.getActivity().getSupportFragmentManager().beginTransaction().replace(R.id.main_content,f2).addToBackStack(null).commit(); 
```

这里没有什么不寻常的。与片段 f2 相比，此代码将您带到片段 f3。

f2 -> f3

```
Fragment3 f3 = new Fragment3();
getActivity().getSupportFragmentManager().popBackStack();
getActivity().getSupportFragmentManager().beginTransaction().replace(R.id.main_content, f3).addToBackStack(null).commit(); 
```

通过阅读文档我不确定这是否可行，据说这种弹出事务方法是异步的，也许更好的方法是调用 popBackStackImmediate()。但据我所知，我的设备运行良好。

所述替代方案是：

```
final FragmentActivity activity = getActivity();
activity.getSupportFragmentManager().popBackStackImmediate();
activity.getSupportFragmentManager().beginTransaction().replace(R.id.main_content, f3).addToBackStack(null).commit(); 
```

在进入 f3 之前，这里实际上会短暂地回到 f1，所以那里有一个小故障。

这实际上就是您所要做的，无需覆盖回栈行为......

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-01-27T21:29:33.323

我知道这是一个老问题，但我遇到了同样的问题并像这样解决它：

首先，使用名称（例如“Frag1”）将 Fragment1 添加到 BackStack：

```
frag = new Fragment1();

transaction = getSupportFragmentManager().beginTransaction();
transaction.replace(R.id.detailFragment, frag);
transaction.addToBackStack("Frag1");
transaction.commit(); 
```

然后，每当你想回到 Fragment1（即使在它上面添加 10 个片段之后），只需调用 popBackStackImmediate 的名称：

```
getSupportFragmentManager().popBackStackImmediate("Frag1", 0); 
```

希望它会帮助某人:)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-08-16T22:05:53.003

在@Arvis 回复后，我决定更深入地挖掘，并在这里写了一篇关于此的技术文章：[http ://www.andreabaccega.com/blog/2015/08/16/how-to-avoid-fragments-overlapping-由于-backstack-nightmare-in-android/](http://www.andreabaccega.com/blog/2015/08/16/how-to-avoid-fragments-overlapping-due-to-backstack-nightmare-in-android/)

对于周围的懒惰开发人员。`FragmentManager.popBackStackImmediate()`我的解决方案是始终将事务添加到后台堆栈并在需要时（自动）执行额外的事务。

该代码是非常少的代码行，在我的示例中，如果用户没有深入后台堆栈（例如从 C 导航到 D），我想从 C 跳到 A 而不会跳回“B”。

因此附加的代码将按如下方式工作 A -> B -> C (back) -> A & A -> B -> C -> D (back) -> C (back) -> B (back) -> A

在哪里

```
fm.beginTransaction().replace(R.id.content, new CFragment()).commit() 
```

如问题所示，从“B”到“C”发出。

好的，好的，这是代码:)

```
public static void performNoBackStackTransaction(FragmentManager fragmentManager, String tag, Fragment fragment) {
  final int newBackStackLength = fragmentManager.getBackStackEntryCount() +1;

  fragmentManager.beginTransaction()
      .replace(R.id.content, fragment, tag)
      .addToBackStack(tag)
      .commit();

  fragmentManager.addOnBackStackChangedListener(new FragmentManager.OnBackStackChangedListener() {
    @Override
    public void onBackStackChanged() {
      int nowCount = fragmentManager.getBackStackEntryCount();
      if (newBackStackLength != nowCount) {
        // we don't really care if going back or forward. we already performed the logic here.
        fragmentManager.removeOnBackStackChangedListener(this);

        if ( newBackStackLength > nowCount ) { // user pressed back
          fragmentManager.popBackStackImmediate();
        }
      }
    }
  });
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-13T04:27:50.237

如果您正在努力使用 addToBackStack() 和 popBackStack() 那么只需使用

```
FragmentTransaction ft =getSupportFragmentManager().beginTransaction();
ft.replace(R.id.content_frame, new HomeFragment(), "Home");
ft.commit();` 
```

在 OnBackPressed() 中的 Activity 中按标签找出fargment，然后做你的事情

```
Fragment home = getSupportFragmentManager().findFragmentByTag("Home");

if (home instanceof HomeFragment && home.isVisible()) {
    // do you stuff
} 
```

有关更多信息[https://github.com/DattaHujare/NavigationDrawer](https://github.com/DattaHujare/NavigationDrawer) 我从不使用 addToBackStack() 来处理片段。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T14:54:48.707

我想，当我读到你的故事时，[3] 也在后面。这就解释了为什么你会看到它闪烁。

解决方案是永远不要在堆栈上设置 [3]。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-21T09:34:42.273

我有一个类似的问题，我在同一个[M1.F0]->[M1.F1]->[M1.F2] 中有 3 个连续**片段**`Activity`，然后调用了一个新的`Activity`[M2]。如果用户按下 [M2] 中的按钮，我想返回 [M1,F1] 而不是 [M1,F2] ，这就是后按行为已经完成的。

为了完成此操作，我删除了 [M1,F2]，在 [M1,F1] 上调用 show，提交事务，然后通过使用 hide 调用它添加 [M1,F2]。这消除了原本会留下的额外的背压。

```
// Remove [M1.F2] to avoid having an extra entry on back press when returning from M2
final FragmentTransaction ftA = fm.beginTransaction();
ftA.remove(M1F2Fragment);
ftA.show(M1F1Fragment);
ftA.commit();
final FragmentTransaction ftB = fm.beginTransaction();
ftB.hide(M1F2Fragment);
ftB.commit(); 
```

* * *

嗨，执行此代码后：我无法在按返回键时看到 Fragment2 的值。我的代码：

```
FragmentTransaction ft = fm.beginTransaction();
ft.add(R.id.frame, f1);
ft.remove(f1);

ft.add(R.id.frame, f2);
ft.addToBackStack(null);

ft.remove(f2);
ft.add(R.id.frame, f3);

ft.commit();

@Override
    public boolean onKeyDown(int keyCode, KeyEvent event){

        if(keyCode == KeyEvent.KEYCODE_BACK){
            Fragment currentFrag =  getFragmentManager().findFragmentById(R.id.frame);
            FragmentTransaction transaction = getFragmentManager().beginTransaction();

            if(currentFrag != null){
                String name = currentFrag.getClass().getName();
            }
            if(getFragmentManager().getBackStackEntryCount() == 0){
            }
            else{
                getFragmentManager().popBackStack();
                removeCurrentFragment();
            }
       }
    return super.onKeyDown(keyCode, event);
   }

public void removeCurrentFragment()
    {
        FragmentTransaction transaction = getFragmentManager().beginTransaction();
        Fragment currentFrag =  getFragmentManager().findFragmentById(R.id.frame);

        if(currentFrag != null){
            transaction.remove(currentFrag);
        }
        transaction.commit();
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-23T18:35:17.117

`executePendingTransactions()`,`commitNow()`不工作 (

在 androidx (jetpack) 中工作。

```
private final FragmentManager fragmentManager = getSupportFragmentManager();

public void removeFragment(FragmentTag tag) {
    Fragment fragmentRemove = fragmentManager.findFragmentByTag(tag.toString());
    if (fragmentRemove != null) {
        fragmentManager.beginTransaction()
                .remove(fragmentRemove)
                .commit();

        // fix by @Ogbe
        fragmentManager.popBackStackImmediate(tag.toString(), 
            FragmentManager.POP_BACK_STACK_INCLUSIVE);
    }
} 
```

# c# - 获取响应流将其转换为 ASCII

> ID：12529500
> 
> 赞同：0
> 
> 时间：2012-09-21T11:21:13.500
> 
> 标签：c#, c#-4.0

此代码段正在向 SMS 网关发送一些值。然后短信网关给了我们一些值。我需要捕获该值并将其写入文件。

当我发送短信时，显示此值：

> b6c56c74-03b0-11e2-b28c-00145e7e986e

```
WebRequest request = WebRequest.Create(
    "http://base.mygateway.com/api/mt?msisdn=" + mobileNo
    + "&body=" + msgOut
    + "&sender=" + shortcode
    + "&key=abcdefghi&product_id=10023&operator="
    + oppp + "&country=UnitedStates");
WebResponse response = request.GetResponse();
byte[] ary = new byte[1000];
response.GetResponseStream().Read(ary, 0, (int) response.ContentLength); 
```

我想转换为来自 ASCII 值`GetResponseStream()`。我不知道该怎么做。在上面的代码中，我取值......如何转换它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:23:35.573

使用[`Encoding`](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)该类将 a 转换`byte[]`为所需的编码。

```
Encoding.ASCII.GetString(ary); 
```

您需要确保从 中返回的值`WebRequest`也被正确编码。为此，您可能需要[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)改用它，因为它有一个`Encoding`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:34:56.270

```
var content = new StreamReader(response.GetResponseStream(),Encoding.UTF8)
                 .ReadToEnd(); 
```

# android - Android 上的 java.util.Date.toString 错误？

> ID：12529506
> 
> 赞同：0
> 
> 时间：2012-09-21T11:21:35.560
> 
> 标签：android, date, tostring

我正在做这个应用程序，我在 Date 上遇到了一些非常奇怪的问题，我只能假设这是一个错误。目前，UI 只是一种测试模式，用于查看我是否从服务器获取了正确的数据。为了调试，我将此行包含在我在列表视图中使用的适配器 getView 中

```
 Log.d(DEBUG_TAG, "date: " + item.date.toString() + "; long: " + item.date.getTime()); 
```

正如我所说，这只是测试数据，我不关心格式，UI 并不重要，稍后我将使用 DateFormater 或 SimpleDateFormater。

但目前这条线给了我这样的日志：

```
 date: Fri Jan 16 15:30:14 GMT 1970; long: 1348214602 
```

如果你在[http://www.epochconverter.com/](http://www.epochconverter.com/)上扔那么久，你会看到今天（2012 年 9 月）左右的正确值，但为什么 .toString() 给我 1970 年 1 月？

有人见过吗？

**编辑：**

日期对象被创建为：

```
 new Date(miliSeconds) 
```

我已经在实例化时间检查过，该值与 getTime() 返回的值相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:28:29.447

将您的日期乘以 1000。不知何故，您使用的是秒而不是毫秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:29:42.160

检查[这篇](https://stackoverflow.com/questions/7487460/java-convert-long-to-date)文章。好像很相似。它可能会帮助你。

```
Date d = new Date(1220227200 * 1000); 
```

# php - 在 Symfony 中使用 Doctrine 创建表

> ID：12529508
> 
> 赞同：4
> 
> 时间：2012-09-21T11:21:46.970
> 
> 标签：php, symfony1, doctrine, symfony-1.4, doctrine-1.2

在 MySQL 中创建“电机”数据库后，我在 Symfony 中使用以下命令配置了数据库：

```
$ php symfony configure:database "mysql:host=localhost;dbname=motor" root <mypassword> 
```

在`appname/config/doctrine/`我有一个`schema.yml`文件。

在这个文件中，我定义了下表：

```
Car:
  actAs: { Timestampable: ~ }
  columns: 
    brand: { type: string(255), notnull: true }
    model: { type: string(255), notnull: true }
    version: { type: string(255), notnull: true }
    url: { type: string(255), notnull: true }
    year: { type: string(4), notnull: true }
    info: { type: string(10000), notnull: true }
    updated_at: { type: timestamp, notnull: true }
    created_at: { type: timestamp, notnull: true } 
```

然后我执行了命令：

```
$ php symfony doctrine:build --model 
```

这给了我以下输出：

```
>> doctrine  generating model classes
>> file+     /tmp/doctrine_schema_57936.yml
>> tokens    /home/username/webapps/www/appname/lib/model/doctrine/CarTable.class.php
>> tokens    /home/username/webapps/www/appname/lib/model/doctrine/Car.class.php
>> tokens    /home/username/webapps/www/appname/lib/model/doctrine/base/BaseCar.class.php
>> autoload  Resetting application autoloaders
>> file-     /home/username/webapps/www/appname/cache/frontend/dev/config/config_autoload.yml.php 
```

之后，我继续使用以下命令生成 sql：

```
$ php symfony doctrine:build --sql 
```

输出是：

```
>> doctrine  generating model classes
>> file+     /tmp/doctrine_schema_89541.yml
>> tokens    /home/username/webapps/www/motor/lib/model/doctrine/base/BaseCar.class.php
>> autoload  Resetting application autoloaders
>> file-     /home/username/webapps/www/motor/cache/frontend/dev/config/config_autoload.yml.php
>> doctrine  generating sql for models
>> doctrine  Generated SQL successfully for models 
```

但是在生成`appname/data/sql/`的文件下`schema.sql`是空的。

所以这个命令`$ php symfony doctrine:insert-sql`，没有在我的数据库中生成任何表。但是它给出了成功的消息输出：

```
>> doctrine  creating tables
>> doctrine  created tables successfully 
```

命令`$ php symfony doctrine:build --all`，也没有用。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T17:05:45.443

我用来做这件事的方法似乎没有任何问题。

问题在于我使用的 Symfony 版本，由于某种原因无法正常工作。

为了修复它，我下载了最新的 Symfony 1.4.18 版本并再次运行代码，这次它运行正常。

# iphone - 如何为图像编辑（调整大小、旋转、3D 变换）进行 UNDO 操作？

> ID：12529509
> 
> 赞同：0
> 
> 时间：2012-09-21T11:21:47.430
> 
> 标签：iphone

如何在图像处理中进行 UNDO 动作？如果我要更改图像位置（调整大小、旋转、3D 变换）然后单击 UNDO 按钮，我想要图像的先前状态。怎么做？请提供示例源代码或对此提供一些想法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:26:08.627

实现可撤销操作的常用方法是在每次操作后存储状态。所以，在这种情况下，你可以

1.  存储图像的每个版本。这在内存方面效率极低。
2.  存储每个变换步骤；当要撤消一个变换时，您只需将变换的逆应用于图像。这是一种优选的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:41:06.273

与`NSDictionary`所有`effects`提供/或可以与您一起应用`editor`

1.  存入`NSDictionary`一个`NSMutableArray`with`[lastEffectArray addObject:effectDictionary];`
2.  如果用户按下 UNDO，则从配对加载和应用`effectDictionary`效果。在这里，您可以做两件事：`lastEffectArray``key/value`

可以将`Remove`last `effectDictionary`object from `lastEffectArray`or, `Add`it for REDO action放到其他数组中。

您`effectDictionary`应该存储可以使用或应用到您的`editor`. 您可以制作一些易于使用的功能来应用/删除效果！！！

最后，不要忘记`[release]`所有效果数组和字典。

注意，这不是一个解决方案，但可以用自己的创新逻辑来实现。

# javascript - 在 Backbone.js 中从视图中取消绑定模型

> ID：12529511
> 
> 赞同：2
> 
> 时间：2012-09-21T11:21:54.187
> 
> 标签：javascript, jquery-mobile, backbone.js

我有一个控制 HTML5 音频播放器的音频播放器类。我正在监视音频播放器事件并将它们触发到关联的视图。在视图文件上，这是我绑定适当事件的方式

```
app.audioPlayer.$el.bind('musicEnded', _.bind(this.onMusicEnded, this));
app.audioPlayer.$el.bind('askForNextMusic', _.bind(this.onAskForNextMusic, this));
app.audioPlayer.$el.bind('askForPreviousMusic', _.bind(this.onAskForPreviousMusic, this)); 
```

一旦我从这个视图中移出，我想从这个视图中解除绑定事件。我为此尝试过这样

```
app.audioPlayer.$el.unbind('musicEnded', _.bind(this.onMusicEnded, this));
app.audioPlayer.$el.unbind('askForNextMusic', _.bind(this.onAskForNextMusic, this));
app.audioPlayer.$el.unbind('askForPreviousMusic', _.bind(this.onAskForPreviousMusic, this)); 
```

但它似乎有任何效果。我怎样才能在backbonejs中正确地做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:26:45.210

您的代码的问题是，您使用`_.bind`. 因为这将始终创建一个新功能。所以你绑定的函数和你尝试解绑的函数是不一样的，所以解绑是行不通的。

您必须保存对您绑定的函数的引用，或者`_.bindAll`在开始时使用，因为这会将您当前的函数替换为绑定的函数。因此，当您使用绑定/取消绑定时，它是相同的功能：

```
_.bindAll(this, onMusicEnded) 
// the will replace this.onMusicEnded with _.bind(this.onMusicEnded, this)
app.audioPlayer.$el.bind('musicEnded', this.onMusicEnded);
app.audioPlayer.$el.unbind('musicEnded', this.onMusicEnded); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:29:10.153

[http://backbonejs.org/#Events](http://backbonejs.org/#Events)

将回调函数绑定到对象。每当触发事件时都会调用回调。

```
object.on(event, callback, [context]) 
```

从对象中删除先前绑定的回调函数。

```
object.off([event], [callback], [context]) 
```

# java - 从java创建新的word文档

> ID：12529517
> 
> 赞同：2
> 
> 时间：2012-09-21T11:22:28.263
> 
> 标签：java, swing, event-handling, ms-word

我想打开新的 MS Word 文档以在 java 中单击按钮时打开你能建议我的代码吗，我是通过以下代码执行此操作的，但我认为它是打开现有文档而不是创建新文档

```
class OpenWordFile {

    public static void main(String args[]) {

        try {
            Runtime rt = Runtime.getRuntime();
            rt.exec("cmd.exe /C start Employee.doc");
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, "Exception occured" + ex);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:27:05.773

你不能单独使用 Java 来做到这一点，至少如果你需要生成 DOC 文件，你需要第三个工具库[Aspose](http://www.aspose.com/)。看看[这个线程](https://stackoverflow.com/q/203174/395659)，否则您可以使用运行时打开现有文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:28:47.380

只有没有任何文字的评论

```
Runtime run = Runtime.getRuntime();
String lcOSName = System.getProperty("os.name").toLowerCase();
boolean MAC_OS_X = lcOSName.startsWith("mac os x");
if (MAC_OS_X) {
    run.exec("open " + file);
} else {
    //run.exec("cmd.exe /c start " + file); //win NT, win2000
    run.exec("rundll32 url.dll, FileProtocolHandler " + path);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:29:03.003

在最近的版本`(Java 6.0)`中，Java 提供了 Desktop 类。该类的目的是在您的系统中打开与给定文件关联的应用程序。因此，如果您使用 Word 文档 (.doc) 调用 open() 方法，那么它会自动调用 MS Word，因为这是与 .doc 文件关联的应用程序。

我开发了一个小型 Swing 程序（尽管您可以将其开发为控制台应用程序）来从用户那里获取文档编号并将文档调用到`MSWord`. 假设是；文件存储`filename`在`<document number>>.doc`.

下面给出的是 Java 程序，您可以按原样编译和运行它。确保将 DIR 变量更改为存储 .doc 文件的文件夹。

**这是在 Java 中打开 Word Doc 的代码……它是从网络中提取的……**

```
import java.io.File;
import java.awt.event.*;
import javax.swing.*;
import java.awt.*;

public class WordDocument extends JFrame {
    private JButton btnOpen;
    private JLabel jLabel1;
    private JTextField txtDocNumber;

    private static String DIR  ="c:\\worddocuments\\";   // folder where word documents are present.

    public WordDocument() {
       super("Open Word Document");
       initComponents();
    }

    private void initComponents() {
        jLabel1 = new JLabel();
        txtDocNumber = new JTextField();
        btnOpen = new JButton();

        Container c = getContentPane();
        c.setLayout(new java.awt.FlowLayout());
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("Enter Document Number  : ");
        c.add(jLabel1);

        txtDocNumber.setColumns(5);
        c.add(txtDocNumber);

        btnOpen.setText("Open Document");
        btnOpen.addActionListener(new ActionListener() {      // anonymous inner class 
            public void actionPerformed(ActionEvent evt) {
                  Desktop desktop = Desktop.getDesktop();  
              try {
                File f = new File( DIR + txtDocNumber.getText()  +  ".doc");
                 desktop.open(f);  // opens application (MSWord) associated with .doc file
              }
              catch(Exception ex) {
                // WordDocument.this is to refer to outer class's instance from inner class
                JOptionPane.showMessageDialog(WordDocument.this,ex.getMessage(),"Error", JOptionPane.ERROR_MESSAGE);
              }
            }
        });

        c.add(btnOpen);

    } // initCompnents()

    public static void main(String args[]) {
          WordDocument wd = new WordDocument();
          wd.setSize(300,100);
          wd.setVisible(true);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T11:32:13.500

也许使用 java.awt.Desktop 可以提供帮助？

```
 File f = new File("<some temp path>\\file.docx");
    f.createNewFile();

    Desktop.getDesktop().open(f); 
```

创建一个新的空文档并使用扩展的系统特定程序打开它。该解决方案的优势在于它适用于所有操作系统...只要操作系统具有查看文件的程序即可。

尽管我怀疑您正在寻找对文件创建具有更多控制权的东西...

# tsql - 拆分字符串并更新sql中的特定值

> ID：12529522
> 
> 赞同：-1
> 
> 时间：2012-09-21T11:22:51.557
> 
> 标签：tsql, split, sql-update

字段值：03/2008
我想将它从“/”中拆分出来，并想更新年份的值，即 2012 年而不是 2008 年。我想更新同一列中的值，即 03/2012 而不是 03/2008。在更新查询中，我没有得到是否必须使用 substr 以及如何替换同一字符串中的新值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:14:27.960

请尝试这样的事情>>>

```
UPDATE table SET field = replace(substr(FIELD,2,6),'2008'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:27:50.157

我建议使用整数来表示第 0 天之后的月数，'03/2008' 变为 1298。或者，您可以使用日期（如果您使用 2005 年或更少，则为日期时间）并将日期设置为 1，因此 '03/2008变为 2008-03-01。为了立即解决您的问题，这是一个很好的解决方案，它会忽略前 3 个字符的值，如果它们的值为“2008”，则将接下来的 4 个字符替换为 2012

```
update table set field = left(field, 3) + '2008' where field like '___2008' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T13:11:11.613

如果您只想更改字段 = 03/2008

```
UPDATE  table
SET   field = '03/2012'
where field = '03/2008' 
```

bsm 您在答案中的替换会变慢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:41:43.747

非常感谢你们的回复。它以这种方式工作..

```
UPDATE    table
SET  field = REPLACE('03/2008', '2008', '2012')
where field="03/2008" 
```

# python - 在 Python 中获取列表的值

> ID：12529529
> 
> 赞同：1
> 
> 时间：2012-09-21T11:23:08.787
> 
> 标签：python, list, dictionary

我有一个包含 2 个字典的列表，如下所示：

`accuracy=[{'value':1,'key':'apple'}, {'value':2,'key':'orange'}]`

我有如下代码：

```
for fruit in accuracy:
    print fruit 
```

上面的代码将给出以下结果：

`{'value':1,'key':'apple'} {'value':2,'key':'orange'}`

但我想要这样的东西：

如果我给出`name=fruit.key`的输出应该`name=apple`和橙色的情况相同，如果我给出`name=fruit.value`的输出应该`value=1`和其他水果的情况相似。我怎样才能做到这一点。我知道上面的代码，即；`name=fruit.key`不会产生我想要的结果。那么有没有办法得到它？请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T11:25:23.163

你可以这样做：

```
accuracy=[{'value':1,'key':'apple'}, {'value':2,'key':'orange'}]
for fruit in accuracy:
    print 'name={key}'.format(**fruit)
    print 'value={value}'.format(**fruit) 
```

我相信这可以满足您的需求。您可以在此处阅读有关 Python 字符串格式化（`str.format()`方法）的更多信息：

*   [Python 2.7.3 手册：格式示例](http://docs.python.org/library/string.html#format-examples)

## 使用点符号

@mgilson 提到了另一种可能性，它可能更符合您的要求。尽管我认为在这种情况下这是一种矫枉过正（为什么只是为了改变符号？），但它可能对某些人来说很有趣，所以我在下面添加它：

```
# Here is the special class @mgilson mentioned:
class DotDict(dict):
    def __getattr__(self, attr):
        return self.get(attr, None)
    __setattr__=dict.__setitem__
    __delattr__=dict.__delitem__

accuracy=[{'value':1,'key':'apple'}, {'value':2,'key':'orange'}]    
for fruit in accuracy:
    # Convert dict to DotDict before passing to .format() method:
    print 'name={fruit.key}'.format(fruit=DotDict(fruit)) 
```

# apache-httpclient-4.x - Apache HTTP 客户端不遵守 HTTP 状态代码 307

> ID：12529533
> 
> 赞同：4
> 
> 时间：2012-09-21T11:23:25.587
> 
> 标签：apache-httpclient-4.x, apache-httpcomponents

当我们的 Android 客户端使用 Apache HTTP 客户端向我们的服务器发出请求时，我希望它使用相同的 HTTP 方法重定向到新的 url（或更具体地说，其他上下文路径）。

在我的 httpd.conf 中，我使用状态码 307 设置了这条规则：

```
Redirect    307    /mybipper/reg           /mybipperapi/old/reg 
```

根据 Wikipedia 中的状态代码描述，307 应该：

[http://en.wikipedia.org/wiki/HTTP_307#3xx_Redirection](http://en.wikipedia.org/wiki/HTTP_307#3xx_Redirection)

307 临时重定向（从 HTTP/1.1 开始） 在这种情况下，应该使用另一个 URI 重复请求；但是，未来的请求仍然可以使用原始 URI。[2] 与历史上 302 的实现方式相比，在重新发出原始请求时不应更改请求方法。例如，必须使用另一个 POST 请求重复一个 POST 请求。

但是在我的访问日志中，我们看到 HTTP 客户端似乎不尊重它，而是执行 GET，就好像我返回了状态代码 302

```
172.29.9.120 - - [21/Sep/2012:14:02:11 +0300] "POST /mybipper/reg HTTP/1.1" 307 248
172.29.9.120 - - [21/Sep/2012:14:02:11 +0300] "GET /mybipperapi/old/reg HTTP/1.1" 400 1016 
```

根据 Apache HTTP Client 网站，它有点不清楚它应该如何处理状态码 307，但他们至少在那里列出了它。

[http://hc.apache.org/httpclient-3.x/redirects.html](http://hc.apache.org/httpclient-3.x/redirects.html)

我有一种强烈的感觉，它的 Apache HTTP 客户端没有正确实现 HTTP 1.1 协议，我是正确的还是我误解了什么？

我们使用的 Apache HTTP 客户端与 Android SDK 捆绑在一起。我正在测试的手机有 Android SDK 15，所以这个：

[http://developer.android.com/about/versions/android-4.0.3.html](http://developer.android.com/about/versions/android-4.0.3.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-05T19:44:57.963

`DefaultRedirectStrategy`唯一允许 GET 和 HEAD 自动重定向。如果您还想允许 POST（但不允许 PUT 或 DELETE），您可以`LaxRedirectStrategy`通过执行以下操作切换到：

```
HttpClientBuilder hcb = HttpClients.custom();
hcb.setRedirectStrategy(new LaxRedirectStrategy());
HttpClient client = hcb.build(); 
```

如果您还想遵循 PUT 和 DELETE（就像我们在此处所做的那样），则必须实施自定义策略（注意：我们在 HttpClient 中遇到了一个错误，它似乎试图添加第二个 Content-Length 标头当我们这样做时，所以我们手动删除它。YMMV）。通过使用这种策略，HttpClient 还将支持 308 重定向，这是 Apache 团队甚至懒得包括在内的。

你可以这样做：

```
hcb.setRedirectStrategy(new DefaultRedirectStrategy() {
        public boolean isRedirected(HttpRequest request, HttpResponse response, HttpContext context) throws ProtocolException {
            Args.notNull(request, "HTTP request");
            Args.notNull(response, "HTTP response");
            int statusCode = response.getStatusLine().getStatusCode();
            switch(statusCode) {
            case 301:
            case 307:
            case 302:
            case 308:
            case 303:
                return true;
            case 304:
            case 305:
            case 306:
            default:
                return false;
            }
        }

        public HttpUriRequest getRedirect(HttpRequest request, HttpResponse response, HttpContext context) throws ProtocolException {
            URI uri = this.getLocationURI(request, response, context);
            String method = request.getRequestLine().getMethod();
            if(method.equalsIgnoreCase("HEAD")) {
                return new HttpHead(uri);
            } else if(method.equalsIgnoreCase("GET")) {
                return new HttpGet(uri);
            } else {
                int status = response.getStatusLine().getStatusCode();
                HttpUriRequest toReturn = null;
                if(status == 307 || status == 308) {
                    toReturn = RequestBuilder.copy(request).setUri(uri).build();
                    toReturn.removeHeaders("Content-Length"); //Workaround for an apparent bug in HttpClient
                } else {
                    toReturn = new HttpGet(uri);
                }
                return toReturn;
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-12T04:07:11.503

如果您还想将 308 添加到 LaxRedirectStrategy - 请参见下面的代码

```
.setRedirectStrategy(new LaxRedirectStrategy() {
          @Override
             public boolean isRedirected(
                     final HttpRequest request,
                     final HttpResponse response,
                     final HttpContext context) throws ProtocolException {
                 Args.notNull(request, "HTTP request");
                 Args.notNull(response, "HTTP response");

                 final int statusCode = response.getStatusLine().getStatusCode();
                 final String method = request.getRequestLine().getMethod();
                 final Header locationHeader = response.getFirstHeader("location");
                 switch (statusCode) {
                 case HttpStatus.SC_MOVED_TEMPORARILY:
                     return isRedirectable(method) && locationHeader != null;
                 case HttpStatus.SC_MOVED_PERMANENTLY:
                 case HttpStatus.SC_TEMPORARY_REDIRECT:
                     return isRedirectable(method);
                 case HttpStatus.SC_SEE_OTHER:
                     return true;
                 case 308:
                     return true;
                 default:
                     return false;
                 } //end of switch
             }
     })
             .build();``` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-17T14:17:08.837

要扩展 Cody 的正确答案 - 如果您需要遵循 PUT（或任何其他方法）307 重定向，那么您可以选择扩展`LaxRedirectStrategy`，这更容易：

```
hcb.setRedirectStrategy(new LaxRedirectStrategy()
{
    protected boolean isRedirectable(String method)
    {
        return "PUT".equalsIgnoreCase(method)||super.isRedirectable(method);
    }
}); 
```

但是，这也不能解决跟随 308 的问题。我知道这是一个老问题，但我今天遇到了同样的问题（感谢科迪）。

# mysql - MySQL中的版本控制树结构

> ID：12529534
> 
> 赞同：4
> 
> 时间：2012-09-21T11:23:27.303
> 
> 标签：mysql, sql, version-control, tree

考虑一个分层文件系统，其中每个*文件夹*都维护一个版本历史（即名称和其他属性可能会更改）。我需要在其中实现这一点，`MySQL 5.1`但未来的版本可能会移植到`SQL Server 2012`.

我了解数据库中的树结构有多种选择：

*   [邻接表](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)
*   [嵌套集](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)（可能导致插入速度极慢）
*   [嵌套间隔](http://arxiv.org/html/cs.DB/0401014)（复杂的东西，需要支持递归......）

这些技术之前已经在 StackOverflow 上讨论过。但是，我的问题为问题增加了另一个维度，因为我需要维护每个节点的历史记录。需要维护的数据可以看作是一个属性列表。例如姓名、日期、类型...

**一些处所**

*   该数据库预计将同时处理 5-10 个客户端。
*   该树预计将增长到 1000-5000 个父节点（具有任意数量的叶子）。
*   节点可以随时插入。
*   节点/叶子可能*永远不会*被更新或删除。Insted，维护版本历史。
*   不允许重组节点。（虽然，如果可能的话，这将是很好的！）
*   多个客户端可以同时添加/修改树节点。因此，客户端需要不断地重新读取树结构（不需要实时更新）。
*   重要性顺序：可追溯性（关键）、性能、可扩展性。

**问：树结构及其版本控制节点数据的首选技术是什么？**SQL 示例很受欢迎，但不是强制性的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:30:12.140

版本控制非常棘手，因为您正在处理随时间变化的数据，并且您建议的数据库（或我知道的任何其他数据库）都没有原生支持简单地执行此操作。

请阅读[使用 SQL 开发面向时间的数据库应用程序](http://www.cs.arizona.edu/people/rts/tdbbook.pdf)；这本书可能有将近 15 年的历史，但问题基本没有改变。

您提到**“可追溯性（关键）”**这一事实表明您将要做到这一点。

在考虑仅显示继承关系的简单报告时，您需要考虑的问题是您是否需要知道：

*   今天的树是什么样子，使用今天的数据（是的，很明显）
*   使用上周的数据，树现在的样子
*   使用今天的数据，树一周前的样子
*   使用上周的数据，树一周前的样子
*   树一周前的样子，使用前一周的数据

您面临的问题是因为您正在处理随时间变化的数据，这些数据的更新时间与其正在建模的真实世界过程不同，它本身可能正在处理时态数据。不管怎样，看书吧。

**如果**这不是问题（即树是静态的），那么@didierc 在他的评论中是正确的，树的节点可以引用外部版本控制表。但是，如果您还需要存储有关 heirachy 本身的版本控制信息，那么如果天真地实施（使用任何模型），这种方法将不起作用。

举一个具体的例子，考虑一个在 13 年 1 月 1 日有效的简单树 - A->B->C。如果这在 2013 年 1 月 2 日更改为 A->D->B->C。如果您在 2013 年 1 月 3 日运行查询，回溯 13 年 1 月 2 日，您要检索哪棵树？

祝你好运

# android - AlertDialog - 无法恢复活动

> ID：12529536
> 
> 赞同：0
> 
> 时间：2012-09-21T11:23:32.020
> 
> 标签：android, android-alertdialog

我正在尝试在我的应用程序启动之前进行网络验证。我只是在 if else 条件下添加 AlertDialog，如果没有网络，它将提示一个对话框，当用户单击 OK 按钮时，它将重定向到主菜单。我不知道我哪里做错了。请帮忙。谢谢

```
protected void onCreate(Bundle savedInstanceState) {        
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        SharedPreferences myPrefs = this.getSharedPreferences("myPrefs",
                MODE_WORLD_READABLE);
        String username = myPrefs.getString("MEM1", "");
        if (username.equalsIgnoreCase("") || username.length() == 0) {
            toast("Please register to scan product. Only registered user able to scan the product");
            startActivity(new Intent(ProductPreview.this, MainMenu.class)); 
            finish();
        }
    ConnectivityManager connectivityManager = (ConnectivityManager) getApplicationContext() .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
    boolean connected = networkInfo != null && networkInfo.isAvailable()
            && networkInfo.isConnected();

    if (connected) {
        try {
            mAdapter = NfcAdapter.getDefaultAdapter(this);
            mPendingIntent = PendingIntent.getActivity(this, 0, new Intent(
                    this, getClass())
                    .addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
            // Setup an intent filter for all MIME based dispatches
            IntentFilter ndef = new IntentFilter(
                    NfcAdapter.ACTION_TECH_DISCOVERED);
            try {
                ndef.addDataType("*/*");
            } catch (MalformedMimeTypeException e) {
                throw new RuntimeException("fail", e);
            }
            mFilters = new IntentFilter[] { ndef, };
            // Setup a tech list for all NfcF tags
            mTechLists = new String[][] { new String[] { MifareClassic.class
                    .getName() } };

            Intent intent = getIntent();
            resolveIntent(intent);
        } catch (Exception ex) {
            ex.toString();
        }                
    } 
    else {          
         AlertDialog.Builder dialog = new AlertDialog.Builder(this);
         dialog.setTitle("Attention");
          dialog.setMessage("No Internet Connection. Please enable the wifi."
          ); dialog.setPositiveButton("OK", new
          DialogInterface.OnClickListener() { public void
          onClick(DialogInterface dialog, int whichButton) {
          startActivity(new Intent(ProductPreview.this, MainMenu.class)); 
          finish();
              }
          });
          dialog.show();            
    }
} 
```

日志猫

```
09-21 19:19:05.825: E/AndroidRuntime(8413): FATAL EXCEPTION: main
09-21 19:19:05.825: E/AndroidRuntime(8413): java.lang.RuntimeException: Unable to resume activity {com.smartag.mdec.dev/com.smartag.mdec.dev.ProductPreview}: java.lang.NullPointerException
09-21 19:19:05.825: E/AndroidRuntime(8413):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2575)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2603)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2089)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at android.os.Looper.loop(Looper.java:137)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at java.lang.reflect.Method.invokeNative(Native Method)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at java.lang.reflect.Method.invoke(Method.java:511)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at dalvik.system.NativeStart.main(Native Method)
09-21 19:19:05.825: E/AndroidRuntime(8413): Caused by: java.lang.NullPointerException
09-21 19:19:05.825: E/AndroidRuntime(8413):     at com.smartag.mdec.dev.ProductPreview.onResume(ProductPreview.java:176)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1184)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at android.app.Activity.performResume(Activity.java:5082)
09-21 19:19:05.825: E/AndroidRuntime(8413):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2565)
09-21 19:19:05.825: E/AndroidRuntime(8413):     ... 12 more 
```

恢复

```
@Override
public void onResume() {
    super.onResume();
    //ValidateLogin();
    mAdapter.enableForegroundDispatch(this, mPendingIntent, mFilters,
            mTechLists);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:31:35.903

根据您新编辑的代码，您引用的是 madapter 引用而不将其作为对象。但实际上您正在将其作为对象

如果（连接）{

........mAdapter = NfcAdapter.getDefaultAdapter(this);

在使用该引用之前替换该行代码

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:47:42.143

//如果你没有任何方法可以`onResume()`删除它或评论它。

或者只是阻止`ProductPreview.java:176`您的 onresume 方法中的行，该行在那里变得空。

# c# - 使 SqlDataAdapter/Datareader “真正只读”

> ID：12529539
> 
> 赞同：1
> 
> 时间：2012-09-21T11:23:36.230
> 
> 标签：c#, sql-server, winforms, sqldatareader, sqldataadapter

更新的问题：有没有办法强制数据适配器只接受不包含任何更新/删除/创建/删除/插入命令的命令，而不是在发送到数据适配器之前验证 command.text（否则抛出异常）。dot net 在 datareader dataadapter 或任何其他中是否提供了任何此类内置功能？

注意：DataReader 返回结果它也接受更新查询并返回结果。（我可能会遗漏一些错误，但我在执行阅读器之前显示我的更新命令，然后在成功后显示消息，一切正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:32:35.217

你能在字符串中搜索一些关键字吗？像 CREATE、UPDATE、INSERT、DROP 或者查询不以 SELECT 开头？还是这太脆弱了？

您可能还想为此创建一个应用程序使用的仅具有读取功能的登录。我不知道该对象是否具有该属性，但您可以让服务器拒绝交易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:52:41.020

如果您只想要一个 DataTable，那么以下方法很短并且降低了复杂性：

```
public DataTable GetDataForSql(string sql, string connectionString)
{
    using(SqlConnection connection = new SqlConnection(connectionString))
    {
        using(SqlCommand command = new SqlCommand())
        {
            command.CommandType = CommandType.Text;
            command.Connection = connection;
            command.CommandText = sql;
            connection.Open();          
            using(SqlDataReader reader = command.ExecuteReader())
            {
                DataTable data = new DataTable();
                data.Load(reader);
                return data;
            }

        }

    }

} 
```

用法：

```
try{
    DataTable results = GetDataForSql("SELECT * FROM Table;", ApplicationSettings["ConnectionString"]);
}
catch(Exception e)
{
    //Logging
    //Alert to user that command failed.
} 
```

这里实际上不需要使用 DataAdapter - 它并不是真正的你想要的。如果使用了更新、删除或插入命令，为什么还要费心去捕捉异常等？它不适合您想做的事情。

**重要**的是要**注意**SelectCommand 属性没有做任何特殊的事情 - 当 SelectCommand 被执行时，它仍然会运行传递给它的任何命令 - 它只[期望](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.selectcommand.aspx)返回一个结果集，如果没有返回结果，那么它返回一个空数据集。

这意味着（无论如何您都应该这样做）您应该明确地仅授予您希望人们能够查询的表的**SELECT 权限。**

**编辑**

要回答您的另一个问题，[SqlDataReader](http://msdn.microsoft.com/en-us/library/w9y9ttex.aspx)是`ReadOnly`因为它们通过只读的 firehose 样式游标工作。这实际上意味着：

```
while(reader.Read()) //Reads a row at a time moving forward through the resultset (`cursor`)
{
   //Allowed
   string name = reader.GetString(reader.GetOrdinal("name"));
   //Not Allowed - the read only bit means you can't update the results as you move through them
   reader.GetString(reader.GetOrdina("name")) = name;
} 
```

它是只读的，因为它不允许您在浏览记录时更新记录。但是，他们执行以获取结果集的 sql 没有理由无法更新数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:38:27.907

您需要做的就是确保没有为`DataAdapter`. 您的代码可能如下所示：

```
var dataAdapter = new SqlDataAdapter("SELECT * FROM table", "connection string"); 
```

或者

```
var dataAdapter = new SqlDataAdapter("SELECT * FROM table", sqlConnectionObject); 
```

而且，你有一个只读数据适配器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:58:22.093

如果您有只读要求，请让您的 TextBox 使用连接字符串，该连接字符串使用的帐户仅对 SQL 数据库具有 db_datareader 权限。

否则，是什么阻止了正在使用您的控制权的开发人员仅连接到数据库并自行使用 SqlCommand 造成严重破坏？

# spring - Spring会话范围控制器中的瞬态字段

> ID：12529540
> 
> 赞同：2
> 
> 时间：2012-09-21T11:23:37.600
> 
> 标签：spring, session, logging, spring-3

我有一个设置为会话范围的 Spring 控制器 bean，它看起来有点像这样：

```
@Controller
@Scope(WebApplicationContext.SCOPE_SESSION)
@RequestMapping("/test")
public class SessionTestController implements Serializable {

    private static final long serialVersionUID = -7735095657091576437L;

    private transient Log log;

    @PostConstruct
    public void initialise() {
        log = LogFactory.getLog(getClass());
    }

    @RequestMapping(method=RequestMethod.GET)
    @ResponseBody
    public String doGet() throws InterruptedException {
        log.warn("This line will fail after deserialisation..."); // Causes NPE
    }

} 
```

反序列化后似乎 Spring 没有调用`@PostConstruct`，这导致我的“日志”字段变为 null 并在我的`doGet()`方法中抛出 NullPointerException。

您通常如何处理会话范围 bean 中的记录器等不可序列化字段？我是否需要实现一些会话感知接口才能使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:31:45.507

我认为一种典型的方法是使用`readObject()`初始化`transient`字段，无论它是否是 Spring bean：

```
private void readObject(ObjectInputStream stream)
     throws IOException, ClassNotFoundException {
    stream.defaultReadObject();
    initializeTransientFields();
} 
```

# django - Django Social Auth 不保存 Twitter 凭据

> ID：12529544
> 
> 赞同：0
> 
> 时间：2012-09-21T11:23:46.417
> 
> 标签：django, authentication, twitter, token, social

我已经让 django-social-auth 与 Facebook 和 Google 合作良好，但是每次 Twitter 用户登录时都会提示他们授权我的应用程序。似乎令牌可能几乎立即到期。

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:18:27.977

如果我是你，我会这样开始：

1.  检查您是否包含了适当的后端

    AUTHENTICATION_BACKENDS = ('social_auth.backends.twitter.TwitterBackend',)

2.  转到 dev.twitter.com 并重新检查应用程序配置中的所有内容

2.在settings.py中添加如下参数

```
 SOCIAL_AUTH_SESSION_EXPIRATION = False 
```

1.  尝试重新创建错误
2.  检查表格：
    *   social_auth_usersocialauth
    *   django_session

第一个表必须包含一个带有令牌的条目，另一个表必须包含一个非到期会话。这可能会为您提供有关这些行为的更多信息。

# java - 如何使用带有两个主键的 hector 将数据保存到 cassandra columfamily？

> ID：12529548
> 
> 赞同：2
> 
> 时间：2012-09-21T11:24:05.077
> 
> 标签：java, cassandra, hector

我正在使用 cassandra 1.1.4 和 Hector 1.0.2，并且我得到了一个映射到 xls 文档的列族定义，我们希望从中存储数据，如下所示：

```
create table test(
firstId int,
secondId varchar,
somedata varchar,
moredata varchar,
PRIMARY KEY (firstId, secondId)); 
```

这是用户需要的，但我如何在 Hector 中建模。目前我可以将 Mutator`addInsertion(Key k, String cf, HColumn<N,V> sc)`用于单个键，但是有没有办法使用两个主键和不同的数据类型来做到这一点？

任何帮助表示赞赏，即使不可能使用赫克托然后其他东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:08:43.663

Cassandra 是一个键值数据库。它不能有两个键。它可以拥有的是一个复合键，它可以由您的两个所谓的“主键”组成。例如，如果其中之一是 Integer，其中之一是 Long，您将像这样构造密钥 (Pelops)

```
Bytes.composite()
   .addInt(firstKeyVal)
   .addLong(secondKeyVal)
.build(); 
```

使用纯 Thrift，您可以做同样的事情。实际上，您可能会受到一些限制，因为您无法轻松实现复合键。但是，这是可能的。我链接到它：

[如何为列族定义复合键，然后使用 Hector 引用它？](https://stackoverflow.com/questions/7329211/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:52:31.313

使用 CompositeType -[如何为列族定义复合键，然后使用 Hector 引用它？](https://stackoverflow.com/questions/7329211/how-to-define-composite-key-for-a-column-family-and-then-reference-it-using-hect)

你的行键看起来像：firstId:secondId

# mongoose - 您如何使用 mongoose 通过子文档引用找到？

> ID：12529549
> 
> 赞同：0
> 
> 时间：2012-09-21T11:24:05.557
> 
> 标签：mongoose

我正在尝试搜索 ObjectId 引用的子文档的内容，如下所示：

```
Model.Idea.findOne('_key.code':code).populate('_key').exec (err,idea) ->
  return done err if err
  should.exist idea 
```

架构如下所示：

```
Key = new mongoose.Schema(
  type:
    type: String
    enum: types
    index: true
  code:
    type: String
    index:
      unique: true
)
Model.Key = ...

Idea = new mongoose.Schema(
  text: String
  name: String
  _key:
    type: mongoose.Schema.Types.ObjectId
    ref: 'Key'
)
Model.Idea = ... 
```

我这样做的原因是我想在各种密钥类型中预先分配一堆密钥，然后根据需要分配它们。

出于某种原因，我认为这是可能的，但查询似乎没有返回任何结果。有没有办法在不先查找密钥然后引用 Id 的情况下做到这一点？我想我可能有这样的印象，你可以从嵌入的子文档中做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:38:34.180

没有。您的`Idea.findOne`查询选择器无法引用其中的属性，`_key`因为它的填充直到主查询完成后才会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:00:06.450

尝试

```
Model.Idea.findOne()
.populate('_key', null, {'code':code})
.exec (err,idea) ->
  return done err if err
  should.exist idea 
```

# vhdl - net、vhdl shiftreg 的恒定驱动程序

> ID：12529551
> 
> 赞同：0
> 
> 时间：2012-09-21T11:24:10.390
> 
> 标签：vhdl, shift

我正在尝试在 vhdl 中制作移位寄存器。

我的问题是当我尝试将值存储在寄存器中时。这是引起麻烦的代码：

```
architecture behave of chan_mod is
signal adc_shfreg : std_logic_vector(15 DOWNTO 0);
signal dac_shfreg : std_logic_vector(15 DOWNTO 0);

begin
    Rcv_adc:
    process(mclk, reset)
    begin
        if rising_edge(mclk) then
            if (reset = '0') then
                adc_out <= "0000000000000000";
            elsif(chan_on = '1' AND subcycle_cntr = "01" AND chan_sel = '0' AND bit_cntr < 16) then
                adc_shfreg <= adc_shfreg(14 DOWNTO 0) & adcdat;
            end if;
        end if;
    end process;
    adc_out <= adc_shfreg;  --compilation error here 
```

我得到的错误是：

> 错误 (10028)：无法在 chan_mod.vhd(40) 解析网络“adc_out[13]”的多个常量驱动程序

不知道您是否需要查看我的端口，但它们是：

```
entity chan_mod is
    Port ( mclk : in std_LOGIC;
             reset : in std_logic;
             chan_on : in std_logic;
             chan_sel : in std_logic;
             adcdat : in std_logic;
             dacdat : out std_logic;
             bit_cntr : in std_logic_vector(4 DOWNTO 0);
             subcycle_cntr : in std_logic_vector(1 downto 0);
             dac_in : in std_logic_vector(15 DOWNTO 0);
             adc_out : out std_LOGIC_vector(15 DOWNTO 0);
             rd : in std_logic;
             wr : in std_logic);
end chan_mod; 
```

（正如您可能猜到的，其中一些会在后面的代码中使用，因此不在我的代码示例中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:30:36.227

您的问题是您正在推动**adc_out**在此过程中以及使用并发分配。您应该将重置情况下对**adc_out的分配替换为对****adc_shfreg**的分配。

```
architecture behave of chan_mod is
signal adc_shfreg : std_logic_vector(15 DOWNTO 0);
signal dac_shfreg : std_logic_vector(15 DOWNTO 0);

begin
    Rcv_adc:
    process(mclk, reset)
    begin
        if rising_edge(mclk) then
            if (reset = '0') then
                adc_out <= "0000000000000000"; <--- BAD! Replace adc_out with adc_shfreg
            elsif(chan_on = '1' AND subcycle_cntr = "01" AND chan_sel = '0' AND bit_cntr < 16) then
                adc_shfreg <= adc_shfreg(14 DOWNTO 0) & adcdat;
            end if;
        end if;
    end process;
    adc_out <= adc_shfreg;  --compilation error here 
```

# c++ - 修改引用变量，而不是它们别名的变量

> ID：12529554
> 
> 赞同：0
> 
> 时间：2012-09-21T11:24:27.293
> 
> 标签：c++, reference

> **可能重复：**
> [C++ 引用，更改引用的变量](https://stackoverflow.com/questions/7713266/c-reference-change-the-refered-variable)

我知道 C++ 中的引用只是在您使用它们时为您取消引用的指针。这个问题是关于如何访问底层指针并更改它。

考虑这段代码：

```
int x;
int& x_ref = x;              //now equivalent to x
int* x_ptr = &x;         //stores address of x
int* x_ref_ptr = &x_ref; //ALSO stores address of x

int&* x_ref_ptr_ref = ???; //what would this mean? 
```

我正在尝试在初始化后更改参考点的位置。我不关心类型安全或适当的做法。c++语言有什么工具可以让我完成这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T11:25:44.237

没有指向引用的指针，它的格式不正确。引用是对象的别名。指向别名的指针如何工作？

此外，该语言的一个*特性*是无法重新设置引用。可重新安装的引用是一个指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:30:32.910

*这在设计*上是不可能的。通过使用引用而不是指针，您决定在声明后永远不要更改其目标，这会带来所有缺点和优点（其中之一是它的“自动取消引用”。仔细阅读[Wikipedia 上的引用条目。](http://en.wikipedia.org/wiki/Reference_%28C++%29)

您将需要切换到指针。

# css - CSS 内联块 div 未正确显示

> ID：12529555
> 
> 赞同：0
> 
> 时间：2012-09-21T11:24:31.567
> 
> 标签：css

谁能帮帮我吗？我有这个带有描述的链接列表示例。[http://jsfiddle.net/FcN57/3/](http://jsfiddle.net/FcN57/3/)我需要从与第一个链接相同的行开始的描述，但它总是从下面的一行开始。我认为`inline-block`应该并排显示div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:33:14.843

如果您出于某种原因需要保留它`<br />`（尽管我不推荐它像这里的其他人一样），那么以下内容可能对您有用：

[http://jsfiddle.net/FcN57/12/](http://jsfiddle.net/FcN57/12/)

我添加`floats`和 a`clear:both`将它们放在同一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:29:28.473

您的代码中有分页符。A`<br>`将中断流并将其后的任何元素放在新行上，无论显示类型如何。

删除它们，它工作正常。

[http://jsfiddle.net/Kyle_Sevenoaks/FcN57/6/](http://jsfiddle.net/Kyle_Sevenoaks/FcN57/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:29:34.813

要在同一行显示描述，请删除`<br />`标签。您也可以使用`span`而不是`div`. `span`将在同一行显示文本。

[http://jsfiddle.net/FcN57/10/](http://jsfiddle.net/FcN57/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:29:59.007

不幸的是，它们被内联显示，您在此处强制换行

```
 <div class="EsdVyberDocOdkaz">
        <a href="9CYjKkqzUU71" >link</a>
        <br> //this is your issue
        (
        <a href="9CYjKkqzUU71" >link</a>
        )
    </div> 
```

您可以删除该换行符并将所有内容放在一行上，也可以在描述之后移动括号中的链接，如下所示：

```
<div class="EsdVyberDoc">
        <div class="EsdVyberDocOdkaz">
            <a href="9CYjKkqzUU71" >link</a>
        </div>
        <div class="EsdDocTitul">
            description description description
            </div>
            <br />
            (
            <a href="9CYjKkqzUU71" >link</a>
            )
 </div> 
```

# algorithm - 具有 N 个内部节点的二叉树的最佳情况高度

> ID：12529556
> 
> 赞同：2
> 
> 时间：2012-09-21T11:24:48.013
> 
> 标签：algorithm, tree, binary-tree

我正在研究 Robert Sedgewick 的 C++ 算法，并遇到了以下声明：

> 具有内部节点的二叉树的高度`N`至少`lg N` 为 ，最多为`N-1`。最好的情况发生在平衡树中，`2^i` 除了可能的底层之外，每一层都有内部节点。如果高度是“h”那么我们必须有
> 
> ```
>  2^(h-1) < N+1 <= 2^h 
> ```
> 
> 因为有 N+1 个外部节点。

围绕不等式没有太多解释，所以我的问题是：作者是如何推断不等式的，它究竟显示了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:25:33.660

不等式`2^(h-1) < N + 1 <= 2^h`表明，对于给定的 height `h`，存在一系列节点数量，它们将具有`h`共同的最小高度。*这表明了一个属性：所有包含N*个节点的二叉树的高度至少为 log( *N* )，四舍五入到下一个整数。

例如，具有任一`4, 5, 6 or 7`节点的树的最小高度最多为`3`. 比这个范围少一个，你就可以有一棵高度的树`2`；还有一个，你能做的最好的就是高度`4`。*如果我们使用N*的以 2 为底的对数绘制出从`3`节点到节点增长的树的最小高度并向上取整，则不等式变得清晰：`8`

 *```
log(3) = 1.58 -> 2  [lower bound]

log(4) = 2    -> 3  [2^(h-1)]
log(5) = 2.32 -> 3
log(6) = 2.58 -> 3
log(7) = 2.81 -> 3

log(8) = 3    -> 4  [2^h | upper bound] 
```

注意到范围（由`N+1`不同的数量组成）与给定树的外部节点数直接相关可能很有用。取一棵具有`3`节点且高度为的树`2`：

```
 *
    / \
   *   * 
```

向这棵树添加一个节点，

```
 *          *          *          *
   / \        / \        / \        / \
  *   *  or  *   *  or  *   *  or  *   *
 /            \            /            \
*              *          *              * 
```

不管你把它放在哪里，高度都会增加1。然后我们可以在不改变高度的情况下继续创建叶节点，直到树总共包含7个节点，此时，任何进一步的添加都将再次增加最小可能高度：

```
 *
   / \
  *   *
 / \ / \
*  * *  * 
```

最初，*N*等于`3`节点，这意味着`N+1 = 4`我们看到存在`4`具有共同最小高度的数量。

如果您需要更多信息，我建议您查看完整和平衡二叉树的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T07:24:56.413

`N`让我们称在二叉树中适合节点所需的最小高度`minheight(N)`。

为给定数量的节点导出树高度下限的一种方法`N`是从另一个方向工作：给定高度树`h`，可以打包到其中的最大节点数是多少？

我们称这个函数为 height `maxnodes(h)`。显然，给定高度的二叉树上的节点数在树*满*时最大化，即当每个内部节点有 2 个子节点时。感应很快就会显示出来`maxnodes(h) = 2^h - 1`。

因此，如果我们有*节点*`N`，每个节点`h`都是`maxnodes(h) >= N`的上限：也就是说，您可以将所有节点都放在该高度的树上。在所有这些上限中，最好的（最严格的）一个将是最小值。所以我们想要找到的是最小的，使得*`minheight(N)``N``h`*

 *```
N <= maxnodes(h) = 2^h - 1 
```

那么如何找到这个最小的令人满意的值`h`呢？

的重要属性`maxnodes(h)`是它是非递减`h`的（实际上它是严格递增的，但非递减就足够了）。这意味着您永远无法通过降低其高度来将更多节点放入完整的二叉树中。`h`（很明显，但有时它有助于将事情拼写出来！）这使得重新排列上述等式以找到容易的最小值：

```
2^h - 1 >= N
2^h >= N+1        # This is the RHS of your inequality, just flipped around
h >= log2(N+1)    # This step is only allowed because log(x) is nondecreasing 
```

`h``h`必须是整数，所以满足的最小值`h >= log2(N+1)`是`RoundUp(log2(N+1))`。

我发现这是描述下限的最有用的方法，但它可用于导出您所询问的不等式的 LHS。从上一个块中的第二个等式开始：

```
2^h >= N+1 
```

`h`满足这个不等式的一组值从正无穷开始`h = log2(N+1)`并延伸到正无穷大。由于`h = log2(N+1)`是这个集合中的最小满足值，任何更低的都不能满足不等式，所以特别是`h-1`不会满足它。如果`>=`不等式在两个实数（非无限）之间不成立，则相应的`<`不等式必须成立，因此：

```
2^(h-1) < N+1 
```**

# c++ - 检索在 Windows 上打开的所有窗口

> ID：12529566
> 
> 赞同：1
> 
> 时间：2012-09-21T11:25:34.863
> 
> 标签：c++, winapi, powershell

我尝试使用简单的 C++ 代码（见下文）为 Windows 上所有打开的窗口检索一些信息（x、y、宽度、高度和标题）：

```
#include <iostream>
#include <windows.h>
using namespace std;

BOOL CALLBACK EnumWindowsProc(HWND hwnd, LPARAM lParam);

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR pCmdLine, int     iCmdShow)
{
    EnumWindows(EnumWindowsProc, NULL);
    //system("PAUSE");
    return 0;
}

BOOL CALLBACK EnumWindowsProc(HWND hwnd, LPARAM lParam)
{
char class_name[255];
char title[255];
int tmpWidth;
int tmpHeight;
HWND currenthwnd;
RECT WindowRect;

GetClassName(hwnd,class_name, sizeof(class_name));
GetWindowText(hwnd,title,sizeof(title));
GetWindowRect(hwnd,&WindowRect);

//if(WindowRect.left>-50 && title != "" && title != NULL && strlen(title)>0){
    tmpHeight = WindowRect.bottom - WindowRect.top;
    tmpWidth = WindowRect.right - WindowRect.left;
    cout <<"@@##@@"<<title<<",(@@#@@)";
    cout <<WindowRect.left<<",(@@#@@)";
    cout <<WindowRect.top<<",(@@#@@)";
    cout <<tmpWidth<<",(@@#@@)";
    cout <<tmpHeight<<",(@@#@@)";
    currenthwnd=GetForegroundWindow();
    if (currenthwnd!=hwnd){
       cout <<title<<",(@@#@@)false";
    }else{
       cout <<title<<",(@@#@@)true";
    }
 //}

 return TRUE;
} 
```

但是我在这段代码中遇到了一些问题，我也尝试使用带有 Get-Process 函数的 PowerShell，但是这个函数不会返回所有打开的窗口，而是返回所有现有的进程。

如何检索所有打开窗口的标题、x、y、高度？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:49:54.810

在 powershell 中，您可以使用[WASP](http://wasp.codeplex.com)模块并编写如下内容：

```
Get-Process | Where-Object {$_.MainWindowTitle -ne ""}  | 
% {$_.processname + "-" + $_.mainwindowtitle;
       Get-WindowPosition -Window $_.handle } 
```

这是我实际的 powershell windows 的结果示例：

```
powershell - Posh - Admin
Location : {X=4,Y=44}
Size     : {Width=885, Height=129}
X        : 4
Y        : 44
Width    : 885
Height   : 129
Left     : 4
Top      : 44
Right    : 889
Bottom   : 173
IsEmpty  : False 
```

# php - PHP - 计算满足条件的数组的所有元素

> ID：12529567
> 
> 赞同：7
> 
> 时间：2012-09-21T11:25:43.030
> 
> 标签：php, arrays

> **可能重复：**
> [搜索包含字符串的 PHP 数组元素](https://stackoverflow.com/questions/12315536/search-for-php-array-element-containing-string)

我创建了一个 mysql 查询，该查询包含多个产品，所有产品都包含以下信息：

产品编号 产品名称 产品价格和产品类别

在页面的下方，我用一个 foreach 和一些“ifs”遍历了这些内容，因此它只显示名称在一个 div 中包含“x”的那些产品，并在另一个 div 中显示名称包含“y”的那些产品.

在进行循环之前，我正在努力计算每个 div 中有多少产品。

所以本质上，我要问的是：

**如何计算数组中满足特定条件的所有元素？**

添加了显示循环的代码：

```
<div id="a">
    <?php
    $i = 1;
    foreach ($products AS $product) {
        if (strpos($product->name,'X') !== false) {
            =$product->name
        }
        $i++;
    } ?>
</div>

<div id="b">
    $i = 1;
    foreach ($products AS $product) {
        if (strpos($product->name,'Y') !== false) {
            =$product->name
        }
        $i++;
    } ?>
</div> 
```

在我实际执行循环之前，我想知道其中有多少会出现在这里。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T11:37:49.600

好吧，没有看到代码，所以一般来说，如果你无论如何都要拆分它们，你还不如预先做呢？

```
<?php
// getting all the results.
$products = $db->query('SELECT name FROM foo')->fetchAll();

$div1 = array_filter($products, function($product) {
    // condition which makes a result belong to div1.
    return substr('X', $product->name) !== false;
});

$div2 = array_filter($products, function($product) {
    // condition which makes a result belong to div2.
    return substr('Y', $product->name) !== false;
});

printf("%d elements in div1", count($div1));
printf("%d elements in div2", count($div2));

// then print the divs. No need for ifs here, because results are already filtered.
echo '<div id="a">' . PHP_EOL;
foreach( $div1 as $product ) {
   echo $product->name;
}
echo '</div>';

echo '<div id="b">' . PHP_EOL;
foreach( $div2 as $product ) {
   echo $product->name;
}
echo '</div>'; 
```

话虽如此：您应该注意“这通常在 SQL 中更快”的注释，因为如果您想过滤值，这是更明智的方法。

**编辑**：更改了变量的名称以适应示例代码中的变量名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T11:38:24.357

使用数组过滤器：[http ://www.php.net/manual/en/function.array-filter.php](http://www.php.net/manual/en/function.array-filter.php)

```
array array_filter ( array $input [, callable $callback = "" ] ) 
```

遍历输入数组中的每个值，将它们传递给回调函数。如果回调函数返回 true，则将输入的当前值返回到结果数组中。数组键被保留。

```
<?php
function odd($var)
{
    // returns whether the input integer is odd
    return($var & 1);
}

function even($var)
{
    // returns whether the input integer is even
    return(!($var & 1));
}

$array1 = array("a"=>1, "b"=>2, "c"=>3, "d"=>4, "e"=>5);
$array2 = array(6, 7, 8, 9, 10, 11, 12);

echo "Odd :\n";
print_r(array_filter($array1, "odd"));
echo "Even:\n";
print_r(array_filter($array2, "even"));
?> 
```

但请注意，这是一个循环，您的 SQL 查询会更快。

# asp.net - RSA Key 容器中的密钥是否加密？

> ID：12529571
> 
> 赞同：0
> 
> 时间：2012-09-21T11:25:50.483
> 
> 标签：asp.net, security, configuration, rsa

我们使用“RSA 保护配置提供程序”来加密配置文件中的敏感信息。MSDN 上有关此的更多信息 - [http://msdn.microsoft.com/en-us/library/ms998283.aspx](http://msdn.microsoft.com/en-us/library/ms998283.aspx)。

在生成的配置文件中有一个三重 DES 加密密钥。这意味着配置部分实际上是使用此对称密钥加密/解密的。

但是这个对称 DES 密钥实际上是使用 RSA 密钥容器中的 RSA 私钥/公钥加密/解密的。我的问题是容器中的公共/私有 RSA 密钥是否也被加密？如果是，那么存储的密钥在哪里？

如果容器中的密钥没有加密，那么为什么我们需要将密钥导出到 XML 文件，然后再将它们导入另一台机器？为什么不直接将 RSA 容器密钥复制粘贴到 Web 集群/场中的所有节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:31:04.443

它们使用 DPAPI 加密。

# internet-explorer - 如何在 youtube 视频中启用/禁用弹出选项

> ID：12529572
> 
> 赞同：0
> 
> 时间：2012-09-21T11:25:50.923
> 
> 标签：internet-explorer, plugins, activex, youtube-api

右键单击 IE 上的 youtube 视频时，如何启用/禁用 youtube 弹出选项。有没有我需要使用的特定 API 来实现这个请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:30:13.133

Youtube 的最新版本阻止了很多想法，比如阻止使用 Chrome 应用程序下载，

在 IE 8 中尝试，它对我有用

# c# - 从密码字符串派生加密密钥和 IV 时，可以使用密码的 SHA1 哈希作为盐吗？

> ID：12529574
> 
> 赞同：7
> 
> 时间：2012-09-21T11:25:54.260
> 
> 标签：c#, .net, security, encryption, cryptography

我`Rfc2898DeriveBytes`用来从用户提供的字符串密码安全地生成加密密钥和初始化向量，以用于对称加密（例如 AesManaged）。

我将密码的 SHA1 哈希作为盐参数到`Rfc2898DeriveBytes`. 那样可以么？如果没有，那我应该从哪里得到盐？解密时我需要相同的盐，对吗？所以我必须将它存储在未加密的地方 - 不安全。如果我必须安全地存储它，那么它就变成了另一个“密码”，不是吗？

```
void SecureDeriveKeyAndIvFromPassword(string password, int iterations, 
    int keySize, int ivSize, out byte[] key, out byte[] iv)
{
    // Generate the salt from password:

    byte[] salt = (new SHA1Managed()).ComputeHash(Encoding.UTF8.GetBytes(password));

    // Derive key and IV bytes from password:

    Rfc2898DeriveBytes derivedBytes = new Rfc2898DeriveBytes(password, salt, iterations);

    key = derivedBytes.GetBytes(keySize);
    iv = derivedBytes.GetBytes(ivSize);
} 
```

我见过使用常量（硬编码）盐，我见过有人抱怨它。我认为从密码中派生盐会是更好的主意，但我不确定这是一个最佳解决方案。

很快，我有一个需要加密的文件，以及用户输入的密码字符串。如何正确使用`Rfc2898DeriveBytes`导出安全加密密钥和 IV？

谢谢。

**编辑：**

感谢您的回答。我现在明白了盐的主要（也许只是？）目的是使彩虹表的生成变得不可能 - 你不能预先生成“P@$$w0rd”的散列，因为它对于每个可能都有不同的散列盐值。我完全理解这一点，但是......这真的与对称加密有关吗？我没有将哈希存储在任何地方吗？因此，即使攻击者拥有所有可能的密码组合的彩虹表，他也无能为力，对吧？

**所以，我现在的问题是：在与对称加密算法**（如 .NET 的 AesManaged）一起使用时，与使用密码派生（甚至硬编码）盐相比，在每个加密操作中使用随机盐有什么优势吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T11:58:23.583

每个密码的盐应该是**唯一的**，这意味着为您要散列的每个密码创建一个随机密码。盐**不是**秘密，可以使用您计算的哈希值存储纯文本。

盐的想法是，攻击者不能使用预建的彩虹表来获取密码。他必须为每个密码分别建立这样一个彩虹表，这没有意义。在找到匹配之前，暴力破解更容易。

[MSDN](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)中有一个示例，其中盐是从**操作系统的随机源中获取的**。这是你能做的最好的事情，为了获得安全的盐，不要从你的密码中得到它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T13:57:52.770

salt旨在通过使每个目标的行为不同来防止多目标攻击。彩虹表只是多目标攻击的一种特殊形式，在获得目标之前就已经花费了计算量。

在某些情况下，多目标攻击适用，但彩虹表不适用。

这方面的一个例子：假设您正在使用具有语义安全性的经过身份验证的加密方案，例如具有唯一随机数的 AES-GCM。现在您已经获得了一百万条使用不同密码加密的不同消息。

如果不使用 salt，要检查密码是否适用于其中任何一项，攻击者需要进行**一次 KDF**操作和**一百万次解密**操作。如果使用盐，攻击者需要**一百万次 KDF**操作和**一百万次解密**操作。由于与解密相比，KDF 速度较慢，因此对第一种方案的攻击比对第二种方案的攻击要快得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T11:50:44.967

我真的不知道是什么，`Rfc2898DeriveBytes`但我可以告诉你以下内容：盐不一定是安全的。现在，您说您已经看到人们抱怨盐的硬编码、恒定值，以及谁说的都是对的。盐应该是一个随机值，而不是一个恒定值，否则它的目的就失败了。

你了解盐的用途吗？你显然没有。使用散列作为盐是一个坏主意，因为密码*X*将始终使用相同的值*Y*加盐，这再次违背了它的目的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-21T11:52:52.463

人们不喜欢硬编码的盐，因为项目的所有开发人员都可以访问它们（在开源项目或逆向工程的情况下可能是公众）。然后，攻击者可以为您的特定盐计算彩虹表并开始攻击您的系统。

盐值的一个很好的选择是：

*   每次检查密码时都可用
*   在密码检查之间不改变
*   每个（或大多数）密码计算不同

如果用户名不能更改，那么用户名将是一个不错的选择。或者，在您第一次创建用户并将其存储为 salt 时生成一个完全随机的值，以及数据库中的用户数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-26T09:19:14.170

其他人已经解释了盐的用途，以及为什么它可以成为公共信息。

您的问题的另一部分答案是：*不要*从密码本身中提取盐。这与在 Ashley Madison 黑客攻击后最终暴露数百万个密码的编程错误非常相似。

问题是，当您使用密码生成盐时，您实际上是在瞬间使密码可用，而且更容易破解。攻击者可以完全忽略 PBKDF2 的输出，并简单地反转 salt 本身。这仅受 SHA1 保护，该 SHA1 已经损坏。

在阿什利麦迪逊，错误是相似的。密码使用 bcrypt 存储在主数据库中，并且被认为是安全的。但后来有人发现，很多账户的密码实际上被存储了两次，而第二个副本只使用了 MD5 保护。

# php - 如何在不覆盖它的情况下传输 $exercise 参数？

> ID：12529577
> 
> 赞同：0
> 
> 时间：2012-09-21T11:26:00.783
> 
> 标签：php, symfony

这是找到具有特定条件的第一个练习的功能`lessonid`

```
public function exerciseAction($lessonid, $exercise)
{
$em = $this->getDoctrine()->getEntityManager();
$exercise = $em->getRepository('PrezentariPrezentariBundle:Exercise')->findOneByLesson($lessonid);

return $this->render('PrezentariPrezentariBundle:Page:exercise.html.twig', array(
        'exercise' => $exercise,
        'lessonid' => $lessonid,
    ));
} 
```

这里我尝试对所有的练习一一实现一个功能

```
public function exercisePagerAction($exercise)
{
    $em = $this->getDoctrine()->getEntityManager();
    $nextExercise= $em->getRepository('PrezentariPrezentariBundle:Exercise')->getNext($exercise);

    return $this->render('PrezentariPrezentariBundle:Page:exercise.html.twig', array(
        'exercise' => $nextExercise,
    ));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:52:39.463

你的问题在这里：

```
$nextExercise= $em->getRepository('PrezentariPrezentariBundle:Exercise')->getNext($exercise); 
```

你需要找到某事。

```
$nextExercise= $em->getRepository('PrezentariPrezentariBundle:Exercise')->findOneById($exercise)->getNext(); 
```

# .net - 是否使用 Word/Office 进行版本控制，但使用专有文档存储库（即不是 Sharepoint），以适应某种提供程序模型？

> ID：12529581
> 
> 赞同：13
> 
> 时间：2012-09-21T11:26:12.960
> 
> 标签：.net, version-control, vsto, word-2010

我找不到任何用于挂钩 Word 2010 提供的版本控制功能的资源。我知道它在提供访问 Sharepoint 文档存储库的功能方面与 Sharepoint 无缝挂钩。但是，将 sharepoint 作为我的存储库，我将如何利用 word/office 互操作 API 来使用“管理版本”等功能。例如，是否有版本控制功能的提供者模型？

我知道有 word 插件可以连接到 Perforce 和 Subversion 存储库，但是，它们似乎不使用原生 word 功能，而是通过附加上下文菜单项和功能区/自定义任务窗格相关控件提供它们的功能，即不使用word 的内置版本管理工具。

当然，任何资源或建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T20:58:18.397

我知道一个名为 Alfresco 的 SharePoint 替代方案，它提供 Microsoft Office 集成，包括版本管理。

Alfresco 是一个企业内容管理解决方案和开源软件。由于它是开源的，您可能想看看他们是如何实现它的。

[http://www.alfresco.com/](http://www.alfresco.com/)

这对你有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T04:13:53.470

我不能告诉你如何完全集成，但我可以给你一些应该有帮助的细节。

版本控制不是 Office 2010 的功能；该界面与 SharePoint 文档库版本控制集成，这是您需要模仿的。

在 SharePoint 中，为历史版本创建了一个“虚拟”目录。如果您的文档位于“domain/sites/site/MyLibrary/MyDoc.docx”，那么您的第一个主要版本将位于“domain/sites/site/_vti_history/512/MyLibrary/MyDoc.docx”。
主要版本始终是 512 的倍数，次要（草稿）版本增加 1。
如果草稿是在第一个主要版本之前创建的，则可以从 1 开始创建次要版本。

Office API 可以通过 DocumentLibraryVersions 集合对象和 DocumentLibraryVersion 对象引用文档的版本信息。虽然后者有几个方法（恢复或删除现有版本），但 DocumentLibraryVersion 对象的属性是只读的。看起来在启用版本的库中存储文档的过程将 DocumentLibraryVersions.IsVersioningEnabled 属性设置为 True，但我不确定还需要什么才能让 Word 将其他系统（如 SharePoint）用于集成目的。

请记住，如果您使基本集成正常工作，Word 还希望使用签入/签出功能与版本控制进行交互。

这就是我现在可以带你的，希望其他人能详细说明从这里去哪里。祝你好运！

对象模型中的 MSDN 文档版本控制：http: [//msdn.microsoft.com/en-us/library/office/ff860259 (v=office.15).aspx](http://msdn.microsoft.com/en-us/library/office/ff860259%28v=office.15%29.aspx)

一篇关于使用 C# 创建 SharePoint 文档版本历史的文章： [http ://www.tekritisoftware.com/sharepoint-document-version-history](http://www.tekritisoftware.com/sharepoint-document-version-history)

# scala - 谁能解释一下 Scala 中如何使用符号“=>”

> ID：12529582
> 
> 赞同：9
> 
> 时间：2012-09-21T11:26:13.917
> 
> 标签：scala

我在 scala 中阅读了很多使用符号的代码片段`=>`，但我从来没有真正理解过它。我试图在互联网上搜索，但找不到任何全面的东西。任何关于符号如何使用/可以使用的指针/解释都将非常有帮助。

（更具体地说，我还想知道运算符是如何在函数文字中出现的）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T12:08:22.770

不仅仅是传递值/名称，`=>`还用于定义函数文字，这是用于定义函数的替代语法。

示例时间。假设您有一个接收另一个函数的函数。集合中充满了它们，但我们会挑选`filter`。`filter`，当用于集合（如列表）时，将取出导致您提供的函数返回 false 的任何元素。

```
val people = List("Bill Nye", "Mister Rogers", "Mohandas Karamchand Gandhi", "Jesus", "Superman", "The newspaper guy")
// Let's only grab people who have short names (less than 10 characters)
val shortNamedPeople = people.filter(<a function>) 
```

我们*可以*从其他地方传入一个实际的函数（`def isShortName(name: String): Boolean`也许是 ），但将它放在那里会更好。唉，我们可以使用函数文字。

```
val shortNamedPeople = people.filter( name => name.length < 10 ) 
```

我们在这里所做的是创建一个函数，该函数接受一个字符串（因为`people`它是 type `List[String]`），并返回一个布尔值。很酷，对吧？

此语法在许多情况下使用。假设*您*要编写一个接收另一个函数的函数。这个其他函数应该接受一个字符串，并返回一个 Int。

```
def myFunction(f: String => Int): Int = {
  val myString = "Hello!"
  f(myString)
}
// And let's use it. First way:
def anotherFunction(a: String): Int = {
  a.length
}
myFunction(anotherFunction)
// Second way:
myFunction((a: String) => a.length) 
```

这就是函数字面量。回到`by-name`and `by-value`，有一个技巧，你可以强制一个参数不被评估，直到你想要。经典例子：

```
def logger(message: String) = {
  if(loggingActivated) println(message)
} 
```

这看起来没问题，但`message`实际上`logger`是在调用时评估的。如果`message`需要一段时间来评估怎么办？例如，`logger(veryLongProcess())`, where`veryLongProcess()`返回一个字符串。哎呀？并不真地。我们可以利用我们对函数文字的了解来强制`veryLongProcess()`在实际需要之前不要调用它。

```
def logger(message: => String) = {
  if(loggingActivated) println(message)
}
logger(veryLongProcess()) // Fixed! 
```

`logger`现在正在接受一个不带参数的*函数*（因此`=>`左侧是裸露的）。您仍然可以像以前一样使用它，但现在，仅在使用它`message`时才评估（在 中`println`）。

# c# - 如何使用 regasm.exe 为 dll 创建 CLSID

> ID：12529583
> 
> 赞同：1
> 
> 时间：2012-09-21T11:26:21.070
> 
> 标签：c#, asp.net, windows

我们如何使用 regasm.exe 为 DLL 创建 CLSID

实际上，我想在网络上使用 Windows 应用程序，我找到了一篇文章，我在下面发布了链接

[http://www.codeproject.com/Articles/14276/Using-Windows-Application-on-web](http://www.codeproject.com/Articles/14276/Using-Windows-Application-on-web)

在上面的文章中，我在第 10 步附近面临问题，其中指出：“现在通过使用“regasm.exe”创建 dll 的 CLSID 并将其放置在注册表中，exe 文件位于“C:\ WINDOWS\Microsoft.NET\Framework\v1.1.4322\"."

我不确定如何为 dll 创建 CLSID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:01:49.423

CLSID 标识 COM 类对象，而不是 DLL。

当您使用 regasm 注册您的程序集时，将为您的程序集中的每个 ComVisible 类注册一个 CLSID。

您可以通过`Guid`在类上放置属性来指定所需的 CLSID：

```
[GuidAttribute("12345678-9012-3456-7890-123456789abc")]
public sealed class MyComVisibleClass ... 
```

或者如果您不使用此属性，它将自动生成。

如果它是自动生成的，您可以使用“OLE Viewer”或类似工具检查 regasm 生成的类型库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:31:42.130

通过调用

```
regasm.exe /codebase /tlb whatever.dll 
```

根据您的需要，可能不需要 /codebase 或 /tlb（即您也可以尝试 just `regasm.exe whatever.dll`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:12:16.633

CLSID 是全局唯一 ID (=GUID)。它有一个固定的格式（见乔的回答）并且是“随机的”。您可以使用 guidgen.exe 创建一个。许多编辑器和 IDE 都具有创建 GUID 的功能。使用 regasm，您可以在 windows 中注册 COM 类对象的 GUID (=CLSID then)。

# plone - 针对 plone.directives.form.Schema 查询适配器

> ID：12529587
> 
> 赞同：0
> 
> 时间：2012-09-21T11:26:30.090
> 
> 标签：plone, z3c.form, zope.interface

我创建了一个表单模型，如下所示：

```
from plone.app.directives import Form

class IFormSchema(form.Schema):

    foobar = schema.Bool(title=u"Just another field") 
```

我想根据这个定义注册一个适配器：

```
@component.adapter(IFormSchema)
@interface.implementer(ITreeSelectURLProvider)
def TreeSourceURL():
    """
    """
    return "http://foobar" 
```

注册正确。

但是，有一个问题我不知道 IFormSchema 是否由`z3c.form`处理链的任何点中的任何对象直接提供，因此我可以调用：

```
 provider = ITreeSelectURLProvider(someObject) 
```

*   IFormSchema 是否直接应用于 z3c.form 或 plone.autoform 链的任何点中的某个对象（zope.interface.directlyProvides？）

*   如果没有，推荐的做法是什么，以便我可以针对模型注册适配器？我应该做哪些类来实现这个接口？

更糟糕的是，问题中的上下文不是真正的内容项，而是子表单对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:49:50.573

敏捷性确保模式接口（在文件系统上定义并在 FTI 中引用，或通过 Web 或 XML 文件定义）由内容类型的实例提供。

这实际上与形式无关，而与敏捷有关。form.Schema 基类只是一个扩展接口的标记，它允许 plone.autoform 的一些处理在配置时进行。

# git - 如何仅为特定分支创建 Git 标签？

> ID：12529589
> 
> 赞同：4
> 
> 时间：2012-09-21T11:26:37.323
> 
> 标签：git, svn, version-control

可能是一个非常基本的问题。但即使在阅读了多个资源之后，我也无法确定。

> **在 SVN 中，我曾经从名为dev_branch**的分支 创建一个名为**dev_tag**的标签。我还需要将 dev_tag 检出到 checkout_dir 并进行 maven 构建。

**SVN** -*这就是我之前所做的*

```
 ~ -> svn copy -m  svn+ssh://<repo>/branches/dev_branch/ svn+ssh://<repo>/tags/dev_tag/ 
 ~ -> svn co svn+ssh://<repo>/tags/dev_tag/ checkout_dir
 ~ -> cd checkout_dir
 ~/checkour_dir -> mvn clean package 
```

**GIT-***如何*？

 *> 如何在 Git 中完成上述操作？这就是我的 git 现在的样子。

```
 ~ -> git branch -l
  dev_branch
* master 
```

**重新措辞：** 同意，只需创建一个标签。我的问题更多的是

> “假设，如果我让 git repo 包含 master 分支（用于产品部署）和 dev 分支（用于 QA 部署），每个分支都有不同的更改。接下来，我通过键入“git tag mytag”来创建一个标签，并将当前分支作为 master。现在到 QA，我需要给出的命令只会检查他们可以在其上进行 mvn 构建的 dev 分支内容。使用相同的标签，我应该能够检查可以构建并用于产品部署的主分支内容。”

最后，这就是我为特定分支创建 Git 标记并为相同分支创建 tar 的方法，这有助于我分别构建 qa 和 prod 代码。

**QA_BUILD**

```
git clone -b dev_branch gitserve:repo.git qa
cd qa
tag -a qa_tag
git commit -a
git push --tags
git archive --format=tar --remote=gitserve:repo.git tags/qa_tag > /tmp/qabuild/qa.tar
cd  /tmp/qabuild
tar -xvf qa.tar
mvn clean package 
```

**PROD_BUILD**

```
git clone -b master gitserve:repo.git prod
cd prod
tag -a prod_tag
git commit -a
git push --tags
git archive --format=tar --remote=gitserve:repo.git tags/prod_tag > /tmp/prodbuild/prod.tar
cd  /tmp/prodbuild
tar -xvf prod.tar
mvn clean package 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T15:08:00.343

中的标签与`git`它们中的标签不同`svn`。它们本质上等同于固定分支（即一旦创建它们就不会随着进一步的提交而移动）——只是一个指向简单提交的指针。因此，要创建标签，您可以执行以下两项操作之一 - 如果您已经签出要标记的提交，则可以将标签放在您所在的位置：

```
git tag <tagname> 
```

如果您不在要标记的提交处，则需要使用`git log`或其他方法来查找所需提交的 SHA 哈希，然后您可以运行：

```
git tag <tagname> <sha> 
```

（或者，您可以`git checkout <sha>; git tag <tagname>`，但这是不必要的结帐，如果您忘记重新结帐到您希望将来的开发工作的位置，可能会造成混乱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-04T16:53:09.433

**你不能。**

A`tag`是点 a `<commit-id>`。标签独立于分支而存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:31:37.700

可以标记最新版本`latest`（等），然后在每次发布时删除并重新创建它。

然而，这不是使用标签的正常方式，即作为固定位置，但只要所有团队都了解哪些标签是固定的，以及哪些标签漂浮在你周围就可以了。*

# jquery - jquery 数据表在排序、更改行选择限制或使用全局搜索后没有自动重新加载

> ID：12529590
> 
> 赞同：0
> 
> 时间：2012-09-21T11:26:38.200
> 
> 标签：jquery, jquery-plugins, datatables

我正在服务器端为 dataTable 实现排序（排序依据）。一切都很好即使我的数据得到了正确的排序（我可以在萤火虫中检查。）。现在的问题是，在那之后数据表没有重新加载，并且“处理...”继续出现。关于在哪里编写重新加载函数的任何线索。我知道这可以通过

```
 oTable.fnDraw(true); 
```

但我不知道在点击标题进行排序后在哪里写。如果您需要任何代码片段来调试，请告诉我。

编辑1**

即使在使用全局搜索或更改 no 后，我也无法重新加载表。要显示的行数。知道为什么会这样吗？？？

```
var oTable = $('#datatable').dataTable( {
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "datatableprocessor",
                "sPaginationType": "full_numbers",
                 "fnRowCallback": function (nRow, aData, iDisplayIndex) { return nRow; },
                "fnServerData": function ( sSource, aoData, rfrshCallbk ) {
                    $('.search').each(function(index) {
                        var name =  $(this).attr("name");
                        var tempName = name.replace("search","condition" );
                        var condition = $("[name='"+tempName+"']").val();
                        var value = $(this).val();
                        aoData.push({ "name": name, "value": value+""+condition });
                    });
                    aoData.push({ "name": "queryId", "value": "test" });
                    $.ajax( {
                            "dataType": 'json',
                            "type": "POST",
                            "url": sSource,
                            "data": aoData,
                            "success": rfrshCallbk

                    } );
                },
                "aoColumnDefs": [
                  { "sName": "c.id", "aTargets": [ 0 ] },
                  { "sName": "c.firstname", "aTargets": [ 1 ] },
                  { "sName": "c.lastname", "aTargets": [ 2 ] },
                  { "sName": "c.telephone", "aTargets": [ 3 ] }

                ]

            } );// 
```

编辑 2 -----我试图检查 Json comming 是否正确，所以为了调试我将代码更改为

```
 "success": function(json){
        alert(JSON.stringify(json));
                    rfrshCallbk(json);
 } 
```

在这两种情况下，当我重新加载我的页面或排序 json 字符串时是相同的.. ??!!?? 不知道怎么回事？？？！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:17:41.367

我得到了解决方案，我没有实现“sEcho”并且每次都将“sEcho”作为“1”发回，这使我无法获得刷新的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:16:00.813

要重新加载我们使用的 dataTable 数据

```
oTable.fnDraw(); 
```

不是 oTable.fnDraw(true); ，写在你执行点击事件的地方。

# c++ - 非阻塞关闭 - 如何确保发送数据？

> ID：12529594
> 
> 赞同：1
> 
> 时间：2012-09-21T11:26:52.760
> 
> 标签：c++, c, linux, sockets

> **可能重复：**
> [在 Linux 中发送缓冲区为空的 Socket？](https://stackoverflow.com/questions/12476907/send-buffer-empty-of-socket-in-linux)

我想创建一个套接字服务器，向正在连接的客户端发送一些数据并再次断开他的连接。

我正在使用非阻塞套接字，所以我不知道如何确定所有数据是否至少已正确发送（发送？）（简而言之：我的发送缓冲区中没有更多数据）。如果不再需要连接，我不想保持连接建立，因为我无法确保客户端自行断开连接。

目前我只是使用shutdown() 和后来的close() 关闭客户端。但测试表明，客户端并不总是在连接关闭之前收到所有数据。

必须有一种方法来确保在关闭非阻塞套接字上的连接之前发送所有数据，不是吗？希望我的问题足够清楚，您可以帮助我（：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:59:35.603

在结束连接之前，您可以知道您的数据已发送的唯一方法是让对等方在应用程序协议中确认它。您可以通过关闭两端输出然后读取两端的EOS，然后关闭两端的socket来确保两端同时到达EOS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:07:32.830

您可以在文件数据之前发送文件大小。在关闭套接字时，只需检查文件大小并采取适当的措施来关闭或重新发送文件......

# java - 使用 JFileChooser 读取文件名

> ID：12529597
> 
> 赞同：0
> 
> 时间：2012-09-21T11:27:11.610
> 
> 标签：java, swing, relative-path, jfilechooser, absolute-path

我正在使用文件输入流来输入文件

* * *

```
String filename="D:\\abc.txt";
File file = new File(filename); 
```

* * *

到目前为止它工作正常。现在我想使用输入文件名`JFileChooser`，然后做同样的事情。但`JFileChooser`返回一个这样的字符串`D:\abc.txt`。我的代码如下

* * *

```
public static String fileChose()
{
    JFileChooser fc= new JFileChooser();
    int ret = fc.showOpenDialog(null);

    if (ret== JFileChooser.APPROVE_OPTION) 
    {
        File file = fc.getSelectedFile();
        String filename= file.getAbsolutePath();
        return filename;
    }
    else
        return null;
} 
```

* * *

问题在于需要用分隔的文件名`\\`而不是`\`. 我不能以这样的方式直接从 JFileChooser 输入文件名，以便直接将其用作参数

* * *

```
File file = new File(Classname.fileChose()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T07:15:38.177

`String s = fileChooser.getSelectedFile()`

```
public String removeExtension(String s) {

    String separator = System.getProperty("file.separator");
    String filename;

    int lastSeparatorIndex = s.lastIndexOf(separator);
    if (lastSeparatorIndex == -1) {
        filename = s;
    } else {
        filename = s.substring(lastSeparatorIndex + 1);
    }

    int extensionIndex = filename.lastIndexOf(".");
    if (extensionIndex == -1)
        return filename;

    return filename.substring(0, extensionIndex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T06:20:50.370

试用

```
if (code == JFileChooser.APPROVE_OPTION) {
               File selectedFile = chooser.getSelectedFile();
               fileName = selectedFile.getName();
               FileInputStream fis = 
                  new FileInputStream(selectedFile);
               InputStreamReader in = 
                  new InputStreamReader(fis, Charset.forName("UTF-8")); 
               char[] buffer = new char[1024];
               int n = in.read(buffer);
               String text = new String(buffer, 0, n);
               myPane.setText(text);
               in.close();
            } 
```

演示：

```
public class JEditorPaneFileChooser implements ActionListener {
   JFrame myFrame = null;
   JEditorPane myPane = null;
   JMenuItem cmdOpen = null;
   JMenuItem cmdSave = null;
   String dirName = "\\herong\\swing\\";
   String fileName = "JEditorPane.txt";

   public static void main(String[] a) {
      (new JEditorPaneFileChooser()).test();
   }
   private void test() {
      myFrame = new JFrame("JEditorPane JFileChooser Test");
      myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      myFrame.setSize(300,200);

      myPane = new JEditorPane();
      myPane.setContentType("text/plain");
      myPane.setText(
         "Hello computer! - \u7535\u8111\u4F60\u597D\uFF01\n"
         + "Welcome to Herong's Website!\n"
         + "\u6B22\u8FCE\u4F60\u8BBF\u95EE\u548C\u8363\u7F51\u7AD9"
         + "\uFF01\nwww.herongyang.com");
      myFrame.setContentPane(myPane);

      JMenuBar myBar = new JMenuBar();
      JMenu myMenu = getFileMenu();
      myBar.add(myMenu); 
      myFrame.setJMenuBar(myBar);

      myFrame.setVisible(true);
   }
   private JMenu getFileMenu() {
      JMenu myMenu = new JMenu("File");
      cmdOpen = new JMenuItem("Open");
      cmdOpen.addActionListener(this);
      myMenu.add(cmdOpen);

      cmdSave = new JMenuItem("Save");
      cmdSave.addActionListener(this);
      myMenu.add(cmdSave);
      return myMenu;
   }
   public void actionPerformed(ActionEvent e) {
      JFileChooser chooser = new JFileChooser();
      chooser.setCurrentDirectory(new File(dirName));
      chooser.setSelectedFile(new File(fileName));
      chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);

      FileNameExtensionFilter filter = new FileNameExtensionFilter(
        ".txt and .java files", "txt", "java");
      chooser.setFileFilter(filter);

      Object cmd = e.getSource();
      try {
         if (cmd == cmdOpen) {
            int code = chooser.showOpenDialog(myPane);
            if (code == JFileChooser.APPROVE_OPTION) {
               File selectedFile = chooser.getSelectedFile();
               fileName = selectedFile.getName();
               FileInputStream fis = 
                  new FileInputStream(selectedFile);
               InputStreamReader in = 
                  new InputStreamReader(fis, Charset.forName("UTF-8")); 
               char[] buffer = new char[1024];
               int n = in.read(buffer);
               String text = new String(buffer, 0, n);
               myPane.setText(text);
               in.close();
            }
         } else if (cmd == cmdSave) {
            int code = chooser.showOpenDialog(myPane);
            if (code == JFileChooser.APPROVE_OPTION) {
               File selectedFile = chooser.getSelectedFile();
               fileName = selectedFile.getName();
               FileOutputStream fos = 
                  new FileOutputStream(selectedFile);
               OutputStreamWriter out = 
                  new OutputStreamWriter(fos, Charset.forName("UTF-8")); 
               out.write(myPane.getText());
               out.close();
            }
         }
      } catch (Exception f) {
         f.printStackTrace();
      }
   }
} 
```

![在此处输入图像描述](../Images/bdce2a01123ecefba66343007108e415.png)

参考：[http ://www.herongyang.com/Swing/JEditorPane-File-Chooser-Dialog-Box.html](http://www.herongyang.com/Swing/JEditorPane-File-Chooser-Dialog-Box.html)

# java - 为什么字符串打印不正确？

> ID：12529600
> 
> 赞同：2
> 
> 时间：2012-09-21T11:27:20.060
> 
> 标签：java, sql, oracle, spring, stored-procedures

我在 oracle 中创建了一个用户类型

```
create or replace type my_friend_list 
is
table of 
varchar2(100); 
```

现在我编写了一个具有如下输出参数的程序：

```
 PROCEDURE friends_diff_prc
  (
   my_name IN VARCHAR2,
   friend_i   IN my_friend_list ,
   good_friend_o   OUT my_friend_list ,
   best_friend_o   OUT my_friend_list ,
   isSuccess         OUT NUMBER 
  ); 
```

我运行它`SQLDeveloper`并且它运行正确。

它给我列出了我的好朋友和最好的朋友。

但是当我通过扩展的 JAVA 类调用它时`StoredProcedure`。

`best_friend`列表即将到来，但对于`good_friend`它正在打印的列表

```
Ljava.lang.Object;@24342434, 
Ljava.lang.Object;@243a243a,
Ljava.lang.Object;@24402440,
Ljava.lang.Object;@24462446 
```

我获取此输出数组列表的 java 代码如下所示：

```
List<String> goodfriends = Arrays.asList((String[]) results.get("good_friend_o");
List<String> bestfriends = Arrays.asList((String[]) results.get("best_friend_o"); 
```

为什么它没有为 good_friends 提供正确的结果？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:42:23.350

您将答案作为字符串数组，然后存储在列表字符串中。您不能将字符串 [] 直接存储到字符串中。

你能发布用于获取和打印的java代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:00:01.850

试试这个代码。这将打印字符串

```
System.out.println("Printing goodfriends");
for (Object object : goodfriends) {
    Object[] goodfriendsString = (Object[]) object;
    for (Object object2 : objLocationVO) {
    System.out.println(object2);            
     }
} 
```

# dotnetnuke - 更新 DotNetNuke 数据库中的用户信息

> ID：12529601
> 
> 赞同：2
> 
> 时间：2012-09-21T11:27:24.103
> 
> 标签：dotnetnuke

我创建了一个自定义模块，用户可以从中更新他们的名字、姓氏和密码信息。我已经知道如何更新密码，但无论我尝试对名称做什么都不起作用。我试过同时使用 usercontroller 和 profilecontoller 类，虽然它们没有抛出任何错误，但数据库中的数据似乎没有得到更新。

我已经搜索了很长时间，但我似乎找不到任何东西，即使我想它可能实际上很简单。

有人可以帮我弄这个吗？

同时我需要更新显示名称属性还是会自动更新？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:08:27.010

终于设法找到了答案，我不知道我做错了什么，但我尝试了下面的代码，现在更新没有问题：

```
userInfo.Profile.FirstName = firstName;
userInfo.Profile.LastName = Surname;
userInfo.FirstName = firstName;
userInfo.LastName = Surname;
userInfo.DisplayName = firstName + " " + Surname;
ProfileController.UpdateUserProfile(userInfo);

int portalId = userInfo.PortalID;

UserController.UpdateUser(portalId, userInfo); 
```

看起来您可能需要更新用户详细信息和用户个人资料详细信息才能使更改生效。希望这对其他人有帮助

# browser-cache - 使用内容哈希命名静态 Web 内容以启用长缓存时间的策略的名称是什么？

> ID：12529604
> 
> 赞同：0
> 
> 时间：2012-09-21T11:27:29.527
> 
> 标签：browser-cache

例如，将您的 JavaScript 命名为`foo-e65325060020bef3804f867dd6bae598.js`，其中`e65325060020bef3804f867dd6bae598`是文件内容的哈希值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:56:11.303

这是指纹：

*   [Css 文件缓存](https://stackoverflow.com/questions/4095487/css-file-caching)
*   [什么是指纹，我为什么要关心？](http://guides.rubyonrails.org/asset_pipeline.html#what-is-fingerprinting-and-why-should-i-care)

它允许您在主网页上的外围资产文件（javascript、css 或图像文件）更改时发送指向不同文件名的链接。文件名的更改会导致浏览器重新下载任何已更改的资产。

# javascript - Jquery $.get 无法访问

> ID：12529606
> 
> 赞同：1
> 
> 时间：2012-09-21T11:27:32.477
> 
> 标签：javascript, jquery, json

我有这个标记和一个与`json.txt`这个位于同一目录的文件。我无法获取它的内容。我的萤火虫也没有任何错误

```
<!DOCTYPE html>
<html>
    <head>
     <script type="text/javascript" src="jquery.js"></script>   
     <script>
     $(document).ready(function(){ 
       $.get('/json.txt', 
       function(data) { 
            $('div.result').html(data);

        });
     });
     </script>
    </head>

    <body>
    <div class="result"></div>
    </body>         
    </html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T11:28:34.453

“在同一页上” ？你的意思是“在同一个目录中”？如果是这样使用

```
$.get('json.txt' 
```

如果这不起作用，我建议使用长格式来查看会发生什么：

```
$.ajax({
  url: 'json.txt',
  success: function(data){console.log(data)},
  error: function(jqXHR, textStatus, errorThrown) {console.log(jqXHR, textStatus, errorThrown)};
}); 
```

因此，您可以在控制台 (ctrl+maj+i) 中看到错误（或数据）。

另一个注意事项：如果您在其中打开 html 文件，这将不起作用，`file://`因为 json 将被视为来自另一个域。您必须有一个 http 服务器并在`http://`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:36:40.973

如果您输入完整路径，一切正常吗？

```
$.get('http://localhost/json.txt', function(data) {

}); 
```

我正在尝试帮助检测问题

如果文件是本地文件（`file:///`），则查看[jQuery: read text file from file system](https://stackoverflow.com/questions/4408707/jquery-read-text-file-from-file-system)

# cryptography - AES CTR 模式的互操作性？

> ID：12529612
> 
> 赞同：4
> 
> 时间：2012-09-21T11:28:02.923
> 
> 标签：cryptography, aes, commoncrypto, ctr-mode

我在 CTR 模式下使用 AES128 加密进行加密，针对不同的客户端（Android/Java 和 iOS/ObjC）实现。加密数据包时使用的 16 字节 IV 格式如下：

```
<11 byte nonce> | <4 byte packet counter> | 0 
```

每发送一个数据包，数据包计数器（包含在发送的数据包中）就会增加一。最后一个字节用作块计数器，因此少于 256 个块的数据包总是获得唯一的计数器值。我假设 CTR 模式指定计数器应该为每个块增加 1，以大端方式使用最后 8 个字节作为计数器，或者这至少是事实上的标准。Sun 加密实现中似乎也是这种情况。

当相应的 iOS 实现（使用 CommonCryptor，iOS 5.1）在解码数据包时未能解码除第一个块之外的每个块时，我有点惊讶。似乎 CommonCryptor 以其他方式定义了计数器。CommonCryptor 可以在 big endian 和 little endian 模式下创建，但 CommonCryptor 代码中的一些模糊注释表明这不（或至少尚未）完全支持：

```
http://www.opensource.apple.com/source/CommonCrypto/CommonCrypto-60026/Source/API/CommonCryptor.c

/* corecrypto only implements CTR_BE.  No use of CTR_LE was found so we're marking
   this as unimplemented for now.  Also in Lion this was defined in reverse order.
   See <rdar://problem/10306112> */ 
```

通过逐块解码，每次按照上面指定的方式设置 IV，它都能很好地工作。

我的问题：在一次解码多个块时，是否有一种“正确”的方式来实现 CTR/IV 模式，或者在使用不同的加密库时我是否可以期望它是互操作性问题？CommonCrypto 在这方面是否存在问题，还是只是以不同方式实现 CTR 模式的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:16:59.270

[NIST 建议 sp800-38a 附录 B](http://csrc.nist.gov/publications/nistpubs/800-38a/sp800-38a.pdf)中（粗略地）指定了计数器的定义。请注意，NIST 仅在安全性方面指定如何使用 CTR 模式；它没有为计数器定义一种标准算法。

要直接回答您的问题，无论您做什么，您都应该期望计数器每次增加一。根据 NIST 规范，计数器应表示 128 位大端整数。可能只有最低有效（最右边）位会增加，但这通常不会产生影响，除非您传递 2^32 - 1 或 2^64 - 1 值。

为了兼容性，您可以决定使用第一个（*最左边*的）12 个字节作为**随机**数，并将后一个字节保留为零，然后让 CTR 的实现来执行增量。在这种情况下，您只需在开始时使用 96 位/12 字节随机数，在这种情况下，不需要数据包计数器。

但是，在计数器用完所有可用位之前，您只能使用 2^32 * 16 字节的纯文本。如果计数器返回零或随机数本身包含在计数器中，这是特定于实现的，因此您可能希望将自己限制为 68,719,476,736 = ~68 GB 的消息（是的，以 10 为底，千兆*表示*1,000,000,000）。

*   由于生日问题，您有 2^48 的机会 (48 = 96 / 2) 为随机数创建冲突（每条*消息*都需要，而不是每个块），因此您应该限制消息的数量；
*   如果某些攻击者欺骗您为相同的 nonce 解密 2^32 个数据包，您的计数器就会用完。

如果这仍然不兼容（测试！），则使用最初的 8 个字节作为 nonce。不幸的是，这确实意味着由于生日问题，您需要限制消息的数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T08:59:11.257

进一步的调查揭示了 CommonCrypto 问题：

在 iOS 6.0.1 中，little endian 选项现在未实现。此外，我已经验证了 CommonCrypto 存在错误，因为 CCCryptorReset 方法实际上并没有按应有的方式更改 IV，而是使用预先存在的 IV。6.0.1 中的行为与 5.x 不同。

如果您使用无效的 IV 初始化 CommonCrypto，并在加密之前将其重置为实际的 IV，这可能是一个安全风险。这将导致您的所有数据都使用相同的（无效的）IV 加密，并且多个流（可能应该具有不同的 IV 但使用相同的密钥）将通过具有相应 ctr 的数据包的简单 XOR 泄漏数据。

# perl - 如何在 Mojo::UserAgent 中设置自定义用户代理字符串

> ID：12529617
> 
> 赞同：3
> 
> 时间：2012-09-21T11:28:12.633
> 
> 标签：perl, user-agent, mojo, mojolicious

我们有一堆围绕 Mojo::UserAgent 构建的代码，迁移到 MojoX::UserAgent 并不是一个很好的选择。我想知道是否有办法在 Mojo::UserAgent 中获取/设置用户代理字符串？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-22T21:38:10.463

当前（Mojo 4.5）方式是：

```
# Change name of user agent
$ua->transactor->name('MyUA 1.0'); 
```

[请参阅此处](https://metacpan.org/pod/Mojo::UserAgent#transactor)的CPAN 文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T11:47:27.367

使用[`name`](http://search.cpan.org/~sri/Mojolicious-3.42/lib/Mojo/UserAgent.pm#name)访问器：

```
my $name = $ua->name;
$ua->name('Mozilla/5.0'); 
```

（请注意，在 4.x 版本中，名称访问器已被删除）

# matrix - 用于创建矩阵的 Diag 函数

> ID：12529618
> 
> 赞同：1
> 
> 时间：2012-09-21T11:28:21.667
> 
> 标签：matrix, diagonal

我将如何创建矩阵

```
[1  2  0  0  0;
-1  1  2  0  0;
 0 -1  1  2  0;
 0  0 -1  1  2;
 0  0  0 -1  1] 
```

在 MatLab 中使用 diag 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:39:46.180

这是一种方法：

```
> diag(ones(1,5),0)+diag(ones(1,4),1)*2+diag(ones(1,4),-1)*-1
ans =

   1   2   0   0   0
  -1   1   2   0   0
   0  -1   1   2   0
   0   0  -1   1   2
   0   0   0  -1   1

> 
```

这只是在 0、+1 和 -1 处创建三个对角线，根据需要缩放它们，然后添加它们。

# java - 当已经创建的线程处于等待状态时，Struts2 Action 类的创建受到限制

> ID：12529619
> 
> 赞同：0
> 
> 时间：2012-09-21T11:28:23.177
> 
> 标签：java, struts2

Struts2 Action 实例的创建以某种方式受到限制。在我的应用程序中，我有一个包含 20 个 iframe（另一个 jsp）的主 JSP。每个 iframe 内容都是从 Action 类加载的。当我尝试通过创建 20 个动作实例来加载所有 20 帧时没有问题。当我提交主 JSP 时，理想情况下应该已经创建了 20 个动作实例。但我只能看到创建了 6 个动作实例。此应用程序需要所有 20 个 iframe 内容的内容用于业务处理，因此我将其存储在一个向量中，并确保该向量一次只能由一个操作实例访问。我也确实实现了等待和 notifyAll 机制。我面临的问题是只创建了六个动作实例，其中我需要创建 20 个动作实例。这是 Struts2 的限制吗？有没有办法解决这个问题？

```
public void waitForOperationStatus() {
    String opStatus = getOperationStatusFromSession();
    synchronized (productVOsInVector) {
        while (!opStatus.equalsIgnoreCase(SUCCESS)) {
            try {
                System.out.println("Window # " + activeWindowNumber
                        + " Waiting");
                productVOsInVector.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            opStatus = getOperationStatusFromSession();
        }
        productVOsInVector.notifyAll();
    }
} 
```

# r - 选择矩阵中某行的一些值

> ID：12529625
> 
> 赞同：2
> 
> 时间：2012-09-21T11:28:42.603
> 
> 标签：r

在带有矩阵的 R 中：

```
m <- matrix(1:20, ncol = 4) 
colnames(m) <- letters[1:4] 
```

在我只想选择一个值的情况下，它可以工作。像这样，

```
subset(m, m[,4] == 17) 
```

但是，如果我想要例如 3 个值，则会出现错误。看这个：

```
subset(m, m[,4] == c(17,19,20,"|")) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:31:52.057

更改`==`方式`%in%`

```
subset(m, m[,4] %in% c(17,19,20)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:32:07.433

不使用子集

```
m[ m[,4] %in% c(17, 19, 20),] 
```

# weblogic - 节点管理器通过Weblogic 10.3.4 中的WLST 是否调用startWeblogic.cmd

> ID：12529628
> 
> 赞同：0
> 
> 时间：2012-09-21T11:28:49.497
> 
> 标签：weblogic, weblogic-10.x

我正在使用 weblogic 10.3.4 并有一个 WLST 脚本，它执行以下操作 1\. 创建域 2\. 创建 JDBC 3\. 启动 NodeManager 4\. 连接到 Nodemanager 5\. 并部署我的应用程序

以下是我脚本的相关部分

```
 templatehome = domainhome + "/wlserver/common/templates/domains/wls.jar"
      readTemplate(templatehome)
      create('MyDomain', 'Domain')
      cd('/Security/MyDomain/User/weblogic')
      cmo.setName(domainuserid)
      cmo.setUserPassword(domainpwd)    
      writeDomain(domainlocation + '/'+ domainname)
      ---Some other code related to JDBC
      closeTemplate()
      ---- Updating setDomainEnv.cmd
        f = open(domainlocation+ '/' + domainname +'/bin/setDomainEnv.cmd', "a+")
f.write("set CLASSPATH=%DOMAIN_HOME%\lib\javax.el-api-2.2.4.jar;%DOMAIN_HOME%\lib\com.sun.el_2.2.0.v201105051105-com.sun.el_2.2.0.v201105051105.jar;%CLASSPATH%")
f.close()

      startNodeManager()
      nmConnect(domainuserid, domainpwd, 'localhost', '5556', 'MyDomain','D:/MyLoc/Tools/Weblogic/user_projects/domains/MyDomain')
      nmStart('AdminServer')
       connect()
      deploy('myapp','my-war-location') 
```

请注意，我正在更新 WLST 代码本身中的 SetDomainEnv.cmd。

当我运行此脚本时，将创建域，启动节点管理器并部署应用程序。但是服务器启动不会通过 startWEblogic.cmd 发生，并且我更新的 SetDomainEnv.cmd 没有被调用。所以问题是 NodeManager 是否使用 startWEblogic.cmd 来启动服务器？如果是，那么为什么它没有在我的代码中发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:08:33.837

检查 nodemanager.properties 中的 StartScriptEnabled 和 StartScriptName 属性（例如：wlserver_10.3/common/nodemanager/nodemanager.properties）

StartScriptEnabled 应设置为 true，StartScriptName 应设置为 startWebLogic.cmd。默认情况下，这些值已设置，如果未设置，请设置它们并重新启动 nodemanager 以使更改生效。

如果上述修复不起作用，请使用 nodemanager.log 内容更新问题。

参考：[http ://docs.oracle.com/cd/E24329_01/web.1211/e21050/java_nodemgr.htm#i1068413](http://docs.oracle.com/cd/E24329_01/web.1211/e21050/java_nodemgr.htm#i1068413)

# eclipse - Eclipse - 在“计算启动按钮工具提示”期间发生内部错误

> ID：12529629
> 
> 赞同：9
> 
> 时间：2012-09-21T11:28:56.907
> 
> 标签：eclipse, ide

我早些时候启动了 Eclipse 以记下一个片段，当我尝试运行一个新项目时遇到以下错误：

> 在“计算启动按钮工具提示”期间发生内部错误。

只要我将鼠标悬停在顶部栏中的运行图标上，或者如果我右键单击资源管理器窗口中的类并选择任何运行/调试选项，就会显示该弹出窗口。

在对错误进行了一些研究之后，我看到有几个人发布了类似的消息，但他们都是 Eclipse 的全新安装。所以请注意，这不是全新安装，Eclipse 今天早些时候运行良好。另请注意，不仅我的新项目没有运行（使用正常`main`方法），而且我之前运行的项目都因相同的错误而停止工作。

最后，还要注意，在看到其他人关于修复此问题的建议后，其中一位特别说要从页面顶部的运行菜单中选择运行配置。当我从此下拉列表中选择运行配置时，我收到以下消息：

> 创建启动配置选项卡时发生异常
> 原因：插件 org.eclipse.jdt.debug.ui 无法加载类 org.eclipse.jdt.internal.debug.ui.launcher.LocalJavaApplicationTabGroup

在该消息之后，运行窗口打开，但所有选项卡都丢失了。就像您可以在哪里设置显示宽度和高度以及其他选项卡一样，它们现在都从窗口中消失了。

我今天早些时候使用 Eclipse 没有问题，我确信在 Eclipse 工作和现在之间没有发生任何更新。我的问题涉及多个部分：简而言之有什么问题？是什么原因造成的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T18:54:35.123

从升级后遇到同样错误的某个人的另一个站点得到这个。也为我工作。显然将以下行放在您的`eclipse.ini`帮助中：

```
-Dcom.ibm.icu.util.TimeZone.DefaultTimeZoneType=ICU 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-19T05:12:40.963

尝试在以下位置设置启动属性：

```
Window>Preferences>Run/Debug(Expand)>Launching(Click) 
```

在启动操作菜单下将其设置为：

```
Always launch the previously launched application 
```

点击：

```
Apply>Ok 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T07:18:20.713

我从来没有发现出了什么问题，但是重新安装 eclipse 修复了它。所有项目似乎都完好无损地幸存下来。感谢您对.ini 的回复，但这没有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-16T15:13:11.737

我今天遇到了同样的错误——在一个运行了几个月的 Eclipse 安装（Juno SR2 64bit）中。

0：自昨天（运行良好时）以来，我的项目的 svn 没有任何变化。

1：我从“Windows 7 -> 属性 -> 上一个副本”备份恢复了工作区。这失败了，因为“.metadata”的目录结构包含的文件夹结构比所支持的更深。

2：我从隔夜存档中恢复了工作区（gzip 压缩，因此文件深度不是问题）。这没有效果。

3：我试图从“Windows 7 -> 属性 -> 以前的副本”备份中恢复 Eclipse 安装目录（似乎更新了很多）。再次失败 - 因为文件夹深度问题（注意：它安装在我磁盘的根目录中 - 所以实际上没有办法在这个安装上使用恢复！）

4：必须从我的工作区中删除 .metadata 并重新安装 eclipse（以及所有其他插件），然后重新导入我的项目，并设置所有服务器和 android 等，这花了好几个小时。

这个故事的主旨？每晚手动备份您的工作区和 eclipse 安装。Windows 还原不会拯救你。备份您的工作空间是不够的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-28T14:57:25.373

我在使用 eclipse mars 时遇到了同样的问题。我清除了文件夹 .recommenders\index

这解决了我的问题。希望能帮助到你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-27T15:59:39.023

如果您拥有从官方网站下载的 eclipse 文件。只需将这些文件解压缩到您之前的 eclipse 安装所在的同一文件夹中，然后选择全部替换。最佳解决方案

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-01T22:44:51.080

我也遇到了这个问题，我的项目出现这个问题的原因是我在项目的根文件夹中缺少 JRE 系统库。要解决此问题，请确保在项目的根文件夹中有 JRE System Libraries 等库。

# unit-testing - Powershell 的单元测试框架

> ID：12529632
> 
> 赞同：6
> 
> 时间：2012-09-21T11:29:03.290
> 
> 标签：unit-testing, powershell, psunit, pester

3年前有一个关于Powershell单元测试框架的问题，[How to do TDD and unit testing in powershell？](https://stackoverflow.com/questions/940497/how-to-do-tdd-and-unit-testing-in-powershell)，当时所有的框架都很新：

*   PSUnit：[http ://www.psunit.org/](http://www.psunit.org/)
*   纠缠：[https ://github.com/scottmuc/Pester](https://github.com/scottmuc/Pester)
*   PowerSpec：在 github /shishkin/PowerSpec

3年后，我想他们已经进化并成熟了。现在我想做 TDD（以前从未做过），但我不知道该使用哪一个。在网上搜索，貌似 PSUnit 和 Pester 是最常用的。

你在使用它们吗？它们各自的优缺点是什么？有什么推荐吗？

谢谢，

# eclipse - 如何向 Eclipse 添加插件，以便我可以从 Eclipse 运行 QML

> ID：12529637
> 
> 赞同：3
> 
> 时间：2012-09-21T11:29:11.890
> 
> 标签：eclipse, eclipse-plugin, qml

如何将插件添加到 Eclipse 中，以便我可以`QML`从 Eclipse运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:04:06.010

使用 BlackBerry 的 Momentics IDE，它基于 Eclipse 构建，但集成了 QML 语法突出显示和预览：

[https://developer.blackberry.com/cascades/download/](https://developer.blackberry.com/cascades/download/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T06:39:40.433

我已经下载了 QT developer 并正在开发它。QT 开发人员有 QML 编辑器........ :)

# jquery - 将使用 jquery 的页面包含在 iframe 中的缺点？

> ID：12529639
> 
> 赞同：1
> 
> 时间：2012-09-21T11:29:19.377
> 
> 标签：jquery, asp.net, iframe

我正在开发一个 asp.net Web 应用程序，并且正在使用 jQuery。客户告诉我，他想在他们当前网页的 iframe 中使用这个 Web 应用程序。

所以基本上：

*   将使用大量 jQuery（或任何其他 javascript 函数）的页面包含到 iframe 中是否是常规的？

*   我应该期待任何困难吗？

我问这个是因为没有必要使用 jQuery。如果这会遇到困难，我可以简单地将 jQuery 部分从项目中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:37:27.400

我能想到这样做的唯一原因是，如果您在 iframe 中加载的页面将在与“外部页面”*不同的域*上提供，因为这可以作为浏览器的解决方法[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)块。

**但是......**当您的客户请求“在其当前应用程序的 iframe 内部”使用某些内容时，请确保他们知道他们在说什么。可能是他们只是在某个地方（有时，可能是十年前......）学到了“iframe”这个词，并且希望看起来他们比他们实际知道的更多。

再问一遍，确保你理解客户*真正*想要完成的事情——你需要 jQuery 吗？你需要一个 iframe 吗？您应该满足的*真正需求*是什么，最好的方法是什么（不管您的客户对互联网了解多少）？

[旁注：这些问题会让您的客户向其他潜在客户推荐您。]

# android - 如何设置地图视图的缩放级别，使三个大头针可见？

> ID：12529641
> 
> 赞同：0
> 
> 时间：2012-09-21T11:29:33.230
> 
> 标签：android, maps

我的地图视图包含许多精确点。当用户进行该活动时，应该将地图放大到这样的级别，正确​​的 3 品脱是可见的。地图不应该或多或少地缩放，它应该正好是三个。我知道缩放级别地图可以通过代码在 0 到 21 之间变化。但是有没有办法设置缩放级别，使得在两种情况下都可以看到精确的 3 个针脚，如果针脚远或近正确 3 应该是可见的吗？ API中有什么功能可以这样设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:33:32.533

点是您希望在地图上可见的所有地理点。

```
private void Zoom() {
    int minLatitude = Integer.MAX_VALUE;
    int maxLatitude = Integer.MIN_VALUE;
    int minLongitude = Integer.MAX_VALUE;
    int maxLongitude = Integer.MIN_VALUE;

    for (GeoPoint p : points) {
        int lati = p.getLatitudeE6();
        int lon = p.getLongitudeE6();

        maxLatitude = Math.max(lati, maxLatitude);
        minLatitude = Math.min(lati, minLatitude);
        maxLongitude = Math.max(lon, maxLongitude);
        minLongitude = Math.min(lon, minLongitude);
    }
    mapController.zoomToSpan(Math.abs(maxLatitude - minLatitude),
            Math.abs(maxLongitude - minLongitude));
    mapController.animateTo(new GeoPoint((maxLatitude + minLatitude) / 2,
            (maxLongitude + minLongitude) / 2));
} 
```

# c++ - 为什么在向量向量上使用的 clear() 不会清除这些向量的值？

> ID：12529654
> 
> 赞同：-5
> 
> 时间：2012-09-21T11:30:22.307
> 
> 标签：c++, vector, stdvector

我非常确定向量调用了包含对象的析构函数，我只是在主向量上使用了 clear() 然后我重用了向量并且存储在其中的向量的值没有被清除......

编辑 - 代码：

```
vector<vector<int> > flush1;
flush1.reserve(4);
for(int i = 0; i != 4; ++i) flush1[i].reserve(7);
flush1.clear();
flush1[0].push_back(some_int);
flush1[1].push_back(some_int);
flush1[2].push_back(some_int);
flush1[3].push_back(some_int);
cout the size from flush1[0-3];
flush1.clear(); 
```

然后再次

```
flush1[0].push_back(some_int);
flush1[1].push_back(some_int);
flush1[2].push_back(some_int);
flush1[3].push_back(some_int); 
```

并从flush1 [0-3]计算大小 cout-s 他们以前的大小+新大小（新旧相加）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:45:04.867

矢量对象具有三个指针：开始、结束和保留存储结束。

该`clear()`方法在每个包含的对象上调用析构函数，然后将结束指针设置为开始。

所以被破坏对象的数据在保留的存储中仍然是可见的（例如使用调试器）。

# html - 在 iframe 中使用锚标记

> ID：12529662
> 
> 赞同：0
> 
> 时间：2012-09-21T11:30:42.987
> 
> 标签：html, xhtml

我正在使用带有基本网址[http://test.com/links的 iframe](http://test.com/links)

```
<iframe src="http://test.com/links?plugins=true"></iframe> 
```

并且 iframe 内容里面有一个链接，比如

```
 <a href="/test"> links </a> 
```

如果我在 iframe 中使用带有正斜杠（/）的锚标记 href，则生成的 href 如下

```
<a href="http://test.com/test"> links </a> 
```

如果我使用不带斜线的 href，生成的 href 是

```
<a href="http://test.com/links?plugins=true/test"> links </a> 
```

我想要一个带有基本 url 的链接，后跟 href 内容，如下所示

```
<a href="http://test.com/links/test"> links </a> 
```

在 iframe 中使用锚标签有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:01:59.773

在您的 iframe 页面中，添加`<base href="http://test.com/links"/>`该`<head>`部分。

[http://www.w3schools.com/tags/tag_base.asp](http://www.w3schools.com/tags/tag_base.asp)

# mongodb - MongoDB。从三个集合中查询

> ID：12529663
> 
> 赞同：0
> 
> 时间：2012-09-21T11:30:44.547
> 
> 标签：mongodb

有收藏

```
city: {"_id", "name"}

company: {"_id", "name", "cityID"}

comments: {"_id", "text", "companyID"} 
```

您必须选择对某个城市的公司的最后 10 条评论。

现在我先选择城市中所有公司的_id，然后在_id上收到10条评论，代码如下：

```
$ db-> execute ('function () {

var result = {};

var company = [];
result.company = [];
db.company.find ({"city": "msk"}, {"title": 1, "_id": 1}). forEach (function (a) {
result.company [a._id] = Object.deepExtend (a, result [a._id]);
company.push (a._id);
});

var comments = [];
result.comments = [];
db.comments.find ({"company": {"$ in": company}}). sort ({"createTime": -1}). limit (10). forEach (function (a) {
result.comments [a._id] = Object.deepExtend (a, result [a._id]);
comments.push (a._id);
});

return result;

} '); 
```

Esti 是做我需要的更好的选择吗？提前感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:58:49.533

现在你的代码

```
db.comments
  .find({"company": {"$in": company}})
  .sort({"createTime": -1})
  .limit(10) 
```

仅获取指定城市的最后 10 条评论，而不是每家公司的最后 10 条评论。这是你想要的吗？如果是这样，那么只为每个评论存储一个“城市”字段，然后根据城市查询评论集合可能是有意义的。

如果您想为每家公司持续 10 次，使用您当前的模式，您将不得不对每家相关公司的评论集合进行单独查询。

您的数据的用例是什么？

编辑：

在关系数据库模型中，您将能够执行一个 JOIN 查询，该查询将在一个查询中从两个表（公司和评论）中获取信息。但是，由于 MongoDB 不支持连接，如果您希望能够在单个查询中获取所需的信息，那么您需要通过在评论集合中存储一个城市字段来对数据进行一些非规范化。

# spring - 自动装配在 Spring 3.1.2、JUnit 4.10.0 中不起作用

> ID：12529667
> 
> 赞同：8
> 
> 时间：2012-09-21T11:30:51.023
> 
> 标签：spring, junit, junit4, spring-annotations, spring-test-mvc

使用 Spring 3.1.2、JUnit 4.10.0，这两个版本都相当新。我遇到了无法让基于注释的自动装配工作的问题。

下面是两个示例，一个没有使用注释，它工作正常。第二个使用注释，它不起作用，我找不到原因。我非常关注 spring-mvc-test 的示例。

**工作**：

```
package com.company.web.api;
// imports

public class ApiTests {   

    @Test
    public void testApiGetUserById() throws Exception {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("/com/company/web/api/ApiTests-context.xml");
        UserManagementService userManagementService = (UserManagementService) ctx.getBean("userManagementService");
        ApiUserManagementController apiUserManagementController = new ApiUserManagementController(userManagementService);
        MockMvc mockMvc = standaloneSetup(apiUserManagementController).build();

        // The actual test     
        mockMvc.perform(get("/api/user/0").accept(MediaType.APPLICATION_JSON)).andExpect(status().isOk());
    }
} 
```

**失败**，因为`userManagementService`为空，没有自动装配：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration       // should default to ApiTests-context.xml in same package
public class ApiTests {

    @Autowired
    UserManagementService userManagementService;

    private MockMvc mockMvc;

    @Before
    public void setup(){
        // SetUp never gets called?!
    }

    @Test
    public void testGetUserById() throws Exception {

        // !!! at this point, userManagementService is still null - why? !!!       

        ApiUserManagementController apiUserManagementController 
            = new ApiUserManagementController(userManagementService);

        mockMvc = standaloneSetup(apiUserManagementController).build();

        // The actual test
        mockMvc.perform(get("/api/user/0").accept(MediaType.APPLICATION_JSON)).andExpect(status().isOk());
    }
} 
```

请注意，上面的两个测试类都应该使用相同的上下文配置，并且其中定义了 userManagementService。

ApiTests-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
            http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-2.0.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://localhost:3306/mydb?useUnicode=true&amp;characterEncoding=utf8"/>
        <property name="username" value="user"/>
        <property name="password" value="passwd"/>
    </bean>

    <!-- Hibernate SessionFactory -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"
          p:dataSource-ref="dataSource" p:mappingResources="company.hbm.xml">
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.generate_statistics">${hibernate.generate_statistics}</prop>
            </props>
        </property>
        <property name="eventListeners">
            <map>
                <entry key="merge">
                    <bean class="org.springframework.orm.hibernate3.support.IdTransferringMergeEventListener"/>
                </entry>
            </map>
        </property>
    </bean>

    <!-- Transaction manager for a single Hibernate SessionFactory (alternative to JTA) -->
    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"
          p:sessionFactory-ref="sessionFactory"/>

    <!-- ========================= BUSINESS OBJECT DEFINITIONS ========================= -->

    <context:annotation-config/>
    <tx:annotation-driven/>
    <context:mbean-export/>

    <!-- tried both this and context:component-scan -->
    <!--<bean id="userManagementService" class="com.company.web.hibernate.UserManagementServiceImpl"/>-->
    <context:component-scan base-package="com.company"/>

    <!-- Hibernate's JMX statistics service -->
    <bean name="application:type=HibernateStatistics" class="org.hibernate.jmx.StatisticsService" autowire="byName"/>

</beans> 
```

并且 UserManagementService （接口）以及 UserManagementServiceImpl 具有`@Service`注释。

两个小问题/观察： setup() 永远不会被调用，即使它有 @Before 注释。此外，我注意到如果我的测试方法不以名称“test”开头，则它们不会被执行/识别，尽管我看到的所有 spring-mvc-test 示例都不是这种情况。

pom.xml：

```
 <dependency>
        <groupId>org.junit</groupId>
        <artifactId>com.springsource.org.junit</artifactId>
        <version>4.10.0</version>
        <scope>test</scope>
    </dependency> 
```

![在此处输入图像描述](../Images/89d12f6ac7d0e0dd5e53853aef801d2c.png)

**更新：**

仅当我从 Maven 运行测试时才会出现此问题；当我从我的 IDE (IntelliJ IDEA) 中运行测试时没关系。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.3</version>
            <configuration>
                <includes>
                    <include>**/*Tests.java</include>
                </includes>
            </configuration>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T12:46:54.477

除非您进行组件扫描，否则不会发生自动装配。

你为什么在你的代码中注释掉它？

```
<!--<context:component-scan base-package="com.company"/>--> 
```

也回复：junit。如果您在 Eclipse 中，您可以转到 pom 的依赖树视图并在 junit 上进行过滤。检查您实际上使用的是该版本，而不是使用较旧的junit。

编辑：好的，我刚刚检查了您的配置，并且能够让它在这边工作。我唯一的猜测可能是您以某种方式使用糟糕的测试运行程序运行它，这导致它使用了错误的junit。

**编辑2（已解决）**：所以事实证明问题是因为您使用的是自定义版本的junit。Surefire 寻找提供的 junit 库但找不到它。因此，它默认为 junit 3，这就是导致您的应用跳过加载配置的原因。

您可以明确指定自定义提供程序，例如

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12.3</version>
    <dependencies>
      <dependency>
        <groupId>org.apache.maven.surefire</groupId>
        <artifactId>surefire-junit47</artifactId>
        <version>2.12.3</version>
      </dependency>
    </dependencies>
  </plugin> 
```

但我发现它不适用于自定义回购。如果可能的话，我建议使用标准版本的 junit。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:37:43.790

尝试特定的上下文配置，例如

```
@ContextConfiguration(locations = {"/file1.xml", "/file2.xml" }) 
```

（仅展示如何在需要时将其与多个文件一起使用 - 一个可能就足够了）

编辑：您是否启用了此处提到的 AutowiredAnnotationBeanPostProcessor？[http://www.mkyong.com/spring/spring-auto-wiring-beans-with-autowired-annotation/](http://www.mkyong.com/spring/spring-auto-wiring-beans-with-autowired-annotation/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:37:38.857

我有同样的问题。我的 @Autowire 可以在我的 IDE (SpringSource STS) 中工作，但是当我使用 Maven 从命令行构建时无法加载应用程序上下文。

问题在于我在 pom.xml 中的依赖项。我正在使用导致错误的 JUnit 的 Spring 版本。我认为这是原始帖子的根本原因。我不需要编写任何 Maven 插件就可以工作。

我变了

```
<dependency>
    <groupId>org.junit</groupId>
    <artifactId>com.springsource.org.junit</artifactId>
    <version>4.7.0</version>
</dependency> 
```

至

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.10</version>
</dependency> 
```

# android - android smack订阅用户不起作用

> ID：12529668
> 
> 赞同：1
> 
> 时间：2012-09-21T11:30:55.670
> 
> 标签：android

我正在使用下面的代码向任何用户发送好友请求，它工作正常，但我无法从名册列表中找到连接的用户。

现在我想知道如何在名册列表中识别新请求的朋友。

```
Roster roster = XMPPSmackConnection.getInstance().connection.getRoster();
roster.setSubscriptionMode(Roster.SubscriptionMode.manual);
try {
    if(!_userName.contains("@"))
        _userName=_userName+"@204.93.197.136";

    Presence response = new Presence(Presence.Type.subscribe);
    response.setTo(_userName);
    XMPPSmackConnection.getInstance().connection.sendPacket(response);

    //roster.createEntry(_userName, _nickName, my_friends[]);
    //addBuddy(_userName, _nickName, Friends);
} catch (Exception e) {
    _progDailog.dismiss();
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T14:40:26.370

我一直在尝试解决一个类似的问题，即名册列表在接受朋友的请求时没有更新。遵循的步骤：-

1.  **使用 Presence 类型作为订阅**发送好友请求
***   在另一端，在接受朋友的请求时，发送一个**订阅**的出席信息类型*   收到订阅的 Presence 数据包后，将发送回另一个**订阅的数据包。****

 **服务器的名册列表通过订阅类型立即更新为两者，但名册条目不是。此外，名册的订阅模式设置为**手动**，并且还附加了一个 PacketListener。

请您通过为这个问题提供解决方案来提供一些帮助吗？这会有很大帮助。

谢谢和问候， Vaidehi**

# php - 从 csvdata 表中获取数据我如何显示 branch_name 而不是 branch_code

> ID：12529670
> 
> 赞同：0
> 
> 时间：2012-09-21T11:31:04.333
> 
> 标签：php

我在数据库中有两个表，i) csvdata，ii)dc_master。在 csvdata 表中，我有一些列，如：id，date，branch_code，A，B，C，D，E，F。在 dc_master 表中，我有三列：id，branch_code，branch_name 当从 csvdata 表中获取数据时我如何显示分支名称而不是分支代码。

页面图片链接：[https ://www.dropbox.com/s/zn40pjjai4g92m5/aa.jpg](https://www.dropbox.com/s/zn40pjjai4g92m5/aa.jpg)

我的代码是：

```
<?php 
    include 'include/config.php';
    include 'include/opendb.php';
    include 'loginheader.php'; 
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>CVS Edit</title>
<style type="text/css">
<!--
body {
    background-color: #cccccc;
}
-->
</style>

<link href="css/usercss.css" rel="stylesheet" type="text/css" />
<link type="text/css" href="calendar/ui-lightness/jquery-ui-1.8.23.custom.css" rel="stylesheet" />
        <script type="text/javascript" src="calendar/jquery-1.8.0.min.js"></script>
        <script type="text/javascript" src="calendar/jquery-ui-1.8.23.custom.min.js"></script>
        <script type="text/javascript">
        $(function(){
    var pickerOpts = {
        dateFormat: $.datepicker.ATOM

    };  
    $("#date").datepicker(pickerOpts);

});

        </script>
        <style type="text/css">
<!--
.style11 {font-size: 12px}
.style12 {
    color: #CCCCCC;
    font-size: 14px;
    font-weight: bold;
    font-family: Arial, Helvetica, sans-serif;
}
-->
        </style>
</head>

<body>
<div id="date_container">
<form action="cvs.php" method="post" name="date" id="calender" >
  Select a date &nbsp;
  <input name="date2" type="text" id="date" class="required"  />
  &nbsp;&nbsp;&nbsp;<input name="Submit" type="submit" class="submit_button" value="Search" />
</form>
</div>

<div id="cvsdata">
<?php
@$date=$_POST['date2'];

// update data in mysql database

$result = mysql_query("SELECT * FROM csvdata where activity_date like'$date %'ORDER BY `csvdata`.`branch_code` ASC");
$numrows = mysql_num_rows($result);

?>
<table width="1456" border="1" cellpadding="2" cellspacing="0" id="list">
<tr>
<td colspan="18"><div align="center" class="style3 style11 style11">List of Branches  </div></td>
</tr>

<tr>
<td width="81" align="center" class="style4"><span class="style4 style11 style11">Date</span></td>
<td width="70" align="center" class="style4"><span class="style4 style11 style11">Branch Code</span></td>
<td width="74" align="center" class="style4"><span class="style4 style11 style11">Centre</span></td>
<td width="81" align="center" class="style4"><span class="style4 style11 style11">Cash in Hand</span></td>
<td width="64" align="center" class="style4"><span class="style4 style11 style11">Cash at Bank</span></td>
<td width="69" align="center" class="style4"><span class="style4 style11 style11">Member Admitted</span></td>
<td width="68" align="center" class="style4"><span class="style4 style11 style11">Total Member</span></td>
<td width="72" align="center" class="style4"><span class="style4 style11 style11">Total Borrowers</span></td>
<td width="80" align="center" class="style4"><span class="style4 style11 style11">Today Loan Disbursement</span></td>
<td width="74" align="center" class="style4"><span class="style4 style11 style11">Total Loan Outstanding</span></td>
<td width="72" align="center" class="style4"><span class="style4 style11 style11">Today Saving Withdrawn</span></td>
<td width="68" align="center" class="style4"><span class="style4 style11 style11">Total Saving Balance</span></td>
<td width="69" align="center" class="style4"><span class="style4 style11 style11">Total Overdue Member</span></td>
<td width="69" align="center" class="style4"><span class="style4 style11 style11">Total Overdue Amount</span></td>
<td width="75" align="center" class="style4"><span class="style4 style11 style11">Head Office Transaction (+)</span></td>
<td width="75" align="center" class="style4"><span class="style4 style11 style11">Head Office Transaction (-)</span></td>
<td width="60" align="center" class="style4"><span class="style4 style11 style11">Edit</span></td>
<td width="72" align="center" class="style4"><span class="style4 style11 style11">Delete</span></td>
</tr>

<?php
if ($numrows != 0){

while($rows=mysql_fetch_array($result)){
$date='activity_date';

//@$result = mysql_query("SELECT dc_name FROM dc_master where branch_code='001'");
//  while($row = mysql_fetch_array($result))
//  {$centre=$row['dc_name'];}

?>

<tr>
<td height="28" class="readonly"><div align="center" class="style3 style11 style11"><?php echo $rows["$date"]; ?></div></td>
<td class="readonly"><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['branch_code']; ?></span></td>
<td class="readonly"><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['branch_code']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['A']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['B']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['C']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['D']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['E']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['F']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['G']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['H']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['I']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['J']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['K']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['L']; ?></span></td>
<td><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['M']; ?></span></td>

<!--link to update.php and send value of id -->
<td align="center" class="readonly"><a href="cvsedit.php?id=<?php echo $rows['id']; ?>" class="style3 style5 style5 style11 style11">Edit</a></td>
<td align="center" class="readonly"><a href="delete_cvs.php?id=<?php echo $rows['id']; ?>" class="style3 style5 style5 style11 style11" onclick="return confirm('Are you sure, you want to delete? (After delete you can not undo or get it again) <?php ?>')">Delete</a></td>
</tr>

<?php
}
}
else {?>

<tr><td colspan="18"><div align="center" class="style3 style11 style11">No record found, Please enter a valid date</div></td></tr> 
<?php }?>
</table>
</div>
<span class="style6 style12">Programmer : Prasanta Baidya / Mobile : 09830980840 / Email id : pbdigit@gmail.com</span>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:36:26.917

首先，加入你的两个表：

```
$result = mysql_query("SELECT * FROM csvdata INNER JOIN dc_master ON csvdata.branch_code = dc_master.branch_code where activity_date like'$date %'ORDER BY `csvdata`.`branch_code` ASC"); 
```

然后显示 branch_name

```
<td class="readonly"><span class="style3 style11 style11">&nbsp;&nbsp;&nbsp;<?php echo $rows['branch_name']; ?></span></td> 
```

代替`branch_code`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:40:26.213

```
$sql = "select * FROM csvdata LEFT JOIN dc_master ON dc_master.branch_code=csvdata.branch_code";
$res = mysql_query($sql);
while($sar = mysql_fetch_assoc($res)))
{
    echo $sar['branch_name'];
} 
```

# c# - 网络设备可以ping通但没有tcp连接

> ID：12529671
> 
> 赞同：1
> 
> 时间：2012-09-21T11:31:09.687
> 
> 标签：c#, networking, windows-7, tcp, tcpclient

我已经构建了一个 Windows 服务，它通过 tcpClient 使用 IP 和端口号连接到本地网络设备。网络设备流出数据，我收到读取。这一直适用于 MONTHS 的多个设置（始终 1 台机器-> 1 个网络设备）。

现在最近几乎所有的连接尝试都开始失败了！奇怪的是，我仍然可以通过命令提示符 ping 设备。在 putty 中，不传输任何数据。使用 netstat 我没有看到列出的任何远程地址。

在我的服务中有以下错误日志消息：

```
 Exception by Establishing TCP/IP Connection@ServiceName System.Net.Sockets.SocketException (0x80004005): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond XXX.XXX.XXX.XX:XXXX  (translated into english ;D)
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   at System.Net.Sockets.TcpClient.Connect(IPEndPoint remoteEP)
   at System.Net.Sockets.TcpClient.Connect(IPAddress address, Int32 port) 
```

这与网络有关吗？或者它与Windows更新或任何东西有关？

我最近的工作代码

```
 public void readDevice()
        {

            TcpClient Client = new TcpClient();
            System.Net.IPAddress ip = System.Net.IPAddress.Parse(ConfigurationManager.AppSettings["IP"]);

                /*
                * Establishing TCP/IP Connection
                */
                try
                {
                    // IP and Port number  
                    log.Debug("Try Client.Connect:" + ip);
                    Client.Connect(ip, 5000);

                }
                catch (Exception ex)
                {
                    /* Handle the socket exception.... */
                   //this error is thrown
                    log.Debug("Exception by Establishing TCP/IP Connection@ServiceName "+ ex);
                }

                NetworkStream MessageStream = Client.GetStream();

      //Magic be here

        } 
```

我真的被卡住了，因为可以ping但无法连接的设备。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:58:02.363

我不知道这会有多大帮助，但这听起来像是网络问题。如果它只是停止工作并且代码没有任何改变，我会开始在那里进行调查。

我的服务器遇到了这样的问题，问题最终是端口转发表搞砸了，所以我试图连接到错误的机器。我刚刚修复了转发，并且 blam-o！一切都很好。

我希望你的问题很容易解决。

# .htaccess - 代码点火器的 Mod 重写

> ID：12529673
> 
> 赞同：2
> 
> 时间：2012-09-21T11:31:23.710
> 
> 标签：.htaccess, codeigniter, mod-rewrite

我有一个代码点火器站点，需要接受以下格式的传入链接：

[http://domain.tld/somename.html?id=IDREF](http://domain.tld/somename.html?id=IDREF)

我需要为 mod_rewrite 创建一个规则，将该 URL 重写为：

[http://domain.tld/index.php/controller/somename/IDREF](http://domain.tld/index.php/controller/somename/IDREF)

我在为 .htaccess 文件编写规则时遇到问题。

我认为这应该工作：

```
RewriteCond ${QUERY_STRING} ^(.*\.html\?id=.*)$

RewriteRule ^([^/]*)\.html\?id=(.*) /index.php/controller/$1/$2 [L] 
```

但由于我是 mod_rewrite 的新手，我无法让它工作。

只是为了澄清我希望用户链接到这个丑陋的 url 并被发送到特定的控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:25:56.900

尝试这个：

```
RewriteCond ${QUERY_STRING} ^id=
RewriteRule ^(.*)\.html?id=(.*) index.php/controller/$1/$2 [L] 
```

`$2`如果在重写后以某种方式附加了原始查询字符串，则可能需要在第二个之后添加问号

# c# - 在 .NET App 中以 HTML 格式显示来自嵌入式资源的图像

> ID：12529674
> 
> 赞同：0
> 
> 时间：2012-09-21T11:31:33.033
> 
> 标签：c#, html, vb.net

我在 .net 应用程序中创建了一个 HTML 报告，我想在其中显示一个图像，该图像将来自一个作为嵌入式资源存储的 DLL。

在某些情况下，我可能对文件系统的访问权限有限。尽管如此，从嵌入式资源中获取图像的最佳方法是什么（我可以通过编程方式将其放入位图对象中）并将其显示在用户的 html 报告中，最好不使用文件系统。HTML 由应用程序创建。

更多信息：

该报告是通过遍历代码中的对象树创建的，每个对象都返回一段 html：

```
Function GetReportLine() as String
    Return String.Format("<p>Account Created on {0}</p>", CreatedTime.ToString("dd/MMM/yyyy h:mm tt"))
End Function 
```

然后将它们编译成字符串，用一些 CSS 修饰，并传递到嵌入在表单中的 WebBrowser 控件以显示给用户。

我想显示来自我的嵌入式资源的图像，如下所示：

```
Return String.Format("<p><img src=MyEmbeddedResourceImage>Account Created on {0}</p>", CreatedTime.ToString("dd/MMM/yyyy h:mm tt")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:37:28.727

看到这个；它将图像作为资源而不是物理文件流式传输：

[http://weblogs.asp.net/jeff/archive/2005/07/18/419842.aspx](http://weblogs.asp.net/jeff/archive/2005/07/18/419842.aspx)

# ruby-on-rails-3 - 如何右对齐数字数据和左对齐其他数据？

> ID：12529676
> 
> 赞同：0
> 
> 时间：2012-09-21T11:31:39.640
> 
> 标签：ruby-on-rails-3

我希望如果用户输入数字数据，它应该左对齐，如果他输入其他数据类型，那么它应该左对齐。文本对齐我可以给 css 属性 text-align:right。用户输入数据时如何找到数据类型？我正在使用 jquery 数据表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:59:41.127

这不是 Rails 的问题。如果您想根据单元格中内容的性质设置 css 属性，我强烈建议您使用 jQuery / Javascript 解决方案。

你可以这样做：

```
$(document).ready(function(){
    $("td").each(function() {
       if (parseInt($(this).text()) > 1) {
            $(this).css("text-align", "right");
        }
    });
}); 
```

对于更复杂的解决方案，您可以实现自己的 Jquery 过滤器，例如：

```
$.extend($.expr[":"], {
  expr: (function() {
    var op = {
      '=': function(n1, n2) { return n1 == n2; },
      '!=': function(n1, n2) { return n1 != n2; },
      '>': function(n1, n2) { return n1 > n2; },
      '>=': function(n1, n2) { return n1 >= n2; },
      '<': function(n1, n2) { return n1 < n2; },
      '<=': function(n1, n2) { return n1 <= n2; }
    };
    var ops = [];
    for (p in op) {
      ops.push(p);
    }
    var r = new RegExp("^\\s*(" + ops.join("|") + ")\\s*(-?\\d+(?:\\.\\d+)?)\\s*$");
    return function(elem, i, match) {
      var m = r.exec(match[3]);
      return m && op[m[1]](parseFloat($(elem).text()), parseFloat(m[2]));
    };
  })()
}); 
```

这将允许您根据数字约束过滤值，例如：

```
$("td:expr(>5)").css("text-align", "right"); 
```

# java - 使用 webstart 1.6 启动 1.4.2_12 应用程序时出现 MissingResourceException

> ID：12529678
> 
> 赞同：1
> 
> 时间：2012-09-21T11:31:42.230
> 
> 标签：java, classloader, java-web-start, resourcebundle

在我最终弄清楚为什么 JWS 1.6.0_29 无法启动 1.4.2_12 应用程序（请参阅[此问题](https://stackoverflow.com/questions/12421950/filenotfoundexception-starting-1-4-2-webstart-application-with-java-webstart-1-6)）之后，我在启动 1.4.2_12 应用程序时遇到了另一个异常。使用 JWS 1.6.0_29。

加载 ResourceBundle 时出现 MissingResourceException。然而，message.properties 文件**确实存在**于与加载它的类相同的包中。

> 当使用 JWS 1.4 或 1.5 启动应用程序时，不会引发异常。
> 仅在启动应用程序时引发异常。使用 JWS 1.6。

完整的堆栈跟踪是：

```
java.lang.ExceptionInInitializerError
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.javaws.Launcher.executeApplication(Unknown Source)
    at com.sun.javaws.Launcher.executeMainClass(Unknown Source)
    at com.sun.javaws.Launcher.doLaunchApp(Unknown Source)
    at com.sun.javaws.Launcher.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.util.MissingResourceException: Can't find bundle for base name com.test.hello.messages, locale fr_FR
    at java.util.ResourceBundle.throwMissingResourceException(Unknown Source)
    at java.util.ResourceBundle.getBundleImpl(Unknown Source)
    at java.util.ResourceBundle.getBundle(Unknown Source)
    at com.test.hello.Main.<clinit>(Main.java:10)
    ... 9 more 
```

## 重现的测试用例

JNLP 描述符是：

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0+" codebase="http://localhost:80/meslegacy/apps" href="testJwsXXTo142.jnlp">
    <information>
        <title>JWS TEST 1.6 -> 1.4.2</title>
        <vendor>Hello World Vendor</vendor>
        <description>Hello World</description>
    </information>

    <security>
        <all-permissions />
    </security>

    <resources>
        <j2se version="1.4.2_12" href="http://java.sun.com/products/autodl/j2se" />
        <jar href="jar/helloworld.jar" main="true" />
    </resources>

    <application-desc main-class="com.test.hello.Main" />
</jnlp> 
```

com.test.hello.Main 类是：

```
package com.test.hello;

import java.util.ResourceBundle;

import javax.swing.JFrame;

public class Main {

    private static final ResourceBundle BUNDLE = ResourceBundle.getBundle(Main.class.getPackage().getName()+".messages");

    public static void main(String[] args) {
        JFrame frame = new JFrame("Hello world !");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(800,600);
        frame.setVisible(true);
    }

} 
```

## 补充测试

*   为 ResourceBundle.getBundle() 方法指定 ClassLoader 和 Locale 并不能解决问题。
*   Main.class.getClassLaoder() 和 Thread.currentThread().getContextClassLaoder() 已经过测试并产生相同的异常。
*   “手动”加载资源确实有效（见下文）。

手动加载资源的测试代码：

```
ClassLoader cl = Main.class.getClassLoader();
String resourcePath = baseName.replaceAll("\\.", "/");
System.out.println(resourcePath);
URL resourceUrl = cl.getResource(resourcePath+".properties");
System.out.println("Resource manually loaded :"+resourceUrl); 
```

将产生：

```
com/test/hello/messages.properties
Resource manually loaded :jar:http://localhost:80/meslegacy/apps/jar/helloworld.jar!/com%2ftest%2fhello%2fmessages.properties 
```

*   但是，虽然可以找到资源，但无法获取资源内容。

例子：

```
ClassLoader cl = Main.class.getClassLoader();
String resourcePath = baseName.replaceAll("\\.", "/") + ".properties";
URL resourceUrl = cl.getResource(resourcePath);
// here, resourceUrl is not null. Then build bundle by hand
ResourceBundle prb = new PropertyResourceBundle(resourceUrl.openStream()); 
```

哪个产生：

```
java.io.FileNotFoundException: JAR entry com%2ftest%2fhello%2fmessages.properties not found in C:\Documents and Settings\firstname.lastname\Application Data\Sun\Java\Deployment\cache\6.0\18\3bfe5d92-3dfda9ef
    at com.sun.jnlp.JNLPCachedJarURLConnection.connect(Unknown Source)
    at com.sun.jnlp.JNLPCachedJarURLConnection.getInputStream(Unknown Source)
    at java.net.URL.openStream(Unknown Source)
    at com.test.hello.Main.main(Main.java:77)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.javaws.Launcher.executeApplication(Unknown Source)
    at com.sun.javaws.Launcher.executeMainClass(Unknown Source)
    at com.sun.javaws.Launcher.doLaunchApp(Unknown Source)
    at com.sun.javaws.Launcher.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

似乎更像是一种缓存问题...

我有任何一个提示，将不胜感激，

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:56:38.120

这是此问题的解释和解决方法。

## 1 - 说明

问题来自系统 ClassCloader（JWS6 系统 ClassLoader）返回的 URL。

在 JWS 1.6 中，系统 ClassLoader 返回的 URL 包含转义序列，如下所示：

```
jar:http://localhost:80/meslegacy/apps/jar/helloworld.jar!/com%2ftest%2fhello%2fmessages.properties 
```

在类路径中定位资源是可能的，但在实际访问该资源的内容时会引发 FileNotFoundException：这就是导致 ResourceBundle 中 FileNotFoundException 的原因。

请注意，当 URL 中没有出现转义序列时，例如资源位于 claspath 的根目录时，访问资源内容是没有问题的。仅当您在 URL 路径部分中获得 %xx 内容时才会出现问题。

## 2 - 解决方法

一旦问题得到解决（我花了好几天才弄清楚这个问题！），就该找到解决方法了。虽然我可以在特定的本地化代码部分解决我的问题，但很快发现可以通过编写特定的 ClassLoader 来“替换”JNLPClassLoader 来解决全局问题。我并没有真正“替换”，因为这对我来说似乎是不可能的，但我宁愿做以下事情：

1.  禁用 SecurityManager 以便能够使用我的自定义类加载器
2.  编写我自己的从 URLClassLoader 派生的类加载器，在返回时修复 URL
3.  使用从 JNLPClassLoader 中提取的 claspath 设置其类路径
4.  将此自定义类加载器设置为上下文类加载器
5.  将此自定义类加载器设置为 AWT-Event-Thread 上下文类加载器
6.  使用这个自定义类加载器来加载我的应用程序入口点。

这给出了以下 ClassLoader

```
public class JwsUrlFixerClassLoader extends URLClassLoader {

    private final static Logger LOG = Logger.getLogger(JwsUrlFixerClassLoader.class);

    private static String SIMPLE_CLASS_NAME = null;

    private static boolean LOG_ENABLED = "true".equals(System.getProperty("classloader.debug"));

    static {
        SIMPLE_CLASS_NAME = JwsUrlFixerClassLoader.class.getName();
        int idx = SIMPLE_CLASS_NAME.lastIndexOf('.');
        if (idx >= 0 && idx < SIMPLE_CLASS_NAME.length()-1) {
            SIMPLE_CLASS_NAME = SIMPLE_CLASS_NAME.substring(idx + 1);
        }
    }

    public JwsUrlFixerClassLoader(URL[] urls, ClassLoader parent) {
        super(urls, parent);
    }

    public URL getResource(String name) {
        if (LOG.isDebugEnabled()) {
            LOG.debug("getResource(): getResource(" + name + ")");
        }
        if (LOG_ENABLED) {
            login("getResource(" + name + ")");
        }
        URL out = super.getResource(name);
        if (out != null) {
            out = URLFixerTool.fixUrl(out);
        }
        if (LOG_ENABLED) {
            logout("getResource returning " + out);
        }
        return out;
    }

    public URL findResource(String name) {
        if (LOG_ENABLED) {
            login("findResource(" + name + ")");
        }
        URL out = super.findResource(name);
        if (out != null) {
            out = URLFixerTool.fixUrl(out);
        }
        if (LOG_ENABLED) {
            logout("findResource returning " + out);
        }
        return out;
    }

    public InputStream getResourceAsStream(String name) {
        if (LOG_ENABLED) {
            login("getResourceAsStream(" + name + ")");
        }
        InputStream out = super.getResourceAsStream(name);
        if (LOG_ENABLED) {
            logout("getResourceAsStream returning " + out);
        }
        return out;
    }

    protected synchronized Class loadClass(String name, boolean resolve) throws ClassNotFoundException {
        if (LOG_ENABLED) {
            login("loadClass(" + name + ")");
        }
        // First, check if the class has already been loaded
        Class c = findLoadedClass(name);
        if (c == null) {
            try {
                c = findClass(name);
            } catch (ClassNotFoundException cnfe) {
                if (getParent() == null) {
                    // c = findBootstrapClass0(name);
                    Method m = null;
                    try {
                        m = URLClassLoader.class.getMethod("findBootstrapClass0", new Class[] {});
                        m.setAccessible(true);
                        c = (Class) m.invoke(this, new Object[] { name });
                    } catch (Exception e) {
                        throw new ClassNotFoundException();
                    }
                } else {
                    c = getParent().loadClass(name);
                }
            }
        }
        if (resolve) {
            resolveClass(c);
        }
        if (LOG_ENABLED) {
            logout("loadClass returning " + c);
        }
        return c;
    }

    private static void login(String message) {
        System.out.println("---> [" + Thread.currentThread().getName() + "] " + SIMPLE_CLASS_NAME + ": " + message);
    }

    private static void logout(String message) {
        System.out.println("<--- [" + Thread.currentThread().getName() + "] " + SIMPLE_CLASS_NAME + ": " + message);
    }

} 
```

现在在我设置为 JNLP 描述符中的主类的 AppBoostrap 类中，我执行以下操作：

```
 System.setSecurityManager(null);
    ClassLoader parentCL = AppBootstrap.class.getClassLoader();
    URL[] classpath = new URL[] {};
    if (parentCL instanceof URLClassLoader) {
        URLClassLoader ucl = (URLClassLoader) parentCL;
        classpath = ucl.getURLs();
    }
    final JwsUrlFixerClassLoader vlrCL = new JwsUrlFixerClassLoader(classpath, parentCL);
    Thread.currentThread().setContextClassLoader(vlrCL);
    try {
        SwingUtilities.invokeAndWait(new Runnable() {

            public void run() {
                Thread.currentThread().setContextClassLoader(vlrCL);
            }
        });
    } catch (Exception e) {
        LOG.error("main(): Failed to set context classloader !", e);
    } 
```

在前面的摘录中，我得到了加载 AppBootstrap 类的 ClassLoader，并将其用作 JwsUrlFixerClassLoader 的父类加载器。

我必须解决 URLClassLodaer.loadClass() 的默认父委托策略的问题，并将其替换为“先尝试我的类路径，然后再尝试父”。

完成之后，一切都正常了，我们迄今为止无法解释的其他几个错误也消失了。

那是魔法！然而在经历了很多痛苦之后...

希望有一天这可以帮助某人...

# java - 每次在Java中执行时读取属性文件

> ID：12529687
> 
> 赞同：0
> 
> 时间：2012-09-21T11:32:10.880
> 
> 标签：java, properties

鉴于我要部署的“war”文件的以下目录结构，我必须从“ReadProp.java”类中读取属性文件“MyProperty.properties”。

```
MyApp.war
 | ----MyProps 
 |     |--MyProperty.properties
 |---WEB-INF |   
     |--classes
          |---ReadProp.java 
```

我将在“Sun 门户服务器”中部署这个“战争”文件。但是由于需求规范，我不应该更改任何此目录结构。

我正在通过以下方式阅读此文件

```
 String path = servletContext.getRealPath("/MyProps/MyProperty.properties");         System.out.println("path: " + path);  
            Properties prop = new Properties();         
    try {           
             prop.load(new FileInputStream(path));
);
         } catch (Exception e) { 

                            e.printStackTrace();      
       }      
       String name= prop.getProperty("name"); 
```

它工作正常。但问题是如果我在加载应用程序后更改属性文件，这些更改不会反映。

我可以随时更改属性文件怎么办如果我希望应该反映更改。我的意思是应用程序应该在每次执行时加载属性文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:36:15.867

除非您退回应用服务器，否则您不会看到更改。

更好的选择是将 .properties 文件放在 /WEB-INF/classes 文件夹中，然后使用`getResourceAsStream()`.

你没有说你在哪里阅读代码。您可能必须执行一项`Timer`任务来定期唤醒并重新加载 .properties 文件。

`WatchService`如果您使用的是 JDK 7，您也可以尝试：

[在 Java 中自动重新加载更改的文件](https://stackoverflow.com/questions/7774036/auto-reload-changed-files-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:36:55.113

您需要`WatchService` 为该[示例链接使用 java 7](http://fahdshariff.blogspot.co.uk/2011/08/java-7-watchservice-for-file-change.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:38:00.307

我得到了答案：

```
String path = servletContext.getRealPath("/MyProps/MyProperty.properties");       
System.out.println("path: " + path);      
Properties prop = new Properties();       
try {      
   File f = new File(path);      
   FileInputStream fis = new FileInputStream(f);     
   prop.load(fis);    
}
catch (Exception e) {   
   e.printStackTrace();   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-01T13:17:59.997

较新的方法是：

```
 Path path;
    try {
        path = Paths.get("MyProperty.properties");
        if (Files.exists(path)) {
            props = new Properties();
            props.load(Files.newInputStream(path));
        }
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

# curl - 下载用于构建的 curl 源

> ID：12529692
> 
> 赞同：1
> 
> 时间：2012-09-21T11:32:22.800
> 
> 标签：curl, libcurl, tortoisegit

运行 windows XP 32 位操作系统。

我需要下载 curl (libcurl?) 以便在 Windows 上构建最新的 curllib.dll 和 libcurl_imp.lib 代码。

我已经安装了 tortoisegit ......但是现在呢？

Curl 指定我运行以下命令 -

> git 关闭 git://github.com/badger/curl.git

但是tortoisegit下载中没有git.exe？

有人可以指出我正确的方向吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:13:55.147

从 webpresence 下载源代码。在 Visual Studio（我使用 2010）中打开项目文件 lib/*.dsw 编译，它可以工作。只要我尝试包含 ssl，这对我来说效果很好。经过 10 个小时的无望尝试编译 openSSL，我切换到 linux 并从存储库下载了二进制文件。像魅力一样立即工作。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:30:22.633

这为您提供了完整的源代码。然后你需要将它构建到一个库中，可能使用[docs/INSTALL](http://curl.haxx.se/docs/install.html)文件中的说明。

# ios - 这个错误是什么意思：在界面中没有找到属性“decisionText”的声明

> ID：12529693
> 
> 赞同：0
> 
> 时间：2012-09-21T11:32:26.793
> 
> 标签：ios

我在 dot-m 文件中有一个“decisionText”的标签代码，如下所示：

```
@synthesize decisionText ;  //<<<This generates the error 
```

在 dot-h 文件中，代码编写如下：

```
IBOutlet UILabel *decisionText 
```

我得到的错误是：没有在界面中找到属性“decisionText”的声明。

ps：在界面生成器中单击标签时，我可以在与文件所有者映射的引用出口下找到名称“decisionText”

坚持这一点。:(

* * *

正如建议的那样，我删除了@synthsize decisionText 行并使用了：

```
@property (nonatomic,weak) IBOutlet UILabel *decisionText ; 
```

现在我得到错误：在“弱”之前需要一个属性属性

* * *

点 M 文件：

```
#import "ClickButtonViewController.h"

@implementation ClickButtonViewController;

//@synthesize decisionText ; 
@property (weak,nonatomic) IBOutlet UILabel *decisionText ;

-(IBAction)buttonPressed:(id)sender 
{
    decisionText.text = @"Go for it!" ;
}

-(void)dealloc{
    [decisionText release];
    [super dealloc] ; 

}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:41:28.070

在 .h 文件中添加：

```
@interface ViewController : UIViewController
{
     //....
     IBOutlet UILabel *decisionText ;
     //...
 }

@property (nonatomic, retain) IBOutlet UILabel *decisionText ;
//...
@end 
```

然后在 .m 文件中添加：

```
@synthesize decisionText ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:37:38.937

您使用声明[属性](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)`@synthesize`的语句。因此，您的代码应该如下所示：

```
@interface ViewController : UIViewController
{
    // your ivars go here

    // but this is not needed:
    //
    // IBOutlet UILabel *decisionText;
}

// your properties go here

@property (nonatomic, retain) IBOutlet UILabel *decisionText;

@end 
```

如果您使用的是 ARC，请替换`retain`为`weak`.

在您的 .m 文件中，您将拥有：

```
@implementation ViewController

@synthesize decisionText = _decisionText;

// and your implementation goes here 
```

笔记：

1.  虽然您可以显式声明您的实例变量，但如果您省略它，该`@synthesize`语句将为您创建一个。因此，您不需要显式声明任何实例变量。事实上，我可能会争辩说你不应该*显*式声明你的实例变量，因为如果你有一个拼写错误，它只会提供一个机会，意外地得到两个实例变量，一个是你显式声明的，一个是编译器将生成的。我不止一次在 Stack Overflow 上看到过这个问题。因此，在我的示例中，我省略了显式的实例变量声明，我将让编译器为我处理它，并最大限度地减少出错的机会。

2.  虽然不是必需的，但通常建议`@synthesize`语句为您的属性的实例变量指定一个不同的名称（例如，在这种情况下，我建议该属性`decisionText`将具有一个实例变量`_decisionText`）。这有助于防止在您打算调用属性的 getter 或 setter 时意外引用实例变量。（事实上​​，在 Xcode 4.4 及更高版本中，如果您省略该`@synthesize`语句，编译器将自动为您合成带有前导下划线的实例变量。）因此，在您的代码中，您将引用属性`self.decisionText`或实例变量`_decisionText`. 它通常对`IBOutlet`对象不是那么重要，但是当您开始使用自己的自定义属性时，这种约定就变得有用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:36:54.513

改变

```
IBOutlet UILabel *decisionText 
```

至

```
@property (nonatomic, weak) IBOutlet UILabel *decisionText 
```

您只能使用 @property 关键字合成您定义的属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:39:32.607

或者，如果您使用的是 Xcode 4.4，您可以使用自动合成。

在这种情况下，您不需要声明 iVar，您只需编写：

```
@property (weak, nonatomic) IBOutlet UILabel *decisionText; 
```

而且您根本不需要编写@sythesize 行。

如果您这样做 - 请注意，默认情况下生成的 iVar 将附加一个前导下划线，尽管在这种情况下您应该坚持使用属性访问器，所以它几乎没有什么区别。

[您可以在Objective-C 功能可用性索引](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/_index.html)中查看您可以执行的操作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T11:53:09.943

您只声明了将存储属性内容的实例变量，但您没有声明属性本身。我认为解决这个问题的最简单方法是在公共接口（.h 文件）或私有接口（@interface ClassName () ... @end in ClassName.m 文件）中添加属性声明。

类名.h

```
@interface ClassName : ParentClass
@property (nonatomic, weak) IBOutlet UILabel decisionText; //This is the declaration of the property than you can ctrl-drag to wire it up to your label
@end 
```

类名.m

```
@implementation ClassName

@synthesize decisionText = _decisionText //the _decisionText stuff is the name of the instance variable that will store the content of your property

... //your methods

@end 
```

# html - 将 Facebook URL 设置为带参数共享

> ID：12529695
> 
> 赞同：2
> 
> 时间：2012-09-21T11:32:32.073
> 
> 标签：html, facebook

是否可以在我的网站中为特定页面创建 SHARE 链接？例如：

```
http://www.MY-SITE.COM/index.php?page=show_book&book_id=$book_id 
```

我试过了：

```
<a title='Share on Facebook'
  href='http://www.facebook.com/sharer.php?u=http://www.MY-SITE.COM/index.php?page=show_book&book_id=$book_id'  
  target='_blank'>
     Share on Facebook
 </a> 
```

但它没有得到参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:39:25.583

如果参数被剥离，请尝试对它们进行 url 编码（PHP 中的 rawurlencode()）。

还要确保您的目标共享页面根据参数提供不同的开放图元标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:05:50.853

分享按钮是旧的。FB推荐使用like-Button

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T11:07:42.877

`&`用类似的`%26`东西代替

```
$url = 'http://www.MY-SITE.COM/index.php?page=show_book%26book_id='.$book_id;
<a title="Share on Facebook"
  href="http://www.facebook.com/sharer.php?u=<?=$url?>">Share on Facebook</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T22:43:01.397

看起来你需要`echo`你的`$book_id`：

```
<a title='Share on Facebook'
  href='http://www.facebook.com/sharer.php?u=http://www.MY-SITE.COM/index.php?page=show_book&book_id=<?php echo $book_id ?>'  
  target='_blank'>
     Share on Facebook
 </a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T23:37:10.760

[一种常见的方法是使用 URL 缩短服务，如http://bit.ly](http://bit.ly)，也适用于其他提供商（twitter、g+ 等）。

# scala - 如何在 Scala 中使用 Stream.cons 编写不泄漏的尾递归函数？

> ID：12529697
> 
> 赞同：14
> 
> 时间：2012-09-21T11:32:34.907
> 
> 标签：scala, recursion, memory-leaks, stream

在编写对`Stream`(s) 进行操作的函数时，有不同的递归概念。第一个简单的意义在编译器级别上不是递归的，因为如果没有立即评估尾部，那么函数会立即返回，但返回的流是递归的：

```
final def simpleRec[A](as: Stream[A]): Stream[B] = 
  if (a.isEmpty) Stream.empty              
  else someB(a.head) #:: simpleRec(a.tail) 
```

上述递归概念不会引起任何问题。第二个在编译器级别上是真正的尾递归：

```
@tailrec
final def rec[A](as: Stream[A]): Stream[B] = 
  if (a.isEmpty) Stream.empty              // A) degenerated
  else if (someCond) rec(a.tail)           // B) tail recursion
  else someB(a.head) #:: rec(a.tail)       // C) degenerated 
```

这里的问题是`C)`编译器将这种情况检测为非tailrec调用，即使没有执行实际调用。这可以通过将流尾分解为辅助函数来避免：

```
@tailrec
final def rec[A](as: Stream[A]): Stream[B] = 
  if (a.isEmpty) Stream.empty              
  else if (someCond) rec(a.tail)          // B)
  else someB(a.head) #:: recHelp(a.tail)  

@tailrec
final def recHelp[A](as: Stream[A]): Stream[B] = 
  rec(as) 
```

在编译时，这种方法最终会导致内存泄漏。由于尾递归`rec`最终是从`recHelp`函数中调用的，因此函数的堆栈帧`recHelp`持有对蒸汽头的引用，并且在调用返回之前不会让流被垃圾收集`rec`，这可能会很长（就递归步骤）取决于对`B)`.

请注意，即使在无帮助的情况下，如果编译器允许 @tailrec，内存泄漏可能仍然存在，因为惰性流尾实际上会创建一个匿名对象，该对象持有对流头的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:32:34.907

一种可能的解决方法是使该`recHelp`方法不保留对流头的引用。这可以通过将包装的流传递给它并改变包装器以从中删除引用来实现：

```
@tailrec
final def rec[A](as: Stream[A]): Stream[B] = 
  if (a.isEmpty) Stream.empty              
  else if (someCond) rec(a.tail)          
  else {
    // don't inline and don't define as def,
    // or anonymous lazy wrapper object would hold reference
    val tailRef = new AtomicReference(a.tail)
    someB(a.head) #:: recHelp(tailRef)  
  }

@tailrec
final def recHelp[A](asRef: AtomicReference[Stream[A]]): Stream[B] = 
  // Note: don't put the content of the holder into a local variable
  rec(asRef.getAndSet(null)) 
```

这`AtomicReference`只是方便，在这种情况下不需要原子性，任何简单的持有者对象都可以。

另请注意，由于`recHelp`被包装在流`Cons`尾中，因此它只会被评估一次，并且`Cons`还负责同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T10:41:57.053

正如您所暗示的，问题在于您粘贴的代码中 filterHelp 函数保留了头部（因此您的解决方案将其删除）。

最好的答案是简单地避免这种令人惊讶的行为，使用 Scalaz EphemeralStream 并看到它既不是 oom 又运行得更快，因为它对 gc 更好。使用它并不总是那么简单，例如 head 是 () => A 而不是 A，没有提取器等，但它都面向一个目标、可靠的流使用。

您的 filterHelper 函数通常不必关心它是否保留引用：

```
import scalaz.EphemeralStream

@scala.annotation.tailrec
def filter[A](s: EphemeralStream[A], f: A => Boolean): EphemeralStream[A] = 
  if (s.isEmpty) 
    s
  else
    if (f(s.head())) 
      EphemeralStream.cons(s.head(), filterHelp(s.tail() , f) )
    else
      filter(s.tail(), f)

def filterHelp[A](s: EphemeralStream[A], f: A => Boolean) =
  filter(s, f)

def s1 = EphemeralStream.range(1, big) 
```

我什至要说，除非您有令人信服的理由使用 Stream（其他库依赖项等）然后坚持使用 EphemeralStream，否则那里的惊喜要少得多。

# yii - 在 yii CGridView 中调用函数

> ID：12529699
> 
> 赞同：1
> 
> 时间：2012-09-21T11:32:38.143
> 
> 标签：yii

我是 yii 的新手，我在 CGridView 中调用一个函数来显示列中的值。但是我也无法为其他列获得该值。我三次调用相同的函数（TblPaid::model()->alreadyPaidUpto()）。我想调用一次函数并再次使用该值。这是 CGridView Columns 的摘录。有人可以请。给我一个提示？

```
 array('name'=>'Paid upto this Date',
            'value'=>'number_format((TblPaid::model()->alreadyPaidUpto($data->id, $this->grid->extraparam)),2)','htmlOptions'=>array('style'=>'text-align: right'),
            ),

            array('name'=>'Balance',
            'value'=>'number_format($data->amount-(TblPaid::model()->alreadyPaidUpto($data->id, $this->grid->extraparam)),2)','htmlOptions'=>array('style'=>'text-align: right'),
            ),

            array(
                    'header'=>'Running Balance',
                    'class'=>'RunningTotalColumn',
                    'value'=>'$data->amount-(TblPaid::model()->alreadyPaidUpto($data->id, $this->grid->extraparam))',
                    'htmlOptions'=>array('style'=>'text-align: right'),
            ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:46:15.903

首先，查看您调用此方法的方式，将其声明为`static`方法可能更明智，例如：

```
public static function alreadyPaidUpto($arg1, $arg2) {} 
```

但是例如，您可以使用`$data`模型的方法来执行此操作（但我不知道这种情况，因为这里没有太多代码）。例如`public function isAlreadyPaidUpTo($date)`并像这样使用它`$data->isAlreadyPaidUpTo($when);`

然后你可以缓存方法中的值：

```
public function isAlreadyPaidUpTo($date) {
    static $result = null;
    if ($result === null) {
        $result = ? // query db, etc
    }

    return $result;
} 
```

如果您显示一些真实的代码，我可能会更有帮助。

# objective-c - iOS：XCode 4.5：xcodebuild 错误 - 致命错误：找不到“UIKit/UIKit.h”文件

> ID：12529700
> 
> 赞同：1
> 
> 时间：2012-09-21T11:32:39.477
> 
> 标签：objective-c, ios, xcode, command-line, xcodebuild

所以我想在终端中使用 xcodebuild 从测试应用程序（称为 RunTeszt2）创建一个构建。该应用程序是一个 iOS 单视图应用程序，其中没有任何内容，只是创建和关闭。

**当我从终端尝试此操作时，构建失败。**

```
xcodebuild -target "RunTeszt2" -sdk "$iphoneos5" -configuration Debug 
```

**错误是：**

`/Users/toodygarik/Desktop/RunTeszt2/RunTeszt2/RunTeszt2-Prefix.pch:12:13: fatal error: 'UIKit/UIKit.h' file not found #import <UIKit/UIKit.h>`

```
The following build commands failed:
ProcessPCH /var/folders/6s/cjw35hhs5lb6wpnx9m8lr2km0000gn/C/com.apple.Xcode.501
/SharedPrecompiledHeaders/RunTeszt2-Prefix-bxwegbsdjylasccydwchfkbjadur/
RunTeszt2-Prefix.pch.pth RunTeszt2/RunTeszt2-Prefix.pch normal i386 objective-c
com.apple.compilers.llvm.clang.1_0.compiler 
```

当我从 XCode (4.5) 运行应用程序时，构建完成并且一切正常。从 XCode 运行应用程序时，我检查了 console.app 日志，它没有显示上面的错误消息。

是什么导致了这个问题？

编辑：**根据`H2CO3`的评论，我编辑了项目构建设置的其他 C 标志条目，如下所示：**

```
-isysroot $SDKROOT 
```

...现在这个特定的问题已经解决了。我回到了另一个与 xcodebuild 相关的问题：[iOS: XCode 4.4.1: xcodebuild error - Unable to read diagnostics from file](https://stackoverflow.com/questions/12514629/ios-xcode-4-4-1-xcodebuild-error-unable-to-read-diagnostics-from-file)

谢谢，`H2CO3`！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:24:06.780

您必须指定您所针对的特定操作系统的开发 sysroot，否则编译器和链接器无法找到头文件和库。添加`-isysroot <SYSROOT>`到编译器和链接器标志，其中`SYSROOT`应该是`iPhoneOSXXX.sdk`目录的完整路径（XXX 是 iOS 的版本号）。

# javascript - 将关于按钮添加到设置魅力

> ID：12529705
> 
> 赞同：1
> 
> 时间：2012-09-21T11:33:15.147
> 
> 标签：javascript, windows-8, winjs, charms-bar

我想将关于按钮（可能是链接）添加到设置魅力。但我不想在设置魅力中显示内容，我需要在应用程序中导航 About.html 页面。应用程序设置示例对我没有帮助。有没有办法做到这一点？我需要用 JavaScript 和 HTML 来做这件事；）

目前我将下面的代码添加到 default.js

```
 app.onactivated = function (eventObject) {
        if (eventObject.detail.kind === Windows.ApplicationModel.Activation.ActivationKind.launch) {
            //WinJS.UI.disableAnimations();

            WinJS.Application.onsettings = function (e) {
                e.detail.applicationcommands = {
                    "about": {
                        title: "About", href:"/html/About.html"
                        }
                }
                WinJS.UI.SettingsFlyout.populateSettings(e);
                };
...
} 
```

我在 html 文件夹下创建了一个 HTML 文件。这是 About.html 的代码

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>About</title>

    <!-- WinJS references -->
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <link rel="stylesheet" type="text/css" href="css/staticPages.css" />
    <script type="text/javascript" src="/js/navigator.js"></script>
    <script src="/js/jq-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="/js/networkInfo.js"></script>
    <script src="/js/About.js" type="text/javascript"></script>
</head>
    <body>
    <div id="siluet" class="siluet">&nbsp;</div>
    <div id="contentDetay">
        <button id="backbutton" class="win-backbutton">
        </button>
        <img id="headLogo" src="/images/head_logo.png" alt="XYZ" />
        <progress id="progressRing"></progress>
        <div id="title"><h1 id="groupNameHeader">Group Name</h1><h1 id="pageTitle">Page Title</h1><div id="sectionSelectArrow">&nbsp;</div></div>
        <div id="menuPopUp">
            <select id="menuList" multiple="multiple"></select>
        </div>

        <div id="staticContainer"></div>
        <div id="noSnapView">
            <p>İçeriği görüntüleyebilmek için ekranı büyütün</p>
        </div>
    </div>
</body>

</html> 
```

当我单击 Settings Charm Bar 下的 About 链接时出现问题，我在 /js 文件夹下的 About.js 文件中出现错误。

```
(function () {
    'use strict';

    var dataItems;
    var groupIndex;
    var sectionIndex;
    var itemIndex;

    function ready(element, options) {

        networkInfo.getInfo();
        pageTitle.style.display = "none"; // pageTitle.style is undefined

        var that = this;
        groupNameHeader.innerText = "About"; // groupNameHeader is undefined

        var aboutContent; // This content is retrieving from web service
        // staticContainer is undefined
        staticContainer.innerHTML = window.toStaticHTML(aboutContent);

    }  

     WinJS.Namespace.define("appGlobal", {
        fadeProgressRingOut: fadeProgressRingOut
    });
    WinJS.UI.Pages.define("/html/About.html", {
        ready: ready
    });

})(); 
```

如您所见，每个 HTML 元素在 .js 文件中都是未定义的；但我找不到原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:49:00.553

[JavaScript App Settings 示例](http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49/)详细展示了如何将按钮添加到 Settings Charm 。

这是一个让您入门的片段：

```
WinJS.Application.onsettings = function (e) {
    e.detail.applicationcommands = {
        "aboutDiv": { title: "About", href: "/html/About.html" }
    };
    WinJS.UI.SettingsFlyout.populateSettings(e);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:12:40.840

像这样更改代码可能会解决您的问题：

```
app.onactivated = function (eventObject) {
    if (eventObject.detail.kind === Windows.ApplicationModel.Activation.ActivationKind.launch) {
        //WinJS.UI.disableAnimations();

       var settingsPane = Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView();
       settingsPane.addEventListener("commandsrequested", onCommandsRequested);

    // ...

}

function onSettingsCommand(){
    nav.navigate("html/about.html");
}

function onCommandsRequested(eventArgs){
    var settingsCommand = new Windows.UI.ApplicationSettings.SettingsCommand("about", About", onSettingsCommand);
    eventArgs.request.applicationCommands.append(settingsCommand);
} 
```

# python - 如何处理 Django 中的附加块？

> ID：12529706
> 
> 赞同：0
> 
> 时间：2012-09-21T11:33:14.673
> 
> 标签：python, django, templates, django-views

我现在正在学习 Django，并且有一个简单的问题：如何在 Django 中处理额外的页面块（除了主要内容块）？

让我解释一下我的意思。假设我们有一个页面“/news/view/12”，它引用“news.views.view”视图函数。在这个页面上，我将有导航菜单、最近的博客文章、带有一些信息的页脚等块。换句话说 - 这些块将放置在网站的每个页面上。而且，当然，新闻项目的内容会有主要内容块。

在这个视图函数（“news.views.view”）中，我想要一个 Python 代码来准确地处理一条新闻的视图，**而不是别的**：

```
def view(request, id):
    news_item = News.objects.get(pk=id)
    return render(request, 'news/view.html', {"item" : news_item}) 
```

那么，我该如何处理其他块：为它们获取数据，然后将其分配给模板？

我的意思是 Django 中某处的 Python 代码，而不是模板及其继承（我对此了解得足够多）。

最流行和最方便的方法是最可观的:)

* * *

正如我所见，您无法理解我，让我向您展示我希望从您那里听到的解决方案。

第一个解决方案是使用装饰器函数：

```
@load_navigation
@load_recent_news
def view(request, id):
    news_item = News.objects.get(pk=id)
    return render(request, 'news/view.html', {"item" : news_item}) 
```

第二种方案是直接在模板中调用python函数：

```
{% block recent_news %}
    {% call "news.views.recent_news" %} 
    {# this will call a python function which will return rendered template with recent news #}
{% endblock %} 
```

第三种解决方案是使用 django 中间件。

但是，说实话，我不喜欢这些方法中的任何一种。相信django有更方便的实现方式。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:40:47.570

好的，根据您的描述，我认为您可以使用自定义的模板标签。假设您想在侧边栏中添加最近的新闻（并且您有一个名为 news 的应用程序，而所有新闻都存储在一个名为 Article 的模型中）

新闻/模板标签/news.py

```
from django import template
from django.db.models import get_model
register=template.Library();

@register.simple_tag(takes_context=True)
def get_latest_news(context,context_variable):
    context[context_variable]=get_model('News','Article').objects.order_by('-publish_date')[0,10]
    return '' 
```

base.html

```
{% load news %}
{% block sidebar %}
    {% get_latest_news 'latest' %}
    {% for one in latest %}
        <p>{{one}}</p>
    {% endfor %}
{% endblock %} 
```

最好从[simple_tag](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)开始而不是[完整](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-tags)的，因为它更简单并且适合大多数需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:00:10.967

也许您可以覆盖通用详细视图（django.views.generic.DetailView）

继承视图类并覆盖 get_context_data() 将是您需要做的。

# raphael - 使用 Raphael.js 进行转换

> ID：12529709
> 
> 赞同：2
> 
> 时间：2012-09-21T11:33:24.173
> 
> 标签：raphael, transform, glow

我画了两条路。我已经对其中一个应用了发光，当我变换设置时，只有没有发光的路径移动，而有发光的路径没有，而是“发光”被改变。我希望道路和光芒能够一起转变。我怎样才能做到这一点？我希望我能正确解释我的问题。

这是我的代码：[jsfiddle Link](http://jsfiddle.net/Pcvta/)

```
window.onload = function(){

var paper = Raphael(0,0,1900,950);

var rect01 = paper.set();
rect01.push(
paper.rect(20,30,10,15).attr({fill:'blue',stroke:'none'}).glow({width:5,opacity:1,color:'red'}),    
paper.rect(50,30,10,15).attr({fill:'green',stroke:'none'})
)

var superset = paper.set();
superset.push(rect01);
superset.transform("T10,10");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:45:19.510

这只是你如何构建你的集合的问题。大多数元素函数返回对被修改元素的引用，但发光是一个例外——它为发光效果本身返回一个新的集合元素。在上面的代码中，您有效地插入了第一个矩形和第二个矩形的发光，但不是第一个矩形本身。

为了保持代码的紧凑性，我建议使用`paper`. [设置开始](http://raphaeljs.com/reference.html#Paper.setStart)和`paper`. [setFinish](http://raphaeljs.com/reference.html#Paper.setFinish)来构建你的集合。

```
var rect01 = paper.set();

paper.setStart();      

paper.rect(20,30,10,15).attr({fill:'blue',stroke:'none'}).glow({width:5,opacity:1,color:'red'});    
paper.rect(50,30,10,15).attr({fill:'green',stroke:'none'});

var rect01 = paper.setFinish();  // gets a reference to a set containing everything created since the setStart call above 
```

# java - 使用 Jersey 客户端在 POST 中发送名称值对

> ID：12529714
> 
> 赞同：3
> 
> 时间：2012-09-21T11:33:51.970
> 
> 标签：java, rest, jersey, jax-rs, name-value

我如何将名称值对作为正文传递给泽西岛的 POST ReST 服务。类似于下面使用 Apache Commons PostMethod 的代码

```
 final PostMethod post = new PostMethod(url);
    post.setRequestBody(new NameValuePair[] {
            new NameValuePair("loginId", userId),
            new NameValuePair("logonPassword", password),
            new NameValuePair("signature", signature),
            new NameValuePair("timestamp", timestamp),
            new NameValuePair("sourceSiteId", sourceSiteId) }); 
```

我正在将此调用移植到我的应用程序。当前调用使用 apache commons PostMethod。在我的应用程序中，我使用了泽西岛。所以我想使用球衣类/功能而不是 apache。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T11:54:06.683

在泽西岛有一个带有“MultivaluedMapImpl”的[MultivaluedMap](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/MultivaluedMap.html)接口。`JAX-RS`

```
Client client = Client.create();
WebResource webResource = client.resource("http://site.com/resource");
MultivaluedMap<String, String> map = new MultivaluedMapImpl();
map.put("loginId", loginId);
...
ClientResponse response = webResource.type("application/x-www-form-urlencoded")
             .post(ClientResponse.class, map); 
```

[这](https://blogs.oracle.com/enterprisetechtips/entry/consuming_restful_web_services_with)是一个更全面的示例，说明如何使用 Jersey 客户端 API。

# android - 无意识地捕捉图像，在不同的设备上提供不同的输出

> ID：12529718
> 
> 赞同：16
> 
> 时间：2012-09-21T11:34:16.777
> 
> 标签：android, android-camera

我的要求既不是显示相机预览，也不是使用相机意图进行图像捕捉。

在那里，我找到了一种适用于我的第一个测试设备（Galaxy tab 7"）的方法。

我的`CaptureImage`功能如下

```
private void CaptureImage() {
        int FrontCameraFound = getCameraID();
        if (FrontCameraFound != -1) {
            mCamera = Camera.open(FrontCameraFound);

            parameters = mCamera.getParameters();

            mCamera.setParameters(parameters);
            mCamera.startPreview();

            Camera.PictureCallback mCall = new Camera.PictureCallback() {
                @Override
                public void onPictureTaken(byte[] data, Camera camera) {

                    bmp = BitmapFactory.decodeByteArray(data, 0, data.length);

                    // set bitmap tp image view just to check 
                    // if image capture proper, testing purpose
                    iv_image.setImageBitmap(bmp);

                    mCamera.stopPreview();
                    mCamera.release();
                    mCamera = null;
                }
            };
            mCamera.takePicture(null, null, mCall);
        }
    } 
```

和`getCameraID`功能如下

```
private int getCameraID() {
    Camera.CameraInfo cameraInfo = new Camera.CameraInfo();

    for (int camIdx = 0; camIdx < Camera.getNumberOfCameras(); camIdx++) {
        Camera.getCameraInfo(camIdx, cameraInfo);
        // for capture image from back camera
        // If want to capture from front 
        // then change it to CAMERA_FACING_FRONT
        if (cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_BACK) {
            try {
                return camIdx;
            } catch (RuntimeException e) {

            }
        }
    }
    return -1;
} 
```

现在我面临在不同设备上成功运行以上代码的困难。

*   三星 Galaxy S+ (2.3.6)：前置摄像头总是返回绿色图像，但后置摄像头的编码工作正常。
*   三星 Galaxy Nexus (4.1)：编码不起作用 无论是前置摄像头还是后置摄像头，“takePicture”都失败。
*   LG Optimus Net (2.3.4)：只有后置摄像头并且工作正常。
*   三星 Galaxy Tab 7" (2.3.3)：两个摄像头都工作正常。
*   摩托罗拉 Xoom (3.1)：两台相机工作正常。

三星 Galaxy Nexus 的 Logcat：

```
09-21 09:37:42.125: E/AndroidRuntime(4647): Caused by: java.lang.RuntimeException: takePicture failed
09-21 09:37:42.125: E/AndroidRuntime(4647):     at android.hardware.Camera.native_takePicture(Native Method)
09-21 09:37:42.125: E/AndroidRuntime(4647):     at android.hardware.Camera.takePicture(Camera.java:1061)
09-21 09:37:42.125: E/AndroidRuntime(4647):     at android.hardware.Camera.takePicture(Camera.java:1006)
09-21 09:37:42.125: E/AndroidRuntime(4647):     at fortyonepost.com.pwop.TakePictureDemoActivity.CaptureImage(TakePictureDemoActivity.java:63)
09-21 09:37:42.125: E/AndroidRuntime(4647):     at fortyonepost.com.pwop.TakePictureDemoActivity.onCreate(TakePictureDemoActivity.java:36)
09-21 09:37:42.125: E/AndroidRuntime(4647):     at android.app.Activity.performCreate(Activity.java:5008)
09-21 09:37:42.125: E/AndroidRuntime(4647):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-21 09:37:42.125: E/AndroidRuntime(4647):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

不可能检查每个设备的代码，我只是在 5 个设备上测试我的代码，并且 2 个设备导致问题，所以有没有任何标准方法可以在没有意图和预览的情况下从相机获取图像。

请注意，我在清单中包含并将最低 sdk 版本设置为 9

**更新：**`takePicture Failed`在Camera.java 类中第 1061 行的 4.1 Nexus Galaxy中，这是[类链接](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/hardware/Camera.java#L1061)，它为我提供了`native_takePicture(msgType); function in Camera.java`确实抛出的信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:39:49.533

android 设备中的相机处理是主要的 PITA - 不同的设备（甚至同一设备上的 android 版本）可以而且肯定会有不同的行为。基本上，您正在与设备上的一些恶魔进程交谈，它们彼此不同。

我没有解决所有问题的方法，但这是我迄今为止的发现

*   并非所有分辨率都能正常工作，即使它们在相机参数中进行了宣传。您必须在设置相机时对其进行测试，以防出现问题
*   预览数据通过映射的内存区域提供给您
*   NV21 格式始终提供并且应为默认格式，但我会查询相机设置。当您打开相机时，它可以从之前使用相机的其他应用程序中进行一些设置。（据说打开时相机会重置为默认值）

我已经开发了一些为 JavaOCR 项目开发的相机管理工具，它适用于大多数设备。随意以此为灵感：

[http://sourceforge.net/p/javaocr/code/240/tree/trunk/demos/camera-utils/src/main/java/net/sf/javaocr/demos/android/utils/camera/CameraManager.java](http://sourceforge.net/p/javaocr/code/240/tree/trunk/demos/camera-utils/src/main/java/net/sf/javaocr/demos/android/utils/camera/CameraManager.java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T10:44:21.783

经过几次搜索，我发现相机的预览是必要的，我想知道我的代码如何在某些设备上运行良好，即使它是错误的。

任何方式的解决方案是，

我们需要在表面视图上保持相机预览，我们可以将该表面视图隐藏在任何其他视图后面，我在 framelayout 中获取表面视图（我知道它已被弃用），在它上面我获取图像视图，对于表面视图我只取 80*80 dp 表面视图，因为像 30*30 dp 这样的小表面视图不起作用，并且再次出现错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T20:38:31.530

您需要使用 Camera.setOneShotPreviewCallback 方法，然后处理图像

尝试使用 YuvImage 并在将其传递给 bitmapfactory 之前对其进行压缩，如下所示：

```
YuvImage yuvimage = new YuvImage(byteArr, ImageFormat.NV21, width, height, null);
    Rect rect = new Rect(0, 0, width, height);
    ByteArrayOutputStream outstr = new ByteArrayOutputStream();
    yuvimage.compressToJpeg(rect, 100, outstr);
    Bitmap bm = BitmapFactory.decodeByteArray(outstr.toByteArray(), 0, outstr.size()); 
```

编辑：

您必须使用表面视图，但表面视图可以隐藏在另一个视图下方，因此它在屏幕上不可见，但仍然存在并处于活动状态。

# android - 从 Android 中的库项目中调用应用程序活动

> ID：12529719
> 
> 赞同：4
> 
> 时间：2012-09-21T11:34:22.113
> 
> 标签：android, android-intent, android-activity, android-library, library-project

行，

所以我正在制作一个 UI 元素的库项目。该库有一些基于**ActionBarSherlock**的活动，ActionBarSherlock是 android 中操作栏的向后兼容库。在这些活动中，我希望在操作栏中有一个按钮，无论他们在图书馆项目中使用哪个活动，它都会将用户带回家。

一些术语。“库”指的是我正在处理的 Android UI 库项目。“应用程序”是指开发人员可能与所包含的库一起使用的任何客户。

通常，当您进行一项活动并想调用另一个活动时，您会执行类似的操作。

```
intent = new Intent(this, WhateverMyActivityName.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

很简单。但这是棘手的一点。Android 库几乎不知道什么应用程序正在使用它们。所以**“WhateverMyActivityName.class”**是没有用的，因为无法预测开发人员应用程序将调用他们的活动。

我需要更换

```
intent = new Intent(this, WhateverMyActivityName.class); 
```

像这样的东西

```
intent = new Intent(this, getApplication().MainActivity().getClass()); 
```

或者可能使用某种意图操作来调用应用程序中的主 Activity`(Intent.ACTION_MAIN or Intent.CATEGORY_LAUNCHER)`

简而言之：如何从库项目中获取应用程序主要活动？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-12-11T06:41:38.243

我们可以使用反射来获取类对象。

**Class.forName("com.mypackage.myMainActivity")**

在库项目中添加此代码以调用，

```
try {
      Intent myIntent = new Intent(this,Class.forName("com.mypackage.myMainActivity"));
      startActivity(myIntent );
} catch (ClassNotFoundException e) {
     e.printStackTrace();
} 
```

“com.mypackage.myMainActivity”是 Main 项目中的 Activity，我们需要从它的 Library 项目中调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:38:08.103

应用程序调用库中的某个方法，提供`Intent`要调用的 ，或提供`Class`要调用的活动的 。您的图书馆将其存储在某个地方并使用它。

您认为正确答案是“Intent.ACTION_MAIN 或 Intent.CATEGORY_LAUNCHER”的假设可能不准确。例如，某些应用程序具有启动屏幕活动（这本身就是一个问题，但这不是重点），这不是应用程序中的家庭可供性应该去的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:42:23.360

[您可以使用本文](https://stackoverflow.com/questions/4210135/how-to-list-all-activities-exposed-by-an-application)中提到的代码获取活动列表。之后通过 resolveinfo 循环并检查 intenet 过滤器以找到具有所需意图操作的活动。

# ssl - box.com ssl 证书

> ID：12529722
> 
> 赞同：2
> 
> 时间：2012-09-21T11:34:41.997
> 
> 标签：ssl, curl, certificate, box-api

我正在尝试使用 libcurl 访问 box.com。为了使用 SSL，我使用 Web 浏览器导出了 SSL 证书，box.com 使用 GeoTrust 颁发的证书。但是，即使我将它们传递给 curl（也使用命令行工具（curl [https://www.box.com](https://www.box.com) --cacert /certs.pem）），我收到 curl 无法验证证书的错误。

如果我对使用 CAcert 颁发的证书的不同站点执行完全相同的操作，则一切正常。

除了浏览器显示的 GeoTrust 证书之外，我还需要更多/不同的 box.com 证书吗？如果我使用存储在 /etc/ssl/certs 系统中的完整证书包，我可以连接到 box.com，但我如何找出需要哪些证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:35:27.470

如果您只是想让它工作，您可以将此属性设置为 false：

```
CURLOPT_SSL_VERIFYPEER 
```

# android - Sqlite 查询中的异常

> ID：12529723
> 
> 赞同：0
> 
> 时间：2012-09-21T11:34:44.530
> 
> 标签：android, sqlite

我在我的方法中使用以下查询

```
 Cursor c = sqLiteDatabase.rawQuery("SELECT Content3 FROM " +
             MYDATABASE_TABLE +
             " where Content1 = '"+value1+"'", null); 
```

但它抛出异常并且应用程序被强制关闭。我将 value1 传递给该方法。Logcat如下

```
09-21 17:14:21.242: ERROR/AndroidRuntime(16511): FATAL EXCEPTION: main
09-21 17:14:21.242: ERROR/AndroidRuntime(16511): android.database.sqlite.SQLiteException: no such column: Content3: , while compiling: SELECT Content3 FROM photodetails where Content1 = '2192012'
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1324)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at roman10.tutorial.fileobserver.SQLiteAdapter.fetchresult(SQLiteAdapter.java:80)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at roman10.tutorial.fileobserver.FileModificationMonitor$3.onClick(FileModificationMonitor.java:56)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.view.View.performClick(View.java:2485)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.view.View$PerformClick.run(View.java:9080)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.os.Handler.handleCallback(Handler.java:587)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.os.Looper.loop(Looper.java:130)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at android.app.ActivityThread.main(ActivityThread.java:3687)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at java.lang.reflect.Method.invokeNative(Native Method)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at java.lang.reflect.Method.invoke(Method.java:507)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
09-21 17:14:21.242: ERROR/AndroidRuntime(16511):     at dalvik.system.NativeStart.main(Native Method) 
```

请指出我的错误。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:09:21.303

最后我得到了我的问题的解决方案。只需删除文件资源管理器中的 db-->data/data/packagename/dbname。并再次运行。现在它工作正常。

# wcf - WCF REST 服务：InstanceContextMode.PerCall 不起作用

> ID：12529724
> 
> 赞同：5
> 
> 时间：2012-09-21T11:34:45.823
> 
> 标签：wcf, rest

我已经为 WCF 实现了一个 REST 服务。该服务提供了一个可以被多个客户端调用的功能，该功能需要超过 1 分钟才能完成。所以我想要的是，对于每个客户端，使用一个新对象，这样就可以一次处理多个客户端。

我的界面如下所示：

```
[ServiceContract]
public interface ISimulatorControlServices
{
    [WebGet]
    [OperationContract]
    string DoSomething(string xml);
} 
```

以及它的（测试）实现：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall]
public class SimulatorControlService : SimulatorServiceInterfaces.ISimulatorControlServices
{
    public SimulatorControlService()
    {
        Console.WriteLine("SimulatorControlService started.");
    }

    public string DoSomething(string xml)
    {
        System.Threading.Thread.Sleep(2000);
        return "blub";
    }
} 
```

现在的问题是：如果我使用创建 10 个（或任何数量）线程的客户端，每个线程都调用服务，它们不会同时运行。这意味着，呼叫一个接一个地被处理。有人知道为什么会这样吗？

补充：客户端代码

产生线程：

```
 for (int i = 0; i < 5; i++)
        {
            Thread thread = new Thread(new ThreadStart(DoSomethingTest));
            thread.Start();
        } 
```

方法：

```
 private static void DoSomethingTest()
    {
        try
        {
            using (ChannelFactory<ISimulatorControlServices> cf = new ChannelFactory<ISimulatorControlServices>(new WebHttpBinding(), "http://localhost:9002/bla/SimulatorControlService"))
            {
                cf.Endpoint.Behaviors.Add(new WebHttpBehavior());

                ISimulatorControlServices channel = cf.CreateChannel();

                string s;

                int threadID = Thread.CurrentThread.ManagedThreadId;

                Console.WriteLine("Thread {0} calling DoSomething()...", threadID);

                string testXml = "test";

                s = channel.StartPressureMapping(testXml);

                Console.WriteLine("Thread {0} finished with reponse: {1}", threadID, s);
            }

        }
        catch (CommunicationException cex)
        {
            Console.WriteLine("A communication exception occurred: {0}", cex.Message);
        }
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:28:12.810

由于服务由 GUI 控制，因此需要“UseSynchronizationContext”属性来解决问题：

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode=ConcurrencyMode.Multiple, UseSynchronizationContext=false)] 
```

# c - 在数组中找出char的序列

> ID：12529725
> 
> 赞同：0
> 
> 时间：2012-09-21T11:34:52.673
> 
> 标签：c

我已经很长时间没有处理 C 中的数组了。

所以我需要在 char 的数组中找到多个字符串的序列实际上我需要它们来解析一些命令行

例子：

```
char *myArray=" go where:\"here\" when:\"i dont know ...\"; 
```

我需要找出应用程序运行时指定的参数是什么我已经完成了一些功能但结果很奇怪

```
void splitString(char *from ,char start ,char end ,char *into)
{
    int size=strlen(from);
    for(int i=0;i<size;i++)
    {
        if(from[i]==start)
        {
            for(int j=i;j<size;j++){
                if(from[j]!=end)
                    into+=from[j];
                else
                    break;
            }
        }
        break;
    }

} 
```

和电话

```
char *into;
char *from="this is #string# i want to look for ";
splitString(from,'#','#',into); 
```

导致[以下对话框](http://1.bp.blogspot.com/-KOATOhokM2k/UFxQGLsAYbI/AAAAAAAAAEo/8wKkJEnReoY/s320/weird.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:43:57.050

我认为您必须在收到数据时终止字符串。并将 j 增加到 i+1

```
void splitString(char *from ,char start ,char end ,char *into)
{
  int k = 0;
  int size=strlen(from);
  for(int i=0;i<size;i++)
  {
    if(from[i]==start)
    {
        for(int j=i+1, k = 0;j<size;j++, k++){
            if(from[j]!=end)
                into[k]=from[j];
            else
                break;
        }
    }
    break;
}

into[k] = '\0';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:17:28.527

您的代码存在三个主要问题。

第一个是线

```
into+=from[j]; 
```

不复制字符，它增加了本地指针。请参阅 kTekkie 的答案如何解决这个问题。第二个是您不会终止复制到的字符串，这也在 kTekkie 的答案中。

第三个主要问题是您没有为`into`变量分配内存，因此当您开始正确复制字符时，您将复制到任何`into`指向的位置，这将是一个随机内存位置。这是未定义的行为，很可能会导致您的程序崩溃。为了解决这个问题，要么创建`into`一个像这样的数组

```
char into[SOME_SIZE]; 
```

或在堆上动态分配内存`malloc`

```
char *into = malloc(SOME_SIZE); 
```

如果您选择动态分配，请记住`free`在不再需要时分配的内存。

**编辑：**仔细看看这个功能......

除了我的回答中描述的问题之外，您的功能还有其他一些问题。一种是你`break`在外循环中有一个语句，所以它会立即跳出循环。

我实际上会这样写：

```
void splitString(char *from, char start, char end, char *into)
{
    /* Really first we make sure the output string can be printed by terminating it */
    *into = '\0';

    /* First find the `start` character */
    while (*from && *from++ != start)
        ;

    /* Now we are either at the end of the string, or found the character */
    if (!*from)
        return;  /* At end of string, character not found */

    /* Copy the string while we don't see the `end` character */
    while (*from && *from != end)
        *into++ = *from++;

    /* Now terminate the output string */
    *into = '\0';
} 
```

它有效，可以在[这里](http://ideone.com/rQ4Bk)看到。上一个链接还显示了如何调用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T11:39:55.730

今日话题：[http ://www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

```
/* strtok example */
#include <stdio.h>
#include <string.h>

int main ()
{
  char str[] ="- This, a sample string.";
  char * pch;
  printf ("Splitting string \"%s\" into tokens:\n",str);
  pch = strtok (str," ,.-");
  while (pch != NULL)
  {
    printf ("%s\n",pch);
    pch = strtok (NULL, " ,.-");
  }
  return 0;
} 
```

# css - div 内容溢出，内联块无用

> ID：12529727
> 
> 赞同：0
> 
> 时间：2012-09-21T11:34:56.833
> 
> 标签：css, html

我是网页设计的自学者，所以我可能会错过一些基本的编码。

所以问题是

内容在一行中从右侧溢出 div。

代码如下

HTML

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">

    <title></title>
</head>

<body>
    <div id="bg">
        <div id="mainwrapper">
            <div id="header">
                <div id="logo"></div>
            </div>

            <div id="contentwrapper">
                <div id="leftwrapper">
                    <div id="contentspacing">
                        <div id="content">
                            <p>
                                asdfasdfasdfasdvvasdvasdvasdvfasdvsdasdas 
                                dfasdfasdfasdvvasdvasdvasdvfasdvsdasdasdfasdfas
                            </p>
                        </div>
                    </div>
                </div>

                <div id="rightwrapper">
                    asdfasdf
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
```

CSS 如下

```
/* ---------------------------------------------------------------*/
/* --------------------->  RESET  <<<-------------------------*/
/* ---------------------------------------------------------------*/
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td {
margin:0;
padding:0;
border:0;
outline:0;
font-size:100%;
vertical-align:baseline;
background:transparent;
}

body {
line-height:1;
}

body {
font-family:Arial,sans-serif;
font-size:100%;
line-height:1.3em;
_font-size:16px;
color:#504e45;
background:#ebe9e1 url(pics/bg.jpg) top left repeat-x;
}

#bg {
float:left;
display:block;
height:600px;
width:100%;
background:url(pics/hotel-bg.jpg) top center no-repeat;
margin:0 0 0 0;
}

#mainwrapper {
float:left;
display:block;
width:1000px;
margin:0 auto;
}

#header {
float:left;
display:block;
}

#logo {
width:274px;
height:44px;
background:url(pics/logo.png) no-repeat;
margin:50 0 0 100;
}

p {
float:left;
display:inline-block;
line-height:1.7em;
margin:1em 0;
-webkit-margin-before:1em;
-webkit-margin-after:1em;
-webkit-margin-start:0px;
-webkit-margin-end:0px;
}

#contentwrapper {
float:left;
display:block;
width:1000px;
}

#leftwrapper {
float:left;
display:block;
width:593px;
}

#contentspacing {
float:left;
display:block;
margin:0;
padding:0;
border:0;
outline:0;
font-size:100%;
vertical-align:baseline;
background:transparent;
}

#content {
float:left;
display:block;
height:auto;
width:593px;
border:1px solid #bdc9f4;
background:url(pics/bg2.png) top left repeat-x;
margin:35 120;
}

#rightwrapper {
float:left;
display:block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:50:52.707

添加`word-wrap: break-word; word-break: break-all;`到#内容

在这里演示[http://jsfiddle.net/ZK6yR/](http://jsfiddle.net/ZK6yR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:36:18.850

当您使用相当长的单词时会发生这种情况。试试这个：

```
word-wrap: no-break; 
```

# java - netty 服务器到服务器的数据流

> ID：12529735
> 
> 赞同：0
> 
> 时间：2012-09-21T11:35:34.040
> 
> 标签：java, sockets, ipc, netty

我有两台 Java [netty](https://netty.io/)服务器，它们需要在它们之间相当频繁地传递大量消息，我希望它能够相当迅速地发生。

我需要两个服务器之间的 TCP 套接字，我可以通过它发送这些消息。

这些消息是已经打包的 byte[] 数组并且是自包含的。

服务器当前都在运行 HTTP 接口。

做这个的最好方式是什么？

例如，websockets 可能很合适，但我无法在 netty 中找到任何 websocket 客户端示例。

我是一个网络新手，所以需要一些强大的简单示例。肯定不会这么难吧？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:23:08.937

由于您提到了 HTTP，您可以查看[示例](https://netty.io/Documentation/WebHome)中的[HttpStaticFileServer](http://static.netty.io/3.5/xref/org/jboss/netty/example/http/file/package-summary.html)。

建立后，TCP 连接是一个`Channel`. 要发送消息，您需要将它们写入 a`ChannelBuffer`并调用[channel.write](http://static.netty.io/3.5/api/org/jboss/netty/channel/Channel.html#write%28java.lang.Object%29)。

当然，这不包括消息边界。该`Telnet`示例显示了一种情况，其中消息由换行符分隔。

# javascript - 在列表页的显示表中显示 * 而不是密码值？

> ID：12529736
> 
> 赞同：0
> 
> 时间：2012-09-21T11:35:36.840
> 
> 标签：javascript, html

我有一个包含用户名、密码、电子邮件和电话字段的表格。但显示页面应将密码值显示为***** **. 只有在编辑时才应该显示值！例如：将我的密码设为 pass1234 它应该在列表页面中显示为********** 但是编辑它应该显示为 pass1234 。我怎样才能做到这一点 ？***

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:39:11.020

这需要一些 Javascript`onfocus`处理程序：

```
field = document.getElementById('pass');
field.onfocus(function() { this.setAttribute('type','text'); });
field.onblur(function() { this.setAttribute('type', 'password'); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:44:54.447

您应该只在用户要求时以明文形式显示密码，例如通过单击按钮。你认为星号有什么用？

但是，您不能只设置`type`输入，因为 IE 不允许这样做。因此，您将需要完全替换该元素。为了

```
<input name="pw" id="pw" type="password"></input>
<label><input id="plain" type="checkbox"></input>Show plaintext</label> 
```

JS 看起来像这样（使用 jQuery 进行事件附加和 co，如果需要，您应该能够适应它）：

```
$("#plain").change(function() {
     var pw = $("#pw"),
         type = this.checked ? "text" : "password";
     if (type == pw.prop("type")) return;
     $("<input>", {name: "pw", id:"pw", type:type}) // could be done programatically
       .val(pw.val())
       .replaceAll(pw);
}); 
```***

# jquery - 再次单击锚标记后不刷新 cookie 中的值

> ID：12529738
> 
> 赞同：1
> 
> 时间：2012-09-21T11:35:47.237
> 
> 标签：jquery, cookies, anchor

我有一个多语言登录站点，我想使用 jQuery 将登录信息（用户和语言）存储在 cookie 中。该表单有 2 个锚标记和一些根据所选语言动态变化的标签。

 `````
<form id="frm0" method="post" action="">
  <fieldset>
    <div id="lng" style="text-align: right">
      <a href="index.php?lang=en" id="en" title="English"><img src="pics/files/en.png" alt="English" /></a>&nbsp;
      <a href="index.php?lang=de" id="de" title="Deutsch"><img src="pics/files/de.png" alt="Deutsch" /></a>
    </div>
    <div>
      <label for="usr" style="font-weight: bold">User for en/Benutzer for de: </label>
      <input name="usr" type="text" id="usr">
    </div>
    <div>
      <label for="passw" style="font-weight: bold">Password for en/Kennwort for de: </label>
      <input name="passw" type="password" id="passw">
    </div>
    </fieldset>
    <input type="submit" name="sbmt" id="sbmt" value="Login">
</form> 
````  `以下代码：

 `````
$(document).ready(function(){
  $('a').click(function(){
      var language = $(this).attr("id");
      $.cookie('lang', language, { path: '/', expires: 14 });
  });
}); 
````  `正确设置 cookie，但仅在单击锚标记后。如果我再次更改语言，则不会刷新 cookie 的值。但是，如果我添加“return false”：

 `````
$(document).ready(function(){
  $('a').click(function(){
      var language = $(this).attr("id");
      $.cookie('lang', language, { path: '/', expires: 14 });
      return false;
  });
}); 
````  `每次点击锚标记后，cookie的值都会正确设置，但页面上的标签不会根据所选语言而改变（就像页面没有刷新一样）。

我也尝试过：

 `````
 $('#lng a').click(function() {
    $.cookie('lang', this.id, { path: '/', expires: 14 });
    return false;
  }); 
````  `但同样的行为。请问有什么帮助吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:45:05.923

这`return false`会阻止您的锚点点击，因此设置了 cookie 但页面**没有**刷新，因此您的语言没有改变。

您可以尝试以下方法：

```
$(document).ready(function()
{
   $('a').click(function(event)
   {
        var language = $(this).attr("id");
        alert(language);
        $.cookie('lang', language, { path: '/', expires: 14 });
        e.preventDefault(event);
        alert($.cookie('lang'));
        window.location($(this).attr("href"));
   });
 }); 
```

但是，我认为它`return false`与您将得到相同的结果。我将检查 cookie 是否正在更改，并且它不在页面刷新和链接目标附近。

你能告诉我们这两个警报都返回了什么吗？我感觉这与加载过程有关。

由于 URL 中包含语言，是否值得检查页面加载？

```
$(document).ready(function() {
   var language = $.cookie("lang");
     if(language.length > 0)
     { // Do things for the set language }
     else
     {
       language = $.QueryString["lang"];
       $.cookie("lang", language);
       // Do things for QueryString language
     }
   alert(language); // If you want to check the language set? 
```

});

您可以从这个 SO 问题中获取 QueryString 值：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

获取 QueryString 值的选项很多，但我个人更喜欢 BrunoLM 的答案。````````

# spring - Spring 3 - @PathVariable 和 HttpServletRequest 的组合

> ID：12529741
> 
> 赞同：1
> 
> 时间：2012-09-21T11:36:02.470
> 
> 标签：spring, servlets, spring-mvc, annotations

我有这个控制器映射

```
@RequestMapping("/{language}/payment/{id}/reward/{rewardId}/name/{name}/address/{address}")
public String paymentPackage(@PathVariable Long id, @PathVariable Long
rewardId, @PathVariable String name, @PathVariable String address,
ModelMap model, HttpServletRequest request) 
```

它运作良好，但现在我需要将“HttpServletRequest 请求”传递给其他方法，但请求不包含来自 REST URL 的变量（id、name、...）是否可以在 HttpServletRequest 中也有这些变量？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:41:51.827

在模型中设置值并从页面访问。如果您需要从其他方法访问，请将其作为参数传递给方法。

```
model.addAttribute("request", request); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:34:30.867

创建一个过滤器并修改请求以包含所有需要的变量。或者修改控制器内部的请求。

```
 request.setAttribute("name", name); 
```

# javascript - 重叠 2 个 div 边框

> ID：12529743
> 
> 赞同：0
> 
> 时间：2012-09-21T11:36:08.610
> 
> 标签：javascript, html, css

我现在有这个设置。我希望这样当您将鼠标悬停在一个框上时，底部边框会变为与悬停的 div 内部相同的颜色。我开始认为仅使用 css 无法做到这一点，但是您将如何添加 javascript 来做到这一点？

任何指导将不胜感激

[http://jsfiddle.net/hCK3D/7/](http://jsfiddle.net/hCK3D/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:40:06.127

为什么不直接删除悬停时的底部边框，而是让元素的高度增加 1px？（您不需要添加任何 JavaScript 代码）

像这样：http: [//jsfiddle.net/hCK3D/17/](http://jsfiddle.net/hCK3D/17/)

**更新**：现在边界也没有中断..

**更新的CSS**：

```
.item-container {
    float:left;
    margin-top:20px;
    border-bottom: 1px #BCC0C3 solid;
    height:100px;
}
.item {
    float:left;
    background: #ccc;
    width: 100px;
    height: 100px;
    border-left: 1px #fff solid;
    border-top: 1px #BCC0C3 solid;
    border-bottom: 1px #BCC0C3 solid;
    box-sizing: border-box;
}
.item:first-child {
    border-left: 1px #BCC0C3 solid;
}
.item:last-child {
    border-right: 1px #BCC0C3 solid;
}
.item:hover {
    background:#ECEFF4;
    border-left:1px #BDC0C5 solid;
    border-right:1px #BDC0C5 solid;
    border-bottom: 0;
    height:101px;
}
.item:hover + .item {
    border-left-width: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:41:25.070

你的意思是这样吗？

[jsfiddle](http://jsfiddle.net/hCK3D/11/)

```
.body{background:#ECEFF4;}
.item-container {
    float:left;
    border-top: 1px solid #BCC0C3;
    margin-top:20px;
}
.item {
    float:left;
    background: #ccc;
    width: 100px;
    height: 100px;
    border-left: 1px solid #fff ;
    border-bottom: 1px solid #BCC0C3;
}

.item:first-child {border-left: 1px solid #BCC0C3;}
.item:last-child {border-right: 1px solid #BCC0C3;}

.item:hover {
    background:#ECEFF4;
    border-left:1px solid #BDC0C5;
    border-right:1px solid #BDC0C5;
    border-bottom: 1px solid #ECEFF4;
}

.item:hover + .item {border-left-width: 0;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:44:59.910

## 将 div 容器边框与悬停时的项目边框重叠

**与**发布的其他答案不同，此解决方案将允许您将边框线保持在底部：http: [//jsfiddle.net/hCK3D/15/](http://jsfiddle.net/hCK3D/15/) **并且**您的白色垂直线将继续正确显示。

这个想法是从底部开始的边框现在设置在项目中，当项目悬停时，底部边框会改变颜色以匹配悬停颜色。**容器边框也是**为白色垂直线而设置的，但在悬停时，项目悬停边框底部出现在容器边框的前面。

[请参阅 JSFiddle 获取源代码](http://jsfiddle.net/hCK3D/15/)

# mysql - my.cnf 文件丢失，无法在任何目录中找到

> ID：12529756
> 
> 赞同：6
> 
> 时间：2012-09-21T11:36:58.300
> 
> 标签：mysql, linux, centos, centos6, my.cnf

我最近在我的 CENTOS 6 x86 操作系统上删除了 mysql 5.1 和已安装的 mysql 5.6。当我尝试查找 my.cnf 文件时，这些目录中缺少它：

`mysqld --verbose --help | grep -A 1 "Default options"`

=

`/etc/my.cnf`, `/etc/mysql/my.cnf`, 和`~/.my.cnf`.

现在我去了我的mysql主目录/var/lib/mysql来查找.cnf文件，但我找到的只是auto.cnf。

有没有人有任何想法？我可以下载一个 my.cnf 文件并将其放在其中一个目录中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:38:54.990

sudo updatedb && 定位 my.cnf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-28T13:11:06.063

如果您在定位时遇到问题

以 root 身份：查找 / -name my.cnf

你是怎么安装mysql的？和百胜？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T20:55:38.883

我正在运行 Centos 6.5。当我去安装 MySQL-server.X86_64 5.6.12-2.el6 时，它把 my.cnf 放在 /usr 中。/usr/my.cnf ？my.cnf 在 /usr 到底在做什么？

我使用 find / -iname my.cnf -print 找到了它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-16T05:37:55.203

位置更改为`/mysql.d`，文件名更改为`mysqld.cnf`. 此外，某处也有类似的问题（可能在这里或那里重复）。

# wso2 - Glassfih + WSO2 ESB 415 不支持的媒体类型

> ID：12529757
> 
> 赞同：0
> 
> 时间：2012-09-21T11:37:01.293
> 
> 标签：wso2, glassfish, wso2esb, axis2, wso2carbon

我正在使用 Glassfish 上托管的 JAX-WS 在 WSO2ESB 中创建“通过代理”。

问题是代理不起作用，并且它发生在我在 ESB 中创建的**每个代理**都指向**Glassfish 上的每个 Java Web 服务**：控制台给出了这个错误 [1]。问题是 .Net 服务的代理可以正常工作。

1) 我已经尝试使用**ESB tryit 工具**来使用该服务，我得到以下响应：

```
<TryitProxyError h:status="SOAP envelope error" xmlns:h="http://wso2.org/ns/TryitProxy">org.apache.axis2.AxisFault: Transport error: 415 Error: Unsupported Media Type</TryitProxyError> 
```

2）而不是**soapUI**，它给了我这个消息：

```
Error loading [ClientProxy?xsd=http://192.168.10.176:8080/ESBAdminWebapp_SERVER/ClientProxy?xsd=1]: java.io.IOException: Attempted read from closed stream 
```

`192.168.10.176:8080`Glassfish 服务器在哪里。但是，如果我调用真正的 WSDL，它就可以工作......

我也尝试过全新安装 WSO2-ESB 和全新 Glassfish 服务器：

WSO2 ESB、Glassfish 和 IIS 现在已在本地安装以尝试发现问题。

请帮忙！

[1] 完整日志：

```
TID: [] [WSO2 ESB] [2012-09-24 11:31:11,689] INFO {org.apache.synapse.mediators.builtin.LogMediator} - To: /services/test.testHttpSoap12Endpoint, WSAction: http://my/Hello/helloRequest, SOAPAction: http://my/Hello/helloRequest, MessageID: urn:uuid:754dfcb5-1008-47ed-9c25-15327370ee11, Direction: request, Envelope: ? {org.apache.synapse.mediators.builtin.LogMediator 
[2012-09-24 11:31:11,689]  INFO - LogMediator To: /services/test.testHttpSoap12E
ndpoint, WSAction: http://my/Hello/helloRequest, SOAPAction: http://my/Hello/hel
loRequest, MessageID: urn:uuid:754dfcb5-1008-47ed-9c25-15327370ee11, Direction:
request, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns
:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body><p:hello xmlns:
p="http://my/"><!--0 to 1 occurrence--><name>?</name></p:hello></soapenv:Body></
soapenv:Envelope>
[2012-09-24 11:31:11,694]  INFO - LogMediator To: http://www.w3.org/2005/08/addr
essing/anonymous, WSAction: , SOAPAction: , MessageID: urn:uuid:e9b224e8-2754-41
1f-8640-5922f1797202, Direction: response, Envelope: <?xml version='1.0' encodin
g='utf-8'?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envel
ope"><soapenv:Body><axis2ns7:binary xmlns:axis2ns7="http://ws.apache.org/commons
/ns/payload"></axis2ns7:binary></soapenv:Body></soapenv:Envelope>
[2012-09-24 11:31:11,697]  INFO - HTTPSender Unable to sendViaPost to url[http:/
/localhost:8280/services/test.testHttpSoap12Endpoint]
org.apache.axis2.AxisFault: Transport error: 415 Error: Unsupported Media Type
        at org.apache.axis2.transport.http.HTTPSender.handleResponse(HTTPSender.
java:308)
        at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.jav
a:194)
        at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessa
geWithCommons(CommonsHTTPTransportSender.java:449)
        at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(Com
monsHTTPTransportSender.java:276)
        at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
        at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisO
peration.java:406)
        at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(Out
InAxisOperation.java:229)
        at org.apache.axis2.client.OperationClient.execute(OperationClient.java:
165)
        at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:
555)
        at org.apache.axis2.client.ServiceClient.sendReceive(ServiceClient.java:
531)
        at org.apache.jsp.admin.jsp.WSRequestXSSproxy_005fajaxprocessor_jsp._jsp
Service(WSRequestXSSproxy_005fajaxprocessor_jsp.java:272)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper
.java:332)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:3
14)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161)
        at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(Con
textPathServletAdaptor.java:36)
        at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleR
equest(ServletRegistration.java:90)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(P
roxyServlet.java:111)
        at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyS
ervlet.java:67)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:304)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
alve.java:240)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
alve.java:164)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica
torBase.java:462)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j
ava:164)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
ava:100)
        at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonS
tuckThreadDetectionValve.java:154)
        at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:
563)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal
ve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
a:399)
        at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcesso
r.java:396)
        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.pr
ocess(Http11NioProtocol.java:356)
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoin
t.java:1534)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
utor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:26:08.373

异常表明 Glassfish 响应以下 HTTP 错误：

```
415 Error: Unsupported Media Type 
```

这可能意味着`Content-Type`代理发送的标头具有 Glassfish 不期望的值。

# php - 在数据库表中保存运行时创建的文本框值

> ID：12529760
> 
> 赞同：2
> 
> 时间：2012-09-21T11:37:14.000
> 
> 标签：php, javascript, mysql, html

我在该表单中创建了一个表单，其中包含一个文本框和一个添加另一个按钮和保存按钮，在单击添加另一个按钮的事件时会生成新的文本框，但是当我单击保存按钮时，新生成的文本框值无法保存到数据库中，请任何人可以指导我

这是我的代码：

```
<?php
    global $Hostname;   
    global $Username;   
    global $Password;           
    global $Database_name;  

function getConnection()    
{
    $Hostname = "localhost";    
    $Username ="root";
    $Password ="";
    $Database_name="labdata";

    $oMysqli = new mysqli($Hostname,$Username,$Password,$Database_name);    //create connection object.

    return($oMysqli);   
}
if(isset($_POST['submit']))
{
    $TestParameters = $_POST['testparameters'];
    $InsertQuery = "INSERT INTO test_table VALUES('$TestParameters')";
    $oMysqli=getConnection();
    $oMysqli->query($InsertQuery);

    //print_r($InsertQuery);exit();
    if(!$InsertQuery)
                {
                    die('Could not enter data:' . mysql_error());
                }
}
?>
<html>
<head>
<title>TestData</title>
<script type="text/javascript"> 
function create_row()   
{
      var newtr=document.createElement("tr");   
      var newtd=document.createElement("td");  
    var output="<input type=\"text\" name=\"testparameters\">";
      newtd.innerHTML=output;  
      newtr.appendChild(newtd); 
      document.getElementById("table1body").appendChild(newtr);

}
</script>
 </head>
<body>
<form name="testdetails" method="post" target="_self" action="<?php $_PHP_SELF ?>">

<label for="Testparameter">Testparameter</label>
<input type="text" name="testparameters"></input>
    <table id="table1body">
           <tr>     
     <td><input type="button" name="button" value="Add Test Parameter" onclick="create_row()"> 
          </tr>
    </table>
<input type="submit" name="submit" value="submit">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T06:39:12.020

尝试这个

```
if(isset($_POST['submit']))
    {

        $length = count($_POST['testparameters']);

        for($i=0; $i< $length; $i++){
            $TestParameters=$_POST['testparameters'][$i];
            if(!empty($TestParameters)){
            $InsertQuery = "INSERT INTO color(name) VALUES('$TestParameters')";
            $result=mysql_query($InsertQuery) or die(mysql_error());
        }
        }
        if(!$InsertQuery)
        {
            die('Could not enter data:' . mysql_error());
            }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T07:46:58.407

```
<?php
$n=0;
if(isset($_GET['button1']))
{

$n++;
     echo "hai";
      echo "<br><input type='text' name='+i+'>";

}
     if(isset($_POST['submit']))
{

      $con=mysqli_connect("localhost","root","","ram123");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
//print_r($_POST);
  $count = count($_POST);
 for($x=1;$x<$count;$x++){  
     $sql="INSERT INTO  names (name)VALUES('$_POST[$x]')";

    if (!mysqli_query($con,$sql))
      {
      die('Error: ' . mysqli_error($con));
      }

 }
 /* 
$sql="INSERT INTO  names (name)VALUES('$_POST[1]')";

if (!mysqli_query($con,$sql))
  {
  die('Error: ' . mysqli_error($con));
  }
echo "1 record added";

mysqli_close($con);
*/
}
?>

<html>
<head>
<title>TestData</title>
<script type="text/javascript"> 
var i = 1;
function changeIt()
{

my_div.innerHTML = my_div.innerHTML +"<br><input type='text' name="+i+">";
i++;
}

</script>
 </head>
<body>
<form name="testdetails" method="post" target="_self" action="<?php $_PHP_SELF ?>">

     <input type="button" name="button1" value="Add Test Parameter" onclick="changeIt()"> 

<input type="submit" name="submit" value="submit">
<div id="my_div"></div>
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:40:20.813

您对所有文本框使用相同的名称

```
<input type="text" name="testparameters"></input> 
```

为此使用数组，从中您将获得所有文本框的值

```
<input type="text" name="testparameters[]"></input> 
```

**迭代文本框值的代码**

```
$length = count($_POST['testparameters']);
for($i=0; $i< $length; $i++){
    echo $_POST['testparameters'][$i];
} 
```

# windows-phone-7 - Windows phone 7 共享 API？

> ID：12529767
> 
> 赞同：2
> 
> 时间：2012-09-21T11:37:34.770
> 
> 标签：windows-phone-7, flickr, sharing, evernote

前几天我注意到，当我在 Windows Phone 7.5 上拍照时，我可以选择将其分享到很多地方，包括 Evernote 和 Flickr。据我所知，这些不是标准的共享目的地，在我下载它们之后，它们可能已被各自的应用程序添加为共享选项。

我找到了共享这些服务的链接的 API。

我似乎找不到任何关于如何将照片和其他内容共享给照片应用程序似乎可用的所有服务的信息。

我可以自己使用 Evernote/Flickr/etc.. API 来做到这一点，但这需要用户为每个服务再次登录 OAuth，如果我可以利用系统共享选项，则不需要这样做。

谁能指出我如何做到这一点的正确方向？

谢谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:34:43.737

据我所知，你不能。

应用程序可以分享给您知道的目标 - 短信、电子邮件、社交/链接。

具体来说，内置的照片应用程序是可扩展的，您可以注册您的应用程序以允许将照片共享给它。

因此，换句话说，您拥有的唯一选择（无需自己编码）是：

您的应用程序 -> 电子邮件、短信、社交

照片 -> 你的应用

# javascript - Javascript 不工作或调用不工作

> ID：12529772
> 
> 赞同：0
> 
> 时间：2012-09-21T11:37:52.470
> 
> 标签：javascript

我有一个在我在家测试时可以使用的功能，但是当我在家测试时它不起作用。该函数创建一个随机字符串，并在我加载表单后立即调用它。我似乎一切正常，除了功能。我不确定为什么会这样。有人可以帮帮我吗？

谢谢。

```
<script language="javascript" type="text/javascript">
function randomString() {
    var chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz";
    var string_length = 3;
    var randomstring = '';
    var currentTime = new Date();
    var hours = currentTime.getHours();
    var minutes = currentTime.getMinutes();
    var seconds = currentTime.getSeconds();
    for (var i=0; i<string_length; i++) {
        var rnum = Math.floor(Math.random() * chars.length);
        randomstring += chars.substring(rnum,rnum+1);
    }
    document.getElementById('UniqueId').value = randomstring + hours + minutes + seconds;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:04:50.563

如果将此脚本放在`head`标签中，则可能在加载 html 的其余部分之前执行它。这意味着，还没有`UniqueId`加载 id 的此类元素，因此无法找到它。尝试在 html 文档完全加载后调用它。

```
yourFunction = function() { ...code... }
window.onload = yourFunction 
```

**更新：**

```
<script type="text/javascript">
    var randomString = function() {
    var chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz";
    var string_length = 3;
    var randomstring = '';
    var currentTime = new Date();
      var hours = currentTime.getHours();
      var minutes = currentTime.getMinutes();
      var seconds = currentTime.getSeconds();
      for (var i=0; i<string_length; i++) {
        var rnum = Math.floor(Math.random() * chars.length);
        randomstring += chars.substring(rnum,rnum+1);
      }
      document.getElementById('UniqueId').value = randomstring + hours + minutes + seconds;
  }

  window.onload = randomString;
</script> 
```

在 Windows XP 和 Chrome 21 上的 Firefox 6 和 IE 8、Mac OS X 10.8 上的 Firefox 14 上进行了测试。有用。

# html - 我可以在执行其他功能之前等待 HTML5 FileSystem DirectoryReader 吗？

> ID：12529774
> 
> 赞同：0
> 
> 时间：2012-09-21T11:37:56.680
> 
> 标签：html, filesystems

我正在尝试使用新的 HTML5 FileSystem API 来使用 javascript 创建/添加/删除文件。（用于自助收银台）

当前代码：

```
var entries;
function onInitFs(fs) {
    fileSystem = fs;
    debug('Opened file system: ' + fs.name);
    loadFilelist();
    // The functions below execute before loadFilelist() is ready!
    setFileList(entries);
    showFilenames(entries);
}

function loadFilelist() {
    entries = [];
    var dirReader = fileSystem.root.createReader();
    readEntries();

    function readEntries() {
        dirReader.readEntries(function(results) {
            if (results.length > 0) {
                debug(results.length + " Files added to the filesystemFilelist");
                entries = entries.concat(toArray(results));
                entries.sort();
                readEntries();
            }else{
                debug(entries.length + " Files in the filesystemFilelist");
                //done
            }
        }, fileErrorHandler);
    };
}

/* For putting debug text in the debug screen (in this case its the console) */
function debug(content) {
    window.console.log(content);
} 
```

问题在于函数 dirReader.readEntries(function (), callback) 等待回调。同时接下来的代码已经执行。[我在File API](http://www.w3.org/TR/file-system-api/#the-directoryreader-interface)中查找了它，似乎该函数仅适用于回调

我怎样才能防止函数调用

```
setFileList(entries);
showFilenames(entries); 
```

在 loadFilelist 完成之前执行？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:20:10.000

目前我正在使用工人来做同步工作！完美运行！我在主脚本和工作脚本之间创建了一个“命令系统”。**如果有人感兴趣，我会发布基础知识**！几乎没有人看过这个问题，所以现在我只将其标记为已解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T16:15:24.820

@Jimbo 要求的代码示例

**主 javascript 中的代码**

```
/**
 * Make a listener for the worker
 * 
 * @param {object}
 *            worker
 */
function workerListener(worker) {
    worker.onmessage = function(event) {
        switch (event.data.cmd) {
        case 'log':
            _Some_log_function(event.data.message);
            break;
        case 'error':
            _Some_error_handling(event.data.message, event.data.priority);
            break;
        case '_Some_command':
            _Some_function();
            break;
        default:
            break;
        }
    };
}

/**
 * Sends a message to a worker
 * 
 * @param {Object}
 *            worker
 * @param {Object}
 *            message JSON Object
 */
function postMessage(worker, message) {
    /* send message to the worker */
    worker.postMessage(message);
} 
```

**Worker javascript 中的代码**

```
/**
 * Listener, Listens to messages from the main thread
 * 
 * @param {Object}
 *            event
 */
self.onmessage = function(event) {
    _log(event.data.cmd);
    switch (event.data.cmd) {
    case 'init':
        _Some_init_function(event.data.filesystemsize,
                event.data.directory);
        break;

    case '_Some_Sendingmeganism':
        sendMail(event.data.receipt, event.data.filename, event.data.email);
        break;

    default:
        break;
    }
}; 
```

# php - PHP：$_POST 中未定义的索引

> ID：12529775
> 
> 赞同：0
> 
> 时间：2012-09-21T11:38:00.140
> 
> 标签：php, html

我正在使用表单选择。我只想通过在同一页面上回显结果来检查用户选择了什么，所以我保留了 action=""。但它显示错误未定义索引 slct。谁能帮帮我吗

```
<form action="" method="post">
<select name="slct">
<option value="yes" selected="selected"> yes </option>
<option value="no"> no </option>
</select>
<input type="button" value="Submit" />
</form>

<?php 
$tofd = $_POST["slct"];
echo $tofd; 
?> 
```

为什么它显示错误

```
Notice: Undefined index: slct in C:\wamp\www\Univ Assignment\Untitled-4.php on line 21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:41:30.237

您应该使用按钮类型提交 NOT 按钮

```
<input type="submit" value="submit" /> 
```

然后像这样测试它

```
echo (isset($_POST['slct']))? $_POST['slct'] : 'Variable undefined..'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:39:41.230

使用[PHP isset](http://php.net/manual/en/function.isset.php)先检查它是否存在

例子 ：

```
$tofd = isset($_POST["slct"]) ? $_POST["slct"] : null ; 
```

示例 2 使用函数

```
function __POST($var)
{
    return  isset($_POST[$var]) ? $_POST[$var] : null ;
}

$tofd = __POST("slct"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:40:44.183

如果它们在同一页面上，最初`$_POST`将是空的，因为用户没有发布任何内容。所以你必须处理它。

```
if(isset($_POST["slct"]))
    $tofd = $_POST["slct"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:58:16.393

```
<?php
  if (isset($_POST["slct"])){
  $tofd = $_POST["slct"];
  echo $tofd; }
?> 
```

# silverlight - Silverlight 中 Bing 地图的流量层

> ID：12529781
> 
> 赞同：0
> 
> 时间：2012-09-21T11:38:29.803
> 
> 标签：silverlight, bing-maps, layer, traffic

我有一个 Bing 地图 Silverlight 应用程序并希望在地图上显示交通信息。它似乎在 AJAX 版本中实现，但在 Silverlight 版本中没有实现。

那么如何为 Silverlight 实现一个工作流量层呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T09:29:01.137

对于所有对解决方案感兴趣的人：

经过数小时的搜索和尝试，我在这里找到了解决方案： [Bing Silverlight Control 中的自定义渲染](https://stackoverflow.com/questions/1092595/custom-rendering-in-bing-silverlight-control)

```
public class TrafficTileSource : TileSource
{
    public TrafficTileSource()
        : base(GetAbsoluteUrl("http://t0.tiles.virtualearth.net/tiles/t{0}.png"))
    {

    }

    public override Uri GetUri(int x, int y, int zoomLevel)
    {
        var quadKey = new QuadKey(x, y, zoomLevel);
        return new Uri(String.Format(this.UriFormat, quadKey.Key));
    }

    public static string GetAbsoluteUrl(string strRelativePath)
    {
        if (string.IsNullOrEmpty(strRelativePath))
            return strRelativePath;

        string strFullUrl;
        if (strRelativePath.StartsWith("http:", StringComparison.OrdinalIgnoreCase)
          || strRelativePath.StartsWith("https:", StringComparison.OrdinalIgnoreCase)
          || strRelativePath.StartsWith("file:", StringComparison.OrdinalIgnoreCase)
          )
        {
            //already absolute
            strFullUrl = strRelativePath;
        }
        else
        {
            //relative, need to convert to absolute
            strFullUrl = System.Windows.Application.Current.Host.Source.AbsoluteUri;
            if (strFullUrl.IndexOf("/ClientBin") > 0)
                strFullUrl = strFullUrl.Substring(0, strFullUrl.IndexOf("/ClientBin")) + strRelativePath;
        }
        return strFullUrl;
    }
} 
```

然后将图层添加到地图：

```
<m:MapTileLayer Visibility="{Binding Path=TrafficVisibility,Converter={StaticResource BoolToVisibilityConverter},Mode=OneWay,UpdateSourceTrigger=PropertyChanged}">
                <m:MapTileLayer.TileSources>
                    <utils:TrafficTileSource />
                </m:MapTileLayer.TileSources>
            </m:MapTileLayer> 
```

我希望这对希望将流量层添加到 Silverlight 应用程序的每个人有所帮助。

问候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-06T16:33:19.060

只是为了清理一下：这与约翰内斯的回答完全一样：

```
public class TrafficTileSource : TileSource
{
    public TrafficTileSource() : base("http://t0.tiles.virtualearth.net/tiles/t{0}.png") { }

    public override Uri GetUri(int x, int y, int zoomLevel)
    {
        QuadKey quadKey = new QuadKey(x, y, zoomLevel);
        return new Uri(String.Format(UriFormat, quadKey.Key));
    }
} 
```

和地图层：

```
<maps:MapTileLayer>
    <maps:MapTileLayer.TileSources>
        <utils:TrafficTileSource />
    </maps:MapTileLayer.TileSources>
</maps:MapTileLayer> 
```

# javascript - jquery Dialog 中的标准按钮的作用类似于 Dialog 的提交按钮

> ID：12529782
> 
> 赞同：1
> 
> 时间：2012-09-21T11:38:33.047
> 
> 标签：javascript, jquery-ui

我遇到了按钮行为问题：

它在 jQuery 选项卡内、在 jQuery 对话框内、在 .

单击按钮时，它不会执行功能，而是验证刷新页面的表单并在我的数据库中插入一个新的空白条目。

我只是希望它在我告诉它的那个中附加一个新的。

的HTML：

```
<td colspan="2" align="center">
<button id="newgroup-anacuad">Añadir una fecha de fotos</button><br />
<div id="newgroup-divfotos"></div>
</td> 
```

的JavaScript：

```
$('#diagnewgroup').dialog({
...
open:function(){
    $("#newgroup-anacuad").button();
    $("#newgroup-anacuad").bind("onclick",function(){
        var txt='blabla';
        $("#newgroup-divfotos").append(txt);
    });
...
}
buttons:
{
'Validar':function()
{
    var valid=true;
    var errores='';
        if(valid==true)
        {
        $('#formnewgroup').submit();
    }
    else
    {
        alert(errores);
        }
},
'Cancelar':function()
{
    $(this).dialog('close');
    $('#diagnewgroup').remove();
}
}}); 
```

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:45:28.287

尝试更换

```
 <button id="newgroup-anacuad">Añadir una fecha de fotos</button> 
```

和

```
 <input type="button" id="newgroup-anacuad" value="Añadir una fecha de fotos"/> 
```

在某些浏览器中

```
 <button> 
```

通常充当

```
 <input type="submit"> 
```

此外，您应该将**“onclick”**替换为**“click** ”

```
 $("#newgroup-anacuad").bind("onclick",function(){
       var txt='blabla';
       $("#newgroup-divfotos").append(txt);
   }); 
```

或者您可以重写为：

```
 $("#newgroup-anacuad").click(function(){
       var txt='blabla';
       $("#newgroup-divfotos").append(txt);
   }); 
```

# asp.net - 如何创建一个圆形按钮以支持所有浏览器？

> ID：12529786
> 
> 赞同：0
> 
> 时间：2012-09-21T11:38:56.713
> 
> 标签：asp.net, css, visual-studio-2010

我正在使用 ASP.NET 和 C#。现在我需要创建需要在所有不同浏览器中支持的圆形按钮。但 Visual Studio 不支持此属性。

我哪里错了？

谢谢。

**编辑：**

我确实用过这个。

```
-moz-border-radius: 15px;
-webkit-border-radius: 15px;
 border-radius: 15px; 
```

但没有运气。

**更新：**

谢谢。安装 sp1 后，它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:39:29.333

该`border-radius`属性仅在不太古老的浏览器中可用。

请参阅[兼容性表](http://caniuse.com/#feat=border-radius)。

如果您使用的是基于 IE8 的旧 IDE，则无法轻松获得 CSS3 的所有优点。

[SP1 解决了 Visual Studio 2010 的一些兼容性问题。](http://vishaljoshi.blogspot.fr/2011/06/announcing-html5-css3-support-for.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T12:17:17.350

由于border-radius 属性不可用且Visual Studio 给出错误，但它肯定会工作，因为我也经常使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T13:10:56.627

如果它允许您提交代码，我不会担心 VS 中显示的错误，我相信它要么需要更新，要么除了某些属性之外不会。在放入渐变时，我通常会从这个 IDE 中得到错误。

我要说的一件事是，我总是会为旧版本的兼容浏览器（如早期版本的 firefox 等）添加前缀。

```
    -moz-边界半径：15px；
    -webkit-border-radius：15px；
     边框半径：15px；

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T13:09:24.867

边框半径在浏览器中有所不同

-moz-边界半径：15px；火狐

边框半径：15px；对于 IE

有关CSS 圆角的更多信息，请参见[http://www.css3.info/preview/rounded-border/](http://www.css3.info/preview/rounded-border/)

# excel - 如何在 vba 中停用用户表单

> ID：12529787
> 
> 赞同：0
> 
> 时间：2012-09-21T11:38:59.163
> 
> 标签：excel, vba

我使用 VBA 在 excel 中创建了用户表单。任何人都可以帮助我如何通过单击 excel 表来停用用户表单。当用户点击用户表单时它应该激活

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T11:51:45.863

我认为您的意思是您希望表单是非模态的（即显示表单时您仍然可以返回到工作表）。为此，请将表单的“ShowModal”属性更改为 False。

# grails - Grails glink 可选参数属性未根据自定义 urlMappings 过滤

> ID：12529788
> 
> 赞同：0
> 
> 时间：2012-09-21T11:39:00.780
> 
> 标签：grails, hyperlink, params, url-mapping

使用 grails 中的自定义 url 映射可以预期以下行为：默认情况下，所有 g.createLink 和 g.link 都会根据 Urlmappings.groovy 逻辑过滤可选属性**参数。**其余页面参数被忽略，因为与特定 url 无关。

实际上这不会发生。解决方法是手动提供所有链接参数：

`<g:link action="action" controller="controller" params="[duplicated entries from url mappings]">my custom params link mapped in UrlMappings</g:link>`

如果页面参数完全作为 url 参数传递，则该参数会变成一个带有自定义映射以及其余页面参数的怪异 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:33:45.457

没有重复。您需要定义路径中**定义**的参数（只是占位符）。如果您生成链接，则需要提供这些参数的**值**。这些值不能自动导出。

您唯一能做的就是使用[namedMappings](http://grails.org/doc/2.1.0/guide/theWebLayer.html#namedMappings)美化符号。这样做的好处是，如果您忘记传递一些必需的变量，您至少会收到一条错误消息。

或者您定义自己的链接`tag`，它会自动从全局`params`地图中过滤。

# layout - ExtJS 3.4 EditorGridPanel 布局问题

> ID：12529789
> 
> 赞同：0
> 
> 时间：2012-09-21T11:39:06.163
> 
> 标签：layout, extjs, grid

GridPanel 未正确呈现

我在动态生成的网页上使用 EditorGridPanels。ExtJS 不控制 ViewPort。

当我将网格生成代码包装在 Ext.onReady() 中时，网格呈现完美。如果我不将它包装在 Ext.onReady() 中，它会呈现微妙的布局问题，例如

*   网格有点太宽了
*   顶部工具栏在右侧被切断
*   行不太合适，单击单元格时它们会移动

我曾尝试在页面加载后强制重新计算网格的布局......

```
(function(){}
   var grid = ...
   [ ... ]
   Ext.onReady(function(){
      grid.doLayout();
   });
)(); 
```

...但这不起作用。

我试图避免在 Ext.onReady() 中放置 Grid 初始化的原因是，有时页面需要很长时间才能完全加载每个资源，在这些情况下，除了网格最终得到的空白区域之外，页面看起来已经完全加载呈现给！

关于我可以尝试什么的任何建议？现在页面的完全重新设计不在范围内，所以我正在寻找一些我可以做的事情来让网格像在 onReady() 中初始化时那样进行布局！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:42:27.733

您可能最初可以使用“正在加载..”消息屏蔽该页面，然后在 onReady() 中将其删除。

如果您在 onReady 之外遇到问题，则表明您在尝试渲染组件时尚未加载某些内容，根据我的经验，这将导致进一步的问题。

# cordova - iOS6、UIWebView 和位置：固定

> ID：12529796
> 
> 赞同：2
> 
> 时间：2012-09-21T11:39:24.740
> 
> 标签：cordova, ios6

我们有一个 PhoneGap 应用程序，它有导航栏和标签栏“实现”为具有固定位置的 div（参见屏幕 1）。

在 iOS6 中，当显示键盘时，这些 div 会出现一些奇怪的行为。当我们输入第一个字母时，div 会消失，而是显示空白区域。当我们关闭键盘时，一切都会恢复正常。

这仅发生在 UIWebView 中，不会发生在 Mobile Safari 中。

有没有人有类似的东西？我想我们不应该孤单。

屏幕截图：

![普通视图](../Images/fd29a71d2effe05f2f21d77c988bb206.png) ![键盘打开，但没有输入任何文字](../Images/03e3d9572b834336164574af9e13a35d.png) ![键入的文本](../Images/85f983253641d25712d88aedcfc53f1d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:58:31.807

问题是 jQuery mobile 在操作系统向上推视图以保持输入可见的同时从脚本设置页面高度。

一些忽略 jqm 高度变化的 css 为我解决了这个问题。

```
.ui-mobile, .ui-mobile .ui-page {
    min-height: 100% !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:00:58.503

最后，我们必须对其进行调整并在进入编辑字段时隐藏页脚并将其存储在模糊事件中。不太好，但有帮助。

# android - setOnClickListener - 未调用

> ID：12529797
> 
> 赞同：0
> 
> 时间：2012-09-21T11:39:25.370
> 
> 标签：android, android-fragments

我使用片段，setOnClickListener - 没有调用，我不明白出了什么问题

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
          Bundle savedInstanceState) {

        View myFragmentView = inflater.inflate(R.layout.right_panel_1, container, true);

        Button buttonStart = (Button) myFragmentView.findViewById(R.id.ButtonStart);
        Button buttonFinish = (Button)myFragmentView.findViewById(R.id.buttonFinish);

        buttonStart.setOnClickListener(new View.OnClickListener() {

             public void onClick(View v) {

                ////

            }
        });

        buttonFinish.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                ////
            }
        }); 
```

和布局 right_panel_1.xml

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/ButtonStart"
        android:layout_width="158dp"
        android:layout_height="72dp"
        android:gravity="center_vertical|center_horizontal"
        android:text="Start"
        android:textSize="@dimen/padding_large" />

    <Button
        android:id="@+id/buttonFinish"
        android:layout_width="match_parent"
        android:layout_height="72dp"
        android:gravity="center_vertical|center_horizontal"
        android:text="Finish"
        android:textSize="@dimen/padding_large" />
</LinearLayout>

<ScrollView
    android:id="@+id/scrollViewLog"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/myLog"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:46:34.903

您可能应该尝试在上面添加@Override

```
@Override
public void onClick(View v) 
```

这是我看到的唯一至少缺少的部分:)

[在http://neilgoodman.net/2012/03/12/working-with-fragments-on-android-part-2/](http://neilgoodman.net/2012/03/12/working-with-fragments-on-android-part-2/)有一个关于使用片段的教程，你可以看看并尝试从头开始

# java - 从 Swing 应用程序中的侦听器返回信息

> ID：12529802
> 
> 赞同：1
> 
> 时间：2012-09-21T11:39:32.493
> 
> 标签：java, swing, actionlistener

嗨，我有`MainFrame`课：

```
public class MainFrame extends JFrame{

    private JLabel originalLabel;
    private JLabel filteredImage;

    public MainFrame(){
        setExtendedState(JFrame.MAXIMIZED_BOTH);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());
        initComponents();
        setVisible(true);
    }

    private void initComponents(){
        ImageFilterMenuBar menuBar = new ImageFilterMenuBar();

        originalLabel = new JLabel("Test1");
        filteredImage = new JLabel("Test2");

        Component verticalStrut = Box.createVerticalStrut(10);

        JPanel central = new JPanel();
        central.add(originalLabel);
        central.add(verticalStrut);
        central.add(filteredImage);

        add(new RadioButtonsPanel(), BorderLayout.SOUTH);
        add(central, BorderLayout.CENTER);

        setJMenuBar(menuBar);
    }

} 
```

和`MenuBar`类：

```
public class ImageFilterMenuBar extends JMenuBar{

    private JMenu fileMenu;
    private JMenuItem openImage;
    private JMenuItem exit;

    public ImageFilterMenuBar(){
        initCompoments();
    }

    private void initCompoments() {
        fileMenu = new JMenu("File");
        setMenuItems();
        add(fileMenu);
    }

    private void setMenuItems(){
        openImage = new JMenuItem("Open Image");
        exit = new JMenuItem("Exit");

        openImage.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_O,
                InputEvent.CTRL_MASK));

        exit.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_CANCEL,InputEvent.SHIFT_MASK));

        openImage.addActionListener(new OpenListener());
        exit.addActionListener(new ExiteListener());

        fileMenu.add(openImage);
        fileMenu.add(exit);
    }

} 
```

在 MenuBar 类中，您可以使用 OpenButton。它打开 JFileChooser 并返回我选择的文件的 url。所以现在我不知道如何将这个 url 发送到我想显示这个文件的 MainFrame 类中。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:47:43.300

最简单的解决方案是将引用传递`MainFrame`给`ImageFilterMenuBar`：

```
ImageFilterMenuBar menuBar = new ImageFilterMenuBar(this); 
```

然后，在 MainFrame 中添加如下方法：

```
public void setImageFile(File file) {
  // do whatever here
} 
```

在中，`ImageFilterMenuBar`您将保留对`MainFrame`成员变量中的引用，并`setImageFile()`在`JFileChooser`返回文件后使用它来调用。

更难实现的解决方案是实现观察者模式。这就是监听器在 Swing 中的工作方式。您将主框架注册为侦听器，而另一个类将是通知文件选择更改的类。

要打开文件选择器并获取所选文件：

```
JFileChooser chooser = new JFileChooser(path);
int result = chooser.showOpenDialog(mainFrame);
File file = chooser.getSelectedFile();
if (result == JFileChooser.APPROVE_OPTION && file != null && file.exists()) {
  mainFrame.setImageFile(file);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:59:11.470

不要扩展菜单栏或框架，只需在同一个应用程序中保留对它们的引用。..

我正要添加*“具有 URL 类属性”。*但不清楚您如何使用该 URL。如果是针对 a`JEditorPane`我可能会声明它的实例来代替 URL 属性，并直接在侦听器中的选择上设置页面。

# iphone - 继续使用 OpenUDID 粘贴板方法而不是 identifierForVendor 的风险

> ID：12529804
> 
> 赞同：2
> 
> 时间：2012-09-21T11:39:37.820
> 
> 标签：iphone, objective-c, ios, xcode, udid

即使使用最新的 iOS6 `identifierForVendor`，我发现当用户删除应用程序并且值将被重置时。

与传统的 OpenUDID 粘贴板方法不同，它保留在粘贴板中并且可以重复使用它们。

我看不到 Apple 是否会禁止粘贴板，所以我们应该继续在该`pasteboards`模式下使用 OpenUDID 吗？

（也`pasteboards`被广泛支持）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:13:21.050

我的答案分为两部分：

1.  identifierForVendor 确实不是 UDID 或 OpenUDID 的好等价物。您应该查看名为 AdSupport（以前称为 identifierForAdvertising）的新框架。那里有一个唯一标识符，基本上满足唯一标识符 + 保留 + 跨应用程序，有两个警告：A/用户可以通过切换标志（它实际上是一个软标志）从偏好中“退出”B/用户可能会在设置中重置标识符...

2.  OpenUDID 将在本周或下周更新为符合 iOS 6 的代码。

总而言之，OpenUDID 非常适合 iOS 5 和 iOS 6 之间的过渡。随着时间的推移，iOS 6 原生 API 将足以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T08:20:40.983

我一直在四处寻找，这个行业每天都在变化。从我所见，截至 2013 年 6 月，OpenUDID 不值得冒险，因为：

1.  根据[http://david-smith.org/iosversionstats/](http://david-smith.org/iosversionstats/)，截至 2013 年 5 月 29 日，88.6% 的 iOS 用户使用 iOS 6.x

2.  广告商 ID 做同样的事情，但如上所述有一个软关闭模式（要求您不要使用它），这很公平。您可以在您的协议中添加，即使手机处于不跟踪模式（应用程序并不是真正免费的），您也会在您的应用程序的免费版本中跟踪用户

# javascript - 到达页面底部后更改固定定位元素的边距顶部位置？

> ID：12529805
> 
> 赞同：4
> 
> 时间：2012-09-21T11:39:38.270
> 
> 标签：javascript, jquery

我需要使用垂直滚动条在到达页面底部（或距底部 200px）后将固定 div 元素的上边距从 margin-top: 200px 更改为 margin top 0px。

如果滚动回顶部，则切换返回。

我猜一些 javascript/jQuery 代码可以做到这一点。

我的 html/布局代码：

```
<div id="header" style="position: fixed; margin-top: 0px;">
     Header content
</div>
<div id="main">
    <div id="left" style="position: fixed; margin-top: 200px;">Google Ads here</div>
    <div id="right">Content posts here</div>
</div>
<div id="footer">
    Footer content
</div> 
```

**编辑：这里有一些图片可以让我的问题更清楚。**

1.  加载页面时的正常状态： ![在此处输入图像描述](../Images/da5624cf75ea09b7a49d7ad6a4b4464d.png)

2.  向下滚动时出现问题，并且 google ads 列与页脚冲突： ![在此处输入图像描述](../Images/e220a2c704f4b60a0ce0d27db6f20092.png)

3.  需要如何解决： ![在此处输入图像描述](../Images/397f9a6394fcbbbbb1b7c5cf736bfec5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T20:46:54.920

德夫德...

瞧，我提出的解决方案：

[http://jsfiddle.net/YL7Jc/2/](http://jsfiddle.net/YL7Jc/2/)

动画有点生涩，但我认为它可以满足您的需求

（这是我对较早的 s/o 帖子的看法：
[我可以将 DIV 始终保留在屏幕上，但并不总是在固定位置吗？](https://stackoverflow.com/questions/8418583/can-i-keep-a-div-always-on-the-screen-but-not-always-in-a-fixed-position)）

让我知道你的想法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:49:54.343

试试下面的代码，它绑定一个事件来`window.scroll`检查页面是否到达底部（200px 的底部）并将页面移动`#left`到顶部（`margin-top: 0`）..

**演示： http:** [//jsfiddle.net/6Q6XY/4/](http://jsfiddle.net/6Q6XY/4/)（添加了一些演示代码以查看它何时触底。）

```
$(function() {
    var $left = $('#left');

    $(window).bind('scroll', function() {   
        if (($(document).height() 
               - (window.pageYOffset + window.innerHeight)) < 200) {                
            $left.css('marginTop', 0);
        } else {
            $left.css('marginTop', 200);
        }
    });
}); 
```

**参考：** [https ://stackoverflow.com/a/6148937/297641](https://stackoverflow.com/a/6148937/297641)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T15:29:55.640

嗨首先你应该在标记人们之前更清楚，因为每个人都给出类似的答案然后它表明问题不清楚。

请参阅[Js Fiddle](http://jsfiddle.net/6Q6XY/32/)以获得潜在的修复，请根据需要调整像素等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T07:47:21.763

HTML

```
<div id="main" style="width: 960px; margin: 0px auto;"> 
    <div id="left" style="position: fixed; top: 200px; left: 0px; background: #000; width: 100%; color: #fff;">Google Ads here</div> 
    <div id="right"></div> 
</div> 
```

JAVASCRIPT

```
<script type="text/javascript">
    $(function() {
        var documentHeight = $(document).height();
        var windowHeight = $(window).height();
        var left = $('#left');
        var leftTopPosition = $('#left').css('top');
        leftTopPosition = parseInt(leftTopPosition.substring(0, leftTopPosition.length-2));             

        $(window).scroll(function(){
            var pageOffsetY = window.pageYOffset;           
            if((documentHeight - pageOffsetY - windowHeight) <= 200 && leftTopPosition == 200) {
                left.stop().animate({
                    'top': '0px'
                });

                leftTopPosition = 0;
            }

            else if((documentHeight - pageOffsetY - windowHeight) > 200 && leftTopPosition == 0) {
                left.stop().animate({
                    'top': '200px'
                });

                leftTopPosition = 200;
            }
        });
    });

</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T11:45:27.893

您需要实现窗口滚动功能，这是一个 jquery 实现，所以请确保您包含最新的 jquery 库

```
$(window).scroll(function () {
        if ($(window).scrollTop() + $(window).height() == $(document).height()) {

            //if it hits bottom
            $('#left').css("margin-top", "0px");

        }
        else {

            $('#left').css("margin-top", "200px");

        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-08T12:25:28.697

对于这个问题，你应该在 css 中使用 z-index

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-21T11:43:14.270

尝试这样的事情

```
 if ($(window).scrollTop() == $(document).height() - $(window).height())   
           {
              document.getElementById(yourid).setAttribute("style","margin-top:0px");
           } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-21T11:54:02.920

尝试这个：

```
$(window).bind('scroll', function(){
   if(($(window).height()-$(window).scrollTop())<200)
   {
       $('#left').css('margin-top',$(window).scrollTop());
   }
   else
   {
       $('#left').css('margin-top',200);
   }
}); 
```

# c# - .NET 2 中资源的奇怪问题

> ID：12529808
> 
> 赞同：5
> 
> 时间：2012-09-21T11:39:46.353
> 
> 标签：c#, resources, .net-2.0

在 VS 2010 SP 1 中，我为 .Net Framework 2 创建了 WinForms 应用程序。我尝试从资源中获取图标并将其分配给表单图标：

```
this.Icon = global::tester.Properties.Resources.icon_gray; 
```

图标资源 icon_gray.ico 从 VS 设计器添加到我的开发人员 PC Windows 7 x86 中的 Resources.resx，带有 .NET Framework 3.5 SP1 和 .NET 4。

但是出现以下错误`Windows XP SP 3 with only .NET Framework 2 SP 2`

**错误**：

```
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.ComponentModel.Win32Exception: Параметр задан неверно
   at System.Drawing.Icon.Initialize(Int32 width, Int32 height)
   at System.Drawing.Icon..ctor(SerializationInfo info, StreamingContext context)
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle._SerializationInvoke(Object target, SignatureStruct& declaringTypeSig, SerializationInfo info, StreamingContext context)
   at System.Reflection.RuntimeConstructorInfo.SerializationInvoke(Object target, SerializationInfo info, StreamingContext context)
   at System.Runtime.Serialization.ObjectManager.CompleteISerializableObject(Object obj, SerializationInfo info, StreamingContext context)
   at System.Runtime.Serialization.ObjectManager.FixupSpecialObject(ObjectHolder holder)
   at System.Runtime.Serialization.ObjectManager.DoFixups()
   at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Resources.ResourceReader.DeserializeObject(Int32 typeIndex)
   at System.Resources.ResourceReader.LoadObjectV2(Int32 pos, ResourceTypeCode& typeCode)
   at System.Resources.ResourceReader.LoadObject(Int32 pos, ResourceTypeCode& typeCode)
   at System.Resources.RuntimeResourceSet.GetObject(String key, Boolean ignoreCase, Boolean isString)
   at System.Resources.RuntimeResourceSet.GetObject(String key, Boolean ignoreCase)
   at System.Resources.ResourceManager.GetObject(String name, CultureInfo culture, Boolean wrapUnmanagedMemStream)
   at System.Resources.ResourceManager.GetObject(String name, CultureInfo culture)
   at tester.Properties.Resources.get_icon_gray()
   at tester.Form1.button1_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

如何解决这个问题？ **编辑：** 用png：

```
pictureBox1.Image = global::tester.Properties.Resources.icon_gray1; 
```

一切都很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T11:21:31.983

对于遇到此问题的人，请确保检查项目属性窗口中的图标以及所有表单中的图标属性。它们都必须是 32x32 才能在 Windows XP 中工作。

# android - 使用 Metaio 和 Canvas 在 2 个 GPS 点之间画一条线

> ID：12529811
> 
> 赞同：1
> 
> 时间：2012-09-21T11:39:56.020
> 
> 标签：android, augmented-reality

我写在这里是因为我正在修改 Metaio 给出的基于 GPS 的示例，以尝试在 AR 应用程序中显示 2 个 GPS 点之间的线。该示例运行良好，我能够在 GPS 定位中显示一个对象（例如图像），但是当我尝试实现 Canvas 时出现许多错误，所以，我的问题是，我到底需要什么来画一条线使用 Metaio 和 Canvas？如果这是不可能的......我应该使用什么？我在处理屏幕坐标和属于 gps 点的空间中的真实坐标之间的关系时也遇到了问题。我发现了这个，但我认为我需要相反的：

virtual Vector3d metaio::IUnifeyeMobile::get3DPositionFromScreenCoordinates ( int cosID, const Vector2d & point ) [纯虚拟，继承] 将屏幕坐标转换为被跟踪目标平面上对应的 3D 点。

参数： cosID 定义 3D 点的坐标系的（从 1 开始）索引。point 要使用的 2D 屏幕坐标。返回： 一个 3D 矢量，包含生成的 3D 点的坐标。

对不起我的英语不好，我会等待答案。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:17:35.603

您可以尝试在 Metaio 帮助台上提问：

[http://helpdesk.metaio.com/](http://helpdesk.metaio.com/)

该网站由 Metaio 技术人员观看，并有许多 Metaio/Junaio 开发人员参与。你可能会在那里更快地得到答案。如果您确实找出了问题，请务必将解决方案发布回此处！

# java - 文本字段到语音气泡的 CSS 编辑

> ID：12529812
> 
> 赞同：1
> 
> 时间：2012-09-21T11:39:59.830
> 
> 标签：java, css, javafx, scenebuilder

我正在创建我的第一个聊天程序（使用 java 中的图形），我正在使用 JavaFx 场景构建器创建一个包含一些图片的 GUI，然后是 1-2 个可以互相聊天的人。这个想法是，当连接到服务器的客户端中的任何一个与另一个客户端通信时，将显示一个小气泡。

我的想法是使用一个文本字段来创建它，然后我将在 CSS 中进行编辑，使其看起来像一个语音气泡。

我如何尝试寻找能够配置我的文本字段的 CSS 样式表，但到目前为止没有任何效果，有人能帮我解决这个问题吗？到目前为止，我尝试过的两个样式表是：

```
 .speech-bubble {
    position:relative;
    width: 320px;
    padding: 10px;
    margin: 3em;
    background-color:#FFF;
    color: #666;
    font: normal 12px "Segoe UI", Arial, Sans-serif;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    border-radius: 10px;
    border: 10px solid rgba(0,0,0,0.095);
}
.speech-bubble p {
    font-size: 1.25em;
}

.speech-bubble:before,
.speech-bubble:after {
    content: "\0020";
    display:block;
    position:absolute;
    top:-20px;  /* Offset top the height of the pointer's border-width */
    left:20px;
    z-index:2;
    width: 0;
    height: 0;
    overflow:hidden;
    border: solid 20px transparent;
    border-top: 0;
    border-bottom-color:#FFF;
}
.speech-bubble:before {
    top:-30px; /* Offset of pointer border-width + bubble border-width */
    z-index:1;
    border-bottom-color:rgba(0,0,0,0.095);
}

    .bubble{
    background-color: #F2F2F2;
    border-radius: 5px;
    box-shadow: 0px 0px 6px #B2B2B2;
    height: 200px;
    margin: 20px;
    width:  275px;
}

.bubble::after {
    background-color: #F2F2F2;
    box-shadow: -2px 2px 2px 0 rgba( 178, 178, 178, .4 );
    content: "\00a0";
    display: block;
    height: 20px;
    left: -10px;
    position: relative;
    top: 20px;
    transform: rotate( 45deg );
    width:  20px;
} 
```

问题是当我将它添加到我的文本字段时它不会改变外观我不知道我做错了还是这些样式表不适合文本字段

希望有人能够帮助我提前谢谢你：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:42:48.360

这个 CSS 看起来像 web CSS，据我所知是不受支持的。有效的 JavaFX css 属性通常以“-fx”开头。这里有一个参考：

[http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)

确保您的文本字段控件上有语音气泡 CSS 类。尝试一一添加更改并在 SceneBuilder 中检查结果。当我尝试一次进行太多更改时，其中一个不可避免地不起作用。

# sql-server-2008 - SQL Server 2008 - CONVERT vs DATE & DATETIME 列

> ID：12529814
> 
> 赞同：2
> 
> 时间：2012-09-21T11:40:02.603
> 
> 标签：sql-server-2008, datetime, sql-convert

我在很多表中都存储了一个修改日期字段。有时我需要将时间部分用于我的逻辑，有时我只需要日期部分。我想知道以下哪种情况更有效/最佳实践：

1.  存储两列 - 一列是 DATE 类型，一是 DATETIME 类型 - 它们都代表时间上的相同实例，但其中 DATE 列显然只存储日期部分。当我只需要对日期进行比较时，我使用 DATE 列，而当我需要进行包含时间的比较时，我使用 DATETIME 列。

2.  存储一列 DATETIME 类型的列，并在需要时使用 CONVERT(DATE, Date_Amended_Col) 检索日期部分。

每次使用 CONVERT 都会有很大的开销吗？我认为 DATE 部分可能是访问频率更高的部分，所以我觉得我会经常使用 CONVERT。

我想不出第二种方法有任何明显的缺点，除了在进行修改时需要更新两个字段而不是只更新一个字段，如果我觉得有必要，我总是可以使用触发器。

或者，还有更好的方法？使用计算列是否与每次使用 CONVERT 相同？

任何想法将不胜感激。

非常感谢，

铝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:48:44.110

我会推荐一个`PERSISTED`计算列。[请参阅Microsoft](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)的以下定义。

> 除非另有说明，否则计算列是虚拟列，未物理存储在表中。每次在查询中引用它们时，都会重新计算它们的值。数据库引擎在 CREATE TABLE 和 ALTER TABLE 语句中使用 PERSISTED 关键字将计算列物理存储在表中。当作为其计算一部分的任何列发生更改时，它们的值会更新。通过将计算列标记为 PERSISTED，您可以在计算列上创建确定性但不精确的索引。此外，如果计算列引用 CLR 函数，则数据库引擎无法验证该函数是否真正具有确定性。在这种情况下，计算列必须是 PERSISTED 以便可以在其上创建索引。

# javascript - 使用 jQuery 获取复选框值

> ID：12529816
> 
> 赞同：1
> 
> 时间：2012-09-21T11:40:05.930
> 
> 标签：javascript, jquery

首先我提醒这一点，并提醒'未定义'：

```
alert($("input[name='searchManagers']:checked").val()); 
```

但是当我尝试这个时，为什么要警告“不”：

```
if($("input[name='searchManagers']:checked").val() == 'undefined')
    alert('yes')
else
    alert('no') 
```

这解决了我的问题：

```
if(typeof $("input[name='searchManagers']:checked").val() == 'undefined')
    alert('yes')
else
    alert('no') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:41:48.200

您要比较的第二个是字符串而不是`undefined`类型。

尝试这个：

```
if($("input[name='searchManagers']:checked").val() == undefined) 
```

或者：

```
if(typeof $("input[name='searchManagers']:checked").val() == 'undefined') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:43:06.313

利用：

```
$("input[name='searchManagers']").is(":checked") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:42:12.093

因为 undefined != 'undefined' 如果你要修改你的代码

```
 if($("input[name='searchManagers']:checked").val() == undefined)
    alert('yes')
  else
    alert('no') 
```

然后它应该工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T11:42:21.313

将“未定义”更改为不带引号的未定义

```
if($("input[name='searchManagers']:checked").val() == undefined) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T11:58:09.397

请进行一些更改并找到输出。

```
 if ($("input[name='searchManagers']").is(':checked'))
  alert('yes');
  else
  alert('no'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T11:45:17.973

请确保在复选框中设置 id 和 name 属性。并在代码下方尝试。

```
if(!$("input[name='searchManagers']:checked").val()){
    alert('Plase select the searchManagers');
    return false;
} 
```

# wpf - WCF 服务在没有管理员权限的情况下无法运行

> ID：12529818
> 
> 赞同：8
> 
> 时间：2012-09-21T11:40:11.603
> 
> 标签：wpf, wcf

我是 WCF 的新手。我有一个 WCF 服务，我在 WPF 应用程序中托管，而运行该服务需要管理员权限。每次我必须右键单击托管我的服务的应用程序并选择“以管理员身份运行”。如何使服务在 Windows 7 上运行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T09:27:13.343

我不知道我的问题到底在问什么，但我有一个解决方法。仅当您将 http 绑定与 WCF 一起使用时才需要管理员权限。我切换到 netTcpBinding，它对我有用。这不完全是我问的，但对我有用。也许它会帮助面临类似问题的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:50:39.073

尝试使用更高的端口。低端口只能以管理权限打开。

您可能还必须使用 NETSH：

在 cmd 提示符中输入：

> NETSH
> 
> 添加 urlacl url=http://+:8732/ user=DOMAIN\user

# java - 检查对象是否在等距平铺/块的范围内

> ID：12529819
> 
> 赞同：1
> 
> 时间：2012-09-21T11:40:11.660
> 
> 标签：java, tile, bounding-box, isometric

如何检查对象是否在等距块的范围内？例如，我有一个播放器，我想检查它是否在这个等距块的范围内。我使用 OpenGL Quads 绘制等距块的图块。

我的第一次尝试是检查方形图案之类的东西：

```
e = object;
this = isometric chunk;

        if (e.getLocation().getX() < this.getLocation().getX()+World.CHUNK_WIDTH*
                World.TILE_WIDTH && e.getLocation().getX() > 
                this.getLocation().getX()) {
            if (e.getLocation().getY() > this.getLocation().getY() &&   
                    e.getLocation().getY() < this.getLocation().getY()+
                    World.CHUNK_HEIGHT*World.TILE_HEIGHT) {
                return true;
            }
        }
        return false; 
```

这里发生的是它检查块周围的 SQUARE，而不是真正的等距边界。图片示例：（红色是程序检查边界的地方）

我现在拥有的：

![矩形检查](../Images/2a96e3dde1ddd700901fbe8208458458.png)

所需检查：

![等距检查](../Images/97ac95e8fcf010d84f17f34aa7378fc0.png)

最终我想对块中的每个图块做同样的事情。

额外信息：

到目前为止，我在游戏中所拥有的是你只能逐个地块移动，但现在我希望它们自由移动，但我仍然需要它们有一个图块位置，所以无论它们在图块上的哪个位置，它们的图块位置都是确定的瓦。然后，当它们位于不同图块的边界框内时，它们的图块位置将成为新图块。块也是如此。玩家确实有一个区域，但在这种情况下该区域无关紧要。只要 X 和 Y 在边界框内，它就应该返回 true。他们不必完全在瓷砖上。

# asp.net - 使用 JavaScriptSerializer 将 Json 字符串转换为对象

> ID：12529823
> 
> 赞同：0
> 
> 时间：2012-09-21T11:40:23.343
> 
> 标签：asp.net, json, javascriptserializer

所以我将一个 Json 对象发送到我的服务器，并且我想将它转换为我称之为 PersonalPreferences 的强类型用户类型对象。

这是JS

```
{
"PersonalPreferences": [
    {
        "FavoriteFood": "Pasta with butter and cheese"
    },
    {
        "FavoriteSport": "Submission Wrestling"
    },
    {
        "FavoriteGame": "Starcraft 2"
    },
    {
        "FavoriteMusic": "Hip Hop"
    }
]
} 
```

我创建了一个与我发送的 Json 对象匹配的类。

```
 [DataContract]
public class PersonalPreferences
{
    [DataMember]
    public string FavoriteFood { get; set; }

    [DataMember]
    public string FavoriteSport { get; set; }

    [DataMember]
    public string FavoriteGame { get; set; }

    [DataMember]
    public string FavoriteMusic { get; set; }

    public PersonalPreferences()
    {
    }

    public PersonalPreferences(string favoriteFood, string favoriteGame, string favoriteMusic, string favoriteSport)
    {
        this.FavoriteFood = favoriteFood;
        this.FavoriteGame = favoriteGame;
        this.FavoriteMusic = FavoriteMusic;
        this.FavoriteSport = favoriteSport;

    }
} 
```

这是我的处理程序，它接收请求并将其转换为用户类型对象。我的问题是 PersonalPreference 对象是空的。jsSerializer.Deserialize 调用空构造函数，并且来自 Json 对象的值不会传递给 PersonalPreference 对象。我检查了请求中是否存在 Json 值作为字符串。

```
 [WebService(Namespace = "http://localhost:53243")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class JSonTestHandler : IHttpHandler, System.Web.SessionState.IReadOnlySessionState
{

    public void ProcessRequest(HttpContext context)
    {
        string jsonData = new StreamReader(context.Request.InputStream, System.Text.Encoding.UTF8).ReadToEnd();
        var jsSerializer = new JavaScriptSerializer();
        var personalPreferences = jsSerializer.Deserialize(jsonData, typeof(PersonalPreferences));
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:13:30.253

提供的 json 格式的字符串似乎有些问题。如果使用以下 json 格式的字符串进行检查，则可以正常工作：

> {“FavoriteFood”：“黄油和奶酪意大利面”，“FavoriteSport”：“提交摔跤”，“FavoriteGame”：“星际争霸2”，“FavoriteMusic”：“嘻哈”}

你是如何生成 Json 格式的字符串的？

# jquery - 用于 jQuery 的 iToggle：无法正常工作

> ID：12529825
> 
> 赞同：0
> 
> 时间：2012-09-21T11:40:28.240
> 
> 标签：jquery, plugins, toggle, easing

我正在尝试将[jQuery iToggle 插件](http://labs.engageinteractive.co.uk/itoggle/)用于我的一个项目。但它似乎无法正常工作。让我们先看代码，然后我会解释问题。

HTML`<head>`部分::

```
<link rel="stylesheet" href="http://localhost/projects/mythadmin/wp-admin/load-styles.php?c=1&amp;dir=ltr&amp;load=admin-bar,wp-admin&amp;ver=3.4.2" type="text/css" media="all">
<link rel="stylesheet" id="thickbox-css" href="http://localhost/projects/mythadmin/wp-includes/js/thickbox/thickbox.css?ver=3.4.2" type="text/css" media="all">
<link rel="stylesheet" id="myth_admin_stylesheet-css" href="http://localhost/projects/mythadmin/wp-content/themes/mythadmin/mythadmin/css/mythadmin.css?ver=3.4.2" type="text/css" media="all">
<link rel="stylesheet" id="myth_itoggle_stylesheet-css" href="http://localhost/projects/mythadmin/wp-content/themes/mythadmin/mythadmin/css/engage.itoggle.css?ver=3.4.2" type="text/css" media="all">
<link rel="stylesheet" id="myth_admin_colorpicker_stylesheet-css" href="http://localhost/projects/mythadmin/wp-content/themes/mythadmin/mythadmin/colorpicker/css/colorpicker.css?ver=3.4.2" type="text/css" media="all">
<link rel="stylesheet" id="colors-css" href="http://localhost/projects/mythadmin/wp-admin/css/colors-fresh.css?ver=3.4.2" type="text/css" media="all">
<script type="text/javascript" src="http://localhost/projects/mythadmin/wp-admin/load-scripts.php?c=1&amp;load=jquery,utils&amp;ver=3.4.2"></script>
<script type="text/javascript" src="http://localhost/projects/mythadmin/wp-content/themes/mythadmin/mythadmin/js/jquery.easing.js?ver=3.4.2"></script>
<script type="text/javascript" src="http://localhost/projects/mythadmin/wp-content/themes/mythadmin/mythadmin/colorpicker/js/colorpicker.js?ver=3.4.2"></script>
<script type="text/javascript" src="http://localhost/projects/mythadmin/wp-content/themes/mythadmin/mythadmin/js/engage.itoggle.js?ver=3.4.2"></script>
<script type="text/javascript" src="http://localhost/projects/mythadmin/wp-content/themes/mythadmin/mythadmin/js/mythadmin.js?ver=3.4.2"></script> 
```

这里所有文件都被正确加载，没有任何`404s`.

HTML 正文::

```
<div class="myth_option_container toggle">
    <label for="test_cb">Test Checkbox</label>
    <input type="checkbox" id="test_cb" name="test_cb">
</div> 
```

调用 iToggle 函数

```
$(document).ready(function(){
   // Initialize iToggle Checkboxes
   $('input#test_cb').iToggle({
        easing: 'easeOutExpo',
        speed: 300
    });
}); 
```

上面的代码是从该部分`mythadmin.js`末尾包含的文件中调用的`head`。

这似乎根本不起作用，我在控制台中没有错误，所有文件都已正确加载，但我看不到切换按钮。

虽然如果我以 为目标`input's parent container`，我可以看到切换框并打开和关闭它，但没有`easing`效果（出于某种原因）。

所以说如果我改变`$('input#test_cb')`它`$('div.toggle')`可以工作（根本没有缓和效果）。

问题：

1.  为什么当我将它直接绑定到复选框输入时这不起作用。
2.  为什么即使`easing.js`加载正确，缓动效果也不起作用。

提前感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:28:54.593

这里有同样的问题。尝试旧版本的 jQuery（1.4.2 分钟），它工作正常......虽然 1.8.2 似乎不能很好地工作......

已编辑：[iToogle](https://github.com/pshiryaev/iToggle/downloads) < 这个版本的 iToggle 应该适用于较新版本的 jQuery。

# javascript - History.js 和 url 编码

> ID：12529826
> 
> 赞同：3
> 
> 时间：2012-09-21T11:40:33.320
> 
> 标签：javascript, html, history.js, html5-history

我在 Firefox v15.0.1 的本地站点上请求了以下 URI 示例，为简洁起见，我删除了主机名。

```
/search?cat=ngb%26b 
```

并且一些分页链接显示在结果页面上，带有这样的href

```
?p=2&cat=ngb%26b 
```

[对他们使用https://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)的点击事件执行以下历史请求，该事件使用 HTML5 历史记录，因为它的状态发生了我所知道的变化。

```
History.getState().url; 
```

url History.getState().url 给了我下面的内容，这被传递给点击事件的异步函数：

```
/search?cat=ngb&b&p=2 
```

然后历史记录将浏览器 URI 调整为此

```
/search?cat=ngb&b=undefined&p=2 
```

我的异步操作失败了，因为“cat”参数现在不正确。

我不能对 getState().url 的整个结果进行 URL 编码，因为那是不正确的。

面对这种情况时，我有什么遗漏需要做的吗？

任何帮助，将不胜感激。谢谢。

**更新：** 我目前正在调试它并查看 getState() 函数返回的对象。它有一个“数据”对象属性，其中包含正确编码的参数。

可能我可以旋转然后将它们添加到我传递给我的函数的 URL 中，该函数发出 ajax 请求（而不是传递给它的 .url 属性）但是当历史记录用于处理哈希时，这听起来不是一个好主意HTML4 的 url 后备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:55:31.020

在这里回答我自己的问题。

我在这里遇到了两个问题，一个是 History.js，另一个是在不正确的情况下使用 JQuery.param，因为它会对你提供的任何内容进行编码以使其对 URL 使用有效。

为了解决 History.js 插件的一些问题，我发现了这个有用的分支 [https://github.com/hrunting/history.js/tree/encoded-uris](https://github.com/hrunting/history.js/tree/encoded-uris) 仍然是一个开放的拉取请求，但不幸的是它帮助了我很多确实需要重新捆绑更改的文件并在需要时缩小它们。

更改后，我在代码中也遇到了问题，使用 $.param() 将值添加到基于查询字符串中的值构建的状态对象中。显然，“ng%26b”值已经被编码，param 正在编码 %，所以它最终成为“ng%2526”。

无论如何，希望这可能对将来的某人有所帮助。

谢谢

# javascript - 仅重置表单中的字段集并保留所有其他值

> ID：12529827
> 
> 赞同：4
> 
> 时间：2012-09-21T11:40:34.973
> 
> 标签：javascript, jquery, html, forms

是否有可能只恢复表单的一部分？例如，我想重置`fieldset`#1 中的所有值，但保留`fieldset`#2 中的所有其他值：

```
<form>
    <fieldset id="1">…&lt;/fieldset>
    <fieldset id="2">…&lt;/fieldset>
</form> 
```

我当然可以使用这样的 JavaScript-/jQuery-解决方案（用心编写，未经测试）：

```
$('#1 :input').val(''); 
```

但这不会恢复以前设置的默认值。或者我必须事先存储所有默认值，并且我必须检查文本区域、输入、复选框等……还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:11:53.393

不确定这是否是您的意思，但这将过滤所有没有`id`of的字段集`two`，然后将这些字段集中的表单元素重置为其默认值（**请注意，这`defaultValue`仅适用于输入/文本区域！**）：

```
$(document).ready(function() {

  $('#btn-reset').on('click', function(e) {
    e.preventDefault();

    $('form > fieldset').filter(function() {
      return $(this).prop('id') !== 'two';
    }).children(':input').each(function() {
      $(this).val(this.defaultValue);
    });

  });
}); 
```

**示例标记**

```
<form>

    <fieldset id="one">
        <input type="text" value="this is a default value" />
        <textarea>this is another default value</textarea>
        <p>this paragraph doesn't get looped over</p>
    </fieldset>

    <fieldset id="two">
        <input type="text" value="text here.." />
        <textarea>hello world!</textarea>
    </fieldset>

    <button id="btn-reset">Reset</button>

</form> 
```

[这是一个小提琴](http://jsfiddle.net/deifwud/LSX88/1/)

更改所有值，然后单击重置，第一个字段集中的所有值将重置为其默认值，而第二个字段将保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:51:49.640

希望这能解决你的问题

[http://www.electrictoolbox.com/jquery-clear-form/](http://www.electrictoolbox.com/jquery-clear-form/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:49:19.300

你可以使用 KnockoutJS 来做到这一点。使用默认值创建视图模型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:50:07.157

没有 JavaScript 就没有办法做到这一点......重置按钮将始终重置整个表单元素。

# android - 将 Activity 置于前面，在 Android 中使用通知

> ID：12529831
> 
> 赞同：2
> 
> 时间：2012-09-21T11:40:46.260
> 
> 标签：android, android-activity, notifications

我提出了一个通知。我想要的是，当用户点击通知时，我的活动被带到前面而不创建它的新实例。为此，我添加了标志 REORDER_TO_FRONT，但当我单击通知时，仍然调用 oncreate 而不是 onNewIntent。

这是我的代码 -

```
 int icon = R.drawable.android;
        long when = System.currentTimeMillis();
        CharSequence text = "new message";
        CharSequence contentTitle = stanza.getFrom();  // message title
        CharSequence contentText = stanza.getBody();      // message text

        Intent notificationIntent = new Intent(context, ChatBox.class);
        notificationIntent.putExtra("buddyid",stanza.getFrom());
        notificationIntent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0,notificationIntent, 0);

// the next two lines initialize the Notification, using the configurations above
        Notification notification = new Notification(icon, text, when);
        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
        mNotificationManager.notify(1,notification); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:52:55.440

你试过吗：

```
Intent.FLAG_ACTIVITY_CLEAR_TOP 
```

与您的 notificationIntent.addFlag();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T20:07:19.037

我的解决方案是制作一个广播接收器来监听通知触发的广播动作。所以基本上：

1.  通知会触发一个广播操作，其中包含要启动的活动的额外名称。

2.  广播接收器在单击通知时捕获此信息，然后使用 FLAG_ACTIVITY_REORDER_TO_FRONT 标志创建启动该活动的意图

3.  活动被带到活动堆栈的顶部，没有重复。

# ios - iOS：实例变量的其他替代方案？

> ID：12529833
> 
> 赞同：2
> 
> 时间：2012-09-21T11:40:46.760
> 
> 标签：ios, variables, instance

我有一个别人写的项目，我已经接手了，希望能把这个应用做得更好。

我遇到了一个问题：

从一类：

我写_customclass.variable。CustomClass 是另一个类，变量是一个属性并且是 int 类型。我在这个类中获得了变量的值，但是当我将它更改为 self.customclass.variable 时，我总是得到 0。还有其他替代方法可以从其他类中获取值吗？

（一个）

```
@property (readwrite)int boxSpacing; 
```

(二)

```
@synthesize boxSpacing; 
```

（C）

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    self.boxSpacing = 10;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:02:32.513

您问：

> 还有其他替代方法可以从其他类中获取价值吗？

简短的回答是，使用“getter”是从另一个类获取值的惯用方式。但是看看你的问题（承认，没有足够的源代码来正确诊断你的问题），我猜问题在于实例变量的使用。但稍后会详细介绍。

首先，让我们看看[声明的属性](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/ocproperties.html)及其实例变量及其访问器方法（getter 和 setter）的正确使用。[通常，您应该使用这些访问器方法设置属性。](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW5)但是，您可以使用实例变量从类中访问变量（并且您[不应在初始化程序和 dealloc 方法中使用访问器方法](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW6)）。并且在使用getter 和setter 时，您可以选择是使用方法调用（例如“ `[self customObject]`”）还是点表示法（例如“ `self.customObject`”）。

让我们看一个例子。假设您有一些简单的`CustomClass`：

```
@interface CustomClass : NSObject
{
    // you don't need to declare the instance variable

    //int _boxSpacing;
}

@property (nonatomic) int boxSpacing;

@end

@implementation CustomClass

// In Xcode 4.4 and later, the synthesize statement is optional, and if you
// omit it, it will synthesize the instance variable like this, with the 
// leading underscore. While you don't need to use an underscore in your
// instance variable, it has become convention in iOS development and it's
// a good technique to minimize chances that you accidentally use the instance
// variable when you actual intended to use the property's accessor methods 
// (the getter and setter). 

@synthesize boxSpacing = _boxSpacing;

@end 
```

现在，让我们假设您`CustomClass`将从内部使用它，例如，您的视图控制器。所以，首先你声明 this 的实例`CustomClass`：

```
@interface MyViewController : UIViewController
{
    // you do not need this instance variable declaration
    // the @synthesize statement will take care of this for you

    // CustomClass *_customObject;
}

@property (nonatomic, strong) CustomClass *customObject;

@end 
```

然后让我们演示如何在视图控制器中使用对象的`value`属性：`CustomClass``customObject`

```
@implementation MyViewController

// Again, in Xcode 4.4 and later, the synthesize statement is optional, and if you
// omit it, it will synthesize the instance variable like this, with the 
// leading underscore 

@synthesize customObject = _customObject;

- (void)customClassTest
{
    // initialize the object

    self.customObject = [[CustomClass alloc] init];

    // set the property

    self.customObject.boxSpacing = 1;

    // finally, let's demonstrate three ways to retrieve the value

    NSLog(@"%d", self.customObject.boxSpacing);
    NSLog(@"%d", [[self customObject] boxSpacing]);
    NSLog(@"%d", _customObject.boxSpacing);

    // while we're at it, let's demonstrate other ways to set the property

    _customObject.boxSpacing = 2;

    // or

    [[self customObject] setBoxSpacing:3];
} 
```

好的，让我们回到你的问题。你说：

> 我写_customclass.variable。CustomClass 是另一个类，变量是一个属性并且是 int 类型。我在这个类中获得了变量的值，但是当我将它更改为 self.customclass.variable 时，我总是得到 0。

好的，这可能是由几个不同的问题引起的，但我看到的最常见的问题是显式声明的实例变量和语句在幕后创建的实例变量之间的混淆`@synthesize`。这就是为什么我总是建议人们不要为他们声明的属性显式定义实例变量，而是让`@synthesize`语句自动执行此操作。这样我就不会遇到我要演示的那种问题。

考虑这个无害（虽然不正确）的例子：

```
@interface MyViewController : UIViewController
{
    CustomClass *_customObject;
}

@property (nonatomic, strong) CustomClass *customObject;

@end

@implementation MyViewController

@synthesize customObject;

- (void)customClassTestError
{
    // initialize the object

    self.customObject = [[CustomClass alloc] init];

    // this works

    self.customObject.boxSpacing = 1;

    // this doesn't!

    _customObject.boxSpacing = 2;

    // when it hits this statement, the value will still be 1!!!

    NSLog(@"%d", self.customObject.boxSpacing);
} 
```

你看到问题了吗？虽然我用下划线 . 声明了一个实例变量`_customObject`，但当编译器点击该`@synthesize`语句时，它创建了*另一个*实例变量，这次没有前导下划线`customObject`. 因此，我显式声明的实例变量从未收到 init/alloc，因此是`nil`，因此任何使用它的尝试都不起作用！

通常我们会看到相反的问题（一个显式声明的实例变量，没有下划线和`@synthesize`形式的声明`@synthesize customObject = _customObject`），但希望您能明白这一点。

无论如何，这是导致您描述的行为的最常见示例。如果这不是发生的情况，请为我们提供更广泛的代码示例。

但是，如果您遇到问题，我总是建议您`CustomClass`在尝试访问其属性之前检查对象本身的值。在尝试使用其属性之前，请确保已正确初始化类对象本身（无论是出于我上面列出的原因，还是其他一些初始化问题）。你可以做类似的事情`NSLog(@"CustomClass object = %@", customObject);`或`NSAssert(customObject, @"Object not properly initialized");`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:46:37.403

您是否为 CustomClass 定义了 @property？如果是这样，您是否分配了一个值？

如果不是，那么您将消息发送`variable`到`nil`. 在你的情况下，这将导致 0。

# javascript - 使用 div 作为链接 - 打开新标签的选项？

> ID：12529837
> 
> 赞同：8
> 
> 时间：2012-09-21T11:40:56.923
> 
> 标签：javascript, redirect, html

目前我在我的网站中使用这个小块 js 来让我的 div 充当一个按钮：

```
<div id="item" onclick="location.href='http://www.google.com';" style="cursor:pointer;">Google</div> 
```

但是当网页浏览打开大量标签时，我经常做的事情。有什么办法可以修改我的代码以允许这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T09:27:45.673

这应该这样做： -

```
 <html>
    <head>
    <style>
    .sampleDiv
    {
            position:relative;
            margin:0px auto;
            width:400px;
            height:200px;
            background-color:#CCCCCC;
            text-align:center;
    }
    .actualLink
    {
            position:absolute;
            top:0px;
            left:0px;
            width:100%;
            height:100%;
    }
    .linkText
    {
            position:relative;
            top:80px;
    }
    </style>
    </head>
    <body>
            <div class="sampleDiv">
                    <a class="linkText" href="test.html">testing</a>
                    <a class="actualLink" href="test.html"></a>
            </div>
    </body>
    </html> 
```

与类 actualLink 的链接覆盖了整个 div。类 linkText 的链接提供文本。使用两个标签的目的是，如果您只使用actualLink，那么您无法将文本放置在您想要的任何位置。通过使用带有类linkText的链接，您可以灵活地（垂直）居中文本（水平居中可以仅使用actualLink完成）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-09T19:55:36.003

我的解决方案是用锚块替换 div 块。锚块现在可以采用几乎任何 div 可以做的 CSS 样式，但它也可以包括 href，浏览器将识别并为您提供您想要查看的右键单击选项。

这么老：

```
<div class="divClass" onClick="location.href='http://www.google.com'">asdf</div> 
```

变成

```
<a class="divClass" href="http://www.google.com">asdf</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T11:47:50.877

您不能直接执行此操作，因为这是他们浏览器上的用户设置，无论窗口是作为新窗口打开还是作为选项卡打开。

有，`target="_newtab"`但没有得到广泛支持。

所以在onclick中：

```
window.open('page.html','_newtab'); 
```

但试图覆盖用户浏览器偏好并不是一个好主意IMO。

要在右键单击时执行此操作，例如：

```
$('#item').mousedown(function(event) {
  if(event.which == 3) { // right click
      window.open('page.html','_newtab');
  }
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T11:44:41.363

你可以这样做：

```
onclick="window.open('http://www.google.com', somename);" ... 
```

你的意思是，像：

```
..onmousedown="op(your_url,event);"..

function op(url,event) {
  if (event.button == 2) {
    window.open(url);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T11:48:13.647

实际上没有跨浏览器的方法可以做到这一点。Forms 或 window.open 将打开一个新窗口，而不是新选项卡。并且不要尝试在内存中创建链接并使用 javascript 单击它，因为作为安全功能，chrome 不会打开新选项卡。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T11:45:59.280

使用目标="_blank"

看看这里

文档：[HTML`<a>`目标属性](http://www.w3schools.com/tags/att_a_target.asp)
演示：[试试看](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_link_target)

# c - C 条件为假时进入if块

> ID：12529843
> 
> 赞同：3
> 
> 时间：2012-09-21T11:41:07.967
> 
> 标签：c

一个位图排序程序，其中assign部分为：

```
for(i = MAX/64-1;i >= 0;i--){
    for(j = 0;j < 64;j++){
        if(0 != (arr[i] & (1 << j))){
            *p++ = j + 64 * i;  
        }   
    }   
} 
```

我gdb了，有时候if条件返回0，程序还是进入block执行语句：
`*p++ = j + 64 *i;`
最后导致segmentfault，就是不明白什么情况下会发生

示例：
当 gdb 状态如下时：
j=44, i=6250, arr[i]=4096 并`print (arr[i] & (1 << j))`给出 0
但程序仍进入块

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:45:13.230

我的猜测是你有 32 位整数，但你的数组数据类型是`int64_t`. 在这种情况下，您需要更改：

```
 if(0 != (arr[i] & (1 << j))){ 
```

到：

```
 if(0 != (arr[i] & (1LL << j))){ 
```

因为`1 << j`是未定义的`j >= sizeof(int) * CHAR_BIT`（即`j >= 32`在你的情况下）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T11:44:41.187

`1 << j``int`如果和`j`大于或等于 ，则不是很明确`CHAR_BIT * sizeof (int)`。`j = 44`由于您在示例中使用，这可能是一个问题。

# sql - Oracle 中的标识符无效

> ID：12529845
> 
> 赞同：-3
> 
> 时间：2012-09-21T11:41:19.097
> 
> 标签：sql, oracle, identifier

我们有一个这样的表：

```
number branch code
1000 center XXCO
1001 xyz XXER
1002 zyx XXRE
2000 center2 YYCO
2001 xyz YYER
2002 zyx YYRE 
```

所有代码末尾带有“CO”的项目都是代码中前两个符号相同的项目的父项。

任务是获取所有分支及其各自父级的列表，如下所示：

```
center xyz XXER
center zyx XXRE
center2 xyz YYER
center2 zyx YYRE 
```

我尝试以下代码：

```
SELECT b.branch, a.branch, a.code
FROM tmp a JOIN tmp b ON
left(a.code,2) = left(b.code,2)
AND a.code NOT LIKE '%CO' AND b.code LIKE '%CO'; 
```

但是我得到一个指向脚本中“= left”位置的错误。

```
ORA-00904: "LEFT": недопустимый идентификатор
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action:
Error at Line: 3 Column: 17 
```

这可能是什么原因？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T11:45:22.937

Oracle 没有 LEFT 函数 - 请改用 SUBSTR(a.code, 1, 2) （假设您要比较前两个字符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:45:48.003

Oracle 中没有 LEFT 函数。使用 SUBSTR(code,1,2) 而不是 LEFT(code,2)

# c++ - 在 Clang 中使用 MSVC 预处理器“charizing”运算符

> ID：12529850
> 
> 赞同：3
> 
> 时间：2012-09-21T11:41:29.877
> 
> 标签：c++, visual-c++, clang, c-preprocessor

我得到了从事 MSVC 工作的人给我的以下代码：

```
#define MAP1(x, y) map[#x] = #@y; 
```

我在 Xcode 上，使用 Clang，从各种谷歌搜索中我发现这被称为“charizing operator”，并且特定于 MSVC 的预处理器。有没有办法在使用 Clang 时模拟此运算符的功能？我尝试删除`@`但收到以下错误消息：

```
Assigning to 'int' from incompatible type 'const char[2]' 
```

显式转换为“int”会起作用还是字符化操作符做不同的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T11:47:55.107

字符串化运算符（标准 C++）转换`a`为`"a"`，因此字符化运算符听起来像是变成`a`了`'a'`. 在简单的情况下，您可以`'a'`通过`"a"`获取第一个字符来获取。

```
#define MAP1(x, y) map[#x] = static_cast<const char(&)[2]>(#y)[0]; 
```

如果你没有得到长度为 1 的字符串， to 确保你得到一个编译时错误，如果你计算尾随 1 是两个`static_cast`字符。无论字符串的长度如何，plain都会默默地取第一个字符。`const char(&)[2]``'\0'``#y[0]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:48:14.747

你尝试过类似#y[0]的东西吗？基本上，“字符串化 y 并获取第一个字符”:-)

除此之外，因为从外观上看，生成的语句无论如何都是在运行时执行的，所以您可以将 y 字符串化，将其传递给函数并让该函数返回正确的内容。

# javascript - 在现有应用程序中使用 Backbone.js 有意义吗？

> ID：12529852
> 
> 赞同：2
> 
> 时间：2012-09-21T11:41:33.683
> 
> 标签：javascript, backbone.js, local-storage

目前的情况是：

*   我们对所有应用程序逻辑使用我们自己的服务 API 来保存数据并对其进行验证
*   对于我们需要跟踪的几个变量（身份验证令牌等），我们使用 localstorage 而不是 cookie

该应用程序的表示层目前是用香草 javascript 编写的，并带有一些用于基本内容的 Jquery。

切换到 Backbone 是否有意义 - 如果是，需要重构哪些代码？

# javascript - HTML/JavaScript - 返回上一个弹出窗口

> ID：12529854
> 
> 赞同：0
> 
> 时间：2012-09-21T11:41:40.720
> 
> 标签：javascript, html, popup

我有一个带有指向弹出窗口的链接的页面，在此弹出窗口中是指向另一个弹出窗口的链接。当我在第二个弹出窗口中提交时，它会返回到原始网页。我怎样才能回到上一个弹出窗口。

我试过`history.go(-1)`了，但这让我回到了原来的网页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:44:52.567

window.opener 将为您提供开放源代码。

因此，您可以执行以下操作：

`window.opener.focus();`使该弹出窗口前进。

# java - 使用 NatTable 处理检索速度慢的大数据

> ID：12529859
> 
> 赞同：1
> 
> 时间：2012-09-21T11:41:49.553
> 
> 标签：java, swt, large-files, nattable, large-data

我有一个关于 NatTable SWT 数据网格小部件的问题，我想用它来显示一个巨大的日志文件。

由于日志文件的大小可能有几 GB，因此我无法将其完全加载到内存中。应用程序应该使用尽可能少的堆空间。因此，借助一点缓存机制和文件中原始行位置的缓存，我`IDataProvider`实现了动态读取日志文件行的方法。`getDataValue`打开文件时，对其内容几乎一无所知——甚至不知道表格最终必须显示的行数。

这导致了几个问题，目前让我感到害怕：

1）我必须估计总行数（使用平均行长），直到文件被完全扫描并且最大行数确实是确定的。一旦出现这种情况，我的`getRowCount`方法就会返回实际的、正确的行数。这似乎吓坏了 NatTable 小部件，它完全失去了当前位置并跳转到第 1 行！

2) 当做一些直观的事情时，例如双击列的边框（自动调整列的大小，就像在 Excel 中一样），我的应用程序完全冻结，因为突然使用我的提供程序查询所有行单元格的内容，整个概念是虐待！我不希望任何东西触发完整的文件读取！

有人对我有一些提示吗？文档太少太糟糕了......任何提示都非常感谢！如何防止我的应用程序冻结？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T15:18:31.073

1）听起来当您更改行数时选择不会保留 - 行数更改意味着支持数据更改，因此它可能会安全播放并将选择设置为第一行。您可以在更改行数之前查询选定的行，然后在更改行数后重置选择。

2）为了弄清楚**列**的最大宽度是多少，表必须查询每一行中该单元格的每个值**......**要么你必须实现一个分页机制，这样你就可以返回一些导致零宽度的东西当该行不可见时，或者您可能希望[针对 NatTable 提出一个错误，](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=NatTable)以请求仅基于*可见*列的自动调整大小模式的功能！

# svn - 使用 netbeans SVN 插件时遇到问题

> ID：12529863
> 
> 赞同：1
> 
> 时间：2012-09-21T11:41:55.970
> 
> 标签：svn, version-control, netbeans-7

我在项目开发中使用 uber SVN 和 Netbeans7.x。我将我的实际项目保存在 SVN 中并使用 Netbeans 进行检查，我的本地副本与 SVN 副本同步。问题是当我创建一个新项目时在我的本地系统中，它也与 SVN 同步。我该如何克服这个问题？

谢谢

# vb.net - 如何在 VB.Net 中为 RichTextBox 控件提供填充？

> ID：12529864
> 
> 赞同：1
> 
> 时间：2012-09-21T11:42:06.220
> 
> 标签：vb.net, richtextbox, padding

我正在 vb.net 中开发 Windows 应用程序。其中我有一个表单中的 RichTextBox 控件。现在我想要在richtextbox 中进行一些填充。所以我的文本将在一些空格（填充）之后开始，比如 word 文档。

![文本从内部正方形开始。](../Images/6602daf253d6a7cc48fb669c24b4eac4.png)

那么任何人都可以给出一些想法如何为 RichTextBox 控件提供填充？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:53:36.877

没有允许填充的内置属性。您可以创建自己的控件并自己处理绘画（或找到其他拥有 - [http://www.codeproject.com/Articles/21437/A-Padded-Rich-Text-Box-Subclass](http://www.codeproject.com/Articles/21437/A-Padded-Rich-Text-Box-Subclass)的人）；但是您可以通过将 RichTextBox 停靠在 Panel 中轻松实现所需的外观。

面板确实有一个`Padding`属性。

如果您使用相同的背景颜色，它可能会产生所需的效果。不过，滚动条可能看起来“关闭”；如果你需要它来滚动，事情会变得更加复杂——我认为你可以使用 VScrollBar——与 Panel 具有相同的高度，但管理滚动会变得复杂。你想阻止 RichTextBox 显示它的滚动条；但您需要使用 VScrollBar 管理滚动。

如果没有提供更好的解决方案；今晚我会试一试，看看我能不能让它工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T06:34:58.337

我有一个类似的问题，这对我有用，至少对左边距有用。基本上我选择了所有文本并设置缩进。

```
With RTB        'This changes the left margin for the whole thing
  Dim OldSelStart As Integer = .SelectionStart
  Dim OldSelLen As Integer = .SelectionLength
  .SelectionStart = 0
  .SelectionLength = Len(.Text)
  .SelectionIndent = 10
  .SelectionStart = OldSelStart
  .SelectionLength = OldSelLen
End With 
```

# php - 使用正则表达式复制字符串

> ID：12529867
> 
> 赞同：0
> 
> 时间：2012-09-21T11:42:12.873
> 
> 标签：php, regex

我有数百个具有这种结构的变量：

```
$bsdatA = $_POST['bsdat_a'];
$bsdatB = $_POST['bsdat_b']; 
```

...

问题是我必须向每个函数添加 isset() 函数，如下所示：

```
$bsdatA = isset($_POST['bsdat_a']) ? $_POST['bsdat_a'] : '';
$bsdatB = isset($_POST['bsdat_b']) ? $_POST['bsdat_b'] : ''; 
```

...

这是在每一行上手动复制和粘贴...可以通过正则表达式完成吗？如果是的话，有人可以写下确切的公式吗？这会节省我很多时间。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:49:49.210

好吧，不是正则表达式，因为我看不出这有什么帮助，但这里有一个可以大大简化编码的函数：

```
<?php
function postvar($index){
   return isset($_POST[$index]) ? $_POST[$index] : '';
}

$bsdatA = postvar('bsdat_a'); 
```

顺便说一句，我会`postvar('bsdat_a')`直接使用，而不是将结果放入变量中，因为您可能会遇到很多变量，而您只会使用一次。如果您绝对确定要将`$bsdatA`and`$bsdatB`作为局部变量，那么我建议使用循环：

```
<?php
foreach( range('A', 'Z') as $current ) {
   ${'bsdat'.$current} = postvar('bsdat_'.strtolower($current));
} 
```

但是，那只是可怕:)

**编辑**：啊，你在谈论一个现有的脚本，你想改变它以包含很多 isset() 调用？抱歉，我没有意识到这一点。

您可以将 $_POST 替换为实现 ArrayAccess 的对象。这样，您还可以记录被调用但未使用的 POST 变量：

```
<?php
class PostVars implements ArrayAccess {
    protected $vars;
    public $log;

    public function __construct($vars) {
        $this->vars = $vars;
    }

    public function offsetGet($offset) {
        if(!isset($this->vars[$offset])) {
            $this->log[] = $offset;
        }
        return $this->vars[$offset];

    }

    public function offsetExists($offset) {
        return isset($this->vars[$offset]);
    }

    public function offsetSet($offset, $value) {
        // readonly.
    }

    public function offsetUnset($offset) {
        // readonly.
    }
}

$_POST = array('bsdat_a' => 'bar', 'bsdat_b' => null);

$_POST = new PostVars($_POST);

echo $_POST['bsdat_a'];
echo $_POST['bsdat_b']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:53:27.297

我假设您正在尝试使用支持 Regex Replaces 的 IDE 更改代码：

这是 Eclipse 的正则表达式：

寻找：

`\$(\w+) = \$_POST\['(\w+)'\]`

代替：

`$1 = isset(\$_POST['$2']) ? \$_POST['$2'] : '';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:48:10.830

为 POST 变量尝试以下操作：[import_request_variables('p');](http://php.net/manual/en/function.import-request-variables.php) 为了安全起见，最好在第二个参数中添加前缀。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:47:44.480

```
$result = preg_replace('/\$(\w+)\s+=\s+\$_POST\[\'([^\']+)\'\];/', 
            '$\1 = isset($_POST[\'\2\']) ? $_POST[\'\1\'] : \'\';', $subject); 
```

# sql - 我应该如何在存储过程的虚拟表中声明自增变量

> ID：12529873
> 
> 赞同：8
> 
> 时间：2012-09-21T11:42:25.440
> 
> 标签：sql, auto-increment

我有一个这样的存储过程

```
create procedure onedata

as

begin

declare @input_data table (Id int NOT NULL AUTO_INCREMENT, name varchar(500) . .... )

insert into @input_data .....
....

end 
```

但我无法将 Id 声明为**AUTO_INCREMENT**。它显示了一些错误。
请提出一些解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-21T11:51:57.010

这取决于您使用的 SQL 的种类。

对于 SQL 服务器

```
 declare @input_data table (Id int NOT NULL identity(1,1), name varchar(50)) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T11:52:11.487

根据您的语法，我猜您正在使用 SQL Server。如果是这样，请使用`identity`而不是`auto_increment`：

```
declare @input_data table (Id int primary key identity, ... ) 
```

# xcode - PushViewController 用于单击按钮

> ID：12529877
> 
> 赞同：0
> 
> 时间：2012-09-21T11:42:43.550
> 
> 标签：xcode, button, pushviewcontroller

PushViewController 用于单击按钮

这是我的代码：

```
ViewController.h

import < UIKit/UIKit.h>

@interface StaffLoginViewController : UIViewController
@property (retain, nonatomic) IBOutlet UITextField *StaffUsername;
@property (retain, nonatomic) IBOutlet UITextField *StaffPassword;
- (IBAction)LoginClicked:(id)sender;
@property (nonatomic, retain) NSArray *arrayLogin;
- (IBAction)ResignKeyboardClicked:(id)sender;

@end

ViewController.m

- (IBAction)LoginClicked:(id)sender{

ViewController *view = [[ViewController alloc] initWithNibName:@"ViewController"     bundle:nil];
[self presentModalViewController:view animated:YES];
} 
```

我只有 modalViewController 的代码。请帮忙！谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:18:02.580

代替

```
[self presentModalViewController:view animated:YES]; 
```

你应该使用

```
[self.navigationController pushViewController:view animated:YES]; 
```

但是，但是，但你也应该有 NavigationController，例如

AppDelegate.m ......

```
StaffLoginViewController *vc = [[StaffLoginViewController alloc] init];
self.navController = [[UINavigationController alloc] initWithRootViewController:vc];
self.window.rootViewController = self.navController;
[self.window makeKeyAndVisible]; 
```

…………

# php - 如何在 csv 压缩文件后创建文件 csv 并将文件 zip 保存在服务器上

> ID：12529878
> 
> 赞同：2
> 
> 时间：2012-09-21T11:42:51.897
> 
> 标签：php

我想在压缩这个文件 csv 后创建一个文件 csv 并将文件 zip 保存在服务器上。我编码为：

```
 foreach($list as $item)
        { 
            $csv .= join("\t", $item)."\r\n"; 
        }  

        $csv = chr(255).chr(254).mb_convert_encoding($csv,"UTF-16LE","UTF-8");

        header("Content-type: application/x-msdownload");
        header("Content-disposition: csv; filename=CSV_".date("YmdHis").".csv; size=".strlen($csv));

        $zip = new ZipArchive();
        $zip_name ="CSV_".$dateTimeNow.".zip"; // Zip name
        if($zip->open($zip_name, ZIPARCHIVE::CREATE)!==TRUE)
        {                         
              $error .= "* Sorry ZIP creation failed at this time";
        }
        $zip->addFile($csv);
        $zip->close(); 
```

文件 csv 已创建好，但 zip 文件和保存文件仍未成功。你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:02:04.617

它不成功，因为`$zip->addFile`需要一个文件但`chr(255).chr(254).mb_convert_encoding($csv,"UTF-16LE","UTF-8")`已返回

这是解决方案

```
$csv = "ABC" ; // Define CSV to avoid notice error 
$csv = chr(255).chr(254).mb_convert_encoding($csv,"UTF-16LE","UTF-8");

header("Content-type: application/x-msdownload");
header("Content-disposition: csv; filename=CSV_".date("YmdHis").".csv; size=".strlen($csv));

$file_name =  "abc.csv";
file_put_contents($file_name, $csv); // dump csv to temp file 

$zip = new ZipArchive();
$zip_name = "CSV.zip" ; // Zip name
touch($zip_name);

if ($zip->open($zip_name) === TRUE) {
    $zip->addFile($file_name); // add the temp file to zip
    $zip->close();
} else {
     $error .= "* Sorry ZIP creation failed at this time";
}

unlink($file_name); // remove temp csv 
```

# jquery - 模式对话框中的关闭按钮

> ID：12529880
> 
> 赞同：0
> 
> 时间：2012-09-21T11:42:56.723
> 
> 标签：jquery

我使用了以下正常工作但我需要一个关闭按钮而不是自动关闭如何做到这一点？

```
$(document).ready(function() { 
     $('#app').click(function() { 
         $.blockUI({ 
             theme:     true, 
             title:    'Welcome to your page', 
             message:  '<p>Please have a look..</p>', 
             timeout:   2000 
        }); 
    });    
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T13:10:31.657

```
$(document).ready(function() { 
     $('#app').click(function() { 
         $.blockUI({ 
             theme:     true, 
             title:    'Welcome to your page', 
             message:  $('#message')
        }); 
    });

   $('.close').click(function() {
       $.unblockUI(); 
        return false; 
   });    
}); 
```

并将以下内容放入html内容中。

```
<div id="message" style="display:none;">
    <p>Please have a look..</p><button class="close">close</button>
</div> 
```

# php - 在生产/发布服务器上断言性能

> ID：12529887
> 
> 赞同：1
> 
> 时间：2012-09-21T11:43:36.070
> 
> 标签：php, assert

我想知道在`ASSERT_ACTIVE`设置为 0 ( `assert_options(ASSERT_ACTIVE, 0);`.

例如，如果我有一个包含大量断言的大型项目，它会比不存在这些断言的情况慢吗？在大多数语言上，这两种情况之间没有任何区别，但我认为这是因为它们是编译的，而不是像 PHP 那样即时执行。

如果没有性能差异，是否可以创建类似于`assert`PHP 中的函数，以便在未设置标志/变量时，完全忽略对该函数的所有调用？（这样的功能可用于使开发/调试更容易，但在已启动的网站上没有任何价值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:12:09.100

对性能的影响并不大……随心所欲地使用它。

创建一个类似的函数，在未设置标志时忽略调用......见下文。

```
define('ASSERT_ENABLED', true);

function assertEquals($a, $b)
{
    if( !defined('ASSERT_ENABLED') || !ASSERT_ENABLED ) { 
        return;
    }

    if($a !== $b) { 
        throw new \RuntimeException("Failed asserting that $a === $b");
    }
} 
```

# jquery - jQuery同位素奇怪的行为

> ID：12529888
> 
> 赞同：0
> 
> 时间：2012-09-21T11:43:47.820
> 
> 标签：jquery, html, css, responsive-design, jquery-isotope

我正在使用一个使用 jQuery 同位素对投资组合项目进行排序的 Wordpress 模板，我喜欢同位素效果。

我面临的一个问题是，当我调整窗口大小时，插件会调整框的大小并奇怪地移动它们。

我正在分析脚本和日志，但找不到问题所在。

我将感谢您的帮助或解决此问题的想法。

[http://uniteworks.com/jquery.isotope.html](http://uniteworks.com/jquery.isotope.html)

谢谢

# asp.net-mvc-3 - 在 MVC3 中使用 [授权]

> ID：12529892
> 
> 赞同：0
> 
> 时间：2012-09-21T11:44:14.237
> 
> 标签：asp.net-mvc-3

大家好，我使用过 [Authorize]，但是当重定向到登录视图时，我可以登录任何用户名或密码，那么问题是什么，并且还要检查用户是否登录？

```
public ActionResult Login()
        {
            return View();
        }
        [HttpPost]
        public ActionResult Login(Panel model, string Username, string Password)
        {
            if (ModelState.IsValid)
            {
                if (model.Username == Username && model.Password == Password)
                {
                    FormsAuthentication.SetAuthCookie(model.Username, false);
                    return RedirectToAction("Index", "Test");
                }
                else
                {
                    ModelState.AddModelError("", "Wrong username or password");
                }
            }
            return View();
        }

        [Authorize]
        public ActionResult Index()

        {

            return View();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:58:12.487

以下测试是错误的，它将始终返回 true：

```
if (model.Username == Username && model.Password == Password) 
```

Panel 模型的`Username`和属性是从请求中绑定的，并且具有与和参数`Password`相同的值。`Username``Password`

您应该根据某个数据库或其他东西检查用户名和密码。例如，如果您使用 Membership 提供程序：

```
[HttpPost]
public ActionResult Login(Panel model)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.Username, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.Username, false);
            return RedirectToAction("Index", "Test");
        }
        else
        {
            ModelState.AddModelError("", "Wrong username or password");
        }
    }
    return View();
} 
```

# neural-network - 神经网络训练。只有少数结果

> ID：12529893
> 
> 赞同：3
> 
> 时间：2012-09-21T11:44:15.663
> 
> 标签：neural-network, encog

我有一个网络，它有 3 个输入、2 个隐藏层（每个 6 个神经元，Sigmoid 激活函数）和一个神经元作为输出。我希望我的网络是连续的，因为我不是在看分类网络（希望这是有道理的）。

我的输入代表一年中的天数（0-365 范围）。我实际上将它们标准化为 0-1 范围（因为 sigmoid）。

我的问题如下：无论训练误差多么小，重用训练集时的实际值都不正确。根据我运行的时期数，我得到不同的结果。

如果我训练我的网络超过几千次，我只会得到两种可能的结果。如果我少训练它，我会得到更多可能的结果，但这些值与我的预期相去甚远。

我已经读过对于连续网络，最好使用两个隐藏层。

我不确定我做错了什么。如果您能提供任何帮助，那就太好了。如果您需要更多详细信息，请告诉我。

谢谢

**更新 1**

我减少了训练集中的元素数量。这次网络在少数时期内收敛。以下是训练错误：

* * *

培训网络

* * *

迭代#1。错误：0.0011177179783950614

迭代#2。错误：0.14650660686728395

迭代#3。错误：0.0011177179783950614

迭代#4。错误：0.023927628368006597

迭代#5。错误：0.0011177179783950614

迭代 #6。错误：0.0034446569367911364

迭代 #7。错误：0.0011177179783950614

迭代#8。错误：8.800816244191594E-4

* * *

最终错误：0.0011177179783950614

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T19:13:35.160

你的输出神经元应该有一个线性激活函数（而不是 Sigmoid）。线性激活函数的输出只是所有输入的加权和。

如果您在输出层使用线性激活函数，则不必再将输出目标值扩大到 0 和 1 之间。

关于层数……对于大多数问题，一个隐藏层通常就足够了，但它因问题而异，你只需要尝试不同的网络结构，看看哪种效果最好。

# c# - 使用 C# 和 xml 管理 flash 图片

> ID：12529894
> 
> 赞同：0
> 
> 时间：2012-09-21T11:44:19.437
> 
> 标签：c#, asp.net, xml, flash

我创建了一个图片幻灯片 Flash 并放入一个 C# 网站项目。

这是我的xml文件

```
<?xml version="1.0" encoding="UTF-8" ?>
<flash_parameters copyright="socusoftFSMTheme">
    <preferences>
        <global>
            <basic_property movieWidth="484" movieHeight="402" html_title="Title" loadStyle="Bar" startAutoPlay="true" continuum="true" socusoftMenu="false" backgroundColor="0x002780" hideAdobeMenu="false" photoDynamicShow="true" enableURL="false" transitionArray=""/>
            <title_property showTitle="true" photoTitleColor="0x000080" backgroundColor="0xffffff" alpha="50" autoHide="true"/>
            <music_property path="" stream="true" loop="true"/>
            <photo_property topPadding="0" bottomPadding="0" leftPadding="0" rightPadding="0"/>
            <properties enable="true" backgroundColor="0xffffff" backgroundAlpha="30" cssText="a:link{text-decoration: underline;} a:hover{color:#ff0000; text-decoration: none;} a:active{color:#0000ff;text-decoration: none;} .blue {color:#0000ff; font-size:15px; font-style:italic; text-decoration: underline;} .body{color:#ff5500;font-size:20px;}" align="top"/>
        </global>
        <thumbnail>
            <basic_property showPreview="true" backgroundColor="0x000000" backgroundAlpha="70" buttonColor="0xffffff" numberColor="0x000000" currentNumberColor="0xffffff"/>
        </thumbnail>
    </preferences>
    <album>
        <slide jpegURL="ethumb/t_0001.jpg" d_URL="slides/p_0001.jpg" transition="0" panzoom="1" URLTarget="0" phototime="2" title="t-shirt" width="484" height="402"/>
        <slide jpegURL="ethumb/t_0002.jpg" d_URL="slides/p_0002.jpg" transition="0" panzoom="1" URLTarget="0" phototime="2"  title="golf" width="484" height="402"/>
        <slide jpegURL="ethumb/t_0003.jpg" d_URL="slides/p_0003.jpg" transition="0" panzoom="1" URLTarget="0" phototime="2"  title="ball" width="484" height="402"/>
        <slide jpegURL="ethumb/t_0004.jpg" d_URL="slides/p_0004.jpg" transition="0" panzoom="1" URLTarget="0" phototime="2"  title="shoe" width="484" height="402"/>
        <slide jpegURL="ethumb/t_0005.jpg" d_URL="slides/p_0005.jpg" transition="0" panzoom="1" URLTarget="0" phototime="2"  title="apu" width="484" height="402"/>
</album> 
```

我粘贴在我的asp网站上的代码

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="704" height="402" id="tech">
          <param name="movie" value="flash home.swf?xml_path=home.xml" />
          <param name="quality" value="high" />
          <param name="wmode" value="opaque" />
          <param name="swfversion" value="6.0.65.0" />
          <object type="application/x-shockwave-flash" data="flash home.swf?xml_path=home.xml" width="704" height="402">
            <param name="quality" value="high" />
            <param name="wmode" value="opaque" />
            <param name="swfversion" value="6.0.65.0" />
          </object>
        </object> 
```

所以，我想允许用户在 <"album"> <"/album"> 之间插入一个新的 "<"slide">" 到 xml 文件中。

任何帮助将不胜感激。

对不起我的英语不好。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:51:44.840

您是否希望将此 XML 保存在您的服务器上，或者只是让用户临时将内容添加到加载到其 .swf 文件中的本地 XML 中？

如果您想将它保存在服务器上，您需要向您的网站（或 Flash 文件）添加某种功能，让用户上传图像（或链接到图像，无关紧要）。您需要在 XML 文件中添加一个元素，并且嵌入的 Flash 对象需要在收到来自服务器的响应后重新加载它。

如果您只想让用户摆弄他的本地 XML 副本，Flash 提供了用于处理 XML 数据的库。检查此[链接](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html)。

编辑：这是一个如何将元素添加到 XML 的示例。

```
// Load your XML into an XmlDocument
XmlDocument doc = new XmlDocument();
doc.Load("your file.xml");

// Create a new element and add attributes
XmlElement newElem = doc.CreateElement("slide");
newElem.SetAttribute("jpegURL", "ethumb/t_0001.jpg");
newElem.SetAttribute("d_URL", "ethumb/t_0001.jpg");
// etc...

// Add the new slide to your album element
doc.DocumentElement["album"].AppendChild(newElem);

// Save the file to your filesystem
doc.PreserveWhitespace = true;
XmlTextWriter wrtr = new XmlTextWriter("your file.xml", Encoding.Unicode);
doc.WriteTo(wrtr);
wrtr.Close(); 
```

# php - php中的多个复选框

> ID：12529895
> 
> 赞同：0
> 
> 时间：2012-09-21T11:44:20.547
> 
> 标签：php, mysql, html, checkbox

我有 4 个复选框，假设我只检查其中两个，即 user1 和 user3

```
<input type="checkbox" name="usersp[]" value="1" checked="checked" />User1 <br>
<input type="checkbox" name="usersp[]" value="2"/>User2 <br>
<input type="checkbox" name="usersp[]" value="3" checked="checked" />User3 <br>
<input type="checkbox" name="usersp[]" value="4"/>User4 <br> 
```

我的数据库中有两个字段（“User_id”，“Selected”），下面是我的插入代码

```
foreach($_POST['usersp'] as $user_id) {
  $sql = "INSERT INTO sel_users(`User_id`,`Selected`) VALUES('$user_id','')";
  $result = mysql_query($sql);
} 
```

我的问题是如何在“已选择”字段中插入已检查用户作为值 1 和其他作为值 0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:50:36.410

您将获得选中复选框的值，而不是未选中复选框的值。

使用本教程

[http://www.html-form-guide.com/php-form/php-form-checkbox.html](http://www.html-form-guide.com/php-form/php-form-checkbox.html)

[确定是否选中复选框 php $_GET](https://stackoverflow.com/questions/3488270/determine-whether-checkbox-is-checked-php-get)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:56:11.820

除非您已经知道它们，否则您无法知道（未选中的复选框）

只有这样才能让你的梦想成真

```
//YOUR USERS IDS
$userIDS=array('1','2','3','4');
//CHECKED USERS ARRAY
$checkedUsers=array('1','3');

if(!isset($_POST['usersp'])){
foreach($userIDS as $userID){
    //IF IT IN CHECK ARRAY, CHECK IT!
    $checked=(in_array($userID,$checkedUsers))?' checked="checked"':'';
    echo '<input type="checkbox" name="usersp[]" value="'.$userID.'"'.$checked.' />';
}
}

else{
    foreach($userIDS as $userID){
        //USER SELECTED OR NOT?
        $selected=(in_array($userID,$_POST['usersp']))?'1':'0';
        $sql = "INSERT INTO sel_users(`User_id`,`Selected`) VALUES('$user_id','$selected')";
        $result = mysql_query($sql);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T12:01:33.993

`Checkbox`给出`Checked`同名元素的值.

因此，在您给出的示例中，您将不会获得未经检查的值。

但是如果你给每个复选框一个不同的名字，那么你可以实现你想要的： -

```
<input type="checkbox" name="usersp1" value="1" checked="checked" />User1 <br>
<input type="checkbox" name="usersp2" value="2"   />User2 <br>
<input type="checkbox" name="usersp3" value="3" checked="checked" />User3 <br>
<input type="checkbox" name="usersp4" value="4"   />User4 <br> 
```

在 PHP 方面

```
for($i=1;$i<5;$i++){
    if(isset($_POST['usersp'.$i]){
         $sql = "INSERT INTO sel_users(`User_id`,`Selected`) VALUES('$user_id','1')";
         $result = mysql_query($sql);
    }
    else{
        //Somehow you still have to get other User_id's in another way.
    }
} 
```

现在，您可以在其他地方获取未选择的用户 ID 表单，您可以将其放入 else 条件中。您可以使用 Ajax + JS 或 JQuery 来提交表单，而不是使用默认的 HTML 提交，这样您就可以使用另一个名称为未选中的值提供服务，并在 PHP 中相应地处理它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-01T15:27:17.047

为我工作，将选中和取消选中的值保存到 mysql

HTML：

```
<form method="post" action="jawab25.php">
<input type="hidden" name="check_lista[]" value="<?php echo $r["id"]?>">
<input type="checkbox" name="check_listb[]" value="<?php echo $r["id"]?>">
<input value="Check" type="Submit"> 
```

jab25.php：

```
 foreach($_POST['check_lista'] as $itema){
        $string="update trans set ck='N' where id='$itema'";
        $tampil=mysql_query($string);
    }

    foreach($_POST['check_listb'] as $itemb){
        $string="update trans set ck='Y' where id='$itemb'";
        $tampil=mysql_query($string);
    } 
```

# c# - C# > UPnP - COMException：PerUser 订阅的所有者未登录到指定的系统（来自 HRESULT 的异常：0x80040210）

> ID：12529906
> 
> 赞同：2
> 
> 时间：2012-09-21T11:44:59.197
> 
> 标签：c#, .net, visual-studio-2010, upnp, comexception

我正在尝试使用 UPnP 协议使用 C#.net 应用程序与兼容 dlna 的设备进行通信。我正在使用默认的 Visual Studio UPnP 库（“UPnP 1.0 类型库（控制点）”）。我列出了所有使用 UPNPDeviceFinder.FindByType 的渲染设备。一切正常...

现在我使用以下函数获得 AVTransport 服务：

```
 public UPnPService GetAVTransport(UPnPDevice mediaDevice)
    {
        foreach (UPnPService service in mediaDevice.Services)
        {
            Debug.Print(service.ServiceTypeIdentifier);
            if (service.ServiceTypeIdentifier == "urn:schemas-upnp-org:service:AVTransport:1")
            {
                return service;
            }
        }

        return null;
    } 
```

我尝试向这样的设备发送播放命令：

```
 Service = GetAVTransport(Device);

    object[] input = new object[2]
    {
        "0", // Object Id
        "1" //  Speed
    };

    object output = new object();

    Service.InvokeAction("Play", input, ref output); 
```

在最后一行，我收到以下错误：

> COMException：PerUser 订阅的所有者未登录到指定的系统（来自 HRESULT 的异常：0x80040210）

这是什么意思。完全不清楚为什么会发生此异常。

谢谢，托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T19:27:47.620

COM 试图通过提供最近的已知文本消息来提供帮助，但它反而让您感到困惑。问题是您的 HRESULT 设施代码是 004，这意味着 FACILITY_ITF 意味着任何 COM 接口方法。正如 Microsoft [COM 错误代码文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms690088%28v=vs.85%29.aspx)中明确指出的那样：

> 从两个不同接口返回的具有完全相同的 32 位值的两个 HRESULT 可能具有不同的含义

代码 210 表示每个接口的不同含义。COM 选择了与 UPnP 完全无关的[EVENT_E_PER_USER_SID_NOT_LOGGED_ON 。](http://msdn.microsoft.com/en-us/library/cc704587%28v=prot.10%29.aspx)它应该只告诉你代码，或者足够聪明地知道在 UPnP 中它意味着[UPNP_E_ACTION_REQUEST_FAILED](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382237%28v=vs.85%29.aspx)。我从 Windows C++ SDK 中找到了代码映射`UPnP.h`，不知道 C# 在哪里寻找它。对于任何进一步的 COM 异常，请忽略该文本，只需在您刚刚调用的 UPnP 方法特定的错误列表中查找代码。同样的代码在不同的 UPnP 方法的范围内可能有一点不同的含义。

现在谈谈设备上请求失败的原因。我敢打赌你没有调用任何`SetAVTransport`动作，所以设备根本不知道要播放什么，它的*TransportState*是 NO_MEDIA。如果您还不想学习如何`AVTransport`正确使用服务，只想看看您的 MediaRenderer 神奇地做某事，请尝试`RenderingControl`服务。操作`SetMute`并且`SetVolume`应该肯定存在，设置 RGB 级别也很有趣，但您的特定渲染器设备可能不提供。

如有疑问，请使用强大的[Intel Developer Tools](http://opentools.homeip.net/dev-tools-for-upnp) DeviceSpy 。

# html - 使用float和div时如何定位？

> ID：12529910
> 
> 赞同：1
> 
> 时间：2012-09-21T11:45:08.067
> 
> 标签：html, css

我在用：

```
 <div class="class1">Image</div>
 <div class="class2">Image</div>
 <div class="class3">Image</div>
 <div class="class4">Image</div> 
```

我使用图像作为背景，它们都应该在同一行（所有图像）。我正在使用`float:left`其中两个图像`float:right`。但是当浏览器调整大小时，我的问题就开始了。所有图像将在不同的行中混乱。

任何帮助都会受到重视。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:54:56.773

最好将**min-width**定义为父 DIV。

例如这样写：

```
.parent{
    overflow:hidden;
    min-width:800px;
}
.parent > div{
    width:200px;
    height:100px;
    background:red;
}
.class1,.class2{float:left}
.class3,.class4{float:right} 
```

检查这个[http://jsfiddle.net/nRhed/](http://jsfiddle.net/nRhed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:55:03.927

你的问题不清楚。

如果您希望所有四个 div（以及为什么使用 div 而不是 <img>？）保持连续，并且如果浏览器窗口太小则不换行到下面的行，那么您可以尝试（假设200px 的图像宽度 - 为简单起见，使用样式而不是类 - 这不适合部署！）：

```
<div style="width:800px">
  <div class="class1">Image</div>
  <div class="class2">Image</div>
  <div class="class3">Image</div>
  <div class="class4">Image</div>
</div> 
```

这将强制容器 div 足够宽以连续包含所有四个图像。但是，如果浏览器的宽度不足以显示它们，您将看到一个水平滚动条（从用户体验的角度来看，这并不好）

或者，使用您当前的 HTML，然后将它们全部浮动。如果调整浏览器窗口的大小，则最后一张图片将放在下一行，并且 div 应保持相同的顺序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:59:12.053

Your question is not clear. As far as I understood it. Check these properties `max-width`,`min-width`, `max-height` and `min-height`. These properties are friends forever to a web designer because these will keep web layout steady. [click here to learn more about them.](https://developer.mozilla.org/en-US/docs/CSS/max-width). If we give answer to you, you will not understand the deep concept of their use. Try to give close values to max and min properties.

# iphone - 颜色 UIImage 就像颜色挥霍应用程序

> ID：12529921
> 
> 赞同：0
> 
> 时间：2012-09-21T11:45:34.407
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiimage

如何使用用户的手指触摸来更改 UIImage 的颜色，就像在颜色挥霍应用程序中一样？我能够将图像转换为灰度，但是当用户触摸图像时，它应该显示其原始颜色。怎么做？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:00:47.317

您可以将手势添加到您的 UIImage

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
[tapRecognizer setNumberOfTapsRequired:1];
[tapRecognizer setDelegate:self];
[yourImageView addGestureRecognizer:tapRecognizer]; 
```

或者你可以通过 touchesBegan 和 touchesEnde 方法来检测触摸是否在你的 imageRect 内

这是一个小教程。

[http://www.ioslearner.com/tag/uigesturerecognizer-tutorial/](http://www.ioslearner.com/tag/uigesturerecognizer-tutorial/)

我希望它对你有帮助！干杯！！

# javascript - Javascript函数说明

> ID：12529922
> 
> 赞同：1
> 
> 时间：2012-09-21T11:45:39.597
> 
> 标签：javascript, validation, keyboard

我掌握了这段 JavaScript 代码，它可以验证文本框以接受键盘上的数字按键。

```
function Numeric(evt)
{
    var charCode = (evt.which) ? evt.which : event.keyCode;
        if (charCode > 31 && ( charCode < 48 || charCode > 57))
        {
            document.getElementById("span").innerHTML = "Numbers Please!";
            alert("numbers only pls");
            return false;
        }
        else
        {
            document.getElementById("span").innerHTML = "";
            return true;
        }
} 
```

HTML`Number:<input type="text" id="num" name="num" onkeypress="return Numeric(event)" /><span id="span"></span><br />`这很好用，但我有两个问题：

(1)。我可以清楚地解释这部分代码中发生了什么吗？

`function Numeric(evt) { var charCode = (evt.which) ? evt.which : event.keyCode; if (charCode > 31 && ( charCode < 48 || charCode > 57))`

(2)。这段代码对各种键盘都有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:57:27.187

```
var charCode = (evt.which) ? evt.which : event.keyCode; 
```

这会将“charCode”设置为触发事件的按键的数字 keyCode。它检查是否设置了 evt.which，如果没有设置，则使用 evt.keyCode。这是为了支持不同浏览器上的不同实现

这在此处进一步讨论：[Javascript .keyCode vs. .which？](https://stackoverflow.com/questions/4471582/javascript-keycode-vs-which)

```
if (charCode > 31 && ( charCode < 48 || charCode > 57)) 
```

这会检查按下的键是否为数字，即 keyCode 介于 48 和 57 之间。

我想不出任何理由它不适用于所有键盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:48:02.967

> 是的，此代码应在所有类型的键盘上有效这将检查输入的字符是否为数字，其 ASCII 值是否介于 31 和 48 之间且不大于 57 表示介于 (48 和 57) 之间的数字，这是在按键时完成的被按下，键码被识别。请查看关键代码列表[http://www.ascii.cl/](http://www.ascii.cl/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:53:36.400

[http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000520.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000520.html) 从这里你可以得到那个 nuber Ascci 值代码只做一个帮助它得到 assci 值并回复你如果找不到 ascci 值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-17T11:02:14.417

```
var charCode = (eve.which) ? eve.which : eve.keyCode

                    if ((charCode==8)||(charCode==9)||(charCode > 36 && charCode < 45 )|| (charCode > 45 && charCode < 65)||(charCode>95)&&(charCode<106))
                    return true;
                     return false; 
```

# ruby-on-rails - 在 Mongoid 中保存时替换嵌入的文档

> ID：12529925
> 
> 赞同：2
> 
> 时间：2012-09-21T11:45:54.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我希望能够在保存时替换 MongoDB 对象中的整个嵌入文档集 - HTML 表单将包含整个新集。

我还希望它在保存之前验证所有内容 - 即不要丢弃旧文档，然后在添加时验证每个文档。

我想出了一个实现，但它并没有持续存在 - 没有一个新的嵌入式文档出现。一个额外的复杂性是涉及到继承。这是（简化的）我到目前为止的一组模型：

```
class Person
  include Mongoid::Document
  embeds_many :vehicles
end

class Vehicle 
  include Mongoid::Document
  embedded_in :person
end

class Car < Vehicle
end

class Motorbike < Vehicle
end 
```

为了弄清楚当用户提交表单时要实例化什么样的车辆，我在 Person 类中添加了这个方法：

```
def build_from_hash(hash)
   @vehicles= []
   hash.each do |idx, vehicle|
      if vehicle[:_type].constantize < Inclusion # Check for inheritance, for security
         self.vehicles.push vehicle[:_type].constantize.new(vehicle)
      end
   end
end 
```

并修改控制器来调用它：

```
def submit_build
  @person= current_user.persons.find(params[:id])
  @person.build_from_hash(params[:vehicles]) if params.has_key? :vehicles

  respond_to do |format|
    if @person.save # Also tried: @person.update_attributes(inclusions: @person.vehicles)
      format.html { redirect_to @person, notice: 'Person was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: "build" }
      format.json { render json: @person.errors, status: :unprocessable_entity }
    end
  end
end 
```

没有产生错误 - 页面重定向就像它已经工作一样，但是当我再次检查它时，没有嵌入文档。

使用 Rails 3.2.8、Mongoid 3.0.5、MongoDB 1.8.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:33:24.193

我想出了如何以更标准的 Rails 方式来做到这一点，尽管有一些特殊行为的解决方法。

简短的回答： Person 类需要`accepts_nested_attributes_for :vehicles`，我必须从控制器中删除所有自定义内容，用标准更新操作替换操作。但它不会接受`_type`Vehicle 子类的参数，除非 Rails 进程已经实例化了这些子类中的每一个的对象，所以我不得不使用这样的初始化程序来解决它：

```
Car.new
Motorbike.new 
```

长答案[在 Mongoid Google group 上](https://groups.google.com/forum/?fromgroups=#!topic/mongoid/_559EqtYnrE)。

# spring - 是否有 Spring Security 默认配置文件名？

> ID：12529926
> 
> 赞同：1
> 
> 时间：2012-09-21T11:45:57.167
> 
> 标签：spring, security

当 Spring 处理配置文件名时，有一些默认值......

*   在我的 web.xml 中注册 DispatcherServlet 时，Spring 默认查找名为`<servletname>`-servlet.xml的文件
*   在我的 web.xml 中注册 ContextLoadListener 时，Spring 默认查找文件名 applicationContext.xml

因此我问：当我使用 Spring Security 时，Spring 会查找默认文件名吗？还是我总是必须通过`<context-param> <param-name> contextConfigLocation </param-name>filename</param-value></context-param>`...手动配置它？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:58:22.550

Spring Security 没有自己的应用程序上下文，它使用由`ContextLoaderListener`(ie `applicationContext.xml`) 创建的应用程序上下文。

因此，您应该将 Spring Security 配置放入`applicationContext.xml`，或者，如果您想放入单独的文件，则需要从以下位置导入该文件`applicationContext.xml`：

```
<import resource = "security.xml" /> 
```

`applicationContext.xml`或在以下之外声明它`contextConfigLocatoion` `<context-param>`：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>applicationContext.xml, security.xml</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:48:44.770

Spring roo 这样做：

*   applicationContext.xml - 根上下文
*   applicationContext-security.xml - 安全配置
*   webmvc-config.xml - mvc/控制器等

# android - android：有没有办法通过它的值而不是它的键从共享首选项中删除一个字符串？

> ID：12529928
> 
> 赞同：5
> 
> 时间：2012-09-21T11:46:02.973
> 
> 标签：android, preferences, shared

和标题说的差不多。

我有一个复选框，选中它会将一个字符串放入共享首选项，当未选中时应该删除相同的字符串。

我想使用 editor.remove 但它要求一个键而不是一个字符串值，我似乎无法弄清楚...... id 将是：**`"recept" + (fav_popis.getInt("brojanje", 0) + 1)`**但这在字符串之间不起作用，后来用于创建一个列表视图！

```
editor.putInt("brojanje", fav_popis.getInt("brojanje", 0) + 1);

editor.putString("recept" + (fav_popis.getInt("brojanje", 0) + 1), s_product); 
```

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T14:49:54.160

使用您的复选框文本作为共享首选项文件的键。

```
 SharedPreferences prefs = context.getSharedPreferences(name, mode);
    SharedPreferences.Editor editor = prefs.edit();
    String key = checkbox.getText();

    if(checkbox.isChecked()) {
        editor.putString(key, null);
    } else {
        editor.remove(key);
    }
    editor.commit();

    // if you want to get all the list of checkboxes checked to show in listview
    Set<String> keys = prefs.getAll().keySet();
    for(String key : keys) {
        Log.d(TAG, key);
    } 
```

# javascript - 在高图表的饼图中显示百分比

> ID：12529934
> 
> 赞同：19
> 
> 时间：2012-09-21T11:46:18.727
> 
> 标签：javascript, highcharts

我想弄清楚是否可以在高图的实际饼项中显示每个饼项的百分比？我的意思的例子是这样的：

[https://developers.google.com/chart/interactive/docs/gallery/piechart](https://developers.google.com/chart/interactive/docs/gallery/piechart)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-21T12:34:43.123

你可能想看看 @ [`dataLabels.formatter`](http://api.highcharts.com/highcharts#plotOptions.pie.dataLabels.formatter)。`this.percentage`选项可用于馅饼

也[`dataLabels.distance`](http://api.highcharts.com/highcharts#plotOptions.pie.dataLabels.distance)可以将饼图中的 dataLabels 设置为负值。

[@jsFiddle 内带有百分比值的饼图](http://jsfiddle.net/jugal/uhydP/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-12T07:38:34.587

它非常容易。在您的工具提示或数据标签部分更改您的格式。

```
FROM:
  format: '<b>{point.name}</b>: {point.y:.1f} Rs.',
TO:
  format: '<b>{point.name}</b>: {point.percentage:.1f} %', 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-24T13:51:08.840

试试这个代码。这个对我有用：

```
 'labelFormatter':function () { 
       var total = 0, percentage; 
       $.each(this.series.data, function() { 
          total+=this.y; 
       }); 

       percentage=((this.y/total)*100).toFixed(1); 
       return this.name+' '+percentage+'%'; 
    } 
```

# mysql - MySQL产品配对

> ID：12529936
> 
> 赞同：1
> 
> 时间：2012-09-21T11:46:33.827
> 
> 标签：mysql, sql

我的系统存储来自许多不同电子商店的产品，我需要根据产品名称对产品进行配对。例如：

**INPUT：** MySQL 表产品

```
id | name                       | id_seller
1    porsche 911 red edition      1
2    red porsche 911 gt           2
3    icecream                     1 
```

**期望输出：**建议产品 1 与产品 2 相似。

在第一步中，仅就常用词的数量提出建议就足够了——在这个保时捷示例中，4 个词中的 3 个。

更复杂的解决方案将涉及比较单词的顺序，而不仅仅是它们的出现，但我想这不会是微不足道的。

是否可以仅使用 MySQL 查询及其内置函数或必须使用任何复杂的库/附加组件来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:21:54.387

这是一个[SQLFiddle 示例](http://sqlfiddle.com/#!2/88afe/3)，用于查找列中至少有一个常用词的产品对`name`：

```
select t.id id1, t.name name1, t1.id id2, t1.name  name2 from t
join t t1
where t.id<t1.id
      AND
      t.name regexp 
        CONCAT('([[:<:]]',
               REPLACE(
                   TRIM(t1.name),
                   ' ',
                   '[[:>:]]|[[:<:]]'
               ),
               '[[:>:]])'); 
```

如果您需要查找至少包含 N 个常用词的行，则应创建 tmp 表，将每行拆分为单词。[这是一个示例和执行此操作的存储过程](http://www.marcogoncalves.com/2011/03/mysql-split-column-string-into-rows/)。对于您的示例，此表如下所示：

```
id | name                       
1    porsche
1    911
1    red
1    edition      
2    red
2    porsche
2    911
2    gt           
3    icecream 
```

在这种情况下，您可以使用以下查询来查找具有至少 N 个常用词的 id（在这种情况下 N=3）：

```
select t1.id,t2.id,count(*)
from tmp t1,tmp t2
where t1.id<t2.id and t1.name=t2.name
group by t1.id,t2.id having count(*)>=3 
```

# python - python中带有箭头的简单二维表面？

> ID：12529938
> 
> 赞同：5
> 
> 时间：2012-09-21T11:46:36.263
> 
> 标签：python, canvas, rotation, tkinter, 2d

我以前没有在 python 中工作过。我需要做一个非常简单的 2d 表面，我可以在其中放置一个箭头，然后能够更改箭头的位置和角度。

我开始在 tkinter 中构建类似的东西，但据我了解，您无法旋转图像。据我了解，只有多边形可以旋转。将箭头绘制为多边形似乎有点过于复杂。

还有其他一些工具更适合这种简单的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T12:02:23.633

Tkinter 是完成如此简单任务的绝佳选择。您几乎可以肯定已经安装了它，并且[Canvas](http://effbot.org/tkinterbook/canvas.htm)小部件非常强大。它内置了绘制末端带有箭头的线条的功能，并且旋转非常直接。

不要让关于 Tkinter 的“常识”影响你——它是一个现代、稳定且非常易于使用的工具包。你不能用它创建下一个 Photoshop 或 iMovie，但对于大多数人和大多数应用程序来说，它是一个非常可靠、实用的选择。

这是一个快速而肮脏的例子：

```
import Tkinter as tk
import math

class ExampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        self.canvas = tk.Canvas(self, width=400, height=400)
        self.canvas.pack(side="top", fill="both", expand=True)
        self.canvas.create_line(200,200, 200,200, tags=("line",), arrow="last")
        self.rotate()

    def rotate(self, angle=0):
        '''Animation loop to rotate the line by 10 degrees every 100 ms'''
        a = math.radians(angle)
        r = 50
        x0, y0 = (200,200)
        x1 = x0 + r*math.cos(a)
        y1 = y0 + r*math.sin(a)
        x2 = x0 + -r*math.cos(a)
        y2 = y0 + -r*math.sin(a)
        self.canvas.coords("line", x1,y1,x2,y2)
        self.after(100, lambda angle=angle+10: self.rotate(angle))

app = ExampleApp()
app.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T12:06:44.623

您可能会查看视觉和/或 vpython。[http://www.vpython.org/](http://www.vpython.org/) Vpython 声称是为普通人设计的 3-d 编程。它基于我以前使用过的视觉效果，并且很容易上手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:54:40.863

wxPython GUI 工具包（无论如何都认为 AFAIK 比 TkInter 更好、更专业）为其 Image 类提供了一个旋转方法：[http](http://wxpython.org/docs/api/wx.Image-class.html) ://wxpython.org/docs/api/wx.Image-class.html 。

Python 图像库（不是 GUI 工具包，而是图像库）同样支持图像旋转：[http](http://effbot.org/imagingbook/image.htm) ://effbot.org/imagingbook/image.htm 。

# java - 如何在不创建新的情况下旋转位图？

> ID：12529941
> 
> 赞同：7
> 
> 时间：2012-09-21T11:46:36.073
> 
> 标签：java, android, image, bitmap, rotation

我正在使用它来`Bitmap`从现有的旋转：

```
private Bitmap getRotatedBitmap(Bitmap bitmap, int angle) {
        int w = bitmap.getWidth();
        int h = bitmap.getHeight();
        Matrix mtx = new Matrix();
        mtx.postRotate(angle);
        return Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, true);
    } 
```

是否可以在不创建新位图的情况下做到这一点？

我试图用以下方法重绘相同的可变图像`Canvas`：

```
Bitmap targetBitmap = Bitmap.createBitmap(targetWidth, targetHeight, config);
Canvas canvas = new Canvas(targetBitmap);
Matrix matrix = new Matrix();
matrix.setRotate(mRotation,source.getWidth()/2,source.getHeight()/2);
canvas.drawBitmap(targetBitmap, matrix, new Paint()); 
```

但这种方法刚刚导致位图损坏。那么有没有可能实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:52:39.473

这是画布代码上最简单的旋转，无需创建新的位图

```
canvas.save(); //save the position of the canvas
canvas.rotate(angle, X + (imageW / 2), Y + (imageH / 2)); //rotate the canvas
canvas.drawBitmap(imageBmp, X, Y, null); //draw the image on the rotated canvas
canvas.restore();  // restore the canvas position. 
```

# php - 重写一个链接，mod_rewrite

> ID：12529944
> 
> 赞同：2
> 
> 时间：2012-09-21T11:46:56.840
> 
> 标签：php, html, apache, mod-rewrite

例如，在商店中，我有类别和产品。类别形成为

```
localhost/categories.php?categoryid=*** 
```

其中 categoryid 可以是任何单词。

产品形成为

```
localhost/products.php?categoryid=***&productmanufactor=***&productname=*** 
```

where `categoryid`,`productmanufactor`也`productname`可以是任何词

所以我想从（示例）重写：

`localhost/car`除了`localhost/categories.php?categoryid=car`某些词（关于、联系人等）

和

```
localhost/car/audi/r8 
```

到

```
localhost/products.php?categoryid=car&productmanufactor=audi&productname=r8 
```

这怎么能轻松完成？

***htaccess***

```
RewriteEngine On
RewriteBase /
RewriteRule ^about$           about.php [NC,L]
RewriteRule ^contact$         contact.php [NC,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$            categories.php?categoryid=$1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:56:12.350

```
RewriteRule ^(.*)/(.*)/(.*)$  products.php?categoryid=$1&productmanufactor=$2&productname=$3 [NC,L]
RewriteRule ^about$           about.php [NC,L]
RewriteRule ^contact$         contact.php [NC,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$            categories.php?categoryid=$1 [NC,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:59:58.450

下面的代码可能会有所帮助。

```
RewriteEngine On
RewriteRule ^([^/]*)/([^/]*)/([^/]*)$ /products.php?categoryid=$1&productmanufactor=$2&productname=$3 [L]
RewriteRule ^([^/]*)$ /categories.php?categoryid=$1 [L] 
```

还要检查[http://www.generateit.net/mod-rewrite/](http://www.generateit.net/mod-rewrite/)我正在使用这个站点来生成 htaccess，它使用起来很简单。

# android - EditText：为突出显示设置背景颜色，然后将其删除

> ID：12529946
> 
> 赞同：0
> 
> 时间：2012-09-21T11:47:05.260
> 
> 标签：android

我想突出一个 EditText 的背景，一个简单的

```
editText.setBackgroundColor(Color.RED) 
```

为此目的很好。

但是，我找不到完全扭转这种情况的方法。

```
editText.setBackgroundColor(Color.WHITE) 
```

并且

```
editText.setBackgroundColor(Color.TRANSPARENT) 
```

完全改变控件的外观。之后不再看起来像一个，
而是变成一个纯白色的矩形，或者消失。`EditText``EditText`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:47:05.260

这是一个非常简单的任务，但陷阱在于设置背景颜色也会影响样式。将背景设置为一种颜色，没有办法用相同的方法将其设置回来。

我发现解决方案是

```
editText.setBackgroundResource(android.R.drawable.edit_text); 
```

这对我有用，之后 UI 元素的外观和行为与以前完全相同。

# php - 数组值比较，无论它们的位置如何，并在 php 中获取匹配值的计数

> ID：12529953
> 
> 赞同：0
> 
> 时间：2012-09-21T11:47:16.867
> 
> 标签：php, arrays

我想比较两个数组并想得到 PHP 中匹配的值的数量。例如

```
$a1 = array(one, two, three);
$a2 = array(two, one, three); 
```

如果我比较这些数组，我应该得到`0`不同的结果。谁能帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:51:50.023

```
$arr1 = array('one', 'two', 'three');
$arr2 = array('two', 'one', 'three');
echo "number of differences : " . count(array_diff($arr1, $arr2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:56:35.050

```
$a1 = array( 1, 2, 3, 4 );
$a2 = array( 2 , 1, 3, 8 );
$matched = array_intersect( $a1, $a2 );
var_dump( $matched ); 
```

这应该输出：

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
) 
```

array_intersect 将为您提供第二个中存在的所有元素或第一个数组 - 使用第一个数组的键

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:59:05.633

我希望这有帮助

```
$diff = count(array_diff($a1, $a2));
$matches = count($a1) - $diff; 
```

参考：[PHP数组比较](https://stackoverflow.com/questions/3541080/php-array-comparison)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:06:41.300

我为你做了一个简单的功能

此功能将为您提供重复和不重复的数据

我以国家为例

```
$contries1=array('egypt','america','england');
$contires2=array('egypt','england','china');
function countryRepeated($contries1,$contires2,$status='1'){
    foreach($contries1 as $country){
        if(in_array($country,$contires2))
            $repeated[]=$country;
        else
            $unrepeated[]=$country;
    }
        return ($status=='1')?$repeated:$unrepeated;
} 
```

要获得重复的国家使用

```
print_r(countryRepeated($contries1,$contires2)); 
```

**结果：**

```
Array ( [0] => egypt [1] => england ) 
```

或者，如果您想获得未重复的国家

**您可以使用：**

```
print_r(countryRepeated($contries1,$contires2,'2')); 
```

**结果：**

```
Array ( [0] => america ) 
```

# selenium - Selenium IDE 错误在 0 毫秒后超时

> ID：12529957
> 
> 赞同：0
> 
> 时间：2012-09-21T11:47:30.477
> 
> 标签：selenium, timeout, selenium-ide

我用 selenium 运行了各种测试......现在有一个问题是测试有时会给我 0ms 后超时的错误！有没有办法解决这个问题？我已经尝试了我所知道的一切......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:21:03.710

可能的问题是 selenium 无法定位 web 元素，这可能是由于不正确的 css 选择器或 xpath 或您定位 web 元素的其他方式引起的。尝试验证您是否在 firebug(ffox addon) 中正确定位了 web 元素您能否提供整个堆栈跟踪错误和一段 html 以及您尝试对其执行操作的元素。

# javascript - 让字符串调用JS中的函数

> ID：12529959
> 
> 赞同：1
> 
> 时间：2012-09-21T11:47:38.010
> 
> 标签：javascript

我希望这个工作：

我定义了一个函数：

```
function callback_1() {
 // Do something
} 
```

我有一个定义回调的回调字符串：

```
var functionString = 'callback_' + 1 + '()'; 
```

我想让那个字符串真正调用函数`callback_1`我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T11:49:07.237

由于您`functionString`实际上主要是一个函数的名称，因此您可以这样做

```
window['callback_' + 1](); 
```

这比`eval`它只执行您尚未拥有的功能要安全得多。

如果你想使用`functionString`你拥有的（最后是“（）”），你可以使用

```
window[functionString.slice(0, -2)](); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:49:18.837

试试这个：它对我有用

```
 eval(functionString); 
```

# c - 最大直径汽车机动

> ID：12529965
> 
> 赞同：0
> 
> 时间：2012-09-21T11:47:52.050
> 
> 标签：c, algorithm

问题：

许多交通锥已放置在圆形跑道上，以形成障碍物。您被要求确定可以在路线上行驶的最大尺寸的汽车。为简单起见，假设圆锥的宽度为零，并且汽车是完美的圆形且可无限机动。轨道本身是两个同心圆之间的区域。

形式上，如果在轨道中心周围存在一个位于形成轨道的圆之间的闭环，并且该环上的每个点距每个圆锥至少 c 距离，则该路线可以由半径为 c 的汽车导航，并且轨道的每个边界。

我的方法：

找到每对点之间的距离，然后为集合中的每个点在同一集合中找到离它最近的点。让这个距离`dist[i]`为第 i 点，并与 比较`dist[i]`，`max((inner_radius-dist),(outer_radius-dist))`哪个更小是汽车的半径。

我对这个逻辑进行了编码，但我得到了错误的答案。我不确定我的算法是否正确。有人可以验证或建议更好的算法。

[编辑] 以下是中的代码~~`c++`~~ `c`

```
#include <stdio.h>
#include <math.h>

#define TEST_SIZE 500

/* This code is plain C so no need for this line:
using namespace std; */

int main(void) {
    int testCases, n;
    float x[TEST_SIZE], y[TEST_SIZE];//x[i], y[i] constitute pair (x,y) for ith point
    float distance, dist, min, r, R,radius;
    scanf("%d", &testCases);
    while ( testCases-- ) {
        scanf("%f%f%d", &r,&R, &n);
        //printf("r: %f, R: %f, n: %d\n", r, R, n);
        for (int i=0; i<n ; i++) {
            scanf("%f%f", &x[i], &y[i]);
        }
        for(int i=0; i<n; ++i) {
            for(int j=0; j<n; ++j) {
                if (j!=i) {
                    dist = ((x[i]-x[j])*(x[i]-x[j])) + ((y[i]-y[j])*(y[i]-y[j]));// rhs of this equation is square of distance between 2 points
                    if(j==0 || dist>min) {
                        min=dist;
                    }
                //  printf("dist: %f\n", dist);
                }
            }
            min=sqrt(min);
            radius=sqrt((x[i]*x[i]) + (y[i]*y[i]));
            if(radius-r > R-radius) {
                if(min>radius-r) {
                min=radius-r;
                }
            } else {
                if(min>R-radius) {
                    min=R-radius;
                }
            }
            if(i==0 || distance>min) { 
                distance = min;
            }
        }
                    distance = floorf(distance*1000 + .5)/1000;
        //printf("distance: %f\n", distance);
        printf ("%f\n", distance);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:27:36.053

你的算法不正确。考虑一个测试用例，其中只有两个彼此非常接近的锥体（它们的距离几乎为 0）。您的算法会错误地将直径计算为这些点之间的距离。然而，实际直径可能接近圆形轨道的宽度。你必须考虑点的全局结构来解决这个问题。

编辑：汽车采取的任何轨迹都将点和圆圈分成两组：出现在左侧的那些和出现在右侧的那些。请注意，内圈始终位于左侧，而外圈始终位于右侧。令两个集合之间的距离是属于它们的任意两个点之间的最小距离。然后你必须找到这些点的一个分区（其中左右圆圈属于不同的部分），以最大化它的两个部分之间的距离。这样的划分可以通过计算点和圆的最小生成树并在树中找到将左圆与右圆分开的最大边来获得。

# c# - 基于泛型约束的方法重载？

> ID：12529966
> 
> 赞同：18
> 
> 时间：2012-09-21T11:47:52.243
> 
> 标签：c#, generics

我可以以某种方式拥有仅因泛型类型*约束*而不同的重载方法吗？

这不会编译：

```
 void Foo<T>(T bar) where T : class
    {

    }

    void Foo<T>(T bar) where T : struct
    {

    } 
```

由于这些是“开放”方法，因此当在代码中的其他地方使用具体类型引用实际方法时，它应该是关闭/构造/完全定义的`T`，然后就会清楚要调用哪个重载。

显而易见的解决方案是不要重载它们，但我想知道为什么这在 C# 中不起作用？

附加问题：如果这只是 C# 编译器约束，IL 是否允许这样的重载？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T11:53:09.613

> 我可以以某种方式拥有仅因泛型类型约束而不同的重载方法吗？

不。就重载而言，它不是方法签名的一部分，就像返回类型不是一样。

在某些情况下，有一些[*可怕*](http://codeblog.jonskeet.uk/2010/11/02/evil-code-overload-resolution-workaround/)的“伪重载”方式，但我不建议走这条路。

有关更多信息，您可能需要阅读：

*   [我关于该主题的博客文章](http://codeblog.jonskeet.uk/2010/10/28/overloading-and-generic-constraints/)
*   [Eric Lippert 关于该主题的博文](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T11:53:17.587

这是不可能的。

出于重载的目的，一般约束不被视为方法签名的一部分。

如果你想同时允许值类型和引用类型，为什么要限制呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-23T13:14:44.027

更新。在 C# 7.3 中，通用约束现在是重载决策的一部分。

所以，这段代码将编译：

```
class Animal { } 
class Mammal : Animal { } 
class Giraffe : Mammal { }
class Reptile : Animal { } 

static void Foo<T>(T t) where T : Reptile { }
static void Foo(Animal animal) { }
static void Main() 
{ 
    Foo(new Giraffe()); 
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-07-28T02:43:57.620

```
struct _Val_Trait<T> where T:struct { }
struct _Ref_Trait<T> where T:class { }

static void Foo<T>(T bar, _Ref_Trait<T> _ = default(_Ref_Trait<T>)) where T:class
{
    Console.WriteLine("ref");
}

static void Foo<T>(T bar, _Val_Trait<T> _ = default(_Val_Trait<T>)) where T:struct
{
    Console.WriteLine("val");
}

static void Main() 
{
    Foo(1);            // -->"val"
    Foo(DateTime.Now); // -->"val"
    Foo("");           // -->"ref"

    //but:
    //Foo(null); - error: type cannot be inferred
} 
```

# algorithm - 在 32 位机器上搜索大于 4GB 的图

> ID：12529969
> 
> 赞同：0
> 
> 时间：2012-09-21T11:48:09.977
> 
> 标签：algorithm, data-structures, graph, 32-bit, large-data

我有一个略大于 4GB 的图表，比我在 32 位机器上可以处理的还要大。

我想编写一个程序来计算连接（直接和间接）到图中特定节点的顶点数。

如果我不能一次将整个图表加载到内存/交换中，我该怎么办？

**编辑：**这是一个有向图，我实际上想计算我可以（在正确方向上）到特定顶点的顶点数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:53:16.503

这实际上取决于您如何存储图表。在许多情况下，您不必加载整个图表。例如，如果您的图形存储为邻接矩阵，您只需要提取一列/行，并且有很多方法可以有效地执行此操作，具体取决于矩阵的存储方式（例如固定长度的单元格或 HDF 文件） . 如果您的图表存储为带有指向其他节点的指针的节点列表，您有时可以只提取该节点的数据。底线，这取决于你如何存储你的图表，但它在许多表示下都是可行的。关键是必须将表示保存到磁盘上，这样就不必一次全部加载。

# c - 双指针实验二维数组

> ID：12529974
> 
> 赞同：0
> 
> 时间：2012-09-21T11:48:20.690
> 
> 标签：c, multidimensional-array, double-pointer

我正在尝试使用双指针实现二维数组。我试图实现的方法是根据其物理表示对其进行可视化。例如，考虑一个 2 x 2 矩阵，它的物理表示是

> ```
>  c1  c2 
> ```
> 
> R1 -> A00 A01
> R2 -> A10 A11

Step 1：创建指向第一行的双指针
Step 2：创建指向 c1 地址的一级指针
Step 3：用户输入
Step 4：创建指向 c2 地址的一级指针
Step 5：用户输入
第 6 步：将 Row 指针递增到点 R2
第 7 步：从第 2 步到第 5 步重复

下面是我实现的代码的代码片段：

```
int _tmain(int argc, _TCHAR* argv[])
{
    int **p,***temp;
    p = (int **)malloc(nRows*sizeof(int *)); 
                                //Allocating memory for two rows, now p points to R1
    temp = &p;   //storing the address of p to restore it after storing the values
    for(int i=0;i<nRows;i++)
    {

        for(int j=0;j<nCols;j++)
        {
            *(p+j) = (int *)malloc(sizeof(int)); 
                                 //Allocating memory for col , now *p points to C1
            scanf("%d",*(p+j));
        }
        p += 1;     // NOw p is pointing to R2
    }

    p = *temp;          // restoring the base address in p;
    for(int i=0;i<nRows;i++)
    {
        for(int j=0;j<nCols;j++)
            printf("%d",*(p+j));
                   // In first iteration print values in R1 and R2 in second iteration
        p += 1;     // points to the next row
    }

    getch();
    return 0;
} 
```

scanf 似乎工作正常。但是在 printf 我得到不稳定的结果。它开始指向其他位置

你能告诉我如何按照我之前所说的方式实现这个二维数组吗？我做这个练习是为了实验目的，只是为了深入了解双指针的工作原理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:02:00.827

这一行：

```
printf("%d",*(p+j)); 
```

实际上打印指向行的指针`j`（因为 p 指向行，而不是行元素）。您可以通过再次取消引用来修复它：

```
printf("%d",p[i][j])); 
```

并删除

```
 p += 1; 
```

从第二个循环。

此外，您的代码很难阅读，请尽量避免`***temp`每隔一行重新分配指针。

# iphone - 如何“刷新”Objective-C HTTP 会话 ID？（从 tumblr 强制注销）

> ID：12529983
> 
> 赞同：1
> 
> 时间：2012-09-21T11:48:58.853
> 
> 标签：iphone, ios, session, tumblr, logout

我制作了一个 Tumblr Oauth API，并为用户实现了一个取消链接功能。Tumblr 仍然保持登录状态的唯一问题。

我想以某种方式重置会话。我听说会话 ID 是由 Cocoa 自动处理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:53:32.177

会话 ID 可能存储在 cookie 中。使用`NSHTTPCookieStorage`类删除它：

```
 [[NSHTTPCookieStorage sharedHTTPCookieStorage] deleteCookie:cookie]; 
```

您可以通过使用找到会话 id 的 cookie

```
 NSArray *allCookies = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]; 
```

并迭代`allCookies`数组以查找匹配项`domain`和`path`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:56:22.750

是的，类似的，谢谢。为安全起见，刚刚添加了 tumblr cookie 的过滤器。

```
for (NSHTTPCookie *eachCookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies])
    if ([[eachCookie domain] hasSuffix:@"tumblr.com"])
        [[NSHTTPCookieStorage sharedHTTPCookieStorage] deleteCookie:eachCookie]; 
```

# opencl - 在 OpenCL 中使用大量常量全局内存

> ID：12529991
> 
> 赞同：1
> 
> 时间：2012-09-21T11:49:19.020
> 
> 标签：opencl

我开始在 OpenCL 中进行一些开发，我的首要目标之一是将包含大量数据的库移植到 OpenCL。

这个特殊的库包含大量（大约 20MB 内存）数组的原生 C 形式，这些数组的值是严格恒定的，以及一些允许用户提取的函数（有时还可以执行一些基本操作） ) 来自这些数组的值。

我将所有这些数组放在一个巨大的 C 源代码文件（大约 1M 行）中，我将其与函数的代码一起编译到库中。

我现在的问题是：是否有可能以某种方式将这个带有必要内存限定符的巨大文件编译成使用数据集和相关函数的 OpenCL 内核？同样，这些数组是恒定的，在执行期间不会更改。

提前感谢所有建议！

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:07:39.080

OpenCL 支持[constant memory](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/constant.html)，这正是您正在寻找的。它的工作方式类似于全局内存，尽管确切的位置可能因实现而异，并且它允许编译器以不同的方式优化事物，因为保证在内核执行期间不会修改内存。

您将创建此缓冲区，将其标记为只读并从主机可访问的数据中复制。然后你只需将它正常传递到内核中：

```
float[] hugeData = { ... };

void run_kernel() {
   // ...
   cl_mem cl_hugeData;
   hugeDataInOpenCL = clCreateBuffer(context, CL_MEM_READ_ONLY | CL_MEM_COPY_HOST_PTR, sizeof(hugeData), hugeData, &error);
   // ...
   clSetKernelArg(kernel, 0, sizeof(cl_hugeData), &cl_hugeData);
   // ...
}

__kernel void mykernel (__constant float * hugeData, ...) {
   // use hugeData however you want
} 
```

大概您希望为每个上下文创建一次缓冲区并重新使用它（就像您使用内核一样）以避免过多的返工。

此外，您的数据足够大，以至于某些设备可能没有足够的可用常量内存，在这种情况下，您可以回退到使用全局内存并将其标记为只读。（这意味着您的内核有两个版本，一个带有任一类型的参数。）在运行时检查`clGetDeviceInfo`并`CL_DEVICE_MAX_CONSTANT_BUFFER_SIZE`决定。

# ios - 使用 HTML 5 和 IOS 资产

> ID：12529993
> 
> 赞同：0
> 
> 时间：2012-09-21T11:49:38.800
> 
> 标签：ios, html, ios5, assets

我需要使用来自 HTML 5 的 IOS 的资产功能

在 Android 上，我使用类似这样的语法

文件：///android_asset/

是否有任何路径或方式可以像在 iOS 中那样使用 HTML 5 中的资产？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:19:34.907

要直接读取资产的路径：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"logo" ofType:@"png"]; 
```

`UIWebView`要在（从某些 HTML 引用）中使用捆绑包中的资产：

```
NSString *html = @"<img src='logo.png' />";
NSURL *bundleURL = [[NSBundle mainBundle] bundleURL]; 
[myWebView loadHTMLString:html baseURL:bundleURL]; 
```

[此处为NSBundle](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)和[此处为 UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)的文档。

# android - Honeycomb 及更高版本的网络问题

> ID：12529994
> 
> 赞同：0
> 
> 时间：2012-09-21T11:49:41.913
> 
> 标签：android, networking, android-3.0-honeycomb, android-4.0-ice-cream-sandwich

我正在为 android os 2.3 及更高版本编写一个聊天程序。我一直在关注一些示例，并让它与我在 OS 2.3.x 上的所有额外花里胡哨的东西完美配合。

我的问题来自 OS > 2.3.x 即蜂窝，特别是 ICS（我有一个用于测试的 ICS 设备）。

我无法发送（数据包）。它每次都会因错误而崩溃。这里指出的答案似乎是在服务中运行线程。

不幸的是，情况一直如此 - 我想打开额外的窗口并在将数据传递回主活动之前保持服务抓取数据，不管主窗口可能会打开另一个窗口 - 当您返回整个聊天历史记录时，包括你错过的一切。

任何人都可以指出我需要做什么才能在每次代码命中 OS 4.0（ICS）中的发送（数据包）时不释放错误？

提前致谢。服务的完整来源在这里。

```
package com.rpg.phg.themesh;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.net.DhcpInfo;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.os.Handler;
import android.os.IBinder;
import android.util.Log;

/**
 * This class does all the work for sending and receiving broadcast packets. 
 * It has a thread that listens for incoming packets.
 */
public class TheMesh_ChatService extends Service 
{
// Debugging
private static final String TAG = "TheMesh_ChatService";
private static final boolean D = true;
private static String myIP = null;

// Member fields
private final Handler mHandler;
private ComService mConnectedService;

Context mContext ;
/**
 * Constructor. Prepares a new Broadcast service.
 * @param context  The UI Activity Context
 * @param handler  A Handler to send messages back to the UI Activity
 */
public TheMesh_ChatService(Context context, Handler handler, String ourIP) {
    //mAdapter = BluetoothAdapter.getDefaultAdapter();
    mContext = context;
    mHandler = handler;
    myIP = ourIP;
}

/**
 * Start the chat service. Specifically start ComThread to begin 
 * listening incoming broadcast packets. 
 */
public synchronized void start() {
    if (D) Log.d(TAG, "Started Service");

    mConnectedService = new ComService();
    mConnectedService.start();
}

/**
 * Stop thread
 */
public synchronized void stop() {
    if (D) Log.d(TAG, "stop");
    if (mConnectedService != null) {mConnectedService.cancel(); mConnectedService = null;}
}

public void write(byte[] out, String IP) {
    mConnectedService.write(out, IP);
}

/**
 * This thread handles all incoming and outgoing transmissions.
 * 
 * This actually needs to be turned onto the TheMesh_ChatService
 */    
private class ComService extends Thread {
    // Should we create a Thread here? 
    // It *should* stay running until the service ends...
    private static final int BCAST_PORT = 2568;
    DatagramSocket mSocket ;

    InetAddress myBcastIP, myLocalIP, myRemoteIP = null ;

    public ComService() {

        try { 
               myBcastIP    = getBroadcastAddress();
               if(D)Log.d(TAG,"my bcast ip : "+myBcastIP);

               //myLocalIP  = getLocalAddress();
               myLocalIP =  InetAddress.getByName(myIP);
               if(D)Log.d(TAG,"my local ip : "+myLocalIP);

               mSocket      = new DatagramSocket(BCAST_PORT); 
               mSocket.setBroadcast(true); 

             } catch (IOException e) { 
                 Log.e(TAG, "Could not make socket", e); 
             } 
    }

    public void run() {

        try {

            byte[] buf = new byte[1024]; 

            //Listen on socket to receive messages 
            while (true) { 
                DatagramPacket packet = new DatagramPacket(buf, buf.length); 
                mSocket.receive(packet); 

                InetAddress remoteIP = packet.getAddress();
                if(remoteIP.equals(myLocalIP))
                    continue;

                String s = new String(packet.getData(), 0, packet.getLength()); 
                if(D)Log.d(TAG, "Received response " + s); 

                // Send the obtained bytes to the UI Activity
                mHandler.obtainMessage(TheMesh_PAN.MESSAGE_READ,-1,-1, s)
                .sendToTarget();
            } 
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
      * Write broadcast packet.
      */
    public void write(byte[] buffer, String IP) {

        try {
            String data = new String (buffer);
            if (IP.equalsIgnoreCase("ALL"))
            {
                DatagramPacket packet = new DatagramPacket(data.getBytes(), data.length(), 
                    myBcastIP, BCAST_PORT);
                mSocket.send(packet); // logcat shows crash here!
            } else
            {
                myRemoteIP = InetAddress.getByName(IP); // Will this generate Exceptions if lookup fails?
                DatagramPacket packet = new DatagramPacket(data.getBytes(), data.length(), 
                        myRemoteIP, BCAST_PORT);
                mSocket.send(packet); // and logcat shows crash here.
            }
            // Share the sent message back to the UI Activity
            mHandler.obtainMessage(TheMesh_PAN.MESSAGE_WRITE, -1, -1, data)
                    .sendToTarget();
        } catch (Exception e) {
            Log.e(TAG, "Exception during write", e);
        }
    }

    /** 
     * Calculate the broadcast IP we need to send the packet along. 
     */ 
    private InetAddress getBroadcastAddress() throws IOException {
      WifiManager mWifi = (WifiManager) mContext.getSystemService(Context.WIFI_SERVICE);

      WifiInfo info = mWifi.getConnectionInfo();
      if(D)Log.d(TAG,"\n\nWiFi Status: " + info.toString());

      // DhcpInfo  is a simple object for retrieving the results of a DHCP request
      DhcpInfo dhcp = mWifi.getDhcpInfo(); 
      if (dhcp == null) { 
        Log.d(TAG, "Could not get dhcp info"); 
        return null; 
      } 

      int broadcast = (dhcp.ipAddress & dhcp.netmask) | ~dhcp.netmask; 
      byte[] quads = new byte[4]; 
      for (int k = 0; k < 4; k++) 
        quads[k] = (byte) ((broadcast >> k * 8) & 0xFF);

      return InetAddress.getByAddress(quads); // The high order byte is quads[0].
    }  

    public void cancel() {
        try {
            mSocket.close();
        } catch (Exception e) {
            Log.e(TAG, "close() of connect socket failed", e);
        }
    }
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

这一切都按原样工作。大部分程序都取自“broadcastchat4”（对不起，我忘记了我是从哪个网站获得的）。我已经添加到它，尤其是调用程序。

一旦从 write 函数内部调用 send （在 run() 运行时调用它，因为它监视传入流量，而 write 处理传出流量），我在 logcat 中得到以下信息：

```
09-22 19:32:24.959: E/TheMesh_ChatService(17320): Exception during write
09-22 19:32:24.959: E/TheMesh_ChatService(17320): android.os.NetworkOnMainThreadException
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:175)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at libcore.io.IoBridge.sendto(IoBridge.java:463)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at java.net.PlainDatagramSocketImpl.send(PlainDatagramSocketImpl.java:182)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at java.net.DatagramSocket.send(DatagramSocket.java:287)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at com.rpg.phg.themesh.TheMesh_ChatService$ComService.write(TheMesh_ChatService.java:146)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at com.rpg.phg.themesh.TheMesh_ChatService.write(TheMesh_ChatService.java:69)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at com.rpg.phg.themesh.TheMesh_PAN.sendMessage(TheMesh_PAN.java:513)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at com.rpg.phg.themesh.TheMesh_PAN.access$11(TheMesh_PAN.java:494)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at com.rpg.phg.themesh.TheMesh_PAN$3.onKey(TheMesh_PAN.java:264)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.view.View.dispatchKeyEvent(View.java:5495)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:1246)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1879)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1361)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.app.Activity.dispatchKeyEvent(Activity.java:2324)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1806)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3327)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2597)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.os.Handler.dispatchMessage(Handler.java:99)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.os.Looper.loop(Looper.java:137)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at android.app.ActivityThread.main(ActivityThread.java:4424)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at java.lang.reflect.Method.invokeNative(Native Method)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at java.lang.reflect.Method.invoke(Method.java:511)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-22 19:32:24.959: E/TheMesh_ChatService(17320):   at dalvik.system.NativeStart.main(Native Method) 
```

关于如何使这个 ICS 工作的任何想法（实际上我怀疑它不会在蜂窝或更高版本上工作，因为网络更改似乎已合并到 v3+ 中）工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:07:41.230

不是 100% 确定的，因为我没有堆栈跟踪，但是：

的构造函数在`ComService`主线程（你必须抓住的也是一个强有力的指标。`new ComService()``InetAddress``IOException`

尝试将代码从构造函数移动到`run()`方法，它可能已经工作了。

顺便说一句：您实际上不应该在构造函数中执行网络或长时间运行的任务。只是简单的任务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T11:59:50.440

我已经在[这里](https://stackoverflow.com/questions/12400106/my-app-error-on-jelly-bean-simulator/12400177#12400177)回答了类似的问题，但无论如何，将以下代码添加到您的 oncreate() 中，您会没事的

```
 if (android.os.Build.VERSION.SDK_INT > 9)
         {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);
          } 
```

# javascript - 从 JSON 项构建 JSON 数组

> ID：12529995
> 
> 赞同：1
> 
> 时间：2012-09-21T11:49:42.327
> 
> 标签：javascript, ruby, json

客户端浏览器向服务器发送 JSON 数据，服务器将这些原始 JSON 信息（字符串）保存在一个`history`数组（Ruby 数组）中。当另一个用户请求此历史记录时，服务器将信息作为 JSON 数组发送。

我不能`history.to_json`在这里简单地使用，因为这会将数组中已经存在的 JSON 对象转换为 JSON 对象。

另一种方法是解析 JSON 数据并将该数据作为 Ruby 对象插入到数组中，然后在被询问时将整个数组转换为 JSON，但这似乎浪费了解析接收到的数据，以便我以后可以再次将其转换为 JSON。

我一直在寻找 Ruby 的 JSON 构建器，但找不到。有人有提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:31:58.423

如果您将 JSON 字符串传回给客户端，您能否不只是将字符串传回并使用`JSON.parse`方法在 javascript 中解析它？