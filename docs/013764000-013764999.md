# StackOverflow 问答 13764000-13764999

# birt - 标签中的文本方向

> ID：13764001
> 
> 赞同：1
> 
> 时间：2012-12-07T13:24:27.687
> 
> 标签：birt

我想知道是否有办法将 Birt 报告标签中的文本旋转 90°。

我在高级属性中没有找到任何选项。

我必须在`onRender`零件中添加一些脚本吗？

我正在使用 Eclipse BIRT Designer 版本 2.5.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:52:36.437

这在 BIRT 中不受支持。尽管您可以为此编写[插件](http://www.eclipse.org/articles/article.php?file=Article-BIRT-ExtensionTutorial1/index.html)。

# php - 删除从数据库中检索到的 TIME 函数前面的零？

> ID：13764002
> 
> 赞同：0
> 
> 时间：2012-12-07T13:24:32.150
> 
> 标签：php, html, mysql, database, pastebin

好的，所以在我的数据库中，我有以下列：`id`, `title`, `admission`, `date_start`, `date_end`, `time_start`, `time_end`, `location`, `description`, `image`,`hyperlink`

我正在从数据库中检索`date_start`并`date_end`清理了一些数据，但无法删除日期之前的 0。

到目前为止我的代码：http: [//pastebin.com/eAUXtkaX](http://pastebin.com/eAUXtkaX)

`date_start`和`date_end`函数的输出是：

日期开始：12 月 4 日 - 6 日 // 这是用于将两个不同的日期输入到 db
日期开始：12 月 25 日 //这是用于将输入的两天显示为相同的情况。

好的，当两个不同的日期输入数据库时​​，我将如何删除第一个数字之前的 0？

MySQL 查询（也在 pastebin 中）：

```
SELECT *, CONCAT(DATE_FORMAT(date_start, '%M %d'),
(IF(date_start = date_end,'',CONCAT(' - ', DAY(date_end))))) newDate 
FROM events3 
WHERE date_end >= CURDATE() 
ORDER BY date_start LIMIT 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:27:03.853

你能用这个`ltrim()`功能吗？

假设您要删除的日期`0`是`$date`..

```
$date = ltrim($date, '0'); 
```

[在这里](http://php.net/manual/en/function.ltrim.php)阅读

如果我没记错的话，你应该更换

```
$date_start = $rows['date_start'];
$date_end = $rows['date_end']; 
```

和

```
$date_start = ltrim($rows['date_start'], '0');
$date_end = ltrim($rows['date_end'], '0'); 
```

# c# - C# - 并行 For 循环：Parallel.For(); - 它们如何处理在它们之外声明的变量？

> ID：13764006
> 
> 赞同：2
> 
> 时间：2012-12-07T13:24:55.550
> 
> 标签：c#, variables, for-loop, parallel-processing, declaration

我有以下代码：

```
string someVariable;

Parallel.For(0, maxCount, count =>
{
    Parallel.For(0, dimension, row =>
    {
        Parallel.For(0, dimension, col =>
        {
            someVariable = count + " " + row + " " + col;
            DoSomethingIndependent(someVariable);
        });
    });
}); 
```

所以我的问题是：在循环之外声明的字符串变量是否独立于每次迭代，或者循环的并行执行是否会因彼此之间的迭代而中断？我猜这个变量是同时从并行线程使用的，因为它给了我一个“未处理的异常”。做这个的最好方式是什么？也许为每个并行迭代使用一个字符串数组？
提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:39:32.287

您问题中的代码有很多问题。

1）没有人在上面的评论中提到这一点，但是**someVariable**正在被多个线程写入。这将导致正确性问题。您必须在内部循环中声明**someVariable**，以便每个任务都有自己的 someVariable 实例来更新。

2) 声明变量的位置对性能的影响最小。这与上面提到的顺序循环的链接不同。在这里，编译器无法将可验证的实例化移入或移出并行循环，但假设您的循环正在执行大量工作，则实例化变量的开销应该是最小的。如果**DoSomethingIndependent**没有做真正的工作，那么并行化无论如何都不可能带来性能优势。

3）像这样嵌套的每个循环使用三个并行不太可能非常有效。你最好只在外循环上为每个循环使用并行循环，而对内循环使用顺序循环。

4）假设**rows**和**cols**是指存储在某个二维数组中的一些数据，那么您应该颠倒两个内部循环的顺序。请记住，数组以行优先顺序存储。

# objective-c - 使 UITextView 滚动动作隐藏 UILabel

> ID：13764009
> 
> 赞同：0
> 
> 时间：2012-12-07T13:25:06.050
> 
> 标签：objective-c, ios, xcode

基本上，我想要做的是检测用户何时在文本视图中滚动，然后隐藏标签（如果可能，平滑淡出）。（标签表示滚动以查看其余文本，但我不希望它在用户这样做后仍然显示。）

如果您可以在答案中包含 h/m 文件中使用的代码，我们将不胜感激。

更新代码以供将来参考：

。H

```
@interface myViewController : UIViewController

@property(nonatomic,retain) IBOutlet UILabel *label; 
```

.m

```
@synthesize label;

- (void)scrollViewDidScroll:(UIScrollView *)textView
{
    [UIView animateWithDuration:1.0 animations:^{
        label.alpha = 0;
    }];
} 
```

然后确保将 UITextView 委托设置为 self。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:54:53.873

您可以使用 UIScrollView 的委托方法`– scrollViewDidScroll:`来检测用户是否滚动，并使用 UIView 动画块淡出您的标签，如下所示：

```
[UIView animateWithDuration:1.0 animations:^{
    label.alpha = 0
}]; 
```

# sql - 如何将多个值传递给存储过程中的单个参数

> ID：13764010
> 
> 赞同：13
> 
> 时间：2012-12-07T13:25:09.423
> 
> 标签：sql, sql-server, ssrs-2008, reporting-services

我正在使用 SSRS 进行报告并执行存储过程来为我的报告生成数据

```
DECLARE @return_value int

EXEC    @return_value = [dbo].[MYREPORT]
        @ComparePeriod = 'Daily',
        @OverrideCompareDate = NULL,
        @PortfolioId = '5,6',
        @OverrideStartDate = NULL,
        @NewPositionsOnly = NULL,
        @SourceID = 13

SELECT  'Return Value' = @return_value

GO 
```

在上面，当我通过时`@PortfolioId = '5,6'`，它给了我错误的输入

我需要所有记录，`portfolio id 5 and 6 also`这是发送多个值的正确方法吗？

当我执行我的报告时，只给`@PortfolioId = '5'`它给我 120 条记录，当我通过给它执行它时`@PortfolioId = '6'`给我 70 条记录

所以当我给它的时候`@PortfolioId = '5,6'`，它应该只给我 190 条记录，但它给了我更多的记录，我不明白我到底哪里出错了。

有人可以帮我吗？谢谢

![在此处输入图像描述](../Images/198e4036ea82b4fffcac83b03f2667ce.png)

所有代码都太大而无法粘贴，我正在粘贴相关代码，请提供线索。

```
CREATE PROCEDURE [dbo].[GENERATE_REPORT]
(
    @ComparePeriod VARCHAR(10),
    @OverrideCompareDate DATETIME,
    @PortfolioId VARCHAR(50) = '2',   --this must be multiple 
    @OverrideStartDate DATETIME = NULL,
    @NewPositionsOnly BIT = 0,
    @SourceID INT = NULL

)  AS
BEGIN   
SELECT  
            Position.Date,
            Position.SecurityId,
            Position.Level1Industry,
            Position.MoodyFacilityRating, 
            Position.SPFacilityRating, 
            Position.CompositeFacilityRating, 
            Position.SecurityType,
            Position.FacilityType,
            Position.Position

        FROM
            Fireball_Reporting.dbo.Reporting_DailyNAV_Pricing POSITION WITH (NOLOCK, READUNCOMMITTED)
         LEFT JOIN Fireball.dbo.AdditionalSecurityPrice ClosingPrice WITH (NOLOCK, READUNCOMMITTED) ON
                    ClosingPrice.SecurityID = Position.PricingSecurityID AND
                    ClosingPrice.Date = Position.Date AND
                    ClosingPrice.SecurityPriceSourceID = @SourceID AND
                    ClosingPrice.PortfolioID IN (
                SELECT
                PARAM
                FROM
                Fireball_Reporting.dbo.ParseMultiValuedParameter(@PortfolioId, ',')                                             ) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T13:28:25.823

这不能轻易做到。没有办法让`NVARCHAR`参数采用“多个值”。我之前所做的是——就像你已经做的那样——使参数值像一个带有逗号分隔值的列表。然后，将此字符串拆分为存储过程中的各个部分。

可以使用字符串函数进行拆分。将每个部分添加到临时表中。伪代码可能是：

```
CREATE TABLE #TempTable (ID INT)
WHILE LEN(@PortfolioID) > 0
BEGIN
    IF NOT <@PortfolioID contains Comma>
    BEGIN
        INSERT INTO #TempTable VALUES CAST(@PortfolioID as INT)
        SET @PortfolioID = ''
    END ELSE
    BEGIN
         INSERT INTO #Temptable VALUES CAST(<Part until next comma> AS INT)
         SET @PortfolioID = <Everything after the next comma>
    END
END 
```

然后，将您的条件更改为

```
WHERE PortfolioId IN (SELECT ID FROM #TempTable) 
```

**编辑**
您可能对 SSRS 中多值参数的文档感兴趣，其中指出：

> 您可以为您创建的任何报告参数定义多值参数。但是，如果要使用查询将多个参数值传回数据源，则必须满足以下要求：
> 
> 数据源必须是 SQL Server、Oracle、Analysis Services、SAP BI NetWeaver 或 Hyperion Essbase。
> 
> **数据源不能是存储过程。**Reporting Services 不支持将多值参数数组传递给存储过程。
> 
> 查询必须使用 IN 子句来指定参数。

[这是我在这里找到的](http://msdn.microsoft.com/en-us/library/aa337292%28SQL.100%29.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-19T19:14:14.553

用这个

我已经有这个确切的问题将近 2 周了，非常令人沮丧，但我终于找到了这个网站，它清楚地说明了该怎么做。

[http://blog.summitcloud.com/2010/01/multivalue-parameters-with-stored-procedures-in-ssrs-sql/](http://blog.summitcloud.com/2010/01/multivalue-parameters-with-stored-procedures-in-ssrs-sql/)

我希望这对人们有所帮助，因为这正是我想要的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T13:31:05.210

要么使用[用户定义的表](https://stackoverflow.com/questions/7097079/c-sharp-sql-server-passing-a-list-to-a-stored-procedure)

[或者，您可以根据This Post](http://www.geekzilla.co.uk/view5C09B52C-4600-4B66-9DD7-DCE840D64CBD.htm)定义自己的 CSV 函数来使用 CSV 。

我可能会推荐第二种方法，因为您的存储过程已经以正确的格式编写，如果您以后需要这样做，您会发现它很方便。

干杯!

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-15T20:41:53.050

我花时间寻找合适的方法。这可能对其他人有用。

创建一个 UDF 并在查询中引用 -

[http://www.geekzilla.co.uk/view5C09B52C-4600-4B66-9DD7-DCE840D64CBD.htm](http://www.geekzilla.co.uk/view5C09B52C-4600-4B66-9DD7-DCE840D64CBD.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-14T10:10:29.113

我认为，以下程序可以帮助您找到所需的内容。

```
 CREATE PROCEDURE [dbo].[FindEmployeeRecord]
        @EmployeeID nvarchar(Max)
    AS
    BEGIN
    DECLARE @sqLQuery VARCHAR(MAX)
    Declare @AnswersTempTable Table
    (  
        EmpId int,         
        EmployeeName nvarchar (250),       
        EmployeeAddress nvarchar (250),  
        PostalCode nvarchar (50),
        TelephoneNo nvarchar (50),
        Email nvarchar (250),
        status nvarchar (50),  
        Sex nvarchar (50) 
    )

    Set @sqlQuery =
    'select e.EmpId,e.EmployeeName,e.Email,e.Sex,ed.EmployeeAddress,ed.PostalCode,ed.TelephoneNo,ed.status
    from Employee e
    join EmployeeDetail ed on e.Empid = ed.iEmpID
    where Convert(nvarchar(Max),e.EmpId) in ('+@EmployeeId+')
    order by EmpId'
    Insert into @AnswersTempTable
    exec (@sqlQuery)
    select * from @AnswersTempTable
    END 
```

# doctrine-orm - 与 Doctrine 2 中不同所有者对象的多态关联

> ID：13764013
> 
> 赞同：7
> 
> 时间：2012-12-07T13:25:18.833
> 
> 标签：doctrine-orm, polymorphic-associations

是否可以对Doctrine 2中的不同**所有者对象使用某种多态关联？**我的意思是，例如 ImageGroup 实体由不同的实体拥有：文章、专辑、帖子、评论等。因此 ImageGroup 表中应该有“ownerId”和“ownerType”属性，其中“ownerType”是鉴别器。

我已经在项目中的其他对象关系上使用**[类表继承](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#class-table-inheritance)**和**[超类映射](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#mapped-superclasses)**，但如果我是正确的，它们中的任何一个都适合这个问题。因为在这些情况下，引用的对象是继承的。

我在这里阅读了多态关联的答案，但我没有找到我的示例的答案。

在我的例子中根本没有继承。请问有什么帮助吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T16:07:40.403

您正在寻找的是[策略模式](http://docs.doctrine-project.org/en/latest/cookbook/strategy-cookbook-introduction.html)，它基本上允许您在对象和要引用的对象之间建立弱链接，例如`['name' => 'EntityName', 'identifier' => 123]`.

# javascript - 如何在不重复数据的情况下在画布上正确绘制和更新（特殊）原始图像数据？(html5)

> ID：13764021
> 
> 赞同：3
> 
> 时间：2012-12-07T13:25:50.550
> 
> 标签：javascript, image, html, canvas

我不认为这个标题很准确，但我想不出更好的了。

我正在处理医学图像，在这类图像中没有确定的像素值，您必须提取一些信息并自己计算每个像素值。第二个特点是图像分辨率可能非常大。

因此，一旦我将图像加载到内存中，我就有了一个 ArrayBuffer 和一些其他计算所需的属性。由于这些图像不是基于任何常见格式，我不能使用图像 DOMElement 在画布上绘制它们。

这是我遇到的两个相关问题：

1）我必须使用 ImageData 将图像绘制到画布中，这意味着我必须遍历我的 ArrayBuffer 计算每个像素值并将它们存储在 ImageData 中，然后我使用 canvas.putImageData() 并且浏览器可能会遍历再次 ImageData 和显示像素。我不喜欢这样，因为它需要迭代两次才能显示图像并且每次更新时都需要迭代。

2）正如我所说，图像可能非常大，所以我需要使用缩放/切片，但画布只为 drawImage 提供这些功能，而不为 putImageData 提供这些功能。如果我不想自己计算它，我必须使用缓冲区画布，将整个图像复制到其中，然后将 drawImage 与此缓冲区画布一起用作图像。这很糟糕，原因有两个：

*   我正在复制数据，我必须保留原始的 ArrayBuffer 和缓冲区画布。可以创建和删除缓冲区画布，但由于我需要在鼠标移动时更新图像，所以最好保留它。

*   如果对图像进行了更改，例如对比度/亮度，我必须为整个图像（缓冲区画布创建）重新计算它，即使我只是显示其中的一小部分。

这是一些代码：

```
//image contains raw data: TypedArrayView and some attributes
// size (2828,2320)
var image;
//displayed canvas
// size (500,500)
var canvas;
//buffer canvas
// size (2828,2320)
var buffCanvas;

function drawImage(sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight){
   var buffContext = buffCanvas.getContext('2d');
   var imageData = buffContext.getImageData(buffCanvas.width,buffCanvas.height);

   //Iterate over all the image (2828,2320)
   for(var i = 0; i < imageData.data.length; i++ )
     //process pixel calculation
     imageData[i] = image.buffer[i] + SomeCalculation;

   buffContext.putImageData(imageData,0,0);

   canvas.getContext('2d').drawImage(buffCanvas,sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)
}

function onmousemove(){
   //change some image properties
   image.contrast = 150;
   ...

   drawImage(sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);
} 
```

我对此有点陌生，所以我一定会遗漏一些东西，因为我这样做的方式不会有成效。

我的梦想是创建一个像 ArrayBuffer 一样的视图，或者覆盖（不可能）括号运算符或创建一个假图像元素。这可以这样工作：

```
function MedicalImage(data, ...){
  ...
}

MedicalImage.prototype.getPixelValueAt = function(pos){
  return data[pos] + SomeCalculation;
}

var img = new MedicalImage();
context.drawImage(img,sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight); 
```

并且浏览器会在需要时调用 getPixelValueAt() 来获取像素值。

# url - 将用户 ID（或用户名）作为 Desire2Learn 中的查询字符串放入 url

> ID：13764022
> 
> 赞同：0
> 
> 时间：2012-12-07T13:25:59.083
> 
> 标签：url, query-string, desire2learn

我需要在 D2L 中放置一个指向外部网站的链接。当用户单击链接时，他的用户名应该包含在 url 中，例如：www.abc.com/index.aspx?username=user1

是否有任何参数可以让我轻松做到这一点？比如：index.aspx?username= **{userid}**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:23:25.367

我相信当前登录用户的用户名是您可以[在 LMS 的 UI 中放置的链接中使用的](http://docs.valence.desire2learn.com/basic/uiplugins.html#simple-urls)*替换字符串*之一。但是，替换字符串不会在您可以在 LMS 中放置链接的所有地方得到处理：例如，如果您将链接写入讨论主题帖子等，我不确定那里使用的替换字符串会得到扩展。

如果您在网络上搜索“Desire2Learn 替换字符串”，您会发现由各种教育机构托管的各种页面，其中记录了可能对您有用的替换字符串列表（事实上，`{UserName}`这似乎是您想要的） .

您应该意识到，当您在通过网络以明文形式发送信息的出站 URL 中使用替换字符串时：出于隐私/安全原因，您可能需要谨慎执行此操作。

# sql - 如何将数据库列与字符串匹配

> ID：13764025
> 
> 赞同：2
> 
> 时间：2012-12-07T13:26:04.540
> 
> 标签：sql, database, postgresql

例如，我有一个这样的表：

```
编号 | 姓名 |
--------------------
1 | T |
2 | 正文 |
3 | 一个 |
4 | 文本 1 和文本 |
5 | 文本 |

```

，我想用字符串反转匹配列，如下所示：

```
select * from table_name where %name% like 'Text1 and Text2 and Text3' 

```

，并得到这些结果：

```
编号 | 姓名 |
------------
1 | T |
2 | 正文 |
4 | 文本 1 和文本 |

```

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:27:51.967

尝试：

```
SELECT *
FROM table_name
WHERE 'Text1 and Text2 and Text3' LIKE '%'||name||'%' 
```

UPD 这是我的 SQLFiddle 示例：[SQLFiddle](http://sqlfiddle.com/#!12/d611f/1)。

# c# - 以编程方式创建 Pivot 项目并动态添加堆栈面板？

> ID：13764027
> 
> 赞同：3
> 
> 时间：2012-12-07T13:26:12.410
> 
> 标签：c#, windows, windows-phone-7, pivot

我在我的 Windows Phone 7 应用程序中有一个`Pivot`控件，并希望动态添加`PivotItem`s，其中包含布置在`StackPanel`. 我怎样才能以编程方式做到这一点？

我试图添加到 PivotItem 中`children`，但我的 PivotItem 中不存在子项。

```
void ws_getMenuCompleted(object sender, getMenuCompletedEventArgs e)
{
    PivotItem pvt;
    for (int i = 0; i < e.Result.menu.Length; i++)
    {
        pvt = new PivotItem();
        pvt.Header = e.Result.menu[i].name.ToLower();

        StackPanel panel = new StackPanel(); 
        // ... UI creation in StackPanel removed...

        pvt.Children = panel; // << This doesn't work.

        pvtRestaurante.Items.Add(pvt);
        pvt = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T14:16:58.513

由于 PivotItem 派生自 ContentControl，您应该分配 PivotItem 的内容属性。更多信息在这里[http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.controls.pivotitem%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.controls.pivotitem%28v=vs.105%29.aspx)

```
void ws_getMenuCompleted(object sender, getMenuCompletedEventArgs e)
        {
            PivotItem pvt;
            for (int i = 0; i < e.Result.menu.Length; i++)
            {
                pvt = new PivotItem();
                pvt.Header = e.Result.menu[i].name.ToLower();
                var stack = new StackPanel();
                pvt.Content = stack;
                pvtRestaurante.Items.Add(pvt);
                pvt = null;
            }
} 
```

# android - Android蓝牙：检查远程设备是否需要配对

> ID：13764035
> 
> 赞同：3
> 
> 时间：2012-12-07T13:26:44.220
> 
> 标签：android, bluetooth

## 标题

问题很简单，但我怀疑这是否可能......有没有办法检查设备是否需要配对？

我正在开发打印机服务器，有些打印机需要配对，有些则不需要。我想创建一个按钮来配对那些需要它的人。

如果这不可能，我如何检查设备是否正在配对？连接几乎总是由外部 jar（打印机驱动程序 Zebra 和 Brother）完成。配对后，它会取消，并且在您再次点击打印按钮之前不会打印任何内容。

提前致谢。

# asp.net - AutoMapper - 使用不同的属性编号进行映射

> ID：13764038
> 
> 赞同：0
> 
> 时间：2012-12-07T13:27:02.920
> 
> 标签：asp.net, asp.net-mvc-4, automapper

我在两个模型之间进行映射，一个包含一个额外的属性（和一个方法）而不是另一个。

我有 foo 和 bar。

Bar 有一个额外的属性（ExProp，它是一个 IEnumerable），以及用于填充它的方法（PopExProp）。

当从 foo 映射到 bar 时，我想让它使用 PopExProp 自动填充 Bar.ExProp。从 Bar 映射到 Foo 时，我希望忽略此属性。

使用 CreateMap(Foo, Bar)(); 时我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:31:57.520

您可以使用 AutoMapper 的 AfterMap 方法：

```
Mapper.CreateMap<Foo, Bar>()
    .AfterMap((f,b) => b.PopExProp(f.ExProp)); 
```

# database - 在两个 PostgreSQL 服务器之间复制数据库

> ID：13764040
> 
> 赞同：0
> 
> 时间：2012-12-07T13:27:05.307
> 
> 标签：database, postgresql, copy

是否有一些工具可以将数据库从一个 PostgreSQL 复制到另一个**不涉及备份/恢复**？自动保持从服务器上的数据库结构与主服务器同步的工具。可能是使用差分模式查看记录主键的工具。

我可以使用复制，但问题是它以永久方式绑定两台服务器，我不需要连续复制。我需要手动启动它。它应该在完成时终止。

我已经开始使用反射等编写自己的 .NET 工具，但认为可能有人已经编写了这样的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:30:21.237

复制是您正在寻找的术语。

如何做到这一点有很多变化。首先阅读[手册](http://www.postgresql.org/docs/current/static/high-availability.html)，然后谷歌一点。

如果 PostgreSQL 最新版本内置的全系统复制不符合您的口味，请尝试搜索“slony”或“pg-pool”或“bucardo”（以及其他）。

# r - R中ggplot图例中的虚线线型

> ID：13764041
> 
> 赞同：1
> 
> 时间：2012-12-07T13:27:12.577
> 
> 标签：r, legend, ggplot2

我是新来的，但我希望你能帮助我。我只是用谷歌搜索了我的问题，但无法解决。

我有一个包含大量数据的数据框，我想用 R 中的 ggplot 绘制这些数据。一切都很好，但传说让我发疯。图例中的线型总是实心的，而不是我定义的。

我正在加载一个 csv 文件，然后使用循环制作子集并使用 SummarySE() 汇总子集。

一个子集如下所示：

```
 ExperimentCombinations   LB TargetPosition  N C_measured         sd          se         ci
1                     HS 0.10         Foveal 10 0.11007970 0.04114193 0.013010221 0.02943116
2                     HS 0.21         Foveal 10 0.09821870 0.04838134 0.015299523 0.03460992
3                     HS 0.30         Foveal  9 0.07911856 0.04037776 0.013459252 0.03103709
4                     HS 1.00         Foveal 11 0.06657355 0.02688821 0.008107099 0.01806374
5                    LED 0.10         Foveal  8 0.12569725 0.03607487 0.012754393 0.03015935
6                    LED 0.21         Foveal 10 0.08797370 0.02091996 0.006615472 0.01496524
7                    LED 0.30         Foveal 10 0.07358290 0.03002596 0.009495042 0.02147928
8                    LED 1.00         Foveal  8 0.06630350 0.01894423 0.006697796 0.01583777 
```

在这种情况下，TargetPosition 具有水平中心凹或外围。我正在使用的 ggplot 代码是（看起来很糟糕，因为我试图解决我的问题......）：

```
 ColourFoveal <- c("#FFCC33","#00CCFF")
        ColourPeripheral <- c("#FFCC33","#00CCFF")
        #ColourPeripheral <- c("#FF9900","#0066FF")
        PointType <- c(20,20)
        PointTypeSweepUp <- c(24,24)
        PointTypeSweepDown <- c(25,25)
        ColourHSFillFoveal <- c("#FFCC33", "#FFCC33")
        ColourHSFillPeripheral <- c("#FF9900", "#FF9900")
        #LineTypeFoveal <- c("solid", "solid")
        LineTypePeripheral <- c("dashed","dashed")
        xbreaks <- c(0.1,0.21,0.3,1.0)
        plotsYmax <- 0.2 

    if(field=="Peripheral"){
                        lineType<-sprintf("dashed")
                        lineColour<-ColourPeripheral
                    }else{
                        lineType<-"solid"
                        lineColour<-ColourFoveal
                    }
                    ggplot(df, aes(x=LB, y=C_measured, shape=ExperimentCombinations, colour=ExperimentCombinations)) +
                        geom_errorbar(aes(ymin=C_measured-se, ymax=C_measured+se), width=.1) +
                        geom_line(linetype=lineType) +
                        geom_point() +

                        ggtitle(paste(targetDataFrame$AgeGroup, targetDataFrame$TargetPosition)) +
                        scale_colour_manual(name="", values=lineColour)+
                        scale_shape_manual(name="", values=PointType)+
                        scale_fill_manual(name="", values=lineColour)+                  
                        scale_x_continuous(breaks=xbreaks)+
                        coord_cartesian(ylim = c(0, plotsYmax+0.01))+
                        scale_y_continuous(breaks=c(0,0.05,0.1,0.15,0.2))+                  
                        theme(axis.line=element_line(colour="black"))+                  
                        theme(panel.grid=element_blank())+
                        theme_bw()+
                        theme(legend.key.width=unit(2,"line"))
} 
```

外围地块应该有虚线，中心凹的实线。我得到的总是这样：（作为一个新用户，我不允许发布图像！）线条用我喜欢的颜色虚线，点也是正确的。但在传说中，线条是实线而不是虚线。传说中的颜色和点也很好。

您能帮我将图例中的线型定义为外围案例中的虚线吗？

# java - java中用于字母数字的正则表达式

> ID：13764042
> 
> 赞同：0
> 
> 时间：2012-12-07T13:27:14.417
> 
> 标签：java, regex

我有一个像`010000200000, 000000200000, 020000200000`. 我想为此创建正则表达式，并想检查前 2 位数字是否仅为 01,00 和 02。其余数字应仅来自 [0-6]。

我不想在这个字符串中有任何空格或任何特殊字符。我尝试了一些在线可用的正则表达式，但并没有完全帮助我。

如果有人有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T13:28:59.107

这应该根据您的要求解析它们。

```
java.util.regex.Pattern.matches("0[012][0-6]+", "010000200000"); 
```

第一个字符始终是 0，后跟 1 个字符，即 0、1 或 2，然后是 0-6 范围内的至少 1 个字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T13:29:57.120

直截了当

```
"0[012][0-6]*" 
```

从 0 开始，然后是 0、1 或 2，然后是 0 到 6 之间的任意数量的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:29:45.497

我建议你看看[这个教程](http://www.regular-expressions.info/tutorial.html)。

如果字符串的位数和段数是固定的，则可以使用

```
(?:0[012][0-6]{10}, ){2}0[012][0-6]{10} 
```

如果不是，只需

```
(?:0[012][0-6]*, )*0[012][0-6]* 
```

如果您实际上的意思是给定的示例是三个单独的字符串，那么它就更容易了：

```
0[012][0-6]{10} 
```

或者

```
0[012][0-6]* 
```

所有这些用途都是[字符类](http://www.regular-expressions.info/charclass.html)和[重复](http://www.regular-expressions.info/repeat.html)。

请注意，当您将它们与`Pattern.matches`. 如果没有，请将它们包围`^...$`以确保在此模式之前或之后没有其他内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:00:12.813

```
java.util.regex.Pattern.matches("0[0-2]{1}[3-6]{10}", "015453356543") 
```

这正是需要的正则表达式...是吗？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-07T13:32:59.320

怎么样`0[0-2][0-6][0-6][0-6][0-6][0-6][0-6][0-6][0-6][0-6][0-6]`？显然我猜你需要一个固定长度的 12 个字符的字符串，否则`0[0-2][0-6]+`就可以了。

# php - 如何使用数组参数 PHP 创建函数

> ID：13764049
> 
> 赞同：-2
> 
> 时间：2012-12-07T13:27:40.650
> 
> 标签：php

简单的问题...

想创造这样的东西：

```
$args = array(
  'post_type' => 'posts',
  'limit' => 5,
  'cat' => 'news'
); 
```

然后，一个可以实际获取这些“键”的函数......比如：

```
function get_posts($args) {

    $post_type = $args['post_type'];
    $limit = $args['limit'];
    $cat = $args['cat'];

    $sql = mysql_query("SELECT * FROM posts WHERE posttype='$post_type'  .... ");

    // other code...
} 
```

我怎样才能？

抱歉英语不好，提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:29:10.727

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

但是，您似乎已经回答了自己！

你应该这样调用函数：

```
$args = array(
  'post_type' => 'posts',
  'limit' => 5,
  'cat' => 'news'
);

function get_posts($args)
{

    $post_type = $args['post_type'];
    $limit = $args['limit'];
    $cat = $args['cat'];

    $sql = mysql_query("SELECT * FROM posts WHERE posttype='$post_type' ..........");
    // ... other code
}

get_posts($args); 
```

如果您遇到一些错误，请使用错误日志更新您的问题。

# javascript - Modernizr 的完整功能似乎运行得太早了

> ID：13764050
> 
> 赞同：2
> 
> 时间：2012-12-07T13:27:42.957
> 
> 标签：javascript, modernizr, excanvas

我有这个 javascript：

```
Modernizr.load([
    {
        test: Modernizr.canvas,
        nope: ['/assets/js/excanvas.js'],
        both: ['/assets/js/frank/pentool.js'],
        complete : function () {
            var cmo = new CutMeOut(settings);
        }
    }
]); 
```

excanvas 中的这种加载应该不支持画布，并且在完成时应该触发“完成”功能。中的 CutMeOut 类`pentool.js`包含适用于画布元素的代码。但是，IE7 和 IE8 给出了这个错误：

`Object doesn't support property or method`

如果我只是正常加载`excanvas`该网站可以正常工作。`var cmo = new CutMeOut(settings);`那么，在 excanvas 解决问题后，我该如何运行呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:20:37.017

似乎是工作：

```
Modernizr.load([
    {
        load: '/assets/js/frank/pentool.js',
        complete: function() {

            if (!document.createElement('canvas').getContext) {
                Modernizr.load('/assets/js/excanvas.js');
            } else {
                var cmo = new CutMeOut(settings);
            }

        }

    },

    {

        complete: function() {
            if (!document.createElement('canvas').getContext) {
                window.addEvent('load', function() {
                    var cmo = new CutMeOut(settings);
                });
            }
        }
    }

]); 
```

# node.js - 在 NodeJs 中捆绑 shell 命令

> ID：13764051
> 
> 赞同：1
> 
> 时间：2012-12-07T13:27:46.770
> 
> 标签：node.js, shell

我希望运行类似`NODE_ENV=production node server`或`cd ~/app/cms; npm test`使用[NodeJs spawn的命令](http://nodejs.org/api/child_process.html)

首先可以实现

```
process.env.NODE_ENV = 'production'
start = spawn 'node', ['server'], process.env 
```

但是我怎样才能达到第二个呢？

**更新**：如果有人有类似的问题，这是我在咖啡脚本中的示例：

```
testCode = ->
    testCore = spawn 'npm', ['test']
    testCore.stderr.on 'data', (data) -> console.log() process.stderr.write data.toString()
    testCore.stdout.on 'data', (data) -> print data.toString()
    testCore.on 'exit', ->
        path = require 'path'
        process.chdir path.join(__dirname, "app", "linkParser")
        testModule = spawn 'npm', ['test']
        testModule.stderr.on 'data', (data) -> process.stderr.write data.toString()
        testModule.stdout.on 'data', (data) -> print data.toString() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:04:07.657

```
path = require "path"
process.chdir path.join(process.env.HOME, "app", "cms")
spawn "npm", "test" 
```

[http://nodejs.org/docs/latest/api/all.html#all_process_chdir_directory](http://nodejs.org/docs/latest/api/all.html#all_process_chdir_directory)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-23T16:29:30.810

`ENOENT`尝试`cd`从子进程调用时收到错误消息。

@Peter Lyons 的回答很有帮助。在阅读了更多关于 spawn 的文档后，我决定使用以下方法来保持父进程工作目录的清洁：

**咖啡脚本：**

```
spawn "npm", "test",
  cwd: path.join(process.env.HOME, "app", "cms") 
```

**JavaScript：**

```
spawn("npm", "test", { cwd: path.join(process.env.HOME, "app", "cms") }); 
```

根据经验，我发现您也可以只传递字符串：

**咖啡脚本：**

```
spawn "npm", "test", path.join(process.env.HOME, "app", "cms") 
```

**JavaScript：**

```
spawn("npm", "test", path.join(process.env.HOME, "app", "cms")); 
```

查看[spawn 文档](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)了解更多信息。

# python - 函数体中的 Python 变量“声明”

> ID：13764052
> 
> 赞同：0
> 
> 时间：2012-12-07T13:27:48.837
> 
> 标签：python, class, variables, instance

```
class Example(wx.Frame):

    def __init__(self, *args, **kwargs):
        super(Example, self).__init__(*args, **kwargs) 

        self.InitUI()

    def InitUI(self):    

        menubar = wx.MenuBar()
        fileMenu = wx.Menu()
        viewMenu = wx.Menu()

        self.shst = viewMenu.Append(wx.ID_ANY, 'Show statubar', 
            'Show Statusbar', kind=wx.ITEM_CHECK)
... 
```

我最近开始学习 python 和 wxPython。上面的代码片段来自[http://www.zetcode.com/wxpython/menustoolbars/](http://www.zetcode.com/wxpython/menustoolbars/)。我试图了解*self.shst*变量。为什么必须在它前面加上 self 关键字？

根据我的阅读，在 __init__ 方法的上下文中使用 self 关键字来“声明”实例变量，但作者在 __init__ 中没有*shst*声明

**编辑** 根据您的回答，我做了以下测试：

```
class Test(object):
    def __init__(self):
        self.x = 20
    def func(self):
        self.y = 10
    def getVal(self):
        return self.y

def main():
    t = Test()
    print t.getVal()
    print dir(t)

if __name__ == '__main__':
    main() 
```

我无法在 getVal() 函数中访问 self.y，并且在 dir(t) 的输出中看不到 y。测试类中的每个函数不应该可以访问 self.y 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:31:10.133

没有必要在`__init__`. 它们可以在任何地方定义。Python 是一种动态语言，可以在任何时候向对象添加属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:35:56.343

如果您没有前缀`shst`，`self.`那么它只是一个超出范围的局部变量，并在方法退出后被垃圾收集。无需在分配之前声明 python 类/对象成员。

# javascript - 在 JavaScript 中添加覆盖

> ID：13764056
> 
> 赞同：-2
> 
> 时间：2012-12-07T13:28:14.167
> 
> 标签：javascript, overlay, jsplumb

我正在使用 jsplumb 创建一个流式聊天。一旦流程图创建结束并得到用户的确认，我想让创建的结构不可编辑。为此，已向持有流程图的父级添加了一个过度，但鼠标点击仍在流程图上发生。

如何 - 添加叠加层后不允许在这些组件上发生鼠标单击。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:33:44.480

向覆盖所有点击事件的覆盖添加一个处理程序：

```
document.getElementById('yourOverlayID').onclick = function () {
    return false;
}; 
```

请记住，任何人都可以通过控制台简单地删除覆盖，并根据需要继续修改图表。您可能想查看 jsplump API 以找到一种方法来执行此操作，例如[unbind()](http://www.jsplumb.org/apidocs/files/jquery-jsPlumb-1-3-16-all-js.html#unbind)。

# google-app-engine - 是否有在我的应用程序中查找命名路由的当前处理程序的功能

> ID：13764057
> 
> 赞同：4
> 
> 时间：2012-12-07T13:28:24.923
> 
> 标签：google-app-engine, python-2.7, webapp2

`webapp2.get_app()`我可以使用：和当前请求实例获取当前的应用程序/WSGI 实例：`webapp2.get_request()`但是如何从以下位置获取当前的 webapp2 处理程序实例：

```
class MainHandler(webapp2.RequestHandler):

    def get(self):

for :

webapp2.Route(r'/', handler=module.MainHandler, name='main'), 
```

不使用“self”来指代这个对象。可能吗？

请求对象中的路由对象包含处理程序名称，但不包含实例。

**更新**：尚未找到解决方案。现在我将处理程序（self）存储在全局中，使用`webapp2.RequestHandler`. 但必须有另一种方式。

为了找到解决方案，我研究了 Nick Johnsonz“如何编写自己的 Python webapp 框架”： http: [//blog.notdot.net/2010/01/Writing-your-own-webapp-framework-for-App-Engine](http://blog.notdot.net/2010/01/Writing-your-own-webapp-framework-for-App-Engine)以了解webapp2 是如何工作的。

我做了什么 ：

有了`webapp2.get_request()`我可以找到`request.route`和`request.route.handler_adapter`实例。但不是处理程序实例。处理程序实例未保存。

**结论**：我使用 my 的构造函数`webapp2.RequestHandler`将处理程序实例（self）保存在请求注册表（线程安全）中。而且我不必匹配路由名称，因为每个请求都会创建新实例（处理程序和请求）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T22:35:16.430

您的问题（或者可能是示例代码片段）可能需要更明确地定义，以便人们提供合适的答案。

据我所知，您似乎正在寻找一种方法来查找某个函数的调用堆栈以确定最近的`RequestHandler`实例。如果是这种情况，那么这更像是一个普通的 Python 问题而不是 webapp2，但该[`traceback`模块](http://docs.python.org/2/library/traceback.html)可能是您正在寻找的。

# ruby-on-rails - 在涉及数据库访问的 ruby on rails 中调度

> ID：13764060
> 
> 赞同：1
> 
> 时间：2012-12-07T13:28:27.737
> 
> 标签：ruby-on-rails, ruby, scheduler, rufus-scheduler

我想通过电子邮件为订阅用户安排每日报告。
为此，我在 reports_controller 中编写了从数据库中获取数据并使用 pdfkit/wkhtmltopdf 将其转换为 pdf 的操作。
当从 get request 调用时，该操作可以正常工作。但是当转换为这样定义时

```
def self.dailymail
   ac = ActionController::Base.new()
   kit = PDFKit.new        #retrieve data from db  
   pdf = kit.to_pdf
   ReportMailer.send_reports(ac.send_data(pdf)).deliver
 end 
```

[与rufus](https://github.com/jmettraux/rufus-scheduler)调度程序一起使用时，它会在 send_data 调用中引发异常：

```
RackDelegation#content_type= delegated to @_response.content_type=, but @_response is nil: #<ActionController::Base:0x206b068 @_routes=nil, @_action_has_layout=true, @_headers={"Content-Type"=>"text/html"}, ... 
```

所以，我的问题是我该如何解决这个问题，或者 Rails 中是否有任何替代调度程序在 Windows 和 Linux 上都可以正常工作？
我想知道任何有助于发送从数据库中获取的报告的**调度程序。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:07:06.097

我同意 claasz 关于 rake 任务的观点。查看when gem [https://github.com/javan/whenever](https://github.com/javan/whenever) Windows 任务计划程序不支持，但它确实支持创建 cron 作业。

查看文档以获取详细信息，但本质上，gem 会根据您在安装 gem 时创建的 schedule.rb 文件中的配置创建 cron 作业。

schedule.rb 的示例内容：

```
every 3.hours do
  runner "MyModel.some_process"
  rake "my:rake:task"
  command "/usr/bin/my_great_command"
end 
```

这就像每 3 小时运行一次 bundle exec rake my:rake:task

创建 schedule.rb 后，您需要从控制台运行无论何时命令，以便将您的计划添加到 cron。如果您在没有参数的情况下运行，则输出会显示 schedule.rb 的内容。您需要提供一个论点，即我不记得了，只需通过 --help ，我认为您会得到答案。

希望这可以帮助

编辑：参数是 -w 写入 cron-tab

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:07:14.323

正如 willglynn 已经指出的那样，您应该摆脱任何控制器交互。这里根本没有必要，它使事情变得不必要地复杂。所以你的代码应该看起来更像

```
def self.dailymail
   kit = PDFKit.new        #retrieve data from db  
   pdf = kit.to_pdf
   ReportMailer.send_reports(pdf).deliver
end 
```

如果您在使用 rufus 调度程序时遇到问题（我不知道），您可以创建一个`rake`任务来发送您的邮件并使用操作系统调度程序（例如 Linux 上的 cron）来调用该任务。拥有 rake 任务也便于测试。

# powershell - 动态输入数组 Powershell

> ID：13764061
> 
> 赞同：1
> 
> 时间：2012-12-07T13:28:32.683
> 
> 标签：powershell

我再次与您联系，因为我再次遇到 Powershell 脚本分配问题。我目前的任务是制作一个脚本，让用户输入 1-10 个值。这些值必须是正数。之后我必须计算一个数组的平均值。

我的想法如下：

```
clear-host  
$averageArray = @()

Write-Host "How many numbers do you want to put in?" -for yellow
Write-Warning "Maximum is 10!"
Write-Host "Press the Enter key to continue."

$amountValues = Read-host
while($amountVAlues -notmatch "^([1-9]|[1][0])$") {
   $amountValues = Read-Host "Please enter a number between 1 and 10"

if($amountVAlues -notmatch "^([1-9]|[1][0])$") {Write-host "Error! Please enter a number between 1 and 10!"}
} 

$value1 = read-host "Enter number one"

while($value1 -notmatch '^\d+$') {
   $value1 = Read-Host 
if($value1 -notmatch '^\d+$') {Write-host "Error! Please enter a positive number!"}
} 

$value2 = read-host "Enter number two"

while($value2 -notmatch '^\d+$') {
   $value2 = Read-Host 
if($value2 -notmatch '^\d+$') {Write-host "Error! Please enter a positive number!"}
} 

$averageArray = $averageArray + $value1

write-host "$averageArray"

read-host 
```

* * *

我创建了一个数组，并让用户输入一个介于 1-10 之间的数字作为他们想要在数组中的总 $values 的数量。之后，我想循环输入一个 $value，并将其输入到数组中。我想循环它与 $amountValues 变量一样多的次数。

这样做的问题是，如果我循环它，$variable1 会被覆盖“x”次。

有没有办法通过循环将值输入到数组中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T13:43:52.073

我会这样做：

```
while ( (1..10) -notcontains $g)
{
    $g = read-host "How many numbers do you want to put in? (value from 1 to 10) " 
}    
$ar=@()
for ($i=0; $i -lt $g; $i++)
{
   $ar += read-host "Enter value $($i+1)"
}    
$averageArray = ($ar | Measure-Object -Average).average    
write-host "Average is : $averageArray" 
```

# jquery - Fancybox 下一个/上一个不工作

> ID：13764068
> 
> 赞同：1
> 
> 时间：2012-12-07T13:29:01.527
> 
> 标签：jquery, fancybox

我有这个 html，在图像周围的链接上设置了 data-fancybox-group 属性，就像在演示中一样，可以启用下一个/上一个，但它不起作用。我包括按钮 js 和 css 并且它们正确加载，所以我不知道为什么它不起作用。任何人都可以帮忙吗？

```
 <ul class="gallery photos">                              

      <li>
        <div>
          <h4><a href="http://nduna.demo.provokateur.com/media-center/photos/amy-robbins/">Amy Robbins</a></h4>
          <div class="photocontent">
            <p>
              <a href="http://nduna.demo.provokateur.com/wp-content/uploads/2012/12/Homepage-Together1.jpg">
            <img class="alignnone size-thumbnail wp-image-1082" title="Homepage-Together" src="http://nduna.demo.provokateur.com/wp-content/uploads/2012/12/Homepage-Together1-200x88.jpg" alt="" width="200" height="88" />
          </a>
        </p>
      </div>
      <a href="http://nduna.demo.provokateur.com/media-center/photos/amy-robbins/" class="cta">Show image</a>
    </div>

  </li>
  <li>
    <div>
      <h4><a href="http://nduna.demo.provokateur.com/media-center/photos/unicef-hq07-0149indrias-getachew/">Indrias Getachew</a></h4>
      <div class="photocontent">
        <p>
          <a href="http://nduna.demo.provokateur.com/wp-content/uploads/2012/07/070149F.jpg">
            <img class="alignnone size-thumbnail wp-image-942" title="070149F" src="http://nduna.demo.provokateur.com/wp-content/uploads/2012/07/070149F-200x88.jpg" alt="" width="200" height="88" />
          </a>
        </p>
      </div>
      <a href="http://nduna.demo.provokateur.com/media-center/photos/unicef-hq07-0149indrias-getachew/" class="cta">Show image</a>
    </div>
  </li>
  <li>
    <div>
      <h4><a href="http://nduna.demo.provokateur.com/media-center/photos/dsc-0103/">DSC 0103</a></h4>
      <div class="photocontent">
        <p>
          <a href="http://nduna.demo.provokateur.com/wp-content/uploads/2012/07/DSC_0103.jpg">
            <img class="alignnone size-thumbnail wp-image-943" title="DSC_0103" src="http://nduna.demo.provokateur.com/wp-content/uploads/2012/07/DSC_0103-200x88.jpg" alt="" width="200" height="88" />
          </a>
        </p>
      </div>
      <a href="http://nduna.demo.provokateur.com/media-center/photos/dsc-0103/" class="cta">Show image</a>
    </div>
  </li>
</ul> 
```

除此以外，该脚本运行良好，这是js：

```
$('.homepnl.photo li, .gallery.photos li, .lb-photos').each(function(i,itm){
var photolink = $('.photocontent a',$(itm)).attr('href');
// var title = $('.wp-caption-text',$(itm)).text();

$('a',$(itm)).click(function(evt){
  evt.preventDefault();
});

// $(itm).attr('title',title);
$(itm).attr('href',photolink);
$('.photocontent p a').attr(data-fancybox-group','gallery');

//applying the fancybook plugin to the item. 
$(itm).fancybox({href:photolink, 'autoDimensions': true }); 
```

});

截止日期是昨天，因此非常感谢您的帮助！

该页面在这里： http: [//nduna.demo.provokateur.com/media-center/](http://nduna.demo.provokateur.com/media-center/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-03T09:40:13.120

**fancybox OLDER than 2.0 VS fancybox 2.0+**

Fancybox OLDER 早于 2.0 ( [http://fancybox.net/](http://fancybox.net/) )

*   似乎**只** `rel`支持分组的属性

Fancybox 2.0+ ( [http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/) )

*   支持 =`rel`属性 &&`data-fancybox-group`属性

因此，如果您使用的是旧于 2.0 版本的 fancybox，这可能是您的问题 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:44:04.367

我认为您缺少的是锚标签上匹配的“rel”属性。从 Fancybox 文档（[http://fancybox.net/howto](http://fancybox.net/howto)）：

> 注意 - 画廊是从具有相同“rel”标签的元素创建的，例如：
> 
> ```
> /* HTML */
> <a class="grouped_elements" rel="group1" href="image_big_1.jpg"><img src="image_small_1.jpg" alt=""/></a>
> <a class="grouped_elements" rel="group1" href="image_big_2.jpg"><img src="image_small_2.jpg" alt=""/></a>     
> 
> <a class="grouped_elements" rel="group2" href="image_big_3.jpg"><img src="image_small_3.jpg" alt=""/></a> 
> <a class="grouped_elements" rel="group2" href="image_big_4.jpg"><img src="image_small_4.jpg" alt=""/></a> 
> 
> /* This will create two galleries */
> 
> $("a.grouped_elements").fancybox(); 
> ```

编辑：

因此，从您的代码中，您可以执行以下操作（对于您的所有图像）：

```
<a rel="gallery-one" href="http://nduna.demo.provokateur.com/wp-content/uploads/2012/12/Homepage-Together1.jpg"><img class="alignnone size-thumbnail wp-image-1082" title="Homepage-Together" src="http://nduna.demo.provokateur.com/wp-content/uploads/2012/12/Homepage-Together1-200x88.jpg" alt="" width="200" height="88" /></a> 
```

**编辑 2**

当我在您页面的控制台中运行以下代码时，它会将下一个/上一个按钮添加到每个图像。我不能 100% 确定 fancybox 是如何工作的，但是在启动器中使用 jQuery 的 .attr() 选择器可能存在问题。

```
jQuery('.photocontent p a').data('fancyboxGroup','gallery').fancybox(); 
```

# c++ - 如何强制 c++ 编译器使用寄存器？

> ID：13764069
> 
> 赞同：2
> 
> 时间：2012-12-07T13:29:03.343
> 
> 标签：c++, performance, assembly, compiler-construction, cpu-registers

我的（c++ .Net Win32 控制台）代码中有一个`for`循环，它必须尽可能快地运行。所以我需要让编译器使用**寄存器**而不是将其存储在**RAM**中。

MSDN 说：

> register 关键字指定变量将存储在机器寄存器中，**如果可能的话**。

这是我尝试过的：

```
for(register int i = 0; i < Size; i++) 
```

当我查看编译器生成的反汇编代码时，我看到：

```
012D4484  mov         esi,dword ptr [std::_Facetptr<std::codecvt<char,char,int> >::_Psave+24h (12DC5E4h)]  
012D448A  xor         ecx,ecx  
012D448C  push        edi  
012D448D  mov         edi,dword ptr [std::_Facetptr<std::codecvt<char,char,int> >::_Psave+10h (12DC5D0h)]  
012D4493  mov         dword ptr [Size],ebx  
012D4496  test        ebx,ebx  
012D4498  jle         FindBestAdd+48h (12D44B8h)  //FindBestAdd is the function the loop is in
012D449A  lea         ebx,[ebx] 
```

我希望汇编代码不会生成`dword ptr`where I used`register`关键字。

那么，我怎么知道编译器**是否**可以使用寄存器以及我应该怎么做才能强制编译器直接从寄存器读取/写入寄存器。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T13:35:21.800

该`register`关键字只是一个提示，大多数现代编译器都会忽略它。本质上，这是因为编译器比程序员更擅长优化和找出应该放在寄存器中的内容。

因此，您不能强制编译器使用寄存器，即使可以也不应该。如果您想要最佳速度，请在编译器设置中打开最大优化级别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T13:39:00.123

在您的情况下，如果您提供正确的优化选项，编译器很可能会使用寄存器。

通常，强制变量进入寄存器的唯一方法是使用内联汇编。

# java - Tomcat 7.0.29 servlet-api 类加载器问题

> ID：13764078
> 
> 赞同：5
> 
> 时间：2012-12-07T13:29:25.953
> 
> 标签：java, tomcat, servlets, classloader

我目前正在尝试将我们的构建从手动过程（MyEclipse / export as war）更改为自动 Maven 构建。

MyEclipse 构建的 war 应用程序在我们的 Tomcat 7.0.29 安装 (Windows 7) 上部署并运行良好。在 MyEclipse 构建路径中，我们配置了一个用户库（tomcat），其中包含来自`$CATALINA_HOME/lib`.

我们有一些使用 javax.servlet.http.* 类（HttpSessionEvent 等）的 servlet 侦听器和过滤器。它们包装在`WEB-INF\classes\com\mycompany\filters`

在部署由 Maven 构建的战争时，我开始`NoClassDefFoundError`上课`HttpSessionEvent`。我使用 -verbose:class JVM 选项进行了跟踪，我看到最后一个加载的类是我从 `c:\apache\webapps\myapp\WEB-INF\classes\com\mycompany\filters`目录中过滤的过滤器。然后我尝试加载/查找 HttpSessionEvent 并且无法这样做。

`servlet-api.jar`当然是在我的目录`$CATALINA_HOME\lib`中。

在我的 pom.xml 我有这个依赖

```
 <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-servlet-api</artifactId>
        <version>7.0.29</version>
        <scope>provided</scope>
    </dependency> 
```

我的路径/类路径中的任何地方都没有其他 servlet-api.jar 文件（也仔细检查了我的 jdk 和 jre 的 lib/ext 和背书目录）

我的 Maven 依赖项：树看起来像这样：

```
[INFO] +- log4j:log4j:jar:1.2.15:compile
[INFO] |  \- javax.mail:mail:jar:1.4:compile
[INFO] +- jstl:jstl:jar:1.2:compile
[INFO] +- org.jdom:jdom:jar:1.1:provided
[INFO] +- com.sun.xml.rpc:jaxrpc-impl:jar:1.1.3_01:provided
[INFO] |  +- javax.xml:jaxrpc-api:jar:1.1:provided
[INFO] |  +- com.sun.xml.messaging.saaj:saaj-impl:jar:1.3:provided
[INFO] |  |  \- javax.xml.soap:saaj-api:jar:1.3:provided
[INFO] |  +- com.sun.xml.rpc:jaxrpc-spi:jar:1.1.3_01:provided
[INFO] |  \- com.sun.xml.fastinfoset:FastInfoset:jar:1.0.2:provided
[INFO] +- org.apache.lucene:lucene-core:jar:3.6.0:compile
[INFO] +- org.springframework:spring-context:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework:spring-beans:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework:spring-core:jar:3.1.0.RELEASE:compile
[INFO] |  |  \- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] |  +- org.springframework:spring-expression:jar:3.1.0.RELEASE:compile
[INFO] |  \- org.springframework:spring-asm:jar:3.1.0.RELEASE:compile
[INFO] +- org.springframework:spring-web:jar:3.1.0.RELEASE:compile
[INFO] |  \- aopalliance:aopalliance:jar:1.0:compile
[INFO] +- org.springframework:spring-orm:jar:3.1.0.RELEASE:compile
[INFO] |  +- org.springframework:spring-jdbc:jar:3.1.0.RELEASE:compile
[INFO] |  \- org.springframework:spring-tx:jar:3.1.0.RELEASE:compile
[INFO] +- org.springframework:spring-aop:jar:3.1.0.RELEASE:compile
[INFO] +- org.springframework:spring-test:jar:3.1.0.RELEASE:test
[INFO] +- org.aspectj:aspectjrt:jar:1.7.1:compile
[INFO] +- org.aspectj:aspectjweaver:jar:1.7.1:compile
[INFO] +- javax.faces:javax.faces-api:jar:2.1:compile
[INFO] +- com.sun.faces:jsf-impl:jar:2.1.15:compile
[INFO] +- org.primefaces:primefaces:jar:3.4.2:compile
[INFO] +- org.richfaces.core:richfaces-core-api:jar:4.2.3.Final:compile
[INFO] |  \- com.google.guava:guava:jar:11.0.2:compile
[INFO] |     \- com.google.code.findbugs:jsr305:jar:1.3.9:compile
[INFO] +- org.richfaces.ui:richfaces-components-ui:jar:4.2.3.Final:compile
[INFO] |  \- org.richfaces.ui:richfaces-components-api:jar:4.2.3.Final:compile
[INFO] +- org.apache.tomcat:tomcat-servlet-api:jar:7.0.29:provided
[INFO] +- org.slf4j:slf4j-log4j12:jar:1.7.2:compile
[INFO] |  \- org.slf4j:slf4j-api:jar:1.7.2:compile
[INFO] +- org.hibernate:hibernate-core:jar:3.6.2.Final:compile
[INFO] |  +- antlr:antlr:jar:2.7.6:compile
[INFO] |  +- commons-collections:commons-collections:jar:3.1:compile
[INFO] |  +- dom4j:dom4j:jar:1.6.1:compile
[INFO] |  +- org.hibernate:hibernate-commons-annotations:jar:3.2.0.Final:compile
[INFO] |  +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.0.Final:compile
[INFO] |  \- javax.transaction:jta:jar:1.1:compile
[INFO] +- org.hibernate:hibernate-entitymanager:jar:3.6.2.Final:compile
[INFO] |  +- cglib:cglib:jar:2.2:compile
[INFO] |  |  \- asm:asm:jar:3.1:compile
[INFO] |  \- javassist:javassist:jar:3.12.0.GA:compile
[INFO] +- org.hibernate:hibernate-validator:jar:4.1.0.Final:compile
[INFO] |  \- javax.validation:validation-api:jar:1.0.0.GA:compile
[INFO] +- org.apache.commons:commons-email:jar:1.2:compile
[INFO] |  \- javax.activation:activation:jar:1.1:compile
[INFO] +- junit:junit:jar:4.11:test
[INFO] |  \- org.hamcrest:hamcrest-core:jar:1.3:test
[INFO] \- com.h2database:h2:jar:1.3.170:test 
```

我已经在互联网上搜索了一段时间，从我读到的内容来看，这一定与 tomcat 类加载器有关。我的战争包装很可能有问题。但是，我还没有找到解决方案。

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:37:37.810

您是否检查过`WEB-INF/lib`已构建的 .war 以绝对确定`servlet-api.jar`不存在？据我所知，Maven 依赖项具有正确的范围。

您`build`在 pom.xml 中的部分应与此类似：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <warName>war_name</warName>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

不，不要放在`servlet-api.jar`您的网络应用程序的`WEB-INF/lib`文件夹中。另外，我认为您不需要tomcat 用户库。您需要的唯一库是`JRE System Library xx`Maven `Dependencies`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:39:09.797

[在 Tomcat 中类加载](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)这将帮助您理解。

把你的罐子放在**/WEB-INF/lib**

> 应用程序类加载器 — 为部署在单个 Tomcat 实例中的每个 Web 应用程序创建一个类加载器。Web 应用程序的 /WEB-INF/classes 目录中的所有解压类和资源，以及 Web 应用程序的 /WEB-INF/lib 目录下的 JAR 文件中的类和资源，对这个 Web 应用程序可见，但不给其他人。

# php - 基于多个复选框数组的jQuery PHP AJAX过滤器

> ID：13764087
> 
> 赞同：0
> 
> 时间：2012-12-07T13:29:45.010
> 
> 标签：php, jquery, ajax

我希望有人能指出我正确的方向。我主要是一名 PHP 开发人员，但由于我们收到越来越多的 AJAX 工作请求，我真的想更多地了解 jquery 和 javascript。

基本上我有一个可以正常工作的侧边栏过滤器。它基于 3 件事。一个组、类别和子类别。例如，Boots 作为类别，Leather（类型）作为子类别，Black（颜色）作为第三级过滤器。目前它基于`GET`表单工作。但是，我想改用实时过滤器，以便当他们单击 a`checkbox`时，它会根据查询更新结果。我可以为此编写所有 PHP，但我正在努力通过 jQuery 将数据汇总在一起。我看过使用 jQuery`.each`和`.change`.

有 3 组复选框，它们都基于数组。再举一个例子：`category[]`, `subcategory[]`, `tertiary[]`.

在此先感谢您的帮助。

一些示例 HTML

```
<input id="$ProdCatLabel" class="side_filter_checkbox" name="ProdCatFil[]" type="checkbox" value="$ProdCat">
<input id="$ProdSubCatLabel" class="side_filter_checkbox" name="ProdSubCatFil[]" type="checkbox" value="$ProdSubCat">
<input id="$BrandingLabel" class="side_filter_checkbox" name="BrandFil[]" type="checkbox" value="$Branding"> 
```

我的尝试：

```
var prodcats = $('side_filter_prodcats[name="ProdCatFil[]"]:checked')
                   .map(function() { return $(this).val() })
                   .get()
                   .join(",");

var prodsubcats = $('side_filter_prodsubcats[name="ProdSubCatFil[]"]:checked')
                   .map(function() { return $(this).val() })
                   .get()
                   .join(",");

$.ajax({
    type: "POST",
    url: "[ENTER PHP URL HERE]",   
    data: "ProdCats=" + prodcats + "ProdSubCats=" + prodsubcats,                                        
    success: function(msg) { $(".content_area").html(msg); }
}); 
```

我在这里吠叫正确的树吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:22:29.203

好的，假设您的复选框具有类`category`,`subcategory`和`tertiary`. 您可以将单击事件处理程序附加到调用函数以加载正确数据的每个组，将复选框值和类或数据属性作为参数传递给函数。

```
// Your main DOM ready function
$(document).ready(function() {

    // Checkboxes click function
    $('input[type="checkbox"]').on('click',function(){
        // Here we check which boxes in the same group have been selected
        // Get the current group from the class
        var group = $(this).attr("class");
        var checked = [];

        // Loop through the checked checkboxes in the same group
        // and add their values to an array
        $('input[type="checkbox"].' + group + ':checked').each(function(){
            checked.push($(this).val());
        });

        refreshData(checked, group);
    });

    function refreshData($values, $group){
        // Your $values variable is the array of checkbox values
        // ie. "boot", "shoe" etc
        // Your $group variable is the checkbox group
        // ie. "category" or "subcategory" etc.
        // Now we can perform an ajax call to post these variable to your php
        // script and display the returned data

        $.post("/path/to/data.php", { cats: $values, type: $group }, function(data){
            // Maybe output the returned data to a div
            $('div#result').html(data);
        });
    }

}); 
```

以下是复选框单击功能的示例：http: [//jsfiddle.net/F29Mv/1/](http://jsfiddle.net/F29Mv/1/)

# sharepoint-2010 - 以编程方式将数据复制到 SpFieldChoice 字段 SharePoint 2010 时出错

> ID：13764096
> 
> 赞同：0
> 
> 时间：2012-12-07T13:30:06.930
> 
> 标签：sharepoint-2010

我是 sharepoint 的新手，我有一个从 SpFieldChoice 派生的自定义字段类型，我的字段允许用户选择多个值，我需要用新列替换一些旧的自定义列并将旧列中的数据复制到新列. 旧列还允许用户通过勾选复选框来选择多个值，我有以下代码将数据复制到新字段。

```
foreach (SPListItem item in list.Items)
{
    if (item[oldField.Title] == null)
    {
        item[newFld.Title] = string.Empty;
        item.Update();
    }
    else
    {
        string[] itemvalues = item[oldField.Title].ToString().Split(new string[] {";#"}, StringSplitOptions.None);
        StringBuilder multiLookupValues = new StringBuilder();
        multiLookupValues.Append(";#");
        for (int cnt = 0; cnt < (itemvalues.Length) / 2; cnt++)
        {
           multiLookupValues.Append (itemvalues[(cnt * 2) + 1].ToString() + ";#");
        }
        item[newFld.Title] = multiLookupValues.ToString();  
        item.SystemUpdate(false) ;
    }
} 
```

这段代码可以正常工作，直到生成的 stringbuilder 的长度小于 255 charachters ，但是当这个长度大于 255 时，我得到以下异常。无效的选择值。选择字段包含无效数据。请检查值并重试。

有没有其他方法可以将数据复制到 SpFiledChoice，我该如何解决这个问题？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:55:08.980

多次更新，使字符串不超过 - 即值 +=。但是，如果问题是该值不能超过 255，则必须考虑如何进行选择。如果它超过长度并且多次更新值不起作用（并且站点列将具有相同的限制），您可以做下一个最好的事情：

1) 创建一个包含选项的新列表 2) 将目标字段更改为查找 3) 为每个项目相应更新（从查找字段中获取 ID）

这没有限制。

大卫·斯特林

david_sterling@sterling-consulting.com

www.sterling-consulting.com

# visual-studio-2010 - 上传 webpart 后无访问消息显示为红色

> ID：13764097
> 
> 赞同：1
> 
> 时间：2012-12-07T13:30:09.943
> 
> 标签：visual-studio-2010, sharepoint, sharepoint-2010, sharepoint-2007

我需要对 webpart 中的控件模板进行更改。因此，我将 webpart 代码从 prod 带到我的开发机器上并建立了一个测试站点。

我已将 webpart 上传到测试站点，并且 webpart 区域中显示“No Access”。我是否需要按照任何特殊步骤上传带有用户控件或控件模板的 Web 部件。

# c# - c#net连接器插入mysql系统日期时间错误

> ID：13764099
> 
> 赞同：0
> 
> 时间：2012-12-07T13:30:18.067
> 
> 标签：c#, mysql, datetime

我正在使用 mysql 网络连接器，我想插入一些数据，没有日期时间它可以工作，但有日期时间它会出错。我的代码是；

```
da.InsertCommand = new MySqlCommand("INSERT INTO orders( VALUES('',@ORDER_DATE, @DATE_SHIPMENT, @PRODUCT_ID, @QUANTITY, @CUSTOMER_ID, @INVOICE_FEE, @PROD_TYPE, @BRAND, @MODEL, @PRICE, @VAT)", cs);
da.InsertCommand.Parameters.Add("ORDER_DATE", MySqlDbType.DateTime).Value = oRDER_DATEDateTimePicker.Text;
da.InsertCommand.Parameters.Add("DATE_SHIPMENT", MySqlDbType.DateTime).Value = dATE_SHIPMENTDateTimePicker.Text;
da.InsertCommand.Parameters.Add("PRODUCT_ID", MySqlDbType.Int32).Value = pRODUCT_IDTextBox.Text;
da.InsertCommand.Parameters.Add("QUANTITY", MySqlDbType.Decimal).Value = qUANTITYTextBox.Text;
da.InsertCommand.Parameters.Add("CUSTOMER_ID", MySqlDbType.Int32).Value = textiD.Text;
da.InsertCommand.Parameters.Add("INVOICE_FEE", MySqlDbType.VarChar).Value = comboBoxfee.Text;
da.InsertCommand.Parameters.Add("PROD_TYPE", MySqlDbType.VarChar).Value = pROD_TYPETextBox.Text;
da.InsertCommand.Parameters.Add("BRAND", MySqlDbType.VarChar).Value = bRANDTextBox.Text;
da.InsertCommand.Parameters.Add("MODEL", MySqlDbType.VarChar).Value = mODELTextBox.Text;
da.InsertCommand.Parameters.Add("PRICE", MySqlDbType.Decimal).Value = pRICETextBox.Text;
da.InsertCommand.Parameters.Add("VAT", MySqlDbType.Decimal).Value = vATTextBox.Text;

cs.Open();
da.InsertCommand.ExecuteNonQuery();
cs.Close(); 
```

错误是：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'VALUES('','0007-12-2012 00:00:00', '0007-12-2012 00:00:00 附近使用正确的语法

我猜我的日期时间格式没有被mysql识别，在我的winform oRDER_DATEDateTimePicker.Text 和dATE_SHIPMENTDateTimePicker.Text 是短日期时间。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:48:59.203

您的查询中似乎有一些拼写错误：

```
da.InsertCommand = new MySqlCommand("INSERT INTO orders( VALUES('',@ORDER_DATE, @DATE_SHIPMENT, @PRODUCT_ID, @QUANTITY, @CUSTOMER_ID, @INVOICE_FEE, @PROD_TYPE, @BRAND, @MODEL, @PRICE, @VAT)", cs);
                                                      ^^^     ^^ 
```

`VALUES`在和之间放一个空格`(`，并去掉 后面的括号`orders`：

```
da.InsertCommand = new MySqlCommand("INSERT INTO orders VALUES ('',@ORDER_DATE, @DATE_SHIPMENT, @PRODUCT_ID, @QUANTITY, @CUSTOMER_ID, @INVOICE_FEE, @PROD_TYPE, @BRAND, @MODEL, @PRICE, @VAT)", cs); 
```

其次，（正如其他人所提到的），您没有使用正确的 DateTime 格式。MySQL 将接受`DateTime.Parse`作为输入，但它也应该接受以下格式的字符串：

```
yyyy-MM-dd HH:mm:ss 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:34:01.583

而不是添加 (作为更广泛问题的单个示例) `dATE_SHIPMENTDateTimePicker.Text`，使用`DateTime.Parse`(etc) 将*实际*值作为 a `DateTime`，并添加：

```
var when = DateTime.Parse(dATE_SHIPMENTDateTimePicker.Text);
da.InsertCommand.Parameters.Add(
   "DATE_SHIPMENT", MySqlDbType.DateTime).Value = when; 
```

这同样适用于**所有**参数；整数、日期、小数等。事实上，在同一个方法中简单地使用数据库代码（命令等）和 UI 代码（文本框）告诉我有些事情是非常错误的：理想情况下，你可以通过某个方法来获得它**输入**参数：

```
void CreateOrder(int foo, string bar, DateTime baz, decimal blop, ...)
{
   ...
} 
```

UI 的工作是将人工输入转化为对其他层有意义的真实值，例如您的数据访问代码。

*正确*完成后，UI 将处理解析，然后调用一个对 UI**一无所知**的单独方法与数据库对话。

另一种方法是让 UI 构建具有类型成员的对象并将其传递：

```
void CreateOrder(Order order)
{
    ...
} 
```

然后用户界面会：

```
var order = new Order();
order.Id = /* todo... */
/* ...for each property... */
CreateOrder(order); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:36:30.840

`MySqlDbType.DateTime`想要`DateTime`作为参数，而不是`string`.

使用`DateTime.Parse(oRDER_DATEDateTimePicker.Text)`或`DateTime.ParseExact(oRDER_DATEDateTimePicker.Text, format)`其中格式是您选择的日期的自定义格式。它可以是`"yyyy-DD-MM"`你想要或需要的任何其他东西。

# batch-file - 删除文件的批处理脚本

> ID：13764103
> 
> 赞同：106
> 
> 时间：2012-12-07T13:30:29.707
> 
> 标签：batch-file

我有一个批处理脚本如下。

```
D:
del "D:\TEST\TEST1\Archive\*.TSV" 
del "D:\TEST\TEST1\Archive\*.TXT"
del "D:\TEST\TEST2\Archive\*.TSV" 
del "D:\TEST\TEST2\Archive\*.TXT"
del "D:\TEST\TEST 100%\Archive\*.TSV" 
del "D:\TEST\TEST 100%\Archive\*.TXT" 
```

上面的代码从除文件夹之外的所有文件夹中删除所有“.txt”和“.tsv”文件`TEST 100%`。为了从中删除文件，`TEST 100%`我收到错误消息`The Path could not be found`。我猜文件夹名称中的 % 符号会造成问题。谁能指导我解决问题并从文件夹中删除文件`TEST 100%`？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-12-07T13:35:48.843

你需要用另一个逃避 % ......

```
del "D:\TEST\TEST 100%%\Archive*.TXT" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-18T21:54:46.783

有多种方法可以批量处理，所以如果以双倍百分比转义`%%`对你不起作用，那么你可以尝试这样的事情：

```
set olddir=%CD%
cd /d "path of folder"
del "file name/ or *.txt etc..."
cd /d "%olddir%" 
```

这是如何工作的：

`set olddir=%CD%`将变量`"olddir"`或您喜欢的任何其他变量名称设置为启动批处理文件的目录。

`cd /d "path of folder"`更改批处理将要查看的当前目录。保留引号并将文件夹的路径更改为您的目标路径。

`del "file name/ or *.txt etc..."`将删除您的批处理正在查看的当前目录中的文件，只是不要在文件名之前添加目录路径，而只有完整的文件名，或者删除具有相同扩展名的多个文件`*.txt`或您需要的任何扩展名。

`cd /d "%olddir%"`获取使用旧路径保存的变量并返回到您开始批处理的目录，如果您不希望批处理返回到其先前的目录路径，这并不重要，就像变量名可以更改为之前所述随心所欲地改变`set olddir=%CD% line`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-05-29T19:12:21.233

假设您将软件保存到桌面上。
如果你想像卸载程序一样删除整个文件夹，你可以使用它。

```
cd C:\Users\User\Detsktop\
rd /s /q SOFTWARE 
```

这将删除名为 software 的整个文件夹及其所有文件和子文件夹

**确保删除正确的文件夹，因为这没有是/否选项**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-03T15:36:06.200

考虑到您需要删除的文件具有扩展名`txt`并且位于 location`D:\My Folder`中，那么您可以在 bat 文件中使用以下代码。

```
cd "D:\My Folder"
DEL *.txt 
```

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2013-11-07T06:59:35.513

在批处理代码中，您的路径不应包含任何空格，因此请将文件夹名称从“TEST 100%”更改为“TEST_100%”，您的新代码将是 del“D:\TEST\TEST_100%\Archive*.TXT”

希望这能解决你的问题

# css - How to align 3 div's side by side in a footer Div(fixed position)

> ID：13764105
> 
> 赞同：4
> 
> 时间：2012-12-07T13:30:48.850
> 
> 标签：css, html, alignment

This is feeling simple question but i'm struggling to get the exact output. I need to align 3 div's inside a div in footer. I have tried lot in google, and worked before too. but in footer fixed position its not working exactly. ![enter image description here](../Images/b68cbcb8ece9b5550cb38951c38602ee.png)

In that image, white color container div for footer, red- left, green -right, and center.

here is my CSS :

```
div .footer-container
{
    height:53px;
    width:100%;
    position:fixed;
}

div .footer-container div .footer-left
{
    background-color:#f00;
    float:left;
    width:33%;
    height:31px;
}

div .footer-container div .footer-right
{
    background-color:#0f0;
    float:right;
    width:33%;
    height:31px;
}

div .footer-container div .footer-center
{
    background-color:#f0f;
    margin:0 auto;
    height:31px;
    width:33%;
} 
```

here is HTML :

```
<div data-role = "footer" class="footer-container">
                <div>
                <div class="footer-left"></div>
                <div class="footer-right"></div>
                <div class="footer-center"></div>
                </div>
            </div> 
```

What am doing wrong ? pls explain.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:43:33.527

Get rid of all the floats. Add Display: inline-block to each of the three inner div's and adjust their width (to 32%) so they fit side by side.

```
 div .footer-container {    
        height:53px;     
        width:100%;     
        position:fixed; 
        background:#ccc 
    } 
    div .footer-container div .footer-left {     
        background-color:#f00;     
        display: inline-block;     
        width:32%;     
        height:31px; 
    } 
    div .footer-container div .footer-right {     
        background-color:#0f0;     
        display: inline-block;     
        width:32%;     
        height:31px; 
    } 
    div .footer-container div .footer-center {    
        background-color:#f0f;   
        display: inline-block;  
        margin:0 auto;     
        height:31px;     
        width:32%; 
    }​ 
```

Here is a [FIDDLE](http://jsfiddle.net/jcurran/y8ekf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:32:50.617

Make the middle div also float left. If that doesn't help, give the three child divs the property `position:relative` or `position:static`.

If that doesn't help, I suspect the problem lies in your html code.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:51:23.233

This is because you center div don't have float,

Add this code to div .footer-container div .footer-center

```
float: left or float:right 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T13:53:28.433

use float:left

here's my code

```
<div style="width:100%; background-color:#FF6600">

<div style="width:33%; background-color:#FF1100; float:left">div1</div>
<div style="width:33%; background-color:#FF6655; float:left">div2</div>
<div style="width:33%; background-color:#FF3333; float:left">div3</div>

</div> 
```

This should work, u lose 1% of width, but it works great for me.. the colors are just to see the 3 differnt divs.. u can put it into css..right?

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T13:58:32.237

Take the floats off the left and right and absolutely position them inside the container. This is assuming you want to accomplish what the image is showing. If you just want all 3 side by side your CSS works fine, just remove everything from the names but the class names (like I have it below)

[http://jsfiddle.net/calder12/rnjtb/2](http://jsfiddle.net/calder12/rnjtb/2)

```
.footer-container
{
height:53px;
width:100%;
position:fixed;
}

.footer-left
{
background-color:#f00;
width:33%;
height:31px;
position:absolute;
bottom:0;
left:0;
}

.footer-right
{
background-color:#0f0;
width:33%;
height:31px;
position:absolute;
bottom:0;
right:0;
}

.footer-center
{
background-color:#f0f;
margin:0 auto;
height:31px;
width:33%;
}   ​ 
```

# java - 使用 Joda 时间比较两个日期

> ID：13764106
> 
> 赞同：35
> 
> 时间：2012-12-07T13:30:48.633
> 
> 标签：java, date, time, jodatime

我想比较两个日期，但是我遇到了麻烦。一个日期是从一个`java.util.date`对象创建的，另一个是手动制作的。以下代码是一个示例：

```
Date ds = new Date();
DateTime d = new DateTime(ds);

DateTime e = new DateTime(2012,12,07, 0, 0);
System.out.println(d.isEqual(e)); 
```

然而，测试结果`false`。我猜是因为时间的缘故。如何检查这两个日期是否彼此相等（我的意思是年、月、日相同）？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-07T13:35:22.747

```
System.out.println(d.toDateMidnight().isEqual(e.toDateMidnight())); 
```

或者

```
System.out.println(d.withTimeAtStartOfDay().isEqual(e.withTimeAtStartOfDay())); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-02-04T13:08:21.610

您应该使用**toLocalDate()**：

```
date1.toLocalDate().isEqual(date2.toLocalDate()) 
```

这将摆脱 DateTime 的 Time 部分。

还有另一种方法，但它没有考虑两个日期具有不同时区的情况，因此不太可靠：

```
date1.withTimeAtStartOfDay().isEqual(date2.withTimeAtStartOfDay()) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-20T19:32:30.547

```
return DateTimeComparator.getDateOnlyInstance().compare(first, second); 
```

通过[如何比较没有时间部分的两个日期？](https://stackoverflow.com/questions/1439779/how-to-compare-two-dates-without-the-time-portion)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-07T17:29:04.867

如果您想忽略时间组件（即您只想比较日期），您可以使用 DateMidnight 类而不是 Date Time。因此，您的示例将如下所示：

```
Date ds = new Date();
DateMidnight d = new DateMidnight(ds);

DateMidnight e = new DateMidnight(2012, 12, 7);
System.out.println(d.isEqual(e)); 
```

但请注意，它只会在今天打印“true”:)

另请注意，默认情况下，JDK Date 和所有 Joda-Time 即时类（包括 DateTime 和 DateMidnight）都是使用默认时区构造的。因此，如果您创建一个日期以在代码中进行比较，但从数据库中检索另一个日期，该日期可能以 UTC 存储日期，假设您不在 UTC 时区，您可能会遇到不一致。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T13:34:19.207

由于它们是 DateTime 对象，因此在比较它们时也会考虑它们的时间部分。尝试将第一个日期的时间部分设置为 0，例如：

```
d = d.withTime(0, 0, 0, 0); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-09T15:09:19.193

我在寻找与今天的比较时偶然发现了这个问题。以下是您可以将日期与今天进行比较的方法：

```
date1.toLocalDate().isBeforeNow() // works also with isAfterNow 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-21T09:56:10.910

这是一种对我有用的静态方法。

```
public static boolean isSameDay(DateTime date1, DateTime date2){
    return date1.withTimeAtStartOfDay().isEqual(date2.withTimeAtStartOfDay());
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-01-07T13:45:50.207

```
DateTimeComparator.getDateOnlyInstance().compare(obj1, obj2); 
```

obj1 和 obj2 可以是 String、Long、Date(java.util)... 详情见 [http://www.joda.org/joda-time/apidocs/index.html?org/joda/time/DateTimeComparator .html](http://www.joda.org/joda-time/apidocs/index.html?org/joda/time/DateTimeComparator.html)

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2012-12-07T13:40:56.367

编写自己的方法

```
public boolean checkEqual(DateTime first,DateTime second){
     if(first.<getterforyear> == second.<getterforyear> && first.<getterformonth> == second.<getterformonth> && first.<getterforday> == second.<getterforday>){
         return true;
  }
 return false;
} 
```

# c++ - 如何在另一个对象中引用一个对象

> ID：13764109
> 
> 赞同：0
> 
> 时间：2012-12-07T13:31:05.783
> 
> 标签：c++, oop, pointers, pass-by-reference

我正在尝试编写具有 4 个观点的应用程序。我想要一个场景对象，所有视口都引用了什么。我想做的是，如果场景对象发生变化，所有视点都会更新。这是我现在尝试实现它的方式：

```
#include <iostream>
#include <vector>

using namespace std;

class Scene
{
};

class Viewport
{
    public:
        Viewport( Scene &scene );
        void draw();

    private:
        Scene           *mScene;
};

Viewport::Viewport( Scene &scene )
{
    cout << mScene << endl;
    cout << &scene << endl;
    mScene = &scene;
    cout << mScene << endl;
    cout << &scene << endl << endl;
}

void Viewport::draw()
{
    cout << &mScene << endl;
}

int main( int argc, char *argv[] )
{
    Scene mScene;
    vector<Viewport> mViewPorts;

    mScene = Scene();

    cout << "init: " << endl;
    for( int i = 0; i < 4; i++ )
        mViewPorts.push_back( Viewport( mScene ) );

    cout << "main: " << endl;
    cout << &mScene << endl << endl;

    cout << "draw: " << endl;
    for( int i = 0; i < 4; i++ )
        mViewPorts[i].draw();
} 
```

**我的问题如下**

1\. 现在，第一个视口初始化一个空场景指针，地址为 CCCCCCCC。此获取已更新为主场景的地址。这就是我想要达到的目标。

```
CCCCCCCC <- mScene before
0016FBD3 <- &scene before
0016FBD3 <- mScene after
0016FBD3 <- &scene after 
```

**然而，其他观点已经开始于正确的地址，而不是 CCCCCCCC。**为什么会这样？

对于视口 2、3、4，它看起来像这样：

```
0016FBD3
0016FBD3
0016FBD3
0016FBD3 
```

2\. 然而，我的主要问题是我的概念不起作用。当我调用 draw() 时，所有视口的地址都与我之前设置的**地址完全不同。**

```
draw:
00398730
00398734
00398738
0039873C 
```

为什么会发生这些情况，**解决上述问题的正确方法是什么**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:35:23.833

您正在绘制中输出引用的地址。

您正在存储一个`Scene*`in `mScene`。然后，您将获取该指针的地址，该地址对于类的每个实例都是不同的。

我不知道另一个问题发生了什么。您是否可以尝试使用不同的场景实例初始化另一个视口，看看是否可行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:51:14.420

> 1.  现在，第一个视口初始化一个空场景指针，地址为 CCCCCCCC。此获取已更新为主场景的地址。这就是我想要达到的目标。

```
CCCCCCCC <- mScene before
0016FBD3 <- &scene before
0016FBD3 <- mScene after
0016FBD3 <- &scene after 
```

> 然而，其他观点已经开始于正确的地址，而不是 CCCCCCCC。为什么会这样？

您在为其分配值之前打印 mScene，因此无论在内存中存在什么垃圾值都会显示 - 显然它恰好是 CCCCCCCC，但是如果您在此处或那里稍微更改程序，或者更改编译器或优化级别，你可能会得到一个完全不同的值。您甚至可能在每次运行程序时得到不同的值，否则程序可能会崩溃。从尚未设置的变量中读取值是未定义的行为。简单地说，你的代码`cout << mScene << endl;`需要从 mScene 中读取来打印它，这在`=`赋值之后是可以的，但之前不行。

> 对于视口 2、3、4，它看起来像这样：

```
0016FBD3
0016FBD3
0016FBD3
0016FBD3 
```

看起来是这样的，因为当您构造每个临时视口来推回它们时，它们几乎肯定是在程序堆栈中的同一位置构造的……最初 CCCCCCCC 的内存内容已被上一次该内存的值覆盖用于之前的 Viewport 对象，但由于读取的值没有重置为任何内容，因此您会看到来自早期 Viewport 的旧值。

> 1.  然而，我的主要问题是我的概念不起作用。当我调用 draw() 时，所有视口的地址都与我之前设置的地址完全不同。

```
draw:
00398730
00398734
00398738
0039873C 
```

> 为什么会发生这些，解决上述问题的正确方法是什么？

每个视口对象都包含一个指向场景的指针。您只有一个场景，但四个视口在显示的内存地址处有四个不同的指针，所有指针都包含单个场景的相同地址。

如果您打印 mScene 而不是 &mScene 您将看到您期望的值。

# javascript - LESS Css 在计算 js 变量时失败？

> ID：13764110
> 
> 赞同：4
> 
> 时间：2012-12-07T13:31:08.293
> 
> 标签：javascript, html, css, less

我是新手`LESS CSS`。当我在下面使用`html`并`LESS css`编码时，输出出现错误。

请解决这个问题。

**索引.html**

```
<!DOCTYPE HTML>
<html>
<head>
<title>LESS CSS</title>
<script type="text/javascript" src="../_s/jquery.js"></script>
<link rel="stylesheet/less" type="text/css" href="test.less" />
<script src="less.js" type="text/javascript"></script>
</head>
<body>

<div id="box"></div>

</body>
</html> 
```

**无测试**

```
@color : #2AA4CF;
@clientHeight: ~`$.trim( $(window).height() ) + 'px'`;
#box
{
    position: absolute;
    background-color: darken(@color, 10%);
    width: 300px;
    height: @clientHeight - 100;
} 
```

输出错误

```
Object # has no method 'operate'
in test.less 
at e.Operation.eval (http://localhost/frames/006/less.js:9:11151)
at Object.e.Expression.eval (http://localhost/frames/006/less.js:9:3533)
at Object.e.Value.eval (http://localhost/frames/006/less.js:9:18173)
at e.Rule.eval (http://localhost/frames/006/less.js:9:12727)
at Object.e.Ruleset.eval (http://localhost/frames/006/less.js:9:13904)
at Object.e.Ruleset.eval (http://localhost/frames/006/less.js:9:13904)
at Object.toCSS (http://localhost/frames/006/less.js:8:10291)
at http://localhost/frames/006/less.js:9:20740
at http://localhost/frames/006/less.js:8:1157
at Object.p.parse (http://localhost/frames/006/less.js:8:10899) 
```

请给我一个解决方案...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T14:18:13.243

你有两个问题。首先：

```
`$.trim( $(window).height() ) + 'px'` 
```

此代码`"400px"`的计算结果为（注意引号`"`）。这将使 CSS 规则无效，因为它不使用引号。此外，由于返回整数，`$.trim`因此是多余的。`.height()`

第二个问题：

```
height: @clientHeight - 100; 
```

这将采用先前创建的字符串并尝试对其执行非法数学运算。这就是引发错误的原因。

您可以这样做：

```
@color : #2AA4CF;
@clientHeight: `$(window).height()-100`;
#box
{
    position: absolute;
    background-color: darken(@color, 10%);
    width: 300px;
    height: 0px + @clientHeight
} 
```

最后的代码`0px + @clientHeight`只是添加`px`到变量中的一个技巧。

您可能可以使用纯 CSS 来解决您的任务，而不是使用以下代码在 LESS 中计算（并在窗口调整大小时使其缩放）：

```
html,body{ height:100% }
#box{ position:absolute; top:0; bottom:100px } 
```

# c - 可以使用数组参数从 Fortran 调用标量 C 函数吗？

> ID：13764113
> 
> 赞同：4
> 
> 时间：2012-12-07T13:31:17.747
> 
> 标签：c, interop, fortran, fortran2003, fortran-iso-c-binding

我最近遇到了一种情况，我想从 Fortran 调用一个 C 函数，因为一个有用的 C 代码片段。为了方便数组操作，我也希望能够使用数组参数调用这个函数，但它只接受标量参数。

在 Fortran 中，当然可以简单地声明一个过程来`elemental`实现这一点，并且可以声明一个 C 过程的接口`bind(C)`。但是，由于 C 没有基本过程的概念，因此 Fortran (2008) 标准排除了这种组合：

> C1246 基本过程不应具有 BIND 属性。

那么，这个功能可以在 Fortran 中实现吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T13:31:17.747

经过一番搜索，我发现使用 Fortran 2003 和`iso_c_binding`内部模块，这既可行又非常简单；我想我应该在这里记录一下。具有该`bind`属性的接口仍然可以存在`pure`，因此可以在本身的 Fortran 过程中引用它`elemental`。

以下是 C99 宏的简短示例，`isnan`如果其参数为 NaN，则返回非零整数值。当然，这也可以用于任何没有副作用的用户定义的 C/C++ 函数。

```
elemental function isnan(val)
  use, intrinsic :: iso_c_binding
  implicit none

  real(c_double), intent(in) :: val
  logical(c_bool) :: isnan

  interface
    pure function isnan_C(val) bind(C, name = 'isnan')
      import
      ! Pass the parameter by value:
      real(c_double), value, intent(in) :: val
      integer(c_int) :: isnan_C
    end function
  end interface

  isnan = isnan_C(val) /= 0_c_int
end function 
```

使用具有一些 NaN 值的数组的示例输出：

```
program main
  use, intrinsic :: iso_c_binding
  implicit none

  real(c_double) :: nan(2,2) = 0.
  nan(:,2) = nan(1,1)/0.

  write(*,'(4F6.2 / 4L6)') nan, isnan(nan) ! Output: 0.00 0.00  NaN  NaN
                                           !            F    F    T    T
end program 
```

# asp.net - .Net 2.0 性能问题的自定义会话状态存储

> ID：13764118
> 
> 赞同：0
> 
> 时间：2012-12-07T13:31:30.060
> 
> 标签：asp.net, performance, postgresql, session-state

我使用 PostgresSql（驱动程序是 Npgsql）为 .Net 2.0 开发了一个自定义会话状态存储。定制商店运行良好，但我们面临一个严重的问题：性能。
如果不使用自定义状态，在高峰时间，CPU 利用率只有 10%，但使用自定义存储，CPU 利用率约为 100%。我们改为使用免费版的 Devart for Postgres，问题是一样的。
大约 1000 个会话（一个人可以使用我们的网页打开多个浏览器选项卡）每秒向我们的网络服务发出大约 2000 个请求。每个会话仅在会话创建时在 Session 中存储一个布尔值、一个字符串和一个整数。
我在 Postgres 中使用存储过程与数据库交互。
如果我更改配置文件以删除自定义会话，问题就解决了:((
任何使用自定义会话存储的人都面临性能问题？
Npgsql 中是否有任何性能问题（我使用的是最新的）？
请帮忙！

**更新 1**
我们使用来自 devart 的免费 dotconnect 更改为使用 DB 作为 Oracle 10g，问题是一样的。
**更新 2**
w3sp.exe 进程是最大的 CPU 消耗者 (90%)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:17:14.243

现在我确信如果每秒请求太多，使用 DB 的自定义会话存储会消耗大量 CPU。我们正在使用：CPU X3210，主 Intel S3000AH，Windows 2003 R2。每秒有 2000 个请求。

# java - 如何在 Google appengine 中加密 ZipOutputStream？

> ID：13764119
> 
> 赞同：2
> 
> 时间：2012-12-07T13:31:29.543
> 
> 标签：java, google-app-engine, google-cloud-storage, zipoutputstream

我正在使用 Java 在 GAE 中创建 zip 文件，使用 ZipOutputStream 将它们上传到 Google Cloud Storage。

但是我需要加密文件，但我不知道如何。

有谁知道如何在 Google Appengine 中加密 ZipOutputStream？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T23:45:51.743

下面是一个示例 Java 应用程序，它演示了将文本块写入 zip 存档中的 DES 加密文件。应用程序的输出：

```
CloudStorageZipCrypto GET starting.
Creating file...
File created.
Writing to file: /gs/writable:<snipped>
Wrote to, closed, and finalized the file.
Reading file contents...
READ: The woods are lovely and deep.
READ: But I have promises too keep. 
```

请注意，您也可以按相反的顺序执行此操作：将文件添加到 zip，*然后*加密 zip 文件。它只需要切换密码和压缩流的顺序。这是源代码：

```
package com.jeffterrace.appenginetest;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.nio.channels.Channels;
import java.security.InvalidKeyException;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;
import java.util.zip.ZipOutputStream;

import javax.crypto.Cipher;
import javax.crypto.CipherInputStream;
import javax.crypto.CipherOutputStream;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.DESKeySpec;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.google.appengine.api.files.AppEngineFile;
import com.google.appengine.api.files.FileReadChannel;
import com.google.appengine.api.files.FileService;
import com.google.appengine.api.files.FileServiceFactory;
import com.google.appengine.api.files.FileWriteChannel;
import com.google.appengine.api.files.GSFileOptions.GSFileOptionsBuilder;

/**
 * Sample AppEngine Java class that reads and writes an encrypted, zipped file.
 */
public class CloudStorageZipCrypto extends HttpServlet {

  // Google Cloud Storage bucket name.
  private final String bucket = "jefftest1";
  // File name within the bucket.
  private final String filename = "test1.zip";
  // Text file within the zip file.
  private final String textFilename = "test1.txt.crypt";
  // The full Cloud Storage path for accessing the file from App Engine.
  private final String gsPath = "/gs/" + bucket + "/" + filename;

  // App Engine file service instance.
  private FileService fileService = FileServiceFactory.getFileService();

  // Secret key for DES encryption (only first 8 bytes are used).
  private final String secretKey = "thereisnospoon";

  @Override
  public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
    resp.setContentType("text/plain");
    resp.getWriter().println("CloudStorageZipCrypto GET starting.");

    resp.getWriter().println("Creating file...");

    // Create the GCS file and open it for writing.
    GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
      .setBucket(this.bucket)
      .setKey(this.filename)
      .setAcl("public-read");
    AppEngineFile gcsFile = this.fileService.createNewGSFile(optionsBuilder.build());

    resp.getWriter().println("File created.");

    resp.getWriter().println("Writing to file: " + gcsFile.getFullPath());

    // Open a write channel to the GCS object.
    FileWriteChannel writeChannel = this.fileService.openWriteChannel(gcsFile, true);

    // Initialize what we need for encryption.
    DESKeySpec dks;
    SecretKeyFactory skf;
    SecretKey desKey;
    Cipher cipher;
    try {
      dks = new DESKeySpec(this.secretKey.getBytes());
      skf = SecretKeyFactory.getInstance("DES");
      desKey = skf.generateSecret(dks);
      cipher = Cipher.getInstance("DES");
      cipher.init(Cipher.ENCRYPT_MODE, desKey);
    } catch (Exception e) {
      resp.getWriter().println("Error initializing crypto: " + e);
      return;
    }

    // Create a zip file output stream and add a text file to it.
    ZipOutputStream zos = new ZipOutputStream(Channels.newOutputStream(writeChannel));
    zos.putNextEntry(new ZipEntry(textFilename));

    // Write some text to the file, through a cipher output stream so it gets encrypted.
    CipherOutputStream cos = new CipherOutputStream(zos, cipher);
    PrintWriter out = new PrintWriter(cos);
    out.println("The woods are lovely and deep.");
    out.println("But I have promises too keep.");

    // Close all the things
    out.close();
    cos.close();
    zos.close();
    writeChannel.closeFinally();

    resp.getWriter().println("Wrote to, closed, and finalized the file.");

    // Open the zip file back up from GCS
    gcsFile = new AppEngineFile(this.gsPath);
    FileReadChannel readChannel = fileService.openReadChannel(gcsFile, false);
    ZipInputStream zis = new ZipInputStream(Channels.newInputStream(readChannel));

    // Read in the first file as UTF-8.
    zis.getNextEntry();
    try {
      cipher.init(Cipher.DECRYPT_MODE, desKey);
    } catch (InvalidKeyException e) {
      resp.getWriter().println("Error initializing crypto: " + e);
      return;
    }
    CipherInputStream cis = new CipherInputStream(zis, cipher);
    BufferedReader reader = new BufferedReader(new InputStreamReader(cis, "UTF-8"));
    resp.getWriter().println("Reading file contents...");
    String line;
    while ((line = reader.readLine()) != null) {
      resp.getWriter().println("READ: " + line);
    }

    // Close all the things.
    reader.close();
    cis.close();
    zis.close();
    readChannel.close();
  }
} 
```

# jquery - 如何在 jquery 插件中使用特定于元素的设置？

> ID：13764125
> 
> 赞同：1
> 
> 时间：2012-12-07T13:31:54.860
> 
> 标签：jquery, jquery-plugins

我的代码如下所示：

```
(function($, window, undefined){
    var options, methods = {
        init : function(opts){

            options = $.extend({}, {
                width   : 800,
                height  : 600,
            }, opts);

            return this.each(function(){
                data = $(this).data('prodigal');
                if(!data){
                    $(this).data('prodigal', options).on('click', openl);
                }
            });
        },
    },
    openl = function(){
        console.log(options);
    };

    $.fn.prodigal = function(method) {
        // Method calling logic
        if ( methods[method] ) {
            return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.prodigal' );
        }
    };
})(jQuery) 
```

我称之为：

```
$('.view_title_images').prodigal({width: 500});
$('.glglg').prodigal({ width: 600 }); 
```

问题是当我输出`options`in时，`openl`我实际上得到的两个选择器都显示了`width`600 的设置。

直到最近，我将元素特定信息存储在元素数据标签上：`$(this).data('prodigal', options)`然后在我创建的每个函数中访问该数据，这样`openl`顶部就会有一行：`options = $(this).data('prodigal')`.

我确实尝试使用公共方法，但我似乎无法`$(this).data('prodigal', options).on('click', openl);`在行中绑定这些公共方法，它不断产生错误。

我是否还应该尝试将我的设置存储在我的元素数据标签中，或者我在构建 jQuery 插件时缺少什么？如何管理插件中的设置？

我搜索过的以前的主题似乎没有清楚地涵盖这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:31:52.057

正如@Matt 所说，要在一定程度上回答这个问题：

> 在 data() 中存储选项是常用的方法。

我现在意识到我没有做错任何事。

提出这个问题的原因是，在野外，我看到了许多以多种方式创建的插件。

由于某种链接的评论：[插件中 $.extend 调用的差异？](https://stackoverflow.com/questions/13797815/difference-in-extend-calls-in-a-plugin/13798839#comment18979510_13797870)我已经掌握了一组“好的”设计模式，可以用来满足我的需求（不在文档中）：http: [//jqueryboilerplate.com/](http://jqueryboilerplate.com/)由@Marcus 在链接中提供评论。

# android - listView中的搜索功能

> ID：13764130
> 
> 赞同：0
> 
> 时间：2012-12-07T13:32:32.083
> 
> 标签：android, listview, search

我想在 listView 中搜索产品名称，但是在我在搜索文本字段中键入一些文本后，列表中没有显示任何内容。我没有使用 ArrayAdapter，但我使用的是 ResourceCursorAdapter。

```
 public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                helper = new ComicsData(this);
                helper.open();
                listSearch=(EditText)findViewById(R.id.inputSearch);
                listSearch.addTextChangedListener(filterTextWatcher);
                model = helper.getAllProduct(list);
                startManagingCursor(model);
                adapter=new ShoppingListAdapter(this, model);

                listView.setAdapter(adapter);
    }
private TextWatcher filterTextWatcher=new TextWatcher(){

         public void afterTextChanged(Editable s) {

            }

            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                //String search=listSearch.getText().toString();
                //int textLength=search.length();
                adapter.getFilter().filter(s);

            }

        }; 
```

购物清单适配器

```
class ShoppingListAdapter extends ResourceCursorAdapter {

        private final String CN = null;

        public ShoppingListAdapter(Context context, Cursor c) {
            super(context, R.layout.productrow, c);
            // TODO Auto-generated constructor stub
        }
    @Override
        public void bindView(View row, Context context, Cursor c) {
            // TODO Auto-generated method stub

            listName = (TextView) row.findViewById(R.id.produtName);
    listName.setText(helper.getProductName(c)); 
```

有人知道我的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:40:20.343

更改 listSearch 中的文本后，根据搜索文本获取项目`helper.getProducts(searchText);`并调用`adapter.notifyDataSetChanged()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:46:49.717

您需要为您的适配器提供[FilterQueryProvider](http://developer.android.com/reference/android/widget/FilterQueryProvider.html)的实例。此提供程序接受您的过滤器查询并返回所有找到的项目的光标。

# ember.js - 如何动态检测 Ember.StateManager 应该具有的初始状态？

> ID：13764131
> 
> 赞同：1
> 
> 时间：2012-12-07T13:32:37.600
> 
> 标签：ember.js

我有一个 Ember.StateManager 用于管理登录用户的会话。如何检测用户在访问页面时是否登录，以便设置 initialState 属性？（因为他们可能已经更早登录并且仍然有 cookie）

```
App.userSessionStateManager = Em.StateManager.create({
    initialState: 'signedout', // this should be dynamic

    signedin: Em.State.createWithMixins({
        enter: function(sm) {
            this._super(sm);
            console.log('entered signedin state');
        },
        exit: function(sm) {
            this._super(sm);
            console.log('exited signedin state');
        }
    }),

    signedout: Em.State.createWithMixins({
        enter: function(sm) {
            this._super(sm);
            console.log('entered signedout state');
        },
        exit: function(sm) {
            this._super(sm);
            console.log('exited signedout state');
        }
    }),
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:32:37.600

与 Ember.js 中的许多类一样，您可以创建自己的`init()`函数来进行自己的设置。通过这种方式，您可以决定将 initialState 属性设置为什么。但是，请务必调用`init()`父类的函数，`this._super()`以便它也可以进行默认初始化。

编辑：由于 Ember.js API 的最新更新，您需要使用`createWithMixins()`而不是仅仅`create()`为了调用`_super`函数。

```
App.userSessionStateManager = Em.StateManager.createWithMixins({
    init: function() {
        this._super();

        // your login detection routine here
        if (user.signedin)
            this.initialState = 'signedin';
        else
            this.initialState = 'signedout';
    },

    // ...
}); 
```

# c# - 在 c# 中使用 Visual Studio 2012 创建 .sql 脚本以及如何运行它？

> ID：13764137
> 
> 赞同：0
> 
> 时间：2012-12-07T13:33:12.447
> 
> 标签：c#, visual-studio-2012, sql-scripts, run-script

我对此有一个小问题。当我使用 VS2012 创建脚本时，它看起来像那样（数据库名称：LSProjeDB 并有一个表作为 Musteri）（这样创建：go table > update>genarete script >wow）

```
GO SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;
SET NUMERIC_ROUNDABORT OFF;
GO
:setvar DatabaseName "C:\USERS\YC\DOCUMENTS\LSPROJEDB.MDF"
:setvar DefaultFilePrefix "C_\USERS\YC\DOCUMENTS\LSPROJEDB.MDF_"
:setvar DefaultDataPath "C:\Users\YC\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\v11.0\"
:setvar DefaultLogPath "C:\Users\YC\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\v11.0\"
GO
:on error exit
GO

/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/

:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END
GO
USE [$(DatabaseName)];
GO
PRINT N'Update complete.'
GO 
```

但它看起来像错了！我使用了那个 c# 代码：

```
 string str = "DataSource=(local);Initial Catalog=DatabaseName ;Integrated Security=True";
        FileInfo file = new FileInfo("D:\\SQLQuery2.sql");
        string script = file.OpenText().ReadToEnd();
        SqlConnection conn = new SqlConnection(str);
        Server server = new Server(new ServerConnection(conn));
        server.ConnectionContext.ExecuteNonQuery(script); 
```

我得到了：

> ArgumentException 未处理！不支持关键字：“数据源”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:51:13.187

DataSource <-- Data 和 Source 之间缺少空格

```
"Data Source=(local);Initial Catalog=DatabaseName;Integrated Security=True;"; 
```

# javascript - 如何使用 Javascript 制作一个包含可复制行的表（在该行之后添加一个新行，包含相同的行）？

> ID：13764140
> 
> 赞同：6
> 
> 时间：2012-12-07T13:33:23.210
> 
> 标签：javascript, dynamic, html-table, rows

我正在尝试制作一个包含多行的表格，每行在最后一个单元格中都有一个按钮，用于创建该行的副本。

所有其他单元格都包含一个输入（文本）。添加的输入的内容（值）必须与上面的相同（它们是它们的副本）。

但是副本不能复制！

* * *

输入必须具有唯一的名称，例如：
1-1-name
1-1-age
1-1-country
1-1-email

如果此行被复制，则复制的输入必须具有这样
的名称 1-2-name
1-2-age
1-2-country
1-2-email

下一个用 3 而不是 2，依此类推。

* * *

我想，这个问题是我必须在没有 JQuery 的情况下这样做。我只能使用 Javascript。这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T14:17:31.260

看看[这个小提琴](http://fiddle.jshell.net/nsVL5/18/)。这是复制表格行并增加其 ID 的纯 js（非 jQuery）方法：

```
var idInit;
var table = document.getElementById('theTable');
    table.addEventListener('click', duplicateRow);  // Make the table listen to "Click" events

function duplicateRow(e){
    if(e.target.type == "button"){ // "If a button was clicked"
        var row = e.target.parentElement.parentElement; // Get the row
        var newRow = row.cloneNode(true); // Clone the row

        incrementId(newRow); // Increment the row's ID
        var cells = newRow.cells;
        for(var i = 0; i < cells.length; i++){
            incrementId(cells[i]); // Increment the cells' IDs
        }
        insertAfter(row, newRow); // Insert the row at the right position
        idInit++;
    }
}

function incrementId(elem){
    idParts = elem.id.split('-'); // Cut up the element's ID to get the second part.
    idInit ? idParts[1] = idInit + 1 : idInit = idParts[1]++;  // Increment the ID, and set a temp variable to keep track of the id's.
    elem.id = idParts.join('-'); // Set the new id to the element.
}

function insertAfter(after, newNode){
    after.parentNode.insertBefore(newNode, after.nextSibling);
}​ 
```

```
<table id="theTable">
    <tr id="1-1">
        <td id="1-1-name"><input type="text"/></td>
        <td id="1-1-age"><input type="text"/></td>
        <td id="1-1-country"><input type="text"/></td>
        <td id="1-1-email"><input type="text"/></td>
        <td id="1-1-button"><input type="button" value="Copy"/></td>
    </tr>
</table>​ 
```

**编辑：**更新为在单击的行之后插入新行。现在有按钮和输入！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:48:16.783

是的，这是可能的，您应该创建一个新表格 row ，然后将其 innerHTML 设置为上面行的 innerHTML。

jQuery 是一个 JavaScript 库，这意味着它是用 JavaScript 函数构建的。

> 所以你可以用 jQuery 做的**所有事情**，你也可以用 JavaScript 做。

莱昂

# asp.net-mvc-3 - MVC3：Guid 数据类型

> ID：13764141
> 
> 赞同：1
> 
> 时间：2012-12-07T13:33:27.547
> 
> 标签：asp.net-mvc-3, guid, uniqueidentifier

我有一个从数据库中获取数据的项目。我对模型中的数据库字段进行了一些修改，现在出现错误

```
The 'XXX' property on 'YYY' could not be set to a 'Guid' value. You must set this property to a non-null value of type 'String'. 
```

XXX 是类的键，在模型中定义为

> 公共字符串 XXX {get; 放;}

我的数据库中这个字段的数据类型是唯一标识符。

mvc3 中这种数据类型的“等价性”是什么？

**编辑**

我尝试将 XXX 的数据类型更改为

> 公共指南 XXX {get; 放;}

但我得到了错误

> 'YYY' 上的 'UnallocatedId' 属性无法设置为 'Guid' 值。您必须将此属性设置为“字符串”类型的非空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:37:39.480

正如它在错误中所说，您需要使用以下`Guid`类型：

```
public Guid XXX { get; set; } 
```

# xml - CakePHP 通过 url 上传图片

> ID：13764143
> 
> 赞同：0
> 
> 时间：2012-12-07T13:33:34.890
> 
> 标签：xml, cakephp, file-upload, uploader

我正在使用 cakephp 2.1 并开发一个包含更多内容的应用程序。所以我想使用 xml 来上传内容。在 xml 中我为这样的图像指定 url [http://reelstubs.com/img/users/000da9c6dd7f9b7de04c7e17eb4d5e1e.jpg但我使用了来自该网站](http://reelstubs.com/img/users/000da9c6dd7f9b7de04c7e17eb4d5e1e.jpg)[http://milesj.me/code/cakephp/uploader](http://milesj.me/code/cakephp/uploader) 的 cakephp 上传插件。用于图片上传，所以它给了我一个错误，比如“请上传图片照片”。

这个插件需要一个像

```
array(
   'name' => '', 
   'type' => '', 
   'tmp_name' => '', 
   'error' => '', 'size' => ''
 ). 
```

因此，当我在 xml 中指定 url 时，我不会这样。请帮助我，我在很多天都在挣扎。工作会更有价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:25:10.390

您必须将图像下载到 tmp 位置并将其设置`tmp_name`为该位置。您可以`file_get_contents`从 php 或`HttpSocket`从 cake 使用。

您将需要避免使用通常的 php`is_uploaded`检查，因为该文件不会被上传。

您将需要添加更多安全性以确保人们不会将脚本或其他内容用于上传，因为这可能是一个安全问题。

使用 HttpSocket 的[示例。](https://github.com/infinitas/infinitas/blob/dev/Core/Filemanager/Network/DownloadSocket.php#L40-L52)上传完成后，您可以`$Download->file->path()`获取其位置。

# html - CSS3 - 如何在 internet-explorer-8 上水平显示 HTML5 元素？

> ID：13764163
> 
> 赞同：1
> 
> 时间：2012-12-07T13:35:00.167
> 
> 标签：html, css, internet-explorer-8

我做了一个关于如何设置页面水平显示元素的教程，它在 FF 和 Chrome 上运行良好，但在 IE8 中不行。

它在 FF 和 Chrome 中水平渲染元素，在 IE8 中垂直渲染元素。我想“box-orient: Horizo​​ntal”会为 IE8 设置布局。

我知道 IE8 不支持很多 HTML5 和 CSS3 功能，但我已经使用 PIE 在此浏览器上显示带圆角的框。我假设 IE8 将支持基本功能，例如水平显示元素。

```
#box-wrap-inner {
    display: -webkit-box;
    display: -moz-box;
    display: box;

    -webkit-box-orient: horizontal;
    -moz-box-orient: horizontal;
    box-orient: horizontal;

    -webkit-box-align: center;
    -moz-box-align: center;
    box-align: center;

    -webkit-box-direction: normal;
    -moz-box-direction: normal;
    box-direction: normal;

    -webkit-box-pack: center;
    -moz-box-pack: center;
    box-pack: center;

}

#box1 {
    -webkit-box-flex: 0;
    -moz-box-flex: 0;
    box-flex: 0;

    -webkit-box-ordinal-group: 1;
    -moz-box-ordinal-group: 1;
    box-ordinal-group: 1;
}

#box2 {
    -webkit-box-flex: 0;
    -moz-box-flex: 0;
    box-flex: 0;

    -webkit-box-ordinal-group: 2;
    -moz-box-ordinal-group: 2;
    box-ordinal-group: 2;
}

#box3 {
    -webkit-box-flex: 0;
    -moz-box-flex: 0;
    box-flex: 0;

    -webkit-box-ordinal-group: 3;
    -moz-box-ordinal-group: 3;
    box-ordinal-group: 3;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:50:40.707

flexbox[模块](http://www.w3.org/TR/css3-flexbox/)相当新，在 IE8 和 IE9 中不受支持（在 IE10 中，只有该规范的旧版本支持 prefix `-ms`）~~并且不能由 PIE 模拟，您需要一些手动解决方法，例如表格或需要忍受它在 Internet Explorer 中被破坏的事实（这通常很糟糕 - 他们的市场份额仍然很高）。~~

[支持图表](http://caniuse.com/#search=flex)

有一个**[shim 可以](https://github.com/doctyper/flexie)**让它在 IE 中工作。一般来说，如果您在使用一些较新的 HTML5/CSS-Stuff 时遇到问题，这个站点会很有帮助：[Modernizr Polyfill List](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)。

编辑：

它现在具有候选推荐状态，因此您可以期待它很快变得非常稳定并且可以在浏览器中使用。FF21 已经去掉了前缀，现在 IE10 可用于 win7，所以人们真的可以开始使用这个模块了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:51:53.263

根据[MDN 文档](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes#Browser_compatibility)：

> > Internet Explorer 10 和 Safari 支持旧的不兼容的规范草案版本。它们尚未更新以支持最终版本。

如果 IE10 还没有搞定，你将无法在 IE8 中做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:56:38.577

新的善良都不起作用。使用 ie 特定的样式表并浮动您的元素。

`<!--[if lt IE 9]><style> /** css to make ie8 play nicely **/ </style> <![endif]-->`

在没有看到你的风格的情况下，我无法具体告诉你要做什么……但这是一种行之有效的方法。只是不要忘记清除你的花车！

# ankhsvn - 无法卸载 AnkhSVN 2.3

> ID：13764167
> 
> 赞同：0
> 
> 时间：2012-12-07T13:35:16.747
> 
> 标签：ankhsvn

当我尝试卸载 AnkhSVN 时，它卡住/挂断了一条消息，说还剩 0 秒。还有其他人遇到过这个问题吗？有什么建议吗？我正在运行 Windows 7 RTM x64 Eng + VS2010 SP1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:01:19.787

好的。再次，我必须回答我自己的问题。我也会尝试描述修复它的过程。我想到的第一件事是谷歌一个解决方案，但没有成功。然后我尝试了 Revo Uninstaller，再次陷入死胡同。然后我注意到卸载AnkhSVN时，出现了一个devenv.exe进程，我突然意识到这是我们的希特勒。因此，在使用任务管理器终止进程后，卸载继续并成功。

太棒了。

但这确实需要一些时间。我在这上面花了大约 2 到 3 个小时。

此方法还解决了在使用 Visual Studio 2010 注册时安装 AnkhSVN 2.4（最新）挂起的问题。只需杀死 devenv.exe，一切正常。

# c# - 从转义的 ASCII 序列中读取 UTF8/UNICODE 字符

> ID：13764168
> 
> 赞同：0
> 
> 时间：2012-12-07T13:35:16.843
> 
> 标签：c#, .net, unicode, encoding, utf-8

我在一个文件中有以下名称，我需要将字符串作为 UTF8 编码的字符串读取，所以从这里开始：

```
test_\303\246\303\270\303\245.txt 
```

我需要获得以下内容：

```
test_æøå.txt 
```

你知道如何使用 C# 来实现这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:44:47.737

假设你有这个字符串：

```
string input = "test_\\303\\246\\303\\270\\303\\245.txt"; 
```

IE字面意思

```
test_\303\246\303\270\303\245.txt 
```

你可以这样做：

```
string input = "test_\\303\\246\\303\\270\\303\\245.txt";
Encoding iso88591 = Encoding.GetEncoding(28591); //See note at the end of answer
Encoding utf8 = Encoding.UTF8;

//Turn the octal escape sequences into characters having codepoints 0-255
//this results in a "binary string"
string binaryString = Regex.Replace(input, @"\\(?<num>[0-7]{3})", delegate(Match m)
{
    String oct = m.Groups["num"].ToString();
    return Char.ConvertFromUtf32(Convert.ToInt32(oct, 8));

});

//Turn the "binary string" into bytes
byte[] raw = iso88591.GetBytes(binaryString);

//Read the bytes into C# string
string output = utf8.GetString(raw);
Console.WriteLine(output);
//test_æøå.txt 
```

“二进制字符串”是指仅由代码点为 0-255 的字符组成的字符串。因此，它相当于一个穷人`byte[]`，您在 index 处检索字符的代码点`i`，而不是`byte`在 a `byte[]`at index中的值`i`（这是我们几年前在 javascript 中所做的）。因为 iso-8859-1 将前 256 个 unicode 代码点精确映射到一个字节，所以它非常适合将“二进制字符串”转换为`byte[]`.

# r - 使用 R 向 igraph 中的节点添加文本属性

> ID：13764178
> 
> 赞同：0
> 
> 时间：2012-12-07T13:35:49.563
> 
> 标签：r, properties, label, vertex, igraph

在使用 R 的 igraph 中添加节点的属性时我遇到了一些问题。我创建了一个名为 journal.txt 的文本列表，我想给我的图的节点一个属性。对于其他文本或数字列表，我绝对没有问题，但我有这个。

有了这个我读了txt文件，只读了第一列，虽然只有一个，读为字符，虽然我也试过没有，但它不起作用

```
journalList = read.csv("c:/temp/biblioCoupling/journals.txt", header=FALSE)
journalLR = (journalList[1:303,1]) 
journalLR = as.character(journalLR) 
V(g)$journalName = journalLR 
```

然后当我保存文件时，

```
write.graph(gr,"filename.gml",format=c("gml"), creator="Claudio Biscaro") 
```

我看到了我添加到节点的所有其他属性，但没有看到这个！！！

可能是因为 journalLR 中的某些条目长度超过 15 个字符吗？我完全不知道为什么我不能这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:21:51.847

您的代码不可重现，无法确定，但我猜这`V(g)$journalName`是一个复杂的属性，即它不是一个值向量，而是一个值列表。

要检查，您可以执行`str(g)`然后查看`journalName`属性后的代码字母。如果是`x`，那么它是复杂的，如果是`c`，那么它是字符。

如果这是问题所在并且您真的不需要列表，那么解决方法是

```
g <- remove.vertex.attribute(g, "journalName")
V(g)$journalName <- journalName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:00:04.170

通过一次添加一个来解决。那很奇怪。经过长时间的尝试！

```
for (i in 1:length(journalLR))
{
  V(g)[i]$journalName = journalLR[i]
} 
```

可能这不是一个正式的好解决方案，但它有效！

# visual-studio-2012 - VS2012 Lightswitch 如何用正确的数据填充“模态窗口选择器”

> ID：13764179
> 
> 赞同：0
> 
> 时间：2012-12-07T13:35:50.337
> 
> 标签：visual-studio-2012, visual-studio-lightswitch

我是 VS-Lightswitch 2012 的新手，也是 silverlight 的新手。在电灯开关数据库中，我想存储测量值表。每个 MeasuredValues 表都有一定的 Unity。所以我有一个 Unity 表（如“m”、“mm”、“°C”），每个 Unity 都有一个可能的 UnityConversions 表（如“mm to m”、“mm to cm”）。例如，Unity“m”没有转换“m to °C”，因为这根本没有意义。每个 UnityConversion 都有一个它 ConvertsTo 的 Unity。Unityconversion 例如：0.00112m = 1.12mm

因此，当用户创建或编辑测量值表时，他应该能够从所有现有的单位中选择单位。但是当必须转换 Unity 时，应该只能将当前 Unity 的 UnityConversion 表中的值转换为合适的 Unity。到目前为止，所有表都已定义好。但是如何做 UnityConversion 的事情呢？我想最简单的方法是在 MeasuredValue 的 Unity 下方创建一个按钮，该按钮会显示一个“模态窗口选择器”，用户可以在其中选择 UnityConversion。

但是如何用当前 Unity 的 UnityConversions 填充“模态窗口选择器”？我已经尝试过“模态窗口选择器”，它显示了所有现有的 Unity，但它应该显示可能的 UnityConversions。

这就是我坚持的地方，欢迎任何想法提前谢谢你

哎呀++++编辑2012年12月14日++++

```
MValue
+-Id: Integer
+-Value: Double
+-Unity: Unity (relationship)
Unity:
+-Id: Integer
+-Name: String
+-ShortName: String
+-Conversions: collection of UnityConversion (relationship)
+-Converts     collection of UnityConversion (relationship)
+-MValues      collection of MValue (relationship)
UnityConversion:
+-Id: Integer
+-Name: String
+-Factor: Double
+-ConvertTo: Unity (relationship)
+-Unities:   Unity (relationship)
the relationship between Unity and UnityConversion is doubly so it looks like:
Unity                        UnityConversion
+-Conversions(visible) -------> +-Unities    (invisi.)
+-Converts   (invisi.) <------- +-ConvertsTo (visible) 
```

我的问题：双重关系是可以做到的，但是否允许这样做？如果允许，为什么屏幕设计器在为 MValuesListDetail 创建新屏幕时不显示 UnityConversions 的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T12:59:56.233

这很容易做到，但解释起来有点冗长。您需要基于*UnityConversion*表添加一个带有整数参数的参数化查询（请参阅[创建参数化查询](http://msdn.microsoft.com/en-us/library/vstudio/ff852026.aspx)）。

在屏幕设计器中：

*   单击*Add Data Item* Select *Query*，然后单击您创建的参数化查询的名称
*   单击添加的查询，并展开*查询参数*（请参阅 为查询参数[提供值](http://msdn.microsoft.com/en-us/library/ff851987.aspx)）
*   单击您之前添加的整数参数的名称
*   在“属性”窗格中，输入绑定值 ( *Me.MeasuredValueProperty.ID* )
*   单击*ACB 控件*( *AutoCompleteBox* ) & 在其属性中，将*Choices*值从*Auto*更改为参数化查询的名称

这应该将*UnityConversion*属性中的值限制为适合所选*Unity*的值。

# hibernate - Hibernate：如何从生成的多对多表中获取结果？

> ID：13764193
> 
> 赞同：0
> 
> 时间：2012-12-07T13:36:19.700
> 
> 标签：hibernate, hql

我有两个表（作者和 Publicaction）。这些与 Hibernate 自动生成的多对多表 (Writes) 相连。现在我想做一个这样的查询：

```
SELECT * from Publication p, Writes w 
WHERE w.authorId = ?; 
```

应该运行此查询的方法将来自 Author-table 的 Id 作为输入。

我怎样才能在 hql 中做到这一点？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:40:44.117

```
select p from Publication p
inner join p.authors author
where author.id = :authorId 
```

[通过阅读文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)了解 HQL 和连接。

# ipod-touch - 将应用程序部署/调试到 iPod touch 第 2 代

> ID：13764206
> 
> 赞同：4
> 
> 时间：2012-12-07T13:37:07.630
> 
> 标签：ipod-touch, ios-4.2, xcode4.4

我是 iOS 开发的新手，我尝试在我的 iPod touch 第二代（iOS 4.2.1）上运行一个简单的 HelloWorld 应用程序。对于开发，我使用带有 Mountain Lion 和 Xcode 4.4.1 的 MacBook Pro，因为 Xcode 4.5 显然不再支持 armv6 架构。我创建了一个新的 iOS 项目（单视图应用程序，没有故事板）并将部署目标设置为 4.2。当我在 iPhone 5.1 模拟器中启动它时，它运行良好（当然，只有一个空视图，打印“Hello World”将是我的下一步）。但是，如果我尝试在我的 iPod touch 上运行它，我总是会收到以下错误消息：

Xcode 无法使用所选设备运行。选择具有受支持架构的目标，以便在此设备上运行。

我试图将构建设置中的架构从 armv7 更改为 armv6，但 armv7 是唯一的选择。我该怎么做才能让应用程序在我的设备上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:21:39.513

好的，自己找到了解决方案。在*Build Settings*中，我将*armv6*手动输入到*Valid Architectures* and *Architectures*中。奇怪的是：我也可以输入*armv12*或*foobar*并且它仍然可以工作。仅将架构设置为*armv7*会导致问题。

# android - 如何在支持列表片段中禁用淡入淡出

> ID：13764207
> 
> 赞同：0
> 
> 时间：2012-12-07T13:37:08.993
> 
> 标签：android, android-ui, android-listfragment

我正在使用 android.support.v4.app.ListFragment 在 Viewpager 中显示列表。

在 Android 2.3 及更低版本的设备上，ListFragment 显示渐隐。整个应用程序保持在 Holo 设计中，因此边缘看起来有点不合适。

如何禁用 ListFragmen 中的那些褪色边缘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T15:12:48.653

更正确的是，在 ListFragment 的 onActivityCreated 方法中执行此操作

```
@Override
public void onActivityCreated (Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    getListView().setFadingEdgeLength(0);
} 
```

如果您在 onResume() 中执行此操作，您可能会在片段的生命周期中对 setFadingEdgeLength() 进行冗余调用。

更多信息请参阅 Google 的[片段指南](http://developer.android.com/guide/components/fragments.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:24:00.297

由于我无法禁用 XML 中的淡入淡出边缘，因此我有一个解决方法：

```
 @Override
   public void onResume() {
      super.onResume();
      ListView listView = getListView();
      if (listView != null) {
         listView.setFadingEdgeLength(0);
      }
   } 
```

我在 onResume 中执行此操作是为了提高视图已经可用的机会。

# php - 在一个页面中两次从 MSSQL 结果中获取数组失败

> ID：13764214
> 
> 赞同：1
> 
> 时间：2012-12-07T13:37:44.130
> 
> 标签：php, sql

我对以下代码块有疑问。我不能将它们都放在同一页面中，否则最后一个失败（无论他们是否改变位置，最后一个失败）。如果我注释掉一个（不管是哪个），那么另一个就可以了。所以它看起来不像实际代码的问题？

不能在同一页面中运行这两个吗？我显然做错了什么，所以请帮我指出它是什么。

```
while( $test = sqlsrv_fetch_array( $data, SQLSRV_FETCH_ASSOC) ) {
    if ($_GET['unit'] == '15min') { $newDate = $test['dt']->format('H:i:s'); }
    if ($_GET['unit'] == 'hour') { $newDate = $test['dt']->format('m/d H:i'); }
    if ($_GET['unit'] == 'day') { $newDate = $test['dt']->format('Y/m/d'); }
    $dates[] = $newDate;
    $values[] = $test[$pick_graph];
} 
```

第二个

```
while( $row = sqlsrv_fetch_array( $data, SQLSRV_FETCH_ASSOC) ) {
$newDate = $row['dt']->format('Y/m/d_H:i:s');

    echo    '<tr>'.
            '<td>'.$row['net']."</td>".
            '</tr>';
} 
```

没有错误消息或任何东西。当第二个循环运行时，就好像 $data 是空的或者什么东西，因为它没有循环任何东西，在那里放一个 echo 不会输出任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:46:51.117

与计算机科学中的许多模式（例如文件 IO）一样，大多数库中的查询结果都被视为流。你得到了结果，但你不能向后跳过，如果不重新运行查询就不能重新开始。

您可以再次运行查询，也可以将结果缓存在数组中。

```
$cache = array();
while ($row = sqlsrv_fetch_array($data, SQLSRV_FETCH_ASSOC))
    $cache[] = $row; 
```

然后，您可以`foreach`在`$cache`您的两个位置执行与您的问题相同的逻辑。

在大多数情况下，缓存是更好的选择。

但是，如果您谈论的是一个非常大的结果集（1000 秒），则最好运行两次查询，因为您一次只需要在 RAM 中存储一行。已经使用的行将被垃圾收集。

与所有性能方面的事情一样，如果它很重要，请从两个方面进行分析并确定哪个符合您的目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T13:49:03.817

我猜你[`sqlsrv_query()`](http://php.net/manual/en/function.sqlsrv-query.php)只打电话一次，你想迭代两次低谷结果。

在这种情况下，这是预期和想要的行为。否则，您将永远陷入循环（如果`sqlsrv_fetch_array`达到最终结果，它将重新开始）。

例如看看 MySQLs [`mysql_data_seek()`](http://php.net/manual/en/function.mysql-data-seek.php)，但根据[手册](http://php.net/manual/en/ref.sqlsrv.php)，没有 SqlSrv 替代品，所以你有两个选择：

*   第一次执行查询并遍历所有行时将所有结果缓存到数组中[*可能更好的解决方案*]
*   每次要查看数据时执行查询

# mysql - MySQL查询优化[加入]

> ID：13764215
> 
> 赞同：2
> 
> 时间：2012-12-07T13:37:46.923
> 
> 标签：mysql, query-optimization, mysql-slow-query-log

我有下一个查询

```
SELECT 
i.*,
gu.*
vs.*
FROM 
common.global_users gu
LEFT JOIN common.global_users_perms gup ON (gu.global_user_id=gup.global_user_id)
LEFT JOIN p.individuals i ON (gup.parent_id = i.member_id)
LEFT JOIN p.vs ON (i.member_id=vs.member_id AND vs.status IN (1,4))
WHERE gup.region = 'us'
AND gu.user_type=2
AND ((gu.email='specific@email.com') OR (i.email='specific@email.com') OR (gu.username='specific@email.com'))
ORDER BY i.status, vs.member_id; 
```

和下一个计划

```
+----+-------------+-------+--------+------------------------------------------+------------------+---------+-----------------------------+--------+----------+---------------------------------+
| id | select_type | table | type   | possible_keys                            | key              | key_len | ref                         | rows   | filtered | Extra                           |
+----+-------------+-------+--------+------------------------------------------+------------------+---------+-----------------------------+--------+----------+---------------------------------+
|  1 | SIMPLE      | gu    | ref    | PRIMARY,username,idx_user_type,idx_email | idx_user_type    | 1       | const                       | 524243 |   100.00 | Using temporary; Using filesort |
|  1 | SIMPLE      | gup   | ref    | global_user_id_2                         | global_user_id_2 | 4       | common.gu.global_user_id    |      1 |   100.00 | Using where                     |
|  1 | SIMPLE      | i     | eq_ref | PRIMARY                                  | PRIMARY          | 4       | common.gup.parent_id        |      1 |   100.00 | Using where                     |
|  1 | SIMPLE      |  vs   | ref    | member_id,status                         | member_id        | 4       | p.i.member_id               |      1 |   100.00 |                                 |
+----+-------------+-------+--------+------------------------------------------+------------------+---------+-----------------------------+--------+----------+---------------------------------+ 
```

有没有可能让它更快？现在大约需要 12 秒

PS 在`gu`表中只有两个唯一`type`值。并且该表中的所有记录数均超过 1M。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:46:47.687

您的计划结果可能表明问题“使用临时；使用 filesort' 意味着排序是在磁盘上进行的，可能是因为它太大而无法放入内存。如果可能，您可能希望增加内存限制。

这也可能与您排序的列有关。如果您删除您的 ORDER BY，查询是否执行得更快？如果是这种情况，您可能需要查看[ORDER BY Optimization](https://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

# android - 如何以编程方式捕获意图（使用操作“android.intent.action.VIEW”）

> ID：13764218
> 
> 赞同：1
> 
> 时间：2012-12-07T13:37:52.680
> 
> 标签：android, android-intent, broadcastreceiver, intentfilter

我在预览 Gmail 附件时收到以下日志。我想以`android.intent.action.VIEW`编程方式接收（嗅探）这个意图（带有动作）。我已经创建了带有动作的意图过滤器，`android.intent.action.VIEW`并且我已经使用广播接收器注册了这个过滤器。尽管如此，我还是无法接收广播的意图。

如何以编程方式实现它？帮助高度赞赏。

```
LogCat:
12-07 18:21:50.528: I/ActivityManager(96): Starting: Intent { dat=content://gmail-ls/messages/hawkagent%40interfaceinfosoft.com/35/attachments/0.1/BEST/false cmp=com.google.android.gm/.ViewAttachmentActivity } from pid 8309

12-07 18:21:52.598: I/ActivityManager(96): Starting: Intent { act=android.intent.action.VIEW dat=content://gmail-ls/messages/hawkagent%40interfaceinfosoft.com/35/attachments/0.1/BEST/false typ=text/plain flg=0x80001 cmp=android/com.android.internal.app.ResolverActivity } from pid 8309 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:58:29.477

您是否在 AndroidManifest.xml 中注册了您的 Receiver：

```
 <receiver android:name="MyReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
        </intent-filter>
    </receiver> 
```

# mysql - 如何更新 cakephp2 auth 组件密码表单数据库

> ID：13764220
> 
> 赞同：0
> 
> 时间：2012-12-07T13:37:57.697
> 
> 标签：mysql, authentication, components, cakephp-2.1, password-recovery

我正在使用带有身份验证组件的 cakphp2。我的要求是使用 phpmyadmin 工具更新 mysql 数据库中的密码。哪种散列技术 cakephp authcomponent 用于密码字段？我该如何更新它？我是cakephp的新手，请帮助我。

我的 beforesave 功能代码：

```
public function beforeSave($options = array()) {
    if (isset($this->data[$this->alias]['password'])) {
        $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:49:06.287

**默认情况下** *Security::hash* **采用类型 sha1**。

但是你可以修改它：

```
 Security::hash($password, ‘sha256′, true); 
```

[http://api.cakephp.org/class/security#method-Securityhash](http://api.cakephp.org/class/security#method-Securityhash)

# html - 带角 div 的容器

> ID：13764237
> 
> 赞同：1
> 
> 时间：2012-12-07T13:39:29.640
> 
> 标签：html, css

我想制作一个布局，其中容器 div 有 4 个从容器 div 的角落扩展的子 div。每个 div 从一个角扩展。我想在不为 childreen 设置绝对位置的情况下实现这一点，因为这会与我的其他 css 混淆。这是它停止的地方：jsFiddle：http: [//jsfiddle.net/XcKYF/2/](http://jsfiddle.net/XcKYF/2/)

```
<div class=container>
<div class=div1>11</div>
<div class=div2>22</div>
<div class=div3>33</div>
<div class=div4>44</div>
</div>

.container
{
width:100%;
height:100%;
background-color:red;
}
.div1
{
position:absolute;
bottom:0;
left:0;
width:20px;
height:20px;
background-color:green;
}
.div2
{
position:absolute;
bottom:0;
right:0;
width:20px;
height:20px;
background-color:yellow;
}
.div3
{
position:absolute;
top:0;
left:0;
width:20px;
height:20px;
background-color:blue;
}
.div4{
position:absolute;
top:0;
right:0;
width:20px;
height:20px;
background-color:violet;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:57:57.900

演示：http: [//jsfiddle.net/94U4U/1/](http://jsfiddle.net/94U4U/1/)

我认为您正在寻找的是一个占据页面的相对定位的容器，它分为 4 个角和一个中央内容持有者：

```
html, body{
  height:100%;
}
.container
{
  position:relative;
  width:100%;
  height:100%;
  background-color:red;
}

.container div.corner{
  height:20%;
  width:20%;
  position:absolute;
}

.container div.content{
  background-color:white;
  height:60%;
  width:60%;
  position:absolute;
  left:20%;
  top: 20%;
}

.div1
{
  bottom:0;
  left:0;
  background-color:green;
}

.div2
{
  bottom:0;
  right:0;
  background-color:#FF0;
}

.div3
{
  top:0;
  left:0;
  background-color:blue;
}

.div4
{
  top:0;
  right:0;
  background-color:#EE82EE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:53:37.197

演示：http: [//jsfiddle.net/XcKYF/6/](http://jsfiddle.net/XcKYF/6/)

不确定这是否能完全解决您的问题，但这就是您想要做的类似事情的方式。

HTML：

```
<div class=container>
    <div class=div1>11</div>
    <div class=div2>22</div>
    <div class=div3>33</div>
    <div class=div4>44</div>
    some other content<br/>
        some other content<br/>
        some other content<br/>
        some other content<br/>
        some other content<br/>
</div>
​ 
```

CSS：

```
.container
{
    background-color:red;
    position:relative;
    padding:20px;
}
.div1
{
    position:absolute;
    bottom:0;
    left:0;
    width:20px;
    height:20px;
    background-color:green;
}

.div2
{
    position:absolute;
    bottom:0;
    right:0;
    width:20px;
    height:20px;
    background-color:yellow;
}
.div3
{
    position:absolute;
    top:0;
    left:0;
    width:20px;
    height:20px;
    background-color:blue;
}
.div4
{
    position:absolute;
    top:0;
    right:0;
    width:20px;
    height:20px;
    background-color:violet;
}​ 
```

# java - 为什么存在invokeVirtual时需要invokeSpecial

> ID：13764238
> 
> 赞同：58
> 
> 时间：2012-12-07T13:39:29.950
> 
> 标签：java, jvm, bytecode

有三个操作码可以调用 Java 方法。很明显，invokeStatic 仅用于静态方法调用。

据我所知，在调用构造函数和私有方法时使用了 invokespecial 。那么，我们是否需要在运行时区分私有和公共方法调用？它可以用相同的操作码调用，比如invokevirtual？

JVM 是否处理私有和公共方法定义？据我所知，在开发阶段只需要公共和私有关键字进行封装？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-07T13:46:48.450

从[这个网站](https://www.jrebel.com/blog/using-objects-and-calling-methods-in-java-bytecode)

> 如果仔细阅读 Java VM Spec 很容易找到答案：
> 
> > invokespecial 和invokevirtual 指令的区别在于invokevirtual 根据对象的类调用方法。invokespecial 指令用于调用实例初始化方法以及私有方法和当前类的超类的方法。
> 
> 换句话说，invokespecial 用于调用方法而不考虑动态绑定，以便调用特定类的方法版本。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-07T14:12:45.017

[http://www.artima.com/underthehood/invocationP.html](http://www.artima.com/underthehood/invocationP.html) 上面的链接清楚地给出了有价值的例子来解决我的问题。

```
class Superclass {

    private void interestingMethod() {
        System.out.println("Superclass's interesting method.");
    }

    void exampleMethod() {
        interestingMethod();
    }
}

class Subclass extends Superclass {

    void interestingMethod() {
        System.out.println("Subclass's interesting method.");
    }

    public static void main(String args[]) {
        Subclass me = new Subclass();
        me.exampleMethod();
    }
} 
```

当您在上面定义的子类中调用 main() 时，它必须打印“超类的有趣方法”。如果使用了 invokevirtual，它将打印“子类的有趣方法”。为什么？因为虚拟机会根据对象的实际类，即Subclass，来选择调用interestingMethod()。所以它会使用子类的interestingMethod()。另一方面，使用invokespecial，虚拟机将根据引用的类型选择方法，因此将调用超类版本的interestingMethod()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-09T05:34:52.553

感谢您阅读该解释：如果它可以帮助您在方法调用期间识别汇编指令的创建，请不要忘记投票。这里我将解释静态与动态绑定。

首先我要告诉你**invokeStatic、invokeSpecial、invokeVirtual、invokeInterface**等是编译器在编译后生成的汇编指令。众所周知，编译后得到了.class文件格式，读不出来。但是 java 提供了一个名为**"javap"**的工具。

我们可以使用 javap 命令读出我们的 .class 文件汇编指令。默认情况下，我们看不到私有方法汇编指令，因此我们需要使用 -private 。以下是查看 java 编译器生成的汇编指令的命令：

1.  成像你有 A.java 类

    类 A { public void printValue() { System.out.println("Inside A"); }

    public static void callMethod(A a) { a.printValue(); } }

2.  打开 cmd 提示符并转到包含该 java 文件 A.java 的文件夹。

3.  运行 javac A.java。

4.  现在生成了包含汇编指令但您无法阅读的 A.class 文件。

5.  现在运行 javap -c A

6.  您可以看到方法调用的程序集生成 --> **a.printValue();**

7.  如果 printValue( ) 方法是私有的，你需要使用 javap -c -private A 。

8.  您可以将您的 printValue() 设为私有/静态/公共/私有静态。

9.  还有一件事要记住，第一个编译器检查调用方法的对象。然后找到它的类类型，并在该类中找到该方法（如果可用或不可用）。

**注意：**现在请记住，如果我们的调用方法是静态的，则生成 invokeStatic 汇编，如果其私有则生成 invokeSpecial 汇编指令，如果其公共则生成 invokeVirtual 指令。public 方法绝不意味着每次生成 invokeVirtual 指令。如果从 A 的子类调用 super.printValue() 是例外情况。即如果 A 是 B 的父类并且 B 包含相同的方法 printValue() 那么它将生成 invokeVirtual(dynamic) 但如果 B 中的 printValue() 将 super.printValue() 作为其第一条语句，则即使 printValue( ) 的 A 是公开的。

我们也试试这个：

```
class B extends A
{
public void printValue()
{
super.printValue();// invokeStatic
System.out.println("Inside B");
}

}

public class Test
{
public static void main(String[] arr)
{
    A a = new A();
    B b = new B();
    A.callMethod(a);// invokeVirtual
    A.callMethod(b);// invokeVirtual
}
} 
```

**--> 通过 Test.java 保存 --> 运行 javac Test.java --> javap -c -private Test**

# c# - 从 C# 发布与 Form.Submit() 完全相同的帖子

> ID：13764239
> 
> 赞同：-3
> 
> 时间：2012-12-07T13:39:49.093
> 
> 标签：c#, .net, forms, submit, http-post

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>NOVA</title>
</head>
<body>
<form method="post" action="file.com/">
<table>
  <tr>
    <td>dataType</td>
    <td><input type="text" name="dataType" value="xml"></td>
  </tr>
  <tr>
    <td>actionType</td>
    <td><input type="text" name="actionType" value="query"></td>
  </tr>
  <tr>
    <td>accountid</td>
    <td><input type="text" name="accountid" value="121758"></td>
  </tr>
  <tr>
    <td>checksum</td>
    <td><input type="text" name="file" value="123"></td>
  </tr>
  <tr>
    <td></td>
    <td style="text-align:right"><input type="submit" value="send"></td>
  </tr>
</table>
</form>
</body>
</html> 
```

这是我尝试过的。

```
string xml = @"<Array><dataType>xml</dataType><actionType>query</actionType><accountid>121758</accountid><file>" + "123" + "</file></Array>";
WebRequest req = null;
WebResponse rsp = null;

string uri = "https://file.com/";
req = WebRequest.Create(uri);
req.Method = "POST";
req.ContentType = "text/xml";
StreamWriter writer = new StreamWriter(req.GetRequestStream());
writer.WriteLine(xml);
writer.Close();
rsp = req.GetResponse(); 
```

但这不一样。我想和 form.submit(); 完全一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:47:50.273

你的代码比需要的更复杂。这也是不正确的。例如，`ContentType`应该是`multipart/form-data`，不是`text/xml`。

相反，将 a[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.110%29.aspx)与 a 结合使用[`NameValueCollection`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)：

```
using(WebClient client = new WebClient()) {
    NameValueCollection formValues = new NameValueCollection();
    formValues.Add("dataType", "xml");
    client.UploadValues("http://www.somesite.com/SomePage.aspx", formValues);
} 
```

如果您还需要捕获响应，请使用以下方法：

```
byte[] response = null;

using(WebClient client = new WebClient()) {
    NameValueCollection formValues = new NameValueCollection();
    formValues.Add("dataType", "xml");
    response = client.UploadValues("http://www.somesite.com/SomePage.aspx", formValues);
} 
```

# vb.net - 在页面顶部的 Word 表格上方插入一行

> ID：13764241
> 
> 赞同：-1
> 
> 时间：2012-12-07T13:39:52.560
> 
> 标签：vb.net, vba, ms-word

我创建了一个表。该表从文档的第一行开始。我的问题是我不能在表格上方插入一行。每次我尝试添加段落时，段落都会插入到最后一个表格之后。有没有办法在第一个表上方插入 lin ？

为了说明我的问题：

[http://www.techrepublic.com/blog/msoffice/insert-a-line-above-a-word-table-at-the-top-of-the-page/846](http://www.techrepublic.com/blog/msoffice/insert-a-line-above-a-word-table-at-the-top-of-the-page/846)

到目前为止我的代码：

```
Dim oApp As Word.Application
    Dim oDoc As Word.Document

    oApp = CType(CreateObject("Word.Application"), Word.Application)
    oDoc = oApp.Documents.Add()

    Dim rng As Word.Range = oDoc.Range(0, 0)
    rng.Font.Name = "Verdana"
    rng.Font.Size = 16

    Dim para As Word.Paragraph = oDoc.Paragraphs.Add()
    para.Range.Text = "Factsheet"

    Dim tlb6 As Word.Table = oDoc.Tables.Add(Range:=rng, NumRows:=1, NumColumns:=4)

    Dim CurrentDateTime As Date = Date.Now
    Dim CurrentDate As Date = New Date(CurrentDateTime.Year, CurrentDateTime.Month, CurrentDateTime.Day)

    tlb6.Cell(1, 1).Range.Text = "Date"
    tlb6.Cell(1, 1).Shading.BackgroundPatternColor = Word.WdColor.wdColorGray20
    tlb6.Cell(1, 1).Borders.OutsideLineStyle = 1
    tlb6.Cell(1, 2).Range.Text = CurrentDate
    tlb6.Cell(1, 2).Borders.OutsideLineStyle = 1
    tlb6.Cell(1, 3).Range.Text = "Issued by"
    tlb6.Cell(1, 3).Shading.BackgroundPatternColor = Word.WdColor.wdColorGray20
    tlb6.Cell(1, 3).Borders.OutsideLineStyle = 1
    tlb6.Cell(1, 4).Range.Text = ""
    tlb6.Cell(1, 4).Borders.OutsideLineStyle = 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T18:59:42.723

如果您使用的是 Word 2010，这应该可以完成工作（虽然它很丑并且使用 Select 和 ActiveDocument）：

```
If ActiveDocument.Paragraphs(1).Range.Information(wdWithInTable) = True Then
    tbl6.Rows(1).Cells(1).Range.Collapse direction:=wdLeft
    Selection.SplitTable
End If 
```

它检查以确保第一个 Paragraph 对象在表格内，如果是，则在其上方添加一行文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-29T22:48:43.790

根据凯文的回答，一个更清洁的解决方案：

```
ActiveDocument.Range(0, 0).Select
If Selection.Information(wdWithInTable) = True Then
    Selection.InsertBreak Type:=wdColumnBreak
End If 
```

# matlab - 查找具有大于一的最大连续值的时间区域

> ID：13764247
> 
> 赞同：2
> 
> 时间：2012-12-07T13:40:18.517
> 
> 标签：matlab, find

我有两个时间序列：

```
dat = [0,2,3,0,2,2,0,0,1,0.8,3,4,6,7,4,4,3,0,1,3,2.2,0];
dat2 = dat+.5;
time = 1:length(dat);
plot(time,dat);
hold on;
plot(time,dat2,'r'); 
```

我想及时找到两个向量都具有大于一的最大连续值的区域。因此，对于这个特定示例，两个向量在 10 到 18 之间的值都大于 1。但是，在其他几个情况下，它们的值也大于 1。我可以通过首先生成一个矩阵来获得大于一的值的索引：

```
data = [dat',dat2']; 
```

然后使用查找

```
r1 = data>1; 
```

这将为我提供每个大于一的值的位置。接下来，我想找出在什么时间（在哪些行之间）保持最长持续时间的值 > 1。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T14:27:42.067

要查找最长运行值的索引，可以使用以下代码：

```
dat = [0,2,3,0,2,2,0,0,1,0.8,3,4,6,7,4,4,3,0,1,3,2.2,0];

id = find(dat>1);
x = [0 cumsum(diff(id)~=1)];

id(x==mode(x)) 
```

这导致

```
ans =

    11    12    13    14    15    16    17 
```

此代码可与矩阵一起使用：

```
dat = [0,2,3,0,2,2,0,0,1,0.8,3,4,6,7,4,4,3,0,1,3,2.2,0];
dat2 = dat+.5;
data = [dat',dat2'];

id = find(all(data>1, 2));
x = [0; cumsum(diff(id(:))~=1)];

id(x==mode(x)) 
```

此代码给出了两列中大于 1 的最长运行值的索引：

```
ans =
    11
    12
    13
    14
    15
    16
    17 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:29:48.910

我不使用 matlab，但下面应该至少为您提供一个向量的最大范围。

```
rangeStart = 0;
rangeEnd = 0;
rangeLength = 0;
for i = 1:length(dat)
    for j = i+1:length(dat)
        % skip ranges smaller than the max
        if ((j-i)+1) <= rangeLength
            continue
        end
        % check to see if the range (i,j) meets the condition
        good = true;
        for x = i:j
            if dat(x) <= 1
                good = false;
            end
        end
        % the range meets the condition record the results
        if good
            rangeStart = i;
            rangeEnd = j;
            rangeLength = ((j-i)+1);
        end
    end
end 
```

如果你想找到两个向量之间共享的最大范围，你会改变

```
 if dat(x) <= 1 
```

到

```
 if dat(x) <= 1 || dat2(x) <= 1 
```

除非上述任何语法错误都可以解决问题，否则可能会有一个更高级（阅读更有效）的 matlab 特定解决方案。

# php - Yii 活动记录 - 如何将一个模型与另一个第三个模型相关联

> ID：13764249
> 
> 赞同：-1
> 
> 时间：2012-12-07T13:40:20.330
> 
> 标签：php, mysql, activerecord, yii

换句话说..我有餐厅模型，餐厅模型有很多食物，每种食物都有一个类别，

所以我的问题是如何通过餐厅模型获取所有使用过的类别

真的感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:08:44.970

看[http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-with-through](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-with-through)

就像是：

```
public function relations()
{
  return array(
    'foods' => array(self::HAS_MANY, 'Food', 'restaurant_id'),
    'categories' => array(self::HAS_MANY, 'Category', array('category_id'=>'id'), 
                       'through' => 'foods'),
  );
} 
```

应该在您的`Restaurant`模型中。

# ios - ios UISplitViewController 问题

> ID：13764251
> 
> 赞同：1
> 
> 时间：2012-12-07T13:40:31.173
> 
> 标签：ios, orientation, uisplitviewcontroller, uipopovercontroller, uisplitviewdelegate

我有一个使用`UISplitViewController`. 当应用程序处于纵向模式时，我正在添加它的委托并在导航栏上分配一个按钮，以便能够在弹出视图中显示主视图控制器：

```
/*

   @property (strong, nonatomic) id detailItem;
   @property (strong, nonatomic) UIPopoverController *masterPopoverController;

   */
    #pragma mark - Managing the detail item

    - (void)setDetailItem:(id)newDetailItem
    {
        if (_detailItem != newDetailItem) {
            _detailItem = newDetailItem;
            // do smth
        }

        if (self.masterPopoverController != nil) {
            [self.masterPopoverController dismissPopoverAnimated:YES];
        }
    }

    #pragma mark - UISplitViewDelegate methods

    - (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
    {

        barButtonItem.title = NSLocalizedString(@"", @"");
        UIImage *imag = [[UIImage imageNamed:@"gray_button"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 7, 0, 7)];
        UIImage *imag_pressed = [[UIImage imageNamed:@"gray_button_pressed"]resizableImageWithCapInsets:UIEdgeInsetsMake(0, 7, 0, 7)];
        UIImage *more = [UIImage imageNamed:@"shows_button_pressed.png"];

        [barButtonItem setBackgroundImage:imag forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
        [barButtonItem setBackgroundImage:imag_pressed forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];
        [barButtonItem setImage:more];
        [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
        self.masterPopoverController = popoverController;
    }

    - (void)splitViewController:(UISplitViewController *)splitController willShowViewController:(UIViewController *)viewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
    {
        // Called when the view is shown again in the split view, invalidating the button and popover controller.
        [self.navigationItem setLeftBarButtonItem:nil animated:YES];
        self.masterPopoverController = nil;

    } 
```

如果在主视图控制器中选择了一个选项，则 RootViewController（基本上是我的拆分视图控制器的细节拆分）将更改为替换类型的 segue。我再次分配`UISplitViewController`代表。我的问题是，除非我将设备置于横向模式然后返回纵向，否则在更改根目录后不会显示条形按钮。如果我这样做了，那么按钮就在那里并且可以正常工作。

如何在不将设备置于横向然后返回纵向的情况下使按钮出现？

PS：我已经尝试`prepareForSegue:`在旧的根视图控制器中分配新的委托`viewWillAppear:`方法并在新的根视图控制器中分配新的委托方法。同样的事情也会发生。另一件事：新的根视图控制器实现了`<UISplitViewControllerDelegate>`

更新 ：

我发现该方法 :`- (void)splitViewController:(UISplitViewController *)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)pc`仅在我从横向变为纵向后才被调用，这就是为什么我需要旋转设备以显示按钮的原因。

这两个委托之间的区别在于，第一个添加在 my`AppDelegate.m`中，第二个添加在`prepareForSegue:`方法中，在旧的根视图控制器中。只要应用程序启动，就会为旧的根视图控制器调用上述方法。

# r - 避免在 R 中舍入

> ID：13764258
> 
> 赞同：1
> 
> 时间：2012-12-07T13:40:56.600
> 
> 标签：r, digits, r2winbugs

我正在 R 中进行彻底的“R2Winbugs”包中的贝叶斯分析。在 R 输出中，估计的参数被四舍五入。我的问题是如何控制这个？

这是我的命令：

```
bugs(data, inits=inits, model.file = "C:/Users/Gunal/Desktop/dummy/dummyw.txt",
    parameters, digits=5,
    n.chains = 3, n.iter = 1000, codaPkg = FALSE,
    bugs.directory = "D:/PROGRAMLAR/WinBUGS14/") 
```

这是我输出的一部分

```
 mean  sd   2.5%    25%    50%    75%  97.5% Rhat n.eff
beta1    0.3 0.1    0.0    0.2    0.3    0.4    0.5  1.7     5 
```

我想要的是将 beta1 视为 0.30000。我试过digits=5，但没有用。有谁知道该怎么做？

任何帮助将不胜感激

干杯

居纳尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:18:50.123

是的，这很简单 - 使用`print(out, dig = 6)`(或 7, 8, ...) 打印结果：

```
out <- bugs(....)

print(out, dig = 6) 
```

# amazon-web-services - 使用 Wowza 3.5 在 Amazon CloudFront 中缓存 HLS/HDS 流

> ID：13764259
> 
> 赞同：5
> 
> 时间：2012-12-07T13:40:59.047
> 
> 标签：amazon-web-services, http-live-streaming, amazon-cloudfront, live-streaming, wowza

我正在尝试快速学习 HDS 和 HLS 直播背后的一些底层技术。

我在 EC2 的 Amazon WebServices 实例上设置了 Wowza Media server 3.5 并通过 CloudFront 分发。我做了我的第一个现场活动，看着我的服务器负载越来越高。我想知道是否有人可以帮助我了解 HDS/HLS 实时流媒体（和 nDVR ......）的一些基础：

*   Wowza 是我的云端分发的源服务器
*   HDS清单文件设置为在CF中缓存2秒（TTL时间）
*   我检查了所有访问我的 Wowza 实例的 IP，它们实际上似乎是 CF 缓存位置或边缘服务器
*   （假设）由于所有 HDS 流量都通过端口 80，所有视频内容最终都被缓存在边缘位置（尽管 2 秒）

这就是我的问题所在：如何为视频内容提供数据（这是我的理解，请直言不讳！）： - 当观众请求播放列表或 mainfest 文件时，他们会返回 XML 将播放器指向一段视频/audio（DVR 应用程序实例中的 m4fa 和 m4fv？）接下来需要播放的数据。由于此数据也是通过端口 80 传递的，因此它也会被缓存。

如果上述陈述是正确的，那么以下对于 HDS 和 HLS 的优化是否有意义：

案例一：DVR服务：我在CloudFront中设置缓存规则如下：

*   任何以“f4m”、“m3u8”和“?DVR”结尾的内容缓存 2 秒（播放列表/清单文件）
*   其他所有内容的默认值应该缓存更长的时间（可能是一个小时，还是 24 小时......？）这样，DVR 数据保持缓存，但播放列表每 2 秒更新一次

案例 2：没有 DVR 服务（这是更好的优化方式吗？）

*   我怀疑我们也可以通过同时终止 DVR 服务来优化服务器负载，这样通过 CF 分发的所有数据只是最新的音频/视频数据包 - 因此所有观众都应该请求相同的播放列表和数据文件，因此大量请求这些文件的人没什么大不了的，因为我的服务器每 2 秒才从每个边缘位置受到一次访问以更新清单文件）。
*   如果媒体文件块被赋予更长的缓存时间，如果媒体仍然缓存，我们是否终止 DVR 服务是否重要？

感谢您提供的任何见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T03:23:27.990

有没有办法为媒体配置不同的站点名称？对于 DVR 会话，您希望直接从您的服务器提供 m3u8 文件（无 CF，或 2 秒 CF），但通过 CloudFront 提供媒体文件，并且过期时间非常长。

（对于非 DVR 会话，它都可以通过 CloudFront，因为它是可缓存的。）

CloudFront 的实用性实际上取决于您拥有多少流行（和不流行）的流。

例如，假设特定 POP 中有 20 个 CloudFront 盒子。如果有 5 个人查看一个流，每个人都可能会点击不同的 CF 框，缓存未命中，并且无论如何都需要点击您的服务器。在 CloudFront 停止访问您的服务器并从缓存中提供所有内容之前，您必须有 50 或 70 人查看来自该 POP 的流。因为有许多 POP，你可以让 100 人在世界各地观看一个流，但每个人在不同的 POP 中点击不同的框，你的服务器仍然会收到 100 个请求。

# navigation - luwit 表单导航

> ID：13764260
> 
> 赞同：0
> 
> 时间：2012-12-07T13:41:04.837
> 
> 标签：navigation, lwuit, codenameone

假设我有 3 种形式“主要”、“设置”、“语言”。我从“Main”开始，然后从“Main”打开“Setting”，然后从“Setting”打开“Language”（“Main”->“Setting”->“Language”）。

如何实现这些表单之间的导航？

codenameone 和 lwuit 通过设置 nextform 属性来做到这一点，但我想手动实现它，但我不知道怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:37:04.220

在 Codename One 状态机中，只需调用`showForm("FormName", null);`即可随时显示您想要的任何形式。只要确保从 EDT 调用它。

# css - 2 列图像列表（图和图说明）

> ID：13764262
> 
> 赞同：0
> 
> 时间：2012-12-07T13:41:16.273
> 
> 标签：css, figure

我正在尝试将图像与标题并排放置。

默认情况下，它开箱即用，执行以下操作：

```
<figure>
<img src="1.jpg" width=320 height=240 alt="Image 1">
<img src="2.jpg" width=320 height=240 alt="Image 2">
<img src="3.jpg" width=320 height=240 alt="Image 3">
<img src="4.jpg" width=320 height=240 alt="Image 4">
</figure> 
```

如果我的宽度允许，我会并排获得图像列表。我得到我想要的。是这样的2列图像：

```
Image 1 Image 2
Image 3 Image 4 
```

现在，如果我添加 figcaption 如下：

```
<figure>
<img src="1.jpg" width=320 height=240 alt="Image 1">
<figcaption>caption 1</figcaption>
<img src="2.jpg" width=320 height=240 alt="Image 2">
<figcaption>caption 2</figcaption>
<img src="3.jpg" width=320 height=240 alt="Image 3">
<figcaption>caption 3</figcaption>
<img src="4.jpg" width=320 height=240 alt="Image 4">
<figcaption>capton 4</figcaption>
</figure> 
```

一切看起来像这样：

```
Image 1
caption 1 
Image 2 
caption 2 
Image 3  
caption 3 
Image 4
caption 4 
```

我也在玩列表、层次结构和 css。

问题是我怎样才能做到以下几点？

```
Image 1 Image 2 
caption 1 caption 2 
image 3 Image 4   
caption 3 caption 4 
```

非常感谢，卡罗利斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:22:34.450

首先，我们需要修复您的标记（每个图只允许 1 个 figcaption）。然后我们需要添加某种容器元素。我选择放在一边作为我的容器，但它可以是任何感觉合适的块级元素（div、section 等）：

[http://jsfiddle.net/ZksyN/2/](http://jsfiddle.net/ZksyN/2/)

```
<aside class="figures">
<figure>
<img src="1.jpg" width=320 height=240 alt="Image 1">
<figcaption>caption 1</figcaption>
</figure>

<figure>
<img src="2.jpg" width=320 height=240 alt="Image 2">
<figcaption>caption 2</figcaption>
</figure>

<figure>
<img src="3.jpg" width=320 height=240 alt="Image 3">
<figcaption>caption 3</figcaption>
</figure>

<figure>
<img src="4.jpg" width=320 height=240 alt="Image 4">
<figcaption>capton 4</figcaption>
</figure>
</aside> 
```

这里的 CSS 足以让元素内联显示。您可能希望减少`figure`. 我还取消了对必须显示多少列的任何限制，因此默认情况下它是响应式的（窄设备将获得 1 列，如果它们适合，超宽设备可以获得 3 或 4 列）。如果要为列数添加硬性上限，请添加一个`aside.figures`等于（图像宽度 + 侧边距）* 列数的 max-width。

```
aside.figures {
    overflow: hidden; /* only needed if floating the child elements instead of using inline-block */
}

aside.figures figure {
    display: inline-block;
    border: 1px solid;
} 
```

# android - Android SupportMapFragment 异常错误

> ID：13764266
> 
> 赞同：4
> 
> 时间：2012-12-07T13:41:38.640
> 
> 标签：android, android-support-library, google-play-services, mapfragment, supportmapfragment

我正在尝试使用新的 Google Play 服务库并将地图嵌入到地图片段中，如下所示

**PlaceMapsFragment.java**

```
public class PlaceMapsFragment extends SupportMapFragment {
    private GoogleMap mMap;
    private LatLng mPosFija;

    public PlaceMapsFragment() {
        super();
    }

    public static PlaceMapsFragment newInstance(LatLng posicion) {
        PlaceMapsFragment frag = new PlaceMapsFragment();
        frag.mPosFija = posicion;
        return frag;
    }

    @Override
    public GoogleMap getMap() {
        // TODO Auto-generated method stub
        return super.getMap();
    }

    @Override
    public void onCreate(Bundle arg0) {
        // TODO Auto-generated method stub
        super.onCreate(arg0);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = super.onCreateView(inflater, container, savedInstanceState);
        //initMap();
        return view;
    }

    private void initMap() {
        UiSettings settings = getMap().getUiSettings();
        settings.setAllGesturesEnabled(false);
        settings.setMyLocationButtonEnabled(false);

        getMap().moveCamera(CameraUpdateFactory.newLatLngZoom(mPosFija, 16));
        getMap().addMarker(
                new MarkerOptions().position(mPosFija)
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.marker)));
    }

} 
```

**错误**

```
12-10 01:44:54.416: E/AndroidRuntime(32716): FATAL EXCEPTION: main
12-10 01:44:54.416: E/AndroidRuntime(32716): java.lang.NullPointerException
12-10 01:44:54.416: E/AndroidRuntime(32716):    at maps.ar.b.a(Unknown Source)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at maps.y.h.a(Unknown Source)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at maps.y.au.a(Unknown Source)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at maps.y.ae.moveCamera(Unknown Source)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at com.google.android.gms.maps.internal.IGoogleMapDelegate$Stub.onTransact(IGoogleMapDelegate.java:83)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.os.Binder.transact(Binder.java:297)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at com.google.android.gms.maps.internal.IGoogleMapDelegate$a$a.moveCamera(Unknown Source)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at com.google.android.gms.maps.GoogleMap.moveCamera(Unknown Source)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at com.m7.nomad.PlaceMapsFragment.initMap(PlaceMapsFragment.java:55)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at com.m7.nomad.PlaceMapsFragment.onCreateView(PlaceMapsFragment.java:46)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at com.m7.nomad.PlaceActivity$TabManager.onTabChanged(PlaceActivity.java:153)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:379)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.widget.TabHost.setCurrentTab(TabHost.java:364)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:150)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:540)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.view.View.performClick(View.java:3591)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.view.View$PerformClick.run(View.java:14263)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.os.Handler.handleCallback(Handler.java:605)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.os.Looper.loop(Looper.java:137)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at android.app.ActivityThread.main(ActivityThread.java:4507)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at java.lang.reflect.Method.invokeNative(Native Method)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at java.lang.reflect.Method.invoke(Method.java:511)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
12-10 01:44:54.416: E/AndroidRuntime(32716):    at dalvik.system.NativeStart.main(Native Method) 
```

![在此处输入图像描述](../Images/fe47de7c9c672055189a0ff8128fe942.png)

**清单文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.m7.nomad"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission
        android:name="com.example.newmapview.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.newmapview.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" >
        <activity
            android:name="com.m7.nomad.SplashActivity"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name="com.m7.nomad.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.m7.nomad.PlaceActivity"
            android:label="@string/app_name" >
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="XXXXXXXXXXX" />
    </application>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

</manifest> 
```

我有一个 SherlockFragmentActivity，它有一个 TabHost，它附有两个 Fragment。我正在尝试在其中一个选项卡片段中渲染地图

**编辑**

我已显示要显示的地图，但现在我无法引用地图并将地图更改为混合。基本上我需要参考地图而不会出现 Null 错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T19:25:53.680

在`onCreateView()`你必须调用它的父母。在[https://stackoverflow.com/a/13734470/835787](https://stackoverflow.com/a/13734470/835787)中查看*我的*解决方案。地图在 MapFragment 的 onCreateView() 方法中初始化，如果你不调用它，地图将为空。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T19:52:31.670

1.  super.onCreate(savedInstanceState); 应该在 onCreate() 中调用，而不是 onCreateView()
2.  如果你想重写 onCreateView()，它应该是这样的：

    ```
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = super.onCreateView(inflater, container, savedInstanceState);

        // Do any other initialization you need, but note that the MapView already exists inside v

        setUpMapIfNeeded(v);
        return v;
    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T14:48:59.420

我不知道它是否有帮助，但你应该在这里设置**你的**包：

```
 <permission
    android:name="com.example.newmapview.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.newmapview.permission.MAPS_RECEIVE" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T18:21:32.223

我通过在导入 Google Play 服务库时选中“**将项目复制到工作区”解决了这个错误。**
更多信息在这里：http: [//developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

# r - 在 R 中的数据框的单列中处理重复值

> ID：13764269
> 
> 赞同：3
> 
> 时间：2012-12-07T13:41:54.087
> 
> 标签：r

我刚开始学习 R 编程，并且对专门在数据框的单列中处理重复值毫无疑问。例如考虑一个“样本”数据框`

```
 > Sample
     id   time1   time2             user   group
21   21   21.7    16.1               A        1   
22   22   22.6    17.0               A        2   
23   23   20.9    16.2               A        3   
24   24   21.6    16.2               B        1  
25   25   22.2    16.9               B        1   
26   26   22.5    16.9               B        1 
27   27   22.2    17.3               B        2 
28   28   24.3    16.8               D        2
29   29   22.3    16.8               D        2 
30   30   22.6    17.0               E        3  
31   31   20.1    16.5               E        3  
32   32   22.0    16.9               E        3 
33   33   22.8    16.5               E        4   
34   34   22.0    17.0               E        4  
35   35   22.4    17.0               F        1   
36   36   22.3    16.3               F        1   
37   37   20.6    16.2               F        2 
```

现在我需要找到 1) 具有最高平均 'time1' 的用户 2) 属于 'group' 3 并且具有最大 'time2' 的用户

截至目前，我的理解是我应该使用repeat()、unique()、max()、mean() 和NROW() 函数的组合。但我很难弄清楚这一点。有关如何处理的任何指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:01:54.080

您可以使用`which.max`和`tapply`：

1)

```
which.max(tapply(Sample$time1,Sample$user,mean))
D 
3 
```

2)

```
which.max(tapply(Sample$time2,Sample$user,max))
B 
2 
```

不过要小心关系。

# ruby-on-rails - 访问实例变量

> ID：13764271
> 
> 赞同：1
> 
> 时间：2012-12-07T13:42:01.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, controller

我只是想寻求一些澄清以访问其类中的 Instance 变量（如果这真的很基本，请道歉）。

我的例子是我有一个配方控制器，其中我有很多动作，但特别是我有一个 INDEX 和一个 SHOW 动作

```
def index
@q = Recipe.search(params[:q])
@q.build_condition
end 
```

@q 根据通过我的搜索表单传递的参数搜索我的食谱模型

我想在不同的页面上显示结果以开始（稍后将查看 AJAX 选项），所以在我的 SHOW 操作中我可以这样做吗

```
 def show
 @searchresults = @q.result(:distinct => true)
 end 
```

我认为这是有效的，但如果不是，我会在某个地方出错。任何人都可以提供建议或提供一些建设性的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:45:19.243

您的对象或类应具有以下方法：

*   `@foo.instance_variables`- 这将列出实例变量的名称`@foo`
*   `@foo.instance_variable_get`- 这将获得实例变量的值`@foo`
    *   例如： - 这将获得名为的`@foo.instance_variable_get("@bar")`实例变量的值`@bar``@foo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:45:41.483

不，您不能像这样使用实例变量，因为它们都有不同的操作，并且会因不同的请求而被调用。

但是以下将起作用

```
def index
  @q = Recipe.search(params[:q])
  @q.build_condition
  show
end

def show
  #Following line will work as we are calling this method in index 
  #and so we can use instance variable of index method in the show methos 
  @searchresults = @q.result(:distinct => true)
end 
```

# cakephp-2.1 - 空白页面出现在 cakephp

> ID：13764274
> 
> 赞同：1
> 
> 时间：2012-12-07T13:42:14.960
> 
> 标签：cakephp-2.1

登录后我发现一个空白页面，而相同的代码在其他控制器中工作。我认为会话不起作用，因此重定向也不起作用我正在使用此代码进行会话和重定向

```
$this->Session->write('Adm.id', $result['Adm']['id']);
$this->redirect(array('controller' => 'Adms', 'action' => 'home')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:49:54.983

通常会阻止会话并导致空白页的是会话正在写入的写入权限。如果您使用文件进行会话管理，请检查写入会话数据的目录的权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T15:36:17.673

我有同样的错误。检查您的 AppController 和其他控制器（以及模型）：

*   在文件末尾查找空行

不好 ：

```
Line 1  class UsersController extends AppController {
Line 2     //your code
Line 9  }
Line 10 *Delete this line* 
```

# database - HTML5 中的 LocalStorage 是否有资格作为“数据库”？

> ID：13764276
> 
> 赞同：-1
> 
> 时间：2012-12-07T13:42:18.127
> 
> 标签：database, html, local-storage

我有一个项目需要完成。但是，该项目的严格要求之一是它不应涉及任何数据库。我的问题是，HTML5 本地存储是否有资格作为数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:53:20.240

在**实际意义上**，我不会认为它是一个数据库。

但从定义来看，它可以作为数据库，但不能作为数据库管理系统（查看维基百科的定义：[http](http://en.wikipedia.org/wiki/Database) ://en.wikipedia.org/wiki/Database ）。

有时这些术语可以互换使用，因此很难给出明确的答案。该项目是否具体说明了它的含义？

# rdf - 语义标记

> ID：13764278
> 
> 赞同：3
> 
> 时间：2012-12-07T13:42:30.340
> 
> 标签：rdf, semantics, tagging, opendata

我想构建一个语义标记系统，我想知道是否有人有这方面的经验，可以给我一些从哪里开始的提示。

这个想法是，当用户使用标签来描述一个概念时，这些标签确实具有来自开放数据云的语义底层结构 (RDF)。当用户键入时，会给出标签建议。建议来自例如 dbpedia。

我一直在寻找像 PoolParty 这样的解决方案，但也许还有其他选择。欢迎提出意见，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:26:51.300

例如，**NCBO 生物门户**网站创建了一些小部件，用于查找属于给定本体的单词/标签：

[http://www.bioontology.org/wiki/index.php/NCBO_Widgets](http://www.bioontology.org/wiki/index.php/NCBO_Widgets)

Freebase 小部件的相同想法：

[http://wiki.freebase.com/wiki/Freebase_Suggest](http://wiki.freebase.com/wiki/Freebase_Suggest)

# json - 如何排除杰克逊不使用注释的字段？

> ID：13764280
> 
> 赞同：41
> 
> 时间：2012-12-07T13:42:51.310
> 
> 标签：json, jackson

我需要在渲染之前按名称排除一些字段。字段列表是动态的，所以我不能使用注释。

我尝试创建自定义序列化程序，但我无法在那里获取字段名称。

在 GSON 中我使用过`ExclusionStrategy`，但杰克逊没有这样的功能。有没有等价物？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-09T22:47:10.373

以下按名称排除字段的示例来自[我的博客文章 Gson v Jackson - Part 4](http://programmerbruce.blogspot.com/2011/07/gson-v-jackson-part-4.html#TOC-User-Defined-Exclusion-Strategies)。（搜索`PropertyFilterMixIn`。）此示例演示了使用`FilterProvider`a`SimpleBeanPropertyFilter`到`serializeAllExcept`用户指定的字段名称列表。

```
@JsonFilter("filter properties by name")  
class PropertyFilterMixIn {}  

class Bar  
{  
  public String id = "42";  
  public String name = "Fred";  
  public String color = "blue";  
  public Foo foo = new Foo();  
}  

class Foo  
{  
  public String id = "99";  
  public String size = "big";  
  public String height = "tall";  
}  

public class JacksonFoo  
{  
  public static void main(String[] args) throws Exception  
  {  
    ObjectMapper mapper = new ObjectMapper();  
    mapper.getSerializationConfig().addMixInAnnotations(  
        Object.class, PropertyFilterMixIn.class);  

    String[] ignorableFieldNames = { "id", "color" };  
    FilterProvider filters = new SimpleFilterProvider()  
      .addFilter("filter properties by name",   
          SimpleBeanPropertyFilter.serializeAllExcept(  
              ignorableFieldNames));  
    ObjectWriter writer = mapper.writer(filters);  

    System.out.println(writer.writeValueAsString(new Bar()));  
    // output:  
    // {"name":"James","foo":{"size":"big","height":"tall"}}  
  }  
} 
```

（注意：随着最近的 Jackson 版本，相关 API 可能略有变化。）

尽管该示例确实使用了看似不必要的注释，但该注释并未应用于要排除的字段。（为了帮助更改 API 以简化必要的配置，请不要犹豫，投票支持问题[JACKSON-274](http://jira.codehaus.org/browse/JACKSON-724)的实现。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-06-20T20:31:11.490

我写了一个库来处理类似的用例。我需要根据用户请求数据以编程方式忽略字段。普通的 Jackson 选项过于笨拙，我讨厌它使我的代码看起来的方式。

该库使这更容易理解。它允许您简单地执行此操作：

```
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.module.SimpleModule;
import com.monitorjbl.json.JsonView;
import com.monitorjbl.json.JsonViewSerializer;
import static com.monitorjbl.json.Match.match;

//initialize jackson
ObjectMapper mapper = new ObjectMapper();
SimpleModule module = new SimpleModule();
module.addSerializer(JsonView.class, new JsonViewSerializer());
mapper.registerModule(module);

 //get a list of the objects
List<MyObject> list = myObjectService.list();

String json;
if(user.getRole().equals('ADMIN')){
    json = mapper.writeValueAsString(list);
} else {
    json = mapper.writeValueAsString(JsonView.with(list)
        .onClass(MyObject.class, match()
           .exclude("*")
           .include("name")));
}

System.out.println(json); 
```

代码[在 GitHub 上](https://github.com/monitorjbl/json-view)，希望对你有帮助！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-29T06:52:01.083

如果你在两个或多个 pojo 上定义了过滤器，你可以试试这个：

```
@JsonFilter("filterAClass") 
class AClass  
{       
  public String id = "42";  
  public String name = "Fred";  
  public String color = "blue";
  public int sal = 56;
  public BClass bclass = new BClass();  
}  

//@JsonSerialize(include=JsonSerialize.Inclusion.NON_NULL)
@JsonFilter("filterBClass") 
class BClass  
{  

  public String id = "99";  
  public String size = "90";  
  public String height = "tall";  
  public String nulcheck =null;  
}  
public class MultipleFilterConcept {
    public static void main(String[] args) throws Exception  
      {   
        ObjectMapper mapper = new ObjectMapper();
     // Exclude Null Fields
        mapper.setSerializationInclusion(Inclusion.NON_NULL);
        String[] ignorableFieldNames = { "id", "color" };  
        String[] ignorableFieldNames1 = { "height","size" };  
        FilterProvider filters = new SimpleFilterProvider()  
          .addFilter("filterAClass",SimpleBeanPropertyFilter.serializeAllExcept(ignorableFieldNames))
          .addFilter("filterBClass", SimpleBeanPropertyFilter.serializeAllExcept(ignorableFieldNames1));  
        ObjectWriter writer = mapper.writer(filters);
       System.out.println(writer.writeValueAsString(new AClass())); 

      }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-10T20:40:27.990

Jackson 对大多数此类事情都依赖注释；但您不必直接注释值类。您还可以使用“混合注释”（参见[http://www.cowtowncoder.com/blog/archives/2009/08/entry_305.html](http://www.cowtowncoder.com/blog/archives/2009/08/entry_305.html)）。

`@JsonIgnore`除了基本的（每个属性）或`@JsonIgnoreProperties`（每个类）之外，您还可以使用一些选项，请参阅[http://www.cowtowncoder.com/blog/archives/2011/02/entry_443.html](http://www.cowtowncoder.com/blog/archives/2011/02/entry_443.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-17T01:20:46.633

我编写了一个名为[Squiggly Filter](https://github.com/bohnman/squiggly-filter-jackson)的库，它根据 Facebook Graph API 语法的子集选择字段。例如，要选择用户对象的地址字段的邮政编码，您可以使用查询字符串`?fields=address{zipCode}`。Squiggly Filter 的优点之一是，只要您可以访问呈现 json 的 ObjectMapper，您就不必修改任何控制器方法的代码。

假设您使用的是 servlet API，您可以执行以下操作：

1) 注册一个过滤器

```
<filter> 
    <filter-name>squigglyFilter</filter-name>
    <filter-class>com.github.bohnman.squiggly.web.SquigglyRequestFilter</filter-class> 
</filter> 
<filter-mapping> 
    <filter-name>squigglyFilter</filter-name>
    <url-pattern>/**</url-pattern> 
</filter-mapping> 
```

2）初始化对象映射器

```
Squiggly.init(objectMapper, new RequestSquigglyContextProvider()); 
```

3）您现在可以过滤您的json

```
curl https://yourhost/path/to/endpoint?fields=field1,field2{nested1,nested2} 
```

有关 Squiggly 过滤器的更多信息，请访问[github](https://github.com/bohnman/squiggly-filter-jackson)。

# facebook - 查找我的页面被标记的 Facebook 照片

> ID：13764281
> 
> 赞同：1
> 
> 时间：2012-12-07T13:42:55.383
> 
> 标签：facebook, facebook-graph-api, tags

我使用 Facebook 业务页面中的相册在网站上构建了一个不错的相册。

从 Facebook 提取相册和内容工作正常，但我想通过允许客户在自己的照片中标记页面来为其添加“客户照片”功能。

为此，我需要将标记的照片与相册合并，但我不知道如何获取它们。

```
http://graph.facebook.com/553788181316876/photos?fields=picture 
```

应该按照我的理解去做，只要我们有正确的访问令牌。

但是，我一直在搞乱[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

除了个人资料图片，什么都不能出来。

目前只有一张照片标记了此页面，这是我个人资料中的照片，我已明确将其隐私设置为`public`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:11:14.013

最后我想通了

```
https://graph.facebook.com/PAGE_ID/?
fields=albums.fields(name,photos.fields(picture),updated_time,cover_photo),
tagged.fields(picture,updated_time,name)&access_token=ACCESS_TOKEN 
```

这给了我两组数据，相册及其内容，以及所有标记的图像。

# oracle - 更好的（响应时间）查询分页？

> ID：13764283
> 
> 赞同：0
> 
> 时间：2012-12-07T13:43:01.620
> 
> 标签：oracle, pagination

我正在使用 Oracle 11g XE。

“简单”的问题：哪个更好？查询 A、B 还是 C？我正在尝试实现对结果集分页查询的最快响应时间。我的页面最多包含 20 个结果。

A：

```
SELECT /*+ FIRST_ROWS(20) */ *
FROM
  ((SELECT SCORE(1) RANK, F.ID, 1 AS "IsFile"
    FROM "File" F
    WHERE CONTAINS("ContentCLOB", 'April 2009', 1) > 0)
  UNION ALL
    (SELECT SCORE(2) RANK, C.ID, 0 AS "IsFile"
    FROM "Claim" C
    WHERE CONTAINS(C."IdClaim", 'jjkl', 2) > 0))
ORDER BY RANK DESC 
```

乙：

```
 ((SELECT /*+ FIRST_ROWS(20) */ SCORE(1) RANK, F.ID, 1 AS "IsFile"
    FROM "File" F
    WHERE CONTAINS("ContentCLOB", 'April 2009', 1) > 0)
  UNION ALL
    (SELECT /*+ FIRST_ROWS(20) */ SCORE(2) RANK, C.ID, 0 AS "IsFile"
    FROM "Claim" C
    WHERE CONTAINS(C."IdClaim", 'jjkl', 2) > 0))
ORDER BY RANK DESC 
```

C：

```
 Like B but without the hints. 
```

解释计划的唯一区别是查询 A 在订购前有一个额外的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:12:30.767

将第一行添加到子查询通常是一个好主意（忽略 VIEW 步骤，因为在第一个查询中您有“select .. from ()”，这是额外的步骤）。

我认为以下内容对您来说会更好，因为我猜您的 SORT ORDER BY 发生在表访问之后。另外，您是如何分页的，因为我在那里看不到任何 rownum 内容（您是否只是为这种情况简化了它？）。

```
select r,
       case "IsFile" when 1 then (select id from File f where f.rowid = a.rid)
         when 0 then (select id from Claim c where c.rowid = a.rid)
       end id,
       "IsFile"
  from (select /*+ first_rows(20) */ score(100) r, rowid rid,  1 AS "IsFile"
           from File s
          where contains(ContentCLOB, 'z', 100) > 0
         union all
         select /*+ first_rows(20) */ score(1) r, rowid rid, 0 AS "IsFile"
           from Claim s
          where contains(IdClaim, 'z', 1) > 0
          order by r desc) a
 where rownum <= 20; 
```

仅当您想要 ID 和 rowid 不够好时才需要最后的案例。例如继承人一个小测试：

```
SQL> set autotrace on
SQL> select rank, id, "IsFile"
  2    from (select rank, id, "IsFile", rownum rn
  3             from (select /*+ FIRST_ROWS(20) */
  4                     *
  5                      from ((select score(1) rank, f.id, 1 as "IsFile"
  6                                from File f
  7                               where contains(ContentCLOB, 'z', 1) > 0) union all
  8                             (select score(2) rank, c.id, 0 as "IsFile"
  9                                from Claim c
 10                               where contains(c.IdClaim, 'z', 2) > 0))
 11                     order by rank desc))
 12   where rn >= 1
 13     and rownum <= 20
 14  /

      RANK         ID IsFile
---------- ---------- ----------
        25      16373          0
        21       1192          1
        21      13477          0
        21       5394          0
        21       2870          0
        17        113          1
        17      19874          0
        17       1939          1
        17       1765          1
        17       2322          1
        17       3195          1

      RANK         ID IsFile
---------- ---------- ----------
        17       4248          1
        17       4346          1
        17       4183          1
        17       8444          1
        17       9040          1
        17       9395          1
        17      10502          1
        17      10131          1
        17      11027          1

20 rows selected.

Execution Plan
----------------------------------------------------------
Plan hash value: 1202090801

--------------------------------------------------------------------------------------------------
| Id  | Operation                          | Name        | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                   |             |    20 |   840 |     9  (12)| 00:00:01 |
|*  1 |  COUNT STOPKEY                     |             |       |       |            |          |
|*  2 |   VIEW                             |             |    24 |  1008 |     9  (12)| 00:00:01 |
|   3 |    COUNT                           |             |       |       |            |          |
|   4 |     VIEW                           |             |    24 |   696 |     9  (12)| 00:00:01 |
|   5 |      SORT ORDER BY                 |             |    24 |   696 |     9  (12)| 00:00:01 |
|   6 |       VIEW                         |             |    24 |   696 |     8   (0)| 00:00:01 |
|   7 |        UNION-ALL                   |             |       |       |            |          |
|   8 |         TABLE ACCESS BY INDEX ROWID| FILE    |    10 | 20270 |     4   (0)| 00:00:01 |
|*  9 |          DOMAIN INDEX              | CTXIDX1     |       |       |     4   (0)| 00:00:01 |
|  10 |         TABLE ACCESS BY INDEX ROWID| CLAIM |    14 | 28378 |     4   (0)| 00:00:01 |
|* 11 |          DOMAIN INDEX              | CTXIDX2     |       |       |     4   (0)| 00:00:01 |
--------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - filter(ROWNUM<=20)
   2 - filter("RN">=1)
   9 - access("CTXSYS"."CONTAINS"("CONTENTCLOB",'z',1)>0)
  11 - access("CTXSYS"."CONTAINS"("R"."IDCLAIM",'z',2)>0)

Note
-----
   - dynamic sampling used for this statement (level=2)

Statistics
----------------------------------------------------------
         51  recursive calls
          0  db block gets
       6506  consistent gets
          0  physical reads
          0  redo size
        760  bytes sent via SQL*Net to client
        375  bytes received via SQL*Net from client
          3  SQL*Net roundtrips to/from client
          1  sorts (memory)
          0  sorts (disk)
         20  rows processed 
```

相对

```
SQL> select rank, id, "IsFile"
  2    from (select rank,
  3                  case "IsFile"
  4                     when 1 then
  5                      (select id from File f where f.rowid = a.rid)
  6                     when 0 then
  7                      (select id from Claim c where c.rowid = a.rid)
  8                   end id, "IsFile", rownum r
  9             from (select /*+ first_rows(20) */
 10                     score(100) rank, rowid rid, 1 as "IsFile"
 11                      from File s
 12                     where contains(ContentCLOB, 'z', 100) > 0
 13                    union all
 14                    select /*+ first_rows(20) */
 15                     score(1) rank, rowid rid, 0 as "IsFile"
 16                      from Claim s
 17                     where contains(IdClaim, 'z', 1) > 0
 18                     order by rank desc) a)
 19   where r >= 1
 20     and rownum <= 20
 21  /

      RANK         ID IsFile
---------- ---------- ----------
        25      16373          0
        21       1192          1
        21      13477          0
        21       5394          0
        21       2870          0
        17        113          1
        17      19874          0
        17       1939          1
        17       1765          1
        17       2322          1
        17       3195          1

      RANK         ID IsFile
---------- ---------- ----------
        17       4248          1
        17       4346          1
        17       4183          1
        17       8444          1
        17       9040          1
        17       9395          1
        17      10502          1
        17      10131          1
        17      11027          1

20 rows selected.

Execution Plan
----------------------------------------------------------
Plan hash value: 1724352232

-------------------------------------------------------------------------------------------
| Id  | Operation                   | Name        | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |             |    20 |   840 |     9  (12)| 00:00:01 |
|   1 |  TABLE ACCESS BY USER ROWID | FILE    |     1 |    25 |     1   (0)| 00:00:01 |
|   2 |   TABLE ACCESS BY USER ROWID| CLAIM |     1 |    25 |     1   (0)| 00:00:01 |
|*  3 |  COUNT STOPKEY              |             |       |       |            |          |
|*  4 |   VIEW                      |             |    24 |  1008 |     9  (12)| 00:00:01 |
|   5 |    COUNT                    |             |       |       |            |          |
|   6 |     VIEW                    |             |    24 |   672 |     9  (12)| 00:00:01 |
|   7 |      SORT ORDER BY          |             |    24 | 48336 |     8  (50)| 00:00:01 |
|   8 |       UNION-ALL             |             |       |       |            |          |
|*  9 |        DOMAIN INDEX         | CTXIDX1     |    10 | 20140 |     4   (0)| 00:00:01 |
|* 10 |        DOMAIN INDEX         | CTXIDX2     |    14 | 28196 |     4   (0)| 00:00:01 |
-------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   3 - filter(ROWNUM<=20)
   4 - filter("R">=1)
   9 - access("CTXSYS"."CONTAINS"("CONTENTCLOB",'z',100)>0)
  10 - access("CTXSYS"."CONTAINS"("IDCLAIM",'z',1)>0)

Note
-----
   - dynamic sampling used for this statement (level=2)

Statistics
----------------------------------------------------------
         51  recursive calls
          0  db block gets
        216  consistent gets
          0  physical reads
          0  redo size
        760  bytes sent via SQL*Net to client
        375  bytes received via SQL*Net from client
          3  SQL*Net roundtrips to/from client
          1  sorts (memory)
          0  sorts (disk)
         20  rows processed 
```

结果相同，但请注意 IO: original:

```
 6506  consistent gets 
```

将表访问延迟到排序之后：

```
 216  consistent gets 
```

根据您的索引/表大小，节省的费用可能会更多。

# svn - 我的 Subversion 存储库中的一些文件的内容被写入了两次。我能做些什么？

> ID：13764284
> 
> 赞同：2
> 
> 时间：2012-12-07T13:43:06.633
> 
> 标签：svn, jenkins

问题标题说明了整个问题。无论如何，让我更精确一点。

这些 java 文件来自我合并到我的主干中的一个分支。

当我在 Eclipse 中检查它们时，它们看起来是正确的。但是当詹金斯检查它们时，内容加倍并且最初包含的文件

```
public enum Properties {
    type("type"),
    kind("kind"), 
    value("value");
} 
```

显示为

```
public enum Properties {
    type("type"),
    kind("kind"), 
    value("value");
}
public enum Properties {
    type("type"),
    kind("kind"), 
    value("value");
} 
```

那么，问题是什么？我能做些什么来解决它？

**编辑**当我说文件在 Eclipse 中正确时，我可能不清楚：在我使用的工作区中，该文件对于 Eclipse 和 Maven 是正确的。但是当 Jenkins 签出时，该文件总是出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T23:55:02.397

尝试进入 Jenkins 中的项目，然后在左侧菜单的 Workspace 下选择 Wipe Out Workspace 选项。

我们遇到了同样的问题。它似乎对我们有用。我还不能确定，但​​我想一旦我在一个项目上完成了这个，我们就不会再遇到它了。如果是这种情况，我怀疑它与升级 SVN 或升级 Jenkins SVN 插件有关，并且工作副本不知何故丢失或有一些额外的元数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T13:09:59.013

这似乎是一个已知错误：[#JENKINS-14551：包含从分支合并的添加文件的更新导致这些文件的内容加倍](https://issues.jenkins-ci.org/browse/JENKINS-14551)。这似乎是 Jenkins Subversion 插件中的一个问题。

解决方法是更改​​ Jenkins 作业的 SVN 更新策略以始终签出干净的副本。

# visual-studio - 从 Qt SDK 包管理器为 Visual Studio 安装 Qt 插件

> ID：13764288
> 
> 赞同：9
> 
> 时间：2012-12-07T13:43:34.983
> 
> 标签：visual-studio, qt, visual-studio-addins

我无法从 Qt SDK 附带的包管理器中找到为 Visual Studio 安装 Qt 插件的位置。

插件是否带有“Desktop Qt 4.8.1 - MSVC 2010”模块？

![在此处输入图像描述](../Images/174a4eede60262349a877399b081d2d9.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-07T18:55:10.597

Visual Studio 插件可以在[Qt 项目的下载页面](http://www.qt.io/download-open-source/#section-2)的“其他”类别中找到。下载并运行此安装程序，然后按照向导中的说明进行操作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-27T14:53:18.777

网站已经更新，下载到[Qt开源下载页面](http://www.qt.io/download-open-source/#section-7)，点击“其他下载”或“查看所有下载并滚动到底部。

# java - 从分词器到子字符串

> ID：13764289
> 
> 赞同：-1
> 
> 时间：2012-12-07T13:43:35.443
> 
> 标签：java, substring, tokenize

我有这个程序与标记器一起使用，但我想知道如何使用子字符串来做到这一点。

我想做的是让用户输入 14 个数字/字符。我想得到输入 1 by 1。

使用标记器，用户必须像这样输入“1 A 2 B 3 C 4 D 5 E 6 F 7 G”，每个数字/字符之间有空格才能使标记器工作。

我想用子字符串做的是让它让我的用户可以输入像“1A2B3C4D5E6F7G”

```
 str = JOptionPane.showInputDialog(null, "Enter the work hours");
    StringTokenizer st = new StringTokenizer(str);

    while (x < 7) {

        if (st.hasMoreTokens()) {
        startday[x] = st.nextToken();
        endday[x] = st.nextToken();

        }

        x++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:49:58.740

在这种情况下，您可以简单地遍历内部 char 数组：

```
str = JOptionPane.showInputDialog(null, "Enter the work hours");
for (char entry:str.toCharArray()) {
  processValue(entry);
} 
```

或者，允许可选空格：

```
str = JOptionPane.showInputDialog(null, "Enter the work hours");
for (char entry:str.toCharArray()) {
  if (entry != ' ') {
    processValue(entry);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:48:32.387

当您使用标记时，您可以使用正则表达式从结果字符串中修剪空格。

在我看来，使用`substring`类似的东西不是很有效。但是，如果您真的需要这样做，[请阅读此处。](http://javacodeonline.blogspot.ro/2010/12/java-substring-examples.html)

# java - Android：将大图像从 url 传递到 ImageView

> ID：13764297
> 
> 赞同：2
> 
> 时间：2012-12-07T13:44:16.097
> 
> 标签：java, android, bitmap, imageview, bitmapfactory

没错，我正在创建一个 Android 应用程序，我需要在其中显示来自某些 URL 的图像。不幸的是，图像太大了，当我将它传递给可绘制对象而不进行任何解码时，它会给我一个内存不足异常。

因此，我尝试首先使用 BitmapFactory.decodeStream 解码图像。

这是一些代码：

首先是我用来解码图像的方法：

```
public static Bitmap decodeSampledBitmapFromResource(Resources res, String src,
            int reqWidth, int reqHeight) {

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();

        InputStream input = null;
        InputStream input2 = null;

        Rect paddingRect = new Rect(-1, -1, -1, -1);

        try {
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setDoInput(true);
            connection.connect();
            input = connection.getInputStream();
            //input2 = connection.getInputStream();
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }

        options.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(input, paddingRect, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

       try {
        input.reset();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;

        return BitmapFactory.decodeStream(input, paddingRect, options);
    }

public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 40;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;
} 
```

然后我在活动的 OnCreate 中调用该方法：

```
imageFrame1.setImageBitmap(
                decodeSampledBitmapFromResource(getResources(), src, 100, 100)); 
```

就像现在的代码一样，当我在第一次解码后尝试重置输入流时，它会捕获一个 IOException，然后我收到 LogCat 消息：SKImageDecoder::Factory Returned Null。

如果我删除 input.reset(); 从代码中，我得到相同的 LogCat 消息，只是没有 IOException。

在这一点上有点难过，希望这里有人有一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:51:49.100

您无法从 HTTP 连接重置流，因为底层逻辑没有缓存（足够）流。

创建一种方法，将图片写入本地存储（磁盘或内存），然后对其进行分析。可以选择同时做这两个（需要更多的努力）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:01:34.483

请记住 inputStream 可能不支持重置。此外，您必须先调用 mark() 来标记该点，inputStream 应重置为。要检查是否支持标记/重置，请调用 InputStream.markSupported()。

如果没有标记/重置，您可以将图像下载到本地文件。它不会导致 OutOfMemory 并允许您以与您尝试从网络（使用子采样）相同的方式解码 FileInputStream 中的图像。

# ios - presentViewController:animated:completion: 的 ARC 内存管理是否在 iOS 6.x 中损坏？

> ID：13764298
> 
> 赞同：8
> 
> 时间：2012-12-07T13:44:17.377
> 
> 标签：ios, ios5, ios6, modalviewcontroller

我的视图控制器正在通过该`presentViewController:animated:completion:`方法呈现视图。视图很好。

然后我关闭这个视图并重新呈现它并得到以下崩溃：

```
*** -[WebBrowser isKindOfClass:]: message sent to deallocated instance 0x1f640ac0 
```

我的代码正在使用 ARC。这是我的 WebBrowser 类的代码，一个简单的嵌入式浏览器。

浏览器.h：

```
@interface WebBrowser : ITViewController <UIWebViewDelegate, UIAlertViewDelegate>

@property (nonatomic, strong) NSString *URL;
@property (nonatomic, weak) IBOutlet UIWebView *webView;
@property (nonatomic, weak) IBOutlet UIActivityIndicatorView *spinner;

- (id)initWithURL:(NSString *)URL;
- (IBAction)dismissView:(id)sender;

@end 
```

浏览器.m:

```
@implementation WebBrowser

- (id)initWithURL:(NSString *)URL_ {
    self = [super initWithNibName:@"MyNib" bundle:nil];
    if (self) {
        self.URL = URL_;
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    self.webView.delegate = self;

    if (self.URL) {
        [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:self.URL]]];
    }
}

- (IBAction)dismissView:(id)sender {
    self.URL = nil;
    [self.webView stopLoading];
    self.webView.delegate = nil;
    [self dismissViewControllerAnimated:YES completion:NULL];
}

// + some non-related web view delegate stuff 

@end 
```

最后，这是我在父视图控制器中呈现视图的方式：

```
WebBrowser *browser = [[WebBrowser alloc] initWithURL:URL];
[self presentViewController:browser animated:YES completion:NULL]; 
```

我正在运行 iOS 6 并使用 ARC 进行编译。

首先，我认为这个错误与 ARC 相关。这是我的原帖：

## 原帖

我注意到我的应用程序在使用 iOS 6.x 时在显示模式视图控制器并在它与以前版本的 iOS 正常工作时释放它时崩溃。

怪我还没有使用 ARC（这是我在这个项目上的下一个重要步骤），但是例如，当使用以下代码显示 Game Center 排行榜时，以下步骤：

1.  显示排行榜
2.  关闭排行榜
3.  再次显示排行榜（精确更新：通过运行`showLeaderboard`如下所示的相同，即显示 的**新**实例`GKLeaderboardViewController`）

然后，发生以下错误

```
*** -[GKLeaderboardViewController isKindOfClass:]: message sent to deallocated instance 0x17467120 
```

这是我的代码：

```
- (void)showLeaderboard {
    if ([[GKLocalPlayer localPlayer] isAuthenticated]) {
        GKLeaderboardViewController *lb = [[GKLeaderboardViewController alloc] init];
        lb.category = ...;
        lb.leaderboardDelegate = self;
        self.modalPresentationStyle = UIModalPresentationCurrentContext;
        [self presentModalViewController:lb animated:YES];
        [lb release];
    } else {
        ...
    }
}

- (void)leaderboardViewControllerDidFinish:(GKLeaderboardViewController *)viewController{
    [self dismissModalViewControllerAnimated:YES];
} 
```

事实证明，删除`[lb release]`指令解决了我的问题，而且 iOS 5.x 也不会发生这种崩溃。

Game Center 成就视图控制器或我的任何其他自定义视图控制器显示为`presentModalViewController:`.

似乎用`presentModalViewController:`新指令替换不推荐使用的指令也`presentViewController:animated:completion:`不能解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:53:20.613

我看到至少一个可能的问题：

```
[self.webView stopLoading];
self.webView.delegate = nil; 
```

一般来说，在调用之前设置`delegate`为更安全。`nil``stopLoading`

`dismissViewControllerAnimated`此外，以应有的方式使用它肯定更安全，即在*呈现*控制器上调用它。尽管文档说明调用已传递给呈现控制器，但在方法内部正在释放的对象上调用方法并不是一个好主意。

```
- (IBAction)dismissView:(id)sender {
    // pass the event to the presenting controller
    // the presenting controller should call [self dismissViewControllerAnimated:YES completion:NULL];
}

- (void)viewWillDissapear {
  [super viewWillDissapear];

   //no need to do this, it's done automatically in ARC
   //self.URL = nil;

   self.webView.delegate = nil;
   [self.webView stopLoading];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T16:58:07.393

**编辑**

根据Apple的文档，您应该从父（呈现）视图控制器中关闭视图控制器：http: [//developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html#//apple_ref/doc/uid/ TP40007457-CH111-SW14](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html#//apple_ref/doc/uid/TP40007457-CH111-SW14)

“当需要关闭呈现的视图控制器时，首选方法是让呈现的视图控制器解除它。换句话说，只要有可能，呈现视图控制器的同一个视图控制器也应该负责解除它。”

另外，您能否弄清楚哪些视图控制器正在呈现哪些，以及有多少是相互重叠的。来自苹果文档：

“如果您连续呈现多个视图控制器，从而构建一组呈现的视图控制器，则在堆栈中较低的视图控制器上调用此方法会解除其直接子视图控制器以及堆栈上该子视图上方的所有视图控制器。当这个发生时，只有最顶层的视图以动画方式被解除；任何中间视图控制器都简单地从堆栈中删除。最顶层的视图使用其模态转换样式被解除，这可能与其他视图控制器使用的样式不同在堆栈中较低的位置。”

因此，如果您认为它可能与来自 webview 的委托方法有关，您可能应该从委托属性中取消订阅视图/停止 webview 在 vi​​ewWillUnload 中加载，而不是在解除 IBAction 中，因为这不一定叫做。

**我已对此进行了编辑以使其更加完整/清晰**

在呈现视图之前，您需要将浏览器视图设置为具有强属性的实例变量。然后在解雇它后将其设置为零。

首先为 Modals 创建一个委托协议：

```
@protocol ModalViewDelegate
/**
 Delegation callback for when a modal has been dismissed
*/
- (void)modalDidDismiss:(UIViewController*)viewController;
@end 
```

在您呈现的视图控制器界面中，订阅协议：

```
@interface PresentingViewController <ModalViewDelegate>
@property (nonatomic,strong) WebBrowser *browserView;
@end 
```

在您呈现视图时的实现中：

```
WebBrowser *browser = [[WebBrowser alloc] initWithURL:URL];
browser.delegate = self
self.browserView = browser;
[self presentViewController:browser animated:YES completion:NULL]; 
```

在您的 WebBrowser 界面中：

```
@interface WebBrowser : ITViewController <UIWebViewDelegate, UIAlertViewDelegate>

@property (nonatomic, strong) NSString *URL;
@property (nonatomic, weak) IBOutlet UIWebView *webView;
@property (nonatomic, weak) IBOutlet UIActivityIndicatorView *spinner;

@property (nonatomic, weak) id <ModalViewDelegate> delegate;

- (id)initWithURL:(NSString *)URL;
- (IBAction)dismissView:(id)sender;

@end 
```

在您的 WebBrowser 实现中：

```
- (IBAction)dismissView:(id)sender {
    self.URL = nil;
    [self.webView stopLoading];
    self.webView.delegate = nil;
    [self.delegate didDismissBrowser:self];
} 
```

回到你的父视图控制器：

```
- (void)didDismissBrowser:(WebBrowser*)browser
{
    if (browser == self.browserView)
    {
        [self dismissViewControllerAnimated:YES completion:NULL];
        self.browserView = nil;
    }
} 
```

# lucene - EclipseLink 的类似 HibernateSearch 的机制

> ID：13764300
> 
> 赞同：1
> 
> 时间：2012-12-07T13:44:24.350
> 
> 标签：lucene, full-text-search, eclipselink, java-ee-6, hibernate-search

我在 JEE6 中有很好的应用程序，我使用 EclipseLink 作为 JPA 提供程序。但是..我需要对一些具有大量数据的字段进行全文搜索。我认为数据库内部机制还不够。我搜索了一些关于可能性的信息，HibernateSearch 看起来很有希望，但我不想迁移到 Hibernate，因为我对 EclipseLink 很满意。我找到了 Compass 项目，但不再完全支持它。

问题是：你们有一些好主意如何解决这个难题吗？您将使用什么来实现 EclipseLink 的全文搜索？你会直接使用Lucene吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:36:33.933

我使用了 Solr。希望它会帮助某人。

# c++ - 将 UTC 时差转换为字符串提升

> ID：13764301
> 
> 赞同：1
> 
> 时间：2012-12-07T13:44:40.747
> 
> 标签：c++, boost

我有两个 UTC 时间戳（自 1.1.1970 以来的时间）

我想将它们之间的区别显示为字符串 %H:%M:%S 例如。13:34:12

目前我已经走到了这一步

```
time_facet *facet = new time_facet("%H:%M:%S");
cout.imbue(locale(cout.getloc(), facet));

ptime now = boost::date_time::not_a_date_time;
now = boost::posix_time::microsec_clock::universal_time();

ptime timerEnd = from_time_t(timestamp);
boost::posix_time::time_period tp(now, timerEnd);

//what now? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:36:11.507

像这样的东西可以完成这项工作，你不需要 time_period

```
#include <iostream>
#include <boost/date_time/posix_time/posix_time.hpp>

namespace pt = boost::posix_time;

int main() {
    //format for ptime
    pt::time_facet *facet = new pt::time_facet("%H:%M:%S");
    //format for time_duration
    facet->time_duration_format("%H:%M");

    std::cout.imbue(std::locale(std::cout.getloc(), facet));

    time_t timestamp1 = 79387320;
    time_t timestamp2 = 79377320;
    pt::time_duration td = pt::from_time_t(timestamp1) - pt::from_time_t(timestamp2);

    std::cout << td << std::endl;       
    return 0;
} 
```

# visual-studio - Visual Studio 找出分配给热键的命令

> ID：13764306
> 
> 赞同：17
> 
> 时间：2012-12-07T13:44:47.643
> 
> 标签：visual-studio, hotkeys

我安装了一个重新定义一些热键的 Visual Studio 插件。对于其中一些，我需要回到 Visual Studio 的标准热键。我知道在 Tools->Options->Environment->Keyboard 下我可以重新定义热键，我做到了。问题是现在我的热键 Ctrl-E, C 似乎有两个关联的命令，插件一个和标准一个。当我按下该组合时，Visual Studio 运行插件命令而不是标准命令。

问题是我不知道插件命令名称，所以除非我通过所有命令查看关联的热键，否则我无法将其分离。有没有办法发现与特定热键关联的命令？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-07T13:54:13.487

您可以尝试将此快捷方式分配给另一个命令，然后您将收到[您的命令]已使用此快捷方式的信息：

![在此处输入图像描述](../Images/a8fd9732db27a113b35f96da79533393.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-27T17:59:19.033

键盘快捷键扩展可以提供帮助。它会生成一个包含条目块的文本文件，其中列出了您当前的所有快捷方式，如下所示：

```
<command shortcut="Ctrl+M, Ctrl+E" name="Edit.ExpandCurrentRegion" /> 
```

然后，您可以使用快捷方式在导出的文件中搜索命令。

[键盘快捷键资源管理器](https://visualstudiogallery.msdn.microsoft.com/6ce3b73c-2284-4b95-b61d-6de74aa8dfe6)

# symfony - 如何使用从作曲家安装的 phpunit？

> ID：13764309
> 
> 赞同：57
> 
> 时间：2012-12-07T13:45:05.957
> 
> 标签：symfony, phpunit, composer-php

我想开始用 phpunit 对我的 symfony 2 应用程序进行单元测试。我使用composer安装了phpunit（每个项目依赖）。 [http://www.phpunit.de/manual/current/en/installation.html](http://www.phpunit.de/manual/current/en/installation.html)

我现在如何在 Zend Server 上运行 phpunit 命令？我没有安装梨。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-12-07T14:20:36.220

如果您遵循文档，则已将`phpunit/phpunit`依赖项设置为“开发依赖项”。

如果你没有 composer，你需要先安装它。这在文档中进行了解释：[Installation *nix](http://getcomposer.org/doc/00-intro.md#installation-nix)或[Installation Windows](http://getcomposer.org/doc/00-intro.md#installation-windows)。`self-update`如果您已经安装了 composer，最好通过运行以下命令将 composer 更新到最新版本：

```
$ php composer.phar self-update 
```

完成此操作后，您需要安装所有依赖项，包括开发依赖项。这是通过使用开关运行`update`命令来完成的：`--dev`

```
$ php composer.phar update --dev 
```

所有依赖项都安装在`vendor`目录中。PHPunit 从控制台运行。Composer 自动将控制台文件放入`vendor/bin`目录中。您需要`phpunit`在那里执行文件：

```
$ vendor/bin/phpunit -c app/ 
```

该`-c`开关告诉 PHPUnit 在`app`目录中查找配置文件，Symfony2 已经设置了正确的配置来运行`<bundle>/Tests`目录中的所有测试。

# 更新 (05-04-2013)

Composer 已更改其更新/安装命令。`update`默认情况下会安装 dev 依赖项，如果要安装 dev 依赖项，则需要使用该`--dev`选项。

# 更新（2013 年 11 月 6 日）

Composer 再次更改了他们的命令，该`install`命令还将安装开发依赖项。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-08-12T06:05:43.590

更多的作曲方式呢？

```
composer exec phpunit 
```

它可以用于 vendor/bin 目录中的每个二进制文件。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-02-12T11:11:02.417

**更新（2014 年 12 月 2 日）**

Composer 和 PHPUnit 再次更改了它们的命令。install 命令还将安装开发依赖项：

作曲家.json：

```
...
"require-dev": {
    "phpunit/phpunit": "3.7.*"
}, 
```

运行：

```
$ composer.phar update --prefer-dist --dev 
```

现在您可以通过以下方式运行测试：

```
$ bin/phpunit -c /app 
```

干杯，

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-08-04T14:39:21.023

我喜欢在 中定义一个脚本`composer.json`，这样我就可以运行：

```
$ composer test
# ... runs phpunit 
```

为此，我需要修改`composer.json`以包含这样的条目：

```
"scripts": {
    "test": [
        "phpunit tests/*.php"
    ]
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-06-04T10:59:10.030

对于 Symfony 3，添加`"phpunit/phpunit": "5.4.*"`到`"require-dev"`您的部分`composer.json`并从应用程序根目录运行测试：

```
./vendor/bin/phpunit tests 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-08-26T08:20:11.457

将其添加为开发依赖项，在您的项目目录中：

```
composer require --dev "phpunit/phpunit=4.8.*" 
```

安装的 phpunit 现在可以使用以下命令执行：

```
./vendor/bin/phpunit 
```

# birt - BIRT - 基于运行时数据的动态母版页

> ID：13764311
> 
> 赞同：2
> 
> 时间：2012-12-07T13:45:11.527
> 
> 标签：birt

我正在尝试部署将由多个组织使用的单个报告。这些组织中的每一个都希望在以下情况下在报告中显示其徽标：

```
logged_in_user.org_id = 'xxx' or 'yyy'. 
```

我创建了一个不错的库，其中包含多个包含不同徽标的母版页。我无法确定的是，在我加载用户数据后，是否有动态选择在运行时应用到报表的母版页，也许是在`initialize()`页面的方法中。

我想出了如何使用以下方法获取母版页的句柄：

```
reportContext.getDesignHandle().findMasterPage("org_X_Master") 
```

但是我很难弄清楚如何将其设置为报告的母版页。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T08:32:51.110

我们有一个非常相似的问题。可能还有其他解决方案，但我们是这样解决的：

将报告的全部内容（例如，reportX.rptdesign）移动到库中（例如，reportX.rptlibrary）。然后创建两个空白报告reportXxxx.rptdesign 和reportXyyy.rptdesign，具有不同的母版页。

将整个布局从reportX.rptlibrary 拖到reportXxxx 和reportXyyy 中。

只有初始化事件中的 Javascript 代码必须以这种方式复制，但您甚至可以将其移动到外部 *.js 库中。

注意：这不是您确切问题的答案，因为您需要从您的应用程序中调用 reportXxxx 或 reportXyyy（因此决定在调用报告*之前发生）。*

# javascript - 如何在表达式中使用 Angular 变量？

> ID：13764316
> 
> 赞同：1
> 
> 时间：2012-12-07T13:45:19.300
> 
> 标签：javascript, angularjs, underscore.js

我正在尝试执行以下操作：

```
<div ng:repeat='row in _.range(0,{{rowCount}})'></div> 
```

但它不评估`{{rowCount}}`。我需要做什么才能对其进行评估？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:52:52.673

ngRepeat 已经评估了您传递给它的表达式。您不需要 - 也确实不应该 - 使用 {{}}。只需参考rowCount：

```
<div ng:repeat='row in _.range(0,rowCount)'></div> 
```

它应该工作！

# android - Android AlertDialog 在显示几秒钟后冻结应用程序 - 原因似乎与 OpenSL 有关

> ID：13764318
> 
> 赞同：4
> 
> 时间：2012-12-07T13:45:21.900
> 
> 标签：android, android-ndk, android-alertdialog, freeze, opensl

好的，我尝试了我可以找到的“一切”并阅读了我搜索的所有内容，问题很简单，但我无法理解问题所在。

我正在使用 NDK（CPP 中的本机代码）。

我有一个非常简单的 Activity，它有一个 OpenGL GLSurfaceView，其中完成了一些非常简单的渲染，在某些时候我希望能够用两个按钮打开一个简单的 AlertDialog。

现在我尝试了许多不同的方法，基本上都陷入了这样的想法：“一条消息被发布到一个 Java 线程，该线程只是轮询消息，然后当它收到一个消息时，它会使用 Handler 向运行的主 UI 线程发布一条消息创建 AlertDialog 的消息处理程序”。

我尝试了其他一些方法，包括通过向 GLSurfaceView 的 onTouchEvent() 函数内的 Handler 发布一条消息来做 - 用于测试 - “全部来自 Java”，如下面的代码片段所示：

```
@Override
public boolean onTouchEvent(MotionEvent e) {

/* code to get the events .. */

           if ( maskedAction == MotionEvent.ACTION_DOWN  && isUiOn == false)
           {
            isUiOn = true;
            GilesTest2JNIActivity.theHandler.sendEmptyMessage(1);
           }

return true;   
 } 
```

接收消息的处理程序执行以下操作：

```
public class GilesTest2JNIActivity extends Activity {

GilesTest2JNIView mView;
public static AlertDialog mTextInputDialog;

private Context MyContext;

public static Handler theHandler;

public LayoutInflater mInflater = null;

public Handler mHandler;

@Override protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    Log.i ("Giles OnCreate ","creating appl.");

    MyContext = this;

    mInflater = (LayoutInflater) getSystemService(MyContext.LAYOUT_INFLATER_SERVICE); 

        mHandler = new Handler(){     

            public void handleMessage(Message msg){

                AlertDialog.Builder builder = new AlertDialog.Builder(MyContext);

                Log.i ("handler","builder");

                    builder.setView(mInflater.inflate(R.layout.dialog_signin, null)); 

                builder.setTitle("User - Login");
                builder.setMessage("Please enter your username and pwd");

                builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int whichButton) {

                            GilesTest2JNILib.nativeSendInputText( "BBB", "AAA");

                      //dialog.dismiss();

                        mView.isUiOn = false; // signal this is OFF

                        }
                     } );

                builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int whichButton) {
                    dialog.cancel();
                    Log.w ("Keyboard","Kb is going away via CANCEL");
                    GilesTest2JNILib.nativeSendInputText( "**", "**" );
                    mView.isUiOn = false; // signal this is OFF

                  }
                });

                mTextInputDialog = builder.show();
                mTextInputDialog.setCanceledOnTouchOutside(false);

                mView.isUiOn = true; // signal this is ON

            }   
        };

 /* rest of onCreate() .. */
   } 
```

发生的事情是出现了 AlertDialog，一切似乎都正常，但几秒钟后一切都冻结了，没有错误消息，什么都没有，但即使 GLSurfaceView() 上的渲染也停止了，因为不再调用 .step()，一切只是冻结停止而不显示任何类型的错误消息，并且几乎永远停留在那里和/或偶尔进入“应用程序无响应”。

这种行为似乎发生在 Nexus 7 平板电脑上，但在另一台平板电脑上我没有发生，但在我第 4 次或第 5 次启动/关闭对话框之后。

我唯一设法理解的事情似乎在某些时候停止接收各种触摸和/或就像“没有窗口”和/或某些窗口消失了，我真的不知道发生了什么。

我正在重新添加一些经过广泛测试后才发现的信息。

在获得经典的基本 OpenGL 示例后，简单地绘制一个三角形并将所有代码放回其中的那个发现它一切正常，所以回到第一方并在我的代码上重新尝试相同的示例，我开始将 #ifdef 放入在我找到“崩溃点”之前，各个地方都可以删除代码片段。

一段时间后我发现了这一点，似乎原因根本不在那段代码中，而是与我在后台工作的音频有关。

这是一个非常简单的基于 OpenSL 的播放器和一个播放器对象，它在循环中连续播放一个循环缓冲区，其中混合了样本，似乎一切都归结为这段代码：

```
 // at this point we can enqueue the current chunk for playing

  theSize = AUDIO_DATA_CHUNK_SIZE*sizeof(SLint16);

  #define DO_NOT_ENQUEUE 1

  #ifndef DO_NOT_ENQUEUE

  result = (*bq)->Enqueue(bq, (void*) curdata, theSize ); /* Size given in bytes. */

  #endif 
```

AUDIO_DATA_CHUNK_SIZE 是 128，这个东西被设计成循环播放一个循环缓冲区，其中混合了样本，它不断播放（采样率 11.025 Khz）。

如果我在 Alertdialog 启动时禁用播放声音，一切都会完美无缺。

不知道到底发生了什么，除非在某些时候你可以看到这种情况发生：

```
 12-19 18:56:52.418: W/InputConnectionWrapper.ICC(303): Timed out waiting on     IInputContextCallback
  12-19 18:56:52.418: I/InputDispatcher(150): Dropped event because it is stale.
  12-19 18:56:52.418: I/InputDispatcher(150): Dropped event because it is stale.
  12-19 18:56:52.418: I/InputDispatcher(150): Dropped event because it is stale. 
```

似乎在某种程度上，音频播放会干扰输入。

# perl - 动态解析 BibTeX 并创建 hash 的 hash

> ID：13764320
> 
> 赞同：4
> 
> 时间：2012-12-07T13:45:40.483
> 
> 标签：perl, hashtable, dynamic-data, bibtex

我正在尝试解析以下 BibTeX 文件（bibliography.bib）：

```
@book{Lee2000a,
abstract = {Abstract goes here},
author = {Lee, Wenke and Stolfo, Salvatore J},
title = {{Data mining approaches for intrusion detection}},
year = {2000}
}
@article{Forrest1996,
abstract = {Abstract goes here},
author = {Forrest, Stephanie and Hofmeyr, Steven A. and Anil, Somayaji},
title = {{Computer immunology}},
year = {1996}
} 
```

我正在使用`BibTeX::Parser`按预期工作的包，问题是创建哈希结构的哈希。这是我的代码：

```
#!/usr/bin/perl
# http://search.cpan.org/~gerhard/BibTeX-Parser-0.62/lib/BibTeX/Parser.pm
use BibTeX::Parser;
use IO::File;
use Data::Dumper;
use strict;
use warnings;

my $filename="bibliography.bib";
my (%bibliography, %article);
my $i;
my ($entry, @entries, $type, $key);
my (my $hkey, my $hvalue);

# open BibTeX
my $fh = IO::File->new("$filename") or die "could not open $filename: $!\n";

# create parser object ...
my $parser = BibTeX::Parser->new($fh);

# ... and iterate over entries
while ($entry = $parser->next ) {
  if ($entry->parse_ok) {

    # return BibTeX elements like abstract, author, title ...
    @entries = $entry->fieldlist();

    # create %article as a hash array e.g. year -> 1996; isbn -> 1581138709 etc.
    foreach (@entries) {
      $article{"$_"} = $entry->field("$_");
    }

    # return article's key (Lee2000a, Forrest1996)
    $key = $entry->key;

    # append %article into %bibliography with approporiate key
    $bibliography{"$key"} = \%article;

    #Debug
    #print $entry->key, "\n";
    #print Dumper (\%article);

    # removes all elements of %article (prepare for next iteration)
    %article = ();

    #Debug
    #print "================================\n";
  }

  else {
    warn "Error parsing file: " . $entry->error;
 }
}

    #Debug
    #print Dumper (\%bibliography); 
```

当前输出`Dumper (\%bibliography)`：

```
$VAR1 = {
          'Lee2000a' => {},
          'Forrest1996' => $VAR1->{'Lee2000a'}
        }; 
```

期望的输出`Dumper (\%bibliography)`：

```
$VAR1 = {
          'Lee2000a' => {
                'abstract' => 'Abstract goes here',
                'author' => 'Lee, Wenke and Stolfo, Salvatore J'
                'title' => 'Data mining approaches for intrusion detection'
                'year' => '2000'
              },
          'Forrest1996' => {
                'abstract' => 'Abstract goes here',
                'author' => 'Forrest, Stephanie and Hofmeyr, Steven A. and Anil, Somayaji'
                'title' => 'Computer immunology'
                'year' => '1996'
                }
        }; 
```

我在做什么错？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:05:07.193

在没有此行的情况下尝试您的代码：

```
# removes all elements of %article (prepare for next iteration)
%article = (); 
```

您已将 $bibilography{$key} 设置为对该哈希的引用，然后将其清空。

另外，将 %article 的声明移到循环中（可能就在 之后`if ($entry->parse_ok) {`，以便它的范围在您使用它的地方是本地的，并且不需要重新初始化它。

希望有帮助...

更新以包括排序问题...这应该可以对您的哈希进行排序：

```
foreach my $bib_key ( sort keys %bibliography ) {
  print "$bib_key\n";

  foreach my $article_key (sort keys %{ $bibliography{$bib_key} }) {
    print "\t $article_key: $bibliography{$bib_key}{$article_key}\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:37:15.203

翻斗机输出

```
$VAR1 = { 'Lee2000a' => {}, 'Forrest1996' => $VAR1->{'Lee2000a'} };
```

表明您的哈希是共享结构，*即*，`$bibliography->{Lee2000a}`并且`$bibliography->{Forrest1996}`是对*同一*文章哈希的引用。您的代码具有`my %article`外部范围，并且循环的每次迭代都会清除并重新填充此共享哈希。

相反，您希望每次迭代都创建一个*新*的内部文章哈希。移除外层`%article`并将其移入循环中——下面标记为 (+)。删除该`%article = ()`行，这将破坏您刚刚收集的数据。

```
while ($entry = $parser->next) {
  if ($entry->parse_ok) {
    # return BibTeX elements like abstract, author, title ...
    @entries = $entry->fieldlist();

    # create %article as a hash array e.g. year -> 1996; isbn -> 1581138709 etc.
    my %article;  # (+)
    foreach (@entries) {
      $article{$_} = $entry->field($_);
    }

    # return article's key (Lee2000a, Forrest1996)
    $key = $entry->key;

    # insert %article into %bibliography with appropriate key
    $bibliography{$key} = \%article;
  }
  else {
    warn "Error parsing file: " . $entry->error;
  }
} 
```

# c# - openfiledialog 的过滤器属性不起作用

> ID：13764322
> 
> 赞同：4
> 
> 时间：2012-12-07T13:45:53.193
> 
> 标签：c#, filter, file-extension, openfiledialog

我即将在学校完成我的 c# 项目的脑力激荡的 ide。困扰我的问题之一是当我尝试打开 .b 代码文件时，openfiledialog 的过滤器不起作用。我在记事本中保存了一个扩展名为 .b 的文件，然后我尝试用 ide 打开它。唯一的问题是，当我从扩展名下拉列表中选择 *.b-Files 时，我没有显示任何文件，只有文件夹。当我选择显示任何文件时，它工作正常。

有任何想法吗？这是我打开文件的方法：

```
public void oeffnenDatei()
{
    OpenFileDialog ofd = new OpenFileDialog ();
    ofd.InitialDirectory = "C:\\";
    ofd.Multiselect = false;
    ofd.Filter = "Brainscramble-Dateien (*.b) | *.b | Alle Dateien (*.*)|*.*";
    if ( ofd.ShowDialog () == DialogResult.OK )
    {
        addTab ( ofd.SafeFileName );
        StreamReader reader = new StreamReader ( ofd.FileName );                
        setCode ( reader.ReadToEnd () );
    }           
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T13:53:15.887

`*.b`过滤器属性中的扩展名后有一个空格
这将起作用

```
ofd.Filter = "Brainscramble-Dateien (*.b)|*.b|Alle Dateien (*.*)|*.*"; 
```

奇怪的是，前面的空间不是问题

# css - 为什么所有链接的 Rails CSS 都不起作用，但可以与 :class => "foo" 一起使用？

> ID：13764326
> 
> 赞同：0
> 
> 时间：2012-12-07T13:46:13.553
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3

我有一个非常奇怪的问题。我有一个 Rails 页面，我想在其中使用 CSS 来格式化所有链接，并且菜单链接应该有另一种颜色。所以我开始

```
 .menulink:link, .menulink:visited, .menulink:hover, .menulink:active{
        color: red;
    } 
```

在菜单栏片段 CSS ( `sidebar.css.scss`)

对于所有其他链接，我将 CSS 写入`application.css.scss`：

```
 a:link, a:visited, a:hover, a:active{
        color: green;
    } 
```

有趣的是，这不起作用。但是如果我在代码中的任何链接中添加一个类标签，就像这样

```
 <%= link_to "Alle Artikel", :controller => :articles, :action => :index, :class => "foo" %> 
```

它完美地工作。我真的很困惑。为什么会有这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:52:20.880

像这样重新格式化：

```
<%= link_to "Alle Artikel", {:controller => :articles, :action => :index}, :class => "foo" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:00:10.450

我怀疑您可能会在级联样式表中看到“级联”。
基本上，当您放置特定的类选择器时，似乎会应用该类。这就是css的规则，规则越具体，它就越会应用任何更高级别的“全局”设置。
因此，当您在更高的一般级别（例如所有锚点）应用规则时，可能发生的情况是，样式规则的级别低于“所有锚点”，但级别高于类/标签，这可能有助于解释你看到的行为。

# ios - 当 UICollectionView 嵌套在 UITableVIew 中时，无法选择

> ID：13764330
> 
> 赞同：21
> 
> 时间：2012-12-07T13:46:24.847
> 
> 标签：ios, objective-c, uitableview, ios6, uicollectionview

我有一个`UITableView`每个单元格包含一个`UICollectionView`.

我可以`UITableView`垂直滚动并水平滚动嵌套，`UICollectionView`但是我*不能*在.`UICollectionViewCell``UICollectionView`

选择在 中禁用，在 中`UITableView`启用（默认状态）`UICcollectionView`。

`UICollectionView's` `collectionView:didSelectItemAtIndexPath:`根本就没有调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T11:42:49.493

我能够解决这个问题的方法是在单元格中添加一个点击手势识别器来手动处理点击，而不是依赖于`didSelectRowAtIndexPath`which 不会被调用：

**迅速**

```
let tapRecognizer = UITapGestureRecognizer(target: self, action: "cellTapped:")
tapRecognizer.numberOfTapsRequired = 1
cell.addGestureRecognizer(tapRecognizer) 
```

**Objective-C**

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(cellTapped:)];
tapRecognizer.numberOfTapsRequired = 1;
[cell addGestureRecognizer:tapRecognizer]; 
```

您现在可以处理`cellTapped:`方法中被点击的单元格，并且可以通过 获取对被点击的单元格的引用`tapRecognizer.view`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T15:54:07.840

我刚刚开始工作，所以我想我会与你们分享我的解决方案。

`UITableView`在为和嵌套设置必要的委托和数据源之后，`UICollectionView`您可以`UICollectionView`像这样制作第一个可选视图

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath  {
    ...
    [tableViewCell bringSubviewToFront:tableViewCell.yourCollectionView];
    return cell;
} 
```

这将使`UICollectionView` 第一件事可以通过委托选择

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath; 
```

将使用`UITableView`委托选择视图的任何其他部分

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-28T09:05:22.893

您在自定义中拥有的所有视图`UITableViewCell`都应相对于`contentView`. 所以总是将它们作为子视图添加到`contentView`并且选择应该有效。

```
class CustomTableViewCell: UITableViewCell {
    override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {
        super.init(style: style, reuseIdentifier: reuseIdentifier)

        let view = UIView()
        contentView.addSubview(view)

        // layout
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-17T09:43:21.583

我的第一直觉是两个视图之间的手势识别器可能是冲突的

更具体地说，用于点击的 UITableView GRs 可能会阻止 UICollectionView GRs 接收触摸

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-03T12:44:14.553

首先请检查您是否提供了必要的数据源和委托。然后，如果您在特定数量的表格视图单元格上使用集合视图，您可以直接放在原型单元格中。请确保您的单元格有适当的限制（宽度）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-11-16T23:43:05.753

尝试禁用`delaysContentTouches`并`tableView`确保`delegate`您的集合视图设置正确。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-11-09T13:46:10.863

我已经用故事板和编程方式进行了测试，它按预期工作。我收到 collectionView:didSelectItemAtIndexPath: 或 tableView:didSelectRowAtIndexPath 取决于点击区域。看来，至少在较新的 SDK（我的是 11.4）中，它是固定的。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2015-04-22T13:26:13.770

这根本不应该是一个问题！无需自定义手势识别器。无需禁用 tableview 的选择。

务必：

1.  在情节提要或代码中设置您的表格视图并设置其数据源和委托
2.  在将 tableviewcell 出列后，在 cellforrowatindexpath 中获取对相应 collectionview 的引用并设置其（collectionviews）数据源和委托
3.  实现 tableviews 和 collectionviews 委托 didselect 方法并记录他们的调用以查看它是否有效

在我写下那个答案以确保没有问题之前，我刚刚实施了一个小示例项目。如果它仍然不适合你，我可以上传它！

祝你好运！

# wpf - 具有动态 LayoutTransform 的 WPF 工具提示样式

> ID：13764333
> 
> 赞同：0
> 
> 时间：2012-12-07T13:46:38.770
> 
> 标签：wpf, dynamic, styles, layouttransform

我有一个可以缩放它的 UI 的应用程序，我想用它来缩放工具提示。我试过这样做：

```
<Style TargetType="{x:Type ToolTip}">
    <Setter Property="LayoutTransform" Value="{DynamicResource scaleTransf}"/>
    ...
</Style> 
```

...`scaleTransf`我通过代码更改的资源在哪里：

```
Application.Current.Resources["scaleTransf"] = new ScaleTransform(...); 
```

和：

```
<ScaleTransform x:Key="scaleTransf" ScaleX="1" ScaleY="1"/> 
```

大多数工具提示的大小都会按比例缩放，但其中一些由 C# 代码创建的提示不会按比例缩放。我检查过，似乎我没有通过代码设置他们的 Style 或 LayoutTransform，所以我真的不明白出了什么问题......此外，我的印象是上面的 XAML 代码运行了几天前。:(

我可以做些什么来让它一直工作而不在代码隐藏中设置 LayoutTransform 吗？

**编辑：**不改变比例的工具提示是以前可见的。

**EDIT1：**如果我将`LayoutTransform`每个`ToolTip`实例的设置为`scaleTransf`在代码后面使用`SetResourceReference()`一切正常。我不明白为什么样式不起作用，而它应该对`ToolTip`创建的每一个都做完全相同的事情......基于我对 WPF 的有限知识，我将其称为 BUG！

* * *

**编辑2：**

我也试过这个：

```
Application.Current.Resources.Remove("scaleTransf");
Application.Current.Resources.Add("scaleTransf", new ScaleTransform(val, val)); 
```

* * *

**EDIT3：**我尝试使用 DependencyProperty 解决此问题：

在 MainWindow.xaml.cs 中：

```
 public static readonly DependencyProperty TransformToApplyProperty = DependencyProperty.Register("TransformToApply", typeof(Transform), typeof(MainWindow));
    public Transform TransformToApply
    {
        get { return (Transform)this.GetValue(TransformToApplyProperty); }
    } 
```

在 MainWindow 的某处，响应用户输入：

```
this.SetValue(TransformToApplyProperty, new ScaleTransform(val, val)); 
```

XAML 样式：

```
<Style TargetType="{x:Type ToolTip}">
    <Setter Property="LayoutTransform" Value="{Binding TransformToApply, Source={x:Reference WndXName}}"/>
... 
```

使用此代码，似乎没有一个工具提示可以相应地缩放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:28:57.007

在您的情况下，我认为资源不是最好的方法。

在这种情况下，最好将您的 Transform 声明为窗口的 DependencyProperty：

```
public static readonly DependencyProperty TransformToApplyProperty = DependencyProperty.Register("TransformToApply", typeof(Transform), typeof(Window)); 
```

然后在 XAML 中：

```
<Window  .... (all the xmlns)
         x:Name="window"/>
    <AnyControl ScaleTransform="{Binding TransformToApply, ElementName=window}"/>
</Window> 
```

# ios - 使 Box iOS SDK WebAPI 和 Google Analytics iOS SDK 2.0beta3 协同工作

> ID：13764334
> 
> 赞同：2
> 
> 时间：2012-12-07T13:46:38.560
> 
> 标签：ios, google-analytics, box-api

独立地，他们工作得很好。
在 iOS 5.1 和 iOS 模拟器 6.0 上试用过。当我尝试将它们一起使用时出现以下错误：

```
    2012-12-07 14:28:53.229 FotoInBox[1962:1cd03] 点击网址：http://www.google-analytics.com/collect
    2012-12-07 14:28:53.231 FotoInBox[1962:1cd03] 方法：POST
    2012-12-07 14:28:53.232 FotoInBox[1962:1cd03] 标题用户代理：GoogleAnalytics/2.0b3（iPad 模拟器；U；CPU iPhone OS 6.0，如 Mac OS X；en-us）
    2012-12-07 14:28:53.234 FotoInBox[1962:1cd03] 标题内容长度：184
    2012-12-07 14:28:53.235 FotoInBox[1962:1cd03] 标题内容类型：应用程序/x-www-form-urlencoded；字符集=UTF-8
    2012-12-07 14：28：53.236 fotoinbox [1962：1CD03]身体：ul = en＆an = fotoinbox＆_v = mi1b3＆cid＆cid = b741b97680ae48fd3332390ddd554aff54affa9e＆sc = app＆c = app＆t = app view＆sd =＆s d =＆sd＆sd =＆sd = 248-bit＆sd =＆sd =＆sd =＆sd =＆sd =＆sd = 537&qt=11234484&z=10891977320669573255
    2012-12-07 14:28:53.566 FotoInBox[1962:1cd03] GoogleAnalytics 2.0b3 -[GAIDispatcher dispatchComplete:withStartTime:withRetryNumber:withResponse:withData:withError:] (GAIDispatcher.m:392) 调试：命中 /GAIHit/p3 已调度（329 毫秒）：HTTP 状态 200
    2012-12-07 14:28:58.830 FotoInBox [1962:1cd03] 崩溃：无法从此 NSManagedObjectContext 的协调器访问对象的持久存储
    2012-12-07 14:28:58.832 FotoInBox[1962:1cd03] 堆栈跟踪：（
        0 核心基础 0x03b7a02e __exceptionPreprocess + 206
        1 libobjc.A.dylib 0x02735e7e objc_exception_throw + 44
        2 核心数据 0x00b884d2 _PFRetainedObjectIDCore + 658
        3核心数据0x00b88230-[NSManagedObjectContext（_NSInternalAdditions）_retainedObjectWithID：]+32
        4 核心数据 0x00b6c293 -[NSManagedObjectContext objectWithID:] + 275
        5 核心数据 0x00b6ac86 -[NSManagedObjectContext _mergeChangesFromDidSaveDictionary:usingObjectIDs:] + 2662
        6 核心数据 0x00b6a1de-[NSManagedObjectContext mergeChangesFromContextDidSaveNotification:] + 174
        7 FotoInBox 0x000d99fc __50-[BoxCoreDataStore 合并的UpdatesIntoQueryContext:]_block_invoke_0 + 67
        8 libdispatch.dylib 0x04293014 _dispatch_client_callout + 14
        9 libdispatch.dylib 0x04282d5f _dispatch_barrier_sync_f_invoke + 58
        10 libdispatch.dylib 0x04282aa3 dispatch_barrier_sync_f + 108
        11 libdispatch.dylib 0x04282e5e dispatch_sync + 45
        12 FotoInBox 0x000dc2d2 -[BoxCoreDataStore dispatchBlock:onQueue:] + 47
        13 FotoInBox 0x000dc255 -[BoxCoreDataStore dispatchBlockOnQueryQueue:] + 64
        14 FotoInBox 0x000d99b1 -[BoxCoreDataStore 合并的UpdatesIntoQueryContext：] + 138
        15 基础 0x011a9dc9 __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 40
        16 核心基础 0x03bd40c5 ___CFXNotificationPost_block_invoke_0 + 85
        17 核心基础 0x03b2eefa _CFXNotificationPost + 2122
        18 基础 0x010de482 -[NSNotificationCenter postNotificationName:object:userInfo:] + 98
        19 核心数据 0x00b69150 -[NSManagedObjectContext(_NSInternalAdditions)_didSaveChanges] + 3008
        20 核心数据 0x00b56639 -[NSManagedObjectContext 保存：] + 1353
        21 照片收件箱 0x0053d479 -[GAIDataStore 保存：] + 137
        22 FotoInBox 0x0054eee9-[GAIDispatcher dispatchComplete:withStartTime:withRetryNumber:withResponse:withData:withError:] + 2441
        23 FotoInBox 0x0054fc88 __46-[GAIDispatcher 启动调度：重试编号：]_block_invoke_0 + 152
        24 FotoInBox 0x00546f66 __47-[GAIURLConnection connectionDidFinishLoading:]_block_invoke_0 + 150
        25 libdispatch.dylib 0x0428153f _dispatch_call_block_and_release + 15
        26 libdispatch.dylib 0x04293014 _dispatch_client_callout + 14
        27 libdispatch.dylib 0x042837d5 _dispatch_main_queue_callback_4CF + 296
        28 核心基础 0x03b20af5 __CFRunLoopRun + 1925
        29 核心基础 0x03b1ff44 CFRunLoopRunSpecific + 276
        30 核心基础 0x03b1fe1b CFRunLoopRunInMode + 123
        31 图形服务 0x033fb7e3 GSEventRunModal + 88
        32 图形服务 0x033fb668 GSEventRun + 104
        33 UIKit 0x0198265c UIApplicationMain + 1211
        34 照片收件箱 0x000021b9 主要 + 169
        35 照片收件箱 0x000020c5 开始 + 53
    )
    2012-12-07 14:28:58.854 FotoInBox[1962:1cd03] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“无法从此 NSManagedObjectContext 的协调器访问对象的持久存储”
    *** 首先抛出调用堆栈：
    (0x3b7a012 0x2735e7e 0xb884d2 0xb88230 0xb6c293 0xb6ac86 0xb6a1de 0xd99fc 0x4293014 0x4282d5f 0x4282aa3 0x4282e5e 0xdc2d2 0xdc255 0xd99b1 0x11a9dc9 0x3bd40c5 0x3b2eefa 0x10de482 0xb69150 0xb56639 0x53d479 0x54eee9 0x54fc88 0x546f66 0x428153f 0x4293014 0x42837d5 0x3b20af5 0x3b1ff44 0x3b1fe1b 0x33fb7e3 0x33fb668 0x198265c 0x21b9 0x20c5)
    libc++abi.dylib：终止调用抛出异常

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:26:50.363

该框架的最新版本对此进行了修复，您应该不会看到任何进一步的问题：[https ://cloud.box.com/s/4atlh8kda0fialhrr7e8](https://cloud.box.com/s/4atlh8kda0fialhrr7e8)

# r - 子集列表 - 一种 plyr 方式？

> ID：13764339
> 
> 赞同：5
> 
> 时间：2012-12-07T13:46:47.700
> 
> 标签：r, plyr

我经常有按一个或多个变量分组的数据，每组中有几个注册。从数据框中，我希望根据各种标准选择组。

我通常使用 split-sapply-rbind 方法，其中我使用逻辑向量从列表中提取元素。

这是一个小例子。我从一个具有一个分组变量（'group'）的数据框开始，我希望选择最大质量小于 45 的组：

```
dd <- data.frame(group = rep(letters[1:3], each = 5), 
                 mass = c(rnorm(5, 30), rnorm(5, 50), 
                          rnorm(5, 40)))
    dd2 <- split(x = dd, f = dd$group)
    dd3 <- dd2[sapply(dd2, function(x) max(x$mass) < 45)]
    dd4 <- do.call(rbind, dd3) 
```

我刚刚开始使用 plyr，现在我想知道：
是否有一个 plyr-only 替代方案来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:54:54.767

至少在这种情况下，这给出了相同的结果

```
library(plyr)
dd5 <- ddply(dd,.(group),function(x) x[max(x$mass)<45,])

all(dd4==dd5)
[1] TRUE 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T22:40:22.943

这是一个用于编码优雅的 data.table 解决方案

```
library(data.table)
DT <- data.table(dd)

DT[,if(max(mass) < 45){.SD},by=group]
    group     mass
 1:     a 28.80426
 2:     a 31.31232
 3:     a 29.47599
 4:     a 30.35425
 5:     a 29.92833
 6:     c 40.11349
 7:     c 40.17431
 8:     c 39.94652
 9:     c 39.57524
10:     c 40.20791 
```

也许稍微复杂一些

```
new <- (DT[,index := max(mass) < 45,by=group][force(index)])[,index:=NULL] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T15:19:18.923

我意识到您已经特别要求提供`plyr`解决方案，但我想我也会在不涉及您的多步骤方法的基础 R 中分享一种替代方法：

```
dd[as.logical(ave(dd$mass, dd$group, FUN = function(x) max(x) < 45)), ] 
```

在处理 R 中的组时，该`ave`函数通常很方便。在这里，我创建了一个逻辑向量，并根据 " `TRUE`" 值的索引进行子集化。

# google-maps - 您可以通过自定义 Google 地图路线上的距离以编程方式绘制图钉（标记）吗

> ID：13764342
> 
> 赞同：1
> 
> 时间：2012-12-07T13:46:49.797
> 
> 标签：google-maps, maps, google-maps-markers, routes

访问 Google 网站并登录时，您可以单击页面顶部工具栏菜单中的“地图”选项。点击“我的地点”按钮并选择“创建地图”。</p>

在那里您可以选择跟踪路线，例如这张地图：[https ://maps.google.com/maps/ms?msid=204898944445262337567.0004d03638beb43c93029&msa=0&ll=6.235122,-75.536343&spn=0.003088,0.004823](https://maps.google.com/maps/ms?msid=204898944445262337567.0004d03638beb43c93029&msa=0&ll=6.235122,-75.536343&spn=0.003088,0.004823)

有一些已知的方法可以通过 JS（也欢迎使用其他语言），我可以在我追踪的路线开始 50 米处放置一个 Pin（标记）？谷歌中有一些路线的距离数据，但我没有找到一个好的教程，或者关于如何使用这些地图进行此操作的任何答案。

顺便说一句，我可以以编程方式绘制一条路线并通过代码抛出标记以这种方式计算地球的距离，但问题是我开始使用的地图就像我之前写的链接中的地图一样，所以这条路线实际上是由任何人制作的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:17:25.363

我有两个英里/公里标记示例：

*   [公里标记每 2 公里](http://www.geocodezip.com/v3_polyline_example_kmmarkers_0.html)
*   [9.5公里和64.8公里处的标记](http://www.geocodezip.com/v3_GoogleEx_directions-waypoints_kmmarkersC.html)

他们使用了一个方法，GetPointAtDistance，来自 Mike Williams 的[epoly](http://econym.org.uk/gmap/epoly.htm)实用程序，他为 v2 API 编写，我[移植到 v3](http://www.geocodezip.com/scripts/v3_epoly.js)

使用 v3 几何库可以更本机地完成相同的操作，但是当我移植 epoly 时并不存在。

如果您使用第三方库（如[geoxml3）将 KML 中的折线作为原生 Google Maps API v3 折线在地图上呈现，则可以对折线执行相同操作](http://code.google.com/p/geoxml3/)

# unit-testing - Visual Studio 单元测试框架教程？

> ID：13764345
> 
> 赞同：3
> 
> 时间：2012-12-07T13:47:00.463
> 
> 标签：unit-testing

我想开始在 VS 2012 Express for Web 上学习 Visual Studio 单元测试框架。主要用于 ASP.NET MVC 项目。

我已经从亚马逊购买了 Art of unit test 的硬拷贝。但它缺乏针对 VS 单元测试框架的教程目标。那么我可以拥有任何资源吗？

另一个问题，当我在这个论坛上研究时，我发现有人说 MSTEST 与 VS 单元测试框架不同。

VS 2010 Express 内置单元测试是 VSTS 的子集吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:53:29.117

出于所有实际目的，mstest 是 Visual Studio 2010 中的单元测试框架。它仍然是 2012 年的主要单元测试框架。然而，现在我们支持可扩展性，并且许多 3rd 方框架（如 xunit/nunit/gtest 等）都为我们的平台提供了适配器。

对于 ASP.NET，最好的起点是从 Microsoft 下载 MVC3/MVC4 解决方案，其中包含丰富的单元测试套件。

# c# - 在 .NET 中加载应用程序清单

> ID：13764346
> 
> 赞同：2
> 
> 时间：2012-12-07T13:47:06.053
> 
> 标签：c#, .net, com, clickonce

我有一个[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)应用程序部署到虚拟机，Windows 7 32 位。这个应用程序使用了一些[COM](http://en.wikipedia.org/wiki/Component_Object_Model)组件，所以为了让应用程序正常工作，我为 COM 程序集和应用程序创建了清单，即

application1.exe 和 application1.exe.manifest

comAssembly1.dll 和 comAssembly1.x.manifest

以下信息来自[这里](http://msdn.microsoft.com/en-us/library/ms973913.aspx)。

为确保应用程序正常工作，我在 COM 程序集上运行了 regsvr32，一切正常。然后我取消了该程序集的注册，并希望一切都能继续工作。可悲的是，事实并非如此。

我的第一个停靠港是检查我的清单。这些与上面引用的文章以及我读过的其他文章相匹配。所以我想检查清单是否正在加载。我正在运行[进程监视器](http://en.wikipedia.org/wiki/Process_Monitor)并设置了一个过滤器以仅显示对名为“application1.exe.manifest”的文件的访问，但我没有看到任何文件。有一点谷歌我似乎无法找到任何地方说明何时加载清单或由哪个进程加载。

你们之前有没有遇到过这个问题？如果有，您发现原因了吗？或者我的 ClickOnce 清单中是否需要一些魔法开关来告诉它使用清单文件？

对于我自己的信息，您希望什么时候看到您的应用程序清单被访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:43:05.637

如果可执行文件不包含嵌入式清单，Windows 才会使用单独的 .manifest 文件。问题是任何 C# 可执行文件已经有一个。一个由编译器自动生成的简单程序，它声明程序与 UAC 兼容。

项目 + 添加新项目，选择应用程序清单文件项目模板。它将在编辑器中打开，显示这些 UAC 条目。将您的无 reg-free COM 清单条目移动到此条目中，并在没有 .manifest 文件的情况下部署您的应用程序。

# javascript - 作为字符串接收的 Javascript 文本框

> ID：13764347
> 
> 赞同：0
> 
> 时间：2012-12-07T13:47:18.950
> 
> 标签：javascript, html

这是我使用的 Html 形式。

```
<form name="calculate" method="get" action="#" onsubmit="return Validate()">
<label>Enter a number</label>
<input id="numb1" name="numb1" id="numb2" placeholder="Number 1">

<label>Enter another number</label>
<input id="numb2" name="numb2" id="numb2" placeholder="Number 2">

<label>Result</label>
<textarea style="text-align:center; height:85px; max-height:85px;" name="summ" id="summ" disabled="disabled" placeholder="Result" dir="ltr"></textarea>
<br />
<input id="calc" name="calc" type="submit" value="Calculate!"> 
```

JS

```
 function Validate() {
        if (calculate.numb1.value == "" || calculate.numb2.value == "") {
            alert("Check the form again");
            calculate.numb1.focus();
            document.getElementById('summ').value = "";
            return (false);
        }
        Update()
        return (true);

    }
    function Update() {
        var plus = calculate.numb1.value + calculate.numb2.value;
        var minus = calculate.numb1.value - calculate.numb2.value;
        var mult = calculate.numb1.value * calculate.numb2.value;
        var div = calculate.numb1.value / calculate.numb2.value;

        var multi = document.getElementById("summ").value = calculate.numb1.value + "+" + calculate.numb2.value + "=" + plus + "\n" + calculate.numb1.value + "-" + calculate.numb2.value + "=" + minus + "\n" + calculate.numb1.value + "*" + calculate.numb2.value + "=" + mult + "\n" + calculate.numb1.value + "/" + calculate.numb2.value + "=" + div;
    } 
```

所有计算都完全接受 Plus 功能。例如，当您键入 4+4 时，您会得到 44... 我尝试了 parseFloat，但仍然没有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:49:22.410

```
var numb1 = parseFloat(document.calculate.numb1.value);
var numb2 = parseFloat(document.calculate.numb2.value);

var plus = numb1 + numb2;
var minus = numb1 - numb2;
var mult = numb1 * numb2;
var div = numb1 / numb2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:51:45.017

首先将它们转换为数字。对每个使用字符串值的计算执行此操作。

```
var plus = Number(calculate.numb1.value) + Number(calculate.numb2.value); 
```

莱昂

# php - 电子邮件客户端中的 PHP mail() 和图像显示

> ID：13764348
> 
> 赞同：0
> 
> 时间：2012-12-07T13:47:21.507
> 
> 标签：php, image, email

> **可能重复：**
> [没有在邮件中下载的 php 图像显示](https://stackoverflow.com/questions/3529356/php-image-display-without-download-in-mail)

我有一个 PHP Web 应用程序，它创建愿望卡并使用 PHP`mail()`函数发送它们。`IMG`愿望卡片是用 HTML 构建的，卡片的一部分是插图，这些插图在标签内使用 jpg 图像。图像托管在服务器上，因此图像路径使用完整的链接（如`http:/domain.com/img.jpg`）。

当收到卡时，例如雷鸟，它说图像被阻止，用户必须单击一个按钮才能显示图像。我知道这是一个安全措施。对于想要通过插图发现的愿望卡来说，这仍然很烦人。

所以，我正在寻找任何光线，以防止电子邮件客户端阻止图像。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:49:58.513

图像阻塞由邮件客户端在接收者端完成。你对此无能为力。

正因为如此，你经常看到

> 看不到这封邮件？在这里查看

（或类似的东西）在许多电子邮件的顶部。这是你最好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:49:43.890

将图像嵌入电子邮件中，我强烈建议使用[phpMailer 之](http://phpmailer.worxware.com/)类的方法来执行此操作。

从他们的文档中：

> 内联附件
> 
> 还有一种添加附件的方法。如果您想制作包含图片的 HTML 电子邮件，则需要附加图片，然后将标签链接到它。例如，如果您将图像添加为带有 CID my-photo 的内联附件，您将在 HTML 电子邮件中使用 <img src="cid:my-photo" alt="my-photo" /> 访问它。
> 
> 详细来说，这里是添加内联附件的函数： $mail->AddEmbeddedImage(filename, cid, name); 通过将此函数与上面示例的值一起使用，将生成以下代码： $mail->AddEmbeddedImage('my-photo.jpg', 'my-photo', 'my-photo.jpg ');

# internet-explorer - IE8-兼容性：为什么是特定的 搞砸了？

> ID：13764349
> 
> 赞同：0
> 
> 时间：2012-12-07T13:47:22.010
> 
> 标签：internet-explorer, internet-explorer-8, cross-browser, ie8-compatibility-mode, ie-developer-tools

我有一个很棒的网站，不幸的是，还有一个（是的，只有一个！）与兼容性有关的问题：请。检查自己 - [http://podologen-symposium.de/podologen-symposium/anmeldung/](http://podologen-symposium.de/podologen-symposium/anmeldung/)显示正常。我还附上了一个截图，显示了我期望看到的和我看到的：![在此处输入图像描述](../Images/82ebfbef6f0847d0a4485e9de2d616e6.png)

我使用了启用开发人员工具的 IE9，并在所有模式（IE7、IE8 和 IE9）下查看了该页面，并且它也正确显示。只有我使用 IE8 的客户抱怨 - 因为有一段显示在错误的位置。我不知道为什么 - 有什么想法吗？ ![在此处输入图像描述](../Images/92af1e0bf8e41632fde6774bc7ca24f1.png) 谢谢

迈克尔

# jquery - 为 HTML 结构添加淡入淡出效果

> ID：13764350
> 
> 赞同：0
> 
> 时间：2012-12-07T13:47:26.303
> 
> 标签：jquery, fade

我有 HTML 选项卡菜单。具有以下内容：

HTML：

```
<ul class="quicktabs-tabs quicktabs-style-nostyle">
    <li class="even first active"><a class="active jquery-once-2-processed" id="quicktabs-tab-creative_tab-0" href="/?q=node&amp;qt-creative_tab=0#qt-creative_tab">NELER YAPARIZ?</a></li> 
    <li class="odd last"><a class="active quicktabs-loaded jquery-once-2-processed" id="quicktabs-tab-creative_tab-1" href="/?q=node&amp;qt-creative_tab=1#qt-creative_tab">GÜNCEL ETKİNLİKLER</a></li>
</ul> 
```

当点击`li a`菜单时，获得淡入淡出效果。我该如何添加这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:50:43.327

```
$('.quicktabs-tabs').on('click', 'a', function(e){
    e.preventDefault();
    $(e.delegateTarget).stop(true, true).fadeTo(300, 0.1); //args: duration, opacity lvl
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:52:45.043

这使得 50% 的不透明度淡入淡出 [http://api.jquery.com/fadeTo/](http://api.jquery.com/fadeTo/)

```
$(".quicktabs-tabs li a").on('click',function(){
    e.preventDefault();
    $(this).fadeTo(500,0.5);
}); 
```

如果你想淡出你应该这样做 [http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

```
$(".quicktabs-tabs li a").on('click',function(){
    e.preventDefault();
    $(this).fadeOut(500);
}); 
```

这是一个 jsfiddle 示例[http://jsfiddle.net/9BSbh/](http://jsfiddle.net/9BSbh/)

# struts - 传递参数

> ID：13764352
> 
> 赞同：1
> 
> 时间：2012-12-07T13:47:29.730
> 
> 标签：struts

我想通过标签传递一个包含用户名的参数。

在相应的操作类中，我正在使用 request.getParameter() 函数检索参数，但我得到的值为 null。这是我的代码

```
 <%
    String username="aniket";
    request.setAttribute("username",username);
    %>
 <html:link action="AllResidentInfo.do" paramName="username" paramProperty="username">All Resident's Info</html:link> 
```

我究竟做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:58:59.757

直接来自[文档](http://struts.apache.org/1.x/struts-taglib/tagreference.html#html%3alink)：

> 参数 ID
> 
> 将动态添加到生成的超链接的请求参数的名称。相应的值由 paramName 和（可选）paramProperty 属性定义，可选地由 paramScope 属性限定范围
> 
> 参数名称
> 
> JSP bean 的名称，它是包含由 paramId 命名的请求参数的值的字符串（如果未指定 paramProperty），或者是调用其属性 getter 以返回字符串的 JSP bean（如果指定了 paramProperty）。JSP bean 被限制在由 paramScope 属性指定的 bean 范围内（如果已指定）。

所以应该是

```
<html:link action="AllResidentInfo.do" paramId="username" paramName="username"/> 
```

# ios - UIBarButtonItem 是否支持自定义视图的纵向和横向尺寸？

> ID：13764355
> 
> 赞同：4
> 
> 时间：2012-12-07T13:47:41.607
> 
> 标签：ios, uikit

我有一个`UIBarButtonItem`只是一个图像，我想将此图像用作具有空字符串标题的条形项的背景图像。

但是宽度不正确，为了获得正确的尺寸，我制作了一个带有图像集`UIBarButtonItem`的自定义视图。`UIButton`

我遇到的问题是，在横向模式下，此自定义视图不会调整大小以正确适应较小的导航栏。

我尝试通过允许灵活的高度使按钮自动调整大小，但它保留了肖像的顶部和底部边距，现在我的按钮被压扁了。

我最初想使用标题为空的条形项目的原因是使用外观协议设置条形度量默认和横向的背景图像以绕过此问题。

如何使用自定义视图使我的`UIBarButtonItem`支持纵向和横向尺寸？

我有一个专用的风景图像，所以它只是更小，而不是我想要使用的扭曲。

肖像：

![在此处输入图像描述](../Images/d3a087badc9135bcb83c6b0ed80ec056.png)

景观：

![在此处输入图像描述](../Images/d8a56763f09dc0e8215d88d576f412e8.png)

具有自动调整大小的横向，请注意纵向的边距会导致条形按钮被过度挤压。

![在此处输入图像描述](../Images/bc3d3b3b7decf77a4ddb81eab1056615.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T12:33:58.423

最好的答案是提供两张图片，一张用于纵向模式，另一张用于横向模式，您的代码将类似于

```
UIBarButtonItem *barBtnLeft= [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"yourImg.png"] landscapeImagePhone:[UIImage imageNamed:@"yourImg_Landscape.png"]style:UIBarButtonItemStyleBordered target:self action:@selector(yourSelector:)]; 
```

我知道这篇文章很旧，但它很幸运得到了正确的答案，我希望像我这样的新人能得到这个解决方案的帮助。

我应该在这里提一下，横向图像应该小 0.75f 比例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:58:21.487

您使用的图像是否可调整大小？你是用它创建的`- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:23:42.713

如果您只是希望它保持其纵横比，并且您使用的自定义视图是 UIImageView（我假设它是），您可以设置图像视图的 contentMode 属性以使其在保持纵横比的同时进行缩放。你可能会想要使用`UIViewContentModeScaleAspectFit`.

# javascript - CSS unicode 字体

> ID：13764356
> 
> 赞同：1
> 
> 时间：2012-12-07T13:47:43.137
> 
> 标签：javascript, css, unicode, font-face, webfonts

我很惊讶地看到很少有网站保留了正常的 unicode 字体（泰米尔语）。但是在显示网站时，它并不被视为普通的 unicode 字体，但它看起来更有吸引力和时尚。

例如：[http ://dinakaran.com/News_Detail.asp?Nid=33281](http://dinakaran.com/News_Detail.asp?Nid=33281)

怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:56:13.550

这些是通过 CSS 在列出的示例中加载的自定义字体。所以，你必须使用 utf-8 编码。

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

并通过 CSS 配置您的自定义字体并`@font-face`获得相同的效果。

```
@font-face {font-family: 'DINAKARAN2W'; src: ... }
body { font-family:"DINAKARAN2W",... } 
```

# git - 使用 Git 和 FTP 的网站的适当文件权限

> ID：13764360
> 
> 赞同：1
> 
> 时间：2012-12-07T13:47:47.350
> 
> 标签：git, apache, ftp, file-permissions, sysadmin

可以通过 Git（例如核心应用程序文件）、FTP（例如插件）或上传表单（例如图像）更新的网站的适当文件权限是什么？

涉及用户：

*   根
*   阿帕奇
*   ftpuser

Wordpress 就是一个很好的例子：

FTP 更新将所有者更改为**ftpuser:ftpuser**。

上传的图像默认分配给**apache:apache**用户。

Git 更新将所有内容更改为**root:root**。

大多数人建议文件夹使用 755，文件使用 644，假设所有内容都归同一个用户所有，当然事实并非如此。

**我可以创建一个名为web**的附加组，将其分配给上述所有用户，然后简单地将其分配给所有这些用户`chown -R root:web`，但是我必须将所有这些用户的默认组设置为**web**，这不是我喜欢的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:35:26.653

1.  我认为您可以重新配置 Git 以使用**apache:apache**拥有的 SSH 密钥，这将使文件所有者**apache:apache**。（我自己没试过这个。）
2.  检查您的 FTP 服务器的可用选项和配置——您可能能够将 FTP 服务器作为**apache:apache**运行，而不是**ftpuser:ftpuser**。如果您支持需要在**ftpuser:ftpuser**下运行的 FTP 服务器的其他 FTP 服务，您可能仍然可以通过在不同端口上运行（第二个） **apache:apache FTP 服务器来做到这一点。**

# .net - 自动化 Visio 时如何隐藏 UI？

> ID：13764366
> 
> 赞同：1
> 
> 时间：2012-12-07T13:48:06.857
> 
> 标签：.net, interop, visio

我正在为应用程序从 Interop 自动化 Visio。一切进展顺利，唯一的问题是我不希望最终用户看到正在填充的 visio 画布，这就是目前正在发生的事情。我（来自.Net）以编程方式打开一个 Visio 画布并用形状填充它，这个过程正在向用户显示。

我查看了**Microsoft.Office.Interop.Visio.Application**对象和**Microsoft.Office.Interop.Visio.Document**的属性，但找不到可以设置为 false 以向用户隐藏它的布尔值。我过去已经将 Excel 和 Access 都自动化了，两者都只是一个布尔值，您可以将其设置为 false，然后最终用户看不到自动化过程的具体细节。

我的问题是，当通过.Net Interop 以编程方式使用形状填充画布时，有没有办法向最终用户隐藏 Visio UI？如果是这样，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:45:44.453

Application 对象上有一个 ShowChanges 属性，它可能适合您：

[http://msdn.microsoft.com/en-us/library/ff766801.aspx](http://msdn.microsoft.com/en-us/library/ff766801.aspx)

此外，如果您根本不打算显示应用程序，则可以使用 IVInvisibleApp 界面（在 Microsoft.Office.Interop.Visio 上）。

在此处查看 InvisibleApp 对象：

[http://msdn.microsoft.com/en-us/library/ff766890.aspx](http://msdn.microsoft.com/en-us/library/ff766890.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:54:14.317

`Application`对象上是一个包含[`Windows`](http://msdn.microsoft.com/en-us/library/office/ff768521.aspx)Windows 集合的属性。您可以遍历 Windows 并将 Window 的[`Visible`](http://msdn.microsoft.com/en-us/library/office/ff768769.aspx)属性设置为 false。

# asp.net-mvc - ContentResult 和 ActionResult 的 ASP.NET MVC 混合

> ID：13764370
> 
> 赞同：2
> 
> 时间：2012-12-07T13:48:16.773
> 
> 标签：asp.net-mvc

我在创建类似 a 的东西之后`ContentResult`，但让它在母版页的`@RenderBody()`标签中呈现。这可能吗？我似乎找不到明确的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:52:26.057

不; 你不能那样做。

相反，您可以创建一个空的 Razor 视图，该视图仅从其模型呈现 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:52:38.867

您可以让一个操作方法返回一个 ContentResult，然后通过执行以下操作在母版页中调用它：

```
@Html.Action("Action", "Controller") 
```

我不确定在@RenderBody 中执行此操作是什么意思，但您可以在母版页本身或每个内容页面中执行此操作。

内容将在页面中生成；您也可以使用局部视图方法。

# php - 将 th 值设为 NULL，或者如果为空，则不执行 where

> ID：13764380
> 
> 赞同：1
> 
> 时间：2012-12-07T13:48:48.633
> 
> 标签：php, mysql, where

我现在有了 ：

```
$inhoud = $_POST['inhoud'];
if($inhoud == "") {
    echo $inhoud;
    $inhoud = NULL;
    echo $inhoud;
}

$sql = 'SELECT DISTINCT bestanden.id AS id,
               bestanden.uploader AS uploader,
               bestanden.name AS name,
               bestanden.mime AS mime,
               bestanden.size AS size,
               bestanden.created AS created,
               zoeken.open_id AS open_id,
               zoeken.woord AS woord
        FROM bestanden
        LEFT JOIN zoeken ON bestanden.id = zoeken.open_id 
        WHERE zoeken.woord = "' . $inhoud . '" AND
              bestanden.name LIKE "%' . $_POST['naam'] . '%" AND
              bestanden.mime LIKE "%' . $_POST['formaat'] . '%"
              AND bestanden.created LIKE "%' . $_POST['datum'] . '%";';
$result = mysql_query($sql); 
```

但是当我搜索并且 $inhoud 为空时，我没有得到任何结果，因为它们那里没有空的（“”）（inhoud）空间。是否可以在我的 mysql_query 中使用 if 或其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:52:13.080

```
 $sql = 'SELECT DISTINCT bestanden.id AS id, bestanden.uploader AS uploader, bestanden.name AS name, bestanden.mime AS mime, bestanden.size AS size, bestanden.created AS created, zoeken.open_id AS open_id, zoeken.woord AS woord FROM bestanden LEFT JOIN zoeken ON bestanden.id = zoeken.open_id 
    WHERE 1=1';
if(!empty($inhoud))
    $sql.=' AND zoeken.woord="' . $inhoud . '"';
$sql.=' AND bestanden.name LIKE "%' . $_POST['naam'] . '%" AND bestanden.mime LIKE "%' . $_POST['formaat'] . '%" AND bestanden.created LIKE "%' . $_POST['datum'] . '%"';
$result = mysql_query($sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:52:41.430

使用空函数

```
empty($inhound); 
```

看这里： http: [//php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:56:39.773

也许 strlen() ？

```
if(strlen($inhoud)>0){
    $sql.=' AND zoeken.woord="' . $inhoud . '"';
    $sql.=' AND bestanden.name LIKE "%' . $_POST['naam'] . '%" AND
    bestanden.mime LIKE "%' .         $_POST['formaat'] . '%" AND 
    bestanden.created LIKE "%' . $_POST['datum'] . '%"';
    $result = mysql_query($sql);
 }else{
    //error fill in search term
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:00:54.517

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

您可以尝试：

```
$inhoud = $_POST['inhoud'];
if ($inhoud == "") {
    echo $inhoud;
    $inhoud = NULL;
    echo $inhoud;
}

$sql = 'SELECT DISTINCT bestanden.id AS id,
               bestanden.uploader AS uploader,
               bestanden.name AS name,
               bestanden.mime AS mime,
               bestanden.size AS size,
               bestanden.created AS created,
               zoeken.open_id AS open_id,
               zoeken.woord AS woord
        FROM bestanden
        LEFT JOIN zoeken ON bestanden.id = zoeken.open_id 
        WHERE ';
if(!empty($inhoud)) {
    $sql .= 'zoeken.woord = "' . $inhoud . '" AND';
}
$sql .= 'bestanden.name LIKE "%' . $_POST['naam'] . '%" AND
         bestanden.mime LIKE "%' . $_POST['formaat'] . '%"
         AND bestanden.created LIKE "%' . $_POST['datum'] . '%";';

$result = mysql_query($sql); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T14:08:01.220

首先，您不应该假设`$_POST[...]`在任何情况下都已设置（除非您已经检查过它**是否已**设置）。正确的用法是：

```
$inhoud = null:
if( isset( $_POST['inhound'])){
    $inhound = trim( $_POST['inhound']); // Trim to prevent strings like "    "
    if( strlen( $inhound) < 1){
        $inhound = null;
    }
} 
```

另请注意，[`mysql_*`家庭已被弃用](http://php.net/manual/en/function.mysql-connect.php)，因此请使用[`mysqli_*`](http://php.net/manual/en/book.mysqli.php)or ，[`PDO`](http://php.net/manual/en/book.pdo.php)具有 PDO 示例（使用[`PDO::Prepare()`](http://php.net/manual/en/pdo.prepare.php)和 ）：[`PDOStatement::bindParam()`](http://php.net/manual/en/pdostatement.bindparam.php)[`PDOStatement::Execute()`](http://php.net/manual/en/pdostatement.execute.php)

```
$sql = 'SELECT DISTINCT bestanden.id AS id, bestanden.uploader AS uploader,
            bestanden.name AS name, bestanden.mime AS mime,
            bestanden.size AS size, bestanden.created AS created,
            zoeken.open_id AS open_id, zoeken.woord AS woord
       FROM bestanden
       LEFT JOIN zoeken ON bestanden.id = zoeken.open_id 
       WHERE zoeken.woord=:inhound
           AND bestanden.name LIKE :naam
           AND bestanden.mime LIKE :formaat
           AND bestanden.created LIKE :date';

$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));

$sth->bindParam(':naam', isset( $_POST['naam']) ? '%' . $_POST['naam'] . '%', '%');
$sth->bindParam(':formaat', isset( $_POST['formaat']) ? '%'.$_POST['formaat'].'%', '%');
$sth->bindParam(':naam', isset( $_POST['date']) ? '%' . $_POST['date'] . '%', '%');
$sth->bindParam(':inhound', is_null( $inhound) ? '%' . $inhound . '%', '%');

$sth->execute();
$sth->fetchAll(); 
```

# .net - Xpath 选择具有特定子元素的元素

> ID：13764383
> 
> 赞同：0
> 
> 时间：2012-12-07T13:49:04.353
> 
> 标签：.net, xml, xpath

```
<item id=1>
  <name>item1</name>
  <price>30</price>
</item>
<item id=2>
  <name>item2</name>      
</item> 
```

我需要一个 xpath 来仅选择没有 .net 价格的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:50:48.270

对于您的原始问题：

```
item[price] 
```

将为您提供所有`item`具有`price`子元素的元素。这包括一个空的`<price/>`，所以如果你想避免匹配

```
<item>
  <name>item3</name>
  <price></price>
</item> 
```

那么你需要以下之一

```
item[price/text()]
item[normalize-space(price)] 
```

相反，要仅选择`item`没有 a 的元素`price`，您可以使用

```
item[not(price)] 
```

# openerp - OpenERP 7升级后“错误：关系“ir_model_constraint”不存在”

> ID：13764384
> 
> 赞同：1
> 
> 时间：2012-12-07T13:49:05.187
> 
> 标签：openerp

我一直在使用 OpenERP 6 OK 并决定升级到版本 7。

[我从http://nightly.openerp.com/trunk/nightly/deb/](http://nightly.openerp.com/trunk/nightly/deb/)下载了 openerp_7.0alpha-20121206-000102-1_all.deb并安装了它。现在，当我浏览到`http://localhost:8069`我无法再选择数据库时（因为当有一个数据库时，没有理由显示选择器），登录后我得到：

```
OpenERP Server Error
Client Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.7/openerp/addons/web/http.py", line 195, in dispatch
    response["result"] = method(self, **self.params)
  File "/usr/lib/pymodules/python2.7/openerp/addons/web/controllers/main.py", line 833, in authenticate
    req.session.authenticate(db, login, password, env)
  File "/usr/lib/pymodules/python2.7/openerp/addons/web/session.py", line 113, in authenticate
    uid = self.proxy('common').authenticate(db, login, password, env)
  File "/usr/lib/pymodules/python2.7/openerp/addons/web/session.py", line 28, in proxy_method
    result = self.session.send(self.service_name, method, *args)
  File "/usr/lib/pymodules/python2.7/openerp/addons/web/session.py", line 101, in send
    raise xmlrpclib.Fault(openerp.tools.exception_to_unicode(e), formatted_info)

Server Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.7/openerp/addons/web/session.py", line 87, in send
    return openerp.netsvc.dispatch_rpc(service_name, method, args)
  File "/usr/lib/pymodules/python2.7/openerp/netsvc.py", line 361, in dispatch_rpc
    result = ExportService.getService(service_name).dispatch(method, params)
  File "/usr/lib/pymodules/python2.7/openerp/service/web_services.py", line 413, in dispatch
    return fn(*params)
  File "/usr/lib/pymodules/python2.7/openerp/service/web_services.py", line 424, in exp_authenticate
    res_users = pooler.get_pool(db).get('res.users')
  File "/usr/lib/pymodules/python2.7/openerp/pooler.py", line 50, in get_pool
    return get_db_and_pool(db_name, force_demo, status, update_module)[1]
  File "/usr/lib/pymodules/python2.7/openerp/pooler.py", line 33, in get_db_and_pool
    registry = RegistryManager.get(db_name, force_demo, status, update_module, pooljobs)
  File "/usr/lib/pymodules/python2.7/openerp/modules/registry.py", line 156, in get
    update_module, pooljobs)
  File "/usr/lib/pymodules/python2.7/openerp/modules/registry.py", line 178, in new
    openerp.modules.load_modules(registry.db, force_demo, status, update_module)
  File "/usr/lib/pymodules/python2.7/openerp/modules/loading.py", line 296, in load_modules
    loaded_modules, processed_modules = load_module_graph(cr, graph, status, perform_checks=(not update_module), report=report)
  File "/usr/lib/pymodules/python2.7/openerp/modules/loading.py", line 164, in load_module_graph
    init_module_models(cr, package.name, models)
  File "/usr/lib/pymodules/python2.7/openerp/modules/module.py", line 373, in init_module_models
    result = obj._auto_init(cr, {'module': module_name})
  File "/usr/lib/pymodules/python2.7/openerp/osv/orm.py", line 3211, in _auto_init
    self._add_sql_constraints(cr)
  File "/usr/lib/pymodules/python2.7/openerp/osv/orm.py", line 3350, in _add_sql_constraints
    self._save_constraint(cr, conname, 'u')
  File "/usr/lib/pymodules/python2.7/openerp/osv/orm.py", line 2859, in _save_constraint
    """, (constraint_name, self._module))
  File "/usr/lib/pymodules/python2.7/openerp/sql_db.py", line 162, in wrapper
    return f(self, *args, **kwargs)
  File "/usr/lib/pymodules/python2.7/openerp/sql_db.py", line 227, in execute
    res = self._obj.execute(query, params)
ProgrammingError: relation "ir_model_constraint" does not exist
LINE 2:             SELECT 1 FROM ir_model_constraint, ir_module_mod...
                                  ^ 
```

所以我尝试手动运行它，例如：

```
sudo openerp-server stop
su - openerp
openerp-server -d openerp1 -u all 
```

我得到

```
2012-12-07 07:00:43,417 7584 ERROR openerp1 openerp: Failed to initialize database `openerp1`.
Traceback (most recent call last):
  File "/usr/lib/pymodules/python2.7/openerp/cli/server.py", line 97, in preload_registry
    db, registry = openerp.pooler.get_db_and_pool(dbname, update_module=openerp.tools.config['init'] or openerp.tools.config['update'], pooljobs=False)
  File "/usr/lib/pymodules/python2.7/openerp/pooler.py", line 33, in get_db_and_pool
    registry = RegistryManager.get(db_name, force_demo, status, update_module, pooljobs)
  File "/usr/lib/pymodules/python2.7/openerp/modules/registry.py", line 156, in get
    update_module, pooljobs)
  File "/usr/lib/pymodules/python2.7/openerp/modules/registry.py", line 178, in new
    openerp.modules.load_modules(registry.db, force_demo, status, update_module)
  File "/usr/lib/pymodules/python2.7/openerp/modules/loading.py", line 296, in load_modules
    loaded_modules, processed_modules = load_module_graph(cr, graph, status, perform_checks=(not update_module), report=report)
  File "/usr/lib/pymodules/python2.7/openerp/modules/loading.py", line 164, in load_module_graph
    init_module_models(cr, package.name, models)
  File "/usr/lib/pymodules/python2.7/openerp/modules/module.py", line 373, in init_module_models
    result = obj._auto_init(cr, {'module': module_name})
  File "/usr/lib/pymodules/python2.7/openerp/osv/orm.py", line 3211, in _auto_init
    self._add_sql_constraints(cr)
  File "/usr/lib/pymodules/python2.7/openerp/osv/orm.py", line 3350, in _add_sql_constraints
    self._save_constraint(cr, conname, 'u')
  File "/usr/lib/pymodules/python2.7/openerp/osv/orm.py", line 2859, in _save_constraint
    """, (constraint_name, self._module))
  File "/usr/lib/pymodules/python2.7/openerp/sql_db.py", line 162, in wrapper
    return f(self, *args, **kwargs)
  File "/usr/lib/pymodules/python2.7/openerp/sql_db.py", line 227, in execute
    res = self._obj.execute(query, params)
ProgrammingError: relation "ir_model_constraint" does not exist
LINE 2:             SELECT 1 FROM ir_model_constraint, ir_module_mod... 
```

我可以做什么，或者我应该做什么来升级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:55:37.167

目前没有从 OpenERP 6.0 到 7.0 的免费升级机制。OpenERP SA 通过销售商业升级解决方案谋生，如果您与他们签订年度支持合同，您将获得相当大的折扣。

使用 -u all 可能会尝试升级您的数据库架构，但不会迁移您的数据（即，如果重命名列，您不会将数据从旧列移动到新列），并且视图不会被迁移：具有相同 XML id 的新视图替换旧视图，创建新视图，旧视图仍然存在，可能引用不再存在的字段。基本上你的数据库现在完全是一团糟，希望你有一个备份可以用来继续运行 v 6.0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T04:56:35.690

您是否也在同一台机器上安装了 V6.1？

当您混合旧版本模块和新模块时会发生此错误。

我建议安装一个虚拟机并在上面重试，如果我是正确的，你可以卸载包，删除与包相关的所有文件（模块）并重新安装。

如果您需要将数据库修复到旧版本，请重新安装 6.1 或 6.0 并使用参数 -u all -d nameofdb 启动您的服务器。

问候。

# css - 带有渐变颜色的css动画

> ID：13764386
> 
> 赞同：0
> 
> 时间：2012-12-07T13:49:15.923
> 
> 标签：css, animation, background, gradient

我有这个 CSS3 代码：

```
#box2 {
    position: relative;
    width: 500px;
    border: 1px solid black;
    box-shadow: -3px 8px 34px #808080;
    border-radius: 20px;
    box-shadow: -8px 5px 5px #888888;
    right: 300px;
    top: 113px;
    text-align: justify;
    -webkit-transition: all 1s;
    font-size: large;
    color: Black;
    padding: 10px;
    background: #D0D0D0;
    opacity: 0;
}

@-webkit-keyframes mySecond {
    0% {
        right: 300px;
        top: 13px;
        background: #D0D0D0;
        opacity: 0;
    }

    100% {
        background: #909090;
        right: 300px;
        top: 63px;
        opacity: 1;
    }
}

#littlebox2 {
    top: 053px;
    position: absolute;
    display: inline-block;
}

.littlebox2sentence {
    font-size: large;
    padding-bottom: 15px;
    padding-top: 15px;
    padding-left: 25px;
    padding-right: 10px;
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#9CCEDA), to(#58A8D8));
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
    -webkit-transition: background .25s ease-in-out;
    border-bottom: 2px solid red;
    border-right: 2px solid red;
    border-top: 2px solid red;
    -webkit-transition-property: color, background;
    -webkit-transition-duration: .25s, .25s;
    -webkit-transition-timing-function: linear, ease-in-out;
    color: #164ad7;
}

#bothcontainer2:hover ~ #box2 {
    -webkit-transition: all 0s;
    background: #909090;
    right: 300px;
    top: 63px;
    -webkit-animation: mySecond .75s;
    -webkit-animation-fill-mode: initial;
    opacity: 1;
}

#bothcontainer2:hover .littlebox2sentence {
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#B2DFE9), to(#83BEF1));
    color: black;

} 
```

现场示例：http: [//jsfiddle.net/md966/3/](http://jsfiddle.net/md966/3/)

如何使用渐变色制作动画？如果颜色是蓝色和红色，它可以正常工作（背景颜色过渡），但是当我用渐变色替换它时它不起作用。我找到了一些教程，但它们并没有真正帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:57:18.977

当使用渐变作为背景时，您不需要定义背景颜色。渐变是背景图像。背景图像不是可以设置动画的属性。所以你的方法行不通。

# gwt - 让对 FlowPanel 的点击传播到它下面的元素？

> ID：13764387
> 
> 赞同：0
> 
> 时间：2012-12-07T13:49:16.537
> 
> 标签：gwt

我有一个 Canvas 元素，在它上面有一个 FlowPanel（按 z 顺序）。当我点击 FlowPanel 时，它似乎拦截了点击并停止传播它。我没有设置任何点击监听器。我希望它下面的画布接收点击事件。

有没有办法让 FlowPanel 忽略点击并让它传播到它下方的画布？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:23:19.517

在 Chrome、Firefox 和 Safari 4+ 中，您可以使用[`pointer-events`CSS 属性](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)（移动浏览器也[很好地支持](http://caniuse.com/pointer-events)它），但对于其他浏览器（IE、Opera 和较旧的 Safari），您必须在`FlowPanel`级别监听点击事件和在画布上触发合成点击事件。
假设`FlowPanel`和画布对齐，在同一位置，您应该可以使用[`DomEvent.fireNativeEvent`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/event/dom/client/DomEvent.html#fireNativeEvent%28com.google.gwt.dom.client.NativeEvent,%20com.google.gwt.event.shared.HasHandlers%29)与[`Document.get().createClickEvent`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/dom/client/Document.html#createClickEvent%28int,%20int,%20int,%20int,%20int,%20boolean,%20boolean,%20boolean,%20boolean%29).

# windows - 需要在 inno setup 安装程序中覆盖 DLL - 但文件没有被替换

> ID：13764390
> 
> 赞同：6
> 
> 时间：2012-12-07T13:49:27.287
> 
> 标签：windows, dll, inno-setup

我正在使用 Inno Setup 为我的 VB.net 应用程序安装补丁更新，我必须替换一个 DLL 文件和几个 javascript/html 文件来进行更新。但是，DLL 没有得到更新（它在 C:\program 文件中......） - 即使在没有 UAC 的 XP 系统上它也不会被替换，但是当我手动删除 DLL 并重新运行补丁时，文件会被复制. 它不是只读的，XP 案例中不涉及 UAC/admin 权限。

如果文件已经存在，文件没有被复制的原因可能是什么？它是在 VS2008 和 .NET 2.0 中构建的——新的 DLL 也有更新的日期和大小差异。

有没有办法解决 Vista/Win7/8 上的 UAC 写入访问问题？我猜这个补丁永远不会成功地用 UAC 替换这些系统上的文件。告诉我们的用户群将其关闭显然不是一种选择。

[编辑] 通过在构建解决方案时从 Release 文件夹中提取 dll 程序集，将其打包到 Visual Studio 中的 setup.exe 中。inno setup iss [File] 部分有这个：

```
[Files]
Source: C:\Visual Studio 2005\Projects\Setup5\Setup5\Debug\setup.exe; DestDir: {app}
Source: C:\Visual Studio 2005\Projects\Setup5\Setup5\Debug\interact.msi; DestDir: {app}
[Run]
Filename: {app}\setup.exe; Flags: runmaximized 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T13:58:02.253

DLL 是否有版本资源？新 DLL 是否比旧 DLL 版本更高？默认情况下，InnoSetup 使用版本资源来确定是否应该替换文件。
另一种选择是您可以`ignoreversion`在该部分中添加标志`[Files]`以始终替换该文件。

# android - 如何解决我在android开发过程中在eclipse中遇到的这个错误？

> ID：13764391
> 
> 赞同：-2
> 
> 时间：2012-12-07T13:49:32.570
> 
> 标签：android, eclipse

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:52:45.747

修复项目的启动配置（属性>运行/调试设置）并指定您的项目名称![在此处输入图像描述](../Images/345ed7d4c4719a75eecab8f3b765356c.png)

# list - JavaFX - 将属性绑定到可观察集合中每个元素的属性

> ID：13764401
> 
> 赞同：7
> 
> 时间：2012-12-07T13:50:33.687
> 
> 标签：list, binding, javafx

是否存在将 BooleanProperty 绑定到 ObservableList 中每个元素的连接的任何方法？

```
ObservableList<BooleanProperty> list;
list = FXCollections.observableList(new ArrayList<BooleanProperty>));
BooleanProperty emptyProperty = new SimpleBooleanProperty();
emptyProperty.bind(Bindings.conunction(list));` 
```

有没有这样的方法：

```
static BooleanBinding conjunction(ObservableList<BooleanProperty> op) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-15T08:56:47.230

您可以轻松实现该方法，如下所示：

```
public static BooleanBinding conjunction(ObservableList<BooleanProperty> list){   
  BooleanBinding and = new SimpleBooleanProperty(true).and(list.get(0));
  for(int i = 1; i < list.size(); i++){
    and = and.and(list.get(i));   
  }
  return and;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T23:18:29.170

JavaFX 2.2 平台中没有定义[连接api。](http://en.wikipedia.org/wiki/Logical_conjunction)

[您可以通过继承 BooleanBinding](http://docs.oracle.com/javafx/2/api/javafx/beans/binding/BooleanBinding.html)来创建`ConjunctionBooleanBinding`(aka `AllTrueBinding`) 。

在新类的构造函数中接受[ObservableList](http://docs.oracle.com/javafx/2/api/javafx/collections/ObservableList.html) ，并在重写的[computeValue方法中使用](http://docs.oracle.com/javafx/2/api/javafx/beans/binding/BooleanBinding.html#computeValue%28%29)[低级绑定 api](http://docs.oracle.com/javafx/2/binding/jfxpub-binding.htm) ，以根据逻辑将列表中的所有布尔值组合在一起来设置绑定值。

这是一个示例实现。该示例可以进一步优化性能并利用 Wea​​kReferences，因此不需要手动处理。

```
import javafx.beans.binding.BooleanBinding;
import javafx.beans.property.BooleanProperty;
import javafx.collections.*;

public class AllTrueBinding extends BooleanBinding {
  private final ObservableList<BooleanProperty> boundList;
  private final ListChangeListener<BooleanProperty> BOUND_LIST_CHANGE_LISTENER =
    new ListChangeListener<BooleanProperty>() {
      @Override public void onChanged(
             ListChangeListener.Change<? extends BooleanProperty> change
          ) {
        refreshBinding();
      }
    };
  private BooleanProperty[] observedProperties = {};

  AllTrueBinding(ObservableList<BooleanProperty> booleanList) {
    booleanList.addListener(BOUND_LIST_CHANGE_LISTENER);
    boundList = booleanList;
    refreshBinding();
  }

  @Override protected boolean computeValue() {
    for (BooleanProperty bp: observedProperties) {
      if (!bp.get()) {
        return false;
      }
    }

    return true;
  }

  @Override public void dispose() {
    boundList.removeListener(BOUND_LIST_CHANGE_LISTENER);
    super.dispose();
  }

  private void refreshBinding() {
    super.unbind(observedProperties);
    observedProperties = boundList.toArray(new BooleanProperty[0]);
    super.bind(observedProperties);
    this.invalidate();
  }
} 
```

这是一个测试工具来演示它是如何工作的：

```
import java.util.*;
import javafx.beans.property.*;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;

public class ListBindingTest {
  final BooleanProperty a = new SimpleBooleanProperty(true);
  final BooleanProperty b = new SimpleBooleanProperty(true);
  final BooleanProperty c = new SimpleBooleanProperty(true);
  final BooleanProperty d = new SimpleBooleanProperty(true);
  final ObservableList<BooleanProperty> booleanList =
    FXCollections.observableArrayList(a, b, c, d);

  public static void main(String[] args) {
    new ListBindingTest().test();
  }

  private void test() {
    AllTrueBinding at = new AllTrueBinding(booleanList);

    System.out.println(at.get() + forArrayString(booleanList));

    b.set(false);
    System.out.println(at.get() + forArrayString(booleanList));

    b.set(true);
    System.out.println(at.get() + forArrayString(booleanList));

    booleanList.add(new SimpleBooleanProperty(false));
    System.out.println(at.get() + forArrayString(booleanList));

    booleanList.remove(3, 5);
    System.out.println(at.get() + forArrayString(booleanList));

    at.dispose();
  }  

  private String forArrayString(List list) {
    return " for " + Arrays.toString(list.toArray());
  }
} 
```

# zend-framework - zf 1：如何仅渲染元素的小部件？

> ID：13764408
> 
> 赞同：0
> 
> 时间：2012-12-07T13:50:51.227
> 
> 标签：zend-framework

我有一个在控制器中实例化的表单，现在我想在视图中呈现。

有没有办法呈现没有标签的字段（只有输入，选择.. html标签）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:24:42.237

```
$formelement = new Zend_Form_Element_Text('Name'); // _Textarea etc.
$formElement->setDecorators(array('ViewHelper')); 
```

这个装饰器将只渲染标签等

# android - 我可以使用 setProgress 以编程方式更改搜索栏吗

> ID：13764411
> 
> 赞同：5
> 
> 时间：2012-12-07T13:50:55.837
> 
> 标签：android, android-camera, seekbar, zooming

我正在使用 android`seekBar`作为相机变焦控制器。

拖动时，搜索栏就像一个魅力，但我想添加一个可以增加进度的 zoomIn 和 zoomOut 按钮。问题是双重的。

1.  当我单击按钮时，我必须在进度实际增加之前单击它 4 次

2.  它没有更新进度条上的可拖动拇指

    ```
    btn_zoomIn.setOnClickListener(new View.OnClickListener() {
      public void onClick(View view) {
        try {
          zoomCtrl.setProgress(zoomCtrl.getProgress()+1);
          onProgressChanged(zoomCtrl, zoomCtrl.getProgress(), true);
        } catch(Exception ex) { }
      }
    });

    btn_zoomOut.setOnClickListener(new View.OnClickListener() {
      public void onClick(View view) {
        try {
          zoomCtrl.setProgress(zoomCtrl.getProgress()-1);
        } catch(Exception ex){ }
      }
    }); 
    ```

有人可以帮忙吗？

**添加：**

这是我使用而不是 seekBar 的 verticalSeekBar 类：

```
public class VerticalSeekBar extends SeekBar {

/**
 * Instantiates a new vertical seek bar.
 *
 * @param context the context
 */
public VerticalSeekBar(Context context) {

    super(context);
}

/**
 * Instantiates a new vertical seek bar.
 *
 * @param context the context
 * @param attrs the attrs
 * @param defStyle the def style
 */
public VerticalSeekBar(Context context, AttributeSet attrs, int defStyle) {

    super(context, attrs, defStyle);
}

/**
 * Instantiates a new vertical seek bar.
 *
 * @param context the context
 * @param attrs the attrs
 */
public VerticalSeekBar(Context context, AttributeSet attrs) {

    super(context, attrs);
}

/* (non-Javadoc)
 * @see android.widget.AbsSeekBar#onSizeChanged(int, int, int, int)
 */
protected void onSizeChanged(int w, int h, int oldw, int oldh) {

    super.onSizeChanged(h, w, oldh, oldw);
}

/* (non-Javadoc)
 * @see android.widget.AbsSeekBar#onMeasure(int, int)
 */
@Override
protected synchronized void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    super.onMeasure(heightMeasureSpec, widthMeasureSpec);
    setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());
}

/* (non-Javadoc)
 * @see android.widget.AbsSeekBar#onDraw(android.graphics.Canvas)
 */
protected void onDraw(Canvas c) {

    c.rotate(-90);
    c.translate(-getHeight(), 0);

    super.onDraw(c);
}

/* (non-Javadoc)
 * @see android.widget.AbsSeekBar#onTouchEvent(android.view.MotionEvent)
 */
@Override
public boolean onTouchEvent(MotionEvent event) {

    if (!isEnabled()) {
        return false;
    }

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
    case MotionEvent.ACTION_MOVE:
    case MotionEvent.ACTION_UP:
        setProgress(getMax() - (int) (getMax() * event.getY() / getHeight()));
        onSizeChanged(getWidth(), getHeight(), 0, 0);
        break;

    case MotionEvent.ACTION_CANCEL:
        break;
    }
    return true;
} 
```

}

我将它添加到我的活动中，如下所示：

```
zoomCtrl = new VerticalSeekBar(this);
        zoomCtrl.setLayoutParams(zCtrl);

        zoomCtrl.setProgressDrawable(getResources().getDrawable(R.drawable.zoombar_progress_bg));
        zoomCtrl.setThumb(getResources().getDrawable(R.drawable.imagebtn_zoom_thumb));
        zoomCtrl.setBackgroundDrawable(getResources().getDrawable(R.drawable.zoom_track));
        zoomCtrl.setPadding(25, 0, 25, 0);
        zoomCtrl.setOnSeekBarChangeListener(this);

        rel.addView(zoomCtrl); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-05T04:36:06.990

通过覆盖 VerticalSeekbar 类中的 setProgress 解决了该问题。 `@Override public synchronized void setProgress(int progress) { super.setProgress(progress); onSizeChanged(getWidth(), getHeight(), 0, 0); }`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-19T09:53:00.307

创建 updateThumb(); VerticalSeekbar 中的方法

```
 public void updateThumb(){
         onSizeChanged(getWidth(), getHeight(), 0, 0);
    } 
```

然后在设置进度后调用 update thumb 方法。

```
seekBar.setProgress(100 - (int) progress);
seekBar.updateThumb(); 
```

# c++ - 具有多个可变参数模板的模板专业化

> ID：13764418
> 
> 赞同：1
> 
> 时间：2012-12-07T13:51:26.290
> 
> 标签：c++, templates, c++11, typetraits

在我的[最后一个问题](https://stackoverflow.com/questions/13719873/partial-template-class-specialization-with-member-function-pointer)中，我在获得模板专业化工作方面获得了很大帮助。现在我需要一点扩展。我想要这些陈述的两个专业：

```
int main()
{
    // First specialization
    holder_ext<person> h1;
    holder_ext<person, &person::age> h2;
    holder_ext<int> h3;

    // Second specialization
    holder_ext<person, &person::age, &person::name> h4;
} 
```

我班的人是这样的：

```
class person
{
private:
    std::string name_;
    int age_;
public:
    person(const std::string &name)
        : name_(name), age_(56)
    {}
    void age(int a) { age_ = i; }
    void name(const std::string &n) { name_ = n; }
}; 
```

特别的是，这两个成员函数有不同的参数类型。所以我不能对两者使用相同的可变参数模板成员函数。我尝试了两个不同的可变参数模板。但这不起作用。成员函数的默认值也不起作用。

有人对我有好的提示吗？

这是具有一个成员函数的解决方案（感谢[Pubby](https://stackoverflow.com/users/964135/pubby)）：

```
template < class T, void (std::conditional<std::is_class<T>::value, T, struct dummy>::type::* ...FUNC)(int)> class holder;

template < class T, void (T::*FUNC)(int)>
class holder<T, FUNC>
{
public:
    explicit holder() : setter(FUNC) { std::cout << "func\n"; }
private:
    std::function<void (value_type&, int)> setter;
};

template < class T>
class holder<T>
{
public:
    explicit holder() { std::cout << "plain\n"; }
}; 
```

再次提前感谢！

PS：不，我不会在两天内提出“三个、四个、五个成员函数必须做什么”？;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:07:55.703

对于一个完全通用的解决方案，您将遇到一个无法解决的问题：无法推断非类型模板参数的类型，因此它必须在模板声明中明确，因此无法告诉模板您想要多个指向成员参数的指针，每个参数都有一个未知的类型。

我对 C++11 的使用还不够，但您可以尝试对成员模板参数强制排序并在模板中提供所有签名：

```
template <typename T, 
          void (std::conditional<...>::type*)(int),
          void (std::conditional<...>::type*)(const std::string&)> 
```

再说一次，它可能会起作用，也可能不会……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:00:55.847

最后我找到了解决我的问题的方法。它是可变参数模板和模板规范的混合：

```
template < class T,
void (std::conditional<std::is_base_of<object, T>::value, T, struct dummy>::type::*FUNC1)(int) = nullptr,
void (std::conditional<std::is_base_of<object, T>::value, T, struct dummy>::type::* ...FUNC2)(const std::string&)
>
class holder_ext;

template < class T,
void (std::conditional<std::is_base_of<object, T>::value, T, struct dummy>::type::*FUNC1)(int),
void (std::conditional<std::is_base_of<object, T>::value, T, struct dummy>::type::*FUNC2)(const std::string&)
>
class holder_ext<T, FUNC1, FUNC2>
{
public:
    holder_ext() { std::cout << "func 2 test\n"; }
};

template < class T,
void (std::conditional<std::is_base_of<object, T>::value, T, struct dummy>::type::*FUNC1)(int)
>
class holder_ext<T, FUNC1>
{
public:
    holder_ext() { std::cout << "func 1 test\n"; }
}; 
```

I use a not implemented declaration and define two specializations. One with both member function and the other one for all other cases.

If there is a better solution dont't hesitate to tell me.

# jquery - jQuery 中的值更改为非 UTF8

> ID：13764426
> 
> 赞同：0
> 
> 时间：2012-12-07T13:51:58.320
> 
> 标签：jquery, html, css

我得到了一个用 Uniform css/js 制作的 jQuery 表单。

在下拉列表中，我得到了这个：单词 1、单词 2、单词 3、单词 4 和 5

当我选择“单词 4 和 5”时，值变为`&amp;`而不是 &。因此，当您打开 de 下拉菜单时，一切都很好并显示 &，但是当您选择它时，它会变为 `&amp;`

我怎么解决这个问题？

代码太大，无法发布，所以我将链接发布到 JS [http://uniformjs.com/](http://uniformjs.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:20:54.540

请提供一些示例代码，如果您觉得这里很重要，请将其放入 JSFiddle 中。我查看了 Uniform CSS，但在那里我看不到任何问题，它似乎与其他东西有关，所以还提供了您使用 Uniform & jQuery 的版本。（甚至可能是浏览器）

但如前所述，没有代码没有人能够帮助您。

# c# - Ngit 与私钥文件建立连接

> ID：13764435
> 
> 赞同：5
> 
> 时间：2012-12-07T13:52:29.023
> 
> 标签：c#, git, ngit

我正在尝试使用NGit 连接到Github（即使用私钥和密码）。

有人可以带我过去吗？

我的正常获取是：

```
 var git = Git.CloneRepository()
            .SetDirectory(_properties.OutputPath)
            .SetURI(_properties.SourceUrlPath)
            .SetBranchesToClone(new Collection<string>() { "master" })
            .SetCredentialsProvider(new UsernamePasswordCredentialsProvider("username","password"))
            .SetTimeout(3600)
            .Call(); 
```

我将如何使用私钥执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T07:11:19.813

经过长时间的战斗，许多谷歌搜索 Jgit 示例和更多痛苦，我找到了解决方案！

基本上你用你自己的覆盖和 SessionFactory 并在连接时注入你的证书：

```
public class CustomConfigSessionFactory : JschConfigSessionFactory
{
    public string PrivateKey { get; set; }
    public string PublicKey { get; set; }

    protected override void Configure(OpenSshConfig.Host hc, Session session)
    {
        var config = new Properties();
        config["StrictHostKeyChecking"] = "no";
        config["PreferredAuthentications"] = "publickey";
        session.SetConfig(config);

        var jsch = this.GetJSch(hc, FS.DETECTED);
        jsch.AddIdentity("KeyPair", Encoding.UTF8.GetBytes(PrivateKey), Encoding.UTF8.GetBytes(PublicKey), null);
    }
} 
```

然后像这样注入它：

```
var customConfigSessionFactory = new CustomConfigSessionFactory();
customConfigSessionFactory.PrivateKey = properties.PrivateKey;
customConfigSessionFactory.PublicKey = properties.PublicKey;

NGit.Transport.JschConfigSessionFactory.SetInstance(customConfigSessionFactory);

var git = Git.CloneRepository()
          .SetDirectory(properties.OutputPath)
          .SetURI(properties.SourceUrlPath)
          .SetBranchesToClone(new Collection<string>() { "master" })
          .Call(); 
```

# android - 如何在android中使用系统电池状态更新通知

> ID：13764436
> 
> 赞同：0
> 
> 时间：2012-12-07T13:52:33.717
> 
> 标签：android

在通知中，我尝试更新我的电池状态。我用服务创建通知。但我不知道如何用电池状态更新通知：

我还阅读了这个文档：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

主要活动

```
@Override
    public void onCreate(Bundle savedInstanceState) {

registerReceiver(batteryReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
..
}

private BroadcastReceiver batteryReceiver = new BroadcastReceiver() {

        private int scale = -1;
        private int level = -1;
        private int voltage = -1;
        private int temp = -1;

        @Override
        public void onReceive(Context context, Intent intent) {
            level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
            scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
            temp = intent.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, -1);
            voltage = intent.getIntExtra(BatteryManager.EXTRA_VOLTAGE, -1);

            String ns = Context.NOTIFICATION_SERVICE;
            NotificationManager mNotificationManager = (NotificationManager)context.getSystemService(ns);
            long when = System.currentTimeMillis();

            String percent = ((level * 100) / scale) + "%";
            Notification notification = new Notification(R.drawable.call, percent, when);
            /* <set your intents here> */
            mNotificationManager.notify(7331, notification);

            Log.d(TAG, "Battery level is " + level + "/" + scale + ", temp is " + temp + ", voltage is " + voltage);
        }
    }; 
```

我正在使用创建通知的服务

```
private void showNotification() {
        Notification notification = new Notification(R.drawable.call, getString(R.string.notification_text), System.currentTimeMillis());
        Intent intent = new Intent(this, MainActivity.class);

        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);
        notification.setLatestEventInfo(this, getString(R.string.notification_label), getString(R.string.notification_text_short), pi);
        notification.flags |= Notification.FLAG_NO_CLEAR;
        startForeground(7331, notification);
    } 
```

错误：

```
12-07 14:46:29.425: E/AndroidRuntime(25758): FATAL EXCEPTION: main
12-07 14:46:29.425: E/AndroidRuntime(25758): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000010 (has extras) } in com.xxx.xxx.MainActivity$1@41558b80
12-07 14:46:29.425: E/AndroidRuntime(25758):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:737)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at android.os.Handler.handleCallback(Handler.java:605)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at android.os.Looper.loop(Looper.java:137)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at android.app.ActivityThread.main(ActivityThread.java:4511)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at java.lang.reflect.Method.invokeNative(Native Method)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at java.lang.reflect.Method.invoke(Method.java:511)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at dalvik.system.NativeStart.main(Native Method)
12-07 14:46:29.425: E/AndroidRuntime(25758): Caused by: java.lang.IllegalArgumentException: contentView required: pkg=com.xxx.xxx id=7331 notification=Notification(contentView=null vibrate=null,sound=null,defaults=0x0,flags=0x0)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at android.os.Parcel.readException(Parcel.java:1331)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at android.os.Parcel.readException(Parcel.java:1281)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at 
android.app.INotificationManager$Stub$Proxy.enqueueNotificationWithTag(INotificationManager.java:317)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at android.app.NotificationManager.notify(NotificationManager.java:127)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at android.app.NotificationManager.notify(NotificationManager.java:106)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at com.xxx.xxx.MainActivity$1.onReceive(MainActivity.java:72)
12-07 14:46:29.425: E/AndroidRuntime(25758):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:728)
12-07 14:46:29.425: E/AndroidRuntime(25758):    ... 9 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:02:41.330

我认为您需要*使用权限*BATTERY_STATS。如果要更新通知，则必须在 PendingActivity.getActivity 中使用 PendingIntent.FLAG_UPDATE_CURRENT 作为标志

这是我的应用程序中的一些代码：

```
final NotificationManager notificationMgr = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

Notification note = new Notification(R.drawable.icon, text, System.currentTimeMillis());
note.flags = Notification.FLAG_AUTO_CANCEL | Notification.FLAG_ONLY_ALERT_ONCE;
note.defaults = Notification.DEFAULT_SOUND | Notification.DEFAULT_VIBRATE;

Intent intent = null;
PendingIntent pendingIntent = null;

intent = new Intent(context, MailActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
pendingIntent = PendingIntent.getActivity(context.getApplicationContext(), 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

note.setLatestEventInfo(context, "nyxdroid", text, pendingIntent);
notificationMgr.notify(1980 + type, note); 
```

# android - obd适配器的初始化

> ID：13764442
> 
> 赞同：4
> 
> 时间：2012-12-07T13:52:51.723
> 
> 标签：android, torque, obd-ii

我正在开发一个 android 应用程序，它通过蓝牙从车辆的 Obd 适配器读取 Obd 数据......我在初始化适配器时遇到了问题。我已经按顺序发送了以下 Obd 命令来初始化 obd ：

1.  atz (收到OK)
2.  atsp0（接收正常）
3.  ate0（接收正常）
4.  0100（这是出现问题的部分）...

有时对于这个命令，我会收到 BUSINIT:ERROR.. 然后对于每个车辆命令（AT 命令除外）重复相同的错误..

我想知道确切的初始化顺序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-31T09:00:33.530

看来您的 obd 初始化和 obd 协议选择失败了。您应该按照以下步骤操作：

```
AT D
AT Z
AT E0
AT L0
AT S0
AT H0
AT SP 0 
```

当协议选择命令响应没有任何错误（如下所示）时，您的连接正常，您可以请求新命令，如“0100”命令。

* * *

**错误：**

*   无法连接
*   总线初始化...错误
*   ?
*   没有数据
*   停止
*   错误

* * *

**命令解释：**

AT D -> 全部设置为默认值

AT Z -> 重置 Obd

AT E0 -> 回声关闭

AT L0 -> 换行关闭

AT S0 -> 空格

AT H0 -> 标头关闭

AT SP 0 -> 将协议设置为 0“自动”，搜索所有协议并将其与该 obd 的正确协议连接

对于 AT SP 命令，如果您知道车辆的 obd 接口协议，则可以选择该特定协议而不是 make Auto 并搜索所有可能的协议。您可以使用不同的输入：

* * *

**协议参数：Hex[0,1,2, ... ,B,C]**

自动选择协议并保存。自动 -> 0

41.6 kbaud SAE_J1850_PWM -> 1

10.4 kbaud SAE_J1850_VPW -> 2

5 波特初始化 ISO_9141_2 -> 3

5 波特初始化 ISO_14230_4_KWP -> 4

快速初始化 ISO_14230_4_KWP_FAST -> 5

11 位 ID，500 kbaud ISO_15765_4_CAN -> 6

29 位 ID，500 kbaud ISO_15765_4_CAN_B -> 7

11 位 ID，250 kbaud ISO_15765_4_CAN_C -> 8

29 位 ID，250 kbaud ISO_15765_4_CAN_D -> 9

29 位 ID，250 kbaud（用户可调） SAE_J1939_CAN -> A

11 位 ID（用户可调），125 kbaud（用户可调） USER1_CAN -> B

11 位 ID（用户可调），50 kbaud（用户可调） USER2_CAN -> C

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-01T19:20:19.493

“在 E0”

“在 L0”

“在 ST 00”

“在 SP 00”

为我工作。还有一件事……我一个接一个地发送所有这些命令，延迟为 500 毫秒！几乎每次初始化都没有延迟，不要忘记，这是蓝牙，它需要更多时间来发送和接收响应......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-19T23:12:47.000

只是想投入两分钱。我最近一直在用 C++ 和 LabVIEW 开发一个应用程序，用于与基于 ELM-327 的蓝牙模块通信，以从我的汽车 ECU 中检索信息。有时初始化序列会失败，有时它会起作用。我发现有时无法正确检测到 ECU 协议初始化的“关键字”字节。我认为我的蓝牙模块是问题所在，因为它原来是合法 ELM-327 的中文克隆。我怎么知道？如果您发出命令 ATI ，它将回复“ELM-327 ver. 1.5”，并且根据制造商的说法，他们从未发布过 1.5 版本 =D

对我有用的是这样的：

1.  打开通讯，发送ATZ
2.  ATSP0
3.  ATSS（这会启用推荐的协议搜索顺序）
4.  010D
5.  如果 4\. 失败，则关闭通信，等待 3 秒或更长时间，然后转到 1
6.  更多 OBD-II 或 AT-Commands。

BUSINIT:...ERROR 响应意味着 ELM-327 无法完成 ECU 协议的启动序列。此外，在发送 OBD-II 命令（如 010C）之前，如果您碰巧使用 ISO-9141-2 或 ISO-14230-4 KWP 协议，您可以使用 ATSI 命令初始化通信。

如果您在自动检测成功后向 ELM-327 发送命令 ATDP，您可以找出您的汽车使用的协议。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T16:10:11.807

如果硬件完全兼容 OBD-II 并且汽车兼容 OBD-II，则您的初始化序列应该可以工作。如果您仍然在 0100 命令上遇到错误，请检查点火装置是否打开并且硬件是否完全正常运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T13:04:08.690

0100 是到达实际汽车的第一个命令。AT 命令用于 (ELM327) 芯片。所以OBD连接器和汽车之间的通信有问题。您的应用程序和连接器之间的连接很好。

Obdkey 在 OBD-II 兼容性方面最有可能是正确的。请尝试使用现有应用程序来证明，如果它不起作用，则说明您的汽车或连接器有问题。

顺便说一句：说明您拥有的 obd-II 适配器以及您的汽车会很有帮助。

# python - 将文件中的数据插入数据库

> ID：13764448
> 
> 赞同：1
> 
> 时间：2012-12-07T13:52:59.680
> 
> 标签：python, pyodbc

我有一个带有多个插入语句（ 1000 + ）的 .sql 文件，我想将此文件中的语句运行到我的 Oracle 数据库中。

现在，我使用带有 odbc 的 python 通过以下内容连接到我的数据库：

```
import pyodbc
from ConfigParser import SafeConfigParser

def db_call(self, cfgFile, sql):

    parser = SafeConfigParser()
    parser.read(cfgFile)
    dsn = parser.get('odbc', 'dsn')
    uid = parser.get('odbc', 'user')
    pwd = parser.get('odbc', 'pass')

    try:
        con = pyodbc.connect('DSN=' + dsn + ';PWD=' + pwd + ';UID=' + pwd)
        cur = con.cursor()
        cur.execute(sql)
        con.commit()

    except pyodbc.DatabaseError, e:
            print 'Error %s' % e
            sys.exit(1)

    finally:

        if con and cur:
            cur.close()
            con.close()

with open('theFile.sql','r') as f:
    cfgFile = 'c:\\dbinfo\\connectionInfo.cfg'
    #here goes the code to insert the contents into the database using db_call_many       
    statements = f.read()
    db_call(cfgFile,statements) 
```

但是当我运行它时，我收到以下错误：

```
pyodbc.Error: ('HY000', '[HY000] [Oracle][ODBC][Ora]ORA-00911: invalid character\n (911) (SQLExecDirectW)') 
```

但文件的所有内容只有：

```
INSERT INTO table (movie,genre) VALUES ('moviename','horror'); 
```

# 编辑

`print '<{}>'.format(statements)`在 db_db_call(cfgFile,statements) 之前添加我得到的结果（100+）：

```
<INSERT INTO table (movie,genre) VALUES ('moviename','horror');INSERT INTO table (movie,genre) VALUES ('moviename_b','horror');INSERT INTO table (movie,genre) VALUES ('moviename_c','horror');> 
```

感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:28:53.033

现在它有点澄清了 - 你有很多单独的 SQL 语句，例如`INSERT INTO table (movie,genre) VALUES ('moviename','horror');`

然后，您`cur.executescript()`比当前状态更有效（我不知道是否`pyodbc`支持 DB API 的那部分，但是出于任何原因，您不能只执行对数据库本身的执行吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:10:12.843

当您使用 read() 函数读取文件时，文件末尾的结束行 (\n) 也会被读取。我认为您应该使用 db_call(cfgFile,statements[:-1]) 来消除结束行。

# c# - 切换 ASP.NET 页面中多个内容块/窗格/面板的可见性

> ID：13764451
> 
> 赞同：0
> 
> 时间：2012-12-07T13:53:04.640
> 
> 标签：c#, javascript, jquery, asp.net, panel

我有一个 C# ASP.NET 页面 (.aspx)，它有两个主要内容区域：(1) 带有文本字段的表单（新项目）和 (2) 网格控件（项目列表）。很简单，用户可以填写表格来创建一个新的项目，他们可以看到一个项目列表来查看/编辑/删除。他们单击查看，然后页面发回以使用项目数据填写表单。

目前，它们都是可见的并且堆叠 (1) 在 (2) 的顶部。我想将其拆分为两个不同的面板，可以通过按钮或 css 选项卡等切换其可见性。

当 panel_1 显示时， panel_2 不应该显示（反之亦然）。显然，我可以直接使用 JavaScript 轻松实现这一点（例如，jQuery 单击事件绑定到按钮或锚点等），但是绑定网格控制按钮事件（查看/编辑/删除）以显示正确的面板可能会变得混乱 - 即填写表格>>点击添加项目>>显示项目列表面板（例如）。我想我可以在回发时将一些状态参数弹出到 URL 中，然后将该数据绑定到一些局部变量，以便知道应该显示哪个面板，但我确信有更好的方法。

将来我可能希望有 3/4/5 个相关的内容面板可以切换，无论是一个表单拆分多个面板，还是一个表单和三种不同的数据显示方式（列表/图表/等）。

有没有一种干净的 ASP.NET (3.5) 方法来做到这一点（即将每个内容块包装在一个控件中并保持对 UI 的严格控制）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:09:25.230

您可以为此使用[ASP.Net Ajax Accordion](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/Accordion/Accordion.aspx)。

**ASP.Net Ajax Accordion：** Accordion 是一种 Web 控件，允许您提供多个窗格并一次显示一个。这就像有几个 CollapsiblePanel，一次只能展开一个。Accordion 被实现为一个包含 AccordionPane web 控件的 web 控件。每个 AccordionPane 控件都有一个用于其 Header 和 Content 的模板。我们跟踪选定的窗格，使其在回发中保持可见。

另外，你可以试试：

[**jQuery UI Accordion：**](http://jqueryui.com/accordion/)单击标题以展开/折叠分成逻辑部分的内容，就像选项卡一样。（可选）在鼠标悬停时切换部分打开/关闭。

**jQuery UI 手风琴示例代码：**

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Accordion - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        $( "#accordion" ).accordion();
    });
    </script>
</head>
<body>

<div id="accordion">
    <h3>Section 1</h3>
    <div>
        <p>
        Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
        ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
        amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
        odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
        </p>
    </div>
    <h3>Section 2</h3>
    <div>
        <p>
        Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet
        purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor
        velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In
        suscipit faucibus urna.
        </p>
    </div>
    <h3>Section 3</h3>
    <div>
        <p>
        Nam enim risus, molestie et, porta ac, aliquam ac, risus. Quisque lobortis.
        Phasellus pellentesque purus in massa. Aenean in pede. Phasellus ac libero
        ac tellus pellentesque semper. Sed ac felis. Sed commodo, magna quis
        lacinia ornare, quam ante aliquam nisi, eu iaculis leo purus venenatis dui.
        </p>
        <ul>
            <li>List item one</li>
            <li>List item two</li>
            <li>List item three</li>
        </ul>
    </div>
    <h3>Section 4</h3>
    <div>
        <p>
        Cras dictum. Pellentesque habitant morbi tristique senectus et netus
        et malesuada fames ac turpis egestas. Vestibulum ante ipsum primis in
        faucibus orci luctus et ultrices posuere cubilia Curae; Aenean lacinia
        mauris vel est.
        </p>
        <p>
        Suspendisse eu nisl. Nullam ut libero. Integer dignissim consequat lectus.
        Class aptent taciti sociosqu ad litora torquent per conubia nostra, per
        inceptos himenaeos.
        </p>
    </div>
</div>

</body>
</html> 
```

# php - PHP 图片上传表单

> ID：13764460
> 
> 赞同：0
> 
> 时间：2012-12-07T13:53:22.910
> 
> 标签：php

我有一个非常基本的表单，可以将图像发布到 PHP 脚本，我使用它将图像上传到我的服务器。

我遇到的问题是，当我稍后返回表单时，我希望它记住我上传到服务器的文件。我可以通过在 cookie 中缓存输入值来处理文本输入，我可以为文件输入做类似的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T13:55:32.427

答案是不。这是由于表单记住路径时的安全隐患。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:00:46.183

正如其他人指出的那样，不是用形式。您可能能够使用 Flash 或 Java 小程序来满足您的要求，该小程序会为您上传，并且可能能够记住路径本身（例如在 cookie 中）。然而，这并不完全是轻量级的，并且会在大多数浏览器中触发一些安全弹出窗口。这可能会将用户拒之门外。

我假设您为了方便起见想要这样做，因此用户可以轻松上传多个文件。您可能希望提供拖放文件上传（例如，如本教程[http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/)中所述）。这将提高您的可用性，同时保持在浏览器安全性强制执行的范围内。

# android - 按钮高度动态

> ID：13764470
> 
> 赞同：0
> 
> 时间：2012-12-07T13:54:00.873
> 
> 标签：android

我想使用可绘制的 xml 文件创建我的按钮高度，它还应该根据我的布局动态调整大小，以便它可以支持任何 Android 设备。

目前我正在使用具有 match_parent 高度的 RelativeLayout。我想在这个布局中放置一组 3X4 按钮，并且应该根据设备高度自动调整大小。

当我使用 dp 值时，我无法正确调整它的大小。如果我为大分辨率设备调整按钮的大小，它对于 240X320 分辨率设备不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:07:21.260

是的，您应该能够使用 Android 布局类做您想做的事情。您并不完全清楚，但听起来[GridLayout](http://developer.android.com/reference/android/widget/GridLayout.html)就是您想要的。

默认的 Android UI 元素应该可以很好地处理动态调整大小；如果你有一个自定义的可绘制资源，你会想要在每个常见的显示密度下制作一个适当的 9-patch 图像（这样它不仅可以正确调整大小，而且在一系列设备上看起来都不错）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:22:59.547

我最近一直在思考这个话题，我想我可以帮助你。如果我理解正确，您希望您的应用程序根据屏幕大小动态调整按钮大小。为此，您可以使用绑定和转换器。如果您将按钮的高度（和宽度，如果您愿意）绑定到页面的高度（和宽度），您可以使用转换器将该值转换为屏幕大小的百分比。如果您愿意，我可以为您提供一些示例代码。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-07T14:03:51.973

您可以获取显示器`Display display = getWindowManager().getDefaultDisplay();`的尺寸并动态设置尺寸。

或者，您可以制作各种尺寸的图像。

# java - 哪个 assert* 用于比较 MYSQL 和 MSSQL 预迁移中的 SELECT 语句

> ID：13764477
> 
> 赞同：0
> 
> 时间：2012-12-07T13:54:33.190
> 
> 标签：java, mysql, sql, data-migration

当我将此 QUERY 发送到数据库时，我不断收到断言错误，即使当我手动将查询输入到两个数据库中时，它也会返回正确的数据。

唯一的区别是下面的列标题（左边是MYSQL，右边是MSSQL）

```
_____________________________________________
count(*)     |     (No Column Name)
_____________________________________________
43           |           43
             | 
```

这是我的 JAVA 代码

```
public class UnitTestDMUtility_Select {

@Test
public void testQUERY_CHECKBOTHPARTS() throws Exception{

    UnitTestHelper helper = new UnitTestHelper();
    Connection con = helper.getConnection(helper.sourceDBUrl);
    Connection conTarget = helper.getConnection(helper.targetDBUrl);

    PreparedStatement stmt = con.prepareStatement(DMUtility.QUERY_CHECKBOTHPARTS);
    stmt.setInt(1, 101);
    ResultSet sourceVal = stmt.executeQuery();
    //Here is the QUERY
    //select count(*) from tr_demand where demandtypeid=101
    stmt = conTarget.prepareStatement(DMUtility.QUERY_CHECKBOTHPARTS);
    stmt.setInt(1, 101);
    ResultSet targetVal = stmt.executeQuery();

    assertTrue(helper.resultSetsEqual2(sourceVal,targetVal));

}

}

package a7.unittests.dao;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;

public class UnitTestHelper {

public Connection getConnection(String url)throws Exception{
    return DriverManager.getConnection(url);
}

/*
 * Use for Insert and Update and Delete Statements
 */

public boolean resultSetsEqual4 (int source, int target){

    System.out.println("The source is: "+source+" The target is: "+target);
    if(((source>0)&&(target>0)&&(target==source)))
    {

        return true;
    }
    else
    {
        return false;
    }
}

/*
 * Used to test SELECT statements passing in objects
 */

public boolean resultSetsEqual2 (ResultSet source, ResultSet target) throws SQLException{
    System.out.println("The source is: "+source+" The target is: "+target);
    while(source.next())
    {
        target.next();
        ResultSetMetaData metadata = source.getMetaData();
        int count = metadata.getColumnCount();
        for (int i =1; i<=count; i++)
        {
            if(!source.getObject(i).equals(target.getObject(i)))
            {return false;}
        }
    }
    return true;
}

public boolean resultSetsEqual (ResultSet source, ResultSet target) throws SQLException{

System.out.println("The source is: "+source+" The target is: "+target);
while(source.next())
{
    target.next();
    ResultSetMetaData metadata = source.getMetaData();
    int count = metadata.getColumnCount();
    for (int i =1; i<=count; i++)
    {
        if(source.getObject(i) != target.getObject(i))
        {return false;}
    }
}
return true;
}
public boolean resultSetsEqual3 (ResultSet rs1, ResultSet rs2) throws SQLException {
int col = 1;
//ResultSetMetaData metadata = rs1.getMetaData();
//int count = metadata.getColumnCount();
while (rs1.next() && rs2.next()) {
    final Object res1 = rs1.getObject(col);
    final Object res2 = rs2.getObject(col);
    // Check values
    if (!res1.equals(res2)) {
        throw new RuntimeException(String.format("%s and %s aren't equal at common position %d",
            res1, res2, col));
    }
    // rs1 and rs2 must reach last row in the same iteration
    if ((rs1.isLast() != rs2.isLast())) {
        throw new RuntimeException("The two ResultSets contains different number of columns!");
    }  
}
return true;
}
} 
```

# python - 将dict转换为键列表？

> ID：13764478
> 
> 赞同：0
> 
> 时间：2012-12-07T13:54:40.677
> 
> 标签：python

Python中有没有办法在字典中生成一个键列表？例如：

```
>>>someDict = {'One': 1, 'Two': 2, 'Three': 3}
>>>someList = someDict.keys()
>>>print someList
['One', 'Two', 'Three'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T13:58:38.383

试试这个，

```
>>>someDict = {'One': 1, 'Two': 2, 'Three': 3}
>>>someList = list(someDict.keys())
>>>print(someList)
['One', 'Two', 'Three'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T13:58:18.807

在 Python 2.x`dict.keys()`中会这样做，但在 3.x 中你必须使用它，`list(dict.keys())`因为它是一个`dict_keys`对象......（即，它不是一个`list`）

当然，只是编写`mylist = list(dict)`两者都有效，因为`list`需要一个可迭代对象，而 dict 的可迭代对象是它的键......

如果您希望键的顺序`dict`与您初始化的顺序相同，则必须（以某种方式）强制它们排序，或者查看[collections.OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)

# iphone - iPhone - AVAssetWriter - 从 1920×1080 像素的照片创建电影时出错

> ID：13764484
> 
> 赞同：7
> 
> 时间：2012-12-07T13:55:09.413
> 
> 标签：iphone, ios, mobile, avassetwriter, avasset

我正在尝试从一些图片创建电影。它适用于高清图片 ({720, 1280}) 或更低分辨率。但是当我尝试用全高清图片 {1080, 1920} 创建电影时，视频被打乱了。这是一个查看它的外观的链接[http://www.youtube.com/watch?v=BfYldb8e_18](http://www.youtube.com/watch?v=BfYldb8e_18)。你有什么想法我可能做错了吗？

```
- (void) createMovieWithOptions:(NSDictionary *) options
{
@autoreleasepool {
    NSString *path = [options valueForKey:@"path"];
    CGSize size =  [(NSValue *)[options valueForKey:@"size"] CGSizeValue];
    NSArray *imageArray = [options valueForKey:@"pictures"];
    NSInteger recordingFPS = [[options valueForKey:@"fps"] integerValue];
    BOOL success=YES;
    NSError *error = nil;

    AVAssetWriter *assetWriter = [[AVAssetWriter alloc] initWithURL:[NSURL fileURLWithPath:path]
                                                           fileType:AVFileTypeQuickTimeMovie
                                                              error:&error];
    NSParameterAssert(assetWriter);

    NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   AVVideoCodecH264, AVVideoCodecKey,
                                   [NSNumber numberWithFloat:size.width], AVVideoWidthKey,
                                   [NSNumber numberWithFloat:size.height], AVVideoHeightKey,
                                   nil];

    AVAssetWriterInput *videoWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo
                                                                              outputSettings:videoSettings];

    // Configure settings for the pixel buffer adaptor.
    NSDictionary* bufferAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                      [NSNumber numberWithInt:kCVPixelFormatType_32ARGB], kCVPixelBufferPixelFormatTypeKey, nil];

    AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:videoWriterInput
                                                                                                                     sourcePixelBufferAttributes:bufferAttributes];

    NSParameterAssert(videoWriterInput);
    NSParameterAssert([assetWriter canAddInput:videoWriterInput]);

    videoWriterInput.expectsMediaDataInRealTime = NO;
    [assetWriter addInput:videoWriterInput];

    //Start a session:
    [assetWriter startWriting];
    [assetWriter startSessionAtSourceTime:kCMTimeZero];

    CVPixelBufferRef buffer = NULL;

    //convert uiimage to CGImage.

    int frameCount = 0;
    float progress = 0;
    float progressFromFrames = _progressView.progress; //only for create iflipbook movie

    for(UIImage * img in imageArray)
    {
        if([[NSThread currentThread] isCancelled])
        {
            [NSThread exit];
        }

        [condCreateMovie lock];
        if(isCreateMoviePaused)
        {
            [condCreateMovie wait];
        }

        uint64_t totalFreeSpace=[Utils getFreeDiskspace];
        if(((totalFreeSpace/1024ll)/1024ll)<50)
        {
            success=NO;
            break;
        }

        //        @autoreleasepool {
        NSLog(@"size:%@",NSStringFromCGSize(img.size));

        buffer = [[MovieWritter sharedMovieWritter] pixelBufferFromCGImage:[img CGImage] andSize:size];

        BOOL append_ok = NO;
        int j = 0;
        while (!append_ok && j < 60)
        {
            if(adaptor.assetWriterInput.readyForMoreMediaData)
            {
                CMTime frameTime = CMTimeMake(frameCount, recordingFPS);
                append_ok = [adaptor appendPixelBuffer:buffer withPresentationTime:frameTime];

                CVPixelBufferRelease(buffer);

                [NSThread sleepForTimeInterval:0.1];

                if(isCreatingiFlipBookFromImported)
                    progress = (float)frameCount/(float)[imageArray count]/2.0 + progressFromFrames;
                else
                    progress = (float)frameCount/(float)[imageArray count];

                [[NSNotificationCenter defaultCenter] postNotificationName:@"movieCreationProgress" object:[NSNumber numberWithFloat:progress]];
            }
            else
            {
                [NSThread sleepForTimeInterval:0.5];
            }
            j++;
        }
        if (!append_ok)
        {
            NSLog(@"error appending image %d times %d\n", frameCount, j);
        }
        frameCount++;

        [condCreateMovie unlock];
    }

    //Finish the session:
    [videoWriterInput markAsFinished];
    [assetWriter finishWriting];

    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
                          [NSNumber numberWithBool:success], @"success",
                          path, @"path", nil];

    [[NSNotificationCenter defaultCenter] postNotificationName:@"movieCreationFinished" object:dict];
}
} 
```

*编辑 。这是 [[MovieWritter sharedMovieWritter] pixelBufferFromCGImage:] 的代码

```
- (CVPixelBufferRef) pixelBufferFromCGImage: (CGImageRef) image andSize:(CGSize) size
{
@autoreleasepool {
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], kCVPixelBufferCGImageCompatibilityKey,
                             [NSNumber numberWithBool:YES], kCVPixelBufferCGBitmapContextCompatibilityKey,
                             nil];
    CVPixelBufferRef pxbuffer = NULL;

    CVReturn status = CVPixelBufferCreate(kCFAllocatorDefault, size.width,
                                          size.height, kCVPixelFormatType_32ARGB, (__bridge CFDictionaryRef) options,
                                          &pxbuffer);
    NSParameterAssert(status == kCVReturnSuccess && pxbuffer != NULL);

    CVPixelBufferLockBaseAddress(pxbuffer, 0);
    void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);
    NSParameterAssert(pxdata != NULL);

    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pxdata, size.width,
                                                 size.height, 8, 4*size.width, rgbColorSpace,
                                                 kCGImageAlphaNoneSkipFirst);
    NSParameterAssert(context);
    CGContextConcatCTM(context, CGAffineTransformMakeRotation(0));
    CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image),
                                           CGImageGetHeight(image)), image);
    CGColorSpaceRelease(rgbColorSpace);
    CGContextRelease(context);

    CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

     return pxbuffer;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-03T16:31:04.270

我有同样的问题，[这个答案](https://stackoverflow.com/a/9699351/1370336)解决了它：视频的大小必须是 16 的倍数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T17:57:29.400

像这样的东西如何获得像素缓冲区

```
 //you could use a cgiimageref here instead
    CFDataRef imageData= CGDataProviderCopyData(CGImageGetDataProvider(imageView.image.CGImage));
    NSLog (@"copied image data");
    cvErr = CVPixelBufferCreateWithBytes(kCFAllocatorDefault,
                                         FRAME_WIDTH,
                                         FRAME_HEIGHT,
                                         kCVPixelFormatType_32BGRA,
                                         (void*)CFDataGetBytePtr(imageData),
                                         CGImageGetBytesPerRow(imageView.image.CGImage),
                                         NULL,
                                         NULL,
                                         NULL,
                                         &pixelBuffer);
    NSLog (@"CVPixelBufferCreateWithBytes returned %d", cvErr);

    CFAbsoluteTime thisFrameWallClockTime = CFAbsoluteTimeGetCurrent();  
    CFTimeInterval elapsedTime = thisFrameWallClockTime - firstFrameWallClockTime;  
    NSLog (@"elapsedTime: %f", elapsedTime);
    CMTime presentationTime =  CMTimeMake(elapsedTime * TIME_SCALE, TIME_SCALE);

    // write the sample
    BOOL appended = [assetWriterPixelBufferAdaptor  appendPixelBuffer:pixelBuffer withPresentationTime:presentationTime];
    CVPixelBufferRelease(pixelBuffer);
    CFRelease(imageData);
    if (appended) {
        NSLog (@"appended sample at time %lf", CMTimeGetSeconds(presentationTime));
    } else {
        NSLog (@"failed to append");
        [self stopRecording];
        self.startStopButton.selected = NO;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T05:41:59.440

很确定这是硬件限制或错误。请提交雷达。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-16T21:58:30.343

您可能还想设置捕获设置预设，虽然高通常是合适的，并且默认 */ 常量使用 sessionPreset 属性定义捕获设置预设。

NSString *const AVCaptureSessionPresetPhoto;

NSString *const AVCaptureSessionPresetHigh;

NSString *const AVCaptureSessionPresetMedium;

NSString *const AVCaptureSessionPresetLow;

NSString *const AVCaptureSessionPreset352x288;

NSString *const AVCaptureSessionPreset640x480;

NSString *const AVCaptureSessionPreset1280x720;

NSString *const AVCaptureSessionPreset1920x1080;

NSString *const AVCaptureSessionPresetiFrame960x540;

NSString *const AVCaptureSessionPresetiFrame1280x720; */

//这样设置

self.captureSession.sessionPreset = AVCaptureSessionPreset1920x1080;

//或者像这样定义avcapturesession

[self.captureSession setSessionPreset:AVCaptureSessionPreset1920x1080];

# drupal - drupal_bootstrap 和子域

> ID：13764487
> 
> 赞同：0
> 
> 时间：2012-12-07T13:55:24.140
> 
> 标签：drupal, subdomain, bootstrapping

我正在开发一个使用 drupal 功能的独立应用程序，但遇到了一些麻烦。首先，我的应用程序必须检查用户是否可以访问此应用程序，如果他没有权限，则显示错误消息。如果用户已登录并具有权限，我的应用程序必须向他显示一些操作...首先我在 Apache 中创建了子域，例如我将其命名为：myapps.site.com。问题是：当未经授权的用户输入这个地址时，site.com 的主页被加载（只有没有图片的文本），不是我的页面有错误消息，但是当他打印 myapps.site.com/index.php 时一切正常并且错误消息加载。当授权用户进入此页面时，一切正常。我已经检查过，问题出在

```
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL); 
```

这是我的代码示例：

```
<?php
chdir('/www/mysite/');
require_once './includes/bootstrap.inc';
require_once './includes/form.inc';
// Here is problem
 // if I comment this and show only err message  everything is also OK
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);
global $user;
// Here I am loading additional info to check if the user has access
profile_load_profile(&$user);
echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="styles/styles.css" />
<script src="jscripts/jQuery.js"></script>
<title>app</title>
</head>
<body>';
//  here i check user priviliges
if (!$user->uid || $user->profile_is_priviliged == FALSE )
{
   echo 'some err msg';
}
else
{
    echo 'some actions';        
}
echo '</body></html>'; ?> 
```

据我了解，问题也可能会出现，因为这是子域，settings.php 中的基本路径是 site.com，默认情况下 drupal_bootstrap 加载主页的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T05:46:00.423

对于这种事情使用[http://drupal.org/project/domain ，不要自己编码。](http://drupal.org/project/domain)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T12:16:59.437

尝试从性能选项中清除缓存。还取消选中“为匿名用户缓存页面”选项，它对我有用（直到现在）

另请检查此[https://www.drupal.org/node/2333361](https://www.drupal.org/node/2333361)，如果我发现其他内容或问题再次出现，我将再次发布。

# progress-4gl - 正在进行的预定义库 4GL

> ID：13764489
> 
> 赞同：0
> 
> 时间：2012-12-07T13:55:26.300
> 
> 标签：progress-4gl, openedge

progress4GL 中是否存在任何“预定义库”？就像 C 中的 Math.h。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:56:10.743

oehive.org 上有许多有用的库。

$DLC/src 中也有一些有趣的东西。“.pl”文件是“进度库”，它们包含文件集合，只要 .pl 在 PROPATH 中，您就可以运行这些文件。

可以找到“薄弱”的地方的综合文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:47:12.463

您可以在外部库中链接，但在此之外 - 不。对所有语言元素的支持已经内置到运行 ABL 代码的虚拟机中。

# java - Selenium RC：无法执行文件选择器

> ID：13764493
> 
> 赞同：-1
> 
> 时间：2012-12-07T13:55:46.423
> 
> 标签：java, selenium, automation, selenium-rc

我正在尝试使用`selenium rc`文件选择器在第 3 方网站上自动执行一些测试，但遇到了问题。解决这个问题，我发现这是一个浏览器本机文件选择器问题。我能够处理这个问题，但现在的问题是，当我手动单击上传按钮时，文件资源管理器窗口打开，当我尝试通过 selenium 测试用例执行此操作时，即使 selenium 单击该按钮，它也不会打开

另一个问题是 selenium 仅单击并且如果我将鼠标移到该按钮上则能够找到该按钮。这是相关的代码片段：

```
public void testBox() throws Exception {
    selenium.setTimeout("10000000000");
    selenium.open("/files");
    selenium.click("id=login_button_credentials");
    selenium.waitForPageToLoad("150000");

    while(!selenium.isElementPresent("id=upload_split_arrow"))
    {
            Thread.sleep(10);
    }
    selenium.click("id=upload_split_arrow");
    while(!selenium.isElementPresent("id=upload_file1"))
    {
            Thread.sleep(10);
    }

    selenium.click("id=upload_file1");
    Thread.sleep(10000000);
    } 
```

谁能建议我一些解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:26:08.330

不要点击上传文件按钮，您只需直接输入文件路径，如下所示。

```
 selenium.type("id=upload_split_arrow","/home/test/Desktop/YourFile.txt");
 selenium.click("id=upload_file1"); 
```

我希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:48:42.707

如果元素是文件类型，你可以尝试使用 attachFile 函数。

# android - Android 应用程序主题 - 使用样式 xml 文件中的主题时的区别

> ID：13764495
> 
> 赞同：5
> 
> 时间：2012-12-07T13:55:50.367
> 
> 标签：android, android-manifest, android-theme

为什么在 AndroidManifest.xml 中定义的主题与从 styles.xml 中获取的主题之间存在差异？

1）AndroidManifest.xml：

```
<application ... android:theme="@android:style/Theme.Black"> 
```

2) AndroidManifest.xml

```
<application ... android:theme="@style/AppTheme"> 
```

样式.xml

```
<resources>
  <style name="AppTheme" parent="@android:style/Theme.Black" />
</resources> 
```

第一种设置提供黑色主题，没有操作栏。第二个有深色操作栏和浅色菜单。

**编辑：**选项 1) 和 2) - 注意 Menu 和 ActionBar

![在此处输入图像描述](../Images/d6dbaa2a242a0b8d7e1b95d27e9e7c65.png) ![在此处输入图像描述](../Images/0a7d78cb41ad2cb8b8f9bec331f14e5b.png)

**编辑2：**

**为什么第二个选项实际上不使用 AppTheme (Theme.Black) ？**（在 SGS3 上测试）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-01T01:49:08.277

您可能有另一个`styles.xml`文件，可能在“values-v11”之类的目录下，它定义了`@style/AppTheme`不同于`@android:style/Theme.Black`您正在查看/修改的文件并优先于您正在查看/修改的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:01:46.260

`@android:style/Theme.Black`实现了由 Android（或设备制造商）实现的确切主题。但是，`@style/AppTheme`允许您在您的主题中执行自定义修改，它实际上从 android 扩展了原始*Theme.Black*，并且为了执行自定义修改，您使用样式资源。

简而言之，它就像使用*Activity*类或*YourOwnActivity类，它在**Activity*中扩展了额外的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:00:44.593

Styles.xml 使您能够创建自己的主题。在 AndroidManifest 中，您可以为应用或活动设置所需的主题。您可能想要使用系统主题或您自己的主题。您还可以在设置“父”属性时扩展其他主题。有关更多信息，请查看：

[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T23:06:11.110

你应该试着把：

```
<resources>
  <style name="AppTheme" parent="@android:style/Theme.Black" />
</resources> 
```

在一个名为的 xml 文件中`res/themes.xml`

# windows - Windows phone 7 新 Windows phone 8 操作系统版本中的应用程序

> ID：13764496
> 
> 赞同：2
> 
> 时间：2012-12-07T13:55:52.237
> 
> 标签：windows, windows-phone-7, windows-phone-7.1, windows-phone-8

我开发了一个 windows phone7 应用程序，它的目标 windows phone 操作系统版本是 7.1。

问题是，我在一些博客中看到说 windows phone 7 应用程序不适用于新的 windows phone 8。所以我想知道我的应用程序是否也适用于 windows phone 8。

因此，测试我的应用程序是否适用于新的 Windows Phone OS 版本 8 的最佳方法是什么。

提前致谢...！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:57:48.563

下载 Windows Phone 8 SDK 并将您的 .xap 部署到它并尝试。 [http://dev.windowsphone.com/en-us/downloadsdk](http://dev.windowsphone.com/en-us/downloadsdk)

它们在 WP8 中确实可以工作，但不会有那么好的性能。

# jsf - JSF h:selectonemenu 转换器验证错误值无效

> ID：13764497
> 
> 赞同：2
> 
> 时间：2012-12-07T13:56:05.737
> 
> 标签：jsf

我知道这已经被讨论了很多，我也尝试了大部分解决方案，但我仍然得到这个错误：

```
 sourceId=comboNewTaskParent[severity=(ERROR 2), summary=(comboNewTaskParent: Validation Error: Value is not valid), detail=(comboNewTaskParent: Validation Error: Value is not valid)] 
```

这是 HTML 的代码：

```
 <h:outputLabel value="Parent task" for="comboNewTaskParent" />
                            <div class="formRight">
                                <h:selectOneMenu id="comboNewTaskParent" value="#{taskController.parentTask}" converter="#{taskConverter}"
                                    <f:selectItems value="#{comboTaskByProject}" var="task" itemValue="#{task}" itemLabel="#{task.taskName}" />
                                </h:selectOneMenu>
                            </div> 
```

这是我的实体 bean 的代码：

```
 package com.projectportal.entity;

import java.io.Serializable;
import javax.persistence.*;
import java.util.Date;
import java.util.List;

/**
 * The persistent class for the Task database table.
 * 
 */
@Entity
@Table(name="Task")
public class Task implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@Column(unique=true, nullable=false, length=36)
private String taskId;

@Column(length=1000)
private String taskDesc;

@Column(nullable=false)
private int taskDurationHour;

@Temporal(TemporalType.TIMESTAMP)
@Column(nullable=false)
private Date taskEstimated;

@Column(nullable=false, length=200)
private String taskName;

@Column(nullable=false)
private float taskPercentComplete;

@Temporal(TemporalType.TIMESTAMP)
@Column(nullable=false)
private Date taskStartDate;

//bi-directional many-to-one association to Priority
@ManyToOne
@JoinColumn(name="priorityId", nullable=false)
private Priority priority;

//bi-directional many-to-one association to Project
@ManyToOne
@JoinColumn(name="projectId")
private Project project;

//bi-directional many-to-one association to Status
@ManyToOne
@JoinColumn(name="statusId", nullable=false)
private Status status;

//bi-directional many-to-one association to Task
@ManyToOne
@JoinColumn(name="parentTaskId")
private Task parentTask;

//bi-directional many-to-one association to Task
@OneToMany(mappedBy="parentTask")
private List<Task> childTasks;

//bi-directional many-to-one association to Task
@ManyToOne
@JoinColumn(name="preTaskId")
private Task preTask;

//bi-directional many-to-one association to Task
@OneToMany(mappedBy="preTask")
private List<Task> dependentTasks;

//bi-directional many-to-one association to UserXTask
@OneToMany(mappedBy="task")
private List<UserXTask> userXtasks;

public Task() {
}

public String getTaskId() {
    return this.taskId;
}

public void setTaskId(String taskId) {
    this.taskId = taskId;
}

public String getTaskDesc() {
    return this.taskDesc;
}

public void setTaskDesc(String taskDesc) {
    this.taskDesc = taskDesc;
}

public int getTaskDurationHour() {
    return this.taskDurationHour;
}

public void setTaskDurationHour(int taskDurationHour) {
    this.taskDurationHour = taskDurationHour;
}

public Date getTaskEstimated() {
    return this.taskEstimated;
}

public void setTaskEstimated(Date taskEstimated) {
    this.taskEstimated = taskEstimated;
}

public String getTaskName() {
    return this.taskName;
}

public void setTaskName(String taskName) {
    this.taskName = taskName;
}

public float getTaskPercentComplete() {
    return this.taskPercentComplete;
}

public void setTaskPercentComplete(float taskPercentComplete) {
    this.taskPercentComplete = taskPercentComplete;
}

public Date getTaskStartDate() {
    return this.taskStartDate;
}

public void setTaskStartDate(Date taskStartDate) {
    this.taskStartDate = taskStartDate;
}

public Priority getPriority() {
    return this.priority;
}

public void setPriority(Priority priority) {
    this.priority = priority;
}

public Project getProject() {
    return this.project;
}

public void setProject(Project project) {
    this.project = project;
}

public Status getStatus() {
    return this.status;
}

public void setStatus(Status status) {
    this.status = status;
}

public Task getParentTask() {
    return this.parentTask;
}

public void setParentTask(Task parentTask) {
    this.parentTask = parentTask;
}

public List<Task> getChildTasks() {
    return this.childTasks;
}

public void setChildTasks(List<Task> childTasks) {
    this.childTasks = childTasks;
}

public Task getPreTask() {
    return this.preTask;
}

public void setPreTask(Task preTask) {
    this.preTask = preTask;
}

public List<Task> getDependentTasks() {
    return this.dependentTasks;
}

public void setDependentTasks(List<Task> dependentTasks) {
    this.dependentTasks = dependentTasks;
}

public List<UserXTask> getUserXtasks() {
    return this.userXtasks;
}

public void setUserXtasks(List<UserXTask> userXtasks) {
    this.userXtasks = userXtasks;
}

} 
```

控制器：

```
 public @Model class TaskController {

@Inject private EntityManager em;
@Inject Identity identity;
@Inject Logger log;
@Inject Event<Task> taskEventSrc;

@Named
@Produces
private List<Task> requestTaskList;

private Task parentTask;

private Task newTask;

@Produces
@Named
public Task getNewTask(){
    return this.newTask;
}
/**
 * 
 */
public TaskController() {
    // TODO Auto-generated constructor stub
}

@PostConstruct
public void loadSelfTasks(){

    // Init
    newTask = new Task();

    // Get user from DB.
    User user = em.find(User.class, identity.getUser().getId());
    requestTaskList = new ArrayList<Task>();

    // Loop user's tasks.
    for(UserXTask userTask : user.getUserXtasks()){
        requestTaskList.add(userTask.getTask());
    }

    log.info("Tasks for user: " + user.getFirstname() + " loaded.");
}

/**
 * Create task.
 * @throws Exception
 */
public void createTask() throws Exception{
    log.info("Persistencing task: " + newTask.getParentTask().getTaskId());
    em.persist(newTask);
    taskEventSrc.fire(newTask);

    newTask = new Task();
}
/**
 * @return the parentTask
 */
public Task getParentTask() {
    return parentTask;
}
/**
 * @param parentTask the parentTask to set
 */
public void setParentTask(Task parentTask) {
    this.parentTask = parentTask;
} 
```

}

当然还有转换器：

```
 @Named
/**
 * @author lastcow
 *
 */ 
```

公共类TaskConverter实现转换器{

```
@Inject EntityManager em;
@Inject Logger log;

/* (non-Javadoc)
 * @see javax.faces.convert.Converter#getAsObject(javax.faces.context.FacesContext, javax.faces.component.UIComponent, java.lang.String)
 */
@Override
public Object getAsObject(FacesContext context, UIComponent component, String value)     {
    log.info("=========== Convert to Object " + value);
    if(value.equals("0")){
        return null;
    }
    Task t =  em.find(Task.class, value);
    log.info("======== Got : " + t.getTaskName());
    return t;
}

/* (non-Javadoc)
 * @see javax.faces.convert.Converter#getAsString(javax.faces.context.FacesContext, javax.faces.component.UIComponent, java.lang.Object)
 */
@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    log.info("=========== Convert to String " + value);
    return ((Task)value).getTaskId();
} 
```

}

从记录的内容来看，转换正在正常工作，但是当我尝试提交表单时，总是抛出“验证错误：值无效”错误，我已经在这里敲了将近 2 天。

任何人请给一些建议。

顺便说一句，我尝试在 Task.java 中放置 equals 和 hashCode，也不起作用。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T19:57:23.503

> 验证错误：值无效

[当所选项目的`equals()`方法](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)没有返回`true`任何可用项目时，将引发此错误`<f:selectItem(s)>`。因此，这在技术上可能只有两个原因：

1.  `equals()`您的课程`Task`方法丢失或损坏。
2.  与表单显示的`<f:selectItems value="#{comboTaskByProject}">`初始请求相比，在表单提交的回发请求期间发生了不兼容的变化。

要解决原因 #1，请确保您了解如何`equals()`正确实施。您可以在此处找到启动示例：[实现 equals 合同的正确方法](https://stackoverflow.com/questions/3181339/right-way-to-implement-equals-contract/3181374#3181374)

要修复原因 #2，请确保`#{comboTaskByProject}`在回发期间永不卡顿。最好的办法是将它放在视图范围或更广泛的范围内，或者确保用于填充该列表的基于请求的条件通过例如使用保留在回发请求中`<f:viewParam>`。

### 也可以看看：

*   [我们的`selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)
*   [验证错误：值无效](https://stackoverflow.com/questions/9069379/validation-error-value-is-not-valid/9069660#9069660)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:50:05.217

我不确定`JSF`您使用的是哪个版本。据我所知，HTML中的转换器应该是这样使用的`converter="javax.faces.DateTime"`。这部分是在转换器类中或转换器类中`javax.faces.DateTime`定义的转换器名称。`faces-config.xml``@FacesConverter`

# xslt-2.0 - 中间有子内容的父文本

> ID：13764500
> 
> 赞同：2
> 
> 时间：2012-12-07T13:56:15.357
> 
> 标签：xslt-2.0

我有这个 XML 代码

```
<parag>blah blah blah</parag>
<parag>blah blah, refer to <linkCode code1="a" code2="b" code3="c"/> for further details.</parag> 
```

我不知道如何让链接保持在父文本的中间。以下代码

```
<xsl:for-each select="parag">
    <p><xsl:value-of select="text()"/>
        <xsl:for-each select="linkCode">
            <a href="file-{@code1}-{@code2}-{@code3}.html">this link</a>
        </xsl:for-each>
    </p>
</xsl:for-each> 
```

生产

```
<p>blah blah blah</p>
<p>blah blah, refer to for further details.<a href="file-a-b-c.html">this link</a></p> 
```

我想要的是

```
<p>blah blah blah</p>
<p>blah blah, refer to <a href="file-a-b-c.html">this link</a> for further details.</p> 
```

有任何想法吗？不，我无法控制 XML 的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:20:32.923

**只使用简单的身份规则覆盖**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" />

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="linkCode">
   <a href="file-{@code1}-{@code2}-{@code3}.html">this link</a>
 </xsl:template>

 <xsl:template match="parag">
   <p><xsl:apply-templates select="node()|@*"/></p>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（将提供的片段包装到单个顶部元素中——以获得格式良好的 XML 文档）：

```
<t>
    <parag>blah blah blah</parag>
    <parag>blah blah, refer to <linkCode code1="a" code2="b" code3="c"/> for further details.</parag>
</t> 
```

**产生了想要的正确结果**：

```
<t>
    <p>blah blah blah</p>
    <p>blah blah, refer to <a href="file-a-b-c.html">this link</a> for further details.</p>
</t> 
```

**如果你想让顶部元素不输出**：

只需添加此模板：

```
 <xsl:template match="/*"><xsl:apply-templates/></xsl:template> 
```

**所以，完整的代码变成**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" />

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="linkCode">
   <a href="file-{@code1}-{@code2}-{@code3}.html">this link</a>
 </xsl:template>

 <xsl:template match="parag">
   <p><xsl:apply-templates select="node()|@*"/></p>
 </xsl:template>
 <xsl:template match="/*"><xsl:apply-templates/></xsl:template>
</xsl:stylesheet> 
```

# ruby - 如何有效地检查传递给视图的值是 nil 还是空

> ID：13764501
> 
> 赞同：2
> 
> 时间：2012-12-07T13:56:17.870
> 
> 标签：ruby, ruby-on-rails-3.2, erb

我的 application.erb 文件中有以下代码：

```
<%= hidden_div_if(@cart.line_items.empty?, :id => "cart") do %> 
```

当我收到以下错误时，除非我加载没有收到 @cart.line_items 对象的页面，否则这工作正常：

```
undefined method `line_items' for nil:NilClass 
```

如果为空且如果为 nil ，如何重写`.erb`文件中的行以使其行为相同？`@cart.line_items``@cart`

* * *

**根据以下答案，我将代码更改为使用：**

```
<%= hidden_div_if(!@cart.nil? && @cart.line_items.empty?, :id => "cart") do %> 
```

*已更新以匹配 Baldrick 添加到此问题的评论（因为它比我的原始编辑更简洁）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:57:26.880

用于`@cart.blank?`检查它是否为 nil 或为空。该`blank?`方法是rails扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:59:34.623

Object 类的使用[`blank?`](http://api.rubyonrails.org/v2.3.8/classes/Object.html#M000024)方法。

如果对象为假、空或空白字符串，则该对象为空。例如，“”、“”、nil、[] 和 {} 为空白。例如

```
 [].blank? #true
 "".blank? #true
 "       ".blank? #true
 false.blank? #true
 {}.blank? #true
 nil.blank? #true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:04:08.420

```
<%= hidden_div_if(@cart.to_a.line_items.empty?, :id => "cart") do %> 
```

# iphone - 从滚动视图保存图像

> ID：13764505
> 
> 赞同：0
> 
> 时间：2012-12-07T13:56:33.593
> 
> 标签：iphone, objective-c, ios

请帮忙。我有这段代码可以在滚动视图中显示图像。：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSArray *imgNames = [[NSArray alloc] initWithObjects:@"ip1.jpg", @"ip2.jpg", @"ip3.jpg", @"ip4.jpg", @"ip5.jpg", @"ip6.jpg", @"ip7.jpg", @"ip8.jpg", @"ip9.jpg", @"ip10.jpg",@"ip11.jpg",@"ip12.jpg",@"ip13.jpg",@"ip14.jpg",@"ip15.jpg",@"ip16.jpg",@"ip17.jpg",@"ip18.jpg",@"ip19.jpg",@"ip20.jpg",@"ip21.jpg", nil];

    // Setup the array of UIImageViews
    NSMutableArray *imgArray = [[NSMutableArray alloc] init];
    UIImageView *tempImageView;
    for(NSString *name in imgNames) {
        tempImageView = [[UIImageView alloc] init];
        tempImageView.contentMode = UIViewContentModeScaleAspectFill;
        tempImageView.image = [UIImage imageNamed:name];
        [imgArray addObject:tempImageView];

    }
 CGSize pageSize = scrollViewBack.frame.size; // scrollView is an IBOutlet for our UIScrollView
    NSUInteger page = 0;
    for(UIView *view in imgArray) {
        [scrollViewBack addSubview:view];

        // This is the important line
        view.frame = CGRectMake(pageSize.width * page++ + 40, 0, pageSize.width - 80,  pageSize.height);
 }   

    scrollViewBack.contentSize = CGSizeMake(pageSize.width * [imgArray count], pageSize.height);

} 
```

现在，我想要一个 UILabel，它会在我滚动时显示图像名称。请帮助我，我无法实现。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:09:29.477

在你的循环中，你可以做这样的事情。阅读苹果文档。谷歌搜索如何制作标签。如果你只是尝试，学习这些东西并不难。

```
for(NSString *name in imgNames) {
    // ....

    UILabel *label = [[UILabel alloc] initWithFrame:WHEREYOUWANTIT];
    [label setText:name];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:24:20.950

在第二个循环中，您可以访问and`for`对象的索引，所以试试这个：`imgArray``imgNames`

```
int idx = [imgArray indexOfObject:view];
NSString *strName = [imgNames objectAtIndex:idx];
//create the label
label.text=strName;
//add the label in the scrollView 
```

如果您只想在显示新图像时显示标签，请将两个数组保留为 iVar，并使用[UIPageControl](http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UIPageControl_Class/Reference/Reference.html)跟踪您所在的滚动视图的哪一页。（[示例代码](http://developer.apple.com/library/ios/ipad/#samplecode/PageControl/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007795-Intro-DontLinkElementID_2)）。

# r - 如何更改同一列中的多个日期格式？

> ID：13764514
> 
> 赞同：22
> 
> 时间：2012-12-07T13:56:52.050
> 
> 标签：r, date, format

到目前为止，我得到的是一个数据框列，其中包含不同字符格式的日期。一些出现在`%d.%m.%Y`模式中，一些出现在`%m/%d/%Y`：

```
data$initialDiagnose = as.character(data$initialDiagnose)
data$initialDiagnose[1:10]

[1] "14.01.2009" "9/22/2005"  "4/21/2010" "28.01.2010" "09.01.2009" "3/28/2005" "04.01.2005" "04.01.2005" "9/17/2010" "03.01.2010" 
```

我希望它们以一种格式作为 Date() ，但 R 当然拒绝。
所以我首先尝试通过分隔符来改变它们：

```
data$initialDiagnose[grep('/', data$initialDiagnose)] = as.character.Date(data$initialDiagnose[grep('/', data$initialDiagnose)], format = '%m/%d/%Y') 
```

类似于“。” 日期。但它没有用。

如何将它们全部更改为一种格式，以便我可以使用它们？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-07T14:47:30.723

我喜欢 lubridate 的易用性：

```
library(lubridate) 

# note added ugly formats below
data <- data.frame(initialDiagnose = c("14.01.2009", "9/22/2005", 
        "4/21/2010", "28.01.2010", "09.01.2009", "3/28/2005", 
        "04.01.2005", "04.01.2005", "Created on 9/17/2010", "03 01 2010"))

mdy <- mdy(data$initialDiagnose) 
dmy <- dmy(data$initialDiagnose) 
mdy[is.na(mdy)] <- dmy[is.na(mdy)] # some dates are ambiguous, here we give 
data$initialDiagnose <- mdy        # mdy precedence over dmy
data
#   initialDiagnose
#       2009-01-14
#       2005-09-22
#       2010-04-21
#       2010-01-28
#       2009-09-01
#       2005-03-28
#       2005-04-01
#       2005-04-01
#       2010-09-17
#       2010-03-01 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-07T14:07:59.767

```
a <- as.Date(data$initialDiagnose,format="%m/%d/%Y") # Produces NA when format is not "%m/%d/%Y"
b <- as.Date(data$initialDiagnose,format="%d.%m.%Y") # Produces NA when format is not "%d.%m.%Y"
a[is.na(a)] <- b[!is.na(b)] # Combine both while keeping their ranks
data$initialDiagnose <- a # Put it back in your dataframe
data$initialDiagnose
[1] "2009-01-14" "2005-09-22" "2010-04-21" "2010-01-28" "2009-01-09" "2005-03-28" "2005-01-04" "2005-01-04" "2010-09-17" "2010-01-03" 
```

另外，这是适用于您具有三种（或更多）不同格式的情况的上述方法：

```
data$initialDiagnose
[1] 14.01.2009 9/22/2005  12 Mar 97  4/21/2010  28.01.2010 09.01.2009 3/28/2005 
Levels: 09.01.2009 12 Mar 97 14.01.2009 28.01.2010 3/28/2005 4/21/2010 9/22/2005

multidate <- function(data, formats){
    a<-list()
    for(i in 1:length(formats)){
        a[[i]]<- as.Date(data,format=formats[i])
        a[[1]][!is.na(a[[i]])]<-a[[i]][!is.na(a[[i]])]
        }
    a[[1]]
    }

data$initialDiagnose <- multidate(data$initialDiagnose, 
                                  c("%m/%d/%Y","%d.%m.%Y","%d %b %y"))
data$initialDiagnose
[1] "2009-01-14" "2005-09-22" "1997-03-12" "2010-04-21" "2010-01-28" "2009-01-09" "2005-03-28" 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2019-04-25T22:51:47.537

自从[MattBagg](https://stackoverflow.com/a/13765386/8366499)在 2012 年的回答以来，`lubridate`已经添加了`parse_date_time`专为这种情况设计的功能，并且可以在一行中解决这个问题：

```
library(lubridate) 

data <- data.frame(initialDiagnose = c("14.01.2009", "9/22/2005", 
        "4/21/2010", "28.01.2010", "09.01.2009", "3/28/2005", 
        "04.01.2005", "04.01.2005", "Created on 9/17/2010", "03 01 2010"))

parse_date_time(data$initialDiagnose, orders = c('mdy', 'dmy'))

 [1] "2009-01-14 UTC" "2005-09-22 UTC" "2010-04-21 UTC" "2010-01-28 UTC" "2009-01-09 UTC"
 [6] "2005-03-28 UTC" "2005-01-04 UTC" "2005-01-04 UTC" "2010-09-17 UTC" "2010-03-01 UTC" 
```

参数是一个字符向量，其中`orders=`包含可能的日期时间解析格式，按照它们应该被测试的顺序。因此，通过给`c('mdy', 'dmy')`lubridate 将尝试将所有字符串解析为`Month, Date, Year`格式。如果它不能成功地做到这一点（例如，由于`14.01.2009`没有第 14 个月，日期将不起作用），它将尝试列表中的下一个，直到所有字符串都被解析，或者所有订单都用完。

# css - 变换点中的空间

> ID：13764517
> 
> 赞同：0
> 
> 时间：2012-12-07T13:57:00.913
> 
> 标签：css, spaces

是否有一些 css 技巧可以让我转换空白字符，例如：

```
{[SPACE][SPACE][SPACE][SPACE]function(){} } 
```

变成这样的东西：

```
{. . . . function(){} 
```

关键是在代码块中显示不可见的字符。

但是，它不应该在某些元素中包含空格，或者使用背景图像或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:33:57.930

默认情况下，连续的空白字符在 HTML 中折叠为一个空格。因此，您首先需要使用`pre`或类似的东西才能看到几个连续的空格。

CSS 并不真正应该使字符显示为与它们不同的东西。但从技术上讲，您可以编辑字体，使其在插槽中包含一些图形字符作为空格，并通过“@font-face”使用该字体。

但是用可见字符替换空格会更明智，无论是服务器端还是客户端。

# jquery - ckEditor 没有调整大小

> ID：13764518
> 
> 赞同：0
> 
> 时间：2012-12-07T13:57:02.443
> 
> 标签：jquery, ckeditor

ckEditor 不会根据提供的尺寸或分辨率调整大小。其可编辑区域的默认高度为“200px”！如果我们尝试根据分辨率添加动态高度，它会在给定高度后中断并且不会自行调整大小。

是否有任何事件可以为我们提供任何类型的指示或标志 ckEditor 的 DOM 已完全加载。？如果这是可能的，那么我可以携带工具栏的高度和底部区域从编辑器容器中扣除它并给出计算的高度可编辑区域。

如果提供任何解决方案，那就太好了。我试过'resize'和exec'Command'

坏问题！等待正面答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:03:17.103

尝试，

var editor = CKEDITOR.replace('editor1');

editor.resize('100%', '350', true );

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T11:13:09.233

```
CKEDITOR.config.resize_enabled = false; 
```

这将从 ckeditor 中删除调整大小选项。

```
CKEDITOR.config.resize_enabled = true; 
```

这将保留 ckeditor 中的调整大小选项。

如果要指定调整大小，可以尝试以下操作。

```
CKEDITOR.config.resize_minWidth = 500;
CKEDITOR.config.resize_maxWidth = 700;
CKEDITOR.config.resize_minHeight = 300;
CKEDITOR.config.resize_maxHeight = 600; 
```

大小以像素为单位

# drupal - 尝试更改用户个人资料照片路径时出现“public://public://user-pictures 不存在”

> ID：13764529
> 
> 赞同：1
> 
> 时间：2012-12-07T13:57:55.747
> 
> 标签：drupal, drupal-7

我正在尝试更改 Drupal 7 安装中用户个人资料图片的路径，但出现以下错误：

> 目录 public://public://user-pictures 不存在或不可写。

我输入的路径只是“用户配置文件”。

我尝试使用新安装的值重置存储在数据库中的变量：

```
 UPDATE variable 
 SET value=0x733A313A2231223B 
 WHERE name = 'user_pictures'; 
```

更新成功，但问题依旧。

有谁知道如何纠正这个或这个值存储在数据库中的什么位置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:55:39.770

`user_pictures`是一个布尔变量，您可能正在寻找`user_picture_path`.

由于变量值存储在序列化的 PHP 数组中，因此使用 API 更新该路径会容易得多：

```
variable_set('user_picture_path', 'user-profiles'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T18:17:46.063

与 Clive 回答类似，您可以从命令行使用 drush：

```
drush vset user_picture_path your_path 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-21T10:14:17.010

我得到了同样的错误并且能够解决这个问题。

尝试更改用户个人资料照片路径时“<em>public://public://user-pictures 不存在”。

做了什么：导航到 “**图片目录”字段默认值为“图片”的****mysite.com/admin/config/people/accounts**，我已将目录名称更改为我的自定义目录名称“prof_images”，现在当我尝试保存设置，我开始收到上述错误。我已经交叉检查了目录名称和权限，但一切都很好。

 **我是如何解决这个问题的：导航到 Drupal 核心模块文件夹**/modules/user**并评论了以下几行：

> 块引用

if (!file_prepare_directory($picture_path, FILE_CREATE_DIRECTORY)) { form_set_error('user_picture_path', t('目录%directory不存在或不可写', array('%directory' => $picture_path))); watchdog('文件系统', '目录%directory不存在或不可写', array('%directory' => $picture_path), WATCHDOG_ERROR); }

> 块引用

清除缓存后，一切都很酷。导航到 mysite.com/admin/config/people/accounts 并将“prof_images”设置为我的用户图像目录并保存设置。这次我的设置保存没有任何问题。

然后在用户模块中取消注释上述行，一切正常。

希望这会对某人有所帮助。

谢谢**

# c# - 当我将解决方案平台更改为 x64 时未注册的 Skype dll

> ID：13764537
> 
> 赞同：0
> 
> 时间：2012-12-07T13:58:22.003
> 
> 标签：c#, .net, visual-studio-2010, skype

我正在使用`Skype4COM.dll`. 当解决方案平台设置为 x86 时没有问题。但是，当我将平台更改为 x64 时，我得到`COMException`：

> 由于以下错误，检索具有 CLSID {830690FC-BF2F-47A6-AC2D-330BCB402664} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

这里有什么问题？这是Skype的x86开发造成的吗？有没有办法将此dll用于64位解决方案平台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:04:21.310

您需要 x64 库用于使用它们的基于 64 位的应用程序。Skype 不提供 64 位兼容库。在 x64 进程中托管 x86 库是不可能的。

有关更多信息，请参阅此站点：http: [//community.skype.com/t5/Desktop-API-former-Public-API/64bit-Version-of-Skype4Com-dll/td-p/68234](http://community.skype.com/t5/Desktop-API-former-Public-API/64bit-Version-of-Skype4Com-dll/td-p/68234)

AnyCPU也不起作用。关于 x64/x86-problems 我建议阅读这篇文章： http: [//blogs.msdn.com/b/rmbyers/archive/2009/06/09/anycpu-exes-are-通常-more-trouble-then-they-重值.aspx](http://blogs.msdn.com/b/rmbyers/archive/2009/06/09/anycpu-exes-are-usually-more-trouble-then-they-re-worth.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:10:25.297

正如@Aschratt 已经说过的，在 64 位进程中托管 32 位 dll 绝不可能。

如果您的应用程序绝对需要 64 位，您可以在单独的 32 进程中运行 Skype dll，并使用（例如）命名管道（[netnamedpipebinding](http://msdn.microsoft.com/en-us/library/system.servicemodel.netnamedpipebinding.aspx)）与其通信。虽然，如果可以让您的进程保持 32 位，我会避免这种解决方案。

# java - Selenium Click Image Link 基于 Alt（包括引用）

> ID：13764539
> 
> 赞同：0
> 
> 时间：2012-12-07T13:58:25.893
> 
> 标签：java, selenium

我有一个棘手的！

我正在尝试在 Selenium 中测试图像按钮单击。这是 HTML 代码：

```
<a href="/targetPage.do?status=onOrder&"><img src="/img/buttons/showOnOrder.gif" alt="Show 'On Order'"/></a> 
```

我完全同意在 alt 文本中使用单引号并不理想/好，但出于此测试的目的，我目前无法更改代码。

我试过以下

```
selenium.click("//img[@alt=\"Show 'On Order'\"]");
selenium.click("xpath=//img[@alt='Show ''On Order''']"); 
```

但没有喜悦。请，请，请让我的一天，并建议我可以使用的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:19:15.660

试试这个 ：

```
selenium.click("//a[contains(@href,'onOrder')]/img"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:31:06.197

像这样试试

```
selenium.click("//img[contains(@alt,'Show') and contains(@alt,'On Order')]");

or

selenium.click("xpath=//img[@alt='Show \'On Order\'']");

or

selenium.click("css=img[alt*='Show'][alt*='On Order']"); 
```

# r - R中的树结构

> ID：13764543
> 
> 赞同：5
> 
> 时间：2012-12-07T13:58:33.480
> 
> 标签：r, tree

是否有在 R 中实现树结构的包？每个节点都可以有多个子节点（因此它不是二叉树）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-26T20:09:44.477

您可以使用 data.tree 包，该包可以从[CRAN](http://cran.r-project.org/web/packages/data.tree/index.html)或[github](https://github.com/gluc/data.tree)获得。它使您可以构建和修改树，并开箱即用地实现树遍历。作为同构的旁注：确实，它是使用环境实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T20:38:42.227

也许试试这个功能： [树状图](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/dendrogram.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T21:46:45.800

`data.tree`就是你要找的。

这是一个很好的起点：

**data.tree 简介**

[https://cran.r-project.org/web/packages/data.tree/vignettes/data.tree.html#trees](https://cran.r-project.org/web/packages/data.tree/vignettes/data.tree.html#trees)

# mysql - MySQL排序添加渐进式ID

> ID：13764548
> 
> 赞同：0
> 
> 时间：2012-12-07T13:59:10.820
> 
> 标签：mysql, database, ranking

我有个问题

我想用 MySQL 对我的表格内容进行排序，并将结果用作游戏中的排名表：

分数：用户 | 积分

我有这个查询：`SELECT * FROM scores ORDER BY score DESC LIMIT 0,10`

如何在查询结果中添加一列以显示带有渐进编号的每条记录？

IE

我的查询显示的内容：

```
mike        8000
al          7569
frank       7296
alex        7000
dana        6237
mark        6201
gankz       5766
mickeymouse 5420
donaldduck  5126
user        2569 
```

我希望它显示什么：

```
**1** mike 8000
**2** al 7569
**3** frank 7296
**4** alex 7000
**5** dana 6237
**6** mark 6201
**7** gankz 5766
**8** mickeymouse 5420
**9** donaldduck 5126
**10** user 2569 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:02:21.377

尝试

```
set @row_num = 0; 
SELECT @row_num := @row_num + 1 as row_index, user, points 
FROM scores ORDER BY score DESC LIMIT 0,10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:10:43.483

尝试

```
SELECT TOP 10 CONVERT(INT, ROW_NUMBER() OVER (ORDER BY Points)) AS RowRank, Users, Points FROM Scores 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:08:52.810

因为我还不能写评论，所以我想指出，在执行 select 语句时，最好不要使用 SELECT *。如果您只是获取名称和分数，请仅选择这些。

[不使用select *的原因是什么？](https://stackoverflow.com/questions/321299/what-is-the-reason-not-to-use-select)

# objective-c - 在我的应用程序中打包 brew'd 软件

> ID：13764551
> 
> 赞同：1
> 
> 时间：2012-12-07T13:59:22.040
> 
> 标签：objective-c, bundle, homebrew

我想在 OSX 应用程序中包含一些开源软件。该软件（例如 Tesseract）列出了在 OSX 上安装它的方式是通过 Homebrew。但是我需要将它分发给我的用户并且不能让他们单独安装它，但需要将它捆绑在应用程序的捆绑包中。

我怎么做？

# wcf - 通过 WCF 序列化 DTO

> ID：13764552
> 
> 赞同：0
> 
> 时间：2012-12-07T13:59:25.730
> 
> 标签：wcf, hibernate, nhibernate, serialization, dto

NHibernate 长期以来一直存在问题，我通过非最佳方式/解决方法解决了该问题。

首先，我使用 WCF REST 与我的客户端应用程序进行通信。如您所知，序列化持久化实体并不是最佳实践，而且总是会导致其他问题。因此，我总是使用 NHibernates Transformers 将我的实体映射到 DTO。问题是我有更复杂的实体，使用 Transformer 来转换它们。

如何使用转换器或任何其他休眠功能将子实体映射到子 dto？

**注意**：我不想使用像**Automapper**这样的 3rd 方。

这些是我要映射的实体和 DTO。变量名称彼此完全相同。

**实体类：**

实体类型

```
public class crmEntityType : EntityModel<crmEntityType>
{
    public crmEntityType()
    {
        Association = new List<crmEntityType>();
        Fields = new List<crmCustomField>();
    }

    public virtual int ID { get; set; }

    public virtual string Title { get; set; }

    public virtual ICollection<crmEntityType> Associations { get; set; }

    public virtual ICollection<crmCustomField> Fields { get; set; }

} 
```

自定义字段

```
 public class crmCustomField : EntityModel<crmCustomField>
{
    public virtual int ID { get; set; }

    public virtual string Name { get; set; }

    public virtual crmEntityType EntityType { get; set; }
} 
```

**DTO's**

EntityTypeDTO

```
[DataContract]
public class EntityTypeDTO
{
    [DataMember]
    public int ID { get; set; }

    [DataMember]
    public string Title { get; set; }

    [DataMember]
    public IList<CustomFieldDTO> Fields { get; set; }

    [DataMember]
    public int[] Associations { get; set; }
} 
```

CustomFieldDTO

```
[DataContract]
    public class CustomFieldDTO
{
    [DataMember]
    public int ID { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public int EntityType { get; set; }

    [DataMember]
    public int FieldType { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:33:41.193

I found my solution by spending my day and night to work it out. Finally, I've got the best solution I could find. I hope it helps someone in my condition some day.

This linq query works with just one database round-trip. I think it maps the classes in memory.

```
return (from entityType in Provider.GetSession().Query<crmEntityType>()
                .Fetch(x => x.Association)
                .Fetch(x => x.Fields)
                .AsEnumerable()
    select new EntityTypeDTO()
    {
        ID = entityType.ID,
        Title = entityType.Title,
        Association = entityType.Association.Distinct()
                               .Select(asc => asc.ID).ToArray<int>(),
        Fields = entityType.Fields.Distinct()
                               .Select(fi => new CustomFieldDTO 
                                            { ID = fi.ID, 
                                              Name = fi.Name, 
                                              Value = fi.Value, 
                                              EntityType = fi.EntityType.ID,
                                              Type = fi.Type 
                                            }).ToList()
    }).ToList(); 
```

# java - SOAPHandler 究竟在什么时候拦截传出消息

> ID：13764557
> 
> 赞同：0
> 
> 时间：2012-12-07T13:59:36.260
> 
> 标签：java, jax-ws, soaphandler

我正在使用 SOAPHandler.handleMessage(...) 拦截从客户端到服务器的输出 SOAP 消息。

我需要确认在消息发送后进行了拦截。不确定这是否真的如此。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T20:55:26.413

有一个简单的技巧可以检查您的假设。在方法中添加此代码`handleMessage`：

```
 SOAPMessage msg = ((SOAPMessageContext) context).getMessage();
    SOAPPart sp = msg.getSOAPPart();
    SOAPEnvelope env = sp.getEnvelope(); 
```

现在，当您`SOAPEnvelope`尝试替换 SOAP 消息并查看接收者收到它时会发生什么。我会破坏这个惊喜并告诉你：它会被改变 :-) 因此，你的 SOAPHandler 会在消息实际发送之前拦截它。

# linux - 如何在 ssh 中查找 linux 服务器上已使用的内存

> ID：13764558
> 
> 赞同：0
> 
> 时间：2012-12-07T13:59:47.773
> 
> 标签：linux, ssh

我有一个 1and1 专用 Linux 服务器的站点。

它有`/dev/mapper/vg-00-var`一个愚蠢的高，`148G`并且`88%`考虑到实际的网站大小只是`250MB`显然有问题。

我查看了 ftp 客户端上的服务器错误日志，没有发现任何错误。

我如何找到为什么使用 ssh 的内存使用率如此之高？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:03:56.087

尝试在命令提示符下输入

> 最佳

要找出实例所在的位置，请键入

> 哪个实例名称

喜欢

> 哪个红宝石

应该给

> /etc/红宝石

或者什么不是

# php - 从数组中删除索引

> ID：13764561
> 
> 赞同：-1
> 
> 时间：2012-12-07T14:00:04.413
> 
> 标签：php, arrays

> **可能重复：**
> [从数组中删除索引键以访问对象？](https://stackoverflow.com/questions/7629520/remove-index-key-from-array-for-accessing-to-object)

我需要能够访问该`term_id`值，但我不知道与数组关联的数字或索引。我怎样才能访问它？

我想像这样访问它`$value->term_id`，现在我需要通过将数字放在值（`$value->[26]->term_id`）之后来访问它。

```
Array
(
    [26] => stdClass Object
        (
            [term_id] => 26
            [name] => Night Life.
            [slug] => shopping-and-night-life
            [term_group] => 0
            [term_taxonomy_id] => 28
            [taxonomy] => map_categories
            [description] => Most of the late night clubs, bars and pubs in Victoria are situated downtown. Here are a few to check out:
            [parent] => 0
            [count] => 6
            [object_id] => 925
        )

) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T14:05:22.927

您可以使用`array_values()`“重置”数组索引：

```
$new = array_values($old); 
```

会导致

```
Array
(
    [0] => stdClass Object
        (
            [term_id] => 26
            [name] => Night Life.
            [slug] => shopping-and-night-life
            [term_group] => 0
            [term_taxonomy_id] => 28
            [taxonomy] => map_categories
            [description] => Most of the late night clubs, bars and pubs in Victoria are situated downtown. Here are a few to check out:
            [parent] => 0
            [count] => 6
            [object_id] => 925
        )

) 
```

不管之前的数组索引是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:03:35.043

现在它是一个数组，因此您可以像这样访问它：`$value[26]->term_id`如果您不想放置密钥，您只需要设置另一个变量等于数组中的对象：

```
$value2 = $value[26];
echo $value2->term_id; 
```

如果您不知道该值是否存在，请`26`使用 foreach。

```
foreach($value as $key => $val) {
     $term_id = $val->term_id;
} 
```

如果你知道数组中只有一个元素，你可以这样做：

```
$value2 = end($value);
$term_id = $value2->term_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:03:03.793

您必须要么搜索它，要么**编写**一个算法，使您一开始就不会丢失它。

# java - 将一个字符串中的所有整数添加到另一个字符串

> ID：13764565
> 
> 赞同：-1
> 
> 时间：2012-12-07T14:00:14.787
> 
> 标签：java, int

做这个的最好方式是什么？
假设我有一个混合了字母和数字的字符串，

```
Srting str = "ha2iwea435";
String str2 = (str Digits); 
```

我想要一个字符串，其中仅包含其他字母之间或末尾的数字。所以我的另一个字符串等于 str, 2 的第 4 个字符。我想我需要把它放在一个 for 循环中，然后附加一个带有 str2 值的列表，这样我就可以将 str2 分配给 435。
例如，

```
for(int i = 0; str.length() > i; i++){
    str2 = "";
    if(str(char_here(i).isNUMBER()) {
        for(y = i; str(char_here[y]).isNUMBER(); y++) {
          str2 += str.(char_here);
        }
    }
    List1.add(str2);
} 
```

我不知道要使用什么方法和测试。
*所以最后，我会有一个等于（“2”，“435”）的列表*

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:03:25.277

您可以使用正则表达式删除非数字字符：

```
String str = "ha2iwea435";
String numbers = str.replaceAll("[^\\d]","");
System.out.println("numbers = " + numbers); //prints 2435 
```

如果您需要列表中的每组数字，您可以按字母拆分并将每组添加到列表中：

```
String str = "ha2iwea435";
String[] numbers = str.split("[^\\d]");

List<Integer> list = new ArrayList<> ();
for (String number : numbers) {
    if (!number.isEmpty()) list.add(Integer.parseInt(number));
}
System.out.println("numbers = " + list); // numbers = [2, 435] 
```

如果您想将数字存储为字符串：

```
String str = "ha2iwea435";
String[] numbers = str.split("[^\\d]");

List<String> list = new ArrayList<> (Arrays.asList(numbers));
list.removeAll(Arrays.asList(""));
System.out.println("numbers = " + list); // numbers = [2, 435] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:09:50.953

使用正则表达式将是获取每个数字并将其存储在列表中的最简单方法。

```
Pattern pattern = Pattern.compile("\\D+");
String str = "ha2iwea435";
String[] nums = pattern.split(str);

List<Integer> values = new ArrayList<Integer>();
for(String s : nums) 
    values.add(Integer.parseInt(s));

//test
for(int i : values)
    System.out.println(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:12:52.660

```
String str = "ha2iwea435";
String [] str1=str.replaceAll("[\\D]", "").split("(?<!^)"); 
```

str1 只会给你数字数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:16:02.277

```
 ArrayList<Integer> result = new ArrayList<Integer>();
    String str = "ha2iwea435";

    Pattern p = Pattern.compile("(\\d++)");
    Matcher m = p.matcher(str);
    while (m.find()) {

        String group = m.group();

        result.add(Integer.parseInt( group)); // result [2,435]
    } 
```

结果是一个包含 2 和 435 的列表

# javascript - 为什么要留下小数

> ID：13764567
> 
> 赞同：0
> 
> 时间：2012-12-07T14:00:21.237
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 中的“双波浪号”(~~) 运算符是什么？](https://stackoverflow.com/questions/5971645/what-is-the-double-tilde-operator-in-javascript)

我的代码：

```
<SCRIPT type="text/javascript"> 

var num = 2.52;
alert(~~num);

</SCRIPT> 
```

它给出的结果为`2`。为什么要留下小数？有任何想法吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:04:07.737

这是一个解释[http://james.padolsey.com/javascript/double-bitwise-not/](http://james.padolsey.com/javascript/double-bitwise-not/)

> 按位非运算符 (~) 将获取其操作数，将其转换为 32 位整数，并将反转每个位，使每个 0 变为 1，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:03:36.633

我发现这个有用的资源：

[http://www.joezimjs.com/javascript/great-mystery-of-the-tilde/](http://www.joezimjs.com/javascript/great-mystery-of-the-tilde/)

莱昂

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:03:56.007

JavaScript 中的每个按位运算都会[将其参数转换为有符号的 32 位整数](http://es5.github.com/#x9.5)。这将去掉你的小数。否则，您可能期望双[按位 NOT 不会](http://es5.github.com/#x11.4.8)产生不变的参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:05:42.900

只需删除波浪号 (~)。

```
<SCRIPT type="text/javascript"> 

var num = 2.52;
alert(num);

</SCRIPT> 
```

# android - Android 应用程序自行关闭（带有选项卡和选项卡组的应用程序）

> ID：13764570
> 
> 赞同：-1
> 
> 时间：2012-12-07T14:00:31.800
> 
> 标签：android, android-intent, tabs

我有这段代码一直有效到今天：

```
 // primo accesso
            Intent previewMessage = new Intent(getParent(), InventarioNoPassword.class);
            TabGroupActivity parentActivity = (TabGroupActivity)getParent();
            finish();
            parentActivity.startChildActivity("InventarioNoPassword", previewMessage); 
```

当我进入 InventarioNoPassword 时，应用程序会运行，但它会在大约一秒钟内自行关闭。我不知道为什么。我在标签组中工作。更好：我的应用带有标签，一个标签是标签组。此代码位于选项卡组启动的第一个活动中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:25:37.860

*   使用这个或 getApplicationContext()，而不是 getParent()；

*   调用完成（）；在你开始新的活动之后。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T04:33:15.000

问题是你只是去孩子活动，但不需要**完成**当前的父母活动。如果您完成了当前的家长活动，那么它不会从您的孩子那里返回给您的家长。只需删除 finish() 并尝试。

# asp.net-mvc - 在 MVC 页面上显示 SharePoint 2010 文档库的内容

> ID：13764572
> 
> 赞同：0
> 
> 时间：2012-12-07T14:00:37.180
> 
> 标签：asp.net-mvc, sharepoint, sharepoint-2010, sharepointdocumentlibrary

我已经为此苦苦挣扎了一段时间，在互联网或论坛等上找不到任何有用的信息。

基本上，我被要求将 SharePoint 2010 文档库的内容输出到标准 MVC 网页上。

这是我的代码：

```
public class HomeController : Controller
{
  public ActionResult Index()
  {
    using (ClientContext site = new ClientContext("Http://MySPSite"))
    {
      List list = site.Web.Lists.GetByTitle("MyList");    
      site.Load(list);
      site.ExecuteQuery();
    }

    return View();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:19:49.640

我设法提取了我想使用以下内容的列表项

```
public ActionResult Index()
        {
            ViewData["Message"] = "Welcome to ASP.NET MVC!";
            List<string> documentTitles = new List<string>();
            using (ClientContext context = new ClientContext("http://siteurl"))
            {
                List list = context.Web.Lists.GetByTitle("doctest");
                context.Load(list);
                CamlQuery query = new CamlQuery();
                query.ViewXml = "<View/>";
                ListItemCollection listItems  = list.GetItems(query);
                context.Load(list);
                context.Load(listItems);
                //context.Load(listItems ,items => items.Include(
                //    item=>item["FileLeafRef"] 
                //    ));
                context.ExecuteQuery();
                foreach (ListItem item in listItems )
                {                    
                    documentTitles.Add(item["FileLeafRef"].ToString());
                }
            }
            return View(documentTitles);
        } 
```

FileLeafRef 是“名称”列的内部名称。

我注释掉了 include FileLeafRef，因为它默认包含在内，但您可能需要它用于其他列。

由于您使用的是客户端库，因此这也需要在 .NET 3.5 中完成。

您将需要用您想要的数据填充一个对象并将其传递给视图（如果您不知道这一点，您应该查看一些 mvc 示例。从您的示例中，我无法判断您是否知道 mvc 或是否知道您只是发布代码来演示 SharePoint 问题）

您可能还必须设置上下文凭据

```
context.Credentials = new NetworkCredentials("Username", "Password", "Domain"); 
```

在调用执行之前。

# jquery - 使用空白类来识别元素或其他标签

> ID：13764574
> 
> 赞同：2
> 
> 时间：2012-12-07T14:00:39.710
> 
> 标签：jquery, html

我可以使用“空白”类来识别 dom 的常见元素以便使用 jquery 执行操作吗？我知道标签 Id 和 Name 在 dom 中必须是唯一的，但是，如果我需要识别相似的元素但不需要具有相同的样式......例如，在这种情况下：

```
<section class="custom-section identify1"></section>
<section class="custom-section identify1"></section>
<section class="custom-section identify2"></section>
<section class="custom-section identify1"></section>
<section class="custom-section identify2"></section>
<section class="custom-section identify1"></section> 
```

在这种情况下`custom-section`，设置部分的样式并将相似的部分分组... ¿ 正确吗？现在使用 jquery 我可以使用 identifyX 获取所有部分：

```
$(".identify1) 
```

我知道在 html5 中存在自定义数据属性 (Data-*)[自定义数据 HTML5](http://html5doctor.com/html5-custom-data-attributes/) 我可以将此标签用于此功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:02:46.663

是的，您可以使用“虚拟”类名，它们实际上没有在 CSS 中定义任何样式。

正确的选择器是`$(".identify1")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:11:02.630

是的，选择的数据属性会更好，然后为您的 jQuery 选择器设置一个 CSS 类。

这是使用 data-X 属性 selecotr 的示例

HTML：

```
<p data-test="">Hello</p> 
```

JS：

```
var text = $('[data-test]').text(); 
alert(text); 
```

[小提琴](http://jsfiddle.net/7cmnC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:03:06.840

是的，使用这样的类名是完全可以接受的。

类名用于指定相似的元素组。所以这很适合。

# selenium - 在创建 Augmenter 时遇到 2.26 和 2.27 Selenium 版本的错误

> ID：13764576
> 
> 赞同：3
> 
> 时间：2012-12-07T14:00:42.237
> 
> 标签：selenium

当我`Augmenter`使用 Selenium 的 2.25 版本创建（见下文）时，它曾经可以正常工作。对于 2.26 和 2.27，我收到以下错误。您能否建议 2.26+ 版本需要哪些额外功能才能让事情再次正常运行？

我收到以下错误：

> java.lang.IllegalAccessException-->Class org.openqa.selenium.remote.Augmenter$CompoundHandler 无法访问带有修饰符“protected”的类 org.openqa.selenium.firefox.FirefoxDriver 的成员启动 Firefox webdriver 时捕获异常

相关代码：

```
WebDriver driver = new FirefoxDriver();
WebDriver augmentedDriver = new Augmenter().augment(driver); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T11:25:15.543

由于较新版本的 selenium Agumenter 仅适用于 RemoteWebDriver。

[它从来没有真正支持过，但现在也不起作用](http://grokbase.com/t/gg/webdriver/12c6h5mawt/getting-an-error-with-2-26-release-while-creating-an-augmenter)

您需要 Agumenter 的哪些功能？即截图，你可以直接制作 FriefoxDriver：

```
((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE); 
```

初始化混合集线器/本地驱动程序：

```
if (useHub) {
   ...
   webDriver = new RemoteWebDriver(hubURL, desiredCapabilities);
   webDriver = new Augmenter().augment(webDriver);
} else {
   switch(webDriverType) {
      case Type.FIREFOX:
         webDriver = new FirefoxDriver();
      }
} 
```

然后正常使用 webDriver

# c# - 提高 WPF 数据网格性能

> ID：13764579
> 
> 赞同：39
> 
> 时间：2012-12-07T14:00:50.100
> 
> 标签：c#, wpf, datagrid, wpfdatagrid

在我的`.NET 3.5` `WPF`应用程序中，我有一个`WPF` `DataGrid`将填充 500 列和 50 行的内容。应用程序的性能在滚动时非常差，或者当我这样做时`DataGrid.Items.Refresh()`或在选择行时。

实际上 App 大约需要 20 秒来更新布局。`Layout_Updated()`事件将在 20 秒后触发。

如果我将列减少到 50 或更少，应用程序将非常敏感。根据我的发现，性能与列数直接相关。

如何提高`DataGrid`性能？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-12-07T14:32:35.170

您可以打开几个选项来帮助您处理**DataGrid**对象

```
EnableColumnVirtualization = true
EnableRowVirtualization = true 
```

这两个是我认为可能有帮助的主要内容。接下来尝试使您的绑定异步

```
ItemsSource="{Binding MyStuff, IsAsync=True}" 
```

最后，我听说设置最大高度和宽度会有所帮助，即使它高于最大屏幕尺寸，但我自己并没有注意到差异（声称与自动尺寸测量有关）

```
MaxWidth="2560"
MaxHeight="1600" 
```

也永远不要把 a 放在 a`DataGrid`中`ScrollViewer`，因为你基本上会失去虚拟化。让我知道这是否有帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-12-12T06:04:15.860

检查您是否`ScrollViewer.CanContentScroll`设置了属性`False`。将此属性设置为 false 会以某种方式禁用虚拟化，从而降低数据网格的性能。有关更多说明，请参阅此[CanContentScroll](https://wpf.2000things.com/tag/cancontentscroll/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-11T17:04:22.867

设置`DataGrid.RowHeight`值，这将产生巨大的影响。

我知道这是一个非常古老的问题，但我只是遇到了它，这是我最大的不同。我的默认高度是 25。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-24T16:06:21.273

### 第 1 步：从 2 分钟到 10 秒

这个答案（[Set ScrollViewer.CanContentScroll to True](https://stackoverflow.com/a/41094994/1574221)）让我走上了正轨。但我需要将其设置为`false`. 为了将它设置为`true`当我进行刷新时，我编写了这两种方法。

```
internal static void DataGridRefreshItems(DataGrid dataGridToRefresh)
{
    /// Get the scrollViewer from the datagrid
    ScrollViewer scrollViewer = WpfToolsGeneral.FindVisualChildren<ScrollViewer>(dataGridToRefresh).ElementAt(0);
    bool savedContentScrollState = scrollViewer.CanContentScroll;
    scrollViewer.CanContentScroll = true;

    dataGridToRefresh.Items.Refresh();

    /// Was set to false, restore it
    if (!savedContentScrollState)
    {
        /// This method finishes even when the update of the DataGrid is not 
        /// finished. Therefore we use this call to perform the restore of
        /// the setting after the UI work has finished.
        Dispatcher.CurrentDispatcher.BeginInvoke(new Action(() => SetScrollViewerCanContentScrollFalse(scrollViewer)), DispatcherPriority.ContextIdle, null);
    }
}

private static void SetScrollViewerCanContentScrollFalse(ScrollViewer scrollViewer)
{
    scrollViewer.CanContentScroll = false;
} 
```

这是我用来获取 VisualChildren 的方法：

```
public static IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
{
    if (depObj != null)
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
        {
            DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
            if (child != null && child is T)
            {
                yield return (T)child;
            }

            foreach (T childOfChild in FindVisualChildren<T>(child))
            {
                yield return childOfChild;
            }
        }
    }
} 
```

在此之后，我刷新 50.000 个新项目仅持续 10 秒，与 2 分钟不同，并且仅消耗 2 MB 的 RAM 而不是之前的 4 GB。

### 第 2 步：从 10 秒到 0.5 秒

为了测试，我禁用了我`IValueConverter`直接绑定的所有和实现的属性。如果没有转换器，DataGrid 会立即刷新。所以我离开了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T14:06:06.957

也许试试这个而不是一次加载所有 50 行

[http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization](http://www.codeproject.com/Articles/34405/WPF-Data-Virtualization)

# grails - Groovy，Grails 链式闭包的问题

> ID：13764580
> 
> 赞同：1
> 
> 时间：2012-12-07T14:00:50.223
> 
> 标签：grails, groovy

我很难过，我们将不胜感激。

1）这有效

```
def critQuery = Vlan.createCriteria()
def criteria = criteriaUtil.aproxFilterClosure.curry(Vlan, params)
vlanList = critQuery(criteria) 
```

2）这也有效

```
def critQuery = Vlan.createCriteria()
def criteria = {eq('dot1qId', 121.toLong())}
def ordering = {order('name','asc')}
def query = criteria << ordering
vlanList = critQuery(query) 
```

3）但这不起作用

```
def critQuery = Vlan.createCriteria()
def criteria = criteriaUtil.aproxFilterClosure.curry(Vlan, params)
def ordering = {order('name','asc')}
def query = criteria << ordering
vlanList = critQuery(query) 
```

ErrorMsg：没有方法签名：ch.ethz.id.netcenter.common.util.CriteriaUtil$_closure1.doCall() 适用于参数类型：(java.lang.Class..

```
class CriteriaUtil {
    ..
    def aproxFilterClosure = {myClass, map ->
           ...
    }
    ..
} 
```

链接这两个闭包标准和排序的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:23:11.217

问题是[“闭包总是返回一个值”](http://groovy.codehaus.org/Closures+-+Formal+Definition)。您的`criteria`闭包正在获取来自查询的上游结果`ordering`，它没有被定义为接受（Groovy 试图向它提供咖喱值 + 结果来自`ordering`，总共 3 个参数）。

解决此问题的两种潜在方法：

1.  您可以通过向您忽略的 aproxFilterClosure 添加另一个一次性参数来解决此问题。

2.  或者您可以尝试将其包装成这样：

    ```
    def x = {Object [] s-> criteria(Arrays.asList(s).subList(0, criteria.maximumNumberOfParameters))} 
    ```

    这将接受任意数量的参数，然后仅使用它可以处理的参数调用您的条件闭包。

我并不是说我喜欢这些想法中的任何一个，但如果这条道路是你前进的道路，它们可能会让你克服你所看到的具体错误。

# algorithm - 通过 DFS 在图中查找强连通分量

> ID：13764583
> 
> 赞同：10
> 
> 时间：2012-12-07T14:01:05.530
> 
> 标签：algorithm, graph

我正在阅读有关 BFS 和 DFS 的图形算法。当我在分析通过 DFS 在图中找到强连通分量的算法时，我想到了一个疑问。为了找到强连接组件，书（Coremen）做了什么，首先它在图上运行 DFS 以获得顶点的完成时间，然后再次在图的转置上运行 DFS，以完成时间的递减顺序我们从第一个 DFS 得到的。但我无法理解为什么第二个 DFS 必须根据完成时间运行。我的意思是，即使我们直接在图的转置上运行 DFS（忽略完成时间），它是否也会给我们连接的组件，因为通过进行转置，我们已经阻止了到其他组件的路径。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-07T19:15:49.290

编辑-这是斯坦福大学关于该主题的一些很好的深入视频：

[http://openclassroom.stanford.edu/MainFolder/CoursePage.php?course=IntroToAlgorithms](http://openclassroom.stanford.edu/MainFolder/CoursePage.php?course=IntroToAlgorithms)（参见 6\. 有向图中的连接性）

我的解释：

如果您不根据第一个 dfs 的减少完成时间运行第二个 dfs，您可能会错误地将整个图识别为单个强连通分量 (SCC)。

![在此处输入图像描述](../Images/8902cf9f977070baf4bfbc40a888644a.png)

请注意，在我的示例中，节点`d`始终具有从第一个 dfs 开始的最低完成时间。节点`a`、`b`或之一`c`将具有最长的完成时间。让我们假设`a`完成时间最长，因此如果我们根据减少的完成时间运行第二个 dfs，`a`将是第一个。

现在，如果您`d`在 的转置中以 node 开始运行第二个 dfs `G`，您将生成一个包含整个图的深度优先森林，因此得出整个图是 SCC 的结论，这显然是错误的。但是，如果您以 dfs 开头`a`，那么您不仅会发现`a`、`b`和`c`, 是一个 SCC，而且重要的部分是*它们将被标记为已访问*，并被涂成灰色或黑色。然后，当您继续 dfs on 时`d`，您不会遍历其 SCC，因为您会意识到其相邻节点已被访问。

如果您查看 DFS 的 cormens 代码，

```
DFS(G)
1 for each vertex u in G.V
2     u.color = WHITE
3     u.π = NIL
4 time = 0
5 for each vertex u in G.V
6     if u.color == WHITE
7         DFS-VISIT(G, u)

DFS-VISIT(G, u)
1 time = time + 1 // white vertex u has just been discovered
2 u.d = time
3 u.color = GRAY
4 for each v in G.adj[u]
5     if v.color == WHITE
6         v.π = u
7         DFS-VISIT(G, u)
8 u.color = BLACK // blacken u; it is finished
9 time = time + 1
10 u.f = time 
```

如果你不使用递减完成时间，那么 DFS 的第 6 行只会为真一次，因为 DFS-VISIT 会递归地访问整个图。这会在深度优先森林中产生一棵树，每棵树都是一个 SCC。单棵树的原因是因为一棵树是由它的根节点标识的，它的根节点有一个 nil 前辈。

# php - 移动产品描述 php - Probs

> ID：13764586
> 
> 赞同：1
> 
> 时间：2012-12-07T14:01:15.420
> 
> 标签：php, zen-cart

任何帮助深表感谢。我一直试图将产品描述移至 zencart 中的价格以下，但描述无法显示。问题是我哪里错了。感谢您寻找乔恩

我移动的行是：

```
<div class="listingDescription">' . zen_trunc_string(zen_clean_html(stripslashes(zen_get_products_description($listing->fields['products_id'], $_SESSION['languages_id']))), PRODUCT_LIST_DESCRIPTION) . '</div> 
```

原始代码是：

```
    如果（isset（$_GET['manufacturers_id']））{
$lc_text = 'fields['products_id']), 'cPath=' 。(($_GET['manufacturers_id'] > 0 and $_GET['filter_id']) > 0 ? zen_get_generated_category_path_rev($_GET['filter_id']) : ($_GET['cPath'] > 0 ? zen_get_generated_category_path_rev($_GET[ 'cPath']) : zen_get_generated_category_path_rev($listing->fields['master_categories_id']))) 。'&products_id=' 。$listing->fields['products_id']) 。'">' . $listing->fields['products_name'] . '' . zen_trunc_string(zen_clean_html(stripslashes(zen_get_products_description($listing->fields['products_id'], $_SESSION['languages_id']))), PRODUCT_LIST_DESCRIPTION ) . '' ;
        } 别的 {
          $lc_text = 'fields['products_id']), 'cPath=' 。(($_GET['manufacturers_id'] > 0 and $_GET['filter_id']) > 0 ? zen_get_generated_category_path_rev($_GET['filter_id']) : ($_GET['cPath'] > 0 ? zen_get_generated_category_path_rev($_GET[ 'cPath']) : zen_get_generated_category_path_rev($listing->fields['master_categories_id']))) 。'&products_id=' 。$listing->fields['products_id']) 。'">' . $listing->fields['products_name'] . '' . zen_trunc_string(zen_clean_html(stripslashes(zen_get_products_description($listing->fields['products_id'], $_SESSION['languages_id']))), PRODUCT_LIST_DESCRIPTION ) . '';
        }
        休息;
        案例“PRODUCT_LIST_MANUFACTURER”：
        $lc_align = '';
        $lc_text = 'fields['manufacturers_id']) 。'">' . $listing->fields['manufacturers_name'] . '';
        休息;
        案例“PRODUCT_LIST_PRICE”：
        $lc_price = zen_get_products_display_price($listing->fields['products_id']) 。' 
';
        $lc_align = '对';
        $lc_text = $lc_price;

```

我尝试过的代码（页面/价格显示，但不是产品描述）：

```
 if (isset($_GET['manufacturers_id'])) {
      $lc_text = '<h3 class="itemTitle"><a href="' . zen_href_link(zen_get_info_page($listing->fields['products_id']), 'cPath=' . (($_GET['manufacturers_id'] > 0 and $_GET['filter_id']) > 0 ?  zen_get_generated_category_path_rev($_GET['filter_id']) : ($_GET['cPath'] > 0 ? zen_get_generated_category_path_rev($_GET['cPath']) : zen_get_generated_category_path_rev($listing->fields['master_categories_id']))) . '&products_id=' . $listing->fields['products_id']) . '">' . $listing->fields['products_name'] . '</a></h3>' ;
    } else {
      $lc_text = '<h3 class="itemTitle"><a href="' . zen_href_link(zen_get_info_page($listing->fields['products_id']), 'cPath=' . (($_GET['manufacturers_id'] > 0 and $_GET['filter_id']) > 0 ?  zen_get_generated_category_path_rev($_GET['filter_id']) : ($_GET['cPath'] > 0 ? zen_get_generated_category_path_rev($_GET['cPath']) : zen_get_generated_category_path_rev($listing->fields['master_categories_id']))) . '&products_id=' . $listing->fields['products_id']) . '">' . $listing->fields['products_name'] . '</a></h3>';
    }
    break;
    case 'PRODUCT_LIST_MANUFACTURER':
    $lc_align = '';
    $lc_text = '<a href="' . zen_href_link(FILENAME_DEFAULT, 'manufacturers_id=' . $listing->fields['manufacturers_id']) . '">' . $listing->fields['manufacturers_name'] . '</a>';
    break;
    case 'PRODUCT_LIST_PRICE':
    $lc_price = zen_get_products_display_price($listing->fields['products_id']) . '';
    $lc_align = 'right';
    $lc_text =  "<div style='font-size: 22px;'>".$lc_price. "</div>";
    break;
    case 'PRODUCT_LIST_DESCRIPTION':
    $lc_align = '';
    $lc_text = '<div class="listingDescription">' . zen_trunc_string(zen_clean_html(stripslashes(zen_get_products_description($listing->fields['products_id'], $_SESSION['languages_id']))), PRODUCT_LIST_DESCRIPTION) . '<br></div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:05:40.187

无需更改任何代码。相反，只需在管理->配置->产品列表中更改所需的排序顺序。

# android - GPS连接延迟

> ID：13764588
> 
> 赞同：1
> 
> 时间：2012-12-07T14:01:21.700
> 
> 标签：android, locationmanager

我创建了一个实现 LocationManager 的服务。但我有个问题。

假设我要求更新位置，但用户无法在他/她所在的位置获得任何 GPS 连接。为了节省电池寿命，如何定义我希望应用程序查找位置数据，例如 60 秒？如果发现位置低于 60 秒，则向用户显示该位置，如果达到 60 秒限制，则向用户显示该位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:23:44.493

当你打电话时`requestForLocationUpdates()`- 启动一个[60 秒的计时器](http://w2davids.wordpress.com/simple-countdowntimer-example/)。

万一`onLocationChanged()`在这个计时器完成时没有被调用 - 你也许是 Toast

* * *

*   这是[检查](https://stackoverflow.com/a/3712727/68805)是否获得正确定位的更好方法
*   在没有数据连接的情况下，请考虑在 SUPL 失败时运行更长时间的计时器。

# sql-server-2005 - SQL 舍入到 7 位，即使它设置为小数（18,4））

> ID：13764589
> 
> 赞同：0
> 
> 时间：2012-12-07T14:01:22.510
> 
> 标签：sql-server-2005, rounding

```
select (cast(datediff(minute,'1900-01-01 07:03:00.000' ,'1900-01-01 10:35:00.000')

as decimal(18,4))/60) 
```

即使小数位设置为 4，它也会返回 3.5333333 而不是 3.5333

请帮我返回 3.5333（小数点后 4 位）

[http://sqlfiddle.com/#!3/1fa93/4119/0](http://sqlfiddle.com/#!3/1fa93/4119/0)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T14:04:57.633

将 /60 放入演员表并将其更改为 60.0 以获得小数。

```
select (cast(datediff(minute,'1900-01-01 07:03:00.000' ,'1900-01-01 10:35:00.000')/60.0

as decimal(18,4))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:05:58.513

您需要在铸造之前进行除法：

```
select 
   cast(datediff(minute, '1900-01-01 07:03:00.000', '1900-01-01 10:35:00.000') / 60.0 
        as decimal(18,4)) 
```

然后你得到：

```
3.5333 
```

转换为`decimal(18,4)`然后除以 60 排序“无效”您的格式 - SQL Server 将再次显示除以 60 的所有数字精度*......*

# silverlight - 为什么 Typography.Capitals 参数被忽略？

> ID：13764590
> 
> 赞同：1
> 
> 时间：2012-12-07T14:01:32.733
> 
> 标签：silverlight, silverlight-5.0

我已经应用`SmallCaps`如下所示，但它似乎对浏览器或设计窗口没有任何影响。

```
<TextBlock Text="Text Here !" Typography.Capitals="SmallCaps"/> 
```

为什么`Typography.Capitals`忽略参数？是否需要为此启用任何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:35:09.143

**更新**
似乎要使这些属性起作用，使用的字体必须支持它们。Silverlight 无法使用字体执行魔术，它只能使用字体本身内置的功能。而且似乎不同版本的 Windows 之间存在一些差异，这使得这更加令人困惑。我在 Windows 7 和 8 上使用以下字体进行了尝试：Gabriola、Georgia、Verdana、Arial、Comic Sans MS、Calibri、Segoe UI、便携式用户界面

在 Win7 和 8 上，唯一有效的属性是 SmallCaps 和 AllSmallCaps。在 Win7 或 Win8 上，其他设置都没有任何区别。在 Windows 8 上，这两个属性适用于上面列出的所有字体。在 Windows 7 上，它们工作的唯一字体*是*Calibri 和 Gabriola。然后我开始研究安装在两台不同机器上的字体版本。事实证明它们是不同的。例如，在我的 Win7 机器上，Verdana 和 Segoe UI 的版本都是 5.05。在 Win8 机器上 Verdana 是 5.31 版，Segoe UI 是 5.28 版。

所以我认为这就是为什么我们在不同的机器上得到不同的结果。它与 Silverlight 无关，而是与客户端计算机上安装的字体版本有关。Win7 上安装的 Verdana 版本不支持 SmallCaps 和 AllSmallCaps，但 Win8 附带的版本*确实*支持。
**结束更新**

我肯定看到了 SmallCaps 和 AllSmallCaps 的不同之处。其余的值似乎没有做任何事情。我想这可能取决于使用的 FontFamily。无论如何，以下代码呈现如下屏幕截图。

```
<ContentControl FontSize="18"
                FontFamily="Segoe UI">
    <StackPanel>
        <TextBlock Text="Writing Some Text Here in the Text Block. AllPetiteCaps"
                    Typography.Capitals="AllPetiteCaps"></TextBlock>
        <TextBlock Text="Writing Some Text Here in the Text Block. AllSmallCaps"
                    Typography.Capitals="AllSmallCaps"></TextBlock>
        <TextBlock Text="Writing Some Text Here in the Text Block. Normal"
                    Typography.Capitals="Normal"></TextBlock>
        <TextBlock Text="Writing Some Text Here in the Text Block. PetiteCaps"
                    Typography.Capitals="PetiteCaps"></TextBlock>
        <TextBlock Text="Writing Some Text Here in the Text Block. SmallCaps"
                    Typography.Capitals="SmallCaps"></TextBlock>
        <TextBlock Text="Writing Some Text Here in the Text Block. Titling"
                    Typography.Capitals="Titling"></TextBlock>
        <TextBlock Text="Writing Some Text Here in the Text Block. Unicase"
                    Typography.Capitals="Unicase"></TextBlock>
    </StackPanel>
</ContentControl> 
```

![排版示例](../Images/3c7d2ad6665514d6429799f0f74edb73.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-24T12:18:55.550

我不确定 WPF 和 Silverlight 之间在这方面有多大区别，但显然对于 WPF，字体必须是 OpenType 字体。根据[wpf.2000things.com](https://wpf.2000things.com/2011/03/28/259-setting-typography-properties-for-text-rendered-with-an-opentype-font/)：

> WPF 包含一个 Typography 类，它允许为文本元素设置各种附加属性。这些属性仅影响使用 OpenType 字体呈现的文本。

在[WPF 编程第 2 版](http://shop.oreilly.com/product/9780596510374.do)中：

> WPF 支持 TrueType 和 OpenType 字体。OpenType 字体通常包含许多基本字符形状集的替代品，以支持高级印刷功能。如果您正在使用 GlyphRun 等低级文本处理功能，则可以直接使用这些替代项，通过字形索引引用它们。但是，如果您使用的是更高级别的元素，例如 TextBlock 或 FlowDocument 查看器，它们可以为您定位和使用适当的字形。您可以通过 Typography 类定义的附加属性来控制使用哪些字符形状。

# wordpress - mod_rewrite - 需要将此代码与 wordpress 匹配

> ID：13764596
> 
> 赞同：1
> 
> 时间：2012-12-07T14:02:06.070
> 
> 标签：wordpress, drupal, mod-rewrite

我想现在在 Wordpress 中从我的网站的旧 drupal 链接中删除 ?q=

我需要两件事的帮助。

首先，如何指定单词范围而不是数字，如下面的代码片段所示？一旦我这样做了，这段代码是否可以将“.../?q=postname”重定向到“.../postname”？

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_URI} ^/([0-9]+)$
RewriteRule .* http://www.mysite.com/?q=%1 [R=301,L] 
```

其次，一旦我的代码工作了，我如何将它与默认的 Wordpress mod_rewrite（如下）集成？

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:50:58.553

试试这个：

```
RewriteCond %{QUERY_STRING} ^q=(\w+)$
RewriteRule .* http://www.mysite.com/%1? [R=301,L] 
```

顺便说一句，我会首先使用 [R=302,L] 直到我确保一切都按预期工作。如果您将 301 与错误的 RewriteRule 一起使用，浏览器将缓存重定向，并且任何进一步的 RewriteRule 更改都需要您为每个代码更改重新启动浏览器以查看任何差异。

# php - 在 HTTPS 页面上使用来自 CDN 的内容

> ID：13764600
> 
> 赞同：1
> 
> 时间：2012-12-07T14:02:31.267
> 
> 标签：php, wordpress, https, cdn

我将[W3 Total Cache](http://www.w3-edge.com/)与 Amazon 的 CDN 一起使用。
它通过 HTTP 协议运行良好，但在 HTTPS 页面中，它会生成如下链接 -

```
https://cdn.mysite.com/img.gif 
```

我的问题：我怎样才能使这样的链接成为-

```
https://amazonaws.com/cdn.mysite.com/img.gif 
```

（有[一篇](http://www.w3-edge.com/weblog/2011/11/how-to-w3tc-https-ssl/)关于如何禁用 CDN 或如何使 CDN 的内容非 ssl 的文章）

# android - Android AsyncTask 助手类

> ID：13764602
> 
> 赞同：0
> 
> 时间：2012-12-07T14:02:36.397
> 
> 标签：android, android-asynctask

我目前有一个 UserFunctions 类，它执行所有用户操作，例如注册、登录等。在 UserFunctions 类中有一个 JSONParser 对象，它执行所有实际的 HTTP 调用并返回 JSONObject。

```
public class UserFunctions {

    private JSONParser jsonParser;

    private static String registerURL = Constants.registerUrl;

    // constructor
    public UserFunctions(){
        jsonParser = new JSONParser();
    }

    public JSONObject register(){
        // getting JSON Object
        JSONObject json = jsonParser.getJSONFromUrl(registerURL);
        // return json
        return json;
    }
...
} 
```

然后在我的活动类的事件处理程序中，我只需执行 UserFunctions.register()。

我的问题是，我现在想在后台线程中进行所有这些调用，同时显示一个 ProgressDialog。我知道在后台线程中运行是通过 AsyncTask 实现的。

但是我应该如何实现这种设计，以便我仍然可以在我的 Activity 类中执行 UserFunctions.register() ，所有事情都在后台线程中完成，并显示一个progressDialog。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:13:17.703

这会对你有帮助吗？

```
@Override
public void onCreate(Bundle savedInstanceState) {
     new MyAsyncTask(this).execute();
}

privateclass MyAsyncTask extends AsyncTask<String, Void, Boolean> {
    private ProgressDialog dialog;
    private Context context;

    public ProgressTask(Context context) {
        this.context= context;
        dialog = new ProgressDialog(context);
    }

    protected void onPreExecute() {
        this.dialog.setMessage("Progress start");
        this.dialog.show();
    }

    protected void onPostExecute(final Boolean success) {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }
    }

    protected Boolean doInBackground(final String... args) {
        // do you registering or whether here
        // in this model you can return a boolean to the PostExecute.
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:14:58.673

执行以下操作：

1）像这样声明你在活动类中的对话框：

```
ProgressDialog dialog; 
```

2）然后声明你 AsyncTask 如下：

```
private class RegisterUser extends AsyncTask<String,Integer,String>{
            String nessage="";
            @Override
            protected void onPreExecute(){
                dialog = ProgressDialog.show(context, "Registering user",
                            "Please wait.....");
            }

            @Override
            protected String doInBackground(String... params) {
                // provide yourcode to register the user then return message
                      return message="you are registered";
            }

            protected void onPostExecute(String result) {
                dialog.dismiss();
                            if (result.equlas("you are resgisted"))
                             // optinal if you want to do as below
                             // do something here showing toast or any thing of your prefreance  

            }
         } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T14:19:59.123

好的，进度对话框和异步任务分为两部分，您需要将 JSONparser 移动到实际的异步任务中。如果您想使用多个进度对话框，只需在调用 asynctask 之前调用它们并在它返回时关闭它们

```
private class JsonRetriever extends AsyncTask<Url, Void, JSONObject>{
            private JSONParser jsonParser;
            private ProgressDialog dialog;

    public JsonRetriever(Context c){
        dialog= new ProgressDialog(c);
        jsonParser= new JSONParser();
    }
    protected void onPreExecute() {
          dialog.setMessage("Starting retrieval");
          dialog.show();
    }
    protected JSONObject doInBackground(Url... params) {
         try{
            return jsonParser.getJSONFromUrl(params[0]);
        }catch(Exception e){
            return false;
        }
        return true;
    }
    protected void onPostExecute(final JSONObject success) {
             if (dialog.isShowing()) {
                     dialog.dismiss();
            }
      }
} 
```

然后调用这个只是做

```
public JSONObject register(){
    return new JSONRetriever(this).execute(registerURL).get();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:18:59.587

`publishProgress()`从[AsyncTask-Class](http://developer.android.com/reference/android/os/AsyncTask.html)看一下，我认为它是您正在寻找的。

此方法用于在 Background-Thread 完成某些工作时更新 UI。您可以随时在`doInBackground()`-Method 中调用它。

# jquery - 通过 IE10 中的 jQuery 在 Textarea 上的 HTML5 占位符属性

> ID：13764607
> 
> 赞同：9
> 
> 时间：2012-12-07T14:02:58.537
> 
> 标签：jquery, html, textarea, placeholder, internet-explorer-10

我想知道 Internet Explorer 10 中的一些奇怪行为。在我的页面上，我正在添加一个带有 jquery 的文本区域，包括一个占位符属性。像这样的东西：

```
$('body').append($('<textarea placeholder="Placeholder..."></textarea>')); 
```

占位符属性通常在 IE10 中工作得很好……除了这种情况。我用这个小提琴页面上已经存在的元素对其进行了测试：

[http://jsfiddle.net/Aqnt5/1/](http://jsfiddle.net/Aqnt5/1/)

如您所见，一个文本区域（动态添加的）将占位符属性视为实际值 - 我能想象到的最烦人的行为......

有谁知道这种效果，也许还有一种解决方法？提前致谢！

编辑

在您手动删除值后，我也刚刚意识到它可以按预期工作。您也可以通过将其删除`jQuery.val('')`以使其正常工作。我真的对这种行为感到困惑......但这应该是一个合适的“解决方法”。看到这个小提琴：http: [//jsfiddle.net/Aqnt5/5/](http://jsfiddle.net/Aqnt5/5/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T14:19:17.017

不幸的是，我没有 IE10 来测试它，但这适用于其他任何地方；

```
$('body').append('<textarea></textarea>');
$('textarea').attr('placeholder', 'placeholder'); 
```

只需仔细检查您的 DOCTYPE 是否适用于 HTML5

这是一个单行（这里分成几行以使其更明显），您也可以这样做 -

```
$('body')
    .append('<textarea></textarea>')
    .find('textarea')
    .attr('placeholder', 'placeholder'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T14:19:47.760

小提琴：http: [//jsfiddle.net/Aqnt5/5/](http://jsfiddle.net/Aqnt5/5/)

您可以使用 jQuery 删除该值，以使其行为正确：

```
$('body').append($('<textarea placeholder="Placeholder..."></textarea>').val('')); 
```

我不知道他们为什么首先将占位符作为一个值...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T21:36:34.803

我在使用时看到了同样的事情：http `jQuery 1.8.3`: [//jsfiddle.net/wE577/1/](http://jsfiddle.net/wE577/1/)。

但是，如果您使用高于此的版本，问题就会消失：http: [//jsfiddle.net/wE577/2/](http://jsfiddle.net/wE577/2/)。

我不知道 jQuery 以何种方式导致此错误，但更新修复了它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-07T14:08:52.140

`placeholder`是 HTML5 的保留属性，因为 HTML5 还没有定义（并且可能会发生变化），那么并非所有浏览器都支持所有功能（并且不要让我从 IE 开始）

供参考： [http ://www.w3schools.com/html5/att_textarea_placeholder.asp](http://www.w3schools.com/html5/att_textarea_placeholder.asp)

# php - 如何使用 fgetcsv 从 CSV 获取特定列？

> ID：13764610
> 
> 赞同：1
> 
> 时间：2012-12-07T14:03:03.643
> 
> 标签：php, fgetcsv

我有一件有趣的工作要完成

我有很多已转换为 CSV 的电子表格 - 这些电子表格最初是作为具有一定数量列的模板。

不幸的是，随着时间的推移，人们添加了列并删除了它们。

有没有办法可以调整以下代码以从每个 CSV 中选择某些列名

```
foreach($fileinfos as $pathname => $fileinfo) {
    if (!$fileinfo->isFile()) continue;
      if(substr($pathname,-3) == 'csv'){

            $file = fopen($pathname, "r"); 
            while ($line = fgetcsv($file,0,'^','¬')){
               echo substr($pathname,56) .'   '.$numcols.'<br>';          
             }
            fclose($file);
      }
} 
```

更新：

这是我接受的列数组

```
Array
(
    [0] => Date Raised
    [1] => QA phase
    [2] => Item ID
    [3] => Screen Number
    [4] => Reason
    [5] => Matches originals?
    [6] => Issue / Comments
    [7] => Raise with Client?
    [8] => Raised By
    [9] => Status
    [10] => TP/AS Status Initials
    [11] => TP/AS Status  date
    [12] => TP/AS Status Comment
    [13] => Retested by
    [14] => Retested date
    [15] => Retested Comment
) 
```

这是我的可用数组

```
Array
(
    [0] => Date Raised
    [1] => QA phase
    [2] => Item ID
    [3] => Screen Number
    [4] => exam 
    [5] => Reason
    [6] => Matches originals?
    [7] => Issue / Comments
    [8] => Raise with Client?
    [9] => Raised By
    [10] => Status
    [11] => TP/AS Status Initials
    [12] => TP/AS Status  date
    [13] => TP/AS Status Comment
    [14] => dd Comments
    [15] => PM Comments
    [16] => Retested by
    [17] => Retested date
    [18] => Retested Comment
) 
```

数组结合 dosnt 工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:29:31.817

```
$file = fopen($pathname, 'r');
$headers = fgetcsv($file, 0, '^', '¬');

while ($line = fgetcsv($file, 0, '^', '¬')) {
    $line = array_combine($headers, $line);

    var_dump($line);
    // access specific fields using $line['columnName']
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:31:36.730

我会尝试这样的事情：

```
$csv = array();
$columnnames = fgetcsv($fp, 1024);
while (true == ($columns = fgetcsv($fp, 1024))) {
    $row = array_combine($columnnames, $columns);
    $csv[] = $row;
} 
```

在这样的 CSV 文件上

```
id,name,email
1,benjamin,benjamin@example.com
2,rob,rob@example.com 
```

该`$csv`变量应包含如下内容：

```
1 => array(
    'id' => 1,
    'name' => 'benjamin',
    'email' => 'benjamin@example.com'
)
... 
```

# python - Numpy 和 Matplotlib 中的双变量高斯密度函数

> ID：13764613
> 
> 赞同：1
> 
> 时间：2012-12-07T14:03:15.290
> 
> 标签：python, numpy, matplotlib, normal-distribution

如何使用给定的均值和协方差矩阵在 Numpy 和 Matplotlib 中绘制双变量高斯密度函数？它可以是曲面图或等高线图。我想要一个使用不涉及单个 Sigma 的均值向量和协方差矩阵的通用解决方案。

```
mean, cov, n_samples = np.array([0.,0.]), np.array([[1.0,0.5],[0.5,1.0]]), 100 
```

谢谢，

@Aso.敏捷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:59:49.437

这是我的尝试：

```
import umpy as np
import matplotlib.pyplot as plt 
mean, cov, n_samples = np.array([0.,0.]), np.array([[1.0,0.5],[0.5,1.0]]), 100
data=np.random.multivariate_normal(mean,cov,size=n_samples)
pdf = np.zeros(data.shape[0])
cons = 1./((2*np.pi)**(data.shape[1]/2.)*np.linalg.det(cov)**(-0.5))
X, Y = np.meshgrid(data.T[0], data.T[1])
def pdf(point):
  return cons*np.exp(-np.dot(np.dot((point-mean),np.linalg.inv(cov)),(point-mean).T)/2.)
zs = np.array([pdf(np.array(ponit)) for ponit in zip(np.ravel(X), np.ravel(Y))])
Z = zs.reshape(X.shape)
fig = plt.figure()
ax3D = fig.add_subplot(111, projection='3d')
surf = ax3D.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap=cm.coolwarm,linewidth=0, antialiased=Fals)
surf.show() 
```

![](../Images/e7c3992cbeec609eac1ebe62e2946435.png)3D 曲面图显示了结果，但有点奇怪！任何评论或其他解决方案表示赞赏。

我期望（和想要）的是类似于以下内容：![在此处输入图像描述](../Images/a3be8966d75a248781c7d454625a0c05.png)

# ruby-on-rails - 对骨干咖啡-haml模板中的对象进行迭代？

> ID：13764615
> 
> 赞同：1
> 
> 时间：2012-12-07T14:03:20.947
> 
> 标签：ruby-on-rails, backbone.js, coffeescript, hamlc

我正在尝试遍历骨干集合对象并将其中一个属性打印到 haml-coffee 模板 (.hamlc) 上的未链接列表中。

在上下文中，我有一组字体。我想将每种字体的名称打印到模板上。

这是想象代码的样子：

```
%ul
  - for font in @fonts
    %li
      = font.name 
```

但是，这根本不会迭代。我可以在这个 for 循环中输入任何输入，但它根本不执行。

这是@fonts 输出到 console.log 时的样子

```
Object {0: Object, 1: Object, 2: Object, 3: Object, 4: Object…}
0: Object
_id: "50bed321dbc554c7a0000005"
data: Object
name: "Actor"
user_ids: Array[0]
__proto__: Object
1: Object
2: Object
3: Object 
```

如何迭代此对象并输出和打印模板中的每个名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:14:04.907

假设您的收藏看起来像这样

```
var fonts = new Backbone.Collection;
fonts.add([
    { name: 'arial'},
    { name: 'arial black'},
    { name: 'comic sans ms'}]); 
```

你不能只用

```
font = fonts.first()
font.name               // <--- undefined 
```

原因是因为 Backbone 模型不允许您直接操作属性。他们有setter和getter。

```
font.get 'name'         // 'arial' 
```

但回到正题，您的模板很好，您只需向它传递集合的 JSON 表示

```
var html = window.HAML.test({fonts:fonts.toJSON()});
document.getElementById('out').innerHTML = html; 
```

如果出于某种原因，您不想将 JSON 表示传递给它，您可以将模型数组传递给它，`{fonts: fonts.models}`但是您必须修改您的模板并拥有类似的东西`%li = font.get 'name'`

这是一个jsfiddle（*第一部分是coffee-haml生成的代码*）[http://jsfiddle.net/jaimem/qRMqu/2/](http://jsfiddle.net/jaimem/qRMqu/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:32:32.253

看来您应该指定要显示的 @fonts 集合的哪个属性，如下所示：

```
%ul
 - for font in @fonts.name
   %li
     = font 
```

如果您想迭代您使用的对象或集合：

```
- for name, location of @fonts
  = name + "lives in" + location 
```

（例如，如果您的字体对象具有名称和位置属性）

在您的代码中，只需将 'in' 替换为 'of' 。

# php - 400 - 卷曲中的错误请求

> ID：13764623
> 
> 赞同：6
> 
> 时间：2012-12-07T14:03:46.120
> 
> 标签：php, curl

当我尝试在 php 中向服务器发送请求时，我似乎遇到了问题。http api 请求是这样的：

`http://api.ean.com/ean-services/rs/hotel/v3/avail?minorRev14&apiKey=p9ycn9cxb2zp3k3gfvbf5aym&cid=55505&locale=en_US&hotelId=122212&stateProvinceCode=%20NV%C2%A4cyCode=USD&arrivalDate=12/27/2012&departureDate=12/28/2012&room1=2,&room2=2,18,15&room3=3,16,16,15&room4=3,&includeDetails=true&includeRoomImages=true`

我在 php 中有以下代码部分，我认为错误正在发生：

```
$url = 'http://api.ean.com/ean-services/rs/hotel/v3/avail?minorRev14';
$url .= '&apiKey=p9ycn9cxb2zp3k3gfvbf5aym';
$url .= '&cid=55505';
$url .= '&locale=' . $locale . '&hotelId=' . $hotelid . '&stateProvinceCode=' . $state . '&currencyCode=USD';

$url .= '&arrivalDate=' . $datefr . '&departureDate=' . $dateto . '&' . $details . '&includeDetails=true&includeRoomImages=true';
$header = "Accept: application/json";

$ch = curl_init();
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_ENCODING, "gzip");
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$retValue = curl_exec($ch);
$response = json_decode(curl_exec($ch));
$ee       = curl_getinfo($ch);
print_r($ee);

print_r($retValue); 
```

这是我从 print_r(curl_getinfo($ch)) 语句中得到的：

```
Array (
    [url] => http://api.ean.com/ean-services/rs/hotel/v3/avail?minorRev14&apiKey=p9ycn9cxb2zp3k3gfvbf5aym&cid=55505&locale=en_US&hotelId=122212&stateProvinceCode= NV¤cyCode=USD&arrivalDate=12/27/2012&departureDate=12/28/2012&room1=2,&room2=2,18,15&room3=3,16,16,15&room4=3,&includeDetails=true&includeRoomImages=true
    [content_type] => text/html
    [http_code] => 400
    [header_size] => 181
    [request_size] => 340
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 0
    [total_time] => 0.469
    [namelookup_time] => 0
    [connect_time] => 0.125
    [pretransfer_time] => 0.125
    [size_upload] => 0
    [size_download] => 349
    [speed_download] => 744
    [speed_upload] => 0
    [download_content_length] => 349
    [upload_content_length] => 0
    [starttransfer_time] => 0.469
    [redirect_time] => 0
    [certinfo] => Array ( )
    [redirect_url] =>
) 
```

我不确定解决方案是什么，我一直在研究这个问题一段时间，希望有人可以帮助我，谢谢:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T14:07:28.467

添加

```
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.0.3705; .NET CLR 1.1.4322)'); 
```

通过这种方式，它可以告诉它什么类型的代理（浏览器、蜘蛛等）正在请求内容。

最后，我将您的代码修改为

```
<?php 
$url ='http://api.ean.com/ean-services/rs/hotel/v3/avail?minorRev14&apiKey=p9ycn9cxb2zp3k3gfvbf5aym&cid=55505&locale=en_US&hotelId=122212&stateProvinceCode=%20NV%C2%A4cyCode=USD&arrivalDate=12/27/2012&departureDate=12/28/2012&room1=2,&room2=2,18,15&room3=3,16,16,15&room4=3,&includeDetails=true&includeRoomImages=true';

$header = array("Accept: application/json");

$ch = curl_init();
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_ENCODING, "gzip");
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.0.3705; .NET CLR 1.1.4322)');

$retValue = curl_exec($ch);
$response = json_decode(curl_exec($ch));
$ee       = curl_getinfo($ch);
print_r($ee);

print_r($retValue);
?> 
```

它对我来说很好。也可以查吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:12:49.103

有一些奇怪的东西：

&stateProvinceCode=%20NV%C2%A4cyCode=USD

```
 ^^^^^^^^^^^^^^^^^^^ 
```

[将其转换为纯 ascii](http://meyerweb.com/eric/tools/dencoder/)，即“NV¤cyCode”

从我的观点来看应该是这样的

&stateProvinceCode=NV&cyCode=USD

Just as information, what kind of error did you get from server?

# php - Laravel：如何急切加载一个下降两步的模型？

> ID：13764632
> 
> 赞同：7
> 
> 时间：2012-12-07T14:04:07.967
> 
> 标签：php, laravel

假设我的用户拥有许多属于某个计算机类型（用户-> 计算机-> 计算机类型）的计算机。

我知道我可以同时加载用户和他们的计算机：`User::with("Computer")`

我想加载所有三个。我怎样才能在 Laravel 中做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-07T14:08:32.123

要检索那么远的关系，您必须说孩子，然后说孩子与其孩子，依此类推......

```
User::with(array('computer', 'computer.type'))->find(1); 
```

用户 has_one 计算机 has_one 类型在此特定场景中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-22T14:03:29.343

尝试

```
Appointment::with('kid.parent')->get() 
```

如果每个孩子都有约会，每个孩子都有父母。

# c++ - fopen/fwrite 和多线程？

> ID：13764633
> 
> 赞同：1
> 
> 时间：2012-12-07T14:04:19.270
> 
> 标签：c++, multithreading, file, fopen

fopen/fwrite 和多线程？

一些多线程程序打开同一个文件，每个线程创建一个指向该文件的文件指针。

由特定程序创建的一个线程将在某个随机时间更新文件，而由不同程序创建的其他线程将简单地读取文件的内容。

我想如果写入线程更改文件中的内容而其他线程尝试读取内容，这会在那里创建一个赛车/数据不一致问题。

这里的问题是更新文件的线程应该编译成与创建读取文件内容的线程的程序不同的 exe 程序，因此程序内级别的线程控制变得不可能。

我的解决方案是在硬盘上创建一个非常小的“标志”文件来指示文件的 3 个状态：

1) 写入线程正在更新文件的内容；

2) reading-thread 正在读取文件的内容；

3) 1) 或 2) 都不是；

必要时使用此标志文件来阻塞线程。

这个问题有一些更紧凑/整洁的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:17:09.480

使用所有进程都知道的进程全局“命名”信号量可能更容易。另外，您可以使用线程/进程阻塞信号量机制，而不是对文件打开关闭和文件内容进行自旋循环......

# solr - 如何使 solr 同义词在使用缩写词及其全名进行搜索时获取相同的结果（相同的数字和顺序）

> ID：13764637
> 
> 赞同：2
> 
> 时间：2012-12-07T14:04:27.903
> 
> 标签：solr

1.  在中添加了以下内容`schema.xml`：

    ```
    <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true"/>
            <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
            <!-- in this example, we will only use synonyms at query time
            <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>-->
            <filter class="solr.LowerCaseFilterFactory"/>
       </analyzer>
       <analyzer type="query">
           <tokenizer class="solr.StandardTokenizerFactory"/>
           <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true"/>
           <!--<filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>-->
           <filter class="solr.LowerCaseFilterFactory"/>
       </analyzer> 
    ```

2.  `Synonym.txt`

    注意缺陷多动障碍，多动症

3.  `Re-indexed Solr`

但是当我搜索“注意力缺陷多动障碍”和“注意力缺陷多动障碍”时，结果的数量和排序是不同的。Solr 是否需要进行更多配置才能识别 synonym.txt 并为两个搜索提供相同的结果？

@dwhelan - 搜索 ms 的查询看起来像 '((drug_facet_auto:((ms*)))OR(company_facet_auto:((ms*)))OR(disease_facet_auto:((ms*))))' 和QueryResponse : {responseHeader={status=0,QTime=15,params={facet=true,q=((drug_facet_auto:((ms*)))OR(company_facet_auto:((ms*)))OR(disease_facet_auto:( (ms*)))),facet.limit=100,facet.field=[drug_facet, company_facet, disease_facet],wt=javabin,rows=0,version=2}},response={numFound=0,start=0 ,docs=[]},facet_counts={facet_queries={{!label='过去 24 小时'}发布日期:[NOW/HOUR-24HOURS TO NOW/HOUR+1HOUR]=0,{!label='过去 7 天' }publishdate:[NOW/DAY-7DAYS TO NOW/DAY+1DAY]=0,{!label='过去 30 天'}publishdate:[NOW/DAY-1MONTH TO NOW/DAY+1DAY]=0,{!label ='去年'}发布日期：[NOW/DAY-1YEAR TO NOW/DAY+1DAY]=0},facet_fields={drug_facet={},company_facet={},disease_facet={}},facet_dates={},facet_ranges={}},highlighting={},spellcheck={suggestions={correctlySpelled=false}}}

# ckeditor - CKEditor 4 updateElement 模糊

> ID：13764638
> 
> 赞同：2
> 
> 时间：2012-12-07T14:04:36.343
> 
> 标签：ckeditor

我有一个页面，其中有多个带有“.ckeditor”类的编辑器。

我正在尝试更新模糊的值，但模糊不会触发。

```
$(".ckeditor").on("blur", function() {
            console.log("blur");
            for (var i in CKEDITOR.instances) {
                console.log(i);
                CKEDITOR.instances[i].updateElement();// to update the textarea
            }
        }); 
```

任何人都知道他们是否完全改变了 ckeditor 4 中的行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-08T09:35:36.100

尝试以这样的方式添加事件

```
CKEDITOR.instances.editor1.on('blur', function(e) {
    console.log('onblur fired');
}); 
```

# .htaccess - htaccess mod_problems

> ID：13764641
> 
> 赞同：0
> 
> 时间：2012-12-07T14:04:48.137
> 
> 标签：.htaccess

我在根文件夹中有站点`www_root/`（`www.examle.com`）

有`.htaccess`：

```
RewriteEngine on  
RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
RewriteRule ^(.*)$ http://www.examle.com/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

我也在`subdomain.example.com`文件夹中有子域`www_root/subdomain`。还有`.htaccess`：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

如果我在浏览器中输入`www.example.com/subdomain`- wokring 但如果我输入 URL 之类的`subdomain.example.com`- 不起作用（仅主页）

请帮忙，我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:19:38.237

您尝试将 apache`VirtualHost`功能替换为`mod_rewrite`. 这是可能的，但不是最理想的。考虑`VirtualHost`为`subdomain.example.com`

如果您出于某种原因坚持使用`mod_rewrite`，您可以在根文件夹中进行这样的配置`.htaccess`（您应该`.htaccess`从`subdomain`文件夹中删除或移动）：

```
RewriteEngine on

# normalization of hostname
RewriteCond %{HTTP_HOST} =example.com [NC]
RewriteRule ^(.*)$ http://www.examle.com/$1 [R=301,L]

# config for www.example.com
RewriteCond %{HTTP_HOST} =www.example.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]

# config for subdomain.example.com
RewriteCond %{HTTP_HOST} =subdomain.example.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^(.*)$ subdomain/index.php?q=$1 [L,QSA] 
```

...但同样，`VirtualHost`这是更好的解决方案。

# mysql - MySQL Left Join：如果主要条件不存在，则使用备份条件仅返回一个

> ID：13764643
> 
> 赞同：0
> 
> 时间：2012-12-07T14:04:56.580
> 
> 标签：mysql, join

我看到了这个问题的变体，但它们要么不适用，要么我不明白答案。

我有两张桌子，一张是收费类型，另一种是收费。我想加入他们以获得适当的价值。我想加入费用在 startDate 和 endDate 之间以及类型上的表格。如果没有匹配项，我希望它选择类型 -1（日期条件相同）。如果没有匹配，我不希望它出现在结果中。

我最初打算做一个按“type” desc 排序的普通左连接，然后按“type”分组，相信它只会让我使用第一种类型，但我读到 MySQL 建议不要这样做，因为 group by 可能是不可预测的并不总是返回第一场比赛。

表：

```
startDate | endDate  | type | addCost
--------------------------------------
2010-01-01 2010-12-31  1     100
2010-01-01 2010-12-31  2     200
2010-01-01 2010-12-31 -1      50
2011-01-01 2012-02-20  3     350
2011-01-01 2012-02-20  1     150
2011-01-01 2012-02-20 -1      75

chargeDate | type | cost
---------------------------
2010-10-01  1     10
2010-11-01  2     20
2010-12-01  4     40
2011-02-01  3     60
2011-03-01  2     25
2011-04-01  4     25 
```

期望的结果：

```
chargeDate | type | cost | addCost
---------------------------------
2010-10-01  1     10     100
2010-11-01  2     20     200 
2010-12-01  4     40      50
2011-02-01  3     60     350
2011-03-01  2     25      75 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:52:54.487

我正在使用我试图加入的子`charges`查询`charges_types`。如果连接不成功，`type`is `null`and with `coalesce`I 设置`type_c`为`-1`，否则我设置为`type`. 然后我`charges_types`再次加入这个子查询，并在加入子句上我使用`type_c`而不是`type`：

```
select c.chargeDate, c.type, c.cost, ct.addCost
from
  (select
     charges.chargeDate,
     charges.type,
     coalesce(charges_types.type, -1) as type_c,
     charges.cost
   from
     charges left join charges_types
     on charges.chargeDate between charges_types.startDate and charges_types.endDate
       and charges.type = charges_types.type) c
  inner join charges_types ct
  on c.chargeDate between ct.startDate and ct.endDate
     and c.type_c = ct.type 
```

# ruby-on-rails - 回形针不推荐使用的方法

> ID：13764649
> 
> 赞同：4
> 
> 时间：2012-12-07T14:05:15.007
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, paperclip

我将我的 rails 应用程序`rails 2.3.14`从`rails 3.2.6`. 在我的模型中，我有以下方法从我的视图中调用以进行图像编辑。

```
def logo_geometry(style = :original)
  @geometry ||= {}
  @geometry[style] ||= Paperclip::Geometry.from_file(logo.to_file(style)) # works with s3
end 
```

当调用此方法时，会发生以下错误。

```
undefined method `to_file' for #<Paperclip::Attachment:0xd9d06e0> 
```

有什么建议可以实现`to_file`方法的功能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T06:41:29.493

回答我自己的问题。

替换`logo.to_file(style)` **为** `Paperclip.io_adapters.for(logo.styles[style])`.

所以方法会是这样的..

```
def logo_geometry(style = :original)
  @geometry ||= {}
  @geometry[style] ||= Paperclip::Geometry.from_file(Paperclip.io_adapters.for(logo.styles[style])) 
end 
```

# javascript - Firefox 上的 Window.event 目标

> ID：13764654
> 
> 赞同：0
> 
> 时间：2012-12-07T14:05:23.580
> 
> 标签：javascript, firefox, d3.js, events, dom-events

我有这段代码不适用于 Firefox：

```
button.attr("name", i).on("click",function() {
    var e = window.event;
    var target = (e.target) ? e.target: e.srcElement;
            alert(target.name);
}); 
```

我认为问题出在事件中，但我不知道如何解决。

错误信息是：

> [14:59:18.721] e 未定义@http‍://127.0.0.1:8080/Tesi/javascript/Home.js:4202

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:10:39.303

你为什么不使用参数，例如

```
button.attr("name", i).on("click",function(e) {
   var target = (e.target) ? e.target: e.srcElement;
        alert(target.name);
}); 
```

**更多信息**

```
$("#dataTable tbody tr").on("click", function(event){
   alert($(this).text());
}); 
```

根据：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:26:09.143

以这种方式附加点击处理程序将导致函数的范围被设置为按钮元素本身。因此，您可以使用 jQuery 替换整个 event.target 部分：

```
$(this).attr('name'); 
```

或原始 JavaScript：

```
this.getAttribute('name'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T14:09:15.633

您必须将 e 作为参数传递。

```
button.attr("name", i).on("click",function(e) {
    var target = (e.target) ? e.target: e.srcElement;
            alert(target.name);
}); 
```

莱昂

# windows-phone-7 - Window phone 怎么做反向地理编码？从纬度和经度获取地址？

> ID：13764655
> 
> 赞同：0
> 
> 时间：2012-12-07T14:05:24.487
> 
> 标签：windows-phone-7, geocoding, reverse-geocoding

Window phone 怎么做反向地理编码？从纬度和经度获取地址？

如果我们使用以下链接 [http://dev.virtualearth.net/REST/v1/Locations/point?includeEntityTypes=entityTypes&includeNeighborhood=includeNeighborhood&key=BingMapsKey](http://dev.virtualearth.net/REST/v1/Locations/point?includeEntityTypes=entityTypes&includeNeighborhood=includeNeighborhood&key=BingMapsKey)

它给出了正确的响应，但它也说

版权所有 © 2012 Microsoft 及其供应商。版权所有。未经微软公司明确书面许可，不得访问此 API，不得以任何方式使用、复制或传输内容和任何结果。

那么我们可以使用这项服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:10:49.967

谷歌地图 API 可用于执行此操作。对于给定的纬度/经度组合，调用 url -

```
http://maps.googleapis.com/maps/api/geocode/json?latlng=LATITUDE,LONGITUDE 
```

这将返回一个 json 对象，您可以在应用程序中处理和显示该对象。

要使用此 API，您需要访问[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)作为免费用户，您每天只能请求 2,500 次转化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:08:20.763

我会使用谷歌的网络服务。根据您每天需要做的事情，您可能需要为高级帐户付费，但如果您需要该服务，它的价格合理。

# ssrs-2008 - 报表服务器 - 访问所有用户文件夹的用户权限

> ID：13764656
> 
> 赞同：0
> 
> 时间：2012-12-07T14:05:29.113
> 
> 标签：ssrs-2008, reporting-services

我有一个应用程序 .net 搜索报表服务器上的文件夹并读取该文件夹内的报表并显示在 asp.net 页面上。asp.net 用户的权限可以很好地在网站上部署和执行。

现在，我想让用户部署在“我的报告”文件夹中，所以他们只能看到他们的报告。（用户可以访问报告服务器并使用报告生成器）。

我搜索并找不到解决方案：我想授予用户权限（与在 asp.net 服务器上运行的相同），以访问所有用户的所有“我的报告”文件夹（用户文件夹），所以我可以在网站上的用户文件夹中执行报告。

我将 asp.net 服务器用户设置为报表服务器的本地管理员，但拥有该权限的 te 用户只能看到文件夹的内容，该用户无法执行报表。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:45:18.750

我终于找到了解决方案，并且不涉及将用户添加到机器的本地管理员。

我使用了[IAuthorizationExtension](http://msdn.microsoft.com/en-us/library/microsoft.reportingservices.interfaces.iauthorizationextension.aspx)。我发现[这个](http://blogs.msdn.com/b/jameswu/archive/2008/07/15/anonymous-access-in-sql-rs-2008.aspx)为所有用户启用匿名访问的示例是一个开始。

在我的实现中，我使用了`WindowsAuthorization`，因为我想保留现有的授权并授予一个特定用户的访问权限。在所有`CheckAccess`方法上，我检查用户是否是我想要授予访问权限的用户并返回 true，否则返回`WindowsAuthorization.CheckAccess(...)`. 在接口的所有其他方法上，我也使用了`WindowsAuthorization`.

使用此解决方案，运行网站的用户可以访问报告服务的所有内容。

# javascript - Javascript继承 - 成员创建的地方

> ID：13764658
> 
> 赞同：0
> 
> 时间：2012-12-07T14:05:39.733
> 
> 标签：javascript, prototypal-inheritance

我是 JS 编程的新手，并试图理解基于原型的继承。下面是我的测试代码，我对行方法“parseParameters”有疑问。

据我所知，当我实例化类 Point 并拧紧以下内容时：

```
var p = new Point ({x: 1, y: 1});
alert(p.x); 
```

成员“x”首先在 Point 类中搜索，然后在其原型（Shape）中搜索。这样对吗？

**并质疑自己：在 Point 类或 Shape（原型）中将在哪里创建成员“x”和“y”？**

一句话：我真的应该考虑一下吗？也许这是一个微不足道的问题，无论成员在哪里创建？

```
var Shape = function () {}

Shape.prototype = {
    getParameter: function (params, name) {
        return params !== null && params !== undefined
            ? params[name]
            : 0;
    },

    parseParameters: function(params, names) {
        if (params === null || params === undefined) {
            return;
        }

        for(var i = 0; i < names.length; i++) {
            this[names[i]] = params[names[i]];
        }
    }
}

var Point = function (params) {
    this.parseParameters(params, ['x', 'y'])
}

Point.prototype = new Shape; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:17:02.913

> `p.x`
> 
> 成员“x”首先在 Point 类中搜索，然后在其原型（Shape）中搜索。这样对吗？

除此之外，[JavaScript 中没有“类”](https://stackoverflow.com/a/13418980/1048572)，是的。属性名称将首先在`p`对象本身上搜索，然后在它继承的对象中搜索（有一个内部链接）。

> 在 Point 类或 Shape（原型）中将在哪里创建成员“x”和“y”？

取决于您如何创建它们:-)

在简单的赋值中，like `p.x = 1;`（也发生在`parseParameters`' `this[names[i]] = params[names[i]]`， as 中`this === p`）属性将在`p`对象上创建。

> 我真的应该考虑一下吗？也许无论成员在哪里创建？

不，这真的很重要。如果您在原型对象上创建它们，则从该原型对象继承的所有对象都将共享相同的值。虽然这对函数很有用，但对于数据属性（例如，实例与实例之间应该有所不同）将是灾难性的`x`（`y`另请参阅[为什么我的 JavaScript 对象属性被其他实例覆盖？](https://stackoverflow.com/questions/13127589/why-are-my-js-object-properties-being-overwritten-by-other-instances?lq=1)例如）。

# c - 在寻找 C 东西而不是 C++ 时使用 Google 的提示？

> ID：13764667
> 
> 赞同：2
> 
> 时间：2012-12-07T14:06:00.323
> 
> 标签：c

每当我尝试用谷歌搜索类似（随机示例）`c udp networking library`的东西时，就会出现这种情况：

*   简单可靠的 UDP C++ 库_c++_帮酷编程问答
*   C++ 的网络框架（UDP 或 TCP）？- 堆栈溢出
*   open-network - 一个干净的、面向对象的 C++ 网络库 ...

也就是说，Google 认为我对这个查询的 C++ 页面感兴趣。**我不是。**有什么方法可以引导 Google 使用 C 页面而不是 C++ 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:07:59.833

尝试

> c udp 网络库-“c++”-“C#”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:07:39.180

您可以添加以下表达式：

```
 -"C++" 
```

在您的搜索字符串中。

```
-string 
```

谷歌使用它来过滤掉不需要的页面。请参阅[此处](http://websearch.about.com/library/cheatsheet/blgooglecheatsheet.htm)了解其他提示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T20:40:34.877

您可以通过将 C 括在引号中来帮助提示您只需要 C：

```
udp library "C" 
```

虽然这并不能完全解决这个烦人的问题，但它在某些搜索中确实有帮助。

通常，更多特定于 C 的结果将在第一页中，并且在某些情况下，您通常只获得 C++/C# 内容，您将获得一两个正确的 C 结果。

另请注意，将“C”放在开头或结尾并不总是以相同的方式优先考虑结果......（尝试两者;-)

# clearcase - 清除案例；如何使用 cleartool 制作基线

> ID：13764669
> 
> 赞同：3
> 
> 时间：2012-12-07T14:06:04.140
> 
> 标签：clearcase, cleartool, baseline

我目前正在远程网络上使用 ClearCase，而且速度非常慢。仅仅浏览到我想要创建基线的流就需要很长时间。是否有一种快速、简单且安全的方法可以从特定流的 cleartool 界面创建基线？

谢谢，

伊恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:18:43.597

基本命令，来自[`cleartool man mkbl`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/)：

```
 cleartool mkbl -view anUCMView aBaselineName 
```

您需要一个与目标 Stream 关​​联的视图来应用基线。
我建议使用该`-full`选项，以创建完整的基线（而不是默认的增量基线）。

使用快照或动态视图`mkbl`应该没什么区别，但我喜欢在快照视图中工作，并在动态视图中设置我的基线（我确信我没有任何待处理的结帐）。

看：

*   “ [Clearcase UCM 中的完整基线和增量基线有什么区别？](https://stackoverflow.com/questions/9696598/what-is-the-difference-between-full-baseline-and-incremental-baseline-in-clearca) ”。
*   “[如何将基线仅应用于特定组件？](https://stackoverflow.com/questions/10206785/how-to-apply-baseline-only-to-a-particular-component) ”如果您需要将其限制为一个组件。

注意：这适用于完整的 ClearCase 安装，而不是 CCRC（ClearCase 远程客户端）。

# c# - Lambda 更快的方法来搜索可变数量的不同 ID

> ID：13764672
> 
> 赞同：-1
> 
> 时间：2012-12-07T14:06:26.180
> 
> 标签：c#, linq, lambda

```
Func<vw_UsuarioPerfilAtributo, bool> expressionPerfil = Perf =>
  foreach(int _key in Keys){
    Perf.Id == _key ||
  } 
```

（我需要多个 OR `||`）

我认为这比

```
 List<vw_UsuarioPerfilAtributo> teste = new List<vw_UsuarioPerfilAtributo>();
    teste.add(context.Find(Id)); 
```

可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:20:39.013

也许你需要类似的东西：

```
//use a method because use a foreach in a lambda expression isn't allowed
public bool myFunction(vw_UsuarioPerfilAtributo Perf){
   foreach(int _key in Keys){
        if(Perf.Id == _key || /*other condition here*/)
           return true;
   }

   return false;
} 
```

和：

```
Func<vw_UsuarioPerfilAtributo, bool> expressionPerfil = Perf => myFunction(Perf); 
```

要不就：

```
Func<vw_UsuarioPerfilAtributo, bool> expressionPerfil = Perf => Keys.Any(_key => Perf.Id == _key || /*other condition here*/); 
```

* * *

> 我认为这比
> 
> teste.add(context.Find(Id));

在这种情况下`context.Find(id)`（其中 context 是 a `List<>`）返回找到的元素，而前面的代码返回一个布尔值，因为`Func<vw_UsuarioPerfilAtributo, bool>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:13:00.637

你可以`PredicatorBuilder`上课。它是关于 lambda 表达式的一些扩展方法的著名课程。看看这个链接：

[http://petemontgomery.wordpress.com/2011/02/10/a-universal-predicatebuilder/](http://petemontgomery.wordpress.com/2011/02/10/a-universal-predicatebuilder/)

在 yoru 项目中添加此类后，您可以执行以下操作：

```
var result = list.Where(x => condition).And(x => condition).Or(x => condition).ToList(); 
```

# asp.net - 登录成功时，登录控件重定向到 default.aspx

> ID：13764673
> 
> 赞同：0
> 
> 时间：2012-12-07T14:06:40.643
> 
> 标签：asp.net

我使用以下登录控件。问题是如果用户正确登录，它会自动重定向到 default.aspx。我只想让它留在登录页面上。有任何想法吗？

代码：

```
<form id="form1" runat="server">
<h1>Log in to Management</h1>

    <p>
&nbsp;<asp:LoginView ID="LoginView1" runat="server">
            <AnonymousTemplate>
                <asp:Login ID="Login1" runat="server" 
    CreateUserText="Sign Up for a New Account" CreateUserUrl="SignUp.aspx">
                </asp:Login>
            </AnonymousTemplate>
            <LoggedInTemplate>
                You are already logged in!
            </LoggedInTemplate>
        </asp:LoginView>
    </p>
    <p>
        <asp:LoginStatus ID="LoginStatus1" runat="server" />
    </p>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:19:50.747

如果您希望将其重定向到该页面，请在 web.config 文件中将 defaulturl 属性更改为 login.aspx。我假设 login.aspx 是您的登录页面。

```
<authentication mode="forms">
<forms loginurl="index.aspx" defaulturl="login.aspx"/>
</authentication> 
```

MSDN 链接： http:
[//msdn.microsoft.com/en-us/library/ka5ffkce.aspx](http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx)
[http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.defaulturl.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.defaulturl.aspx)

# oracle - 在 oracle 10g 中，如何循环接受用户输入？

> ID：13764681
> 
> 赞同：3
> 
> 时间：2012-12-07T14:07:30.127
> 
> 标签：oracle, sqlplus

我有以下 pl/sql 块：

```
BEGIN
  FOR I IN 1 .. 5
  LOOP
    INSERT INTO TEST_TABLE VALUES('&slno',SYSDATE);
  END LOOP;
END; 
```

当我执行上面的块时，它只需要一个输入。但它应该总共需要 5 个输入。我的代码中缺少什么？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:24:53.437

它是一个替换变量——一个 sql*plus 特性——它不能以这种方式工作。您必须调用`undefine &slno`或`accept slno ...`使其接受另一个输入，但这些也是 sqlplus，而不是 pl/sql 命令，因此您将无法在循环中调用它们，

可能你在这里唯一能做的就是

```
INSERT INTO TEST_TABLE VALUES('&slno1',SYSDATE);
INSERT INTO TEST_TABLE VALUES('&slno2',SYSDATE);
INSERT INTO TEST_TABLE VALUES('&slno3',SYSDATE);
INSERT INTO TEST_TABLE VALUES('&slno4',SYSDATE);
INSERT INTO TEST_TABLE VALUES('&slno5',SYSDATE); 
```

**更新**：幸运的是，您可以通过生成一个接受独立输入的单独顺序语句列表来解决此问题：

```
22:38:59 @> conn system/sys@oars_sandbox
Connected.
22:39:01 SYSTEM@oars_sandbox> @s:\test
Enter value for var1: a
Enter value for var2: b
Enter value for var3: c
22:39:06 SYSTEM@oars_sandbox> commit;
22:39:11 SYSTEM@oars_sandbox> select * from test_table;

COL1       COL2
---------- -------------------
a          07.12.2012 22:39:10
b          07.12.2012 22:39:11
c          07.12.2012 22:39:11
22:39:17 SYSTEM@oars_sandbox> get s:\test
  1  set echo off
  2  set define off
  3  set termout off
  4  set feedback off
  5  set timing off
  6  spool s:\123.sql
  7  begin
  8    for i in 1 .. 3 loop
  9      dbms_output.put_line('insert into test_table values(''&var'||i||''', sysdate);');
 10    end loop;
 11  end;
 12  /
 13  spool off
 14  set define "&"
 15  set termout on
 16* @s:\123.sql
22:39:24  17  .
22:39:58 SYSTEM@oars_sandbox> get s:\123.sql
  1  insert into test_table values('&var1', sysdate);
  2  insert into test_table values('&var2', sysdate);
  3* insert into test_table values('&var3', sysdate);
22:40:04 SYSTEM@oars_sandbox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T19:58:04.450

只有在（由客户端）解析和替换所有替换变量之后，才会将最终命令、查询或 pl/sq 块发送到数据库引擎以执行。为此，不能循环重复提示。因此，作为[@be here now answer](https://stackoverflow.com/a/13764987/997660)的替代方法，您可以重写您的 pl/sql 块，如下所示：

```
SQL> set verify off

SQL> declare
  2    type T_variables is table of varchar2(11);
  3    l_varlist T_variables;
  4  begin
  5    select v
  6      bulk collect into l_varlist -- Assume that there are not so many of them
  7      from ( select '&var1' as v from dual union all
  8             select '&var2' from dual union all
  9             select '&var3' from dual
 10           ) ;
 11  
 12    for i in l_varlist.first..l_varlist.last
 13    loop
 14      insert into test_table(col1, col2)
 15        values(l_varlist(i), sysdate);
 16    end loop;
 17  end;
 18  
 19  /
Enter value for var1: value #1
Enter value for var2: value #2
Enter value for var3: value #3

PL/SQL procedure successfully completed.

SQL> commit;

Commit complete.

SQL> select * 
  2    from test_table;

COL1        COL2                                                                
----------- ---------                                                           
value #1    07-DEC-12                                                           
value #2    07-DEC-12                                                           
value #3    07-DEC-12 
```

# c# - C#属性检查一个日期是否早于另一个

> ID：13764684
> 
> 赞同：13
> 
> 时间：2012-12-07T14:07:38.747
> 
> 标签：c#, asp.net, asp.net-mvc-4

我的 MVC4 项目有一个 ViewModel，其中包含两个 DateTime 属性：

```
[Required]
[DataType(DataType.Date)]
public DateTime RentDate { get; set; }

[Required]
[DataType(DataType.Date)]
public DateTime ReturnDate { get; set; } 
```

有没有一种简单的方法来使用 C# 属性`[Compare("someProperty")]`来检查天气 RentDate 属性的值是否早于 ReturnDate 的值？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-07T14:54:08.403

这是一个非常快速的基本实现（没有错误检查等），应该按照您的要求进行（仅在服务器端......它不会进行 asp.net 客户端 javascript 验证）。我还没有测试它，但应该足以让你开始。

```
using System;
using System.ComponentModel.DataAnnotations;

namespace Test
{
   [AttributeUsage(AttributeTargets.Property)]
   public class DateGreaterThanAttribute : ValidationAttribute
   {
      public DateGreaterThanAttribute(string dateToCompareToFieldName)
      {
          DateToCompareToFieldName = dateToCompareToFieldName;
      }

       private string DateToCompareToFieldName { get; set; }

       protected override ValidationResult IsValid(object value, ValidationContext validationContext)
       {
           DateTime earlierDate = (DateTime)value;

           DateTime laterDate = (DateTime)validationContext.ObjectType.GetProperty(DateToCompareToFieldName).GetValue(validationContext.ObjectInstance, null);

           if (laterDate > earlierDate)
           {
               return ValidationResult.Success;
           }
           else
           {
               return new ValidationResult("Date is not later");
           }
       }
   }

   public class TestClass
   {
       [DateGreaterThan("ReturnDate")]
       public DateTime RentDate { get; set; }

       public DateTime ReturnDate { get; set; }
   }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T14:38:35.167

看起来您正在使用 DataAnnotations 所以另一种选择是`IValidatableObject`在视图模型中实现：

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
    if (this.RentDate > this.ReturnDate)
    {
        yield return new ValidationResult("Rent date must be prior to return date", new[] { "RentDate" });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T15:07:32.453

如果您使用的是 .Net Framework 3.0 或更高版本，您可以将其作为类扩展...

```
 /// <summary>
    /// Determines if a <code>DateTime</code> falls before another <code>DateTime</code> (inclusive)
    /// </summary>
    /// <param name="dt">The <code>DateTime</code> being tested</param>
    /// <param name="compare">The <code>DateTime</code> used for the comparison</param>
    /// <returns><code>bool</code></returns>
    public static bool isBefore(this DateTime dt, DateTime compare)
    {
        return dt.Ticks <= compare.Ticks;
    }

    /// <summary>
    /// Determines if a <code>DateTime</code> falls after another <code>DateTime</code> (inclusive)
    /// </summary>
    /// <param name="dt">The <code>DateTime</code> being tested</param>
    /// <param name="compare">The <code>DateTime</code> used for the comparison</param>
    /// <returns><code>bool</code></returns>
    public static bool isAfter(this DateTime dt, DateTime compare)
    {
        return dt.Ticks >= compare.Ticks;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T14:09:51.787

不确定它是否在 MVC/Razor 中使用，但是..

您可以使用 DateTime.Compare(t1, t2) - t1 和 t2 是您要比较的时间。它将根据结果返回 -1、0 或 1。

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/system.datetime.compare.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-10T10:24:59.627

模型：

```
[DateCorrectRange(ValidateStartDate = true, ErrorMessage = "Start date shouldn't be older than the current date")]
public DateTime StartDate { get; set; }

 [DateCorrectRange(ValidateEndDate = true, ErrorMessage = "End date can't be younger than start date")]
public DateTime EndDate { get; set; } 
```

属性类：

```
[AttributeUsage(AttributeTargets.Property)]
    public class DateCorrectRangeAttribute : ValidationAttribute
    {
        public bool ValidateStartDate { get; set; }
        public bool ValidateEndDate { get; set; }

        protected override ValidationResult IsValid(object value, ValidationContext validationContext)
        {
            var model = validationContext.ObjectInstance as YourModelType;

            if (model != null)
            {
                if (model.StartDate > model.EndDate && ValidateEndDate
                    || model.StartDate > DateTime.Now.Date && ValidateStartDate)
                {
                    return new ValidationResult(string.Empty);
                }
            }

            return ValidationResult.Success;
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T14:10:50.050

框架中不存在类似的东西。一个常见的类似属性是`RequiredIf`. 在这篇文章中有描述。

[RequiredIf 条件验证属性](https://stackoverflow.com/questions/7390902/requiredif-conditional-validation-attribute)

# c# - 如何使用 asp.net mvc 视图返回 404

> ID：13764685
> 
> 赞同：23
> 
> 时间：2012-12-07T14:07:39.393
> 
> 标签：c#, .net, asp.net-mvc

如何实现以下功能？

**我的控制器**：

```
if (something == null)
{         
     //return the view with 404 http header
     return View();          
}

  //return the view with 200 http header
  return View(); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-07T14:18:25.950

写吧

```
Response.StatusCode = 404; 
```

在返回视图之前。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-07T14:10:50.523

```
if (something == null)
{         
   return new HttpNotFoundResult(); // 404
}
else
{
   return new HttpStatusCodeResult(HttpStatusCode.OK); // 200
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-07T14:41:52.503

```
if (something == null)
{         
    Response.StatusCode = (int)HttpStatusCode.NotFound;
    return View();          
}

//return the view with 200 http header
return View(); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-02-03T23:09:56.827

你应该设置as`TrySkipIisCustomErrors`的属性。`Response``true`

```
public ActionResult NotFound()
{
    Response.StatusCode = 404;
    Response.TrySkipIisCustomErrors = true;
    return View();
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-07T14:10:44.683

```
if (something == null)
{         
   return HttpNotFound();
}

return View(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-07T15:04:14.037

我会抛出一个 404 异常并创建一个自定义异常过滤器，该过滤器会为 404 错误返回一个未找到的页面。内置`HandleError`过滤器不处理 404 错误。

```
if (something == null)
{         
   throw new HttpException(404, "Not found")
}

return View(); 
```

# regex - 在 R 中识别正则表达式中的行尾

> ID：13764686
> 
> 赞同：0
> 
> 时间：2012-12-07T14:07:43.807
> 
> 标签：regex, r, tweets

我写了一个小代码来从 R 中的推文中提取主题标签

```
m<-c(paste("Hello! #London is gr8\. #Wow"," ")) # My tweet
#m<- c("Hello! #London is gr8\. #Wow")

x<- unlist(gregexpr("#(\\S+)",m))
#substring(m,x)[1]

subs<-function(x){
  return(substring(m,x+1,(x-2+regexpr(" |\\n",substring(m,x)[1]))))
}

tag<- sapply(x, subs)
#x
tag 
```

如果没有我在推文末尾添加空格，此代码将无法工作。可能是什么原因？我也试过 \n 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T18:08:29.123

尝试这个：

```
m <- c("Hello! #London is gr8\. #Wow")
x <- unlist(strsplit(m, " "))
tag <- x[grep("^#", x)]
tag 
```

现在，让我们假设您有一个推文列表，如下所示：

```
m1 <- c("Hello! #London is gr8\. #Wow")
m2 <- c("#Hello! #London is gr8\. #Wow")
m3 <- c("#Hello! #London i#s gr8\. #Wow")
m4 <- c("Hello! #London is gr8\. #Wow ")
m <- list(m1, m2, m3, m4) 
```

你可以写一个小函数：

```
getTags <- function(tweet) {
  x <- unlist(strsplit(tweet, " "))
  tag <- x[grep("^#", x)]
  return(tag)
} 
```

并应用它：

```
lapply(m, function(tweet) getTags(tweet))
[[1]]
[1] "#London" "#Wow"   
[[2]]
[1] "#Hello!" "#London" "#Wow"   
[[3]]
[1] "#Hello!" "#London" "#Wow"   
[[4]]
[1] "#London" "#Wow" 
```

事后想...

如果你想要散列（或任何标点符号被删除），函数应该是

```
getTags <- function(tweet) {
  x <- unlist(strsplit(tweet, " "))
  tag <- x[grep("^#", x)]
  tag <- gsub("#", "", tag)
  return(tag)
} 
```

或者

```
getTags <- function(tweet) {
  x <- unlist(strsplit(tweet, " "))
  tag <- x[grep("^#", x)]
  tag <- gsub("[[:punct:]]", "", tag)
  return(tag)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:04:45.997

`gregexpr`为您提供所需的信息：

```
R> m<- c("Hello! #London is gr8\. #Wow")
R> (x<- gregexpr("#(\\S+)",m)[[1]])
[1]  8 24
attr(,"match.length")
[1] 7 4
attr(,"useBytes")
[1] TRUE 
```

所以我们可以将`match.length`与起始位置结合起来：

```
R> substring(m, x+1 , x - 1 + attr(x,"match.length"))
[1] "London" "Wow" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T19:58:38.857

`$`匹配字符串的结尾。

```
m<- c("Hello! #London is gr8\. #Wow")

subs<-function(x){
  return(substring(m,x+1,(x-2+regexpr(" |$",substring(m,x)[1]))))
} 
```

其余代码完好无损：

```
> tag
[1] "London" "Wow" 
```

# c++ - 错误：“clang”不是命名空间名称

> ID：13764695
> 
> 赞同：0
> 
> 时间：2012-12-07T14:08:06.400
> 
> 标签：c++, llvm

[我从这里](http://www.ibm.com/developerworks/library/os-createcompilerllvm2/index.html)得到这些代码。按照步骤。但是当我有错误`make`

```
using namespace clang;
int main()
{
    CompilerInstance ci;
    ci.createDiagnostics(0,NULL); // create DiagnosticsEngine
    ci.createFileManager();  // create FileManager
    ci.createSourceManager(ci.getFileManager()); // create SourceManager
    ci.createPreprocessor();  // create Preprocessor
    const FileEntry *pFile = ci.getFileManager().getFile("hello.c");
    ci.getSourceManager().createMainFileID(pFile);
    ci.getPreprocessor().EnterMainSourceFile();
    ci.getDiagnosticClient().BeginSourceFile(ci.getLangOpts(), &ci.getPreprocessor());
    Token tok;
    do {
        ci.getPreprocessor().Lex(tok);
        if( ci.getDiagnostics().hasErrorOccurred())
            break;
        ci.getPreprocessor().DumpToken(tok);
        std::cerr << std::endl;
    } while ( tok.isNot(clang::tok::eof));
    ci.getDiagnosticClient().EndSourceFile();
} 
```

对于`Makefile`它。

```
 CXX := g++
    RTTIFLAG := -fno-rtti
    CXXFLAGS := $(shell llvm-config --cxxflags) $(RTTIFLAG)
    LLVMLDFLAGS := $(shell llvm-config --ldflags --libs)
    DDD := $(shell echo $(LLVMLDFLAGS))
    SOURCES = main.cpp
    OBJECTS = $(SOURCES:.cpp=.o)
    EXES = $(OBJECTS:.o=)
    CLANGLIBS = \
            -L /usr/local/lib \
            -lclangFrontend \
            -lclangParse \
            -lclangSema \
            -lclangAnalysis \
            -lclangAST \
            -lclangLex \
            -lclangBasic \
            -lclangDriver \
            -lclangSerialization \
            -lLLVMMC \
            -lLLVMSupport \
    all: $(OBJECTS) $(EXES)
    %: %.o
    $(CXX) -o $@ $< $(CLANGLIBS) $(LLVMLDFLAGS) 
```

我在`make`.

```
g++ -I/usr/include  -DNDEBUG -D_GNU_SOURCE -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS   -fvisibility-inlines-hidden -fno-exceptions -fPIC -Woverloaded-virtual -Wcast-qual -fno-rtti   -c -o main.o main.cpp
main.cpp:1:21: error: ‘clang’ is not a namespace-name
main.cpp:1:26: error: expected namespace-name before ‘;’ token
main.cpp: In function ‘int main()’:
main.cpp:4:9: error: ‘CompilerInstance’ was not declared in this scope
main.cpp:4:26: error: expected ‘;’ before ‘ci’
main.cpp:5:9: error: ‘ci’ was not declared in this scope
main.cpp:5:32: error: ‘NULL’ was not declared in this scope
main.cpp:9:15: error: ‘FileEntry’ does not name a type
main.cpp:10:48: error: ‘pFile’ was not declared in this scope
main.cpp:13:9: error: ‘Token’ was not declared in this scope
main.cpp:13:15: error: expected ‘;’ before ‘tok’
main.cpp:15:38: error: ‘tok’ was not declared in this scope
main.cpp:19:13: error: ‘cerr’ is not a member of ‘std’
main.cpp:19:26: error: ‘endl’ is not a member of ‘std’
main.cpp:20:19: error: ‘tok’ was not declared in this scope
main.cpp:20:29: error: ‘clang’ has not been declared
make: *** [main.o] Error 1 
```

我是 C++ 新手。如果这个问题太简单，我很抱歉。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:09:21.360

您需要#include 适当的头文件以引用您尝试使用的 API 的成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:09:40.330

您是否在实现文件中包含相关标头，例如：

```
#include <CompilerInstance.h> 
```

# java - MANIFEST.MF 中没有 Java 依赖项

> ID：13764696
> 
> 赞同：1
> 
> 时间：2012-12-07T14:08:11.380
> 
> 标签：java, maven, manifest

我的一些依赖项有一些问题，在 pom 文件依赖项管理部分中声明：依赖项不包含在 MANIFEST.MF 文件中。此依赖项在部分的 web 项目中使用。但是，在 MANIFEST 中没有关于此依赖项的相关声明，并且部署的应用程序失败并出现异常。如何保证将此依赖项添加到 MANIFEST 文件中？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:15:39.373

Maven 不会将依赖项放在 MANIFEST.MF 文件中。如果您有 web 项目，这意味着有一个 war 文件，所有依赖项都将打包到 war 文件中。此外，不需要将依赖项放入 MANIFEST.MF 文件中。如果您真的喜欢将依赖项添加到您的 MANIFEST.MF 文件中，您必须像这样配置[maven-war-plugin](http://maven.apache.org/plugins/maven-war-plugin/examples/war-manifest-guide.html)：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <archive>
            <manifest>
              <addClasspath>true</addClasspath>
            </manifest>
          </archive>
        </configuration>
      </plugin>
      ...
    </plugins>
  </build>
  ...
</project> 
```

如果您仅在dependencyManagement 中定义依赖项，它将不是真正的依赖项。这只是要使用的版本的定义。要使依赖项真正用于您的项目，您必须在依赖项中定义依赖项。

# java - 打印字符数组的输出是什么意思？

> ID：13764700
> 
> 赞同：1
> 
> 时间：2012-12-07T14:08:35.977
> 
> 标签：java, string, character-arrays

我现在正在从 C 迁移到 Java，并且我正在关注一些关于字符串的教程。在教程的某一时刻，他们展示了从字符数组实例化一个新字符串，然后打印该字符串。我一直在关注，但我想同时打印字符数组和字符串，所以我尝试了这个：

```
class Whatever {
    public static void main(String args[]) {
        char[] hello = { 'h', 'e', 'l', 'l', 'o', '.'};
        String hello_str = new String(hello);
        System.out.println(hello + " " + hello_str);
    }
} 
```

我的输出是这样的：

```
[C@9304b1 hello. 
```

显然，这不是在 Java 中打印字符数组的方式。但是我想知道我是否只是得到了垃圾？我在某个网站上读到，打印字符数组会给你一个地址，但这对我来说不像是一个地址……我在网上没有找到很多关于它的信息。

那么，我刚刚打印了什么？
和额外的问题：你如何在java中正确打印一个字符数组？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T14:10:22.890

> 但是我想知道我是否只是得到了垃圾？

不，你得到了 的结果[`Object.toString()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)，它没有在数组中被覆盖：

> Object 类的 toString 方法返回一个字符串，该字符串由对象作为其实例的类的名称、at 符号字符“@”和对象哈希码的无符号十六进制表示形式组成。换句话说，此方法返回一个等于以下值的字符串：
> 
> ```
> getClass().getName() + '@' + Integer.toHexString(hashCode()) 
> ```

所以它不是*垃圾*，因为它有一个意义......但它也不是一个特别*有用*的价值。

还有你的奖金问题...

> 如何在 java 中正确打印字符数组？

调用[`Arrays.toString(char[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28char%5B%5D%29)将其转换为字符串......或者只是

```
System.out.println(hello); 
```

which will call `println(char[])` instead, which converts it into a string. Note that `Arrays.toString` will build a string which is obviously an array of characters, whereas `System.out.println(hello)` is broadly equivalent to `System.out.println(new String(hello))`

# php - 在 PHP 中获取日期/时间差

> ID：13764701
> 
> 赞同：1
> 
> 时间：2012-12-07T14:08:37.883
> 
> 标签：php, date, time

我试图获得两天之间的时差。但是对于某些日期/时间，我得到了错误的答案

这是我的代码：

```
/****************************************
$start_date = new DateTime('23:58:40'); *These two still give 
$end_date = new DateTime('00:00:00');   *a wrong answer
*****************************************/

$start_date = new DateTime('23:58:40');
$end_date = new DateTime('00:11:36');

$dd = date_diff($end_date, $start_date);

//Giving a wrong answer: Hours = 23, Minutes = 47, Seconds = 4 
echo "Hours = $dd->h, Minutes = $dd->i, Seconds = $dd->s"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T14:12:45.307

遮阳篷是正确的。你提供两次。如果没有日期，就无法知道最后一个日期实际上是第二天。仅仅因为您将变量命名为“end_date”并不意味着 PHP 知道您的意思。

也许您应该在请求中也包括日期，例如

```
$start_date = new DateTime('2012-12-07 23:58:40');
$end_date = new DateTime('2012-12-08 00:11:36'); 
```

如果您真的想使用时间：

```
function differenceInTimes($start, $end) {
    if (strtotime($start)>strtotime($end)) {
        //start date is later then end date
        //end date is next day
        $s = new DateTime('2000-01-01 '.$start);
        $e = new DateTime('2000-01-02 '.$end);
    } else {
        //start date is earlier then end date
        //same day
        $s = new DateTime('2000-01-01 '.$start);
        $e = new DateTime('2000-01-01 '.$end);
    }

    return date_diff($s, $e);
}

$start_date = '23:58:40';
$end_date = '00:11:36';
$dd = differenceInTimes($start_date, $end_date);
echo "Hours = $dd->h, Minutes = $dd->i, Seconds = $dd->s";

//Hours = 0, Minutes = 12, Seconds = 56 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:10:29.583

将参数交换为 date_diff

```
$dd = date_diff($start_date, $end_date); 
```

编辑

在实际测试了这个理论之后，它被证明是完全没用的，给出了相同的答案。

# android - java.net.SocketTimeoutException：连接超时，从一天到另一天，无需更改代码

> ID：13764708
> 
> 赞同：0
> 
> 时间：2012-12-07T14:08:53.487
> 
> 标签：android, url, socketexception

我在 GooglePlay 中有一个应用程序，**它是在大约 6 个月前发布的，****直到今天**它每次都**运行良好。**

 ****从一天到另一天***没有任何代码修改*****，我得到了这个错误：****

 **```
12-07 14:51:09.646: W/System.err(23695): java.net.SocketTimeoutException: Connection timed out
12-07 14:51:09.673: W/System.err(23695):    at org.apache.harmony.luni.platform.OSNetworkSystem.connect(Native Method)
12-07 14:51:09.673: W/System.err(23695):    at dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:357)
12-07 14:51:09.677: W/System.err(23695):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:204)
12-07 14:51:09.677: W/System.err(23695):    at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
12-07 14:51:09.677: W/System.err(23695):    at java.net.Socket.connect(Socket.java:1002)
12-07 14:51:09.681: W/System.err(23695):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:75)
12-07 14:51:09.681: W/System.err(23695):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
12-07 14:51:09.681: W/System.err(23695):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322)
12-07 14:51:09.685: W/System.err(23695):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
12-07 14:51:09.689: W/System.err(23695):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285)
12-07 14:51:09.689: W/System.err(23695):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267)
12-07 14:51:09.689: W/System.err(23695):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1018)
12-07 14:51:09.689: W/System.err(23695):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:512)
12-07 14:51:09.692: W/System.err(23695):    at java.net.URL.openStream(URL.java:645)
12-07 14:51:09.696: W/System.err(23695):    at com.MyPackageName.XML.MyDownloadingTask.doInBackground(MyDownloadingTask.java:95)
12-07 14:51:09.696: W/System.err(23695):    at com.MyPackageName.XML.MyDownloadingTask.doInBackground(MyDownloadingTask.java:1)
12-07 14:51:09.704: W/System.err(23695):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
12-07 14:51:09.708: W/System.err(23695):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
12-07 14:51:09.708: W/System.err(23695):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
12-07 14:51:09.708: W/System.err(23695):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
12-07 14:51:09.708: W/System.err(23695):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
12-07 14:51:09.708: W/System.err(23695):    at java.lang.Thread.run(Thread.java:1019) 
```

**我没有更改代码中的任何一行**，现在我的应用程序无法正常工作。它与启动时的 url 连接有关，所以现在它对这个愚蠢的、*从无处出现的*错误没有任何作用。

从浏览器我可以到达想要的 url，所以服务器是可靠的......

请，如果有人知道它是什么，请帮助我。谢谢，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:13:39.383

网络和服务器不可靠。您的代码可能是完美的，但您可能仍然会遇到丢失数据包的网络或响应不够快的服务器。****

# git - 你如何最终得到没有更改文件的提交？

> ID：13764710
> 
> 赞同：1
> 
> 时间：2012-12-07T14:08:57.293
> 
> 标签：git, github

我有三个存储库，我的本地、我的 github 和项目 github。我的 github 是项目 github 的一个分支。

我进行更改并将它们推送到我的 github，然后向项目 github 发出拉取请求。我经常从项目存储库中获取，并合并到我的 github 中。

通常，当我完成这一切时，这三个人都有相同的历史。但是这次我的存储库是一对一的修订版，而项目是另一版的。

当我发出拉取请求时说有两个提交但没有更改的文件。这是怎么发生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:21:31.323

我认为情况如下：

您有 2 个项目 repo 没有的提交，因此这些提交被选为符合拉取请求的提交。

但是，在比较文件时，在您第二次提交时文件的最终状态与项目存储库中文件的当前状态之间没有区别。

所以我猜你的两次提交是一个更改，然后是该更改的逆转，这有效地将文件恢复到它们在你的第一次提交之前的状态 - 即与它们在项目 repo 中的相同状态.

# c - 在 C 中制作自己的 malloc 函数

> ID：13764711
> 
> 赞同：5
> 
> 时间：2012-12-07T14:09:11.503
> 
> 标签：c, malloc

我需要你的帮助。我对C有一个平均的了解，这就是问题所在。我将使用一些基准测试在新处理器上测试一些计算机体系结构的东西（分支未命中、缓存未命中）。关于它的事情是基准在 C 中，但我不能包含任何库调用。例如，我不能使用 malloc，因为我收到了错误

```
"undefined reference to malloc" 
```

即使我已经包含了图书馆。所以我必须编写自己的malloc。我不希望它超级高效 - 只做基础。正如我所想的那样，我必须在内存中有一个地址，并且每次发生 malloc 时，我都会返回一个指向该地址的指针并将计数器增加该大小。Malloc 在我的程序中发生了两次，所以我什至不需要大内存。

你能帮我吗？我设计了一个 Verilog，在 C 语言方面没有太多经验。

我已经看过以前的答案，但对我来说似乎都太复杂了。此外，我无法访问 KR 书。

干杯!

编辑：也许这可以帮助你更多：我没有使用 gcc，而是使用 sde-gcc 编译器。它有什么不同吗？也许这就是为什么我得到一个未定义的 malloc 引用？

EDIT2：我正在测试 MIPS 架构：

我已经包括：

```
#include <stdlib.h> 
```

错误是：

```
undefined reference to malloc
relocation truncated to fit: R_MIPS_26 against malloc 
```

和编译器命令 id：

```
test.o: test.c cap.h
sde-gcc -c -o test.s test.c -EB -march=mips64 -mabi=64 -G -O -ggdb -O2 -S
    sde-as -o test.o test.s EB -march=mips64 -mabi=64 -G -O -ggdb
    as_objects:=test.o init.o 
```

编辑 3：好的，我使用了上面的实现，它运行没有任何问题。问题是在进行嵌入式编程时，你只需要定义你正在使用的所有东西，所以我定义了我自己的 malloc。sde-gcc 无法识别 malloc 函数。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-07T14:18:03.507

这是一种非常简单的方法，它可能会让您通过 2 个 malloc：

```
static unsigned char our_memory[1024 * 1024]; //reserve 1 MB for malloc
static size_t next_index = 0;

void *malloc(size_t sz)
{
    void *mem;

    if(sizeof our_memory - next_index < sz)
        return NULL;

    mem = &our_memory[next_index];
    next_index += sz;
    return mem;
}

void free(void *mem)
{
   //we cheat, and don't free anything.
} 
```

如果需要，您可能需要对齐您交还的内存块，例如，您总是返回位于 4、8、16 倍数或任何您需要的地址上的内存地址。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-16T21:21:17.070

尝试上面给出的线程安全无答案，我指的是他的代码，并进行了一些更改，如下所示：

```
static unsigned char our_memory[1024 * 1024]; //reserve 1 MB for malloc
static size_t next_index = 0;

static pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER;

void *malloc(size_t sz)
{
    void *mem;
    pthread_mutex_lock(&lock);
    if(sizeof our_memory - next_index < sz){
        pthread_mutex_unlock(&lock);
        return NULL;
    }

    mem = &our_memory[next_index];
    next_index += sz;
    pthread_mutex_unlock(&lock);
    return mem;
}

void free(void *mem)
{
   //we cheat, and don't free anything.
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T14:12:18.153

您需要链接到 libc.a 或系统的等效项。如果您不使用标准 C 库，您也不会获得在 main 函数之前运行的任何启动代码。你的程序永远不会运行......

您可以分配一个静态数据块并使用它来代替 malloc，例如：

```
// char* fred = malloc(10000);
// equals

static char [100000] fred; 
```

或者在启动时为一大块连续内存调用标准 malloc 并编写你自己的 malloc 类型函数来划分它。在第二种情况下，您将在调用系统的 malloc 后开始基准测试，以免影响基准测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-04T17:58:02.387

我正在分享 Malloc 的完整方法，并免费提供它适用于各种场景。使用数组对此进行了补充。我们还可以实现使用元数据的链接列表。

我们必须涵盖三个场景

1.  连续内存分配：以连续方式分配内存
2.  在两个分配的内存之间分配的内存：当内存可以在两个分配的内存块之间分配时。我们必须使用该内存块进行分配。
3.  当初始块空闲时从初始块分配。

有关详细信息，您可以在图表中看到。[内存分配算法图](https://i.stack.imgur.com/q8BX4.jpg)

malloc的源代码

```
#define TRUE        1
#define FALSE       0

#define MAX_ALOCATION_ALLOWED       20
static unsigned char our_memory[1024 * 1024];

static int g_allocted_number = 0;
static int g_heap_base_address = 0;

typedef struct malloc_info
{
    int address;
    int size;
}malloc_info_t;

malloc_info_t   metadata_info[MAX_ALOCATION_ALLOWED] ={0};

void* my_malloc(int size)
{
    int j =0;
    int index = 0 ;
    int initial_gap =0;
    int gap =0;
    int flag = FALSE;
    int initial_flag = FALSE;
    void *address = NULL;
    int heap_index = 0;
    malloc_info_t temp_info = {0};

    if(g_allocted_number >= MAX_ALOCATION_ALLOWED)
    {
        return NULL;
    }

    for(index = 0; index < g_allocted_number; index++)
    {
        if(metadata_info[index+1].address != 0 )
        {
            initial_gap = metadata_info[0].address - g_heap_base_address; /*Checked Initial Block (Case 3)*/
            if(initial_gap >= size)
            {
                initial_flag = TRUE;
                break;
            }
            else
            {
                gap = metadata_info[index+1].address - (metadata_info[index].address + metadata_info[index].size);  /*Check Gap Between two allocated memory (Case 2)*/
                if(gap >= size)
                {
                    flag = TRUE;
                    break;
                }
            }
        }
    }

    if(flag == TRUE)    /*Get Index for allocating memory for case 2*/
    {
        heap_index = ((metadata_info[index].address + metadata_info[index].size) - g_heap_base_address);

        for(j = MAX_ALOCATION_ALLOWED -1; j > index+1; j--)
        {
            memcpy(&metadata_info[j], &metadata_info[j-1], sizeof(malloc_info_t));
        }
    }
    else if (initial_flag == TRUE) /*Get Index for allocating memory for case 3*/
    {
        heap_index = 0;
        for(j = MAX_ALOCATION_ALLOWED -1; j > index+1; j--)
        {
            memcpy(&metadata_info[j], &metadata_info[j-1], sizeof(malloc_info_t));
        }
    }
    else /*Get Index for allocating memory for case 1*/
    {
        if(g_allocted_number != 0)
        {
            heap_index = ((metadata_info[index -1].address + metadata_info[index-1].size) - g_heap_base_address);
        }
        else    /* 0 th Location of Metadata for First time allocation*/
            heap_index = 0;
    }

    address = &our_memory[heap_index];
    metadata_info[index].address = g_heap_base_address + heap_index;
    metadata_info[index].size = size;

    g_allocted_number += 1;
    return address;
} 
```

现在免费代码

```
void my_free(int address)
{
    int i =0;
    int copy_meta_data = FALSE;

    for(i = 0; i < g_allocted_number; i++)
    {
        if(address == metadata_info[i].address)
        {
            // memset(&our_memory[metadata_info[i].address], 0, metadata_info[i].size);
            g_allocted_number -= 1;
            copy_meta_data = TRUE;
            printf("g_allocted_number in free = %d %d\n", g_allocted_number, address);
            break;
        }
    }

    if(copy_meta_data == TRUE)
    {
        if(i == MAX_ALOCATION_ALLOWED -1)
        {
            metadata_info[i].address = 0;
            metadata_info[i].size = 0;
        }
        else
            memcpy(&metadata_info[i], &metadata_info[i+1], sizeof(malloc_info_t));
    }
} 
```

现在测试测试代码是

```
int main()
{
    int *ptr =NULL;
    int *ptr1 =NULL;
    int *ptr2 =NULL;
    int *ptr3 =NULL;
    int *ptr4 =NULL;
    int *ptr5 =NULL;
    int *ptr6 =NULL;

    g_heap_base_address = &our_memory[0];

    ptr = my_malloc(20);
    ptr1 = my_malloc(20);
    ptr2 = my_malloc(20);

    my_free(ptr);
    ptr3 = my_malloc(10);
    ptr4 = my_malloc(20);
    ptr5 = my_malloc(20);
    ptr6 = my_malloc(10);

    printf("Addresses are: %d, %d, %d, %d, %d, %d, %d\n", ptr, ptr1, ptr2, ptr3, ptr4, ptr5, ptr6);

    return 0;
} 
```

# c# - 从实体模型生成数据库的意外结果。出了什么问题？

> ID：13764712
> 
> 赞同：1
> 
> 时间：2012-12-07T14:09:11.420
> 
> 标签：c#, entity-framework, edmx-designer

使用实体框架，我有一个数据库，其概念模型不同于物理存储模型。

当我要求模型从模型生成数据库时，会根据概念模型创建一个 SQL 脚本。当我要求从数据库更新模型时，它将附加所有数据库列（并且不查看 MSL 映射）。

该表具有以下列：

```
[adr_Id] [int] IDENTITY(1,1) NOT NULL, 
[adr_Name] [nvarchar](max) NULL, 
[adr_Street] [nvarchar](max) NULL, 
[adr_City] [nvarchar](max) NULL, 
```

这是**.msdx**文件：`

```
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="2.0" xmlns:edmx="http://schemas.microsoft.com/ado/2008/10/edmx">
  <!-- EF Runtime content -->
  <edmx:Runtime>
    <!-- SSDL content -->
    <edmx:StorageModels>
    <Schema Namespace="AdressenModel.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2008" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">
  <EntityContainer Name="AdressenModelStoreContainer">
    <EntitySet Name="Adres" EntityType="AdressenModel.Store.Adres" store:Type="Tables" Schema="dbo" />
  </EntityContainer>
  <EntityType Name="Adres">
    <Key>
      <PropertyRef Name="Id" />
    </Key>
    <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
    <Property Name="Straat" Type="nvarchar(max)" Nullable="true" />
    <Property Name="Naam" Type="nvarchar(max)" Nullable="true" />
    <Property Name="Woonplaats" Type="nvarchar(max)" Nullable="true" />
  </EntityType>
</Schema></edmx:StorageModels>
    <!-- CSDL content -->
    <edmx:ConceptualModels>
      <Schema Namespace="AdressenModel" Alias="Self" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
        <EntityContainer Name="NAWContext" annotation:LazyLoadingEnabled="true">
          <EntitySet Name="Adres" EntityType="AdressenModel.Adres" />
        </EntityContainer>
        <EntityType Name="Adres">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Type="String" Name="Straat" MaxLength="Max" FixedLength="false" Unicode="true" />
          <Property Type="String" Name="Naam" MaxLength="Max" FixedLength="false" Unicode="true" />
          <Property Type="String" Name="Woonplaats" MaxLength="Max" FixedLength="false" Unicode="true" />
        </EntityType>
      </Schema>
    </edmx:ConceptualModels>
    <!-- C-S mapping content -->
    <edmx:Mappings>
    <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2008/09/mapping/cs">
  <EntityContainerMapping StorageEntityContainer="AdressenModelStoreContainer" CdmEntityContainer="NAWContext">
    <EntitySetMapping Name="Adres">
      <EntityTypeMapping TypeName="IsTypeOf(AdressenModel.Adres)">
        <MappingFragment StoreEntitySet="Adres">
          <ScalarProperty Name="Id" ColumnName="Id" />
          <ScalarProperty Name="Straat" ColumnName="Straat" />
          <ScalarProperty Name="Naam" ColumnName="Naam" />
          <ScalarProperty Name="Woonplaats" ColumnName="Woonplaats" />
        </MappingFragment>
      </EntityTypeMapping>
    </EntitySetMapping>
  </EntityContainerMapping>
</Mapping></edmx:Mappings>
  </edmx:Runtime>
  <!-- EF Designer content (DO NOT EDIT MANUALLY BELOW HERE) -->
  <Designer xmlns="http://schemas.microsoft.com/ado/2008/10/edmx">
    <Connection>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="MetadataArtifactProcessing" Value="EmbedInOutputAssembly" />
      </DesignerInfoPropertySet>
    </Connection>
    <Options>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="ValidateOnBuild" Value="true" />
        <DesignerProperty Name="EnablePluralization" Value="True" />
        <DesignerProperty Name="IncludeForeignKeysInModel" Value="True" />
      </DesignerInfoPropertySet>
    </Options>
    <!-- Diagram content (shape and connector positions) -->
    <Diagrams>
      <Diagram Name="NAWContext">
        <EntityTypeShape EntityType="AdressenModel.Adres" Width="1.5" PointX="0.75" PointY="0.75" Height="1.787985026041667" IsExpanded="true" />
      </Diagram>
    </Diagrams>
  </Designer>
</edmx:Edmx>` 
```

最后是当我执行“**从模型生成数据库**”时生成的 SQL 脚本：

```
-- --------------------------------------------------
-- Entity Designer DDL Script for SQL Server 2005, 2008, and Azure
-- --------------------------------------------------
-- Date Created: 12/07/2012 14:33:20
-- Generated from EDMX file: C:\Users\w.wilschut\Downloads\502259 Code Ch31\EFSamples\Patient4\NAWContext.edmx
-- --------------------------------------------------

SET QUOTED_IDENTIFIER OFF;
GO
USE [Adressen];
GO
IF SCHEMA_ID(N'dbo') IS NULL EXECUTE(N'CREATE SCHEMA [dbo]');
GO

-- --------------------------------------------------
-- Dropping existing FOREIGN KEY constraints
-- --------------------------------------------------

-- --------------------------------------------------
-- Dropping existing tables
-- --------------------------------------------------

IF OBJECT_ID(N'[dbo].[Adres]', 'U') IS NOT NULL
    DROP TABLE [dbo].[Adres];
GO

-- --------------------------------------------------
-- Creating all tables
-- --------------------------------------------------

-- Creating table 'Adres'
CREATE TABLE [dbo].[Adres] (
    [Id] int IDENTITY(1,1) NOT NULL,
    [Straat] nvarchar(max)  NULL,
    [Naam] nvarchar(max)  NULL,
    [Woonplaats] nvarchar(max)  NULL
);
GO

-- --------------------------------------------------
-- Creating all PRIMARY KEY constraints
-- --------------------------------------------------

-- Creating primary key on [Id] in table 'Adres'
ALTER TABLE [dbo].[Adres]
ADD CONSTRAINT [PK_Adres]
    PRIMARY KEY CLUSTERED ([Id] ASC);
GO

-- --------------------------------------------------
-- Creating all FOREIGN KEY constraints
-- --------------------------------------------------

-- --------------------------------------------------
-- Script has ended
-- -------------------------------------------------- 
```

# three.js - 背景遮挡

> ID：13764725
> 
> 赞同：2
> 
> 时间：2012-12-07T14:09:57.993
> 
> 标签：three.js

我正在尝试渲染 2 个场景。第一个场景只是一个 2D 背景平面。在第二个场景中，我设置了对象。第一个对象（头部）的材质不透明度设置为 1。我认为这是计算场景中第二个对象（太阳镜）的遮挡的一种简单快捷的方法。事实上，这项工作与我想要的完全一样，但现在头部也遮挡了背景，即使他应该是透明的。（我在渲染第二个场景并设置之前清除了深度缓冲区`renderer.autoClear = false`）

```
renderer.autoClear = false;
var headMaterial = new THREE.MeshBasicMaterial({ color: 0x000000, opacity: 1 });
...
//Renderloop
renderer.clear();
renderer.render( background, camera );
renderer.clear(false,true,false);
renderer.render( scene, camera); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T00:11:16.973

如果说“背景”是指只有平面的场景，其中有一些纹理 - 为什么不将背景设置为 html 背景？那就是您不必计算飞机的正确位置来填充所有屏幕区域。

现在，对于透明度问题 - 这是给你的一些例子：http: [//jsfiddle.net/ajJmx/1/](http://jsfiddle.net/ajJmx/1/)

看看你是如何将立方体正面设置为半透明的，你可以看到立方体的其他侧面。如果你将立方体旋转 45 度 - 你会看到即使背景上有其他物体 - 你的立体立方体边仍然是固体。

您基本上想要做的是设置`transparent:true, opacity:0.6`您的太阳镜材料。而已！您还可以尝试混合材料并尝试`blending:THREE.AdditiveBlending`根据您的太阳镜类型进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:30:20.317

渲染两个场景而不是一个包含所有对象的场景是否有令人信服的理由？他们共用同一个相机，不是吗？

尝试先渲染头部和太阳镜。用模板遮住太阳镜。然后使用模板测试（但不是深度测试）渲染背景。您将渲染更少的背景像素，从而加快整体渲染速度。

# qt - 带有 qtreeview::item 的 Qt 样式表仅适用于子项？

> ID：13764727
> 
> 赞同：1
> 
> 时间：2012-12-07T14:09:59.987
> 
> 标签：qt, stylesheet, qtreeview

我想为 QTreeView 的项目设置样式，即稍微增加它们的顶部/底部填充。这是我的片段：

```
QTreeView::item
{
    padding-top:    8px;
    padding-bottom: 8px;
    color: red;
} 
```

不幸的是，这**仅**将填充应用于**子项**，即。所有顶级项目都具有与以前完全相同的填充。我添加了“颜色：红色；” 仅用于测试目的，但另一方面，红色文本颜色适用于**所有项目**，无论是顶级项目还是子项目。

我缺少一些特殊的限定词吗？我尝试使用`:active`and `:has-sibling`，但每种情况的结果都是相同的。

![截屏](../Images/609b55dce8294a42e8b8dd500b4b1c5d.png)

我正在使用 Qt 4.6.3。我也试过 4.8，但结果是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:28:29.720

问题出在我在视图上使用的 QStyledItemDelegate 子类上。委托只是为项目绘制水平线，我没有**重新**实现 sizehint 函数，但经过进一步检查，似乎子类返回了错误的 sizehint。

因此，我接受了 DanielCastro 的建议，只是在委托子类中使用了虚拟 sizehint 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:26:06.643

你在这里提到的风格应该可以工作。使用以下并检查它是否产生与[我附加](http://i.stack.imgur.com/YCuUt.png)`style-sheet`的相同的输出 。用于测试您的 UI。`Qt Designer`

```
QTreeWidget{outline:0;}

QTreeWidget::item
{
    padding:5px;
    background-color: rgb(235, 235, 235);
    color: #1c1c1c;
    border-right: 10px solid rgb(255, 170, 0);
    font: 400 9.3pt "Segoe UI";
}

QTreeWidget::item:has-children
{
        border-right: 10px solid rgb(255, 0, 255);
} 
```

您可以将此代码粘贴到：

```
Settings->Preferences->Code->Print/Preview Configuration->Style Sheet 
```

使用`Qt Designer`而不是在您的应用程序中自行测试这种样式，将确保没有任何外部因素影响您的`style-sheet`. 如果这按预期工作，那么问题出在其他地方。可能有另一种样式会覆盖您想要的样式。

# gdb - 来自命令行的段错误，但适用于 GDB 运行

> ID：13764729
> 
> 赞同：1
> 
> 时间：2012-12-07T14:10:02.020
> 
> 标签：gdb

我真的迷失在这里了。也许你们中的一些人可以指出我正确的方向。

我正在使用 GCC over MinGW 在 ANSI C 中开发一个工具。该工具只能从命令行运行。可能只在windows机器上。它在本地详细说明一些数据并生成供其他程序使用的文件。基本上它做了很多数学运算和一些文件处理。没什么特别的。我发现没有必要在这里发布整个 1000 多行以供检查......

我用 GCC 编译它，`-ansi`确保不存在一个警告。随着开发的发展，一切都运行良好。但最近我开始（几乎）随机出现段错误。我检查了最后所做的更改，但一无所获。我删除了最后的更改，完全恢复到它完美工作的时候。仍然是段错误。我逐行追踪。我回去阅读并重新阅读整个代码，以寻找可能的指针/malloc 错误。我根本找不到它经常如此随机地失败的原因。

所以这是奇怪的事情 - 我用 -g 编译它并通过 GDB 运行。

```
start MSYS
change dir where the program resides
$ gdb generatore.exe (the one compiled -g that fails)
$ run 
```

它在 GDB 中完美运行。我一步一步走过去。逐行。完美的。我试着用大量的数据来强调它。所有作品。无法重现错误。但是，如果从命令行运行相同的可执行文件，它会失败。

我怀疑一些指针的不可预测的行为，但我无法在任何地方找到它。

有没有人遇到过类似的事情？我应该在哪里检查？另外，我对 GDB 不太熟悉，因为它运行平稳，我可以以某种方式强制控制以找出它失败的原因吗？您可以告诉我任何其他免费的 Windows 调试解决方案吗？如何调试不可预测的行为？

非常感谢您的关注，格言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:17:58.623

有一个很棒的免费工具可以捕获与指针、内存分配、释放等有关的所有类型的运行时错误，这些错误在编译时无法捕获，因此您的编译器不会警告您：valgrind [http://valgrind .org/](http://valgrind.org/)。问题是，AFAIK 它不能在 Windows 上运行。但是，如果您的程序是纯 ANSI C，您应该能够构建它并在 Linux 机器上使用 valgrind 运行它。

我不是 100% 确定它，但它应该在虚拟机中运行正常，所以如果你没有单独的 Linux 计算机，你可以尝试在 Virtual Box 或 VmWare 中安装例如 Ubuntu，并尝试在 valgrind 中运行你的程序它。

# c# - 绘制树形图的最简单方法？

> ID：13764730
> 
> 赞同：2
> 
> 时间：2012-12-07T14:10:07.590
> 
> 标签：c#, javascript, python, graphics

我想要一个生成树图的程序，看起来很像[这样](http://i.imgur.com/P11MX.jpg)

这将成为我正在使用 C# 进行的项目的一部分，但如果有办法让 Python 或 Javascript 做到这一点，那也可以。也许是一些 C# 库，或者带有我可以提供给它的参数的 JavaScript/Python 库？

无论使用哪种编程语言，最重要的是它易于使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:12:03.317

您可能想要使用[pydot](http://code.google.com/p/pydot/)，它是[Graphviz](http://www.graphviz.org/) .DOT 格式可视化软件的接口。正如 Graphviz[指南](http://www.graphviz.org/pdf/dotguide.pdf)中所述，.DOT 格式可让您设计与您发布的图表相似的图表以及更复杂的图表。

`pydot`这是文档中的一个示例：

```
import pydot
graph = pydot.Dot('graphname', graph_type='digraph') 
subg = pydot.Subgraph('', rank='same') 
subg.add_node(pydot.Node('a')) 
graph.add_subgraph(subg) 
subg.add_node(pydot.Node('b')) 
subg.add_node(pydot.Node('c')) 
```

如果您正在查看 Javascript，[canviz](http://code.google.com/p/canviz/)是一个备受推崇的库，它允许您将 .DOT 图形绘制到浏览器画布上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:15:23.637

[Graphviz bindings 周围](http://graphviz.codeplex.com/)有一个C# 包装器。

我正在开发一个使用 Graphviz 生成树的项目（虽然不是在 C# 中），而且效果很好。

# android - IDEA 12 错误“无法重新加载 AVD 列表：解析 /tools/lib/devices.xml 时出错”？

> ID：13764734
> 
> 赞同：7
> 
> 时间：2012-12-07T14:10:26.037
> 
> 标签：android, intellij-idea

我安装了新的 IntelliJ IDEA 12，社区版。我用它打开了一个在 IDEA 11 中创建的 Android 项目（12 之前的最后一个版本出现了）。当我尝试运行 Android 应用程序时，出现错误：

> 无法重新加载 AVD 列表：解析 MY_PATH/tools/lib/devices.xml 时出错

有人收到这个错误吗？如何解决？

这是适用于 Linux 64 位机器的 IDEA 12。

**编辑**

我**正在**使用 SDK 工具 r21。

![](../Images/01f48408a9474033d3fba806970c754e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-13T13:10:28.837

从“../sdk/tools/lib/devices.xml”复制 devices.xml 文件。

到您的本地文件夹：

C:\用户\用户名.android\

解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T09:32:43.817

对于那些（像我一样）在 IDEA 11.x 中更改了 XMl 文件内容的人来说，这是一个解决方案`Android-SDK/adt-bundle-linux/sdk/tools/lib/devices.xml`。

解决方案是`devices.xml`从**原始 SDK 文件夹**中获取文件并将**其复制**到`lib`您的 Android SDK 文件夹中的文件夹中。

无需触摸`devices.xml`您的`.android`目录，因为 IDEA 12 在安装过程中将其禁用。

![](../Images/a95234d3fc7dd71d8c9771cdab664c60.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T05:45:10.710

无法重新加载 AVD 列表：针对此错误解析 MY_PATH/tools/lib/devices.xml 时出错

1.  从 C:\Users\admin\AppData\Local\Android\android-sdk\tools\device.xml 复制 device.xml

2.  替换 MY_PATH/tools/lib/devices.xml

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-28T09:22:42.447

将我的 SDK 更新到 4.3 并将 sdk 平台工具更新到 18 后，我能够摆脱这个错误。感谢下面的链接

[如何为 eclipse 和 android studio 拥有单个 android SDK 和 AVD](https://stackoverflow.com/questions/16881616/how-to-have-single-android-sdk-and-avd-for-eclipse-and-android-studio)

# jquery - 创建 jQuery 滑块以具有从 1 到 10 的评分系统

> ID：13764737
> 
> 赞同：0
> 
> 时间：2012-12-07T14:10:28.537
> 
> 标签：jquery, jquery-mobile

我想创建一个具有看起来像图像中的评级系统的滑块（颜色不需要匹配，只需数字）。

![http://i.imgur.com/FmD7D.jpg](../Images/8745b90eb49de92100f1f826ac28a577.png)

我知道我应该使用

```
$("#slider").slider(); 
```

位，如下所示：http: [//docs.jquery.com/UI/Slider](http://docs.jquery.com/UI/Slider)，但我不太了解如何构建最小（0,5 或 1）、最大（10）和步骤（0,5或 1) 在里面。另外，在那之后，我有一个按钮

```
<a href="#linkToOtherPage" data-direction="reverse" data-role="button" data-theme="b">Save</a> 
```

当它被点击时，我希望它显示一个警报，表明所选评级已保存。有人知道该怎么做吗？

### 编辑

刚刚发现 jquery-mobile 以另一种方式处理滑块。在这种情况下，我使用的是 jQuery-mobile。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:12:49.867

```
$("#slider").slider({ max: 10, min: 1, step: 0.5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:16:36.113

未经测试，但从您引用的文档看来，这应该可以解决问题：

```
$( "#slider" ).slider( { min: 0.5,
                           max: 10,
                           step: 0.5,
                           value: 5 } ); 
```

要显示滑块中的值并将其显示在警报中，请尝试以下操作：

```
<script>

  function saveSlider() {
    var value = $( "#slider" ).slider( "option", "value" );
    alert ("you have selected the value " + value);
  }

</script>

<input type="button" value="click me" onClick="saveSlider();" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T11:24:04.313

发现我需要使用 jQuery-mobile 滑块功能。现在用这个：

```
 <input type="range" name="slider-mini" id="slider-mini" value="5" min="1" max="10" data-highlight="true" data-mini="true" />
        <script>
          function saveSlider() {
            var value = $( "#slider-mini" ).val();
            alert ("You have selected the value: " + value);
          }

        </script> 
```

它有步骤而不是 0,5，但现在没关系。

# sql - 操作是执行的触发器想要回滚

> ID：13764747
> 
> 赞同：2
> 
> 时间：2012-12-07T14:11:01.580
> 
> 标签：sql, triggers, oracle11g

我想写一个关于建表的日志系统。我希望如果有人想更改构建表记录，则执行触发器。触发任务写入 building_log 表，在 building 表中要更改的列。重要提示：建表不受此操作的影响。是否有可能，当有人想要更改构建表但构建表不受此操作影响时，我会收到通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:15:54.113

听起来您只是在寻求“触发器”：您可以[在优秀的概念指南中](http://docs.oracle.com/cd/E11882_01/server.112/e25789/srvrside.htm#CNCPT118)阅读它们。

但是甲骨文有一个内置的特性可以做你想做的事情，叫做[闪回数据存档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25518/adfns_flashback.htm#ADFNS01011)——如果你可以使用它，我建议你研究一下。

- - 编辑：

好的，我想我误读了这个问题。您想*默默地*阻止更新。不管这是否是一个好主意，对于触发器，您可以用原始值`before update`覆盖这些值。没有简单的方法可以用 做类似的事情，但我认为你不是在要求这样做。`:new``:old``insert`

如果您真的需要静默地阻止插入，也许您可​​以考虑向用户公开视图而不是表本身，并创建[`instead of`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm#i1006376)触发器

# css - 如果它的父级都没有固定大小，为什么 textarea 不接受相对字体大小？（火狐 18.0 Mac）

> ID：13764748
> 
> 赞同：0
> 
> 时间：2012-12-07T14:11:01.740
> 
> 标签：css, macos, html, firefox, textarea

在 Firefox 中渲染文本区域字段时，我遇到了一个非常不寻常的问题。到目前为止，我还没有在 Mac 上测试过 18.0 以外的其他版本。

我的问题是，字体大小总是相对于 13px（操作系统默认值）而不是它的父级的 16px。如果我为它的父级定义一个固定的字体大小，它会按预期工作。但是，如果所有父母都有一个相对的字体大小，那么 textarea 的字体大小只是相对于我的操作系统默认值。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Test Firefox ..</title>

    <style>
        /* Fixed sizes */
        /* body { font-size: 12pt; } */
        /* body { font-size: 16px; } */
        /* body { font-size: 0.4234cm; } */

        /* Dynamic sizes */
        /* body { font-size: 1em; } */
        /* body { font-size: 100%; } */
        /* body { font-size: medium; } */

        textarea { font-size: 1em; }
    </style>
</head>
<body>
    <textarea rows="4" cols="20">abc</textarea>
</body>
</html> 
```

类似的问题，但不包括我的情况：[Why <textarea> and <textfield> not take font-family and font-size from body?](https://stackoverflow.com/questions/2874813/why-textarea-and-textfield-not-taking-font-family-and-font-size-from-body)

任何人之前都经历过类似的事情，或者可以在其他浏览器（版本）或操作系统中确认这种行为？

编辑：这是 jsfiddle.net 上的代码：http: [//jsfiddle.net/E4WwV/](http://jsfiddle.net/E4WwV/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:24:45.263

在 Firefox（我不知道其他浏览器是否也有）中，您可以设置两个默认字体大小：

*   默认字体大小（16px）
*   *具有通用字体系列等宽*字体(13px)的文本的默认字体大小

由于我的示例中的默认字体大小仅为 1em（对于 textarea 和正文），它是默认字体大小的 1 倍，所有等宽文本为 13px，所有其他文本为 16px。

这是一篇有很好解释的文章，也是一个可用的解决方法： http: [//meyerweb.com/eric/thoughts/2010/02/12/fixed-monospace-sizing/](http://meyerweb.com/eric/thoughts/2010/02/12/fixed-monospace-sizing/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T08:59:50.123

Textarea 和 body 使用不同的字体系列。Textarea 默认使用等宽系统字体，系统字体会根据您在 Gecko 中的浏览器字体偏好来调整它们的大小。因此，如果您的偏好将等宽字体的正常大小设置为 13 像素，那么在这种情况下您最终会得到...

# jquery - 即时创建文本项以及生成富文本格式文档

> ID：13764749
> 
> 赞同：1
> 
> 时间：2012-12-07T14:11:03.213
> 
> 标签：jquery, oracle-apex

在 Oracle ApEx 4.1 中并假设通过使用 jQuery，我如何根据下拉列表动态创建文本项字段，其中询问用户需要多少文本项？

一个基本示例是，如果用户从下拉列表中选择 3，则将向用户显示 3 个单独的文本字段。

然后我的另一个问题是，我将如何将这些字段中的数据保存到数据库中？

除了上述之外，根据存储在数据库中的数据，我还需要基于一些模板生成富文本格式 - 这如何在 Oracle ApEx 中完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:45:17.847

您可以通过多种方式解决此问题。
但是，如果您想要可以引用的实际页面项目`:P20_SOME_ITEM`并希望即时生成这些项目：那将行不通。

* * *

## 页面项目

如果您知道存在上限并且希望使用实际的页面项目，那么您可以通过在页面项目上设置条件来实现此目的。例如，选择值从 1 到 6 的列表。在更改时提交页面。`P20_ITEM1`始终显示第一项。第二项`P20_ITEM2`有一个条件，类型为`SQL Expression`：

```
:P20_AMOUNT>1 
```

然后，您可以将相同的条件应用于其他项目：`:P20_AMOUNT>2`, `>3`,...

* * *

## 项目数组

另一种方法仍然是使用文本输入，但不被绑定变量引用。您可以应用与表格形式相同的逻辑：使用项目数组。你仍然可以通过以下几种方式来解决这个问题：

**(1)**例如：创建一个实际的手动表格形式经典报告，来源：

```
select apex_item.text(1, null) some_item
from dual
connect by level <= :P20_AMOUNT 
```

使该列成为标准报告列。您不会有 addrow 按钮，但由于第一行将始终存在，您可以克隆该行。

```
function addRows(){
   var lAmount = $("#P20_AMOUNT").val(),
       lTbody = $("#report_tabform tbody.uReportBody table tbody"),
       lInitRow = $("tr:first", lTbody);
   for(var i=1;i<lAmount;i++){
      lTbody.append(lInitRow.clone());
   };
}; 
```

这是主题 23 (Crimson) 的选择器，因此您可能需要对其进行调整。它将克隆第一行并将其附加 x 次。例如，您可以在按钮中调用此函数。

**(2)**创建一个 plsql 区域 当然你也可以通过一个 PLSQL 区域输出所需的 HTML。

```
FOR i IN 1..:P20_AMOUNT
LOOP
   htp.p('<input type="text" name="f01" />');
END LOOP; 
```

这也需要在金额选择更改后提交页面。

**(3)**或者使用javascript创建一切：

```
//with empty region as basis
//pNode: node which will hold the generated table
//pName: name of the item array (f01, f02,...)
//pAmount: amount of items to be generated
function generateItemArray(pNode, pName, pAmount){
   var lTable = $('<table></table>'), 
       lRow = $('<tr></tr>'), 
       lCell = $('<td></td>'),
       lInput = $('<input name="'+pName+'" type="text" />'),
       lnRow, lnInput;
   //ln vars: will hold cloned items
   //cloning is necessary because the same instance can not be
   //put in multiple places
   for(var i=1;i<=pAmount;i++){
      lnRow = lRow.clone(); //new row
      lnRow.append(lCell.clone().text("Text for item "+i)); //first cell: label
      lnRow.append(lCell.clone().append(lInput.clone())); //second cell: input item
      lTable.append(lnRow); //append the row to the table
   };

   pNode.html(lTable);  //replace node contents with new table
   // or use append - but you may want to clear the previous content
   // Best use would be to provide a container which you know will only
   // contain the generated items.
}; 
```

当金额发生变化时，这不需要提交。您可以通过绑定到选择列表的 onchange 事件来动态执行此操作。

**--->**
在这 3 种情况下，您可以通过关联的数组访问提交的值。例如，考虑这个 After Submit 过程：

```
for i in 1..apex_application.g_f01.count
loop
   apex_debug_message.log_message('item value: '||apex_application.g_f01(i));
end loop; 
```

当您在调试模式下运行页面时，这会将值发送到调试输出。

# php - 未指定 http:// 或 https:// 时如何获取方案？

> ID：13764751
> 
> 赞同：0
> 
> 时间：2012-12-07T14:11:05.887
> 
> 标签：php, http, url, https

我希望用户能够在他们的公司设置对话框中输入他们的公司网站 URL，但我需要验证这一点。除了典型的清理功能之外，我想检查 URL 方案是否`http://`假设`https://`用户已经输入了它。

我的函数已经解析输入的 url 以使用正则表达式检测方案，但我想（理想情况下）检查来自服务器 ala file_get_contents 或 parse_url 的 URL 并获取方案，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T14:14:04.033

看看[`parse_url()`](http://php.net/manual/en/function.parse-url.php)。该方案将在`scheme`数组的元素中返回。

**编辑 1**

> 部分 URL 也被接受，`parse_url()`尽量正确解析它们。

如果 URL 中不存在该方案，则该`scheme`元素将丢失。

**编辑 2**

正如@BenediktOlek 所说，您可以使用 cURL 来查询服务器：

```
$curl = curl_init();
curl_setopt_array(
    $curl,
    array(
        CURLOPT_URL            => 'http://www.example.com/',
        CURLOPT_HEADER         => TRUE,  // Output the response headers
        CURLOPT_RETURNTRANSFER => TRUE,  // Return output as a string
        CURLOPT_NOBODY         => TRUE   // Use request method "HEAD"
    )
);
$curlData = curl_exec($curl);
curl_close($curl); 
```

如果服务器需要 HTTPS 连接，并且配置正确，那么它应该返回`Location:`带有 HTTPS URL 的标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:20:44.207

您可以使用该`cURL`模块来查询服务器。但我想假设 http 是安全的。如果不允许使用 http，则正确配置的网络服务器应重定向。

[更多关于 cURL 的信息](http://php.net/manual/en/book.curl.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T14:15:07.580

像这样使用[`parse_url()`](http://php.net/manual/en/function.parse-url.php)with 参数`PHP_URL_SCHEME`：

```
$scheme = parse_url( $url, PHP_URL_SCHEME);
if( !in_array( $scheme, array( 'http', 'https'))){
  // Wrong URL
}
// Good URL 
```

### 评论后：

```
if( strncmp( $url, 'http://', 7)){ // 7 = strlen( 'http://')
  // Not secured
} else if (strncmp( $url, 'https://', 8)) {
  // Secured
} else if ( strpos($url, '://') !== false){
  // ftp://, sftp:// and other protocols
  // you may do this also by: preg_match and regexp ~^[\w]+://~i - will be more accurate
} else {
  // any other URL, www.google.com and so on...
  // auto-assue: not secured
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-23T16:40:36.073

或者也许这有帮助？

```
 NSRange range = [urlName rangeOfString:@"http://"];
//NSLog(@"found or not found");
if (range.location != NSNotFound)
{
    //NSLog(@"range is found");
    //range.location is start of substring
    //range.length is length of substring
} else
{
    //NSLog(@"range is not found");
    //urlName = @"http://"  urlName;
    //NSString *string = [NSString stringWithFormat:@"%@%@", @"Hello", @"World"];
    urlName = [NSString stringWithFormat:@"%@%@", @"http://",urlName];
    //NSLog(@"NEW urlName......%@", urlName);
} 
```

# c# - 程序集解析和合并程序集

> ID：13764755
> 
> 赞同：0
> 
> 时间：2012-12-07T14:11:13.353
> 
> 标签：c#, dll, assemblies

当我遇到以下情况时，谁能告诉我组装解决的顺序是什么？

在我的 bin 中，我有我的 exe 和 2 个 dll：

*   程序集 A（版本 1）、B 和 C 合并到 X 中（因此 4 个程序集合并为 1 个）
*   组件 A（版本 2）

我所做的所有参考都不包括该`UserSpecificVersion`参数。

*   现在，在我的 exe 调用期间，正在使用哪个 A？
*   此外，在程序集 B 中的调用期间，正在使用哪个 A？

如果它是相反的方式怎么办（所以首先来自B，然后是我的exe）

有这方面的任何文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:40:59.447

> 我所做的所有引用都不包括 UserSpecificVersion 参数。

我假设您实际上是指参考程序集的“特定版本”设置，并且您将其设置为 False。这在运行时无效，仅在编译时有效。添加程序集时，它记录了参考程序集的 [AssemblyVersion]。如果您*稍后*重新编译您的程序，但它找到了具有*不同*版本的参考程序集，那么它不会抱怨，而是按原样使用新程序集。这通常是有风险的，只有在丢失原始参考组件后尝试跛行并且不知道新参考组件的变化程度时，您才会这样做。始终将此设置保留为默认值 True，仅当您为自己挖了一个无法摆脱的深洞时才使用 False。

在运行时，它将始终坚持查找具有正确显示名称和从参考程序集中记录的 [AssemblyVersion] 的程序集。当您有两个具有相同名称和名称空间的程序集时，您通常会遇到麻烦，您往往需要*外部别名*才能将自己从那个洞中挖掘出来。使用 ILMerge 确实是一种解决方法，它会更改程序集的显示名称。但是，这仍然会给您留下相互冲突的命名空间+类型名称，尚不清楚您是如何绕过该障碍的。

所以典型的结果是，EXE 将尝试使用重命名的程序集显示名称查找 A2，而 B 将尝试查找 A1。我无法从提供的信息中以 100% 的保真度确定它。如果您有非典型案例，请使用 Fuslogvw.exe 来跟踪程序集绑定。请务必选择“记录所有绑定”选项。

# javascript - 如何将文本从标签附加到其他元素

> ID：13764758
> 
> 赞同：-1
> 
> 时间：2012-12-07T14:11:19.807
> 
> 标签：javascript, jquery, click, append

我有这个标记：

```
<span class="top_ticker_middle"></span>
<div class="pc_elements">
  <fieldset class="checkable">
    <span class="as_cp_checkbox"></span>
    <input type="hidden" name="pc_element_01" id="pc_element_01" value="yes">
    <label for="pc_element_01">Some text</label>
  </fieldset>
</div> 
```

现在：我需要`top_ticker_middle`在单击后将文本从标签附加到跨度。我在列表中有很多这样的字段集，我应该为指定的单击元素执行此操作。我还需要在 span 中一一附加这些值`top_ticker_middle`。所以我这样做：

```
$('.pc_elements fieldset').live('click',function(){
    var text_label = $(this).children('label').text();
    $('.top_ticker_middle').empty().append(text_label);
}); 
```

出了点问题，无法正常工作，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:14:28.470

### 代替：

```
var text_label = $(this).children('label').text();
$('.top_ticker_middle').empty().append(text_label); 
```

### 和：

```
var text_label = $(this).find('label').text();
$('.top_ticker_middle').html($('.top_ticker_middle').html() + text_label); 
```

我遇到了同样的问题！:)

### 原始小提琴： http: [//jsfiddle.net/bAZnT/](http://jsfiddle.net/bAZnT/)（实际上这可行！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:14:14.727

我建议通过 dom 树结构查找跨度：

```
$('.pc_elements fieldset').live('click',function(){
    var text_label = $(this).children('label').text();
    $(this).parent().find('.top_ticker_middle').empty().append(text_label);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:21:39.983

```
$(document).ready(function(){
    $('.pc_elements fieldset').live('click',function(){
        var text_label = $(this).children('label').text();
        $(this).parent().prev('.top_ticker_middle').empty().append(text_label);
    });
});​ 
```

# reporting-services - 在 Reporting Services 中，将背景图像的质量提高到 96 dpi 以上

> ID：13764759
> 
> 赞同：6
> 
> 时间：2012-12-07T14:11:27.170
> 
> 标签：reporting-services

我想使用背景图像，当我将其放入 Reporting Services 2008 R2 时，图像 dpi 降低到 96 dpi。（而不是 300）

这太低了，用户无法阅读，我担心。

当我上网时，我发现了这个结果：

[http://social.technet.microsoft.com/Forums/en-US/sqlreportingservices/thread/48de91f9-1844-40c1-9614-5ead0b4b69a5#P1Q14](http://social.technet.microsoft.com/Forums/en-US/sqlreportingservices/thread/48de91f9-1844-40c1-9614-5ead0b4b69a5#P1Q14)

> **问题 14**：如何提高 Reporting Services 2005 中导出报表的 PDF 质量？
> 
> **回答**： Reporting Services 2005 中的 PDF 渲染器会调整以 96 DPI 提供的所有图像的大小，无论您将图像传递给渲染器时图像的 DPI 是多少。这意味着 300 DPI 图像或什至 600 DPI 图像在 PDF 中的大小将如同只有 96 DPI 一样。换句话说，您的高 DPI 图像可能会渲染得比预期大。
> 尽管将图像大小设置为 96 DPI，但 PDF 渲染器似乎以高于 96 DPI 的质量渲染更高 DPI 的图像。即使尺寸错误，图像实际上也会以更高的质量呈现。一个必要的解决方法是根据 96 DPI 计算将图像大小调整为适当的英寸数。然后使用 Bitmap.SetResolution 将图像设置为至少 300 DPI。这可能会提供更高质量的图像，该图像具有适当数量的像素以适合报告。

但我不知道如何使用 Bitmap.SetResolution，我使用的是经典的报表查看器 Web 控件，我需要一个功能齐全的 pdf 导出。

PS：也许该问题已在 Reporting Services 2012 中解决。有人有一些信息吗？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T15:37:59.843

我找到了一个网页，它解释了如何以良好的 dpi 导出 PDF。[http://codeproject.com/Articles/95750/High-fidelity-printing-through-the-SSRS-Report-Vie](http://codeproject.com/Articles/95750/High-fidelity-printing-through-the-SSRS-Report-Vie)

关键是用xml代码初始化deviceInfo字符串

```
 var sb = new System.Text.StringBuilder(1024);
       var xr = System.Xml.XmlWriter.Create(sb);
       xr.WriteStartElement("DeviceInfo");
       xr.WriteElementString("DpiX", "296");
       xr.WriteElementString("DpiY", "296");
       xr.Close();

        deviceInfo = sb.ToString();

        rsExec.SetExecutionParameters(parameters, "fr-fr");

        results = rsExec.Render(format, deviceInfo,
                  out extension, out encoding,
                  out mimeType, out warnings, out streamIDs); 
```

在这种情况下，此解决方案有效。我可以生成具有良好 dpi 的 pdf 文件，但是带有 activex 的打印按钮不起作用（这应该不是问题）和导出按钮也不起作用。我必须添加一个下载按钮才能打印。这是部分解决方案恕我直言

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-19T11:57:42.657

如果您使用 Reporting Services 的 WebAPI 接口，我发现这种方式有效：

为了获得更好的图像 PDF 渲染，像这样传递设备信息： `http://serverName/ReportServer?/pathtoReport/ReportName&InvoiceIdOrOtherParameter=24013&rs:Command=Render&rs:Format=PDF&rs:DeviceInfo=<DpiX>300<%2FDpiX><DpiY>300<%2FDpiY>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-08T21:28:25.400

上面的答案让我明白了这一点，但我想为那些使用不同编码平台的人澄清一下。目标是构建以下要作为 DeviceInfo 参数发送的字符串：

```
 DeviceInfo = '<DeviceInfo><DpiX>300</DpiX><DpiY>300</DpiY></DeviceInfo>' 
```

通过这样做，我能够使用 300dpi 图像作为背景图像并正确渲染为 pdf，尽管您会想在 reportviewer 中设计时找到一种隐藏图像的方法，因为预览仍然显示它更大。

# windows-phone-8 - Windows Phone 8 - 模拟触摸屏事件

> ID：13764761
> 
> 赞同：8
> 
> 时间：2012-12-07T14:11:28.163
> 
> 标签：windows-phone-8

模拟用户点击 Windows Phone 8 设备的触摸屏的最佳方法是什么？

我可以想象的一种方法是使用本机代码来调用控制鼠标事件的 Win32 API 函数。这将假设触摸屏事件或多或少与鼠标事件相同，并且这些 API 函数是可访问的。有谁知道 WP8 是不是这样？

另一种方法是为 Windows Phone 提供类似 Android ADB 的东西。在 Android 上，可以使用 ADB 从 PC 控制设备，也可以模拟触摸屏事件（例如通过 Monkeyrunner）。如果有像 ADB for Windows Phone 8 这样的工具，我还没有找到任何信息。

寻找解决方案的目的是在自动化测试过程中集成 Windows Phone 8 设备。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T12:51:33.257

我发现在 Windows Phone 8 的 System32 文件夹中有一个名为 InputInjection.dll 的 DLL 文件（至少在我安装的模拟器图像中）。

该库包含以下功能：

*   ApiInject 初始化
*   ApiInjectTouchEvent
*   ApiInjectButtonEvent
*   ApiInjectEnableExclusive
*   ApiInjectUninitialize

![Dependency Walker 中的 InputInjection.dll](../Images/296147688435c9520617ca361b53663e.png)

做了一些研究，我发现有官方方法可以模拟 Windows 8 开发的触摸输入：

*   [http://social.technet.microsoft.com/wiki/contents/articles/6460.simulating-touch-input-in-windows-8-preview-versions-using-touch-injection-api-en-us.aspx](http://social.technet.microsoft.com/wiki/contents/articles/6460.simulating-touch-input-in-windows-8-preview-versions-using-touch-injection-api-en-us.aspx)
*   [http://msdn.microsoft.com/library/windows/desktop/hh802896(v=vs.85).aspx](http://msdn.microsoft.com/library/windows/desktop/hh802896(v=vs.85).aspx)

但是，用于 Windows 8 开发的函数在 Windows Phone 8 上不可用。但是这些函数的命名类似于我在 InputInjection.dll 中找到的函数：

*   InitializeTouchInjection 类似于 ApiInjectInitialize
*   InjectTouchInput 类似于 ApiInjectTouchEvent
*   (...)

我无法找到有关 InputInjection.dll 及其功能的任何文档。这些函数也不会出现在 SDK 的头文件中。也许微软在 Windows Phone 开发期间使用这些函数在内部进行自己的测试。

问题是：是否可以访问这个库并以某种方式调用这些函数？我猜这类似于在 iOS 上使用“私有 API”。我尝试了几种方法来通过使用本机 C++ 代码的 Windows Phone 8 应用程序来实现这一点，但到目前为止我没有运气（基本原因是这些应用程序在 Windows Phone 上以沙盒方式运行）。有什么方法可以在 Windows Phone 上运行二进制文件（可能通过调试桥或其他方式）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:52:19.560

您可以从 Win32 服务/内核驱动程序访问所有这些 API。将头文件包含到您的源代码和注入方法库中，它将起作用

# c# - Activator.CreateInstance - 无法使用返回类型

> ID：13764762
> 
> 赞同：0
> 
> 时间：2012-12-07T14:11:35.587
> 
> 标签：c#, object, ioc-container

我正在尝试手动滚动我自己的[IoC](http://en.wikipedia.org/wiki/Inversion_of_control)工具。

这是 IoC 代码的一部分：

```
public static object Resolve(Type contract)
{
   Type Implementation = typeSettings[contract];

   ConstructorInfo constructor = Implementation.GetConstructors()[0];

   ParameterInfo[] constructorParam = constructor.GetParameters();

   if (constructorParam.Length == 0)
      Activator.CreateInstance(Implementation);

   List<object> paramList = new List<object>(constructorParam.Length);

   foreach(ParameterInfo param in constructorParam)
      paramList.Add(Resolve(param.ParameterType));

   return constructor.Invoke(paramList.ToArray());
} 
```

我想返回一个泛型类型 T 的对象。我做不到。

我也无法对其进行类型转换。我只使用一个具有两个依赖项的接口。( `IPredictingFuture`, `EartAndSkyPrediction`, `BadConnections`)

我正在尝试将其类型转换为接口类型。（为了访问我的客户端代码中的方法。）但这也行不通。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:26:54.533

In your method, `contract` is only known at runtime, so it cannot be used at compile time. Depending on your callers, you may be able to change it to a generic type parameter, in which case you can do:

```
public static object Resolve(Type contract)
{
   Type Implementation = typeSettings[contract];

   ConstructorInfo constructor = Implementation.GetConstructors()[0];

   ParameterInfo[] constructorParam = constructor.GetParameters();

   if (constructorParam.Length == 0)
      Activator.CreateInstance(Implementation);

   List<object> paramList = new List<object>(constructorParam.Length);

   foreach(ParameterInfo param in constructorParam)
      paramList.Add(Resolve(param.ParameterType));

   return constructor.Invoke(paramList.ToArray());
}

public static T Resolve<T>()
{
   return (T)Resolve(typeof(T));
} 
```

Overloaded because as you mention, `Resolve(Type)` calls itself recursively, and the generic version cannot call itself like that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:47:12.367

调整这个场地的命名空间，我已经用了很多年了......

```
using System;
using System.Collections.Generic;
using DataAccess.Core.DataInterfaces;
using DataAccess.Core.Utils;

namespace StackOverflowExample
{
    public class SimpleIoC<T>
    {
        public T getInstance()
        {
            return getInstance(null);
        }

        public T getInstance(object[] initializationParameters)
        {
            Type type = Activator.CreateInstance(typeof(T), initializationParameters).GetType();
            // Any special initialization for an object should be placed in a case statement
            // using that object's type name
            switch (type.ToString())
            {
                // Example
                //case "DataAccess.Data.ApplicantDao":
                //    // - Do pre-instanciation initialization stuff here -
                //    return (T)Activator.CreateInstance(typeof(T), initializationParameters);
                default:
                    return (T)Activator.CreateInstance(typeof(T), initializationParameters);
            }
        }
    }
} 
```

不确定这是否会帮助您，但我将其用作业务规则评估引擎的一部分...

```
using System;
using System.Collections.Generic;
using System.Reflection;
using System.Threading;

namespace StackOverflowExample
{
    public static class DynamicObjectFactory
    {
        private static readonly object _lock = new object();

        public static object getInstance(string assemblyName, string className)
        {
            Monitor.Enter(_lock);
            try
            {
                System.Reflection.Assembly asm = System.Reflection.Assembly.Load(assemblyName);
                return asm.CreateInstance(className, false, System.Reflection.BindingFlags.CreateInstance, null, null, null, null);
            }
            finally
            {
                Monitor.Exit(_lock);
            }
        }

    public static object getInstance(string assemblyName, string className, object[] constructorParameters)
    {
        Monitor.Enter(_lock);
        try
        {
            System.Reflection.Assembly asm = System.Reflection.Assembly.Load(assemblyName);
            return asm.CreateInstance(className, false, System.Reflection.BindingFlags.CreateInstance, null, constructorParameters, null, null);
        }
        finally
        {
            Monitor.Exit(_lock);
        }
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:34:32.333

谢谢各位，回复。我添加了这个重写的 Resolve 方法

```
public static T Resolve<T>() { return (T)Resolve(typeof(T)); } 
```

现在，我得到了正确的类型。这是客户端代码：

```
IPredictingFuture predictions;
predictions = IoC.Resolve<IPredictingFuture>(); 
```

这样，预测后的智能感知就可以正常工作。

如果任何读者因为试图制作 IoC 容器而遇到这个问题，我会向他们指出这些很棒的链接：

1.  [Ken 的 33 班轮 IoC](http://kenegozi.com/Blog/2008/01/17/its-my-turn-to-build-an-ioc-container-in-15-minutes-and-33-lines)
2.  [Ayende 的 15 班轮 IoC](http://ayende.com/Blog/archive/2007/10/20/Building-an-IoC-container-in-15-lines-of-code.aspx)
3.  [Ayende](http://ayende.com/Blog/archive/2007/10/20/Dependency-Injection-doesnt-cut-it-anymore.aspx)关于为什么不应该编写自己的 IoC 的后续帖子
4.  关于 IoC 容器的[好链接](http://blog.agafonov.net.ua/post/2010/09/17/Inversion-of-control-%28IOC%29-NET-patterns.aspx)
5.  另一个关于 IoC 的[SO 问题](https://stackoverflow.com/questions/386535/code-your-own-ioc-container)

# regex - 报表生成器表达式 - 计数项目

> ID：13764763
> 
> 赞同：1
> 
> 时间：2012-12-07T14:11:36.360
> 
> 标签：regex, reporting-services

我想使用 Microsoft Report Builder 为 SharePoint 2010 列表构建报告。

一切正常，只有一个例外:-(

使用以下表达式计算所有元素可以正常工作：

```
=Count(Fields!Status.Value, "DataSetDocLib") 
```

但是如何计算具有特定名称的项目？

我尝试了很多表达，但没有任何效果。例如，我只想计算名称为“Running”的项目：

```
=CountDistinct((Fields!Status.Value, "DataSetDocLib"), "Running" ,Recursive)
=Count(Fields!Status.Value Like "Status", "DataSetDocLib")
=CountDistinct(Fields!Status.Value, "Running" ,Recursive, "DataSetDocLib") 
```

这是可能的，正确的语法是什么？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:56:54.307

我做了少量的测试，使用以下应该可以工作：

```
=SUM(IIF(Fields!Status.Value = "Running", 1, 0)). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T09:12:34.763

我遇到了这个问题，如果有人偶然发现这个问题，我在另一篇文章中得到了帮助，答案在下面的链接中

[报表生成器 SUM IIF - 超过 1 个数据集](https://stackoverflow.com/questions/21603534/report-builder-sum-iif-more-than-1-dataset)

我不会把答案放在这里，所以功劳归于应得的地方（伊恩·普雷斯顿）

# html - html 地图/区域的样式化工具提示

> ID：13764769
> 
> 赞同：-2
> 
> 时间：2012-12-07T14:11:52.673
> 
> 标签：html, css, javascript-events

`<area>`有没有一种简单的方法可以为in制作样式化的工具提示`<map>`？默认情况下，浏览器似乎将区域文本呈现为黄色文本框。但是我有一些文本应该被格式化的情况。

我一直在尝试使用 Twitter Bootstrap 的工具提示和弹出框，但它们总是位于窗口的左上角。在 0,0。

**更新 - 屏幕截图和代码**

告诉将弹出框添加到饼图的区域元素中。每个`<area>`对应于饼图的一个部分。

```
$('area').popover({content:"I'm a cut off popover" ,trigger:'hover'}); 
```

我想让弹出框出现在悬停部分旁边。

我知道与`<area>`SO 相关的类似问题。然而，我的情况有所不同，因为我不知道这些部分的大小和位置。所以我无法生成自定义样式来设置*顶部*和*左侧*属性。

![Popover放在左上角](../Images/8e852425a8960c0be71254b8f59ae5cc.png)

常规工具提示也是如此。它们被放在左上角。但我宁愿选择弹出框，因为我需要格式化的内容。

希望这可以帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:17:31.773

只是不要使用这个淡黄色浏览器工具提示的 title 属性。

对于**自定义**工具提示，您必须使用**自定义**解决方案（显然基于 JavaScript）。[我建议你使用一个库（如 jQuery）并找到一个工具提示插件，它可以像这个](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)一样做你想要的

### 更新

对于引导工具提示的 css 问题，看起来存在位置问题。请提供更多代码，以便我们弄清楚发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:31:38.650

答案是这是 Bootstrap 中的一个错误 [https://github.com/twitter/bootstrap/issues/5000](https://github.com/twitter/bootstrap/issues/5000)

# c# - 特定组件的 Castle Windsor 类型工厂

> ID：13764771
> 
> 赞同：1
> 
> 时间：2012-12-07T14:12:17.310
> 
> 标签：c#, database-connection, castle-windsor, typed-factory-facility

我有一个使用多个不同数据库连接的应用程序。我想使用 Castle Windsor 的类型化工厂支持来注入一个工厂，该工厂将实例返回`IDbConnection`到我的存储库和其他组件中。

这是我的类型化工厂的界面的样子：

```
public interface IConnectionFactory
{
    IDbConnection CreateConnection();
} 
```

这是一个示例存储库：

```
public class AccountRepository
{
     private readonly IConnectionFactory connectionFactory;

     public AccountRepository(IConnectionFactory connectionFactory)
     {
         this.connectionFactory = connectionFactory;
     }

     public Account FindAccountById(int id)
     {
         using (var connection = connectionFactory.CreateConnection())
         {
             // TODO use the connection here
         }
     }
} 
```

以及我的组件注册的摘录：

```
// ...

container.Register(Component.For<IDbConnection>()
    .ImplementedBy<NpgsqlConnection>()
    .LifestyleTransient());

container.Register(Component.For<IConnectionFactory>()
     .AsFactory());

// ... 
```

我所有的`IDbConnection`s 都使用相同的类型 ( `NpgsqlConnection`) 实现，但我需要使用几个不同的连接字符串。理想情况下，我想设置 Windsor 以根据作为依赖项 `IDbConnection`的组件为我设置连接字符串（或将其传递给连接构造函数） 。`IConnectionFactory`

例如：

*   假设我有两个存储库，`AccountRepository`并且`ItemRepository`，它们`IConnectionFactory`在其构造函数中作为依赖项。
*   假设我还有两个名为`foo`and的连接字符串`bar`。
*   `AccountRepository`调用时`IConnectionFactory.CreateConnection()`，我希望它返回一个`IDbConnection`使用连接字符串`foo`。
*   但是，当一个`ItemRepository`调用时`IConnectionFactory.CreateConnection()`，我希望它返回一个`IDbConnection`使用连接字符串`bar`。

*温莎城堡有可能吗？*

我已经研究过这个主题，但没有找到任何适合我的确切情况的解决方案。理想情况下，我想让我的存储库不知道要使用的确切连接字符串，即我***不想***将我的连接工厂更改为：

```
public interface IConnectionFactory
{
    IDbConnection CreateConnection(string connectionStringName);
} 
```

我还阅读了我可以找到的所有文档和文章`ISubDependencyResolver`，`ITypedFactoryComponentSelector`但我不确定它们是否适用于这种情况或如何将所有内容拼凑在一起。

顺便说一句，我正在使用 Castle Windsor 3.1 和 .NET 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:18:17.177

也许使用真正的工厂，而不是打字工厂：

```
public ConnectionAFactory : IConnectionFactory
{
     public ConnectionAFactory()
     {
          this.connectionString = "foo";
     }
} 
```

并使用正确的存储库在 windsor 中注册它：

```
Component.For<AccountRepository>()
    .DependsOn(
        ServiceOverride.ForKey<IConnectionFactory>().Eq(typeof(ConnectionAFactory))); 
```

# c# - C# 中用于查找最大值的最佳数据结构？

> ID：13764774
> 
> 赞同：1
> 
> 时间：2012-12-07T14:12:34.097
> 
> 标签：c#, data-structures, find, element, max

我需要知道哪个是找到最大值的最佳数据结构，它是用 C# 实现的吗？现在我正在使用 SortedDictioniry 但它对键进行排序，基本上我不需要对键进行排序，但我需要的是一种更快的方法来找到最大值。同样在找到最大值后，我需要与该值对应的键或索引。此外，如果可以快速插入和快速删除元素，希望不超过 O(log n)。有没有这样的结构，我该如何使用它？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T14:16:07.950

这听起来就像一个[max-heap](https://en.wikipedia.org/wiki/Binary_heap)，有很多关于如何从头开始实现的在线信息（它不是 C# 标准数据结构的一部分）。

例如，看一下这个[实现](https://chinmaylokesh.wordpress.com/2012/02/16/c-binary-max-heap-implementation/)，并附上详细的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:31:30.677

如前所述，最有效的将是最大堆。它不是 .Net 的一部分，但您可以从第三方库中进行选择，例如[IntervalHeap](http://www.itu.dk/research/c5/Release1.0/c5doc/types/C5.IntervalHeap%601.htm)（来自[http://www.itu.dk/research/c5/](http://www.itu.dk/research/c5/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:25:05.303

您可以使用 a[`SortedList<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/ms132319%28v=vs.90%29.aspx)或 a [`SortedDictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/f7fta44c%28v=vs.90%29.aspx)（就像您已经使用的那样）。另一种合适的收集类型是 Max-Heap；但是，.NET 类库不包括一个。

有关 MSDN 上的比较，另请参阅[SortedList 和 SortedDictionary 集合类型](http://msdn.microsoft.com/en-us/library/5z658b67%28v=vs.90%29.aspx)。另外，如果您也想在最大值上获得快速的访问时间，那么我认为除了按键以某种方式排序之外没有其他可能性。

# pentaho - 如何在pentaho中循环获取文件名？

> ID：13764778
> 
> 赞同：4
> 
> 时间：2012-12-07T14:12:47.620
> 
> 标签：pentaho, kettle

我有 100 000 个文件。我想获取这些文件名的名称并且必须放入数据库中，我必须这样做

1.  获取 10 个文件名；
2.  将名称更新/插入数据库；和
3.  将这 10 个文件移动到另一个目录；并循环这三个步骤，直到找不到文件。

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T10:47:24.567

我附上了一个工作示例（我在水壶 4.3 上使用约 400 个文本文件对其进行了测试。）。

[转换](https://docs.google.com/open?id=0B_C8tdbiOkEAX09rYW5vdXVyZlk "转换.ktr") [.ktr job.kjb](https://docs.google.com/open?id=0B_C8tdbiOkEATmRMM2hrMDZnWGc "工作.kjb")

转换和作业都包含有关设置内容和位置的详细说明。

*   **Transformation.ktr**它从给定的源文件夹中读取前 10 个文件名，为文件移动创建目标文件路径。它输出文件名以插入/更新（我使用虚拟步骤作为占位符）并使用“将行复制到结果集”来输出文件移动所需的源和目标路径。
*   **job.kjb**所有的循环都是在这个工作中完成的。它执行“transformation.ktr”（插入/更新 10 个文件），然后将这 10 个文件移动到目标文件夹。之后，它会检查源文件夹中是否还有其他文件。如果有，则重复该过程，如果没有，则声明成功。

# java - 隐藏 JXTable 中的列？

> ID：13764784
> 
> 赞同：3
> 
> 时间：2012-12-07T14:13:05.700
> 
> 标签：java, swing, swingx, jxtable

我正在使用 JXTable，我想以编程方式隐藏一列。

有没有方便的方法来做到这一点（不设置最小/最大/首选宽度）？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T14:19:31.820

[从JXTable](http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/JXTable.html)获取相关列的[TableColumnExt](http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/table/TableColumnExt.html)，然后调用 setVisible() 。

# c - 在以太网帧中设置 CoS (PCP, 802.1P)

> ID：13764786
> 
> 赞同：6
> 
> 时间：2012-12-07T14:13:08.157
> 
> 标签：c, linux, sockets

有什么方法可以从我的应用程序（例如使用）中操纵以太网帧中的优先级代码点[（PCP）](http://en.wikipedia.org/wiki/IEEE_802.1p)`setsockopt()`字段的值？我想避免从头开始创建以太网帧的低级黑客攻击。

我在手册页中进行了搜索`socket(7)`，`ip(7)`但没有用于控制以太网帧字段的选项。

如果这是相关的，我需要它用于 TCP 套接字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T15:47:00.090

您可以使用 sockopt() 设置 vlan 优先级字段：

```
int priority = 7;
setsockopt(sfd, SOL_SOCKET, SO_PRIORITY, &priority, sizeof(priority)); 
```

在文件 net/8021q/vlan_dev.c 中，您可以看到 skb->priority 字段用于 VLAN 802.1Q TCI...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T03:17:38.997

每个 VLAN 设备上都有入口和出口映射。例如：

```
vconfig add eth0 333
vconfig set_egress_map eth0.333 2 4
vconfig set_egress_map eth0.333 3 5
cat /proc/net/vlan/eth0.333 
```

您可以在最后两行看到映射。

# .net - 如何在 .Net 3.5 中内联方法？

> ID：13764789
> 
> 赞同：0
> 
> 时间：2012-12-07T14:13:29.813
> 
> 标签：.net, inline

> **可能重复：**
> [C# 中的内联函数？](https://stackoverflow.com/questions/473782/inline-functions-in-c)

有人可以指导我如何请求 .Net 编译器使函数内联吗？谢谢

# ruby-on-rails - has_one of something it belongs_to

> ID：13764802
> 
> 赞同：0
> 
> 时间：2012-12-07T14:14:12.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 User 和 Todo 模型

Todo belongs_to User 和 User has_many todos

待办事项可以标记为“完成”，我想存储将其标记为完成的用户。

我有这个迁移

```
class CreateTodos < ActiveRecord::Migration
def self.up
    create_table :todos do |t|
      t.integer :done_by_user
    end
  end
end 
```

现在我想将标记待办事项的用户的用户 ID 存储在 :done_by_user

我在 Todo 课上试过这个

```
has_one :done_by_user, :class_name => "User" 
```

还有这个

```
has_one :done_by_user, :through => :user 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:20:18.980

在您的 Todo 课程中：

```
belongs_to :done_by_user, :class_name => "User", :foreign_key => "done_by_user" 
```

在您的用户类中

```
has_many :done_todos, :class_name => "Todo", :foreign_key => "done_by_user" 
```

现在你可以这样做：

```
user.done_todos   => ['done_todo_1', 'done_todo_2', ... , 'done_todo_n']
todo.done_by_user => < User Object > 
```

# sql - 加入逗号熟食字符串列 - sql server

> ID：13764803
> 
> 赞同：0
> 
> 时间：2012-12-07T14:14:13.430
> 
> 标签：sql, sql-server

我在存储过程中有一个代码，它需要加入逗号熟食字符串列。我试过了，但它无法被 sql server 识别。请让我知道正确的方法。这是存储过程中的代码：

```
INSERT INTO CPE_EXT_Downloaded (FileName, LocalServerID, WaitingACK, CreationDate, FileSize, MD5, ErrorMsgTime, LocationID, OfferID)  
    SELECT 
       cip.FileName, LS.LocalServerID, cip.WaitingACK, cip.CreationDate, 
       cip.FileSize, cip.MD5, cip.ErrorMsgTime, ILV.LocationID, cip.OfferID   
    FROM 
       @WorkSet ws       
    INNER JOIN 
       CPE_IncentiveDLBuffer_Pending cip WITH (NOLOCK) ON cip.POID = ws.POID
    INNER JOIN 
       CPE_IncentiveLocationsView AS ILV WITH (NOLOCK) ON ILV.IncentiveID = cip.OfferID 
    INNER JOIN 
       LocalServers AS LS WITH (NOLOCK) ON LS.LocationID = ILV.LocationID  
    CROSS APPLY on 
       dbo.split(cip.LocationGroups, ',') AS ST ON st.items = ILV.LocationID
    WHERE
       LS.MustIPL = 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:23:52.247

您是否考虑过定期加入？

```
 FROM @WorkSet ws       
        INNER JOIN CPE_IncentiveDLBuffer_Pending cip WITH (NOLOCK)
        on cip.POID = ws.POID
        inner join  CPE_IncentiveLocationsView as ILV WITH (NOLOCK)
        on ILV.IncentiveID= cip.OfferID and
           ','+cip.LocationGroups+',' like '%,'+ILV.LocationId+',%'
        Inner Join LocalServers as LS with (NoLock) on LS.LocationID=ILV.LocationID 
```

# google-maps-api-3 - 如何使用 google.maps.getLatLng？

> ID：13764807
> 
> 赞同：-2
> 
> 时间：2012-12-07T14:14:20.930
> 
> 标签：google-maps-api-3

我的代码：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script type="text/javascript" src="jquery.ui.map.full.min.js"></script>
    <script>
      function initialize() {
          $('#map_canvas').gmap().bind('init', function() { 
    // This URL won't work on your localhost, so you need to change it
    // see http://en.wikipedia.org/wiki/Same_origin_policy
    $.getJSON( 'demo.json', function(data) { 
        $.each( data.markers, function(i, marker) {
            $('#map_canvas').gmap('addMarker', { 
                'position': new google.maps.getLatLng(marker.town), 
                'bounds': true 
            }).click(function() {
                $('#map_canvas').gmap('openInfoWindow', { 'content': marker.content }, this);
            });
        });
    });
});
      }
    </script> 
```

为什么 google.maps.getLatLng 不起作用？

更新：

```
$('#map_canvas').gmap('addMarker', { geocoder = new google.maps.Geocoder(); 'position': new google.maps.LatLng(geocoder.getLatLng(marker.town)), 'bounds': true }) 
```

如何根据城镇名称找到纬度和经度？我刚刚尝试了以上没有结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:28:33.847

> 为什么 google.maps.getLatLng 不起作用？

您在文档中哪里可以找到它？

[google.maps.LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)构造函数的正确语法是：

```
new google.maps.LatLng(<latitude>, <longitude>) 
```

哪里`<latitude>`和`<longitude>`是数字

要获取邮政地址的地理坐标，您需要使用[geocoder](https://developers.google.com/maps/documentation/javascript/geocoding)。

# c# - 结构映射自动映射器内存泄漏？

> ID：13764808
> 
> 赞同：1
> 
> 时间：2012-12-07T14:14:22.300
> 
> 标签：c#, wcf, memory-leaks, automapper, structuremap

在我的 WCF REST 服务中使用的 AutoMapper 和 StructureMap 的使用中似乎存在内存泄漏。

在负载测试下，我可以看到内存使用量不断上升，当我使用内存分析器更仔细地检查它时，我可以看到 MappingEngine 使用的对象有很多实例（大约是任何其他实例的 9 倍）

```
Class Name=Live Instances
Object=498,847
Int32[]=69,373
Object[]=68,116
ConcurrentDictionary<TKey, TValue>+Node<TypePair, IObjectMapper>=37,624
string=35,240
IObjectMapper[]=30,782
EventHandler<TypeMapCreatedEventArgs>=30,782
MappingEngine=30,781
ConcurrentDictionary<TypePair, IObjectMapper>=30,781
ConcurrentDictionary<TKey, TValue>+Node<TypePair, LambdaExpression>[]=30,781
ConcurrentDictionary<TKey, TValue>+Node<TypePair, IObjectMapper>[]=30,781
ConcurrentDictionary<TypePair, LambdaExpression>=30,781 
```

这是一个典型的实例保留图......

```
bootstrapper._configuration
 -> AutoMapper.ConfigurationStore (TypeMapCreated)
 -> System.EventHandler<TypeMapCreatedEventArgs> (multicast delegate)
 -> System.Object[]
 -> System.EventHandler<TypeMapCreatedEventArgs>
 -> AutoMapper.MappingEngine (_objectMapperCache)
 -> System.Collections.Concurrent.ConcurrentDictionary<Internal.typePair, IObjectMapper> (m_locks)
 -> System.Object[]
 -> System.Object 
```

（对不起垃圾格式，但SO不会让我发布图片）

问题是我不确定我的代码、StructureMap 还是 AutoMapper 是否有问题。

代码示例...

用于自动映射的引导程序（从 global.asax 中的 Application_Start 调用）...

```
 public class BootStrapper
    {
        private static readonly IConfiguration _configuration = ObjectFactory.GetInstance<IConfiguration>();

        public static void Initialize()
        {
                _configuration.AddProfile<AutoMapperProfile>();
        }

        public class AutoMapperProfile : Profile
        {
            protected override void Configure()
            {
                    BootstrapAutoMapper();
            }   
        }

        public static void BootstrapAutoMapper()
        {
            _configuration.CreateMap<In.Account, Out.Accounts.Account>()
               .ForMember(m => m.AccountNumber, o => o.MapFrom(s => s.AcctId))
               .ForMember(m => m.Balances, o => o.Ignore())
               .ForMember(m => m.AccountTypeDescription, o => o.MapFrom(s => s.TypeName))
               .ForMember(m => m.AccountType, o => o.MapFrom(s => s.Type))
               .ForMember(m => m.IsNoticeAccount, o => o.ResolveUsing(s => IsNoticeAccountMapper.Map(s.Type, ObjectFactory.GetInstance<IAccountTypeHelper>())));

             // many other mappings excluded for brevity
    }        
} 
```

它在 StructureMap 中配置...

```
 private void AutoMapperRegistration()
    {
        For<ConfigurationStore>().Singleton().Use<ConfigurationStore>().Ctor<IEnumerable<IObjectMapper>>().Is(AutoMapper.Mappers.MapperRegistry.AllMappers());
        For<IConfigurationProvider>().Use(ctx => ctx.GetInstance<ConfigurationStore>());
        For<IConfiguration>().Use(ctx => ctx.GetInstance<ConfigurationStore>());
        For<ITypeMapFactory>().Use<TypeMapFactory>();
        For<IMappingEngine>().Use<MappingEngine>();

        Scan(scan =>
             {
                 scan.AssemblyContainingType<AppRegistry>();
                 scan.AddAllTypesOf<Profile>();
             });
} 
```

典型的 WCF Rest 服务使用...

```
public class AccountService : IAccountService
{
        private readonly IMappingEngine _mappingEngine;
        private readonly IAccountFacade _accountFacade;

        public AccountService(IMappingEngine mappingEngine, IAccountFacade accountFacade)
        {
            _mappingEngine = mappingEngine;
        _accountFacade = accountFacade;
        }

        public IEnumerable<Account> GetAccounts()
        {
            var ret = new List<Account>();
            var entities = _accountFacade.GetAccounts().ToList();   
            foreach (var account in entities.Select(entity => _mappingEngine.Map<In.Account, Out.Account>(entity)))
            {
                ret.Add(account);
            }
            return ret;     
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:57:57.160

似乎问题是由 MappingEngine 的配置引起的 - 它需要设置为单例，否则实例不会被清除，因为它是 IDisposable。

所以配置更改为..

```
For<IMappingEngine>().Singleton().Use<MappingEngine>(); 
```

# jenkins - 詹金斯从代理重新启动后如何重新启动构建应用程序

> ID：13764811
> 
> 赞同：2
> 
> 时间：2012-12-07T14:14:39.853
> 
> 标签：jenkins, recovery, slave

我们有詹金斯项目。用例：

*   jenkins 触发构建
*   从代理构建应用程序
*   带有从代理的服务器重新启动（出于任何原因，例如，电力问题，有人重新启动它，资源短缺等）

之后詹金斯报告了失败的构建。当从代理从故障中恢复时，我们如何自动重新启动詹金斯中的应用程序构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T20:18:56.397

这个问题有两个方面——

1.  Jenkins*服务器*需要**重新调度**失败的构建
    （当从机崩溃时）。

    *   安装**[Naginator 插件](https://wiki.jenkins-ci.org/display/JENKINS/Naginator+Plugin)**
    *   将其设置为重建您在有问题的从站上设置的任何作业

2.  Jenkins *Slave*需要在其主机再次**启动时自动重启。**

    *   例如，在 Windows 上，您需要使用自动启动的服务对其进行设置

请注意，*Naginator 插件*不知道是什么导致构建失败，
因此它会尝试重建*任何*失败的构建。
要解决此问题，请扫描日志以查找从站崩溃的指示
并设置*正则表达式*（在 Naginator 中）以捕获它。

干杯

# iphone - 如何使用 ShinobiCharts 将我的列设置在图表的中心

> ID：13764812
> 
> 赞同：0
> 
> 时间：2012-12-07T14:14:40.593
> 
> 标签：iphone, ios, graph, charts

我有这个柱形图，它有 2 种模式，每月可视化和每年可视化，每月可视化与许多列一起工作得很好，但是，我的年度可视化被破坏了，因为我无法获得唯一看起来位于中心的列图表，它总是被设置为我的 XAxis 上的第一个点。

如果我使用的是 NumberAxis 这将很容易解决，只需将列设置到中间点（在这种情况下，在 12 个月中的位置 6）。但是我使用的是 CategoryAxis，因为它没有像 NumberAxis 那样排序，所以我无法使用相同的解决方案......

如何使用 CategoryAxis 实现此结果？

PS：不管我给这个Axis设置的SChartRange，列都会一直设置在XAxis的第一个位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:31:19.750

找到了一种方法来达到我想要的结果。

我已将范围更改为仅围绕第一个数据点，这样该列就被放置在图表的中间，而不必成为“中间数据点”，即唯一的数据点。代码进入我的图表：dataPointAtIndex forSeriesAtIndex 如下

```
-(id<SChartData>)sChart:(ShinobiChart *)chart dataPointAtIndex:(int)dataIndex forSeriesAtIndex:(int)seriesIndex{

.
.
.
    SChartNumberRange * numberRange;
    if(isYearlyChart){
            numberRange = [[SChartNumberRange alloc] initWithMinimum:[NSNumber numberWithFloat:-0.9]andMaximum:[NSNumber numberWithInt:(1)]];

    } 
```

我使用的正常 NumberRange 是从 1 到 13。

希望这可以帮助其他有类似问题的人:)

PS：我会尽快将此标记为正确答案。

# hibernate - org.hibernate.MappingException：无法从资源中读取映射：

> ID：13764813
> 
> 赞同：1
> 
> 时间：2012-12-07T14:14:49.420
> 
> 标签：hibernate

您好，在运行我的 java 类时出现以下错误：会话工厂的创建失败，出现异常 org.hibernate.MappingException：无法从资源中读取映射：Software.hbm.xml org.hibernate.MappingException：无法从资源中读取映射: org.hibernate.cfg.Configuration.addResource(Configuration.java:485) 的 Software.hbm.xml org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1465) 的 org.hibernate.cfg.Configuration.parseSessionFactory (Configuration.java:1433) 在 org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1414) 在 org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1390) 在 org.hibernate.cfg.Configuration。配置（配置.java：1310) at org.hibernate.cfg.Configuration.configure(Configuration.java:1296) at com.tcs.com.DbConnect.main(DbConnect.java:20) 原因：org.hibernate.MappingException：无法解析映射文档在 org.hibernate.cfg.Configuration.addResource(Configuration.java:482) 的 org.hibernate.cfg.Configuration.addInputStream(Configuration.java:431) 的输入流中... 7 更多原因：org.dom4j.DocumentException : www.hibernate.org 嵌套异常： www.hibernate.org at org.dom4j.io.SAXReader.read(SAXReader.java:484) at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:422) .. . com 的线程“main”java.lang.NullPointerException 中还有 8 个异常。tcs.com.DbConnect.add(DbConnect.java:46) 在 com.tcs.com.DbConnect.main(DbConnect.java:30) 在 sessionfactory 创建后的 main(DbConnect.java:30)123

```
 MY hbm.xml file

    <?xml version="1.0"  encoding="UTF-8"?>
    <!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
            "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

    <hibernate-mapping package="com.tcs.beans">

        <class name="Software" table="SOFTWARE">
            <id name="id" type="int" column="id">
            <generator class="native"></generator>
            </id>
            <property name="c" column="c" />
            <property name="cpp" column="cpp" />
            <property name="java" column="java" />
            <property name="val" column="val" />

        </class>

    </hibernate-mapping>

Please help me with this as soon as possible
]

MY cfg.xml:

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
   <session-factory>
   <property name="hibernate.dialect">
      org.hibernate.dialect.Oracle10gDialect
   </property>
   <property name="hibernate.connection.driver_class">
      oracle.jdbc.OracleDriver
   </property>

   <!-- Assume test is the database name -->
   <property name="hibernate.connection.url">
     jdbc:oracle:thin:@localhost:1521/xe
   </property>
   <property name="hibernate.connection.username">
      ******
   </property>
   <property name="hibernate.connection.password">
      *******
   </property>

   <!-- List of XML mapping files -->
   <mapping resource="com/sss/beans/Software.hbm.xml"/>

</session-factory>
</hibernate-configuration>

My hbm.xml

<?xml version="1.0"  encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.tcs.beans">

    <class name="Software" table="SOFTWARE">
        <id name="id" type="int" column="id">
        <generator class="native"></generator>
        </id>
        <property name="c" column="c" type="String"/>
        <property name="cpp" column="cpp" type="String"/>
        <property name="java" column="java" type="String"/>
        <property name="val" column="val" type="int"/>

    </class>

</hibernate-mapping> 
```

软件.java

```
 public class Software {
        private int id;
        private String c;
        private String cpp;
        private String java;
        private int val;
        public Software(){

        }
        public Software(String c,String cpp,String java,int val){
        this.c=c;
        this.cpp=cpp;
        this.java=java;
        this.val=val;
        }
        public int getId() {
            return id;
        }
        public void setId(int id) {
            this.id = id;
        }
        public String getC() {
            return c;
        }
        public void setC(String c) {
            this.c = c;
        }
        public String getCpp() {
            return cpp;
        }
        public void setCpp(String cpp) {
            this.cpp = cpp;
        }
        public String getJava() {
            return java;
        }
        public void setJava(String java) {
            this.java = java;
        }
        public int  getVal() {
            return val;
        }
        public void setVal(int val) {
            this.val = val;
        }

    } 
```

我的主要java文件...

```
public class DbConnect {

    private static SessionFactory sessionFactory;
    public static void main (String[] args) {
    System.out.println("in main");
        try{
            System.out.println("in main before sessionfactory creation");
            sessionFactory = new Configuration().configure().buildSessionFactory();

            System.out.println("in main after sessionfactory creation");
        }catch(Exception xe){
            System.out.println("in main exc");
            System.err.println("Creation of session Factory failed with the exception "+xe);
            xe.printStackTrace();
        }
        System.out.println("in main after sessionfactory creation123");
        DbConnect soft = new DbConnect();
        Integer e1 = soft.add("c2","cpp2","java2",2);
        Integer e2 = soft.add("c3","cpp3","java3",3);
        Integer e3 = soft.add("c4","cpp4","java4",4);

        soft.show();
        soft.updateEmployee(e2, 5);
        soft.show();
        soft.deleteEmployee(e2);

    }

    public Integer add(String c,String cpp,String java ,int val){
        Session session = sessionFactory.openSession();
        Transaction tx = null;
        Integer intID = null;
        Software soft = new Software(c,cpp,java,val);
        try{
            tx = session.beginTransaction();
            intID = (Integer) session.save(soft);
            tx.commit();
        }catch(Exception e){
            if(tx!=null)tx.rollback();
            e.printStackTrace();
        }
        finally{
            session.close();
        }
        return intID;
    }

    public void show(){
        Session session = sessionFactory.openSession();
        Transaction tx = null;

        try{

            tx = session.beginTransaction();
            List list = session.createQuery("FROM SOFTWARE").list();
            Iterator it = list.iterator();
            while(it.hasNext()){
                Software sw = (Software) it.next();
                System.out.println("c"+sw.getC());
                System.out.println("cpp"+sw.getCpp());
                System.out.println("java"+sw.getJava());
                System.out.println("val"+sw.getVal());
            }
            tx.commit();

        }catch(Exception xe){
            if(tx!=null)tx.rollback();
            xe.printStackTrace();
            }finally{
                session.close();
            }
    }

     public void updateEmployee(Integer EmployeeID, int salary ){
         Session session = sessionFactory.openSession();
         Transaction tx = null;
         try{
             tx = session.beginTransaction();
             Software sw = (Software) session.get(Software.class, EmployeeID);
             sw.setVal(salary);
             session.update(sw);
             tx.commit();
         }catch(Exception e){
             if(tx!=null)tx.rollback();
             e.printStackTrace();
         }
     }

         public void deleteEmployee(Integer EmployeeID){
         Session session = sessionFactory.openSession();
         Transaction tx= null;
         try{
             tx = session.beginTransaction();
             Software sw = (Software) session.get(Software.class , EmployeeID);
             session.delete(sw);
             tx.commit();
         }catch(Exception e){
             if(tx!=null)tx.rollback();
             e.printStackTrace();
         }
         }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:41:41.203

好像你有一个名为 Software.java 的 java 类，Software.hbm.xml 文件需要在 java 文件的同一个包中。

您的文件*hibernate.cfg.xml*需要一行用于映射

```
 <mapping resource="the/package/where/your/hbm/is/Software.hbm.xml"/> 
```

# c# - 从 C# 将数据插入到 SQL Server 2005 中的主/从表中，并在详细表中使用外键

> ID：13764817
> 
> 赞同：1
> 
> 时间：2012-12-07T14:15:03.460
> 
> 标签：c#, sql-server, datagridview, foreign-key-relationship

我需要一些帮助才能在 C# 中制作订单。我的开发环境是：

*   微软 Visual Studio 2010 终极版
*   SQL Server 速成版 2005
*   编程语言 C#
*   示例数据库 = `NorthWind`（表`Orders`和`OrderDetails`）

我为订单输入创建了一个表单，其中包含一个用于 的文本框`OrderID`、一个用于`Customer`、DateTimePickers`OrderDate`和的组合框`ShippedDate`以及一个包含列`OrderID (readonly)`、`ProductID`、`UnitPrice`&的 DataGridView `Quantity`。

在表单加载事件中，我有以下代码：

```
private void Inv2_Load(object sender, EventArgs e)
{
        SetComb();
        connectionString = ConfigurationManager.AppSettings["connectionString"];
        sqlConnection = new SqlConnection(connectionString);

        qryOrd = "Select OrderID, CustomerID, OrderDate, ShippedDate from Orders";
        qryOrdDet = "Select OrderID, ProductID, UnitPrice, Quantity from OrderDetails";

        sqlConnection.Open();
        sqlDataMaster = new SqlDataAdapter(qryOrd, sqlConnection);
        sqlDataDet = new SqlDataAdapter(qryOrdDet, sqlConnection);

        //SET MASTER INSERT/UPDATES
        command = new SqlCommand("INSERT INTO Orders ( CustomerID, OrderDate, ShippedDate) VALUES (@CustID, @OrdDt, @ShipDt) SELECT SCOPE_IDENTITY();");

        command.Parameters.Add("@OrdID", SqlDbType.NVarChar, 15);
        command.Parameters.Add("@CustID", SqlDbType.VarChar, 15);
        command.Parameters["@CustID"].Value = cmbCust.SelectedText;

        command.Parameters.Add("@OrdDt", SqlDbType.DateTime);
        command.Parameters["@OrdDt"].Value = dtOrdDt.Text;

        command.Parameters.Add("@ShipDt", SqlDbType.DateTime);
        command.Parameters["@ShipDt"].Value =dtShipDt.Text;

        sqlDataMaster.InsertCommand = command;
        //string id = command.ExecuteScalar().ToString();

        command = new SqlCommand("UPDATE Orders SET CustomerID = @CustID, OrderDate = @OrdDt, ShippedDate = @ShipDt WHERE OrderID = @OrdID");

        command.Parameters.Add("@OrdID", SqlDbType.NVarChar, 15, "OrderID").Value = txtOrdID.Text; 
        command.Parameters.Add("@CustID", SqlDbType.VarChar, 15, "CustomerID").Value = cmbCust.Text;
        command.Parameters.Add("@OrdDt", SqlDbType.DateTime).Value = dtOrdDt.Text;
        command.Parameters.Add("@ShipDt", SqlDbType.DateTime).Value = dtShipDt.Text;
        sqlDataMaster.UpdateCommand = command;

        //SET DETAILS INSERT/UPDATES
        commandDet = new SqlCommand("INSERT INTO OrderDetails (ProductID, UnitPrice, Quantity) VALUES (@PrdID, @Up,@Qty)");

        //commandDet.Parameters.Add("@OrdID", SqlDbType.NVarChar, 15, "OrderID").Value = txtOrdID.Text; ;  
        commandDet.Parameters.Add("@PrdId", SqlDbType.NVarChar, 5, "ProductID");
        commandDet.Parameters.Add("@Up", SqlDbType.VarChar, 50, "UnitPrice");
        commandDet.Parameters.Add("@Qty", SqlDbType.VarChar, 20, "Quantity");
        sqlDataDet.InsertCommand = commandDet;

        commandDet = new SqlCommand("UPDATE OrderDetails SET ProductID = @PrdID, UnitPrice = @Up, Quantity = @Qty WHERE OrderID = @OrdID");
        commandDet.Parameters.Add("@OrdID", SqlDbType.NVarChar, 15, "OrderID").Value = txtOrdID.Text; ;  
        commandDet.Parameters.Add("@PrdId", SqlDbType.NVarChar, 5, "ProductID");
        commandDet.Parameters.Add("@Up", SqlDbType.VarChar, 50, "UnitPrice");
        commandDet.Parameters.Add("@Qty", SqlDbType.VarChar, 20, "Quantity");
        sqlDataDet.UpdateCommand = commandDet;

        sqlComBldMaster = new SqlCommandBuilder(sqlDataMaster);
        sqlComBldDet = new SqlCommandBuilder(sqlDataDet);

        dt = new DataTable();
        dtDet = new DataTable();

        dt.Clear();
        dtDet.Clear();

        sqlDataMaster.FillSchema(dt, SchemaType.Source);
        sqlDataDet.FillSchema(dtDet, SchemaType.Source);

        dtDet.Columns["OrderID"].AutoIncrement = true;
        dtDet.Columns["OrderID"].AutoIncrementSeed = -1;
        dtDet.Columns["OrderID"].AutoIncrementStep = -1;
        ds = new DataSet();
        ds.Tables.Add(dt);
        ds.Tables.Add(dtDet);
        ds.EnforceConstraints = false;

        DataRelation rel = new DataRelation("OrdersRel", ds.Tables["Orders"].Columns["OrderID"], ds.Tables["OrderDetails"].Columns["OrderID"]);
        ds.Relations.Add(rel);

        bs = new BindingSource();
        bsDet = new BindingSource();

        bs.DataSource = ds;
        bs.DataMember = "Orders";

        bsDet.DataSource = ds;
        bsDet.DataMember = "OrderDetails";

        dgInvDet.AutoGenerateColumns = false;

        dgInvDet.Columns["ProductID"].DataPropertyName = "ProductID";
        ProductID.DataSource = dm.GetData("Select * from Products order by ProductName");
        ProductID.DisplayMember = "ProductName";
        ProductID.ValueMember = "ProductID";
        dgInvDet.Columns["UnitPrice"].DataPropertyName = "UnitPrice";
        dgInvDet.Columns["Quantity"].DataPropertyName = "Quantity";   

        dgInvDet.DataSource = bsDet;
    }

public void SetComb()
{
        cmbCust.DataSource = dm.GetData("Select * from Customers order by CompanyName");
        cmbCust.DisplayMember = "CompanyName";
        cmbCust.ValueMember = "CustomerId";
        cmbCust.Text = "";
} 
```

`Dm.GetData`是为仅检索行而创建的数据访问类方法...

在`Save`按钮点击事件中：

```
 private void btnSave_Click(object sender, EventArgs e)
 {
     dt.EndInit();

     rec = sqlDataMaster.Update(ds.Tables[0]);
     rec += sqlDataDet.Update(ds.Tables[1]);
     //recDet = sqlDataDet.Update(dt);

     ds.AcceptChanges();            

     MessageBox.Show(rec + " record(s) applied...." );

     ds.EnforceConstraints = true;
} 
```

我需要将数据保存到我的代码似乎无法执行的相应表 (`Orders`和) 中的 SQL Server 中。`OrderDetails`它显示外键不能为空的错误...因为`OrderDetails`表还需要`OrderID`哪个是外键，我无法理解如何获取`OrderID`，因为它是在将数据插入数据库后自动生成的。

请帮助我解决这个问题，用这个外键问题将数据保存在数据库中......

任何帮助都感激不尽。

谢谢

艾哈迈德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T15:30:51.033

我可以在这里想到几个选项。首先，您可以修改主数据适配器上的 SQL 以同时在订单和订单详细信息表上执行插入（更新也是如此）并将它们包装在事务中（当然对更新执行相同的操作...）。

另一种选择是处理数据适配器的 RowUpdated 事件（因为它会在插入时触发），获取 ID，然后更新详细信息。

这是我在第一个解决方案中谈论的一个简短示例：

```
sqlDataMaster = new SqlDataAdapter(qryOrd, sqlConnection);
sqlDataDet = new SqlDataAdapter(qryOrdDet, sqlConnection);

//SET MASTER INSERT/UPDATES

command = new SqlCommand("DECLARE @tempOrderId numeric(38,0);" +
                            "BEGIN TRAN;" + 
                            "INSERT INTO Orders ( CustomerID, OrderDate, ShippedDate) VALUES (@CustID, @OrdDt, @ShipDt);" + 
                            "SELECT @tempOrderId = SCOPE_IDENTITY();" + 
                            "INSERT INTO OrderDetails (OrderId, ProductID, UnitPrice, Quantity) VALUES (@tempOrderId, @PrdID, @Up,@Qty);"
                            "IF @@Error <> 0 " + 
                            "   ROLLBACK TRANS" + 
                            "ELSE " + 
                            "   COMMIT TRANS";
    );
command.Parameters.Add("@OrdID", SqlDbType.NVarChar, 15);
command.Parameters.Add("@CustID", SqlDbType.VarChar, 15);
command.Parameters["@CustID"].Value = cmbCust.SelectedText;

command.Parameters.Add("@OrdDt", SqlDbType.DateTime);
command.Parameters["@OrdDt"].Value = dtOrdDt.Text;

command.Parameters.Add("@ShipDt", SqlDbType.DateTime);
command.Parameters["@ShipDt"].Value =dtShipDt.Text;

command.Parameters.Add("@PrdId", SqlDbType.NVarChar, 5, "ProductID");
command.Parameters.Add("@Up", SqlDbType.VarChar, 50, "UnitPrice");
command.Parameters.Add("@Qty", SqlDbType.VarChar, 20, "Quantity");
sqlDataMaster.InsertCommand = command; 
```

# javascript - 如何在html页面中显示xml数据？

> ID：13764818
> 
> 赞同：2
> 
> 时间：2012-12-07T14:15:03.773
> 
> 标签：javascript, xml, xml-parsing, xmlhttprequest

我正在尝试读取 xml 文件，但不知何故我遇到了问题：无法显示 xml 数据

```
<!DOCTYPE html>
<html>
<body>

<script>
var xmlhttp = new ActiveXObject("Msxml2.XMLHTTP.3.0");
xmlhttp.open("GET","http://data.bmkg.go.id/gempadirasakan.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("Gempa");
for (i=0;i<x.length;i++)
  { 
  document.write("<tr><td>");
  document.write(x[i].getElementsByTagName("Tanggal")[0].childNodes[0].nodeValue);
  document.write("</td><td>");
  document.write(x[i].getElementsByTagName("Magnitude")[0].childNodes[0].nodeValue);
  document.write("</td></tr>");
  }
document.write("</table>");
</script>

</body>
</html> 
```

我怎么能显示它？？？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T14:28:57.520

*将整个*标记构造为字符串，然后才在正文中写入：

```
var markup = "<table border='1'>";
var x=xmlDoc.getElementsByTagName("Gempa");
for (i=0;i<x.length;i++)
{ 
  markup += ("<tr><td>");
  markup += (x[i].getElementsByTagName("Tanggal")[0].childNodes[0].nodeValue);
  markup += ("</td><td>");
  markup += (x[i].getElementsByTagName("Magnitude")[0].childNodes[0].nodeValue);
  markup += ("</td></tr>");
}
markup += ("</table>")
document.write(markup); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T14:34:46.273

您的代码运行良好尝试通过以下方式加载 xml

```
<script>
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET","http://data.bmkg.go.id/gempadirasakan.xml",false);
xmlhttp.send();
xmlDocument=xmlhttp.responseText;
xmlDoc=document.createElement("div");
xmlDoc.innerHTML=xmlDocument;
document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("Gempa");
//then your following code
document.write("</table>");
</script> 
```

# c++ - Qt：重新启动线程

> ID：13764821
> 
> 赞同：0
> 
> 时间：2012-12-07T14:15:12.027
> 
> 标签：c++, qt

我正在使用 Qt 开发 GUI，我在玩线程时遇到问题。我创建了一个带有两个按钮流和停止流的小 GUI。我的问题是停止流后我无法重新启动流：以下是代码的一部分：

```
MainThread::MainThread(QWidget *parent):QWidget(parent){

    bstream = new QPushButton("&stream");
    bstopstream = new QPushButton("STOP stream");
    bcapture = new QPushButton("capture a frame");
    Allbox = new QVBoxLayout(this);
    Allbox->addWidget(bstream);
    Allbox->addWidget(bcapture);
    Allbox->addWidget(bstopstream);

    connect(bstream,SIGNAL(clicked()),this, SLOT(startingstream()));
    connect(bcapture,SIGNAL(clicked()),this, SLOT(captureAFrame()));
    connect(bstopstream,SIGNAL(clicked()),this, SLOT(stopstreaming()));

    setLayout(Allbox);

} 

void MainThread::stopstreaming(){
    cv::destroyAllWindows();

    stream.terminate();
    stream.wait();
    stream.~Streaming();
}

void MainThread::startingstream(){

    if(stream.isRunning()) return;
    stream.start();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:39:45.547

```
stream.~Streaming(); 
```

这会调用对象的析构函数`stream`。您不应该手动调用它，正式地该对象在那之后就死了，之后它可能表现得“有趣”。

例如，假设一个像这样的对象：

```
void stream::play() {
    buff_->start();
}

void stream::~stream() {
    delete buff_;
} 
```

那么这条线`buff_->start()`可能会做一些时髦的事情，基本上会产生未定义的行为。

或者，如果它是这样写的（尽管您永远不需要在析构函数中手动将某些内容设置为零；如前所述，对象在销毁后**应该**是死的）：

```
void stream::play() {
    if (buff_) buff_->start();
}

void stream::~stream() {
    delete buff_;
    buff_ = 0;
} 
```

那么它可能什么都不做。

# php - phpunit assertNull 被 zend_mm_heap 损坏

> ID：13764826
> 
> 赞同：3
> 
> 时间：2012-12-07T14:15:27.590
> 
> 标签：php, symfony, phpunit

使用标量时：

```
$null = null;
$this->assertNull($null); 
```

测试OK

```
$null = 'not null';
$this->assertNull($null); 
```

测试失败

使用对象时：

```
$this->assertEquals(null, $menu->getChild('Projects')); 
```

关于 $menu->getChild('Projects') 是否为空的测试 OK 或 Fail

```
$this->assertNull($menu->getChild('Projects')); 
```

挂起，我收到错误：**zend_mm_heap 已损坏**

使用*AssertNull*时，我没有得到与*AssertEquals(null, $var)*相同的行为；目前，我禁止使用 AssertNull，但我想知道你们中的某个人是否可以解释发生了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:22:26.353

该对象的类型为：*Knp\Menu\MenuItem*（来自 knpmenu php 库的对象）

问题是与 phpunit 库中的函数相关的递归问题。

类：*PHPUnit/Util/Type*

功能：*递归导出*

```
preg_match_all('/\n            \[(\w+)\] => Array\s+\*RECURSION\*/', print_r($value, TRUE), $matches); 
```

![$价值内容](../Images/cf1bd461008802d3ba42426cc26c132f.png)

如您所见，子对象具有对父对象的引用，这就是死锁的原因。

**但是**当我阅读*print_r*的文档时，它指出：

> 在 PHP 4.0.4 之前，如果给定一个包含对其自身的直接或间接引用的数组或对象， print_r() 将永远持续下去。一个例子是 print_r($GLOBALS) 因为 $GLOBALS 本身就是一个包含对自身的引用的全局变量。

我在用着 ：

> 塞巴斯蒂安伯格曼的 PHPUnit 3.7.10。
> 
> PHP 5.4.7 (cli)（构建时间：2012 年 9 月 12 日 23:48:31）

我目前的结论是**不**使用*assertNull*而是使用*AssertEquals*

# html - 在 HTML 中制作索引（目录）的正确方法是什么

> ID：13764829
> 
> 赞同：1
> 
> 时间：2012-12-07T14:15:36.830
> 
> 标签：html, specifications

您可以使用`<h1>`to`<h6>`来组织您的文本。但：

为文本制作单独的索引（目录）的正确/最佳方法是什么？（与正文在同一页上）

通常，我只会列出一个`<ul><li>...</li></ul>`列表，列出每个`<h1>`...中的每个标题`<h6>`，但这可能不是一个好的解决方案，对吧？我特别在谈论外部阅读器（例如，对于盲人，或者可能是其他程序），甚至是阅读 HTML 的搜索引擎 - 他们基本上会看到每个标题两次......

我只是想知道，是否有预定义/最佳实践方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:43:40.787

目录和索引是两个不同的东西。你说的应该是前者。

只要您使用带有描述性链接文本的普通链接（通常与标题相呼应），您使用哪种标记并不重要。您通常不需要任何浏览器生成的项目符号或数字，但最简单的选择是使用`ul`with `list-style-type: none`，将嵌套`ul`元素用于不同级别的标题。

当然，目录意味着重复，辅助软件可能能够从标题元素构建目录。尽管如此，对于大多数目的，一开始的明确目录对于任何较长的页面来说都是良好的可用性和可访问性。它让读者（有视力或盲人）先浏览标题，然后选择某处跳转或按顺序阅读。

# javascript - 修复了具有两种不同状态的导航栏

> ID：13764830
> 
> 赞同：1
> 
> 时间：2012-12-07T14:15:37.747
> 
> 标签：javascript, jquery, css

我想要做的是有一个固定的导航栏，距离窗口顶部 10px，除非它在文档的前 200px 内，然后我希望它距离顶部 200px ...

所以基本上我想要一个距离顶部 200 像素的导航栏，但是当用户向下滚动 190 像素时，导航栏会滚动，始终保持距离窗口顶部 10 像素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:20:26.417

您首先侦听窗口的滚动事件，然后使用滚动值来了解要应用到您的元素的状态。jQuery 示例：

```
var fixed = false, limit = 50;
$(window).scroll(function()
{
    if (window.scrollTop < 50 && fixed)
    {
        $("#header").css({ position: "relative" });
        fixed = false;
    }
    else if (window.scrollTop > 50 && !fixed)
    {
        $("#header").css({ position: "fixed" });
        fixed = true;
    }
}); 
```

[也与这篇文章相关的代码示例](https://stackoverflow.com/questions/4807945/adding-listener-for-position-on-screen)

# c# - 限制子实体而不限制父实体 - NHibernate

> ID：13764833
> 
> 赞同：0
> 
> 时间：2012-12-07T14:15:53.083
> 
> 标签：c#, .net, nhibernate, left-join, fluent

我正在尝试限制映射集合的结果集。

这是一个简单的模型：

```
public class Table1 {
    public virtual long Id { get; set; }
    public virtual IList<Table2> Table2s { get; set; }
}

public class Table2 {
    public virtual long Id { get; set; }
    public virtual long Table1Id { get; set; }
    public virtual Table1 Table1 { get; set; }
    public virtual string Field { get; set; }
}

public class Table1Map : ClassMap<Table1> {
    public Table1Map () {
        Table("Table1");
        Id(x => x.Id).Column("Id").Not.Nullable().CustomType("Int64").GeneratedBy.Native();
        HasMany<Table2>(x => x.Table2s).Inverse().Not.LazyLoad().KeyColumns.Add("Table1Id").Fetch.Join();
    }
}

public class Table2Map : ClassMap<Table2> {
    public Table2Map () {
        Table("Table2");
        Id(x => x.Id).Column("Id").Not.Nullable().CustomType("Int64").GeneratedBy.Native();
        Map(x => x.Table1Id).Column("Table1Id").Not.Nullable().CustomType("Int64");
        Map(x => x.Field).Column("Field").Not.Nullable().CustomType("AnsiString").Length(25);
        References<Table1>(x => x.Table1, "Table1Id").Cascade.None();
    }
} 
```

我想选择所有`Table1`s。我也想选择所有满足`Table2`一定条件的s （如果我想在 SQL 中执行此操作，我会执行以下操作：`Table2.Field = 'value'``Table1``Table2`

```
SELECT *
FROM 
Table1
LEFT OUTER JOIN Table2 ON Table1.Id = Table2.Table1Id
WHERE
Table2.Field = 'value' or Table2.Field IS NULL 
```

我应该如何构建我的 NHibernate 查询以达到预期的结果？我想要一个`Table1`s 列表，在每个列表中`Table1`我想要一个空的`Table2`s 列表（因为没有`Table2`s 符合条件），或者一个符合条件的`Table2`s 列表。

我正在尝试类似以下的方法，但这显然行不通：

```
List<Table1> result = new List<Table1>();
IQueryable<Table1> query = session.Query<Table1>();
if (value != null) {
    query = query.Where(x => x.Table2s.Field == value);
}
query = query.OrderBy(x => x.Id);
result = query.ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:07:23.230

我认为这是不可能的。Hibernate 加载完整的实体及其所有属性（如果没有激活延迟​​加载）。如果你保存了一个类型为 table1 的加载实体而没有所有 table2，hibernate 应该做什么？

您应该创建某种视图对象 (dvo)，其中包含 table1 的相关部分和符合条件的 table2 子项列表。选择可以通过[投影](https://stackoverflow.com/questions/2207329/projections-in-nhibernate)来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:27:18.953

有很好的文档 - 16.4。协会

[http://nhibernate.info/doc/nh/en/index.html#queryqueryover-associations](http://nhibernate.info/doc/nh/en/index.html#queryqueryover-associations)

`QueryOver`语法看起来像这样

```
IQueryOver<Table1, Table2> myQuery = 
  session.QueryOver<Table1>()
   .Left.JoinQueryOver<Table2>(t => t.Table2s)
     .Where(
       Restrictions.Or(
         Restrictions.On<Table2>((t2) => t2.ID).IsNull, 
         Restrictions.On<Table2>((t2) => t2.Field).IsLike("value")
         )
       );
var list = myQuery.List<Table1>(); 
```

然后`list`将返回满足条件的所有组合的集合。*（以后可以添加按顺序排列或不同或其他排列...）*

# java - 有什么方法可以将preparedStatement 打印到控制台System.out.println

> ID：13764838
> 
> 赞同：0
> 
> 时间：2012-12-07T14:16:05.817
> 
> 标签：java, jdbc

我需要一种查看preparedStatement 以进行调试的方法，这是我希望将preparedStatement 打印到控制台的Java 代码。

```
public class UnitTestDMUtility_Select {

@Test
public void testQUERY_CHECKBOTHPARTS() throws Exception{

    UnitTestHelper helper = new UnitTestHelper();
    Connection con = helper.getConnection(helper.sourceDBUrl);
    Connection conTarget = helper.getConnection(helper.targetDBUrl);

    PreparedStatement stmt = con.prepareStatement(DMUtility.QUERY_CHECKBOTHPARTS);
    stmt.setInt(1, 101);
    ResultSet sourceVal = stmt.executeQuery();
    //Here is the QUERY
    //select count(*) from tr_demand where demandtypeid=101
    stmt = conTarget.prepareStatement(DMUtility.QUERY_CHECKBOTHPARTS);
    stmt.setInt(1, 101);
    ResultSet targetVal = stmt.executeQuery();

    assertTrue(helper.resultSetsEqual2(sourceVal,targetVal));

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:28:08.230

为了回答您的问题，我通过执行以下操作将查询输出到日志文件（和控制台）：

```
PreparedStatement stmt = con.prepareStatement(DMUtility.QUERY_CHECKBOTHPARTS);
stmt.setInt(1, 101);

//Write stmt to console: 
System.out.println(stmt.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:22:06.767

对于查询调试，我通常使用库[jamon](http://jamonapi.sourceforge.net/)，它是一个 JDBC 代理，记录每条语句被调用

# knockout.js - 淘汰赛映射添加问题

> ID：13764840
> 
> 赞同：1
> 
> 时间：2012-12-07T14:16:10.883
> 
> 标签：knockout.js

我有一个方法，我试图将一个孩子添加到我的父级，但是当调用该方法时，调用父级的上下文是未定义的。

代码（为清楚起见缩写）小提琴[http://jsfiddle.net/poundingCode/THghy/](http://jsfiddle.net/poundingCode/THghy/)

```
// Initialized the namespace
var my = {};
    my.models = {};

    // View model declaration
    my.vm = (function (model) {
        var memberVm = {
            id: ko.observable(model.Id),
            company: ko.observable(model.Company),
            fName: ko.observable(model.FName),
            lName: ko.observable(model.LName),
            name: ko.observable(model.Name),
            positions: ko.observableArray([]),
            totalPositions: ko.observable(),
            totalProjects: ko.observable()
        };

        // children
        memberVm.loadPositions = function (positions) {
            memberVm.totalPositions = 0;
            memberVm.totalProjects = 0;
            $.each(positions, function (i, p) {
                memberVm.positions.push( new my.models.Position()
                .company(p.Company)
                .companyId(p.CompanyId)
                 .description(p.Description)
                .id(p.Id)
                .memberId(p.MemberId)
                .name(p.Name)
                .title(p.Title)
                .projects(p.Projects) 
                );
                memberVm.totalPositions++;
                memberVm.totalProjects += p.Projects.length;
            });// end for each
        }; //end load positions

        memberVm.loadPositions(model.Positions);

        memberVm.fullName = ko.computed(function () {
            return this.fName() + ' ' + this.lName();
        }, memberVm);

        // Computed observable function.
        // We append it to the ViewModel here.

        // return object
        var vm = {
            id: memberVm.id,
            company: memberVm.company,
            fName: memberVm.fName,
            fullName: memberVm.fullName,
            lName: memberVm.lName,
            name: memberVm.name,
            positions: memberVm.positions,
            totalPositions: memberVm.totalPositions,
            totalProjects: memberVm.totalProjects,    

        };
        return vm;
    });

    /////////////////////////////////////
    // Add a position - or at least try to! this is where I get into trouble.

    my.vm.addPosition = (function () {
        var pos = new my.models.Position();
        pos.memberId = my.vm.id;
        my.vm.positions.push(pos);
    });
    /////////////////////////////////////
    // TypeError: my.vm.positions is undefined my.vm.positions.push(pos);
    my.models.Member = (function () {
            id = ko.observable();
            company = ko.observable(); 
            fName = ko.observable();
            lName = ko.observable();
            name = ko.observable();
            positions = ko.observableArray([]);

    });
    my.models.Position = (function () {
        this.company = ko.observable();          
        this.id = ko.observable();           
        this.memberId = ko.observable();
        this.name = ko.observable();
        this.title = ko.observable();
        // place holders
        this.totalProjects = ko.observableArray();
        this.totalCredits = ko.observableArray();
    });

 var viewModel = my.vm(data);
        ko.applyBindings(viewModel);
my.setUI(); 
```

的HTML

```
 <script type="text/html" id="positionItemTemplate">
          <div class="summary" data-bind="attr : {onClick: 'my.showDetails(' + id() + ')', href: '#detail_'+ id()}">
                                    <a data-bind="attr : { href: '#detail_'+ id()}">
                                    <h2><label data-bind="text: company().Name"></label>: <label data-bind="text: title"></label></h2> </a>
                                    <h3><label data-bind="text: title" ></label> <label data-bind="text: startDate" ></label> - <label data-bind="value: endDate" ></label></h3>

                                </div>
                                <div data-bind="attr : {id: 'detail_' + id() }" class="details" style="right: 580px;">
                                  <div class="positionOverview">
                                   <h2><label data-bind="text: company().Name"></label>: <label data-bind="text: title"></label></h2> </a>
                                     <a data-bind="attr : {href: '#detail_'+ id()}">   <div class="editor-label"><label>Position</label></div></a>
                                        <div class="editor-field">
                                            <input type="text" data-bind="value: company().Name" class="textbox-long">
                                        </div>
                                        <div class="editor-label">
                                            <label>Title</label>
                                        </div>
                                      <div class="editor-field">
                                          <input type="text" data-bind="value: title" class="textbox-long">
                                      </div>
                                        <div class="editor-label">
                                            <label>Summary</label>
                                        </div>
                                        <div class="editor-field">
                                           <textarea data-bind="value: summary"  rows="4" cols="60"></textarea>
                                        </div>
                                        <div class="editor-label"><label>Compensation</label></div>
                                        <div class="editor-field">
                                            <select data-bind="options: $parent.compensations, value: compensationId, optionsText: 'Name', optionsValue: 'Id', optionsCaption: 'Select'"></select>
                                        </div>
                                        <div class="editor-label"><label for="HoursPerWeek" class="hourly">Hours/Week</label></div>
                                        <div class="editor-field">
                                            <input type="text" data-bind="value: hoursPerWeek" class="number-short">
                                        </div>
                                      <div class="div-table">
                                          <div class="div-table-row">
                                              <div class="div-table-col"><label for="StartDate">Start Date</label></div>
                                              <div class="div-table-col"><label for="EndDate">End Date</label></div>
                                              <div class="div-table-col"></div>
                                          </div>
                                          <div class="div-table-row">
                                              <div class="div-table-col"><input type="text" data-bind="value: startDate" class="date"></div>
                                              <div class="div-table-col"><input type="text" data-bind="value: endDate" class="date"></div>

                                          </div>
                                          <div class="div-table-row salary">
                                              <div class="div-table-col"><label for="SalaryStart">$/Hr Start</label></div>
                                              <div class="div-table-col"><label for="SalaryStart">$/Hr End</label></div>
                                          </div>
                                          <div class="div-table-row salary">
                                              <div class="div-table-col"><input type="text" data-bind="value: salaryStart" class="date"></div>
                                              <div class="div-table-col"><input type="text" data-bind="value: salaryEnd" class="date"></div>
                                          </div>
                                      </div>
                                      <input id="btnAddProject" type="button" value="Add Project" data-bind="attr : {onClick: 'addProject(new project())'}">
                                        <input type="button" data-bind="attr : {onClick: 'my.showDetails(' + id() + ')'}" value="Update"/>
                                    </div>                                                                   
                                </div>
      </script>
</head>
    <body>
        <div id="main">
            <div class="marquee center">
                <aside class="aside">
                    <div class="display">
                     <label data-bind="text: 'Total Positions: ' + totalPositions" ></label><input value="Add Position" type="button" data-bind="attr : {onClick: 'my.vm.addPosition()'}"/><br />

                    </div>
                    <div class="adPanel">
                        <h4><div id="message"></div></h4>
                    </div>
                </aside>
            </div>
            <section id="primary" class="primary">
                <article id="article1">
                    <section >
                        <div id="positions">
                            <div class="position" data-bind="template: { name: 'positionItemTemplate', foreach: positions, as: 'position' }">
                            </div>
                        </div>
                    </section>
                </article>
<!--            <footer class="footer">
                <p>Copyright © 2008 All Rights</p>
            </footer>-->
        </section>

        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T20:41:42.823

主要问题是你`my.vm`是一个构造函数，你可以用它来创建一个`my.vm`. 但是，该`addPosition`功能被直接添加到`my.vm`并尝试推送到`my.vm.positions`.

理想情况下，您要做的是使该函数在您的 vm 实例上可用并推送到该实例的`positions`数组。

因此，您将放入`addPosition`您的 vm 声明并让它对`vm`您返回的变量进行操作。那时，当您添加新位置时，您的绑定会遇到问题，因为`company`它是空的，并且一些绑定引用`company().Name`

# java - 当与远程蓝牙设备的连接丢失时如何在android java中生成警报

> ID：13764841
> 
> 赞同：1
> 
> 时间：2012-12-07T14:16:16.487
> 
> 标签：java, android, bluetooth

我需要提醒与 android 手机配对的设备，以防它超出手机蓝牙的范围。我研究了它并得到了一些关于 rss 的东西，任何人都可以帮助我。我需要发送任何字符来检查连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:27:09.943

如果你有连接，那么你可能会阻塞 InputStream 的 read() ，当连接断开时会抛出 IOException 。抓住它并正确处理。

# c++ - 在 Qt 中保存下载的文件

> ID：13764842
> 
> 赞同：1
> 
> 时间：2012-12-07T14:16:19.493
> 
> 标签：c++, qt

每当有人单击链接时，我都会调用我的插槽并且我知道文件在那里，因为我可以检索文件名和文件的字节数，只是在调用 QFileDialog::getSaveFileName 后不确定如何保存它？我知道如果用户决定更改文件，这会给我文件的名称，但是我如何获得他们决定保存文件的位置，然后将其写入该位置。

注意：如果这有什么不同，他们将下载的文件是一个 word 文档？

```
void MainWindow::unsupportedContent(QNetworkReply *reply) {

    qDebug() << "Left click - download!";
    qDebug() << "Bytes to download: " << reply->bytesAvailable();

    QString str = reply->rawHeader("Content-Disposition");

    QString end = str.mid(21);
    end.chop(1);

    qDebug() << "string: " << end;

    qDebug() << "File name: " << reply->rawHeader("Content-Disposition");
    qDebug() << "File type: " << reply->rawHeader("Content-Type");
    QString defaultFileName = QFileInfo(end).fileName();
    QString fileName = QFileDialog::getSaveFileName(this, tr("Save File"), defaultFileName);
    if (fileName.isEmpty()) return;

    QFile *file = new QFile(fileName);
    file->open(fileName);
    file->write(reply->read(reply->bytesAvailable()));
    file->close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:23:05.537

今天我在另一篇文章中对此进行了解释，因此我将在此处链接该帖子：[帖子](https://stackoverflow.com/questions/13747548/downloading-a-file-with-qt/13761758#13761758) 我可以告诉您，您只需实现一个写入您创建的文件的插槽。*并在发出readyRead()*信号时调用它。

# javascript - 使用 history.js 的 History.pushState 特殊字符

> ID：13764845
> 
> 赞同：0
> 
> 时间：2012-12-07T14:16:44.403
> 
> 标签：javascript, jquery, pushstate, history.js

我正在使用 history.js JQuery 插件来更新标题并创建一个历史项目。但是，当我执行以下操作时，我得到的是文本而不是符号：

```
History.pushState(data, '&#9658; ' + video.title.$t + ' - <?php echo $site_title; ?>', video.slug); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:24:36.007

`&#9658;`是 HTML 语法。当然，浏览器标题中不支持 HTML。你应该用`\u25BA`JS写。

# jruby - 无法在 Snow-Leopard 上将 Jruby 与 Rbenv 一起使用

> ID：13764846
> 
> 赞同：1
> 
> 时间：2012-12-07T14:16:50.713
> 
> 标签：jruby, osx-snow-leopard, rbenv

我刚刚使用 rbenv 的 ruby​​-build 插件安装了 jruby。

```
> rbenv install jruby-1.6.7
Downloading jruby-1.6.7.tar.gz...
-> http://cloud.github.com/downloads/sstephenson/ruby-build-download-mirror/fd1b8d7389aa92da69ea6efb4782e40a
Installing jruby-1.6.7...
Installed jruby-1.6.7 
```

然后将我的 ruby​​ 版本设置为 jruby

```
> rbenv local jruby-1.6.7 
```

然后尝试用jruby做点什么

```
> jruby 
```

或者

```
> gem list 
```

我不断回来：

```
execv failed: Permission denied (13) 
```

Jruby 二进制文件和 Java 都是可执行的。我的 Java 版本：

```
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-10M3909)
Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T12:41:47.500

我将以下内容添加到我的 .zshrc

```
export JAVACMD=`which java` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:48:48.590

不要引用我的话，但它对我有用。

我一直在使用我在 osx 雪豹上安装了 brew 的[https://github.com/flatland/drip 。](https://github.com/flatland/drip)

**首先警告**：运行`echo $JAVACMD && echo $JAVA_HOME` 并保存它们以备不时之需

当我用brew卸载滴灌时，我遇到了同样的错误......我跑了。

`unset JAVA_HOME`

和

`unset JAVACMD`

我又开始做生意了

# file - 通过 SSH 搜索文件并删除它们

> ID：13764848
> 
> 赞同：-7
> 
> 时间：2012-12-07T14:16:59.397
> 
> 标签：file, search, ssh, command, delete-file

我想知道我应该运行哪个 SSH 命令来搜索整个服务器中名为 error.log 的任何文件并删除它们。

必须删除任何名为 error.log 的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T14:18:18.437

来自[http://www.cyberciti.biz/faq/linux-unix-how-to-find-and-remove-files/](http://www.cyberciti.biz/faq/linux-unix-how-to-find-and-remove-files/)

```
find . -name "error.log" -exec rm -rf {} \; 
```

还有来自[http://www.askdavetaylor.com/how_do_i_delete_all_occurrances_of_a_file_in_linux.html的 XARGS 示例](http://www.askdavetaylor.com/how_do_i_delete_all_occurances_of_a_file_in_linux.html)

```
find . -name "error.log" | xargs rm 
```

# c++ - 提升标记图，错误的内部图大小

> ID：13764850
> 
> 赞同：2
> 
> 时间：2012-12-07T14:17:04.113
> 
> 标签：c++, boost, boost-graph

我创建了一个标记图：

```
typedef boost::adjacency_list<boost::vecS, boost::vecS, boost::undirectedS,
Item, Link > UnGraph; 
```

我的标签是**uint64_t**，我想在图表上拥有自己的 ID。

如果我添加一个节点，一切都很好，我只有带有我的标签的节点。

```
m_g.add_vertex(nodeId, Item(nodeId)); 
```

我想检查一个标签是否在我的图表中：

```
auto BUnGraph::exists( nid source ) const -> bool
{
    if( m_g.vertex(source) == BUnGraph::null_vertex() )
        return false;
    else
        return true;
} 
```

但是方法：

```
vertex(source) 
```

给我错误的结果，并返回一个默认构造的 vertex_descriptor 当节点不在图中而不是 null_vertex() 取决于标签...

我已经隔离了 boost 中的方法：

```
labeled_graph.hpp
    /** @name Find Labeled Vertex */
    //@{
    // Tag dispatch for sequential maps (i.e., vectors).
    template <typename Container, typename Graph, typename Label>
    typename graph_traits<Graph>::vertex_descriptor
    find_labeled_vertex(Container const& c, Graph const&, Label const& l,
                        random_access_container_tag)
    { return l < c.size() ? c[l] : graph_traits<Graph>::null_vertex(); } 
```

并检查了内部地图。如果我在图中添加一个节点，map.size() == 42。而不是 1 ！如果我添加 5 个节点 size() == 248。

根据 id，地图大小等于：**最大标签值 * 2 + 2** 所以任何低于 map.size() 的标签号都会给出错误的结果。

这是怎么回事 ？

编辑：我在我的图表中放了一个像 60000000 这样的标签，只有一个节点。我的电脑内存不足...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:10:46.563

我找到了负责此的行：

```
/**
 * Choose the default map instance. If Label is an unsigned integral type
 * the we can use a vector to store the information.
 */
template <typename Label, typename Vertex>
struct choose_default_map {
    typedef typename mpl::if_<
        is_unsigned<Label>,
        std::vector<Vertex>,
        std::map<Label, Vertex> // TODO: Should use unordered_map?
    >::type type;
}; 
```

如果类型是无符号的，那么 uint8_t, 16, 32, 64 它将使用向量。我找不到这种行为的好用例。这是非常危险的。

所以，我找到的唯一解决方案是从现在开始使用**int64_t**而不是 uint64_t。

# matlab - Matlab 的 FOR 循环迭代时间增加

> ID：13764855
> 
> 赞同：2
> 
> 时间：2012-12-07T14:17:26.043
> 
> 标签：matlab, loops, for-loop

我正在尝试跨越某个多变量函数*f(nu,delta,Omega,kappa,Gamma)*的值。代码如下：

```
% PREALLOCATE RESULT MATRIX

N = 10;
d = 0.1;

M = zeros(4*N/d+(2*N+1)/d,6);

% SET UP LOOP INDICES

i=1;
increm=1;

% LOOP OVER MULTIPLE VARIABLE

for nu=d:d:N
    for delta=-N:d:N
        for Omega=d:d:N
            for kappa=d:d:N
                tic
                for Gamma=d:d:N

                % CALCULATE THE FUNCTION 

                mss = ((Gamma+kappa).*((Gamma+kappa).^2+4.*(delta+(-1).*nu).^2).^(-1)+( ...
                  -1).*(Gamma+kappa).*((Gamma+kappa).^2+4.*(delta+nu).^2).^(-1)+( ...
                  kappa.^2+4.*(delta+(-1).*nu).^2).^(-1).*(((2.*Gamma+kappa).^2+4.*( ...
                  delta+(-1).*nu).^2).*(kappa.*(Gamma+kappa).*(2.*Gamma+kappa)+4.*(( ...
                  -1).*Gamma+kappa).*(delta+(-1).*nu).^2)+4.*(kappa.*(2.*Gamma+ ...
                  kappa).^2+4.*(4.*Gamma+kappa).*(delta+(-1).*nu).^2).*Omega.^2).*( ...
                  16.*(delta+(-1).*nu).^4+4.*(delta+(-1).*nu).^2.*((Gamma+kappa).^2+ ...
                  (2.*Gamma+kappa).^2+(-8).*Omega.^2)+((Gamma+kappa).*(2.*Gamma+ ...
                  kappa)+4.*Omega.^2).^2).^(-1)+(-1).*(kappa.^2+4.*(delta+nu).^2).^( ...
                  -1).*(((2.*Gamma+kappa).^2+4.*(delta+nu).^2).*(kappa.*(Gamma+ ...
                  kappa).*(2.*Gamma+kappa)+4.*((-1).*Gamma+kappa).*(delta+nu).^2)+ ...
                  4.*(kappa.*(2.*Gamma+kappa).^2+4.*(4.*Gamma+kappa).*(delta+nu).^2) ...
                  .*Omega.^2).*(16.*(delta+nu).^4+4.*(delta+nu).^2.*((Gamma+kappa) ...
                  .^2+(2.*Gamma+kappa).^2+(-8).*Omega.^2)+((Gamma+kappa).*(2.*Gamma+ ...
                  kappa)+4.*Omega.^2).^2).^(-1)).^(-1).*((Gamma+kappa).*((Gamma+ ...
                  kappa).^2+4.*(delta+nu).^2).^(-1)+(kappa.^2+4.*(delta+nu).^2).^( ...
                  -1).*(((2.*Gamma+kappa).^2+4.*(delta+nu).^2).*(kappa.*(Gamma+ ...
                  kappa).*(2.*Gamma+kappa)+4.*((-1).*Gamma+kappa).*(delta+nu).^2)+ ...
                  4.*(kappa.*(2.*Gamma+kappa).^2+4.*(4.*Gamma+kappa).*(delta+nu).^2) ...
                  .*Omega.^2).*(16.*(delta+nu).^4+4.*(delta+nu).^2.*((Gamma+kappa) ...
                  .^2+(2.*Gamma+kappa).^2+(-8).*Omega.^2)+((Gamma+kappa).*(2.*Gamma+ ...
                  kappa)+4.*Omega.^2).^2).^(-1));

                % STORE THE RESULT

                M(i,:) = [mss nu delta Omega kappa Gamma];

                i = i+increm;

                end
            end
            toc
        end
    end
end

save M 
```

然而，预分配无助于每次迭代花费更长的时间。当我运行代码并过早中断它时，迭代需要

```
Elapsed time is 0.003354 seconds.
Elapsed time is 0.006374 seconds.
Elapsed time is 0.009043 seconds.
Elapsed time is 0.012092 seconds.
Elapsed time is 0.015287 seconds.
Elapsed time is 0.019239 seconds.
Elapsed time is 0.023898 seconds.
Elapsed time is 0.035345 seconds.
Elapsed time is 0.046675 seconds.
Elapsed time is 0.056000 seconds.
Elapsed time is 0.066323 seconds.
Elapsed time is 0.072178 seconds.
Elapsed time is 0.075174 seconds.
Elapsed time is 0.081095 seconds.
Elapsed time is 0.095016 seconds.
Elapsed time is 0.095214 seconds.
Elapsed time is 0.100089 seconds.
Elapsed time is 0.104286 seconds.
Elapsed time is 0.109454 seconds.
Elapsed time is 0.115368 seconds.
Elapsed time is 0.124278 seconds.
Elapsed time is 0.131521 seconds.
Elapsed time is 0.135023 seconds.
Elapsed time is 0.137370 seconds.
Elapsed time is 0.145331 seconds.
Elapsed time is 0.163449 seconds.
Elapsed time is 0.162654 seconds.
Elapsed time is 0.159628 seconds.
Elapsed time is 0.166585 seconds. 
```

我看不出变量本身的变化是如何导致这种情况的，因为唯一的变化量为*d*，这不应该比之前的交互更难计算 mss 的新值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T14:27:11.520

您没有预先分配足够大的数组！

如果您执行以下嵌套循环

```
for ii=1:3
   for jj = 1:4
       doSomething()
   end
end 
```

`doSomething`执行 3*4=12 次。使用您的分配方案，您将分配 3+4=7 次。

换句话说，将您的预分配更改为

```
M = zeros((N/d)^4*(2*N+1)/d,6); 
```

一切都会好起来的。

# c++ - 未调用析构函数

> ID：13764857
> 
> 赞同：0
> 
> 时间：2012-12-07T14:17:31.470
> 
> 标签：c++, destructor, c++builder-xe2

这是我的 WinMain 方法的摘录。它并不完整，但我认为足以说明问题的核心。请不要问我为什么要自动删除数据模块。这完全是另一个问题（与应用程序初始化过早结束并在一个构造函数中出现异常时不正确的完成顺序有关）。

```
extern PACKAGE TDataModule_Local *DataModule_Local;

class TDataModule_Local :
   public TDataModule
{
...
public:
   __fastcall        TDataModule_Local(TComponent *Owner);
   __fastcall        ~TDataModule_Local();
}

WINAPI wWinMain(HINSTANCE, HINSTANCE, LPTSTR, int)
{
    Application->Initialize();
    Application->CreateForm(__classid(TMainForm), &MainForm);
    Application->CreateForm(__classid(TDataModule_Local), &DataModule_Local);    
    Application->Run();    

    if (DataModule_Local != NULL)
    {
       delete DataModule_Local;     // destructor not called! why?
       DataModule_Local = NULL;
    }

    return 0;    
} 
```

当我使用删除运算符时，不会调用数据模块的奇怪析构函数。Is 在程序到达 WinMain 方法的大括号后调用：

![在此处输入图像描述](../Images/c0ceee4f2ba62b24b3c543dababfbf80.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:29:18.780

You said

> deleting data module explicitly when it should be done automatically

Obviously whatever code is designed to free it automatically is still trying to do so, blissfully ignorant of your problems with finalization order.

Just because you've set your pointer to NULL doesn't mean that there isn't a copy of the pointer sitting in a list of objects to be cleaned up on exit.

# java - AbstractQueuedSynchronizer.acquireShared 无限等待，即使等待条件已经改变

> ID：13764858
> 
> 赞同：5
> 
> 时间：2012-12-07T14:17:30.450
> 
> 标签：java, java.util.concurrent

我写了一个使用 AbstractQueuedSynchronizer 的简单类。我写了一个代表“门”的类，如果打开可以通过，如果关闭则阻塞。这是代码：

```
public class GateBlocking {

  final class Sync extends AbstractQueuedSynchronizer {
    public Sync() {
      setState(0);
    }

    @Override
    protected int tryAcquireShared(int ignored) {
      return getState() == 1 ? 1 : -1;
    }

    public void reset(int newState) {
      setState(newState);
    }
  };

  private Sync sync = new Sync();

  public void open() {
    sync.reset(1);
  }

  public void close() {
    sync.reset(0);
  }

public void pass() throws InterruptedException {
    sync.acquireShared(1);
  }

}; 
```

不幸的是，如果一个线程因为门关闭而阻塞通过方法，而其他线程同时打开门，则被阻塞的线程不会被中断 - 它会无限阻塞。这是一个显示它的测试：

```
public class GateBlockingTest {

    @Test
    public void parallelPassClosedAndOpenGate() throws Exception{
        final GateBlocking g = new GateBlocking();
        Thread t = new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    Thread.sleep(2000);
                    g.open();
                } catch (InterruptedException e) {
                }
            }
        });

        t.start();
        g.pass();
    }
} 
```

请帮忙，我应该改变什么才能使门通过线程成功获取锁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:43:07.213

看起来`setState()`只是更改了状态，但没有通知阻塞线程有关更改。

因此，您应该改用获取/释放方法：

```
@Override
protected boolean tryReleaseShared(int ignored) {
    setState(1);
    return true;
}
...
public void open() {
   sync.releaseShared(1);
} 
```

因此，整体工作流程`AbstractQueuedSynchronizer`如下：

*   客户端调用`public`获取/释放方法

*   这些方法安排所有同步功能并将实际锁定策略委托给`protected try*()`方法

*   您使用//在`protected try*()`方法中定义您的锁定策略`getState()``setState()``compareAndSetState()`

# android - Android：如何将 Facebook 个人资料图片放入我的对话框

> ID：13764862
> 
> 赞同：0
> 
> 时间：2012-12-07T14:17:35.237
> 
> 标签：android, facebook

我正在处理一个对话框。当我单击一个按钮时，它应该会打开一个带有 Facebook 个人资料图像的对话框。我怎样才能做到这一点？下面是我的对话框。

```
final Dialog dialog = new Dialog(context);
                        dialog.setContentView(R.layout.customdailog);

                        ImageView image = (ImageView) dialog.findViewById(R.id.imageView2);
                        image.setImageResource(R.drawable.fb);

                        Button dialogButton = (Button) dialog.findViewById(R.id.fbshare);

                        dialogButton.setOnClickListener(new OnClickListener() {

                            public void onClick(View v) {
                                dialog.dismiss();
                        }

                        });
                        dialog.show();
                        break;
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T22:20:24.133

做这个：

```
ImageView image = (ImageView) dialog.findViewById(R.id.imageView2);
URL url = new URL("https://www.graph.facebook.com/jesselchen/picture");
Bitmap pic = BitmapFactory.decodeStream(url.openConnection().getInputStream());
image.setImageBitmap(pic); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T13:16:25.063

graphAPI 不需要授权即可获取个人资料图片等公共数据。

像这样构造一个 URL：

```
String userID = "TheNameOrIDOfTheUserYouWant";
String urlConstruct = "https://www.graph.facebook.com/" + userID + "/picture";
URL url = new URL(urlConstruct); 
```

然后只需抓取数据并将图像加载到 ImageView 中。

```
ImageView profilePic = (ImageView) dialog.findViewById(R.id.profile_pic);
Bitmap imageFromURL = BitmapFactory.decodeStream(url.openConnection().getInputStream());
profilePic.setImageBitmap(imageFromURL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T14:20:51.993

在 github上查看官方的[Android Facebook SDK](https://github.com/facebook/facebook-android-sdk)

用户个人资料图片也是公开的，这意味着不需要授权，您只需加载用户页面 URL，解析响应正文并获取图像

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T07:12:02.943

用这个：

```
ImageView image = (ImageView) dialog.findViewById(R.id.imageView1);  
URL url = new URL("https://graph.facebook.com/"+fb_user_id+"/picture?type=large");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();  
HttpURLConnection.setFollowRedirects(true);
conn.setInstanceFollowRedirects(true);  
Bitmap fbpicture = BitmapFactory.decodeStream(conn.getInputStream());
image.setImageBitmap(fbpicture); 
```

# c# - 确定子对象的类型

> ID：13764865
> 
> 赞同：1
> 
> 时间：2012-12-07T14:17:56.050
> 
> 标签：c#, inheritance

因此，我有一个名为 LogEvent 的基础对象，并创建了其他派生自该对象的类，例如 ExecuteEvent 或 SubmitEvent。当我尝试获取特定实例的类型时，它们总是以 LogEvent 的形式返回。这是每个类的定义：

```
class LogEvent
    {
        public List<LogEventAttribute> eventAttributes = new List<LogEventAttribute>();
        public int clusterId;
        public DateTime eventTime;

        public LogEvent(List<LogEventAttribute> eventAttributes)
        {
            this.eventAttributes = eventAttributes;
            this.clusterId = Convert.ToInt32(eventAttributes.Find(p => p.name.Equals("Cluster")).value);
            this.eventTime = DateTime.Parse(eventAttributes.Find(p => p.name.Equals("EventTime")).value);

        }
    }

    class SubmitEvent : LogEvent
    {
        public string submitHost;

        public SubmitEvent(List<LogEventAttribute> eventAttributes)
            : base(eventAttributes)
        {
            this.submitHost = eventAttributes.Find(p => p.name.Equals("SubmitHost")).value;
        }
    }

    class ExecuteEvent : LogEvent
    {
        public string executeHost;

        public ExecuteEvent(List<LogEventAttribute> eventAttributes)
            : base(eventAttributes)
        {
            this.executeHost = eventAttributes.Find(p => p.name.Equals("ExecuteHost")).value;
        }
    }

    class TerminatedEvent : LogEvent
    {
        public bool successful;

        public TerminatedEvent(List<LogEventAttribute> eventAttributes)
            : base(eventAttributes)
        {
            this.successful = Convert.ToBoolean(eventAttributes.Find(p => p.name.Equals("TerminatedNormally")).value);
        }
    }

    class LogEventAttribute
    {
        public string name, type, value;
        public LogEventAttribute(string name, string type, string value)
        {
            this.name = name;
            this.type = type;
            this.value = value;
        }
    } 
```

这里是我尝试根据类的类型做不同的事情的地方：

```
switch (currentEvent.GetType().ToString())
                    {
                        case "ExecuteEvent":
                            ExecuteEvent currentExEvent = currentEvent as ExecuteEvent;
                            item.SubItems.Add("Job executed by " + currentExEvent.executeHost);
                            break;
                        case "SubmitEvent":
                            SubmitEvent currentSubEvent = currentEvent as SubmitEvent;
                            item.SubItems.Add("Job submitted by " + currentSubEvent.submitHost);
                            break;
                    } 
```

开关总是被忽略，因为 currentEvent.GetType().ToString() 总是出现在 LogEvent 中。

编辑：问题是我首先以不同的方式创建这些不同的类。这是错误的代码：

```
LogEventAttribute eventTypeAttribute = currentEventAttributes.Find(p => p.name.Equals("MyType"));
                string eventType = eventTypeAttribute.type;
switch (eventType)
                {
                    case "SubmitEvent":
                        logEvents.Add(new SubmitEvent(currentEventAttributes));
                        break;
                    case "ExecuteEvent":
                        logEvents.Add(new ExecuteEvent(currentEventAttributes));
                        break;
                    case "TerminatedEvent":
                        logEvents.Add(new TerminatedEvent(currentEventAttributes));
                        break;
                    default:
                        logEvents.Add(new LogEvent(currentEventAttributes));
                        break;
                } 
```

在我从 eventTypeAttribute 获取属性“type”的第二行，我应该获取 value 属性。我使用 type 属性来确定属性存储在其 value 属性中的值的类型。啊，TGIF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:27:14.947

您可以使用`is`关键字进行类型检查，例如`currentEvent is ExecuteEvent`，这也消除了拼写错误的可能性。此外，`currentEvent is LogEvent`将返回 true，因为正如 Jared 所说，它是一个`LogEvent`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:26:08.260

如果您实际上获得了`LogEvent`from 的类型对象`GetType`，那么您拥有`LogType`该类的实例，而不是任何派生类的实例。但是，我不认为你得到了你认为你得到的东西。

`ToString()`在对象上使用`Type`将返回完整的命名空间，例如，`"MyApp.ExecuteEvent"`而不是`"ExecuteEvent"`.

请改用该`Name`属性：

```
switch (currentEvent.GetType().Name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:26:15.553

尝试这个：

```
ExecuteEvent executeEvent = currentEvent as ExecuteEvent;
if (executeEvent != null) 
{
 item.SubItems.Add("Job executed by " + currentExEvent.executeHost);
} 
```

# git - phpstorm git 尝试提交 workspace.xml

> ID：13764869
> 
> 赞同：3
> 
> 时间：2012-12-07T14:18:12.907
> 
> 标签：git, phpstorm

我在首选项中排除`.idea/`了文件夹，但是当我尝试提交更改时，phpstorm 会尝试提交 workspace.xml 文件。为什么？

![在此处输入图像描述](../Images/a5b3c666133d146f4ac2499778358fce.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T14:35:47.270

对于我所看到的，`.idea/workspace.xml`似乎被删除了，所以这意味着它以前被 git 跟踪过。

**编辑：** 您不小心提交了此文件，因此您想将其从存储库中删除，而不是从您的工作副本中删除。

为此，您必须使用以下`--cached`标志`git rm`：

```
$ git rm --cached .idea/workspace.xml 
```

来自`git help rm`：

```
 --cached
       Use this option to unstage and remove paths only from the index. Working tree files, whether modified or not, will be left alone. 
```

* * *

如果您希望文件不再包含在存储库代码中，则必须提交删除。

相反，如果您想将文件保留在那里但停止跟踪对该文件的进一步更改，则应使用`git`'`assume-unchanged`选项。

从命令行，就像：

```
$ git update-index --assume-unchanged .idea/workspace.xml 
```

我真的不知道如何使用您使用的 GUI 来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:22:31.023

答案是：只需添加`.idea/`到我的应用程序根目录中的 .gitignore 文件即可。

# c++ - CDaoRecordSet::Seek 错误

> ID：13764871
> 
> 赞同：0
> 
> 时间：2012-12-07T14:18:15.607
> 
> 标签：c++, windows, visual-studio-2008

```
CString str = "something";
CDaoDatabase db;
//db open
CDaoRecordset rs(&db);
rs.Open(AFX_DAO_USE_DEFAULT_TYPE,"select * from mydb");
COleVariant searched(str); 
BOOL bFound = rs.Seek("=",searched); 
```

对于此语句 VS2008 返回`error C2664: 'BOOL CDaoRecordset::Seek(LPCTSTR,COleVariant *,COleVariant *,COleVariant *)' : cannot convert parameter 2 from 'COleVariant' to 'COleVariant *'.`

如何转换`COleVariant`为指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:29:10.470

使用地址运算符 '&'

```
BOOL bFound = rs.Seek("=",&searched); 
```

# java - 选择排序递归调用

> ID：13764875
> 
> 赞同：0
> 
> 时间：2012-12-07T14:18:38.027
> 
> 标签：java, sorting, recursion, selection

> 我正在研究递归问题，我要调用它，但它显示如下

```
import java.util.Arrays;

public class BinarySearch {
public static int binarySearch(int [] list, int key){
    int low = 0;
    int high = list.length -1;
    return binarySearch(list, key, low ,high);
}
public static int binarySearch(int [] list, int key, int low, int high){
    if(low > high){
        return (-low -1);}
    int mid = (low + high) / 2;
    if(key < list[mid])
        return binarySearch(list, key, low, mid - 1);
    else if(key == list[mid])
        return mid;
    else
        return binarySearch(list, key, mid + 1, high);
}
public static void main (String [] args){
    int [] list = {'1', '2','4','5'};
    binarySearch(list, 4);
    System.out.println(Arrays.toString(list));

} 
```

}

> 输出：[49、50、52、53]

我应该怎么做才能使它正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T14:20:10.463

您将字符存储在整数数组中：-

```
int [] list = {'1', '2','4','5'}; 
```

因此，您获得的值`1, 2, 4, 5`分别是 ASCII 码。因此，您的`binarySearch`方法将永远无法找到该值`4`。因为，它并不完全存在。删除您的值周围的那些单引号。

其次，您没有打印`return value`of`binarySearch`方法：-

```
binarySearch(list, 4); 
```

应该： -

```
System.out.println(binarySearch(list, 4)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:22:31.947

您添加到列表字符值。

像这样切换单引号应该没问题

```
{1,2,4,5}; 
```

因此，在您给定的情况下，您正在存储字符“1”、“2”、“3”和“4”的 ascii 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:22:42.590

正如 Rohit 指出的那样，您正在利用`char`类型作为数字类型。

您可以将您的“列表”声明为`char[]`它应该修复它，或者使用数字文字。

# performance - QEMU：Windows 7 客户机的视频性能缓慢

> ID：13764878
> 
> 赞同：0
> 
> 时间：2012-12-07T14:18:46.280
> 
> 标签：performance, virtualization, fedora, qemu, libvirt

我在 Fedora 17 主机上运行在 QEMU/virt-manager 下虚拟化的 Windows 7 来宾，视频性能似乎很差。鼠标移动缓慢且反应迟钝。

客人正在使用 qxl 视频适配器和 Spice 显示器。来宾 Windows 7 安装了最新的香料工具。在 virt-manager 中将 spice 更改为 VLC 并不能改善情况，切换到不同的显示适配器（vga/cirrus）也不会改善。我试过增加视频内存，也没有帮助。

我猜这是与视频相关的，因为通过 RDP 直接连接到 Windows 机器响应速度更快。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:57:37.567

我尝试用 win7 槽运行 qemu： 1\. sdl -> fbdev 2\. sdl -> nouveaufb（不适合我） 3\. sdl -> directfb（不适合我） 4\. sdl -> ggi（鼠标不工作） - > fbdev（或 nouveaufb） 5\. sdl（使用 USE="opengl"）-> xorg（使用 nouveau opengl）。一切都一样）视频正在平滑，没有运气）

# orchardcms - Orchard 为所有页面返回 404

> ID：13764883
> 
> 赞同：2
> 
> 时间：2012-12-07T14:18:56.127
> 
> 标签：orchardcms

我正在 Visual Studio 2012 中开发一个 Orchard 站点并使用内置的开发服务器进行调试。我似乎做了一些导致 Orchard 为所有页面返回“找不到资源”（404）并在主页上显示目录列表的事情。

Global.asax 和 Orchard 的预热模块中的代码正在运行。

有关如何跟踪此问题的任何提示？帮助将不胜感激。

# python - 使用 django-mssql 连接到 MS SQL Server 时出现问题

> ID：13764887
> 
> 赞同：5
> 
> 时间：2012-12-07T14:19:11.400
> 
> 标签：python, django, sql-server-2008, django-mssql

我正在尝试使用 django-mssql 通过 Django 1.4.2 连接到 MS SQL Server 2008 R2 这些是我的数据库设置：

```
DATABASE_ENGINE   = 'sqlserver_ado'
DATABASE_NAME     = 'dbtest'
DATABASE_USER     = 'App'
DATABASE_PASSWORD = '*********'
DATABASE_HOST     = 'localhost'
DATABASE_OPTIONS  =  {
            'provider': 'SQLNCLI10',
            'extra_params': 'DataTypeCompatibility=80;MARS Connection=True;',
        } 

DATABASES = {
  'default': {
    'ENGINE':   DATABASE_ENGINE,
    'NAME':     DATABASE_NAME,
    'USER':     DATABASE_USER,
    'PASSWORD': DATABASE_PASSWORD,
    'HOST':     DATABASE_HOST,
    'OPTIONS' : DATABASE_OPTIONS,
  },
} 
```

这是我尝试同步数据库时遇到的错误

```
 Traceback (most recent call last):
  File "C:\Python27\DataSatellite\manage.py", line 11, in <module>
    execute_manager(settings)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 459, in execute_manager
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "C:\Python27\lib\site-packages\django\core\management\commands\syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "C:\Python27\lib\site-packages\django\db\backends\__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "C:\Python27\lib\site-packages\sqlserver_ado\base.py", line 193, in _cursor
    self.__connect()
  File "C:\Python27\lib\site-packages\sqlserver_ado\base.py", line 168, in __connect
    use_transactions=self.use_transactions,
  File "C:\Python27\lib\site-packages\sqlserver_ado\dbapi.py", line 151, in connect
    raise OperationalError(e, "Error opening connection: " + connection_string)
sqlserver_ado.dbapi.OperationalError: (AttributeError("'module' object has no attribute 'VARIANT'",), 'Error opening connection: DATA SOURCE=localhost;Initial Catalog=dbtest;UID=App;PWD=*********;PROVIDER=SQLNCLI10;MARS Connection=True;DataTypeCompatibility=80;MARS Connection=True;')
Finished "C:\Python27\DataSatellite\manage.py syncdb" execution. 
```

我到处寻找，我似乎无法理解和解决问题。我希望有人能帮帮忙！谢谢！

编辑：

我已经创建了数据库。我还使用 django-pyodbc 连接到数据库，并且我已经成功地从数据库中读取和写入。但是 django-pyodbc 在我使用 Apache 时会出现问题，这就是我决定尝试 django-mssql 的原因。但是，我不明白它出现的错误。

我的 Django (1.4.2) 和 Python (2.7) 安装在 Windows 上运行，我使用的是 Apache 网络服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:40:05.520

更新 pywin32 以构建 217 或更高版本。我在 stackoverflow 上发现了另一个具有相同问题的问题（关于另一个主题）：

[Python COM 服务器抛出“模块”对象没有属性“VARIANT”](https://stackoverflow.com/questions/11816383/python-com-server-throws-module-object-has-no-attribute-variant)

# c++ - 什么决定了 C 中整数的大小？

> ID：13764892
> 
> 赞同：4
> 
> 时间：2012-12-07T14:19:30.553
> 
> 标签：c++, c, sizeof

> **可能重复：**
> [int、long 等](https://stackoverflow.com/questions/589575/size-of-int-long-etc)
> [的大小 int 的大小是否取决于编译器和/或处理器？](https://stackoverflow.com/questions/2331751/does-the-size-of-an-int-depend-on-the-compiler-and-or-processor)

我不确定之前是否在 SO 上问过类似的问题（至少，我在搜索时找不到任何问题，所以想问自己）。

是什么决定 . 中`int`（和其他数据类型）的大小`C`。我已经读过它取决于机器/操作系统/编译器，但还没有对诸如什么覆盖另一个等事情进行清晰/详细的解释。任何解释或指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T14:24:10.390

最终编译器会这样做，但为了使编译后的代码能够很好地与系统库配合使用，大多数编译器都会匹配用于构建目标系统的编译器的行为。

所以松散地说，大小`int`是目标硬件和操作系统的一个属性（同一硬件上的两个不同操作系统可能有不同的大小`int`，而在两台不同机器上运行的同一个操作系统可能有不同的大小`int`；有合理的两者的常见例子）。

所有这些也受到 C 标准中的规则的约束。 `int`例如，必须足够大以表示`-32767`和之间`32767`的所有值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T14:23:46.007

`int`是平台的“自然”大小，在实践中，这意味着

*   处理器的寄存器大小，或

*   与现有代码库向后兼容的大小（例如 Win64 中的 32 位`int`）。

编译器供应商可以自由选择具有 ≥ 16 位值的任何大小，除了（对于桌面平台和更高版本）不适用于 OS 的 API 的大小将意味着即使有编译器的任何副本也很少出售。;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:24:15.320

所以除了维基百科之外什么都不知道，几乎……
见[Integer_(computer_science)](http://en.wikipedia.org/wiki/Integer_%28computer_science%29#Common_integral_data_types)

注 (b) 说：
“ *C/C++ 中 short、int 和 long 的大小取决于语言的实现；取决于数据模型，即使是 short 也可以是 16 位到 64 位之间的任何值。对于某些常见平台：
在较早的 16 位操作系统上，int 是 16 位，long 是 32 位。
在 32 位 Linux、DOS 和 Windows 上，int 和 long 是 32 位，而 long long 是 64 位. 对于运行 32 位程序的 64 位处理器也是如此。
在 64 位 Linux 上，int 是 32 位，而 long 和 long long 是 64 位*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:52:59.950

C 数据类型的大小受 C 标准的限制，通常是*最小*大小的限制。主机环境（目标机器+操作系统）可能会施加进一步的限制，即对*最大*大小的限制。最后，编译器可以在这些最小值和最大值之间自由选择合适的值。

通常，对 C 数据类型的大小进行假设被认为是不好的做法。此外，这不是必需的，因为 C 会告诉你：

*   `sizeof`-operator 以字节为单位告诉您对象的大小
*   limits.h中的宏`CHAR_BITS`告诉您每个字节的位数

因此，`sizeof(foo) * CHAR_BITS`告诉您 type 的大小（`foo`以位为单位），包括填充。

其他任何事情都只是假设。请注意，主机环境也可能由 10.000 名中国人组成，他们拥有袖珍计算器和一块巨大的黑板，无中生有地消除了规模限制。

# bash - 如何在bash中方便地列出指定范围内的yyyy/mm/dd目录？

> ID：13764896
> 
> 赞同：0
> 
> 时间：2012-12-07T14:19:33.163
> 
> 标签：bash

如果它是单个目录，我可以使用诸如`{yyyymmdd..kkkkkkkk}`选择范围内的那些技巧。

但是现在日期信息包含在三个目录中，

是否有任何高级 bash 技巧可以最方便地完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:31:32.440

```
ls -d1 */*/* | awk '$1>="yyyy/mm/dd" && $1<="yyyy/mm/dd"' 
```

# hibernate - JPA 2 复杂映射

> ID：13764898
> 
> 赞同：0
> 
> 时间：2012-12-07T14:19:41.010
> 
> 标签：hibernate, jpa

我有三个实体`Person`，它`Task`的`Note`行为应该如下：

*   一个人可以有多项任务
*   一项任务可以分配给多人
*   每个人都可以为一项任务附加多个注释。

基于此，我有以下表格：

```
Person     Task    Person_Task    Note           Person_Task_Note
-------    ----    -----------    -----------    ----------------
id         id      id             id             id
name       name    person_id      description    person_task_id
                   task_id                       note_id 
```

具有以下关系：

*   多对多之间`Person`并用作`Task`连接`Person_Task`表
*   一对多之间`Person_Task`并用作`Note`连接`Person_Task_Note`表

现在我正在尝试使用 JPA2 和 Hibernate 来映射这个结构。我的目标是在代码中只包含具有以下选项的三个基本实体：

*   获取一个人的所有任务 ( `person.getTasks()`)
*   获取某人任务的所有笔记 ( `task.getNotes()`)

我知道我可以将每个表映射到一个类，然后使用胖 JPA 标准查询检索必要的信息。

但是，我想避免（如果可能的话）为连接表创建类。

`Person`如果我映射和`Task`使用之间的关系，`@ManyToMany`我目前看不到如何进一步检索`Note`条目

是否可以仅通过使用 JPA 注释而不为连接表编写类来进行这种映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:23:27.827

不，这是不可能的。您必须映射所有表，并将 Person 和 Task 之间的 ManyToMany 转换为两个 OneToMany 关联。

# ios - PushSharp Push 直到停止才处理队列

> ID：13764900
> 
> 赞同：3
> 
> 时间：2012-12-07T14:19:49.763
> 
> 标签：ios, c#-4.0, apple-push-notifications, pushsharp

PushSharp 仅在调用 stop 时处理队列。有谁知道 push sharp 将多久处理一次队列或刷新它？我不想每次要发送通知以节省资源时都必须调用停止和启动。

```
 pushService = new PushService();
            pushService.StartApplePushService(new ApplePushChannelSettings(prod,  cert.InputStream.ReadToEnd(), passConfig.Value));
  pushService.QueueNotification(
                NotificationFactory.Apple().ForDeviceToken("mydeviceid").WithAlert("Notifications Started!").WithSound("default").WithBadge(7));

            pushService.StopAllServices(true); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T14:37:26.253

我是个彻头彻尾的白痴……

主线程在队列计时器可以处理通知之前完成执行。StopAllServices 迫使线程等待......也许这会帮助其他人。

# entity-framework - 在以一对多关系向集合中添加新实体时自动更新 RelatedProperty

> ID：13764902
> 
> 赞同：0
> 
> 时间：2012-12-07T14:19:51.230
> 
> 标签：entity-framework, one-to-many, crud

实体框架 5.0

假设我有以下设置：

```
public class Book
{
    public int ID {get; set;}
    public string Title {get; set;}

    [InverseProperty("Books")]
    [Required]
    public Author Author {get; set;}
}

public class Author
{
    public int ID {get; set;}
    public string Name {get; set;}

    public virtual ICollection<Book> Books {get; set;}
} 
```

然后在我的代码中，我创建了一本新书，我这样做：

```
author.Books.Add(newBook); 
```

我怎样才能让这本书自动选择它的作者，而不是每次都写这个：

```
newBook.Author = author; 
```

我希望子实体在添加到父实体的集合时自动拾取其父实体。

这可能吗？流畅的映射可能吗？

还是我必须自己维护这种双向关系的双方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:27:14.120

我的错。

这是默认行为，这本书的作者是开箱即用的。

结案。

# oracle - 数据核+ jpa + oracle。表不存在的奇怪错误

> ID：13764904
> 
> 赞同：1
> 
> 时间：2012-12-07T14:19:57.970
> 
> 标签：oracle, jpa, datanucleus

当我尝试使用 Datanucleus 访问 Oracle 数据库时，我遇到了一个奇怪的问题。简而言之，发生的事情是这样的：

*   我运行我的应用程序；当 datanucleus 初始化时，它抱怨它找不到表（尽管它们在那里）。
*   我停止应用程序，删除表格，添加

    ```
    datanucleus.autoCreateSchema = true 
    ```

    ...persistence.xml 中的属性，一切正常 - 创建表，然后选择工作。

*   我再次停止应用程序，然后尝试在禁用上述参数的情况下启动它。

*   尽管最初是 Datanucleus 创建了表，但错误又回来了，现在它抱怨找不到它们。
*   另请注意，相同的设置适用于后面的 postgresql 数据库，没有问题。

有人可以帮忙吗？

关于我的设置的一些细节：

*   我正在使用 Oracle 瘦驱动程序。
*   我的实体类是这样注释的：

    ```
    @Entity
    @Table(name = "tablename1", schema = "schema2000") 
    ```

*   请注意，如果我从注释中删除 schema=... 一切正常

*   错误信息是：

    ```
    16:05:40,216 DEBUG [DataNucleus.Connection] - Setting autocommit=false to connection: com.mchange.v2.c3p0.impl.NewProxyConnection@1dff2e1b
    16:05:40,216 DEBUG [DataNucleus.Connection] - Connection "com.mchange.v2.c3p0.impl.NewProxyConnection@1dff2e1b" opened with isolation level "read-committed"
    16:05:40,904 DEBUG [DataNucleus.Datastore.Schema] - Check of existence of schema2000.tablename1 returned table type of null
    16:05:40,905 DEBUG [DataNucleus.Datastore.Schema] - An error occurred while auto-creating schema elements - rolling back
    16:05:41,109 DEBUG [DataNucleus.Connection] - Connection "com.mchange.v2.c3p0.impl.NewProxyConnection@1dff2e1b" non enlisted to a transaction is being committed.
    16:05:41,110 DEBUG [DataNucleus.Connection] - Connection "com.mchange.v2.c3p0.impl.NewProxyConnection@1dff2e1b" closed
    javax.persistence.PersistenceException: Required table missing : "schema2000.tablename1" in Catalog "" Schema "schema2000". DataNucleus requires this table to perform its persistence operations. Either your MetaData is incorrect, or you need to enable "datanucleus.autoCreateTables"
    at org.datanucleus.api.jpa.NucleusJPAHelper.getJPAExceptionForNucleusException(NucleusJPAHelper.java:274)
    at org.datanucleus.api.jpa.JPAEntityManager.merge(JPAEntityManager.java:519) 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:39:17.663

建议您仔细查看标识符的区分大小写。DataNucleus 记录 JDBC 驱动程序允许的内容，例如

> 支持的标识符大小写：“MixedCase”大写“MixedCase-Sensitive”

所以它可能需要大写或引用的模式（所有 RDBMS 都是不同的，包括一些不同取决于它们运行的​​操作系统）

显然不建议在注释中嵌入特定于数据存储的信息。

# html - 让导航在更小的屏幕上工作

> ID：13764907
> 
> 赞同：0
> 
> 时间：2012-12-07T14:20:03.443
> 
> 标签：html, css, responsive-design, media-queries

我昨晚发布了一个关于使用媒体查询的问题[固定标题和响应式网站问题](https://stackoverflow.com/questions/13753512/fixed-header-and-a-responsive-website-issue)

所以我以为我终于破解了它，但似乎发生的事情是当屏幕缩小时，文本会跳到左边并消失。我以为我所要做的就是制作`#nav-wrapper`相同的尺寸和屏幕。

这是代码

**HTML**

```
<body>
<div class="container">
<nav id="main-nav">
    <div class="inner-nav" id="nav-wrapper">        
            <div class="ten columns">
                <ul>
                    <li><a href="/">Test</a></li>
                    <li><a href="/">Test</a></li>
                    <li><a href="/">Test</a></li>
            </div>
    </div>
</nav>

</body>
</html> 
```

**CSS** - 以 Scss 格式压缩 CSS

```
//Navigation
#main-nav {
-webkit-box-shadow: 0 2px 15px rgba(0, 0, 0, 0.25);
-moz-box-shadow: 0 2px 15px rgba(0,0,0,0.25);
box-shadow: 0 2px 15px rgba(0, 0, 0, 0.25);
-webkit-transition: box-shadow 0.2s linear;
-moz-transition: box-shadow 0.2s linear;
-ms-transition: box-shadow 0.2s linear;
-o-transition: box-shadow 0.2s linear;
transition: box-shadow 0.2s linear;
border-bottom: 1px solid rgba(0, 0, 0, 0.2);
display: block;
position: fixed;
top: 0;
left: 0;
float: left;
width: 100%;
z-index: 12;
height: 60px;
background-color: white;

#wrapper {
    position: relative;
}

.inner-nav {
    margin-left: auto;
    margin-right: auto;
    width: 800px;
}

ul {
    float: right;
    margin: 0;
    width: 600px;

    li {
        vertical-align: middle;
        display: inline;
        margin: 0 2px;
        color: black;
        list-style-type: none;

        a {
            text-decoration: none;
        }

    }

}
} 
```

还有我打电话的媒体查询

```
/* All Mobile Sizes (devices and browser) */
@media only screen and (max-width: 767px) {
    #nav-wrapper{
        width:767px;
    }

} 
```

谁能告诉我当屏幕是移动的时候我必须做什么让我们说导航只是调整大小以适应屏幕。我也知道`position:fixed`我想要它，所以当用户滚动导航栏时，导航栏会保持在顶部。虽然如果有办法让导航覆盖整个网站的顶部，那么我就不必使用`position:fixed`我正在使用的框架（[http://www.getskeleton.com/](http://www.getskeleton.com/)）似乎不允许我这样做这个。

我试图有一个像[https://simple.com/](https://simple.com/)这样的设计，虽然不是 jQuery 的东西，只是顶部的导航，然后是页面的标题和下面的内容。我试过查看它们的源代码，但它们使用的是自定义样式表，而且它们也被压缩了。

编辑

可能不清楚我在追求什么，我想要一个具有固定标题的网站，它也是响应式的，因此在移动设备上它会适合屏幕。如果有人知道他们是如何在那里做的，那么这个简单的网站就是我正在努力的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:30:17.003

The problem I see with your media query is that when the screen has a width bellow 767px you're telling the css processor to render the nav-wrapper element with a width of 767px. So, if a user accesses the page via a 480px width device, it would overflow the screen.

I'm not sure I understand what you're trying to accomplish, but my best suggest is to set the width to 100% in your media query (or delete it completely, and inherit the width:100% from the previous CSS declaration for that element).

# php - 循环错过处理？

> ID：13764909
> 
> 赞同：0
> 
> 时间：2012-12-07T14:20:08.730
> 
> 标签：php, loops, for-loop, while-loop

我有一个名为 container 的 div，在容器内部我有两个 div column1 和 column2。在 column1 和 column2 内部我必须从数据库中获取记录并且必须在此处显示它。我的代码如下所示

```
 <div id="container" style="height:600px; width:600px; border:1px solid #990000">
 <?php $str=mysql_query("SELECT * FROM users") or die(mysql_error());
  while($rec=mysql_fetch_array($str){
 ?>
<div id="column1" style="height:200px; width:295px; border:1px solid #0000FF;float:left;">

  /*Here this record should be of id=1 */
 <img src="<?php echo $rec['pic'];?>" alt="No image" />
 <?php echo $rec['detail'];
</div>
<div id="column2" style="height:200px; width:295px; border:1px solid #0000FF;float:left;">

 /*Here this record should be of id=2 */
<img src="<?php echo $rec['pic'];?>" alt="No image" />
 <?php echo $rec['detail'];
</div>
 <?php } ?> 
```

我想在 id=1 和 column2 id=2 的用户的 column1 记录中，在 column1 id=3 和 column2 id=4 中再次记录，依此类推。在这个循环中有什么帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:35:39.393

顺便说一句，您正在使用已弃用的扩展程序。我强烈建议您使用较新的[MySQLi](http://php.net/mysqli)或[PDO](http://php.net/pdo)扩展来与 PHP 中的 MySQL 数据库交互以进行新的开发，因为这将使您的工作变得更加轻松。

您想要做的事情的答案是简单地以 2 的倍数遍历结果集，这可以通过 PDO 扩展实现，如下所示。

```
<div id="container">
<?php
$pdo = new PDO('mysql:dbname=testdb;host=127.0.0.1', 'mysqlusername', 'mysqlpassword');
$stmt = $pdo->query('SELECT * FROM users');
$result = $stmt->setFetchMode(PDO::FETCH_ASSOC);

/* And now do your loop in pairs of two */

foreach (array_chunk($result, 2) as $pair) {
    ?>
    <div id="1">
        <?php echo $pair[0]['detail']; ?>
    </div>
    <div id="2">
        <?php echo $pair[1]['detail']; ?>
    </div>
    <?php
}
?>
</div> 
```

另一种选择是使用计数器并在每次迭代时翻转它，然后根据条件确定要为循环的这次迭代输出哪个 div。

```
<div id="container">
<?php
$pdo = new PDO('mysql:dbname=testdb;host=127.0.0.1', 'mysqlusername', 'mysqlpassword');
$stmt = $pdo->query('SELECT * FROM users');
$result = $stmt->setFetchMode(PDO::FETCH_ASSOC);

/* And now do your loop in pairs of two */

$div = 0;
foreach ($result as $row) {
    $div ^= 1; // bitwise XOR
    if ($div) { // If it's odd show the first div
        ?>
        <div id="1">
            <?php echo $row['detail']; ?>
        </div>
        <?php
    } else {  // If it's even show the second div
        ?>
        <div id="2">
            <?php echo $row['detail']; ?>
        </div>
        <?php
    }
}
?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:43:37.477

这就是循环的全部内容。应该看起来像这样：

```
<div id="container" style="height:600px; width:600px; border:1px solid #990000">
<?php
$count = 0;
$result = mysql_query("SELECT * FROM users") or die(mysql_error());
if (mysql_num_rows($result) > 0) {
    while ($row = mysql_fetch_array($result)) {
        $count++;
?>
    <div id="column<?php if($count&1) { echo "1"; } else { echo "2"; } ?>" style="height:200px; width:295px; border:1px solid #0000FF;float:left;">
        <img src="<?php echo $row['pic']; ?>" alt="No image" />
        <?php echo $row['detail']; ?>
    </div>
<?php
    }
}
?>
</div> 
```

# python - rpy2 和 Python 2.7 的 ImportError

> ID：13764912
> 
> 赞同：1
> 
> 时间：2012-12-07T14:20:23.100
> 
> 标签：python, django, rpy2

我正在使用虚拟环境（python 2.7）运行 Django，并且需要使用该`rpy2`模块。但是，当我运行服务器时，出现以下错误：

```
/opt/site/env2.7/lib/python2.7/site-packages/rpy2/rinterface/_rinterface.so: undefined symbol: PyCapsule_Type 
```

对于可能导致错误的原因，我真的很迷茫。我在`pip install rpy2`激活虚拟环境时完成了。我需要一些缺少的图书馆吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:31:14.107

`PyCapsule`从 Python 3 向后移植，仅在 Python 2.7 上可用。

我的猜测是您的 Django 服务器正在运行 Python 2.6（可能是系统的默认 Python），同时`site-packages/`在其包路径中包含 python 2.7。

# ruby-on-rails - Rspec“没有路由匹配”错误

> ID：13764920
> 
> 赞同：2
> 
> 时间：2012-12-07T14:20:43.180
> 
> 标签：ruby-on-rails, testing, rspec

我正在尝试使用 rspec 在 Rails 3 应用程序中测试我的 session_controller，但是当我在我的 rspec 上运行 rspec 时不断遇到此错误`sessions_controller_spec.rb`：

```
ActionController::RoutingError:
   No route matches {:controller=>"sessions", :action=>"create"} 
```

以下是所有相关文件：

`routes.rb`

```
match 'event' => 'event#create', via: [:post]
match 'event/agenda' => 'event#agenda', via: [:get]
match 'testLogin' => 'application#test_login', via: [:get]
post 'session' => 'session#create' 
```

`sessions_controller.rb`

```
class SessionsController < ApplicationController
  def create
    #MY CODE HERE
  end
end 
```

`sessions_controller_spec.rb`

```
require 'spec_helper'

describe SessionsController, :type => :controller do

  describe "POST #create" do

    context "invalid params" do
        it "returns a response with status failed if all required parameters are not passed in" do
            post "create"
            response.body.status.should eq("failed")
       end
    end
  end
end 
```

如果有任何其他信息我可以提供帮助让我知道。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T15:03:24.463

```
post 'session' => 'session#create' 
```

您的路线定义正在寻找 a `SessionController`，但您已经定义了 a `SessionsController`。修正你的路线。

```
post 'session' => 'sessions#create' 
```

# c# - HTTPRequest 标头不在 Wireshark 中

> ID：13764922
> 
> 赞同：0
> 
> 时间：2012-12-07T14:20:42.930
> 
> 标签：c#, http, fiddler, wireshark, webrequest

我正在设置一些这样的 HTTP 请求标头：

```
 this.Url = new Uri(u);
        HttpWebRequest http = (HttpWebRequest)WebRequest.Create(Url);
        WebResponse response = http.GetResponse();

        //headers
        http.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0\r\n";
        http.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n";
        http.Headers.Add("Accept-Encoding", "gzip,deflate,sdch'r'n");
        http.Headers.Add("Accept-Language", "en-US,en;q=0.9\r\n");
        http.Headers.Add("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.3\r\n"); 
```

我像这样捕捉它们：

```
 for (count = 0; count < http.Headers.Keys.Count; count++)
        {
            headerKey = http.Headers.Keys[count];
            headerValue = http.Headers[headerKey];

            if (headerValue != null)
            {
                if (headerKey == null)
                {
                    requestbuffer.Append(headerValue);
                    requestbuffer.Append(Newline); 
                }
                else
                {
                    requestbuffer.Append(headerKey + ": " + headerValue);
                    requestbuffer.Append(Newline);
                }
            }
        } 
```

当我运行测试工具时，一切似乎都很好：

*   主机：domain.com
*   连接：保持活动
*   用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0)Gecko/20100101 Firefox/17.0
*   接受：text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
*   接受编码：gzip,deflate,sdch 接受语言：en-US,en;q=0.9
*   接受字符集：ISO-8859-1,utf-8;q=0.7,*;q=0.3

但是在 Wireshark 和 Fiddler 中，仅发送以下标头：

*   获取/HTTP/1.1
*   主机：domain.com

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:22:03.257

您*在*调用`http.GetResponse()`. 那是*在*发送请求之后。将其更改为：

```
this.Url = new Uri(u);
HttpWebRequest http = (HttpWebRequest)WebRequest.Create(Url);

//headers
http.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0\r\n";
http.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n";
http.Headers.Add("Accept-Encoding", "gzip,deflate,sdch'r'n");
http.Headers.Add("Accept-Language", "en-US,en;q=0.9\r\n");
http.Headers.Add("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.3\r\n");

using (WebResponse response = http.GetResponse())
{
    // Do whatever
} 
```

（请注意，您确实*应该*处理响应。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:22:58.217

是的，您在发送请求后设置标头。

试试这个：

```
 //headers
    http.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0\r\n";
    http.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n";
    http.Headers.Add("Accept-Encoding", "gzip,deflate,sdch'r'n");
    http.Headers.Add("Accept-Language", "en-US,en;q=0.9\r\n");
    http.Headers.Add("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.3\r\n");

    //Added diesposal of response too
    using (WebResponse response = http.GetResponse())
    {
    } 
```

# php - 用 PHP 混淆 javascript 代码的简单方法

> ID：13764925
> 
> 赞同：-2
> 
> 时间：2012-12-07T14:20:51.510
> 
> 标签：php, javascript, jquery

我想为我的网络访问者提供免费下载，但我会隐藏下载链接，直到他们点击 Facebook 上的点赞按钮。在他们喜欢它之后，jquery 将使按钮处于活动状态并向标签添加“href”属性，包含文件的路径，因此用户将能够单击链接并下载文件。

问题是，用户在浏览器中查看 html 的源代码时可以轻松看到路径。php中是否有任何简单的方法（我将javascript代码放在PHP文件中）使路径更难阅读？

当人们能够对其进行反混淆时，这很好。我只是想让非高级用户更难阅读，所以人们会考虑喜欢这个链接，而不是找到一种方法来去混淆代码。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:28:09.633

*当然，真正*正确执行此操作的唯一方法是按下按钮以往返于服务器以通过 ajax 或其他方式检索 URL。

但是，如果您不想这样做，而只是想掩盖它，那么有很多选择。[例如， Base-64](http://en.wikipedia.org/wiki/Base64)编码在 PHP 和 JavaScript 中都有很好的支持，因此您可以在 PHP 端（使用[`base64_encode`](http://php.net/manual/en/function.base64-encode.php)）对路径进行编码，并在按下按钮后在 JavaScript 上解码（使用Stack Overflow 上讨论[的](https://stackoverflow.com/questions/2820249/base64-encoding-and-decoding-in-client-side-javascript)几种解决方案中的任何一种）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:24:00.143

### 你可以尝试这样的事情：

```
ob_start();
# Insert regular JavaScript here...
$generatedoutput = ob_get_contents();
ob_end_clean();
$generatedoutput = str_replace("\\\r\n", "\\n", $generatedoutput);
$generatedoutput = str_replace("\\\n", "\\n", $generatedoutput);
$generatedoutput = str_replace("\\\r", "\\n", $generatedoutput);
$generatedoutput = str_replace("}\r\n", "};\r\n", $generatedoutput);
$generatedoutput = str_replace("}\n", "};\n", $generatedoutput);
$generatedoutput = str_replace("}\r", "};\r", $generatedoutput);
require('javascriptpacker.php');
$myPacker = new JavaScriptPacker($generatedoutput, 62, true, false);
$packed = $myPacker->pack();
echo($packed); 
```

并以这种方式添加：

```
<script language="JavaScript" type="text/javascript" src="js.php"></script> 
```

^(注意：最初来自sites.google.com/a/vansteenbeek.net/archive/obfuscate_javascript，现在是404)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T14:32:43.857

也许您可以只存储路径服务器端并让前端在项目被“喜欢”后将特殊代码传递给远程端点。

```
$([however you're binding to the like button]).on('click', function() {
 $.getJSON('/download_link.php', {'key': <some unique key>}, function(response) {
   if(response.status == 'valid') {
     $('<div><a href="' + response.path + '">Download the item now!</a></div>').appendTo('body');
   }
   else {
     alert('invalid security key');
   }
 });
}); 
```

如果您担心人们很容易看到常规，请转到打包程序（[http://dean.edwards.name/packer/](http://dean.edwards.name/packer/)）。它不安全，但它会阻止您的普通 joe 轻松查看代码。

仅供参考，打包时上面的代码如下所示：

```
eval(function(p,a,c,k,e,r){e=function(c){return c.toString(a)};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('$([m h\'9 e l 2 5 6]).7(\'8\', 3() {\n     $.b(\'/c.d\', {\'1\': <f g 1>}, 3(0) {\n       i(0.j == \'k\') {\n         $(\'<4><a n="\' + 0.o + \'">p 2 q r!</a></4>\').s(\'t\');\n       }\n       u {\n         v(\'w x 1\')}})});',34,34,'response|key|the|function|div|like|button|on|click|re||getJSON|download_link|php|binding|some|unique|you|if|status|valid|to|however|href|path|Download|item|now|appendTo|body|else|alert|invalid|security'.split('|'),0,{})) 
```

您需要从`download_link.php`文件中返回以下内容：

```
<?php
  if(valid_key($_REQUEST['key'])) {
     header('Content-Type: application/json');
     echo json_encode(array('status' => 'valid', 'path' => generate_secret_path()));
  }
?> 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:31:08.707

There are lots of ways to do what you want. Here's a simple algorithm that can build a URL. You can use this as inspiration. The following algorithm builds the URL `"http://www.google.com/"`

```
var url = [
    72, 84, 84, 80, 26, 15, 15, 87,
    87, 87, 14, 71, 79, 79, 71, 76,
    69, 14, 67, 79, 77, 15
].map(function(u) {
    return String.fromCharCode(u + 32);
}).join('');

console.log(url); 
```

# iphone - Facebook 通过 iphone 应用限制在朋友墙上发帖？

> ID：13764930
> 
> 赞同：0
> 
> 时间：2012-12-07T14:21:04.350
> 
> 标签：iphone, objective-c, ios, facebook

我使用以下代码在我的 iphone 应用程序的 facebook 朋友墙上发布邀请

我每天在他们的墙上发布的用户数量是否有限制，每个用户的帖子数量是否有限制？

我使用此代码让我的应用用户通过在他们的墙上发帖来邀请他的朋友

```
 Facebook* facebook =
    [[Facebook alloc] initWithAppId:appID andDelegate:self];

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Facebook SDK for iOS", @"name",
                                   @"Build great social apps and get more installs.", @"caption",
                                   @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
                                   @"https://developers.facebook.com/ios", @"link",
                                   @"https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png", @"picture",
                                   nil];

    [FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"%@/feed",friendId]
                                 parameters:params
                                 HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection, id     result,NSError *error)
     {
         NSLog(@"%@", result);
     }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:52:10.867

没有官方限制 afaik，但如果许多用户将您的条目标记为垃圾邮件或阻止应用程序，Facebook 肯定会限制您的应用程序。如果您在用户朋友的墙上张贴一些东西，这很可能会发生。

还要记住，（谢天谢地）在用户朋友的墙上发帖是一个已弃用的功能，并且很快将不再可用，因为在 99% 的情况下它是不需要的和垃圾邮件。人们对来自应用程序而不是直接来自用户的东西非常挑剔。

请参阅路线图：

[https://developers.facebook.com/roadmap/](https://developers.facebook.com/roadmap/)

> 移除通过 Graph API 向朋友墙发帖的功能

# c++ - 将数字转换为文本，C++

> ID：13764933
> 
> 赞同：6
> 
> 时间：2012-12-07T14:21:09.047
> 
> 标签：c++, arrays, switch-statement

对于输入数字 232，我希望能够以文本形式写出数字：232。我有一个包含这些数字的数组

```
Array[0] = 2, Array[1] = 3, Array[2] = 2. 
```

我写了一个

```
switch statement 
```

它看到数字并将其打印为文本，例如 203 2。我不知道如何动态地将“三”转换为“三十”。假设我有更多的数字要拼写，比如 452,232。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:25:23.390

你不能独立处理数字，就这么简单。

例如，for 文本`21`是“二十”和“一”`11`的串联，但文本 for 不是“十”和“一”的串联。

此外，“1001”不会变成“一千零一百零一”。

您可以使用函数调用来降低逻辑复杂性，但您将需要逻辑来一次查看多个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:48:27.457

[在 wikipedia](http://rosettacode.org/wiki/Number_names#C.2B.2B)查看这个实现。这可能是你想要的

如果链接损坏，直接从维基百科复制。
**如果要编写改进的解决方案，请先查看链接**

```
#include <string>
#include <iostream>
using std::string;

const char* smallNumbers[] = {
  "zero", "one", "two", "three", "four", "five",
  "six", "seven", "eight", "nine", "ten",
  "eleven", "twelve", "thirteen", "fourteen", "fifteen",
  "sixteen", "seventeen", "eighteen", "nineteen"
};

string spellHundreds(unsigned n) {
  string res;
  if (n > 99) {
    res = smallNumbers[n/100];
    res += " hundred";
    n %= 100;
    if (n) res += " and ";
  }
  if (n >= 20) {
    static const char* Decades[] = {
      "", "", "twenty", "thirty", "forty",
      "fifty", "sixty", "seventy", "eighty", "ninety"
    };
    res += Decades[n/10];
    n %= 10;
    if (n) res += "-";
  }
  if (n < 20 && n > 0)
    res += smallNumbers[n];
  return res;
}

const char* thousandPowers[] = {
  " billion", " million",  " thousand", "" };

typedef unsigned long Spellable;

string spell(Spellable n) {
  if (n < 20) return smallNumbers[n];
  string res;
  const char** pScaleName = thousandPowers;
  Spellable scaleFactor = 1000000000;   // 1 billion
  while (scaleFactor > 0) {
    if (n >= scaleFactor) {
      Spellable h = n / scaleFactor;
      res += spellHundreds(h) + *pScaleName;
      n %= scaleFactor;
      if (n) res += ", ";
    }
    scaleFactor /= 1000;
    ++pScaleName;
  }
  return res;
}

int main() {
#define SPELL_IT(x) std::cout << #x " " << spell(x) << std::endl;
  SPELL_IT(      99);
  SPELL_IT(     300);
  SPELL_IT(     310);
  SPELL_IT(    1501);
  SPELL_IT(   12609);
  SPELL_IT(  512609);
  SPELL_IT(43112609);
  SPELL_IT(1234567890);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T14:26:44.510

考虑一下数字的位置

在你的情况下

如果 3 在位置 1： `Array[1]=3 then cout "thirty"`

如果 3 在位置 2： `Array[2]=3 then cout "three hundred"`

依此类推，考虑非标准情况，例如十一或一百零一等等。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-05-09T21:16:36.920

```
#include <iostream>
#include <conio.h>
#include <stdio.h>
using namespace std;

int main() {

setlocale(LC_ALL,"Turkish");
int ikibsm, yuzler, sayi,birler,onlar;
clrscr();
do {

printf("\nSayıyı giriniz:");
scanf("%d", &sayi);

yuzler=sayi/100;
ikibsm=sayi%100;
onlar=ikibsm/10;
birler=ikibsm%10;

switch (yuzler)
{
    case 0: printf("") ;break;
    case 1: printf("Yüz ") ;break;
    case 2: printf("İkiyüz ") ;break;
    case 3: printf("Üçyüz ") ;break;
    case 4: printf("Dört Yüz ") ;break;
    case 5: printf("Beş Yüz ") ;break;
    case 6: printf("Altı Yüz ") ;break;
    case 7: printf("Yedi Yüz ") ;break;
    case 8: printf("Sekiz Yüz ") ;break;
    case 9: printf("Dokuz Yüz ") ;break;
}

 switch (onlar)
{
    case 1: printf("On ") ;break;
    case 2: printf("Yirmi ") ;break;
    case 3: printf("Otuz ") ;break;
    case 4: printf("Kırk ") ;break;
    case 5: printf("Elli ") ;break;
    case 6: printf("Altmış ") ;break;
    case 7: printf("Yetmiş ") ;break;
    case 8: printf("Seksen ") ;break;
    case 9: printf("Doksan ") ;break;
}

switch(birler)
{
    case 1: printf("Bir ") ;break;
    case 2: printf("İki ") ;break;
    case 3: printf("Üç ") ;break;
    case 4: printf("Dört ") ;break;
    case 5: printf("Beş ") ;break;
    case 6: printf("Altı ") ;break;
    case 7: printf("Yedi ") ;break;
    case 8: printf("Sekiz ") ;break;
    case 9: printf("Dokuz ") ;break;
}
} while (sayi<1000);
} 
```

# java - 从我从网站上抓取的文本中删除空格

> ID：13764934
> 
> 赞同：2
> 
> 时间：2012-12-07T14:21:12.673
> 
> 标签：java, jsoup

我正在尝试从网站上抓取药物清单。我正在使用 JSOUP 来解析 Html。

这是我的代码：

```
URL url = new URL("http://www.medindia.net/drug-price/index.asp?alpha=a");
Document doc1 = Jsoup.parse(url, 0);

Elements rows = doc1.getElementsByAttributeValue("style", "padding-left:5px;border-right:1px solid #A5A5A5;");

for(Element row : rows){
    String htm = row.text();
    if(!(htm.equals("View Price")||htm.contains("Show Details"))) {
        System.out.println(htm);
        System.out.println();
    }
} 
```

这是我得到的输出：

![输出图像](../Images/f7af1ca167499d1d1ba015864bf4c67b.png)

PS*这不是完整的输出*，但是由于我无法截取完整输出的屏幕截图，所以我只是显示了它。

我需要知道两件事：

**问题 1.**为什么我在每个药物名称前都有一个额外的空格，为什么我在某些药物名称后会出现额外的新行？

**问题 2.**如何解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:29:57.323

一些东西：

1.  这不是完整的输出，因为不止一页。我放了一个`for`循环来为你解决这个问题。
2.  您可能应该使用修剪输出`htm.trim()`
3.  您可能应该确保在有 newLine ( `!htm.isEmpty()`)时不打印
4.  该网站有一个奇怪的字符，其中 ASCII 值为 160。我添加了一个解决问题的小修复程序。（与`.replace`）

这是固定代码：

```
for(char page='a'; page <= 'z'; page++) {
  String urlString = String.format("http://www.medindia.net/drug-price/index.asp?alpha=%c", page);
  URL url = new URL(urlString);
  Document doc1 = Jsoup.parse(url, 0);
  Elements rows = doc1.getElementsByAttributeValue("style", "padding-left:5px;border-right:1px solid #A5A5A5;");
  for(Element row : rows){
    String htm = row.text().replace((char) 160, ' ').trim();
    if(!(htm.equals("View Price")||htm.contains("Show Details"))&& !htm.isEmpty())
    {
      System.out.println(htm.trim());
      System.out.println();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:25:22.090

做一件事：

在 syso 中使用 trim 功能：`System.out.println(htm.trim());`

**更新 ：**

经过大量努力，我能够解析所有 80 种药物，如下所示：-

```
URL url = new URL("http://www.medindia.net/drug-price/index.asp?alpha=a");
Document doc1 = Jsoup.parse(url, 0);
Elements rows = doc1.select("td.ta13blue");
Elements rows1 = doc1.select("td.ta13black.tbold");
int cnt=0;
for(Element row : rows){
    cnt++;
    String htm = row.text().trim();
    if(!(htm.equals("View Price")||htm.contains("Show Details") || htm.startsWith("Drug"))) {
        System.out.println(cnt+" : "+htm);
        System.out.println();
    }
}
for(Element row1 : rows1){
    cnt++;
    String htm = row1.text().trim();
    if(!(htm.equals("View Price")||htm.contains("Show Details") || htm.startsWith("Drug"))) {
        System.out.println(cnt+" : "+htm);
        System.out.println();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:49:51.667

1）以*风格*取元素是相当危险的；

2) 调用 ROWS 而不是 FIELDS 列表更危险:)

3）打开页面，你可以看到额外的行仅在“黑色名称”之后添加，项目名称未包含在锚链接中。

那么你的问题是该行中的第二个字段不是`Show Details`也不是`View Price`甚至不是空的......它是：

```
<td bgcolor="#FFFFDB" align="center" 
    style="padding-left:5px;border-right:1px solid #A5A5A5;">
         &nbsp;
</td> 
```

它是一个空格字符串。像这样修改你的代码：

```
for(Element row : rows){
    String htm = row.text().trim(); // <!-- This one
    if(!
         (htm.equals("View Price") 
          || htm.contains("Show Details")
          || htm.equals("&nbsp;")) // <!-- And this one
       ) {
        System.out.println(htm);
        System.out.println();
    }
} 
```

# asp.net-mvc - 如何在 MVC3 的局部视图中呈现部分？

> ID：13764936
> 
> 赞同：25
> 
> 时间：2012-12-07T14:21:19.600
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-partialview, asp.net-mvc-views

在 MVC3 项目中，我有一个包含此代码的“_Layout.vbhtml”文件

```
<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    ...
    <script src="@Url.Content("~/Scripts/jquery-1.8.2.min.js")"></script>
    @RenderSection("Scripts", false)
  </body>
</html> 
```

然后，我在共享文件夹中有一个部分视图“ValidationScripts.vbhtml”

```
@Section Scripts
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.fix.js")"></script>  
    <script src="@Url.Content("~/Scripts/localization/messages_de.js")"></script>      
End Section 
```

如果我从这样的视图中调用部分视图......

```
@ModelType MvcExample.MyModel
@Code
    ViewData("Title") = "Test"
End Code

@Html.Partial("ValidationScripts")

<h2>Just a Test</h2>
... 
```

“脚本”部分未在页面上呈现，输出 HTML 为

```
<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    ...
    <script src="@Url.Content("~/Scripts/jquery-1.8.2.min.js")"></script>

  </body>
</html> 
```

如何在部分视图中渲染部分？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-07T14:59:22.147

我在重复脚本上遇到了同样的问题，所以我创建了几个扩展方法：

```
public static class HtmlHelperExtensions
{
  private const string _jSViewDataName = "RenderJavaScript";
  private const string _styleViewDataName = "RenderStyle";

  public static void AddJavaScript(this HtmlHelper htmlHelper, 
                                   string scriptURL)
  {
    List<string> scriptList = htmlHelper.ViewContext.HttpContext
      .Items[HtmlHelperExtensions._jSViewDataName] as List<string>;
    if (scriptList != null)
    {
      if (!scriptList.Contains(scriptURL))
      {
        scriptList.Add(scriptURL);
      }
    }
    else
    {
      scriptList = new List<string>();
      scriptList.Add(scriptURL);
      htmlHelper.ViewContext.HttpContext
        .Items.Add(HtmlHelperExtensions._jSViewDataName, scriptList);
    }
  }

  public static MvcHtmlString RenderJavaScripts(this HtmlHelper HtmlHelper)
  {
    StringBuilder result = new StringBuilder();

    List<string> scriptList = HtmlHelper.ViewContext.HttpContext
      .Items[HtmlHelperExtensions._jSViewDataName] as List<string>;
    if (scriptList != null)
    {
      foreach (string script in scriptList)
      {
        result.AppendLine(string.Format(
          "<script type=\"text/javascript\" src=\"{0}\"></script>", 
          script));
      }
    }

    return MvcHtmlString.Create(result.ToString());
  }

  public static void AddStyle(this HtmlHelper htmlHelper, string styleURL)
  {
    List<string> styleList = htmlHelper.ViewContext.HttpContext
      .Items[HtmlHelperExtensions._styleViewDataName] as List<string>;

   if (styleList != null)
   {
     if (!styleList.Contains(styleURL))
     {
       styleList.Add(styleURL);
     }
   }
   else
   {
     styleList = new List<string>();
     styleList.Add(styleURL);
     htmlHelper.ViewContext.HttpContext
       .Items.Add(HtmlHelperExtensions._styleViewDataName, styleList);
   }
 }

 public static MvcHtmlString RenderStyles(this HtmlHelper htmlHelper)
 {
   StringBuilder result = new StringBuilder();

   List<string> styleList = htmlHelper.ViewContext.HttpContext
     .Items[HtmlHelperExtensions._styleViewDataName] as List<string>;

   if (styleList != null)
   {
     foreach (string script in styleList)
     {
       result.AppendLine(string.Format(
         "<link href=\"{0}\" rel=\"stylesheet\" type=\"text/css\" />", 
         script));
     }
   }

  return MvcHtmlString.Create(result.ToString());
  }
} 
```

在任何视图或部分视图或显示/编辑模板上，您只需添加您需要的内容：

```
@{
  Html.AddJavaScript("http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js");
} 
```

在您的布局中，您可以将它呈现在您想要的位置：

```
<!DOCTYPE html>
<html lang="en">
  <head>
  @Html.RenderStyles()
  @Html.RenderJavascripts() 
```

如果变得复杂，您可能遇到的唯一问题是脚本的呈现顺序。如果这成为问题，只需将脚本添加到视图/模板的底部，并在渲染它们之前简单地反转扩展方法中的顺序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T14:57:36.537

您不能在局部视图中使用部分。您可以使用[此处](https://stackoverflow.com/questions/5981490/how-to-render-javascript-into-masterlayout-section-from-partial-view)提到的自定义助手。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T14:25:31.730

我认为您应该为此[http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx使用助手](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)

如果您可以升级到 MVC4，您可以使用新的捆绑和缩小功能：[http](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification) ://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification 。它专门用于解决您想要实现的目标（包括脚本）。

或者，您可以将[http://combres.codeplex.com/](http://combres.codeplex.com/)与 MVC3 一起使用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T14:35:12.193

如果我理解正确你有一个结构

*   布局.cshtml
*   查看 - X
    *   PartialView Y（在 View-X 内部调用）

那么你需要定义

`@section Script{ .... }`在**View-X** 而**不是 PartialView Y**中，因为**View-X**已`View.Layout`设置为`Layout.cshtml`

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-04-03T17:39:58.740

所有这些都是很好的信息，但是如果您查看他的原始代码，Section 是大写的，因此无法识别。

应该是`@section`blahblah 不是`@Section`

# c# - Java比较器覆盖c#中的等效项

> ID：13764938
> 
> 赞同：1
> 
> 时间：2012-12-07T14:21:31.760
> 
> 标签：c#, java, comparator, icomparable

我想将以下类从 java 转换为 C#：

```
public class ValueComparator implements Comparator{

    @Override
    public int compare(Object ob1, Object ob2){
        int retval = 0;
        if ( ob1 instanceof DataCol && ob2 instanceof DataCol ){
            DataCol c1 = (DataCol) ob1;
            DataCol c2 = (DataCol) ob2;
            if( c1.value < c2.value ) retval = 1;
            if( c1.value > c2.value ) retval = -1;
        } else {
            throw new ClassCastException("ValueComparator: Illegal arguments!");
        }
        return(retval);
    }    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T14:30:25.307

You can implement `IComparer<T>` by inheriting from `Comparer<T>`.

```
class DataColComparer:Comparer<DataCol>
{
    public override int Compare(DataCol x, DataCol y)
    {
       if(ReferenceEquals(x,y))
         return 0;
       if(x==null)
         return -1;
       if(y==null)
         return +1;
       return Comparer<TValue>.Default.Compare(y.Value, x.Value);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T15:25:26.610

为什么不直接实现非泛型 IComparer 接口？也就是说，非泛型 Java 接口转换为非泛型 C# 接口：

```
public class ValueComparator : System.Collections.IComparer
{
    public int Compare(object ob1, object ob2)
    {
        int retval = 0;
        if (ob1 is DataCol && ob2 is DataCol)
        {
            DataCol c1 = (DataCol) ob1;
            DataCol c2 = (DataCol) ob2;
            if (c1.value < c2.value) retval = 1;
            if (c1.value > c2.value) retval = -1;
        }
        else
        {
            throw new ClassCastException("ValueComparator: Illegal arguments!");
        }
        return (retval);
    }
} 
```

# java - 在 JApplet 上分层对象（扩展 JComponet）

> ID：13764942
> 
> 赞同：1
> 
> 时间：2012-12-07T14:21:38.767
> 
> 标签：java, swing, layout, japplet, jcomponent

我目前有一个 JApplet，我在其中添加了两个都扩展 JComponet 的对象。对象 A 基本上是一个大正方形，对象 B 是一个小正方形，我需要对象 B 始终位于对象 A 的前面，但是我不知道如何在 JApplet 中设置分层来做到这一点。当前我正在使用下面的代码，它添加了这两个项目并以我想要的方式显示它们，但是有时对象 A 在对象 B 的前面。

```
public void init() {
    add(myapplet, BorderLayout.CENTER);
    resize(200, 400);
    B = new Block(Color.green, 10, 10);
    myapplet.add(B);
    A = new Block(Color.red, 100, 100);
    myapplet.add(A);
    myapplet.addMouseListener(this);
    startTimer();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:47:16.720

你可能会看[`JLayeredPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)，看到[这里](https://stackoverflow.com/a/9629892/230513)，或者`OverlayLayout`，看到[这里](https://stackoverflow.com/a/13437388/230513)。两者都应该在小程序中工作，但这种[混合](https://stackoverflow.com/a/12449949/230513)方法可能会提供额外的灵活性。

![JLayeredPane](../Images/c90b1291a9454fd022b2efffc9f8c5c2.png)

![叠加布局](../Images/e9e7ba447ad9f5f638ef2bd54c14fb2a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:45:48.913

你可能想看看这个方法：[Container.setComponentZOrder(Component comp, int index)](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#setComponentZOrder%28java.awt.Component,%20int%29)

# php - 在 HTML 标记上的 PHP 中创建/注册短代码

> ID：13764947
> 
> 赞同：0
> 
> 时间：2012-12-07T14:21:53.997
> 
> 标签：php, jquery, shortcode

我想创建一个简码来设置页面上现有内容的样式。

```
function myShortcode(){    
    $mycontent = '<div class = "columnstyle">'; 
    $mycontent .= ...existing content wrapped in a <p> tag... 
    $mycontent .= '</div>';
    return $mycontent;
}
add_shortcode('columnstyle', 'myShortcode'); 
```

现有的“p”标签：

```
<p class='first'>blah blah blah</p> 
```

如何将 $('.first') 分配给 $mycontent？我认为这行不通...

```
$mycontent .= $('.first'); 
```

**更新：**

我知道 $('.first') 是一个 javascript 变量，因为我不知道如何在 PHP 中引用它。我要执行的下一个功能是：

```
function myShortcode_call(){    
    ?>        
        <script type="text/javascript">                
            jQuery(document).ready(function($){                     
                $('.first').before("<?php echo do_shortcode('[columnstyle]'.myShortcode().'[/columnstyle]');?>");

            });
        </script>
    <?php
}
add_action('thesis_hook_after_html','myShortcode_call'); 
```

结果是使用短代码 [columnstyle] 为页面上的内容“blah blah blah”设置样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:23:11.500

你可以这样做

```
$mycontent .= '$(".first")'; 
```

当你在下面使用

```
$mycontent = $('.first'); 
```

你会在下面得到错误

```
 Parse error: syntax error, unexpected '(', expecting T_VARIABLE or '$' on line bla 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:25:30.297

我想这就是你想要的。你在用wordpress工作吗？

[http://codex.wordpress.org/Function_Reference/do_shortcode](http://codex.wordpress.org/Function_Reference/do_shortcode)

```
function myShortcode($shortcode){    
    $mycontent = '<div class = "columnstyle">'; 
    $mycontent .= $shortcode;
    $mycontent .= '</div>';
    return $mycontent;
}
add_shortcode('columnstyle', 'myShortcode');

function myShortcode_call(){    
    ?>        
        <script type="text/javascript">                
            jQuery(document).ready(function($){                     
                $('.first').before("<?php echo do_shortcode('[columnstyle]'.myShortcode().'[/columnstyle]');?>");

            });
        </script>
    <?php
}
add_action('thesis_hook_after_html','myShortcode_call'); 
```

# windows-mobile - windows mobile 6.0有什么好的内存分析工具吗？

> ID：13764950
> 
> 赞同：0
> 
> 时间：2012-12-07T14:22:19.140
> 
> 标签：windows-mobile, memory-profiling

我用谷歌搜索了一下，但找不到任何符合标准的解决方案。然后想到在 StackOverflow 上有一个专门的问题。任何人都有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T08:03:22.493

答案取决于您到底在寻找什么。

如果必须对 dotnet 应用程序进行分析，您可以使用 Compact Framework Perfmon。

如果必须分析 ac/c++ 应用程序，您可以查看 Entrek 解决方案。

如果您只需要内存使用的概述，请参阅例如[http://www.codeproject.com/Articles/32297/Visualizing-the-Windows-Mobile-Virtual-Memory-Mons](http://www.codeproject.com/Articles/32297/Visualizing-the-Windows-Mobile-Virtual-Memory-Mons)

另见[http://community.intermec.com/t5/General-Development-Developer/Slaying-the-virtual-memory-monster/td-p/16764](http://community.intermec.com/t5/General-Development-Developer/Slaying-the-virtual-memory-monster/td-p/16764)

如果您可以访问 DevHealth（一种 Windows 移动 OEM 工具），您可以将其用作非常详细的内存分析工具。

# reporting-services - SSRS 报告每组的行分组和平均值

> ID：13764963
> 
> 赞同：0
> 
> 时间：2012-12-07T14:23:20.187
> 
> 标签：reporting-services, sql-server-2008-r2

我有一个在表格中包含行分组的报告。现在我想为每个组添加一个平均值。例如，有一张表格，其中包含员工访问办公室的数据：

 ``Name | In | Out

John | 2012-10-30 04:49:35.000 | 2012-10-30 05:49:35.000
Mark | 2012-10-30 04:69:35.000 | 2012-10-30 04:79:35.000
John | 2012-12-15 04:49:35.000 | 2012-10-30 04:49:35.000`  `我在我的姓名报告中进行了分组，并获得了每位员工的访问量：

`Name | Visits
John | 2
Mark | 1`

现在需要添加一个列，其中包含每个员工在办公室花费的平均时间。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:32:52.837

我建议在您的查询中添加一个花费时间列。然后你可以使用 SSRS 中的 AVG 函数来获得你需要的东西。您可能只是在 SSRS 中进行平均输入输出，但我总是尝试在 SSRS 中做最少的工作以提高性能。``

# c# - 优化无穷无尽的块列表？

> ID：13764968
> 
> 赞同：1
> 
> 时间：2012-12-07T14:23:36.907
> 
> 标签：c#, windows-phone-7, xna

我正在用很多块创建一个游戏。它们是 48x48 像素，几乎是无穷无尽的，尽管我会设置一些限制。

但是我该如何优化它，我是否应该有一个主列表并为每个更新决定根据游戏相机更新和绘制哪一个？更新和绘制不可见的块没有意义吗？

```
public override Update(GameTime gameTime)
{
  blocks = new List<Block>();

  foreach(Block b in masterblocklist)
    if( screenRect.Contains(b.Rect) )
      blocks.Add(b);

  foreach(Block b in blocks)
    b.Update(gameTime);
} 
```

那么我应该维护视图中的块的块列表，还是应该在 Update 和 Draw 方法中检查块是否在屏幕矩形中，如果更新并绘制它？还是根本不重要？（最后一个解决方案需要通过列表两次）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:45:25.397

编程方面，我建议**并行查询**：

```
public override Update(GameTime gameTime)
{
  var parallelQuery = from b in masterblocklist.AsParallel()
                            where screenRect.Contains(b.Rect) 
                            select b;

 // Process result sequence in parallel
 parallelQuery.ForAll(p => p.Update(gameTime));
} 
```

# ember.js - EmberJS 内容绑定不起作用

> ID：13764977
> 
> 赞同：0
> 
> 时间：2012-12-07T14:24:07.830
> 
> 标签：ember.js, handlebars.js

我有以下代码：

JS：

```
MapSearch.FiltersList = Ember.Object.extend({
        content: [
        Ember.Object.create({textValue: "Gender", actualValue: "gender"}),
        Ember.Object.create({textValue: "Marital Status", actualValue: "msc105"}),
        Ember.Object.create({textValue: "Council Tax Band", actualValue: "thc140"}),
        Ember.Object.create({textValue: "Length Of Residency", actualValue: "mhc117"}),
        Ember.Object.create({textValue: "Household Composition", actualValue: "mhc110"}),
        Ember.Object.create({textValue: "Income Value Banded - Profiling", actualValue: "mgc131"}),
        Ember.Object.create({textValue: "Property Value Banded - Profiling", actualValue: "mgc111"}),
        Ember.Object.create({textValue: "Property Value Banded - 10% UK", actualValue: "mgc112"}),
        Ember.Object.create({textValue: "Landscape Lifestyle", actualValue: "mgc120"}),
        Ember.Object.create({textValue: "UK Lifestyle Group", actualValue: "bgc422"}),
        Ember.Object.create({textValue: "UK Wealth Group", actualValue: "bgc422"})
        ]

});
MapSearch.FilterSelect = Ember.Select.extend({
    attributeBindings: ['name', 'id'],
    contentBinding: 'MapSearch.FiltersList.content'
}); 
```

车把：

```
 {{view MapSearch.FilterSelect name="filter_type" id="filter_type" class="filter_type"  optionValuePath="actualValue"   optionLabelPath="textValue"}} 
```

但是我得到一个空白选择。我知道我做错了什么，但不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:25:52.120

尝试制作您`FiltersList`的 an`ArrayController`并创建实例，而不是使用`extend`.

```
MapSearch.FiltersList = Em.ArrayController.create({

    content: [
    ....
    ]

}) 
```

请注意，您可以通过创建绑定来使事情变得更高效

`contentBinding: Em.Binding.oneWay('MapSearch.FiltersList.content')`

如果您的选择输入无法更改内容值。

# sugarcrm - 找不到任何以糖为主题的网站

> ID：13764984
> 
> 赞同：1
> 
> 时间：2012-12-07T14:24:35.640
> 
> 标签：sugarcrm

奇怪的是，我到处都找过了，但我找不到一个以 Sugarcrm 社区版为主题的网站。根本不像新版本。如果您知道任何网站，请告诉我。非常感谢你提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:42:17.427

您可以在 SugarOutfitters 上找到主题：[https ://www.sugaroutfitters.com/addons/google-style-sugartheme](https://www.sugaroutfitters.com/addons/google-style-sugartheme)

主题可能很难找到，因为它们很难制作。这个成功了，并增加了一些额外的生产力功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T08:31:55.270

这里还有一对：[http ://www.sugarforge.org/softwaremap/trove_list.php?form_cat=335](http://www.sugarforge.org/softwaremap/trove_list.php?form_cat=335)

# java - 安卓谷歌云消息

> ID：13764990
> 
> 赞同：1
> 
> 时间：2012-12-07T14:24:56.947
> 
> 标签：java, android

我正在尝试在我的项目中[使用 Google Cloud Messaging (GCM)、PHP 和 MySQL 实现本教程 Android 推送通知](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)。

我对其进行了修改，以便设备在应用程序启动时自行注册。我还让它使用一个对话框来显示消息何时到达，但是有一个问题。当我第一次运行该应用程序时，它会尝试注册，但由于我的对话框代码它崩溃了。如果我再次打开它（已经注册）它工作得很好，当我收到消息时，它们会显示在一个对话框中。这是我的修改代码，如果我将其更改为原始作品：

```
private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(final Context context, Intent intent) {
            final SpannableString newMessage = new SpannableString(intent.getExtras().getString(EXTRA_MESSAGE));
            // Waking up mobile if it is sleeping
            WakeLocker.acquire(getApplicationContext());

            /**
             * Take appropriate action on this message
             * depending upon your app requirement
             * For now i am just displaying it on the screen
             * */

                        final Dialog dialog = new Dialog(context);
                        dialog.setContentView(R.layout.custom);
                        dialog.setTitle("Info");
                        TextView text = (TextView) dialog.findViewById(R.id.text);
                        text.setAutoLinkMask(RESULT_OK);
                        text.setMovementMethod(LinkMovementMethod.getInstance());
                        Linkify.addLinks(newMessage, Linkify.ALL);
                        text.append(newMessage);    
                        //ImageView image = (ImageView) dialog.findViewById(R.id.image);
                        //image.setImageResource(R.drawable.ic_launcher);

                        Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
                        // if button is clicked, close the custom dialog
                        dialogButton.setOnClickListener(new OnClickListener() {
                            public void onClick(View v) {
                                dialog.dismiss();
                            }
                        });      
                        dialog.show();

            // Showing received message
                    //lblMessage.setText(cucu);
            //lblMessage.setVisibility(View.VISIBLE);
            //btnClear.setVisibility(View.VISIBLE);
            //lblMessage.append(newMessage + "\n");         
            //Toast.makeText(getApplicationContext(), "New Message: " + newMessage, Toast.LENGTH_LONG).show();

            // Releasing wake lock
            WakeLocker.release();
        }
    }; 
```

这是原始代码：

```
private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
            // Waking up mobile if it is sleeping
            WakeLocker.acquire(getApplicationContext());

            /**
             * Take appropriate action on this message
             * depending upon your app requirement
             * For now i am just displaying it on the screen
             * */

            // Showing received message
            lblMessage.append(newMessage + "\n");           
            Toast.makeText(getApplicationContext(), "New Message: " + newMessage, Toast.LENGTH_LONG).show();

            // Releasing wake lock
            WakeLocker.release();
        }
    }; 
```

这就是 logcat 所说的：

```
12-07 16:32:55.637: E/AndroidRuntime(27119): FATAL EXCEPTION: main
12-07 16:32:55.637: E/AndroidRuntime(27119): java.lang.RuntimeException: Error receiving broadcast Intent { act=com.androidhive.pushnotifications.DISPLAY_MESSAGE (has extras) } in com.music.aacplay.AACPlayerActivity$1@4052b068
12-07 16:32:55.637: E/AndroidRuntime(27119):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
12-07 16:32:55.637: E/AndroidRuntime(27119):    at android.os.Handler.handleCallback(Handler.java:587)
12-07 16:32:55.637: E/AndroidRuntime(27119):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-07 16:32:55.637: E/AndroidRuntime(27119):    at android.os.Looper.loop(Looper.java:130)
12-07 16:32:55.637: E/AndroidRuntime(27119):    at android.app.ActivityThread.main(ActivityThread.java:3687)
12-07 16:32:55.637: E/AndroidRuntime(27119):    at java.lang.reflect.Method.invokeNative(Native Method)
12-07 16:32:55.637: E/AndroidRuntime(27119):    at java.lang.reflect.Method.invoke(Method.java:507)
12-07 16:32:55.637: E/AndroidRuntime(27119):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
12-07 16:32:55.637: E/AndroidRuntime(27119):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-07 16:32:55.637: E/AndroidRuntime(27119):    at dalvik.system.NativeStart.main(Native Method)
12-07 16:32:55.637: E/AndroidRuntime(27119): Caused by: java.lang.NullPointerException
12-07 16:32:55.637: E/AndroidRuntime(27119):    at android.text.SpannableString.<init>(SpannableString.java:30)
12-07 16:32:55.637: E/AndroidRuntime(27119):    at com.music.aacplay.AACPlayerActivity$1.onReceive(AACPlayerActivity.java:359)
12-07 16:32:55.637: E/AndroidRuntime(27119):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
12-07 16:32:55.637: E/AndroidRuntime(27119):    ... 9 more 
```

所以问题是：我做错了什么导致我的应用程序在第一次运行并尝试注册时崩溃？

# c# - 与 SQL Server 建立连接时发生与网络相关或特定于实例的错误

> ID：13764991
> 
> 赞同：1
> 
> 时间：2012-12-07T14:24:55.880
> 
> 标签：c#, asp.net, .net, asp.net-4.0

当我想与数据库交互时，我得到了这个代码。

我的 web.config 包含一个连接字符串，即：

```
<?xml version="1.0"?>
<configuration>
 <connectionStrings>
<add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/>
<add name="WebNewYearConnectionString" connectionString="Data Source=XXXX; Initial Catalog=XXXXX; User ID=XXXXX; Password=XXXXXX;"     providerName="System.Data.SqlClient"/>
</connectionStrings>
<system.web>
<compilation debug="true" targetFramework="4.0"/>
<customErrors mode="Off"/>
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login.aspx" timeout="2880"/>
</authentication>
<membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
  </providers>
</membership>
<profile>
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
  </providers>
</profile>
<roleManager enabled="false">
  <providers>
    <clear/>
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/"/>
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/"/>
  </providers>
</roleManager>
</system.web>
 <system.webServer>
   <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>
<system.data>
<DbProviderFactories>
    <remove invariant="System.Data.SqlServerCe.4.0"/>
    <add name="Microsoft SQL Server Compact Edition Client Data Provider 4.0" invariant="System.Data.SqlServerCe.4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact Edition Client 4.0" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
</DbProviderFactories>
</system.data> 
```

我的代码包含

```
xSqlConnections con = new SqlConnections("System.Configuration.ConfigurationManager.ConnectionStrings["WebNewYearConnectionString"].ConnectionString");
    protected void Page_Load(object sender, EventArgs e)
    {
        string Clientname = Request.QueryString["name"];
        string str = "select * from Client_Detail where Client_Name='" + Clientname + "'";
        DataTable dat;
        SqlDataAdapter da = new SqlDataAdapter(sql, con);
        DataSet ds = new DataSet();
        da.Fill(ds, "tab");
        DataTable dat = new DataTable();
        dat = ds.Tables["tab"];
        EventName.Text = dat.Rows[0]["Event_Name"].ToString();
        Event_Description.Text = dat.Rows[0]["Description"].ToString();
        Event_Date.Text = dat.Rows[0]["Date"].ToString();
        Entry_Fee.Text = dat.Rows[0]["Price"].ToString();
        Event_Client.Text = dat.Rows[0]["Client_Name"].ToString();
        Event_Location.Text = dat.Rows[0]["Event_Location"].ToString();
        Session["Event_Name"] = EventName.Text;

    } 
```

我的代码给出了这个错误

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

在

***da.Fill(ds, "tab");***

这条线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:36:14.833

你的代码中是否真的有整个事情的引号？如果是这样，那是你的问题。

```
xSqlConnections con = new SqlConnections("System.Configuration.ConfigurationManager.ConnectionStrings["WebNewYearConnectionString"].ConnectionString");
                                         ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:54:31.207

像这样更改您的连接实例：

```
xSqlConnections con = new SqlConnections(System.Configuration.ConfigurationManager.ConnectionStrings["WebNewYearConnectionString"].ConnectionString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:31:39.693

```
xSqlConnections con = new SqlConnections("System.Configuration.ConfigurationManager.ConnectionStrings["WebNewYearConnectionString"].ConnectionString");
        protected void Page_Load(object sender, EventArgs e)
        {
            con.open();

            string Clientname = Request.QueryString["name"];
            string str = "select * from Client_Detail where Client_Name='" + Clientname + "'";
            DataTable dat;
            SqlDataAdapter da = new SqlDataAdapter(sql, con);
            DataSet ds = new DataSet();
            da.Fill(ds, "tab");
            DataTable dat = new DataTable();
            dat = ds.Tables["tab"];
            EventName.Text = dat.Rows[0]["Event_Name"].ToString();
            Event_Description.Text = dat.Rows[0]["Description"].ToString();
            Event_Date.Text = dat.Rows[0]["Date"].ToString();
            Entry_Fee.Text = dat.Rows[0]["Price"].ToString();
            Event_Client.Text = dat.Rows[0]["Client_Name"].ToString();
            Event_Location.Text = dat.Rows[0]["Event_Location"].ToString();
            Session["Event_Name"] = EventName.Text;

            con.Close();
        } 
```

*** 编辑 ***

如果这已经解决了问题，您需要仔细检查您的连接字符串，因为它没有正确解析。

一个简单的方法是转到 VS Studio 中的服务器资源管理器并手动添加到数据库的连接。测试连接以查看它是否解决。如果是这样，您可以从数据连接的属性选项卡中复制连接字符串。

希望这可以帮助。

# svn - 检查包含括号的路径时遇到问题

> ID：13764995
> 
> 赞同：2
> 
> 时间：2012-12-07T14:25:03.760
> 
> 标签：svn

如果我从 svn 存储库中检查一个目录，并且存储库内的路径包含括号，当我尝试重新检查工作目录时，我会收到一条 svn 'Commit failed' 消息。

我知道在路径名中使用括号不是一个好习惯；我只是想收拾别人的烂摊子。

这是检查此类存储库的示例：

```
$ svn co http://cvs.xyzzy.com/svn/ie/Userhome/bchittenden/Test%20%28With%20Stupid%20Parentheses%29/
A    Test (With Stupid Parentheses)/foo
A    Test (With Stupid Parentheses)/bar
A    Test (With Stupid Parentheses)/baz
Checked out revision 61793. 
```

当我尝试提交时，我收到以下消息：

```
$ svn ci
Adding         branches
Adding         tags
Adding         trunk
svn: Commit failed (details follow):
svn: A MERGE response for '/svn/ie/Userhome/bchittenden/Test%20(With%20Stupid%20Parentheses)/tags' is not a child of the destination ('/svn/ie/Userhome/bchittenden/Test%20%28With%20Stupid%20Parentheses%29')
svn: Your commit message was left in a temporary file:
svn:    '/tmp/Test (With Stupid Parentheses)/svn-commit.tmp' 
```

请注意，更改*确实*会签入存储库，我可以签出存储库的新版本并在那里工作，但是当我尝试签入时会收到相同的消息。

如果我对此的解释正确，那么当 SVN 服务器尝试验证正在提交的文件的名称时，它没有正确地 URL 编码路径名中的 '(' 和 ')' 字符。我在错误消息上尝试了几次 Google 搜索`is not a child of the destination`，但找不到解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:44:56.140

当我`svn info | grep URL`检查它时在工作目录上运行时，我得到

```
$ svn info | grep URL
URL: http://cvs.xyzzy.com/svn/ie/Userhome/bchittenden/Test%20%28With%20Stupid%20Parentheses%29 
```

这匹配SVN MERGE 响应的第二部分，即客户端。事实证明，我可以使用`svn switch`更改 URL 来解决冲突：

```
$ svn switch 'http://cvs.xyzzy.com/svn/ie/Userhome/bchittenden/Test%20(With%20Stupid%20Parentheses)'
E    trunk
E    branches
E    tags
Updated to revision 61900. 
```

现在 URL 匹配 SVN MERGE 响应的第一部分（即服务器端），并且没有冲突。

```
$ svn info | grep URL
URL: http://cvs.xyzzy.com/svn/ie/Userhome/bchittenden/Test%20(With%20Stupid%20Parentheses) 
```

在此之后，如果我更改文件“bar”并将其签入，则更改将正确提交：

```
$ svn ci -m 'changed bar'
Sending        bar
Transmitting file data .
Committed revision 61901. 
```

# javascript - 为什么指令中的 element.addClass 不能正常工作？

> ID：13764998
> 
> 赞同：0
> 
> 时间：2012-12-07T14:25:19.630
> 
> 标签：javascript, jquery, angularjs

元素

```
<button ud-listener="item.status">{{item.value}}</button> 
```

我有以下指令

```
myApp.directive('myDirective', function()
{
    return {
        restrict: 'A',
        link: function(scope, element, attrs)
        {
            scope.$watch(attrs.myDirective, function(val)
            {
                if(!isUndefined(val))
                {
                    element.addClass(val);
                    setTimeout(function(){
                        element.removeClass(val);
                    }, 2000);
                }
            });
        }
    }
}); 
```

我想做的是：

我正在使用 socket-io 接收 json 格式的数据，并且我正在观看包含该值的 myDirective，这是 add/-removeClass 所必需的。

一开始它就像一个魅力，指令将类添加到元素并在 2 秒后将其删除。没有任何问题。但是几分钟后，它并没有将类添加到所有元素中，而只是添加到其中的少数元素中。

还有另一种方法吗？我只想在 2 秒后向元素添加类并删除类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T16:36:29.993

我注意到了几件事：

### 1.您正在使用`setTimeout`而不是`$timeout`.

当你这样做时，你是在 Angular 上下文之外执行你的代码，所以它不知道进行脏检查。尝试更换

```
setTimeout(function(){
   element.removeClass(val);
 }, 2000); 
```

和

```
$timeout(function(){
     element.removeClass(val);
}, 2000); 
```

您还需要`$timeout`作为参数包含在指令工厂方法中。

### 2.你使用`scope.$watch`而不是`attrs.$observe`

我不确定这里的后果，但这就是我以前一直看到的方式。

尝试：

```
attrs.$observe('myDirective', function(val){
 ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:29:45.573

Most likely it's because either:

You're not referencing JQuery ... or...

Your JQuery reference doesn't come *before* your angular reference

```
 <script src="/scripts/jquery.js" type="text/javascript"></script>
   <script src="/scripts/angular.js" type="text/javascript"></script> 
```

If Angular sees JQuery while it's loading, `element` will be a full JQuery object, otherwise it's jqLite.