# StackOverflow 问答 14579000-14579999

# facebook - 当应用程序当前在生产中使用时，向 facebook 提交开放图形操作的最佳方式是什么？

> ID：14579000
> 
> 赞同：0
> 
> 时间：2013-01-29T08:57:15.713
> 
> 标签：facebook, facebook-opengraph, production-environment

我目前有一个已经部署在生产环境中的 Facebook 应用程序。因为，Facebook 将很快删除“发布到朋友的墙”功能。因此，我必须向 Facebook 提交 Open Graph 操作以使用提及标记。

在提交期间，我必须部署新网站并等待 Facebook 对其进行审核。

问题是：

1.  在我等待 Facebook 批准该操作期间，我网站中的其他用户将不被允许使用提及标记。

2.  由于 Facebook App 的站点 URL 只能是一个（现在指向生产）。所以我无法将测试阶段部署到另一个 URL 并将站点 URL 指向它。

我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:49:17.163

将应用程序域设置为“yourapp.com”。

现在在 www.yourapp.com 或其他任何地方拥有常规的实时应用程序，并将待批准的新版本放在 beta.yourapp.com 上。提交操作时，指向 beta.yourapp.com-URL - 平台团队将跟随您的链接。

底线：设置 App-Domain 允许您在域通配符 *.yourapp.com 上运行应用程序。

# vhdl - FPGA的缺点？

> ID：14579001
> 
> 赞同：5
> 
> 时间：2013-01-29T08:57:21.357
> 
> 标签：vhdl, verilog, scons, fpga, modelsim

是否有人在相当大的 FPGA 项目中使用“ [Scons](http://www.scons.org/) ”替代“ [make ”？](http://www.gnu.org/software/make/)它是开箱即用的，还是对 VHDL 或 Verilog 语言还有一些黑客行为要做？与 Modelsim/ISE/Vivado/Quartus 的集成又如何呢？还是我应该坚持使用makefile一段时间？

# php - Safari 浏览器中与片段标识符相关的 URL 问题 (#)

> ID：14579008
> 
> 赞同：0
> 
> 时间：2013-01-29T08:57:44.547
> 
> 标签：php, wordpress, safari

我正在使用 Vanilla 论坛插件在 Wordpress 网站上工作。检查萤火虫后，我在下面找到了 HTML 代码：

```
 <ul>
  <li><a href="http://knowmoretv.com/discussions-4#/discussion/73/diets-that-work">Diets That Work</a></li>
  <li><a href="http://knowmoretv.com/discussions-4#/discussion/72/heart-disease-support">Heart Disease Support</a></li>
  </ul> 
```

我只有 Safari 浏览器有问题；当我单击前两个链接中的任何一个时，它会转到`http://knowmoretv.com/discussions-4/`但如果使用任何其他浏览器它会转到`http://knowmoretv.com/discussions-4/#/discussion/73/diets-that-work`（或心脏病支持，正如我所期望的那样）。

我应该在 Safari 浏览器中使用 jQuery 代码重定向 # 到 /# 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:57:27.087

我已经通过 jQuery 为 Safari 浏览器解决了这个问题

```
<script type="text/javascript">
  $(document).ready(function(){

 $.browser.safari = $.browser.webkit && !window.chrome;
 if ($.browser.safari) {

    $("a").click(function(event){

       event.preventDefault();

       var urlval = $(this).attr('href').split('#');

       var urlvals = urlval[0]+'/#'+urlval[1];

       var pathname = window.location.pathname;

       if(pathname == '/discussions-4/')
       {

         window.location.assign(urlvals);

         window.location.reload(true);

       }
       else{

         window.location.assign(urlvals);

       }

       });
   }

  });
  </script> 
```

# php - Jquery Ajax 脚本不工作

> ID：14579014
> 
> 赞同：0
> 
> 时间：2013-01-29T08:58:04.877
> 
> 标签：php, jquery, ajax

我对 ajax/php 脚本有疑问。

它用于检查用户注册的用户名可用性。

javascript

```
$(document).ready(function()
{
    $("#username").change(function()
    {
        var usr = $("#username").val();
        if(usr.length >= 4)
        {
            $("#status").html('<img src="./style/images/loading.gif">&nbsp;Checking availability...');

            $.ajax(
            {
                type: "POST",
                url: "./ps/ajax_validation.php",
                data: "username="+ usr,
                success: function(msg)
                {
                    $("#status").ajaxComplete(function(event, request, settings)
                    {
                        if(msg == 'OK')
                        {
                            $(this).html('&nbsp;<img src="./style/images/tick.gif" align="absmiddle">');
                        }
                        else
                        {
                            $(this).html(msg);
                        }
                    });
                }
            }); 

        }
        else
        {
            $("#status").html('<font color="red">The username should have at least <strong>4</strong> characters.</font>');
        }
    });
}); 
```

html

```
...
<input class="login_reg_field" id="username" name="username" type="text" value="<?php echo @$d['username']?>" />
<div id="status"></div>
... 
```

ajax_validation.php

```
<?php
include("../core/config.php");
if(isset($_POST['username'])){
    $username = $_POST['username'];
    $test = $user->checkUsernameAvaible($username); //Return True if Username IS Avaible
    if(!$test){
        echo '<font color="red">The nickname <STRONG>'.$username.'</STRONG> is already in use.</font>';
    }else{
        echo "OK";
    }
}
?> 
```

php 脚本正在运行，我使用 $_GET 变量手动尝试了它。

在表单上尝试时，它保持不变，`Checking avaibility...`并且 Firefox 控制台上没有 Javascript 错误。我还检查了 Tamper Data，它正在发出 ajax 请求，而且确实如此。

问题似乎存在，`$("#status").ajaxComplete(function(event, request, settings){`因为我在此行之后尝试了警报，但没有弹出警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:01:11.030

**更新..**

ajax 调用成功时调用success。所以没有必要在那里调用ajaxComplete ..（如果你认为有问题）..

> 成功 请求成功时调用的函数。该函数获得三个参数： 从服务器返回的数据，根据 dataType 参数格式化；描述状态的字符串；和 jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象。从 jQuery 1.5 开始，success 设置可以接受一个函数数组。每个函数都会被依次调用。这是一个 Ajax 事件。

你可以检查响应数据并做你的事情..

```
 success: function(msg){
           if(msg == 'OK')
           {
              $(this).html('&nbsp;<img src="./style/images/tick.gif" align="absmiddle">');
           }
           else
           {
              $(this).html(msg);
           }

         } 
```

我认为问题就在这里

```
$("#username").change(function()
{ 
```

`change()`仅当您单击`input text`输入字段外的某个位置时才会触发。//尝试一次。

你需要的是`keyup()`

```
$("#username").keyup(function()
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:40:06.590

好的回答我自己的问题，我已经解决了。

要感谢[itachi](https://stackoverflow.com/users/1164513/itachi)让我知道使用`.done`而不是`success:`

问题就在那里。

这是脚本的修改和工作部分：

```
 var req = $.ajax(
    {
        type: "POST",
        url: "./ps/ajax_validation.php",
        data: "username="+ usr,
    }).done(function(msg)
    {
        if(msg == 'OK')
        {
            $("#status").html('&nbsp;<img src="./style/images/tick.gif" align="absmiddle">');
        }
            else
        {
            $("#status").html(msg);
        }

    }); 
```

# mobile - 在移动网络应用程序中：是否可以使用“获取路线”链接来引导使用 waze 导航？

> ID：14579033
> 
> 赞同：0
> 
> 时间：2013-01-29T08:58:42.023
> 
> 标签：mobile, gps, maps, mobile-website

如果我想在网站中包含“获取路线”链接 - 是否可以使用 waze 来获取链接说明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:05:18.447

是的，您可以使用 waze.to URL api。

以下格式适用于 Android 和 iOS：

[http://waze.to/?ll=latitude,longitude&navigate=yes](http://waze.to/?ll=latitude,longitude&navigate=yes)

示例： [http ://waze.to/?ll=48.149491,17.108636&navigate=yes](http://waze.to/?ll=48.149491,17.108636&navigate=yes)

更多信息 ：

*   [http://world.waze.com/dev/documentation/](http://world.waze.com/dev/documentation/)
*   [http://www.waze.com/forum/viewtopic.php?f=12&t=17684](http://www.waze.com/forum/viewtopic.php?f=12&t=17684)

# java - 定时器和报警管理器的区别

> ID：14579034
> 
> 赞同：20
> 
> 时间：2013-01-29T08:58:44.853
> 
> 标签：java, android

我对Android有点困惑`Timer`和`AlarmManager`使用。

*它们之间的主要区别是*什么？

他们都在安排一个任务在每 A 秒运行一次。首选使用它们的主要场景是什么？

例如，对于 X 情况，使用，`Timer`但另一方面，对于 Y 情况，使用`AlarmManager`。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-29T09:21:10.793

A`Timer`将启动一个线程，该线程将跟踪何时启动您的代码。如果设备进入睡眠状态，计时器线程也会进入睡眠状态，您的代码也不会按时执行。`AlarmManager`另一方面， 的警报是内核级别的。根据您注册它们的方式，您可以请求唤醒设备，或在下次唤醒设备时执行。警报通常是可取的，并且使用较少的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:06:14.960

计时器启动一个服务，它非常频繁地执行代码，即使它实际上并没有做任何事情。

另一方面，Alarmmanager 将启动一个始终在后台运行的服务，这是您想要用来安排您的代码在您的应用程序未打开时运行的内容。

# windows-phone-7 - 无法在应用程序中使用 TimeSpanDisplay

> ID：14579035
> 
> 赞同：1
> 
> 时间：2013-01-29T08:58:56.827
> 
> 标签：windows-phone-7

我是 Windows phone 7 开发人员的新手。我尝试本教程来创建秒表应用程序。[http://windowsphone7developerguide.blograby.com/stopwatch/](http://windowsphone7developerguide.blograby.com/stopwatch/)

但是，输入此行时出现此错误

```
<local:TimeSpanDisplay x:Name=”TotalTimeDisplay” Grid.Row=”3”
Grid.ColumnSpan=”2” DigitWidth=”67”
HorizontalAlignment=”Center”
FontFamily=”Segoe WP Black” FontSize=”108” />

Error   1   The type 'local:TimeSpanDisplay' was not found. Verify that you are not missing an assembly reference and that all referenced assemblies have been built.   D:\New CS Job\Window Phone 7 Dev\Project\Stopwatch\Stopwatch\MainPage.xaml  35  10  Stopwatch 
```

我尝试在谷歌中搜索我的错误，但它似乎对我没有用。请帮助我，我感到很沮丧。谢谢！

# ocaml - ocaml 函数将函数作为参数并输出函数

> ID：14579039
> 
> 赞同：1
> 
> 时间：2013-01-29T08:59:13.433
> 
> 标签：ocaml

我需要找到一种方法来组合两个函数并将它们作为一个输出。

我有以下代码，其中接受函数列表，`('a->'a) list`然后`('a->'a)`使用`List.fold_left`.

我想出了基本情况，但我尝试了很多方法来组合两个功能。输出应该具有类型`('a -> 'a) list -> ('a -> 'a)`。

示例输出：

```
# pipe [] 3;;
- : int = 3 
# pipe [(fun x-> 2*x);(fun x -> x + 3)] 3 ;;
- : int = 9 
# pipe [(fun x -> x + 3);(fun x-> 2*x)] 3;;
- : int = 12 
```

功能：

```
let p l = 
  let f acc x = fun y-> fun x->acc   in  (* acc & x are functions 'a->'a *)
  let base =  fun x->x in
    List.fold_left f base l 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:19:04.947

既然你知道你必须使用左折叠，你现在必须解决一个相当受限的问题：给定两个类型的函数`'a -> 'a`，你如何将它们组合成一个相同类型的函数？

在实践中，有一种组合功能的通用方式：组合。在数学中，这通常被写为`f ∘ g`where`f`和`g`are 函数。这个操作产生一个新函数，对应于接受一个参数，应用`g`到它，然后应用`f`到结果。所以如果`h = f ∘ g`, 那么我们也可以把它写成`h(x) = f(g(x))`。

所以你的功能`f`实际上是功能组合。（你真的应该给它一个比 . 更好的名字`f`。）它必须接受两个类型的函数`'a -> 'a`并产生另一个相同类型的函数。这意味着它生成*一个*参数的函数，而您生成一个带有*两个*参数的函数。

因此，您需要编写一个类型为 的函数`compose`（比 更易读的名称`f`）`('a -> 'a) -> ('a -> 'a) -> ('a -> 'a)`。它必须接受两个参数`f`并`g`生成一个将它们都应用于其参数的函数。

我希望这能澄清你需要做什么。弄清楚如何在 OCaml 中做到这一点是一项健康的练习。

# iphone - 如何区分 iphone 中的两个时间？

> ID：14579046
> 
> 赞同：0
> 
> 时间：2013-01-29T08:59:34.173
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我需要在表格视图中显示一个标签，如 X 秒前和 x 分钟和 y 秒前，X 小时前，就像那样。我正在这样做`

```
NSString *todaysdateString=[dict objectForKey:@"sendingtime"];

NSString *time = todaysdateString;
NSString*todaysdateString1=[NSString stringWithString: @" "];

NSDate *date1;
NSDate *date2;
//{
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"HH:mm:ss"];
date1 = [formatter dateFromString:time];
date2 = [formatter dateFromString:[formatter stringFromDate:[NSDate date]]];
[formatter release];
//}
NSTimeInterval interval = [date1 timeIntervalSinceDate: date2];
float seconds = interval;
float hour = interval / 3600;
float minute =(interval - hour*3600) / 60;
NSLog(@"%02.0f,%02.0f,%02.0f",hour, minute, seconds); 
```

`但这不会给我想要的答案，我变得像-0,00，-297那是完全错误的。任何人都可以指出我哪里出错了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:05:57.210

使用 a`NSCalendar`来做到这一点，也许这段代码可以帮助你

```
NSCalendar *c = [NSCalendar currentCalendar];
NSDateComponents *components = [c components:NSHourCalendarUnit|NSMinuteCalendarUnit|NSSecondCalendarUnit
                                    fromDate:initialDate
                                      toDate:endDate
                                     options:0]; 
```

在`components`变量中你会有差异，使用`components.day`:`components.minute`和`components.second`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:08:24.687

由于您的秒数为负数，您应该在此处交换您的日期

```
NSTimeInterval interval = [date1 timeIntervalSinceDate: date2]; 
```

到 ：

```
NSTimeInterval interval = [date2 timeIntervalSinceDate: date1]; 
```

并且可以这样做：

```
NSInteger intervalInt=interval;

NSInteger seconds = intervalInt % 60;
NSInteger minutes = (intervalInt / 60) % 60;
NSInteger hours = intervalInt / (60 * 60);
NSString *result = [NSString stringWithFormat:@"%02ld:%02ld:%02ld", hours, minutes, seconds]; 
```

# asp.net-mvc - 如何在 MVC 4 中创建 ASPX 页面

> ID：14579051
> 
> 赞同：0
> 
> 时间：2013-01-29T09:00:01.763
> 
> 标签：asp.net-mvc, asp.net-mvc-4, webforms-view-engine

我曾经使用 ColdFusion 进行过一段时间的开发，但后来离开了 Web 开发领域一段时间。我回来了，现在，并已被聘为中级（就在入门级以上）级别的 Web 开发人员。我的工作场所使用的是 MVC 4，但没有使用 Razor 视图引擎。我购买的两本 MVC 4 书籍（以及那里的大量教程和博客）只讨论了使用 Razor——我*在*自学中使用它，但我需要了解它在不使用时是如何工作的剃刀引擎。

使用 ASPX 视图引擎时，您如何使用它？它是否像普通的 ASPX 页面一样工作，我将 ASP.NET 控件放在页面上，然后使用 C# 中的代码隐藏来引用它们？只是，我没有使用 ASP.NET 控件，而是使用 HtmlHelper 方法？请记住，我不是在询问使用`<% %>`而不是的基本格式`<@`，因为大部分内容都在这里介绍：http: [//haacked.com/archive/2011/01/06/razor-syntax-quick-reference。 .aspx](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx) _ 我无法理解流量将如何通过我的基本 HomeController 路由到这些 ASPX 页面（它只有几个`ActionResult()`方法，没什么大不了的）。

如果需要，我可以详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:47:13.640

[看着](https://stackoverflow.com/questions/486541/asp-net-mvc-rc-creating-a-mvc-user-control-with-a-codebehind)

MVC 的精神是摆脱背后的代码，因此将拖放到设计器上并从背后的代码操纵控件的旧方法变得有些过时或多余。如果您已经在使用 HTML5 助手.. 我会继续这样做。

这纯粹是个人观点......但我会提出使用 Razor 的理由。

编辑：您将模型传递给视图......模型保存数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:52:55.190

如果您使用的是 ASP.NET MVC，那么请忘记背后的代码。至于视图引擎，您可以使用 razor 或 aspx 方式，这意味着您可以在视图上使用的语法是 razor 或 aspx。路由不会受到您选择的视图引擎的影响。（无论您选择 razor 视图引擎还是 aspx，它的行为都会相同。并且没有 aspx 视图的行为不像普通的 aspx 网络表单，没有视图状态等后面没有代码 [这](http://msdn.microsoft.com/en-us/magazine/dd942833.aspx)是一个很好的比较ASP.NET 和 ASP.NET MVC 和[这里](https://stackoverflow.com/questions/1451319/asp-net-mvc-view-engine-comparison)是不同视图引擎的比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:14:23.707

无论视图引擎如何，所有 MVC*视图*页面都遵循相同的生命周期：

1.  路由 - 请求被映射到操作方法（使用请求数据，如 URL、查询字符串、会话等）
2.  控制器 - 为匹配的操作方法创建一个控制器。它填充了所有环境、请求和会话数据
3.  Action - 调用匹配的动作方法
4.  Result - `ActionResult`action 方法返回的结果被执行。对于视图结果，这意味着：1) 视图引擎找到匹配的视图名称，2) 匹配的视图使用 action 方法返回的任何模型数据进行实例化，3) 视图由视图引擎处理。

这意味着 WebForms 视图将由 MVC WebForms 视图引擎执行，*而不是*由 ASP.NET WebForms 系统执行。视图引擎将执行一些基本解析，将模型中的数据添加到视图中（如 指定的那样`<%%>`）。

此外，仅供参考，您甚至可以在单个项目中混合视图引擎（需要一些设置）。

# ios - UIPickerView 返回先前的选择，因为动画不完整

> ID：14579054
> 
> 赞同：0
> 
> 时间：2013-01-29T09:00:10.213
> 
> 标签：ios, animation, uipickerview

这似乎很常见，但我无法弄清楚如何解决它。我有一个“输入”按钮来利用选择器视图中的选定行；但是，如果动画尚未完成，则使用先前的值（尽管看起来应该选择最接近的值的事件）。

我的解决方案是在动画发生时禁用“输入”按钮。

但是，animationKeys 似乎不再起作用，我无法计算出选取器视图的启动和停止动画委托方法，因为它们被称为类方法，而且，对于我的一生，我无法理解它是怎么做到的链接到特定视图。

任何人都可以阐明我如何确定选择器视图是否正在动画或如何实现类方法以与特定对象相关？

# wpf - WPF 图像动态绑定

> ID：14579059
> 
> 赞同：0
> 
> 时间：2013-01-29T09:00:31.023
> 
> 标签：wpf, image

我想在我的 WPF 窗口中显示图像。我已经把这段代码这样做了。

```
<Image  x:Name="ImageControl" Stretch="Fill" Margin="2" Source="{Binding imgSource}"/> 
```

在我后面的代码中，

```
 public ImageSource imgSource
    {
        get
        {
            logo = new BitmapImage();
            logo.BeginInit();
            logo.UriSource = new Uri(@"C:\MyFolder\Icon.jpg");
            logo.EndInit();                
            return logo;
        }
    } 
```

此代码显示图像很好，但我也应该能够更改图像运行时，也就是说，我想用另一个图像替换 Icon.jpg。MyFolder 是包含图像“Icon.jpg”的文件夹路径（名称始终相同）。所以每当我尝试用任何其他图像替换 Icon.jpg 时，我都会收到一个错误`Image file in Use`

任何人都可以建议如何克服这个问题。如果我需要澄清我的问题，请告诉我。

感谢期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:03:01.710

*   `INotifyPropertyChanged`在课堂上实施。

*   将您的属性更改为“获取”“设置”

*   并且不要忘记设置 DataContext。

这是代码：

```
public class MyClass : INotifyPropertyChanged
{
    private string imagePath;
    public string ImagePath
    {
        get { return imagePath; }
        set
        {
            if (imagePath != value)
            {
                imagePath = value;
                BitmapImage bitmapImage = new BitmapImage();
                bitmapImage.BeginInit();
                bitmapImage.UriSource = new Uri(ImagePath);
                bitmapImage.EndInit();
                imgSource = bitmapImage;
            }
        }
    }

    public BitmapImage logo;
    public ImageSource imgSource
    {
        get { return logo; }
        set
        {
            if (logo != value)
            {
                logo = value;
                OnPropertyChanged("imgSource");
            }
        }
    }

    #region INotifyPropertyChanged implementation
    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }
    #endregion
} 
```

### 更新

`BitmapImage`已知在使用字符串传递路径时保持文件加载。改为加载`FileStream`。`BitmapImage`作为默认设置的按需加载能力。要使位图加载图像，`EndInit`您必须更改`ChacheOption`：

```
using (FileStream stream = File.OpenRead(@"C:\MyFolder\Icon.jpg"))
{
    logo = new BitmapImage();
    logo.BeginInit();
    logo.StreamSource = stream;
    logo.CacheOption = BitmapCacheOption.OnLoad;
    logo.EndInit();
} 
```

# ruby-on-rails - 从 Rails 应用程序异步推送到外部 Web 服务的最佳方法是什么？

> ID：14579066
> 
> 赞同：0
> 
> 时间：2013-01-29T09:00:52.923
> 
> 标签：ruby-on-rails

当用户向我的 Rails 应用程序发表评论时，我希望将评论推送到外部 Web 服务。这个外部网络服务可能很慢，所以我想异步进行这个推送。我对来自 Web 服务的响应不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:03:08.350

使用任务队列和后台工作者的最佳方式。

例如，看看[Sidekiq](http://mperham.github.com/sidekiq/)。或[BackgroundJob](http://codeforpeople.rubyforge.org/svn/bj/trunk/README)。或[Resque](https://github.com/defunkt/resque)。

基本上，在您的 Rails 应用程序中，您说“我希望在后台调用它”并将任务放入队列（由[redis](/questions/tagged/redis "显示标记为“redis”的问题") / [mysql](/questions/tagged/mysql "显示标记为“mysql”的问题") / [erlang](/questions/tagged/erlang "显示标记为“erlang”的问题") /whatever 支持）。然后另一个进程（后台工作人员）从队列中检索任务并执行它们。

对于快速而肮脏的解决方案，您可以使用线程：

```
Thread.new do
  # this stuff will be executed asynchronously
end 
```

但这仅适用于非常小的应用程序。不要在重负载下尝试此操作。

# ruby-on-rails - 为什么此应用程序控制器不会向调用的控制器返回正确的值？

> ID：14579068
> 
> 赞同：0
> 
> 时间：2013-01-29T09:01:04.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3

为什么执行此操作时会变空？假设用户的积分是 2500。它应该返回 83

**post_controller**

```
@user = User.find(params[:id])
@user.percentage = count_percentage(@user)
@user.save 
```

**应用程序控制器**

```
def count_percentage(user)
    if user

        if user.point > 2999
            percentage = ((user.point / 5000.0) * 100 ).to_i
        elsif user.point > 1999
            percentage = ((user.point / 3000.0) * 100 ).to_i
        end

        return percentage

    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:38:25.050

看起来有些缺乏基本的了解，所以我在这里尝试重点关注几点。

**`count_percentage`属于你的型号**。`User`这是一种执行与您的记录相关的事情的方法。在您的示例中，代码只能与`User`记录一起使用。因此它属于你的`User`班级！

```
class User < ActiveRecord::Base
  def percentage
    if self.point > 2999
        return ((self.point / 5000.0) * 100 ).to_i
    elsif user.point > 1999
        return ((self.point / 3000.0) * 100 ).to_i
    else
        # personally, I'd add a case for points range 0...3000
    end
  end 
```

正如您所说，您想将该值放入您的“侧边菜单”中，因此这允许例如`@user.percentage`在那里为您提供所需的百分比。

根据您的描述（如果我理解正确的话），您希望将计算值存储在您的用户模型中。我们又来了：**模型逻辑属于你的模型类**。如果你想保持你的百分比值是最新的，你可以添加一个回调，比如：

```
class User < ActiveRecord::Base
  before_save :store_percentage

  def precentage
    # your code here
  end

  private

  def store_percentage
    self.my_percentage_field_from_my_database = self.percentage
  end
end 
```

对于您的实际问题：`user.point`可能是`NULL`（db）/ `nil`（ruby），因此您应该`to_i`在实际计算之前对其进行转换。这也是为什么我建议`else`在你的情况下阻止；返回一个值是否`user.point`大于`1999`（如果它甚至是一个整数..在这种情况下我怀疑）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:28:10.670

要回答这个问题，您应该尝试检查方法`user.point`中`percentage`的值`count_percentage`。

我强烈推荐[pry](https://github.com/pry/pry)。因为它太棒了。

# ios - 从 UITableView 中的 URL 加载图像缓慢。

> ID：14579079
> 
> 赞同：0
> 
> 时间：2013-01-29T09:01:44.750
> 
> 标签：ios, objective-c, uitableview

我正在从 UITableView 中的 URL 加载图像。但是加载视图时非常慢。这是一个例子，

```
UIImage *image = nil;
image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://calcuttans.com/palki/wp-content/uploads/2009/02/kidscover-small.png"]]]; 
```

在表格视图中，我正在设置背景图像的 UIButton。

请你能提供样品吗？

仅供参考：我使用了 LazzyTable 示例程序，但它没有多大帮助。你能推荐任何其他样品吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T09:10:01.323

异步加载图片

```
NSURL* url = [NSURL URLWithString:@"http://calcuttans.com/palki/wp-content/uploads/2009/02/kidscover-small.png"];
    NSURLRequest* request = [NSURLRequest requestWithURL:url];

[NSURLConnection sendAsynchronousRequest:request
        queue:[NSOperationQueue mainQueue]
        completionHandler:^(NSURLResponse * response,
            NSData * data,
            NSError * error) {
    if (!error){
            NSImage* image = [[NSImage alloc] initWithData:data];
        // do whatever you want with image
    }

}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T09:13:43.600

有一些可用的开源库：

1.  [**HJCache**](https://github.com/markofjohnson/HJCache)
2.  [**SDWebImage**](https://github.com/rs/SDWebImage)

这些库以异步方式下载图像并将其缓存以供进一步使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T09:07:57.827

尝试实现[AFNetworking](https://github.com/AFNetworking/AFNetworking)。它使用异步请求来下载图像，您当前在每次下载时都会阻止您的视图。

然后，您可以使用[AFImageRequestOperation](http://afnetworking.github.com/AFNetworking/Classes/AFImageRequestOperation.html)下载您的图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T09:09:26.680

//利用调度队列更快地处理数据。在 viewDidLoad 中添加这个

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
    NSData * data=[NSData dataWithContentsOfURL:[NSURL URLWithString:imageUrl]];
    [self performSelectorOnMainThread:@selector(setImage:) withObject:data waitUntilDone:YES];
}); 
```

//一旦数据得到设置图像并重新加载tableview

```
-(void)setImage:(NSData *)responseData
{
image = [UIImage imageWithData:responseData];
[tableView reloadData];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-29T09:11:29.490

如果您每次都加载从互联网下载的图像，它一定很慢。

我认为您应该将下载的图像存在于 filePath 中，当您加载图像时，您可以检查该图像之前是否已下载，如果没有，则下载。如果已经下载，可以使用`imageWithContentsOfFile:`加载图片的方法

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-29T09:08:59.693

也许您可以使用[asihttprequest](http://allseeing-i.com/ASIHTTPRequest/)来延迟加载图像。使用 ASINetworkQueues

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-29T09:09:01.560

你必须用它`NSOperationQueue`来提高你的`tableview`效率。

检查这个[icodeblog 教程](http://www.icodeblog.com/2010/03/04/iphone-coding-turbo-charging-your-apps-with-nsoperation/)和[raywenderlich 教程](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-29T09:11:28.780

看看这个教程。这对我帮助很大。当我使用它时，我对 iOS 还是很陌生，它不仅对从网络加载图像很有帮助。

[http://www.markj.net/iphone-asynchronous-table-image/](http://www.markj.net/iphone-asynchronous-table-image/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-08T00:22:47.043

有了`AFNetworking`它就更容易了。

//AF网络

```
#import "UIImageView+AFNetworking.h"

[cell.iboImageView setImageWithURL:[NSURL URLWithString:server.imagen] placeholderImage:[UIImage imageNamed:@"qhacer_logo.png"]]; 
```

# crash - Telerik-RadWindow、RadAjaxManager 和 IE9 崩溃应用程序

> ID：14579080
> 
> 赞同：1
> 
> 时间：2013-01-29T09:01:47.800
> 
> 标签：crash, telerik, internet-explorer-9, radwindow, radajaxmanager

我正在使用 Telerik 控件，有两个页面列表和详细信息页面。详细信息页面打开 Radwindow。关闭 radwindow 后，ajaxrequest 正在刷新列表页面（父页面）的网格。

```
<telerik:RadWindowManager ID="RadWindowManager1" Height="665px" Width="1200px" runat="server"
            Modal="true" Behaviors="Close,Move" VisibleStatusbar="false" Title="Add Service" DestroyOnClose="true">
            <Windows>
                <telerik:RadWindow ID="rdwAddService" runat="server" Title="Editing record" ReloadOnShow="true"
                    ShowContentDuringLoad="false" Modal="false" DestroyOnClose="true" />
            </Windows>
        </telerik:RadWindowManager>
    </telerik:RadAjaxPanel>
    <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server" OnAjaxRequest="RadAjaxManager1_AjaxRequest" RequestQueueSize="0">
         <ClientEvents OnResponseEnd="responseEnd" />
        <AjaxSettings>
            <telerik:AjaxSetting AjaxControlID="RadAjaxManager1">
                <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="grdTL" />
                     <telerik:AjaxUpdatedControl ControlID="grdTR" />
                </UpdatedControls>
            </telerik:AjaxSetting>
        </AjaxSettings>
    </telerik:RadAjaxManager>

 function RefreshGrid(SubServiceType) {

                if (SubServiceType == "TR") {
                             $find("<%=RadAjaxManager1.ClientID%>").ajaxRequestWithTarget( '<%= btnRefreshTRGrid.UniqueID %>', '');
                }
                else if (SubServiceType = "TL") {
                             $find("<%=RadAjaxManager1.ClientID%>").ajaxRequestWithTarget( '<%= btnRefreshTLGrid.UniqueID %>', '');
                }
            } 
```

**

```
Now problem is
In IE9,after opening/closing radwinow five-six times,
1)does not load radwindow again, like application hangout
2)Other button stops working
3)On refersh page, application hangout and need to close browser instance. 
```

**

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:24:28.347

我解决了 IE9 浏览器崩溃的问题。

**问题是** 我将 radwindow 的关闭事件附加到 pageLoad() 函数，因此每个回发、关闭函数附加（例如 4 次）并调用 4 次，并且在脚本网格中刷新，因此 4 次网格刷新并崩溃应用程序。

```
incorrect
    function pageLoad() {
            GetRadWindow().add_close(CallFnOnParent);
                } 
```

**解决方案是** 使用 Sys.Application.add_init 函数，所以它只是第一次附加关闭事件并在关闭事件之前删除关闭事件。

```
correct
      Sys.Application.add_init(function () {
                    // Initialization code here, meant to run once.
                     GetRadWindow().add_close(CallFnOnParent);
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:02:26.200

我会建议一种更好的方法 - 在主页中添加处理程序，因为这是函数应该驻留的地方。然后，您可以简单地在标记中或打开弹出窗口时设置它。然后删除关闭处理程序本身就是一个很好的方法。就像是：

```
function openRw(){
var wnd = radopen();
wnd.add_close(myCloseHandler);
}

function myCloseHandler(sender, args){
sender.remove_close(myCloseHandler);
//other code
} 
```

# android - jni如何传递一个字符串数组？

> ID：14579082
> 
> 赞同：0
> 
> 时间：2013-01-29T09:02:09.180
> 
> 标签：android, java-native-interface

如何传递字符串数组？

我发布代码：

xx.cpp

```
JNIEXPORT jstring JNICALL Hello_Native(JNIEnv *env, jobject obj,jstring string)
{
    const char *str = env->GetStringUTFChars(string, 0);
    return env->NewStringUTF( "Hello from JNI !");
}
static JNINativeMethod gMethods[] = {
   {"JniHello",const_cast<char*>("(Ljava/lang/jsting)Ljava/lang/jsting;"),(void*)Hello_Native} 
```

xx.java

```
public native static String JniHello(String text); 
```

`JniHello`声明时系统总是提示有问题`gMethods`，参数不对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:17:37.327

1.  停止为 JNICALL 函数使用错误的手动名称。`javah`将为您正确生成它。如果您的 Java 名称`JniHello`在类中`MyHello`并且您的包在`com.hello`，则 JNICALL 函数必须是`Java_com_hello_MyHello_JniHello`。不可能`Hello_Native`，你编的。
2.  那么当然这个正确的函数名必须用在`JNINativeMethod`struct的最后一个成员中
3.  没有这样的类`java/lang/jsting`。`java/lang/jstring`如果我为您添加缺少的内容，甚至没有`r`。您被要求提供 JAVA 签名，而不是 JNI。所以它必须是`java/lang/String`。
4.  **已添加（感谢@EJP）**：停止对 JNI 签名使用错误的手动字符串并改用 的`javap -s`输出

您的代码还有一个问题：使用时`GetStringUTFChars`，您还必须在返回之前调用 `ReleaseStringUTFChars'，否则会发生泄漏。但你迟早会发现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-31T09:33:00.620

const_cast("(Ljava/lang/jsting)Ljava/lang/jsting;") 拼写错误，应该是 const_cast("(Ljava/lang/jsting)Ljava/lang/jstring;")

jsting ==> jstring

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-31T09:39:05.913

```
Copy some android source code to help you(JNI):

static jobject osNetworkSystem_getHostByNameImpl(JNIEnv* env, jclass clazz,
        jstring nameStr, jboolean preferIPv6Addresses) {

}

static void osNetworkSystem_setInetAddressImpl(JNIEnv* env, jobject obj,
        jobject sender, jbyteArray address) {

}

static jobject osNetworkSystem_inheritedChannelImpl(JNIEnv* env, jobject obj) {

}

/*
 * JNI registration.
 */
static JNINativeMethod gMethods[] = {
    /* name, signature, funcPtr */
    { "getHostByNameImpl",                 "(Ljava/lang/String;Z)Ljava/net/InetAddress;",                              (void*) osNetworkSystem_getHostByNameImpl                  },
    { "setInetAddressImpl",                "(Ljava/net/InetAddress;[B)V",                                              (void*) osNetworkSystem_setInetAddressImpl                 },
    { "inheritedChannelImpl",              "()Ljava/nio/channels/Channel;",                                            (void*) osNetworkSystem_inheritedChannelImpl               },
};

int register_org_apache_harmony_luni_platform_OSNetworkSystem(JNIEnv* env) {
    return jniRegisterNativeMethods(env,
            "org/apache/harmony/luni/platform/OSNetworkSystem",
            gMethods,
            NELEM(gMethods));
} 
```

# jquery - jQuery 更新打破了插件功能

> ID：14579084
> 
> 赞同：0
> 
> 时间：2013-01-29T09:02:13.230
> 
> 标签：jquery

我经常使用一些基本的插件，比如用于图像[循环](http://jquery.malsup.com/cycle/)的循环，以及一些模态插件，比如 colorbox。

我总是像这样链接到 jQuery：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"> 
```

但是自从几周前的最新版本以来-我所有的脚本都停止了工作。我必须手动链接到 1.7.2 或 1.8 才能让它们工作。

知道发生了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:12:05.800

继 Tim 之后，1.9.0 发生了一些重大变化 - 以下关于 SitePoint 的文章值得一读，了解为什么以及如何跟踪和修复问题：

[http://www.sitepoint.com/jquery-19-whats-new/](http://www.sitepoint.com/jquery-19-whats-new/)

您可以使用 google 链接到 jQuery 1.8.1 ( [http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:04:18.487

使用 jQuery 1.9 版时，您需要检查站点中的任何 JavaScript 错误。

因为您使用的是这个**googleapi**内容交付网络，它会自动选择可用的最新版本的 jQuery。使用 jQuery 1.9 进行了很多更改，并且删除了事件/函数，这将导致一些插件/旧代码中断。

3rd 方插件很有可能使用`live()`现在已在 1.9 版中删除的事件处理程序。

在这里阅读以了解发生了什么变化。[jQuery Core 1.9 升级指南](http://jquery.com/upgrade-guide/1.9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T09:09:25.950

您正在使用 Google CDN 来检索您的 jQuery。这实际上是正确的，但您必须知道您所包含的版本。查看版本号并验证差异：

```
ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js 
```

获取最新的 v1.xx 版本的 jQuery

```
ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js 
```

获取最新的v1.8.x版本的jQuery

```
ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js 
```

获取特定版本：在这种情况下为 v1.9.0。

如果您不希望您的插件在将来中断，我建议您使用有效的 jQuery 版本，而不是“动态”让 Google 更新它们（或检查插件以检查它们是否更新到最新版本的 jQuery）。

# php - 强制 php 插入从 WordPress 头文件的新行开始

> ID：14579086
> 
> 赞同：0
> 
> 时间：2013-01-29T09:02:20.303
> 
> 标签：php, wordpress, insertion

我有各种插件和自制函数，可以将项目添加到我的 wordpress 博客 header.php 文件中。今天我正在做一些调整，并注意到插入这些代码片段的位置存在这个问题。

我的标题中有以下代码：

[我的标题中的代码](http://pastebin.com/wfTZ7aDW)

然后 Facbook 调试器告诉我 og:type 标签“article”丢失了。似乎注释代码隐藏了第一个元属性标记。

这些标签来自我的function.php文件中的自制函数，所以我想知道如何强制插入从新行开始，而不是在它想要的任何行的末尾添加。

我查看了 /n 但无法让它在我的函数中工作

[道格的功能](http://pastebin.com/7TNCiPE4)

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:59:05.470

想通了我的问题。我不知道如何让我的函数强制换行并发现我需要放入 PHP 声明，所以这是我添加到函数中的行：

```
<?php echo "\n<!-- my comment -->\n"; ?> 
```

那行得通。它下降到下一行，写下注释，然后在写函数中的其余文本之前又下降了一行。

# winapi - 隐藏 WebBrowser 控件

> ID：14579099
> 
> 赞同：0
> 
> 时间：2013-01-29T09:02:57.537
> 
> 标签：winapi, iwebbrowser2

我有一个 Win32 应用程序，它将 HTML 转换为图像而不显示控件。（我没有太多在 Win32 应用程序中使用 ActiveX 的经验）。

我按照这篇 MSDN 文章创建控件并调用：http `Navigate()`: [//msdn.microsoft.com/en-us/library/aa451946.aspx](http://msdn.microsoft.com/en-us/library/aa451946.aspx)

当我需要转换图像时，我调用`IViewObjec::Draw()`. 问题是即使我调用以下函数，控件也始终可见：

```
browser->put_Visible(VARIANT_FALSE); // browser is IWebBrowser2 
```

当我进入代码时，我发现当我打电话时

```
mOleObject->DoVerb(OLEIVERB_INPLACEACTIVATE, NULL, mControlSite, 0, NULL, NULL) 
```

控件立即变得可见。但从我从 MSDN 中可以看出，这`OLEIVERB_INPLACEACTIVATE`意味着

> 在不显示最终用户需要更改对象行为或外观的工具（例如菜单和工具栏）的情况下激活对象。单击这样的对象会使其与容器协商其用户界面工具的显示。如果容器拒绝，则对象保持活动状态，但不显示其工具。

我有点迷茫，只想掩饰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:32:55.183

尝试调用类型`DoVerb()`的实例`IOleObject`（在你的情况下， ）并作为动词`mOleObject`传递。`OLEIVERB_HIDE`

更新：

该`IHTMLElementRender`界面可以更好地解决问题（请参阅[Capture an HTML document as an image](http://www.codeproject.com/Articles/6601/Capture-an-HTML-document-as-an-image)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:52:30.670

我找到了另一个解决方案。

我只是制作普通的窗口并将html控件放入窗口并隐藏它，这样就解决了我上面提到的所有问题。

在 ControlSite 中，我实现了 IOleWindow::GetWindow() 来像下面的代码一样放置控件（mWindow 只是我的基本窗口类），只需返回这个普通窗口的句柄。

```
HRESULT STDMETHODCALLTYPE GetWindow(/* [out] */ HWND __RPC_FAR* theWindow)
{   
    *theWindow = mWindow.GetHandle();
    return S_OK;    
} 
```

# c - c - SIGSEGV 使用 pow() 报告

> ID：14579104
> 
> 赞同：1
> 
> 时间：2013-01-29T09:03:06.257
> 
> 标签：c, debugging, segmentation-fault

`tmp = pow(p[i],j);`编译器在while抛出一个 SIGSEGV`p[i]`并且`j`是两个整数，并且`p[i]`是 array 的有效元素`p`，我真的不知道为什么......

原始代码在这里： http: [//pastebin.com/DYhGeHxm](http://pastebin.com/DYhGeHxm)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T09:17:58.800

你有没有想过：

```
int i,j,p[2000], a[5000000],num,count,tmp; 
```

可能会把你推得离你很近，或者直接推*到*你筹码空间的边缘？那是

```
4 + 4 + 8000 + 20000000 + 4 + 4 + 4 
```

**字节**

即你有一个**19.08 兆字节**的堆栈空间声明。`a`至少考虑动态分配。当我将其更改为：

```
int *a = malloc(5000000 * sizeof(*a)); 
```

并重新运行代码，它远远超过了你所拥有的段错误。不幸的是，它死在了这个位置：

```
count = 0;
for(i = 0; i < num; i++) {
    for(j = 2; ;j++) {
        tmp = pow(p[i],j);
        if(tmp > 5000000) break;
        a[count++] = tmp; // <=== faulted here, count was 5000193
    }
} 
```

当您达到分配的最大大小时，两个循环都应该中断`a[]`。我做了以下。在顶部`main()`：

```
static const int a_max = 5000000;
int *a = malloc(a_max*sizeof(*a)); 
```

在循环中：

```
count = 0;
for(i = 0; i < num && count < a_max; i++)
{
    for(j = 2; count < a_max; j++)
    {
        tmp = pow(p[i],j);
        if(tmp > 5000000)
            break;
        a[count++] = tmp;
    }
} 
```

这可以让您完成所有设置。最后一件事是快速排序算法本身，它似乎也被破坏了。我*强烈*建议从较小的数据大小开始进行调试。

祝你好运。

* * *

**编辑**如果您需要参考快速排序算法，我有一个坐在我的垃圾文件夹之一的源文件中。不能保证它是正确的（很确定它是正确的，并且也跳过了长度 1 的排序），但我知道它不会挂起，所以它可以这样做 =P

```
// quicksort for ints
static void quicksort_ints(int *arr, int left, int right)
{
    int p = (left+right)/2;    // as good as any
    int l = left, r = right;   // movable indicies

    while (l <= r)
    {
        while (arr[l] < arr[p])
            ++l;
        while (arr[r] > arr[p])
            --r;
        if (l <= r)
        {
            int tmp = arr[l];
            arr[l] = arr[r];
            arr[r] = tmp;
            ++l;
            --r;
        }
    }

    if (left < r)
        quicksort_ints(arr, left, r);
    if (l < right)
        quicksort_ints(arr, l, right);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:06:33.337

检查 的值`i`。`p`对于数组来说可能太大了。您可以使用调试器执行此操作。

# android - Android 电池使用情况 - 详情

> ID：14579106
> 
> 赞同：2
> 
> 时间：2013-01-29T09:03:10.640
> 
> 标签：android, battery

我有一个后台 Android 应用程序，它监听基于网络的位置。在某些情况下，它会开始执行某些任务，但仅执行一小段时间，然后返回侦听基于网络的位置更改 (NETWORK_PROVIDER)。

当我查看电池使用屏幕时，它似乎总是很有效。 ![我的应用](../Images/44304d9832d082b013b2b86a41919cfa.png)

“保持清醒”表明该应用程序在应该显示它根本不工作的地方工作了很多（几乎..）。与另一个流行的应用程序相比，我发现“保持清醒”显示的时间很少，尽管该应用程序处于前台并且它正在努力工作！ ![其他应用](../Images/eb587e9747c9cddbccd790a23bda6663.png)

另一个应用程序也使用网络，但它没有显示任何数据使用情况（数据发送/数据接收）。

有人可以解释“使用详细信息”下的每个项目的含义吗？为什么“保持清醒”并不能真正反映应用程序何时处于唤醒状态？

谢谢。铅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T04:03:37.910

这里的“Stake Awake”表示您的应用程序持有唤醒锁（部分唤醒锁和完全唤醒锁）的时间。唤醒锁强制设备唤醒。请注意，即使应用程序在前台，您的设备也可以进入睡眠状态（从技术上讲，它可能被认为正在运行，但实际上它可能什么都不做）。基本上，如果应用程序只是在等待用户输入并且显示屏已关闭，则设备可能会进入“深度睡眠”状态。但是任何应用程序（包括后台应用程序）都可能获取唤醒锁并导致系统无法进入睡眠状态。

使用“Wakelock Detector”之类的应用程序或[Little Eye 之](http://www.littleeye.co)类的分析工具（免责声明：我与他人共同创立了构建此工具的公司）来了解您的应用程序如何使用唤醒锁。

:-)

# python - 芹菜：启动时启动任务

> ID：14579108
> 
> 赞同：10
> 
> 时间：2013-01-29T09:03:23.577
> 
> 标签：python, django, celery, crontab

我有一个任务需要在 Celery 启动时启动。该任务接下来通过回调 / eta 每 5 分钟运行一次。

我找到了一些关于它的线程，但似乎没有在 Celery 3 上工作。

谢谢你的帮助，阿诺。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T18:12:17.753

Celery 的 IRC 频道上的某个人通过使用“worker_ready.connect”信号为我提供了正确的方法：http: [//docs.celeryproject.org/en/latest/userguide/signals.html#worker-ready](http://docs.celeryproject.org/en/latest/userguide/signals.html#worker-ready)

```
from celery.signals import worker_ready

@worker_ready.connect
def at_start(sender, **k):
    with sender.app.connection() as conn:
         sender.app.send_task('app.modules.task', args,connection=conn, ...) 
```

它现在就像一个魅力！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:01:53.437

您需要在设置中定义：

```
import djcelery
djcelery.setup_loader()
CELERY_IMPORTS = ("apps.app_name.module.tasks",) 
```

此外，如果您没有安装 celery 代理，您应该安装一个我正在使用 RabbitMQ，关于如何使用它的非常好的教程，您可以在 celery 文档中找到：

[http://docs.celeryproject.org/en/latest/getting-started/brokers/rabbitmq.html](http://docs.celeryproject.org/en/latest/getting-started/brokers/rabbitmq.html)

然后从命令行芹菜恶魔开始：

django-admin.py celeryd -v 2 -B -s celery -E -l INFO

# jquery - 将两个 Jquery 表单元素组合在一起单独工作但不一起工作？

> ID：14579110
> 
> 赞同：0
> 
> 时间：2013-01-29T09:03:26.210
> 
> 标签：jquery, ajax, forms

我正在尝试使用 Jquery-Elements（滑块）构建一个表单。我还添加了一个 Jquery-Plugin，它为我提供了一个复杂的下拉元素。只要它们位于单独的文件中，两者都可以正常工作。当我在标题部分合并它们和所需的资源时，不会显示滑块或下拉列表。合并文件看起来像附加和 crome 控制台给出以下错误：

> 未捕获的类型错误：对象 [object Object] 没有方法“selectList”

看起来标题中的资源会以某种方式覆盖自身？你可以帮帮我吗？

```
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Eingabe</title>

  <link rel="stylesheet" type="text/css" href="http://web0.v1364.ncsrv.de/devscan/jqueryselectlist/css/selectlist.css" >
  <script type="text/javascript" src="http://web0.v1364.ncsrv.de/devscan/jqueryselectlist/scripts/jquery.min.js"></script>
  <script type="text/javascript" src="http://web0.v1364.ncsrv.de/devscan/jqueryselectlist/scripts/jquery.selectlist.pack.js"></script>

  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" >
  <style>#slider { margin: 10px; }  </style>
  <script src="http://code.jquery.com/jquery-1.9.0.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script> 

  </head>

  <body>

<h1>Eingabe Suchauftrag</h1>

<table border="1">
  <tr>
    <td>Wo</td>
    <td>
    <select name="Stadt" size="1" onchange="fuellestadteile(this)">
      <option value="6">Frankfurt</option>
      <option value="7">Stuttgart</option> 
    </select>
    </td>

    <td>

    </td>
  </tr>

  <tr>
    <td>Zimmer Minimum:</td>
    <td><div id="sliderzimmer"></div></td>
  </tr>

  <tr>
    <td>Preisspanne:</td>
    <td><div id="slider-range"></div></td>
  </tr>

    <tr>
    <td>Vor- Nachname</td>
   <td><input type="name"/></td>
  </tr>
   <tr>
    <td>Emailadresse</td>
    <td><input type="email"/></td> 
  </tr>
  <tr><td colspan="2"><button type="button">Abschicken!</button><td></tr>
</table>

<p>Dein Suchauftrag:</p>
Ich suche in Frankfurt eine Wohnung
mit mindestestes  <input type="text" id="anzahlzimmer" style="border: 0; color: #f6931f; font-weight: bold;" />Zimmer die im Monat 
<input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" />
kostet.
Meine Emailadresse lautet: 

<!--<label for="anzahlzimmer">Price range:</label></p>
<label for="anzahlzimmer">Donation amount ($50 increments):</label></p>
--> 

<script>
$( "#slider" ).slider();
</script>

<script>
// Anzahl Zimmer
$(function() {
    $( "#sliderzimmer" ).slider({
      min: 1,
      max: 5,
      step: 1,
      value: 3,
      slide: function( event, ui ) {
        $( "#anzahlzimmer" ).val( ui.value );
      }
    });
    $( "#anzahlzimmer" ).val( $( "#sliderzimmer" ).slider( "value" ) );
  });
  </script>

 <script>
 //Preis
  $(function() {
    $( "#slider-range" ).slider({
      range: true,
      min: 0,
      max: 3000,
      step: 50,
      values: [ 800, 1200 ],
      slide: function( event, ui ) {
        $( "#amount" ).val(ui.values[ 0 ] + " EUR - " + ui.values[ 1 ]+" EUR" );
      }
    });
    $( "#amount" ).val($( "#slider-range" ).slider( "values", 0 ) +
      " EUR - " + $( "#slider-range" ).slider( "values", 1 ) +" EUR" );
  });

  </script>

  <script>
   function uebertrage(wo,zimmerpreismin,zimmerpreismax,zimmeranzahl,vorname,nachname, email)
   {
       alert('Uebertrage '+wo+' '+zimmerpreismin+' '+zimmerpreismax+' '+zimmeranzahl+' '+vorname+' '+nachname+' '+email);
       $.ajax({
           type: "POST",
           cache: false,
           url: "form_process.php",
           data: "wo="+wo +"&zimmerpreismin="+zimmerpreismin+"&zimmerpreismax="+zimmerpreismax+"&zimmeranzahl="+zimmeranzahl+"&vorname="+vorname+"&nachname="+nachname+"&email="+email,
           /*data: { variable2: "variable2" },*/
           /*data: dataString,*/
           success: function(msg){
               alert("Success! "+msg);
               /*alert(variable2);*/
           }
       });

       }

   function validateEmail(email) {
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        return emailReg.test( email );
    }

    var clicked = jQuery("button");

    clicked.click(function() {
       var wo="Frankfurt";

        var zimmerpreismin = $("#slider-range").slider("values", 0); 
        var zimmerpreismax = $("#slider-range").slider("values", 1);
        var zimmeranzahl = $("#sliderzimmer").slider("value");  
        var name  = jQuery("input[type='name']").val();

        var teile = name .split(" "); 
        var vorname = teile[0];
        var nachname= teile[1];

        var email = jQuery("input[type='email']").val();

        ( !validateEmail(email) ) ? alert('Ungültige Emailadresse bitte korrigieren') : alert("Richtige Addy und Zimmerpreismin "+zimmerpreismin+email+name) 

                    uebertrage(wo, zimmerpreismin,zimmerpreismax,zimmeranzahl, vorname,nachname, email);    
                    });

  </script>

  <script type="text/javascript">
function fuellestadteile(obj)
{
alert ('Hilfe'+obj.value);
}
</script>

<?php

include("/home/www/web0/html/devscan/private/mylibaryconnect.php");
$connID = connect_to_mylibrary();

$citychoice='6';
$databaseSelector="usr_devscan";
$query=mysql_db_query($databaseSelector,"SELECT location_internal_id , location_name FROM Locations WHERE location_internal_id LIKE '$citychoice%' ORDER BY location_internal_id ASC")or die(mysql_error());
$row_query = mysql_fetch_array($query);
$totalRows_query = mysql_num_rows($query);

while ($row_query = mysql_fetch_assoc($query)) {
    $dropdownlist[] = array($row_query['location_internal_id'],$row_query['location_name']);
}

?>

<select id="stadtteile" multiple="multiple" name="languages[]"  title="Stadtteile">

<?php
foreach ($dropdownlist as $zeile ) {
//ACHTUNG DER ERSTE DATENEINTRAG WIRD NICHT ANGEZEIGT ARRAYPROPBLEM?
echo '<option value="'.$zeile[0].'">'.$zeile[1].'</option>';

 } ?>

</select>

<script type="text/javascript">
  //$(document).ready(function () {
    $(function() {
    $('select#stadtteile').selectList({ sort: true });
  });
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:05:48.063

他们必须在 jQuery script 标签下。您必须先加载 jQuery 和 jQuery UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:09:12.083

加载`jQuery`和`jQuery UI`首先..同时删除`jQuery`库的重复..

你有 ：

```
 <script type="text/javascript" src="http://web0.v1364.ncsrv.de/devscan/jqueryselectlist/scripts/jquery.min.js"></script> 
```

和

```
<script src="http://code.jquery.com/jquery-1.9.0.js"></script> 
```

删除一个..（我建议保持最新..）

前者是缩小版`1.8.0`

# java - 为什么我的 xml 的 JAXB 命名空间设置为默认 ns1？

> ID：14579115
> 
> 赞同：5
> 
> 时间：2013-01-29T09:03:43.247
> 
> 标签：java, jaxb, glassfish

我使用 NetBeans 7.2（在 Windows 7 环境中！）从我的 Web 应用程序构建了一个 war 文件，该文件在测试阶段在 NetBeans 上下文中使用 GlassFish 3.1.2 服务器正确运行。

文件中定义的命名空间`package-info.java`已正确添加到我的 xml 文件中。

但是，当我在 Linux 机器上单独运行的 GlassFish 服务器中部署 war 文件时，命名空间设置为默认 ns1 而不是 package-info.java 文件定义的名称？

我究竟做错了什么？

问候，杰拉德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:37:37.280

> 为什么我的 xml 的 JAXB 命名空间设置为默认 ns1？

`ns1`不是名称空间而是前缀。前缀不重要。例如以下文档都是等效的。`foo`元素在`FOO`命名空间中，元素`bar`在`BAR`命名空间中。

```
<a:foo xmlns:a="FOO" xmlns:b="BAR>
    <b:bar>Hello World</b:bar>
</a:foo> 
```

```
<ns1:foo xmlns:ns1="FOO" xmlns:ns2="BAR>
    <ns2:bar>Hello World</ns2:bar>
</ns1:foo> 
```

```
<foo xmlns="FOO" xmlns:b="BAR>
    <b:bar>Hello World</b:bar>
</foo> 
```

* * *

> 我究竟做错了什么？

没有什么。[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现不需要使用注释中指定的前缀`@XmlSchema`。 [**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)确实如此，并且最近版本的 JAXB RI 似乎如此。NetBeans 7.2 中的 JAXB 版本/实现似乎是这样，而 GlassFish 3.1.2 使用的 JAXB 版本/实现却不是。

下面是我写的一篇文章的链接，该文章更详细地介绍了`NamespacePrefixMapper`此处可能有用的扩展。

*   [http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html](http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html)

# javascript - 在google maps api中单击并拖动以选择具有半径的位置

> ID：14579116
> 
> 赞同：0
> 
> 时间：2013-01-29T09:03:45.943
> 
> 标签：javascript, google-maps

我希望能够通过单击和拖动操作来选择 1m - 5km 的半径。单击并拖动应绘制一个半径为 5 公里的圆圈。

有人可以帮助我或至少让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:20:15.687

在问这个问题之前，我应该更多地用谷歌搜索。

很棒的教程：[https ://developers.google.com/maps/articles/mvcfun?hl=sv](https://developers.google.com/maps/articles/mvcfun?hl=sv)

# java - jsp:useBean 作用域

> ID：14579121
> 
> 赞同：2
> 
> 时间：2013-01-29T09:04:19.160
> 
> 标签：java, jsp, request, session-variables, usebean

JSP代码是：

```
<jsp:useBean id="person" class="org.example.model.PersonModel" scope="session">
</jsp:useBean>
<br> Name : <jsp:getProperty property="name" name="person"/>
<br> Surname : <jsp:getProperty property="surname" name="person"/> 
```

尽管我将 java 对象设置在`request`范围内，而不是在`session`控制器 Servlet 的范围内，但我将请求转发到该 Servlet 的范围内。尽管标签中提到的范围是会话，但如何`<jsp:useBean>`获取请求属性？如果它用于`pageContext.findAttribute()`获取属性，那么在该`<jsp:useBean>`标记中具有范围属性有什么用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T16:57:04.453

[`PageContext#findAttribute()`](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/JspContext.html#findAttribute%28java.lang.String%29)分别扫描页面、请求、会话和应用程序范围，直到找到给定属性键的第一个非属性`null`值。另请参阅[javadoc](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/JspContext.html#findAttribute%28java.lang.String%29)：

> **按顺序**在页面、请求、会话（如果有效）和应用程序范围中搜索命名属性，并返回关联的值或 null。

这就解释了为什么它在转发 servlet 中发现请求范围为一组，而不是在 JSP 中声明的会话范围为一组。这也在[我们的 EL wiki 页面](https://stackoverflow.com/tags/el/info)中进行了解释。

在任何情况下，如果您使用的是 servlet，则不应`<jsp:useBean>`在应该由 servlet 管理的模型对象上使用。下面`<jsp:useBean>`是一个不同的 MVC 级别，它只会在实际使用 servlet 作为控制器时导致混乱和维护麻烦。[我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)的“编码风格和建议”部分也明确提到了这一点。

因此，您可以这样做，而不是所有这些`<jsp:xxx>`事情：

```
<br>Name: ${person.name}
<br>Surname: ${person.surname} 
```

您只需要添加 JSTL`<c:out>`即可在重新显示用户控制的数据时防止潜在的 XSS 攻击漏洞（请注意，`<jsp:getProperty>`不会这样做！）

```
<br>Name: <c:out value="${person.name}" />
<br>Surname: <c:out value="${person.surname}" /> 
```

要了解有关 JSTL 的更多信息，请查看[我们的 JSTL wiki 页面](https://stackoverflow.com/tags/jstl/info)。

# java - 为什么没有“Thread.sleep”的“while(true)”会在 Linux 上导致 100% 的 CPU 使用率，而在 Windows 上却不会？

> ID：14579124
> 
> 赞同：161
> 
> 时间：2013-01-29T09:04:36.367
> 
> 标签：java, linux, windows, multithreading, cpu-usage

我在java中创建了一个简单的程序：

```
public static void main(String[] args) throws InterruptedException {
    while (true) 
        ;
} 
```

如果我在 Linux 机器上运行它，它会显示 100% 的 CPU 使用率，但不会导致操作系统看起来很慢。但是，如果我在 Windows 上运行完全相同的代码，它只会显示大约 20% 的 CPU 使用率。

我在 Windows 上使用 Oracle JRE，在 Linux 上使用 OpenJDK 6。

我想知道 Windows 的调度程序是否会随机抢占线程而 Linux 不会？

* * *

## 回答 #1

> 赞同：393
> 
> 时间：2013-01-29T09:11:26.663

默认情况下，`top`Linux 以所谓的 IRIX 模式运行，而 Windows 任务管理器则没有。假设您有 4 个核心：

*   开启 IRIX 模式时，1 个充分利用的核心为 100%，4 个核心为 400%。

*   关闭 IRIX 模式时，1 个充分利用的核心为 25%，4 个核心为 100%。

这意味着默认情况下，`top`在 Linux 上将无限循环显示为 ~100%，而 Windows 将其显示为 ~25%，这意味着完全相同。

您可以在使用+`top`运行时切换 IRIX 模式。这将使数字匹配。`Shift``i`

# svg - 我如何在 highcharts 中为图表的一部分添加不同的 dashStyle

> ID：14579126
> 
> 赞同：2
> 
> 时间：2013-01-29T09:04:51.280
> 
> 标签：svg, highcharts

在过去的两天里，我想指出我缺少一些数据，并且我希望它在同一张图上显示一条直线。我可以只为图表的一部分更改 dashStyle 吗？

![在此处输入图像描述](../Images/0456e1849f2f087310290c826bf3b8a8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:56:01.557

不，这是不可能的，您需要两个系列，第一行和第二行带有虚线样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-30T14:57:18.240

您可以将“区域”应用于系列：[http](http://api.highcharts.com/highcharts/plotOptions.series.zones) : //api.highcharts.com/highcharts/plotOptions.series.zones 只需使用 dashStyle 选项，如本示例[http://jsfiddle.net/gh/get/library/纯/highcharts/highcharts/tree/master/samples/highcharts/series/color-zones-dashstyle-dot/](http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/series/color-zones-dashstyle-dot/)

```
 zones: [{
        value: 8
    }, {
        dashStyle: 'dot'
    }] 
```

# makefile - 根据配置调用不同的编译器

> ID：14579127
> 
> 赞同：0
> 
> 时间：2013-01-29T09:04:53.883
> 
> 标签：makefile

我目前正在两台不同的机器上开发。在一个`gcc`映射到 gcc 4.6 并且有一个`gcc3`适合需要真正旧版本 gcc 的人。在另一台机器`gcc`上映射到 v3 gcc，并且有一个`gcc4`用于调用较新编译器的命令。

问题应该很明显 - 我想要两台机器都有一个 makefile，这基本上意味着`CC`根据是否`gcc4`可以找到来定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:24:06.580

作为一个快速破解，你可以在你的makefile中添加一个简单的基于shell的检查gcc4 bin。例如：

```
CC := $(shell gcc4 -dumpversion >/dev/null 2>&1; if [ "$$?" -eq 0 ]; then echo "gcc4"; else echo "gcc"; fi)
<...>
$(CC) -c myprogram.c -o myprogram.o
<...> 
```

但是，对于更成熟的项目，我建议考虑为此类任务设计的工具（[autoconf](http://www.gnu.org/software/autoconf/#introduction)）。

# php - 更改地址栏中显示的 URL

> ID：14579128
> 
> 赞同：-3
> 
> 时间：2013-01-29T09:05:02.403
> 
> 标签：php

> **可能重复：**
> [如何：用 PHP 重写 URL？](https://stackoverflow.com/questions/1039725/how-to-url-re-writing-in-php)
> [如何在每个页面的地址栏中保持相同的 url？](https://stackoverflow.com/questions/7088651/how-can-i-keep-the-same-url-in-the-address-bar-for-every-page)

我正在使用查询字符串将信息传递给页面，但不希望字符串出现在浏览器地址栏中。

www.mysite.co.uk?lp=catlist

已加载，但我只想显示地址栏

www.mysite.co.uk

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:07:41.547

使用 htaccess

```
Options +FollowSymLinks
RewriteEngine On

RewriteRule www.mysite.co.uk www.mysite.co.uk?lp=catlist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:07:43.067

请改用 POST 变量。这样地址栏中就不会出现任何数据。

# php - 是否可以在 JSF 中集成第三方应用程序？

> ID：14579141
> 
> 赞同：0
> 
> 时间：2013-01-29T09:05:51.640
> 
> 标签：php, jsf, jsf-2, web

我有一个用 php 开发的第三方聊天应用程序。那么，如果我想将该应用程序集成到我的 JSF 应用程序中，它会起作用吗？即网页的一部分将由 JSF 处理，而另一部分是聊天应用程序，将由 php 处理。

混合两种技术不是一个好主意。但是，如果有可能，那怎么做呢？

除了在 JSF 中从头开始开发聊天应用程序（如果别无选择，我可能不得不这样做）之外，其他建议是最受欢迎的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:00:58.507

不是特别是“第三方应用程序”，而是特别是“PHP”，是的，您可以在 Java EE 容器上运行 PHP 代码。到目前为止，有 2 个库可以在 Java EE 容器上读取/解析/执行 PHP 代码：[Quercus](http://quercus.caucho.com/)和[JSR223 + PHP-bridge](http://blogs.oracle.com/kchung/entry/native_php_in_glassfish_with)。

另一种方法是在 Java EE 容器前安装[Apache HTTPD](http://httpd.apache.org)。这在实际生产环境中也经常这样做，以便在 Java EE 容器前有一个“100% 正常运行时间”代理，以便可以显示“抱歉，此站点因维护而关闭，请返回几分钟”维护屏幕，当 Java EE 容器被关闭以进行重新部署时，甚至在有容器集群时执行高级负载平衡任务。你可以在那里毫不费力地运行 PHP。

无论您选择何种方式让 PHP 与 Java EE 一起运行，将其嵌入 JSF Web 应用程序中，都应使用`<iframe>`指向 PHP 应用程序 URL 的 HTML 元素。要共享一些会话数据，请确保它在同一个域上侦听，以便您可以共享 cookie。如有必要，将它放在同一个域上还将使 JavaScript 能够在 iframe 内容和父页面之间进行交互。

另一方面，如果使用正确的库，从头开始在 JSF2 中开发聊天应用程序并不难。[PrimeFaces](http://primefaces.org)甚至在其[`<p:push>`展示页面](http://www.primefaces.org/showcase/push/chat.jsf)上有一个“本土”聊天应用程序示例。它可能不是“先进的”，但它是一个不错的启动示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:19:37.460

您可以托管该应用程序并使用`<IFrame/>`标签将该应用程序包含到新的应用程序页面中

```
<iframe src="urlToYourChatApplicaton"></iframe> 
```

# jquery - 使用 jquery 选择相同颜色的元素

> ID：14579145
> 
> 赞同：1
> 
> 时间：2013-01-29T09:06:09.880
> 
> 标签：jquery

我想根据特定颜色查询网页。我目前正在使用以下页面[http://api.jquery.com/](http://api.jquery.com/)。现在假设我想选择所有蓝色的元素，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:08:03.290

您可以使用[filter()](http://api.jquery.com/filter/)过滤掉具有给定条件的匹配元素。

**[现场演示](http://jsfiddle.net/rajaadil/XDq98/)**

```
redColored = $('#parentid').children().filter(function(){ 
    if(this.style.color == 'red')
      return $(this);
}) 
```

# javascript - 如何使 img 也可拖动和换行

> ID：14579152
> 
> 赞同：0
> 
> 时间：2013-01-29T09:06:33.740
> 
> 标签：javascript, jquery

下面的代码尝试使 img 可拖动（关于[this](https://stackoverflow.com/a/10965447/1775888)），它可以工作，但我不知道如何让 img 移动所有 wrap`drag_wp`一起移动。[http://jsfiddle.net/cAeKG/8/](http://jsfiddle.net/cAeKG/8/)有什么建议吗？

js

```
function enableDraggin(el){
    var dragging = dragging || false, x, y, ox, oy, current;
    el.onmousedown = function(e){
        e.preventDefault();
        current = e.target;
        dragging = true;
        x = e.clientX;
        y = e.clientY;
        ox = current.offsetLeft;
        oy = current.offsetTop;
        window.onmousemove = function(e) {
            if (dragging == true) {
                var sx = e.clientX - x + ox,
                sy = e.clientY - y + oy;
                current.style.left = sx + "px";
                current.style.top = sy + "px";
                return false;
            }
        };
        window.onmouseup = function(e) {
            dragging && (dragging = false);
        };
    };
};
var el = $('.drag_wp');
for(var i = 0; i < el.length; i++){
    enableDragging(el[i]);
}; 
```

html & css

```
<div class="drag_wp">
    <img src="..." class="drag_el">
    <div></div>
    ....// other div
</div>
.drag_wp{
    position: absolute;
    width: auto;
    height: auto;
    background:red;
}
.drag_el{
    position: absolute;
    width: 200px;
    height: auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:17:29.663

```
function enableDraggin(el){
    var dragging = dragging || false, x, y, ox, oy, current;
    el.onmousedown = function(e){
        e.preventDefault();
        current = e.target;
        //just add this
        if(!$(current).hasClass(".drag_wp"))
             current = $(current).closest(".drag_wp")[0];
        //just add this
        dragging = true;
        x = e.clientX;
        y = e.clientY;
        ox = current.offsetLeft;
        oy = current.offsetTop;
        window.onmousemove = function(e) {
            if (dragging == true) {
                var sx = e.clientX - x + ox,
                sy = e.clientY - y + oy;
                current.style.left = sx + "px";
                current.style.top = sy + "px";
                return false;
            }
        };
        window.onmouseup = function(e) {
            dragging && (dragging = false);
        };
    };
}; 
```

`e.target`返回被点击的元素（大多数情况下为您的 HTML 的图像）。如果它没有类`.drag_wp`，只需找到与该类最近的父类并将其用作当前类。

演示：http: [//jsfiddle.net/fTeXL/](http://jsfiddle.net/fTeXL/)

此外，由于您已经在使用 jquery，您可能会发现使用 jQuery UI 中的相应插件会更好：http: [//jqueryui.com/draggable/](http://jqueryui.com/draggable/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:21:24.647

我对你的代码做了一些修改：

```
function enableDragging(el) {
    var dragging = dragging || false,
        x, y, ox, oy, current;
    el.onmousedown = function (e) {
        e.preventDefault();
        current = e.target.parentNode; // <--- current should be wrapper, not image
        dragging = true;
        x = e.clientX;
        y = e.clientY;
        ox = current.offsetLeft;
        oy = current.offsetTop;
        window.onmousemove = function (e) {
            if (dragging == true) {
                var sx = e.clientX - x + ox,
                    sy = e.clientY - y + oy;
                current.style.left = sx + "px";
                current.style.top = sy + "px";
                return false;
            }
        };
        window.onmouseup = function (e) {
            dragging && (dragging = false);
        };
    };
}; 
```

[http://jsfiddle.net/cAeKG/9/](http://jsfiddle.net/cAeKG/9/)

# sqlite - 我可以从字节数组中获取可绘制对象吗？

> ID：14579160
> 
> 赞同：0
> 
> 时间：2013-01-29T09:07:15.690
> 
> 标签：sqlite, blob

**这就是我成功获取应用程序的本机图标并首先显示它并最终将其作为 Blob 发送到数据库的方式：**

```
Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("application_name");
            builder.setMessage("Vous avez cliqué sur : " + resolveInfo.activityInfo.name);
            Drawable iconApp;
            iconApp=resolveInfo.activityInfo.loadIcon(getPackageManager());

            BitmapDrawable bmd = (BitmapDrawable) iconApp;
            Bitmap bm = bmd.getBitmap();
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            bm.compress(Bitmap.CompressFormat.JPEG, 100, stream);
            byte[] bitmapdata = stream.toByteArray();
            SQLiteAdapter mySQLiteAdapter =new SQLiteAdapter(this.getApplicationContext());
            mySQLiteAdapter.openToWrite();
            String s=resolveInfo.activityInfo.name;
            mySQLiteAdapter.insertphoto(bitmapdata);
            mySQLiteAdapter.insert(s); 
```

**我正试图找回它：**像这样：

```
SQLiteAdapter mySQLiteAdapter =new SQLiteAdapter(getApplicationContext());
                     mySQLiteAdapter.openToRead();
                     byte[] buffer = mySQLiteAdapter.queueAllphoto();
                     mySQLiteAdapter.close();

                     Drawable image = null;
                     image =  new BitmapDrawable(BitmapFactory.decodeByteArray(buffer, 0, buffer.length));
                     Bitmap b= convertByteArrayToBitmap(buffer);

                     //Bitmap bmp = BitmapFactory.decodeByteArray(content,0,content.length);

                     //image =  new BitmapDrawable(BitmapFactory.decodeByteArray(content, 0, content.length));
                     Builder builder = new AlertDialog.Builder(getBaseContext());
                     builder.setTitle("blob");
                     builder.setIcon(image);
                     builder.show(); 
```

最终这里是我的方法队列 SQliteAdapter 的所有照片部分：

```
public byte[] queueAllphoto(){
        String[] columns = new String[]{KEY_CONTENT_photo};
        Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE_photo, columns, 
                null, null, null, null, null);
        byte[] result = null; 

        int index_CONTENT = cursor.getColumnIndex(KEY_CONTENT_photo);
        for(cursor.moveToFirst(); !(cursor.isAfterLast()); cursor.moveToNext()){
            result = cursor.getBlob(index_CONTENT) ;
        }

        return result;
    } 
```

该方法返回一个字节数组，这是我想通过在 AlerDialogue 中显示每个 blob 来处理的字节数组！我正在努力将这个字节数组转换为可绘制对象，因为我正在考虑在 Builder 中使用它（AlertDialogue ) 使用方法 SetIcon(Drawable)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:45:57.317

通过更改返回类型（位图而不是字节数组）并添加 bitmap=BitmapFactory.decodeByteArray(result, 0, result.length) 我现在可以使用位图来更改 par 示例图像视图，如下所示：

```
 Bitmap bm = null;
                 SQLiteAdapter mySQLiteAdapter =new SQLiteAdapter(getApplicationContext());
                 mySQLiteAdapter.openToRead();
                 bm=mySQLiteAdapter.queueAllphoto();
                 mySQLiteAdapter.close();
                 imageview.setImageBitmap(bm); 
```

在那里你得到了方法queueAllphoto（）：

公共位图 queueAllphoto(){

```
 Bitmap bitmap;

    String[] columns = new String[]{KEY_CONTENT_photo};
    Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE_photo, columns, 
            null, null, null, null, null);
    byte[] result = null; 

    int index_CONTENT = cursor.getColumnIndex(KEY_CONTENT_photo);
    for(cursor.moveToFirst(); !(cursor.isAfterLast()); cursor.moveToNext()){
        result = cursor.getBlob(index_CONTENT) ;

    }

    bitmap=BitmapFactory.decodeByteArray(result, 0, result.length);
    return bitmap;
} 
```

# shell - 选择性抑制输出保留退出代码

> ID：14579163
> 
> 赞同：0
> 
> 时间：2013-01-29T09:07:28.170
> 
> 标签：shell, error-handling, cron, grep

我有一个`foo`程序可以

1.  成功;
2.  打印`Failure`失败；
3.  或打印其他内容并失败。

我有一个`foo && bar`由 cron 运行的简短脚本。情况 2 几乎总是如此，所以我的邮箱被来自 cron 的“失败”消息淹没了。

我想停止收到“失败”通知，保留成功通知和其他消息失败的通知。

我试图编写一个`wrap_foo`行为类似于`foo`但不打印的 bash 函数`Failure`。像这样的东西：

```
wrap_foo() {
    foo | grep -vF "Failure"
}
wrap_foo && bar 
```

但它总是失败，所以`bar`如果`foo`成功则不会执行。

一种方法似乎是平等测试，`$(foo)`但我想尽可能避免它，因为输出可能很长。

我应该在那里使用`mktemp`和重定向`foo`输出吗？如果没有更简单的方法，如何`foo`在删除临时文件后保存故障状态并恢复它？

这是一个测试套件：

```
foo_failed() {
        echo Failed
        false
}

foo_false() {
        echo Error
        false
}

foo_true() {
        echo Something
        true
}

bar() {
        echo bar
        true
}

wrap_foo()
{
        $1 | grep -vF Failed
}

run() {
        wrap_foo $1 && bar
}

echo should not write anything
run foo_failed
echo should write Error
run foo_false
echo should write Something then bar
run foo_true 
```

这是一个带有临时文件的解决方案：

```
wrap_foo()
{
        T=$(mktemp)
        $1 >$T
        X=$?
        grep -vF Failed $T
        rm $T
        return $X
} 
```

能不能短一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:32:51.363

使用您的测试套件，我将`wrap_foo()`功能修改为以下内容，这似乎可行：

```
wrap_foo()
{
        foooutput=$($1)
        foostatus="$?"
        echo "$foooutput" | grep -vF Failed
        return "$foostatus"
} 
```

输出：

```
should not write anything
should write Error
Error
should write Something then bar
Something
bar 
```

它只是有点短，但不涉及临时文件。

# javascript - 实例创建

> ID：14579165
> 
> 赞同：4
> 
> 时间：2013-01-29T09:07:34.007
> 
> 标签：javascript

```
var Vehicle = function Vehicle() {
 // ...
}

var vehicle = new Vehicle(); 
```

当 new Vehicle() 被调用时，JavaScript 做了四件事：

1.  它创建一个新对象。
2.  它将对象的构造函数属性设置为 Vehicle。
3.  它设置对象以委托给 Vehicle.prototype。
4.  它在新对象的上下文中调用 Vehicle()。

第三点说明了什么？这是否意味着新的对象构造函数原型设置为function.prototype？代表在这里是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:11:26.413

代表着：

```
vehicle.constructor.prototype === Vehicle.prototype; // true 
```

因此，可用的方法`Vehicle.prototype`将可用于`vehicle`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:12:44.480

您只需将**delegate**视为**reference**，每个对象都有一个`[[Prototype]]`内部属性，并且它引用其**构造函数的 prorotype**，因此：

```
Object.getPrototypeOf(vehicle) === Vehicle.prototype; // always true 
```

这是关于操作员在做什么的伪代码`new`：

```
function fakeNew(constructor) {
    var instance = {};
    instance.__proto__ = constructor.prototype;
    instance.constructor = constructor;
    constructor.apply(instance, [].slice.call(arguments, 1));
    return instance;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:20:47.127

```
var Vehicle = function Vehicle() {
    this.engine = {running:false};
}
Vehicle.prototype.startEngine = function () {
    this.engine.running = true;
};

var vehicle1 = new Vehicle();
vehicle.startEngine();
// vehicle.engine.running === true
var vehicle2 = new Vehicle();
vehicle2.startEngine = function () {
    throw "err";
};
vehicle2.startEngine();
// Error: "err" 
```

Javascript 是基于原型的，因此每个对象都继承自另一个对象（原型）。当你在一个对象上调用一个属性时，它首先在它自己的范围内搜索该属性，如果找不到，就在属性链中向上。

# git - IntelliJ IDEA 执行 git show 的最佳实践

> ID：14579169
> 
> 赞同：0
> 
> 时间：2013-01-29T09:07:46.883
> 
> 标签：git, intellij-idea

我想在不切换到该分支的情况下获取其他分支中某些特定文件的版本。在编码时，`vim`我可以输入类似`:!git show some_other_branch:file_name`. 那么 IDEA 呢，执行相同任务的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:46:38.567

您可以右键单击文件中的某处，选择`Git->Compare with Branch...`然后选择您想要的分支。

# phantomjs - 将视口大小作为命令行参数提供给 PhantomJS

> ID：14579171
> 
> 赞同：5
> 
> 时间：2013-01-29T09:07:57.510
> 
> 标签：phantomjs

有没有办法将 PhantomJS 的视口大小指定为命令行参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T15:46:49.967

你可以试试这个：

```
var args = require('system').args,
    viewportSize = {width: 1280, height: 1024},
    page = require('webpage').create();

if (args.length >= 1) {
  args.forEach(function(arg, i) {
    if (arg.match(/^[0-9]+x[0-9]+$/)) {
      var viewportParts = arg.split('x');
      viewportSize = {width: viewportParts[0], height: viewportParts[1]};
    }
  });
}
page.viewportSize = viewportSize; 
```

然后运行你的脚本，在脚本名称后面加上 320x480，例如……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T17:43:29.907

当然。您必须使用 system.args 自己处理命令行参数，查找您的自定义选项`viewport`或您决定调用它的任何内容并提取其值。然后使用提供的参数值将 page.viewportSize 设置为适当的值。

# logging - Log4Net 将记录器和附加器相乘

> ID：14579172
> 
> 赞同：0
> 
> 时间：2013-01-29T09:07:56.740
> 
> 标签：logging, log4net, appender

目前我正在创建一个日志函数。我实现了两个 ILog 对象，例如 logger1 和 logger2。我还创建了两个继承 AppenderSkeleton 类的自定义附加程序（appender1 和 appender2）。这些附加程序在 Append 方法中创建正确的字符串并触发事件。

我遇到的问题是：

应用程序日志例如：

```
logger1.Info("test message logger 1");
logger2.Info("test message logger 2"); 
```

当我只创建并激活 logger 2 时，logger2 的 Append 方法也接收到 logger1 的日志行。如何解决这个问题呢？

我认为这是由于自定义附加程序未连接到特定的日志对象。

这个问题的最佳实现是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:07:50.273

您必须使用日志管理器来喜欢：

```
ILog logger = LogManager.GetLogger("MyLogger1"); 
```

然后您可以在配置文件中分别配置每个记录器。

[Log4Net 配置](http://logging.apache.org/log4net/release/manual/configuration.html)转到配置语法以查看如何仅记录您的一个记录器。

# android - SQLite onUpgrade()

> ID：14579175
> 
> 赞同：3
> 
> 时间：2013-01-29T09:08:02.370
> 
> 标签：android, sqlite, android-activity

我在 android 的 SQLite 数据库中有问题。

在我的 SQLiteOpenHelper 类的 onCreate(SQLiteDatabase db) 方法中，我正在创建表。现在我在 playstore 上传了这个应用程序。现在我认为我需要在这些表中再添加一个列。

如果我在 playstore 中更新应用程序（在 onCreate() 方法中使用新查询），下次将调用 OnUpgrade() 方法，因此不会再次创建表。

所以请告诉我有没有办法在重新安装或更新应用程序时删除 SQLite 数据库。或者在重新安装之前删除整个应用程序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T09:17:58.933

**1.关于onCreate()和onUpdate()**

每当新安装应用程序时都会调用 onCreate(..)。每当应用程序升级和启动并且数据库版本不同时，都会调用 onUpgrade。

您需要一个构造函数，例如：

**2.增加db版本**

```
MyOpenHelper(Context context) {
super(context, "dbname", null, 2);
} 
```

重要提示：仅增加应用程序版本不足以调用 onUpgrade。

**3\. 不要忘记你的新用户！**

不要忘记添加

```
database.execSQL(DATABASE_CREATE_color); 
```

您的 onCreate() 方法以及新安装的应用程序将缺少该表。

**4.如何处理多个数据库随时间的变化**

当您有连续的应用程序升级时，其中几个有数据库升级，您要确保检查 oldVersion：

```
onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
   switch(oldVersion) {
   case 1:
       db.execSQL(DATABASE_CREATE_color);
       // we want both updates, so no break statement here...
   case 2:
       db.execSQL(DATABASE_CREATE_someothertable); 
   }
} 
```

这样，当用户从版本 1 升级到版本 3 时，他们会同时获得两个更新。当用户从第 2 版升级到第 3 版时，他们只会获得第 3 版更新...毕竟，您不能指望 100% 的用户群在每次发布更新时都进行升级。有时他们会跳过更新或 12 :)

希望这是有道理的。

**5\. 在开发过程中控制修订号**

最后……打电话

```
adb uninstall <yourpackagename> 
```

完全卸载应用程序。当您再次安装时，您一定会点击 onCreate 方法，这使您不必不断将数据库版本增加到平流层......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T09:12:17.273

根据我的理解，您只需添加一列。
你可以试试

```
Alter table 
```

参考 [http://www.sqlite.org/lang_altertable.html](http://www.sqlite.org/lang_altertable.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:19:30.820

这可能不是最好的解决方案，但我已经构建了我的代码，通过选择我正在寻找的列来比较表模式。

如果它们不存在，则会出现异常，然后我删除/重新创建表。下次应用程序运行时，列就在那里，因此选择工作正常。不确定它的理想，但它有效，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T09:16:47.487

[onCreate(SQLiteDatabase db)](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onCreate%28android.database.sqlite.SQLiteDatabase%29)仅在第一次创建数据库时调用。如果要处理对现有表的升级，则应使用[onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)。专门处理从 oldVersion 到 newVersion 的迁移路径

# c# - 将字符串视为 C# 中的代码

> ID：14579177
> 
> 赞同：0
> 
> 时间：2013-01-29T09:08:03.273
> 
> 标签：c#, string, code-generation

我想要一个方法、注释或其他可以让我将字符串视为 C# 代码的东西。

我阅读了有关 CodeDom、Reflection 和 T4 模板的信息，但这不是我想要的。

我需要的是更简单的，我希望。我不想在运行时生成代码。

这是一个说明我想要什么的例子。我正在使用 VS2010、Entity Framework 5 和 Code First 方法。

我对每种实体类型都有一个 Insert 方法。以下是插入`Cliente`(Costumer) 的方法的代码。如果 a`Cliente`存在于数据库中，则更新而不是插入：

```
 public int InsertarCliente(Cliente cliente)
    {
        int id = cliente.ClienteId;

        try
        {
            if (id != -1)
            {
                var clt = db.Clientes.Find(id);
                clt.Nombre = cliente.Nombre;
                clt.Apellido1 = cliente.Apellido1;
                clt.Apellido2 = cliente.Apellido2;
                // more similar statements
            }
            else
                db.Clientes.Add(cliente);

            db.SaveChanges();
            return cliente.ClienteId;
        }
        catch (DbEntityValidationException exc)
        {
            // code
        }
    } 
```

我试图使用 CodeDom 创建一个适用于任何实体类型的通用方法。该方法不起作用，我知道为什么：CodeDom 不会编译和运行任意代码，它需要额外的命名空间、using 语句、类、方法等。该方法不起作用，这里是澄清我的代码试图做：

```
 public int Insertar<TEntity>(TEntity entidad, string[] atributos)
            where TEntity : class
    {
        string nombreEntidad = entidad.GetType().Name;
        string entidadId = nombreEntidad + "Id";
        string tabla = nombreEntidad + "s";

        int id = Convert.ToInt32(
             entidad.GetType().GetProperty(entidadId).GetValue(entidad, null));

        try
        {
            CodeDomProvider codeProvider = CodeDomProvider.CreateProvider("CSharp");
            CompilerParameters cp = new CompilerParameters();
            cp.GenerateExecutable = false;
            cp.GenerateInMemory = true;
            CompilerResults cr;
            string codigo;

            if (id != -1)
            {
                codigo = "var entidadAlmacenada = db." + tabla + ".Find(id);";
                cr = codeProvider.CompileAssemblyFromSource(cp, codigo);
                CompilerResults cr2;
                string codigoActualizador;

                foreach (string atr in atributos)
                {
                    codigoActualizador =
                        "entidadAlmacenada." + atr + " = entidad." + atr + ";";
                    cr2 = codeProvider.CompileAssemblyFromSource(
                              cp, codigoActualizador);
                }                        
            }
            else
            {
                codigo = "db." + tabla + ".Add(entidad);";
                cr = codeProvider.CompileAssemblyFromSource(cp, codigo);
            }

            db.SaveChanges();
            return Convert.ToInt32(
                entidad.GetType().GetProperty(entidadId).GetValue(entidad, null));
        }
        catch (DbEntityValidationException exc)
        {
            // code
        }
    } 
```

我想要一种将表示代码的字符串转换（内联）为它表示的代码的方法。

就像是：

```
 string code = "line of code";
    code.toCode(); // or
    toCode(code); // or
    [ToCode]
    code; 
```

对不起，如果我写得太多，但这次我想清楚一点。

我需要的是在编译时间之前将字符串“包含代码”替换为代码。没有运行时编译或执行。

有没有办法做这样的事情？

TIA

编辑：

上面的例子只是一个例子。但是在任何情况下我都想要“字符串到代码的转换”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:11:39.287

看看[CSScript](http://www.csscript.net/)

> CS-Script 是一个基于 CLR（公共语言运行时）的脚本系统，它使用符合 ECMA 标准的 C# 作为编程语言。CS-Script 目前针对 Microsoft 实现的 CLR (.NET 2.0/3.0/3.5/4.0/4.5)，完全支持 Mono。

PS。从您的示例来看，您可能应该将时间花在编写通用数据库存储库上，而不是在运行时生成代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:26:09.013

我有一种感觉，你正在使用动态代码生成错误的树。

就在这个周末，我做了一些非常相似的事情。它将表从 ODBC 传输到 EF。

抱歉，我没有时间制作这个更紧凑的示例。虽然它是通用的，但我认为它与您所要求的非常相似：

```
using Accounting.Domain.Concrete;
using Accounting.Domain.Entities;
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Data.Entity.Design.PluralizationServices;
using System.Data.Entity.Migrations;
using System.Data.Odbc;
using System.Globalization;
using System.Linq;

namespace QuickBooks.Services
{
    public class QuickBooksSynchService
    {
        string qodbcConnectionString = @"DSN=QuickBooks Data;SERVER=QODBC;OptimizerDBFolder=%UserProfile%\QODBC Driver for QuickBooks\Optimizer;OptimizerAllowDirtyReads=N;SyncFromOtherTables=Y;IAppReadOnly=Y";
        PluralizationService pluralizationService = PluralizationService.CreateService(CultureInfo.CurrentCulture);
        readonly int companyID;

        public QuickBooksSynchService(string companyName)
        {
            // Make sure the name of QODBC company is same as passed in
            using (var con = new OdbcConnection(qodbcConnectionString))
            using (var cmd = new OdbcCommand("select top 1 CompanyName from Company", con))
            {
                con.Open();
                string currentCompany = (string)cmd.ExecuteScalar();
                if (companyName != currentCompany)
                {
                    throw new Exception("Wrong company - expecting " + companyName + ", got " + currentCompany);
                }
            }

            // Get the company ID using the name passed in (row with matching name must exist)
            using (var repo = new AccountingRepository(new AccountingContext(), true))
            {
                this.companyID = repo.CompanyFileByName(companyName).CompanyId;
            }
        }

        public IEnumerable<T> Extract<T>() where T : new()
        {
            using (var con = new OdbcConnection(qodbcConnectionString))
            using (var cmd = new OdbcCommand("select * from " + typeof(T).Name, con))
            {
                con.Open();
                var reader = cmd.ExecuteReader();
                while (reader.Read())
                {
                    var t = new T();

                    // Set half of the primary key
                    typeof(Customer).GetProperty("CompanyId").SetValue(t, this.companyID, null);

                    // Initialize all DateTime fields
                    foreach (var datePI in from p in typeof(Customer).GetProperties()
                                           where p.PropertyType == typeof(DateTime)
                                           select p)
                    {
                        datePI.SetValue(t, new DateTime(1900, 1, 1), null);
                    }

                    // Auto-map the fields
                    foreach (var colName in from c in reader.GetSchemaTable().AsEnumerable()
                                            select c.Field<string>("ColumnName"))
                    {
                        object colValue = reader[colName];
                        if ((colValue != DBNull.Value) && (colValue != null))
                        {
                            typeof(Customer).GetProperty(colName).SetValue(t, colValue, null);
                        }
                    }

                    yield return t;
                }
            }
        }

        public void Load<T>(IEnumerable<T> ts, bool save) where T : class
        {
            using (var context = new AccountingContext())
            {
                var dbSet = context
                                .GetType()
                                .GetProperty(this.pluralizationService.Pluralize(typeof(T).Name))
                                .GetValue(context, null) as DbSet<T>;

                if (dbSet == null)
                    throw new Exception("could not cast to DbSet<T> for T = " + typeof(T).Name);

                foreach (var t in ts)
                {
                    dbSet.AddOrUpdate(t);
                }

                if (save)
                {
                    context.SaveChanges();
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:11:33.967

尝试使用允许您使用 Roslyn API 编译器的新 .net 框架的功能。

您可能会从这个使用 Roslyn 的 Read-Eval-Print Loop 示例中获得所需的代码示例：

[http://gissolved.blogspot.ro/2011/12/c-repl.html](http://gissolved.blogspot.ro/2011/12/c-repl.html) [http://blogs.msdn.com/b/visualstudio/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp .aspx](http://blogs.msdn.com/b/visualstudio/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T09:14:21.687

我个人只会实现一个通用存储库模式（谷歌和 asp.net mvc 网站上有很多结果），它公开一个 IQueryable 集合，所以你可以直接查询 IQueryable 集合

类似于本教程 [http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an- asp-net-mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T09:17:36.870

实现您想要做的事情的另一种（恕我直言更可取）方法是使用`db.Set<TEntity>().Find(id)`etc

# c# - 在通用列表中选择超过 1 个对象

> ID：14579184
> 
> 赞同：3
> 
> 时间：2013-01-29T09:08:31.757
> 
> 标签：c#, linq

想象一下，我们有一个具有一些属性的汽车类，其中之一是发动机排量。

我将所有汽车添加到通用列表中。如何使用 linq 使用标准选择超过 1 个对象？

尝试使用 select many 但无法运行：

```
var fastcars = mycars.SelectMany(car => car.Engine >= 2000); 
```

ps：通常我可以选择一个对象；例如：

```
var selectedcar = mycars.First(car => car.Make == "Mercedes"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T09:09:56.290

使用简单的`Where`子句。

```
var selectedcars = mycars.Where(car => car.Make == "Mercedes"); 
```

如果您想乘坐多辆汽车，那么您可以使用`Take`

```
var selectedcars = mycars.Where(car => car.Make == "Mercedes").Take(2); 
```

您可以分别添加`ToList`或`ToArray`获取对象列表或数组。就像是

```
var selectedcarsList = mycars.Where(car => car.Make == "Mercedes").Take(2).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T09:09:40.427

已编辑（最初误读）：

尝试：

```
var cars = mycars.Where(car => car.Make == "Mercedes"); 
```

您可能会发现[101 个 LINQ 示例](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)有助于您了解更多有关 LINQ 的信息。

# php - 从父对象获取属性值的最有效方法是什么？

> ID：14579188
> 
> 赞同：0
> 
> 时间：2013-01-29T09:09:01.103
> 
> 标签：php, class, inheritance

我有一个单实例父类，它包含“本地全局属性”，每个子类都应该有权访问（也可以在更改时）

我可以想到两种方法来确保来自实例化父级的子级继承父级值：

1）使用静态变量

```
class p
{
public static $var = 0;
}

class c extends p
{
function foo()
{
echo parent::$var;
}
}

$p = new p;
$c = new c;

$c->foo(); //echoes 0
p::$var = 2;
$c->foo(); //echoes 2 
```

2）使用传递的对象

```
 class p
    {
          public $var = 0;
    }

    class c extends p
    {
           function update_var(p $p)
      {
            $this->var = $p->var;
      }

    function foo()
    {
    echo $this->var;
    }
    }

    $p = new p;
    $c = new c;

    $c->foo(); //echoes 0
    $p->var = 2;
$c->update_var($p);
    $c->foo(); //echoes 2 
```

在我看来，静态解决方案是迄今为止最优雅的解决方案，但可能存在一些我没有看到的缺点。您认为哪种解决方案是最好的，还是有第三种更好的选择？

（另请注意，在此示例中 $var 是公开的，以使此示例更易于说明，但最终会受到保护）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:16:03.550

> 每个子类都应该有权访问（也可以在更改时）

这意味着您要使用静态变量，因为这正是它们的设计目的。

另一种选择是使用常量，但如果它们完全适合您的课程，那`static`就是要走的路

编辑：或者，如果您需要更复杂的东西，您可以使用@true 建议的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:21:51.930

也许最好有不同的对象作为这些变量的存储，可以注入到每个对象中？

更新变量的想法似乎很疯狂。

如果你需要更少的代码，你可以用静态变量来做到这一点，但我会做一些配置容器，它将被注入到每个类中（阅读依赖注入：[http](http://en.wikipedia.org/wiki/Dependency_injection) ://en.wikipedia.org/wiki/Dependency_injection ）

```
class Config
{
    protected $vars;

    public function __get($name)
    {
        if (isset($this->vars[$name])) {
            return $this->$name;
        }
    }

    public function __set($name, $value)
    {
        return $this->vars[$name] = $value;
    }

    public function toArray()
    {
        return $this->vars;
    }
}

class Component 
{
    protected $config;

    public function __construct(Config $config = null)
    {
        $this->config = $config;
    }

    public function getConfig()
    {
        return $this->config;
    }
}

// Create config instance
$config = new Config();

// Store variable
$config->testVar = 'test value';

// Create component and inject config
$component = new Component($config);

// Save another one variable in config
$config->test2Var = 'test 2 value';

// Create one more component and inject config
$component2  = new Component($config);

// Create one more varible
$config->someMoreVar = 'another one variable';

// Check configs in different components, values will be same (because config object is not cloned, just link to this object is saved in Component's $config property):
var_dump($component->getConfig()->toArray());
var_dump($component2->getConfig()->toArray()); 
```

PS我没有测试过这段代码，只是为了展示一个想法

# android - Android EditText 总是从底部填充

> ID：14579191
> 
> 赞同：8
> 
> 时间：2013-01-29T09:09:04.553
> 
> 标签：android, android-edittext

这是我的 ListView XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+list/list_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/defaultbg"
        android:drawSelectorOnTop="false" />

    <ImageButton
        android:id="@+list/filter_button"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:background="@android:color/transparent"
        android:contentDescription="@string/SmallLogo"
        android:scaleType="fitXY"
        android:src="@drawable/filter" />

    <!-- empty view -->

    <TextView
        android:id="@+list/empty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="@drawable/defaultbg"
        android:gravity="center"
        android:text="@string/whos_around_empty_text"
        android:textAppearance="@android:style/TextAppearance.Medium"
        android:textColor="@android:color/white"
        android:textStyle="bold" />

    <EditText
        android:id="@+list/filter"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:hint="@string/search"                
        android:visibility="visible"/>
</RelativeLayout> 
```

EditText 位于视图的底部，但由于某种原因它并不紧贴底部。

仔细检查时，我发现布局正好在底部 - 但内部的白色背景并没有覆盖整个布局（有点像 ImageView 大小大于布局大小并且您使用 scaleType 时）..

对我来说，EditText 将紧贴底部真的很重要......有什么想法吗？？

**更新：添加屏幕截图：**

![截屏](../Images/c18f17d174074d22fb3de4bf8df14589.png)

如您所见 - editText 白色背景的底部未与屏幕底部对齐...尽管布局本身已对齐

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T09:52:48.807

在 Android 中，所有小部件都有一些来自其他视图的填充和边距，以便更好地查看。每个小部件都有 4 dp 边距和 8 dp 填充。如果您不希望这样，您可以创建自定义视图。

现在，尝试在底部使用负像素的边距。

```
android:layout_marginBottom="-4dp" 
```

在我的布局上运行良好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:32:29.893

试试这个，我做过类似的屏幕。

![在此处输入图像描述](../Images/4d2eb52c7884f4ae37184fa4cbc67d6e.png)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"

    android:text="@string/whos_around_empty_text"
    android:background="@drawable/defaultbg"
    android:textAppearance="@android:style/TextAppearance.Medium"
    android:textColor="@android:color/white"
    android:textStyle="bold" />

<RelativeLayout
    android:id="@id/relative"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >

    <ImageButton
        android:id="@+list/filter_button"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_alignParentRight="true"
        android:background="@android:color/transparent"
        android:contentDescription="Smalllogo"
        android:scaleType="fitXY"
        android:src="@drawable/filter" />

    <!-- empty view -->

    <EditText
        android:id="@+list/filter"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:hint="Search"
        android:visibility="visible" />
</RelativeLayout>

<ListView
    android:id="@+id/list_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/defaultbg"
    android:layout_above="@id/relative"
    android:layout_below="@id/empty"
    android:drawSelectorOnTop="false" /> 
```

# php - PHPUnit 实时登录失败/错误

> ID：14579193
> 
> 赞同：5
> 
> 时间：2013-01-29T09:09:15.823
> 
> 标签：php, unit-testing, phpunit

我最近一直在运行几千个 phpunit 测试。我使用`--process-isolation`选项，因此完成测试需要大约 40 分钟。

有时在积极重构之后，很多测试开始失败（感谢上帝，我有测试！）。如果测试在测试套件中间失败，那么我必须再等 20 分钟才能看到它是什么测试以及它的消息。

`--stop-on-failure`如果不中断整个过程，我会使用。基本上我正在寻找`--log-on-failure`选择。

我正在寻找的是某种方式来查看测试失败后的失败/错误消息，而不是在所有其他测试完成后。但不应中断其他测试执行的整个过程。记录到文件也足够了。

我会很感激你的建议。

编辑：我很高兴看到您的建议，我如何总体上改进我的测试，我将尝试遵循它们，但是我想找到解决我确切问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:13:19.057

即使你忽略了它，你也在寻找`--stop-on-failure`.

因为当您看到错误在哪里时，您可以编写修复程序。然后你需要再次运行测试。

如果您只登录失败，您还不能再次运行测试，因为假设 10 秒后第一个失败可见并在另一分钟内修复。但是，您仍然需要等待大约。38 分钟，直到您可以运行测试。

您遇到的另一个问题是您的测试花费的时间太长。您需要更快地获得它们。您使用`--process-isolation`的最终表明您进行了集成测试。将它们与您的单元测试分开，它们通常需要更长的时间。

然后，您可以单独并连续地运行集成测试（始终在循环中），并在保存文件时运行单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:12:39.180

很高兴你编写了所有这些测试。正如您所说，当您开始一项大型重构任务时，它们可以迅速证明自己的价值！但是 40 分钟听起来像是一组非常慢的测试，即使是几千个测试——我在大约 10 秒内跑了几百个。也许你有一些特别慢的测试？

如果您的系统适合这样做，则可能值得将它们分成组，以便您可以将其设置为仅运行与正在更改的代码相关的测试。PHPUnit 支持对测试进行分组，并在命令行上指定要运行的组。

如果您的大多数测试都非常快，但您有少数非常慢的测试占用了大部分时间，这可能是一种特别有效的策略。如果你能让它跳过一些不相关的非常慢的测试，那将会有很大的不同。

此外，这种将测试分组的策略还允许您`--stop-on-failure`为每个组使用，同时仍然能够运行其他组中的所有测试。

有关分组测试的更多信息，请参阅[PHPUnit 手册](http://www.phpunit.de/manual/current/en/appendixes.annotations.html#appendixes.annotations.group)。

希望有帮助。

# objective-c - 如何为整个项目禁用新的 Xcode 4.6 警告？“……用作前一个参数的名称，而不是作为选择器的一部分”

> ID：14579197
> 
> 赞同：4
> 
> 时间：2013-01-29T09:09:22.907
> 
> 标签：objective-c, xcode, xcode4.6

我知道如何通过在 : 之前插入空格来修复它，但是升级后我在一堆文件中知道它，这对我来说不是重要问题。我正在构建设置中搜索它，但似乎没有一个解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T09:38:04.207

所以我为单个文件找到了这个：

```
#pragma clang diagnostic ignored "-Wmissing-selector-name” 
```

我从这里得到的名字：[https ://github.com/eerolanguage/clang-trunk/blob/master/test/SemaObjC/warning-missing-selector-name.m](https://github.com/eerolanguage/clang-trunk/blob/master/test/SemaObjC/warning-missing-selector-name.m)

所以我把它放在预编译的头文件“Project.pch”中，它适用于我的整个项目，如果可能的话，我对更好的解决方案感兴趣，例如用户定义的构建设置。我试过了，但没有找到有效的语法。

# php - CodeIgniter 中的异常处理

> ID：14579212
> 
> 赞同：3
> 
> 时间：2013-01-29T09:10:05.510
> 
> 标签：php, codeigniter, exception-handling, codeigniter-2

最近，我正在学习`PHP`with`CodeIgniter`框架。`db_debug = TRUE`我正在研究异常处理，但让我感到惊讶的是，在`database.php`设置中异常处理不适用于数据库错误。

如果`db_debug = FALSE`，我可以抛出并捕获错误，但是当它是 时`TRUE`，它会直接显示带有数据库错误的页面。

这是我的代码：

在`Model`：

```
 $this->db->insert('tbl_name',$data);
    if (strpos($this->db->_error_message(),'constraint_name') !== FALSE)
    {
        throw new UniqueConstraintException($this->db->_error_message()); // UniqueConstraintException is customized excpetion
    } 
```

在`Controller`：

```
 try
        {
             //calling the method from model having above code
        }
        catch(UniqueConstraintException $ex)
        {
              echo "There is already item with same item name";
        }
        catch(Exception $ex)
        {
             echo $ex->getMessage();
        } 
```

即使有`db_debug = TRUE`设置，我可以对数据库错误进行异常处理吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T10:11:22.417

CodeIgniter 的人对 oop 一无所知。当您查看代码时，您会在 DB 驱动程序中发现一百万次这样的事情（对 DRY 也一无所知）：

```
if (<some condition>) {
    if ($this->db_debug) {
        log_message('error', 'Invalid query: '.$sql);
        return $this->display_error('db_invalid_query');
    }
    return FALSE;
} 
```

所以不，你不能禁用这个“功能”。但是，您可以[扩展](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)CI_DB_driver 类来解决这个问题，但是由于缺少 DRY 代码，您必须重写该类的几乎所有内容......

# .net - 防止用户（黑客）查看嵌入在 .NET 桌面应用程序中的字符串

> ID：14579213
> 
> 赞同：2
> 
> 时间：2013-01-29T09:10:07.960
> 
> 标签：.net, security

我正在构建一个使用密钥与 REST API 通信（通过 https）的应用程序。我不希望用户/黑客发现该密钥并构建他自己的应用程序，该应用程序可能会向服务器发送虚假数据。保护应用程序内部的“字符串”的最佳选择是什么？

以下是我正在考虑的选项：

1) 在应用程序中对该字符串进行硬编码并混淆程序集。我认为仍然有一些反混淆方法可以解密这个。

2) 将其传递到 app.config 并在安装时使用内置的 .NET 机制进行加密。据我了解，解密密钥存储在 Windows 内的某个位置，用户看不到。必须有人具有良好的系统知识和黑客技能才能检索它，是吗？如果是的话，那么用户下载安装包的时候还是可以解压看到秘钥的吧？

我还有其他选择吗？

我知道没有办法保护客户端机器上的任何东西——没有 100% 的安全方法。

巴特克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:50:28.967

您有一个攻击者无法触及的秘密：用户密码。你能做的最好的就是

*   使您的 REST 密钥难以重播（不使用它）
*   使调用可追溯到单个用户的会话

以下是您可以模仿浏览器如何验证用户的方法。OAuth2 客户端 Web 应用程序流程是另一个示例。

1.  询问用户密码
2.  对用户进行身份验证，可能使用您要保护的相同 REST API。根据定义，这不是经过身份验证的调用。想想一个登录表单，它始终是公开的，在 HTTPS 连接上。
3.  在服务器端，生成一个随机数，调用`nonce`并保存。
4.  用户仍在等待他的登录，向他发送`nonce`. 那将是他自己的 REST*密码*

现在，当您的用户单击需要进行 REST 调用的富客户端中的某个位置时

1.  将用户名-随机数对添加到您的 REST 调用中
2.  在服务器上，当 REST 调用进来时，检查 username-nonce 是否有效
3.  在您的 API 上调用某种注销，`nonce`如果不使用，则在一段时间后过期。

随机数本身应该很难猜到，GUID 不行。GUID 的 SHA-1（或更好）很好。

这很麻烦？没错，但这是你唯一的希望。您的服务器架构和客户端库可能已经支持一些您可以重用的身份验证方案，例如 HTTP BASIC 身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:58:37.927

单个密钥的问题是，一旦密钥出来，您就无法真正信任任何数据。

来自设备的任何形式的凭据都可能被黑客入侵。

因此，至少我将拥有来自每台设备的唯一凭据。
这样，如果您怀疑数据不正确，您可以关闭这些凭据并查看与这些凭据关联的任何数据。

凭证可以是用户/密码、证书，甚至是密钥。
您能否设置应用程序以请求证书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T14:24:26.483

不要将机密存储在客户端上。将其存储并在服务器上使用。

如果您将秘密发送给客户端，请确保您： - 在传输过程中以及存储在磁盘或内存中时对其进行加密 - 给它一个（短）生命周期，因此当它被解密或发现时它将不再有效。

你是对的：当有人在系统上是管理员时，你不能相信系统可以保证某些东西的安全。

如果用户不是管理员，您可以使用证书存储或文件系统的其他特殊部分，只有系统和管理员可以访问。

# unit-testing - MS 测试和私有访问器：访问私有嵌套类

> ID：14579217
> 
> 赞同：1
> 
> 时间：2013-01-29T09:10:19.007
> 
> 标签：unit-testing, mstest

我将 MS Test 与私有访问器结合使用来对我的类进行单元测试。我很好地使用了私有访问器（在 VS 2012 中不可用 :-( ）来调用我的私有方法。效果很好。

但我无法访问私有嵌套类！

例如：

```
public class Tool
{
  private IList<Result> DoSomePreparation(object anything)
  {
    // do some preparations here
  }

  private class Result { }
} 
```

通过私有访问器，可以访问我的私有方法

```
{
  var accessor = new Tool_Accessor(new PrivateObject(new Tool()));
  accessor.DoSomePreparation(new object());
} 
```

但是我怎样才能访问嵌套类呢？我需要它，因为我想模拟来自 DoSomePreparation(...) 的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:25:51.973

Tool_Accessor.Result - 将成为嵌套类的访问器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:08:47.150

在这种情况下，最常见的方法是测试类的公共合同，并避免测试私有，因为它使测试对实际实现中的更改更加脆弱。尝试设计您的 API，避免测试私有方法。当需要测试私有方法时，在这种情况下，类可以打破单一责任原则。

例如，XML 序列化。当在表示域业务对象的类中进行 XML 序列化时，尤其是在继承时，当域对象之间存在层次结构时。在这种情况下，很难用内部的 XML 序列化实现来测试这样的域对象。但是当在域对象之外实现 XML 序列化时，域对象和具有 XML 序列化逻辑的对象都可以使用公共合约轻松测试。

Sometimes it's hard to avoid testing of private methods. In context of .NET you can make such methods accessible as internals, and access to it from tests using [InternalsVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx) attribute.

# php - PHP foreach 不工作

> ID：14579218
> 
> 赞同：1
> 
> 时间：2013-01-29T09:10:22.967
> 
> 标签：php, mysql, sql, arrays, foreach

我对以下代码有几个问题......基本上，需要将几个值存储在**$sqlBAnswer**中，但如果我只是将**[]**放在它之后，它会保存值**"Array"**。

```
//Find the answer given by the user to the last answered question
$sqlB = mysql_query("SELECT Answer FROM Responses WHERE User = $sqlAPKID");
//If the operation produces an error, output an error message
if (!$sqlB) {
    die('Invalid query for SQLB: ' . mysql_error());
}
//Count the number of rows output
$sqlBCount = mysql_num_rows($sqlB);
//If rows exist, define the values
if ($sqlBCount > 0) {
    while ($row = mysql_fetch_array($sqlB)) {
        $sqlBAnswer = $row["Answer"];
    }
} 
```

假设**$sqlBAnswer**确实设法保存了多个值，那么我需要执行另一个查询，该查询将只产生一个值（即只有一个存储在**$sqlBAnswer**中的值会在结果集中。

我计划使用围绕以下代码的**foreach循环来执行此操作：**

```
//Find the number of the next question to be answered based on the user's previous answer and the question they answered
$sqlC = mysql_query("SELECT NextQuestion FROM Answers WHERE QuestionNumber = $sqlALastQuestionAnswered AND PKID = $sqlBAnswer");
//If the operation produces an error, output an error message
if (!$sqlC) {
    die('Invalid query for SQLC: ' . mysql_error());
}
//Count the number of rows output
$sqlCCount = mysql_num_rows($sqlC);
//If rows exist, define the values
if ($sqlCCount > 0) {
    while ($row = mysql_fetch_array($sqlC)) {
        $sqlCNextQuestion = $row["NextQuestion"];
    }
} 
```

最后我需要的是一个值，一个值仅用于**sqlCNextQuestion**，但我无法围绕键和值等等，无论我阅读了多少文档。如果有人能解释并告诉我如何实现我所追求的，我将不胜感激！

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:33:09.303

目前在您的代码中， $sqlBAnswer 不是一个数组，而只是一个普通变量。你的代码：

```
if ($sqlBCount > 0) {
    while ($row = mysql_fetch_array($sqlB)) {
        $sqlBAnswer = $row["Answer"];
    }
} 
```

只需遍历查询结果中的行，并在每一行中将 $row["Answer"] 的值重新分配给 $sqlBAnswer。

如果要将这些值保存到数组中，只需执行以下操作：

```
$sqlBAnswer = array(); //that creates a blank array to assign values to
if ($sqlBCount > 0) {
    while ($row = mysql_fetch_array($sqlB)) {
        $sqlBAnswer[] = $row["Answer"]; //note the '[]', which tells php to add the new value to the array
    }
} 
```

然后，您可以通过以下方式进行 foreach：

```
foreach($sqlBAnswer as $value){
    // use your code with $sqlBAnswer substituted by $value
} 
```

但是 - 至于你最终将如何选择你想要的 $sqlCAnswer 值，你没有充分描述你想要什么让我回答这个问题。此代码将遍历 $sqlBAnswer 的所有值，并可能产生许多 $sqlCAnswer 值（取决于您的数据库）-因此您需要改进您的问题或弄清楚自己如何解决该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:30:50.570

问题1的解决方案

```
$sqlBAnswer = $row["Answer"]; 
```

应该

```
$sqlBAnswer[] = $row["Answer"]; 
```

我知道你提到它只存储“数组”。但这不是真的，它正确地创建了数组，只是你在这里错误地访问它

```
$sqlC = mysql_query("SELECT NextQuestion FROM Answers WHERE QuestionNumber = $sqlALastQuestionAnswered AND PKID = $sqlBAnswer");  // No index being provided for array access 
```

在你提到的 foreach 中，这将如下所示

```
foreach($sqlBAnswer as $ans)
{
$sqlC = mysql_query("SELECT NextQuestion FROM Answers WHERE QuestionNumber = $sqlALastQuestionAnswered AND PKID = $ans");
} 
```

# c# - 在 ASP.Net C# 中使用 jquery 日历控件

> ID：14579221
> 
> 赞同：0
> 
> 时间：2013-01-29T09:10:37.093
> 
> 标签：c#, asp.net

[我正在使用http://www.eyecon.ro/datepicker/#download/datepicker.zip](http://www.eyecon.ro/datepicker/#download/datepicker.zip)上提供的现成日历控件。

日期选择器的对象很容易提供。

其中有一个示例显示日历控件附加到文本框，但我的问题是它与 HTML 文本框一起工作正常，但是当我尝试使用 ASP 执行此操作时，它没有附加到 asp:textbox。

我的代码是：

```
<head runat="server">
     <title></title>
     <link rel="stylesheet" media="screen" type="text/css" href="DatePicker/cssdatepicker.css" />
     <script type="text/javascript" src="DatePicker/js/datepicker.js"></script>
     <script type="text/javascript">

        $('#TextBox1').DatePicker({
            flat: true,
            date: '2008-07-31',
            current: '2008-07-31',
            calendars: 1,
            starts: 1
        });

  </script>
  </head> 
<body>
     <form id="form1" runat="server">
     <div>

         <asp:TextBox ID="TextBox1" runat="server">   </asp:TextBox>
    </div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:27:51.953

尝试将脚本标签移动到您的 HTML 元素下方。`$(function(){ ... });`还要在脚本周围添加一个。在[jQuery .ready()上阅读此内容](http://api.jquery.com/ready/)

> 传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。

然后使用`<%=(TextBox1.ClientID)%>`以确保您始终获得正确的 ID。这不会对您的项目产生太大影响，但很高兴知道。

还要确保在插件**之前**包含与插件兼容的 jQuery 版本。

```
<head runat="server">
     <title></title>
     <link rel="stylesheet" media="screen" type="text/css" href="DatePicker/cssdatepicker.css" />     
  </head> 
<body>
     <form id="form1" runat="server">
     <div>

         <asp:TextBox ID="TextBox1" runat="server">   </asp:TextBox>
    </div>

<script type="text/javascript" src="{PATH TO YOUR jQuery file}"></script>
<script type="text/javascript" src="DatePicker/js/datepicker.js"></script>
     <script type="text/javascript">

     $(function(){

        $('#<%=(TextBox1.ClientID)%>').DatePicker({
            flat: true,
            date: '2008-07-31',
            current: '2008-07-31',
            calendars: 1,
            starts: 1
        });
     });

  </script>

    </form>

</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:44:35.857

一种解决方法。似乎这个日期选择器喜欢在表单上显示一个输入字段。奇怪。所以我做了一个小技巧。创建一个带有 id 和一个类的虚拟输入框并通过 css 隐藏它，瞧你的文本框可以是附加到日期选择器。我仍然没有解释为什么它必须以这种方式强制工作。它应该默认工作，因为文本框被呈现为输入框。你的作业要弄清楚......

```
 <link rel="stylesheet" media="screen" type="text/css" href="css/datepicker.css" />
   <script type="text/javascript" src="js/jquery.js"></script>
   <script type="text/javascript" src="js/datepicker.js"></script>
   <script type="text/javascript" src="js/eye.js"></script>
   <script type="text/javascript" src="js/utils.js"></script>
   <script type="text/javascript" src="js/layout.js?ver=1.0.2"></script>

        $('.inputDate').DatePicker({
            format: 'm/d/Y',
            date: $('.inputDate').val(),
            current: $('.inputDate').val(),
            starts: 1,
            position: 'r',
            onBeforeShow: function () {
                $('.inputDate').DatePickerSetDate($('.inputDate').val(), true);
            },
            onChange: function (formated, dates) {
                $('.inputDate').val(formated);
                if ($('#closeOnSelect input').attr('checked')) {
                    $('.inputDate').DatePickerHide();
                }
            }
        });

 <form id="form1" runat="server">
 <div>
     <input id="inputDate2" class="inputDate" type="text" value="06/14/2008"   style="display:none" />
     <asp:TextBox  ID="inputDate" runat="server" CssClass="inputDate" Text="06/14/2008" >   </asp:TextBox>
 <label id="closeOnSelect"><input type="checkbox" /> Close on selection</label>
</div>
    </form> 
```

![在此处输入图像描述](../Images/97ef63441a3878e32b468a6710376cfa.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T09:54:25.407

根据您的代码，您似乎没有包含任何 jquery 文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-29T09:15:51.137

尝试使用下面的代码

```
 $("#MainContent_txtCopyrightYear").datepicker({
                dateFormat: 'yy',
                changeMonth: true,
                changeYear: true,
                showOn: 'button',
                readonly: 'true',
                buttonImage: 'References/Images/calendar.gif',
                buttonImageOnly: true
            }); 
```

您需要做的是在浏览器中进入页面的源代码并找到它的 id，然后将 MainContent_txtCopyrightYear 替换为该 id。

# visual-c++ - 如何知道鼠标是否在对象上移动

> ID：14579223
> 
> 赞同：1
> 
> 时间：2013-01-29T09:10:54.037
> 
> 标签：visual-c++, opengl

我的屏幕上有一个正方形对象：

```
glVertex3d(-0.1, -0.1, -0.1);
glVertex3d(0.1, -0.1, -0.1);
glVertex3d(0.1, 0.1, -0.1);
glVertex3d(-0.1, 0.1, -0.1); 
```

现在我想知道鼠标是否在这个对象上移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:02:33.287

首先要提到的是，您应该知道将在哪个空间进行计算。鼠标指针具有根据屏幕或窗口空间的位置，并且您的对象（本示例中的框）具有模型空间坐标。

您必须选择一个空间并将所有坐标转换为选定的空间。

这是描述一些问题的博客文章：http: [//bartlomiejfilipek.blogspot.com/2012/06/select-mouse-opengl.html](http://bartlomiejfilipek.blogspot.com/2012/06/select-mouse-opengl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:33:51.670

如果它只是一个普通的正方形，那么最好手动将您的 4 个顶点转换为屏幕空间（通过将它们与您的模型视图投影矩阵相乘），然后还将您的鼠标坐标转换为 -1 到 1 的范围，最后检查您的鼠标坐标是否在您描述的多边形内。另请参阅[gluProject](http://www.opengl.org/sdk/docs/man2/xhtml/gluProject.xml)以帮助您将点从 3D 空间转换为屏幕空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:02:07.063

我认为 gluPickMatrix 是您正在寻找的。

[你可以在这里](http://www.glprogramming.com/red/chapter13.html)找到更多细节

# javascript - 加载DOM时要执行的Jquery加载文件（不等待图像）

> ID：14579225
> 
> 赞同：0
> 
> 时间：2013-01-29T09:11:00.450
> 
> 标签：javascript, jquery, jquery-ui

我目前正在使用这个

```
$('#message').load('/searchresult.php<? echo $requeststring; ?>', function() {
  $('#searching').hide();
}); 
```

加载带有搜索结果的页面，但是速度很慢，因为在加载图像之前它也不会显示。如何在加载 DOM 后立即显示 searchresult 的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:24:09.793

在评论之后，我认为问题可能出在你里面有一个回调函数`.load()`，所以你可以试试这个：

```
$('#message').load(function() { 
    $.ajax({
        type: "GET",
        url: '/searchresult.php<? echo $requeststring; ?>',
        success: function (result) {
             $('#searching').html(result);
        }
    });
}); 
```

PS jQuery API 文档说`If a "complete" callback is provided, it is executed after post-processing and HTML insertion has been performed. The callback is fired once for each element in the jQuery collection, and this is set to each DOM element in turn.`（[http://api.jquery.com/load/](http://api.jquery.com/load/)）

PPS 我的猜测是，由于每个函数一次处理一个的方式，这需要时间。

# java - JSP 自定义标签属性包含自定义标签

> ID：14579226
> 
> 赞同：0
> 
> 时间：2013-01-29T09:11:02.000
> 
> 标签：java, jsp, jsp-tags

我想编写一些代码，它采用一个 jsp 标签，其属性本身是另一个 jsp 标签。例如 ：

```
<my: image path="<my: imagepath value='abc'/>" /> 
```

我希望图像的路径属性由另一个值为 abc 的自定义标记图像路径动态填充。有没有办法做到这一点 ？

# java - 时间戳字段的自定义打印

> ID：14579227
> 
> 赞同：0
> 
> 时间：2013-01-29T09:11:05.270
> 
> 标签：java, mysql

我在我的 mysql 数据库中获得了带有时间戳字段的表。我想以这种格式 HH:MM 在java中打印小时和分钟。

我怎样才能做到这一点？在没有任何更改的情况下打印时间戳将如下所示：

```
2013-01-29 11:05:00 
```

我标记了 java，因为我想在 java 中这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:22:02.103

您可以使用 MySQL 来格式化日期。

例如：

```
SELECT DATE_FORMAT(`date`,'%Y-%m-%d %H:%i') AS showdate FROM table 
```

您可以使用[http://www.mysqlformatdate.com](http://www.mysqlformatdate.com)获取所需的正确格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:24:11.300

SimpleDateFormat 是你想要的

```
String date = "2013-01-29 11:05:00";

SimpleDateFormat parsedFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
SimpleDateFormat printedFormat = new SimpleDateFormat("HH:mm");
Date a = parsedFormat.parse(date);
System.out.println(printedFormat.format(a)); 
```

# iphone - 调用父 ViewController 实例方法

> ID：14579228
> 
> 赞同：0
> 
> 时间：2013-01-29T09:11:07.000
> 
> 标签：iphone, objective-c

我通过以下代码将自定义视图添加到视图控制器

```
[bTVC addSubview:customView]; 
```

现在我想像这样在自定义视图的类中调用父视图控制器的实例方法

```
[self.parentViewController instanceMethod]; 
```

那可能吗 ？我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T09:53:51.373

“正常”方法应该是实现一个指向您的父视图控制器的属性（不保留）委托，但您可能更喜欢使用这样的东西：

```
-(MyCustomUIViewController*)findParentUIViewControllerInSuperViews:(UIView*)myView {
    for (UIView* next = [myView superview]; next; next = next.superview) {
        UIResponder* nextResponder = [next nextResponder];
        if ([nextResponder isKindOfClass:[MyCustomUIViewController class]]) {
            return (MyCustomUIViewController*)nextResponder;
        }
    }
    return nil;
} 
```

现在只需调用：

```
MyCustomUIViewController* myParentViewController = (MyCustomUIViewController*)[self findParentUIViewControllerInSuperViews:self];
[myParentViewController instanceMethod]; 
```

无论如何，我还建议您学习委托的工作原理，它在很多情况下都很有用，而且您迟早会需要它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:28:05.503

NSViewController 中没有 addSubview 方法。你可以在 NSView 中找到它。如果 bTVC 是 NSView 的一个实例（或其子类），您可以通过将 superview 发送给 self 来获得您所谓的父视图：[self superview] 或 self.superview。在您的示例中它将返回 bTVC。NSViewController 的工作方式不同，您可以[在此处阅读完整文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSViewController_Class/Introduction/Introduction.html)

# python - PyQt：如何在程序启动时创建一个自动关闭的简单信息

> ID：14579231
> 
> 赞同：0
> 
> 时间：2013-01-29T09:11:20.387
> 
> 标签：python, pyqt, messagebox

对于 pyqt 程序，我想为程序启动创建一个简单的信息消息。关键是，它应该在几秒钟后自动消失。

我尝试使用单发，但没有奏效：

```
class MainProgramm(QMainWindow):
    def __init__(self, *args):
        QWidget.__init__(self, *args)
        QTimer.singleShot(60, self.EntryMessage) 
...

def EntryMessage(self):
        QMessageBox.information(self, "About","text") 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:11:12.660

如果我对您的理解正确，那么似乎[QSplashScreen](http://qt-project.org/doc/qt-4.8/qsplashscreen.html)就是您所需要的。它实际上是 Qt 的一部分，因此您可以不受任何限制地使用它。

# java - Eclipse 使（只读）文件可写

> ID：14579232
> 
> 赞同：2
> 
> 时间：2013-01-29T09:11:24.420
> 
> 标签：java, eclipse, eclipse-plugin, clearcase

我创建了 eclipse 插件（按钮），它将一些文本插入到活动的打开文件中。我启发[http://wiki.eclipse.org/FAQ_How_do_I_insert_text_in_the_active_text_editor%3F](http://wiki.eclipse.org/FAQ_How_do_I_insert_text_in_the_active_text_editor%3F)

```
public class PasteTextAction implements IWorkbenchWindowActionDelegate {

  private IWorkbenchWindow window;

  public void run(IAction aAction) {

    IWorkbenchPage page = window.getActivePage();
    IEditorPart part = page.getActiveEditor();
    if (!(part instanceof AbstractTextEditor))
      return;
    ITextEditor editor = (ITextEditor) part;
    IDocumentProvider dp = editor.getDocumentProvider();
    IDocument doc = dp.getDocument(editor.getEditorInput());

    try {
      int offset = doc.getLineOffset(doc.getNumberOfLines() - 4);
      doc.replace(offset, 0, "pasteText\n");
    } catch (BadLocationException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }

  }

  public void selectionChanged(IAction aAction, ISelection aSelection) {

  }

  public void dispose() {

  }

  public void init(IWorkbenchWindow aWindow) {
    window = aWindow;
  }

} 
```

它工作得很好。

但是我对 ClearCase 版本控制系统下的只读文件或文件有问题。它将文本粘贴到编辑器中，但它不会尝试将文件设置为可写，或者如果文件无法设置为可写，则不会粘贴它。（它不会为 ClearCase 文件打开 CheckOut 窗口）。

如何以编程方式设置文件可写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:29:01.107

请注意，Eclipse 插件中的任何 java 解决方案都只适用于快照视图。
（前提是您拥有[正确的 Java 版本](https://stackoverflow.com/questions/5302269/java-file-setwritable-and-stopped-working-correctly-after-jdk-6u18)）

如果您在动态视图中，a`setWritable(true);`将*不起作用*。
您将必须执行一个`cleartool checkout -nc filePath`.

* * *

[OP](https://stackoverflow.com/users/1102223/kubedan) kubedan[评论](https://stackoverflow.com/questions/14579232/eclipse-make-readonly-file-writable#comment20351353_14579559)：

> 我使用快照视图。
> 也许我不想设置文件可写，因为`setWritable(true);` **[劫持文件](https://stackoverflow.com/questions/2165155/clearcase-checkout-and-modify-but-forbid-checkin/2166107#2166107)**（我不想劫持文件）。
> 我要`CheckOut`开窗。如果我从剪贴板粘贴文本，则会出现相同的行为。

没有简单的方法来显示本机[ClearCase“结帐”对话框](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/topic/com.ibm.rational.clearcase.ccrc.help.doc/topics/u_dlgwiz.htm)。
您必须重新创建它（管理 UCM 活动以及您正在使用 UCM Web 视图），就像 ClearCase 插件在 Eclipse 中所做的那样：

![在此处输入图像描述](../Images/51af0ae569a01938ec8072e8bb8d4f76.png)

# c# - 使用 EntityFramework 设计模式？

> ID：14579235
> 
> 赞同：6
> 
> 时间：2013-01-29T09:11:27.177
> 
> 标签：c#, entity-framework, design-patterns

界面

```
public interface IDinnerRepository 
{
    IQueryable<Dinner> FindAllDinners();
    IQueryable<Dinner> FindDinnersByText(string q);

    Dinner GetDinner(int id);

    void Add(Dinner dinner);
    void Delete(Dinner dinner);

    void Save();
} 
```

从上述接口继承的类

```
public class DinnerRepository : NerdDinner.Models.IDinnerRepository
{
    NerdDinnerEntities db = new NerdDinnerEntities();

    Public IQueryable<Dinner> FindDinnersByText(string q)
    {
         return db.Dinners.Where(d => d.Title.Contains(q)
             || d.Description.Contains(q)
             || d.HostedBy.Contains(q));
    }

    public IQueryable<Dinner> FindAllDinners()
    {
         return db.Dinners;
    }

    public Dinner GetDinner(int id)
    {
        return db.Dinners.SingleOrDefault(d => d.DinnerID == id);
    }

    public void Add(Dinner dinner)
    {
        db.Dinners.AddObject(dinner);
    }

    public void Delete(Dinner dinner)
    {
        foreach (RSVP rsvp in dinner.RSVPs.ToList())
            db.RSVPs.DeleteObject(rsvp);

        db.Dinners.DeleteObject(dinner);
   }

   public void Save()
   {
        db.SaveChanges();
   }
} 
```

在程序中的使用

```
public class DinnerOperation
{
    DinnerRepository dr = new DinnerRepository();

    // insert
    public void InsertDinner()
    {
        Dinner dinner = dr.GetDinner(5);
        dr.Dinner.Add(dinner);
        dr.Save();
    }

    // delete
    public void DeleteDinner()
    {
        Dinner dinner = dr.GetDinner(5);
        dr.Dinner.Delete(dinner);
        dr.Save();
    }
} 
```

并且不使用存储库设计模式......

```
public class DinnerOperation
{
    DinnerEntities entity = new DinnerEntities();

    // insert
    public void InsertDinner()
    {
        Dinner dinner = entity.Dinners.Find(5);
        entity.Dinner.Add(dinner);
        entity.SaveChanges();
    }

    // delete
    public void DeleteDinner()
    {
        Dinner dinner = entity.Dinners.Find(5);
        entity.Dinner.Remove(dinner);
        entity.SaveChanges();
    }
} 
```

问题

我无法理解，在这里，我们为什么要使用设计模式？当以这种方式将存储库设计模式与实体框架一起使用时，没有任何意义。

如何将设计模式与实体框架一起使用？什么时候将设计模式与实体框架一起使用才有意义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T09:21:52.620

你几乎明白了。首先，重构您的晚餐操作类，以便可以将存储库实现注入其中。

```
public class DinnerOperation
{
  private IDinnerRepository dr;
  public DinnerOperation( IDinnerRespository repository ) {
     this.dr = repository;
  }

  // insert
  public void InsertDinner()
  {
      Dinner dinner = dr.GetDinner(5);
      dr.Dinner.Add(dinner);
      dr.Save();
  }

  // delete
  public void DeleteDinner()
  {
      Dinner dinner = dr.GetDinner(5);
      dr.Dinner.Delete(dinner);
      dr.Save();
  }
} 
```

然后实现不同的存储库：

```
public class EntityFrameworkDinnerRepository : IDinnerRepository
public class NHibernateDinnerRepository : IDinnerRepository
public class Linq2SqlDinnerRepository : IDinnerRepository
public class MockDinnerRepository : IDinnerRepository
.... 
```

然后使用您想要的任何存储库：

```
var repository = new ....Repository();
var operation = new DinnerOperation( repository );

operation.GetDinner(5); 
```

存储库用于抽象您的具体数据提供者，从而使您的架构更加脆弱。

想要切换到 nHibernate？

痛苦，如果你到处都有 EntityFramework。很简单，如果您使用存储库，您只需注入另一个存储库，您的业务逻辑不必更改。

想要对您的业务逻辑进行单元测试？

痛苦，如果您坚持使用具体的数据提供者。很简单，如果你有存储库，你只需注入一个甚至不使用数据库的内存存储库。

现在明白了？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T20:51:22.290

当我使用 ORM 时，我拒绝使用存储库模式。我认为在这种情况下它几乎没有任何好处。（是的，我预计会被狂热者投下大约 2,000 次反对票）。

使用 EF，我为我的 Context 创建了一个接口

```
public interface IDinnerContext : IDisposable
{
    IDbSet<Dinner> Dinners;

    int SaveChanges();
} 
```

然后我将此接口粘贴到我的 EF DatabaseContext 实现上，中提琴！我可以在任何地方使用 EF，使用 MOCK 实现对我的数据库访问进行单元测试，如果我愿意，可以使用注入，而不是最终得到 600 万个 GetByXXX 方法。IQeryable 处理这个，我得到延迟执行。我真的不需要插入/删除方法，因为 IDBSet 已经有添加/删除。我有更少的抽象更清洁/更容易阅读代码。

如果我确实遇到在许多不同地方使用相同查询的情况，并且我确实希望这种情况很常见，那么我可以添加一些机制来支持它。但是，95% 的情况下，查询特定于负责业务逻辑 X 的组件（简单 GetBy 语句之外的任何内容）。所以我不认为这是一个问题。

不要误会我的意思，我虔诚地使用存储库模式，直到 ORM 变得相当不错。一旦 ORM 达到一定的复杂程度，我觉得可能不再需要存储库模式并开始在没有它的情况下进行项目......并且从未回头。我认为其他所有人最终都会朝着这个方向发展，或者类似的东西，但是旧习惯需要一段时间才能消失。（我知道一些开发人员仍然坚持使用 lock(this)，因为它仍在某些 MS 样本中）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T09:18:00.220

它是**存储库模式**，它本身对于实体框架来说是多余的，因为它同时`DbContext`用作存储库和工作单元，但它不是可模拟的 - 没有`IDbContext`. 因此，您最终会放入`DbContext`一个精简的存储库包装器，以便您以后可以轻松地测试组件。

我认为值得一提的是，我从未在 NHibernate 中使用过 Repository 模式，因为会话和会话工厂是接口——因此`ISession`也是如此`ISessionFactory`。

如果您在某处（`IRepository`）通过接口使用存储库并将其注入，则通过模拟/存根进行测试会容易得多：

```
public class DinnerOperation
{
    private readonly IDinnerRepository repository;

    public DinnerOperation(IDinnerRepository dinnerRepository)
    {
        repository = dinnerRepository;
    }
} 
```

当然，您必须使用选择的 IoC 容器为您注入正确的实例（`DinnerRepository`在这种情况下），或者“手动”执行 DI。

这样您就可以`DinnerOperation`针对模拟或存根存储库测试类。当你实例化时`DbContext`，你不能。

# blackberry-webworks - Blackberry Webworks 输入焦点问题

> ID：14579242
> 
> 赞同：1
> 
> 时间：2013-01-29T09:11:33.087
> 
> 标签：blackberry-webworks

我发现选择输入框（或单击输入按钮）需要单击两次。

为了证明这一点，我制作了一个视频 -

[http://www.youtube.com/watch?v=ejG2pXIB8ds](http://www.youtube.com/watch?v=ejG2pXIB8ds)

第一次单击突出显示输入框并为其提供蓝色边框。第二次点击进入。

要再次从该输入框移动到另一个输入框（或单击按钮），需要多次单击，一次“浪费”突出显示，一次输入。

这种行为对我的应用程序来说是不可接受的 - 并且让用户反复点击屏幕，就像它有问题一样。

第一次单击（突出显示的那个）不会触发单击、鼠标按下或 jquery 中的焦点，所以我什至无法拒绝它。

我在 OS7 上运行 SDK - 2.3.1.5。

有谁知道解决这个问题的方法 - 在 OS6 上，1 单击 = 焦点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:42:56.790

修复。

似乎 BB 已经应用了他们自己的触摸事件，这导致了这个点击非焦点问题：

```
$(document).ready(function(){
   fixClicks();
});

function fixClicks(){
    if (blackberry.system.softwareVersion.substring(-1,1) == "7"){
        window.addEventListener("touchend", function(e){
           if (e.target.tagName == "INPUT"){
                switch(e.target.type){
                case "button":
                  e.preventDefault();
                  $(e.target).trigger("click");
                  break;
                case "input":
                  $(e.target).focus();
                  break;
                case "radio":
                  $(e.target).focus();
                  break;
                default:
                  $(e.target).focus();
                }
            }
        });
    }
}; 
```

# linux - ext4 中的 O_DIRECT 启用了 data=journaled 挂载选项

> ID：14579246
> 
> 赞同：1
> 
> 时间：2013-01-29T09:11:41.087
> 
> 标签：linux, linux-kernel, filesystems, ext4

据我所知，在 ext4 中，仅在一些最近的内核版本中才添加了带有日志功能的 O_DIRECT 标志支持。我知道它在 3.0.0 内核中不存在，但它已经在 3.4 中正常工作，所以我试图找出可能的最低版本，而不是在任何地方禁用该功能，而是在内核版本检查之后执行它. 我查阅了一些 ext4 文档，找到了一些补丁，但仍然不知道确切的版本。你有什么可以建议的帮助吗？

# python - 如何检查python列表中的最后三个元素 - 它们是否是整数？

> ID：14579247
> 
> 赞同：1
> 
> 时间：2013-01-29T09:11:52.857
> 
> 标签：python

我正在使用 Python，版本 2.7.2。

我的任务是检查列表中的最后三个元素是否为整数？例如：

```
mylist = [String, Large_string_containing_integers_inside_it, 80, 40, 50] 
```

对于上面的列表，我想检查最后三个元素是否为整数。我怎样才能做到这一点？

这是我正在测试的代码：

```
#!/usr/bin/python

line = ['MKS_TEST', 'Build', 'stability:', '1', 'out', 'of', 'the', 'last', '2', 'builds', 'failed.', '80', '40', '50']

if all(isinstance(i, int) for i in line[-3:]):
    job_name = line[0]
    warn = line[-3]
    crit = line[-2]
    score = line[-1]
    if score < crit:
        print ("CRITICAL - Health Score is %d" % score)
    elif (score >= crit) and (score <= warn):
        print ("WARNING - Health Score is %d" % score)
    else:
        print ("OK - Health Score is %d" % score) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T09:13:50.410

使用内置`isinstance`和`all`函数，以及列表切片。

```
if all(isinstance(i, int) for i in mylist[-3:]):
    # do something
else:
    # do something else 
```

*   `all`检查给定迭代中的所有元素是否评估为`True`.
*   `isinstance`检查给定对象是否是第二个参数的实例
*   `mylist[-3:]`返回最后三个元素`mylist`

此外，如果您使用的是 Python 2 并且列表中有非常大的数字，请同时检查`long`(long integer) 类型。

```
if all(isinstance(i, (int, long)) for i in mylist[-3:]):
    pass 
```

这可以防止数字之类`10**100`的破坏条件。

但是，如果您的最后三个元素是字符串，那么您有两个选择。

如果您知道没有一个数字非常大，则可以使用`isdigit`字符串方法。

```
if all(i.isdigit() for i in mylist[-3:]):
    pass 
```

但是，如果它们可能非常大（大约或超过`2**31`），请使用`try/except`块和内置`map`函数。

```
try:
    mylist[-3:] = map(int, mylist[-3:])
    # do stuff
except ValueError:
    pass 
```

*   `try`定义要执行的代码块
*   `except Exception`捕获给定的异常并处理它而不引发错误（除非被告知这样做）
*   `map`将函数应用于可迭代的每个元素并返回结果。

# monitoring - 返回按区域聚合的 %CPU、%Memory 和网络输入/输出的 Dtrace 脚本

> ID：14579255
> 
> 赞同：6
> 
> 时间：2013-01-29T09:12:22.713
> 
> 标签：monitoring, dtrace

我需要一个 DTrace 脚本，它返回 CPU 使用百分比、内存使用百分比和使用的网络输入和输出字节，按区域聚合数据。像这样的东西：

```
ZONE  %CPU %MEM NET_INPUT NET_OUTPUT
zone1 25%  12%   86012     1294
zone2 48%  65%   86012     7354
zone3  8%  14%  268153    68746 
```

到目前为止，我正在使用：

```
prstat -Z -c -n 1,99999 5 1 
```

返回类似的东西（没有网络流量）：

```
Please wait...
   PID USERNAME  SIZE   RSS STATE  PRI NICE      TIME  CPU PROCESS/NLWP       
 32051 root     1090M 1079M sleep    1    0  12:57:25 0,4% qemu-system-x86/7
ZONEID    NPROC  SWAP   RSS MEMORY      TIME  CPU ZONE                        
  3228        2 1090M 1079M   2,2%  12:57:25 0,4% 6ce064b6-fec9-4daa-ba2b-0082f73fca73
     0      105 2075M  633M   1,1% 202:56:51 0,4% global                      
  3031        2 2105M 2094M   4,3%  17:04:52 0,3% e32fb987-35f7-4860-a04a-ca26c327d4ba
(...)
  3411       18   81M   54M   0,1%   0:00:04 0,0% 52120eb6-2e20-4a64-8f7a-235a44d9f100
Total: 894 processes, 5460 lwps, load averages: 0,53, 0,53, 0,54 
```

我需要得到相同的结果，但使用 DTrace 完成，以便将数据与网络流量相结合，并在未来进行更多探测。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-21T23:40:29.797

尚不存在此类脚本的原因是使用 DTrace 很难获得 CPU / 内存利用率。DTrace 最适合对特定事件的数据进行采样。要使用 DTrace 获取 CPU 利用率，您需要跟踪每次 CPU 空闲和忙碌的时间，然后进行一些添加。请注意，这与 DTrace 提供的用于跟踪调度程序操作的提供程序不同，因为这些提供程序是基于每个线程而不是基于每个 CPU。内存更烦人，因为您将跟踪每个内存分配和释放。

要获取这些数据源，最好通过从中提取数据来为您提供更好的服务`kstat`（听起来您正在使用 Solaris，AFAIK 是唯一拥有的平台`kstat`）。您可以使用它找到您要查找的信息，如下所示：

```
$ sudo kstat unix:0:system_misc:ncpus      # this is the number of CPUs you have
module: unix                            instance: 0     
name:   system_misc                     class:    misc
        ncpus                           2

$ sudo kstat cpu::sys:cpu_ticks*           # ticks of each type for each core since boot
module: cpu                             instance: 0     
name:   sys                             class:    misc
        cpu_ticks_idle                  9375292
        cpu_ticks_kernel                82658
        cpu_ticks_user                  23684
        cpu_ticks_wait                  0

module: cpu                             instance: 1     
name:   sys                             class:    misc
        cpu_ticks_idle                  9410367
        cpu_ticks_kernel                49141
        cpu_ticks_user                  21956
        cpu_ticks_wait                  0

$ sudo kstat unix:0:system_pages:physmem   # pages of physical memory (multiply by page size for number of bytes)
module: unix                            instance: 0     
name:   system_pages                    class:    pages
        physmem                         1045390

$ sudo kstat unix:0:system_pages:freemem   # pages of free memory (multiply by page size for number of bytes)
module: unix                            instance: 0     
name:   system_pages                    class:    pages
        freemem                         880842 
```

请注意，您需要从 CPU 滴答计数器的上次读数中减去每个新读数 - 否则，您将跟踪自系统启动以来的滴答总数。当计数器溢出时，它们被设置为 0，然后将新值添加到它们（这不仅仅是盲目加法溢出）。

您还可以`kstat`使用`link:0::`. 我不确定是否可以在每个区域中找到此信息，但也可能有一个`kstat`跟踪该信息的信息。

我想如果你决定使用 DTrace 来监控这些值，你可以通过跟踪内核中这些计数器被修改的时刻并记录修改来强制它这样做。但是，我真的不明白这样做的意义，因为使用您已经发现的其他方法更容易。为什么不创建一个脚本来启动两个数据源并将结果组合成更好看的东西呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:24:25.687

看看 Brendan Gregg 的[DTraceToolkit](http://www.brendangregg.com/dtrace.html#DTraceToolkit)。它有大量的脚本，这些脚本使用各种探针来完成广泛的任务。这可能会为您指明正确的方向。

# c# - 如何参考使用 asp.net (c#) 的数据库中的经度和纬度值显示谷歌地图？

> ID：14579257
> 
> 赞同：-1
> 
> 时间：2013-01-29T09:12:32.463
> 
> 标签：c#, asp.net

我正在开发一个 ASP.Net 项目（c#）。我有与之链接的 SQL Server 数据库。该项目有该市的公司名单。一个页面将显示数据网格上的公司列表。单击公司将重定向到显示该公司详细信息的另一个页面。我想通过经度和纬度显示该公司的谷歌地图图片或谷歌街道图片以及该公司详细信息页面上的详细信息。每个酒店的详细信息将从数据库中获取以显示在该页面上，并且每个酒店的经度和纬度值也保存在数据库的列中。

如何参考来自数据库的经度和纬度值显示谷歌地图图片或谷歌街景图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:22:45.613

要在网页上插入 Google Map，您可以使用[Google Maps JavaScript API](https://developers.google.com/maps/documentation/javascript/tutorial?hl=pl#HelloWorld)。所以，如果你有来自 db 的纬度和经度，你可以将这些参数插入到你的 JS 代码中：

```
center = new google.maps.LatLng(-34.397, 150.644) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:24:19.293

1.你的cs函数从数据库中获取lat和lan

```
public string propLat = "";
public string propLan = "";

public void getLatLan(int PropertyId)
{
    DataSet dstPropMap = Tbl_PropertyMaster.GetPropertyDetailsbyId(PropertyId);
    if (dstPropMap.Tables[0].Rows.Count > 0)
    {
        propLat = dstPropMap.Tables[0].Rows[0]["Latitude"].ToString().Trim();
        propLan = dstPropMap.Tables[0].Rows[0]["Longitude"].ToString().Trim();
    }
} 
```

2.参考谷歌链接并创建一个ID为'mapStreetView'的div

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>    
 <div id="mapStreetView" style="height:500px;width:340px"></div> 
```

3.aspx页面中你的JS

```
 function initializeThisMap(lat,lan) {
  var mapOptions = {
    zoom: 8,
    center: new google.maps.LatLng(lat,lan),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  var map = new google.maps.Map(document.getElementById('mapStreetView'),
      mapOptions);

  var marker = new google.maps.Marker({
    position: map.getCenter(),
    map: map,
    title: 'Click to zoom in'
  });

  google.maps.event.addListener(marker, 'click', function() {
    map.setZoom(12);
    map.setCenter(marker.getPosition());
  });
} 
```

4.调用JS函数（在aspx页面底部，不影响其他JS）

```
<script type="text/javascript">
  initializeThisMap('<%= propLat %>','<%= propLan %>');
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:25:16.903

好吧，在你的 ASPX 页面上，你需要添加一个谷歌地图，那里有很多文章，但像这样：

```
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>

<div id="map" style="width: 356px; height: 566px;"></div>
<script type="text/javascript">

    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 7,
        center: new google.maps.LatLng(<%=SomeLatValue %>, <%=SomeLongValue%>),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });

</script> 
```

然后，您需要拥有可以绑定的类级别属性名称 SomeLatValue 和 SomeLongValue（如代码所示）。

# svn - 从客户端在 SVN 中搜索文件

> ID：14579260
> 
> 赞同：0
> 
> 时间：2013-01-29T09:12:49.457
> 
> 标签：svn, tortoisesvn, repository

我遇到了问题，我必须在 10 年的大量 svn 历史中搜索特定类型的文件（*.xxx）。我对svn的工作原理不是很熟悉。一开始，搜索当前状态下的所有存储库就足够了，而不是历史深度。我认为，这样的事情应该是可能的，因为 TortoiseSVN Repobrowser 能够像普通文件浏览器一样查看当前状态的文件。我发现了各种其他关于同一问题的问答线程，但我似乎都假设他们都可以访问 svn 服务器。

此外，我尝试了一些在这些线程中引用的工具，但它们似乎都不符合我的需求。例如，“SvnQuery 1.2.2.0”和“SVN Search 1.3.0.”。两者都要求我指定 SVN 存储库的本地路径。但是我认为存储库位于服务器上，而客户端只是得到了工作副本？！但我可能错了...

另一个（次要）问题是：是否可以显示特定用户一年前的所有签入/提交？（再次只是通过客户端访问。）目前，我只需执行以下命令：

```
TortoiseProc.exe /command:log /path:"https://svn:9880/SvnRoot" 
```

在此之后，我点击“Next 100”按钮，直到找到我要搜索的内容；或者我的手指烂掉了。

有人能帮我吗？

此致，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:20:12.713

> 搜索当前状态下的所有存储库就足够了，而不是历史深度

您要查找的命令是`svn ls -R %REPO%`. 这将列出存储库中的所有文件，以及`-R`递归方式。从那里，您可以通过后缀仅过滤掉您感兴趣的存储库中的文件。

> 是否可以显示特定用户一年前的所有签入/提交？（同样只是通过客户端访问。

您要查找的命令是`svn log -r`{20120130}`:HEAD %REPO%。这将列出自 2012 年 1 月 30 日至今的所有历史记录。

从那里，您可以过滤掉特定用户的整个日志。

如果您是 Subversion 新手，请查看[在线 Subversion 手册](http://svnbook.com)。这是我见过的最好的开源项目手册之一。此外，命令行 Subversion 工具有很多内置帮助：

```
$ svn help
usage: svn <subcommand> [options] [args]
Subversion command-line client, version 1.7.5.
Type 'svn help <subcommand>' for help on a specific subcommand.
Type 'svn --version' to see the program version and RA modules
 or 'svn --version --quiet' to see just the version number.

Most subcommands take file and/or directory arguments, recursing
on the directories.  If no arguments are supplied to such a
command, it recurses on the current directory (inclusive) by default.

Available subcommands:
   add
   blame (praise, annotate, ann)
   cat
   changelist (cl)
   checkout (co)
   cleanup
   commit (ci)
   ... 
```

从那里，您可以获得特定命令的帮助。这些中的任何一个都可以工作：

```
$ svn help checkout
$ svn checkout --help 
```

TortoiseSVN 带有 Subversion 命令行客户端。检查`C:\Program Files\TortoiseSVN\bin`（或在您的系统上安装 TortoiseSVN 的位置）。我相信它甚至可以`PATH`正确设置您执行 svn。

您可以在 PC 上使用 PowerShell，或者下载 Python 或 Perl。这些语言允许您更好地操作各种命令的命令行输出`svn`，Perl 和 Python 具有 Subversion 模块，可以直接通过 API 访问 Subversion。

然而，对于大多数 Subversion 报告，我倾向于使用 BASH shell 和 Unix 实用程序，因为我通常可以直接从命令行执行此操作而无需大惊小怪。如果您熟悉 Unix 实用程序并且在 PC 上，请尝试 Cygwin，它将为您提供 BASH shell 和大多数标准 Unix/GNU 实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:02:31.413

如果您有命令行客户端和 PowerShell，则可以执行以下操作以获取特定用户的所有日志条目：

```
[xml]$log = svn log --xml --verbose https://svn:9880/SvnRoot/;
$log.log.logentry|where-object {$_.author -eq "USERNAME"}; 
```

我确信有一种方法可以使它成为单线，但它现在还没有来找我。

如果要限制修订范围或日期，请参阅[svn log的帮助](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.log.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:35:47.277

请参阅我的（类似）问题的答案，它显示了如何使用 -l 开关转储日志（以获得超过默认值 100）以及 svnquery: [How to search SVN repository for a file when I'm not sure where我放的？](https://stackoverflow.com/questions/2578573/how-to-search-svn-repository-for-a-file-when-im-not-sure-where-i-put-it)

# mdx - 平行周期 YTD MDX

> ID：14579261
> 
> 赞同：0
> 
> 时间：2013-01-29T09:12:51.687
> 
> 标签：mdx

我有年初至今的 MDX：

```
YTD( StrToMember(" [Time].[Year -  Month -  Date]   .&[" + Format(now(), "yyyy-MM-" + "01T00:00:00") + "]")) 
```

这很好用。

现在我试图制作 YTD Last Year MDX 所以：

```
PARALLERPERIOD([Time].[Year -  Month -  Date].[Year],1,YTD) 
```

但它不起作用。

有什么建议我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-02T18:18:40.320

根据[MSDN](https://msdn.microsoft.com/en-us/library/ms145500.aspx)， ParallelPeriod 接受 Member_Expression 作为第三个参数。这意味着您可以使用如下代码：

*   [时间]。[年-月-日]。**当前成员**
*   Tail(EXISTING [时间].[年-月-日].[年].allmembers,1).Item(0)
*   YTD(尾巴(现有 [时间].[年 - 月 - 日期].[年].allmembers,1).Item(0)).Item(0)

但是您无法使用 SET 表达式或实际 SET（即 {A:B} 或轴引用）作为 ParallelPeriod 参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T11:45:04.377

更好的选择是按如下方式定义您的 PY 度量：

```
CREATE MEMBER CURRENTCUBE.[Measures].[Value PY] AS Null 
```

并将此代码添加到脚本中

```
([Measures].[Value PY] , [Time].[Year - Quarter - Month - Week - Day].MEMBERS) = Sum(Existing [Time].[Year - Quarter - Month - Week - Day].[Day].MEMBERS,  (ParallelPeriod([Time].[Year - Quarter - Month - Week - Day].[Year]), [Measures].[Value])) 
```

此解决方案适用于您的所有查询，无论您想在查询中使用单一时间成员还是一组成员都没有关系。

# amazon-web-services - 在 AWS 中映射我的域的步骤

> ID：14579265
> 
> 赞同：0
> 
> 时间：2013-01-29T09:13:01.730
> 
> 标签：amazon-web-services, amazon-ec2, amazon-route53

我刚刚在 AWS 中购买了一个“按需实例”，想知道为我的亚马逊实例映射我的域 (www.abc.com) 以执行名称服务器更新等的步骤？

我了解了 Route 53，但我确定完整的工作流程将如何将我的域 (www.abc.com) 连接到亚马逊私有 IP 地址，请指教？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:28:22.493

它非常简单，如果您在实例前面附加了一个弹性负载均衡器，您需要映射您的弹性负载均衡器的端点。如果您只有在运行的实例，请为其附加一个弹性 IP，并将该 IP 放入域名提供商的 A 记录列中。

# razor - 获取新（按用户）填充的列表框的列表

> ID：14579266
> 
> 赞同：1
> 
> 时间：2013-01-29T09:13:11.837
> 
> 标签：razor, asp.net-mvc-4, listbox

**asp .net mvc 4.0、vs10、razorview**

这是**我的列表框：**

```
 <div class="editor-list-field">
      <select name="lbToCreateTable" class="clsToCreateTable" id="idToCreateTable" style="width:150px" size="8" multiple="multiple" >
             @if(Model.ColumnsToCreateTable != null)
             {
                  <option>@Model.ColumnsToCreateTable;</option>
             }
       </select>
 </div> 
```

**我的控制器：**

```
 public ActionResult About(AboutModel model, string btnTestMail, string btnSendMail, string lbToCreateTable)
    {
        try
        {
            if (btnTestMail != null)
            {
                List<string> lstTableCreateCols = new List<string>();
                try
                {
                    if (Request.Form["lbToCreateTable"].ToString().Length > 0)
                    { }

                    HtmlString hs = new HtmlString(model.Content);
                    if (model.TableCreate)
                    {
                        if (hs.ToString().Length > 0 && model.CompanyName != "" && model.MailSubject != "")
                        {
                            CM.CreateMailBody(model.CompanyName, model.MailSubject, hs);
                        }
                    }

                    else
                    {
                        if (hs.ToString().Length > 0 && model.CompanyName != "" && model.MailSubject != "" && model.ColumnsToCreateTable != null)
                        {
                            List<string> lstColumnsToCreateTable = new List<string>();
                            foreach (SelectListItem str in model.ColumnsToCreateTable)
                            {
                                lstColumnsToCreateTable.Add(str.Selected.ToString());
                            }
                            CM.CreateMailbodyWithTable(model.CompanyName, model.MailSubject, hs, lstColumnsToCreateTable);
                        }
                    }
                }

                catch { }
            }
            else if (btnSendMail != null)
            { 

            }
        }
        catch { }
        try
        {
            if (btnTestMail == null && btnSendMail == null)
            {

                if (Session["CompanyName"].ToString().Length > 0)
                {
                    RedirectFromHomeToAbout(model);
                }
            }

        }
        catch { }
        return View(model);
    } 
```

**我的模型：**

```
[Required]
    [DataType(DataType.Text)]
    public string CompanyName { get; set; }

    [Required]
    [DataType(DataType.Text)]
    public string MailSubject { get; set; }

    public List<string> TableColumn { get; set; }

    public bool IsChecked { get; set; }

    public List<string> ColumnsToCreateTable { get; set; }

    public bool TableCreate { get; set; }

    [Display]
    [DataType(DataType.Text)]
    public string Message { get; set; }

    [Required]
    [DataType(DataType.Html)] 
    [AllowHtml]
    public string Content { get; set; }

    [DataType(DataType.EmailAddress)]
    public string EmailAddress { get; set; } 
```

在我的模型中为什么我得到 Model.ColumnsToCreateTable = null;

**业务：**

当我的视图加载时，这个列表框将是空白的。在此视图中，还有另一个列表框，它已正确填充。我将填充 ListBoxToCreateTable（起初是空白的）。当我提交表单以及所有其他数据时，这个列表（新填充的列表框）将发送给我的控制器。我必须为此做很多事情。

**问题 ：**

1.  我该如何解决这个问题？
2.  这是正确的方法吗？
3.  还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:43:17.933

由于您的问题不是很清楚，因此很难说具体的内容。你应该找出问题到底是什么。尝试找出以下事实的答案：

1.  检查model.ColumnsToCreateTable 的数据绑定。
2.  不清楚如何从索引页面调用 aboutModel，在填充模型之前初始化 aboutmodel 一次。
3.  调试并检查从重定向到应填充 ColumnsToCreateTable 的位置。

检查以下链接以获取有关列表框数据绑定的更多知识。 [将 ListBoxFor 与模型绑定](http://forums.asp.net/t/1834813.aspx/1?about%20bind%20ListBoxFor%20with%20model%20MVC3)

您应该尝试使用 htmlHelperClass 轻松绑定它。

# ios - [iOS][Objective-C] 预期类型

> ID：14579274
> 
> 赞同：0
> 
> 时间：2013-01-29T09:13:29.920
> 
> 标签：ios, objective-c, mapkit, point

我的一个 Objective-C 课程有问题。

Xcode 说第 20 行有一个 Parse Issue。

```
+ (Boolean)hasOverlay:(KnownPoints*)points byPoint:(CGPoint)p; 
```

KnownPoints 是一个自写的类。Xcode 显示错误出现在 '(KnownPoints*)points 部分。

添加此代码行的其他类似主题的答案：

```
@class KnownPoints 
```

不起作用。

该类在计算类中调用，它使 x 和 y 坐标的纬度和经度形成一个视图。

这里的代码：（CalcMakerPos.h）

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>
#import "Journey.h"
#import "CoordRect.h"
#import "KnownPoints.h"

@interface CalcMakerPos : NSObject

+ (CGPoint)calcPosFor: (CLLocationCoordinate2D)coord WithDataFrom: (CoordRect*)rect     AtView: (UIView*)view;
+ (Boolean)hasOverlay:(KnownPoints*)points byPoint:(CGPoint)p;
@end 
```

CalcMakerPos.m

```
#import "CalcMakerPos.h"
#import "MinMaxCoords.h"
#import "Journey.h"
#import "KnownPoints.h"

@implementation CalcMakerPos
#pragma mark Calculate GeoCoords zu Pixeln
+ (CGPoint)calcPosFor: (CLLocationCoordinate2D)coord WithDataFrom: (CoordRect*)rect AtView: (UIView*)view{

     double maxLat = [rect maxLat];
     double minLat = [rect minLat];
     double maxLon = [rect maxLon];
     double minLon = [rect minLon];
     int x = (int)((coord.longitude - minLon) / (maxLon - minLon) * view.frame.size.width);
     int y = (int)((coord.latitude - minLat) / (maxLat - minLat) * view.frame.size.height);
     NSLog(@"Point(%d, %d)", x,y);
     return CGPointMake(x, y);
}

#pragma mark check whether point is free
+ (Boolean)hasOverlay:(KnownPoints*)points byPoint:(CGPoint)p{
    BOOL isOverLay = false;

    return isOverLay;
}
@end 
```

我希望你能帮助我。

来自德国的问候

罗比字节

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:26:51.760

这可能是由循环导入语句引起的。

确保它`CalcMakerPos`没有被导入或添加`@class`到`KnownPoints`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:36:32.817

`KnownPoints`并被`Journey`进口两次。从实现文件中删除导入，因为它们是多余的。

之后清理并构建您的项目。

# c# - LibUsbDotNet 返回垃圾

> ID：14579275
> 
> 赞同：3
> 
> 时间：2013-01-29T09:13:38.767
> 
> 标签：c#, mono, usb, linux-device-driver, libusb

我编写了一个应用程序来使用 USB 连接读取磁卡读卡器。我使用了 libusbdotnet，因为它直接与 linux 上的 libusb 1.xx 通信。

当我拔出卡时，我得到了很多我认为是二进制数据，这些数据与我使用 pc hid 驱动程序时得到的数据不匹配。个人电脑将读卡器视为键盘设备。

我该如何修复或调试这个？我在我的 Windows 系统上对其进行了测试，但我收到了相同的结果。

# iphone - 如何在 iPhone 中使用消息访问配置文件 (MAP)

> ID：14579283
> 
> 赞同：2
> 
> 时间：2013-01-29T09:13:56.097
> 
> 标签：iphone, ios, bluetooth, sony-smartwatch

我想使用蓝牙使用`Message Access Profile MAP`on `iPhone`for `SMS notifications`。请在下面找到相关的问题链接。

如何在 iPhone 中获取短信通知？

[iOS6 中的短信通知](https://stackoverflow.com/questions/14494849/sms-notifications-in-ios6)

**编辑**

iPhone 不支持 OBEX 和 OPP。我如何`Message Access Profile (MAP)`结合使用`Serial Port Profile (SPP)`？如果 MAP 在蓝牙设备上实现就足够了，还是我需要实现其他东西。是否有任何 API 或一些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:55:03.823

MAP配置文件基于经典蓝牙上可用的Obex（对象交换）。如果您可以使用可用的corebluetooth fw进行OPP（对象交换/文件传输）或电话簿传输，MAP也可以实现，尽管我的理解是corebluetooth是仅适用于 BT LE（低能量）

# sass - 为什么要使用 SASS 混合？

> ID：14579284
> 
> 赞同：3
> 
> 时间：2013-01-29T09:14:00.150
> 
> 标签：sass

我知道我可以使用 mixins 来用一些常用的样式扩展 sass 类。另一方面，我可以用一个类来做，并为相关的 html 元素设置它。

*   那么我为什么要使用它呢？
*   您建议在哪些情况下使用它？
*   它有什么优势吗？
*   它被认为是一个标准吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:17:32.730

当您不总是希望将相同的值应用于选择器时，您可以使用 mixin。

例如，如果您想制作带有圆角的东西，您将创建一个接受“radius”参数的mixin：

```
=borderRadius($value)
  border-radius: $value
  -webkit-border-radius: $value
  -moz-border-radius: $value
  -o-border-radius: $value 
```

然后你可以在其他地方做：

```
.selector1
  +borderRadius(5px)

.selector2
  +borderRadius(10px) 
```

这基本上是干的。Ti 使代码更易于维护，例如，一旦您不需要支持 Opera，您只需`-o-border-radius`在一个地方删除，而不是搜索所有文件并从多个地方删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:26:07.613

使用 mixins 有几个优点：

1) 要使用一个类，您实际上必须用这样的类标记所有 html 元素（=创建不必要的开销），mixin 可以是现有类的扩展，也可以在必要时创建其他类。

2) Mixins 可以接受参数，使它们具有高度的动态性和可重用性。你只需要一个参数化的 mixin，你需要几个类。（boderradii、颜色、透明度、字体大小等）：

```
@mixin colors($text, $background, $border) {
  color: $text;
  background-color: $background;
  border-color: $border;
}

$values: #ff0000, #00ff00, #0000ff;
.primary {
  @include colors($values...);
} 
```

^(* 来自 Sass-Doc 的示例)

3) 类应该有语义。Mixin 应该更像代码片段，能够在许多不同的地方使用。

我上面提到的所有这些要点的一个很好且更复杂的例子是 pduersteler 的 mixin。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:19:57.427

作为 mixins 的示例；假设您有一个带有固定网格中图标的精灵。每个图标都是 32x32px，您希望基于该精灵生成 32x32px 和 16x16px 的图标。这就是 mixin 可以非常方便的地方。

```
@mixin icon($name, $left, $top)
{
  &.#{$name}-16:not(.raw)
  {
    &:before
    {
        float: left;
        content: "";
        width: 16px;
        height: 16px;
        margin-right: 8px;

        background-size: 300px 300px;
        background-image: image_url('icons/sprite_gray.png');
        background-position: -#{$left * 16}px -#{$top * 16}px;
    }

    &:hover:before { background-position: -#{$left * 16}px -#{$top * 16 + 16 * 1}px; }
    &.active:before { background-position: -#{$left * 16}px -#{$top * 16 + 16 * 2}px; }
    &.active.contrast:before { background-position: -#{$left * 16}px -#{$top * 16 + 16 * 3}px; }
  }

  &.#{$name}-16.raw
  {
    width: 16px;
    height: 16px;

    background-size: 300px 300px;
    background-image: image_url('icons/sprite_gray.png');
    background-position: -#{$left * 16}px -#{$top * 16}px;
  }

  &.#{$name}-32:not(.raw)
  {
    &:before
    {
        content: "";
        width: 32px;
        height: 32px;

        background-size: 600px 600px;
        background-image: image_url('icons/sprite_gray.png');
        background-position: -#{$left * 32}px -#{$top * 32}px;
    }

    &:hover:before { background-position: -#{$left * 32}px -#{$top * 32 + 32 * 1}px; }
    &.active:before { background-position: -#{$left * 32}px -#{$top * 32 + 32 * 2}px; }
    &.active.contrast:before { background-position: -#{$left * 32}px -#{$top * 32 + 32 * 3}px; }
  }

  &.#{$name}-32.raw
  {
    display: inline-block;
    width: 32px;
    height: 32px;

    background-size: 600px 600px;
    background-image: image_url('icons/sprite_gray.png');
    background-position: -#{$left * 32}px -#{$top * 32}px;
  } 
```

}

所以使用这个 mixin，我可以给图标的名称和位置来创建样式，例如：

```
.icon { 
    @include icon(user, 1, 1);
    @include icon(role, 5, 1);
} 
```

这给了我`user-16, user-32, role-16, role-32`实现图标的类。

（在此示例中，它们作为`:before`内容附加，除非您使用`.raw`）

# asp.net-mvc - MVC 如何获取未连接到视图模型的输入元素的验证样式？

> ID：14579285
> 
> 赞同：2
> 
> 时间：2013-01-29T09:14:01.340
> 
> 标签：asp.net-mvc

在我看来，我有一个搜索字段，`id = searchPrimaryTrade`. 必须找到并提交主要交易。

我使用 jquery 将所选交易的 id 复制到隐藏字段中；

```
@Html.HiddenFor(model => model.PrimaryTradeId) 
```

如果用户未输入主要交易，则会显示错误消息。

但是，我还想做的是向搜索文本字段触发相同的验证 css 样式并在其旁边`(id = searchPrimaryTrade)`显示标记。`*`换句话说，我希望给文本框一个红色边框。

在下面的代码中，这是未输入 companyName 时发生的情况。那么我该怎么做呢？

```
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    ViewContext.FormContext.ValidationSummaryId = "valSumId";
    @Html.ValidationSummary(false, "Please fix these errors.", new Dictionary<string, object> { { "id", "valSumId" } });

    <fieldset>
        <legend>Create Subcontractor</legend>
        <p class="highlight">@ViewBag.Message</p>
        <table class="formTable">
            <tr>
                <td class="leftCell">@Html.LabelFor(model => model.Subcontractor.CompanyName) </td>
                <td class="rightCell">@Html.TextBoxFor(model => model.Subcontractor.CompanyName, new { @style = "width: 300px;" })
                @Html.ValidationMessageFor(model => model.Subcontractor.CompanyName, "*")</td>
            </tr>
            <tr>
                <td class="leftCell">@Html.LabelFor(model => model.PrimaryTrade)</td>
                <td class="rightCell"><input type="search" name="searchPrimaryTrade" id="searchPrimaryTrade" data-scd-autocomplete="@Url.Action("AutocompletePrimaryTrade", "DataService")" style = "width: 300px;" data-val="true" data-val-required="Must enter a Primary Trade" class="primaryTrade required"/>
                    <input type="button" id="ResetPrimaryTrade" value="Reset"/><br/>
                    @Html.HiddenFor(model => model.PrimaryTradeId)
                    @Html.ValidationMessageFor(model => model.PrimaryTradeId, "*")
                    Cannot find the trade? @Html.DialogFormButton("Add New Trade", Url.Action("AddTrade", "Popup"), "Add New Trade", null, Url.Action("Create"), "buttonAddNewTrade")
                </td>
            </tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T16:45:26.887

你真的不需要这个隐藏的字段。您可以简单地使用属性装饰`PrimaryTradeId`视图模型上的`[Required]`属性：

```
[Required]
public int? PrimaryTradeId { get; set; } 
```

然后使用`Html.TextBoxFor`and`Html.ValidationMessageFor`助手而不是硬编码标记中的某些输入字段：

```
<td class="rightCell">
    @Html.TextBoxFor(
        model => model.PrimaryTradeId,
        new {
            type = "search",
            data_scd_autocomplete = Url.Action("AutocompletePrimaryTrade", "DataService"),
            style = "width: 300px;",
            @class = "primaryTrade required"
        }
    )
    <input type="button" id="ResetPrimaryTrade" value="Reset"/><br/>

    @Html.ValidationMessageFor(model => model.PrimaryTradeId, "*")

    Cannot find the trade? 
    @Html.DialogFormButton(
        "Add New Trade", 
        Url.Action("AddTrade", "Popup"), 
        "Add New Trade", 
        null, 
        Url.Action("Create"), 
        "buttonAddNewTrade"
    )
</td> 
```

Html 助手现在将负责根据模型上的数据注释生成正确的标记并发出正确的验证属性。

# c# - WPF - 绑定祖先的两个不同视图

> ID：14579289
> 
> 赞同：0
> 
> 时间：2013-01-29T09:14:18.730
> 
> 标签：c#, wpf, mvvm

我有四个视图，第一个是 a `Window`，其中包含 a `ComboBox`，对于我的每个项目，我`ComboBox`有三种不同的类型，所以我只为每种类型的项目制作了三个不同的小视图。

我的问题是，我无法将我的文本值与主视图中的祖先当前项目绑定。当我尝试在列表/CurrentItem 上绑定时，我的程序崩溃了。

主视图中的列表：

```
<GroupBox Margin="5,5,10,5" Grid.Column="1" Header="MyListOfTypes" Name="MyListOfTypes">
            <ListBox ItemsSource="{Binding Path=MyListOfTypes}" SelectedItem="{Binding Path=SelectedType}" />
        </GroupBox> 
```

我在小视图中的文本框：

```
<UserControl x:Class="Editeur.View.BaliseFixView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             mc:Ignorable="d" 
             d:DesignHeight="28" d:DesignWidth="240">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="3*" />
        </Grid.ColumnDefinitions>
        <Label Content="Fix :" />
        <TextBox Width="170px" Grid.Column="1" Name="fixValue" Text="{Binding Source={StaticResource Locator}, Path=Balise.MyListOfTypes/}"/>
    </Grid>
</UserControl> 
```

定位器：

```
public class ViewModelLocator
    {
        public ViewModelLocator()
        {
            ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

            SimpleIoc.Default.Register<BaliseViewModel>();
        }

        public BaliseViewModel Balise
        {
            get
            {
                return ServiceLocator.Current.GetInstance<BaliseViewModel>();
            }
        }
    } 
```

**解决方案**

通过添加属性修复：

```
public string Valeur
{
    get
    {
        return _valeur;
    }
    set
    {
        Set(() => Valeur, ref _valeur, value);
    }
} 
```

还有一个功能

```
public void RemplirDicoVars(XDocument document)
{
    ApercuValeurs = (
        from p in document.Descendants("apercu")
        select new
        {
            Key = (string)(p.Attribute("var")),
            Value = (string)(p.Attribute("value"))
        }).ToDictionary(pair => pair.Key, pair => pair.Value);
} 
```

XAML：

```
<TextBox Width="170px" Grid.Column="1" Name="fixValue" Text="{Binding Path=Valeur}" /> 
```

# ios - setObject 在其中一个类中不起作用

> ID：14579291
> 
> 赞同：0
> 
> 时间：2013-01-29T09:14:23.747
> 
> 标签：ios, nsmutabledictionary, writetofile

我正在尝试通过实现（在 blablabla.m 中）创建一个“saveState”方法：

```
-(void)saveState {
NSString *masterCode = [[NSString alloc] initWithString:first];
masterCode = [masterCode stringByAppendingString:second];
masterCode = [masterCode stringByAppendingString:third];
masterCode = [masterCode stringByAppendingString:fourth];
NSLog(@"master passcode - %@", masterCode);

NSString *plistPath = [NSTemporaryDirectory() stringByAppendingPathComponent:@"timeLimiterMasterCode.plist"];

if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath]) {
    [[NSFileManager defaultManager] createFileAtPath:plistPath contents:nil attributes:nil];
}

if ([[NSFileManager defaultManager] fileExistsAtPath:plistPath]) {
    NSLog(@"file exists, %@", plistPath);
}

NSMutableDictionary *plistCode = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath];

[plistCode setObject:masterCode forKey:@"MasterCode"];

NSLog(@"whole plist - %@", plistCode);

[plistCode writeToFile:plistPath atomically: YES];

NSLog(@"master passcode from file - %@", [plistCode objectForKey:@"MasterCode"]);

} 
```

masterCode 不是空的，在 blablabla.h 文件中我使用协议 UIApplicationDelegate，“文件存在”但应用程序返回：2013-01-29 12:19:50.496 timeLimiter[916:907] 整个 plist - (null) 2013-01 -29 12:19:50.500 timeLimiter[916:907] 文件中的主密码 - (null)

除了在 viewController (.m, .h) 中，我使用另一个 plist 和 write 方法并且工作正常。

我发现 [plistCode setObject:masterCode forKey:@"MasterCode"] 是山。我试图用@“test”替换'masterCode'，但没有任何意义。

你能解决我的问题吗？请？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:53:09.797

我找到了解决方案，但不知道解释。解决方法是更换

```
NSMutableDictionary *plistCode = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath] 
```

和

```
NSMutableDictionary *newPlistCode = [[NSMutableDictionary alloc] init]. 
```

之后这种方法效果很好！感谢初始化）

# android - 如何通过本机代码从 /mnt/sdcard/ 中删除文件

> ID：14579295
> 
> 赞同：0
> 
> 时间：2013-01-29T09:15:00.337
> 
> 标签：android

如何通过本机代码从 /mnt/sdcard/ 中删除文件？sdcard 在 android "d---rwxr-x system sdcard_rw 2013-01-29 14:39 sdcard" 中的权限

android中文件的权限“----rwxr-x”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:24:00.573

您需要使用中的`delete()`方法删除文件`File`

```
File file = new File(pathToFile);
boolean deleted = file.delete(); 
```

pathToFile 是 SDCARD 中文件的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:26:45.927

你的意思是使用 adb 命令删除文件

> adb shell rm /sdcard/你的路径/文件

从android应用程序你可以使用

```
 String deleteCmd = "rm " + "/sdcard/yourpath/file";
                Runtime runtime = Runtime.getRuntime();
                try {
                    runtime.exec(deleteCmd);
                } catch (IOException e) {
                    if (log != null)
                        log.error("IO Exception deleteFiles" + e);
                } 
```

使用 execl 使用 c 运行上述命令

# android - Android 在广播接收器中捕获自定义架构链接

> ID：14579303
> 
> 赞同：2
> 
> 时间：2013-01-29T09:15:27.967
> 
> 标签：android, android-intent

我目前正在做一个自定义方案意图过滤器来从浏览器打开我自己的应用程序。

是否可以改为打开活动来启动广播接收器。

我当前的活动广播接收器代码是这样的：

```
 <action android:name="android.intent.action.VIEW" >
            </action>

            <category android:name="android.intent.category.DEFAULT" >
            </category>
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="shortener.com"
                android:scheme="shortener" >
            </data>
        </intent-filter> 
```

这是我的接收器代码。不触发。尝试了查看操作和自定义操作

```
 <receiver android:name="MyReceiver" >
            <intent-filter>
                <action android:name="com.dg.action.CONFIGURE" >
                </action>
                <category android:name="android.intent.category.DEFAULT" >
                </category>
                <data
                    android:host="shortener.com"
                    android:scheme="shortener" >
                </data>
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-08T16:47:18.570

我知道这是旧的，但由于没有明确和可接受的答案，嘿嘿。正如官方文档所说：

> ... Intent 广播机制 .. 与用于使用 Context.startActivity() 启动活动的 Intent 完全分开。BroadcastReceiver 无法查看或捕获与 startActivity() 一起使用的 Intent；同样，当你广播一个 Intent 时，你永远不会找到或启动一个 Activity。这两个操作在语义上是非常不同的：使用 Intent 启动一个 Activity 是一个前台操作，它会修改用户当前正在与之交互的内容；广播 Intent 是用户通常不知道的后台操作。

来源：[Android 开发者文档，BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

希望这说明清楚。

# java - 如何使 java JMF 工作以使用多个图像制作视频？

> ID：14579309
> 
> 赞同：0
> 
> 时间：2013-01-29T09:15:55.177
> 
> 标签：java, image, video, ffmpeg, jmf

我正在尝试使用 JMF 使用多个 jpg 图像制作视频。这些图像也是使用`ImageIO`Java 本身保存的。不幸的是，我找不到代码示例或工作代码/类来完成使用 JMF 制作视频。

这里有一个 JpegImagesToMovie.java 类： [http](http://www.oracle.com/technetwork/java/javase/documentation/jpegimagestomovie-176885.html) ://www.oracle.com/technetwork/java/javase/documentation/jpegimagestomovie-176885.html 但该链接似乎已损坏。

有人可以发布一个工作代码，或者告诉我用java和不同类制作视频的其他方法吗？

我认为此页面上的工作代码将来可能会帮助像我这样的其他人。

顺便说一句，我也尝试使用 ffmpeg 来编译视频，但这类似于：

```
image2 codec not found 
```

当我们使用java ImageIO制作jpg图片时，是不是和ffmpeg编解码器不兼容？

### 爪哇命令：

```
ImageIO.write(capture, "jpg", new File( uploadPath, filename)); 
```

这是ffmpeg错误：

```
ffmpeg.exe -f image2 -i pic\s%d.jpeg -vcodec mpeg2video vid\video.mpg
FFmpeg version SVN-r7760, Copyright (c) 2000-2006 Fabrice Bellard, et al.
  configuration:  --enable-memalign-hack --enable-gpl --cpu=i686 --enable-swscaler --enable-pthreads --enable-avisynth --enable-mp3lame --enable-xvid --enable-x264 --enable-libnut --enable-libogg --enable-vorbis --enable-libtheora --enable-faad --enable-faac --enable-libgsm --enable-dts --enable-a52 --enable-amr_nb --enable-amr_wb 
  libavutil version: 49.2.0
  libavcodec version: 51.29.0
  libavformat version: 51.8.0
  built on Jan 29 2007 19:58:47, gcc: 3.4.6
[image2 @ 00931554]Could not find codec parameters (Video: mjpeg)
pic\sd.jpeg: could not find codec parameters 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:03:05.043

看起来这个命令使用 ffmpeg 工作：

```
ffmpeg -f image2 -i img%d.jpg a.avi 
```

还有1个问题。我将命令添加到我的 java 程序中，例如：

```
Runtime.getRuntime().exec("ffmpegp.exe -f image2 -i pic\\s%d.jpg vid\\video.avi"); 
```

这是创建视频！有没有办法在视频创建完成时“跟踪”，以便在 java GUI 上显示一条消息，例如“视频制作”等。

# stata - Stata Panel：如何为组分配值，合并？

> ID：14579310
> 
> 赞同：1
> 
> 时间：2013-01-29T09:16:01.990
> 
> 标签：stata

我有一个公司小组（id，year）。每个公司也属于一个特定的国家。现在我想按国家添加 GDP 时间序列。

目标是，例如，美国的每家公司都被分配了当年美国的 GDP 等。

谁能告诉我该怎么做？有什么方法可以在这里使用`merge`命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:56:25.787

[`merge`](http://stata.com/help.cgi?merge)正如正确说明的帮助文件一样，`merge m:m`大多数情况下都是错误的方法。如果您将公司数据集设置为

```
clear
input country id year profit
1 1 2010 152
1 1 2011 -8
1 2 2010 1090
2 3 2010 502
2 3 2011 -15
end
tempfile firms
save `firms' 
```

和国家文件

```
clear
input country year gdp
1 2010 287582354
1 2011 298723412
2 2010 89734531
2 2011 87340120
end
tempfile gdp
save `gdp' 
```

然后从您的`firms`文件开始，您可以按如下方式合并结果：

```
use `firms', clear
merge m:1 country year using `gdp'
* check results
tab _merge
assert _merge == 3
* clean up the remaining mess
drop if _merge !=3
drop _merge 
```

这应该产生看起来像的输出

```
Result                           # of obs.
-----------------------------------------
not matched                             0
matched                                 5  (_merge==3)
----------------------------------------- 
```

如果你没有任何不匹配的东西（这是我的验证和清理代码），你应该很高兴。

# xml - 使用 XSLT 基于属性值移动 XML 元素

> ID：14579314
> 
> 赞同：1
> 
> 时间：2013-01-29T09:16:09.920
> 
> 标签：xml, xslt

我需要根据属性值将 XML 元素移动到相应的位置。当 id 的属性值匹配时，`<m:footnote>`应该将元素移动到相应的位置。`<m:endnote>`

**示例 XML：**

```
<m:chapter xmlns:m="http://www.w3.org/1998/Math/MathML">
  <m:front>
    <m:p>This is <m:footnote id="1"/>para</m:p>
  </m:front>
  <m:body>
    <m:p>This is <m:footnote id="2"/>para</m:p>
    <m:p>This is <m:footnote id="3"/>para</m:p>
    <m:p>This is <m:footnote id="4"/>para</m:p>
  </m:body>
  <m:endnote>
    <m:footnote id="1">This is footnote 1</m:footnote>
    <m:footnote id="2">This is footnote 2</m:footnote>
    <m:footnote id="3">This is footnote 3</m:footnote>
    <m:footnote id="4">This is footnote 4</m:footnote>
  </m:endnote>
</m:chapter> 
```

**需要输出：**

```
<?xml version='1.0' encoding='UTF-8' ?>
<m:chapter xmlns:m="http://www.w3.org/1998/Math/MathML">
<m:front>
<m:p>This is <m:footnote id="1">This is footnote 1</m:footnote>para</m:p>
</m:front>
<m:body>
<m:p>This is <m:footnote id="2">This is footnote 2</m:footnote>para</m:p>
<m:p>This is <m:footnote id="3">This is footnote 3</m:footnote>para</m:p>
<m:p>This is <m:footnote id="4">This is footnote 4</m:footnote>>para</m:p>
</m:body>
</m:chapter> 
```

**XSLT 试过：**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:m="http://www.w3.org/1998/Math/MathML" exclude-result-prefixes="m">
<xsl:output method="xml" encoding="UTF-8" indent="no"/>
<xsl:template match="@* | node()">
<xsl:copy>
<xsl:apply-templates select="@* | node()"/>
</xsl:copy>
</xsl:template>
<xsl:template match="m:chapter">
<xsl:copy>
<xsl:apply-templates/>
<xsl:for-each select="child::*/descendant::m:footnote">
<xsl:choose>
<xsl:when test="not(parent::m:endnote)">
<xsl:if test="string(self::m:footnote/@id) = string('ancestor::m:chapter/m:endnote/m:footnote/@id')">
<xsl:copy-of select="m:chapter/m:endnote/m:footnote"/>
</xsl:if>
</xsl:when>
</xsl:choose>
</xsl:for-each>
</xsl:copy>
</xsl:template>
<xsl:template match="m:endnote"></xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:35:37.677

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
      xmlns:m="http://www.w3.org/1998/Math/MathML" exclude-result-prefixes="m">
  <xsl:output method="xml" encoding="UTF-8" indent="no"/>
  <xsl:key name="kEndnote" match="m:endnote/m:footnote" use="@id"/>
  <xsl:key name="kFootnoteRef" match="m:p/m:footnote" use="@id"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="m:footnote">
    <xsl:copy>
      <xsl:apply-templates select="@*" />
      <xsl:value-of select="key('kEndnote', @id)"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="m:endnote[not(m:footnote[not(key('kFootnoteRef', @id))])]" />
  <xsl:template match="m:endnote/m:footnote[key('kFootnoteRef', @id)]" />
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<m:chapter xmlns:m="http://www.w3.org/1998/Math/MathML">
  <m:front>
    <m:p>This is <m:footnote id="1">This is footnote 1</m:footnote>para</m:p>
  </m:front>
  <m:body>
    <m:p>This is <m:footnote id="2">This is footnote 2</m:footnote>para</m:p>
    <m:p>This is <m:footnote id="3">This is footnote 3</m:footnote>para</m:p>
    <m:p>This is <m:footnote id="4">This is footnote 4</m:footnote>para</m:p>
  </m:body>

</m:chapter> 
```

`<m:p>`在删除了第 2 和第 3 的示例输入上运行时，这会产生：

```
<m:chapter xmlns:m="http://www.w3.org/1998/Math/MathML">
  <m:front>
    <m:p>This is <m:footnote id="1">This is footnote 1</m:footnote>para</m:p>
  </m:front>
  <m:body>
    <m:p>This is <m:footnote id="4">This is footnote 4</m:footnote>para</m:p>
  </m:body>
  <m:endnote>

    <m:footnote id="2">This is footnote 2</m:footnote>
    <m:footnote id="3">This is footnote 3</m:footnote>

  </m:endnote>
</m:chapter> 
```

# c# - 如何获取网站 iis 6-7 的主机/IP 和端口？

> ID：14579317
> 
> 赞同：0
> 
> 时间：2013-01-29T09:16:32.897
> 
> 标签：c#, .net, iis, host, directoryentry

这是我的问题。我希望我可以列出所有本地托管的 IIS 网站。对于每个我想检索的站点名称，主机名 ex。("localhost:80") 和端口号。我可以检索很多信息，但找不到有关主机名的信息在哪里。非常感谢你。

这是我的代码 [c#] ：

```
DirectoryEntry iis = new DirectoryEntry("IIS://" + Environment.MachineName + "/w3svc");

        iis = new DirectoryEntry("IIS://" + Environment.MachineName + "/w3svc");

        foreach (DirectoryEntry site in iis.Children)
        {

            if (site.SchemaClassName == "IIsWebServer") 
            {
                Console.Out.WriteLine(site.Name);
                //I do not know the name of the property to find the "host"
                Console.Out.WriteLine(site.Host); ???

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:40:37.400

我认为您需要从[ServerBindings](http://msdn.microsoft.com/en-us/library/ms524773.aspx)属性中解析它。格式为 IP:Port:Hostname - 如果是默认网站，则 Hostname 应为空白或 *。

还有[SecureBindings](http://msdn.microsoft.com/en-us/library/ms524481.aspx)，（因为你想要端口号）你也需要抓住它。

# python - 使用 Python 将远程数据库的数据库同步到本地数据库，反之亦然

> ID：14579318
> 
> 赞同：2
> 
> 时间：2013-01-29T09:16:33.783
> 
> 标签：python, sync, remote-access

我想询问有关使用Python程序在远程数据库和本地数据库之间同步记录的问题。我只是 Python 语言的新手，想在这些方面寻求帮助。

如果这些问题的过程，技术和样本是什么。我有一个网站，其中包含销售产品和服务。访问者可以注册以便他们订购产品或服务。

我想制作一个 Python 程序，它根据客户端的电子邮件和密码将信息/记录提取到我的 python 桌面应用程序中，这将在程序运行后最初设置。

这个概念就像 Dropbox，但不同之处在于我想同步记录，当客户在他/她的本地机器上订购时，即使离线，信息也会保存在本地，并将上传到他/她的远程服务器上。她连接到互联网。

在此先感谢您的帮助。

# spring - 上下文：属性占位符不起作用

> ID：14579319
> 
> 赞同：0
> 
> 时间：2013-01-29T09:16:37.403
> 
> 标签：spring, jakarta-ee

我的任务是相对简单的口味，但我被困在这一点上。我的问题是

这两种语法是否相等？

一个

```
<context:property-placeholder location="classpath:application.properties" system-properties-mode="OVERRIDE"/> 
```

乙

```
<bean id="placeholderConfig" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:application.properties"/>
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE"/>
</bean> 
```

应用上下文

```
<beans
xmlns="http://www.springframework.org/schema/beans"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:security="http://www.springframework.org/schema/security"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd"
> 
```

结果就在这里

```
 https://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:35:31.647

在 Spring 3.1 版本中（在您的 xml 模式中引用）它们并不完全相等

`context:property-placeholder`将定义一个实例，`PropertySourcesPlaceholderConfigurer` 而您已经`PropertyPlaceHolderConfigurer`用 bean 声明声明了一个实例。

这就是为什么有时使用标签而不是直接 bean 声明是合理的（即定义做*什么*而不是*如何*完成）。

从 PropertySourcesPlaceholderConfigurer javadoc：

> 从 Spring 3.1 开始，PropertySourcesPlaceholderConfigurer 应优先于此实现使用；通过利用 Spring 3.1 中提供的 Environment 和 PropertySource 机制，它更加灵活。
> 
> 在 Spring 3.1 之前，命名空间元素注册了一个 PropertyPlaceholderConfigurer 实例。如果使用命名空间的 spring-context-3.0.xsd 定义，它仍然会这样做。也就是说，您可以通过命名空间保留 PropertyPlaceholderConfigurer 的注册，即使使用 Spring 3.1；只需不要更新您的 xsi:schemaLocation 并继续使用 3.0 XSD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:28:05.960

是的，它们是一样的。

根据[上下文命名空间文档](http://www.springframework.org/schema/context/spring-context-3.1.xsd)

> “OVERRIDE”表示应首先针对系统​​属性解析占位符，然后针对任何本地属性解析

根据[PropertyPlaceholderConfigurer](http://static.springsource.org/spring/docs/3.1.0.RELEASE/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html#SYSTEM_PROPERTIES_MODE_OVERRIDE)

> 首先检查系统属性，然后再尝试指定的属性。这允许系统属性覆盖任何其他属性源。

# facebook - Perl - 身份验证图 API 循环

> ID：14579320
> 
> 赞同：2
> 
> 时间：2013-01-29T09:16:38.243
> 
> 标签：facebook, perl, facebook-graph-api, authentication

我想通过 Graph API（使用 Perl）获取 FB 用户数据。
我有一个 facebook 应用程序，配置为“带有 FB 登录的网站”。
我正在使用[Net::Facebook::Oauth2](http://search.cpan.org/~mamod/Net-Facebook-Oauth2-0.05/README.pod)

该应用程序配置有这样的回调URL：`"http://localhost/myfile.pl"`

当我打开 localhost/myfile.pl 时，它可以让我登录 facebook 并让应用程序访问我的数据。但是当涉及到它应该回退并获取访问令牌时（至少我认为这就是它接下来应该做的），它会以无限循环结束。

`http://localhost/myfile.pl`包含以下内容：

```
#!"C:\strawberry\perl\bin\perl.exe"
use CGI::Carp qw(fatalsToBrowser);  # this makes perl showing (syntax) errors in browser

use CGI;
    my $cgi = CGI->new;

    use Net::Facebook::Oauth2;

    my $fb = Net::Facebook::Oauth2->new(
        application_id => 'xxxMY_APP_IDXXX', 
        application_secret => 'xxxMY_SECRETxxx',
        callback => 'http://localhost/myFile.pl'
    );

    ###get authorization URL for your application
    my $url = $fb->get_authorization_url(
        scope => ['offline_access','publish_stream'],
        display => 'page'
    );

    ####now redirect to this url
    print $cgi->redirect($url);

    ##once user authorizes your application facebook will send him/her back to your application
    ##to the callback link provided above

    ###in your callback block capture verifier code and get access_token

    my $fb = Net::Facebook::Oauth2->new(
        application_id => 'xxxMY_APP_IDxxx',
        application_secret => 'xxxMY_SECRETxxx',
        callback => 'http://localhost/myFile.pl'
    );

    my $access_token = $fb->get_access_token(code => $cgi->param('code'));
    ###save this token in database or session

    ##later on your application you can use this verifier code to comunicate
    ##with facebook on behalf of this user

    my $fb = Net::Facebook::Oauth2->new(
        access_token => $access_token
    );

    my $info = $fb->get(
        'https://graph.facebook.com/me' ##Facebook API URL
    );

    print $info->as_json; 
```

我在 Perl 脚本中做错了吗？或者是因为我的回调的本地主机？

在此先感谢，
克里斯托夫·特沃迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:54:22.823

你应该使用一个参数来阻止无限循环的发生。基本上，应用程序对 FB 进行身份验证，然后再次调用相同的脚本，它会看到它已通过身份验证并永远循环。

```
if ( ! defined $cgi->param('code') ){
  my $access_token = $fb->get_access_token(code => $cgi->param('code'));
  my $fb = Net::Facebook::Oauth2->new(
    application_id => 'xxxMY_APP_IDxxx',
    application_secret => 'xxxMY_SECRETxxx',
    callback => "http://localhost/myFile.pl";
  );
  ###get authorization URL for your application
  my $url = $fb->get_authorization_url(
    scope => ['offline_access','publish_stream'],
    display => 'page'
  );

  ####now redirect to this url
  print $cgi->redirect($url);

} else {
  ##later on your application you can use this verifier code to comunicate
  ##with facebook on behalf of this user
  my $access_token = $fb->get_access_token(code => $cgi->param('code'));
  my $fb = Net::Facebook::Oauth2->new(
    access_token => $access_token
  );

  my $info = $fb->get(
    'https://graph.facebook.com/me' ##Facebook API URL
  );

  print $info->as_json;
} 
```

# python - 从 django 的数据库中获取多行？

> ID：14579324
> 
> 赞同：2
> 
> 时间：2013-01-29T09:16:48.510
> 
> 标签：python, database, django, django-views

我必须根据某些条件从数据库中获取多行。数据库中可能有一行用于匹配查询或多行。我可以将 get() 用于一行，但它不会获取多行。

这是我的代码：

`value=table.objects.get(col_name=1)`然后我可以访问它的数据，`value.col`但正如我所说，如果这个查询返回多于一行，它会给我错误。

我也尝试过 filter() ，`value=table.objects.filter(col_name=1)`但后来我无法访问它的数据`value.col`。

所以请建议我如何从数据库中获取多行并逐一访问这些行。

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:37:35.033

```
values = table.objects.filter(col_name=1)
for value in values.all():
    # Do something with value.col 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:36:48.500

是的，您必须遍历查询集中的项目：

```
for item in value:
    item.col 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-07T15:09:06.490

```
value=table.objects.filter(col_name=1) 
```

将返回一个“django.db.models.query.QuerySet”类型，可以使用“for”循环进行迭代

# c# - WPF使用文本框自定义样式导致无法将文本插入文本框

> ID：14579326
> 
> 赞同：1
> 
> 时间：2013-01-29T09:16:53.293
> 
> 标签：c#, wpf, textbox, wpf-controls

我为我的`TextBox`控件编写了一个自定义样式，现在当我使用它时，我无法`TextBox`在运行时输入文本。这是我的风格：

```
<Style x:Key="TextBoxStyle"
       TargetType="TextBox" >
        <Setter Property="Height" Value="41"></Setter>
        <Setter Property="Width" Value="114"></Setter>
        <Setter Property="Foreground" Value="#FFDDDDDD"></Setter>
        <Setter Property="Focusable" Value="False"></Setter>
        <Setter Property="FontFamily" Value="Verdana"></Setter>
        <Setter Property="FontSize" Value="18"></Setter>
        <Setter Property="FontWeight" Value="Regular"></Setter>
        <Setter Property="TextAlignment" Value="Center"></Setter>
        <Setter Property="IsReadOnly" Value="False"></Setter>
        <Setter Property="BorderBrush" Value="{x:Null}"></Setter>
        <Setter Property="HorizontalContentAlignment" Value="Center"></Setter>
        <Setter Property="VerticalContentAlignment" Value="Center"></Setter>
        <Setter Property="Background">
            <Setter.Value>
                <ImageBrush ImageSource="/App;component/Images/BarsForms/precent_bg.png" Stretch="UniformToFill" TileMode="None" />    
            </Setter.Value>
        </Setter>
    </Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:48:50.153

```
<Setter Property="Focusable" Value="False"></Setter> 
```

`Focusable`在您的样式中设置为 false 会阻止光标选择`TextBox`和设置光标以进行键入的能力。

# javascript - 在旋转的图像上使用 jQuery UI Resizable

> ID：14579327
> 
> 赞同：1
> 
> 时间：2013-01-29T09:16:54.720
> 
> 标签：javascript, jquery, jquery-ui

以前有人问过这个问题，但没有成功回答。

我正在使用 jQuery UI Resizable 来让用户调整图像大小。我想让用户旋转图像然后调整它的大小，问题是当图像旋转时，Resizable 的鼠标坐标也在旋转。

例如，如果我将图像旋转 90 度，则鼠标左右移动会垂直而不是水平调整图像大小。

应该以某种方式修改 jQuery UI Resizable 以支持旋转。

有人知道如何解决它或有一个用于调整大小+旋转的插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:42:13.037

看看这个[小提琴](http://jsfiddle.net/jKYkT/51/)链接，如果将图像旋转 90 度，这将帮助您解决问题，鼠标左右移动会垂直而不是水平调整图像大小。我添加了这样的图像。

```
 <div id="resizable"><img src="https://www.google.com/images/srpr/logo3w.png" id="image"/></div> 
```

我希望这能帮到您。

# android - 如何为附加图像（布局）实现android XML？

> ID：14579328
> 
> 赞同：0
> 
> 时间：2013-01-29T09:16:55.243
> 
> 标签：android, xml, android-layout

我需要实现我的 android 布局，如下图所示：

![在此处输入图像描述](../Images/0de3d88e17881c092e6160e40863ec09.png)

**A** -**应按以下方式固定组件** ![在此处输入图像描述](../Images/35059a9965397883674b9cdc305a5796.png)

**B** -**应该占据 75% 的屏幕空间并且应该有一个垂直滚动条**

我的问题是，我的 Android XML 会是什么样子？伙计们提前谢谢。

我的 XML 如下：

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:android1="http://schemas.android.com/apk/res/android"
    android:id="@+id/tvDate"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <RelativeLayout
        android1:layout_width="match_parent"
        android1:layout_height="match_parent" >

        <NumberPicker
            android1:id="@+id/numberPicker2"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignTop="@+id/numberPicker1"
            android1:layout_toRightOf="@+id/numberPicker1" />

        <NumberPicker
            android1:id="@+id/numberPicker3"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignTop="@+id/numberPicker2"
            android1:layout_toRightOf="@+id/numberPicker2" />

        <NumberPicker
            android1:id="@+id/numberPicker4"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignBottom="@+id/numberPicker3"
            android1:layout_toRightOf="@+id/numberPicker3" />

        <NumberPicker
            android1:id="@+id/numberPicker5"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignTop="@+id/numberPicker4"
            android1:layout_toRightOf="@+id/numberPicker4" />

        <NumberPicker
            android1:id="@+id/numberPicker6"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignBottom="@+id/numberPicker5"
            android1:layout_toRightOf="@+id/numberPicker5" />

        <NumberPicker
            android1:id="@+id/numberPicker7"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignBottom="@+id/numberPicker6"
            android1:layout_toRightOf="@+id/numberPicker6" />

        <NumberPicker
            android1:id="@+id/numberPicker8"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignTop="@+id/numberPicker7"
            android1:layout_toRightOf="@+id/numberPicker7" />

        <TextView
            android1:id="@+id/textView1"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignLeft="@+id/numberPicker1"
            android1:layout_alignParentTop="true"
            android1:layout_marginTop="22dp"
            android1:text="Start Mileage"
            android1:textAppearance="?android:attr/textAppearanceMedium" />

        <ImageView
            android1:id="@+id/imageView1"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignParentTop="true"
            android1:layout_marginRight="25dp"
            android1:layout_toLeftOf="@+id/textView1"
            android1:src="@drawable/line" />

        <Button
            android1:id="@+id/button1"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignParentLeft="true"
            android1:layout_alignTop="@+id/textView1"
            android1:layout_toLeftOf="@+id/imageView1"
            android1:text="Request Bundle" />

        <EditText
            android1:id="@+id/editText2"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignBaseline="@+id/textView3"
            android1:layout_alignBottom="@+id/textView3"
            android1:layout_toLeftOf="@+id/imageView1"
            android1:layout_toRightOf="@+id/textView5"
            android1:ems="10" />

        <TextView
            android1:id="@+id/textView4"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignLeft="@+id/textView3"
            android1:layout_below="@+id/editText2"
            android1:layout_marginTop="29dp"
            android1:text="Driver Name"
            android1:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android1:id="@+id/editText3"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignBaseline="@+id/textView4"
            android1:layout_alignBottom="@+id/textView4"
            android1:layout_alignRight="@+id/editText2"
            android1:layout_toRightOf="@+id/textView5"
            android1:ems="10" />

        <TextView
            android1:id="@+id/textView5"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignLeft="@+id/textView4"
            android1:layout_below="@+id/editText3"
            android1:layout_marginTop="31dp"
            android1:text="Number of passengers"
            android1:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android1:id="@+id/editText4"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignBaseline="@+id/textView5"
            android1:layout_alignBottom="@+id/textView5"
            android1:layout_toLeftOf="@+id/imageView1"
            android1:layout_toRightOf="@+id/textView5"
            android1:ems="10" />

        <TextView
            android1:id="@+id/textView3"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignParentLeft="true"
            android1:layout_below="@+id/button1"
            android1:layout_marginLeft="26dp"
            android1:layout_marginTop="27dp"
            android1:text="Vehicle Number"
            android1:textAppearance="?android:attr/textAppearanceSmall" />

        <TextView
            android1:id="@+id/textView2"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignLeft="@+id/textView5"
            android1:layout_centerVertical="true"
            android1:text="Date"
            android1:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android1:id="@+id/editText1"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_alignRight="@+id/editText4"
            android1:layout_centerVertical="true"
            android1:layout_toRightOf="@+id/textView5"
            android1:ems="10" >

            <requestFocus />
        </EditText>

        <NumberPicker
            android1:id="@+id/numberPicker1"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:layout_below="@+id/textView1"
            android1:layout_marginLeft="242dp"
            android1:layout_toRightOf="@+id/textView5" />

    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:22:08.573

现在我认为您应该自己再次阅读您的要求。您已经提到了 A 和 B，所以显然您必须使用*两个*容器（假设您确定 Fragments 不是更好的选择）。你为什么只用一个？

并且只用滚动视图包装第二个容器。如果你把 ScrollView 放在最外层，*一切都会*滚动！

使用外部 LinearView 并给内部容器一些权重（左侧`android:layout_weight="1"`和右侧`android:layout_weight="3"`）。权重使用任何剩余空间，并根据它们占总重量的百分比进行分配。所以在这种情况下，你有 25% 和 75%。

你真的应该阅读这些布局。请参阅有关它的[Android 文档](http://developer.android.com/guide/topics/ui/declaring-layout.html)或查看博客[样式 Android](http://blog.stylingandroid.com/archives/297)。如果您无法理解 Eclipse 布局编辑器生成的内容，那么您将无法获得想要的结果。

# java - 在关闭之前从 JDialog 内部的 JPanel 读取数据

> ID：14579329
> 
> 赞同：1
> 
> 时间：2013-01-29T09:17:00.273
> 
> 标签：java, swing, jpanel, dispose, jdialog

我必须在 JDialog 中显示一个 Jpanel，到目前为止我已经处理了它，但是我不知道如何在处理它之前关闭对话框并在 Jpanel 中接收数据。

```
 newButton.addActionListener(new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent event)
        {
             JDialog dialog = new JDialog(Main.getMainFrame(), true);
            JPanel jPanel = new JPanel();
            dialog.getContentPane().add(jPanel);
            dialog.setMinimumSize(new Dimension(600, 800));
            dialog.setVisible(true);
            if (jPanel.close)
            {
                /*read some useful information from the jpanel*/
                dialog.setVisible(false);
                dialog.dispose();
            }
        }
    }); 
```

到目前为止，我已经在 J​​panel 中放置了一个按钮，它设置了一个 boolean close = true 并且对话框读取它并自行处理。但是这不起作用：我怀疑`jPanel.close()`在我单击 JPanel 内的关闭之前已经测试过，而它应该等待实际的关闭值发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:28:32.403

您可以使用这样的代码来获取容器窗口实例（`JDialog`在我们的例子中）

```
JDialog parentDialog=(JDialog)SwingUtilities.getWindowAncestor(jPanel); 
```

# iphone - 在 iOS 中，有没有办法通过向应用程序传递不同的参数来从多个快捷方式（图标）打开同一个应用程序？

> ID：14579330
> 
> 赞同：1
> 
> 时间：2013-01-29T09:17:02.743
> 
> 标签：iphone, ios, objective-c, xcode

我想知道这样的事情是否可行。我需要有 4 个应用程序。所有 4 个应用程序的 95% 的内容将显示在 WebViews 中，远程网站将在其中打开，所以我不想创建 4 个不同的应用程序，而是希望在主屏幕上有 4 个不同的图标可以打开相同通过传递不同的参数来应用。

欢迎提出建议/替代方案/黑客！！

注意：应用程序/应用程序的分发将不会通过 Apple App Store。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:35:36.713

It may be possible by using custom URL shortcuts on the home screen. This may require jailbreaking. See info at bottom of page [here](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html), and a tutorial [here](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/).

[This question](https://stackoverflow.com/questions/13723188/iphone-custom-url-scheme-add-shortcut-to-homescreen) is related, but doesn't have any good answers. It raises the concern that users might not want their home screen cluttered with four icons for one app or one set of related things.

See also this project, which apparently doesn't work any more but may have some hints:

[http://lifehacker.com/5859499/icon-project-creates-quick-ios-home-screen-shortcuts-to-contacts-settings-and-more](http://lifehacker.com/5859499/icon-project-creates-quick-ios-home-screen-shortcuts-to-contacts-settings-and-more)

# php - 如何在 MediaWiki 1.20.0 中通过大小写字符用户名搜索用户贡献？

> ID：14579331
> 
> 赞同：2
> 
> 时间：2013-01-29T09:17:04.563
> 
> 标签：php, mysql, mediawiki, mediawiki-api

我正在使用 MediaWiki 1.20.0，并且正在寻找通过大小写字符用户名搜索用户贡献的方法。

例子：

如果用户名是：**SomeOne**

默认情况下，MediaWiki 接受这些搜索：**SomeOne, someOne**

但我也希望 MediaWiki 接受这些：**某人、某人、某人、某人……**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-11T13:06:50.920

OP的回答：我找到了解决方案。分享给大家。

*   打开文件`./includes/User.php`

*   寻找

    ```
    $s = $dbr->selectRow( 'user', array( 'user_id' ), array( 'user_name' => $nt->getText() ), __METHOD__ ); 
    ```

*   用。。。来代替

    ```
    //congminh1709 - Ignore lower and upper case to search username START
    global $wgContLang;
    $s = $dbr->selectRow( 'user', array( 'user_id' ), array('lower(convert(user_name using latin1))' => $wgContLang->lc($nt->getText())) , __METHOD__ );
    //Original Select
    //$s = $dbr->selectRow( 'user', array( 'user_id' ), array( 'user_name' => $nt->getText()) , __METHOD__ );                
    //congminh1709 - Ignore lower and upper case to search username STOP 
    ```

*   保存存档

# ios - 设置所有 uinavigationcontroller 的高度

> ID：14579333
> 
> 赞同：0
> 
> 时间：2013-01-29T09:17:10.110
> 
> 标签：ios, ipad, uinavigationcontroller

我正在使用主详细视图和简单视图页面，它们都有自己的`UINavigationController`. 我希望所有的背景图像都相同，`UINavigationControllers`所以我使用以下代码行：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"top_bg.png"] forBarMetrics:UIBarMetricsDefault]; 
```

这解决了我的目的，但 uiNavigationBar 的高度更多，因此它与下面的内容重叠。如何降低导航控制器的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:54:36.433

将以下内容应用于您要调整的 UIView（位置和大小）：

```
[UIView setFrame:CGRectMake(CGFloat x, CGFloat y, CGFloat width, CGFloat height)] 
```

# php - Objects inside Multi Dimenisonal arrays PHP

> ID：14579339
> 
> 赞同：1
> 
> 时间：2013-01-29T09:17:31.240
> 
> 标签：php, object

The flowing array is stored in var $items (plus more).

```
"c74a0dba-5407-4f90-b04e-fdc88c4dd434": {
"0": {
"value": "Suffolk"
}
},
"91866e91-70d7-405f-900c-475d0c027399": {
"country": {
"0": "GB"
}
}, 
```

To view the array i can use:

```
$county = json_decode($items); 
var_dump($county); 
```

This prints

```
[c74a0dba-5407-4f90-b04e-fdc88c4dd434"]=> object(stdClass)#24 (1) { ["0"]=> object(stdClass)#25 (1) { ["value"]=> string(15) "Suffolk" } } ["91866e91-70d7-405f-900c-475d0c027399"]=> object(stdClass)#26 (1) { ["country"]=> object(stdClass)#27 (1) { ["0"]=> string(2) "GB" } } 
```

I need to extract the county info 'Suffolk' using its unique identifier.

I attempted the below but it produces a server error

```
$result_county = $county->getElement('c74a0dba-5408-4f90-b04e-fdc88c4dd434')->getElementData()->get('value'); 
```

The below is a var_dump of the whole array. The identifier `c74a0dba-5408-4f90-b04e-fdc88c4dd434` is the same for each item array.

```
object(stdClass)#2 (18) { ["4d612549-f4cd-4487-ba42-f091ece35391"]=> object(stdClass)#3 (1) { ["0"]=> object(stdClass)#4 (1) { ["value"]=> string(13) "East Newlem" } } ["5eb77708-72e8-4587-b65e-ee50eb0f9e6d"]=> object(stdClass)#5 (1) { ["0"]=> object(stdClass)#6 (1) { ["value"]=> string(24) "Hillside Estate" } } ["520720dc-c480-405a-ac56-bf317f48d860"]=> object(stdClass)#7 (1) { ["0"]=> object(stdClass)#8 (1) { ["value"]=> string(17) "11 Rees Drive" } } [ECT... 
```

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:19:02.290

If you treat this as an array in the following manner

```
$array = json_decode($items,true);
echo "<pre>",print_r($array,true),"</pre>"; 
$key ="c74a0dba-5408-4f90-b04e-fdc88c4dd434";
echo $array[$key][0]['value']; 
```

It will produce and array structure like below:

```
Array
(
    [4d612549-f4cd-4345-ba42-f091ece35391] => Array
        (
        [0] => Array
            (
            [value] => East Newlem
            )
        )
    [5eb77708-72e8-4676-b65e-ee50eb0f9e6d] => Array
        (
        [0] => Array
            (
            [value] =>Hillside Estate
            )
        )
) 
```

If you set the `json_decoded` 2nd argument to true it will return an array rather than the earlier objects. I do prefer objects over arrays but all about context and what the data represents (array or object).

Looks like you have composite objects after the extraction. The process has generated a lot of objects(`stdClass`) which is typical when a non-object is converted to an object. For instsnce if an example array is converted to an object the object(stdClass) that is generated will have properties that are named by keys and their corresponding values. I think this is what you are seeing here.

Initially there is a container object holding x objects that mostly consist of 3 keys, the first 2 of which have object values and the third a string value. Accessing the info like a standard object:

```
echo $county->{4d612549-f4cd-4487-ba42-f091ece35391}->{0}->value; 
```

'East Newlem' should be returned (if not try placing quotes around the values in the curly braces).

Broken into objects the data looks like below:

```
object(stdClass)#2 (18) {
["4d612549-f4cd-4487-ba42-f091ece35391"]=>
    object(stdClass)#3 (1) { ["0"]=>
        object(stdClass)#4 (1) { ["value"]=> string(13) "East Newlem" }
}
["5eb77708-72e8-4587-b65e-ee50eb0f9e6d"]=>
    object(stdClass)#5 (1) { ["0"]=>
        object(stdClass)#6 (1) { ["value"]=> string(24) "Hillside Estate" }
} 
```

Hope this helps

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:19:58.470

```
$county = json_decode($items, true); /// which will give you array

foreach($county as $val){
   echo $val[0]['value'];
} 
```

# jquery - 使用 jquery 将数据保存到本地 json 文件中

> ID：14579340
> 
> 赞同：4
> 
> 时间：2013-01-29T09:17:32.047
> 
> 标签：jquery, html, json

我有一个带有一些输入字段的基本表单。我想在提交表单时将表单数据保存到 json 文件中。

表单中的数据格式为：

```
{"name":"Sree","email":"sree@hmail.com","phone":"123456789"} 
```

我有一个名为 contact.json 的现有 JSON 文件

```
{
    "info": [
        {
            "name":"Noob Here",
            "email":"myemail@server.com",
            "phone":"123456"
        },
        {
            "name":"Newbie There",
            "email":"hisemail@server.com",
            "phone":"589433"
        }
    ]
} 
```

这是我用来将数据制作为 json 的函数：

```
function submit_form(){
    var data=(JSON.stringify($('form').serializeObject()));
    return false;
}

$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
    if (o[this.name] !== undefined) {
        if (!o[this.name].push) {
            o[this.name] = [o[this.name]];
        }
        o[this.name].push(this.value || '');
    } else {
        o[this.name] = this.value || '';
    }
    });
    return o;
}; 
```

我尝试将此代码插入到 submit_form 函数中

```
$.ajax({
       type: 'POST', 
       dataType: 'json', 
       url: 'contact.json', 
       data: data, 
       success: function(data) { 
           alert(data.message); 
       },
       failure: function (data) {
           alert('Please try again');
       }
    }); 
```

我是 json 新手，不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:09:30.757

据我所知，纯javascript或jquery无法将数据保存到本地Json中。如果您想在服务器端保存 json，请使用 java 或 php 等服务器端编程，否则将 HTML5 用于客户端。

正如[阿伦建议的那样](https://stackoverflow.com/users/114251/arun-p-johny)

# c++ - 如何在 32 位 Linux Mint 中构建 64 位 FastCGI 库？

> ID：14579346
> 
> 赞同：0
> 
> 时间：2013-01-29T09:17:49.873
> 
> 标签：c++, linux, compilation, 64-bit, fastcgi

我可以使用以下序列在 32 位 Linux Mint 中构建 32 位 FastCGI 库：

```
./configure
make
make install 
```

但是我应该如何更改文件以构建 64 版本？我已经为 gcc 和 g++ 安装了 multilib。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:34:09.673

可以在 32 位机器上编译 64 位应用程序，*但*您将无法运行它们。

我相信你所要做的就是传递`CPPFLAGS+=-m64`到编译行，瞧。`configure.sh`可能需要可选参数供您手动指定构建环境。

# android - Facebook、Twitter 和 Gmail 集成以共享来自我的 Android 应用程序的链接

> ID：14579348
> 
> 赞同：1
> 
> 时间：2013-01-29T09:17:54.787
> 
> 标签：android, twitter, facebook-android-sdk

我已使用 Facebook API 从我的 android 应用程序成功将页面（共享链接）发布到 facebook。但是使用 Twitter API 来做同样的事情会面临很多问题。你能建议我如何克服这个问题。因为我找到了一个为所有社交网站集成的 API，但它仅用于共享状态（不是按照我的要求）。还有如何为 Gmail 做呢？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:28:21.433

我有同样的问题，我发现这个教程真的很有帮助，请检查这个：

[http://blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application/](http://blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application/)

```
public static void sendTweet(SharedPreferences prefs,String msg) throws Exception {
    String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
    String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

    AccessToken a = new AccessToken(token,secret);
    Twitter twitter = new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
    twitter.setOAuthAccessToken(a);
    twitter.updateStatus(msg);
} 
```

# linux - 文本格式 - sed、awk、shell

> ID：14579349
> 
> 赞同：1
> 
> 时间：2013-01-29T09:17:56.213
> 
> 标签：linux, bash, shell, sed, awk

我需要一些帮助来尝试使用文件中的排除列表来构建变量。

所以我有一个用于 rsync 的排除文件，如下所示：

```
*.log
*.out
*.csv
logs
shared
tracing
jdk*
8.6_Code
rpsupport
dbarchive
inarchive
comms
PR116PICL
**/lost+found*/
dlxwhsr*
regression
tmp
working
investigation
Investigation
dcsserver_weblogic_
dcswebrdtEAR_weblogic_ 
```

我需要建立一个字符串作为变量输入 egrep -v，这样我就可以对 rsync 使用相同的排除列表，就像我在 find -ls 中使用 egrep -v 时所做的那样。

所以到目前为止我已经创建了这个来删除所有“*”和“/” - 然后当它看到某些特殊字符时，它会转义它们：

```
cat exclude-list.supt | while read line
    do
    echo $line | sed 's/\*//g' | sed 's/\///g' | 's/\([.-+_]\)/\\\1/g' 
```

我需要的输出也是这样，然后将其导出为变量：

```
SEXCLUDE_supt="\.log|\.out|\.csv|logs|shared|PR116PICL|tracing|lost\+found|jdk|8\.6\_Code|rpsupport|dbarchive|inarchive|comms|dlxwhsr|regression|tmp|working|investigation|Investigation|dcsserver\_weblogic\_|dcswebrdtEAR\_weblogic\_" 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:01:56.717

以下几个问题：

```
cat exclude-list.supt | while read line
    do
    echo $line | sed 's/\*//g' | sed 's/\///g' | 's/\([.-+_]\)/\\\1/g' 
```

`Sed`逐行读取文件，因此`cat | while read line;do echo $line | sed`完全多余，也`sed`可以通过将它们作为逗号分隔列表传递或使用`-e`选项进行多次替换，因此管道到`sed`三次是两次太多。'[.-+_]' 的一个问题`-`是介于之间`.`，`+`因此当在字符类中`.-+`使用时将其解释为一个范围，`-`将其放在开头或结尾以失去此含义，例如`[._+-]`.

一个更好的方法：

```
$ sed -e 's/[*/]//g' -e 's/\([._+-]\)/\\\1/g' file
\.log
\.out
\.csv
logs
shared
tracing
jdk
8\.6\_Code
rpsupport
dbarchive
inarchive
comms
PR116PICL
lost\+found
dlxwhsr
regression
tmp
working
investigation
Investigation
dcsserver\_weblogic\_
dcswebrdtEAR\_weblogic\_ 
```

现在我们可以通过`tr '\n' '|'`管道用管道替换换行符，以便为交替做好准备`egrep`：

```
$ sed -e 's/[*/]//g' -e 's/\([._+-]\)/\\\1/g' file | tr "\n" "|"
\.log|\.out|\.csv|logs|shared|tracing|jdk|8\.6\_Code|rpsupport|dbarchive|...

$ EXCLUDE=$(sed -e 's/[*/]//g' -e 's/\([._+-]\)/\\\1/g' file | tr "\n" "|")

$ echo $EXCLUDE
\.log|\.out|\.csv|logs|shared|tracing|jdk|8\.6\_Code|rpsupport|dbarchive|... 
```

注意：如果您的文件以换行符结尾，您需要删除最后的结尾`|`，请尝试`sed 's/\(.*\)|/\1/'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T10:30:50.160

这可能对您有用（GNU sed）：

```
SEXCLUDE_supt=$(sed '1h;1!H;$!d;g;s/[*\/]//g;s/\([.-+_]\)/\\\1/g;s/\n/|/g' file) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:09:40.150

这应该可行，但我想有更好的解决方案。首先将所有内容存储在 bash 数组中：

```
SEXCLUDE_supt=$( sed -e 's/\*//g' -e 's/\///g' -e 's/\([.-+_]\)/\\\1/g' exclude-list.supt) 
```

然后再次处理它以替换空白：

```
SEXCLUDE_supt=$(echo $SEXCLUDE_supt |sed 's/\s/|/g') 
```

# iphone - 从 PLIST 中的 NSMutableArray 中删除项目

> ID：14579354
> 
> 赞同：0
> 
> 时间：2013-01-29T09:18:02.620
> 
> 标签：iphone, xcode, nsmutablearray, plist

我有一个包含许多测验项目的 plist 是通过使用 arc4random () 随机拉出的，我想在显示后删除每个项目，以免重复问题，我尝试使用`[thisArray removeObjectAtIndex:r];`，但项目仍然显示。有任何想法吗？

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"initialquestions" ofType:@"plist"];

NSFileManager *fileManager = [NSFileManager defaultManager];
if ([fileManager fileExistsAtPath:path]) {
    NSLog(@"The file exists");
    }
else {
    NSLog(@"The file does not exist");
}

NSMutableArray *thisArray = [[NSMutableArray alloc] initWithContentsOfFile:path];
NSLog(@"The array count: %i", [thisArray count]);

for (int i = 0; i < [thisArray count]; i++) {

    id obj;
    int r = arc4random() % [thisArray count];
    if(r<[thisArray count]){
        obj=[thisArray objectAtIndex:r];
    }
    else{
        //error message
    }

     QuestionTitle.text = [[thisArray objectAtIndex:r] objectForKey:@"QuestionTitle"];

     [btnA setTitle:[[thisArray objectAtIndex:r] objectForKey:@"A"] forState:UIControlStateNormal];
     [btnB setTitle:[[thisArray objectAtIndex:r] objectForKey:@"B"] forState:UIControlStateNormal];
     [btnC setTitle:[[thisArray objectAtIndex:r] objectForKey:@"C"] forState:UIControlStateNormal];

     [thisArray removeObjectAtIndex:r];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:39:09.740

随着您的数组缩小，您需要一个反向 for 循环：

```
for (int i = [thisArray count]-1; i > -1 ; i--) {
    ....
} 
```

# javascript - 在 a.js 文件中声明全局变量是不好的做法吗？

> ID：14579355
> 
> 赞同：4
> 
> 时间：2013-01-29T09:18:02.950
> 
> 标签：javascript, jquery

我有一个 .js 文件，我在其中初始化两个用于单独函数的参数：

```
var submyvar1;
var submyvar2;

function init(myvar1 , myvar2){
    submyvar1= myvar1;
    submyvar2= myvar2;
}

function (){
    //subvar1 & subvar 2 used here
} 
```

像这样声明全局变量是一种不好的做法吗？

如果是这样，还有什么替代方法，将整个 .js 文件包装在一个对象中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T09:21:18.423

至少这**不是一个好**习惯，您可以使用**立即调用的函数表达式**：

```
(function() {
    var x;
    var y;

    window.init = function(xValue, yValue) {
        x = xValue;
        y = yValue;
    }

    window.doWhateverYouWant = function() {
        console.log(x + y);
    }
}()); 
```

您可以使用此模式**，除非您需要访问此 .js 文件之外的全局变量**，当需要在 .js 文件或元素之间进行交叉访问`<script>`时，全局变量是一个简单的解决方案（尽管您可以使用 AMD 或其他方式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:25:48.197

我决定使用揭示模块模式，如下所述：关于使用“揭示模块模式”的可能实现的好文章：http: [//enterprisejquery.com/2010/10/how-good-c-habits-can-encourage -bad-javascript-habits-part-1/](http://enterprisejquery.com/2010/10/how-good-c-habits-can-encourage-bad-javascript-habits-part-1/)

它与公认的答案非常相似。

这是从上面的 enterprisejquery 粘贴的模式解释：

```
We looked at the Self-Executing Anonymous Function earlier as a pattern you could use to keep all your code private. As it turns out, you can actually modify the pattern somewhat so that you can achieve the same benefits of the Revealing Module Pattern. Not only can we achieve public and private properties and methods, but we can also provide an easy way to extend the namespace while keeping the content protected from the global namespace. In addition, the following pattern can protect the $ from conflicting with other JavaScript libraries and also protect undefined from being redefined.

Take a look at the following example, and we will walk through the code explaining the key changes to the pattern.

//Self-Executing Anonymous Func: Part 2 (Public & Private)
(function( skillet, $, undefined ) {
    //Private Property
    var isHot = true;

    //Public Property
    skillet.ingredient = "Bacon Strips";

    //Public Method
    skillet.fry = function() {
        var oliveOil;

        addItem( "\t\n Butter \n\t" );
        addItem( oliveOil );
        console.log( "Frying " + skillet.ingredient );
    };

    //Private Method
    function addItem( item ) {
        if ( item !== undefined ) {
            console.log( "Adding " + $.trim(item) );
        }
    }    
}( window.skillet = window.skillet || {}, jQuery ));

//Public Properties
console.log( skillet.ingredient ); //Bacon Strips

//Public Methods
skillet.fry(); //Adding Butter & Fraying Bacon Strips

//Adding a Public Property
skillet.quantity = "12";
console.log( skillet.quantity ); //12

//Adding New Functionality to the Skillet
(function( skillet, $, undefined ) {
    //Private Property
    var amountOfGrease = "1 Cup";

    //Public Method
    skillet.toString = function() {
        console.log( skillet.quantity + " " + 
                     skillet.ingredient + " & " + 
                     amountOfGrease + " of Grease" );
        console.log( isHot ? "Hot" : "Cold" );
    };    
}( window.skillet = window.skillet || {}, jQuery ));

try {
    //12 Bacon Strips & 1 Cup of Grease
    skillet.toString(); //Throws Exception
} catch( e ) {
    console.log( e.message ); //isHot is not defined
}
You can execute and modify the above code from jsFiddle.

First, since we have a Self-Executing Anonymous Function, we can actually provide some parameters to pass to it when it executes. In this case we are passing 2 arguments to the anonymous function.

The first argument looks quite strange. What is window.skillet = window.skillet || {} doing? The code checks to see if skillet exists in the global namespace (window). If it does not exist, then window.skillet is assigned an empty object literal. Using this approach we can build a library across JavaScript files. If another script uses the same technique, then it will pass in the existing instance and append logic to it. Inside the Anonymous Function, if we want something to be public, then we append it to the skillet object. Any other properties or methods will be considered private.

The second argument passed in jQuery. The benefit of this is that the named parameter is referenced as $, which allows us to refer to jQuery as $ within the Anonymous Function without having to worry that it will conflict with the $ declared in other JavaScript libraries. This is a common practice that you will most likely run across when looking at well written jQuery code.

You might notice a 3rd parameter to the Anonymous Function called undefined. Why did we add that parameter and why didn’t we pass an argument to it? In JavaScript, you can unfortunately redefine what undefined means. Imagine that some code somewhere deep in one of your 3rd party libraries redefines undefined to something strange like true. If anywhere in your code you test against undefined, then you code will most likely not behave like you intended. In JavaScript, if you have a parameter that doesn’t have a matching argument, then it’s value is set as undefined. By using this trick, it can save us from the bad code someone wrote to redefine undefined.

Pros

Gives you the ability to have public and private properties and methods
The code inside doesn’t use the Object Literal notation
Keeps undefined’s value as undefined in case someone overrode the value
Allows you to use $ inside your code without worrying about clashing with other libraries
Allows your library to grow across files using the “window.namespace = window.namespace || {}” technique
A common pattern that you will see in many libraries, widgets, and plugins
Cons

Slightly more complicated pattern, but not overly difficult to understand
If you are interested in digging deeper into some of the patterns I mentioned above then I encourage you to check out Klaus Komenda’s post entitled JavaScript Programming Patterns. The article provides an insightful view of how JavaScript patterns have changed over the years. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T09:25:04.780

您应该尽可能避免使用它，以防止弄乱全局命名空间。不过，您可能会想要公开一些代码，所以在这种情况下它很好。例如，jQuery 显然必须使`jQuery`and`$`变量成为全局变量（它通过使它们成为`window`.

为避免这种情况，您可以将代码包含在带有括号的函数中：

```
var mySingleGlobalVar = (function () {
    var submyvar1;
    var submyvar2;

    function init(myvar1 , myvar2){
        submyvar1= myvar1;
        submyvar2= myvar2;
    }

    function (){
        //subvar1 & subvar 2 used here
    }

    return init;
}()); 
```

这是一个立即执行的函数。在这个例子中，我将返回值（init 函数）分配给一个全局变量，这是您的脚本将创建的唯一全局变量（只要您用 正确声明它们`var`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T09:43:41.483

在[JavaScript: The Good Parts](https://rads.stackoverflow.com/amzn/click/com/B002AWX8BO)（也总结[在这里](http://blog.binarymist.net/2012/12/19/javascript-coding-standards-and-guidelines/)）中建议：

> 全局变量会削弱程序的弹性，应该避免。尽量减少使用全局变量的一种方法是为您的应用程序创建一个全局变量：
> 
> ```
> var MYAPP = {}; 
> ```
> 
> 然后该变量将成为您的应用程序的容器：
> 
> ```
> MYAPP.stooge = {
>     "first-name": "Joe",
>     "last-name": "Howard" }; 
> ```
> 
> 通过将您的全球足迹减少到一个名称，您可以显着减少与其他应用程序、小部件或库的不良交互的可能性。您的程序也变得更易于阅读，因为很明显 MYAPP.stooge 指的是顶级结构。

# ios - 检查电子邮件是否可以接收 iMessages

> ID：14579357
> 
> 赞同：0
> 
> 时间：2013-01-29T09:18:12.417
> 
> 标签：ios, ios5, ios6, imessage

您可以将 iPhone 配置为能够接收发送到您的电子邮件的 iMessage。iPod Touch 和 iPad 也可以接收发送到电子邮件的 iMessage。

给定一个电子邮件地址，是否可以检查该地址是否能够接收 iMessage？

Apple 在 Messages 应用程序中这样做以更改发送按钮的颜色，我想实现类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:22:34.473

不，Apple 没有为 iMessage 发布任何 API。您只能通过[`MFMessageComposeViewController canSendText`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)方法检查设备是否可以发送消息。

# java - Android 库 - 仅单独的图形

> ID：14579360
> 
> 赞同：0
> 
> 时间：2013-01-29T09:18:16.003
> 
> 标签：java, android

是否可以将应用程序的代码分离到一个库中（我创建了项目库），然后只创建新项目，这只会用其他资源替换可绘制对象？其他一切都需要保持不变，只是图形不同。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:25:30.550

是的。直截了当。不过，您至少需要一个单独的清单。;)

# c# - 如何测试 FileSystemWatcher 是否引发了正确的事件？

> ID：14579362
> 
> 赞同：3
> 
> 时间：2013-01-29T09:18:24.933
> 
> 标签：c#, multithreading, unit-testing, filesystemwatcher

我正在使用我的`System.IO.FileSystemWatcher`一项服务。我想测试当被监视的文件被更改时，我会收到通知。

我正在考虑让后台线程更改文件。在测试中，我会加入那个线程。然后我可以断言调用了正确的事件。如果事件被调用，我可以订阅一个回调来捕获。

我没有做过任何涉及线程的测试，所以我不确定这是否是处理它的最佳方式，或者 Moq 或 MSpec 中是否有一些内置方式可以帮助测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:24:05.743

Moq 或 MSpec 没有任何专门内置的东西可以帮助您做到这一点，除了一些有趣的语法或功能可以帮助您组织测试。我认为你在正确的道路上。

我很好奇您的服务如何公开文件更改通知。它是否公开暴露它们以进行测试？还是`FileSystemWatcher`完全隐藏在服务内部？如果该服务不简单地传递事件通知，您应该提取您的文件监控，以便可以轻松地对其进行测试。

您可以使用 .NET 事件或回调或其他方式来做到这一点。不管你怎么做，我都会写这样的测试......

```
[Subject("File monitoring")]
public class When_a_monitored_file_is_changed
{
    Establish context = () => 
    {
        // depending on your service file monitor design, you would
        // attach to your notification
        _monitor.FileChanged += () => _changed.Set();

        // or pass your callback in
        _monitor = new ServiceMonitor(() => _changed.Set());
    }

    Because of = () => // modify the monitored file;

    // Wait a reasonable amount of time for the notification to fire, but not too long that your test is a burden
    It should_raise_the_file_changed_event = () => _changed.WaitOne(TimeSpan.FromMilliseconds(100)).ShouldBeTrue();

    private static readonly ManualResetEvent _changed = new ManualResetEvent();
} 
```

# sql - have子句中的多个条件

> ID：14579366
> 
> 赞同：0
> 
> 时间：2013-01-29T09:18:37.367
> 
> 标签：sql, sql-server-2008-r2

我有一个如下表（使用 SQL Server 2008 R2）：

```
CREATE TABLE [dbo].[Data](
    [Id] [int] NOT NULL,
    [Name] [nvarchar](100) NOT NULL,
    [IsBad] [bit] NOT NULL
) ON [PRIMARY]
GO

Insert into Data  values(100,'Book!',1)
Insert into Data  values(100,'Booklki**',1)
Insert into Data  values(100,'Book',0)
Insert into Data  values(100,'New Book ~~',1)
Insert into Data  values(100,'New Book',0)
Insert into Data  values(100,'B00k…&gt;',1)
Insert into Data  values(101,'Tim3#',1)
Insert into Data  values(101,'%Timer%',1)
Insert into Data  values(101,'T1mer**',1)
Insert into Data  values(101,'Tim6',1)
Insert into Data  values(101,'Time@me',1)
Insert into Data  values(102,'ABC',0)
Insert into Data  values(102,'CDE',0) 
```

我需要选择所有`ID`拥有的所有`IsBad = 1`. 因此，查询上表将返回 ID: `101`。它不能返回`102`或`100`因为这些 ID 至少有一个`IsBad=0`.

我试过下面的查询

```
select id,count(distinct isBad) as Total
from Data
group by id
having count(distinct isBad)= 1 
```

此查询包括所有`IsBad=0`. 但我不需要那个。`having`我尝试在using 子句中添加更多条件`AND`，但出现错误。

如何进行 ？任何帮助表示赞赏。

编辑：我需要对有 5000 万条记录的表运行查询。因此，需要优化查询以在更短的时间内返回结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:21:58.670

```
select  *
from    Data d1
where   not exists 
        (
        select  *
        from    Data d2
        where   d1.id = d2.id
                and d2.IsBad = 0
        ) 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/adca6/2/0)

如果您只是在寻找`id`，您可以使用：

```
select  distinct id
... rest of the query is the same ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T09:32:35.357

反转它 - 你想要“所有 IsBad = 1 的所有 ID”，这意味着 ID 不能有任何 IsBad = 0：

```
SELECT ID FROM Data WHERE ID NOT IN (
    SELECT ID FROM Data WHERE IsBad = 0
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T22:37:09.117

当前答案的缓慢可能是由于使用了`where not exists`从句。`left join`我通常通过使用 a并检查是否缺少匹配来解决这个性能问题。

```
select *
from Data d1
left join (select * from Data where IsBad = 0) d2
  on d1.id = d2.id
where d2.id is null 
```

这是一篇旧帖子，因此它可能对最初的个人没有帮助，但也许其他人会受益。

# php - 如何在上传前将图像转换为base64

> ID：14579367
> 
> 赞同：0
> 
> 时间：2013-01-29T09:18:43.323
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [如何使用 javascript 将图像转换为 base64 字符串](https://stackoverflow.com/questions/6150289/how-to-convert-image-into-base64-string-using-javascript)

我需要使用 AJAX 发布图像，但 IE 不支持它。所以我想知道我是否可以使用javascript将图像转换为base64，然后将其发布到php脚本，然后将其解码并将其保存为图像。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:23:52.447

与其使用 JS 在 base64 中进行转换，不如使用表单上的 enctype：

```
<form action="your_script.php" method="post" enctype="multipart/form-data"> 
```

# flyway - 功能 cleanOnValidationError 似乎很危险

> ID：14579368
> 
> 赞同：0
> 
> 时间：2013-01-29T09:18:44.340
> 
> 标签：flyway

flyway 中的 cleanOnValidationError 功能似乎非常危险。例如，您创建了一个项目并启用它进行测试和开发。然后你忘记了它并提交了这个项目。因此，此功能通过了所有测试，因为它仅适用于验证失败，还因为删除所有旧数据后测试数据库正常。如果您在生产中遇到验证错误，您可能会丢失所有数据。是的，它是命令行工具的有用选项，但是，我认为，对于 maven 和可嵌入版本来说，这不是一个好主意。你对此有何看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:49:37.430

我绝对同意这很危险。

这就是为什么在引用此选项的任何地方都会出现一个很大的警告：

**警告 ！不要在生产中启用！**

请参阅：http: [//flywaydb.org/documentation/commandline/validate.html](http://flywaydb.org/documentation/commandline/validate.html)

# javascript - 如何为一次悬停 3 或 4 个元素创建 javascript 函数

> ID：14579369
> 
> 赞同：0
> 
> 时间：2013-01-29T09:18:47.973
> 
> 标签：javascript, jquery, function

我想一次悬停 3 个项目。当我将光标放在其中之一时。它应该悬停在其他两个项目上。请任何人都可以帮助我。我想用 javascript 做到这一点。我做了一个模型，但它不是很好。我想使用功能，所以我可以一次又一次地使用它。请帮我。

```
<!DOCTYPE html>
<html>
<head>

  <script type="text/javascript" src="jquery.js"></script>

<style type="text/css">
.boxes {
    float: left;
    display: inline;
    width:150px;
    height:100px
}
.box1 {
    width:50px;
    padding:10px;
    border:1px solid gray;
    margin:0px;
    height: 20px;
}

.box4 {
    display: inline-block;
    width:150px;
    padding:10px;
    border:1px solid gray;
    height: 100px;
}

</style>
<script>
$(document).ready(function(){
    // box 1
    $('.box1').mouseover(function(){
        $('.box1').css('background-color', '#F7FE2E');
        $('.box4').css('background-color', '#F7FE2E');
        $('.hov').css('color', '#0f0');

    });
    $('.box1').mouseout(function(){
        $('.box1').css('background-color', '#FFF');
        $('.box4').css('background-color', '#FFF');
        $('.hov').css('color', '#fff');

    });
       $('.box4').mouseover(function(){
        $('.box4').css('background-color', '#F7FE2E');
        $('.box1').css('background-color', '#F7FE2E');
        $('.hov').css('color', '#0f0');

    });
    $('.box4').mouseout(function(){
        $('.box4').css('background-color', '#FFF');
        $('.box1').css('background-color', '#FFF');
        $('.hov').css('color', '#fff');

    });

});

</script>
</head>

<div class="boxes">
    <div class="box1">Box 1</div>

</div>
<div class="box4"><a href="#" class="hov">box4</a> </div>
<br/>
<div class="boxes">
    <div class="box1">Box 1</div>

</div>
<div class="box4"><a href="#" class="hov">box4</a> </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:19:46.040

如果您按父 div 对 div 进行分组，则可以使用 HTML 结构来确定要突出显示的内容。我不知道您的确切使用模型，但类似这样：

```
<div class="boxgroup">
    <div class="box1 hover"></div>
    <div class="box2 hover"><a href="mylink" class="hov">Link</a></div>
</div>

<div class="boxgroup">
    <div class="box1 hover"></div>
    <div class="box2 hover"><a href="mylink" class="hov">Link</a></div>
</div> 
```

然后在你的 jQuery 中：

```
$(document).on('mouseover', '.hover', function () {
    var boxgroup = $(this).closest('.boxgroup');
    boxgroup.find('.hover').addClass('hovercolor');
    boxgroup.find('.hov').css('color', '#0f0');
}).on('mouseout', '.hover', function () {
    var boxgroup = $(this).closest('.boxgroup');
    boxgroup.find('.hover').removeClass('hovercolor');
    boxgroup.find('.hov').css('color', '#000');
}); 
```

在这里，我`.closest()`用来查找它所在的组`div`，然后突出显示`.hover`该组中的所有其他项目。

例子：

[http://jsfiddle.net/jtbowden/HZtVP/3/](http://jsfiddle.net/jtbowden/HZtVP/3/)

如果您希望您的 div 不被物理分组，还有其他方法可以做您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:21:10.963

1.  使用映射 javascript 对象。

2.  并使用类'like'选择器将函数绑定到类以“.box”开头的元素

例如：

```
$(document).ready(function(){
    var mapping = { 'box1':'box4','box4':'box1' };

    $("[class^=box]").mouseover(function(){
       .........

    }); 
```

# php - 在发布开始和结束日期时使用 cakephp 中的日期

> ID：14579373
> 
> 赞同：0
> 
> 时间：2013-01-29T09:19:03.183
> 
> 标签：php, jquery, cakephp

我在 cakephp 中创建了一个日期选择选项，它没问题。

我的问题是我想创建一个发布开始和发布结束，问题是，我不知道如何创建一个。

例如：

```
echo $this->Form->input('Lesson.duration_start', array('dateFormat' => 'DMY', 'label' => ''));

echo $this->Form->input('Lesson.duration_end', array('dateFormat' => 'DMY', 'label' => '')); 
```

它都输出一个选择选项，但我可以将持续时间结束设置为以后的一天，应该在当天或之后。

例如：

开始日期：2013 年 1 月 29 日结束日期：2013 年 1 月 28 日

我应该无法选择低于开始日期的一天。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:39:41.673

您可以使用表单助手设置最小年份 ( [`minYear`](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper%3a%3ainput)) 以限制过去几年的过去日期。您只能实际控制表单中的最小年份，因为您需要完整的月份/日期来表示未来几年的日期。

然后，您需要在课程模型中对 duration_start/duration_end 进行一些验证，以确保日期有效。要比较日期，您需要编写自定义验证规则。[看看这个](https://groups.google.com/forum/?fromgroups=#!topic/cake-php/C-TetJiPT3U)可以帮助你开始。

# z3 - Z3py：如何扩展和截断变量？

> ID：14579377
> 
> 赞同：5
> 
> 时间：2013-01-29T09:19:08.253
> 
> 标签：z3

我有两个不同大小的变量“a”和“b”，见下文。我有几个问题：

（1）如何将'a'的值复制到'b'？（即扩展操作）

（2）如何将'b'的值复制到'a'？（即截断操作）

谢谢。

```
a = BitVec('a', 1)
b = BitVec('b', 32) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T15:05:25.600

对于扩展，我们使用`ZeroExt`or `SignExt`。将`ZeroExt`添加“零”，`SignExt`并将“复制”符号位（即最高有效位）。对于我们使用的截断`Extract`，它可以提取任何位子序列。这是一个小例子（也可以在[rise4fun](http://rise4fun.com/Z3Py/g2bK)在线获得）。

```
a = BitVec('a', 1)
b = BitVec('b', 32)
solve(ZeroExt(31, a) == b)
solve(b > 10, Extract(0,0,b) == a) 
```

**编辑**：我们可以使用`p == (x == 1)`“分配”一个布尔变量，其值为size`p`的位向量，反之亦然。该公式只是说明当且仅当is时为真。这是一个示例（也可[在此处](http://rise4fun.com/Z3Py/cGEa)在线获得）`x``1``p == (x == 1)``p``x``1`

```
x = BitVec('x', 1)
p = Bool('p')

solve(p == (x == 1), x == 0)
solve(p == (x == 1), x == 1)
solve(p == (x == 1), Not(p))
solve(p == (x == 1), p) 
```

# iphone - ios 隐藏键盘

> ID：14579378
> 
> 赞同：4
> 
> 时间：2013-01-29T09:19:12.107
> 
> 标签：iphone, keyboard, uitextfield, uipickerview, uipopovercontroller

**我的问题**是：`What is the best way to implement "Hiding Keyboard while PickerView (which is inside the PopOver) is Visible"?`

**我想要的是 ：**

我有一个观点，其中有`15 TextFields`. 在 15 个中，比如说 7 个使用`UIPickerView`（驻留在其中`UIPopOverController`）来实现`DropDown Functionality`. 我的问题是当键盘可见并且我单击`UITextField`with 时`UIPickerView`，键盘没有隐藏。实现这一点的最佳方法是什么？

**我尝试了什么：**

我试图实现`inputView`，但它只用于`UIPickerView`我在`UIPickerView`里面的时候`UIPopOverController`。我认为这就是我无法使用`inputView`财产的原因。根据这个[问题](https://stackoverflow.com/questions/5022195/ipad-uipopovercontroller-does-not-go-over-inputview-in-uitextview)，它是来自 Apple 的错误。

**更新**：

看，我知道使用 textField Delegates ，我们可以实现这一点。但是我发现`inputView`了 of 的属性，`UITextField`并且发现它非常有趣，因为您必须将其分配为：

```
textField.inputView = pickerView; 
```

但我有`UIPickerView`内在`PopOver`。那么如何使用这个`inputView property`呢`UITextField`？

**有更好的主意吗？...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:55:33.140

将 .h 文件中的对象作为：

```
id currentTextField; 
```

`UITextField` `Delegate`在您的 .m 文件中实现此方法：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    currentTextField = textField;
} 
```

*   不要忘记在你的文件中`txtField.delegate = self`为所有的。`UITextFields`

现在，当您收到对`pickerView`Button 的点击时，首先在该按钮的 click 方法上添加一条语句：

```
[currentTextField resignFirstResponder]; 
```

祝一切顺利！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:45:02.657

我猜你不能直接这样做（as `inputView`）。您可以尝试这个简单的解决方法：

1）替换你`UITextField`的`UIButton`并将其连接到一些选择器（`buttonClicked`:)。您可以使用`UIButtonTypeCustom`它来设置样式，使其看起来像文本字段（设置图层的边框颜色、边框宽度、角半径等。）

2）在这种方法`-(void)buttonClicked:(id)sender`中 - 切换`UIPickerView`您将用作 inputView 的相同替换`UITextField`。您可以在普通实例变量中创建，只需记住设置委托和数据源。将它附加到根视图（`UIViewController`在弹出窗口中显示的），或者甚至`UIWindow`根据它是否已经显示而对其进行动画处理（切换）。

`[button setTitle:<selected_value> forState:UIControlStateNormal]`3)在方法中更新按钮的文本（通过使用） `UIPickerViewDelegate`：`pickerView:didSelect...atIndex: - 你还可以在这里隐藏选择器..

希望这会有所帮助。

# javascript - 使用jQuery的两个不同变量的两个条件

> ID：14579379
> 
> 赞同：-1
> 
> 时间：2013-01-29T09:19:16.927
> 
> 标签：javascript, jquery, click, attr

我有这个功能：

```
settings_rc_left.on('click', function(){
    var settings_list_last_element_id_one = settings_menu_element.attr('id') == 'r_02',
        settings_list_last_element_id_two = settings_menu_element.attr('id') == 'l_02';
    if (settings_menu_element.first().attr('id') === settings_list_last_element_id_one) {
        return false;
    }
    else if (settings_menu_element.first().attr('id') === settings_list_last_element_id_two) {
        return false;
    }
    else {
        renumPrev()
    }
}); 
```

和 html，这是一个简单的列表，对于两个条件，我将 id 更改为 l_02，...在其他函数中，...：

```
<ul id="settings_content_menu">
    <li id="r_02" class="">data</li>
    <li id="r_03" class="">data</li>
    <li id="r_04" class="">data</li>
    <li id="r_05" class="">data</li>
    <li id="r_06" class="">data</li>
    <li id="r_07" class="">data</li>
    <li id="r_08" class="">data</li>
    <li id="r_09" class="">data</li>
</ul> 
```

我想要做的是两个不同条件的停止函数取决于两个不同的变量，如果不是真的启动这个函数。有什么不对劲，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:25:19.013

根据这个：

```
var settings_list_last_element_id_one = settings_menu_element.attr('id') == 'r_02' 
```

变量`settings_list_last_element_id_one`是`true`或`false`。如果您不使用`true`或`false`作为 ID（我希望您不使用），则以下内容永远不会正确：

```
settings_menu_element.first().attr('id') === settings_list_last_element_id_one 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:37:23.363

我设法解决了这个问题，这是解决方案：

```
settings_rc_left.on('click', function(){
    var settings_list_last_element_id_one = settings_menu_element.attr('id') == 'r_02',
        settings_list_last_element_id_two = settings_menu_element.attr('id') == 'l_02';
    if (settings_list_last_element_id_one || settings_list_last_element_id_two) {
        return false;
    }
    else {
        renumPrev()
    }
}); 
```

# java - 在 Hql-Initialization 中创建 sessionFactory

> ID：14579380
> 
> 赞同：0
> 
> 时间：2013-01-29T09:19:17.117
> 
> 标签：java, hibernate, static, thread-safety, sessionfactory

我已经创建了一个用于休眠的 dbadapter。实际上我的课程看起来像这样..

```
 public class DBAdapter {
    private static SessionFactory factory;
        private static final ThreadLocal<Session> threadSession = new ThreadLocal(); 

        public static Session OpenConnection() {
      if (factory == null) {
       factory = new Configuration().configure(
       "com/et/hibernatexml/hibernate.cfg.xml")
      .buildSessionFactory();
      }
     Session s = (Session) threadSession.get(); 
         if (s == null)
         { 
            s =factory.openSession(); 
            threadSession.set(s); 
          } 
        return s; 
 }
 public List selectQuery(String QueryString)
  {   try
      {
       Session session=OpenConnection();
       resultlist = query.list();
       }
       finally()
       {
        closeSession();
       }
   }
    public static void closeSession()
    {
      Session session = (Session) threadSession.get(); 
      threadSession.set(null); 
      if (session != null && session.isOpen()) { 
          session.flush(); 
          session.close(); 
      } 
} 
```

为了从服务器获取数据，我会这样做..

```
 DBAdapter ob=new DBAdapter();
   ob.setParameter("orgId", orgId);
   List list=ob.selectQuery(queryvalue); 
```

我怀疑这样处理有什么问题。特别是因为 SessionFactory 是静态变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:47:08.087

您不希望多个线程创建会话工厂。它应该是一个单例，并且在设计上是线程安全的。使用您提供的代码执行此操作的最简单方法是在 openConnection() 方法上使用 synchronized 关键字。但是，没有理由同步创建会话的部分代码并将其也放在 ThreadLocal 实例上。一个粗略的解决方案如下

```
public class DBAdapter {
    private static SessionFactory factory;
    private static final ThreadLocal<Session> threadSession = new ThreadLocal<Session>(); 

    private static synchronized SessionFactory getSessionFactory() {
        if(factory == null) {
            factory = new Configuration().configure("com/et/hibernatexml/hibernate.cfg.xml").buildSessionFactory();
        }
        return factory;
    }

    public static Session getSession() {
        Session s = (Session) threadSession.get(); 
        if (s == null) { 
            s = getSessionFactory().openSession(); 
            threadSession.set(s); 
        } 
        return s; 
     }
} 
```

# sql - 在 postgres 9.2 中运行复制后，单引号出现在值周围

> ID：14579390
> 
> 赞同：0
> 
> 时间：2013-01-29T09:19:44.630
> 
> 标签：sql, postgresql, postgresql-9.2

我是 postgres 的新手，我在玩数据加载。这是 postgres 9.2 规范中的表定义：

```
CREATE TABLE weather (
    city varchar(80),
    temp_lo int, -- low temperature
    temp_hi int, -- high temperature
    prcp real, -- precipitation
    date date
 ); 
```

我准备了以下数据文件（weather.txt）：

```
San Francisco   43  57  0.0 '1994-11-29'
Hayward 54  37  0.0 '1994-11-29' 
```

并运行 COPY 命令：

```
COPY weather FROM '~aviad/postsgres/playground/weather.txt'; 
```

现在，当我跑步时，`select * from weather;`我看到城市值周围出现单引号。当我运行简单时，这不会发生，`INSERT`例如：

```
INSERT INTO weather VALUES ('San Francisco', 46, 50, 0.25, '1994-11-27'); 
```

我想知道：

1.  用单引号包裹文本值的原因是什么？
2.  将文本数据放入用于 `COPY`避免单引号换行的文件中的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:02:52.297

您在问题中描述的显然不是真正发生的事情。`COPY`尝试将带有冗余单引号的字符串文字导入`date`列中会失败。

要摆脱多余的引号，请导入带有列的[临时表](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)`text`，然后`INSERT INTO`修剪引号的目标表：

```
CREATE TEMP TABLE wtmp (
   city text
 , temp_lo int
 , temp_hi int
 , prcp real
 , date text  -- note how I use text here.
);

COPY wtmp FROM '~aviad/postsgres/playground/weather.txt';

INSERT INTO weather (city, temp_lo, temp_hi, prcp, date)
SELECT city, temp_lo, temp_hi, prcp, trim(date, '''')::date
FROM   wtmp
-- ORDER BY ?
; 
```

临时表会在会话结束时自动删除。

### 保留字作为标识符

我看到您从手册中复制了示例。这是[当前手册的深层链接](http://www.postgresql.org/docs/current/interactive/tutorial-table.html)。

虽然是正确的，但手册中的那个例子是不幸的。我建议不要使用[保留字，`date`](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)如列名。如您所见[，这](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html) `date`是每个 SQL 标准中的保留字。它被允许在 Postgres 中使用，我可以看到一个简单的例子是多么诱人。但这并不是一个好主意。通常，您应该养成*避免*保留字作为标识符的习惯。它会导致混乱的错误消息和不必要的不​​兼容 SQL 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:31:01.367

1 - 如果文件中使用的分隔符（在您的情况下为逗号）也出现在文本字符串中，则使用带引号的标识符包装文本的做法是

2 - 我不知道 postgres，但如果你在 COPY 命令中指定带引号的标识符，它应该在导入期间将其删除：

```
COPY weather FROM '~aviad/postsgres/playground/weather.txt' (QUOTE '?'); 
```

类似的东西。只需尝试更换 ? 使用带引号的标识符-在您的情况下，我将首先尝试：

```
COPY weather FROM '~aviad/postsgres/playground/weather.txt' (QUOTE ''''); 
```

您可能还想查看：[http](http://www.postgresql.org/docs/9.2/static/sql-copy.html) ://www.postgresql.org/docs/9.2/static/sql-copy.html ，因为您可以在 COPY 命令中使用许多不同的开关

# windows - Windows 8：对通过 WOW64 运行的 32 位应用程序进行堆分析

> ID：14579391
> 
> 赞同：8
> 
> 时间：2013-01-29T09:19:47.653
> 
> 标签：windows, windows-8, heap-memory, windbg, wow64

首先，这不是关于如何进行堆分析的一般问题，因为我在早期版本的 Windows 中对此非常熟悉。

然而，我想知道的是，是否有人设法对通过 64 位 Windows 8 上的 WOW64 层运行的 32 位应用程序执行堆分析，Windows 8 是这里的关键词？

运行 Windows 7 和 Windows 调试工具对 WOW64 层本身感兴趣）。堆信息完美显示。

在 Windows 8 上，执行相同的过程，添加 gflags 并启动我的进程，启动后的内存使用量从 40 增加到 140MB，表明 gflags 已启动。

但是，无论我如何尝试，WinDbg 或 umdh 都无法获取任何堆信息。既不是使用 x86 版本的旧方式，也不是文档中描述的方式，通过 WOW64 运行时，通过运行 x64 版本并将 .effmach 切换到 32 位上下文。

此外，我已经使用 Windows 7 和 Windows 8 版本的 Windows 调试工具进行了尝试，因此在 Windows 7 上为我提供良好结果的相同工具在 Windows 8 上的行为不同。

我目前的猜测是，Windows 8 管理堆的方式的变化（我在互联网上看到了几篇文章）可能还没有完全更新/反映在 Windows 调试工具中。我会假设（我自己的使用场景仅涉及 WOW64 上下文中的 32 位进程，所以我不确定）当没有 WOW64 层按预期工作时，应用程序的堆分析工作，但 WOW64 当前是阻止程序这里。

我很想知道我是否做错了什么，或者当前的工具是否存在问题。我目前已经退回到在 VM 中运行 Windows 7 来进行内存分析。

那么，有没有人在 Windows 8 中对 WOW64 下的 win32 应用程序进行堆分析取得任何成功，如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:11:33.027

您是否尝试过[EGGHUNTER](https://www.corelan.be/index.php/2011/11/18/wow64-egghunter/)工具？还有一个[Intel Parallel Studio XE 2013 试用版](http://software.intel.com/en-us/intel-parallel-studio-xe-evaluation)，它有很多工具可以使用。它连接到您的 IDE VS 2010 或 2012，然后您可以测试运行您的应用程序。一般功能

> 英特尔® Parallel Studio XE 包括下一代软件
> 
> 开发工具：  英特尔® C、C++ 和 Fortran 编译器 –</p>
> 
> 行业领先的编译器 英特尔® MKL 和英特尔® IPP – 性能库 英特尔® 线程构建模块和英特尔® Cilk™ Plus – 并行编程模型 英特尔® Advisor XE – 线程助手 英特尔® VTune™ Amplifier XE – 性能和线程分析器  英特尔® Inspector XE – 内存和线程检查器  静态分析 – 查找难以发现的缺陷

我想它会帮助你。谢谢

# solr - 太阳黑子/solr 中“作用域（标量场）”的弹性搜索等效项

> ID：14579392
> 
> 赞同：0
> 
> 时间：2013-01-29T09:19:56.600
> 
> 标签：solr, elasticsearch, sunspot, tire

我正在为我们的 rails-app/data 探索各种搜索引擎选项。我能够使 sunspot/solr 工作，目前正在探索 ElasticSearch 作为替代方案，但无法在 ES 下获得相同的东西（范围/过滤）。

我想按照“ [https://github.com/sunspot/sunspot](https://github.com/sunspot/sunspot) ”中的“范围”部分中的描述过滤/范围对象。

我有一个活动记录类“产品”。

```
class Product < ActiveRecord::Base
...

  include Tire::Model::Search
  include Tire::Model::Callbacks

  tire.mapping do
    indexes :name, :type => :string
    indexes :categories do
      indexes :id, :type => :integer
    end
  end
end 
```

一旦我将产品导入ES，

以下查询有效并给出结果

```
Product.tire.search { query { string '*', default_operator: "AND", default_field: "name" } }.results 
```

如何在给定类别 id 的情况下获取特定类别的产品？

```
Product.tire.search { query { string '*', default_operator: "AND", default_field: "name" }; filter(:term, 'categories.id' => 38) }.results 
```

我基本上是在寻找以下太阳黑子调用的轮胎等效物：

```
Product.search do
  with(:category_ids, 38)
end 
```

在 Product 类中具有以下内容

```
searchable :auto_index => true, :auto_remove => true do
  text :name

  integer :category_ids, :multiple => true do
     self.categories.map &:id
  end

end 
```

# unit-testing - 运行时使用 MvcContrib 对控制器和视图进行单元/集成测试会引发错误

> ID：14579395
> 
> 赞同：0
> 
> 时间：2013-01-29T09:20:04.477
> 
> 标签：unit-testing, asp.net-mvc-4, integration-testing, mvccontrib-testhelper

我对测试 MVC 4 Web 应用程序的世界相当陌生，并且一直在尝试对视图和控制器进行单元测试，以查看对于给定控制器的操作是否呈现特定视图，我一直在使用 MvcContrib TestHelper 来尝试简单的过程测试应用程序，但到目前为止一直无法通过测试。

运行测试时，我收到错误*Expected view name was 'index' actual was ''*

目前我正在运行这个测试方法：

```
[TestMethod]
    public void AMAC_Controller_Renders_Index_View()
    {
        var builder = new TestControllerBuilder();
        var controller = new AMACController();
        builder.InitializeController(controller);

        var result = controller.Index();

        result.AssertViewRendered().ForView("index").WithViewData<AMACEnquiryModel>();
    } 
```

控制器和模型当前都被应用程序使用，想知道您是否可以就如何让这个测试工作提供任何建议，我之前已经修改过，当我这样做时我得到另一个错误，路由名称已经存在于集合中.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:24:08.533

在从 MvcContrib 项目的一位贡献者那里得到一些建议后，测试未通过的原因是因为我在控制器所在的 .ForView("index") 之前将错误的数据传递到 .ForView()实际上传递 View(model) 所以 .ForView() 的值实际上是一个空字符串，所以断言现在看起来像这样：

```
result.AssertViewRendered().ForView("").WithViewData<AMACEnquiryModel>(); 
```

# jquery - 我的 jquery 选项卡中的错误

> ID：14579396
> 
> 赞同：1
> 
> 时间：2013-01-29T09:20:06.147
> 
> 标签：jquery, knockout.js

我正在使用 Jquery UI Bootstrap 选项卡。我有 2 个选项卡定义了产品和版本

```
 <ul class="nav nav-tabs" id="myTab" style="margin-top: 26px;">
      <li><a href="#product" data-toggle="tab">Product</a></li>
      <li><a href="#version" data-toggle="tab">Version</a></li>
 </ul> 
```

我也更新了我的小提琴。没有更新我的淘汰代码，因为它太长了。链接在下面

[我的小提琴](http://jsfiddle.net/ashreva/CchjW/4/)

您可以在我的小提琴中看到，当页面加载时，它会在我的选项卡“产品”底部显示“版本名称、版本代码、平台版本”列。这是错误的。这些列应该出现在我的版本选项卡中。我该怎么做？在我的实际应用程序中，它看起来像这样。我用红色标记了出现在我的产品选项卡中的线。 ![标签](../Images/719e0cf86610fb73dc0820c0c36124fb.png)

我需要我的标签的输出如下

![标签](../Images/e7395a999dd60bc4e2aad8b70ecd28e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:32:04.750

这是你需要的吗：http: [//jsfiddle.net/kSWQF/1/](http://jsfiddle.net/kSWQF/1/)

```
 $('#myTab').tabs(); 
```

确保检查这些参考：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script> 
```

编辑：

要按标签索引显示特定标签：

```
$('#myTab').tabs("option", "selected", 1 ); //index ie zero based, here selects second tab. 
```

见[http://jsfiddle.net/kSWQF/2/](http://jsfiddle.net/kSWQF/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:29:33.133

不确定这是如何与淘汰赛相关的，但您不应该在选项卡窗格 div 中拥有每个选项卡的所有内容吗？而您有一个产品标题的 div 和一个内容的 div。您的所有内容都应该在 div 中，并带有您在选项卡的 href 中引用的 id。

# scala - 隐式方法参数列表中的 Manifest 来自哪里？

> ID：14579398
> 
> 赞同：1
> 
> 时间：2013-01-29T09:20:16.487
> 
> 标签：scala

我尝试了另一篇文章中的一个示例：[如何在 Scala 上解决类型擦除问题？或者，为什么我不能获取我的集合的类型参数？](https://stackoverflow.com/questions/1094173/how-do-i-get-around-type-erasure-on-scala-or-why-cant-i-get-the-type-paramete). 以下是可行的示例：

```
object Registry {
   import scala.reflect.Manifest

   private var map = Map.empty[Any, (Manifest[_], Any)]

   def register[T](name: Any, item: T)(implicit m: Manifest[T]) {
      map = map.updated(name, m -> item)
   }

   def get[T](key: Any)(implicit m: Manifest[T]): Option[T] = {
     map get key flatMap {
      case (om, s) => if (om <:< m) Some(s.asInstanceOf[T]) else None
   }
  }
}

object App extends App {
   Registry.register("a", List(1, 2, 3))

   println(Registry.get[List[Int]]("a"))
   //Some(List(1, 2, 3))
  } 
```

我有两个问题：

1.  有一个隐式参数 m: Manifest[T] for method register，我认为这个参数应该定义在某个地方使用。但是没有定义，为什么有用呢？
2.  这一行：`case (om, s) => if (om <:< m) Some(s.asInstanceOf[T]) else None`，在方法`get`中，是什么`om <:< m`意思？这是我第一次看到这样的用法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:12:59.097

1.  清单隐含由编译器插入（当它可以生成它们时）。
2.  `om <:< m`检查 manifest 表示的类型是否是 manifest 表示`om`的类型的子类型`m`。

笔记：

*   清单在 Scala 2.10 中被 TypeTags 取代
*   Manifests 上的`<:<`方法并不总是准确的（例如，它可以忽略类型参数上的协变/逆变注释，IIRC）。

# c# - 出错时重试异步文件上传

> ID：14579399
> 
> 赞同：5
> 
> 时间：2013-01-29T09:20:22.793
> 
> 标签：c#, .net, wpf, asynchronous, async-await

我正在尝试在 WPF 应用程序中上传文件。如果服务器响应，一切正常，但应用程序将在“不安全”互联网连接的环境中使用。因此，如果第一次尝试失败，我想在短暂休息后重试上传。

我用 async/await 尝试了几件事，最后得到了以下代码。如果服务器正在运行，一切都很好，但如果不是，则程序在 while 循环的第二次迭代中失败并出现 ObjectDisposedException。

有任何想法吗？

```
private void UploadButton_Click(object sender, RoutedEventArgs e)
{
    // build content to send
    content = new MultipartFormDataContent();
    var filestream = new FileStream(filePath, FileMode.Open);
    var fileName = System.IO.Path.GetFileName(filePath);
    content.Add(new StreamContent(filestream), "file", fileName);
    content.Add(new StringContent(terminal_id.ToString()), "terminal_id");

    UploadTask(content);
    /*var task_a = new Task(() => UploadTask(content));
    task_a.Start();*/
}

private async void UploadTask(HttpContent content)
{
    bool success = false;
    int counter = 0;

    while (counter < 3 && !success)
    {
        Debug.WriteLine("starting upload");
        success = await UploadFileAsync(content);
        Debug.WriteLine("finished upload. result " + success.ToString());
        //if (!success) System.Threading.Thread.Sleep(5000);
        counter++;
    }
}

private async Task<bool> UploadFileAsync(HttpContent content)
{
    var message = new HttpRequestMessage();
    message.Method = HttpMethod.Post;
    message.Content = content;
    message.RequestUri = new Uri(target_url);

    using (HttpClient client = new HttpClient())
    {
        try
        {
            HttpResponseMessage res = await client.SendAsync(message);
            if (res.IsSuccessStatusCode) return true;
        }
        catch (HttpRequestException hre)
        {
            Debug.WriteLine(hre.ToString());
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:48:27.623

似乎您的文件流被处理/关闭。您需要从一开始就重试（`content = new MultipartFormDataContent();`等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:10:21.427

将内容的创建移动到 UploadFileAsync() 之后，它就可以工作了。结果：

```
Task<bool> newTask;

private void UploadButton_Click(object sender, RoutedEventArgs e)
{
    newTask = UploadTask();
}

private async Task<bool> UploadTask()
{
    bool success = false;
    int counter = 0;

    while (counter < 3 && !success)
    {
        Debug.WriteLine("starting upload");
        success = await UploadFileAsync();
        Debug.WriteLine("finished upload. result " + success.ToString());
        if (!success) System.Threading.Thread.Sleep(5000);
        counter++;
    }
    return success;
}

private async Task<bool> UploadFileAsync()
{
    MultipartFormDataContent content = new MultipartFormDataContent();
    var filestream = new FileStream(filePath, FileMode.Open);
    var fileName = System.IO.Path.GetFileName(filePath);
    content.Add(new StreamContent(filestream), "file", fileName);
    content.Add(new StringContent(terminal_id.ToString()), "terminal_id");

    var message = new HttpRequestMessage();
    message.Method = HttpMethod.Post;
    message.Content = content;
    message.RequestUri = new Uri(target_url);

    using (HttpClient client = new HttpClient())
    {
        try
        {
            HttpResponseMessage res = await client.SendAsync(message);
            if (res.IsSuccessStatusCode) return true;
        }
        catch (HttpRequestException hre)
        {
            Debug.WriteLine(hre.ToString());
        }
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T09:34:59.937

我认为问题可能`content`是超出范围？尝试在方法`content`内部创建`UploadTask`。此外，可能值得返回 a `Task<bool>`from`UploadTask`并将其缓存为类级别变量（因此您不必返回 void）。

例如：

```
Task<bool> newTask;

private void UploadButton_Click(object sender, RoutedEventArgs e)
{
    newTask = UploadTask();

}

private async Task<bool> UploadTask()
{
bool success = false;
int counter = 0;

// build content to send
HttpContent content = new MultipartFormDataContent();
var filestream = new FileStream(filePath, FileMode.Open);
var fileName = System.IO.Path.GetFileName(filePath);
content.Add(new StreamContent(filestream), "file", fileName);
content.Add(new StringContent(terminal_id.ToString()), "terminal_id");

while (counter < 3 && !success)
{
    Debug.WriteLine("starting upload");
    success = await UploadFileAsync(content);
    Debug.WriteLine("finished upload. result " + success.ToString());

    counter++;
}

return success;
} 
```

# java - Java regex - 匹配拆分的单词

> ID：14579401
> 
> 赞同：-1
> 
> 时间：2013-01-29T09:20:28.437
> 
> 标签：java

我在匹配包含破折号 ( `-`) 的行尾的单词时遇到问题。

例如：

```
circum-
stances 
```

我`regex`将此匹配为 2 个单词`(circum, stances)`，但我需要删除破折号和换行符 a 组成一个单词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:26:17.693

尝试这个，

```
public static void main(String[] args) {
        String str = "circum-\nstances";
        System.out.println("[Original Content:"+str+"]");
        str = str.replaceAll("-(\\s+)", "");
        System.out.println("[Modified Content:"+str+"]");
    } 
```

你会得到这个作为输出，我相信这就是你想要的。

```
run:
[Original Content:circum-
stances]
[Modified Content:circumstances]
BUILD SUCCESSFUL (total time: 0 seconds) 
```

# asp.net-mvc-3 - 如何以更好的方式编写此 Linq 查询以返回总和

> ID：14579404
> 
> 赞同：0
> 
> 时间：2013-01-29T09:20:45.193
> 
> 标签：asp.net-mvc-3, linq, entity-framework

我有一个 LINQ 查询。在那我需要做一些计算。一切都很好，除非在任一条件中找到空值，然后简单地为整个条件返回空值。谁能告诉我即使在条件中找到了一个空值，我怎么能返回一些值。

**代码**

```
var model = 
   (from q in db.Porders
    select new porders()
    {
        Id = q.Id,
        DetCount = (from amtdet in db.PoDetails 
                    where amtdet.PoId == q.Id 
                    select amtdet.Id).Count(),
        Amount = (from amtpord in db.Porders 
                  where amtpord.Id == q.Id 
                  select amtpord.Freight + amtpord.Misc - amtpord.Discount
                 ).FirstOrDefault() +
                  (from amtdet in db.PoDetails 
                   where amtdet.PoId == q.Id 
                   select amtdet.Copies * amtdet.EstUnitPrice
                  ).Sum()
     }).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:49:51.157

我认为该`DefaultIfEmpty()`方法将是这里的解决方案

```
var model =
    from q in db.Porders
    select new porders()
    {
        DetCount = 
            db.PoDetails.Count(amtdet => amtdet.PoId == q.Id),
        Amount = 
            (from amtpord in db.Porders
            where amtpord.Id == q.Id
            select amtpord.Freight + amtpord.Misc - amtpord.Discount)
            .DefaultIfEmpty().First()
            +
            (from amtdet in db.PoDetails
            where amtdet.PoId == q.Id
            select amtdet.Copies * amtdet.EstUnitPrice)
            .DefaultIfEmpty().Sum()
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:35:50.963

尝试`column ?? 0`在可空列或结果上应用合并运算符`FirstOrDefault`（对于不满足条件的情况）。Linq to entity 会将此运算符转换为 SQL：

`CASE WHEN Column IS NOT NULL THEN Column ELSE 0 END`

它看起来像：

```
var model = 
   (from q in db.Porders
    select new porders()
    {
        Id = q.Id,
        Amount = (from amtpord in db.Porders 
                  where amtpord.Id == q.Id 
                  select amtpord.Freight ?? 0 + amtpord.Misc ?? 0 - amtpord.Discount ?? 0
                 ).FirstOrDefault() ?? 0 +
                  (from amtdet in db.PoDetails 
                   where amtdet.PoId == q.Id 
                   select amtdet.Copies ?? 0 * amtdet.EstUnitPrice ?? 0
                  ).Sum() ?? 0
     }).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:20:51.977

首先让我假设有一个导航属性`Porder.Details`。接下来，为什么`Porder`在子查询中选择相同的？在我看来，您的查询可以简化为

```
from q in db.Porders
    select new porders()
    {
        Id = q.Id,
        DetCount = q.Details.Count(),
        Amount = q.Freight + q.Misc - q.Discount
               + q.PoDetails.Select( d => d.Copies * d.EstUnitPrice)
                  .DefaultIfEmpty().Sum()
    } 
```

如果没有这样的导航属性，强烈建议创建一个。如果出于某种原因您不能或不想这样做，您应该在主查询 ( `db.Porders.GroupJoin(db.PoDetails...)`) 中对详细记录进行分组连接。

如果空值是由 引起的`Freight`，`Misc`或者`Discount`可以为空，请使用`??`operator: `q.Freight ?? 0`。

# zend-framework - 学习Magento之前有必要学习Zend Framework吗？

> ID：14579408
> 
> 赞同：11
> 
> 时间：2013-01-29T09:20:51.570
> 
> 标签：zend-framework, magento

我是 Magento 的新手，想有效地学习 Magento。我知道 Maegnto 是基于 zendframe 工作的。我以前没有在 Zend 框架中工作过。在学习 Magento 之前有必要学习 Zend Framework 吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-29T09:25:43.123

之前不一定需要学习 Zend Framework。但是，如果您了解模型视图控制器 (MVC) 的一般范式以更好地掌握系统，这肯定会有所帮助。虽然 Magento 严重依赖 Zend 框架，但它在很多方面都以自己的方式做事，所以如果你想学习 Magento，我建议你直接学习 Magento，并在适当的时候学习 Zend 框架。作为开发人员入门的良好深入教程是：

[http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T23:02:07.947

不。

虽然它会有所帮助，但我实际上是从不了解 Python 和 C# 之外的任何东西中学习到 Magento。编程知识和 HTML/CSS 知识很有用，但是你不需要知道框架的进出就可以使用它。

# vertical-alignment - 如何用 div 填充屏幕，然后在屏幕太大（达到最大高度）时将其居中？

> ID：14579410
> 
> 赞同：0
> 
> 时间：2013-01-29T09:20:56.907
> 
> 标签：vertical-alignment, css

目标：

*   当窗口的宽度和高度都很小时，div应该和窗口一样大；

*   当窗口宽度过大（>max-width）时，div应保持其宽度为max-width，并水平居中。

*   当窗口高度过大（>max-height）时，div应保持其高度为max-height，**并垂直居中**。

下面的例子已经实现了一切，除了最后一点。

如何在窗口中垂直居中这个div？即，我希望红色区域表现得像绿色区域，但只是垂直而不是水平。

（此设计是为移动设备屏幕的响应式设计而设计的。如果可能的话，不涉及 JS。）

```
<!doctype html>
<html>
        <head>
                <style>
                        body,html{
                                height:100%;
                                margin:0px;
                                background:green;
                                }
                        #t1{
                                position:relative;
                                height:100%;
                                max-width:640px;
                                margin:0 auto;
                                background-color:red;
                        }
                        #t1-1{
                                position:absolute;
                                height:100%;
                                max-height:640px;
                                width:100%;
                                background-color:#dddddd;

                                overflow:hidden;/*demo purpose*/
                        }
                        /*the following stuff are for demo only*/
                        img{
                                position:absolute;
                                opacity:0.5;
                        }
                        img.w{
                                width:100%;
                        }
                        img.h{
                                height:100%;
                        }
                </style>
        </head>
        <body>
                <div id="t1">
                        <div id="t1-1">
                                <img class="h" src="http://www.google.com/images/srpr/logo3w.png" />
                                <img class="w" src="http://www.google.com/images/srpr/logo3w.png" />
                        </div>
                </div>
        </body>
</html> 
```

PS 在这个例子中，一些桌面浏览器在内部设置了一个 min-width 值给整个东西（例如 Chrome 中的 400px），使 div 不能保持水平收缩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:43:37.837

您可能需要一些 javascript 才能使其工作：

首先，你需要一个`<div>`元素来布局，所以我称之为**mask**：

```
<div id="mask"></div> 
```

然后，设置样式以填充整个文档，并给出一个`max-width`and `max-height`：

```
<style>
    #mask {
        position: fixed;
        height: 100%;
        max-height: 400px;
        width: 100%;
        max-width: 400px;
        top: 0;
        left: 0;
        background: red;
    }
</style> 
```

这种风格不执行**居中**工作，所以你需要你的 javascript 来做，我们有一个`layoutMask`函数来确定 div 是否应该居中：

```
var mask = document.getElementById('mask');
function layoutMask() {
    // here 400 is the same as the max-width style property
    if (window.innerWidth >= 400) {
        mask.style.left = '50%';
        // to ensure centering, this sould be (max-width / 2)
        mask.style.marginLeft = '-200px';
    }
    else {
        mask.style.left = '';
        mask.style.marginLeft = '';
    }

    // the same as width
    if (window.innerHeight >= 400) {
        mask.style.top = '50%';
        mask.style.marginTop = '-200px';
    }
    else {
        mask.style.top = '';
        mask.style.marginTop = '';
    }
} 
```

最后，将此函数分配给`resize`事件，并立即执行以确保`<div>`在第一次加载时正确放置：

```
if (window.addEventListener) {
    window.addEventListener('resize', layoutMask);
}
else {
    window.attachEvent('onresize', layoutMask);
}
layoutMask(); 
```

我在我的 chrome 上试过这个，但我确定它在 IE6 下不起作用，因为 IE6 不支持该`position: fixed;`样式，但它应该在大多数浏览器中工作。

我制作了一个[jsfiddle](http://jsfiddle.net/otakustay/bPjHf/)进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:29:45.013

你可以添加一个`@media`查询来实现这个效果

```
@media (min-height: 640px) {
    #t1-1 {
        top: 50%;
        margin-top: -320px;
    }
} 
```

请参阅[JSFiddle](http://jsfiddle.net/6tS7v/)进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:40:50.127

据我所知，`height:100%`这是不可能的。你需要用`<center>`它来保持它在水平和垂直的中心。您可能还需要使用边距。喜欢：

```
margin-top:18%;
margin-left:40%; 
```

# c - 递归相关问题

> ID：14579413
> 
> 赞同：0
> 
> 时间：2013-01-29T09:21:01.853
> 
> 标签：c, recursion

请在下面找到显示一些基于递归的操作的代码。我希望有人能解释一下这个递归是如何工作的？

```
#include <stdio.h>
int func(int);
main()
{
  int ret = 0;
  ret = func(6);
   printf("The val is %d\n",ret);

}

int func(int m)
{
    if((m==0)||(m==1))
    {
       return 1;
    }
    else
    {
      return (func(m-1)+func(m-2));
    }
} 
```

执行时，val的值为13。请有人解释一下这个展开操作是如何在堆栈中发生的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T09:30:04.250

您不需要涉及堆栈或任何展开（不过，请原谅我涉及自己）。

只需将调用替换为函数的内容，并继续这样做，直到您不再递归：

```
ret = func(6) =
      func(5) + func(4) =
      func(4) + func(3) + func(3) + func(2) =
      func(2) + func(3) + func(1) + func(2) + func(1) + func(2) + func(0) + func(1) =
      func(0) + func(1) + func(1) + func(2) + 1 + func(0) + func(1) + 1 + func(1) + func(0) + 1 + 1 =
      1 + 1 + 1 + func(0) + func(1) + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 =
      3 + 1 + 1 + 8 = 
      3 + 2 + 8 =
      13 
```

排版有点困难，但这就是发生的事情，答案似乎也与你得到的相符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T09:30:31.913

递归只不过是从特定函数中调用 a 函数。许多数学算法或（树）搜索算法使用这种技术来获得他们想要的结果。

递归函数调用需要“逃避”它们重复的“自调用”，否则应用程序将变得无响应。在您的示例中，这是通过`if((m==0)||(m==1))`检查完成的。如果检查为真，则函数只返回 1（并转义递归）。

您展示的递归代码计算[斐波那契数](http://en.wikipedia.org/wiki/Fibonacci_number)列，这是一种典型的递归算法，因为它需要 2 个先前计算的值。第 0 步和第 1 步返回`1`。这 2 个值是为第 2 步添加的（结果为`1+1=2`）。下一步导致`1+2=3`. 等等。如您所见，这只能从一开始就计算出来（因此需要递归才能这样做）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T09:43:41.483

您的程序尝试打印[斐波那契](http://en.wikipedia.org/wiki/Fibonacci_number)数列的第 n 个（或第 n+1 个）数。这里的基本情况是`m =1 or m=0`

这里递归的最糟糕的事情是一个值被计算了两次，例如 func(4)、func(3) 和 func(2)，从这里可以看出。![在此处输入图像描述](../Images/fd6489d36e33b26db7c5386fc73d46aa.png)

# c# - 如何下载所选文件夹中的文件

> ID：14579414
> 
> 赞同：0
> 
> 时间：2013-01-29T09:21:06.923
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我正在使用 asp.net mvc。我让用户下载某些文件。在那里他会选择一个文件来下载。然后应将所选文件下载到该文件夹​​。希望你能理解我的问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:30:32.913

你可以使用[这篇](http://dotnetslackers.com/articles/aspnet/Trigger-file-downloads-with-a-MVC-3-controller-action.aspx)文章和[这个](http://www.codeproject.com/Articles/79043/An-Example-ASP-NET-MVC-Web-Project-to-Upload-and-D)

```
using System.IO;
namespace FileDownloadInMvc3.Models
{
    public static class ExtensionMethods
    {
        public static byte[] GetFileData(this string fileName, string filePath)
        {
            var fullFilePath = string.Format("{0}/{1}", filePath, fileName);
            if (!File.Exists(fullFilePath))
                throw new FileNotFoundException("The file does not exist.", 
                    fullFilePath);
            return File.ReadAllBytes(fullFilePath);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:43:35.110

创建一种方法，该方法将根据 id 返回文档

将该文件转换为字节，上传文件夹是用户选择下载的路径

```
Document document = documentService.GetSingle(id);
byte[] fileContent = StreamFile(uploadFolder + document.FilePath);
contenttype="application/force-download";
return File(fileContent, ContentType, document.FileName); 
```

# c# - 在调整窗体大小时增加用户控件大小

> ID：14579419
> 
> 赞同：0
> 
> 时间：2013-01-29T09:21:20.677
> 
> 标签：c#, .net

我有一个基于两个用户控件和一个表单的应用程序。此表单是我的 2 个用户控件的父级，我务实地将它们添加到表单中。我的问题是，当用户控件中的锚组件时，它们没有锚定在表单中。因此，当通过拖动其中一个角来重新调整表单大小时，用户控件似乎也不会重新调整大小。有人告诉我，我必须听取表单大小并将该大小附加到用户控件。这是一个好的解决方案吗？如果是的话，我会怎么做？

顺便说一句，我的用户控件插入到选项卡组件中。

这是我将用户控件添加到表单的代码。（如果需要）

```
public void addUC(UserControl control, TabPage tab)
{
    control.Parent = tab;
} 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:27:47.867

[`Anchor`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)您可能希望使用该属性锚定子用户控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:26:26.970

如果表单中只有 2 个使用控件，为什么不使用停靠栏 - 它总是会将使用控件拉伸到表单的最大尺寸

# c++ - 将数据类型从 32 位更改为 64 位

> ID：14579421
> 
> 赞同：1
> 
> 时间：2013-01-29T09:21:24.803
> 
> 标签：c++

我需要在 C++ 中更改不同操作系统版本之间的数据类型。是否可以将宏定义到H文件中。这将是一个很好的做法。

前任

```
if os_version=32
             long =long
    if os_version=64
              long =int 
```

是否有任何宏/变量可以帮助我确定它是 64 位机器还是 32 位机器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T09:22:47.433

您可以改用精确宽度的整数类型（在 中声明`<cstdint>`）

```
int8_t
int16_t
int32_t
int64_t 
```

这样，尺寸在所有提供它们的平台上都是固定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T09:29:59.373

我建议使用 stdint.h 库。

事实上，您不再使用“int”类型，而是 uint32_t 用于 32 位无符号整数，或 uint64_t 用于 64 位无符号整数。

该库为您提供其他类型。因此，通过使用它，您不必担心目标平台（32/64 位）。

缺点是您必须将所有已使用的类型更改为代码，但您的代码肯定更便携。

# c# - Ninject 注入到属性构造函数、字段或方法中

> ID：14579423
> 
> 赞同：3
> 
> 时间：2013-01-29T09:21:26.753
> 
> 标签：c#, attributes, inversion-of-control, ninject, interceptor

我想知道以下是否可行，如果可以，该怎么做。我将尝试用下面的代码来解释它。

```
public class RandomClass
{
    ...
    //class is filled with stuff of none importance for this demonstration
    ...

    [LogScope("Start", "End")] //The important LogScope attribute!
    public virtual void MyMethod()
    {
        ...
        //Doing something here but not the point now...
        ...
    }

    ...
}

public LogScopeAttribute : InterceptAttribute
{
    private readonly string _header;
    private readonly string _footer;

    public LogScopeAttribute(string header, string footer)
    {
        _header = header;
        _footer = footer;
        // This is just one of many constructors....
    }

    public override IInterceptor CreateInterceptor(IProxyRequest request)
    {
        return request.Context.Kernel.Get<LogScopeInterceptor>(
            new ConstructorArgument("header", _header),
            new ConstructorArgument("footer", _footer));
        // In the real version of this method there is more logic here for creating
        // the right version of the interceptor, in regards to what constrcutor the
        // LogScopeAttribute was called with.
    }
}

public class LogScopeInterceptor : SimpleInterceptor
{
    // No need to explain stuff here, (not of importance to the question)
    // but what the interceptor does for me is write to log
    // a header and footer and indent everything inside the logscope.
} 
```

我想要的是将 a`ILogScopeInterceptorFactory`注入到`LogScopeAttribute`with Ninject 中，这样我就不必在`CreateInterceptor`方法内调用内核，并插入`ConstructorArgument`我想这样做的对象......

```
public LogScopeAttribute : InterceptAttribute
{
    private readonly string _header;
    private readonly string _footer;
    private readonly ILogScopeInterceptorFactory _logScopeInterceptorFactory;

    public LogScopeAttribute(ILogScopeInterceptorFactory logScopeInterceptorFactory ,string header, string footer)
    {
        _header = header;
        _footer = footer;
        _logScopeInterceptorFactory = logScopeInterceptorFactory;
    }

    public override IInterceptor CreateInterceptor(IProxyRequest request)
    {
        return _logScopeInterceptorFactory.Create(_header, _footer);
    }
} 
```

这是`ILogScopeInterceptorFactory`我绑定的接口，`Ninject.extensions.Factory` 如下所示：

`Bind<ILogScopeInterceptorFactory>().ToFactory();`

```
public interface ILogScopeInterceptorFactory
{
    LogScopeInterceptor Create(char separatorChar, string header, string footer);
    LogScopeInterceptor Create(char separatorChar, string header);
    LogScopeInterceptor Create(string header, string footer);
    LogScopeInterceptor Create(string header);
    LogScopeInterceptor Create(char separatorChar);
    LogScopeInterceptor Create();
} 
```

现在我想做的仍然是`LogScopeAttribute`这样 使用，而`[LogScope("Start", "End")]` **不必手动插入工厂，只需注入它，我该怎么做？**

**编辑2：**

我正在使用 log4net 进行登录，我将在这里写下`LogScopeAttribute`它的作用以及输出的样子。

```
[LogScope("The Start", "The End")]
public virtual void MyMethod()
{
    logger.Info("Hello World!");
}

OUTPUT:
logger: The Start
logger:     Hello World!
logger: The End 
```

为了让ninject拦截所有方法，它们需要是`public`and `virtual`。我发现这对于记录非常方便，可以轻松缩进方法中记录的所有内容如果我想要页眉和页脚，或者打印该方法的执行时间，它都在那里。这也可以嵌套...

**@FELIX**

问题不在于我无法获取内核......如果我想通过调用内核来创建工厂，我可以这样做。

```
public override IInterceptor CreateInterceptor(IProxyRequest request)
{
    var factory = request.Context.Kernel.Get<ILogScopeInterceptorFactory>();
    return factory.Create(_header, _footer);
} 
```

如果我手动插入工厂，我将不得不为每个属性执行此操作

```
[LogScope(_logScopeInterceptorFactory, "header", "footer")] 
```

那会很丑陋

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:48:24.173

由于您无法在属性中执行任何运行时...您将不得不作弊...

容器是全局的，所以我总是使用单例模式创建它......

```
public static class Container
{
    private static IKernel _container;

    static Container()
    {
        _container = ...; //Create the kernel and define container
    }

    public static IKernel Current { get { return _container; } }
}

public LogScopeAttribute(string header, string footer)
{
    _header = header;
    _footer = footer;
    _logScopeInterceptorFactory = Container.Current.Get<ILogScopeInterceptorFactory>();
} 
```

通常当然使用`Container.Current.Get`是一种反模式。但是在某些情况下它是必需的（例如属性）。在理想的世界中，该属性将非常小——`ILogScopeInterceptorFactory`它将完成所有工作（并且将是被测试的类）。

# java - Google android maps api v2 始终显示标记标题

> ID：14579426
> 
> 赞同：44
> 
> 时间：2013-01-29T09:21:47.923
> 
> 标签：java, android, google-maps, google-maps-markers, google-maps-android-api-2

我的 android 应用程序中有一个**谷歌地图 v2**，上面有一些标记。当用户单击这些标记之一时，会出现一个标题弹出窗口。如何在没有用户点击的情况下始终显示这些标题？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-29T17:21:17.133

只要打电话`Marker.showInfoWindow();`。请参阅[https://developers.google.com/maps/documentation/android/marker#info_windows](https://developers.google.com/maps/documentation/android/marker#info_windows)和[https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model /标记#showInfoWindow()](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Marker#showInfoWindow())

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-12-17T22:27:34.140

像这样的东西：

```
googleMap.addMarker(new MarkerOptions()
    .position(new LatLng(latitude, longitude))
    .title("Your position")).showInfoWindow(); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-01-17T16:27:49.343

你可以这样做：

```
Marker marker = mMap.addMarker(new MarkerOptions().position(currentPosition).title("Your text"));
marker.showInfoWindow(); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-08-12T18:18:26.773

为了在标记周围的地图上显示标记标题，我在互联网上找到的解决方案都不适合我，所以我卷起袖子，制作了这个为我解决这个问题的库，希望它也能帮助其他人：

[https://github.com/androidseb/android-google-maps-floating-marker-titles](https://github.com/androidseb/android-google-maps-floating-marker-titles)

这是它如何工作的预览：

[![预习](../Images/f05679240323056176468cfc511ebff1.png)](https://i.stack.imgur.com/pMZ5Z.gif)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-03T01:47:20.923

我在某些实现中不太好，但这是我的代码：

```
public BitmapDescriptor getBitmapFromView(String title) {
        View view = LayoutInflater.from(activity.getApplicationContext()).inflate(R.layout.marker_tooltip, null);
        ((TextView) view.findViewById(R.id.tooltips_title)).setText(title);

        //Get the dimensions of the view. In my case they are in a dimen file
        int width = activity.getResources().getDimensionPixelSize(R.dimen.tooltips_width);
        int height = activity.getResources().getDimensionPixelSize(R.dimen.tooltips_height);

        int measuredWidth = View.MeasureSpec.makeMeasureSpec(width, View.MeasureSpec.EXACTLY);
        int measuredHeight = View.MeasureSpec.makeMeasureSpec(height, View.MeasureSpec.EXACTLY);

        view.measure(measuredWidth, measuredHeight);
        view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight());

        Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(bitmap);

        view.draw(canvas);

        return BitmapDescriptorFactory.fromBitmap(bitmap);
    }

...
marker.setIcon(getBitmapFromView(marker.getTitle()));
... 
```

我在地图应用程序的一个片段中实现了这一点，并有一些变化。例如，使用自定义信息窗口和地图上的一些事件，但它的实现需要同时显示所有标记标题。**让我知道它是否对你也有帮助**

**“activity.getResources().getDimensionPixelSize(R.dimen.tooltips_width)”变量的 ACTIVITY 是片段中的一个属性**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-31T12:26:56.597

也许我回答这个问题有点晚了，但下面的代码对我有用：

//添加这个库

```
implementation 'com.google.maps.android:android-maps-utils:0.5' 
```

//然后使用下面的方法

```
public void makersMaker(GoogleMap googleMap){
    IconGenerator iconFactory = new IconGenerator(this);                            
    Marker marker1 = googleMap.addMarker(new MarkerOptions().position(newLatLng(-1.3177336,36.8251902));                  
    marker1.setIcon(BitmapDescriptorFactory.fromBitmap(iconFactory.makeIcon("Marker 1")));
    Marker marker2 = googleMap.addMarker(new MarkerOptions().position(new LatLng(-1.2857399,36.8214088)));                
    marker2.setIcon(BitmapDescriptorFactory.fromBitmap(iconFactory.makeIcon("Marker 2")));
} 
```

# jquery - 更改 jQuery datepicker 日期格式

> ID：14579427
> 
> 赞同：-1
> 
> 时间：2013-01-29T09:21:50.560
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker, date-format

我正在使用 jQuery 日期选择器。我已经绑定了`Textbox`一个`Datepicker`。我想更改日期格式，以便它显示日期，如`Tuesday, 29 - Jan - 2013`. 我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:28:21.400

我想它已经在这里发布了：

试试这个：

[jQuery UI DatePicker - 更改日期格式](https://stackoverflow.com/questions/1328025/jquery-ui-datepicker-change-date-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:36:47.783

尝试这个，

```
$( ".selector" ).datepicker({ dateFormat: 'DD, d-M-yy' }); 
```

[http://jqueryui.com/resources/demos/datepicker/date-formats.html](http://jqueryui.com/resources/demos/datepicker/date-formats.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:38:13.973

您必须使用日期格式选项来格式化日期[[链接]](http://docs.jquery.com/UI/Datepicker/formatDate)

```
$(document).ready(function () {  

               var pickerOpts = {
                dateFormat:"DD ,d - M  yy"
               };  
              $("#fromDate").datepicker(pickerOpts);     

            }); 
```

[演示](http://jsfiddle.net/muthusamy/CchjW/7/)

# iphone - iphone-在弹出较早的视图后推送视图

> ID：14579434
> 
> 赞同：0
> 
> 时间：2013-01-29T09:22:07.137
> 
> 标签：iphone

我在导航上推送了一个视图。现在我点击按钮进行跟踪。

```
 [self.navigationController popViewControllerAnimated:YES];
    FreeStuffViewController * freeStuffVC=[[FreeStuffViewController   alloc]initWithNibName:@"FreeStuffViewController" bundle:nil];
    [self.navigationController pushViewController:freeStuffVC animated:YES];
    [freeStuffVC release]; 
```

它只弹出一个视图，但力推新的 FreeStuffVc。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:46:33.740

试试这个：

```
FreeStuffViewController * freeStuffVC=[[FreeStuffViewController alloc] initWithNibName:@"FreeStuffViewController" bundle:nil];
    [self.navigationController pushViewController:freeStuffVC animated:YES];
NSMutableArray *viewArray = [[self.navigationController viewControllers] mutableCopy];
[viewArray removeObjectAtIndex:viewArray.count - 2];
self.navigationController.viewControllers = viewArray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:58:42.647

这很好用。核实

```
 UINavigationController *local = [[UINavigationController alloc]init];
        [local popViewControllerAnimated:NO];
        newView *nr=[[newView alloc]init];
        [self.navigationController pushViewController:nr animated:YES]; 
```

# c# - 如何过滤相关实体但没有外键

> ID：14579435
> 
> 赞同：1
> 
> 时间：2013-01-29T09:22:09.980
> 
> 标签：c#, linq, entity-framework, entity-framework-4

我正在使用带有 lambda 表达式的 EF 来查询表。

```
var eventToPushCollage = eventsForEvaluation.Where(x => x.DateTimeStart > currentDateTime && currentDateTime >= x.DateTimeStart.AddMinutes(-15)); 
```

表`eventsForEvaluation`有一个属性 ID。

在我的数据库中，我还有另一个`PushedEvents`使用 Id 属性调用的表。

注意：这两个表**没有外键关系**。

我需要对我的查询应用另一个过滤，并获取第二个表中也不存在的所有记录`PushedEvents`。

我想知道是否有可能和示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:28:05.557

使用组加入：

```
var eventToPushCollage = 
      from e in eventsForEvaluation
      join p in PushedEvents on e.Id equals p.Id into g
      where e.DateTimeStart > currentDateTime &&
            currentDateTime >= e.DateTimeStart.AddMinutes(-15) &&
            g.Count() == 0 // NOT present in second table
      select e; 
```

更新（方法语法）

```
var eventToPushCollage = eventsForEvaluation
       .GroupJoin(PushedEvents,
                  e => e.Id,
                  p => p.Id,
                  (e,g) => new { e, g })
       .Where(x => x.e.DateTimeStart > currentDateTime &&
                   currentDateTime >= x.e.DateTimeStart.AddMinutes(-15) &&
                   x.g.Count() == 0)
       .Select(x => x.e); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:28:35.163

尝试这个

```
var eventToPushCollage =
    from x in eventsForEvaluation 

    where 
    !PushedEvents.Any(item => item.Id == x.Id)
    && x.DateTimeStart > currentDateTime 
    && currentDateTime >= x.DateTimeStart.AddMinutes(-15)

    select x; 
```

# c# - GridView 的 SelectedIndexChange 事件未在 asp.net 中触发？

> ID：14579437
> 
> 赞同：1
> 
> 时间：2013-01-29T09:22:15.910
> 
> 标签：c#, asp.net, gridview

下面的代码没有执行！！

```
 protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        GridViewRow r = GridView1.SelectedRow;
        TxtName.Text = r.Cells[0].Text;
        TextBox2.Text = r.Cells[1].Text;
        TextBox3.Text = r.Cells[2].Text;
        TextBox4.Text = r.Cells[3].Text;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:26:04.427

您必须使用`EnableViewState="true"` 并绑定一次，`! IsPostBack`以免删除您的事件 foreach 帖子。

因为当您重新构建网格时，您会删除所有事件

在您的页面加载中：

```
if(! IsPostback)
{
   //Bind your Gridview
} 
```

持久化您的数据`EnableViewState="true"`

```
 <asp:gridview id="YourGridView"  EnableViewState="true" ...../> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:39:40.190

我们需要启用选择按钮，然后只触发 GridView1_SelectedIndexChanged 即 AutoGenerateSelectButton="true"

# jquery-plugins - 使用 Javascript 在 Etalage Jquery Zoom 插件中调整图像大小

> ID：14579438
> 
> 赞同：1
> 
> 时间：2013-01-29T09:22:17.767
> 
> 标签：jquery-plugins

我正在制作一个列出产品详细信息的网页。产品详细信息包括可以使用 Etalage Jquery Zoom 插件缩放的图像。我可以根据产品的某些属性更改 Etalage Jquery 插件中显示的图像。

我通过执行语句动态更改图像

```
$('#etalage').etalage({
                show_descriptions: false,
                small_thumbs: 0

            }).show(); 
```

问题是源图像失去了指定的高度和宽度。我想知道如何在 Etalage 插件中更改图像后使用 JavaScript 为源图像分配高度和宽度。

问候

马修

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:21:21.793

当源图像的大小正确时，通过观察分配给以下参数的值解决了此问题。

在调用 show() 方法时分配这些值解决了我的问题

```
$('#etalage').etalage({
                show_descriptions: false,
                small_thumbs: 0,
                source_image_width: 900,            // The source/zoomed image width (not the frame around it) (value in pixels)
                source_image_height: 1200,
                thumb_image_width:480,              // The large thumbnail width (excluding borders / padding) (value in pixels)
                thumb_image_height: 480,
                autoplay:false,
                zoom_area_width: 340,               // Width of the zoomed image frame (including borders, padding) (value in pixels)
                zoom_area_height:495,       // Height of the zoomed image frame (including borders, padding) (value in pixels / 'justify' = height of large thumb + small thumbs)
                zoom_area_distance: 20,

            }).show(); 
```

# java - 使用 sax 解析 xml

> ID：14579440
> 
> 赞同：-4
> 
> 时间：2013-01-29T09:22:29.310
> 
> 标签：java, sax

我想使用`SaxParser`. 我正在尝试获取与标签或其属性关联的数据。XML 采用以下格式。

```
 <con>
    <fig>
    <abc>
    <name xyz="">
    <id>2</id>
    </name>
    </abc>
    </fig>
  </con> 
```

我尝试了几个示例，但未能成功获取数据，我请求您向我提供任何建议或工作示例，以增加我对使用 SAX 进行解析的知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:25:21.003

使用 DOM 解析器，因为您的 xml 非常小，并且很容易获得您所要求的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:36:12.347

网上有我的示例和帮助，请在下次发布之前在堆栈上发布您的问题。

请检查以下链接，其中有很好的 saxParsing 示例

[如何在 Java 中读取 XML 文件 – (SAX Parser)](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)

[获取属性及其值](http://www.roseindia.net/xml/sax/ReadAttributes.shtml)

希望这对你有帮助。

# java - Spring-ws 客户端 mtom

> ID：14579441
> 
> 赞同：1
> 
> 时间：2013-01-29T09:22:30.463
> 
> 标签：java, spring, jaxb, spring-ws, mtom

我正在尝试调用 Web 服务并使用 mtom 将附件添加到我的请求中。在我正在调用的 Web 服务上启用了 Mtom，我可以使用 soapui 调用该服务。

请求的架构如下所示；

```
<element name="MyRequest">
    <complexType>
        <sequence>
            ...
            <element name="content" type="base64Binary"
                xmime:expectedContentTypes="text/xml" />
        </sequence>
    </complexType>
</element> 
```

然后在我的 java 代码中创建 jaxb 请求对象并尝试从字符串中设置内容；

```
MyRequest request = factory.createMyRequest();

StreamSource ss = new StreamSource(new StringReader("some content..."));

request.setContent(ss);

WebServiceTemplate wst = ...;

wst.marshalSendAndReceive(request); 
```

我已将编组器设置为启用 mtom（尽管我不确定客户端是否需要这样做）；

```
<bean id="my-marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="contextPath" value="..."/>
    <property name="mtomEnabled" value="true"/>
</bean> 
```

但我得到以下异常；

```
javax.xml.transform.TransformerFactoryConfigurationError：未找到提供程序 net.sf.saxon.TransformerFactoryImpl
```

是否有人对我做错了什么有任何想法，或者任何人都可以向我展示如何使用来自 spring-ws 客户端的 mtom 附件编组 jaxb 请求的示例？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:39:40.617

这实际上就像将 saxon 添加到我的类路径/pom 中一样简单。我认为 spring-ws 客户端中的 saaj 消息内容坚持使用 saxon 将 mtom 附件的源推送到生成的请求中。

我的代码实际上是有效的，但我会把它留在这里，因为在网上进行大量搜索时，我找不到任何关于如何从 spring-ws 客户端发送带有 mtom 附件的 jaxb 请求的好例子，所以其他人可能会找到这个有用。

# java - 外键必须与参考主键具有相同的列数休眠 - 多对多

> ID：14579449
> 
> 赞同：2
> 
> 时间：2013-01-29T09:22:50.107
> 
> 标签：java, spring, hibernate, hibernate-mapping

我有域类 - 用户、角色、组、组角色

**用户域**

```
private long id, 
private String userName, 
private String password, 
Set<Role> roles = new HashSet<Role>(); 
```

**用户.hbm.xml**

```
<hibernate-mapping package="uk.co.jmr.sdp.domain">
<class name="User" table="user">
        <id name="id" unsaved-value="-1">
            <generator class="native"/>
        </id>
        <property name="userName" column="user_name"/>
        <property name="password" column="password"/>
        <property name="emailId" column="email_id"/>

        <set name="roles" table="user_role" lazy="false" cascade="all">
            <key column="user_id"/>
            <many-to-many column="role_id" class="Role" fetch="join"/>
        </set>

        <set name="groupRoles" table="user_grouprole" lazy="false" cascade="all">
            <key column="user_id"/>
            <many-to-many column="group_role_id" class="GroupRole" fetch="join"/>
        </set> 

</class>
</hibernate-mapping> 
```

我有 user_grouprole 表作为用户和组角色集的连接表 我有 user_role 表作为用户和角色集的连接表

**组域**

```
private long id;
private String groupName;
private Set<Role> roles = new HashSet<Role>(); 
```

**组.hbm.xml**

```
<hibernate-mapping package="uk.co.jmr.sdp.domain">
 <class name="Group" table="group">
 <id name="id" unsaved-value="-1">
        <generator class="native"/>
 </id>
 <property name="groupName" column="group_name"></property>

 <set name="roles" table="group_role" lazy="false" cascade="all">
        <key column="group_id"/>
        <many-to-many column="role_id" class="Role" fetch="join"/>
    </set> 
```

**组角色**

```
private long id;
private Role role;
private Group group; 
```

**组角色.hbm.xml**

```
<class name="GroupRole" table="group_role">
    <id name="id" unsaved-value="-1">
            <generator class="native"/>
    </id>
    <many-to-one name="role" class="uk.co.jmr.sdp.domain.Role"
            column="role_id" lazy="false" not-null="true" />

    <many-to-one name="group" class="uk.co.jmr.sdp.domain.Group"
            column="group_id" lazy="false" not-null="true" /> 

 </class>
</hibernate-mapping> 
```

当我尝试使用主类进行测试时，我得到一个映射错误，如休眠映射错误，如 **外键 (FK5110401A8398947:user_grouprole [group_role_id])) 必须具有与引用的主键相同的列数 (group_role [group_id,role_id] )**

这是什么错误？为什么我会收到此错误？我应该怎么做才能纠正这个错误？？？任何解决方案？谁能解释这个错误是什么？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:32:35.720

您的错误是告诉您的表 USER 在名为 GROUP_ROLE_ID 的列上包含一个外键，但是您引用的表 GROUP_ROLE 用两列 ROLE_ID 和 GROUP_ID 定义了它的主键，顺便说一句，这对于关系表来说很常见。

在我看来，您映射 GroupRole 的唯一原因是您在 User 实体中需要它。好吧，如果你的领域模型真的是正确的，那么你需要考虑如何同步你的 User 的 FK 和 GroupRole 的 PK。为此，您可以：

1.  为您的复合键创建一个 PK 对象或在映射中正确定义您的 ID；
2.  更改 GroupRole 表中的 PK 定义。

此致。

# python - 如何从 GAE 调用 GAS 脚本（python）

> ID：14579452
> 
> 赞同：2
> 
> 时间：2013-01-29T09:22:57.767
> 
> 标签：python, google-app-engine, google-apps-script, oauth-2.0, urlfetch

我有一个作为服务发布的 Google Apps 脚本，访问权限设置为我域的任何用户，执行设置为所有者用户。这样，当尝试通过 url 直接访问时，它需要用户身份验证

现在我想用 python 从我的谷歌应用引擎项目中调用那个脚本

我读了很多书，到处搜索，但没有找到好的解决方案

我试过 urlfetch、httplib.HTTPSConnection 和 urllib2

我的项目已经使用 oauth 在我的应用程序域中进行了身份验证，并且我有任何令牌（accestoken、requesttoken 等）。我可以在 google docs 上很好地使用 gdata api，但我不能调用该脚本

我能怎么做？

谢谢大家再见桑德罗

# java - 如何在Java中存储一个项目的“多条信息”

> ID：14579454
> 
> 赞同：-2
> 
> 时间：2013-01-29T09:23:03.987
> 
> 标签：java

我需要一个数据结构，它允许我为每个项目存储至少 2 条数据。我希望这些项目按照它们插入的顺序存储。

例子：

```
Insert (xyz, string) ... insert (789, number)
System.out.println( dataStruct ); 
```

`(xyz, string)`然后会打印出来`(789,number)`

如果可能，请显示一些示例代码。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:24:55.983

以下代码可以是您的数据结构：

```
 List<Item> list;

    class Item {
     public String desc;
     public Integer val;
     void insert(String desc,Integer val){
     this.desc = desc;
     this.val = val; 
     }   
     void insert(Integer val,String desc){
     insert(desc,val);
     }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:27:05.037

您可以使用[哈希](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html)表或[列表](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)

例子：

```
Hashtable<Integer,String> hTable=new Hashtable<Integer,String>();
//adding or set items in Hashtable by put method key and value pair
hTable.put(new Integer(2), "Two");
hTable.put(new Integer(1), "One");
hTable.put(new Integer(4), "Four");
hTable.put(new Integer(3), "Three");
hTable.put(new Integer(5), "Five"); 
```

看看一些[Java 结构](http://www.tutorialspoint.com/java/java_data_structures.htm)。

编辑

为了保持插入顺序，可以使用[LinkedHashSet](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)或[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T09:43:55.770

```
public class Store {
String str1;
String str2;

public Store(String string1, String string2) {
    str1 = string1;
    str2 = string2;
}

public static void main(String[] args) {

    Store[] s = new Store[10]; // size
    for (int i = 0; i < s.length; i++) {
        s[i] = new Store("A", "B");
        System.out.println(s[i].str1);
        System.out.println(s[i].str2);

    }

}
} 
```

我认为这就是您要搜索的内容。这是类似 C 的结构。试试这个。这将帮助您通过进行少量更改来为每个项目插入超过 2 条数据。秩序也将得到维持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T09:44:28.630

这将以某种方式满足要求，您也可以在 HashMap 的构造函数中使用类型的参数。

```
HashMap map= new HashMap();
List<HashMap> virtualDs= new ArrayList<HashMap>(); 
```

# asp.net-mvc-3 - MVC3 上的远程验证是在 keypress/keyrelease 上触发，而不是在 lostfocus 上触发

> ID：14579457
> 
> 赞同：2
> 
> 时间：2013-01-29T09:23:33.953
> 
> 标签：asp.net-mvc-3, remote-validation

我正在尝试在 MVC3 上对注册表单上的用户名输入文本进行远程验证，一切正常，除了我期待在输入失去焦点时触发远程验证，但它会在每次按键或按键时触发这是写在输入中的，导致对动作验证的许多请求与您编写的每个字符一样多。

有任何方法可以使用不显眼的 javascript 中的构建来改变这种行为。

这就是我的属性模型的样子：

```
[Required]
[Display(Name = "User Name")]
[Remote("ValidateUniqueUserName", "Account")]
public string UserName { get; set; } 
```

这是控制器的样子：

```
public JsonResult ValidateUniqueUserName(string username)
    {
        if (string.IsNullOrEmpty(username))
        {
            return Json("User Name is required", JsonRequestBehavior.AllowGet);
        }
        var result = _membershipApplicationService.IsUserNameAvalible(username);
        if (!result)
        {
            return Json("User Name is already taken, please try another one", JsonRequestBehavior.AllowGet);
        }
        return Json(true, JsonRequestBehavior.AllowGet);
    } 
```

并且使用@Html.Partial 呈现注册表单

谢谢。

# iphone - AVPlayerItem replaceCurrentItemWithPlayerItem 阻塞

> ID：14579458
> 
> 赞同：30
> 
> 时间：2013-01-29T09:23:34.507
> 
> 标签：iphone, ios, ipad, mpmovieplayercontroller, avplayer

首先是关于应用程序的一些背景...
- 有很多繁重的 UI 操作涉及视频播放器（主要是滚动）
- 视频是动态的，并且根据我们当前的页面而变化。
- 所以视频必须是动态的并不断变化，用户界面也需要响应

我最初使用的是 a`MPMoviePlayerController`但由于某些要求我不得不依靠 AVPlayer
我为`AVPlayer`.
要更改 videoPlayer 中的内容，这就是 AVPlayer-wrapper 类中的方法

```
/**We need to change the whole playerItem each time we wish to change a video url */
-(void)initializePlayerWithUrl:(NSURL *)url
{
    AVPlayerItem *tempItem = [AVPlayerItem playerItemWithURL:url];

    [tempItem addObserver:self forKeyPath:@"status"
                  options:NSKeyValueObservingOptionInitial | NSKeyValueObservingOptionNew
                  context:nil];
    [tempItem addObserver:self forKeyPath:@"playbackBufferEmpty"
                  options:NSKeyValueObservingOptionInitial | NSKeyValueObservingOptionNew
                  context:nil];

    //Not sure if this should be stopped or paused under the ideal circumstances
    //These will be changed to custom enums later
    [self setPlaybackState:MPMoviePlaybackStateStopped];
    [self setLoadState:MPMovieLoadStateUnknown];
    [self.videoPlayer replaceCurrentItemWithPlayerItem:tempItem];

    //This is required only if we wish to pause the video immediately as we change the url
    //[self.videoPlayer pause];
} 
```

现在当然一切正常......除了......

```
[self.videoPlayer replaceCurrentItemWithPlayerItem:tempItem]; 
```

似乎在几分之一秒内阻塞了 UI，并且在滚动期间，这些使 UI 真的没有响应且丑陋，而且此操作无法在后台执行

有什么解决方法或解决方法吗..？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-09-22T23:25:58.457

我找到的解决方案是确保底层`AVAsset`在将其提供给`AVPlayer`. `AVAsset`有一个`loadValuesAsynchronouslyForKeys:`很方便的方法：

```
AVAsset *asset = [AVAsset assetWithURL:self.mediaURL];
[asset loadValuesAsynchronouslyForKeys:@[@"duration"] completionHandler:^{
    AVPlayerItem *newItem = [[AVPlayerItem alloc] initWithAsset:asset];
    [self.avPlayer replaceCurrentItemWithPlayerItem:newItem];
}]; 
```

在我的情况下，URL 是一个网络资源，`replaceCurrentItemWithPlayerItem:`实际上会阻塞几秒钟，等待此信息下载，否则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-21T13:57:13.900

我们在构建 Ultravisual 时遇到了同样的问题。我不完全记得我们是如何解决它的，但 IIRC 它涉及在后台线程上尽可能多地设置项目，并等到新项目报告它“准备好播放”后再调用`replaceCurrentItemWithPlayerItem`.

可悲的是，这涉及到一种带有某种不一致异步 KVO 的巫毒舞蹈，这并不好玩。

# .htaccess - ?referer=www.clickfind.com.au 重复标题标签

> ID：14579459
> 
> 赞同：0
> 
> 时间：2013-01-29T09:23:38.650
> 
> 标签：.htaccess, redirect

最近谷歌网站管理员工具显示我有一个重复的标题标签

```
 http://www.mydomain.com/root_folder/mypage.htm
 http://www.mydomain.com/root_folder/mypage.htm?referer=www.clickfind.com.au 
```

我尝试使用以下代码通过重定向规则解决问题

```
 RewriteCond %{QUERY_STRING} ^referer=.*$
 RewriteRule ^(.*)$ http://www.mydomain.com$1? [R=301,L] 
```

使用此规则，我被重定向到[http://www.mydomain.comroot_folder/mypage.htm](http://www.mydomain.comroot_folder/mypage.htm)，因为您可以看到 com 和 root_folder 之间没有 / 应该有的地方......谁能帮我解决我需要编辑的问题下面的代码来解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:49:05.927

你应该添加“/$1”然后“”然后“？”..

```
RewriteCond %{QUERY_STRING} ^referer=.*$
RewriteRule ^(.*)$ http://www.mydomain.com/$1 ? [R=301,L] 
```

# sql - 如何在 Sql Server 中删除没有属性的 xml 节点

> ID：14579462
> 
> 赞同：2
> 
> 时间：2013-01-29T09:23:46.733
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-delete

从 Sql Server 2008 中的 xml 字段中删除具有缺失属性的根节点的所有子节点的正确方法是什么？

我的 Xml 看起来像这样，我想删除所有`<root>`没有`ln`指定属性的子节点

```
<root>
  <title />
  <title />
  <questionphrase ln="nl">
    <xhtml />
  </questionphrase>
  <questionphrase ln="en">
    <xhtml />
  </questionphrase>
  <information ln="nl">
    <xhtml />
  </information>
  <information ln="en">
    <xhtml />
  </information>
  <title />
  <title ln="en">
     value
  </title>
  <label ln="en">
     value
  </label>
  <title />
  <title />
</root> 
```

删除后的 xml 应该是这样的

```
<root>
  <questionphrase ln="nl">
    <xhtml />
  </questionphrase>
  <questionphrase ln="en">
    <xhtml />
  </questionphrase>
  <information ln="nl">
    <xhtml />
  </information>
  <information ln="en">
    <xhtml />
  </information>
  <title ln="en">
     value
  </title>
  <label ln="en">
     value
  </label>
</root> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T09:58:41.220

试试这个：

```
DECLARE @xml XML = '....'
SET @xml.modify('delete //root/*[not(@ln)]') 
```

**[SQL 小提琴演示](http://sqlfiddle.com/#!3/d41d8/8210)**

# ios - iOS中的多线程，MapKit显示数据

> ID：14579463
> 
> 赞同：1
> 
> 时间：2013-01-29T09:23:49.967
> 
> 标签：ios, multithreading, ipad, mapkit, mkoverlay

我的应用基于 MapKit，可以跟踪多个用户。现在使用我们的网络服务，我在地图上显示我的位置以及其他用户的最后一个位置，比如说 10 个位置。如果用户更新了他们的位置，它会通过网络服务发送并通过回调显示在地图上。我能够实时跟踪其他用户，但不知道如何在这里使用线程。我的 UI 有时会阻塞，有时还会由于内存问题而崩溃。

在我的`connectionDidFinishLoading`方法中，我解析 JSON 数据，然后创建注释和覆盖：

```
-(void) connectionDidFinishLoading: (NSURLConnection *) connection
{

[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

NSArray *trackingDict = [NSJSONSerialization JSONObjectWithData:empJsonData options:kNilOptions error:nil];
NSLog(@"Json Dictionary = %@", trackingDict);
NSLog(@"COUNT = %i",trackingDict.count);

if ([trackingDict count] >= 2) {
    for (trackUsersCount = 0; trackUsersCount< trackingDict.count; trackUsersCount++) {
        NSLog(@"trackUsersCount %i", trackUsersCount);

        NSMutableArray *latlongArray = [[NSMutableArray alloc]init];
        latlongArray = [[trackingDict objectAtIndex:trackUsersCount]objectForKey:@"latlong"];

        [userLongitudeArray removeAllObjects];
        [userLatitudeArray removeAllObjects];

        for (int i = 0; i<latlongArray.count; i++) {
            NSLog(@"COunt - > %@", [[latlongArray objectAtIndex:i]objectForKey:@"lat"]);
            NSLog(@"COunt - > %@", [[latlongArray objectAtIndex:i]objectForKey:@"long"]);
            [userLatitudeArray addObject:[[latlongArray objectAtIndex:i]objectForKey:@"lat"]];
            [userLongitudeArray addObject:[[latlongArray objectAtIndex:i]objectForKey:@"long"]];

        }

        // ProfilePIC URL
        profilePicURLString = [[trackingDict objectAtIndex:trackUsersCount]objectForKey:@"user_profilePicture"];

NSString *name = [[trackingDict objectAtIndex:trackUsersCount]objectForKey:@"user_firstName"];
        [userNameArray addObject:name];
        [profilePicURLStringArray addObject:profilePicURLString];

        for (int i = 0; i<userLatitudeArray.count; i++) {
            CLLocationCoordinate2D userLocation;
            userLocation.latitude = [[userLatitudeArray objectAtIndex:i]doubleValue];
            userLocation.longitude = [[userLongitudeArray objectAtIndex:i] doubleValue];
            Annotation *Anno = [[Annotation alloc]init];

            Anno.coordinate = userLocation;
            Anno.title = name;
            Anno.userProfileImageString = profilePicURLString;
            [mapView addAnnotation:Anno];
        }

        NSLog(@"ARRAY for longitude %@", userLongitudeArray);
        NSLog(@"ARRAY for latitude %@", userLatitudeArray);
        int i;
        for (i = 0; i<userLatitudeArray.count; i++) {
            CLLocationCoordinate2D userLocation;
            userLocation.latitude = [[userLatitudeArray objectAtIndex:i]doubleValue];
            userLocation.longitude = [[userLongitudeArray objectAtIndex:i] doubleValue];
            MKMapPoint * pointsArray = malloc(sizeof(CLLocationCoordinate2D)*userLongitudeArray.count);
            pointsArray[i] = MKMapPointForCoordinate(userLocation);
            polyline = [MKPolyline polylineWithPoints:pointsArray count:i];
            free(pointsArray);
        }
         [mapView addOverlay:polyline];
         }
}

[mapView reloadInputViews];

} 
```

}

每 20 秒调用一次 Web 服务，我知道我可以在这里使用 GCD 或其他线程方法，但是在通过后台线程调用 Web 服务的时间间隔内，注释和覆盖不显示而不是地图。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:09:43.520

我认为没有快速简便的解决方法。一种方法是将收集（修改）数据的代码与更新视图的代码分开。

例如，将处理 UI 的代码设置为单独的方法`updateUI`。

从这里开始，您有几个选择。你可以试试这个，例如：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
   //perform the data collection, calculations... 
   //here is where the model in MVC gets modified
   //
   [self performSelectorOnMainThread: @selector(updateUI) withObject:nil waitUntilDone: NO];
}

-(void)updateUI
{
   //do the UI updates (like adding overlays etc...) here 
} 
```

您还可以将更新 UI 所需的所有数据存储为一种对象并将其作为`withObject:`参数传递。

# vba - 我需要宏 excel 代码来检查我的字符串格式是否正确

> ID：14579466
> 
> 赞同：2
> 
> 时间：2013-01-29T09:23:55.110
> 
> 标签：vba, excel

这是我的整个代码，我将解释它以及我想要添加的内容。

第一个函数调用另外两个函数。

第二个函数用于计算JMBG，这是我国唯一的公民人数。第三个是计算PIB，它是公司的注册号。

这两个功能都可以，不需要移动它们或类似的东西。

我们需要更改第一个函数。如您所见，在第一个函数中，我正在检查输入字符串的长度是否正常。如果长度是 13 个数字，我调用 JMBG，如果是 8，我调用 PIB 函数。那没问题。

但是我必须在第一个函数中检查其他类型的验证。正如我所说，我的 Excel 单元格包含 13 个数字或 8 个数字。我想在第一个函数中制定一些规则，告诉我我的单元格是否填充了除这 8 个数字或 13 之外的任何其他内容，然后向我发送消息，告诉我单元格中有错误，然后其他 2 个函数将不会不叫。如您所见，我需要验证。

示例：单元格 A1：1234567891234...有 13 个数字，JMBG 将被称为 08058808...有 8 个数字，PIB 将被称为 1234567890123aSdf​​~...错误，因为字段中有大小写字母和其他字符。

总而言之，我需要 8 个号码来呼叫 PIB，需要 13 个号码来呼叫 JMBG 以及除向我发送错误之外的任何其他号码。

```
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
Function ProvjeraID(ID As String) As String

If Len(ID) = 13 Then
ProvjeraID = Provjeri_JMBG(ID)
 'Exit Function
ElseIf Len(ID) = 8 Then
 ProvjeraID = ProvjeriPIB(ID)
 'Exit Function
 Else
 ProvjeraID = "Duzina je razlicita od 8 i od 13"
 'Exit Function
End If

End Function
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
Function Provjeri_JMBG(JMBG As String) As String
' Funkcija vraca tekst sa opisom ispravnosti JMBG
' Primijeniti na radnom listu uz pomoc komande: =Proveri_JMBG(adresa)

' Inicijalizacija promenljivih koje se koriste prilikom izrade koda
Dim duzina As Integer, zbir As Integer
Dim cifra(1 To 13) As Integer
Dim dan As Integer, mesec As Integer, godina As String

' Inicijalizacija konstanti
Const ERR_dan = "GREŠKA: podatak o datumu neispravan!"
Const ERR_mesec = "GREŠKA: podatak o mesecu neispravan!"
Const ERR_godina = "GREŠKA: podatak o godini neispravan!"
Const ERR_duzina = "GREŠKA: dužina razlicita od 13!"
Const ERR_kont = "GREŠKA: neispravan kontrolni broj!"
Const OK_JMBG = "JMBG je ispravan"

' Preuzimanje ulaznih vrednosti sa kojima ce se vrsiti operacije
duzina = Len(JMBG)
dan = Int(Left(JMBG, 2))
mesec = Int(Mid$(JMBG, 3, 2))
godina = Mid$(JMBG, 5, 3)

' Provjera dužine JMBG
If (duzina <> 13) Then
  Provjeri_JMBG = "GREŠKA: dužina razlicita od 13!"
  Exit Function
End If

' Provjera datuma
If dan < 1 Then
  Provjeri_JMBG = "GREŠKA: podatak o datumu neispravan!"
  Exit Function
End If

' Provjera mjeseca i dana u mjesecu
Select Case mesec
  Case 1, 3, 5, 7, 8, 10, 12
    If dan > 31 Then
      Provjeri_JMBG = "GREŠKA: podatak o datumu neispravan!"
      Exit Function
    End If
  Case 4, 6, 9, 11
    If dan > 30 Then
      Provjeri_JMBG = "GREŠKA: podatak o datumu neispravan!"
      Exit Function
    End If
  Case 2
    If ((godina Mod 4 = 0) And dan > 29) Or _
       ((godina Mod 4 <> 0) And dan > 28) Then
      Provjeri_JMBG = "GREŠKA: podatak o datumu neispravan!"
      Exit Function
    End If
  Case Else
    Provjeri_JMBG = "GREŠKA: podatak o mesecu neispravan!"
    Exit Function
End Select

' Provjera godine: ispravne su od 1899 do tekuce godine
If (godina > Right(Str(Year(Now)), 3)) And (godina < "899") Then
  Provjeri_JMBG = "GREŠKA: podatak o godini neispravan!"
  Exit Function
End If

' Provjera kontrolnog broja
For i = 1 To 13
  cifra(i) = Int(Mid$(JMBG, i, 1))
Next i

zbir = cifra(13) + cifra(1) * 7 + cifra(2) * 6
zbir = zbir + cifra(3) * 5 + cifra(4) * 4
zbir = zbir + cifra(5) * 3 + cifra(6) * 2
zbir = zbir + cifra(7) * 7 + cifra(8) * 6
zbir = zbir + cifra(9) * 5 + cifra(10) * 4
zbir = zbir + cifra(11) * 3 + cifra(12) * 2

If (zbir Mod 11) <> 0 Then
  Provjeri_JMBG = "GREŠKA: neispravan kontrolni broj!"
Else
  Provjeri_JMBG = "JMBG je ispravan"
End If

End Function
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''
Public Function ProvjeriPIB(PIB As String)
Dim c0 As Integer
Dim c1 As Integer
Dim c2 As Integer
Dim c3 As Integer
Dim c4 As Integer
Dim c5 As Integer
Dim c6 As Integer
Dim c7 As Integer
Dim c8 As Integer
Dim zadnji As String
zadnji = Right(PIB, 1)
PIB = Left(PIB, 8)
If Len(PIB) <> 8 Then
   ProvjeriPIB = "PIB je OK"
Else
       c8 = (CInt(Mid(PIB, 1, 1)) + 10) Mod 10
       If c8 = 0 Then
         c8 = 10
       End If
       c8 = (c8 * 2) Mod 11
       c7 = (CInt(Mid(PIB, 2, 1)) + c8) Mod 10
       If c7 = 0 Then
         c7 = 10
       End If
       c7 = (c7 * 2) Mod 11
       c6 = (CInt(Mid(PIB, 3, 1)) + c7) Mod 10
       If c6 = 0 Then
         c6 = 10
       End If
       c6 = (c6 * 2) Mod 11
       c5 = (CInt(Mid(PIB, 4, 1)) + c6) Mod 10
       If c5 = 0 Then
         c5 = 10
       End If
       c5 = (c5 * 2) Mod 11
       c4 = (CInt(Mid(PIB, 5, 1)) + c5) Mod 10
       If c4 = 0 Then
         c4 = 10
       End If
       c4 = (c4 * 2) Mod 11
       c3 = (CInt(Mid(PIB, 6, 1)) + c4) Mod 10
       If c3 = 0 Then
         c3 = 10
       End If
       c3 = (c3 * 2) Mod 11
       c2 = (CInt(Mid(PIB, 7, 1)) + c3) Mod 10
       If c2 = 0 Then
         c2 = 10
       End If
       c2 = (c2 * 2) Mod 11
       c1 = (CInt(Mid(PIB, 8, 1)) + c2) Mod 10
       If c1 = 0 Then
         c1 = 10
       End If
       c1 = (c1 * 2) Mod 11
       c0 = (11 - c1) Mod 10
       If c0 <> zadnji Then
        ProvjeriPIB = "PIB je OK"
       Else
        ProvjeriPIB = "PIB nije OK"
       End If
       'return(pib || to_char(c0));

End If
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:57:31.367

该解决方案基于`regex`脚本库。我已经使用了 3 个对象，但代码肯定会被*修剪*为只使用一个对象来检查您需要的所有三个条件。由于您想要有关您插入的文本的信息，因此我只使用了 3 条不同的`regex`规则。

```
Option Explicit

Sub TextNature()
Dim str  As String
Dim strMsg As String
Dim objRegEx1 As Object, objRegEx2 As Object
Dim objRegEx3 As Object

str = Sheets(1).Range("A2").Value

'--check length
If Len(str) <> 13 Then
   Exit Sub
   strMsg = "Too lengthy...limit should be 13"
End If

Set objRegEx1 = CreateObject("VBScript.RegExp")
Set objRegEx2 = CreateObject("VBScript.RegExp")
Set objRegEx3 = CreateObject("VBScript.RegExp")
objRegEx1.IgnoreCase = False
objRegEx1.Global = True
objRegEx2.IgnoreCase = False
objRegEx2.Global = True
objRegEx3.IgnoreCase = False
objRegEx3.Global = True

objRegEx1.Pattern = "^\d+$" '-- only numbers
objRegEx2.Pattern = "^[a-zA-Z]+$" '-- only lower upper letters
objRegEx3.Pattern = "^[a-zA-Z\d]+$" '-- numbers and lower upper letters

If objRegEx1.Test(str) Then
    strMsg = "Contain only numbers"
ElseIf objRegEx2.Test(str) Then
    strMsg = "Contain only lower upper letters"
ElseIf objRegEx3.Test(str) Then
    strMsg = "Contain numbers and lower upper letters"
Else
     strMsg = "not satisfying"
End If

End Sub 
```

**结果：使用 sub 作为函数：**

![在此处输入图像描述](../Images/b29beb5aab409940d6c1c829df7cfc93.png)

* * *

## OP 请求函数，长度限制为 8：

```
Option Explicit

Function TextNature(ByRef rng As Range) As String
Dim str  As String, strMsg As String
Dim objRegEx1 As Object, objRegEx2 As Object, objRegEx3 As Object

str = rng.Value
If Len(str) <> 8 Then
    TextNature = "Limit is not correct. It should be 8."
    Exit Function
End If

Set objRegEx1 = CreateObject("VBScript.RegExp")
Set objRegEx2 = CreateObject("VBScript.RegExp")
Set objRegEx3 = CreateObject("VBScript.RegExp")
objRegEx1.IgnoreCase = False
objRegEx1.Global = True
objRegEx2.IgnoreCase = False
objRegEx2.Global = True
objRegEx3.IgnoreCase = False
objRegEx3.Global = True

objRegEx1.Pattern = "^\d+$" '-- only numbers
objRegEx2.Pattern = "^[a-zA-Z]+$" '-- only lower/upper letters
objRegEx3.Pattern = "^[a-zA-Z\d]+$" '-- numbers and lower/upper letters

If objRegEx1.Test(str) Then
    strMsg = "Contain only numbers"
ElseIf objRegEx2.Test(str) Then
    strMsg = "Contain only lower upper letters"
ElseIf objRegEx3.Test(str) Then
    strMsg = "Contain numbers and lower upper letters"
Else
     strMsg = "Not Satisfying"
End If

TextNature = strMsg
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:57:02.860

这样的事情应该会有所帮助 - 您可以在 select 语句中定义条件。这是一个UDF，所以将代码放入一个模块并输入`=checkcell(A1)`一个单元格。

```
Public Function CheckCell(ByVal CheckRange As Range) As String
Dim strChr As String, rngCheck As Range
Dim i As Integer, NPC As Integer, UC As Integer, LC As Integer, OT As Integer
Set rngCheck = Range("A1")
For i = 1 To rngCheck.Characters.Count
    strChr = rngCheck.Characters(i, 1).Text
    Select Case Asc(strChr)
        Case 0 To 31
            NPC = NPC + 1
        Case 96 To 122
            LC = LC + 1
        Case 65 To 90
            UC = UC + 1
        Case Else
            OT = OT + 1
    End Select
Next
CheckCell = "NPC: " & NPC & " UC: " & UC & " LC: " & LC & " Others: " & OT
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:43:05.220

将您的第一个函数替换为以下内容，并在单元格中调用它`=ProvjeraID2(A1)`以评估单元格**A1**的内容：

```
Function ProvjeraID2(oRng As Range) As String
    Dim sRet As String

    If Not oRng Is Nothing Then
        If IsNumeric(oRng.Value) Then
            If Len(oRng.Value) = 13 Then
                sRet = Provjeri_JMBG(CStr(oRng.Value))
            ElseIf Len(oRng.Value) = 8 Then
                sRet = ProvjeriPIB(CStr(oRng.Value))
            Else
                sRet = "Numeric but wrong length (" & Len(oRng.Value) & ")"
            End If
        Else
            sRet = "Not a number"
        End If
    End If

    ProvjeraID2 = sRet
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T11:03:47.823

如果基于公式的解决方案没问题 - 使用这个**ARRAY**公式（假设检查字符串在 中`A1`）：

`=IF(OR(NOT(ISERROR(SEARCH(ROW($1:$10)-1,A1)))),"Has digits","No digits")`

并按`CTRL`+ `SHIFT`+`ENTER`而不是通常的`ENTER`- 这将定义一个 ARRAY 公式并在`{}`其周围产生括号（但不要手动输入它们！）。

字符串长度和任何其他字符都无关紧要。希望对您有所帮助）

# .net - 在 matlab 中使用 .net 自定义类

> ID：14579472
> 
> 赞同：4
> 
> 时间：2013-01-29T09:24:12.273
> 
> 标签：.net, class, matlab

我目前正在使用 Matlab 导入我拥有的自定义点 NET dll 库，
使用`AssemblyInfo = NET.addAssembly('c:\myClasses.dll')`.

清单`disp(AssemblyInfo.Classes)`公开库的自定义类，例如

```
'MyLib.ClassA'  
'MyLib.ClassB'  
'MyLib.ClassA+eResults' 
```

我正在使用`myVar = MyLib.ClassA;`在 matlab 中创建一个 .net 类变量（工作正常），
但第二个类没有构造函数，因此`myVar = MyLib.ClassB;`导致
`No constructor 'MyLib.ClassB' with matching signature found.`

第二个问题是 .NET 类中的加号 (+)，`MyLib.ClassA+eResults`当
我尝试时会导致错误`myVar = MyLib.ClassA+eResults;`
`Undefined function or variable 'eResults'.`

`MyLib.ClassB`有没有办法在 matlab中创建实例自定义类？
加号是什么意思，如何创建一个`MyLib.ClassA+eResults`没有任何语法错误的实例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T09:39:18.343

要创建类的实例，它必须是公共的并且具有公共构造函数。如果 classB 只有一个带有多个参数的自定义构造函数，您可以像这样实例化它：

```
var = MyLib.ClassB(x, y); 
```

对于第二个问题，+ 表示 eResults 是 ClassA 的[嵌套类](http://msdn.microsoft.com/en-us/library/x23h0937%28v=vs.110%29.aspx)。您不能直接实例化，但有一种基于此处描述的反射的解决方法：[使用嵌套类](http://www.mathworks.fr/fr/help/matlab/matlab_external/getting-started-with-net.html#bsxjary-1)：

```
a = NET.addAssembly('c:\myClasses.dll');
t = a.AssemblyHandle.GetType('MyLib.ClassA+eResults');
var = System.Activator.CreateInstance(t); 
```

# python - multiprocessing.Pool 在 Linux/Python2.7 上的 terminate() 之后产生新的子节点？

> ID：14579474
> 
> 赞同：3
> 
> 时间：2013-01-29T09:24:18.127
> 
> 标签：python, linux, multiprocessing, subprocess

我有一个可执行文件，我需要经常使用不同的参数运行它。为此，我使用 multiprocessing 模块编写了一个小型 Python (2.7) 包装器，遵循[此处](https://stackoverflow.com/a/2561809/152439.)给出的模式。

我的代码如下所示：

```
try:
     logging.info("starting pool runs")
     pool.map(run_nlin, params)
     pool.close()
 except KeyboardInterrupt:
     logging.info("^C pressed")
     pool.terminate()
 except Exception, e:
     logging.info("exception caught: ", e)
     pool.terminate()
 finally:
     time.sleep(5)
     pool.join()
     logging.info("done") 
```

我的工作函数在这里：

```
class KeyboardInterruptError(Exception): pass

def run_nlin((path_config, path_log, path_nlin, update_method)):
    try:
        with open(path_log, "w") as log_:
            cmdline = [path_nlin, path_config]
            if update_method:
                cmdline += [update_method, ]
            sp.call(cmdline, stdout=log_, stderr=log_)
    except KeyboardInterrupt:
        time.sleep(5)
        raise KeyboardInterruptError()
    except:
        raise 
```

`path_config`是二进制程序配置文件的路径；其中有例如运行程序的日期。

当我启动包装器时，一切看起来都很好。但是，当我按下 时`^C`，包装脚本似乎`numproc`在终止之前从池中启动了一个额外的进程。例如，当我在第 1-10 天启动脚本时，我可以在`ps aux`输出中看到二进制程序的两个实例正在运行（通常是第 1 天和第 3 天）。现在，当我按下 时`^C`，包装脚本退出，第 1 天和第 3 天的二进制程序消失了，但是第 5 天和第 7 天运行了新的二进制程序。

所以对我来说，似乎在最终死亡之前`Pool`启动了另一个进程。`numproc`

任何想法这里发生了什么，我能做些什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T13:11:33.780

在[这个页面上](http://jessenoller.com/2009/01/08/multiprocessingpool-and-keyboardinterrupt/)，多处理模块的作者 Jesse Noller 表明正确的处理方法`KeyboardInterrupt`是让子进程返回——而不是重新引发异常。这允许主进程终止池。

但是，如下面的代码所示，直到所有由 生成的任务都已运行*后*`except KeyboardInterrupt`，主进程才会到达该块。这就是为什么（我相信）在按下之后，您会看到对工作函数的额外调用。*`pool.map``run_nlin``Ctrl-C`*

 *一种可能的解决方法是让所有工作函数测试是否`multiprocessing.Event`已设置 a。如果事件已设置，则让工作人员提前退出，否则，继续进行长时间计算。

* * *

```
import logging
import multiprocessing as mp
import time

logger = mp.log_to_stderr(logging.WARNING)

def worker(x):
    try:
        if not terminating.is_set():
            logger.warn("Running worker({x!r})".format(x = x))
            time.sleep(3)
        else:
            logger.warn("got the message... we're terminating!")
    except KeyboardInterrupt:
        logger.warn("terminating is set")        
        terminating.set()
    return x

def initializer(terminating_):
    # This places terminating in the global namespace of the worker subprocesses.
    # This allows the worker function to access `terminating` even though it is
    # not passed as an argument to the function.
    global terminating
    terminating = terminating_

def main():
    terminating = mp.Event()    
    result = []
    pool = mp.Pool(initializer=initializer, initargs=(terminating, ))
    params = range(12)
    try:
         logger.warn("starting pool runs")
         result = pool.map(worker, params)
         pool.close()
    except KeyboardInterrupt:
        logger.warn("^C pressed")
        pool.terminate()
    finally:
        pool.join()
        logger.warn('done: {r}'.format(r = result))

if __name__ == '__main__':
    main() 
```

* * *

运行脚本产生：

```
% test.py
[WARNING/MainProcess] starting pool runs
[WARNING/PoolWorker-1] Running worker(0)
[WARNING/PoolWorker-2] Running worker(1)
[WARNING/PoolWorker-3] Running worker(2)
[WARNING/PoolWorker-4] Running worker(3) 
```

这里 Ctrl-C 被按下；每个工人设置`terminating`事件。我们真的只需要一个来设置它，但是尽管效率很低，但这仍然有效。

```
 C-c C-c[WARNING/PoolWorker-4] terminating is set
[WARNING/PoolWorker-2] terminating is set
[WARNING/PoolWorker-3] terminating is set
[WARNING/PoolWorker-1] terminating is set 
```

现在所有其他排队的任务`pool.map`都运行了：

```
[WARNING/PoolWorker-4] got the message... we're terminating!
[WARNING/PoolWorker-2] got the message... we're terminating!
[WARNING/PoolWorker-1] got the message... we're terminating!
[WARNING/PoolWorker-2] got the message... we're terminating!
[WARNING/PoolWorker-4] got the message... we're terminating!
[WARNING/PoolWorker-2] got the message... we're terminating!
[WARNING/PoolWorker-1] got the message... we're terminating!
[WARNING/PoolWorker-3] got the message... we're terminating! 
```

最后主进程到达`except KeyboardInterrupt`块。

```
[WARNING/MainProcess] ^C pressed
[WARNING/MainProcess] done: [] 
```*

# codeigniter - 如何使用ajax访问控制器内的codeigniter方法

> ID：14579476
> 
> 赞同：0
> 
> 时间：2013-01-29T09:24:22.097
> 
> 标签：codeigniter, jquery

我已经制作了一个 codeigniter 网站，现在我需要制作一个应用程序。我想使用 ajax 调用一些控制器方法。这是我的代码：

```
$(document).on('pagebeforeshow','#page2',
function(){
            $('#submit').click(function() 
            {
                var name = $("#username").val();
                var surname = $("#usersurname").val();

                alert(name + " " + surname);

                $.post(
                    "http://localhost:8080/bookbay/index.php/Home/test", 
                    {'name':name,'surname':surname},
                    function(data)
                    {
                        alert(data.name + " " + data.surname);
                    },
                    "json");
            });         
          }); 
```

ajax 一直有效，直到发布。然后只是将我送回默认应用程序页面，并没有从控制器给我任何东西。我不确定为什么会这样。

下面是测试功能的代码：

```
 class Home extends CI_Controller
{
        function test()
        {
            $name = $this->input->post('name');
            $surname = $this->input->post('surname');
            $array = array('name' => "*".$name."*", 'surname'=> "?".$surname."?");
            echo json_encode($array);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:43:28.907

用这个改变你的帖子

```
$.post( 
    "<?php echo site_url('home/test')?>", 
    {'name':name,'surname':surname},
    function(data){alert(data.name + " " + data.surname);},
    "json"
); 
```

# namespaces - TCL 包和命名空间

> ID：14579477
> 
> 赞同：0
> 
> 时间：2013-01-29T09:24:30.477
> 
> 标签：namespaces, tcl, packages

我想使用 .tcl 文件中的过程，该文件作为包和命名空间“可用”。

我无法区分黑白“包要求”和“命名空间导入”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:37:20.313

它们是完全不同的概念。

**命名空间**是用于包含命令和变量的代码结构。和其他命名空间。（还有一些其他的东西，但这些是主要的。）

**包**是提供已定义的版本化 API 的文件集合。`source`它是对单个文件的抽象`load`，通常应该被认为只是包实现的一部分。

将包定义的所有命令和变量保存在同名的命名空间中，或者让包定义一个与包同名的命令，通常是一种*很好的做法。*这减少了混乱的数量！然而，这只是进化的良好实践，并且有许多包不能以这种方式工作，通常是因为它们最初确实早于整个包机制；当然，通过一些最佳实践将所有内容更改为超正确的不如保持与现有代码的兼容性好。

使用命名空间来组织代码的实现。使用包将代码拆分为具有可独立发展的已定义任务的片段。这些是完全正交的。

# jquery - 如何使用 jquery ajax 调用传递 Web 服务的凭据？

> ID：14579478
> 
> 赞同：19
> 
> 时间：2013-01-29T09:24:37.657
> 
> 标签：jquery, ajax, web-services, web

我正在使用这样的 jquery ajax 调用：

```
$.ajax({
         url: WEBSERVICE_URL,
            type: "GET",
            dataType: "application/json; charset=utf-8",                   
            username: "admin",  // Most SAP web services require credentials
            password: "admin",
            processData: false,
            contentType: "application/json",
            success: function() {
               alert("success");
            },
            error: function() {
                   alert("ERROR");
                },
    }); 
```

呼叫仍然不会转到 Web 服务。每次我收到错误警报。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-07-25T01:07:16.923

如果您正在执行跨域请求：

```
$.ajax({
    url: "yoururl",
    type: "GET",
    dataType: 'json',
    xhrFields: {
         withCredentials: true
    }
}); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-29T09:29:20.353

尝试使用 post 作为方法类型，大多数 web 服务都是安全的，需要使用 post 而不是 Get 传输

加上帮助您调试错误和对错误的响应文本。

```
 $.ajax({
     url: WEBSERVICE_URL,
     type: "POST", //This is what you should chage
     dataType: "application/json; charset=utf-8",
     username: "admin", // Most SAP web services require credentials
     password: "admin",
     processData: false,
     contentType: "application/json",
     success: function () {
         alert("success");
     },
     error: function (xhr, ajaxOptions, thrownError) { //Add these parameters to display the required response
         alert(xhr.status);
         alert(xhr.responseText);
     },
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-04T16:37:44.317

我的2美分。

我在这个问题上浪费了大量时间，但我通过将请求的方法从 GET 更改为 POST 来解决它。

奇怪的是，这两种方法类型（GET/POST）在通过调用时都可以工作，`Postman`但是当我将其更改为 POST 方法时，它才设法访问我的 Web API 端点。

请注意，在我的情况下，我只是在使用 Windows 身份验证时传递了 grant_type，所以我在发布时没有传递用户名或密码。

# javascript - 从嵌入在同一页面中的另一个 iframe 更改 iframe 的源的问题

> ID：14579480
> 
> 赞同：0
> 
> 时间：2013-01-29T09:24:43.623
> 
> 标签：javascript, html, iframe, src

我有两个 iFrame 嵌入到一个父页面中。一个是导航栏，另一个是内容框架。

我需要使用导航框架内的按钮更改内容框架的来源，但是我发现目前这很难实现，我不知道为什么。

这是父页面的正文源：

```
<body>

<script type="text/javascript">

var links = [
'secondary.html',
'default.html'
];
var one, two;
window.onload=function() {
  one = document.getElementById('content');
  two = document.getElementById('content');
} 

function onenav(idx) {
    one.src=links[idx];
}

function twonav(idx) {
two.src=links[idx];
}

</script>
<iframe src='sidebar.html' name='sidebar' scrolling="yes" height="600" width="250"     seamless="seamless" frameborder="1" align="left">
</iframe>

<iframe src='default.html' name='content' scrolling="yes" height="600" width="800" seamless="seamless" frameborder="1" align="left"></iframe>

</body> 
```

这是侧边栏页面的来源：

```
<button onclick="parent.onenav(0)">Secondary</button>
<button onclick="parent.twonav(1)">Default</button> 
```

内容框架没有相关的 html 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:32:16.653

您错过了 iframe 的 id 属性。利用

```
<iframe src='default.html' id="content" name='content' scrolling="yes" height="600" width="800" seamless="seamless" frameborder="1" align="left"></iframe> 
```

它有效。

# c# - WPF TreeView ItemTemplate 未应用于 TreeViewItem

> ID：14579481
> 
> 赞同：1
> 
> 时间：2013-01-29T09:24:44.060
> 
> 标签：c#, wpf, xaml, treeview, itemtemplate

我有一个`TreeView`并手动添加两个项目（`TreeViewItem`）。我想应用于`ItemTemplate`这两个项目，但似乎`ItemTemplate`不适用于它们。实际上我在树中有更深的层次（所以 item1 和 item2 每个都有一个集合 as `ItemsSource`，并且它们还有更多`HierarchicalDataTemplates`）。但是为了演示第一个模板没有应用于第一级项目，我简化了这个例子。下面是后面的代码。

```
 TreeViewItem item1 = new TreeViewItem();
        TreeViewItem item2 = new TreeViewItem();
        trvRecordList.Items.Add(item1);
        trvRecordList.Items.Add(item2); 
```

这是我的 xaml 代码。`HierarchicalDataTemplate`写在正确的地方。

```
 <HierarchicalDataTemplate x:Key="My_Template">                                                      
                            <StackPanel Orientation="Horizontal">
                                <Image Source="Images/Star_Blue.png"
                                       Margin="0,0,4,0" Height="16" Width="16"/>
                                <TextBox Text="abcd"/>
                            </StackPanel>
                        </HierarchicalDataTemplate>

                      <TreeView Name="trvRecordList" Margin="2"
                              ItemTemplate="{StaticResource My_Template}">                           
                     </TreeView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:15:10.377

由于您正在向 中添加`TreeViewItem`对象列表`TreeView`，因此 My_Template 将不会应用于它。如果您检查输出窗口，您将收到如下所示的错误

```
System.Windows.Data Error: 26 : ItemTemplate and ItemTemplateSelector are ignored for items already of the ItemsControl's container type; Type='TreeViewItem' 
```

解决方案是将 My_Template 应用于自身的`ItemTemplate`属性`TreeViewItem`。以下是我对您的代码所做的修改

```
 TreeViewItem item1 = new TreeViewItem();
        TreeViewItem item2 = new TreeViewItem();
        item1.Items.Add("");
        item1.Items.Add("");
        item1.ItemTemplate = FindResource("My_Template") as HierarchicalDataTemplate;

        item2.Items.Add("");
        item2.Items.Add("");
        item2.ItemTemplate = FindResource("My_Template") as HierarchicalDataTemplate;

        trvRecordList.Items.Add(item1);
        trvRecordList.Items.Add(item2); 
```

通过以下链接了解有关 HierarchicalDataTemplate 的更多信息

[http://blogs.msdn.com/b/mikehillberg/archive/2009/10/30/treeview-and-hierarchicaldatatemplate-step-by-step.aspx](http://blogs.msdn.com/b/mikehillberg/archive/2009/10/30/treeview-and-hierarchicaldatatemplate-step-by-step.aspx)

编辑：

如果您想将 My_Template 应用于`TreeView`然后尝试此代码。

```
 trvRecordList.Items.Add("");
        trvRecordList.Items.Add(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:39:57.183

`ItemTemplate`用于数据对象。检查[MSDN 上 ItemTemplate](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplate.aspx)的备注。

`TreeViewItem`是为每个数据项生成的容器，并通过`ItemContainerTemplate`. [MSDN 上的 ItemContainerTemplate](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainerstyle.aspx)

# inno-setup - 如何在编译设置时创建多个 zip 存档

> ID：14579484
> 
> 赞同：1
> 
> 时间：2013-01-29T09:25:03.583
> 
> 标签：inno-setup, zipfile

我有一个 Inno-Setup，它在内部只是启动另一个设置。（我想用 InnoSetup 完全重建它，但还没有时间这样做。）

要运行此内部设置，我需要提供一些 zip 文件。目前我手动创建这些 zip 文件并将它们复制到我的 InnoSetup-Folder 中。我的想法是，让 InnoSetup 编译过程创建这些 zip 文件。所需文件位于不同（但固定）的文件夹中。

有没有办法这样做？

**这是一个更直观的示例：**

*   C:\dir1\File1
*   C:\dir2\文件2
*   C:\dir3\File3
*   C:\dir4\File4
*   C:\dir5\File5
*   C:\dir6\File6

*   Zip1 包含 File1 和 File2
*   Zip2 包含 File3 和 File4
*   Zip3 包含 File5 和 File6

**当前流程**

*   Zip1 - 3 是手动构建的
*   所有三个 zip 文件将被编译成一个完整的 InnoSetup .exe 文件
*   运行安装时，压缩文件将被复制到临时文件夹
*   外部设置工具将对临时文件夹中的这些 zip 文件起作用。

**期望的过程**

*   Zip1 - 3 由 InnoSetup 自动构建
*   rest 与当前进程相同

感谢您的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:37:31.243

***如何使用 TUGZip 将文件添加到存档中？***

您正在使用非常奇特但脚本友好的存档器。简而言之，您可以为存档器的`TzScript.exe`命令行工具制作一个脚本文件，如下所示。为`Archive`属性分配存档的目标名称，使用正确的`WorkingDir`和`Data`要添加到存档的放置文件。我已经硬编码了存档名称，但即使是这个脚本文件也可以由 InnoSetup 预处理器制作（但这超出了这个问题的范围）：

```
function main()
{
     var Comp = new Compress();

     Comp.Archive = "d:\\DeployFolder\\Archives\\Archive1.zip";
     Comp.Type = "ZIP";
     Comp.Compression = 3;
     Comp.WorkingDir = "d:\\ArchiveFolder\\";
     Comp.Data = "File1.txt,File2.txt";
     Comp.Password = "";
     Comp.DateExtension = 0;
     Comp.TimeExtension = 0;
     Comp.Overwrite = 1;
     Comp.Recurse = 0;
     Comp.StoreFolderNames = 1;
     Comp.IncludeHiddenFiles = 1;

     Comp.DoCompress();
} 
```

***如何在 InnoSetup 脚本编译之前执行 TUGZip 命令行归档程序？***

比将其放入 InnoSetup 脚本更容易的是制作一个批处理文件，这将使用存档器完成所有工作，并且在完成复制到部署文件夹中的全新存档后，它将启动 InnoSetup 编译或仅打开 InnoSetup脚本文件。

如果你想在你的 InnoSetup 脚本中有这个，你需要使用预处理器的[`Exec`](http://jrsoftware.org/ispphelp/topic_exec.htm)函数。由于它是一个预处理器函数，它在 InnoSetup 脚本编译开始之前执行，因此它是您可以执行此类操作的理想场所。

# android - 自动更新应用程序而不替换应用程序警告

> ID：14579485
> 
> 赞同：0
> 
> 时间：2013-01-29T09:25:04.023
> 
> 标签：android, auto-update

我有一个需要在新版本可用时自动更新的 android 应用程序。我参考了以下链接来更新应用程序：

[更新程序](https://github.com/RaghavSood/AppaholicsUpdateChecker)

但随后它会在更新之前询问我是否要替换应用程序。我不希望该警告我希望该应用程序应自动更新而无需征求许可。我能为此做些什么？请帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:33:10.493

我认为这是不可能的。否则这将是一个安全漏洞，因为您可以强制用户安装未知应用程序（带有恶意软件代码）。您所能做的就是要求您的用户更新（并确认对话框）或关闭应用程序（如果他们不这样做）。

# wpf - WPF 强制特定视觉仅在软件模式下呈现

> ID：14579487
> 
> 赞同：0
> 
> 时间：2013-01-29T09:25:09.850
> 
> 标签：wpf

我正在使用 WPF，想知道是否有任何方法可以强制仅在软件模式下呈现特定的视觉效果。

例如，网格内很少有 Rectangle：

```
Rectangle rect1 = new Rectangle() { Width = ........};
Rectangle rect2 = new Rectangle() .........
......... rect3 .....
     .... rect4 ...... 
```

我希望 rect1 以软件模式呈现，而其他矩形（rect2、3、4）以硬件加速呈现。

有可能这样做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:56:11.290

您可以在窗口或应用程序级别强制软件呈现，但不能针对同一容器中的特定元素。当您考虑如何通过 WPF 布局系统将元素组合在一起并从该组合状态呈现时，这是有道理的。想想如果它们重叠、部分透明等会发生什么。混合模式需要使用单独的 Hwnd 跳出布局系统，然后在操作系统级别管理渲染。

作为参考，可以使用以下方式设置应用程序级软件渲染：

```
RenderOptions.ProcessRenderMode = RenderMode.SoftwareOnly; 
```

各个窗口（Hwnds）可以设置：

```
HwndSource source = PresentationSource.FromVisual(myVisual) as HwndSource;
HwndTarget target = source.CompositionTarget;
target.RenderMode = RenderMode.SoftwareOnly; 
```

# basic - BASIC代码的理解

> ID：14579494
> 
> 赞同：1
> 
> 时间：2013-01-29T09:25:33.837
> 
> 标签：basic

我需要阅读一些基本代码。我从来没有使用过 BASIC 并请你帮助我。有这样的代码

```
filedialog "Open","*.txt",file$
 if file$="" then end
open file$  for input as #f
'open "g:\data\funcfirstques.txt" for input as #f

while not(eof(#f))
  line input #f, a$
  i=i+1
wend
close #f
nrows=i

open "g:\data\junk.txt" for output as #1
print#1, a$
close #1

open "g:\data\junk.txt" for input as #1
while not(eof(#1))
input #1, b$
k=k+1
wend
close #1 
```

据我了解，这里是打开文件**file$**，然后在第一个循环中，计算该文件中的行并将它们添加到数组**a$**中。然后打开文件**junk.txt**并将数组**a$**写入该文件。但是第二个循环在做什么？**k**是什么？

输入是通常的 .csv 文件。

谢谢。

PS对不起我糟糕的英语:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:31:05.690

它正在**读取**文件

正如你所知道的

```
open "g:\data\junk.txt" for output as #1
print#1, a$
close #1 
```

喜欢打开输出和打印#

同样这个...

```
open "g:\data\junk.txt" for input as #1
while not(eof(#1))
input #1, b$
k=k+1
wend 
```

正在逐字节读取文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-08T04:37:18.170

更正了读取文件的代码：

```
filedialog "Open","*.txt",file$
IF file$ = "" THEN END
OPEN file$ FOR INPUT AS #1
'OPEN "g:\data\funcfirstques.txt" FOR INPUT AS #1
OPEN "g:\data\junk.txt" FOR OUTPUT AS #2
WHILE NOT EOF(1)
    LINE INPUT #1, a$
    PRINT #2, a$
    i = i + 1
WEND
nrows = i
CLOSE #1, #2
OPEN "g:\data\junk.txt" FOR INPUT AS #1
WHILE NOT EOF(1)
    INPUT #1, b$
    k = k + 1
WEND
CLOSE #1
PRINT "File has"; k; " lines."
END 
```

# css - 居中嵌套 div 和表头设计

> ID：14579495
> 
> 赞同：1
> 
> 时间：2013-01-29T09:25:37.050
> 
> 标签：css

我是 CSS 的新手，谁能帮我将 3 级 div 居中？问题是宽度未知，因为我使用的是 %. 我已经尝试过`margin: auto;`，但没有奏效。

而且我还面临着表格页眉和页脚的另一个问题。`<hr>`我已经尝试在其中放置一条带有代码的水平线`<thead>`，`<tbody>`但它们并没有像我希望的那样出现。我已经迷路了，请帮助我。

[点击这里查看我当前在 jsbin 上的代码](http://jsbin.com/ebozar/1)

```
<div style="overflow: auto; height: 100%;padding:1% 0% 0% 0.5%;margin:0 auto;border-bottom-left-radius:5px;border-bottom-right-radius:5px;background: #E0E0E0 !important;border: 1px solid #808080;">
<div style="width:45%;margin: 0 1.5%;float:left;">
    <div style="width: 100%;text-align: right !important;white-space: nowrap;">
        <b>Select</b> &nbsp;
        <select name="department" id="department" class="required" style="margin-top:0.4%; margin-right: -4px; width: 70%;">
            <option class="options" value="">Please select</option>
                <option class="options" value="1">Option 1</option>
                <option class="options" value="2">Option 2</option>
                <option class="options" value="3">Option 3</option>
                <option class="options" value="4">Option 4</option>
                <option class="options" value="5">Option 5</option>
        </select>
    </div>
    <div style="margin-top: 10px !important;margin-bottom: -100px !important;height: 220px;width: 100%;background: #BFBABA !important;border-radius: 5px;border: 4px solid #BFBABA" >
        <div class="taskhead" style="margin-bottom: -90px !important;padding: 5px;background-color: #ccffff;height: 200px;margin: auto;border-radius: 5px;border: 1px solid #808080;">
            <div style="margin: 0px auto!important;padding: 5px;height: 180px; background: #ffffff !important;border: 1px solid #808080;border-radius: 5px;">
                <b>Name:</b>
                <div id="er_users" style="width: 100%;overflow: scroll; overflow-x: hidden; height: 160px; background: #ffffff !important;">
                    <table id="uid" style="width: 100%;margin-left: 5px; float: right;">
                        <thead style="background-color: #e0e0e0"><hr></thead>
                        <tbody>
                            <tr class="odd">
                                <td>Name 1</td>
                            </tr>
                            <tr class="even">
                                <td>Name 1</td>
                            </tr>
                            <tr class="odd">
                                <td>Name 2</td>
                            </tr>
                            <tr class="even">
                                <td>Name 2</td>
                            </tr>
                        </tbody>
                        <tfoot style="background-color: #e0e0e0"><hr></tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div style="margin: 0 1.5%; background-color: #D6D2D2 !important;width:0.2%;height: 265px !important;float:left;">&nbsp;<br/></div>
<div style="width:45%;margin: 0 1%;float:left;">
    <div style="margin-top: 1%"></div>
    <b>User</b>

    <div style="margin-top: 10px !important;margin-bottom: -100px !important;height: 220px;width: 100%;background: #BFBABA !important;border-radius: 5px;border: 4px solid #BFBABA;" >
        <div style="margin-bottom: -100px !important;padding: 5px;background-color: #e6f0a3;height: 200px;border-radius: 5px;border: 1px solid #808080;">
            <div style="margin: 0px auto!important;padding: 5px;height: 180px; background: #ffffff !important;border: 1px solid #808080;border-radius: 5px;">
                <b>Name:</b>
                <div style="width: 100%; overflow: scroll; overflow-x: hidden; height: 160px; background: #ffffff !important;">
                    <table id="uid" style="width: 100%;margin-left: 5px; float: right;">
                        <thead style="background-color: #e0e0e0"><hr></thead>
                        <tbody>
                            <tr class="odd">
                                <td>Name 1</td>
                            </tr>
                            <tr class="even">
                                <td>Name 1</td>
                            </tr>
                            <tr class="odd">
                                <td>Name 2</td>
                            </tr>
                            <tr class="even">
                                <td>Name 2</td>
                            </tr>
                        </tbody>
                        <tfoot style="background-color: #e0e0e0"><hr></tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div> 
```

这是我的桌子应该看起来的样子

[点击这里查看图片](http://oi50.tinypic.com/k9as6s.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:28:52.677

如果您在**用户**`margin-top`下方增加表格垂直对齐。**`15px`**

 **对于水平规则，`tfoot`在之前向上移动`tbody`，并`hr`用`tr td`

```
<thead><tr><td><hr/></td></tr></thead>
<tfoot><tr><td><hr/></td></tr></tfoot> 
```

要将 扩展`table`至封闭`div`，请添加

```
height: 100%; 
```

到`table`.

修改后[的 JSBin](http://jsbin.com/ebozar/10)**

# java - 修改 ZipFile 类以将编码文件作为 zip 文件使用

> ID：14579499
> 
> 赞同：0
> 
> 时间：2013-01-29T09:25:49.933
> 
> 标签：java, class, jar, zipfile

这个想法是加密一个 jar 文件，实际上是对其进行编码，以使其无法使用 zip 实用软件（例如：winzip、winrar 或...）打开。

为了对 jar 文件进行编码，我只是为了测试目的而增加了 jar 文件的每个字节。然后我想将编码的 jar 文件作为 ZipFile 读取，以便像真正的 jar 文件一样处理它的数据。

现在的问题是，当我初始化一个 ZipFile 时，它​​需要一个文件的引用，ZipFile 类总是认为该文件是一个 Zip 文件；但实际上并非如此。

我想更改 ZipFile 的 read(...) 方法或任何其他处理输入流的方法，以便在从流中读取数据时执行解码。

如果有任何机构可以帮助解决此问题或有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:29:33.927

您可以使用 , 的流`ZipFile`版本`ZipInpuStream`。它不关心您提供的流是否被修改。

# codeigniter - 如何在codeigniter中选择表？

> ID：14579511
> 
> 赞同：0
> 
> 时间：2013-01-29T09:26:25.213
> 
> 标签：codeigniter

```
for($i=0; $i < count($cameras_info); $i++){
    $this->db->select('Image');
    $this->db->from('cameras');
    $this->db->where('id', $cameras_info[$i]->camera_id);
    $cameras_info[$i]->Image = isset($this->db->get()->row()->Image) ? $this->db->get()->row()->Image : NULL;
} 
```

当我尝试执行此代码时，我收到此错误：

> 错误号：1096 未
> 使用表
> SELECT *
> 行号：167

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:36:45.937

问题似乎在这一行：

```
$cameras_info[$i]->Image = isset($this->db->get()->row()->Image) ? $this->db->get()->row()->Image : NULL; 
```

`$this->db->get()`执行查询并重置在活动记录类中传递的值，因此当它在问号后调用时，它不会获得任何值并引发错误。因此，将这一行替换为以下内容：

```
$result = $this->db->get()->row()->Image;
$cameras_info[$i]->Image = isset($result->row()->Image) ? $result->row()->Image : NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:40:53.013

***假设你的代码是正确的***

我尝试按照我认为适合您的代码的方式对其进行重组

```
for($i=0; $i < count($cameras_info); $i++){
    $this->db->select('Image');
    $this->db->from('cameras');
    $this->db->where('id', $cameras_info[$i]->camera_id);
    $query = $this->db->get();
    $cameras_info[$i]->Image = isset($query->row()->Image) ? $query->row()->Image : NULL;
} 
```

# c# - 从 Stream 中读取 excel 文件的内容

> ID：14579514
> 
> 赞同：0
> 
> 时间：2013-01-29T09:26:28.997
> 
> 标签：c#, sharepoint-2010

我有一个从 excel 文件创建的文件流。我需要阅读此流的内容并从中获取 excel 表。有什么想法我该怎么做？

注意：我必须在不使用任何第三方库的情况下执行此操作

```
WebRequest request = WebRequest.Create(new Uri("http://servername:1056/ExcelFiles/Myfile.xlsx", UriKind.Absolute));
request.UseDefaultCredentials = true;
WebResponse response = request.GetResponse();
Stream fs = response.GetResponseStream() as Stream; 
```

这里我需要读取 fs 的内容，而不必将文件保存到本地系统/磁盘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:00:04.613

您可以使用 SpreadSheetDocument 从具有静态方法的流中读取数据

```
var doc = SpreadSheetDocument.Open(docName, true); 
```

有关此链接的更多信息[http://msdn.microsoft.com/en-us/library/ff478410](http://msdn.microsoft.com/en-us/library/ff478410)

像记忆流一样阅读

```
WebClient wc = new WebClient();

byte[] fileArray = wc.DownloadData("url is inserted here");

MemoryStream ms = new MemoryStream(fileArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:36:32.620

尝试这样的事情

```
WebClient webClient= new WebClient();
Stream stream = webClient.OpenRead("http://servername:1056/ExcelFiles/Myfile.xlsx");
  //StreamReader streamReader = new StreamReader(stream);
  //String content = streamReader.ReadToEnd();
// Read the Document using SpreadSheetDocument Method 
var ssDoc = SpreadSheetDocument.Open(stream, false); 
```

[SpreadsheetDocument.Open 方法（流，布尔值）](http://msdn.microsoft.com/en-us/library/cc562185)

# git - 带有 SVN 主干和分支的 Git

> ID：14579518
> 
> 赞同：2
> 
> 时间：2013-01-29T09:26:37.143
> 
> 标签：git, svn, merge, branch, git-svn

因为我一直在使用 Git，所以我喜欢这样一个事实，即您可以创建一个本地分支，您可以将其压缩到您的主分支并 DCommit 到 SVN（在主干上），然后删除该本地分支（在 Git 上）。

现在我想了解如何处理 SVN 分支。我需要与团队合作开发一项新功能，但我们不想在 Trunk 上这样做。所以显然我们需要从主干分支并在该分支上工作，直到我们对工作感到满意并合并回主干。

从 Git 前端的角度来看如何做到这一点有什么想法吗？我敢肯定那里有很多资源，但我还没有找到可以向我解释的东西。

所以只是为了确保我解释自己，我知道如何单独使用 Git 和 SVN 主干。这很容易也很好。但是我需要从主干分支到 SVN 并使用 Git 在该分支上工作（同时希望仍然可以使用 Git 访问 SVN 主干）直到工作完成，然后将该分支合并回 SVN 上的主干（再次使用 Git）。如果有人可以让我对此有所了解，我将不胜感激！是否可以在单个 Git 存储库中拥有它？

提前致谢。（如果仍然不清楚，请告诉我）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:09:57.993

几个月前我写了一篇关于这个话题的博客：[http ://www.jillesvangurp.com/2012/08/04/git-presentation/](http://www.jillesvangurp.com/2012/08/04/git-presentation/)

简而言之，您可以在单个 git 存储库中跟踪多个 svn 分支，但您确实不应该这样做。有一次搞砸了，我基本上再也不会尝试在一个存储库中跟踪多个 svn 分支了。它太易变了，太容易在svn中造成重大损害。基本上，本地一切似乎都很好，我提交了我的更改。但实际上我重新排序了一些确实不应该重新排序的提交，并且在上游造成了很多损害。最后我不得不做一个大的 svn 还原。很尴尬。

因此，改为使用单独的 git 存储库来跟踪每个 svn 分支，并将这些存储库用作仅 git 存储库上的远程存储库，在该存储库中，您实际工作时将其推送到不同的远程存储库。像这样隔离 git 和 svn 很有意义。确保保持你的历史线性（svn 不做非线性），并确保始终针对上游进行 rebase。

在这种情况下，在分支/存储库之间移动提交（在 git 世界中也是如此）的一种更安全的方法是使用 git format-patch 和 git am。或者，您可以在存储库中使用 git cherry-pick。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T11:41:24.993

我终于发现了使用 Git 处理 SVN 分支需要做什么。我已经尝试过下面提到的东西（除了我指定的地方），所以我相当有信心，只要我不做任何有趣或不合时宜的事情，我从 Git 到 SVN 的提交应该可以正常工作。**但当然我对可能发生的任何问题不承担任何责任！我愿意接受进一步的评论/评论。**

即使我不使用标准布局克隆 SVN 存储库，我也应该配置指向 subversion 上相关 SVN 路径的遥控器。

克隆一个 SVN 分支（SVN 路径应该指向包含主干、分支和标签的根路径）：

```
git svn clone -s http://myrepo.com c:/my/local/path 
```

如果您已经有一个 SVN 分支的克隆，您需要手动将遥控器添加到其他 SVN 分支，请查看以下内容：

*   [使用 git svn 签出远程分支](https://stackoverflow.com/questions/3239759/checkout-remote-branch-using-git-svn)
*   [我如何告诉 git-svn 获取 repo 后创建的远程分支？](https://stackoverflow.com/questions/296975/how-do-i-tell-git-svn-about-a-remote-branch-created-after-i-fetched-the-repo)

重要的是您有一个跟踪远程分支的本地分支。

```
git checkout -b localbranch remotes/remote_branch 
```

现在您可以提交该本地分支，并且每次完成后都可以像在主干中一样执行此操作：

```
git svn fetch
git svn dcommit 
```

当您最终完成该 SVN 分支并希望合并到主干时，您可以执行以下操作（它从该分支获取所有内容并将其重新设置为 master）：

```
git checkout master
git merge localbranch
git rebase -i trunk  (just save the message)
git svn fetch
git svn dcommit 
```

如果你愿意，你也可以只做一个壁球合并（如果你不想把所有这些小签到都带过来）：

```
git merge --squash localbranch
git svn fetch
git svn dcommit 
```

在执行真正的 DCOMMIT 之前，您可能会进行试运行以确保一切正常（包括目的地）。

```
git svn dcommit -dry-run 
```

但是，如果您预计合并冲突（这是我在网上看到的，但我没有尝试过，我只是提到），请在`git checkout master`上面显示的行之前执行以下操作。这是一个本地分支，它不跟踪应该用于解决合并冲突和东西的远程分支。这是否有必要是另一回事。

```
git checkout -b merge_work master
git merge localbranch
git checkout master
git rebase merge_work 
```

我为自己和其他可能想在未来尝试这个的人写下来。

# vba - 使用 VBA 执行操作

> ID：14579519
> 
> 赞同：-1
> 
> 时间：2013-01-29T09:26:39.737
> 
> 标签：vba, ms-word

我在 MS word 文件中有一段文本，如下所示：

```
[[ul]]
•   For the near term, all Cendoc content will be ingested into the NextBook_Cendoc_June2011 database. 
•   You must navigate to and open this database before you can ingest Cendoc XML. 
•   You can locate this database for the first time by selecting the DATABASE option from the blue navigation bar at the top of the screen. Select the “Browse all database/choose a database” option. Select the “NextBook_Cendoc_June2011” link from the menu. 
[[/ul]] 
```

我需要使用 VBA 的输出如下

```
<list identifier="" list-style="Unordered">
<item identifier=""""><para identifier="">For the near term, all Cendoc content will be ingested into the NextBook_Cendoc_June2011 database.</para></item>
<item identifier=""""><para identifier="">You must navigate to and open this database before you can ingest Cendoc XML.</para></item>
<item identifier=""""><para identifier="">You can locate this database for the first time by selecting the DATABASE option from the blue navigation bar at the top of the screen. Select the “Browse all database/choose a database” option. Select the “NextBook_Cendoc_June2011” link from the menu.</para></item>
</list> 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:56:37.707

Well, I did what I suggested and recorded a search and replace macro for you, and this is what I came up with.

```
Option Explicit

Sub SearchAndReplace()

    Selection.HomeKey Unit:=wdStory

    With Selection.Find
        .Text = "[[ul]]"
        .Replacement.Text = "<list identifier="""" list-style=""Unordered"">"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute Replace:=wdReplaceAll

    With Selection.Find
        .Text = "•   "
        .Replacement.Text = _
            "<item identifier=""""""""><para identifier="""">"
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute Replace:=wdReplaceAll

    With Selection.Find
        .Text = "[[/ul]]"
        .Replacement.Text = "</list>"
        .Forward = True
        .Wrap = wdFindAsk
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute Replace:=wdReplaceAll

End Sub 
```

# visual-studio-2010 - 如何从使用 Visual Studio 生成的静态库中删除文件路径字符串？

> ID：14579521
> 
> 赞同：1
> 
> 时间：2013-01-29T09:26:44.693
> 
> 标签：visual-studio-2010, static, strip

我使用 Visual Studio 2010 在发布模式下创建静态库。生成的 .lib 文件包含源文件的路径，以及一些静态常量的名称。如何删除所有这些不需要的字符串？

# android - 以编程方式清除画布绘制Android

> ID：14579528
> 
> 赞同：0
> 
> 时间：2013-01-29T09:27:11.577
> 
> 标签：android, bitmap, android-canvas, android-imageview

好吧，`canvas.draw()`我有多个帧要覆盖在同一个位图上的问题。我成功地做到了这一点。但问题是现在使用相同的方法但不同的边框应用另一个框架时，边框会覆盖旧的边框。

```
 void hm(){
    Bitmap border = BitmapFactory.decodeResource(getResources(), R.drawable.vignette2);
    int width = bmp.getWidth();
    int height = bmp.getHeight();
    change = Bitmap.createScaledBitmap(change, width, height, false);
    Canvas canvas = new Canvas(change);
    Bitmap scaledBorder = Bitmap.createScaledBitmap(border,width,height, false);
    canvas.drawBitmap(scaledBorder, 0, 0,null);
    //canvas.drawBitmap(k, 0, 0, null);
    view.setImageBitmap(change);
    } 
```

这是另一种方法：

```
 void hm1(){
    Bitmap border = BitmapFactory.decodeResource(getResources(), R.drawable.white);
    int width = bmp.getWidth();
    int height = bmp.getHeight();
    change = Bitmap.createScaledBitmap(change, width, height, false);
    Canvas canvas = new Canvas(change);
    Bitmap scaledBorder = Bitmap.createScaledBitmap(border,width,height, false);
    canvas.drawBitmap(scaledBorder, 0, 0,null);
    //canvas.drawBitmap(k, 0, 0, null);
    view.setImageBitmap(change);
    } 
```

现在，当我单击`button1`叠加层时，将应用于视图。当我单击它时，`button2`它也适用于视图，但它不会破坏旧边框（“叠加图像”）。我知道我应该使用不同的位图来处理 imageview 的每个视图。但我正在使用保存按钮，它将保存`Bitmap change`这意味着我想在此图像上应用边框并显示它。不覆盖旧边界。
例如，我正在使用`QuickAction`，这就是我尝试完成点击的方式。

```
 if (actionId == border0){
                hm();
                } 

             if (actionId == border1 ){
                 hm1();
                } 

              if (actionId == border2 ){
              } 
```

它有效，但正如我所说，它覆盖了旧的。任何帮助将不胜感激。提前致谢。明天解决它，我将发布答案:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:30:28.637

好吧，您使用以下行在旧位图的基础上创建一个新位图：

```
change = Bitmap.createScaledBitmap(change, width, height, false); 
```

因此，请确保您以某种方式将位图重置`change`为原始位图：

```
change = Bitmap.createScaledBitmap(originalBitmap, width, height, false); 
```

# gwt - gwt中的xstream jar

> ID：14579532
> 
> 赞同：-1
> 
> 时间：2013-01-29T09:27:41.450
> 
> 标签：gwt

**我下载了 xstream jar 和源代码，并使用winrar**将源代码附加到 jar 文件中

 **我创建了 2 个 gwt.xml 文件。

xstream.gwt.xml 存在于 com.thoughtworks 中

```
<?xml version="1.0" encoding="UTF-8"?> 
<module> 
<source path="xstream"/> 
</module> 
```

并且 operations.gwt.xml 存在于 com.thoughworks.xstream 中

```
<?xml version="1.0" encoding="UTF-8"?> 
<module> 
<source path="annotations"/> 
<source path="converters"/> 
<source path="core"/> 
<source path="io"/> 
<source path="mapper"/> 
<source path="persistence"/> 
</module> 
```

编辑：它是我的 gwt 项目 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='test'>
  <inherits name='com.google.gwt.user.User'/>
  <inherits name='com.google.gwt.user.theme.standard.Standard'/>
  <inherits name='com.thoughtworks.xstream'/>
  <entry-point class='com.example.test.client.Index'/>
</module> 
```

但我有一个错误

```
Compiling module com.example.test.Test
   Validating newly compiled units
      Ignored 142 units with compilation errors in first pass.
Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/XStream.java'
      [ERROR] Line 499:  The method forName(String, boolean, ClassLoader) is undefined for the type Class
      [ERROR] Line 500:  The method getConstructor(Class[]) is undefined for the type Class
      [ERROR] Line 764:  The method forName(String, boolean, ClassLoader) is undefined for the type Class
      [ERROR] Line 765:  The method getConstructor(Class[]) is undefined for the type Class
      [ERROR] Line 1062:  The method getPackage() is undefined for the type Class<capture#10-of ? extends XStream>
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/basic/NullConverter.java'
      [ERROR] Line 30:  The method isAssignableFrom(Class) is undefined for the type Class<Mapper.Null>
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/basic/StringConverter.java'
      [ERROR] Line 73:  The method synchronizedMap(WeakCache) is undefined for the type Collections
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/collections/AbstractCollectionConverter.java'
      [ERROR] Line 77:  The method newInstance() is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/collections/TreeMapConverter.java'
      [ERROR] Line 54:  The method getDeclaredFields() is undefined for the type Class<TreeMap>
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/collections/TreeSetConverter.java'
      [ERROR] Line 48:  The method getDeclaredFields() is undefined for the type Class<TreeSet>
      [ERROR] Line 50:  The method isAssignableFrom(Class<capture#1-of ?>) is undefined for the type Class<SortedMap>
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/extended/DynamicProxyConverter.java'
      [ERROR] Line 51:  The method getDeclaredField(String) is undefined for the type Class<Proxy>
      [ERROR] Line 60:  The method getClassLoader() is undefined for the type Class<DynamicProxyConverter>
      [ERROR] Line 85:  The method getInterfaces() is undefined for the type Class<capture#2-of ? extends Object>
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/extended/JavaClassConverter.java'
      [ERROR] Line 61:  The method getClassLoader() is undefined for the type Class<capture#1-of ?>
      [ERROR] Line 65:  The method forName(String, boolean, ClassLoader) is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/extended/JavaFieldConverter.java'
      [ERROR] Line 69:  The method getDeclaredField(String) is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/extended/JavaMethodConverter.java'
      [ERROR] Line 107:  The method getDeclaredMethod(String, Class[]) is undefined for the type Class
      [ERROR] Line 109:  The method getDeclaredConstructor(Class[]) is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/extended/LookAndFeelConverter.java'
      [ERROR] Line 44:  The method isAssignableFrom(Class) is undefined for the type Class<LookAndFeel>
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/reflection/AbstractReflectionConverter.java'
      [ERROR] Line 271:  The method isAssignableFrom(Class<capture#27-of ? extends Object>) is undefined for the type Class
      [ERROR] Line 326:  The method isAssignableFrom(Class<capture#32-of ? extends Object>) is undefined for the type Class
      [ERROR] Line 378:  The method isAssignableFrom(Class) is undefined for the type Class<Collection>
      [ERROR] Line 378:  The method isAssignableFrom(Class) is undefined for the type Class<Map>
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/reflection/AbstractAttributedCharacterIteratorAttributeConverter.java'
      [ERROR] Line 38:  The method getDeclaredMethod(String, Class[]) is undefined for the type Class<AttributedCharacterIterator.Attribute>
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/reflection/ExternalizableConverter.java'
      [ERROR] Line 58:  The method isAssignableFrom(Class) is undefined for the type Class<Externalizable>
      [ERROR] Line 104:  The method getDeclaredConstructor(Class[]) is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/reflection/SerializableConverter.java'
      [ERROR] Line 90:  The method isAssignableFrom(Class) is undefined for the type Class<Serializable>
      [ERROR] Line 214:  The method isAssignableFrom(Class) is undefined for the type Class<Serializable>
      [ERROR] Line 271:  The method getDeclaredField(String) is undefined for the type Class
      [ERROR] Line 462:  The method isAssignableFrom(Class) is undefined for the type Class<Serializable>
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/core/DefaultConverterLookup.java'
      [ERROR] Line 37:  The method synchronizedMap(WeakHashMap) is undefined for the type Collections
      [ERROR] Line 86:  The method synchronizedMap(HashMap) is undefined for the type Collections
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/core/JVM.java'
      [ERROR] Line 46:  The method getProperty(String) is undefined for the type System
      [ERROR] Line 94:  The method getProperty(String) is undefined for the type System
      [ERROR] Line 185:  The method getProperty(String) is undefined for the type System
      [ERROR] Line 199:  The method getProperty(String) is undefined for the type System
      [ERROR] Line 231:  The method getClassLoader() is undefined for the type Class<capture#1-of ? extends JVM>
      [ERROR] Line 251:  The method newInstance() is undefined for the type Class
      [ERROR] Line 342:  The method getDeclaredFields() is undefined for the type Class<AttributedString>
      [ERROR] Line 350:  The method getDeclaredFields() is undefined for the type Class<JVM>
      [ERROR] Line 361:  The method getProperty(String) is undefined for the type System
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/core/util/CompositeClassLoader.java'
      [ERROR] Line 57:  The method getClassLoader() is undefined for the type Class<Object>
      [ERROR] Line 58:  The method getClassLoader() is undefined for the type Class<capture#1-of ? extends CompositeClassLoader>
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/core/util/CustomObjectInputStream.java'
      [ERROR] Line 95:  The method forName(String, boolean, ClassLoader) is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/io/xml/XppDriver.java'
      [ERROR] Line 18:  The import org.xmlpull cannot be resolved
      [ERROR] Line 19:  The import org.xmlpull cannot be resolved
      [ERROR] Line 20:  The import org.xmlpull cannot be resolved
      [ERROR] Line 31:  XmlPullParserFactory cannot be resolved to a type
      [ERROR] Line 55:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 55:  XmlPullParserException cannot be resolved to a type
      [ERROR] Line 56:  XmlPullParserFactory cannot be resolved to a type
      [ERROR] Line 57:  XmlPullParserFactory cannot be resolved to a type
      [ERROR] Line 57:  XmlPullParserFactory cannot be resolved
      [ERROR] Line 59:  XmlPullParserFactory cannot be resolved to a type
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/io/xml/AbstractXppDriver.java'
      [ERROR] Line 19:  The import org.xmlpull cannot be resolved
      [ERROR] Line 20:  The import org.xmlpull cannot be resolved
      [ERROR] Line 54:  The method createParser() from the type AbstractXppDriver refers to the missing type XmlPullParser
      [ERROR] Line 55:  XmlPullParserException cannot be resolved to a type
      [ERROR] Line 93:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 93:  XmlPullParserException cannot be resolved to a type
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/mapper/MapperWrapper.java'
      [ERROR] Line 103:  The method isAssignableFrom(Class<capture#1-of ? extends MapperWrapper>) is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/mapper/CachingMapper.java'
      [ERROR] Line 55:  The method synchronizedMap(HashMap) is undefined for the type Collections
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/mapper/ClassAliasingMapper.java'
      [ERROR] Line 60:  The method isAssignableFrom(Class) is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/mapper/DefaultMapper.java'
      [ERROR] Line 47:  The method getClassLoader() is undefined for the type Class<DefaultMapper>
      [ERROR] Line 51:  The method forName(String, boolean, ClassLoader) is undefined for the type Class
      [ERROR] Line 53:  The method forName(String) is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/mapper/ImplicitCollectionMapper.java'
      [ERROR] Line 97:  The method getDeclaredField(String) is undefined for the type Class
      [ERROR] Line 110:  The method isAssignableFrom(Class<capture#1-of ?>) is undefined for the type Class<Map>
      [ERROR] Line 114:  The method isAssignableFrom(Class<capture#2-of ?>) is undefined for the type Class<Collection>
      [ERROR] Line 127:  The method isAssignableFrom(Class) is undefined for the type Class
      [ERROR] Line 162:  The method isAssignableFrom(Class) is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/core/util/Fields.java'
      [ERROR] Line 27:  The method getDeclaredField(String) is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/core/util/Primitives.java'
      [ERROR] Line 30:  Byte.TYPE cannot be resolved
      [ERROR] Line 32:  Short.TYPE cannot be resolved
      [ERROR] Line 33:  Integer.TYPE cannot be resolved
      [ERROR] Line 34:  Long.TYPE cannot be resolved
      [ERROR] Line 35:  Float.TYPE cannot be resolved
      [ERROR] Line 36:  Double.TYPE cannot be resolved
      [ERROR] Line 37:  Boolean.TYPE cannot be resolved
      [ERROR] Line 38:  Void.TYPE cannot be resolved
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/reflection/SerializationMethodInvoker.java'
      [ERROR] Line 40:  The method getDeclaredMethods() is undefined for the type Class<capture#1-of ? extends new Object(){}>
      [ERROR] Line 48:  The method synchronizedMap(HashMap) is undefined for the type Collections
      [ERROR] Line 161:  The method getDeclaredMethod(String, Class[]) is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/reflection/PureJavaReflectionProvider.java'
      [ERROR] Line 58:  The method getDeclaredConstructors() is undefined for the type Class
      [ERROR] Line 68:  The method isAssignableFrom(Class) is undefined for the type Class<Serializable>
      [ERROR] Line 113:  The method getClassLoader() is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/converters/reflection/FieldDictionary.java'
      [ERROR] Line 136:  The method getDeclaredFields() is undefined for the type Class
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/io/xml/XmlFriendlyNameCoder.java'
      [ERROR] Line 278:  The method clone() is undefined for the type Object
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/core/util/XmlHeaderAwareReader.java'
      [ERROR] Line 100:  The method isWhitespace(char) is undefined for the type Character
      [ERROR] Line 109:  The method isWhitespace(char) is undefined for the type Character
      [ERROR] Line 124:  The method isWhitespace(char) is undefined for the type Character
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/io/xml/XppReader.java'
      [ERROR] Line 17:  The import org.xmlpull cannot be resolved
      [ERROR] Line 18:  The import org.xmlpull cannot be resolved
      [ERROR] Line 32:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 42:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 54:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 56:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 60:  XmlPullParserException cannot be resolved to a type
      [ERROR] Line 80:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 80:  The method createParser() from the type XppReader refers to the missing type XmlPullParser
      [ERROR] Line 82:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 84:  XmlPullParserException cannot be resolved to a type
      [ERROR] Line 93:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 96:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 96:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 96:  Class<XmlPullParser> cannot be resolved to a type
      [ERROR] Line 109:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 110:  XmlPullParser cannot be resolved
      [ERROR] Line 111:  XmlPullParser cannot be resolved
      [ERROR] Line 113:  XmlPullParser cannot be resolved
      [ERROR] Line 114:  XmlPullParser cannot be resolved
      [ERROR] Line 116:  XmlPullParser cannot be resolved
      [ERROR] Line 118:  XmlPullParser cannot be resolved
      [ERROR] Line 123:  XmlPullParserException cannot be resolved to a type
      [ERROR] Line 131:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 135:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 139:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 143:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 147:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 151:  XmlPullParser cannot be resolved to a type
      [ERROR] Line 155:  XmlPullParser cannot be resolved to a type
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/io/xml/PrettyPrintWriter.java'
      [ERROR] Line 267:  The method isDefined(char) is undefined for the type Character
      [ERROR] Line 267:  The method isISOControl(char) is undefined for the type Character
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/core/util/Pool.java'
      [ERROR] Line 49:  The method wait() is undefined for the type Object
      [ERROR] Line 68:  The method notify() is undefined for the type Object
   [ERROR] Errors in 'jar:file:/C:/Users/YRC/Downloads/xstream-1.4.4.jar!/com/thoughtworks/xstream/core/util/Cloneables.java'
      [ERROR] Line 32:  Cannot invoke clone() on the array type Object[]
      [ERROR] Line 44:  The method getMethod(String, Class[]) is undefined for the type Class<capture#4-of ? extends Object>
   [ERROR] Cannot proceed due to previous errors 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:01:34.330

您不能在 GWT 中使用反射；

*   getDeclaredFields

*   获取声明方法

*   名称

*   获取构造函数

等等……都是反射性的调用；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:52:27.293

GWt 不支持客户端的所有代码，因此我们可以在服务器中使用它。GWT 支持 RPC。[http://www.vogella.com/articles/GWT/article.html](http://www.vogella.com/articles/GWT/article.html)或参考 [https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication)

您需要做的是在 lib 中包含所有 jar 并配置构建路径，并且仅在服务器端使用此代码。**

# c# - 错误 130 - 以下方法或属性之间的调用不明确

> ID：14579533
> 
> 赞同：2
> 
> 时间：2013-01-29T09:27:41.267
> 
> 标签：c#, user-controls

```
public static class MyExtensions
{
    public static bool TextBoxIsEmpty(TextBox txtControl, ErrorProvider eP)
    {
        if (txtControl.Text == string.Empty)
        {
            eP.SetError(txtControl, "You must Enter something!");
            return true;
        }
        else
        {
            eP.Clear();
            return false;
        }
    }
} 
```

我在整个项目中都使用这个函数来验证一个空的文本框。它正常工作，直到我将一个用户控件添加到我的 WinForm 之一。特别是，当 Grid 的数据源发生更改时，该用户控件的一个实例被添加到我的表单中，但我收到此错误。

* * *

> 错误 129 以下方法或属性之间的调用不明确：'DominateVehicle.Class.MyExtensions.TextBoxIsEmpty(System.Windows.Forms.TextBox, System.Windows.Forms.ErrorProvider)' 和 'DominateVehicle.Class.MyExtensions.TextBoxIsEmpty(System .Windows.Forms.TextBox, System.Windows.Forms.ErrorProvider)' D:\Vechel_Dominate\a\DominateVehicle\frmDefectClass.cs 30 41 DominateVehicle

* * *

不知道添加用户控件和这个错误有什么关系？如果我删除 UserControl，我的代码将不起作用并且我收到错误消息。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-30T09:08:36.117

我也有这个错误。

总是当我在我的项目中添加一个控件到我的一个表单时，由于对我所有扩展方法的不明确调用，我无法再编译。

最后我看到VS在同一个项目中添加了我的项目的引用，所以编译器遇到了这个问题。然后删除您的代码无济于事，因为引用仍然存在。

我可以通过从我的项目中删除这个引用来解决这个问题。也许这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:34:48.043

这个函数在两个地方定义。检查那个。编译器不知道调用哪一个。在您的解决方案中查找。这个名字会有两个功能。

# ios - 水平滚动方向模式下的 UICollectionView 标题位置与流布局

> ID：14579535
> 
> 赞同：20
> 
> 时间：2013-01-29T09:27:52.713
> 
> 标签：ios, header, uicollectionview, flowlayout

我有带有水平滚动方向的流布局的 ios UICollectionView。在这种情况下，典型的标题位置位于单元格的左侧。

我想在部分单元格的顶部制作标题

你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-24T12:56:13.220

[我使用DateFlowLayout](https://gist.github.com/vigorouscoding/5155703)解决了这个问题。

看看我在[这个其他答案](https://stackoverflow.com/a/17834603/72508)中是如何配置它的。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2013-03-16T16:04:24.667

我认为您可以使用标头的标准行为来获得所需的东西。

设置它（可能在 viewDidLoad 中）：

```
UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
flowLayout.headerReferenceSize = CGSizeMake(self.collectionView.bounds.size.width, 30);
// other setup
[self.collectionView setCollectionViewLayout:flowLayout]; 
```

然后回答一个标题视图：

```
#define MY_HEADER_LABEL_TAG 128

- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath {

    UICollectionReusableView *headerView = [collectionView dequeueReusableSupplementaryViewOfKind:
                                            UICollectionElementKindSectionHeader withReuseIdentifier:@"SectionHeader" forIndexPath:indexPath];
    UILabel *label = (UILabel *)[headerView viewWithTag:MY_HEADER_LABEL_TAG];
    if (!label) {
        label = [[UILabel alloc] initWithFrame:CGRectInset(headerView.bounds, 5, 5)];
        label.tag = MY_HEADER_LABEL_TAG;
        label.font = [UIFont boldSystemFontOfSize:12];
        label.textColor = [UIColor darkGrayColor];
        [headerView addSubview:label];
    }

    label.text = [NSString stringWithFormat:@"Section %d", indexPath.section];
    return headerView;
} 
```

# asp.net - Asp.net mvc3 本地化 - 将资源与视图链接？

> ID：14579536
> 
> 赞同：2
> 
> 时间：2013-01-29T09:27:56.410
> 
> 标签：asp.net, asp.net-mvc-3, razor, localization

在我的所有项目中，我使用每个视图一个 resx 文件的本地化范例。我有两个相同的资源和视图文件夹结构，我链接资源和视图，如下所示：

```
@using Res = [Namespace].Resources.[Controller].[View]
<p>@Res.[ResourceKey]</p> 
```

是否可以让 asp.net 使用/链接资源文件而不使用 using 语句并`Custom Tool Namespace`为我的所有 Resx 文件定义一个？（是的，我**就是这么**懒。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:03:56.517

`web.config`在您的 Views 文件夹中打开您的。

![在此处输入图像描述](../Images/b01c24e39da062e41355c4b938f8c233.png)

为您的资源添加命名空间。

![在此处输入图像描述](../Images/014b00abd106297848323d5bf86f1ffe.png)

重新启动 VS，因为它没有选择命名空间，所以它没有显示智能感知。

从任何视图调用您的资源，而无需在文件中添加`using`语句。`*.cshtml`

# java - 如何将弹簧框架中的链接外部化

> ID：14579537
> 
> 赞同：1
> 
> 时间：2013-01-29T09:27:58.253
> 
> 标签：java, spring

我必须在我的应用程序中外部化几个链接。链接必须位于属性文件中，无需构建和部署即可更改该文件。我尝试在我的 jboss 的 server.properties 中添加值并在我的控制器中使用该变量，但我无法获得值。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:50:36.957

如果将值放在*server.properties*中，然后`PropertyPlaceholderConfigurer`在*applicationContext*中进行配置，如下所示：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="location">
    <value>classpath:server.properties</value>
  </property>
</bean> 
```

或更短的 Spring 3 版本：

```
<context:property-placeholder location="classpath:server.properties"/> 
```

然后只需将您需要的值注入到您的 bean 中

```
<bean id="someBean">
   <property name="myProperty" value="${this.is.property.from.server.properties}" />
</bean> 
```

或带有`@Value`注释

```
@Value("${this.is.property.from.server.properties}")
private String myProperty; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:34:21.807

使用[资源包](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html)

```
ResourceBundle bundle = ResourceBundle.getBundle("<myfile>");
String studentName = bundle.getString("<property-name>"); 
```

# python - 如何在 Python OpenCV 中连接两个矩阵？

> ID：14579541
> 
> 赞同：8
> 
> 时间：2013-01-29T09:28:09.187
> 
> 标签：python, opencv

如何将两个矩阵连接成一个矩阵？生成的矩阵应该与两个输入矩阵具有相同的高度，并且其宽度将等于两个输入矩阵的宽度之和。

我正在寻找一种预先存在的方法来执行与此代码等效的操作：

```
def concatenate(mat0, mat1):
    # Assume that mat0 and mat1 have the same height
    res = cv.CreateMat(mat0.height, mat0.width + mat1.width, mat0.type)
    for x in xrange(res.height):
        for y in xrange(mat0.width):
            cv.Set2D(res, x, y, mat0[x, y])
        for y in xrange(mat1.width):
            cv.Set2D(res, x, y + mat0.width, mat1[x, y])
    return res 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-29T13:49:52.487

如果您使用的是 cv2，（然后您将获得 Numpy 支持），您可以使用 Numpy 函数`np.hstack((img1,img2))`来执行此操作。

例如：

```
import cv2
import numpy as np

# Load two images of same size
img1 = cv2.imread('img1.jpg')
img2 = cv2.imread('img2.jpg')

both = np.hstack((img1,img2)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T17:05:57.537

你应该使用`cv2`. 旧版使用 cvmat。但是 numpy 数组真的很容易使用。

正如[@abid-rahman-k](https://stackoverflow.com/users/1134940/abid-rahman-k)所建议的，您可以使用 hstack（我不知道）所以我使用了这个。

```
h1, w1 = img.shape[:2]
h2, w2 = img1.shape[:2]
nWidth = w1+w2
nHeight = max(h1, h2)
hdif = (h1-h2)/2
newimg = np.zeros((nHeight, nWidth, 3), np.uint8)
newimg[hdif:hdif+h2, :w2] = img1
newimg[:h1, w2:w1+w2] = img 
```

但是，如果您想使用旧代码，这应该会有所帮助

假设 img0 的高度大于图像的高度

```
nW = img0.width+image.width
nH = img0.height
newCanvas = cv.CreateImage((nW,nH), cv.IPL_DEPTH_8U, 3)
cv.SetZero(newCanvas)
yc = (img0.height-image.height)/2
cv.SetImageROI(newCanvas,(0,yc,image.width,image.height))
cv.Copy(image, newCanvas)
cv.ResetImageROI(newCanvas)
cv.SetImageROI(newCanvas,(image.width,0,img0.width,img0.height))
cv.Copy(img0,newCanvas)
cv.ResetImageROI(newCanvas) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-24T14:25:30.913

我知道这个问题很老，但我偶然发现了它，因为我正在寻找连接二维数组（不仅仅是连接一维）。

`np.hstack`不会这样做。

假设您有两个`640x480`只是二维的图像，请使用`dstack`.

```
a = cv2.imread('imgA.jpg')
b = cv2.imread('imgB.jpg')

a.shape            # prints (480,640)
b.shape            # prints (480,640)

imgBoth = np.dstack((a,b))
imgBoth.shape      # prints (480,640,2)

imgBothH = np.hstack((a,b))
imgBothH.shape     # prints (480,1280)  
                   # = not what I wanted, first dimension not preserverd 
```

# ruby-on-rails - 如何处理延迟作业中的 http 调用？

> ID：14579542
> 
> 赞同：1
> 
> 时间：2013-01-29T09:28:09.537
> 
> 标签：ruby-on-rails, delayed-job

我正在使用 rails 实现一个 json api。我希望使用延迟作业向另一个 Web 服务发出请求，以防止它阻塞我的 Rails 应用程序。到目前为止，一切都很好。所以我在我的模型中定义了一个函数，它对这个其他 Web 服务执行 http POST。但是，另一个 Web 服务是带有回调的异步 api。因此，我还想在我延迟的工作中接收来自这个 api 的回调。这可能吗？我可以在我的延迟作业中有一个 http 侦听器，我可以在我的代码中控制或知道其端口号吗？

# java - Jersey 和 Jackson 的 REST-Webservice 示例中的 404 错误

> ID：14579547
> 
> 赞同：3
> 
> 时间：2013-01-29T09:28:24.147
> 
> 标签：java, jakarta-ee, jaxb, jersey, jax-rs

我正在尝试使用 JSON 构建一个简单的基于 java 的 REST Web 服务。我也在使用 Maven 进行依赖管理。

因为我是新手，所以我一直在[http://www.mkyong.com/webservices/jax-rs/json-example-with-jersey-jackson/](http://www.mkyong.com/webservices/jax-rs/json-example-with-jersey-jackson/)上完全遵循一个不错的 5 步教程，但是我没有不要让这个简单的例子运行。

Maven 运行良好，所有必要的依赖项都已下载并集成到项目中（库包含在部署的 .war 文件中）。唯一的问题是，当我想在部署项目后打开教程中给出的 URL (localhost:8080/RESTfulExample/rest/json/metallica/get) 时，我会收到 404 错误而没有任何其他信息。

编辑：

这是我的 pom.xml

```
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.8</version>
    </dependency>

    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-json</artifactId>
        <version>1.8</version>
    </dependency>

</dependencies>

<build>
    <finalName>RESTfulExample</finalName>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

正如我所说，构建运行良好，依赖项已加载并集成到项目中。

现在，这是我的 web.xml Restful Web Application 的内容

```
<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.mkyong.rest</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

接下来，我使用 JSON-Service 类和模型类 Track。我的 JSON 服务如下所示：

```
@Path("/json/metallica")
public class JSONService {

    @GET
    @Path("/get")
    @Produces(MediaType.APPLICATION_JSON)
    public Track getTrackInJSON() {

        Track track = new Track();
        track.setTitle("Enter Sandman");
        track.setSinger("Metallica");

        return track;

    }

    @POST
    @Path("/post")
    @Consumes(MediaType.APPLICATION_JSON)
    public Response createTrackInJSON(Track track) {

        String result = "Track saved : " + track;
        return Response.status(201).entity(result).build();

    }
} 
```

我不确定如何检查服务器端异常，对此的任何提示也很感激...... :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:11:53.107

您在 servlet 映射中定义

```
<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

所以你的网址应该被正确调用`localhost:8080/rest/json/metallica/get`

# c# - 无法使 PictureBox 可见-C#

> ID：14579556
> 
> 赞同：0
> 
> 时间：2013-01-29T09:28:42.243
> 
> 标签：c#, image, forms, picturebox

我正在尝试使用 PictureBox 对象来显示图像，但我得到了一些“错误”。如果我只是添加 PictureBox 属性（位置、图像、大小、背景颜色等...），我看不到任何图像

然后我读到我需要将 PictureBox 添加到表单控制器。

我添加了它，但仍然什么都没有……图层有什么优先级（后面是什么，前面是什么？，我该如何更改它？）

这是 PictureBox 的属性集：

```
imageFile = new PictureBox();
imageFile.Top = 200;
imageFile.Left = 400;
imageFile.Height = 100;// furnitureSize.Height;
imageFile.Width = 100;// furnitureSize.Width;
imageFile.ImageLocation = (Application.StartupPath + "\\ball4.gif");
imageFile.Image = Image.FromFile(Application.StartupPath + "\\lamp3.jpg");
imageFile.Visible = true;
imageFile.BackColor = Color.Black;
imageFile.SizeMode = PictureBoxSizeMode.StretchImage;
ownerForm.Controls.Add(imageFile);
imageFile.Show(); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:31:40.397

嗯……你确定你是说

```
ownerForm.Controls.Add(imageFile); 
```

并不是

```
this.Controls.Add(imageFile); 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:38:50.697

问题和我想的一样（图片框不在前面）添加：`imageFile.BringToFront();`解决了这个问题

谢谢你们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:39:10.973

您必须为图片框定义大小

```
imageFile.ClientSize = new Size(100, 100); 
```

# android - OnTouch 在动态壁纸中不起作用

> ID：14579557
> 
> 赞同：4
> 
> 时间：2013-01-29T09:28:46.057
> 
> 标签：android, live-wallpaper

嗨，我正在[http://www.rbgrn.net/content/354-glsurfaceview-adapted-3d-live-wallpapers](http://www.rbgrn.net/content/354-glsurfaceview-adapted-3d-live-wallpapers)的帮助下制作动态壁纸。现在我想在主屏幕上附加触摸检测。即设置好壁纸后，用户可以通过触摸壁纸进行相应的操作。我的源代码如下。它在预览壁纸时工作正常，但在设置壁纸之后就不行了。

```
class MyEngine extends GLEngine 
{
    MyRenderer renderer;
    AnimationController animationController;
    public MyEngine() 
    {
        super();
        renderer = new MyRenderer();
        setRenderer(renderer);
        setRenderMode(RENDERMODE_CONTINUOUSLY);
    }

    @Override
    public void onCreate(SurfaceHolder surfaceHolder)
    {
        super.onCreate(surfaceHolder);

    }

    @Override
    public void onTouchEvent(MotionEvent event) 
    {
         if (event.getAction() == MotionEvent.ACTION_MOVE ) 
         {                        
            Toast.makeText(getApplicationContext(), "Move", Toast.LENGTH_SHORT).show();             
         }
         else
         if (event.getAction() == MotionEvent.ACTION_DOWN) 
         {                         
            Toast.makeText(getApplicationContext(), "Down", Toast.LENGTH_SHORT).show();             
         }           

        super.onTouchEvent(event);
    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:57:23.033

得到了答案！刚刚添加了 this.setTouchEventsEnabled(true); 在 MyEngine 构造函数中。

# perl - 我正确使用 utf8::is_utf8 吗？

> ID：14579560
> 
> 赞同：3
> 
> 时间：2013-01-29T09:29:03.483
> 
> 标签：perl, utf-8, decode

这是否正常工作？一些错误消息已经被解码，而一些需要解码的错误消息确实得到了正确的输出。

```
#!/usr/bin/env perl
use warnings;
use strict;
use utf8;
use open qw(:utf8 :std);
use Encode qw(decode_utf8);

# ...

if ( not eval{
    # some error-messages (utf8) are decoded some are not
    1 }
) {
    if ( utf8::is_utf8 $@ ) {
        print $@;
    }
    else {
        print decode_utf8( $@ );
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T13:28:03.903

> 我正确使用 utf8::is_utf8 吗？

不，任何使用`utf8::is_utf8`都是不正确的，因为你不应该使用它！用来`utf8::is_utf8`猜测字符串的语义是所谓的[The Unicode Bug](https://perldoc.perl.org/perlunicode.html#The-%22Unicode-Bug%22)的一个实例。除了在调试 Perl 或 XS 模块时检查变量的内部状态外，`utf8::is_utf8`没有任何用处。

它不指示变量中的值是否使用 UTF-8 编码。事实上，这是不可能可靠地知道的。例如，是否`"\xC3\xA9"`生成使用 UTF-8 编码的字符串？好吧，没有办法知道！这取决于我的意思是`"é"`，`"Ã©"`还是完全不同的东西。

如果变量可能同时包含编码字符串和解码字符串，则由您决定使用第二个变量来跟踪它。不过，我强烈建议不要这样做。只需解码从外部传入的所有内容。

如果你真的不能，你最好尝试解码`$@`并忽略错误。不是 UTF-8的可读内容[不太可能](http://www.perlmonks.org/?node_id=910190)是有效的 UTF-8。

```
# $@ is sometimes encoded. If it's not,
# the following will leave it unchanged.
utf8::decode($@);

print $@; 
```

# android - 错误 aapt：返回代码 139 尝试包含库

> ID：14579561
> 
> 赞同：1
> 
> 时间：2013-01-29T09:29:03.930
> 
> 标签：android, eclipse, adt

我正在尝试在我的 android 项目中包含一个库，我从 android 属性中包含该库。两个项目（lib 和我的项目）都使用相同版本的 android 编译，都具有相同的兼容性库。如果我在示例项目中包含相同的库，则工作正常。

我的问题是当我在我的项目中包含 lib 并刷新时，R 文件没有生成并出现错误“aapt：返回代码 139”我将详细模式放在构建器中，但错误出现在不同的地方。

我在其他机器上做了同样的事情（都是mac），具有相同的adt和相同的eclipse版本并且可以工作。

我试图增加 Eclipse 内存，但这并不能解决问题。

有人知道这是怎么回事吗？错误 139 是什么？为什么它在一台机器上工作而不在另一台机器上工作？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-23T15:38:07.427

可以与 ids 生成问题相关联。
不要`@+id/...`在样式中使用。
`@+id/...`只能在布局中使用。
否则，您可以`Error executing apt: return code 139`在构建期间获得。
如果需要，使用`@id/...`并生成带有帮助资源文件的 ID：res/values/ids.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item type="id" name="header" />
    <item type="id" name="footer" />
</resources> 
```

[http://developer.android.com/guide/topics/resources/more-resources.html#Id](http://developer.android.com/guide/topics/resources/more-resources.html#Id)

# c# - XmlElement 反映

> ID：14579567
> 
> 赞同：1
> 
> 时间：2013-01-29T09:29:30.190
> 
> 标签：c#, .net

像这两个类

```
[XmlRoot("Root")]
public class VcRead
{
    [XmlElement("item")]
    public string[] Items;

    [XmlElement("amount")]
    public int Count;
}

public class KeyItem
{
    [XmlAttribute("id")]
    public int ID;

    [XmlAttribute("name")]
    public string Title;
} 
```

现在，我想使用反射来获取所有字段及其 Xml 标记。很容易获得字段的名称和它们的值。但是，如何获取 XmlElement 的值，例如“金额”

```
[XmlElement("amount")]
public int Count; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:39:46.677

```
Type type = typeof(VcRead);
foreach (var fiedInfo in type.GetFields())
{
    // your field

    foreach (var attribute in fiedInfo.GetCustomAttributes(true))
    {
        // attributes
    }                   
} 
```

要从中获取元素名称`XmlElementAttribute`（相同的方法`XmlAttributeAttribute`）：

```
if (attribute is XmlElementAttribute)
{
    var elementName = ((XmlElementAttribute)attribute).ElementName;
} 
```

另请记住，您的类具有公共字段而不是属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:16:31.650

而不是 XmlElement 使用 XmlElementAttribute 如下

```
[XmlElementAttribute("test")]
 public string Test  {get;set;}; 
```

然后，通过反射访问这个对象的GetProperties()

```
 PropertyInfo[] methods = typeof(KeyItem).GetProperties();

 foreach (PropertyInfo method in methods)
 {
  // Use of Attribute.GetCustomAttributes which you can access the attributes
    Attribute[] attribs = Attribute.GetCustomAttributes(method, typeof(XmlAttribute));
 } 
```

# session-cookies - 如何将 jsessionid 与基本身份验证一起使用

> ID：14579571
> 
> 赞同：2
> 
> 时间：2013-01-29T09:29:40.573
> 
> 标签：session-cookies, basic-authentication

我正在使用 JBoss 7.1 并已使用基本身份验证保护我的 Web 应用程序，但我只希望第一次调用需要基本身份验证标头，后续调用应使用 jsessionid 进行身份验证。如何做到这一点？

到目前为止，我已经创建了一个 rest servlet，通过调用 request.getSession() 来强制创建会话

```
@Path("/rest/HelloWorld")
public class HelloWorld {

    @GET()
    @Produces("text/plain")
    public String sayHello(@Context HttpServletResponse response,
        @Context HttpServletRequest request) {
        HttpSession session = request.getSession();
        return "Hello World! " + request.getUserPrincipal().getName();
    } 
```

我的想法是任何其他调用都应该只需要 jsessionid cookie，但是在查看提琴手时，我发现第一个调用的行为符合预期。首先，您得到一个 401 并且客户端正在重新发送，包括基本授权标头，并返回一个 jsessionid。在第二次调用中包含 jsessionid cookie，但我仍然得到一个 401 触发客户端重新发送基本授权标头。

这是成功通过身份验证的第一次调用返回的标头。

```
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Pragma: No-cache
Cache-Control: no-cache
Expires: Thu, 01 Jan 1970 01:00:00 CET
Set-Cookie: JSESSIONID=AFDFl2etiUNkn-mpM+DXr3KE; Path=/Test
Content-Type: text/plain
Content-Length: 18
Date: Tue, 29 Jan 2013 09:12:48 GMT

Hello World! test1 
```

当我打第二个电话时， jsessionid 包括在内

```
GET /Test/index.html HTTP/1.1
Host: cwl-rickard:8080
Cookie: JSESSIONID=AFDFl2etiUNkn-mpM+DXr3KE 
```

我得到一个 401 强制客户端重新发送包括基本授权标头的请求。

```
HTTP/1.1 401 Unauthorized
Server: Apache-Coyote/1.1
Pragma: No-cache
Cache-Control: no-cache
Expires: Thu, 01 Jan 1970 01:00:00 CET
WWW-Authenticate: Basic realm="ApplicationRealm"
Content-Type: text/html;charset=utf-8
Content-Length: 958
Date: Tue, 29 Jan 2013 09:12:48 GMT 
```

任何我想念的想法。

# javascript - 如何找出 jQM 按钮的状态？

> ID：14579574
> 
> 赞同：1
> 
> 时间：2013-01-29T09:29:52.603
> 
> 标签：javascript, jquery, jquery-mobile

一个简单的问题。如何找出 jquery 移动按钮处于什么状态？文档对此没有办法。

[http://jquerymobile.com/test/docs/buttons/buttons-methods.html](http://jquerymobile.com/test/docs/buttons/buttons-methods.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:44:22.757

当按钮小部件被禁用时，其`disabled`选项将设置为`true`，因此您可以编写：

```
var isButtonDisabled = $("#yourButton").button("option", "disabled"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:43:44.710

活动/非活动：

```
if($('#button-test').hasClass('ui-btn-active')) {
    alert('Active');    
} else {
    alert('Not active');
} 
```

启用/禁用

```
if($('#button-test').hasClass('ui-state-disabled')) {
    alert('Disabled');    
} else {
    alert('Enabled');
} 
```

# macos - jedit中的方案

> ID：14579580
> 
> 赞同：1
> 
> 时间：2013-01-29T09:30:05.113
> 
> 标签：macos, terminal, lisp, scheme, jedit

我一直在寻找一种在 Jedit 中获取 Scheme 语言颜色代码的方法。有人知道我该怎么做吗？我还没有弄清楚如何在终端（mac）中编译我的方案代码，所以我想知道你是否也可以在那里给我一些指示。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:35:22.657

是的，应该为本地 jEdit 安装安装方案模式。要更改当前模式，请查看 jEdit 窗口的右下角并单击其中的任何内容（“文本”可能吗？）。它将弹出一个对话框，您可以在其中选择`scheme`编辑模式。

![j编辑模式选择](../Images/8914abd0017c3c80261cb8722472b70e.png)

如果您查看jEdit 安装目录`~/.jedit/modes/catalog`或`modes`目录，您应该能够看到哪些文件 glob 已经自动与方案语言相关联。然后，您可以添加更多 glob 以匹配您用于方案源文件的任何文件扩展名。

# twitter - 来自用户 BlackBerry 10 的 Twitter 提要

> ID：14579582
> 
> 赞同：1
> 
> 时间：2013-01-29T09:30:16.500
> 
> 标签：twitter, blackberry-10

如何从用户那里获取 Twitter 提要并将它们放在列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T05:58:51.917

查看 github 上的 twittertimeline 示例，该示例展示了如何使用 C++ 和 QML 中的 Native Cascades API 执行此操作：

[http://blackberry.github.com/Cascades-Samples/twittertimeline.html](http://blackberry.github.com/Cascades-Samples/twittertimeline.html)（详细演练）

[https://github.com/blackberry/Cascades-Samples/tree/master/twittertimeline](https://github.com/blackberry/Cascades-Samples/tree/master/twittertimeline)（存储库）

它准确地展示了如何使用 JSON api 来检索用户的推文，将它们加载到数据模型中并使用标准或自定义列表元素显示它们。

注意：它使用较旧的 twitter 1.0 REST API。

# vb.net - 无法使用 SharpKML 设置单个图标标题

> ID：14579583
> 
> 赞同：2
> 
> 时间：2013-01-29T09:30:19.930
> 
> 标签：vb.net, kml, sharpkml

使用 VB (VS2010) 中的 SharpKML 库，我可以为每个地标创建带有自定义图标的 kml 文件。地标是在循环中创建的，我想为每个地标设置图标的标题属性。

```
'Define the style for the icon
Dim kmlStyle As New SharpKml.Dom.Style
kmlStyle.Id = "ShipIcon"
kmlStyle.Icon = New SharpKml.Dom.IconStyle
kmlStyle.Icon.Icon = New SharpKml.Dom.IconStyle.IconLink(New System.Uri("http://www.mysite.com/mapfiles/ship4.png")) 
kmlStyle.Icon.Scale = 1

Poscommand.CommandText = "SELECT * FROM Ships"
PosReader = Poscommand.ExecuteReader()

While PosReader.Read()
   'Add placemark for position
   kmlPosPoint = New SharpKml.Dom.Point
   kmlPosPoint.Coordinate = New SharpKml.Base.Vector(PosReader("Lat"), PosReader("Lon"))
   kmlPosPlaceMark = New SharpKml.Dom.Placemark
   kmlPosPlaceMark.Geometry = kmlPosPoint
   kmlPosPlaceMark.Name = "My Name"
   kmlPosPlaceMark.StyleUrl = New System.Uri("#ShipIcon", UriKind.Relative)
   'SET icon.heading HERE???  How to access icon heading property for this placemark only???
End While 
```

任何人都可以帮助我使用 SharpKML 为单个地标设置图标标题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:19:31.287

Heading 实际上是 IconStyle 的属性，而不是 Icon（Icon 是 IconStyle 的子属性，只指定图标图像的 URL。

在您上面的代码中，它将是（从内存中）：

```
kmlStyle.Icon.Heading = 90; 
```

因为您对所有项目都使用了通用样式，所以我相信您可以在循环中仅覆盖这样的样式的一部分（如果您测试，请发布结果）：

```
kmlPosPlaceMark.StyleUrl = New System.Uri("#ShipIcon", UriKind.Relative);
Style s = new Style();
s.Icon = new IconStyle();
s.Icon.Heading = 90;
kmlPosPlaceMark.StyleSelector = s; 
```

如果这不起作用，您可能必须为每个地标创建和设置样式，但我很确定情况并非如此。再次，请回帖，让我们知道你是怎么做到的。

# c# - 无法让 ApplyCurrentValues(Entity) 在 Entity Framework 5 中工作

> ID：14579590
> 
> 赞同：6
> 
> 时间：2013-01-29T09:30:47.560
> 
> 标签：c#, entity-framework-5, .net-4.5

同志们，谁能帮帮我，实体框架5似乎没有 ApplyCurrentValues() 方法。是否有另一种方法来更新实体框架 v5 中的数据库对象。这是我想做的

```
odc.Accounts.Attach(new Account { AccountID = account.AccountID });
  odc.Accounts.ApplyCurrentValues(account);
  odc.SaveChanges(); 
```

但是我在**ApplyCurrentValues()**行中遇到了编译错误

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-29T12:42:32.690

`ApplyCurrentValues`是一种`ObjectContext`API 方法，因此首先您必须获得对包含在以下内容中的 objectcontext 的访问权限`DbContext`：

```
odc.Accounts.Attach(new Account { AccountID = account.AccountID });
((IObjectContextAdapter)odc).ObjectContext
    .ApplyCurrentValues("Accounts", account);
odc.SaveChanges(); 
```

请注意，包装的上下文没有像“帐户”这样的成员，因此您必须使用该`ObjectContext`方法本身。

但是您可以使用 DbContext API 执行相同的操作：

```
var sourceAcc = new Account { AccountID = account.AccountID });
odc.Entry(account).CurrentValues.SetValues(sourceAcc); 
```

# javascript - 将提示框的值获取到另一个函数中

> ID：14579592
> 
> 赞同：2
> 
> 时间：2013-01-29T09:30:50.017
> 
> 标签：javascript

请查看下面的代码。我想将提示框中输入的值放入函数dis()中。我怎样才能做到这一点？

```
<!DOCTYPE html>
<html>
<head>
<script>
function display()
{
var z=prompt("enter your name...");
if(z!=null)
{
document.getElementById("demo").innerHTML="thankyou"+z+"..";
document.getElementById("case").style.display='block';
}
else
document.getElementById("demo").innerHTML="thankyou";
}
function dis()
{

    var a=document.getElementById("aaa").value;
    alert("your mark is"+a);
}
</script>
</head>
<body>
<p id="demo">click on the button.....</p>
<button type="button" onclick="display()">submit</button>
<div id="case" style="display:none">
<input type="text" id="aaa" name="myText" onDblClick="dis()">enter your mark
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T09:40:09.617

如果您想直接将值传递给 dis() 函数，请将您的脚本更改为

```
function display() {
     var z = prompt("enter your name...");
     if (z != null) {
         document.getElementById("demo").innerHTML = "thankyou " + z + "..";
         document.getElementById("case").style.display = 'block';
         dis(z);
     }
     else
         document.getElementById("demo").innerHTML = "thankyou";
 }
 function dis(arg) {
     alert("your mark is" + arg);
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T09:36:06.950

如果您希望可以从独立函数访问该值，则需要将其存储在全局变量中：

```
<script>
var userName = null;

function display() {
  userName = prompt("enter your name...");
  if (userName != null) {
    document.getElementById("demo").innerHTML="thankyou "+userName +"..";
    document.getElementById("case").style.display='block';
  } else
    document.getElementById("demo").innerHTML="thankyou";
}

function dis() {
    var a=document.getElementById("aaa").value;
    alert(userName + ", your mark is"+a);
}
</script> 
```

请注意，如果函数是完全独立的，它们都需要测试变量是否有值。在您的情况下，该`dis()`函数仅在设置值后可见的控件中调用，但请注意，用户可能会再次单击按钮然后取消 - 在这种情况下，名称将被设置回，`null`但`case`元素将仍然可见。

# ruby - WARN TCPServer 错误：地址已在使用中 - linux EC2 和 Heroku 服务器中的 bind(2)

> ID：14579594
> 
> 赞同：0
> 
> 时间：2013-01-29T09:30:51.400
> 
> 标签：ruby, linux, heroku, amazon-ec2, webrick

```
[2013-01-29 09:17:50] INFO  WEBrick 1.3.1
[2013-01-29 09:17:50] INFO  ruby 1.8.7 (2012-10-12) [i386-linux]
[2013-01-29 09:17:50] WARN  TCPServer Error: Address already in use - bind(2)
[2013-01-29 09:17:50] INFO  WEBrick::HTTPServer#start: pid=4107 port=8080 
```

当我在 linux 中运行下面附加的文件时，我得到了描述的错误。我在网上尝试了所有可能的命令和策略来监听进程（包括流氓）并杀死它们。我在很多港口都这样做过。没运气。

只要我在 Mac OS 中运行脚本并且它就可以工作。尽管如此，我必须将它安装在服务器上，并且客户端必须与之通信。它发生在亚马逊 ec2 和 heroku 的每个实例上。我已经多次看到这个错误并花了很多时间试图修复它。我配置了ec2实例的安全组，还是不行。我已经绝望了。此时我不得不认为问题一定是WEBrick本身或我的代码中的某些东西。

```
 require 'webrick'
    require 'uri'
    require 'net/http'

    $own_address = 8080

    class AuctionInfo
        # The representation is a hash mapping item names to [highest_bidder, highest_bid, end_time]
        def initialize
            @data = {}
        end
        def new_item(item, endTime)
            @data[item] = ["UNKNOWN", 0, endTime]
        end
        def bid(item, bid, client)
            if @data.has_key?(item)
                endTime = @data[item][2]
                if @data[item][1].to_i < bid.to_i and Time.new.to_i < endTime.to_i
                    @data[item] = [client, bid, endTime]
                end
            end
        end
        def get_status(item)
            if @data.has_key?(item)
                return @data[item][0]
            end
        end
        def winner(item)
            if @data.has_key?(item)
                if @data[item][2].to_i + 1 <= Time.new.to_i
                    return @data[item][0]
                else return "UNKNOWN"
                end
            end
        end
        def reset
            @data = {}
        end
        def has_item(item)
            return @data.has_key?(item)
        end
        def get_data
            return {}.replace(@data) 
        end
    end

class StartAuctionServlet < WEBrick::HTTPServlet::AbstractServlet

    def initialize(server, data)
        @data = data
    end

    def do_POST(request, response)
        if request.query['name'] and request.query['end_time']
            @data.new_item(request.query['name'], request.query['end_time'].to_i)
        end
        response.status = 200
    end
    alias_method :do_GET, :do_POST
end

class BidServlet < WEBrick::HTTPServlet::AbstractServlet

    def initialize(server, data)
        @data = data
    end

    def do_POST(request, response)
        if request.query['name'] and request.query['client'] and request.query['bid']
            @data.bid(request.query['name'], request.query['bid'].to_i, request.query['client'])
        end
        response.status = 200
    end
    alias_method :do_GET, :do_POST
end

class StatusServlet < WEBrick::HTTPServlet::AbstractServlet

    def initialize(server, data)
        @data = data
    end

    def do_GET(request, response)

        if request.query['name']
            response.body = @data.get_status(request.query['name'])
        end
        response.status = 200
    end
    alias_method :do_POST, :do_GET
end

class WinnerServlet < WEBrick::HTTPServlet::AbstractServlet

    def initialize(server, data)
        @data = data
    end

    def do_GET(request, response)
        if request.query['name']
            response.body = @data.winner(request.query['name'])
        end
        response.status = 200
    end
    alias_method :do_POST, :do_GET
end

class ResetServlet < WEBrick::HTTPServlet::AbstractServlet

    def initialize(server, data)
        @data = data
    end
    def do_POST(request, response)
        @data.reset
        response.status = 200
    end
    alias_method :do_GET, :do_POST
end

class RandomServlet < WEBrick::HTTPServlet::AbstractServlet
    def initialize(server, data)
        @data = data
    end
    def do_GET(request, response)
        response.status = 200
        response.body = @data.get_data.to_s
    end
    alias_method :do_POST, :do_GET
end

data = AuctionInfo.new
server = WEBrick::HTTPServer.new(:Port => $own_address)
server.mount '/start_auction', StartAuctionServlet, data
server.mount '/bid', BidServlet, data
server.mount '/status', StatusServlet, data
server.mount '/winner', WinnerServlet, data
server.mount '/rst', ResetServlet, data
server.mount '/', RandomServlet, data
trap("INT") { server.shutdown }
server.start 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:01:05.487

您是否检查过 linux 服务器是否正在运行 apache、tomcat、trinidad 或任何其他 Web 服务器？奇怪的是其中之一已经在服务器的端口 8080 上运行。

lsof 是一个有用的命令。试试看`lsof | grep 8080`有没有出现

# java - 在 Play 中发现配置错误！框架 2.0.4

> ID：14579599
> 
> 赞同：2
> 
> 时间：2013-01-29T09:31:12.303
> 
> 标签：java, database, configuration, playframework-2.0, global

我的游戏！2.0.4 web 应用目前连接多个RDS MySQL 数据库，配置文件如下：

```
 # Africa
    db.afr.url="jdbc:mysql://<africa-server>:3306/users"
    db.afr.driver=com.mysql.jdbc.Driver
    db.afr.user=user1
    db.afr.password=****
    db.afr.logStatements=true

    # Europe
    db.eur.url="jdbc:mysql://<europe-server>:3306/users"
    db.eur.driver=com.mysql.jdbc.Driver
    db.eur.user=user1
    db.eur.password=****
    db.eur.logStatements=true 
```

当所有数据库都在运行时，这非常有效。但是，如果其中一个数据库关闭（无论出于何种原因），整个应用程序都会失败，并引发配置错误（无法连接到数据库 [afr]）。

我如何在启动时捕获配置错误以捕获并忽略/记录这些消息，而不是完全杀死服务器？我已经研究过使用 Global.java 的 onError() 覆盖，但我没有运气。

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T21:24:14.187

这就是我最终做的事情。不是一个很好的解决方案，但可能是一个好的解决方法。

将 play.api.db.BoneCPPlugin 的内容复制到您自己的文件 SafeDBPlugin.scala 中，类名为 SafeDBPlugin。它需要在包 play.api.db 中（尽管您可以像往常一样将文件放在代码库中的任何位置）。重要的部分是更改方法 onStartup() 中报告配置错误的行并将其更改为 logger.warn()。

通过将以下行添加到 application.conf 来禁用内置 dbplugin (BoneCPPlugin)：

```
dbplugin=disabled 
```

通过将以下行添加到 play.plugins 来添加新插件：

```
600:play.api.db.SafeDBPlugin 
```

# c# - C#：System.Runtime.IntropServices.COMException：检索具有 CLSID 的组件的 COM 类工厂

> ID：14579603
> 
> 赞同：0
> 
> 时间：2013-01-29T09:31:20.210
> 
> 标签：c#, visual-studio, com, ms-word, clsid

我正在开发一个 MS word 模板生成器，它的工作原理是这样的：

用户打开网页填写一些文本框，标记一些复选框，然后单击按钮，打开word文档（我之前定义的模板以及所需的所有书签），使用他在网页中输入的内容，全部在文档中并且字段和复选框标记为他标记的，他只需要打印文档。它在我的电脑上完美运行

但是当我在服务器上测试时，出现了错误： ![在此处输入图像描述](../Images/1971951da1bf0ba31e5eed02568f7940.png)

我的代码：我已包含参考 ( `using Word = Microsoft.Office.Interop.Word;`)

```
private void CreateWordDocument(int DepositNo)
        {
            Random RandomClass = new Random();
            int randomInt = RandomClass.Next();
            string templateName = "Form15Template.docx";
            string docFileName = "Form15_" + DepositNo.ToString() + "_" + randomInt.ToString() + ".docx";
            string destenation = "D:\\_Documents\\Form15\\";
            File.Copy(Server.MapPath(@"_Documents/" + templateName), destenation + docFileName, true); // 

            String POBox = "9769";
            String City = "الرياض"; 
            String PostalCode = "11423";
            String Address = "ص.ب " + POBox + " " + City + " " + PostalCode;

            // Modify Checkboxes variables in Doc to true if they have been checked

            if (RadioButtonListResult.SelectedValue.Equals("اجتاز"))
                A = true;
            if (RadioButtonListResult.SelectedValue.Equals("تعديل") || RadioButtonListResult.SelectedValue.Equals("لم يجتز"))
                B = true;
            if (CheckBoxAllElements.Checked)
                AllElements = true;
            if (CheckBoxElements.Checked)
                Elements = true;
            if (CheckBoxEdit.Checked)
                Edit = true;
            if (CheckBoxBoxPage.Checked)
                BoxPage = true;
            if (CheckBoxRequestArabic.Checked)
                RequestArabic = true;
            if (CheckBoxMultiInvention.Checked)
                MultiInvention = true;
            if (CheckBoxRecency.Checked)
                Recency = true;
            if (CheckBoxInventiveStep.Checked)
                InventiveStep = true;
            if (CheckBoxImplemented.Checked)
                Implemented = true;
            if (CheckBoxC.Checked)
                C = true;
            if (CheckBoxD.Checked)
                D = true;

            object bA = "A", bB = "B", bC = "C", bD = "D", bAllElements = "AllElements", bElements = "Elements",
                bRecency = "Recency", bInventiveStep = "InventiveStep", bImplemented = "Implemented",
                bApprove = "Approve", bEdit = "Edit", bBoxPage = "BoxPage", bRequestArabic = "RequestArabic",
                bMultiInvention = "MultiInvention", bObjection = "Objection", bMark = "Mark",
                bRejection = "Rejection";

            //Start Word and open template.
            Word._Application oWord;
            Word._Document oDoc;
            oWord = new Word.Application();
            oWord.Visible = true;
            object FileName = @"C:\Users\aalhammad\Documents\Visual Studio 2010\Projects\FormEditing\FormEditing\_Documents\Form15Template.docx";
            object oMissing = System.Reflection.Missing.Value;
            oDoc = oWord.Documents.Open(ref FileName, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
                ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing);

            // ============================================== CheckBoxes ====================================================
            // Modifying CheckBoxes in Document

            oDoc.FormFields.get_Item(ref bA).CheckBox.Value = A;
            oDoc.FormFields.get_Item(ref bB).CheckBox.Value = B;
            oDoc.FormFields.get_Item(ref bC).CheckBox.Value = C;
            oDoc.FormFields.get_Item(ref bD).CheckBox.Value = D;
            oDoc.FormFields.get_Item(ref bAllElements).CheckBox.Value = AllElements;
            oDoc.FormFields.get_Item(ref bElements).CheckBox.Value = Elements;
            oDoc.FormFields.get_Item(ref bRecency).CheckBox.Value = Recency;
            oDoc.FormFields.get_Item(ref bInventiveStep).CheckBox.Value = InventiveStep;
            oDoc.FormFields.get_Item(ref bImplemented).CheckBox.Value = Implemented;
            oDoc.FormFields.get_Item(ref bApprove).CheckBox.Value = Approve;
            oDoc.FormFields.get_Item(ref bEdit).CheckBox.Value = Edit;
            oDoc.FormFields.get_Item(ref bBoxPage).CheckBox.Value = BoxPage;
            oDoc.FormFields.get_Item(ref bRequestArabic).CheckBox.Value = RequestArabic;
            oDoc.FormFields.get_Item(ref bMultiInvention).CheckBox.Value = MultiInvention;
            oDoc.FormFields.get_Item(ref bObjection).CheckBox.Value = Objection;
            oDoc.FormFields.get_Item(ref bMark).CheckBox.Value = Mark;
            oDoc.FormFields.get_Item(ref bRejection).CheckBox.Value = Rejection;

            // ============================================== BookMarks =====================================================

            String ApplicantName = "شركة الزيت العربية السعودية",
                AgentName = "مكتب سليمان العمار للمحاماة والاستشارات القانونية",
                AppDate = "13/01/2013",
                Title = "حماية خط تدفق رأس بئر‏ ونظام اختبار باستخدام وحدة تحكم في سرعة مضخة كهربائية مغمورة وصمام فاصل يستخدم عند الطوارئ";

            // find bookmark

            object oBookmark = "DepositNO"; // name of bookmark in doc
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = GetDepositNO(DepositNo);
            oBookmark = "AppDate";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = AppDate;
            oBookmark = "Title";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = Title;
            oBookmark = "ApplicantName";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = ApplicantName; 
            oBookmark = "AgentName";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = AgentName;
            oBookmark = "Address";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = Address;
            oBookmark = "AgentName01";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = AgentName;
            oBookmark = "Times";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = Times;
            oBookmark = "NumOfElements";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = NumOfElements;
            oBookmark = "txtElements";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = txtElements;
            oBookmark = "txtRecency";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = txtRecency;
            oBookmark = "txtInventiveStep";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = txtInventiveStep;
            oBookmark = "txtImplemented";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = txtImplemented;
            oBookmark = "ElementsC";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = ElementsC;
            oBookmark = "ElementsD1";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = ElementsD1;
            oBookmark = "ElementsD2";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = ElementsD2;
            oBookmark = "txtBoxPage";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = txtBoxPage;
            oBookmark = "Fees";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = Fees;
            oBookmark = "DepositNO01";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = GetDepositNO01(DepositNo);
            oBookmark = "ExamTime";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = ExamTime;
            oBookmark = "ExamTime01";
            oDoc.Bookmarks.get_Item(ref oBookmark).Range.Text = ExamTime;
object saveFileName = "D:\\_Documents\\Form15\\" + "Form15 " + DepositNo.ToString() + "_" + randomInt.ToString() + ".docx";

            oDoc.SaveAs(ref saveFileName, ref oMissing, ref oMissing,
            ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
            ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
            ref oMissing, ref oMissing, ref oMissing); 
```

知道我正在研究：Visual Studios C# 2010 和 Microsoft .NET Framework 4.0 在服务器上是：Visual Studio C# 2005，MS Framework 2.0

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:45:25.467

您的问题的临时解决方案是安装 Microsoft Word（确保在安装过程中选择 .NET Programmability Support 组件）并以运行 Web 应用程序的用户身份运行该应用程序至少一次。该用户需要是具有桌面的交互式用户。

请注意，如果要使其自动化，则需要安装 Office - 您可能部署的互操作程序集只是一个包装器，不包含实际代码。

但是，请记住，Microsoft Office 应用程序的非交互式自动化很棘手，并且不受 Microsoft 官方支持。它需要比您在 MSDN 中的自动化示例中找到的更多代码才能使事情变得可靠和稳定。诸如创建交互式桌面、维护单词实例或考虑阻止弹出消息之类的事情都需要在您的代码中明确实现。

一个更好的选择是使用 Open XML SDK 创建文档（尽管应该知道在当前 SDK 版本中生成不是线程安全的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:52:18.840

这是您在 Web 服务器中使用的用户帐户的问题，您必须更改它：

```
//
// MessageId: CO_E_RUNAS_LOGON_FAILURE
//
// MessageText:
//
// The server process could not be started because the configured identity 
// is incorrect. Check the username and password.
//
#define CO_E_RUNAS_LOGON_FAILURE         _HRESULT_TYPEDEF_(0x8000401AL) 
```

请注意，Microsoft**强烈**反对在 Web 服务器上使用 Office 程序。您将为访问您的网页的每个用户创建一个 Word 实例。Word 是一个*繁重*的过程，旨在仅在个人工作站上使用。即使在那里，它也像一个单例进程一样阻止用户启动多个 Word 实例。这在像您这样的互操作场景中不起作用。在您的服务器因大量 Word 副本强加的庞大系统需求而崩溃之前，只需少量访问者即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:03:06.213

[检查 dcomcnfg](http://classicasp.aspfaq.com/components/why-do-i-get-8000401a-errors.html)以查看它是否设置为“交互式用户”。

# php - 如何从重复字符串中提取子字符串？

> ID：14579605
> 
> 赞同：0
> 
> 时间：2013-01-29T09:31:23.067
> 
> 标签：php, string, string-formatting

我有一个特定的问题。我在 PHP 中以字符串格式检索数据。我必须从字符串中分离出特定的值。我的字符串看起来像这样

```
Barcode formatQR_CODEParsed Result TypeURIParsed Resulthttp://www.myurl.co.uk var ga.

Barcode formatQR_CODEParsed Result TypeTEXTParsed ResultMy Coat var ga. 
```

从上面两个例子可以看出，“Barcode formatQR_CODEParsed Result Type”和“Parsed Result”后面的文字发生了变化。我已经尝试过 strstr 函数，但它没有给我想要的输出，因为“解析结果”这个词重复了两次。我怎样才能提取将在这些之后出现的任何值/文本？如何将它们分开？如果有人可以，我将不胜感激指导我是新蜜蜂。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:33:29.260

I have found the solution .We can extract strings this way:

```
<?
  $mycode='Barcode formatQR_CODEParsed Result TypeURIParsed Resulthttp://www.myurl.co.uk var ga';
   $needle = 'Parsed Result';
   $chunk=explode($needle,$mycode);                                                            

  $mychunky= $chunk[2];

        $needle = 'var ga';
 $result = substr($mychunky, 0, strpos($mychunky, $needle));

 print($result);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:33:57.773

最快的方法是解析这段 HTML 代码`SimpleXML`并获取`<b>`孩子的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:43:08.607

这应该适合你。您也可以进一步扩展这个想法并根据自己的需要进行开发。

```
$string = "Barcode formatQR_CODEParsed Result TypeURIParsed Resulthttp://www.myurl.co.uk var ga." ;
$matches = array() ;
$pattern = "/Type([A-Z]+)Parsed Result([^>]+) var ga./" ;

preg_match($pattern, $string, $matches) ; // Returns boolean, but we need matches. 
```

然后得到出现：

```
$matches[0] ; // The whole occurence
$matches[1] ; // Type - "([A-Z]+)"
$matches[2] ; // Result - "([^>]+)" 
```

因此，您分别使用索引为 1 和 2 的元素作为 Type 和 Result。希望它可以提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T09:37:29.963

只需遍历字符串，直到找到第一个区别。不应该有问题吗？

```
$str1 = "Hello World";
$str2 = "Hello Earth";

for($i=0; $<min(strlen($str1),strlen($str2)); $i++){
   if ($str1[$i] != $str2[$i]){
       echo "Difference starting at pos $i";
   }
} 
```

或类似的东西。然后您可以使用 substr 删除相等的部分。

编辑：如果您的字符串始终具有相同的模式，其中包含的值`<b>`可以完美地使用正则表达式来获取值。

# c++ - 如何配置 Eclipse/CDT/C++ 格式化程序以不在函数返回类型和函数名称之间换行

> ID：14579607
> 
> 赞同：1
> 
> 时间：2013-01-29T09:31:30.153
> 
> 标签：c++, eclipse, eclipse-cdt, formatter

我将 Eclipse/CDT 用于我的 C++ 项目。我真的很喜欢 C++ 格式化程序，但是我找不到它的一个设置（窗口->首选项->C/C++->代码样式->格式化程序）。格式化程序总是在函数返回类型和函数名称之间放置一个换行符。例如，它更改了以下代码：

```
void f()
{
} 
```

至：

```
void 
f()
{
} 
```

有没有办法避免抑制这个换行符？

注意：我在 Linux 上使用 Eclipse Juno SR1 和 CDT 8.1.1。

# android - 这是使用 Web 服务在 Android 中订阅的正确方法吗？

> ID：14579608
> 
> 赞同：1
> 
> 时间：2013-01-29T09:31:32.960
> 
> 标签：android, in-app-billing, subscription, google-play-services

我有一个连接到网络服务的应用程序。我已经在我的应用程序中实现了订阅，但我不确定这是否是正确的方法。这就是我正在做的事情。

1.  我正在`REQUEST_PURCHASE`使用正确的 id 和类型。
2.  Google Play 将以 async 响应`IN_APP_NOTIFY`。
3.  我打电话询问`GET_PURCHASE_INFORMATION`购买信息。
4.  我从回复中得到`purchaseToken`其他细节。`PURCHASE_STATE_CHANGED`我将它们存储在本地数据库中。
5.  我发送`CONFIRM_NOTIFICATION`以确认我已收到`purchaseToken`.
6.  现在我检查我的本地数据库并获取`purchaseToken`并将其发送到我的网络服务器，该服务器将使用 Google Developer Android API 来验证购买并解锁订阅内容。当我的服务器告诉应用程序它已经过验证时，我将它从我的数据库中删除。

在每次启动应用程序时，我都会检查我的本地数据库是否有一些条目，如果有，我会尝试通过再次调用我的网络服务器来验证它。

我怀疑第六步。我想我应该先与我的服务器确认，然后执行第 5 步。

当我可以使用 Web 服务时，这里的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T05:22:37.627

由于很长一段时间没有答案，我决定自己写。

V2 应用内计费 API 非常复杂。V3 API 可供订阅，强烈建议使用它。API 的实现非常简单。

据我所见，与一次性购买相比，人们对订阅更加犹豫。所以我转向一次性购买模式，只有一个计划在购买时提供一年的专业功能，之后他们可以再次续订。

流程现在很简单。

*   请求购买。
*   返回成功后，显示一条消息，例如“激活专业功能可能需要几分钟”
*   消费购买。
*   将 purchaseToken 存储在本地缓存中。
*   在后台与服务器验证。
*   解锁专业功能。

# c++ - SFML 中的 2D 水着色器

> ID：14579610
> 
> 赞同：4
> 
> 时间：2013-01-29T09:31:39.713
> 
> 标签：c++, glsl, sfml

[我想实现此处](http://www.gamedev.net/page/resources/_/technical/graphics-programming-and-theory/the-water-effect-explained-r915)和[此处](http://freespace.virgin.net/hugo.elias/graphics/x_water.htm)描述的 2D 水面算法。

但是，我不想使用两个 int 数组并在 CPU 上进行计算，而是使用 SFML `sf::RenderTexture`（基本上是 FBO）和 GLSL 着色器在 GPU 上运行所有内容。我想使用 SFML，因为它非常简单，而且我以前也使用过它，所以我对它有一点了解。

到目前为止，我已经取得了一些不错的进展。我能够在它们之间正确设置 3`sf::RenderTextures`和乒乓球（因为除了 int 数组之外，您不能同时读取和写入相同`sf::RenderTexture`的数组）。我还能够将高度场创建形式的算法调整为 -32.767 到 32.767 范围内的范围 0 到 1（或者更精确地计算 -0.5 到 0.5）。也增加新的涟漪在一定程度上起作用。所以到目前为止，您实际上可以看到一些波浪正在发生。

现在我的问题来了：波浪消失得非常非常快，我什至还没有应用任何阻尼。根据算法，如果没有应用阻尼，波纹不会停止。甚至反过来。如果我应用“放大”，波浪看起来很接近您期望它们看起来的样子（但它们仍然会在没有施加任何阻尼的情况下消失）。我的第一个想法是，因为我使用 0 - 1 范围内的浮点数而不是整数，但我只在使用乘法时才看到这是一个问题，但我只使用加法和减法。

这是我的 SFML C++ 代码：

```
#include <SFML/Graphics.hpp>
#include <iostream>

int main()
{
    sf::RenderWindow window(sf::VideoMode(1000, 1000), "SFML works!");
    window.setFramerateLimit(12);

    sf::RenderTexture buffers[3];
    buffers[0].create(500, 500);
    buffers[1].create(500, 500);
    buffers[2].create(500, 500);
    sf::RenderTexture* firstBuffer = buffers;
    sf::RenderTexture* secondBuffer = &buffers[1];
    sf::RenderTexture* finalBuffer = &buffers[2];

    firstBuffer->clear(sf::Color(128, 128, 128));
    secondBuffer->clear(sf::Color(128, 128, 128));
    finalBuffer->clear(sf::Color(128, 128, 128));

    sf::Shader waterHeightmapShader;
    waterHeightmapShader.loadFromFile("waterHeightmapShader.glsl", sf::Shader::Fragment);

    sf::Sprite spritefirst;
    spritefirst.setPosition(0, 0);
    spritefirst.setTexture(firstBuffer->getTexture());

    sf::Sprite spritesecond;
    spritesecond.setPosition(500, 0);
    spritesecond.setTexture(secondBuffer->getTexture());

    sf::Sprite spritefinal;
    spritefinal.setPosition(0, 500);
    spritefinal.setTexture(finalBuffer->getTexture());

    while (window.isOpen())
    {
        sf::Event event;
        while (window.pollEvent(event))
        {
            if(event.type == sf::Event::Closed)
                window.close();

            if(event.type == sf::Event::KeyReleased && event.key.code == sf::Keyboard::Escape)
                window.close();
        }

        waterHeightmapShader.setParameter("mousePosition", sf::Vector2f(-1.f, -1.f));
        // if mouse button is pressed add new ripples
        if(sf::Mouse::isButtonPressed(sf::Mouse::Left))
        {
            sf::Vector2i mousePosition = sf::Mouse::getPosition(window);
            if(mousePosition.x < 500 && mousePosition.y < 500)
            {
                sf::Vector2f mouse(mousePosition);

                mouse.x /= 500.f;
                mouse.y /= 500.f;

                mouse.y = 1 - mouse.y;

                std::cout << mouse.x << " " << mouse.y << std::endl;

                waterHeightmapShader.setParameter("mousePosition", mouse);
            }
        }

        waterHeightmapShader.setParameter("textureTwoFramesAgo", firstBuffer->getTexture());
        waterHeightmapShader.setParameter("textureOneFrameAgo", secondBuffer->getTexture());

        // create the heightmap
        secondBuffer->display();
        finalBuffer->clear(sf::Color(128, 128, 128));
        finalBuffer->draw(sf::Sprite(secondBuffer->getTexture()), &waterHeightmapShader);
        finalBuffer->display();

        spritefirst.setTexture(firstBuffer->getTexture());
        spritesecond.setTexture(secondBuffer->getTexture());
        spritefinal.setTexture(finalBuffer->getTexture());

        window.clear();
        window.draw(spritefirst);
        window.draw(spritesecond);
        window.draw(spritefinal);
        window.display();

        // swap the buffers around, first becomes second, second becomes third and third becomes first
        sf::RenderTexture* swapper = firstBuffer;
        firstBuffer = secondBuffer;
        secondBuffer = finalBuffer;
        finalBuffer = swapper;
    }

    return 0;
} 
```

这是我的 GLSL 着色器代码：

```
uniform sampler2D textureTwoFramesAgo;
uniform sampler2D textureOneFrameAgo;
uniform vec2 mousePosition;

const float textureSize = 500.0;
const float pixelSize = 1.0 / textureSize;

void main()
{
    // pixels position
    vec2 position = gl_TexCoord[0].st;

    vec4 finalColor = ((texture2D(textureOneFrameAgo, vec2(position.x - pixelSize, position.y)) +
                        texture2D(textureOneFrameAgo, vec2(position.x + pixelSize, position.y)) +
                        texture2D(textureOneFrameAgo, vec2(position.x, position.y + pixelSize)) +
                        texture2D(textureOneFrameAgo, vec2(position.x, position.y - pixelSize)) - 2.0) / 2) -
                       (texture2D(textureTwoFramesAgo, position) - 0.5);

    // damping
//    finalColor.rgb *= 1.9;  // <---- uncomment this for the "amplifiction" ie. to see the waves better
    finalColor.rgb += 0.5;

    // add new ripples
    if(mousePosition.x > 0.0)
    {
        if(distance(position, mousePosition) < pixelSize * 5)
        {
            finalColor = vec4(0.9, 0.9, 0.9, 1.0);
        }
    }

    gl_FragColor = finalColor;

} 
```

请记住，这只是关于高度字段的创建。还没有水的阴影。

你知道为什么波浪会在没有阻尼的情况下自行消失吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:11:31.810

如果我正确阅读代码，您可以对纹理颜色/高度的前一帧进行采样，并使用四个相邻像素/纹素来确定当前像素的颜色/高度。

当您计算（缩放）这些邻居时，您可能会遇到缺少包含您正在寻找的颜色/高度的纹素。它可能不是最高的纹素，只是它旁边的纹素稍低一些，导致了意想不到的阻尼。

这是您**不仅仅**使用加法和减法的地方：

```
const float pixelSize = 1.0 / textureSize; 
```

通过使用这个值，你可能会错过你正在寻找的纹素。

**编辑**

另外：您正在对样本进行平均，因此结果将始终小于样本的最大值。因此，您可以选择最大值，而不是平均。这可能会产生奇怪的结果，但也会产生额外的洞察力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T06:42:48.630

以下是一些“处理”代码，它们实现了您在上面发布的相同算法，并且它的阻尼是正确的，希望您能从中得到一些要点：

```
// codes begin

int Width = 800;
int Height = 600;
int FullSize = 0;
//int Spacing = 10;

int[] source, dest;
PImage bg;

void setup()
{
  // if you want to run these codes by "Processing"
  // please make a picture named "HelloWorld.png"
  bg = loadImage("HelloWorld.png");
  Width = bg.width;
  Height = bg.height;
  FullSize = Width * Height;
  size(Width, Height);
  source = new int[FullSize];
  dest = new int[FullSize];
  for (int i=0; i< FullSize; i++)
    source[i] = dest[i] = 0;
}

void draw()
{
  for (int i=Width; i< FullSize-Width; i++)
  {
    // check for bounds
    int xi = i % Width;
    if ((xi==0) || (xi==Width-1)) continue;

    dest[i] = (
    ((source[i-1]+
      source[i+1]+
      source[i-Width]+
      source[i+Width]) >>1) ) -dest[i];

    int dampFactor = 1000;
    dest[i] -= (dest[i] >> dampFactor); // Damping - Quick divde by 32 (5 bits)
  }

  //image(bg, 0, 0);
  loadPixels();
  for (int i=Width; i< FullSize-Width; i++)
  {
    // check for bounds
    int xi = i % Width;
    if ((xi==0) || (xi==Width-1)) continue;

    int xoffset = dest[i-1] - dest[i+1];
    int yoffset = dest[i-Width] - dest[i+Width];

    int offset = i+xoffset+yoffset*Width;
    if (offset>0 && offset<FullSize)
    {
      // TODO: make better map
      pixels[i] = bg.pixels[offset];
    }
  }
  //bg.updatePixels();
  updatePixels();

  //swap
  int[] temp = source;
  source = dest;
  dest = temp;
}

void mouseDragged() 
{
    if (mouseX > 0 && mouseX < Width && mouseY > 0 && mouseY < Height)
      source[mouseY*Width+mouseX] = (int)random(50, 100); 
}

void mousePressed()
{
   // TODO: make a area pulse value, like a radius circle
   if (mouseX > 0 && mouseX < Width && mouseY > 0 && mouseY < Height)
      source[mouseY*Width+mouseX] = (int)random(50, 100); 
}

// codes end 
```

# jquery - JQuery 读取 URL 不会读取字母 A

> ID：14579611
> 
> 赞同：0
> 
> 时间：2013-01-29T09:31:52.007
> 
> 标签：jquery

我正在使用以下内容从 URL 中提取变量

```
$.urlParam = function(name){
var results = new RegExp('[\\?&amp;]' + name + '=([^&amp;#]*)').exec(window.location.href);
return results[1] || 0;
} 
```

这对数字很有效，但是，当我在字符串上尝试它时，它会停在字母 A

下面的 Ajax 调用

```
$.ajax({
        url: apiURL,
        dataType: 'json',
        data: {page: page, user_name:$.urlParam('user')},
        success: onLoadData
    }); 
```

示例网址：

```
http://mypage.com/pages/gf_profile?user=DaveSmith&items=show 
```

Firebug Inspector Shows（查看 user_name 变量）

```
GET http://mypage.com/wishAPIs/profileWLAllAPI.php?page=1&user_name=D 200 OK 253ms 
```

另一个示例 URL：

```
http://mypage.com/pages/gf_profile?user=HelenMajor&items=show 
```

Firebug 检查员显示

```
GET http://mypage.com/wishAPIs/profileWLAllAPI.php?page=1&user_name=HelenM 200 OK 253ms 
```

可以的示例 URL：

```
http://mypage.com/pages/gf_profile?user=MickBrown&items=show 
```

Firebug 检查员显示

```
GET http://mypage.com/wishAPIs/profileWLAllAPI.php?page=1&user_name=MickBrown 200 OK 202ms 
```

这很奇怪，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:42:02.280

尝试将正则表达式更改为

```
var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(url); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Q3cgD/3/)

# iphone - 删除后启动图像显示

> ID：14579612
> 
> 赞同：1
> 
> 时间：2013-01-29T09:31:57.873
> 
> 标签：iphone, xcode

我从启动图像选项中删除了启动图像。我仍然得到启动图像？我不知道它是从哪里加载的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:40:49.160

您应该更改图像的名称，默认保存为 Default.png，因为无论您是否自己添加图像名称，xcode 都会更改图像本身的名称。

正如 The Dude 建议的那样，如果您正在使用它并重新构建您的项目，请清理您的代码并重置您的模拟器，然后运行并查看。

# qt - 将 QWidget 与 QSetting 值相关联？

> ID：14579613
> 
> 赞同：1
> 
> 时间：2013-01-29T09:32:00.803
> 
> 标签：qt, qt4, qsettings

我有点累了

```
QSettings::beginGroup ("Some group");
QSettings::setValue ("Some fields", ui->lineEdit->text()); 
```

我的意思是，如果我可以指定 的`text`属性`ui->lineEdit`应该与“某些组/某些字段”设置相关联，我可以保存所有这些行。**还有负载设置部分。**

所以我想知道是否有一些简单的框架可以直接将小部件属性与一些 QSettings 字段相关联？

如果没有，推荐的实施方式是什么？

# android - 在 TabHost 中以编程方式关闭/隐藏键盘？

> ID：14579615
> 
> 赞同：0
> 
> 时间：2013-01-29T09:32:09.023
> 
> 标签：android, android-tabhost, android-softkeyboard

我目前正在开发一个 Android 应用程序，当您第一次加载此应用程序时，它使用 TabHost 来显示应用程序的各种视图（活动）。因此，当它加载时，它有一个视图，用户可以在其中输入一个数字，以便自动显示软键盘。

起初我假设当用户转到应用程序中的其他选项卡时，如果没有 EditText 字段，键盘会消失，但是键盘仍然存在并从数字键盘切换到标准文本键盘，关闭它的唯一方法是单击设备上的后退按钮。这不是用户友好的，也不是我想要的，因为当用户切换到另一个选项卡时键盘应该关闭。

我已经创建了下面的代码，如果它当前在屏幕上打开，它应该关闭键盘。

```
private OnTabChangeListener MyOnTabChangeListener = new OnTabChangeListener(){
        @Override

            public void onTabChanged(String tabId) {
            Log.d("TAG", "I am Inside the Tab Changed Function!!");
                if(getTabHost().getCurrentTabTag().equals("SecondTab")) {
                    Log.d("TAG", "I am Inside the SecondTab Section!!");

                    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE); 
                    if(imm != null)
                    { 
                        Log.d("TAG", "I am Inside the SecondTab imm null!!");
                        imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
                    }

                }
                if(getTabHost().getCurrentTabTag().equals("FirstTab")) {
                    Log.d("TAG", "I am Inside the FirstTab Section!!");

                    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE); 
                    if(imm != null)
                    { 
                        Log.d("TAG", "I am Inside the FirstTab imm null!!");
                        imm.toggleSoftInput(0, InputMethodManager.SHOW_IMPLICIT); 
                    } 

                }
            }

    }; 
```

上面的代码确实像我转到第二个选项卡并且键盘在第一个选项卡上打开一样工作，它将被关闭，但是如果我然后去说第三个选项卡然后返回到第二个选项卡它会重新打开键盘我不想要，因为我只需要第一个选项卡上的键盘。

任何人都可以帮我解决这个问题，因为我不敢相信仅仅控制软键盘就这么难。

提前致谢

编辑....

我什至尝试在 SecondTab 点击监听器中使用下面的代码，但没有成功：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE); 
                    if(imm != null)
                    { 
                        Log.d("TAG", "I am Inside the SecondTab imm null!!");
                        imm.toggleSoftInput(0, InputMethodManager.HIDE_IMPLICIT_ONLY); 
                    } 
```

编辑 2……

我很欣赏下面的第一个响应，但是我尝试将其添加到活动本身，但由于某种原因它不起作用：SI 也尝试了许多不同的东西，但没有运气我什至将以下内容添加到我的清单文件中，但这没有令人费解的工作：s

```
android:windowSoftInputMode="stateHidden" 
```

那应该有效，但没有，这真的很烦人。我的清单文件的一部分如下：

```
 <application
        android:allowBackup="true"
        android:icon="@drawable/logo"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".TabActivityTop"
            android:label="@string/app_name" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="Tab1" android:screenOrientation="portrait"></activity>
        <activity android:name="Tab2" android:screenOrientation="portrait" android:windowSoftInputMode="stateHidden"></activity>
        <activity android:name="Tab3" android:screenOrientation="portrait"></activity>
        <activity android:name="Tab4" android:screenOrientation="portrait" android:windowSoftInputMode="stateHidden"></activity>
    </application> 
```

如果有帮助，我还在下面包含了我的完整 TabActivityTop.java 文件：

```
import android.app.TabActivity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.inputmethod.InputMethodManager;
import android.widget.TabHost;
import android.widget.TabHost.OnTabChangeListener;
import android.widget.TabHost.TabSpec;

public class TabActivityTop extends TabActivity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();

        TabSpec tab1spec = tabHost.newTabSpec("Tab1");
        tab1spec.setIndicator("", getResources().getDrawable(R.drawable.icon_tab1_tab));
        Intent tab1Intent = new Intent(this, tab1.class);
        tab1spec.setContent(tab1Intent);

        TabSpec tab2spec = tabHost.newTabSpec("");
        tab2spec.setIndicator("", getResources().getDrawable(R.drawable.icon_tab2_tab));
        Intent tab2Intent = new Intent(this, tab2.class);
        tab2spec.setContent(tab2Intent);

        TabSpec tab3spec = tabHost.newTabSpec("");
        tab3spec.setIndicator("", getResources().getDrawable(R.drawable.icon_tab3_tab));
        Intent tab3Intent = new Intent(this, tab3.class);
        tab3spec.setContent(tab3Intent);

        TabSpec tab4spec = tabHost.newTabSpec("Tab4");
        tab4spec.setIndicator("", getResources().getDrawable(R.drawable.icon_tab4_tab));
        Intent tab4Intent = new Intent(this, tab4.class);
        tab4spec.setContent(tab4Intent);

        tabHost.setOnTabChangedListener(MyOnTabChangeListener);

        // Adding all TabSpec to TabHost
        tabHost.addTab(tab1);
        tabHost.addTab(tab2);
        tabHost.addTab(tab3);
        tabHost.addTab(tab4);
    }

    private OnTabChangeListener MyOnTabChangeListener = new OnTabChangeListener(){
        @Override

            public void onTabChanged(String tabId) {
            Log.d("TAG", "I am Inside the Tab Changed Function!!");
                if(getTabHost().getCurrentTabTag().equals("contact")) {
                    Log.d("TAG", "I am Inside the Tab4 Section!!");

                    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE); 
                    if(imm != null)
                    { 
                        Log.d("TAG", "I am Inside the imm null!!");
                        imm.toggleSoftInput(0, InputMethodManager.HIDE_IMPLICIT_ONLY); 
                    }

                }
                if(getTabHost().getCurrentTabTag().equals("Tab1")) {
                    Log.d("TAG", "I am Inside the Tab1 Section!!");
                }
            }

    };

} 
```

我真的希望有人可以帮我解决这个问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:43:18.737

试试这样：

```
 InputMethodManager inputMethodManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
 inputMethodManager.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

或尝试使用：

```
 rootLayout.requestFocus(); 
```

# java - 如何在循环中创建多个工作表并使用java和poi将相应的结果集添加到excel中的工作表

> ID：14579616
> 
> 赞同：-2
> 
> 时间：2013-01-29T09:32:10.013
> 
> 标签：java, sql-server, apache-poi

我在 ms sql server 中有一个表，其中包含如下数据：

col1 col2

123 天

第456章

第789章

450 天

我必须使用 java 和 poi 将结果集写入 ms excel。我必须按名称 dsk 和 mrk 创建工作表，并将各自的结果集添加到各自的工作表中。我能够成功编写结果集，但所有数据都只在一张纸下。这个怎么做？（可能正在使用 for 或 while 或.. 循环）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:41:17.103

*   遍历您的初始工作表 col2 值
*   对于每个 col2 值调用 WorkBook`createSheet(col2_value)`

# javascript - 比较 2objects (JavaScript, jQuery)

> ID：14579617
> 
> 赞同：0
> 
> 时间：2013-01-29T09:32:10.933
> 
> 标签：javascript, jquery, object, compare

> **可能重复：**
> [如何确定两个 JavaScript 对象的相等性？](https://stackoverflow.com/questions/201183/how-do-you-determine-equality-for-two-javascript-objects)

如果它们相同，是否有一种简单的方法可以比较所有属性的 2 个单独的自定义对象？

例子：

```
 var obj1 = {
    a: 1,
    b: 1,
    c: 1
    };

    var obj2 = {
    c: 1,
    b: 1,
    a: 1
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:38:35.437

也许这样的事情会起作用：

```
function compareObject(o1, o2){
    for(var p in o1){
        if(o1[p] !== o2[p]){
            return false;
        }
    }
    for(var p in o2){
        if(o1[p] !== o2[p]){
            return false;
        }
    }
    return true;
} 
```

# zeromq - ZeroMQ 上的跨平台 FileMQ 入门

> ID：14579627
> 
> 赞同：2
> 
> 时间：2013-01-29T09:32:43.207
> 
> 标签：zeromq, filemq

任何人都可以推荐一些好的资源来在跨平台设置中开始使用 FileMQ 和 ZeroMQ 吗？

我正在寻找教程或指南或 shellscripts 以某种方式告诉我如何将它们联系在一起。不幸的是，尽管声明是跨平台的，但我无法使其在 Windows 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:14:51.333

我认为 FileMQ 项目包含 MSVC 项目文件。否则，请尝试通过电子邮件发送 zeromq-dev 列表并询问是否有人这样做。

# android - android.os.Service 上下文中的 Robospice

> ID：14579629
> 
> 赞同：5
> 
> 时间：2013-01-29T09:32:52.010
> 
> 标签：android, service, robospice

根据 RoboSpice 文档[https://github.com/octo-online/robospice/wiki/Design-of-RoboSpice](https://github.com/octo-online/robospice/wiki/Design-of-RoboSpice)，我可以在任何上下文中使用它。

找不到在服务上下文中使用 Robospice 的示例。我做了一些尝试，但什么也没发生，请求只是没有执行，没有异常（可能有一些日志泄漏，我需要做什么才能在设备上启用 robospice 日志？）

1.  从哪里开始/停止它？(spiceManager.start(this) / spiceManager.shouldStop())
2.  在哪里创建 SpiceManager 实例？（我的服务从 application.onCreate() 方法开始，也许我必须等待一些 SpiceService 初始化？）

一些代码

```
public abstract class SpicyService extends Service {

    private SpiceManager spiceManager = new SpiceManager(SpiceService.class);

    @Override
    public void onCreate() {
        super.onCreate();
        spiceManager.start(this);
    }

    @Override
    public void onDestroy() {
        spiceManager.shouldStop();
        super.onDestroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:30:45.880

惭愧我...

喝了一些咖啡后，我发现了那个子服务，没有调用 super.onCreate() 来启动 spiceManager。

它现在工作得很好！对不起你的时间。

# com - 强制关闭 COM 服务器时如何避免出现警报对话框

> ID：14579638
> 
> 赞同：0
> 
> 时间：2013-01-29T09:33:20.897
> 
> 标签：com, ole

我有一个用 CBuilder-xe 编写的组 o 程序，所有程序都具有 COM 接口，以便由服务调用，使它们保持活动状态并最终在它们死亡时重新启动它们。服务使用标准的 CreateObject 方法调用模块，如下所示

```
varServerCom = varServerCom.CreateObject(progid); 
```

所有这些都有效，但我发现了一个阻塞问题。

我假设，为了简单起见，我有一个名为 MGR 的服务程序，它调用一个名为 SRVCOM1 的服务 com 程序。

当，对于一些关键问题，服务器程序 SRVCOM1 想要关闭自己时，它会阻止关闭它，因为 Windows 会发送一个警报对话框警告我正在关闭一个打开了 com 引用的程序，并询问我是否真的要关闭服务器程序。

如果该程序在后台运行，则对话框将程序无限期挂起。我想跳过这个对话框以避免程序挂起。是否可以告诉 windows 或服务器 com 接受总是强制关闭服务器程序？

# web-services - 范围的组合复杂过滤器

> ID：14579639
> 
> 赞同：15
> 
> 时间：2013-01-29T09:33:22.467
> 
> 标签：web-services, magento, soap

在 Magento 1.7 SOAP APIv2 上，我正在寻找一种方法来获取日期范围以从 SOAP API 检索信息。

```
$complexFilter = new filters();
$complexFilter->complex_filter = array(
    array(
        'key' => 'created_at',
        'value' => array('key' => 'from', 'value' => '2012-12-17 00:00:00')
    ), 
    array(
        'key' => 'created_at',
        'value' => array('key' => 'to', 'value' => '2013-01-21 12:02:02')
    ), 
); 
```

这似乎是最自然的方法，但只使用了最后一个标准。我还尝试了其他组合，例如复杂过滤器的复杂过滤器，组合它们的不同方式，使用`gt`and alike 代替`from`and co。这些方法中的大多数都产生了相同的结果：只使用里面的最后一个标准。

通过 API 获取日期范围的正确方法是什么？这也可以通过常规过滤器完成吗？如果是这样，如何结合开始和结束日期？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-04-04T22:25:50.377

我找到了一种更好的方式来查看 Magento 中的代码！幸运的是它是区分大小写的，所以：

```
$complexFilter->complex_filter = array(
    array(
        'key' => 'CREATED_AT',
        'value' => array('key' => 'from', 'value' => '2012-12-17 00:00:00')
    ), 
    array(
        'key' => 'created_at',
        'value' => array('key' => 'to', 'value' => '2013-01-21 12:02:02')
    ), 
); 
```

把戏做得很漂亮！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T13:50:28.940

在谷歌搜索了很多之后，我终于得到[了一些解释](http://www.sophomoredev.com/2012/07/hacking-a-stubborn-api/)。

显然，复杂过滤器的实现不允许存在一个以上的属性。这也是我在测试期间注意到的：只有最后使用的属性会影响结果。因此，我需要找到另一种方式来做我想做的事。看到 Magento 没有提供使用 SOAP API 执行此操作的简单方法，这有点令人遗憾。

我现在使用的最后一种方法是确定最接近我想要的日期。然后只需遍历我想要的日期范围内的结果。这样（至少使用我们的产品数据），我将负载和结果保持在最低限度，并且仍然可以获得所需的产品。

***编辑****似乎原始链接已关闭，并且该站点不再存在。上面的文字应该是足够的信息。该博客仅显示了一些具有错误实现的代码示例。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T23:15:17.647

似乎是 mag\sales\order\api\v2.php 中的一个错误

Matlock 在此线程的评论部分为此提供了一个可能的解决方案：http: [//www.magentocommerce.com/bug-tracking/issue? issue=8073](http://www.magentocommerce.com/bug-tracking/issue?issue=8073)

# php - 使用php显示多个sql查询结果

> ID：14579640
> 
> 赞同：0
> 
> 时间：2013-01-29T09:33:30.597
> 
> 标签：php, sql

好的，所以我已经搜索和搜索，但仍在努力解决我的问题。这是我当前的 php 编码：

```
$show = "Select effectiveness, round((Count(effectiveness)* 100 / (Select Count(*) From acupuncture))) as Score
From acupuncture
Group By effectiveness
ORDER BY Score DESC";
$result = mysql_query ($show);

WHILE($show = mysql_fetch_array($result))
{
$field1 = $show[effectiveness];
$field2 = $show[Score];

echo "$field1: ";
echo "$field2%<br><br>";
} 
```

除了显示上述内容之外，我还希望显示表格中的行数。我知道sql代码是：

```
"SELECT COUNT(id) AS entries FROM acupuncture" 
```

问题是当我尝试将其输入到我的 php 页面时，我不断收到错误。我想在一个 php 页面上显示两个 SELECT 语句结果。如果有人可以提供帮助，我将不胜感激。

谢谢希克兹

一切顺利，问题已解决。感谢您的所有帮助 :) PS 这是我输入的代码：

```
$size = @mysql_query("SELECT COUNT(*) AS `total` FROM acupuncture");
$query = mysql_fetch_array($size);
echo "Number of entries: ";
echo $query['total'];
echo "<br><br>"; 
```

我之前错误地编写了php代码，但现在一切都很好。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:38:44.910

尝试这个：

```
while($show = mysql_fetch_assoc($result))
{
  $field1 = $show['effectiveness'];
  $field2 = $show['Score'];

  echo "$field1: ";
  echo "$field2%<br/><br/>";
} 
```

[计算在这里](http://www.justincarmony.com/blog/2008/07/01/mysql-php-sql_calc_found_rows-an-easy-way-to-get-the-total-number-of-rows-regardless-of-limit/)找到的所有行

**小提示：**

*   请停止使用 mysql，它已被[弃用](http://php.net/manual/en/function.mysql-connect.php)。
*   请改用[mysqli](http://php.net/manual/en/mysqli.construct.php)或[PDO](http://php.net/manual/en/pdo.construct.php)。
*   使用字符串索引数组时始终使用[引号](http://php.net/manual/en/language.types.array.php#language.types.array.donts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:38:38.080

做出改变

```
WHILE($show = mysql_fetch_array($result))
{
   $field1 = $show[effectiveness];
   $field2 = $show[Score];

   echo "$field1: ";
   echo "$field2%<br><br>";
} 
```

至

```
WHILE($row= mysql_fetch_array($result))
{
   $field1 = $row[effectiveness];
   $field2 = $row[Score];

   echo "$field1: ";
   echo "$field2%<br><br>";
} 
```

# android - 使用 MediaRecorder 和 FileOutputStream 录制视频会产生无法播放的视频文件

> ID：14579643
> 
> 赞同：7
> 
> 时间：2013-01-29T09:33:33.583
> 
> 标签：android, file-descriptor, mediarecorder, fileoutputstream

我正在尝试实现可以​​多次启动和停止视频录制并将视频数据累积到`File`.

**这就是我准备媒体记录器的方式：**

```
private boolean prepareVideoRecorder(){
    mMediaRecorder = new MediaRecorder();

    //0 for landscape
    //90 for portrait

    //Check for available profile
    CamcorderProfile profile = null;
    if(CamcorderProfile.hasProfile(CamcorderProfile.QUALITY_480P)){
        Log.d(TAG, "480p");
        profile = CamcorderProfile.get(CamcorderProfile.QUALITY_480P);
    }else if(CamcorderProfile.hasProfile(CamcorderProfile.QUALITY_720P)){
        Log.d(TAG, "720p");
        profile = CamcorderProfile.get(CamcorderProfile.QUALITY_720P);
    }else{
        Log.d(TAG, "LOW");
        profile = CamcorderProfile.get(CamcorderProfile.QUALITY_LOW);
    }

    // Step 1: Unlock and set camera to MediaRecorder
    mCamera.unlock();
    mMediaRecorder.setCamera(mCamera);

    // Step 2: Set sources
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

    // Step 3: Set profile
    mMediaRecorder.setProfile(profile);

    // Step 4: Set output file and pass media recorder the file descriptor
    if(mStoreFile == null){
        mStoreFile = MediaUtil.getOutputMediaFile(MediaUtil.MEDIA_TYPE_VIDEO);
        try {
            mStoreFile.createNewFile();
        } catch (Exception e) {  
            e.printStackTrace();
        }
    }

    try {
        mOutputStream = new FileOutputStream(mStoreFile, true);
        mMediaRecorder.setOutputFile(mOutputStream.getFD());
    } catch (Exception e1) {
        e1.printStackTrace();
    }

    mMediaRecorder.setMaxDuration(30000);

    // Step 5: Set the preview output
    mMediaRecorder.setPreviewDisplay(mPreviewSurface.getHolder().getSurface());

    //Check orientation and set hint
    switch(mOrientation){
    case ORIENTATION_PORTRAIT_NORMAL:
        mMediaRecorder.setOrientationHint(90); 
        break;
    case ORIENTATION_PORTRAIT_INVERTED:
        mMediaRecorder.setOrientationHint(270); 
        break;
    case ORIENTATION_LANDSCAPE_NORMAL:
        mMediaRecorder.setOrientationHint(0); 
        break;
    case ORIENTATION_LANDSCAPE_INVERTED:
        mMediaRecorder.setOrientationHint(180); 
        break;
    }

    // Step 6: Prepare configured MediaRecorder
    try {
        mMediaRecorder.prepare();
    } catch (IllegalStateException e) {
        Log.d(TAG, "IllegalStateException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    } catch (IOException e) {
        Log.d(TAG, "IOException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    }
    return true;
} 
```

**这是点击代码上的按钮：**

```
@Override
        public void onClick(View v) {
            if (isRecording) {
                try{
                    mOutputStream.close();
                }catch(Exception ee){
                }

                // stop recording and release camera
                mMediaRecorder.stop();  // stop the recording

                mMediaRecorder.reset();
                mCamera.lock();         // take camera access back from MediaRecorder

                // inform the user that recording has stopped
                mRecordButton.setImageResource(R.drawable.record_button);
                isRecording = false;

            } else {
                // initialize video camera
                if (prepareVideoRecorder()) {
                    // Camera is available and unlocked, MediaRecorder is prepared,
                    // now you can start recording
                    mMediaRecorder.start();

                    // inform the user that recording has started
                    mRecordButton.setImageResource(R.drawable.record_button_on);
                    isRecording = true;
                } else {
                    // prepare didn't work, release the camera
                    releaseMediaRecorder();
                    // inform user
                }
            }
        }
    }); 
```

`MediaUtil.getOutputMediaFile(MediaUtil.MEDIA_TYPE_VIDEO)`会给我类似的东西：/storage/sdcard0/Pictures/Project/VID_2013.mp4

**当前问题：**

我目前测试它的方式是：

1.  开始录制
2.  停止录制
3.  开始录制
4.  停止录制
5.  转到 /Pictures/Project 路径上的 android 文件管理器
6.  我可以看到创建并“附加”了多个数据段的文件。但它不会播放。而且它没有像其他视频文件那样的封面图像。

在某处，文件已损坏？如果我只记录一次并检查存储中的文件，它就不行了。如果我只`File`为`MediaRecorder`in定义一个，我可以录制视频`setOutputFile`，但我正在尝试为多次拍摄附加视频数据。这可能吗？

# objective-c - Objectivec 试图从正则表达式中提取字符串组

> ID：14579644
> 
> 赞同：0
> 
> 时间：2013-01-29T09:33:44.030
> 
> 标签：objective-c, regex

我尝试从字符串中提取简单的字符串但没有成功，它看起来很简单，但结果总是因为
这里的字符串是我所拥有的：

```
-(NSString*) ExtractArtistNameFromString:(NSString*) line
{

    NSString* substringForMatch = @""   
    NSError *error = NULL;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\d+\\s+(.*)"
                                                                        options:NSRegularExpressionCaseInsensitive
                                                                        error:&error];

    if (error) {
        NSLog(@"Error:%@", error);  
    }

    NSArray *matches = [regex matchesInString:line
                                              options:0
                                              range:NSMakeRange(0, [line length])]; 

    NSUInteger elements = [matches count];
    NSLog(@"numberOfMatches:%u",elements);

    if(elements > 0)
    {

        for(NSTextCheckingResult *match in matches)
        {
            NSString* substringForMatch = [line substringWithRange:match.range];
            NSUInteger slen = [substringForMatch length];
            NSLog(@"Extracted  : %@",substringForMatch);
            NSLog(@"%u",slen);
            NSLog(@"%@",substringForMatch);
        }        
    }
    return substringForMatch;
} 
```

输入字符串是：

> 1 巴索蒂，马塞尔

我试图提取的是名字：**Barsotti，Marcel**

当我运行应用程序时，我得到了这个结果：

```
2013-01-29 11:31:24.056 file_parser[2496] numberOfMatches:1
2013-01-29 11:31:24.062 file_parser[2496] Extracted  : 1        Barsotti, Marcel
2013-01-29 11:31:24.064 file_parser[2496] 18
2013-01-29 11:31:24.066 file_parser[2496] 1     Barsotti, Marcel 
```

我在 windows 中使用 GNUsetup，make 命令是：

> 使 CC=clang

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:16:52.997

我明白你想做什么。[NSTextCheckingResult](https://developer.apple.com/library/ios/#documentation/AppKit/Reference/NSTextCheckingResult_Class/Reference/Reference.html)的文档显示结果中可以有多个范围，但您只引用第一个范围。

例如，您的 RegEx 和您的字符串将有 1 个匹配项，其中包含 1 个捕获组。这些是：

1.  1 巴索蒂，马塞尔
2.  巴索蒂，马塞尔

虽然您只有一个`NSTextCheckingResult`，但其中有多个范围。你正在使用

```
NSString* substringForMatch = [line substringWithRange:match.range]; 
```

这将返回上面列出的第一个结果。你想要的是第二个。为了得到这个，你需要使用

```
NSString* substringForMatch = [line substringWithRange:[match rangeAtIndex:1]]; 
```

为确保您不超过`rangeAtIndex:`，该属性的`numberOfRanges`存在是为了让您保持在范围内。请记住，`[match rangeAtIndex:0]`在`match.range`.

# c# - 可观察集合 > 绑定到列表框

> ID：14579645
> 
> 赞同：0
> 
> 时间：2013-01-29T09:33:47.380
> 
> 标签：c#, windows-phone-8, observablecollection

```
 ObservableCollection<IDictionary<String, String>> ItemsSer = new ObservableCollection<IDictionary<String, String>>();

    foreach (XElement camposSer in document.Root.Elements("pm_venofer"))
    {
        Dictionary<String, String> Servicios = new Dictionary<String, String>();

            foreach (XElement columSer in document.Root.Element("columns").Elements("column"))
            {
                Servicios.Add(columSer.Value, camposSer.Element(columSer.Attribute("name").Value) != null ? camposSer.Element(columSer.Attribute("name").Value).Value : null);
            }
            ItemsSer.Add(Servicios);
        }
        listaServicios.ItemsSource = ItemsSer; 
```

在 ItemsSer 中，我收集了 20 个字典（每个有 6 个输入）。

我们想要的是显示在 20 个面板中，每个面板都有每个对象 ItemSer 的 6 个输入

# java - 如何使用球衣服务返回任何文件

> ID：14579646
> 
> 赞同：0
> 
> 时间：2013-01-29T09:33:50.773
> 
> 标签：java, tomcat, jersey

我将文件位置存储在数据库中，我的文件存在于该位置，现在我想获取该文件并将其返回给用户。我的文件不是 jpg ，也不是 pdf 将扩展名视为 .abc。

如何通过触发 Web 服务将此文件返回给用户，以便用户可以下载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:34:46.150

`@Produces("*/*")`

`yourmethod(){}`

或者返回一个 javax.ws.rs.core.Response ，您可以以`Content-Type`编程方式设置标头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:48:02.237

您可以`Location`为此使用 HTTP 标头。您可以将实际路径设置为位置标头并返回响应。然后，客户端负责重定向到该 URL 并下载。

如果你想自己返回内容，设置`Content-Type`为`application/octet-stream`并返回文件内容。我假设您的休息服务 URL 类似于`http://abc/yourapp/files/<idOfYourFile>`

# javascript - 按需加载评论 [Jquery]

> ID：14579649
> 
> 赞同：1
> 
> 时间：2013-01-29T09:34:02.420
> 
> 标签：javascript, jquery, lazy-loading

我正在尝试为我的网站（如 Twitter）加载评论。

我找到了一些可以做到这一点的插件，但没有一个对我有用。

我试过[这个](http://www.webresourcesdepot.com/dnspinger/)，[这个](http://www.infinite-scroll.com/)&[这个](http://andersonferminiano.com/jqueryscrollpagination/)。

但是第一个使用ASP，第二个使用PHP，第三个很慢。

没有人连续加载评论并且速度很快吗？如果你使用这样的插件，你更喜欢哪一个，你知道更好的一个吗？

谢谢。

# iphone - SELECT 中的 OPTION 元素太长并且破坏了移动布局

> ID：14579650
> 
> 赞同：2
> 
> 时间：2013-01-29T09:34:02.373
> 
> 标签：iphone, css, mobile, responsive-design, checkout

我有一个响应式网站设计，其中大部分都可以正常工作。

在结帐页面上，虽然我有一个*Select*元素用于选择一个国家。有些选项很长，例如“刚果民主共和国”。这会将布局推到右侧，破坏布局并使布局滚动水平 - 这太可怕了；）

如果我完全删除选择，则布局显示正常。如果我删除所有选项并将简短的测试放在它们的位置上，它也可以正常工作。所以我很确定它的长*选项*是问题所在。Select 本身只有 50% 宽，因此不会超出屏幕 - 它是“不可见”选项元素。

这是一个临时链接： http: [//moymadethis.com/oca/test.html](http://moymadethis.com/oca/test.html)

在台式机上工作正常，问题出在 iphone 移动设备（safari、chrome 和 opera）上。

谢谢，希望有人能解决这个问题吗？史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:32:09.607

通常在元素本身上设置宽度就足够了`select`（与在其父元素上设置宽度相反——如果需要，内部元素默认会溢出），例如

```
 select { width: 6em; } 
```

当菜单打开时（当元素被聚焦时），选项将显示在其上下文所需的宽度中，但这将出现在页面内容顶部的“层”中，因此它不应该干扰布局。

如果问题仍然存在，请发布最少的 HTML 和 CSS 代码以重现问题并确定测试的平台和浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T13:06:45.860

我最近在我正在从事的项目中遇到了完全相同的问题。我发现解决方案是在选择宽度上使用 !important，在我的例子中是 100%。这使得该解决方案可以在移动设备和桌面设备上完美运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-25T11:12:53.977

尝试在选择元素上使用最大宽度，例如`#myselect {max-width:95%;}`

# ruby-on-rails - 如何避免 Rails 因错误的内容类型而崩溃

> ID：14579654
> 
> 赞同：3
> 
> 时间：2013-01-29T09:34:22.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我在 Ubuntu 12.04 上使用 rails 3.2.8

我正在构建一个仅支持 json 的 Web 服务。现在，如果有人向我发送不是 json 但将 content-type 设置为 application/json 的数据，rails 应用程序会引发异常并返回 500（内部服务器错误）。

在调用控制器操作之前，rails 内发生此异常，因为 rails 正在尝试创建 params 结构并将传入数据解析为 JSON。

我不确定这是正确的行为。如果它挽救了异常并在某些特殊处理程序中或在我的操作中使用某些变量集让我知道，我会更喜欢。我想指出 415（不支持的媒体类型）或 422（不可处理的实体）。我的猜测是 422 在这种情况下更合适。

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:22:13.830

猜猜您需要稍微更改中间件。要么创建自定义中间件并将其插入到之前`ParamsParser`，要么覆盖`ParamsParser`.

看看这个[请求](https://github.com/rails/rails/pull/7424)，有一个`ParamsParser`覆盖的样本。

创建自定义中间件还有另一个优点：如果 data 是`json`但 content-type 不是`application/json`，您可以在此处修复它（[示例](https://github.com/rack/rack-contrib/blob/master/lib/rack/contrib/post_body_content_type_parser.rb)）。

# java - 如何在 Windows 7 中设置 CATALINA_HOME 变量？

> ID：14579661
> 
> 赞同：56
> 
> 时间：2013-01-29T09:34:45.070
> 
> 标签：java, tomcat, environment-variables, java-home, catalina

我已经下载了`apache-tomcat-7.0.35`。我的 JDK 版本是`jdk1.6.0_27`.

如何配置`CATALINA_HOME`为环境变量以及如何在 Windows 7 下运行 Tomcat 服务器？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-06-11T12:40:18.750

在 Windows 上`JAVA_HOME`设置环境变量`CATALINA_HOME`

可以使用命令提示符：

1.  `set JAVA_HOME=C:\ "top level directory of your java install"`
2.  `set CATALINA_HOME=C:\ "top level directory of your Tomcat install"`
3.  `set PATH=%PATH%;%JAVA_HOME%\bin;%CATALINA_HOME%\bin`

或者你也可以这样做：

1.  转到系统属性
2.  转到环境变量并添加一个具有名称的新变量`JAVA_HOME`并将变量值提供为`C:\ "top level directory of your java install"`
3.  转到环境变量并添加一个具有名称的新变量 `CATALINA_HOME`并将变量值提供为`C:\ "top level directory of your Tomcat install"`
4.  在路径变量中添加一个新的变量值作为`;%CATALINA_HOME%\bin;`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-13T09:44:30.040

假设您的系统中安装了 Java (JDK + JRE)，请执行以下步骤：

1.  安装Tomcat7
2.  从“C:\Program Files (x86)\Java\jdk1.6.0_27\lib”复制“tools.jar”并将其粘贴到“C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0\lib”下。
3.  在您的环境变量中设置路径，如下所示：

**C:>回声%path%**

```
C:\Program Files (x86)\Java\jdk1.6.0_27\bin;%CATALINA_HOME%\bin; 
```

**C:>echo %classpath%**

```
C:\Program Files (x86)\Java\jdk1.6.0_27\lib\tools.jar;
C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0\lib\servlet-api.jar; 
```

**C:>回显 %CATALINA_HOME%**

```
C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0; 
```

**C:>回显%JAVA_HOME%**

```
C:\Program Files (x86)\Java\jdk1.6.0_27; 
```

现在，您可以通过在命令提示符中键入以下命令来测试 Tomcat 是否设置正确：

```
C:/>javap javax.servlet.ServletException
C:/>javap javax.servlet.http.HttpServletRequest 
```

它应该显示一堆类

现在通过双击“C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0\bin”下的“ **Tomcat7.exe ”来启动 Tomcat 服务。**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-29T09:43:36.177

[这](https://yellow-jbox.blogspot.cz/2011/04/how-to-set-catalinahomepath-variables.html)是如何做到这一点的教程（CATALINA_HOME 是您的 Tomcat 的路径，所以我想像`C:/Program Files/Tomcat/`. 并且要启动服务器，您需要`startup.bat`从命令行执行脚本，这将使它：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-25T09:27:56.450

为了设置 CATALINA_HOME：

1.  首先，将 apache-tomcat-7.1.100 文件夹解压缩并粘贴到您的 C:// 驱动器文件夹中。

**注意：**不要将您的 apache tomcat 文件夹放在任何其他文件夹或驱动器中，仅将其直接放在 C:// 驱动器文件夹中。（我犯了这个错误，上述解决方案都没有奏效）。

2.  打开*环境变量*对话框（windows 键+ pause-break 键 --> 高级设置）。

3.  ***在System Variables***中添加一个新*变量名称*为“ **CATALINA_HOME** ”，并将*变量路径*添加为“ **C://apache-tomcat-7.1.100** ”（在我的情况下）。

**   编辑**PATH**变量名称添加“ **%CATALINA_HOME%\bin** ”，然后按 OK。

    *   关闭窗口，它将被保存。

    *   打开**命令提示符**窗口并输入命令-“ **%CATALINA_HOME%\bin\startup.bat** ”以运行并启动 Tomcat 服务器。

    *   结尾！* 

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-06T12:40:17.423

假设您的系统中安装了 Java (JDK + JRE)，请执行以下操作：

1.  安装Tomcat7
2.  从“C:\Program Files (x86)\Java\jdk1.6.0_27\lib”复制“tools.jar”并将其粘贴到“C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0\lib”下。
3.  在您的环境变量中设置路径，如下所示：

C:/>javap javax.servlet.http.HttpServletRequest

它应该显示一堆类

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-02T16:03:04.357

不需要设置 CATALINA-HOME。

按照下面的说明。

右键单击计算机->属性->高级系统设置->环境变量。

用户变量部分 --> 点击“新建” --> 变量名：CLASSPATH，变量值：D:\java\lib*.;D:\tomcat8\lib\servlet-api.jar.; --> 点击“确定”

新建 --> 变量名：PATH，变量值：D:\java\bin；--> 点击“确定”

系统变量部分：-

点击“新建”——>变量名：PATH，变量值：D:\java\jre——>点击“确定”

此后我在 D 驱动器中安装了 java 和 tomcat，上面的位置在我各自的路径下。

提供您的 PC 中安装 java 和 tomcat 的位置路径。谢谢你*

# matlab - matlab如何给曲面赋值？

> ID：14579664
> 
> 赞同：3
> 
> 时间：2013-01-29T09:34:47.093
> 
> 标签：matlab, 3d, boundary, fluid-dynamics

我正在尝试使用 MATLAB 构建 3D CFD 管流模型，并且希望在管壁上分配值（边界条件）。我尝试使用以下`cylinder`功能构建管道：

```
[X Y Z] = cylinder 
```

但这在表面上产生了几个点，这还不够。

另外，有没有更好的方法来使用 MATLAB构建 3D [CFD管道流模型？](http://en.wikipedia.org/wiki/Computational_fluid_dynamics)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:52:54.377

我会使用结构将信息嵌入到您的 CFD 对象中。

```
% radius = 10
r = 10;
% number of radial points = 30
n = 30;
CFD_cyl = struct;
[CFD_cyl.X, CFD_cyl.Y, CFD_cyl.Z] = cylinder(r, n);
% Creates a value vector in the CFD_cyl struct that can relate to the cylinder X, Y, Z
CFD_cyl.value = CFD_cyl.X(:,:) + CFD_cyl.Y(:,:) + CFD_cyl.Z(:,:); 
```

为您希望表达的有用关系相应地更改值字段。

# ios - XCode:4.6 Lion:10.8 IOS 6.1 错误：SBTarget 无效

> ID：14579666
> 
> 赞同：14
> 
> 时间：2013-01-29T09:34:52.597
> 
> 标签：ios, xcode, ios6, xcode4.6

XCode:4.6 Lion:10.8 IOS 6.1 error: SBTarget is invalid ，如何解决？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T01:42:24.280

经过数百次测试，我找到了一种可以帮助程序运行的方法，这里是：

*   当你第一次遇到**SBTarget 无效**时，选择`Product --> Clean`
*   再次运行，这一次你也可能报错：**SBTarget is invalid**，没关系。
*   完全关闭 XCode，“完全”意味着 Xcode 图标不应出现在 Dock 中。
*   双击你的项目文件（xxx.xcodeproj，蓝色的）启动Xcode，再次运行。( `Do not Clean this time`)，运行正常。

让我知道这是否可以帮助您或您有任何其他方法。谢谢

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T18:30:39.113

我在将 Facebook SDK 合并到我的应用程序时遇到了这个问题。该错误将在 SBTarget 无效和告诉我我的架构与我的设备不兼容之间交替出现，因此它不会启动。如果我遵循 alexqinbj 的建议，它会运行该应用程序一次，但随后会再次出现相同的错误。我尝试弄乱体系结构和构建设置并删除派生数据，但最终它实际上只是我文件结构中的重复文件。Facebook 告诉我添加他们的 SDK，然后添加一个文件夹（SDK 文件已经包含）。一旦我看到这只是删除重复文件的问题。我听说重复的 plist 也会发生此错误。祝你好运

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-08T04:58:51.610

事实上，根本原因（在 Facebook 集成中）是 Facebook SDK 中的重复资源（根据他们的说明）。当我删除资源文件（仅删除引用）时，这个问题就永久消失了。不知道为什么 Facebook 说明会要求您将资源包拖到您刚刚引入的 Facebook SDK 框架中...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-01T15:12:43.403

`TARGETS -> Build Phases``info.plist`，从中删除`Copy Bundle Resources`。清洁并运行。这个对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-29T00:33:37.997

不幸的是，接受的答案对我不起作用。我可以 100% 确定地引发这个错误。这不一定是 XCode 的内部一致性问题，可以通过清理、重新启动和重建来解决。

SBTarget is Invalid 是一个内部 XCode 错误。当附加调试器并且 XCode 项目中指定的体系结构与二进制文件不匹配时，会发生这种情况。

在 OS X 上，您可以通过转到硬盘驱动器上的二进制文件并键入以下内容来诊断此问题：

```
lipo -info <bin> 
```

然后将其与构建设置 ARCH 和 ONLY_ACTIVE_ARCH 进行比较。他们必须匹配。ARCH 成为二进制文件中包含的可能架构的子集是不够的。

他们可能不匹配的原因有很多。以下是一些建议：

*   您正在使用外部构建方案。因此 XCode 并没有规定二进制文件的内容。构建设置只是告诉 XCode 在启动 GDB 或 LLDB 时会发生什么。
*   方案中为启动指定的可执行文件不正确。如果找不到可执行文件，则体系结构将不存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-03T19:51:15.187

在我的情况下，这个错误有一个非常明显的原因。每当 Xcode 的“构建设置”中的“扩展 Info.plist 文件中的构建设置”设置为“否”时，就会出现此消息。将 rdar 提交给 Apple。

![在此处输入图像描述](../Images/75d5e16762257560f78856de7f90f219.png)

# javascript - 验证下拉 asp.net

> ID：14579668
> 
> 赞同：0
> 
> 时间：2013-01-29T09:34:55.203
> 
> 标签：javascript, asp.net, .net, validation

我有以下下拉菜单

```
 <li><span>State: <asp:DropDownList ID="ddlAppState" runat="server">
                        </asp:DropDownList></span></li> 
```

它使用以下函数在页面加载（）上填充

```
 private void ddlAppState_DataBind()
{
    string myXMLfile = Server.MapPath("~/App_Data/ActiveStates.xml");
    System.Data.DataSet dsStudent = new System.Data.DataSet();

    dsStudent.ReadXml(myXMLfile);
    ddlAppState.DataSource = dsStudent;
    ddlAppState.DataValueField = "StateID";
    ddlAppState.DataTextField = "StateName";
    ddlAppState.DataBind();
} 
```

最初下拉列表中的值是“--------”，但在后端它映射到“FD”我想验证是否选择了“-----”，如果我通过执行 ddlAppState 获得其值。 SelectedValue.ToString() 是一个字符串“FD”，然后我不想调用 button 的 onlick 函数。

按钮 OnClick

```
 <asp:Button Style="left: 0px; position: relative" ID="btnSearch" runat="server" CausesValidation="False"
                CssClass="lbSearch closeform" Text="Search" Width="80px" OnClick="btnSearch_Click"  >
            </asp:Button></div>

 protected void btnSearch_Click(object sender, EventArgs e)
{
    try
    {
            if (ddlAppState.SelectedValue.ToString() == "FD" && ddlAppMode.SelectedValue.ToString() == "S")
      {
          SelectState.Text = " Please Select State ";
          return;
            }

            SelectState.Text = "";
        BindGridViewZipConfirmation1(); 
```

// clearFields(); }

关于如何完成的任何想法。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:41:55.690

您可以检查 是否`SelectedIndex`大于零（默认值），`SelectedValue`如果是则使用。否则只是`return`来自点击处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T09:53:13.917

如果您想在客户端进行验证。请试试这个

```
<asp:DropDownList ID="ddlName" runat="server">
    <asp:ListItem Text="Select" value="-1"></asp:ListItem>
  </asp:DropDownList>
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server"    ErrorMessage="Please select"  ControlToValidate="ddlName" ValidationGroup="btnSave" Display="Dynamic" InitialValue="-1">*</asp:RequiredFieldValidator> 
```

# c++ - 为什么 char 大小作为实例变量增加

> ID：14579670
> 
> 赞同：0
> 
> 时间：2013-01-29T09:35:00.090
> 
> 标签：c++

> **可能重复：**
> [为什么结构的 sizeof 不等于每个成员的 sizeof 之和？](https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member)
> [C++ 类的大小是如何确定的？](https://stackoverflow.com/questions/14510711/how-is-the-size-of-a-c-class-determined)

当我用单个 char 变量检查类的大小时，它的大小是 1 字节。但是如果我们添加一个整数，它会突然变成 8。你能解释一下为什么吗？

```
class Char
{
  char b;
};
class Int
{
  int a;
};
class A
{
  int a;
  char b;
};

int main()
{
  Char Cobj;
  cout<<"Char size: "<<sizeof(Cobj)<<endl;
  Int Iobj;
  cout<<"Int size: "<<sizeof(Iobj)<<endl;
  A aobj;
  cout<<"A size: "<<sizeof(aobj)<<endl;

  return 0;
} 
```

输出为： Char 大小：1 Int 大小：4 A 大小：8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:35:57.130

由于填充 - 后将添加 3 个虚拟字节`A::b`。

`A`这样做是为了在数组中正确对齐- 的第一个成员`A`是 an `int`，它必须具有特定的对齐方式（可能是 4 或 8 个字节）。所以如果你有

```
A arrayOfA[10]; 
```

对象本身必须对齐`4`或`8`字节。

# android - 如何将变量从主要活动发送到android中的多个活动？

> ID：14579671
> 
> 赞同：1
> 
> 时间：2013-01-29T09:35:09.963
> 
> 标签：android, bundle, global-state

我正在尝试创建一个具有

1.  MainActivity
    它是一个登录页面，它包含 4 个变量，当我单击登录按钮时，它会使用意图转到另一个活动 HomeTab
    `Intent i = new Intent(FirstMain.this,Home_tab.class);`
    `startActivity(i);`

2.  HomeTab - 它有三个选项卡视图。
    一种。简介
    B. 账户
    C. 设置

我的问题是如何将 MainActivity 中的 4 个变量传递给 Tab 中的 3 个活动

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:38:48.673

您可以在意图中添加 Bundle 作为额外参数

```
Bundle bundle = new Bundle();
bundle.putString("key", "peanuts");
bundle.putInteger("key2", 100);
i.putExtras(bundle); 
```

然后检索它

```
final Bundle parameters = this.getIntent().getExtras();
String food = parameters.getString("key"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T09:40:01.707

第 1 类：

```
i.putExtras("Variable1", "Value1");
i.putExtras("Variable2", 2);
i.putExtras("Variable3", true);
startActivity(i); 
```

在第 2 类：

```
String Var1 = this.getIntent().getExtras().getString("Variable1");
int Var2 = this.getIntent().getExtras().getInt("Variable2");
boolean Var3 = this.getIntent().getExtras().getBool("Variable3"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T09:37:50.667

您可以在用于启动 HomeTab 活动的 Intent 中传递它们（请参阅[Intent](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.lang.String%29)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T09:39:47.860

在登录活动中通过 Intent 发送变量

```
Intent i = new Intent(FirstMain.this,Home_tab.class);
i.putExtra("var1", "username");
i.putExtra("var2", "activity";
startActivity(i); 
```

在 Home_Tab 中获取 Intent

```
Intent intent = getIntent();
String id = intent.getStringExtra("var1");
String name = intent.getStringExtra("var2"); 
```

有关共享偏好的信息，[请参见此处](https://stackoverflow.com/questions/6013341/shared-preference-in-android)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T09:39:58.887

使用 intent.putExtra 传递您想要的值

```
Intent i=new Intent(FirstMain.this,Home_tab.class);
i.putExtra("Profile", "profiledata");
i.putExtra("Account", "Account data");
startActivity(i) 
```

并在下一个活动中获取那些传递值

```
Intent intent = getIntent();
String id = intent.getStringExtra("Profile");
String name = intent.getStringExtra("Account"); 
```

检查 [如何从 Android 上的意图获取额外数据？](https://stackoverflow.com/questions/4233873/how-to-get-extra-data-from-intent-in-android)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T09:39:14.810

你有两个选择。

1.  你可以使用意图。
2.  您可以使用共享首选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-10T20:16:44.013

如果您有许多“全局”变量，您可以设置一个从没有相应视图的 Activity 继承的“BaseActivity”，然后让所有其他活动从 BaseActivity 继承，而不是直接从 Activity 继承。

这使您可以在 BaseActivity 上拥有公共共享变量，从该变量继承的所有其他活动都可以访问。

显然要小心这种技术，它很容易变得非常混乱并导致不应该是全局的全局变量等。但它对于清理跨视图重复的代码（BaseActivity 上的共享方法）或在视图之间传递信息很方便，就像一个登录状态。

# jquery - jquery 仅在有时或当我选择新选项卡时才在 jquery ui 选项卡中加载

> ID：14579672
> 
> 赞同：1
> 
> 时间：2013-01-29T09:35:16.240
> 
> 标签：jquery

我有一个带有四个选项卡的 jquery ui 选项卡，每个选项卡显示一个包含一些数据的表，并且所有表都或多或少相同。在表格前的选项卡内，我有两个链接来更改表格顺序。一切运行良好，如果出现以下情况，我可以更改顺序： - 我在页面刷新后第一次选择选项卡 - 我选择选项卡 4，然后是选项卡 3，然后是选项卡 2

在此之后，只有选项卡 2 始终正确运行选项卡 3 和 4 不会更改，但如果我选择不同的选项卡，我会看到加载的内容，然后是新选项卡

这是标签和排序的 js 代码：

```
$(function() {
    $( "#tabs" ).tabs({
        beforeLoad: function( event, ui ) {
            ui.jqXHR.error(function() {
                ui.panel.html("Error");
            });
        }
    });
    $( "#tabs" ).tabs("option", "active", 0);
    $("div.ui-tabs-panel").delegate("#sorter a.sort", "click", function(event){
        event.stopPropagation();
        event.preventDefault();
    var e = $(this), d = $("#sorter").parent("div");
        d.load(e.attr("href"));
        return false;
    });
}); 
```

并加载选项卡内容：

```
<div id="sorter">
    <a class="sort" href="/it/private/ajax/proposals/region/latest">latest</a>
    <a class="sort on" href="/it/private/ajax/proposals/region/voted">voted</a>
</div>
<table class="zebra">
<tr><td>....</td></tr>
</table> 
```

谢谢保罗

# dojo - Dojo 1.8：似乎没有办法将 dojo 文件加载到内容窗格中，是吗？

> ID：14579673
> 
> 赞同：0
> 
> 时间：2013-01-29T09:35:17.240
> 
> 标签：dojo

您好我已经尝试了各种方法和方法将 dojo 页面加载到 ContentPane 中。看来我无法做到这一点。如果我错了，请纠正我。

看起来唯一的解决方案是通过在运行时创建和销毁任何小部件

克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:33:21.420

**dojox** /layout/ContentPane的 dojo 文档（允许引用脚本文件）提到了您的问题：

> 请注意，不建议在获取的文件中的脚本中使用 dojo.require 在页面加载时需要许多小部件才能正常工作@see [http://dojotoolkit.org/api/1.8/dojox/layout/ContentPane](http://dojotoolkit.org/api/1.8/dojox/layout/ContentPane)

看起来您只需要在父小部件中要求这些文件。

# c# - 确定第三方应用程序何时变为活动状态

> ID：14579678
> 
> 赞同：0
> 
> 时间：2013-01-29T09:35:36.843
> 
> 标签：c#, windows

有没有办法可以检测系统上运行的某个第三方应用程序（例如thunderbird.exe）何时变为活动状态？

或者，在系统上运行的所有进程中，是否可以获得当前活动进程的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:31:09.033

感谢花费者的链接。我已经能够使用这些问题中的信息来创建一个可重用的组件，该组件为活动窗口返回一个 Process 对象，并在它发生变化时触发一个事件。

此代码可在此处获得：[https ://github.com/DanStevens/ActiveWindowWatcher/blob/master/ActiveWindowWatcher.cs](https://github.com/DanStevens/ActiveWindowWatcher/blob/master/ActiveWindowWatcher.cs)

# javascript - jQuery无效标签jsonp

> ID：14579681
> 
> 赞同：0
> 
> 时间：2013-01-29T09:35:42.670
> 
> 标签：javascript, jquery, jsonp

我使用 jQuery 通过 ajax-function 获取 php-script 结果。问题是 php-script 在另一个域上，所以我应该使用“jsonp”作为返回的数据类型，但是 php-script 返回 json，而不是 jsonp（可能脚本不正确）并且我得到语法错误。我该如何处理？我想，我可以在 ajax 函数处理它并引发错误之前以某种方式获取 json 字符串，这可能吗？

这是我的 ajax 函数：

```
$.ajax(
    {
        type: "POST",
        dataType: "jsonp",
        url: "http://www.pecom.ru/bitrix/components/pecom/calc/ajax.php",
        data: res,
        error: function (xhr, ajaxOptions, thrownError) {
            alert("error: " + xhr.status);
        },
        success: function (data) {
            alert("Data Loaded: " + data)
        }
    }
) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:03:24.350

简短的回答是你不能。

较长的一个是您必须设置某种代理：从您控制的机器在服务器端发出请求，将结果转换为正确的 JSONP，然后通过 AJAX 连接到该服务器。（或者，在目标服务器支持[CORS](http://enable-cors.org/)的极不可能的情况下，您可以使用它而不是 JSONP。）

# kendo-ui - 剑道网格调整大小缩小了IE中的所有列

> ID：14579682
> 
> 赞同：0
> 
> 时间：2013-01-29T09:35:46.880
> 
> 标签：kendo-ui, kendo-grid

我在我的应用程序中使用剑道网格。当我尝试在 IE 中调整列的大小时，表中的所有其他列都会消失。

这不会发生在 Firefox 或 Chrome 中，只有 IE 9 和 10。

有人可以帮忙吗，因为我从一天开始就对这个问题感到头疼吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:51:02.947

问题在于您的列宽的混合百分比和像素。

一种解决方案是确保为网格中的每一列分配一个特定的宽度（120 像素）。

不要使用百分比，除非你的父母有特定的宽度（不是 100%，而是 800px 或类似的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:12:12.533

这很有可能与 IE 没有像其他浏览器一样继承 CSS 属性有关。Kendo 小部件将在其自己的 div 中输出（检查 kendo CSS，可能类似于 k-container 或 k-widget），因此查看它的 CSS 和任何父 div 的 CSS，您可能会有一些运气。

# bash - sed 用乳胶简写 \( \) 替换 tex 简写 $$

> ID：14579688
> 
> 赞同：3
> 
> 时间：2013-01-29T09:36:03.290
> 
> 标签：bash, sed, latex

我目前在编辑`manuscript.tex`文件时遇到问题。到目前为止，我一直使用文本简写 $$; 但是，出现了一些问题，它需要我将所有 $...$ 替换为`\( \)`.

我认为带有替换操作的“sed”应该是完成任务的正确工具。但是，我不擅长或不熟悉“sed”和正则表达式。因此，我需要提示和帮助来做到这一点。

假设输入文件名为`manuscript.tex`. 我需要“sed”替换`$ e=mc^2 $`为`\( e=mc^2 \)`. 我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:40:48.500

使用 sed 的其他方式

`sed -re 's/(.*)\$(.*)\$(.*)/\\(\2\\)/g' temp.txt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:46:35.503

如果美元符号之间从来没有换行符，您可以尝试类似

```
sed -e 's/\$\([^$]\+\)\$/\\(\1\\)/g' manuscript.tex > manuscript2.tex 
```

# ios - 什么是创建将保持在顶部的覆盖视图的好方法？

> ID：14579691
> 
> 赞同：3
> 
> 时间：2013-01-29T09:36:11.700
> 
> 标签：ios, cocoa-touch, uiviewcontroller

我想创建一个小的覆盖视图，它会浮在所有其他视图之上。我需要视图来接受触摸，即使在底层视图之间的转换期间，我也需要它保持原位。到目前为止我已经尝试过：

1.  插入键的独立视图`UIWindow`。明显的缺点是视图没有附加到任何视图控制器，这意味着手动处理（至少？）旋转事件。

2.  `UIViewController`包含，有一个包含浮动视图的“根”视图控制器，所有导航都将在它下面完成。这是一个非常“一流公民”的解决方案，但呈现模态视图控制器与浮动视图重叠。

3.  其次`UIWindow`是包含浮动视图的根视图控制器。这违背了 Apple 的建议，我在过滤哪些事件应该转到哪个窗口时遇到了一些麻烦。

有没有人有一个不需要太多脆弱黑客的可行解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:33:55.683

最后，我遵循了乔纳森的建议，并将叠加层实现为插入到关键窗口中的单独视图。视图有一个关联的控制器对象（一个子类`NSObject`，不是`UIViewController`），这个控制器负责旋转逻辑。这样，实现实际覆盖对象的视图根本不需要关心旋转事件。

# javascript - 有条件地调用外部java脚本文件

> ID：14579694
> 
> 赞同：0
> 
> 时间：2013-01-29T09:36:28.807
> 
> 标签：javascript

是否可以根据以下条件调用外部 javascript 文件，例如

```
switch (VCheck) {
    case "1":
        Call "1.js"
        break;
    case "2":
        Call "2.js"
        break;
    case "3":
        Call "3.js"
        break;
    case "4":
        Call "4.js"
        break;
    case "5":
        Call "5.js"
        break;
    case "0":
        Call "Default.js"
        break;
    default: alert("Server Error - No Data!");
} 
```

如果是这样，请您协助提供正确的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:37:51.320

您应该使用 require.js，它以更优雅的语法完全满足您的需求。

[http://requirejs.org/](http://requirejs.org/)

如果您的“调用”指令执行异步加载，您也可以通过这种方式分解您的代码：

```
function Call(VCheck, callback)
{
    callback = callback || function(data) {};

    var data = ["Default", "1", "2", "3", "4", "5"];
    if (VCheck < 0 || VCheck > data.length - 1) { return alert("Server Error - No Data!"); }

    var script = document.createElement("script");
    script.id = "data" + Math.ceil(Math.random() * 0xffffff).toString(16);
    script.async = true;
    script.type = "text/javascript";
    script.src = data[VCheck] + ".js";

    var head = document.getElementsByTagName("head")[0];
    head.insertBefore(script, head.firstChild);

    var img = new Image();
    img.onload = function()
    {
        //your data here
        console.log(document.getElementById(script.id).innerHTML);

        var data = document.getElementById(script.id).innerHTML;
        callback.call(null, data);
    };
    img.src = script.src;
} 
```

或者，如果您使用 jQuery 的[getScript](http://api.jquery.com/jQuery.getScript/)：

```
$.getScript(data[VCheck] + ".js", function(data)
{
   //your data here
   console.log(data);
}); 
```

# jquery - 使用 jQuery 自动验证表单

> ID：14579700
> 
> 赞同：0
> 
> 时间：2013-01-29T09:36:43.550
> 
> 标签：jquery, forms, validation

我写了这段代码来验证表单：

```
$('form').submit(function() {
    $.each($(this).find('.required'), function(i,d){
        var lName = '#'+$(d).attr('for'); 
        if (!$(lName).val()) {
            $('html, body').animate({ scrollTop: $(d).offset().top }, 'slow');
            $(d).css({'color': '#ff0954'});
            if ($(lName).attr('class') == 'ckeditor') {

            }else{
                for(i=0;i<3;i++) {
                    $(lName).fadeTo('fast', 0.5).fadeTo('fast', 1.0);
                }
            }
            return false;
        }
    });
}); 
```

我的代码将在`label`带有`reqiured`类名的标签中搜索并验证字段。

一切似乎都很好，但我有一些问题：

1.  我`return false;`在字段有问题时使用，但表单将是 submit 。
2.  我不能`focus`上课`ckeditor`
3.  我无法验证`radio`和`checkbox`标记`select`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:20:21.710

# 1

尝试在每个循环之前将变量设置为 true。然后，在您返回 false 的地方，将该变量设置为 false。在循环之后，检查那个变量，如果它是假的，就返回假。您现在在每个函数上都返回 false，您需要在提交时执行此操作。

所以是这样的：

```
$('form').submit(function() {
    var valid = true;
    $.each($(this).find('.required'), function(i,d){
        // all your checks
        // if your checks are bad
        valid = false;
    });
    if (valid === false) {
        return false;
    }
}); 
```

# 2

什么是ckeditor？我们可以看到你的完整 htmll 吗？

# 3

你想验证什么？@sparky 的评论可能是这里的正确答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:30:04.447

感谢@Sparky，我将使用我从头开始编写的 [jQuery Validation Plugin实例：](http://docs.jquery.com/Plugins/Validation) [http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:22:43.053

用这个...

```
$('#myForm').on('submit', function(){
    $("#myForm").validate();
}); 
```

这里[jQuery 验证文档](http://docs.jquery.com/Plugins/Validation)

问候...

# c#-4.0 - 水印和打印pdf文件C# asp.net 4.0

> ID：14579705
> 
> 赞同：0
> 
> 时间：2013-01-29T09:36:54.063
> 
> 标签：c#-4.0, pdf, printing

我在服务器上的某个位置存储了一个 pdf 文件。单击链接时，我想在此 pdf 文件中添加文本水印，然后打印。

像这样的东西：

在 aspx 中说我们有一个（按钮一个链接按钮或一个简单的链接）

```
 <a id="abc" href="../test.pdf" onclick="watermarkAndPrintPdf()"> PrintPdf </a>
     or
     <asp:linkbutton id="abc" runat="server" onclick="watermarkAndPrintPdf()" Text="Print Pdf"/> 
```

现在，当用户单击此链接时，我的代码应添加水印（可能是登录的用户名）并打印此文档。

我想知道这个函数会是什么['watermarkAndPrintPdf()']......

注意：-它是 C# asp.net 4.0 中的 Web 应用程序。（我不介意打印对话框是否打开或没有它就打印。）

请帮忙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:46:57.137

建议看一下 PDFsharp，它是一个开源 dll，用于通过代码生成 pdf，在 PDFsharp 网站的此页面上有许多生成水印的示例：

[http://www.pdfsharp.com/PDFsharp/index.php?option=com_content&task=view&id=40&Itemid=51](http://www.pdfsharp.com/PDFsharp/index.php?option=com_content&task=view&id=40&Itemid=51)

如果您在使用它时需要任何帮助，我非常愿意伸出援手，因为我过去曾使用此软件包制作 pdf。

希望这可以帮助。

# ssis - 通过 SSIS 中的列转换获得的文件开头的垃圾字符

> ID：14579707
> 
> 赞同：1
> 
> 时间：2013-01-29T09:36:53.677
> 
> 标签：ssis

我需要将 varbinary 数据导出到文件。但是，当我在 SSIS 中使用列转换时，导出的文件已损坏。文件开头的垃圾字符很少。删除它们后，文件可以正常打开。

[BCP](http://bytes.com/topic/sql-server/answers/844661-bcp-out-image-files-not-working)的类似帖子说，这些字符指定数据长度。

想知道如何在 SSIS 中解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:55:22.640

导出转换用于将 varbinary 转换为文件。我使用 Adventure 作品尝试了类似的东西，它具有 var-binary 数据的图像类型。

1.  以下查询用于源查询。我修改了查询，因为它没有写入图像文件的完整路径。

    ```
    SELECT [ProductPhotoID]
          ,[ThumbNailPhoto]
          ,'D:\SSISTesting\ThumnailPhotos\'+[ThumbnailPhotoFileName]
          ,[LargePhoto]
          ,'D:\SSISTesting\LargePhotos\'+[LargePhotoFileName]
          ,[ModifiedDate]
    FROM [Production].[ProductPhoto] 
    ```

2.  使用了导出列转换[在[2005 年](http://msdn.microsoft.com/en-us/library/ms139818%28v=sql.90%29.aspx)和 [2008 年也可用]](http://msdn.microsoft.com/en-us/library/ms139818%28v=sql.105%29.aspx)，配置如下。 ![在此处输入图像描述](../Images/762cd8fad5173cb83cdd770dbe4fb444.png)

3.  将其余列映射到目标。

4.  运行包后，所有图像文件都写入各自的文件夹[D:\SSISTesting\ThumnailPhotos\ 和 D:\SSISTesting\LargePhotos]。

希望这可以帮助！

# c# - 通过自定义 KeyPress 激活按钮进程

> ID：14579709
> 
> 赞同：1
> 
> 时间：2013-01-29T09:37:03.367
> 
> 标签：c#, button

基本上在我正在处理的 C# Windows 窗体应用程序中，我按下了 2 个按钮`button1`和`button2`.

`2 custom keys`当我同时按下（*例如* `CTRL`+ `L`）程序执行编码的步骤时，我如何做到这一点`button1`？请记住，该窗口可能未处于活动状态。

我看过这个：[Keypress To Simulate A Button Click in C#](https://stackoverflow.com/questions/1807483/keypress-to-simulate-a-button-click-in-c-sharp)但我认为如果窗口不活动，这将不起作用，而且它也只按下一个按钮而不是两个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:46:01.323

在`Form KeyUp Event`和Properties 中是`KeyPressPreview = true`可以完成这个任务的。

```
 private void Form_KeyUp(object sender, KeyEventArgs e)
   {
       if (e.KeyCode == Keys.L && e.Control)
       {
                yourButton.PerformClick();
                e.Handled = true;
        }
    } 
```

**或者**

如果你想进去`Keypress Event`

```
private void Form_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.Control && e.KeyCode == Keys.L)
    {
            yourButton.PerformClick();
            e.Handled = true;
    }
} 
```

**编辑：**

我意识到 OP 想要`keypress Event`从他的声明中*“但如果窗口不活动，我认为这不会起作用”*

你可能必须检查这个

[如何在 Visual C# .NET 中设置 Windows 挂钩](http://support.microsoft.com/kb/318804)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:01:41.000

如果在按钮文本中的任何字符前面加上 &，并保持 UseMnemonic 为 true，。alt+字符将用作快捷键。

例如，在您的情况下，将按钮的文本分别更改为**button&1**和**button&2**。保持**UserMnemonic = true**。现在，如果您按**alt+1**则 button1 将被按下，如果您按**alt+2**则 button2 将被按下。

1 和 2 也将分别加下划线。

希望有帮助。

# jquery - jquery淡入多个div

> ID：14579711
> 
> 赞同：1
> 
> 时间：2013-01-29T09:37:25.960
> 
> 标签：jquery, fadein

我从我的数据库中加载了多个图像，并且在每个图像的底部都有一个共享按钮...单击共享按钮时，会出现一个带有不同共享选项的新 div。

我的问题是当我按下共享按钮时......页面上的所有图像都会出现隐藏的 div，我只想为一张图像而不是所有图像出现。

这是我到目前为止所拥有的：

HTML

```
<div id="wrapper">
    <a href="<?php echo $link; ?>"><img class="img-box" src="/images/<?php echo $img; ?>.jpg"></a>
    <div class="share-holder" name="<?php echo $img_id; ?>">share</div>
    <div class="share-fadein"></div>
</div> 
```

CSS

```
.share-fadein{
    width:210px;
    height:40px;
    background-color:#eee ;
    display:none;
} 
```

脚本

```
$(document).ready(function(){
    $(".share-holder").click(function(){
        $(".share-fadein").fadeIn();
    });
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:39:14.783

将您的 JS 更改为：

```
$(document).ready(function(){
   $(".share-holder").click(function(){
   $(this).next().fadeIn();
});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:42:24.043

```
$(document).ready(function(){
   $(".share-holder").click(function(){
    $(this).closest('.share-fadein').fadeIn();
 });
}); 
```

获取最接近`.share-fadein`点击的`.share-holder`.

请参阅[最接近的（）](http://api.jquery.com/closest/) jQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T09:48:53.593

如果使用 jQuery 1.4.3+ 更好用

```
$(document).ready(function(){
  $(this).delegate(".share-holder", "click", function() {
    $(this).next().fadeIn();
  });
}); 
```

[委托](http://api.jquery.com/delegate/)更好，因为您有 1 个侦听器，而不是每个元素的“点击”侦听器 - 因此内存使用量要低得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T09:42:02.937

使用这种方式：http: [//jsfiddle.net/9Wsfc/](http://jsfiddle.net/9Wsfc/)

```
$(".share-holder").click(function(){
    $(this).next(".share-fadein").fadeIn();
});     //--^^^^^^^^^^^^^^^^^^^^-------this will only fadesin the ".share-fadein" 
```

# javascript - 通过 mac/ip/... 识别网站上的用户？（电话）

> ID：14579721
> 
> 赞同：0
> 
> 时间：2013-01-29T09:38:04.613
> 
> 标签：javascript, php, login

还有其他类似的主题，但没有一个能完全回答我的问题。

我正在制作一个仅供一小部分用户访问的网站。（就像一个团队）现在他们都应该有机会亲自访问网站并查看他们的信息。并且无需登录。简单地说：如何识别没有登录的用户。

问题是，这些用户 99% 的时间都是通过手机访问该网页。
这意味着他们将通过 WiFi 或 3G 网络访问它，从而使他们的 IP 不是恒定的，并且在我看来无法跟踪。然后我想到了mac地址，这是保持稳定的一件事。但互联网表明它没有发送到浏览器，因此“无法跟踪”。

问题：

1.  真的不可能追踪手机的mac地址还是存在后门？( `javascript/php/cookie/...`)。我不想要应用程序，因为手机可以在许多不同的平台上运行。

2.  是否有任何其他值或常量可用于在未登录的情况下识别用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:41:23.110

您应该使用[localStorage](http://coding.smashingmagazine.com/2010/10/11/local-storage-and-how-to-use-it/) - 这样您的用户只需登录一次您的网站，然后您就可以随时获取/设置该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:52:51.133

您可以通过 PHP 参数登录，因此用户可以将这样的链接保存到他的书签中：

```
intranet/login.php?user=vincent&pwhash=8fe4c11451281c094a6578e6ddbf5eed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:58:25.393

获取用户mac地址是不可能的，所以不要费心去做一些魔术来获取某人手机的mac地址。根据经验，我们开发了设备指纹或 DFP，并从用户那里收集了尽可能多的信息，即外部 IP、浏览器信息（例如我们的首选语言、用户代理等）、屏幕分辨率、地理位置等。 info 我们有一些算法来制定评分方案或匹配方案，然后将信息存储到我们的数据库中。每次用户访问该网站时，我们都会再次收集信息，然后将其与我们的记录相匹配。例如，然后确定 user1 的得分是否超过 90% 与我们的记录匹配。

# com - 如何通过 ildasm/ilasm 往返暴露 COM 对象的 dll

> ID：14579722
> 
> 赞同：1
> 
> 时间：2013-01-29T09:38:06.797
> 
> 标签：com, interop, clr

我想往返一个公开 COM 对象（互操作）的 dll。使用 ildasm 我转储了 dll。在 ildasm 转储中，我重命名了所有出现的类名。带有 DLL 开关和包含资源的 Ilasm 生成了新的 dll。我不知道如何注册这个新的 dll (Win7)。Regasm/Regedit 抱怨一个强名称。我还需要调整什么？谢谢你。塞佩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T11:13:26.307

程序集的强名称会显式*阻止*您执行此操作。强名称旨在检测有人篡改程序集的代码，当程序集存储在网站等不安全的位置时很有用。您肯定在篡改 DLL，因此您将破坏强名称。辞职是必需的，并且需要访问最初使用的私钥。

也就是说，在 [ComVisible] 程序集的特定情况下有一些缓解因素。应用程序无法验证强名称，因为此类程序集的客户端是不知道 bean 的强名称的本机代码。只有在 GAC 中注册程序集时才需要强名称。这通常是此类程序集的好地方，因为它有助于避免 DLL Hell。

所以你可以做两件事来解决这个问题：

*   仔细阅读 regasm.exe 消息。如果您使用 /codebase 选项，它可能只会显示**警告。**“RegAsm：警告 RA0000：向 /codebase 注册未签名的程序集可能会导致您的程序集干扰可能安装在同一台计算机上的其他应用程序。/codebase 开关旨在仅用于已签名的程序集。请给您的程序集一个强名称并重新注册。” 这实际上意味着“您将致力于 DLL Hell”。DLL Hell 有不同程度，DLL 的名称+位置比较温和。更重要的是接口和类获得了一个新的 [Guid]。假设原始代码中不存在 [Guid] 属性，它们会在您更改名称后自动获得。

*   只需使用 sn.exe 使用您自己的密钥对程序集进行签名。由于没有人可以真正*检查*强名称，因此任何一个都足够了。

请密切注意，[ComVisible] 接口和类名的实际名称在 COM 中无关紧要。只有 [Guid] 很重要，这就是 COM 客户端用来查找类型的内容。

# java - Astyanax 中的 Cassandra CQL3 支持

> ID：14579731
> 
> 赞同：7
> 
> 时间：2013-01-29T09:38:44.207
> 
> 标签：java, cassandra, astyanax

Astyanax 是否支持通过 CQL3 准备好的语句“插入”？我使用最新的 Astyanax 库 1.56.24 和 Cassandra 1.2.1。当我尝试使用 CQL3 执行准备好的语句时：

```
keyspace.prepareQuery(conn.CF_CONTACTS)
  .withCql("INSERT INTO contacts (a, b) VALUES (?, ?);")
  .asPreparedStatement()
  .withStringValue("123")
  .withStringValue("456")
  .execute();; 
```

我得到以下异常：

```
Caused by: InvalidRequestException(why:Cannot execute/prepare CQL2 statement since the CQL has been set to CQL3(This might mean your client hasn't been upgraded correctly to use the new CQL3 methods introduced in Cassandra 1.2+).)
at org.apache.cassandra.thrift.Cassandra$prepare_cql_query_result.read(Cassandra.java:38738)
at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
at org.apache.cassandra.thrift.Cassandra$Client.recv_prepare_cql_query(Cassandra.java:1598)
at org.apache.cassandra.thrift.Cassandra$Client.prepare_cql_query(Cassandra.java:1584)
at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$6$3$1.internalExecute(ThriftColumnFamilyQueryImpl.java:747)
at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$6$3$1.internalExecute(ThriftColumnFamilyQueryImpl.java:742)
at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:56) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:24:19.743

我使用`Astyanax 1.56.31`. 您需要在您的 `AstyanaxConfigurationImpl`实例中设置以下内容：

```
.setTargetCassandraVersion("1.2")
.setCqlVersion("3.0.0") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:01:04.490

这是因为 cassandra 客户端的更改会通知不正确地使用 CQL3 实现的高级客户端应用程序。见[https://issues.apache.org/jira/browse/CASSANDRA-5172](https://issues.apache.org/jira/browse/CASSANDRA-5172)

似乎 Astyanax 要么没有升级到这个版本的 cassandra 客户端，要么他们没有记录我目前正在寻找自己的解决方案。

# delphi - SetWindowsHookEx for WH_KEYBOARD (Global) 不使用 Dll？

> ID：14579734
> 
> 赞同：1
> 
> 时间：2013-01-29T09:38:48.717
> 
> 标签：delphi, setwindowshookex

*我试图让我的钩子在一个进程中全局工作，当将hMod*和*dwTID*设置为 0时，它使用 _LL (LowLevel) 对我有用。

有没有办法让它在没有 .dll 的情况下工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T13:39:18.650

这是不可能的。几乎在 MSDN 上讨论或给出全局挂钩示例的每个地方都提到了该要求。一些例子：

[挂钩程序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx#procedures)

> ...可以在与调用线程相同的桌面中的任何应用程序的上下文中调用全局挂钩过程，因此该过程必须位于单独的 DLL 模块中。...

[安装和释放挂钩程序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644960%28v=vs.85%29.aspx#installing_releasing)

> ...您必须将全局挂钩过程放置在与安装挂钩过程的应用程序分开的 DLL 中。...

[SetWindowsHookEx 函数 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)

> ...所有全局挂钩函数都必须在库中。...

请注意，原因可能是*代码可以根据*文档在其他应用程序的上下文中运行，但情况并非总是如此 - 在文档中也提到过。来自`SetWindowsHookEx`：

> ...请注意，可以在安装挂钩的线程上调用 WH_MOUSE、WH_KEYBOARD、WH_JOURNAL*、WH_SHELL 和低级挂钩，而不是在处理挂钩的线程上调用。...

我真的不知道*罐头*在该声明中的真正含义。是不是有时是这样，有时又是这样，但我只进行了一次测试，并且确实在安装钩子的线程的上下文中调用了钩子过程，从而导致不必要的任何进程间通信。但是，这不会改变对*dll*的要求。

低级钩子的处理完全不同。[正如文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644985%28v=vs.85%29.aspx)中在某种程度上解释的那样，对钩子的调用是通过向安装了钩子的线程发送消息然后将上下文切换到该线程来完成的——这不需要安装 dll。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-07T19:55:20.253

澄清一下，WH_KEYBOARD_LL 和 WH_MOUSE_LL 是不需要 dll 的低级全局钩子（其他钩子，如 WH_KEYBOARD 确实需要 dll 才能注入其他进程）：

[使用 Python 和 SetWindowsHookExA 应用低级键盘挂钩](https://stackoverflow.com/questions/9817531/applying-low-level-keyboard-hooks-with-python-and-setwindowshookexa)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T18:22:22.487

如果您打算挂钩到一个或多个外部进程，则必须在 DLL 内部实现挂钩，因为挂钩代码需要注入这些进程的地址空间，并且只有 DLL 才能做到这一点。

如果您打算只挂钩您自己的调用进程，则不需要 DLL，但您必须`SetWindowsHookEx()`在每个线程的基础上调用以安装特定于线程的挂钩，即您必须将值`hMod`设置为非零值，例如 from或。`NULL``dwThreadId``GetCurrentThreadId()``CreateThread()`

# ruby-on-rails - 在 mongoid 中测试未找到光标错误

> ID：14579739
> 
> 赞同：1
> 
> 时间：2013-01-29T09:39:11.100
> 
> 标签：ruby-on-rails, mongodb, cursor, mongoid

当我处理大量数据时，我最终在 Mongoid中出现**光标未找到错误。**我用谷歌搜索并发现了以下链接：

[DBCursor mongodb](http://api.mongodb.org/java/2.6/com/mongodb/DBCursor.html)

现在我正在使用跳过和限制功能一次处理 100 个数据并继续直到达到 7350，这是我的文档数。

因为产生游标未找到错误的时间太长。我想知道是否有任何快速方法可以测试此错误的发生。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:48:36.837

我猜也许[killOp](http://docs.mongodb.org/manual/reference/method/db.killOp/)会起作用。

# mysql - 使用连接从表中获取最新值

> ID：14579745
> 
> 赞同：1
> 
> 时间：2013-01-29T09:39:31.083
> 
> 标签：mysql, sql, join, greatest-n-per-group

我需要根据创建时间获得最大优先级值。我的查询在这里，

```
select
  t.id, ocf1.Content Priority, ocf1.created
from
  Tickets t inner Join ObjectCustomFieldValues ocf1
  on ocf1.ObjectId=t.id
where
  ocf1.CustomField=301
  and t.queue in (27,50,49,52)
  and t.status not in ('rejected','deleted')
  and t.created between subdate(now(),interval 1500 minute) and now();

id     Priority  created
-------------------------------
27344  P4        28/01/13 09:17
27344  Incident  28/01/13 09:18
27345  P4        28/01/13 09:22
27346  P4        28/01/13 09:25
27353  P4        28/01/13 10:08
27353  Incident  28/01/13 10:09
27360  P4        28/01/13 10:38
27360  Incident  28/01/13 10:39
27365  P3        28/01/13 11:52
27376  P4        28/01/13 14:49 
```

示例：这里我需要`Incident`id的最大优先级值`27344`。与其他 ID 相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:46:22.117

```
SELECT  a.*, b.*      -- select your desired columns here
FROM    Tickets a
        INNER JOIN ObjectCustomFieldValues b
            ON b.ObjectId = a.id
        INNER JOIN
        (
            SELECT  ObjectId, MAX(created) max_val
            FROM    ObjectCustomFieldValues
            WHERE   CustomField = 301
            GROUP   BY ObjectId
        ) c ON  b.ObjectId = c.ObjectId AND
                b.created = c.max_val
WHERE   b.CustomField = 301 AND
        a.queue IN (27,50,49,52) AND
        a.status NOT IN ('rejected','deleted') AND 
        a.created BETWEEN SUBDATE(NOW(), INTERVAL 1500 MINUTE) AND NOW() 
```

你的日期真的是这样格式化的：`28/01/13 09:17`？数据类型是字符串。对？如果是这种情况，您需要将其转换为日期时间，这样`MAX()`才能正常工作。

# objective-c - Addresponse - 仅添加到内存（XCode）

> ID：14579748
> 
> 赞同：5
> 
> 时间：2013-01-29T09:39:32.113
> 
> 标签：objective-c, xcode, cocoa-touch, cocoa

我正在尝试将我的项目连接到一个 php 文件，但每次都显示：

```
ADDRESPONSE - ADDING TO MEMORY ONLY 
```

我以前从未见过。这是我使用的代码：

```
//Gets the php
FindURL = [NSString stringWithFormat:@"http://domain.com/Myfile.php?username=%@", Username.text];
// to execute php code
URLData = [NSData dataWithContentsOfURL:[NSURL URLWithString:FindURL]];

// to receive the returend value
DataResult = [[NSString alloc] initWithData:URLData encoding:NSUTF8StringEncoding];

NSLog(@"%@",DataResult); 
```

我能做些什么？

提前致谢

更新代码：

```
- (IBAction)UpdateList:(id)sender{

    NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://domain.com/Myfile.php"]
        cachePolicy:NSURLRequestUseProtocolCachePolicy
        timeoutInterval:15.0];
    NSURLConnection *Connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    if (Connection) {
        //Connect
    }else{
        //Error
    }

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    DataResult = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

    NSLog(@"%@", DataResult);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:27:11.083

我遇到了同样的问题 - 请查看以下内容，这可能会对您有所帮助： [Log Messages I didn't ask in Xcode 4.5 with iOS 6.0](https://stackoverflow.com/questions/12547490/log-messages-i-didnt-asked-for-in-xcode-4-5-with-ios-6-0)

到目前为止我还没有找到解决方案，但是因为我现在知道这个日志是由操作系统生成的，所以我不再在我的源代码中寻找它的来源:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T07:44:26.770

我通过`NSURLRequest`一个无效的 URL 得到了这个日志。我的应用程序应该`UIAlertView`在它在服务器端捕获错误时显示一个，所以我要求我们的系统管理员关闭我们的整个站点，以便我可以看到会发生什么。他拒绝了我的请求，所以我随机输入字母并`.com`在请求 URL 的末尾添加一个。

原来我们有一个内部测试服务器，似乎无法从我的 WiFi 连接访问，所以当我将 URL 更改为那个时，日志停止出现。

# java - 字符串实用程序中可能出现空指针异常

> ID：14579751
> 
> 赞同：2
> 
> 时间：2013-01-29T09:39:36.207
> 
> 标签：java, apache-stringutils

我正在使用 commons StringUtils.isNotBlank() 检查字符串是否不为空且为空白。在某些情况下，将空白字符串或 null 作为输入验证未按预期进行。空或空白正在通过。

```
 if( StringUtils.isNotEmpty(obj.getvalue()) ){
        .............
    } 
```

当我浏览我发现[的 StringUtils 的文档时，](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)

> 空处理的副作用是 NullPointerException 应被视为 StringUtils 中的错误（不推荐使用的方法除外）。

剂量是什么意思？跟我的剧情有关系吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T09:42:57.983

阅读您引用的上面的句子：

> StringUtils 安静地处理空输入字符串。也就是说，一个空输入将返回空。返回 boolean 或 int 的详细信息因方法而异。
> 
> 空处理的副作用是 NullPointerException 应被视为 StringUtils 中的错误（不推荐使用的方法除外）。

因此，由于它处理空值，它不应该抛出 NullPointerExceptions。

如果你查看方法`isNotBlank`，你会发现这张表：

```
 StringUtils.isNotBlank(null)      = false
 StringUtils.isNotBlank("")        = false
 StringUtils.isNotBlank(" ")       = false
 StringUtils.isNotBlank("bob")     = true
 StringUtils.isNotBlank("  bob  ") = true 
```

如果您收到其他值，您确实遇到了错误，您应该报告。但 NPE 更有可能是由其他原因引起的。例如，也许其他一些 StringUtils 方法返回 null。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T09:45:36.147

> 在某些情况下，将空白字符串或 null 作为输入验证未按预期进行。空或空白正在通过。

您的验证逻辑中存在错误，或者您的数据来自未经过验证的源。

如果您发布了实际代码和 NPE 堆栈跟踪，我们可以帮助您找到它。

* * *

> 这是什么意思？

这意味着如果`StringUtils.isNotBlank()`抛出 NPE，则该方法中存在错误。（javadoc 所说的“副作用”是一种*逻辑*副作用；即 API 定义方式的次要逻辑结果。）

> 跟我的剧情有关系吗？

它与它无关......除非调用 to`StringUtils.isNotBlank()`*是*抛出 NPE。

* * *

**更新**

考虑您的示例代码（出于说明目的进行了调整）：

```
if (StringUtils.isNotEmpty(obj.getvalue())){
    String s = obj.getvalue();
    if (s == null) {
        System.err.println("Ooops!!");
    }
} 
```

我可以想到许多场景，在这些场景中，这段代码要么给出 NPE，要么导致“糟糕！” 要打印。例如：

1.  如果`obj`是，`null`那么肯定会抛出 NPE。这可能发生在您调用 之前`isNotEmpty`，或者（如果`obj`可以更改变量的值可以更改）在“then”块中。

2.  该`getValue`方法可能会抛出 NPE。

3.  调用`getValue`有可能（但不太可能）有副作用，导致它在第二次调用时改变状态`obj`并返回不同的值（例如`null`）。哎呀！

4.  `obj`当当前线程正在执行上述代码时，可能有其他线程正在更改对象的状态。哎呀！

这些问题中的大多数可以按如下方式“修复”：

```
String s = obj.getvalue();
if (StringUtils.isNotEmpty(s)){ // No NPE possible here now
    if (s == null) {
        System.err.println("Ooops!!");  // Cannot happen now.
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:44:32.727

要详细检查您的问题，您可以发布一个您认为代码出错的具体示例。

**StringUtils 行为**

*   StringUtils.isNotBlank(null) 返回 false
*   StringUtils.isNotBlank("") 返回 false
*   StringUtils.isNotBlank(" ") 返回 false
*   StringUtils.isNotBlank("testvalue") 返回真

如果行为是别的，这是库中的错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:02:11.427

是否有可能抛出 NPE，`obj.getvalue()`因为 StringUtils.isNotBlank() 永远不会抛出 NPE。如果您在多线程环境中运行代码，您可以使您的方法同步，以防止同时从多个来源访问您的方法。

如需更多帮助，您可以发送您的`stack trace`or`code block`吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-21T11:39:27.893

`StringUtils.isNotBlank()`方法或文档中实际上存在错误。如果你将 a 传递`null`给它，`isNotBlank()`它会抛出`NullPointerException`与文档相反的 a。因此，其中一个（代码或文档）不正确。

这是使用 Guave 的一个很好的替代品：[http://www.javaworld.com/article/2074361/core-java/checking-for-null-or-empty-or-white-space-only-string-in-java。 html](http://www.javaworld.com/article/2074361/core-java/checking-for-null-or-empty-or-white-space-only-string-in-java.html)

# javascript - javascript没有给出计算机名称

> ID：14579752
> 
> 赞同：2
> 
> 时间：2013-01-29T09:39:38.763
> 
> 标签：javascript, computer-name

我正在尝试使用这样的 javascript 获取客户端计算机名称

```
<script language="javascript" type="text/javascript">
        function GetComputerName() {
            try {
                var network = new ActiveXObject('WScript.Network');
                alert(network.computerName);
            }
            catch (e) {
                alert('a');
            }
        }
    </script> 
```

但这并没有返回任何其他异常。请帮助我找出 Javascript 中的客户端计算机名称。

# api - 是否可以在 ServiceStack 中使用一种通用/抽象服务？

> ID：14579756
> 
> 赞同：4
> 
> 时间：2013-01-29T09:39:45.607
> 
> 标签：api, rest, servicestack

我正在使用 ServiceStack 开发一个（希望如此）RESTful API。

我注意到我的大多数服务看起来都一样，例如，GET 方法看起来**像**这样：

```
 try
        {
            Validate();
            GetData(); 
            return Response();
        }
        catch (Exception)
        {
            //TODO: Log the exception
            throw; //rethrow
        } 
```

假设我有 20 个资源，20 个请求 DTO，所以我或多或少地获得了大约 20 个相同模板的服务......

我试图创建一个通用或抽象的服务，以便我可以创建只实现相关行为的继承服务，但我被卡住了，因为请求 DTO 不是序列化所需的。

**有什么办法吗？**

**编辑：**

我正在尝试做的一个例子：

```
public abstract class MyService<TResponse,TRequest> : Service
{
    protected abstract TResponse InnerGet();
    protected abstract void InnerDelete();
    public TResponse Get(TRequest request)
    {
        //General Code Here.
        TResponse response = InnerGet();
        //General Code Here.
        return response;
    }

    public void Delete(TRequest request)
    {
        //General Code Here.
        InnerDelete();
        //General Code Here.
    }
}

public class AccountService : MyService<Accounts, Account>
{

    protected override Accounts InnerGet()
    {
        throw new NotImplementedException();//Get the data from BL
    }

    protected override void InnerDelete()
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T14:05:31.003

为了在[New API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)中做到这一点，我们引入了 IServiceRunner 的概念，它将服务的执行与服务的实现分离。

要添加您自己的服务挂钩，您只需从默认实现中覆盖 AppHost 中的默认服务运行程序：

```
public virtual IServiceRunner<TRequest> CreateServiceRunner<TRequest>(ActionContext actionContext)
{           
    return new ServiceRunner<TRequest>(this, actionContext); //Cached per Service Action
} 
```

用你自己的：

```
public override IServiceRunner<TRequest> CreateServiceRunner<TRequest>(ActionContext actionContext)
{           
    return new MyServiceRunner<TRequest>(this, actionContext); //Cached per Service Action
} 
```

MyServiceRunner 只是一个实现您感兴趣的自定义钩子的自定义类，例如：

```
public class MyServiceRunner<T> : ServiceRunner<T> {
    public override void OnBeforeExecute(IRequestContext requestContext, TRequest request) {
      // Called just before any Action is executed
    }

    public override object OnAfterExecute(IRequestContext requestContext, object response) {
      // Called just after any Action is executed, you can modify the response returned here as well
    }

    public override object HandleException(IRequestContext requestContext, TRequest request, Exception ex) {
      // Called whenever an exception is thrown in your Services Action
    }
} 
```

此外，有关更细粒度的错误处理选项，请查看[错误处理 wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-20T14:51:31.997

我的解决方案是添加一个额外的层，我可以在其中处理每个实体的逻辑：

基本逻辑示例：

```
public interface IEntity
{
    long Id { get; set; }
}

public interface IReadOnlyLogic<Entity> where Entity : class, IEntity
{
    List<Entity> GetAll();
    Entity GetById(long Id);
}
public abstract class ReadOnlyLogic<Entity> : IReadOnlyLogic<Entity> where Entity : class, IEntity, new()
{
    public IDbConnection Db { get; set; }

    #region HOOKS
    protected SqlExpression<Entity> OnGetList(SqlExpression<Entity> query) { return query; }
    protected SqlExpression<Entity> OnGetSingle(SqlExpression<Entity> query) { return OnGetList(query); }
    #endregion

    public List<Entity> GetAll()
    {
        var query = OnGetList(Db.From<Entity>());
        return Db.Select(query);
    }

    public Entity GetById(long id)
    {
        var query = OnGetSingle(Db.From<Entity>())
                .Where(e => e.Id == id);

        var entity = Db.Single(query);

        return entity;
    }
} 
```

然后我们可以使用如下钩子：

```
public interface IHello : IReadOnlyLogic<Hello> { }

public class HelloLogic : ReadOnlyLogic<Hello>, IHello
{
    protected override SqlExpression<Hello> OnGetList(SqlExpression<Hello> query)
    {
        return query.Where(h => h.Name == "Something");
    }
} 
```

最后我们的服务只调用我们的逻辑：

```
public class MyServices : Service
{
    IHello helloLogic;

    public object Get()
    {
        return helloLogic.GetAll();
    }
} 
```

# linux - 如何使用 linux 命令行为大多数书签添加书签

> ID：14579769
> 
> 赞同：0
> 
> 时间：2013-01-29T09:40:11.787
> 
> 标签：linux, command-line

我如何在 linux (centos 6.2) 中为我的自定义命令行添加书签？

我正在使用`history | grep keyword`然后`!command number`现在。

但是有没有更快的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:43:10.120

只需使用别名：

```
alias lala="ls -lrt|grep a" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:42:11.243

是的。您可以在文件夹中定义一个`alias`、一个函数或编写一个脚本。`bin`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:53:01.210

大多数 shell 提供更复杂的历史扩展。例如，您可以使用

```
!?str 
```

在 zsh、bash 等中执行包含`str`.

如果您想要更广泛地控制您想要选择的内容，另一种保存击键的可能性是使用历史的增量搜索。

要向后搜索历史，此功能通常绑定到`<ctrl>-r`，对于向前搜索`<ctrl>-s`（至少在 bash 和 zsh 中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T22:47:36.607

只需在其上放一个评论标签，您就可以搜索后者的标签。

```
$ my-command # tag-bookmark-1 
```

然后稍后您可以使用 grep 或搜索历史记录来查找 tag-bookmark-1。如果你愿意，可以使用更短的东西。（我不能说！，因为我总是使用 export histchars=""）

# php - 使用php通过url参数显示/隐藏css类

> ID：14579771
> 
> 赞同：-2
> 
> 时间：2013-01-29T09:40:15.373
> 
> 标签：php, css, class, hide, show

我正在使用开源 PHP CMS，我可以按菜单项显示/隐藏侧面模块。我遇到的问题是我想在不属于菜单项的页面上显示/隐藏模块（即注册过程中的第 2 步），这不是 CMS 提供的功能。

如何通过 url 参数显示/隐藏 css 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:42:08.933

你可以通过 $_GET 做到这一点

```
<?php if(isset($_GET['param']) && $_GET['param'] ==youwant){  ?>

//css

<?php  } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T17:24:10.000

相当容易

`.CLASSNAME { 显示：无 }

# iphone - UIScrollview 图像无限滚动（图像加载）问题 ios

> ID：14579772
> 
> 赞同：0
> 
> 时间：2013-01-29T09:40:16.933
> 
> 标签：iphone, ios, uiscrollview, uiimageview

我正在尝试在 上显示图像`UIScrollView`，所有这些图像都是水平显示的，但是，我在滚动加载图像时遇到了闪烁的问题。

我尝试使用此代码并将 UILabel 修改为 UIImageview 并在滚动时调用异步图像下载`scrollViewDidEndDecelerating`- [Image Scroll Circular](http://mobiledevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html "无限图像滚动")，一个只有 3 页。它适用于“文本标签”示例，但是当我异步加载图像（也缓存）时，滚动时会闪烁。

假设，如果我从第 0 页滚动到第 1 页，那么第 0 页会闪烁一会儿，然后可以再次看到第 1 页。

知道如何摆脱这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:50:21.763

尝试使用当前主队列添加图像：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self.scrollView addSubview:imageView];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:02:15.473

我的 .m 类您需要一个视图，并在该视图上添加了 imageViewSlider(uiimageview)。将它与活动指示器和分离的图像提取相结合，看看它是否有效。这实现了没有滚动视图的幻灯片

```
#import "ImageSliderView.h"
#import <QuartzCore/QuartzCore.h>
#define kAnimationKey @"animationKey"
@interface ImageSliderView ()

@end

@implementation ImageSliderView
@synthesize imageData;
@synthesize imageViewSlider;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Set GestureRecoginzer..
    //******************************************************Swipe recognisers**************************
    UISwipeGestureRecognizer *rightRecognizer=[[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipeHandle:)];

    rightRecognizer.direction=UISwipeGestureRecognizerDirectionRight;

    [rightRecognizer setNumberOfTouchesRequired:1];

    [self.view addGestureRecognizer:rightRecognizer];

    [rightRecognizer release];

    UISwipeGestureRecognizer *leftRecognizer=[[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipeHandle:)];

    leftRecognizer.direction=UISwipeGestureRecognizerDirectionLeft;

    [leftRecognizer setNumberOfTouchesRequired:1];

    [self.view addGestureRecognizer:leftRecognizer];

    [leftRecognizer release];

    //******************************************************
    currentPage=0;
        // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [self setImageData:nil];
    [self setImageViewSlider:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}
-(void)dealloc
{
    [imageData release];
    [imageViewSlider release];
    [super dealloc];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark ---swipe
-(void)swipeHandle:(UISwipeGestureRecognizer *)guestureRecognizer
{
    if(guestureRecognizer.direction==UISwipeGestureRecognizerDirectionLeft)
    {

         [self nextButtonAndSlideForwad];

    }
    if(guestureRecognizer.direction==UISwipeGestureRecognizerDirectionRight)
    {
                [self prevButtonAndSlideBack];
    }

}

-(void)nextButtonAndSlideForwad
{

    self.imageViewSlider.backgroundColor=[UIColor redColor];
            [self slideForward];

}

-(void)prevButtonAndSlideBack
{
    self.imageViewSlider.backgroundColor=[UIColor greenColor];
    [self slideBackward];
}

-(void)slideForward
{
    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];
    [animation setType:kCATransitionPush];
    [animation setSubtype:kCATransitionFromRight];
    [animation setDuration:0.4f];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
    [self.view exchangeSubviewAtIndex:0 withSubviewAtIndex:1]; 
    [[self.view layer] addAnimation:animation forKey:kAnimationKey];
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.55];
    [UIView commitAnimations];

}

-(void)slideBackward
{

    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];
    [animation setType:kCATransitionPush];
    [animation setSubtype:kCATransitionFromLeft];
    [animation setDuration:0.4f];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
    [self.view exchangeSubviewAtIndex:1 withSubviewAtIndex:0]; 
    [[self.view layer] addAnimation:animation forKey:kAnimationKey];
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.55];
    [UIView commitAnimations];

}

@end 
```

# ios - 未找到包含在编译源中的库

> ID：14579773
> 
> 赞同：0
> 
> 时间：2013-01-29T09:40:24.670
> 
> 标签：ios, objective-c, xcode

我在我的项目中包含了 SBJson 库，并选中了复制选项，它们列在 Build Phase/Compile Sources 部分中。尽管当我键入 #import "SBJson.h" " 自动完成提示 SBJson.h 时，当我编译项目时它失败并出现 "找不到文件" 错误。我检查了搜索路径值，一切似乎都很好，但问题仍然存在持续存在。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:09:29.960

尝试将所有源文件添加到您的项目中，然后调用：

```
#import "SBJson.h" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:45:04.210

您是否将二进制文件与库链接？您是否包含标题搜索路径？

# ruby-on-rails - 仅响应 rails 中的 json

> ID：14579774
> 
> 赞同：14
> 
> 时间：2013-01-29T09:40:25.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的只有 json 的 rails 应用程序中，每当有人调用我的 rails 应用程序并将接受标头设置为除 application/json 之外的任何内容时，我都想发送 406 代码。当我将内容类型设置为除 application / json 之外的任何内容时，我还希望它发送 415

我的控制器有 respond_to :json 放在它们上面。我只在所有动作中渲染 json。但是，如何确保为所有其他接受标头/内容类型调用的所有调用返回错误代码 406/415，并且格式设置为除 json 之外的任何内容。

例如。如果我的资源是books/1，我想允许books/1.json 或books/1 使用application/json 接受标头和内容类型

关于我如何做这两个动作的任何想法？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-29T09:46:32.023

基本上，您可以通过两种方式限制您的响应。

首先，有`respond_to`你的控制器。`406 Not Acceptable`如果请求未定义的格式，这将自动触发。

例子：

```
class SomeController < ApplicationController
  respond_to :json

  def show
    @record = Record.find params[:id]

    respond_with @record
  end
end 
```

另一种方法是添加一个`before_filter`来检查格式并做出相应的反应。

例子：

```
class ApplicationController < ActionController::Base
  before_filter :check_format

  def check_format
    render :nothing => true, :status => 406 unless params[:format] == 'json' || request.headers["Accept"] =~ /json/
  end
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-29T09:45:35.553

您可以使用 ApplicationController 中的 before_filter 来完成

```
before_filter :ensure_json_request

def ensure_json_request
  return if params[:format] == "json" || request.headers["Accept"] =~ /json/
  render :nothing => true, :status => 406
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-31T14:26:13.547

在 Rails 4.2+ 上，respond_to 已被删除，因此除非您只想为此导入完整的响应者 gem，否则最好的选择是自己动手。这是我在我的 rails 5 api 中使用的：

```
 class ApplicationController < ActionController::API
      before_action :force_json

      private
      def force_json
        # if params[_json] it means request was parsed as json 
        # if body.read.blank? there was no body (GET/DELETE) so content-type was meaningless anyway
        head :not_acceptable unless params['_json'] || request.body.read.blank?
      end
    end 
```

# rest - 休息服务发送图像

> ID：14579776
> 
> 赞同：1
> 
> 时间：2013-01-29T09:40:32.110
> 
> 标签：rest

我们已经在数据库中存储了用户的图像，并且我们已经暴露了其余的服务来读取图像。现在它的工作原理是，如果我在浏览器中调用 rest 服务，浏览器会直接在浏览器中显示图像。我直接将图像作为休息响应发送。现在我们要发送一些其他属性，例如用户是否关联了图像等等。所以我们决定创建一个具有类似属性的 bean 和一个字节数组。字节数组包含图像的二进制内容。是否有可能实现如前所述，我们可以在客户端用二进制数组重建图像吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T22:03:14.970

是的，绝对可以通过 Rest 服务发送图像，调用服务的客户端可以使用该图像。您需要做的是，将您的二进制数据转换为 Base64 编码字符串并设置正确的内容类型，然后从您的 Rest 服务返回此响应。

# c# - 安装运行项目时客户端出错

> ID：14579780
> 
> 赞同：1
> 
> 时间：2013-01-29T09:40:45.503
> 
> 标签：c#, .net, winforms, crystal-reports, dataset

我开发了一个基于窗口的项目，这是我的第一个项目，我正在使用水晶报表进行打印，但是在客户端安装后，当我运行报表时，它会显示一个异常，即

```
System.IO.FileNotFoundException: Could not load file or assembly 'System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The system cannot find the file specified.
File name: 'System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'
at BARTAN_STORE.DataSets.BalanceSheet.InitClass() 
```

你能告诉我如何解决这个异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:44:42.000

您可以在应用程序部分调整项目的版本（目标框架）

1.  右键单击您的项目

2.  选择属性部分

3.  在应用程序部分更新目标框架

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:28:57.210

发生这种情况是因为在您的客户端系统上这些 dll 未注册

您需要将该程序集 (.dll) 复制到您的项目文件夹，并确保您应该从该项目的新位置添加引用。

我遇到了同样的问题。

# android - 如何在“片段”中找到列表视图

> ID：14579783
> 
> 赞同：4
> 
> 时间：2013-01-29T09:40:51.337
> 
> 标签：android, fragment

我有一个向服务器发送请求并下载 json 的片段，然后将其解析为一个列表视图，不知何故我无法正确访问该视图。下面是我的应用程序的某些部分，这是我第一次接触带有片段的列表视图，***因为出于某种原因，我只允许使用 Fragment，所以我选择 ' `setAdapter`' 而不是 ' `setListAdapter`' 作为我的适配器***

我的片段.java

```
 public class gallery extends Fragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            View myFragmentView = inflater.inflate(R.layout.tab_frag2_layout,
                    container, false);
            return myFragmentView;
        }

    public void onActivityCreated(Bundle savedInstanceState) {
    .........
    .........
    .........
    setAdapter(colorAdapter);

    } 
```

layout.tab_frag2_layout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="#ffffff">

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="@dimen/list_padding"
    android:paddingRight="@dimen/list_padding"
    android:tag="listf" />

</LinearLayout> 
```

我的期望是使用

`MyListView = (ListView)myFragmentView.findViewById(R.id.list);`

得到我的看法，但它不起作用......现在我只想得到我的列表视图并申请

`MyListView.setAdapter(colorAdapter)`对它

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T09:57:28.630

Option1: Since your fragment layout consists of just a simple ListView. Consider using

> public class gallery extends ListFragment

Then you can use this code to get your listview.

> myFragmentView.getListView()

Option2: As Nickolaus mentioned, you need a custom id if you want to use findViewById.

> android:id="@+id/listview1"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T09:50:16.623

如果您不想使用 ListFragment，则需要添加自定义 id (android:id="@+id/custom_id") 然后您可以使用 findViewById 查找 ListView

# android - 使用 LinkMovementMethod 时可以禁用 TextView 中的滚动吗？

> ID：14579785
> 
> 赞同：7
> 
> 时间：2013-01-29T09:40:58.857
> 
> 标签：android, scroll, textview

我在 textView 中使用可点击跨度来启用仅部分文本可点击。它工作正常，除了 textView 向下滚动，这是我不想要的。发生这种情况是因为我使用了在需要时滚动的 LinkMovementMethod。反正有没有取消滚动？

```
SpannableString ss = "My text [click area] end."

    ClickableSpan clickableSpan = new ClickableSpan() {
        @Override   
        public void onClick(View textView) {
            // My click action
        }
    };

    // Set the span
    String fromString = "text";
    int startClickPos = ss.toString().indexOf(fromString)+fromString.length()+1;
    int endCickPos=startClickPos+ 12;
    ss.setSpan(clickableSpan, startClickPos, endCickPos, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

    textView.setText(ss);
    textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T13:30:41.963

我正在使用此代码禁用带有 clickableSpan 的 TextView 滚动。

```
public class LinkMovementMethodOverride implements View.OnTouchListener{

@Override
public boolean onTouch(View v, MotionEvent event) {
    TextView widget = (TextView) v;
    Object text = widget.getText();
    if (text instanceof Spanned) {
        Spanned buffer = (Spanned) text;

        int action = event.getAction();

        if (action == MotionEvent.ACTION_UP
                || action == MotionEvent.ACTION_DOWN) {
            int x = (int) event.getX();
            int y = (int) event.getY();

            x -= widget.getTotalPaddingLeft();
            y -= widget.getTotalPaddingTop();

            x += widget.getScrollX();
            y += widget.getScrollY();

            Layout layout = widget.getLayout();
            int line = layout.getLineForVertical(y);
            int off = layout.getOffsetForHorizontal(line, x);

            ClickableSpan[] link = buffer.getSpans(off, off,
                    ClickableSpan.class);

            if (link.length != 0) {
                if (action == MotionEvent.ACTION_UP) {
                    link[0].onClick(widget);
                } else if (action == MotionEvent.ACTION_DOWN) {                             
                    // Selection only works on Spannable text. In our case setSelection doesn't work on spanned text
                    //Selection.setSelection(buffer, buffer.getSpanStart(link[0]), buffer.getSpanEnd(link[0]));
                }
                return true;
            }
        }

    }

    return false;
}

} 
```

之后将其作为触摸侦听器应用到目标文本视图：-

```
textview.setOnTouchListener(new LinkMovementMethodOverride()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-14T06:30:14.100

*   100% 为我工作，无需在 adnroid 中启用 = false，您可以使用自动链接且无需滚动。

    ```
    public class PreventScrollTextView extends TextView {
    public PreventScrollTextView(Context context) {
    super(context);
    }

    public PreventScrollTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    }

    public PreventScrollTextView(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
    }

    @TargetApi(Build.VERSION_CODES.LOLLIPOP)
    public PreventScrollTextView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
    super(context, attrs, defStyleAttr, defStyleRes);
    }

    @Override
    public void scrollTo(int x, int y) {
    //do nothing
    }
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:14:28.023

只需使用：

```
textview.setEnabled(false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-04T12:02:36.610

这个类定义为：

```
public class LinkMovementMethod extends ScrollingMovementMethod { 
```

因此，通过使用`LinkMovementMethod`，您已经明确要求它滚动。

如果你想拥有可点击的链接而不是滚动，只需简单地复制一个`LinkMovementMethod`类，只需进行一次更改：

```
public class MyLinkMovementMethod extends BaseMovementMethod { 
```

并改用它。

# javascript - 如何将数据从表格传递到输入框？

> ID：14579789
> 
> 赞同：0
> 
> 时间：2013-01-29T09:41:10.573
> 
> 标签：javascript, jquery

我有这张表列出用户名和电子邮件：

```
<table>
    <tr>
        <th>Users</th>      
    </tr>
    <tr class="altrow">
        <td>admin &nbsp; <div style="visibility: hidden">admin@email.com</div></td>
    </tr>
    <tr>
        <td> User1 &nbsp;<div style="visibility: hidden">user1@email.com</div></td>
    </tr>
    <tr class="altrow">
        <td>User 2&nbsp;<div style="visibility: hidden">user2@email.com </div></td>
    </tr>
</table> 
```

首先，我不确定这是否是公开电子邮件并将可见性设置为隐藏的好习惯，但在这种情况下，安全性不是问题。

主要问题是，一旦单击用户名或旁边的复选框，我会认为电子邮件地址会出现在以下框中：

```
<input name="data[To]" type="text" id="To"/> 
```

我真的很感谢你在这里的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:44:05.480

类似以下的内容将适用于您当前的标记（尽管为您的表提供一个 id 来选择它会更好）：

```
$(document).ready(function() {
    $("table td").click(function() {
        $("#To").val( $(this).find("div").text() );
    });
}); 
```

也就是说，单击任何`td`，找到其中`div`的内容并将其内容放入`input`. 当然，这假设每个`td`都只包含一个`div`.

演示：http: [//jsfiddle.net/hUXx4/](http://jsfiddle.net/hUXx4/)

我更倾向于将数据存储在 html5 样式的`data-`属性中，例如：

```
<td data-email="admin@email.com">admin</td> 
```

...在这种情况下，您会像这样使用它：

```
$("#To").val( $(this).attr("data-email") );
// OR
$("#To").val( $(this).data("email") ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T09:49:20.843

作为@nnnnnn 答案的附加说明，如果您使用它会更好：

```
<td data-email="admin@email.com"> 
```

然后你可以使用 jQuery 的[data](http://api.jquery.com/jQuery.data/)方法，使你的代码看起来像这样：

```
$(document).ready(function() {
    $("table td").click(function() {
        $("#To").val($(this).data("email"));
    });
}); 
```

# android - MediaCodec：如何测试/播放编码器的输出。？

> ID：14579791
> 
> 赞同：2
> 
> 时间：2013-01-29T09:41:17.647
> 
> 标签：android, video, android-4.2-jelly-bean, android-mediacodec

我是android开发的新手。我正在尝试为在 jellybean 版本上运行的 android 手机编写一个视频压缩器应用程序。我正在使用 MediaCodec API。

以下是我为启动解码器和编码器所做的初始设置。我按照文档进行了编码和解码。但是我得到的输出不能通过简单地双击来播放。谁能建议我一种方法来检查输出以查看它是否有效。？

```
// Prepare and start Decoder.
MediaCodec mediaDecoder = MediaCodec.createDecoderByType(inputFileMIME /* got from input file using MediaMetadataRetriever */);
mediaDecoder.configure(mediaFormatForDecoder /* got from input file using MediaMetadataRetriever */, null, null, 0);
mediaDecoder.start();
ByteBuffer[] decoderInputBuffers = mediaDecoder.getInputBuffers();
ByteBuffer[] decoderOutputBuffers = mediaDecoder.getOutputBuffers();

int width = 320, height = 240;
int bitRate = 125000, frameRate = 15;
int colorFormat = MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420Planar;
int iFrameInterval = 75;

// Create video format for encoder.
MediaFormat mediaFormatForEncoder = MediaFormat.createVideoFormat("video/avc",width,height);
mediaFormatForEncoder.setInteger(MediaFormat.KEY_BIT_RATE, bitRate) ;
mediaFormatForEncoder.setInteger(MediaFormat.KEY_FRAME_RATE, frameRate);
mediaFormatForEncoder.setInteger(MediaFormat.KEY_COLOR_FORMAT, colorFormat);
mediaFormatForEncoder.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, iFrameInterval);

// Prepare and start Encoder.
MediaCodec mediaEncoder = MediaCodec.createEncoderByType("video/avc");
mediaEncoder.configure(mediaFormatForEncoder, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);
mediaEncoder.start();
ByteBuffer[] encoderInputBuffers = mediaEncoder.getInputBuffers();
ByteBuffer[] encoderOutputBuffers = mediaEncoder.getOutputBuffers(); 
```

我真的被困在这里了。请帮帮我。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-12T23:25:33.560

@Ganesh 的评论是正确的提示。

检查[http://developer.android.com/reference/android/media/MediaMuxer.html](http://developer.android.com/reference/android/media/MediaMuxer.html)以将您的流混合为适当的容器格式，例如 MP4。

# java - ListView 中的 Android 活动转换

> ID：14579792
> 
> 赞同：11
> 
> 时间：2013-01-29T09:41:22.873
> 
> 标签：java, android, listview, animation, transition

我正在尝试在 Android 中完成以下 Activity 转换：

![在此处输入图像描述](../Images/9312184a674465a20a38d1bf7db583f1.png)

在**1**中，我们看到了一个常见的 ListView。现在（**2**），当我将手指放在 ListView 元素上并向左滑动手指时，所有其他 ListView 元素都会移开，但我的手指放在上面的元素除外。如果转换完成，“选定”ListView 元素会在屏幕上展开并显示一些内容。

**问题**：库存 API 函数是否可以进行这种转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T06:19:22.257

如果您的目标是 JellyBean 或以上，您可以使用 ActivityOptions 类来自定义活动启动动画。

以下是实现此目的的伪代码：

```
Intent i = //the intent for the new activity
View v = //the selected list item
Bundle bundle = ActivityOptions.makeScaleUpAnimation(v, 0, 0, v.getWidth(), v.getHeight()).toBundle();
startActivity(i, bundle); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T19:45:55.820

虽然@hasanghaforian 在技术上是正确的，但是继承 AdapterView 是非常困难的。我建议你采用这种方法。我已经包含了一个完整的工作示例。

1.  将您的 ListView 视图放在 relativeLayout 中
2.  OnClick，膨胀渲染器的副本
3.  查找渲染器所在位置与 ListView 父级的关系的全局坐标
4.  将复制的渲染器添加到 RelativeLayout（ListView 的父级）
5.  动画 listView 离开
6.  在该动画结束时，为您的新渲染器设置动画
7.  利润！

```
public class MainActivity extends Activity {

    private RelativeLayout layout;
    private ListView listView;
    private MyRenderer selectedRenderer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        layout = new RelativeLayout(this);
        setContentView(layout);
        listView = new ListView(this);
        RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
        layout.addView(listView, rlp);

        listView.setAdapter(new MyAdapter());
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                // find out where the clicked view sits in relationship to the
                // parent container
                int t = view.getTop() + listView.getTop();
                int l = view.getLeft() + listView.getLeft();

                // create a copy of the listview and add it to the parent
                // container
                // at the same location it was in the listview
                selectedRenderer = new MyRenderer(view.getContext());
                RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(view.getWidth(), view
                        .getHeight());
                rlp.topMargin = t;
                rlp.leftMargin = l;
                selectedRenderer.textView.setText(((MyRenderer) view).textView.getText());
                layout.addView(selectedRenderer, rlp);
                view.setVisibility(View.INVISIBLE);

                // animate out the listView
                Animation outAni = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0f,
                        Animation.RELATIVE_TO_SELF, -1f, Animation.RELATIVE_TO_SELF, 0f,
                        Animation.RELATIVE_TO_SELF, 0f);
                outAni.setDuration(1000);
                outAni.setFillAfter(true);
                outAni.setAnimationListener(new Animation.AnimationListener() {
                    @Override
                    public void onAnimationStart(Animation animation) {
                    }

                    @Override
                    public void onAnimationRepeat(Animation animation) {
                    }

                    @Override
                    public void onAnimationEnd(Animation animation) {
                        ScaleAnimation scaleAni = new ScaleAnimation(1f, 
                                1f, 1f, 2f, 
                                Animation.RELATIVE_TO_SELF, 0.5f,
                                Animation.RELATIVE_TO_SELF, 0.5f);
                        scaleAni.setDuration(400);
                        scaleAni.setFillAfter(true);
                        selectedRenderer.startAnimation(scaleAni);
                    }
                });

                listView.startAnimation(outAni);
            }
        });
    }

    public class MyAdapter extends BaseAdapter {
        @Override
        public int getCount() {
            return 10;
        }

        @Override
        public String getItem(int position) {
            return "Hello World " + position;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            MyRenderer renderer;
            if (convertView != null)
                renderer = (MyRenderer) convertView;
            else
                renderer = new MyRenderer(MainActivity.this);
            renderer.textView.setText(getItem(position));
            return renderer;
        }
    }

    public class MyRenderer extends RelativeLayout {

        public TextView textView;

        public MyRenderer(Context context) {
            super(context);
            setPadding(20, 20, 20, 20);
            setBackgroundColor(0xFFFF0000);

            RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            rlp.addRule(CENTER_IN_PARENT);
            textView = new TextView(context);
            addView(textView, rlp);
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-03T18:28:09.927

该标准的一个缺点`ListView`是缺乏良好的物理学（以及改变它的能力）。因此，如果你想改变它，你只需要实现你自己的视图。你必须扩展它的一个子类`ViewGroup`，[`AdapterView`](http://developer.android.com/reference/android/widget/AdapterView.html)这样AdapterView就会成为你的半List。

**详情**：

1.  [`setAdapter(Adapter adapter)`](http://developer.android.com/reference/android/widget/AdapterView.html#setAdapter%28T%29)在方法中为您的 AdapterView 设置适配器。

2.  覆盖[`onLayout`](http://developer.android.com/reference/android/view/View.html#onLayout%28boolean,%20int,%20int,%20int,%20int%29)将项目添加到您的方法的方法`AdapterView`。您必须测量并将项目作为子视图添加到列表的正确位置（实际上是您的 AdapterView）。

3.  覆盖[onTouchEvent()](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)，所以你的列表可以滚动。而且在这里你必须做所有的魔法！当用户虚拟触摸一个项目时，列表必须滚动，当他/她水平触摸时，你必须改变列表中其他项目的位置和当用户从屏幕上拿起他/她的手指时，您必须决定其他项目是否可见或必须扩展所选项目。

**样品**：

[制作自己的 3D 列表](http://developer.sonymobile.com/2010/05/20/android-tutorial-making-your-own-3d-list-part-1/)（以及那篇文章的第 2 部分）很好地演示了我为您显示的内容。其目的是创建 3D 列表。您可以查看更多详细信息、代码片段和完整代码。尽管您必须更改它`onTouchEvent()`达到你想要的。

**注意**：*您甚至可以在 API1 中执行此操作*。

我希望这对你有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T08:18:53.573

在您的 xml 文件中，在 ListView 下方，采用另一个线性布局/相对布局并根据您的需要进行设计，但要确保它的可见性必须消失。当您点击列表视图项目时，用您的内容填充它并长按完成所有操作。对于动画，将其缩放到左侧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T11:09:35.987

当您按下该列表元素时，它应该为此调用动画，您必须通过动画。在该动画中，您应该设计它，如果您使用图像，则在这些动画中意味着通过 9 个补丁图像

# javascript - 为什么不在数组中添加元素？

> ID：14579794
> 
> 赞同：0
> 
> 时间：2013-01-29T09:41:27.383
> 
> 标签：javascript, jquery, arrays

代码：

```
$(function(){
    var Name = [];

    for($i=1; $i<16; $i++) {
        var id = $i;
        $.post("./index.php", {
            record : id
        }, function(data){
              Name.push(data);
        });
    }

    alert(Name);
}); 
```

数据返回结果为`<a href="#"><img src="./name.jpg"></a>`

请告诉我为什么数据不添加到数组中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T09:44:59.843

这`post request`是一个**异步方法**。

您甚至会在点击成功功能之前点击警报。

```
 Asynchronous means that the script will send a request to the
 server, and continue its execution without waiting for the reply. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:51:35.663

因为您正在执行异步操作（AJAX 调用），所以**只有在**请求完成后才会更新您的数据。因此，您应该在完成 ajax 调用后检查您的数组。
使用[jQuery 延迟对象](http://api.jquery.com/jQuery.when/)的方法，这可以很容易地实现：

```
$(function(){
    var Name = [];
    var requests = [];

    for($i=1; $i<16; $i++) {
        var id = $i;
        requests.push($.post("./index.php", {
            record : id
        }, function(data){
              Name.push(data);
        }));
    }

     $.when.apply($,requests).done(function(){
         alert(Name);
     });
}); 
```

# android - 令牌 goto throw 预期的语法错误

> ID：14579799
> 
> 赞同：1
> 
> 时间：2013-01-29T09:41:57.517
> 
> 标签：android

> **可能重复：**
> [java中是否有goto语句？](https://stackoverflow.com/questions/2545103/is-there-a-goto-statement-in-java)

在我的 android 应用程序中，我使用 goto 语句来控制流程。但我收到错误为“token goto 上的语法错误，抛出预期”。这是我的代码

```
label:
if(alc)
{
  r_code=st.nextToken();
  AlertDialog.Builder alert=new AlertDialog.Builder(Fetch.this);
  alert.setTitle(count+" records found for "+rytname.getText().toString());
  alert.setMessage("Are you sure want to search for "+r_code+"?");
  alert.setPositiveButton("YES", new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
      ff=1;
      alc=false;
    }
  });

  alert.setNegativeButton("NO", new DialogInterface.OnClickListener() {

   @Override
   public void onClick(DialogInterface dialog, int which) {
      // TODO Auto-generated method stub
      ff=0;
   }
  });
  alert.show();
  if (ff==0)
  {
    goto label;
} 
```

我是这个 android 的新手，帮助我避免这个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:43:55.210

**没有`goto`在 Java中工作**

即使 Java 关键字列表[指定了 goto 关键字](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)，它也被标记为*未使用*。因此，它无法工作。您必须在不使用`goto`关键字的情况下重写代码。

一般提示：有[标签语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.7)

> 语句可能有标签前缀。
> 
> ```
> LabeledStatement:
>      Identifier : Statement
> 
> LabeledStatementNoShortIf:
>      Identifier : StatementNoShortIf 
> ```
> 
> 标识符被声明为立即包含的语句的标签。
> 
> 与 C 和 C++ 不同，Java 编程语言没有 goto 语句；标识符语句标签与出现在标记语句中的任何位置的[break (§14.15)](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.15)或[continue (§14.16)语句一起使用。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.16)
> 
> 带标签语句的标签范围是立即包含的语句。– JLS (§14.7)

但是您真正想要的是在不使用它的情况下重写您的构造，例如使用`while`

```
while (f == 0) {
     // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:52:50.047

代替：

```
label:
...// the rest of your code
if (ff == 0) 
{
    goto label;
} 
```

用这个：

```
do {
...// the rest of your code
while (ff == 0); 
```

如果您可以将其转换为：

```
while (ff == 0) {
...// the rest of your code
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-29T09:45:05.550

不建议`goto`在代码中使用，因为从可读性的角度来看会不清楚。`goto`可以使用`break`and代替`continue`。替代品`goto`在[这里](https://stackoverflow.com/questions/2430782/alternative-to-goto-statement-in-java/2430829)

# javascript - javascript访问新创建的对象

> ID：14579805
> 
> 赞同：0
> 
> 时间：2013-01-29T09:42:12.790
> 
> 标签：javascript

如果

```
function foos(){alert(this)}
x=new foos() which is==={foo();}//as this keyword points to Object object 
```

所以我可以说 foos 作为那个新对象的方法但是当我这样做时

```
x.foos();//after the object is initialized,it dont work at all why? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:46:11.603

该代码创建了一个`foos`未定义`foos`为该对象属性的实例。

如果要在对象上添加属性，请尝试以下操作：

```
function foos(){
  this.myProp = "Hello";
}

var x = new foos();

alert(x.myProp); 
```

如果要向对象添加方法，请使用：

```
foos.prototype.myFunc = function(){
  alert(this.myProp);
};

x.myFunc(); //alerts Hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:46:35.500

'foos' 是构造函数，它不会是新对象方法的一部分，如果你想添加方法，你可以像这样使用它：

```
function MyClass() { }

MyClass.prototype.foos = function () {
    alert(this);
} 
```

接着：

```
var x = new MyClass();
x.foos(); 
```

# zend-framework2 - Mongo ODM 不水合引用的对象

> ID：14579806
> 
> 赞同：0
> 
> 时间：2013-01-29T09:42:12.790
> 
> 标签：zend-framework2, doctrine-odm

我在这里遇到了带有 Doctrine 的 MongoDB ODM 的问题：我有一个表单，它的字段集为“A”。该字段集“A”还有另一个字段集“B”，其中包含一个通过 DoctrineModule 的 selectObject 填充的选择元素。

根据建议的原则，每个模型/文档都应该有自己的字段集，字段集 A 有一个文档“DA”，字段集“B”有一个文档“DB”。DA 和 DB 之间也存在 ReferenceOne 关系。即 DA 具有引用一个 DB 的属性，现在这就是问题所在。

当我提交表单时，我得到一个 badMethodCallException。

> Doctrine\ODM\MongoDB\Mapping\ClassMetadataInfo::getAssociationTargetClass($assocName) 尚未实现。

这是显而易见的。

让我说我在表单和字段集中使用 DoctrineHydrator，就像这样

```
$this->setHydrator(new \DoctrineModule\Stdlib\Hydrator\DoctrineObject($documentManager)); 
```

其次是（仅在文件集中）

```
$this->setObject($document); 
```

让我说这是新手，所以我需要问可以做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:20:29.093

所需要的只是获得最新版本的学说 mongodb-odm 谢谢

# php - PHP PDO 多次更新查询将垃圾插入表中

> ID：14579808
> 
> 赞同：0
> 
> 时间：2013-01-29T09:42:18.357
> 
> 标签：php, json, insert, pdo

我从客户端接收一个 JSON 对象，其中包含随机顺序的位置属性。

地址的几乎每个组成部分都可以跟在后面，也可以跟在另一个前面。例如：州可能出现在国家之前或之后，而城市可能介于两者之间。

所以我创建了一个函数，它将每个参数动态绑定到它所属的位置。但由于某种原因，我在我的数据库中得到的唯一东西是垃圾正整数和负整数。

简单的调试，通过回显生成的查询和绑定值并没有多大帮助。

这是例如的输出（首先是查询，然后是以下形式的绑定参数：：param --- value）：

```
 [1]UPDATE locations SET active = :active,locality = :locality,local_area = :local_area,state = :state,state_short = :state_short,country_full = :country_full,country_short = :country_short,postal_code = :postal_code,ya = :ya,za = :za WHERE location_id = 385
    Params:
    :active --- true:locality --- Moscow:local_area --- gorod Moskva:state --- Moscow
    :state_short --- Moscow:country_full --- Russia:country_short --- RU:postal_code --- 121069:ya --- 55.7427928:za --- 37.61540089999994

    [2]UPDATE locations SET active = :active,street_number = :street_number,route = :route,locality = :locality,sub_local_area = :sub_local_area,local_area = :local_area,state = :state,state_short = :state_short,country_full = :country_full,country_short = :country_short,ya = :ya,za = :za WHERE location_id = 386+++:active --- true:street_number --- 31:route --- Glategny Esplanade:locality --- St Peter Port:sub_local_area --- St Peter Port:local_area --- Guernsey:state --- Bailiwick of Guernsey:state_short --- Bailiwick of Guernsey:country_full --- Grosney:country_short --- GG:ya --- 49.461137:za

 --- -2.5333570000000236 
```

代码：

```
function updateMultipile($table, $data = array()){

    $update_query = array();
    $i = 0;
    foreach($data as $key => $value){
        $sql = "UPDATE $table SET ";
            foreach($value as $column => $updatedValue){
                $sql .= $column . " = :" . $column . ",";
            }
            $sql = rtrim($sql, ", ");

        $sql .= " WHERE location_id = " . intval($key); 
        $update_query[$i] = $sql;
        $i++;
    }

    try{
        $conn = DBLink::getInstance();
        $j = 0;
        $success = 0;
        foreach($data as $fieldset => $value){
            echo('[1]');
            $sth = $conn->prepare($update_query[$j]);
            echo $update_query[$j] . "+++";
            foreach($value as $key => $myValue){
                $myKey = ':' . $key;
                $sth->bindValue($myKey, $myValue); //PDO::PARAM_STR);
                echo($myKey . " --- " . $myValue);
            }   
            if($sth->execute()){
                $success++;
            }
            else{
                echo $sth->errorCode();
            }

            $j++;
        }   
    }
    catch(PDOException $err){
        echo $err::getMessage;
    }   

    return $success;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:58:21.067

~~Mysql 不支持多次更新也不支持多次查询（我的默认）。
你需要单独运行这些更新~~
我现在看到你已经单独运行它们了。你知道很难用你的头脑而不是计算机来运行代码。

除了这段代码的问题之外，为什么不使用一些数据库包装器呢？使代码尽可能简单

```
function updateMultipile($table, $data = array())
{
    $db = DBLink::getInstance();
    foreach($data as $id => $update)
    {
        $sql = "UPDATE ?n SET ?u WHERE location_id = ?i";
        $db->query($table,$update,$id); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:17:09.087

无论如何，问题似乎是我试图多次执行相同的语句，或者当提供值（$myValue）时，bindParam 在 foreach 循环中不起作用，我会使用 $value[ $myKey] 代替，因为此函数接收引用而不是值。

无论如何，我已经决定在这种情况下，对于我的需要，bindValue 就足够了。

奇迹般有效。

函数 updateMultipile($table, $data = array()){

```
 $update_query = array();
$i = 0;
    foreach($data as $key => $value){
        $sql = "UPDATE $table SET ";
            foreach($value as $column => $updatedValue){
                $sql .= $column . " = :" . $column . ",";
            }
            $sql = rtrim($sql, ", ");

        $sql .= " WHERE location_id = " . intval($key); 
        $update_query[$i] = $sql;
        $i++;
    }

try{
    $conn = DBLink::getInstance();
    $j = 0;
    $success = 0;
    foreach($data as $fieldset => $value){
        $sth[$j] = $conn->prepare($update_query[$j]);
        foreach($value as $key => $myValue){
            $myKey = ':' . $key;
            $sth[$j]->bindValue($myKey, $myValue); //PDO::PARAM_STR);

        }   
        if($sth[$j]->execute()){
            $success++;
        }
        else{
            echo $sth[$j]->errorCode();
        }

        $j++;
    }   
}
catch(PDOException $err){
    echo $err::getMessage();
}   

return $success;
} 
```

# java - 如何在单个类的基础上设置 JAXB 中元素的 elementFormDefault 而不是为整个包设置它？

> ID：14579814
> 
> 赞同：3
> 
> 时间：2013-01-29T09:42:39.480
> 
> 标签：java, xml, jaxb, schema

我知道我可以使用@XmlSchema 来做到这一点，但问题是我们在同一个包中有一个类，它需要它的命名空间与 package-info.java 上定义的不同。因此，我们改为在 @XmlRootElement 中声明命名空间（当然，在仍然有 @XmlSchema 的情况下）。但是这样做不允许我们设置类的 elementFormDefault。将类移动到不同的包不是一种选择。基本上，我只想覆盖这个特定类的命名空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T09:55:05.817

**TL;博士**

当`elementFormDefault=XmlNsForm.QUALIFIED`设置为 on 时`@XmlSchema`，您可以通过使用 注释来覆盖类属性的命名空间`@XmlType(namespace="ANOTHER_NAMESPACE")`。如果您想覆盖根元素的命名空间，您可以执行`@XmlRootElement(namespace="DIFFERENT_NAMESPACE)`.

***了解更多信息***

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

* * *

**JAVA模型**

***酒吧***

您只需要`@XmlType`在类的注释上设置命名空间`Bar`。

```
package forum14579814;

import javax.xml.bind.annotation.XmlType;

@XmlType(namespace="FOO")
public class Bar {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

***包信息***

这将覆盖您在包级别`@XmlSchema`注释中指定的命名空间。

```
@XmlSchema(namespace="FOO2", elementFormDefault=XmlNsForm.QUALIFIED)
package forum14579814;

import javax.xml.bind.annotation.*; 
```

***富***

这个对象是你的域模型的根。

```
package forum14579814;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Foo {

    private Bar bar;

    public Bar getBar() {
        return bar;
    }

    public void setBar(Bar bar) {
        this.bar = bar;
    }

} 
```

**XML 模式**

以下是您通过[http://jsfiddle.net/supertonsky/Phck5/](http://jsfiddle.net/supertonsky/Phck5/)提供的 XML 模式。

***Foo.xsd***

```
<?xml version="1.0" encoding="UTF-8"?>
<schema 
    xmlns="http://www.w3.org/2001/XMLSchema" 
    targetNamespace="FOO2"
    xmlns:tns="FOO2" 
    xmlns:tns2="FOO"
    elementFormDefault="qualified">
    <import namespace="FOO" schemaLocation="BAR.xsd"></import>
    <element name="foo" type="tns:Foo"></element>
    <complexType name="Foo">
        <sequence>
            <element name="bar" type="tns2:Bar"></element>
        </sequence>
    </complexType>
</schema> 
```

***吧.xsd***

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" 
    targetNamespace="FOO"
    xmlns:tns="FOO" 
    elementFormDefault="qualified">
    <complexType name="Bar">
        <sequence>
            <element name="name" type="string" maxOccurs="1" nillable="true"></element>
        </sequence>
    </complexType>
</schema> 
```

**演示代码**

以下演示代码将创建域对象的实例并将其输出到 XML。XML 输出将在编组操作期间针对您提供的 XML 模式进行验证。

```
package forum14579814;

import java.io.File;

import javax.xml.XMLConstants;
import javax.xml.bind.*;
import javax.xml.validation.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        Bar bar = new Bar();
        bar.setName("BAR");

        Foo foo = new Foo();
        foo.setBar(bar);

        SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        Schema schema = schemaFactory.newSchema(new File("src/forum14579814/Foo.xsd"));

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setSchema(schema);
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);
    }

} 
```

**输出**

然后你会得到以下输出。请注意，与属性 on`name`对应的元素是如何使用命名空间限定的，而所有其他元素是如何使用命名空间限定的。`name``Bar``FOO``FOO2`

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ns2:foo xmlns="FOO" xmlns:ns2="FOO2">
    <ns2:bar>
        <name>BAR</name>
    </ns2:bar>
</ns2:foo> 
```

# c# - 实体框架 - ObjectContext 生命周期

> ID：14579816
> 
> 赞同：1
> 
> 时间：2013-01-29T09:42:54.227
> 
> 标签：c#, entity-framework

我是实体框架的新手，对`ObjectContext`“数据库优先”WinForm 应用程序中的生命周期有疑问。

为了便于说明，假设我正在创建一个动物物种登记册。

*   在表格的左侧，我列出了动物物种（牛、猪、狗等——我认为这些是属而不是物种，但没关系！）。

*   在表格的右侧，我有文本框、组合框等来显示和允许编辑所选物种的属性。

当用户在左侧选择一个物种时，我使用：

```
var species = context.Single(x =>  x.id == speciesID); 
```

然后将右边的各种控件绑定到`species`.

其中一些属性（例如栖息地）是从组合框中选择的（在表单加载时从数据库中填充。我在数据库中使用代理键），这意味着我认为我需要在表单的生命周期内保持相同的上下文。

我认为这有两个问题：

1.  用户可以在上下文的生命周期内对许多不同的物种（存在数百个）进行更改，使其变得臃肿。

2.  理想情况下，我想在选择新物种时提示用户是否希望在更改之前将更改保存到当前物种（如果脏）。那么我该如何丢弃更改——如何让上下文忘记它曾经看到过的对象？

另一种方法是每次用户选择一个新物种时使用一个新的上下文，但这意味着每次都重新填充几个组合框，以便它们在相同的上下文中创建并且可以绑定到。

我错过了什么吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:48:20.670

我想你会在这个话题中找到你的答案：

[撤消实体框架实体中的更改](https://stackoverflow.com/questions/5466677/undo-changes-in-entity-framework-entities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:05:10.173

我建议在物种变化上使用新的背景——如果需要，这将解决撤销变化的问题。

I don't see why you need to re-populate your combo-boxes every time you discard the context. I am assuming that these entities will not be modified at the same time when species is getting modified. So you can either use [Attach](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.attach.aspx) method on these entities to make them part of current object context (OR you can use the key/id of selected entity to query the entity from database with current object context).

# c++ - 使用 OpenSUSE 12.2 的 OpenMP 编译错误

> ID：14579818
> 
> 赞同：0
> 
> 时间：2013-01-29T09:43:05.177
> 
> 标签：c++, g++, openmp, opensuse, gcc4.7

[使用http://openmp.org/wp/openmp-compilers/](http://openmp.org/wp/openmp-compilers/)上的示例代码，我尝试在我的 Linux 机器（运行 OpenSUSE 12.2）上运行这个简单的程序，但未能让它编译。

这是示例代码。

```
#include <omp.h>
#include <stdio.h>
int main() {
#pragma omp parallel
printf("Hello from thread %d, nthreads %d\n",
        omp_get_thread_num(), omp_get_num_threads());
} 
```

来自终端的片段。

```
Go Trojans >g++ -fopenmp try_openmp.cpp
/usr/lib64/gcc/x86_64-suse-linux/4.7/../../../../x86_64-suse-linux/bin/ld:
   warning: librt.so.1, needed by /usr/lib64/gcc/x86_64-suse-linux/4.7/libgomp.so, not found (try using -rpath or -rpath-link)
/usr/lib64/gcc/x86_64-suse-linux/4.7/libgomp.so: undefined reference to `clock_getres@GLIBC_2.2.5'
/usr/lib64/gcc/x86_64-suse-linux/4.7/libgomp.so: undefined reference to `clock_gettime@GLIBC_2.2.5'
collect2: error: ld returned 1 exit status
Go Trojans >

Go Trojans >pwd
/usr/lib64
Go Trojans >ls -al | grep librt
-rw-r--r--   1 root root    381554 Dec 20 02:49 librt.a
lrwxrwxrwx   1 root root        15 Jan 23 05:23 librtm.so.4 -> librtm.so.4.8.0
-rwxr-xr-x   1 root root    126168 Jul 17  2012 librtm.so.4.8.0
-rw-r--r--   1 root root    393426 Dec 20 02:49 librt_p.a
lrwxrwxrwx   1 root root        17 Jan 23 05:12 librt.so -> /lib64/librt.so.1
Go Trojans >cd /lib64/
Go Trojans >pwd
/lib64
Go Trojans >ls -al | grep librt
-rwxr-xr-x  1 root root   42777 Jul 15  2012 librt-2.15.so
lrwxrwxrwx  1 root root      13 Aug 24 12:44 librt.so.1 -> librt-2.15.so
Go Trojans >

Go Trojans >g++ -v
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib64/gcc/x86_64-suse-linux/4.7/lto-wrapper
Target: x86_64-suse-linux
Configured with: ../configure --prefix=/usr --infodir=/usr/share/info --mandir=/usr/share/man --libdir=/usr/lib64 --libexecdir=/usr/lib64 --enable-languages=c,c++,objc,fortran,obj-c++,java,ada --enable-checking=release --with-gxx-include-dir=/usr/include/c++/4.7 --enable-ssp --disable-libssp --disable-libitm --disable-plugin --with-bugurl=http://bugs.opensuse.org/ --with-pkgversion='SUSE Linux' --disable-libgcj --disable-libmudflap --with-slibdir=/lib64 --with-system-zlib --enable-__cxa_atexit --enable-libstdcxx-allocator=new --disable-libstdcxx-pch --enable-version-specific-runtime-libs --enable-linker-build-id --program-suffix=-4.7 --enable-linux-futex --without-system-libunwind --with-arch-32=i586 --with-tune=generic --build=x86_64-suse-linux
Thread model: posix
gcc version 4.7.1 20120723 [gcc-4_7-branch revision 189773] (SUSE Linux) 
```

G++/GCC 对我有用。如何让 OpenMP 为我工作？

有没有一种方法可以在不升级 GCC/g++ 的情况下更新 OpenMP？

# java - Java中的线性回归类似于R

> ID：14579819
> 
> 赞同：0
> 
> 时间：2013-01-29T09:43:06.083
> 
> 标签：java, r, linear-regression

> **可能重复：**
> [是否有用于更好线性回归的 Java 库？（例如，迭代地重新加权最小二乘）](https://stackoverflow.com/questions/8406305/is-there-a-java-library-for-better-linear-regression-e-g-iteratively-reweigh)

我有以下代码 inf R，但我需要在 java 中实现相同的东西。我数学不是很厉害，所以需要一些帮助。

```
test_trait <- c( -0.48812477 , 0.33458213, -0.52754476, -0.79863471, -0.68544309, -0.12970239,  0.02355622, -0.31890850,0.34725819 , 0.08108851)

geno_A <- as.factor(c("Sub_0001"=1, "Sub_0002"=0, "Sub_0003"=1, "Sub_0004"=2, "Sub_0005"=0, "Sub_0006"=0, "Sub_0007"=1, "Sub_0008"=0, "Sub_0009"=1, "Sub_0010"=0))

geno_B <- as.factor(c("Sub_0001"=0, "Sub_0002"=0, "Sub_0003"=0, "Sub_0004"=1, "Sub_0005"=1, "Sub_0006"=0, "Sub_0007"=0, "Sub_0008"=0, "Sub_0009"=0, "Sub_0010"=0) )

fit <- lm(test_trait ~ geno_A*geno_B)
res <- anova(fit)
p.value <- res[3,5] 
```

编辑 1：我在发布此问题之前检查了 Apache Commons Math 库并检查了[是否有 Java 库可以提供更好的线性回归？（例如，迭代地重新加权最小二乘）](https://stackoverflow.com/questions/8406305/is-there-a-java-library-for-better-linear-regression-e-g-iteratively-reweigh)，但我的问题是我无法确定我的情况是简单线性回归还是多重回归。

`test_trait`包含从遗传性状表达的身高`geno_A`和`geno_B`. `geno_A`并且`geno_B`是[等位基因](http://en.wikipedia.org/wiki/Allele)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:52:03.213

谷歌搜索`java linear regression`引导我找到一些有趣的链接，其中这个 SO 问题：

[是否有用于更好线性回归的 Java 库？（例如，迭代地重新加权最小二乘）](https://stackoverflow.com/questions/8406305/is-there-a-java-library-for-better-linear-regression-e-g-iteratively-reweigh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:58:30.540

`y = a + b*x`可以使用以下等式计算线性回归：

```
b = (n*Σ(X*Y) - (ΣX)*(ΣY)) / (n*Σ(X^2) - (ΣX)^2)
a = (ΣY - b*(ΣX)) / n 
```

这里 Σ(A) 是 A 的所有可用值的总和，n - 这些值的数量（X、Y 对的数量）。

如果需要直接对您的自定义数据结构进行回归，则可能首选自己的实现。库需要传递它支持的数据结构，可能需要克隆大量数据或以其他次优方式设计数据结构。

另一方面，如果数据量不大或者`double[]`对您的项目来说结构足够好，来自 Apache Commons 的[SimpleRegression](http://commons.apache.org/math/apidocs/org/apache/commons/math3/stat/regression/SimpleRegression.html)可能适用于最常见的情况。

# java - 单击 JFrame 中的“搜索”按钮应该会打开一个搜索栏

> ID：14579822
> 
> 赞同：0
> 
> 时间：2013-01-29T09:43:17.440
> 
> 标签：java, swing, pdf

我按照以下链接查看 PDF 文件。 [Java Swing PDF 查看器](http://seanshou.blogspot.in/2012/10/java-swing-pdf-viewer.html)。

现在我需要添加一个搜索按钮`JFrame`（除了导航按钮）。单击该搜索按钮应打开一个带有文本字段的标签。当客户端在该文本字段中输入值时，它应该在整个 PDF 中执行搜索，并在文本字段下方显示匹配单词的计数。我对摇摆非常陌生，并试图从 3 天内找到解决方案。但我没有得到确切的解决方案。这对我来说非常紧迫。任何帮助是极大的赞赏。

## 第一次编辑：

```
public class PdfViewer extends JPanel {
    private static enum Navigation {
        GO_FIRST_PAGE, FORWARD, BACKWARD, GO_LAST_PAGE, GO_N_PAGE
    }

    private static final CharMatcher POSITIVE_DIGITAL = CharMatcher.anyOf("0123456789");
    private static final String GO_PAGE_TEMPLATE = "%s of %s";
    private static final int FIRST_PAGE = 1;
    private int currentPage = FIRST_PAGE;
    private JButton btnFirstPage;
    private JButton btnPreviousPage;
    private JTextField txtGoPage;
    private JButton btnNextPage;
    private JButton btnLastPage;
    private JButton print;
    private JButton search;
    private PagePanel pagePanel;
    private PDFFile pdfFile;

    public PdfViewer() {
        initial();
    }

    private void initial() {
        setLayout(new BorderLayout(0, 0));
        JPanel topPanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
        add(topPanel, BorderLayout.NORTH);
        btnFirstPage = createButton("|<<");
        topPanel.add(btnFirstPage);
        btnPreviousPage = createButton("<<");
        topPanel.add(btnPreviousPage);
        txtGoPage = new JTextField(10);
        txtGoPage.setHorizontalAlignment(JTextField.CENTER);
        topPanel.add(txtGoPage);
        btnNextPage = createButton(">>");
        topPanel.add(btnNextPage);
        btnLastPage = createButton(">>|");
        topPanel.add(btnLastPage);

        search = new JButton("search");
        topPanel.add(search);
        JScrollPane scrollPane = new JScrollPane();
        add(scrollPane, BorderLayout.CENTER);
        JPanel viewPanel = new JPanel(new BorderLayout(0, 0));
        scrollPane.setViewportView(viewPanel);

        pagePanel = new PagePanel();
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        pagePanel.setPreferredSize(screenSize);
        viewPanel.add(pagePanel, BorderLayout.CENTER);

        disableAllNavigationButton();

        btnFirstPage.addActionListener(new PageNavigationListener(Navigation.GO_FIRST_PAGE));
        btnPreviousPage.addActionListener(new PageNavigationListener(Navigation.BACKWARD));
        btnNextPage.addActionListener(new PageNavigationListener(Navigation.FORWARD));
        btnLastPage.addActionListener(new PageNavigationListener(Navigation.GO_LAST_PAGE));
        txtGoPage.addActionListener(new PageNavigationListener(Navigation.GO_N_PAGE));

        search.addActionListener(new Action1());
    }

    static class Action1 implements ActionListener {        
          public void actionPerformed (ActionEvent e) {  
              JFrame parent = new JFrame();
              JDialog jDialog = new JDialog();
              Label label = new Label("Search: ");
              final JTextField jTextField = new JTextField(10);
              JPanel panel = new JPanel();
              parent.add(panel);
              panel.add(label);
              panel.add(jTextField);
              parent.setVisible(true);
              parent.setSize(800,400);
              parent.setLocationRelativeTo(null);
          }
        }   
} 
```

这是我修改过的代码。其余代码与链接中的代码相同。使用此代码，我在 JFrame 中获得了一个搜索按钮。当我单击该按钮时，它会打开一个窗口，其中搜索作为标签名称和一个文本字段。所以现在我在这里被打动了。当我在该文本字段中输入一个值时，它应该使用文本字段值在整个 pdf 中执行搜索，并在该文本字段下方显示匹配的计数。

## 第二次编辑：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Label;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

import com.google.common.base.CharMatcher;
import com.sun.pdfview.PDFFile;
import com.sun.pdfview.PagePanel;

public class PdfViewer extends JPanel {
    private static enum Navigation {
        GO_FIRST_PAGE, FORWARD, BACKWARD, GO_LAST_PAGE, GO_N_PAGE
    }

    private static final CharMatcher POSITIVE_DIGITAL = CharMatcher.anyOf("0123456789");
    private static final String GO_PAGE_TEMPLATE = "%s of %s";
    private static final int FIRST_PAGE = 1;
    private int currentPage = FIRST_PAGE;
    private JButton btnFirstPage;
    private JButton btnPreviousPage;
    private JTextField txtGoPage;
    private JButton btnNextPage;
    private JButton btnLastPage;
    private JButton print;
    private JButton search;
    private PagePanel pagePanel;
    private static PDFFile pdfFile;

    static String text;

    public PdfViewer() {
        initial();
    }

    private void initial() {
        setLayout(new BorderLayout(0, 0));
        JPanel topPanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
        add(topPanel, BorderLayout.NORTH);
        btnFirstPage = createButton("|<<");
        topPanel.add(btnFirstPage);
        btnPreviousPage = createButton("<<");
        topPanel.add(btnPreviousPage);
        txtGoPage = new JTextField(10);
        txtGoPage.setHorizontalAlignment(JTextField.CENTER);
        topPanel.add(txtGoPage);
        btnNextPage = createButton(">>");
        topPanel.add(btnNextPage);
        btnLastPage = createButton(">>|");
        topPanel.add(btnLastPage);

        search = new JButton("search");
        topPanel.add(search);
        JScrollPane scrollPane = new JScrollPane();
        add(scrollPane, BorderLayout.CENTER);
        JPanel viewPanel = new JPanel(new BorderLayout(0, 0));
        scrollPane.setViewportView(viewPanel);

        pagePanel = new PagePanel();
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        pagePanel.setPreferredSize(screenSize);
        viewPanel.add(pagePanel, BorderLayout.CENTER);

        // disableAllNavigationButton();

        search.addActionListener(new Action1());
    }

    private JButton createButton(String string) {
        return new JButton(string);
    }

    class Action1 implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent e) {
            JDialog jDialog = new JDialog(SwingUtilities.getWindowAncestor(search));
            Label label = new Label("Search: ");
            final JTextField jTextField = new JTextField(10);
            jTextField.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    // Here perform search in PDF
            text = jTextField.getText();
            search(pdfFile,text);
                    System.out.println("Search for text " + jTextField.getText() + " requested");
                }
            });
            // If you want to react to every change of text in the textfield, you can
            // use a DocumentListener and invoke the search method for all events.
            jTextField.getDocument().addDocumentListener(new DocumentListener() {

                @Override
                public void removeUpdate(DocumentEvent e) {

                }

                @Override
                public void insertUpdate(DocumentEvent e) {

                }

                @Override
                public void changedUpdate(DocumentEvent e) {

                }
            });
            JPanel panel = new JPanel();
            jDialog.add(panel);
            panel.add(label);
            panel.add(jTextField);
            jDialog.pack();
            jDialog.setLocationRelativeTo(search);
            jDialog.setVisible(true);
        }
    }

    public static void search(PDFFile pdffile2,String text) {

                System.out.println("Inside searh" +text);
                System.out.println("Inside Search Page ::::::::" + pdffile2.getNumPages()); //43 pages
                for (int i = 0;i <= pdffile2.getNumPages(); i++) {
                PDFPage pdfPage = pdffile2.getPage(i);
                if(pdfPage.equals(text)) {
                    System.out.println("equal");
                }
                else{
                    System.out.println("Not Equal");
                }

                }
            }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.add(new PdfViewer());
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:37:00.153

这是一种方法。

1.  `ActionListener`向文本字段添加一个（`actionPerformed`每次用户按“Enter”时都会调用）
2.  在文本字段中添加一个`DocumentListener`（每次文本字段中的文本更改时都会调用 DocumentListener 的方法）

你仍然需要在你的类中实现 search 方法：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Label;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

import com.google.common.base.CharMatcher;
import com.sun.pdfview.PDFFile;
import com.sun.pdfview.PagePanel;

public class PdfViewer extends JPanel {
    private static enum Navigation {
        GO_FIRST_PAGE, FORWARD, BACKWARD, GO_LAST_PAGE, GO_N_PAGE
    }

    private static final CharMatcher POSITIVE_DIGITAL = CharMatcher.anyOf("0123456789");
    private static final String GO_PAGE_TEMPLATE = "%s of %s";
    private static final int FIRST_PAGE = 1;
    private int currentPage = FIRST_PAGE;
    private JButton btnFirstPage;
    private JButton btnPreviousPage;
    private JTextField txtGoPage;
    private JButton btnNextPage;
    private JButton btnLastPage;
    private JButton print;
    private JButton search;
    private PagePanel pagePanel;
    private PDFFile pdfFile;

    public PdfViewer() {
        initial();
    }

    private void initial() {
        setLayout(new BorderLayout(0, 0));
        JPanel topPanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
        add(topPanel, BorderLayout.NORTH);
        btnFirstPage = createButton("|<<");
        topPanel.add(btnFirstPage);
        btnPreviousPage = createButton("<<");
        topPanel.add(btnPreviousPage);
        txtGoPage = new JTextField(10);
        txtGoPage.setHorizontalAlignment(JTextField.CENTER);
        topPanel.add(txtGoPage);
        btnNextPage = createButton(">>");
        topPanel.add(btnNextPage);
        btnLastPage = createButton(">>|");
        topPanel.add(btnLastPage);

        search = new JButton("search");
        topPanel.add(search);
        JScrollPane scrollPane = new JScrollPane();
        add(scrollPane, BorderLayout.CENTER);
        JPanel viewPanel = new JPanel(new BorderLayout(0, 0));
        scrollPane.setViewportView(viewPanel);

        pagePanel = new PagePanel();
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        pagePanel.setPreferredSize(screenSize);
        viewPanel.add(pagePanel, BorderLayout.CENTER);

        // disableAllNavigationButton();

        search.addActionListener(new Action1());
    }

    private JButton createButton(String string) {
        return new JButton(string);
    }

    class Action1 implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent e) {
            JDialog jDialog = new JDialog(SwingUtilities.getWindowAncestor(search));
            Label label = new Label("Search: ");
            final JTextField jTextField = new JTextField(10);
            jTextField.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    // Here perform search in PDF
                    System.out.println("Search for text " + jTextField.getText() + " requested");
                }
            });
            // If you want to react to every change of text in the textfield, you can
            // use a DocumentListener and invoke the search method for all events.
            jTextField.getDocument().addDocumentListener(new DocumentListener() {

                @Override
                public void removeUpdate(DocumentEvent e) {

                }

                @Override
                public void insertUpdate(DocumentEvent e) {

                }

                @Override
                public void changedUpdate(DocumentEvent e) {

                }
            });
            JPanel panel = new JPanel();
            jDialog.add(panel);
            panel.add(label);
            panel.add(jTextField);
            jDialog.pack();
            jDialog.setLocationRelativeTo(search);
            jDialog.setVisible(true);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.add(new PdfViewer());
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

# mysql - Mysql查询成对互连的站

> ID：14579823
> 
> 赞同：0
> 
> 时间：2013-01-29T09:43:17.737
> 
> 标签：mysql, join

向大家问好！

我一直在思考这几天，希望有人能指出我正确的方向：

我有一张带有车站链接的桌子：

```
stationID
lineID 
```

我想在所有连接的站点之间生成站点对。车站将在两种情况下连接。

1.  如果它们具有相同的 lineID（即它们是直接连接的）
2.  如果线相交（线相交，如果它们有任何公共站点）。

我该怎么做？提前感谢您的意见和想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:57:25.723

不要将其存储`lineID`在`station`表中。而是使用三个表：`station`、`line`和`station_line`。第三个表将车站与线路组合在一起，给出了一个车站可能有零条、一条或多条线路。

```
station:
  ID
  name

line:
  ID
  name

station_line:
  station
  line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:58:45.990

看看这个（[SQLFiddle](http://sqlfiddle.com/#!2/de187f/3)）：

```
select distinct a.stationName as 'st1', b.stationName as 'st2', a.lineId from 
tbl as a, tbl as b where 
(a.lineId in (select lineId from tbl where stationId in 
              (select stationId from tbl where lineId=b.lineId)) && 
 a.stationId<>b.stationId) ; 
```

# asp.net - 整个页面正在加载

> ID：14579824
> 
> 赞同：0
> 
> 时间：2013-01-29T09:43:18.343
> 
> 标签：asp.net, gridview, pageload, expression-web

我有三个菜单。“个人信息”“移动信息”“文档”每个按钮都有自己的链接/页面，显示 GridView。现在，当我单击另一个菜单时，浏览器会加载我的整个页面，这会导致加载另一个页面的时间很长。我想改变那件事。

现在，我想做的是。我只想加载gridview所在的区域。示例：如果我单击 Personal Info 按钮，PersonalInfo_Gridview 将出现在该区域，然后当我单击 Mobile Info 按钮时，PersonalInfo_Gridview 将替换为 MobileInfo_Gridview 而无需加载整个页面。

这是我的 3 个菜单的屏幕截图： ![在此处输入图像描述](../Images/3aef5bf31f02a8f9708eeeaba027a45d.png)

我怎样才能做到这一点？我正在使用 Microsoft Expression Web，请帮助 ASP.NET。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T09:47:14.487

您应该使用 an[`UpdatePanel`](http://msdn.microsoft.com/en-us/library/bb386454%28v=vs.100%29.aspx)来更新您的数据。

> 使用 UpdatePanel 控件，您可以使网页参与部分页面更新，而无需编写任何客户端脚本。如果需要，您可以添加自定义客户端脚本以增强客户端用户体验。当您使用 UpdatePanel 控件时，页面行为是独立于浏览器的，并且可能会减少客户端和服务器之间传输的数据量。

看看如何设置不同的触发器来使用菜单按钮来触发 udpate。

参考：[了解 ASP.NET UpdatePanel 触发器](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:59:32.423

像这样：

```
<asp:UpdatePanel ID="updPnlTabs" runat="server" >
         <Triggers>
            <asp:PostBackTrigger ControlID="btnPersonalInfo" />
            <asp:PostBackTrigger ControlID="btnMobileInfo" />
            <asp:PostBackTrigger ControlID="btnDocuments" />
         </Triggers>
         <asp:GridView runat="server" ID="ucLAD"/>
         <asp:Button Text="Personal Info" ID="btnPersonalInfo"  runat="server" Onclick="btnPersonalInfo_Click" />
         <asp:Button Text="Mobile Info" ID="btnMobileInfo"  runat="server" Onclick="btnMobileInfo_Click" />
         <asp:Button Text="Documents" ID="btnDocuments"  runat="server" Onclick="btnDocuments_Click" />
</asp:UpdatePanel> 
```

现在，要更新您的 GridView，请将您的脚本放在`OnClick`操作或方法上，如下所示：

```
 protected void btnPersonalInfo_Click(object sender, EventArgs e)
    {
         // your action here to update your GridView
    }
    protected void btnMobileInfo_Click(object sender, EventArgs e)
    {
         // your action here to update your GridView
    }
    protected void btnDocuments_Click(object sender, EventArgs e)
    {
         // your action here to update your GridView
    } 
```

# c++ - Qt如何用QGLWidget画一个圆滑的圆？

> ID：14579826
> 
> 赞同：0
> 
> 时间：2013-01-29T09:43:22.353
> 
> 标签：c++, qt

我有一个带有 QGLWidget 视口的图形视图。小部件的格式是 QGL::SampleBuffers。我想画一个光滑的圆圈。我试过 QPainter::Antialiasing 但它没有消除锯齿状的外观。对这种情况可能有帮助的其他选项是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:04:59.220

我猜您正在使用 GL_LINES（或 GL_LINE_STRIP 或 GL_LINE_LOOP）将圆绘制为线条。如果在那里启用了抗锯齿，请检查您的显示驱动程序设置。请注意，某些显卡（例如旧笔记本电脑）根本不支持抗锯齿。

# java - 静态变量的 ArrayList

> ID：14579836
> 
> 赞同：1
> 
> 时间：2013-01-29T09:43:44.757
> 
> 标签：java

假设我有这个代码。

```
public class Data {
    public static int x, y;
    // ...
}
// ...
public static ArrayList<Data> myData = new ArrayList<Data>(); 
```

现在，如果从我的主班做

```
Data thisData;
thisData.initData();
myData.add(thisData);
thisData.changeData();
myData.add(thisData);
// ... repeat and repeat and repeat 
```

问题是：静态前缀如何改变代码的行为？我的意思是：myData 是否总是由同一个对象填充，因为它的字段 x 和 y 已被声明为静态？或者 myData 是否总是由新对象填充？换句话说：add() 语句如何添加对象？复制它？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:44:48.420

它不会复制它。它只是将对象的*引用*添加到列表中。

当你写

```
Data thisData = ... 
```

`thisData``Data`是对您创建的对象的引用。`clone()`除非您明确复制该对象（通过复制构造函数、方法等），否则使用该引用将始终指向实例化对象

因此，重复添加`thisData`到列表仅意味着您有多个列表引用同一对象（或列表多次引用同一对象）。如果您更改 的成员，您会看到这一点`thisData`。每个列表都将反映这一变化。

请注意，这适用于对象。对于基元（`int`等`long`），值被复制。当然，对于不可变对象（不能更改的对象），这并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:46:51.163

现在您的 List在您的对象的实例之间**共享**，其中`static`

任何实例调用`.add(thisData)`；将数据添加到您的列表中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T09:47:15.350

`static`意味着如果您`class`访问的任何实例`myData`或者如果您以 身份访问它`<Classname>.myData`，您将与相同的 交谈`ArrayList`，即它在您的类的所有实例之间共享。

它与添加到其中的内容无关。

编辑：静态的 x,y 完全躲过了我。在这种情况下，所有实例`Data`将共享这两个变量，即它们的值将相同。

这并不意味着它们是同一个实例，因为`==`操作将返回 false。像往常一样，每个实例的任何其他变量也`Data`将是唯一的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T09:47:23.727

数据数组的所有实例将共享相同的字段 x 和 y。任何修改尝试都会传播到所有新创建的实例。那为什么要在数组中有多个实例呢？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T09:47:53.523

它会将静态变量引用的对象放在列表中。因此，如果您不更改静态变量，它将始终放置相同的对象，如果您正在创建由静态变量引用的新对象，它将添加新对象。但要小心，如果您使用一些设置器更改对象的某些字段，这些设置器将显示在已添加到列表中的对象上。

# ios - 从一组精灵中移动精灵

> ID：14579844
> 
> 赞同：-2
> 
> 时间：2013-01-29T09:44:09.437
> 
> 标签：ios, xcode, cocos2d-iphone, uitouch, ccsprite

我的图层中有 15 个精灵。我将这些精灵添加到可变数组中我想使用移动单个精灵`ccTouchesMoved`。当触摸结束`ccTouchesEnded`精灵移回其起点或原点时。

我的编码：

```
if( (self=[super init])) {

    collection=[[NSMutableArray alloc]init];

    CCLayer *base=[CCSprite spriteWithFile:@"Base.png"];
    base.position=ccp(512,384);
    [self addChild:base];

    x=0;
    for(int i=1;i<=7;i++)
    {
        CCSprite *hole=[CCSprite spriteWithFile:@"ball.png"];
        hole.position=ccp(140+x,318);
        hole.tag=i;
    [self addChild:hole];
        hole.visible=YES;
        [collection addObject:hole];
        x=x+75;
    }

    self.isTouchEnabled=YES;

}
return self;
 }
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *touch=[touches anyObject];
CGPoint location=[touch locationInView:[touch view]];
location=[[CCDirector sharedDirector]convertToGL:location];
location=[self convertToNodeSpace:location];
p=location;

}
-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
NSLog(@"count:%i",[collection count]);
UITouch *touch=[touches anyObject];
CGPoint location=[touch locationInView:[touch view]];
location=[[CCDirector sharedDirector]convertToGL:location];

location=[self convertToNodeSpace:location];

 for(CCSprite *s in collection)
 {
   if(CGRectContainsPoint([s boundingBox], location))
    s.position=ccp(location.x,location.y);

 }
}
 -(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
for(CCSprite *s in collection)
{

        s.position=p;

 }
} 
```

当我移动一个精灵时，其他精灵在图层上也可见，不要隐藏。请帮我写代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:48:52.817

```
for(CCSprite *s in collection)
 {
   if(CGRectContainsPoint([s boundingBox], location))
    s.position=ccp(location.x,location.y);

 } 
```

由于您所有的精灵都在同一个位置，上面的代码正在移动该位置的所有精灵。

```
for(CCSprite *s in collection)
{
    if(CGRectContainsPoint([s boundingBox], location))
    {
        s.position=ccp(location.x,location.y);
        break;
    }
} 
```

一旦检测到第一个精灵，上面的代码将跳出循环，因此应该只移动数组中的第一个精灵。

不确定这是否正是您想要的，但希望这会有所帮助。

- - 编辑

就我个人而言，我要做的是为精灵创建一个实例变量。

```
CCSprite * touchedSprite; 
```

并执行以下操作...

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch=[touches anyObject];
    CGPoint location=[touch locationInView:[touch view]];
    location=[[CCDirector sharedDirector]convertToGL:location];
    location=[self convertToNodeSpace:location];

    for((CCSprite * sprite in collection)
    {
        if(CGRectContainsPoint([sprite boundingBox], location))
        {
            touchedSprite = sprite;
            p = sprite.position;
            break;
        }
    }
}
-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"count:%i",[collection count]);
    UITouch *touch=[touches anyObject];
    CGPoint location=[touch locationInView:[touch view]];
    location=[[CCDirector sharedDirector]convertToGL:location];

    location=[self convertToNodeSpace:location];

    touchedSprite.position = location;
}

-(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    touchedSprite.position = p;
} 
```

i didn't test the code so i am not sure if it will work just by copying and pasting, but i think this will give you the right idea. There are obviously other ways of doing this, but i think its the simplest if you are to do bunch of stuff to the sprite that is being touched.

# java - 如何检查当前是否打开了 SWT 组合？

> ID：14579847
> 
> 赞同：5
> 
> 时间：2013-01-29T09:44:17.507
> 
> 标签：java, swt

我的 GUI 中有一个 SWT 组合框。是否可以检查组合框是否已打开？（我有一种刷新组合框中显示状态的机制，当用户打开它时，有时它会在用户选择和算法认为没问题之间跳转，用户选择优先于其他所有内容）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:49:29.903

Combo SWT 组件具有`getListVisible()`返回标志的方法，如果组合下拉列表部分可见或不可见。有关详细信息，请参阅[组合文档](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Combo.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T20:25:30.873

巫师的回应大约是`org.eclipse.swt.widgets.Combo`

如果你需要这个方法，`javax.swing.JComboBox`你可以使用`isPopupVisible()`

# ruby-on-rails - Rails：如何在会话中自动查询属于用户的项目？

> ID：14579848
> 
> 赞同：0
> 
> 时间：2013-01-29T09:44:17.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我正在开发一个应用程序，`Rails 3.2.11`并且正在使用 Devise 和 CanCan。

我在`ability.rb`文件中设置权限，所以用户只能管理属于他公司的项目，一切似乎都很好。

*   我的用户`belongs to`为公司模型建模。
*   本公司可`have many`为客户提供型号。

我想知道是否有一种方法可以`Client.all`使用范围或 gem 或其他方式自动执行查询`Order.all`. 这可能吗？如果没有，最好的方法是什么？非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:55:51.617

我希望我没有误解，但是写一个方法呢？

如果要获取用户客户端（属于用户公司）

用户.rb

```
def fetch_clients
  Clients.find_all_by_company(company) # your query here
end 
```

在您的控制器中，您可以简单地：

```
@clients = @user.fetch_clients 
```

订单也是如此

感谢 SybariteManoj，他指出（假设您的查询并不复杂）：

```
@user.company.clients should return the same result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:00:09.927

CanCan 有一个叫做`accessible_by`. 这可能是你要找的吗？

在此处阅读更多信息：[https ://github.com/ryanb/cancan/wiki/Fetching-Records](https://github.com/ryanb/cancan/wiki/Fetching-Records)

# asp.net - 从 xhtml 动态创建 xslt 的最佳方法是什么？

> ID：14579851
> 
> 赞同：0
> 
> 时间：2013-01-29T09:44:21.930
> 
> 标签：asp.net, xslt, xhtml

我有一个 XHTML 模板。我想将 xhtml 文件动态转换为 xslt 。最好的方法是什么？下面写了XHTML的内容

```
<div>
{:header:}
<br />
{:date:}
<p>
{:mailingattn:} <br />
{:facilityname:} <br />
{:facilitystreet:} <br />
{:facilitystreet2:} <br />
{:facilitycity:}, {:facilitystate:}  {:facilityzip:} <br />
{:facilitycountry:}
</p>

<p>
{:message:}
</p>

<p>
Sincerely,<br />
{:signature:}
</p>
{:footer:}
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:02:01.757

我不确切知道 XHTML 文件中使用的宏的语义，但以下转换会生成一个 XSLT 样式表，希望它是等效的，如果不是，应该很容易根据您的需要进行定制：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xsl:template match="*">
        <xsl:copy>
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/">
        <xsl:element name="xsl:stylesheet">
            <xsl:attribute name="version" select="'2.0'"/>
            <xsl:element name="xsl:template">
                <xsl:attribute name="match" select="'/*'"/>
                <xsl:apply-templates/>
            </xsl:element>
        </xsl:element>
    </xsl:template>

    <xsl:template match="text()">
        <xsl:variable name="regex">\{:([a-zA-Z0-9]*):\}</xsl:variable>
        <xsl:analyze-string select="." regex="{$regex}">
            <xsl:matching-substring>
                <xsl:element name="xsl:value-of">
                    <xsl:attribute name="select" select="regex-group(1)"/>
                </xsl:element>
            </xsl:matching-substring>
            <xsl:non-matching-substring>
                <xsl:value-of select="."/>
            </xsl:non-matching-substring>
        </xsl:analyze-string>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:07:47.857

您是否考虑过使用 XProc 和 <p:template> ？

[http://www.w3.org/TR/xproc-template/#c.template](http://www.w3.org/TR/xproc-template/#c.template)

# ruby - Rails HAML 如何做一个简单的循环？

> ID：14579853
> 
> 赞同：-5
> 
> 时间：2013-01-29T09:44:26.983
> 
> 标签：ruby, ruby-on-rails-3

如何做一个简单的 HAML 循环。在 ERB 视图中是这样的：

```
<table>
<tr>
 <th></th>
 <th></th>
</tr>
 <%= @price. each do |row| %>
<tr>
 <td><%= row.year %></td>
</tr>
 <% end %>
</table> 
```

示例刚刚尝试了这个：

```
%table
  %tbody
   %tr
    %th year
    %th price 
```

错误：

```
Inconsistent indentation: 3 spaces were used for indentation 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:53:31.227

在 HAML 中，缩进很重要，它意味着代码嵌套，它允许您不在`end`Ruby 代码中使用结束标记和语句。为了让 HAML 正确理解您的嵌套，所有缩进的大小必须相同，例如 2 个空格。

因此，您的 ERB 代码将如下所示：

```
%table
  %tr
    %th
    %th
  - @price. each do |row|
    %tr
      %td= row.year 
```

# java - 列出 Android 中所有已保存的闹钟

> ID：14579859
> 
> 赞同：2
> 
> 时间：2013-01-29T09:44:48.407
> 
> 标签：java, android

使用 AlarmManager，我可以从 android 应用程序中随时设置闹钟。但是有没有办法列出我设置的所有警报。我应该采取什么方法，因为 AlarmManager 不提供此类方法。我应该将警报保存为内存中的文件吗？

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:03:53.037

**A.**[这篇文章](https://stackoverflow.com/questions/2713484/how-to-handle-alarm-notification-in-android)对此有很好的解释。无法保证 AlarmClock 应用程序将在安装了您的应用程序的每台设备上。例如，许多 HTC 手机将其替换为 HTC 自己的“世界时钟”应用程序。

但是，假设现有的 AlarmClock 应用程序存在，您应该能够从其内容提供程序获取光标。以[这个项目](http://code.google.com/p/android-alarm-database/)为例。

**B.**您必须为 ListView 的项目创建布局。

您可以在 Internet 上找到有关此的教程：[http :](http://www.vogella.com/articles/AndroidListView/article.html) [//www.vogella.com/articles/AndroidListView/article.html http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/](http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/)

**C。**

```
final String tag_alarm = "tag_alarm";
Uri uri = Uri.parse("content://com.android.alarmclock/alarm")
Cursor c = getContentResolver().query(uri, null, null, null, null);
Log.i(tag_alarm, "no of records are" + c.getCount());
Log.i(tag_alarm, "no of columns are" + c.getColumnCount());
if (c != null) {
    String names[] = c.getColumnNames();
    for (String temp : names) {
        System.out.println(temp);
    }
    if (c.moveToFirst()) {
        do {
            for (int j = 0; j < c.getColumnCount(); j++) {
                Log.i(tag_alarm, c.getColumnName(j) + " which has value " + c.getString(j));
            }
        } while (c.moveToNext());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:09:56.953

通过访问所有可能的链接，我找到了一个解决方案，即创建一个应用程序来检索在操作系统级别设置的警报是不可能的。是的..在某种程度上这是可能的，但在许多情况下它会依赖于机器。

所以更好的选择是将警报保存在数据库中。

# c# - Kendo UI 网格中的内联编辑？

> ID：14579862
> 
> 赞同：2
> 
> 时间：2013-01-29T09:44:55.207
> 
> 标签：c#, jquery, sharepoint-2010, kendo-ui

在 ajax 调用服务器后，取消按钮仍然存在，更新按钮永远不会变回 Kendo UI 网格中的编辑？！我想我必须通知网格更新已经完成，但是如何？

```
<div id="mykendoGrid">
    <script>

        $(document).ready(function () {
            var MydataSource = new kendo.data.DataSource({
                transport: {
                    read: function (options) {
                        $.ajax({
                            url: "/_layouts/AjaxCallHandler/Handler.ashx",
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            cache: false,
                            //data: options.data,
                            success: function (data) {
                                //ko.mapping.fromJS(data, self.seats);
                                options.success(data);
                            }
                        });
                    },
                    update:  function (options) {
                            $.ajax(
                                {
                                    type: 'POST',
                                    url: "/_layouts/AjaxCallHandler/Handler.ashx",
                                    data: { 'currency': ko.mapping.toJSON(options.data) },
                                    success: function (response)
                                    {
                                        // do nothing
                                        alert("Successfully Saved.");
                                    },
                                    error: function (repsonse) {
                                        alert("Manage: UpdateReportName -> Ajax Error!");
                                    }
                                });
                            return;
                        }
                    //parameterMap: function (data, operation) {
                    //    if (operation !== "read") {
                    //        return JSON.stringify({ currency: data })
                    //        //return ko.mapping.fromJS(data, self.seats);
                    //    }
                    //}
                },
                batch: false,
                pageSize: 10,
                schema: {
                    //data: 'd',
                    model:
                    {
                        id: "ID",
                        fields:
                        {
                            ID: { editable: false, nullable: false },
                            DisplayName: { editable: true },
                            Code: { editable: true }
                        }
                    }
                }
            })

            $("#mykendoGrid").kendoGrid({
                dataSource: MydataSource,
                pageable: true,
                toolbar: ["create"],
                columns: [{ field: "ID", title: "ID" }, { field: "DisplayName", title: "Display Name" }, { field: "Code", title: "Code" }, { command: ["edit"], title: "&nbsp;", width: "250px" }],
                editable: "inline",
                scrollable: true
            });
        });

    </script>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-19T23:09:39.883

您需要调用 options.success();

```
update:  function (options) {
                        $.ajax(
                            {
                                type: 'POST',
                                url: "/_layouts/AjaxCallHandler/Handler.ashx",
                                data: { 'currency': ko.mapping.toJSON(options.data) },
                                success: function (response)
                                {
                                    // do nothing
                                    alert("Successfully Saved.");
                                    options.success();
                                    //or
                                    //options.success(reponse);
                                },
                                error: function (response) {
                                    alert("Manage: UpdateReportName -> Ajax Error!");
                                    options.error();
                                    //or
                                    //options.error(reponse);
                                }
                            });
                        return;
                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:06:34.577

您需要`yourGrid.saveChanges();`从 JavaScript 调用。这将遍历每一行，为您的网格数据源执行必要的创建、更新和销毁命令，并且您的所有编辑都将被保存。

# mysql - MySQL Alter table 奇怪的键错误

> ID：14579868
> 
> 赞同：2
> 
> 时间：2013-01-29T09:45:11.340
> 
> 标签：mysql, database-design, foreign-keys, mysql-workbench

我正在使用 MySQL Workbench 创建一个大型数据库。

我不断得到：

> 错误：错误 1089：前缀键不正确；使用的键部分不是字符串，使用的长度比键部分长，或者存储引擎不支持唯一前缀键

尝试执行以下查询时：

```
ALTER TABLE `view4`.`entities` DROP COLUMN `resellerType` ,
DROP COLUMN `industrTypeId` ,
DROP COLUMN `paymentTermsId` ,
ADD COLUMN `paymentTermsId` INT(11) NOT NULL  AFTER `vatRateId` ,
ADD COLUMN `industrTypeId` INT(11) NOT NULL  AFTER `paymentTermsId` ,
ADD COLUMN `resellerType` INT(11) NOT NULL  AFTER `industrTypeId` ,
DROP FOREIGN KEY `fk_entities_grades1` 
```

我试过改变各种 INT 列的长度，但没有效果。我在其他几个表上也遇到了这个错误。

工作台做错了什么？

* * *

我把它减少了一点：

```
ALTER TABLE `view4`.`entities` DROP COLUMN `resellerType` ,
DROP COLUMN `industrTypeId`  , 
ADD COLUMN `industrTypeId` INT(11) NOT NULL  AFTER `paymentTermsId` ,
ADD COLUMN `resellerType` INT(11) NOT NULL  AFTER `industrTypeId` 
```

它仍然给我错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:04:40.380

看起来您将索引字段类型从 CHAR/VARCHAR 更改为 INT，使用的索引是使用前缀长度创建的。脚本重新创建此字段 - DROP COLUMN + ADD COLUMN，这会导致错误。

尝试使用这种方式更改字段 -

```
ALTER TABLE `view4`.`entities`
  CHANGE COLUMN `industrTypeId` `industrTypeId` INT(11) NOT NULL
    AFTER `paymentTermsId`,
  CHANGE COLUMN `resellerType` `resellerType` INT(11) NOT NULL
    AFTER `industrTypeId`; 
```

# c# - 使用 log4net 设置文件权限

> ID：14579869
> 
> 赞同：0
> 
> 时间：2013-01-29T09:45:13.607
> 
> 标签：c#, wpf, log4net, file-permissions

我在我的 wpf 解决方案中使用 log4net。它正在正确写入error.xml。

我需要更改文件的权限，以便 PC 上的每个用户都有权写入 error.xml。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:53:22.540

更复杂的方法是确保您的应用程序与 UAC 集成，以便它在启动时请求提升的权限，然后它将以管理员权限运行，并且能够写入该文件。但我认为这不是一个好习惯。

另一种方法是写入 Application Data 文件夹，就像这里解释的那样： [log4net writing to file。如何打开权限](https://stackoverflow.com/questions/7591762/log4net-writing-to-file-how-to-open-up-permissions?rq=1)

* * *

替代解决方案：安装程序将请求提升权限、创建文件并向“所有人”授予写入权限。

# java - 模拟 Android 应用程序时，Mockito 是否需要 Dexmaker？

> ID：14579873
> 
> 赞同：2
> 
> 时间：2013-01-29T09:45:31.027
> 
> 标签：java, android, maven, mockito, dexmaker

Mockito 和 Dexmaker 项目的文档似乎没有明确说明两者之间的关系，它们只是相互提及。如果需要Dexmaker，哪些版本的Mockito和Dexmaker兼容？，是否只需要dexmaker-mockito神器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:02:23.453

您需要最新版本的 mockito（目前为 1.9.5），如主[文档](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html) [§28](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#28)中所示。Mockito 提供了一种拥有不同字节码引擎的方法，如果它在同一个类路径上，则 dexmaker-mockito 提供。[（确实，那里](http://code.google.com/p/dexmaker/wiki/Mockito)的 wiki 有点过时了，但它声明你需要两个罐子）。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T17:51:41.177

当我同时包含 Mockito 和 DexMaker 时出现错误。最后，这是我添加到 gradle 中的内容：

```
//compile 'org.mockito:mockito-all:1.9.5'
compile 'com.google.dexmaker:dexmaker:1.2'
compile 'com.google.dexmaker:dexmaker-mockito:1.2' 
```

# javascript - NodeJs：如何导出 Javascript 文件中的所有模块和变量？

> ID：14579877
> 
> 赞同：2
> 
> 时间：2013-01-22T11:46:47.630
> 
> 标签：javascript, node.js

如何使用 NodeJS 导出 Javascript 文件中存在的所有模块和变量。假设我有一个包含 20 个函数和 20 个变量的 .js 文件，我需要一次导出所有函数和变量，而不是一个一个导出。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:59:50.857

你不能。您必须以某种方式明确命名它们。

如果 Amberlamps 的答案是不可能的（您*希望*它们处于基础级别），您仍然可以这样做：

```
module.exports = {
  functionA: function () {
    // TODO
  },
  functionB: function () {
    // TODO
  },
  // the rest
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:49:12.073

这个怎么样：

```
exports.MyApp = {
    functionA: function() {
        // TODO
    },
    functionB: function() {
        // TODO
    }
}; 
```

# macos - 奇怪的 NSScreen 坐标

> ID：14579880
> 
> 赞同：1
> 
> 时间：2013-01-29T09:45:43.707
> 
> 标签：macos, cocoa, nswindow

这是我的`NSWindow`子类的构造函数，称为`FullScreenWindow`：

```
- (id)initWithScreen:(NSScreen *)s {
NSRect contentRect = [s frame];
self = [super initWithContentRect:contentRect
                        styleMask:NSBorderlessWindowMask
                          backing:NSBackingStoreBuffered
                            defer:NO
                           screen:s];
if (self) {
    [self setCollectionBehavior:NSWindowCollectionBehaviorStationary|
                                NSWindowCollectionBehaviorCanJoinAllSpaces|
                                NSWindowCollectionBehaviorIgnoresCycle];
    [self setReleasedWhenClosed:YES];
    [self setBackgroundColor:[NSColor greenColor]];
    [self setAlphaValue:1.0];
    [self setOpaque:NO];
    [self setLevel:NSMainMenuWindowLevel-1];
}
return self; 
```

}

我想`NSWindow`在每个显示器中添加这样一个，`[NSScreen screens]`但是当我连接第二个显示器时，如果我为第一个显示器（和第二个显示器）设置为，则窗口只会以正确的方式`origin.x`显示。当我获得实例帧的值时，它会为第一个显示和第二个显示返回。为什么这些坐标会移动？`contentRect``-1440``0``origin.x``NSScreen``0``1440`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T18:36:56.770

[NSScreen 屏幕] 之一将以 (0, 0) 作为原点。
现在想象 2 个轴：Y 从 (0, 0) 向上，X 向右。
所有其他屏幕将具有与此坐标系的坐标，并且 screen.frame.origin 将代表左下角。

![](../Images/b8480934c82b22d78663889f40edac68.png)

我在文档中找不到这个，所以我发现这个是在尝试显示排列。
我用两台显示器拍了这张照片：主显示器 1366x768，副显示器 1680x1050，与顶部对齐。
我也尝试了不同的安排，将#1 移动到#0 周围，我的假设总是正确的。

# java - java：如何顺序执行一些Runnables？

> ID：14579882
> 
> 赞同：1
> 
> 时间：2013-01-29T09:45:45.190
> 
> 标签：java, multithreading

而我们要执行 2 `Runnable`s ：

```
executor.execute(new Runnable1());
executor.execute(new Runnable2()); 
```

不知道哪个`Runnable`会先开始执行？但我希望 Runnable1 首先启动执行。怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T09:46:47.190

为什么不创建一个可以运行的可运行文件`Runnable1()`呢`Runnable2()`？如果您不希望它们并行执行，请不要将它们分别提交给执行程序...

例如：

```
executor.execute(new Runnable() {
    @Override public void run() {
        new Runnable1().run();
        new Runnable2().run();
    }
}); 
```

当然，您应该考虑如果`Runnable1`抛出未经检查的异常会发生什么 - 您想`Runnable2`运行还是不运行？

编辑：根据您更新的要求，听起来您*真的*希望您的第二个可运行文件仅在您的第一个可运行文件达到特定点时启动（例如，已创建套接字并正在侦听连接）。您很可能想在该代码中放置某种钩子，以便您可以*在到达那里时*启动第二个可运行对象：

```
// Somewhat pseudo-code...
Server server = new Server();
server.onStartedListening(new Runnable() {
    @Override public void run() {
        executor.execute(new ClientConnection());
    }
});
executor.execute(server); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:50:58.393

在 Runnable2() 代码中检查状态`Runnable1.completed`

在 Runnable1 中定义 a`static boolean completed = false;`并在 Runnable1 中执行完成后使其为真

# math - 如何找到给定数字、间隔和起始值的范围？

> ID：14579883
> 
> 赞同：0
> 
> 时间：2013-01-29T09:45:49.947
> 
> 标签：math, algebra

提供以下值

1.  起始值 = 1
2.  最终值 = 20
3.  间隔 = 5

我得到了一个数字 6。我必须找到数字 6 所在的数字范围，现在答案是 6-10。

如果给定的数字大于结束值，则返回相同的数字。

有什么公式可以让我生成数字的范围吗？

***更新***

我尝试了以下解决方案，但是如果更改范围间隔，它就不起作用，

```
 $end_value = $start_value + $range_interval;

// we blindly return the last term if value is greater than max value
if ($input_num > $end_value) {
  return '>' . $end_value;
}

// we also find if its a first value
if ($input_num <= $end_value && $value >= $start_value) {
  return $start_value . '-' . $end_value;
}

// logic to find the range for a given integer
$dived_value = $input_num/$end_value;

// round the value to get the exact match
$rounded_value = ceil($dived_value);

$upper_bound_range = $rounded_value*$end_value;

$lower_bound_range = $upper_bound_range - $end_value;

return $lower_bound_range . '-'. $upper_bound_range; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:01:58.713

在（c-style）伪代码中：

```
// Integer division assumed
rangeNumber = (yourNumber - startValue) / rangeLength;
lower_bound_range = startValue + rangeNumber*rangeLength;
upper_bound_range = lower_bound_range + rangeLength-1; 
```

对于您的输入：

```
rangeNumber = (6-1)/5 = 1
lower_bound_range = 1 + 5*1 = 6
upper_bound_range = 10 
```

所以范围是 [6, 10]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:42:22.403

答案取决于您谈论的是整数还是浮点数。由于您所有的示例数字都是整数，我假设您谈论这些。我进一步假设您的所有区间都包含相同数量的整数，在您的示例 5 中，即 1...5、6...10、11...15 和 16...20。请注意，第一个区间中不包含 0（否则第一个区间有 6 个数字）。
在这种情况下，答案很简单。
假设：
s 不包含在第一个区间中的起始值，
i 区间大小，即它包含的整数个数，
p 提供的应分配区间的数字，
b 此区间中的第一个整数，和
e 这个区间的最后一个整数。
然后：
b = s + (ps-1)\i * i + 1 （这里，“\”表示整数除法，即没有余数）
e = b + i - 1
在你的例子中：
s = 0, i = 5, p = 6，因此
b = 0 + (6-0-1)\5 * 5 + 1 = 6
e = 6 + 5 - 1 = 10

# objective-c - Xcode：将标签传递给第二个视图？

> ID：14579885
> 
> 赞同：0
> 
> 时间：2013-01-29T09:46:02.113
> 
> 标签：objective-c, xcode, cocoa-touch, location

我的第一个视图控制器上有两个位置标签我需要在打开时将它们显示在另一个视图控制器上，实现这一点的最佳方法是什么？

我要传递的标签如下所示：

```
 latitudeLabel.text = [NSString stringWithFormat:@"latitude=%f", location.coordinate.latitude];
longitudeLabel.text = [NSString stringWithFormat:@"longitude=%f", location.coordinate.longitude]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:11:45.850

我创建了一个用于在类之间共享数据的示例。您需要做的所有事情都[在这里解释](http://pastebin.com/mNes8SmE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:58:19.780

在推送 secondViewController 之前，您可以将标签添加为第二个 ViewController 视图的子视图

```
 SecondViewController *cntr = [[SecondViewController alloc] initWithNibName:@"" bundle:nil];
 [cntr.view addSubview latitudeLabel];
 [cntr.view addSubview longitudeLabel];

 [self.navigationController  pushViewController:cntr animated:YES] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:49:30.160

您必须在两个视图控制器上创建相同的标签并仅传递字符串数据。您可以使用属性将参数从一个类传递到另一个类（因为它们是公共的）。

在第一个视图控制器 .m 中：

```
- (void)openSecondViewController {
    SecondViewController *controller = [SecondViewController alloc] init];
    controller.data = [NSArray arrayWithObjects:@"First String", @"Second String", nil];
    [self.navigationController pushViewController:controller];
} 
```

在第二个视图控制器 .h 中：

```
@interface SecondViewController : UIViewController
    @property (weak, nonatomic) id data;
    @property (weak, nonatomic) IBOutlet UILabel *label1;
    @property (weak, nonatomic) IBOutlet UILabel *label2;
@end 
```

在第二个视图控制器 .m 中：

```
- (void)setData:(id)data {
    self.label1.text = [data objectAtIndex:0];
    self.label2.text = [data objectAtIndex:1];
} 
```

# java - 知识库框架

> ID：14579888
> 
> 赞同：0
> 
> 时间：2013-01-29T09:46:12.380
> 
> 标签：java, database, knowledge-management

我需要在 Java 应用程序中构建和使用知识库。是否有任何 Java 框架允许这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:45:24.303

Jess ( [http://www.jessrules.com](http://www.jessrules.com) ) 是我正在寻找的。

# dependency-injection - Geronimo 3.0 中 EJB 模块中的 PersitenceContext 注入

> ID：14579890
> 
> 赞同：1
> 
> 时间：2013-01-29T09:46:12.850
> 
> 标签：dependency-injection, ejb-3.0, openjpa, entitymanager, geronimo

我正在尝试使用 EJB3 注释注入 PersistenceContext，但 geronimo 不注入依赖项。它是一个由EJB 和WEB 模块组成的EAR 项目。

EJB 模块配置

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <ejb:openejb-jar
xmlns:app="http://geronimo.apache.org/xml/ns/j2ee/application-2.0"
xmlns:bp="http://www.osgi.org/xmlns/blueprint/v1.0.0"
xmlns:client="http://geronimo.apache.org/xml/ns/j2ee/application-client-2.0"
xmlns:conn="http://geronimo.apache.org/xml/ns/j2ee/connector-1.2"
xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2" xmlns:ejb="http://openejb.apache.org/xml/ns/openejb-jar-2.2"
xmlns:jaspi="http://geronimo.apache.org/xml/ns/geronimo-jaspi"
xmlns:log="http://geronimo.apache.org/xml/ns/loginconfig-2.0"
xmlns:name="http://geronimo.apache.org/xml/ns/naming-1.2" xmlns:pers="http://java.sun.com/xml/ns/persistence"
xmlns:pkgen="http://openejb.apache.org/xml/ns/pkgen-2.1" xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0"
xmlns:web="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1">
<dep:environment>
    <dep:moduleId>
        <dep:groupId>wedge</dep:groupId>
        <dep:artifactId>wedge-ejb</dep:artifactId>
        <dep:version>1.0</dep:version>
        <dep:type>car</dep:type>
    </dep:moduleId>
    <dep:dependencies>
        <dep:dependency>
            <dep:groupId>console.dbpool</dep:groupId>
            <dep:artifactId>jdbc_wedgeDS</dep:artifactId>
            <dep:version>1.0</dep:version>
            <dep:type>car</dep:type>
        </dep:dependency>
    </dep:dependencies>
</dep:environment> 
```

我已经配置了 persistence.xml 如下

```
 <?xml version="1.0" encoding="UTF-8"?>
    <persistence version="2.0"
        xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
        <persistence-unit name="wedgePU" transaction-type="RESOURCE_LOCAL">
            <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
            <jta-data-source>jdbc/wedgeDS</jta-data-source>
            <class>wedge.entity.Aec</class>
            ...
            <class>wedge.entity.Tnr</class>
        <properties>
            <property name="openjpa.TransactionMode" value="managed" />
            <property name="openjpa.ManagedRuntime"
                value="jndi(TransactionManagerName=java:comp/TransactionManager)" />
            <property name="openjpa.Log" value="DefaultLevel=INFO" />
    </properties>
</persistence-unit> 
```

我已将数据源创建为本地 TX 数据源，并且已解决。

我已经定义了一个 EJB 如下

```
 @Local(PruebaBL.class)
    @Stateless
    public class PruebaBLImpl {

        @PersistenceContext()
        private EntityManager em;

        @TransactionAttribute(TransactionAttributeType.REQUIRED)
        public void metodoPrueba(HttpServletResponse response) throws IOException, NamingException {

            if (em == null) {
                response.getOutputStream().println("entity manager is null");
            } 
```

我已验证事务开始/结束正常，但 entityManager 未注入。

一些想法？

提前致谢。

扫罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:04:20.713

您不需要指定全局 jndi 名称。像这样在你的 servlet 中注入它：

```
@EJB
private PruebaBL pruebaBL; 
```

# css - 它上面的浮动 jquery 菜单 UI 包含 div

> ID：14579894
> 
> 赞同：0
> 
> 时间：2013-01-29T09:46:21.650
> 
> 标签：css, jquery-ui

我有一个 div（它是一个 openlayers 地图的弹出窗口，但它几乎可以是任何固定大小的 div），它包含一个 jquery ui 菜单（包装在 ul 中）。菜单不太适合 div，所以我想让菜单浮动在它上面，这样随着菜单的增长，我不必增加包含 div 的大小。这可能吗？

包含的 div 本身是绝对定位的，我尝试将`ul`代表菜单的 设置为`position:absolute;z-index:100`但不起作用。我也尝试过`overflow:visible`没有快乐的设置。

此屏幕截图显示了我遇到的问题：

![屏幕抓取](../Images/51050f075d9f08fa6a8a41bdfde79611.png)

我添加了一个[jsfiddle](http://jsfiddle.net/mattwoberts/MBEBD/5/)，当您单击橙色小圆圈时会打开一个弹出窗口，您可以看到里面的菜单比包含的 div 大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:22:39.167

如果你告诉我我的回答不是你的意思，我会删除它，因为我不确定你真正需要做什么。你想让这个滚动消失，如果文本比弹出窗口大，不管它是不是轮廓都漂浮在上面？

如果这是您想要的，则必须删除`overflow: auto`from`.olFramedCloudPopupContent`并再次`overflow: auto`从元素的内联样式中删除`#chicken_contentDiv`（我不确定您是否使用 jQuery 添加它）。

# c# - 自定义 mediatypeformatter 不适用于继承的类

> ID：14579897
> 
> 赞同：0
> 
> 时间：2013-01-29T09:46:31.960
> 
> 标签：c#, vb.net, func, mediatypeformatter

我有这条线：

```
GlobalConfiguration.Configuration.Formatters.Add(New ExcelMediaTypeFormatter(Of Classification)(Function(t) New ExcelRow(ExcelCell.Map(t.ChemicalAbstractService), ExcelCell.Map(t.Substance), ExcelCell.Map(t.Columns("Classifidcation")), ExcelCell.Map(t.Columns("Classification"))), Function(format) "excel")) 
```

它工作正常，并从我的 web api 创建一个 excelfile。

我有几个继承这个分类类的子类，我想为每个子类制作一个媒体格式化程序，以获取 excelformatter 中的特定列。问题是，如果我这样做：

```
GlobalConfiguration.Configuration.Formatters.Add(New ExcelMediaTypeFormatter(Of CustomClassification)(Function(t) New ExcelRow(ExcelCell.Map(t.ChemicalAbstractService), ExcelCell.Map(t.Substance), ExcelCell.Map(t.Columns("Classifidcation")), ExcelCell.Map(t.Columns("Classification"))), Function(format) "excel")) 
```

然后它根本不起作用。它只是从标准格式化程序生成 xml。当 web api 返回一个

```
IQueryable(Of Classification) 
```

格式化程序：

```
public class ExcelMediaTypeFormatter<T> : BufferedMediaTypeFormatter 
    {
    private const string ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
    private readonly Func<T, ExcelRow> builder;

    public ExcelMediaTypeFormatter(Func<T, ExcelRow> value)
    {
        builder = value;
        SupportedMediaTypes.Add(new MediaTypeHeaderValue(ContentType));
    }

    public ExcelMediaTypeFormatter(Func<T, ExcelRow> value, params Func<object, string>[] type)
        : this(value)
    {
        foreach (var mediaTypeMapping in type) {
            this.MediaTypeMappings.Add(Map(mediaTypeMapping));
        }
    }

    public override bool CanWriteType(Type type)
    {
        return type == typeof(IQueryable<T>) || type == typeof(T);
    }

    public override bool CanReadType(Type type)
    {
        return false;
    }
public override void WriteToStream(Type type, object value, Stream writeStream, HttpContent content)
    {            
        using (Stream ms = new MemoryStream()) {
            using (var book = new ClosedXML.Excel.XLWorkbook()) {
                var sheet = book.Worksheets.Add("sample");

                ICollection<T> rows = type == typeof(IQueryable<T>) ? ((IQueryable<T>)value).ToList() : new List<T>() { (T)value };

                for (var r = 0; r < rows.Count; r++) {
                    var result = builder((T)rows.ElementAt(r));

                    for (var c = 0; c < result.Count(); c++) {
                        if (result.ElementAt(c) != null)
                            sheet.Cell(r + 2, c + 1).Value = result.ElementAt(c).Value.ToString();
                    }
                }

                sheet.Columns().AdjustToContents();

                book.SaveAs(ms);

                byte[] buffer = new byte[ms.Length];

                ms.Position = 0;
                ms.Read(buffer, 0, buffer.Length);

                writeStream.Write(buffer, 0, buffer.Length);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:51:11.417

`CanWriteType`将返回`false`，因为`T`is`CustomClassification`和`type`is `Classification`。如果它返回 false，则不会使用您的格式化程序。

因为 a`Classification`不一定是 a`CustomClassification`这行不通。

为了实现你想要的，你需要稍微改变你的实现。

您`ExcelMediaTypeFormatter`将不再是通用的。它不会通过一个`Func`，而是一个`IRowsBuilder`实例列表。这些将在`WriteToStream`方法中用于选择正确的构建器：

```
public interface IRowsBuilder
{
    bool CanBuildFor(Type type);
    IEnumerable<Type> SupportedTypes { get; }
    ExcelRow BuildRow(object value);
}

public class RowsBuilder<T> : IRowsBuilder where T : Classification
{
    Func<T, ExcelRow> _builder;

    public RowsBuilder(Func<T, ExcelRow> builder)
    {
        if(builder == null) throw new ArgumentNullException("builder");

        _builder = builder;
    }

    public bool CanBuildFor(Type type)
    {
        return type.IsSubclassOf(typeof(T));
    }

    public IEnumerable<Type> SupportedTypes
    {
        get { yield return typeof(T); }
    }

    public ExcelRow BuildRow(object value)
    {
        if(!CanBuildFor(value.GetType()))
            throw new ArgumentException();

        return _builder((T)value);
    }
}

public class ExcelMediaTypeFormatter : BufferedMediaTypeFormatter 
{
    private readonly ILookup<Type, IRowsBuilder> _builder;

    public ExcelMediaTypeFormatter(IEnumerable<IRowsBuilder> builder)
    {
        _builder = builder.SelectMany(x => builder.SupportedTypes
                                                  .Select(y => new
                                                          {
                                                              Type = y,
                                                              Builder = x
                                                          }))
                          .ToLookup(x => x.Type, x => x.Builder); 
    }

    public override bool CanWriteType(Type type)
    {
        return type == typeof(IQueryable<Classification>) ||
               type == typeof(Classification);
    }

    // ...

    public override void WriteToStream(Type type, object value,
                                       Stream writeStream, HttpContent content)
    {

        // ...

        List<Classification> rows;
        if(type == typeof(IQueryable<Classification>))
            rows = ((IQueryable<Classification>)value).ToList();
        else
            rows = new List<Classification> { (Classification)value };

        for (var r = 0; r < rows.Count; r++)
        {
            var value = rows.ElementAt(r);
            var builder = _builder[value.GetType()];
            var result = builder(value);
            // ...
        }
    }
} 
```

您现在只需`ExcelMediaTypeFormatter`向所有构建器注册一个：

```
var customBuilder = new RowsBuilder<CustomClassification>(
                        t => new ExcelRow(ExcelCell.Map(t.ChemicalAbstractService),
                                          ExcelCell.Map(t.Substance), 
                                          ExcelCell.Map(t.Columns("Classifidcation")),
                                          ExcelCell.Map(t.Columns("Classification"))));
var builders = new List<IRowsBuilder>();
builder.Add(customBuilder);
builder.Add(someOtherBuilder);
var excelFormatter = new ExcelMediaTypeFormatter(builders, format => "excel");
GlobalConfiguration.Configuration
                   .Formatters
                   .Add(excelFormatter); 
```

# objective-c - 如何从 Google Drive 获取 HTML 文件的链接？

> ID：14579901
> 
> 赞同：1
> 
> 时间：2013-01-29T09:46:37.617
> 
> 标签：objective-c, google-drive-api

我正在编写一个 iOS 应用程序，并且我在 Google Drive 上存储了一些 HTML 文件。我想检索 HTML 文件的链接。

从 Google Drive 获取 HTML 链接的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:27:22.600

如果您无法硬编码文件 URL 的值，唯一的替代方法是在 iOS 上使用[Google Drive API 。](https://developers.google.com/drive/)

# php - PHP日期函数日期范围

> ID：14579904
> 
> 赞同：-1
> 
> 时间：2013-01-29T09:46:38.813
> 
> 标签：php

> **可能重复：**
> [PHP，查看日期范围是否部分在另一个日期范围内](https://stackoverflow.com/questions/8717861/php-see-if-date-range-is-partly-within-another-date-range)

我有 2 个日期，一个开始日期 (2011-01-01) 和一个结束日期 (2011-02-28)。

我有第三个日期，从 2010 年 1 月 1 日开始，到 2012 年 3 月 1 日结束。这意味着第三个日期在前两个日期范围内。

如果第三个日期的开始日期和/或结束日期不在这两个日期之内，则它必须为假。

如何使用 php 进行检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:49:50.017

您可以执行以下操作：

```
$startDate = strtotime('2011-01-01');
$endDate = strtotime('2011-02-28');

$intervalStart = strtotime('2011-02-01');
$intervalEnd = strtotime('2012-03-01');

if ($startDate < $intervalStart || $endDate > $intervalEnd) {
    echo 'Not in the interval';
} else {
    echo 'In the interval';
} 
```

# android - android.os.NetworkOnMainThreadException 在 android 4.0

> ID：14579906
> 
> 赞同：1
> 
> 时间：2013-01-29T09:46:43.513
> 
> 标签：android, eclipse

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.MenuItem.OnMenuItemClickListener;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.Toast;

public class Signin extends Activity {

    EditText edt_mail, edt_password;
    Button btn_login, btn_pass, btn_reg, btn_forget;
    ImageView iv1, iv2;
    String strmail, strpassword, strres;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.signin);

        btn_forget = (Button) findViewById(R.id.btnforget);

        edt_mail = (EditText) findViewById(R.id.edt_Username);
        edt_password = (EditText) findViewById(R.id.edt_Password);

        btn_login = (Button) findViewById(R.id.btnlogin);
        btn_pass = (Button) findViewById(R.id.btncancel);
        btn_reg = (Button) findViewById(R.id.btnReg);
        iv1 = (ImageView) findViewById(R.id.imgfacebook);
        iv2 = (ImageView) findViewById(R.id.imgtwitter);
        btn_forget.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(Signin.this, ForgetPassword.class);
                startActivity(intent);

            }
        });
        iv2.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(Signin.this, Twitter.class);
                startActivity(intent);

            }
        });
        iv1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(Signin.this, Facebook.class);
                startActivity(intent);

            }
        });

        btn_reg.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(Signin.this, Signup.class);
                startActivity(intent);
            }
        });
        btn_pass.setOnClickListener(new OnClickListener() {

            public void onClick(View v) { // TODO Auto-generated method stub

                cleartext();
            }

            public void cleartext() { // TODO Auto-generated method stub

                edt_mail.setText("");
                edt_password.setText("");
            }
        });

        btn_login.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if (!edt_mail.getText().toString().equals("")) {

                    if (!edt_password.getText().toString().equals("")) {

                        try {
                            if (CheckConnection()) {
                                // new GetAccess().execute("");
                                getLogin();
                            } else {
                                Toast.makeText(
                                        Signin.this,
                                        "Please check your internet connection",
                                        Toast.LENGTH_LONG).show();
                            }

                        } catch (Exception e) {
                            Toast.makeText(Signin.this,
                                    "Error caught = " + e.toString(),
                                    Toast.LENGTH_LONG).show();
                        }

                    } else {

                        Toast.makeText(Signin.this, "please enter Password",
                                Toast.LENGTH_LONG).show();
                    }
                } else {
                    Toast.makeText(Signin.this, "please enter Username",
                            Toast.LENGTH_LONG).show();

                }

            }

            private boolean CheckConnection() {
                final ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
                final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();
                if (activeNetwork != null
                        && activeNetwork.getState() == NetworkInfo.State.CONNECTED) {
                    // notify user you are online
                    // System.out.println("Internet connected = 1");
                    return true;

                } else {
                    // notify user you are not online
                    // System.out.println("Internet not connected = 0");
                    Toast.makeText(getApplicationContext(),
                            "Please check your internet connection ",
                            Toast.LENGTH_SHORT).show();
                    return false;

                }
            }
        });

    }

    public boolean CheckConnection() {
        final ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();
        if (activeNetwork != null
                && activeNetwork.getState() == NetworkInfo.State.CONNECTED) {
            // notify user you are online
            // System.out.println("Internet connected = 1");
            return true;
        } else {
            // notify user you are not online
            System.out.println("Internet not connected = 0");
            Toast.makeText(getApplicationContext(),
                    "Please check your internet connection ",
                    Toast.LENGTH_SHORT).show();
            return false;

        }

    }

    private void loadList() {

        /*
         * ArrayAdapter<String> adapter = new ArrayAdapter<String>(
         * MainActivity.this, android.R.layout.simple_list_item_1, eventlist);
         * view.setAdapter(adapter);
         */

        Intent intent = new Intent(Signin.this, MainList.class);
        startActivity(intent);

    }

    public void getLogin() {

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(
                "my link");
        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            // nameValuePairs.add(new BasicNameValuePair("id", "12345"));
            nameValuePairs.add(new BasicNameValuePair("email", edt_mail
                    .getText().toString().trim()));
            nameValuePairs.add(new BasicNameValuePair("password", edt_password
                    .getText().toString().trim()));

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse httpResponse = httpclient.execute(httppost);
            HttpEntity entity = httpResponse.getEntity();

            InputStream inputStream = entity.getContent();

            // EntityUtils.toString(httpResponse.getEntity());
            String strres = convertStreamToString(inputStream);

            if (!strres.toString().trim().equals("0")) {
                Toast.makeText(Signin.this, "Successfully logged in ",
                        Toast.LENGTH_SHORT).show();
                Intent intent = new Intent(Signin.this, NewMainList.class);

                startActivity(intent);
            }

            else if (strres.toString().trim().equals("0")) {
                Toast.makeText(Signin.this, "Invalid login and password",
                        Toast.LENGTH_SHORT).show();
            }
            System.out.println("Response = " + strres);

            // username.setText("");
            // password.setText("");// clear text box
        } catch (ClientProtocolException e) {
            System.out.println(e);
        } catch (IOException e) {
            System.out.println(e);
        }
    }

    public String convertStreamToString(InputStream inputStream)
            throws IOException {
        if (inputStream != null) {
            StringBuilder sb = new StringBuilder();
            String line;
            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(inputStream, "UTF-8"));
                while ((line = reader.readLine()) != null) {
                    sb.append(line).append("\n");
                }
            } finally {
                inputStream.close();
            }
            return sb.toString();
        } else {
            return "";
        }

    }

    public class GetAccess extends AsyncTask<String, String, String> {
        ProgressDialog dialog;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            dialog = new ProgressDialog(Signin.this);
            dialog.setTitle("Please wait");
            dialog.setMessage("Getting login access");
            dialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            getLogin();
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            dialog.dismiss();
            setSession();
            loadList();

            // System.out.println(result);

        }

        private void setSession() {
            SharedPreferences preferences = getSharedPreferences("CurrentUser",
                    MODE_WORLD_READABLE);
            SharedPreferences.Editor editor = preferences.edit();
            editor.putString("Save", edt_mail.getText().toString());
            editor.putString("Save1", edt_password.getText().toString());
            editor.putString("Save2", strres.toString().trim());
            System.out.println("Response = " + strres);

            editor.commit();
            edt_mail.setText("");
            edt_password.setText("");

        }
    }

} 
```

注意：此代码在 android 2.3 模拟器和设备中完美运行。但是当我在 android 4.0 或更高版本中运行此代码时。它给了我强制关闭错误。请帮助摆脱this.in logcat，它显示android.os.NetworkOnMainThreadException错误..我该如何解决这个问题..???

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:49:20.143

你的错误解释了自己......

在旧版本的 AndroidOS 中，您可以在 UI 线程上运行网络，如果超时，将导致您的应用停止响应。为了解决这个问题，较新版本的 Android 不再支持在 UI 线程上运行网络请求，您现在需要在 Threads 或 AsyncTasks 中执行此操作。

此行： `HttpResponse httpResponse = httpclient.execute(httppost);`需要位于未运行 UI 的线程中。

```
new Thread(){
    public void run(){
        //TODO Run network requests here.
        getLogin();
    }
}.start(); 
```

为什么会发生这种情况... Android 运行的东西可以被称为 WatchDog，用外行的话来说，它是将您的代码链接到 Android 的代码的一部分。此计时器将不时与您的应用程序和操作系统进行通信，以确保一切正常运行并且没有任何崩溃。如果您在运行 WatchDog 计时器的同一线程的 UI 线程上运行网络请求，并且您的响应超时，它将锁定您的整个应用程序，导致它停止与 Android 通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:48:57.727

您的主线程上不能有任何网络连接。这意味着您需要通过 Thread 或 AsyncTask 将其移动到另一个 Thread。

这意味着您需要对 getLogin() 方法执行此操作。在主线程中调用网络连接的**任何**处理都是不合法的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T10:23:07.270

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

            StrictMode.setThreadPolicy(policy);

add this lines after setcontentview(R.layout.main); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:17:35.767

尝试这个，

我改变了。`Toast`在 添加中删除`doInBackground()`添加到`onPostExecute()`。

```
 public class Signin extends Activity {

EditText edt_mail, edt_password;
Button btn_login, btn_pass, btn_reg, btn_forget;
ImageView iv1, iv2;
String strmail, strpassword, strres;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.signin);

    btn_forget = (Button) findViewById(R.id.btnforget);

    edt_mail = (EditText) findViewById(R.id.edt_Username);
    edt_password = (EditText) findViewById(R.id.edt_Password);

    btn_login = (Button) findViewById(R.id.btnlogin);
    btn_pass = (Button) findViewById(R.id.btncancel);
    btn_reg = (Button) findViewById(R.id.btnReg);
    iv1 = (ImageView) findViewById(R.id.imgfacebook);
    iv2 = (ImageView) findViewById(R.id.imgtwitter);
    btn_forget.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(MainActivity.this,
                    ForgetPassword.class);
            startActivity(intent);

        }
    });
    iv2.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(MainActivity.this, Twitter.class);
            startActivity(intent);

        }
    });
    iv1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(MainActivity.this, Facebook.class);
            startActivity(intent);

        }
    });

    btn_reg.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(MainActivity.this, Signup.class);
            startActivity(intent);
        }
    });
    btn_pass.setOnClickListener(new OnClickListener() {

        public void onClick(View v) { // TODO Auto-generated method stub

            cleartext();
        }

        public void cleartext() { // TODO Auto-generated method stub

            edt_mail.setText("");
            edt_password.setText("");
        }
    });

    btn_login.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if (!edt_mail.getText().toString().equals("")) {

                if (!edt_password.getText().toString().equals("")) {

                    try {
                        if (CheckConnection()) {
                            new GetAccess().execute();
                            // getLogin();
                        } else {
                            Toast.makeText(
                                    MainActivity.this,
                                    "Please check your internet connection",
                                    Toast.LENGTH_LONG).show();
                        }

                    } catch (Exception e) {
                        Toast.makeText(MainActivity.this,
                                "Error caught = " + e.toString(),
                                Toast.LENGTH_LONG).show();
                    }

                } else {

                    Toast.makeText(MainActivity.this,
                            "please enter Password", Toast.LENGTH_LONG)
                            .show();
                }
            } else {
                Toast.makeText(MainActivity.this, "please enter Username",
                        Toast.LENGTH_LONG).show();

            }

        }

        private boolean CheckConnection() {
            final ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();
            if (activeNetwork != null
                    && activeNetwork.getState() == NetworkInfo.State.CONNECTED) {
                // notify user you are online
                // System.out.println("Internet connected = 1");
                return true;

            } else {
                // notify user you are not online
                // System.out.println("Internet not connected = 0");
                Toast.makeText(getApplicationContext(),
                        "Please check your internet connection ",
                        Toast.LENGTH_SHORT).show();
                return false;

            }
        }
    });

}

public boolean CheckConnection() {
    final ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();
    if (activeNetwork != null
            && activeNetwork.getState() == NetworkInfo.State.CONNECTED) {
        // notify user you are online
        // System.out.println("Internet connected = 1");
        return true;
    } else {
        // notify user you are not online
        System.out.println("Internet not connected = 0");
        Toast.makeText(getApplicationContext(),
                "Please check your internet connection ",
                Toast.LENGTH_SHORT).show();
        return false;

    }

}

private void loadList() {

    /*
     * ArrayAdapter<String> adapter = new ArrayAdapter<String>(
     * MainActivity.this, android.R.layout.simple_list_item_1, eventlist);
     * view.setAdapter(adapter);
     */

    Intent intent = new Intent(MainActivity.this, MainList.class);
    startActivity(intent);

}

public void getLogin() {

    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("my link");
    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        // nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("email", edt_mail
                .getText().toString().trim()));
        nameValuePairs.add(new BasicNameValuePair("password", edt_password
                .getText().toString().trim()));

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse httpResponse = httpclient.execute(httppost);
        HttpEntity entity = httpResponse.getEntity();

        InputStream inputStream = entity.getContent();

        // EntityUtils.toString(httpResponse.getEntity());
        strres = convertStreamToString(inputStream);

        System.out.println("Response = " + strres);

        // username.setText("");
        // password.setText("");// clear text box
    } catch (ClientProtocolException e) {
        System.out.println(e);
    } catch (IOException e) {
        System.out.println(e);
    }
}

public String convertStreamToString(InputStream inputStream)
        throws IOException {
    if (inputStream != null) {
        StringBuilder sb = new StringBuilder();
        String line;
        try {
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(inputStream, "UTF-8"));
            while ((line = reader.readLine()) != null) {
                sb.append(line).append("\n");
            }
        } finally {
            inputStream.close();
        }
        return sb.toString();
    } else {
        return "";
    }

}

public class GetAccess extends AsyncTask<String, String, String> {
    ProgressDialog dialog;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        dialog = new ProgressDialog(MainActivity.this);
        dialog.setTitle("Please wait");
        dialog.setMessage("Getting login access");
        dialog.show();
    }

    @Override
    protected String doInBackground(String... params) {
        getLogin();
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        if (dialog.isShowing())
            dialog.dismiss();
        setSession();
        loadList();
        if (!strres.toString().trim().equals("0")) {
            Toast.makeText(MainActivity.this, "Successfully logged in ",
                    Toast.LENGTH_SHORT).show();
            Intent intent = new Intent(MainActivity.this, NewMainList.class);

            startActivity(intent);
        }

        else if (strres.toString().trim().equals("0")) {
            Toast.makeText(MainActivity.this, "Invalid login and password",
                    Toast.LENGTH_SHORT).show();
        }

        // System.out.println(result);

    }

    private void setSession() {
        SharedPreferences preferences = getSharedPreferences("CurrentUser",
                MODE_WORLD_READABLE);
        SharedPreferences.Editor editor = preferences.edit();
        editor.putString("Save", edt_mail.getText().toString());
        editor.putString("Save1", edt_password.getText().toString());
        editor.putString("Save2", strres.toString().trim());
        System.out.println("Response = " + strres);

        editor.commit();
        edt_mail.setText("");
        edt_password.setText("");

    }
}

} 
```

# java - 在不删除任何内容的情况下获得并发修改异常

> ID：14579911
> 
> 赞同：0
> 
> 时间：2013-01-29T09:47:06.733
> 
> 标签：java, exception, concurrency

我正在用 Java 编写简单的塔防游戏。这是查找从 spawn（在构造函数中设置）到最近基址的路径的方法。

```
public int[] findPath(Field startField) {
    ArrayList<TestMonster> monsrs = new ArrayList<TestMonster>();
    TestMonster first = new TestMonster(startField.getCenter(), getStartingDirection(startField), new int[0]);
    monsters.add(first);
    while (true) {
        for (TestMonster monsr : monsrs) {
            monster.move();
            if (getFieldFromCenter(monsr.getPoint()).getState() == 101)
                return monsr.getPath();
            Field field = getFieldFromCenter(monsr.getPoint());
            if (field.isUp())
                monsters.add(new TestMonster(monsr.getPoint(), 0, monster.getPath()));
            if (field.isRight())
                monsters.add(new TestMonster(monsr.getPoint(), 90, monster.getPath()));
            if (field.isDown())
                monsters.add(new TestMonster(monsr.getPoint(), 180, monster.getPath()));
            if (field.isLeft())
                monsters.add(new TestMonster(monsr.getPoint(), 270, monster.getPath()));
            if (monsrs.isEmpty())
                return null;
        }
    }
} 
```

如果没有路径，它可能会返回怪物移动到基地的下一个方向的数组或 null。它遍历作为 Field 类对象的字段。在每场怪物搜索可能的动作，并为每一个创造新的怪物与设定的方向。新怪物继承也会移动数组以添加它自己的方向，然后将其提供给新怪物等等。我的问题是我的代码中哪里有并发 mod ex 的可能性？我该如何预防呢？

**堆栈跟踪：**

```
Exception in thread "AWT-EventQueue-0" java.util.ConcurrentModificationException
at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819)
at java.util.ArrayList$Itr.next(ArrayList.java:791)
at towerdefence.MainPanel.findPath(MainPanel.java:160)
at towerdefence.MainPanel$1.actionPerformed(MainPanel.java:62)
at javax.swing.SwingUtilities.notifyAction(SwingUtilities.java:1664)
at javax.swing.JComponent.processKeyBinding(JComponent.java:2879)
at javax.swing.KeyboardManager.fireBinding(KeyboardManager.java:306)
at javax.swing.KeyboardManager.fireKeyboardAction(KeyboardManager.java:250)
at javax.swing.JComponent.processKeyBindingsForAllComponents(JComponent.java:2971)
at javax.swing.JComponent.processKeyBindings(JComponent.java:2963)
at javax.swing.JComponent.processKeyEvent(JComponent.java:2842)
at java.awt.Component.processEvent(Component.java:6282)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:49:55.150

迭代器很快就会失败，因此如果您在其上使用迭代器来迭代集合，则不能同时修改集合。意味着使用迭代器，您不能同时迭代和修改集合。比如在你正在迭代的集合中添加或删除一些东西。

[什么是快速失败迭代器](http://www.jguru.com/faq/view.jsp?EID=221988)

另请参阅此问题[fail-fast iterator](https://stackoverflow.com/questions/13549927/fail-fast-iterator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:02:40.680

在循环内，考虑将您的对象添加到临时列表中，然后（在循环外）添加到您的原始列表中。

您无法修改正在迭代的列表。例子：

```
List<Object> list = new ArrayList<Object>();
list.add("object 1");
list.add("object 2");
for (Object object : list) {
    list.add("another one");
} 
```

它也会抛出 java.util.ConcurrentModificationException。

有关更详细的信息，请阅读文档： [http ://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html](http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:54:01.257

试试这个，可能会解决你的问题

```
List<TestMonster> monsrs = Collections.synchronizedList(new ArrayList<TestMonster>()); 
```

`ArrayList`实现不同步，您需要同步对列表的访问。您可以通过同步封装对象或使用`Collections.synchronizedList`方法来完成此操作。

请检查[此](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)以获取更多信息

# tinymce - tinymce 将跨度插入列表标签

> ID：14579916
> 
> 赞同：6
> 
> 时间：2013-01-29T09:47:20.023
> 
> 标签：tinymce

我在`<p>`标签内的tinymce编辑器中有一些文本，没有别的，没有类，没有样式。当我选择文本并单击无序列表按钮时，它就`<p>`变成了一个列表。但每个`<li>`看起来都是这样的：

`<li><span style="font-size: 12px; line-height: 1.5em;">Some text...</span></li>`

这些样式来自哪里，哪个tinymce配置选项，哪个文件，哪个什么？？？我希望列表按钮只添加列表 html 标记，没有任何跨度和样式。

这是我的 tinymce 配置。配置是直接从 Chrome 检查器复制的（这就是嵌套道具中没有缩进的原因）：（断点位于第 13547 行，`tinymce.add(t);`在 tiny_mce_src.js 中的语句处）

```
settings: Object
accessibility_focus: true
accessibility_warnings: false
add_form_submit_trigger: true
add_unload_trigger: true
apply_source_formatting: 0
bodyClass: "wysiwygeditor"
button_tile_map: true
content_css: "/sites/all/themes/adaptivetheme/at_core/css/at.layout.css,/sites/all/themes/atsl/css/global.base.css,/sites/all/themes/mytheme/css/global.styles.css
convert_fonts_to_spans: 1
convert_urls: false
delta_height: 0
delta_width: 0
dialog_type: "modal"
directionality: "ltr"
doctype: "<!DOCTYPE>"
document_base_url: "/"
entities: "quot,apos,amp,lt,gt,nbsp,iexcl"
entity_encoding: "named"
extended_valid_elements: ""
fix_table_elements: true
font_size_legacy_values: "xx-small,small,medium,large,x-large,xx-large,300%"
font_size_style_values: "xx-small,x-small,small,medium,large,x-large,xx-large"
forced_root_block: "p"
formats: Object
hidden_input: true
id: "edit-body-und-0-value"
ie7_compat: true
indent: "simple"
indent_after: "p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist"
indent_before: "p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist"
indentation: "30px"
inline_styles: true
language: "en"
mode: "none"
object_resizing: true
padd_empty_editor: true
paste_auto_cleanup_on_paste: 0
plugins: "style,-codemagic"
popup_css: ""
preformatted: 1
relative_urls: true
remove_linebreaks: 1
remove_script_host: true
render_ui: true
skin: "thebigreason"
strict_loading_mode: true
style_formats: Object
submit_patch: true
table_inline_editing: false
table_styles: Array[0]
theme: "advanced"
theme_advanced_blockformats: "p,h3,h4"
theme_advanced_buttons1: "bold,italic,underline,justifyleft,justifycenter,justifyright,separator,bullist,numlist,indent,outdent"
theme_advanced_buttons2: "link,image,media,charmap,blockquote,separator,formatselect,removeformat,styleselect,codemagic"
theme_advanced_buttons3: ""
theme_advanced_resize_horizontal: 0
theme_advanced_resizing: 1
theme_advanced_resizing_use_cookie: false
theme_advanced_statusbar_location: "bottom"
theme_advanced_toolbar_align: "left"
theme_advanced_toolbar_location: "top"
url_converter: function (url, name, elm) {
url_converter_scope: tinymce.create.Editor
validate: true
verify_html: true
visual: true
width: "100%" 
```

“格式”是这样的：

```
formats: Object
aligncenter: Object
classes: "align-center"
selector: "p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img"
__proto__: Object
alignleft: Object
classes: "align-left"
selector: "p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img"
__proto__: Object
alignright: Object
classes: "align-right"
selector: "p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img"
__proto__: Object
forecolor: Object
classes: "forecolor"
inline: "span"
styles: Object
__proto__: Object
hilitecolor: Object
classes: "hilitecolor"
inline: "span"
styles: Object
__proto__: Object
strikethrough: Object
inline: "line-through"
__proto__: Object
underline: Object
classes: "underline"
exact: true
inline: "span"
__proto__: Object
__proto__: Object 
```

“样式格式”是这样的：

```
style_formats: Object
blink: Object
attributes: Object
class: "blink"
__proto__: Object
inline: "span"
title: "Blink"
__proto__: Object
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T11:24:29.237

看起来我找到了解决您问题的方法：[http ://martinsikora.com/how-to-make-tinymce-to-output-clean-html](http://martinsikora.com/how-to-make-tinymce-to-output-clean-html)

关键在于使用[extended_valid_elements](http://www.tinymce.com/wiki.php/Configuration:extended_valid_elements)。这将删除所有没有类属性的跨度

```
extended_valid_elements : "span[!class]" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T15:24:25.650

[与http://fiddle.tinymce.com](http://fiddle.tinymce.com)相比，我的 tinymce 配置缺少“插件”设置。 当我添加“插件”设置时，tinymce 不再将带有样式的跨度插入列表。

一些使我找到解决方案的附加信息：

在我的网站上调试时（在创建列表时）， tiny_mce_src.js 的第 14212 行返回 false - 它在 tinymce fiddle 上返回 true。( `if (o = t.execCommands[cmd]) {.....`)

在我的网站上，tinymce 以某种方式执行了第 15063 行（`execNativeCommand`函数），而在 tinymce 小提琴上却没有（可能是缺少插件的结果）

本机 Chrome`execCommand`在插入样式跨度时存在问题，如下所述：http: [//help.dottoro.com/ljcvtcaw.php](http://help.dottoro.com/ljcvtcaw.php)我还创建了一个小提琴来确认它：http: [//jsfiddle.net/fUsmx/](http://jsfiddle.net/fUsmx/)（关闭并重新打开检查器看结果）

# c - C中整数的快速符号

> ID：14579920
> 
> 赞同：12
> 
> 时间：2013-01-29T09:47:40.757
> 
> 标签：c

C中有一个符号函数：

```
int sign(int x)
{
    if(x > 0) return 1;
    if(x < 0) return -1;
    return 0;
} 
```

不幸的是，比较成本非常高，所以我需要修改函数以减少比较次数。

我尝试了以下方法：

```
int sign(int x)
{
    int result;
    result = (-1)*(((unsigned int)x)>>31);

    if (x > 0) return 1;

    return result;
} 
```

在这种情况下，我只得到一个比较。

有什么办法可以完全避免比较吗？

**编辑** [可能的重复](https://stackoverflow.com/questions/1903954/is-there-a-standard-sign-function-signum-sgn-in-c-c)不会给出问题的答案，因为所有答案都是 C++，使用比较（我应该避免）或不返回`-1`, `+1`, `0`.

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-30T20:21:10.783

首先，整数比较非常便宜。它的*分支*可能很昂贵（由于分支预测错误的风险）。

我已经使用 gcc 4.7.2 在 Sandy Bridge 盒子上对您的功能进行了基准测试，每次调用大约需要 1.2ns。

以下是大约 25% 的速度，每次调用大约 0.9ns：

```
int sign(int x) {
    return (x > 0) - (x < 0);
} 
```

上面的机器代码是完全无分支的：

```
_sign:
    xorl    %eax, %eax
    testl   %edi, %edi
    setg    %al
    shrl    $31, %edi
    subl    %edi, %eax
    ret 
```

有两点值得指出：

1.  性能的基础水平非常高。
2.  消除分支确实可以提高性能，但不会显着。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T19:48:29.660

```
int sign(int x)
{
    // assumes 32-bit int and 2s complement signed shifts work (implementation defined by C spec)
    return (x>>31) | ((unsigned)-x >> 31);
} 
```

第一部分 ( `x>>32`) 为负数提供 -1，为 0 或正数提供 0。如果 x > 0 或等于 INT_MIN，则第二部分为您提供 1，否则为 0。或者给你正确的最终答案。

还有 canonical `return (x > 0) - (x < 0);`，但不幸的是大多数编译器会使用分支来生成代码，即使没有可见的分支。您可以尝试手动将其转换为无分支代码，如下所示：

```
int sign(int x)
{
    // assumes 32-bit int/unsigned
    return ((unsigned)-x >> 31) - ((unsigned)x >> 31);
} 
```

这可以说比上面更好，因为它不依赖于实现定义的行为，但有一个微妙的错误，即它将为 INT_MIN 返回 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-07T11:50:01.397

```
int sign(int x) {    
    return (x>>31)|(!!x);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T19:47:21.847

If`s(x)`是一个返回符号位的函数`x`（您通过 实现它`((unsigned int)x)>>31`），您可以以某种方式组合`s(x)`和`s(-x)`。这是一个“真值表”：

> x > 0: s(x) = 0; s(-x) = 1; 你的函数必须返回 1
> 
> x < 0: s(x) = 1; s(-x) = 0; 您的函数必须返回 -1
> 
> x = 0: s(x) = 0; s(-x) = 0; 你的函数必须返回 0

因此，您可以通过以下方式组合它们：

```
s(-x) - s(x) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-30T19:44:07.403

```
int i = -10;
if((i & 1 << 31) == 0x80000000)sign = 0;else sign = 1;
//sign 1 = -ve, sign 0 = -ve 
```

# java - java.lang.NullPointerException: println 需要消息soap

> ID：14579923
> 
> 赞同：3
> 
> 时间：2013-01-29T09:47:46.963
> 
> 标签：java, android, soap, httptransportse

我的源代码，

```
private static final String URL = "http://footballpool.dataaccess.eu/data/info.wso";
private static final String NAME_SPACE = "http://footballpool.dataaccess.eu";
private static final String METHODE_NAME = "TopGoalScorers";
private static final String SOAP_ACTION = NAME_SPACE + "/" + METHODE_NAME;

SoapObject request = new SoapObject(NAME_SPACE, METHODE_NAME);

    request.addProperty("iTopN", 10);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);

    HttpTransportSE transporte = new HttpTransportSE(URL);

    SoapObject soapObject = null;
    try {
        transporte.call("http://footballpool.dataaccess.eu/data/info.wso/TopGoalScorers", envelope);

        soapObject = (SoapObject) envelope.getResponse();

    } catch (Exception e) {
        Log.e("Soap", e.getMessage());
    } 
```

我给出了这个错误：

```
> 01-29 10:44:17.877: E/AndroidRuntime(10704): FATAL EXCEPTION: main
01-29 10:44:17.877: E/AndroidRuntime(10704): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.serviosweb/com.android.serviosweb.MainActivity}: java.lang.NullPointerException: println needs a message
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.os.Looper.loop(Looper.java:137)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at java.lang.reflect.Method.invokeNative(Native Method)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at java.lang.reflect.Method.invoke(Method.java:511)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at dalvik.system.NativeStart.main(Native Method)
01-29 10:44:17.877: E/AndroidRuntime(10704): Caused by: java.lang.NullPointerException: println needs a message
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.util.Log.println_native(Native Method)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.util.Log.e(Log.java:231)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at com.android.serviosweb.MainActivity.onCreate(MainActivity.java:44)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.app.Activity.performCreate(Activity.java:5104)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-29 10:44:17.877: E/AndroidRuntime(10704):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-29 10:44:17.877: E/AndroidRuntime(10704):    ... 11 more 
```

请任何人帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:53:41.400

在 catch 语句中使用：

```
String errorMessage = (ex.getMessage()==null)?"Message is empty":ex.getMessage();
Log.e("Message:",errorMessage ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:06:17.500

你的问题很简单。在您的 try 块中抛出了一个异常。Catch-Block 现在尝试通过将异常消息打印到您的日志来处理这些异常。不太可能未设置您要打印的消息，并且您的 Logger(sys.out.print) 无法打印任何内容（空值）。

只要您想像 Mohamed_AbdAllah 建议的那样打印 StackTrace。您需要获取 StackTrace 作为 String Guava 和 Apache Commons 有用于这些目的的方法。一个简单的构建您自己的方式将是：

```
StackTraceElement[] stack = e.getStackTrace();
StringTrace = "";
for(StackTraceElement line : stack)
{
   Trace += line.toString();
}

    Log.e("Soap",Trace); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T12:40:40.487

使用此代码：（例如）

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        PropertyInfo username = new PropertyInfo();
        username.setName("username");
        username.setValue("google");
        username.setType(String.class);
        username.setNamespace(NAMESPACE);
        request.addProperty(username); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T09:53:59.290

在捕获中，使用：

```
String err = (ex.getMessage()==null)?"SD Card failed":ex.getMessage();
Log.e("sdcard-err2:",err); 
```

# bash - 用于同步两个目录的 Unix bash 脚本

> ID：14579934
> 
> 赞同：-1
> 
> 时间：2013-01-29T09:48:09.727
> 
> 标签：bash, unix, ubuntu

我有这个系统编程任务，而且我是 bash 的新手，所以任何人都可以帮助我。（我使用的是 Ubuntu）

***作业：*** 为 Unix 创建一个同步两个目录的 bash 脚本。

**调用：** mySync [-r] / [-i] leftdir rightdir

左侧但不在右侧列表中的所有文件都从左侧复制到右侧。右侧目录中但不在左侧目录中的所有文件都从右向左复制。如果文件两边都存在，则旧版本将替换为新版本。

*   如果存在 -r（递归）函数，递归将同步所有子文件夹。

*   如果存在 -i 选项（交互式），则仅在用户同意的情况下才会覆盖现有（旧）文件。

    *我非常感谢您的帮助。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:14:53.270

您可能想要使用的工具：

*   `find`: 列出每个目录包含的内容，有或没有`-maxdepth`选项，并借助`-printf`允许您打印带有文件名和最后修改时间的列表的选项（都在同一行！）。
*   `comm`（与 一起使用`sort`）：比较您使用 获得的两个文件/目录列表`find`，并仅打印您需要传输的文件（参见`-1`、`-2`和`-3`选项）。
*   其余的，通常的 Bash 内置函数：`read`和`getopts`

请参阅相关手册。

# python - 如何使用 pyglet 循环限制 CPU 使用率？

> ID：14579937
> 
> 赞同：2
> 
> 时间：2013-01-29T09:48:18.673
> 
> 标签：python, pyglet

我正在编写一个音乐播放器，为了能够控制音乐阅读，我创建了一个线程，在其中放置了一个 while 循环。我的问题是，即使我用 pyglet.clock.tick() 限制循环，我的 cpu 也是 100%。

有没有办法减少它？

```
class PlayerThread(threading.Thread):

  stopnow = None
  player = None

  def __init__(self, player, file_path):
    threading.Thread.__init__(self)

    self.stopnow = threading.Event()
    self.player = player
    source = pyglet.media.load(file_path)
    self.player.queue(source)

  def run(self):
    self.play()
    while not self.stopnow.isSet():
      pyglet.clock.tick()

  def play(self):
    if not self.player.playing:
      self.player.play()

  def stop(self):
    self.stopnow.set()

  def pause(self):
    if self.player.playing:
      self.player.pause() 
```

谢谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:55:55.607

您必须使用`clock.set_fps_limit(number_of_frames_per_second)`来设置帧率的上限。

# javascript - NodeJs：列出远程文件服务器上存在的文件名和目录

> ID：14579941
> 
> 赞同：1
> 
> 时间：2013-01-29T09:48:31.347
> 
> 标签：javascript, node.js

我有一个位于[http://myshare.com](http://myshare.com)的文件服务器。该服务器仅用于托管我的所有文件。我的文件服务器有一个名为“myfiles”的目录。所以我的 URI 看起来像这样：' [http://myshare.com/myfiles](http://myshare.com/myfiles) '。这个位置有 10 个文件。

第一个问题：如何使用 Node.js 获取位于此远程文件服务器上的所有文件的名称？

第二个问题：如果 'myfiles' 目录有子目录，如何使用 Node.js 遍历所有子目录并列出其中的所有文件？

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:24:38.527

我想这些文件在同一台机器上，因为您总是可以使用 cifs 或类似文件安装它们，然后它将与本地文件相同，从而使生活更容易，因为管理它们而不是您的代码的操作系统。

首先，您必须熟悉节点的文件对象和函数“readdir”，无论是异步版本还是同步版本。 [http://nodejs.org/api/fs.html#fs_fs_readdir_path_callback](http://nodejs.org/api/fs.html#fs_fs_readdir_path_callback)

然后解析返回的文件数组。

对于子目录，您必须编写一个在每个目录上调用自身的递归函数。对于每个文件，您必须检查 fsstats 并检查返回对象的 isDirectory() 属性。

*   获取 fsStat 对象 [http://nodejs.org/api/fs.html#fs_fs_stat_path_callback](http://nodejs.org/api/fs.html#fs_fs_stat_path_callback)
*   fsStat 对象[http://nodejs.org/api/fs.html#fs_class_fs_stats](http://nodejs.org/api/fs.html#fs_class_fs_stats)

作为示例，您可以查看此答案[https://stackoverflow.com/a/5827895/1680125](https://stackoverflow.com/a/5827895/1680125)

希望能帮助到你

# c# - 共享资源 Visual Studio 2010

> ID：14579945
> 
> 赞同：1
> 
> 时间：2013-01-29T09:48:47.057
> 
> 标签：c#, visual-studio-2010, visual-studio, nancy

所以我有一个包含 4 个项目的解决方案，一个“核心”项目，它是实际的应用程序（作为一个类库），以及 3 个包装项目，“控制台”、“WinForm”和“服务”，它们基本上包装了一个外观类核心类并包含各种设置以处理每个不同应用程序（控制台/跟踪/文件）的不同日志记录策略，并将应用程序作为控制台、WinForms 或服务启动，具体取决于客户希望如何部署应用程序。

在核心项目中，我有 3 个资源文件，其中包含 Nancy Web 框架的简单模板视图。然而，南希寻找这些观点的方式是在当前的道路上。由于核心项目中的文件不在其他 3 个项目中的任何一个的当前路径上，我需要一种简单的方法来跨项目访问这些文件。

我有些天真地认为这是“解决方案”概念的来源，用于处理项目之间的依赖关系。然而，通过搜索互联网，令我惊讶的是，似乎没有优雅的方法可以做到这一点。我能找到的唯一两个解决方案包括将文件复制到解决方案中的临时/临时目录或目录，然后将它们复制到相应的所需目录，作为后期构建操作，以及使用“添加为”手动添加项目关联”。现在，虽然这两种解决方案在技术上都有效，但第一个叶子（可能已经过时）构建的人工制品位于它们不真正属于的位置（恕我直言），第二个是乏味、耗时且容易出现人为错误的（因为你不能只链接到一个目录）。

这些真的是我仅有的两个选择，还是因为我是 Visual Studio 的新手而错过了第三种完全明显的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:14:28.657

如果您只需要特定于 Nancy 的东西，您可以在 Nancy 中使用自定义 IRootPathProvider。

另一种选择是链接一个文件夹 - 你可以这样做，但它涉及手动破解 csproj 文件，这里有一些关于它的问题，包括这个：

[Visual Studio 链接文件目录结构](https://stackoverflow.com/questions/3033990/visual-studio-linked-files-directory-structure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:06:49.923

[Nuget](http://nuget.codeplex.com/)是一个包管理系统，我用来在项目之间共享工件作为依赖项。您可以包含可通过 nuget.org 获得的库，或者定义您自己的 nuget 包。

[Teamcity](http://confluence.jetbrains.net/display/TCD7/NuGet)对每次构建时生成 nuget 包都有很好的支持，并且可以用作 Nuget 服务器。

[这](http://docs.nuget.org/docs/reference/nuspec-reference#Specifying_Files_to_Include_in_the_Package)是将文件包含到 nuget 包中的参考。

# arrays - AS2 如何制作可以修改全局数组变量值的数组按钮（MC）？

> ID：14579947
> 
> 赞同：0
> 
> 时间：2013-01-29T09:48:50.243
> 
> 标签：arrays, variables, click, actionscript-2, movieclip

在影片的第一帧中，我声明了一个数组变量并创建了影片剪辑：

```
frame = new Array();
for(i=1; i<=5; i++){
    frame[i] = "empty";
    var a = attachMovie("box", "box"+i, i, {_x:i*100, _y:100});
} 
```

我想使用变量 frame[] 来计算电影剪辑被点击的次数。我来为我使用的电影剪辑“框”创建一个类，但不知道如何找出单击了哪个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:05:40.207

甚至不需要为盒子创建一个类，只需将索引 i 作为参数传递给方法 attachMovie 中的每个影片剪辑：

```
frame = new Array();
for(i=1; i<=5; i++){
    frame[i] = "empty";
    var a = attachMovie("box", "box"+i, i, {_x:i*100, _y:100, index:i});
    a.onMouseDown = function ()
    {
        trace(this["index"])
    }
} 
```

之后，每个框都知道自己在帧数组中的索引。

# css - Sass - 导入要在 mixin 中使用的变量

> ID：14579953
> 
> 赞同：4
> 
> 时间：2013-01-29T09:49:06.287
> 
> 标签：css, sass, mixins

**有没有办法将外部变量导入mixins？**
我想从 mixin 参数生成一个变量名
，然后从外部源调用它。这有道理吗？

* * *

## **变量.scss**

```
/* Striped status bar variables ******************************************/

$greyFirstGradientStartColor: #999999;
$greyFirstGradientEndColor: #d3cfcf;
$greySecondGradientStartColor: #ababab;
$greySecondGradientEndColor: #595959; 
```

* * *

## **mixins.scss**

```
@import variables.scss

[...]

@mixin gradient-repeating($color, $deg, $firstWidth, $space, $secondWidth){

  background-image:
    repeating-linear-gradient(
      $deg,
      $(#{$color}FirstGradientStartColor),
      $(#{$color}FirstGradientEndColor) $firstWidth+px,
      $(#{$color}SecondGradientStartColor) ($firstWidth+$space)+px,
      $(#{$color}SecondGradientStartColor) $secondWidth+px
  );
} 
```

* * *

## **我的主css文件.scss**

```
@import variables.scss;  
@import mixins.scss;  

[...]

@include gradient-repeating(grey, -45, 20, 0, 20); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:59:16.003

不，Sass 中不存在变量变量。通常改为使用列表或列表列表。

你的 mixin 可以这样写：

```
$grey-gradient: #999999 #d3cfcf, #ababab #595959;

@mixin gradient-repeating($color, $deg, $firstWidth, $space, $secondWidth){
    $firstColor: nth($color, 1);
    $secondColor: nth($color, 2);
    background-image:
        repeating-linear-gradient(
          $deg,
          nth($firstColor, 1),
          nth($firstColor, 2) $firstWidth+px,
          nth($secondColor, 1) ($firstWidth+$space)+px,
          nth($secondColor, 1) $secondWidth+px
        );
}

.foo {
    @include gradient-repeating($grey-gradient, -45, 20, 0, 20);
} 
```

# asp.net - 访问 Web 方法时，Asp.Net Web 服务的返回类型 XmlDocument 更改为 XmlNode

> ID：14579956
> 
> 赞同：0
> 
> 时间：2013-01-29T09:49:16.583
> 
> 标签：asp.net, web-services

我在 Web 服务中有一个 Web 方法，它返回一个 XmlDocument。当我执行它并提供必要的参数时，Web 服务工作正常。

我在另一个应用程序中创建了此服务的代理。代理创建得很好。

现在的问题是，当我尝试从该服务访问方法时，它会从服务中获取所有方法，但该方法的返回类型显示为 XmlNode 而不是 XmlDocument。

例如，让我们说：

## 服务.asmx

```
public class DataService : System.Web.Services.WebService
{
    [WebMethod]
    public XmlDocument GetData(int ID)
    {
            //Code Here
    }
} 
```

现在我有一个正在使用此服务的 Windows 应用程序。

通过代理为服务创建了一个对象。

```
DRService.DataService  drService = new DRService.DataService(); 
```

现在我正在尝试访问服务方法。

```
drService.GetData(1) 
```

上述方法调用的返回类型应该是 XmlDocument 但它返回 XmlNode 作为返回类型。

知道为什么 retun 类型是 XmlNode 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:22:09.587

这是预期的行为。

# c++ - 标准：容器 C++ 移到前面

> ID：14579957
> 
> 赞同：11
> 
> 时间：2013-01-29T09:49:18.107
> 
> 标签：c++, list, stl, vector, swap

我正在寻找像 std::list 这样的 std 容器，它可以有效地将元素移动到前面：

```
a-b-c-d-e 
```

将“b”移到前面：

```
a-c-d-e-b 
```

std 容器中没有这样的功能。因此，我认为我必须将 remove 和 push_front 函数结合起来，但有没有人能找到更好的主意？

预先感谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-29T09:51:41.777

开`std::vector`，你可以使用`std::rotate`，它具有线性复杂度

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <vector>

std::vector<int> v = { 0, 1, 2, 3, 4 };

int main()
{
   std::copy(v.begin(), v.end(), std::ostream_iterator<int>(std::cout, ",")); 
   std::cout << "\n";

   // swap ranges [1, 2) and [2, 5)
   auto it = std::next(v.begin(), 1); // O(1)
   auto rb = std::next(it);
   auto re = v.end();
   std::rotate(it, rb, re); // O(N)

   std::copy(v.begin(), v.end(), std::ostream_iterator<int>(std::cout, ","));   
   std::cout << "\n";
} 
```

在一个`std::list`你可以使用成员函数`splice`，它（给定迭代器）具有恒定的复杂性

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <list>

std::list<int> v = { 0, 1, 2, 3, 4 };

int main()
{
   std::copy(v.begin(), v.end(), std::ostream_iterator<int>(std::cout, ",")); 
   std::cout << "\n";

   auto it = std::next(v.begin(), 1); // O(N)
   auto rb = std::next(it);
   auto re = v.end();   
   v.splice(it, v, rb, re); // O(1)

   std::copy(v.begin(), v.end(), std::ostream_iterator<int>(std::cout, ","));
   std::cout << "\n";   
} 
```

**注意**：最后一个元素通常表示为`back`STL 容器中，第一个元素表示为`front`. 对于`std::vector`，获取某个元素的迭代器是常数时间，而交换是线性时间。对于`std::list`，获取迭代器是线性时间，但拼接到同一个列表中是恒定时间。然而，正如Stroustrup的**[这个基准](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Keynote-Bjarne-Stroustrup-Cpp11-Style)**所示，vector 更好的内存缓存行为也很重要。

**更新**：几位评论者提到简单地交换元素：这仅适用于您想转换`a-b-c-d-e`为`a-e-c-d-b`. 在这种情况下，`std::iter_swap`请在您喜欢的任何容器上使用。对于 into 的`a-b-c-d-e`转换`a-c-d-e-b`，使用`std::rotate`or `list::splice`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-29T10:30:58.733

如果您不必维护其他元素的顺序，那么最简单的解决方案无疑就是将您想要的元素与容器中的第一个元素交换。这对*所有*容器都是有效的。

否则，`std::list`提供`splice`可以使用的操作。我认为类似于以下内容：

```
void
moveToFront( 
    std::list<MyType>& list,
    std::list<MyType>::iterator element )
{
    if ( element != list.begin() ) {
        list.splice( list.begin(), list, element, std::next( element ) );
    }
} 
```

这最终应该只有几个指针操作，并且 *没有*副本。另一方面，`std::list`一般来说可能很慢（因为它的位置很差）；我会非常仔细地衡量使用 的幼稚实现`std::vector`，以确保它在全球范围内取得了胜利。如果迭代查找要移动到前面的元素的成本要高出十倍，那么在这里消除所有副本可能不会是一场胜利。（这在很大程度上取决于复制的成本`MyType`和复制的大小。如果`sizeof(MyType)`接近页面大小，或者访问`MyType`最终访问了许多间接分配的对象，则 locality 参数将不成立。）

使用`std::vector`，而不是明显的`erase`/`insert`

```
void
moveToFront( 
    std::vector<MyType>& list,
    std::vector<MyType>::iterator element )
{
    MyType tmp( *element );
    std::copy_backwards( list.begin(), std::prev( element ), element );
    *list.begin() = tmp;
} 
```

这将导致比`erase`（它复制所有以下元素）`insert`（它也复制所有以下元素——这意味着所有元素，因为我们在开头插入）模式的副本更少。

# algorithm - 从微秒转换为小时、分钟、秒和毫秒

> ID：14579970
> 
> 赞同：1
> 
> 时间：2013-01-29T09:50:01.767
> 
> 标签：algorithm, date, datetime, pseudocode

我需要从微秒（保存在`unsigned long long int`变量中）传递到其表示为小时、分钟、秒、毫秒，即：

```
from 47072349659 to 13:04:32.350 
```

我[从毫秒中找到了这种转换](https://stackoverflow.com/questions/10874048/from-milliseconds-to-hour-minutes-seconds-and-milliseconds)，但我似乎无法让它在我的情况下工作。也许问题是数字太长而无法存储在某些变量类型中？我正在使用`unsigned long long int`输入时间并尝试将 int、long、unsigned long long int 用于输出。

这是我的 C++ 代码：

```
unsigned long long int timestamp;

long milliseconds   = (long) (timestamp / 1000000) % 1000;
long seconds    = (long) ((timestamp / (1000)) % 60);
long minutes    = (long) ((timestamp / (60000)) % 60);
long hours      = (long) ((timestamp / (3600000)) % 24); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:31:04.577

我认为您的错误在于您的设备：

```
long milliseconds   = (long) (timestamp / 1000) % 1000;
long seconds    = (((long) (timestamp / 1000) - milliseconds)/1000)%60 ;
long minutes    = (((((long) (timestamp / 1000) - milliseconds)/1000) - seconds)/60) %60 
long hours      = ((((((long) (timestamp / 1000) - milliseconds)/1000) - seconds)/60) - minutes)/60 
```

# java - Android客户端无法连接

> ID：14579971
> 
> 赞同：0
> 
> 时间：2013-01-29T09:50:01.687
> 
> 标签：java, android

我正在尝试将 JAVA 服务器连接到 android 应用程序，但我没能做到.....

这是我的服务器......

```
package com.example.androidserver;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

public class ServerMain 
{
public static void main(String []args)
{
    ServerSocket ss;
    try 
    {
        ss = new ServerSocket(7654);
        Socket socket = ss.accept();

        boolean t = socket.isConnected();
        if(t)
        {
            System.out.println("Client connected");
        }
    }
    catch (IOException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
} 
```

这是客户...

```
package com.example.androidclient;

import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View; 
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {

Button send;
EditText et1;
Socket socket;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new Thread()
    {
        public void run()
        {
            try
            {
                socket = new Socket("localhost", 7654);
                boolean t = socket.isConnected();
                if(t)
                {
                    Toast.makeText(getBaseContext(), "Connected", Toast.LENGTH_LONG).show();
                }
            } 
            catch (UnknownHostException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
            catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }.start();
    send = (Button)findViewById(R.id.button1);
    et1= (EditText)findViewById(R.id.editText1);

    send.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
            String str;
            str = et1.getText().toString();
            Toast.makeText(getBaseContext(), str, Toast.LENGTH_LONG).show();
        }});
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

XML 文件..

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/editText1"
    android:text="Send" />

</RelativeLayout> 
```

我没弄明白怎么回事……我的客户端 n 服务器没有连接……请帮我纠正它……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:56:58.273

我认为您的问题在这里： socket = new Socket("localhost", 7654); 为什么是本地主机？它应该是服务器 IP 地址。

还有另一个问题：

```
Toast.makeText(getBaseContext(), "Connected", Toast.LENGTH_LONG).show(); 
```

您不能从非 UI 线程显示 toast。[读这个。](https://stackoverflow.com/questions/3134683/android-toast-in-a-thread)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:57:25.003

`localhost`指执行代码的计算机，在 Android 应用程序的上下文中，它是手机或模拟器，而不是您的开发计算机。

测试您的场景的最佳方法是将您的手机连接到您的开发机器所连接的同一个本地无线网络，并使用您机器的 IP 地址，而不是`localhost`.

# php - 从 Azure 角色设置环境变量以在 PHP 中使用

> ID：14579972
> 
> 赞同：0
> 
> 时间：2013-01-29T09:50:15.760
> 
> 标签：php, azure, environment-variables

我正在使用此代码： Environment.SetEnvironmentVariable("ConnectionString", connString, EnvironmentVariableTarget.[User|Process|Machine]); 在 Azure RoleEntryPoint 类的 OnRoleEnvironmentChanged 事件上设置环境变量上的连接字符串并在 PHP 中使用它，但它不起作用。

使用用户或进程作为目标它根本不起作用，使用机器角色无法执行指令（可能是因为用户限制）

如何从 .NET 中的 Azure 角色设置变量以在 PHP 中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:59:12.567

为什么不简单地使用[Windows Azure PHP SDK](http://dl.windowsazure.com/phpdocs/classes/WindowsAzure.ServiceRuntime.RoleEnvironment.html#init)`getConfigurationSettings()`中的方法？如果你真的想设置环境变量，我建议你再试一次 Machine 但只有在你将角色的**executionContext更改为****提升**之后。

# c - 使用 c 库 open() 初始化串行通信导致 TX 在 RPi 上发送一位

> ID：14579974
> 
> 赞同：4
> 
> 时间：2013-01-29T09:50:17.180
> 
> 标签：c, serial-port, raspberry-pi

我正在尝试在 RPI 和 FPGA 之间建立串行通信。但是，在使用标准 C 库 open() 来初始化串行接口时存在一个问题：我正在使用示波器来监视通过 RX 和 TX 线路发送和接收的内容。调用 open 会导致 RPI 的 TX 线变低一位的长度。我在其他计算机/Linux PC 上看不到这种行为。关键是，FPGA 假设传输有效，因为他认为这是一个起始位，但事实并非如此。

我检查了安装在 RPI 上的 minicom。一样。启动 minicom 会导致 TX 线发送一位。一旦 minicom 启动，通信就会按预期运行，并且所有字节都具有正确的帧大小。有什么方法可以抑制 TX 线在打开调用以初始化串行通信时变低？这是预期的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:00:57.353

这是一个超级牵强的预感，但是[这段代码](https://github.com/bootc/linux/blob/rpi-3.2.23/drivers/tty/serial/amba-pl011.c#LC1395)似乎有点可疑，从`pl011_startup()`PL011[串口驱动](https://github.com/bootc/linux/tree/rpi-3.2.23/drivers/tty/serial)中的函数来看：

```
/*
 * Provoke TX FIFO interrupt into asserting.
 */ 
```

启动端口时，它*似乎在旋转 TX 线，这可以解释您看到的脉冲。*当然，在得出结论之前肯定需要进行更多调查。

所以，我想我的“答案”归结为：这听起来很奇怪，也许是司机的问题？

当然，解决这个问题的一种方法是在 FPGA 端应用一些小心，假设您对它有更多的控制权。“正确的”框架会解决这个问题，并清楚地表明可以丢弃虚假发送。

**更新**：我的意思是，如果“正确”消息总是由某些字节序列构成，那么 FPGA 可能无论如何都能够丢弃无效（“未成帧”）数据，从而不受随机脉冲的影响。例如，可以将消息定义为始终以`SOH`（标头开头）或`SOT`（文本开头）符号（分别[具有值 0x01 和 0x02 的字节](http://www.asciitable.com/)）开头。

# postgresql - Postgresql 9.2 用户定义类型中输入输出函数的目的是什么？

> ID：14579977
> 
> 赞同：2
> 
> 时间：2013-01-29T09:50:29.277
> 
> 标签：postgresql, user-defined-types

我一直在 Postgresql 9.2 中实现用户定义的类型并且感到困惑。在 PostgreSQL 9.2 文档中，有一[节 (35.11) 关于用户定义类型](http://www.postgresql.org/docs/9.2/static/xtypes.html)。在该部分的第三段中，文档提到了用于构造类型的输入和输出函数。我对这些功能的目的感到困惑。他们关心磁盘上的表示还是只关心内存中的表示？在上面提到的部分中，在定义了输入和输出函数之后，它指出：

> 如果我们想对类型做更多的事情而**不仅仅是存储它**，我们必须提供额外的函数来实现我们希望对该类型进行的任何操作。

输入和输出函数是否处理序列化？据我了解，输入函数是用于执行`INSERT INTO`的函数，输出函数是`SELECT`在类型上执行的，所以基本上，如果我们想要执行，`INSERT INTO`那么我们需要在输入或输出函数中嵌入或调用一个序列化函数。谁能帮我解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:41:50.733

类型必须具有文本表示，以便此类型的值可以在 SQL 查询中表示为文字，并作为输出列中的结果返回。

例如，`'2013-20-01'`是日期的文本表示。可以写入`VALUES('2013-20-01'::date)`SQL 语句，因为该`date`类型的输入函数将此字符串识别为日期并将其转换为内部表示（用于在内存中使用它并存储到磁盘）。

相反，当客户端代码发出时`SELECT date_field FROM table`，内部的值`date_field`以其文本表示形式返回，这是由内部表示的类型的输出函数产生的（除非客户端请求此列的二进制格式）。

# c - Windows 上的 C 编程 - 对于曾经在 Ubuntu 上做过的人

> ID：14579980
> 
> 赞同：-4
> 
> 时间：2013-01-29T09:50:46.427
> 
> 标签：c, windows, unix, gcc

**背景故事：**我已经四处搜索并阅读了一些来自 SO 的问题，但我仍然有些困惑。

我在大学学了 C，只来了 1 个学期，我们正在休息。

我学会了在 Unix 环境、Mac OS X 和 Ubuntu 下用 C 语言编程，这非常容易。

打开终端，安装 GCC，开始使用 vim 并为您的项目编写一些 make 文件，您就完成了。

我已经删除了我的 Ubuntu 分区，因为我只将它用于 C 编程，我对 Windows（游戏等）太了解了，我正在寻找在 Windows 上类似的体验。

我根本不想从 .NET 安装任何东西，因为它不仅仅是应用程序，而是 500000 个其他无用的东西——老实说，这让我很生气。

* * *

**TL;博士;**

我听说 MinGW 使用的是非常旧的 gcc 版本并且没有维护，否则我会使用它。

**那么有没有人知道gcc，没有废话端口或其他用于Windows上的C编程？**

**我可以使用 Notepad++ 编写 .c 文件和语法高亮，我根本不关心 IDE。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:54:40.727

最简单的方法可能是安装 cygwin（您可能需要从开发部分显式选择“gcc”）。如果你曾经在 unix 上工作过，那么在你的 windows 机器上使用 cygwin 可能是个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T09:55:27.760

您可以使用 IDE，例如 Visual Studio，它将捆绑所有需要的功能（编译器、库等）

如果您不想使用 IDE 并且更喜欢 vim 的轻便，那么将其安装在 Windows 上并在 CLI 中编译会很痛苦，Cygwin 很酷（请参阅其他答案），但与 Windows 终端相比，我无法忍受Linux / Mac 的。

也许考虑使用运行 Ubuntu 的虚拟机进行所有开发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T09:57:26.820

你的问题的答案是否定的。

您要么使用 MinGW，要么使用 Visual Studio。没有**轻量级**的第三个选项，除非你想使用 Turbo C。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T10:13:16.337

我现在正在使用 MinGW - 我使用过时版本的 GCC 被错误地告知它。

在某种程度上，我想我应该因为不检查自己而投下反对票。

哦，好吧，你生活和学习。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T10:51:15.540

试试这些：

*   代码块：http : [//www.codeblocks.org/](http://www.codeblocks.org/)
*   Eclipse，正如前面提到的那样；- 旧版本的程序也适合学习，例如：Borland C++ 3.1 Turbo C（均基于 DOS）

尝试 Visual Studio 6.0 :) 在该版本中没有 .NET。

# java - 只需使用按钮在 webview 中显示图片（Android SDK）

> ID：14579988
> 
> 赞同：0
> 
> 时间：2013-01-29T09:51:03.237
> 
> 标签：java, javascript, android, sdk, webview

有人可以帮忙吗？我只想在按下按钮时能够打开图片。最终将新图像分配给其他按钮。我直接在手机（GS3）上测试这个，当我按下按钮时，我得到一个黑屏，左上角有一个倒置的 android 标志，file:///res/raw/process.png 作为链接中的链接中间。当我点击链接时，没有任何反应。我是初学者，如果您有解决方案，请以我可以剪切和过去的方式发布。图片在所述位置，可能与我处理 webView 的方式有关。按钮和 webView 在同一个 XML 上，因为我不知道如何使用意图。我只是想隐藏按钮并显示 webView。在此先感谢，已经工作了 12 个小时，并且必须在 3 内上班 :( 我拥有[www.FirstSergeant.com](http://www.firstsergeant.com)如果有什么我可以帮助您的回报，请告诉我。再次感谢杰西

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.LinearLayout;

public class menu extends Activity implements OnClickListener {

    private WebView picView;
    private LinearLayout layout;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    Button appBtn = (Button) findViewById(R.id.process);
    appBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

                picView = (WebView)findViewById(R.id.webView);
                layout = (LinearLayout) findViewById(R.id.linearLayout);
                layout.setVisibility(View.GONE);
                picView.setBackgroundColor(0);
                picView.setVisibility(View.VISIBLE);
                picView.loadUrl("file:///res/raw/process.png");
                picView.getSettings().setBuiltInZoomControls(true);
                picView.getSettings().setUseWideViewPort(true);
            }                

        });
    }
    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
 }
    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:02:43.227

首先，您需要分配`picView`and `layout`inside `onCreate()`，而不是在按钮单击内部。

其次，你的图片url错误，会导致file not found异常。尝试：

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    Button appBtn = (Button) findViewById(R.id.process);
    picView = (WebView)findViewById(R.id.pic_view);
    layout = (LinearLayout) findViewById(R.id.linearLayout);

    appBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
                layout.setVisibility(View.GONE);
                picView.setBackgroundColor(0);
                picView.setVisibility(View.VISIBLE);
                picView.loadUrl("file:///android_res/raw/process.png");
                picView.getSettings().setBuiltInZoomControls(true);
                picView.getSettings().setUseWideViewPort(true);
            }                

        });
    } 
```

# delphi - 如何通过 Delphi 7 将文件上传到 Dropbox？

> ID：14579998
> 
> 赞同：7
> 
> 时间：2013-01-29T09:51:35.813
> 
> 标签：delphi, oauth, dropbox, indy-9

我尝试将文件上传到保管箱。
我使用 dropbox api [https://www.dropbox.com/developers/reference/api#files-POST](https://www.dropbox.com/developers/reference/api#files-POST)

```
procedure TDropbox.Upload2;
const
  URL = 'https://api-content.dropbox.com/1/files/dropbox/';
var
  Response: String;
  Params: TIdMultipartFormDataStream;
  https: TIdHTTP;
  SslIoHandler: TIdSSLIOHandlerSocket;
begin
  https := TIdHTTP.Create(nil);
  Params := TIdMultipartFormDataStream.Create();
  try
    SslIoHandler := TIdSSLIOHandlerSocket.Create(https);
    SslIoHandler.SSLOptions.Method := sslvTLSv1;
    SslIoHandler.SSLOptions.Mode := sslmUnassigned;

    https.IOHandler := SslIoHandler;

    Params.AddFormField('oauth_signature_method', 'PLAINTEXT');
    Params.AddFormField('oauth_consumer_key', FAppKey);
    Params.AddFormField('oauth_token', FOAuth.AccessToken);
    Params.AddFormField('oauth_signature', FAppSecret + '&' + FOAuth.AccessTokenSecret);

    Params.AddFile('file', 'C:\test.txt', 'application/octet-stream');

    https.Post(URL + 'test.txt', Params);
  finally
    FreeAndNil(https);
    FreeAndNil(Params);
  end;
end; 
```

我收到“400 错误请求”。
所有令牌都是正确的（其他 api 运行良好）。
这个api如何传递参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T18:32:02.580

试试这个：

```
procedure TDropbox.Upload(const AFileName: String);
const
  API_URL = 'https://api-content.dropbox.com/1/files_put/sandbox/';
var
  URL: String;
  https: TIdHTTP;
  SslIoHandler: TIdSSLIOHandlerSocket;
begin
  URL := API_URL+ExtractFileName(AFileName)
    + '?oauth_signature_method=PLAINTEXT&oauth_consumer_key=' + FAppKey
    + '&oauth_token=' + FOAuth.AccessToken
    + '&oauth_signature=' + FAppSecret + '%26' + FOAuth.AccessTokenSecret;

  https := TIdHTTP.Create(nil);
  try
    SslIoHandler := TIdSSLIOHandlerSocket.Create(https);
    SslIoHandler.SSLOptions.Method := sslvTLSv1;
    SslIoHandler.SSLOptions.Mode := sslmUnassigned;

    https.IOHandler := SslIoHandler;
    https.Post(URL, AFileName);
  finally
    FreeAndNil(https);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:46:06.267

1.  在参数`%26`中使用。通过符号连接的一个参数中有两个值。`&``oauth_signature``&`
2.  通过`TMemoryStream`.

    ```
    procedure TDropbox.Upload(const AFileName: String);
    const
      API_URL = 'https://api-content.dropbox.com/1/files_put/sandbox/';
    var
      URL: String;
      Stream: TMemoryStream;
      ShortFileName: String;
      https: TIdHTTP;
      SslIoHandler: TIdSSLIOHandlerSocket;
    begin
      if not FileExists(AFileName) then
      begin
        raise EInOutError.CreateFmt('File %s not found', [AFileName]);
      end;

      ShortFileName := ExtractFileName(AFileName);
      URL := API_URL+ShortFileName
        + '?oauth_signature_method=PLAINTEXT&oauth_consumer_key=' + FAppKey
        + '&oauth_token=' + FOAuth.AccessToken
        + '&oauth_signature=' + FAppSecret + '%26' + FOAuth.AccessTokenSecret;

      https := TIdHTTP.Create(nil);
      Stream := TMemoryStream.Create;
      try
        SslIoHandler := TIdSSLIOHandlerSocket.Create(https);
        SslIoHandler.SSLOptions.Method := sslvTLSv1;
        SslIoHandler.SSLOptions.Mode := sslmUnassigned;

        https.IOHandler := SslIoHandler;
        Stream.LoadFromFile(AFileName);

        https.Post(URL, Stream);
      finally
        FreeAndNil(Stream);
        FreeAndNil(https);
      end;
    end; 
    ```