# StackOverflow 问答 13500000-13500999

# spring - Spring Insight Operations - 在 Jboss 5.1.2 上部署 Insight Agent 时出错

> ID：13500008
> 
> 赞同：0
> 
> 时间：2012-11-21T18:45:24.933
> 
> 标签：spring, spring-insight

我试图让 Spring 洞察力解决部署在 Jboss EAP 5.1.2 上的应用程序的性能问题。如果我理解正确，spring Insight 的开发者版仅适用于 tomcat 服务器。由于我必须创建资源并花时间解决在 tomcat 服务器上部署我的应用程序的依赖项/类加载问题，因此我决定尝试“Insight Operations”1.8.3（来自 vmware 的试用版）。

我已启动并运行仪表板。我从仪表板（从管理选项卡）下载了insight-agent.jar。我能够使用以下命令成功安装代理：

```
 java -jar insight-agent.jar --install --jboss_profile test 
```

上面的命令尝试将insight-agent.war 文件部署到我的jboss 配置文件中，但是部署存在问题：

你能帮忙吗？

> 2012-11-21 12:56:34,028 INFO [org.jboss.bootstrap.microcontainer.ServerImpl] (main) JBoss (Microcontainer) [5.1.2 (build: SVNTag=JBPAPP_5_1_2 date=201111102209)] 开始于 39s:513ms 2012 -11-21 12:57:48,904 信息 [org.jboss.web.tomcat.service.deployers.TomcatDeployment] (HDScanner) 部署，ctxPath=/insight-agent 2012-11-21 12:57:49,042 严重 [com. springsource.insight.classpath.InsightClassPathMunger] (HDScanner) 上下文未由 InsightClassLoader 初始化 2012-11-21 12:57:49,043 严重 [com.springsource.insight.classpath.InsightClassPathMunger] (HDScanner) 因此，我无法添加conf 或插件到类路径 2012-11-21 12:57:49,043 SEVERE [com.springsource.insight.classpath.InsightClassPathMunger] (HDScanner) 但是，我会尝试配置日志子系统 2012-11-21 12:57 :49,051 信息 [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/insight-agent]] (HDScanner) 初始化 Spring 根 WebApplicationContext 2012-11-21 12:57:49,514 错误 [org.springframework.web.context.ContextLoader] (HDScanner ) 上下文初始化失败 **java.lang.IllegalArgumentException：URI 不是分层的** 在 java.io.File.(File.java:363) 在 org.jboss.net.protocol.file.FileURLConnection.(FileURLConnection.java:62) 在 org.jboss.net.protocol.file.Handler.openConnection(Handler .java:40) 在 java.net.URL.openConnection(URL.java:945) 在 org.springframework.core.io.UrlResource.getInputStream(UrlResource.java:121) 在 org.springframework.core.io.support。 PropertiesLoaderSupport.loadProperties(PropertiesLoaderSupport.java:181) at org.springframework.core.io.support.PropertiesLoaderSupport.mergeProperties(PropertiesLoaderSupport.java:161) at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java: 69) 在 org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663) 在 org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407) 在 org.springframework.web.context.ContextLoader 的 org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:638) .createWebApplicationContext(ContextLoader.java:276) 在 org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197) 在 org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) 在 org. org.jboss.web.tomcat.service.deployers.TomcatDeployment 的 org.apache.catalina.core.StandardContext.start(StandardContext.java:4389) 的 apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3910)。performDeployInternal(TomcatDeployment.java:313) at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:145) at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:461)在 org.jboss.web.deployers.WebModule.startModule(WebModule.java:122) 在 org.jboss.web.deployers.WebModule.start(WebModule.java:97) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org. jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157) 在 org.jboss.mx.server.Invocation.dispatch(Invocation.java:96) 在 org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264) 在 org.jboss.mx.server.MBeanServerImpl 的 org.jboss.mx.server.Invocation.invoke(Invocation.java:88) .invoke(MBeanServerImpl.java:668) at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206) at $Proxy38.start(Unknown Source) at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction( StartStopLifecycleAction.java:42) at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37) at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62) at org.jboss .dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71) 在 org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51) at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348) at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext. java:297) 在 org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1652) 在 org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:938) 在 org.jboss.dependency.plugins .AbstractController.resolveContexts(AbstractController.java:1082) 在 org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:988) 在 org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:826) 在org.jboss.dependency.plugins。AbstractController.change(AbstractController.java:556) at org.jboss.system.ServiceController.doChange(ServiceController.java:688) at org.jboss.system.ServiceController.start(ServiceController.java:460) at org.jboss.system .deployers.ServiceDeployer.start(ServiceDeployer.java:163) 在 org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99) 在 org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46 ) 在 org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:55) 在 org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)。 jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179) 在 org.jboss.deployers.plugins.deployers.DeployersImpl。doDeploy(DeployersImpl.java:1454) at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1172) at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1193)在 org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1113) 在 org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348) 在 org.jboss.dependency.plugins.AbstractController .install(AbstractController.java:1652) at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:938) at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082) at org. jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:988) 在 org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:826) 在 org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:556) 在 org.jboss.deployers.plugins.deployers .DeployersImpl.process(DeployersImpl.java:789) at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:699) at org.jboss.system.server.profileservice.repository.MainDeployerAdapter.process(MainDeployerAdapter .java:117) 在 org.jboss.system.server.profileservice.hotdeploy.HDScanner.scan(HDScanner.java:409) 在 org.jboss.system.server.profileservice.hotdeploy.HDScanner.run(HDScanner.java:294) ) 在 java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441) 在 java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317) 在 java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java :180) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$ 的 java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204) Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)98) 在 java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204) 在 java.util.concurrent.ThreadPoolExecutor$Worker 的 java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180) .runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)98) 在 java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204) 在 java.util.concurrent.ThreadPoolExecutor$Worker 的 java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180) .runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T09:55:19.010

这是 JBoss EAP 5.1 (aka v5.1.2) 问题[JBPAPP-8065](https://issues.jboss.org/browse/JBPAPP-8065)。

# google-apps-script - 未返回联系人的姓名字段

> ID：13500011
> 
> 赞同：1
> 
> 时间：2012-11-21T18:45:35.960
> 
> 标签：google-apps-script, google-contacts-api

当我去提取某个联系人的全名 ( `getFullName()`) 时，我的脚本不会返回任何内容。但是，当我从 Gmail 联系人界面中更改名称时，它会返回该名称。如果我撤消更改，我不会得到名称。

这有什么原因吗？该联系人是我的另一个帐户，与我的 G+ 帐户相关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:42:53.763

这是一个非常有趣的发现。我也能够通过我的一些联系人重现这一点。它必须与这些联系人的导入位置或手动创建方式有关。

但是，我挖得更深一点，我认为这不是 Apps Script 问题，而是 Google Apps Contact API 问题。我发现这个问题直接与此处记录的 Google 联系人 API 交互 -

[https://developers.google.com/google-apps/contacts/v3/](https://developers.google.com/google-apps/contacts/v3/)

这可能是在他们的问题跟踪器中跟踪的与[#3171](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3171)相同的问题。

我试图确认的更多技术细节 -

**一种。**转到位于[https://developers.google.com/oauthplayground](https://developers.google.com/oauthplayground)的 oAuth 游乐场 并手动授权 https://www.google.com/m8/feeds 的[范围](https://www.google.com/m8/feeds)。

单击授权后，该工具将使您登录，然后授权 Playground 工具读取您的联系人。 ![oAuth 游乐场](../Images/2eae7fb58030ca50cdebafa63d054c40.png)

**湾。**现在，单击“交换授权令牌”按钮以获取最终令牌以进行进一步的 REST 调用。 ![获取最终授权令牌](../Images/3300cdfc815c5f3ffc3bb648f4de9d9a.png)

**C。**将请求 URI 设置为[https://www.google.com/m8/feeds/contacts/default/full](https://www.google.com/m8/feeds/contacts/default/full)并点击“发送请求”。您应该在右侧获得 XML 转储。复制并在您最喜欢的 XML 编辑器中查看它，您应该会看到与上面描述的相同的行为，其中 Fullname 仅在编辑后返回。您可以通过以[https://www.google.com/m8/feeds/contacts/default/full/](https://www.google.com/m8/feeds/contacts/default/full/) {contactId}

![取回联系人数据](../Images/0074c81c618a1001c5d9fcf1f7d42326.png)

# objective-c - 如何创建类似 mail.app 的文本字段，BCC 或 cc 字段，其中地址簿联系人作为 OSX 的提示？

> ID：13500012
> 
> 赞同：0
> 
> 时间：2012-11-21T18:45:40.253
> 
> 标签：objective-c, macos

也创建像 mail.app 这样的文本字段，BCC 或 cc 字段，其中地址簿联系人作为 OSX 上的提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:55:08.613

我真的应该问[你以前尝试过什么](http://whathaveyoutried.com/)。但我没那么残忍，查看[NSTokenField](http://developer.apple.com/library/mac/#documentation/cocoa/reference/ApplicationKit/Classes/NSTokenField_Class/Reference/Reference.html)类和[Token Field Programming Guide](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/TokenField_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006555)。

# css - 响应式 CSS 图像锚标记 - 图像映射样式

> ID：13500015
> 
> 赞同：5
> 
> 时间：2012-11-21T18:45:56.277
> 
> 标签：css, image, anchor, responsive-design, imagemap

我一直在开发一个响应式网站，但在使用 Image Maps 时遇到了一些问题。似乎图像地图不适用于基于百分比的坐标。经过一番谷歌搜索后，我找到了一个 JS 解决方法 - [http://mattstow.com/experiment/responsive-image-maps/rwd-image-maps.html](http://mattstow.com/experiment/responsive-image-maps/rwd-image-maps.html)。但是我希望该站点可以在禁用 JS 的情况下工作。

因此，在用尽了这些可能性之后，我决定研究在图像上使用相对定位的 Anchor 标签来做同样的事情。无论如何，这是一个更好的选择。我尝试使用基于百分比的位置和大小将锚标记放置在图像上，但是每当我重新缩放浏览器时，锚标记就会与图像不成比例地移动。

**HTML：**

```
<div id="block">
  <div>
    <img src="http://www.wpclipart.com/toys/blocks/abc_blocks.png">
  </div>
  <a href="#" class="one"></a>
  <a href="#" class="two"></a>
</div> 
```

**CSS：**

```
#block img {
  max-width: 100%;
  display: inline-block;
}

a.one{ 
  height:28%;
  width:19%;
  top:-36%;
  left:1%;
  position:relative;
  display:block;
}
a.two{
  height:28%;
  width:19%;
  top:37%;
  left:36%;
  position:absolute;
} 
```

这是一个 jsFiddle 来描述我的意思 - [http://jsfiddle.net/wAf3b/10/](http://jsfiddle.net/wAf3b/10/)。当我调整 HTML 框的大小时，一切都变得倾斜。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:29:25.677

您在发布的小提琴中遇到了一些 CSS 问题（以及缺少的结束`div`标签）。在确保它`#block`是相对定位的，而不是 100% 的高度，并且你的锚是块/绝对定位后，我能够让标签随着块移动。

这是更新的小提琴：

[http://jsfiddle.net/wAf3b/24/](http://jsfiddle.net/wAf3b/24/)

**CSS**

```
html, body {
  height: 100%;
}

#block{ float:left; width:100%; max-width: 400px; position: relative; }

#content{
  height: 100%;
  min-height: 100%;
}

#block img {
  max-width: 100%;
  display: inline-block;
}

a.one{ height:28%; width:25%; position: absolute; top:55%; left:5%; display:block; background:rgba(0,255,0,0.5);}
a.two{ height:28%; width:25%; position: absolute; top:60%; left:70%; display: block; background:rgba(255,0,0,0.5);} 
```

**HTML**

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <title>Bulky Waste</title>
</head>
<body>
    <div id="content">
        <div id="block">
            <div>
                <img src="http://www.wpclipart.com/toys/blocks/abc_blocks.png">
            </div>
            <a href="#" class="one"></a>
            <a href="#" class="two"></a>
        </div>
    </div><!--/content-->
</body>
</html> 
```

新 html 需要注意的一件重要事情是使用`DOCTYPE`. 出于某种原因，一些浏览器不喜欢它不大写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:05:42.250

绝对定位元素不再是布局的一部分，因此它们不能从其父元素继承相对尺寸属性。你需要 JavaScript 来做你想做的事。

禁用 JS 的人已经期望体验下降。

# apache - URLS 的 Apache ProxyPass 不一致地失败

> ID：13500016
> 
> 赞同：3
> 
> 时间：2012-11-21T18:46:01.877
> 
> 标签：apache, tomcat, ajp, proxypass

这个快把我逼疯了。我有一个活动且正在使用的 Apache 代理服务器在 EC2 上提供内容。它工作得很好，并且有各种配置如下的虚拟主机：

```
<VirtualHost *:80>
    ServerName m.FOO.com
    ServerAlias customer.FOO.com

    ProxyPreserveHost On
    ProxyPass / ajp://10.211.42.48:8009/
    ProxyPassReverse / ajp://10.211.42.48:8009/

    <Proxy ajp://10.211.42.48:8009/*>
          Order allow,deny
          Allow from all
    </Proxy>
</VirtualHost> 
```

这些都很好用，我没有问题。现在我想做的是移动它，而不是每个应用程序的单个虚拟主机，我想在主站点上有一个代理回应用程序服务器的子 URL。因此，他们将拥有“FOO.com/customer/”，而不是拥有“customer.FOO.com”的客户

太好了，听起来很容易，对吧？是的，没有那么多。我编辑服务器“root”的虚拟主机条目（当前显示登录页面），并将代理条目添加到其中的目录中。那应该这样做，对吧？是的，它不是：

```
<VirtualHost *:80>
    ServerName web01.aws.FOO.com
    DocumentRoot /var/www/html
    ErrorLog logs/www.FOO.com-error_log
    CustomLog logs/www.FOO.com-access_log common

    <Location /a>
            ProxyPass ajp://10.211.42.48:8009
            ProxyPassReverse ajp://10.211.42.48:8009
    </Location> 

    <Location /t>
            ProxyPass http://adm01
            ProxyPassReverse http://adm01
    </Location>

    <Proxy ajp://10.211.42.48:8009/*>
          Order allow,deny
          Allow from all
    </Proxy>

</VirtualHost> 
```

如果我点击[http://www.FOO.com/t/](http://www.FOO.com/t/) - 我得到内部网络服务器 - 它代理转发正确，一切都很好。如果我点击[http://www.FOO.com/a/](http://www.FOO.com/a/)我会收到 404 错误。访问日志甚至显示 404 错误。

请注意，ProxyPass AJP 条目与其他 vhost 条目中的相同。那么为什么它在另一个 vhost 条目的根上工作，而不是作为主 vhost 上的子目录呢？

哈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:15:20.587

我最终解决了这个问题，我在某处的邮件列表中发现了一个特别的提示。ProxyPassReverse 指令非常敏感，只有一个基本功能。它在第二个参数上匹配的任何内容（假设使用 ProxyPassReverse AB 形式）都将应用于第一个参数。因此，确保第二个参数正是来自您的应用程序的重定向至关重要，否则 ProxyPassReverse 指令将被忽略。

就我而言，我最终做的是将 Location 条目更改为：

```
ProxyPass /a/ ajp://10.211.42.48:8009
ProxyPassReverse /a/ http://my.apphost.com/ 
```

一切都开始工作得很好。

# c++ - 如何调整动态分配的多态对象数组的大小？

> ID：13500017
> 
> 赞同：0
> 
> 时间：2012-11-21T18:46:01.377
> 
> 标签：c++, arrays, dynamic, polymorphism, dynamic-memory-allocation

我有一个动态分配的多态对象数组，我想在不使用 STL 库（向量等）的情况下调整其大小。我尝试将原始数组移动到临时数组，然后删除原始数组，然后将原始数组设置为临时数组，如下所示：

```
int x = 100;
int y = 150;

Animal **orig = new Animal*[x];
Animal **temp = new Animal*[y];

//allocate orig array
for(int n = 0; n < x; n++)
{
    orig[n] = new Cat();
}

//save to temp
for(int n = 0; n < x; n++)
{
    temp[n] = orig[n];
}

//delete orig array
for(int n = 0; n < x; n++)
{
    delete orig[n];
}
delete[] orig;

//store temp into orig
orig = temp; 
```

**但是，当我尝试访问该元素时，例如：**

```
cout << orig[0]->getName(); 
```

我得到一个糟糕的内存分配错误：

```
Unhandled exception at at 0x768F4B32 in file.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x0033E598. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T18:49:50.697

```
//delete orig array
for(int n = 0; n < x; n++)
{
    delete orig[n];
} 
```

对于这种特殊情况，**不要这样做**。您实际上是在删除对象而不是数组。所以临时数组中的所有对象都指向无效位置。只需`delete [] orig`释放原始数组即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:55:40.893

你抄错了。而不是复制你的临时数组只是指向与原点相同的位置。现在，当您删除 orig 时，临时指针指向无效位置。

```
//save to temp
for(int n = 0; n < x; n++)
{
    //temp[n] = orig[n];
    // Try this instead
    strcpy(temp[n], orig[n]);
} 
```

# google-chrome - 无法使用 AutoHotkey 识别 Google Chrome 窗口

> ID：13500018
> 
> 赞同：2
> 
> 时间：2012-11-21T18:46:02.983
> 
> 标签：google-chrome, autohotkey

我正在尝试使用 AutoHotkey 激活最顶部的 Google Chrome 窗口。这是我正在使用的代码：

```
WinActivate, ahk_class Chrome_WidgetWin_1 
```

但是，它似乎没有任何效果。

试

```
WinGet nChromeWindows, Count, ahk_class Chrome_WidgetWin_1 
```

使`nChromeWindows`变量获得大于 1 的值，即使仅打开一个 chrome 窗口也是如此。这表明上面的 WinActivate 无法正常工作的原因是，即使只有一个“实际”窗口，似乎也存在多个 Chrome“窗口”。

谁能解释发生了什么以及如何识别“真实”（最上面的）Chrome 窗口？

TIA，Himanshu

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T08:00:48.643

Google Chrome 创建多个子进程，每个进程拥有一个窗口，包括 Chrome 扩展程序或选项卡的背景窗口。所以你需要找出最旧的进程，所有的父进程，并激活最旧的进程正在使用的窗口。

按 control+1 看看它是否有效。确保您拥有最新的 AutoHotkey 版本。

```
^1::WinActivate, % "ahk_pid " GetOldestPIDFromProcessName("chrome.exe")

GetOldestPIDFromProcessName(strProcessName) {

    for oProc in ComObjGet("winmgmts:").ExecQuery("Select ProcessID,CreationDate from Win32_Process WHERE Name = '" strProcessName "'") {           
        nOldestPID := (nOldestPIDCreationDate > oProc.CreationDate) ? oProc.ProcessID : nOldestPID ? nOldestPID : oProc.ProcessID
        nOldestPIDCreationDate := oProc.CreationDate    
    }
    return nOldestPID
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T06:21:43.487

这对我有用：

```
; Activate an existing chrome.exe window, or open a new one
if WinExist("ahk_exe chrome.exe")
    WinActivate, ahk_exe chrome.exe
else
    Run, "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" 
```

我在[http://l.autohotkey.net/docs/misc/WinTitle.htm上找到了这个](http://l.autohotkey.net/docs/misc/WinTitle.htm)

# backbone.js - 一个使用 require.js 的 Backbone.js 应用程序依赖于另一个：我如何包含孩子？

> ID：13500020
> 
> 赞同：1
> 
> 时间：2012-11-21T18:46:03.810
> 
> 标签：backbone.js, requirejs, commonjs

我编写了一个使用 require.js 的主干.js 应用程序，并被分解为模型/、集合/等。然后我编写了另一个依赖于第一个应用程序的应用程序（以及其他一些东西。文件的布局如下：

```
/scripts/appA/
             models/
             collections/
             views/
/scripts/appNeedsA/
             models/
             collections/
             views/ 
```

我在需求A中放入什么来要求appA？以下对我来说似乎合乎逻辑，但不起作用。如果我使用 ../../appA，则可以找到 appA，但由于根错误，无法找到 IT 的依赖项。

```
define(
  ['underscore', 'backbone', '../appA'],
  function (_, Backbone, appA) {
     ...
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:29:14.207

这可能不是您希望的答案，但是，这是一种方法：

[https://github.com/busticated/RequireLoadingExample](https://github.com/busticated/RequireLoadingExample)

这个想法是你使用消费应用程序将使用的路径定义你的模块 deps，然后在消费应用程序中你适当地为路径起别名。

在我的示例中，我有一个顶级 main.js 文件，它同时引入了 app1.js 和 app2.js 模块。这两个模块都依赖于它们自己的子目录中的模块——例如，app1.js 使用一个/mods/a.js 和一个/mods/b.js。我有另一个主要（main-one.js）文件，它位于 one/ 目录中。该文件调用：

```
require.config({
    paths: {
        'jquery': 'libs/jquery',
        'one': '.'
    }
}); 
```

所以现在当 app1.js 加载时， one/mods/a.js 路径被转换为 ./mods/a.js 并且被找到/加载没有问题。

你应该可以在上面 fork 我的 repo 并在打开 js 控制台的浏览器中加载 index.html 和 one.html 以查看它是否正常工作。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:09:37.390

正确的解决方案是：

```
define(
  ['underscore', 'backbone', 'appA/views/whatever'],
  function (_, Backbone, appAWhateverView) {
     ...
 } 
```

并将您的 require.config 路径设置为包括：

```
require.config({
    paths: {
         appA: '../appA'
    }
}); 
```

# mysql - MYSQL 触发器返回空错误

> ID：13500023
> 
> 赞同：0
> 
> 时间：2012-11-21T18:46:18.893
> 
> 标签：mysql, triggers

我正在尝试使用 MAMP 为 joomla2.5 应用程序创建一个 mysql 触发器。我的触发器：

```
CREATE TRIGGER `getDivision` BEFORE INSERT ON `encex_autoschedGames`
FOR EACH ROW BEGIN

select division into @div_a from encex_autoschedTeams where team_name = new.team_a; 
set new.division = @div_a;

END 
```

我不断收到以下错误：

```
Column 'division' cannot be null 
```

故事：

我有两张桌子：1）游戏2）团队。Teams 有列“team_name”和“division” 游戏有列“team_a”、“team_b”和“division”

样品表：

```
Teams table:

Team_name, Division
"team1","A"
"Team2","A"
"Team3","A"
"Team4","A"
"Team5","B"
"Team6","B"
"Team7","B"
"Team8","B" 
```

对于游戏表，我希望分区来自 Teams 表。因此，当我插入 Team1 Vs Team2 时，它会自动将分区填充为 A。

```
Games Table:
Team_a, Team_b, Division
"Team1", "Team2", "A" 
```

我想创建一个触发器，这样当在游戏表中创建一行时，它会用'Teams'表中的'division'填充分区列，其中team_name = team_a。

理想情况下，我会构建它以确保 team_a 和 team_b 的划分相同，但我认为小步骤在这里最好。

经过一些调试，我相信我的错误在于： select Division into @div_a from encex_autoschedTeams where team_name = new.team_a;

出于某种原因，where 子句返回 null。经过一些命令行测试，它不应该是。也许 New.team_a 不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:54:13.283

我认为你不需要使用触发器来解决这个问题，首先去一个简单的存储过程来存储游戏中的数据和团队中的相应记录。这将是相当不错的。此外，当您使用触发器时，性能也会降低，因为每次插入记录时它都会运行，如果您将网站提供给托管站点，则需要使用专用托管服务器在数据库上创建触发器。

这里错误的原因是您将除法列保留为**NOT NULL**并且查询/触发结果无法获取该除法列的值。所以它引发了错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:16:01.837

原始代码完美运行。问题是由于在代码中较早地解析了一个字符串，并在 team_names 字符串中留下了难以看到的空间。该查询返回 null，因为它没有将“team1”与“team1”匹配。

# prolog - 这个置换算法是如何工作的

> ID：13500029
> 
> 赞同：4
> 
> 时间：2012-11-21T18:46:52.580
> 
> 标签：prolog

```
ar([],[]).
ar([p(_,_)|L],L1):-ar(L,L2),L1=L2.
ar([p(X,Y)|L],L1):-ar(L,L2),L1=[p(X,Y)|L2]. 
```

（p 代表点，坐标为 X 和 Y）

请帮助我了解结果是如何构造的，尤其是 L1 获得新值的部分，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:08:49.290

谓词的定义`ar/2`类似于[powerset](http://en.wikipedia.org/wiki/Power_set)函数，是以下的语法变体（`X`仅限于 的术语`p/2`）：

```
% clause 1: base case
ps([], []).

% clause 2: omit the element X
ps([_X|Y], Z) :-
    ps(Y, Z). 

% clause 3: keep the element X
ps([X|Y], [X|Z]) :-
    ps(Y, Z). 
```

谓词`ps/2`（和你的`ar/2`）基本上回溯以将第一个参数中列表的所有子列表绑定到第二个参数的子列表。它通过第二个和第三个子句表示的选择来实现这一点：在构造新列表时省略或保留一个列表元素。

考虑一下 Prolog 在执行目标时做了什么`ps([a,b],L)`：

*   `ps([_|[b]], Z) :- ps([b], Z).`（通过第 2 条， drop `a`）。
    *   `ps([b|[]], Z) :- ps([], Z).`（通过第 2 条，drop `b`；注意`[b]`= `[b|[]]`）。
        *   `ps([], Z)`绑定`Z = []`（通过第 1 条，给出解决方案 1）。
    *   `ps([b|[]], [b|Z]) :- ps([], Z).`（通过第 3 条，保留`b`）。
        *   `ps([], Z)`绑定`Z = []`（通过第 1 条，给出解决方案 2）。
*   `ps([_|[b]], [a|Z]) :- ps([b], Z).`（通过第 3 条，保留`a`）。
    *   `ps([b|[]], Z) :- ps([], Z).`（通过第 2 条， drop `b`）。
        *   `ps([], Z)`绑定`Z = []`（通过第 1 条，给出解决方案 3）。
    *   `ps([b|[]], [b|Z]) :- ps([], Z).`（通过第 3 条，保留`b`）。
        *   `ps([], Z)`绑定`Z = []`（通过第 1 条，给出解决方案 4）。

达到第 1 条“基本情况”的每个最深层次都返回调用堆栈。每种情况都会导致以下结果：

1.  删除`a`和`b`：`[]`
2.  放下`a`，保持`b`：`[b]`
3.  保持`a`，放下`b`：`[a]`
4.  保留`a`和`b`：`[a,b]`

因此，我们可以回溯生成`[]`、和`[b]`，即 的四个子列表。`[a]``[a,b]``[a,b]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T23:44:46.010

首先，请注意，此过程不计算置换，而是计算一种子列表：删除了“一些”点的列表，其中“一些”以一般形式表示（其中一个解决方案是空列表，也是其他解决方案是原始列表），假设输入列表格式正确。

如果输入列表格式不正确（它有一项不是“点”），则该过程将失败。

现在我们来解释一下 的三个子句`ar/2`，这是一个递归过程：

第一条，

```
ar([], []). 
```

声明如果第一个参数是空列表，那么第二个参数也是输入列表；即对于一个空列表，唯一符合程序规则的“子列表”也是一个空列表。这也是递归过程的基本情况。

第二条，

```
ar([p(_,_)|L], L1):-ar(L, L2), L1=L2. 
```

可以在不使用`L2`变量的情况下重写，因为它最终会统一为`L1`：

```
ar([p(_,_)|L], L1):-ar(L, L1). 
```

该子句跳过输入列表的头部并继续递归。在递归返回时，它会将结果列表（`ar/2`调用的第二个参数）与子句头部的第二个参数统一起来。

第三条，

```
ar([p(X,Y)|L], L1):-ar(L, L2), L1=[p(X,Y)|L2]. 
```

`L2`通过在子句头部构建结果列表，可以再次在不使用变量的情况下重写：

```
ar([p(X,Y)|L], [p(X,Y)|L1]):-ar(L,L1). 
```

该子句将获取输入列表的头部，继续使用尾部递归，然后将子句头部的第二个参数与所取的项目和递归的结果列表统一起来。也就是说，它将保留输入列表的项（头）以及递归的结果。

还要注意，这个过程是不可逆的，如果调用第一个参数未实例化而第二个参数实例化，它将永远循环。

# c# - 比较 SynchronizationContext

> ID：13500030
> 
> 赞同：9
> 
> 时间：2012-11-21T18:46:56.243
> 
> 标签：c#, synchronizationcontext

如何比较 SynchronizationContext？似乎同一个 Dispatcher 在使用 BeginInvoke 时可以创建不同的 SynchronizationContext。当我深入研究两个（不相等的）上下文时，我看到调度程序线程 ID 相同，但它们彼此不相等。

```
public partial class MainWindow : Window
{
    private SynchronizationContext contexta;
    private SynchronizationContext contextb;
    private SynchronizationContext contextc;
    private SynchronizationContext contextd;

    public MainWindow()
    {
        InitializeComponent();

        contexta = SynchronizationContext.Current;

        Loaded += MainWindow_Loaded;
    }

    private void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        contextb = SynchronizationContext.Current;

        Dispatcher.Invoke(() =>
            {
                contextc = SynchronizationContext.Current;
            });

        Dispatcher.BeginInvoke(new Action(() =>
            {
                contextd = SynchronizationContext.Current;
            }));

        Debug.Assert(contexta != contextb);
        Debug.Assert(contexta == contextc);         // fails... why?!?!?
        Debug.Assert(contexta == contextd);         // fails... why?!?!?
        Debug.Assert(contextc == contextd);         // fails... why?!?!?
    } 
```

也许他们两个不能一起使用。我注意到这实际上有效：

```
 contexta.Send(new SendOrPostCallback((s) =>
            {
                contexte = SynchronizationContext.Current;
            }), null); 
```

**更新**但奇怪的是，它并不总是有效。

```
 public override void AddRange(IEnumerable<T> items)
    {
        if (SynchronizationContext.Current == _context)
        {
            base.AddRange(items);
        }
        else
        {
            _context.Send(new SendOrPostCallback((state) =>
                {
                    AddRange(state as IEnumerable<T>);
                }), items);
        }
    } 
```

例如，永远不会得到匹配的 _context 并永远持续下去。即使它不应该。后一个示例线程实际上最终是相同的，并且有一个上下文，但它是不同的。

**Update2**好的，我让它工作了，但我真的对此感到不舒服。显然，当您发布或发送时，您的任务是从正确的线程运行的，但如果您不是来自 UI，似乎会生成一个新的 SynchronizationContext。

```
 public override void AddRange(IEnumerable<T> items)
    {
        if (SynchronizationContext.Current == _context)
        {                       
            base.AddRange(items);
        }
        else
        {
            _context.Post(new SendOrPostCallback((state) =>
                {
                    if (SynchronizationContext.Current != _context)
                        SynchronizationContext.SetSynchronizationContext(_context);     // called every time.. strange
                    AddRange(items);
                }), null);
        }
    } 
```

看看这个：

![在此处输入图像描述](../Images/615cd168096e53732aa40e660392f6c0.png)

“需要直接调用者完全信任。部分信任或透明代码不能使用此成员。” :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T23:51:01.813

我认为您对 [BaseCompatibilityPreferences.ReuseDispatcherSynchronizationContextInstance](http://msdn.microsoft.com/fr-fr/library/vstudio/system.windows.basecompatibilitypreferences.reusedispatchersynchronizationcontextinstance.aspx)感兴趣。

此设置指示单个 SynchronizationContext 实例是否用于给定的 Dispatcher 对象。在 .net 4 之前默认为 true，在 .net 4.5 中为 false（这是 LukeN 观察到的行为变化）。

现在，如果您的目标只是直接拨打电话而不是拨打 .Send() 我会说：

1.  调用 .Send() 时，如果您在正确的线程上（不使用调度程序队列），DispatcherSynchronizationContext 实际上只是直接调用，所以无论如何您不会获得太多（来自额外层的一些检查和调用）间接）。

2.  如果您只针对 WPF 编写代码，则可以使用 Dispatcher.CheckAccess() 和 Dispatcher.Invoke() 来做您想做的事情。

在一般情况下，没有办法“比较”两个 SynchronizationContext，因此您只需调用 .Send()。无论如何，这不太可能是性能问题，请记住，过早的优化是万恶之源-> 首先测量。

# lisp - 哪种语言可以计算抽象函数的 Frechet/Gateaux 导数？

> ID：13500032
> 
> 赞同：2
> 
> 时间：2012-11-21T18:47:09.007
> 
> 标签：lisp, algebra, maple, derivative, maxima

我愿意计算一个不完全明确的函数的 Frechet/Gateaux 导数，我的问题是：最有效的方法是什么？你会推荐我使用哪种语言？

准确地说，我的问题是我有一个函数，比如 F，它是多维函数对（即从 R^n 到 R^k）的乘积之和的欧几里得范数的平方。

AFAIK，如果我使用 Maple 或 Maxima，他们会要求我明确公式中涉及的函数，而我想让它们保持抽象。然后，我需要计算 Frechet/Gateaux 导数以保持表达式简单。确实，当我按照标准方式进行时，我开始将欧几里得范数的平方发展为平方和，并且有很多索引。我的目标是做一个三阶整数余数的泰勒展开式，在我看来，这个表达式在人类看来是不可行的（公式超过一页 A4 纸）。

因此，我更喜欢使用 Frechet/Gateaux 导数，这将允许我保留标量积而不是总和。

由于所涉及的函数与其导数有一些相似之处（由于存在指数），因此只需了解少量规则。所以我想我可以自己制作这样一个专用的计算机代数系统。

我开始学习 LISP，因为我读到它对我的问题很有效，但我现在有点迷茫，因为这种语言非常不同，我仍然习惯于用 C/Python/Perl 来思考。 ..

这是另一个问题：您是否有一些关于如何制作符号计算的代数系统的课程或文章的链接（最好是在 LISP 中）？欢迎任何建议。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:53:59.117

我的建议是使用千里马。Maxima 受到 Lisp 的启发，并在 Lisp 中实现，因此使用 Maxima 将为您节省大量时间和麻烦。如果 Lisp 适合您的问题，Maxima 更是如此。

Maxima 将允许您在表达式中使用未定义的术语；没有必要定义所有术语。

向 Maxima 邮件列表 (maxima@math.utexas.edu) 发送消息以寻求具体建议。请详细说明您要完成的工作。

# java - wurfl 1.4的maven

> ID：13500035
> 
> 赞同：2
> 
> 时间：2012-11-21T18:47:34.703
> 
> 标签：java, maven, wurfl

是否还有其他人在使用 wurfl API 1.4 版（最新的稳定版本）。我坚持为 wurfl 1.4 配置我的 pom.xml

我不想手动添加 wurfl。

ScintiaMobile 表示，新的 wurfl 托管在他们的服务器上。但他们提供的[链接](http://dev.scientiamobile.com/nexus/content/repositories/public-releases/)不包含 1.4

简而言之，我的问题是我必须使用**maven**和**wurfl 1.4**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-20T03:58:26.590

ScientiaMobile 的首席技术官 Luca Passani 在这里。

我知道 WURFL java API 的一些用户请求支持 Maven。

ScientiaMobile 在 2011 年取消了对 Maven 的支持，以避免人们在他们的代码库中注入 AGPL 代码而没有完全意识到 AGPL 许可证的含义（强版权保护）。

我们现在为图书馆的商业许可证持有者引入了对 Maven 的支持，他们可以使用他们的 ScientiaMobile 凭证与我们的私有 Maven 存储库进行交互。

详情在这里：

[http://www.scientiamobile.com/page/wurfl-adds-maven-support-for-java-programmers](http://www.scientiamobile.com/page/wurfl-adds-maven-support-for-java-programmers)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:23:34.460

好吧，如果以下内容在您的 pom.xml 文件中不起作用：

```
<dependency>
    <groupId>net.sourceforge.wurfl</groupId>
    <artifactId>wurfl</artifactId>
    <version>1.4</version>
</dependency> 
```

然后您可能会做的是下载正确的 JAR 并通过手动上传将其粘贴到您组织的 maven 存储库（Nexus、Archiva 等）中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-08T06:47:47.377

[从https://sourceforge.net/projects/wurfl/files/](https://sourceforge.net/projects/wurfl/files/)下载 jar 。在您的 pom.xml 中添加以下内容：

```
<dependency> 
    <groupId>net.sourceforge.wurfl</groupId> 
    <artifactId>wurfl</artifactId> 
    <version>{{the.version}}</version> 
</dependency> 
```

触发以下命令：

> mvn install:install-file -Dfile=path_to_jar/thejar.jar -DgroupId=net.sourceforge.wurfl -DartifactId=wurfl -Dversion=the.version -Dpackaging=jar

这会将 jar 添加到您的 .m2 文件夹中，以后可以在构建 maven 项目时选择该 jar。

# c# - 电话簿 - 进入班级列表

> ID：13500039
> 
> 赞同：2
> 
> 时间：2012-11-21T18:47:55.950
> 
> 标签：c#, list

我在做家庭作业时遇到了麻烦，我们应该制作电话簿吗？条件是它应该看起来像这样：

```
Class Phonebook   
{
    private List<Entry> _phoneList;
    public Phonebook()
    {
       //instance of _phoneList
    }
    public void AddEntry (string name, string number)
    {
       //logic
    }
    public string FindEntry (string namne)
    {
       //logic
    }
}

class Entry
{
  public string Name{ get; private set; }
  public string Number{ get; private set; }
} 
```

但是，我不确定如何使该`AddEntry`方法为 Entry list 分配新的名称/编号`_phoneList`。我已经尝试了很多，但无济于事。任何提示如何使它工作？任何帮助将非常感激！

到目前为止，我的代码看起来像这样

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace app3
{
    public partial class Form1 : Form
    {
        private Phonebook phonebook;
        public Form1()
        {
            InitializeComponent();
            phonebook = new Phonebook();
        }
            private void addEntryButton_Click(object sender, EventArgs e)
        {
            phonebook.AddEntry((addNameTextBox.Text), (addNumberTextBox.Text));
        } 
    } 
    class Phonebook
    {
        private List<Entry> _phoneList;
        public Phonebook()
        {  
            List<Entry> _phoneList = new List<Entry>(); 
        }
        public void AddEntry(string name, string number)
        {
        }
    }
    class Entry
    {
        public string Name { get; private set; }
        public string Number { get; private set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T18:50:25.867

由于`_phoneList`是`Entry`'s 的集合，因此您需要创建一个新实例并将其添加到列表中。

```
Entry entry = new Entry();
entry.Name = name;
entry.Number = number;
_phoneList.Add(entry); 
```

但是，由于 Entry 具有属性的私有设置器，因此您应该添加一个新的构造函数，接收名称和编号并将其设置在那里。

```
class Entry
{
    public Entry(string name, string number)
    {
       Name = name;
       Number = number;
    }

    public string Name { get; private set; }
    public string Number { get; private set; }
} 
```

然后它会简单地变成

```
_phoneList.Add(new Entry(name, number)); 
```

编辑：

```
private List<Entry> _phoneList;
public Phonebook()
{  
  List<Entry> _phoneList = new List<Entry>(); 
} 
```

您将 _phoneList 声明为私有字段，然后在隐藏原始的构造函数中重新声明它。

当您稍后`_phoneList`在 AddEntry 方法中使用时，您将获得未初始化的字段。将构造函数更改为

```
_phoneList = new List<Entry>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:52:44.200

您需要为以下内容创建一个构造函数`Entry`：

```
public Entry(string name, string number)
{
    Name = name;
    Number = number;
} 
```

然后你可以在你的`AddEntry`方法中使用这个构造函数：

```
public void AddEntry (string name, string number)
{
    _phoneList.Add(new Entry(name, number));
} 
```

# filepicker.io - Filepicker.io (iOS) - 取消按钮只能使用一次

> ID：13500040
> 
> 赞同：0
> 
> 时间：2012-11-21T18:48:02.903
> 
> 标签：filepicker.io

我已将 Filepicker.io 集成到我的 iOS 应用程序中，并且在测试上传 (FPPickerDelegate) 功能时，我发现我只能单击一次“取消”按钮。如果我再次打开选择器对话框，则进一步单击“取消”按钮无效，我必须终止应用程序才能关闭对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:48:02.903

我发现问题来自重用 FPController 对象。我将它保存为实例变量，并尝试在每次创建新的 UIPopoverController 时重用它。同时重建两者解决了这个问题。

# iphone - iTunes 无法从同步服务加载数据类信息

> ID：13500046
> 
> 赞同：6
> 
> 时间：2012-11-21T18:48:27.213
> 
> 标签：iphone, ios, xcode, ios6

我最近安装了 xCode、iTunes 和 iOS 软件的测试版。我现在在 iTunes 中收到上述警告。xCode 无法识别手机已连接，因此我无法在手机上运行测试应用程序。

关于如何解决这个问题或出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T19:49:41.770

删除以下框架：

/System/Library/PrivateFrameworks/Mobiledevice.framework

..清空垃圾箱，重新安装 iTunes 11。

# javascript - 如何将一个范围内的延迟对象集包含在 AngularJS 中另一个范围的摘要中？

> ID：13500051
> 
> 赞同：2
> 
> 时间：2012-11-21T18:48:43.653
> 
> 标签：javascript, scope, angularjs, digest, deferred

各位，我有问题。我正在使用 AngularJS，并且在 Angular 服务定义中设置了一个延迟对象：

```
angular.module('myServices', []).
  service('Brand', function($rootScope, $q){
    var service = {
        getNext: function() {
            var deferred = $q.defer();

            setTimeout(function() {
                deferred.resolve('foo');
            }, 2000);

            return deferred.promise;
        }
    };

    return service;
}); 
```

该服务在我的控制器中使用：

```
angular.module({
    controllers: {
        brand: function($scope, Brand) {
            $scope.changeBrand = function() {
                $scope.brand = Brand.getNext();
            }
        }
    }
}, ['myServices]); 
```

最后，视图等待 promise 被解决，然后显示它：

```
<a ng-click="changeBrand()" id="changeBrand">Change</a>
<p ng-bind="brand"></p> 
```

问题在于，虽然 promise 正在解决，并且视图在等待 promise 被解决并显示结果时做得很好，但它并没有立即执行。它仅在我添加此代码并单击链接时显示：

```
// View:
<a ng-click="apply()">Apply</a> 

// Controller:
$scope.apply = function() {
    $scope.$apply();
}; 
```

承诺所在的摘要部分是否与视图/控制器范围更改时运行的摘要分开存在？当延迟解决时，如何让摘要自动在视图/控制器的范围内运行？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:19:17.577

几天前，我在使用 Promise 实现惰性控制器时遇到了同样的问题。当您查看有关 routeProvider 的文档时，有一个示例使用带有承诺的 $timeout 服务（[https://github.com/angular/angular.js/blob/master/src/ng/route.js#L186](https://github.com/angular/angular.js/blob/master/src/ng/route.js#L186)） . $timeout 实现使用 $rootScope.$apply() 来调用生命周期并刷新绑定（AFAIK 它调用所有脏检查函数——这就是绑定在 Angular 中的工作方式）。所以解决我的问题（我认为也是你的问题）的解决方案是在 resolve() 之后添加 $rootScope.$apply()，如下所示：

```
 setTimeout(function() {
            deferred.resolve('foo');
            $rootScope.$apply();
        }, 2000); 
```

# c# - 从多个线程添加到 HashSet 时出错

> ID：13500057
> 
> 赞同：1
> 
> 时间：2012-11-21T18:48:58.047
> 
> 标签：c#, .net, c#-4.0

我正在尝试从多个线程添加到哈希集。如果该项目已经存在我想更新它，如果它不存在我想将它添加到列表中。

使用我正在使用的代码，我最终会得到很多重复项，我想是因为多个项目突然指向同一个引用。不过，我看不出发生在哪里或为什么会发生这种情况。

下面是我第一次看到问题时使用的代码，后跟“Log”字符串结尾。您可以看到突然间所有已添加的项目都具有相同的值。

```
lock (_remoteDevicesLock)
{
    RemoteDevice rDevice = new RemoteDevice(notifyMessage.UUID, notifyMessage.Location);
    log += notifyMessage.UUID + " " + rDevice.UUID;
    if (!_remoteDevices.Add(rDevice))
    {
        log += " Not Added \r\n";
        rDevice = (from d in _remoteDevices
                   where d.UUID.Trim().Equals(notifyMessage.UUID.Trim(), StringComparison.OrdinalIgnoreCase)
                   select d).FirstOrDefault();
        if (rDevice != null)
        {
            //Update Device Expire Time
        }
    }                            
    else
    {
        log += " Added \r\n Current HashSet: \r\n";

        foreach (RemoteDevice rd in _remoteDevices)
        {
            log += rd.UUID + " \r\n";
        }
    }
}

00000000-0000-0001-1000-001cdf885737 00000000-0000-0001-1000-001cdf885737 Added 

Current HashSet: 
00000000-0000-0001-1000-001cdf885737 

00000000-0000-0001-1000-001cdf885737 00000000-0000-0001-1000-001cdf885737 Not Added 
00000000-0000-0001-1000-001cdf885737 00000000-0000-0001-1000-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Added 

Current HashSet: 
00000000-0000-0001-1000-001cdf885737 
00000000-0000-0001-0002-001cdf885737 

00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0001-001cdf885737 00000000-0000-0001-0001-001cdf885737 Added 

Current HashSet: 
00000000-0000-0001-1000-001cdf885737 
00000000-0000-0001-0002-001cdf885737 
00000000-0000-0001-0001-001cdf885737 

00000000-0000-0001-0001-001cdf885737 00000000-0000-0001-0001-001cdf885737 Not Added 
00000000-0000-0001-0001-001cdf885737 00000000-0000-0001-0001-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Added 

Current HashSet: 
00000000-0000-0001-1000-001cdf885737 
00000000-0000-0001-0002-001cdf885737 
00000000-0000-0001-0001-001cdf885737 
00000000-0000-0001-0000-001cdf885737 

00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-1000-001cdf885737 00000000-0000-0001-1000-001cdf885737 Not Added 
00000000-0000-0001-1000-001cdf885737 00000000-0000-0001-1000-001cdf885737 Not Added 
00000000-0000-0001-1000-001cdf885737 00000000-0000-0001-1000-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0001-001cdf885737 00000000-0000-0001-0001-001cdf885737 Not Added 
00000000-0000-0001-0001-001cdf885737 00000000-0000-0001-0001-001cdf885737 Not Added 
00000000-0000-0001-0001-001cdf885737 00000000-0000-0001-0001-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-1000-001cdf885737 00000000-0000-0001-1000-001cdf885737 Not Added 
00000000-0000-0001-1000-001cdf885737 00000000-0000-0001-1000-001cdf885737 Not Added 
00000000-0000-0001-1000-001cdf885737 00000000-0000-0001-1000-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0002-001cdf885737 00000000-0000-0001-0002-001cdf885737 Not Added 
00000000-0000-0001-0001-001cdf885737 00000000-0000-0001-0001-001cdf885737 Not Added 
00000000-0000-0001-0001-001cdf885737 00000000-0000-0001-0001-001cdf885737 Not Added 
00000000-0000-0001-0001-001cdf885737 00000000-0000-0001-0001-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-0000-001cdf885737 00000000-0000-0001-0000-001cdf885737 Not Added 
00000000-0000-0001-1000-001cdf885737 00000000-0000-0001-1000-001cdf885737 Added 

Current HashSet: 
00000000-0000-0001-0000-001cdf885737 
00000000-0000-0001-0000-001cdf885737 
00000000-0000-0001-0000-001cdf885737 
00000000-0000-0001-0000-001cdf885737 
00000000-0000-0001-1000-001cdf885737 
```

更新：这是 GetHashCode And Equals As Requested，尽管我认为问题不在于这里，因为我使用的是带有手动检查的列表并且也有问题。

```
public override bool Equals(object obj)
{
    var other = obj as RemoteDevice;
    if (other == null)
    {
        return false;
    }
    else
    {
        return UUID.Trim().Equals(other.UUID.Trim(), StringComparison.OrdinalIgnoreCase);
    }
}

public override int GetHashCode()
{
    return UUID.GetHashCode();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:09:56.453

以下两个`UUIDs`将具有不同的哈希码，但比较相等：“x”，“x”。原因：您对待空白的方式不同。

你需要坚持`GetHashCode`和`Equals`坚持。如果`Equals`返回 true，则两个哈希码*必须*相同。如果您未能遵守本合同`HashSet`，则会以未定义的方式行事（可能重复）。

解决方案：要么`Trim`在两个地方，要么都不在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:54:53.200

按照设计，重要的是集合中的项目的哈希码在集合内部时永远不会发生。该集合无法检测到对象的内部状态发生了变化，因此它将在“桶”中，因为它是旧的哈希值，所以当您尝试使用新的哈希码添加另一个项目时，它会看到它是“ bucket" 为空并添加项目。如果您想“更改”当前位于集合中的项目，您应该删除它，更改它，然后将其重新添加。或者，更好的是（从设计角度）删除旧值，并添加一个新对象完全（可能从删除的某些方面复制）。

看来这是您的问题；尽管它们不是您遇到的问题，但我会将其余的建议留在下面。

您的`RemoteDevice`类可能不会覆盖`Equals`并`GetHashCode`具有有意义的实现。默认实现（定义`object`仅基于对象内存中的地址，因此具有所有相同值的两个不同实例将根据该定义“不相等”。因为看起来您有一个有效的 GUID 作为唯一 ID（GUID 具有合理性`Equals`和`GetHashCode`定义）您的实现应该遵循这一点。

IE：

```
public class RemoteDevice
{
    public Guid UUID { get; set; }

    public override bool Equals(object obj)
    {
        RemoteDevice other = obj as RemoteDevice;
        if (other == null) return false;
        return UUID.Equals(other.UUID);
    }

    public override int GetHashCode()
    {
        return UUID.GetHashCode();
    }
} 
```

您似乎也误解了它的`lock`工作原理。Using`lock(myObject)`不会阻止任何其他对象使用`myObject`. 它所做的只是导致其他人试图`lock`在同一个实例上等待，直到您退出您的实例，`lock`然后他们才能进入他们的实例。这意味着`lock`在任何人访问之前，您的代码都需要在对象的同一实例上`HashSet`（因为 HashSet 并非设计为由多个线程使用）。

如果这样做不是一种选择，或者是不可取的，那么您需要考虑创建一个可以从多个线程访问的集合。许多集合在 中都有实现`System.Collections.Concurrent`，但不幸的是没有`ConcurrentSet`。有几种选择；我们可以自己做一个，但另一种选择是使用`ConcurrentDictionary`并忽略值而只使用键。这会有点混乱，但是有效地创建自己的并发集合是......很难。就个人而言，如果我想使用一个，我只需创建一个包装器`ConcurrentDictionary`来隐藏它存储对的事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T21:47:29.500

使用字典，将使您的代码更加简单和健壮，并且不依赖于 GetHashCode 覆盖。查找也会快得多，LINQ 查询在性能方面并不是很好。应该注意一些简单的事情，比如不要多次计算相同的值，尤其是在循环中。即 notifyMessage.UUID.Trim() 在 LINQ 查询中被调用的次数与列表中的设备数量一样多。id 应该在循环之前计算一次并重复使用。

这是使用字典的示例：

```
var _remoteDevices = new Dictionary<string, RemoteDevice>(); 
```

...

```
var deviceId = notifyMessage.UUID.Trim().ToLowerInvariant();

RemoteDevice remoteDevice;

if (_remoteDevices.TryGetValue(deviceId, out remoteDevice))
{
    UpdateDevice(remoteDevice);
}
else
{
    var newDevice = CreateDevice(notifyMessage);

    _remoteDevices.Add(deviceId, newDevice);
} 
```

上面的代码在您的问题的代码中执行一次查找而不是两次查找，其中 _remoteDevices.Add 和 LINQ 查询都执行查找。LINQ 查询实际上进行了完整的迭代，因为使用 Where 而不是 FirstOrDefault 和谓词，除非编译器足够聪明地将表达式转换为 FirstOrDefault(d => d.UUID.Trim().Equals(notifyMessage.UUID.Trim() , StringComparison.OrdinalIgnoreCase)。

# c# - HTML 敏捷包 2

> ID：13500060
> 
> 赞同：3
> 
> 时间：2012-11-21T18:49:07.237
> 
> 标签：c#, .net, xpath, html-agility-pack

我想废弃[这个网站](http://www.edb.gov.hk/templates/sch_list_print.asp?district=cw)。下面的 Xpath 表达式与 FirePath firebug 扩展一起正常工作

```
html/body/table/tbody/tr[3]/td 
```

但是使用相同的 xpath 表达式，下面的代码给了我 null ：

```
 HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
 HtmlWeb web = new HtmlWeb();

 doc = web.Load("http://www.edb.gov.hk/templates/sch_list_print.asp?district=cw");
 var collection= doc.DocumentNode.SelectNodes("html/body/table/tbody/tr[3]/td"); 
```

谁可以帮我这个事。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:02:56.770

这可行，查看您尝试抓取的页面的来源，表格内没有 tbody。

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
HtmlWeb web = new HtmlWeb();

doc = web.Load("http://www.edb.gov.hk/templates/sch_list_print.asp?district=cw");
var collection= doc.DocumentNode.SelectNodes("html/body/table/tr[3]/td"); 
```

将您的 xpath 更改为

```
html/body/table/tr[3]/td 
```

# ruby-on-rails - 在订单上拥有单独的送货地址和账单地址的最有效方式

> ID：13500061
> 
> 赞同：0
> 
> 时间：2012-11-21T18:49:08.573
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的 Rails 应用程序中有一个`Address`模型和一个`Order`模型。一个订单有一个帐单地址和一个送货地址。我试图找出通过多态关联来实现这一点的最有效方法（其他模型将来也会有地址），这是我想出的代码：

**地址.rb:**

```
class Address < ActiveRecord::Base
  attr_accessible :line_1, :line_2, :city, :county, :postcode
  # Also has an 'address_type' attribute

  belongs_to :addressable, polymorphic: true
end 
```

**订单.rb：**

```
class Order < ActiveRecord::Base
  has_many :addresses, as: :addressable

  def delivery_address
    addresses.where(address_type: 'delivery').first
  end

  def delivery_address=(address)
    address.address_type = 'delivery'
    addresses << address
  end

  def billing_address
    addresses.where(address_type: 'billing').first
  end

  def billing_address=(address)
    address.address_type = 'billing'
    addresses << address
  end
end 
```

**添加地址：**

```
Order.first.address = Address.new(line_1: 'My House', city: 'Cityville, county: 'Hazzard') 
```

除了尝试通过再次调用来更改地址`order.delivery_address=`只是添加另一个“交付”类型的地址之外，这几乎可以工作。我也很确定必须有一种更优雅的方式来做这件事，我非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:59:57.803

```
has_one :delivery_address, as: :addressable,
         conditions: "addresses.address_type = 'delivery'", class_name: "Address"
has_one :billing_address,  as: :addressable,
         conditions: "addresses.address_type = 'billing'", class_name: "Address" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T18:54:43.947

代码看起来很棒。我认为添加和更改地址之间的区别应该在您的控制器中处理，而不是模型，例如在 RESTful 情况下，有 and 的方法`create`，`update`在这种情况下您可以知道是替换值还是添加它。

另请查看[Rails 对 Dirty attributes 的支持](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)，它可以让您知道是否已更改某些内容。

# java - 为什么要将Lucene的MoreLikeThis it's TermQueries限制在docFreq最高的字段？

> ID：13500066
> 
> 赞同：4
> 
> 时间：2012-11-21T18:49:27.200
> 
> 标签：java, lucene, information-retrieval, term, morelikethis

我目前正在开发 Lucenes MoreLikeThis 的修改版本，以适应我自己的目的。有一件事我仍然无法理解。创建队列时，MoreLikeThis 会搜索该词条 docFreq 最高的字段。

```
// go through all the fields and find the largest document frequency
String topField = fieldNames[0];
int docFreq = 0;
for (int i = 0; i < fieldNames.length; i++) {
   int freq = ir.docFreq(new Term(fieldNames[i], word));
   topField = (freq > docFreq) ? fieldNames[i] : topField;
   docFreq = (freq > docFreq) ? freq : docFreq;
} 
```

该字段将在 TermQuery 中使用。这会产生奇怪的结果。

例如，假设您有两个字段，“title”和“body”，并且有两个具有完全相同标题的文档，但它们不会匹配，因为“title”中的所有单词在其他文档中出现的频率更高“身体”，反之亦然。这对我来说似乎很奇怪。

另一个例子：我在一个系统中使用它，该系统通过与用户相关的访问权限过滤结果，并且发生查询的用户无法看到导致所选字段的高 docFreq 的文档。生成的查询没有找到任何文档，尽管用户可以看到很多文档，其中包含确切的术语，只是在错误的字段中。

我想知道为什么他们不只使用所有字段，或者至少使用术语最初出现的字段。当然，这可能是性能问题。但我已经实现它以使用原始文档中出现该术语的所有字段，以及具有最高 docFreq 的字段。我在包含数千个文档的索引上对其进行了测试，但看不出有任何区别（但我没有做任何基准测试）。

那么，谁能告诉我为什么要这样实现？我能想到的唯一原因是在具有很多字段的非常大的索引上表现出色。

//编辑：我实现了第一个例子来澄清问题： http: [//pastebin.com/fwdENb3F](http://pastebin.com/fwdENb3F)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T23:25:42.600

您应该将`MoreLikeThis`其视为不适合所有用途的参考实现。如果实现只针对一个字段，那么我们将看到这样的问题：为什么它只搜索标题字段而完全忽略了两个书籍文档具有相同的作者。
您可以使用[setFieldNames](http://lucene.apache.org/core/3_6_0/api/contrib-queries/org/apache/lucene/search/similar/MoreLikeThis.html#setFieldNames%28java.lang.String%5B%5D%29)设置查找相似性的字段。

创建您自己的`MoreLikeThis`声音版本是最好的方法，尤其是考虑到您需要考虑 ACL。

# c++ - 在 windows、nix 和 macos 上弹出错误消息框的最简单方法？

> ID：13500069
> 
> 赞同：3
> 
> 时间：2012-11-21T18:49:31.083
> 
> 标签：c++, user-interface, popup, cross-platform

我正在编写一个相当小的跨平台程序，它使用 OpenGL 进行显示，使用 GLFW 创建跨平台窗口。

在某些情况下退出时，我想向用户弹出一条有意义的错误消息 - 一个简单的“错误：由于 n 无法初始化”弹出消息，并在退出之前带有“确定”单击框。

我真的不希望仅仅为了弹出一条错误消息而添加一个功能齐全的 gui 系统（如 wxWidgets）。如果使用本机平台 API 确实是最简单的方法，我不介意编写三个不同的平台相关子例程，但我想知道是否还没有一个非常轻量级/最小的跨平台库能够为我做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-21T03:37:46.143

由于过去似乎没有一个简单的跨平台消息框库，所以我决定创建一个。

为了让调用者不用担心平台相关的细节，我创建了一个单独的接口，我将它放在一个头文件中：

### 拳击手.h

```
#ifndef BOXER_H
#define BOXER_H

namespace boxer {

enum class Style {
   Info,
   Warning,
   Error,
   Question
};

enum class Buttons {
   OK,
   OKCancel,
   YesNo
};

enum class Selection {
   OK,
   Cancel,
   Yes,
   No,
   None
};

const Style DEFAULT_STYLE = Style::Info;
const Buttons DEFAULT_BUTTONS = Buttons::OK;

Selection show(const char *message, const char *title, Style style, Buttons buttons);

inline Selection show(const char *message, const char *title, Style style) {
   return show(message, title, style, DEFAULT_BUTTONS);
}

inline Selection show(const char *message, const char *title, Buttons buttons) {
   return show(message, title, DEFAULT_STYLE, buttons);
}

inline Selection show(const char *message, const char *title) {
   return show(message, title, DEFAULT_STYLE, DEFAULT_BUTTONS);
}

} // namespace boxer

#endif 
```

接下来，我为我想要支持的每个操作系统（Windows、OS X 和 Linux（使用 GTK+））创建了实现文件。构建时，会根据目标操作系统选择其中一个实现文件。

### boxer_linux.cpp

```
#include <boxer/boxer.h>
#include <gtk/gtk.h>

namespace boxer {

namespace {

GtkMessageType getMessageType(Style style) {
   switch (style) {
      case Style::Info:
         return GTK_MESSAGE_INFO;
      case Style::Warning:
         return GTK_MESSAGE_WARNING;
      case Style::Error:
         return GTK_MESSAGE_ERROR;
      case Style::Question:
         return GTK_MESSAGE_QUESTION;
      default:
         return GTK_MESSAGE_INFO;
   }
}

GtkButtonsType getButtonsType(Buttons buttons) {
   switch (buttons) {
      case Buttons::OK:
         return GTK_BUTTONS_OK;
      case Buttons::OKCancel:
         return GTK_BUTTONS_OK_CANCEL;
      case Buttons::YesNo:
         return GTK_BUTTONS_YES_NO;
      default:
         return GTK_BUTTONS_OK;
   }
}

Selection getSelection(gint response) {
   switch (response) {
      case GTK_RESPONSE_OK:
         return Selection::OK;
      case GTK_RESPONSE_CANCEL:
         return Selection::Cancel;
      case GTK_RESPONSE_YES:
         return Selection::Yes;
      case GTK_RESPONSE_NO:
         return Selection::No;
      default:
         return Selection::None;
   }
}

} // namespace

Selection show(const char *message, const char *title, Style style, Buttons buttons) {
   if (!gtk_init_check(0, NULL)) {
      return Selection::None;
   }

   GtkWidget *dialog = gtk_message_dialog_new(NULL,
                                              GTK_DIALOG_MODAL,
                                              getMessageType(style),
                                              getButtonsType(buttons),
                                              "%s",
                                              message);
   gtk_window_set_title(GTK_WINDOW(dialog), title);
   Selection selection = getSelection(gtk_dialog_run(GTK_DIALOG(dialog)));

   gtk_widget_destroy(GTK_WIDGET(dialog));
   while (g_main_context_iteration(NULL, false));

   return selection;
}

} // namespace boxer 
```

### boxer_osx.mm

```
#include <boxer/boxer.h>
#import <Cocoa/Cocoa.h>

namespace boxer {

namespace {

NSString* const OK_STR = @"OK";
NSString* const CANCEL_STR = @"Cancel";
NSString* const YES_STR = @"Yes";
NSString* const NO_STR = @"No";

NSAlertStyle getAlertStyle(Style style) {
   switch (style) {
      case Style::Info:
         return NSInformationalAlertStyle;
      case Style::Warning:
         return NSWarningAlertStyle;
      case Style::Error:
         return NSCriticalAlertStyle;
      case Style::Question:
         return NSWarningAlertStyle;
      default:
         return NSInformationalAlertStyle;
   }
}

void setButtons(NSAlert *alert, Buttons buttons) {
   switch (buttons) {
      case Buttons::OK:
         [alert addButtonWithTitle:OK_STR];
         break;
      case Buttons::OKCancel:
         [alert addButtonWithTitle:OK_STR];
         [alert addButtonWithTitle:CANCEL_STR];
         break;
      case Buttons::YesNo:
         [alert addButtonWithTitle:YES_STR];
         [alert addButtonWithTitle:NO_STR];
         break;
      default:
         [alert addButtonWithTitle:OK_STR];
   }
}

Selection getSelection(int index, Buttons buttons) {
   switch (buttons) {
      case Buttons::OK:
         return index == NSAlertFirstButtonReturn ? Selection::OK : Selection::None;
      case Buttons::OKCancel:
         if (index == NSAlertFirstButtonReturn) {
            return Selection::OK;
         } else if (index == NSAlertSecondButtonReturn) {
            return Selection::Cancel;
         } else {
            return Selection::None;
         }
      case Buttons::YesNo:
         if (index == NSAlertFirstButtonReturn) {
            return Selection::Yes;
         } else if (index == NSAlertSecondButtonReturn) {
            return Selection::No;
         } else {
            return Selection::None;
         }
      default:
         return Selection::None;
   }
}

} // namespace

Selection show(const char *message, const char *title, Style style, Buttons buttons) {
   NSAlert *alert = [[NSAlert alloc] init];

   [alert setMessageText:[NSString stringWithCString:title
                                   encoding:[NSString defaultCStringEncoding]]];
   [alert setInformativeText:[NSString stringWithCString:message
                                       encoding:[NSString defaultCStringEncoding]]];

   [alert setAlertStyle:getAlertStyle(style)];
   setButtons(alert, buttons);

   Selection selection = getSelection([alert runModal], buttons);
   [alert release];

   return selection;
}

} // namespace boxer 
```

### boxer_win.cpp

```
#include <boxer/boxer.h>
#include <windows.h>

namespace boxer {

namespace {

UINT getIcon(Style style) {
   switch (style) {
      case Style::Info:
         return MB_ICONINFORMATION;
      case Style::Warning:
         return MB_ICONWARNING;
      case Style::Error:
         return MB_ICONERROR;
      case Style::Question:
         return MB_ICONQUESTION;
      default:
         return MB_ICONINFORMATION;
   }
}

UINT getButtons(Buttons buttons) {
   switch (buttons) {
      case Buttons::OK:
         return MB_OK;
      case Buttons::OKCancel:
         return MB_OKCANCEL;
      case Buttons::YesNo:
         return MB_YESNO;
      default:
         return MB_OK;
   }
}

Selection getSelection(int response) {
   switch (response) {
      case IDOK:
         return Selection::OK;
      case IDCANCEL:
         return Selection::Cancel;
      case IDYES:
         return Selection::Yes;
      case IDNO:
         return Selection::No;
      default:
         return Selection::None;
   }
}

} // namespace

Selection show(const char *message, const char *title, Style style, Buttons buttons) {
   UINT flags = MB_TASKMODAL;

   flags |= getIcon(style);
   flags |= getButtons(buttons);

   return getSelection(MessageBox(NULL, message, title, flags));
}

} // namespace boxer 
```

我的 GitHub 上提供了该库的完整实现（在 MIT 许可下，请随意使用它！）：[https ://github.com/aaronmjacobs/Boxer](https://github.com/aaronmjacobs/Boxer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:53:14.370

不依赖外部库或不必维护更多“跨平台”代码，您是否考虑过这样做`OpenGL`？画一个红色的四边形，里面有文字？

您很可能在某个时候拥有某种用户界面，因此您可能可以重用该代码。

编辑：在 OpenGL 准备好之前可能会出现错误消息的规范，我不得不说，在我看来，唯一的选择是为每个操作系统编写一个最小的包装器，以尝试在本地显示一个消息框。[这个线程](https://stackoverflow.com/questions/1384125/c-messagebox-for-linux-like-in-ms-windows)可以是一个有用的参考。

# linux - 笔式驱动器中的libusb批量传输

> ID：13500071
> 
> 赞同：0
> 
> 时间：2012-11-21T18:49:41.200
> 
> 标签：linux, linux-device-driver, libusb, usb

我正在使用 libusb 与笔式驱动器进行交互。我们必须使用函数 int libusb_bulk_transfer(struct libusb_device_handle * dev_handle, unsigned char endpoint, unsigned char * data,int length,int * transfer,unsigned int timeout)
但是这里我们只指定了终点所以我的问题是它实际上可以读取写入文件（文本或图像）到笔式驱动器。还是只是为了理解？请帮忙！代码：：

```
r = libusb_bulk_transfer(dev_handle, (2 | LIBUSB_ENDPOINT_OUT), data, 4, &actual, 0);
 //my device's out endpoint was 2, found with trial- the device had 2 endpoints: 2 and 129
    if(r == 0 && actual == 4) //we wrote the 4 bytes successfully
        cout<<"Writing Successful!"<<endl;
    else
        cout<<"Write Error"<<endl; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T00:09:44.297

Libusb 在比文件系统更低的层次上工作。您正在向/从设备读取或写入原始数据块，而不是处理文件级别的事情。如果您格式化设备，保存一些文件，然后使用您的程序从一开始就读取大量数据，您可能最终会看到文件名，然后是文件中的数据，以及许多其他“乱码“看东西。

如果您想以这种方式读取和写入文件，您将不得不编写可以读取其他数据的代码，以确定您的文件在设备上的位置、如何创建新文件等。

如果您只是在玩，您可以从闪存驱动器上的任意点开始，将整个文件写入其中，然后将其读回。但这只有您的程序才能理解，将您的闪存驱动器放在台式 PC 中不会知道在哪里可以找到它，因为您缺少告诉它您的文件在哪里的文件系统部分。

# javascript - 属性节点的 hasChildNodes() 为 Chrome 和 Firefox 返回不同的结果

> ID：13500073
> 
> 赞同：6
> 
> 时间：2012-11-21T18:49:56.983
> 
> 标签：javascript, xml, dom, cross-browser

在 Chrome 和 Firefox 中分别检查这个 jsfiddle：http: [//jsfiddle.net/9aE2p/1/](http://jsfiddle.net/9aE2p/1/)

还在这里粘贴相同的代码：

```
var xmlStr = '<?xml version="1.0" encoding="UTF-8"?><abc abc_attr="abc_attr_value"><abc_child abc_child_attr="abc_child_attr_value1"/><abc_child abc_child_attr="abc_child_attr_value2"/></abc>';

var parser = new DOMParser();
var xmlDoc = parser.parseFromString(xmlStr, "text/xml");

var path = 'abc/@abc_attr';

var nodes = xmlDoc.evaluate(path, xmlDoc, null, XPathResult.ANY_TYPE, null);

var result = nodes.iterateNext();

while (result) {
    var textContent = '<BR>result.textContent: "' + result.textContent + '"';
    var nodeType = '<BR>result.nodeType: "' + result.nodeType + '"';
    var resultHasChildren = '<BR>result.hasChildNodes(): ' + result.hasChildNodes();

    document.write(nodeType);
    document.write(textContent);
    document.write(resultHasChildren);

    result = nodes.iterateNext();
} 
```

我注意到 hasChildNodes() 为 Firefox 返回 false，为 Chrome 返回 true。

如果[nodeType](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType)是一个属性节点，那么在 Chrome 中它有一个具有实际值的子节点。但在 Firefox 中，它没有任何子节点，并且值存储在属性节点本身内。

我很想知道是否有任何关于这种细微差别的文档？

我已经检查了以下文件，但找不到任何此类细节：

[https://developer.mozilla.org/en-US/docs/DOM/Node.hasChildNodes](https://developer.mozilla.org/en-US/docs/DOM/Node.hasChildNodes)

[http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-810594187](http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-810594187)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:55:08.560

正如刚刚在我的评论中发布的那样，我认为这与 DOM4 中实现属性的方式与以前版本相比的变化有关。

*   [链接到 Mozilla 开发者网络、MDN 上的 Attr 接口文档](http://developer.mozilla.org/en-US/docs/DOM/Attr)

在以前的版本中，`Attr`接口扩展了`Node`. 这已更改，因此您不能再使用`Node`方法。但是，`name`和`value`属性仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:15:55.390

选择器

```
var path = 'abc/@abc_attr'; 
```

返回属性节点（Attr），本质上根本不可能有子节点，Mozilla 开发人员（猜测）有理由不推荐使用 hasChildNodes() 作为属性。

选择器

```
var path = 'abc[@abc_attr]' 
```

返回节点元素（Element）

样品在这里：

[http://jsbin.com/udugug/1](http://jsbin.com/udugug/1)

规范链接在这里有点轻：

[http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-637646024](http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-637646024)

# python - 对涉及循环和文件的 python 代码的行为感到困惑

> ID：13500076
> 
> 赞同：1
> 
> 时间：2012-11-21T18:49:59.273
> 
> 标签：python

我想首先感谢所有那些一直在那里试图帮助一个人的人。然后我也想为语言道歉，因为英语不是我的主要语言！

我想知道我做错了什么，因为我不能使用我的脚本。

我曾希望它会从文本文件一（'q1.txt'）移到下一个文本文件（'q2.txt'）。

但事实并非如此。没有它停留在 I 或 E 可能取决于回答问题。

问题被分成一个文本文件并用“;”分隔 首先是问题，然后是 A 和 B

希望我设法解释了我的问题。感谢你的帮助！

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
# name.py

def questions(fileName):
    fileName = open(fileName, 'r')
    counter_a, counter_b = 0, 0
    for questions in fileName:
        lineSplit = questions.split(','); # for every new line, split separtes whit "," for one quastion and      two choides
        question_string = "%s\n %s\n %s\n \n Answer: " % (lineSplit[0], lineSplit[1], lineSplit[2])
        answer = raw_input(question_string).lower()
        while answer not in ("a", "b"):
            print("Please choose A or B \n")
            answer = raw_input(question_string).lower()
    if answer == "a":
        counter_a += 1
    else:
        counter_b += 1

#print "A total is %d" % counter_a
#print "B total is %d" % counter_b

    if counter_a > counter_b:
        print 'Your first personality code is: E'
    else:
        print 'Your first personality code is: I'

def main():
    questions('q1.txt')
    questions('q2.txt')

if __name__=='__main__': main() 
```

--

你好，

感谢我收到的所有回复。我会尽力解释。

该脚本从指定的文本文件中检索问题。这些在每行的文本文件中用“，”分隔。文本文件中出现的问答示例：在聚会上您是否与很多人互动？，A：包括陌生人，B：与您认识的少数人互动

每次选择 A 或 B 时，您都会获得 A+1 或 B+1 的“分数”。

回答完所有问题后，您将根据您对信件的答复方式获得信息。这很好用。执行此任务的脚本没有问题。

问题是它没有在函数中走得更远，它不会转到第二个文本文件！

即从 q1.txt 到 q2.txt。问题（'q1.txt'） 问题（'q2.txt'）

得到答案后停止。您的第一个人格代码是：E 或您的第一个人格代码是：I

我希望这是对我所追求的更好的解释。再次，谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:04:30.063

此行是您*的代码**的*问题，尽管没有示例输入和输出很难诊断问题：

 *```
for questions in fileName: 
```

此行从每次迭代中读取一个字节`fileName`，并将其放入`questions`. 您几乎可以肯定想要的是逐行读取文件。请参阅有关文件和流的 python 文档以了解如何执行此操作（我不会为您做作业）。

现在，接下来发生的事情是：

```
 answer = raw_input(question_string).lower()
    while answer not in ("a", "b"):
        print("Please choose A or B \n")
        answer = raw_input(question_string).lower() 
```

`answer`但是，一旦你拥有它，你就不会做任何事情。您只需返回到 for 循环的顶部。一旦你用完所有字节`fileName`并退出循环，你点击：

```
if answer == "a":
    counter_a += 1
else:
    counter_b += 1

if counter_a > counter_b:
    print 'Your first personality code is: E'
else:
    print 'Your first personality code is: I' 
```

然后你退出函数。因此，最终的打印输出由最后输入的值决定`answer`。

您可能想要的是在循环`if`内移动第一条语句。`for`请记住：Python 中的缩进*不是*可选的。*

# c - strcmp 使应用程序崩溃

> ID：13500086
> 
> 赞同：0
> 
> 时间：2012-11-21T18:50:50.550
> 
> 标签：c, strcmp

我有这个功能

```
int does_exist_in_array(char team[], struct team *teams) {
    int i;
    for(i = 0; i < MAX_TEAMS_AMOUNT; i++) {
        if(!strcmp(team, teams[i].name)) {
            return 1;
        }
    }
    return 0;
} 
```

当我运行应用程序时它崩溃了。有谁知道出了什么问题？我用错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T18:54:11.010

发生这种情况的原因有很多：

*   任一参数为 NULL 或无效指针
*   任一参数指向的字符串都不是以 0 结尾的
*   `MAX_TEAMS_AMOUNT` `team`元素少于

# android - Android活动链导致循环行为

> ID：13500089
> 
> 赞同：0
> 
> 时间：2012-11-21T18:50:55.977
> 
> 标签：android

在我的 android 应用程序中，我有两个活动

mainactivity 和 erroractivity

主要活动开始（恢复时）它检查wifi未连接它打开错误活动，它只是告诉用户wifi已关闭启动它然后打开应用程序

用户现在开始 wifi - 重新打开我的应用程序，最后一个错误活动现在再次出现。因此，在错误活动的 onResume 中，我检查 wifi 状态是否已连接，我使用 startActivity 打开主要活动。

用户现在处于 mainactivity 但出现了错误，

用户现在不能再按下返回按钮来结束主活动，因为当他按下返回时，似乎会进入错误活动，再次打开主活动，

任何想法如何解决？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:53:24.973

在erroactivity 上，不是使用 use`onResume()`启动 mainactivity ，而是完成 erroractivity 并返回到堆栈上的前一个（即 mainactivity）。`startActivity()``finish()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:53:32.440

> 它只是告诉用户 wifi 已关闭启动它然后打开应用程序

我假设您使用 Intent 和`startActivity()`. `finish()`之后尝试调用`startActivity()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T18:53:51.330

由于您没有完成 MainActivity如果连接了wifi ，您只需要调用`finish()`错误活动方法...`onResume()`

# drag-and-drop - 如何在 Alfresco Share 4.2 中使用 Alfresco.component.getDNDUploadInstance()

> ID：13500093
> 
> 赞同：0
> 
> 时间：2012-11-21T18:51:27.277
> 
> 标签：drag-and-drop, yui, alfresco

我在 Alfresco Community 版本的 Share 的客户端 javascript 中使用漂亮的 html5 文件上传的示例中看到[了这一点。](http://sharextras.org/jsdoc/share/community-4.0.d/symbols/Alfresco.DNDUpload.html)我尝试按照说明使用它：

```
this.widgets.myWidget = Alfresco.component.getDNDUploadInstance(); 
```

不幸的是，我收到一个错误：

```
Uncaught TypeError: Object #<Object> has no method 'getDNDUploadInstance' 
```

我在这里想念什么？我需要一些依赖项吗？我将 alfresco.js、alfresco-dnd.js 包括在我的 Share dashlet 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:46:16.587

我认为 JSDoc 类中包含的代码片段可能已经过时了。

由于该类`Alfresco.DNDUpload`似乎实现了这些功能，因此您应该能够使用类似的东西

```
dndUpload = new Alfresco.DNDUpload(elid);
var multiUploadConfig =
{
   destination: destination,
   siteId: siteId,
   containerId: doclibContainerId,
   path: docLibUploadPath,
   filter: [],
   mode: dndUpload.MODE_MULTI_UPLOAD,
}
dndUpload.show(multiUploadConfig); 
```

您`elid`应该包含要将上传组件呈现到其中的 Dom 元素的 ID - 您可能会发现您需要在其中预定义一些标记。该表达式`args.htmlid`通常用于在您的 Web 脚本中提供值。

您还应该检查`show()`方法支持的参数（[文档](http://sharextras.org/jsdoc/share/community-4.0.d/symbols/Alfresco.DNDUpload.html#show)）。我看不到`files`列出的参数，所以我删除了它，但您应该查看您提供的其他值，以确保您指定了适当的值。

如果您需要更多参考资料，请查看`dnd-upload.get`Web 脚本 ( [source dir](http://svn.alfresco.com/repos/alfresco-open-mirror/alfresco/HEAD/root/projects/slingshot/config/alfresco/site-webscripts/org/alfresco/components/upload/) )。

# ms-access - 更改记录源但保留过滤器

> ID：13500094
> 
> 赞同：1
> 
> 时间：2012-11-21T18:51:31.373
> 
> 标签：ms-access, filter, vba

我有一个小问题：

我的表单有 2 个可能的底层查询（具有完全相同的字段和元数据）在用户需要时从一个更改为另一个。问题是，在更改记录源访问权限后，之前的过滤器并没有被应用。

我更改了记录源 OnLoad 并且应该有一个根据宏的过滤器，打开表单的内容。过滤器不起作用。

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:28:30.220

你提到了一个根据宏的过滤器，但你没有说宏是什么。让我们说你有：

```
DoCmd.OpenForm "form1", , , "atext='def'" 
```

这会将表单的 Filter 属性设置为：

```
atext='def' 
```

您可以在更改记录源之前保存过滤器属性并重新应用它。

```
sFilter = Me.Filter
Me.RecordSource = "select * from table1"
Me.Filter = sFilter
Me.FilterOn = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:53:29.470

好的。让它发挥作用并不难。您必须更改记录源 onLoad，然后通过带有“where”条件的宏打开表单： 1\. 将条件放入 onLoad 方法中是否打开过滤器。2\. 如果为真，则将过滤器保存为字符串并将 True 保存为布尔值 3\. 使记录源更改 4\. 控制您的布尔值，是否为真 5\. 如果为真则将过滤器设置回 6\. 打开过滤器

```
Private Sub ChengeRecS()
Dim fltr As String
Dim fB As Boolean
If Me.FilterOn = True Then
    fB = True
    fltr = Me.Filter
End If
Me.RecordSource = "newRecordSource"
If fB = True Then
    Me.Filter = fltr
    Me.FilterOn = True
End If
End Sub 
```

# c++ - 将指针数组作为 const 传递

> ID：13500096
> 
> 赞同：0
> 
> 时间：2012-11-21T18:51:44.443
> 
> 标签：c++, pointers, constants

作为常量传递的数组与作为常量的数组值有什么区别？

当每个值都是常量时将指针数组传递给函数时：

```
`void display(Fraction* const ar[], int size);` 
```

一切正常，但是当数组是常数时

```
`void display(const  Fraction* ar[], int size);` 
```

编译器在调用函数时给出以下错误：

```
`error C2664: 'display' : cannot convert parameter 1 from 'Fraction *[3]' to 'const Fraction *[]'` 
```

主要的：

```
int main()
{
    Fraction* fArray[3];
    Fraction* fOne = new Fraction();
    Fraction* fTwo = new Fraction();
    Fraction* fThree = new Fraction();
    fOne->num = 8;
    fOne->den = 9;
    fTwo->num = 3;
    fTwo->den = 2;
    fThree->num = 1;
    fThree->den = 3;
    fArray[0] = fOne;
    fArray[1] = fTwo;
    fArray[2] = fThree;
    display(fArray, 3);

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:55:59.957

这是一个[常见问题解答](https://isocpp.org/wiki/faq/const-correctness#constptrptr-conversion)。

请注意，这`const T* a[]`意味着`T const* a[]`，即您声明的不是数组本身`const`；`const`相反，您已经声明了一个指向项目的指针数组。

本质上，如果语言提供了隐式转换`T**`→ `T const**`，那么您可能会无意中尝试更改最初声明的内容`const`：

```
int const     v = 666;
int*          p;
int**         pp = &p;
int const**   ppHack = pp;    //! Happily not allowed!

*ppHack = &v;    // Now p points to the const v... 
```

# ios - canOpenURL 总是返回 FALSE

> ID：13500098
> 
> 赞同：2
> 
> 时间：2012-11-21T18:51:50.683
> 
> 标签：ios, uiapplication

我正在尝试使用 UIApplication 打开一个 URL，但是当我运行时：

```
[[UIApplication sharedApplication] canOpenURL:urlToUpdate 
```

url 是用一个字符串创建的，并且

```
NSString *urlStringToOpenEscaped = [urlStringToOpen stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSURL *urlToUpdate = [NSURL URLWithString:urlStringToOpenEscaped]; 
```

总是返回 FALSE。

我检查了可以从 iPad 访问的 URL。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:58:23.493

该`canOpenURL`方法不用于测试网络 url 是否可访问。根据文档：

> 该方法保证如果调用 openURL: 会启动另一个应用程序来处理它。它不保证完整的 URL 是有效的。

因此，这是一种了解传递给方法的 url 指定的资源是否可以被系统上的应用程序访问/打开的方法。

如果要检查网址是否可访问，则必须执行请求，然后在响应中处理结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T05:59:55.213

IOS 9 对使用 canopenURL 的政策进行了一些更改，以防止广告服务滥用 API。

[http://www.macrumors.com/2015/06/24/ios-9-policy-change-advertising-privacy/](http://www.macrumors.com/2015/06/24/ios-9-policy-change-advertising-privacy/)

# gwt - 禁用导航离开 GWT 位置，直到满足某些条件

> ID：13500099
> 
> 赞同：0
> 
> 时间：2012-11-21T18:51:53.537
> 
> 标签：gwt

我有一个 GWT 地方，用户必须先创建一些对象才能离开那里。我尝试使用

```
eventBus.addHandler(PlaceChangeRequestEvent.TYPE, new PlaceChangeRequestEvent.Handler() {
  @Override
  public void onPlaceChangeRequest(PlaceChangeRequestEvent event) {
    event.setWarning("must create the object");
  }
}); 
```

但这会显示一个警告框，然后用户可以单击“确定”并仍然离开该位置。我可以将执行代码放到我的 PlaceController 实例中，但我想当我得到一个 PlaceChangeRequestEvent 实例时，也许有一种方法可以调用类似 event.cancel() 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T18:07:57.403

如果使用 GWTP，可以调用[PlaceManager 的 setOnLeaveConfirmation 方法](http://arcbees.github.io/GWTP/javadoc/apidocs/com/gwtplatform/mvp/client/proxy/PlaceManager.html#setOnLeaveConfirmation%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:58:38.097

没有办法使用 stock 将用户锁定在特定位置`PlaceController`。

在网页之间导航之后，已经对地点之间的导航进行了建模，因为用户甚至不必知道他们实际上并没有离开页面：他们在浏览器中，为什么与另一个网站/应用程序相比，它在该站点/应用程序上的工作方式不同?

# javascript - javascript中的对象和函数

> ID：13500101
> 
> 赞同：16
> 
> 时间：2012-11-21T18:52:02.663
> 
> 标签：javascript, scope

> **可能重复：**
> [Javascript：我是否需要为对象中的每个变量放置 this.var？](https://stackoverflow.com/questions/13418669/javascript-do-i-need-to-put-this-var-for-every-variable-in-an-object)

我正在努力理解 javascript 中的函数和对象。据说函数也是对象，对象是一种“关联数组”，即键值对的集合。我明白，如果我写

```
function myFunction() {
    var value = 0;
}
alert(myFunction.value); //then this gives me "undefined" 
```

因为变量具有函数范围。但如果我写

```
function myFunction() {
    this.value = 0;
}
alert(myFunction.value); //then this gives me "undefined" too. 
```

但最后，如果我写

```
function myFunction() {
    this.value = 0;
}
myFunction.value = 0;
alert(myFunction.value); //then this gives me 0 
```

所以我可以给 myFunction 属性“值”，但来自“外部”。有人可以解释发生了什么以及为什么 this.value = 0; 不会创造财产“价值”。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T19:16:34.153

让我们分别看一下所有三种情况：

```
function myFunction()
{
    var value = 0;
} 
```

在这里，您要在函数的范围内声明一个变量。每次调用函数时，都会创建变量（并分配内存）。当函数返回时，变量超出范围 - 变量`value`被标记并将被 GC'ed。不能从比此函数范围*“更高”*的范围访问范围...如果此函数在其范围内定义了一个函数，则该函数将有权访问该变量`value`（查看闭包以获取更多详细信息）。底线：该变量仅在调用函数时存在，并且在函数返回后不存在。

```
function myFunction()
{
    this.value = 0;
} 
```

在这里，您定义的函数可以是构造函数、方法、事件处理程序或以上所有内容的组合。`this`是一个引用，它将指向调用函数的上下文。此上下文是*“临时”*确定的，并且可能会有所不同：

```
myFunction();// global scope, this points to window
var anObject = {method: myFunction};
anObject.method();//called in the object's context, this points to object
console.log(abObject.value);//logs 0
var instance = new myFunction();//as constructor
console.log(instance.value);//logs 0
document.getElementById('anInputField').onclick = myFunction;//on click, value will be set to 0 
```

在最后一种情况下：

```
function myFunction()
{
    this.value = 0;
}
myFunction.value = 0; 
```

如果你写这个不会有任何区别：

```
function myFunction()
{}
myFunction.value = 0; 
```

因为，正如我上面解释的：`this`引用函数调用时的任何上下文。事实上，这不一定是`myFunction`：通常不会是：

```
var anObject = {method: myFunction};
myFunction.value = 101;//myFunction.value is changed
anObject.method();
console.log(anObject.value);//0 -> the function still sets the value property to 0 
```

如果要访问该函数内部的函数属性，最简单的方法是像引用任何其他对象一样引用该函数：

```
function myFunction()
{
    this.value = myFunction.value;
}
myFunction.value = 101; 
```

*警告：*只是一个友好的警告：在不检查全局变量的情况下在函数
中使用不是很安全...如果在没有显式上下文的情况下调用函数，JS*默认*使用全局 ( ) 对象。这意味着将属性分配给碰巧指向的任何对象的每一行都将设置一个全局变量：`this``window`*`this`*

 *```
function myFunction()
{
    this.foo = 'bar';
}
myFunction();
console.log(window.foo);//logs bar EVIL GLOBAL 
```

防止全局对象被全局变量弄乱的几种方法：

```
function mySafeFunction()
{
    'use strict';//throws errors, check MDN
    //this defaults to null, instead of window
    impliedGlobal = 'Error';//doesn't work
    this.onGlobal = 'Error';//null.property doesn't work
}
//same goes for constructors, but a more precise check can be used, too (and works on older browsers)
function SafeConstructor()
{
    if (!(this instanceof SafeConstructor))
    {//this doesn't point to SafeConstructor if new keyword wasn't used
        throw new Error('Constructor wasn\'t called with new keyword');
        //or "correct" the error:
        return new SafeConstructor();
    }
    console.log(this);// will always point to the SafeConstructor object
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-21T18:55:20.687

您需要`instance`使用**new**关键字创建一个。

```
function myFunction() {
    this.value = 0;
}

var inst1 = new myFunction();

alert(inst1.value);  // this works 
```

现在 this 对应于当前 object ，它会为您提供相应的属性值。

**[检查小提琴](http://jsfiddle.net/sushanth009/7WMFU/)**

在一天结束时..函数仍然是**对象**..所以当你分配它时它不会抱怨..当你在函数内部和外部使用**值（键）**`myFunction.value = 0`时可能会令人困惑..将它替换为

 **```
myFunction.abc = 'Hello' 
alert(myFunction.abc) still works 
```

但它不会反映在实际的 myFunction 中，因为您还没有调用该函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T18:58:20.443

您误解了 javascript 原型/对象概念。

对于第一个示例，您是对的，该变量具有函数范围

第二个例子是错误的。如果要将函数用作“类”，则必须从中创建一个对象

```
function myFunction() { this.value = 0; }
var test = new myFunction; 
```

只有这样你才能访问它的“价值”属性。对于每个“新”语句，都会创建一个新对象。

在第三个示例中，您向函数添加静态属性，无需创建对象即可访问该属性。不同的技术

希望它有所帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T18:55:30.550

不确定我是否可以为您清除所有细微差别，但这可能会有所启发：

```
function myFunction() {
    this.value = 0;
}
alert( (new myFunction).value); 
```

使用`new`关键字创建一个`myFunction`允许`this`用于从函数内部分配值的新“实例”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-21T19:09:27.483

`myFunction`是一个*函数对象*。您可以传递它，将其分配给变量，为其分配属性，然后您可以*调用*它。

分配属性的工作方式与任何其他对象一样：

```
myFunction.value = 0; 
```

但请注意，此时您还**没有调用**该函数，因此函数（或）*内部*的代码甚至还没有执行。考虑一下：`var value = 0;``this.value = 0;`

```
function someFunction() {
    window.foo = 'foo'; // create a global variable
}

someFunction.bar = 'bar';

console.log(someFunction.bar); // 'bar'
console.log(window.foo); // undefined

someFunction(); // execute the function

console.log(someFunction.bar); // 'bar'
console.log(window.foo); // 'foo' 
```

当您使用 执行函数时`myFunction()`，才会创建局部变量/设置属性`this`。指的是什么`this`取决于函数的调用方式，并且在 MDN 文档中有很好*的*[解释](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)。*除非您明确*设置它，否则`this` **永远不会**引用函数本身。

 ** * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-21T19:26:26.267

在 javascript 中，任何函数也是一个对象，它们是 的对象`Function`，就像`Number, Object, Array`

一个棘手的事情是`new`单词，然后它在函数之前添加前缀，它创建一个新对象，并使`this`关键字指针指向该新对象（另外，它将该**函数原型**分配给新对象 __ proto __）。
在功能上，

```
this.value = 0; 
```

将为新对象创建一个新属性`value`，并将 0 分配给它。

如果**没有** `new`before 函数，它是函数调用，并且`this`会指向**Window**对象。

尝试`console.dir(this);`在函数中，你会看到不同。

```
myFunction.value = 0; 
```

将创建属性`value`，`myFunction`并将 0 分配给它。因为 myFunction 只是一个对象（的**Function**）。****

# ruby - 用于 nil-or-empty 的惯用 Ruby 过滤器？

> ID：13500104
> 
> 赞同：21
> 
> 时间：2012-11-21T18:52:20.913
> 
> 标签：ruby, idioms, enumerable

我正在寻找一种更惯用的方法来过滤掉数组的 nil-or-empty 元素。

我有很多形式的方法：

```
def joined
    [some_method, some_other_method].compact.reject(&:empty?).join(' - ')
end 
```

这将获取 and 的结果`some_method`并`some_other_method`仅返回非 nil （`compact`本质上等同于`reject(&:nil?)`）和非空的结果。

Array 或 Enumerable 中是否有任何东西可以一次性获得相同的结果？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-21T19:04:12.163

`reject(&:blank?)`在 Rails 中，您可以执行`select(&:present?)`.

如果这不适用于 Rails 应用程序，并且您经常这样做，我建议您定义自己的帮助程序`String`或您要过滤的任何其他内容。

```
class String
  alias :blank? :empty?
end

class NilClass
  def blank?
    true
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T19:06:15.860

以下代码应该可以解决问题：

```
[some_method, some_other_method].reject{|i| i.nil? || i.empty? } 
```

它可以很容易地用于扩展数组类：

```
class Array

  def purge
    self.reject{|i| i.nil? || i.empty? }
  end 

end 
```

然后你可以这样做：

```
[some_method, some_other_method].purge 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T19:31:44.370

猴子补丁接受了吗？:)

你可以试试这个：

```
class Array
  def tight
    self.compact.reject { |i| i.size.zero? }
  end
end

p [nil, 1, ''].tight
#=> [1]
p ['', nil, 2].tight
#=> [2] 
```

它适用于任何响应的对象`size`，而不仅仅是响应于的对象`empty?`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-25T10:51:05.507

也许我们只需要一个简单的 NilClass 扩展？

```
class NilClass
  def empty?
    true
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-15T11:58:33.557

@trans 很喜欢我的 +1，但经过进一步考虑，我得出了以下结论。

如果我们假设一切都是如此，`Object`那么我们真正需要的只是一个补丁`class Object`

```
class Object
    def empty?
        self == 0 or not self
    end
end 
```

满足我的要求：

```
1.9.3 :001 > d=[Object.new, Class, {a:nil}, 'a', '', [], 1, 1.1, 0, 0.0, 0x0, 0E0, true, false, nil]
 => [#<Object:0x007fd56c086918>, Class, {:a=>nil}, "a", "", [], 1, 1.1, 0, 0.0, 0, 0.0, true, false, nil] 
1.9.3 :002 > d.reject(&:empty?)
 => [#<Object:0x007fd56c086918>, Class, {:a=>nil}, "a", 1, 1.1, true] 
```

你的呢？我们还需要更多东西吗？请通过投票来表达您的疑虑或表示默许，以帮助推动上游的语言更改。

开心！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-22T23:08:24.460

我认为你不需要使用`reject`方法。只需使用 Array 的`select`方法。

```
def joined
  [some_method, some_other_method].select { |method| method.present? }
end 
```

甚至更好：

```
def joined
  [some_method, some_other_method].select(&:present?)
end 
```

有关**[编写 Ruby 代码的更多惯用方式](https://medium.com/the-renaissance-developer/idiomatic-ruby-1b5fa1445098)**，您应该阅读这篇[文章](https://medium.com/the-renaissance-developer/idiomatic-ruby-1b5fa1445098)

# python - Python中未知大小的二维数组

> ID：13500105
> 
> 赞同：2
> 
> 时间：2012-11-21T18:52:21.393
> 
> 标签：python, arrays, numpy

我对 python 和 numpy 很陌生，如果问题很明显，我很抱歉。在互联网上我找不到正确的答案。我需要在python中创建一个未知大小的二维（a.ndim --> 2）数组。可能吗？我找到了一种通过列表的 1 维方法，但 2 维没有运气。

例子

```
for i in range(0,Nsens):
    count=0
    for l in range (0,my_data.shape[0]):
        if my_data['Node_ID'][l]==sensors_name[i]:
            temp[count,i]=my_data['Temperature'][l]
            count=count+1
        else:
            count=count 
```

temp 是我需要初始化的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:30:10.573

这显示了一种在 numpy 中填充未知大小数组的相当高性能（尽管比初始化为精确大小慢）的方法：

```
data = numpy.zeros( (1, 1) )
N = 0
while True:
    row = ...
    if not row: break
    # assume every row has shape (K,)
    K = row.shape[0]
    if (N >= data.shape[0]):
        # over-expand: any ratio around 1.5-2 should produce good behavior
        data.resize( (N*2, K) )
    if (K >= data.shape[1]):
        # no need to over-expand: presumably less common
        data.resize( (N, K+1) )
    # add row to data
    data[N, 0:K] = row

# slice to size of actual data
data = data[:N, :] 
```

适应您的情况：

```
if count > temp.shape[0]:
    temp.resize( (max( temp.shape[0]*2, count+1 ), temp.shape[1]) )
if i > temp.shape[1]:
    temp.resize( (temp.shape[0], max(temp.shape[1]*2, i+1)) )
# now safe to use temp[count, i] 
```

您可能还想跟踪实际数据大小（最大计数、最大 i）并稍后修剪数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:56:20.960

在 numpy 中，您必须在初始化时指定数组的大小。稍后您可以根据需要扩展阵列。

但请记住，不建议扩展阵列，应作为最后的手段。

[动态扩展 scipy 数组](https://stackoverflow.com/questions/7546080/dynamically-expanding-a-scipy-array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:56:48.590

鉴于您的后续评论，听起来您正在尝试执行以下操作：

```
arr1 = { 'sensor1' : ' ', 'sensor2' : ' ', 'sensor_n' : ' ' }   #dictionary of sensors (a blank associative array)
                                                                #take not of the curly braces '{ }'
                                                                #inside the braces are key : value pairs
arr1['sensor1'] = 23
arr1['sensor2'] = 55
arr1['sensor_n'] = 125

print arr1

for k,v in arr1.iteritems():
    print k,v

for i in arr1:
    print arr1[i] 
```

[Python 字典教程](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)应该能够为您提供所需的洞察力。

# vb.net - 如何使用字符串切片从字符串中提取单个数据，例如 R、P、H

> ID：13500109
> 
> 赞同：2
> 
> 时间：2012-11-21T18:52:56.263
> 
> 标签：vb.net

我们有一个带有单独值的字符串，例如 23.N.34.H.67 等 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:05:55.927

既然您的导师建议切片，请查看使用该[`String.SubString`](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)方法是否是他的想法。我正在使用 lambda 表达式来确定数组的大小，如果您不想像在我的其他示例中那样使用 List 的话。

```
static void Main(string[] args)
{
    FileStream telData;
    List<int> myNumbers = new List<int>();
    telData = new FileStream(@"C:\temp\inputdata.txt", FileMode.Open);
    StreamReader strmRead = new StreamReader(telData);
    string d = "";
    string tempdata;

    while ((tempdata = strmRead.ReadLine()) != null)
    {
        d += tempdata;
    }
    telData.Close();

    Console.WriteLine(AverageParsedValues(d, 'H'));
    Console.WriteLine(AverageParsedValues(d, 'P'));
    Console.WriteLine(AverageParsedValues(d, 'T'));
    Console.ReadLine();

}

static double AverageParsedValues(string data, char match)
{
    int start;
    int end;
    int[] value = new int[data.Where(c => c == match).Count()];

    int index =0;
    int temp;

    for (int i = 0; i < data.Length-1; i++)
    {
        if (data[i] == match)
        {
            start = data.IndexOf(':', i) + 1;
            end = data.IndexOf(':', start);
            if (int.TryParse(data.Substring(start, end - start), out temp))
            {
                value[index] = temp;
                index += 1;
            }
        }
    }
    return value.Average();
} 
```

* * *

编辑：修改后的方法不再需要数组或列表：

```
static double AverageParsedValues(string data, char match)
{
    int start;
    int end;
    int value = 0;
    double count = 0; //Double so that we return a double not an integer
    int temp;

    for (int i = 0; i < data.Length-1; i++)
    {
        if (data[i] == match)
        {
            start = data.IndexOf(':', i) + 1; // Find Start of Data
            end = data.IndexOf(':', start); // Find End of Data
            if (int.TryParse(data.Substring(start, end - start), out temp))
            {
                value += temp;
                count += 1;
            }
        }
    }
    if (count != 0) //Check for divide by zero
        return value / count;
    else
        return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:15:09.247

您可以执行以下操作，从文本文件中读取所有文本（我不确定文本中是否有 newLines），然后为每个值提取字符串。之后，您将能够以最适合您的方式解析这些字符串。

```
 string inputString = File.ReadAllText(@"E:\inputdata.txt");
            List<string> D = new List<string>();
            List<string> H = new List<string>();
            List<string> P = new List<string>();
            List<string> T = new List<string>();
            List<string> R = new List<string>();
            while (inputString.Length > 0)
            {
                int index = inputString.IndexOfAny(new char[] { 'D', 'T', 'H', 'P', 'R' },1);
                string subStr = string.Empty;
                if (index >= 0)
                {
                    subStr = inputString.Substring(0, index - 1);
                    inputString = inputString.Substring(index);
                }
                else
                {
                    subStr = inputString;
                    inputString = string.Empty;
                }
                switch (subStr[0])
                {
                    case 'D':
                        D.Add(subStr.Substring(1).Trim(':'));
                        break;

                    case 'T':
                        T.Add(subStr.Substring(1).Trim(':'));
                        break;

                    case 'H':
                        H.Add(subStr.Substring(1).Trim(':'));
                        break;
                    case 'P':
                        P.Add(subStr.Substring(1).Trim(':'));
                        break;
                    case 'R':
                        R.Add(subStr.Substring(1).Trim(':'));
                        break;
                }

            } 
```

# jquery - 如何覆盖 jquery 脚本

> ID：13500111
> 
> 赞同：0
> 
> 时间：2012-11-21T18:52:56.470
> 
> 标签：jquery

我有一个脚本，一旦加载页面就会运行

```
$("#node-title").html("Node 0"); 
```

我想创建一个事件（单击按钮），它将更改节点标题 innerHtml

```
$( "button#new-child" ).click(function () {
...
$("#node-title").html("Node " + counter);
}); 
```

其中计数器在代码中定义。

这不起作用，我认为这是因为我无法覆盖第一个脚本。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:02:04.453

使用正确的标记，它应该可以工作。看看这个 jsBin 中的 HTML 和 JavaScript：http: [//jsbin.com/utucej/1/edit](http://jsbin.com/utucej/1/edit)

# powershell-ise - 如何映射 Ctrl+Shift+S 以在 PowerShell ISE 中保存所有文件

> ID：13500112
> 
> 赞同：0
> 
> 时间：2012-11-21T18:53:01.630
> 
> 标签：powershell-ise

我已经习惯按`Ctrl`++`Shift`将`S`所有文件保存在 Visual Studio 中。PowerShell ISE 无法识别此组合键，并让我的文件处于编辑状态而不保存它们。

这意味着对我的脚本所做的更改不会被保存，我的脚本也不起作用。

有什么方法可以将**Save All**键绑定添加到 PowerShell ISE？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:54:52.653

将以下内容添加到您的 ISE 配置文件中。默认情况下，它`C:\Users\name\Documents\WindowsPowerShell\Microsoft.PowerShellISE_profile.ps1`位于 中，但您可以通过检查`$PROFILE`变量在 ISE 中找到它。

```
function Save-All {
    $psISE.CurrentPowerShellTab.Files |
        where { ! $_.IsSaved } |
        foreach {
            $_.Save()
        }
}

$psISE.CurrentPowerShellTab.AddOnsMenu.Submenus.Add(
    "Save All", {Save-All}, "Ctrl+Shift+S") 
```

# java - 休眠查询结果为空

> ID：13500114
> 
> 赞同：0
> 
> 时间：2012-11-21T18:53:12.047
> 
> 标签：java, mysql, hibernate

我正在学习休眠并制作了一个简单的程序来从我的 sql 中读取表。
我在执行查询后得到的结果列表大小为零，即使表中有 14 条记录。
我制作了 show_sql 来查看 sql 日志，我得到了这个：

```
log4j:WARN No appenders could be found for logger (org.hibernate.cfg.Environment).
log4j:WARN Please initialize the log4j system properly.
Hibernate: select insurance0_.lngInsuranceId as col_0_0_ from insurance insurance0_ 
```

我还附上代码以供参考

```
Session session = new Configuration().configure("Hibernate.cfg.xml").buildSessionFactory().openSession();

    String SQL_QUERY ="from Insurance insurance";
    Query query = session.createQuery(SQL_QUERY);
    System.out.println("size of list is: "+query.list().size());
    List resultList = query.list();

    for (Iterator iterator = resultList.iterator(); iterator.hasNext();) {
        Insurance object = (Insurance) iterator.next();
        System.out.println("insurance name is: "+object.getInsuranceName());
        System.out.println("insurance amount is: "+object.getInvestementAmount());

    }
    session.close(); 
```

实体类：

```
public class Insurance {

  private long lngInsuranceId;
  private String insuranceName;
  private int investementAmount;
  private Date investementDate;
public long getLngInsuranceId() {
    return lngInsuranceId;
}
public void setLngInsuranceId(long lngInsuranceId) {
    this.lngInsuranceId = lngInsuranceId;
}
public String getInsuranceName() {
    return insuranceName;
}
public void setInsuranceName(String insuranceName) {
    this.insuranceName = insuranceName;
}
public int getInvestementAmount() {
    return investementAmount;
}
public void setInvestementAmount(int investementAmount) {
    this.investementAmount = investementAmount;
}
public Date getInvestementDate() {
    return investementDate;
}
public void setInvestementDate(Date investementDate) {
    this.investementDate = investementDate;
} 
```

}

请帮忙，因为我无法在这个问题上归零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-30T06:26:54.530

我有同样的问题。我通过在创建查询之前开始事务并在打印数据后提交来修复它。我不知道为什么我需要一个事务来查询数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-06T15:09:15.760

测试时遇到同样的问题：

```
@Test
public void readMessage() {
    try (Session session = factory.openSession()) {
        List<Message> list = session.createQuery("from Message", Message.class).list();
        assertEquals(list.size() > 3, true);
    }
} 
```

使用：`<property name="hbm2ddl.auto">update</property>`在您的`hibernate.cfg.xml`文件中。

参考：[Hibernate hbm2ddl.auto 配置的可能值是什么，它们的作用是什么](https://stackoverflow.com/questions/438146/what-are-the-possible-values-of-the-hibernate-hbm2ddl-auto-configuration-and-wha)

# objective-c - 收藏视图需要的建议

> ID：13500117
> 
> 赞同：0
> 
> 时间：2012-11-21T18:53:20.277
> 
> 标签：objective-c, ios, xcode, uicollectionview, uicollectionviewcell

我基于一个关于可可控件的项目实现一个集合视图

[http://www.cocoacontrols.com/platforms/ios/controls/klsectionselect](http://www.cocoacontrols.com/platforms/ios/controls/klsectionselect) ,

我有 6 个项目存储在一个数组中。

我的问题是：使用`if`语句，我如何引用存储在 P 列表中的数组中的项目 1 到 6，以便在选择时为这些项目添加实现/操作？

到目前为止，我尝试查看容器视图的苹果文档——实际上并没有进一步的进展

我还尝试添加 if 语句`if ((collectionView = 0))`以及其他此类猜测'

![在此处输入图像描述](../Images/497b9e5ccac92d6db8d6415a45dd65eb.png)

```
-(NSInteger) collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
return [self.sectionData count];
}
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
[collectionView registerClass:[KLHeaderViewCell class] forCellWithReuseIdentifier:@"Cell"];
KLHeaderViewCell* cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
NSDictionary* cellDictionary = [self.sectionData objectAtIndex:indexPath.row];
[cell.image setImage:[UIImage imageNamed: [cellDictionary objectForKey:@"image"]]];
[cell.label setText:[cellDictionary objectForKey:@"text"]];
return cell;
}

-(void) didSelectItem:(UICollectionView*)collectionView item:(UICollectionViewCell*) cell {

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Note1" message:@"© 2012 " delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];

    [alert show];

} 
```

这是我尝试过的，可能有助于解释

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {

if 
    ((collectionView = Item 0)){

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Note1" message:@"© 2012 " delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];

    [alert show];

    }

else if ((collectionView =Item 1)){

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"New Note" message:@" © 2012 " delegate:nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];

    [alert show];

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:26:11.770

您实现委托方法 - (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath 。

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
 NSDictionary* cellDictionary = [self.sectionData objectAtIndex:indexPath.row];
} 
```

确保您已将类设置为集合视图的委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:39:41.540

我不确定我是否理解您的问题，但您可以尝试查看所选项目行。

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath (NSIndexPath *)indexPath {

if (indexPath.row = 0){

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Note1" 
                                                    message:@"© 2012 " 
                                                   delegate:nil 
                                          cancelButtonTitle: @"Ok" 
                                          otherButtonTitles: nil];
    [alert show];
}
else if (indexPath.row = 1){

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"New Note" 
                                                    message:@"© 2012 " 
                                                   delegate:nil 
                                          cancelButtonTitle: @"Ok" 
                                          otherButtonTitles: nil];
    [alert show];
}
else if ... 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:05:54.927

而不是这样做：

```
-(void) didSelectItem:(UICo`enter code here`llectionView*)collectionView item:(UICollectionViewCell*) cell { 
```

...你应该写：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath { 
```

# c++ - C++ Xcode iOS 项目错误

> ID：13500119
> 
> 赞同：0
> 
> 时间：2012-11-21T18:53:21.827
> 
> 标签：c++, ios, objective-c++

我正在开发一个作为多个 c++ 类的 iOS 项目。但看起来编译它们并不简单。我厌倦了不同的方法，但总是给出一些错误。

1）首先我将 .m;class 重命名为 .mm 并尝试编译，但它给出了错误。在这一行

```
SInt16 *editBuffer = audioBufferList->mBuffers[0].mDat; 
```

`Error - "Cannot initialize a variable of type 'SInt16 *' (aka 'short *') with an lvalue of type 'void *'"`

2) 将 Other Linker Flags 设置为 -ObjC++ 时，会出现这两个错误。未知类型名称“类”；您指的是 'Class' 吗？

```
'deque' file not found - for #include<deque> 
```

任何人都有任何想法，这里有什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:25:09.623

第一个错误是预期的。C++ 对 void 指针很挑剔。

```
SInt16 *editBuffer = (SInt16 *)(audioBufferList->mBuffers[0].mDat); 
```

或者

```
SInt16 *editBuffer = static_cast<SInt16 *>(audioBufferList->mBuffers[0].mDat); 
```

请参阅[void* 的转换和转换](http://www.devx.com/tips/Tip/14446)。

# firefox - Firefox：自己主页上的“安装插件”按钮

> ID：13500120
> 
> 赞同：2
> 
> 时间：2012-11-21T18:53:22.877
> 
> 标签：firefox, firefox-addon, greasemonkey, firefox-addon-sdk

我创建了一个greasemonkey 脚本并想在我的主页上提供一个“安装Greasemonkey”按钮。这个按钮应该安装 firefoxgreasemonkey 插件并让用户免于重定向到 addons.mozilla.org。在他们安装了greasemonkey 之后，我提供了一个已经可以使用的“安装greasemonkey 脚本”按钮。

是否可以直接在我的主页上包含“安装greasemonkey”按钮？理想情况下，它会使用托管在 addons.mozilla.org 上的插件，我不会自己托管greasemonkey。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T19:10:08.420

你在这里是正确的道路。即使您的用户信任您，最好的方法是让实际`xpi`托管在 Mozilla。默认情况下，Mozilla 会阻止从第三方站点安装附加组件（并且有充分的理由）。

这是我尝试从未知站点安装的 Aurora whining 的屏幕截图：

![这是我试图从未知站点安装的 Aurora whining 的屏幕截图](../Images/0ec7b87b47bb1a1bfd696a1de85c7a7b.png)

如果到 Mozilla Addons 的简单链接不够好，您可以尝试直接链接到 xpi，如上面的屏幕截图所示。这是我尝试创建一个可以直接从[Mozilla Addons](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)获取插件的链接。HTML 几乎来自 Mozilla 本身。它看起来不太好，但你可以修复它`CSS`，我希望。

```
<p class="install-button">
    <a class="active" data-hash="sha256:61ea619b9922c826cdf0449ddf7d79d4d9bc9e6cae0083d21678870ea65454ef" href="https://addons.mozilla.org/en-US/firefox/downloads/latest/748/addon-748-latest.xpi?src=dp-btn-primary">
        <span>Add to Firefox</span>
    </a>
</p> 
```

# math - 如何在玩家位置附近但距离中心半径“r”处找到 Vector2 坐标？

> ID：13500122
> 
> 赞同：0
> 
> 时间：2012-11-21T18:53:24.417
> 
> 标签：math, vector, wolfram-mathematica, logic, geometry

我试图四处寻找解决此类问题的方法，但找不到。于是我想到了问。

**问题：**

我有一个中心，我想在圆的圆周上找到一个点。现在的限制是，我想靠近“玩家位置”。玩家的位置可以在距离中心的任何位置，并且始终小于距离中心的半径“r”。现在，正如我所说的“接近”，我想简要介绍一下。让一个圆圈除以四边形。如果玩家位于第一四边形，则圆周上**除**第三四边形之外的任何点都是好的。

我希望我很清楚。

问题的图像表示在[这里](http://s14.postimage.org/7x5h76m9t/Point_Finder.jpg)。

**图像说明：** 考虑到上图，假设圆的半径为“r”，玩家位于“Pl”处。现在只是随机的，我想在'x'（红色）附近的任何地方获得**一个Vector2 坐标。**同样在这里，它们是高度任意的，但它们在相邻的四边形内。所需的坐标是vector2 坐标。

非常感谢您！！！

问候，

卡尔斯嫩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:59:55.510

在极坐标中，您只需计算所考虑区域中的随机角度（由于玩家的位置）

例如，玩家的位置在极坐标中类似于 (R,theta)，您可以为您搜索的位置的角度生成一个随机值，`-pi`并将`pi`其添加到玩家位置的角度 theta。或者，如果您真的想根据那些“四边形”执行此操作：如果玩家在第一个四边形中，则计算一个介于`-pi/2`和之间的随机值`pi`，如果玩家在第二个四边形中，则计算一个介于`0`和之间的随机值`3pi/2`，依此类推..

在此之后，您只需转换为笛卡尔坐标。

# python - 修复由其他语言引起的 Python Unicode 错误

> ID：13500126
> 
> 赞同：5
> 
> 时间：2012-11-21T18:54:01.627
> 
> 标签：python, unicode

我收到此错误：

> UnicodeEncodeError：“ascii”编解码器无法对位置 52-57 中的字符进行编码：序数不在范围内（128）

导致错误的代码：

```
f.write(textwrap.dedent(unicode(the_string)) 
```

我要写的字符串是一个网站的摘录，该网站包含英语和日语（用于测试）外来词和名称的音译，例如 コンピュータ（konpyūta，“计算机”）和 ロンドン（Rondon，“伦敦”）。（一些已经归化的外国借款可能不会以片假名呈现。）

在 Python 中处理另一种语言（日语）的字符串时。如何解析它以防止错误并仍然保留字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:23:43.807

这里的问题是`.write`文件对象的方法天真地试图将`unicode`你传递给字节字符串的 unicode 字符串（如果你在 Python 2.x 中，这将是类型）转换为字节字符串（如果你在 Python 2.x，这将是`str`使用 ASCII 编解码器的类型），但是您传递的 unicode 字符串不能使用 ASCII 表示，因为它具有不属于 ASCII 字符集的（日语）字符。

您需要使用`.encode`unicode 字符串的方法将其转换为代表该字符串的一系列字节，然后才能保存它。这基本上就是`str`Python 2.x 中的类型所代表的 - 只是一系列字节，*而不是*您可能期望的一系列字符。但是，Python 很容易让您产生其他想法，因为当您`print`使用 type 变量时`str`，Python 会使用系统默认的 unicode 编码将其显示为终端中的一系列字符。

您应该在此处使用什么编码来对字符串进行编码取决于您的用例。UTF-8 是最常见的，您可能只是想使用它，但如果您想确保您正在写入的文件将在同一系统的文本编辑器中正确显示，即使您在设备上运行它一个不太常见的系统编码，如 UTF-16，您可能希望使用系统的默认编码（如果系统具有无法对您的字符串进行编码的默认编码，这当然会失败）。

换句话说，您几乎肯定想做以下事情之一：

一种）

`f.write(textwrap.dedent(the_string).encode('utf-8'))`

b)

```
import sys
f.write(textwrap.dedent(the_string).encode(sys.getdefaultencoding())) 
```

如果你认为这是一个相当烦人且复杂的负载，让你的头脑开始执行将一些非 ASCII 文本写入文件的相当基本的任务，那么 - 我同意你的看法！当我开始使用 Python（这是我的第一门编程语言）时，我在理解 unicode、字符串编码以及与之相关的 Python 类型和方法方面*遇到了很多困难。**然而，复杂性并不是 Python 的错——这取决于计算机对文本进行编码的方式，尤其是文本有多种编码*这一事实。*不同系列的字节*可以表示*同一系列的字符*，取决于正在使用的编码。这使得 Python 不可能只对你隐瞒字符串编码的具体细节，并且像我一样“自动做一些明智的事情”，作为一个菜鸟，天真地希望并期待它会。

如果您要编写大量代码，涉及从 Web 获取和使用可能包含非 ASCII 字符的文本数据，我建议您彻底阅读该主题并深入了解它，两者都来自一般和特定于 Python 的观点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:01:50.350

您可以尝试使用 unicode 字符串，如下所示：

jstring = u"桜の花びらたち"

看到这个：[http ://docs.python.org/tutorial/introduction.html#unicode-strings](http://docs.python.org/tutorial/introduction.html#unicode-strings)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:17:00.350

在使用另一种语言（或编码）并写入文件时，我发现对我有用的是使用`.encode`. 例如：

```
f.write( the_string.encode('utf-8') ) 
```

# java - 为什么 GC 不收集我的对象？

> ID：13500132
> 
> 赞同：7
> 
> 时间：2012-11-21T18:54:14.377
> 
> 标签：java, memory-leaks, garbage-collection, jmap, jhat

我有一个 java 程序，它不断调用`java.util.zip`压缩/解压缩数据。它会在几秒钟内耗尽内存。我有一个内存转储，`jmap`我正在查看它`jhat`。

终结器摘要显示`Total instances pending finalization: 0`。如果我理解正确，我没有任何对象 (1) 具有 finalize() 方法，(2) 已被 GC 标记并且 (3) 正在等待最终确定。这似乎很好。

当我查看特定对象时，对该对象的唯一引用是`java.lang.ref.Finalizer`. Finalizer 对象是为每个具有 finalize() 方法的对象创建的，无论该对象是否被 GC 处理。所以看起来没有什么能阻止这个`Deflater`对象被 GC 处理。

> **0x7f4aeb7a35d0 处的对象**
> 
> java.util.zip.Deflater@0x7f4aeb7a35d0 的实例（51 字节）
> 
> **对该对象的引用：**
> 
> java.lang.ref.Finalizer@0x7f4aeb8607c8 (64 bytes) : 字段引用

程序在运行中被 暂停`System.in.read()`。一段时间后内存使用量不会下降。

更新：

我应该说清楚。内存转储显示许多对象没有经过 GC，但没有其他对象（终结器对象除外）引用它们。我试图找出为什么他们没有被 GC'ed。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T11:29:30.910

您确定您关闭了流并`end`在 deflater 上调用了吗？如果这是您已经尝试过的简单建议，我很抱歉，但是`Deflater`在不立即调用`end`它时使用时有很多关于内存泄漏的投诉，例如：

*   [http://www-01.ibm.com/support/docview.wss?uid=swg21227106](http://www-01.ibm.com/support/docview.wss?uid=swg21227106)
*   [http://bugs.sun.com/view_bug.do?bug_id=6734186](http://bugs.sun.com/view_bug.do?bug_id=6734186) (1.5)
*   [java使用过多的内存](https://stackoverflow.com/questions/6274696/excessive-memory-use-by-java)
*   [http://bugs.sun.com/view_bug.do?bug_id=4797189](http://bugs.sun.com/view_bug.do?bug_id=4797189)
*   [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6293787](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6293787)
*   [http://kohsuke.org/2011/11/04/quiz-answer-memory-leak-in-java/](http://kohsuke.org/2011/11/04/quiz-answer-memory-leak-in-java/)

根本原因显然是当涉及本机元素使用的内存时，收集器无法跟上应用程序的速度。这也解释了您在分析时看到的行为：内存已准备好被回收，但回收的速度不够快。

由于您没有`Deflator`直接使用 a 而是通过 Apache Thrift 编写的，因此请尝试确定该库中的哪个方法负责结束 deflator，并确保您调用了该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T01:45:30.240

基本问题是您没有从 C 堆中释放对象。java.util.zip 中的许多类都使用`Deflater`. Deflater 维护对 C 堆中数据的引用。 **您的代码可能没有调用`close()`**或`ZipOutputStream`，或者`DeflaterOutputStream`它没有调用`end()`。`Deflater`

（如果您将自己的传递`Deflater`给`ZipOutputStream`or `DeflaterOutputStream`，则您有责任调用`end()`Deflater。）

GC 在您的情况下的帮助有限，因为必须取消引用并最终确定流。这可能需要多次 GC 扫描。我在 Jetty 上[遇到](http://jira.codehaus.org/browse/JETTY-1167)了类似的问题，并提出了解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T16:28:44.923

### 添加到 Marian-Daniel Craciunescu 的回答

我确实遇到了另一种使用方式的问题。

我找到的解决方案如下：

*   将对象放入地图或您可以轻松删除其引用的地方
*   *也*将对象放入WeakReference 以使用它
*   照常使用您的参考资料
*   从不再使用的地图中删除参考

### 小心继承的引用

您的对象很有可能在另一个对象中被“隐藏内部引用”，使用调试器并“扩​​展”所有使用它的对象。

您永远不会知道GC*何时运行，也不**知道*它将处理什么（使用中的对象除外）。

### 有用的链接

您应该阅读（如果尚未完成）这篇关于 WeakReferences 的文章：[了解 Java 的参考类：SoftReference、WeakReference 和 PhantomReference](https://stackoverflow.com/questions/3329691/understanding-javas-reference-classes-softreference-weakreference-and-phanto)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T13:52:26.370

首先，在考虑内存泄漏之前，我们应该尝试了解内存需求对于您正在执行的处理是否正常。JVM 可用的内存大小是多少，即 -XmX。如果增加内存大小或减小正在处理的文件大小是否有效？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-28T12:08:57.650

也许你应该为你的对象使用 Wea​​kReference。这样 GC 可以很快地完成（）你的对象

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ref/WeakReference.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ref/WeakReference.html) http://weblogs.java.net/blog/2006/05/04/understanding-weak -参考

# php - 将日期转换为其他时区时，您需要存储时间吗？

> ID：13500133
> 
> 赞同：0
> 
> 时间：2012-11-21T18:54:17.497
> 
> 标签：php, datetime, timezone

以后使用 PHP 的[DateTime](http://www.php.net/manual/en/datetime.construct.php)将存储的日期转换为不同的时区时，是否需要存储时间信息（例如，2012-12-31 00:00:00 而不仅仅是 2012-12-31）？看来，如果我只存储日期，时区转换是不准确的，所以我不确定是否真的需要时间信息，或者我只是错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:01:24.640

除了节省时间之外，您还应该保存您正在节省的那个日期的当前时区。这将有效地确保当您更改到其他时区时，您知道该以什么为基准。

前任：`2012-11-21T15:52:01+0000`

[更多信息在这里](http://php.net/manual/en/class.datetime.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:24:00.460

时区转换按小时偏移量工作 - 如果没有存储时间（至少几个小时），您将无法准确计算差异。

一个要考虑的例子 - 假设您想按天对数据进行分组，日期存储在`UTC`但您的客户在`PST`.

`2012-12-31 08:00:00`在 中创建了一行`UTC`，但您存储了`2012-12-31`。

```
$date = new DateTime('2012-12-31', new DateTimeZone('UTC') );
echo $date->setTimezone( new DateTimeZone('America/Los_Angeles') )->format('Y-m-d');
//2012-12-30

$datetime = new DateTime('2012-12-31 08:00:00', new DateTimeZone('UTC') );
echo $datetime->setTimezone( new DateTimeZone('America/Los_Angeles') )->format('Y-m-d');
//2012-12-31 
```

日期应该反映`2012-12-31`在 PST 中，但如果没有小时偏移量，它将被错误地转换。

此外，正如塞缪尔库克所回答的那样，除非您明确地将时区存储`datetime`在数据库中的单个时区下，否则您也应该存储时区，这样您就知道您的转换来源。

# c# - 为什么我的 CollectionChanged 事件为空？

> ID：13500135
> 
> 赞同：0
> 
> 时间：2012-11-21T18:54:29.383
> 
> 标签：c#, wpf, events, data-binding, datagrid

我的绑定是这样设置的：

```
<Grid Name="motherGrid">
<Grid.RowDefinitions>
    <RowDefinition />
    <RowDefinition />
</Grid.RowDefinitions>
<DataGrid ItemsSource="{Binding}"  Name="LoadGrid" Grid.Row="0"></DataGrid>
<Button Grid.Row="1" Click="Button_Click_1">Hello</Button>
</Grid> 
```

在后面的代码中，我将 datacontext 设置为 VM 对象，其中包含一个可枚举的负载列表

```
 motherGrid.DataContext = VM.Loads; 
```

当按下按钮时，调用 AddLoad 方法

```
public void AddLoad(Load load)
{
   Loads.Add(load);
   if (CollectionChanged != null)
       CollectionChanged(this, new NotifyCollectionChangedEventArgs(new NotifyCollectionChangedAction()));
} 
```

但是，CollectionChanged 事件确实为 null，因此从未触发该事件。如何将 DataGrid 添加到 CollectionChanged 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:23:59.987

根据评论，我改变了这个：

```
public List<Load> Loads = new List<Load>(); 
```

对此：

```
public ObservableCollection<Load> Loads = new ObservableCollection<Load>(); 
```

# winapi - 在 MFC 应用程序中显示来自不同 DLL 的对话框资源

> ID：13500136
> 
> 赞同：-1
> 
> 时间：2012-11-21T18:54:31.773
> 
> 标签：winapi, dll, mfc, embedded-resource

我有一个 Win32 资源 DLL（无 MFC），其中有一个对话框。

`LoadLibrary`我可以使用MFC 应用程序加载 Win32 dll 。

加载 DLL 后，如何调出对话框以将其显示给用户？

如果有人可以共享代码来执行此操作，我将不胜感激。

我记得使用[AfxGetResourceHandle](http://msdn.microsoft.com/en-us/library/d8ws31ff%28v=vs.100%29.aspx)来做这种事情，但现在不记得了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:40:10.240

基本步骤是：

1.  `LoadLibrary`（正如你所做的那样）
2.  `FindResource`（给你一个 HRSRC）
3.  `LoadResource`（给你一个 HGLOBAL）
4.  `LockResource`（为您提供一个 LPVOID，您可以将其转换为 LPCDLGTEMPLATE）
5.  `CreateDialogIndirectParam`（创建对话框）

# python - 使用 Django / Python 读取多维发布请求

> ID：13500137
> 
> 赞同：1
> 
> 时间：2012-11-21T18:54:40.403
> 
> 标签：python, django, post, multidimensional-array

我正在发送这样的帖子请求：

```
photo[1][id] = 1234
photo[1][size] = 4x4
photo[1][quantity] = 2
photo[2][id] = 4567
photo[2][size] = 4x6
photo[2][quantity] = 1
... 
```

使用 Django/Python 读取这些数据的最佳方法是什么？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T22:34:04.027

您可能想尝试[querystring-parser](https://github.com/bernii/querystring-parser)。

例如，如果您通过 POST 将以下表单提交到您的视图：

```
<input name="photo['1']['id']"       value="1234">
<input name="photo['1']['size']"     value="4x4">
<input name="photo['1']['quantity']" value="2">
<input name="photo['2']['id']"       value="4567">
<input name="photo['2']['size']"     value="4x6">
<input name="photo['2']['quantity']" value="1"> 
```

在您看来，您可以像这样解析它：

```
from querystring_parser import parser
post_dict = parser.parse(request.POST.urlencode())
print post_dict
# {u'csrfmiddlewaretoken': u'<crazy hash goes here>', 
#  u'photo': 
#    {1: {u'id': u'1234', u'size': u'4x4', u'quantity': u'2'},
#     2: {u'id': u'4567', u'size': u'4x6', u'quantity': u'1'}
#  } 
```

访问第一张照片的大小就像`post_dic[1]['size']`

# asp.net - ASP.Net：标签内的 Svg 图像。

> ID：13500142
> 
> 赞同：0
> 
> 时间：2012-11-21T18:54:52.920
> 
> 标签：asp.net, html, svg

我有一个 svg 图像，我想在标签中显示，但不知何故，它没有在任何浏览器中呈现。我什至尝试将以下行添加到 web.config 文件中：

```
 <staticContent>
  <mimeMap fileExtension=".svg" mimeType="image/svg+xml"/>
</staticContent> 
```

还是不行。谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:08:02.183

[http://www.sitepoint.com/add-svg-to-web-page/](http://www.sitepoint.com/add-svg-to-web-page/)上的项目#5

1.  使用 <img> 标签

SVG 可以像任何其他图像一样添加到您的网页中：查看原图？

```
<img src="image.svg" /> 
```

如果您需要，可以添加通常的宽度、高度、alt 和其他属性。

您可能想知道为什么 img 在此列表中没有排名第一。出于安全原因，当使用 img 标签将 SVG 脚本、链接和其他类型的交互添加到您的页面时，浏览器将禁用它们。此外，IE9、Chrome 和 Safari 不会将样式表规则应用于 SVG，如果它们是在单独的 CSS 文件中定义的。

也许作为一种解决方法，您可以执行以下操作：

```
<ItemTemplate>
    <%# Container.DataItem.ToString().Contains(".svg") ? 
            "<object type='image/svg+xml' data='" + Container.DataItem + "'>Your browser does not support SVG</object>" : 
            "<img src='" + Container.DataItem + "' />"
</ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T16:20:29.177

在您的“aspx”页面中使用：

```
<asp:Repeater ID="RepeaterImages" runat="server">
    <ItemTemplate>
        <asp:Image ID="Image" runat="server" ImageUrl='<%# Container.DataItem %>' />
    </ItemTemplate>
</asp:Repeater> 
```

在您的代码文件“aspx.cs”中：

```
protected void Page_Load(object sender, EventArgs e)
    {

string[] filePaths = Directory.GetFiles(@"C:\YourFolder\");
                List<String> images = new List<string>(filePaths.Count());
                foreach (string item in filePaths)
                {
                         images.Add(String.Format("~/yourVirtualImgFolder/"+Path.GetFileName(item)));
                }

                RepeaterImages.DataSource = images;
                RepeaterImages.DataBind();
} 
```

请注意，您应该创建一个虚拟文件夹“ **yourVirtualFolder** ” [http://msdn.microsoft.com/en-us/library/ms178477.aspx#](http://msdn.microsoft.com/en-us/library/ms178477.aspx#)

# list - Prolog合并列表的两个元素

> ID：13500144
> 
> 赞同：0
> 
> 时间：2012-11-21T18:54:56.643
> 
> 标签：list, prolog

我必须像这样合并列表的两个相等元素：

```
[1,2,3,4,5,5,6,7,5,6] => [1,2,3,4,55,6,7,5,6] 
```

我怎么能在序言中做到这一点？谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:09:23.257

滥用 Prolog 灵活的数据表示，我们可以这样做：

```
fuse_consec([E,E|L], E, [N|F]) :-
    !, fuse_consec([E|L], E, [R|F]),
    atom_concat(E, R, C),
    atom_number(C, N).
fuse_consec([X|L], E, [X|F]) :-
    fuse_consec(L, E, F).
fuse_consec([], _, []). 
```

测试

```
?- fuse_consec([1,2,3,4,5,5,6,7,5,6],5,L).
L = [1, 2, 3, 4, 55, 6, 7, 5, 6]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:37:24.547

类似的东西？

```
my_merge(N, L, R) :-
    merge(N, L, [], R).

merge(_, [], R, R1) :-
    reverse(R, R1).

merge(N, [M | T], CR, FR) :-
    N \= M,
    merge(N, T, [M |CR], FR).

merge(N, [N | T], CR, FR) :-
    merge_(N, T, N, CR, FR).

merge_(N, [M| T], X, CR, FR) :-
    M \= N,
    merge(N, [M | T], [X | CR], FR).

merge_(N, [N| T], X, CR, FR) :-
    X1 is X * 10 + N,
    merge_(N, T, X1, CR, FR).

merge_(_N, [], X, CR, FR) :-
    reverse([X | CR], FR). 
```

# c# - 获取 Yelp 好友列表

> ID：13500149
> 
> 赞同：0
> 
> 时间：2012-11-21T18:55:21.670
> 
> 标签：c#, asp.net, .net, yelp

因此，我的任务是设计一个利用 Yelp 的朋友和关注者列表的 Web 应用程序。

Yelp 有自己的 API，但是，我在 API 中找不到任何可以让我查询仅列出 Yelp 中用户的朋友和关注者的搜索结果的内容。API是否缺少我的东西，或者是否有不同的方式来执行此任务？

是否有可能将网站与个人用户的“朋友和追随者”数据库集成？

API 文档可在以下位置找到：[http ://www.yelp.com/developers/documentation/v2/overview](http://www.yelp.com/developers/documentation/v2/overview)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T22:00:34.990

刚刚通过一个相当全面的过程找到了我自己的答案。

Yelp API 不允许对您的朋友进行任何访问，因为所述数据是通过 Facebook 附加的。使用 Facebook Graph API 和 Login API 允许 Yelp 用户使用他们的 Facebook 个人资料登录，然后使用 Graph API 拉取与该用户帐户关联的所有朋友。收集到这些信息后，您可以将 Yelp API 与 reviews.user 一起使用，并与从 Graph API 收集的朋友数据相匹配，以提取适当的业务和评论。

希望这对其他人有帮助。

# android - Fragment中的ScrollView保留位置

> ID：13500160
> 
> 赞同：6
> 
> 时间：2012-11-21T18:56:10.293
> 
> 标签：android, scrollview, fragment

我有 2 个片段 A 和 B。

A 包含一个 ScrollView，如果我向下滚动并按下一个按钮 Fragment A 被 Fragment B 替换。现在我按下后退按钮，Fragment A 返回到屏幕，但 ScrollView 与它的位置不同我切换到片段 B。

但是，当我对包含 ListView 的 Fragment（不是 ListFragment！）执行相同操作时，滚动位置会保持不变。

我的 ScrollView 有什么特别之处吗？

问候，丹尼尔。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-06-27T03:01:46.060

两者`ScrollView`和`NestedSrollView`都有扩展的内部类，`BaseSavedState`从中保存`scrollPosition`. 你只需要给你的滚动视图一个***id***来自动保存和恢复它的实例状态（你不需要手动调用它）..[回到像 ListView 一样的 prev Fragment 后我可以保持 ScrollView 的位置吗？](https://stackoverflow.com/questions/26070595/could-i-keep-position-of-scrollview-after-back-to-prev-fragment-like-listview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T11:00:31.683

正如 Nutomic 所说，需要保存位置，但即便如此，在 onCreate、onCreateView 或 onActivityCreated 中，ScrollView 的高度仍将为 0

我最终使用了 OnPreDrawListener 并且效果很好。

```
scrollView.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
    @Override
    public boolean onPreDraw() {
        scrollView.scrollTo(0, position);
        mView.getViewTreeObserver().removeOnPreDrawListener(this);
        return true;
    }
}); 
```

# c++ - 为什么 boost::find_first 对其输入进行非常量引用？

> ID：13500163
> 
> 赞同：5
> 
> 时间：2012-11-21T18:56:20.277
> 
> 标签：c++, string, boost

Boost 的[`find_first`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/algorithm/find_first.html)算法是 C 算法的升级版`strstr()`，但是为什么大海捞针——搜索空间——作为**非常量**引用传入呢？匹配范围在单独的`iterator_range`对象中返回，因此它不是按引用输出的问题。

它防止调用由[make_iterator_range](http://www.boost.org/doc/libs/1_52_0/libs/range/doc/html/range/reference/utilities/iterator_range.html)创建的临时范围。

```
const std::string str("haystack");
const std::string findstr("stack");

boost::sub_range<const std::string> match = boost::algorithm::find_first(
        boost::make_iterator_range(str),
        boost::make_iterator_range(findstr)); 
```

相反，必须显式创建表示源范围的局部变量：

```
const std::string str("haystack");
const std::string findstr("stack");

boost::sub_range<const std::string> haystack = boost::make_iterator_range(str);

boost::sub_range<const std::string> match = boost::algorithm::find_first(
        haystack,
        boost::make_iterator_range(findstr)); 
```

（这同样适用于[boost/algorithm/string/find.hpp](http://www.boost.org/doc/libs/1_52_0/doc/html/string_algo/reference.html#header.boost.algorithm.string.find_hpp)中的其他函数，即`find`, `ifind_first`, `find_last`, `ifind_last`, `find_nth`, `ifind_nth`, `find_head`, `find_tail`& `find_token`）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T19:01:32.157

这是为了确保调用后返回的范围仍然有效`find_first`。

虽然上面的初始情况很好，但以下情况会导致 a`match`指向已损坏的临时字符串：

```
boost::sub_range<const std::string> match = boost::algorithm::find_first(
        boost::make_iterator_range(std::string("haystack"),
        boost::make_iterator_range(std::string("stack")); 
```

haystack 是非常量的要求阻止它绑定到临时对象（右值），该对象在`find_first`' 返回时被销毁并使`match`' 的迭代器无效。

# loops - vbScript - 不是“或”时做

> ID：13500165
> 
> 赞同：0
> 
> 时间：2012-11-21T18:56:42.323
> 
> 标签：loops, vbscript, inputbox

我知道我昨天以某种方式进行了这项工作，但一天结束时我错误地关闭了更改而没有保存。今天我不知道我做错了什么。我有一个 InputBox 循环，只想接受 2 个可能的答案，在这种情况下，苹果或橙色应该退出循环。

```
 Do
    myValue = InputBox("Enter something")
    Loop While Not myValue = "apple" Or myValue = "orange" 
```

如果输入第一个值而不是第二个值，则上述内容只会退出循环。如果我为第二个值添加“Not”以及如下所示，那么无论我输入什么，它都不会退出循环。

```
 Do
    myValue = InputBox("Enter something")
    Loop While Not myValue = "apple" Or Not myValue = "orange" 
```

我知道这必须是显而易见的，但我认为我已经看同样的代码太久了，看不到它。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:00:40.417

你可能想要一个`and`...

```
Do
myValue = InputBox("Enter something")
Loop While Not myValue = "apple" And Not myValue = "orange" 
```

Not ands 和 Not ors*令人*困惑，但如果你解决它，你会弄明白的。示例输入：苹果

`NOT "apple" = "apple"`是`FALSE`，并且`NOT "apple" = "orange"`是`TRUE`。如果您使用`OR`,`TRUE or FALSE`计算结果为`TRUE`。因此循环继续。但是，如果您使用`AND`，则整个语句的计算结果为`FALSE`，这允许退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:16:33.640

为什么不将英语翻译成 VBScript：

```
I want to ask the user until the input is "apple" or "orange" 
```

==>

```
 Dim sInp
  Do
     sInp = InputBox("Enter something")
     WScript.Echo "+", sInp
  Loop Until sInp = "apple" Or sInp = "orange"
  WScript.Echo sInp 
```

样本输出：

```
+ banana
+ apple
apple
=============

+ pear
+ orange
orange
============= 
```

# visual-studio-2012 - Visual Studio 2012 迁移后 DLL 未发现错误

> ID：13500166
> 
> 赞同：0
> 
> 时间：2012-11-21T18:56:56.500
> 
> 标签：visual-studio-2012

我有一个正在尝试迁移到 Visual Studio 2012 的测试解决方案。在 VS 2012 中打开它后，对项目进行了一些升级。但是现在我有 2 个引用相同 dll 但版本不同的项目：Microsoft.VisualStudio.TestTools.UITest.Extension，版本**10** .0.0.0 和 * *11* *0.0.0 它编译得很好，但是当我运行测试时出现异常：

> System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.VisualStudio.TestTools.UITest.Extension，Version= **10** .0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。该系统找不到指定的文件。

在VS 2010中我得到了其他方式

> System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.VisualStudio.TestTools.UITesting，版本= **11** .0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。该系统找不到指定的文件。

所以我真的很困惑：如果我想让它们在两个版本的 Visual Studio 中工作，我应该如何处理这个不同的版本？

# c# - 如何根据列表样式的键创建串联的字符串值列表？

> ID：13500167
> 
> 赞同：1
> 
> 时间：2012-11-21T18:56:58.027
> 
> 标签：c#, list, dictionary, key-value, string-concatenation

我有一本包含以下数据的字典：

```
Key    Value
1      Introduction
1.1    General
1.1.1  Scope
1.2    Expectations
2      Background
2.1    Early Development
... 
```

我想做的是找出一种方法 - 在 C# 中 - 创建一个新列表（或附加到一个数组），其值基于列表样式键连接，如下所示：

```
Key    Value              Concatenation
1      Introduction       Introduction
1.1    General            Introduction - General
1.1.1  Scope              Indroduction - General - Scope
1.2    Expectations       Introduction - Expectations
2      Background         Background
2.1    Early Development  Background - Early Development
... 
```

键的子级别没有固定数量，但它始终为数字格式。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:37:08.703

这显然需要清理并提高效率，但您可以使用递归方法非常简单地做到这一点：

```
static string GetConcatenationRecursively(Dictionary<string, string> d, string key)
{
    if (key.Length == 1)
    {
        return d[key];
    }
    else
    {
        return string.Format(
            "{0} - {1}",
            GetConcatenationRecursively(d, key.Substring(0, key.LastIndexOf('.'))),
            d[key]);
    }
} 
```

这将被称为：

```
Dictionary<string, string> d = new Dictionary<string, string>();
d.Add("1", "Introduction");
d.Add("1.1", "General");
d.Add("1.1.1", "Scope");
d.Add("1.2", "Expectations");
d.Add("2", "Background");
d.Add("2.1", "Early Development");

List<Tuple<string, string, string>> list = new List<Tuple<string, string, string>>();
foreach (string key in d.Keys)
{
    list.Add(new Tuple<string, string, string>(key, d[key], GetConcatenationRecursively(d, key)));
} 
```

也需要大量的错误处理；这显然假设了一个格式良好的输入。但是你应该可以从这里拿走它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:23:00.043

这个解决方案可能不是您能想到的最漂亮的解决方案，但如果您知道您的要求真的那么简单，您可能不想过度设计它，而直接采用这种方法 - 请注意大多数代码只是正确呈现“ - ”部分的样板；实际算法部分代码不多：

```
var dic = new Dictionary<string, string>();
      dic.Add("1", "Introduction");
      dic.Add("1.1", "General");
      dic.Add("1.1.1", "Scope");
      dic.Add("1.2", "Expectations");
      dic.Add("2", "Background");
      dic.Add("2.1", "Early Development");

      foreach (var kvp in dic)
      {
        string item = String.Empty;

        int length = kvp.Key.Length - 2;
        while (length > 0)
        {
          var parent = dic[kvp.Key.Substring(0, length)];
          if (!String.IsNullOrEmpty(item))
            item = String.Format("{0} - {1}", parent, item);
          else
            item = parent;
          length -= 2;
        }
        if (!String.IsNullOrEmpty(item))
          item = String.Format("{0} - {1}", item, kvp.Value);
        else
          item = kvp.Value;
        Console.WriteLine(item);
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:27:44.770

如果您只需要输出显示，请使用类似**Maate**的答案。如果你在一个集合中需要它，下面是一个开始（但它只升级了一个级别）：

```
Dictionary<string, string> d = new Dictionary<string, string>();
d.Add("1", "Introduction");
d.Add("1.1", "General");
d.Add("1.1.1", "Scope");
d.Add("1.2", "Expectations");
d.Add("2", "Background");
d.Add("2.1", "Early Development");

var links = from key in d.Keys
            from subKey in d.Keys
            where subKey.StartsWith(key) && (subKey.Length == key.Length + 2)
            select new
            {
                Key = key,
                SubKey = subKey
            };

var a = from key in d.Keys
        join link in links on key equals link.SubKey into lj
        from sublink in lj.DefaultIfEmpty()
        select new
        {
            Key = key,
            Value = d[key],
            Concatenation = (sublink == null ? string.Empty : d[sublink.Key] + " - ") + d[key]
        }; 
```

它获取链接，然后使用从字典到链接的左连接来获取连接。就像我说的，它只升级了一个级别，所以这不是一个完整的解决方案。需要无限递归。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-21T19:01:54.937

在字符串中放置一个分隔符，您可以将其分开，通常是分号 (;)。但是你可以使用更多。

如果您使用分号，请确保将它们从字符串中剥离出来。

# asp.net - 创建多个动态文本框 - ASP.NET、VB.NET

> ID：13500168
> 
> 赞同：1
> 
> 时间：2012-11-21T18:57:02.157
> 
> 标签：asp.net, arrays, vb.net, dynamic-controls

我正在构建一个网站，我希望用户能够访问一个表单，并且在该表单上他们可以在文本框中输入一些文本，然后单击提交按钮。当他们单击提交按钮时，我希望在单独的表单上创建一个动态文本框，其中包含来自带有按钮的前一个表单上的文本框的文本。我希望这是有道理的 ： /

我的问题是……这可能吗？我能够通过单击按钮获得动态文本框（或标签……以首选为准）并显示用户输入的文本，但它们都在同一个表单中。我读过一些提到引用表格的论坛。

另外，在不使用数组的情况下，能够创建多个动态控件（文本框、标签等）的“首选”方法是什么？我的意思是......当用户单击按钮并在另一个窗体上创建控件时，我希望它留在那里，然后如果另一个用户执行相同的操作，那么新的动态控件将被放置在先前的顶部创建了一个。

现在我有一些基本的代码来创建一个文本框，但我认为这不会起作用，因为我在创建它时并不完全知道它的 ID，所以我正在考虑做一个数组，但我已经读过显然更新的VB 版本不支持数组。

我在项目中提到的 2 个页面称为 Default.aspx 和 SubmitStory.aspx。

非常感谢任何有用的信息！感谢这位初级程序员！

# java - 在构造函数之外的方法中使用构造函数中的变量

> ID：13500170
> 
> 赞同：4
> 
> 时间：2012-11-21T18:57:04.073
> 
> 标签：java, methods, constructor

如果我有这样的构造函数：

```
 public Constructor (int a, int b){

        int c =  a;
        int d =  b; 
    } 
```

然后，我如何在与构造函数相同的类中的方法中使用变量 c 和 d，因为尝试仅在方法中使用变量名称似乎不起作用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T18:58:07.400

事实上，您的代码将无法编译 -`int c = int a`无效。

我假设您的意思是： - `int c = a;`。

> 然后我如何在与构造函数相同的类中的方法中使用变量 c 和 d

您不能，因为您已将它们声明为局部变量，其范围在构造函数结束执行时结束。

您应该将它们声明为实例变量。

```
public class MyClass {
    int c;
    int d;

    public MyClass(int a, int b){

        this.c = a;
        this.d = b; 
    }

    public void print() {
        System.out.println(c + " : " + d);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:09:26.327

您需要在构造函数之外将变量声明为类成员。换句话说，在构造函数之外声明 c 和 d ，如下所示：

```
int c;
int d;

public Constructor (int a, int b) {

        c = a;
        d = b; 
} 
```

# jquery - 如何调查 - 未捕获的错误：语法错误，无法识别的表达式

> ID：13500172
> 
> 赞同：0
> 
> 时间：2012-11-21T18:57:20.500
> 
> 标签：jquery, asp.net-mvc

我正在修改一个使用大量 JQuery 的 ASP.NET MVC 站点。当我在 Chrome 中查看“源”时，我的一个 .cshtml 文件中有一条错误消息“未捕获的**错误：语法错误，无法识别的表达式**”。该消息不在任何 JQuery 或 JavaScript 代码附近。它出现在对 .CSS 文件的引用上方。

_Layout.cshtml 代码 -

```
<head>
<title>My Title</title>
<link href="@Url.Content("~/Content/myCSS.css")" rel="stylesheet" type="text/css" /> 
```

渲染代码 -

```
<head>

    **Uncaught Error: Syntax error, unrecognized expression**

<link href="/Content/myCSS.css" rel="stylesheet" type="text/css" /> 
```

我不确定这个错误是否会导致网站出现实际问题，因为它正在建设中。通常这样的错误出现在 JQuery 代码周围，所以我可以更容易地判断问题可能与什么有关。我想知道 -**我如何调查导致此问题的原因？**有什么办法可以说明究竟是什么导致了这个问题？谢谢！

# floating-point - 是否可以估计 32 位浮点数中准确的位数？

> ID：13500175
> 
> 赞同：0
> 
> 时间：2012-11-21T18:57:36.917
> 
> 标签：floating-point, cpu

我想我理解浮点数中的精度意味着什么，因为您只能依赖尾数中存储的内容。

如果我理解正确，如果您将 0.000001 100000 次加到 0，则可能会开始出现错误。

有没有办法通过在 32 位浮点数中使用更少的数字来防止此错误、预测它或减轻它？

编辑：例如，在星际争霸 2 中，仅传达单位命令，而不传达游戏状态。仍然所有玩家都认为同样的事情。浮点错误的累积是可以避免的，但是如何，以什么成本或约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:51:59.647

当您在正确实现的浮点中执行单个操作并且舍入模式是舍入到最近（最常见）时，错误最多是可表示数字之间距离的一半。这是因为，在四舍五入模式下，运算返回最接近精确数学结果的可表示结果。（这称为“正确舍入”。）

这包括诸如将数字（例如“0.000001”或“1e-5”）转换为浮点数等操作。但是，某些操作，特别是用于复杂操作（如正弦或对数）的库例程，通常并不总是返回正确的舍入结果（由于这样做的困难）。因此，您必须在依赖错误界限之前检查您的实现规范。

32 位 IEEE 754 浮点使用一个符号位、八个指数位（表示从 -126 到 127 的正常指数 [of 2]）和 23 个显式有效位。（专有名词是有效位。尾数是对数的小数部分。）完整有效位有 24 位，因为有一个隐含的前导位（次正规数除外，幅度低于 2 ^(-126)）。因此，一个可表示数字和下一个更高的可表示数字之间的距离是前一位的值的 2 ^(-23)倍。当然，该值是不大于该数字的 2 的最高幂。（例如，对于 5，前导位的值为 4，因此最低有效位的值为 4•2 ^(-23) = 2 ^(-21). 因此，如果单个操作的精确数学结果约为 5，则最大误差将为 2 ^(-22)。）

当您执行多个操作时，错误很大程度上取决于执行的操作和所涉及的值。必须进行仔细分析以确定误差范围。根据操作的不同，错误可能会合并并被放大，以至于错误甚至可以变得无限。

请注意，如果您尝试将 0.000001 相加 100,000 次，则会出现两种错误。首先，0.000001 不能完全用二进制浮点表示，因此将该数字转换为浮点的操作存在错误。其次，每次加法都可能有舍入误差。

您还提到在不同的流程中维护相同的信息。这是一个与边界误差分开但重叠的问题。如果进程在相同的平台上运行，那么保持它们同步可能并不难，方法是让它们都使用相同的数据、使用相同的硬件和库执行相同的操作。这是因为浮点错误通常不是随机的；对相同的数据执行相同的操作将始终返回相同的结果。（当硬件或库行为未完全指定并且允许依赖于不相关的数据时，可能会出现一些问题，尽管这往往是理论上的问题而不是实践中的问题。）请注意，相同的平台意味着完全相同。

如果进程在不同的平台上运行，则很难保持它们同步。即使使用从相同源编译的软件运行，编译器也可以使用不同的浮点运算选择来实现高级语言。其中最臭名昭著的是使用比高级语言要求更高的精度，这是某些语言所允许的。

IEEE 754-2008 标准的第 11 条包含有关生成可重现浮点结果的信息。计算平台可能无法提供必要的保证来支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:52:57.400

## 阻止

使用多精度浮点库（二进制或十进制取决于是否始终准确表示十进制常量对您很重要），或有理数的实现。

## 预测

这就是[数值稳定性](http://en.wikipedia.org/wiki/Numerical_stability)的艺术。有一些基本原则，但在编程时记住它们并不总是那么容易。考虑[求解](http://en.wikipedia.org/wiki/Loss_of_significance#A_better_algorithm)一个二次方程的例子。

## 通过在 32 位浮点数中使用更少的数字来缓解它

当您说“数字”时，您可能指的是十进制数字。首先要了解二进制浮点是它以二进制表示，并且它会导致混淆以十进制数字来思考。

为了更直接地回答那部分，隐藏一些精确度只会掩盖问题，并不能解决问题。这几乎总是一个坏主意。

* * *

关于您的星际争霸 2 示例，关于 IEEE 754 浮点的一个典型迷信是它不是确定性的，好像它可以在两台计算机上执行相同的计算（例如，网络游戏中的两个 StarCaft 2 客户端）给出不同的结果。好吧，IEEE 754 是确定性的。浮点计算与使用实数完成的相同计算略有不同，但对于两个连续运行或运行相同二进制文件的两台不同计算机，只要每台计算机上的处理器正确实现 IEEE 754，计算总是相同的标准（他们基本上是这样做的）。

# python - 从一对字典（列名、值）填充表，如果未找到则为 0 - Python 和 sqlite3

> ID：13500186
> 
> 赞同：1
> 
> 时间：2012-11-21T18:58:26.327
> 
> 标签：python, dictionary, sqlite

我有一个字典，其中包含一个 itemID 作为键，然后是一堆像这样的对：

```
(91311703, [(3300, 2), (3301, 3), (3327, 3), (3330, 2), (3386, 2), (3392, 2), (3
402, 3), (3413, 3), (3426, 3), (3449, 3)]) 
```

每对中的第一个数字是唯一的 ID 号，第二个数字是 1-5 之间的值。我想使用 sqlite3 将其写入表中，以便在此示例中，有一行 itemID 为 91311703，然后在 3300 列中的值为 2，在 3301 列中为 3，在 3327 列中为 3，等等

不同之处在于，该表将包含每个可能的 ID 号的列，总共大约 200-300 个。如果我传递的 dict 不包含 ID 号，我希望它为该列输入 0，因此在此示例中，列 3302-3326、3328、3329、3331-3385 等都将获得 0 值。

我想到的一种可能性是为每列创建默认值为 0 的表，然后当我传入 dict 时，它只会更新它包含的 ID 号列的值。不过，这似乎是一种糟糕的编码方式，所以我愿意接受建议。另一种选择是`if`，`else`如果在字典中找到 ID 号，则使用其对中的值，否则使用 0，但这似乎也不是一个很好的方法。

我需要什么 Python + sqlite3 代码来查看此字典并将值分配给与此字典中的对中的 ID 号匹配的列？对于在字典中找不到 ID 号的那些列，您有什么建议？我的目标是每个 itemID 有一行（即我的字典中每个键 1 行。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:47:20.957

您可以动态创建 SQL，仅设置实际需要的那些列：

```
INSERT INTO MyTable (itemID, col3300, col3301, col3327, col3330, ...)
VALUES (91311703, 2, 3, 3, 2, ...) 
```

或对所有列使用命令，并将未使用的列设置为`0`：

```
INSERT INTO MyTable (itemID, col3300, col3301, col3302, col3303, ...)
VALUES (91311703, 2, 3, 0, 0, ...) 
```

* * *

但是，如果有许多未使用的值，则此表结构将效率低下。

正确规范化后，您将拥有一个只有三列的表，其中包含项目 ID、ID 和值的所有有效组合：

```
INSERT INTO MyTable(itemID, ID, value)
VALUES (91311703, 3300, 2),
       (91311703, 3301, 3),
       (91311703, 3327, 3),
       (91311703, 3330, 2),
       ... 
```

* * *

这些组织中的哪一个更适合您取决于您​​要运行的查询类型。

# sql-server-2008-r2 - SQL Profiler 引发错误：无法加载文件或程序集 'System.Data，版本 = 2.0.0.0？

> ID：13500187
> 
> 赞同：0
> 
> 时间：2012-11-21T18:58:31.050
> 
> 标签：sql-server-2008-r2, sql-server-2008, sql-server-profiler

几天前我安装了第三方 SQL Server 2008 R2 工具集，然后昨天将其卸载。但是现在当我从 SSMS 运行 SQL Profiler 时，我收到一条错误消息：**无法加载文件或程序集 'System.Data, Version = 2.0.0.0**。我使用 gacutil 重新安装了 64 位和 32 位版本的 System.Data，它确实安装了，但是，当我尝试从 SSMS 启动 SQL Profiler 时，我仍然看到一个错误。除了重新安装 SQL Server 2008 R2 之外，关于如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:25:42.547

因此，正如我们已经明确的那样，最好的方法是尝试在另一台机器上定位问题，并向 Apex 提供如何重现它的明确说明（如果错误确实是由 Apex 工具引起的）。任何优秀的供应商都会感谢用户定位和报告的错误，因此他们应该提供如何修复您的安装的支持。祝你好运 ！

# collections - 使用主干 js 将模型连接到集合的最佳方法

> ID：13500188
> 
> 赞同：0
> 
> 时间：2012-11-21T18:58:33.340
> 
> 标签：collections, backbone.js, views, models

我在链接我的模型时遇到了一些问题 - 这些模型有自己的视图到集合中。我不知道我这样做是否正确。我不知道我是否也需要该集合的视图。

这是我的应用程序的准系统代码。

```
var Model = Backbone.Model.extend ({
initialize : function () {
    new ModelView({model:this});
}
});

var ModelCollection = Backbone.Collection.extend({
initialize : function () {
    console.log('collected');
    this.on("add",function(){
        console.log('added model');
    });
},
model: Model
}); 

var Models = new ModelCollection;

var ModelView = Backbone.View.extend({
initialize : function () {
    console.log('view is loaded');
    this.render();
    this.model.on('change', this.render, this);
},
el: $('#menu'),
render : function () {
    var data = this.model.toJSON();
    var template = Handlebars.compile($("#menu-template").html());
    $(this.el).html(template(data));
    return this; 
},
});

var ModelCollectionView = Backbone.View.extend({
initialize : function () {
    console.log('Collection view created');
    Models.bind('add', this.addOne, this);
    Models.bind('reset', this.addAll, this);
    Models.bind('all', this.render, this);
},

addOne : function (model) {
    console.log('working');
    var view = new ModelView({model: model});
}
});

var ModelCollection = new ModelCollectionView; 
```

我不知道我是否在这里遗漏了什么或者我是否需要这段代码

```
var model = new Model();
Models.push(model); 
```

我只是无法在任何地方找到一个基本的例子。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:58:33.033

根据您显示的代码，我建议您阅读有关`backbone.js`（Google 是一个很好的起点）的教程。它们有很多，它将帮助您理解视图、模型和集合之间的关系。

话虽如此，拥有一个只创建模型的新视图的模型似乎很奇怪。模型的全部意义在于它应该包含数据，这些数据再次显示在视图中。看看这个例子是如何分发它的：

```
//Some doctors in an array, just mockupdata to create models from
var someDoctors = [
    { name: "SomeName1" type: "Surgeon" },
    { name: "SomeName2" type: "Surgeon" },
    { name: "SomeName3" type: "Surgeon" },
    { name: "SomeName4" type: "Surgeon" }
];

//define product model
var Doctor = Backbone.Model.extend({
    defaults: {
        favoriteTool: "Stethoscope"
    }
});

//define a hospital collection of doctors
var Hospital = Backbone.Collection.extend({
    model: Doctor
});

//define individual doctor view which renders a template based on data from the model
var doctorView = Backbone.View.extend({
    tagName: "li",
    className: "doctor-container",
    template: $("#doctorTemplate").html(),

    render: function () {
        var tmpl = _.template(this.template);
        $(this.el).html(tmpl(this.model.toJSON()));
        return this;
    }
});

//define the hospital view
var hosptialView = Backbone.View.extend({
    el: $("#doctors"),

    initialize: function () {
        this.collection = new Hosptial(someDoctors);
        this.render();
    },

    // go through all models in the hospital and calls renderDoctor for each model
    render: function () {
        var that = this;
        _.each(this.collection.models, function (item) {
            that.renderDoctor(item);
        }, this);
    },

    //create a view for the item (doctormodel) and appends it to this views el.
    renderDoctor: function (item) {
        var doctorView = new DoctorView({
            model: item
        });
        this.$el.append(doctorView.render().el);
    }
});

//create instance of hospital view
var hosptial = new hosptialView(); 
```

如您所见，集合连接到医生，集合视图为每个医生创建一个医生视图并将其附加到它自己。

如果你想监听添加到集合中，在collectionview中进行初始化，然后调用renderDoctor：

```
Hospital.bind('add', this.renderDoctor, this); 
```

# javascript - chrome 扩展中的 localStorage - 扩展或页面存储？

> ID：13500194
> 
> 赞同：2
> 
> 时间：2012-11-21T18:59:13.503
> 
> 标签：javascript, google-chrome-extension, local-storage

如果我`localStorage`在谷歌浏览器扩展中使用，是当前网页的存储，还是扩展的存储？

或者，我怎样才能`localStorage`独立到达每个人？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:00:55.457

取决于你在哪里使用它。如果你在`background`或`options`页面上使用它，它是扩展的，它是共享的。如果它来自内容脚本，则它位于特定页面上。您无法随意访问`localStorage`每个页面，因此如果您想这样做，您应该向后台发送请求并将其存储在扩展程序的存储中。

请注意，如果您使用的是扩展程序的存储，您可能想要使用它[`chrome.storage`](http://developer.chrome.com/extensions/storage.html)。

# ios - UITableView 自定义单元格在尝试滚动时消失

> ID：13500195
> 
> 赞同：2
> 
> 时间：2012-11-21T18:59:15.777
> 
> 标签：ios, objective-c, uitableview, debugging, custom-cell

我有一个 UITableViewController，它有一个带有自定义单元格的表格视图（它们有一个子类和一个 xib）。问题是我从博客加载数据并且显示正常，但是当我尝试滚动或触摸时，单元格会重置，就像它们没有加载一样。

这是它的外观： ![在此处输入图像描述](../Images/cc3e4d8c2519dfa34a44d7036d991642.png)

这就是我尝试滚动时发生的情况： ![在此处输入图像描述](../Images/686c6c1ac722612432167f0ec322c27c.png)

这是我的视图控制器代码：

```
#import "TLDRCategoryViewController.h"

@interface TLDRCategoryViewController ()
@property(nonatomic,strong) IBOutlet UIView *headerView;
@property(nonatomic,strong) NSMutableArray *posts;
@property(nonatomic, assign, readonly) TLDRTag category;
@property(nonatomic, strong) IBOutlet UILabel *category_label;
@end

@implementation TLDRCategoryViewController
@synthesize headerView = _headerView, posts = _posts, category = _category, category_label = _category_label;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(void)setCategory:(TLDRTag)_cat {
    _category = _cat;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.tableView.tableHeaderView = _headerView;

    _category_label.text = [TLDRHelper showableNameForTag:_category];
    _category_label.textColor = [TLDRHelper colorForTag:_category];

    TLDRRetriever *retriever = [[TLDRRetriever alloc] initWithDelegate:self];
    [retriever postsByCategory:_category];
    if (_posts == nil)
        _posts = [[NSMutableArray alloc] init];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)postsLoaded:(NSDictionary *)postsDict {

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, (unsigned long)NULL), ^(void) {
        for (NSDictionary *key in postsDict[@"response"][@"posts"]) {
            TLDRNewsItem *newsPost = [[TLDRNewsItem alloc] initWithDictionary:key];
            [self.posts addObject:newsPost];
        }
        dispatch_sync(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });

    });

}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return [self.posts count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"TLDRNewsCell";

    TLDRNewsCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil){
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"TLDRNewsCell" owner:nil options:nil];
        for(id currentObject in topLevelObjects) {
            if([currentObject isKindOfClass:[TLDRNewsCell class]]) {
                cell = (TLDRNewsCell *)currentObject;
                break;
            }
        }
    }

    cell.title.text = ((TLDRNewsItem*)self.posts[indexPath.row]).articleTitle;
    cell.content.text = ((TLDRNewsItem*)self.posts[indexPath.row]).articleTLDR;

    return cell;
}

-(float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *text = ((TLDRNewsItem*)self.posts[indexPath.row]).articleTLDR;

    CGSize textSize = [text sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(self.tableView.frame.size.width - PADDING * 3, 1000.0f)];

    return textSize.height + PADDING * 3;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
} 
```

这是 TLDRRetriever 的相关部分：

```
-(void)postsByCategory:(NSInteger)cat {
    NSString *string_cat = @"";

    switch (cat) {
        case TLDRTagWorldNews:
            string_cat = @"world%20news";
            break;
        case TLDRTagBusiness:
            string_cat = @"business";
            break;
        case TLDRTagDesign:
            string_cat = @"design";
            break;
        case TLDRTagEntertainment:
            string_cat = @"entertainment";
            break;
        case TLDRTagFacts:
            string_cat = @"facts";
            break;
        case TLDRTagHealth:
            string_cat = @"health";
            break;
        case TLDRTagPolitics:
            string_cat = @"politics";
            break;
        case TLDRTagScience:
            string_cat = @"science";
            break;
        case TLDRTagSports:
            string_cat = @"sports";
            break;
        case TLDRTagTech:
            string_cat = @"tech";
            break;
        case TLDRTagWeb:
            string_cat = @"web";
            break;

        default:
            string_cat = @"";
            break;
    }

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);

    dispatch_async(queue, ^{
        NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@", kTLDRAPIURLCats, string_cat]]];
        NSError *error;
        NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

        [[self delegate] postsLoaded:json];

    });

} 
```

我在该应用程序上也有一个几乎完全相同的视图控制器，它工作正常（我正在使用该控制器的大部分代码，这个控制器可以重复用于其他类似类别）。这个控制器是批量分配的（我分配了 11 个这个控制器并将它们保存在一个数组中）。我无法调试这个，所以我不知道发生了什么。代码有问题吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T20:16:55.170

该修复与控制器或类似的东西无关：它是根视图控制器。视图没有保留在内存中，所以我只是为每个控制器制作了一个 ivar，而不是循环遍历它们并修复了应用程序 :)

# java - 关闭休眠日志

> ID：13500197
> 
> 赞同：8
> 
> 时间：2012-11-21T18:59:16.630
> 
> 标签：java, hibernate, log4j

我正在将 Hibernate 用于一个小型演示项目。我正在使用 Eclipse，我从 Eclipse 中启动程序，它将程序输出打印到 Eclipse 控制台。

这是一个简单的 Java 项目，没有 Maven，没有 Spring，什么都没有。我刚刚将所需的休眠库添加到我的构建路径中，其中还包括 jboss-logging-3.1.0.GA（其中包括一些 log4j 类，所以我想 log4j 在这里工作）。

网上有很多人问这个问题，但没有一个建议的解决方案对我有用。

我在项目的 src 目录中创建了一个 log4j.properties 文件（所以它肯定会在类路径上）。构建项目时，Eclipse 会将 log4j.properties 文件复制到 bin 目录。它包含一行：

```
log4j.logger.net.sf.hibernate=fatal 
```

我在网上找到的。我也试过

```
log4j.logger.org.hibernate=fatal 
```

这也无济于事。

我仍然得到以下控制台输出，这些都是信息消息（当我将严重性设置为致命时不应该出现......）：

```
21.11.2012 19:53:51 org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
21.11.2012 19:53:51 org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.8.Final}
21.11.2012 19:53:51 org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
21.11.2012 19:53:51 org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
21.11.2012 19:53:51 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000402: Using Hibernate built-in connection pool (not for production use!)
21.11.2012 19:53:51 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000115: Hibernate connection pool size: 20
21.11.2012 19:53:51 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000006: Autocommit mode: true
21.11.2012 19:53:51 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000401: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost:3306/quellsystem]
21.11.2012 19:53:51 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000046: Connection properties: {user=root, password=****, autocommit=true, release_mode=auto}
21.11.2012 19:53:52 org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
21.11.2012 19:53:52 org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
21.11.2012 19:53:52 org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory 
```

我还尝试将 -Dlog4j.configuration=log4j.properties 添加到我的 Eclipse 运行配置的 VM 参数中。无论如何都没有帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-15T20:15:08.387

您可以使用 log4j 配置文件。

为了能够使用`log4j.properties`文件将此添加到您的`pom.xml`

```
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
    <version>1.2.15</version>
</dependency> 
```

要禁用日志记录，您可以将其放入`src/test/resources/log4j.properties`文件中

```
log4j.rootLogger=OFF 
```

# ajax - Jquery - 仅当 ajax 请求完成并且所有内容都已加载时如何执行 aa 函数

> ID：13500198
> 
> 赞同：0
> 
> 时间：2012-11-21T18:59:20.270
> 
> 标签：ajax, jquery-ui, jquery

我有这两个要执行的函数，但我希望仅当第一个请求的内容已经加载到 DOM 元素中时才执行第二个函数。

加载ajax内容的通用函数：

```
function ajaxDialog(AjaxUrl, type, targedDom, dialogedDom, tabs) {

$.ajax({
    url: AjaxUrl,
    type: type,
    DataType: "html",
    success: function (data) {
        //puts data inside targedDom Dom elemen
        $('#' + targedDom).html(data);
        //create tabs
        loadDialogSettings(dialogedDom, tabs);
    }
}); 
```

}

这第一个函数创建一个选项卡结构：

```
ajaxDialog('/Admin/AdminSettingsTabsStructure', 'POST', renewedDom, targetDom, true); 
```

这个填充了一些内容选项卡编号 2

```
loadRolesAndAcessRules('/Admin/AdminRolesAndAccessRules', 'GET', 'tabs-2'); 
```

我正在考虑在 Ajax 请求的 onComplete 回调上执行第二个函数，但有点令人困惑......我能得到一些帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:56:16.163

**解决方案：**

```
function ajaxCallReturning(AjaxUrl, type, targetDom, tabIndex) {

$.ajax({
    url: AjaxUrl,
    type: type,
    DataType: "html",
    success: function (data) {
        $('#' + targetDom).html(data);
    },
    complete: function () {
        if (tabIndex == "1") {
            $("#tabs .ui-tabs-active").removeClass("ui-state-active");
            $('#tabs').tabs({ selected: tabIndex })
        } else {                
        }
    }
}); 
```

}

如您所见，所有数据都在成功回调中加载到 DOM 中，加载完成后，调用完成回调函数并显示带有数据的选项卡。

非常感谢！

# database - 创建关系数据库

> ID：13500200
> 
> 赞同：0
> 
> 时间：2012-11-21T18:59:34.003
> 
> 标签：database, database-design, relational-database

我需要将其转换为数据库的 E 图。我知道我的主键，但并不真正了解如何将不同的表链接在一起。

所以我有以名称作为主键的运算符表。每个运营商都可以运营一定比例的这些列车。例如运营商“a”30 = 30% 的服务和运营商 b 70% 的服务 100 等等……这是我坚持的部分。我需要另一个表来将这两个表链接在一起吗？

对于每列火车，我需要再次存储它从哪个车站开始以及它将在哪里终止（目的地）我是否为此创建新表？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:04:13.737

您可以使用您的操作框作为带有 OperatorID/TrainID 的键表的表示，以将操作员与火车相关联。

不，对于火车起点和终点站 ID，您不需要另一个表，只需要火车表中的字段。

这是作业吗？这些新概念适合您吗？

# javascript - 在同一链接上使用 Jquery 在每次单击时切换 js 和 css 文件

> ID：13500202
> 
> 赞同：1
> 
> 时间：2012-11-21T18:59:41.597
> 
> 标签：javascript, jquery, css, element, font-face

几周前，“Kundan Singh Chouhan”帮助我解决了这个问题： [通过 Jquery .append() 调用一个 CSS 文件，并通过第二次单击同一元素来删除它](https://stackoverflow.com/questions/12768255/call-a-css-file-by-jquery-append-and-delete-this-by-second-click-on-the-same/12768326)

但问题变得更加复杂。我想使用我们古老的文字，网站上的“Rovás”： [Jakabszallas.hu](http://jakabszallas.hu/?page_id=1271)

我不能使用简单的字体样式 CSS，因为在 Rovás 写作中，有一些字母（dzs、cs、gy、ty）只有一个简单的字符。这就是为什么“Rovás”字体系列的创建者没有将字符放在他们所属的键盘上的原因。因此，rovás“á”字母不在我键盘上的拉丁“á”字符下方。

这就是他们创建这个 javascript 的原因： [Rovásmag](http://rovasmag.hu/fjrovas-wordpress)

现在我在我的网站上使用它，并且我在网站上使用相同的链接（右上角）触发，当我过去使用 font-face 时。

所以，有这个链接：

```
<li class="skip-link-rovas"><a class="assistive-text" href="#" accesskey="7">Rovás</a></li> 
```

我的网站底部有这个 javascript：

```
<script src="http://jakabszallas.hu/wp-content/themes/jakabszallasv2/js/rovasmag.js" type="text/javascript"></script><!-- Rovas -->
<script src="http://jakabszallas.hu/wp-content/themes/jakabszallasv2/js/scripts.js" type="text/javascript"></script><!-- Additional scripts --> 
```

在 scripts.js 这两个 jquery 脚本：

```
// Jquery CSS switcher (Rovás)
$(document).ready(function() {
    $(".skip-link-rovas").click(function(){
        if($(this).find("link").length <= 0)
            $(this).append('<link rel="stylesheet" type="text/css" media="all" href="http://jakabszallas.hu/wp-content/themes/jakabszallasv2/css/rovas.css" />');
        else
            $(this).find("link").remove();
    });
});

$(document).ready(function() {
    $('.skip-link-rovas').click(function(){
        rovasmag_atro();
    });
}); 
```

“rovasmag_atro();” 正在调用“rovasmag.js”javascript，它将每种字体更改为“Rovás”书写，并且还将书写方向从右向左更改。此 javascript 是将“dzs、cs、gy、ty”字母更改为“Rovás”字体中正确字符的唯一方法。

我根本不是 javascript 程序员！我的问题是：是否可以以某种方式将“rovasmag_atro()”集成到上层 javascript 中，即调用 css 文件并在第二次单击时关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:52:11.820

如果关闭，您似乎不能简单地关闭，因为您需要反转所有这些字符翻译。相反，当页面加载时，您可以将整个页面内容复制到 JS 变量中。然后添加 CSS 并开始字体/字符翻译。然后要删除字体翻译，只需将整个页面内容替换为 Javascript 变量即可。我用这种技术创建了一个 jsFiddle：

[http://jsfiddle.net/DF2w9/5/](http://jsfiddle.net/DF2w9/5/)

```
<a class="remove" href="#">remove</a>

<script type="text/JavaScript">
var normalHTML = '';
$(document).ready(function() {
    normalHTML = $('html').html();
    $('html').append('<link rel="stylesheet" type="text/css" media="all" href="http://jakabszallas.hu/wp-content/themes/jakabszallasv2/css/rovas.css" />');
    rovasmag_atro();

    $("a.remove").click(function() {
        $('html').html(normalHTML);
    });
});
</script> 
```

# jquery - 功能重复（简单）

> ID：13500204
> 
> 赞同：0
> 
> 时间：2012-11-21T18:59:43.627
> 
> 标签：jquery

我试图在循环中重复整个功能，但没有任何效果。我试过Loop()回调，设置interval()。有人可以指出我正确的方向吗？

重复整个动画的最佳方法是什么？谢谢

```
$(document).ready(function() {
    $("#slide1").fadeIn(500, function() {
        $("#slide2").fadeIn(500, function() {
            $("#slide3").fadeIn(500, function() {
                $("#slide4").fadeIn(500, function() {
                    $("#slide5").fadeIn(500, function() {

                        $("#slide1").fadeOut(500, function() {

                            $("#slide6").fadeIn(500, function() {
                                $("#slide7").fadeIn(500, function() {
                                    $("#slide8").fadeIn(500, function() {
                                        $("#slide9").fadeIn(500, function() {});
                                    });
                                });
                            });
                        });
                    });
                });
            });
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:11:56.383

> @Phillip所以你现在的问题是什么......你只是希望代码是即兴的......对吗？– 维加
> 
> 嗨，维加。是的，代码运行良好，但希望`$("#slide1").fadeOut(500, function() {`发生。谢谢——菲利普

转换了你下面的代码，

**演示：http:** [//jsfiddle.net/RuX5d/5/](http://jsfiddle.net/RuX5d/5/)

```
$(document).ready(function() {
    var i = 1, dir = 1, curFx = 'fadeIn';
    var interval = setInterval(function () {
        if (i == 6 && $('#slide1').is(':visible')) {
            $('#slide1').fadeOut(500);             
            return;
        }

        $('#slide'+ i)[curFx](500);

        i = i + 1*dir;

        if (i == 10 || i == -1) {
            dir = (dir == 1)?-1:1;
            curFx = (curFx == 'fadeIn')?'fadeOut':'fadeIn';
        }        
    }, 500);
}); 
```

* * *

我不太确定你想要什么.. 但我相信你想要`fadeIn`并`fadeOut`满足于反复。

如果是这样，请尝试下面的演示和代码，

**演示：http:** [//jsfiddle.net/RuX5d/1/](http://jsfiddle.net/RuX5d/1/)

```
$(document).ready(function() {
    var curSlide = 0, dir = 1;
    var curFx = 'fadeIn';
    setInterval(function () {
        curSlide += 1 * dir;
        $('#slide' + curSlide)[curFx](500);
        if (curSlide == 11 || curSlide == 0) {
            curFx = (curFx == 'fadeIn')?'fadeOut': 'fadeIn';
            dir = (dir == 1)?-1: 1;
        }
    }, 500);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:05:04.287

使用`setTimeout`. IDK你到底想怎么做......但可能是这样的：

```
var i = 1;
$(document).ready(function(){ 
  setTimeout(function(){ 
    var slide = '#slide' + i++;
    $(slide).fadeIn();}, 500); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:04:53.230

这应该可以处理您要查找的内容

```
function fadeFn() {
    if (curNum < 10) {
        if (direction === 'Out') {
            direction = 'In';
            curNum++;
        }
        else {
            direction = 'Out';
        }
        $("#slide" + curNum)['fade' + direction](500, fadeFn);
    }
}

var curNum = 0;
var direction = 'Out';
$(document).ready(function() {
    fadeFn();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T19:06:25.500

像这样的函数应该完成你想要做的事情：

```
function fadeInRepeat(start, max){
    if(start++ < max){
        $("#slide" + start).fadeIn(500, function() {
            fadeInRepeat(start, max);
        }
    }
} 
```

只需调用`fadeInRepeat(1,10)`以替换您的原始代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T19:07:29.610

你可以递归。这是一个简短的版本：

```
function slider(count, asc) {
    var count = count || 1;
    if (!typeof(asc) == "boolean"||count == 10||count == 1) asc = !asc;
    $("#slide"+count)[asc?"fadeIn":"fadeOut"](500, (function() {
        return function() {
            slider(asc ? ++count : --count, asc);
        };
    })());
}
slider(); 
```

在这里看到它：http: [//jsfiddle.net/K8pbS/1/](http://jsfiddle.net/K8pbS/1/)

# c++ - 标准化前相乘

> ID：13500212
> 
> 赞同：0
> 
> 时间：2012-11-21T19:00:07.557
> 
> 标签：c++, floating-point, floating-accuracy

让向量`v`接近于零，如`{7.000e-07, 5.000e-06, 4.000e-07}`。在标准化之前乘以 1024 是个好主意吗？似乎这样的接近值在 PC 上运行良好，其中 double 内部为 80 位，而在 ARM FPU 上则不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:48:14.627

只要在您想要进行下溢的计算中没有任何中间结果（即，只要它们不接近 1E-308 in `double`， 1E-38 in `float`），它不会带来任何乘以 1024。

乘以 1024 不会损失任何东西（除非它导致溢出），但其他因素（例如 1000）也会导致精度损失。

# java - 如何让 h:inputText 的必需属性依赖于 h:selectOneMenu 中的某些值集？

> ID：13500213
> 
> 赞同：0
> 
> 时间：2012-11-21T19:00:07.253
> 
> 标签：java, validation, jsf, jsf-2

我正在使用 JSF 2.0。

我的`h:selectOneMenu`页面上有一个包含值列表的值，并且`h:inputText`在同一页面上有一个值，其`required`应取决于`h:selectOneMenu`. 只有特定的一组值应该触发`required`检查，其他的则不会。

这是我尝试过的：

```
<h:inputText ... required="#{(selectedPaymentType.value == 'some value') || (selectedPaymentType.value == 'other value')}" /> 
```

在上面的代码`#{selectedPaymentType}`中定义在`h:selectOneMenu binding`.

还有 3 个像这样的值应该触发`required`属性到`true`. 这看起来有点笨拙。有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:09:56.110

如果在您的设计中可能，您可以使用枚举作为您的 PaymentType，其中包括一些接口，如

```
public interface RequireSomeMoreStuff {
   public boolean required();
}

public enum PaymentType implements RequireSomeMoreStuff {
   FOO { boolean required() { return true; } },
   BAR { boolean required() { return false; } }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:55:33.773

Fant 给出了正确方向的提示，即您应该使用具有`required`属性的枚举，但似乎您并不完全确定如何正确实现它。诚然，范特的回答不够详尽。所以这里有一个更详细的答案。

基本上，您需要用如下所示的枚举替换所有下拉值：

```
public enum PaymentType {
    FOO("Some label for foo", true),
    BAR("Some label for bar", false),
    BAZ("Some label for baz", true);

    private String label;
    private boolean required;

    private PaymentType(String label, boolean required) {
        this.label = label; 
        this.required = required;
    }

    public String getLabel() { 
        return label;
    }

    public boolean isRequired() {
        return required;
    }
} 
```

并按如下方式使用

```
<h:selectOneMenu binding="#{selectedPaymentType}" value="#{bean.selectedPaymentType}">
    <f:selectItems value="#{bean.availablePaymentTypes}" var="paymentType"
        itemValue="#{paymentType}" itemLabel="#{paymentType.label}" />
</h:selectOneMenu>
<h:inputText ... required="#{selectedPaymentType.value.required}" /> 
```

和

```
private PaymentType selectedPaymentType; // +getter+setter

public PaymentType[] getAvailablePaymentTypes() { 
    return PaymentType.values();
} 
```

*（或者，如果您使用的是 OmniFaces，请使用[`<o:importConstants>`](http://showcase.omnifaces.org/taghandlers/importConstants)，那么您不需要这样的 getter `<f:selectItems>`；不，您在任何情况下都不需要转换器，JSF/EL 已经内置了枚举转换）*

看，这个`required`属性现在已经被简化了很多，因为它已经在与所选值关联的模型中定义了。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-22T08:40:18.843

仅当您选择了某些值时，我才会使用`a4j`它来呈现 inputText `selectOneMenu`：

```
<h:selectOneMenu value="#{MyBean.selectedValue}">
    <f:selectItems value="#{MyBean.listOfValues}" />
    <a4j:support event="onchange" reRender="requiredText" ajaxSingle="true"/>
</h:selectOneMenu>

<a4j:outputPanel id="requiredText">
    <h:inputText value="#{MyBean.inputValue}" rendered="#{(MyBean.selectedValue == value_1) || (MyBean.selectedValue == value_2) || ...}" />
</a4j:outputPanel> 
```

为了避免 inputText 的`rendered`参数上出现大字符串，我建议您创建一个执行以下条件的布尔函数：`rendered="#{MyBean.inputTextIsRendered}`.

## 客户端解决方案

还有一个基于验证器的解决方案。这是我的方法：

*   JSF 代码

上面的`selectOneMenu`代码使用`binding`标签将在 中选择的值`selectOneMenu`与一个属性绑定，该属性将在验证器方法中检索，为`inputText`组件声明。

*   验证器类

然后，您需要创建`CheckInputValue`验证器类。

```
public class CheckInputValue implements Validator {
    public CheckInputValue() {}

    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {

        //We retrieve thei binded value:
        UIInput confirmComponent = (UIInput) component.getAttributes().get("selectedValue");
        String theValue = confirmComponent.getSubmittedValue();

        //Here you check the retrieved value with the list of values that makes your inputText required.
        //In these cases you will chech the inputText is not empty and, if so, you return a ValidatorException:
        if(isEmpty){
            FacesMessage message = new FacesMessage();
            message.setDetail("inputText cannot be empty");
            message.setSummary("inputText cannot be empty");
            message.setSeverity(FacesMessage.SEVERITY_ERROR);
            throw new ValidatorException(message);
        }
    }
} 
```

*   面孔-config.xml

最后，您必须在以下位置声明您的验证器类`faces-config.xml`：

```
<validator>
    <validator-id>CheckInputValue</validator-id>
    <validator-class>myPackage.myValidations.CheckInputValue</validator-class>
</validator> 
```

# c# - 字符计数

> ID：13500214
> 
> 赞同：-2
> 
> 时间：2012-11-21T19:00:09.447
> 
> 标签：c#, monodevelop

它很奇怪，我需要从文件中计算字符，并且在以后的计算中使用该信息，现在它很奇怪的部分，我想检查我的程序是否正确计算每个字符的外观，所以我将我的结果与来自 ctrl+ 的 monodevelop 匹配进行了比较f 例如对于 'i' 字符，我的结果是`518`monodevelop 有`561`匹配项（区分大小写），所以可能看起来我的程序计算得不好，但我进行了测试并将其重写到另一个文件并再次检查了 monodevelop 中的匹配项现在我的结果和 monodevelop 匹配相同。为什么会这样？

这是代码

```
public Histogram (String nazwa)
    {
        histogram = new Dictionary<string,float>();
        StringBuilder plik = odczytPliku.odczyt(nazwa);
        n = 0;
        foreach(char w in plik.ToString())
        {
            if(!histogram.ContainsKey(new string(w,1)))
                histogram.Add(new string(w,1),1);
            else
                histogram[new string(w,1)]+=1;
            n++;
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:09:55.613

以下代码将创建字符串中字符的直方图。这假设您正确地传递了字符串。

```
public Dictionary<char,int> Histogram( String myString )
{
    Dictionary<char,int> hist = new Dictionary<char,int>()

    if( !String.IsNullOrEmpty(myString) )
    {
        for( int i = 0; i < myString.Length; i++ )
        {
            char c = myString[i];

            if(hist.ContainsKey(c))
            {
                hist[c] = hist[c] + 1;
            }
            else
            {
                hist.Add(c,1);
            }
        }
    }

    return hist;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:32:54.473

```
public Dictionary<char, int> Hist(string target)
    {
        return target.GroupBy(c => c)
            .ToDictionary(g => g.Key, g => g.Count());
    } 
```

要使其不区分大小写，只需像这样调用它：

```
var hist = Hist(target.ToUpperInvariant()); 
```

# forms - 在客户端（表单）加载 HTML 对象

> ID：13500215
> 
> 赞同：1
> 
> 时间：2012-11-21T19:00:14.683
> 
> 标签：forms, node.js, dom, knockout.js

我必须编写一个单页应用程序，它将在整个应用程序中使用相同的 3 个表单，只是每个表单的操作都会改变。标签/输入将是相同的，等等......

我想让我的应用程序快速且响应迅速，因此，我想知道每次必须加载时通过 Javascript 动态生成 FORM 是否是个好主意，而不是从服务器下载它作为 HTML。

那么，通过 Javascript 生成 DOM 对象有什么好的做法吗？有什么方法可以在第一次加载应用程序时下载每个 FORM 的 HTML 代码？还是我每次都必须通过带有 JS 的 DOM 对象来构建它们？

这里有什么好的做法吗？我正在使用 node.js、knockout.js、jquery。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:24:02.563

您正在使用淘汰赛，因此只需将表单作为淘汰赛模板：

```
<script type="text/html" id="MyForm">
   <!-- labels and inputs and other form elements here -->
</script> 
```

然后您可以稍后在您的页面中使用它，例如

```
<form class="foo" data-bind="attr: { action: myAction }, template: 'MyForm'></form> 
```

`myAction`将是您传递给的模型的可观察或普通属性`ko.applyBindings`，例如

```
ko.applyBindings({ action: '/submit/stuff' }, $('form.foo')[0]); 
```

Knockout 有[很棒的教程](http://learn.knockoutjs.com)和[很棒的文档](http://knockoutjs.com/documentation/template-binding.html)，所以也检查一下。

# cassandra - CQL 和时间序列模式

> ID：13500216
> 
> 赞同：4
> 
> 时间：2012-11-21T19:00:18.730
> 
> 标签：cassandra, time-series, cql

我正在尝试为 Cassandra 11x 中的传感器网络建模时间序列数据。我的主要用例是从特定源设备查询大时间范围。我更喜欢使用 cql 来节省实施时间。

使用 cql3 我正在定义一个像这样的表：

```
create table example (
    source int,
    sample_time timeuuid,
    value double,
    PRIMARY KEY (source,sample_time)
); 
```

但是这个分区键会导致行很快变得太宽/太热，并且不会对查询进行并行化。理想情况下，我想定义一个复合类型作为我的分区键，cql 支持吗？

我已经阅读了[http://www.datastax.com/dev/blog/advanced-time-series-with-cassandra](http://www.datastax.com/dev/blog/advanced-time-series-with-cassandra)并且关于高吞吐量时间表的部分特别相关。我是否必须退回直接定义存储布局而忘记 cql？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T22:22:17.617

这需要 Cassandra 1.2：

```
CREATE TABLE foo (
  a int,
  b text,
  c uuid,
  PRIMARY KEY ((a, b))
); 
```

将为您提供一个由 int、text 组合而成的存储引擎行键。

# sql - iif 使用是/否

> ID：13500217
> 
> 赞同：0
> 
> 时间：2012-11-21T19:00:19.773
> 
> 标签：sql, ms-access

我在查询中使用是/否字段时遇到困难。我的表有带检查与否的是/否复选框，我要运行的查询是...

```
SELECT Roster.UserID, 
EventLog.Type, 
EventLog.Priority, 
IIf([Priority]="Yes",[EventLog]![Date],Date()-183) AS Expr1
FROM EventLog 
INNER JOIN Roster 
ON EventLog.UserID = Roster.UserID
GROUP BY Roster.UserID, 
EventLog.Type, 
EventLog.Priority
HAVING (((EventLog.Type) Like "Att*")); 
```

我试图将其作为“表达式”和“分组依据”运行并收到错误“标准表达式中的数据类型不匹配”我很确定我对“是”的使用不正确。请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:09:16.957

删除“是”周围的引号 - 使用引号它认为您具有字符串（文本）值而不是布尔值（是/否）。

您可能希望养成使用 True 代替 Yes（以及 False 代替 No）的习惯，这样您就可以轻松地为 Access 以外的数据库编写 SQL。

# c - C 输入检查和以前的输出验证代码

> ID：13500219
> 
> 赞同：1
> 
> 时间：2012-11-21T19:00:23.710
> 
> 标签：c, visual-studio-2010, io

我有以下这段代码来检查输入与常用词的字典，并检查输入是否与 passHistory 文件中存储的先前输入匹配。我的问题是在 C 中比较字符串的 strcmp 方法似乎没有正确执行在我的代码中，因为如果在 passHistory 中已使用常用词或输入，则无法显示适当的错误。

一些指导将不胜感激。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <time.h>

#define MAX 30
#define gC_FOUND 99
#define gC_NOT_FOUND -99

int checkWordInFile(char * fileName,char * theWord);

int main()
{

    char userString[MAX + 1];

    int iResult;

    printf("Enter your string: ");
    gets(userString);

    printf("\n\nYou entered: %s, please wait, checking in dictionary.\n\n", userString);
    iResult = checkWordInFile("dictionary.txt",userString);

    if( iResult == gC_FOUND )
    {
        printf("\nFound your word in the dictionary");
    }
    else
    {
        printf("\nCould not find your word in the dictionary");
    }

    iResult = checkWordInFile("passHistory.txt",userString);
    if( iResult == gC_FOUND )
    {
        printf("\nPassword used");
    }
    else
    {
        printf("\nOk to use!");
    }

    printf("\n\n\n");
    system("pause");

} /* end of main */

int checkWordInFile(char * fileName,char * theWord){

    FILE * fptr;
    char fileString[MAX + 1];
    int iFound = -99;
    //open the file
    fptr = fopen(fileName, "r");
    if (fptr == NULL)
    {
        printf("\nNo dictionary file\n");
        printf("\n\n\n");
        system("pause");
        return (0); // just exit the program
    }

    /* read the contents of the file */
    while( fgets(fileString, MAX, fptr) )
    {
        if( 0 == strcmp(theWord, fileString) )
        {
            iFound = -99;
        }
    }

    fclose(fptr);

    return(0);

}//end of checkwORDiNFile 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:10:25.703

[`fgets()`](http://en.cppreference.com/w/c/io/fgets)如果遇到换行符，则将其写入正在填充的缓冲区中。使用前将其删除`strcmp()`：

```
char* new_line = strrchr(fileString, '\n');
if (new_line) *new_line = 0; 
```

请注意，这[`gets()`](http://en.cppreference.com/w/c/io/gets)是一个危险的 api，因为没有对输入进行边界检查，可能导致缓冲区溢出。读取用户输入的一种更安全的机制是`fgets()`或[`scanf()`](http://en.cppreference.com/w/c/io/fscanf)使用说明`%Ns`符 where`N`指定要读取的最大字符数，并且`N`必须比数组的大小小一以允许空终止符：

```
scanf("%30s", userString); 
```

当在文件中找到字符串时，没有理由继续搜索文件的其余部分，`break`以`while`避免不必要的处理。请注意，`iFound`s 的值永远不会在 中更改，`checkWordInFile()`并且不用作返回值：`0`始终返回。我认为你的意思是`iFound = gC_FOUND;`在循环内。您还定义了宏来指示找到和未找到，但不要在函数中使用这些宏，而是使用硬编码值。

# dojo - 更改 dijit.MenuItem 的选定颜色

> ID：13500220
> 
> 赞同：1
> 
> 时间：2012-11-21T19:00:28.670
> 
> 标签：dojo

在我的 dijit 工具栏中，我使用 DropDownButton 来保存带有许多 MenuItem 的 dijit.Menu。这些 MenuItem 控制我项目中的各种功能。DropDownButton 和 Menu 在 html 页面中声明，但 MenuItems 是在运行时动态创建的。

当用户点击一个 MenuItem 时，它会改变页面上某些东西的模式。目前，用户无法通过查看 dropdownMenu 本身来知道他/她最后在 dropdownMenu 中选择了什么。有没有一种方法（CSS 或 JavaScript）可以强制所选 MenuItem 的背景颜色保持不变，直到用户单击同一下拉菜单上的另一个选择？

*显然，我可以在其他地方显示一个标签，告诉用户它处于什么模式，但这不像下拉菜单本身的选定感觉那么直观。*

这是 HTML 部分的声明方式：

```
 <button dojoType="dijit.form.DropDownButton" iconClass="esriLayerIcon" id="VFAContentBtn" label="Content Filter"     title="Content Filter" style="width: 200px">
    <div dojoType="dijit.Menu" id="VFAContentDDMenuMain">

     </div>
    </button> 
```

这是对运行时填充的粗略了解：

```
 var contentMenu = dijit.byId("VFAContentDDMenuMain");
    // add the ALl Campus regardless. 
    // For the clicked value, we will use 0 for the ALL.
    contentMenu.addChild(new dijit.MenuItem({
        label : "All Campuses",
        id : "C:0",
        focused : true,
        onClick : function(evt) {CampusFilterClicked(evt)}
    }));    
    // For the individual campus, we will just use the Campus Id since the menu has campuses only.  
    for (var i = 0; i <= arrRegionCampus.length - 1; i++) {
        var campusId = Math.abs(arrRegionCampus[i].CampusId);
        var campusName = arrRegionCampus[i].CampusName;
        // the evt of the onClick will contain the information we need.
        var menuX = new dijit.MenuItem({
                            id : "C:" + campusId,
                            label : campusName,
                            onClick : function(evt) {
                                CampusFilterClicked(evt);
                            }
                        });
        contentMenu.addChild(menuX);
        menuX = null;
    } 
```

# ruby-on-rails - Rails 3：在模型中使用带有作用域的 lambda

> ID：13500221
> 
> 赞同：6
> 
> 时间：2012-11-21T19:00:29.490
> 
> 标签：ruby-on-rails

嗨，我目前正在阅读 Rails 食谱，其中有一节作者在模型中使用范围，以便控制器可以访问某些查询片段而无需向控制器添加查询（因此违反了 MVC 规则）。在某一时刻，他有这个：

```
class Wombat < ActiveRecord::Base
  scope :with_bio_containing, lambda {|query| where("bio like ?", "%#{query}%").
                                         order(:age) }
end 
```

我从未使用过 lambda 和 Proc 对象。这是否等同于向范围添加参数，以便从概念上讲它是`scope :with_bio_containing(query)`允许我自定义范围，就好像它是一个函数一样？lambda 是否常用于 Rails 的范围？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T19:15:27.740

从概念上讲，你是对的。这就像发送一个论点。你可以这样称呼这个特定的范围：

```
Wombat.with_bio_containing("born in Canada") 
```

您可以创建一个包含许多参数的范围：

```
# code
scope :with_name_and_age, lambda { |name, age| where(:name => name, :age => age) }

# call
Wombat.with_name_and_age("Joey", 14) 
```

你也可以没有参数：

```
# code
scope :from_canada, lambda { where(:country => "Canada") }

# call
Wombat.from_canada 
```

是的，根据我自己的经验，通常使用 lambdas。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:14:40.330

两个问题都是。

Wombat.with_bio_lining('foo') 在运行时被评估为：

```
select * from wombats where bio like "%foo%" order by age 
```

# php - 使用 jQuery 文件上传进行远程上传

> ID：13500222
> 
> 赞同：2
> 
> 时间：2012-11-21T19:00:31.860
> 
> 标签：php, jquery, ajax, file-upload

我需要一个远程上传脚本的帮助，该脚本有一个名为“uploadHandler.php”的页面。我需要使用 jQuery PHP 文件上传（jQuery 文件上传）创建一个远程上传脚本。我想通过这个脚本上传一个来自不同服务器的文件，只输入 URL。如何才能做到这一点？

当我请求上传到“uploadHandler.php”时，它会返回

```
[{"name":"","size":0,"type":null,"error":"File received has zero size."}] 
```

我应该创建哪个表单以确保文件已上传？我想从用文本框写的 URL 上传文件。

“uploadHandler.php”的代码：

```
class uploadHandler
{    
    private $options;

    function __construct($options = null)
    {
        // get accepted file types
        $acceptedFileTypes = getAcceptedFileTypes();

        $this->options = array(
            'script_url' => $_SERVER['PHP_SELF'],
            'upload_dir' => _CONFIG_FILE_STORAGE_PATH,
            'upload_url' => dirname($_SERVER['PHP_SELF']) . '/files/',
            'param_name' => 'files',
            'delete_hash' => '',
            // The php.ini settings upload_max_filesize and post_max_size
            // take precedence over the following max_file_size setting:
            'max_file_size' => $this->get_max_upload_size(),
            'min_file_size' => 1,
            'accept_file_types' => COUNT($acceptedFileTypes) ? ('/(\.|\/)(' . str_replace(".", "", implode("|", $acceptedFileTypes)) . ')$/i') : '/.+$/i',
            'max_number_of_files' => null,
            'discard_aborted_uploads' => true,
            'image_versions' => array(
                'thumbnail' => array(
                    'upload_dir' => dirname(__FILE__) . '/thumbnails/',
                    'upload_url' => dirname($_SERVER['PHP_SELF']) . '/thumbnails/',
                    'max_width' => 80,
                    'max_height' => 80
                )
            )
        );
        if ($options)
        {
            $this->options = array_replace_recursive($this->options, $options);
        }
    }

    private function get_max_upload_size()
    {
        // Initialize current user
        $Auth = Auth::getAuth();

        // max allowed upload size
        $maxUploadSize = SITE_CONFIG_FREE_USER_MAX_UPLOAD_FILESIZE;
        if ($Auth->loggedIn())
        {
            // check if user is a premium/paid user
            if ($Auth->level != 'free user')
            {
                $maxUploadSize = SITE_CONFIG_PREMIUM_USER_MAX_UPLOAD_FILESIZE;
            }
        }

        // if php restrictions are lower than permitted, override
        $phpMaxSize = getPHPMaxUpload();
        if ($phpMaxSize < $maxUploadSize)
        {
            $maxUploadSize = $phpMaxSize;
        }

        return $maxUploadSize;
    }

    private function get_file_object($file_name)
    {
        $file_path = $this->options['upload_dir'] . $file_name;
        if (is_file($file_path) && $file_name[0] !== '.')
        {
            $file = new stdClass();
            $file->name = $file_name;
            $file->size = filesize($file_path);
            $file->url = $this->options['upload_url'] . rawurlencode($file->name);
            foreach ($this->options['image_versions'] as $version => $options)
            {
                if (is_file($options['upload_dir'] . $file_name))
                {
                    $file->{$version . '_url'} = $options['upload_url']
                            . rawurlencode($file->name);
                }
            }
            $file->delete_url = '~d?' . $this->options['delete_hash'];
            $file->info_url = '~i?' . $this->options['delete_hash'];
            $file->delete_type = 'DELETE';
            return $file;
        }
        return null;
    }

    private function get_file_objects()
    {
        return array_values(array_filter(array_map(
                                        array($this, 'get_file_object'), scandir($this->options['upload_dir'])
                                )));
    }

    private function create_scaled_image($file_name, $options)
    {
        $file_path = $this->options['upload_dir'] . $file_name;
        $new_file_path = $options['upload_dir'] . $file_name;
        list($img_width, $img_height) = @getimagesize($file_path);
        if (!$img_width || !$img_height)
        {
            return false;
        }
        $scale = min(
                $options['max_width'] / $img_width, $options['max_height'] / $img_height
        );
        if ($scale > 1)
        {
            $scale = 1;
        }
        $new_width = $img_width * $scale;
        $new_height = $img_height * $scale;
        $new_img = @imagecreatetruecolor($new_width, $new_height);
        switch (strtolower(substr(strrchr($file_name, '.'), 1)))
        {
            case 'jpg':
            case 'jpeg':
                $src_img = @imagecreatefromjpeg($file_path);
                $write_image = 'imagejpeg';
                break;
            case 'gif':
                $src_img = @imagecreatefromgif($file_path);
                $write_image = 'imagegif';
                break;
            case 'png':
                $src_img = @imagecreatefrompng($file_path);
                $write_image = 'imagepng';
                break;
            default:
                $src_img = $image_method = null;
        }
        $success = $src_img && @imagecopyresampled(
                        $new_img, $src_img, 0, 0, 0, 0, $new_width, $new_height, $img_width, $img_height
                ) && $write_image($new_img, $new_file_path);
        // Free up memory (imagedestroy does not delete files):
        @imagedestroy($src_img);
        @imagedestroy($new_img);
        return $success;
    }

    private function has_error($uploaded_file, $file, $error)
    {
        if ($error)
        {
            return $error;
        }
        if (!preg_match($this->options['accept_file_types'], $file->name))
        {
            return 'acceptFileTypes';
        }
        if ($uploaded_file && is_uploaded_file($uploaded_file))
        {
            $file_size = filesize($uploaded_file);
        } else
        {
            $file_size = $_SERVER['CONTENT_LENGTH'];
        }
        if ($this->options['max_file_size'] && (
                $file_size > $this->options['max_file_size'] ||
                $file->size > $this->options['max_file_size'])
        )
        {
            return 'maxFileSize';
        }
        if ($this->options['min_file_size'] &&
                $file_size < $this->options['min_file_size'])
        {
            return 'minFileSize';
        }
        if (is_int($this->options['max_number_of_files']) && (
                count($this->get_file_objects()) >= $this->options['max_number_of_files'])
        )
        {
            return 'maxNumberOfFiles';
        }
        return $error;
    }

    private function handle_file_upload($uploaded_file, $name, $size, $type, $error)
    {
        $fileUpload = new stdClass();
        $fileUpload->name = basename(stripslashes($name));
        $fileUpload->size = intval($size);
        $fileUpload->type = $type;
        $fileUpload->error = null;

        $extension = end(explode(".", $fileUpload->name));
        $fileUpload->error = $this->has_error($uploaded_file, $fileUpload, $error);
        if (!$fileUpload->error)
        {
            if (strlen(trim($fileUpload->name)) == 0)
            {
                $fileUpload->error = 'Filename not found.';
            }
        }
        elseif (intval($size) == 0)
        {
            $fileUpload->error = 'File received has zero size.';
        }
        elseif (intval($size) > $this->options['max_file_size'])
        {
            $fileUpload->error = 'File received is larger than permitted.';
        }

        if (!$fileUpload->error && $fileUpload->name)
        {
            if ($fileUpload->name[0] === '.')
            {
                $fileUpload->name = substr($fileUpload->name, 1);
            }
            $newFilename = MD5(microtime());

            // figure out upload type
            $file_size = 0;

            // select server from pool
            $uploadServerId = getAvailableServerId();
            $db = Database::getDatabase(true);
            $uploadServerDetails = $db->getRow('SELECT * FROM file_server WHERE id = ' . $db->quote($uploadServerId));

            // override storage path
            if(strlen($uploadServerDetails['storagePath']))
            {
                $this->options['upload_dir'] = $uploadServerDetails['storagePath'];
                if (substr($this->options['upload_dir'], strlen($this->options['upload_dir']) - 1, 1) == '/')
                {
                    $this->options['upload_dir'] = substr($this->options['upload_dir'], 0, strlen($this->options['upload_dir']) - 1);
                }
                $this->options['upload_dir'] .= '/';
            }

            // move remotely via ftp
            if($uploadServerDetails['serverType'] == 'remote')
            {
                // connect ftp
                $conn_id = ftp_connect($uploadServerDetails['ipAddress'], $uploadServerDetails['ftpPort'], 30);
                if($conn_id === false)
                {
                    $fileUpload->error = 'Could not connect to file server '.$uploadServerDetails['ipAddress'];
                }

                // authenticate
                if(!$fileUpload->error)
                {
                    $login_result = ftp_login($conn_id, $uploadServerDetails['ftpUsername'], $uploadServerDetails['ftpPassword']);
                    if($login_result === false)
                    {
                        $fileUpload->error = 'Could not authenticate with file server '.$uploadServerDetails['ipAddress'];
                    }
                }

                // create the upload folder
                if(!$fileUpload->error)
                {
                    $uploadPathDir = $this->options['upload_dir'] . substr($newFilename, 0, 2);
                    if(!ftp_mkdir($conn_id, $uploadPathDir))
                    {
                        // Error reporting removed for now as it causes issues with existing folders. Need to add a check in before here
                        // to see if the folder exists, then create if not.
                        // $fileUpload->error = 'There was a problem creating the storage folder on '.$uploadServerDetails['ipAddress'];
                    }
                }

                // upload via ftp
                if(!$fileUpload->error)
                {
                    $file_path = $uploadPathDir . '/' . $newFilename;
                    clearstatcache();
                    if ($uploaded_file && is_uploaded_file($uploaded_file))
                    {
                        // initiate ftp
                        $ret = ftp_nb_put($conn_id, $file_path, $uploaded_file, 
                                            FTP_BINARY, FTP_AUTORESUME);
                        while ($ret == FTP_MOREDATA)
                        {
                            // continue uploading
                            $ret = ftp_nb_continue($conn_id);
                        }

                        if ($ret != FTP_FINISHED)
                        {
                            $fileUpload->error = 'There was a problem uploading the file to '.$uploadServerDetails['ipAddress'];
                        }
                        else
                        {
                            $file_size = filesize($uploaded_file);
                            @unlink($uploaded_file);
                        }
                    }
                }

                // close ftp connection
                ftp_close($conn_id);
            }
            // move into local storage
            else
            {
                // create the upload folder
                $uploadPathDir = $this->options['upload_dir'] . substr($newFilename, 0, 2);
                @mkdir($uploadPathDir);

                $file_path = $uploadPathDir . '/' . $newFilename;
                clearstatcache();
                if ($uploaded_file && is_uploaded_file($uploaded_file))
                {
                    move_uploaded_file($uploaded_file, $file_path);
                }
                $file_size = filesize($file_path);
            }

            // check filesize uploaded matches tmp uploaded
            if ($file_size === $fileUpload->size)
            {
                $fileUpload->url = $this->options['upload_url'] . rawurlencode($fileUpload->name);

                // insert into the db
                $fileUpload->size = $file_size;
                $fileUpload->delete_url = '~d?' . $this->options['delete_hash'];
                $fileUpload->info_url = '~i?' . $this->options['delete_hash'];
                $fileUpload->delete_type = 'DELETE';

                // create delete hash, make sure it's unique
                $deleteHash = md5($fileUpload->name . getUsersIPAddress() . microtime());
                $existingFile = file::loadByDeleteHash($deleteHash);
                while ($existingFile != false)
                {
                    $deleteHash = md5($fileUpload->name . getUsersIPAddress() . microtime());
                    $existingFile = file::loadByDeleteHash($deleteHash);
                }

                // store in db
                $db = Database::getDatabase(true);
                $dbInsert = new DBObject("file", array("originalFilename", "shortUrl", "fileType", "extension", "fileSize", "localFilePath", "userId", "totalDownload", "uploadedIP", "uploadedDate", "statusId", "deleteHash", "serverId"));

                $dbInsert->originalFilename = $fileUpload->name;
                $dbInsert->shortUrl = 'temp';
                $dbInsert->fileType = $fileUpload->type;
                $dbInsert->extension = $extension;
                $dbInsert->fileSize = $fileUpload->size;
                $dbInsert->localFilePath = str_replace($this->options['upload_dir'], "", $file_path);

                // add user id if user is logged in
                $dbInsert->userId = NULL;
                $Auth = Auth::getAuth();
                if ($Auth->loggedIn())
                {
                    $dbInsert->userId = (int) $Auth->id;
                }

                $dbInsert->totalDownload = 0;
                $dbInsert->uploadedIP = getUsersIPAddress();
                $dbInsert->uploadedDate = sqlDateTime();
                $dbInsert->statusId = 1;
                $dbInsert->deleteHash = $deleteHash;
                $dbInsert->serverId = $uploadServerId;

                if (!$dbInsert->insert())
                {
                    $fileUpload->error = 'abort';
                }

                // create short url
                $tracker = 1;
                $shortUrl = file::createShortUrlPart($tracker . $dbInsert->id);
                $fileTmp = file::loadByShortUrl($shortUrl);
                while ($fileTmp)
                {
                    $shortUrl = file::createShortUrlPart($tracker . $dbInsert->id);
                    $fileTmp = file::loadByShortUrl($shortUrl);
                    $tracker++;
                }

                // update short url
                file::updateShortUrl($dbInsert->id, $shortUrl);

                // update fileUpload with file location
                $file = file::loadByShortUrl($shortUrl);
                $fileUpload->url = $file->getFullShortUrl();
                $fileUpload->delete_url = $file->getDeleteUrl();
                $fileUpload->info_url = $file->getInfoUrl();
                $fileUpload->stats_url = $file->getStatisticsUrl();
                $fileUpload->short_url = $shortUrl;
            }
            else if ($this->options['discard_aborted_uploads'])
            {
                //@TODO - made ftp compatible
                @unlink($file_path);
                @unlink($uploaded_file);
                if(!isset($fileUpload->error))
                {
                    $fileUpload->error = 'maxFileSize';
                }
            }
        }

        return $fileUpload;
    }

    public function get()
    {
        $file_name = isset($_REQUEST['file']) ?
                basename(stripslashes($_REQUEST['file'])) : null;
        if ($file_name)
        {
            $info = $this->get_file_object($file_name);
        } else
        {
            $info = $this->get_file_objects();
        }
        header('Content-type: application/json');
        echo json_encode($info);
    }

    public function post()
    {
        $upload = isset($_FILES[$this->options['param_name']]) ?
                $_FILES[$this->options['param_name']] : array(
            'tmp_name' => null,
            'name' => null,
            'size' => null,
            'type' => null,
            'error' => null
                );
        $info = array();
        if (is_array($upload['tmp_name']))
        {
            foreach ($upload['tmp_name'] as $index => $value)
            {
                $info[] = $this->handle_file_upload($upload['tmp_name'][$index], 
                        isset($_SERVER['HTTP_X_FILE_NAME']) ? $_SERVER['HTTP_X_FILE_NAME'] : $upload['name'][$index], 
                        isset($_SERVER['HTTP_X_FILE_SIZE']) ? $_SERVER['HTTP_X_FILE_SIZE'] : $upload['size'][$index], 
                        isset($_SERVER['HTTP_X_FILE_TYPE']) ? $_SERVER['HTTP_X_FILE_TYPE'] : $upload['type'][$index], 
                        $upload['error'][$index]
                );
            }
        } else
        {
            $info[] = $this->handle_file_upload($upload['tmp_name'], 
                    isset($_SERVER['HTTP_X_FILE_NAME']) ? $_SERVER['HTTP_X_FILE_NAME'] : $upload['name'],
                    isset($_SERVER['HTTP_X_FILE_SIZE']) ? $_SERVER['HTTP_X_FILE_SIZE'] : $upload['size'],
                    isset($_SERVER['HTTP_X_FILE_TYPE']) ? $_SERVER['HTTP_X_FILE_TYPE'] : $upload['type'],
                    $upload['error']
            );
        }
        header('Vary: Accept');
        if (isset($_SERVER['HTTP_ACCEPT']) &&
                (strpos($_SERVER['HTTP_ACCEPT'], 'application/json') !== false))
        {
            header('Content-type: application/json');
        } else
        {
            header('Content-type: text/plain');
        }
        echo json_encode($info);
    }

}

$upload_handler = new uploadHandler();

header('Pragma: no-cache');
header('Cache-Control: private, no-cache');
header('Content-Disposition: inline; filename="files.json"');

// check we are receiving the request from this script
if (!checkReferrer())
{
    // exit
    header('HTTP/1.0 400 Bad Request');
    exit();
}

switch ($_SERVER['REQUEST_METHOD'])
{
    case 'HEAD':
    case 'GET':
        $upload_handler->get();
        break;
    case 'POST':
        $upload_handler->post();
        break;
    default:
        header('HTTP/1.0 405 Method Not Allowed');
} 
```

文件_indexJS.php：

```
var fileUrls = [];
var lastEle = null;
var startTime = null;
$(document).ready(function() {
    'use strict';

    // Initialize the jQuery File Upload widget:
    $('#fileupload').fileupload({
        sequentialUploads: true,
        maxFileSize: <?php echo $maxUploadSize; ?>,
        <?php echo COUNT($acceptedFileTypes)?('acceptFileTypes: /(\\.|\\/)('.str_replace(".", "", implode("|", $acceptedFileTypes).')$/i,')):''; ?> maxNumberOfFiles: 50
    })
    .bind('fileuploadadd', function(e, data) {
        $('#fileupload #fileListingWrapper').removeClass('hidden');
        $('#fileupload #initialUploadSection').addClass('hidden');
        $('#fileUploadBadge').addClass('hidden');

        // fix for safari
        getTotalRows();
        // end safari fix

        totalRows = getTotalRows()+1;
        updateTotalFilesText(totalRows);

    })
    .bind('fileuploadstart', function(e, data) {
        // hide/show sections
        $('#addFileRow').addClass('hidden');
        $('#processQueueSection').addClass('hidden');
        $('#processingQueueSection').removeClass('hidden');

        // set all cancel icons to processing
        $('.cancel').html('<img class="processingIcon" src="<?php echo SITE_IMAGE_PATH; ?>/processing_small.gif" width="16" height="16"/>');

        // set timer
        startTime = (new Date()).getTime();
    })
    .bind('fileuploadstop', function(e, data) {
        // finished uploading
        updateTitleWithProgress(100);
        updateProgessText(100, data.total, data.total);
        $('#processQueueSection').addClass('hidden');
        $('#processingQueueSection').addClass('hidden');
        $('#completedSection').removeClass('hidden');

        // set all remainging pending icons to failed
        $('.processingIcon').parent().html('<img src="<?php echo SITE_IMAGE_PATH; ?>/red_error_small.png" width="16" height="16"/>');

        // setup copy link
        setupCopyAllLink();
    })
    .bind('fileuploadprogressall', function(e, data) {
        // update page title with progress
        var progress = parseInt(data.loaded / data.total * 100, 10);
        updateTitleWithProgress(progress);
        updateProgessText(progress, data.loaded, data.total);
    })
    .bind('fileuploaddone', function(e, data) {
        // keep a copy of the urls globally
        fileUrls.push(data['result'][0]['url']);
    })
    .bind('fileuploadfail', function(e, data) {
        totalRows = getTotalRows();
        if(totalRows > 0)
        {
            totalRows = totalRows-1;
        }

        // if no items, show the original uploader
        if(totalRows == 0)
        {
            $('#fileupload #initialUploadSection').removeClass('hidden');
            $('#fileupload #fileListingWrapper').addClass('hidden');
            $('#fileUploadBadge').removeClass('hidden');
        }
        else
        {
            updateTotalFilesText(totalRows);
        }
    });

    // Open download dialogs via iframes,
    // to prevent aborting current uploads:
    $('#fileupload #files a:not([target^=_blank])').live('click', function (e) {
        e.preventDefault();
        $('<iframe style="display:none;"></iframe>')
            .prop('src', this.href)
            .appendTo('body');
    });

    //$(".ui-dialog-buttonpane").html("<div class='btn_bar_left'><div class='fileupload-progressbar'></div></div>"+$(".ui-dialog-buttonpane").html());
});

function setupCopyAllLink()
{
    // setup copy to clipboard
    $('#copyAllLink').zclip({
        path: "js/ZeroClipboard.swf",
        copy: getUrlsAsText()
    });
}

function updateProgessText(progress, uploadedBytes, totalBytes)
{
    // calculate speed & time left
    nowTime = (new Date()).getTime();
    loadTime = (nowTime - startTime);
    if(loadTime == 0)
    {
        loadTime = 1;
    }
    loadTimeInSec = loadTime/1000;
    bytesPerSec = uploadedBytes / loadTimeInSec;

    textContent = '';
    textContent += 'Progress: '+progress+'%';
    textContent += ' ';
    textContent += '('+bytesToSize(uploadedBytes, 1)+' / '+bytesToSize(totalBytes, 1)+')';

    $("#fileupload-progresstextLeft").html(textContent);

    rightTextContent = '';
    rightTextContent += 'Speed: '+bytesToSize(bytesPerSec, 1)+'ps. ';
    rightTextContent += 'Remaining: '+humanReadableTime((totalBytes/bytesPerSec)-(uploadedBytes/bytesPerSec));

    $("#fileupload-progresstextRight").html(rightTextContent);
}

function getUrlsAsText()
{
    urlStr = '';
    for(var i=0; i<fileUrls.length; i++)
    {
        urlStr += fileUrls[i]+'\n';
    }

    return urlStr;
}

function updateTitleWithProgress(progress)
{
    if(typeof(progress) == "undefined")
    {
        var progress = 0;
    }
    if(progress == 0)
    {
        $(document).attr("title", "<?php echo PAGE_NAME; ?> - <?php echo SITE_CONFIG_SITE_NAME; ?>");
    }
    else
    {
        $(document).attr("title", progress+"% Uploaded - <?php echo PAGE_NAME; ?> - <?php echo SITE_CONFIG_SITE_NAME; ?>");
    }
}

function getTotalRows()
{
    totalRows = $('#files .template-upload').length;
    if(typeof(totalRows) == "undefined")
    {
        return 0;
    }

    return totalRows;
}

function updateTotalFilesText(total)
{
    // removed for now, might be useful in some form in the future
    //$('#uploadButton').html('upload '+total+' files');
}

function setRowClasses()
{
    // removed for now, might be useful in some form in the future
    //$('#files tr').removeClass('even');
    //$('#files tr').removeClass('odd');
    //$('#files tr:even').addClass('odd');
    //$('#files tr:odd').addClass('even');
}

function showAdditionalInformation(ele)
{
    // block parent clicks from being processed on additional information
    $('.sliderContent table').unbind();
    $('.sliderContent table').click(function(e){
        e.stopPropagation();
    });

    // make sure we've clicked on a new element
    if(lastEle == ele)
    {
        // close any open sliders
        $('.sliderContent').slideUp('fast');
        // remove row highlighting
        $('.sliderContent').parent().parent().removeClass('rowSelected');
        lastEle = null;
        return false;
    }
    lastEle = ele;

    // close any open sliders
    $('.sliderContent').slideUp('fast');

    // remove row highlighting
    $('.sliderContent').parent().parent().removeClass('rowSelected');

    // select row and popup content
    $(ele).addClass('rowSelected');

    // set the position of the sliderContent div
    $(ele).find('.sliderContent').css('left', $(ele).offset().left);
    $(ele).find('.sliderContent').css('top', $(ele).offset().top+38);
    $(ele).find('.sliderContent').slideDown(400, function() {
    });

    return false;
}

function saveFileToFolder(ele)
{
    // get variables
    shortUrl = $(ele).closest('.sliderContent').children('.shortUrlHidden').val();
    folderId = $(ele).val();

    // send ajax request
    var request = $.ajax({
        url: "<?php echo _CONFIG_SITE_PROTOCOL . '://' . _CONFIG_SITE_FULL_URL; ?>/_updateFolder.ajax.php",
        type: "POST",
        data: {shortUrl: shortUrl, folderId: folderId},
        dataType: "html"
    });
} 
```

# css - CSS div 对齐就像一个谜题

> ID：13500226
> 
> 赞同：1
> 
> 时间：2012-11-21T19:00:40.993
> 
> 标签：css

我试图像拼图一样将这些 div 放在一起。我想在 div 1 和 3 之间对齐 div 4。截至目前，div 4 在 div 3 下开始。解决方案是什么，以便 div 相互“插槽”。

```
<div style='overflow:hidden;width:500px;'>
            <div style='float:left;width:200px;height:400px;border:1px solid #707070'>1</div>
            <div style='float:left;width:200px;height:300px;border:1px solid #707070'>2</div>
            <div style='float:left;width:200px;height:400px;border:1px solid #707070'>3</div>
            <div style='float:left;width:200px;height:300px;border:1px solid #707070'>4</div>
            </div> 
```

我不想使用绝对位置。这只是一个例子。真正的代码在循环中，内容大小是动态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:05:39.067

[jQuery 马索尔尼](http://masonry.desandro.com/)。单独的 CSS 不足以动态地做到这一点。

# algorithm - 动态规划二维平面算法的递归关系帮助

> ID：13500227
> 
> 赞同：3
> 
> 时间：2012-11-21T19:00:50.443
> 
> 标签：algorithm, dynamic-programming

所以我一直在研究一种算法。我要完成的任务是：考虑一个 2D 平面，有一些目标随机分布在 ay 上限和下限之间。这组是 T。T1 用坐标 (X,Y) 标记。有一组传感器保证覆盖每个目标，每个传感器的半径为 1 和 (X,Y) 坐标。每个目标都有一个成本 (c)，它是一个权重。所以我的任务是找到一个覆盖每个传感器的集合 S' 的最小重量或成本。

所以我知道“支配”或“控制”其他磁盘的磁盘之间存在递归关系，但我无法看到显示如何利用磁盘优势的属性。我做到了这一点：

令 D+ 为中心位于条带上方的一组圆盘（上圆盘）。

令 D- 为中心位于条带下方的一组圆盘（下圆盘）。

考虑一个上圆盘 d，并且 d 与一条垂直线 L 相交。如果满足以下条件之一，则称另一个上圆盘 d' 受 d 控制或支配： (1)d' 不与 L 相交 (2) 下d' 和 L 的交点高于 d 和 L 的下交点 (3) d' 和 L 的下交点与 d 和 L 的下交点相同，但 d' 的中心在d 中心的右侧。

类似地，对于下盘 d，并且 d 与垂直线 L 相交。如果满足以下条件之一，则称另一个下盘 d' 受 d 控制或支配： (1)d' 不与 L 相交 (2) d' 和 L 的上交叉端点低于 d 和 L 的上交叉端点 (3) d' 和 L 的上交叉端点与 d 和 L 的上交叉端点相同，但 d' 的中心位于 d 中心的右侧。例子：![三个半径为 1 的传感器](../Images/8afd381c5eb2c2ca4686f2e8e3be2e6d.png)

但是我在最终确定算法时遇到了麻烦。有什么帮助吗？明白了吗？

谢谢，克里斯托弗

# c - C 到程序集的转换问题

> ID：13500228
> 
> 赞同：3
> 
> 时间：2012-11-21T19:00:51.493
> 
> 标签：c, assembly

我试图在不使用 gcc -S 函数的情况下将我的 C 代码转换为汇编，因为我想自己练习汇编。出于某种原因，我无法让我的程序集文件与我的 c 代码匹配，我不知道为什么。这是我写的，C 代码是正确的，但汇编代码无法编译。这是sparc组件顺便说一句。

```
#include <stdio.h>

int charCompare( const void *ptr1, const void *ptr2 )
{
    char i = *((char *)ptr1);
    char j = *((char *)ptr2);

    if (i > j)
        return (1);
    if (i < j)
        return (-1);
    return (0);
} 
```

这是假定等效的汇编代码。

```
.global        charCompare      !makes the function globally usable
.section       ".text"

charCompare:
save    %sp, -96, %sp !save caller's window; if different than -96
cmp i1, i2     !compare i1 with i2
bg  returnpos !if i1 is greater than i2 jump to returntrue
cmp i1, i2     !compare i1 with i2
bl returnneg

returnneg:
set -1, %o0
ba end

returnpos:
set 1, %o0
ba end

end:
ret 
restore 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:03:38.537

尝试使用此命令：

```
gcc -S -O0 myfile.c 
```

额外的 gcc 选项将关闭所有优化（例如可以重新排列代码的优化）。

# javascript - 延迟脚本运行，直到所有资产都加载完毕

> ID：13500229
> 
> 赞同：1
> 
> 时间：2012-11-21T19:00:50.963
> 
> 标签：javascript, jquery, sinemacula

## 简要说明

这并不像听起来那么基本，所以在您阅读并理解我想要做的事情之前，请不要跳到回答:-)。

我有一个名为的对象`SineMacula`，其中包含一些像这样的基本函数（`ready`暂时忽略该函数）：

```
(function(global, $){

    // MOST CODE STRIPT OUT HERE */

    /**
     * Sine Macula Run
     * Makes it easy to write plugins for the Sine Macula library
     *
     * @param function callback
     */
    SM.run = run;
    function run(callback){
        // Call the function with the Sine Macula
        // and jQuery objects
        callback(SM, $);
    }

    /**
     * Sine Macula Ready
     * Executes code once the Sine Macula and jQuery
     * libraries are ready
     *
     * @param function callback
     */
    SM.ready = ready;
    function ready(callback){
        // Call the function with the Sine Macula
        // and jQuery objects
        jQuery(function($) {
            callback(SM, $);
        });
    }

    /**
     * Sine Macula Load
     * Load the Sine Macula Libraries and Plugins
     * into the current document
     *
     * The options:
     * - package: the package of libraries to load
     * - packageURL: a remote source to load the package details from
     * - libraries: any additional libraries to load
     *
     * @param object parameter The options for the Sine Macula load
     */
    SM.load = load;
    function load(options){
        // BUILD A QUERY HERE
        // ...
        // Complete the url by appending the query
        url = '//libraries.sinemaculammviii.com/'+query;        
        // Append the script tag to the end of the document
        script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = url;
        $('head')[0].appendChild(script);       
    }
})(this, this.jQuery); 
```

该`load()`函数通过将相关的脚本标签附加到页面的 来简单地加载页面的所有相关插件/库`head`。

加载页面中的所有脚本都作为调用函数的回调运行`run`。这样可以确保两者`jQuery`和`SineMacula`都传递给插件。

## 问题

这就是问题所在，因为库正在加载到`SineMacula`对象中，无法检测它们是否已加载。

例如，如果其中一个库包含一个名为 的函数插件`setDate()`，我运行：

```
SM.setDate() 
```

这不一定有效，因为该`setDate()`函数可能尚未加载到`SineMacula`对象中，因此它将返回“未捕获的 TypeError ...”。

任何人都可以建议对`SineMacula.ready()`功能进行良好的调整以检测库是否存在？

**请不要对`jQuery.load()`功能提出建议，我很清楚。**

我不希望解决方案是函数的回调`load()`，除非绝对必要。

我希望这是有道理的，如果不让我知道，我会发布更多信息。想让它尽可能简短。

提前致谢

**更新**

忘了提到我[在这里](https://libraries.sinemaculammviii.com/test.php)有一个测试页面，您可以在其中看到我遇到的错误并更好地了解我在做什么:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:18:22.180

如果我理解正确，它的用户`SM.run()`从他们的脚本中调用，然后调用`SM.load()`，它加载库的其他部分。

因此，如果是这种情况，那么无论如何，他们的脚本将在加载库的任何其他部分之前完成执行。

我认为您需要做的是要求用户将其`.run()`与其他代码放在一个单独的脚本中。然后您可以使用`document.write`加载其他脚本。这将导致他们加载并阻止下一个脚本，该脚本将包含用户的其余代码：

```
function load(options){
    // BUILD A QUERY HERE
    // ...
    // Complete the url by appending the query
    document.write('<scr' + 'ipt type="text/javascript" ',
                            ' src="//libraries.sinemaculammviii.com/' + query,
                            '"><\/scr' + 'ipt>');      
} 
```

* * *

```
<script type="text/javascript" src="/path/to/your/lib.js"></script>
<script type="text/javascript">
    SineMacula.load('all');
</script>

<!-- The document.write will write the new script here, and it will be loaded
         syncronously, so it will block. -->

<script type="text/javascript">
    // code that uses the loaded library parts
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:19:54.860

鉴于缺少某些上下文，不确定我是否在回答您的问题，但您可能想使用`Deferred`s：

```
SM.ready = ready;
function ready(callback){
    var deferred = $.Deferred();
    // Call the function with the Sine Macula
    // and jQuery objects
    jQuery(function($) {
        deferred.resolve();
        if (typeof(callback) === "function") {
            callback(SM, $);
        }
    });
    return deferred;
} 
```

现在您可以执行以下操作：

```
SM.ready().done(function() {
    // everything is now set.
}); 
```

# api - JBoss 7 管理 API - 删除数据源

> ID：13500236
> 
> 赞同：4
> 
> 时间：2012-11-21T19:01:15.577
> 
> 标签：api, datasource, jboss7.x

我正在尝试以编程方式删除我在 JBoss 7 中创建的数据源。

创建它很容易...

```
 ModelNode request = new ModelNode();
    request.get(ClientConstants.OP).set(ClientConstants.ADD);
    request.get(ClientConstants.OP_ADDR).add("subsystem",
            "datasources");
    request.get(ClientConstants.OP_ADDR).add("data-source",
        dataSourceName);

    request.get("jndi-name").set(dataSourceName);
    request.get("pool-name").set(poolName);
    request.get("use-java-context").set(Boolean.TRUE);
    request.get("connection-url").set(url);
    request.get("driver-name").set(driver-name));
    request.get("min-pool-size").set(.minPoolSize);
    request.get("max-pool-size").set(maxPoolSize);
    request.get("user-name").set(username);
    request.get("password").set("password");

    ModelControllerClient client = ModelControllerClient.Factory.create(
            InetAddress.getByName(LOCALHOST), 9999);
    client.execute(new OperationBuilder(request).build());
    client.close(); 
```

我的standalone.xml 创建并启用

```
...
<subsystem xmlns="urn:jboss:domain:datasources:1.1">
  <datasources>
     <datasource jndi-name="name" pool-name="poolName" enabled="true" use-java-context="true">
       <connection-url>*url*</connection-url>
       <driver>driver</driver>
       ...
      </datasource>
      <drivers>
        <driver...>
           ...
        </driver>
      </drivers>
    </datasources>
  </subsystem>
... 
```

但是...我找不到如何以编程方式删除它。有谁能够帮我？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:21:45.933

其实很简单。您需要知道对象的完整地址，然后简单地调用删除操作。

```
ModelNode request = new ModelNode();
request.get(ClientConstants.OP).set("remove");
request.get(ClientConstants.OP_ADDR).add("subsystem",
    "datasources");
request.get(ClientConstants.OP_ADDR).add("data-source",
    dataSourceName);

ModelControllerClient client = ModelControllerClient.Factory.create(
        InetAddress.getByName(LOCALHOST), 9999);
client.execute(new OperationBuilder(request).build());
client.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:47:34.617

现在可以使用完整的 API 来处理此类操作。

[Jboss 控制器操作执行器](https://github.com/techblue/jboss-controller-operation-executor)

希望这可以帮助。

# jquery - jquery移动条件缓存

> ID：13500239
> 
> 赞同：0
> 
> 时间：2012-11-21T19:01:22.127
> 
> 标签：jquery, caching, jquery-mobile, mobile

是否可以使用 jquery mobile 有条件地缓存页面？

例如，每次从站点上的任何其他位置导航到页面时都应重新加载页面上的数据，除非从从该页面调用的模式对话框返回。

我只能让它做一个或另一个，总是缓存或从不缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:54:35.180

是的，您可以通过编程方式调用此函数来缓存您的页面。

```
// you can get the page from where the call is being transferred from    
var referrer =  document.referrer;

// Use this code to disable the cache
pageContainerElement.page({ domCache: false }); 
```

并且在调用模态对话框之前，您可以使用 domCache: true 调用该方法

```
// Use this code to cache the page
pageContainerElement.page({ domCache: true }); 
```

# java - ClassCastException Beansbinding Java

> ID：13500245
> 
> 赞同：2
> 
> 时间：2012-11-21T19:01:47.293
> 
> 标签：java, user-interface, jtextfield, classcastexception, beans-binding

你能告诉我为什么我在这里得到`ClassCastException`异常吗？

```
protected void initDataBindings() {
    BeanProperty<Apprentice, String> apprenticeBeanProperty = BeanProperty.create("vorname");
    ObjectProperty<JTextField> jTextFieldObjectProperty = ObjectProperty.create();
    AutoBinding<Apprentice, String, JTextField, JTextField> autoBinding = Bindings.createAutoBinding(UpdateStrategy.READ_WRITE, apprentice, apprenticeBeanProperty, txtVorname, jTextFieldObjectProperty);
    autoBinding.bind();
} 
```

这是文本字段：

```
 {
            txtVorname = new JTextField();
            //txtVorname.setPreferredSize(new Dimension(txtVorname.getPreferredSize().width + 160, txtVorname.getPreferredSize().height));
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 1;
            gbc.gridy = 0;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            rightPanel.add(txtVorname, gbc);
        } 
```

并且*Apprentice.java*具有属性“vorname”（德语为名字），它是带有 getter 和 setter 的私有字段。

```
private String vorname;

public Apprentice(){
    ;
}

public String getVorname() {
    return vorname;
}

public void setVorname(String vorname) {
    this.vorname = vorname;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:39:26.347

我自己找到了解决方案，我绑定的“自我对象”而不是“文本”必须如下所示：

```
protected void initDataBindings() {
    BeanProperty<Apprentice, String> apprenticeBeanProperty_1 = BeanProperty.create("vorname");
    BeanProperty<JTextField, String> jTextFieldBeanProperty_1 = BeanProperty.create("text");
    AutoBinding<Apprentice, String, JTextField, String> autoBinding_1 = Bindings.createAutoBinding(UpdateStrategy.READ_WRITE, apprentice, apprenticeBeanProperty_1, txtVorname, jTextFieldBeanProperty_1);
    autoBinding_1.bind();
} 
```

不管怎么说，还是要谢谢你 ：）

# webgl - 从 webgl 中获取数据

> ID：13500249
> 
> 赞同：2
> 
> 时间：2012-11-21T19:01:57.633
> 
> 标签：webgl

我有兴趣在 webgl 中执行一些密集计算，所以它在 GPU 上运行。

大多数文档都谈到了如何渲染图形。

我正在完成非常简单的任务：对于给定的图像，将其转换为灰度，并找到局部最大值的坐标（比其邻居更亮的像素）。

我想在 webgl 着色器中运行“循环”，但是将局部最大值像素的 (x, y) 输出到 javascript 世界。可行吗？最好的方法是什么，以便通过并行处理像素来表现良好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:12:20.950

您可以使用着色器渲染全屏四边形，该着色器在某个正方形中从纹理（图像）中采样像素（如 4x4 或 16x16 分辨率，受最大纹理样本数量限制）并输出最大值作为片段颜色 + 最大像素纹理坐标（如果需要) 到较低分辨率的纹理。所以你会缩小图像。您可以对其进行迭代以实现全局最大值。

阅读此[http://www.lcg.ufrj.br/Cursos/GPUProg/GPGPU_Reductions](http://www.lcg.ufrj.br/Cursos/GPUProg/GPGPU_Reductions)

# php - 将值列表压缩成其独特的 3 位数字的数学。UNION 3 位数

> ID：13500250
> 
> 赞同：-1
> 
> 时间：2012-11-21T19:01:58.010
> 
> 标签：php, math, union

寻找一种方法以 UNION 方式统一这样的列表。

```
87401
87441
87561
86421
57401 
```

放入一个数组或类似的东西，注意只有一个 874。

```
874
875
864
574 
```

这是我想出的，它有效，但我正在寻找一种方法，我不必遍历数组 3-> 4 次

```
$l=array(87401,87402,87400,87801,73567,80031);
print_r($l);
function sub(&$item1, $key, $n=3)
{
    $item1 = substr($item1,0,$n);
}

array_walk($l,'sub',3);
print_r( array_unique($l));
//output is below
Array ( [0] => 874 [3] => 878 [4] => 735 [5] => 800 ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:05:16.917

我想出了这个：

```
$nums = array(87401,87441,87561,86421,57401,'4.1007995605469E-5','3.6001205444336E-5');
$result = array();
foreach($nums as $n){
    $num = floor(substr($n,0,3));
    if(!in_array($num,$result)){
        $result[] = $num;
    }
}
print_r($result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:15:34.000

```
$arr=array(87401, 87441, 87561, 86421, 57401);

$callback = function($num) { return substr($num,0,3); };
$newarr = array_unique(array_map($callback, $arr)); 
```

# spring-mvc - 为什么不注入这个bean？

> ID：13500253
> 
> 赞同：0
> 
> 时间：2012-11-21T19:02:06.810
> 
> 标签：spring-mvc, dependency-injection, spring-security, autowired

我很习惯使用 Spring 和 Spring Security，但我不知道为什么这里的依赖注入不起作用。我有一个具有两个基本身份验证系统的应用程序，一个用于用户，一个用于两个管理员。这是 security-context.xml：

```
<http use-expressions="true">
    <intercept-url pattern="/" access="isAuthenticated()" />
    <intercept-url pattern="/*" access="isAuthenticated()" />
    <intercept-url pattern="/admin" access="hasRole('ROLE_ADMIN')" />
    <intercept-url pattern="/admin/*" access="hasRole('ROLE_ADMIN')" />
    <http-basic />
</http>

<beans:bean id="userDetailsServiceImpl"
    class="com.foo.bar.service.LoginServiceImpl" />

<authentication-manager>
    <authentication-provider user-service-ref="userDetailsServiceImpl" />
    <authentication-provider>
        <password-encoder hash="md5" />
        <user-service>
            <user name="AdminOne" password="eh223rh2efi9hfuwefugwg"
                authorities="ROLE_ADMIN" />
            <user name="AdminTwo" password="wdkjbcfwerjkbiwfviwefi"
                authorities="ROLE_ADMIN" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

用户认证依赖于 UserDetailsS​​ervice 的这个实现：

```
public class LoginServiceImpl implements UserDetailsService {

@Autowired
UserDetailsDAO dao;

public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException {

    try {
        // Get the credentials
        return credentials;
    } catch (NoResultException exc) {

        throw new UsernameNotFoundException("username not found");
    } catch (JDBCException jdbce) {
        throw new DataAccessException("Cannot acess db", jdbce) {
            private static final long serialVersionUID = 1L;
        };
    }
} 
```

问题是该字段`UserDetailsDAO`为空。所以没有注入。奇怪的是，在测试环境中一切正常。并且在服务器启动期间没有抛出异常，这也很奇怪，因为通常会报告自动装配中的错误。顺便说一句，管理员的身份验证就像一个魅力。

如果有用，这是 web.xml： foo

```
<servlet>
    <servlet-name>Foo Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
        <!-- Here the context specific for a single project -->
        /WEB-INF/spring/root-context.xml
                /WEB-INF/spring/datasource-context.xml
        </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>StreamViewer Dispatcher Servlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
    <!-- Here the context for all the projects -->
        /WEB-INF/spring/security-context.xml
    </param-value>
</context-param>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:27:30.107

`<context:annotation-config />`您应该`security-context.xml`启用[AutowiredAnnotationBeanPostProcessor](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/annotation/AutowiredAnnotationBeanPostProcessor.html)来设置`@Autowired`注释字段的值。

从文档：

> 默认的 AutowiredAnnotationBeanPostProcessor 将由“context:annotation-config”和“context:component-scan”XML 标签注册。如果您打算指定自定义 AutowiredAnnotationBeanPostProcessor bean 定义，请删除或关闭默认注释配置。

请参阅[context:annotation-config 是 @AutoWired 的替代品吗？](https://stackoverflow.com/questions/2985030/is-contextannotation-config-an-alternative-to-autowired)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:06:33.047

如果要使用自动装配，则需要扫描 bean 而不是在 xml 文件中显式声明它们。

你应该更换

```
<beans:bean id="userDetailsServiceImpl"
    class="com.foo.bar.service.LoginServiceImpl" /> 
```

和：

```
<context:component-scan base-package="com.foo.bar" /> 
```

并使用以下方法注释您的 LoginServiceImpl 类：

```
@Service(name="userDetailsServiceImpl") 
```

# c - 设计俄罗斯方块游戏

> ID：13500257
> 
> 赞同：0
> 
> 时间：2012-11-21T19:02:32.377
> 
> 标签：c

最近，我在一家不错的公司面试，被要求用高效的数据结构设计俄罗斯方块游戏。我回答了每个形状的二维数组，但面试官正在寻找更好的答案。然后，他让我也设计 Ludo。

对这两个问题有任何意见吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:14:45.163

*一个不错的选择是列出每件从原点*开始的三对偏移量（第四个偏移量是`{0.0}`）。这将让您对[形状](http://en.wikipedia.org/wiki/Tetris)进行如下编码：

```
I  {0,1}  {0,2}  {0,3}
J  {0,1}  {1,1}  {2,1}
L  {0,1}  {-1,1} {-2,1}
O  {0,1}  {1,1}  {1,0}
S  {-1,0} {-1,1} {-2,1}
T  {-1,1} {0,1}  {1,1}
Z  {1,0}  {1,1}  {2,1} 
```

有了这些列表，您就可以绘制形状，检查“玻璃”以获取相应形状的可用空间，应用旋转，然后将其放置在玻璃内的最终静止位置。[与大多数操作需要两个嵌套循环的 2D 结构不同，这种结构可以让您使用单个循环进行测试，如果您展开](http://en.wikipedia.org/wiki/Loop_unwinding)其琐碎的四个步骤，甚至可以不使用循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T19:09:15.997

我不知道如何做 Ludo，但俄罗斯方块首先想到的是使用位掩码。

您可以制作一个足够大的“超级形状”以包含俄罗斯方块中的所有形状，然后打开掩码中的位以制作“形状”。

这样每个形状都可以是相同的对象类型。当它们“着陆”时，您可以打开代表电路板的更大位掩码中的位。当正确的位组都在“制作一条线”时，您可以处理该事件。

# javascript - 是否有用于 facebook 的omniauth 代码/插件，我可以将其直接放入我的 ruby on rails 网站？

> ID：13500258
> 
> 赞同：0
> 
> 时间：2012-11-21T19:02:32.327
> 
> 标签：javascript, ruby-on-rails, ruby, devise, omniauth

我正在用 ruby​​ on rails 在 teamtreehouse.com 课程上创建一个社交网络。

但是，在课程中，他们没有添加“使用 facebook 登录”功能。

有没有我可以直接输入的代码以便它可以工作？还是插件类型的东西？

我试图遵循[这门课程](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)，但我并没有真正理解它。

会话["

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:45:10.603

[这是Ryan Bates 在使用 Facebook 登录时写](http://railscasts.com/episodes/360-facebook-authentication)的一个很棒的RailsCast ，应该可以解释您需要的大部分内容。

（是的，您确实需要从 Facebook 获得一个特殊的开发者令牌）。

然后，花 9 美元购买 Pro 订阅——在没有 RailsCasts 的情况下编写 Rails 对我来说是不可思议的 :-)

# html - Facebook 没有从博客中提取元数据

> ID：13500259
> 
> 赞同：0
> 
> 时间：2012-11-21T19:02:35.780
> 
> 标签：html, css, facebook, metadata

我注意到我从 11 月 12 日开始的博客文章 ( ) 在发布到 Facebook 时根本没有提取元数据。我查看了 11 月 12 日之前的帖子，一切似乎都还好。不知道出了什么问题。任何帮助将非常感激。

我在下面放置了几个屏幕截图的链接......

非工作元数据拉取：

工作元数据拉取：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:17:44.540

[Facebook 对象调试器](http://developers.facebook.com/tools/debug)报告您的[og:image 存在问题](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fnubaseagency.com%2Fnews%2F13606757)：

> Unable to download og:image: og:image 标签的 url 引用的图片无法下载。

查看您网站的来源，我根本看不到[`og:image`](http://developers.facebook.com/docs/opengraphprotocol/)标签。

# excel - SQL Select 包含长度大于 100 的 nvarchar 列时的 VBA 多步错误

> ID：13500260
> 
> 赞同：3
> 
> 时间：2012-11-21T19:02:37.203
> 
> 标签：excel, sql-server-ce, vba

我编写了一个 Excel VB 应用程序，它可以访问并在需要时修改 SQLCE 数据库。这是vba中的连接字符串：

```
dbConnectionString = "Provider=Microsoft.SQLSERVER.CE.OLEDB.3.5;Data Source=C:\sitsDB.sdf;" 
```

我几乎完成了这个项目，一切都很好，除了我想扩展 SQLCE 数据库文件中的一个字段以允许存储更多字符。
该字段属于数据类型`nvarchar`，默认长度为 100（显然应该允许 50 个字符？）

我希望至少在其中存储 200 个字符的打开文本框需要该字段。

我在 Microsoft Visual Basic 2010 Express 中创建了初始数据库，当我将字段长度更改为`nvarchar`大于 100 的任何值时，当我的`SQL SELECT`语句运行时出现以下错误：

> 运行时错误“-2147217887 (80040e21)”：多步操作产生错误。检查每个状态值。

这是 VBA 中的 SQL 语句：

```
With rsResults
    .Source = "SELECT * FROM Incidents WHERE Number = " & number
    Set .ActiveConnection = dbConnection
    .CursorLocation = adUseClient
    .CursorType = adOpenStatic
    .Open
End With 
```

错误发生`.Open`在线路上。

我可以更改`SELECT * FROM`以仅选择某些列，消除长度大于 100 的字段，并且一切都会按预期工作。

所以，这绝对是一个字段的长度大于 100 的事实。如果我将该字段恢复为 100 的长度，一切都会正常工作......

我不太了解我在那里使用的`.CursorLocation`和功能。`.CursorType`我通过示例学习，这是我首先找到的示例。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:37:52.130

在写出这个解释时，我意识到我没有尝试过一些事情。`.CursorLocation`也就是说，我没有用and愚弄`.CursorType`。事实证明，更改`.CursorLocation`为`.CursorLocation = adUseServer`将解决我看到的问题。我现在可以使用 nvarchar 的长度一直到 4000。

# php - strstr 返回空行而不是字符串的第一部分

> ID：13500263
> 
> 赞同：1
> 
> 时间：2012-11-21T19:02:52.113
> 
> 标签：php, concatenation, strstr

我正在尝试从 WordPress 中的 RSS 提要中连接一个字段。示例数据行是：

```
The Scala in London, - David Ford is touring the UK in support of his brand new 
album, 'Charge', released in March 2013 
```

它使用以下代码显示：

```
<?php echo esc_html( $item->get_description() ); ?> 
```

`,`我希望它在- 因此显示“伦敦的斯卡拉”之前停止

我已使用此代码代替上述代码：

```
<?php echo strstr($item->get_description, "-"); ?> 
```

但是它只返回一个空行。我究竟做错了什么？

# python - 用泡菜加密

> ID：13500266
> 
> 赞同：3
> 
> 时间：2012-11-21T19:03:10.640
> 
> 标签：python, pickle

我想加密一个输入行，这行应该这样加密： PASSWORD = ABCCDEF ，所以第一个输入的字母变成“A”，那个字母保持这种状态，如你所见，“S”和“S”是两者都是C。然后我希望将输入行和加密行保存到文件中（使用`pickle`），并且应该保存加密密钥，以便我们稍后解密。

我知道如何使用泡菜，所以那部分都很好，但是加密/解密是模糊的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:01:38.293

作为提示，您可能应该使用将每个字符映射到它的加密密码字符的字典。这是一个良好的开端。它遍历 中的每个字符`plain`，并将加密字符附加到新字符串。现在您只需要考虑应该如何`encryptor`实现映射（提示：给定其中的键数，您可以分配下一个密码字符）。

```
plain = 'PASSWORD'
cipher = ''
encryptor = {}

for ch in plain:
    if ch in encryptor:
        # TODO: Implement so that encryptor[ch] = 'A' for the first letter,
        # But encryptor[ch] = 'B' for the second etc
        pass
    cipher += encryptor[ch] 
```

祝你好运，一定要为你的代码写一些测试！

# c++ - 从 C/C++ 程序生成内联核心转储

> ID：13500268
> 
> 赞同：0
> 
> 时间：2012-11-21T19:03:14.557
> 
> 标签：c++, c, coredump

在某些应用程序的开发过程中，我们需要在不完全停止程序执行的情况下获得完整的核心转储。

当然，在某些情况下会产生核心转储，在这些情况下可能无法安全地继续，但我们不是在谈论内存损坏等。

我要做的是向程序发送一个信号并生成一个完整的内核，而不会或最小地影响程序执行

这可能吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:10:59.137

请参阅此 Google 库，它可能会有所帮助：[http ://code.google.com/p/google-coredumper/](http://code.google.com/p/google-coredumper/)

> coredumper 库可以编译到应用程序中以创建正在运行的程序的核心转储——无需终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:40:15.363

[Coredumpber](http://code.google.com/p/google-coredumper/)适用于 Linux，如果那是您的操作系统，显然是个好主意。

对于其他类似 Posix 的系统，这样的事情应该可以正常工作：

```
#include <stdlib.h>
#include <process.h>

// Fork and abort for a core dump. This process keeps running.
if (fork() == 0) abort(); 
```

当然环境必须设置为 dump core on `SIGABRT`。你也可以试试`raise(SIGTERM)`，就是这样`kill -9`。

# python - Python为什么变量和返回显示打印变量的差异值？

> ID：13500270
> 
> 赞同：0
> 
> 时间：2012-11-21T19:03:35.787
> 
> 标签：python

```
>>> pkt = sniff(count=2,filter="tcp")
>>> raw  = pkt[1].sprintf('%Padding.load%')
>>> raw
"'\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00g\\xc4|\\x00\\x00\\x00\\x00\\x00'"

>>> print raw
'\x04\x00\x00\x00\x00\x00\x00\x00g\xc4|\x00\x00\x00\x00\x00' 
```

使用打印时原始产生不同的输出

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:06:03.463

一个是`repr()`字符串的表示，另一个是打印的字符串。您可以将表示粘贴回解释器以再次生成相同的字符串。

Python 交互式提示总是`repr()`在回显变量时使用，`print`总是使用`str()`字符串表示。

它们在其他方面是相同的。试试`print repr(raw)`对比：

```
>>> "'\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00g\\xc4|\\x00\\x00\\x00\\x00\\x00'"
"'\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00g\\xc4|\\x00\\x00\\x00\\x00\\x00'"
>>> print "'\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00g\\xc4|\\x00\\x00\\x00\\x00\\x00'"
'\x04\x00\x00\x00\x00\x00\x00\x00g\xc4|\x00\x00\x00\x00\x00'
>>> print repr("'\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00g\\xc4|\\x00\\x00\\x00\\x00\\x00'")
"'\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00g\\xc4|\\x00\\x00\\x00\\x00\\x00'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:09:46.360

[`__str__`并且`__repr__`](http://docs.python.org/2/reference/datamodel.html#object.__repr__)类的内置方法可以返回他们想要的任何字符串值。有些类会简单地使用 str() 作为他们的代表。

```
class AClass(object):

   def __str__(self):
      return "aclass"

   def __repr__(self):
      return str(self)

class AClass2(AClass):

   def __repr__(self):
      return "<something else>"

In [2]: aclass = AC
AClass   AClass2  

In [2]: aclass = AClass()

In [3]: print aclass
aclass

In [4]: aclass
Out[4]: aclass

In [5]: aclass2 = AClass2()

In [6]: print aclass2
aclass

In [7]: aclass2
Out[7]: <something else>

In [8]: repr(aclass2)
Out[8]: '<something else>'

In [9]: repr(aclass)
Out[9]: 'aclass' 
```

`repr`只是为了显示类的“标签”，例如当您打印包含一堆此实例的列表时......它应该看起来如何。

`str`是如何将实例转换为要在操作中使用的正确字符串值。

# c# - wpf中WindowState.Maximized到WindowState.Normal时如何禁用滚动？

> ID：13500278
> 
> 赞同：1
> 
> 时间：2012-11-21T19:04:18.253
> 
> 标签：c#, wpf, visual-studio-2010, xaml

我一直在开发一个 wpf 应用程序。**当我使用“ WindowState.Maximized** ”时，一切都很好，但我必须将以下代码添加到具有 Metro 风格菜单的 mainform 中。我不喜欢地铁风格导航的滚动如何删除滚动。我添加了菜单的边距 0,0,0,0 但不起作用。当我将最大化更改为正常时，我不喜欢滚动。如何删除滚动？

```
 public MainWindow()
        {
            InitializeComponent();

            this.Width = System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Width;
            this.Height = System.Windows.Forms.Screen.PrimaryScreen.WorkingArea.Height;
            this.Left = 0;
            this.Top = 0;
            this.WindowState = WindowState.Normal; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:25:34.550

我认为一个很好的方法是使用转换器。您可以创建一个`IValueDataConver`从滚动查看器栏可见性属性转换为窗口状态属性的方法，并在`ScrollViewer.HorizontalScrollBarVisibility`属性或`ScrollViewer.VerticalScrollBarVisibility`属性中设置绑定到属性的两种方式`Windows.WindowState`。

这很好，因为您不需要在 xaml 或后面的代码中添加其他磨损代码。

锄头这可以帮助你...

# ravendb - RavenDBs 授权包中的单个会话中的多个操作

> ID：13500279
> 
> 赞同：0
> 
> 时间：2012-11-21T19:04:20.817
> 
> 标签：ravendb

我一直在玩 RavenDB，想使用授权包来控制权限。但是，我无法确定将复杂代码（复杂的业务逻辑繁重）组合成可重用块的最佳方法，同时保持授权不变。

对于复杂的代码，我将它们提取到一组通用的方法中，以便可以重用代码。这些方法中的每一个都大致映射到一个授权操作，并且方法本身执行自己的`session.SecureFor`

但是，它似乎`session.SecureFor`适用于会话级别，并且仅适用于`SecureFor`SaveChanges 之前进行的最后一次调用。

例如

```
 public void AuthorizeAndSchedule()
    {
        using (var session = store.OpenSession())
        {
            dynamic patient = new ExpandoObject();
            session.Store(patient);
            session.SetAuthorizationFor((object)patient, new DocumentAuthorization
            {
                Tags = {"Patient" }
            });

            ScheduleAppointment(session, "Authorization/Users/DrHowser", patient);
            Hospitalize(session, "Authorization/Users/DrHowser", patient);

            session.SaveChanges();
        }

    }

    protected void Hospitalize(IDocumentSession session, string requester, dynamic patient)
    {
        session.SecureFor(requester, "Hospitalization/Authorize");
        //assume other more complicated things are going on here
        patient.HospitilizationAuthorized = true;
        session.Store(patient);
    }

    protected void ScheduleAppointment(IDocumentSession session, string requester, dynamic patient)
    {
        session.SecureFor(requester, "Hospitalization/ScheduleAppointment");
        //assume other more complicated things are going on here
        patient.AppointmentScheduledFor = DateTime.Now.AddDays(1);
        session.Store(patient);
    } 
```

在上面的代码中，如果 Howser 博士有权进行住院治疗但没有 ScheduleAppointment 的权限，则此代码仍将成功并且患者被安排预约 - 这是因为 Hospitlize 已覆盖任何安排预约的权限要求

每个会话只允许一次操作吗？如果我想执行两个单独的操作，我必须打开两个不同的会话吗？...或者我只是在接近这个完全错误的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:19:58.203

Auth 捆绑包旨在允许每个服务器调用一次操作，是的。存储不去服务器，这就是为什么你只看到最后一个操作在那里。只有当 SaveChanges() 被调用时，你才会看到。

# encryption - 使用 Microsoft Excel 进行 RSA 加密

> ID：13500280
> 
> 赞同：2
> 
> 时间：2012-11-21T19:04:23.703
> 
> 标签：encryption, excel, cryptography, rsa, vba

是否有任何现成的用于 Excel 的 RSA 加密算法的实现（只需使用给定的公钥加密纯文本，仅此而已）？或者我需要从一开始就实施它？我谷歌但没有发现任何有用的东西。

欢迎任何有用的链接。

**更新：**

我需要一个非商业图书馆。

# javascript - 带有导航和中央突出显示缩略图的 jQuery 轮播

> ID：13500282
> 
> 赞同：2
> 
> 时间：2012-11-21T19:04:28.413
> 
> 标签：javascript, jquery, html, css, carousel

我在一天的大部分时间里一直在解决这个问题，所以任何帮助都将非常感激。

正如标题所说，我正在寻找一个带有下一个和上一个导航的轮播，附加到更大的图像上。除此之外，我还想要缩略图，与此页面非常相似。

[http://friquemag.net/demos/etalage/?v=132](http://friquemag.net/demos/etalage/?v=132)

现在我的问题是，当我左右导航时，使用右侧的按钮最终我到达缩略图的末尾，它一直跳到左边，滚动过去所有以前查看过的缩略图，我是希望有人能告诉我如何让缩略图像顶部的主图像一样无限循环滚动。

我在 Stack Over Flow 上搜索并找到了这个链接

[https://stackoverflow.com/questions/7184719/auto-content-slider-with-carousel-thumbnails-navigation-in-jquery](https://stackoverflow.com/questions/7184719/auto-content-slider-with-carousel-thumbnails-navigation-in-jquery)

但遗憾的是它没有回答我的问题。

可以在此处找到指向 js 文件的链接

`http://friquemag.net/demos/etalage/js/jquery.etalage.min.js`

还有这里的css文件

`http://friquemag.net/demos/etalage/css/etalage.css`

非常感谢任何有关解决此问题的帮助。

提前感谢大家

卡梅伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:22:56.700

所以你需要一个带有缩略图的无限轮播？试试这个 - [http://showcase.awkwardgroup.com/](http://showcase.awkwardgroup.com/)

[这是下载和文档](https://bitbucket.org/awkwardgroup/awkward-showcase/wiki/Home)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T09:42:13.973

试试[刷卡器](http://www.idangero.us/swiper/demos/23-thumbs-gallery.html)。

这是[文档](http://www.idangero.us/swiper/api/#.VWWRMs-qpBc)

# php - 生成干净 URL 的 PHP 函数 - 撇号

> ID：13500285
> 
> 赞同：0
> 
> 时间：2012-11-21T19:04:48.777
> 
> 标签：php, clean-urls, apostrophe

我想为我的数据库站点创建干净的 URL，并且我决定最好的方法是创建一个字段来存储它们各自条目的 URL。

我正在使用 GenerateUrl 函数（在[此处](http://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/)找到）从源名称创建一个干净的 URL：-

```
function GenerateUrl ($s) {

    // Convert accented characters, and remove parentheses and apostrophes
    $from = explode (',', "ç,æ,œ,á,é,í,ó,ú,à,è,ì,ò,ù,ä,ë,ï,ö,ü,ÿ,â,ê,î,ô,û,å,e,i,ø,u,(,),[,],'");
    $to   = explode (',', 'c,ae,oe,a,e,i,o,u,a,e,i,o,u,a,e,i,o,u,y,a,e,i,o,u,a,e,i,o,u,,,,,,');

    // Do the replacements, and convert all other non-alphanumeric characters to spaces
    $s = preg_replace ('~[^\w\d]+~', '-', str_replace ($from, $to, trim ($s)));

    // Remove a - at the beginning or end and make lowercase
    return strtolower (preg_replace ('/^-/', '', preg_replace ('/-$/', '', $s)));
} 
```

尽管我在使用撇号时遇到了问题，但它在大多数情况下都很好用。

用作引号（即仅触及一侧的另一个字符）它们可以正常工作：- 'Eiffel Tower (Paris)' 成为 URL：`eiffel-tower-paris`

但用作实际的撇号（即夹在两个字符之间），不太好：- 圣保罗大教堂（伦敦）成为 URL：`st-paul-s-cathedral-london`

我正在使用 PHP 5.4.3 并且有代码来撤消对魔术引号的修改（这应该是问题的原因）。

非常感谢任何有关解决此问题的建议。

谢谢，

安迪

* * *

是的，所需的 URL 是：`st-pauls-cathedral-london`

我刚刚弄清楚了我给 DOES 工作的原始函数代码（撇号分别在 $from 和 $to 行的末尾被替换为空）。

但是，它似乎只有在我将函数应用于页面上的名称时才有效，即

```
<?php echo generateurl($attraction['attraction_name']); ?> 
```

但是我目前正在做的是在将数据输入网站时应用 index.php 文件中的函数。我*怀疑*问题出在我将函数应用于已经应用了以下函数的值（以处理魔术引号）的事实：-

```
$attraction_name = mysqli_real_escape_string($link, $_POST['attraction_name']);
$attraction_url = generateurl($attraction_name); 
```

我认为在受到mysqli_real_escape_string 的影响之前，我必须改变一些编码以从traction_name 生成URL。我会让你知道我是怎么过的...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:15:00.267

如果`st-paul-s-cathedral-london`不正确，那么我假设您想要`st-pauls-cathedral-london`？在这种情况下，我认为最好完全删除字符串中的所有撇号。如果它在字母之间，它将被完全删除，所以`paul's`变成`pauls`，但如果有另一个字符，那么那个字符无论如何都会变成一个破折号，所以仍然不需要撇号。

我会更改最后一行，如下所示。它用空替换了`'`，并使用更简单`trim`的方法来删除前导和尾随破折号。不需要正则表达式，代码更短更清晰。

```
return trim(str_replace("'", '', strtolower($s)), '-'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:16:40.617

添加另一个正则表达式以删除撇号。

```
$s = str_replace ($from, $to, trim ($s));
$s = preg_replace("~'~", '', $s);
$s = preg_replace ('~[^\w\d]+~', '-', $s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:14:07.180

是的，事实证明“mysqli_real_escape_string”是问题的原因。对代码进行一些重新排序似乎已经对其进行了排序：-

```
$attraction_url = generateurl($_POST['attraction_name']);
$attraction_name = mysqli_real_escape_string($link, $_POST['attraction_name']); 
```

谢谢！

安迪

* * *

如何从任何 URL 的开头删除“the”、“a”和“an”：-

将上述 GenerateUrl 函数代码的最后一行替换为：-

```
return strtolower (preg_replace ('/^-/', '', preg_replace ('/-$/', '', preg_replace ('/\b(^the|^a|^an)\b/i', '', $s)))); 
```

[来自Stack Overflow](https://stackoverflow.com/questions/11049252/how-to-use-regex-to-delete-everything-except-some-words)的关于此主题的有用建议。

[还有一篇关于在Regex Tutorial](http://www.regular-expressions.info/wordboundaries.html)中使用 \b 作为正则表达式中单词边界的好文章。

# batch-file - 使用 .cmd 文件在 txt 文件中查找和替换

> ID：13500287
> 
> 赞同：1
> 
> 时间：2012-11-21T19:04:53.440
> 
> 标签：batch-file, cmd

我创建了一个 .cmd 文件，它以文件名作为参数，然后它要求查找字符串，然后要求替换字符串。

想要的输出

findthis 应该从给定文件中替换为 replacewith 但它不起作用

以下是我尝试过的代码..

```
@echo off
setlocal enabledelayedexpansion

if not exist "%1" (echo this file does not exist...)&goto :eof

set /p findthis=find this text string:
set /p replacewith=and replace it with this:

for /f "tokens=*" %%a in (%1) do (

   set write=%%a
   if %%a==%findthis% set write=%replacewith%

   echo !write! 
   echo !write! >>%~n1.replaced%~x1
) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-26T09:58:24.297

我已经修复了您的代码中有几个简单的错误。您应该将字符串放在引号中，因为它们很可能包含空格。有时它们可​​能是一个导致回显问题的空字符串，所以我添加了一个“;” 回声来处理这个问题：

```
@echo off
setlocal enabledelayedexpansion

if not exist "%1" (echo this file does not exist...)&goto :eof

set /p findthis=find this text string:
set /p replacewith=and replace it with this:

for /f "tokens=*" %%a in (%1) do (

   set write=%%a
   if "%%a"=="%findthis%" set write=%replacewith%

   echo;!write! 
   echo;!write! >>%~n1.replaced%~x1
) 
```

但是，这只能匹配和替换整行，而不是行内的文本字符串。要替换一行中的子字符串，您必须使用变量字符串替换语法（在问题中多次引用：[here](https://stackoverflow.com/questions/2772456/string-replacement-in-batch-file)和 finally [here](https://stackoverflow.com/questions/17085650/find-a-string-and-replace-specific-letters-in-batch-file?lq=1)。

后一个答案包含解决原始问题所需的一切。

# networking - Powershell 检测到额外的映射驱动器

> ID：13500288
> 
> 赞同：2
> 
> 时间：2012-11-21T19:04:55.257
> 
> 标签：networking, powershell, windows-xp

在 Windows PC（比如“MYPC”）上，我有多个映射驱动器；根据`net use`：

```
>net use
New connections will be remembered.

Status       Local     Remote                    Network

-------------------------------------------------------------------------------
OK           X:        \\BLAHBLAH1\e$            Microsoft Windows Network
OK           Y:        \\BLAHBLAH2\e$            Microsoft Windows Network
OK           Z:        \\BLAHBLAH3\s$            Microsoft Windows Network
The command completed successfully. 
```

但是当我在那台 PC 上运行这个 Powershell 时：

```
$disks = Get-WmiObject -Class Win32_MappedLogicalDisk -Filter "DeviceID='Z:'"
foreach($disk in $disks)
{
      [Console]::WriteLine("DEBUG: " + $disk.Name + " is " + $disk.ProviderName );
} 
```

它返回：

```
DEBUG: \\MYPC\root\cimv2:Win32_MappedLogicalDisk.DeviceID="Z:",SessionID="4491554321" is \\OTHERPC\c$\
DEBUG: \\MYPC\root\cimv2:Win32_MappedLogicalDisk.DeviceID="Z:",SessionID="3129225404" is \\BLAHBLAH3\s$
DEBUG: \\MYPC\root\cimv2:Win32_MappedLogicalDisk.DeviceID="Z:",SessionID="5884378361" is \\BLAHBLAH3\s$ 
```

这些其他 Z 映射驱动器是从哪里来的？它们如何占用相同的驱动器号？我可以判断它们是否可以安全移除，如果可以，如何移除？

MYPC 实际上是一个服务器，所以我不能只清除所有映射的驱动器（我通常会这样做）。

如果这是由于其他用户显示了映射驱动器，我该如何更改 Powershell 以缩小到仅登录用户（确切`net use`的行为方式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:02:28.117

您是否尝试测试设备的可用性或状态属性？
[这可能会导致本地登录用户使用网络驱动器，请参阅http://msdn.microsoft.com/en-us/library/windows/desktop/aa394194(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394194%28v=vs.85%29.aspx)底部的注释
也许你正在运行终端服务器，因此请检查 Win32_LogonSession 类以获取有关在 providerName 中看到的会话 ID 的更多信息

# java - 调整图像的对比度

> ID：13500289
> 
> 赞同：1
> 
> 时间：2012-11-21T19:05:01.893
> 
> 标签：java, math, image-processing

我试图对图像应用对比度，但我找不到一个好的公式来做到这一点。我尝试了许多不同的网站公式，但都没有奏效。有人有什么建议吗？

这是我最近的尝试：

```
int r = Colors.red(pixel);
int g = Colors.green(pixel);
int b = Colors.blue(pixel);

float red = r / 255.0f;
float green = g / 255.0f;
float blue = b / 255.0f;

red = (((red - 0.5f) * amount) + 0.5f) * 255.0f;
green = (((green - 0.5f) * amount) + 0.5f) * 255.0f;
blue = (((blue - 0.5f) * amount) + 0.5f) * 255.0f;

int iR = (int)red;
iR = iR > 255 ? 255 : iR;
iR = iR < 0 ? 0 : iR;
int iG = (int)green;
iG = iG > 255 ? 255 : iG;
iG = iG < 0 ? 0 : iG;
int iB = (int)blue;
iB = iB > 255 ? 255 : iB;
iB = iB < 0 ? 0 : iB; 
```

那没有用。有人有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:18:39.457

我想到了！这是寻找相同效果的任何人的完整代码。

```
float value = (255.0f + amount) / 255.0f;
value *= value;
for(int i = 0; i < ImageSync.previewPixels.length; i++){
    int pixel = ImageSync.previewPixels[i];
    int r = Colors.red(pixel);
    int g = Colors.green(pixel);
    int b = Colors.blue(pixel);

    float red = r / 255.0f;
    float green = g / 255.0f;
    float blue = b / 255.0f;

    red = (((red - 0.5f) * value) + 0.5f) * 255.0f;
    green = (((green - 0.5f) * value) + 0.5f) * 255.0f;
    blue = (((blue - 0.5f) * value) + 0.5f) * 255.0f;

    int iR = (int)red;
    iR = iR > 255 ? 255 : iR;
    iR = iR < 0 ? 0 : iR;
    int iG = (int)green;
    iG = iG > 255 ? 255 : iG;
    iG = iG < 0 ? 0 : iG;
    int iB = (int)blue;
    iB = iB > 255 ? 255 : iB;
    iB = iB < 0 ? 0 : iB;

    ImageSync.previewPixels[i] = Colors.rgba(iR, iG, iB);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-29T14:32:53.937

我开发了一个基于平均图像强度对比图像的公式。它的制作方式是，如果强度像素低于平均强度，它会变得更暗；但它高于平均强度，它会变得更亮。

![C(x,y)=I(x,y)^{{(1+\overline{I}-I(x,y))}^{\alpha}}](../Images/5c63e83b87e62cb6cd496308d35cedc0.png)

![\overline{I} = \frac{1}{NM}\sum_{x=0}^{N-1}\sum_{y=0}^{M-1}{I(x,y)}](../Images/e341c29f9f697b33646afcdcd34d9ffb.png)

I(x,y) 必须标准化为介于 0 和 1 之间。对比度级别由 alpha 因子定义。将其设置为 0，您将获得零对比度。

这是一些 OpenCV 代码：

```
cv::Mat setImageContrast(cv::Mat image, double alpha)
{
    cv::Mat output = cv::Mat::zeros(image.rows, image.cols, CV_8UC1);
    double I_mean = 0.0;
    int N = image.cols * image.rows;

    for(int x = 0; x < image.cols; x++) {
        for(int y = 0; y < image.rows; y++) {
            I_mean += (double)image.at<unsigned char>(y,x)/255.0;
        }
    }
    I_mean /= (double)N;

    for(int x = 0; x < image.cols; x++) {
        for(int y = 0; y < image.rows; y++) {
            double I = (double)image.at<unsigned char>(y,x)/255.0;
            I = pow(I, pow(1.0 + I_mean - I, alpha)) * 255.0;
            output.at<unsigned char>(y,x) = (int)I;
        }
    }
    return output;
} 
```

# javascript - HTML 验证器返回“文档类型不允许元素“脚本”在这里”

> ID：13500293
> 
> 赞同：1
> 
> 时间：2012-11-21T19:05:22.287
> 
> 标签：javascript, jquery, html, validation

我在玩 jQuery。我做的一切都很好，它工作正常（我正在尝试制作我自己的插件），没有错误。但是，当我尝试使用[http://validator.w3.org](http://validator.w3.org/)验证页面时，出现 1 个错误：**文档类型不允许此处的元素“脚本”。**

我不知道我做错了什么。这是我的 html（我猜这里的 js 并不重要）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Admin</title>

    <!-- Load jQuery -->
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/Document-Load.js"></script>

    <link rel="stylesheet" type="text/css" href='css/iG_Style.css' />
</head>
<body>
    <div id="body"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T15:12:57.887

我在 w3c 验证器上测试没有问题，最佳做法是在正文之前使用脚本标记，如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Admin</title>

    <link rel="stylesheet" type="text/css" href='css/iG_Style.css' />
</head>
<body>
    <div id="body"></div>
  <!-- Load jQuery -->
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/Document-Load.js"></script>

</body>
</html> 
```

**此文档已成功检查为 XHTML 1.0 Strict！**

# git - 将分支合并到 master 上的新子目录

> ID：13500294
> 
> 赞同：2
> 
> 时间：2012-11-21T19:05:25.200
> 
> 标签：git

我有一个带有 master 和 feature 分支的仓库。我想知道是否有办法将功能分支合并为主分支下的新子目录。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:48:18.120

`git am`有一个`--directory=<dir>`开关，所以你告诉哪个目录用作应用补丁的基础。

所以，首先制作一个`git format-patch`然后应用它们：

```
$ git checkout master
$ git format-patch -o ../patches/ master..feature-branch
$ git am --directory=feature-subdir ../patches/* 
```

`--directory=<dir>`被传递`git apply`给`git am`。来自`git help apply`：

```
 --directory=<root>
       Prepend <root> to all filenames. If a "-p" argument was also passed, it is applied before prepending the new root.

       For example, a patch that talks about updating a/git-gui.sh to b/git-gui.sh can be applied to the file in the working tree modules/git-gui/git-gui.sh by running git apply
       --directory=modules/git-gui. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:22:53.960

是的你可以。只需将功能分支的内容移动到一个目录，然后将其与*master*合并。

# php - 从mysql读取100行每行50个字符还是从文本文件读取它们更快？

> ID：13500295
> 
> 赞同：2
> 
> 时间：2012-11-21T19:05:28.973
> 
> 标签：php, mysql

如果我想使用 php 阅读`100 lines`，哪个更快？从`MySql table`简单的`Text File`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T19:09:03.670

使用更适合你的东西。

对于 100 行和一次读取所有内容的操作，性能差异将非常小，根本不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:12:12.620

试试看：

```
$time_start = microtime();
$mysqli->query("SELECT * FROM TABLE LIMIT 100");
$time_end = microtime();
echo 'TIME: '.($time_end-$time_start).'<br>';

$time_start = microtime();
$fh = fopen("file.txt",'r');
$x=0;
while(($row = fgets($fh, 4096)) !== false) {
    if($x>100){
        break;
    }
    $x++;
}
fclose($fh);
$time_end = microtime();
echo 'TIME: '.($time_end-$time_start).'<br>'; 
```

在我看来，在服务器上定位文件、打开、运行和关闭会比拥有活动的数据库连接要慢。但是，我不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:07:30.657

去MySQL。当您将它与从文本文件中读取进行比较时，它会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T19:10:54.980

如果该文件仅包含 100 行（因此您基本上是从头到尾阅读它）并且您不必以某种方式对其进行过滤，那么从文件中读取会更快。

MySQL 也从文件中读取（某些内容也缓存在 RAM 中）。

既然你提到了 MySQL，我怀疑它并不是那么简单。如果它不只是使用 MySQL，你会很高兴；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T19:29:42.697

就像另一个人说的，差异应该是微乎其微的。如果您真的需要尽可能快的访问时间，MySQL HEAP（内存）表的返回速度应该比文件访问快得多。

# asp.net - 如何在 nHibernate 中设置 Oracle ClientId 字段？

> ID：13500302
> 
> 赞同：1
> 
> 时间：2012-11-21T19:05:54.430
> 
> 标签：asp.net, oracle, nhibernate, database-connection

通过使用 nHibernate 库，有没有办法将 Oracle ClientId 设置为连接对象？如果 nHibernate 不支持 ClientId 字段的设置，我该怎么做才能将自定义字符串分配给从 nHibernate 获得的 Oracle 连接对象？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:17:11.980

该连接以 session.Connection 的形式提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:46:02.690

您应该创建一个继承`DriverConnectionProvider`并覆盖的类`GetConnection()`。在那里您可以修改`IDbConnection`对象。当然你还需要在 NHibernate SessionFactory 配置中配置这个类，例如在 hibernate.cfg.xml 中。

# c++ - 使用纹理坐标重复纹理的部分

> ID：13500305
> 
> 赞同：1
> 
> 时间：2012-11-21T19:06:06.643
> 
> 标签：c++, directx, coordinates, texture-mapping, uv-mapping

我有一个纹理和矩形。

我想在那个矩形上重复纹理。**但只是其中的一部分。**

假设我想在 X 和 Y 上使用从`0.25`到的纹理坐标并重复 2 次。`0.75`

如果我将矩形顶点的坐标设置为：

```
(0.25, 0.25)
(0.25, 0.75 * 2)
(0.75 * 2, 0.25)
(0.75 * 2, 0.75 * 2) 
```

这不会重复纹理 from `0.25`to`0.75`两次，但会产生纹理 from `0.25`to`1.0`和 from `1.0`to `0.25`，这是不同的。

如何实现我的目标，不改变纹理，使用它的一部分并只重复那部分？

请注意，**我不想向矩形添加更多顶点。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:36:47.857

使用片段着色器很容易实现：

```
float scale;
float offset;

sampler2D baseMap;

struct PS_INPUT 
{
   float2 Texcoord : TEXCOORD0;

};

float4 ps_main( PS_INPUT Input ) : COLOR0
{
   float2 tc =  fmod(Input.Texcoord, scale) + float2(offset, offset);
   return tex2D( baseMap, tc);

} 
```

This shader is symmetrical so lookup window moves along diagonal. But you can apply own offset and scale to each texture coordinate component separately then window will move totally freely.

# php - OpenJs 网格 mysql

> ID：13500308
> 
> 赞同：0
> 
> 时间：2012-11-21T19:06:18.863
> 
> 标签：php, mysql

我尝试使用 OpenJs Grid 访问 mysql 表。我已经仔细检查了数据库“partsdb”和表“parts”是否存在并且可以从命令行访问。

目前我正在使用必须的基本示例：

成员.php：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Members Page</title>
<script>
$(function() {
    $(".parts").grid();
});
</script>

</head>
<body>

<div id="container">
    <h1>Members Page</h1>

    <table action="ajax.php">
        <tr>
            <th col="id">Id</th>
            <th col="name">Name</th>
        </tr>
    </table>

    <a href='<?php echo base_url()."main/logout" ?>'>Logout</a>
</div> 
```

和 ajax.php

```
<?php
mysql_connect("localhost","****","*****");
mysql_select_db("partsdb");

require_once("grid.php");

$grid = new Grid("parts");

?> 
```

当我直接在 ajax.php 上运行 php 时，我收到一条错误消息，告诉我：“Unknown column 'parts.' 在“字段列表”中”，并且该表仅显示标题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:54:23.007

改变

```
<table action="ajax.php"> 
```

至

```
<table class="grid parts" action="ajax.php"> 
```

看看是否有帮助:)

# storage - “持久”的 Kademlia 网络？

> ID：13500313
> 
> 赞同：1
> 
> 时间：2012-11-21T19:06:30.553
> 
> 标签：storage, distributed, p2p, kademlia

不久前，我使用了 Kademlia (KAD) 协议。我了解它是如何工作的，并且我想到可以使用它来创建分布式数据存储。

无论如何，有一个问题：在 Kademlia 中，每个数据包都有一个“拥有”它的节点。当请求数据时，它会传播到下一个节点，但会被分配一个 TTL。之后，它将被删除。Kademlia 中的想法是，“所有者”节点在数据过期之前刷新其他节点上的数据。

据我了解，即使“所有者”节点离开网络，这也会导致缓存数据 - 但只是暂时的。如果所有者节点再也没有回来，那么从它复制到其他节点的所有数据迟早会过期，因此过一段时间数据就会消失。

虽然这对于人们想要共享文件的 P2P 网络来说是可以的，但对于分布式数据存储来说就不是很好了。

怎么可能处理这个？

或者 - 是否有另一个类似于 Kademlia 的 P2P 协议考虑到这一点？在我的想象中，“完美”的解决方案是如果总是有许多 N 个节点来保存复制的数据。一旦其中一个离开，剩余的 N-1 个节点就会寻找另一个将数据推送到的节点，这样您就会再次拥有 N 个节点。

这样的协议存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:14:08.000

您是否有兴趣开发自己的协议实现或使用现有解决方案？

如果您想尝试自己的实现，我建议您查看我认为很好的[Chord DHT。](https://en.wikipedia.org/wiki/Chord_(peer-to-peer))

# google-app-engine - GAE ServletContextListener

> ID：13500317
> 
> 赞同：0
> 
> 时间：2012-11-21T19:06:46.330
> 
> 标签：google-app-engine, gae-eclipse-plugin

我尝试在我的 GAE 项目中添加一个类来实现 ServletContextListener，但是当我添加一个新类并尝试从超类浏览器中进行选择时，它没有将 ServletContextListener 列为选项。

我安装了 Eclipse Juno（Mac 64 位），添加了 GAE 插件，创建了一个 GAE 项目，然后手动添加了 JAX-RS 和 JAXB jar 文件。

我怀疑我可能需要添加一个项目方面，例如“动态 Web 模块”，但每当我尝试这样做时，我都会收到 Eclipse 错误（空指针和/或空用户库可供选择；我不确定我是否'我打算创建库，但我希望在添加 JPA / JAXRS 方面后填充这些库？）。

你有什么指点

1) 为 GAE 和 JAX-RS / JAXB 正确设置 Eclipse 需要哪些步骤 2) 另外引入 Servlet 接口，例如 ServletContextListener。3) 早期版本的Eclipse能否解决Dynamic Web Module问题

非常感谢！抢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T08:18:31.847

因为 ServletContextListener 是一个接口，应该从“Interfaces to Add”按钮中选取。

# android - 一次滑动/手势触发多个按钮（onClick 事件）

> ID：13500318
> 
> 赞同：6
> 
> 时间：2012-11-21T19:06:46.150
> 
> 标签：android, android-layout

简而言之，我正在寻找的是 -**单次滑动触发多个按钮（视图）的 onClick 事件。**

我刚刚开始开发我的第一个 android 应用程序，并且面临一个可能并不复杂的问题，但由于我没有任何经验，我无法拼凑出解决方案。

我正在尝试实现对多个按钮的滑动，以检测它们何时被滑动并触发 onClick 功能。我看过 Gestures and Flings 没有任何成功。

曾尝试在 StackOverflow 上实现一些之前的相关解决方案：

[网格布局上的 Fling 手势检测](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)

[检测可点击项目上的投掷手势](https://stackoverflow.com/questions/9181529/detect-fling-gesture-over-clickable-items/9182176#9182176)

是否可以从正在滑动并彼此相邻的按钮的中心动态绘制一条线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-23T18:49:39.850

我一直在寻找解决方案，终于让它工作了。所以我会在这里回答，希望对某人有所帮助。

我在检测带有多个按钮的布局的滑动时遇​​到问题，因此我覆盖了`setOnTouchListener`每个按钮的方法，在内部调用`gesturedetector.onTouchEvent(event)`（并对检测到的事件执行您想要执行的操作）。

显然，要检测按钮单击事件，您只需要使用`setOnClickListener`方法。

也许这不是完成这项工作的最优雅的方式，但至少对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T16:43:27.993

您可以只覆盖按钮的 onTouch 方法来确定是否触摸了按钮。这将在滑动按钮时触发。从那里您可以调用应该由 onClickEvent 触发的方法。

要在按钮之间画线，您可以在 xml 中定义它们，如果两个按钮被同一次滑动激活，则只需切换可见性。

# jquery - jQUery对话框隐藏效果重复？

> ID：13500319
> 
> 赞同：1
> 
> 时间：2012-11-21T19:06:48.957
> 
> 标签：jquery

我动态加载包含该对话框声明的页面：

```
$("#promo-code-modal").dialog({
    modal: true,
    autoOpen: false,
    minHeight: 500,
    minWidth: 500,
    maxHeight:500,
    maxWidth:500,
    resizable: false,
    show: { 
        effect:"scale",
        speed:1000
    },
    hide: { 
        effect:"scale",
        speed:1000
    }
}); 
```

如果我第二次（或更多）加载该页面，则在`close`活动期间，我会看到两次（或更多）的功能`scale`效果`hide`。为什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:25:13.973

也许您每次重新加载页面时都会创建一个对话框，请尝试以下操作：

```
$("#promo-code-modal").clone().dialog({
    modal: true,
    autoOpen: false,
    minHeight: 500,
    minWidth: 500,
    maxHeight:500,
    maxWidth:500,
    resizable: false,
    show: { 
    effect:"scale",
    speed:1000
    },
    hide: { 
    effect:"scale",
    speed:1000
    },
    close: function(){
    $(this).dialog('destroy').remove();
    }
}); 
```

希望对你有效。

# java - 我怎样才能得到一个列表 来自 HashMap 的键 ?

> ID：13500321
> 
> 赞同：1
> 
> 时间：2012-11-21T19:06:58.220
> 
> 标签：java, android

我有一个`HashMap<String, String> item`，我需要从一个数组中获取所有的键，所以我可以这样做：

```
for (String s : mapKeys)
{
  Log.d("MyString", s);
} 
```

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:08:15.553

```
for (String s : item.keySet()) {
  Log.d("MyString", s);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:08:12.440

您需要使用在 HashMap[`Map#keySet`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#keySet%28%29)中为您提供 a`Set`的方法：-`keys`

```
Map<String, String> map = new HashMap<String, String>();

for(String key: map.keySet()) {
    Log.d("MyString", key);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T19:08:42.030

接口中有[`keySet`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#keySet%28%29)方法`Map`。要获得一个*数组*（正如您在问题中提到的），您可以使用

```
item.keySet().toArray(new String[item.size()]) 
```

但是你可以很容易地迭代它`keySet`本身，

```
for (String s : item.keySet()) {
    ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-21T19:08:55.963

尝试：

```
for (String key : myHashMap.keySet()) {
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T19:11:56.697

如评论中所述，请查看返回键的[http://developer.android.com/reference/java/util/HashMap.html#keySet](http://developer.android.com/reference/java/util/HashMap.html#keySet) () `Set`。您可以在键上运行 for 循环，`Set`如下所示：

```
for (String s : item.keySet()) {
  Log.d("hashmap_keys", s);
} 
```

# c++ - 返回向量中索引处的元素

> ID：13500322
> 
> 赞同：0
> 
> 时间：2012-11-21T19:07:04.680
> 
> 标签：c++

如何删除向量中指定索引处的元素，然后返回该元素？有没有办法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:10:34.353

[`erase`](http://en.cppreference.com/w/cpp/container/vector/erase)可以删除指定索引处的元素，但不返回该元素。

你可以这样做：

```
aboutToBeErased = myVector.at(index);
myVector.erase(myVector.begin() + index); 
```

不过要小心，向量并不擅长删除不在向量末尾的元素。对于大型向量，这可能是一项代价高昂的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T19:09:14.523

1.  要获取元素，您可以使用**[`std::vector::at()`](http://www.cplusplus.com/reference/stl/vector/at/)**

    ```
    value = mVector.at(n); 
    ```

2.  要擦除，**[`std::vector::erase()`](http://www.cplusplus.com/reference/stl/vector/erase/)** 以下将擦除项目编号。`n+1`并调整你的向量。

    ```
    mVector.erase (mVector.begin()+n); 
    ```

擦除会移动所有元素，因此如果您确实擦除了中间的元素，则会移动索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T19:16:26.120

这是一个用 C++11 编写的函数，它将从向量中获取第 n 个元素并合理有效地擦除它：

```
template<typename Vector>
typename Vector::value_type getAndErase( Vector& vec, size_t index )
{
  Assert( index < vec.size() );
  typename Vector::value_type retval = std::move(vec[index]);
  vec.erase( vec.begin()+index );
  return retval;
} 
```

# android - 使用 Handler 类实现倒数计时器

> ID：13500327
> 
> 赞同：0
> 
> 时间：2012-11-21T19:07:30.203
> 
> 标签：android, timer, handler

好吧[，这个](https://stackoverflow.com/questions/4065219/implementing-a-timer-in-android-thats-active-all-the-time-even-during-screen-t)问题与我所问的基本相似，我尝试在每 1 秒运行一次可运行的服务上使用计时器，该可运行可更新其他活动中的某些 UI。

此活动可以在后台运行或停止，但服务不能停止倒计时，正如附加问题中的人所说，我有时也会在唤醒手机时同时运行所有可运行文件。

他得到的答案是使用 AlarmManager，但 Android 文档不鼓励使用 AlarmManager 来处理超时和滴答声，并建议使用处理程序，所以有人举了一个例子来说明它是如何正确使用处理程序的吗？

请注意，当手机进入睡眠状态时问题开始出现，并且仅在一段时间后，Timer 可以正常工作 30 分钟，但几个小时内它不会...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:25:49.633

几个概念...

**睡眠模式**

`WAKE_LOCK`如果没有用户交互或请求，Android 内核将进入睡眠模式（默认情况下） 。这样做是为了最大限度地减少电池利用率，这意味着任何代码都将停止运行。

**报警管理器**

这是一个可以设置 timmer 事件以唤醒内核并开始运行代码的 API。如果应用程序需要执行一些长时间的活动，它应该请求唤醒舔，否则内核将在短时间内再次进入睡眠模式。

**您的应用程序发生了什么**

一旦设备进入睡眠状态，您的服务就会停止。当设备被用户或手机中其他应用程序发出的警报管理器请求唤醒时，您的服务将再次启动。当手机再次进入睡眠状态时，您的服务也会进入睡眠状态。

**你应该做什么**

首先，您应该仔细考虑是否真的需要在手机一段时间未使用时（何时应该进入睡眠模式）进行更新。也许没有人在使用它，并且让服务持续运行，会不断消耗电池。

如果您不需要该服务持续运行，您有 2 个选项：

**使用警报管理器**

以固定的间隔时间唤醒设备（使用尽可能低的频率）并更新您的服务工作。如果这需要一些时间，请请求 a`WAKE_LOCK`并在完成后释放它。

**最后使用**

如果您可以等待用户唤醒手机以更新您的服务工作，那就更好了。只需删除除最后一个之外的所有更新请求。

**最后**

如果您确实需要服务持续运行，请`WAKE_LOCK`在服务启动时请求。只是不要忘记您将在电池现场支付。

`Note:`不管您使用 a还是其他任何东西`Timer`，`Handler`上述内容都将始终适用。

问候。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T19:16:14.330

您可以尝试[ScheduledExecutor](http://nick-lab.gs.washington.edu/java/jdk1.5b/api/java/util/concurrent/ScheduledExecutor.html)

# python - python：通过sftp从socks5代理后面上传文件

> ID：13500329
> 
> 赞同：1
> 
> 时间：2012-11-21T19:07:35.443
> 
> 标签：python, proxy, sftp

我正在尝试寻找任何允许我通过 sftp 将文件上传到远程机器的示例代码，条件是我们位于 SOCKS5 代理后面。

我试图弄清楚使用 paraproxy 是否可以完成这项工作。

# maven - 尝试使用 ${parent.groupid} 从子 pom 引用父 pom 时出现“不可解析的父 POM：无法传输工件”

> ID：13500332
> 
> 赞同：20
> 
> 时间：2012-11-21T19:07:46.183
> 
> 标签：maven, pom.xml, parent-pom

我正在关注maven的教程。我有一个非常简单的项目，里面有几个模块。在模块 pom 上，我想通过 ${parent.groupid} 和 ${parent.version} 引用主项目 pom 版本和组，因此如果我更改其中任何一个，我就不必在子 pom 中搜索和更改它们，但我得到不可解析的父 POM：无法传输工件错误

我已经在 stackoverflow 上阅读了几个“不可解析的父 POM：”问题，但我所阅读的内容没有任何帮助。

我的目录结构如下：

```
tutorial_maven(dir)
 --> pom.xml(file)
 --> tutorial_maven_jar(dir)
     --> pom.xml(file) 
```

我收到以下错误：

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 03:44:56-0500)
Maven home: C:\Program Files (x86)\apache-maven-3.0.4
Java version: 1.7.0_09, vendor: Oracle Corporation
Java home: C:\Program Files\Java\jdk1.7.0_09\jre
Default locale: es_EC, platform encoding: UTF-8
OS name: "windows 7", version: "6.1", arch: "amd64", family: "windows"
[INFO] Error stacktraces are turned on.
[DEBUG] Reading global settings from C:\Program Files (x86)\apache-maven-3.0.4\conf\settings.xml
[DEBUG] Reading user settings from C:\Users\fureta.DESARROLLO03\.m2\settings.xml
[WARNING] Command line option -npr is deprecated and will be removed in future Maven versions.
[DEBUG] Using local repository at C:\Users\fureta.DESARROLLO03\.m2\repository
[DEBUG] Using manager EnhancedLocalRepositoryManager with priority 10 for C:\Users\fureta.DESARROLLO03\.m2\repository
[INFO] Scanning for projects...
[DEBUG] Using connector WagonRepositoryConnector with priority 0 for http://repo.maven.apache.org/maven2
Downloading: http://repo.maven.apache.org/maven2/${parent/groupId}/tutorial_maven/${parent.version}/tutorial_maven-${parent.version}.pom
[DEBUG] Writing resolution tracking file C:\Users\fureta.DESARROLLO03\.m2\repository\${parent\groupId}\tutorial_maven\${parent.version}\tutorial_maven-${parent.version}.pom.lastUpdated
[DEBUG] Extension realms for project org.felipe:tutorial_maven:pom:1.0-SNAPSHOT: (none)
[DEBUG] Looking up lifecyle mappings for packaging pom from ClassRealm[plexus.core, parent: null]
[DEBUG] Extension realms for project org.felipe:tutorial_maven_webapp:war:1.0-SNAPSHOT: (none)
[DEBUG] Looking up lifecyle mappings for packaging war from ClassRealm[plexus.core, parent: null]
[ERROR] The build could not read 1 project -> [Help 1]
org.apache.maven.project.ProjectBuildingException: Some problems were encountered while processing the POMs:
[WARNING] 'parent.relativePath' points at org.felipe:tutorial_maven instead of ${parent.groupId}:tutorial_maven, please verify your project structure @ line 3, column 13
[FATAL] Non-resolvable parent POM: Could not transfer artifact ${parent.groupId}:tutorial_maven:pom:${parent.version} from/to central (http://repo.maven.apache.org/maven2): Illegal character in path at index 37: http://repo.maven.apache.org/maven2/${parent/groupId}/tutorial_maven/${parent.version}/tutorial_maven-${parent.version}.pom and 'parent.relativePath' points at wrong local POM @ line 3, column 13

at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:363)
at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:636)
at org.apache.maven.DefaultMaven.getProjectsForMavenReactor(DefaultMaven.java:585)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:234)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
[ERROR]   
[ERROR]   The project ${parent.groupId}:tutorial_maven_jar:${parent.version} (C:\Users\fureta.DESARROLLO03\IdeaProjects\tutorial_maven\tutorial_maven_jar\pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not transfer artifact  ${parent.groupId}:tutorial_maven:pom:${parent.version} from/to central  (http://repo.maven.apache.org/maven2): Illegal character in path at index 37:  http://repo.maven.apache.org/maven2/${parent/groupId}/tutorial_maven/${parent.version}/tuto rial_maven-${parent.version}.pom and 'parent.relativePath' points at wrong local POM @ line  3, column 13 -> [Help 2]
org.apache.maven.model.resolution.UnresolvableModelException: Could not transfer  artifact ${parent.groupId}:tutorial_maven:pom:${parent.version} from/to central  (http://repo.maven.apache.org/maven2): Illegal character in path at index 37:  http://repo.maven.apache.org/maven2/${parent/groupId}/tutorial_maven/${parent.version}/tuto rial_maven-${parent.version}.pom
at  org.apache.maven.project.ProjectModelResolver.resolveModel(ProjectModelResolver.java:159)
at org.apache.maven.model.building.DefaultModelBuilder.readParentExternally(DefaultModelBuilder.java:813)
at org.apache.maven.model.building.DefaultModelBuilder.readParent(DefaultModelBuilder.java:664)
at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:310)
at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:232)
at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:410)
at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:379)
at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:495)
at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:379)
at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:343)
at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:636)
at org.apache.maven.DefaultMaven.getProjectsForMavenReactor(DefaultMaven.java:585)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:234)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could not  transfer artifact ${parent.groupId}:tutorial_maven:pom:${parent.version} from/to central  (http://repo.maven.apache.org/maven2): Illegal character in path at index 37:  http://repo.maven.apache.org/maven2/${parent/groupId}/tutorial_maven/${parent.version}/tuto rial_maven-${parent.version}.pom
at  org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538)
at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216)
at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:193)
at org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveArtifact(DefaultRepositorySystem.java:286)
at org.apache.maven.project.ProjectModelResolver.resolveModel(ProjectModelResolver.java:155)
... 30 more
Caused by: org.sonatype.aether.transfer.ArtifactTransferException: Could not transfer artifact ${parent.groupId}:tutorial_maven:pom:${parent.version} from/to central (http://repo.maven.apache.org/maven2): Illegal character in path at index 37: http://repo.maven.apache.org/maven2/${parent/groupId}/tutorial_maven/${parent.version}/tutorial_maven-${parent.version}.pom
at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:951)
at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:941)
at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:669)
at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalArgumentException: Illegal character in path at index 37: http://repo.maven.apache.org/maven2/${parent/groupId}/tutorial_maven/${parent.version}/tutorial_maven-${parent.version}.pom
at java.net.URI.create(URI.java:859)
at org.apache.maven.wagon.providers.http.httpclient.client.methods.HttpGet.<init>(HttpGet.java:69)
at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInputData(AbstractHttpClientWagon.java:778)
at org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:116)
at org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88)
at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)
at      org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:601)
... 4 more
Caused by: java.net.URISyntaxException: Illegal character in path at index 37: http://repo.maven.apache.org/maven2/${parent/groupId}/tutorial_maven/${parent.version}/tutorial_maven-${parent.version}.pom
at java.net.URI$Parser.fail(URI.java:2829)
at java.net.URI$Parser.checkChars(URI.java:3002)
at java.net.URI$Parser.parseHierarchical(URI.java:3086)
at java.net.URI$Parser.parse(URI.java:3034)
at java.net.URI.<init>(URI.java:595)
at java.net.URI.create(URI.java:857)
... 10 more
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the    following articles:
[ERROR] [Help 1]   http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException
[ERROR] [Help 2]   http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException 
```

我已经阅读了帮助 1 和帮助 2 中的链接，但没有发现任何帮助。从我可以从日志中了解到的是，maven 正在 maven 存储库中寻找我的主要 pom ......

我错过了什么？

我的主要 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0  http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>org.felipe</groupId>
  <artifactId>tutorial_maven</artifactId>
  <version>1.0-SNAPSHOT</version>
    <modules>
        <module>tutorial_maven_jar</module>
        <module>tutorial_maven_webapp</module>
    </modules>
    <packaging>pom</packaging>

  <name>tutorial_maven</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <!--<log4j.version>1.2.17</log4j.version>-->
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
</project> 
```

我的模块 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0   http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <artifactId>tutorial_maven</artifactId>
        <groupId>${parent.groupId}</groupId>
        <version>${parent.version}</version>
        <relativePath>../pom.xml</relativePath>
    </parent>
    <modelVersion>4.0.0</modelVersion>

    <artifactId>tutorial_maven_jar</artifactId>
    <packaging>jar</packaging>

    <name>tutorial_maven_jar</name>
    <url>http://maven.apache.org</url>

    <properties>
         <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
            <!--<optional>true</optional>-->
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
    </dependencies>
</project> 
```

最好的问候， 费利佩

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-21T22:10:28.963

看起来您正在尝试从父级继承 groupId，并同时使用继承的 groupId 指定父级！

在子 pom 中，使用如下内容：

```
<modelVersion>4.0.0</modelVersion>

<parent>
  <groupId>org.felipe</groupId>
  <artifactId>tutorial_maven</artifactId>
  <version>1.0-SNAPSHOT</version>
  <relativePath>../pom.xml</relativePath>
</parent>

<artifactId>tutorial_maven_jar</artifactId> 
```

使用类似的属性`${project.groupId}`在那里不起作用。如果这样指定parent，那么可以继承child pom中的groupId和version。因此，您只需要在子 pom.xml 中指定 artifactId。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-06-12T06:51:19.317

我假设这个问题已经回答了。如果上述解决方案无助于解决问题，则可以使用以下解决方案。

如果有时您的 Maven 用户设置未反映正确的 settings.xml 文件，则会出现此问题。

要更新设置文件，请转到 Windows > Preferences > Maven > User Settings 并将 settings.xml 更新到正确的位置。

一旦完成重新构建项目，这些应该可以解决问题。谢谢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T22:19:24.250

我遇到过同样的问题。`<modules>`通过在列出的父文件夹中添加 pom.xml 来修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-04T09:22:35.650

正如 Nayan 所说，在我的情况下，路径必须正确更新，apache-maven 安装在**C:\apache-maven**中，而 **settings.xml**位于**C:\apache-maven\conf\settings.xml 中**

如果这不起作用，
在我的情况下转到您的本地存储库**C:\Users\<<"name">>.m2\**
并搜索**.lastUpdated**并删除它们，
然后构建**maven**

# django - 通过模型查找用户

> ID：13500333
> 
> 赞同：0
> 
> 时间：2012-11-21T19:07:56.773
> 
> 标签：django, django-forms

我有一个模型定义如下：

```
class Person(models.Model):
    user = models.OneToOneField(User, primary_key=True) 
```

用户登录后，我查找用户：

```
user = authenticate(username=usr, password=pwd) 
```

如何获取与该用户相关的 Person 对象？

```
person = Person.objects.filter(user=usr) # I guess not like this... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:48:16.683

您可以使用 Django 中的 OneToOne 关系的通用查询方法。 [https://docs.djangoproject.com/en/dev/topics/db/queries/#one-to-one-relationships](https://docs.djangoproject.com/en/dev/topics/db/queries/#one-to-one-relationships)

从技术上讲，你可以做你写的：

```
person = Person.objects.filter(user=usr) 
```

这是因为 Django 也创建了后向关系。 [https://docs.djangoproject.com/en/dev/topics/db/queries/#how-are-the-backward-relationships-possible](https://docs.djangoproject.com/en/dev/topics/db/queries/#how-are-the-backward-relationships-possible)

例子，

```
class UserDetail(models.Model):
    # You should actually use django.contrib.auth.get_user_model()
    user = models.OneToOneField(User)
    funny_comment = models.TextField()

user = authenticate(username=usr, password=pwd)
user.userdetail # return the user detail object 
```

我认为只有在进行自定义身份验证或只想添加几个字段时才需要自定义用户模型（在 1.5 版中）。如果要存储详细的配置文件信息，则应与用户模型建立 OneToOne 关系，并且可以像任何常规模型关系一样查询链接模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:14:27.363

您使用的是 django v1.5 之前的版本吗？如果是这样：[https ://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)

此外，您可以创建一个简单的属性：

```
User.person = property(lambda u: Person.objects.get_or_create(user=u)[0]) 
```

...因此，当您要访问用户的人员属性时：

```
user.person.attribute_a 
```

django 1.5 现在有自定义用户模型（使 Person 有点无关紧要）

[https://docs.djangoproject.com/en/1.5/topics/auth/#customizing-the-user-model](https://docs.djangoproject.com/en/1.5/topics/auth/#customizing-the-user-model)

# c# - 具有定义大小的特殊队列

> ID：13500334
> 
> 赞同：4
> 
> 时间：2012-11-21T19:07:57.233
> 
> 标签：c#, stack, queue

我需要一个大小有限的集合。它必须类似于循环缓冲区。我认为描述它的最快方法是举个例子。假设我有一个大小为 4 的“特殊”队列的实例。

这是最初的队列：6 3 9 2

如果我往里面推一些东西，它必须在开头添加它，删除最后一个元素并返回它的值，所以，如果我添加 3 它会变成：

3 6 3 9 并返回 2

我希望我已经很清楚了......一般的实现就足够了，但是 C# 实现将是最好的:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:31:42.243

```
public class MyQueue<T>
{
    private Queue<T> queue;

    public MyQueue(int capacity)
    {
        Capacity = capacity;
        queue = new Queue<T>(capacity);
    }

    public int Capacity { get; private set; }

    public int Count { get { return queue.Count; } }

    public T Enqueue(T item)
    {
        queue.Enqueue(item);
        if (queue.Count > Capacity)
        {
            return queue.Dequeue();
        }
        else
        {
            //if you want this to do something else, such as return the `peek` value
            //modify as desired.
            return default(T);
        }
    }

    public T Peek()
    {
        return queue.Peek();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:34:15.157

```
public class FixedQueue<T> : IEnumerable<T>
{
    private LinkedList<T> _list;
    public int Capacity { get; private set; }

    public FixedQueue(int capacity)
    {
        this.Capacity = capacity;
        _list = new LinkedList<T>();
    }

    public T Enqueue(T item)
    {
        _list.AddLast(item);
        if (_list.Count > Capacity)
            return Dequeue();
        return default(T);
    }

    public T Dequeue()
    {
        if (_list.Count == 0)
            throw new InvalidOperationException("Empty Queue");
        var item = _list.First.Value;
        _list.RemoveFirst();
        return item;
    }

    public T Peek()
    {
        if (_list.Count == 0)
            throw new InvalidOperationException("Empty Queue");

        return _list.First.Value;
    }

    public void Clear()
    {
        _list.Clear();
    }

    public IEnumerator<T> GetEnumerator()
    {
        return _list.GetEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return _list.GetEnumerator();
    }
} 
```

# bash - 如何修复'1：没有这样的文件或目录'

> ID：13500337
> 
> 赞同：2
> 
> 时间：2012-11-21T19:07:58.780
> 
> 标签：bash

如何将 bash shell 脚本中的变量与小于 1 进行比较？

我以前做过，但我得到'1：没有这样的文件或目录'

```
grep_result=`grep -r $ID . | wc -l`

echo $grep_result
# it said '1: No such file or directory'
if [ $grep_result < 1 ]; then
    echo "Wrong id.
    exit 1
fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:10:28.987

从 bash 的角度来看，这意味着将调用的文件通过管道传输`1`到 $grep_result 变量中。`-lt`在这种情况下，您需要使用运算符。（le 代表小于）

```
grep_result=`grep -r $ID . | wc -l`

echo $grep_result
# it said '1: No such file or directory'
if [ $grep_result -lt 1 ]; then
    echo "Wrong id.
    exit 1
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:42:17.203

检查不匹配的正确方法是

```
if ! grep -q -r "$ID" . ; then
    echo Wrong id.
    exit 1
fi 
```

没错：if 的目的`if`是运行命令并检查其退出代码。 `grep`如果匹配，则返回成功退出代码，否则返回 1（错误）。大多数 Unix 工具都是这样编写的，正是为了这个目的。

在有匹配项时获取计数是一个小的修改：

```
if matches=$(grep -r "$ID" .) ; then
    echo "$matches" | wc -l
else
    echo Wrong Id.
    exit 1
fi 
```

请注意使用`grep -q`只返回错误代码而不打印任何内容。如果您只是想从单个文件中计数（或每个文件的匹配数）`grep -c`打印它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T19:12:15.863

以下是更改代码的 2 种不同方法：

**路线#1：**

将您的代码更改为：

```
grep_result=$(grep -r $ID .)

echo $grep_result

if [ -z "$grep_result" ]; then
    echo "Wrong id."
    exit 1
fi 
```

**解释：**

*   `grep_result=$(grep -r $ID .)`:`grep -r $ID .`在子 shell 中运行并将结果输出保存`stdout`到`grep_result`. 该`$(...)`符号称为命令替换，并且优于使用反引号以提高可读性+允许嵌套命令
*   `if [ -z "$grep_result" ]; then`: "test" shell 内置`-z`选项检查是否为空字符串；如果是，则条件评估为真。`[``"$grep_result"`

* * *

**路线#2：**

或者，或者：

```
grep_result_count=$(grep -rc $ID .)

echo $grep_result_count

if [ $grep_result_count -eq 0 ]; then
    echo "Wrong id."
    exit 1
fi 
```

**解释：**

*   `grep_result_count=$(grep -rc $ID .)`：与上面类似的想法，但请注意我们使用的是`-rc`选项`grep`而不是`-r`; 选项的`c`一部分表示“不输出匹配的行，只输出找到多少匹配的数字”。所以在这种情况下，你会得到一个大于或等于 0 的整数。
*   `if [ $grep_result_count -eq 0 ]; then`:`-eq`这里的选项检查它左边的值是否等于它右边的值。在这种情况下，我们检查上一个 grep 命令的匹配数是否正好等于 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T19:28:25.083

您还可以使用更有效的方法：

```
if ! grep -qr "$ID" . ; then
    echo "Wrong id."
    exit 1
fi 
```

希望这可以帮助。

使用该`-q`选项，`grep`只需保持安静，一旦找到模式就停止（如果可以找到），如果找到模式则输出`true`返回值，`false`否则。这可能是解决您的问题的最有效方法。

# ios - RestKit 核心数据集成

> ID：13500339
> 
> 赞同：2
> 
> 时间：2012-11-21T19:08:09.727
> 
> 标签：ios, core-data, restkit

我已经经历了几天的痛苦，使用 RestKit 来映射一些 JSON。作为 Core Data 的新手，我假设一旦 RestKit 将数据映射到我的 RestKit 创建的数据库，即

```
objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"EFrontCD.sqlite"]; 
```

我可以离开 RestKit 世界。然后我尝试将我的数据加载到实现 RKManagedObjectStore 协议并执行常规操作的 UITableViewController 中，但出现错误

```
UIManagedDocument can only read documents that are file packages 
```

2个问题：

1.  我现在是否必须通过 RKManagedObjectStore 做所有事情？
2.  我可以让 RestKit 使用现有的核心数据包而不是像上面那样创建 .sqlite 文件吗？

谢谢，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:17:54.770

回答我问题的第一部分，这就是我想要的：

```
RKObjectManager *objectManager = [RKObjectManager sharedManager];
objectManager.objectStore.managedObjectContextForCurrentThread 
```

一旦您可以访问为您创建的 MOC RestKit，那么一切似乎都是一样的——我可以做通常的 Core Data 工作。

我仍然不清楚第二个问题，但肯定想知道这是否可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:27:54.020

似乎您缺少对 Core Data 工作原理的一般理解。随意阅读[本教程](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)以提高您对它的了解。

Core Data 总是使用数据存储（这可以是 SQLite、XML，...），当您告诉 RestKit 使用 SQlite 作为 objectStore 时，它​​会使用。

要获取内部数据，您必须使用获取请求并链接到[ManagedObjectContext](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)，它是数据存储和数据之间的一种处理程序。

# three.js - Meteor.js 不能引用 Three.js

> ID：13500345
> 
> 赞同：1
> 
> 时间：2012-11-21T19:08:32.173
> 
> 标签：three.js, meteor

我正在尝试使用 Meteor 和 Three.js 构建一个应用程序，但不幸的是，将这两个部分绑定在一起非常不成功。

Three.js 是客户端 WebGL 可视化的库；不知何故，我无法在 Meteor 中正确引用它。

如果我将 .js 放在 /public 中，Meteor 要么根本找不到它，要么我得到一个错误：

> ReferenceError: self 未在 app/Three.js:2:47 中定义

当我将它放在任何其他文件夹中时。

我真的不知道为什么......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:53:29.047

我认为您需要创建一个流星包。我建议您查看这些问题及其提供的链接。

[创建一个流星 d3 包](https://stackoverflow.com/questions/10337699/meteor-package-d3)

[如何构建 Meteor 包](https://stackoverflow.com/questions/10114526/how-to-build-a-meteor-package)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T19:02:55.513

所有陨石包都不适合我，所以我做了另一种方法。你仍然可以写一个流星包。或者您可以单独使用您的项目结构。在流星文档中，您可以阅读以下内容：

“子目录中的文件在父目录中的文件之前加载，因此最深的子目录中的文件首先加载（在lib之后），根目录中的文件最后加载（除了main.*）。”

所以我所做的是，我在客户端文件夹的最深子目录中创建了一个 lib 文件夹，并将我的 three.js 文件放在那里。在文件的开头，您可以找到全局定义：

var 三 = 三 || {修订：'60'};

之后，您需要将其添加到窗口对象，如下所示：

窗口.三=三；

就是这样。现在您可以使用three.js，如果您需要来自three.js 的其他库，您只需将它们放在比您的three.js 更高的目录中。

（对不起我的英语，我知道这很糟糕）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T07:38:31.063

我遇到了同样的问题。最终我意识到有人已经在 Atmosphere 中打包了 Three.js：

[https://atmosphere.meteor.com/package/three.js](https://atmosphere.meteor.com/package/three.js)

只需安装陨石并运行

```
mrt add three.js 
```

这会将 three.js 包添加到您的项目中。解决了 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-12T06:03:44.690

在玩了几天 Meteor 之后，我了解到不必总是为要使用的库提供一个包。我不能说这个解决方案适用于所有事情，但它允许我使用 three.js 而没有任何黑客行为。

将您的`three.min.js`文件放入其中并在名为“在您的文件`client/compatibility`中”的客户端文件夹中创建一个新文件，输入以下代码：`main.js``main.js`

```
Meteor.startup(function() {
    // your three code here.
}); 
```

还有中提琴！这应该工作得很好。我正在使用three.js r71 和meteor v1.1.0.2

# java - 在传递变量时分配变量

> ID：13500347
> 
> 赞同：1
> 
> 时间：2012-11-21T19:08:36.417
> 
> 标签：java, standards

```
if (someString != null && map.containsKey(someString = someString.toLowerCase())) 
```

我想知道这是否会被认为是分配我的字符串值的好方法或坏方法。我相信通过以这种方式编写代码，我会加倍使用 null 检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:12:43.947

我会说不好，因为它隐藏了您的意图，当其他人正在查看您的代码时，这一点更为重要。没有性能改进，只是可读性下降。同样在我习惯于避免这种情况时，我什至不知道这甚至可以在 Java 中使用（我通常在 PHP 脚本中看到这一点）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:13:21.193

我能看到的唯一问题是，如果你错误地得到`==`而不是`=`，它将是一个布尔值，并且会给你意想不到的结果，因为它不会向你显示`Compiler Error`，并且条件永远不会成立。

`Map.containsKey`将永远返回`false`- `No Compiler Error`，不`Runtime Exception`，每次都只是`false`结果，它会让你的生活地狱般地寻找问题： -

```
if (someString != null && map.containsKey(someString == someString.toLowerCase())) 
```

理想情况下，您应该避免这样使用它。当您以这种方式分配代码时，代码的可读性会降低。此外，不能保证您不做任何`typing mistake`. 因此，最好避免以这种方式使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:21:36.140

Java 中的`containsKey`方法需要任何`Object`作为参数实现的东西。[在这里](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)你可以找到它。

第一个错误是将赋值作为参数发送，这应该分开完成，或者只是`someString.toLowerCase()`作为参数发送。

然后，嵌套`if`条件定义了执行代码时的优先级，也增加了可读性并可能防止最终可能出现的其他奇怪错误，但这也取决于程序的其余部分做什么。

# java - Hibernate Merge 不刷新集合并导致删除

> ID：13500349
> 
> 赞同：2
> 
> 时间：2012-11-21T19:08:42.313
> 
> 标签：java, hibernate

这是我的课

```
class Teacher {
@OneToMany(fetch=FetchType.LAZY, cascade=CascadeType.ALL, orphanRemoval=true)
Set<Students> getStudents()
} 
```

问题是，

**第 1 节**

第一步：获取Teacher id = 1，在同一个会话中调用session.initializeCollection(teacher.children)初始化学生

第 2 步：添加一个新学生 (id =1)

步骤 3：合并教师实例以插入添加的学生

**第 2 节：**

第 1 步：在会话 1 的第 2 步之前获取教师 id = 1。使用 intializeCollection(teacher.children) 初始化孩子

第 2 步：执行合并以在 Session 1 中完成任何更改（在第 3 步之后）

//在这一步，hibernate id对Teacher进行更新并删除Student 1

步骤3：添加另一个学生（id = 2）并合并教师以保存学生（id = 2）

我假设当在步骤 2 中完成合并 2 时，它会导致集合在会话 1 中完成的更改被刷新，即将新对象从会话 1 添加到会话 2，子集合。

有人可以解释为什么会发生这种情况以及应该如何处理该对象，以便在第 2 次会话中，通过对表的任何更改来刷新学生集合，即将任何子对象添加到表中？

还要注意一下，在第 1 步之后，教师对象是一个分离的实例，因为该对象被传递到基于 Web 的视图层并在第 2 步中修改并在第 3 步中重新附加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:17:11.207

[`The merge() method merges modifications made to the detached instance into the corresponding managed instance, if any, without consideration of the state of the persistence context. In other words, the merged objects state overrides the persistent entity state in the persistence context, if one is already present.`](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/objectstate.html#d0e1318)

getStudents 是惰性的，因此该集合永远不会在您的会话 2 中实现。当您调用 merge 时，它​​会看到一个空集合并假设这是您想要的，因此它将学生从持久对象中删除。在会话 2 中，您应该确保在合并或添加新学生之前调用 getStudents。

# javascript - 如何在外部安全网站上创建超时

> ID：13500353
> 
> 赞同：2
> 
> 时间：2012-11-21T19:09:00.583
> 
> 标签：javascript, session, ssl, timeout, kiosk

**该程序**

我目前已经构建了一个基于 Web 的 Kiosk 系统“所有客户端”，有 5 个选项可供选择。其中 4 个选项是指向我们使用的供应商的链接，其中包含银行产品的登录信息。

**我的目标**

当有人单击链接并访问我无法控制的网站时，我想创建一个超时。发生此超时时，它会返回到自助服务终端的主页。我不在乎它是当前窗口、子窗口还是 iframe。由于多人的使用水平很高，我需要防止人们没有退出他们的产品。

**我目前的问题**

我试图保留对子窗口的控制，但微软已经从子窗口中删除了焦点功能。尽管我试图保留这个客户端，但我对服务器端功能持开放态度，但我没有那种控制权，因为正在访问的网站在我的控制之外。我不介意使用 iframe，但因为它是一个安全的外部网站，它会出现错误提示和安全风险。

**信息亭托管选项**

我目前在 SharePoint 环境中托管此信息亭和文件，但如果需要，可以将其更改为在自己的 iis 服务器上。尽管我不是 IE 的超级粉丝，但它是我们用作业务标准的东西，所以我需要在那个浏览器中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:20:57.660

您可以简单地在 iFrame 中加载外部站点，并在父级中定义超时。此示例将在 3 秒内重定向：

```
<script type="text/javascript">

t=setTimeout(function(){
    window.location = "http://YourHomepage";
},3000);

</script>
</head>

<iframe src="http://YourVendor"></iframe> 
```

显然，您需要调整 iFrame 的大小、更正链接并将超时更改为更合适的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:13:31.993

您可以设置超时来重置 iframe 的 SRC，那里没问题。

问题是您无法知道用户是否在积极使用外部站点。您的计时器可能会在他们正在做某事时重置位置。同源策略可防止父页面嗅探 Iframe 中发生的事情。

# facebook - 如何将我的新 Facebook 应用程序添加到我的粉丝页面？

> ID：13500359
> 
> 赞同：1
> 
> 时间：2012-11-21T19:09:22.487
> 
> 标签：facebook, favorite

我在 facebook 上创建了一个应用程序，它位于[https://apps.facebook.com/bills-wheels-youtube/](https://apps.facebook.com/bills-wheels-youtube/)

它显示在我的应用中心的应用程序中。

当我将它添加到我的收藏夹选项卡时，它不会显示

我之前添加了一个应用程序，它没有任何问题。他们改变了如何做到这一点？

# c# - System.Windows.Data 错误：1 System.Windows.Data 错误：5

> ID：13500363
> 
> 赞同：4
> 
> 时间：2012-11-21T19:09:29.220
> 
> 标签：c#, wpf, data-binding, entity-framework-4, selecteditem

全部，

我有一个 WPF 应用程序，它有一个绑定到 ItemsSource=MyContext.Entity1.Local 的 DataGrid 控件（这是一个 ObservableCollection）。这个应用程序内部是一个 DataGridComboBoxColumn，如下所示：

```
<DataGridComboBoxColumn Header="User"
                        SelectedValueBinding="{Binding Path=USR_ID, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                        SelectedItemBinding="{Binding Path=TBL_USR, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                        ItemsSource="{Binding Path=MyEntity.TBL_USR, UpdateSourceTrigger=PropertyChanged, Source={StaticResource VM}}"
                        SelectedValuePath="USR_ID"
                        DisplayMemberPath="USR_WINLOGON" /> 
```

我的问题是我收到以下错误：

```
System.Windows.Data Error: 1 : Cannot create default converter to perform 'two-way' conversions between types MyContextType.TBL_USR' and 'System.String'. Consider using Converter property of Binding. BindingExpression:Path=TBL_USR; DataItem='Entity1Cl_4FDC0A147BE18671D96960BD8695EC4E3656B773570659474EE4FF228884E823' (HashCode=7143675); target element is 'DataGridCell' (Name=''); target property is 'CellContent' (type 'String')
System.Windows.Data Error: 5 : Value produced by BindingExpression is not valid for target property.; Value='System.Data.Entity.DynamicProxies.TBL_USR30704B5EF5DAA11FBF2C9B305F529659FBCF422ED6696643EDB375A5D77F5A96' BindingExpression:Path=TBL_USR; DataItem='Entity1Cl_4FDC0A147BE18671D96960BD8695EC4E3656B773570659474EE4FF228884E823' (HashCode=7143675); target element is 'DataGridCell' (Name=''); target property is 'CellContent' (type 'String') 
```

我认为它与 DynamicProxies 有关，但我无法弄清楚是什么导致了这个（.Local？），以及如何围绕这个进行编码（至少，不是不使用 TypeConverter 和 Reflection，哎呀）。

要么就是这样，要么与 WPF 行为不端有关（但我在上面的标记中找不到我试图将我的实体设置为字符串的任何地方）。

所以我问，有谁知道我可以如何强制 Entity1.Local[n].TBL_USR 成为 TBL_USR，或者如果可能有另一种方式（没有反射）我可以设置我的 SelectedItemBinding？

谢谢。

我正在使用 EF 4.4（数据库优先）和 .Net 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-10T00:01:26.403

事实证明这是由于 Mode=TwoWay 和幕后某些不可见的绑定（对于剪贴板之类的东西）。我曾尝试使用字符串转换器，但是当列失去焦点时，它会产生奇怪的效果，即移除值的显示。这个问题的答案在这里：

[当我离开它时，为什么我的 DataGridComboBoxColumn 会清除它的值？](https://stackoverflow.com/questions/14504117/why-is-my-datagridcomboboxcolumn-clearing-its-value-when-i-navigate-away-from-it)

事实证明，这也是这个问题的答案。

# java - 如何在Java中的for循环中创建多个复选框？

> ID：13500364
> 
> 赞同：1
> 
> 时间：2012-11-21T19:09:31.353
> 
> 标签：java, swing, jcheckbox

我正在编写一个 Java 程序，其中我必须在 for 循环中创建多个复选框，如下所示：

```
123 409 123 []
234 587 344 []
342 534 343 [] 
```

我必须只使用选中的行中的那些值。您能帮我创建多个复选框，而不是使用该行中的选定值吗？

假设选择了第一行而不是我想要所有三个值。

我必须在一个循环中创建至少 30 个复选框，并且有四个循环。我不知道如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:40:16.570

我实现了一个小的原始示例，应该可以帮助您获得结果。我建议您尝试一下，如果它满足您的需求，我很乐意为您提供更多详细信息并编辑我的答案。请记住，如果您只需要选择**一行**，您应该更喜欢`JRadioButton`.

```
package stackoverflow.answers;

import java.awt.BorderLayout;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.awt.event.KeyEvent;
import java.util.*;

import javax.swing.*;

public class SwingCheckBoxDemo extends JPanel implements ItemListener {

    private HashMap<JCheckBox, ArrayList<Integer>> map = new HashMap<>();
    private JLabel _label;

    private static final int MAX_CHECKS = 30;

    public SwingCheckBoxDemo() {
        super(new BorderLayout());

        JCheckBox checkBox;
        Random r = new Random();

        JPanel checkPanel = new JPanel(new GridLayout(0, 1));
        _label = new JLabel("You selected nothing");
        checkPanel.add(_label);

        for (int i = 0; i < MAX_CHECKS; i++) {
            StringBuilder sb = new StringBuilder();
            ArrayList<Integer> a = new ArrayList<>();
            for (int j = 0; j < 3; j++) {
                Integer temp = (r.nextInt()) % 100;
                a.add(temp);
                sb.append(temp).append(" ");
            }

            checkBox = new JCheckBox(sb.toString().trim());
            checkBox.setName("CheckBox" + i);
            checkBox.addItemListener(this);
            map.put(checkBox, a);
            checkPanel.add(checkBox);
        }

        add(checkPanel);

    }

    public void itemStateChanged(ItemEvent e) {

        JCheckBox source = (JCheckBox) e.getItemSelectable();

        if (e.getStateChange() == ItemEvent.SELECTED) {

            ArrayList<Integer> list = map.get(source);

            _label.setText("You've just selected " + list);

        }

    }

    private static void createAndShowGUI() {

        JFrame _frame = new JFrame("Check box loop");
        _frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        _frame.setSize(800, 600);

        JComponent newContentPane = new SwingCheckBoxDemo();
        newContentPane.setOpaque(true);
        _frame.setContentPane(newContentPane);

        _frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# java - 使用RSA加密和解密java中的大字符串

> ID：13500368
> 
> 赞同：18
> 
> 时间：2012-11-21T19:09:43.990
> 
> 标签：java, encryption, rsa

我正在尝试实施 PKI。我想在不使用充气城堡的情况下在 java 中使用 RSA 加密大字符串。我得到的问题是数据不能超过 117 个字节。我尝试寻找失败的解决方案。我是这个加密的新手。请通过给出一个大字符串作为示例来帮助我并解释它。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-21T20:01:14.687

您一次不能对超过 128 个字节使用 RSA 加密解密。您必须拆分数据并在循环中执行它，几乎随时将字节写入字符串/数组。如果您唯一的问题是数据的大小，那么您可能没有更多工作要做。只是拆分数据。

**一个很好的例子，对你来说可能更完整，处理大于 128 字节的字符串：http: [//www.stellarbuild.com/blog/article/encrypting-and-decrypting-large-data-using-java-and-rsa](http://www.stellarbuild.com/blog/article/encrypting-and-decrypting-large-data-using-java-and-rsa)**

如果您需要更多关于 RSA 加密的一般说明：

以下代码演示了如何使用 KeyPairGenerator 在 Java 中生成 RSA 密钥对：

```
// Get an instance of the RSA key generator
KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
// Generate the keys — might take sometime on slow computers
KeyPair myPair = kpg.generateKeyPair(); 
```

这将为您提供一个 KeyPair 对象，该对象包含两个密钥：一个私有密钥和一个公共密钥。为了使用这些密钥，您需要创建一个 Cipher 对象，该对象将与 SealedObject 结合使用来加密您将通过网络结束的数据。这是你如何做到的：

```
// Get an instance of the Cipher for RSA encryption/decryption
Cipher c = Cipher.getInstance("RSA");
// Initiate the Cipher, telling it that it is going to Encrypt, giving it the public key
c.init(Cipher.ENCRYPT_MODE, myPair.getPublic()); 
```

初始化 Cipher 后，我们就可以加密数据了。由于加密后的结果数据如果你看到它们“裸体”将没有多大意义，我们必须将它们封装在另一个对象中。Java 通过 SealedObject 类提供了这一点。SealedObjects 是加密对象的容器，它们在 Cipher 对象的帮助下加密和解密其内容。

以下示例显示了如何创建和加密 SealedObject 的内容：

```
// Create a secret message
String myMessage = new String("Secret Message");
// Encrypt that message using a new SealedObject and the Cipher we created before
SealedObject myEncryptedMessage= new SealedObject( myMessage, c); 
```

生成的对象可以通过网络发送而不必担心，因为它是加密的。唯一可以解密和获取数据的人是持有私钥的人。通常，这应该是服务器。为了解密消息，我们需要重新初始化 Cipher 对象，但这次使用不同的模式，解密并使用私钥而不是公钥。

这就是您在 Java 中执行此操作的方式：

```
// Get an instance of the Cipher for RSA encryption/decryption
Cipher dec = Cipher.getInstance("RSA");
// Initiate the Cipher, telling it that it is going to Decrypt, giving it the private key
dec.init(Cipher.DECRYPT_MODE, myPair.getPrivate()); 
```

现在 Cipher 已准备好解密，我们必须告诉 SealedObject 解密保存的数据。

```
// Tell the SealedObject we created before to decrypt the data and return it
String message = (String) myEncryptedMessage.getObject(dec);
System.out.println("foo = "+message); 
```

使用 getObject 方法时要小心，因为它返回一个 Object 的实例（即使它实际上是 String 的一个实例），而不是它在加密之前的 Class 实例，所以你必须将它转换为它的先前的形式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-21T20:15:18.467

RSA 不适用于批量数据加密。相反，请使用对称密码（如 AES）来加密您的“大字符串”。然后，使用 RSA 密钥加密用于 AES 的对称密钥。

BouncyCastle 支持两种协议：S/MIME 和 PGP。所有明智的隐私协议都以这种方式使用非对称算法进行密钥传输或密钥交换。

可以使用 RSA 加密的消息大小取决于密钥的模数，减去安全填充消息所需的一些字节。

# erlang - erlang 开发工作流程中缺少一些东西

> ID：13500370
> 
> 赞同：2
> 
> 时间：2012-11-21T19:09:50.147
> 
> 标签：erlang, rebar

我是 erlang 和 rebar 的新手

最近我读了关于钢筋的教程

*   [Erlang 钢筋教程](http://www.metabrew.com/article/erlang-rebar-tutorial-generating-releases-upgrades)
*   [带 rebar 的 Erlang 应用程序管理器](http://alancastro.org/2010/05/01/erlang-application-management-with-rebar.html)

但是我觉得缺少一些东西，例如之后`compile`我`generate`使用以下命令`rel/${nodeid}/bin/${nodeid} console`测试代码等运行我的应用程序，但是当我关闭控制台时，我总是需要杀死我自己`epmd.exe`（来自进程资源管理器）。

有一些关于钢筋工作更完整的教程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:54:06.343

epmd 是 erlang 端口映射器守护进程。如果它不存在，它会自动启动，并且默认行为是在任何 erlang VM 停止后继续运行。

我不知道任何改变这种行为的选项，只要没有更多的节点被注册，命令 epmd -kill 应该终止进程。您可以使用命令 epmd -names 检查它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T16:44:49.580

永久离开`epmd`跑步通常是没有问题的。这里发生的是工作流不断创建 epmd.exe，启动它然后尝试删除它 - 这在 Windows 上不起作用。

我发现的最简单的解决方法是在运行 rebar**之前**从目录层次结构`epmd` **之外开始。**例如

 **```
 "C:\Program Files\erl5.9.3.1\erts-5.9.3.1\bin\epmd" 
```

如果它已经在运行，那么 Erlang 运行时将不会尝试从您的发布文件夹启动它。**

# windows - 有什么简单的方法可以从网络浏览器获取一小段文本到 Windows 程序？

> ID：13500378
> 
> 赞同：0
> 
> 时间：2012-11-21T19:10:14.167
> 
> 标签：windows, webpage

我遇到有人获得代码（如许可证代码字符串）的情况。然后他们需要在 Windows 程序中输入它。

我想通过让浏览器将其存储在 Windows 程序可以访问的某个位置来避免第二步。

**澄清：**

我在服务器端使用 .ASPX。在客户端，我可以在浏览器中使用 .js，我正在使用 VB6 和 Wise Installer（可以使用其中任何一个“检索”文本位）。我想支持所有主流浏览器（尽管这个解决方案不需要 100% 的情况下工作：如果我们可以在 80% 的情况下*为客户输入代码，那是一个巨大的进步。*

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:14:24.793

您可以将数据存储在 Windows 剪贴板中；尽管将网页中的内容放在剪贴板上很棘手，但仍然可以（通常使用 Flash 助手）。

*另一种方法是在*您的应用程序中嵌入 Web 浏览器控件，您的应用程序可以完全控制用户交互。然后，应用程序可以拦截从服务器返回的相关数据。

# activerecord - Rails（ActiveRecord）合并或如何仅更新表中的空值

> ID：13500383
> 
> 赞同：5
> 
> 时间：2012-11-21T19:10:34.127
> 
> 标签：activerecord, ruby-on-rails-3.2, padrino

使用 Mysql，我可以`COALESCE`只更新表中的空值。

如何使用 Rails (ActiveRecord) 做到这一点？

我不想为`if`表中的每一列创建语句，并且我猜测如果我将 ActiveRecord 哈希传递给该`update_attributes`方法，则必须有一种方法可以做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-07-02T22:37:51.393

不清楚你在问什么，但如果我理解正确，你想要这样的东西：

```
class Address < ActiveRecord::Base
  attr_accessible :street, :city, :zip
  def update_null_attributes(hash)
    update_attributes(hash.keep_if { |k,v| __send__("#{v}_was").nil? })
  end
end 
```

这将获取您要更新的属性的哈希值，并仅传递最初为 nil 的属性。它[`ActiveModel::Dirty`](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)用于“#{v}_was”方法。

# javascript - 从Javascript回调中的对象获取上下文

> ID：13500384
> 
> 赞同：3
> 
> 时间：2012-11-21T19:10:34.563
> 
> 标签：javascript, callback, this

我有一个案例，我有一个对象“foo”，它需要在另一个对象“bar”上调用回调，并且我需要回调中的上下文是“bar”的上下文。然而，更重要的是，除了从“bar”获得回调之外，“foo”不应该对此一无所知。

例子：

```
var foo = 
{
    message: "Hello foo",
    doStuff: undefined
};

var bar =
{
    message: "Hello bar",
    callback = function ()
    {
        alert(this.message);
    }

};

foo.doStuff = bar.callback;

foo.doStuff(); 
```

我意识到通常你会使用“调用”或“应用”将上下文切换到 bar，但在我的特殊情况下，在调用时`foo.doStuff()`我不再有关于回调来自何处的信息。那么是否有另一种计算上下文的方法（比如从回调函数本身）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:16:53.943

> 那么是否有另一种计算上下文的方法（比如从回调函数本身）？

没有。在您传递回调之前，并非没有一些额外的细节。如果您只有一个函数引用，那么您通常没有上下文。但是有了一些准备，就有了一些解决方案。

你可以包装回调。调用 this 时，`bar.callback()`将以完整形式调用，保留`bar`.

```
foo.doStuff = function() { bar.callback(); }; 
```

或者在现代 JS 引擎中，您可以将回调绑定到特定的上下文。

```
foo.doStuff = bar.callback.bind(bar); 
```

或者使用[underscore.js](http://underscorejs.org/)在所有 JS 引擎中执行此操作。

```
foo.doStuff = _(bar.callback).bind(bar); 
```

或者，如果您想与旧引擎兼容并且不想使用整个库，则可以制作自己的绑定函数。

```
var bind = function(fn, context) {
  return function() {
    fn.call(context);
  };
};
foo.doStuff = bind(bar.callback, bar); 
```

* * *

尽管如此，一个简单的包装器通常是最简单和最常见的。它几乎没有缺点，它速度快、易于理解，并且可以让您对使用哪些参数调用的内容有很大的控制权。在这种情况下，我认为这种形式最有意义。

```
foo.doStuff = function() { bar.callback(); }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:47:53.907

使用封闭的酒吧。

```
var foo = {
    message: "Hello foo",
    doStuff: undefined
};

var bar = (function() {
    var message = "Hello bar";
    return {
        callback: function() {                
            alert(message);
        }
    };
})();

foo.doStuff = bar.callback;
foo.doStuff();
​ 
```

[jsfiddle](http://jsfiddle.net/scqEh/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:24:35.637

我会用闭包来做。

```
foo.doStuff = function(){
  bar.callback();
}; 
```

如果您担心 bar 的值在您创建回调的那一刻和它执行的那一刻之间发生了变化，您可以“锁定” bar 的值，但这可能是矫枉过正

```
foo.doStuff = (function(bar){
  return function(){
    bar.callback();
  }
})(bar); 
```

# visual-studio-2012 - 如何将 lib 文件引用添加到 Visual Studio 2012？

> ID：13500391
> 
> 赞同：1
> 
> 时间：2012-11-21T19:10:58.260
> 
> 标签：visual-studio-2012

我在 Visual Studio 2012 中有一个 C# 项目。我正在尝试添加对某些第 3 方 C 代码的引用，其中我的计算机上有一个 dll 和 lib 文件。C 代码是 Win API 本机代码。

我试图添加 dll 作为对项目的引用，但我得到“无法添加对“code.dll”的引用请确保该文件是可访问的，并且它是一个有效的程序集或 COM 组件。” 一些研究让我觉得我需要在项目中添加 lib 文件作为参考，但是当我在 Visual Studio 2012 中浏览参考时，它只搜索 dll、tlb、olb、ocx、exe 和清单文件. 过去似乎可以将 lib 文件添加到 Visual Studio 项目中，但在 VS 2012 中似乎有所不同。

有谁知道如何在 VS 2012 中为项目添加 lib 引用？还是我在这里完全错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:20:28.953

你不能这样做。但是，您可以做的是将 C++/CLI 程序集添加到您的解决方案中，然后您可以从那里链接到 Lib 文件（并包括您可能拥有的 C 头文件）。

您拥有的另一个选项是 P/Invoke 到 DLL。然后你必须弄清楚如何为 DLL 中的每个函数编写正确的声明。

# orchardcms - ORCHARD CMS 中的字段与自定义类型

> ID：13500397
> 
> 赞同：1
> 
> 时间：2012-11-21T19:11:16.000
> 
> 标签：orchardcms

当我在 CMS 中创建一个模块时，如果我可以创建一个新字段（例如从管理区域），是什么让我使用自定义字段？

性能是否有差异，或者它的处理方式或什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T23:43:41.717

什么叫自定义字段？字段在数据库中存储为 XML，因此查询起来稍微困难一些。Projections 通过维护索引表来做到这一点。字段也比部分更难重用：字段将特定于一个类型，而您将能够在多个类型上重用部分。

# php - 在 Android 中接收具有未知多个名称的 JSON 回复并将其设置在微调器上

> ID：13500401
> 
> 赞同：0
> 
> 时间：2012-11-21T19:11:39.620
> 
> 标签：php, android, json, spinner

我的 android 应用需要接收不认识的人的列表（他们必须在网络上注册）并且必须在微调器上设置该列表。

你能给我一个我必须从 php web 发送的 json 数组的例子，以及如何用 android 捕获它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:19:50.620

一个可能的 json 数组：

[“名称1”，“名称2”，“名称3”]

在 Android 的 JSON 库的帮助下解析你所做的：

[http://developer.android.com/reference/org/json/package-summary.html](http://developer.android.com/reference/org/json/package-summary.html)

玩得开心！

# c# - 如何使用 await 来保持 using 子句的范围？

> ID：13500403
> 
> 赞同：1
> 
> 时间：2012-11-21T19:11:45.343
> 
> 标签：c#, async-await

我有返回无效的操作。但我需要调用以在当前范围运行时保持打开状态。

```
 public class CancellationHelper
{
    CancellationTokenSource _cts;

    public void Run(Action<CancellationToken> action)
    {
        if (_cts != null)
        {
            return;
        }
        using (_cts = new CancellationTokenSource())
        {
            action(_cts.Token);
        }
    }
} 
```

如果 action 是`async`，`_cts`将在方法完成之前被释放。返回类型是无效的，所以我不能只是等待它......我已经读过你应该避免`Task.Run`和支持 async/await，但我不知道如何为 using 子句执行此操作。

`await Task.Run(action);`脏吗？这是在启动另一个“任务”或线程以等待启动任务或线程的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:14:32.937

听起来像是`action`一种`async void`方法。
**不要那样做**。
不可能找出`async void`方法何时结束。

相反，您需要让您的方法接受一个`Func<Task>`.
然后你就可以写了`await action();`。

# java - 错误：找不到符号

> ID：13500406
> 
> 赞同：0
> 
> 时间：2012-11-21T19:12:02.237
> 
> 标签：java, methods, parameters, scope, return

```
public static void main(String args [])
{
    Scanner in = new Scanner(System.in);

    int number = 0;

    do{
        System.out.print("Which Fibonacci Number would you like? ");
        number = in.nextInt();
    }while(number < 0 || number > 71);

    System.out.printf("Fibonacci #%d is %d\n",number, fibcalc(fib));

}

 public static double fibcalc(int number)
{
    double prevNumber1 = 0;
    double prevNumber2 = 1;
    double fib = 0;

    for(int i =0; i < number; i++){
        fib = prevNumber1;
        prevNumber1 = prevNumber2;
        prevNumber2 = fib + prevNumber2;

}
    return fib;
} 
```

上面的代码就是我所拥有的。

以下是我不断收到的错误：

```
 error: cannot find symbol
 System.out.printf("Fibonacci #%d is %d\n",number, fibcalc(fib));
                                                              ^
 symbol:   variable fib
 location: class dlin_Fibonacci 
```

就是说找不到 `fibcalc(fib)`

我想`fib`从我的`fibcalc`方法返回值，所以我可以在我的`main`方法中打印它。

有谁知道为什么它不让我？

我尝试只使用变量`fib`，但结果是相同的错误消息。这是否与变量`fib`是局部变量而不是类变量的事实有关？如果是，那么如何使其成为类变量？我尝试将变量移动到`fib`我`number`的`main`方法之上。就像是...

```
private static int number = 0;
private static double fib = 0;

public static void main(String arg[]) 
```

但是，这给了我错误：`illegal start of an expression`对于变量。

另外，有人能告诉我我是否在做退货声明吗？

我做了一些研究，去不同的网站观看视频。似乎我遵循了每一步。但是，我仍然不明白“传递参数”是什么意思，它是方法中 () 内部的变量。该变量是来自其他方法还是只是在编写的方法中创建？就像我上面的示例一样，是否只需在 () 中声明变量，就可以将变量`int number`从我的`main`方法传递到我的方法？`fibcalc`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:52:36.597

`fib`不在范围内，因为它是`fibcalc`. 像这样更改行：

```
 System.out.printf("Fibonacci #%d is %d\n",number, fibcalc(number)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:45:24.313

你有两种方法可以解决这个问题，首先：

```
System.out.printf("Fibonacci #%d is %d\n",number, fibcalc((int)fib)); 
```

或第二种方式：

```
public static double fibcalc(double number) 
```

:)

# java - 应用程序子类和单例。什么时候创建新实例？

> ID：13500414
> 
> 赞同：2
> 
> 时间：2012-11-21T19:12:34.147
> 
> 标签：java, android, singleton, instance

我对 Application 的子类使用单例方法。我使用以下内容：

```
public class MyApplication extends Application {

    private static MyApplication instance;

    public MyApplication() {
        instance = this;
    }

    public static MyApplication getInstance() {
        if (instance == null) {
            synchronized (MyApplication.class) {
                if (instance == null)
                    new MyApplication();
            }
        }
        return instance;
    }

    ...
    ... 
```

我的问题是：如果实例被分配一次，在系统对类创建者的初始调用期间，该实例永远不应为空！所以`if (instance == null)`inside`getInstance()`永远不会返回 true。还是我错了？

**编辑：**

我更正了维基百科上的代码：

```
public class volatile MyApplication extends Application {

    private static MyApplication instance;

    public MyApplication() {

    }

    public static MyApplication getInstance() {
        if (instance == null) {
            synchronized (MyApplication.class) {
                if (instance == null)
                    instance = new MyApplication();
            }
        }
        return instance;
    }

    ...
    ... 
```

添加`volatile`并且`instance = new MyApplication();`正确吗？我的问题仍然存在...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:33:19.540

我将此代码用于我的 Singleton 类。尝试这个。

公共类 MenuPage 扩展 Activity {

```
 private static MenuPage m_instance = null;

    /**
     * Get the singleton instance of this class
     *
     * @return MenuPage
     */
    public static MenuPage getInstance() {
        if (m_instance == null) {
            m_instance = new MenuPage();
        }
        return m_instance;
    }

    /**
     * Constructor, default
     */
    public MenuPage() {
        m_instance = this;

    }
    /**
     * Called when the activity is first created.
     */
    @Override
    protected void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.main);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:16:58.480

仅当您退出应用程序或 Android 杀死它时，它才会为 null，在这种情况下，您无法检查它；）

你永远不应该创建你的应用程序类的实例，所以你不应该这样做`new MyApplication()`。您可以在其他类中扩展 Application 然后实例化这些类，但是您进入了危险的领域，您应该质疑您的方法。

请参阅应用程序生命周期文档：

[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

总之，`instance=this`其他类可以使用`((MyApplication)this.getApplication()).instance;`

也就是说，您应该访问 Herr K 的个人资料并为他投票，因为他的评论是正确的解决方案，而不仅仅是回答您的问题是我的问题。

关键是，你不需要任何实例的东西。 `(MyApplication)this.getApplication()`总会给你一个参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:14:46.550

你错过了一件非常重要的事情来让它正常工作。

```
instance = new MyApplication(); 
```

如果没有这一行，则 then`instance`将始终为 null，并且您将返回 null。否则，调用 new 时会创建实例`MyApplication();`

# eclipse - PyDev "_module_not_in_pythonpath_" 破解代码完成

> ID：13500418
> 
> 赞同：1
> 
> 时间：2012-11-21T19:12:47.503
> 
> 标签：eclipse, pydev

目标：**在 PyDev 中工作代码完成和代码分析。**

问题：代码完成不起作用，可能是由于我将鼠标悬停在任何导入语句上时看到的这个错误：`"_client_ Found at: _module_not_in_pythonpath_"`. 请注意，我的代码实际上运行没有任何问题。这是一个 IDE 问题而不是 Python 问题。

具体说法：

**`from client import NetworkClient`**

源文件 ( `examples.py`) 和另一个模块 ( `client.py`) 都在同一个文件夹中。他们的父文件夹在`Project | Properties | PYTHONPATH | Source Folders`.

当我跑

```
import sys; 
print '\n'.join(sys.path) 
```

它确实将它们的目录显示为路径的一部分。

任何想法我可能做错了什么，如果有的话？

这是我尝试在 PyDev 中打开的第三个开发环境，似乎每次启动并运行代码完成或代码分析都是一场艰苦的战斗！我理解动态和其他语言存在挑战，但这种情况似乎相当简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:43:49.747

（这应该是评论）

（PyDev 2.7.1.2012100913，eclipse.buildId=M20120914-1800）

我认为这是 PythonPath 的 PyDev [解析] 问题，我在尝试在项目中使用 EFS (rse://) 文件夹时发现了类似的问题。

该项目在其远程平台上运行良好。

# web-services - Webservice 不同的请求设计

> ID：13500421
> 
> 赞同：1
> 
> 时间：2012-11-21T19:13:10.980
> 
> 标签：web-services

我是 web 服务开发的初学者，我想问一个设计问题来了解什么是最好的方法。我必须创建一个 web 服务，它将一些对象返回给用户，它必须像这样工作：

*   请求：把系统里的红苹果给我
*   回应：5 个红苹果。还发现了 3 个青苹果。我也应该退货吗？
*   请求：是 -> 响应返回 8 个苹果
*   请求：否 -> 响应返回 5 个苹果

你会使用单一的网络服务来做到这一点吗？如果是这样，跟踪当前状态的最佳方法是什么？（我正在考虑在请求/响应中添加 2 个标志，但我不知道这是否是个好主意..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:41:27.873

您当然会使用单个 Web 服务来执行此操作，尽管您可以选择在其中实现多个操作（方法）。

状态管理通常需要某种形式的存储——您可以使用数据库或内存缓存，并且您需要考虑诸如处理规模、高可用性、清理例程等事项。

为了在请求之间建立关联，您需要传递一些令牌，通常这将由第一个请求或第一个响应提供，然后在后续调用中重新使用，这将允许服务提取相关上下文

由于存在支持这种实现的标准，因此各种框架和语言都内置了对此的支持，我会在您用于实现的相关技术中寻找一些东西。

最后但同样重要的是，通常在考虑 Web 实现时，状态是不可取的，因此 - 尽可能选择无状态实现。请求者可以发出全新的请求以获取下一批数据，而服务不需要记住任何内容。

# ember.js - 通过 emberjs init 中的帐户/用户对象进行范围访问：function()

> ID：13500423
> 
> 赞同：1
> 
> 时间：2012-11-21T19:13:22.393
> 
> 标签：ember.js, ember-data

假设我有**帐户、项目和任务的****emberjs 模型/控制器/视图**，并且我想通过帐户来确定对项目和任务的访问范围，我该如何在 emberjs 中做到这一点。我正在考虑使用**“init”**，但在**设置所有其他属性后调用“init 函数”**，所以我不知道它是否仍然能够获取 currentUser 或创建默认 currentUser 并将其与每个 ember 关联在**App 命名空间**中创建的对象实例。

 ********在 emberjs 中，如果我有这个，例如**：

```
App = Ember.Application.create({

  init: function() {
    this._super();
    this.setCurrentUser();
    //console.log(this.get("setCurrentUser")
  },

  setCurrentUser: function(json) {
    this.store.load(this.User, json);
    this.set('currentUser', this.User.find(json['id']));
  }
}); 
```

**上面的 emberjs 代码是否意味着每当访问 App 命名空间的任何部分（例如 App.project）时，都会首先查找 currentUser ，从而确保项目的范围为 User**。

为了更清楚，例如在 rails 中，我将以这种方式进行范围访问：

```
 #account-scope in Rails?
  class ApplicationController < ActionController::Base
    def current_account
      @current_account ||= current_user && current_user.account
    end
  end

  #An imagined ProjectsController showing scoped access of project through account
  @projects = current_account.projects
  @project = current_account.projects.find(params[:id]) 
```

感谢您的洞察力。******

# ruby - ruby 语法错误，意外的 $end，期望关键字_end

> ID：13500429
> 
> 赞同：2
> 
> 时间：2012-11-21T19:14:10.043
> 
> 标签：ruby

以下代码向我显示错误如下：

```
"ruby -KU -- 'C:\Users\Ishmael\My Documents\Aptana Studio 3 Workspace\Simple\FirstFile'
C:/Users/Ishmael/My Documents/Aptana Studio 3 Workspace/Simple/FirstFile:55: syntax error, unexpected $end, expecting keyword_end" 
```

我搜索了多余的结尾和尾随的 '.' 但徒劳无功，我仍然无法弄清楚为什么它不起作用！

```
class Greeter
  attr_accessor :name

  def initialize(name="dudes")
    @name=name
  end

  def say_hi

    if @name.nil?
      puts "..."
    else if @name.respond_to?("each")

      @name.each do |name|
        puts "Hello #{name.capitalize}!"
      end

    else
      puts "Hi #{@name.capitalize}!"
    end

  end 

  def say_bye

    if @name.nil?
      puts "..."
    else if @name.respond_to?("join")
      puts 'Goodbye #{@name.join(", ").capitalize}! Come back soon!'
    else
      puts "Bye #{@name.capitalize}!"
    end

  end

end

if __FILE__ == $0

  greeter = Greeter.new
  greeter.say_hi
  greeter.say_bye

  greeter.name = "Ishmael"
  greeter.say_hi
  greeter.say_bye

  greeter.name = ["Albert", "Brenda", "Charles", "Dave", "Englebert"]
  greeter.say_hi
  greeter.say_bye

  greeter.name = nil
  greeter.say_hi
  greeter.say_bye
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-21T19:23:21.537

它不是在抱怨额外的`end`，而是因为缺少`end`. 在这种情况下，您忘记在您的`if __FILE__ == $0`部分之前关闭课程。

这可能是因为您与 混淆`elsif`了`else if`，后者创建了一个全新的`if`块。

# java - 从 .txt 读取到二维数组

> ID：13500432
> 
> 赞同：0
> 
> 时间：2012-11-21T19:14:15.723
> 
> 标签：java, arrays, file, multidimensional-array

对不起，如果我的代码看起来很糟糕，我在编程方面没有那么有经验。我需要以以下格式从 .txt 传输文本：Date-Name-Address-etc..

我正在读取文件，然后用 String.split("-") 拆分字符串。我遇到了循环问题。

```
 try{
        File file = new File("testwrite.txt");
        Scanner scan = new Scanner(file);
        String[] test = scan.nextLine().split("-");
        while(r<100){
            while(c<6){
                data[r][c] = test[c];
                test = scan.nextLine().split("-");
                c++;
            }
            r++;
            c = 0 ;
        }
        System.out.println(data[1][5]);
    }catch(Exception e){
        System.out.println("Error: " + e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:46:33.433

二维数组就是“数组的数组”，所以可以直接用`split`result来存储一行的数据。

```
 File file = new File("testwrite.txt");
            Scanner scanner = new Scanner(file);
            final int maxLines = 100;
            String[][] resultArray = new String[maxLines][];
            int linesCounter = 0;
            while (scanner.hasNextLine() && linesCounter < maxLines) {
                resultArray[linesCounter] = scanner.nextLine().split("-");
                linesCounter++;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:21:13.907

看起来你调用 scan.nextLine() 太频繁了。每次调用 scan.nextLine() 时，它都会使 Scanner 超过当前行。假设您的文件有 100 行，每行有 6 个“条目”（由“-”分隔），我将移动`test = scan.nextLine().split("-");`到 while 循环的末尾（但仍在循环内），以便每行调用一次。

编辑...

建议的解决方案：给定表格中的文件，

abxyz

abcxyz ...（共 100 次）

使用此代码：

```
try{
    File file = new File("testwrite.txt");
    Scanner scan = new Scanner(file);
    String[] test = scan.nextLine().split("-");
    while(r<100){
        while(c<6){
            data[r][c] = test[c];
            c++;
        }
        r++;
        c = 0 ;
        test = scan.nextLine().split("-");
    }
    System.out.println(data[1][5]);
}catch(Exception e){
    System.out.println("Error: " + e.getMessage());
} 
```

然后使用 data[line][index] 访问您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:32:06.367

我使用以下方法拆分制表符分隔的文件：

```
BufferedReader reader = new BufferedReader(new FileReader(path));
int lineNum = 0; //Use this to skip past a column header, remove if you don't have one
String readLine;
while ((readLine = reader.readLine()) != null) { //read until end of stream
    if (lineNum == 0) {
        lineNum++; //increment our line number so we start with our content at line 1.
        continue;
     }
     String[] nextLine = readLine.split("\t");

     for (int x = 0; x < nextLine.length; x++) {
         nextLine[x] = nextLine[x].replace("\'", ""); //an example of using the line to do processing.

         ...additional file processing logic here...
     }
} 
```

同样，在我的例子中，我在制表符 (\t) 上拆分，但您可以轻松拆分 - 或任何其他字符，除了换行符。

根据[readline() 的 Javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#readLine%28%29) `A line is considered to be terminated by any one of a line feed ('\n'), a carriage return ('\r'), or a carriage return followed immediately by a linefeed.`。

一旦您按照需要拆分线路，只需根据需要将它们分配给您的阵列。

# ruby - 将聊天模块集成到现有的 ruby 应用程序

> ID：13500433
> 
> 赞同：0
> 
> 时间：2012-11-21T19:14:20.443
> 
> 标签：ruby, ruby-on-rails-3, chat, juggernaut

我有一个 Rails 应用程序（Rails3 / ruby​​ 1.9.x），我的客户希望聊天与应用程序集成（例如：就像在“facebook”中一样），所以我想知道我的选择是什么，什么是是最好的方法，以下是要求

1 - 只有登录的用户（到 ruby​​ 应用程序）才能与他们的朋友聊天 2 - 简单的聊天，（无需传递图像、文件等） 3 - 不会被大量使用（如 facebook 聊天)

以下是我认为我可能有的选项

**1 - 创建一个聊天模块（例如：通过使用[juggernaut](http://juggernaut.rubyforge.org/)）**，但我担心的是，

那会是一个简单的实现吗

自从'juggernaut'以来，使用闪光灯将是一个缺点

**2 - 集成一个 3rdparty 开源聊天模块 (ruby)**

我不确定有没有像这样的。

**3 - 集成一个 3rdparty 开源聊天模块 (javascript)**

我不确定有没有像这样的。

我不确定如何进行身份验证和所有;(

你能帮我吗:)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:22:13.683

也许你喜欢这个，它是一个红宝石消息传递宝石

[https://github.com/ging/mailboxer](https://github.com/ging/mailboxer)

# python - 使用 Python 在内存中加载文件

> ID：13500434
> 
> 赞同：7
> 
> 时间：2012-11-21T19:14:20.643
> 
> 标签：python, mmap

我尝试使用以下方法将文件加载到内存中：

```
import mmap

with open(path+fileinput+'example.txt', 'rb') as f:
       fileinput = mmap.mmap(f.fileno(), 0, prot=mmap.PROT_READ) 
```

当我运行代码时出现错误：

```
AttributeError: 'module' object has no attribute 'PROT_READ' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T19:19:16.363

`PROT_READ`和`PROT_WRITE`是 Unix 特定的。您可能正在寻找：

```
mmap.mmap(f.fileno(), 0, access=mmap.ACCESS_READ) 
```

该[`mmap`页面](http://docs.python.org/3/library/mmap.html)实际上有 Unix/Windows 版本的不同条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T23:04:29.903

我最近在我的测试程序 mmap.py 中收到了同样的错误消息。将我的测试程序重命名为其他名称 (mmap_test.py) 修复了导致 numpy 的 memmap.py 在执行“import mmap”时出现的名称冲突。

# java - 从 Servlet 输出 HTML 的最佳实践是什么？

> ID：13500442
> 
> 赞同：2
> 
> 时间：2012-11-21T19:14:34.527
> 
> 标签：java, jsp, servlets

我有一个使用 JSP 和 Java Servlet 组合的 Web 应用程序。我将 JSP 用于主窗体，所有 servlet 用于输出结果。

我使用了各种技术来输出下面的 HTML 显示，但它们看起来都有些粗糙，我想知道最好的做法是什么？

示例 1：

```
out.println("<html>");
out.println("<head>");
out.println("</head>");
... 
```

示例 2：

```
out.println("<html> <head> </head> <body>") ... 
```

示例 3：

```
String header = "<html> <head> </head> <body>";
output.println("<div> <p>" + result + "</p> </div>" ); 
```

示例 4：

```
Forward back to JSP for HTML and post result variable. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:18:33.623

JSP 是视图。Servlet 是控制器。HTML 将由视图生成。因此，HTML 属于 JSP，而不属于 Servlet。

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)
*   [我们的 JSP 维基页面](https://stackoverflow.com/tags/jsp/info)

# sql-server - SQL Server 中是否有强制使用特定服务器的方法？

> ID：13500450
> 
> 赞同：2
> 
> 时间：2012-11-21T19:14:49.190
> 
> 标签：sql-server, ssms

不要与“使用数据库”混淆

我在一家拥有许多服务器的公司工作，分析师总是询问是否有办法强制使用特定服务器，因为我们经常打开访问多个服务器的查询，SSMS 会感到困惑。目前，解开 SSMS 混乱的唯一方法是关闭和重新打开事物，没有人喜欢在生产力中间必须这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:08:09.760

确实有办法。

1.  *右键单击*查询正文
2.  在“连接”子菜单下，选择“*更改连接*”
3.  利润！

![菜单详情](../Images/49cbdcd28e349bf18be43c8211dda211.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:19:50.577

没有办法以这种方式限制 SSMS，尽管您有一些选项可以减轻错误：

*   确保您的分析师使用不同的用户名登录到不同的服务器，这些用户名对他们设置了适当的限制，因此他们不能在不应该使用的地方使用一个。

*   安装[SQL Server Power Tools](http://www.ssmstoolspack.com/Features) - 一项功能将为标签着色。每种颜色将对应一个连接的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:31:22.593

恕我直言，我相信您可能希望您的网络管理员考虑设置备用管道。请参阅[SQL Server 以侦听备用管道](http://msdn.microsoft.com/en-us/library/ms189321.aspx)...

但是，我认为没有选项可以“热交换”打开 SSMS 到不同网络 IP 的开放连接......

# javascript - 显示原型对象的属性？

> ID：13500451
> 
> 赞同：0
> 
> 时间：2012-11-21T19:14:52.813
> 
> 标签：javascript

这里我有一个简单的继承函数，它接受一个对象参数并返回一个新创建的对象，并将传递的对象作为它的原型对象。

```
function inherit(p) {
if (p == null) throw TypeError(); //p must not be null
if(Object.create) { //if the object.create method is defined
    return Object.create(p); //use it
}

//type checking
var typeIs = typeof p; //variable that holds type of the object passed
if(typeIs !== 'object' && typeIs !== 'function') {
    throw TypeError();
}

function f() {}; //dummy constructor
f.prototype = p; //prototype
return new f(); //return new constructor
}

var $f0 = {}; 
$f0.x = 1; 
var $g0 = inherit($f0); 
$g0.y = 2;
var $h0 = inherit($g0); 

console.log('x' in $h0); //true
console.log(Object.getOwnPropertyNames($h0.prototype)); //throws error 
```

我遇到的问题是在我运行我的`inherit`函数后，我无法查找对象原型属性。

我将如何显示原型对象的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:39:42.647

您要使用或非标准[属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)。仅是构造函数上的属性名称。`Object.getOwnPropertyNames(`[`Object.getPrototypeOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getPrototypeOf)`($h0))`[`__proto__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)`prototype`

# android - Android WebView 呈现空白/白色，视图不会在 css 更改或 HTML 更改时更新，动画不连贯

> ID：13500452
> 
> 赞同：51
> 
> 时间：2012-11-21T19:14:56.063
> 
> 标签：android, html, css, cordova

每当我进行 css 类更改时，更改并不总是出现。当我有一个向按钮添加类似向下类名称的触摸事件时，这似乎会发生。该按钮不会更新，页面上的其他任何内容也不会更新。它的工作时间非常不稳定。我还注意到，有时我的元素看起来是白色的，没有任何内容或任何东西。这非常令人沮丧！

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-21T19:14:56.063

**注意：**
Android 4.4+ 有更好的解决方案。这是一个`WebView`名为*CrossWalk*的替代品。它使用最新的 Chromium 套件，非常棒。你可以在这里阅读它：[crosswalk-project.org](https://crosswalk-project.org "crosswalk-project.org")

此外，从 Android 4.4 开始，似乎`invalidate()`不再需要该解决方案，您可以使用其他一些更安全的答案。我只会将这种`invalidate()`方法用作最后的努力。

* * *

我正在回答我自己的问题，希望能帮助人们解决与我相同的问题。

我已经尝试了几种方法来让事情变得更好，即使是臭名昭著的方法——`webkit-transform: translate3d(0,0,0);`即使这样也不太好。

让我与您分享什么是有效的。

首先，使用最新的 API。我正在使用 API 15。在您的`AndroidManifest.xml`中，确保启用*硬件加速*。如果您的 API 版本不支持此功能，请继续进行下一步。

如果您的版本确实支持它，您可以通过修改清单来启用它：

```
<application
   ...
   android:hardwareAccelerated="true"> 
```

此外，请确保您的清单具有您正在使用的最低支持 API。由于我使用的是 API 15，这就是我的清单具有的内容：

```
<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="15" /> 
```

*（**更新**：你现在应该修改你的值`build.gradle`）*

现在，在您的主要 CSS 文件中，将在 WebView 中呈现的内容，添加如下内容：

```
body div {
    -webkit-transform: translate3d(0,0,0);
} 
```

使用您拥有的任何其他元素类型添加到 body div 位；您可能可以排除图像、、、`ul`等`li`。将这种 CSS 样式应用于所有内容的原因只是通过反复试验，我发现将其应用于所有内容似乎效果最好。对于较大的 DOM 树，您可能需要更具体。但是，我不确定规范是什么。

当您实例化您的`WebView`时，您需要设置一些设置：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");
    appView.getSettings().setRenderPriority(RenderPriority.HIGH);
    appView.getSettings()
            .setPluginState(WebSettings.PluginState.ON_DEMAND);
} 
```

倒数第二，但至关重要的一点：我正在阅读该`WebView`课程的源代码，发现这个关于强制重绘的小评论。有一个`static final boolean`, 当设置`true`为时将强制视图始终重绘。我对 Java 语法不是很了解，但我认为您不能直接更改类的静态最终属性。所以我最终做的是像这样扩展课程：

```
import org.apache.cordova.CordovaWebView;

import android.content.Context;
import android.graphics.Canvas;

public class MyWebView extends CordovaWebView {
    public static final String TAG = "MyWebView";

    public MyWebView(Context context) {
        super(context);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        // Warning! This will cause the WebView to continuously be redrawn
        // and will drain the devices battery while the view is displayed!
        invalidate();
    }

} 
```

请记住，我使用的是 Cordova/PhoneGap，所以我必须从`CordovaWebView`. 如果您在 onDraw 方法中看到，则会调用`invalidate`. 这将导致视图不断重绘。但是，我强烈建议添加逻辑以仅在需要时重绘。

如果您使用的是 Cordova，还有最后一步。您必须告诉 PhoneGap 使用您的新`WebView`课程而不是他们自己的`WebView`课程。在您的`MainActivity`班级中，添加以下内容：

```
public void init(){
    CordovaWebView webView = new MyWebView(MainActivity.this);
    super.init(webView, new CordovaWebViewClient(this, webView), new CordovaChromeClient(this, webView));
} 
```

就是这样！尝试运行您的应用程序，看看是否一切都更加顺畅。在进行所有这些更改之前，页面会显示为白色，直到再次点击屏幕后才会应用 CSS 更改，动画非常不稳定甚至不明显。我应该提到动画仍然不稳定，但远不如以前那么不稳定。

如果有人对此有任何补充，请在下方发表评论。我总是愿意进行优化；而且我完全意识到可能有更好的方法来做我刚才推荐的事情。

如果我的上述解决方案对您不起作用，您能否描述一下您的具体情况以及您在使用 Android 时看到的结果`WebView`？

最后，我已将此答案启用为*“社区 wiki”*，因此任何人和每个人都可以随时进行调整。

谢谢！

* * *

**编辑：**

使用最新的 PhoneGap，您需要让您的 init() 方法看起来更像这样：

```
public void init(){
    CordovaWebView webView = new MyWebView(MainActivity.this);
    super.init(webView, new IceCreamCordovaWebViewClient(this, webView), new CordovaChromeClient(this, webView));
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-23T16:17:18.743

我实施了凯尔的解决方案，它解决了这个问题。但是，当应用程序打开时，我注意到 android 4.0.4 上的电池消耗很大。同样在更改之后，我有用户抱怨 swiftKey 键盘不再适用于我的应用程序。

我的应用程序中的每一个更改都是由用户操作触发的，所以我想出了一个修改版本，它只在 touchEvent 之后触发 invalidate()：

```
 Handler handler = new Handler();
    public boolean onTouchEvent (MotionEvent event){
        super.onTouchEvent(event);
        handler.postDelayed(triggerInvalidate, 60);
            handler.postDelayed(triggerInvalidate, 300);
        return true;
    }

    private Runnable triggerInvalidate=new Runnable(){
        public void run(){
            invalidate();
        }
    }; 
```

从未使用 Java 进行任何编程，因此可能有更好的解决方案来做到这一点。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-22T07:53:35.177

re：重绘问题，可以通过从元素中读取属性来强制重绘

所以说你这样做：

```
$('#myElement').addClass('foo'); // youre not seeing this take effect 
```

如果你之后这样做：

```
$('#myElement').width(); 
```

它将强制重绘。

这样你就可以有选择性，而不是一直重绘整个页面，这很昂贵

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-10-09T16:53:02.093

对我来说，这个问题只发生在三星设备上。我可以通过禁用 WebView 的硬件加速来修复它：

```
webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-10-08T16:47:06.387

正如上面和其他地方所指出的 - 覆盖`View.onDraw()`和调用`View.invalidate`会导致不愉快的电池/应用程序性能会下降。您也可以`invalidate`像这样在 x ms 内进行手动调用

```
/**
 * Due to bug in 4.2.2 sometimes the webView will not draw its contents after the data has loaded. 
 * Triggers redraw. Does not work in webView's onPageFinished callback for some reason
 */
private void forceWebViewRedraw()
{
    mWebView.post(new Runnable() {
        @Override
        public void run()
        {
            mWebView.invalidate();
            if(!isFinishing())
                mWebView.postDelayed(this, 1000);
        }
    });
} 
```

我尝试进行无效调用，`WebViewClient.onPageLoaded()`但这似乎不起作用。虽然我的解决方案可能会更好，但它很简单并且对我有用（我只是显示了一个 twitter 登录）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-09T23:20:06.167

另请参阅我在[WebView 的答案在触及 Android 4.2.2 之前无法呈现](https://stackoverflow.com/questions/15127762/webview-fails-to-render-until-touched-android-4-2-2/16472671#16472671)，这个想法是将@Olivier 的函数导出到 JavaScript，这样您就可以在合理的部分触发 JS 的无效...我的上帝，又是一个黑客！！:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-26T00:47:08.800

我遇到了这个问题，因为 onPageStared 和 onPageFinished 我显示和隐藏了加载动画。

由于正在注入 JS，我从原始网站执行我的菜单和内容，并注意到在 onPageFinished 上注入 JS 会强制 webview 绘制内容。这是您可以在 onPageFinished 末尾添加的示例

```
view.loadUrl("javascript:(function() { var select = document.getElementsByClassName('something')[0]\r\n" + 
                            "                     if(select)" +
                            "                       select.style.display = 'none';})()"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-15T11:28:46.717

只需在 oncreate() 中清除 webView 的缓存，它就对我有用。

```
webView.clearCache(true); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-11T09:43:49.490

您应该通过修改清单来启用硬件：

```
<application
   ...
   android:hardwareAccelerated="true">
```

在你的活动 onResume()

```
webView.postDelayed(() -> {
    if (!isFinishing() && webView != null) {
        webView.setLayerType(View.LAYER_TYPE_NONE, null);
    }
}, 1000);
```

在你的 onPause()

```
webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
```

# ruby-on-rails-3 - 在设计登录警报中显示用户用户名

> ID：13500455
> 
> 赞同：0
> 
> 时间：2012-11-21T19:15:00.580
> 
> 标签：ruby-on-rails-3, devise

我想更改用户通过设计登录时显示的消息。在我的用户模型中，我有一个列：名称，我想在消息中显示它，所以在我的 devise.en.yml 文件中我可以更改文本，我尝试像这样从模型中调用用户名

```
signed_in: 'Hello %{User.name}, Time to get cooking' 
```

虽然正在将消息显示为这样的字符串

```
Hello %{User.name}, Time to get cooking 
```

如何从模型中提取名称？这可能很简单，所以请原谅我的天真

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:33:05.940

好的，经过一番谷歌搜索/stackoverflow，我得到了答案

在 Controllers 中创建以下文件夹

```
app/controllers/my_devise 
```

在 my_devise 中创建控制器会话（会话控制器是设计用来管理 user_sign_in 和 sign_out 进程的

您需要在新创建的会话控制器中继承设计会话控制器

```
class MyDevise::SessionsController < Devise::SessionsController 
```

您可以在此处复制设计会话控制器

我像这样修改了创建动作

```
set_flash_message :notice, :signed_in, :name => resource.name if is_navigational_format? 
```

注意我使用 name 而不是 User.name，似乎 devise 已经知道这是 User 模型，这是有道理的

在我的路线中，我添加了

```
 devise_for :users,
          :controllers => {
          :sessions => 'my_devise/sessions'
          } 
```

在我的 devise.en.yml 文件中，我添加了

```
signed_in: 'Hello %{name}, Time to get cooking' 
```

再次使用名称而不是 user.name

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T12:12:34.777

你真的应该打电话`rails g migration AddUsernameToUser` 然后运行`rake db:migrate`

然后设计有一个内置功能，即`<%= current_user.username %>`

希望有帮助！

# c# - 如何转换 IEnumerable > 到 IObservable

> ID：13500456
> 
> 赞同：9
> 
> 时间：2012-11-21T19:15:03.347
> 
> 标签：c#, .net, linq, .net-4.0, system.reactive

是否有内置方法可以将 IEnumerable<Task<T>> 转换为 IObservable<T>。顺序并不重要，只要我得到东西，虽然最好是完成后。

如果它还不存在，什么可能是完成它的好方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T20:23:27.620

我相信这会奏效

```
tasks.Select(t => Observable.FromAsync(() => t))
     .Merge(); 
```

每个任务都会以它们完成的任何顺序将其结果发送到可观察序列。您可以订阅该序列并以这种方式对结果做任何您想做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T00:55:10.320

你可以这样做：

```
var query = tasks.ToObservable().SelectMany(task => task.ToObservable()); 
```

或者，或者，像这样：

```
var query =
    from t in tasks.ToObservable()
    from i in t.ToObservable()
    select i; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T19:19:20.077

我相信你正在寻找的可能是`Observable.Start()`

然后，您可以追加`.Subscribe(callbackMethod)`到末尾并在需要时指定回调。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T12:42:45.947

从 Rx 2.0 开始，有一种更简单的方法：

```
var query = tasks.ToObservable().Merge(); 
```

# c - OpenGL NURBS 曲面

> ID：13500458
> 
> 赞同：9
> 
> 时间：2012-11-21T19:15:11.450
> 
> 标签：c, opengl, bezier, nurbs

我正在学习 OpenGL，我想得到一个中间有轻微驼峰的表面。我目前正在使用此代码，但我不确定如何调整 ctrl 点以使其成为我想要的方式。它目前喜欢

![在此处输入图像描述](../Images/c5029f833260a67a123dc616cfd4dbe2.png)

我想要这样：

![在此处输入图像描述](../Images/580bef7da24279c7db142ec48a79e0d5.png)

我不完全确定我应该使用哪些控制点，我对它的工作原理感到困惑。

```
#include <stdlib.h>
#include <GLUT/glut.h>

GLfloat ctrlpoints[4][4][3] = {
   {{-1.5, -1.5, 4.0}, {-0.5, -1.5, 2.0}, 
    {0.5, -1.5, -1.0}, {1.5, -1.5, 2.0}}, 
   {{-1.5, -0.5, 1.0}, {-0.5, -0.5, 3.0}, 
    {0.5, -0.5, 0.0}, {1.5, -0.5, -1.0}}, 
   {{-1.5, 0.5, 4.0}, {-0.5, 0.5, 0.0}, 
    {0.5, 0.5, 3.0}, {1.5, 0.5, 4.0}}, 
   {{-1.5, 1.5, -2.0}, {-0.5, 1.5, -2.0}, 
    {0.5, 1.5, 0.0}, {1.5, 1.5, -1.0}}
};

void display(void)
{
   int i, j;

   glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
   glColor3f(1.0, 1.0, 1.0);
   glPushMatrix ();
   glRotatef(85.0, 1.0, 1.0, 1.0);
   for (j = 0; j <= 8; j++) {
      glBegin(GL_LINE_STRIP);
      for (i = 0; i <= 30; i++)
         glEvalCoord2f((GLfloat)i/30.0, (GLfloat)j/8.0);
      glEnd();
      glBegin(GL_LINE_STRIP);
      for (i = 0; i <= 30; i++)
         glEvalCoord2f((GLfloat)j/8.0, (GLfloat)i/30.0);
      glEnd();
   }
   glPopMatrix ();
   glFlush();
}

void init(void)
{
   glClearColor (0.0, 0.0, 0.0, 0.0);
   glMap2f(GL_MAP2_VERTEX_3, 0, 1, 3, 4,
           0, 1, 12, 4, &ctrlpoints[0][0][0]);
   glEnable(GL_MAP2_VERTEX_3);
   glMapGrid2f(20, 0.0, 1.0, 20, 0.0, 1.0);
   glEnable(GL_DEPTH_TEST);
   glShadeModel(GL_FLAT);
}
void reshape(int w, int h)
{
   glViewport(0, 0, (GLsizei) w, (GLsizei) h);
   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();
   if (w <= h)
      glOrtho(-5.0, 5.0, -5.0*(GLfloat)h/(GLfloat)w, 
               5.0*(GLfloat)h/(GLfloat)w, -5.0, 5.0);
   else
      glOrtho(-5.0*(GLfloat)w/(GLfloat)h, 
               5.0*(GLfloat)w/(GLfloat)h, -5.0, 5.0, -5.0, 5.0);
   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();
}

int main(int argc, char** argv)
{
   glutInit(&argc, argv);
   glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);
   glutInitWindowSize (500, 500);
   glutInitWindowPosition (100, 100);
   glutCreateWindow (argv[0]);
   init ();
   glutDisplayFunc(display);
   glutReshapeFunc(reshape);
   glutMainLoop();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-21T20:20:48.907

**编辑**：我以为你在试验，但我看到代码来自[OpenGL 教程](http://www.glprogramming.com/red/chapter12.html)。我浏览了一下，现在明白你的意思了。从那里学习基础知识是很困难的。

## NURBS 背景

掌握 NURBS 的最佳方法是交互式地使用它。然后，您将获得关于边缘定义点（在边缘上）、形状定义点（每隔一个）、它们之间的切线关系和连续性的直觉。NURBS 可以由补丁组成，在边缘缝合在一起，连续性受到高度控制 - 即您可以要求 G3 用于汽车的主体或 C1 用于廉价的游戏模型。从任何描述中都很难得到这个概念。如果您想以这种方式获得它，我强烈建议您试用[Rhino Nurbs Modeller](http://www.rhino3d.com/). 我在几年前使用过它，现在它似乎被废弃了，但它仍然是具有最佳 NURBS 支持之一的软件（Autodesk 3d Studio MAX 和 MAYA 的情况更糟）。不过，这可能会有点耗时，对于初学者来说，我建议使用更简单的东西；从[“简单贝塞尔曲线编辑器”页面](http://www.idi.ntnu.no/~mlh/codebase/grafisk2/)获取小程序以进行旋转。

要了解 NURBS，最好查阅[有关 Bezier 曲线的 Wikipedia 文章](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)。一旦掌握了点位置和最终曲线形状之间的关系，您就可以轻松地将其推广到曲面。我发现这个动画非常直观：

![代码说明](../Images/47ed77bae1ad9d88a4ff1287e5ee6e78.png)

您可以将示例中的曲面想象成一组四个曲线，上面覆盖着一块布。使用我之前链接的小程序，您可以使用位置并获得对结果形状的即时反馈。注意`t`参数 - 它是沿曲线的坐标，范围为 [0, 1]。NURBS 曲面具有其中两个坐标，按照惯例称为`u`和`v`（这对于绘图功能很重要）。

因此，`ctrlpoints`代码中的结构包含所有点坐标。为简化解释，这些是四个三次贝塞尔曲线（动画中的曲线）。对于每条曲线，您有 3 个维度内的四个点。如果忽略 Y 轴，那么它们都位于一个网格上，X 和 Z 分别为：-1.5、-1.0、1.0、1.5。这解释了总共 32 个值（X 为 4x4，Z 为 4x4）。

其余的是高度，Y 值。在您的情况下，它是 中每个点的第二个值`ctrlpoints`。为了获得您的预期结果，您可以使所有 Y 值在边缘（外部）上相等，并在中间略微升高（4 个内部）。你会得到：

![NURBS 凹凸曲面](../Images/6da7ed72e7658d6baa21c6240cd84a49.png)

用于渲染上图的点：

```
GLfloat ctrlpoints[4][4][3] = {
 {{-1.5, 1.0, -1.5},  {-0.5, 1.0,-1.5 }, {0.5, 1.0, -1.5 },   {1.5, 1.0,-1.5}}, 
 {{-1.5, 1.0, -0.5},  {-0.5, 2.0,-0.5 }, {0.5, 2.0, -0.5 },   {1.5, 1.0,-0.5}}, 
 {{-1.5, 1.0,  0.5},  {-0.5, 2.0, 0.5 }, {0.5, 2.0,  0.5 },   {1.5, 1.0, 0.5}}, 
 {{-1.5, 1.0,  1.5},  {-0.5, 1.0, 1.5 }, {0.5, 1.0,  1.5 },   {1.5, 1.0, 1.5}}
};
//        ^                   ^                 ^                    ^
//        |                   |                 |                    |
//        |                   |                 |                    |
//        \_________ Those are most relevant - Y-coord, height ______/ 
```

## OpenGL 中的 NURBS 与 GLUT - API 演练

我看到 OpenGL API 隐藏了相当相关的细节。NURBS 曲面是使用函数绘制`Evaluator`和定义的`Map`。

您应该在`init(void)`函数中定义控制点，如下所示：

```
glMap2f(GL_MAP2_VERTEX_3, 0, 1, 3, 4,
           0, 1, 12, 4, &ctrlpoints[0][0][0]); 
```

可以[在 glMap2f 的 MSDN 站点上](http://msdn.microsoft.com/en-us/library/windows/desktop/ee872053%28v=vs.85%29.aspx)找到对该功能的良好解释。我们正在传递控制点、它们的类型以及数组步幅和顺序等细节。

您可以使用`Evaluator`函数绘制它。它接受两个坐标作为参数并返回 3d 空间中的一个点。那些输入坐标正是我前面提到的，在动画下`u`。`v`在我们的示例中：

```
 glBegin(GL_LINE_STRIP); // we'll draw a line

      // take 31 samples of a cross-section of the surface
      for (i = 0; i <= 30; i++)
         // for each sample, evaluate a 3d point
         glEvalCoord2f((GLfloat)i/30.0, (GLfloat)j/8.0);

         // notice j is constant in the loop here, but
         // is being changed by the outer loop.
         //
         // j is iterated in 9 steps, so we'll end up
         // with 9 lines
      glEnd(); 
```

我特意省略了外循环，这里描述：

```
 // we want 9 lines
   for (j = 0; j <= 8; j++) {
      // OpenGL state machine will be used to draw lines

      glBegin(GL_LINE_STRIP);
      // inner loop for j-th line along X

      glBegin(GL_LINE_STRIP);
      // inner loop for j-th line along Z

      glEnd(); // done with the lines
   } 
```

## 工作示例

```
#include <stdlib.h>
#include <GL/glut.h>

GLfloat ctrlpoints[4][4][3] = {
 {{-1.5, 1.0, -1.5}, {-0.5, 1.0,-1.5 }, {0.5, 1.0, -1.5 }, {1.5, 1.0,-1.5}}, 
 {{-1.5, 1.0, -0.5}, {-0.5, 2.0,-0.5 }, {0.5, 2.0, -0.5 }, {1.5, 1.0,-0.5}}, 
 {{-1.5, 1.0,  0.5}, {-0.5, 2.0, 0.5 }, {0.5, 2.0,  0.5 }, {1.5, 1.0, 0.5}}, 
 {{-1.5, 1.0,  1.5}, {-0.5, 1.0, 1.5 }, {0.5, 1.0,  1.5 }, {1.5, 1.0, 1.5}}
};

void display(void)
{
   int i, j;

   glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
   glColor3f(1.0, 1.0, 1.0);
   glPushMatrix();
   glRotatef(25.0, 1.0, 1.0, 1.0);
   for (j = 0; j <= 8; j++) {
      glBegin(GL_LINE_STRIP);
      for (i = 0; i <= 30; i++)
         glEvalCoord2f((GLfloat)i/30.0, (GLfloat)j/8.0);
      glEnd();
      glBegin(GL_LINE_STRIP);
      for (i = 0; i <= 30; i++)
         glEvalCoord2f((GLfloat)j/8.0, (GLfloat)i/30.0);
      glEnd();
   }
   glPopMatrix();
   glFlush();
}

void init(void)
{
   glClearColor(0.0, 0.0, 0.0, 0.0);
   glMap2f(GL_MAP2_VERTEX_3, 0, 1, 3, 4,
           0, 1, 12, 4, &ctrlpoints[0][0][0]);
   glEnable(GL_MAP2_VERTEX_3);
   glMapGrid2f(20, 0.0, 1.0, 20, 0.0, 1.0);
   glEnable(GL_DEPTH_TEST);
   glShadeModel(GL_FLAT);
}

void reshape(int w, int h)
{
   glViewport(0, 0, (GLsizei) w, (GLsizei) h);
   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();
   if (w <= h)
      glOrtho(-5.0, 5.0, -5.0*(GLfloat)h/(GLfloat)w, 
               5.0*(GLfloat)h/(GLfloat)w, -5.0, 5.0);
   else
      glOrtho(-5.0*(GLfloat)w/(GLfloat)h, 
               5.0*(GLfloat)w/(GLfloat)h, -5.0, 5.0, -5.0, 5.0);
   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();
}

int main(int argc, char** argv)
{
   glutInit(&argc, argv);
   glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
   glutInitWindowSize(500, 500);
   glutInitWindowPosition(100, 100);
   glutCreateWindow(argv[0]);
   init();
   glutDisplayFunc(display);
   glutReshapeFunc(reshape);
   glutMainLoop();
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T07:08:20.727

尽管[Rekin](https://stackoverflow.com/a/13501456/1716339)的答案在完整性和表述上很难匹配，但仍有一些需要澄清的地方：

NURBS 中的“R”代表理性。这需要使用齐次坐标，其中每个控制点 [x,y,z] 被分配一个*权重*1/w，这将用于划分所有其他元素，使 NURBS 控制点真正成为四个元素的向量。正是通过这第四个元素，我们可以用 NURBS 精确地表示圆形、花环和球体，而对于常规的贝塞尔曲线或样条曲线，我们只能近似圆形。

幸运的是，使用 openGL 的人至少会很快熟悉元素*w*的使用，这最终会导致理解。（或错觉......）。

如果使用真正的 NURBS 建模器，则实际上还需要导入第四个组件，除非建模器被编程为导出仅由 3 个元素向量表示的非有理曲面近似。

# cordova - 电话间隙设置工作目录

> ID：13500461
> 
> 赞同：1
> 
> 时间：2012-11-21T19:15:21.017
> 
> 标签：cordova, filesystems

好的，使用 /image_location.png 是设备的根目录，而不是 www 文件夹的根目录。那么有没有办法将我的应用程序的工作目录设置为 www 文件夹？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T19:19:58.247

只需使用相对路径`image_location.png`而不是`/image_location.png`

如果您正在使用例如来自位于的 css 文件中的路径，`www/resources/css/`那么您可以使用`../../image_location.png`

# regex - R 正则表达式（靠近单词）

> ID：13500463
> 
> 赞同：4
> 
> 时间：2012-11-21T19:15:27.930
> 
> 标签：regex, r

我想知道如何使用正则表达式选择*彼此靠近的单词。*例如，我想从以下短语中选择数字和单词英里：

```
"140,000 mostly freeway miles" 
"173k commuter miles. "       
"154K(all highway) miles 
```

中间的选词不知道怎么填：

```
[0-9]+ ???? miles 
```

*near 可以定义为相隔 1-3 个单词。感谢您指出了这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:15:37.370

这是一个答案`R`。其他答案可以进行一些修改。大多数情况下，它们需要有“双重转义”，你必须使用成对的函数`regexpr`和`regmatches`.

```
x=c("140,000 mostly freeway miles" ,"173k commuter miles. " ,"154K(all highway) miles")

gsub('([[:digit:][:punct:]k]+).*(miles).*', 
     '\\1 \\2', 
     x,
     ignore.case=TRUE)

# [1] "140,000 miles" "173k miles"    "154 miles" 
```

这表示第 1 组中的组号标点符号或 ak。任何内容都遵循此。然后是第 2 组，即英里这个词，然后是其他任何内容。

您还可以使用“普通”正则表达式语法：

```
gsub('([0-9,k]+).*(miles).*', 
     '\\1 \\2', 
     x,
     ignore.case=TRUE) 
```

但是，我会先清理数据，然后再进行一些更简单的匹配！（例如`tolower`并删除标点符号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:08:12.043

关于问题域有许多悬而未决的问题。除此之外，让我们使用以下数据，其中包含问题中提供的样本数据用于正匹配和一些附加样本数据用于负匹配（我正在使用`R version 2.14.1 (2011-12-22)`）：

```
x <- c("140,000 mostly freeway miles", "173k commuter miles. ", "154K(all highway) miles", "1,24 almost but not mostly freeway miles", "1,2,3,4K MILES") 
```

`1,2,3,4K MILES`被添加为否定匹配，因为问题定义为接近，`1-3 words apart`并且它的“接近词”为零。

如果我们使用以下...

```
sub('[\\d,]+k?\\s+(([^\\s]+\\s+){1,3})miles', '\\1', x, ignore.case = TRUE, perl = TRUE) 
```

...我们得到：

```
[1] "mostly freeway "
[2] "commuter . "
[3] "154K(all highway) miles"
[4] "1,24 almost but not mostly freeway miles"
[5] "1,2,3,4K MILES" 
```

可能不是你想要的结果。由于数据未标准化，因此您必须使用会变得非常复杂的正则表达式模式。正如[贾斯汀](https://stackoverflow.com/users/906490/justin)在他的[回答](https://stackoverflow.com/a/13501366/649852)中建议的那样，`clean up the data first then do some simpler matching`。

您可以将数据标准化如下：

```
y <- gsub('\\pP+', ' ', x, perl = TRUE)
y <- gsub('\\s+', ' ', y, perl = TRUE)
y <- gsub('^\\s+|\\s+$', '', y, perl = TRUE)
y <- gsub('(\\d)\\s(?=\\d)', '\\1\\2', y, perl = TRUE) 
```

请参阅下面的参考资料以获取更多信息。这基本上是删除标点符号并确保单词由一个空格分隔。这将为您留下`y`：

```
[1] "140000 mostly freeway miles"
[2] "173k commuter miles"
[3] "154K all highway miles"
[4] "124 almost but not mostly freeway miles"
[5] "1234K MILES" 
```

现在删除与您要查找的内容不匹配的行：

```
y <- sub('^(?!\\d+k?\\s((?!miles)[^\\s]+\\s){1,3}miles).*$', '', y, ignore.case = TRUE, perl = TRUE)
y
[1] "140000 mostly freeway miles" "173k commuter miles"
[3] "154K all highway miles"      ""
[5] "" 
```

最后，得到“近词”：

```
y <- sub('^\\d+k?\\s((?!miles)[^\\s]+(\\s(?!miles)[^\\s]+){0,2})\\smiles', '\\1', y, ignore.case = TRUE, perl = TRUE)
y
[1] "mostly freeway" "commuter"       "all highway"    ""
[5] "" 
```

可能有更简单的方法来规范化数据，但这为您提供了一些正则表达式示例。

有关详细信息，请参阅：

*   [R grep](http://stat.ethz.ch/R-manual/R-devel/library/base/html/grep.html)命令。
*   优秀的[Regular-Expressions.info](http://www.regular-expressions.info/)网站。
*   有关 Perl 正则表达式模式的更多信息的[`pcrepattern`手册页](http://linux.die.net/man/3/pcrepattern)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:48:13.823

这仍然有点模糊，但是假设我们将所有内容定义为一个由空格分隔的“单词”。因此，如果可能有 1-3 个单词，则数字和之间需要有 2-4 个空格（实际上，我将第一个空格设为可选，请参阅您的最后一个示例）`miles`：

```
\d[\d,.]*k?\s*(\S+\s+){1,3}miles 
```

请注意，您应该使此正则表达式不区分大小写，以匹配`k`和`K`。

另请注意，数字部分当然可以改进。这个将只取第一个数字，然后包含尽可能多的数字、逗号和句点，无论这是否是有效的数字格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T19:23:23.250

使用这个正则表达式`\d+([.,]\d+)?(?=.*?miles)`

# c++ - 当我尝试重写 Direct3D 设备的 `EndScene` 函数的指针时，为什么没有任何反应？

> ID：13500465
> 
> 赞同：3
> 
> 时间：2012-11-21T19:15:34.577
> 
> 标签：c++, directx, hook

我尝试连接 DirectX 9 应用程序以从中获取屏幕截图。这就是我所做的：

1.  我注入了我的 DLL，`CreateRemoteThread`并将`LoadLibraryW`地址作为参数传递。我假设目标应用程序此时已经在运行。
2.  在 DLL 的`DllMain`I`CreateThread`中，我创建了一个临时 Direct3D 设备来获取它的 VMT：

    ```
    自动 pID3D9 = Direct3DCreate9(D3D_SDK_VERSION);
    D3DPRESENT_PARAMETERS pp = { };
    IDirect3DDevice9 *pID3DDevice = NULL;
    自动 hr = pID3D9->CreateDevice（D3DADAPTER_DEFAULT，D3DDEVTYPE_NULLREF，NULL，
        D3DCREATE_SOFTWARE_VERTEXPROCESSING, &pp, &pID3DDevice);
    自动 pID3DDevicevt = *reinterpret_cast(pID3DDevice);
    ```

3.  当我尝试重写指向 Direct3D 设备`EndScene`函数的指针时，什么也没有发生：

    ```
    // 这里 '42' 是 EndScene 在 VMT 中的索引，哈哈
    pID3DDevicevt[42] = my_EndScene;
    ```

    *注意：*我`VirtualProtect`在重写之前的那个指针和 `VirtualProtect`它之后的指针，我只是省略了那个代码。

4.  我以“经典”挂钩结束：我重写了 6 个字节的原始函数，因此它无条件地跳转到我的函数。然后我恢复原始字节，做我自己的事情，调用原始函数并再次重新挂钩该函数。有用。

**当我尝试重写 Direct3D 设备`EndScene`函数的指针时，为什么没有任何反应？**

我已经搜索并看到一些信息，必须足够早地放置 VMT 挂钩才能使其工作。是这个原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:51:54.957

您的问题可能与我的问题非常相似（http://stackoverflow.com/questions/14224747/win7-8-dwm-draw-hooking），但我使用 ID3D10Device1。似乎 Direct3D 包含某种保护，可以定期恢复某些方法的原始 vtable 指针。

我还没有找到解决这个问题的正确方法。解决方法是执行定期重新修补 vtable 的后台线程。但它占用了 100% 的 CPU 并且不能捕获所有情况（由于竞争条件）。Yield/Sleep 不能放入这个线程，因为它会错过一些函数调用。

顺便说一句，那是什么“经典”挂钩？我已经阅读了一些关于它的内容，但我不确定如何将它用于 x64 进程（添加 jmp 指令、读取正确的参数、跳回原始函数等......）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-04-06T04:40:58.363

解决方案是不做 vtable 钩子。最好的解决方案是使用虚拟设备执行您正在执行的操作，获取 vtable，获取 EndScene 的索引，取消引用它以获取实际函数的地址，然后执行蹦床挂钩。

我最近的另一个答案中提供了完整的解决方案，包括蹦床钩[D3D9 Hooking (EndScene + DrawIndexedPrimitive)的代码](https://stackoverflow.com/questions/47652902/d3d9-hooking-endscene-drawindexedprimitive/61052959#61052959)

# asp.net-mvc - ASP.NET MVC4 工作正常后返回 500

> ID：13500466
> 
> 赞同：0
> 
> 时间：2012-11-21T19:15:39.423
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我是 ASP.NET MVC 的新手。我在 VS2012 中使用 MVC4。我得到了 id 并且一切正常。当我将 ajax 代码中的 http 请求从 get 更改为 post 时，它失败并出现 500 错误。

所以问题 1 - 我如何调试这种问题 2 - 为什么会在这个特定的实例中发生

我很确定这与我不了解我应该在路由代码中包含的内容有关

我认为很重要的代码

```
//the controller method
            [System.Web.Mvc.HttpPost]
        public void PostPatientAppointment(PatientAppointment patientAppointment)
        {
            init();
            updatePatientAppointmentList();

            foreach (PatientAppointment existingPatientAppointment in patientAppointments)
            {
                if (patientAppointmentConflict(existingPatientAppointment, patientAppointment ))
                {
                    throw new HttpException(409, "Conflict");   
                }
            }

            //return patientAppointment;
        }

function onMouseUp(evt) {
    rect = null;
    mouseDown = false;

    //check for conflicting appointments
    //do the xhr request
    //cycle through appointments looking for conflicts
    var xmlhttp = new XMLHttpRequest();

    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4) {
            if (xmlhttp.status == 200) {
                //open Dojo modal dialogue
                alert("will open dialogue");
            }
            else if( xmlhttp.status == 409)
            {
                alert("There is a conflict with that patient appointment");
            }
            alert("hmm - status was: " + xmlhttp.status );
        }
    }

    var patientAppointment = "{'identity':-1,'doctorId':-1,'patientId':-1,'patientName':null,'startTime':-1, 'endTime':-1,'location':null,'reason':null,'note':null,'recurrenceId':0,'appointmentTypeId':0,'patientShowedUp':false,'confirmed':false,'fullDayEvent':false}";
    xmlhttp.open("POST", "/api/PatientAppointment/", true);
    xmlhttp.send(patientAppointment);
}

public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional}
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:17:47.727

使用浏览器调试器中的网络选项卡。返回 500 后，检查响应正文，它包含错误。

在这个特定的例子中，我看到你有一个 void 方法，所以它什么都不返回。如果这应该返回 an`ActionResult`或 a`JsonResult`那么您要么超过了查询字符串的最大长度（这似乎不是这种情况），要么您不允许`HTTP GET`您的`JsonResult`响应。

# .net - 如何验证数据库连接是否建立成功？

> ID：13500467
> 
> 赞同：1
> 
> 时间：2012-11-21T19:15:50.860
> 
> 标签：.net, vb.net, asp.net-mvc-4, .net-4.5

# 控制器：

```
Imports System.Data.SqlClient

Private Sub SqlClientPermission(value As Boolean)
        allowBlankPassword = True
    End Sub

    Function CreateCommand() As SqlCommand

        Dim sqlconnectionCommand As New SqlConnection("Data Source=MSSQLSERVER;server=(localdb)\v11.0;User Id=xxxx_user;Password=;Database=ColorTable_database.sdf;Integrated Security=false;")

        sqlconnectionCommand.OpenAsync()
        sqlconnectionCommand.RetrieveStatistics()

        Dim sqlqueryString As String = "SELECT ColorTable.* FROM ColorTable"
        Dim sqlqueryCommand As New SqlCommand(sqlqueryString, sqlconnectionCommand)

        'Printing Out the SQL Result

        Return ViewData("sqlqueryCommand")

    End Function 
```

# 问题：

如何验证与数据库的*连接*，以查看它是否已成功建立？

我试过了`RetriveStatistics()`，但我`blank`在网络浏览器中有一个页面（或结果）。

**编辑：**在此示例中，没有要处理的异常，正如我所说的那样，我有一个空白页，并且我希望在进一步继续之前确认与数据库的连接正在工作。

**使用的工具：** *Visual Studio 2012、VB .NET 4.5 MVC 4、Microsoft SQL Server Express*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:17:13.660

您通常不会明确地验证连接，而只是使用它并处理异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:59:44.027

你的预感是正确的：连接可能没有建立。

您正在调用`OpenAsync`的是异步的。返回时过程未完成！看起来你想要的是调用`Open`. 当该调用毫无例外地完成时，连接正在工作。无需验证。

# ruby - Aptana Ruby Snippet 上的转义斜线

> ID：13500468
> 
> 赞同：0
> 
> 时间：2012-11-21T19:16:01.833
> 
> 标签：ruby, aptana, code-snippets

我正在尝试在 Aptana 上创建一个新的片段，如下所示：

```
snippet "dump em arquivo" do |s|
  s.trigger = "debug"
  s.scope = 'source.php'
  s.expansion = "//debug
file_put_contents('${2:/var/d_tmp/debug.log}', print_r(${1}, true) . \"\\n\", ${3:LOCK_EX});"
end 
```

...但是在变量上，作为选项列表`${2:/var/d_tmp/debug.log}`的`/ (slash)`工作和反斜杠也不起作用（`${2:\/var\/d_tmp\/debug.log}`）。

那么，我怎样才能转义斜杠以使代码段真正起作用，输出整个字符串。所需的输出应该是这样的：

```
//debug
file_put_contents('/var/d_tmp/debug.log', print_r(, true) . "\n", LOCK_EX); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:46:39.503

[通过另一个问题](https://stackoverflow.com/questions/6470757/aptana-studio-3-snippets)找到了答案。

作为[应用程序加速器 wiki](https://wiki.appcelerator.org/display/tis/Creating+a+new+snippet#CreatingaNewSnippet-SpecialCharacters)中的示例，转义是使用`two backslashes`.

```
snippet "dump em arquivo" do |s|
  s.trigger = "debug"
  s.scope = 'source.php'
  s.expansion = "//debug
file_put_contents('${2:\\/var\\/d_tmp\\/debug.log}', print_r(${1}, true) . \"\\n\", ${3:LOCK_EX});"
end 
```

# java - 从 Heroku 项目目录中读取 json 文件

> ID：13500469
> 
> 赞同：1
> 
> 时间：2012-11-21T19:16:02.380
> 
> 标签：java, heroku

嗨，我是 heroku java 开发的新手。好吧，我想从项目目录中读取一个 config.json 文件，但不知何故无法弄清楚该文件需要保存在哪里。尝试在 src>main>resources 中保持相同，但在部署后仍然没有找到文件。知道如何引用文件吗？. 我的文件位于 src/main/resources/config.json。

尝试做这样的事情

`FileInputStream stream =new FileInputStream( LoadConfig.class.getResource("Config.json").getPath());`

主要问题是不确定将 config.json 文件保存在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T02:32:46.730

您正在做的事情的总体思路应该有效，并且`src/main/resources`是在 Maven 项目中保存此类文件的正确位置，因为它们将`target/classes`在 Maven 构建期间被复制到类路径上可用，但有几个指针：

*   确保文件的大小写正确。您提到该文件是`config.json`，但您的代码正在使用`Config.json`.

*   您正在加载相对`LoadConfig.class`于其包目录中的文件。例如，如果完全限定名称是`com.example.LoadConfig.class`，您将`Config.json`在`target/classes/com/example`目录中查找，而不是在 base中查找`target/classes`。为了使事情更简单，您可能只想使用系统类加载器来加载文件，这样您就不必考虑相对路径，如下所示：

    ```
    FileInputStream stream = new FileInputStream(ClassLoader.getSystemResource("Config.json").getPath()); 
    ```

*   Heroku 上的构建和运行时应该与使用 Maven 3 和 OpenJDK 6/7/8 在您自己的机器上运行相同。在部署到 Heroku 之前，请确保您能够在本地工作。

# actionscript-3 - 下一帧（）上的 AS3 位图数据；

> ID：13500471
> 
> 赞同：2
> 
> 时间：2012-11-21T19:16:25.297
> 
> 标签：actionscript-3, bitmapdata

不是一个在这里有点挣扎的编码器：

尝试在下一帧中绘制当前帧作为位图以提高 CPU 效率。在 AS2 中，这段代码就像一个魅力：

```
import flash.display.*;
// # create the bitmap
var tBitmapData = new BitmapData(400, 200, true, 0x00000000);

// # now draw this movieClip's content to the bitmap
tBitmapData.draw(this);
// # 2nd frame should be blank!
nextFrame();
// # now attach the bitmap you made to this movieclip
this.attachBitmap(tBitmapData, 1, "auto", true); 
```

只需要知道如何为 AS3 重写这个。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:32:45.283

首先，在 AS3 中[BitmapData](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html)不是 DisplayObject。您需要将其包装到[Bitmap](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Bitmap.html)对象中。然后你用 George Profenza 提到的 addChild 替换 attachBitmap：

```
import flash.display.*;
// # create the bitmap
var tBitmapData:BitmapData = new BitmapData(400, 200, true, 0x000000);

// # now draw this movieClip's content to the bitmap
tBitmapData.draw(this);
// # 2nd frame should be blank!
nextFrame();
// # now attach the bitmap you made to this movieclip
this.addChild(new Bitmap(tBitmapData)); 
```

也尝试输入您的变量 ( `var tBitmapData:BitmapData`)。这提高了性能并允许编译器捕获一些错误。

# javascript - 使用 javascript 解析 html 字符串

> ID：13500477
> 
> 赞同：0
> 
> 时间：2012-11-21T19:16:41.490
> 
> 标签：javascript, jquery

我想提取部分html字符串，其格式如下。此 html 字符串由`var contents = $("#content").html()`

```
blah1 blah1
<p> blah2 blah2 </p> 
```

然后我用

```
start = contents.indexOf("<p>");
end = contents.indexOf("</p>"); 
```

获取开始和结束位置。所以我可以使用 contents.slice(start, end) 来提取我想要的字符串。

但在 IE 浏览器中，`<p>`标签是大写`<P>`，而在 Chrome 和 Firefox 中，他们用户`<p>`

如何包含这两种情况，以便我的 JavaScript 函数可以在所有浏览器中运行？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:18:25.083

您可以使用：

```
$('#content p').text(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:20:12.833

为什么不直接抓取有问题的 p 标签的 innerHTML 呢？

jQuery：

```
var contents = $("#content > p").html(); 
```

甚至，只是纯文本：

```
var contents = $("#content > p").text(); 
```

# c# - 如何防止 DirectoryOperationException - 服务器无法处理目录请求

> ID：13500487
> 
> 赞同：3
> 
> 时间：2012-11-21T19:17:26.617
> 
> 标签：c#, directoryservices

我正在尝试编写一个实用程序方法来更新 C# 中的 AD 属性（现在只是单值字符串属性）。这是一个不依赖 IIS 的独立实用程序。此方法将用于将数据从我们的 HR 系统加载到我们的 AD 中。

我能够使用 System.DirectoryServices.Protocols 有效地读取对象和属性。但是当我调用 ModifyRequest 方法时，我得到一个 DirectoryOperationException 消息“服务器无法处理目录请求”。

基于另一个 Stack Overflow 问题： [.Net 的目录服务抛出一个奇怪的异常](https://stackoverflow.com/questions/3694919/nets-directory-services-throws-a-strange-exception)

我尝试将端口 636 用于 SSL LDAP，但它不会改变行为。

我没有使用 IIS 并且在 .NET 4.5 上，因此 Microsoft 的 .NET/IIS 补丁不应该适用。

谷歌搜索这个没有结果。

如果您知道为什么会发生此错误，以及如何解决它，我将不胜感激。

下面的代码.. 请假设 Conn 包含来自封闭实用程序类的有效且经过身份验证的 LDAP 连接——如果需要，我可以提供封闭实用程序类的完整源代码。

异常发生在以下`SendRequest`行`ModifyStringAttributeValues`：

```
using System;
using System.Collections.Generic;
using System.DirectoryServices.Protocols;
using System.Net;

namespace MyOrganization.Common.Ldap
{
    public class LdapSession
    {
        public bool UseKerberos { set; get; }
        public String Host { set; get; }
        public String UserId { set; get; }
        public String Password { set; get; }
        public String Tag { set; get; }
        public int Port { set; get; }

        public const int DefaultLdapPort = 389;

        protected LdapConnection Conn;

        public void EstablishV2()
        {

        }

        public void Establish()
        {

            var effectivePort = Port == 0 ? DefaultLdapPort : Port;

            Console.WriteLine("EffectivePort={0}", effectivePort);

            var identifier = new LdapDirectoryIdentifier(Host, effectivePort);

            if (UseKerberos)
            {
                Conn = new LdapConnection(identifier)
                {
                    AuthType = AuthType.Kerberos,
                    Timeout = new TimeSpan(0, 10, 0, 0),
                    SessionOptions =
                    {
                        ProtocolVersion = 3,
                        VerifyServerCertificate =
                            new VerifyServerCertificateCallback((con, cer) => true),
                        SecureSocketLayer = true
                    }
                };
            }
            else
            {
                Conn = new LdapConnection(identifier)
                {
                    AuthType = AuthType.Basic,
                    Timeout = new TimeSpan(0, 10, 0, 0)
                };

                // Console.WriteLine("LPA:  Binding with {0}, {1}", UserId, Password); // QUARTZ

                Conn.Bind(new NetworkCredential(UserId, Password));
            }

        }

        public IEnumerable<SearchResultEntry> Search(string cx, string filter, SearchScope searchScope, params string[] attrib)
        {
            var s = new SearchRequest(cx, filter, searchScope, attrib)
            {
                SizeLimit = 0,
                TimeLimit = new TimeSpan(1, 0, 0) // One hour, zero minutes, zero seconds
            };

            var raw = Conn.SendRequest(s);

            if (raw == null)
            {
                throw new Exception("null response");
            }

            var r = raw as SearchResponse;

            if (r != null)
            {
                // Console.WriteLine(Tag + "Search response entries: {0}", r.Entries.Count); // QUARTZ

                foreach (SearchResultEntry e in r.Entries)
                {
                    yield return e;
                }
            }
            else
            {
                // Console.WriteLine(Tag + "Search response was null" ); // QUARTZ
            }

            yield break;
        }

        public ResultCode ModifyStringAttributeValues(string dn, IDictionary<string, string> modifications)
        {
            // declare the request and response objects here
            // they are used in two blocks
            ModifyRequest modRequest;
            ModifyResponse modResponse;

            try
            {
                // initialize the modRequest object 
                modRequest =
                    new ModifyRequest(dn);

                modRequest.Controls.Add(new PermissiveModifyControl());

                var mods = new DirectoryAttributeModification[modifications.Count];

                int z = 0;
                foreach (var pair in modifications)
                {
                    var mod = new DirectoryAttributeModification();
                    mod.Operation = DirectoryAttributeOperation.Replace;
                    mod.Name = pair.Key;
                    mod.Add(pair.Value);

                    mods[z] = mod;

                    z += 1;
                }

                // cast the returned directory response into a ModifyResponse type 
                // named modResponse
                modResponse =
                    (ModifyResponse)Conn.SendRequest(modRequest);

                return modResponse.ResultCode;
            }

            catch (Exception e)
            {
                Console.WriteLine("\nUnexpected exception occured:\n\t{0}: {1}",
                                  e.GetType().Name, e.Message);

                return ResultCode.Unavailable;
            }
        }
    }
} 
```

我知道代码有点笨拙，而且充满了奇怪的注释——它是在我开始工作时从微软网站上的示例代码中剪切、粘贴和修改的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-16T11:43:13.827

如果有人再次遇到这个问题，这是我的解决方案。删除重复用户证书的操作为我解决了这个问题。以下是步骤

1.  运行 >`certmgr.msc`
2.  进入`personal`文件夹，找到相关证书
3.  最后删除所有重复的证书

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-02T18:31:18.827

我的问题与不满足约束的属性值有关。我试图在不满足所有要求的情况下为帐户设置密码（大写，包括数字等...）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-15T04:03:59.257

我也遇到了这个问题，可能是加强域的原因。

解决方案是使用域的协商设置而不是简单的调用。这可能是 ValidateCredentials 中的一个错误，因为它只检查 LdapException。请参阅内部类函数中的[https://github.com/dotnet/runtime/blob/main/src/libraries/System.DirectoryServices.AccountManagement/src/System/DirectoryServices/AccountManagement/Context.cs](https://github.com/dotnet/runtime/blob/main/src/libraries/System.DirectoryServices.AccountManagement/src/System/DirectoryServices/AccountManagement/Context.cs)。`Validate``CredentialValidator`

应该工作的代码：ctx.ValidateCredentials(username, password, ContextOptions.Negotiate | ContextOptions.Sealing | ContextOptions.Signing);

附加的，也许是正确的信息：

[https://living-sun.com/143080-how-do-i-validate-active-directory-creds-over-ldap-ssl-c-net-active-directory-ldap-directoryservices.html](https://living-sun.com/143080-how-do-i-validate-active-directory-creds-over-ldap-ssl-c-net-active-directory-ldap-directoryservices.html)

编辑：它应该在 .NET 6.0 中修复： [https ://github.com/dotnet/runtime/commit/ce95c98fbbf7592b1b74127a4b87fcd607a25c1a#diff-5ec762bfbfb222fe7cb9500c16e615227b7ab971f4118bb9be3e168c6a471668](https://github.com/dotnet/runtime/commit/ce95c98fbbf7592b1b74127a4b87fcd607a25c1a#diff-5ec762bfbfb222fe7cb9500c16e615227b7ab971f4118bb9be168c6a4716683e)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T16:49:17.620

这可能是服务器证书检查的问题（例如，如果您的服务器是自动签名的）

这是一些绕过服务器证书检查建立 SSL 连接的测试代码：

```
 public static LdapConnection GetLdapConnection(string login, string password)
    {
        var serverName = /*myServerNameFromConfig*/;
        var port = /*myPortFromConfig*/;
        LdapDirectoryIdentifier ldi = new LdapDirectoryIdentifier(string.Format("{0}:{1}", serverName, port));

        NetworkCredential nc = new NetworkCredential(login, password);

        LdapConnection connection = new LdapConnection(ldi, nc, System.DirectoryServices.Protocols.AuthType.Basic);
        connection.SessionOptions.ProtocolVersion = 3;
        connection.SessionOptions.VerifyServerCertificate =
                new VerifyServerCertificateCallback((con, cer) => true);
        connection.SessionOptions.SecureSocketLayer = true;
        return connection;
    } 
```

# gwt - 在 GWT 按钮单击上下载文件时处理错误

> ID：13500489
> 
> 赞同：2
> 
> 时间：2012-11-21T19:17:33.443
> 
> 标签：gwt, download, buttonclick

我有一个要求，我需要单击按钮从服务器启动文件下载。我很乐意这样做。我卡住的地方是如果出现错误并且服务器发送不成功的响应，我该如何处理？

问候， 阿马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:39:42.137

我想你下载了一个带有“Windows.open”的文件，尝试将它包装在一个 try-catch 块中。

```
try {
   Window.open("http://127.0.0.1:8888/file.rar", "_self", "enabled");
} catch (Exception t) {
  // Do something
} 
```

# visual-studio-2010 - 如何在 xml 格式的 resx 文件中添加条件编译？

> ID：13500493
> 
> 赞同：6
> 
> 时间：2012-11-21T19:17:50.073
> 
> 标签：visual-studio-2010, c#-4.0, embedded-resource, conditional-compilation

NET 项目中，我需要根据某些编译符号在资源文件（这是一个 xml 文件）中添加内容。

类似于以下内容：

```
<xml ....>
<myNodes>

#if SOMECONDITION
<node1>
...
</node1>

#else
<node2>
...
</node2>

#endif
</myNodes> 
```

这甚至可能吗？我知道这不符合 XML 规则。是否有类似的方法可以使用条件编译但仍遵守 XML 规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-17T17:55:41.873

我不能 100% 确定这可以解决您的问题，但您可以尝试条件构造。xml 中没有这样的条件编译。

```
 <rule>
    <if>
         <condition var="''$(Configuration)'" operator="=;">Debug</condition>
            <!-- more conditions possible -->
        </conditions>
        <statements>
            <!-- put your tage here -->
            <node1> ... </node1>
        </statements>
    </if>
    <else>
        <node2>
        ...
        </node2>
    </else>
</rule> 
```

# c++ - rand() 生成相同的数字

> ID：13500494
> 
> 赞同：1
> 
> 时间：2012-11-21T19:17:54.940
> 
> 标签：c++, visual-c++

> **可能重复：**
> [rand函数在单个函数c ++中调用时返回相同的值](https://stackoverflow.com/questions/6729214/rand-function-returns-same-values-when-called-within-a-single-function-c)

为什么 rand() 生成相同的数字？

死.h

```
#ifndef DIE_H
#define DIE_H

class Die
{
private:
    int number;
public:
    Die(){number=0;}
    void roll();
    int getNumber()const{return number;}
    void printValue();
};

#endif 
```

死.cpp

```
#include"die.h"
#include<iostream>
#include<time.h>
using namespace std;

void Die::roll()
{
    srand(static_cast<int>(time(0)));
    number=1+rand()%6;
}

void Die::printValue()
{
    cout<<number<<endl;
} 
```

主文件

```
#include"die.h"
#include<iostream>
using namespace std;

int main()
{
    Die d;
    d.roll();
    d.printValue();
    d.roll();
    d.printValue();
    d.roll();
    d.printValue();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T19:20:41.457

您对 to 的调用`die.roll()`非常接近，`time(0)`实际上每次都返回相同的值，因此，每次调用的 rand 种子都是相同的`.roll()`。

尝试在外部调用`srand(static_cast<int>(time(0)));`一次（并且仅一次）`.roll()`（如在 Die 构造函数中或`main()`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T19:18:57.007

您需要使用“真正随机”（或至少是唯一的）种子初始化随机生成器，并且*只执行一次*。

这通常`srand(time(NULL))`在开始时完成。

生成的数字`rand()`不是随机的，它们是*伪*随机的：给定相同的种子，它总是会返回相同的序列。默认情况下，我相信初始种子为零（但是，在程序运行之间肯定总是相同的 - 所以如果没有种子，你每次都会得到相同的明显随机序列）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:23:04.793

正如 emartel 指出的那样，您需要的唯一真正改变是调用`time(NULL)`而不是`time(0)`.

或者，您可以调用`srand(time(NULL))`构造函数，然后只使用`rand()`in `roll()`。

# java - 如何等待文件中的数据可用而不是获取 EOFException

> ID：13500496
> 
> 赞同：1
> 
> 时间：2012-11-21T19:18:02.430
> 
> 标签：java, multithreading, datainputstream, eofexception

我正在使用文件显示流内容来缓冲它（因为它可能足够大以将其保存在 RAM 中）。我有两个线程：第一个从服务器下载文件并将其写入本地存储，第二个读取该文件并显示内容。

问题是，当第二个线程到达文件末尾时，从方法`EOFException`中抛出。`DataInputStream.readFully()`有没有办法让它在第一个线程写入足够的数据而不是抛出异常时等待？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:29:28.517

同步线程。有一种可能的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:20:33.197

在从文件中读取之前检查 EOF。或者`try ... catch(EOFException ex)`在 read 语句周围加上一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:32:04.417

您是否尝试过使用 InputStream 的 available() 方法获取可用字节数，然后使用 DataInputStream 的 read(byte[] b) 和 byte[] 返回可用字节数的长度？我实际上还没有尝试过，但似乎它可能会起作用。

# php - IE9 Ajax 成功但没有响应体

> ID：13500497
> 
> 赞同：1
> 
> 时间：2012-11-21T19:18:05.467
> 
> 标签：php, jquery, ajax, internet-explorer-9

我有一个简单的 ajax 请求，它适用于除 IE9 之外的所有现代浏览器（当然）。在 IE9 中，响应返回 200，成功函数触发，但没有返回数据。

这是js：

```
function getMapPins(section){
    $('.spinnerBG').fadeIn('fast');
    $.ajax({
        type: 'POST',
        url: '/ourprojects_ajax.html',
        data: {'map_section':section},
        cache:false,
        success: function(data){
            //alert(data);
            $('#mapPins').append(data);
            createPins(section);
        }
    });

} 
```

只是为了确保它不是 PHP：

```
<?php echo '<p>why won't this damn thing work in IE9</p>'; ?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T19:21:32.607

似乎有一个解析错误：

```
<?php echo '<p>why won't this damn thing work in IE9</p>'; ?> 
```

应该：

```
<?php echo '<p>why won\'t this damn thing work in IE9</p>'; ?> 
```

如果您关闭了错误，那么您将不会得到响应，因为该页面将是空白的。

# assembly - 了解 ARM 汇编代码

> ID：13500506
> 
> 赞同：2
> 
> 时间：2012-11-21T19:18:40.650
> 
> 标签：assembly, arm

谁能向我解释一下这个短程序是做什么的？

```
ORIGIN 0x1000
one DEFW 13
two DEFW 29
three DEFW 0
ORIGIN 0x1010
ENTRY
ADR R0, one
LDR R1, [R0]
LDR R2, [R0, #4]
ADD R1, R2, R1
STR R1, [R0, #8]
SWI 2 
```

如果我的想法正确，它会将“一”添加到“二”并将结果放在“三”中。我对么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T19:40:01.687

是的。

```
ORIGIN 0x1000          # Start at address 0x1000
one DEFW 13            # Allocate 4-bytes of space for a variable called one and set it to 13
two DEFW 29            # Allocate 4-bytes of space for a variable called two and set it to 29
three DEFW 0           # Allocate 4-bytes of space for a variable called three and set it to 0
ORIGIN 0x1010          # Skip ahead to address 0x1010 (this really leaves a 4-byte gap)
ENTRY                  # Mark next instruction as the begining of program
ADR R0, one            # Load address of one into R0
LDR R1, [R0]           # Load contents of one (pointed to but R0) into R1
LDR R2, [R0, #4]       # Load contents of two (pointed to but R0 + 4) into R2
ADD R1, R2, R1         # R1 = R2 + R1
STR R1, [R0, #8]       # Store R1 into three  (pointed to but R0 + 8)
SWI 2                  # Execute a software interrupt 
```

或者

```
three = one + two 
```

不确定“SWI 2”可能是特定于您的平台的。也许只是程序调用的通用结束。

# java - 图形缓冲区分配

> ID：13500513
> 
> 赞同：0
> 
> 时间：2012-11-21T19:19:23.977
> 
> 标签：java, android, android-layout

我正在尝试组合一个简单的应用程序，该应用程序可以获取 sd 卡上的现有文件并将其作为备份通过电子邮件发送到内容提供商方案。有几个问题 - 最令人不安的是我不断收到这些图形缓冲区分配错误 - 看起来当尝试​​调用第二个活动时，图形缓冲区分配正在耗尽所有内存，但我不知道为什么。我已经读到在我正在测试的手机（Galaxy Nexus）上报告了这个问题的错误，但我几乎在 UI 上使用默认图形 - 这是非常基本的，所以我不确定为什么会发生这种情况. 我也是这方面的新手，所以如果我忽略了这些非常明显的东西，请原谅我。

下面是带有相关错误的代码和错误日志（由于它是周期性的且非常长，因此对其长度进行了编辑）。我感谢任何帮助和/或指导 - 谢谢。

```
 public class MainActivity extends Activity implements OnClickListener
{
/**
 * This class runs in the event that the Content provider
 * step fails. This looks for the existing file generated by the
 * content class, prepares the file, and hands the file
 * to the SendData class to be emailed.
 */
private static final String TAG = "MainActivity_VADataSender";
public static String MyDB;

    @Override
    public void onCreate(Bundle savedInstanceState) 
        {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
        {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
        }

    // Create the getData intent
    Intent intentgetData;

    // call the life cycle events
    // for now, inherit the settings from the parent class
    // replace these with specifics if necessary once program is operational
    public void onPause()
        {
        super.onPause();
        }

    public void onResume()
        {
        super.onResume();
        }

    public void onStop()
        {
        super.onStop();
        }

    public void onDestroy()
        { 
        super.onDestroy();
        }

        @Override 
        public void onStart() 
        {
            intentgetData = new Intent(MainActivity.this, SendData.class);
            startActivity(intentgetData);
        super.onStart();
        }
        public MainActivity() throws FileMissingException   
        {           
            File sd = Environment.getExternalStorageDirectory();
            File data = Environment.getDataDirectory();

            if (sd.canWrite()) 
                {
                // verify the paths-  NOTE: may be device-specific 
                String currentDBPath = "TLC_COMMON/database.txt"; 
                String backupDBPath = "database.txt"; 
                File currentDB = new File(data, currentDBPath);
                File backupDB = new File(sd, backupDBPath);

                if (currentDB.exists()) 
                // make the connection  
                    try
                    //set the connections
                    {
                    FileChannel src = new FileInputStream(currentDB).getChannel();
                    FileChannel dst = new FileOutputStream(backupDB).getChannel();
                    dst.transferFrom(src, 0, src.size());
                    src.close();
                    dst.close();

                    // use the actual file name here (not backupDB)
                    setMyDB(backupDB);          
                    } 
                    catch (Exception e)
                    // if connection error
                        {
                        Log.e(TAG, "ERROR 1: current database does not exist"); 
                        Toast.makeText(getBaseContext(), e.getMessage(),
                                Toast.LENGTH_SHORT).show();
                        this.finish();
                        // halt processing  
                        throw new FileMissingException();
                        } 
                }
                else
                // if sd can not write  
                    {
                    Log.e(TAG, "ERROR 2: SD is not writable");
                    //Toast.makeText(getBaseContext(), e.getMessage(),
                        //  Toast.LENGTH_SHORT).show();
                    this.finish(); 
                    throw new FileMissingException();
                    }
            // returned at line 102
            //return MyDB;
        }

        // same here- get the actual file name
    public void setMyDB(File backupDB) {
        // TODO Auto-generated method stub

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    public static Object getMyDB() {
        // TODO Auto-generated method stub
        return MyDB;
    }   
}
    </CODE> 
```

二等：

 `````
 public class SendData extends MainActivity
{
public SendData() throws FileMissingException {
    super();
    // TODO Auto-generated constructor stub
}

private static final String TAG = "SendData_VADatasender";

/* Checks if external storage is available to read */   
public boolean isExternalStorageReadable() 
    {
    String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state) ||
        Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) 
        {
        return true;
        }
        {       
        return false;
        }
    }   

// Send data by email
    public void dataGetter() throws FileMissingException
    {
        try
        {
        File sd = Environment.getExternalStorageDirectory();
        // verify it is saving as this file name; also path in previous class
        String fileName = "MyDB";

            {
                if (sd.canWrite()) 
                    { 
                    // add the File Attachment and URI (in EXTRA_TEXT) below once the program is running
            //is this redundant to Object attachment below?
                    File attachment = new File(fileName); 
                    }   
                else 
                    {
                    Log.e(TAG, "Email attachment failed");
                    //Toast.makeText(getBaseContext(), e.getMessage(),
                            //Toast.LENGTH_SHORT).show();

                    finish();
                    }
            }
        }
        catch(Exception e)
        {
        Log.e(TAG,"ERROR 5: Could not locate file"); 
        Toast.makeText(getBaseContext(), e.getMessage(),
                Toast.LENGTH_SHORT).show();

        finish();
        throw new FileMissingException();
        }
    }

        Intent email;

        @Override
        public void onStart(){
        //Uri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(), MyDB));
            {
        Object attachment = MainActivity.getMyDB();

                { 
            Intent email = new Intent(Intent.ACTION_SENDTO);
            email.putExtra(android.content.Intent.EXTRA_SUBJECT, "Exercise data");
            email.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{"vamedstudy@gmail.com"});
            email.putExtra(android.content.Intent.EXTRA_TEXT, (Boolean) (attachment)); //Uri.fromFile(attachment)
            //email.putExtra(android.content.Intent.EXTRA_STREAM, Uri.parse((String) attachment));
            //email.setType("message/rfc822");
            email.setType("text/plain");
            startActivity(Intent.createChooser(email, "Send the exercise data:"));  
            super.onStart();
                }
            }   
        }   

    public void finish() 
        {   
        }   
    } 
````  ````
ERROR LOG:

11-21 12:21:54.367: I/ActivityManager(2448): START {act=android.intent.action.MAIN cat=

[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.example.va.datasender/.MainActivity 

u=0} from pid 2640
11-21 12:21:54.468: E/MainActivity_VADataSender(4040): ERROR: current database does not exist
11-21 12:21:54.492: I/ActivityManager(2448): START {act=android.intent.action.CHOOSER 

cmp=android/com.android.internal.app.ChooserActivity (has extras) u=0} from pid 4040
11-21 12:21:54.500: I/ActivityManager(2448): START {cmp=com.example.va.datasender/.SendData 

u=0} from pid 4040
11-21 12:21:54.585: E/MainActivity_VADataSender(4040): ERROR: current database does not exist

....repeats...then graphics errors

11-21 12:21:57.265: I/ActivityManager(2448): START {cmp=com.example.va.datasender/.SendData 

u=0} from pid 4040
11-21 12:21:57.359: E/IMGSRV(121): :0: PVRSRVAllocDeviceMem: Error 1 returned
11-21 12:21:57.359: E/IMGSRV(121): :0: GenericAlloc: Failed to allocate device memory
11-21 12:21:57.359: W/GraphicBufferAllocator(121): alloc(720, 1184, 5, 00000b00, ...) failed -

12 (Out of memory)
11-21 12:21:57.359: D/GraphicBufferAllocator(121): Allocated buffers:
11-21 12:21:57.359: D/GraphicBufferAllocator(121): 0x40b0cc40: 3404.00 KiB |  720 ( 736) x 1184 

|        5 | 0x00000b00
11-21 12:21:57.359: D/GraphicBufferAllocator(121): 0x40b1e6d8: 3404.00 KiB |  720 ( 736) x 1184 

|        5 | 0x00000b00
11-21 12:21:57.359: D/GraphicBufferAllocator(121): 0x40bb5898: 3404.00 KiB |  720 ( 736) x 1184 

|        5 | 0x00000b00
11-21 12:21:57.359: D/GraphicBufferAllocator(121): 0x40bb5a90: 3404.00 KiB |  720 ( 736) x 1184 

|        5 | 0x00000b00
11-21 12:21:57.359: D/GraphicBufferAllocator(121): 0x40bb5f18: 3404.00 KiB |  720 ( 736) x 1184 

|        5 | 0x00000b00
11-21 12:21:57.359: D/GraphicBufferAllocator(121): 0x40bb6ec8: 3404.00 KiB |  720 ( 736) x 1184 

|        5 | 0x00000b00
11-21 12:21:57.359: D/GraphicBufferAllocator(121): 0x40bba990: 1213.25 KiB |  720 ( 736) x  422 

|        1 | 0x00000933
11-21 12:21:57.359: D/GraphicBufferAllocator(121): 0x40bbb428: 3404.00 KiB |  720 ( 736) x 1184 

|        5 | 0x00000b00
...
11-21 12:21:57.359: D/GraphicBufferAllocator(121): 0x40c06b58: 1279.38 KiB |  720 ( 736) x  445 

|        1 | 0x00000933
11-21 12:21:57.359: D/GraphicBufferAllocator(121): 0x40c0e778:  143.75 KiB |  720 ( 736) 
11-21 12:21:57.359: E/SurfaceFlinger(121): GraphicBufferAlloc::createGraphicBuffer(w=720, 

h=1184) failed (Out of memory), handle=0x0
11-21 12:21:57.359: E/BufferQueue(121): 

[com.example.va.datasender/com.example.va.datasender.SendData] dequeueBuffer: 

SurfaceComposer::createGraphicBuffer failed
11-21 12:21:57.359: E/IMGSRV(4040): :0: DequeueLockStoreBuffer: Failed to de-queue buffer
11-21 12:21:57.359: W/HardwareRenderer(4040): EGL error: EGL_BAD_NATIVE_WINDOW
11-21 12:21:57.375: W/HardwareRenderer(4040): Mountain View, we've had a problem here. 

Switching back to software rendering.

...then out of memory errors...

11-21 12:21:57.453: E/SurfaceFlinger(121): GraphicBufferAlloc::createGraphicBuffer(w=720, 

h=1184) failed (Out of memory), handle=0x0
11-21 12:21:57.453: E/BufferQueue(121): 

[com.example.va.datasender/com.example.va.datasender.SendData] dequeueBuffer: 

SurfaceComposer::createGraphicBuffer failed
11-21 12:21:57.453: E/IMGSRV(4040): :0: DequeueLockStoreBuffer: Failed to de-queue buffer
11-21 12:21:57.453: E/libEGL(4040): eglMakeCurrent:534 error 3003 (EGL_BAD_ALLOC)
11-21 12:21:57.460: E/ViewRootImpl(4040): OutOfResourcesException initializing HW surface
11-21 12:21:57.460: E/ViewRootImpl(4040): android.view.Surface$OutOfResourcesException: 

eglMakeCurrent failed EGL_BAD_ALLOC
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.view.HardwareRenderer

$GlRenderer.createEglSurface(HardwareRenderer.java:920)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.view.HardwareRenderer

$GlRenderer.initialize(HardwareRenderer.java:748)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.view.ViewRootImpl.performTraversals

(ViewRootImpl.java:1505)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.view.ViewRootImpl.doTraversal

(ViewRootImpl.java:998)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.view.ViewRootImpl

$TraversalRunnable.run(ViewRootImpl.java:4212)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.view.Choreographer

$CallbackRecord.run(Choreographer.java:725)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.view.Choreographer.doCallbacks

(Choreographer.java:555)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.view.Choreographer.doFrame

(Choreographer.java:525)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.view.Choreographer

$FrameDisplayEventReceiver.run(Choreographer.java:711)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.os.Handler.handleCallback

(Handler.java:615)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.os.Handler.dispatchMessage

(Handler.java:92)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.os.Looper.loop(Looper.java:137)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at android.app.ActivityThread.main

(ActivityThread.java:4745)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at java.lang.reflect.Method.invokeNative(Native 

Method)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at java.lang.reflect.Method.invoke

(Method.java:511)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at com.android.internal.os.ZygoteInit

$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at com.android.internal.os.ZygoteInit.main

(ZygoteInit.java:553)
11-21 12:21:57.460: E/ViewRootImpl(4040):   at dalvik.system.NativeStart.main(Native 

Method)
11-21 12:21:57.460: I/Process(4040): Sending signal. PID: 4040 SIG: 9
11-21 12:21:57.460: I/WindowManager(2448): Out of memory for surface!  Looking for leaks...
11-21 12:21:57.460: W/WindowManager(2448): No leaked surfaces; killing applicatons!
11-21 12:21:57.460: W/ActivityManager(2448): Killing processes Free memory at adjustment 5
11-21 12:21:57.460: W/ViewRootImpl(4040): No processes killed for memory; killing self
11-21 12:21:57.500: I/WindowState(2448): WIN DEATH: Window{41d5aa70 

com.example.va.datasender/com.example.va.datasender.SendData paused=false}
11-21 12:21:57.500: W/WindowManager(2448): Due to memory failure, waiting a bit for next layout
11-21 12:21:57.500: W/InputDispatcher(2448): channel '41da3af0 

com.example.va.datasender/com.example.va.datasender.SendData (server)' ~ Consumer closed input 

channel or an error occurred.  events=0x9
11-21 12:21:57.500: E/InputDispatcher(2448): channel '41da3af0 

com.example.va.datasender/com.example.va.datasender.SendData (server)' ~ Channel is 

unrecoverably broken and will be disposed!
11-21 12:21:57.500: I/ActivityManager(2448): Process com.example.va.datasender (pid 4040) has 

died.
11-21 12:21:57.507: W/ActivityManager(2448): Force removing ActivityRecord{41e80dd0 

com.example.va.datasender/.SendData}: app died, no saved state
11-21 12:21:57.757: W/InputDispatcher(2448): Attempted to unregister already unregistered input 

channel '41da3af0 com.example.va.datasender/com.example.va.datasender.SendData (server)'
11-21 12:21:57.757: I/WindowState(2448): WIN DEATH: Window{41da3af0 

com.example.va.datasender/com.example.va.datasender.SendData paused=false}
11-21 12:21:57.773: I/WindowState(2448): WIN DEATH: Window{41deb038 

com.example.va.datasender/com.example.va.datasender.SendData paused=false}
11-21 12:21:57.773: I/WindowState(2448): WIN DEATH: Window{41e75500 

com.example.va.datasender/com.example.va.datasender.SendData paused=false}
11-21 12:21:57.773: I/WindowState(2448): WIN DEATH: Window{41d296a8 

com.example.va.datasender/com.example.va.datasender.SendData paused=false}
11-21 12:21:57.781: I/WindowState(2448): WIN DEATH: Window{41ca39c8 

com.example.va.datasender/com.example.va.datasender.SendData paused=false}
11-21 12:21:57.781: I/WindowState(2448): WIN DEATH: Window{41a35a18 

com.example.va.datasender/com.example.va.datasender.SendData paused=false}
com.example.va.datasender/com.example.va.datasender.SendData paused=false}
11-21 12:21:57.804: W/InputDispatcher(2448): channel '41caaec8 

com.example.va.datasender/com.example.va.datasender.SendData (server)' ~ Consumer closed input 

channel or an error occurred.  events=0x9
11-21 12:21:57.804: E/InputDispatcher(2448): channel '41caaec8 

com.example.va.datasender/com.example.va.datasender.SendData (server)' ~ Channel is 

unrecoverably broken and will be disposed!

...then worse errors...

11-21 12:21:57.828: I/WindowState(2448): WIN DEATH: Window{41dd0130 

com.example.va.datasender/com.example.va.datasender.SendData paused=false}
11-21 12:21:57.835: E/InputDispatcher(2448): Received spurious receive callback for unknown 

input channel.  fd=244, events=0x9
11-21 12:21:57.835: E/InputDispatcher(2448): Received spurious receive callback for unknown 

input channel.  fd=225, events=0x9
11-21 12:21:57.835: E/InputDispatcher(2448): Received spurious receive callback for unknown 

input channel.  fd=217, events=0x9
11-21 12:21:57.835: E/InputDispatcher(2448): Received spurious receive callback for unknown 

input channel.  fd=258, events=0x9
11-21 12:21:57.835: E/InputDispatcher(2448): Received spurious receive callback for unknown 

input channel.  fd=259, events=0x9
11-21 12:21:57.835: E/InputDispatcher(2448): Received spurious receive callback for unknown 

input channel.  fd=260, events=0x9

...then it crashes...

11-21 12:21:57.843: W/ActivityManager(2448): Force removing ActivityRecord{41714778 

com.example.va.datasender/.SendData}: app died, no saved state
11-21 12:21:57.843: W/ActivityManager(2448): Force removing ActivityRecord{41a69f30 

com.example.va.datasender/.SendData}: app died, no saved state
11-21 12:21:57.843: W/ActivityManager(2448): Force removing ActivityRecord{41c65b30 

com.example.va.datasender/.SendData}: app died, no saved state
11-21 12:21:57.859: D/dalvikvm(4289): Late-enabling CheckJNI
11-21 12:21:57.859: I/ActivityManager(2448): Displayed com.example.va.datasender/.SendData: 

+3s356ms (total +3s395ms)
11-21 12:21:57.859: I/ActivityManager(2448): Displayed com.example.va.datasender/.SendData: 

+3s149ms
11-21 12:21:57.859: I/ActivityManager(2448): Displayed com.example.va.datasender/.SendData: 

+1s657ms
11-21 12:21:57.859: I/ActivityManager(2448): Displayed com.example.va.datasender/.SendData: 

+2s540ms
11-21 12:21:57.859: I/ActivityManager(2448): Displayed com.example.va.datasender/.SendData: 

+977ms

...leaked surface errors...

11-21 12:21:58.343: W/WindowManager(2448): LEAKED SURFACE (app token hidden): Window{41d2df50 

com.example.va.datasender/com.example.va.datasender.SendData paused=false} surface=Surface

(name=com.example.va.datasender/com.example.va.datasender.SendData, identity=1350) 

token=AppWindowToken{41cc7c48 token=Token{4198ba08 ActivityRecord{41ca22a8 

com.example.va.datasender/.SendData}}}
11-21 12:21:58.343: W/WindowManager(2448): LEAKED SURFACE (app token hidden): Window{41d5e1b0 

com.example.va.datasender/com.example.va.datasender.SendData paused=false} surface=Surface

(name=com.example.va.datasender/com.example.va.datasender.SendData, identity=1351) 

token=AppWindowToken{41c78878 token=Token{419e78f8 ActivityRecord{41cd1208 

com.example.va.datasender/.SendData}}} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-09T09:22:38.787

问题是你的图形内存不够。重新启动您的手机将解决此问题。``

# javascript - 如何使用 twitter Oauth Token 设置 cookie

> ID：13500515
> 
> 赞同：1
> 
> 时间：2012-11-21T19:19:27.753
> 
> 标签：javascript, ios, twitter, web, twitter-oauth

我有一个 iOS 应用程序。在我的应用程序中，我实现了 twitter 分享功能，该功能是通过使用 twitter OAuth 访问令牌和访问安全来实现的。我可以通过 twitter api 使用 OAuth 访问令牌和访问安全进行 twitter 发布。

但是，我想要一个 UIWebview 来访问 twitter.com，让用户查看他们的 twitter 帐户活动。但是，我不想要求用户通过 webview 再次登录。我已经获得了所有 OAuth 信息，有没有办法可以使用这些信息手动设置 twitter cookie。

# wso2 - WSO2 BAM 调解器 - ESB 兼容性

> ID：13500516
> 
> 赞同：1
> 
> 时间：2012-11-21T19:19:41.090
> 
> 标签：wso2, compatibility, wso2esb, esb, wso2bam

哪个[Carbon Repository](http://dist.wso2.org/p2/carbon/releases/)旨在 结合[WSO2BAM](http://docs.wso2.org/wiki/display/BAM200/Setting+up+BAM+Mediator) 2.0.1将[BAM-Mediator功能集成/安装到 WSO2ESB 4.5.1 中？](http://docs.wso2.org/wiki/display/BAM200/Managing+the+Feature+Repository)

*   4.0.0
*   4.0.1
*   4.0.2
*   4.0.3
*   4.0.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:40:22.263

您可以使用[4.0.2](http://dist.wso2.org/p2/carbon/releases/4.0.2/plugins/)将这些功能安装到 ESB 4.5.1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:40:29.343

与is`WSO2ESB 4.5.1`组合兼容的最新版本。使用 4.0.3 版本。它（4.0.3）修复了错误，并通过 Thrift 实现了负载平衡功能。`WSO2BAM 2.0.1``4.0.3`

[您可以从此处](http://dist.wso2.org/products/carbon/4.0.3/p2-repo.zip)下载 p2 存储库作为 zip 文件。或者可以从 WSO2 Carbon 主页访问在线 p2 存储库。

另请注意，您的链接指的是 BAM 2.0.0 版本。[您可以在此处](http://docs.wso2.org/wiki/display/BAM201/Setting+up+BAM+Mediator)找到 BAM 2.0.1 的文档。

# javascript - 正则表达式构造函数和正则表达式文字测试函数之间的区别？

> ID：13500519
> 
> 赞同：8
> 
> 时间：2012-11-21T19:19:47.723
> 
> 标签：javascript, regex

我很困惑这怎么可能......

```
var matcher = new RegExp("d", "gi");
matcher.test(item) 
```

上面的代码包含以下值

```
item = "Douglas Enas"
matcher = /d/gi 
```

然而，当我背靠背运行 matcher.test 函数时，我在第一次运行时得到 true，在第二次运行时得到 false。

```
matcher.test(item) // true
matcher.test(item) // false 
```

如果我使用正则表达式文字，例如

```
/d/gi.test("Douglas Enas") 
```

并在chrome中背靠背运行它两次我都得到了真实的结果。对此有解释吗？

在 chrome 控制台中使用构造函数创建正则表达式对象的背靠背运行示例

```
matcher = new RegExp("d","gi")
/d/gi

matcher.test("Douglas Enas")
true

matcher.test("Douglas Enas")
false

matcher
/d/gi 
```

在文字上使用背靠背调用的示例

```
/d/gi.test("Douglas Enas")
true

/d/gi.test("Douglas Enas")
true 
```

这个问题的原因是因为使用 RegExp 构造函数和针对值列表的测试函数我失去了匹配......但是使用文字我得到了我期望的所有值

**更新**

```
 var suggestions = [];

                        ////process response  
                        $.each(responseData, function (i, val)
                        {
                            suggestions.push(val.desc);
                        });

                        var arr = $.grep(suggestions, function(item) {
                            var matcher = new RegExp("d", "gi");
                            return matcher.test(item);
                        }); 
```

在闭包内移动匹配器的创建包括丢失的结果。“d”实际上是一个动态创建的字符串，但为了简单起见，我使用了“d”。我仍然不确定现在每次进行测试时创建一个新表达式，当我迭代建议数组时会无意中排除结果仍然有点令人困惑，并且可能与匹配测试的进步有关

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T19:25:30.557

来自[`RegExp.test()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)：

> `test`在同一个全局正则表达式实例上多次调用将超过上一次匹配。

所以基本上当你有一个实例时`RegExp`，每次调用都会`test`推进匹配器。一旦你找到了第一个`d`，它就会超越它并尝试找到*另一个* `d`。好吧，没有了，所以它返回`false`。

另一方面，当你这样做时：

```
/d/gi.test("Douglas Enas") 
```

`RegExp`您每次都在现场创建一个新实例，因此它总是会首先找到该实例`d`（并因此返回`true`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:26:36.390

根据 Mozilla 开发者网络，

> 与 exec （或与它结合使用）一样，在同一个全局正则表达式实例上多次调用 test 将超过上一次匹配。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:29:41.447

我找不到链接 ATM，但我记得，这是该`test`方法与模式结合的一个已知问题`g`：匹配位置不会以某种方式*“被遗忘”*。要么放弃全局标志*和/或*使用该`.match`方法，它就会正常工作。

# css - CSS3动画在任何浏览器中都不起作用

> ID：13500526
> 
> 赞同：0
> 
> 时间：2012-11-21T19:20:19.610
> 
> 标签：css, sprite, css-animations

我正在使用精灵和 CSS3 动画来尝试进行翻转。它在 CODA 2 中有点工作，但是当我在 Mozilla、Chrome、Safari 和 Opera 中测试时，动画不会出现。

```
/*linkedin contact button*/
button{text-indent:-99999px; border: none; }
a.linkedin,a.linkedin:hover{display: block; cursor: pointer; background: url(../img/linked.png) no-repeat; width: 128px; height: 128px}
a.linkedin{background-position: -0 -0}
a.linkedin:hover{animation:first 1000s; -moz-animation:first 1000s; -webkit-animation:first 1000s; -o-animation:first 1000s;}

@keyframes first{from {background-position: -140px -0;} to {background-position: -0px -0;}}
@-moz-keyframes first{from {background-position: -140px -0;} to {background-position: -0 -0;}}
@-webkit-keyframes first{from {background-position: -140px -0;} to {background-position: -0 -0;}}
@-o-keyframes first{from {background-position: -140px -0;} to {background-position: -0 -0;}}
*a.linkedin:hover{background-position: -140px -0/9}/*for ie*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:12:55.157

为什么不直接使用 CSS3 过渡？如果你所做的只是改变背景位置，创建关键帧有点过头了。看到这个jsfiddle：

[http://jsfiddle.net/RfbhD/3/](http://jsfiddle.net/RfbhD/3/)

您需要的所有 CSS：

```
a.linkedin {
    background: url(http://placekitten.com/300/128) 0 0 no-repeat; 
    cursor: pointer;
    display: block;
    width: 128px; 
    height: 128px; 

    -webkit-transition: background-position 1s ease; 
       -moz-transition: background-position 1s ease; 
         -o-transition: background-position 1s ease; 
            transition: background-position 1s ease; 
}

a.linkedin:hover{
    background-position: -140px 0; 
} 
```

​</p>

# java - 如何通过使用 libgdx 在其边界线内绘制图像的一部分？

> ID：13500529
> 
> 赞同：1
> 
> 时间：2012-11-21T19:20:27.127
> 
> 标签：java, android, opengl-es, libgdx

我正在 libgdx 中创建一个图像绘画应用程序，用户可以在其中触摸图像的一部分。例如，如果用户触摸应该变成所选颜色的汽车的车轮。

我真的不知道如何指定触摸周围的自定义区域。那可以是一个轮子，一扇门，它们并不总是矩形和圆形。我只需要一个想法去做。libgdx pixelmap 是否可以实现这一点。我必须在触摸区域的边界线内绘制图像。我希望我的问题得到明确说明。

我非常感谢您抽出宝贵时间提供答案。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:09:07.660

我想你想看看[洪水填充](http://en.wikipedia.org/wiki/Flood_fill)算法。我不认为在 libGDX 中对此有任何内置支持，但是您应该能够在[libGDX pixmap](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/Pixmap.html)上实现自己的洪水填充。

# c# - 有没有办法表示没有完整日期的日期和时间？

> ID：13500538
> 
> 赞同：0
> 
> 时间：2012-11-21T19:21:14.227
> 
> 标签：c#, .net

我正在寻找一个自定义数据结构，该数据结构包含大学 5 门课程课程中特定课程的时间表。上课的年份和日期对我来说并不重要——我只关心一周中的哪一天和上课的时间。

如果没有 DateTime，我该如何表示？或者有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:22:55.003

创建您自己的类来保存对您很重要的数据位。

[`DayOfWeek`](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)枚举适合保存星期几，您可以使用字段对小时/分钟进行建模`int`。

就像是：

```
public struct ClassSchedule
{
  private DayOfWeek dayOfWeek;
  private int hours;
  private int minuts;

  public ClassSchedule(DayOfWeek dayOfWeek, int hours, int minutes)
  {
     // test the incoming data for validity and throw exception if not valid
  }
} 
```

您需要确保传入的值有效（比如小时可以在`0`和之间`23`，分钟在和之间`0`，`59`并且传入的枚举值实际上是一个有效的枚举值。

我建议将其设为不可变值类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:27:49.480

您可以使用 DateTime，然后只在其中显示您想要的信息。或者，您可以创建自己的类/结构并将从 DateTime.Now 获得的信息存储在其中。

# php - 为什么 PHPass 函数在这里不起作用？

> ID：13500540
> 
> 赞同：0
> 
> 时间：2012-11-21T19:21:18.760
> 
> 标签：php, mysql, phpass

我已成功注册 phpass，但登录身份验证不起作用。请帮助我。已经 3 天了，我正在为这个错误绞尽脑汁。

注册功能（成功工作并在数据库中添加斜杠密码，如“$2a$08$fpFjM”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-17T17:20:08.360

你为什么用phpass？它很快就会被放弃支持......加上 php 5.5+ 中的酷特性太棒了！

你可以使用 password_hash/password_verify

[http://php.net/manual/en/function.password-hash.php](http://php.net/manual/en/function.password-hash.php) [http://php.net/manual/en/function.password-verify.php](http://php.net/manual/en/function.password-verify.php)

例子

```
<?PHP

$password = "iamcool";
$hashed = password_hash($password, PASSWORD_DEFAULT); // you can use becryt if you want to rather than password_default..

$verify = password_verify($password,$hashed);

if($verify == true){
echo "success login stuff here..";
}else{
echo "you entered the wrong info";
}

?> 
```

# valgrind - Valgrind：如何在不终止进程的情况下强制它生成堆摘要？

> ID：13500541
> 
> 赞同：2
> 
> 时间：2012-11-21T19:21:19.303
> 
> 标签：valgrind

使用 Valgrind 时，我注意到它仅在进程终止时生成堆摘要。有没有办法强制 Valgrind 在进程仍在运行时扫描内存并打印泄漏报告？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T04:43:25.643

除了`VALGRIND_DO_LEAK_CHECK`客户端请求之外，您还可以运行 valgrind with`--vgdb=yes`以启用嵌入式[gdbserver](http://valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserver)，然后在提示符下发出`monitor leak_check full reachable any` [命令。](http://valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserver-commandhandling)`(gdb)`

这不需要修改和重建目标程序，并且具有其他优点：您可以在执行中的任意点设置断点并执行泄漏检查，而不仅仅是您在客户端请求中放置的点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T22:57:45.510

使用`VALGRIND_DO_LEAK_CHECK`来自的客户端请求`valgrind/memcheck.h`。

# php - MySQL 带 php 变量麻烦

> ID：13500542
> 
> 赞同：-1
> 
> 时间：2012-11-21T19:21:21.627
> 
> 标签：php, mysql

我在将 php 变量放入 mysql 查询时遇到问题。

例如：

```
mysql_query("SELECT * FROM listings WHERE title LIKE '%ipod%'"); 
```

这行得通，但是

```
$key = "ipod";
mysql_query("SELECT * FROM listings WHERE title LIKE '%$key%'"); 
```

那是行不通的。

我可能做错了。如果上述方法是正确的，那么我的脚本的另一部分可能有错字或类似的东西。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:24:24.457

你没有选择任何东西：

```
"SELECT * FROM listings WHERE title LIKE '%$key%'" 
```

注意`*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:07:35.427

尝试这个：

```
 $key = "ipod";
 mysql_query("SELECT * FROM listings WHERE title LIKE '%".$key."%'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:32:27.777

```
$key = "ipod";
mysql_query("SELECT * FROM listings WHERE title LIKE '".$key."'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T19:29:16.407

尝试这个：

```
$key = "ipod";
$results = mysql_query("SELECT * FROM listings WHERE title LIKE '$key'");
$num = mysql_num_rows($results);
echo "Received " . $num . "rows of results";

While ($row = mysql_fetch_assoc($results)) {
    echo '<pre>';
    print_r($row);
    echo '</pre>';
} 
```

# javascript - 应用功能时，所有选择框都需要单击 2 次才能打开下拉菜单？

> ID：13500543
> 
> 赞同：1
> 
> 时间：2012-11-21T19:21:30.967
> 
> 标签：javascript, html, css

在将此代码添加到我的页面之前，如果在执行时，我注意到我的所有选择框都需要用户单击 2 次才能打开下拉菜单，第一次单击似乎将焦点放在它上面，然后是第二次单击最后打开它。如果我删除代码，行为会发生变化，用户只需单击 1 次即可打开下拉菜单及其所有菜单选项。

我不确定要修复或修改什么，这样就不需要点击 2 次，我也在使用 ie。7 所以这将是一个围绕 css 焦点的工作。我不希望有任何 jquery。

感谢你的帮助。

```
function v9_form() {
//===========================================================================================>>
    var x = document.getElementsByTagName('INPUT');
    for (var i = 0; i < x.length; i++) {
            if (x[i].type == "text" && x[i].readOnly == false) {            
        if (x[i].id != "date2" && x[i].id != "date3") {

            x[i].onfocus = function() { this.style.backgroundColor = '#FFFFC4';};

            x[i].onblur = function() {  this.style.backgroundColor = '#FFFFFF';};
        }   

            }//end of if
    }//end of for

    var y = document.getElementsByTagName('SELECT');
    for (var i = 0; i < y.length; i++) {
            y[i].onfocus = function() { this.style.backgroundColor = '#FFFFC4'; };
            y[i].onblur = function() { this.style.backgroundColor = '#FFFFFF'; };
    }

    var z = document.getElementsByTagName('TEXTAREA');
    for (var i = 0; i < z.length; i++) {
            z[i].onfocus = function() { this.style.backgroundColor = '#FFFFC4'; };
            z[i].onblur = function() { this.style.backgroundColor = '#FFFFFF'; };
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:37:53.740

这是 IE 的一个已知问题。如果您更改了`onfocus`IE 中的任何样式，则不会显示下拉选项。

一个解决方案是使用[`onfocusin`](http://msdn.microsoft.com/en-us/library/ms536935%28VS.85%29.aspx)IE 的事件：

```
y[i].onfocusin = function() { this.style.backgroundColor = '#FFFFC4'; } 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms536935%28VS.85%29.aspx)：

> 在将焦点设置在该元素上之前为该元素触发。

另一种选择是使用`:focus`CSS 选择器，但您显然仅限于 CSS，没有复杂的 Javascript 逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:38:03.670

你是[这个错误](https://stackoverflow.com/a/2202746/1649781)的受害者。

看起来这是 IE 的一些特殊行为。该答案中有一些代码提供了一种可能的解决方法，您可以尝试，但它的功能非常繁重（适应使用旧版本 IE 的人）。我认为您最好的选择是使用 CSS 伪类（如上面的答案所推荐），或者只是删除那些使用 IE<8 的功能。

# android - 从xml动态获取值

> ID：13500546
> 
> 赞同：0
> 
> 时间：2012-11-21T19:21:35.417
> 
> 标签：android, xml, string

我有这个关于在 xml 上不使用字符串数组来获取字符串值的问题，我只是不知道它是否可能。

我的 file.xml 可以同时拥有这两个

```
<resources>
   <string name="test1"></string>
   <string name="test2"></string>
</resources> 
```

还有这个：

```
<resources>
   <string name="test1"></string>
</resources> 
```

有什么方法可以在没有数组的情况下以编程方式获取值。

问题是，我不能这样做：

```
R.string.test1; 
R.string.test2; 
```

因为并不总是我有“test2”字符串。有什么方法可以动态地获取所有值？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:26:56.547

您可以收到带有其名称（而不是其 id）的字符串：

```
 String packageName = getPackageName();
   int resId = getResources().getIdentifier("test2", "string", packageName);
   String test2 =getString(resId); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T19:29:40.870

试试这个

```
String test1 = getResources().getString(R.string.test1);
String test2 = getResources().getString(R.string.test2); 
```

[更多信息](http://developer.android.com/guide/topics/resources/available-resources.html#stringresources)

# class - 你可以在 C# 中的函数内部使用类吗

> ID：13500547
> 
> 赞同：2
> 
> 时间：2012-11-21T19:21:37.857
> 
> 标签：class, function, c#

我想知道我是否可以在函数内部使用一个类。我会使用 filename.FuntionName(); 在另一个文件中调用该函数；我将课程公开，以便它更有可能合作。此外，将使用 filename.FunctionName(); 从另一个文件调用该函数，还是仅将其用作资源？好吧，这里是代码：

```
namespace file
{
public void file()
{
    public class file
    {
        /*function
        code*/
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:31:20.017

你不能在函数内部声明类`Java`，但是你可以`var`用来创建一个在函数外部不可见的匿名类型

```
 void file()
    {
        var file=new {
            path="path",
            size=200};
        Console.WriteLine(file.path+"  "+file.size);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:45:59.480

我怀疑你正在寻找的是一种**静态**方法。

```
namespace SomeNamespace
{
    public class SomeClass
    {
        public static void CallMe()
        {
            Console.WriteLine("Hello World!");
        }
    }
} 
```

然后，您可以`SomeNameSpace.SomeClass.CallMe()`从其他地方调用，而无需创建`SomeClass`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:28:38.380

声明函数的正确方法：

```
namespace Company.Utilities.File
{
    public class File
    {
        public File(string filename)
        {
           Filename = filename;
        }

        public string Filename { get; private set; }

        public void Process()
        {
            // Some code to process the file.
        }

        public static void ProcessFile(string filename)
        {
            File file = new File(filename);
            file.Process();
        }
    }
} 
```

长命名空间名称的要点是，即使使用其他公司的程序集（第三方程序集），它也应该是唯一的

如果你想像调用函数一样调用类，你应该创建一个静态函数（如 ProcessFile），那么你可以调用 File.ProcessFile(filename);

# audio - 如何将包含纯音的音频文件转换回序列化数据？

> ID：13500548
> 
> 赞同：0
> 
> 时间：2012-11-21T19:21:38.403
> 
> 标签：audio, graph, signal-processing, fft, frequency

信号处理对我来说是一个新领域，我不知道从哪里开始寻找我的问题的解决方案。

我有一个折线图，它被转换为一个只包含纯音调的音频文件。我正在尝试使用处理将其转换回折线图，尽管我认为语言无关紧要。我隐约知道我可能需要使用傅立叶变换，但这不是我熟悉的东西。

我查看了使用 Minim 进行处理及其频谱分析功能提供的所有示例，但我仍然不知道应该如何进行，或者我什至应该寻找什么。

我想调制解调器和传真机将序列化数据转换为音频形式并以几乎相同的方式返回，尽管我不确定它们如何设法将数据从音调形式转换回来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:57:41.597

执行此操作的基本方法是，对于要绘制到的区域中的每个像素，您可以通过在计算的高度处绘制像素来确定要表示的数据样本或样本。

血腥细节：

忽略压缩音频的复杂性，一个音频文件是一组样本。样本以固定速率记录。对于音频，常见的采样率为每秒 44100、48000 或 96000 个样本。音频文件通常会指定这个速率。要绘制此数据，您需要将音频样本映射到像素。

举个简单的例子，假设您以每秒 48000 个样本记录了 1 秒的 ECG 数据。那是文件中的 48000 个样本。让样本是范围从 0 到 1 的浮点值，尽管它们通常是整数样本。并假设您正在绘制一个 10 像素高、100 像素宽的矩形。

鉴于这一切，这意味着每个像素将代表 480 个数据样本。您可以平均这 480 个样本，以获得您应该在第一个像素中绘制的值。要找出填充像素的位置，请将样本的范围（0 到 1）映射到绘图矩形（高度 0 到 10）。0 样本将在矩形底部绘制，1 样本将在顶部绘制， 0.5 个样本将在中间绘制。假设前 480 个样本的平均值为 0.1。然后，您将在绘图区域最左侧像素的底部向上 1 个像素处绘制一个点，相对于绘图矩形的底部为 (0,1)。

重复此操作，直到您确定在显示区域中为每个像素绘制像素的位置。

如果您的样本少于要显示的像素，您将为每个像素插入值。给定相同的绘图区域，10 x 100，但只有 10 个数据样本，您将为每个数据样本插入 9 个像素位置。

# ruby-on-rails - Rails 嵌套资源 - 需要日期过滤/分页

> ID：13500554
> 
> 赞同：0
> 
> 时间：2012-11-21T19:22:06.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用嵌套资源，如下所示，但我现在需要能够发送日期范围参数以进行分页/过滤。我知道关于不超过 1 个嵌套资源的规则，但我不确定将第三个变量应用于路由的正确方法。

```
resources :projects do
    resources :expenses
end 
```

我是否应该制作自己的比赛声明，例如：

```
 match '/projects/:project_id/expenses/date/:start_date' => 'expenses#index', :as => 'view_expenses' 
```

然后删除嵌套资源？

我担心发送一个查询字符串，我将不得不以某种方式将它重新包含在我的所有路径中，所以我猜测它最好用路由处理。

只是不确定我是否走在正确的轨道上。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:08:26.907

我认为您希望通过参数哈希将日期传递给控制器​​。你可以做到这一点而不必弄乱你的路径。我不确定您是如何过滤日期的，但假设在您的费用索引页面上，您有一个搜索表单，可让您按月和年进行过滤。

搜索表单看起来像：

```
<%= form_tag(project_expenses_path(@project) do %>
  <%= label_tag(:search_date, "Search:") %>
  <%= date_select("expense", "date", :discard_day => true %>
  <%= submit_tag("Find") %>
<% end %> 
```

然后您的费用控制器将如下所示：

```
class ExpensesController < ApplicationController
    def index
      @project = Project.find(params[:id])
      @expenses = #find the expenses by querying the db using params[:expense][:date]
    end
 end 
```

您当然需要一些默认日期范围，以便在没有通过日期参数时不会出现异常。

# canvas - html5画布中的运动jpeg

> ID：13500558
> 
> 赞同：9
> 
> 时间：2012-11-21T19:22:19.910
> 
> 标签：canvas, html5-video, html5-canvas, mjpeg

我正在尝试将运动 jpeg (mjpeg) 流（来自网络摄像头）包装到 html5 画布中。我知道 Safari 和 Chrome 对 mjpeg 有本机支持，因此我可以将其放入`img`以使其工作。我想将它包装在画布中的原因是我想对其进行一些后期处理。

我知道我可以`drawImage`用来加载图像（和 mjpeg）：

```
<html>
  <body>
    <canvas id='test_canvas' width='640px' height='480px' style='border:1px solid #d3d3d3'>
    </canvas>
    <script language="JavaScript">
      var ctx = document.getElementById('test_canvas').getContext('2d');
      var img = new Image();
      img.onload = function() {
        ctx.drawImage(img, 0, 0);
      };
      var theDate = new Date();
      img.src = "http://some.video.stream.edu/axis-cgi/mjpg/video.cgi?";
    </script>
  </body>
</html> 
```

但是，它将 mjpeg 作为图像加载，因此仅显示第一帧。放入`ctx.drawImage(img, 0, 0)`循环`while (true)`也无济于事（不足为奇）。

我认为应该有一些技巧让它发挥作用，仍在谷歌搜索，只是不确定哪个方向更有希望。只被一些相当现代的浏览器支持是可以的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T10:06:35.857

另一个解决方案是在你的 javascript 中添加它。

```
window.setInterval("refreshCanvas()", 10);
function refreshCanvas(){
  ctx.drawImage(img, 0, 0);
}; 
```

它将每 10 毫秒重绘一次画布中的图像。

BR /弗雷德里克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T21:53:25.153

最后通过使用这个库让它工作：[http](http://www.ros.org/wiki/mjpegcanvasjs/Tutorials/CreatingASingleStreamCanvas) ://www.ros.org/wiki/mjpegcanvasjs/Tutorials/CreatingASingleStreamCanvas 。

尽管如此，仍在与跨域问题作斗争。我关于 SO 的另一个问题：[Canvas tainted by cross-origin data](https://stackoverflow.com/questions/13674835/canvas-tainted-by-cross-origin-data)。

# algorithm - 创建具有 n 个节点和 L 个叶节点的 AVL 树的方法数

> ID：13500560
> 
> 赞同：2
> 
> 时间：2012-11-21T19:22:28.557
> 
> 标签：algorithm, computer-science

我想知道有多少种方法可以创建具有 n 个节点和 L 个叶节点的平衡二叉树。

我也知道 n 必须是 (2*L - 1) 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:37:43.980

平衡二叉树是一棵树，使得给定任何节点，该节点的两个子树的高度最多相差一个。所以节点数不一定是2^L -1。如果一棵树有 2^L-1 个节点，则根据定义，它是一棵完整的二叉树。所以回答你的问题.. 如果顺序确实很重要.. 有（n 选择 1）种方式（或 n 种方式）来选择顶部节点。然后由于顺序确实很重要，因此有 (n-1 选择 2) 个选项来选择该节点的子节点。依此类推。所以它将是 (n 选择 1) *(n-1 选择 2) * (n-3 选择 2) * .... 直到 n = 1 或 0。

如果顺序无关紧要..顶部节点仍然相同。对于顶部节点，您仍然有（n 选择 1）个选项。对于该节点的其中一个孩子，我们有 n-1 个选择，在我们选择之后，我们有 n-2 个选择给另一个孩子。然后我们继续，直到我们没有选择。所以在这种情况下会有 n*(n-1)*(n-2)... = n! 方法

----编辑--- 其实我犯了一个错误。总节点数不一定是 2^L -1。给定 n 个节点，树的高度是 floor(lg(n))。叶节点的数量与树中的节点总数无关。

# backbone.js - Backbone.js 模板对象不显示

> ID：13500562
> 
> 赞同：1
> 
> 时间：2012-11-21T19:22:37.043
> 
> 标签：backbone.js, backbone-views

我正在通过backbone.js 破解/学习我的方式。出于某种原因，我可以一直跟踪 @account 模型实例到视图，但是在模板中，当我什么都不做时`<%= account.get('name') %>`会返回。当我这样做时，`<%= account %>`我得到`[object Object]`

我只是使用错误的标签来显示`account`吗？

无论如何，这是我的代码。

路由器：shows.js.coffee：

```
class AppName.Routers.Shows extends Backbone.Router
  routes:
    '': 'index'

  initialize: ->
    # Fetch Show Dates
    @collection = new AppName.Collections.Shows
    @collection.fetch()
    # Fetch Account Info
    @account = new AppName.Models.Account
    @account.fetch()

  index: ->
    # Shows
    view = new AppName.Views.ShowsIndex(collection: @collection)
    $('div.shows_container').html(view.render().el)
    # Account
    view = new AppName.Views.Account(model: @account)
    $('div.account_container').html(view.render().el) 
```

型号：show.js.coffee

```
class AppName.Models.Account extends Backbone.Model
  urlRoot: 'api/account' 
```

查看：show.js.cofee

```
class AppName.Views.Account extends Backbone.View
  template: JST['accounts/show']

  render: ->    
    $(@el).html(@template(account: @model)) 
    this 
```

模板：show.jst.ejs

```
<%= account.get('name') %> 
```

# rest - HTTP Put 在 MVC 4 Web API 中对我不起作用。我一直收到404

> ID：13500563
> 
> 赞同：-1
> 
> 时间：2012-11-21T19:22:37.107
> 
> 标签：rest, jquery, asp.net-mvc-4, asp.net-web-api

```
var assetimage_id = $(this).closest(".assetImageWrapper").attr("data-assetimage_id");

    var dataToSend = JSON.stringify({ "Asset_ID": assetimage_id, "Description": $(this).val() });
        $.ajax({
            url: "/api/Assets/UpdateDescription",
            type: "PUT",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: dataToSend,
            success: function (data) {
                alert("success");
            }
    }); 
```

这是它应该达到的方法。

```
 [HttpPut]
        public Asset UpdateDescription(int Asset_ID, string Description)
        {
            return new AssetsService().UpdateAssetDescription(Asset_ID, Description);
        } 
```

什么看起来不正常？该方法设置在名为 Assets 的 Web API 控制器中。所有其他方法都可以正常工作（GETS，POSTS）。这是我在 Visual Studio 2012 中按 F5 运行它的时候，所以没有更改 IIS 配置。Api 路由是默认路由。

我的 web.config 支持所有动词：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:22:28.377

默认情况下，像上面的“Asset_ID”这样的简单类型以及字符串“Description”都是从 Uri 绑定的。在您的场景中，您似乎在正文中发送内容，因此您需要相应地更改您的 api 签名。顺便说一句，您的操作也不能有多个 FromBody 参数。

对于复杂模型，您需要创建一个视图模型来包含它们：

创建后：

```
public class AssetEstimatedValueUpdate
    {
        public int Asset_ID { get; set; }
        public string EstimatedValue { get; set; }
    } 
```

然后你可以把它传入，一切正常。

```
[HttpPut]
        public Asset UpdateDescription(AssetDescriptionUpdate _AssetDescriptionUpdate)
        {
            return new AssetsService().UpdateAssetDescription(_AssetDescriptionUpdate.Asset_ID, _AssetDescriptionUpdate.Description);
        } 
```

# ubuntu - Redis 踢出空/空白 pid 文件

> ID：13500564
> 
> 赞同：1
> 
> 时间：2012-11-21T19:22:38.550
> 
> 标签：ubuntu, redis, pid

我在 ubuntu 12.04 上，我刚刚安装并设置了 redis-server`apt-get install redis-server`服务器运行良好，除了一件事之外，它应该正常运行 - 踢出的 pid 文件是空白的。我不知道出了什么问题，也不知道如何调试问题。

这是我的 init.d 脚本，由安装程序创建：

```
#! /bin/sh
### BEGIN INIT INFO
# Provides:     redis-server
# Required-Start:   $syslog $remote_fs
# Required-Stop:    $syslog $remote_fs
# Should-Start:     $local_fs
# Should-Stop:      $local_fs
# Default-Start:    2 3 4 5
# Default-Stop:     0 1 6
# Short-Description:    redis-server - Persistent key-value db
# Description:      redis-server - Persistent key-value db
### END INIT INFO

PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
DAEMON=/usr/bin/redis-server
DAEMON_ARGS=/etc/redis/redis.conf
NAME=redis-server
DESC=redis-server

RUNDIR=/var/run/redis
PIDFILE=$RUNDIR/redis-server.pid

test -x $DAEMON || exit 0

set -e

case "$1" in
  start)
    echo -n "Starting $DESC: "
    mkdir -p $RUNDIR
    touch $PIDFILE
    chown redis:redis $RUNDIR $PIDFILE
    chmod 755 $RUNDIR
    if start-stop-daemon --start --quiet --umask 022 --pidfile $PIDFILE --chuid redis:redis --exec $DAEMON -- $DAEMON_ARGS
    then
        echo "$NAME."
    else
        echo "failed"
    fi
    ;;
  stop)
    echo -n "Stopping $DESC: "
    if start-stop-daemon --stop --retry forever/QUIT/1 --quiet --oknodo --pidfile $PIDFILE --exec $DAEMON
    then
        echo "$NAME."
    else
        echo "failed"
    fi
    rm -f $PIDFILE
    ;;

  restart|force-reload)
    ${0} stop
    ${0} start
    ;;

  status)
    echo -n "$DESC is "
    if start-stop-daemon --stop --quiet --signal 0 --name ${NAME} --pidfile ${PIDFILE}
    then
        echo "running"
    else
        echo "not running"
        exit 1
    fi
    ;;

  *)
    echo "Usage: /etc/init.d/$NAME {start|stop|restart|force-reload}" >&2
    exit 1
    ;;
esac

exit 0 
```

我在其中所做的唯一更改是将 --umask 从 007 更改为 022，因为备份实用程序在访问 .rdb 转储文件时遇到问题。

An`ps aux | grep redis`给了我以下信息：

```
redis    17537  0.1  0.0  17016  6852 ?        Ss   Nov20   1:24 /usr/bin/redis-server/etc/redis/redis.conf 
```

我的 redis.conf 看起来像这样：

```
# Redis configuration file example

# Note on units: when memory size is needed, it is possible to specifiy
# it in the usual form of 1k 5GB 4M and so forth:
#
# 1k => 1000 bytes
# 1kb => 1024 bytes
# 1m => 1000000 bytes
# 1mb => 1024*1024 bytes
# 1g => 1000000000 bytes
# 1gb => 1024*1024*1024 bytes
#
# units are case insensitive so 1GB 1Gb 1gB are all the same.

# By default Redis does not run as a daemon. Use 'yes' if you need it.
# Note that Redis will write a pid file in /var/run/redis.pid when daemonized.
daemonize yes

# When running daemonized, Redis writes a pid file in /var/run/redis.pid by
# default. You can specify a custom pid file location here.
pidfile /var/run/redis/redis-server.pid

# Accept connections on the specified port, default is 6379.
# If port 0 is specified Redis will not listen on a TCP socket.
port 6379

# If you want you can bind a single interface, if the bind option is not
# specified all the interfaces will listen for incoming connections.
#
bind 192.168.0.2

# Specify the path for the unix socket that will be used to listen for
# incoming connections. There is no default, so Redis will not listen
# on a unix socket when not specified.
#
# unixsocket /var/run/redis/redis.sock

# Close the connection after a client is idle for N seconds (0 to disable)
timeout 5000

# Set server verbosity to 'debug'
# it can be one of:
# debug (a lot of information, useful for development/testing)
# verbose (many rarely useful info, but not a mess like the debug level)
# notice (moderately verbose, what you want in production probably)
# warning (only very important / critical messages are logged)
loglevel notice

# Specify the log file name. Also 'stdout' can be used to force
# Redis to log on the standard output. Note that if you use standard
# output for logging but daemonize, logs will be sent to /dev/null
logfile /var/log/redis/redis-server.log

# To enable logging to the system logger, just set 'syslog-enabled' to yes,
# and optionally update the other syslog parameters to suit your needs.
# syslog-enabled no

# Specify the syslog identity.
# syslog-ident redis

# Specify the syslog facility.  Must be USER or between LOCAL0-LOCAL7.
# syslog-facility local0

# Set the number of databases. The default database is DB 0, you can select
# a different one on a per-connection basis using SELECT <dbid> where
# dbid is a number between 0 and 'databases'-1
databases 1

################################ SNAPSHOTTING  #################################
#
# Save the DB on disk:
#
#   save <seconds> <changes>
#
#   Will save the DB if both the given number of seconds and the given
#   number of write operations against the DB occurred.
#
#   In the example below the behaviour will be to save:
#   after 900 sec (15 min) if at least 1 key changed
#   after 300 sec (5 min) if at least 10 keys changed
#   after 60 sec if at least 10000 keys changed
#
#   Note: you can disable saving at all commenting all the "save" lines.

save 900 1
save 300 10
save 60 10000

# Compress string objects using LZF when dump .rdb databases?
# For default that's set to 'yes' as it's almost always a win.
# If you want to save some CPU in the saving child set it to 'no' but
# the dataset will likely be bigger if you have compressible values or keys.
rdbcompression yes

# The filename where to dump the DB
dbfilename dump.rdb

# The working directory.
#
# The DB will be written inside this directory, with the filename specified
# above using the 'dbfilename' configuration directive.
# 
# Also the Append Only File will be created inside this directory.
# 
# Note that you must specify a directory here, not a file name.
dir /var/lib/redis

################################# REPLICATION #################################

# Master-Slave replication. Use slaveof to make a Redis instance a copy of
# another Redis server. Note that the configuration is local to the slave
# so for example it is possible to configure the slave to save the DB with a
# different interval, or to listen to another port, and so on.
#
# slaveof <masterip> <masterport>

# If the master is password protected (using the "requirepass" configuration
# directive below) it is possible to tell the slave to authenticate before
# starting the replication synchronization process, otherwise the master will
# refuse the slave request.
#
# masterauth <master-password>

# When a slave lost the connection with the master, or when the replication
# is still in progress, the slave can act in two different ways:
#
# 1) if slave-serve-stale-data is set to 'yes' (the default) the slave will
#    still reply to client requests, possibly with out of data data, or the
#    data set may just be empty if this is the first synchronization.
#
# 2) if slave-serve-stale data is set to 'no' the slave will reply with
#    an error "SYNC with master in progress" to all the kind of commands
#    but to INFO and SLAVEOF.
#
slave-serve-stale-data yes

################################## SECURITY ###################################

# Require clients to issue AUTH <PASSWORD> before processing any other
# commands.  This might be useful in environments in which you do not trust
# others with access to the host running redis-server.
#
# This should stay commented out for backward compatibility and because most
# people do not need auth (e.g. they run their own servers).
# 
# Warning: since Redis is pretty fast an outside user can try up to
# 150k passwords per second against a good box. This means that you should
# use a very strong password otherwise it will be very easy to break.
#
# requirepass foobared

# Command renaming.
#
# It is possilbe to change the name of dangerous commands in a shared
# environment. For instance the CONFIG command may be renamed into something
# of hard to guess so that it will be still available for internal-use
# tools but not available for general clients.
#
# Example:
#
# rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52
#
# It is also possilbe to completely kill a command renaming it into
# an empty string:
#
# rename-command CONFIG ""

################################### LIMITS ####################################

# Set the max number of connected clients at the same time. By default there
# is no limit, and it's up to the number of file descriptors the Redis process
# is able to open. The special value '0' means no limits.
# Once the limit is reached Redis will close all the new connections sending
# an error 'max number of clients reached'.
#
# maxclients 128

# Don't use more memory than the specified amount of bytes.
# When the memory limit is reached Redis will try to remove keys with an
# EXPIRE set. It will try to start freeing keys that are going to expire
# in little time and preserve keys with a longer time to live.
# Redis will also try to remove objects from free lists if possible.
#
# If all this fails, Redis will start to reply with errors to commands
# that will use more memory, like SET, LPUSH, and so on, and will continue
# to reply to most read-only commands like GET.
#
# WARNING: maxmemory can be a good idea mainly if you want to use Redis as a
# 'state' server or cache, not as a real DB. When Redis is used as a real
# database the memory usage will grow over the weeks, it will be obvious if
# it is going to use too much memory in the long run, and you'll have the time
# to upgrade. With maxmemory after the limit is reached you'll start to get
# errors for write operations, and this may even lead to DB inconsistency.
#
maxmemory 2GB

# MAXMEMORY POLICY: how Redis will select what to remove when maxmemory
# is reached? You can select among five behavior:
# 
# volatile-lru -> remove the key with an expire set using an LRU algorithm
# allkeys-lru -> remove any key accordingly to the LRU algorithm
# volatile-random -> remove a random key with an expire set
# allkeys->random -> remove a random key, any key
# volatile-ttl -> remove the key with the nearest expire time (minor TTL)
# noeviction -> don't expire at all, just return an error on write operations
# 
# Note: with all the kind of policies, Redis will return an error on write
#       operations, when there are not suitable keys for eviction.
#
#       At the date of writing this commands are: set setnx setex append
#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd
#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby
#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby
#       getset mset msetnx exec sort
#
# The default is:
#
maxmemory-policy volatile-lru

# LRU and minimal TTL algorithms are not precise algorithms but approximated
# algorithms (in order to save memory), so you can select as well the sample
# size to check. For instance for default Redis will check three keys and
# pick the one that was used less recently, you can change the sample size
# using the following configuration directive.
#
# maxmemory-samples 3

############################## APPEND ONLY MODE ###############################

# By default Redis asynchronously dumps the dataset on disk. If you can live
# with the idea that the latest records will be lost if something like a crash
# happens this is the preferred way to run Redis. If instead you care a lot
# about your data and don't want to that a single record can get lost you should
# enable the append only mode: when this mode is enabled Redis will append
# every write operation received in the file appendonly.aof. This file will
# be read on startup in order to rebuild the full dataset in memory.
#
# Note that you can have both the async dumps and the append only file if you
# like (you have to comment the "save" statements above to disable the dumps).
# Still if append only mode is enabled Redis will load the data from the
# log file at startup ignoring the dump.rdb file.
#
# IMPORTANT: Check the BGREWRITEAOF to check how to rewrite the append
# log file in background when it gets too big.

appendonly no

# The name of the append only file (default: "appendonly.aof")
# appendfilename appendonly.aof

# The fsync() call tells the Operating System to actually write data on disk
# instead to wait for more data in the output buffer. Some OS will really flush 
# data on disk, some other OS will just try to do it ASAP.
#
# Redis supports three different modes:
#
# no: don't fsync, just let the OS flush the data when it wants. Faster.
# always: fsync after every write to the append only log . Slow, Safest.
# everysec: fsync only if one second passed since the last fsync. Compromise.
#
# The default is "everysec" that's usually the right compromise between
# speed and data safety. It's up to you to understand if you can relax this to
# "no" that will will let the operating system flush the output buffer when
# it wants, for better performances (but if you can live with the idea of
# some data loss consider the default persistence mode that's snapshotting),
# or on the contrary, use "always" that's very slow but a bit safer than
# everysec.
#
# If unsure, use "everysec".

# appendfsync always
appendfsync everysec
# appendfsync no

# When the AOF fsync policy is set to always or everysec, and a background
# saving process (a background save or AOF log background rewriting) is
# performing a lot of I/O against the disk, in some Linux configurations
# Redis may block too long on the fsync() call. Note that there is no fix for
# this currently, as even performing fsync in a different thread will block
# our synchronous write(2) call.
#
# In order to mitigate this problem it's possible to use the following option
# that will prevent fsync() from being called in the main process while a
# BGSAVE or BGREWRITEAOF is in progress.
#
# This means that while another child is saving the durability of Redis is
# the same as "appendfsync none", that in pratical terms means that it is
# possible to lost up to 30 seconds of log in the worst scenario (with the
# default Linux settings).
# 
# If you have latency problems turn this to "yes". Otherwise leave it as
# "no" that is the safest pick from the point of view of durability.
no-appendfsync-on-rewrite no

################################ VIRTUAL MEMORY ###############################

# Virtual Memory allows Redis to work with datasets bigger than the actual
# amount of RAM needed to hold the whole dataset in memory.
# In order to do so very used keys are taken in memory while the other keys
# are swapped into a swap file, similarly to what operating systems do
# with memory pages.
#
# To enable VM just set 'vm-enabled' to yes, and set the following three
# VM parameters accordingly to your needs.

vm-enabled no
# vm-enabled yes

# This is the path of the Redis swap file. As you can guess, swap files
# can't be shared by different Redis instances, so make sure to use a swap
# file for every redis process you are running. Redis will complain if the
# swap file is already in use.
#
# The best kind of storage for the Redis swap file (that's accessed at random) 
# is a Solid State Disk (SSD).
#
# *** WARNING *** if you are using a shared hosting the default of putting
# the swap file under /tmp is not secure. Create a dir with access granted
# only to Redis user and configure Redis to create the swap file there.
vm-swap-file /var/lib/redis/redis.swap

# vm-max-memory configures the VM to use at max the specified amount of
# RAM. Everything that deos not fit will be swapped on disk *if* possible, that
# is, if there is still enough contiguous space in the swap file.
#
# With vm-max-memory 0 the system will swap everything it can. Not a good
# default, just specify the max amount of RAM you can in bytes, but it's
# better to leave some margin. For instance specify an amount of RAM
# that's more or less between 60 and 80% of your free RAM.
vm-max-memory 0

# Redis swap files is split into pages. An object can be saved using multiple
# contiguous pages, but pages can't be shared between different objects.
# So if your page is too big, small objects swapped out on disk will waste
# a lot of space. If you page is too small, there is less space in the swap
# file (assuming you configured the same number of total swap file pages).
#
# If you use a lot of small objects, use a page size of 64 or 32 bytes.
# If you use a lot of big objects, use a bigger page size.
# If unsure, use the default :)
vm-page-size 32

# Number of total memory pages in the swap file.
# Given that the page table (a bitmap of free/used pages) is taken in memory,
# every 8 pages on disk will consume 1 byte of RAM.
#
# The total swap size is vm-page-size * vm-pages
#
# With the default of 32-bytes memory pages and 134217728 pages Redis will
# use a 4 GB swap file, that will use 16 MB of RAM for the page table.
#
# It's better to use the smallest acceptable value for your application,
# but the default is large in order to work in most conditions.
vm-pages 134217728

# Max number of VM I/O threads running at the same time.
# This threads are used to read/write data from/to swap file, since they
# also encode and decode objects from disk to memory or the reverse, a bigger
# number of threads can help with big objects even if they can't help with
# I/O itself as the physical device may not be able to couple with many
# reads/writes operations at the same time.
#
# The special value of 0 turn off threaded I/O and enables the blocking
# Virtual Memory implementation.
vm-max-threads 4

############################### ADVANCED CONFIG ###############################

# Hashes are encoded in a special way (much more memory efficient) when they
# have at max a given numer of elements, and the biggest element does not
# exceed a given threshold. You can configure this limits with the following
# configuration directives.
hash-max-zipmap-entries 512
hash-max-zipmap-value 64

# Similarly to hashes, small lists are also encoded in a special way in order
# to save a lot of space. The special representation is only used when
# you are under the following limits:
list-max-ziplist-entries 512
list-max-ziplist-value 64

# Sets have a special encoding in just one case: when a set is composed
# of just strings that happens to be integers in radix 10 in the range
# of 64 bit signed integers.
# The following configuration setting sets the limit in the size of the
# set in order to use this special memory saving encoding.
set-max-intset-entries 512

# Active rehashing uses 1 millisecond every 100 milliseconds of CPU time in
# order to help rehashing the main Redis hash table (the one mapping top-level
# keys to values). The hash table implementation redis uses (see dict.c)
# performs a lazy rehashing: the more operation you run into an hash table
# that is rhashing, the more rehashing "steps" are performed, so if the
# server is idle the rehashing is never complete and some more memory is used
# by the hash table.
# 
# The default is to use this millisecond 10 times every second in order to
# active rehashing the main dictionaries, freeing memory when possible.
#
# If unsure:
# use "activerehashing no" if you have hard latency requirements and it is
# not a good thing in your environment that Redis can reply form time to time
# to queries with 2 milliseconds delay.
#
# use "activerehashing yes" if you don't have such hard requirements but
# want to free memory asap when possible.
activerehashing yes

################################## INCLUDES ###################################

# Include one or more other config files here.  This is useful if you
# have a standard template that goes to all redis server but also need
# to customize a few per-server settings.  Include files can include
# other files, so use this wisely.
#
# include /path/to/local.conf
# include /path/to/other.conf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T15:03:17.787

将 daemonize 设置为 yes（默认值），但更改 pid 文件路径：

```
# When running daemonized, Redis writes a pid file in /var/run/redis.pid by
# default. You can specify a custom pid file location here.
pidfile /var/run/redis/redis-server.pid 
```

这将使 init.d 脚本正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T10:33:47.220

尝试禁用 redis 守护进程。

在你的 redis.conf 中：

```
# By default Redis does not run as a daemon. Use 'yes' if you need it.
# Note that Redis will write a pid file in /var/run/redis.pid when daemonized.
daemonize yes 
```

改成`daemonize yes`可以`daemonize no`解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-22T22:50:32.847

我遇到了同样的问题，在研究了几个小时后，我意识到 pidfile（配置文件中 pid 的路径）指向的位置与 init.d 脚本中默认使用的位置不同。我将配置中的那个更改为指向“/var/run/redis/redis-server.pid”，这就解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-15T19:13:22.117

redis 配置示例中包含的官方文档很糟糕。

pid 不是“/var/run/redis.pid”

但是，它是： **/var/run/redis_6379.pid**

# asp.net-mvc-3 - 如何找到 Commons.web.mvc.precompiledviews.dll？

> ID：13500566
> 
> 赞同：1
> 
> 时间：2012-11-21T19:22:52.867
> 
> 标签：asp.net-mvc-3

**我正在使用Visual Studio 2012**的 ClassLibrary 制作 MVC4

 **检查这个网站：[一个链接](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T08:26:15.143

如果你从[这里下载，你可以在这个项目中找到 dll](http://www.codeproject.com/Articles/358360/NET-ASP-NET-MVC-plug-in-architecture-with-e)**

# jquery - jQuery UI Draggable：无法正常工作但被复制？

> ID：13500569
> 
> 赞同：0
> 
> 时间：2012-11-21T19:23:00.767
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我希望掌握 jQuery 和 jQuery UI。这东西很酷，我可能会看到它的潜力，尽管我不是 javascript 的王者，远非如此！

出于教学目的，我将这段代码写在一个手写的 HTML 文件中。

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>01 - jQuery UI Draggable Basic Example</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <style>
        .dragarea {
                height: 500px;
                width: 500px;
                background: grey;
        }

        #draggable {
                width: 100px;
                height: 100px;
                padding: 20px;
                background: #ccc;
                cursor: pointer;
        }
    </style>
    <script>
        $(document).ready(function() { $( "#draggable" ).draggable(); });
    </script>
</head>
<body>
    <div class="dragarea">
        <div id="draggable">Drag me</div>
    </div>
</body>
</html> 
```

[然而，当从这个jQuery UI Draggable](http://jqueryui.com/draggable/)网站复制时，它可以正常工作。

我还阅读了有关[如何使用 jQuery 创建简单拖放的](http://www.ericbieller.com/2010/06/24/how-to-create-a-simple-drag-and-drop-with-jquery/)教程，以及许多其他 StackOverflow 的 Q/A：

1.  [jQuery UI 可拖动不工作](https://stackoverflow.com/questions/7159118/jquery-ui-draggable-not-working)
2.  [无法让 JQuery Draggable 插件工作？](https://stackoverflow.com/questions/6144188/cant-get-jquery-draggable-plugin-to-work?rq=1)

仅举几个。

当我说它不能正常工作时，我的意思是我可以在屏幕上以正确的样式看到我的两个 DIV 部分，并且我无法拖动可拖动的矩形，它只是像我一样选择文本和页面试图复制文本。这是屏幕上的结果。

![我上面代码的屏幕结果](../Images/670ec63ad351c77f4f0097f5dc49c9a5.png)

我的代码有什么问题？有人可以告诉我吗？

谢谢你的支持！=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:25:08.957

脚本标签不会自动关闭。

```
<script src="http://code.jquery.com/jquery-1.8.2.js" />
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js" /> 
```

***[小提琴：坏了](http://jsfiddle.net/UnqLe/)***

应该

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script> 
```

***[小提琴：固定](http://jsfiddle.net/YxBP9/)***

# regex - 为什么这个模组重写会导致内部服务器错误？

> ID：13500570
> 
> 赞同：1
> 
> 时间：2012-11-21T19:23:01.797
> 
> 标签：regex, apache, .htaccess, mod-rewrite

谁能让我知道我放入 .htaccess 文件的以下代码有什么问题？

```
RewriteEngine On
Options +FollowSymlinks
RewriteBase /
RewriteRule ^New_Hampshire/[a-zA-Z0-9_+ -]+\.html$ NH/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:26:05.710

您应该转义 -，并在 \s 中输入空格

```
RewriteRule ^New_Hampshire/[a-zA-Z0-9_+\-\s]+\.html$ NH/ 
```

# python - 克莱瑟开销的大小是多少？

> ID：13500580
> 
> 赞同：6
> 
> 时间：2012-11-21T19:23:29.633
> 
> 标签：python, kernel, opencl

我正在考虑将[Clyther](http://srossross.github.com/Clyther/)用于高性能任务。仅使用 python 编写 OpenCL 内核令人兴奋，但我想知道性能差距。

克莱瑟擅长什么任务？不擅长？Clyther 生成的内核好不好？

是否有可能找到一些基准？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T07:57:00.220

正如文档所述，CLyther 的主要入口点是它的`clyther.task`和`clyther.kernel`装饰器——一旦一个函数被其中之一装饰，该函数将在调用时编译为 OpenCL。

CLyther 是 Python 语言子集的编译器。它将您的 Python 子集代码编译到 OpenCL 中，因此内核的实际运行时间不会（或不应该）在 OpenCL 接口之间有很大差异。CLyther 的实际开销（与 Python 的所有接口一样）来自调用 OpenCL 函数，或在 CLyther/Python 和 OpenCL 之间移动数据。

[文档](http://srossross.github.com/Clyther/index.html)中提供了显示 CLyther[性能](http://srossross.github.com/Clyther/performance_python.html)的基准。源 tarball 包含基准测试程序的 C++ 和 FORTRAN 版本，一个拉普拉斯方程求解器，因此您可以使用它们自己重现基准测试结果。

就个人而言，我相信您可以在大多数需要 OpenCL 计算的问题上有效地使用 CLyther。

# r - CRAN-R：子集数据帧错误或违反语义？

> ID：13500587
> 
> 赞同：0
> 
> 时间：2012-11-21T19:23:57.773
> 
> 标签：r, subset

今天，由于数据帧子集操作，我在代码中遇到了一个错误。我想知道我发现的问题是错误还是违反了 R 语义。

我正在运行带有 R 2.15.2-61015（不给糖就捣蛋）的 RHEL x86_64。我正在使用基本包中的子集操作。

以下代码应该是可重现的，并且它是在为此测试目的而启动的干净 R 控制台上运行的。

```
>teste <-data.frame(teste0=c(1,2,3),teste1=c(3,4,5))
>teste0<-1
>teste1<-1

>subset(teste,teste[,"teste0"]==1 & teste[,"teste1"]==1)
[1] teste0 teste1
<0 rows> (or 0-length row.names)

>subset(teste,teste[,"teste0"]==teste0 & teste[,"teste1"]==teste1)
teste0 teste1
1      1      3
2      2      4
3      3      5 
```

但是，如果我在子集操作之外运行逻辑代码：

```
>teste[,"teste0"]==teste0 & teste[,"teste1"]==teste1
[1] FALSE FALSE FALSE 
```

我希望这两个子集操作都会产生一个空数据框。但是，第二个返回完整的数据帧。这是一个错误还是我错过了关于 R 环境和命名空间的一些东西？

谢谢你的帮助，米格尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:27:23.423

在本声明中：

```
subset(teste,teste[,"teste0"]==teste0 & teste[,"teste1"]==teste1) 
```

teste0 表示 teste$teste0。teste1 也一样。

在本声明中：

```
teste[,"teste0"]==teste0 & teste[,"teste1"]==teste1 
```

teste0 和 teste1 是您在上面定义的向量（不是数据框的成员）。

# javascript - 角度 ui 可排序回调

> ID：13500590
> 
> 赞同：8
> 
> 时间：2012-11-21T19:24:07.660
> 
> 标签：javascript, angularjs, angular-ui, angular-ui-sortable

有没有办法用angular ui的可排序设置回调函数？我想将 ng-update="foo()" 添加到下面的 tbody 标记中，并在列表更改时运行 foo 。

```
<tbody id="existingStockResults" ui-sortable ng-model="processes">
    <tr ng-repeat="process in processes" ng-class="{odd: $index%2 == 0, even: $index%2 != 0}">
        <td>{{process.process}}</td>
        <td>{{process.vendor}}</td>
        <td>{{process.desc}}</td>
            <td>{{process.cost}}</td>
        <td><a href="#" ng-click="editProcess($index)">edit</a></td>
        <td><a href="#" ng-click="removeProcess($index)">remove</a></td>
    </tr>
</tbody> 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T01:50:46.597

您现在可以在`ui-sortable`属性中指定更新函数，如下所示：

```
<tbody ui-sortable="{update: foo()}"> 
```

但是 sortable 指令仍然存在一些问题，就像在[这个例子](http://jsfiddle.net/Le_Sphinx/hKYWr/400/)中一样。他们目前在[这里](https://github.com/angular-ui/angular-ui/issues/460)讨论。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-07T10:51:00.423

我更喜欢在我的范围内使用定义了更新回调的选项哈希，如下所示：

```
$scope.sortableOptions = {
    disabled: false,
    update: function(event) {
        return $scope.sortableUpdated = true;
    }
}; 
```

并在模板中：

```
<div ui-sortable="sortableOptions"> ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T21:21:49.490

阅读 ui-sortable 文件（在 angular-ui 主页上没有它的演示，想知道为什么？）[在这里](https://github.com/angular-ui/angular-ui/blob/master/modules/directives/sortable/sortable.coffee)，我看到它允许 2 个回调 -> 启动和更新，用于更改之前和之后扳机。所以这样的事情应该有效：

```
<tbody id="existingStockResults" ui-sortable update="myCallback()" ng-model="processes"> 
```

# ajax - 回到页面会给出原始页面

> ID：13500591
> 
> 赞同：0
> 
> 时间：2012-11-21T19:24:09.210
> 
> 标签：ajax, caching

如果我向用户提供页面，例如：

```
<!DOCTYPE HTML>
<HTML>
<HEAD>
    <SCRIPT type="text/javascript">
        function cbCountry_Click()
        {
            var select = document.getElementById("cbCountry");

            select.options[select.options.length] = new Option("Canada", "CA");
            select.options[select.options.length] = new Option("United States", "US");
        }​
    </SCRIPT>
</HEAD>
<BODY>
    <SELECT id="cbCountry"></SELECT>
    <P><BUTTON onclick="cbCountry_Click()">Get Countries</BUTTON>
    <P><A href="http://google.com">Visit a link</A>
</BODY>
</HTML> 
```

此页面具有修改自身的能力。在这种情况下，它是独立的 javascript，但想象一下它是 AJAX 代码。

![在此处输入图像描述](../Images/bb3c1f38856b4f85a7e3969909943dab.png)

如果用户然后点击一个链接*前进*，然后点击返回*到*这个页面；当页面被缓存时，它们将与页面一起呈现；而不是他们如何离开它：

![在此处输入图像描述](../Images/b427e1c8281894694c1d5f15bbfc8a74.png)

有人解决了 AJAX 问题吗？

* * *

我注意到 Google 会定期将您页面的状态发送到服务器。如果您返回页面，他们会强制计时器刷新，这会从服务器刷新页面的状态。

我还注意到有些人只是强制页面不被缓存：

```
Cache-Control: nocache 
```

防止页面被缓存。缺点是它会阻止页面被缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:29:36.203

您可以使用 cookie 将状态存储在客户端，并在页面加载时从 cookie 中恢复页面状态。

# php - Jcrop 插件不适用于调整大小功能

> ID：13500595
> 
> 赞同：4
> 
> 时间：2012-11-21T19:24:23.750
> 
> 标签：php, jquery, html, resize, jcrop

我的 Jcrop 插件无法正常工作。

我可以选择一个区域进行裁剪，但边缘没有小的调整大小的正方形。我不知道这是特定功能还是默认设置。

这就是我的意思。我的作物区域现在看起来像这样：

![我的照片](../Images/c910682d764f419a306ef91a0de2632e.png)

我的裁剪背景是红色的，所选区域具有原始颜色，但奇怪的是没有像这张图片中那样调整大小的正方形：

![好照片](../Images/315b4de21cc254286634ca297884828e.png)

我的代码如下所示：

头部：

```
<head>
    <title>Het Vergeet-mij-nietje</title>
    <script type="text/javascript" src="js/showfunctie.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.Jcrop.min.js"></script>
    <link rel="stylesheet" href="style/css/demos.css" type="text/css" />

    <script language="Javascript">
        jQuery(function($){

          var jcrop_api;

          $('#cropbox').Jcrop({
            bgColor: 'red'
          },function(){
            jcrop_api = this;
          });

          $('#animbutton').click(function(e){
            jcrop_api.animateTo([ 120,120,80,80 ]);
            return false;
          });

          $('#delselect').click(function(e){
            jcrop_api.release();
            return false;
          });

        });
        </script>
</head> 
```

我的图像代码：

```
 <div id="content1">
 <?php 
     $target = "uploads/"; 
     $target = $_POST["imagesource"];        
     $target = $target . basename( $_FILES['filename']['name']) ; 
     $ok=1; 
     if(move_uploaded_file($_FILES['filename']['tmp_name'], $target)) 
     {
     echo "De afbeelding *". basename( $_FILES['filename']['name']). "* is geupload naar de map 'uploads'";
     } 
     else {
     echo "Sorry, er is een probleem met het uploaden van de afbeelding.";
     }
 ?> 
 <br /> <br />

 <img id="cropbox" src="<?php echo $target ?>" width="400px" />

 <br /> <br />
</div> 
```

我希望有人知道是什么问题:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T20:32:55.267

你看过[这个](http://deepliquid.com/projects/Jcrop/demos.php?demo=styling)JCrop 样式示例吗？也许这是一个CSS问题？

你有你的代码的一个活生生的例子吗？

# filepicker.io - Filepicker.io - didPickMediaWithInfo：不返回指定信息

> ID：13500598
> 
> 赞同：0
> 
> 时间：2012-11-21T19:24:30.927
> 
> 标签：filepicker.io

根据 iOS 文档，FPPickerController:didPickMediaWithInfo: 应该返回以下数据：

信息字典中的键 FPPickerControllerFilename FPPickerControllerMediaType（如果可能） FPPickerControllerMediaURL（如果可能） FPPickerControllerRemoteURL（如果可能） FPPickerControllerOriginalImage

但是，我得到的唯一信息是：

FPPickerControllerThumbnailImage = "<UIImage: 0x9712dd0>";

无论如何在上传开始之前获取文件名和/或远程URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:21:17.577

这是按预期工作的。文档有误，已修复。

# ios - 如何将 IOS 部署目标版本设置为一个点 IOS 版本

> ID：13500599
> 
> 赞同：1
> 
> 时间：2012-11-21T19:24:33.663
> 
> 标签：ios, deployment, project, target, setting

我想将 IOS 部署目标设置为 5.0.1，这样我的应用程序就不会在运行 5.0 或更低版本的设备上运行。但是在 xcode 中，我只看到选择 5.0 或 5.1 的选项。我没有看到选择 5.0.1 的选项，或者它是否允许我手动输入值。

如果我要使用文本编辑器手动更新项目文件，它会按预期工作，即 5.0 或更低版本的用户在升级到 5.0.1 或更高版本之前不会在其设备上的 appstore 应用程序中获得更新？

# soap - 寻找 java 库/API 以实现带有附件（SwA）的 SOAP 消息的 WS-Security

> ID：13500601
> 
> 赞同：8
> 
> 时间：2012-11-21T19:24:40.557
> 
> 标签：soap, encryption, ws-security, wss4j

我正在用 java 实现 ebXML3.0 并寻找一个 java 库/API，我可以使用它来对带有附件的 SOAP 消息进行签名和加密。早些时候我使用的是“Apache wss4j”，但这似乎只支持 SOAP 主体的签名/加密（无附件）。

基本上在寻找支持以下的Java API

[https://www.oasis-open.org/committees/download.php/16672/wss-v1.1-spec-os-SwAProfile.pdf](https://www.oasis-open.org/committees/download.php/16672/wss-v1.1-spec-os-SwAProfile.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:49:46.020

我猜你已经找到了[http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/XWS-SecuritySamples6.html](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/XWS-SecuritySamples6.html)并且它不是你想要的？

编辑：在您的最新评论之后，我猜它已经为您解决了[Glassfish Metro](http://metro.java.net)是一种能够将 WS-Security 与带有附件的 SOAP 结合使用的实现。更多信息（包括示例应用程序，可在[https://blogs.oracle.com/enterprisetechtips/entry/securing_attachments_with_metro_1](https://blogs.oracle.com/enterprisetechtips/entry/securing_attachments_with_metro_1)上找到）。我相信这个例子会引导你。

顺便说一句：看起来 XWSS 2.x 和更高版本也支持带有 SwA 的 WS-Sec，请参阅：http: [//xwss.java.net/](http://xwss.java.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:30:35.247

已经考虑过在 WSS4J 中支持 SwA - 请参阅[https://issues.apache.org/jira/browse/WSS-430](https://issues.apache.org/jira/browse/WSS-430)，尽管目前还没有时间表。

# c - 为什么可以分配数组名argv？

> ID：13500603
> 
> 赞同：7
> 
> 时间：2012-11-21T19:24:42.723
> 
> 标签：c, argv

众所周知，数组名不能赋值，语句如下：

```
char * array[], * point;
array = point; /* wrong */
array++; /* wrong */ 
```

但是在`main(int argc, char * argv[])`,`argv++`中是可以的并且效果很好。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T19:26:51.060

在您的示例`array`中是一个真正的数组，因此是一个不可修改的左值。在 main 中，由于它是在参数列表中声明的，`argv`因此实际上是 a `char **`，即可修改的指针。

这一切都归结为一个事实，这`char *array[]`意味着不同的事情，这取决于上下文。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-21T19:49:19.150

在函数参数声明的上下文中，`T a[]`和`T a[N]`都被解释为`T *a`; 在所有三种情况下，`a`都被声明为指向 的*指针*，`T`而不是 的数组`T`。因此， in `int main(int argc, char *argv[])`，`argv`实际上被声明为`char **`，或指向指针的指针`char`，而不是指向 的指针数组`char`。

（**编辑**——请注意，这*仅*适用于函数参数声明；对于常规变量声明，`T a[N]`并且`T a[]`都声明`a`为 的数组`T`）。

因为它是一个指针值，所以它可以被赋值，也可以递增。

除此之外，这是[语言标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)必须说的：

> ### 5.1.2.2.1 程序启动
> 
> ...
> 2 如果声明它们，主函数的参数应遵守以下约束：
> ...
> — 参数`argc`和数组`argv`指向的字符串`argv`应可由程序修改，并保留其最后存储的值在程序启动和程序终止之间。

**编辑**

这是函数参数的语言：

> ### 6.7.6.3 函数声明器（包括原型）
> 
> ...
> 7 将参数声明为“*类型*数组”应调整为“指向 *类型*的限定指针”，其中类型限定符（如果有）是在数组类型派生的`[`and中指定的那些。`]`如果关键字`static`也出现在数组类型派生的`[`and`]`中，那么对于函数的每次调用，对应的实际参数的值应提供对数组的第一个元素的访问，该数组的元素至少与大小指定的一样多表达。

**编辑²**

一些示例（假设 C99 编译器）：

```
void foo(int a[], size_t len)
{
  size_t i;
  printf("sizeof a = %zu\n", sizeof a);
  printf("sizeof (int *) = %zu\n", sizeof (int *));
  for (i = 0; i < len; i++)
    printf("a[%zu] = %d\n", i, *a++);
}

int main(void)
{
  int a1[5] = {0};
  int a2[]  = {0, 1, 2, 3, 4};

  printf("sizeof a1 = %zu\n", sizeof a1);
  printf("sizeof a2 = %zu\n", sizeof a2);

  foo(a1, sizeof a1 / sizeof a1[0]);
  foo(a2, sizeof a2 / sizeof a2[0]);

  return 0;
} 
```

再来一篇标准话：

> ### 6.3.2.1 左值、数组和函数指示符
> 
> ...
> 3 除非它是运算`sizeof`符、运算符`_Alignof`或一元`&`运算符的操作数，或者是用于初始化数组的字符串文字，否则类型为 ''array of *type* '' 的表达式将转换为表达式类型 ''pointer to *type* '' 指向数组对象的初始元素并且不是左值。如果数组对象具有寄存器存储类，则行为未定义。

在函数`main`中，`a1`和`a2`已被声明为 ; 的 5 元素数组`int`。`a2`从初始值设定项中的元素数量获取其大小。*表达式* 因此具有“5 元素数组”类型`a1`，它们可能不是赋值表达式的目标，也可能不是or运算符的操作数。当这些表达式出现在对 的调用中时，它们的类型将根据上述规则转换为“指向的指针”。因此接收一个指针值，而不是一个数组值，for （这被说数组参数转换为指针类型的规则所涵盖）。所以表达式有类型，或者指向`a2``int``++``--``foo``int``foo``a``a``foo``int *``int`; 因此，`a`可能是赋值的目标，也可能是`++`and的操作数`--`。

还有一个区别：根据上面引用的规则，当数组表达式是运算符的操作数时，*不会*`sizeof`发生指针类型的转换；`sizeof a1`应评估为数组占用的字节数`a1`（5 * sizeof `int`）。但是，由于`a`in`foo`具有 type `int *`， not `int [5]`，`sizeof a`应该只计算指向`int`(sizeof `(int *)`) 的指针的字节数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T19:39:00.227

```
main(int argc, char * argv[]) 
```

或者

```
main(int argc, char **argv) 
```

相同且正确。因为在函数参数数组中衰减为指针

有关更多信息，[请阅读此](https://stackoverflow.com/questions/1461432/what-is-array-decaying)

但是您显示的代码是实际的数组。数组的名称给出了第一个元素的地址，它是不可修改的，这就是这样做的原因：

```
 array = point; 
array++; 
```

是错误的，因为您已经提到过。

# objective-c - NSMutableString 返回 null

> ID：13500609
> 
> 赞同：0
> 
> 时间：2012-11-21T19:24:55.847
> 
> 标签：objective-c, string, for-loop, append

我正在尝试从我的应用程序文件夹中的文件名构造一个字符串。

到目前为止，我有：

```
NSArray *directoryPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [directoryPaths objectAtIndex:0];
NSError *error = nil;
NSArray *directoryContent = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:&error];

NSLog(@"contents of document folder = %@", directoryContent); 
```

这打印：

```
 contents of app's document folder = (
    ".DS_Store",
    File1.doc,
    "File2.pdf",
    ....
) 
```

我想构造一个文件名字符串，以某种方式分隔，可能用分号分隔，并通过以下代码尝试它（最初没有任何分隔）：

```
NSMutableString *fileList;
for (NSString *folder in directoryContent)
{
    [fileList appendString:[NSString stringWithFormat:@"%@",  folder]];
}
NSLog(@"file list = %@", fileList); 
```

这打印出来`file list = (null)`，我不知道我哪里出错了。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:30:12.927

在添加字符串之前，您应该初始化 MutableString。NSMutableString* fileList = [[NSMutableString alloc] init ];

# magento - 如何更改 Magento 中的货币名称？

> ID：13500622
> 
> 赞同：4
> 
> 时间：2012-11-21T19:25:37.863
> 
> 标签：magento, currency

我不想在货币选择器中显示“英镑 - 英镑”，而是只显示“英镑 - 英镑”或“美元 - 美元”等。有人知道如何在 magento 中执行此操作吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-03T11:15:26.833

打开 `app/design/frontend/YOUR-PACKAGE/YOUR-THEME/template/directory/currency.phtml`

您将看到以下将显示的代码：`Currency Name - Currency Code`

（例如`British Pound Sterling - GBP`）

```
<?php echo $_name ?> - <?php echo $_code ?> 
```

您的要求是显示：`Currency Code - Currency Symbol`

（例如`GBP - £`）

所以，你可以这样做：

```
<?php echo Mage::app()->getLocale()->currency( $_code )->getSymbol() ?> - <?php echo $_code ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T22:06:42.617

ET_CurrencyManager 扩展对这个选择器没有帮助。

要修改这部分，您需要更改模板 currency.phtml 此模板位于此处的基本主题中

```
 /app/design/frontend/base/default/template/directory/currency.phtml 
```

但是您需要将此文件复制到您的主题或在您的主题中找到此模板

```
 /app/design/frontend/default/YOUR THEME/template/directory/currency.phtml 
```

然后改代码

```
 <?php echo $_name ?> - <?php echo $_code ?> 
```

至

```
 <?php echo $_code ?> - <?php echo Mage::app()->getLocale()->currency($_code)->getSymbol() ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T12:38:24.627

你可以在这里做一些粗略的编码：P

在您的 magento 安装中修改以下文件。

> /app/design/frontend/default/你的主题/template/directory/currency.phtml

```
switch($_code){
   case 'GBP':
   $symbol = '£';
   break;
   default:
   $symbol = '$';
}
//change the following line    
<?php echo $_name ?> - <?php echo $_code ?> 
```

至

```
<?php echo $_code ?> - <?php echo $symbol ?> 
```

# c# - 如何使用 Entity Framework Code First Fluent API 仅在连接表上级联删除

> ID：13500626
> 
> 赞同：8
> 
> 时间：2012-11-21T19:26:09.043
> 
> 标签：c#, .net, entity-framework, ef-code-first

我正在尝试使用 Entity Framework Code First Fluent API 映射现有数据库。我在多对多关系和级联删除的情况下苦苦挣扎。

这是我的两个 POCO 课程：

```
public class Foo
{
  public int FooId;
  public string FooDescription;
  public IList<Bar> Bars;
}
public class Bar
{
  public int BarId;
  public string BarDescription;
} 
```

目前，我只有一个导航属性 from `Foo`to `Bar`。那是因为在我的真实场景中，任何人从`Bar`到`Foo`. 从`Foo`to的关系`Bar`实际上是 0,n 这意味着一个实例`Foo`不需要 的实例`Bar`。

我现有的数据库在这两个表之间有一个连接表。该表如下所示：

```
create table Foo_Bar(
FooId int not null,
BarId int not null
); 
```

因为我不想在我的项目中创建这样的 POCO 类，所以我像这样映射表：

```
modelBuilder.Entity<Foo>()
  .HasMany(t => t.Bars)
  .WithMany()
  .Map(m =>
  {
    m.ToTable("Foo_Bar");
    m.MapLeftKey("FooId");
    m.MapRightKey("BarId");
  }); 
```

这非常适合插入。在 Foo 上插入实体，然后在现有`Foo_Bar`表上插入。

但是当我删除 a 时`Foo`，我想删除连接表上的记录，而不是子表上的记录。这意味着我想删除记录`Foo_Bar`但不将此级联扩展到`Bar`.

这样的映射可能吗？我应该提到，在我的上下文中我删除了这两个`OneToManyCascadeDeleteConvention`，`ManyToManyCascadeDeleteConvention`因为 99% 的时间我不会使用级联删除。这是一种具体情况。

通过跟踪 Entity Framework 生成的 SQL，我还注意到，如果我检索一个`Foo`实例并将其中的所有 Bars 设置为 EntityState.Deleted，EF 将删除`Foo_Bar`和中的两个记录`Bar`。我应该提到的最后一件事是我正在一个断开连接的场景中工作。

我试图搜索这个，但似乎我没有使用正确的关键字，因为在这种情况下我找不到任何人。在这一点上，我看到的唯一解决方案是`Map`上课`FooBar`，但我希望有办法做到这一点。

**- 编辑**

看来我的删除方法一开始是错误的。当我尝试删除时，我没有通过填充`Foo`列表的实例。在该更改之后，实体框架为列表`Bar`中的每个创建一个删除语句。`Bar`我仍然遇到更新问题，例如同时添加和删除项目。将进行更多测试并在此处发布。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T20:11:33.463

> 但是当我删除一个 Foo 时，我想删除连接表上的记录，而不是子表上的记录。这意味着我想删除 Foo_Bar 上的记录，但不想将此级联扩展到 Bar。
> 
> 这样的映射可能吗？

这实际上*是唯一*可能的映射。您不能将级联删除扩展到`Bar`表，因为在关系中（从数据库模式的角度来看）`Foo_Bar`连接表是关系中的*依赖*表并且`Bar`是*主体*。通常，级联删除仅在删除主体时有效，但在删除依赖项时无效。

因此，您不必担心`Bar`在删除 a 时可能会删除 a`Foo`并且您不必为此应用任何特殊设置。

但是，当您删除`ManyToManyCascadeDeleteConvention`. 它对整个模型全局起作用，并且没有选项可以为特定的多对多关系再次打开级联删除。（没有`WillCascadeOnDelete(true)`像一对多或一对一关系那样的多对多关系。）

您确定`ManyToManyCascadeDeleteConvention`在您的模型中确实需要删除吗？我从来没有遇到过这样的模型，当删除一个连接实体（或）时，*不*删除连接表中的相关条目是有意义的。`Foo``Bar`

# wordpress - CSS 菜单和子菜单问题 + webkit 的浏览器像素问题

> ID：13500627
> 
> 赞同：-2
> 
> 时间：2012-11-21T19:26:10.127
> 
> 标签：wordpress, menu, css

我的 css 菜单在这里：[我的 css 菜单](http://benlevywebdesign.com/templeisrael/)

请注意，如果您将鼠标悬停在下面的“关于我们”上，您会看到“我们的神职人员”子菜单已经出现。当您将鼠标悬停在“我们的神职人员”上以显示时，我不希望我想要它。

![在此处输入图像描述](../Images/72e6892331fb75cc026d38b195510637.png)

上面的截图来自 firefox，而 webkit 浏览器显示 1-2px 的差异，如下所示，我不知道为什么？它有时也会影响菜单的工作方式。

![在此处输入图像描述](../Images/122e6c1d1e2c19ceea6e73f1677d8043.png)

**这是我的菜单css（我使用的是wordpress，这意味着没有html）：**

随时帮助我，如果你想清理 css，你也可以！

```
#navbar {
height: 40px;
padding-left: 10px;
margin-left:-10px;
margin-top: -29px;
margin-bottom:0;
background: #F4DE9F;
width:930px;
/*backgroundborder-top: 2px solid #F4DE9F;
border-bottom: 2px solid #F4DE9F;*/
}

#navbar li {
float: left;
list-style: none;
margin-bottom: 30px;
margin-left:-20px;
}
#navbar li a {
font-family: "MuseoSans_500";
color: #3C290B;
font-weight: 500;
text-transform: uppercase;
}
#navbar li:hover {
background:rgba(255, 241, 194, 100); /*#FFF1C2;*/
color: #645548;
text-decoration: none;
}
#navbar li a:hover {
background:rgba(255, 241, 194, 100); /*#FFF1C2;*/
color: #645548;
text-decoration: none;
}
#navbar .parent > a, #navbar .parent > a:hover {
background: #F4DE9F;
background-position: right;
background-repeat: no-repeat;
}
#navbar ul, #navbar ul li {
display: inline;
list-style: none;
margin: 0;
padding: 0;
}
#navbar ul li a {
display: inline-block;
padding: 11px 16.2px 8px;
text-decoration: none;
}

/*
#navbar ul li a:hover {
}
#navbar ul #first a:hover {
}*/

#navbar ul li {
position: relative;
}
#navbar li ul {
display: none;
left: 11px;
position: absolute;
top: 51px;
}
#navbar li ul a {
background: #F4DE9F;
}
#navbar ul ul ul li {
}
#navbar ul li:hover ul {
display: inline-block;
}
#navbar ul li:hover ul, #navbar ul ul li:hover ul, #navbar ul ul ul li:hover ul {
display: block;
margin: -11px 0 0 -11px;
}
/*#navbar ul li:hover ul li a, #navbar ul ul li:hover ul li a, #navbar ul ul ul li:hover ul li a {
display: block;
}*/
#navbar ul li:hover ul ul, #navbar ul ul li:hover ul ul {
margin-top: -50px;
margin-left:129px;
}

#navbar ul li:hover ul li a {
padding: 10px 14px 8px;
width: 112px;
}

#navbar ul li:hover ul ul li a {
padding: 10px 14px 8px;
width: 112px;
}
/*#navbar ul ul ul li:hover ul li a {
padding: 0 16px 0 24px;
width: 140px;
}*/
#navbar .children li a:hover {
color: #000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:48:04.360

首先规范化你的样式是一个很好的 CSS 实践，这样所有的浏览器都可以为一些基本的 HTML 元素获得相同的样式。

我在样式表的开头添加了这个

```
* { margin: 0px; padding: 0px; border: 0px; text-decoration: none } 
```

还有一个用于规范化的综合样式表文件，它涵盖了所有浏览器甚至 html5。尝试在您的 style.css 文件之前添加它。

这是链接： http: [//necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)

对于悬停问题，请尝试此 css 更改

代替

```
 #navbar ul li:hover ul {
     display: inline-block;
}

    #navbar ul li:hover ul, #navbar ul ul li:hover ul, #navbar ul ul ul li:hover ul {
        display: block;
        margin: -11px 0 0 -11px;
    } 
```

和

```
#navbar ul li:hover > ul {
     display: inline-block;
}
#navbar ul li:hover > ul, #navbar ul ul li:hover > ul, #navbar ul ul ul li:hover > ul {
    display: block;
    margin: -11px 0 0 -11px;
} 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T21:01:29.827

当你最终得到一个样式表时，感觉非常臃肿，有几条规则和很多特殊性，比如`#navbar ul ul ul li:hover ul`退后一步看看你是否可以稍微简化一下规则通常是好的。

由于您使用的是 Wordpress，它带有许多方便的类，使工作更容易。在这种情况下`.menu-item`和`.sub-menu`。

用以下样式替换 menu-css 可以解决您在问题中提到的问题，在 Chrome 23、Safari 6 和 Firefox 16 中尝试过。

这里的例子：http: [//jsfiddle.net/5qEwH/](http://jsfiddle.net/5qEwH/)

```
.menu-item {
    display: inline-block;
    position: relative;
    font-family: "MuseoSans_500";
    font-weight: 500;
    text-transform: uppercase;
    background: #F4DE9F;
}

.menu-item:hover {
    background: #FFF1C2;
}

.menu-item a {
    display: inline-block;
    height: 20px;
    padding: 10px;
    text-decoration: none;
    color: #645548;
}
/* Hide submenus by default */
.sub-menu {
    display: none;
    position: absolute;
    width: 150px;
    top: 40px;
}

.sub-menu .menu-item {
    width: 100%;
}
/* The second level sub-menu should be moved to the right */
.sub-menu .menu-item > .sub-menu {
    top: 0;
    left: 150px;
}

/* Show submenus on hover */
.menu-item:hover > .sub-menu {
    display: block;
} 
```

# javascript - .before() 与 .after() 的 jQuery 插入顺序

> ID：13500629
> 
> 赞同：0
> 
> 时间：2012-11-21T19:26:32.787
> 
> 标签：javascript, jquery, append

我正在尝试将使用 jQuery 创建的元素加载到表中。问题是，这个动态创建的元素需要插入到另一个元素（ ）**之后**`<th>`，这样表格才能保持漂亮的设计。使用 .after() 时，我的元素被插入到表格中，表格设计看起来不错，但我使用的数据出现的顺序与使用 .before() 插入时相反。为什么我看到 .before() / .after() 的行为相反？

编辑： .before() 为我提供了正确的利率插入顺序，但它在 . 之前插入元素，因此表 cols/rows 不对齐。.After() 为我提供了相反的利率插入，但在此之后添加了元素，因此表保留其行/列。

这是我的代码，因为我的解释可能不是很清楚：

```
<form id="form">        
    <label for="interestInput" id="interestRateLabel">Enter interest rate</label>
    <input id="interestInput" name="interestRate" type="text">
    <a href="#" id="addInput">Add another interest rate</a><br /><br />

    <label for="loanAmtInput" id="loanAmtLabel">Enter loan amount</label>
    <input id="loanAmtInput" name="loanAmt" type="text">

    <button onclick="doCalculation(); return false;">Calculate!</button>
</form>

<div id="standard">
    <h1>Standard Repayment</h1>
    <table width="600px;" border="1" cellspacing="0" cellpadding="0">
         <th scope="col">&nbsp;</th>
            <tr id="totalMonths">
               <th scope="row">Total months</th>
            </tr>
            <tr id="paymentPerMonth">
               <th scope="row">Payment/mo</th>
            </tr>
            <tr id="totalPayment">
               <th scope="row">Total payment</th>
            </tr>
    </table>
</div>  

<div id="extended">
    <h1>Extended Repayment</h1>
    <table width="600px;" border="1" cellspacing="0" cellpadding="0">
         <th scope="col">&nbsp;</th>
            <tr id="totalMonths">
               <th scope="row">Total months</th>
            </tr>
            <tr id="paymentPerMonth">
               <th scope="row">Payment/mo</th>
            </tr>
            <tr id="totalPayment">
               <th scope="row">Total payment</th>
            </tr>
    </table>
</div>

<div id="graduated">
    <h1>Graduated Repayment</h1>
    <table width="600px;" border="1" cellspacing="0" cellpadding="0">
         <th scope="col">&nbsp;</th>
            <tr id="totalMonths">
               <th scope="row">Total months</th>
            </tr>
            <tr id="paymentPerMonth">
               <th scope="row">Payment/mo</th>
            </tr>
            <tr id="totalPayment">
               <th scope="row">Total payment</th>
            </tr>
    </table>
</div> 
```

而且，这是相关的JS：

```
var doCalculation = function() {

$("div#standard table tbody th.rates, div#standard table tbody tr#totalMonths td, div#standard table tbody tr#paymentPerMonth td").remove();

var loanAmount = document.getElementById("loanAmtInput");

$("input[name=interestRate]").each(function(i){

    var num = parseInt( $(this).val(), 10 );
    var totalMonths = num * 3;
    var paymentPerMonth = num + (1/2);
    var totalPaymet = num * 120;

    console.log(i + "=" + num);

     $("div#standard table tbody th[scope=col]").before("<th class=rates>" + num + "% interest rate</th>");
     $("div#standard table tbody tr#totalMonths").append("<td>" + totalMonths + "</td>");
     $("div#standard table tbody tr#paymentPerMonth").append("<td>" + paymentPerMonth + "</td>");
});
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:33:03.543

它以相反的顺序进行，因为 JQuery 依次执行每个操作 - 所以在一种情况下，它`before()`在每个元素上运行，而在另一种情况下，它正在运行`after()`。获得你真正想要的东西的方法是从`<th>`、grab开始`next()`，然后在上面运行`before()`。如果在 之后没有（或可能没有）任何元素`<th>`，则创建一个虚拟元素，将其`after()`插入`<th>`，插入要插入`before()`虚拟元素的元素，然后删除虚拟元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:32:47.600

如果我了解您的困惑在哪里，那是因为 .before() 和 .after() 彼此相反。

来自 jQuery API 文档：

> .before() - 在匹配元素集中的每个元素之前插入由参数指定的内容。
> 
> .after() - 在匹配元素集中的每个元素之后插入由参数指定的内容。

[在http://api.jquery.com/](http://api.jquery.com/)上阅读更多内容

# sql - 使用 MAX 和 GROUP BY 的相关子查询

> ID：13500633
> 
> 赞同：0
> 
> 时间：2012-11-21T19:26:44.720
> 
> 标签：sql, database, ms-access, group-by, correlated-subquery

我有一个包含表格的数据库：车辆（一辆蓝色本田思域，售价 3 万美元）、品牌（本田）和模型（思域）。

我正在尝试创建一个**相关的子查询**，它将为我提供每个品牌中价格最高的汽车的 VEH_ID。

简单地说，我想知道所有品牌的汽车成本最高。

我已经附上了一张图片，我正在尝试使用 SQL，但它不起作用。很可能是因为我不知道我在做什么。 ![在此处输入图像描述](../Images/edb3be00169cd6524bc667c433145554.png)

```
SELECT 
BRAND.BRAND_ID, BRAND_NAME, VEHICLE.MODEL_ID, VEH_ID
FROM BRAND, MODEL, VEHICLE
WHERE VEH_PRICE = 
( 
SELECT MAX(VEH_PRICE)
FROM VEHICLE
)
GROUP BY BRAND.BRAND_ID, BRAND_NAME, VEHICLE.MODEL_ID, VEH_ID; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:37:15.697

create a new query on the `vehicles` table grouping by `brandID` to determine the `max(price)`

```
SELECT brandID, MAX(VEH_PRICE)
FROM VEHICLE
group by brandID 
```

then create another query that uses the first one joined back to `vehicles` to determine the related `vehicleID`

```
SELECT 
v.BRAND_ID, MODEL_ID, VEH_ID

FROM VEHICLE v inner join
(    SELECT brandID, MAX(VEH_PRICE) as max_veh_price
    FROM VEHICLE
    group by brandID) m on
v.brandid = m.brandid and
v.veh_price = m.max_veh_price 
```

then, to get the `brand_name`, join again to your `brand` table on the `brandID` field, and yes, if max(price) returns more than one vehicle, you'll have to go with Top 1 at Roman suggests.

sorry, couldn't read your images at first.

yes, you need to join the model table to vehicle to get to the brandID. I'm assuming this is an exercise and you're supposed to learn about joins as a result? don't just take a solution, then, understand each piece individually.

# django - Django 测试 - 发送电子邮件失败

> ID：13500637
> 
> 赞同：1
> 
> 时间：2012-11-21T19:26:52.590
> 
> 标签：django, testing

我在 Django 1.4 中有一个简单的函数，可以发送邮件。这被放在一个 try/except 中，以防邮件服务可能关闭（这是一个外部依赖项）。

现在，我想测试这个异常。我认为这很简单，通过覆盖一些电子邮件设置（如 settings.EMAIL_HOST 或 settings.EMAIL_BACKEND），但即使后端配置了乱码，Django 测试框架也不会导致 send_mail() 抛出错误......

所以问题是：**如何让 send_mail() 在我的测试用例中抛出错误？**

谢谢！

* * *

回答：

```
import mock
class MyTestCase(TestCase):
    @mock.patch('path.to.your.project.views.send_mail', mock.Mock(side_effect=Exception('Boom!')))
    def test_changed_send_mail(self): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:36:11.543

是的，测试套件不设置电子邮件系统。不幸的是，我不知道有什么方法可以测试电子邮件系统。

您不应该真正测试 send_mail 函数，因为它是内置的。也就是说，您可以验证通过另一个函数传递到 send_mail 的数据。如果您知道预期输入的域，您可以验证并抛出（引发）您自己的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:38:38.950

[https://docs.djangoproject.com/en/1.4/topics/email/#the-emailmessage-class](https://docs.djangoproject.com/en/1.4/topics/email/#the-emailmessage-class)

这是发送电子邮件的更 django'y 方式：

```
# attempt to send out a welcome email
try :
    t = loader.get_template('email_templates/membership/register.html')
    c = Context({
        'user'  : user,
        'site'  : Site.objects.get(id=settings.SITE_ID)
    })

    msg = EmailMessage('Welcome to Site', t.render(c), settings.EMAIL_HOST_USER, to=[user.email,])
    msg.content_subtype = "html"
    msg.send()
except :
    messages.info(request, _(u'Our email servers are encountering technical issues, you may not recieve a welcome email.')) 
```

在我的 settings.py 中：

```
import os
EMAIL_HOST_USER = os.environ['SENDGRID_USERNAME']
EMAIL_HOST= 'smtp.sendgrid.net'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
EMAIL_HOST_PASSWORD = os.environ['SENDGRID_PASSWORD'] 
```

注意：SENDGRID_USERNAME 和 SENDGRID_PASSWORD 是由 heroku 插件添加为环境变量的，您可能在设置文件中嵌入了实际凭据，这很好。

那么为什么您的电子邮件没有抛出异常？[https://docs.djangoproject.com/en/1.4/topics/email/#django.core.mail.get_connection](https://docs.djangoproject.com/en/1.4/topics/email/#django.core.mail.get_connection)

> fail_silently 参数控制后端应如何处理错误。如果 fail_silently 为 True，则电子邮件发送过程中的异常将被静默忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:40:02.300

我不是测试专家，但我认为您应该使用 send_mail 模拟来引发您要测试的异常。

可能你可以看看[这个 stackoverflow question](https://stackoverflow.com/questions/2899303/what-mock-object-framework-should-i-use-when-developing-in-python-on-the-google)来了解更多关于在 Django 中模拟的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-29T10:06:41.307

[http://www.voidspace.org.uk/python/mock/patch.html#where-to-patch](http://www.voidspace.org.uk/python/mock/patch.html#where-to-patch)上的补丁文档详细解释了如何进行此操作。

我注意到答案确实在问题中，但为了帮助其他人了解问题所在，上面的链接将被证明是非常有见地的。

如果要修补 class 中的对象引用`b.py`，请确保您的修补调用模拟对象引用，`b.py`而不是`a.py`从导入对象的位置。对于习惯于将函数作为一等公民的整个想法的 Java 开发人员来说，这可能是一个绊脚石。

# sql - SQL有多少条记录以相同的字母开头

> ID：13500638
> 
> 赞同：2
> 
> 时间：2012-11-21T19:26:51.913
> 
> 标签：sql, sql-server

所以我在A列的数据库中有数千条记录。

我想看看有多少以字母表中的每个字母和所有单个数字开头。

所以我需要一个计数和与之相关的字母。我还想查看所有两个字母数字组合，即 aa ab ac ad ae 等及其计数。

还有三个和四个字符等。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T19:28:45.943

您通常可以`GROUP BY`使用类似的表达式`LEFT(columnname, 1)`，它允许您执行`COUNT()`按任意表达式分组的聚合。要使用的最理想的子字符串函数可能取决于您的 RDBMS。

```
SELECT
  UPPER(LEFT(columnname, 1)) AS first_char,
  COUNT(*)
FROM yourtable
GROUP BY UPPER(LEFT(columnname, 1))
ORDER BY first_char ASC 
```

同样，要获得 2 个字符匹配

```
SELECT
  UPPER(LEFT(columnname, 2)) AS first_2char,
  COUNT(*)
FROM yourtable
GROUP BY UPPER(LEFT(columnname, 2))
ORDER BY first_2char ASC 
```

`GROUP BY`一些 RDBMS 将允许您在而不是完整表达式中使用列别名，如简化的`GROUP BY first_char`.

请注意，我已将它们大写，因此`Ab, AB, ab, aB`如果您使用区分大小写的排序规则，则不会获得单独的匹配项。（但我相信 SQL Server 默认使用*不区分大小写*的排序规则）

# google-maps-api-3 - 使用地图 API 生成错误的地址

> ID：13500639
> 
> 赞同：0
> 
> 时间：2012-11-21T19:26:54.540
> 
> 标签：google-maps-api-3

直到今天我一直在使用谷歌地图 API 很长一段时间都没有问题。我有一个未使用 API 映射的地址，但如果我访问 maps.google.com，则会找到并显示该地址。

通过以下方式获得对 google maps API 的引用：

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

我的代码如下，输入的值是：

**发件人**是我的地址

**结束**地址是：3601 Wetumpka Hwy, Montgomery, AL 36110

**航点**是 []。

该错误发生在**I.getSouthWest**函数中，因为“c 未定义”（如使用 Firebug 的 Firefox 中所报告的）。

正如我所说，这已经好几个月了，只是这个单一的地址会导致问题。有任何想法吗？您需要任何进一步的信息吗？笏可能导致问题？

```
 var request = {
        origin: from,
        destination: end,
        waypoints: waypts,
        optimizeWaypoints: true,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    // this line generates error
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        var route = response.routes[0];
        if(save==0){
            customPanel(map,"map_canvas",route,document.getElementById("path"));
            drawCircles(route, map);
            showRates(branch,endZip,ctr++,document.getElementById('ttlDistance').value,0,0,doProcess);
        }
        else{
           // var id_ele = document.getElementById('routeID').value;
            showRates(branch,endZip,ctr++,document.getElementById('ttlDistance').value,1,id,doProcess);
        }
      }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:12:12.320

由于您使用相同的原点（从）位置，因此最好使用坐标而不是地址。

```
var origin = new google.maps.LatLng(32.444526, -86.214974)//Your address 
```

*origin（必需）指定计算方向的起始位置。该值可以指定为字符串（例如“Chicago, IL”）或 LatLng 值*。从[文档](https://developers.google.com/maps/documentation/javascript/directions#DirectionsRequests)

# c# - Linq 的执行顺序是这个 catch 的原因吗？

> ID：13500641
> 
> 赞同：1
> 
> 时间：2012-11-21T19:26:56.143
> 
> 标签：c#, linq, deferred-execution

我有这个功能来重复一个序列：

```
public static List<T> Repeat<T>(this IEnumerable<T> lst, int count)
{
    if (count < 0)
        throw new ArgumentOutOfRangeException("count");

    var ret = Enumerable.Empty<T>();

    for (var i = 0; i < count; i++)
        ret = ret.Concat(lst);

    return ret.ToList();
} 
```

现在，如果我这样做：

```
var d = Enumerable.Range(1, 100);
var f = d.Select(t => new Person()).Repeat(10); 
int i = f.Distinct().Count(); 
```

我希望`i`是 100，但它给了我 1000！我的问题严格来说是为什么会发生这种情况？Linq 不应该足够聪明地找出我需要与 variable 连接的第一个选定的 100 人`ret`吗？我有一种感觉，当它与 a 一起使用时，它在..执行时`Concat`被优先考虑。`Select``ret.ToList()`

**编辑：**

如果我这样做，我会得到预期的正确结果：

```
var f = d.Select(t => new Person()).ToList().Repeat(10); 
int i = f.Distinct().Count(); //prints 100 
```

**再次编辑：**

我没有覆盖`Equals`. 我只是想获得 100 个独特的人（当然是通过参考）。我的问题是有人可以向我解释为什么 Linq 不先进行选择操作然后进行连接（当然是在执行时）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:33:44.723

问题是，除非您调用`ToList`，否则`d.Select(t => new Person())`每次遍历列表时都会重新枚举`Repeat`，从而创建重复`Person`的 s。该技术被称为[*延迟执行*](https://stackoverflow.com/a/7324095/335858)。

一般来说，`LINQ`不会假设每次枚举一个序列时都会得到相同的序列，甚至是相同长度的序列。如果这种效果不理想，您总是可以`Repeat`通过立即调用在您的方法中“实现”序列`ToList`，如下所示：

```
public static List<T> Repeat<T>(this IEnumerable<T> lstEnum, int count) {
    if (count < 0)
        throw new ArgumentOutOfRangeException("count");

    var lst = lstEnum.ToList(); // Enumerate only once
    var ret = Enumerable.Empty<T>();

    for (var i = 0; i < count; i++)
        ret = ret.Concat(lst);

    return ret.ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:32:06.130

我可以将我的问题分解为不那么琐碎的事情：

```
var d = Enumerable.Range(1, 100);
var f = d.Select(t => new Person()); 
```

现在基本上我正在这样做：

```
f = f.Concat(f); 
```

请注意，查询到现在还没有执行。在执行时`f`仍然`d.Select(t => new Person())` **未执行**。所以执行时的最后一条语句可以分解为：

```
f = f.Concat(f); 
//which is 
f = d.Select(t => new Person()).Concat(d.Select(t => new Person())); 
```

这显然会创建 100 + 100 = 200 个新的人员实例。所以

```
f.Distinct().ToList(); //yields 200, not 100 
```

这是正确的行为。

**编辑：我可以简单地重写扩展方法，**

```
public static IEnumerable<T> Repeat<T>(this IEnumerable<T> source, int times)
{
    source = source.ToArray();
    return Enumerable.Range(0, times).SelectMany(_ => source);
} 
```

我使用 dasblinkenlight 的建议来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:32:16.477

每个`Person`对象都是一个单独的对象。所有 1000 个都是不同的。

类型相等的定义是什么`Person`？如果您不覆盖它，该定义将是引用相等，这意味着所有 1000 个对象都是不同的。

# excel - Excel 公式错误：INDIRECT() 函数的参数太少

> ID：13500642
> 
> 赞同：0
> 
> 时间：2012-11-21T19:26:57.603
> 
> 标签：excel, excel-formula

在空白单元格中输入此公式后，我收到“您为此函数输入的参数太少”错误消息。

```
 RSQ(INDIRECT("data!"&CHAR(64+ROW())&"1:"&CHAR(64+ROW())&"30"&",data!$"&CHAR(64+ROW())&"1:$"&CHAR(64+ROW())&"30")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:52:51.873

`RSQ`需要 2 个范围作为参数。每个 INDIRECT 产生 1 个范围，因此需要 2 个范围来为函数提供参数。

`ROW()`由于它的行为方式，需要对函数进行额外的包装（有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/11124173/row-function-behaves-differently-inside-sum-and-sumproduct)）。

> =RSQ(INDIRECT("数据！"&CHAR(SUM(ROW())+64)&"1:"&CHAR(SUM(ROW())+64)&"30"),INDIRECT("数据！$"&CHAR (SUM(ROW())+64)&"1:$"&CHAR(SUM(ROW())+64)&"30"))

另外，我会再看一下您的方程式，因为它将比较相同的数据。
例如，在第 1 行中，它与 第 2 行中的值进行比较，它将与`A1:A30`也产生值的结果进行比较`$A1:$A30``1`
`B1:B30``$B1:$B30``1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:39:53.350

错误在于 RSQ 函数，我怀疑您需要两个 INDIRECT 函数，一个用于 known_ys，一个用于 known_xs

`=RSQ(INDIRECT("data!"&CHAR(64+ROW())&"1:"&CHAR(64+ROW())&"30"),INDIRECT("data!$"&CHAR(64+ROW())&"1:$"&CHAR(64+ROW())&"30"))`

# asp.net - ASP.NET CMS 的 SQL Server 登录

> ID：13500643
> 
> 赞同：1
> 
> 时间：2012-11-21T19:27:09.403
> 
> 标签：asp.net, sql-server, iis-7

我们已经完成了使用 ASP.NET 开发自定义 CMS。CMS 将在 IIS 中设置数百到数千次（每个域一个）。CMS 使用 SQL Server 存储页面内容、设置等。

我们应该为每个网站创建一个新的 SQL Server 登录名（使用 SQL 身份验证）还是应该为所有网站使用相同的登录名？

对此的任何想法将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:41:39.433

如果您要为每个实例配置单独的 CMS 和 DB 遇到麻烦，那么您应该为每个实例创建一个单独的 sql 登录。

通过这种方式，您可以为设计增加一层安全性（并且会增加您本已地狱般的维护成本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:50:58.227

It would seem safer to let each site have it's own login.

That way you can't look at the wrong content database by accident (or mischief).

I would advise using Windows Authentication in SQL. It is easier to set up, and doesn't require storing passwords in web.config files.

You can further restrict this user account for security purposes.

Also don't let these user accounts use the same passwords, that screams insecurity.

# regex - 发现信用卡的正则表达式

> ID：13500648
> 
> 赞同：11
> 
> 时间：2012-11-21T19:27:41.197
> 
> 标签：regex

我已经阅读了[这个问题](https://stackoverflow.com/questions/72768/how-do-you-detect-credit-card-type-based-on-number/)，但是对于 Discover 卡，起始数字`6011, 622126-622925, 644-649, 65`不仅仅是`6011, 65`. （[来源](http://en.wikipedia.org/wiki/Bank_card_number)）

对于发现卡，我从那个问题中选择了这个正则表达式`^6(?:011|5[0-9]{2})[0-9]{12}$`

我对其进行了修改，以覆盖`6011`&`644-649`但是`65`，`622126-622925`构建正则表达式很难，因为我的正则表达式技能很差。

到目前为止`6(?:011|5[0-9]{2}|[4][4-9][0-9]|[2]{2}[1-9])[0-9]{2}$`，我有这个正则表达式，但它只检查`622[1-9]**`.

如何修改它以使其仅在`622126-622925`for `622***`case 之间接受？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T19:44:58.693

这是您的正则表达式[（演示）](http://rubular.com/r/FXWY8ND0C9)：

```
^6(?:011\d{12}|5\d{14}|4[4-9]\d{13}|22(?:1(?:2[6-9]|[3-9]\d)|[2-8]\d{2}|9(?:[01]\d|2[0-5]))\d{10})$ 
```

不用说，我不会说这很漂亮或易于维护。我建议将数字解析为整数并使用您的编程语言进行检查。

您还应该使用[Luhn 算法](http://en.wikipedia.org/wiki/Luhn_algorithm)来检查信用卡号码是否有效，虽然*理论上*您可以使用正则表达式来执行此操作，但它会比这更糟糕。

* * *

请允许我一步一步地向你展示我是如何到达这个怪物的。首先，这里是你如何匹配每个范围：

```
6011        # matches 6011
65          # matches 65
64[4-9]     # matches 644-649
622(1(2[6-9]|[3-9]\d)|[2-8]\d{2}|9([01]\d|2[0-5]))  
            # matches 622126-622925 
```

现在，您要匹配其余的数字：

```
6011\d{12}        # matches 6011 + 12 digits
65\d{14}          # matches 65 + 14 digits
64[4-9]\d{13}     # matches 644-649 + 13 digits
622(1(2[6-9]|[3-9]\d)|[2-8]\d{2}|9([01]\d|2[0-5]))\d{10}
                  # matches 622126-622925 + 10 digits 
```

现在您可以组合所有四个，并添加行锚的开始和结束：

```
^(                  # match start of string and open group
 6011\d{12}|        # matches 6011 + 12 digits
 65\d{14}|          # matches 65 + 14 digits
 64[4-9]\d{13}|     # matches 644-649 + 13 digits
 622(1(2[6-9]|[3-9]\d)|[2-8]\d{2}|9([01]\d|2[0-5]))\d{10}
                    # matches 622126-622925 + 10 digits
)$                  # close group and match end of string 
```

上面的最终产品是先前正则表达式的略微压缩版本，我还使组不捕获（这就是它们`?:`的用途）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:35:59.803

Here are your options:

1.  Hack your way through it and build a really complicated regex. Regexes are not suited for this sort of integer comparison so what you come up with will necessarily be long, uncomplicated and unmaintainable. See [Regex for number check below a value](https://stackoverflow.com/questions/5647804/regex-for-number-check-below-a-value) and similar SO questions on this topic.
2.  Use integer comparison in your code.

For reference one such said complicated regex would be

`62212[6-9]|6221[3-9]|622[1-8]|62291|62292[1-5]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T08:47:52.287

即使这张票是 3 年前的，我也遇到了同样的任务，想分享一个 622126-622925 的正则表达式 :)

```
^(622[1-9]\\d(?<!10|11|9[3-9])\\d(?<!12[0-5]|92[6-9])\\d{10})$ 
```

它使用零宽度负向后查找来排除不期望的数字

# bash - 如何从 shell 脚本中的变量运行命令

> ID：13500650
> 
> 赞同：2
> 
> 时间：2012-11-21T19:27:44.430
> 
> 标签：bash, shell, sh

将命令分配给shell脚本中的某个变量后如何运行命令？示例：command_name=echo

现在，有没有办法使用 "$command_name hello world" 而不是 "echo hello world" ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:32:18.567

是的。确切的代码 ( `$command_name hello world`) 将起作用。

确保引号（如果存在）仅放在命令名称和每个单独的参数周围。如果在整个字符串周围加上引号，它会将整个字符串解释为命令名称，这不是您想要的。

例如：

```
command_name="echo"
$command_name hello world 
```

将被解释为：

```
echo hello world 
```

（有效），而：

```
command_name="echo"
"$command_name hello world" 
```

被解释为：

```
"echo hello world" 
```

这不起作用，因为它试图找到一个调用的命令，`echo hello world`而不是将 hello 和 world 解释为参数。

相似地，

```
command_name="echo hello world"
"$command_name" 
```

由于同样的原因失败，而：

```
command_name="echo hello world"
$command_name 
```

作品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:32:57.367

command_name='回声'

$command_name "你好世界"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T21:45:08.320

使用`bash`数组（当您有参数时这是最佳实践）：

```
commandline=( "echo" "Hello world" )
"${commandline[@]}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T19:39:06.080

您可以`eval`为此使用：

假设您有一个`input_file`具有以下内容的：

```
a        b             c  d e f   g 
```

现在在您的终端中尝试：

```
# this sed command coalesces white spaces
text='sed "s/ \+/ /g" input_file'

echo $text
sed "s/ \+/ /g" input_file

eval $text
a b c d e f g 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T19:31:51.140

```
#!/bin/bash
var="command"
"$var" 
```

在脚本文件中为我工作

# javascript - javascript显示单行视觉工作室

> ID：13500651
> 
> 赞同：6
> 
> 时间：2012-11-21T19:27:45.237
> 
> 标签：javascript, visual-studio-2010

我下载了一个js文件。

当我在 Visual Studio 2010 中打开它时，它会将文件显示为单行。如何格式化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:31:58.487

**你可以使用这个**：

[美化、解包或反混淆 JavaScript 和 HTML，使 JSON/JSONP 可读等。](http://jsbeautifier.org/)

# bash - 将 SED 限制为一行的前 10 个字符

> ID：13500653
> 
> 赞同：6
> 
> 时间：2012-11-21T19:27:57.560
> 
> 标签：bash, sed

我正在运行 sed 作为 shell 脚本的一部分，以清理绑定日志以插入数据库。

sed 命令之一如下：

```
sed -i 's/-/:/g' $DPath/named.query.log 
```

事实证明这是有问题的，因为它会破坏任何还包含破折号的资源请求（我使用 : 作为 awk 语句的分隔符）。

我的问题是如何将上面的 sed 命令限制为该行的前十个字符？我还没有看到一个特定的开关可以做到这一点，而且我对 RegEx 的使用还远远不够好，甚至无法开始开发一个有效的开关。我不能只使用正则表达式来匹配前面的数字，因为该模式可能是资源请求的一部分。哎呀，我什至不能对####-##-## 使用模式匹配，因为它可能是资源的一部分。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:36:56.617

使用 awk [几乎总是] 更简单：

```
awk '{target=substr($0,1,10); gsub(/-/,":",target); print target substr($0,11)}' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T05:54:17.303

我认为最短的解决方案，也许是最简单的解决方案是由 sed 本身提供的，而不是 awk[ward]：

```
 sed "h;s/-/:/g;G;s/\(..........\).*\n........../\1/" 
```

解释：

*   (h) 将所有内容复制到保存空间
*   (s) 进行替换（对整个模式空间）
*   (G) 附加保持空间，带`\n`分隔符
*   (s) 删除 后的第十个字符`\n`，但保留前十个字符。

一些测试代码：

```
 echo "--------------------------------" > foo
 sed -i "h;s/-/:/g;G;s/\(..........\).*\n........../\1/" foo
 cat foo
 ::::::::::---------------------- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T19:43:20.470

我不确定 make sed 本身是如何做到的，但是，我知道您可以输入 sed 前 10 个字符，然后将其余字符粘贴回去，如下所示：

`paste -d"\0" <(cut -c1-10 $DPath/named.query.log | sed 's/\-/:/g') <(cut -c11- $DPath/named.query.log)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T19:35:53.790

您可以执行以下操作：

```
cut -c 1-10 $DPath/named.query.log | sed -i 's/-/:/g' 
```

cut 语句只占用该文件中每行的前 10 个字符。其输出应通过管道传输到文件中。截至目前，它只会输出到您的终端

# unix - 库依赖工具

> ID：13500658
> 
> 赞同：12
> 
> 时间：2012-11-21T19:28:25.650
> 
> 标签：unix, shared-libraries, solaris, ldd, nm

我正在寻找平台上的/`tool`来检测和文件的依赖关系。`command``Unix``library``.so``.o`

我已经使用了`ldd`// `nm`，`truss`但我不知道检测库依赖关系的正确方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-21T21:45:15.703

这取决于“检测库依赖项”的确切含义。

该[`ldd`](http://linux.die.net/man/1/ldd)命令适用于共享库，而不仅仅是可执行文件。它将显示构建库时声明的共享库的依赖关系：

```
$ ldd /usr/lib/libgtk-3.so
    linux-vdso.so.1 (0x00007ffff8fff000)
    libgdk-3.so.0 => /usr/lib/libgdk-3.so.0 (0x00007f43fcf47000)
    libgmodule-2.0.so.0 => /usr/lib/libgmodule-2.0.so.0 (0x00007f43fcd43000)
    libpangocairo-1.0.so.0 => /usr/lib/libpangocairo-1.0.so.0 (0x00007f43fcb36000)
    libX11.so.6 => /usr/lib/libX11.so.6 (0x00007f43fc7fc000)
... 
```

库可以具有未定义的符号，这些符号是通过与未声明为依赖项的其他库链接而获得的。您可以使用[`objdump -T`](http://linux.die.net/man/1/objdump)或[`nm -D`](http://linux.die.net/man/1/nm)显示动态符号 - 未定义的符号（应该来自其他库的符号）将显示为`*UND*`：

```
$ objdump -T /usr/lib/libgtk-3.so | head

/usr/lib/libgtk-3.so:     file format elf64-x86-64

DYNAMIC SYMBOL TABLE:
0000000000066e38 l    d  .init  0000000000000000              .init
0000000000000000      DF *UND*  0000000000000000              g_param_spec_object
0000000000000000      DF *UND*  0000000000000000              g_utf8_validate
0000000000000000      DF *UND*  0000000000000000              g_date_get_month
0000000000000000      DF *UND*  0000000000000000              g_bookmark_file_get_visited
0000000000000000      DF *UND*  0000000000000000              g_value_get_float 
```

从这些符号名称中应该可以推断出未声明的库依赖关系。

使用[`pkg-config`](http://linux.die.net/man/1/pkg-config)或类似配置机制的库有时无法在构建时声明其依赖项，而是将依赖项声明为`pkg-config`，依赖库用户使用工具获取依赖项。`pkg-config --libs`将以编译器理解的格式列出依赖项：

```
$ pkg-config --libs gtk+-3.0
-lgtk-3 -lgdk-3 -latk-1.0 -lgio-2.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo-gobject -lpango-1.0 -lcairo -lgobject-2.0 -lglib-2.0 
```

# c# - 按 Lambda 表达式选择并检查 Null 值

> ID：13500659
> 
> 赞同：0
> 
> 时间：2012-11-21T19:28:30.453
> 
> 标签：c#, .net, entity-framework

```
public List<CompanyRatingInfo> GetTopCompanies()
        {
            return objectContext.Companies.OrderBy(c => c.Reviews.Sum(r => r.Rating))
                .Select(co => new CompanyRatingInfo()
                {
                    CompanyID = co.CompanyID,
                    CompanyName = co.Name,
                    CreateDate = co.CreateDate,
                    Logo = co.Logo,
                    Rating = co.Rating ?? 0,
                    ReviewsCount = (co.Reviews != null ? co.Reviews.Count : 0),
                    WebSite = co.Website
                }).ToList();
        } 
```

错误： **无法比较“System.Data.Objects.DataClasses.EntityCollection`1”类型的元素。仅支持原始类型（例如 Int32、String 和 Guid）和实体类型。**

我如何`ReviewsCount`通过检查 co.Reviews != null 获得？

```
`Company` has many `Reviews` which has `Rating` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:36:25.197

It should be `co.Reviews.Count()`. Count is a method.

# java - Java：XML 对象

> ID：13500661
> 
> 赞同：2
> 
> 时间：2012-11-21T19:28:38.997
> 
> 标签：java, xml

我正在制作简单的点对点游戏，我决定使用 XML 通过套接字发送信息（下面的示例）。但是不知道怎么寄？我应该简单地使用 `ObjectOutputStream.writeObject(obj)`和作为我的示例中的参数使用`object`？ **我主要是在问，通过套接字发送 XML 对象看起来如何正确。**

```
import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;

public class SendIPObject {
    public static void main(String[] args) throws Exception {
        JAXBContext context = JAXBContext.newInstance(IPSender.class);

        Marshaller m = context.createMarshaller();
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

        Player object = new Player();
        object.setID(0);
        object.setIP("192.167.211.167");

        m.marshal(object, System.out);

    }
}

import java.io.Serializable;

abstract public class Player implements Serializable{
    private String ip;
    private int id;

    public String getIP() {
        return ip;
    }

    public int getID() {
        return id;
    }

    public void setIP(String ip) {
        this.ip = ip;
    }

    public void setID(int id) {
        this.id = id;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:40:42.853

XML 以纯字符串形式发送。所以第一步是创建可以相互发送和接收字符串的客户端，例如“Hello, world.”。接下来，您需要创建一个对象并使用 JAXB 转换为 String 并发送。比在其他客户端接收它并再次使用 JAXB。通过这种方式，您可以轻松调试发送和接收的内容。完成后，您可以尝试避免转换为临时 xml 字符串，并直接在编组和解组时使用套接字流。
我认为您不应该使用`ObjectOutputStream`，因为它将对象序列化为字节数组。但是您需要将您的对象“序列化”为 XML（字符串）并发送它。
在这里您可以看到如何将对象编组为 java `String`：[我想将输出流转换为字符串对象](https://stackoverflow.com/questions/2472155/i-want-to-convert-an-output-stream-into-string-object)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:00:28.370

如果发送方和接收方都是基于 java 的，您实际上可以跳过来回转换为 xml，然后将对象发送过来`ObjectInputStream`。这本质上是使用 xml 的替代方法。如果你愿意，你也可以`ObjectInputStream`在`String`课堂上使用。

我将您的`Player`课程稍微更改为具体，并添加了一个 toString() 方法来显示两端收到的内容。

这是客户端的外观：

```
public class Client {

    public static void main(String[] args) throws UnknownHostException, IOException {

        Player player = new Player("192.168.1.10", 1);
        //create connection
        Socket sock = new Socket("127.0.0.1", 8080);
        //get teh output stream to send in over
        ObjectOutputStream cout = new ObjectOutputStream(sock.getOutputStream());
        //send it 
        System.out.println("Sending: "+player.toString());
        cout.writeObject(player);
        //close connection
        sock.close();
        System.out.println("Closed");
    }

} 
```

这是服务器的外观：

```
public class Server {

    public static void main(String[] args) throws IOException {
        ServerSocket serverSocket = new ServerSocket(8080);
        while (true) {
            try {
                System.out.print("\nserver>> ");

                // listen for connection from client
                Socket sock = serverSocket.accept();
                System.out.println("CONNECTION ACCEPTED");

                ObjectInputStream sin = new ObjectInputStream(sock.getInputStream());

                //read the player in
                Player player = (Player) sin.readObject();
                System.out.println("from Client>> " + player.toString());

                // close the connection
                sock.close();
                System.out.println("server>> CONNECTION CLOSED");
                System.exit(0);
            } catch (Exception e) {
            }
        }
    }    
} 
```

# android - 使用 ZXing 在 android 上进行 QR 解码

> ID：13500665
> 
> 赞同：0
> 
> 时间：2012-11-21T19:28:52.307
> 
> 标签：android, qr-code

谁能指导我如何做到这一点。到目前为止，我知道我可以创建一个意图，然后调用“com.google.zxing.client.android.SCAN”操作，但这仅适用于条形码，我需要使用 QR 码来实现它，任何人都可以指导我在正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:41:15.640

我认为您需要添加的只是 QR 意图的额外内容

```
intent.putExtra("SCAN_MODE", "QR_CODE_MODE"); 
```

但是，对您的答案的评论是正确的，没关系。这只会使扫描速度更快一些

干杯

# android - 显示来自另一个 Activity 的 ImageView

> ID：13500666
> 
> 赞同：0
> 
> 时间：2012-11-21T19:28:55.190
> 
> 标签：android, android-imageview

这是否可以使用 ImageView 元素创建一个新的活动（我们称之为“ImageActivity”），并且在我需要在许多地方（活动）显示相同图像的情况下，只需从“ImageActivity”继承这个图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:00:30.283

您可以将图像放置在独立的 xml 布局中，并将该布局作为所有活动布局的一部分。[请参阅此处](http://developer.android.com/training/improving-layouts/reusing-layouts.html)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:39:07.027

> 我需要在很多地方显示相同的图像（活动）

您可以使用相同的布局片段在所有 Activity 中创建具有相同设置的 ImageView，并将指向启动每个 Activity 的 Bundle 中的图像的数据传递。

只需使用 LayoutInflater 或 LayoutInflater 将代码段添加到每个 Activity `<merge>`，然后使用`R.drawable.*`、本地文件、URL 等将相同的图像加载到此布局中。

# java - 没有 .jnlp 扩展名的 jnlp 文件？jnlp 负责启动沙箱吗？

> ID：13500667
> 
> 赞同：0
> 
> 时间：2012-11-21T19:29:05.690
> 
> 标签：java, javascript, jnlp, java-web-start

如果 jnlp 是用 xml 编写的，那么我们可以拥有扩展名为 .xml 且没有任何 jnlp taf 的 jnlp 文件吗？哪个 javascript 方法负责启动沙箱？可能是 createWebStartLaunchButton: function(jnlp) 还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:47:44.590

deployJava 脚本中的 createWebStartLaunchButton 确实只是创建了一个按钮，单击该按钮时会执行确保 JRE 已安装并允许浏览器下载和打开 jnlp 文件的 javascript 函数。

DeployJava 文档：[http ://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit)

当 jnlp-file 由 jnlp-file-type 的 os-default-handler（通常是 windows 上的 javaws.exe）打开 jnlp-file 时，启动“沙箱”或更确切地说是 jvm

如果 jnlp 文件在服务器上存储为 .xml 文件，则很可能是 servlet 或其他等价物通过设置 response-type 为其内容提供服务

```
response.setContentType("application/x-java-jnlp-file"); 
```

这有助于浏览器确定应如何打开提供的文件。

# java - 并发 - foreach 循环中的非阻塞设计

> ID：13500670
> 
> 赞同：2
> 
> 时间：2012-11-21T19:29:16.333
> 
> 标签：java, multithreading, concurrency, future

我正在开发一个返回`List<Response>`对象的服务。

有两种对象可以构建响应。其中一个从内部数据中填充内容，另一个伸出服务并获取数据。

```
for(Item item : items){
   if(item is external){
     call service and get result and populate Response and add to List
   }

   if(item is internal)
   {
     populate response object and add to list
   }
} 
```

当前的 impl 是程序性的和阻塞的，我想要的是一个非阻塞设计，这样，如果项目是外部的，则触发调用并继续列表中的下一个项目。然后当循环完成时，我可以等待所有完成。

什么是这样做的好方法？我也在考虑为每个职责创建单独的类。

**编辑：**引入的原因是减少延迟命中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:38:29.880

[`ExecutorCompletionService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)（带有记住提交任务的回调的线程池）看起来像一个傻瓜：

```
CompletionService<Response> executorService = 
    new ExecutorCompletionService<>(Executors.newFixedThreadPool(10));
int totalExternal = 0;

for(Item item : items){
    if(item is external){
        executorService.submit(externalCall(item));
        ++totalExternal;
    }

    if(item is internal){
        populate response object and add to list
    }
}

for (int i = 0; i < totalExternal; ++totalExternal) {
    addAsynchResultToResponseList(executorService.take().get());
} 
```

为清楚起见`externalCall(item)`，定义如下：

```
Callable<Response> externalCall(Item item) {
  return new Callable<Response>() {
    //...
  }
} 
```

显然，一旦你异步，结果列表可以有任意顺序。

* * *

另一种方法是使用普通`ExecutorService`的并有一个中间的`List<Future<Response>>`. 诀窍是使用[`AsyncResult`](http://docs.oracle.com/javaee/6/api/javax/ejb/AsyncResult.html)包装器来包装内部响应（它创建`Future`立即完成并返回传递的值）。

```
List<Future<Response>> futures = new ArrayList<>();
for(Item item : items){
    if(item is external){
        futures.add(executorService.submit(externalCall(item)));
    }

    if(item is internal){
        futures.add(new AsyncResult(synchResponse));
    }
} 
```

现在您可以简单地迭代`futures`. `AsyncResult`将立即返回，因为该值在创建时已经是计算机 ( `synchResponse`)。但是您将不得不等待`Future`从线程池返回的 s 。

请记住，这`Future.get()`允许您检索原始异常。此外，`Future`列表中 s 的顺序与原始项目的顺序相同，因此如果第 n 个`Future`失败，则`items`列表中的第 n 个项目是原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:32:00.770

我要做的是将所有操作包装在`Callable`s 中，将它们提交给 s，将`ExecutorService`返回`Future`的 s 存储在列表中。

然后当他们都完成后，在主线程中填充结果列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:37:49.557

当项目在外部时，为了让事情继续进行，操作`call service`应该启动某种异步活动（例如，a`Thread`或`Runnable`提交到某种`Executor`）。这个活动应该有一个回调机制，以便`get result`完成后，它可以执行任务的最后一部分：`populate Response and add to List`。

您必须同步访问`List`或将所有访问安排为单线程。

# web-frameworks - 是否有用于创建评论/评级网站的网络框架？

> ID：13500672
> 
> 赞同：-4
> 
> 时间：2012-11-21T19:29:21.947
> 
> 标签：web-frameworks, review, rating-system

我正在寻找创建诸如mouthshut.com 之类的东西，用户可以在其中对产品和服务进行评分。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:38:02.167

您可以使用任何可用的网络框架创建一个评论/评级网站...

重要的是你喜欢用什么编程语言来构建它。

例如：
Python：Web2py，Django
Java/Scala：Play2，
PHP：YII

一个很好的起点：[http ://en.wikipedia.org/wiki/Comparison_of_web_application_frameworks](http://en.wikipedia.org/wiki/Comparison_of_web_application_frameworks)

# flash - 在 Mac 投影仪应用程序中控制 Flash Player 版本？

> ID：13500685
> 
> 赞同：0
> 
> 时间：2012-11-21T19:30:02.380
> 
> 标签：flash, flash-cs6

我正在使用 Flash CS6 构建一个 Mac 投影仪应用程序。该应用程序在 OS X 10.5.8 上崩溃，我认为这是因为投影仪包含 Flash Player 11.4，它只能在 OS X 10.6+ 上运行。

我的问题是：如何控制投影仪应用程序中嵌入的播放器版本？

我尝试在发布设置中针对 Flash Player 10.3 和 9，但据我猜测，这只会更改用于编译 movie.swf 的 playerglobal.swc 的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:14:15.500

在任何较旧的独立播放器中打开纯 SWF，然后从那里另存为投影仪。[这里](https://stackoverflow.com/questions/9183268/is-there-a-way-to-publish-a-as3-based-flash-projector-that-will-run-on-a-powerpc)有一个类似的老问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T15:06:39.043

稍加修改后，解决方案似乎相当简单：投影仪中嵌入的播放器是 Flash IDE 安装目录中播放器的副本（即，`/Applications/Adobe Flash CS6/Players/Flash Player`）。[我用Adob​​e Flash Player 下载](http://www.adobe.com/support/flashplayer/downloads.html)的 10.3 版本替换了该文件，我的 Mac 应用程序嵌入了 10.3 播放器。

# apache - 406 Not Acceptable error GET 参数问题？

> ID：13500686
> 
> 赞同：0
> 
> 时间：2012-11-21T19:30:08.720
> 
> 标签：apache, .htaccess, http-status-codes, http-status-code-406

谁能告诉我为什么以下 URL 返回 406 错误：

```
http://kolek.to/functions/remote-upload.php?url=http%3A%2F%2Fben-major.co.uk%2Fhosting%2Fbm-equipment%2Faxe-2.jpg&item_id=2 
```

删除`?url=`参数似乎使一切正常：

```
http://kolek.to/functions/remote-upload.php?item_id=2 
```

供大家参考，内容`remote-upload.php`如下：

```
<?php
require_once('../models/api.php');
$request_url = urldecode($_REQUEST['url']);
$item_id = $_REQUEST['item_id'];
echo $item_id;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:50:43.343

我认为这是由于来自您的服务器的安全过滤器（我在响应标头中看到的是 Apache）。

`mod_security`在您的情况下，默认情况下是打开的Apache 。虽然您可以通过在服务器上运行以下命令来使用以下命令来诊断问题（关闭过滤器应该可以解决问题）：

```
SecFilterEngine off 
```

但是这样做只是为了检查问题是否是安全过滤器，我不鼓励关闭过滤器（注入和垃圾邮件攻击的危险）。

如果您发现这是导致问题的过滤器，请尝试将您的请求放入白名单：在 [这里](https://github.com/SpiderLabs/ModSecurity/wiki/Reference-Manual)您可以找到指南，[这里](https://modsecurity.org/)是主网站。

# c# - IsSerializable 为标记为 Serializable 的对象返回“false”

> ID：13500689
> 
> 赞同：3
> 
> 时间：2012-11-21T19:30:18.673
> 
> 标签：c#, .net, serializable

我正在尝试序列化一个 DenseMatrix 对象，该对象是 MathNET Numerics 项目中提供的一个对象。

[密集矩阵.cs](http://mathnetnumerics.codeplex.com/SourceControl/changeset/view/0c1b688a62b2#src/Numerics/LinearAlgebra/Double/DenseMatrix.cs)

下面我提供了一些有用的信息。

*   我可以从对象资源管理器和 .NET 反射器中看到，这个类（以及这个类继承自的所有东西）被标记为 [Serializable]。

*   Attribute.IsDefined(typeof(MathNet.Numerics.LinearAlgebra.Double.DenseMatrix), typeof(SerializedAttribute)) 返回**true**。

*   typeof(MathNet.Numerics.LinearAlgebra.Double.DenseMatrix).IsSerializable 返回**false**

*   似乎 Mathnet.Numerics Matrix 系列中的所有内容都标记为 [Serializable]，尽管它们都显示出相同的不可序列化行为。

现在，当我尝试通过 BinaryFormatter 运行我的对象时，我得到一个 SerializationException“类型 MathNet.Numerics.LinearAlgebra.Double.DenseMatrix 未标记为可序列化”。

这里发生了什么？我知道 BinaryFormatter 直接查看 IsSerializable 属性，所以这就是它咳嗽的原因。那么为什么 IsSerializable 返回 false 呢？

**编辑**

该问题通常更多地针对 IsSerializable 的 .NET 实现，并且仅使用 The Mathnet 示例作为上下文。

**第二次编辑**

我认为增加混乱的是我使用的是 MathNet 的“便携式”库版本。为了使可移植库编译，他们创建了一个自定义的 SerializableAttribute，因为 System.SerializableAttribute 不适用于可移植库。使用 Mono 运行时，System.Type 会查找 System.SerializableAttribute，但只会查找 MathNet.SerializableAttribute。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:20:01.387

.NET 递归检查标记为 [Serializable] 的对象的所有成员，如果 [Serializable] 类的任何成员的类型也未标记为 [Serializable]，则 IsSerializable 返回 false。

上述情况的解决方案是简单地将属于 DenseMatrix 中的成员的类标记为 [Serializable]。

即 DenseColumnMatrixStorage

矩阵存储

# javascript - jQuery UI：如何打开/关闭另一个对话框打开的对话框？

> ID：13500690
> 
> 赞同：0
> 
> 时间：2012-11-21T19:30:19.703
> 
> 标签：javascript, jquery, jquery-ui, dialog, overwrite

**索引.php**

```
// load jquery.js and jquery.ui.js
$("#dialog_a").load("template_a.php").dialog();
$("#dialog_b").load("template_b.php").dialog(); 
```

**模板_a.php**

```
just HTML, no JS 
```

**模板_b.php**

```
// !!! -> load jquery.js and jquery.ui.js <- !!!
$("#dialog").load("template_c.php").dialog({modal:true}); 
```

如您所见，我加载了两个对话框。#dialog_a 仅加载没有任何功能的文本，但 #dialog_b 加载了一个独立脚本，其中再次包含 jquery 和 jquery.ui。

打开#dialog_b（通过锚点/onclick）后，无法访问index.php 中的对象（例如关闭对话框）。对我来说，template_b.php 似乎覆盖了 DOM。但我不知道如何解决这个问题。你有？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:59:19.240

解决方案：使用[jQuery live() 函数](http://api.jquery.com/live/)！

**索引.php**

```
$(".anchor_in_dialog_or_not_doesnt_matter").live("click", function() {
    $("#dialog").dialog();
}); 
```

**模板_b.php**

```
if ($_GET["standalone"])
    // load jquery, jquery.ui
endif; 
```

我希望它可以帮助某人！

**编辑**：正如下面已经提到的 adamb，使用 on() 而不是 live()！

# c++ - 如何比较 LPCSTR

> ID：13500691
> 
> 赞同：4
> 
> 时间：2012-11-21T19:30:20.320
> 
> 标签：c++, compare, lpcstr

我已经尝试过 strcmp 和 lstrcmp。我什至试图用 strlen 来做，但也没有用，这就是我所拥有的

```
void check(LPCSTR lpText)
{
    if( strmp(lpText, "test") == 0)
    {
        MessageBoxW(0, L"equal", 0, 0); 
    }
    else
    {
        MessageBoxW(0, L"not equal", 0, 0); 
    }
} 
```

无论如何它总是返回 1，如果重要的话，设置中的字符集也设置为使用多字节字符集。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T19:32:44.607

如果您使用宽字符串，请尝试将其与宽字符串文字进行比较：

```
if (lstrcmp(lpText, L"test") == 0) {
    // stuff
} 
```

编辑：您似乎使用了错误的字符编码。

# iphone - 当网络激活（并准备好播放）时，如何从 AVQueuePlayer/AVPlayerItem 获取回调？

> ID：13500693
> 
> 赞同：8
> 
> 时间：2012-11-21T19:30:25.223
> 
> 标签：iphone, ios, audio, avplayer, avqueueplayer

我有一个`AVQueuePlayer`需要在后台运行的基于音频流的播放器。播放器需要继续运行，直到播放完所有列表。当然，如果网络连接变坏，它将不得不暂停，但当网络连接恢复时，它应该会自动恢复。

为此，我正在监视

*   `AVPlayerItem.status`
*   `AVPlayerItem.playbackLikelyToKeepUp`
*   `AVPlayer.currentItem`
*   `AVPlayer.status`
*   `AVPlayer.error`

使用 KVO。例如，如果网络连接从临时错误中恢复，我预计`currentAVPlayerItem.status`会变成`AVPlayerStatusItemReadyToPlay`，这将报告给我的播放器，我可以`[AVQueuePlayer play]`在那个时候发出。

这种机制（逻辑）似乎在某些情况下有效，但在离线环境中非常频繁地`AVPlayerItem.status`变为，似乎自动跳过了`AVPlayerItemStatusFailed`哪个项目。`AVQueuePlayer`结果，队列最终将是空的，并且无法从 接收回调`AVPlayerItem`。

我希望`AVPlayer`当网络连接变坏/恢复时，某些属性会改变，但似乎没有任何改变（`status`等`error`）。

显然我可以监控`Reachability`，但是当应用程序在后台运行时这不起作用。

在这种情况下，我如何知道网络何时恢复并`AVQueuePlayer`可以再次播放？

我可能只是这个领域的新手。如果有人能给我一个大致的想法，他/她如何`AVQueuePlayer`在不被临时网络连接问题完全阻止的情况下获得持续的游戏体验，那也将是一个很棒的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-02T17:47:20.300

您可以监视`AVPlayerItemPlaybackStalledNotification`以了解项目何时完成播放其缓冲区而不是整个文件：

```
[[NSNotificationCenter defaultCenter] 
       addObserver:self
       selector:@selector(AVPlayerItemPlaybackStalledNotification:)                                                 
       name:AVPlayerItemPlaybackStalledNotification object:playerItem]; 
```

一旦有足够的缓冲区继续，您应该会收到一个通知`playbackLikelyToKeepUp`，听起来好像您已经在监视了。

# udp - 用于“玩具应用程序”的 UDP 广播、多播或单播

> ID：13500695
> 
> 赞同：1
> 
> 时间：2012-11-21T19:30:49.127
> 
> 标签：udp, ip, multicast

我正在寻找一个玩具应用程序供我个人使用（并可能与朋友分享），以实现本地网络上的点对点共享状态。例如，假设我想为您所在的当前建筑物的名称实现它（假设网络拓扑很奇怪，并且多个建筑物占用同一个 LAN）。这个想法是，如果您运行应用程序，您可以设置您所在的建筑物，并且您可以看到在本地网络上运行该应用程序的每个其他用户的建筑物。

**问题是，实现这一点的最佳传输/网络层技术是什么？**

我最初的想法是使用 UDP 多播，但我对它进行的研究越多，我就越害怕它：虽然这项技术很棒而且看起来很容易使用，但如果应用程序不是为特定站点部署量身定制的，它似乎也最有可能让愤怒的网络管理员访问您。

因此，我想知道，因为这是一个带宽相对较低的应用程序——每个客户端可能每 4-5 分钟左右最多更新一次，可能不超过 25-50 个客户端——它是否可能在许多情况下“更便宜”使用另一种策略的方法：

*   **多播**：找到一种方法从 239.255/16 中选择一个众所周知的多播地址，并在启动时让感兴趣的应用程序加入该组。
*   **广播**：每次某人的状态发生变化时发送一条 UDP 广播消息（并在应用程序启动时发出一个“刷新”广播，之后每个客户端直接回复请求用户的当前状态）。
*   **单播**：在应用程序开始时发送一个 UDP 广播来宣布兴趣，当客户端的状态发生变化时，它会直接向每个已宣布的客户端发送一个 UDP 数据包。这会导致最高流量，但可能不太可能用不必要的广播数据包惹恼其他系统。它还引入了应用程序崩溃时的潜在并发症（就产生不必要的流量而言）。

多播无疑是最适合这项工作的技术，但我想知道是否值得避免相关的麻烦，因为这只是一个“玩具应用程序”，而不是用于专业网络管理员部署和配置的关键业务服务。

# html - 居中的固定/锚定页脚？

> ID：13500696
> 
> 赞同：0
> 
> 时间：2012-11-21T19:31:02.873
> 
> 标签：html, css

我已经查看了此处发布的一些问题，但是对于如此简单的任务来说，一切似乎都过于复杂了？我只想要一个无论页面垂直多长时间都固定在屏幕底部的页脚。一切正常，除了我不能让页脚居中，它总是左对齐..？谢谢！ [http://jsfiddle.net/n4xxj/](http://jsfiddle.net/n4xxj/)

```
<body>
     <div id="content"></div>
     <div id="footer"></div>
</body>

div {
width: 960px;
margin: auto;
}

#content {
background-color: beige;
border: 1px solid;
height: 1200px;
margin-top: 100px;
margin-bottom: 150px;
}

#footer {
background-color: lightgray;
border: solid 1px;
height: 100px;
position: fixed;
bottom: 0px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:34:01.773

更新您的 HTML 以包装在包装器 div 中

```
<div>   
  <div id="content"></div>
  <div id="footer"></div>
 </div> 
```

[演示](http://jsfiddle.net/n4xxj/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:38:05.030

在这里，您需要将内部封装`div`到一个大的#container`div`中并添加到它`margin: 0 auto;`以对齐它。

请注意，对于完整的修复，您还应该添加这个（这是一个简单的 IE 修复）：

```
body { text-align: center; }
#container { text-align: left; margin: 0 auto; } 
```

当然，#footer 需要有`width: 100%;`

还有小提琴：http: [//jsfiddle.net/n4xxj/3/](http://jsfiddle.net/n4xxj/3/)

# c# - 如何从另一个表单访问已检查的项目？

> ID：13500697
> 
> 赞同：0
> 
> 时间：2012-11-21T19:31:05.197
> 
> 标签：c#

我有两种形式：form1 和 form2。

form1 包含`button1`and `listbox1`， form2 包含`button2`and `checkedlistbox1`。

当单击`button1`必须打开`form2` 并检查项目时`checkedlistbox1`。然后单击`button2`如此`form2`关闭并且`listbox1`必须显示已选中的项目来自`checkedlistbox1`。但是我无法将检查的项目从复制`checkedlistbox1`到的问题`listbox1`。我该怎么做，请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:52:50.173

So we'll start by adding this property to `Form2`. It will be the meat of the communication:

```
public IEnumerable<string> CheckedItems
{
    get
    {
        //If the items aren't strings `Cast` them to the appropirate type and 
        //optionally use `Select` to convert them to what you want to expose publicly.
        return checkedListBox1.SelectedItems
            .OfType<string>();
    }
    set
    {
        var itemsToSelect = new HashSet<string>(value);

        for (int i = 0; i < checkedListBox1.Items.Count; i++)
        {
            checkedListBox1.SetSelected(i,
                itemsToSelect.Contains(checkedListBox1.Items[i]));
        }
    }
} 
```

This will let us set the selected items (feel free to use something other than `string` for the item values) from another form, or get the selected items from this form.

Then in `Form1` we can do:

```
private  void button1_Click(object sender, EventArgs e)
{
    Form2 other = new Form2();
    other.CheckedItems = listBox1.SelectedItems.OfType<string>();
    other.FormClosed += (_, args) => setSelectedListboxItems(other.CheckedItems);
    other.Show();
}

private void setSelectedListboxItems(IEnumerable<string> enumerable)
{
    var itemsToSelect = new HashSet<string>(enumerable);
    for (int i = 0; i < listBox1.Items.Count; i++)
    {
        listBox1.SetSelected(i , itemsToSelect.Contains(listBox1.Items[i]));
    }
} 
```

When we click the button we create an instance of the second form, set it's selected indexes, add a handler to the `FormClosed` event to update our listbox with the new selections, and then show the form. You'll note the implementation of th emethod to set teh `ListBox` items is of exactly the same pattern as in `CheckedItems`'s `set` method. If you find yourself doing this a lot consider refactorizing it out into a more general method.

# sql - Linq to Entity Group By

> ID：13500698
> 
> 赞同：1
> 
> 时间：2012-11-21T19:31:14.870
> 
> 标签：sql, linq, group-by

我编写了以下 MS SQL Server 查询，但无法从中生成 linq to entity 语句：

目标是从数据库中检索过去 7 天的潜在客户，然后按星期几分组并每天计算潜在客户

```
SELECT      DATEPART(day, DateCreated) AS Day, LEFT(DATENAME(dw, DateCreated), 3) AS DayOfWeek, COUNT(*) AS Count
FROM         dbo.[File]
WHERE     (DateCreated > GETDATE() - 7)
GROUP BY DATEPART(day, DateCreated), DATENAME(dw, DateCreated)
ORDER BY Day, DATENAME(dw, DateCreated) 
```

示例结果是：

这是一个包含示例结果的链接：[link](http://www.hostorlando.com/SQLStatementExample.png)

任何有关如何使用 linq to 实体编写此示例的帮助将不胜感激。Vb（首选）还是 c#？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:59:57.567

尝试这个

```
var query =
    from f in File
    where f.DateCreated > DateTime.Now.AddDays(-7)
    group f by new { Day = f.DateCreated.Day, DayOfWeek = f.DateCreated.DayOfWeek } into g
    select new
    {
        Day = g.Key.Day,
        DayOfWeek = g.Key.DayOfWeek.ToString().Substring(0, 3),
        Count = g.Count()
    }; 
```

如果您需要特定于文化的名称，您可以使用`Date.ToString("dddd", System.Globalization.CultureInfo.CreateSpecificCulture("en-US"))`：

```
var query =
    from f in File
    where f.DateCreated > DateTime.Now.AddDays(-7)
    group f by new { Day = f.DateCreated.Day, DayOfWeek = f.DateCreated.ToString("dddd", System.Globalization.CultureInfo.CreateSpecificCulture("en-US")) } into g
    select new
    {
        Day = g.Key.Day,
        DayOfWeek = g.Key.DayOfWeek.Substring(0, 3),
        Count = g.Count()
    }; 
```

**更新：** 好的，我不是 VB 专家，但是对于 VB，你可以尝试这样的事情

```
 Dim query =
    From f In File
    Where f.DateCreated > DateTime.Now.AddDays(-7)
    Group f By Day = f.DateCreated.Day, DayOfWeek = f.DateCreated.DayOfWeek.ToString().Substring(0, 3)
    Into Group, Count = Count() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:01:50.993

您最好不要在 Linq-to-SQL 中按日期和星期几分组，而只是按日期分组，然后在查询之外提取日期部分（因为稍后处理日期不会影响查询性能）：

```
var query = 
    (from f in Files 
        where EntityFunctions.AddDays(f.DateCreated, 7) >= DateTime.Today()
        group f by EntityFunctions.TruncateTime(f.DateCreated) into g
        select new { DateCreated = g.Key, Count = g.Count() })
    .ToList()  // materialize to switch from Linq-to-SQL to Linq-to-Objects
    .Select( g => new { 
                       Day = g.DateCreated.Day,, 
                       DayOfWeek = g.DateCreated.ToString("ddd"),
                       Count = g.Count
                       }); 
```

# python - 神经网络因大层而变得不守规矩

> ID：13500699
> 
> 赞同：0
> 
> 时间：2012-11-21T19:31:17.600
> 
> 标签：python, machine-learning, neural-network

这是关于神经网络性能的更高层次的问题。我遇到的问题是，每层神经元数量较多，网络经常出现完全愚蠢的回合。它们不一致；当层数大于 60 个神经元（总是 3 层）时，一般成功与失败的概率似乎约为 50/50。

我通过向具有 10-200 大小的输入和隐藏层的网络教授相同的功能来测试这一点。成功率是 0-1% 或 90+%，但没有介于两者之间。为了帮助可视化这一点，我将其绘制成图表。失败是 5k 次训练迭代后对 200 个数据集的错误响应的总数。![图片](../Images/13341c31a3d2ea192c48f722384d91fb.png).

我认为同样重要的是要注意每次实验运行时网络成功或失败的数字都会发生变化。我想出的唯一可能的罪魁祸首是局部最小值（但不要让这影响你的答案，我是新手，最初尝试最小化局部最小值的机会似乎没有效果）。

所以，最终的问题是，什么可能导致这种行为？为什么这件事如此不一致？

Python 代码在[Github](https://github.com/stevejarvis/neural-network)上，生成此图的代码是 test.py 中的 testHugeNetwork 方法（第 172 行）。如果网络算法的任何特定部分有帮助，我很高兴发布相关片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T21:37:05.977

我的猜测是，您的网络在锯齿状错误表面上剧烈振荡。尝试降低错误率可能会有所帮助。但首先，您可以做一些事情来更好地了解您的网络在做什么：

*   绘制训练时期的输出误差。这将向您显示在培训过程中**何时**出现问题。
*   具有权重矩阵和输出的图形表示（图像）。更容易发现违规行为。

ANN 训练的一个主要问题是 sigmoid 函数的饱和。对于逻辑函数和 tanh 的渐近线，导数接近于 0，在数值上它甚至可能*为零*。结果，网络只会学习非常缓慢或根本不学习。当 sigmoid 的输入太大时会出现此问题，您可以执行以下操作：

*   初始化与神经元接收的输入数量成比例的权重。标准文献建议从均值 = 0 和标准差 1/sqrt(m) 的分布中提取它们，其中 m 是输入连接数。
*   扩展您的老师，使他们位于网络可以学习最多的地方；也就是说，激活函数是最陡峭的：一阶导数的最大值。对于 tanh，您也可以将函数缩放为 f(x) = 1.7159 * tanh(2/3 * x) 并将教师保持在 [-1, 1]。但是，不要忘记将导数调整为 f'(x) = 2/3 * 1.7159 * (1 - tanh^2 (2/3 * x)

如果您需要进一步说明，请告诉我。

# ios - 视图控制器没有被释放

> ID：13500702
> 
> 赞同：2
> 
> 时间：2012-11-21T19:31:19.800
> 
> 标签：ios, view

我有 2 个控制器 InitViewController 和 SettingsViewController。每个视图都有一个调用另一个视图的按钮：

**初始化视图控制器**

```
@interface InitViewController : UIViewController
    - (IBAction)loadSettings:(id)sender;
@end

@implementation InitViewController
    - (IBAction)loadSettings:(id)sender {
        SettingsViewController *vc = [[SettingsViewController alloc] initWithNibName:@"SettingsViewController" bundle:nil];
        [self presentViewController:vc animated:YES completion:nil];
        vc = nil;
    }
@end 
```

**设置视图控制器**

```
@interface SettingsViewController : UIViewController
    - (IBAction)back:(id)sender;
@end

@implementation SettingsViewController
    - (IBAction)back:(id)sender {
        InitViewController *vc = [[InitViewController alloc] initWithNibName:@"InitViewController" bundle:nil];
        [self presentViewController:vc animated:YES completion:nil];
        vc = nil;
    }
@end 
```

当我通过多次点击按钮来分析应用程序并对其进行测试时，我看到 InitViewController 和 SettingsViewController 的实例仍然存在 =>![打印屏幕](../Images/3a79437b41fa6aaa6ec59a76919a776f.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:42:28.987

您`SettingsViewController`不会返回到`InitViewController`创建它的那个。相反，它会创建一个**新**实例`InitViewController`并呈现它。所以你最终会得到一堆在 和 的实例之间交替的视图`InitViewController`控制器`SettingsViewController`。

由于您在呈现任何一种视图控制器后都不会关闭它，因此它们都不能被释放。

你的`-[SettingsViewController back:]`行为应该消除自己，而不是创建和呈现一个新的`InitViewController`.

```
@implementation SettingsViewController

- (IBAction)back:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

# python - Scapy padding.load 'g' 和 '|' 是什么意思 符号

> ID：13500706
> 
> 赞同：0
> 
> 时间：2012-11-21T19:31:30.077
> 
> 标签：python, hex, scapy

我附加到 tcp 数据包 unsinged long long 值为 4 和附加 unsigned long long 值为 8616616 （我不记得第二个值）。我在 ubuntu 32 上的 c 中执行此操作，因此 unsigned long long 为 8 个字节。

我用 scapy 嗅探数据包并打印 padding.load 。在输出中，我看到了我不理解它们含义的符号 - g, | 另外负载应该是 16 字节，但我没有看到 16 字节。

如果我只附加一个 unsigned long long 我得到 8 个字节，我看不到这些符号

```
>>> pkt = sniff(count=2,filter="tcp")
>>> raw  = pkt[1].sprintf('%Padding.load%')
>>> raw
"'\\x04\\x00\\x00\\x00\\x00\\x00\\x00\\x00g\\xc4|\\x00\\x00\\x00\\x00\\x00'"

>>> print raw
'\x04\x00\x00\x00\x00\x00\x00\x00g\xc4|\x00\x00\x00\x00\x00' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:09:57.473

当您打印出 的值时`raw`，python 会将值大于 31 的所有字节解释为 ASCII 字符。当您看到`g`该字节的值等于 103 时，同样`|`是 124 的 ASCII 码。对于 127 以上的字符，python 使用不同的表示形式，这就是您`\xc4`在输出中使用的原因，该字节的值是 196。

每个字节的实际值`raw`是：

```
[4, 0, 0, 0, 0, 0, 0, 0, 103, 196, 124, 0, 0, 0, 0, 0] 
```

长度为 16 个字节。

您可以通过将每个字节的值转换回字符来测试这一点：

```
>>> values = [4, 0, 0, 0, 0, 0, 0, 0, 103, 196, 124, 0, 0, 0, 0, 0]
>>> as_characters = ''.join(chr(c) for c in values)
>>> as_characters
'\x04\x00\x00\x00\x00\x00\x00\x00g\xc4|\x00\x00\x00\x00\x00'
>>> len(as_characters)
16 
```

我认为您所`raw`拥有的每个字节都已转义。在我的示例中，当我输出时`as_characters`我只看到一个反斜杠，你有两个。您可能需要使用类似的东西`pkt[1].sprintf('%Padding.loadr%')`来获得非转义版本。

# javascript - THREE.js 代码仅在有断点时运行

> ID：13500710
> 
> 赞同：0
> 
> 时间：2012-11-21T19:31:39.283
> 
> 标签：javascript, webgl, three.js

我正在尝试以下代码：

```
var loader = new THREE.OBJLoader();
var xpos = -80;
var ypos= 15;
var teethCount=0;
loader.addEventListener( 'load', function ( event ) {

var object = event.content;

teeth.push(object);

});
loader.load( 'obj/tooth1.obj' );
loader.load('obj/tooth2.obj');

for(var i = 0; i<32; i++)
{

teeth[i].position.x=xpos;
teeth[i].position.y=ypos;
scene.add(teeth[i]);
} 
```

for 循环仅在我在其语句上设置断点时运行。任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:36:36.147

你不是要等到加载事件触发后再进入循环吗？

# javascript - Fancybox minWidth 设置强制宽度为静态

> ID：13500721
> 
> 赞同：0
> 
> 时间：2012-11-21T19:32:15.137
> 
> 标签：javascript, jquery, fancybox, fancybox-2

如何在 Fancybox 中调整内容宽度？我本来希望这是自动的，因为我只设置了 minWidth，但似乎只有初始宽度，当您打开模式对话框时保持静态。我已经设置了 maxWidth，但这对宽度没有任何影响。我删除了所有宽度设置，内容显示在一个小宽度区域中。我对如何使它正常工作感到困惑。

```
$('a.various').fancybox({
    scrolling:'no',
    minWidth:450,
    minHeight:450,
    openEffect:'none',
    closeEffect:'none',
    closeBtn:false
}); 
```

这给了我增加的高度，但宽度保持不变。当假设有更大的图像等时，我需要增加宽度。我尝试将 minWidth 属性设置为 640，但这会在宽度较小的图像右侧产生过多的空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T23:14:40.097

还要确保将 autoSize 设置为 true：

```
autoWidth : true, 
```

您不需要 minWidth。

您希望在 fancyBox 中显示的 HTML 也应该具有特定的给定宽度。

外汇。如果您希望内容的宽度为 300px，请将 body 的宽度设置为 300px：

```
<body style="width: 300px;"> 
```

我就是这样做的。希望它有效：D

# batch-file - 批量、文件复制和拖放错误

> ID：13500726
> 
> 赞同：2
> 
> 时间：2012-11-21T19:32:19.373
> 
> 标签：batch-file, drag-and-drop, copy-paste

我一直在寻找这个问题的答案，但我发现的任何东西都无法真正解决我的问题 - 如果已经有一个与我没有找到的类似的已回答帖子，我很抱歉。

第 1 章）
我有一个批处理文件，它应该将任何文件/文件夹（递归）复制到我的 USB 闪存驱动器中的特定文件夹。所以，我写了这个：

```
echo Copying files...
xcopy /s /i %1 \folder\Subfolder\%1 
```

如果我从命令行调用批处理文件，结果会膨胀，但如果我将对象（文件/文件夹）拖到 .bat 本身上，它就会停止工作。我确定 shell 必须返回一条错误消息，但我无法阅读它，因为命令行窗口像往常一样立即关闭（这就是我从命令行运行它的原因）。

你能帮我解决这个问题吗？

第 2 章）
我希望批处理文件能够区分两种情况：
a）将文件“C:\Document.doc”复制到“\folder\Subfolder”
b）复制文件“C:\SomeFolder”到\文件夹\子文件夹\SomeFolder"

我的代码已经做了b），它只是与a）没有区别，当我尝试复制单个文件时，它的作用是：指令

```
xcopy /s /i %1 \Folder\SubFolder\%1 
```

变成

```
xcopy /s /i C:\Document.doc \Folder\SubFolder\C:\Document.doc 
```

代替

```
xcopy /s /i C:\Document.doc \Folder\SubFolder\Document.doc 
```

我怎样才能使批次能够纠正这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:18:19.473

%1 具有文件的绝对路径，因此当您拖动文件时，您是在告诉 CMD 执行此操作：

```
xcopy  /S /i "C:\complete path of file\file.ext" "\folder\Subfolder\C:\complete path of file\file.ext" 
```

您需要使用参数参数来获取所需的内容（绝对路径、文件名、扩展名、文件大小、您想要的内容）

像这样：

```
xcopy /s /i "%~1" "\folder\Subfolder\%~nx1" 
```

该示例执行以下操作：

```
xcopy  /S /i "C:\complete path of file\file.ext" "\folder\Subfolder\filename.ext" 
```

但实际上您不需要使用第二个参数，您可以简化为：

```
xcopy /s /i "%~1" "\folder\Subfolder\" 
```

因为默认情况下，命运文件名采用与原始文件相同的名称。

# web-services - 从 ASP.net 应用程序调用 webservice 方法时出现 403 禁止错误

> ID：13500728
> 
> 赞同：1
> 
> 时间：2012-11-21T19:32:28.100
> 
> 标签：web-services

急需帮助，

我正在尝试从远程计算机访问 Web 服务。我能够从浏览器浏览 Web 服务链接，并且能够从 Windows 应用程序进行通信但是当我尝试从托管在 Windows Server 2003 上的 IIS 6 上的 asp.net 应用程序调用时，得到 HTTP 403，有时 501 未实现错误。

请帮帮我。

提前致谢。

哈里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:17:15.657

我在这里找到了我的问题的解决方案。

[http://forums.asp.net/t/1860412.aspx/1?403+Forbidden+error+When+calling+webservice+method+from+ASP+net+Application](http://forums.asp.net/t/1860412.aspx/1?403+Forbidden+error+When+calling+webservice+method+from+ASP+net+Application)

感谢高拉夫。

# internet-explorer-8 - IE 8 不加载特定大小的图像

> ID：13500730
> 
> 赞同：2
> 
> 时间：2012-11-21T19:32:33.777
> 
> 标签：internet-explorer-8, image-size

有谁知道 IE 8 是否不加载大于特定尺寸（如 600k）的图像？

相同的图像在 IE 9、FF 和 Chrome 中加载良好。

如果您使用的是 IE 8 浏览器，请尝试点击此图片。它不会加载，然后用你的 FF 或 Chrome 试试，它会工作的。奇怪的

[http://netjade.com/s1-sc5.1-1.jpg](http://netjade.com/s1-sc5.1-1.jpg)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:18:41.463

用photoshop打开图片，你可以看到它有CMYK模式，如果你选择RGB模式并保存为JPG就可以了！

# javascript - 将文本拆分为多个部分 JavaScript

> ID：13500731
> 
> 赞同：0
> 
> 时间：2012-11-21T19:32:33.200
> 
> 标签：javascript, split, slice

我已经改编了从另一个项目中提取的 PHP 脚本以在 JavaScript 中使用，该脚本非常适合将文本缩短到设定的限制。如果超过设定的限制，我想用它也将其拆分为多个部分。

当前缩短一次的代码在这里：http: [//jsfiddle.net/WilliamIsted/P5jxK/](http://jsfiddle.net/WilliamIsted/P5jxK/)

这是我到目前为止所拥有的：http: [//jsfiddle.net/WilliamIsted/UkhXL/](http://jsfiddle.net/WilliamIsted/UkhXL/)（我很确定我做的不对）

我已经陷入循环几次到多次，我不知道如何继续它。

```
function strTruncate($string, $your_desired_width) {

    arr = [];

    if (typeof($last_part)) {
        $last_part = 0;
    }

    $parts = $string.split(/([\s\n\r]+)/);
    $parts_count = $parts.length;

    $length = 0;
    $last_part = 0;
    for (; $last_part < $parts_count; ++$last_part) {
        $length += $parts[$last_part].length;
        if ($length > $your_desired_width) {
            break;
        }
    }

    $start_part = 0;

    return $parts.slice($start_part, $last_part).join('');

} 
```

缩短一次结果：

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer malesuada, est ut interdum ullamcorper, metus lorem interdum ipsum, vitae 
```

新的预期结果：

```
array[0] = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer malesuada, est ut interdum ullamcorper, metus lorem interdum ipsum, vitae",
array[1] = "vulputate ante quam ut augue. Praesent sit amet varius lorem. Aliquam odio nunc, mattis in mollis vitae, laoreet non velit. Curabitur"
array[2] = "adipiscing, nisl tincidunt consequat ornare, ligula mauris sed." 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:03:50.227

你的代码有点乱，可以改写成这样

```
function strTruncate(string, width) { // your original function
    string = string.replace(/[\s\r\n]+/, ' ');
    if(string.length >= width) {
        return string[width-1] === ' ' ? string.substr(0, width - 1) : string.substr(0, string.substr(0, width).lastIndexOf(' '));
    }
    return string;
}
function strTruncateWhole(string, width) { // function that stores result(s) in array
    arr = [];
    string = string.replace(/[\s\r\n]+/, ' ');
    var b = 0;
    while(b < string.length) {
        arr.push(strTruncate(string.substring(b), width));
        b += arr[arr.length-1].length;
    }
    return arr;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T19:53:13.760

我相信您正在寻找的是这样的脚本：

```
function strSplitOnLength(data, your_desired_width) {
    if(data.length <= 0)
        return [];  // return an empty array

    var splitData = data.split(/([\s\n\r]+)/);
    var arr = [];
    var cnt = 0;
    for (var i = 0; i < splitData.length; ++i) {
        if (!arr[cnt]) arr[cnt] = '';  //Instantiate array entry to empty string if null or undefined

        if (your_desired_width < (splitData[i].length + arr[cnt].length))
            cnt++;

        arr[cnt] += splitData[i];
    }

    return arr;
}

strSplitOnLength('Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer malesuada, est ut interdum ullamcorper, metus lorem interdum ipsum, vitae vulputate ante quam ut augue. Praesent sit amet varius lorem. Aliquam odio nunc, mattis in mollis vitae, laoreet non velit. Curabitur adipiscing, nisl tincidunt consequat ornare, ligula mauris sed.', 140);​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T19:45:39.537

继续循环。与其断开和返回零件，不如将它们从数组中拼接出来，重置宽度计数并将它们推送到结果数组上`start`。`last`

另请注意，除了在 PHP 中，您需要使用`var`; 声明所有局部变量。而且也没有布尔`typeof`函数，而是一个返回字符串的关键字`"undefined"`（不知道你想在那里做什么）。

```
function strTruncate(str, maxWidth) { // not sure whether that's the best name
    var resultArr = [];
    var parts = str.split(/([\s\n\r]+)/);
    var count = parts.length;
    var width = 0;
    var start = 0;
    for (var i=0; i<count; ++i) {
        width += parts[i].length;
        if (width > maxWidth) {
            resultArr.push( parts.slice(start, i).join('') );
            start = i;
            width = 0;
        }
    }
    return resultArr;
} 
```

# c# - 有没有一种算法来计算坐标之间的英里数？

> ID：13500732
> 
> 赞同：1
> 
> 时间：2012-11-21T19:32:42.697
> 
> 标签：c#, geolocation, bing-maps

我希望能够在 Windows 8/Store 应用程序中显示 Bing 地图，其中包含一组图钉/航点，缩放设置将显示每个位置，但仅此而已 - IOW，我想要尽可能多的细节，同时仍然显示所有位置/坐标。

我有这个伪代码：

```
public static int GetMapZoomSettingForCoordinates(List<String> coordinatesList)
{
    string furthestNorth = GetFurthestNorth(coordinatesList);
    string furthestSouth = GetFurthestSouth(coordinatesList);
    string furthestEast = GetFurthestEast(coordinatesList);
    string furthestWest = GetFurthestWest(coordinatesList);
    int milesBetweenNorthAndSouthExtremes = GetMilesBetween(furthestNorth, furthestSouth);
    int milesBetweenEastAndWestExtremes = GetMilesBetween(furthestEast, furthestWest);
    int greaterCardinalDistance = Math.Max(milesBetweenNorthAndSouthExtremes, milesBetweenEastAndWestExtremes);
    return GetZoomSettingForDistance(greaterCardinalDistance);
} 
```

...但是“症结”（困难的部分）是“milesBetween”功能。是否存在用于计算两个坐标之间的英里数的现有算法？

我确实意识到这是目前以美国为中心的一堆代码（英里与公里）；也就是说，目前，按照设计。

## 更新

这是我的新伪代码（实际编译代码，但未经测试）：

```
public static int GetMapZoomSettingForCoordinates(List<string> coordinatePairsList)
{
    List<double> LatsList = new List<double>();
    List<double> LongsList = new List<double>();
    List<string> tempList = new List<string>();

    foreach (string s in coordinatePairsList)
    {
        tempList.AddRange(s.Split(';'));
        double dLat;
        double.TryParse(tempList[0], out dLat);
        double dLong;
        double.TryParse(tempList[0], out dLong);
        LatsList.Add(dLat);
        LongsList.Add(dLong);
        tempList.Clear();
    }

    double furthestNorth = GetFurthestNorth(LatsList);
    double furthestSouth = GetFurthestSouth(LatsList);
    double furthestEast = GetFurthestEast(LongsList);
    double furthestWest = GetFurthestWest(LongsList);
    int milesToDisplay = 
        HaversineInMiles(furthestWest, furthestNorth, furthestEast, furthestSouth);
    return GetZoomSettingForDistance(milesToDisplay);
}

private static double GetFurthestNorth(List<double> longitudesList)
{
    double northernmostVal = 0.0;
    foreach (double d in longitudesList)
    {
        if (d > northernmostVal)
        {
            northernmostVal = d;
        }
    }
    return northernmostVal;
} 
```

...我仍然不知道 GetZoomSettingForDistance() 应该/做什么，虽然...

## 更新 2

这是“更好”：

```
public static int GetMapZoomSettingForCoordinates(List<Tuple<double, double>> coordinatePairsList)
{
    var LatsList = new List<double>();
    var LongsList = new List<double>();

    foreach (Tuple<double,double> tupDub in coordinatePairsList)
    {
        LatsList.Add(tupDub.Item1);
        LongsList.Add(tupDub.Item2);
    }

    double furthestNorth = GetFurthestNorth(LongsList);
    double furthestSouth = GetFurthestSouth(LongsList);
    double furthestEast = GetFurthestEast(LatsList);
    double furthestWest = GetFurthestWest(LatsList);
    int milesToDisplay =
        HaversineInMiles(furthestWest, furthestNorth, furthestEast, furthestSouth); 
    return GetZoomSettingForDistance(milesToDisplay);
} 
```

## 更新 3

我意识到，关于经线和纬线的经线，我的逻辑至少是倒退或错误的。虽然经度子午线确实是垂直线（“绘制”南北，反之亦然），纬度平行线是水平线（“绘制”东到西），沿这些线的点代表基于纬度平行线的南北位置，并根据经度子午线表示东西位置。这在我的脑海中似乎是倒退的，直到我想象线条在（经度）和向上和（纬度）地球上旋转，而不是像土星环那样简单地环绕地球；帮助我正确理解的还有提醒自己，经度子午线的值决定了一个人所处的时区。所以，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:13:42.723

您可以使用[Haversine](http://en.wikipedia.org/wiki/Haversine_formula)公式计算沿球体表面的距离。

这是一个使用地球作为球体大小来计算距离[的 C++ 函数。](http://blog.julien.cayzac.name/2008/10/arc-and-distance-between-two-points-on.html)它很容易转换为 C#。

请注意，如果您只想找到纬度或纵向的距离（这听起来像是您正在尝试做的），则可以简化公式。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-11-21T19:50:01.070

要获得直线距离，您可以使用勾股定理来找到斜边。

d = ((delta x)^2 + (delta y)^2)^.5

基本上将 x 方向和 y 方向的变化平方，将它们相加，然后取平方根。

在您的伪代码中，您看起来可能有很多点，并且您想要找到应该包含所有点的最大距离，如果您试图找出地图缩放的比例，这很有意义。相同的公式应该有效，只需对增量 x 使用 milesBetweenEastAndWestExtremes，对增量 y 使用 milesBetweenNorthAndSouthExtremes。您可以选择为此添加固定数量，以确保您没有在地图的最边缘有点。

# freemarker - 是否可以在 freemarker 中取消定义变量？

> ID：13500736
> 
> 赞同：0
> 
> 时间：2012-11-21T19:32:49.780
> 
> 标签：freemarker

`variable?exists`在 freemarker 模板语言中，我可以使用类似or的结构来测试变量是否存在`variable??`。我还可以通过分配给它来使以前不存在的变量存在，例如`<#assign variable = "hi" />`. 但是我怎样才能使以前存在的变量不再存在呢？

我有一些其他家伙的 freemarker 模板，在各个点上都有逻辑，可以测试某些变量的（不）存在。在我的用例中，如果我可以有一个变量在某个时刻存在，然后在包含他的模板时变得未定义，然后再被分配，那将是最简单的。另一种选择是更显着地重组事物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T16:01:05.907

不，没有指令要塞。也许可以使用自定义指令 ( `TemplateDirectiveModel`) 来实现，然后可以`null`通过`Environment`. （除非`Environment`API 检查`null`-s...）

# java - 如何从 java 类（不是 servlet）中获取 ServletContext 属性

> ID：13500741
> 
> 赞同：0
> 
> 时间：2012-11-21T19:33:14.047
> 
> 标签：java, mysql, servlets, listener

晚上好！我有一个带有登录-注销功能的网络应用程序，您可以在其中购买或出售一些产品。我的查询存储在一个名为 的 java 类中`DBManager`，它只有从 servlet 调用的静态方法（我不能使用 JSP，因为在这个项目中我们不能使用它们，教授给了我们这个约束）。

所以这就是问题所在：我曾经管理与`ServletContextListener`. 在`contextInitialized`我建立连接，并在`contextDestroyed`我关闭它。属性“Connection”使用`ServletContext.setAttribute(Connection)`.

如何通过 java 类（不是 servlet）获取此参数`DBManager`？我必须`getServletContext()`在 servlet 中使用对象并将其作为属性传递，或者有避免这种情况的捷径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:55:45.640

在 contextInitialized 方法中打开连接并在 contextDestroyed 中关闭它是一个糟糕的解决方案。想象一下，您的网站同时有两个访问者。他们现在将共享相同的数据库连接。如果您使用事务，您最终会得到意想不到的结果，其中一个访问者提交了另一个访问者执行的事务的中间状态。如果连接丢失（可能是因为数据库服务器重新启动），您的应用程序将失败，因为它没有重新建立连接（除非您有一个非常智能的 JDBC 驱动程序）。

一个非常昂贵但安全的解决方案是为每个数据库操作打开一个新连接，并在操作后立即再次关闭它。

对于完美的解决方案，您将使用某种连接池。每当您需要执行数据库语句（或一系列语句）时，您都会从池中借用一个连接。完成后，您会将连接返回到池。大多数池实现会处理诸如验证之类的事情（检查连接是否仍然“活动”），并且多个线程（不同访问者同时发送不同的 HTTP 请求）可以并行执行语句。

如果您想采用此解决方案，也许 Commons DbUtils 库适合您：[http ://commons.apache.org/dbutils/](http://commons.apache.org/dbutils/)

或者，您可以查看 Java 应用程序服务器或 servlet 引擎（Tomcat？）的文档，了解它提供了哪些内置的 DB 连接池功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:51:39.007

您可以更改您的类以接收连接，而不是任意获取连接。这允许您传递任何连接实例（如果您需要从另一个数据库获取数据会发生什么？）。

另外，假设代码将被移植到桌面。使用这种方法，您可以重用您的[DAO](http://en.wikipedia.org/wiki/Data_access_object)，而无需进行任何更改。

```
class DBManager {
  private Connection connection;

  public DBManager(Connection connection) {
    this.connection = connection;
  }
  //methods that will use the connection
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:52:36.050

在您的`HttpServlet` `doPost`or`doGet`方法中，您可以调用`getServletContext()`.

```
ServletContext sc = getServletContext();
DataSource ds = (DataSource) sc.getAttribute("ds");
Connection conn = ds.getConnection(); 
```

> servlet 可以通过名称将对象属性绑定到上下文中。绑定到上下文中的任何属性都可用于属于同一 Web 应用程序的任何其他 servlet。
> 
> 上下文属性对于创建它们的 JVM 来说是本地的。这可以防止 ServletContext 属性成为分布式容器中的共享内存存储。当需要在分布式环境中运行的 servlet 之间共享信息时，应将信息放入会话中、存储在数据库中或设置在 Enterprise JavaBeans 组件中。

# django - 在 Django 中构建实时提要系统我需要知道的事情

> ID：13500744
> 
> 赞同：-1
> 
> 时间：2012-11-21T19:33:29.180
> 
> 标签：django

我想构建一个简单的应用程序，我有不同的用户，他们会进行更新，所有用户都可以实时获取更新，就像 facebook 一样。

**编辑：** 我只想知道如何在不重新加载页面的情况下将更新推送到用户的个人资料。我是否进行了重复的 AJAX 调用，或者有什么东西可以为我解决这个问题。

**编辑 2：** 这是一个帮助我的演示文稿[http://www.slideshare.net/oellegaard/implementing-real-time-web-applications-with-django](http://www.slideshare.net/oellegaard/implementing-real-time-web-applications-with-django)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:51:17.087

对于类似实时的交互，一种想法是使用套接字。

我要做的是在 python/django 中编写我的前端站点，并在其后面有一个 node.js 层 w/socket.io (websockets) 来处理使所有客户端保持同步。

```
 [DB]
               /  \
        [Django]  [node.js]
app logic -> \      / <- async updates
             [Browser] 
```

但实际上，这是一个相当不知情的答案，主要基于假设 b/c 你没有告诉我们任何关于你的网站需要做什么的具体内容。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-21T19:36:49.300

你需要知道如何编程，你需要知道 Python 和 Django 框架，你需要知道 HTML、JavaScript 和 CSS，你需要知道一些你选择的数据库，你需要知道足够的知识来制作关于客户端 MVC 框架的受过教育决策，您将需要了解队列、堆栈、异步回调、HTTP 方法、加密和其他安全实践，不胜枚举。

基本上，您需要比会问您提出的问题的人了解更多。

# android - 数组列表 adapter to Spinner I've tried several ways to do this, I followed this -> Android Spinner databind using array list answe 问问题 问问题 2012-11-21T19:33:42.430 1659 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I've tried several ways to do this, I followed this -> Android Spinner databind using array list answer, but my object has an ArrayList inside. The whole thing is an ArrayList where Object has a list on his own. How can I show this information properly? Another field in this class is something I don't want to be selectable, just the arraylist inside. The class definition will make everything clear: public class Horario{ private String fecha; private ArrayList <string>hora; public Horario(String _fecha, ArrayList <string>_hora){ fecha=_fecha; hora = _hora; } public Horario(){} public void setFecha(String _fecha){ fecha = _fecha; } public void setHora(ArrayList <string>_hora){ hora=_hora; } public String getFecha(){ return fecha; } public ArrayList <string>getHora(){ return hora; } } This is a class for a schedule, the date (fecha) is what I dont want to be selectable, the hour (hora) is. I imagine this as a dropdown menu with categories (the date) and a group of clickable items (hours). Date1 hour 1 hour 2 hour 3 Date2 hour 1 If this is difficult/impossible then I'm thinking of just listing the date + hour in each option of spinner. Date1 - hour 1 Date1 - hour 2 Date1 - hour 3 .... How can I achieve this? How can I personalize an adapter to get to this? Thanks in advance! I've already found a solution in this post The underlying connection was closed: The connection was closed unexpectedly androidspinneradapter 4 1 回答 1 This answer is useful 1 编辑： 对不起，我想我现在明白你的想法了。我认为您想要的是将所有内容都放在 getDropDown 视图中。我还没有完全测试过这个，但你可以尝试一个 get DropDownView ，它使用不同的布局，具体取决于你想如何为其指定一个标记。更重要的是，这个自定义布局有一个选择器 xml，没有任何区别。 public class HorarioArrayAdapter extends ArrayAdapter { private Horario horario; public HorarioArrayAdapter(Context context, int textViewResourceId, Horario horario) { super(context, textViewResourceId); this.horario = horario; } @Override public View getView(int position, View convertView, ViewGroup parent) { // TODO whatever you had in mind return super.getView(position, convertView, parent); } @Override public View getDropDownView(int position, View convertView, ViewGroup parent) { View v; if (// marker at this position says something) { LayoutInflater viewInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); v = viewInflater.inflate(R.layout.custom_spinner_row, parent, false); TextView text = (TextView) v.findViewById(R.id.txt_date); text.setText(horario.getHora().get(position)); } else { View v = super.getDropDownView(position, convertView, parent); TextView text = (TextView) v.findViewById(android.R.id.text1); text.setText(horario.getHora().get(position)); } return v; } } 但是，如果单击这些位置，则摩擦会使微调器不执行任何操作，甚至没有关闭。您可能需要制作一个自定义微调器，用于接收一个int position数组来告诉它何时关闭或不关闭。我得说，仅仅做一个展示似乎真的很重要，如果你认为这不值得，你可能想考虑妥协。 于 2012-11-21T20:34:50.120 回答 Related 1 java - 如何使用递归在 Java 中构建关联数组？ 2 c# - 检查 xna 中是否正在播放特定歌曲 1 java - 我可以在 JAVA 中使用 dll 文件吗？ 3 ios - 只使用实例变量而不是属性可以吗 1 ios - 在 Objective-C 中调用委托函数 1 events - 为什么淘汰赛触发 afterRender 事件两次？ 1 c# - JavaScriptConvert.DeserializeObject 在我运行时会从arraylist 中删除一个元素吗 3 qt - 最小化窗口后冻结的小部件 5 html - Img 的最大高度不考虑父母的尺寸 2 php - AJAX 可能的冲突 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</string></string></string></string>

> ID：13500745
> 
> 赞同：0
> 
> 时间：
> 
> 标签：android, spinner, adapter

I've tried several ways to do this, I followed this -> [Android Spinner databind using array list](https://stackoverflow.com/questions/6562236/android-spinner-databind-using-array-list) answer, but my object has an ArrayList inside. The whole thing is an ArrayList where Object has a list on his own.

How can I show this information properly? Another field in this class is something I don't want to be selectable, just the arraylist inside. The class definition will make everything clear:

```
public class Horario{
    private String fecha;
    private ArrayList<String> hora;

    public Horario(String _fecha, ArrayList<String> _hora){
        fecha=_fecha;
        hora = _hora;
    }

    public Horario(){}

    public void setFecha(String _fecha){
        fecha = _fecha;
    }
    public void setHora(ArrayList<String> _hora){
        hora=_hora;
    }

    public String getFecha(){
        return fecha;
    }
    public ArrayList<String> getHora(){
        return hora;
    }
} 
```

This is a class for a schedule, the date (fecha) is what I dont want to be selectable, the hour (hora) is. I imagine this as a dropdown menu with categories (the date) and a group of clickable items (hours).

```
Date1
    hour 1
    hour 2
    hour 3
Date2
    hour 1 
```

If this is difficult/impossible then I'm thinking of just listing the date + hour in each option of spinner.

```
Date1 - hour 1
Date1 - hour 2
Date1 - hour 3 .... 
```

How can I achieve this? How can I personalize an adapter to get to this? Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:34:50.120

**编辑：**

对不起，我想我现在明白你的想法了。我认为您想要的是将所有内容都放在 getDropDown 视图中。我还没有完全测试过这个，但你可以尝试一个 get DropDownView ，它使用不同的布局，具体取决于你想如何为其指定一个标记。更重要的是，这个自定义布局有一个选择器 xml，没有任何区别。

```
public class HorarioArrayAdapter extends ArrayAdapter {

    private Horario horario;

    public HorarioArrayAdapter(Context context, int textViewResourceId, Horario horario) {
        super(context, textViewResourceId);
        this.horario = horario;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO whatever you had in mind
        return super.getView(position, convertView, parent);
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        View v;
        if (// marker at this position says something) {
            LayoutInflater viewInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = viewInflater.inflate(R.layout.custom_spinner_row, parent, false);   

            TextView text = (TextView) v.findViewById(R.id.txt_date);
            text.setText(horario.getHora().get(position));          
        } else {
            View v = super.getDropDownView(position, convertView, parent);
            TextView text = (TextView) v.findViewById(android.R.id.text1);
            text.setText(horario.getHora().get(position));              
        }
        return v;       
    }

} 
```

但是，如果单击这些位置，则摩擦会使微调器不执行任何操作，甚至没有关闭。您可能需要制作一个自定义微调器，用于接收一个`int position`数组来告诉它何时关闭或不关闭。我得说，仅仅做一个展示似乎真的很重要，如果你认为这不值得，你可能想考虑妥协。

# java - 如何输入数据类型 XMLGregorianCalendar 的日期/时间

> ID：13500753
> 
> 赞同：1
> 
> 时间：2012-11-21T19:34:36.300
> 
> 标签：java, datetime, set

> **可能重复：**
> [java.util.Date 到 XMLGregorianCalendar](https://stackoverflow.com/questions/835889/java-util-date-to-xmlgregoriancalendar)

我有一个带有 XMLGregorianCalendar 类型参数的 Java 方法，但我不知道如何设置日期/时间：

```
XMLGregorianCalendar startDateTime = ??? 
```

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:19:21.580

```
import javax.xml.datatype.DatatypeFactory;
// ...
XMLGregorianCalendar xc = DatatypeFactory.newInstance().newXMLGregorianCalendar(
    int year,
    int month,
    int day,
    int hour,
    int minute,
    int second,
    int millisecond,
    int timezone) 
```

还有其他版本的`newXMLGregorianCalendar()`，例如`newXMLGregorianCalendar(GregorianCalendar cal)`。

# orbeon - Fomat output of dollars and cents field in orbeon

> ID：13500754
> 
> 赞同：0
> 
> 时间：2012-11-21T19:34:47.620
> 
> 标签：orbeon

How may I specifiy that the field that is to hold the sum of two other fields should be able to display a value higher than $999.999.99 as dollars and cents?

The source code of the form is below.

When I test the form, I enter 999999.99 in amount_1 and it displays $999,999.99\. I enter .01 in amount_2\. The total_amount field displays $1.0E. I want it to display $1,000,000.00 and gives a missing or incorrect value error.

I have tried using a Text Output control, but have the same problem.

I am writing a banking application that uses Form Runner to request data from bank agents, so floating point fields are not accurate enough.

I have looked at several posts that seem related to fomatting output, but have seen none that helped. I am using the default output format for the various data types.

Thank you for your help.

```
<xhtml:html xmlns:xhtml="http://www.w3.org/1999/xhtml"
        xmlns:xforms="http://www.w3.org/2002/xforms"
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ev="http://www.w3.org/2001/xml-events"
        xmlns:xi="http://www.w3.org/2001/XInclude"
        xmlns:xxi="http://orbeon.org/oxf/xml/xinclude"
        xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
        xmlns:exforms="http://www.exforms.org/exf/1-0"
        xmlns:fr="http://orbeon.org/oxf/xml/form-runner"
        xmlns:saxon="http://saxon.sf.net/"
        xmlns:sql="http://orbeon.org/oxf/xml/sql"
        xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<xhtml:head>
    <xhtml:title>Format Test Form</xhtml:title>
    <xforms:model id="fr-form-model">

        <!-- Main instance -->
        <xforms:instance id="fr-form-instance">
            <form>
                <section-1>
                    <amount_1/>
                    <amount_2/>
                    <total_amount/>

                </section-1>
            </form>
        </xforms:instance>

        <!-- Bindings -->
        <xforms:bind id="fr-form-binds" nodeset="instance('fr-form-instance')">
            <xforms:bind id="section-1-bind" nodeset="section-1">
                <xforms:bind id="amount_1-bind" nodeset="amount_1" type="xforms:decimal" name="amount_1"/>
                <xforms:bind id="amount_2-bind" nodeset="amount_2" type="xforms:decimal" name="amount_2"/>
                <xforms:bind id="total_amount-bind" nodeset="total_amount" name="total_amount"
                             type="xforms:decimal"
                             calculate="if ($amount_1 castable as xs:double and $amount_2 castable as xs:double) then $amount_1 + $amount_2 else 123456789012345"/>

            </xforms:bind>
        </xforms:bind>

        <!-- Metadata -->
        <xforms:instance id="fr-form-metadata" xxforms:readonly="true">
            <metadata>
                <application-name>BusTravelApp</application-name>
                <form-name>FormatTestForm</form-name>
                <title xml:lang="en">Format Test Form</title>
                <description xml:lang="en"/>
                <author/>
                <logo mediatype="" filename="" size=""/>
            </metadata>
        </xforms:instance>

        <!-- Attachments -->
        <xforms:instance id="fr-form-attachments">
            <attachments>
                <css mediatype="text/css" filename="" size=""/>
                <pdf mediatype="application/pdf" filename="" size=""/>
            </attachments>
        </xforms:instance>

        <!-- All form resources -->
        <!-- Don't make readonly by default in case a service modifies the resources -->
        <xforms:instance id="fr-form-resources" xxforms:readonly="false">
            <resources>
                <resource xml:lang="en">
                    <amount_1>
                        <label>Amount 1</label>
                        <hint/>
                        <help/>
                        <alert/>
                    </amount_1>
                    <amount_2>
                        <label>Amount 2</label>
                        <hint/>
                        <help/>
                        <alert/>
                    </amount_2>
                    <total_amount>
                        <label>Total Amount</label>
                        <hint/>
                        <help/>
                        <alert/>
                    </total_amount>
                    <section-1>
                        <label>Section-1</label>
                        <help/>
                    </section-1>

                </resource>
            </resources>
        </xforms:instance>

        <!-- Utility instances for services -->
        <xforms:instance id="fr-service-request-instance" xxforms:exclude-result-prefixes="#all">
            <request/>
        </xforms:instance>

        <xforms:instance id="fr-service-response-instance" xxforms:exclude-result-prefixes="#all">
            <response/>
        </xforms:instance>

    </xforms:model>
</xhtml:head>
<xhtml:body>
    <fr:view>
        <xforms:label ref="instance('fr-form-metadata')/title"/>
        <fr:body>
            <fr:section id="section-1-section" bind="section-1-bind">
                <xforms:label ref="$form-resources/section-1/label"/>
                <xforms:help ref="$form-resources/section-1/help"/>
                <fr:grid columns="3">
                    <xhtml:tr>
                        <xhtml:td>
                            <fr:currency xmlns="http://orbeon.org/oxf/xml/form-builder"
                                         xmlns:exf="http://www.exforms.org/exf/1-0"
                                         xmlns:xxbl="http://orbeon.org/oxf/xml/xbl"
                                         xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                         xmlns:oxf="http://www.orbeon.com/oxf/processors"
                                         xmlns:xbl="http://www.w3.org/ns/xbl"
                                         xmlns:fb="http://orbeon.org/oxf/xml/form-builder"
                                         xmlns:pipeline="java:org.orbeon.oxf.processor.pipeline.PipelineFunctionLibrary"
                                         bind="amount_1-bind"
                                         id="amount_1-control">
                                <xforms:label ref="$form-resources/amount_1/label"/>
                                <xforms:hint ref="$form-resources/amount_1/hint"/>
                                <xforms:help ref="$form-resources/amount_1/help"/>
                                <xforms:alert ref="$fr-resources/detail/labels/alert"/>
                            </fr:currency>

                        </xhtml:td>
                        <xhtml:td>
                            <fr:currency xmlns="http://orbeon.org/oxf/xml/form-builder"
                                         xmlns:exf="http://www.exforms.org/exf/1-0"
                                         xmlns:xxbl="http://orbeon.org/oxf/xml/xbl"
                                         xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                         xmlns:oxf="http://www.orbeon.com/oxf/processors"
                                         xmlns:xbl="http://www.w3.org/ns/xbl"
                                         xmlns:fb="http://orbeon.org/oxf/xml/form-builder"
                                         xmlns:pipeline="java:org.orbeon.oxf.processor.pipeline.PipelineFunctionLibrary"
                                         bind="amount_2-bind"
                                         id="amount_2-control">
                                <xforms:label ref="$form-resources/amount_2/label"/>
                                <xforms:hint ref="$form-resources/amount_2/hint"/>
                                <xforms:help ref="$form-resources/amount_2/help"/>
                                <xforms:alert ref="$fr-resources/detail/labels/alert"/>
                            </fr:currency>
                        </xhtml:td>
                        <xhtml:td>
                            <fr:currency xmlns="http://orbeon.org/oxf/xml/form-builder"
                                         xmlns:exf="http://www.exforms.org/exf/1-0"
                                         xmlns:xxbl="http://orbeon.org/oxf/xml/xbl"
                                         xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                         xmlns:oxf="http://www.orbeon.com/oxf/processors"
                                         xmlns:xbl="http://www.w3.org/ns/xbl"
                                         xmlns:fb="http://orbeon.org/oxf/xml/form-builder"
                                         xmlns:pipeline="java:org.orbeon.oxf.processor.pipeline.PipelineFunctionLibrary"
                                         id="total_amount-control"
                                         bind="total_amount-bind">
                                <xforms:label ref="$form-resources/total_amount/label"/>
                                <xforms:hint ref="$form-resources/total_amount/hint"/>
                                <xforms:help ref="$form-resources/total_amount/help"/>
                                <xforms:alert ref="$fr-resources/detail/labels/alert"/>
                            </fr:currency>
                        </xhtml:td>
                    </xhtml:tr>
                </fr:grid>
            </fr:section>
        </fr:body>
    </fr:view>
</xhtml:body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:40:24.183

使用`xforms:output`和使用像这样格式化值。

```
<xforms:output bind="total_amount-bind" xxforms:format="format-number(., $ ###,###.##)" /> 
```

参考资料： [http ://wiki.orbeon.com/forms/doc/developer-guide/xforms-other-extensions#TOC-The-xxforms:format-attribute](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-other-extensions#TOC-The-xxforms:format-attribute)

[http://www.w3schools.com/xsl/func_formatnumber.asp](http://www.w3schools.com/xsl/func_formatnumber.asp)

# javascript - 根据选择框中的选项值显示/隐藏字段

> ID：13500756
> 
> 赞同：1
> 
> 时间：2012-11-21T19:34:59.540
> 
> 标签：javascript, jquery, drop-down-menu

我正在尝试使用[此代码的略微修改版本来显示/隐藏](https://stackoverflow.com/questions/3580886/show-field-if-certain-option-value-is-selected-must-work-on-pageload)[此页面上](http://www.karmajets.com/quote/)基于旅行类型的返回时间字段：

一种方式：返回时间被隐藏

往返：显示返回时间

这是选择框html。代码由 wordpress 上的 cforms 自动生成。

```
<select name="TripType" id="TripType" class="cformselect" >
                <option value="One Way">One Way</option>
                <option value="Round Trip">Round Trip</option>
            </select> 
```

这是我试图隐藏的表单元素：

```
<li id="li--8" class=""><label id="label--8" for="DepartLeg2-Time"><span>Return Time</span></label><select name="DepartLeg2-Time" id="DepartLeg2-Time" class="cformselect" >
                    <option value="12:00am">12:00am</option>
                    <option value="12:30am">12:30am</option>
                    <option value="1:00am">1:00am</option>
                    <option value="1:30am">1:30am</option>
                    <option value="2:00am">2:00am</option>
                    <option value="2:30am">2:30am</option>
                    <option value="3:00am">3:00am</option>
                    <option value="3:30am">3:30am</option>
                    <option value="4:00am">4:00am</option>
                    <option value="4:30am">4:30am</option>
                    <option value="5:00am">5:00am</option>
                    <option value="5:30am">5:30am</option>
                    <option value="6:00am">6:00am</option>
                    <option value="6:30am">6:30am</option>
                    <option value="7:00am">7:00am</option>
                    <option value="7:30am">7:30am</option>
                    <option value="8:00am">8:00am</option>
                    <option value="8:30am">8:30am</option>
                    <option value="9:00am">9:00am</option>
                    <option value="9:30am">9:30am</option>
                    <option value="10:00am">10:00am</option>
                    <option value="10:30am">10:30am</option>
                    <option value="11:00am">11:00am</option>
                    <option value="11:30am">11:30am</option>
                    <option value="12:00pm">12:00pm</option>
                    <option value="12:30pm">12:30pm</option>
                    <option value="1:00pm">1:00pm</option>
                    <option value="1:30pm">1:30pm</option>
                    <option value="2:00pm">2:00pm</option>
                    <option value="2:30pm">2:30pm</option>
                    <option value="3:00pm">3:00pm</option>
                    <option value="3:30pm">3:30pm</option>
                    <option value="4:00pm">4:00pm</option>
                    <option value="4:30pm">4:30pm</option>
                    <option value="5:00pm">5:00pm</option>
                    <option value="5:30pm">5:30pm</option>
                    <option value="6:00pm">6:00pm</option>
                    <option value="6:30pm">6:30pm</option>
                    <option value="7:00pm">7:00pm</option>
                    <option value="7:30pm">7:30pm</option>
                    <option value="8:00pm">8:00pm</option>
                    <option value="8:30pm">8:30pm</option>
                    <option value="9:00pm">9:00pm</option>
                    <option value="9:30pm">9:30pm</option>
                    <option value="10:00pm">10:00pm</option>
                    <option value="10:30pm">10:30pm</option>
                    <option value="11:00pm">11:00pm</option>
                    <option value="11:30pm">11:30pm</option>
                </select></li> 
```

这是我正在使用的javascript：

```
$("#TripType").change(function() {
  $("#li--8")[$(this).val() == "Round Trip" ? 'show' : 'hide']("fast");
}).change(); 
```

我有代码在 JSFiddle 上工作：http: [//jsfiddle.net/MS4Ck/](http://jsfiddle.net/MS4Ck/)。但是，它在该网站上不起作用。我的控制台没有给我任何错误，除了来自我放在那里的一些日志记录代码的参考错误，以确保正在调用 javascript（它是）。有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:40:35.423

只是一个猜测，但请确保此函数包含在 docReady 函数中，例如：

```
$(document).ready(function() {
    $("#TripType").change(function() {
        $("#li--8")[$(this).val() == "Round Trip" ? 'show' : 'hide']("fast");
    }).change();
}); 
```

# ios - 更改文本颜色 UINavigationBar

> ID：13500757
> 
> 赞同：0
> 
> 时间：2012-11-21T19:35:20.003
> 
> 标签：ios, email, contact-list

嗨，我正在开发一个使用 MFMailComposeViewController 发送电子邮件的 iOS 项目。

我更改了标题栏以使用图像

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"project_headerbg"] forBarMetrics:UIBarMetricsDefault]; 
```

但是现在当我单击 CC 旁边的“+”按钮时，我无法很好地阅读标题中的“选择要邮寄的联系人”文本，并且想知道是否有办法更改该文本的颜色？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:45:10.930

这个问题与使用`MFMailComposeViewController`. 如果您希望自定义 a 的外观`UINavigationBar`，则可能需要设置更多属性，而不仅仅是背景图像。您还应该设置`titleTextAttributes`.

```
// Use whatever color is appropriate
NSDictionary *attributes = @{ UITextAttributeTextColor: [UIColor blueColor] };
[[UINavigationBar appearance] setTitleTextAttributes:attributes]; 
```

还有其他属性，例如字体和阴影颜色。随意设置您需要的。

# actionscript-3 - 如何使MovieClip 透明？

> ID：13500758
> 
> 赞同：1
> 
> 时间：2012-11-21T19:35:19.697
> 
> 标签：actionscript-3, flash

我有这种情况：

有一些在背景中有一些颜色的通用影片剪辑（可以是绿色、红色等），我加载一个图像并作为一个孩子附加在这个影片剪辑中，使用与影片剪辑相同的尺寸。

但如果这张图片有一些透明度，我可以看到背景（绿色、红色等）。

我试试这个：

```
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, function(e:Event){
var tempImage:Bitmap = new Bitmap(e.target.content.bitmapData);
image.bitmapData = tempImage.bitmapData;

obj.graphics.beginFill(0xFFFFFF, 0);
obj.graphics.drawRect(0,0,obj.width, obj.height);
obj.graphics.endFill();

obj.addChild(image);
}); 
```

但它不起作用。而且我无法更改 obj.alpha，因为在这种情况下我看不到图像。还有另一种方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:18:25.493

您是否尝试过 Bitmapfill？

```
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, function(e:Event){

    obj.graphics.beginBitmapFill(e.target.content.bitmapData);
    obj.graphics.endFill();
}); 
```

# python - Python 群发邮件

> ID：13500767
> 
> 赞同：0
> 
> 时间：2012-11-21T19:36:02.353
> 
> 标签：python, web-services, email, smtp

我正在尝试制作一个群发短信应用程序。每个人的信息都存储在 mysql 数据库中（即 %phonenumber%@text.att.net）。这个想法是将所有电子邮件作为一个列表并将其输入到这个脚本中。我不确定我是否正确。

```
import sys
from smtplib import SMTP

def sendmail(toaddy, msg):              #toaddy is a list!!!!
    debuglevel = 0
    smtp = SMTP()
    smtp.set_debuglevel(debuglevel)
    smtp.connect('YOUR.MAIL.SERVER', 26)
    smtp.login('USERNAME@DOMAIN', 'PASSWORD')
    fromaddy = USERNAME@DOMAIN
    for user in toaddy                              
        smtp.sendmail(fromaddy, user, msg)
        smtp.quit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:47:48.290

您不应该在第一个循环后退出 smtp 会话。此外，文档不是循环遍历地址列表，而是表示`sendmail`接受列表：

```
def sendmail(toaddy, msg):  
    debuglevel = 0
    smtp = SMTP()
    smtp.set_debuglevel(debuglevel)
    smtp.connect('YOUR.MAIL.SERVER', 26)
    smtp.login('USERNAME@DOMAIN', 'PASSWORD')
    fromaddy = 'USERNAME@DOMAIN'
    smtp.sendmail(fromaddy, toaddy, msg)
    smtp.quit() 
```

# sas - Block bootstrap from subject list, extract coefficients in PROC MIXED

> ID：13500774
> 
> 赞同：0
> 
> 时间：2012-11-21T19:36:24.483
> 
> 标签：sas, regression, statistics-bootstrap

I'm trying to efficiently implement a block bootstrap technique to get the distribution of regression coefficients from `PROC MIXED`. The main outline is as follows:

I have a panel data set, say `firm` and `year` are the indices. For each iteration of the bootstrap, I wish to sample with replacement n subjects. From this sample, I need to construct a new data set that is a "stack" (concatenated row on top of row) of all the observations for each sampled subject. With this new data set, I can run the regression and pull out the coefficients of interest. Repeat for a bunch of iterations, say 2000.

Each firm can potentially be selected multiple times, so I need to include its data multiple times in each iteration's data set. Using a loop and subset approach, seems computationally burdensome. My real data set quite large (a 2Gb .sas7bdat file).

Example pseudo/explanatory code (please pardon all noob errors!):

```
DATA subjectlist;
  SET mydata;
  BY firm;
  IF first.firm;
RUN;

%macro blockboot(input=, subjects=, iterations=);

%let numberfirms = LENGTH(&subjects);

  %do i = 1 %to &iterations ;
    DATA mytempdat;
      DO i=1 TO &numberfirms;
        rec = ceil(&numberfirms * ranuni(0));

        *** This is where I want to include all observations for the randomly selected subjects;
        *** However, this code doesn't include the same subject multiple times, which...;
        *** ...is what I want;
        SET &INPUT subjects IN &subjects;

      OUTPUT;
      END;
     STOP;

  PROC MIXED DATA=mytempdat; 
    CLASS firm year; 
    MODEL yval= cov1 cov2; 
    RANDOM intercept /sub=subject type=un; 
    OUTPUT out=outx cov1=cov1 ***want to output the coefficient estimate on cov1 here;
  RUN; 

    %IF &i = 1 %THEN %DO;
      DATA outall;
        SET outx;
      %END;
    %ELSE %DO;
      PROC APPEND base=outall data=outx;
      %END;
    %END;  /* i=1 to &REPS loop */

  PROC UNIVARIATE data=outall;
    VAR cov1;
    OUTPUT out=final pctlpts=2.5, 97.5 pctlpre=ci;

%mend;

%blockboot(input=mydata,subjects=subjectlist, reps=2000) 
```

This question is identical to a question I asked previously, found here:

[block bootstrap from subject list](https://stackoverflow.com/questions/11919808/block-bootstrap-from-subject-list)

Any help is appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:08:07.820

有关在 SAS 中执行此操作的最佳方法的详细信息，请参阅以下论文：

[http://www2.sas.com/proceedings/forum2007/183-2007.pdf](http://www2.sas.com/proceedings/forum2007/183-2007.pdf)

总的总结是使用 PROC SURVEYSELECT 和一种允许带替换抽样的方法来创建您的引导样本，然后使用带有 PROC MIXED 的 BY 处理来只运行一次 PROC，而不是运行 2000 次。

# objective-c - Objective-C init function not initializing correctly

> ID：13500775
> 
> 赞同：2
> 
> 时间：2012-11-21T19:36:26.903
> 
> 标签：objective-c

```
@interface Set : NSObject
{
// instance variables
int repetitions;
int weight;
}
// functions
- (id)init;
- (id)initWithReps: (int)newRepetitions andWeight: (int)newWeight;

@implementation Set
-(id)init
{
if (self = [super init]) {
    repetitions = 0;
    weight = 0;
}
return self;
}

-(id)initWithReps: (int)newRepetitions andWeight: (int)newWeight
{
if (self = [super init]) 
{
    repetitions = newRepetitions;
    weight = newWeight;
}
return self;
}

@implementation eFit2Tests

- (void)setUp
{
[super setUp];
// Set-up code here.
}

- (void)tearDown
{
// Tear-down code here. 
[super tearDown];
}

- (void)testInitWithParam
{
Set* test = nil;
test = [test initWithReps:10 andWeight:100];
NSLog(@"Num Reps: %d", [test reps]);
if([test reps] != 10) {
    STFail(@"Reps not currectly initialized. (initWithParam)");
}
NSLog(@"Weight: %d", [test weight]);
if([test weight] != 100) {
    STFail(@"Weight not currectly initialized. (initWithParam)");
}
} 
```

For some reason the test at the bottom of this code snippet fails because the values of repetitions and weight are always equal to 0\. I come from a background in Java and am clueless as to why this is the case. Sorry for the silly question...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:40:36.620

您设置`test`为零，然后发送它`initWithReps:andWeight:`。这相当于`[nil initWithReps:10 andWeight:100]`，这显然不是你想要的。`nil`只是以自身或 0 响应任何消息，因此 init 消息返回 nil，发送`reps`到 nil 则返回 0。

要创建一个对象，你需要`alloc`类方法——即`Set *test = [[Set alloc] initWithReps:10 andWeight:100]`. （如果您不使用 ARC，则根据内存管理指南，您需要在完成后释放该对象。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:40:27.493

在初始化集合的地方，将其替换为：

```
Set *test = [[Set alloc] initWithReps: 10 andWeight: 100]; 
```

你得到 0 因为这是 nil 对象的默认返回（你已经将 test 初始化为 nil）——Objective-C 中没有 NullPointerExceptions

# jquery - jQuery done 方法使用

> ID：13500781
> 
> 赞同：0
> 
> 时间：2012-11-21T19:37:04.773
> 
> 标签：jquery

我有一个小脚本来演示我的问题，这里是 test.html 页面的 javascript 代码

```
<script>
    function test(e) {
        if(e < 2) {
            return;
        } else {
            return $.ajax({
                type: "POST",
                url: "test.php",
                data: {
                    e: e
                },
                success: function (data) {
                    alert(data);
                }
            });
        }
    }

    $(document).ready(function () {    
        $(document).on("click", "#bth", function () {    
            test(1).done(function () {
                alert('done');
            });
        });

    });
</script> 
```

和

```
<body>
    <input type="button" id="bth" value="OK" />
</body> 
```

在 test.php 我放

```
<?php echo $_POST['e']; ?> 
```

我在这一行遇到了 javascript 错误：`test(1).done(function(){`

如果参数不止一个（例如`test(2)`），它可以正常工作。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T19:38:48.167

如果`e < 2`，您的函数不会返回任何内容。
你不能打电话`.done()`。`undefined`

相反，您可以返回一个预先解析的延迟对象：

```
return $.Deferred().resolve(someResult) 
```

# git - NetBeans 未在源代码编辑器中显示版本更改

> ID：13500786
> 
> 赞同：4
> 
> 时间：2012-11-21T19:37:16.007
> 
> 标签：git, netbeans

我正在使用带有 git 的 NetBeans IDE 7.2.1。当我在 git 托管存储库中更改文件时，NetBeans 不显示更改指示（[请参阅此处了解我的意思）。](http://netbeans.org/kb/docs/ide/git.html#viewChanges)我在哪里可以启用此行为？

![在此处输入图像描述](../Images/fe902592b1aaf5d892393fc8e0946eb4.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T19:44:26.247

首先，`Tools > Plugins > Installed`确保 Git 存在。如果没有，您可以从 NetBeans 目录安装它。

然后，`Tools > options > Misc > Versioning`确保 Git 在那里。

在 7.1.2 中为我工作。

对于格式，请转到`View > Show diff sidebar`

# jquery - jquery error g.handle.h

> ID：13500787
> 
> 赞同：0
> 
> 时间：2012-11-21T19:37:31.387
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

I am running into a funny error when I publish my web application. Note this doesn't happen on all the computers. Only on the selected few computers. I am using Chorme as the browser and have verified that two different computers have the same browser version. Ajax Post works fine on one computer and the other it doesn't.

I point to the latest jQuery file available at google.

[https://developers.google.com/speed/libraries/devguide#jquery](https://developers.google.com/speed/libraries/devguide#jquery) [https://developers.google.com/speed/libraries/devguide#jquery-ui](https://developers.google.com/speed/libraries/devguide#jquery-ui)

This is the error I am getting when a Ajax Post is made: ![Console View](../Images/ed15222f8d8e48e265527ffe9b37c6e8.png)

# xml - SlowCheetah 没有在构建时转换文件

> ID：13500789
> 
> 赞同：30
> 
> 时间：2012-11-21T19:37:33.917
> 
> 标签：xml, web.config-transform, slowcheetah, xdt-transform, config-transformation

我有一个项目正在尝试使用 SlowCheetah。我已经在构建配置中创建了我的配置文件 (Test.web.config) 和我想要使用的所有转换 (Debug_Mock.config、Debug_SQL.config、Release) 我有一个构建后事件应该复制转换后的文件进入另一个目录，但找不到该文件

（错误 xcopy 以代码 4 退出）

SlowCheetah 似乎没有像我预期的那样转换文件并将其放在输出目录（bin 文件夹）中。有没有人知道为什么它没有发生，也许是某个地方的设置？

仅供参考：此过程适用于具有相同项目的另一台机器。据我所知，同样的设置也是如此。但我可能没有找对地方。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-11-24T20:46:12.877

对我来说，我发现问题是配置文件中的慢 cheetah 属性组位于它检查是否存在的部分下方。

因此，修复只是将属性组移到该行上方的某个位置，以允许转换按预期运行。

把这个：

```
<PropertyGroup Label="SlowCheetah">
  <SlowCheetahToolsPath>$([System.IO.Path]::GetFullPath( $(MSBuildProjectDirectory)\..\packages\SlowCheetah.2.5.10.3\tools\))</SlowCheetahToolsPath>
  <SlowCheetah_EnableImportFromNuGet Condition=" '$(SC_EnableImportFromNuGet)'=='' ">true</SlowCheetah_EnableImportFromNuGet>
  <SlowCheetah_NuGetImportPath Condition=" '$(SlowCheetah_NuGetImportPath)'=='' ">$([System.IO.Path]::GetFullPath( $(MSBuildProjectDirectory)\Properties\SlowCheetah\SlowCheetah.Transforms.targets ))</SlowCheetah_NuGetImportPath>
  <SlowCheetahTargets Condition=" '$(SlowCheetah_EnableImportFromNuGet)'=='true' and Exists('$(SlowCheetah_NuGetImportPath)') ">$(SlowCheetah_NuGetImportPath)</SlowCheetahTargets>
</PropertyGroup> 
```

在此之上：

```
<Import Project="$(SlowCheetahTargets)" Condition="Exists('$(SlowCheetahTargets)')" Label="SlowCheetah" /> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-14T14:04:35.203

检查您的项目，如果存在名为*SlowCheetah*的文件夹，其中包含文件*SlowCheetah.Transforms.targets*。如果此文件丢失，请尝试以下步骤：

1.  右键单击解决方案
2.  “管理用于解决方案的 NuGet 包...”，浏览 SlowCheetah
3.  点击“管理”
4.  取消选择您的项目，然后单击“确定”
5.  再次点击“管理”
6.  选择您的项目并再次单击“确定”

这将重新创建丢失的文件。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-28T03:45:19.677

*   启用构建详细度 ( `Tools -> Options -> Projects and Solutions -> Build and Run`) 并查看正在运行的版本与未运行的版本之间的差异。

*   据我所知，slow-Cheetah 支持`app.config`文件的配置转换，但目前不支持`web.configs`调试。它应该将转换`web.config`后的文件放在项目的`bin`文件夹中，但您的项目仍从`config file`根文件夹中读取。请查看 [http://sedodream.com/CommentView,guid,68b7e248-b9f5-4d07-bdfe-eb037bcf2cbb.aspx](http://sedodream.com/CommentView,guid,68b7e248-b9f5-4d07-bdfe-eb037bcf2cbb.aspx)上的构建前/构建后事件。

*   [您可以在https://github.com/sayedihashimi/slow-cheetah/issues/39](https://github.com/sayedihashimi/slow-cheetah/issues/39)上的调试请求 Web 配置转换支持

*   尝试重新安装 Slow-Cheetah。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-02-11T01:53:50.707

请注意，您必须为相关项目安装 SlowCheetah Visual Studio 扩展**和**SlowCheetah nuget 包，才能进行转换。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-15T20:30:25.377

如上所述重新安装后，我需要将`subType`and`transformOnBuild`节点添加到我的 csproj 文件中，它开始为我工作。

```
<None Include="App.config">
  <SubType>Designer</SubType>
  <TransformOnBuild>true</TransformOnBuild>
</None> 
<None Include="App.QA.config">
  <DependentUpon>App.config</DependentUpon>
  <IsTransformFile>True</IsTransformFile>
</None> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-07-08T16:49:01.160

使用 SlowCheetah 2.5.15 和 Visual Studio 2015，我必须卸载 nuget 包，然后从相关的 .csproj 文件中手动删除以下内容：

```
<Import Project="$(SlowCheetahTargets)" Condition="Exists('$(SlowCheetahTargets)')" Label="SlowCheetah" /> 
```

和

```
<PropertyGroup Label="SlowCheetah">
  <SlowCheetahToolsPath>$([System.IO.Path]::GetFullPath( $(MSBuildProjectDirectory)\..\packages\SlowCheetah.2.5.15\tools\))</SlowCheetahToolsPath>
  <SlowCheetah_EnableImportFromNuGet Condition=" '$(SlowCheetah_EnableImportFromNuGet)'=='' ">true</SlowCheetah_EnableImportFromNuGet>
  <SlowCheetah_NuGetImportPath Condition=" '$(SlowCheetah_NuGetImportPath)'=='' ">$([System.IO.Path]::GetFullPath( $(MSBuildProjectDirectory)\Properties\SlowCheetah\SlowCheetah.Transforms.targets ))</SlowCheetah_NuGetImportPath>
  <SlowCheetahTargets Condition=" '$(SlowCheetah_EnableImportFromNuGet)'=='true' and Exists('$(SlowCheetah_NuGetImportPath)') ">$(SlowCheetah_NuGetImportPath)</SlowCheetahTargets>
</PropertyGroup> 
```

完成此操作并重新安装 SlowCheetah nuget 包后，我的问题就解决了。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-20T20:51:02.130

SlowCheetah 3.2.20 添加了一个，呃，“功能”，旨在尊重 Visual Studio 中的“请勿复制”文件设置。因此，如果您没有将 .config 文件设置为“始终复制”或“如果较新则复制”，它不会将它们复制到输出文件夹。

有关详细信息，请参阅[https://github.com/Microsoft/slow-cheetah/issues/182](https://github.com/Microsoft/slow-cheetah/issues/182)。

这是我的问题 - 花了三个小时调试它......

# ios - RTMP video streaming for ios like (wowza media server)

> ID：13500790
> 
> 赞同：1
> 
> 时间：2012-11-21T19:37:38.803
> 
> 标签：ios, iphone, ipad, rtmp

I am working on video playing application which is support to play an video. I am implementing RTMP video streaming for iOS (i.e wowza media server). So please help me how to use this RTMP streaming for playing the video in ios6.

# java - 如何在原始数据文件中使用块分隔符？

> ID：13500791
> 
> 赞同：3
> 
> 时间：2012-11-21T19:37:44.530
> 
> 标签：java

我想将原始数据块保存到文件中，然后一一读取这些块。除了以下疑问之外，这没什么大不了的：

使用什么确切字节作为分隔符，即识别一个块的结尾和下一个块的开始？鉴于块数据也可能随机包含这样的字节序列。

注意：块的大小可变并且包含随机数据。它们`jpeg`实际上是图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:16:59.223

您可以首先将块的长度作为固定大小的值写入文件，例如 4 字节整数，然后是数据本身：

```
public void appendChunk(byte[] data, File file) throws IOException {
    DataOutputStream stream = null;
    try {
        stream = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(file, true)));
        stream.writeInt(data.length);
        stream.write(data);
    } finally {
        if (stream != null) {
            try {
                stream.close();
            } catch (IOException e) {
                // ignore
            }
        }
    }
} 
```

如果您以后必须从该文件中读取块，则首先读取第一个块的长度。您现在可以决定是否读取块数据，或者是否跳过它并继续下一个块。

```
public void processChunks(File file) throws IOException {
    DataInputStream stream = null;
    try {
        stream = new DataInputStream(new BufferedInputStream(new FileInputStream(file)));
        while (true) {
            try {
                int length = stream.readInt();
                byte[] data = new byte[length];
                stream.readFully(data);
                // todo: do something with the data
            } catch (EOFException e) {
                // end of file reached
                break;
            }
        }
    } finally {
        if (stream != null) {
            try {
                stream.close();
            } catch (IOException e) {
                // ignore
            }
        }
    }
} 
```

您还可以添加有关块的其他元数据，例如使用 stream.writeUTF(...) 写入文件的原始名称。您只需确保以相同的顺序写入和读取相同的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:52:09.857

创建第二个文件，在其中将块的字节范围保存在块文件中，或将该信息添加到块文件的标题中。做过一次类似的事情，不要忘记字节范围比标题长度的额外偏移量。

```
int startbyte = 0;
int lastByte = 0;
int chunkcount = 0;
File chunkfile;
File structurefile;
for (every chunk) {
    append chunk to chunkfile
    lastByte = startByte + chunk.sizeInBytes()
    append to structurefile: chunkcount startByte lastByte
    chunkcount++;
    startByte = lastByte + 1
} 
```

# xcode - xcodebuild 命令在命令行运行时与在 Jenkins 中运行时给出不同的结果

> ID：13500793
> 
> 赞同：22
> 
> 时间：2012-11-21T19:37:47.147
> 
> 标签：xcode, jenkins, xcodebuild

我正在使用 Jenkins 设置 CI 系统，但发现构建失败，因为 xcodebuild 在我执行该行时报告没有方案

-xcodebuild -workspace XXX -scheme NNN。

我不知道为什么会发生这种情况，所以为了消除我的工作区的一些麻烦，我使用 XCode 创建了一个新的项目模板，发现我在任何 xcodebuild 命令和任何工作区/项目的行为上都有所不同.

模板项目被称为废品，如果从终端命令行我运行这个命令，例如：

```
 xcodebuild -list 
```

它输出

```
Information about project "scrap":
    Targets:
        scrap

    Build Configurations:
        Debug
        Release

    If no build configuration is specified and -scheme is not passed then "Release" is used.

    Schemes:
        scrap 
```

但是，如果我从 Jenkins 中运行 xcodebuild -list，那么输出将是：

```
Building in workspace /Users/Shared/Jenkins/Home/workspace/scrap
[scrap] $ /bin/sh -xe /var/folders/ph/s6dvlfq9769741g_yzmjlmz000007c/T/hudson3765407964219991487.sh
+ xcodebuild -list
Information about project "scrap":
    Targets:
        scrap

    Build Configurations:
        Debug
        Release

    If no build configuration is specified and -scheme is not passed then "Release" is used.

    This project contains no schemes. 
```

这是最简单的 jenkins 作业 - 我所做的就是创建一个新作业，将其设置为自由风格的软件项目，然后添加 Execut shell 的构建步骤并添加 xcodebuild -list 命令，就是这样。

为什么 xcodebuild 说有方案时没有方案？为什么它在 Jenkins 内部运行时表现不同？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-21T23:06:14.733

发现您需要做的就是设置要共享的方案。方案 > 管理方案 确保选中“共享”。

这将生成一个新的文件夹/文件 .../xcshareddata/xcschemes/???.xcscheme

将此文件检查到您的源代码管理中，并且方案现在应该出现在您的 jenkins 框中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-20T02:39:23.683

您必须忽略.gitignore 文件中的*.xcodeproj/xcuserdata/ .xcuserdatad 。*xcodebuild -list 从*.xcodeproj/xcuserdata/* .xcuserdatad/xcschemes 获取方案。jenkins服务器没有这个文件所以没有获取方案，你可以在你的jenkins服务器中打开*.xcodeproj，它会创建文件然后执行xcodebuild -list可以得到当前的方案。我有同样的问题，通过上面的方法解决了.

# c# - 是否可以使用带有 %% 的路径？

> ID：13500796
> 
> 赞同：1
> 
> 时间：2012-11-21T19:37:51.533
> 
> 标签：c#, path

> **可能重复：**
> [C# 获取 %AppData% 的路径](https://stackoverflow.com/questions/867485/c-sharp-getting-the-path-of-appdata)

我正在尝试`StreamReader`使用`%appdata%/folder/file.txt`. 我所有的尝试都以文件未找到异常告终。有没有办法可以打开这种类型的路径或以其他方式确定它指向的实际位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:40:49.673

试试看：

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "/folder/file.txt"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:41:18.510

[在 .NET 中，使用System.Environment.SpecialFolders.ApplicationData](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)而不是使用 %appdata%

```
string path = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)); 
```

# php - 使用 Joomla 2.5 获取 $_POST

> ID：13500803
> 
> 赞同：5
> 
> 时间：2012-11-21T19:38:06.607
> 
> 标签：php, html, forms, post, joomla

这是我的表格，它看起来是正确的，所以这不应该是一个问题，我还删除了 enctype 以确保它不是那个问题。

```
 <form action="<?php echo JRoute::_('index.php?option=com_woo&task=hello.create'); ?>" enctype="multipart/form-data" method="post">
      <p>
        Project Name : 
        <input style="width:30%;" name="name" id="name"/>
        <input style="display:none;" id="user_id" name="user_id" value="<?php echo $user->id;?>"/>
        <input style="display:none;" id="county" name="county"/>
        <input style="display:none;" id="state" name="state"  />
      </p>
      <button type="submit" class="btn-green" id="select_county">Create Project</button>
    </form> 
```

内部控制器你好

```
 public function create()
    {
       $jinput = JFactory::getApplication()->input;
       $foo = $jinput->get('state', '', 'filter');
       print_r($foo);
       die;
    } 
```

返回“空”

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T09:14:20.380

你可以试试这个——

```
$input = JFactory::getApplication()->input;
$post_array = $input->getArray($_POST); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T14:15:16.517

```
$input = new JInput;
$name = $input->get('name', '', 'post');
$country = $input->get('country', '', 'post');
// etc. 
```

然后可以针对特定目的使用一系列 JInput 类方法：

```
 // method      integer  getInt()       getInt($name, $default = null)    Get a signed integer.
 // method      integer  getUint()      getUint($name, $default = null)   Get an unsigned integer.
 // method      float    getFloat()     getFloat($name, $default = null)  Get a floating-point number.
 // method      boolean  getBool()      getBool($name, $default = null)   Get a boolean.
 // method      string   getWord()      getWord($name, $default = null)
 // method      string   getAlnum()     getAlnum($name, $default = null)
 // method      string   getCmd()       getCmd($name, $default = null)
 // method      string   getBase64()    getBase64($name, $default = null)
 // method      string   getString()    getString($name, $default = null)
 // method      string   getHtml()      getHtml($name, $default = null)
 // method      string   getPath()      getPath($name, $default = null)
 // method      string   getUsername()  getUsername($name, $default = null) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-29T10:00:56.460

我认为使用 JInput 获取整个 $_POST 的最佳选择是

```
JFactory::getApplication()->input->post->getArray(); 
```

如果您想从请求中获取特定数组（例如称为“jform”），请使用

```
JFactory::getApplication()->input->get('jform', array(), 'ARRAY'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-30T09:56:33.377

您可以从特定的超级全局获取值

```
$foo = $jinput->get->get('varname', 'default_value', 'filter');

$foo = $jinput->post->get('varname', 'default_value', 'filter');

$foo = $jinput->server->get('varname', 'default_value', 'filter'); 
```

有关更多信息，请转到[使用 JInput 检索请求数据](http://docs.joomla.org/Retrieving_request_data_using_JInput)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-21T21:11:00.307

您可以尝试将表单操作更改为：

```
<?php echo JRoute::_('index.php?option=com_woo&view=hello&task=create'); 
```

由于您的任务被称为 create not hello.create 它可能会以这种方式更好地工作......

然后我总是这样做

```
$post = JRequest::get('post');
print_r($post['state']); 
```

# r - R - 聚合和重新排列

> ID：13500805
> 
> 赞同：1
> 
> 时间：2012-11-21T19:38:10.057
> 
> 标签：r

我有以下数据框“myData”

```
 NAME GAME    STATUS
1 aaa  poker   PASSED
2 bbb  poker   FAILED
3 aaa  tennis  PASSED
4 bbb  tennis  PASSED 
```

我想要以下输出

```
 NAME  FAILED PASSED TOTAL
1 aaa     0      2      2
2 bbb     1      1      2 
```

我尝试了以下代码

```
myResult <- as.data.frame(table(myData[,c("NAME","STATUS")])) 
```

上面的代码给了我

```
 NAME  STATUS   Freq
1 aaa   FAILED   0
2 aaa   PASSED   2
3 bbb   FAILED   1
4 bbb   PASSED   1 
```

在这一点上，我不确定如何旋转“myResult”以获得我需要的格式。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:02:34.293

这是具有基本 R 功能的解决方案：

```
myResult <- as.data.frame(unclass(xtabs( ~ NAME + STATUS, myData)))
myResult$TOTAL <- rowSums(myResult)

    FAILED PASSED TOTAL
aaa      0      2     2
bbb      1      1     2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:42:13.947

对于这类事情，我经常使用`dcast`reshape2**包**：

```
dat <- read.table(text = "  NAME GAME    STATUS
1 aaa  poker   PASSED
2 bbb  poker   FAILED
3 aaa  tennis  PASSED
4 bbb  tennis  PASSED",header = TRUE,sep = "",row.names = 1)

library(reshape2)
dcast(dat,NAME~STATUS,
        fun.aggregate = length,
        value.var = "STATUS",
        margins = "STATUS") 
```

# continuous-integration - 启动远程 Bamboo 代理时出错：收到响应指纹请求的 HTTP 状态代码 500

> ID：13500810
> 
> 赞同：0
> 
> 时间：2012-11-21T19:38:38.263
> 
> 标签：continuous-integration, bamboo

启动远程 Bamboo 代理时出现以下错误：

```
INFO   | jvm 1    | 2012/11/20 01:15:58 | 2012-11-20 01:15:58,235 INFO [WrapperSimpleAppMain] [RemoteAgentHomeLocatorForBootstrap] Agent home located at '/Users/user9066/bamboo-agent-home'
INFO   | jvm 1    | 2012/11/20 01:15:58 | 2012-11-20 01:15:58,248 INFO [WrapperSimpleAppMain] [AgentUuidInitializer] Found agent UUID <snip> in temporary UUID file '/Users/user9066/bamboo-agent-home/uuid-temp.properties'
INFO   | jvm 1
    | 2012/11/20 01:15:58 | 2012-11-20 01:15:58,378 INFO [WrapperSimpleAppMain] [AgentContext] Requesting fingerprint, url: http://<bamboo-server-ip>:8090/bamboo/AgentServer/GetFingerprint.action?hostName=<remote-agent-ip>&version=3&agentUuid=<snip>
ERROR  | wrapper  | 2012/11/20 01:15:58 | JVM exited while starting the application.
INFO   | jvm 1    | 2012/11/20 01:15:58 | Exiting due to fatal exception.
INFO   | jvm 1    | 2012/11/20 01:15:58 | com.atlassian.bamboo.agent.bootstrap.RemoteAgentHttpException: HTTP status code 500 received in response to fingerprint request.
INFO   | jvm 1    | 2012/11/20 01:15:58 |   at com.atlassian.bamboo.agent.bootstrap.AgentContext.initFingerprint(AgentContext.java:131) 
```

端口 8085 和 54663 已打开。启用 log4j 也不会提供任何附加信息。

有没有人看到这个错误？请问有解决这个问题的指点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:09:18.063

我有一个类似的错误。我似乎通过下载名为bamboo-agent-4.2.0.jar 的替代远程代理安装程序来修复它。您可以在主远程代理下载按钮下方的小链接中找到它。

一旦我运行了这个 jar 并成功通过了身份验证，原来的 jar 就可以工作了。

# python - 如何在 Python 的日志记录模块中使用现代字符串格式化选项？

> ID：13500813
> 
> 赞同：16
> 
> 时间：2012-11-21T19:38:42.460
> 
> 标签：python, logging

[Python 日志教程](http://docs.python.org/2/howto/logging.html#logging-variable-data)说新的格式化方法超出了教程的范围，没有提到在哪里学习它。

我将不胜感激任何示例或文档链接，这些示例或链接允许我`.format()`在记录调用时使用样式消息格式，例如`debug()`,`info()`等。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-21T19:41:22.690

最近，我也在找那个。我想我在 SO 上得到了解决方案，但我手头只有最终的 url。这就是我所做的：

```
# http://plumberjack.blogspot.de/2010/10/supporting-alternative-formatting.html
class BraceMessage(object):
    def __init__(self, fmt, *args, **kwargs):
        self.fmt = fmt
        self.args = args
        self.kwargs = kwargs

    def __str__(self):
        return self.fmt.format(*self.args, **self.kwargs)

_F = BraceMessage 
```

可以这样使用：

```
logger.debug(_F("foo {0} {quux}", bar, quux=baz)) 
```

格式化只会在评估消息的那一刻发生，因此如果禁用日志级别，您不会损失很多性能。上面那个片段的作者将这个（和其他一些实用程序）作为一个包提供：[`logutils`](http://pypi.python.org/pypi/logutils/).

# php - mysql结果按数组排序

> ID：13500814
> 
> 赞同：0
> 
> 时间：2012-11-21T19:38:46.017
> 
> 标签：php, mysql, sorting

我想我不明白“排序”是如何工作的，所以请不要评判我。我真的整天都在寻找。

我有一个带有演员列的电影表。一个名为“演员”的列。演员是由空格“”分隔的链接。链接的顺序非常重要。

我将链接分解成一个数组，看起来像 [0]-> link0, [1]->link1, ...

我有演员表，每个演员也有它的电影链接。我不想进行 20 次不同的 sql 搜索，所以我用我想要的所有链接创建了一个变量，就像这样（WHERE `actor_link`= link1 OR `actor_link`= link2 OR ..）

问题是这样的。搜索可能会首先找到link7，所以我的排序已经消失了。我能做些什么来保持电影表中的顺序。我想按电影中的受欢迎程度来显示演员，而不是我的数据库的顺序。

你能给我另一种方法来搜索演员而不进行'x' sql搜索并且仍然保持顺序吗？

```
$actors[] = explode(" ", $row['actors_link']); 
$x=0;
$actors2 = '';
while ($actors[0][$x]) {
  $actors2 = $actors2 . "`link_imdb_actor` = " . "'".$actors[0][$x]."' OR ";
  $x++;
}
$actors2 = substr($actors2, 0, -3);

$sql = "SELECT * FROM `actors` WHERE $actors2";
$sql_result = mysql_query($sql) or die(" ");
while ($row3 = mysql_fetch_array($sql_result)) {
  echo $row3['link_imdb_actor'];
} 
```

所以，电影特兰西瓦尼亚酒店有亚当·桑德勒、安迪·萨姆伯格和赛琳娜·戈麦斯。我的搜索显示了 Selena Gomez、Andy Samberg、Adam Sandler，因为这是我数据库中的订单。如何按演员数组的顺序对 sql 结果进行排序？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:23:54.037

为了扩展 Arjan 的评论，如果您希望能够实际使用参与者数据（例如使用它进行搜索），我建议您至少再添加两个表。一个称为actors，字段为actorID、firstName 和lastName。另一个表将是具有 castID、actorID、movieID 和 castOrder 字段的演员表。

然后，每个 castID 将一个演员链接到一部电影 - 这将便于搜索特定演员出演的每部电影或特定电影中的每个演员。

castOrder 字段可用于维护您想要的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:43:24.970

我需要您现有的代码才能真正了解正在发生的事情。

我将在您的查询中提出一项建议。而不是说 WHERE actor_link = a OR actor_link = b OR actor_link = c 这样做：

```
WHERE actor_link IN (link1, link2, link3) 
```

# php - 在 PhalconPHP 中附加多个配置数组

> ID：13500816
> 
> 赞同：1
> 
> 时间：2012-11-21T19:38:51.437
> 
> 标签：php, phalcon

目前，我正在引导程序中加载多个包含 PHP 本机数组的配置文件。

```
require "app/configuration/config-global.php";
require "app/configuration/config-other.php"; 
```

通过此设置，“config-other.php”将覆盖“config-global.php”的 $settings 数组。

我能否就在我的引导程序中附加数组的最佳方式获得一些建议。

蒂姆

**更新**

这是我尝试实施 Nikolaos 建议的引导文件设置的精简版本。

```
class Application extends \Phalcon\Mvc\Application
{

    /**
     * Register the services here to make them general or register in the ModuleDefinition to make them module-specific
     */
    public function _registerServices()
    {

        //Define constants
        $di = new \Phalcon\DI\FactoryDefault();

        $loader = new \Phalcon\Loader();

        $di->set('registry', function () {
            return new ArrayObject(array(), ArrayObject::ARRAY_AS_PROPS);
        });

        //load our config into the registry
        //$di->set('config', $config);

        $this->setDI($di);
    }

    public function _loadConfig()
    {

        $di = \Phalcon\DI::getDefault();

        $this->processConfig('appConfig1');
        $this->processConfig('globalConfig');

        // Remember config_array is the merged array in the DI container
        $new_array = $di->registry->offsetGet('config_array');

        // Optional, store the config in your DI container for easier use
        $di->set('config', function () use ($new_array) {
                return new \Phalcon\Config($config);
            }
        );

    }

    public function main()
    {

        $this->_registerServices();
        $this->_loadConfig();

        echo $this->handle()->getContent();
    }

    public function processConfig($name)
    {

    $config = array();
    $di     = \Phalcon\DI::getDefault();

    if ($di->registry->offsetExists('config_array'))
    {
        $config = $di->registry->offsetGet('config_array');
    }

    // Now get the file from the config
    require "/config/{$name}.php";

    // $settings came from the previous require
    $new_config = array_merge($config, $settings);

    // Store it in the DI container
    $di->registry->offsetSet('config_array', $new_config);

    }

}

$application = new Application();
$application->main(); 
```

通过上面的配置，我得到：

> [02-Dec-2012 09:10:43] PHP 通知：未定义的属性：Phalcon\DI\FactoryDe​​fault::$registry 在 /public/frontend/index.php 第 127 行
> 
> [02-Dec-2012 09:10:43] PHP 致命错误：在第 127 行的 /public/frontend/index.php 中的非对象上调用成员函数 offsetExists()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T23:38:47.390

试试这个：

在 DI 容器中注册一个新服务

```
// Get the DI container
$di = \Phalcon\DI::getDefault();

$di->set(
    'registry', 
    function ()
    {
        return new ArrayObject(array(), ArrayObject::ARRAY_AS_PROPS);
    }
); 
```

以上将是我们将存储配置文件的“注册表”。

```
public function processConfig($name)
{
    $config = array();
    $di     = \Phalcon\DI::getDefault();

    if ($di->registry->offsetExists('config_array'))
    {
        $config = $di->registry->offsetGet('config_array');
    }

    // Now get the file from the config
    require ROOT_PATH . "app/configuration/{$name}.php";

    // $settings came from the previous require
    $new_config = array_merge($config, $settings);

    // Store it in the DI container
    $di->registry->offsetSet('config_array', $new_config);
} 
```

作为用法，您可以这样做：

```
processConfig('config-global');
processConfig('config-other');

// Remember config_array is the merged array in the DI container
$di = \Phalcon\DI::getDefault();

// Remember config_array is the merged array in the DI container
$new_array = $di->registry->offsetGet('config_array');

// Optional, store the config in your DI container for easier use
$di->set(
    'config', 
    function () use ($new_array)
    {
        return new \Phalcon\Config($config);
    }
}; 
```

容器中的`config`数组现在具有合并的数据。

您还可以创建一个封装该功能的类，并在其中包含其他帮助函数以清除 DI 容器引用，以始终加载基本数组（全局）等。

**编辑**：评论后稍作修改

# jquery - 使用 jQuery 将包含 ReportView 的 aspx 页面加载到 div 中

> ID：13500819
> 
> 赞同：2
> 
> 时间：2012-11-21T19:39:01.773
> 
> 标签：jquery, asp.net

我正在尝试使用以下代码使用 jquery 将 aspx 页面加载到 div 中：

```
$("#divInsideParentPage").load("http://localhost/WebForm.aspx"); 
```

我的 WebForm.aspx 包含 ReportViewer 控件并包含 rdlc 报告。

问题是实际报告没有得到呈现。

当我使用 iFrame 时，报告会正确加载。我认为 jQuery .load 只是在 aspx 页面中加载静态 html 内容，而不是执行整个代码来加载 rdlc 报告。

# regex - 正则表达式中的整数和空格

> ID：13500825
> 
> 赞同：0
> 
> 时间：2012-11-21T19:39:21.993
> 
> 标签：regex

我正在尝试匹配包含整数和空格的字符串。有人可以帮我吗？字符串长度为 3 个字符。在下面的示例中，我使用了字符“b”来表示空格字符。

有效的字符串是，

1bb

12b

123

b12

bb1

无效的字符串是，

bbb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:42:47.930

使用这个正则表达式`(?=.*?\d)(?=.*? ).+`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:42:51.297

如果您知道字符串已经是 3 个字符，则可以使用

```
/^ {0,2}\d+ {0,2}$/ 
```

甚至更简单的

```
/^ *\d+ *$/ 
```

这是前面的可选空格，加上一个强制数字（或更多），最后是可选空格。

一个假设`b2b`也被认为是可以接受的。如果没有，那么

```
/^(\d+ *)|( *\d+)$/ 
```

可以使用。

# regex - 在 RegEx 中拆分自然语言短语时遇到问题

> ID：13500827
> 
> 赞同：0
> 
> 时间：2012-11-21T19:39:40.337
> 
> 标签：regex

我正在尝试编写一个 RegEx 模式，该模式将提取自然语言短语的关键短语，以构建查询并返回数据。到目前为止，一切都很顺利，直到我遇到了一个问题，试图有效地将主要主题从句子中拉出来。例如：

假设我的短语是“显示上个月关闭的所有门票”。我可以解析构建查询所需的每个元素，但是如果我尝试“向我显示上周关闭的所有票证和请求”之类的东西，那么一切都会崩溃。

我很难同时获得两个主题（门票和请求）。理想情况下，它们将被放入单独的命名组中，例如**Measures:tickets、requests** and **logic: and** . 需要注意的是，某些度量可能包含空格，因此也必须加以考虑。

到目前为止，我只能想出这个：

```
(\S+\s?)+(?=and|or) 
```

当使用它的测试短语时，`"#sla met and tickets"`它只会拉#sla遇见。

我从昨天才开始使用正则表达式，所以任何提示都会很有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:46:03.000

一个快速的答案，**只解决问题的一个非常狭窄的部分**：

```
(.+)((and|or)(.+)) 
```

`and`这将抓取与或连接的任意数量的术语`or`。它不会为您单独捕获每个术语，但您可以`split`在`and`和上获取结果`or`。当然，您可以使用`.+`.

你看到问题了吗？**正则表达式不允许您解析自然语言**。你正试图用勺子穿过一座山。我实际上不得不删除并重新创建我的答案，因为我花了五分钟试图让捕获工作并最终放弃。这就是正则表达式对于这项任务的不足之处。

如果你真的想致力于解析自然语言，你需要开始阅读研究论文。很多。

**编辑**：这是一个正则表达式，它将找到多个匹配项（不是具有多个组的单个匹配项），每个匹配项都有一个作为项目的捕获组。

```
(?:\s+(?:and|or)\s+)?(\S+) 
```

免责声明：有很多方法可以欺骗这个正则表达式。我现在能想到三四个，但肯定不止这些。

# ios - 具有两个日期行的自定义 UIPickerView

> ID：13500832
> 
> 赞同：-1
> 
> 时间：2012-11-21T19:39:58.620
> 
> 标签：ios

我需要制作类似[http://alicia.mobile9.com/download/as/ios/04/16/416837150/screen7.jpg](http://alicia.mobile9.com/download/as/ios/04/16/416837150/screen7.jpg)的东西。是否有用于此类 UI 任务的现成库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:20:37.037

库是 UIKit，类是`UIPickerView`. `UIPickerViewDataSource`将选取器视图设置为具有两个组件，并通过实现适当的和`UIPickerViewDelegate`方法为每一行提供所需的标题。其实很简单。

# ruby-on-rails - 安装 ZenTest (4.8.2) 时出错，Bundler 无法继续。

> ID：13500837
> 
> 赞同：1
> 
> 时间：2012-11-21T19:40:08.850
> 
> 标签：ruby-on-rails, ruby, heroku, gem, zentest

**当我练习 Ruby on Rails 教程的第三章时。在大多是静态页面之后：结论。我试图将我的应用程序推送到heroku，但出现如下错误：（我到处搜索此错误但无法找到解决方案）**

```
Counting objects: 96, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (73/73), done.
Writing objects: 100% (79/79), 8.92 KiB, done.
Total 79 (delta 35), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.1
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Fetching gem metadata from https://rubygems.org/.........
       Fetching gem metadata from https://rubygems.org/..
       Installing rake (0.8.7)
       Installing ZenTest (4.8.2)
       Gem::InstallError: ZenTest requires RubyGems version ~> 1.8\. Try 'gem update --system' to update RubyGems itself.
       An error occurred while installing ZenTest (4.8.2), and Bundler cannot continue.
       Make sure that `gem install ZenTest -v '4.8.2'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:stark-tundra-9366.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:stark-tundra-9366.git' 
```

**我的 Gemfile 是这样的：**

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

gem 'sqlite3', :group => [:development, :test]

gem 'rb-fsevent', '~> 0.9.1'
gem "ZenTest", "~> 4.8.2"
gem 'rake', '~> 0.8.7'

group :development, :test do
  gem 'guard-spork', '1.2.0'
  gem 'spork', '0.9.2'
end

group :production do
  gem 'thin'
  gem 'pg'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :development do
  gem 'rspec-rails', '2.11.0'
end

group :text do
  gem 'rspec', '2.11.0'
  gem 'webrat', '0.7.2'
end 
```

我不知道这个应用程序有什么问题。我更改了 Zentest 版本并投入测试或生产，它没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T14:00:53.563

ZenTest 似乎限制了允许的最新 ruby​​gems。它的解决方案是更新 ZenTest 以及 ruby​​gems，因为最新的 ZenTest 似乎工作得更好。

# database - 将主键从字符串更改为数字的最简单方法

> ID：13500839
> 
> 赞同：2
> 
> 时间：2012-11-21T19:40:17.477
> 
> 标签：database, oracle, entity-framework, schema

我正在处理的数据库最初是（由其他人）将所有主键（和关联的外键）作为字符串进行原型设计的。键确实需要是数字的。

该数据库有 16 个表，其中包含最少的测试数据。所有数据在关键字段中都有数字。

我解决这个问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:29:46.970

不确定“最小测试数据”的确切含义，但您可以使用 SQL Developer 执行此操作：

1.  导出表 DDL
2.  将数据导出为插入语句
3.  修改 1 中生成的 DDL 脚本，将您的列更新为 NUMBER 类型
4.  删除并重新创建架构
5.  从 3 到 2 应用脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:04:19.017

我创建了一个 SQL 脚本来对单个关联进行更改，然后我将对其进行修改并重复 20 次以上。

我做了第一个表（MODULES.ID 到 MODULE_SESSIONS.MODULE_ID 关联）并且它有效。这是我使用的脚本：

```
alter table MODULE_SESSIONS drop constraint FK_MODULE_MODULE_SESSION_FK1;
alter table MODULES drop constraint MODULES_PK;
alter table MODULES rename column ID to OLD;
alter table MODULES add ID INTEGER;
update MODULES set ID = OLD;
alter table MODULES drop column OLD;
alter table MODULE_SESSIONS rename column MODULE_ID to OLD;
alter table MODULE_SESSIONS add MODULE_ID INTEGER;
update MODULE_SESSIONS set MODULE_ID = OLD;
alter table MODULES add constraint MODULE_PK primary key(ID); 
alter table MODULE_SESSIONS add constraint FK_MODULE_MODULE_SESSION_FK1 foreign key(MODULE_ID) references MODULES(ID);
alter table MODULE_SESSIONS drop column OLD; 
```

# django - 如何在 django admin 的 filter_horizo ntal 中优化加载用户

> ID：13500840
> 
> 赞同：6
> 
> 时间：2012-11-21T19:40:17.917
> 
> 标签：django

我有一个`ManyToManyField`模型`User`。

在 中`ModelAdmin`，我在 中填充用户`filter_horizontal`。但是，如果用户数量很大，它会使加载非常缓慢，甚至会挂起进程。这是因为它会触发单独的查询以获取每个用户的信息。

有没有办法优化加载过程，以便可以使用单个查询集加载所有用户？

# python - 如何在 ipython 中获得不同的点

> ID：13500841
> 
> 赞同：1
> 
> 时间：2012-11-21T19:40:19.270
> 
> 标签：python, matplotlib, ipython

```
plt.plot(jd1,spd1)
plt.plot(jd1,spd1,marker="o",markerfacecolor="r",linestyle='None')
plt.show()

print 'click on any obviously bad points and then press the enter key.'
badpoints=ginput(n=0)

index_badpoints=[]
badpoints_num=len(badpoints)
for i in range(len(badpoints)):
     index_badpoints.append(int(np.interp(badpoints[i][0],
                                          yeardays,
                                          range(len(yeardays)))))

print index_badpoints #always[107,107,107...] 
```

问题是无论我点击哪个点，我只能得到索引为 107 的点。有人可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T23:10:57.467

我无法测试你的版本，但我可以告诉你我将如何解决这个问题：

```
badpoints = np.array(ginput(n=0))
index_badpoints = np.argmin(abs(np.subtract(badpoints[:,0],yeardays)),axis=1) 
```

这会为 badpoints 计算沿 x 轴与 yeardays 的距离，并返回最接近的索引。

# fonts - 从现有的等宽字体创建粗体版本，同时保持宽度

> ID：13500842
> 
> 赞同：1
> 
> 时间：2012-11-21T19:40:20.800
> 
> 标签：fonts, bold, monospace

我有一个使用等宽字体的网站。但是不同的浏览器在字符宽度方面存在重大差异。**字体宽度保持完全相同是很重要的。**

我试过了：`font-weight: bold;`但这取决于浏览器，我无法使用负值来弥补额外的宽度`letter-space`。

我曾尝试在 Type Light 3.2 中创建自己的新派生字体，但这非常困难，尤其是弯曲字符很难更改。

我试图用绝对 div 将文本加倍，并设置 2px 变化的边距，效果很好，但这样做的缺点是你需要很多 div，这使得 IE7 和 IE8 在使用大时非常慢文本。

是否有另一种方法（自动首选）从 ttf/eot/woff/svg 字体派生粗体字体？例如，我知道 Java 可以创建粗体字体，但我可以将其保存到新的字体文件中吗？任何方式都对我有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T20:25:34.670

你可以使用 CSS3[`text-shadow`](https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow)技巧：

```
text-shadow: -.5px 0,  0 .5px,  .5px 0,  0 -.5px; 
```

当然，这在旧 IE 上不起作用，但你可以使用[发光滤镜](https://msdn.microsoft.com/en-us/library/ms532995%28v=vs.85%29.aspx)：

```
filter: glow(color:black,strength=1); 
```

另请注意，在我测试的所有浏览器上，当使用内置的 时`font-family: monospace`，粗体字重不会改变字符的宽度。所以它可能不需要负数`letter-spacing`。

```
font-weight: bold; 
```

```
div {
  font-family: monospace;
}
.ie-trick-bold {
  filter: glow(color:black,strength=1);
}
.css3-trick-bold {
  text-shadow: -.5px 0,  0 .5px,  .5px 0,  0 -.5px;
}
.normal-bold {
  font-weight: bold;   
}
```

```
<div class="css3-trick-bold">Hello World! (CSS3 trick)</div>
<div class="ie-trick-bold">Hello World! (IE trick)</div>
<div class="normal-bold">Hello World! (default bold)</div>
<div>Hello World! (normal text)</div>
```

# objective-c - 在返回键 [UITextField] 上隐藏键盘并在之后调用函数

> ID：13500847
> 
> 赞同：0
> 
> 时间：2012-11-21T19:40:42.200
> 
> 标签：objective-c, ios, ios6

所以我试图简单地每当用户按下 UITextField 上的返回键时，键盘就会被隐藏，然后它会调用一个函数。现在我有：

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    if(textField == _currentPasswordField)
    {
        [textField resignFirstResponder];
        [_passwordField becomeFirstResponder];
        return YES;
    }
    else if (textField == _passwordField)
    {
        [textField resignFirstResponder];
        [_confirmPasswordField becomeFirstResponder];
        return YES;
    }
    else
    {
        [textField resignFirstResponder];
        [self changePassword];
        return YES;
    }
} 
```

但是在整个 changePassword 函数返回后，键盘就被隐藏了。我怎样才能隐藏它然后调用我的函数？！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:58:18.503

问题是您的`changePassword`方法需要很长时间才能运行，因为它正在通过网络与服务器通信。

所有用户界面更新，例如键盘隐藏动画，都是从主线程触发的。当您在主线程上调用慢速方法时，您会阻止这些用户界面更新发生。

您需要将调用`changePassword`移出主线程。有很多方法可以做到这一点。最简单的方法之一是使用 Grand Central Dispatch (GCD)，如下所示：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [self changePassword];
}); 
```

但是，除非您的`changePassword`方法是线程安全的，否则这是不安全的，因此您需要考虑您在做什么`changePassword`以及它在后台线程上运行而其他方法在主线程上运行时会发生什么。

您需要阅读[*并发编程指南*](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)，或观看一些 WWDC 视频，例如 Session 211 - Simplifying iPhone App Development with Grand Central Dispatch from [WWDC 2010](https://developer.apple.com/videos/wwdc/2010/)。

# linq-to-entities - 无法将类型“System.String”转换为类型“System.Object”。LINQ to Entities 仅支持转换实体数据模型基元类型

> ID：13500848
> 
> 赞同：0
> 
> 时间：2012-11-21T19:40:41.997
> 
> 标签：linq-to-entities

当我运行以下查询（VB 中的 asp.net）时，我得到“无法将类型 'System.String' 转换为类型 'System.Object'。LINQ to Entities 仅支持转换实体数据模型原始类型。” 错误。我已经尝试了多次查询，但得到了错误。

我认为这与连接和选择有关。有任何想法吗？

*来自评论*

```
query = (from p in context.Clients 
                join j in context.Loans on p.Number equals j.ClientNum 
                join lb in context.LIBORs on lb.LoanNum equals j.LoanNum 
                join w in context.WUserIDs on w.RegionNum equals j.RegionNum 
                join f in context.FASBs on f.LoanNum equals j.LoanNum 
         select j.RateType, j.LoanNum, lb, w, f).ToList() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:22:44.260

您需要更改两件事： 1\. 使用连接条件指定第一个变量，然后指定第二个。2\. 选择单个对象。

```
var query = (from p in context.Clients 
                join j in context.Loans on p.Number equals j.ClientNum 
                join lb in context.LIBORs on j.LoanNum equals lb.LoanNum
                join w in context.WUserIDs on j.RegionNum equals w.RegionNum
                join f in context.FASBs on j.LoanNum equals f.LoanNum
         select new { j.RateType, j.LoanNum, lb, w, f}).ToList(); 
```

# python - 更改日期语言。姜戈

> ID：13500850
> 
> 赞同：0
> 
> 时间：2012-11-21T19:40:44.417
> 
> 标签：python, django, date

我想知道是否有办法在渲染日期时更改日期的语言（与更改格式相同的方法：{{mydate|date:"d FY - H:i"}}）。

我查看了文档：[https](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date) ://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date 但我什么也没找到。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:53:16.957

You could change the locale before rendering it as a string. Then change it back after. Although, I'm not sure why you want to have a date in a language different from your other output. Maybe explain what you are trying to accomplish with this, first. There is no built-in way to do it simply formatting the date.

# android - 如何用动画改变 NumberPicker 的值？

> ID：13500852
> 
> 赞同：10
> 
> 时间：2012-11-21T19:40:53.463
> 
> 标签：android, animation, android-animation, numberpicker

我为 Android 创建了一个应用程序，其中有一个 NumberPicker。我需要更改此 NumberPicker 的值，但要使用平滑的动画，例如当您触摸它并更改其值时。

例如，假设当前值为 1，它将为 5，我希望 NumberPicker 从 1 旋转到 2，然后旋转到 3，依此类推。但我希望它旋转而不仅仅是立即改变值！

如果我使用以下代码：

```
numberPicker.setValue(5); 
```

它的值会立即变为 5，但我希望它从 1 滚动到 5，就像您手动触摸它并使其旋转时一样。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-18T11:23:26.547

我通过反射解决了它

```
 /**
         * using reflection to change the value because
         * changeValueByOne is a private function and setValue
         * doesn't call the onValueChange listener.
         * 
         * @param higherPicker
         *            the higher picker
         * @param increment
         *            the increment
         */
        private void changeValueByOne(final NumberPicker higherPicker, final boolean increment) {

            Method method;
            try {
                // refelction call for
                // higherPicker.changeValueByOne(true);
                method = higherPicker.getClass().getDeclaredMethod("changeValueByOne", boolean.class);
                method.setAccessible(true);
                method.invoke(higherPicker, increment);

            } catch (final NoSuchMethodException e) {
                e.printStackTrace();
            } catch (final IllegalArgumentException e) {
                e.printStackTrace();
            } catch (final IllegalAccessException e) {
                e.printStackTrace();
            } catch (final InvocationTargetException e) {
                e.printStackTrace();
            }
        } 
```

完美运行。我不知道为什么这个方法是私有的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T20:19:38.710

我不相信这是本机支持的。我想到了一种手动操作的“混乱”方式：

您可以使用迭代调用的 NumberPicker 的 scrollBy(int x, int y) 函数来制作动画效果。

需要考虑的一些事项：

*   scrollBy(x,y) 适用于像素。由于 Android 具有所有不同的屏幕密度，您应该首先猜测（我会通过反复试验来完成）对应于滚动到连续值的“dp”距离，并将其转换为像素以便用它。
*   scrollBy(x,y)的第一个参数应该取0值，以防不明显

我自己没有在 Android 中制作动画，但是自 Honeycomb 以来有一个非常好的 API，它可能很容易实现这一点。

我很抱歉，但这是我能想到的最简单的方法！

编辑：从 'dp' 转换为像素：

```
private float pxFromDp(float dp)
{
     return dp * this.getContext().getResources().getDisplayMetrics().density;
} 
```

您需要做的是使用不同的 'dp' 值测试调用 scrollBy(0, pxFromDp(dp)) ，直到获得将 NumberPicker 向上移动一个数字的确切值。获得该值后，您可以创建动画方法，当向上移动 X 数字时，将滚动该 dp 距离的 X 倍。

如果您不完全理解，请再次询问:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-11T13:46:18.717

谢谢@passsy。启发了他的答案：此解决方案支持**多个递增/递减步骤**。此外，可以使用**启动延迟**和**多个 numberPickers 执行（无需额外编码）**。

```
class IncreaseValue {
    private int counter = 0;
    private final NumberPicker picker;
    private final int incrementValue;
    private final boolean increment;

    private final Handler handler = new Handler();
    private final Runnable fire = new Runnable() { @Override public void run() { fire(); } };

    /*public*/ IncreaseValue(final NumberPicker picker, final int incrementValue) {
        this.picker = picker;
        if (incrementValue > 0) {
            increment = true;
            this.incrementValue = incrementValue;
        } else {
            increment = false;
            this.incrementValue = -incrementValue;
        }
    }

    /*public*/ void run(final int startDelay) {
        handler.postDelayed(fire, startDelay);  // This will execute the runnable passed to it (fire)
        // after [startDelay in milliseconds], ASYNCHRONOUSLY.
    }

    private void fire() {
        ++counter;
        if (counter > incrementValue) return;

        try {
            // refelction call for
            // picker.changeValueByOne(true);
            final Method method = picker.getClass().getDeclaredMethod("changeValueByOne", boolean.class);
            method.setAccessible(true);
            method.invoke(picker, increment);

        } catch (final NoSuchMethodException | InvocationTargetException | 
                IllegalAccessException | IllegalArgumentException e) {
            Log.d(TAG, "...", e);
        }

        handler.postDelayed(fire, 120);  // This will execute the runnable passed to it (fire)
        // after 120 milliseconds, ASYNCHRONOUSLY. Customize this value if necessary.
    }
} 
```

用法：

```
// Suppose picker1 as a NumberPicker
IncreaseValue increasePicker1 = new IncreaseValue(picker1, 10);  // So picker1 will be increased 10 steps.
increasePicker1.run(0);  // Increase immediately. If you want to run it from onCreate(), onStart() or ... of your activity, you will probably need to pass a positive value to it (e.g. 100 milliseconds). 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T20:21:16.483

NumberPicker 内部有一个私有方法，即

```
changeCurrentByOne(boolean increment) 
```

您可以将其公开并使用它。*当按下 NumberPicker 的向上*或*向下*箭头时，您可以看到此方法的实际效果。可能这不是您正在寻找的，因为这种方法不能对动画进行太多控制，但它肯定比*setValue*更好。没有任何动画*setValue*对用户来说看起来很糟糕。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-18T17:09:36.510

感谢@passy 的回答。可以使用 Kotlin 扩展函数进一步简化：

```
fun NumberPicker.animateChange(isIncrement: Boolean) {
    Handler().post {
        try {
            javaClass.getDeclaredMethod("changeValueByOne", Boolean::class.javaPrimitiveType).also { function ->
                function.isAccessible = true
                function.invoke(this, isIncrement)
            }
        } catch (e: Exception) {
            Log.e(javaClass.simpleName, e.message)
        }
    }
} 
```

# delphi - Delphi中对服务器的访问冲突

> ID：13500854
> 
> 赞同：-2
> 
> 时间：2012-11-21T19:40:54.670
> 
> 标签：delphi, tcp, memorystream

试图编写简单的客户端和服务器通过`TMemoryStream`. 当我在客户端按下按钮时，`btnTestClick`它会出现错误 `Access violation at address 005D5581 in module 'Client.exe'. Write of adress 00000000`。我做错了什么？

顺便说一句，客户端服务器连接工作正常我瘦 cuz`IdTCPClient1Connected`函数正在编写`'Client Connected!'`。

客户端代码

```
procedure TForm1.btnTestClick(Sender: TObject);
var
  msRecInfo: TMemoryStream;
  arrOf: array of Integer; i:integer;
begin
  for i := 0 to 10 do
    arrOf[i]:=random(100);

  msRecInfo:= TMemoryStream.Create;

  try
    msRecInfo.Write(arrOf, SizeOf(arrOf));
    idTCPClient1.IOHandler.Write(msRecInfo);
  finally
     msRecInfo.Free;
  end;

end;

end 
```

服务器代码

```
procedure TForm1.IdTCPServer1Execute(AContext: TIdContext);
var
   msRecInfo: TMemoryStream;
  arrOf: array of Integer; i:integer;
begin
  msRecInfo:= TMemoryStream.Create;
  try
    AContext.Connection.IOHandler.ReadStream(msRecInfo, -1, False);

    msRecInfo.Position := 0;
    msRecInfo.Read(arrof, SizeOf(arrof));
  finally
    memo1.Lines.Add(IntToStr(arrOf[1]));
    msRecInfo.Free;
  end;
  //AContext.Connection.IOHandler.ReadStream(msRecInfo, SizeOf(arrOf));
  //msRecInfo.Read(arrOf, sizeOf(arrOf));
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:50:04.343

You start writing into a dynamic array before you've allocated any elements for it. Dynamic arrays do not automatically grow like you might be used to from some other languages. You need to set their lengths first.

If you haven't set the length of a dynamic array, then it will just be a null pointer, which explains why you get an access violation at address 0.

Change your btnTestClick method like so:

```
var
  msRecInfo: TMemoryStream;
  arrOf: array of Integer;
  i: integer;
begin
  SetLength(arrOf, 11);
  for i := 0 to 10 do
    arrOf[i] := Random(100); 
```

# jquery - Fancybox 和 DNN DotNetNuke

> ID：13500856
> 
> 赞同：2
> 
> 时间：2012-11-21T19:41:01.167
> 
> 标签：jquery, fancybox

如何将 Fancybox 安装到 DotNetNuke 中？我正在运行一个使用 DNN 6.2 的网站，需要将 iframe 内容放入灯箱。Fancybox 似乎是最好的选择，但如何安装呢？您是将文件上传到皮肤的文件夹还是网站的根文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T10:25:16.647

我在我的皮肤中加入了fancybox。步骤： 1.确保js和css由要使用fancy box的页面加载。2\. 定义用于触发fancybox的锚点，在这种情况下，我还将fancybox的大小设置为动态的，以便内容管理器可以更改它。

```
jQuery(document).ready(function () {

    jQuery('a.mylightbox').each(function () {
        var dWidth = parseInt($(this).attr('href').match(/width=[0-9]+/i)[0].replace('width=', ''));
        var dHeight = parseInt($(this).attr('href').match(/height=[0-9]+/i)[0].replace('height=', ''));
        $(this).fancybox({
        'width': dWidth,
        'height': dHeight,
        'autoScale': false,
        'transitionIn': 'elastic',
        'transitionOut': 'elastic',
        'type': 'iframe',
        'scrolling': 'no'
        });
    });
}); 
```

接下来你调用你想在fancybox中加载的url：

```
<a class="mylightbox" href="/tabid/333/default.aspx?width=440&amp;height=650">my link text</a> 
```

在这种情况下，我在我的站点中使用了本地页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-19T15:24:32.917

我知道这个答案有点晚了:-)

DNN 有可能（从 DNN 7.2 开始）打包 JavaScript 库，然后将它们加载到代码中，或者通过

```
<%@ Register TagPrefix="dnn" TagName="JavaScriptLibraryInclude" Src="~/admin/Skins/JavaScriptLibraryInclude.ascx" %>
[...]
<dnn:JavaScriptLibraryInclude runat="server" Name="FancyBox" /> 
```

在 ascx 中，或

```
JavaScript.RequestRegistration("FancyBox") 
```

在后面的 C# 代码中。

首先，您必须为 JavaScript 库创建一个包，这很容易做到。有关参考，请参见[https://github.com/EngageSoftware/DNN-JavaScript-Libraries](https://github.com/EngageSoftware/DNN-JavaScript-Libraries)（如果您在那里找到所需的包，您可以使用它，但我没有看到 FancyBox）。

有关详细信息，请参阅[https://www.dnnsoftware.com/wiki/javascript-libraries](https://www.dnnsoftware.com/wiki/javascript-libraries)

快乐 DNN！
迈克尔

# php - 将 XML 数据加载到 MySQL 5.0

> ID：13500858
> 
> 赞同：0
> 
> 时间：2012-11-21T19:41:03.587
> 
> 标签：php, mysql, xml, xml-parsing

这里完全缺乏合适的解决方案让我发疯。

一位客户给了我一个大小为 14MB 的 XML 文件，在以后的请求中可能会更大。我需要一个可以定期将其数据加载到 MySQL 表中的脚本。服务器运行 MySQL 5.0.96，所以我不相信 LOAD XML 命令对我可用。

我曾尝试使用 PHP DOM 库来解析 XML 文件，但 Apache 返回 500 内部服务器错误。我认为这是内存不足，因为我可以注释掉加载 XML 文件的 PHP 代码并且脚本运行顺利（没有数据）。服务器上的内存限制已经是 128MB。

我也尝试过 XMLReader，它似乎也在做同样的事情。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:10:24.760

XMLReader 用作迭代器，因此您必须根据 xml 文档的各个标记来实现分组/提取逻辑。假设`<row>`您的 xml 文件中有一个元素对应于单个插入，它可能看起来像这样：

```
$reader = new XMLReader();
$reader->open('/path/to/the/file.xml');
while ($reader->read()) {
    if ($reader->name == "row" && $reader->nodeType == XMLReader::ELEMENT) {
        // the cursor currently at <row> element

        // hopefully one fragment will fit into memory and you can use simplexml for easy access
        // alternatively try $reader->expand() for DOMNode of the same thing
        $rowxml = simplexml_load_string('<'.'?xml version='1.0'?'.'>'.$reader->readOuterXML());

        // build insert from the $rowxml object, run the query
    }
}
$reader->close(); 
```

# bash - 如何在shell中比较十六进制数和十六进制数？

> ID：13500866
> 
> 赞同：11
> 
> 时间：2012-11-21T19:41:29.420
> 
> 标签：bash, shell

如何在shell中比较十六进制数和十六进制数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T22:32:22.440

至少`bash`直接支持十六进制整数，前提是它们带有前缀`0x`：

```
$ [[ 0xdead -lt 0xcafe ]] && echo yes || echo no
no
$ [[ 0xdead -gt 0xcafe ]] && echo yes || echo no
yes 
```

您只需正常使用比较运算符...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-04T14:14:10.280

您可以使用将十六进制数字转换为小数`printf`，然后您可以比较数值，例如：

```
x="0xdead"
y="0xcafe"

x_num=$(printf "%d" "$x")
y_num=$(printf "%d" "$y")

if [ $x_num -gt $y_num ]; then
    echo "x is my value"
else
   echo "x is not my value"
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T19:46:56.607

怎么样

```
(( "$answer" == 0x42 ))
echo $?

answer=0xDEADCAFE
(( "$answer" == 0xDEADCAFE ))
echo $? 
```

# c++ - 这段代码有什么问题？（将 char* 转换为字符串）

> ID：13500870
> 
> 赞同：2
> 
> 时间：2012-11-21T19:42:05.813
> 
> 标签：c++, string, char

我正在努力学习 C++，我边做边学...

这段代码的最终结果是它将 输出`char* argv[2]`到一个只将字符串作为输入的函数，并且它将输出一个更改的字符串。

如何转换`char* argv[2]`成字符串？

由于某种原因，我尝试过的一切最终都会使我的命令提示符崩溃。

```
int main(int argc, char* argv[])
{
    std::string com2 = argv[2];
    char* com1[4];
    com1[1] = "-f";
    com1[2] = "--file";
    com1[3] = "-t";
    com1[4] = "--text";
    if (strcmp(argv[1], com1[1]) == 0) {

        cout << com2;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T19:45:00.553

数组索引从`0`到`N - 1`，其中`N`是数组中元素的数量。因此`4`是一个无效的索引，并导致未定义的行为。

`argc`在访问`argv`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:44:15.687

`com1[4]`无效，并导致未定义的行为。C 和 C++ 中的数组是从 0 开始的，因此数组的有效索引是`0,1,2,3`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:04:24.600

C 和 C++ 中的局部变量实际上总是自动的（除非声明`static`），这意味着它们被放置在堆栈上。堆栈向下增长，而数组在内存中向上增长。这两者的结合意味着通常在任何堆栈数组的最后一个元素之后有一些重要的东西并且写过去是非常危险的（它总是很危险，但在堆栈数组的情况下它是非常危险的）。分配给超出数组`com1[4]`末尾的写入，可能会覆盖实例`com1`的某些数据成员或破坏函数的堆栈帧（取决于编译器如何放入堆栈）。`std::string``com2``main``com1``com2`

如果您仅使用一个参数启动程序，那么`argv`将只有 2 个元素并且`argv[2]`会：

*   导致访问超过参数列表的末尾，并且
*   给出一个随机值，在大多数情况下根本不会指向字符数据。

如果您在没有任何参数的情况下启动程序，那么`argv`将只有 1 个元素并且两者都有`argv[1]`，并且`argv[2]`将是越界访问并且将返回随机值。为了防止这些情况，您应该在程序的最开始放置以下内容：

```
if (argc < 3) {
   cerr << "ERROR: Provide at least 2 arguments" << endl;
   return 1;
} 
```

注意`argv`总是至少有一个元素（即`argv[0]`总是一个正确的引用）——可执行文件的名称。因此`argc`总是大于等于`1`。

# c++ - 使用 Makefile 构建时 Xcode 中忽略的断点

> ID：13500872
> 
> 赞同：1
> 
> 时间：2012-11-21T19:42:10.980
> 
> 标签：c++, xcode, makefile, lldb

我正在尝试在 Xcode 中设置一个使用 Makefile 构建的 C++ 项目。

我从一个完全空的项目（空模板）开始工作，添加一个外部构建系统目标并正确设置路径：

![在此处输入图像描述](../Images/8ecbb9a376d0fa8655db0dcec564456b.png)

但是断点不起作用。我使用单个 .cpp 文件创建了一个非常简单的测试项目，但无论我尝试什么，断点都会被忽略：

![在此处输入图像描述](../Images/6bbfdd173589e7f785f09a78bb480085.png)

正如[另一个问题](https://stackoverflow.com/questions/7568810/xcode-4-external-build-project-and-debugging)中所建议的那样，我尝试转到 Product -> Edit Scheme... 并检查“使用自定义工作目录”并将其设置为与可执行文件相同的目录，但它没有帮助。

我所有的文件（源文件、makefile、可执行文件、项目文件）都在 Finder 的一个文件夹中（在 Xcode 中也是如此）。

如果重要的话，我的 Makefile 也很简单：

```
BUILD = .
TARGET = $(BUILD)/test
all:
    g++  test.cpp  -o $(TARGET) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T19:47:43.883

将`-g`开关添加到 gcc 命令以包含如下调试符号：

```
BUILD = .
TARGET = $(BUILD)/test
all:
    g++ -g test.cpp  -o $(TARGET) 
```

编辑：并选择另一个目标名称，因为 test 是大多数 shell 中的 shell 内置命令，您可能会在从命令行调用程序时遇到麻烦（即使我不确定 Mac OS）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-22T02:04:59.290

我遇到了同样的问题（Xcode 8.3.3），但是将 -g 添加到 makefile 并没有解决它。我发现（在很痛苦之后）makefile 正在清理 .o 文件作为构建的一部分（rm -f $(OBJFILES)）。事实证明，符号信息位于 .o 文件中，因此通过删除它们，Xcode 无法再进行调试。我注释掉了 rm 行，现在一切正常。我使用了 -g 标志，它可以工作。与此作斗争的任何人都应确保 .o 文件位于正确的位置。

# php - 在表列中使用MYSQL查询的结果

> ID：13500876
> 
> 赞同：0
> 
> 时间：2012-11-21T19:42:21.260
> 
> 标签：php, mysql, sql, html-table

我有一个查询：

```
SELECT  year (F_ULT_CIERRE_MENSUAL) - 1 'Año %'
FROM    mpaises
where   COD_PAIS = $COD_PAIS 
```

我想在列标题中使用结果。

```
<th class='header'>Año %</th> 
```

我需要将结果介于 Ano 和 % 之间。例如，它将显示 Ano 2011 %。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T19:44:38.573

使用mysql的[concat()函数：](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)

```
SELECT  concat('Año ', year(F_ULT_CIERRE_MENSUAL) - 1,' %') as header
FROM    mpaises
where   COD_PAIS = $COD_PAIS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T19:52:48.893

Simply create the string while outputting. E.g.:

```
foreach($row = $stmt->fetch()) {
    echo '<th class="header">Año '.$row['year'].' %</th>';
} 
```

# objective-c - 使用 NSString 作为搜索词来查找 NSArray 项目索引

> ID：13500879
> 
> 赞同：0
> 
> 时间：2012-11-21T19:42:23.260
> 
> 标签：objective-c, ios, nsstring, nsarray

这似乎是一件容易解决的事情，但到目前为止我还没有想出一个简单的解决方案。

我有一个 NSArray，其中包含一些字符串，如下所示：

```
NSArray *items = [NSArray arrayWithObjects:@"page_standard", @"google_map_location", @"comment", @"folder", nil]; 
```

我提供了一个搜索词，但格式略有不同：

```
NSString *searchTerm = @"Standard Page Format"; 
```

另一个术语可能是：

```
NSString *searchTerm = @"Location Google Map"; 
```

因此，即使 my`searchTerm`的格式与数组中的字符串不同`page_standard`，我仍然希望它匹配，并且能够返回匹配的索引。

**注意：**这不是用户可编辑的搜索。相反，这些是这些代码的“代码”和“友好名称”。我需要将两者匹配，以便“友好名称”可以找到匹配的“代码”。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:02:33.843

如果事先知道一组术语，并且用户从列表而不是自由格式的文本条目中进行选择，则只需创建一个字典，将“友好”术语映射到内部术语：

```
NSDictionary *internalTermForFriendlyTerm = @{
    @"Standard Page Format": @"page_standard",
    @"Location Google Map": @"google_map_location",
    // etc.
};

...

NSString *internalTerm = internalTermForFriendlyTerm[searchTerm]; 
```

您可以将字典存储在属性列表文件中，以便在运行时轻松更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:08:37.853

计算机无法区分两个略有不同的字符串。你的意思是找到“相似的字符串”。
为此，rangeOfString 方法做得很好。

对于“google_map_location”，“Location”、“Google”和“Map”字符串都是“google_map_location”的子字符串。
在您的位置，我将使用查找“相似字符串”的方法创建一个类别。我将首先使用空格字符作为分隔符将字符串划分为标记，然后建立一个标准，例如，如果所有字符串都相似，则建立一个标准单词是字符串的子字符串，比较也不区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:54:34.803

天真的解决方案是将字符串拆分为由“”和“_”分隔的小写单词集合，并选择具有最大交集的集合。这将使您足够接近以处理您的测试用例，尽管您可能希望进一步改进它以实现真正的面向用户的搜索功能（例如，用户可能会写“正常”而不是“标准”，或者他们可能想要“loc”找到位置）。

编辑：根据您的评论，看起来这都是内部的，而不是面向用户的。在这种情况下，最简单的解决方案可能是将它们全部粘贴在字典中，其中“友好名称”作为键，“代码”作为相应的值。这样一来，它就很明确了，并且您对“友好名称”的含义有很大的余地。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T20:02:21.580

不是您问题的确切解决方案。但是沿着这些思路的东西应该可以解决问题。

1.  根据分隔符“”和“_”分隔数组中的单词并将所有单词转换为小写。
2.  将这组数组与由`searchTerm`. 就像是，

尝试，

```
NSMutableSet *set1 = [NSMutableSet setWithArray:originalFirstWordArray];
NSMutableSet *set2 = [NSMutableSet setWithArray:searchTermArray];
[set1 intersectSet:set2];

NSArray *result = [set1 allObjects]; 
```

根据`results`数组的计数，您可以确定它是否匹配。基本上你可能不得不与之比较`searchTermArray`。

**更新：**根据您上次的编辑，我觉得您只需将这些关键字作为键值对存储在 plist 中，并在需要时进行比较。如果搜索是用户可编辑的搜索，我的上述答案是合适的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T20:03:18.673

尝试以下操作：

```
- (NSString*)find:(NSString*)term in:(NSArray*)terms {
  for (NSString *item in terms) {
    NSMutableSet *dictSet = [NSMutableSet set];
    for (NSString *word in [item componentsSeparatedByString:@"_"]) {
      [dictSet addObject:[word lowercaseString]];
    }
    NSMutableSet *testSet = [NSMutableSet set];
    for (NSString *word in [term componentsSeparatedByString:@" "]) {
      [testSet addObject:[word lowercaseString]];
    }
    if ([dictSet isEqualToSet:testSet]) {
      return item;
    }
  }
  return nil;
} 
```

# gcc - gcc 内联汇编程序得到错误“asm 语句中需要左值”

> ID：13500881
> 
> 赞同：0
> 
> 时间：2012-11-21T19:42:35.543
> 
> 标签：gcc, inline-assembly, avr

我需要编写 C 代码

```
DDRB &= ~pins; 
```

内联汇编 (AVR)。我以前从未使用过它。我的尝试：

```
register uint8_t t1, t2; // temporary registers
__asm__ volatile (
    "in %[t1], %[w1_ddr]"   "\n\t"
    "mov %[t2], %[pins]"    "\n\t"
    "com %[t2]"             "\n\t"
    "and %[t1], %[t2]"      "\n\t"
    "out %[w1_ddr], %[t1]"  "\n\t"
    : [t1] "+r" (t1),
      [t2] "+r" (t2),
      [w1_ddr] "+I" (_SFR_IO_ADDR(DDRB))
    : [pins] "r" (pins)
); 
```

`gcc`给出以下错误`lvalue required in asm statement`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:17:12.933

AVR 中的“I”约束表示操作数是常数。因此它不能是“+”，即输入-输出。使其成为普通输入，如下所示：

```
register uint8_t t1, t2; // temporary registers
__asm__ volatile (
    "in %[t1], %[w1_ddr]"   "\n\t"
    "mov %[t2], %[pins]"    "\n\t"
    "com %[t2]"             "\n\t"
    "and %[t1], %[t2]"      "\n\t"
    "out %[w1_ddr], %[t1]"  "\n\t"
    : [t1] "+r" (t1),
      [t2] "+r" (t2)
    : [w1_ddr] "I" (_SFR_IO_ADDR(DDRB)),
      [pins] "r" (pins)
); 
```

# python - NameError：名称'self'未定义？

> ID：13500883
> 
> 赞同：-2
> 
> 时间：2012-11-21T19:42:41.800
> 
> 标签：python, nameerror

我目前正在从事 python 编程。

```
class A:
    def LoadPosition(self):
        FILE = open('a.txt', "r+")

        i = 0
        for node in self.nodes:
            line = FILE.readline()
            if i == 0:
                scaling_factor == float(line)
                i += 1
            else:
                tmpn, tmpx, tmpy, tmpa = line.split('\t')
                node.id = tmpn
                node.coordinate_x = float(tmpx)
                node.coordinate_y = float(tmpy)
                node.area = int(tmpa)
        FILE.close() 
```

以前很好，但突然间，它显示了 NameError 消息。请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T20:02:31.173

您以奇怪的方式混合空格和制表符，这可能会使 Python 感到困惑。这是我从编辑窗口复制并粘贴代码时得到的结果：

```
In [2]: for line in s.splitlines():
   ...:     print repr(line)
   ...:     
''
'    class A:'
'    \tdef LoadPosition(self):'
'\t        FILE = open(\'a.txt\', "r+")'
'    \t'
'\t\t    i = 0'
'    \t    for node in self.nodes:'
'    \t    \tline = FILE.readline()'
'    \t    \tif i == 0:'
'    \t    \t\tscaling_factor == float(line)'
'    \t    \t\ti += 1'
'    \t    \telse:'
"    \t    \t\ttmpn, tmpx, tmpy, tmpa = line.split('\t')"
'\t       \t     \tnode.id = tmpn'
'   \t\t         \tnode.coordinate_x = float(tmpx)'
'   \t\t         \tnode.coordinate_y = float(tmpy)'
'   \t\t     \t    node.area = int(tmpa)'
'\t\t    FILE.close()' 
```

[请注意，如果有人从发布的问题而不是原始编辑窗口复制代码，这可能不会发生 - 至少有时它会被禁止看到我的原始选项卡 - 因此尝试您的代码的人可能没有任何问题。 ]

步骤#1：运行您的代码`python -tt yourfilenamehere.py`以确认它是选项卡错误。

步骤#2：切换到到处使用四空格制表符。

# javascript - 文本未转换到正确位置

> ID：13500885
> 
> 赞同：1
> 
> 时间：2012-11-21T19:42:43.780
> 
> 标签：javascript, d3.js

我有一个带有翻译位置的 json 数据，我返回该数据以及我创建的函数的质心。当我运行此代码时，文本沿底部直线运行：

```
var prac = svg.append("g.prac")
            .data(inner)
            .enter()
            .append("g")
            .attr("transform", function(d,i){return "translate ("+ arc[i].centroid() +")" + d.trans;});   

        prac.append("text")
            .style("font", "bold 12px Arial")
           .text(function(d) {return d.text;})
        ; 
```

我也尝试附加 (svg:text) 而不是对其进行分组，但它只是没有出现。

谁能帮我解决我的问题？...我附上了一个例子，让我的问题更清楚：http: [//jsfiddle.net/xwZjN/48/](http://jsfiddle.net/xwZjN/48/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:55:56.247

一个问题是您要附加`<g.prac>`元素而不是`<g class='prac'>`元素。要解决此问题，请切换如下所示的代码：

```
svg.append("g.prac") 
```

有了这个：

```
svg.append("g").attr("class", "prac") 
```

其次，更关键的是，您需要选择要将数据绑定到的元素——**即使它们尚未创建**（Scott Murray 对此[有很好的解释](http://alignedleft.com/tutorials/d3/binding-data/)）。所以你的`prac`应该是这样的：

```
svg.append("g")
    .attr("class", "prac")
  .selectAll("g")
    .data(inner)
    .enter()
    .append("g")
    .attr(...) 
```

这是一个 jsfiddle，我在其中对两者进行了转换`g.prac`： http `g.presence`: [//jsfiddle.net/c6w7j/4/](http://jsfiddle.net/c6w7j/4/)

我认为这会让你成为其中的一部分。我不确定该文本是否确实落在了您想要的位置，但这至少应该可以修复您的结构。

# sql - SQL Server 2000 中的一列与两列表不同

> ID：13500887
> 
> 赞同：0
> 
> 时间：2012-11-21T19:42:47.437
> 
> 标签：sql, sql-server-2000

我正在尝试获取具有两列的表的唯一列表...

表`snapshot`：

```
ITEM   DISP
-----------------
903996 , 1600
903996 , 3D13
123045 , 1D23
450300 , 3D14
450300 , 3DAD 
```

我需要的输出如下

```
ITEM     DISP
-----------------
903996 , 1600
123045 , 1D23
450300 , 3D14 
```

我知道在 SQL Server 2005 中`ROW_NUMBER`，由于我在 SQL Server 2000 中工作，因此对于此类问题非常有帮助，并且此功能不存在。

这是我对 SQL Server 2005 的想法：

```
 Select  [ITEM],[DISP]
FROM (
SELECT 
       [ITEM]
      ,[DISP]
      ,ROW_NUMBER() OVER (PARTITION BY [ITEM] ORDER BY [ITEM]) as RowNumber
  FROM [TABLE]
) WHERE RowNumber =1 
```

如何在 SQL Server 2000 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:42:38.957

您应该能够使用`MIN()`with `GROUP BY`：

```
select item, min(disp)
from snapshot
group by item 
```

参见[SQL fiddle with Demo](http://sqlfiddle.com/#!3/9cb1b/1)

结果：

```
|   ITEM | DISP |
-----------------
| 123045 | 1D23 |
| 450300 | 3D14 |
| 903996 | 1600 | 
```

# sql - 由于是/否，多条记录

> ID：13500891
> 
> 赞同：2
> 
> 时间：2012-11-21T19:42:54.060
> 
> 标签：sql, ms-access

我的查询根据用户 ID、优先级（是/否）从表中提取记录，然后根据 iif 语句分配审查日期。

```
SELECT Roster.UserID, 
EventLog.Priority, 
IIf([EventLog]![Priority]=True, [EventLog]![Date], Date()-183) AS [Review Date]
FROM EventLog 
INNER JOIN Roster 
ON EventLog.UserID = Roster.UserID
GROUP BY Roster.UserID, EventLog.Priority, 
         IIf([EventLog]![Priority]=True, [EventLog]![Date], Date()-183); 
```

由于不是每个 recory 都会有一个优先级（是）指示符，我的查询为那些有（是）的用户返回是和否选项。

```
Query Results ex.
UserID   Priority     Review Date
abc123     Yes          5-19-2012
abc123     No           5-22-2012
qwe456     No           5-22-2012
yip552     Yes          3-10-2012
yip552     No           5-22-2012 
```

我如何让它只为那些拥有一个的 UserID 返回 Yes 答案，并为那些没有的 UserID 保留 NO 计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:17:58.793

您应该能够使用 Max 或 Min，具体取决于存储的数据，“Yes”一词将是 Max，但值 -1 将是 Min：

```
SELECT 
  Roster.UserID, 
  Max(EventLog.Priority), 
  Max(IIf([EventLog]![Priority]=True, [EventLog]![Date], Date()-183)) AS [Review Date]
FROM EventLog 
INNER JOIN Roster 
ON EventLog.UserID = Roster.UserID
GROUP BY Roster.UserID 
```

~~您应该能够为 选择表达式`IIf([EventLog]![Priority]=True, [EventLog]![Date], Date()-183) AS [Review Date]`，因此它不需要包含在 GROUP BY~~

您也可以为 IIf 语句选择 Max。

# gstreamer - 使用 gstreamer 解码 mp4 视频

> ID：13500893
> 
> 赞同：10
> 
> 时间：2012-11-21T19:42:57.977
> 
> 标签：gstreamer, h.264, video-processing, decoding, x264

我想在 Gstreamer 中播放 mp4 视频，但我遇到了 x264dec 错误，找不到该错误。我写了这个管道

```
 gst-launch filesrc \
     location=/media/thesis/Gstreamer/pub_Irma.mp4 \
   ! qtdemux name=demux demux. ! queue ! faad \
   ! audioconvert ! audioresample ! autoaudiosink demuxer. \
   ! queue ! x264dec ! ffmpegcolorspace ! autovideosink 
```

在这一步之后，我的目标是生成 mp4 视频解码的执行轨迹。我不知道x264dec的问题在哪里。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T13:03:33.153

这可能更容易：

```
gst-launch-0.10 playbin2 uri=file:///path/to/foo.mp4 
```

或者

```
gst-launch-1.0 playbin uri=file:///path/to/foo.mp4 
```

（当然，您仍然需要安装所需的元素）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-03T05:14:24.103

我在桌面上有一个文件名 tuhi.mp4。所以命令是这样的。

```
$ gst-launch-1.0 filesrc location=~/Desktop/tuhi.mp4 ! decodebin name=dec ! videoconvert ! autovideosink dec. ! audioconvert ! audioresample ! alsasink 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-22T13:27:01.390

我认为没有`x264dec`元素（我只知道`x264enc`元素）。您可能想`ffdec_h264`在[此 nabble 帖子](http://gstreamer-devel.966125.n4.nabble.com/how-to-play-h-264-file-using-gstreamer-tp971171p971172.html)中使用 like ：

```
gst-launch-0.10 filesrc location=$1 ! h264parse ! ffdec_h264 ! ffmpegcolorspace ! deinterlace ! xvimagesink 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-05T09:11:23.283

这个命令

```
gst-launch-0.10 filesrc location=/root/gstreamerexamples/big.mp4 ! qtdemux name=demux demux. ! queue ! faad ! audioconvert ! audioresample ! autoaudiosink demux. ! queue ! ffdec_h264 ! ffmpegcolorspace ! autovideosink 
```

对我来说很好。

要播放 mp4 文件，请将 bigBuckBunny mp4 视频作为测试文件。接下来请确保 gst-launch 中提到的所有元素都内置在 x86 或任何其他目标平台中。

请花很多时间正确安装 GStreamer。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-07T09:48:19.530

```
 #include <gst/gst.h>

    typedef struct _CustomData {
    GstElement *pipeline;
    GstElement *source;
    GstElement *demuxer;
    GstElement *audioqueue;
    GstElement *videoqueue;
    GstElement *audio_decoder;
    GstElement *video_decoder;
    GstElement *video_convert;
    GstElement *audio_convert;
    GstElement *video_sink;
    GstElement *audio_sink;
    } CustomData;

    static void pad_added_handler (GstElement *src, GstPad *pad, CustomData *data);

    int main(int argc, char *argv[]) {
    CustomData data;
    GstBus *bus;
    GstMessage *msg;
    GstStateChangeReturn ret;
    gboolean terminate = FALSE;
    /* Initialize GStreamer */
    gst_init (&argc, &argv);
    /* Create the elements */
    data.source = gst_element_factory_make ("filesrc", "source");
    data.demuxer = gst_element_factory_make ("oggdemux", "demuxer");
    data.audioqueue = gst_element_factory_make("queue","audioqueue");
    data.videoqueue = gst_element_factory_make("queue","videoqueue");
    data.audio_decoder = gst_element_factory_make ("vorbisdec", "audio_decoder");
    data.audio_convert = gst_element_factory_make ("audioconvert", "audio_convert");
    data.audio_sink = gst_element_factory_make ("autoaudiosink", "audio_sink");
    data.video_decoder = gst_element_factory_make("theoradec","video_decoder");
    data.video_convert = gst_element_factory_make("ffmpegcolorspace","video_convert");
    data.video_sink = gst_element_factory_make("autovideosink","video_sink");

    data.pipeline = gst_pipeline_new ("test-pipeline");
    if (!data.pipeline || !data.source || !data.demuxer || !data.audioqueue ||!data.audio_decoder ||!data.audio_convert ||
    !data.audio_sink || !data.videoqueue || !data.video_decoder || !data.video_convert || !data.video_sink) {
    g_printerr ("Not all elements could be created.\n");
    return -1;
    }

    gst_bin_add_many (GST_BIN (data.pipeline), data.source,data.demuxer,data.audioqueue,data.audio_decoder,data.audio_convert,data.audio_sink,data.videoqueue,data.video_decoder,data.video_convert,data.video_sink, NULL);

    if (!gst_element_link(data.source,data.demuxer)) {
    g_printerr ("Elements could not be linked.\n");
    gst_object_unref (data.pipeline);
    return -1;
    } 

    if (!gst_element_link_many (data.audioqueue,data.audio_decoder,data.audio_convert, data.audio_sink,NULL)) {
    g_printerr (" audio Elements could not be linked.\n");
    gst_object_unref (data.pipeline);
    return -1;
    }
    if (!gst_element_link_many(data.videoqueue,data.video_decoder,data.video_convert, data.video_sink,NULL)) {
    g_printerr("video Elements could not be linked.\n");
    gst_object_unref(data.pipeline);
    return -1;
    } 
    /* Set the file to play */
    g_object_set (data.source, "location", argv[1], NULL);

    g_signal_connect (data.demuxer, "pad-added", G_CALLBACK (pad_added_handler), &data);
    /* Start playing */
    ret = gst_element_set_state (data.pipeline, GST_STATE_PLAYING);
    if (ret == GST_STATE_CHANGE_FAILURE) {
    g_printerr ("Unable to set the pipeline to the playing state.\n");
    gst_object_unref (data.pipeline);
    return -1;
    }
    /* Listen to the bus */
    bus = gst_element_get_bus (data.pipeline);
    do {
    msg = gst_bus_timed_pop_filtered (bus, GST_CLOCK_TIME_NONE,
    GST_MESSAGE_STATE_CHANGED | GST_MESSAGE_ERROR | GST_MESSAGE_EOS);

    if (msg != NULL) {
    GError *err;
    gchar *debug_info;
    switch (GST_MESSAGE_TYPE (msg)) {
    case GST_MESSAGE_ERROR:
    gst_message_parse_error (msg, &err, &debug_info);
    g_printerr ("Error received from element %s: %s\n", GST_OBJECT_NAME (msg->src), err->message);
    g_printerr ("Debugging information: %s\n", debug_info ? debug_info : "none");
    g_clear_error (&err);
    g_free (debug_info);
    terminate = TRUE;
    break;
    case GST_MESSAGE_EOS:
    g_print ("End-Of-Stream reached.\n");
    terminate = TRUE;
    break;
    case GST_MESSAGE_STATE_CHANGED:

    if (GST_MESSAGE_SRC (msg) == GST_OBJECT (data.pipeline)) {
    GstState old_state, new_state, pending_state;
    gst_message_parse_state_changed (msg, &old_state, &new_state, &pending_state);
    g_print ("Pipeline state changed from %s to %s:\n",
    gst_element_state_get_name (old_state), gst_element_state_get_name (new_state));
    }
    break;
    default:

    g_printerr ("Unexpected message received.\n");
    break;
    }
    gst_message_unref (msg);
    }
    } while (!terminate); 

    gst_object_unref (bus);
    gst_element_set_state (data.pipeline, GST_STATE_NULL);
    gst_object_unref (data.pipeline);
    return 0;
    }

    /* This function will be called by the pad-added signal */
    static void pad_added_handler (GstElement *src, GstPad *new_pad, CustomData *data) {
    g_print("Inside the pad_added_handler method \n");
    GstPad *sink_pad_audio = gst_element_get_static_pad (data->audioqueue, "sink");
    GstPad *sink_pad_video = gst_element_get_static_pad (data->videoqueue, "sink");

    GstPadLinkReturn ret;
    GstCaps *new_pad_caps = NULL;
    GstStructure *new_pad_struct = NULL;
    const gchar *new_pad_type = NULL;
    g_print ("Received new pad '%s' from '%s':\n", GST_PAD_NAME (new_pad), GST_ELEMENT_NAME (src));

    new_pad_caps = gst_pad_get_caps (new_pad);
    new_pad_struct = gst_caps_get_structure (new_pad_caps, 0);
    new_pad_type = gst_structure_get_name (new_pad_struct);

    if (g_str_has_prefix (new_pad_type,"audio/x-vorbis" /*"audio/mpeg"*/)) 
    {
      ret = gst_pad_link (new_pad, sink_pad_audio);
      if (GST_PAD_LINK_FAILED (ret)) 
       { 
        g_print (" Type is '%s' but link failed.\n", new_pad_type);
       } 
       else 
      {
        g_print (" Link succeeded (type '%s').\n", new_pad_type);
      }
    } 

    else if (g_str_has_prefix (new_pad_type, "video/x-theora"/*"video/x-h264"*/)) 
    {
      ret = gst_pad_link (new_pad, sink_pad_video);

      if (GST_PAD_LINK_FAILED (ret)) 
      {
        g_print (" Type is '%s' but link failed.\n", new_pad_type);
      } 
      else 
      {
        g_print (" Link succeeded (type '%s').\n", new_pad_type);
      }
    } 

    else {
    g_print (" It has type '%s' which is not raw audio. Ignoring.\n", new_pad_type);
    goto exit;
    }
    exit:
    if (new_pad_caps != NULL)
    gst_caps_unref (new_pad_caps);
    gst_object_unref (sink_pad_audio);
    gst_object_unref (sink_pad_video);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-04T09:40:53.767

我的桌面上有一个 ogg 文件，所以命令是这样的。

```
$ gst-launch-1.0 filesrc location=~/Desktop/test.ogg ! oggdemux name=demuxer \
    demuxer. ! queue ! vorbisdec ! audioconvert ! audioresample ! autoaudiosink \
    demuxer. ! queue ! theoradec ! videoconvert ! autovideosink 
```

这也适用于 gstreamer 0.10，但你需要用 ffmpegcolorspace 替换 videoconvert

# rest - 使用 RESTful 端点获取多个资源的更好方法是什么？

> ID：13500895
> 
> 赞同：1
> 
> 时间：2012-11-21T19:43:07.943
> 
> 标签：rest

您好我正在尝试设计一个可以使用 Squid 缓存受益的 RESTful 端点。我有两种方法来设计这个 REST，但我不确定哪种方法更好。第一个获取学生 ID 列表，您需要执行一次提取以获取个人记录。第二个获取所有记录并进行分页。第二个也有单一的资源获取功能。

谢谢，

获取教室/{classroomId}/students

回复：

```
[1,2,3,4,5,6,7] 
```

获取教室/{classroomId}/students/1

回复：

```
{"studentId":1,"firstname","abc","lastname":"def"} 
```

**或者**

获取教室/{classroomId}/students

回复：

```
{
items:[
{{"studentId":1,"firstname","abc","lastname":"def"},
{"studentId":2,"firstname","abc","lastname":"def"},
{"studentId":3,"firstname","abc","lastname":"def"},
{"studentId":4,"firstname","abc","lastname":"def"}}]
startIndex:0,
limit:4
} 
```

获取教室/{classroomId}/students/1

回复：

```
{"studentId":1,"firstname","abc","lastname":"def"} 
```

# python - Python中的替换加密（ProblemSetQuestion）

> ID：13500897
> 
> 赞同：2
> 
> 时间：2012-11-21T19:43:14.370
> 
> 标签：python, encryption, python-3.x

Winkleson 在这里提出了另一个关于[http://singpath.appspot.com](http://singpath.appspot.com)问题集的问题。我是一名初学者程序员，我希望尽可能得到一些指导。无论如何，我在这里提出了这个问题，我不确定如何通过比较 EVERY.SINGLE.LETTER 来避免浪费时间。在 if 语句中。所以我希望有任何提示/解决方案来减少这个问题的编码。我会发布我到目前为止所拥有的（不多）。提前致谢！

问题：

* * *

> **替代加密**
> 
> 创建一个可用于加密和解密一串字母的程序。该函数应输入要编码的字符串和给出新字母顺序的字母字符串。第二个字符串包含字母表中的所有字符，但顺序是新的。这个顺序告诉交换哪些字母。第二个字符串中的第一个字母应该替换第一个字符串中的所有 a。第二个字符串的第三个字母应该替换第一个字符串中的所有 c。您的解决方案应该全部小写。注意标点符号和数字（这些不应该改变）。

示例（调用）：

```
>>> encrypt('hello banana','qwertyuiopasdfghjklzxcvbnm')
'itssg wqfqfq'

>>> encrypt('itssg wqfqfq','kxvmcnophqrszyijadlegwbuft')
'hello banana'

>>> encrypt('gftw xohk xzaaog vk xrzxnkh','nxqlzhtdvfepmkoywrjiubscga')
'this code cannot be cracked'

>>> encrypt('mkhzbc id hzw pwdh vtcgxtgw ube fbicg ozth kbx tew fbicg','monsrdgticyxpzwbqvjafleukh')
'python is the best language for doing what you are doing' 
```

我的代码：

* * *

```
def encrypt(s, realph):

    alph = 'abcdefghijklmnopqrstuvwxyz' #Regular Alphabet
    news = '' #The decoded string   

    #All comparison(s) between realph and alph    

    for i in range(len(realalph)):        

        #Comparison Statement here too.
        news = ''.join(alph) 

    return news 
```

如您所见，这显然等同于失败的伪代码......一如既往，任何建议和/或解决方案都会令人惊叹！提前致谢！- 温克尔森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:01:50.830

这是一个翻译解决方案。

```
from string import maketrans

def encrypt(s, scheme):
    alphabet = 'abcdefghijklmnopqrstuvwxyz'
    translation = maketrans(alphabet, scheme)
    return s.translate(translation) 
```

字符串有一个内置`translate`方法，允许您将单个字母与其他字母切换。令人难以置信的活泼，而且非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:46:42.317

这是我的做法：

1.  遍历字符串中的每个字符。
2.  在您的字母表中找到该字符的索引。保存。
3.  从同一索引中的新字母表中取出字符。
4.  将其附加到您的`news`字符串。

伪代码：

```
output = ''

for character in your_string:
    index = index of character in original_alphabet
    new_character = new_alphabet[character]

    add new_character to output 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T19:48:01.907

我会创建一个地图['src_letter'] =>'dst_letter'。还有翻译：[Replace characters in string from dictionary mapping](https://stackoverflow.com/questions/10155729/replace-characters-in-string-from-dictionary-mapping)

# javascript - JavaScript 将一个字符串的索引值分配给另一个索引值

> ID：13500898
> 
> 赞同：-1
> 
> 时间：2012-11-21T19:43:17.257
> 
> 标签：javascript, string

我不知道为什么，但是这段代码没有将`cha[cha.indexOf(x[x.length-1]) + 1]`' 值分配给`x[x.length - 1]`. 我试图将它转换为任何数组，但没有做任何事情。

```
var cha = "abcdefghijklmnopqrstuvwxyz" + "ABCDEFGHIJKLMNOPQRSTUVWXYZ" + "0123456789";
    var n = notch; // number to start counting from
    var x = cha[0];
    // stuff
    console.log(x);
    // generation loop
    while (n > 0) {
        if(x[x.length - 1] == cha[cha.length-1]) {
            // ^ correct logic
            x[length] = cha[0];
        } else {
            // 
            newPush = cha[cha.indexOf(x[x.length-1]) + 1];
            a = x /*.split("");
            a.pop(); <= Failed attempt
            a.push(newPush);*/
            x = a;
            //x[x.length-1] = cha[cha.indexOf(x[x.length-1]) + 1];
            //x[x.length-1] = "D";
            console.log("x[x.length - 1] = " + x[x.length - 1]);
            console.log("cha[cha.indexOf(x[x.length-1]) + 1] = " + cha[cha.indexOf(x[x.length-1]) + 1]);
        }
        n--;
        console.log(cha[cha.indexOf(x[x.length-1]) + 1]);
        console.log(x.lastIndexOf(x[x.length-1]) + 1);

        console.log("n = " + n + ", x = " + x);
    } 
```

我想要`cha[cha.indexOf(x[x.length-1]) + 1]`分配到的新角色`x[x.length - 1]`。我一直在 Chrome 开发者工具 (v23.0.1271.64) 中调试它，但我非常怀疑它是特定于 Chrome 的。我可能不了解值/引用传递或其他内容，但感谢您提供任何帮助。（如果可以，请提供代码示例。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:46:24.757

```
var alphabet = "abcdefghijklmnopqrstuvwxyz";

prefix = oldString.slice(0, oldString.length - 1);
suffix = oldString.substr(-1, 1);
newSuffix = alphabet.charAt(alphabet.indexOf(suffix) + 1 % alphabet.length);
newString = prefix + newSuffix; 
```

# regex - 日志中日期范围之间的 grep

> ID：13500902
> 
> 赞同：7
> 
> 时间：2012-11-21T19:43:48.353
> 
> 标签：regex, shell, datetime, grep

我正在尝试 grep 2 个日期范围之间的所有行，其中日期的格式如下： date_time.strftime("%Y%m%d%H%M") 所以说在 [201211150821 - 201211150824] 之间

我正在尝试编写一个脚本，其中涉及查找这些日期之间的行：

```
cat <somepattern>*.log | **grep [201211150821 -  201211150824]** 
```

我试图找出 unix 中是否存在某些东西，我可以在其中查找日期范围。

我可以将日志中的日期转换为（自纪元以来），然后将常规 grep 与 [time1 - time2] 一起使用，但这意味着读取每一行，提取时间值然后进行转换等。

可能已经存在一些简单的东西，所以我可以指定日期/时间戳范围，就像我可以向 grep 提供数字范围一样？

谢谢！

PS：我也可以传入类似 2012111511(27|28|29|[3-5][0-9]) 的模式，但这特定于我想要的范围，并且每次尝试不同的日期和在运行时执行此操作变得更加棘手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T20:09:32.817

Perl 解决方案：

```
perl -wne 'print if m/(?<!\d)(20\d{8})(?!\d)/
                      && $1 >= 201211150821 && $1 <= 201211150824' 
```

（它找到以 开头的第一个十位整数，`20`如果该整数在您感兴趣的范围内，则打印该行。如果它没有找到任何这样的整数，它会跳过该行。您可以将正则表达式调整为更多限制有效月份和时间等。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:02:40.447

使用 awk。假设该行中的第一个标记是时间戳：

```
awk '
BEGIN { first=ARGV[1]; last=ARGV[2]; }
$1 > first && $1 < last { print; }
' 201211150821 201211150824 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T20:30:20.230

您正在寻找有点晦涩的“csplit”（上下文拆分）命令：

csplit '%201211150821%' '/201211150824/' 文件

将从文件中拆分出第一个和第二个正则表达式之间的所有行。如果您的文件按日期排序（您说您正在查找日志），这可能是最快和最短的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T16:32:58.887

我为类似搜索编写了一个特定工具 - [http://code.google.com/p/bsearch/](http://code.google.com/p/bsearch/)

在您的示例中，用法将是：

$ bsearch -p '$[YYYYMMDDhhmm]' -t 201211150821 -t 201211150824 日志文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T20:37:31.573

仅限 Bash + coreutils 的 expr：

`export cmp=201211150823 ; cat file.txt|while read line; do range=$(expr match "$line" '.*\[\(.*\)\].*'); [ "x$range" = "x" ] && continue; start=${range:0:12}; end=${range:15:12}; [ $start -le $cmp -a $end -ge $cmp ] && echo "match: $line"; done`

`cmp`是你的比较值，

# xml - 使用 Actionscript 3.0 从 XML 创建列表

> ID：13500923
> 
> 赞同：0
> 
> 时间：2012-11-21T19:45:13.190
> 
> 标签：xml, actionscript-3, list, xml-parsing

这是我的 XML [http://pastie.org/5413932](http://pastie.org/5413932)

基本上我想使用 AS3 中的列表组件在列表框中列出场地**的****名称！**我对此进行了多次尝试，但没有任何运气。

 **我已经有代码加载到 XML 等这里[http://pastie.org/5413941](http://pastie.org/5413941) 我尝试使用**list.addItem({label:myXML.venue.name});** 在一个确实列出了场地名称的函数中，但由于某种原因，我在运行 swf 时无法逐个选择它们，我只能选择第一个。

我是 AS3 的新手

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:40:18.110

看来你最近问过这个 xml 一个问题 - 所以这次我们可以看到 XML 结构：

```
var venueNames:XMLList = myXML.venue.name;//here you have all name's nodes
if(venueNames && venueNames.length() > 0)
{
    for each (var name:XML in venueNames) 
    {
        trace(name);

        list.addItem({label:name.toString()});
    }
} 
```

这是您注册对列表中项目的点击的方式：

```
list.addEventListener(ListEvent.ITEM_CLICK, nameSelectedHandler, false, 0, true); 
```

这是事件可能包含的内容：

```
[ListEvent type="itemClick" bubbles=false cancelable=true columnIndex=0 rowIndex=0 index=0 item=[object Object]] 
```

该事件的 item 属性是通过 addItem 方法放置的任何对象，如您所见，还有 index 属性 - 您可以使用它来识别单击了哪个项目。然后可以从 XML 中获取场地节点，如下所示：

```
myXml.venue[e.index];//where e is the ListEvent 
```

您可以用一个函数包装它，而不是在其他地方使用它，就像在处理程序中的以下示例中一样，用于单击提交按钮：

```
 protected function onSubmit(e:MouseEvent):void
    {
        if(list.selectedIndex != -1)
        {
            trace(findVenueByIndex(list.selectedIndex));
        }
        else
        {
            trace("Nothing selected");
        }
    }

    protected function findVenueByIndex(index:int = 0):XML
    {
        return myXML.venue[index];
    } 
```

问候**

# c# - 如何为 T4 文件指定输出文件夹

> ID：13500928
> 
> 赞同：0
> 
> 时间：2012-11-21T19:45:48.060
> 
> 标签：c#, visual-studio-2010, visual-studio, t4

我在 Visual Studio 中注意到，在`T4`文件的属性中，有一个“复制到输出目录选项”。我选择了“如果更新选项则复制”，这是我希望生成的 T4 文件输出的行为。

但是，没有属性可以指定`T4`文件的输出目录。如何在 Visual Studio 中为`T4`文件指定输出目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:35:41.173

我认为该选项与发布有关，并将适用于模板本身。

为了管理我的 T4 模板的输出位置，我使用[了 T4Toolbox](http://t4toolbox.codeplex.com/)，它有一个`Template`具有`Output.File`属性的类。

# c# - 将另一个进程的窗口向前推进

> ID：13500931
> 
> 赞同：1
> 
> 时间：2012-11-21T19:46:06.507
> 
> 标签：c#, windows, winforms, winapi

我有一个 C Legacy 应用程序，这个应用程序随着时间的推移打开和关闭窗口（它是一个服务器应用程序）。

在同一台机器上，我正在运行一个 C# winforms 应用程序。

这是我的目标：我的 C# 应用程序向我的 C 应用程序发送 win32 消息。C 应用程序打开窗口。我希望新打开的 C 窗口显示在我的 C# 应用程序前面。

目前流程如下：

*   C# 向 C 发送 win32 消息
*   C 接收，并打开新窗口
*   C试图让自己前进
*   （此时我想知道 C# 是否应该告诉 C '把自己带到我面前'）

*编辑*我已经完成了一切，除了我让 C 窗口以某种方式出现在前面的部分。我目前向 C 应用程序发送消息，它会打开新窗口（在同一 .exe 的所有其他窗口前面），但在我的 C# 应用程序下。

我试过使用

```
[DllImport("user32.dll")]
static extern bool AllowSetForegroundWindow(ServerWindowHandle); 
```

但没有运气。我是否需要让我的 C 应用程序拥有我的 .net 应用程序的“所有权”？C# 应用程序正在通过 programinvoke 启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:54:46.330

你能修改C应用程序吗？如果是这样，请在 C 应用程序窗口句柄上调用[SetForegroundWindow 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx)或者，如果您可以获得对 C 应用程序窗口句柄的引用，则可以从 C# 应用程序进行此调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:17:24.537

您没有提及您使用的是什么操作系统，但通过一些搜索，我发现 SetForegroundWindow 显然并不总是在 Windows 7 上运行。[这里](https://web.archive.org/web/20121103005839/http://www.shloemi.com/2012/09/solved-setforegroundwindow-win32-api-not-always-works/)描述了一种解决方法。也许您可以从那里获取一些想法并将它们应用到 C 或 C# 应用程序中以获得有效的解决方案？

# android - 在我的服务中设置首选项时，我必须重新启动应用程序以获取新值

> ID：13500933
> 
> 赞同：0
> 
> 时间：2012-11-21T19:46:17.493
> 
> 标签：android, service, preference

我目前将我的服务的最后更新时间存储在首选项中：

```
 SimpleDateFormat sdf = new SimpleDateFormat("dd/MM HH:mm:ss");
        String now = sdf.format(new Date());

        Editor edit = PreferenceManager
                .getDefaultSharedPreferences(this).edit();
        edit.putString("lastUpdate", now);
        edit.commit();
        Log.i(this.getClass().toString(),"***** SERVICE: "+now+" *****");
        // Done with our work... stop the service!
        AlarmService_Service.this.stopSelf(); 
```

这工作得很好，但是当我想在我的 PrefenceActivity 中显示它时问题就来了。

事实上，似乎我必须强制停止应用程序以使 PreferenceActivity 显示最新值。

这是一个例子：

应用程序于 20:50 开始

服务于20:50开始

=> PrefenceActivity 显示 20h50...听起来不错

服务于 21:00 开始

=> PrefenceActivity 仍然显示 20h50!!!

服务于21:10开始

=> PrefenceActivity 仍然显示 20h50!!!

然后在 21:12，=> PrefenceActivity 仍然显示 20h50！！！

21:12 我强制关闭应用程序并再次打开它：

=> PrefenceActivity 最终显示最新值 (21:10)

真不明白是怎么回事，好像是Service期间Prefence没有更新！！！

```
public class PreferenceActivity extends SherlockPreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
        setSummaryAll(this.getPreferenceScreen());
    }

    private void setSummaryAll(PreferenceScreen pScreen) {
        for (int i = 0; i < pScreen.getPreferenceCount(); i++) {
            Preference pref = pScreen.getPreference(i);
            updatePref(pref);
        }
    }

    public void updatePref(Preference pref) {

        if (pref instanceof ListPreference) {
            final ListPreference listPref = (ListPreference) pref;
            listPref.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
                @Override
                public boolean onPreferenceChange(Preference preference,
                        Object newValue) {
                    listPref.setSummary(listPref.getEntries()[listPref
                            .findIndexOfValue(newValue.toString())]);
                    return true;
                }
            });
            pref.setSummary(listPref.getEntry());
        } else if (pref instanceof EditTextPreference) {
            Log.i("***", "EditTextPreference " + pref.getKey());
            final EditTextPreference etPref = (EditTextPreference) pref;
            etPref.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
                @Override
                public boolean onPreferenceChange(Preference preference,
                        Object newValue) {
                    etPref.setSummary(newValue.toString());
                    return true;
                }
            });
            pref.setSummary(etPref.getText());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:56:50.867

> 我写道： android:process=":remote"

这就是你困难的根源。`SharedPreferences`值在每个进程的基础上缓存，一个进程将不知道另一个进程的更改。

> 如果删除它不会影响我的应用

这将意味着您的应用程序消耗更少的 RAM，并且可能消耗更少的 CPU。通常，您的应用程序中不需要多个进程。

# doctrine-orm - Doctrine 单表继承中的外键

> ID：13500934
> 
> 赞同：2
> 
> 时间：2012-11-21T19:46:18.570
> 
> 标签：doctrine-orm

我正在尝试创建一个简单的多态属性表，该表可以存储不同类型对象的键值对。使用单表继承，这是我当前的配置：

```
/**
 * @Entity @Table(name="attributes")
 * @InheritanceType("SINGLE_TABLE")
 * @DiscriminatorColumn(name="subject", type="string")
 * @DiscriminatorMap({"page" = "PageAttribute", "product" = "ProductAttribute"})
 */
class PageAttribute
{
    /**
     * @ManyToOne(targetEntity="Page", inversedBy="attributes")
     * @JoinColumn(name="subject_id", referencedColumnName="id")
     */
    private $page;
}

/**
 * @Entity @Table(name="attributes")
 */
class ProductAttribute extends PageAttribute
{
    /**
     * @ManyToOne(targetEntity="Product", inversedBy="attributes")
     * @JoinColumn(name="subject_id", referencedColumnName="id")
     */
    private $product;
} 
```

问题是，当加载此模式时，会使用链接到 pages 表的外键约束创建 subject_id 列。

有没有办法防止这种约束，以便 subject_id 可用于所有外键？否则，我必须为每种类型的对象设置一个列，这是我试图避免的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:17:43.253

我有同样的问题。这是我解决它的方法：

```
/**
 * @Entity @Table(name="attributes")
 */
class ProductAttribute extends PageAttribute
{
    public static function getSubject() {
        return 'product';
    } 
    /**
     * @ManyToOne(targetEntity="Product", inversedBy="attributes")
     * @JoinColumn(name="product_id", referencedColumnName="id")
     */
    private $product;
} 
```

换句话说，不是使用 subject_id 来引用所有实体，而是为每种类型的实体使用单独的连接列。然后可以使用静态函数获取“主题”列的参数名称。

例如：

```
$subject = $genericPageAttribute->{$genericPageAttribute::getSubject()}; 
```

在这种情况下会返回一个“产品”的实例。

为了使这个解决方案更好，我建议编写一个所有“主题”都可以实现的接口。

我不确定这是否会涵盖所有情况，但到目前为止它似乎对我来说效果很好。

让我知道它如何为您工作（或不工作）！

# angularjs - Angular 用户数据 Ng 类

> ID：13500944
> 
> 赞同：0
> 
> 时间：2012-11-21T19:47:10.883
> 
> 标签：angularjs, global

我正在尝试使用用户数据（id、名称等）设置一个全局对象，并在模板中使用它来为评论着色。就像用户登录时一样，它会突出显示他们的评论。

我试过这个：

```
app.factory('UserService', function() {
   return {
       name : 'Johnny Williams',
       id : 2
   };
}); 
```

然后我将评论名称设置为 UserService.name 并且有效。但我不想做的是：

```
var setcommentClass = function(comment) {
if (comment.name === UserService.name) {comment.type = 'user'}
else {comment.type = 'client'}
}; 
```

然后在模板中使用这个：

```
ng-class="{user: comment.type == 'user' } 
```

这行不通。这是为什么？必须有一种更雄辩的方式来做到这一点。我不想在数据库中存储“comment.type”，因为它是无用的信息。我试过使用：

```
ng-class="{user: comment.name == UserService.name } 
```

但这也没有用。我觉得这将是最简单的方法。使用与范围无关的全局信息并在模板​​本身中使用它的协议是什么？同时也保证用户数据的安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:10:30.690

如果您需要在 html 文档中引用服务，则必须将其分配给`$scope`. 你可以试试：

```
$scope.UserService = UserService; 
```

在您的控制器中。

# css - Jade HTML - 添加到 layout.jade 正文

> ID：13500945
> 
> 赞同：1
> 
> 时间：2012-11-21T19:47:23.330
> 
> 标签：css, html, styling, pug

我有以下`layout.jade`代码

```
!!!
html
    head
        title= title
        link(rel='stylesheet', href='/vendor/bootstrap.min.css')
        link(rel='stylesheet', href='/css/style.css')
        script(type='text/javascript')
            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
    body!= body 
```

登录后会出现以下页面：

```
div.navbar.navbar-fixed-top
    div.navbar-inner
        div.container-fluid
            ul#global-nav.nav.pull-left
                a(href='#').brand Control Panel
            button#btn-logout.btn.btn-primary
                i.icon-lock.icon-white
                | Sign Out

include account
include modals/alert
include modals/confirm

script(src='/js/views/home.js')
script(src='/js/controllers/homeController.js') 
```

页面上的 div`home.jade`正在创建一个标题以将控制面板标题放入其中，并提供一个退出帐户的选项。即使您没有登录，我也想将这些 div 放在主屏幕上。我只需将它们移动到 layout.jade 页面即可成功完成此操作。

我的问题是`Control Panel`出现在标题之外。因此，该`home.jade`页面不会`layout.jade`像我想象的那样简单地添加到我的页面正文中的代码中，关于如何做到这一点的任何想法？

IE

```
layout.jade
body
    div.header

home.jade
    p hello 
```

我认为这种代码只会创建一个带有正文的主页

```
body
    div.header
        p hello 
```

在标题里面。

理想情况下，我希望此伪代码到位，并且仅在登录时才显示注销文本，并且在您未登录时启用登录功能，因为最终我希望主登录容器位于中间从按钮中弹出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T06:23:29.157

您需要查看翡翠块。[这是关于这个主题的一个很好的教程，详尽而简短](http://www.devthought.com/code/use-jade-blocks-not-layouts/)，以及关于这个问题的[Jade Github 自述](https://github.com/visionmedia/jade#a12)文件。

您将使用“包含”和“块”的组合来创建可以按照您想要的方式工作的文件的混合。请注意确保您对包含的文件结构和目录与您从中调用它们的文件保持警惕。

# asp.net-mvc-4 - MVC 安全 WebSecurity.CreateAccount 或 Membership.CreateUser

> ID：13500946
> 
> 赞同：1
> 
> 时间：2012-11-21T19:47:26.950
> 
> 标签：asp.net-mvc-4

* * *

谁能让我知道两者之间的区别

WebSecurity.CreateAccount 或 Membership.CreateUser

我应该使用哪个在 mvc 4 .net 中创建用户

# c# - 如何在 ASP.net 网站中实现视图模型功能

> ID：13500947
> 
> 赞同：1
> 
> 时间：2012-11-21T19:47:32.647
> 
> 标签：c#, asp.net, asp.net-mvc, textbox

我正在使用一个 asp.NET 网站——这是我不习惯的。我有一个包含大量`asp:Textbox`控件的页面，所有控件都带有`runat="server"`，并且我有一个`DataTable`完整的值。基本上我想实现某种类似**MVC 模型的功能**，这样我就可以将值分配给每个`textbox`.

所以，有几个问题：

> 1.  有没有办法以相当最佳的方式做到这一点？（不想使用会话等）
> 2.  如果没有，任何人都可以提出更好的方法来做到这一点吗？

其中一个的一般外观`textbox`是这样的：

```
<asp:Textbox runat="server" class="number" name="ns_loanAmt" id="ns_loanAmt" value="???" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-06T19:14:12.230

这个问题似乎很老了，出于某种原因它已经过编辑，所以可能有人仍然感兴趣。

我想知道为什么 OP 没有考虑内置的网络表单绑定。虽然现在我主要使用 MVC，但多年来我们都使用 ASP.NET 数据绑定开发了几十个应用程序，而且它确实有效。

在这种特殊情况下，我将创建一个作为单个文本框模型的类。该类将包含值、CSS 类，可能还有一些其他属性。

```
public class RowModel
{
    public string Text { get; set; }
    public string CSSClass { get; set; }
    ...
} 
```

然后我会有一个中继器、一个网格视图或一个列表视图，我会在行模板中放置一个文本框。

```
<asp:ListView ID="listView1" runat="server">
  ...
  <ItemTemplate>
     <asp:TextBox id="textBox" runat="server" 
                  cssclass="<%# CSSClass %>" Text="<%# Text %>" /> 
  </ItemTemplate> 
```

然后，在后面的代码中，我只需将模型实例列表绑定到可绑定控件。

```
List<RowModel> rowList;
...
if ( !this.IsPostBack )
{
   listView1.DataSource = rowList;
   listView1.DataBind();
} 
```

甚至以`ObjectDataSource`声明方式创建和绑定。

然后，在每次回发时，可以读取已发布值的列表并将其放回数据库中。

ASP.NET Web 窗体绑定始终有效，并且由于自动视图状态管理，特定场景甚至比手动、类似 MVC 的状态管理简单得多。例如，列表视图中提供的插入和编辑模板很容易切换，这在纯 MVC 中需要一些努力（尽管您可以更好地控制发生的事情）。

# google-drive-api - 使用 google drive 作为第三方存储 php 文件上传给用户

> ID：13500948
> 
> 赞同：0
> 
> 时间：2012-11-21T19:47:41.407
> 
> 标签：google-drive-api

我想在 google drive 中购买 1TB 空间并为用户创建一个文件共享中心，以便用户可以使用我的 google drive 帐户上传和下载文件，这样文件上传将对所有用户公开

谷歌驱动SDK中可能吗？

用户不需要登录或验证任何内容，只需上传和下载文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:58:24.720

您可以使用服务帐户将文件存储在应用程序拥有的帐户中，并且不需要用户使用其凭据进行身份验证：

[https://developers.google.com/drive/service-accounts](https://developers.google.com/drive/service-accounts)

# solr - SolrCloud 的可扩展性是否扩展到索引？

> ID：13500955
> 
> 赞同：1
> 
> 时间：2012-11-21T19:47:50.950
> 
> 标签：solr, lucene, solrcloud

在我看到的所有文献中，SolrCloud 的可扩展性似乎只涉及查询。意思是，复制和分片将客户端查询的负载分布在更大的 CPU 和更宽的带宽上。

但是索引呢？

SolrCloud 的可扩展性是否提高了索引性能？可以配置为加快索引时间吗？就我而言，我们需要经常向索引提交新内容；这种特殊情况会改变什么吗？

Mark Miller 在 Lucene Revolution 2012 上的[演讲](http://vimeo.com/43913870)引人入胜，涵盖了索引的一些细节。但似乎某些云功能（如复制）可能会使索引速度变慢，而不是更快。有人试过 SolrCloud 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T02:35:00.873

好吧，我终于能够建立一个合适的云环境进行测试，并且简单地说，即使使用 RAMDirectory，索引速度也注定要失败。我不知道索引速度是否与云中的追随者数量或集合数量有关，但是具有 1 个领导者 2 个追随者结构和 8 个集合会使索引速度慢 4 到 5 倍。我能够在 17 分钟内索引大约 350 万个文档，而对于云中的每个实例使用相同的配置，我只能在 17 分钟内索引 65 万个文档......我不知道如何加快 SolrCloud 索引速度和一些惊讶地看到我对云的期望被一一摧毁，因为我在处理它时不断收到新的错误和问题。

如果这也发生在任何其他设置上，我不明白将云用于 Solr 有什么意义。我的意思是，如果索引速度提高这么多，我可以更快地重新索引经典独立 solr 实例上的所有内容。

如果有人尝试过或有人在真实环境中使用过 SolrCloud，那么看到其他一些经验会非常好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T10:45:14.447

您将哪个版本的 solr 用于 solr cloud？Solr 云自 solr 4.8 版本以来非常稳定。

1.  您可以通过不频繁地硬提交文档来提高索引速度，而是分批提交，即在 45 或 60 秒之后。这可以通过 solr config 中的自动提交配置来实现 -

2.  虽然硬提交可确保将数据刷新到稳定的存储中，但它不会使更改可见，这是通过软提交标签实现的。将软提交的值设置为 90-120 秒左右。这也可以通过 solr config 中的软提交配置来实现 -

# java - IntelliJ 设备配置列表为空

> ID：13500966
> 
> 赞同：1
> 
> 时间：2012-11-21T19:48:19.127
> 
> 标签：java, android, intellij-idea, osx-mountain-lion

我遇到了与此线程中的人们相同的麻烦：[设备配置显示没有默认设备。如何解决这个问题？](https://stackoverflow.com/questions/13422872/device-configurations-showing-no-default-device-how-to-fix-this/13500307#13500307)

不幸的是，关于 的解决方案对`.xml-File`我不起作用。之后，我完全重新安装了`Java`，`Android SDK`并且`IntelliJ`（在完全删除所有设置等之后）

我正在跑步`OS X 10.8.2`并尝试`InteliJ 11.1`过`12 EAP`。

我在这里完全迷失了，非常感谢任何帮助。

# java - Java 扩展类访问器

> ID：13500976
> 
> 赞同：1
> 
> 时间：2012-11-21T19:49:26.507
> 
> 标签：java, extends

有没有办法`private`从子类访问父类中的字段？IE：

```
public class parent<T> {
    private int MaxSize; 

    ...

}

public class sub extends parent {
    public int getMaxSize() {
        return MaxSize;
    }
} 
```

基本上我想要一个访问器方法，`getMaxSize()`来返回一个`ArrayQueue`. 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:52:47.867

否 -`private`字段只能在声明它们的类中直接访问。但是，您可以创建 field `protected`，这将允许您从子类中访问它。下表是一个方便的参考：

```
每个情绪化者允许的访问：
 修饰符类包子类世界
----------------------------------------------
*公共*       YYYY
*保护*    YYYN
*无修饰符*  YYNN
*私有*      YNNN

```

[[**来源**]](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

当然，您也可以编写一个`public`（或`protected`！）getter 方法，它只返回您的字段的值，并在子类中使用此方法而不是实际的字段本身。

*顺便说一句，在 Java 中以camelCase 形式*编写变量名是惯例，即`***m***axSize`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:53:07.020

`private`变量不能从其声明类以外的任何类访问，这意味着子类无权访问`private`其父类的变量。

您可以在具有`public`访问权限的父类中添加一个 getter，它们都允许子类访问。使用这种结构，您的子类也从父类继承`getMaxSize()`，无需在子类中声明方法。

```
public class Parent {
    private int maxSize;

    public int getMaxSize() {
        return maxSize;
    }
} 
```

# angularjs - ng-repeat: How to detect when a value in a column *changes* (aka column break)

> ID：13500979
> 
> 赞同：1
> 
> 时间：2012-11-21T19:49:29.370
> 
> 标签：angularjs

Given a list of items displayed with ng-repeat I want to display extra stuff whenever a value in a column *changes*, eg:

```
var myApp = angular.module('myApp', []);

function MyCtrl($scope) {

    $scope.cards = [
        {suit: 'Hearts',   value: 7},
        {suit: 'Clubs',    value: 7},
        {suit: 'Spades',   value: 7},
        {suit: 'Diamonds', value: 7},
        {suit: 'Hearts',   value: 8},
        {suit: 'Clubs',    value: 8},
        {suit: 'Spades',   value: 8},
        {suit: 'Diamonds', value: 8},
        {suit: 'Hearts',   value: 9},
        {suit: 'Clubs',    value: 9},
        {suit: 'Spades',   value: 9},
        {suit: 'Diamonds', value: 9} ];

    $scope.myValueFunction = function(card) {
        return [card.suit, card.value];
    };
}​ 
```

I need the following result:

```
The Clubs
7
8
9
The Diamonds
7
8
9
The Hearts
7
8
9
The Spades
7
8
9 
```

I would prefer to have a HTML something like that:

```
<div ng-controller="MyCtrl">
    <div ng-repeat="card in cards | orderBy:myValueFunction">
        <div break-on-column="card.suit">The {{card.suit}}</div> 
        <div>{{card.value}}</div>
    </div>
</div> 
```

Of course, the real problem contains many columns (not just two), several break columns (eg: break-on-column="col1,col2,col3"), the break columns are not fixed (ie. the are chosen by the user at runtime).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T14:48:15.520

我会按照数组显示您需要的数据的方式对数组进行预处理。我不认为 ng-repeat 指令能够做这样的事情。

另一个想法可能是编写一个自定义函数来显示如下信息：

**HTML**

```
<div ng-controller="MyCtrl">
    <div ng-repeat="card in cards | orderBy:myValueFunction">
        <data-displaying></data-displaying>
    </div>
</div> 
```

**指示**

```
.directive('dataDisplaying', function() {
    return {
        templateUrl: 'partials/dataTemplate.html',
        link: function(scope, element, attrs) {
            // Data transformation goes in here
        }
    }
}) 
```

然后您可以处理指令中的数据，并且仅在设置正确时才输出西装（或其他任何东西）。例如，临时存储西装，并在西装不同时将其输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:23:58.647

我会像[这样使用 ng-hide](http://plnkr.co/edit/DD8noq)

```
function MyCtrl($scope) {

  //...

  $scope.breakProperties = [ 'suit' ];

  $scope.breakOn = function(property, index, cards, breakProperties) {
    var previousIndex = index - 1;
    var propertyPresent = false;
    if (previousIndex >= 0) {
      var card = cards[index];
      var previousCard = cards[previousIndex];
      for ( var i = 0; i < breakProperties.length; i += 1) {
        if (breakProperties[i] === property) {
          propertyPresent = true;
        }
      }
      //if the property is not on the list always show regardless of value
      if (!propertyPresent) {
        return false;
      }

      //if the property is different
      if (previousCard[property] !== card[property]) {
        return false;
      }
    }
    //if it's the first always show
    else {
      return false;
    }
    return true;
  };
} 
```

模板

```
<div ng-controller="MyCtrl"
  ng-init="orderedCards = cards | orderBy:myValueFunction">

  <button ng-click="breakProperties = [ 'suit' ]">Break on suit</button>
  <button ng-click="breakProperties = [ 'points' ]">Break on points</button>
  <button ng-click="breakProperties = [ 'suit', 'points' ]">Break on
    suit and points</button>

  <div>{{breakProperties}}</div>

  <div ng-repeat="card in orderedCards"
    style="border: 1px solid; margin-bottom: 1px;">
    <div ng-hide="breakOn('suit', $index, orderedCards, breakProperties)">Suit
      {{card.suit}}</div>
    <div>Value {{card.value}}</div>
    <div ng-hide="breakOn('points', $index, orderedCards, breakProperties)">Points
      {{card.points}}</div>
  </div>
</div> 
```

# c# - Windows Phone 7 网络浏览器搜索模式

> ID：13500982
> 
> 赞同：0
> 
> 时间：2012-11-21T19:49:50.760
> 
> 标签：c#, visual-studio-2010, windows-phone-7, browser

您好我正在创建一个应用程序，我有两个单独的页面，一个是主页面，一个是 Web 浏览器页面。

我在主页上有一个文本块和一个按钮，而在 Web 浏览器上我只有 Web 浏览器控件。

我需要做的是，如果用户在文本块中写入例如巧克力或其他任何内容，它应该以某种方式转移到网络浏览器控件并在您按下主页上的按钮时自动搜索巧克力。

我需要一些帮助知道在这里写什么所以任何帮助将不胜感激。

对于网络浏览器，我编写了以下代码，如果您有，请告诉改进建议：

```
webBrowser1.source = (new Uri("http://bing.com/" , Urikind.Absolute)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:01:33.950

您可以在此处查看每个搜索引擎模式

```
"Google", URLPattern = "http://www.google.com/search?q={0}"
"Yahoo", URLPattern = "http://search.yahoo.com/search?p={0}"
"Bing", URLPattern = "http://www.bing.com/search?q={0}" 
```

只需用它替换您的文本： **例如：**

```
String url = String.Format(URLPattern, textblock.Text);
webBrowser1.source = (new Uri(string.Format(url) , Urikind.Absolute)); 
```

# performance - Flash游戏中孩子的记忆问题

> ID：13500984
> 
> 赞同：2
> 
> 时间：2012-11-21T19:49:59.600
> 
> 标签：performance, actionscript-3, flash, memory, children

我做了一个 Flash 游戏，你驾驶飞机，你必须抓住圆圈，避免降落伞之类的东西。这是游戏的屏幕，您可以了解我在说什么：

![游戏截图](../Images/989548ecb445b7707738851d3dc6425a.png)

我遇到的问题是内存使用情况，因为我想用空气将它迁移到 iphone。当我在菜单中没有问题时，应用程序使用大约 40 mb。但是当我玩的时候，记忆像箭头一样上升。我拍摄了 Monster Debugger 图形的屏幕。这里是：

![内存使用截图](../Images/5919ee95310bd7ad12f06e49d08b6742.png)

问题是我对从天上掉下来的每个元素都有不同的类。降落伞，冲浪者，圆圈线和奖金。它们都非常相似，所以我将只复制降落伞类：

```
package  {

    import flash.display.MovieClip;
    import flash.utils.Timer;
    import flash.events.*;
    import ascb.util.NumberUtilities;
    import myGlobal;
    import flash.geom.*;
    import com.demonsters.debugger.MonsterDebugger;

    public class paracaidistasClass extends MovieClip {

        private var n:Number = 0;
        private var _rotacionDelAvion:int = 1;
        private var temporizador:Timer=new Timer(myGlobal.paracaidistasTemporizador[myGlobal.nivel - 1],0);

        public function paracaidistasClass() {
        // constructor code 
        temporizador.start();
        temporizador.addEventListener(TimerEvent.TIMER, emisor);
        addEventListener(Event.ENTER_FRAME, altura);
        }

        private function altura(e:Event):void{
        if (myGlobal.detener == false){
            this.y = this.y - myGlobal.altura;
        }
        }

        private function emisor(e:TimerEvent){
            if (myGlobal.detener == false){
                        temporizador.delay = NumberUtilities.random(myGlobal.paracaidistasMinimoDelay[myGlobal.nivel - 1], myGlobal.paracaidistasMaximoDelay[myGlobal.nivel - 1]);
                        var paracaidista = new paracaidistaClass;
                        this.addChildAt(paracaidista, 0);
                        paracaidista.y = NumberUtilities.random(-350,50);
                        myGlobal.cantidadDeParacaidistas = this.numChildren;
                        addEventListener(Event.ENTER_FRAME, movimiento);
            }
        }

        private function movimiento(event:Event):void{
if (myGlobal.detener == false){
                for (var i:Number=0; i<this.numChildren;i++){
                    getChildAt(i).x = getChildAt(i).x - (myGlobal.velocidad - (pasarAPositivo(myGlobal.rotationDelAvion) / 12));
                    getChildAt(i).x = getChildAt(i).x - 1;
                    if (getChildAt(i).localToGlobal(new Point(stage.x,0)).x < -200){
                        removeChildAt(i);
                        myGlobal.cantidadDeParacaidistas = this.numChildren;
                    }
                }
}
//delete all parachutes
        if (myGlobal.reiniciar == true){
            for (var d:Number=0; d<this.numChildren;d++){
                        removeChildAt(d);
                        myGlobal.cantidadDeParacaidistas = this.numChildren;
            }
        }
        }

        private function pasarAPositivo(value:int):int{
            var _rotacionPositiva:int;
            _rotacionPositiva = value;
            if (_rotacionPositiva < 0){
                _rotacionPositiva = _rotacionPositiva * -1;
            }
            return _rotacionPositiva;
        }

    }

} 
```

好。屁股你可以看到我删除了不在舞台上或被击中的降落伞，所以内存使用应该在某个点稳定下来。我也检查过，我从来没有通过降落伞的 3、4 个孩子。所以，我不明白为什么只有当你删除整个级别末尾的整个班级时，内存才会下降，为什么当你删除我不使用的孩子时它不稳定并继续增长。我希望你足够清楚，有人知道问题所在。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:57:26.750

不确定 emisor Timer 回调中到底发生了什么，但每次满足条件时都会添加一个 eventListener。如果每个降落伞都有一个，那么您就不会在任何地方删除该 eventListener。整个应用程序实际上只需要一个 ENTER_FRAME eventListener 并且只需更新子类即可。

# linux - 是否可以在没有 root 的情况下在 CentOS 上安装 g++？

> ID：13500987
> 
> 赞同：9
> 
> 时间：2012-11-21T19:50:13.600
> 
> 标签：linux, gcc, g++, centos, root

我有一台带有 CentOS 5.8 的核心 i7 机器，我通过 SSH 连接并用于运行模拟。不幸的是，它只有 gcc 版本 4.1.2。与使用 Microsoft Visual Express c++ 2010 在较慢的笔记本电脑上进行优化时相比，这似乎产生的程序要慢得多。我尝试了各种 g++ 优化标志，但它们没有太大帮助，所以我想我需要升级 gcc。

我的机器上没有root，所以看起来我必须将它安装在我的主目录中。这是否可行，如果可行，是否需要任何具体说明来执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T20:05:26.943

您可以使用 EasyBuild，它可以让您非常轻松地安装特定的 GCC 版本而无需 root，请参阅[http://hpcugent.github.com/easybuild](http://hpcugent.github.com/easybuild)。

免责声明：我是一名 EasyBuild 开发人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T04:08:05.840

你也可以使用 GNU SRC..

配置完成后，进入gsrc目录，指定如下命令：

```
make -C gnu/gcc 
make -C gnu/gcc install 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T21:35:21.483

如果您是从源代码 tarball 构建的，我相信您应该能够使用`./configure --prefix=~/path/to/build/into`and then `make`and `make install`。

# c++ - Eclipse Ubuntu 中的“程序不是可识别的可执行文件”错误

> ID：13500989
> 
> 赞同：0
> 
> 时间：2012-11-21T19:50:40.363
> 
> 标签：c++, linux, eclipse, eclipse-cdt

我知道这个问题之前已经发布过，但我仍然无法让它工作，显然我是 C++ 新手；）我有这个“你好世界！” eclipse 中使用 CDT 的 C++ 程序，我可以编译它，如果我从控制台运行它，它可以工作....但是当我在 eclipse 中使用 run 或 debug 命令时，我得到了两个不同的错误：

从调试：“程序不是可识别的可执行文件”

从运行：“Exec_tty 错误：无法运行程序”/blah/blah/CProjects/Practice/MAIN.cpp“：未知原因”

我尝试通过修改项目上的解析器，但没有运气......我实际上正在使用 GNU Elf 解析器，我从命令行使用 gdb 并正常运行，所以很明显（至少对我而言）在我的 Eclipse 中出现了问题配置...但是什么？

非常感谢

D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T19:54:26.940

您不能*运行*C++ 源代码。您必须运行可执行文件。

在 Eclipse 环境中，一个简单的“调试”命令应该可以做正确的事情。您必须通过将源代码配置为调试器目标来混淆它。

# windows-phone-8 - WP 8 NFC 文件传输

> ID：13500992
> 
> 赞同：0
> 
> 时间：2012-11-21T19:50:52.943
> 
> 标签：windows-phone-8

我正在寻找有关如何通过 NFC（蓝牙）将大文件从一台 Windows phone 8 传输到另一台的示例。

我想我需要通过 NFC 建立连接，然后通过蓝牙进行传输，但我找不到任何示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T20:50:51.093

NFC 不是传输文件的好格式。它速度慢，带宽低，并且在很长一段时间内通常不可靠。NFC 非常适合启动升级为蓝牙或 WiFi 文件传输的点击和共享会话。幸运的是，这就是 PeerFinder 最擅长的。

本质上，首先您需要通过 NFC 找到新的对等方。您可以通过使用 TriggeredConnectionStateChanged 事件或订阅两台设备之间的应用到应用 NFC 消息来做到这一点。

接下来，您应该在这两个对等点之间打开一个 StreamSocket。此时，默认情况下通信是非结构化的。这意味着，您发送和接收字节流，作为开发人员，您需要理解它们。如果你想传输文件，那就去吧，但你必须构造蓝牙 StreamSocket 来期待这些。这种结构可能看起来像*|1 字节表示版本号|1 字节表示文件传输开始|4 字节表示文件大小的 int32 字节传输|文件内容以指定长度的字节表示|4 字节表示文件内容 MD5/SHA1哈希验证文件的内容|* . 协议的外观完全取决于您，但请记住您必须发送和接收字节。

诺基亚有[一个端到端的示例](http://projects.developer.nokia.com/nfctalk)，它启动了一个 NFC 点按共享、打开一个 StreamSocket 并通过该套接字传输结构化消息。它不是文件，但它会向您展示如何使用 NFC、升级到 WiFi/蓝牙以及使用真实版本的结构化消息格式。[在此处](http://projects.developer.nokia.com/nfctalk)和此处查看诺基亚的 NFC Talk 项目[，了解有趣的部分](http://projects.developer.nokia.com/nfctalk/browser/NFCTalk/Communication.cs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T00:29:50.243

Build 会议上有一个网络演讲，您可能会从中得到一些想法。它专注于套接字和 NFC。 [Windows Phone 8：面向开发人员的网络、蓝牙和 NFC 感应](http://channel9.msdn.com/Events/Build/2012/3-047)。有关代码，请参阅[示例项目](http://code.msdn.microsoft.com/Windows-Phone-8-Networking-835239c1)。在 Devcenter 上还有一个[StreamSocket](http://code.msdn.microsoft.com/windowsapps/StreamSocket-Sample-8c573931)示例。

# sharepoint - Sharepoint Search Error: The SharePoint server was moved to a different location, custom login page

> ID：13500994
> 
> 赞同：3
> 
> 时间：2012-11-21T19:51:06.307
> 
> 标签：sharepoint, search

i am new on forums (so be nice if i am doing things the wrong way), i hope you guys help me solve this issue; i have spent 4 hrs, trying to get this work. i am trying to crawl my site collection content, but it’s not possible:

My farm is build this way

*   SharePoint 2010 standard
*   FBA and ntlm, anonymous access
*   2 WFE's, hardware balancing.
*   Http to Https redirect using url Rewrite Module
*   Custom FBA Login Page,
*   Search account has full reading permission, on my app.
*   in the default zone i have the server name, and in the crawl definition i have

I have a Test environment on my client's place with this configuration:

*   SharePoint 2010 standard
    *   FBA and ntlm, anonymous access
    *   1 WFE
    *   Http to Https redirect using url Rewrite Module
    *   Custom FBA Login Page,
    *   Search account have full reading permission, on my app. on this environment SharePoint search works perfect.

when i try to crawl my content source, i get the following error

***SharePoint Search Error: The SharePoint server was moved to a different location, custom login page. *** when i look the log file, there are 2 top level errors, and one delete.

Searching this issue, i have found this: -create a rule, excluding layouts Folder (tested, but its not working) -write on server host file, the mapped URL, passing thru balancing device (not tested) -Extending my web app and use only - NTLM authentication (not tested on my client environment, but i want this to be my last option)

Any ideas, TX on advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:39:30.980

我的猜测是 http->https 模块导致了这个问题。尝试并配置生产，以便您可以直接通过 https 访问 url。

这将确认或排除它是 http 模块。

# c++ - 函数重载和虚方法表

> ID：13500995
> 
> 赞同：0
> 
> 时间：2012-11-21T19:51:06.883
> 
> 标签：c++, overloading

> **可能重复：**
> [C++ 中的切片问题是什么？](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)

我有一个简单的代码作为多态性和继承的例子

```
class A
{
public:
    int fieldInA;

    void virtual overloadedFunc()
    {
        printf("You are in A\n");
    }
};

class B : public A
{
public:
    int fieldInB;

    void overloadedFunc()
    {
        printf("You are in B\n");
    }
};

void DoSmth(A* a)
{
    a->overloadedFunc();
}

void DoSmthElse(A a)
{
    a.overloadedFunc();
}
int _tmain(int argc, _TCHAR* argv[])
{
    B *b1 = new B();
    B b2;
    //Breakpoint here
    DoSmth(b1);
    DoSmthElse(b2);
    scanf("%*s");
    return 0;
} 
```

当我在断点处停止时，b1 的 _vfptr[0] 和 b2 的 _vfptr[0] 的值是相同的（SomeAddr(B::overloadedFunc(void))）。在 DoSmth() 中将 b1 作为参数传递后，局部变量 a 的 _vfptr[0] 仍然是 someAddr(B::overloadedFunc(void))，但 DoSmthElse 中 a 的 _vfptr[0] 现在是 someAddr(A::overloadedFunc(void) ））。我确定这是我对函数重载概念的一些误解，但我无法理解，为什么在第一种情况下我看到“你在 B 中”，而在第二种情况下看到“你在 A 中”。与 A *b1 = new B(); 相同 DoSmth(b1); // 你在B，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T20:36:21.543

首先，您需要正确使用术语！您没有*重载*任何功能，而是*覆盖了*它们：

*   *重载*意味着你有相同的函数名和不同类型的参数。选择正确的重载是编译时操作。
*   *覆盖*意味着您具有具有多态（在 C++ 中`virtual`）函数的类层次结构，并且您将被调用的函数替换为适用于更专业类的对象的函数。你*覆盖*了原来的意思。选择正确的覆盖是一个运行时操作，在 C++ 中使用类似于虚函数表的东西。

这些术语令人困惑，更糟糕的是，它们甚至相互作用：在编译时选择正确的重载方式，最终调用可能被覆盖的虚函数。此外，覆盖派生类可能会隐藏从基类继承的重载。但是，如果您无法弄清楚这些条款，那么所有这些都可能没有意义！

Now, for your actual problem, when you call `DoSmthElse()` you pass your object `b2` by value to a function taking an object of type `A`. This creates an object of type `A` by copying the `A` subobject of your `B` object. But since `B` is derived from `A`, not all of `B` gets represented, i.e., the `A` object you see in `DoSmthElse()` doesn't behave like a `B` object but like an `A` object. After all, it *is* an `A` object and not a `B`! This process is typically called *slicing*: you slice off the parts of the `B` object which made it special.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:02:29.183

要获得多态行为，您需要在指针或对基类的引用上调用虚函数，而不是基类的实例。当你调用这个函数

```
void DoSmthElse(A a) 
```

你传递了一个`B`. 这是按值传递的，因此参数是您传递给它的实例的**切片**副本。`B`本质上，这意味着所有`B`共同的属性`A`都保留在此副本中，并且所有属性`B`都特定于`B`而不是`A`丢失。因此，调用`DoSmthElse()`该函数`overloadedFunc()`的对象现在完全属于类型`A`（不再属于类型`B`），因此当然`A::overloadedFunc()`会被调用。

在第一种情况下，`DoSmth`当参数是指向基类的指针类型时，多态行为会如您所愿地获得 -`B*`参数被传递给函数，并且这个指针的副本现在是 type `A*`。尽管副本已被强制转换为`A*`，但指向的对象仍然是 类型`B`。因为指向的对象的类型`B`是通过指向它的基类的指针来访问它，所以确保函数`B::overloadedFunc()`在行时被实际调用

```
a->overloadedFunc(); 
```

被执行，**因为虚函数`overloadFunc()`被 class 覆盖`B`**。如果类`B`没有实现它自己的基类虚函数的不同版本（即类`B`覆盖类`A`功能），那么基类版本将被调用。

# windows - Windows TYPE to Console recreated using Unix Shell scripting

> ID：13500998
> 
> 赞同：0
> 
> 时间：2012-11-21T19:51:22.477
> 
> 标签：windows, unix, scripting, batch-file

We have simple Windows batch files that when an error occurs, an "ONCALL.bat" file is run to display support information that is maintained in a separate oncall.txt text file. This is our SOP.

**ONCALL.BAT**:

```
set scriptpath=%~dp0

TYPE "%scriptpath%oncall.txt" 
```

I have zero experience with Unix and Shell scripts and I need to quickly provide a shell script equivalent to run in a Unix environment.

Could someone please provide me the .sh equivalent of this code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T20:14:00.170

假设帮助文件和脚本在同一个目录下：

```
#!/bin/sh

SCRIPTPATH=`dirname "$0"`

cat "$SCRIPTPATH"/oncall.txt 
```

`$0`是当前脚本的文件路径；该`dirname`命令提取它的目录部分。这样，您可以避免在脚本中为帮助文件使用硬编码路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:12:15.727

```
cat oncall.sh
#!/bin/bash
scriptpath=/path/to/scripts

cat ${scriptpath}/oncall.txt 
```

创建文件后，运行不会有什么坏处

```
 dos2unix oncall.sh 
```

只是为了确保没有 Windows Ctrl-M 字符会完全使您迷惑他们可以搞砸 Unix 脚本处理的方式。

然后

```
 chmod 755 oncall.sh 
```

使脚本可执行。

确认

```
 ls -l oncall.sh 
```

你应该看到像这样的列表

```
-rwxr-xr-x 1 userName grpname  5263 Nov 21 14:44 oncall.sh 
```

最后，用完整或相对路径调用脚本，即

```
 ./oncall.sh 
```

或者

```
 $PWD/oncall.sh 
```

* * *

第一行称为“shebang”行，当您的脚本被调用时，操作系统会读取文件的第一行，以找出运行什么程序来解释脚本文件的其余部分。

您可能希望/需要使用以下之一作为第一行“shebang”，但 bash 是一个不错的猜测

```
 #!/bin/ksh
 #!/bin/sh
 #!/bin/ash
 #!/bin/dash
 #!/bin/zsh 
```

或者您可能在最坏的情况下，您的外壳位于非标准目录中，那么您必须将其拼写出来，即

```
 #!/usr/bin/ksh 
```

所有 shell 都支持跟踪和变量扩展的调试参数，例如

```
 #!/bin/ksh -vx 
```

或者您可以仅包装某些行以打开和关闭调试，例如

```
 set -vx
   cat ${scriptpath}/oncall.txt
  set +vx 
```

鉴于

> % 和 0 之间的 ~dp 特殊语法基本上表示扩展变量 %0 以显示驱动器号和路径，从而为您提供包含批处理文件的当前目录！

我认为这`/path/to/scripts`是一个合理的替代品，`scriptpath=$PWD`可以直接替代，因为 Unix 中没有驱动器号。那里的问题是，您要么依靠 unix PATH var 来查找脚本，要么`cd /path/to/scripts`然后`./oncall.sh`使用相对路径运行`./`以查找文件，而无需向 PATH 添加值。

IHTH。