# StackOverflow 问答 14659000-14659999

# ruby-on-rails - 使用范围对相关子模型中的条目进行排序

> ID：14659000
> 
> 赞同：1
> 
> 时间：2013-02-02T05:39:51.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-models

我有三个相关模型，如下所示，每个模型都是上述模型的子模型：

```
class Course < ActiveRecord::Base 
  has_many :questions 
end 

class Question < ActiveRecord::Base 
  belongs_to :course
  has_many: :answers

  default_scope order: 'questions.created_at DESC'
  scope :by_answer_count, -> { #orders Questions based on its answer count
    joins(:answers).reorder("count(answers.id) DESC").group(:id)
  }
end 

class Answer < ActiveRecord::Base 
  belongs_to :question
end 
```

我无法弄清楚的是：我如何使用我的模型中的范围方法`by_answer_count`，以在 的操作中按最多的答案对我显示的**课程**`Question`列表进行排序？有没有办法利用它，或者我应该在我的范围内编写一个 2 层向下范围的方法来让过滤器工作？**`index``CoursesController``CoursesController`**

 **谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T05:55:48.103

您应该能够使用[合并](http://apidock.com/rails/ActiveRecord/SpawnMethods/merge "合并")来使其正常工作。

```
class Course < ActiveRecord::Base
  scope :by_answer_count, joins(:questions).merge(Question.by_answer_count)
end 
```

**编辑**

合并的工作方式似乎存在错误。 [https://github.com/rails/rails/issues/3002](https://github.com/rails/rails/issues/3002)

您可以通过添加从课程到答案的关系来解决它。因此，您的 Course 课程将如下所示：

```
class Course < ActiveRecord::Base
  has_many :answers, through: :questions
  scope :by_answer_count, joins(:questions).merge(Question.by_answer_count)
end 
```

另一种选择是在您的 Question 类中使用手动连接子句。

```
joins("answers ON answers.question_id = questions.id").reorder(...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T06:28:50.510

我认为你应该在你的关联上设置一个 counter_cache 。就像 Ryan Bates 在他的第一个截屏视频中建议的那样：[http ://railscasts.com/episodes/23-counter-cache-column](http://railscasts.com/episodes/23-counter-cache-column)

我认为以下方法会起作用：

```
Course.joins(:questions).order('questions.answer_count DESC') 
```

或范围：

```
scope :most_answered, joins(:questions).order('questions.answer_count DESC') 
```

它还具有作为单个查询的好处。我没有测试，但它应该工作。**

# r - 在 R 中创建一个逻辑向量并使用哪个函数

> ID：14659001
> 
> 赞同：17
> 
> 时间：2013-02-02T05:40:03.120
> 
> 标签：r

我有一个包含三列的数据集。第一列是类型，第二列是面积，第三列是价值。我想编写一个逻辑向量，使得类型 =1 ，面积 = 3 和价值 = 6。我能够使用子集创建数据框，但我无法创建逻辑向量。

```
hello <- read.csv("type.csv")
hello1 <- subset(hello, type==1 & area ==3 & worth ==6) 
```

值列中有许多 NA 值。数据集是[https://www.dropbox.com/s/gjjwmnr8uxmy18y/type.csv](https://www.dropbox.com/s/gjjwmnr8uxmy18y/type.csv)

谢谢。

贾巴巴

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-02T06:36:12.897

所以这个问题仍然得到回答：

```
which(with(hello, type == 1 & area == 3 & Worth == 6)) 
```

请记住，您可以将其用作：

```
which(hello$type1 == 1 & hello$area == 3 & hello$Worth == 6) 
```

也是。但是，当您有更多的语句要检查时，a`with`会派上用场，因为它允许您检查而无需`hello$`每次都输入。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-14T13:50:38.697

尽管已经接受了答案，但 OP 要求创建一个逻辑向量，并且答案

```
which(hello$type1 == 1 & hello$area == 3 & hello$Worth == 6) 
```

返回符合这些条件的行。要改为返回逻辑向量，只需使用 的参数`which`，即

```
hello$type1 == 1 & hello$area == 3 & hello$Worth == 6 
```

# delphi - 在 64 位 Delphi 项目中使用 64 位 bass.dll 时如何解决启动时应用程序崩溃的问题？

> ID：14659002
> 
> 赞同：4
> 
> 时间：2013-02-02T05:40:05.430
> 
> 标签：delphi, delphi-xe3, win64, bass.dll

我无法使用[64 位版本的 bass.dll](http://www.un4seen.com/forum/?topic=9038)运行我的 64 位 Delphi 应用程序。我正在使用 Delphi XE3 来构建我的应用程序。

应用程序崩溃以开始`0xc000007b`。调试器消息：

```
线程开始：线程 ID：7692。处理 Project1.exe (7444)
进程开始：D:\svn\preplayer\Project1.exe。基地址：0000000076DBC500 美元。处理 Project1.exe (7444)
模块负载：Project1。有调试信息。基址：0000000000400000 美元。处理 Project1.exe (7444)
模块加载：ntdll.dll。没有调试信息。基址：0000000076D90000 美元。处理 Project1.exe (7444)
模块加载：snxhk64.dll。没有调试信息。基本地址：0000000070D20000 美元。处理 Project1.exe (7444)
模块加载：KERNEL32.dll。没有调试信息。基址：00000000766B0000 美元。处理 Project1.exe (7444)
模块加载：KERNELBASE.dll。没有调试信息。基址：$000007FEFD4B0000。处理 Project1.exe (7444)
模块加载：OLEAUT32.dll。没有调试信息。基地址：$000007FEFEFC0000。处理 Project1.exe (7444)
模块加载：ole32.dll。没有调试信息。基址：000007FEFD660000 美元。处理 Project1.exe (7444)
模块加载：msvcrt.dll。没有调试信息。基址：$000007FEFE670000。处理 Project1.exe (7444)
模块加载：GDI32.dll。没有调试信息。基址：000007FEFD870000 美元。处理 Project1.exe (7444)
模块加载：USER32.dll。没有调试信息。基址：0000000076920000 美元。处理 Project1.exe (7444)
模块加载：LPK.dll。没有调试信息。基址：$000007FEFEE10000。处理 Project1.exe (7444)
模块加载：USP10.dll。没有调试信息。基址：$000007FEFEE90000。处理 Project1.exe (7444)
模块加载：RPCRT4.dll。没有调试信息。基地址：$000007FEFE9B0000。处理 Project1.exe (7444)
模块加载：ADVAPI32.dll。没有调试信息。基址：000007FEFEC90000 美元。处理 Project1.exe (7444)
模块加载：SECHOST.dll。没有调试信息。基址：$000007FEFEAE0000。处理 Project1.exe (7444)
模块加载：VERSION.dll。没有调试信息。基址：$000007FEFC300000。处理 Project1.exe (7444)
模块加载：COMCTL32.dll。没有调试信息。基地址：$000007FEFA2B0000。处理 Project1.exe (7444)
模块加载：SHELL32.dll。没有调试信息。基址：$000007FEFD8E0000。处理 Project1.exe (7444)
模块加载：SHLWAPI.dll。没有调试信息。基址：$000007FEFEB00000。处理 Project1.exe (7444)
模块加载：COMDLG32.dll。没有调试信息。基址：$000007FEFD5C0000。处理 Project1.exe (7444)
模块加载：WINSPOOL.DRV。没有调试信息。基本地址：$000007FEF96A0000。处理 Project1.exe (7444)
模块加载：BASS.dll。没有调试信息。基址：0000000180000000 美元。处理 Project1.exe (7444)
模块加载：WINMM.dll。没有调试信息。基本地址：$000007FEFAED0000。处理 Project1.exe (7444)
模块加载：MSACM32.dll。没有调试信息。基地址：$000007FEFAD00000。处理 Project1.exe (7444)

```

[适用于 Win64 (x64) 的低音](http://www.un4seen.com/forum/?topic=9038)

我怎样才能让它工作？有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T12:39:37.723

错误代码 0xc000007b 是 STATUS_INVALID_IMAGE_FORMAT。最常见的原因是加载程序尝试将 32 位 DLL 加载到 64 位进程中。在配置文件模式下使用 Dependency Walker 找出哪个 DLL 有问题。

# python - 如何在 Python3 中包装元素？

> ID：14659003
> 
> 赞同：0
> 
> 时间：2013-02-02T05:40:07.040
> 
> 标签：python, xml, lxml

有一个这样的xml文件：

```
<body>
            <part>verb</part>
            love
            <meaning>
                <num>1.</num>
            </meaning>
             like
</body> 
```

我喜欢在第一个子节点及其主体节点的尾部之后用`<text>...</text>`. 那是，

```
<body>
            <part>verb</part>
            love
            <text>    
                <meaning>
                    <num>1.</num>
                </meaning>
                like
            </text>
</body> 
```

我试过这个，但我不知道下一步。

```
 import lxml.etree as ET
     xml = '''\    <body>
            <part>verb</part>
            love
            <meaning>
                <num>1.</num>
            </meaning>
             like
      </body>'''
      body = ET.fromstring(xml)  
      body.insert(2, text) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:59:05.923

让我们从你得到的地方开始：

```
body = ET.fromstring(xml) 
```

现在我们需要定位元素`meaning`，您可以使用 xPath 或`_Element.find`，或者只使用硬编码索引，在这种情况下，顺便说一句，它是`1`，不是`2`。我在`find`这里使用：

```
meaning = find('meaning') 
```

现在我们制作 a`<text>`并将其添加为 的兄弟`<meaning>`：

```
text = body.makeelement('text')
meaning.addprevious(text) 
```

最后`<meaning>`进入`<text>`：

```
text.append(meaning) 
```

请注意，拖尾文本也会移动，并且`append`实际上会移动节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:10:00.620

```
from xml.etree import ElementTree as etree

xml = """<body>
           <part>verb</part>
           love
                <meaning>
                    <num>1.</num>
                </meaning>
                like
</body>"""

body = etree.fromstring(xml)
rest = body[1:] # all children after the first
del body[1:]
text_el = body.makeelement('text', {})
text_el.extend(rest)
body.append(text_el)
print(etree.tostring(body, encoding=str)) 
```

### 输出

```
<body>
            <part>verb</part>
            love
                <text><meaning>
                    <num>1.</num>
                </meaning>
                like
</text></body> 
```

# javascript - js不断更新滚动事件

> ID：14659004
> 
> 赞同：0
> 
> 时间：2013-02-02T05:40:16.880
> 
> 标签：javascript, jquery, scroll

我可以从下面的问题中询问给出解决方案的详细信息吗？我也有完全一样的问题。

[jQuery 的 css() 应用于滚动事件时滞后](https://stackoverflow.com/questions/11075525/jquerys-css-lags-when-applied-on-scroll-event)

在给出解决方案 #3 ->> 如果您想要连续更新，请在进行更新时跟踪时间戳，如果时间少于一定时间（100 毫秒或其他时间），则在处理程序中不执行任何操作。

我可以有更详细的信息如何做或例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:48:31.927

我会做类似这样的事情：

```
var lastUpdate = new Date().getTime();
$(selector).scroll(function() {
     var now = new Date().getTime();
     if (now - lastUpdate > 100) {
          // update css
          lastUpdate = now;
     }
 }); 
```

这将每 .1 秒更新一次 css（这是我认为您想要的。显然，只需将选择器替换为您将滚动事件绑定到的任何元素，并用您的 .css() 调用替换更新 css 注释！

# google-places-api - Google Places AutocompleteService 按国家/地区过滤

> ID：14659008
> 
> 赞同：19
> 
> 时间：2013-02-02T05:40:39.030
> 
> 标签：google-places-api

我正在设置一个自定义自动完成字段，在其中显示来自 Google 地方信息的位置和来自我的数据库的与搜索查询匹配的事件。出于这个原因，我使用 Google Places Autocomplete Service 来获取查询预测，而不是将 Places Autocomplete 直接插入到我的文本字段中。

问题是我不知道如何使用 AutoComplete 服务按国家/地区过滤 Places Autocomplete 建议。

我试过了：

```
var service = new google.maps.places.AutocompleteService(null, {
        types: ['cities'],
        componentRestrictions: {country: "au"}
    }); 
```

但它仍然显示来自德国和法国的自动完成选项:(

有什么建议么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-09T11:56:53.490

您需要在调用服务时通过限制，而不是在创建服务时。这里：

```
//create service
service = new google.maps.places.AutocompleteService();

//perform request. limit results to Australia
var request = {
    input: 'Brisbane',
    componentRestrictions: {country: 'au'},
};
service.getPlacePredictions(request, callback); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-01T13:45:10.083

[您可以使用AutocompletionRequest](https://developers.google.com/maps/documentation/javascript/3.exp/reference#AutocompletionRequest)指定类型和 componentRestrictions 。这是一个例子 -

```
var service = new google.maps.places.AutocompleteService();

    service.getPlacePredictions({ input: query, types: ['geocode'], 
                                componentRestrictions:{ country: 'us' } },
            function (predictions, status) {
                if (status == google.maps.places.PlacesServiceStatus.OK) {
                    var results = document.getElementById('results');
                    for (var i = 0, prediction; prediction = predictions[i]; i++) {
                        results.innerHTML += '<li>' + prediction.description + '</li>';
                    }
                }
            }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T04:00:32.503

如文档[参考](https://developers.google.com/maps/documentation/javascript/3.exp/reference#AutocompleteService)中所述，Places Library`AutocompleteService`不支持[AutocompleteOptions](https://developers.google.com/maps/documentation/javascript/3.exp/reference#AutocompleteOptions)。如果您认为这是一项有价值的功能，请提交[Places API - 功能请求](https://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-11-20T16:38:37.017

您应该使用此代码。

```
var options = {
    types: ['(cities)'],
    componentRestrictions: {country: ["in"]}
}
//Find From location    
var input= document.getElementById('input_box_city');
var fromAuto = new google.maps.places.Autocomplete(input, options); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-07-31T05:34:51.283

使用此工作代码

```
var input = document.getElementById("query_value");
var autocomplete = new google.maps.places.Autocomplete(input, {
  componentRestrictions: { country: "IN" },
  place_id: "YOUR_PLACE_ID"
});
google.maps.event.addListener(autocomplete, "place_changed", function() {
  var place = autocomplete.getPlace();
});

https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places&language=en&key=YOUR_KEY 
```

# c++ - 温索克；我需要在重新连接之前关闭套接字吗？

> ID：14659009
> 
> 赞同：0
> 
> 时间：2013-02-02T05:40:48.420
> 
> 标签：c++, c, winapi, winsock

我正在使用winsock，并以标准方式打开我的套接字（我正确处理错误，但为了这个问题，我已将代码简化）；

```
SOCKET sSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); 
```

如果我像这样连接它，它可能偶尔会失去连接。

```
connect(sSocket, reinterpret_cast<SOCKADDR*>(&sinAddr), sizeof(sinAddr)); 
```

发生这种情况时，我需要关闭并重新创建套接字，还是应该重新调用 connect() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:28:15.047

一个套接字被`close()`编辑后，就不能再使用了。

或者反过来：只要`close()`没有在套接字上调用，它就可以（重新）使用。

调用`socket()`分配一个套接字描述符给调用进程。套接字描述符存在并一直分配给进程，直到`close()`被调用。

# c# - 在 XELement 中搜索一个值

> ID：14659018
> 
> 赞同：1
> 
> 时间：2013-02-02T05:42:30.073
> 
> 标签：c#, linq, .net-4.0, linq-to-xml, xelement

我有一棵树，`XML`它把它存储在变量中。如何在这个 XML的**所有节点**`XELement`中搜索一个值，如果它存在则返回？**`true`**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T05:52:26.933

试试这个：

```
bool result = element.DescendantsAndSelf().Any(e => e.Value == "cccc"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-22T05:03:44.173

为了搜索一个值，我找不到任何东西，我写了这个：

```
wfo = XElement.Load("some xml");
foreach (var element in wfo.DescendantsAndSelf())
                    {
                            foreach (XAttribute attribute in element.Attributes())
                            {
                                if (attribute.Value.Any(q=>q== "search"))
                                {

                                }
                            }
                        }
                    } 
```

林克：

> var test = wfo.DescendantsAndSelf().Attributes().Any(q => q.Value.Any(z=>z == "search"));**

# microsoft-metro - 地铁应用的唯一标识符

> ID：14659019
> 
> 赞同：0
> 
> 时间：2013-02-02T05:42:37.797
> 
> 标签：microsoft-metro

我需要 Windows Store 应用程序的唯一标识符，我已阅读 [此](https://stackoverflow.com/questions/12893637/how-to-get-device-id-in-windows-8-metro-app)内容，但我需要知道用户是否卸载我的应用程序并从 Windows Store 重新安装它会发生什么，如果我更新我的应用程序并用户重新安装它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:51:48.177

根据[使用应用程序特定硬件 ID 的指南](http://msdn.microsoft.com/en-US/library/windows/apps/jj553431#Using_the_API)：

> [HardwareIdentification.GetPackageSpecificToken](http://msdn.microsoft.com/en-US/library/windows/apps/windows.system.profile.hardwareidentification.getpackagespecifictoken)方法为 Windows 应用商店应用程序提供了一种方法来生成它们正在运行的设备的 ASHWID 。调用此 API 的两个应用程序在同一设备上返回不同的 ASHWID。对于给定的应用程序/包，ASHWID 不受以下因素影响：
> 
> *   操作系统重新安装
> *   一键复位
> *   操作系统 SKU 升级
> *   **应用程序的版本更新**
> *   更改同一设备上的用户

如果您更改包名称（我认为是发布者），您将获得不同的值。

请注意，该值还反映了设备的许多属性（一些可能是暂时的），因此同一应用程序的两次后续执行可能会返回不同的值。

# ios - 委托未接收数据

> ID：14659020
> 
> 赞同：0
> 
> 时间：2013-02-02T05:43:05.213
> 
> 标签：ios, delegates, xcode4.2

我有一个使用故事板的简单设置，其中一个视图控制器（MainViewController）通过委托与另一个（JoinedViewController）对话。在 prepareForSegue 之前一切都很好。在那里，我为接收视图控制器声明了 roomData 和标签的文本，但都没有收到。

主视图控制器.m

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"JoinRoom"]) {
        UINavigationController *navigationController = segue.destinationViewController;
        JoinedViewController *joinedViewController = [[navigationController viewControllers]objectAtIndex:0];
        joinedViewController.label.text = self.roomName;
        joinedViewController.roomData = self.roomData;
        joinedViewController.delegate = self;
    }
} 
```

MainViewController.h 声明：

```
@interface MainViewController : UIViewController <JoinedViewControllerDelegate, UITextFieldDelegate>

@property (weak, nonatomic) IBOutlet UITextField *textField;
@property (nonatomic, copy) NSString *roomName;
@property (nonatomic, weak) S3ListObjectsResult *roomData; 
```

JoinedViewController.h 声明：

```
@interface JoinedViewController : UITableViewController 

@property (nonatomic, weak) id <JoinedViewControllerDelegate> delegate;
@property (nonatomic, weak) S3ListObjectsResult *roomData;
@property (weak, nonatomic) IBOutlet UILabel *label; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:13:46.577

我认为你有两个不同的问题。roomData 应该声明为强，而不是弱（在两个类中）。roomName 的问题不在于字符串本身，而在于您试图在 JoinedViewController 的 viewDidLoad 被调用之前将其设置在标签上。在加载其视图之前，您无法访问另一个控制器的 UI 元素。您应该传递字符串 roomData，并将其设置在 JoinedViewController 的 viewDidAppear 方法中的标签上。

# jquery - 使用 jQuery 1.9 的 MVC 4 项目中的 jquery.validate.js 出错

> ID：14659023
> 
> 赞同：62
> 
> 时间：2013-02-02T05:43:12.410
> 
> 标签：jquery, jquery-validate, unobtrusive-validation

我使用 Visual Studio 2012 中的模板创建了一个新的 ASP.Net MVC 4 项目。升级到 jQuery 1.9 后，登录功能中断。具体来说，我得到了错误

> 0x800a138f - JavaScript 运行时错误：无法获取未定义或空引用的属性“调用”

在 jquery.validate.js 中的第 1172 行第 5 列

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-02T05:43:12.410

此问题已在*jQuery Validation Plugin 1.11.0pre*中得到修复。

~~不幸的是，目前 NuGet 上没有预发布版本，因此目前需要直接从 GitHub 下载 jquery.validation.js：~~

[jQuery.Validation 1.11](https://github.com/jzaefferer/jquery-validation)现在可以通过 NuGet 获得（感谢@Simon_Weaver）。

**更新**

jQuery.Validation 代码库中似乎对 jQuery 1.9 的*一般*支持，但尚未发布

[https://github.com/jzaefferer/jquery-validation/pull/613](https://github.com/jzaefferer/jquery-validation/pull/613)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-08-06T06:05:47.507

如果您安装 jQuery.Migrate 1.1.1，那么它将与 jQuery.Validation 1.11、jQuery 1.9 和 2.x 一起正常工作。

除了这样做之外`install-package jQuery.Migrate`，您还必须将 JavaScript 添加到 BundleConfig.cs - 我在 jQuery 之后添加了它，这就是注册 jQuery 的行现在的样子：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
  "~/Scripts/jquery-{version}.js",           // jQuery itself
  "~/Scripts/jquery-migrate-{version}.js")); // jQuery migrate 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-07-09T20:01:34.973

问题是验证脚本中的代码行

```
$.event.handle.call(this,e); 
```

这里的问题在于`$.event.handle`. 两者都`this`具有`e`正确的值。根据迁移脚本[http://code.jquery.com/jquery-migrate-1.2.0.js](http://code.jquery.com/jquery-migrate-1.2.0.js) ，jQuery 弃用了 $.event.handle 以支持 jQuery.event.dispatch 。

修复这些错误就像简单地将要处理的引用替换为调度一样简单。

这可以包装在 document.ready 回调中，以确保它在其他脚本运行后运行。

```
$(function(){
    jQuery.event.handle = jQuery.event.dispatch
}); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-05-20T14:21:50.780

我有同样的问题，在Firefox中没有问题，但即仍然给出错误。我正在使用 jquery-2.0.0；jQuery 验证插件 1.11.1

我找到了解决方法：替换

```
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

和

```
@section Scripts{
    <script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/bundles/jqueryval")"></script>
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-09T13:07:19.137

用以下行替换捆绑脚本路径对我有用。

```
 <script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/bundles/jqueryval")"></script> 
```

我尝试通过 Nuget 更新 jquery 验证，并将 jquery 更新到 2.0 版本，但这些解决方案都没有奏效。唯一没有下载任何东西就可以正常工作的 Pre version 是 Texellab 提出的解决方案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-31T20:36:29.860

潜在的问题是自 jQuery 1.7 以来已弃用的一些方法（当添加了新的改进方法时）已在 1.9 中删除。jQuery Validate 显然没有更新，因此它使用了新方法。我发现使用 jQuery Migrate 插件将删除的方法重新放入，解决了我的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-19T08:45:56.783

这是另一个解决方案：

我将 MVC 3 与 jQuery 1.71 和 jQuery UI 1.8.20 一起使用。我使用 jQuery UI 选项卡小部件并设置每个选项卡区域以加载包含输入字段的部分页面。

在 Firefox v22 和 Chrome v28 中运行良好，在 IE10 中失败。我得到的错误是'无法获取未定义或空引用的属性'设置''

解决方法是转到部分表单并注释掉以下代码：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>* 
```

它现在可以在所有浏览器中成功运行。

# wpf - 如何自动滚动滚动查看器到特定位置

> ID：14659026
> 
> 赞同：0
> 
> 时间：2013-02-02T05:43:31.797
> 
> 标签：wpf, scrollviewer

我有一个自定义用户控件 ExpanderListUC，它包含一个扩展器列表，每个扩展器都有一个包含标签列表的堆栈面板。

我添加了一个滚动查看器来向上和向下滚动扩展器内容。

在某些情况下，我必须通过后面的代码自动选择扩展器 4 中的标签 4。

如何自动将滚动查看器的位置设置为所选标签？

```
 <ScrollViewer x:Name="sv" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Hidden" HorizontalAlignment="Left" Width="205">
        <StackPanel Name="spContentPresenter" Background="Transparent" HorizontalAlignment="Right" >
            <StackPanel.ContextMenu>
                <ContextMenu x:Name ="ExpanderContextMenu" StaysOpen="true">
                    <MenuItem x:Name="collapseAllMenuItem" Header="Collapse All" Foreground="Black" />
                    <MenuItem x:Name="expandAllMenuItem" Header="Expand All" Foreground="Black"  />
                </ContextMenu>
            </StackPanel.ContextMenu>
            <Expander FlowDirection="LeftToRight" IsEnabled="True" IsExpanded="True"  >
                <!--Background="#FF1F5897"-->
                <Expander.Header>
                    <!--<Run Text="Electrical Information" Foreground="Black"/>-->
                    <TextBlock HorizontalAlignment="Right" Foreground="Black"><Run Text="Expander 1"/></TextBlock>
                </Expander.Header>
                <Grid Margin="0" >
                    <StackPanel Width="200" HorizontalAlignment="Right">
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 1" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 2" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 3" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 4" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 5" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 6" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 7" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 8" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 9" Height="26" />
                        <!--Style="{DynamicResource ClickableLabel}"-->
                    </StackPanel>
                </Grid>
            </Expander>
            <Expander FlowDirection="LeftToRight" IsEnabled="True" IsExpanded="True"  >
                <!--Background="#FF1F5897"-->
                <Expander.Header>
                    <!--<Run Text="Electrical Information" Foreground="Black"/>-->
                    <TextBlock HorizontalAlignment="Right" Foreground="Black"><Run Text="Expander 2"/></TextBlock>
                </Expander.Header>
                <Grid Margin="0" >
                    <StackPanel Width="200" HorizontalAlignment="Right">
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 1" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 2" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 3" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 4" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 5" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 6" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 7" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 8" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 9" Height="26" />
                        <!--Style="{DynamicResource ClickableLabel}"-->
                    </StackPanel>
                </Grid>
            </Expander>
            <Expander FlowDirection="LeftToRight" IsEnabled="True" IsExpanded="True"  >
                <!--Background="#FF1F5897"-->
                <Expander.Header>
                    <!--<Run Text="Electrical Information" Foreground="Black"/>-->
                    <TextBlock HorizontalAlignment="Right" Foreground="Black"><Run Text="Expander 3"/></TextBlock>
                </Expander.Header>
                <Grid Margin="0" >
                    <StackPanel Width="200" HorizontalAlignment="Right">
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 1" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 2" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 3" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 4" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 5" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 6" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 7" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 8" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 9" Height="26" />
                        <!--Style="{DynamicResource ClickableLabel}"-->
                    </StackPanel>
                </Grid>
            </Expander>
            <Expander FlowDirection="LeftToRight" IsEnabled="True" IsExpanded="True"  >
                <!--Background="#FF1F5897"-->
                <Expander.Header>
                    <!--<Run Text="Electrical Information" Foreground="Black"/>-->
                    <TextBlock HorizontalAlignment="Right" Foreground="Black"><Run Text="Expander 4"/></TextBlock>
                </Expander.Header>
                <Grid Margin="0" >
                    <StackPanel Width="200" HorizontalAlignment="Right">
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 1" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 2" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 3" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 4" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 5" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 6" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 7" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 8" Height="26" />
                        <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 9" Height="26" />
                        <!--Style="{DynamicResource ClickableLabel}"-->
                    </StackPanel>
                </Grid>
            </Expander>                
        </StackPanel>
    </ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:19:19.783

我有一个类似的问题。最好的方法是使您的 Expander 成为一个单独的控件并使用 ItemsControl，如下所示：

```
<UserControl x:Class="WpfApplication9.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d"
         d:DesignHeight="423" d:DesignWidth="368">
<Grid Background="White">
    <Expander FlowDirection="LeftToRight" IsEnabled="True" IsExpanded="True"  >
        <!--Background="#FF1F5897"-->
        <Expander.Header>
            <!--<Run Text="Electrical Information" Foreground="Black"/>-->
            <TextBlock HorizontalAlignment="Right" Foreground="Black"><Run Text="Expander 1"/></TextBlock>
        </Expander.Header>
        <Grid Margin="0" >
            <StackPanel Width="200" HorizontalAlignment="Right">
                <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 1" Height="26" />
                <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 2" Height="26" />
                <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 3" Height="26" />
                <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 4" Height="26" />
                <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 5" Height="26" />
                <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 6" Height="26" />
                <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 7" Height="26" />
                <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 8" Height="26" />
                <Label Margin="0,0,10,0"  HorizontalAlignment="Right" Content="Label 9" Height="26" />
                <!--Style="{DynamicResource ClickableLabel}"-->
            </StackPanel>
        </Grid>
    </Expander>
</Grid> 
```

```
 <Grid x:Name="Grid">
    <ScrollViewer x:Name="ScrollViewer" >
        <Grid>
            <ItemsControl x:Name="ItemsControl" ItemsSource="{Binding /*some list*/}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate DataType="/*some type to bind to*/">
                        <my:UserControl1/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid>
    </ScrollViewer>
</Grid>

    void ScrollToIndex(int index) {
        UIElement uiElement = (UIElement) ItemsControl.ItemContainerGenerator.ContainerFromIndex(index);
        if (uiElement != null) {
            double y = uiElement.TranslatePoint(new System.Windows.Point(0, 0), Grid).Y;
            ScrollViewer.ScrollToVerticalOffset(y);
        }
    } 
```

# jquery - submitHandler 不断重新加载页面

> ID：14659028
> 
> 赞同：1
> 
> 时间：2013-02-02T05:43:43.030
> 
> 标签：jquery, jquery-validate

我试图在提交后将表单发送到 php 文件并在不重新加载页面的情况下检索值。它已经工作了一段时间，但现在我无法让它工作。我有多个页面在执行类似的任务，其中 2 个工作得非常好，但其他 3 个没有...

我一遍又一遍地浏览代码，但我找不到问题所在。我还注意到，当我单击提交时，我在表单中输入的值只是进入浏览器的地址栏，页面重新加载，甚至没有进入 php 文件。

这是JS：

```
 <script type="text/javascript">
            $(function(){
                    $("#myform").validate({

                        submitHandler: function(form) {
                            // do other stuff for a valid form
                            $.post('process.php', $("#myform").serialize(), function(data) {
                                $('.results').html(data).show(); // you can chain for efficiency

                            });

                        }
                    });
                });
        </script> 
```

和 HTML 很抱歉的长度：

```
 <form id = 'myform'>
                <fieldset>
                    <legend>College GPA Calculator</legend>
                    <div class = 'btn-container'>
                        <button class = "btn btn-info" type = 'button'id = "add">Add Row </button>
                        <button class = "btn btn-info" type = 'button'id = "remove"> Remove Row</button>
                    </div>
<table>

                        <tr> 
                            <th> Class Name </th> <th> Units </th> <th> GPA </th>
                        </tr>
                        <tr>
                            <td> <input class = 'input-medium'type = 'text' placeholder = "Optional"> </td> 
                            <td> <input class = 'input-small'type = "text" name = "units[]" placeholder = "Units Earned"> </td>
                            <td> 
                                <select class = 'selectpicker' name = "grades[]" >
                                    <option value = "0"> SELECT </option>
                                    <option value = "A"> A </option>
                                    <option value = "AMINUS"> A- </option>
                                    <option value = "BPLUS"> B+ </option>
                                    <option value = "B"> B </option>
                                    <option value = "BMINUS"> B- </option>
                                    <option value = "CPLUS"> C+</option>
                                    <option value = "C"> C </option>
                                    <option value = "CMINUS"> C- </option>
                                    <option value = "DPLUS"> D+ </option>
                                    <option value = "D"> D </option>
                                    <option value = "DMINUS"> D- </option>
                                    <option value = "F"> F</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td> <input class = 'input-medium'type = 'text' placeholder = "Optional"> </td> 
                            <td> <input class = 'input-small'type = "text" name = "units[]" placeholder = "Units Earned"> </td>
                            <td> 
                                <select class = 'selectpicker' name = "grades[]" >
                                        <option value = "0"> SELECT </option>
                                    <option value = "A"> A </option>
                                    <option value = "AMINUS"> A- </option>
                                    <option value = "BPLUS"> B+ </option>
                                    <option value = "B"> B </option>
                                    <option value = "BMINUS"> B- </option>
                                    <option value = "CPLUS"> C+</option>
                                    <option value = "C"> C </option>
                                    <option value = "CMINUS"> C- </option>
                                    <option value = "DPLUS"> D+ </option>
                                    <option value = "D"> D </option>
                                    <option value = "DMINUS"> D- </option>
                                    <option value = "F"> F</option>
                                </select>
                            </td>
                        </tr>

                    </table>
                    <div class = 'bottomCalcResults'>
                        <button type="submit" class="btn btn-primary">Submit</button>
                        <button class = 'btn btn-warning' id = 'reset'type = 'reset'>Reset</button>
                        <div class = 'results'></div>
                    </div>
                </fieldset>
            </form> 
```

这是安装脚本：

```
<link rel = 'stylesheet' type = 'text/css' href = 'assets/css/style.css' media = "screen">
        <link rel= 'stylesheet' type = 'text/css' href = 'assets/css/bootstrap.min.css'>    
        <link rel = 'stylesheet' type = 'text/css' href = 'assets/css/normalize.css'>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />

            <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
        <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
        <script src = "assets/js/dropdown.js"></script>
        <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script> 
```

我不知道发生了什么，但我似乎找不到它！请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T21:06:35.710

您需要在插件的回调函数中添加一个`return false`作为最后一项。`submitHandler`如果您添加后页面仍在重新加载`return false`，则您没有正确添加它。

这是放置的地方`return false;`：

```
$(function () {
    $("#myform").validate({
        submitHandler: function (form) {
            $.post('process.php', $("#myform").serialize(), function (data) {
                $('.results').html(data).show();
            });
            return false; // <- last item inside submitHandler function
        }
    });
}); 
```

**工作演示：http:** [//jsfiddle.net/2QspF/](http://jsfiddle.net/2QspF/)

jsFiddle 演示和您的真实代码之间的唯一区别是该`$.post`函数被注释掉以防止出现 jsFiddle 404 错误，因为我们无权访问您的`process.php`文件。

**旁注**：您还应该能够使用`$(form).serialize()`. `$("#myform").serialize()`见：http: [//jsfiddle.net/L7vLt/](http://jsfiddle.net/L7vLt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:55:32.510

尝试添加

```
return false; 
```

从您的 submitHandler 功能。我*认为*，由于您通过 ajax 发布表单，因此您需要防止发生默认功能

# java - CardLayout 的父容器/面板

> ID：14659033
> 
> 赞同：1
> 
> 时间：2013-02-02T05:44:59.523
> 
> 标签：java, swing, jpanel, layout-manager, cardlayout

如何在`CardLayout`.

也就是说，如果一个面板是另一个“容器”面板中的卡，那么如何从卡中获取对这个“容器”面板的引用？

这就是我正在做的事情：-

```
public class LogInPanel extends javax.swing.JPanel implements ActionListener{

    /**
     * Creates new form Panel2
     */
   private JPanel parentPanel;
   private CardLayout c1=null;
    public LogInPanel() {
        initComponents();
        //c1=new CardLayout();
        parentPanel=(JPanel)(SwingUtilities.getAncestorOfClass(this.getClass(), this));

        c1=(CardLayout)(parentPanel.getLayout());
        submitLogin.addActionListener(this);
    }
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:49:02.933

您可以使用超类提供的方法[getParent](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#getParent%28%29)`Component`。对于作为卡片的面板，只需调用`panel.getParent()`它，它就会为您提供包含（父）面板。

# c++ - C ++中命名空间和类之间的命名约定？

> ID：14659035
> 
> 赞同：3
> 
> 时间：2013-02-02T05:45:27.320
> 
> 标签：c++, namespaces, convention

创建一个名为“snap”的库，我想要一个名为“log”的类，我将它放在一个子命名空间中。如果命名空间也是“日志”可以吗？（我知道它在技术上有效，我想知道正确的命名约定，你会怎么做？）

```
namespace snap
{
  namespace log
  {
    class log {
      ...
      enum log_level_t { ..., LOG_LEVEL_ERROR, ... };
      ...
    };
  }
} 
```

问题是我们最终会得到这样的结果：

```
snap::log::log::log_level_t ll(snap::log::log::LOG_LEVEL_ERROR); 
```

你觉得这很奇怪吗？（即双::log::log）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T05:59:16.583

我不知道你为什么在类中定义了枚举。如果你有一个专门用于日志的命名空间，那么在命名空间中定义所有与日志相关的东西。所以我更喜欢这个：

```
namespace snap
{
  namespace log
  {
     enum log_level_t { ..., LOG_LEVEL_ERROR, ... };
     class log { };
  }
} 
```

此外，由于命名空间`log`本身暗示了其中定义的内容，与日志记录相关（或应该与日志记录相关），我觉得其中的部分`log`似乎`log_level_t`是重复的。我会将上述内容进一步重构为：

```
namespace snap
{
  namespace logging //renamed
  {
     enum class level_t{verbose, info, error, ... }; //renamed, and used enum class!

     class logger { ... }; //renamed
  }
} 
```

或者，也许，我会选择名称`severity`而不是`level_t`. 无论如何，在我看来，用法变得更好了：

```
logger.write(snap::logging::severity::error, message, etc); 
```

或者你可以写一些友好的函数，这样你就可以这样写：

```
logger.verbose(message, etc);
logger.info(message, etc);
logger.error(message, etc);
//etc 
```

希望有帮助。

# spring - 如何在spring中将变量从视图传递到控制器方法

> ID：14659036
> 
> 赞同：0
> 
> 时间：2013-02-02T05:45:33.890
> 
> 标签：spring, logging, aop

我正在尝试使用 AOP 在 spring 中记录运行时数据。我能够记录静态消息。但我的问题是我必须记录用户（例如名称）给出的输入值，如果用户在表单中输入“siva”作为用户名，我的日志消息应该是“Siva 已登录”。

我有一个带有用于获取用户名的文本框的 jsp 表单、具有用于用户名的 setter 和 getter 的 bean 类、一个控制器类和一个方面类。

我的控制器类是：

```
@RequestMapping("/login.htm")

public ModelAndView success(String name){

} 
```

我的方面类是：

```
 @After("execution(* com.controller.MyController.success(String))&&args(name)")

public void After(){

    System.out.println("after method");
} 
```

我不确定如何在控制器方法中获取用户名。我完全瞎了。我搜索并尝试了很多可能性，但没有任何结果。任何帮助表示赞赏....在此先感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:30:35.633

要在控制器方法中获取用户名参数，您只需使用 @RequestParam 注释“名称”参数。例如：

```
@RequestMapping("/login.htm")

public ModelAndView success(@RequestParam("name") String name){

} 
```

要在您的 after 建议中获取名称，只需将 after 方法的签名更改为接受“name”字符串：

```
@After("execution(* com.controller.MyController.success(String))&&args(name)")

public void after(String name){
    logger.info("User "+name+" has logged in!");
} 
```

希望它能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:57:03.827

```
//your Aspect class
@Aspect
@Component
public class MyAspect {

    @Pointcut("execution(* com.controller.MyController.success(..)) && args(username)")
    public void controllerExecution(String username){};

    @After("controllerExecution(username)")
    public void afterControllerExecution(final String username){
         System.out.println("username is : " + username);
    }
}

//the method in your controller
@RequestMapping(value="/success")
public String success(String username){
    return "home";
} 
```

请求 url 应该是这样的：www.XXX.com/success?username=Johnny @Piyush Joshi，在这种情况下，您**不必**使用 @RequestParam 来获得 AOP 工作。

# android - 在android中实现主菜单链接

> ID：14659041
> 
> 赞同：2
> 
> 时间：2013-02-02T05:46:01.943
> 
> 标签：android, menu, android-activity

我正在开发一个多语言的 Android 应用程序。在这里，我使用古吉拉特语和印地语等区域语言的字体。现在我想在除主菜单页面之外的每个页面上添加一个主菜单链接。我了解到 FLAG_ACTIVITY_CLEAR_TOP 用于清除活动堆栈，因此不会将主要活动置于顶部。[这里。](https://stackoverflow.com/questions/4248673/returning-to-main-menu-in-android-by-a-button-click)

但是当我这样做时，它会再次启动主菜单活动，重置用户所做的语言选择。因此语言被重置为默认值（在这种情况下为英语）。

我希望通过杀死主要活动顶部的其他活动来将主菜单活动置于最前面。

我正在使用以下代码进行导航：

```
Intent i=new Intent(this,MainActivity1.class);
    i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    finish(); 
```

任何帮助都是不言而喻的。

# c# - 如何在单击按钮时动态更改组框？

> ID：14659047
> 
> 赞同：3
> 
> 时间：2013-02-02T05:46:42.317
> 
> 标签：c#, winforms, groupbox

我正在 Visual Studio 2012 (c#/Winforms) 上创建一个应用程序。图像描绘了我的确切想法：![在此处输入图像描述](../Images/2072649d9db84aa16a10054494b4032e.png)

单击 Button1 时，组框中的内容将发生变化，与按钮 2 和 3 相同。

我目前正在使用以下内容：

```
private void button2_Click(object sender, EventArgs e)
{
    this.Controls.Remove(this.groupBox1);
    this.Controls.Add(this.groupBox2);
} 
```

我的问题是：

a）通过使用它，运行时性能是否会受到阻碍，因为所有控件都将同时处于活动状态（尽管隐藏）？

b）考虑我继续使用当前方法，我可以创建一个新的工作区并在不同的窗口中构建每个组框吗？

c) 我目前的方法有解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T06:03:59.703

更好的是：

```
private void button2_Click(object sender, EventArgs e)
{
    groupbox2.Visible = true;
    groupbox1.Visible = !groupbox2.Visible;
} 
```

同样地

```
private void button1_Click(object sender, EventArgs e)
{
    groupbox1.Visible = true;
    groupbox2.Visible = !groupbox1.Visible;
    groupbox3..... = !groupbox1.Visible; //etc
} 
```

这将提高性能，并且添加和删除控件可能会对复杂的 gui 产生副作用，其中控件无法正确定位。

回答你：

a) 不多，但正如我所说，最好切换可见性。

b) 什么是工作空间？当然，您可以从任何窗口或表单中推进您的方法。但是，如果您将一种形式的组合框添加到另一种形式，则第一种形式的组合框将被删除。

c) 我的回答..

# joomla2.5 - Joomla - 在没有模块的模板中构建时将功能指定给主页

> ID：14659050
> 
> 赞同：0
> 
> 时间：2013-02-02T05:46:58.800
> 
> 标签：joomla2.5

我正在建立一个顶部有滑块的网站。它出现在所有页面上，并直接构建在模板中（无模块/组件）。我怎样才能将它限制在主页上？

[http://www.joomla24.com/remository/Download/Templates_for_Joomla_3.x/1%29_General_Joomla_3.x_Templates/DD-Medicine_RX.html](http://www.joomla24.com/remository/Download/Templates_for_Joomla_3.x/1%29_General_Joomla_3.x_Templates/DD-Medicine_RX.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:28:15.310

对于确定的方法，请参阅[http://docs.joomla.org/How_to_determine_if_the_user_is_viewing_the_front_page](http://docs.joomla.org/How_to_determine_if_the_user_is_viewing_the_front_page)

我一般在模板的顶部设置一个变量，像这样：

```
$home_page = $menu->getActive() == $menu->getDefault(); 
```

然后我可以在我喜欢的页面上的任何位置使用该变量：

```
if ($home_page) {
  echo 'Home page only';
} else {
  echo 'Not the home page';
} 
```

# c - C中的strcat函数苦苦挣扎

> ID：14659051
> 
> 赞同：-4
> 
> 时间：2013-02-02T05:46:59.180
> 
> 标签：c, pointers, char, strcat

我现在对我的程序感到非常沮丧。我希望 strcat 函数只是将所需的字符串连接在一起，但显然 strcat 函数（未注释时）没有正确连接，并且以某种方式改变了我的变量的值。照原样，如果打印正确的结果，例如：

```
/usr/local/sbin
/usr/local/sbin
/usr/local/bin
/usr/local/bin
/usr/sbin
/usr/sbin
... (etc) 
```

但是当这两行没有注释时

```
//strcat(file_loc, slash);
//strcat(file_loc, temp); 
```

那么这是我得到的奇怪结果：

```
/usr/local/sbin
/usr/local/sbin/ls
ls
ls/ls
/usr/sbin
/usr/sbin/ls
... (etc) 
```

这是我正在处理的功能。帮助将不胜感激。

```
void step_four (void) {
    int n=0;
    int has_slash=0;
    const char * slash="/";
    char * aa;
    char bb[64];
    int cc=0;
    int len;
    char * file_loc = malloc(100);
    char * temp= malloc(100);
    char * temp2 = malloc(100);
    //char [] f="FOO";

    printf("XXXXXXXXXXXXXXXXXXXXXXXX\n");
    printf("Made it to step 4\n");
    printf("First word of command is: %s\n", words[0]);

    aa = words[0];
    len = strlen(aa);

    while (cc < len) {
        bb[cc] = *(aa + cc);
        cc++;
    }

    while(n < len) {
        if (bb[n++] == '/') {
            //printf("HELLO !!\n");
            has_slash=1;
            break;
        }
    }

    //printf("has_slash=%d\n", has_slash);

    n=0;

    while (paths[n] != NULL) {
        //printf("%s\n", paths[n]);
        file_loc = paths[n];
        //file_loc[strlen(file_loc)]='\0';
        temp = words[0];
        if (has_slash) {
            //do stuff for slash

        }
        else {  
            printf("%s\n", file_loc);
            //strcat(temp2, "a");
            //strcat(file_loc, slash);
            //strcat(file_loc, temp);
            //file_loc[strlen(file_loc)]='/';
            //file_loc[strlen(file_loc) + 1]='/0';
            printf("%s\n", file_loc);
        //  f = file_loc;

        }
        n++;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:54:32.667

[http://www.cplusplus.com/reference/cstring/strcat/](http://www.cplusplus.com/reference/cstring/strcat/)

`char * strcat ( char * destination, const char * source );`

"将源字符串的副本附加到**目标**字符串。目标中的**终止****空**字符被源的第一个字符**覆盖**，并且**空字符**包含在由两者连接形成**的新字符串的末尾**。”

 ******以上引用来自cplusplus。******

# java - Java Plug-In 发布更改以响应最近的安全漏洞

> ID：14659057
> 
> 赞同：3
> 
> 时间：2013-02-02T05:47:19.690
> 
> 标签：java, security, applet, jvm, java-web-start

针对最近的安全漏洞，Oracle 如何改变用户的 Java 插件启动体验？

## 细节

*   SO的[JRE 1.7 漏洞](https://stackoverflow.com/q/12169902/418556)问答。
*   [针对 CVE-2013-0422 的 Oracle 安全警报](http://www.oracle.com/technetwork/topics/security/alert-cve-2013-0422-1896849.html)
*   [禁用 Java 警告外观和对 Java Web Start 应用程序的影响](https://stackoverflow.com/q/14487698/418556)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T05:47:19.690

## 简短的回答

现在，在加载之前会提示所有受信任或沙盒的小程序（要求用户许可）。

## 长答案

在这里，我正在使用 Oracle 自己的[Test Java](http://java.com/en/download/help/testvm.xml)小程序进行测试。之所以选择它，是因为它相对较小、沙盒，并且由我们正在测试的同一 JRE/插件的制造商提供。

今天早上，我有机会将 Java 1.7.0_11 升级到 1.7.0_13。

虽然安全漏洞在 1.7.0_11 中已修复，但 FF 和 Chrome 仍显示警告，如[已禁用 Java 警告外观和影响 Java Web Start 应用程序](https://stackoverflow.com/q/14487698/418556)中所示。

### 火狐

随着 1.7.0_13 的推出，事情似乎又发生了变化。现在，浏览器（本身）不再警告用户，而是出现这样的 JRE 警告：

![沙盒小程序提示](../Images/2ef3783590f9d53e3254b02b42c7b751.png)

选择`Run`查看：

![Java 正在工作](../Images/252a3739ec1e15cf0605561f57dc000f.png)

`Do not show this again for this app`附带说明：左下角的那条信息在过去几乎没有影响。现在在这种情况下，它似乎可以在关闭和重新启动的浏览器以及不同的浏览器之间工作。欢呼！

所以建议你的用户“检查一下”..

![不再为此应用显示此内容](../Images/1e610595a775a28c1242c25ab6b07b90.png)

### IE浏览器

拥有类似 FF 的体验，但忽略了其他浏览器中永久允许的权限。

### 铬合金

Chrome 似乎仍在显示它对 1.7.0_11 所做的初始警告。

![](../Images/439752941a76dcc029acb8afdfdad6b9.png)

然后*，一旦获得批准，*就会转到 FF 所见的 Oracle/Plug-In 提示。

# php - 使用 PHP 放置块引号

> ID：14659058
> 
> 赞同：0
> 
> 时间：2013-02-02T05:47:20.990
> 
> 标签：php, wordpress

我想修改我的 wordpress 主题中的 single.php 文件，以专门将我在帖子中所做的任何块引用放在同一位置（在主要内容之外）

```
 <tr><td>
            <h1><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h1>         
    <div class="author"><?php echo ' - Listed by ';the_author_meta( 'nickname', $userID ); ?></div>
            </td></tr>
            <tr><td>

            </td></tr> 
```

*例如，我希望它位于第二个表格单元格中。

我显然不知道php，所以任何帮助都会很棒。谢谢。

编辑 - 这是页面当前外观的示例。[http://listble.com/?p=296](http://listble.com/?p=296)您可以在表格下方看到包含标题、作者和特征图像的引用（写入 php 而不是帖子）。基本上我希望 Blockquotes 自动放入作者和标题下方的单元格中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T04:16:19.690

根据您的链接[http://listble.com/?p=296](http://listble.com/?p=296)，我认为不可能仅`blockquote`在`<td></td>`. 因为您正在使用`the_content()`函数获取相关内容，并且此函数返回所有插入的数据而不是数据块。

但是使用 CSS 我做了一个小技巧，将以下 CSS 代码放入`blockquote`，

```
float: right;
top: -30px; 
```

![在此处输入图像描述](../Images/b44fc3a2ce1875546f78d375feea3382.png)

# c# - System.Security.SecurityException：请求失败

> ID：14659062
> 
> 赞同：0
> 
> 时间：2013-02-02T05:47:57.593
> 
> 标签：c#, sql-server

您好我尝试使用 CLR 集成从 sql server 访问外部 exe。

我设置了我的数据库`TRUSTWORTHY ON`，`PERMISSION_SET = EXTERNAL_ACCESS`但出现以下错误

```
Msg 6522, Level 16, State 1, Procedure hello, Line 0
A .NET Framework error occurred during execution of user defined routine or aggregate 'hello': 
System.Security.SecurityException: Request failed.
System.Security.SecurityException: 
   at HelloWorldProc.HelloWorld() 
```

helloworld.cs 代码：

```
using System;
using System.Data;
using Microsoft.SqlServer.Server;
using System.Data.SqlTypes;
using System.Diagnostics;

public class HelloWorldProc
{
    [Microsoft.SqlServer.Server.SqlProcedure]
    public static void HelloWorld()
    {
        SqlContext.Pipe.Send("Hello world!\n");
        Process.Start(@"D:\Raja\trg.exe");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:46:35.547

我得到了这个错误的解决方案，我们想**在管理员中设置 SQL Server 服务登录**。

**控制面板 -> 管理工具 -> 服务**

**查找 MSSQLServer 服务将其登录身份从本地系统更改为管理员。**

现在我可以通过 SQL Server 过程打开 word doc。

# excel - 如何使用 testNG dataprovider 遍历 excel 表以获取多组数据？

> ID：14659066
> 
> 赞同：2
> 
> 时间：2013-02-02T05:48:44.530
> 
> 标签：excel, testng, hybrid, testng-dataprovider

我已经与 TestNg 合作了一段时间，但我有一个我似乎无法弄清楚的新要求。

我有一个 excel 文件（sample.xls），工作表名称=数据集，它具有以下内容：

测试数据1 ex1 ex2 ex3 ex4

```
 1   2    3 4 testdata1 
```

测试数据2 ex1 ex2 ex3 ex4

```
 5   6    7  8  testdata2 
```

我的脚本与此类似：

```
import com.thoughtworks.selenium.*;

import org.junit.AfterClass;
import org.openqa.selenium.server.SeleniumServer;
import org.testng.annotations.*;

import java.io.File;
import jxl.*; 

public class DataProviderExample extends SeleneseTestCase{

    @DataProvider(name = "DP1")
    public Object[][] createData1() throws Exception{
        Object[][] retObjArr=getTableArray("test\\Resources\\Data\\sample.xls",
                "DataPool", "testdata1");
        return(retObjArr);
    }

    @Test (dataProvider = "DP1")
    public void testDataProviderExample(String ex1, 
            String ex2, String ex3, String ex4) throws Exception {    
       ///Extensive coding here but for simplicity I will just print 
            System.out.println(ex1);
            System.out.println(ex2);
            System.out.println(ex3);
            System.out.println(ex\4);
    }

    @AfterClass
    public void tearDown(){
        selenium.close();
        selenium.stop();
    } 

    public String[][] getTableArray(String xlFilePath, String sheetName, String tableName) throws Exception{
        String[][] tabArray=null;

            Workbook workbook = Workbook.getWorkbook(new File(xlFilePath));
            Sheet sheet = workbook.getSheet(sheetName); 
            int startRow,startCol, endRow, endCol,ci,cj;
            Cell tableStart=sheet.findCell(tableName);
            startRow=tableStart.getRow();
            startCol=tableStart.getColumn();

            Cell tableEnd= sheet.findCell(tableName, startCol+1,startRow+1, 100, 64000,  false);                

            endRow=tableEnd.getRow();
            endCol=tableEnd.getColumn();
            System.out.println("startRow="+startRow+", endRow="+endRow+", " +
                    "startCol="+startCol+", endCol="+endCol);
            tabArray=new String[endRow-startRow-1][endCol-startCol-1];
            ci=0;

            for (int i=startRow+1;i<endRow;i++,ci++){
                cj=0;
                for (int j=startCol+1;j<endCol;j++,cj++){
                    tabArray[ci][cj]=sheet.getCell(j,i).getContents();
                }
            }

        return(tabArray);
    }

}//end of class 
```

我的问题是：我应该如何修改这个脚本，以便我的脚本通过 excel 表中的两组数据。现在脚本会遍历第一组数据（testdata1 中的单元格）。我也想通过testdata2。我正在寻找的结果是：

1 2 3 4

5 6 7 8

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T13:25:30.587

脚本中没有可修改的内容。如图所示更改您的 excel 测试数据。

![在此处输入图像描述](../Images/2170d78f358e2d345b04c9a131eefbb1.png)

# c# - 如何在 C# 中解决我的循环依赖关系？

> ID：14659069
> 
> 赞同：0
> 
> 时间：2013-02-02T05:49:07.243
> 
> 标签：c#, asp.net-mvc-3, dependencies

我在 Asp.Net MVC 3 中有两个项目。我的第一个项目（p1）有一个控制器和操作视图。我必须在我的第二个（p2）项目中使用 mvc 中的 Aciton FilterProviders 过滤它。

而且我还需要可以过滤我的动作的类。我已经实现了这一点。但现在我需要我需要 p2 对项目 p1 的具体响应。因此，根据此响应，我必须显示视图。

所以我的依赖变成了

p2->p1 ( p2 使用来自 p1 的动作过滤器) p1->p2 ( p1 使用来自 p2 的响应)

我该如何解决这个问题？请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:10:27.253

在严格的层架构中，在您的情况下，低级别的层只能从更高层获取服务，如果`p1`使用`p2`则 p2 必须使用`p3`或它上面的其他服务层......

> p3->p2->p1

也可以看看

[如何在严格分层的架构中拆分层并促进模块化而不造成不必要的冗余？](https://stackoverflow.com/questions/9182034/how-to-break-apart-layers-in-a-strict-layered-architecture-and-promote-modularit)

[http://en.wikipedia.org/wiki/Common_layers_in_an_information_system_logical_architecture](http://en.wikipedia.org/wiki/Common_layers_in_an_information_system_logical_architecture)

# java - 如何在小数点后只显示两位数

> ID：14659072
> 
> 赞同：3
> 
> 时间：2013-02-02T05:49:46.343
> 
> 标签：java, android

我**只想在小数点后显示两位数**，我已经尝试过，但我仍然在小数点后*得到很多数字*：

```
itemamount = Double.parseDouble(text_cost_code.getText().toString());
txt_total.setText(new DecimalFormat("##.##").format(itemamount));

edit_qty_code.addTextChangedListener(new TextWatcher() {

public void onTextChanged(CharSequence s, int start, int before,
        int count) {
// TODO Auto-generated method stub
if (!edit_qty_code.getText().toString().equals("")
|| !edit_qty_code.getText().toString().equals("")) {
itemquantity = Double.parseDouble(edit_qty_code.getText().toString());
itemamount = Double.parseDouble(text_cost_code.getText().toString());
txt_total.setText(new DecimalFormat("##.##").format (itemquantity * itemamount));
} else { txt_total.setText("0.00");}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T06:02:55.477

我不确定您要在代码中的哪个位置执行此操作，但是

```
String.format("%.2f", value); 
```

应该管用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T06:50:17.663

Rakesh 使用此链接：

[只显示小数点后两位](https://stackoverflow.com/questions/10959424/show-only-two-digit-after-decimal)

```
 i=348842.
  double i2=i/60000;
  DecimalFormat dtime = new DecimalFormat("#.##"); 
  i2= Double.valueOf(dtime.format(time));
  v.setText(String.valueOf(i2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T06:37:55.660

试试这个，它可能对你有帮助。

```
float localresult =Float.parseFloat(itemquantity*itemamount);
BigDecimal bd = new BigDecimal(Double.toString(localresult));
bd = bd.setScale(2,BigDecimal.ROUND_HALF_UP);
bd.doubleValue(); 
```

然后将其设置为 textview ， textview.setText(""+bd.doubleValue();)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-25T23:15:11.680

好吧，如果十进制数的值是动态的，如果不是，那么这就是解决方案。（此解决方案适用于未知动态值或已知值）

```
 try {
        Double rounded= new BigDecimal(Double.parseDouble(getdecimalvalue())).setScale(2, RoundingMode.HALF_UP).doubleValue();
        textviewid.setText (String.valueOf(rounded) );

    }
    catch (Exception e){
        textviewid.setText (getdecimalvalue());
    } 
```

对于最多 2 个小数，我将 setScale 第一个参数设为 2。假设 getdecimalvalue() 返回一个字符串。

对于动态假设，如果值为“12.5”，那么这将引发异常并在 catch 中直接显示该值，因为该值仅在点后最多 1 个小数位。

# virtual - Gradle 上的“元神器”

> ID：14659082
> 
> 赞同：0
> 
> 时间：2013-02-02T05:50:59.197
> 
> 标签：virtual, gradle, meta, artifact

我有一个项目，它使用 Gradle 将两个工件发布到 Maven 存储库。

我想发布第三个“空”工件，它可以用作其他两个的元/虚拟包，以便任何其他项目可以仅引用元工件作为依赖项并获得两个真正的依赖项。

这可能吗？我在文档中找不到与我需要的类似的东西。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:56:41.063

Gradle 目前不支持 Maven BOM。您也许可以发布一个，但从 Gradle 使用它不会产生预期的效果。

# jpa - 如何使用 JPA 将数据库中的单个字段添加到同一实体中新表中的两个不同列

> ID：14659083
> 
> 赞同：0
> 
> 时间：2013-02-02T05:51:05.507
> 
> 标签：jpa, collections

我想创建一个如下表：

```
 BLOCK_USER
    ************
    ID 
    USER_ID, (ID for a single user how want to block other users below)
    USER_ID, (A collection of IDS of users how are going to bee blocked by user above) 
```

这意味着用户 A 阻止使用 B 和 C 和.......

可以这样做：

```
@Entity
@Table(name = "BLOCK_USERS")
public class BlockUsers
{

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "ID")
private int id;

@OneToMany(cascade=CascadeType.ALL)
@JoinColumn(name="USER_ID")
private User wantToStop_id;

@OneToMany(cascade=CascadeType.ALL)
@JoinColumn(name="USER_ID")
private Collection<User> thoseUsers_ids;

   //getters and setters

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:57:53.307

您只需要在“Blockee”列中有一个值，并且每次 A 阻止某人时创建一个新行。所以：

```
| ID  |  BlockerID   |   BlockedID  |
|  1  |     5        |       6      |
|  2  |     5        |       7      |
|  3  |     5        |       8      |
|  4  |     5        |      10      |
|  5  |     9        |       5      | 
```

所以 5 挡住了 6, 7, 8, 10 和 9 挡住了 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:37:36.870

解决了

```
 @Entity
 @Table(name="BLOCKEE")
 @XmlRootElement
 @XmlAccessorType(XmlAccessType.FIELD) 
 public class Blockee
 {
@Id
@Column(name = "BLOCKEE_ID", unique = true, nullable = false)
@GeneratedValue(strategy=GenerationType.AUTO)
@XmlElement
private int blockee_id;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "BLOCKER_ID")
@XmlElement
private User blocker_id;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "BLOCKED_ID")
@XmlElement
private User blocked_id;

// Constructors

/** default constructor */
public Blockee() {
}

/** minimal constructor */
public Blockee(int id) {
    this.blockee_id = id;
}

/** full constructor */
public Blockee(int id, User blockee, User userByBlockerId) {
    this.blockee_id = id;
    this.blocker_id = blockee;
    this.blocked_id = userByBlockerId;
}

public int getBlockee_id()
{
    return blockee_id;
}

public void setBlockee_id(int blockee_id)
{
    this.blockee_id = blockee_id;
}

public User getBlocker_id()
{
    return blocker_id;
}

public void setBlocker_id(User blocker_id)
{
    this.blocker_id = blocker_id;
}

public User getBlocked_id()
{
    return blocked_id;
}

public void setBlocked_id(User blocked_id)
{
    this.blocked_id = blocked_id;
}

@Override
public int hashCode()
{
    HashCodeBuilder builder = new HashCodeBuilder();
    builder.append(getBlockee_id());
    builder.append(getBlocked_id());
    builder.append(getBlocker_id());
    return builder.toHashCode();
}

@Override
public boolean equals(Object obj)
{
    if (obj instanceof User)
    {
        Blockee other = (Blockee) obj;
        EqualsBuilder builder = new EqualsBuilder();
        builder.append(getBlockee_id(),other.blockee_id);
        builder.append(getBlocker_id(),other.blocker_id);
        builder.append(getBlocked_id(),other.blocked_id);

        return builder.isEquals();
    }
    return false;
}

@Override
public String toString()
{
    return new ToStringCreator(this)
    .append("BLOCKEE_ID ", this.getBlockee_id())
    .append("BLOCKER_ID", this.getBlocker_id())
    .append("BLOCKED_ID ", this.getBlocked_id())

            .toString();
} 
```

}

# iphone - SQLite 或 Core Data 用于只有查询的大型数据库

> ID：14659085
> 
> 赞同：5
> 
> 时间：2013-02-02T05:51:15.990
> 
> 标签：iphone, ios, cocoa-touch, sqlite, core-data

基本上，我正在编写一个 iOS 应用程序，它使用一个根本不会被编辑的巨大数据库。在这两者之间，我正在寻找更快的查询速度。在我的开发生涯中，我从未使用过任何 SQLite 或 Core Data，所以在我开始写任何东西之前，我想找出其中哪些（或任何替代方案）更适合我的任务。

任何性能数据或建议将不胜感激。

**编辑：** SQLite 和 Core Data 都无法提供我需要的性能（尽管 SQLite 性能更好）。我决定使用 SQLite（使用 FMDB）并使用多线程来消除多次查询时出现的卡顿。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T06:07:41.373

这取决于你想如何管理你的数据，如果你想要一个关系数据库，使用 sqlite，如果你想将模型对象（在模型-视图-控制器设计模式的意义上）保存到文件中并再次取回它们，使用核心数据。

据我说，对于大型数据库来说，两者都是相同的，在 sqlite 中，您可以使用事务来更快地获取大量数据。

[此](http://www.cocoawithlove.com/2010/02/differences-between-core-data-and.html)链接可能会更好地帮助您。

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T06:11:03.043

对我来说，我会尽可能地使用核心数据。因为它易于使用和管理。有关更多信息，您可以查看这些链接

1.  [核心数据与 SQLite 3](https://stackoverflow.com/a/524301/468724)
2.  [在 iPhone 上使用 CoreData 或 SQLite](https://stackoverflow.com/a/1319241/468724)

这是 Ray Wenderlich 关于核心数据的好教程

1.  [iOS 5 核心数据教程：入门](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)
2.  [核心数据教程：如何预加载/导入现有数据](http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T06:06:30.297

如果你关心的是性能，Core Data 很好，可以有效地优化内存。尽管请查看此页面，这些页面可以帮助您[高效存储](https://stackoverflow.com/questions/7027040/efficient-storage-of-large-amounts-of-data-in-ios)和[关注 CoreData 与 SqlLite](https://stackoverflow.com/questions/13887821/sqlite-vs-core-data-where-do-i-begin)。希望这能有所帮助。

# php - 在while查询中嵌套一个mysql查询？

> ID：14659090
> 
> 赞同：0
> 
> 时间：2013-02-02T05:51:51.153
> 
> 标签：php, mysql

我试图通过匹配他们的模型从我的产品表中提取有关库存项目的其他信息。

我想从这个while循环中的products表中运行另一个查询，其中model=$model。从那里我想得到像价格这样的变量来显示在我的`$inventory_list`

```
$sql = mysql_query("SELECT * FROM inventory order by model");
    // get all the product details
    while($row = mysql_fetch_array($sql)){ 
         $model = $row["model"];
         $serial = $row["serial"];
         $inventory_list .= "$model $serial <br />";
         } 
```

如果我需要跟踪连续剧，是否需要使用另一个表进行库存？任何和所有的帮助表示赞赏！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:53:31.690

您需要将`JOIN`和`inventory`表`products`放在一起，以便通过单个查询获得相同的结果，从而减少网络开销。

它应该看起来像这样：

```
SELECT `inventory`.*, `products`.`price`
FROM `inventory`
LEFT JOIN `products` ON `inventory`.`model` = `product`.`model`
ORDER BY `inventory`.`model`; 
```

**加入参考**：[http ://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T05:54:53.580

更改您的查询以连接两个表并返回数据，这样您就不必在 while 循环中调用另一个查询，从而提高性能并减少对数据库的调用

前任：

```
SELECT i.* , p.price
FROM inventory i
JOIN products p on i.model = p.model
order by i.model 
```

# iphone - Xcode 4.6 错误 - 等待应用程序启动超时

> ID：14659094
> 
> 赞同：17
> 
> 时间：2013-02-02T05:52:07.510
> 
> 标签：iphone, ios, xcode, error-handling, timeout

我正在 Release 中构建一个应用程序，并在 iPhone 4s 上运行。

当我点击运行时，一切正常，我的应用程序甚至可以在 iPhone 上运行。

但过了一段时间，我收到了来自 Xcode 的错误：“等待应用程序启动超时”，而我的应用程序仍在运行。

如何处理？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-02T15:51:51.320

检查您正在使用哪个配置，似乎临时配置不能用于调试。如果您的问题无法通过上述说明解决，请尝试以下操作：

```
 Stop the app from running in Xcode;
     Delete the app from the device (or Simulator);
     Select Product > Clean from the Xcode menu;
     Close Xcode;
     Close the Simulator (or restart the device);
     Restart your computer & then check. 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-31T06:37:09.327

检查您正在使用的配置。确保您使用配置文件在设备上测试应用程序。如果您使用的是分发配置文件，那么您将遇到此问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T20:11:06.013

当我在断点处停止或在某些崩溃期间重新启动应用程序时，就会发生这种情况。如果您在重新启动应用程序（崩溃或处于断点处）之前终止应用程序（通过按停止按钮或`Ctrl`+ `.`），这种情况不会经常发生。否则，您应该能够通过以下方式解决此问题：

停止应用
程序从您的设备中删除应用程序
关闭设备（完全关闭）
然后重新启动它

您不必重置您的实际计算机，甚至不必进行手动清理。至少这对我有用十多次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-26T12:10:45.497

如果您使用分发配置文件在 iDevice 上部署应用程序，可能会发生这种情况，尝试将配置文件更改为开发人员配置文件，它将再次正常运行

# javascript - 检查Javascript中的文本框是否为空

> ID：14659098
> 
> 赞同：18
> 
> 时间：2013-02-02T05:53:27.893
> 
> 标签：javascript, html

这是我的代码，`alert`如果文本框为空，它应该会引发一条消息：

```
function a(id)
{
    var n=document.getElementById(id).value;
    if (n.length < 1)
    {
        window.alert("Field is blank");
        return false;
    }
} 
```

我得到的错误是该字段`onChange`第一次没有得到验证。但是当文本框填充了一些数据并被删除时，现在会`OnChange`触发并`alert`显示消息。我该如何修复这个错误？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-02T06:22:49.057

`onchange`只有当文本框的值与之前的值相比发生变化时才会起作用，所以第一次它不起作用，因为状态没有改变。

所以最好使用`onblur`事件或提交表单。

```
function checkTextField(field) {
  document.getElementById("error").innerText =
    (field.value === "") ? "Field is empty." : "Field is filled.";
}
```

```
<input type="text" onblur="checkTextField(this);" />
<p id="error"></p>
```

[（或旧的现场演示。）](http://jsfiddle.net/Un22w/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T06:12:57.843

假设您要提交表单，您的验证应该在您的活动之前进行。

无论如何，如果您希望在 onchange 上进行此操作，那么这里是代码。

```
function valid(id)
{
    var textVal=document.getElementById(id).value;
    if (!textVal.match(/\S/)) 
    {
        alert("Field is blank");
        return false;
    } 
    else 
    {
        return true;
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-10T12:35:17.610

```
function valid(id)
    {
        var textVal=document.getElementById(id).value;
        if (!textVal.match("Tryit") 
        {
            alert("Field says Tryit");
            return false;
        } 
        else 
        {
            return true;
        }
     } 
```

用它来表达事物

# javascript - 使用单页应用程序的 javascript 将文件上传到 Dropbox？

> ID：14659104
> 
> 赞同：5
> 
> 时间：2013-02-02T05:54:30.190
> 
> 标签：javascript, api, dropbox

我创建了一个本地单页应用程序（嵌入 javascript 的网页可以使用 Chrome 浏览器在本地打开），我希望能够从我的 Dropbox 帐户上传和下载文件。我一直在寻找使用 javascript 执行此操作的解决方案，但是，我走到了死胡同。有一个 javascript Dropbox api (dropbox.js)，但您似乎需要从网络服务器（用于 Dropbox 身份验证重定向）使用它，我认为它不适用于身份验证后重定向到本地 html 文件。

有没有人做过我想做的事情，或者只是不可行？如果不使用 Dropbox，是否有替代方案（例如，Google Drive 等）？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T16:39:10.553

[要验证](https://github.com/dropbox/dropbox-js/blob/master/doc/getting_started.md)使用`client.authDriver(new Dropbox.Drivers.Popup())`（[请参见此处](https://github.com/dropbox/dropbox-js/blob/master/doc/auth_drivers.md)）而不是重定向：

> 此驱动程序可能对无法处理由 Dropbox.Drivers.Redirect 执行的重定向的浏览器应用程序很有用。该驱动程序通过弹出一个单独的窗口并在该窗口中加载 Dropbox 授权页面来避免更改应用程序浏览器窗口的位置。

您应该能够[使用 FileReader 在本地读取文件](https://developer.mozilla.org/en-US/docs/DOM/FileReader)，然后[写入您的文件](https://github.com/dropbox/dropbox-js/blob/master/doc/getting_started.md#write-a-file)。

* * *

更新：是的，你知道。请参阅[浏览器和开源应用程序](https://github.com/dropbox/dropbox-js/blob/master/doc/getting_started.md#initialization)：

> Dropbox API 指南要求 API 密钥和秘密永远不会以明文形式公开。这是在客户端使用 dropbox.js 的应用程序（浏览器应用程序和 Chrome 扩展程序）以及所有开源应用程序的问题。
> 
> 要满足此要求，[请对您的 API 密钥进行编码](https://dl-web.dropbox.com/spa/pjlfdak1tmznswp/api_keys.js/public/index.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:23:36.400

您绝对可以使用 Google 驱动器：[https](https://developers.google.com/drive/quickstart-js) ://developers.google.com/drive/quickstart-js 。还有一个样品 plunker 也漂浮在周围。我相信您也可以通过 JS api 使用 Skydrive。

不是 100% 确定 Dropbox，但他们使用 OAuth 1（Dropbox 身份验证符合 OAuth v1 规范 @ [https://www.dropbox.com/developers/core/authentication#python](https://www.dropbox.com/developers/core/authentication#python)），通常不是一个好主意将它与 JS 一起使用，因为它需要公开您的应用程序机密。Twitter 使用相同的，他们杀死了他们的 JS api。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:31:14.890

You can try to use one of the lightweight local webservers like [Bottle](http://bottlepy.org/docs/dev/) or even [Tornado](http://www.tornadoweb.org/). And then the redirection URL will be a kind of `http://127.0.0.1:5000/`.

# python - ImportError 没有名为 blog 的模块

> ID：14659106
> 
> 赞同：3
> 
> 时间：2013-02-02T05:54:40.707
> 
> 标签：python, django

我正在学习 django 教程[http://net.tutsplus.com/tutorials/python-tutorials/python-from-scratch-creating-a-dynamic-website/](http://net.tutsplus.com/tutorials/python-tutorials/python-from-scratch-creating-a-dynamic-website/)。按照模板部分中的说明，我添加了：

```
TEMPLATE_DIRS = (
    "F:/firstblog/blog/templates", 
```

这是完整的路径。

我收到以下错误输出：

```
Request Method: GET
Request URL:    http://127.0.0.1:8000/
Django Version: 1.4.3
Exception Type: ImportError
Exception Value:    
No module named blog
Exception Location: f:\python27\lib\site-packages\django\utils\importlib.py in            import_module, line 35
Python Executable:  f:\python27\python.exe
Python Version: 2.7.3 
```

我安装的应用程序是：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles', 
```

我将不胜感激有关如何解决此问题的任何建议，

谢谢，

账单

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-06T18:32:06.207

在完成 tutsplus 的本教程时，我遇到了同样的问题。就像 user61629 说的那样，您需要将 url 模式更改为 'blog.views.home' 而不是 'FirstBlog.blog.views.home' 并且效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T06:07:12.200

您还应该查看django 文档中[包含的教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)，了解您找到的部分可能未涵盖的部分。

您可能需要修改`settings.py`和添加`blog`应用程序`INSTALLED_APPS`来解决`ImportError`. [*本教程的激活模型*](https://docs.djangoproject.com/en/dev/intro/tutorial02/#activating-models)部分对此进行了介绍。

编辑：这似乎是解决`ImportError`你所需要的。

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'blog', # <------ your app here.
     ...
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T10:13:00.830

听起来像一个简单的导入错误。可能是由于您尚未安装应用程序“博客”检查您的 settings.py 是否已安装？

另一个问题可能只是不正确的导入路径，例如

```
from blog.models import Blog 
```

无论哪种方式，您都应该继续阅读文档。我发现这些视频非常有帮助 [http://hackedexistence.com/project-django.html](http://hackedexistence.com/project-django.html)

另外，上面代码中的另一个注释不包括这样的完整路径......

```
TEMPLATE_DIRS = (
    "F:/firstblog/blog/templates", 
```

以后会给你很多问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T11:37:43.233

最好不要像`F:/firstblog/blog/templates`在项目中那样使用绝对路径，就像您在服务器上部署或其他人也开发此项目一样，他们必须更改这些路径。

尝试使用`unipath`这个或只是`os`模块来设置路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-15T00:05:08.297

在每个 INSTALLED_APPS 之后忘记昏迷也可能导致类似的错误。例如：

```
INSTALLED_APPS = (
    'django.contrib.auth'  <----------- No Comma!
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles', 
```

（可以帮助像我这样的初学者）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-28T08:32:15.330

此错误可能是因为您在创建后重命名了 Django 项目。因此，您必须撤消并返回用于创建 Django 项目的名称或跟踪错误并使用新的 Django 名称更新它。

# javascript - 计时器类 - 找不到变量

> ID：14659112
> 
> 赞同：0
> 
> 时间：2013-02-02T05:55:37.787
> 
> 标签：javascript, timer, countdowntimer

我是 JavaScript 和面向对象编程的新手。我正在尝试创建一个 Timer 对象（我假设这是一个对象？）。

我的对象不工作，我收到以下错误：“ReferenceError：找不到变量：countdownTime”（一遍又一遍）。

我的对象应该创建一个倒数计时器。用户可以设置倒计时的时间量（以秒为单位），从该时间开始计时器倒计时（我的对象的属性）。用户还可以启动和停止我的计时器（方法）。计时器在 0 处自动停止，但用户可以提前停止（例如：用户失去所有生命，但仍有剩余时间 - 计时器应该结束）。

为什么这没有按预期工作？

小提琴：http: [//jsfiddle.net/bkWTS/](http://jsfiddle.net/bkWTS/)

代码：

```
<div id="output"></div>

<script>
// Timer object
var Timer = function() {

    // PROPERTIES
    this.countdownTime = 120; // amount of time the timer counts down from in seconds

    // METHODS
    // Start timer - starts the countdown timer
    this.Start = function() {
        var timer = setInterval(timerCall, 1000);
    };

    // End timer
    // timer automatically ends when countdown time reaches 0 BUT can be ended early 
    // Example: User looses all lives and there is still time remaining - timer should end
    this.End = function() {
        // Stop timer
        clearInterval(timer);
    };

    function timerCall() {          
        if (countdownTime > 0) {
            // Display time in output div
            document.getElementById("output").innerHTML = countdownTime;

            countdownTime--;    
        } else {
            // Stop timer
            clearInterval(timer);
        }
    }

};

// Create new timer object
var myTimer = new Timer();

// Countdown from 30
myTimer.countdownTime = 30;

// Start the countdown
myTimer.Start();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T23:17:17.773

你看不到你的变量，因为你应该像这样引用它

`this.countdownTime = ...`

在课堂上执行以下操作：

`var self = this;`

然后在`timerCall`你做的功能

`self.countdownTime = ...`

那应该可以解决倒计时问题:)

# python - 安装 pylinkgrammar 时缺少文件

> ID：14659118
> 
> 赞同：9
> 
> 时间：2013-02-02T05:56:15.540
> 
> 标签：python, c, gcc

[http://pypi.python.org/pypi/pylinkgrammar](http://pypi.python.org/pypi/pylinkgrammar)

尝试安装 pylinkgrammar 时遇到错误：

```
Running setup.py egg_info for package pylinkgrammar

Installing collected packages: pylinkgrammar
  Running setup.py install for pylinkgrammar
...
running build_ext

building 'pylinkgrammar/_clinkgrammar' extension

swigging pylinkgrammar/link_grammar.i to pylinkgrammar/link_grammar_wrap.c

swig -python -o pylinkgrammar/link_grammar_wrap.c pylinkgrammar/link_grammar.i

gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c pylinkgrammar/link_grammar_wrap.c -o build/temp.linux-x86_64-2.7/pylinkgrammar/link_grammar_wrap.o

pylinkgrammar/link_grammar_wrap.c:2973:40: fatal error: link-grammar/link-includes.h: No such file or directory

compilation terminated.

error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-24T08:18:10.030

这对我有用：

```
sudo apt-get install liblink-grammar4-dev 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T07:37:21.637

除了安装 liblink-grammar4 包外，还安装 liblink-grammar4-dev 包，该包在 synaptic 中可用。

我一直在努力解决一个多小时，它对我有用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T05:59:32.990

您首先需要安装 liblink-grammar4 库：

如果你在 ubuntu 系统上，你可以运行：

```
sudo apt-add-repository ppa:python-pylinkgrammar/getsome
sudo apt-get install liblink-grammar4 
```

如果您使用不同风格的 linux，请确保`liblink-grammar4`已安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-08T18:16:07.557

这可能会有所帮助

```
sudo apt-get install liblink-grammar4-dev cmake swig
sudo pip install pylinkgrammar 
```

# javascript - 对单个 Jquery 插件使用两个 id

> ID：14659119
> 
> 赞同：0
> 
> 时间：2013-02-02T05:56:23.213
> 
> 标签：javascript, jquery

我正在尝试使用单个 jquery 插件，并且我想将相同的功能应用于两个不同的 id。

我怎样才能做到这一点，这是一种下一个和上一个功能，如果我们单击下一步，那么两个 div 都应该自动滚动..

如果您看到 html，则有两个相同 id 的 div 我不应该使用，因为如果我要更改 id 以及如何为同一个插件调用该 id，则 id 应该是唯一的。

请求帮助

这是我尝试过的。

```
stepcarousel.setup({
    galleryid: 'gallerya', //id of carousel DIV
    beltclass: 'belt', //class of inner "belt" DIV containing all the panel DIVs
    panelclass: 'panel', //class of panel DIVs each holding content
    autostep: {enable:true, moveby:1, pause:3000},
    panelbehavior: {speed:300, wraparound:false, persist:false},
    defaultbuttons: {enable: true, moveby: 1, leftnav: ['images/left-arrow.png', 200, -30], rightnav: ['images/right-arrow.png', 10,  -30]},
    contenttype: ['inline'] //content setting ['inline'] or ['external', 'path_to_external_file']
})

div id="gallerya" class="stepcarousel" style="height:731px;">
                    <div class="belt">
                        <div class="panel" style="width:252px;">
                        <ul>
                        <li class="first leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/financial-analyst-interview-preparation.html" title=""> How to prepare for financial analyst interview?</a></li>
<li class="leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/external-training-programs-and-salary.html" title="">Are external training programs offered by company part of salary package?</a></li>
<li class="leaf"><a href="/preparation-for-an-interview/bank.html" title="">Bank Interview Preparation</a></li>
<li class="leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/prepare-for-campus-interview.html" title="">Best ways to Prepare for Campus Interview</a></li>
<li class="leaf"><a href="/preparation-for-an-interview/cognitive-abilities-tests" title="">Cognitive Abilities Test</a></li>
<li class="leaf"><a href="/preparation-for-an-interview/college.html" title="">College Interview Preparation</a></li>
<li class="leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/career-goals-in-job-interview.html" title="">Discussing career goals in a job interview</a></li>
<li class="leaf"><a href="/tools/dressing-tips" title="">Dressing up for Interview</a></li>
<li class="leaf"><a href="/top-100-questions/engg" title="">Engineering Interview Questions</a></li>
<li class="leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/favorite-job-destinations-in-india.html" title="">Favorite job destinations in India</a></li>
<li class="leaf"><a href="/top-100-questions/finance" title="">Finance Interview Questions</a></li>
<li class="leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/group-discussion-rules-for-interview.html" title="">Group Discussion Rules for Interview updated</a></li>
<li class="leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/dietician-interview-preparation.html" title="">How to Prepare for Dietician Job Interview</a></li>
<li class="leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/lab-technician.html" title="">How to Prepare for Lab Technician Interview?</a></li>
<li class="leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/pilot-interview-preparation.html" title="">How to Prepare for Pilot Interview</a></li>
<li class="leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/accounting.html" title="">How to Prepare for an Accounting Interview</a></li>
<li class="leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/insurance-agent-interview-preparation.html" title="">How to Prepare for an Insurance Agent Interview?</a></li>
<li class="leaf"><a href="http://www.jobzing.com/preparation-for-an-interview/how-to-answer-basic-interview-questions.html" title="">How to answer basic interview questions?</a></li>
                    </ul>
                        </div> 

<div id="gallerya" class="stepcarousel" style="height:160px;">
                    <div class="belt">
                        <div class="panel">
                        <ul>
                        <li>
                            <span><a href="http://www.jobzing.com/9779-project-manager.html"><b>Project Manager</u></b></a></span></span> <br />  
                            <span>A&amp;E Consulting</span><br />  
                            <span>Philippines </span>
                    </li>
                    <li>
                            <span><a href="http://www.jobzing.com/9779-project-manager.html"><b>Project Manager</u></b></a></span></span> <br />  
                            <span>A&amp;E Consulting</span><br />  
                            <span>Philippines </span>
                    </li>
                    </ul>
                        </div> 
```

[我正在创建的页面](http://www.jobzing.com/Testt/inner-page.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:44:57.983

你有没有尝试过这样的事情：

用,和调用`.setup`一次。然后再次使用,和。`galleryid: 'galleryA'``beltclass: 'beltA'``panelclass: 'panelA'``galleryid: 'galleryB'``beltclass: 'beltB'``panelclass: 'panelB'`

```
stepcarousel.setup({
    galleryid: 'galleryA', //id of carousel DIV
    beltclass: 'beltA', //class of inner "belt" DIV containing all the panel DIVs
    panelclass: 'panelA', //class of panel DIVs each holding content
    autostep: {enable:true, moveby:1, pause:3000},
    panelbehavior: {speed:300, wraparound:false, persist:false},
    defaultbuttons: {enable: true, moveby: 1, leftnav: ['images/left-arrow.png', 200, -30], rightnav: ['images/right-arrow.png', 10,  -30]},
    contenttype: ['inline'] //content setting ['inline'] or ['external', 'path_to_external_file']
})

stepcarousel.setup({
    galleryid: 'galleryB', //id of carousel DIV
    beltclass: 'beltB', //class of inner "belt" DIV containing all the panel DIVs
    panelclass: 'panelB', //class of panel DIVs each holding content
    autostep: {enable:true, moveby:1, pause:3000},
    panelbehavior: {speed:300, wraparound:false, persist:false},
    defaultbuttons: {enable: true, moveby: 1, leftnav: ['images/left-arrow.png', 200, -30], rightnav: ['images/right-arrow.png', 10,  -30]},
    contenttype: ['inline'] //content setting ['inline'] or ['external', 'path_to_external_file']
}) 
```

然后你的 HTML 是这样的：

```
<div id="galleryA" class="stepcarousel" style="height:731px;">
    <div class="beltA">
        <div class="panelA" style="width:252px;">
            <ul>
                <li></li>
                <li></li>
            </ul>
        </div> 
    </div>
</div>

<div id="galleryB" class="stepcarousel" style="height:160px;">
    <div class="beltB">
        <div class="panelB">
            <ul>
                <li></li>
                <li></li>
            </ul>
        </div> 
    </div>
</div> 
```

# c++ - 带有兰特号码的彩票程序

> ID：14659120
> 
> 赞同：1
> 
> 时间：2013-02-02T05:56:28.827
> 
> 标签：c++, numbers

我正在尝试编写为彩票生成三位数字并且用户输入三位数字的程序。

*   如果用户输入与彩票的顺序完全一致，则奖金为 10,000 美元。
*   如果用户输入与彩票匹配，则奖金为 3,000 美元。
*   如果用户输入的一位数字与彩票中的一位数字匹配，则奖金为 1,000 美元。

但我没有得到任何正确的结果。

```
h1=rand() % 10;

int h2=rand() % 10;
int h3=rand() % 10;

cout<<"Enter three digite number\n";
cin>>n1>>n2>>n3;

if(n1==h1&&n2==h2&&n3==h3)
    cout<<"you win 10.000 award\n";
else
    if(n1==h1||n1==h2||n1==h3&&n2==h1||n2==h2||n2==h3&&n3==h1||n3==h2||n3==h3)
        cout<<"you win 3,000\n";
    else
        if(n1==h1||n1==h2||n1==h3||n2==h1||n2==h2||n2==h3||n3==h1||n3==h2||n3==h3)
            cout<<"you win 1,000\n";
        else
            cout<<"you don't win anything sorry\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:01:31.113

如果块不正确，您在第二个和第三个中的测试条件。

```
if(n1==h1||n1==h2||n1==h3&&n2==h1||n2==h2||n2==h3&&n3==h1||n3==h2||n3==h3) 
```

在这种测试条件下，有很多问题。

*   首先，这容易被短路。如果 n1 与 h1 或 h2 匹配，则不会测试其余的条件。这同样适用于之后的每个比较，请记住 && 其中两侧的两个条件都需要为短路。

*   假设我们放置了防止这种情况的括号，那么您的条件对于所有三个匹配以任何顺序都为真。

看到这两个问题，最好重做逻辑，因为这使得第三块的动作变得多余。您的第三个块将针对特定的输入组合运行，而不是您期望它执行的操作

* * *

我认为编写程序逻辑的更好方法是单独比较每个字符并为找到的匹配数维护一个计数器。

```
int c=0, win;
if(n1==h1||n1==h2||n1==h3) c++;
if(n2==h1||n2==h2||n2==h3) c++;
if(n3==h1||n3==h2||n3==h3) c++;

if(c==3)
{
    //Check order of digits
    if(n1==h1&&n2==h2&&n3==h3) win = 10000;
    else win=3000 //All digits same but not in order
}
else if(c==2)
    win=3000
else if(c==1)
    win=1000
else
    win=0

if(win) cout<<"You win "<<win<<"\n";
else cout<<"you dont win anything\n"; 
```

# java - 在服务器上的 PHP 中创建 JSON 后 Java JSON 解析异常

> ID：14659122
> 
> 赞同：0
> 
> 时间：2013-02-02T05:56:32.230
> 
> 标签：java, php, json

我有从服务器传递的这个字符串：

```
{\"error\":\"email_in_diff_account\"} 
```

它是在 PHP 中创建的，如下所示：

```
$post_data = array('error' => "email_in_diff_account");

echo json_encode($post_data); 
```

但是当我尝试在 JAVA 中像这样解析它时：

```
JSONArray obj = new JSONArray(result); 
```

它会导致以下异常。

> org.json.JSONObject 无法转换为 JSONArray

有人知道如何解决这个问题吗？我没有在 php 中正确创建 JSON 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:59:13.790

如果那些反斜杠在那里，那将是你的问题。请发布例外情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T06:04:36.417

如果您使用的是[http://www.json.org/javadoc/org/json/JSONArray.html](http://www.json.org/javadoc/org/json/JSONArray.html)

您正在尝试解析一个数组，但您正在向它传递一个对象，您应该使用[http://www.json.org/javadoc/org/json/JSONObject.html](http://www.json.org/javadoc/org/json/JSONObject.html)

```
JSONObject json = new JSONObject(result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T05:59:35.647

首先，这段代码不能像这样创建 json

```
$post_data = array('error' => "email_in_diff_account");
echo json_encode($post_data);

{\"error\":\"email_in_diff_account\"}   // your output

{"error":"email_in_diff_account"}   // actual output 
```

[您可以使用此链接http://jsonlint.com/](http://jsonlint.com/)验证您的 JSON

请参阅代码 [http://codepad.org/oJXj0GdI的工作示例](http://codepad.org/oJXj0GdI)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T06:07:06.013

正确的用法是： `JSONObject json = new JSONObject(result);`

# magento - 将 Elastic IP 与 EC2 实例关联，它破坏了我的 Magento 安装

> ID：14659128
> 
> 赞同：0
> 
> 时间：2013-02-02T05:57:40.497
> 
> 标签：magento, amazon-ec2, amazon

我使用来自 Bitnami 的 Amazon EC2 AMI 来启动 Magento 实例。在我为其分配弹性 IP 之前一切正常，现在 Magento 商店将无法运行。它只是超时。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:10:50.733

只需再次重新启动实例，附加的弹性 IP 将被解除关联并再次附加到实例。之后它会正常工作。

# sql-server-2008-r2 - SQL Server 2008 R2 带有like 子句的问题

> ID：14659131
> 
> 赞同：3
> 
> 时间：2013-02-02T05:58:18.140
> 
> 标签：sql-server-2008-r2

我想对用户将选择的表的任何列执行搜索。为此，我有两个字符串变量 searchkey 来存储列的名称和要搜索的值的 searchvalue。

这是我的相同查询：

```
and (Select Case @SearchKey 
            When 'Title' then Parcel.Title 
            When 'Unit_No' then Unit_No 
            When 'AgentName' then App_User.Name
            When 'TenantName' then Client_Personal_Information.First_Name
            When 'UnitRefNo' then Unit_Ref_No

                        End )  like @SearchValue 
```

此查询工作正常并给我所需的输出，因为所有列都有 nvarchar 类型值。

但是当我在上面的查询中添加这个

```
When 'Rent' then Unit_Transform.Rent_Per_Annum
When 'SecurityDeposit' then [Unit_Transform].[Security_Deposit] 
```

对于包含十进制值的列，它只返回这两列的输出。如果我选择包含 nvarchar 值的列，则显示未找到记录。

任何想法为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:46:16.810

我认为您需要像这样将您的十进制字段转换为 varchar：

```
When 'Rent' then CAST( Unit_Transform.Rent_Per_Annum as Varchar ) 
```

这是[Fiddle](http://sqlfiddle.com/#!3/04719/10)可以看到的。删除演员表，您实际上会收到错误消息。

祝你好运。

# c# - 如何将天数添加到日期时间

> ID：14659132
> 
> 赞同：0
> 
> 时间：2013-02-02T05:58:31.590
> 
> 标签：c#, datetime

我有 2 个日期选择器 txtbookin 和 txtcompleted

我还有一个名为 txtnoofdays 的文本框，它只接受整数

我的要求：

如果我在 txtnoofdays 文本框中键入任何整数，ontextchanged 事件我想将 txtnoofdays 添加到 txtbookin 并在 txtcomplete 中显示相应的日期..我写如下..但它添加到月份而不是日期..我的系统日期格式 dd /MM/yyyy...

```
 var dt1 =Convert.ToDateTime(txtbookindate.Text);
        var dt2 = Convert.ToDateTime(txtcompleted.Text);
        var dt3 = dt1.AddDays(Convert.ToDouble(txtnoofdays.Text));
        txtcompleted.Text = dt3.ToString("dd/MM/yyyy"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:21:24.647

使用重载方法`Convert.ToDateTime(string, IFormatProvider)`将日期正确转换为您的语言环境设置...

```
CultureInfo culture = new CultureInfo("es-ES");     
var dt = Convert.ToDateTime(txt.Text, culture); 
```

对两个日期时间文本都这样做......

# ios - 在 iOS6 之前的应用程序中使用 UDID（以及 6.0+ 的 IDFA）

> ID：14659133
> 
> 赞同：3
> 
> 时间：2013-02-02T05:58:32.373
> 
> 标签：ios, ios6, udid

iOS6的新[IDFA 功能](http://developer.apple.com/library/ios/#documentation/AdSupport/Reference/ASIdentifierManager_Ref/ASIdentifierManager.html)适用于运行 iOS6 的用户的转化跟踪。但是，如果应用程序的最低支持版本低于 iOS 6，那么在 iOS6 之前的设备上运行时，可接受的处理方法是什么？

[Jumptap 提到](https://support.jumptap.com/index.php/Jumptap_iOS_SDK_Integration)您仍然可以在 iOS6 之前的设备上使用 UDID：

> 广告标识符 (IDFA) 是在 iOS 6 中引入的。广告商使用它来跟踪转化和高级定位等。在使用 iOS 6（或更高版本）的设备上，IDFA 旨在取代 UDID 作为设备标识符。在使用 iOS 5（或更低版本）的设备上，Apple 将继续支持使用 UDID 作为设备标识符。

但这并不适合我。iOS 版本检查是运行时的事情，这意味着您的代码将始终静态链接到已弃用的 UDID 访问器，并且仅在运行时决定是否读取它。当然，Apple 的审核过程会看到指向 UDID 的静态链接并拒绝该应用程序。他们不会反编译代码并确认你的逻辑是正确的，或者尝试做一个 100% 的代码覆盖测试来确认它在 iOS6 中运行时永远不会被读取，是吗？！？！

此外，[AppsFlyer 提到可以在他们的 SDK 中启用 UDID](http://support.appsflyer.com/attachments/token/lzf8rz5hhkywlt0/?name=AF-iOS-SDK-Integration-Guide-v2.5.1.9.2.pdf)，并附上以下说明：

> *UDID 详细信息：一些广告网络（例如 Tapjoy）需要 UDID 才能运行 CPI 活动。在上述情况下，您需要启用 UDID 并使用明确的隐私声明更新您的应用条款和条件，通知您的用户收集他们的私人信息。

这似乎意味着只要您通知用户，仍然允许读取 UDID。但是，我在 Apple 官方文档中找不到任何提及。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:16:14.483

很可能他们不是，但他们应该。但是请看，Apple 的目标不是取悦开发者；而是取悦开发者。他们的目标是取悦自己（即赚很多钱）。

如果您担心此事件最终会发生在您身上（这是一个非常合理的恐惧），那么您可以尝试混淆对该特定消息的调用（并且仅在 iOS 5 和更早版本上调用它，以免违反 TOS ）。例子：

```
NSString *str1 = @"ueId";
NSString *str2 = @"uniq";
NSString *sel = [NSString stringWithFormat:@"%@%@ent%cfi%s", str2, str1, 'i', "er"];
SEL msg = NSSelectorFromString(sel);
if (iOS_5_or_older) {
    deviceID = [[UIDevice currentDevice] performSelector:msg];
} 
```

这是一个相当弱的“混淆”，但如果Apple真的变得懒惰和/或决定对你做坏事，这可能足以通过故事的静态分析部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T15:54:15.033

UDID 现在验证失败。去 OpenUDID。

# javascript - 在 TinyMCE 中用删除线替换退格键

> ID：14659134
> 
> 赞同：1
> 
> 时间：2013-02-02T05:58:47.260
> 
> 标签：javascript, html, editor, tinymce

我在我的网页中使用 TinyMce 编辑器。每当用户输入一些文本时，他不应该能够删除文本......（禁用退格键）或者如果他使用退格键文本应该被删除（更改退格的功能）。tinymce 中是否有执行此操作的功能？

```
if (((e.which === 8 || e.keyCode === 8))||(e.which === 46 || e.keyCode === 46)) { // Delete key
          // Do something
          var rng = ed.selection.getRng(true);
        var txt = rng.startContainer.textContent;
          fncAddText(txt.substring(rng.startOffset - 1, rng.startOffset));
          handled = true;
        }
      if (handled) {
        tinymce.dom.Event.cancel(e);
      }      
    function fncAddText(txt) {
        var theText="<del>"+txt+"</del>";
        tinyMCE.execCommand('mceReplaceContent',false,theText);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:26:36.240

不，tinymce 附带的代码中不存在这样的东西，我也不知道其他地方有具有此功能的插件。但是你可以自由地自己创造这样的东西。

# javascript - 正则表达式地址提取

> ID：14659139
> 
> 赞同：0
> 
> 时间：2013-02-02T05:59:25.587
> 
> 标签：javascript, regex

我在做这件事上遇到了最困难的时期。

我有以下 HTML，我试图从中解析地址“100 E Faith Ter”

```
 <span style="border-color: rgb(0, 0, 255); border-width: 2px; border-style: solid;"                 class="addr">     100 E Faith Ter<br>            <span class="locality">Maitland</span>,                     <span class="region">FL</span>            <span class="postal-code">32751</span>                    </span>l-code">32751</span>            </span> 
```

我试图将上面的这个 html 传递给这组代码，但我没有得到匹配，我不明白为什么即使我在正则表达式测试器中尝试它并且它有效。我快疯了。

```
 function demoShowMatchClick(addressToPull) {
      var re = new RegExp("\s{5}(.*?<br>)");
      var m = re.exec(addressToPull);
      if (m == null) {
        alert("No match");
      } else {
        var s = "Match at position " + m.index + ":\n";
        for (i = 0; i < m.length; i++) {
          s = s + m[i] + "\n";
        }
        alert(s);
      }
    } 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:04:37.893

这对我有用：

```
var re = new RegExp("\\s{5}(.*?<br>)"); 
```

转义 \s

如果您使用文字正则表达式语法，则不必担心字符串转义：

```
var re = /\s{5}(.*?<br>)/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:13:33.130

```
you have to make following changes in your function

 function demoShowMatchClick(addressToPull) {
      var re = \s{5}(.*?<br>);
      var m = re.exec(addressToPull);
      if (re.test(addressToPull)) {
        var s = "Match at position " + m.index + ":\n";
        for (i = 0; i < m.length; i++) {
          s = s + m[i] + "\n";
            alert(s);
      } else {

             alert("No match");
        }

      }
    } 
```

# tomcat - 带有 Thymeleaf 的 Spring MVC。更新静态数据

> ID：14659142
> 
> 赞同：5
> 
> 时间：2013-02-02T05:59:37.903
> 
> 标签：tomcat, spring-mvc, thymeleaf

我正在使用带有 Thymeleaf 和 Tomcat 的 Spring MVC，我希望能够在不重新部署的情况下更新静态数据（html 页面）。在我的应用程序中，html 是由 Spring 控制器映射的。即使是 JRebel 也无济于事。它很好地更新了 java 类，但对视图没有任何作用。我应该怎么做才能解决这个问题？也许对于 html，我需要一些像 Jasper 这样的侦听器机制来用于 JSP，或者我应该为 Spring 控制器禁用一些缓存？..

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-02T07:05:52.687

这实际上是 Thymeleaf 问题。我只需要禁用模板解析器的缓存，默认情况下它是开启的。

```
<bean id="templateResolver" class="org.thymeleaf.templateresolver.ServletContextTemplateResolver">
    <property name="prefix" value="/" /> 
    <property name="suffix" value=".html" /> 
    <property name="templateMode" value="HTML5" /> 
    <property name="cacheable" value="false"/>
</bean> 
```

# gdb - 如何在 GDB 中打印指针内容？

> ID：14659147
> 
> 赞同：19
> 
> 时间：2013-02-02T06:01:05.070
> 
> 标签：gdb

在 GDB 中，我正在尝试：

> gdb> p/s *0x0804b680

这给了我：

> $6 = 0x6c627550

显然它应该打印出来`lbruP`，还是我错了？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-02T06:05:31.527

对于 char* p = "abcde";

做

```
p /s p 
```

例如不是 *p

```
(gdb) p /s p
$9 = 0x40060c "abcde" 
```

如果您的 p 不是 char* 类型（例如 void* v = p ），您可以强制转换它或使用 x 命令

```
(gdb) p /s (char*)v
$7 = 0x40061c "abcde"
(gdb) x /s v
0x40061c:    "abcde" 
```

# django - 在 Django 中使用 https

> ID：14659151
> 
> 赞同：1
> 
> 时间：2013-02-02T06:01:57.307
> 
> 标签：django, https, foursquare

我在 AWS EC2 实例上运行 Django。

我收到来自 Foursquare API 的签到帖子。Foursquare 需要一个 https 地址来将 POST 发送到（但不必对证书进行签名）。

如何让 HTTPS 与 Django 一起工作？我觉得我需要另一台服务器，比如 Apache。如果是这种情况，我对 Apache 知之甚少，并且发现大多数答案令人困惑。

对于这种情况，我只需要 https。实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T06:19:41.707

如果不需要 Apache，那么您可以使用其他服务器，例如 NGINX。有一个[让 NGINX 在 EC2 环境上运行](http://nginx.org/en/docs/howto_setup_development_environment_on_ec2.html)的教程。我建议 NGINX 的原因是因为它的性能更好（注意：我确实比较过，`ab`但不要相信我的话）。

运行 NGINX 后，您可以将其配置为使用 SSL；这是[这样做的文档](http://nginx.org/en/docs/http/configuring_https_servers.html)。您需要 NGINX 之类的东西的原因是，python 并不是最适合所有类型的请求（例如，对于媒体/静态文件）。您可能还需要 NGINX 将请求移交给 WSGI 处理程序（例如`uwsgi`或`gunicorn`）。您可以[在此处阅读更多相关信息](https://serverfault.com/questions/331256/why-do-i-need-nginx-and-something-like-gunicorn)。

如果 SSL 证书不需要签名，您可以创建一个自签名证书，这里是[一个教程示例](http://www.akadia.com/services/ssh_test_certificate.html)，您可以在创建证书的步骤之后停止（或者如果您想使用 Apache，请继续执行所有步骤）。

一些不错的教程：

*   这是[“从头到尾 - 在 EC2 上使用 iwsgi/nginx 服务 django”](http://adambard.com/blog/start-to-finish-serving-mysql-backed-django-w/)。
*   这是[单个 Amazon EC2 上的 Django Nginx Gunicorn MySQL/Postgres 堆栈的一个](https://gist.github.com/sgarcez/2649467)。

编辑：同时处理`http`和`https`：

```
server {
    listen              80;
    listen              443 ssl;
    server_name         www.example.com;
    ssl_certificate     www.example.com.crt;
    ssl_certificate_key www.example.com.key;
    location / {
        ...
    }
} 
```

# macos - 错误：为 puppet-3.0.2 生成文档时

> ID：14659153
> 
> 赞同：1
> 
> 时间：2013-02-02T06:02:12.547
> 
> 标签：macos, gem, puppet

我正在尝试使用“sudo gem update”更新我的 gem

并得到以下错误：

内部错误是：

错误：为 puppet-3.0.2 生成文档时 ... 消息：# ... RDOC 参数的未定义方法“名称”：--ri --op /Library/Ruby/Gems/1.8/doc/puppet-3.0。 2/ri --title Puppet - 配置管理 --main README.md --line-numbers lib --title puppet-3.0.2 文档 --quiet

这是 puppet 3.0.2 的已知问题还是我的 Mac 上缺少某些东西？

# python - 带有 Python ftplib 的 FTPS - 需要会话重用

> ID：14659154
> 
> 赞同：12
> 
> 时间：2013-02-02T06:02:26.417
> 
> 标签：python, ftp, python-2.7, ftps, ftplib

因此，我正在尝试连接到 FTP 服务器以获取目录列表并下载文件。但是`prot_p()`函数之后的第一个命令引发异常 - 从日志中产生这些错误：

```
*get* '150 Here comes the directory listing.\r\n'
*resp* '150 Here comes the directory listing.'
*get* '522 SSL connection failed; session reuse required: see require_ssl_reuse
option in vsftpd.conf man page\r\n'
*resp* '522 SSL connection failed; session reuse required: see require_ssl_reuse
 option in vsftpd.conf man page'
Traceback (most recent call last):
  File "C:\temp\download.py", line 29, in <module>
    files = ftps.dir()
  File "C:\Python27\lib\ftplib.py", line 522, in dir
    self.retrlines(cmd, func)
  File "C:\Python27\lib\ftplib.py", line 725, in retrlines
    return self.voidresp()
  File "C:\Python27\lib\ftplib.py", line 224, in voidresp
    resp = self.getresp()
  File "C:\Python27\lib\ftplib.py", line 219, in getresp
    raise error_perm, resp
ftplib.error_perm: 522 SSL connection failed; session reuse required: see requir
e_ssl_reuse option in vsftpd.conf man page 
```

这是代码：

```
from ftplib import FTP_TLS
import os
import socket

host = 'example.com'
port = 34567
user = 'user1'
passwd = 'pass123'
acct = 'Normal'

ftps = FTP_TLS()

ftps.set_debuglevel(2)

ftps.connect(host, port)

print(ftps.getwelcome())
print(ftps.sock)

ftps.auth()

ftps.login(user, passwd, acct)

ftps.set_pasv(True)
ftps.prot_p()

print('Current directory:')
print(ftps.pwd())
files = ftps.dir()

ftps.quit() 
```

我想安全地做到这一点，因此使用 FTP over TLS Explicit。我的想法是我可能需要操作`Socket`ftplib 引用的类中的一些设置。更改服务器上的设置是不可能的。我已经使用 FileZilla 客户端成功测试了服务器，旧版本的 WinSCP 引发了同样的错误——尽管升级到最新版本修复了它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-04-09T00:22:42.397

现在可以通过这个类（FTP_TLS 的后代）轻松地为**Python 3.6+修复它：**

```
class MyFTP_TLS(ftplib.FTP_TLS):
    """Explicit FTPS, with shared TLS session"""
    def ntransfercmd(self, cmd, rest=None):
        conn, size = ftplib.FTP.ntransfercmd(self, cmd, rest)
        if self._prot_p:
            conn = self.context.wrap_socket(conn,
                                            server_hostname=self.host,
                                            session=self.sock.session)  # this is the fix
        return conn, size 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-19T16:34:00.093

当您提到升级到最新版本修复了该问题时，它看起来比**ftplib更可能是****vsftpd问题。**

 **如果您不能触摸服务器的设置，则对它进行子类化`FTP_TLS`可能有助于解决您的问题，尽管在我看来这是一个相当*HACK*，参考了这个 SO question & answers [Python FTP TLS connection issue](https://stackoverflow.com/questions/12164470/python-ftp-tls-connection-issue)。您还可以从这个[python 错误问题 19500](http://bugs.python.org/issue19500)中查看：

> " 服务器坚持数据连接使用 TLS 缓存会话是合理的。这可能是先前数据
> 连接或清除控制连接的缓存。如果这是拒绝允许数据传输的原因，那么'522'回复
> 应该表明这一点。
> 
> 注意：这对客户端设计有重要影响，但允许服务器通过 拒绝与先前经过身份验证的客户端执行完整协商
> 来最小化 TLS 协商期间使用的周期 。”
> 
> 看来 vsftpd 服务器通过强制“控制和数据连接之间的 SSL 会话重用”来实现这一点。
> 
> [http://scarybeastsecurity.blogspot.com/2009/02/vsftpd-210-released.html](http://scarybeastsecurity.blogspot.com/2009/02/vsftpd-210-released.html)
> 
> 查看Python核心库ftplib.py的源代码，没有任何关于数据连接与控制连接之间的SSL会话重用的想法（如果我在这里错了，请纠正我。我试过FTP_TLS.transfercmd（cmd [，休息]）¶，没有工作）。
> 
> 此问题在支持 FTPS、IE WinSCP 的其他 FTP 客户端上有详细记录：[https ://winscp.net/tracker/668](https://winscp.net/tracker/668)
> 
> 请参阅附加的测试日志文件。在 vsftpd.conf 中将“require_ssl_reuse”设置为 true 的 vsftpd 服务器可以解决问题并且可以复制。

希望这可以帮助。**

# jquery - 正则表达式命名

> ID：14659155
> 
> 赞同：0
> 
> 时间：2013-02-02T06:02:34.960
> 
> 标签：jquery, regex

正则表达式的条件是

1.  只有字母
2.  只有在输入 2 个字符后才允许空格
3.  只允许一个空格不超过一个，请帮助我我是 jQuery 新手

现在我正在使用这个，但它不起作用：

```
$('.name').keyup(function() {  
    this.value = this.value.replace(/[^A-Za-z]/g,'');    
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:38:47.880

我认为您需要使用多个正则表达式才能获得所需的结果。另外，我同意@nnnnnn 的观点，用户会觉得自动更换很烦人。

这是一个可行的解决方案，尽管我猜它可以被优化：

```
$( function() { 
    $('#test').keyup(function(){
        //Remove all characters except letters and whitespace
        this.value = this.value.replace(/[^A-Za-z\s]/g,'');
        //Replace all instance of One or more whitespaces with a space
        this.value = this.value.replace(/\s+/g,' ');
        //Replace a space that happens after zero or one characters
        this.value = this.value.replace(/^([a-zA-Z]{0,1})(\s)([a-zA-Z]+)/,'$1$3');
        //Replaces any spaces that occur after the first space
        this.value = this.value.replace(/^([a-zA-Z]{2,})(\s+)([a-zA-Z]+)(\s+)/,'$1$2$3');
    });
}); 
```

这是一个演示它工作的jsfiddle。[http://jsfiddle.net/mattpaulsen/sSUhn/3/](http://jsfiddle.net/mattpaulsen/sSUhn/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:54:11.070

这是一个正则表达式，它将获取仍然符合您要求的最小子字符串。

```
var reg = /[A-Za-z]{2}[A-Za-z]*[ ]?[A-Za-z]*/; 
```

您可以通过将返回的子字符串与原始字符串进行比较来验证用户名的输入。我将在这里创建一个 jsFiddle：http: [//jsfiddle.net/cjC5k/](http://jsfiddle.net/cjC5k/)

# c# - 将 StringCollectionEditor 与线程安全列表一起使用

> ID：14659161
> 
> 赞同：0
> 
> 时间：2013-02-02T06:03:24.430
> 
> 标签：c#, list, collections, properties, thread-safety

我正在尝试使用 System.Windows.Forms.Design.StringCollectionEditor 通过 Windows 窗体属性网格公开我的 List 类成员。我的问题是关于线程安全的

```
[Editor("System.Windows.Forms.Design.StringCollectionEditor, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", typeof(UITypeEditor))]

public List<string> EventLogSources {
        get {
            lock (lockObj) {
                return eventLogSources;
            }
        }  
} 
```

显然这不是线程安全的，因为多个线程可以获取引用并更新它。那么使用 StringCollectionEditor （或类似的东西）并保证线程安全的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:16:43.870

来自[http://mastersact.blogspot.com/2007/06/string-collection-editor-for-property.html](http://mastersact.blogspot.com/2007/06/string-collection-editor-for-property.html)的代码看起来可以解决问题：

```
public override object EditValue(ITypeDescriptorContext context,
IServiceProvider serviceprovider, object value)
{
if (serviceprovider != null)
{
mapiEditorService = serviceprovider
.GetService(typeof(IWindowsFormsEditorService)) as
IWindowsFormsEditorService;
}

if (mapiEditorService != null)
{
StringCollectionForm form = new StringCollectionForm();

// Retrieve previous values entered in list.
if (value != null)
{
List stringList = (List)value;
form.txtListValues.Text = String.Empty;
foreach (string stringValue in stringList)
{
form.txtListValues.Text += stringValue + "\r\n";
}
}

// Show Dialog.
form.ShowDialog();

if (form.DialogResult == DialogResult.OK)
{
List stringList = new List();

string[] listSeparator = new string[1];
listSeparator[0] = "\r\n";

string[] listValues = form.txtListValues.Text
.Split(listSeparator, StringSplitOptions.RemoveEmptyEntries);

// Add list values in list.
foreach (string stringValue in listValues)
{
stringList.Add(stringValue);
}

value = stringList;
}

return value;
}

return null;
} 
```

# php - 使用 DOMDocument 加载 RSS 文件

> ID：14659162
> 
> 赞同：0
> 
> 时间：2013-02-02T06:03:25.927
> 
> 标签：php, xml, dom, rss, domdocument

我在学校的 PHP 作业遇到问题。我必须创建一个 PHP 脚本，该脚本可以读取包含不同 RSS 提要的一堆 URL 的 XML 文件。我正在使用 DOMDocument 从这个 XML 文件中检索一个 URL，并使用 RSS 提要加载一个新的 DOM。我将“url”节点值分配给 $url，然后使用 $url 为 RSS 提要创建一个新的 DOM 对象。

```
$url = $student->getElementsByTagName("url");
$url = $url->item(0)->nodeValue;

$rss = new DOMDocument();
$rss->load($url); 
```

当我使用上面的代码时，RSS 文件不会加载。我什至回显了 $url 以确保它具有分配给它的链接。但是，如果我将实际的 url 放入 load() 中，它就可以正常工作。为什么 $url 在 load() 中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:42:22.513

您可以`simplexml_load_file`在这种情况下使用，但请记住，所有这些操作都是昂贵的（时间限制、内存等）。

```
$rssStack = array();
$xml = simplexml_load_file("http://people.rit.edu/cns3946/539/project2/rss_class.xml");
foreach ($xml->student as $student) {
    // need sanitize $url
    $url = trim((string) $student->url);
    // suppress errors, cos some urls return "404 Not Found"
    $rss =@ simplexml_load_file($url);
    $rssStack[] = $rss;
    // also can use 
    // $rss = new DOMDocument();
    // $rss->load($url);
    // $rssStack[] = $rss;
}
print_r($rssStack); 
```

**更新**

```
$rssStack = array();
$xml = new DOMDocument();
$xml->load("http://people.rit.edu/cns3946/539/project2/rss_class.xml");
foreach ($xml->getElementsByTagName("url") as $url) {
    // you need to sanitize url
    $url = trim($url->nodeValue);
    $rss = new DOMDocument();
    $rss->load($url);
    $rssStack[] = $rss;
    // break;
}
print_r($rssStack); 
```

# iphone - 如何从我的 FirstViewController 访问 NSMutableArray

> ID：14659163
> 
> 赞同：-1
> 
> 时间：2013-02-02T06:03:30.030
> 
> 标签：iphone, ios, objective-c, ipad, uiviewcontroller

我能够解析 JSON 并将其存储`NSMutableArray`在我的 .json 文件中名为 json 的文件中`FirstViewController`。问题是，我不知道如何`FirstViewController`从我的视图控制器访问我的数组。

**编辑！！！**

我将代码从 AppDelegate 移到了我的 FirstViewController，因为这不是一个好习惯。

**第一视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController
{
    NSMutableArray *jsonData;
}

@property (nonatomic, strong) NSMutableArray *jsonData;

@end 
```

**第一视图控制器.m**

```
@synthesize jsonData;

NSURL *url = [NSURL URLWithString:@"http://search.twitter.com/search.json?q=coredata"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
self.json = [NSJSONSerialization JSONObjectWithData:response options:0 error:&jsonParsingError];

SecondViewController *secondViewController = [[SecondViewController alloc] init];
secondViewController.secondJSON = [self jsonData];
[[self navigationController] pushViewController:secondViewController animated:YES]; 
```

**SecondViewController.h**

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController
{
    NSMutableArray *secondJSON;
}

@property (nonatomic, strong) NSMutableArray *secondJSON;

@end 
```

**第二视图控制器.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"%@", [self secondJSON]);
} 
```

**输出**

```
2013-02-03 00:16:17.749 Subscription[24669:c07] (null) 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:05:06.363

也许`[[[UIApplication sharedApplication] delegate] json]`？

（并且请***不要在应用程序启动时在主线程上发送同步请求！***）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T06:12:03.720

首先，如果您使用的是 ARC，请更改

```
@property (nonatomic, retain) NSMutableArray *json; 
```

到

```
@property (nonatomic, strong) NSMutableArray *json; 
```

因为保留使您对弱的引用变得卑鄙。

第二个在您的视图控制器使用中访问

```
AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
//appDelegate.json //Your Array 
```

你为什么不直接在你的viewController中实现这个方法，AppDelegate类应该尽可能干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T06:07:41.583

您可以在您的期望视图中创建应用程序委托的实例并调用其对象。

```
AppDelegate *appDelegate = (AppDelegate*) [[UIApplication sharedApplication] 委托];
NSMutableArray *arMyArray = [NSMutableArray arrayWithArray:[appDelegate.json mutableCopy]];

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T06:10:39.207

试试这个，

```
 AppDelegate *appobj =  [[UIApplication sharedApplication] delegate];
     NSLog(@"%@",appobj.json); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-02T06:27:43.173

在要访问 json 数组的视图控制器中，像这样创建 appdelegate 的实例：

```
AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate]; 
```

然后通过使用此实例变量访问 json 数组。

```
 NSMutableArray *arMyArray = [[NSMutableArray alloc]initWithAaray:appdelegate.json]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-02T07:13:09.173

`NSMutableArray *listOfData` 在你`SecondViewController`喜欢的地方创造

```
#import <UIKit/UIKit.h>

    @interface SecondViewController : UIViewController

    @property (nonatomic, strong) NSMutableArray *listOfData;

    @end 
```

并在您导航时传递`NSMutableArray *jsonData;`给您。 （*在创建 SecondViewController 的对象*）之类的，`SecondViewController`

 ***这段代码写在** `FirstViewController`

```
 SecondViewController *lvController = [[SecondViewController alloc] init];
 lvController.listOfData = self.jsonData;
 [self.navigationController pushViewController:lvController animated:YES]; 
```

`viewDidLoad`并在方法中检查它`SecondViewController`，例如

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"My Data : %@", self.listOfData);
} 
```*

# html - 用户控制的友好 URL 是否由 Google 自动处理？

> ID：14659164
> 
> 赞同：9
> 
> 时间：2013-02-02T06:03:45.083
> 
> 标签：html, seo, web-crawler

我有一个与 Stack Overflow 完全一样的友好 URL 系统。

链接也是如此`/car/123/blue-subaru-1993`。

但由于用户可以更改列表的标题，它很快就会变成：

```
/car/123/awesome-blue-subaru-1993 
```

我担心（但不确定）如果谷歌重新索引我的网站，它现在会有两个指向相同内容的链接？或者谷歌是否完全重新索引并且会意识到以前的链接不再存在？

澄清：

1.  该网站不使用`301 Moved Permanently`

2.  `/car/123/title`使用路由配置文件映射到操作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T05:10:07.890

假设您的服务器设置正确，Google 不会有任何问题来处理这个问题。如果旧 URL 不再有效，那么您的服务器应该发送一个[404 HTTP 响应代码](http://googlewebmastercentral.blogspot.com/2011/05/do-404s-hurt-my-site.html)，或者更好的是，一个[410 已消失](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)，这将告诉 Google 找不到该页面，并且在多次收到此错误后，他们将删除此从他们的索引页面。

但是，从 SEO 的角度来看，这并不理想。任何指向您旧 URL 的链接现在都已损坏，并且不会为您的网站提供任何价值。你把它们扔掉是在自取其辱。您*应该*做的是，每当用户更改页面的 URL 时，只要请求旧 URL，就会向新 URL发送[301 重定向。](http://www.webconfs.com/how-to-redirect-a-webpage.php)这不仅会帮助用户找到他们正在寻找的页面（无论是通过质押搜索结果还是来自其他网站的链接），而且它会告诉谷歌任何指向旧 URL 的链接都应该记入新 URL。这将允许页面保留传入链接提供的所有积极的 SEO 因素。**链接就是投票**。并非所有链接都是平等的，但这并不意味着您想将它们全部丢弃。

仅供参考，如果由于某种原因旧 URL 和新 URL 都拉到同一个页面（因为您没有进行任何类型的重定向），那么您最终会遇到重复内容问题。Google 正在积极寻求清除重复的内容，它认为这些内容质量低下，如果您的网站包含足够多的重复内容，[***您的整个网站可能会受到处罚***](http://en.wikipedia.org/wiki/Google_Panda)。如果是这种情况，并且根据您的评论正在发生这种情况，您可以去实施 301 重定向，*或*使用[规范 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html). 这些告诉谷歌哪个页面被认为是“主”页面，他们会在搜索结果中显示那个页面。检查此页面的过程。Stack Overflow 使用规范的 URL，因为它们的页面可以被数千个不同的 URL 提取。这保证了谷歌知道哪一个是主要的，并防止他们出现重复的内容问题。（仅供参考，Google 看不到您在幕后执行的路由。他们只看到他们请求的 URL 及其提供的内容）。

同样值得考虑的是，如果您的 URL 不断变化，搜索引擎可能很难找到您的新页面，尤其是在您不提供重定向或规范 URL 的情况下。如果您还没有这样做，我建议您使用[XML 站点地图](http://www.sitemaps.org/)。它们易于实施，并使所有主要搜索引擎都知道您的内容的位置。

# regex - Perl 脚本拆分文件并处理然后根据大小和字符串连接

> ID：14659172
> 
> 赞同：-2
> 
> 时间：2013-02-02T06:04:21.917
> 
> 标签：regex, perl, split, concatenation, file-handling

有人可以帮我在 perl 中遵循一些逻辑，我正在使用 Windows 7。

C:\script>perl split_concatenate.pl large_file a 或 b（输入将是大文件和值 a 或 b 以供稍后处理）。

1.  检查文件是否大于 40KB（一些大小），选择是 "a" ，如果不是运行命令

命令 -i large_file.txt -o large_file_new -a

否则，如果选择是 b

命令 -i large_file.txt -o large_file_new -b

别的

如果大于 40KB+，则为每个 40KB arround 拆分文件（将是 part1），并将第一个“特定字符串”附加到 file_part2 到 part1，如果有多个“特定字符串”，将其保存以进行处理然后创建后续文件，这些文件应在下一部分中以下一个“特定字符串”结尾。（“特定字符串”以某个字符串开头，但以不同的值结尾）。所以脚本应该搜索是否有更多的“特定字符串”，在第 2 部分左右，并附加第一个可用的，如果只有一个可用，不需要任何东西只是拆分。由于文件始终应以特定字符串结尾。

然后处理相同的命令

command -i filepart1.txt -o filepart1.dat -a command -i filepart2.txt -o filepart2.dat（如果需要） -a

或者

command -i filepart1.txt -o filepart1.dat -b command -i filepart2.txt -o filepart2.dat（如果需要） -b

在此之后需要连接。

连接 filepart1.dat + filepart2.dat + filepartN =large_file.dat

我开始使用下面的代码首先找到大小，

```
#!/usr/bin/perl
    use strict;
    use warnings;
    use File::stat;

    my $filesize = stat("Full_File.txt")->size;

    print "Size: $filesize\n";

    exit 0; 
```

如果有人能帮助我学习，那就太好了。如果这是不可能的，那么@每500行文件达到40KB，所以我认为这会更容易，每500行附加下一个可用的“特定字符串”，如果文件小于1000，则拆分并处理上述命令然后只有 2 行拆分，不需要在 part2 中追加，因为它的 eof 中已经有一个。可能更容易？

更好的解释：

大文件.txt

```
xxx
xxxx
xxxx
xxxxx
var:value_var_v(1234)
xxxxxx
xxxxx
xxxxx
var:value_var_v(4567)
xxxxxxx
xxxxxx
var:value_var_v(abcd)
xxxxxxx  // first split happens here as here assume it is 40kb
xxxxxx
xxxxxxx
var:value_var_v(efgh) 
```

如果它太大，那么在第 5 行拆分，比如说`large_files_part1`. 它的结尾应该包含`var:value_var_v(1234)`. 在第 5 行之后，它应该在第 9 行再次分裂，并在最后变成`large_files_part2`并拥有`var:value_var_v(4567)`。第 3 部分将一直到第 12 行并包含`var:value_var_v(abcd)`在最后，依此类推。如果`var:value_var_v?`第一次拆分后只有一个，那么只要两个部分的行都在 500 左右，那么只有两个部分就可以了。如果主文件中有 1300 行，则需要三个拆分。每个文件的末尾应该有下一个可用的“字符串”，因此第 1001 行将是第`var:value_var_v(1234)`1000 行之后的第一行。字符串始终以 var:value_var_v 开头，以任何内容结尾。希望这很清楚。

预期输出：第一种情况：因此，如果 _part1.txt 仅出现一次字符串，则输出将是 40,000 左右

```
xxx
xxxx
xxxx
xxxxx
var:value_var_v(1234)
xxxxxx
xxxxx
xxxxx
var:value_var_v(4567)
xxxxxxx
xxxxxx
var:value_var_v(abcd)
xxxxxxx  // split happened here
var:value_var_v(efgh)

_part2.txt
xxxxxxx
xxxxx
var:value_var_v(efgh) 
```

在我对这些文件（第 1 部分和第 2 部分）进行一些处理后，我再次连接

_part1+_part2=大+文件

连接后的最终大文件：

```
 xxx
    xxxx
    xxxx
    xxxxx
    var:value_var_v(1234)
    xxxxxx
    xxxxx
    xxxxx
    var:value_var_v(4567)
    xxxxxxx
    xxxxxx
    var:value_var_v(abcd)
    xxxxxxx  // split happened here
    var:value_var_v(efgh)
    ****
  xxxxxxx
  xxxxx
  var:value_var_v(efgh) 
```

第二种拆分和连接案例：

如果该文件太大，比如 80KB 并且在第一次拆分 @40KB 后有很多字符串“var:value_var()，请进行后续拆分，它会看到下一个字符串将再次为“var:value_var_v()”并进行拆分，基于字符串，否则基于大小。每次文件 pat 都应该包含下一个可用的 var:value_var_v()。

原始文件：

```
 xxx
    xxxx
    xxxx
    xxxxx
    var:value_var_v(1234)
    xxxxxx
    xxxxx
    xxxxx
    var:value_var_v(4567)  
    xxxxxxx 
- - // assume now split happens here as here assume it is 40kb there are two more strings starting with var:value_var_v, split after var:value_var_v(abcd) and print this string in previous parts eof. Then final part will be ending with var:value_var_v(efgh). keep as it is.
    xxxxxx
    xxxxxx
    xxxxx
    var:value_var_v(abcd)
    xxxxxxx  
    xxxxxx
    xxxxxxx
    var:value_var_v(efgh)

part1.txt 
   xxx
    xxxx
    xxxx
    xxxxx
    var:value_var_v(1234)
    xxxxxx
    xxxxx
    xxxxx
    var:value_var_v(4567)  
    xxxxxxx - - // split happens here as here assume it is 40kb
    var:value_var_v(abcd) - //prints next available string which is var:value_var_v(abcd)
    _part2.txt
    xxxxxx
    xxxxxx
    xxxxx
    var:value_var_v(abcd)  

// Here part1 and part2 ends with same string.

    _part3.txt
    xxxxxxx  
    xxxxxx
    xxxxxxx
    var:value_var_v(efgh) - This is last part and size should be below 40KB 
```

处理所有这些 part1,part2,part3 然后连接到一个大文件。

连接后的最终文件

完整的填充看起来像。

```
xxx
    xxxx
    xxxx
    xxxxx
    var:value_var_v(1234)
    xxxxxx
    xxxxx
    xxxxx
    var:value_var_v(4567)  
    xxxxxxx // split happened here in the first split assumed 40KB 
    var:value_var_v(abcd) 
      ******
    xxxxxx
   xxxxxx
    xxxxx
    var:value_var_v(abcd)  
     ******
   xxxxxxx  
    xxxxxx
    xxxxxxx
    var:value_var_v(efgh)
   ****** 
```

PS：一旦我在每个部分得到处理结束，我就会得到一个唯一的值，并在连接期间保留它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:41:54.790

我认为这非常接近您想要的。

```
my $part_string = 'var:value_var_v';
my $file_count = 1;
my $total_length = 0;
my $max_length = 40000;

open (my $input, '<', $input_filename);
open (my $output, '>', "${output_filename}_part_${file_count}");
while (my $line = <$input>) {
  print $output $line;
  $total_length += length($line);
  if ($total_length > $max_length) {
    print $output "$part_string$file_count\n";
    close $output;
    $file_count++;
    open ($output, '>', "${output_filename}_part_${file_count}");
    $total_length = 0;
  }
}
if ($total_length > 0) {
  print $output "$part_string$file_count\n";
}
close $output; 
```

# cocoa - 制作 nstextfield 单行

> ID：14659185
> 
> 赞同：20
> 
> 时间：2013-02-02T06:06:28.967
> 
> 标签：cocoa, interface-builder, line, multiline, nstextfield

如何使 NSTextField 真正单行？

我以编程方式创建了一个文本字段。当按下返回键时，所有文本都被选中。但我仍然可以粘贴多行文本。当我按右箭头或下箭头时，它会滚动到下一行。

如果我使用 IB 并设置“使用单行模式”，则不存在这些问题，但我找不到正确的方法来以编程方式设置它。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-03T16:34:23.887

您是否尝试过告诉[该字段的单元格](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/instm/NSControl/cell)设置[它是否使用单行模式](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSCell_Class/Reference/NSCell.html#//apple_ref/occ/instm/NSCell/setUsesSingleLineMode%3a)？

```
[myTextField.cell setUsesSingleLineMode:YES]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-06T12:53:28.400

在以编程方式创建控件时，这对我有用：

```
[myTextField.cell setWraps:NO];
[myTextField.cell setScrollable:YES]; 
```

请记住，自 OS X 10.10 引入以来，不鼓励直接访问 NSControl 的单元格：

> 逐步弃用 NSCell
> 
> Mac OS X 10.10 朝着最终弃用单元格又迈出了一步。不鼓励直接访问控件的单元格，并且允许它的方法将在后续版本中正式弃用。为了提供对重要功能的无单元访问，已将各种单元级 API 提升到各种 Control 子类。NSLevelIndicator、NSTextField、NSSearchField、NSSlider 和 NSPathControl 都有用于此目的的新属性。现在不推荐使用基于单元格的 NSTableView，而应该使用基于视图的 NSTableView。基于矩阵的 NSBrowsers 也被弃用，取而代之的是基于项目的界面。

[https://developer.apple.com/library/mac/releasenotes/AppKit/RN-AppKit/](https://developer.apple.com/library/mac/releasenotes/AppKit/RN-AppKit/)

# api - 是否有代表任何 API 的标准方法？

> ID：14659187
> 
> 赞同：0
> 
> 时间：2013-02-02T06:06:32.997
> 
> 标签：api, notation

我想要一个符号来帮助我可视化任何 API（应用程序编程接口）。到目前为止，我发现的最好的是 rfc 5234 中提到的增强 BCNF 表示法。这有标准吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:37:15.653

BNF 用于指定语法。与语言无关的 API 规范只是关于语义，而不是语法。您可以只使用一个简单的函数调用表示法，就像在[RFC 793](http://www.ietf.org/rfc/rfc793.txt)的第 3.8 节中指定 TCP 的方式一样。

# c# - 禁用表单的透明度

> ID：14659189
> 
> 赞同：5
> 
> 时间：2013-02-02T06:06:38.813
> 
> 标签：c#, winforms, transparency

我正在开发一个 winforms 应用程序，我的一个表单已`TransparencyKey`设置为`White`透明`TextBoxes`，如下所示：

![在此处输入图像描述](../Images/324e0f14a165b1b44f90c56960c327e2.png)

我想禁用这种透明度，我尝试改变`TransparencyKey`它的工作但破坏了另一种颜色。如何***禁用***表单的透明度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T06:24:28.833

只需将 Forms[`AllowTransparency`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.allowtransparency.aspx)属性设置为 False。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T06:09:46.057

在窗体的属性表中，右键单击`TransparencyKey`并选择`Reset`。

![VSTK](../Images/7d3fdb23d40d021016fec70490a2167c.png)

如果做不到这一点，请尝试设置`TransparencyKey`为未使用的颜色。

# android - iPhone上的标签：没有滚动条

> ID：14659197
> 
> 赞同：2
> 
> 时间：2013-02-02T06:08:27.540
> 
> 标签：android, iphone, html

这是我网站中 .php 文件上的 HTML 代码

```
<EMBED name="Sample_Name" src="kebabdelight1.pdf" style="width:640px;height:700px;overflow: auto;"></EMBED> 
```

此代码在台式机和笔记本电脑浏览器上显示了正确的滚动条......但不适用于 android 和 iPhone 设备。请帮助我...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:39:33.663

我相信作为默认行为，您无能为力，但您可以尝试使用以下命令强制滚动条：

```
 overflow-y: scroll; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:26:27.657

我发现解决这个问题的最简单方法是，通过集成插件，如***`scribd`***or ***`crocodoc`***，在网站上显示您的文档，而不用关心我们的网站在哪个平台上运行......就是这样。

# php - PHP 在图像文件上传时出现“未定义索引”错误 使用 v 类上传

> ID：14659199
> 
> 赞同：1
> 
> 时间：2013-02-02T06:08:43.087
> 
> 标签：php, file-upload, image-uploading, image-resizing

我正在使用 php 类上传 [http://www.verot.net/php_class_upload.htm](http://www.verot.net/php_class_upload.htm)

我想要并尝试上传图像文件并调整其大小。但是当我点击保存按钮时出现了一些问题。

> 注意：未定义索引：第 47 行 C:\xampp\htdocs\projects\pakistanihaider\admin\profile.php 中的 profilepic

这是我到目前为止所做的

**HTML** 我的表单标签：

```
<form class="form-horizontal row-fluid" enctype="multipart/form-data" method="post" action="<?php $_PHP_SELF ?>"> 
```

输入文件标签：

```
 <?php //Profile Picture ?> 
        <div class="form-row control-group row-fluid">
          <label class="control-label span3" for="search-input">Profile Picture</label>
          <div class="controls span7">
            <div class="input-append row-fluid">
              <input type="file" name="profilepic" class="spa1n6 fileinput" value="<?php echo $showprofilepic; ?>" id="search-input">
              </div>
          </div>
        </div> 
```

**PHP** 对于类上传，我包含了类 php 文件。

```
error_reporting(E_ALL);

// we first include the upload class, as we will need it here to deal with the uploaded file
include('./include/imageupload/class.upload.php'); 
```

其次我使用了这个，因为我不知道他们为什么使用它，但他们在演示页面中使用了这个 php

```
//Picture/File Upload Function
// retrieve eventual CLI parameters
$cli = (isset($argc) && $argc > 1);
if ($cli) {
    if (isset($argv[1])) $_GET['file'] = $argv[1];
    if (isset($argv[2])) $_GET['dir'] = $argv[2];
    if (isset($argv[3])) $_GET['pics'] = $argv[3];
}

// set variables
$dir_dest = (isset($_GET['dir']) ? $_GET['dir'] : '../userUploads/profile-pictures');
$dir_pics = (isset($_GET['pics']) ? $_GET['pics'] : $dir_dest); 
```

现在如果单击表单按钮的主要代码..

```
if(isset($_POST['savebtn'])){

$full_name = $_POST['full_name'];
$job_title = $_POST['job_title'];
$email = $_POST['email'];
$dob = $_POST['dob'];
$mobile = $_POST['mobile'];
$phone = $_POST['phone'];
$nationality = $_POST['nationality'];
$profile_image = $_POST['profilepic'];
$address = mysql_real_escape_string($_POST['address']);
$about_me = mysql_real_escape_string($_POST['aboutme']);

$last_updated = date('F j, Y, g:i a');

// ---------- IMAGE UPLOAD ----------

    // we create an instance of the class, giving as argument the PHP object
    // corresponding to the file field from the form
    // All the uploads are accessible from the PHP object $_FILES
    $handle = new Upload($_FILES['profilepic']);

    // then we check if the file has been uploaded properly
    // in its *temporary* location in the server (often, it is /tmp)
    if ($handle->uploaded) {

        // yes, the file is on the server
        // below are some example settings which can be used if the uploaded file is an image.
        $handle->image_resize            = true;
        $handle->image_ratio_y           = true;
        $handle->image_x                 = 300;

        // now, we start the upload 'process'. That is, to copy the uploaded file
        // from its temporary location to the wanted location
        // It could be something like $handle->Process('/home/www/my_uploads/');
        $handle->Process($dir_dest);

        // we check if everything went OK
        if ($handle->processed) {
            // everything was fine !

            $uploadresult = '  <b>File uploaded with success</b><br />';
            $uploadresult .= '  <img src="'.$dir_pics.'/' . $handle->file_dst_name . '" />';
            $info = getimagesize($handle->file_dst_pathname);
            $uploadresult .= '  File: <a href="'.$dir_pics.'/' . $handle->file_dst_name . '">' . $handle->file_dst_name . '</a><br/>';
            $uploadresult .= '   (' . $info['mime'] . ' - ' . $info[0] . ' x ' . $info[1] .' -  ' . round(filesize($handle->file_dst_pathname)/256)/4 . 'KB)';

        } else {
            // one error occured

          $uploadresult = '  <b>File not uploaded to the wanted location</b><br />';
          $uploadresult .= '  Error: ' . $handle->error . '';

        }

        // we now process the image a second time, with some other settings
        $handle->image_resize            = true;
        $handle->image_ratio_y           = true;
        $handle->image_x                 = 300;
        $handle->image_reflection_height = '25%';
        $handle->image_contrast          = 50;

        $handle->Process($dir_dest);

        // we check if everything went OK
        if ($handle->processed) {
            // everything was fine !

            $uploadresult2 = '  <b>File uploaded with success</b><br />';
            $uploadresult2 .= '  <img src="'.$dir_pics.'/' . $handle->file_dst_name . '" />';
            $info = getimagesize($handle->file_dst_pathname);
            $uploadresult2 .= '  File: <a href="'.$dir_pics.'/' . $handle->file_dst_name . '">' . $handle->file_dst_name . '</a><br/>';
            $uploadresult2 .= '   (' . $info['mime'] . ' - ' . $info[0] . ' x ' . $info[1] .' - ' . round(filesize($handle->file_dst_pathname)/256)/4 . 'KB)';

        } else {
            // one error occured

            $uploadresult2 = '  <b>File not uploaded to the wanted location</b><br />';
            $uploadresult2 .= '  Error: ' . $handle->error . '';

        }

        // we delete the temporary files
        $handle-> Clean();

    } else {
        // if we're here, the upload file failed for some reasons
        // i.e. the server didn't receive the file

        $failedupload = '  <b>File not uploaded on the server</b><br />';
        $failedupload .= '  Error: ' . $handle->error . '';

            }

$success = update_profile($full_name, $dob, $nationality, $address, $mobile, $phone, $job_title, $about_me, $profile_image, $last_updated, $email);

} 
```

我现在没有使用 image 来更新数据库，这就是为什么我没有在`update_profile`函数中使用 image 变量。

现在的问题是，每当我单击保存按钮时，我都会得到`undefined index`??

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:14:57.093

只需删除此行

```
$profile_image = $_POST['profilepic']; 
```

在主代码中。

文件在 _FILES 数组中发送，因此未在 _POST 中设置，您会收到通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:15:11.740

您需要使用`isset()`来查看表单元素是否已填写。

该`Undefined index`通知意味着您正在访问一个不存在的数组项。例如：

```
$arr = array('a' => 'x', 'b' => 'y');
$c = $arr['c'];
// Notice: Undefined index... 
```

为了避免通知，您需要先检查它是否存在：

```
if (isset($arr['c'])) {
    $c = $arr['c'];
} else {
    $c = FALSE;
} 
```

# android - 如何将 Android SQlite 数据库替换为日常外部创建的新数据库？

> ID：14659201
> 
> 赞同：1
> 
> 时间：2013-02-02T06:08:52.660
> 
> 标签：android, database, sqlite

我正在尝试开发一个将使用外部创建的 SQLite 数据库的 Android 应用程序。所需的应用程序运行周期如下：

1.  数据库会定期（每天）在外部（Windows 桌面）机器上重新创建并填充数据（来自另一个数据库）。
2.  然后将该数据库通过 USB 或 WIFI 推送到 Android 设备中。
3.  新推送的数据库用于在 Android 设备上输入新数据。输入的记录被标记（以将它们与现有记录区分开来）。
4.  最终，数据库从 Android 设备拉回 Windows 桌面计算机（此过程需要由 Windows 应用程序启动，而不是由 Android 应用程序启动）。
5.  新的（标记的）记录从 Windows 桌面上的 SQLite 数据库中提取、验证并添加到主 Windows 桌面数据库中。
6.  然后将更新后的完整桌面数据库复制到新的 SQLite 数据库中，最后将其推回 Android 设备（参见第 1 点和第 2 点）。

笔记：

1.  项目清单
2.  Android 应用程序无法在 Android 设备上创建 SQLite 数据库。
3.  将外部创建和填充的数据库放在 apk 的 assets 目录中是不可行的，因为这仅适用于初始应用程序安装，并且无法满足日常数据库推/拉例程的关键要求。
4.  从 Web 服务器存储/导入 SQLite 数据库是不可行的，因为用户在使用此应用程序时通常无法访问互联网，即 SQLite 数据库推/拉过程需要在连接到独立的 Android 上完成Windows 机器通过 USB 或 WIFI。
5.  首选是从 Android 内部存储区域（或 SDCard）存储和访问数据库，但在隐藏/受保护的内部根存储部分之外，即不在 /data/data/package_name/databases/ 中，以便为用户提供可以免费访问存储在 Android 设备上的数据库文件。
6.  关键障碍似乎是 Android 应用程序对外部创建、推送的数据库的识别。我通过将应用程序创建的数据库文件复制到不同的文件夹（仍在 data/package_name/.. root 部分中）然后将其复制回 ../databases/ 文件夹来测试它。这足以扰乱应用程序对数据库的访问：尽管尝试打开相同的未更改的数据库文件，但我会收到“打开跟踪文件时出错：没有这样的文件或目录 (2)”。我想，这个限制是由于 Android 的“沙盒”文件安全保护？

如何克服上述数据库复制/推/拉问题以及如何实现这个所需的数据库访问推/拉模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:34:43.197

如果您需要 USB，[ADB](http://developer.android.com/tools/help/adb.html)会为您完成。

```
adb push <local db> <android db>

adb pull <android db> <local db> 
```

例如：

```
adb push database.db /sdcard/mypath/database.db
adb push /sdcard/mypath/database.db database.db 
```

您还可以让 Windows 机器从 Android 设备中删除数据库，如下所示：

```
adb shell rm /sdcard/mypath/database.db 
```

此外，您可以使用 adb 启动活动或广播意图，以便您可以告诉应用程序在拉动数据库之前关闭数据库并退出。

如果 Wifi 是一个选项（更好的选项），有多种方法可以通过 wifi 访问 android 设备上的数据：

*   [NanoHTTPd](http://elonen.iki.fi/code/nanohttpd/)仅使用单个 .java 文件将设备变成网络服务器。
*   [jCIFS](http://jcifs.samba.org/)允许 Android 设备访问 Windows 共享。

# linux - 什么是条带化和非条带化共享库？

> ID：14659202
> 
> 赞同：1
> 
> 时间：2013-02-02T06:09:03.733
> 
> 标签：linux, shared-libraries

当我将库和二进制文件发送到设备时，使用哪个库（条纹/非条纹）？以及如何在 ubuntu(bash shell) 中将环境变量设置为永久？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:33:48.213

您的意思是“剥离”，而不是“剥离”。剥离意味着删除调试所需的额外信息，例如告诉调试器变量和内部函数所在位置的符号表。因此，如果您使用剥离的共享库并尝试使用 gdb 对其进行调试，如果您检查属于库函数的堆栈帧，您将不会获得太多有用的信息。

要使环境变量永久化，请将其放入您`.profile`的终端会话和`.xinitrc`GUI 会话中。

# jquery - jQuery 和 AngularJS：将事件绑定到不断变化的 DOM

> ID：14659204
> 
> 赞同：12
> 
> 时间：2013-02-02T06:09:12.297
> 
> 标签：jquery, angularjs

在 AngularJS 的 DOM 中，我在 ng-repeat 指令中使用了 ng-include。它正在加载 HTML 就好了。无论如何，我遇到的一个问题是我正在使用 JQuery（最新版本）在 DOM 中的元素上绑定一些鼠标悬停和鼠标单击事件，这些事件与通过 ng-repeat 和 include 添加到 DOM 的类相同。不过，JQuery 似乎没有将事件处理程序应用于新的 DOM 添加。

在以前的版本中 .live() 似乎做了我想要的，但它已在最新版本中被删除。每次 DOM 添加了类的其他元素时，我是否应该清除元素上的绑定并重新创建它们？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-04T20:44:38.363

在这里回答：

这是一个多方面的问题。首先，所有 jQuery 代码事件都应该使用 $scope.$apply 来按预期执行 angularjs 代码。例子：

```
jQuery(selector).someEvent(function(){
    $scope.$apply(function(){
      // perform any model changes or method invocations here on angular app.
    });
}); 
```

在最新版本的 jQuery 中，为了让事件根据 DOM 更改进行更新，您需要 1\. 获取最近父元素的选择器（例如）：

```
<div class="myDiv">
<div class="myDynamicDiv">
</div>
<!-- Expect that more "myDynamicDiv" will be added here -->
</div> 
```

在这种情况下，您的父选择器将是“.myDiv”，而您的子选择器将是 .myDynamicDiv。

因此，您希望 jQuery 将事件放在元素的 PARENT 上，因此如果子元素发生更改，它仍然可以工作：

```
$('.myDiv').on("click", ".myDynamicDiv", function(e){
      $(this).slideToggle(500);
      $scope.$apply(function(){
           $scope.myAngularVariable = !$scope.myAngularVariable;
      });
}); 
```

请注意，使用 $scope.$apply() 是为了使 jQuery 能够访问这些角度变量。

希望这可以帮助！基督教

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T11:28:04.127

*免责声明：我自己一直在学习角度，所以这些基本上只是半知半解的猜测。*

首先，考虑使用 Bertrand 和 Mark 所述的工作角度指令。

其次，确保 jquery 在 angular 之前加载，请参见[此处](https://groups.google.com/forum/?fromgroups=#!topic/angular/6A3Skwm59Z4)。

第三，这可能是一个（动态）绑定问题，请参见[此处](https://stackoverflow.com/questions/11771513/angularjs-jquery-how-to-get-dynamic-content-working-in-angularjs)。

请反馈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-03T09:56:01.310

克里斯蒂安·斯图尔特（Christian Stewart）已经很好地回答了这个问题，但我只是想在他的回答中添加一些内容。

我使用以下代码，并将“ `cssClickableIcon`”类添加到我的按钮中，这样当用户单击按钮（或`div`控件）时，它会稍微向内 *收缩。*

[![在此处输入图像描述](../Images/46588ce0f88c7cd8d2917d2c116aa2d8.png)](https://i.stack.imgur.com/EPCeO.png)

这是一个小小的调整，但对网页的效果非常好。你真的觉得网页更具交互性，而不是平面，并且你*点击*了控件。

```
//  Make the buttons "bounce" when they're clicked on
$('body').on("mousedown", ".cssClickableIcon", function (e) {
    $(this).css("transform", "scale(0.9)"); 
});
$('body').on("mouseup", ".cssClickableIcon", function (e) {
    $(this).css("transform", "");
}); 
```

因为这使用了 jQuery 的`on`函数，所以**它确实**`ng-repeat`适用于由 AngularJS命令创建的按钮或其他 DOM 元素。

当然，如果您使用的是 Bootstrap 自己的按钮 CSS 类，您可以使用以下命令轻松地在所有 Bootstrap/Angular 按钮中添加此效果：

```
$('body').on("mousedown", ".btn", function (e) {
    $(this).css("transform", "scale(0.9)"); 
});
$('body').on("mouseup", ".btn", function (e) {
    $(this).css("transform", "");
}); 
```

我非常喜欢这种效果，而且添加起来非常简单！

**更新**

Christian Stewart 建议使用 CSS 而不是 jQuery，他是绝对正确的......

因此，您可以使用这个简单的 CSS 来实现相同的效果：

```
.btn:active {
    transform: scale(0.9);
} 
```

# iphone - uitoolbar 中的完成按钮

> ID：14659207
> 
> 赞同：1
> 
> 时间：2013-02-02T06:09:42.260
> 
> 标签：iphone, uitoolbar

无论如何要限制 uitoolbar 中的完成按钮的框架。我希望它定位在右侧。我面临的问题是，即使我在 uitoolbar 中的完成按钮之外点击，完成按钮的操作也会被调用。我希望只有当用户点击它时才会调用完成操作。谁能告诉我我应该在下面的代码中做什么。

```
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneWriting:)];

UIBarButtonItem *flexible = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
//flexible.width=310;
[toolBar setItems:[NSArray arrayWithObjects:flexible,doneButton, nil]];
[doneButton release];
[flexible release];

labelItems = [[UITextView alloc] initWithFrame:(IS_IPAD ? CGRectMake(20, 5, 550, 70) : CGRectMake(10, 0, 223, 40))];
labelItems.delegate=self;
labelItems.font = [UIFont fontWithName:@"Arial" size:(IS_IPAD ? 33 : 15)];
labelItems.inputAccessoryView = toolBar; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:31:28.887

在 UIBarButtonItem 中使用 UIbutton。

请看这个链接

[栏按钮项以编程方式添加工具栏](https://stackoverflow.com/questions/10444104/bar-button-item-add-toolbar-programetically)

谢谢

# java - java arraylist 迭代具有 ClassCastException

> ID：14659209
> 
> 赞同：-2
> 
> 时间：2013-02-02T06:09:52.977
> 
> 标签：java, spring, hibernate, arraylist

我有模型课：

```
public class RecordSet {
    private DateRange daterange;
    private Master master;
    public DateRange getDaterange() {
        return daterange;
    }
    public void setDaterange(DateRange daterange) {
        this.daterange = daterange;
    }
    public Master getMaster() {
        return master;
    }
    public void setMaster(Master master) {
        this.master = master;
    }
}

public class DateRange {
    private Date ddate;

    public Date getDdate() {
        return ddate;
    }

    public void setDdate(Date ddate) {
        this.ddate = ddate;
    }

}

public class Master  {

    private String empcode;
    private String empname;
    private String dept;

    public String getEmpcode() {
        return empcode;
    }
    public void setEmpcode(String empcode) {
        this.empcode = empcode;
    }
    public String getEmpname() {
        return empname;
    }
    public void setEmpname(String empname) {
        this.empname = empname;
    }
    public String getDept() {
        return dept;
    }
    public void setDept(String dept) {
        this.dept = dept;
    }

} 
```

我有这样的声明

```
List<RecordSet> list = (List<RecordSet>) query.list(); 
```

当上面的语句得到执行时，我得到了列表对象并且每个对象都包含两个项目（Master，DateRange）？

任何人都可以如何获得这两个模型类对象

**我试过但面临类转换异常：**

```
List<RecordSet> list = (List<RecordSet>) query.list();
            for(int i=0;i<list.size(); i++){
                Object set=list.get(i);
                Master masetr=(Master)set;

                System.out.println(masetr);
                } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:22:56.080

```
You can't cast them if they are not realted . 
```

您要转换的对象的类和您要转换的类必须通过继承相关；也就是说，您只能将对象强制转换为其类的子类或超类的实例，而不是任何随机类。

`Side note`: 在类层次结构中向下转换是自动的，但向上转换不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:19:26.950

试试这样：

```
List<Object> list = query.list();
for(Object obj:list){
   RecordSet rs = (RecordSet)obj;
   Master ms = rs.getMaster();
   System.out.println(ms.getEmpCode()); //all things you need to print
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T06:29:26.393

尝试这样的事情：

```
for (Object obj : query.getResultList()) {
    Object[] objArray = (Object[]) obj;
    Master ms = new Master();
    ms.setxxxx(objArray[0].toString());
    ms.setxxxx(objArray[1].toString());
    list.add(ms); 
```

# .net - 使用 printdocument 增加每次迭代的纸张高度

> ID：14659210
> 
> 赞同：0
> 
> 时间：2013-02-02T06:10:06.957
> 
> 标签：.net, c#-4.0, printing, printdocument

我使用 printdocument 进行打印输出。我想在添加每一行后增加纸张的大小。[我在这里](https://stackoverflow.com/questions/4064103/print-on-continuous-paper-using-c-sharp)和[这里](https://stackoverflow.com/questions/4365360/printing-on-roll-paper)发现了一个类似的问题。但解决方案不起作用。我正在使用 Component 类来覆盖 Printdocument 的基本方法，并在 OnBeginPrint 事件中设置页面大小

```
int pageHt = 288, pageWt = 314;
protected override void OnBeginPrint(System.Drawing.Printing.PrintEventArgs e)
        {
            // Run base code
            base.OnBeginPrint(e);
            base.DefaultPageSettings.PaperSize = new PaperSize("Custom", pageWt, pageHt);
            base.DefaultPageSettings.Landscape = false;
        } 
```

然后对于每次迭代我试图增加纸张高度

```
base.DefaultPageSettings.PaperSize.Height += 22; 
```

但纸张高度不会增加。帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:10:48.023

经过两天的努力，我找到了这个问题的答案。这很简单

```
public void PrintEstimate(PrintPageEventArgs e)
{
  e.PageSettings.PaperSize = new PaperSize("Custom", pageWt, pageHt);//initialize the height and width of the page
  foreach(.. )
  {   
    /* ...
     Write the loop here
     ...
     ...
   */
     e.PageSettings.PaperSize.Height = e.PageSettings.PaperSize.Height + 22;// foreach iteration, increment the page height.
   }
} 
```

# c - 使用 C 进行插入排序

> ID：14659219
> 
> 赞同：1
> 
> 时间：2013-02-02T06:11:54.947
> 
> 标签：c

Objective: 使用插入排序对指针数组进行降序排序。同时，当指针数组被排序时，指针指向的数组也会随之排序。

```
void insert(int **table, int row)

{

//  Local Declaration

    int temp, current, walker;

    //  Statement
    for(current = 1; current < row; current++)
    {
        temp = *table[current];
        walker = current - 1;
        while(walker >= 0 && temp > *table[walker])
        {
            *table[walker + 1] = *table[walker];
            walker--;
        }
        *table[walker + 1] = temp;
    }

return;

} 
```

样本输出：

```
Before insertion sort:

1 -66

2 51 0

3 68 61 37

4 91 80 31 -9

5 59 42 -15 -19 -75

After insertion sort:

5 -66 -59 134218571 4132481 0

4 51 0 31 131357707

3 68 61 37

2 91 80

1 59 
```

我应该创建每个数组的副本，并且当我使用插入排序交换数组时，还是有更有效的方法来完成任务？

完整的程序：

```
/*********************************************************************************
** CIS 15BG                                                           Winter, 2013
***************
**
** Homework 3:
**        Pointers, Dynamic Allocation of Memory, Ragged Arrays, and Sorting
**
**********************************************************************************

  This program creates a dynamic table that can store a ragged 2D array
  of integers, sorts each row then rearranges them by length

***************************************************************************/

#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#ifdef _MSC_VER
#include <crtdbg.h>  // needed to check for memory leaks (Windows only!)
#endif

#define MEM_ERROR printf("Not enough memory\n")

int** getRow(int *row);
void valiRow(int *row);
void getSize(int **table, int row);
int  valiSize(int size);
void fillTable(int **table, int row);
void bubble(int **table, int row);
void insert(int **table, int row);
void save(int **table, int row);

int main (void)
{
    //  Local Declaration
    int **table;
    int row;

    //  Statement
    table = getRow(&row);
    getSize(table, row);
    fillTable(table, row);
    bubble(table, row);
    insert(table, row);

    #ifdef _MSC_VER
    printf( _CrtDumpMemoryLeaks() ? "Memory Leak\n" : "No Memory Leak\n");
    #endif
    return 0;

}// main

/* getRow */
int** getRow(int *row)
{
    //  Local Declaration
    int **table;

    //  Statement
    printf("Please enter the number of rows (1-10): ");
    scanf("%d", &*row);

    valiRow(&*row);

    table =(int**)calloc(*row+1, sizeof(int));
    if(table == NULL)
        MEM_ERROR, exit(100);

    return table;
}

/* valiRow */
void valiRow(int *row)
{
    //  Statement
    while(*row > 10 || *row < 1)
    {
        while(getchar() != '\n')
        ;
        printf("Please enter a number between (1-10): ");
        scanf("%d", &*row);
    }

    return;
}
/* getSize */
void getSize(int **table, int row)
{
    //  Local Declaration
    int i, size;

    //  Statement
    for(i = 0; i < row; i++)
    {
        printf("<ROW %2d> Please enter a size (1-15): ", i + 1);
        scanf("%d", &size);

        size = valiSize(size);

        table[i] = (int*)calloc(size + 1, sizeof(int));
        table[i][0] = size;
    }

    if(table == NULL)
        MEM_ERROR, exit(101);

    return;
}

/* valiSize */
int valiSize(int size)
{
    //  Statement
    while(size > 15 || size < 1)
    {
        while(getchar() != '\n')
        ;
        printf("Please enter a valid size (1-15): ");
        scanf("%d", &size);
    }

    return size;
}

/* fillTable */
void fillTable(int **table, int row)
{
    //  Local Declaration
    int random, i, j;

    //  Statement
    srand(time(NULL));
    for(i = 0; i < row; i++)
    {
        for(j = 0; j < (table[i][0]) + 1; j++)
        {
            random = -99 + rand() % 199;
            table[i][j + 1] = random;
        }
    }

    return;
}

/* bubble */
void bubble(int **table, int row)
{
    //  Local Declaration
    int current, last, walker, temp;
    int i, j;
    //  Statment

    for(i = 0; i < row; i++)
    {
        last = table[i][0];
        for(current = 1; current < last; current++)
        {
            for(walker = last; walker > current; walker--)
            {
                if(table[i][walker] > table[i][walker - 1])
                {
                    temp = table[i][walker];
                    table[i][walker] = table[i][walker - 1];
                    table[i][walker - 1] = temp;
                }
            }
        }
    }

    return;
}

/* insert */
void insert(int **table, int row)
{
    //  Local Declaration
    int temp, current, walker;

    //  Statement
    for(current = 1; current < row; current++)
    {
        temp = *table[current];
        walker = current - 1;
        while(walker >= 0 && temp > *table[walker])
        {
            *table[walker + 1] = *table[walker];
            walker--;
        }
        *table[walker + 1] = temp;
    }

    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:19:58.017

您应该在插入函数中交换指针交换第一个元素（大小）的值并不意味着交换数组的剩余元素。

```
void insert(int **table, int row)
{
    //  Local Declaration
    int *temp, current, walker;

    //  Statement
    for(current = 1; current < row; current++)
    {
        temp = table[current];
        walker = current - 1;
        while(walker >= 0 && *temp > *table[walker])
        {
            table[walker + 1] = table[walker];
            walker--;
        }
        table[walker + 1] = temp;
    }

    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:28:58.920

memmove() 是你的朋友：

```
#include <stdio.h>
#include <string.h> /* for memmove() */

void insertion_sort(int **table, size_t cnt);
void insertion_sort(int **table, size_t cnt)
{
    int *tmp;
    size_t src,dst;

    for(src = 1; src < cnt; src++)
    {
        tmp = table[src];
        for(dst=src; dst-- > 0 && *tmp < *table[dst]; ) {;}
                /* when we get out of the loop, 
                ** table[dst] is the element BEFORE our insertion point,
                ** so re-increment it to point at the insertion point */
        if (++dst == src) continue;

        memmove(table+dst+1,table+dst, (src-dst) * sizeof  table[0] );
        table[dst] = tmp;
    }

return 0;
}

int array[5] = { 11,12,13,14,15};
int *ptrs[5] = { array+3, array+0, array+4, array+2, array+1 };
int main (void)
{
size_t idx;
insertion_sort(ptrs, 5);

for (idx=0; idx < 5; idx++) {
        printf  ("[%zu] : %p: %d\n"
                , idx, (void*) ptrs[idx], *ptrs[idx]
                );

        }
return 0;
} 
```

# ruby - 通过 javascript 调用 ruby 哈希

> ID：14659222
> 
> 赞同：0
> 
> 时间：2013-02-02T06:12:03.817
> 
> 标签：ruby

下面的文件在.html.erb中说它需要旧的。

```
 <%

        mash = {
          "id" => id, "legends" => legends, "x_units" => x_units, "y_units" => y_units, "data" => data, "alertPoints" => alert_points, "time_mode" => time_mode, 
          "colors" => colors, "x_label" => x_label, "y_label" => y_label, "tipColors" => tipColors, "dateformat" => @dateformat, "timeformat" => @timeformat, 
          "chart_url" => chart_url, "x_label_date_format" => x_label_date_format, "turn_series" => turn_series, "y_ticks_array" => y_ticks_array, "y_label_width" => y_label_width,
          "series_type" => series_type,"vertical_threshold" => vertical_threshold, "x_label_suffix" => x_label_suffix, "y_tick_on" => y_tick_on, "xmin" => xmin, "xmax" => xmax
          }
        %>

            <script type="javascript">

                  setInterval(    function ()
                 {
                 onDataReceived(<%=mash.to_json.html_safe%>);

                 }, 5000);
              </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:05:24.843

问题是`mash`在呈现页面时评估一次，因此一次又一次地使用 erb 总是会产生相同的结果。如果您想要新数据，您可能需要使用 AJAX 请求它。

[在 Rails 中，如何使用视图呈现 JSON？](https://stackoverflow.com/questions/2088280/in-rails-how-do-you-render-json-using-a-view)

使用 jQuery 进行 ajax 调用的文档：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

前任：

```
setInterval(function() { 
  $.get('route/to/mash.json', function(data) {
     onDataReceived(data);
  });
}, 5000); 
```

# architecture - 多层架构中的默认函数值

> ID：14659225
> 
> 赞同：5
> 
> 时间：2013-02-02T06:12:47.203
> 
> 标签：architecture, default, dry, three-tier, least-astonishment

想知道在多层应用程序结构中设置默认值的最佳方式。具体来说，如果某个工作流程需要一组嵌套的函数调用，是在*所有*函数上指定默认值，还是仅在顶层函数上指定并向下传递？还是完全是其他模式？

例如，考虑一个具有 3 层的 Web 应用程序：

*   资源层处理 HTTP 请求和响应，从客户端获取 HTTP 参数
*   业务层执行确定需要哪些信息所需的业务逻辑
*   数据层访问数据库并返回请求的数据。

假设客户想要获得一个对象——对于这个例子，假设它是一个`Place`对象。地点对象有一个`type`——城市、州、镇、县等。

资源函数可能如下所示（使用 Django HTTP 对象）：

```
def resource_get_place(request, type=None):
    """ Gets a place of the specified type, or a place of any type if
     type is None """

   place = business_get_place(type=type)

   return HttpResponse(request, {
       "place" : place
   } 
```

那么另外两个可能是：

```
def business_get_place(type):
    # Trivial in this case, used for consistency
    return data_get_place(type)

def data_get_place(type):
    # Get a place of specified type from the cache, or db,
    # or wherever else.  If type is None, get place of any type.
    return place 
```

**这个堆栈中资源层“下方”的两个函数是否也应该默认类型为无？** 我的一部分认为这样做会违反 DRY。我的另一部分认为，最可预测和模块化的方法是堆栈中的*每个*函数都将默认类型“明智地”设置为 None。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:02:10.940

我实际上会在需要默认而不是最高级别的最低级别进行默认设置。

从必要性的角度来看——就资源层而言，“类型”是可选的。您的业​​务层也是如此——那里没有需要类型值的逻辑。直到您深入到数据层，才需要默认值并且具有任何意义。

无论从“上方”调用什么，每一层中的函数都需要能够工作。因此，如果您的数据层需要某种类型的“类型”值（并且无论是谁调用它，都有一个有意义的默认值），那么将默认值放在数据层中。

如果您想保持一致，那么在较高层中指定默认值也没有错。也许如果您的某些业务层功能的逻辑需要为传递到数据层的任何内容提供值，您可以为该层中的所有功能设置默认值。但是，我真的认为没有必要。

关键是默认值会出现在实际需要的地方。

# java - Jackson 反序列化 json Map - Map > 作为一个对象

> ID：14659231
> 
> 赞同：1
> 
> 时间：2013-02-02T06:13:27.683
> 
> 标签：java, android, jackson

我有以下 JSON：

```
{
    "Live": {
        "Saerro (AU)": {
            "status": "low",
            "age": "00:01:17"
        },
        "Connery (US West)": {
            "status": "medium",
            "age": "00:02:26"
        }
    }
} 
```

所以 Map Live 有`Map<String,Map<String,String>>`它的价值。我需要将 Live 反序列化为对象列表，例如

```
public class Status implements Serializable {
    @JsonProperty
    public String name;
    @JsonProperty
    public String status;
    @JsonProperty
    public String age;
} 
```

是否有注释或我可以使用的东西，以便映射键和值被反序列化为一个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:09:28.550

您需要编写一个自定义反序列化器来处理这个问题。 [这](http://blog.palominolabs.com/2012/06/05/writing-a-custom-jackson-serializer-and-deserializer/)提供了一个不错的概述，并且在 stackoverflow 上还有许多其他问题涵盖了这一点，例如[这里](https://stackoverflow.com/questions/6553051/setting-up-json-custom-deserializer)。

或者，您可以让 Jackson 反序列化为 a `Map<String, Map<String, String>>`，然后将其后处理为您希望的任何形式。

# android - Android SQLite 数据库到设备

> ID：14659232
> 
> 赞同：1
> 
> 时间：2013-02-02T06:13:31.647
> 
> 标签：android, sqlite

我正在开发一个包含 2 个表的 android 应用程序。我在 DDMS 选项卡下看到了表格。这两个表包含我的应用程序的一些重要数据（例如：2000 条记录的用户名和密码）。但是当我在设备上安装我的应用程序时，我看不到表格。

此外，在设备中，当我运行我的应用程序时，它会创建一个新表。此表不包含任何记录。因此，当我检查用户名和密码时，它不会返回任何行，这会影响我的应用程序。

所以我需要在安装apk文件的时候将这两个表复制到设备中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-02T06:38:40.780

You can fetching your database tables records using

```
SQLiteDatabase myDB = this.openOrCreateDatabase("test.sqlite",
          SQLiteDatabase.OPEN_READWRITE, null);
Cursor c = myDB.rawQuery("select a, b from abc", null); 
```

# javascript - 调用 jquery/ajax 函数时出错

> ID：14659235
> 
> 赞同：0
> 
> 时间：2013-02-02T06:14:10.367
> 
> 标签：javascript, jquery, ajax, textarea

我正在尝试创建一个可以编辑 a 内容的页面，`<textarea>`当我单击提交时，它应该更新 mysql DB。当我单击提交按钮时。Firebug 给了我这个错误：

NS_ERROR_XPC_BAD_CONVERT_JS：无法转换 JavaScript 参数

谁能告诉我为什么我会收到这个错误？这是我的代码：

HTML

```
<form id="homeForm" method="post">
     <textarea cols="100" rows="20" id="hometext" name="hometext"><?php echo $pagetext ?></textarea>
     <input class="submit" type="submit" id="submit" value="Submit" />
</form> 
```

jQuery/ajax

```
$(document).ready(function(){
 $('#homeForm').submit(function(){
    var homeText = $('textarea#hometext').val();

    $.ajax({
        url: "PHPscripts/updateHomeText.php",
        type: "POST",
        data: {'hometext' : hometext},
        success: function(data) {}
    });
    return false;
 });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:22:23.923

您尝试通过`data: {'hometext' : hometext}`但未`hometext`在代码中声明。你的意思是`homeText`？

只是一个小错误。检查大小写并符合变量名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T06:22:32.800

我认为这只是因为 homeText 区分大小写。尝试改变：

```
data: {'hometext' : hometext}, 
```

到：

```
data: {'hometext' : homeText}, 
```

我也不认为你需要第一个参数周围的撇号，但我相信它会起作用。这里可能会误会。

祝你好运。

# python - 为什么我的服务的其他部分不能轻松使用美味派？我在美味派资源和我的核心服务中有重复的代码

> ID：14659238
> 
> 赞同：2
> 
> 时间：2013-02-02T06:14:36.810
> 
> 标签：python, django, api, rest, tastypie

我花了整整一周时间将美味派整合到我的项目中，现在我无法停止思考“我为什么要这样做”。

我正在使用 django 和 sweetpie（REST 框架），但我的问题可以应用于其他语言/框架。

我的要求是
1\. 移动客户端请求 json
2\. 网络客户端请求 html 和 json

所以我有

> 1.  json请求的end_point（例如，给我这个用​​户的图像）
> 2.  html请求的end_point（给我一个带有他的图像等的用户主页）
> 3.  core_service（底部）将图像字典列表返回到＃1和＃2

```
def user_image_list_json(request): # 1
   dict = service.user_image_list(request.user_id)
   return serialize_as_json(dict)

def user_home(request): #2
    #build other parts of user home such as `user name`
    dict = service.user_image_list(request.user_id)
    #stuff that dict inside html 
    #build other parts of the page
    return html_response

#3
def image_list_user(user_id, last_image_id,request_comment_count, count):
    if last_image_id is not None:
        last_image_id = int(last_image_id)
        queryset = AlbumImage.objects.select_related().filter(id__lt=last_image_id).filter(album__user_profile__user__id = user_id)
    else:
        queryset = AlbumImage.objects.select_related().filter(album__user_profile__user__id = user_id)

    if count is not None:
        count = min(IMAGE_LIST_COUNT, count)
        queryset = queryset[0:count]
    else:
        count = IMAGE_LIST_COUNT

    album_image_list = list(queryset)

    #dict_list = [album_image.to_dict() for album_image in album_image_list]                                                                                                                                                                                                  
    dict_list = append_comment_list(album_image_list,request_comment_count)
    return dict_list 
```

这就是我构建 Web 服务以服务 Web 客户端和移动客户端的方式。
现在我听说 REST 框架可以简化 Web 开发。（这是我的第一个 Web 开发）
我采用了 sweetpie（一个 django/python REST api 框架）

我预计tastepie 会在第3 级（common_service）替换我的代码。
但我发现它实际上是#1/#3 绑在一起的。

如果我的理解是正确的，我最终会得到

> 1.  ~~json请求的end_point（例如，给我这个用​​户的图像）~~
> 2.  html请求的end_point（给我一个带有他的图像的用户主页）
> 3.  core_service（在底部）将python字典返回到#1和#2
> 4.  作为#1/#3 组合的美味派

所以即使我有美味派，我仍然需要#3.（核心服务）。
我觉得很奇怪...

[从其他观点使用tastepie api](https://stackoverflow.com/questions/14647819/using-tastypie-api-from-other-views)是我的相关问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:00:06.963

美味派（或任何类似框架）的好处源于以 RESTful 方式设计代码。在这种情况下，使您的模型资源。

在您介绍的情况下，您*如何将美味派集成到您的项目中并不明显*，这可能解释了您对美味派（或类似框架）的好处的困惑。

`AlbumImage`[将是一个很好的资源](http://django-tastypie.readthedocs.org/en/latest/tutorial.html#creating-resources)候选人：

```
class AlbumImageResource(ModelResource):
    class Meta:
        queryset = AlbumImage.objects.all()
        resource_name = 'album_image' 
```

...然后，任何`AlbumImageResource`人都可以[注册一个 URI](http://django-tastypie.readthedocs.org/en/latest/tutorial.html#creating-resources) ...

```
from myapp.api import AlbumImageResource

album_resource = EntryResource()

urlpatterns = patterns('',
    # The normal jazz here...
    (r'^api/', include(album_resource.urls)),
) 
```

...并且可以通过该 URI 以任何格式访问它：

```
curl -H "Accept: application/json" http://127.0.0.1:8000/api/album_image/ 
```

然后，您就有了一个可以通过 URI 访问内容的 RESTful 系统。

事实上，文档[甚至提供了限制访问](http://django-tastypie.readthedocs.org/en/latest/tutorial.html#limiting-data-and-access)的方法，以及[过滤和排序数据的高级方法](http://django-tastypie.readthedocs.org/en/latest/resources.html)。

# html - 尖括号（<）不触发html代码

> ID：14659240
> 
> 赞同：118
> 
> 时间：2013-02-02T06:14:58.357
> 
> 标签：html

> **可能重复：**
> [使用 html 打印“<html>”](https://stackoverflow.com/questions/3505047/printing-html-using-html)

如何在不调用 html 内容的情况下将 < 符号逐字放入 html 文本中。

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2013-02-02T06:18:22.380

使用“ `&lt;`”。同样，您可以使用 " `&gt;`" 表示 >，或使用 " `&amp;`" 表示 &。

这些被称为 HTML“实体”。[您可以在此处](http://www.w3schools.com/html/html_entities.asp)了解有关它们的更多信息

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-02-02T06:17:11.637

用于**<**。`&lt;`_

 **或`&gt;`为**>**。**

# javascript - 如何使用 jquery 更改击键组合的样式表？

> ID：14659247
> 
> 赞同：0
> 
> 时间：2013-02-02T06:17:05.153
> 
> 标签：javascript, jquery, css

输入单词时（不是输入文本框，只是输入），是否可以使用 jquery 切换到新样式表？我正在尝试在我的网站上创建一个复活节彩蛋，但我不确定从哪里开始切换样式表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:35:44.287

你的问题有几个部分。

1.  要侦听不是来自输入字段的击键事件，您可以将事件处理程序附加到文档对象并侦听该`keypress`事件，您可以通过查看该事件的事件数据结构来收集键入的键。在 jQuery 中，您可以使用该`$(document).keypress(fn)`方法。

2.  要更改样式，最简单的方法是添加一个 CSS 类，以便某个容器，并具有一组样式规则，当该类出现在容器上时，这些规则会改变事物。这比实际更改样式表更简单，更容易跨浏览器工作。在 jQuery 中，您可以只使用该`$("#whatever").addClass("foo")`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:19:42.237

你可以试试这个：

```
<link id="css1" href="normal.css" type="text/css" rel="stylesheet">

<script>
 if(something written)
  document.getElementById('css1').href = 'another_one.css';
</script> 
```

`something written`是您检查点击事件还是您想要的任何东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T06:34:08.927

试试这个：http: [//jsfiddle.net/UYapL/2/](http://jsfiddle.net/UYapL/2/)

```
$('button').click(function () {
    $('[rel="stylesheet"]').attr('href', 'new.css');
    alert($('[rel="stylesheet"]').attr('href'));
});

// with keycontrols

$(window).keyup(function (e) { // (ctrl+i)
    if (e.ctrlKey && e.which == 73) {
        $('[rel="stylesheet"]').attr('href', 'new.css');
        alert($('[rel="stylesheet"]').attr('href'));
    }
}); 
```

我不确定您是否正在寻找这样的东西：

```
// for specific word g=71 e=69 o=79
$('body').append('<span id="code" style="display:none;"></span>');
$(window).keyup(function (e) {
  wrd = e.which;
  code = $('#code').append(wrd);
  if ($('#code').text()=='716979') { // geo
    $('[rel="stylesheet"]').attr('href', 'new.css');
    alert($('[rel="stylesheet"]').attr('href'));
    $('#code').text(''); // reset it here.
  }
}); 
```

# iphone - UIScrollView 按钮分页

> ID：14659249
> 
> 赞同：0
> 
> 时间：2013-02-02T06:17:20.150
> 
> 标签：iphone, uiscrollview, uibutton, uistoryboard

我一直在尝试制作一个 100x100 像素的滚动视图（分页模式），以每页 75x75 显示单个按钮。我可以让第一张图片出现，但我无法翻到下一张。这是我一直在使用的代码，有人可以帮助我吗？

。H

```
@property (nonatomic , retain) IBOutlet UIScrollView *scrollMenu; 
```

.m

```
@synthesize scrollMenu;

-(void)viewDidLoad {

scrollMenu.pagingEnabled = YES;
NSInteger numberOfButtons = 2;

for (int i = 0; i < numberOfButtons; i++) {

    //Array of images for the buttons
    NSArray *menuItems = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"1.png"], [UIImage imageNamed:@"2.png"], nil];

    //Create A Button
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

    //Give the button an action
    [button addTarget:self action:@selector(menuItemSelected:) forControlEvents:UIControlEventTouchUpInside];

    //Give the button an image
    [button setImage:[menuItems objectAtIndex:i] forState:UIControlStateNormal];

    //Most likely WRONG
    button.frame = CGRectMake(i*(20+75), 8.0, 75, 75);

    button.showsTouchWhenHighlighted=YES;

    //Assign a tag
    button.tag = i;

    //Add the button to the view
    [scrollMenu addSubview:button];

}
//Most likely WRONG
scrollMenu.contentSize = CGSizeMake(100,100);
[self.view addSubview:scrollMenu];
 }

  [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:27:58.990

我已经实现了类似的东西，但对于 UIImageView。这里只需要设置 UI ScrollView 的一些属性，并且需要实现一个委托方法。

首先设置一些属性

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _scrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;
    _scrollView.multipleTouchEnabled=YES;
    _scrollView.scrollEnabled=YES;
    _scrollView.directionalLockEnabled=YES;
    _scrollView.canCancelContentTouches=YES;
    _scrollView.delaysContentTouches=YES;
    _scrollView.clipsToBounds=YES;
    _scrollView.alwaysBounceHorizontal=YES;
    _scrollView.bounces=YES;
    _scrollView.pagingEnabled=YES;
    _scrollView.showsVerticalScrollIndicator=NO;
    _scrollView.showsHorizontalScrollIndicator=NO;
    _scrollView.delegate=self;

} 
```

实现委托方法

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    @try
    {
        CGFloat pageWidth = 320;    //scrollView.frame.size.width;
        int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;

        if (page >9)
            page = page - 3;
        if (page <[listOfPictures count])
        {
            [_scrollView setContentOffset:CGPointMake(320*page, _scrollView.contentOffset.y) animated:YES];
            currentPicIndex = page;
        }

    }
    @catch (NSException *exception)
    {
        TRACE_ERROR(@"scrollViewDidEndDecelerating", exception.name, exception.description);
    }

} 
```

我的滚动视图是 240X300。因此，请使用按钮、滚动视图的像素进行操作，并明智地设置 ContentOffSet。

希望这可以帮助你。

# python - 解析奇怪的网页 - 多个 html 标签

> ID：14659255
> 
> 赞同：2
> 
> 时间：2013-02-02T06:18:53.200
> 
> 标签：python, html, parsing, beautifulsoup

我正在尝试解析一个非常奇怪的页面。这是一个简化版本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml">
    <form id="x" method="post" action="x">
        <input type="hidden" name="v1" value="v" />
            <html xmlns="http://www.w3.org/1999/xhtml">
                <input type="hidden" name="v2" value="v" />
            </html>
    </form>
</html> 
```

是的，表单中有一个 html 标签。

这是有效的 (X)HTML 吗？我知道这是（至少部分）使用 Java Server Faces 完成的。

至于实际问题：

```
>>> BeautifulSoup(html).find("form")
<form id="x" method="post" action="x">
<input type="hidden" name="v1" value="v" />
</form> 
```

BeautifulSoup 根本不喜欢这个，只是假装它不存在。

有没有人经历过类似的事情？我想我*可以*解析原始 XML，但如果可能的话，我想使用 BeautifulSoup。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T06:22:58.730

我已经看到当多个服务器源合并而不检查输出时会发生这种情况。我不认为存在`html`标签在文档中间有效的情况（除了在`iframe`标签中）。您发布的片段肯定无效（validator.w3.org）

如果流氓标签出现在可预测的位置，则字符串替换是一种快速解决方案，以便您随后可以正确解析它。

> 我想我可以解析原始 XML

假设文档符合其 XHTML doctype 的格式良好（意思是，即使不是有效的 XHTML，它也是有效的 XML），您可以：

*   将文档解析为 XML
*   将标记修改为有效的东西（例如打开内部元素，或将其更改为 a `div`）
*   使用 BeautifulSoup 解析为 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:18:24.080

以防万一有人需要这个，我最终编写了一个动态字符串替换（正如我在评论中提到的，我不能简单地剪切一个固定位置）

```
def fix_html_inside_html(html):
    i=html.index("<html")
    while True:
        try:
            i=html.index("<html", i+1)
            i2= html.index(">", i)
            i3= html.index("</html>", i)
            html= html[:i]+html[i2+1:i3]+html[i3+7:]
        except ValueError:
            break
    return html 
```

请注意，如果 html 属性中有“>”，这*将失败*

# php - soapenv：Server.userExceptionorg.xml.sax.SAXParseException：Hotelbed WSDL api 的序言中不允许有内容

> ID：14659256
> 
> 赞同：1
> 
> 时间：2013-02-02T06:18:57.383
> 
> 标签：php, soap, curl, wsdl, soap-client

当我运行以下代码时，我收到响应 500 内部服务器错误，我认为代码是完美的，所以有人可以帮我解决这个问题吗？

```
<?php
$xml = '<?xml version="1.0" encoding="UTF-8"?>' . "\n";
$xml .= '<CountryListRQ echoToken="DummyEchoToken" xmlns="http://www.hotelbeds.com/schemas/2005/06/messages" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.hotelbeds.com/schemas/2005/06/messages CountryListRQ.xsd">';
$xml .= '<Language>ENG</Language>';
$xml .= '<Credentials>';
$xml .= '<User>username</User>';
$xml .= '<Password>password</Password>';
$xml .= '</Credentials>';
$xml .= '</CountryListRQ>';

$url = 'http://212.170.239.71/appservices/ws/FrontendService?wsdl';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLINFO_HEADER_OUT, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/xml; charset=utf-8; action="getCountryList"'));
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, array('xml' => $xml));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
$result = @curl_exec($ch);
echo "<pre>";
print_r($result);
exit;
if($result === false) {
    echo "Error performing request";
} else {
    $xml_doc = simplexml_load_string($result);
    echo 'status is ', $xml_doc->status, '<br/>';
    if ($xml_doc->status == 'SUCCESS') {
        print_r($result);
    } else {
        echo 'Error is ', $xml_doc->errormessage, '<br/>';
    }
}?> 
```

我得到了这样的回应，

```
HTTP/1.1 100 Continue

HTTP/1.1 500 Internal Server Error
Date: Sat, 02 Feb 2013 06:02:12 GMT
Server: Resin/2.1.17
Content-Type: text/xml; charset=utf-8
Vary: Accept-Encoding
Connection: close
Transfer-Encoding: chunked

soapenv:Server.userExceptionorg.xml.sax.SAXParseException: Content is not allowed in prolog.we3mpf01 
```

谁能帮我？我如何使用这个hotelbed api获取国家列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T05:50:04.203

使用以下 http 服务 url：

```
http://212.170.239.71/appservices/http/AcceptanceTest 
```

我在hotelbeds服务器关闭的时候发生了什么事，这就是发生这个错误的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T06:58:06.800

错误消息告诉您缺少 SOAP 包装器元素，即 <soap:Envelope>、<soap:Body> 等 - 请参阅基本用法示例：

[http://www.soapuser.com/basics3.html](http://www.soapuser.com/basics3.html)

但是，我建议不要使用 curl（这是一个低级 HTTP 工具）与服务器交互，而是查看 SOAP 包：

[http://php.net/manual/en/book.soap.php](http://php.net/manual/en/book.soap.php)

这将为您完成所有的包装，并为您提供一个很好的 OO 层来使用。

如果您出于某种原因有意学习 SOAP 的较低级别的详细信息，那么至少您的示例中的 XML 需要位于 <soap:Envelope> 和 <soap:Body> 中，而不仅仅是单独存在。

# sql - 在c中生成动态sql

> ID：14659259
> 
> 赞同：-2
> 
> 时间：2013-02-02T06:19:24.647
> 
> 标签：sql, c, oracle, proc

我必须生成可以生成动态更新sql并执行它的ac程序。表名、要更新的列数和 where 子句中的列仅在运行时才知道。所以我将程序分成 2 个函数：

1) **CheckTableExists** - 检查用户提供的表是否存在于数据库中。 **成功实施。**

2) **UpdateFunc** - 根据用户提供的数据生成 sql 字符串并执行
查询。

我在第二个函数中遇到问题。我不接受要从用户更新的列、名称和值。然后我使用 for 循环并将名称和值附加到我的 sql 字符串中：

sqlstring = 更新选项卡名 set colname = colval,colname = colval where

然后我接受 where 子句数据并将其附加到我的字符串中。所以我的最后一个字符串是：

sqlstring = 更新选项卡名 set colname = colval,colname = colval where whcolname = whcolval

但是当我执行它时，我的程序挂起。有人可以告诉我
执行第二个函数的理想方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:01:57.580

`strSQL`将是一个有效的 SQL 语句，没有用于绑定的占位符。这适用于带有数字和 varchar2 变量的查询。对于二进制文件，您可能必须在 Oracle 中实现 bin2hex() 和 hex2bin() 等函数。

一个简单的函数，如：

```
int Exec_Query(sql_context sqlCtx, char *strSQL)
{

//    struct sqlca sqlca;

    /* Sanity checks for sqlCtx and strSQL */

    EXEC SQL WHENEVER SQLERROR GOTO QueryErr;  

    /* Set the context */
    EXEC SQL CONTEXT USE :sqlCtx;  

    /* Execute the query */
    EXEC SQL EXECUTE IMMEDIATE :strSQL; 

    EXEC SQL COMMIT; 

    return 0;

QueryErr:
    /* printf("Err: Failure in Executing Query\n"); */
    /* printf("Debug: <%s>",sqlca.sqlerrm.sqlerrmc); */
    return -1;
} 
```

通过 Pro*C 编译器将提供一个工作 C 文件。

# arrays - C指针动态分配

> ID：14659263
> 
> 赞同：0
> 
> 时间：2013-02-02T06:19:48.643
> 
> 标签：arrays, pointers, dynamic, struct

如何为结构数组指针动态分配内存。例如：我有一个大小为 1024 的结构数组指针，但如果我需要增加大小怎么办？我需要动态定义 arr 大小。初始化时，我将大小保持为1024。当空间超过分配时，我需要增加空间，如何增加它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:22:52.630

[`realloc()`](http://pubs.opengroup.org/onlinepubs/009696899/functions/realloc.html). 就像是

```
struct foo *ptr;
ptr = malloc(sizeof(*ptr) * 1024);

// later
struct foo *tmp = realloc(ptr, sizeof(*ptr) * 2048);
if (tmp) {
    ptr = tmp;
} else {
    // something nasty happened
    free(ptr);
    exit(-1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T06:25:48.537

对于动态内存分配，使用`array implemented using linked lists`会有所帮助。您可以使用`malloc()`函数将内存分配给现有的结构节点。

如果您希望结构对象中的数组增加其内存，那么您可以使用链表而不是结构内部的数组。

# xml - Vba-Excel：将 Excel 工作表导出为 XML？

> ID：14659264
> 
> 赞同：0
> 
> 时间：2013-02-02T06:19:57.940
> 
> 标签：xml, excel, vba

我需要将 excel 电子表格数据导出到 XML。为此，我在 WorkSheet_Activate 中添加了几行代码，即

```
Private Sub Worksheet_Activate()

 Dim oMyconnection As Connection
 Dim oMyrecordset As Recordset
 Dim oMyXML As DOMDocument
 Dim oMyWorkbook As String

 Set oMyconnection = New Connection
 Set oMyrecordset = New Recordset
 Set oMyXML = New DOMDocument

 oMyWorkbook = Application.ThisWorkbook.FullName

 oMyconnection.Open "Provider=Microsoft.Jet.OLEDB.4.0;" & _
                  "Data Source=" & oMyWorkbook & ";" & _
                  "Extended Properties=excel 8.0;" & _
                  "Persist Security Info=False"

 oMyrecordset.Open "Select * from [Sheet1$A1:C100]", oMyconnection, adOpenStatic

 oMyrecordset.Save oMyXML, adPersistXML

 oMyXML.Save (ThisWorkbook.Path & "\Output.xml")

 oMyrecordset.Close
Set oMyconnection = Nothing
Set oMyrecordset = Nothing
Set oMyXML = Nothing 
```

但是，当我尝试执行它时，我会收到类似`User-Defined Datatype not found`. 实际上我因为这条线而收到这个错误`Dim oMyXML As DOMDocument`。我缺少任何参考吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T14:27:40.940

我知道这个线程已有几个月的历史，但您需要添加对“ **Microsoft XML, v6.0** ”（或您拥有/需要的任何版本）的引用才能使用 DOMDocument 数据类型。

```
Dim oMyXML As MSXML.DOMDocument
Set oMyXML = New MSXML.DOMDocument 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:26:19.847

他的问题不是“XML 输出”本身，而是 Microsoft VBA 和引用正确的 ActiveX 组件的怪异之处。

查看这些链接中的一个/两个，看看它们是否有帮助：

*   [错误用户定义类型未定义](https://stackoverflow.com/questions/5349580/compiler-error-user-defined-types-not-defined)

*   [未定义用户定义类型](http://support.microsoft.com/kb/145759)

# ruby-on-rails - 如何在 jquery escape_javascript 中传递 form_builder

> ID：14659265
> 
> 赞同：0
> 
> 时间：2013-02-02T06:20:14.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, actionview, actionviewhelper

我有两个类`Message`，`Comment`关联如下

```
class Message ActiveRecord::Base
  attr_accessible :comments_attributes
  has_many :comments
  accepts_nested_attributes_for :comments
end

class Comment ActiveRecord::Base
  belongs_to :message
end 
```

我将我的表格建模为

```
= form_for @message do |f|
  f.text_field :msg
  %a#add-comment Add Comment

_comment.html.haml
  = f.fields_for :comments do |c|
      c.text_field :value 
```

单击“添加评论”按钮时，我通过 jquery 将评论输入附加到表单 f 中，如下所示

```
$('#add-comment').click(function() {
  $('#add-comment').prepend(("#{escape_javascript(render(:partial => "comment", f: f))}");  
}); 
```

但我无法访问此表单，我得到了

```
Undefined local variable or method 'f' 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:54:51.627

在你的表格中试试这个。我假设：

```
 = f.fields_for :comments do |c|
      c.text_field :value 
```

是在你的评论部分。

所以你的表单应该是这样的，并将 f 变量传递给部分

```
= form_for @message do |f|
  f.text_field :msg
  %a#add-comment Add Comment

  = render :partial => 'comment', :locals => {:f => f} 
```

# java - JLayer 将 mp3 转换为 wav

> ID：14659267
> 
> 赞同：0
> 
> 时间：2013-02-02T06:20:29.047
> 
> 标签：java, mp3, wav, jlayer

我正在尝试使用 JLayer 将 mp3 转换为 wav，而它似乎无法设置速率。

```
public void convert(String sourceName, String destName,
       ProgressListener progressListener, Decoder.Params decoderParams) 
```

有谁知道怎么做，或者有没有像 JLayer 这样的其他 java 框架？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-22T02:42:17.080

尝试这个：

```
Converter c=new Converter();
c.convert("mysong.mp3","mysong.wav"); 
```

# java - 如何在黑莓应用程序中将多个 cod 文件合并为单个 cod 文件。？

> ID：14659271
> 
> 赞同：0
> 
> 时间：2013-02-02T06:21:16.467
> 
> 标签：java, blackberry

我正在尝试在黑莓应用程序中将多个 cod 文件实现为单个 cod 文件。我检查了许多网站，但没有得到所需的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:09:54.350

你想达到什么目的？如果你想在你的项目中包含 3d 方库，并最终得到一个单一的 COD 文件（或一组 COD 文件），这可以在 eclipse 中完成，如下所示：

1.  将 JAR 文件添加到构建路径
2.  在构建路径对话框的“订购和导出”选项卡上，确保选中 JAR 文件。

这假定您包含的 jar 文件已正确编译和预验证。 [bb-ant-tools](http://bb-ant-tools.sourceforge.net/)可能有用。

# error-handling - CCBReader.h : 没有这样的文件或目录

> ID：14659273
> 
> 赞同：1
> 
> 时间：2013-02-02T06:22:15.363
> 
> 标签：error-handling, cocos2d-iphone

我正在尝试做 raywenderlich 教程“CocosBuilder 简介”

正如教程中提到的，我添加了 CCControlExtension 类和 CCBReader 类，并按照说明“为任何添加的文件夹创建组”被选中，并选中“将项目复制到目标组的文件夹”。

两个添加的文件夹颜色都与 Xcode 导航区域中的其他文件夹不同

当我运行这个应用程序错误“CCBReader.h：没有这样的文件或导演”

有什么解决办法请帮帮我...........

# java - unrecognized token '(' in values list, expecting ')'

> ID：14659278
> 
> 赞同：1
> 
> 时间：2013-02-02T06:22:44.990
> 
> 标签：java, sql, oracle, jdbc, prepared-statement

I am trying to insert into Oracle Database using JDBC prepared statement. Below is the sql that I am trying to insert.

And everytime I get sql exception for below SQL

```
private static String insertSQL = "INSERT INTO USER_COPY (ID, CREATION_DATE, LAST_MODIFIED_DATE) VALUES ('123456789', TO_TIMESTAMP('2013-02-01 12:37:40.315'), TO_TIMESTAMP('2013-02-01 12:37:40.315'))"; 
```

**Exception**

```
unrecognized token '(' in values list, expecting ')' 
```

**Table Properties**

```
ID is String
CREATION_DATE timestamp
LAST_MODIFIED_DATE timestamp 
```

Anything wrong with my SQL?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:54:16.120

I wonder if perhaps it's not your timestamp format? This worked for me using `TO_TIMESTAMP`:

```
CREATE TABLE USER_COPY (ID int, CREATION_DATE TimeStamp, LAST_MODIFIED_DATE TimeStamp);

INSERT INTO USER_COPY (ID, CREATION_DATE, LAST_MODIFIED_DATE)
VALUES ('123456789',
        TO_TIMESTAMP('2013-02-01 12:37:40.315', 'YYYY-MM-DD HH24:MI:SS.FF'), 
        TO_TIMESTAMP('2013-02-01 12:37:40.315', 'YYYY-MM-DD HH24:MI:SS.FF')
        ); 
```

And here is the [SQL Fiddle](http://sqlfiddle.com/#!4/e3cbb).

Good luck.

# c# - 英文字符、连字符和下划线的正则表达式

> ID：14659287
> 
> 赞同：14
> 
> 时间：2013-02-02T06:23:32.413
> 
> 标签：c#, regex

我需要正则表达式来表示英文字符、连字符和下划线

例子

匹配 ：

```
戈文德马尔维亚
govind_malviya
govind123
政府

```

不匹配

```
政府马尔维亚
govind.malviya
govind%马尔维亚
腕表生活
вкусно-же

```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-02T06:53:54.020

试试这个：

```
^[A-Za-z\d_-]+$ 
```

`A-Za-z`将允许字母。
`\d`将允许数字。
`_`将允许下划线。
`-`将允许连字符。 `^`分别`$`代表字符串的开始和结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T06:53:12.643

**试试这个：**

```
(?-i)^[a-z0-9_-]+$(?#case sensitive, matches only lower a-z) 
```

或者

```
(?i)^[a-z0-9_-]+$(?#case insensitive, matches lower and upper letters) 
```

**示例代码**

```
try {
    Regex regexObj = new Regex("^[a-z0-9_-]+$(?#case sensitive, matches only lower a-z)", RegexOptions.Multiline);
    Match matchResults = regexObj.Match(subjectString);
    while (matchResults.Success) {
        for (int i = 1; i < matchResults.Groups.Count; i++) {
            Group groupObj = matchResults.Groups[i];
            if (groupObj.Success) {
                // matched text: groupObj.Value
                // match start: groupObj.Index
                // match length: groupObj.Length
            } 
        }
        matchResults = matchResults.NextMatch();
    } 
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

**正则表达式解剖**

```
// (?-i)^[a-z0-9_-]+$(?#case sensitive, matches only lower a-z)
// 
// Options: ^ and $ match at line breaks
// 
// Match the remainder of the regex with the options: case sensitive (-i) «(?-i)»
// Assert position at the beginning of a line (at beginning of the string or after a line break character) «^»
// Match a single character present in the list below «[a-z0-9_-]+»
//    Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
//    A character in the range between “a” and “z” «a-z»
//    A character in the range between “0” and “9” «0-9»
//    The character “_” «_»
//    The character “-” «-»
// Assert position at the end of a line (at the end of the string or before a line break character) «$»
// Comment: case sensitive, matches only lower a-z «(?#case sensitive, matches only lower a-z)» 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-02T06:26:18.057

`[\w-]+`这就是你需要的。
`\w`是单词字符。它与`[a-zA-Z1-9_]`表示字符 from `a`to`z`或 from `A`to`Z`或 from `1`to`9`或下划线相同。所以`[\w-]`表示单词字符或连字符。
`+`表示一次或多次

# meteor - 如何在 Meteor.js 上同步客户端和服务器集合

> ID：14659289
> 
> 赞同：2
> 
> 时间：2013-02-02T06:23:52.533
> 
> 标签：meteor

我正在尝试将我的服务器集合与我的客户端集合同步。

在服务器上：

```
var JobLoopUsers = new Meteor.Collection("job-loop-users")

Meteor.publish("user-data", function(){
  JobLoopUsers.findOne({meteorUserId : 1});
}); 
```

在客户端：

```
Meteor.subscribe("user-data");

JobLoopUsers = new Meteor.Collection("job-loop-users"); 
```

我使用meteor.call在服务器上插入一些测试数据

我做的时候在服务器上

```
console.log( JobLoopUsers.find().fetch()[0] ) 
```

它显示：

```
 {meteorUserId: 1
   testData: "My Test Data Here"} 
```

当我做

```
console.log( JobLoopUsers.find().fetch()) 
```

在客户端我只是得到一个空数组。

如何同步这两个集合？

流星文档说：

当您订阅记录集时，它会告诉服务器将记录发送给客户端。客户端将这些记录存储在本地 Minimongo 集合中，与要设置的集合参数同名。Meteor 将对传入的属性进行排队，直到您在客户端上使用匹配的集合名称声明 Meteor.Collection。

我需要自动订阅吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:48:37.523

这两个是实时自动同步的。可能发生的情况是您插入的数据没有 a`meteorUserId:1`并且它没有发布给客户端，并且您正在搜索所有记录，无论它们是否有`meteorUserId:1`。

要解决此问题，请尝试更改：

```
Meteor.publish("user-data", function(){
  JobLoopUsers.find({});
}); 
```

除非您出于某种原因需要更改订阅，否则您不必进行自动订阅

您也可能打电话`console.log( JobLoopUsers.find().fetch())`太早，尝试等待一两秒钟，将其替换为：

```
Meteor.setTimeout(function() { console.log( JobLoopUsers.find().fetch()) }, 3000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T20:25:23.833

按照这里的教程帮助我解决了我的问题： [http ://andrewscala.com/meteor/](http://andrewscala.com/meteor/)

它似乎正在工作。

全球.js：

```
JobLoopUsers = new Meteor.Collection("user-data"); 
```

客户端.js：

```
Meteor.autosubscribe(function (){
  Meteor.subscribe("user-data", Meteor.userId())  
}) 
```

服务器.js：

```
Meteor.publish("user-data", function(userId){
  return JobLoopUsers.find({meteorUserId: userId})
}) 
```

# c - C 将变量值设置为 \n

> ID：14659294
> 
> 赞同：1
> 
> 时间：2013-02-02T06:24:28.733
> 
> 标签：c, variables, conditional, newline

> **可能重复：**
> [程序不等待用户输入 scanf(“%c”,&yn);](https://stackoverflow.com/questions/8464620/program-doesnt-wait-for-user-input-with-scanfc-yn)

我刚开始用 C 编程，突然出现了一些奇怪的东西（我在 C++ 中没有遇到过）。

在我的头文件中，我声明了一个变量（参见文件`onemoretime`代码`.h`），稍后使用用户输入通过`scanf()`. 由于某种原因，使用该变量的条件无法正常工作，要么返回无限重复的结果，要么不做任何事情。设置了一些断点，发现第一次`onemoretime`在`main()`函数中调用，其值不知`onemoretime`为何设置为`\n`.

这不是`scanf()`应该识别的值，但输入被视为新行（显然）。当我输入`y`时，应该触发`else if`条件并循环回到 的开头`main()`，Xcode 的调试器简单地说，`error: 'y' is not a valid command.`

这是我的`.h`文件：

```
#ifndef C1_Header_h
#define C1_Header_h

float num1, num2;
char op, onemoretime;

#endif 
```

...这是`.c`文件中的相关代码：

```
#include <stdio.h>
#include <math.h>
#include "Header.h"

int main(int argc, const char * argv[])
{
    printf("Enter a two-number calculation below:\n");
    while (1)
    {
        scanf("%f%c%f", &num1, &op, &num2);

        // addition
        if (op == '+')
        {
            printf("%f\n", num1+num2);
            printf("\nDone. Would you like to solve another math problem (y/n)?\n");
            scanf("%c", &onemoretime);
            while (1)
            {
                if (onemoretime == 'n') 
                {
                    printf("Ok. Terminating program.");
                    return 0;
                }
                else if (onemoretime == 'y') 
                {
                    // loop back to start main function
                }
            }
        }
    }
        // rest of code, irrelevant here
} 
```

如果它是一个因素，将鼠标悬停`onemoretime`在 Xcode 中的变量上（显示其基本属性），头文件中初始声明之后的变量的每个实例都显示值为`\n`.

我究竟做错了什么？的值如何`onemoretime`由用户设置，而不是在用户获取之前由程序设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T06:30:25.777

> [ `\n`] 不是`scanf()`应该识别的值，[…]

一般来说，这是正确的，但是“在 [情况] 中，正常跳过空白字符被抑制`%c`” [[链接](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fscanf.html)]。

要获得`op`and `onemoretime`，我建议使用`fgetc`( [link](http://pubs.opengroup.org/onlinepubs/009604599/functions/fgetc.html) ) 而不是`scanf`，并自己处理跳过空格的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:05:22.777

每当您想获得一个字符时，`scanf()`您必须始终使用一些东西来吸收换行符。您可以做这样的事情`scanf("%c\n",&onemoretime);`

# iphone - 使用 didselectRowAtIndex 将表格视图单元格数据分配给文本字段

> ID：14659297
> 
> 赞同：0
> 
> 时间：2013-02-02T06:24:48.150
> 
> 标签：iphone, uitableview, xcode4.2

当我们单击一个单元格时，我有一个 UItableview 我想获取单元格中的数据，并且必须分配给另一个控制器中的 UIlabel 并显示它。就像我想对 tableview 中的所有单元格一样

在那个控制器中，我有一个 UIlabel，我想将单元格数据更新为那个。

有人能帮我吗？

```
(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellidentifier=@"cell";
    UITableViewCell *cell=[tableview dequeueReusableCellWithIdentifier:cellidentifier];
    if (cell==nil) {
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellidentifier];    
           }
    cell.textLabel.text=[array objectAtIndex:indexPath.row];
    return cell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    Companydetails *details1= [[Companydetails alloc] initWithNibName:@"Companydetails" bundle:nil];
    details1.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:details1 animated:NO];
    [details1 release]; 
    UITableViewCell *cell=[tableView cellForRowAtIndexPath:indexPath];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:24:04.950

尝试这个：

在SeconView.h

```
NSString *passValue;
@property(nonatomic,retain) NSString *passValue; 
```

在 SecondView.m 中

```
@synthesize passValue; 
```

在 FirstView.m 中

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    Companydetails *details1= [[Companydetails alloc] initWithNibName:@"Companydetails" bundle:nil];
    details1.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
details1.passValue=[array objectAtIndex:indexPath.row];
    [self presentModalViewController:details1 animated:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:42:45.913

在您的第二个视图控制器中创建 UITextField Like 的属性：

```
.h file
@property (nonatomic,retain) UITextField *txtField;

.m file
@synthesize txtField; 
```

现在在您当前的类中，您要从其中显示第二个视图控制器的 UITextField 的视图控制器设置值。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell=[tableView cellForRowAtIndexPath:indexPath];
    Companydetails *details1= [[Companydetails alloc] initWithNibName:@"Companydetails" bundle:nil];
    details1.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    details1.txtField.text = cell.textLabel.text. 
    [self presentModalViewController:details1 animated:NO];
    [details1 release]; 

} 
```

# c# - 如何使用实体框架合并结果并将结果绑定到 gridview

> ID：14659298
> 
> 赞同：0
> 
> 时间：2013-02-02T06:24:52.720
> 
> 标签：c#, asp.net, entity-framework

大家好，我已经编写了以下查询来获取基于技术 ID 的信息，并且我得到了正确的结果，但是因为我不知道如何根据我的要求合并结果

该循环将根据加载了结果的网格进行处理，当有 2 行时，此循环将运行多次，然后我将在每个循环上获得结果，我想为结果网格绑定这些记录，就像我们合并数据集我想合并结果

```
foreach (GridViewRow row in grdForum.Rows)
{
int quesID = Convert.ToInt16(grdForum.DataKeys[row.RowIndex].Values["TechID"].ToString());
var lastpost = db.tblQuestions.Where(u => u.TechID.Equals(quesID)).OrderByDescending(u => u.DatePosted).Take(1).ToList();
grdnewUser.DataSource = lastpost.ToList();
grdnewUser.DataBind();
}

 public class Results
    {
        public DateTime DatePosted;
        public string QuestionTitle;
        public string UserName;
    }

public void bindLastPost()
{
   ArrayList a = new ArrayList();
   foreach (GridViewRow row in grdForum.Rows)
   {
    int quesID = Convert.ToInt16(grdForum.DataKeys[row.RowIndex].Values["TechID"].ToString());
    var lastpost = db.tblQuestions.Where(u => u.TechID.Equals(quesID)).OrderByDescending(u => u.DatePosted).Take(1).FirstOrDefault();

    a.Add(new Results { DatePosted = lastpost.DatePosted, QuestionTitle = lastpost.QuestionTitle, UserName = lastpost.UserName });
   }
      grdnewUser.DataSource = a;
      grdnewUser.DataBind(); 
```

根据`user1974729`答案

```
int[] quesID;
            int i = 0;
            foreach (GridViewRow row in grdForum.Rows)
            {
                quesID[i] = Convert.ToInt16(grdForum.DataKeys[row.RowIndex].Values["TechID"].ToString());
                i++;
            }
            //Check this part to find out how u will implement the Contains in Linq
            var lastpost = from e in db.tblQuestions where quesID.Contains(e.TechID) select e;

            } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-02T06:57:44.153

```
u r doing this inside the foreach loop//
No matter how many times u do this , only the last time u do it will stick..
grdnewUser.DataSource = lastpost.ToList(); //This is done only one time 
```

**所以我想你在寻找的是如何在 Linq 中实现 CONTAINS ..**

```
int[] quesID;
int i = 0;
foreach (GridViewRow row in grdForum.Rows)
{
 quesID[i] = Convert.ToInt16(grdForum.DataKeys[row.RowIndex].Values["TechID"].ToString());
 i++;
}

//Check this part to find out how u will implement the Contains in Linq
var lastpost = db.tblQuestions.Where(u => quesID.Contains(quesID)).OrderByDescending(u => u.DatePosted).Take(1).ToList();
grdnewUser.DataSource = lastpost.ToList();
grdnewUser.DataBind();
} 
```

# android - Cocos2d 安卓双击

> ID：14659304
> 
> 赞同：1
> 
> 时间：2013-02-02T06:25:54.997
> 
> 标签：android, cocos2d-android

全部 。自过去 2 天以来，我一直在尝试在 cocos2d 中检测 android 中的 double 。但我无法获得任何满意的结果......所以，请帮助我尝试这个问题，我在 CCTouchEnded 中计算它并在每次触摸时在 var 中增加任何帮助，感谢您提前感谢

# iphone - 如何在 iphone 中创建像我的照片应用程序这样的文件夹？

> ID：14659315
> 
> 赞同：1
> 
> 时间：2013-02-02T06:26:55.810
> 
> 标签：iphone, xcode, uiview, uiimageview, uiview-hierarchy

亲爱的朋友们，我想知道有没有可能在 iPhone中创建像**MY PHOTO应用程序这样的文件夹？**如果可能，我该如何实施？

现在我正在尝试创建。我在我的自定义 UIView 中使用 UIScrollView，例如为设置文件夹图像添加了一个 UIImageView。然后使用 for 循环我正在静态创建并在一列 UIView Down 中一一排列，但他们需要它将在两列中。我该如何实现?

还有我如何动态实现它？即为每个按钮操作一个一个地创建文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:40:05.033

尝试此代码并根据您的需要设置大小。

```
 float horizontal = 8.0;
         float vertical = 8.0;
         int i;
        for(i=0; i<[arrayOfThumbImages count]; i++)
        {
            if((i%2) == 0 && i!=0)
            {
                horizontal = 8.0;
                vertical = vertical + 70.0 + 8.0;
            }
            buttonImage = [UIButton buttonWithType:UIButtonTypeCustom];
            [buttonImage setFrame:CGRectMake(horizontal, vertical, 70.0, 70.0)];
            [buttonImage setTag:i];
            [buttonImage setBackgroundImage:[arrayOfThumbImages objectAtIndex:i] forState:UIControlStateNormal];
            [buttonImage addTarget:self action:@selector(buttonImagePressed:) forControlEvents:UIControlEventTouchUpInside];
            buttonImage.layer.cornerRadius = 15;
            buttonImage.layer.masksToBounds = YES;
            [myScrollView addSubview:buttonImage];
            horizontal = horizontal + 70.0 + 8.0;

        } 
```

# php - 在 PHP 中以无序列表格式显示错误

> ID：14659317
> 
> 赞同：0
> 
> 时间：2013-02-02T06:27:15.337
> 
> 标签：php, listitem

我想以无序列表格式显示存储在 $error 中的所有错误。以下是显示错误的代码。

```
<?php
     if (!empty($error)) {
         echo '<p class="error"><strong>Your message was NOT sent<br/> The following error(s) occurred:</strong><br/>'. '<li>' . $error . '</li>' . '</p>';
     } elseif (!empty($success)) {
         echo $success;
       }
?> 
```

问题是上面的代码只显示列表中的第一个错误，但其余的只是显示在单独的行中，没有列表格式。所有错误都以以下格式存储：

```
$error .= "You didn't type in your name. <br />"; 
```

我尝试删除 br 标签，但没有奏效。

任何帮助将非常感激。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:34:36.927

`<li>`如果使用 标签，你必须使用每个错误`<br/>`，PHP的输出应该是这样的，

```
<ul>
    <li>Error1</li>
    <li>Error2</li>
    <li>Error3</li>
</ul> 
```

所以有这样的PHP代码，

```
$error .= "<li>You didn't type in your name. </li>";
$error .= "<li>Error2\. </li>";
$error .= "<li>Error3 </li>";

echo '<p class="error"><strong>Your message was NOT sent<br/> The following error(s) occurred:</strong><br/>'. '<ul>' . $error . '</ul>' . '</p>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:44:09.500

```
<?php
    if (!empty($error)) {
        $errors = explode('<br />', $error);
        echo '
<p class="error"><strong>Your message was NOT sent<br/>The following error(s) occurred:</strong></p>
<ul>
';
        foreach($errors as $error){
             echo "<li>$error</li>\n";
        }
        echo "</ul>";
    } elseif (!empty($success)) {
        echo $success;

    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T07:05:01.860

假设`$error`是一个数组（似乎如此）。

```
if (!empty($error)) {
    foreach ($error as $e) {
        printf("<li>%s</li>\n", $e);
    }
}

// or just
print "<li>". join("</li>\n<li>", $error). "</li>";

// extra: collecting errors
if (trim($_POST["first_name"]) == "") {
    $error[] = "You didn't type in your first name.";
}
if (trim($_POST["last_name"]) == "") {
    $error[] = "You didn't type in your last name.";
}
... 
```

# actionscript-3 - 如何在 Actionscript3 中将十六进制转换为十进制？

> ID：14659322
> 
> 赞同：3
> 
> 时间：2013-02-02T06:28:08.507
> 
> 标签：actionscript-3

如何在 Actionscript3 中将十六进制（字符串）转换为十进制（int）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-02T06:54:48.337

`Number`，`int`以及`uint`具有`toString()`接受`radix`作为参数的方法的类。

`radix`指定用于数字到字符串转换的数字基数（从 2 到 36）。如果不指定 radix 参数，则默认值为 10。

您可以通过 Number 和 uint 类转换为任何基数，如八进制、十六进制、二进制。

更好的方法

`var decimal:int = parseInt("FFFFFF",16);` // 输出：16777215

其他方式

```
var hex:String = "0xFFFFFF"; 
```

`var hexint:int = int(hex);` // 输出：16777215

它相当于

`var hexint:int = int(hex).toString(10);`//十进制转换

恢复原值：

```
var decimalStr:String = hexint.toString(16).toUpperCase(); // output : FFFFFF 
```

# boolean-logic - 如何证明以下布尔方程的同一性？

> ID：14659324
> 
> 赞同：0
> 
> 时间：2013-02-02T06:28:13.007
> 
> 标签：boolean-logic, simplify

使用布尔操作，我怎么能证明这两个边相等？对于第一，我正在考虑操纵双方直到他们匹配。我似乎无法正确操作它。

1.  wy + w'yz' + wxz + w'xy' = wy + w'xz' + x'yz' + xy'z

2.  ad' + a'b + c'd + b'c = (a' + b' + c' + d')(a + b + c + d)

感谢您的任何帮助或意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:52:36.693

1：

只需比较等式两边的 2^4=16 个输入组合中的哪一个计算结果为真：

```
w y z x
0 0 0 1
0 0 1 1
0 1 0 0
0 1 0 1
1 0 1 1
1 1 0 0
1 1 0 1
1 1 1 0
1 1 1 1 
```

2：

您可以执行与 1\. 相同的操作，或者将两个括号相乘，删除像 a'a 这样的错误术语，删除重复的术语并逐项比较两边。

双方其实是平等的。对于以下输入组合，它们评估为真：

```
a b c d
0 0 1 0
0 1 0 0
0 1 1 0
0 0 0 1
0 0 1 1
0 1 0 1
0 1 1 1
1 0 0 0
1 0 1 0
1 1 0 0
1 0 1 1
1 0 0 1
1 0 1 1
1 1 0 1 
```

# iphone - NSUndomanager 的撤消和重做按钮标题和操作

> ID：14659325
> 
> 赞同：0
> 
> 时间：2013-02-02T06:28:18.703
> 
> 标签：iphone, ios, ipad-2

我正在创建一个 ios 应用程序，例如数独。在该应用程序中，我创建了撤消重做按钮。在数独中，每个网格值都是按钮标题。我想要的是，每当我单击撤消或重做按钮时，网格值就会根据操作而改变。我可以用它 NSUndomanager 做吗？是否有任何示例代码..？给我解决方案

```
 if([value intValue] == 0)
            {
                CurrentTitle=[NSString stringWithFormat:@"%@", [[b titleLabel ]text]];
                    [self AllSweepFunctionAction];
                    [b setTitle:appendedString forState:0];

                if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
                {
                    [[b titleLabel] setFont:[UIFont fontWithName:@"Kids" size:15]];
                }else
                {
                    [[b titleLabel] setFont:[UIFont fontWithName:@"Kids" size:7]];
                }
                [b setTitleColor:[UIColor darkGrayColor] forState:0];
                [ b titleLabel].lineBreakMode = NSLineBreakByCharWrapping;
                [b titleLabel].textAlignment = NSTextAlignmentCenter;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T10:30:12.593

首先 ViewControllers 需要能够成为处理手势的第一响应者，所以在你的 ViewController 中编写这个方法

```
- (BOOL)canBecomeFirstResponder 
{
    return YES;
} 
```

`[self becomeFirstResponder]`其次：当视图控制器出现在屏幕上时，它需要成为第一响应者，这可以通过调用`-loadView`或`-viewDidLoad`

```
[self performSelector:@selector(becomeFirstResponder) withObject:nil afterDelay:0.3]; 
```

您可以尝试延迟时间

然后您可以在 viewController 中注册属性更改，并调用按钮操作中的`undo`方法。`NSUndoManager`另外我认为您可以覆盖此视图的控制器方法以进行编辑

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {

    [super setEditing:editing animated:animated];
//do some editing 

} 
```

**这是示例代码，包含撤消代码**

这是[一个链接](https://github.com/darcyliu/SampleCode/tree/master/SimpleUndo)！

在上面的代码链接中，将此代码添加到 RootViewController.m 的 viewDidLoad

```
 // left undo button
    UIBarButtonItem *undoButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(undoOperations:)];
    self.navigationItem.leftBarButtonItem = undoButton; 
```

并在此`RootViewController.m`添加此方法

```
-(void)undoOperations:(id)sender
{
    [self.undoManager undo];

} 
```

你应该有一个带撤消的左键，我认为这是一个好的开始。

# class - Python，一次实例化类并在其他类中使用它们的正确方法

> ID：14659328
> 
> 赞同：0
> 
> 时间：2013-02-02T06:28:34.647
> 
> 标签：class, python-3.x, instance, global

我有一些代码可以解决一个名为 nurikabe 的益智游戏，最近我一直在将其重写为 OOP（仍在学习）并具有以下结构：

```
# CNurikabe.py
from includes import Board, Validation, Heuristics
class CNurikabe(object):
    ...

# CValidation.py
from includes import Board, Heuristics
class CValidation(object):
    ...

# CHeuristics.py
from includes import Board
class CHeuristics(object):
    ...

# CBoard.py
class CBoard(object):
    def __init__(self, filename):
        # Vars shared by every class
        self.x, self.y, self.z, self.t = self.parseData(filename)

# run.py
from CNurikabe import CNurikabe
nurikabe = CNurikabe()
nurikabe.solve('output')

# includes.py
from CBoard import CBoard   
Board = CBoard('data.dat')

from CHeuristics import CHeuristics
Heuristics = CHeuristics()

from CValidation import CValidation
Validation = CValidation() 
```

CBoard 类具有必须在所有其他类之间共享的信息（例如板尺寸、数字坐标等），我也希望它被实例化一次，如果可能的话防止依赖注入（不必要地将文件名传递给每个类的 init 方法， 例如）

需要这些类来访问以下内容：

CValidation 类使用：CBoard 和 CHeuristics

CHeuristics 类使用：CBoard

CNurikabe 类使用：CBoard、CValidation 和 CHeuristics

我拥有的代码按预期工作。我可以按照我想要的方式在其他类中调用其他类的方法，例如：

```
# CNurikabe.py:
class CNurikabe(object):
    def someFunc(self):
        for i in range(Board.dimensionx):
            Heuristics.doSomeStuff()
            Validation.doSomeMore() 
```

但我可能读过太多关于全局变量如何邪恶的内容。此外，includes.py 中的代码有点骇人听闻，因为如果我更改导入的顺序，程序将无法运行，并抱怨无法导入某些名称。

我还尝试了另一种方法，仅全局实例化 CBoard 类，然后为其他类创建我需要的类的实例。但是我觉得这有点重复，例如，在每个类中创建一个独特的 CHeuristics 全局实例，但这仍然无法解决 CBoard 全局问题。

我还考虑过在每个类的**init**中创建一个实例，但是代码会非常冗长，例如必须调用： self.Heuristics.doSomeStuff()

所以我的问题是有什么更好的方法来构建它？我读过关于单例模式（这可能有点过分，因为它是一个小项目），以及为多种语言（如 C++ 和 PHP）做这件事的无穷无尽的方法。实际上我这样做的方式类似于“外部类实例”；用 C++ 做的方式，很久以前我在做一个有这种风格的 C++ 项目，我喜欢它，没有看到任何问题，尽管类实例是全局的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:41:09.783

全球人是邪恶的。但是，您可能需要一个将一些东西封装在一起的单例模式。我从 C++ 和 Python 获得的经验是，您可以很好地使用语言的混合特性，并使用模块作为单例。（如果你仔细想想，模块变量扮演单例成员变量的角色，模块中的普通函数类似于单例的方法。）

这样，我建议将板功能放入`board.py`启发式功能`heuristic.py`中，...，将方法转换为函数，`self.variable`然后`variable`使用：

```
import board
import heuristic
import validation

...

class CNurikabe:     # the explicit (object) base class is not needed in Python 3
    def someFunc(self):
        for i in range(board.dimensionx):
            heuristics.doSomeStuff()
            validation.doSomeMore() 
```

想想`import board`获取对单例实例的引用——实际上是这样，因为模块对象只有一个实例。它在语法上与您的旧代码相同——除了获取实例（模块）会更容易。

**更新：**一旦您需要更多实例，您应该再次在课堂上思考。然而，传递对象在 Python 中是非常便宜的操作——您只复制引用值（技术上是地址，即 4 或 8 个字节）。获得参考值后，您可以轻松地将其分配给局部变量。（Python中的每次赋值都意味着复制引用值，从而共享对分配对象的访问。这样，实际上不需要全局变量，也没有借口使用全局变量。

使用局部变量，语法再次保持不变。

# java - 休眠：org.hibernate.PersistentObjectException：分离的实体传递给坚持

> ID：14659332
> 
> 赞同：0
> 
> 时间：2013-02-02T06:29:48.687
> 
> 标签：java, hibernate

我已经尝试了很多线程中提到的东西。但似乎没有一个能解决我的问题。请告诉我哪里出错了。

**楷模**

```
@Entity
public class MySession {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;
    @Column(unique=true)
    private String sessionId;
    @OneToMany(mappedBy="session")
    private List<MyRequest> requestList;

}

@Entity
public class MyRequest{

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;
    @ManyToOne(cascade = {CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})
    private MySession session;
} 
```

**在我的 servlet 中：**

```
SessionHome sh = new SessionHome();               //DAO Class
MyRequestHome mrh = new MyRequestHome();          //DAO Class

MySession session = sh.findBySessionId(sessionId);  //Object is in the detached state
session.setUpdated(new Date());             //Update the Session update time stamp  
session = sh.merge(session);                    //Update the database with the session. I was hoping merge would reattach the detached object

MyRequest mr = new MyRequest(hsrequest, newSessionToken);
mr.setSession(session);
mrh.persist(mr);                                    //PersistentObjectException here. This is because of the MySession object I have set over here. 
```

首先，我从数据库中获取 MySession 对象，对其进行更新并将其设置在新创建的 MyRequest 对象中。当我尝试持久化 MyRequest 对象时，它给了我 PersistentObjectException。如果需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:07:27.823

Fixed by calling Merge on the transient MyRequest instance.

Before:

```
mrh.persist(mr); 
```

After:

```
mrh.merge(mr); 
```

Please let me know if there are any drawbacks in doing in this way.

# python - 在 IMAP IDLE 命令存在响应后获取电子邮件消息

> ID：14659334
> 
> 赞同：0
> 
> 时间：2013-02-02T06:30:02.533
> 
> 标签：python, imap, twisted, python-idle, rfc

使用存在响应中的消息总数作为获取 uid 的方法是否安全？

> 7.3.1\. 存在响应
> 
> 内容：无
> 
> ```
>  The EXISTS response reports the number of messages in the mailbox.
>   This response occurs as a result of a SELECT or EXAMINE command,
>   and if the size of the mailbox changes (e.g., new messages).
> 
>   The update from the EXISTS response MUST be recorded by the
>   client. 
> ```
> 
> 示例：S: * 23 EXISTS

应用内输出

```
2013-02-02 01:24:42-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] C: '0005 IDLE'
2013-02-02 01:24:42-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] S: '+ idling'
2013-02-02 01:25:17-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] S: '* 6 EXISTS'
2013-02-02 01:25:47-0500 [IMAP4Client (TLSMemoryBIOProtocol),client] S: '* 7 EXISTS' 
```

twisted 的 IMAP 客户端协议的修改版本

```
class IMAP4Client(imap4.IMAP4Client):
    """
        A client with callbacks for greeting messages from an IMAP server and new messages.
        """
    greetDeferred = None

    def __init__(self, *args, **kw):

        # is IDLE active
        self.idle_active = False
        # do we want to support IDLE
        self.idle_enabled = False
        imap4.IMAP4Client.__init__(self, *args, **kw)

    def serverGreeting(self, caps):
        self.serverCapabilities = caps
        if self.greetDeferred is not None:
            d, self.greetDeferred = self.greetDeferred, None
            d.callback(self)

    def enable_IDLE(self):
        print "Enabling Idle...."
        self.idle_enabled = True
        if self.queued == []:# if there is no current command
            # issue the idle command
            cmd = Command("IDLE", continuation = self.idle_continuation)
            d = self.sendCommand(cmd)
            # THEN mark it active NOT BEFORE as, if IDLE is active when a command is sent (such as the above IDLE command) it stops IDLE by sending the DONE line
            self.idle_active = True
            d.addCallback(self.idle_done)
            return d
        else:
            pass # IDLE will be enables when queued commands in waiting are done

    def lineReceived(self, line):
        print "S: %s" % str(repr(line))
        return imap4.IMAP4Client.lineReceived(self, line)

    def sendLine(self, line):
        print "C: %s" % str(repr(line))
        return imap4.IMAP4Client.sendLine(self, line)

    def idle_continuation(self, *args, **kw):
        pass# ignore for now

    def sendCommand(self, cmd):
        cmd.defer = Deferred()

        # checks to see if IDLE command can be enabled when this command is done
        cmd.defer.addCallback(self.command_done)

        if self.idle_active: # if we are waiting for IDLE
            self.sendLine("DONE")
            # append it to the queue and wait for the idle deferred callback
            self.queued.append(cmd)
            return cmd.defer

        if self.waiting:
            self.queued.append(cmd)
            return cmd.defer

        t = self.makeTag()
        self.tags[t] = cmd
        self.sendLine(cmd.format(t))
        self.waiting = t
        self._lastCmd = cmd
        return cmd.defer

    def command_done(self, result):
        print "A command was finished"
        print "Waiting %s" % self.waiting
        print self.queued
        print "IDLE Enabled %s" % self.idle_enabled

        # cannot use if not self.waiting so check if the command queue is empty 
        empty_queue = (self.queued == [])

        if empty_queue and self.idle_enabled: # yay no commands enable IDLE
            print "Enabling idle"
            self.idle_active = True
            # issue the command
            self.idle_active = True
            cmd = Command("IDLE", continuation = self.idle_continuation)
            d = self.sendCommand(cmd)
            d.addCallback(self.idle_done)
            return d
        return result

    def idle_done(self, result):
        print "IDLE Done"
        self.idle_active = False
        # twisted's own handling of the command queue should handle sending the next command
        # so there is no need to grab the next command as when the OK Response after DONE 
        # trigger it 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:46:32.733

我认为使用邮箱中的邮件数量是“足够安全的”，只要您立即采取行动并准备好在您需要显示邮箱时突然不同时回退到 SEARCH（也许一条消息已被删除）由另一个客户）。这实际上仅适用于非破坏性操作，因此如果您确实需要使用 EXPUNGE，请谨慎使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:07:01.543

呃……“安全”？如果您不控制核电站，那么可能。这是一条经验法则：当您的软件出现故障时，会不会有人受伤？如果没有，无论做什么都是安全的。

“正确”怎么说？不，这是不正确的，因为*EXISTS*响应告诉您邮箱中存在多少邮件。它不会告诉您其中任何一个的*UID*。

# ubuntu - 第一次更改主机名后，rabbitmq-server 无法启动

> ID：14659335
> 
> 赞同：57
> 
> 时间：2013-02-02T06:30:03.170
> 
> 标签：ubuntu, rabbitmq, django-celery

我正在为我的 django 项目使用 django-celery。昨天我更改了计算机的主机名（我使用的是 Ubuntu 12.04，编辑了文件'/etc/hostname'），下次重新启动后 django-celery 失败并出现错误

```
Consumer: Connection Error: [Errno 111] Connection refused. Trying again in 4 seconds... 
```

在对此错误进行一些研究后，我发现，更改我的主机名从[这里](https://bugs.launchpad.net/ubuntu/+source/rabbitmq-server/+bug/653405)导致了这个错误。我的 rabbitmq 启动日志显示

文件：/var/log/rabbitmq/startup_log

```
Activating RabbitMQ plugins ...

********************************************************************************
********************************************************************************

0 plugins activated:

ERROR: epmd error for host "jinesh": nxdomain (non-existing domain) 
```

我的 startup_err 文件是空的。

当我跑步时

```
root@jinesh:/home/jinesh# rabbitmqctl list_users
Listing users ...
Error: unable to connect to node rabbit@jinesh: nodedown

DIAGNOSTICS
===========

nodes in question: [rabbit@jinesh]

hosts, their running nodes and ports:
- unable to connect to epmd on jinesh: nxdomain

current node details:
- node name: rabbitmqctl4956@jinesh
- home dir: /var/lib/rabbitmq
- cookie hash: RGhmB2JR1LbZ57j7xWWTxg== 
```

我希望更改节点名可以解决此问题。但我找不到这样做的方法。任何人都知道如何解决这个问题？

**更新**

在更改主机名时，您必须同时更改`/etc/hostname`和`/etc/hosts`文件。

我重新安装了rabbitmq并解决了这个问题，将回答这个问题。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-06-06T22:06:02.663

删除旧安装的 RabbitMQ 以解决此问题。以下是重新安装 RabbitMQ 的步骤。这些命令以 root 用户身份运行：

1.  停止 RabbitMQ：`rabbitmqctl stop`

2.  改变`/etc/hosts`

3.  改变`/etc/hostname`

4.  卸载旧的 RabbitMQ：`dpkg -P rabbitmq-server`

5.  删除 RabbitMQ 的数据库：`rm -rf /var/lib/rabbitmq`

6.  找到运行rabbit的erlang进程：`ps ax | grep rabbit`

7.  杀死列出的进程

8.  重新安装 RabbitMQ：`apt-get install rabbitmq-server`

[我在我的博客](http://www.techsfo.com/blog/2013/06/rabbitmq-breaks-when-you-rename-hostname/)上写了这些步骤。

**修订**

我把我的博客搬到了一个新网站。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-08-07T07:36:17.350

感谢理查德 H 冯。

> **他的步骤帮助我解决了这个问题。**
> 
> **但我不必重新安装 rabbitmq**。

当我打开我的`/etc/hosts`文件时，我发现`IP`分配给我的主机名与实际的`ip(192.168.1.200 [static])`.

```
#/etc/hosts  
127.0.0.1       localhost  
192.168.1.115   HOSTNAME 
```

所以我只是将**IP地址**更改为`192.168.1.200`我的`/etc/hosts`文件中，它工作正常。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-08-13T00:51:19.003

理查德的回答很好，但是你可能会在 rabbitmq 队列中丢失一些信息。以下是使用新主机名保留先前设置的 rabbitmq 的可能方法。

**一个简短的回答：**

如果要保留新主机名的更改，则可以在其中创建一个引用旧主机名的`rabbitmq-env.conf`文件`/etc/rabbitmq`，一切都应该很好。以下是文件中应包含的`rabbitmq-env.conf`内容：

```
NODENAME=rabbit@OLDHOSTNAME 
```

添加配置文件后，重新启动rabbitmq服务器就可以了。（例如`service rabbitmq-server restart`（可能需要一个`sudo`带有 ubuntu 的））

有关更多详细信息，您可以从 rabbitmq 网站阅读：[https ://www.rabbitmq.com/man/rabbitmq-env.conf.5.man.html](https://www.rabbitmq.com/man/rabbitmq-env.conf.5.man.html)

**有关答案的更多详细信息：**

我在使用 CentOS 时遇到了类似的主机名问题......根本问题是当 rabbit 安装时，它在安装时引用了当前主机名。由于这是 rabbitmq 的事情，该解决方案应该适用于其他 linux 风格。如果您想查看完整答案，可以在以下位置查看：[rabbtimqadmin - 无法连接：[Errno -2] Name or service not known](https://stackoverflow.com/questions/29501234/rabbtimqadmin-could-not-connect-errno-2-name-or-service-not-known/29502570#29502570)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-02T08:25:07.250

您可以通过删除与rabbitmq 关联的erlang mnesia 数据库或重新安装rabbitmq 来解决此问题。

我从[rabbitmq mailing list](https://groups.google.com/forum/?fromgroups=#!searchin/rabbitmq-discuss/$20changing$20hostname/rabbitmq-discuss/PfqNVAkXi8M/31l1791aB8sJ)得到了第一个解决方案的提示。摘自答案，`The Erlang Mnesia database is host specific (because it is a distributed DB). The simplest way to get you fixed is to clear out the database dir.`

第二种方法是最简单的方法（虽然不推荐）。卸载做

```
dpkg -P rabbitmq-server 
```

如果您想了解有关安装/删除 debian 软件包的更多信息，可以参考此[链接。](http://www.thegeekstuff.com/2010/06/install-remove-deb-package/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-05-13T01:09:52.300

在 Windows 上，我面临的问题是由于 McAfee 防火墙。确切的错误是：

> 主机“<HOSTNAME>”的 epmd 错误：地址（无法连接到主机/端口）

我禁用防火墙后它就开始工作了

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-02-13T11:15:48.700

删除 RabbitMQ 数据库：`rm -rf /var/lib/rabbitmq/*`

这个动作解决了问题。我相信转储中的某处存储了与节点主机名和 ips 对应的记录。如果某些主机意外更改，这一事实会引起矛盾。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-05-19T20:46:07.060

我的解决方案是检查并更正**`$HOSTNAME`**and `/etc/hostname`。原来我的路由器有点糊涂，给了我一个错误的主机名域。重新启动这个后，我打电话`export HOSTNAME=the.correct.hostname`，我的兔子在没有重新启动服务器操作系统的情况下运行。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-01-25T15:31:32.767

就我而言，我没有以下条目`/etc/hosts`：

```
127.0.0.1 <hostname> 
```

我的机器的主机名在哪里`<hostname>`（由`hostname`命令给出）。添加该行后，RabbitMQ 成功启动。我没有任何早期的 RabbitMQ 安装。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-01-23T07:04:07.807

为了解决这个问题，我`/etc/hostname`用新的主机名更改了我的文件，然后重新启动了机器。之后，我跑了`rm -rf /var/lib/rabbitmq/mnesia/*`

然后重新启动服务：`sudo service rabbitmq-server restart`

在这一点上，它对我有用。如果它仍然不起作用，请`/etc/rabbitmq/rabbitmq-env.conf`通过添加这些信息来修改文件：

```
NODENAME=rabbit@YOUR_NEW_HOSTNAME
NODE_IP_ADDRESS=127.0.0.1
NODE_PORT=5672 
```

然后重启服务：`sudo service rabbitmq-server restart`

希望能帮助到你。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-09-12T17:42:26.243

在 Windows 上时（对不起——我知道这个主题是针对 Ubuntu 的）只需重新安装`RabbitMQ`服务：

```
rabbitmq-service.bat remove
rabbitmq-service.bat install 
```

该脚本位于`C:\Program Files\RabbitMQ Server\rabbitmq_server-<version>\sbin`文件夹中。

或者可能只是改变值`HKEY_LOCAL_MACHINE\SOFTWARE\Ericsson\Erlang\ErlSrv\1.1\RabbitMQ\@SName`就足够了。

线索：[https ://github.com/rabbitmq/rabbitmq-server/issues/620](https://github.com/rabbitmq/rabbitmq-server/issues/620)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-17T06:43:14.957

我遇到了同样的问题，并且按照 Richard H Fung 提供的步骤对我没有帮助。我还必须卸载这些软件包：`erlang erlang-epmd rabbitmq-server`

```
zypper remove erlang erlang-epmd rabbitmq-server
rm -rf /var/lib/rabbitmq/*
zypper install erlang erlang-epmd rabbitmq-server
systemctl enable rabbitmq-server.service
systemctl start rabbitmq-server.service 
```

如果您有其他操作系统而不是 openSUSE，只需使用您的包管理器删除这些包（例如`apt-get`）

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-08-07T14:00:33.033

唯一对我有用的解决方案：**从 deb 安装 erlang & rabbitmq**，所以：

首先删除：

```
apt-get purge rabbitmq-server
apt-get purge erlang
apt-get autoremove
reboot 
```

安装 wget 后：

```
sudo apt-get -y install socat logrotate init-system-helpers adduser
sudo apt-get -y install wget 
```

安装二郎：

```
wget https://packages.erlang-solutions.com/erlang-solutions_1.0_all.deb
sudo dpkg -i erlang-solutions_1.0_all.deb
sudo apt-get update
sudo apt-get install erlang 
```

安装rabbitmq：

```
sudo apt-get update
wget https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.7.17/rabbitmq-server_3.7.17-1_all.deb
sudo dpkg -i rabbitmq-server_3.7.17-1_all.deb
rm rabbitmq-server_3.7.17-1_all.deb 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2015-05-04T16:26:57.503

检查 qpidd 守护进程，它也可能已经占用了 rabbitmq 需要的端口。

```
sudo netstat -lnp 
```

# loops - 循环批处理，直到用户按下任意键

> ID：14659339
> 
> 赞同：0
> 
> 时间：2013-02-02T06:30:36.110
> 
> 标签：loops, batch-file, key

我希望在批处理过程中运行一个循环，例如退出循环的秒表或计时器，并且只要按下任何键，批处理就会继续。没有中断或 Cntl-C。没有批处理功能，必须在 Win64 环境下运行。编写一个简短的程序集 prog.exe 似乎是一项简单的任务，但我找不到一个可以快速检查键盘缓冲区并在 dos 错误级别返回简单答案而不暂停“秒表”并破坏目的的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T21:46:58.230

我写了那个“short assembly prog.exe”辅助程序，我把它命名为GetKey.exe，你可以从这个站点下载它：[Advanced Batch features via assistant .exe程序](http://www.dostips.com/forum/viewtopic.php?f=3&t=3428)，查找3号程序。例如：

```
:loop
   rem Do anything you want here...
   GetKey /N
if %errorlevel% == 0 goto loop
echo The key pressed have this code: %errorlevel% 
```

我的程序是如此之快，以至于我什至批量编写了一个基本版本的 Snake 动画游戏！它在同一个站点中，在程序 6-CursorPos.exe 下面

安东尼奥

# php - “Heroku 推送被拒绝，请验证您的帐户以安装此插件”为什么我会收到这个？

> ID：14659340
> 
> 赞同：1
> 
> 时间：2013-02-02T06:30:39.300
> 
> 标签：php, wordpress, heroku, push

这是我试图安装的回购[https://github.com/mchung/wordpress-on-heroku.git](https://github.com/mchung/wordpress-on-heroku.git)

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:51:37.640

与您使用的 Wordpress 设置一起使用的 buildpack[指定了几个用于安装的附加组件](https://github.com/mchung/heroku-buildpack-wordpress/blob/master/bin/release)。即使它们是免费的，您也必须使用已添加信用卡的经过验证的帐户才能使用它们。

# objective-c - 在objectiveC中字符串到日期和时间格式以及日期和时间到字符串

> ID：14659346
> 
> 赞同：-2
> 
> 时间：2013-02-02T06:31:25.650
> 
> 标签：objective-c, ios5, object, nsdate, nsdateformatter

我试图将字符串转换为日期时间，并将日期时间转换为字符串，它正在工作，但有些错误。我没有得到正确的甲酸盐。 **我的例外结果应该是：** like this.02/02/2013 05:24PM time should be 12 hours formate;

```
 NSString *dateTime = @"2013-02-02 15:54:31";
    int time=[[temp objectForKey:@"created"]intValue];
     NSLog(@"Time=%d",time);

    // Convert string to date object
        NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
        [dateFormat setDateFormat:@"YYYY-MM-DD HH:MM:SS"];
        [dateFormat setTimeZone:[NSTimeZone timeZoneWithName:dateTime]];
        NSDate *date = [dateFormat dateFromString:dateTime];
        NSLog(@"Nsdate=%@",date);

        // Convert date object to desired output format
        [dateFormat setDateFormat:@"hh:mma"];
        dateTime = [dateFormat stringFromDate:date];
        [dateFormat release];
        NSLog(@"DateTime=%@",dateTime);

    --------------------
    NSLogs :

     Time=2013
     DateTime=2013-02-02 17:06:09
     Nsdate=2013-01-02 11:30:00 +0000//it's not correct date
     DateTime=02/01/2013 05:00PM//it's not correct date and time// 
   ------------- 
    my excepting result should be like this:

    DateTime :02/02/2013 05:24PM 
```

如果您有任何想法，请剪切您的想法，它会帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:34:36.383

改变你的这一行

```
 [dateFormat setDateFormat:@"YYYY-MM-DD HH:MM:SS"]; 
```

到

```
 [dateFormat setDateFormat:@"YYYY-MM-dd HH:mm:SS"]; 
```

mm 和 dd 应该很小

希望对你有帮助。。

# ruby-on-rails - 如何使它成为一个应用程序常量？

> ID：14659350
> 
> 赞同：0
> 
> 时间：2013-02-02T06:32:00.563
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

导轨：3.2.11

我有这个模块，`lib`并且在`application.rb`. 我想`FORBIDDEN_USERNAMES`在整个应用程序中提供常量。常量是从路由生成的值数组。我无法将其设为初始化程序，因为尚未加载路由。

我下面的内容不起作用，因为`FORBIDDEN_USERNAMES`返回一个空数组。

```
# in lib
module ForbiddenUsernames    
  def self.names
    Rails.application.reload_routes!
    all_routes = Rails.application.routes.routes

    all_names = Array.new
    all_routes.each do |route|
      # populate all_names array
    end
    all_names.uniq
  end
end

FORBIDDEN_USERNAMES = ForbiddenUsernames.names
# when ForbiddenUsernames.names is called by itself, it does not return [] or nil 
```

在整个应用程序中，我如何制作它以便我可以使用`FORBIDDEN_USERNAMES`？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:07:41.263

我不明白你为什么希望这是一个常数。在我看来，您可以使用可记忆的行为。

```
# Wherever in your controller. Add helper_method if you need in the view (but would seem wrong)
def forbidden_usernames
  @forbidden_usernames ||= ForbiddenUsernames.names
end
helper_method :forbidden_usernames 
```

如果 @forbidden_​​usernames 为 nil，则将调用 ForbiddenUsernames.names，因此它只发生一次。

## 更新

```
# app/models/user.rb
def forbidden_usernames
  @forbidden_usernames ||= ForbiddenUsernames.names
end

def validate_not_forbidden
  !forbidden_usernames.include?(self.name)
end 
```

如果您需要在多个模型中使用此功能，请使用模块。您还可以在模块本身中使用forbidden_​​usernames memoized 方法。

```
module ForbiddenUsernames    
  def self.names
    @forbidden_names ||= self.populates_all_names
  end

  protected

  def populate_all_names
    Rails.application.reload_routes!
    all_routes = Rails.application.routes.routes

    all_names = Array.new
    all_routes.each do |route|
      # populate all_names array
    end
    all_names.uniq
  end
end 
```

# php - 如何回显查询

> ID：14659353
> 
> 赞同：1
> 
> 时间：2013-02-02T06:32:07.070
> 
> 标签：php, mysql

> **可能重复：**
> [为什么这会返回 Resource id #2？](https://stackoverflow.com/questions/4794927/why-does-this-return-resource-id-2)

我想回显`mysql_query("SELECT SUM(onlineplayers) FROM servers")`，但是当我将回显放在前面时，它显示资源 ID #2，当我`or die(mysql_error());`在最后添加时，它只输出 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:39:00.623

You need to fetch the query first:

```
$result = mysql_query("SELECT SUM(onlineplayers) FROM servers");
if($result){
  $data = mysql_fetch_assoc($result);
  echo $data[0];
} 
```

However, you shouldn't use the `mysql_` functions unless absolutely necessary. the `mysql` extension [is NOT recommended](http://ca3.php.net/manual/en/mysqli.overview.php) for use in new projects. Instead you should use PDO_mysql or mysqli

**Source:** [Why does this return Resource id #2?](https://stackoverflow.com/questions/4794927/why-does-this-return-resource-id-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T06:34:30.057

use this below code

```
$str = "SELECT SUM(onlineplayers) FROM servers";  //this will set the query in string format
echo $str;    // this will echo the query;
mysql_query($str);   // this will run the query 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T06:39:16.500

```
$q = mysql_query("SELECT SUM(onlineplayers) as `total` FROM servers"); // notice the "as `total`
$r = mysql_fetch_array($q); // will return the result
echo $r['total']; // will echo the count 
```

On a sidenote, please stop using `mysql_*` functions. More info [here](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T06:41:28.623

```
$str = "SELECT SUM(onlineplayers) FROM servers"; 
echo $str; 
$result = mysql_query($str); 
$row= mysql_fetch_array($result);
print_r($row); 
```

# jquery - 从动态jquery表单解析json post数据

> ID：14659355
> 
> 赞同：1
> 
> 时间：2013-02-02T06:32:36.307
> 
> 标签：jquery, json, forms, parsing, dynamic

我正在尝试从动态创建的 jquery 表单中解析 JSON 数据。用户可以单击“添加步骤”按钮添加任意数量（或少量）的表单字段（包括附加媒体链接），但我不知道如何在 PHP 中处理此类数据。这是我期望收到的一些示例表单 $_POST 数据：

```
Array
(
    [1] => Array //1, 2, 3, 4 are the position for this particular 'step' on the page
        (
            [Counter] => 1
            [Title] => step one
            [Step] => description
            [Links] => Array
                (
                    [0] => link 1
                    [1] => link 2
                )

        )

    [2] => Array
        (
            [Counter] => 2
            [Title] => step two
            [Step] => some kind of description
            [Links] => Array
                (
                    [0] => link 2
                )

        )

    [3] => Array
        (
            [Counter] => 3
            [Title] => step three
            [Step] => description (another one)
        )

    [4] => Array
        (
            [Counter] => 4
            [Title] => Step four
            [Step] => a lame description
            [Links] => Array
                (
                    [0] => link 1
                    [1] => link 2
                )

        )

    [tutorial_name] => tutorial name? jesus?
    [tutorial_description] => some useless description
    [tutorial_toolsused] => waste of a tools used
    [tutorial_keywords] => waste of keywords
) 
```

知道如何最好地处理此类数据（正则表达式，foreach）吗？我应该避免使用 post 协议吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:53:40.410

您可以使用`is_array()`PHP中的函数来实现解决方案。

基本上，是这样的。

```
foreach($_POST as $value) {
    if(is_array($value)) {
        //process your data here. i.e. the counter, step, links, title
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:40:33.537

如果碰巧有人感兴趣。再次感谢！

```
<?php
foreach($_POST as $value) {
        if(is_array($value)) {
            //process your data here. i.e. the counter, step, links, title
            echo $value['Position'] . "<br /><br />";
            echo $value['Counter'] . "<br /><br />";
            echo $value['Title'] . "<br /><br />";
            echo $value['Step'] . "<br /><br />";
            if(isset($value['Links'])){
                if(is_array($value['Links'])){
                    foreach($value['Links'] as $link){
                        echo $link . "<br /><br />";
                    }
                }
            }
        }
    }
?> 
```

# android - how to implement next and previous buttons in webview?

> ID：14659357
> 
> 赞同：0
> 
> 时间：2013-02-02T06:33:11.517
> 
> 标签：android, webview

i'm implemented the project in web-view. it retries the data from sqlite . i need next and previous button in the web-view. if i touch on next button it will display the next record in that database.(previous also )

Thanks, Vinay

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:37:42.137

On the top of Webview put two buttons with Next and Previous Arrows.

In the onClick() of Next write the goForward code and in Previous write goBack code as below

```
@Override
public void onClick(View v)
{
if(v==btnNext)
{
 if(webView.canGoForward())
{
webView.goForward();
}
}
if(v==btnPrevious)
{
 if(webView.canGoBack())
{
webView.goBack();
}
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:58:06.370

试试这个，首先存储所有记录字符串数组。

```
 String[] str = {"one", "two", "", "three"};

  int record= 0;
   next.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
                           record =  record +1;
            myWebView.loadData(record[1], "text/html; charset=UTF-8", null);
        }
    });

previous.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
                           record =  record -1;
            myWebView.loadData(record[1], "text/html; charset=UTF-8", null);
        }
    }); 
```

# java - Design pattern for flexible interface

> ID：14659358
> 
> 赞同：2
> 
> 时间：2013-02-02T06:33:15.957
> 
> 标签：java, design-patterns, interface

Suppose I have an interface API and classes FacebookAPI and FlickrAPI that implements this interface,

```
public interface API {
    Photo getPhoto(int id);
    Album getAlbum(int id);
}

package api;

import domainObjects.Album;
import domainObjects.Photo;

public class FacebookAPI implements API{

    @Override
    public Photo getPhoto(int id) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Album getAlbum(int id) {
        // TODO Auto-generated method stub
        return null;
    }

}

import domainObjects.Album;
import domainObjects.Photo;

public class FlickrAPI implements API{

    @Override
    public Photo getPhoto(int id) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Album getAlbum(int id) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

The issue is that I only know that at minimum both APIs(facebook and flickr) requires the photoId. Now suppose that to get a photo FacebookAPI requires AccessToken in addition to Id while FlickAPI requires APIKey + UserId in addition to photoId.

What Design Pattern can i use to solve this issue?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T06:38:58.873

Create a `Credentials` abstract class to be extended by concrete APi implementation and get that in method contracts.

```
public Album getAlbum(int id, Credentials c) { 
```

and similarily

```
public FlickrCredentials extends Credentials {
     String APIKey
     String UserId
} 
```

That is only feasible if the authentication method is similar with changing parameters (like URL parameters). The abstract class should specify the contract of the method actually using the values, something like:

```
public String buildToken(); 
```

that could be implemented for instance as:

```
@Override
public String buildToken() {
     return "APIKey="+getAPIKey()+"&UserId="+getUserId();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T06:41:45.020

不确定您使用的是哪种语言（目标 c？），但如果在 C# 中完成，那么您会想要使用泛型：

```
public interface API<TIdentifier> {
    Photo getPhoto(TIdentifier id);
    Album getAlbum(TIdentifier id);
} 
```

然后你的课程看起来像这样：

```
public class FlickrAPI implements API<FlickrIdentifier>
{
    @Override
    public Photo getPhoto(FlickrIdentifier id) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Album getAlbum(FlickrIdentifier id) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

然后你还需要 FlickrIdentifier 类：

```
public class FlickrIdentifier
{
    public string ApiKey { get; set; }
    public string UserId { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T06:37:45.067

Why cant you do something like this

```
public class FlickrAPI implements API{

  private String key;
  private UserId id;
  public FlickrAPI(String key, UserId id){
    this.key = key;
    this.id = id;
   //rest of initialzation
  }

} 
```

Similarly for the FacebookAPI class

# liferay-6 - How to get Server Name and Server Port from Liferay velocity template?

> ID：14659374
> 
> 赞同：4
> 
> 时间：2013-02-02T06:34:47.880
> 
> 标签：liferay-6, liferay-velocity

In jsp page we can get Server Name and Server Port by using request.getServerName() and request.getServerPort().`

As we can't get HttpServletRequest from Liferay velocity template, Is there any other way to get both Server Name and Server Port ? Please answer with a small code snippet..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:58:13.403

在您的 Liferay 资源中，您可以找到`com.liferay.portal.velocity.VelocityVariablesImpl`.

此类位于`portal-impl/src/com/liferay/portal/velocity/VelocityVariablesImpl.java`.

如果您检查速度上下文的所有条目（如 行`velocityContext.put(String key, Object value)`），特别是`insertVariables`方法中的那些，您会看到这会将您的 httpServletRequest 暴露在 name 下`"request"`。

因此，在您的模板中，您可以像访问任何其他速度上下文对象一样使用 key 访问您的请求对象`$request`。

然后，该对象将可用于它的所有方法和属性（如果是公共的）。

所以就这样做

```
$request.getServerName() 
```

和

```
$request.getServerPort() 
```

此外，如果您想将速度变量设置为其中之一，只需执行以下操作

```
#set ($my_amazing_variable = $request.getServerPort()) 
```

然后，您将能够`$my_amazing_variable`用作任何常规速度文字。

希望这可以帮助。

* * *

请注意！

请注意，您无法访问 Liferay 中所有类型的速度模板下的完全相同的变量和宏集。有不同的套装

*   主题模板
*   布局模板
*   网页内容模板

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T13:49:46.720

我已经使用以下代码创建了我的 URL 用于登录弹出窗口。谢谢 Ar3s。

```
#set($protocol = "http://")
#set($host = "$request.getServerName()")
#set($port = "$request.getServerPort()")
#set($column = ":" )
#set($url = "/c/portal/login?p_l_id=10858" )
#set($hrefurl = "$protocol$host$column$port$url")

<a class="sign-in" data-redirect="false" href="$hrefurl" id="yui_patched_v3_11_0_1_1420097083820_231" role="menuitem" title=""> <span id="yui_patched_v3_11_0_1_1420097083820_865" class="nav-item-label"> Sign In </span> </a> 
```

# hadoop - HTTP callback once oozie job is complete

> ID：14659389
> 
> 赞同：1
> 
> 时间：2013-02-02T06:37:49.853
> 
> 标签：hadoop, workflow, oozie

Is there a way to make and external call once a worflow is completed in Oozie. Reading some documentation it seems like possible. (Oozie can make HTTP callback notifications on action start/end/failure events and workflow end/failure events.)

[http://archive.cloudera.com/cdh/3/oozie/WorkflowFunctionalSpec.html](http://archive.cloudera.com/cdh/3/oozie/WorkflowFunctionalSpec.html)

But not sure how to do it and can it be an external api call on callback.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:56:44.453

在文档的下方，[第 5 节](http://archive.cloudera.com/cdh/3/oozie/WorkflowFunctionalSpec.html#a5_Oozie_Notifications)

外部 API 调用是什么意思？它只能执行 HTTP 获取 - 因此，如果您配置 servlet 端点或类似的东西以在访问 URL 时触发该外部 API 调用，那么您应该能够做几乎任何您想做的事情。

然而，值得注意的是，文档说：

> Oozie 将尽最大努力传递通知，如果失败，它将在放弃之前以预先配置的间隔重试通知预先配置的次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T16:50:06.657

您可以将两个属性添加到您的 oozie job.properties。变量 $jobId 、 $status 和 $nodeName 在运行时被替换。

```
1\. oozie.wf.workflow.notification.url=http://yourserver.com/some/path/$jobId/$status 
```

例如，这将为您在工作级别的[http://yourserver.com/some/path/上为每个状态更改提供 HTTP GET 调用](http://yourserver.com/some/path/)

```
myhost.softlayer.com - - [19/Feb/2016 10:35:02] "GET /dbgen/lineitem2/0000050-151213000221460-oozie-oozi-W/RUNNING HTTP/1.1" 200 -
myhost.softlayer.com - - [19/Feb/2016 10:35:35] "GET /dbgen/lineitem2/0000050-151213000221460-oozie-oozi-W/SUCCEEDED HTTP/1.1" 200 - 
```

这一个在您的 oozie 工作步骤之间提供了更详细的过渡

```
2\. oozie.wf.action.notification.url=http://yourserver.com/some/path/$jobId/$nodeName/$status 
```

服务器端的示例输出：

```
myhost.softlayer.com - - [19/Feb/2016 10:35:02] "GET /dbgen/lineitem2/0000050-151213000221460-oozie-oozi-W/:start:/T:ReadConfig HTTP/1.1" 200 -
myhost.softlayer.com - - [19/Feb/2016 10:35:03] "GET /dbgen/lineitem2/0000050-151213000221460-oozie-oozi-W/ReadConfig/S:RUNNING HTTP/1.1" 200 -
myhost.softlayer.com - - [19/Feb/2016 10:35:09] "GET /dbgen/lineitem2/0000050-151213000221460-oozie-oozi-W/ReadConfig/T:CheckStep HTTP/1.1" 200 -
myhost.softlayer.com - - [19/Feb/2016 10:35:10] "GET /dbgen/lineitem2/0000050-151213000221460-oozie-oozi-W/sqoop-table-import/S:RUNNING HTTP/1.1" 200 -
myhost.softlayer.com - - [19/Feb/2016 10:35:10] "GET /dbgen/lineitem2/0000050-151213000221460-oozie-oozi-W/CheckStep/T:sqoop-table-import HTTP/1.1" 200 -
myhost.softlayer.com - - [19/Feb/2016 10:35:29] "GET /dbgen/lineitem2/0000050-151213000221460-oozie-oozi-W/javaStatsReporting/S:RUNNING HTTP/1.1" 200 -
myhost.softlayer.com - - [19/Feb/2016 10:35:29] "GET /dbgen/lineitem2/0000050-151213000221460-oozie-oozi-W/sqoop-table-import/T:javaStatsReporting HTTP/1.1" 200 -
myhost.softlayer.com - - [19/Feb/2016 10:35:35] "GET /dbgen/lineitem2/0000050-151213000221460-oozie-oozi-W/end/T:null HTTP/1.1" 200 -
myhost.softlayer.com - - [19/Feb/2016 10:35:35] "GET /dbgen/lineitem2/0000050-151213000221460-oozie-oozi-W/javaStatsReporting/T:end HTTP/1.1" 200 - 
```

# asp.net - Role based access in asp.net mvc 3

> ID：14659393
> 
> 赞同：0
> 
> 时间：2013-02-02T06:38:37.840
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, form-authentication

How can i assign role to a user in asp.net mvc3 application ?

i tried doing following

```
 public ActionResult Login(LoginModel model)
    {
        if (ModelState.IsValid)
        {
            if (model.user_id == "admin" && model.password == "admin")
            {
                 FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(
                                                    1,
                                                    "admin",
                                                    DateTime.Now,
                                                    DateTime.Now.AddMinutes(30),
                                                    false,
                                                    "admin",
                                                    FormsAuthentication.FormsCookiePath);

                return JavaScript("window.location.replace('/Home/');");
            }

            else
            {
                return Content("Invalid User Id or Password.");
            }
        }
        else
        {
            return View(model);
        }
    } 
```

Now when i try to get the user role in any views, it never gives me the role as admin. How do i assign role after login ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:26:17.823

为什么要访问视图上的用户角色？您不应该这样做，如果有任何特定需求，从数据库中获取角色后，将角色存储在模型中，以便您可以通过模型属性读取视图中的角色。

如果您不想更改模型，那么您也可以将属性添加到 ViewBag。例如 ViewBag.UserRoles = "admin";

我注意到的另一件事是，您也没有创建主体对象并将其分配给 HttpContext.User 以便您可以基于此执行授权。

# android - 摆脱 textview 中的 q‌u‌e‌s‌t‌i‌o‌n 标记

> ID：14659404
> 
> 赞同：0
> 
> 时间：2013-02-02T06:39:37.970
> 
> 标签：android, json

我正在从我的资产文件夹中将文件读入 jsonobject。该文件包含 json 字符串。一些字符串包含“'”（撇号）字符。问题是文本视图显示“？” 代替这些撇号。为什么会这样。当我使用 mJsonObject.toString() 将 json 字符串打印到 logcat 时，它显示了正确的字符。

我怎样才能摆脱这个“？” 并表现出真实的性格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:50:57.577

撇号可能不是一个简单的`'`撇号，而是一些高级排版撇号，它们在您的字体中丢失和/或在字符集转换期间被破坏。最好将 JSON 文件中的印刷撇号替换为普通撇号。

如果您不想这样做，请使用转义符将其`\u`转义。这可以确保正确的字符最终出现在 JsonObject 中。如果您仍然得到问号，请确保您的字体支持该字符，并且您不会在其他字符集转换中破坏它。

如果由于某种原因不能使用`\u`转义，请确保使用正确的字符集读取文件。

# c# - Is it expensive to parse an ExpressionTree?

> ID：14659406
> 
> 赞同：5
> 
> 时间：2013-02-02T06:40:21.643
> 
> 标签：c#, linq, expression-trees

I am currently reading through the MSDN, [**Walkthrough: Creating an IQueryable LInQ Provider**](http://msdn.microsoft.com/en-us/library/bb546158.aspx) and there is a lot of use of the `ExpressionVisitor`.

It makes me wonder, is it an expensive operation to use this?

**Is it as expensive as Reflection?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:32:54.430

不，用 . 遍历表达式树应该很便宜`ExpressionVisitor`。

解析表达式树根本不需要运行时成本。*编译器在编译时*完成将表达式转换为对象树的所有工作。当有问题的对象在内存中创建时，甚至没有太多的运行时反射。当您看到如下方法调用时：

```
SomeMethod(Foo x => x.Property); 
```

并且 SomeMethod 的参数被`Expression`输入，然后编译器将代码转换为 IL，就像你写了这样的东西：

```
SomeMethod(new MemberExpression {
  Expression = new ParameterExpression("x", typeof(Foo)),
  Member = typeof(Foo).GetProperty("Property")
}); 
```

您可以查看生成的 IL 以了解完整的详细信息，或查看[Microsoft 文档](http://msdn.microsoft.com/en-us/library/bb397951.aspx)中的工作示例。涉及到一些反射（例如`MemberExpressions`保持`PropertyInfo`参考），但这一切都非常快。

如果您有一个您担心的应用程序，您应该对其进行分析（例如，最新版本的 Visual Studio 具有内置的性能分析器）并查看哪些特定部分运行缓慢。

# asp.net-mvc-3 - how to convert Anonymous type to int

> ID：14659407
> 
> 赞同：2
> 
> 时间：2013-02-02T06:40:30.493
> 
> 标签：asp.net-mvc-3, razor

I am using linq query in that i need all the values so first i am using linq query and

after that i am taking all values in one List like this

```
var lst = ProjectContext.My_prj_project.Select(i => new

             {
               Name = list                         

             }).Distinct().FirstOrDefault();                          

 ProjectReportDetailsModels l = new ProjectReportProjectCategoryDetailsModels();

 l.name= lst.Name;    // here i am getting error 
```

connot implicitly convert 'AnonymousType#1' to 'int'

So please send me any sample, example (or) related link

Thanks in Advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:53:18.860

这可能会帮助你

```
l.name = lst.Select(x=>x.Name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:07:04.010

you are getting a list in `lst` ? then why you are doing `FirstOrDefault()` ?

```
l.name = lst.Select(x=>x.Name).FirstOrDefault(); 
```

will solve the problem but i really cannot comprehend what you are doing ...

# android - Google Maps Android API v2 动画 GoogleMap 视图

> ID：14659408
> 
> 赞同：1
> 
> 时间：2013-02-02T06:40:39.070
> 
> 标签：android

我正在尝试制作将 Google Maps Fragment 包装在我的布局中的动画。以下动画似乎没有效果。

```
ObjectAnimator mapAnimator = ObjectAnimator.ofFloat(view, "translationY", -view.getHeight(), view.getHeight()); 
```

我曾尝试将片段包装在 FrameLayout 中并对其进行动画处理，但没有成功。我似乎只能用 FragmentManager 隐藏和显示地图。

根据这个[问题](http://code.google.com/p/gmaps-api-issues/issues/detail?can=2&start=0&num=100&q=animation&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Stars%20ApiType%20Internal&groupby=&sort=&id=4782&)，谷歌地图使用了一个不能动画的 SurfaceView。我找不到任何官方支持这一点。任何人都可以确认吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:10:01.290

> 我找不到任何官方支持这一点。

如果“this”表示 Maps V2 使用的事实，请将[a](https://github.com/romainguy/ViewServer)[放入您的应用程序](https://github.com/romainguy/ViewServer)`SurfaceView`中，将 Hierarchy View 连接到您在支持 Maps V2 的设备上运行的应用程序，然后查看您看到的内容。Cyril Mottier 就您引用的问题写了评论#1；既然他说这是一个，我相信他。[`ViewServer`](https://github.com/romainguy/ViewServer)`SurfaceView`

如果“this”表示`SurfaceView`无法动画化的事实，则可以通过阅读[.`TextureView`](http://developer.android.com/reference/android/view/TextureView.html)

# ruby-on-rails - Rails : How to display a post in a blog for normal users out side the post controller?

> ID：14659412
> 
> 赞同：0
> 
> 时间：2013-02-02T06:41:16.727
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

In my app, there's a seperate admin area to control everything including writing posts. The post routes point inside the admin panel :

```
resources :posts, path: '/admindashboard/posts' 
```

Now in the normal view, Im trying to display the posts inside the **pages controller** under the **blog action**. I have managed to list the posts in the blog. But linking to them and showing individual posts is the problem.

Not : I use a post slug instead of the id.

If I link to the post like this :

```
<%= link_to post.title, post  %> 
```

It will go to /admindashboard/posts/post-slug. But to access that url, we need to sign in. I need to put it like /blog/post-slug . How to do it? How to add the right action in the pages controller to display individual post pages?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:57:31.907

我认为你需要这样的[命名空间](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)

```
namespace :admindashboard do
  resources :posts
end 
```

# email - 使用 PHP 的 Amazon SES 取消订阅列表

> ID：14659417
> 
> 赞同：0
> 
> 时间：2013-02-02T06:41:57.737
> 
> 标签：email, amazon-ses

我使用亚马逊 SES 服务进行电子邮件营销。我正在使用的 PHP 类可以在[http://www.orderingdisorder.com/aws/ses/](http://www.orderingdisorder.com/aws/ses/)找到。

我想在 html 邮件中放置一个链接，用于从列表中取消订阅该用户。我正在向用户列表发送邮件，但是，我希望每个用户的链接都是唯一的。链接应显示为
[http://www.mydomain.com/mail_unsub.php?userid=mymails@gmail.com&key=kjhgporhfs](http://www.mydomain.com/mail_unsub.php?userid=mymails@gmail.com&key=kjhgporhfs)

我可以直接使用 SES 中的任何功能吗？请提出建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:43:15.503

您可以在页脚放置一个特殊的标签，如#unsub#。当您遍历邮件列表时，您需要将 unsub 标记替换为当前用户的电子邮件（当然也要添加[http://mydomain.com ）](http://mydomain.com)

当用户单击该链接时，您需要将它们从列表中删除。或将其标记为退订。它应该在 mail_unsubscribe.php 中完成

# android - 如何在android中的复选框上使用四种类型的图像

> ID：14659420
> 
> 赞同：1
> 
> 时间：2013-02-02T06:42:21.497
> 
> 标签：android, checkbox

![在此处输入图像描述](../Images/135b1299cc7f7e3c0433eebb953f8309.png) ![在此处输入图像描述](../Images/9a91c1f4f3301db0e8c5c287f5a09685.png) ![在此处输入图像描述](../Images/456f944d725b31dc2426bbb7e27422d2.png) ![在此处输入图像描述](../Images/1d96da7f8fda4d711ea1e0ffa5e63dcb.png)

```
 <?xml version="1.0" encoding="utf-8"?>
 <selector  xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:state_checked="true" android:state_focused="true"
android:drawable="@drawable/checkbox_checked_pressed" />
<item android:state_checked="false" android:state_focused="true"
android:drawable="@drawable/checkbox_pressed" />
<item android:state_checked="false"
android:drawable="@drawable/checkbox_normal" />
<item android:state_checked="true"
android:drawable="@drawable/checkbox_checked" />
</selector> 
```

这是我的 xml 可绘制对象。如何对所有四个图像使用复选框状态。请帮助我这有什么问题，非常感谢这方面的任何帮助。谢谢。

# android - 如何放置一个从中心偏移的android组件？

> ID：14659422
> 
> 赞同：1
> 
> 时间：2013-02-02T06:42:26.033
> 
> 标签：android, xml, imageview, offset, centering

我想将我的图像视图放在中心上方一点。我使用 centerHorizo​​ntal="true" 和 paddingBottom ，但它被放置在绝对中心。“填充”没有做这项工作。我应该怎么办？

```
<ImageView
    android:id="@+id/imageview"
    style="@style/myImageView"
    android:layout_width="200dp"
    android:layout_height="100dp"
    android:layout_centerHorizontal="true"
    android:paddingBottom="300dp"
    android:src="@drawable/ic_launcher" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:30:25.117

尝试使用 layout:margin_bottom 。如果没有得到你想要的。应用 relativelayout 和相同的 bottom_margin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:32:37.387

找不到确切的答案，但有另一种方法。我在相对布局内创建了一个框架布局，将图像视图放置在其中，然后将重力设置为中心。如果有更好的解决方案请留言。我的代码：

```
Inside the relative layout--
 <FrameLayout
    android:layout_width="800dp"
    android:layout_height="400dp"
    android:layout_alignParentRight="true"
    android:layout_alignParentBottom="true" 
    android:layout_marginRight="30dp"
    android:layout_marginBottom="100dp"

    >
    <ImageView
    android:id="@+id/imageview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:src="@drawable/ic_launcher"
    style="@style/myImageView" />
</FrameLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T07:34:01.050

我希望您使用的是相对布局，而不是线性或绝对布局。

# python - 如何在lxml，Python中将<转换为<？

> ID：14659423
> 
> 赞同：3
> 
> 时间：2013-02-02T06:42:28.520
> 
> 标签：python, lxml

有一个xml文件：

```
<body>
    <entry>
         I go to <hw>to</hw> to school.
    </entry>
</body> 
```

出于某种原因，我在使用 lxml 解析器解析它之前更改`<hw>`了 to`&lt;hw&gt;`和`</hw>`to 。`&lt;/hw&gt;`

```
<body>
    <entry>
         I go to &lt;hw&gt;to&lt;/hw&gt; to school.
    </entry>
</body> 
```

但是修改解析出来的xml数据后，我想得到一个`<hw>`元素，而不是`&lt;hw&gt;`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T07:26:13.270

首先找到一个`unescape`函数：

```
from xml.sax.saxutils import unescape

entry=body[0] 
```

unescape 并用原来的替换它：

```
body.replace(entry, e.fromstring(unescape(e.tounicode(entry)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:14:36.973

If you know which element contains wrongly escaped elements:

```
# parse whole document as usual..
# find the entry element..
# parse the fragment
fragment = lxml.fromstring(entry.text)
# (optionally) add the fragment to the tree
entry.text = None
entry.append(fragment) 
```

# mysql - 如何在 MySQL 中加入这些数据？

> ID：14659424
> 
> 赞同：3
> 
> 时间：2013-02-02T06:42:39.013
> 
> 标签：mysql, sql

如果我有这样的表：

**`TABLEA`**：

```
id| object | type
1 | greg | person
2 | mary | person
3 | jared | person
4 | kelly | person
5 | melissa | person
6 | william | person
7 | skiing | hobby
8 | biking | hobby 
```

**`TABLEB`**：

```
id | husband | wife
1 | greg | mary
2 | jared | kelly
3 | william | kelly 
```

**`TABLEC`**：

```
id | female | hobby
1 | mary | skiing
2 | kelly | biking 
```

有什么方法可以得到一个结果表：

**`TABLED`**：

```
id | a | b | link
1 | 1 | 2 | related
2 | 3 | 4 | related
3 | 6 | 4 | related
4 | 1 | 4 | related
5 | 2 | 7 | likes
6 | 4 | 8 | likes 
```

仅使用 MySQL 查询（/ies）？

*   逻辑基本上会从表 B 和表 B 的所有行开始迭代。
*   第三列是`related`当被选中的表是 时`TableB`，是`likes`当正在处理的表是表 B 时。

示例逻辑是：

查看`TABLEB`(丈夫) greg 和妻子 (mary) 的第一行，它从 TABLEA 向上查找，发现 greg 位于第 1 行 (id 1)，而 mary 位于第 2 行 (id 2)，并使用第一行是 1 | 2.

是否有一个查询可以执行某些连接或某些操作，而无需以编程方式遍历 TABLEB 的所有行，然后遍历 TABLEC 的所有行以生成所需的 TABLED？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:57:17.413

您将需要`JOIN`两次`tablea`使用`tableb`：

*   一个用于`husband`>`object`另一个，
*   一个为`wife` > `object`。

这样就可以在同一行获取夫妻的两个id。

与`Tablec`with相同`tablea`。然后使用`UNION`(implicit distinct) 或`UNION ALL`合并两个结果集。

就像是：

```
SELECT
  (@rownum := @rownum + 1) AS id,
  sub.*
FROM
(
  SELECT 
    ah.id     AS a,
    aw.id     AS b,
    'related' AS link
  FROM tableb       AS b
  INNER JOIN Tablea AS ah ON ah.object = b.husband AND ah.type = 'person'
  INNER JOIN Tablea AS aw ON aw.object = b.wife    AND aw.type = 'person'
  UNION ALL
  SELECT
    a.id  AS a,
    a2.id AS b,
    'hobby'
  FROM tablec       AS c
  INNER JOIN tablea AS a  ON a.object  = c.female 
  INNER JOIN tablea AS a2 ON a2.object = c.hobby AND a2.type = 'hobby'
) AS Sub, (SELECT @rownum := 0) AS t; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/7cc1f/7)

这会给你：

```
| ID | A | B |    LINK |
------------------------
|  1 | 1 | 2 | related |
|  2 | 3 | 4 | related |
|  3 | 6 | 4 | related |
|  4 | 2 | 7 |   hobby |
|  5 | 4 | 8 |   hobby | 
```

**注意：**

*   此查询将只为您提供 5 行，其中您要查找的预期结果集是 6。它缺少 row ，`4 | 1 | 4 | related`因为在. 正如您在问题中解释的那样。`greg``keyll``tableb`

*   新列`id`是自动增量 id，从结果集中生成，不是从表中选择的。

* * *

如果您需要从此选择创建一个全新的表，请使用以下语法：

```
CREATE TABLE Tabled
AS
SELECT ...
... -- the same previous select query 
```

并且您将拥有一个`tabled`具有与 this 相同结构的新表`SELECT`。

[**就像在这个更新的小提琴中一样。**](http://sqlfiddle.com/#!2/3bfee/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:58:19.977

```
create table tabled (
  id int auto_increment,
  a varchar(10),
  b varchar(10),
  link varchar(10));

insert into tabled (a, b, link)
select a1.id a, a2.id b, 'related' link
from tablea a1
join tableb b on a1.object = b.husband and a1.type = 'person'
join tablea a2 on a2.object = b.wife and a2.type = 'person'
union all
select a1.id a, a2.id b, 'likes' link
from tablea a1
join tablec c on a1.object = c.female and a1.type = 'person'
join tablea a2 on a2.object = c.hobby and a2.type = 'hobby'; 
```

# java - 是否有直接对二维数组进行排序的内置方法？

> ID：14659425
> 
> 赞同：0
> 
> 时间：2013-02-02T06:42:38.567
> 
> 标签：java, arrays, multidimensional-array, sorting, built-in

Java中是否有直接对二维数组进行排序的内置方法

例如：如果我有一个名字和电话号码的数组，我可以根据名字对其进行排序，而每个名字都会使用内置函数保留它的电话号码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T06:46:47.343

将您的二维数组转换为以下类的一维数组，然后使用带有自定义比较器的内置方法进行排序。您还可以使此类与自身具有[可比性](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)。

```
class Person{
    public String name;
    public String phNumber;
} 
```

或者[`TreeMap`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)，正如 sansix 所建议的那样，使用键作为名称，值作为 phNumber。不再需要比较器，并且数据将始终被排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T06:55:47.897

是你的数据结构`[[name1, name2, ...], [phone1, phone2,...]]`还是`[[name1, phone1], ...]`？如果是后者，您可以使用[比较器](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)。

```
class NameAndPhoneComparator implements Comparator<String[]> {
    public int compare(String[] o1, String[] o2) {
        int c = o1[0].compareTo(o2[0]);
        if (c != 0) return c;
        return o1[1].compareTo(o2[1]);
    }
} 
```

然后使用[Arrays.sort](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T%5b%5d,%20java.util.Comparator%29)

# ios - 在后台通过 adHoc 网络在至少两台 iOS 设备之间进行点对点语音聊天

> ID：14659428
> 
> 赞同：2
> 
> 时间：2013-02-02T06:42:45.493
> 
> 标签：ios, p2p, gamekit

我想制作一个应用程序，使至少两个 iOS 设备能够通过 adHoc 网络进行语音聊天，即

iPhone A：adHoc 网络（WIFI 热点） iPhone B：连接到 WIFI 热点（Iphone A）

然后，当应用程序在后台时，他们可以进行语音聊天。

我可以通过 Game Kit 做到这一点吗？如果可以，可以将应用提交到应用商店吗？

谢谢！

# gsm - 编程 GSM 模块以发送短信

> ID：14659432
> 
> 赞同：0
> 
> 时间：2013-02-02T06:43:34.493
> 
> 标签：gsm

我想使用一个独立的 GSM 模块，它可以通过短信或电话与电视、空调、冰箱等其他系统连接

例如： 1\. 如果 GSM 模块连接到烟雾传感器，当有警报时，GSM 模块应该能够以 SMS 的形式发送。

我认为需要一个硬件组件（连接到烟雾传感器和 GSM 模块），我可以在其中安装程序以在烟雾传感器发出信号时发送 SMS 消息。

我想知道这个硬件组件可以是什么，可以使用哪些编程语言以及硬件组件如何与各种设备交互。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:55:10.227

获得可编程 GSM 模块的一种简单方法是获得便宜的 Android 智能手机。对于连接性，您需要构建自己的解决方案，除非传感器已经有一些接口。您可能想为此研究 Arduino 微控制器。您可以使用 Wifi、蓝牙、USB（较新的设备支持 USB 主机模式，便宜的可能不支持）或音频插孔连接到 Android 设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T20:15:37.957

最佳解决方案取决于您的资源以及您需要多少设备。

如果您有大量预算和硬件和软件设计师，那么您可以使用来自 Cinterion 或 Telit 等 m2m 模块供应商的裸 GSM/UMTS 模块。并拥有控制它的MCU。

但是如果您只需要很少的设备，那么您可以使用一些可编程的 GSM/UMTS 终端模块，其中包含所有需要的东西：外壳、SIM 支架、天线连接器、一些 GPIO 和调制解调器。

例如Cinterion TC65T就是这种终端模块。它可以运行 java (J2ME) 程序。TC65T 的 Java 程序可以访问 GPIO，例如可以连接到烟雾传感器。Java 程序也可以发送 SMS 消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-20T16:21:21.723

Cinterion TC65T 终端是带有 Java 虚拟机的 2G 蜂窝设备，允许您运行 J2ME 3.2 应用程序。现在，您可以使用终端，例如 Cinterion EHS6T-USB，它是带有 Java 的 2G 和 3G 设备。

您可能会发现更容易获得 Cinterion“概念板”，它上面有一个支持 Java 的 2G 和 3G 蜂窝模块以及一个用于 Arduino 样式屏蔽的接口。

[http://www.gemalto.com/m2m/development/cinterion-concept-board](http://www.gemalto.com/m2m/development/cinterion-concept-board)

它通过 USB 引线运行，插入您的笔记本电脑或 PC，无需其他外部电源即可进行开发。我使用其中一个连接到电池，并插入一个 Arduino 继电器板，以便能够通过 SMS 打开和关闭我们的圣诞树灯。

# yaml-cpp - 如何设置 yaml-cpp 节点样式？

> ID：14659434
> 
> 赞同：3
> 
> 时间：2013-02-02T06:44:00.013
> 
> 标签：yaml-cpp

我有一个vector3类。

```
class vector3
{
    float x, y, z;
}

node["x"] = vector3.x;
node["y"] = vector3.y;
node["z"] = vector3.z; 
```

结果是

```
x: 0
y: 0
z: 0 
```

我希望结果是：

```
{x: 0, y: 0, z: 0} 
```

如果使用旧的 API，我可以`YAML::Flow`用来设置样式：

```
YAML::Emitter emitter;
out << YAML::Flow  << YAML::BeginMap << YAML::Key << "x" << YAML::Value << x << YAML::EndMap 
```

使用新的 API，如何设置样式？

我在 yaml-cpp 项目问题页面上问了这个问题：

[https://code.google.com/p/yaml-cpp/issues/detail?id=186](https://code.google.com/p/yaml-cpp/issues/detail?id=186)

我得到了答案：

> 您仍然可以使用发射器并设置流样式：
> 
> ```
> YAML::Emitter emitter;
> emitter << YAML::Flow << node; 
> ```

但这`vector3`是对象的一部分。我专门化`YAML::convert<>`模板类

```
template<>
struct convert<vector3>
{
    static Node encode(const vector3 & rhs)
    {
        Node node = YAML::Load("{}");
        node["x"] = rhs.x;
        node["y"] = rhs.y;
        node["z"] = rhs.z;

        return node;
    }
} 
```

所以我需要返回一个节点，但发射器无法转换为节点。

我需要对象喜欢这样：

```
GameObject:
  m_Layer: 0
  m_Pos: {x: 0.500000, y: 0.500000, z: 0.500000} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-14T20:44:32.533

不久前，节点接口在 yaml-cpp 中进行了扩展，以包含一个`SetStyle()`在任何地方添加以下行的函数`encode`应该具有所需的结果

```
node.SetStyle(YAML::EmitterStyle::Flow); 
```

# php - 使用 PHP 从 CKEditor 将内容导出到 MS Word 并从 MS Word 导入内容

> ID：14659437
> 
> 赞同：0
> 
> 时间：2013-02-02T06:44:14.943
> 
> 标签：php, ckeditor

我正在为印度的一家新闻机构构建一个 PHP 应用程序。使用此应用程序，记者可以从各个位置发布他们的报告（新闻或功能）。这些报告在得到总编辑的批准后送报刊印。为了帮助这些记者完成他们的日常任务，我的应用程序使用了 CKEditor，使用这个编辑器报告可以在系统中发布他们的报告。

现在我想构建一个功能（使用 PHP 和 CKEditor），记者可以使用该功能将格式化内容从 MS Word 导入 CKEditor，在 CKEditor 中处理导入的内容，一旦完成，他们可以将修改后的内容导出到 MS Word 形式的 CKEditor。

如果有人可以指导我如何实现此功能，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T15:51:01.617

我有类似的问题，我发现的唯一方法是使用将 html 转换为 word 的 Gembox.Document（500 美元）（非常好）。请告诉我您是否找到了另一种可能是免费的解决方案。谢谢！

# sql-server - 如何将 SQL 转换为 SSIS 任务？

> ID：14659439
> 
> 赞同：1
> 
> 时间：2013-02-02T06:44:45.333
> 
> 标签：sql-server, batch-file, ssis

我使用批处理文件执行了几个 SQL 查询。我也想使用 SSIS 执行所有这些 SQL。有人可以建议我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:52:17.003

这是创建 SSIS 包的基础知识的链接，我去了谷歌并输入了“初学者的 ssis”：

[http://www.codeproject.com/Articles/155829/SQL-Server-Integration-Services-SSIS-Part-1-Basics](http://www.codeproject.com/Articles/155829/SQL-Server-Integration-Services-SSIS-Part-1-Basics)

您可能希望使用一个或多个“执行 SQL 任务”。可以在以下位置找到这些指南：

[http://www.sqlis.com/sqlis/post/The-Execute-SQL-Task.aspx](http://www.sqlis.com/sqlis/post/The-Execute-SQL-Task.aspx)

您可能想要使用

> ConnectionType：OLE DB（或 ADO.net）
> Connection：单击此处设置连接管理器（应该是文本框右侧的按钮）
> ResultSet：Single Row
> SQLSourceType：直接输入
> SQLStatement：您的 SQL 命令在这里

现在不要太担心其他设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:27:17.430

这是一个悬而未决的问题。您可以简单地创建一个连接字符串并调用各个 sql 或存储过程并完成它。但这不应该是目标。

SSIS 解决方案相对于 SQL 语句提供的一个优势是可以将任务分解为更小的步骤，从而使您的解决方案更具结构性和可维护性。

# php - 独特的会话 WordPress

> ID：14659446
> 
> 赞同：1
> 
> 时间：2013-02-02T06:45:42.383
> 
> 标签：php, wordpress, session

我想一次只允许跨浏览器和 PC 的一个会话。如果在 Wordpress 中启动新会话，我想“断开”或注销旧会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:14:15.487

Seems you would hook into the account sharing function and expire the session from there. I think there will still be some limited access, the expired user may still have while their cookies remain on their system. This functionality does not exist. You would need to develop a plugin.

You can start from here: [http://www.frank-verhoeven.com/using-session-in-wordpress/](http://www.frank-verhoeven.com/using-session-in-wordpress/)

**Note:** Maybe you get better answers from [here](http://wordpress.stackexchange.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:52:50.827

包括以下代码`function.php`

```
function kana_init_session()
{
  session_start();
}

add_action('init', 'kana_init_session', 1); 
```

它对我有用，相信它也对你有用。[我从这里](http://www.kanasolution.com/2011/01/session-variable-in-wordpress/)学到了窍门。

# android - 在Android中，如何在Activity中通过代码设置值时停止TextChange事件？

> ID：14659447
> 
> 赞同：4
> 
> 时间：2013-02-02T06:46:00.977
> 
> 标签：android, events, android-edittext

键入内容时，我需要捕捉 EditText 的 TextChange 事件。但是当我在活动代码中更改 EditText 的值时，我不希望它被触发。

我能做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T06:51:20.633

```
private boolean listenForChanges = true;

...

@Override
public void afterTextChanged(Editable s) {
    if( listenForChanges ) {
        // Process edits here
    }
}

...

listenForChanges = false;
myEditText.setText( "Some text" );
listenForChanges = true; 
```

# joomla - 不知道为什么我的 PHP 脚本的输出在字符串中包含随机嵌入空格

> ID：14659449
> 
> 赞同：0
> 
> 时间：2013-02-02T06:46:05.620
> 
> 标签：joomla, jumi

我编写了几个 PHP 脚本来读取数据库的内容并将这些内容输出到电子邮件中。每隔一段时间，我会看到一个 SPACE (0x20) 字符嵌入到输出中不应该有的地方。例如，在一个脚本中，我引用了一个 PHP 全局变量，其中正好包含“n”个非空格字符，有时（并非总是），当该变量转储到电子邮件消息中时，该字符串将出现一个嵌入的空白（使字符串“n+1”的总长度）。其他时候，HTML 标记（例如 <BR>）将显示为 <BR>（注意“B”之前的空格）。

因为脚本的行为不一致（一些电子邮件受到影响，而另一些则没有），我似乎找不到问题所在。

我附上了一个 PHP 脚本的链接，该脚本偶尔会在 BREAK 标记中嵌入一个空格。我已经删除了向数据库提供特定登录信息的行。否则，其他一切都完好无损。在您可以在下面的链接中找到的代码文件中，第 281 行是包含带有嵌入式 SPACE 的 BREAK 命令的行（如上所述）。这种情况只发生过一次！

[http://jem-software.com/temptest.txt](http://jem-software.com/temptest.txt)

我想唯一可能相关的信息是这个脚本文件取自输入到 Joomla 中包含的 JUMI 代码块的代码！基于网站。

编辑1：

谢谢你，里卡多，你的建议。这里有一些更清楚的说明：

1.  我没有阅读电子邮件并解析结果以插入数据库。恰恰相反，我正在从数据库中读取数据并使用结果来创建电子邮件。我将检查数据库以查看使用了什么字符集，并显式传递字符集以查看是否有区别。

2.  我不使用 Joomla 函数来访问数据库，因为我引用的数据库在 Joomla 之外！环境。它是由几年前编写的 PHP 脚本创建的预先存在的数据库。当我使用 Joomla 重写我的旧网站时，我想完整地“移植” PHP 数据库访问代码，所以我安装了 JUMI 插件来实现这一点。

3.  我将检查数据库中的字符编码并将其与电子邮件的字符代码同步。

4.  我不明白字符编码问题会如何导致将空格插入硬编码的 HTML 标记中——该标记不是来自任何数据库，而是作为文字字符串输入到电子邮件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:51:30.633

这是一个奇怪的问题，但这是我的两分钱：

首先是您没有使用 Joomla 函数来访问数据库和邮件子系统。虽然这可以工作，但它并不是很好。

第二个是，这闻起来像字符集/代码页问题。

**以下是关于字符集问题的一些注意事项：**

我快速阅读了您的代码，并没有发现任何错误。但是 Joomla 使用 UTF-8，并且您的查询没有指定它（缺少 mysql_set_charset()！），这可能是第一个问题。

第二个是您阅读的电子邮件将具有不同的字符集，具体取决于发件人的设置。确保正确处理代码页问题：以下是我用于解析电子邮件的函数片段：

```
$mime = imap_fetchmime($this->connection, $this->messageNumber, $partNumber);
return $this->decodeMailBody($data,$mime); // QUOTED_PRINTABLE

function decodeMailBody($string,$mime) {
    $str = quoted_printable_decode($string);

    echo "<h3>mime: $mime; charset $charset</h3>";
    //mime: Content-Transfer-Encoding: quoted-printable Content-Type: text/plain; charset=utf-8
    //mime: Content-Transfer-Encoding: quoted-printable Content-Type: text/plain; charset=windows-1252
    $mimes = explode('charset=',$mime);
    foreach($mimes as $mimepiece) {
        $charset = $mimepiece;
    }       
    $charset = strtolower(trim($charset));
    if ($charset == 'utf-8') {
        return $str;
    } else {
        return iconv($charset, 'UTF-8', $str);
    }
} 
```

最后，确保在解析后将邮件插入数据库时​​使用 utf-8。

# android - 使用 editText 作为按钮

> ID：14659455
> 
> 赞同：0
> 
> 时间：2013-02-02T06:47:12.287
> 
> 标签：android

我做了一个 EditTest `focusable="false"`。

如何使用 EditText 移动到下一个 XML 表单？

是否可以？

如何使用 onclicklistner 编辑文本？

```
android:id="@+id/editText2"
android:layout_width="280dp"
android:layout_height="wrap_content"
android:hint="Agenda Template"
android:ems="10"

android:focusable="false" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:00:51.017

设置您的edittext`android:clickable="true"`并添加点击侦听器，如下所示：

> ```
>  <EditText
>     android:id="@+id/editText1"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_alignBottom="@+id/refresh"
>     android:layout_centerHorizontal="true"
>     android:ems="10" 
>     android:clickable="true"
>     android:focusable="false">
> 
>    EditText m_et=(EditText)findViewById(R.id.editText1);            
>         m_et.setOnClickListener(new OnClickListener() {             
>             @Override
>             public void onClick(View p_v) {
>                 // TODO Auto-generated method stub
>         System.out.println("EditeText Cliecket ===============");
>             }
>         }); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:58:21.113

```
 public class MainActivity extends Activity {

EditText ev;
Button b;
TextView tv;
static String str;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ev=(EditText)findViewById(R.id.editText1);
    b=(Button)findViewById(R.id.button1);
    tv=(TextView)findViewById(R.id.textView1);

    ev.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            System.out.println("edittext button");

        }
    });
    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            str=ev.getText().toString();
            tv.setText(str);
            //getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
            imm.hideSoftInputFromWindow(ev.getWindowToken(), 0);

            // TODO Auto-generated method stub

        }
    });

    }

  } 
```

试试这个代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T07:03:34.557

在 editText 上使用 OnTouchListener 而不是在 onClickListene 上。这可能有效。

# iphone - 如何找到音轨存在

> ID：14659457
> 
> 赞同：3
> 
> 时间：2013-02-02T06:47:25.760
> 
> 标签：iphone, ios, ios5, ios6

如何查找视频中是否存在音轨？我正在使用 AVUrlAsset 类来加载资产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:16:02.690

```
if ([[asset tracksWithMediaType:AVMediaTypeAudio] count] > 0)
{
AVAssetTrack *sourceAudioTrack = [[asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
[trackB insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:sourceAudioTrack atTime:kCMTimeZero error:&error];
} 
```

# c++ - 浮点异常问题

> ID：14659460
> 
> 赞同：0
> 
> 时间：2013-02-02T06:47:42.203
> 
> 标签：c++, debugging, exception, error-handling, floating-point-exceptions

我尝试过调试器和 Catch and throw，尽管我承认我对这两个都不满意。但我无法在我的程序中找到浮点异常的原因。奇怪的是它对于数字 <= 35 运行完美。除此之外，它引发了异常。问题出在哪里？

```
int fibo(int n)
{   if(n==0 || n==1)
        return 1;
    int p=1;
    while(n>1)
        p*=(n--);
    return p;
}

int main()
{   int T;
    int N, M;
    cin>>T;
    for(int i=0; i<T; i++)
    {
        cin>>N>>M;
        int cnt=1;
        int ones=N, twos=0;
        if(ones==1 && M==1)
        {   cout<<"CORRECT"<<endl;
            continue;
        }
        else if(ones==1 && M!=1)
        {   cout<<"INCORRECT"<<endl;
            continue;
        }

        while(ones>=2)
        {   
            ones-=2;
            twos++;
            cnt+= fibo(ones+twos)/( fibo(ones) * fibo(twos) );
        }
        cout<<cnt<<endl;
        int tmp=0;
        while(cnt>0)
        {   if(cnt%2 == 1)
                tmp++;
            cnt/=2;
        }
        if(  tmp==M  )
            cout<<"CORRECT"<<endl;
        else
            cout<<"INCORRECT"<<endl;
    }

    system("pause");
    return 0;
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T06:55:02.733

“浮点异常”不是 C++ 异常。`try`并且`catch`不会帮助你。这是一个不幸的术语，但它来自操作系统，更像是“崩溃”。

更令人费解的是，当您尝试执行*整数*除以零时，您可以在某些平台上看到它。我没有解开你的代码，但是添加了大量的调试输出并跟踪你的变量的值，并找到你被零除的地方，因为，你在某处做。:)

我唯一能看到候选人的地方是：

```
cnt+= fibo(ones+twos)/( fibo(ones) * fibo(twos) )
//                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

# android - 当用户在edittext中输入新文本时如何从edittext追加文本

> ID：14659471
> 
> 赞同：0
> 
> 时间：2013-02-02T06:49:41.670
> 
> 标签：android, android-edittext, append

我正在制作一个拼字游戏得分手应用程序。他用户输入字母，在 EditText 中，计算分数并显示单词形式......现在如果另一个玩家要在前一个单词中添加字母，用户不应该重新输入他只需要的单词中的字母添加前一个单词的字母......说 - “inter”是前一个单词......添加“n”应该显示“intern”再次添加“ational”应该显示“international”......任何帮助都是非常感谢...非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:53:36.173

```
 TextWatcher inputTextWatcher = new TextWatcher() {
    public void afterTextChanged(Editable s) { 
            textview.setText(s.toString());
        }
    }

public void beforeTextChanged(CharSequence s, int start, int count, int after){
}
public void onTextChanged(CharSequence s, int start, int before, int count) {
}
};

editText.addTextChangedListener(inputTextWatcher); 
```

试试这个

# java - 用于获取可用 RAM 插槽或可用容量的总容量的 Java 小程序

> ID：14659485
> 
> 赞同：1
> 
> 时间：2013-02-02T06:51:17.770
> 
> 标签：java, jar, applet, ram

我正在尝试使用浏览器小程序在任何系统中获取可用的内存插槽。我签署了它，以便它在用户端获得许可。

我用过接口`OperatingSystemMXBean getTotalPhysicalMemorySize`

如果我能获得可能的总容量和当前安装的内存大小，那就太好了。代码如下

```
com.sun.management.OperatingSystemMXBean mxbean = (com.sun.management.OperatingSystemMXBean)ManagementFactory.getOperatingSystemMXBean();
g.drawString("TotalRAM:"+mxbean.getTotalSwapSpaceSize()/(1024*1024*1024)+""+"GB",50,240);
g.drawString("RAM SIZE :" + (mxbean.getTotalPhysicalMemorySize()/(1024*1024*1024))+ " GB ",50,260); 
```

# batch-file - 批量随机字符错误

> ID：14659487
> 
> 赞同：0
> 
> 时间：2013-02-02T06:51:39.310
> 
> 标签：batch-file

除了一秒钟之外，我看不到错误，但是任何人都可以在此代码中找到错误或错字吗？

```
GOTO MAIN
REM Put this anywhere in the code, to call the generated character, use %CHA%, to generate a new one, use GOTO RAND.
:RAND
PING -w 62.5 1.1.1.1 > NUL
SET /A RAN=(%RANDOM%*100) / 32768
IF %RAN% GEQ 1 (
GOTO CHEC
) ELSE ( 
GOTO RAND
)
:CHEC
IF %RAN% LEQ 36 (
GOTO VALI
) ELSE ( 
GOTO RAND
)
:VALI
SET VAL=%RAN%
)
IF %VAL%=1 (
SET CHA=A
) ELSE (
GOTO 0002
)
:0002
IF %VAL%=2 (
SET CHA=B
) ELSE (
GOTO 0003
)
:0003
IF %VAL%=3 (
SET CHA=C
) ELSE (
GOTO 0004
)
:0004
IF %VAL%=4 (
SET CHA=D
) ELSE (
GOTO 0005
:0005
IF %VAL%=5 (
SET CHA=E
) ELSE (
GOTO 0006
)
:0006
IF %VAL%=6 (
SET CHA=F
) ELSE (
GOTO 0007
)
:0007
IF %VAL%=7 (
SET CHA=G
) ELSE (
GOTO 0008
)
:0008
IF %VAL%=8 (
SET CHA=H
) ELSE (
GOTO 0009
)
:0009
IF %VAL%=9 (
SET CHA=I
) ELSE (
GOTO 0010
)
:0010
IF %VAL%=10 (
SET CHA=J
) ELSE (
GOTO 0011
)
:0011
IF %VAL%=11 (
SET CHA=K
) ELSE (
GOTO 0012
)
:0012
IF %VAL%=12 (
SET CHA=L
) ELSE (
GOTO 0013
)
:0013
IF %VAL%=13 (
SET CHA=M
) ELSE (
GOTO 0014
)
:0014
IF %VAL%=14 (
SET CHA=N
) ELSE (
GOTO 0015 
)
:0015
IF %VAL%=15 (
SET CHA=O
) ELSE (
GOTO 0016
)
:0016
IF %VAL%=16 (
SET CHA=P
) ELSE (
GOTO 0017
)
:0017
IF %VAL%=17 (
SET CHA=Q
) ELSE (
GOTO 0018
)
:0018
IF %VAL%=18 (
SET CHA=R
) ELSE (
GOTO 0019
)
:0019
IF %VAL%=19 (
SET CHA=S
) ELSE (
GOTO 0020
)
:0020
IF %VAL%=20 (
SET CHA=T
) ELSE (
GOTO 0021
)
:0021
IF %VAL%=21 (
SET CHA=U
) ELSE (
GOTO 0022
)
:0022
IF %VAL%=22 (
SET CHA=V
) ELSE (
GOTO 0023
)
:0023
IF %VAL%=23 (
SET CHA=W
) ELSE (
GOTO 0024
)
:0024
IF %VAL%=24 (
SET CHA=X
) ELSE (
GOTO 0025
)
:0025
IF %VAL%=25 (
SET CHA=Y
) ELSE (
GOTO 0026
)
:0026
IF %VAL%=26 (
SET CHA=Z
) ELSE (
GOTO 0027
)
:0027
IF %VAL%=27 (
SET CHA=0
) ELSE (
GOTO 0028
)
:0028
IF %VAL%=28 (
SET CHA=1
) ELSE (
GOTO 0029
)
:0029
IF %VAL%=29 (
SET CHA=2
) ELSE (
GOTO 0030
)
:0030
IF %VAL%=30 (
SET CHA=3
) ELSE (
GOTO 0031
)
:0031
IF %VAL%=31 (
SET CHA=4
) ELSE (
GOTO 0032
)
:0032
IF %VAL%=32 (
SET CHA=5
) ELSE (
GOTO 0033
)
:0033
IF %VAL%=33 (
SET CHA=6
) ELSE (
GOTO 0034
)
:0034
IF %VAL%=34 (
SET CHA=7
) ELSE (
GOTO 0035
)
:0035
IF %VAL%=35 (
SET CHA=8
)ELSE(
SET CHA=9
)
REM The GOTO 00XX is not necessary, but, if you modify the RAN, VAL, or CHA variables outside of this "block," you are able to "double check" a number.
:MAIN 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T15:30:11.900

您的脚本的问题是您使用 single`=`进行比较，而您应该使用 double `==`。

```
IF %VAL%=1 (
:: Should Be
IF %VAL%==1 (
:: Or
IF %VAL% equ 1 ( 
```

但是，我建议尝试这样的事情。

```
@echo off
setlocal EnableExtensions

:: Example Usage
call :RAND CHA
echo %CHA%

endlocal
pause >nul
exit /b

:RAND <Result>
setlocal EnableExtensions EnableDelayedExpansion
set "A=ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"
set /a "X=%RANDOM% %% 36"
:: Without Delayed Expansion
::call set "C=%%A:~%X%,1%%"
:: With Delayed Expansion
set "C=!A:~%X%,1!"
endlocal & set %~1=%C%
exit /b 
```

# java - 如何生成两个数字，以便除法的结果是整数？

> ID：14659488
> 
> 赞同：-1
> 
> 时间：2013-02-02T06:51:43.243
> 
> 标签：java

我正在尝试生成两个数字，以便除法结果是整数，而不是双精度数，例如：2/2=1; 30/3=10；等等...我不想要这样的东西：14/5=2.8; 18/7=2.57..等等。请帮忙。提前致谢。

```
package number;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;

import javax.swing.*;

public class IntergerNumber extends JFrame implements ActionListener
{
JLabel lblFirstNum = new JLabel("");
JLabel lblSecondNum = new JLabel("");
JLabel lblOperator = new JLabel("/");
JTextArea taResult = new JTextArea();
JButton bCheck = new JButton("Check");
JPanel pOperator = new JPanel();
JPanel pButton = new JPanel();

public IntergerNumber()
{
pOperator.setLayout(new GridLayout(3, 2));
pOperator.add(new JLabel());
pOperator.add(lblFirstNum);
pOperator.add(lblOperator);
pOperator.add(lblSecondNum);
pOperator.add(new JLabel());
pOperator.add(taResult);
pButton.add(bCheck);
initializeComponents();
generateRanDomNumber();
this.getContentPane().setLayout(new BorderLayout());
this.getContentPane().add(pOperator, BorderLayout.CENTER);
this.getContentPane().add(pButton, BorderLayout.SOUTH);
}

private void generateRanDomNumber() 
{
// TODO Auto-generated method stub
Random randomGenerator = new Random();
int randomInt2 = 0;
int randomInt1 = randomGenerator.nextInt(50)%20;
if(randomInt1 == 0)
{
randomInt1 = randomGenerator.nextInt(50)%20;
}
while((randomInt1%2) != 0) //this will avoid odd number
{
randomInt1 = randomGenerator.nextInt(50)%2;
if(randomInt1 == 0)
{
randomInt1 = randomInt1 + 2;
}
}
randomInt2 = randomGenerator.nextInt(50)%2;
if(randomInt2 == 0)
{
randomInt2 = randomGenerator.nextInt(50)%20;
}
while((randomInt2%2) != 0)
{
randomInt2 = randomGenerator.nextInt(50)%2;
if(randomInt2 == 0)
{
randomInt2 = randomGenerator.nextInt(50)%20;
}
}

if(randomInt1 >= randomInt2 && randomInt2 != 0)
{               
System.out.println("====================");
System.out.println("First number is: " + randomInt1);
System.out.println("Second number is: " + randomInt2);
double x = randomInt1/randomInt2;
System.out.println("X is: " + x);
System.out.println("====================");
lblFirstNum.setText("" + randomInt1);
lblSecondNum.setText("" + randomInt2);
}
else if(randomInt1 < randomInt2 && randomInt1 != 0)
{               
System.out.println("====================");
System.out.println("First number is: " + randomInt1);
System.out.println("Second number is: " + randomInt2);
double x = randomInt2/randomInt1;
System.out.println("X is: " + x);
System.out.println("====================");
lblFirstNum.setText("" + randomInt2);
lblSecondNum.setText("" + randomInt1);
}
}

private void initializeComponents() 
{
// TODO Auto-generated method stub
lblOperator.setHorizontalAlignment(JLabel.RIGHT);
lblOperator.setFont(new Font("Arial", Font.BOLD, 40));
taResult.setBackground(Color.white);
taResult.setFont(new Font("Arial", Font.BOLD, 40));
taResult.setOpaque(true);       
lblFirstNum.setHorizontalAlignment(JLabel.CENTER);
lblFirstNum.setFont(new Font("Arial", Font.BOLD, 40));
lblSecondNum.setHorizontalAlignment(JLabel.CENTER);
lblSecondNum.setFont(new Font("Arial", Font.BOLD, 40));
bCheck.addActionListener(this);
taResult.setFocusable(true);
taResult.requestFocus();
}

@Override
public void actionPerformed(ActionEvent ae) 
{
// TODO Auto-generated method stub
if(ae.getSource().equals(bCheck))
{
String sFirstNum = lblFirstNum.getText();
String sSecondNum = lblSecondNum.getText();
String sResult = taResult.getText();
int first = Integer.parseInt(sFirstNum);
int second = Integer.parseInt(sSecondNum);
int result = Integer.parseInt(sResult);
if((first/second) == result)
{
System.out.println("Correct Answer");
taResult.setText("");
generateRanDomNumber();
taResult.setFocusable(true);
taResult.requestFocus();
}
else
{
System.out.println("Wrong Answer");
taResult.setText("");
generateRanDomNumber();
taResult.setFocusable(true);
taResult.requestFocus();
}
}
}
public static void main(String[] s)
{
IntergerNumber in = new IntergerNumber();
in.setVisible(true);
in.setSize(200,200);
in.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T06:58:10.067

您只需将两个数字相乘：a*b=c - 那么您有 c，所以当它除以 a 或 b 时，它是一个整数？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T07:11:43.070

as suggested by @chris: here is what you can do:

**Edit:**

```
// `+1` as random number generated can be "0" which will result in `ArithmeticException`
int num1 = Random.nextInt(100)+1;  // enter range as required

int num2 = Random.nextInt(100)+1;

int divident = num1*num2;  // here is your first number 
```

now choose any variable `num1` or `num2` as your second number as `divident%num1 == 0` or `divident%num2==0`

Its lot better than keep on testing random numbers until they meet this criteria `num1%num2==0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T06:58:50.033

试试这个代码，希望它适用于你的逻辑

```
int randomInt2 = 0;
int randomInt1 = randomGenerator.nextInt(50)%20;
if(randomInt1 == 0){
   randomInt1 = randomGenerator.nextInt(50)%20;
}
ramdonInt2 = randomGenerator.nextInt(50)%20;
while((randomInt1 < randomInt2) && (randomInt1%randomInt2 != 0)){
  randomInt2 = randomGenerator.nextInt(50)%20;
} 
```

现在你可以直接把剩下的逻辑放在任何地方`if-else`

```
System.out.println("====================");
System.out.println("First number is: " + randomInt1);
System.out.println("Second number is: " + randomInt2);
double x = randomInt2/randomInt1;
System.out.println("X is: " + x);
System.out.println("====================");
lblFirstNum.setText("" + randomInt2);
lblSecondNum.setText("" + randomInt1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T07:00:02.323

```
public void generateNumbers() {
 while(true) {
   int number1 = Random.nextInt(100);
   int number2 = Random.nextInt(100);
   if (number1 % number2 == 0) {
     System.out.println("Number " + number1 + " is divisible by " + number2);
     break;
   }
} 
```

你可以写这样的东西。它生成两个 100 以内的随机整数。您可以更改整数范围以满足您的需要。规则是简单地选择整数，使得一个除以另一个不会产生余数。请注意，此代码未经测试。希望你能明白。

# iphone - 如何使用 iphone sdk 将 XML 解析的图像放入数组并在所有视图控制器中使用该数组

> ID：14659491
> 
> 赞同：2
> 
> 时间：2013-02-02T06:52:29.247
> 
> 标签：iphone, ios, ios6

我在 URL 中有一个 XML 文件，我可以在其中解析数据并从 XML 文件中获取图像。但我不知道如何在其他视图控制器中使用图像。我有一个想法将图像存储在数组中，但是如何在其他视图控制器中使用图像数组。是否可以将 XML 解析的图像存储在数组中。我是否正确解析了 XML？请给我一个想法。

**我的 XML 解析器**

```
//egsBase.h

#import <Foundation/Foundation.h>
@interface egsBase : NSObject{
IBOutlet UIImage *img;
}
@property(nonatomic,retain) IBOutlet UIImage *img;
@end

//egsBase.m

#import "egsBase.h"
@implementation egsBase
@synthesize  img;
@end

//egsXMLParser.h

#import <Foundation/Foundation.h>
#import "egsBase.h"
@interface egsXMLParser : NSObject <NSXMLParserDelegate>{
    NSMutableString *currentNodeContent;
    NSMutableArray *tweets;
    NSXMLParser *parser;
    egsBase *currentTweet;
}
@property(nonatomic,readonly) NSMutableArray *tweets;
-(id) loadXMLByURL:(NSString *) urlString;
@end

//egsXMLParser.m

#import "egsXMLParser.h"
@implementation egsXMLParser
@synthesize tweets;

-(id) loadXMLByURL:(NSString *)urlString{
     tweets  = [[NSMutableArray alloc] init];
     NSURL *url = [NSURL URLWithString:urlString];
     NSData *data = [[NSData alloc] initWithContentsOfURL:url];
     parser = [[NSXMLParser alloc] initWithData:data];
     parser.delegate = self;
     [parser parse];
     return self;
}

-(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
if([elementName isEqualToString:@"Products"]){
    currentTweet = [egsBase alloc];
 }
}

 -(void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
if([elementName isEqualToString:@"img"])
{
  currentTweet.img=[UIImage imageWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString:currentNodeContent]]]; [tweets addObject:currentTweet.img];
 }
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
   currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T05:30:08.977

您是否正确解析了这个？有很多问题，有些是实质性的，有些是风格上的。首先，有几个实质性的观察：

1.  您`foundCharacters`假设每个元素只会调用一次。对于通常为真的 URL 之类的东西，但您不能保证这一事实。它应该只是将字符附加到字符串，并且最终字符串的后续存储和清理应该发生在`didEndElement`.

2.  无论您`foundCharacter`是否正在检索您关心的元素的数据（更糟糕的是，元素之间的字符），您都会存储结果。仅存储`foundCharacter`介于 a`didStartElement`和`didEndElement`您关心的元素名称之间的结果。

3.  您`didStartElement`正在执行`alloc`，但它也没有执行`init`。你应该总是`init`同时做。稍后您也可以进行额外的属性设置，但永远不要忽略调用适当的`init`方法。

4.  您`didEndElement`正在从服务器检索图像。您确实应该将数据的检索限制为仅 XML 本身（例如，在图像的情况下，图像的 URL），而不是从服务器检索其他项目。当您考虑更复杂的设计时，这一点尤其重要，为了最大限度地减少内存命中并改善用户响应时间，您可能希望使用延迟加载图像，这意味着您只想*从*XML 中检索 URL，并让 UI 处理是否以及何时检索图像。当您将来开始进行更复杂的开发时，您会后悔在这里进行图像检索。

5.  您在和中进行的`elementName`检查之间存在不平衡。对于您要为其检索数据的所有元素，您应该平衡调用。我知道您为我们提供了一个示例，为了简单起见，您仅从 XML 中检索单个元素，但在下面的示例中，我假设我们正在检索两个元素，并且平衡这些元素的重要性将变得显而易见。`didStartElement``didEndElement`

更多风格观察：

1.  按照惯例，变量名通常以小写字母开头。类名通常以大写字母开头。我假设“EGS”是一个既定的类前缀（例如您的首字母或您公司的首字母缩写词），在这种情况下，类名可能是`EGSBase`and `EGSParser`。顺便说一句，我不太喜欢这个名称`EGSBase`，因为它是一个旨在捕获特定类型的 XML 数据的类，但有一个通用名称。要么使用像 a 这样的通用数据结构，`NSMutableDictionary`要么使用自定义类并给它一个有意义的名称（例如，根据您对“产品”的引用，我假设它是一个产品，因此我`EGSProduct`在下面的示例中将其重命名.) 随意命名，但如果您使用有意义的属性名称，请给它一个有意义的名称。

2.  我注意到您正在定义实例变量来支持您的属性。虽然这是一两年前的惯例，但最新版本的编译器使这变得不必要，甚至是不可取的。你有什么工作，但它不再被认为是最佳实践，并且是不可取的（因为你可以用一个拼写错误结束重复的实例变量并得到非常奇怪的行为）。最重要的是，不要为您的属性定义实例变量。让编译器为你做这件事。

3.  我注意到您已将`img`in定义`egsBase`为`IBOutlet`，而我发现您极不可能将其真正链接到 Interface Builder 中的任何内容。首先，它甚至不是`UIView`后代（它是 a `UIImage`，而不是 a `UIImageView`）。其次，`egsBase`它本身并不是一个用于 Interface Builder 控件的类。底线，这不是一个 Interface Builder 出口，所以它只是令人困惑使用`IBOutlet`for `img`。

4.  我注意到您正在使用`retain`. 如果您正在编写 ARC 代码，那应该是`strong`（即使您的目标是 iOS 4.3）。如果您不编写 ARC 代码，那么您的代码中的其他地方就有泄漏。

5.  您正在手动合成您的属性。你可以这样做，但这不是必需的。此外，现在的最佳做法是让您的属性的实例变量有一个前导下划线。请注意，如果您省略该`@synthesize`语句，它将为您合成带有前导下划线的实例变量。关于您是否应该专门使用属性（我已经在下面完成）或使用实例变量，该领域存在一些争论。我不太在意，尽管新兴的约定可能倾向于更广泛地使用属性。如果您使用属性，尽管 (a)[不要在初始化程序和 dealloc 方法中使用访问器方法](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW6)；(b)[在设置属性时始终使用访问器方法](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW5)。

6.  我注意到您正在定义属性和实例变量（特别是对于解析器），它们是私有实现细节。这里的新兴标准是将 .h 中定义的属性限制为其他类需要访问的属性。作为类的私有实现的一部分的任何其他属性通常在 .m 文件本身的私有类扩展中定义。这是一件小事，但是如果您遵守这种做法，您会发现将来使用您的类会更容易，您（或其他开发人员）不会对公共接口的一部分以及哪些部分感到困惑的私有实现。

7.  我注意到你`loadXMLByURL`返回了一个指向类本身的指针。通常，只有`init`对象或创建新对象的类才会返回指向自身的指针。

8.  您`loadXMLByURL`可能应该返回（a）指向`NSMutableArray`您构造的指针（返回`nil`错误）；或 (b)`BOOL`成功/失败值。

9.  对于您的自定义类，例如`EGSBase`，编写一个方法很有用`description`，因此您可以轻松地使用`NSLog`它们。

* * *

所以，让我给你举个例子。假设您有一个如下所示的 XML：

```
<Products>
  <products id="0">
    <name>name1</name>
    <img id="1">http://opentestdrive.com/images/first.png</img>
  </products>
  <products id="1">
    <name>name2</name>
    <img id="2">http://opentestdrive.com/images/second.png</img>
  </products>
  <products id="2">
    <name>name3</name>
    <img id="3">http://opentestdrive.com/images/img1.png</img>
  </products>
  <products id="3">
    <name>name4</name>
    <img id="4">http://opentestdrive.com/images/img2.png</img>
    <img-subproduct id="0">http://opentestdrive.com/images/img5.png</img-subproduct>
    <img-subproduct id="1">http://opentestdrive.com/images/img4.png</img-subproduct>
  </products>
  <products id="4">
    <name>name5</name>
    <img id="5">http://opentestdrive.com/images/img3.png</img>
    <img-subproduct id="2">http://opentestdrive.com/images/img3.png</img-subproduct>
    <img-subproduct id="3">http://opentestdrive.com/images/img2.png</img-subproduct>
  </products>
  <products id="5">
    <name>name6</name>
    <img id="6">http://opentestdrive.com/images/img4.png</img>
  </products>
  <products id="6">
    <name>name7</name>
    <img id="7">http://opentestdrive.com/images/img5.png</img>
  </products>
</Products> 
```

那么你`EGSProduct`的定义如下：

```
//  EGSProduct.h

#import <Foundation/Foundation.h>

@interface EGSProduct : NSObject

@property (nonatomic, strong) NSString *name;
@property (nonatomic, strong) NSString *imageUrlString;
@property (nonatomic, strong) NSString *imageIdentifier;
@property (nonatomic, strong) NSMutableArray *subProducts;

@end 
```

和

```
//  EGSProduct.m

#import "EGSProduct.h"

@implementation EGSProduct

- (NSString *)description
{
    NSMutableString *result = [NSMutableString stringWithFormat:@"<EGSProduct %p; name='%@'; imageIdentifier='%@'; imageUrlString='%@'; subProducts=", self, self.name, self.imageIdentifier, self.imageUrlString];

    NSMutableArray *subProductDescriptions = [NSMutableArray array];
    for (EGSProduct *subProduct in self.subProducts)
    {
        [subProductDescriptions addObject:[subProduct description]];
    }

    [result appendFormat:@"%@>", [subProductDescriptions componentsJoinedByString:@"; "]];

    return result;
}
@end 
```

你的解析器可能看起来像：

```
//  EGSParser.h

#import <Foundation/Foundation.h>

@interface EGSParser : NSObject

@property (nonatomic, strong) NSMutableArray *products;

- (BOOL)loadXMLByURL:(NSURL *)url;

@end 
```

和

```
//  EGSParser.m

#import "EGSParser.h"
#import "EGSProduct.h"

@interface EGSParser () <NSXMLParserDelegate>

@property (nonatomic, strong) NSXMLParser *parser;
@property (nonatomic, strong) NSMutableString *currentElementContent;
@property (nonatomic, strong) EGSProduct *currentProduct;
@property (nonatomic, strong) EGSProduct *currentSubProduct;

@end

@implementation EGSParser

- (BOOL)loadXMLByURL:(NSURL *)url
{
    self.parser = [[NSXMLParser alloc] initWithContentsOfURL:url];
    self.parser.delegate = self;
    return [self.parser parse];
}

#pragma mark - NSXMLParser

- (void)parserDidStartDocument:(NSXMLParser *)parser
{
    self.products = [[NSMutableArray alloc] init];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"products"])
    {
        self.currentProduct = [[EGSProduct alloc] init];
        self.currentProduct.imageIdentifier = attributeDict[@"id"];
    }
    else if ([elementName isEqualToString:@"img-subproduct"])
    {
        self.currentSubProduct = [[EGSProduct alloc] init];
        self.currentSubProduct.imageIdentifier = attributeDict[@"id"];
        if (self.currentProduct.subProducts == nil)
        {
            self.currentProduct.subProducts = [NSMutableArray array];
        }
        self.currentSubProduct.imageIdentifier = attributeDict[@"id"];
        self.currentElementContent = [[NSMutableString alloc] init];
    }
    else if ([elementName isEqualToString:@"name"] || [elementName isEqualToString:@"img"])
    {
        self.currentElementContent = [[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    // note, this construct of checking to see if it's nil is actually not needed
    // (since sending a message to a nil object, by definition, does nothing)
    // but I wanted to draw your attention to the fact that we set `currentElementContent`
    // in `didStartElement` and, after saving it in our class, we set it to nil in
    // `didEndElement`

    if (self.currentElementContent != nil)
        [self.currentElementContent appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"name"])
    {
        self.currentProduct.name = self.currentElementContent;      // save the product name
        self.currentElementContent = nil;                           // reset our `currentElementContent`
    }
    else if ([elementName isEqualToString:@"img"])
    {
        self.currentProduct.imageUrlString = [self.currentElementContent stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        self.currentElementContent = nil;
    }
    else if ([elementName isEqualToString:@"img-subproduct"])
    {
        self.currentSubProduct.imageUrlString = self.currentElementContent;
        self.currentElementContent = nil;
        [self.currentProduct.subProducts addObject:self.currentSubProduct];
        self.currentSubProduct = nil;
    }
    else if ([elementName isEqualToString:@"products"])
    {
        [self.products addObject:self.currentProduct];
        self.currentProduct = nil;
    }
}

@end 
```

要使用此类，您可能会执行以下操作。如果您想在解析器完成（并超出范围）后继续使用 XML 结果，您只需要一个类属性（在下面的示例中，`xmlProductsResults`. 如果您希望它可以被各种不同的视图控制器，您可以将此模型数据保存在某个共享类（例如模型单例）中，作为应用程序委托的属性，或者将其作为参数从视图控制器传递到视图控制器。

```
NSURL *url = [NSURL URLWithString:@"http://opentestdrive.com/Products.xml"];
EGSParser *parser = [[EGSParser alloc] init];
if ([parser loadXMLByURL:url])
{
    NSLog(@"success; products=%@", parser.products);
    self.xmlProductsResults = parser.products;
}
else
{
    NSLog(@"fail");
} 
```

* * *

你可以用你的解析器做更多的事情（更健壮地验证格式不正确的 XML 文件，报告错误，如果有的话，返回等等）。就个人而言，我已经完成了足够多的 XML 解析，现在我使用了一个非常通用的解析器，它可以在几行内解析我正在处理的大部分 XML 文件，享受解析器类的最大重用，但那是一座太远的桥梁对于这次谈话。我在这个讨论中已经走得太远了。

# android - Android Facebook 注销不起作用

> ID：14659493
> 
> 赞同：0
> 
> 时间：2013-02-02T06:52:46.510
> 
> 标签：android, facebook, logout, facebook-android-sdk

现在我正在使用 android Facebook 集成。但是注销无法解决这个问题。没有从手机中的浏览器注销我无法从我的应用程序注销。为什么会发生这种情况？我们如何避免这种情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:05:34.213

There are two independent things going on here:
1) whether your user has authenticated your app (with permissions) to Facebook and
2) whether your user is logged in to Facebook.

Authentication is required the first time your user uses your app and lasts until the user explicitly de-authenticates (e.g. through the Facebook web Account Settings -> Apps -> App Settings).

Log in may be required each time your user starts your app. But if you use the default SDK authorize(), that tries to do a Single Sign On (SSO), where if the Facebook app is logged in, your app is automatically logged in and uses the existing access token.

If you are using SSO, when you do a logout, that has no effect, as a real logout would have to log out the Facebook app - which the user might not like!

You can get around this behavior by doing an authorize of the form

```
authorize(this, PERMISSIONS, FORCE_DIALOG_AUTH, new LoginDialogListener()); 
```

which avoids SSO and forces a dialog login. Of course, that then forces your user to login each time you start your app - unless you save the login details / access token under the covers (which is what the SDK does - check the source).

**EDITED:**

> ```
>  m_facebook.authorize(FacebookActivity.this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,
>             new LoginDialogListener());
> 
>  class LoginDialogListener implements DialogListener
> {
>     public void onComplete(Bundle p_values)
>     {
>         saveCredentials(m_facebook);
>         if (m_messageToPost != null)
>         {
>             postToWall(m_messageToPost);
>         }
>     }       
>     public void onFacebookError(FacebookError p_error)
>     {
>         finish();
>     }       
>     public void onError(DialogError p_error)
>     {
>         finish();
>     }       
>     public void onCancel()
>     {
>         finish();
>     }
> } 
> ```

# netbeans - 为什么 NetBeans 不能在对话框中正确显示文件名或其他文本？

> ID：14659517
> 
> 赞同：1
> 
> 时间：2013-02-02T06:56:57.273
> 
> 标签：netbeans

在尝试在 NetBeans 7.2.1 中创建新项目时，我注意到在“新建项目”对话框中，在我选择了一个类别（Java、Java FX、Java Web 等）后，项目类型仅显示为图标，文本只有在我单击图标后才可见。知道什么可能导致这种行为吗？

我可以发布图片，但我是新用户，还没有足够的积分。

不过，这里有一个链接：http: [//www.flickr.com/photos/67586865@N08/8436549191/](http://www.flickr.com/photos/67586865@N08/8436549191/)

稍后编辑：我在其他对话框中也注意到了这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:00:53.513

我刚刚停用了一些插件，包括 Dark Nimbus Theme，以及

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T16:05:42.217

图形卡驱动程序似乎有一些问题，并且在其他应用程序中也出现了奇怪的行为后才解决了这个问题。重新安装驱动后一切顺利。

# python - 使用 pycrypto 使用公钥进行 Python 日志加密

> ID：14659518
> 
> 赞同：3
> 
> 时间：2013-02-02T06:56:58.813
> 
> 标签：python, logging, pycrypto

我正在开发一个必须在日志中写入一些机密信息的网络应用程序（使用 gevent，但这并不重要）。显而易见的想法是使用硬编码到我的应用程序中的公钥来加密机密信息。要阅读它，需要一个私钥，而 2048 位 RSA 似乎足够安全。我选择了 pycrypto（也尝试了 M2Crypto，但几乎没有发现任何差异）并将日志加密实现为`logging.Formatter`子类。但是，我是 pycrypto 和密码学的新手，我不确定我选择的数据加密方式是否合理。`PKCS1_OAEP`模块是我需要的吗？还是有更友好的加密方式而不将数据分成小块？

所以，我所做的是：

```
import logging
import sys

from Crypto.Cipher import PKCS1_OAEP as pkcs1
from Crypto.PublicKey import RSA

PUBLIC_KEY = """ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDe2mtK03UhymB+SrIbJJUwCPhWNMl8/gA9d7jex0ciSuFfShDaqJ4wYWG4OOl\
VqKMxPrPcZ/PMSwtc021yI8TXfgewb65H/YQw4JzzGANq2+mFT8jWRDn+xUc6vcWnXIG3OPg5DvIipGQvIPNIUUP3qE7yDHnS5xdVdFrVe2bUUXmZJ9\
0xJpyqlTuRtIgfIfEQC9cggrdr1G50tXdXZjS0M1WXl5P6599oH/ykjpDFrCnh5fz9WDwUc0mNJ+11Qh+yfDp3k7AhzhRaROKLVWnfkklFaFm7LsdVX\
KPjp7dPRcTb84c2OnlIjU0ykL74Fy0K3eaPvM6TLe/K1XuD3933 pupkin@pupkin"""

PUBLIC_KEY = RSA.importKey(PUBLIC_KEY)

LOG_FORMAT = '[%(asctime)-15s - %(levelname)s: %(message)s]'

# May be more, but there is a limit.
# I suppose, the algorithm requires enough padding,
# and size of padding depends on key length.
MAX_MSG_LEN = 128

# Size of a block encoded with padding. For a 2048-bit key seems to be OK.
ENCODED_CHUNK_LEN = 256

def encode_msg(msg):
    res = []
    k = pkcs1.new(PUBLIC_KEY)
    for i in xrange(0, len(msg), MAX_MSG_LEN):
        v = k.encrypt(msg[i : i+MAX_MSG_LEN])
        # There are nicer ways to make a readable line from data than using hex. However, using
        # hex representation requires no extra code, so let it be hex.
        res.append(v.encode('hex'))
        assert len(v) == ENCODED_CHUNK_LEN
    return ''.join(res)

def decode_msg(msg, private_key):
    msg = msg.decode('hex')
    res = []
    k = pkcs1.new(private_key)
    for i in xrange(0, len(msg), ENCODED_CHUNK_LEN):
        res.append(k.decrypt(msg[i : i+ENCODED_CHUNK_LEN]))
    return ''.join(res)

class CryptoFormatter(logging.Formatter):
    NOT_SECRET = ('CRITICAL',)
    def format(self, record):
        """
        If needed, I may encode only certain types of messages.
        """
        try:
            msg = logging.Formatter.format(self, record)
            if not record.levelname in self.NOT_SECRET:
                msg = encode_msg(logging.Formatter.format(self, record))
            return msg
        except:
            import traceback
            return traceback.format_exc()

def decrypt_file(key_fname, data_fname):
    """
    The function decrypts logs and never runs on server. In fact,
    server does not have a private key at all. The only key owner
    is server admin.
    """
    res = ''
    with open(key_fname, 'r') as kf:
        pkey = RSA.importKey(kf.read())
    with open(data_fname, 'r') as f:
        for l in f:
            l = l.strip()
            if l:
                try:
                    res += decode_msg(l, pkey) + '\n'
                except Exception: # A line may be unencrypted
                    res += l + '\n'
    return res

# Unfortunately dictConfig() does not support altering formatter class.
# Anyway, in demo code I am not going to use dictConfig().

logger = logging.getLogger()
handler = logging.StreamHandler(sys.stderr)
handler.setFormatter(CryptoFormatter(LOG_FORMAT))
logger.handlers = []
logger.addHandler(handler)

logging.warning("This is secret")
logging.critical("This is not secret") 
```

**更新：**感谢下面接受的答案，现在我看到了：

1.  我的解决方案现在似乎非常有效（日志条目很少，没有性能考虑，或多或少受信任的存储）。关于安全性，我现在能做的最好的事情就是不要忘记禁止运行我的守护程序的用户写入程序的`.py`和`.pyc`文件。:-) 但是，如果用户受到威胁，他仍然可能会尝试将调试器附加到我的守护进程，所以我也应该为他禁用登录。非常明显的时刻，但非常重要的时刻。

2.  当然，有一些解决方案更具可扩展性。一种非常常见的技术是使用缓慢但可靠的 RSA 加密 AES 密钥，并使用非常快的 AES 加密数据。这种情况下的数据加密是对称的，但是检索 AES 密钥需要破坏 RSA，或者在我的程序运行时从内存中获取它。使用高级库和二进制日志文件格式进行流加密也是一种方法，尽管加密为流的二进制日志格式应该很容易受到日志损坏的影响，即使由于停电而突然重启也可能是一个问题，除非我这样做一些较低级别的事情（至少在每个守护程序启动时记录轮换）。

3.  我`.encode('hex')`改为`.encode('base64').replace('\n').replace('\r')`. 幸运的是，base64 编解码器工作正常，没有行尾。它节省了一些空间。

4.  使用不受信任的存储可能需要签署记录，但这似乎是另一回事。

5.  根据捕获异常检查字符串是否加密是可以的，因为除非日志被恶意用户篡改，否则引发异常的是 base64 编解码器，而不是 RSA 解密。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T07:38:53.750

您似乎直接使用 RSA 加密数据。这相对较慢，并且存在您只能加密一小部分数据的问题。基于“解密不起作用”区分加密和明文数据也不是一个非常干净的解决方案，尽管它可能会起作用。您确实使用 OAEP，这很好。您可能想使用 base64 而不是 hex 来节省空间。

但是，加密很容易出错。出于这个原因，您应该尽可能使用高级加密库。您必须自己指定填充方案的任何内容都不是“高级”。不过，我不确定您是否能够创建一个高效的、基于行的日志加密系统，而无需求助于相当低级的库。

**如果您没有理由只加密日志的个别部分，请考虑只加密整个内容。**

如果您真的迫切需要基于行的加密，您可以执行以下操作：从安全随机源创建一个随机对称 AES 密钥，并为其提供一个简短但唯一的 ID。使用 RSA 加密此密钥，并将结果写入日志文件的一行中，该行以标记为前缀，例如“KEY”以及 ID。对于每个日志行，生成一个随机 IV，使用所述 IV 在 CBC 模式下使用 AES256 加密消息（您现在每行没有任何长度限制！）并将密钥 ID、IV 和加密消息写入日志，以标签为前缀，例如“ENC”。一定时间后，销毁对称密钥并重复（生成新的，写入日志）。这种方法的缺点是可以从内存中恢复对称密钥的攻击者可以读取使用该密钥加密的消息。优点是您可以使用更高级别的构建块，而且速度要快得多（在我的 CPU 上，您可以使用 AES-128 加密每秒 1 KB 的 70,000 条日志行，但最多只能加密大约 3,500 块 256 字节使用 RSA2048）。顺便说一句，RSA 解密真的很慢（每秒大约 100 个块）。

请注意，您没有身份验证，即您不会注意到对日志的修改。因此，我假设您信任日志存储。否则，请参阅[RFC 5848](https://www.rfc-editor.org/rfc/rfc5848)。

# python - Unicode 字符文件名 SELECT SQL 参数问题

> ID：14659520
> 
> 赞同：1
> 
> 时间：2013-02-02T06:57:10.077
> 
> 标签：python, sql, django, unicode, mysql-python

我在 django 中创建了一个 webapp/webservice 方法，它将 unicode 字符文件名存储在 DB 表中。我在views.py脚本上通过这种方法来做：

```
SubmissionContents(id=subid, filename=fn.decode('unicode_escape')).save() 
```

我这样做是因为我遇到了一些 unicode 字符的文件名，这些文件名没有正确存储在数据库中（不管是什么原因，我仍然不知道）。这也是关于这个[stackoverflow线程/链接](https://stackoverflow.com/questions/2108824/mysql-incorrect-string-value-error-when-save-unicode-string-in-django)的建议：

现在在后端，我有一个普通的 python 脚本，它使用 MySQLdb-python 模块来查询所述数据库。我的查询是这样的：

```
filename = (u"%s").encode('unicode_escape')
cursor.execute('select * from `submissioncontents` 
                where `submissioncontents`.`filename` = "%s"' 
                % filename.decode('unicode_escape')) 
```

问题是没有返回匹配项，尽管我非常确定 DB 表中填充了这样的值。我应该如何正确进行查询？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:39:29.230

[检查正确的语法](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly)：

```
cursor.execute("SELECT foo FROM bar WHERE baz = %s", [self.baz]) 
```

对于您的代码：

```
cursor.execute('select * from `submissioncontents` 
                where `submissioncontents`.`filename` = %s' 
                , [ filename.decode('unicode_escape') ] ) 
```

引用文档：

> “不要对原始查询使用字符串格式！”

# android - Facebook 操作在发布时未指定任何使用 android 的引用对象

> ID：14659521
> 
> 赞同：0
> 
> 时间：2013-02-02T06:57:13.453
> 
> 标签：android, facebook, facebook-graph-api, facebook-opengraph

我的行动是“找到”。对象是：'情人节'。但在属性字段中，我的对象名称是 'Reference' 类型的 'valentine_' 。

现在，我正在尝试使用 ANDROID 发布“查找”操作，该操作会给出错误消息：“您尝试发布的操作无效，因为它没有指定任何引用对象。必须至少指定以下属性之一：valentine_”

我的代码：

```
private interface ValentineGraphObject extends GraphObject{
        public String getUrl();
        public void setUrl(String url);

         public String getId();
        public void setId(String id);
    }

    private interface FindAction extends OpenGraphAction{
        // The valentine object 
        public ValentineGraphObject getValentine();
        public void setValentine(ValentineGraphObject valentine_);
    }

    protected void populateOGAction(OpenGraphAction action) {
        FindAction findaction = action.cast(FindAction.class);
        ValentineGraphObject valentine_ =GraphObject.Factory.create(ValentineGraphObject.class);
        valentine_.setUrl("http://milliondollarsapps.com/Kunal/valen.html");
        findaction.setValentine(valentine_);
    } 
```

有人可以帮我解决这个问题。快速帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:46:23.647

这里的问题是您的 FindAction 接口上的属性（即 setValentine，并被翻译为“valentine”）与您的 OG 操作中的属性（即“valentine_”）不匹配。

有两种方法可以解决这个问题：

一种。而不是使用 findaction.setValentine(...) 做：

```
findaction.setProperty("valentine_", valentine_); 
```

湾。在 setValentine 方法上使用 PropertyName 注释：

```
private interface FindAction extends OpenGraphAction{
    // The valentine object 
    public ValentineGraphObject getValentine();
    @PropertyName("valentine_")
    public void setValentine(ValentineGraphObject valentine_);
} 
```

# regex - 正则表达式在 ASP.NET MVC2 应用程序中不起作用

> ID：14659529
> 
> 赞同：0
> 
> 时间：2013-02-02T06:58:02.610
> 
> 标签：regex, asp.net-mvc-2

我有一个具有多个验证规则的模型：

```
[Required(ErrorMessage = "Number must be enter")]
    [RegularExpression("^[0-9]{1,10}$", ErrorMessage = "Your must be enter only integer number between 0-10 simvols")]
    public int Number
    {
        get { return number; }
        set { number = value; }
    } 
```

所以我的验证不起作用。我检查了我的代码，但找不到我做错的地方。这是我的视图模板的一部分：

```
<% using (Html.BeginForm())
   {%>
<%: Html.ValidationSummary(true) %>
<div class="editor-label">
    <p class="number">
        Enter number</p>
    <%: Html.TextBoxFor(model => model.Number, new {@class = "txtNumber"})%>
    <%: Html.ValidationMessageFor(model => model.Number) %>
</div>
<p>
    <input type="submit" value="Calculate" class="button" />
</p>
<% } %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:24:36.213

你的正则表达式应该是这样的：

```
"^([0-9]|10)$" 
```

编辑：

然而，你真正的问题是你没有正确地做事。您在模型中使用 int 类型。但是随后您在 Post 操作中使用了 FormCollection。FormCollection 绕过模型绑定器，并为您提供输入的任何内容。

相反，您应该对您的值进行模型绑定，并且应该在模型中将其设为可为空的 int。原因是 int 是值类型，不能为空。因此，它必须始终包含一个值，在您输入文本的情况下，这意味着该值将为 0，并且由于 0 通过您的验证，因此`ModelState.IsValid`将返回 true。

相反，请执行以下操作：

```
[Required(ErrorMessage = "Number must be enter")]
[Range"^[0-9]{1,10}$", 
    ErrorMessage = "Your must be enter only integer number between 0-10 simvols")]
public int? Number {get;set;} 
```

然后在您的操作方法中：

```
public ActionResult Index(MyModel model) {
    if (ModelState.IsValid) {
       // model.Number is now an integer already, and IsValid will be false for no number
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:15:19.170

确保您的元素包含在 html.beginform 标记内。仅当您的控件位于 <form> 元素内时，验证才有效。

# sublimetext2 - 如何让 Sublime Text II 的查找器忽略所有项目中的模式

> ID：14659535
> 
> 赞同：1
> 
> 时间：2013-02-02T06:58:18.330
> 
> 标签：sublimetext2

在我创建的每个项目中，我发现自己都在这样做：

```
"folder_exclude_patterns": ".git*",
"file_exclude_patterns": ".git*" 
```

我可以将此设置设为全局吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:54:52.847

如果您将这些行添加到您的 Preferences (menu `Preferences/Settings - User`)，则应全局应用这些设置。

# c# - 处置对象的行为

> ID：14659538
> 
> 赞同：1
> 
> 时间：2013-02-02T06:58:39.380
> 
> 标签：c#, idisposable

我有一个带`IDisposable`接口的类。现在我不知道我应该实现什么行为。应该`ObjectDisposedException`在 Dispose 方法之后为此类中的每个方法调用抛出一个异常，还是应该只在指定的方法中抛出异常，例如对已释放资源的数据访问？

我测试了 Bitmap 对象（只是示例）：

```
Bitmap b = new Bitmap (100, 100);
b.Dispose (); // if i remove this line - console will display: Format32bppArgb
Console.WriteLine (b.PixelFormat);
Console.ReadKey (); 
```

和控制台显示：*DontCare*

所以没有抛出异常。在我调用 Dispose 之后，位图对象允许使用 PixelFormat 属性。我应该遵循这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:18:37.497

我在这个和许多其他问题上的理念是“做有意义的事”。

在某些情况下，在类释放其资源后使用某些类成员可能是非常合理的。实际上，某些场景可能需要这样的使用。例如，如果一个对象通过网络连接管理异步事务，可能会要求它关闭，然后在它关闭之后，询问它已经处理了多少事务，是否有任何事务悬空等等。直到关闭完成后才能知道此类统计数据的值，从概念上讲，要求对象关闭然后向其询问与它已经完成的事情有关的历史信息在概念上没有错。

虽然有人可能会争辩说`Close`应该关闭连接，同时允许使用报告历史信息的属性，而`Dispose`应该关闭事物并禁止使用这些属性，但我认为这样的区别是没有帮助的。除其他外，人们可能希望连接释放与其关联的所有资源（`Close`为了允许“重新打开”请求，可能会避免做某事）。`Close`此外，在和之间的行为没有其他差异的情况下`Dispose`，我认为没有必要纯粹要求两个单独的方法，这样`Dispose`可以使统计数据无效。

从某种意义上说，许多`IDisposable`对象可以被视为具有两部分——一个与外部资源交互的实体，以及一个与托管代码交互并且本身可能具有有限功能的实体。虽然“关注点分离”原则建议这两个部分应该是单独的对象（实际上，当这样的拆分可能会有所帮助时，会有一些尖齿），但在许多情况下，客户端代码会想要持有一个单一的引用，它可以服务于两个目的。该引用将必须实现`IDisposable`，但处置不应破坏事物的托管代码方面。

例如，考虑 WinForms`Font`类。该类封装了两件事：(1) 关于字体（字体、大小、样式等）的信息集合，以及 (2) GDI 字体句柄。当 a`Font`为`Dispose`d 时，它不能再用于绘制文本，但它不会忘记字体、样式等。给定`Dispose`d 字体，可以使用旧字体的信息构建新字体。不幸的是，大多数允许读取此类信息的属性都被 显式无效`Dispose`，这意味着在许多情况下，如果想要生成一种类似于现有但已处理`Font`但有一些更改的字体，则必须用从旧字体复制的信息构造一种新字体，基于该字体构造另一种新字体，然后`Dispose`创建的第一个新字体。拥有一个保存与 typestyle 等相关的信息的类可能会有所帮助`FontDescription`，以便在想要保存字体描述但不需要 GDI 句柄的情况下，字体描述可以存储在非-disposable 类，但这不是类的设计方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T01:31:31.327

> 应该只在指定的方法中抛出异常，例如对已处置资源的数据访问？

这是自动的，具有终结器的类应该抛出这样的情况。毕竟，该方法将访问不再存在的操作系统对象，这将产生错误。最好使用像 ObjectDisposedException 这样的明确报告，而不是操作系统错误代码产生的神秘报告。

您给出的位图示例是一个非常可悲的示例，但对于 GDI+ 类并不少见。它们通常具有非常差的错误处理能力。让这不是一个例子。

上一段中的关键词是“具有终结器的类”。你的类不应该*有*一个终结器，所以你是否把自己扔掉而不是把它留给你封装的一次性类中的方法是有争议的。一般来说，你应该避免它，它往往会使你的代码变得混乱而没有什么真正的好处。但是，如果您包装像 Bitmap 这样返回错误数据的糟糕类，请随意这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T07:04:07.030

调用 dispose 后，设置`object`to`null`是我通常遵循的方法。然后，您不需要创建任何异常，因为会抛出空异常，这似乎是正确的方法。

当一个对象为空时，它是否为空并不重要，因为它已被释放；或者它是空的，因为它没有被初始化，或者它是空的，因为它被显式地设置为空。消费者应该知道它是空的，而不是空的潜在行为。

# algorithm - 最小最大连续 k 分区的更快算法

> ID：14659543
> 
> 赞同：1
> 
> 时间：2013-02-02T06:59:27.790
> 
> 标签：algorithm, partitioning

我正在阅读此[http://www.cas.mcmaster.ca/~terlaky/4-6TD3/slides/DP/DP.pdf](http://www.cas.mcmaster.ca/%7Eterlaky/4-6TD3/slides/DP/DP.pdf)并想知道是否存在对分区问题具有更好时间复杂度的解决方案。

从链接：

> “假设给定一个非负数 {s1,...,sn} 和整数 k 的排列 S。如何**将**S 分成 k 个或更少的范围，以最小化所有范围内的最大和？

例如

> S = 1,2,3,4,5,6,7,8,9
> 
> k=3
> 
> 通过将 S 切割成这 3 个范围，最大范围 (8,9) 的总和为 17，这是可能的最小值。
> 
> 1,2,3,4,5|6,7|8,9

链接中建议的算法在 O(kn^2) 中运行并使用 O(kn) 空间。有没有更高效的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T07:21:21.843

好吧，显然这是因为“离题”而被关闭！？但它现在已经备份，所以无论如何，我发现解决方案是二进制搜索答案。抱歉，我忘记了其中一个限制条件是所有整数的总和不会超过 2^64。所以让C =所有整数的累积和。然后我们可以使用二进制搜索答案

`bool isPossible(int x)`

如果可以将 S 划分为 k 个分区且最大分区总和小于 X，则返回 true 的函数。 isPossible(int x) 可以在 O(n) 中完成（通过从左到右添加所有内容，如果它超过 x，则生成一个新分区）。所以总运行时间是 O(n*log(s))。

# c - 无法在 Mac OS X 10.8.2 上编译 Gammu

> ID：14659547
> 
> 赞同：1
> 
> 时间：2013-02-02T07:00:44.690
> 
> 标签：c, osx-mountain-lion, gammu

我正在尝试在我的 Mac 机器上安装 Gammu。我已经安装了 cmake 以及 Apple Developer Command Line Tools。

当我跑步时`./configure`，我得到以下信息：

```
Avi-MacBook-Pro:gammu-1.32.0 avi$ ./configure
Wrapper script for configuring CMake for Gammu.

This provides limited compatibility with configure, if you want full
configuration control, use directly CMake. More information about CMake
is available at <http://www.cmake.org>.

-- Configuring Gammu 1.32.0
-- Could NOT find PkgConfig (missing:  PKG_CONFIG_EXECUTABLE) 
-- Could NOT find PkgConfig (missing:  PKG_CONFIG_EXECUTABLE) 
-- Could NOT find Doxygen (missing:  DOXYGEN_EXECUTABLE) 
-- Could NOT find Threads (missing:  Threads_FOUND) 
-- MySQL not found.
-- Found PostgreSQL: /usr/include, /usr/lib/libpq.dylib
-- libdbi not found.
-- Could NOT find Libintl (missing:  LIBINTL_INCLUDE_DIR LIBINTL_LIB_FOUND) 
-- glib-2.0 not found.
-- gobject-2.0 not found.
-- Bluez not found.
-- Using OSX Bluetooth stack
-- Bluetooth support enabled
-- libusb-1.0 not found.
-- Nokia support enabled
-- Nokia MBUS2 protocol enabled
-- Nokia FBUS2 protocol enabled
-- Nokia FBUS2DLR3 protocol enabled
-- Nokia DKU2PHONET protocol enabled
-- Nokia DKU2AT protocol enabled
-- Nokia DKU5FBUS2 protocol enabled
-- Nokia FBUS2PL2303 protocol enabled
-- Nokia FBUS2BLUE protocol enabled
-- Nokia PHONETBLUE protocol enabled
-- Nokia BLUEFBUS2 protocol enabled
-- Nokia BLUEPHONET protocol enabled
-- Nokia 3320 and compatible phones support enabled
-- Nokia 650 and compatible phones support enabled
-- Nokia 61xx and compatible phones support enabled
-- Nokia 6510 and compatible phones support enabled
-- Force using 6210 frames for calendar for DCT4 phones disabled
-- Nokia 7110 and compatible phones support enabled
-- Nokia 9210 and compatible phones support enabled
-- Nokia 3650 and compatible phones support enabled
-- AT support enabled
-- AT protocol enabled
-- AT protocol over Bluetooth enabled
-- AT phones support enabled
-- Alcatel support enabled
-- Alcatel protocol enabled
-- Alcatel phones support enabled
-- OBEX compatible phones support enabled
-- OBEX protocol over Bluetooth enabled
-- Generic OBEX phones support enabled
-- AT with OBEX phones support enabled
-- Symbian phones support (S60) enabled
-- Symbian phones support (gnapplet) enabled
-- GNAPBUS protocol over Bluetooth enabled
-- Gnapplet phones support enabled
-- S60 phones support enabled
-- Cell Broadcast messages support enabled
-- Backup/Restore functions enabled
/var/lock is not writable, skipping locking tests!
-- Init script not being installed, install it by -DINSTALL_LSB_INIT=ON
-- Udev rules not being installed, install it by -DINSTALL_UDEV_RULES=ON
-- Configuring done
-- Generating done
-- Build files have been written to: /Users/avi/Desktop/gam/gammu-1.32.0/build-configure 
```

当我运行时`make`，我得到错误：

```
Avi-MacBook-Pro:gammu-1.32.0 avi$ make
make -C build-configure
[  1%] Building C object helper/CMakeFiles/string.dir/string.o
In file included from /Users/avi/Desktop/gam/gammu-1.32.0/helper/string.c:1:
/Users/avi/Desktop/gam/gammu-1.32.0/helper/string.h:14:10: error: 'string.h'
      file not found with <angled> include; use "quotes" instead
#include <string.h>
         ^~~~~~~~~~
         "string.h"
/Users/avi/Desktop/gam/gammu-1.32.0/helper/string.h:39:57: error: unknown type
      name 'size_t'
extern int strncasecmp (const char *s1, const char *s2, size_t n);
                                                        ^
/Users/avi/Desktop/gam/gammu-1.32.0/helper/string.h:58:1: error: unknown type
      name 'wchar_t'
wchar_t         towlower                        (wchar_t c);
^
/Users/avi/Desktop/gam/gammu-1.32.0/helper/string.h:58:22: error: unknown type
      name 'wchar_t'
wchar_t         towlower                        (wchar_t c);
                                                 ^
In file included from /Users/avi/Desktop/gam/gammu-1.32.0/helper/string.c:3:
/Users/avi/Desktop/gam/gammu-1.32.0/build-configure/helper/../include/gammu-unicode.h:18:10: fatal error: 
      'wchar.h' file not found
#include <wchar.h>
         ^
5 errors generated.
make[3]: *** [helper/CMakeFiles/string.dir/string.o] Error 1
make[2]: *** [helper/CMakeFiles/string.dir/all] Error 2
make[1]: *** [all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T15:57:26.627

它丢失了很多文件，你必须得到几个丢失的文件，特别是当你为你的服务器使用 MAMP 时。这就是我在我的 Mac 上成功安装 gammu 的方式

要在 Mac OS X 上安装 gammu，您需要：来自 mysql.com 的 Mac OS X 10.8.4、Xcode 4.6.3、MAMP 2.1.4 和 Mysql（用于头文件和库文件） Gammu 1.33.0、Cmake 2.8.11.2 和使用 Homebrew 包管理器安装它。

使用命令行工具安装 xcode 安装 MAMP

要安装 Homebrew：

```
ruby -e "$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)" 
```

然后，您可以使用以下命令安装 cmake：

```
$ brew install cmake 
```

下载游戏

```
http://sourceforge.net/projects/gammu/files/gammu/1.33.0/gammu-1.33.0.tar.gz 
```

提取它并放入您的主文件夹

```
$ ./configure
$ make 
```

使用 MAMP 时：

MAMP 没有必要的头文件和库文件，因此只需从 mysql.com 安装 mysql 选择 64 位 osx 10.8

将头文件从源代码安装或包含它们的二进制安装（Mountain Lion 的库存 MySQL 二进制文件包括这些）从 /usr/local/mysql/include 复制到 /Applications/MAMP/Library/include。

要访问 /usr/local，您可以在 safari 中键入 /usr/local/mysql/lib/libmysqlclient_r.dylib 并单击 Enter，您将被定向到查找器中的该文件。

```
$ /bin/ls -1 /usr/local/mysql/lib/libmysqlclient* | xargs -t -n1 -I% ln -fs % /Applications/MAMP/Library/lib/

ln -fs /usr/local/mysql/lib/libmysqlclient.18.dylib /Applications/MAMP/Library/lib/
ln -fs /usr/local/mysql/lib/libmysqlclient.a /Applications/MAMP/Library/lib/
ln -fs /usr/local/mysql/lib/libmysqlclient.dylib /Applications/MAMP/Library/lib/
ln -fs /usr/local/mysql/lib/libmysqlclient_r.18.dylib /Applications/MAMP/Library/lib/
ln -fs /usr/local/mysql/lib/libmysqlclient_r.a /Applications/MAMP/Library/lib/
ln -fs /usr/local/mysql/lib/libmysqlclient_r.dylib /Applications/MAMP/Library/lib/ 
```

现在，让我们编译带有mysql支持的gammu，像往常一样提取gammu，编辑cmake/FindMySQL.cmake，添加你的MAMP mysql路径，它应该是这样的：

```
find_program(MYSQL_CONFIG mysql_config
${MYSQL_CONFIG_PREFER_PATH}
/usr/local/bin/
/usr/bin/
/Applications/MAMP/Library/bin
/Applications/MAMP/Library
) 
```

然后，让我们配置 cmake：

```
$ mkdir build
$ cd build
$ cmake -DMYSQL_LIBRARIES=/Applications/MAMP/Library/lib/libmysqlclient_r.dylib ..
$ make
$ sudo make install 
```

我希望这将帮助您安装 gammu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T08:14:48.820

您的问题与 CMake 无关。您的 C 编译器找不到 C 标准中定义的某些头文件。这很奇怪，可能与Gammu无关。

你能检查一下你是否可以编译一个简单的 hello word C 测试程序，其中包括？如果失败，则必须修复编译器。

# php - 了解子域 url mod-rewrite

> ID：14659553
> 
> 赞同：0
> 
> 时间：2013-02-02T07:01:28.950
> 
> 标签：php, mysql, .htaccess, mod-rewrite, subdomain

我需要了解 url mod-rewrite 但根本无法获得基本知识。

我想将**www.domain.com/folder/page.php?id=1**更改为**1.domain.com**

1.  我创建了一个通配符子域**(*.domain.com)**，问题是，我应该将子域指向哪里？是**public_html/**还是**public_html/folder/**？

2.  我应该修改哪个 htaccess 文件？它在**public_html/**或**public_html/folder/**中吗？

3.  page.php 的链接是什么？是**href="1.domain.com"**还是**href="www.domain.com/folder/page.php?id=1"**

非常感谢 :D 非常感谢你的帮助 :D

编辑 ：

.htaccess 代码：

```
Options +FollowSymLinks 
RewriteEngine on 

RewriteCond %{HTTP_HOST} !^www.domain.com$ [NC] 
RewriteCond %{HTTP_HOST} ^(www.)?([^.]+).domain.com$ [NC] 
RewriteRule ^$ /file.php?item=%2 [QSA,nc] 
```

我输入了 1.domain.com 但它显示没有找到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:42:17.840

1.  这在很大程度上取决于您的设置。将其指向您将放入 .htaccess 的同一目录。大多数情况下，子域指向一个额外的目录，即 public_html/1/ ，您可以在其中放入 .htaccess 并将其逻辑与您网站的其余部分分开.
2.  子域指向的那个，请参见答案 1。:)
3.  该链接将是一个 href="1.domain.com"

# java - 使用 -source 7 或更高版本

> ID：14659554
> 
> 赞同：41
> 
> 时间：2013-02-02T07:01:46.743
> 
> 标签：java, intellij-idea

在尝试使用 IntelliJ Ultimate 12 构建项目时，我遇到了这些错误

```
use -source or higher to enable diamond operator
use -source 7 or higher to enable multi-catch statement 
```

我在其他一些系统上使用了相同的代码和相同的 intelliJ Ultimate 12，它在那里工作正常。我想知道我需要在我的 IDE 中设置哪些配置来解决这些构建问题？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-02T07:50:57.693

项目的语言级别在项目结构对话框中设置： ![项目结构对话框](../Images/f7261dfefe9ea62f4ee2aa32ed613416.png) 您要确保将语言级别设置为 java 7，并相应地设置 sdk

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-10-01T20:02:02.487

除了接受的答案之外，您可能还需要在 Project Structure > Modules > Sources 选项卡下更改语言级别。

我还需要将 IntelliJ IDEA > Preference > Compiler > Java Compiler 下 IDE 级别使用的 java 编译器从 1.6 更改为 1.7。设置的确切位置将根据您的操作系统和 IntelliJ IDEA 版本而有所不同。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-03-03T08:57:33.337

对我来说，这是因为`maven-compiler-plugin`'s `source`and`target`设置为 1.6 而不是 1.7 in `pom.xml`，将其更改为 1.7 解决了问题。

```
<plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.0</version>
    <configuration>
        <source>1.7</source>
        <target>1.7</target>
    </configuration>
</plugin> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-05T15:04:33.267

我遇到了同样的问题并且正在苦苦挣扎。自动导入是真的，重新导入项目不起作用并尝试了所有可能的选项。但最后我找到了解决方案。

**“重新导入所有 Maven 项目”**对我有用。
您可以在 Maven 项目选项卡上找到该选项。

![在此处输入图像描述](../Images/bfe87a49a76b5981b5fae5c13cfcc999.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-19T18:49:48.557

以上都不适合我。

我必须在我的 pom.xml 中显式添加以下插件语句：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
      <source>1.7</source>
      <target>1.7</target>
    </configuration>
  </plugin> 
```

（好吧，当我单击红色帮助灯并选择“将项目 Java 级别设置为 7”时，IDEA 为我制作了它，所以如果这也不起作用，请尝试一下）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-07T04:03:42.173

如果使用 Gradle 作为构建自动化，请在 build.gradle 中设置以下设置并重新导入您的项目：

源兼容性 = 1.7

目标兼容性 = 1.7

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-11T09:19:41.853

对于 IntelliJ IDEA 社区 2018.2：

*   在项目工具窗口中，右键单击项目名称以进入项目结构菜单。
*   将*语言级别*设置为您想要的任何版本，然后再次重建项目。

您也可以使用**F4**作为快捷方式来访问相同的菜单。

# iphone - 在 ui 层上工作时 UI 冻结

> ID：14659561
> 
> 赞同：0
> 
> 时间：2013-02-02T07:03:22.283
> 
> 标签：iphone, ios, multithreading, freeze

我有一个应用程序，在其中`UIViewController`执行层操作时挂起或冻结`UIView`

我已经这样写了我的代码

```
viewLayer.cornerRadius = 8;
[viewLayer setShadowColor:[UIColor lightGrayColor].CGColor];
[viewLayer setShadowOffset:CGSizeMake(0, -1)];
[viewLayer setShadowOpacity:1];
[viewLayer setShadowRadius:2.0]; 
```

此代码是在`viewDidLoad`方法中编写的，因此在导航到此视图控制器时会挂起动画

# angularjs - 如何将指令中定义的变量访问到控制器？

> ID：14659562
> 
> 赞同：2
> 
> 时间：2013-02-02T07:03:25.433
> 
> 标签：angularjs

我必须访问指令中定义的变量并使用 angularjs 指令在控制器中访问它：

```
app.directive('htmlData', function ($compile) {

    return {
        link: function($scope, element, attrs) {
                $(element).on('click', function() {
                    $scope.html = $compile(element)($scope).html();
                });

                return $scope.html;
        }

    };
}); 
```

并在控制器中使用 $scope.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:39:10.510

由于您没有在指令中创建隔离范围（或新范围），因此与使用该指令的 HTML 关联的指令和控制器都使用/共享相同的范围。链接函数中的 $scope 和注入到控制器中的 $scope 是一样的。如果您在链接函数中将属性添加到范围，控制器将能够看到它，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:30:22.910

当您在 $scope 中设置变量时，您所要做的就是正常绑定到它。在你的情况下，osmehting 像：

```
<div html-data>{{html}}</div> 
```

也许您没有看到更新，因为它缺少`$scope.$apply()`.

无论如何，让我说我看到你的代码有两个问题。首先，您可以使用[`ng-click`指令](http://docs.angularjs.org/api/ng.directive%3angClick)将点击事件附加到您的 HTML。

其次，为什么每次都要重新编译 HTML？几乎没有必要这样做。你可能有一个很大的问题，因为在第一次编译之后，你的模板会丢失，所以重新编译会使它变得无用。

如果需要获取元素，可以注入`$element`.

# iphone - 绘制矩形还是不绘制矩形（什么时候应该使用drawRect/Core Graphics vs subviews/images，为什么？）

> ID：14659563
> 
> 赞同：143
> 
> 时间：2013-02-02T07:03:26.420
> 
> 标签：iphone, ios, core-graphics

**为了澄清这个问题的目的：我知道如何使用子视图和使用 drawRect 创建复杂的视图。我试图完全理解何时以及为什么要使用其中一个。**

我也明白提前优化那么多是没有意义的，并且在进行任何分析之前做一些更困难的事情。考虑到我对这两种方法都很满意，现在真的想要更深入的了解。

我的很多困惑来自于学习如何使表格视图滚动性能真正流畅和快速。当然，这个方法的原始来源是来自[twitter](http://atebits.tumblr.com/post/197580827/fast-scrolling-in-tweetie-with-uitableview) for iPhone（以前的 tweetie）背后的作者。**基本上它说要使表格滚动流畅，秘诀是不使用子视图，而是在一个自定义 uiview 中完成所有绘图。**从本质上讲，使用大量子视图似乎会减慢渲染速度，因为它们有很多开销，并且不断地在它们的父视图上重新合成。

公平地说，这是在 3GS 还很新的时候写的，从那时起 iDevices 变得更快了。仍然[在](http://volonbolon.net/post/634453483/optimizing-table-views-for-performance)[互联网](http://nachbaur.com/blog/core-graphics-isnt-scary-honest)和其他地方经常[建议](http://blog.giorgiocalderolla.com/2011/04/16/customizing-uitableviewcells-a-better-way/#comment-208)这种[方法](http://engineering.twitter.com/2012/02/simple-strategies-for-smooth-animation.html)用于高性能表。事实上，这是[Apple 的 Table Sample Code](http://developer.apple.com/library/ios/#samplecode/TableViewSuite/Listings/5_CustomTableViewCell_Classes_TimeZoneView_m.html#//apple_ref/doc/uid/DTS40007318-5_CustomTableViewCell_Classes_TimeZoneView_m-DontLinkElementID_42)中建议的方法，已在多个 WWDC 视频（[iOS 开发者实用绘图](https://developer.apple.com/videos/wwdc/2011/?id=129)）和许多 iOS[编程书籍中](https://rads.stackoverflow.com/amzn/click/com/B00AJPDJMC)提出。

甚至还有一些[很棒的工具](http://www.paintcodeapp.com)来设计图形并为它们生成核心图形代码。

**所以起初我被引导相信“Core Graphics 的存在是有原因的。它很快！”**

但是，一旦我想到“尽可能使用核心图形”的想法，我就开始看到 drawRect 通常是导致应用程序响应能力差的原因，在内存方面非常昂贵，并且确实对 CPU 造成了负担。基本上，我应该“[避免覆盖 drawRect](http://screencast.com/t/jVbYIKiI) ”（WWDC 2012 [iOS App Performance: Graphics and Animations](https://developer.apple.com/videos/wwdc/2012/?id=238)）

所以我想，就像所有事情一样，它很复杂。也许您可以帮助自己和其他人了解使用 drawRect 的时间和原因？

我看到一些使用 Core Graphics 的明显情况：

1.  您有动态数据（Apple 的股票图表示例）
2.  你有一个灵活的 UI 元素，不能用简单的可调整大小的图像来执行
3.  您正在创建一个动态图形，该图形一旦渲染就会在多个地方使用

我看到了避免使用核心图形的情况：

1.  您的视图的属性需要单独设置动画
2.  您的视图层次结构相对较小，因此任何使用 CG 的额外努力都不值得
3.  您想更新视图的各个部分而不重绘整个视图
4.  当父视图大小发生变化时，您的子视图的布局需要更新

**所以赐予你的知识。在什么情况下你会使用 drawRect/Core Graphics（也可以通过子视图来实现）？是什么因素导致你做出这个决定？如何/为什么建议在一个自定义视图中绘制黄油般平滑的表格单元格滚动，但出于性能原因，Apple 建议不要使用 drawRect？那么简单的背景图片呢（你什么时候用 CG 创建它们而不是使用可调整大小的 png 图片）？**

制作有价值的应用程序可能不需要对这个主题有深入的了解，但我不喜欢在无法解释原因的技术之间进行选择。我的大脑生我的气。

## 问题更新

谢谢大家的信息。这里有一些澄清问题：

1.  如果您正在使用核心图形绘制一些东西，但可以使用 UIImageViews 和预渲染的 png 完成同样的事情，您是否应该一直走这条路？
2.  一个类似的问题：尤其是[像这样的坏蛋工具](http://www.paintcodeapp.com)，你什么时候应该考虑在核心图形中绘制界面元素？（可能当您的元素的显示是可变的。例如，具有 20 种不同颜色变化的按钮。还有其他情况吗？）
3.  鉴于我在下面的回答中的理解，是否可以通过在复杂的 UIView 渲染本身之后有效地捕获单元格的快照位图并在滚动和隐藏复杂视图时显示它来获得表格单元格的相同性能提升？显然，有些部分必须解决。只是我的一个有趣的想法。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-02-02T18:32:34.717

尽可能坚持使用 UIKit 和子视图。您可以提高工作效率，并利用所有更易于维护的 OO 机制。当您无法从 UIKit 中获得所需的性能时，请使用 Core Graphics，或者您知道尝试在 UIKit 中组合绘图效果会更加复杂。

一般的工作流程应该是用子视图构建表格视图。使用 Instruments 测量您的应用将支持的最旧硬件上的帧速率。如果您无法获得 60fps，请下拉到 CoreGraphics。当你这样做了一段时间后，你就会感觉到 UIKit 什么时候可能是在浪费时间。

那么，为什么 Core Graphics 快？

CoreGraphics 的速度并不快。如果它一直在使用，你可能会变慢。它是一个丰富的绘图 API，需要在 CPU 上完成它的工作，而不是大量 UIKit 的工作被卸载到 GPU 上。如果您必须为在屏幕上移动的球设置动画，那么每秒 60 次在视图上调用 setNeedsDisplay 将是一个糟糕的主意。因此，如果您的视图的子组件需要单独设置动画，则每个组件都应该是一个单独的层。

另一个问题是，当您不使用 drawRect 进行自定义绘图时，UIKit 可以优化库存视图，因此 drawRect 是无操作的，或者它可以使用合成的捷径。当你覆盖 drawRect 时，UIKit 不得不走慢路，因为它不知道你在做什么。

在表格视图单元格的情况下，这两个问题可能会被好处所抵消。当视图首次出现在屏幕上时调用 drawRect 后，内容被缓存，滚动是由 GPU 执行的简单翻译。因为您处理的是单个视图，而不是复杂的层次结构，所以 UIKit 的 drawRect 优化变得不那么重要了。所以瓶颈变成了你可以优化你的核心图形绘图。

只要有可能，就使用 UIKit。做最简单的有效实现。轮廓。当有激励时，优化。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-04-10T10:23:09.323

不同之处在于 UIView 和 CALayer 本质上处理的是固定图像。这些图像被上传到显卡（如果你了解 OpenGL，可以将图像视为纹理，将 UIView/CALayer 视为显示此类纹理的多边形）。一旦图像在 GPU 上，它可以非常快速地绘制，甚至可以绘制多次，并且（具有轻微的性能损失）即使在其他图像之上具有不同级别的 alpha 透明度。

*CoreGraphics/Quartz 是一个用于生成*图像的 API 。它需要一个像素缓冲区（同样，想想 OpenGL 纹理）并更改其中的单个像素。这一切都发生在 RAM 和 CPU 中，只有在 Quartz 完成后，图像才会“刷新”回 GPU。这种从 GPU 获取图像、对其进行更改、然后将整个图像（或至少是相当大的一部分）上传回 GPU 的往返过程相当缓慢。此外，Quartz 所做的实际绘图虽然对你正在做的事情来说非常快，但比 GPU 所做的要慢得多。

这很明显，考虑到 GPU 主要是在大块不变的像素周围移动。Quartz 随机访问像素并与网络、音频等共享 CPU。此外，如果您同时使用 Quartz 绘制多个元素，则必须在其中一个更改时重新绘制所有元素，然后上传整个块，而如果您更改一个图像，然后让 UIViews 或 CALayers 将其粘贴到您的其他图像上，您可以向 GPU 上传更少量的数据。

当你不实现 -drawRect: 时，大多数视图都可以被优化掉。它们不包含任何像素，因此无法绘制任何内容。其他视图，如 UIImageView，仅绘制 UIImage（同样，它本质上是对纹理的引用，可能已经加载到 GPU 上）。所以如果你用一个 UIImageView 绘制同一个 UIImage 5 次，它只上传到 GPU 一次，然后在 5 个不同的位置绘制到显示器上，节省了我们的时间和 CPU。

当您实现 -drawRect: 时，这会导致创建一个新图像。然后，您使用 Quartz 在 CPU 上绘制它。如果您在 drawRect 中绘制 UIImage，它可能会从 GPU 下载图像，将其复制到您正在绘制的图像中，完成后，将图像的*第二个副本*上传回显卡。因此，您在设备上使用了两倍的 GPU 内存。

所以最快的绘制方法通常是将静态内容与变化的内容分开（在单独的 UIViews/UIView 子类/CALayers 中）。将静态内容加载为 UIImage 并使用 UIImageView 进行绘制，并将运行时动态生成的内容放入 drawRect 中。如果您有重复绘制的内容，但其本身并没有改变（即，在同一插槽中显示的 3 个图标以指示某些状态）也使用 UIImageView。

一个警告：有太多的 UIViews 这样的事情。特别是透明区域在绘制时对 GPU 的影响更大，因为它们在显示时需要与它们后面的其他像素混合。这就是为什么您可以将 UIView 标记为“不透明”，以向 GPU 表明它可以消除该图像后面的所有内容。

If you have content that is generated dynamically at runtime but stays the same for the duration of the application's lifetime (e.g. a label containing the user name) it may actually make sense to just draw the whole thing once using Quartz, with the text, the button border etc., as part of the background. But that's usually an optimization that's not needed unless the Instruments app tells you differently.

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-02-03T00:43:44.937

**我将尝试总结我从其他人的答案中推断出来的内容，并在对原始问题的更新中提出澄清问题。**但我鼓励其他人继续提供答案，并投票给那些提供了良好信息的人。

## 一般的做法

很明显，正如 Ben Sandofsky 在[他的回答](https://stackoverflow.com/a/14665091/287403)中提到的那样，一般方法应该是**“只要有可能，就使用 UIKit。做最简单的可行实现。配置文件。当有激励时，优化。”**

## 为什么

1.  iDevice 中可能存在两个主要瓶颈，**CPU 和 GPU**
2.  CPU 负责视图的初始绘制/渲染
3.  GPU负责大部分动画（Core Animation）、图层效果、合成等。
4.  UIView 有很多优化、缓存等，内置用于处理复杂的视图层次结构
5.  当覆盖 drawRect 时，你会错过 UIView 提供的许多好处，而且它通常比让 UIView 处理渲染要慢。

**在一个平面 UIView 中绘制单元格内容可以大大提高您在滚动表上的 FPS。**

就像我上面说的，CPU 和 GPU 是两个可能的瓶颈。由于它们通常处理不同的事情，因此您必须注意您遇到的瓶颈。**在滚动表格的情况下，并不是 Core Graphics 的绘制速度更快，这就是为什么它可以大大提高您的 FPS。**

事实上，Core Graphics 的初始渲染可能比嵌套的 UIView 层次结构要慢得多。但是，滚动不连贯的典型原因似乎是您遇到了 GPU 的瓶颈，因此您需要解决这个问题。

**为什么覆盖drawRect（使用核心图形）可以帮助表格滚动：**

据我了解，GPU 不负责视图的初始渲染，而是在渲染后处理纹理或位图，有时还具有一些图层属性。然后它负责合成位图、渲染所有这些图层效果以及大部分动画（核心动画）。

在表格视图单元的情况下，GPU 可能会遇到复杂的视图层次结构的瓶颈，因为它不是为一个位图设置动画，而是为父视图设置动画，并进行子视图布局计算、渲染层效果和合成所有子视图。因此，它不是为一个位图设置动画，而是负责同一像素区域的一组位图之间的关系，以及它们如何交互。

**总而言之，使用核心图形在一个视图中绘制单元格可以加快表格滚动的原因不是因为它绘制得更快，而是因为它减少了 GPU 上的负载，这是在特定情况下给你带来麻烦的瓶颈.**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-02T07:52:06.260

我是一名游戏开发人员，当我的朋友告诉我基于 UIImageView 的视图层次结构会减慢我的游戏速度并使其变得糟糕时，我也在问同样的问题。然后我继续研究我能找到的关于是否使用 UIViews、CoreGraphics、OpenGL 或像 Cocos2D 之类的第 3 方的所有内容。我从 WWDC 的朋友、老师和 Apple 工程师那里得到的一致回答是，最终不会有太大的不同，因为*在某种程度上他们都在做同样的事情*。UIViews 等高级选项依赖于 CoreGraphics 和 OpenGL 等低级选项，只是它们被包装在代码中，以便您更容易使用。

如果您最终要重新编写 UIView，请不要使用 CoreGraphics。但是，您可以通过使用 CoreGraphics 获得一些速度，只要您在一个视图中完成所有绘图，但这真的*值得*吗？我找到的答案通常是否定的。当我第一次开始我的游戏时，我使用的是 iPhone 3G。随着我的游戏变得越来越复杂，我开始看到一些滞后，但使用更新的设备时完全不明显。现在我有很多动作要进行，唯一的延迟似乎是在 iPhone 4 上玩最复杂的关卡时会下降 1-3 fps。

尽管如此，我还是决定使用 Instruments 来查找占用时间最多的功能。我发现这些问题*与我对 UIViews 的使用无关*。相反，它反复调用 CGRectMake 进行某些碰撞感应计算，并为使用相同图像的某些类分别加载图像和音频文件，而不是让它们从一个中央存储类中提取。

所以最后，你可能会从使用 CoreGraphics 中获得一点好处，但通常不值得，或者根本没有任何效果。我唯一一次使用 CoreGraphics 是在绘制几何形状而不是文本和图像时。

# php - 使用 PHP 显示 SQL 数据库中的重复日期

> ID：14659569
> 
> 赞同：0
> 
> 时间：2013-02-02T07:04:04.997
> 
> 标签：php, mysql

我正在访问由另一家网络公司创建的数据库，以检索我当前客户的事件信息。我的客户输入事件信息并记录日期是否重复。我正在尝试显示所有重复日期。到目前为止，我已经能够显示所有内容，常规日期以及重复出现的日期。

表格布置如下：

*   活动
*   Events_Recurring

这是事件表[BIGGER PICTURE的一部分](https://i.stack.imgur.com/ozaf9.png)

![事件表](../Images/a11291b005cf4ab768656a14b6b61e9e.png)

这就是 Events_Recurring 表的样子

![事件重复表](../Images/b98fc06b432f89d5638ba80f8d2fa922.png)

当客户端将其检查为重复时，events_recurring 表会创建一行，其中包含事件 ID 和其他信息，例如事件在一周中的哪一天或一个月的哪一天重复出现。

我只是不确定如何显示重复出现的特定 ID 的倍数。我有一个可以访问的开始日期和结束日期，以及它在一周中的哪一天重复出现。

例如：如果此事件在每个星期四再次发生。我知道它从 1 月 1 日开始，到 1 月 31 日结束，我可以通过它并在 1 月的每个星期四的日期吐出 4 个不同的事件吗？

这是我正在使用的完整代码，在尝试解决这个问题时有点混乱。我正在检查底部的复发

```
// Access external database
$events_db = new wpdb(TOP SECRET CREDENTIALS HERE);
$events_db->show_errors();

if ($events_db) :
    // Query Events Database
    $events = $events_db->get_results(
        "
        SELECT ID, RequestDateStart, RequestDateEnd, Ministry, RequestTimeStart, EventName, CoordinatorName, EventDescription, Location
        FROM gc_events
        WHERE PrivateEvent = 0
        AND Ministry = 15
        AND date(RequestDateStart)>=date(NOW())
        ORDER BY RequestDateStart
        "
    );

    // Create the event data that will be displayed
    foreach ($events as $event) :

        // Store Event ID in a variable
        $masterID = $event->ID;

        echo '<div class="col-12">';

        echo '<strong>ID:</strong> ' . $event->ID . '<br /><strong>Event Name:</strong> ' . $event->EventName . '<br /><strong>Leader:</strong> ' . $event->CoordinatorName . '<br /><strong>Date:</strong> ' . date('l, F j',strtotime($event->RequestDateStart)) . '<br /><strong>Start Time:</strong> ' . date('g:i a',strtotime($event->RequestTimeStart));

        // CHECK IF RECURRING

        $recurring_events = $events_db->get_results(
            "
            SELECT gc_event_id, period, day
            FROM gc_event_recurring
            WHERE gc_event_id = '$masterID'
            "
        );

        foreach ($recurring_events as $recurring_event) :
        if ($recurring_event->period === 'week') {

        echo '<div class="col-12"><strong>&uarr; WEEKLY</strong><br />';

        echo $recurring_event->day;

        echo '</div>';

        }
        endforeach;

        echo '</div>';

    endforeach;
endif; 
```

**我现在得到的结果（带有重复事件）是**

活动：每周祈祷
日期：2013 年 2 月 1 日

**我想要的结果是**

活动：每周祈祷
日期：2013 年 2 月 1 日

活动：每周祈祷
日期：2013 年 2 月 8 日

活动：每周祈祷
日期：2013 年 2 月 15 日

活动：每周祈祷
日期：2013 年 2 月 22 日

* * *

这将是如果开始日期是 2 月 1 日，结束日期是 2 月 28 日。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T08:40:53.677

一句忠告。

尽管从设计的角度来看，设计一个数据库来存储重复模式的“描述”是一种非常简洁的方法，但您可能会遇到很多问题。

不久前我用类似的方法完成了一个项目（我将查找数据库设计并将其添加到我的答案中），虽然我能够重现重复事件的确切日期/时间，但你会遇到以下情况下的问题；大部分源于此：

**重复事件*描述*了重复模式，因此实际（单个）事件在您的数据库中没有*物理记录***

1.  如果客户决定添加一个新事件，您将如何检查它是否与任何现有事件重叠？您必须根据重复模式计算所有“事件”。
2.  如果客户决定需要更改某个活动的预定时间，您将如何将此更改应用于所有*未来*的活动，而不适用于过去的活动（您必须复制原始活动，修改其结尾-date，并将重复的事件设置为新的开始日期）
3.  如果客户决定他想从重复模式中*删除*一天（例如，单个事件已被取消），您还必须将原始事件分成*两个*单独的重复，*或者*有一个“取消/阻止”的日期/时间桌子
4.  如果人们需要为特定事件“预订”，您将无法将它们附加到“真实”事件记录，因为单个事件因为它们实际上并不存在于数据库中。例如，要检查单个事件是否可以重新安排或取消，您需要从代码中执行此操作，因为数据库无法使用外键约束来自动更新相关预订
5.  关于性能；因为单个事件没有物理存储，所以*每次*您想要显示它们时都必须计算它们。考虑在数据库中有 1000 个重复事件，并尝试显示两年后第 23 周的“日历”。您必须分析*所有*重复事件模式并计算它们产生的*所有事件！*

当然，这一切都取决于您系统的实际使用情况，但我想警告您我们遇到的问题。

这是“计划”表的架构（包含重复事件模式）；

```
CREATE TABLE IF NOT EXISTS `schedules` (
  `id`              int(11)     NOT NULL auto_increment,
  `date_start`      date        NOT NULL,
  `time_start`      time        NOT NULL,
  `time_end`        time        NOT NULL,
  `recur_until`     date        default NULL COMMENT 'end date when recurrence stops',
  `recur_freq`      varchar(30) default NULL COMMENT 'null, "secondly", "minutely", "hourly", "daily", "weekly", "monthly", "yearly"',
  `recur_interval`  smallint(5) unsigned default NULL COMMENT 'e.g. 1 for each day/week, 2 for every other day/week',
  `recur_byday`     smallint(5) unsigned default NULL COMMENT 'BITWISE; monday = 1, sunday = 64',
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC; 
```

## 如何规避所描述的问题

在这里完全描述这些问题的解决方案可能不合适，但这里有一些需要考虑的事情；

按照描述的方式存储重复发生的事件*并不是*一个坏习惯。它完美地描述了事件应该发生的时间和频率。然而，缺乏实际事件的物理记录是导致问题的原因。

1.  创建或*修改*重复事件时，计算所有结果事件并将它们存储为物理记录*。*可以查询这些记录，可以将“保留”附加到它们上，您将能够利用数据库功能，例如外键约束来正确处理它们。
**   当按照 1\. 中的描述存储单个事件时，请确保您保留对它们所属的“时间表”的引用。如果（例如）客户想要更改重复事件的时间，您将能够更新所有相关（单个）事件。*   请记住，在情况 2 中，您可能只想更新*未来*的事件，因此“重复事件”仍需要“拆分”为两部分才能实现。在这种情况下，“未来”事件需要附加到新的“重复事件”，旧事件保持附加到现有的“重复事件”*

 ***在您的数据库/软件设计上投入时间**，适当地调查设计是否会为您想要实现的目标“工作”。测试它，尝试一些东西，如果它们不起作用，不要犹豫，“扔掉它”，通常从头开始比尝试“修复”更容易。正确的设计需要时间，并且可能需要多次“重新设计”才能使其正确，但最终**会**为您节省时间和金钱。

希望这有帮助，祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:58:42.740

```
 foreach ($events as $event) :

                // Store Event ID in a variable
                $masterID = $event->ID;

                echo '<div class="col-12">';

                echo '<strong>ID:</strong> ' . $event->ID . '<br /><strong>Event Name:</strong> ' . $event->EventName . '<br /><strong>Leader:</strong> ' . $event->CoordinatorName . '<br /><strong>Date:</strong> ' . date('l, F j',strtotime($event->RequestDateStart)) . '<br /><strong>Start Time:</strong> ' . date('g:i a',strtotime($event->RequestTimeStart));

                // CHECK IF RECURRING

                $recurring_events = $events_db->get_results(
                    "
                    SELECT gc_event_id, period, day
                    FROM gc_event_recurring
                    WHERE gc_event_id = '$masterID'
                    "
                );

                foreach ($recurring_events as $recurring_event) :
                if ($recurring_event->period == 'week') {
                $StartDate = strtotime($event->RequestDateStart);
                $EndDate = strtotime($event->RequestDateEnd);
$TotalDays = round(($EndDate-$StartDate)/(60*60*24*7));
                for($i = 0 ;$i<($TotalDays-1);$i++)
                {
                $StartDate += (60*60*24*7);
                echo '<div class="col-12">';

                echo '<strong>ID:</strong> ' . $event->ID . '<br /><strong>Event Name:</strong> ' . $event->EventName . '<br /><strong>Leader:</strong> ' . $event->CoordinatorName . '<br /><strong>Date:</strong> ' . date('l, F j',$StartDate) . '<br /><strong>Start Time:</strong> ' . date('g:i a',strtotime($event->RequestTimeStart));

                }

                }
                endforeach;

                echo '</div>';

            endforeach; 
```

试试这个，告诉我它是否有效*

# javascript - 使用 JavaScript 添加幻灯片放映会弄乱我的 div

> ID：14659574
> 
> 赞同：0
> 
> 时间：2013-02-02T07:04:46.500
> 
> 标签：javascript

我对 JavaScript 不太熟悉。

我在容器上创建了一个包含 5 个 div 的网站。当我使用 JavaScript 添加幻灯片时，所有图像都会跳到顶部，我用作网站标题的图像变成幻灯片中的另一个图像。

我尝试为幻灯片上的图像分配一个类，但我不知道如何将其合并到 JavaScript 上的代码中，以便它只关注那些（而不是我页面上的所有图像）。

（如果有人能帮忙，非常感谢！！！我不是懒惰，我似乎找不到答案！！！）

这是代码：

```
<style type="text/css">
body {
background-image: url(layout/background.png);
}
img{
-webkit-transition-property:opacity;
-webkit-transition-duration:5s;
position:absolute;
width:320;
height:auto;
}
img.fade-out{opacity:0;}
img.fade-in{opacity:1;}
</style>

</head>

<body>
<div id="container">
<div id="header">
<br>
  <ul>
    <li><img src="main-menu4.gif" width="984" height="290" ></li>
  </ul>
 </div>

<div id="main_image">
<h1>Events</h1>
<br>
<img class="slideshow" src="hotdog.jpeg" width="450" height="auto" >
<img src="girlonslide.jpeg" width="450" height="auto" class="slideshow">
<img src="games/extremefun.jpg" width="450" height="auto" class="slideshow">
<img src="games/climbing.jpeg" width="450" height="auto" class="slideshow">
<img src="games/cartgame.jpeg" width="450" height="auto" class="slideshow">
<img src="pizza.JPG" width="450" height="auto" class="slideshow">
<script>

var interval = 4 * 20; //Seconds between change

var images = document.getElementsByTagName("img");
var imageArray = [];
var imageCount = images.length;
var current = 0;

var randomize = function(){
  return (Math.round(Math.random() * 3 - 1.5));
}
for(var i = 0; i < imageCount; i++){
  images[i].className = 'fade-out';
  imageArray[i] = images [i];
}
imageArray.sort(randomize);

var fade = function() {

  imageArray[current++].className = 'fade-out';
  if(current == imageCount){
      current = 0;
      imageArray.sort(randomize);
  }
  imageArray[current].className = 'fade-in';

  setTimeout(fade, interval * 100);
 };
 fade();
 </script>

 </body>
</html> 
```

我真的不知道我做错了什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:25:05.210

您似乎针对页面中的所有图像标签。您需要将其限制为仅`div#main_image`.

**要做到这一点，更换**

```
var images = document.getElementsByTagName("img"); 
```

**和**

```
var images = document.getElementById("main_image").getElementsByTagName("img"); 
```

# solr - 两个不同项目的 Apache Solr 设置

> ID：14659575
> 
> 赞同：0
> 
> 时间：2013-02-02T07:04:50.770
> 
> 标签：solr, lucene

[我刚刚开始按照http://tudip.blogspot.in/2013/02/install-apache-solr-on-ubuntu.html](http://tudip.blogspot.in/2013/02/install-apache-solr-on-ubuntu.html)中的步骤在我的项目中使用具有数据导入功能的 apache solr 但现在我必须做两个我的项目在同一服务器上的不同实例具有不同的数据库，但两个项目的 solr 配置相同。我怎样才能做到这一点？如果有人可以请帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:49:30.210

可能你能得到的最接近的是拥有两个不同的[Solr 内核](http://wiki.apache.org/solr/CoreAdmin)。它们将在同一台服务器下运行，但具有不同的配置（您可以复制粘贴）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:08:03.533

当您说“不同的数据库”时，您的意思是要从多个数据库复制到一个联接集合/核心中吗？如果是这样，您只需在 DataImportHandler 配置中定义多个实体和可能的多个数据源，然后全部或单独运行它们。有关一些提示，请参阅[另一个问题](https://stackoverflow.com/questions/14627953/solr-how-distinguish-between-multiple-entities-imported-through-dih/14629211#14629211)。

另一方面，如果您指的是不同的 Solr 内核/集合，那么您只想运行具有多个内核的 Solr。这非常简单，您只需要[在 Solr wiki 上](http://wiki.apache.org/solr/CoreAdmin)描述的集合级别之上的 solr.xml 文件。掌握基础知识后，您可能希望查看共享实例目录并拥有单独的数据目录以避免两次更改相同的配置（instanceDir 与每个核心上的 dataDir 设置）。

# file-upload - 基于 PHP 所有者的文件访问保护

> ID：14659578
> 
> 赞同：1
> 
> 时间：2013-02-02T07:05:20.397
> 
> 标签：file-upload

用户上传文件，比如说远程服务器上的图像文件。例如，如果`user1`将图像上传到此路径

```
http://somedomain.com/uploads/123.jpg 
```

我使用上面的 url 在网页上为登录用户显示图像。假设用户注销。并且一些用户了解了上述网址，他可以访问该图像。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:25:22.237

我只是为你演示一个想法。然后，您可以更详细地搜索解决方案。有很多解决方案，其中很多很复杂，所以这取决于你愿意走多远。我认为这是一个非常简单的解决方案（当然取决于您的编程技能）。所以，

1.  用户单击链接`http://somedomain.com/uploads/123.jpg`以打开图像。
2.  您有一个 htaccess 文件，它将获取该 url 并进行转换（在幕后）。
3.  例如，该 htaccess 文件实际上将调用 images.php 文件。
4.  images.php 文件将获取图像的名称并检查用户是否登录。
5.  如果用户已登录，它将 grub 带有名称的图像文件，例如 up-image-123.jpg
6.  htaccess 文件将再次进行转换，而不是显示真实名称 up-image-123.jpg，而是显示 123.jpg（这不是其他人可以访问的真实文件名）

# 3d - Three.js 中真实世界点的投影 Z 值

> ID：14659584
> 
> 赞同：0
> 
> 时间：2013-02-02T07:05:54.360
> 
> 标签：3d, three.js, linear-algebra

我想找到某个世界点的非标准化投影 Z 值。

我目前能够通过执行 mrdoob 在此处显示的操作来获得投影 X、Y 值：[https ://stackoverflow.com/a/11605007](https://stackoverflow.com/a/11605007)

该示例显示了如何对投影 X,Y 进行反规范化（将其从 [-1, 1] 范围内转换为实际屏幕坐标）。它没有显示如何对投影 Z 进行反规范化。这些投影 Z 值也在 [-1, 1] 的范围内，但我不知道如何对它们进行反规范化。

为了在代码中构建问题，以上面 mrdoob 的回答为基础：

```
var width = 640, height = 480;
var widthHalf = width / 2, heightHalf = height / 2;

var projector = new THREE.Projector();
// this could be any point; using example from mrdoob's answer
var someWorldPoint = object.matrixWorld.getPosition().clone();
var vector = projector.projectVector(someWorldPoint, camera );

vector.x = ( vector.x * widthHalf ) + widthHalf;
vector.y = - ( vector.y * heightHalf ) + heightHalf;
// what does vector.z represent and how do I de-normalize vector.z? 
```

谢谢你的帮助。如果我的任何术语不正确或令人困惑，请更正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:56:47.780

z 值用于深度排序。它不打算“去规范化”。

`near`平面映射到 z = -1，平面`far`映射到 z = 1。

截锥体内的点将映射到 -1 和 1 之间的 z 值。（但是，映射不是线性的。）

# android - Passing String value from One Async task to another

> ID：14659585
> 
> 赞同：0
> 
> 时间：2013-02-02T07:06:08.643
> 
> 标签：android, android-asynctask

i have 2 `AsyncTask` , `AsyncOne` and `AsyncTwo`. In First AsyncTask background method i am getting a string value and setting that in `onpostexecute`.,

like this `item = i.getname();`

here `item` is a global variable.

Now i am setting this item value is `onpostexecute` method of AsyncTwo but i get null there ?

How to get the item value?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:17:45.090

你所做的对你的代码和全局变量的东西是正确的，只要确保你的两个 asyncTask 不应该同时处于运行模式。在第一个 postExecute() 中启动第二个任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:14:56.783

you have to make sure asynctask 1 is finished when you start async task 2\. You can keep item as a field in asynctask 1, than can call publishProgress when you can set the value, and start asynctask 2 in task 1's `onProgressUpdate`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T07:26:18.370

根据您的描述，听起来您有两个并发任务在后台运行，并且**task2**取决于**task1**的结果。由于它们同时运行，因此**task2**可能在**task1**之前完成，因此不能保证当**task2**完成时，它会得到**task1**的结果。

为确保可以同时运行两个任务，可以同步 task1 的**方法**`doInBackround()`，并在**task1**中提供同步方法：**`getItem()`**

 ****```
// in task1
private Object item; // instance variable to be set in doInBackground
protected synchronized Object doInBackground(Object... objects) {
    // set item to some value here
    item = ...;
}
public synchronized Object getItem () {
    return item;
}

// in task2
protected Object doInBackground(Object... objects) {
    // do work of task2
    ....

    // when finishing our work, ready to get the result of task1.
    // we don't call task1.getItem() in onPostExecute() to avoid possibly blocking the UI thread
    Object item = task1.getItem();
    // pass item to the onPostExecute method
} 
```

使用上面的代码，**task2**将等待**task1**完成并获得结果，如果它运行得比**task1**快。****

# css - Wordpress 自定义菜单小部件和 CSS 样式

> ID：14659586
> 
> 赞同：3
> 
> 时间：2013-02-02T07:06:21.967
> 
> 标签：css, wordpress, widget

当我通过小部件向我的主题添加自定义菜单时，我得到这行代码：

```
<ul id="menu-insurance" class="menu"><li id="menu-item-294" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-294"><a href="http://test">test</a></li> 
```

我需要删除`class="menu"`，但是当我使用小部件时，我无法弄清楚它是如何添加到我的自定义菜单中的。这种风格在我的主题中产生了风格问题。

如何`class="menu"`从此小部件中删除 ？

我的注册侧边栏是这样的，我不确定它是否正在这样做，或者当您使用自定义菜单小部件时，wordpress 代码是否会查找菜单的 css 样式：

```
 register_sidebar(array(
    'id' => 'sidebar',
    'name' => __('Main Sidebar'),
    'description' => __('Sidebar used on most pages'),
    'before_widget' => '<div id="%1$s" class="widget %2$s">',
    'after_widget' => '</div>',
    'before_title' => '<h2>',
    'after_title' => '</h2>',

)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:24:48.417

自定义菜单是（或应该）在`functions.php`您的内部创建的。找一段这样的代码，检查或添加`menu_class`参数并设置为`""`.

```
wp_nav_menu(array(
    'container' => false,                           // remove nav container
    'container_class' => 'menu clearfix',           // class of container 
    'menu' => 'The Main Menu',                      // nav name
    'menu_class' => 'top-nav clearfix',             // This is it!!!
    'theme_location' => 'main-nav',                 
    'before' => '',                                 // before the menu
    'after' => '',                                  // after the menu
    'link_before' => '',                            // before each link
    'link_after' => '',                             // after each link
    'depth' => 0,                                   // limit the depth of the nav
    'show_home'   => '1',                           // show home link
    'fallback_cb' => 'bones_main_nav_fallback'      // fallback function
)); 
```

# javascript - 如何使正则表达式仅匹配西里尔保加利亚字母

> ID：14659594
> 
> 赞同：10
> 
> 时间：2013-02-02T07:08:17.357
> 
> 标签：javascript, regex

您好，我想用空字符串替换所有来自 bylgarian 字母的字母我已经看到了这个链接 [How to match Cyrillic characters with a regular expression](https://stackoverflow.com/questions/1716609/how-to-match-cyrillic-characters-with-a-regular-expression) 但它对我不起作用

这是我尝试过的

```
1\. var newstr = strInput.replace(/[\p{IsCyrillic}]/gi, ''); 
```

不工作！

```
2\. var newstr = strInput.replace(/[\p{Letter}]/gi, ''); 
```

也没什么，谢谢你的帮助；

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-02T11:04:04.697

Javascript 不支持 Unicode 类的形式`\p{IsCyrillic}`。

但是，假设您要替换的字符在 Unicode [Cyrillic](http://jrgraphix.net/r/Unicode/0400-04FF)范围 0400 - 04FF 中，您可以使用：

```
newstr = strInput.replace( /[\u0400-\u04FF]/gi, '' ); 
```

例如：

```
 var strInput = 'уфхцчшщъhelloЁЂЃЄрстыьэю',
        newstr = strInput.replace( /[\u0400-\u04FF]/gi, '' ); 

    console.log( newstr );    //  'hello' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T07:31:50.160

我认为 JavaScript RegEx 不支持这种语法。

可能这会有所帮助吗？

[正则表达式](http://xregexp.com/plugins/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-19T21:01:52.043

其他方式：

```
Pattern.compile("[А-я]+", Pattern.UNICODE_CHARACTER_CLASS).matcher(strInput ).replaceAll("") ; 
```

`[А-я]+`你的字母在哪里。

# http - 如何确定有效的范围标头 wrt HTTP 实体？

> ID：14659595
> 
> 赞同：0
> 
> 时间：2013-02-02T07:08:28.153
> 
> 标签：http, http-headers, range

根据范围标头的 HTTP/1.1 规范（[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)），声明

> HTTP 中的字节范围规范适用于实体主体中的字节序列（不一定与消息主体相同）。

我的问题是假设我要求下载大小为 1GB 的二进制文件，并且它有多个 128MB 的加密块。由于 HTTP 的字节范围不等于文件的大小而不是 HTTP 实体的大小，因此可以从服务器并行下载这些块而不打破边界。请注意，我不想重新组装文件。我想分别处理这些块来解密。哪个 Range 标头最合适以及如何得出要在该 Range 标头中发送到的正确值？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:25:17.450

Range 标头适用于不**完整的 HTTP 实体**，而仅适用于该 HTTP 实体的**实体**主体。HTTP 消息 RFC ( [http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html) ) 说

> HTTP 消息的消息体（如果有）用于携带与请求或响应相关联的实体体。仅当应用了传输编码时，消息主体与实体主体不同，如 Transfer-Encoding 标头字段（第 14.41 节）所示。

另一个很好的阅读参考是[http://www.ietf.org/rfc/rfc3229.txt](http://www.ietf.org/rfc/rfc3229.txt)（第 4 节 - HTTP 消息生成序列），它解释了如何生成 HTTP 响应。从概念上讲，当请求中同时提供 Range 标头和传输编码时，首先应用 Range 来生成消息响应，然后应用传输编码。我认为大多数 HTTP 服务器都应该确认这一点，因此我们可以应用范围标头 wrt 消息内容长度。

# c# - WriteableBitmap 和 GestureListener_Tap 的 X、Y 坐标不匹配 - Windows Phone 8

> ID：14659596
> 
> 赞同：1
> 
> 时间：2013-02-02T07:08:37.773
> 
> 标签：c#, drawing, windows-phone-8, writeablebitmap

我正在创建一个隐藏对象游戏，并尝试在使用 Eclipse 找到该对象时对其进行标记。我已经手动保存了通过 GestureListener_Tap 事件获得的每张图片的左上角和右下角坐标。

问题是当我尝试使用此代码绘制以坐标为界的日食时

```
WriteableBitmapExtensions.DrawEllipse(writeableBmp, AnsX1, AnsY1, AnsX2, AnsY2, Colors.Red); 
```

日食的位置总是在左上角。使用以下代码标记像素位置表明它们的位置确实与我对 GestureListener_Tap 的期望不同。

```
writeableBmp.SetPixel(AnsX1, AnsY1, Colors.Red);
writeableBmp.SetPixel(AnsX2, AnsY2, Colors.Red); 
```

我标记位置的代码：

```
 private void fadeOutAnimation_Ended(object sender, EventArgs e)
    {

        WriteableBitmap writeableBmp = new WriteableBitmap(bmpCurrent);
        imgCat.Source = writeableBmp;
        writeableBmp.GetBitmapContext();

        WriteableBitmapExtensions.DrawEllipse(writeableBmp, AnsX1, AnsY1, AnsX2, AnsY2, Colors.Red);
        writeableBmp.SetPixel(AnsX1, AnsY1, Colors.Red);
        writeableBmp.SetPixel(AnsX2, AnsY2, Colors.Red);

        // Present the WriteableBitmap
        writeableBmp.Invalidate();       

        //Just some animation code
        RadFadeAnimation fadeInAnimation = new RadFadeAnimation();
        fadeInAnimation.StartOpacity = 0.2;
        fadeInAnimation.EndOpacity = 1.0;
        RadAnimationManager.Play(this.imgCat, fadeInAnimation);

    } 
```

我错过了什么？

编辑：

我在下面的回答没有考虑屏幕方向的变化。请参阅我在答案下方的评论。如何将像素坐标映射到图像坐标？

编辑2：

找到了正确的解决方案。更新了我的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:33:53.733

从@PaulAnnetts 评论中，我设法转换了像素坐标。我最初的错误是假设图像坐标与像素坐标相同！我使用以下代码进行转换。

```
 private int xCoordinateToPixel(int coordinate)
    {
        double x;
        x = writeableBmp.PixelWidth / imgCat.ActualWidth * coordinate;
        return Convert.ToInt32(x);
    }

    private int yCoordinateToPixel(int coordinate)
    {
        double y;
        y = writeableBmp.PixelHeight / imgCat.ActualHeight * coordinate;
        return Convert.ToInt32(y);
    } 
```

编辑：

由于 PixelHeight 和 PixelWidth 是固定的，而 ActualHeight 和 ActualWidth 不是，我应该在 GestureListerner_Tap 事件中将像素转换为坐标。

```
 if ((X >= xPixelToCoordinate(AnsX1) && Y >= yPixelToCoordinate(AnsY1)) && (X <= xPixelToCoordinate(AnsX2) && Y <= yPixelToCoordinate(AnsY2)))
        {...} 
```

和我的像素坐标转换器

```
 private int xPixelToCoordinate(int xpixel)
    {
        double x = imgCat.ActualWidth / writeableBmp.PixelWidth * xpixel;

        return Convert.ToInt32(x);
    }

    private int yPixelToCoordinate(int ypixel)
    {
        double y = imgCat.ActualHeight / writeableBmp.PixelHeight * ypixel;
        return Convert.ToInt32(y);
    } 
```

# javascript - Backbonejs 查看自身模板 replaceWith 和事件

> ID：14659597
> 
> 赞同：2
> 
> 时间：2013-02-02T07:09:17.890
> 
> 标签：javascript, jquery, backbone.js

我正在使用 bbjs 开发我的第一个应用程序，经过 10 个教程和无尽的资源之后，我试图提出我的代码设计。

我问视图和模板的最佳实践是什么。还有一个我正在努力解决的事件问题。据我了解，视图负责一个元素及其内容（以及其他子视图）。为了使代码易于管理、可测试等。元素/模板将在创建时传递给视图。在我的应用程序 Imho 中，视图应该包含模板，因为可见元素有许多“状态”和每个状态的不同模板。当状态发生变化时，我想最好创建一个新视图，但是，视图是否可以用新元素更新自己？

```
App.Box = Backbone.Model.extend({
    defaults: function() {
        return {
            media: "http://placehold.it/200x100",
            text: "empty...",
            type: "type1"
        };
    }
});

App.BoxView = Backbone.View.extend({
    template: {},
    templates: {
            "type1": template('appboxtype1'),
            "type2": template('appboxtype2')
    },
    events: {
      'click .button': 'delete'
    },
    initialize: function(options) {
        this.listenTo(this.model, 'change', this.render);
        this.listenTo(this.model, 'destroy', this.remove);

        this.render();
    },

    render: function() {
        this.template = this.templates[ this.model.get("type") ];

        // first method
        this.$el.replaceWith(  $($.parseHTML(this.template(this)))  );
        this.$el.attr("id", this.model.cid);

        // second method
        var $t_el = this.$el;
        this.setElement( $($.parseHTML(this.template(this))) );
        this.$el.attr("id", this.model.cid);
        $t_el.replaceWith(  this.$el  );
        this.delegateEvents();

        //$('#'+this.model.cid).replaceWith(  $(g.test.trim()) );

        //! on the second render the events are no longer bind, deligateEvents doesn't help

        return this;
    },

    // get values
    text: function() { return this.model.get('text');  },
    media: function() { return this.model.get('media');  },
    delete: function() {
        this.model.destroy();
    }
}); 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:17:31.477

与其尝试替换视图的根元素 ($el)，不如替换它的内容。

`this.$el.html(this.template(this));`

事件应该仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-13T01:19:57.613

试试这个

```
render: function() {
    html = '<div>your new html</div>';
    var el = $(html);
    this.$el.replaceWith(el);
    this.setElement(el);
    return this;
} 
```

$.replaceWith 只会替换 DOM 中的元素。但是 this.$el 仍然持有对现在被替换的旧元素的引用。您需要调用 this.setElement(..) 来更新 this.$el 字段。调用 setElement 还将为您取消委托事件和委托事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:40:42.000

我想出了这个解决方案：http: [//jsfiddle.net/Antonimo/vrQzF/4/](http://jsfiddle.net/Antonimo/vrQzF/4/)

如果有人有更好的主意，它总是受欢迎的！

基本上，鉴于：

```
 var t_$el = this.$el;
        this.$el = $($.parseHTML(this.template(this)));
        this.$el.attr("id", this.cid);
        if (t_$el.parent().length !== 0) { // if in dom
            this.undelegateEvents();
            t_$el.each(function(index, el){ // clean up
                if( index !== 0 ){ $(el).remove(); }
            });
            t_$el.first().replaceWith(this.$el);
            this.delegateEvents();
        } 
```

# android - Attaching Android SQLite Database to Gmail

> ID：14659600
> 
> 赞同：1
> 
> 时间：2013-02-02T07:10:00.850
> 
> 标签：android, sqlite, gmail, android-contentprovider, email-attachments

I need to attach my SQLite Database to a Gmail email.

I believe the use of a Content Provider is necessary, but I cannot figure this out. Please help me understand this concept.

My db is located in the default directory `"data/data/packagename/databases/"`

My database name is **TBProvider**.

The class that extends ContentProvider is also named **TBProvider**.

TBProvider

```
public class TBProvider extends ContentProvider {

    static String PROVIDER_NAME =  
            "com.sas.aap.tbprovider";

    public static Uri CONTENT_URI = 
            Uri.parse("content://com.sas.aap.tbprovider");

    public static final String _ID = "_id";

    private static final int TB = 1;

    private static final UriMatcher uriMatcher;
        static{
            uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
            uriMatcher.addURI(PROVIDER_NAME, "*", TB);
        }

    public static final String DATABASE_NAME = "TBProvider";

    private SQLiteDatabase myTBProvider;

    private static class TBDBHelper extends SQLiteOpenHelper{

        TBDBHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(DATABASE_CREATE);

    @Override
    public String getType(Uri uri) {
        switch (uriMatcher.match(uri)){
        case TB:
            return "vnd.android.cursor.dir/com.sas.aap.tbprovider ";        
        default:
            throw new IllegalArgumentException("Unsupported URI: " + uri);
        }
    }

    @Override
    public boolean onCreate() {
        Context context = getContext();
        TBDBHelper dbHelper = new TBDBHelper(context);
        myTBProvider = dbHelper.getWritableDatabase();
        return (myTBDatabase == null)? false:true;                  
    }
} 
```

**Email:**

```
 public class Email extends Activity {

String personsEmail = "example@gmail.com";
EditText personsName;
String emailAdd, name;
Button sendEmail;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.email);     

    sendEmail = (Button) findViewById(R.id.bSEmail);        
    sendEmail.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String subject = "Subject";

            Intent emailIntent = new Intent(Intent.ACTION_SEND);
            emailIntent.setType("vnd.android.cursor.dir/com.sas.aap.tbprovider ");      
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
            emailIntent.putExtra(android.content.Intent.EXTRA_STREAM, 
                    TBProvider.CONTENT_URI);
            startActivity(emailIntent);

            }
        });
    }
} 
```

**Manifest:**

```
 android:name="com.sas.aap.TBProvider"
      android:authorities="com.sas.aap.tbprovider"
      android:exported="true"> 
```

**EDIT:**

I am getting the following LogCat:

```
Writing exception to parcel
java.lang.IllegalArgumentException: Unsupported URI: content://com.sas.aap.tbprovider
at com.sas.aap.TBProvider.getType(TBProvider.java130)
at android.content.ContentProvider$Transport.getType(TBProvider.java:130)
at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:135)
at android.os.Binder.execTransact(Binder.java:367)
at dalvik.system.NativeStart.run(Native Method) 
```

I need to finish this by the Super Bowl! Let me know if you need more info. I'll be Awake from now until I can get this solved. Please and Thank You!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:32:00.593

我想到了！

```
public ParcelFileDescriptor openFile(Uri uri, String mode)
        throws FileNotFoundException {
    File cacheDir = getContext().getDatabasePath(DATABASE_NAME);    
    return ParcelFileDescriptor.open(cacheDir, ParcelFileDescriptor.MODE_READ_ONLY); 
```

# c - forward reference with respect to pointers?

> ID：14659601
> 
> 赞同：-2
> 
> 时间：2013-02-02T07:10:01.427
> 
> 标签：c, pointers

> **Possible Duplicate:**
> [What is forward reference in C?](https://stackoverflow.com/questions/326205/what-is-forward-reference-in-c)

I read this question somewhere

```
"What is forward reference with respect to pointers in C, and what are its advantages" 
```

The accepted answer mentioned in here : [What is forward reference in C?](https://stackoverflow.com/questions/326205/what-is-forward-reference-in-c) doesn't give a proper explanation? Can anyone explain what exactly it means? and does it have any advantages?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:26:40.240

前向引用 wrt 指针是我们使用的术语，当

**声明了一个指针，编译器为指针保留了内存，但未定义指针指向的 DataItem。**

从以前的答案::

```
struct MyStruct *ptr; // this is a forward reference cuz pointer ptr is declared
                      // but the structure it points to is itself not defined till now.

struct MyStruct // Now the structure is declared
{
       // some data members
}; 
```

优点::[优点](http://www.visualcpp.org/?p=82)

# jquery - js.erb View File Not Found

> ID：14659604
> 
> 赞同：0
> 
> 时间：2013-02-02T07:10:21.853
> 
> 标签：jquery, ruby-on-rails

I'm using the concept for dynamic select menus provided here:

[http://samuelmullen.com/2011/02/dynamic-dropdowns-with-rails-jquery-and-ajax/](http://samuelmullen.com/2011/02/dynamic-dropdowns-with-rails-jquery-and-ajax/)

I've isolated my problem to the first parameter for .post in this code:

```
 this.change(function() {
    $.post("dvbd", that.val(), null, "script");
  }); 
```

I expect for the dvbd.js.erb file in the parent directory to be found and the jQuery contents therein executed. So, the location would be:

```
http://localhost:3000/parentdir/dvbd.js.erb 
```

Instead, I get a 404 error where the location "`http://localhost:3000/parentdir/dvbd` is not found." So I don't even make it to the point to check if the javascript is actually being executed because the file where it resides is never found. However, I'm pretty sure it works because putting the same code in the local file results in successful execution of putting "Hello" in the Dave div:

```
$("#dave").html('Hello'); 
```

I can't really put the code in the local file because this isn't the code I'm actually trying to run. But since this fails first, it has to be solved first.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:31:14.863

该位置将与描述的不同。地点将是：

```
http://localhost:3000/parentdir/dvbd 
```

在您的控制器（parentdir）和方法 dvbd 中，您需要添加：

```
 respond_to do |format|
    format.js
  end 
```

无论如何-问题是您没有在控制器中定义方法 dvdb

# c++ - SSE Bilinear interpolation

> ID：14659612
> 
> 赞同：7
> 
> 时间：2013-02-02T07:11:46.300
> 
> 标签：c++, assembly, graphics, sse

I'm implementing bilinear interpolation in a tight loop and trying to optimize it with SSE, but I get zero speed-up from it.

Here is the code, the non-SIMD version uses a simple vector structure which could be defined as `struct Vec3f { float x, y, z; }` with implemented multiplication and addition operators:

```
#ifdef USE_SIMD
    const Color c11 = pixelCache[y1 * size.x + x1];
    const Color c12 = pixelCache[y2 * size.x + x1];
    const Color c22 = pixelCache[y2 * size.x + x2];
    const Color c21 = pixelCache[y1 * size.x + x2];

    __declspec(align(16)) float mc11[4] = { 1.0, c11.GetB(), c11.GetG(), c11.GetR() };
    __declspec(align(16)) float mc12[4] = { 1.0, c12.GetB(), c12.GetG(), c12.GetR() };
    __declspec(align(16)) float mc22[4] = { 1.0, c22.GetB(), c22.GetG(), c22.GetR() };
    __declspec(align(16)) float mc21[4] = { 1.0, c21.GetB(), c21.GetG(), c21.GetR() };

    // scalars in vector form for SSE
    const float s11 = (x2-x)*(y2-y);
    const float s12 = (x2-x)*(y-y1);
    const float s22 = (x-x1)*(y-y1);
    const float s21 = (x-x1)*(y2-y);

    __declspec(align(16)) float ms11[4] = {1.0, s11, s11, s11};
    __declspec(align(16)) float ms12[4] = {1.0, s12, s12, s12};
    __declspec(align(16)) float ms22[4] = {1.0, s22, s22, s22};
    __declspec(align(16)) float ms21[4] = {1.0, s21, s21, s21};

    __asm {
        movaps xmm0, mc11
        movaps xmm1, mc12
        movaps xmm2, mc22
        movaps xmm3, mc21

        movaps xmm4, ms11
        movaps xmm5, ms12
        movaps xmm6, ms22
        movaps xmm7, ms21

        mulps xmm0, xmm4
        mulps xmm1, xmm5
        mulps xmm2, xmm6
        mulps xmm3, xmm7

        addps xmm0, xmm1
        addps xmm0, xmm2
        addps xmm0, xmm3

        movaps mc11, xmm0
    }
#else
    const Vec3f c11 = toFloat(pixelCache[y1 * size.x + x1]);
    const Vec3f c12 = toFloat(pixelCache[y2 * size.x + x1]);
    const Vec3f c22 = toFloat(pixelCache[y2 * size.x + x2]);
    const Vec3f c21 = toFloat(pixelCache[y1 * size.x + x2]);

    const Vec3f colour =
            c11*(x2-x)*(y2-y) +
            c21*(x-x1)*(y2-y) +
            c12*(x2-x)*(y-y1) +
            c22*(x-x1)*(y-y1);
#endif 
```

Rearranging the asm code to reuse the registers(ended up with just three xmm registers) didn't give any effect. I've also tried using intrinsics:

```
// perform bilinear interpolation
const Vec3f c11 = toFloat(pixelCache[y1 * size.x + x1]);
const Vec3f c12 = toFloat(pixelCache[y2 * size.x + x1]);
const Vec3f c22 = toFloat(pixelCache[y2 * size.x + x2]);
const Vec3f c21 = toFloat(pixelCache[y1 * size.x + x2]);

// scalars in vector form for SSE
const float s11 = (x2-x)*(y2-y);
const float s12 = (x2-x)*(y-y1);
const float s22 = (x-x1)*(y-y1);
const float s21 = (x-x1)*(y2-y);

__m128 mc11 = _mm_set_ps(1.f, c11.b, c11.g, c11.r);
__m128 mc12 = _mm_set_ps(1.f, c12.b, c12.g, c12.r);
__m128 mc22 = _mm_set_ps(1.f, c22.b, c22.g, c22.r);
__m128 mc21 = _mm_set_ps(1.f, c21.b, c21.g, c21.r);

__m128 ms11 = _mm_set_ps(1.f, s11, s11, s11);
__m128 ms12 = _mm_set_ps(1.f, s12, s12, s12);
__m128 ms22 = _mm_set_ps(1.f, s22, s22, s22);
__m128 ms21 = _mm_set_ps(1.f, s21, s21, s21);

mc11 = _mm_mul_ps(mc11, ms11);
mc12 = _mm_mul_ps(mc12, ms12);
mc22 = _mm_mul_ps(mc22, ms22);
mc21 = _mm_mul_ps(mc21, ms21);

mc11 = _mm_add_ps(mc11, mc12);
mc11 = _mm_add_ps(mc11, mc22);
mc11 = _mm_add_ps(mc11, mc21);

Vec3f colour;
_mm_storeu_ps(colour.array, mc11); 
```

And to no avail. Am I missing something, or it is impossible to gain any extra speed here?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T01:05:56.200

为什么是浮点数？给定 a、b、c、d 和 xerr、yerr 在 0-256 范围内的压缩像素 argb，一个简单的示例是：

```
// =================================================================================================================
// xs_Bilerp
// =================================================================================================================
finline uint32 xs_Bilerp (uint32 a, uint32 b, uint32 c, uint32 d, uint32 xerr, uint32 yerr)
{
    #define xs_rbmask    0x00ff00ff
    #define xs_agmask    0xff00ff00

    if (a==b && c==d && a==d)   return a;

    const uint32 arb        =   a & xs_rbmask;
    const uint32 crb        =   c & xs_rbmask;
    const uint32 aag        =   a & xs_agmask;
    const uint32 cag        =   c & xs_agmask;

    const uint32 rbdx1      =  (b & xs_rbmask) - arb;
    const uint32 rbdx2      =  (d & xs_rbmask) - crb;
    const uint32 agdx1      = ((b & xs_agmask)>>8) - (aag >> 8);
    const uint32 agdx2      = ((d & xs_agmask)>>8) - (cag >> 8);

    const uint32 rb1        = (arb      + ((rbdx1 * xerr) >> 8)) & xs_rbmask;
    const uint32 ag1        = (aag      + ((agdx1 * xerr)     )) & xs_agmask;
    const uint32 rbdy       = ((crb     + ((rbdx2 * xerr) >> 8)) & xs_rbmask)       - rb1;
    const uint32 agdy       = (((cag    + ((agdx2 * xerr)     )) & xs_agmask)>>8)   - (ag1 >> 8);

    const uint32 rb         = (rb1 + ((rbdy * yerr) >> 8)) & xs_rbmask;
    const uint32 ag         = (ag1 + ((agdy * yerr)     )) & xs_agmask;

    return ag | rb;
} 
```

# javascript - 如何防止保存/下载网页？

> ID：14659622
> 
> 赞同：0
> 
> 时间：2013-02-02T07:13:51.850
> 
> 标签：javascript, html, security, web, copy-protection

我想知道是否有办法阻止用户保存/下载网页？具体来说，我的意思是不让他们访问通过我的 Web 应用程序在他们自己的机器上显示的数据？

我听说这是不可能的，因为浏览器必须有权访问源代码/数据，但同时，我注意到如果我使用我的 gmail 帐户，打开一封电子邮件，保存页面，但是当我尝试在我的计算机上打开该页面，但它不起作用。此外，如果我单击“查看源代码”，我可以看到即使在我的浏览器中打开了电子邮件，即使源代码也不会显示整个电子邮件消息。

gmail 怎么可能阻止我看到该电子邮件数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:19:03.550

这就是所谓的使用动态数据呈现页面而不刷新页面（AJAX）。整个页面源代码不是一次性下载的，页面内的组件异步请求数据以显示内容。尝试用谷歌搜索它，你会发现更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:23:45.910

在查看源代码中，您只能看到 HTML、CSS、JavaScript 代码。没有人可以从查看源代码中复制任何动态代码 (PHP)。

您无法阻止任何人在浏览器中查看您的 html、css 代码，因为我们有查看源代码选项。

您最多可以做的是禁用右键单击您的页面。可以通过 JavaScript 完成。

# linq - LINQ：动态谓词构建器问题

> ID：14659627
> 
> 赞同：1
> 
> 时间：2013-02-02T07:14:47.593
> 
> 标签：linq, entity-framework, dynamic, predicate, predicatebuilder

我正在尝试创建一个帮助类来轻松构建动态 LINQ 查询。代码是这篇优秀的 CodeProject 文章的大量修改版本：http: [//www.codeproject.com/Articles/493917/Dynamic-Querying-with-LINQ-to-Entities-and-Express](http://www.codeproject.com/Articles/493917/Dynamic-Querying-with-LINQ-to-Entities-and-Express)，这里使用 PredicateBuilder：[http:// www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)

我仍在清理代码的过程中，所以变量名称目前是垃圾，而且看不到一条评论。

**用法**

```
 Dim conditions As New List(Of Condition)
    With conditions
        .Add(New Condition With {.Field = "EatsPeople", .Operator = "Equals", .Value = False})
        .Add(New Condition With {.Field = "Name", .Operator = "Equals", .Value = "Adric"})
        .Add(New Condition With {.Field = "Description", .Operator = "Contains", .Value = "ugly"})
    End With

    Dim predicate = BuildPredicate(conditions)
    Dim tester = data.Monsters.AsExpandable.Where(predicate).ToList 
```

**实体**

```
Public Class Monster
    Public Property EatsPeople As Boolean
    Public Property Name As String
    Public Property Description As String
End Class 
```

**搜索存储**：

```
Public Class Condition
    Public Property Field As String
    Public Property [Operator] As String
    Public Property Value As Object
End Class 
```

**方法**

```
Public Function BuildPredicate(conditions As List(Of Condition)) As Expression(Of Func(Of Monster, Boolean))

    Dim predicate = PredicateBuilder.True(Of Monster)()
    For Each c In conditions
        Dim dbFieldName = c.Field
        Dim dbType = GetType(Monster)
        Dim dbFieldMemberInfo = dbType.GetMember(dbFieldName, BindingFlags.IgnoreCase Or BindingFlags.Public Or BindingFlags.Instance).Single()

        predicate = BuildExpression(c, dbType, dbFieldMemberInfo, predicate)
    Next
    Return predicate

End Function

Private Function CreateLambda(value As Object, method As MethodInfo, ByVal dbType As Type, ByVal dbFieldMemberInfo As MemberInfo) As Expression(Of Func(Of Monster, Boolean))

    Dim dbTypeParameter = Expression.Parameter(dbType, "x")
    Dim dbFieldMember = Expression.MakeMemberAccess(dbTypeParameter, dbFieldMemberInfo)
    Dim criterionConstant = New Expression() {Expression.Constant(value)}
    Dim containsCall = Expression.Call(dbFieldMember, method, criterionConstant)
    Return TryCast(Expression.Lambda(containsCall, dbTypeParameter), Expression(Of Func(Of Monster, Boolean)))

End Function 
```

**和有问题的方法**

```
Private Function BuildExpression(condition As Condition, ByVal dbType As Type, ByVal dbFieldMemberInfo As MemberInfo, ByVal predicate As Expression(Of Func(Of Monster, Boolean))) As Expression(Of Func(Of Monster, Boolean))

    Dim type = condition.Value.GetType
    Dim method As MethodInfo = type.GetMethod(condition.Operator, BindingFlags.Instance Or BindingFlags.Public, Nothing, {type}, Nothing)

    If type = GetType(String) Then

        If condition.Value.ToString.Contains(",") = True Then

            Dim inner = PredicateBuilder.False(Of Product)()
            For Each v In condition.Value.ToString.Split(",")
                inner = inner.Or(CreateLambda(v, method, dbType, dbFieldMemberInfo))
            Next     
            *****Return predicate.And(inner)*****
        End If

    End If

    Return predicate.And(CreateLambda(condition.Value, method, dbType, dbFieldMemberInfo))

End Function 
```

**问题是什么？**

最后一个方法中被五个星号包围的行是问题所在。

将 OR 分组表达式添加到原始谓词构建器时，您会得到

> 参数“f”未绑定在指定的 LINQ to Entities 查询表达式中。

出于某种原因，我似乎无法创建嵌套表达式。如果您将代码放在使用示例中执行查询的位置上方，则它可以工作（在制作一些 mod 之后）。

**更新解决方案：**

带星号的行需要更改为 `Return predicate.And(inner.Expand)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:55:50.510

我不是 Visual Basic 人员，但在 C# 实现中，我认为您可能需要根据 albahari.com/nutshell/predicatebuilder.aspx 将 AsExpandable() 添加到查询中。

# python - 基于 Python 的快速选择实现导致错误

> ID：14659637
> 
> 赞同：0
> 
> 时间：2013-02-02T07:16:46.040
> 
> 标签：python, python-3.x, pyscripter, quickselect

我有实现[这里](http://pine.cs.yale.edu/pinewiki/QuickSelect)讨论的快速选择的小型 python 代码。

```
import random
def Quickselect(A, k):
    if not A:
        return
    pivot = random.choice(A)

    i = 0
    A1 = []
    A2 = [] # Two new arrays A1, A2 to store the split lists
    for i in range(len(A)):
        if A[i] < pivot :
            A1.append(A[i])
        else:
            A2.append(A[i])

    if k < len(A1):
        return Quickselect(A1, k)
    if k > len(A) - len(A2):
        return Quickselect(A2, k-(len(A) - len(A2)))
    else:
        return pivot
pass
def main():
    A = [45,1,27,56,12,56,88]
    print(Quickselect(A,2))
pass 
```

我似乎遇到了一个随机错误。有什么事吗？

**编辑：**实施`random.choice`而不是`random.randint`. 上面的代码似乎工作正常。感谢用户搅拌机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:26:32.983

您的错误发生是因为`randrange`范围为空（即`randrange(1, 1)`）时中断。

改为使用`random.choice`并更改`k <= len(A1)`为`k < len(A1)`：

```
def quick_select(A, k):
    pivot = random.choice(A)

    A1 = []
    A2 = []

    for i in A:
        if i < pivot:
            A1.append(i)
        elif i > pivot:
            A2.append(i)
        else:
            pass  # Do nothing

    if k <= len(A1):
        return Quickselect(A1, k)
    elif k > len(A) - len(A2):
        return Quickselect(A2, k - (len(A) - len(A2)))
    else:
        return pivot 
```

# python - PyQt - QComboBox 连接已确认，但未调用函数

> ID：14659646
> 
> 赞同：2
> 
> 时间：2013-02-02T07:18:09.487
> 
> 标签：python, pyqt, qcombobox, qt-signals

我在使用 PyQt 的信号/插槽问题上遇到了一些麻烦。我的代码在下面，但它可能值得一些解释。前两个 QObject.connect() 返回 True，所以我知道连接已建立。但是，当更改组合框中的选择时，不会按预期调用函数 getParameters。下面的 5 个连接用于调试和测试与 ComboBox 相关的其他信号。那些也不会按预期打印日志。

从我读到的其他有更新的方法来指定连接的地方，这可能是问题吗？如果是这样，有人可以给我一个这种格式的例子吗？谢谢！

```
#interactive GUI connections:
    resultCombo = QObject.connect(self.dlg.ui.comboBox, SIGNAL("currentIndexChanged(const QString & text)"), self.getParameters)
    resultSpin = QObject.connect(self.dlg.ui.spinBox_bands, SIGNAL("valueChanged(int i)"), self.getParameters)
    QMessageBox.information( self.iface.mainWindow(),"Info", "connections: ComboBox = %s SpinBox = %s"%(str(resultCombo), str(resultSpin)) )
    QObject.connect(self.dlg.ui.comboBox, SIGNAL("currentIndexChanged(const QString & text)"), self.log1)
    QObject.connect(self.dlg.ui.comboBox, SIGNAL("currentIndexChanged(int index)"), self.log2)
    QObject.connect(self.dlg.ui.comboBox, SIGNAL("currentTextChanged(const QString & text)"), self.log3)
    QObject.connect(self.dlg.ui.comboBox, SIGNAL("highlighted(const QString & text)"), self.log4)
    QObject.connect(self.dlg.ui.comboBox, SIGNAL("activated(const QString & text)"), self.log5)

def log1(self,  input):
    QgsMessageLog.logMessage("currentIndexChanged string. input = " + str(input),  "Debug",  0)
def log2(self,  input):
    QgsMessageLog.logMessage("currentIndexChanged int. input = " + str(input),  "Debug",  0)
def log3(self,  input):
    QgsMessageLog.logMessage("currentTextChanged string. input = " + str(input),  "Debug",  0)
def log4(self,  input):
    QgsMessageLog.logMessage("highlighted string. input = " + str(input),  "Debug",  0)
def log5(self,  input):
    QgsMessageLog.logMessage("cactivated string. input = " + str(input),  "Debug",  0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T08:46:42.683

我解决了。正如我猜测的那样，它确实与“新样式”连接语法有关。我不完全确定为什么旧样式正在连接，但没有调用连接的函数，但它现在正在使用以下代码：

```
 self.dlg.ui.comboBox.currentIndexChanged['QString'].connect(self.getParameters)
    self.dlg.ui.spinBox_bands.valueChanged.connect(self.getParameters) 
```

对于那些不知道的人（我没有也找不到好的文档 - 链接？），['QString'] 参数允许您选择重载信号的结果类型。这对我来说很重要，因为我使用类型来区分发件人。但是，我想我应该更明确并使用

```
sender = self.sender() 
```

在我的 getParameters 函数中，但这是有效的。

# iphone - uiscrollview 懒加载

> ID：14659650
> 
> 赞同：3
> 
> 时间：2013-02-02T07:18:41.147
> 
> 标签：iphone, ios, uiscrollview, lazy-loading

我已经使用 AssetsLibrary 获得了 iphone 的所有图像。我在 imageview 中传递 UIImage 对象并在滚动视图中显示图像。iphone 中有 200 多张图像，我必须在不使用分页的情况下垂直显示滚动视图中的所有图像。这需要大量时间来显示图像，并且还存在内存问题。是否有任何代码用于在滚动视图中延迟加载 iphone 图像

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T11:37:22.563

我最近一直在研究这个，并在网上查看了大量的示例代码。没有一个真正做到延迟加载（尽管声称）或具有比我愿意忍受的更复杂（不必要的花里胡哨）。PhotoPicker 的 Apple WWDC 视频似乎显示延迟加载，但似乎更专注于预切片图像的平铺，因此没有太大帮助。

我最终做的是`aspectThumbnails`一次加载所有内容，因为它们很小并且不占用太多内存，然后`fullScreenImage`按需加载表示`scrollViewDidEndDecelerating`并重新加载`aspectThumbnail`图像视图离开屏幕。效果非常流畅和视觉上，图像有点粗糙，然后很快（通过背景加载）被更高分辨率的图像替换。

它可能可以使用更多的细化 - 可能为 currentPage +1 和 -1 加载全分辨率图像。我还没有解决这个问题。此外，我不完全确定我对块的使用是否处于最佳状态——但没有出错。

我从 Segue 调用它，并在我的根 viewController 上`assetsArray`的方法中设置 (NSArray of ALAssets) 。`prepareForSegue:`

```
//  ScrollViewController.h
#import <UIKit/UIKit.h>
#import <AssetsLibrary/AssetsLibrary.h>

@interface ScrollViewController : UIViewController <UIScrollViewDelegate>

@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;
@property (strong, atomic) ALAssetsLibrary* assetLibrary;
@property (nonatomic,strong)NSMutableArray* assetsArray;
@end 
```

//ScrollViewController.m

```
#import "ScrollViewController.h"

@interface ScrollViewController ()

@property (nonatomic,assign) CGSize currentImageSize;
@property (nonatomic, assign)int currentPages;
@property (nonatomic, assign)int currentPageNum;
@property (nonatomic, strong)UIImage* placeHolder;
@end

@implementation ScrollViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    //self.placeHolder = [UIImage imageNamed:@"loader.jpg"];
    self.scrollView.delegate = self;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if (self.assetsArray != nil) {
        self.currentPages = [self.assetsArray count];

        CGSize size = self.scrollView.frame.size;
        int num = self.currentPages;

        self.scrollView.contentSize=CGSizeMake(size.width*num, size.height);

        [self loadThumbnails];

        self.currentPageNum = 0;
        [self loadFullScreenImageByIndex:self.currentPageNum];
    }
}

-(void)loadThumbnails
{
    int pageCount = self.currentPages;
    CGSize size = self.scrollView.frame.size;
    self.scrollView.contentSize=CGSizeMake(size.width*pageCount, size.height);

    for (int i = 0; i < pageCount; i++) {

        ALAsset *asset = [self.assetsArray objectAtIndex:i];//
        CGRect imageViewFrame;

        // x offset is determined by arrayIndex
        imageViewFrame.origin.x = self.scrollView.frame.size.width * i;
        imageViewFrame.origin.y = 0;
        imageViewFrame.size = self.scrollView.frame.size;

        self.currentImageSize = imageViewFrame.size; // THIS IS WRONG

        UIImage *image = [[UIImage alloc] initWithCGImage:asset.aspectRatioThumbnail];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        imageView.clipsToBounds = YES;
        imageView.contentMode = UIViewContentModeScaleAspectFill;
        imageView.frame = imageViewFrame;
        imageView.tag = i+1;// start tags at 1

        [self.scrollView addSubview:imageView];
    }
}

- (void)viewDidUnload {
    [self setScrollView:nil];
    [super viewDidUnload];
}

- (void)loadFullScreenImageByIndex:(int)index
{
    int arrayIndex = index;
    int tagNumber = index+1;
    ALAsset *asset = [self.assetsArray objectAtIndex:arrayIndex];

    __weak typeof(self) weakSelf = self;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        UIImage *tmpImage = [[UIImage alloc] initWithCGImage:asset.defaultRepresentation.fullScreenImage];

        __strong __typeof__(weakSelf) strongSelf = weakSelf;
        if ([strongSelf.scrollView viewWithTag:tagNumber] != nil){

            dispatch_async(dispatch_get_main_queue(), ^{
                __strong __typeof__(weakSelf) strongSelf = weakSelf;
                if ([strongSelf.scrollView viewWithTag:tagNumber]!= nil){
                    UIImageView * tmpImageView = (UIImageView*)[strongSelf.scrollView viewWithTag:tagNumber];
                    tmpImageView.image = tmpImage;
                }
            });
        }
    });
}

- (void)loadThumbnailImageByIndex:(int)index
{
    int arrayIndex = index;
    int tagNumber = index+1;

    ALAsset *asset = [self.assetsArray objectAtIndex:arrayIndex];//

    __weak typeof(self) weakSelf = self;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        UIImage *tmpImage = [[UIImage alloc] initWithCGImage:asset.aspectRatioThumbnail];        
        __strong __typeof__(weakSelf) strongSelf = weakSelf;
        if ([strongSelf.scrollView viewWithTag:tagNumber] != nil){

            dispatch_async(dispatch_get_main_queue(), ^{
                __strong __typeof__(weakSelf) strongSelf = weakSelf;
                if ([strongSelf.scrollView viewWithTag:tagNumber]!= nil){
                    UIImageView * tmpImageView = (UIImageView*)[strongSelf.scrollView viewWithTag:tagNumber];
                    tmpImageView.image = tmpImage;
                }
            });
        }
    });
}

- (void)manageImages
{
    int currentPage = (self.scrollView.contentOffset.x / self.currentImageSize.width);

    if (currentPage != self.currentPageNum){
        [self loadThumbnailImageByIndex:self.currentPageNum]; //pg no longer visible so load thumb
        [self loadFullScreenImageByIndex:currentPage]; // load full
        self.currentPageNum = currentPage;// store
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    [self manageImages];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T08:41:07.857

您可以使用 GCD 块和大型中央调度。在你的 .h 文件中声明它

```
dispatch_queue_t imageQueue_; 
```

创建一个 NSmutableDictionary

```
@property (nonatomic, strong) NSMutableDictionary *thumbnailsCache; 
```

使用下面的代码显示图像。

```
NSString *thumbnailCacheKey = [NSString stringWithFormat:@"cache%d",imageIndex];

    if (![[self.thumbnailsCache allKeys] containsObject:thumbnailCacheKey]) {

        // thumbnail for this row is not found in cache, so get it from remote website
        __block NSData *image = nil;
        dispatch_queue_t imageQueue = dispatch_queue_create("queueForCellImage", NULL);
        dispatch_async(imageQueue, ^{
            NSString *thumbnailURL = [NSString stringWithFormat:@"%@",deal_Class.deal_imageUrl];
            image = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"Your URL"]];
            dispatch_async(dispatch_get_main_queue(), ^{

              imageView.image = [UIImage imageWithData:image];

                if (image) {
                    [self.thumbnailsCache setObject:image forKey:thumbnailCacheKey];
                }

            });
        });

     //   dispatch_release(imageQueue);

    } else {

        // thumbnail is in cache
        NSData *image = [self.thumbnailsCache objectForKey:thumbnailCacheKey];
        dispatch_async(dispatch_get_main_queue(), ^{
            imageview.image = [UIImage imageWithData:image];
        });
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T11:54:52.503

有很多可用的教程。

让我指出其中的一些：

[如何使用 UIScrollView 滚动和缩放内容](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)

[iOS 的滚动延迟图像加载](http://www.binpress.com/app/scroll-lazy-image-load-for-ios/907#description)

如果您在使用某人的代码
[DMLazyScrollView 时没有问题：延迟加载 UIScrollView（无限页面滚动）](https://github.com/malcommac/DMLazyScrollView)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T07:26:04.267

您应该只加载当前页面上的图像加上任一方向的一个或两个。仅在需要时加载图像，保留有限的缓冲区，并在图像离开缓冲区后删除图像。例如，如果图像 3 和 4 在屏幕上，则应加载图像 1、2、5 和 6。当用户滚动以使图像 5 和 6 出现在屏幕上时，它将保持图像 3 和 4 的加载，将从内存中删除 1 和 2，并加载 7 和 8 以创建新的缓冲区。

# javascript - 是否有适用于移动设备的 JavaScript Web 服务器（如 Node.js）？

> ID：14659652
> 
> 赞同：1
> 
> 时间：2013-02-02T07:19:06.247
> 
> 标签：javascript, mobile, webserver

我正在开发一个移动平台，将移动设备变成一个“安静的网络服务主机”，接收来自第三方的请求以执行某些操作并回复。

由于我打算使用 JQuery (javascript+HTML5+css) 来实现跨不同移动操作系统的可移植性，因此我需要“JavaScript Web 服务器”而不是 Java（有几个用于移动设备的 Java Web 服务器）。

任何人都可以提出任何解决方案吗？我正在寻找 Tiny Java Web Server( [http://tjws.sourceforge.net/](http://tjws.sourceforge.net/) ) 或 i-jetty 之类的东西，但这些都是用 Java 编写的。

JavaScript 中有一个叫做 Node.js 的东西，但那是一个桌面 Web 服务器，我不知道我是否可以修改它或在移动设备中使用它。（我不是经验丰富的程序员！！！）。非常感谢您提前提供的快速帮助。

# css - z-index 没有按应有的分层

> ID：14659654
> 
> 赞同：0
> 
> 时间：2013-02-02T07:19:24.140
> 
> 标签：css, z-index, layer

我在 z-index 方面获得了一些帮助......
我正在使用代码并且需要我的 id="hidebar" 位于“content”和“content-inner”div 之上。对不起，如果这看起来真的很基本，但我很挣扎=D

我的 CSS 结构文件：

```
body
{
    margin: 0; 
    padding: 0;
    height:100%;
    width:100%;
    background-color: #FFF;
    z-index:-1;
} 
#content
{
    width: 100%;
    height: 640px;
    background-color:#060;
    position:relative;
    z-index:-1;
}
#content-inner
{
    width: 960px;
    height: 640px;
    background-color:#666;
    margin-left:auto;
    margin-right:auto;
    position:relative;
    z-index:-1;
}

#hidebar
{
    width: 100%;
    height: 50px;
    background-color:#0FF;
    position:relative;
    z-index:2;
}

#navbar
{
    width: 100%;
    height: 257px;
    background-color:#F00;
    position:relative;
}
#navbar-inner
{
    width: 960px;
    height: 257px;
    background-color:#666;
    margin-left:auto;
    margin-right:auto;
    position:relative;
}

#footer
{
    width: 100%;
    height: 181px;
    background-image:url(images/gray-pixel.png);
    position:relative;  
}
#footer-inner
{
    width: 960px;
    height: 181px;
    background-color:#666;
    margin-left:auto;
    margin-right:auto;
    position:relative;
}
#footer-small
{
    width:230px;
    float:left;
    height:100%;
    background-color:#999;
    position:relative;
}
#footer-large
{
    width:500px;
    float:left;
    height:100%;
    background-color:#CCC;
    position:relative;
}
#colour-bar
{
    width: 100%;
    height: 13px;
    background-color:#639;
    position:relative;
}

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote,     pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s,     samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li,     fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article,     aside, details, figcaption, figure, footer, header, hgroup, mark, menu, meter, nav, output,     progress, section, summary, time {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-size: 100%;
    vertical-align: baseline;
    background: transparent;
}
ul {
    list-style-type:none;
}
ul li a{
    font:700 49px/1.2em Arial, Helvetica, sans-serif;
    color:#fff;
    text-decoration:none;
    height:59px;
    display:inline-block;
    list-style-type:none;
    text-align:center;
    position::relative;
    vertical-align: baseline;
}

ul li a:hover{
    color:#e25709;
}
div.table 
{
    border: 0px solid black; 
    display: table;
    margin-left:auto;
    margin-right:auto;
}
div.tr {border: 0px solid black; display: table-row; }
div.td {border: 0px solid black; display: table-cell; }

h3
{
    color:#FFF;
    font-size:22px;
    font-family:Arial, Helvetica, sans-serif;
    padding-top:30px;
    padding-left:25px;
    padding-bottom:20px;
}

h4
{
    color:#FFF;
    font-size:13px;
    font-style:normal;
    font-family:Arial, Helvetica, sans-serif;
    padding-left:25px;
    padding-right:25px;
    line-height:1.2em;
} 
```

我的源代码：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link rel="stylesheet" type="text/css" href="css/structure.css"/>
<script src="http://code.jquery.com/jquery-latest.js"></script>

</head>

<body>
    <div id="content">
        <div id="content-inner">
            <a href="index.html">
                <img src="images/logo.jpg"/ alt>
            </a>
        </div>
    </div>

    <div id="hidebar">
    </div>

    <div id="colour-bar"></div>
    <div id="navbar">
        <div id="navbar-inner">

            <ul>
                <li><a href="#" rel="1"><button1>About us</button1></a></li>
                <li><a href="#" rel="2"><button2>Partners</button2></a></li>
                <li><a href="#" rel="3"><button3>Solutions</button3></a></li>
                <li><a href="#" rel="4"><button4>Services</button4></a></li>
            </ul>
        </div>
    </div>
    <div id="footer">
        <div id="footer-inner">
            <div id="footer-small"></div>
                <div id="footer-large">
                    <div class="table">
                        <div class="tr">
                            <div class="td">
                                <h3>Contact Us:</h3>
                            </div>
                            <div class="td">
                            </div>
                        </div>
                        <div class="tr">
                            <div class="td">
                                <h4>AUS - Melbourne<br />
                                101 Main Street<br />
                                Glen Iris VIC 3146</h4>
                            </div>
                            <div class="td">
                                <h4>Email: mail@website.com<br />
                                Phone: (03) 9888 8888<br />
                                Fax: (03) 9888 8888</h4>
                            </div>
                        </div>
                    </div>
                </div>
            <div id="footer-small"></div>
        </div>
    </div>

<script>
$("button1").click(function () {
$("h4").toggle("slow");
$("button1").toggle();
$("button2").show();
$("button3").show();
$("button4").show();
});

$("button2").click(function () {
$("h4").toggle("slow");
$("button2").toggle();
$("button1").show();
$("button3").show();
$("button4").show();
});

$("button3").click(function () {
$("h4").toggle("slow");
$("button3").toggle();
$("button1").show();
$("button2").show();
$("button4").show();
});

$("button4").click(function () {
$("h4").toggle("slow");
$("button4").toggle();
$("button1").show();
$("button2").show();
$("button3").show();
});
</script>

</body>
</html> 
```

任何帮助都会很棒<3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:49:25.000

如果你想`#hidebar`在上面，`#contents`然后`#content-inner`只需重新定位 `#hidebar`.

```
<div id="content">
        <div id="content-inner">
            <div id="hidebar">

            </div>
            <a href="index.html">
                <img src="images/logo.jpg" />
            </a>
        </div>
    </div> 
```

# android - android startActivity 未定义

> ID：14659656
> 
> 赞同：1
> 
> 时间：2013-02-02T07:19:55.283
> 
> 标签：android, start-activity

我正在制作一个绘图应用程序并想分享图像。但是，我遇到了`startActivity`错误写入的部分错误`The method startActivity(Intent) is undefined for the type`。这意味着什么以及如何解决？非常感谢提前！！！

## 编辑：

发布了代码的进一步代码设置：`ActivityA`调用`shareImage()`.`PaintView`

我不确定这种方式的上下文是否可以？除了这个新增的分享功能，没有分享的代码运行起来非常流畅。

## 油漆视图

```
// the main screen that is painted
public class PaintView extends View 
{      
   Context context_new;       
   private boolean isFileAlreadySaved = false;
   String savedFilePath = "";

   private static final float TOUCH_TOLERANCE = 10;
   // other declarations here

   // PaintView constructor initializes the PaintView
   public PaintView(Context context, AttributeSet attrs) 
   {
      super(context, attrs); // pass context to View's constructor
      this.context_new=context;
      paintScreen = new Paint(); // used to display bitmap onto screen

      // set the initial display settings for the painted line
      paintLine = new Paint();
      paintLine.setAntiAlias(true); // smooth edges of drawn line
      paintLine.setColor(Color.BLACK); // default color is black
      paintLine.setStyle(Paint.Style.STROKE); // solid line
      paintLine.setStrokeWidth(5); // set the default line width
      paintLine.setStrokeCap(Paint.Cap.ROUND); // rounded line ends
      pathMap = new HashMap<Integer, Path>();
      previousPointMap = new HashMap<Integer, Point>();
   } // end DoodleView constructor

   public void shareImage()
   {
        Intent share;
        File attachment = null;

        if(isFileAlreadySaved == true)
        {
            attachment = new File(savedFilePath);
            boolean isFileThere = attachment.exists();
            if (isFileThere == true)
            {
                share = new Intent(Intent.ACTION_SEND);
                share.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                share.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(attachment));
                share.setType("image/png");
                startActivity(Intent.createChooser(share, "Share drawing"));
            }
        }
        else
        {
            Toast.makeText(getContext(), "Please save the image first...", Toast.LENGTH_LONG).show();    
        };
   }; 
```

## 活动A：

```
 public OnClickListener shareButtonListener = new OnClickListener()   
   {
      @Override
      public void onClick(View v) 
      {        
        vibrate();
        PaintView.shareImage(ActivtyA.this);
      };
   }; 
```

## 日志猫：

```
02-02 16:01:58.230: E/AndroidRuntime(9809):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at android.os.Looper.loop(Looper.java:137)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at android.app.ActivityThread.main(ActivityThread.java:4511)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at java.lang.reflect.Method.invokeNative(Native Method)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at java.lang.reflect.Method.invoke(Method.java:511)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at dalvik.system.NativeStart.main(Native Method)
02-02 16:01:58.230: E/AndroidRuntime(9809): Caused by: java.lang.NullPointerException
02-02 16:01:58.230: E/AndroidRuntime(9809):     at com.pearmak.drawing.ActivityA.onCreate(ActivityA.java:102)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at android.app.Activity.performCreate(Activity.java:4470)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
02-02 16:01:58.230: E/AndroidRuntime(9809):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
02-02 16:01:58.230: E/AndroidRuntime(9809):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:24:53.940

我猜你正试图`startActivity()`从一个不是你的班级的班级打电话`Activity`。该`startActivity()`方法属于`Context`该类，因此您需要从您的`Activity`(which extends `Context`) 调用它，或者将一个实例传递`Context`给该类并使用该`context.startActivity()`调用。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:45:39.703

您需要通过使用构造函数或将方法更改为参数化方法将 Activity 上下文传递给非 Activity 类：

```
public class PaintView extends View 
{      
  Context context_new;
  public PaintView(Context context){
    this.context_new=context;
  }
   //.. your code here
   public void shareImage(Context context)
   {

     context.startActivity(Intent.createChooser(share, "Share drawing"));
     //OR
     //context_new.startActivity(Intent.createChooser(share, "Share drawing"));
      Toast.makeText(context, 
          "Please save the image first...",
                   Toast.LENGTH_LONG).show();   

      //OR
         // Toast.makeText(context_new, 
         // "Please save the image first...",
         //Toast.LENGTH_LONG).show(); 

   }

} 
```

并从 Activity 调用 shareImage 方法：

```
PaintView paintview=new PaintView(Your_Current_Activity.this);
paintview.shareImage(Your_Current_Activity.this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T07:32:00.050

试试看`startActivityForResult(Intent.createChooser(share, "Share drawing"));`

# c - 如果计数器超过了 malloc 或 calloc 分配的内存怎么办

> ID：14659660
> 
> 赞同：0
> 
> 时间：2013-02-02T07:22:04.243
> 
> 标签：c

我在 C 中使用以下命令将 80 个字节（在 64 位系统中）分配给 d。

```
double *d = calloc(10, sizeof(double)); 
```

并使用以下循环初始化 d

```
for (k=0;k<11;k++){
d[k] = k;
} 
```

当我运行程序时，没有错误。`k`但我觉得由于is的上限`11`，应该有问题，因为 d 是长度为 10 的数组。请让我知道为什么程序执行时没有错误。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T07:23:41.803

这是[**未定义的行为**](http://en.wikipedia.org/wiki/Undefined_behavior)。当您违反规则时，可能会出现错误，并且操作系统可能会默默地忽略它-所有赌注都已取消。

代码中实际发生的情况取决于操作系统、编译器和运行它的架构，这可能会容忍这种违规、崩溃或做其他事情，关键是 - 结果行为是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:27:29.490

我相信只要在程序堆栈中，C 和 C++ 就不会对数组和指针进行边界检查。我相信当访问在程序堆栈之外时会引发分段错误。

# tomcat - 我的 Web 应用程序在 Tomcat 中成功部署后如何获得通知？

> ID：14659662
> 
> 赞同：0
> 
> 时间：2013-02-02T07:22:23.627
> 
> 标签：tomcat, web-applications, web-deployment, servletcontextlistener

一旦我的 Web 应用程序成功部署在 Tomcat 中且没有任何错误/异常，我想得到通知吗？

我可以编写一个 servletContextListener 但`contextInitialized()`方法将在 Web 应用程序启动之前被调用，这不能解决我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T16:17:12.223

```
tmp=$(mktemp -t catalina.XXXXXXX) || exit 136
trap 'rm "$tmp"' 0
trap 'exit 255' 2 15
tail -n 200 catalina.out >"$tmp"
if grep -q error "$tmp"; then
    cat "$tmp"
    exit 1
fi
exit 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:25:29.177

将一个 servlet 添加为最后一个加载，怎么样？

```
<load-on-startup>99</load-on-startup> 
```

并在这个 servlet 上调用另一个 servlet 来执行您的操作？像这样，您将确保应用程序已完全加载，因为第二个 servlet 会响应。

最好有一个单例来保存启动过程中发生的任何异常，这样您就可以收到通知，或用于应用程序的健全性检查。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T07:28:11.903

如果您的要求很简单，那么只需在 ServletContextListener 中创建单个线程/可运行就很容易了。在 contextInitialized() 中创建并启动线程，并在 contextDestroyed() 中将其关闭。. 使用由 Executors.newSingleThreadScheduledExecutor() 创建的 ScheduledExecutorService。您传递给 Executor 的 Runnable 将从 BlockingQueue 中读取。

[在创建线程一个部署在 Tomcat 中的 Web 应用程序中](https://stackoverflow.com/questions/5406427/creating-threads-a-webapplication-which-is-deployed-in-tomcat)查找更多信息

# android - 使用 AVD Manager 创建虚拟设备

> ID：14659663
> 
> 赞同：1
> 
> 时间：2013-02-02T07:22:46.583
> 
> 标签：android, avd, android-2.2-froyo

我是 Android 应用程序开发的新手。（一年前做过，但完全忘记了）

一年前，我创建了一个虚拟设备，并使用 AVD 管理器设置了模拟器。那时候，它只要求我选择目标，我每次都选择 2.2，以便它也支持最新版本。

一年后，我面临的问题是，它也要求我选择目标设备。我使用 Galaxy Fit，但其他人的手机和分辨率不同，适用于平板电脑、智能手机、笔记等。我参考了 YouTube、Google 和 Android 文档本身的所有教程，它只提供有关旧设置的信息，一个没有设备信息。

我想知道选择哪种设备，以便我的应用程序可以在所有设备和屏幕尺寸上兼容（我选择 Android 2.2 作为目标），因为不选择设备，确定按钮不会被激活。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:26:25.140

使应用程序与所有设备兼容取决于您设计应用程序的方式，而不是选择的虚拟设备。

可以在[此处](http://developer.android.com/guide/practices/screens_support.html)找到有关如何针对不同屏幕优化应用的一些推荐的 Android 文档。

关于某些设备中可能存在或不存在的传感器或其他功能，您应该在使用它们之前检查它们是否可用。

如果您遵循这些，您可能很适合与支持您选择的最低 API 集的手机兼容。

但是，在不同的虚拟设备中进行测试可以帮助您验证您的应用在不同的真实设备中是否兼容。

顺便说一句，创建 AVD 时的设备选项是用于创建与特定设备匹配的 AVD（这里有一个问题[）](https://stackoverflow.com/questions/14317789/how-to-create-a-new-avd-in-eclipse)。但是为了兼容性，您不需要测试特定设备，而是需要测试各种功能值（分辨率、屏幕等）

# java - Spring 3 和 hibernate 4.X 在销毁方法中面临事务管理器异常

> ID：14659665
> 
> 赞同：0
> 
> 时间：2013-02-02T07:23:27.050
> 
> 标签：java, spring, hibernate, transactions

我们目前在我们的项目中使用 Spring 3 和 hibernate 4.4。我的数据库配置 xml 的片段如下所示

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">
        <property name="driverClass">
            <value>${jdbc.driver.className}</value>
        </property>
        <property name="jdbcUrl">
            <value>${jdbc.url}</value>
        </property>
        <property name="user">
            <value>${jdbc.username}</value>
        </property>
        <property name="password">
            <value>${jdbc.password}</value>
        </property>
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource">
            <ref bean="dataSource" />
        </property>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">false</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
                <prop key="hibernate.jdbc.batch_size">20</prop>
                <prop key="hibernate.current_session_context_class">managed</prop>
            </props>
        </property>
        <property name="packagesToScan" value="com.sample.entity" />
    </bean>
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory">
            <ref bean="sessionFactory" />
        </property>
    </bean>
    <tx:annotation-driven /> 
```

当我们测试我们的战争时，我们遇到了这个异常。

```
13:27:19,511 ERROR TransactionInterceptor:419 - Application exception overridden by rollback exception
    org.springframework.beans.factory.BeanCreationNotAllowedException: 
    Error creating bean with name 'transactionManager': Singleton bean creation not allowed 
    while the singletons of this factory are in destruction (Do not request a bean from a 
    BeanFactory in a destroy method implementation!)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:212)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.determineTransactionManager(TransactionAspectSupport.java:248)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:100)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) 
```

我无法弄清楚这是否是因为配置文件中提到的 destroy-method =close 。我还在服务层和数据库层使用@Transactional 注释。这会导致任何问题吗？我们试图测试一个场景，其中多人（大约 150 人）都试图同时访问我们的应用程序。

请帮帮我。如果需要更多详细信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:14:08.490

正如弹簧文档在[第 3.6.1.5 节中所说](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-lifecycle-processor)

> 启动和关闭调用的顺序可能很重要。如果任何两个对象之间存在“依赖”关系，则依赖方将在其依赖之后开始，并在其依赖之前停止。但是，有时直接依赖关系是未知的。您可能只知道某种类型的对象应该先于另一种类型的对象开始。在这些情况下，SmartLifecycle 接口定义了另一个选项，即在其超级接口 Phased 上定义的 getPhase() 方法。

[所以你需要 bean 来实现 SmartLifeCycle，SmartLifeCycle 接口1](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-lifecycle-processor)的 Javadoc ：[http](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-lifecycle-processor) : //static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory- [生命周期处理器](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-lifecycle-processor)。

希望这可以帮助 ！！

# java - 如何使用 apache 文件上传器在 google app engine java 中获取文件大小

> ID：14659667
> 
> 赞同：2
> 
> 时间：2013-02-02T07:23:29.040
> 
> 标签：java, google-app-engine, jakarta-ee, servlets, google-cloud-storage

我正在使用下面显示的代码将一个多部分文件上传到 Google 应用引擎。在 apache commons 文件上传器的帮助下，我成功地将文件上传到 Google 应用引擎。我想验证文件大小是否为 0 字节。为此，我验证了 Google 应用引擎和 apache 公共文件上传器以检查文件大小，但我失败了。我们有什么方法可以找到文件大小。请给我一个想法。

**我的小服务程序**

```
ServletFileUpload upload = new ServletFileUpload();
FileItemIterator iter;
iter = upload.getItemIterator(request);
while (iter.hasNext()) {
item = iter.next();
String fileName =  item.getName();
String fieldName = item.getFieldName();
if (item.isFormField()) {
String fieldValue = Streams.asString(item.openStream());
}
InputStream is1 = item.openStream();
try {
FileService fileService = FileServiceFactory.getFileService();
AppEngineFile file = fileService.createNewBlobFile(mime, fileName);
boolean lock = true;
 FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);
 byte[] b1 = new byte[BUFFER_SIZE];
int readBytes1;
while ((readBytes1 = is1.read(b1)) != -1) {
 writeChannel.write(ByteBuffer.wrap(b1, 0, readBytes1));
}
writeChannel.closeFinally(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:50:54.373

您需要将整个`is1`输入流读入字节缓冲区并查看它的长度。您可以使用此代码段：

```
public static byte[] getBytes(InputStream is) throws IOException {
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();

    int len;
    byte[] data = new byte[10000];
    while ((len = is.read(data, 0, data.length)) != -1) {
        buffer.write(data, 0, len);
    }

    buffer.flush();
    return buffer.toByteArray();
} 
```

# c++ - 在 Clang/LLVM 中内联函数指针数组

> ID：14659674
> 
> 赞同：2
> 
> 时间：2013-02-02T07:23:50.667
> 
> 标签：c++, llvm, clang

我有一个专有的 MCU，它执行周期性任务，并希望用其他事情来填补它的“停机时间”。通常，这是通过大型 switch 语句完成的，这没关系，但我想知道是否有更优雅的方式。这是这个特定设备的代码中非常常见的模式，所以有一个通用的方法会很好。

所以我写了下面的代码，它可以工作，但它目前没有内联函数。

```
 static InterlacedFunction searchFunctions[4] = {...};

    typedef int (* const InterlacedFunction)(int);

    template<const int numberOfWovenFunctions> int SendPacketWithWovenFunctions(
            int * packet,
            const int packetLength,
            InterlacedFunction (&functions)[numberOfWovenFunctions],
            int firstArgument = 0)
    {
            int returnFromLastWoven = (numberOfWovenFunctions != 0) ? (functions[0])(firstArgument) : 0;

            SendData(packet[0]);

            for(int i = 1; i < packetLength; i++)
            {
                    if(i < numberOfWovenFunctions)
                            returnFromLastWoven = (functions[i])(returnFromLastWoven);
                    SendData(packet[i]);
            }
            return returnFromLastWoven;
    } 
```

我是否遗漏了什么，Clang 是不可能内联这些函数还是 Clang 还没有优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:03:48.167

一般来说，编译器不会积极地通过函数指针进行内联调用，即使它们在编译时是已知的。

在这种情况下，您依赖于足够聪明的编译器将循环展开为 numberOfWovenFunctions 迭代块，或者为您生成内联函数的切换，这两种情况都不太可能。

如果你想让这个成语更通用，你可以使用递归模板来实现（如果你没有 c++11 可变参数模板，写起来会很痛苦），尽管它是否真的构成简化可能是有问题的。

即，您在编织函数指针值列表上进行模板化，并在每个级别调用编织函数，存储结果，调用 sendPacket 并使用存储的结果递归到下一个模板级别。类似（未经测试）：

```
template <InterlacedFunction ... args>
struct WovenFunc;

//Base case - send remaining packets
template <> 
struct WovenFunc<>{
    static int call(int value, int * packet, size_t count){
        for(size_t c = 0; c < count; ++c) SendData(packet[c]);
        return value;
    }
};

//Recursive case - send packets + weave functions
template <InterlacedFunction arg, InterlacedFunction ... args>
struct WovenFunc<arg, args...>{
    static int call(int initial, int * packets, size_t count){
        int r = arg(initial);
        SendData(packets[0]);
        if(count)
            return WovenFunc<args...>::call(r, packets + 1, count - 1);
    }
}; 
```

然后在发送中：

```
typedef WovenFunc<Woven1, Woven2, Woven3> WovenSend
WovenSend::call(returnFromLastWoven, packets, packetLength); 
```

显然你可以使更通用。

# c# - 在 C# 中创建一个 .wav 文件

> ID：14659684
> 
> 赞同：15
> 
> 时间：2013-02-02T07:25:25.923
> 
> 标签：c#, wav

作为学习 C# 的借口，我一直在尝试编写一个简单的项目：创建音频文件。首先，我想确保我可以编写符合 WAVE 格式的文件。我已经在网上研究过格式（例如，[here](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)），但是每当我尝试播放文件时，它都无法正确打开。这是我的代码。有什么遗漏或不正确吗？

```
uint numsamples = 44100;
ushort numchannels = 1;
ushort samplelength = 1; // in bytes
uint samplerate = 22050;

FileStream f = new FileStream("a.wav", FileMode.Create);
BinaryWriter wr = new BinaryWriter(f);

wr.Write("RIFF");
wr.Write(36 + numsamples * numchannels * samplelength);
wr.Write("WAVEfmt ");
wr.Write(16);
wr.Write((ushort)1);
wr.Write(numchannels);
wr.Write(samplerate);
wr.Write(samplerate * samplelength * numchannels);
wr.Write(samplelength * numchannels);
wr.Write((ushort)(8 * samplelength));
wr.Write("data");
wr.Write(numsamples * samplelength);

// for now, just a square wave
Waveform a = new Waveform(440, 50);

double t = 0.0;
for (int i = 0; i < numsamples; i++, t += 1.0 / samplerate)
{
    wr.Write((byte)((a.sample(t) + (samplelength == 1 ? 128 : 0)) & 0xff));
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-02T08:44:10.920

**主要问题是：**

[`BinaryWriter.Write(string)`](http://msdn.microsoft.com/en-us/library/yzxa6408.aspx)写入一个**以它的长度**为前缀的字符串，`BinaryReader`以便读回它。它不打算像您的情况一样使用。您需要直接写入字节而不是使用`BinaryWriter.Write(string)`.

**你应该做什么：**

将字符串转换为字节，然后直接写入字节。

```
byte[] data = System.Text.Encoding.ASCII.GetBytes("RIFF");
binaryWriter.Write(data); 
```

或使其成为一行：

```
binaryWriter.Write(System.Text.Encoding.ASCII.GetBytes("RIFF")); 
```

* * *

可能还有其他问题，例如您正在编写的整数可能与所需的大小不同。你应该仔细检查它们。

至于字节序，您放置的链接表明数据采用小端并`BinaryWriter`使用小端，所以这应该不是问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-07T17:37:56.917

最简单的方法，您可以简单地更改：

```
wr.Write("RIFF"); 
```

到：

```
wr.Write("RIFF".ToArray()); 
```

在二进制文件中写入字符串，它将包含字符串的长度，以便以后可以将其反序列化回字符串。在这种情况下，您只希望将四个字节写入四个字节，然后将其转换为 char 数组即可。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-02T08:31:35.717

我缺少正确的 WAV 数据，但尝试用此代码替换生成标头的代码部分（适当替换）：

```
wr.Write(Encoding.ASCII.GetBytes("RIFF"));
wr.Write(0);
wr.Write(Encoding.ASCII.GetBytes("WAVE"));
wr.Write(Encoding.ASCII.GetBytes("fmt "));
wr.Write(18 + (int)(numsamples * samplelength));
wr.Write((short)1); // Encoding
wr.Write((short)numchannels); // Channels
wr.Write((int)(samplerate)); // Sample rate
wr.Write((int)(samplerate * samplelength * numchannels)); // Average bytes per second
wr.Write((short)(samplelength * numchannels)); // block align
wr.Write((short)(8 * samplelength)); // bits per sample
wr.Write((short)(numsamples * samplelength)); // Extra size
wr.Write("data"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-15T17:09:09.007

@Alvin-wong 的回答非常完美。只是想添加另一个建议，尽管还有几行是：

```
binaryWriter.Write('R');
binaryWriter.Write('I');
binaryWriter.Write('F');
binaryWriter.Write('F'); 
```

# python - Python 中的 GetSetDescriptorType 是什么？

> ID：14659701
> 
> 赞同：3
> 
> 时间：2013-02-02T07:27:29.333
> 
> 标签：python

我正在查看 types.py 以了解内置类型，并且遇到了这个 GetSetDescriptorType。从[Python 文档](http://docs.python.org/3.1/library/types.html)：

> types.GetSetDescriptorType
> 
> > 使用 PyGetSetDef 在扩展模块中定义的对象类型，例如 FrameType.f_locals 或 array.array.typecode。该类型用作对象属性的描述符；它与属性类型具有相同的目的，但用于扩展模块中定义的类

我确实了解财产类型，但无法解决这个问题。了解这一点的人可以提出一些启示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T09:30:24.270

当您使用 C 编写 Python 模块时，您使用 C API 定义新类型。这个 API 有很多函数和结构来指定新类型的所有行为。

使用 C API 指定类型属性的一种方法是定义`PyGetSetDef`结构数组：

```
static PyGetSetDef my_props[] = { /*... */ } 
```

然后在类型的初始化中使用数组（详见[这个例子](http://docs.python.org/2/extending/newtypes.html)）。

然后，在 Python 中，当您使用时，`MyType.my_property`您有一个值`types.GetSetDescriptorType`，用于在您编写时解析属性的实际值`my_obj.my_property`。

因此，这种类型是一个实现细节，不太可能非常有用。

# android - 对话框中的 Android Maps API v2

> ID：14659705
> 
> 赞同：5
> 
> 时间：2013-02-02T07:27:55.497
> 
> 标签：android, android-fragments, android-maps-v2, android-nested-fragment

我正在尝试在对话框中显示 GMap，可以吗？

我的布局为

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
style="@style/LoginFormContainer"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:padding="0dp" >

<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    class="com.google.android.gms.maps.MapFragment"
    android:gravity="center" />

</RelativeLayout> 
```

并将此 XML 膨胀到一个对话框中，如下所示...

```
 LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.dialog_location, null);

    AlertDialog.Builder builder = new AlertDialog.Builder(context).setView(layout);
    AlertDialog alertDialog = builder.create();
    alertDialog.show(); 
```

但是，在通货膨胀期间，我得到了运行时错误......

```
02-02 12:52:56.045: W/dalvikvm(23044): threadid=1: thread exiting with uncaught exception (group=0x40f862a0)
02-02 12:52:56.050: E/AndroidRuntime(23044): FATAL EXCEPTION: main
02-02 12:52:56.050: E/AndroidRuntime(23044): android.view.InflateException: Binary XML file line #8: Error inflating class fragment
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at com.amithgc.taskflow.handler.activationMethods.dialog.ActivationLocationDialog.show(ActivationLocationDialog.java:31)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at com.amithgc.taskflow.handler.activationMethods.ActivationMethodLocation.showLinkingPopup(ActivationMethodLocation.java:37)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at com.amithgc.taskflow.profile.ActivationMethodItemView$1.onClick(ActivationMethodItemView.java:62)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.view.View.performClick(View.java:4223)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.view.View$PerformClick.run(View.java:17275)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.os.Handler.handleCallback(Handler.java:615)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.os.Looper.loop(Looper.java:137)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at java.lang.reflect.Method.invokeNative(Native Method)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at java.lang.reflect.Method.invoke(Method.java:511)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at dalvik.system.NativeStart.main(Native Method)
02-02 12:52:56.050: E/AndroidRuntime(23044): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.MapFragment: make sure class name exists, is public, and has an empty constructor that is public
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.app.Fragment.instantiate(Fragment.java:584)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.app.Fragment.instantiate(Fragment.java:552)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.app.Activity.onCreateView(Activity.java:4834)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
02-02 12:52:56.050: E/AndroidRuntime(23044):    ... 18 more
02-02 12:52:56.050: E/AndroidRuntime(23044): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.MapFragment
02-02 12:52:56.050: E/AndroidRuntime(23044):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
02-02 12:52:56.050: E/AndroidRuntime(23044):    at android.app.Fragment.instantiate(Fragment.java:574)
02-02 12:52:56.050: E/AndroidRuntime(23044):    ... 21 more 
```

谁能帮我解决这个问题？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:24:04.937

[当布局包含片段http://developer.android.com/about/versions/android-4.2.html#NestedFragments](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)时，您不能将布局膨胀到片段中

MapFragment 应该在代码中动态添加，例如：

```
MapFragment fragment = new MapFragment();
FragmentTransaction transaction = getChildFragmentManager().beginTransaction();
transaction.add(R.id.mapView, fragment).commit(); 
```

并在 xml 布局中：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 style="@style/LoginFormContainer"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:padding="0dp" >

<FrameLayout
    android:id="@+id/mapView"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</FrameLayout>

</RelativeLayout> 
```

# ms-access - 从具有相关表的表中删除记录

> ID：14659708
> 
> 赞同：0
> 
> 时间：2013-02-02T07:28:55.027
> 
> 标签：ms-access

我在 MS Access 中工作，我收到“无法从指定的表中删除”错误。

我的桌子是：

```
Orders 
OrderDetails 
Products 
OrderView 
```

OrderView 是一个查询表，数据分别来自 OrderDetails 和 Products 表。

我正在尝试从 OrderDetails 中删除 productId 与 gridview 中我的 productId 匹配的记录。

我的sql语句是：

```
DELETE * FROM OrderDetails WHERE productId=@productId 
```

我从网格视图中获取@productId

这是我的网格视图标记：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
DataSourceID="row3" BackColor="White" BorderColor="#CCCCCC" 
BorderStyle="None" BorderWidth="1px" CellPadding="4" ForeColor="Black" 
GridLines="Horizontal"
DataKeyNames="oProductId"

width="100%"
>
<Columns>
    <asp:BoundField DataField="oProductId" HeaderText="Product Id" 
        SortExpression="oProductId" />
    <asp:BoundField DataField="pProductName" HeaderText="Product Name" 
        SortExpression="pProductName" />
    <asp:BoundField DataField="oQty" HeaderText="Quantity" 
        SortExpression="oQty" />
    <asp:BoundField DataField="oPrice" HeaderText="Price" SortExpression="oPrice" 
        DataFormatString="{0:c}" />
    <asp:BoundField DataField="oAmt" HeaderText="Amount" 
        SortExpression="oAmt" ReadOnly="True" DataFormatString="{0:c}" />
        <asp:TemplateField HeaderText="Action">
        <ItemTemplate>

          <asp:LinkButton ID="btnDelete" Text="Delete" runat="server" CommandName="Delete" />
          </ItemTemplate>
        </asp:TemplateField>

</Columns>
<FooterStyle BackColor="#CCCC99" ForeColor="Black" />
<HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
<PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Right" />
<SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" />
<SortedAscendingCellStyle BackColor="#F7F7F7" />
<SortedAscendingHeaderStyle BackColor="#4B4B4B" />
<SortedDescendingCellStyle BackColor="#E5E5E5" />
<SortedDescendingHeaderStyle BackColor="#242121" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:08:09.357

该表中有多少条记录？您要删除多少条记录？

当我尝试从包含 100 万多条记录的表中删除 30,000 多条记录时遇到溢出错误。这似乎是访问限制。Access 无法处理足够的内存来保存内存中的所有记录并进行搜索和删除，同时保留已删除的数据以便在发生错误时回滚。这是我最好的猜测。我使用 2 种策略解决了这个问题： 1) 不要将任何记录插入到大表中，除非绝对确定我现在需要插入它们。使用临时表或全局 var 数组来临时存储值。2）小块删除。EG DELETE ... WHERE ID BETWEEN 20000 AND 25000。确保您在 WHERE 子句中命名的列是索引列。我在循环中包含这样的语句，增加 BETWEEN 短语中的 2 个 val。

# css - 动态图像上的 Css 定位错误

> ID：14659710
> 
> 赞同：0
> 
> 时间：2013-02-02T07:29:44.977
> 
> 标签：css, position

我正在显示来自数据库的动态图像，其中很少有颜色、名称和大小等细节，并在悬停效果上显示边框。

1.  每当我将鼠标悬停在图像上时，其他图像都会向右或向左移动。我希望它们留在原地。
2.  几张照片之间有多余的左侧或右侧空间。

我尝试了很多来解决这些问题，但没有 vain.Plz 的帮助。

php函数中的html代码

```
<table id='o4_img_w<?php echo $picid  ?>' style="margin-right:10px;margin-bottom: 60px; float: left">
  <tr>
    <td>
      <span style="position: relative;top: -100px" ><?php  echo "$pro_col";   ?></span>
      <span><img  src='images/sales/<?php echo $picname  ?>' style='width: 150px'></span>
      <span style="position: relative;top: 15px;left: -100px" ><?php  echo "$pro_name";   ?></span>
    </td>
  </tr>
</table> 
```

用于悬停效果的php函数中的Javascript：

```
<script type="text/javascript">

    $(document).ready(function () {

         $("#o4_img_w<?php echo $picid;    ?>").hover(function () {
           $(this).css({
             'border':'solid black 1px',
             'paddingBottom':'30px'
           });

    }, function () {

        $(this).css({
          'border':'none'
        });

    });});

</script 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:47:47.120

```
<table id='o4_img_w<?=$picid?>' style="border: solid transparent 1px; margin-right:10px;margin-bottom: 60px; float: left">    
<!-- your table stuff -->

<script type="text/javascript">
    $(document).ready(function () {
         $("#o4_img_w<?=$picid?>").hover(function () {
           $(this).css({
             'border-color':'black',
             'paddingBottom':'30px'
           });

    }, function () {
        $(this).css({
          'border-color': 'transparent'
        });
    });});

</script> 
```

使用`transparent`或`rgba (0,0,0,0)`边框颜色隐藏边框。

# ios - 有什么方法或代码可以使http请求更快吗？

> ID：14659712
> 
> 赞同：-2
> 
> 时间：2013-02-02T07:30:05.177
> 
> 标签：ios, performance, http

现在我想制作应用程序来显示来自服务器的图片。但是发现让图片出来的速度太慢了。有什么方法或代码可以使http请求更快吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T08:24:12.120

从不同的角度解决问题。将其视为熵/经济事物。

您所描述的问题中有两个遥远的点，他们想在它们之间传输数据。可以说，在理想条件下实现这将花费 100 个单位。再次假设不可能进一步降低此成本。这个成本是转移所需能量最小的地方

现在假设传输率不受我们控制。以下是一些理论上的“看似”改进，实际上只是不同的权衡集。

1.  前向缓存/缓存：尽可能预加载/下载所有图像，以便在用户请求时准备好。首次安装时安装所有静态文件。

    权衡：您将 100 分中的大部分都花在了磁盘空间和预处理能力上，这可能会使您的应用程序运行速度总是慢一些，但是一旦将它们加载到磁盘上，性能就会很好。随着您想要的图像频繁更改，效果会降低

2.  压缩/映射：如果您的瓶颈在于传输速率，请尽可能多地压缩/映射图像，以便以低成本传输它们，但是当它们到达应用程序时，您将使用大量处理器能力。

    权衡：CPU 功率的使用比以前更多，但在传输过程中它们会快速移动。压缩的一方使用更多的内存，而解压缩的一方也使用更多的内存和 CPU。仅当您的图像移动缓慢时才好，因为它们很大，那么您将看到这种权衡的好处。如果您想尝试这个安装 7z 并检查高级压缩设置并尝试非常大的地图。

3.  绘图算法：如果您的图像是绘图而不是位图/真实图片。仅发送矢量图形格式，将您的所有图片（技术上的光栅图像）更改为矢量图像。将大大减少将图像传输到应用程序的字节数，但最终需要更多的处理器能力。

    权衡取舍：除此之外，并非所有图片都可以转换为矢量图形。您将使用更多的 CPU 和内存，但是已经内置了非常优化的优秀库。您也可以将其视为“数学压缩”，其中一条无限线不能存储在宇宙中的任何计算机中，一个简单的单线数学表达式（例如 x = y + 1）将使其发生。

4.  编写自己的服务器：如果您确定瓶颈在于与服务提供商的通信时间（在这种情况下，可能是非常高效的 http 服务器）。编写您自己的服务器，它会非常快速地回答您并开始发送文件。这种改进的可能性很低，甚至无法谈论权衡。

5.  永远不要被迫发送重复信息：以这种方式设计和标记您的信息和图片。您将只发送非重复块，接收方将存储接收到的任何块以进一步改进其信息缓存。

    权衡：1,2 和 3 的组合你这只是另一种令人不安的 100 点成本。你明白了。

6.  [BitTorrent](http://en.wikipedia.org/wiki/BitTorrent)理念：如果瓶颈是您的服务器带宽，那么有一个简单的公式可以查看使用您的用户带宽是否合乎逻辑并产生积极影响。同样，它可能仅在您的数据集非常大时才有效。

    权衡：这是一个讨论权衡的有趣选项。您将使用您的用户带宽和邻近度来弥补您的服务器带宽不足。与传统的数据获取方式相比，它需要更多的 CPU（维护更多的 TCP 连接）

作为结束语：不可能有一个函数调用可以提高传输信息的成本，并使传输信息的成本从 100 点提高到 95 点。在目前的技术水平上，我们似乎真的很接近有效地转移。我的意思是压缩、映射和其他各种技术都非常成熟，包括网络传输方法，但总有改进的余地。例如，目前我们认为以光速发送数据是绝对最大值，因为它们是电信号，但[量子纠缠](http://en.wikipedia.org/wiki/Quantum_entanglement)观察技术否认了这一限制，理论上两个纠缠粒子在宇宙中以无限速度发送和接收[信息（??）。](http://en.wikipedia.org/wiki/Quantum_information_science)此外，如果你能开发出一种更好、更有效的压缩方式，那将是很棒的。

无论如何，正如您提出的一个问题，该问题没有提供太多我们可以讨论的信息。我强烈建议像工程师一样思考，创建一个测试环境，指出主要原因并用你所拥有的一切来攻击它。如果你能用更好的数学表达式来定义问题或指出瓶颈，我们就能比一般[信息论](http://en.wikipedia.org/wiki/Information_theory)更好地回答它。

还有最后一点。我并不是说信息传输不会变得更有效率，它明天可能会上升 1000%，我只是说这个领域已经非常成熟，可以在不从事数学和理论多年的情况下获得任何巨大的改进。像任何其他研究领域一样。

# android - 如何从 GPS 提供商而不是网络提供商访问位置？

> ID：14659714
> 
> 赞同：1
> 
> 时间：2013-02-02T07:30:36.640
> 
> 标签：android, gps, location, location-provider

我正在尝试从最好的提供商那里获得位置。我已启用**GPS**。另外，当我打印纬度和经度时，我是从**网络提供商那里得到的。**

**我的问题是：**

***如果启用了 GPS，那么我想通过 GPS 搜索 30 秒的位置。之后，如果我的精度低于 200 米，那么我就使用它。如果精度超过 200 米，我会再次搜索并从网络提供商处开始。***

之后，我比较了两者的准确性并获取了更准确的提供者的数据。

**这是我的代码：**

LocationUtil.java

```
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationManager;

public class LocationUtil
{
    Activity activity;
    Location location;

    public LocationUtil(Activity activity)
    {
        this.activity = activity;
    }

    public int getLogitudeE6()
    {
        LocationManager lm = (LocationManager) activity
                .getSystemService(Context.LOCATION_SERVICE);
        Location location = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        int lg = (int) (((double) location.getLongitude()) * 1E6);
        System.out.println("Longitude :: " + lg);
        return lg;
    }

    public int getLatitudeE6()
    {
        LocationManager lm = (LocationManager) activity
                .getSystemService(Context.LOCATION_SERVICE);

        Location location = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        int lt = (int) (((double) location.getLatitude()) * 1E6);
        System.out.println("Latitude :: " + lt);
        return lt;
    }

    public double getLogitude(Location location)
    {
        if (location == null)
        {
            LocationManager lm = (LocationManager) activity
                    .getSystemService(Context.LOCATION_SERVICE);

            location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if (location == null)
            {
                location = lm
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            }
            this.location = location;
        }

        return location.getLongitude();
    }

    public double getLatitude(Location location)
    {
        if (location == null)
        {
            LocationManager lm = (LocationManager) activity
                    .getSystemService(Context.LOCATION_SERVICE);
            location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if (location == null)
            {
                location = lm
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            }
            this.location = location;
        }
        return location.getLatitude();
    }

    public double getAccuracy(Location location)
    {
        if (location == null)
        {
            LocationManager lm = (LocationManager) activity
                    .getSystemService(Context.LOCATION_SERVICE);
            location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if (location == null)
            {
                location = lm
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            }
            this.location = location;
        }
        return location.getAccuracy();
    }
    public double getLogitude()
    {
        if (location == null)
        {
            LocationManager lm = (LocationManager) activity
                    .getSystemService(Context.LOCATION_SERVICE);
            Location location = lm
                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
            this.location = location;
        }

        return location.getLongitude();
    }

    public double getLatitude()
    {
        if (location == null)
        {
            LocationManager lm = (LocationManager) activity
                    .getSystemService(Context.LOCATION_SERVICE);
            Location location = lm
                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
            this.location = location;
        }
        return location.getLatitude();
    }
} 
```

CaptureMain.java

```
import java.util.Timer;

import android.app.Activity;
import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class CaptureMain extends Activity implements LocationListener {
    /** Called when the activity is first created. */
    TextView txtNewLocation;
    String strLatBack, strLongBack, strLatitude, strLongitude,strAccuracy;
    LocationUtil locationUtil;
    Location location;
    LocationManager lm;
    String bestProvider;
    Timer timer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        txtNewLocation = (TextView) findViewById(R.id.txtLocation);
        locationUtil = new LocationUtil(this);
        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        try {
            Criteria criteria = new Criteria();
            criteria.setAccuracy(Criteria.ACCURACY_FINE);
            bestProvider = lm.getBestProvider(criteria, false);

            Log.i("Log", "Best provider is :  "+bestProvider);
            strLatitude = String.valueOf(locationUtil.getLatitude(location));
            strLongitude = String.valueOf(locationUtil.getLogitude(location));
            strAccuracy = String.valueOf(locationUtil.getAccuracy(location));
            txtNewLocation.setText("Latitude :" + strLatitude + ", Longitude :"
                    + strLongitude + " , Accuracy "+ strAccuracy);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onLocationChanged(Location location) {
        System.out.println("On Location change called:: ");

        if (location != null) {
            this.location = location;
        }
        strLatitude = String.valueOf(locationUtil.getLatitude(location));
        strLongitude = String.valueOf(locationUtil.getLogitude(location));
        strAccuracy = String.valueOf(locationUtil.getAccuracy(location));
        if (strLatitude.equals("") || strLongitude.equals("")) {
            txtNewLocation.setText("Locating current position..");
        } else {
            txtNewLocation.setText("Latitude :" + strLatitude + ", Longitude :"
                    + strLongitude + " , Accuracy "+ strAccuracy);
        }

    }

    @Override
    protected void onStart() {
        super.onStart();
        startListening();
    }

    @Override
    protected void onResume() {
        super.onResume();
        startListening();
    }

    @Override
    protected void onPause() {
        super.onPause();
        stopListening();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        stopListening();
        finish();
    }

    private void stopListening() {
        if (lm != null)
            lm.removeUpdates(this);
    }

    private void startListening() {
        lm.requestLocationUpdates(bestProvider, 0, 0, this);
    }

    @Override
    public void onProviderDisabled(String provider) {

    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

} 
```

在清单中添加了权限：

```
 <uses-permission android:name="android.permission.INTERNET" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:03:49.587

我没有详细研究过你的算法，但是200m对于GPS来说并不是一个很好的阈值。水平精度应低于 50 m。

只有 GPS 具有属性航向和高度（我不是 100% 确定）和速度。检查有效的高度和路线。路线（和速度）仅在设备移动时有效。

但是你能不能简单地查询位置提供者的类型？（全球定位系统）

# c++ - 如何为复杂算法编写 ut

> ID：14659715
> 
> 赞同：0
> 
> 时间：2013-02-02T07:31:11.650
> 
> 标签：c++, googletest

我想为一个复杂的算法编写 ut，它由许多步骤组成。例如，如下所示的算法类。我想测试每一步。但很明显我可以处理私有函数。我正在使用谷歌 gtest。

我应该如何设计 UT？

```
Class Algorithm
{private:
    PreProcess();
    Process();
    PostProcess();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:10:54.587

[Google 测试文档](https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#testing-private-code)中有专门的部分处理测试私有代码。

简短的版本是，尽量避免测试非公共功能。如果必须，那么您可以更改您的课程设计，或者您的测试可以成为课程的朋友。

GTest 为最后一个选项提供了一个辅助宏：`FRIEND_TEST`，但要注意命名空间问题。您的测试需要在与被测试的类相同的命名空间中定义，才能使该宏起作用。

所以像：

```
#include <iostream>
#include "gtest/gtest.h"

class Algorithm {
 private:
  bool PreProcess() { std::cout << "Pre\n"; return true; }
  bool Process() { std::cout << "Process\n"; return true; }
  bool PostProcess() { std::cout << "Post\n"; return true; }
  FRIEND_TEST(AlgorithmPrivateTest, PreProcess);
  FRIEND_TEST(AlgorithmPrivateTest, Process);
  FRIEND_TEST(AlgorithmPrivateTest, PostProcess);
};

class AlgorithmPrivateTest : public testing::Test {
 protected:
  AlgorithmPrivateTest() : algorithm_() {}
  Algorithm algorithm_;
};

TEST_F(AlgorithmPrivateTest, PreProcess) {
  EXPECT_TRUE(algorithm_.PreProcess());
}

TEST_F(AlgorithmPrivateTest, Process) {
  EXPECT_TRUE(algorithm_.Process());
}

TEST_F(AlgorithmPrivateTest, PostProcess) {
  EXPECT_TRUE(algorithm_.PostProcess());
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
} 
```

# java - 数组列表与向量

> ID：14659717
> 
> 赞同：1
> 
> 时间：2013-02-02T07:31:16.580
> 
> 标签：java, vector, arraylist

> **可能重复：**
> [ArrayList 和 Vector 有什么区别？](https://stackoverflow.com/questions/2986296/what-are-the-differences-between-arraylist-and-vector)

在我最近的程序中，我经常使用 Vectors。但是，我在某处读到 Vectors 有点旧。这是否意味着它将过时或逐步退出 Java 是值得商榷的。所以建议应该使用 ArrayLists。我注意到 ArrayLists 没有方法 remove(int index, Object object) 而向量有。我问的原因是假设我添加了一个字符串，比如“String 1”。我尝试再次添加相同的字符串。如何删除第一个字符串而不计算它在数组列表中的出现次数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T07:55:47.950

**但是，我在某处读到 Vectors**有点旧：是的，vector 类被认为是遗留的，并且仍在库中以支持旧应用程序。它被替换为`Collections.synchronizedList(list)`。

**我注意到 ArrayLists 没有方法 remove**：您可以根据 Index 删除数据。如果你想删除对象使用`boolean java.util.ArrayList.remove(Object o)`：不要忘记覆盖equals和hashcode方法:)

**如何删除第一个字符串而不计算它在数组列表中出现的次数**：最好的方法是使用 set. 如果线程安全是一个问题，请使用`<Object> Set<Object> java.util.Collections.synchronizedSet(Set<Object> s)`

希望您的所有问题都得到澄清。问候， 普尼斯

# c# - Page 类的属性（实例）如何在没有对象的情况下访问

> ID：14659718
> 
> 赞同：2
> 
> 时间：2013-02-02T07:31:25.857
> 
> 标签：c#, asp.net, .net, asp.net-mvc

这可能是一个愚蠢的问题，但我有一个困惑。
每个`.aspx`页面都继承 `System.Web.UI.Page`，并且[Page](http://msdn.microsoft.com/en-us/library/system.web.ui.page.aspx)类具有一些属性，`IsPostBack`例如`IsValid`，、、`IsCrossPagePostBack`等等……来访问我们编写的这些属性`Page.IsPostBack`或`IsPostBack`。
现在，问题是，这些属性`static`是否存在，如果不是，那么如何在`.apsx`文件中访问这些属性，我尝试使用 a 进行测试`class`但未成功。

```
 public class clsDemo:System.Web.UI.Page
    {
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:53:02.750

页面类派生自`TemplateControl`类；

```
public class Page : TemplateControl, IHttpHandler 
```

类`TemplateControl`派生自抽象`Control`类；

```
public abstract class TemplateControl : Control, ... 
```

在`Control`类`Page`派生的类中，有一个名为 Page 的虚拟属性；

```
 // Summary:
    //     Gets a reference to the System.Web.UI.Page instance that contains the server
    //     control.
    //
    public virtual Page Page { get; set; } 
```

在`Page`类中有诸如`IsPostBack`等属性`IsValid`；

```
 // Summary:
    //     Gets a value that indicates whether the page is being rendered for the first
    //     time or is being loaded in response to a postback.
    //        
    public bool IsPostBack { get; } 
```

因此，

由于aspx页面是从`Page`类派生的，所以它也继承`TemplateControl`和`Control`类。在`Control`类中有一个名为 as 的公共属性，`Page`因此您可以访问`Page`类中的属性。并且`Page`类具有诸如等之类的公共属性`IsPostback`，`IsValid`因此您可以从属性中使用这些属性`Page`。

```
public class Test : Page
{
    public Test()
    {
        bool test = this.IsCallback;
    }
} 
```

# android - JSON解析并在textview中显示url

> ID：14659725
> 
> 赞同：1
> 
> 时间：2013-02-02T07:33:05.063
> 
> 标签：android, json

我需要在列表视图中解析和显示 url 内容。我已经使用延迟加载解析了标题、日期、内容、名称和图像，但现在我需要解析 url 并在列表视图中显示其内容。但这里的问题不是显示 url，而是显示图像 url。它像这样显示[http://imageshack.us/photo/my-images/18/device20130202121840.png/](http://imageshack.us/photo/my-images/18/device20130202121840.png/)以下是我的 json 响应（这里只包含几个响应）和解析代码

```
"posts": [
    {
        "id": 2954,
        "type": "ad_listing",
        "slug": "commander-retreat-for-sale",
        "url": "http://avoidserum/ads/commander-retreat-for-sale/",
        "status": "publish",
        "title": "Commander Retreat for sale",
        "title_plain": "Commander Retreat for sale",
        "content": "<p>Commander Retreat : Hebbal Lake<br />\n2 BHK<br />\nBuilt up: 1180sft<br />\n3rd floor<br />\nTotal G+3 floors<br />\nWest facing<br />\nFurnished<br />\nSale price Rs. 50lacs ( nego)<br />\nFor further details please call M/s. Farid Consultants @ 9844106901 /9880123548<br />\nEmail: manjula@faridconsultants.com</p>\n",
        "excerpt": "Commander Retreat : Hebbal Lake 2 BHK Built up: 1180sft 3rd floor Total G+3 floors West facing Furnished Sale price Rs. 50lacs ( nego) For further details please call M/s. Farid Consultants @ 9844106901 /9880123548 Email: manjula@faridconsultants.com",
        "date": "2013-02-01 05:09:58",
        "modified": "2013-02-01 05:09:58",
        "categories": [],
        "tags": [],
        "author": {
            "id": 344,
            "slug": "ruby",
            "name": "Ruby",
            "first_name": "",
            "last_name": "",
            "nickname": "Ruby",
            "url": "",
            "description": ""
        },
        "comments": [],
        "attachments": [
            {
                "id": 2955,
                "url": "http://imageurl/wp-content/uploads/2013/01/785862.jpg",
                "slug": "commander-retreat-for-sale",
                "title": "Commander Retreat for sale",
                "description": "",
                "caption": "",
                "parent": 2954,
                "mime_type": "image/jpeg",

    },
   ..................... 
```

解析代码

```
 static final String KEY_POSTS = "posts";
 static final String KEY_ID = "id";
 static final String KEY_SITEURL = "url";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";

final  ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
                final JSONParser jParser = new JSONParser();

                // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                     posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String siteurl = c.getString(KEY_SITEURL);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url1 = null;
                    String slug1 = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug1 = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url1 = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_SITEURL, siteurl);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug1);
            map.put(KEY_URL, url1);

            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();

                    }

         final ListView  list=(ListView)findViewById(android.R.id.list);

         // Getting adapter by passing json data ArrayList
            adapter=new LazyAdapter(this, songsList);    
             list.setAdapter(adapter); 
```

LazyAdapter.java

```
public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_item, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    TextView siteurl = (TextView)vi.findViewById(R.id.siteurl);
    TextView date = (TextView)vi.findViewById(R.id.date); // artist name
    TextView content = (TextView)vi.findViewById(R.id.content);  // duration
    TextView name = (TextView)vi.findViewById(R.id.name); 
    // duration
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    ListView list;
    // Setting all values in listview
   title.setText(song.get(MainActivity.KEY_TITLE));
   siteurl.setText(song.get(MainActivity.KEY_SITEURL));
    date.setText(song.get(MainActivity.KEY_DATE));
    content.setText(song.get(MainActivity.KEY_CONTENT));
    name.setText(song.get(MainActivity.KEY_NAME));

   imageLoader.DisplayImage(song.get(MainActivity.KEY_URL), thumb_image);
    return vi;
} 
```

}

ImageLoader.java

```
 public class ImageLoader {
    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new     WeakHashMap<ImageView, String>());
    ExecutorService executorService; 

    public ImageLoader(Context context){
        fileCache=new FileCache(context);
        executorService=Executors.newFixedThreadPool(5);
    }

    final int stub_id = R.drawable.dollardesi;
    public void DisplayImage(String url, ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        System.out.println("Image bitmap object from url*********$$$$$$$$"+bitmap);

        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
          System.out.println("In the else where there is null bitmap>>>>>>>>>");
            queuePhoto(url, imageView);
            imageView.setImageResource(stub_id);
        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url)
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u;
            imageView=i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad){
            this.photoToLoad=photoToLoad;
        }

        @Override
        public void run() {
            if(imageViewReused(photoToLoad))
                return;
            Bitmap bmp=getBitmap(photoToLoad.url);
            memoryCache.put(photoToLoad.url, bmp);
            if(imageViewReused(photoToLoad))
                return;
            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
            Activity a=(Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad){
        String tag=imageViews.get(photoToLoad.imageView);
        if(tag==null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;
            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
            else
                photoToLoad.imageView.setImageResource(stub_id);
        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:02:26.480

你遇到了问题，因为两个键都是相同的，`KEY_SITEURL`所以只需更改任何一个键即可使其工作：`KEY_URL``HashMap`

```
static final String KEY_URL_FOR_MAP = "url_site";   //use this for adding 
                                               //and retrivng value from Hashmap
static final String KEY_URL = "url";   // use this for getting url JsonObject
static final String KEY_SITEURL = "url"; 
```

现在`KEY_URL_FOR_MAP`用于添加 url`Hashmap`和检索 url 表单`HashMap`

# python - 如何使特定 python 命令的所有输出静音？

> ID：14659731
> 
> 赞同：0
> 
> 时间：2013-02-02T07:34:17.697
> 
> 标签：python, stdout, output, maya

Autodesk Maya 2012 提供了“mayapy”——一个修改过的 python 构建，其中包含加载 Maya 文件所需的包并充当批处理工作的无头 3D 编辑器。我从 bash 脚本中调用它。如果该脚本在其中打开一个场景文件，`cmds.file(filepath, open=True)`它会喷出一页页的警告、错误和其他我不想要的信息。*我只想*在 cmds.file 命令运行时关闭所有这些。

我尝试从我发送的 Python 命令内部重定向到 shell 脚本中的 mayapy，但这不起作用。我*可以*通过在对 bash 脚本的调用中将 stdout/err 重定向到 /dev/null 来使所有内容静音。有什么方法可以在对 shell 的调用中使其静音，但仍然允许我在脚本中传入的命令打印出信息？

测试.sh：

```
#!/bin/bash

/usr/autodesk/maya/bin/mayapy -c "
cmds.file('filepath', open=True);
print 'hello'
" 
```

调用它：

```
$ ./test.sh                  # spews info, then prints 'hello'
$ ./test.sh > /dev/null 2>&1 # completely silent 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:40:11.873

基本上，我认为解决这个问题的最好方法是实现一个包装器，它将执行 test.sh 并清理到 shell 的输出。为了清理输出，我会简单地添加一些字符串来通知您的包装器该文本适合输出。我对包装文件的灵感来自于：[https ://stackoverflow.com/a/4760274/2030274](https://stackoverflow.com/a/4760274/2030274)

内容如下：

```
import subprocess

def runProcess(exe):
    p = subprocess.Popen(exe, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
    while(True):
      retcode = p.poll() #returns None while subprocess is running
      line = p.stdout.readline()
      yield line
      if(retcode is not None):
        break

for line in runProcess(['./test.sh']):
  if line.startswith('GARYFIXLER:'):
      print line, 
```

现在您可以想象 test.sh 类似于

```
#!/bin/bash

/usr/autodesk/maya/bin/mayapy -c "
cmds.file('filepath', open=True);
print 'GARYFIXLER:hello'
" 
```

这只会打印 hello 行。由于我们将 python 调用包装在子进程中，因此通常显示给 shell 的所有输出都应该被捕获，并且您应该截取不需要的行。

当然，要从 python 脚本调用 test.sh，您需要确保您拥有正确的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:57:52.740

我知道我只是被管道扭曲了。Maya 确实将*所有*批处理输出发送到 stderror。一旦您正确地管道 stderr，这将完全释放 stdout。这是一个有效的全bash单线。

```
# load file in batch; divert Maya's output to /dev/null
# then print listing of things in file with cmds.ls()
/usr/autodesk/maya/bin/mayapy -c "import maya.standalone;maya.standalone.initialize(name='python');cmds.file('mayafile.ma', open=True);print cmds.ls()" 2>/dev/null 
```

# ruby-on-rails - 使用 Koala 获取用户的 FB 页面

> ID：14659734
> 
> 赞同：1
> 
> 时间：2013-02-02T07:35:22.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, facebook, facebook-graph-api, koala

我有一个 FB 帐户，并为我的俱乐部和其他几个页面创建了一个粉丝页面。我在 Ruby on Rails 中有一个应用程序。我想在我的俱乐部粉丝页面上发布一些提要。我怎样才能做到这一点？我一直在使用 Koala Gem 并且能够成功发布到我的墙上，但不能发布到页面上。我想访问与我的帐户关联的所有粉丝页面的列表，而不是提供特定页面的名称。

这是我用来与 FB Graph API 通信的简单方法。

```
def facebook
    @facebook ||= Koala::Facebook::GraphAPI.new(oauth_token)
rescue Koala::Facebook::APIError => e
    logger.info e.to_s
    nil # or consider a custom null object
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T09:45:01.623

Sumit 提交的答案可能是一种方法，但是在搜索了更多论坛之后，我终于找到了一种优雅的方法。

```
@user_graph = Koala::Facebook::API.new(user_access_token)
pages = @user_graph.get_connections('me', 'accounts')
# get access token for first page
first_page_token = pages.first['access_token']

# or: retrieve access_token for a given page_id
page_token = @user_graph.get_page_access_token(page_id) 
```

将“accounts”参数传递给 get_connection 对我来说效果很好。这是对[API](https://github.com/arsduo/koala/wiki/Acting-as-a-Page)的参考。

最后一件事，永远不要忘记在您的权限列表中添加“manage_pages”权限。

# jquery - 如何在同一个 HTML 中同时使用 jQuery 扩展器和 OrganicTabs

> ID：14659743
> 
> 赞同：0
> 
> 时间：2013-02-02T07:36:46.537
> 
> 标签：jquery

这是我的 HTML

```
<div id="page-wrap">
  <div id="tab">
    <ul class="nav">
      <li class="nav-one"><a href="#tab1" class="current">Featured</a></li>
      <li class="nav-two"><a href="#tab2">Core</a></li>
      <li class="nav-three"><a href="#tab3">jQuery</a></li>
      <li class="nav-four last"><a href="#tab4">Classics</a></li>
    </ul>
    <div class="list-wrap">
      <div id="tab1">
        <div class="readmore">Nam tincidunt tempus justo sed aliquam. Sed rhoncus, augue at hendrerit semper, lectus leo varius ndivla, sit amet laoreet sem quam in ipsum. Aenean eget nunc a arcu ornare consequat. Mauris arcu elit, dictum sed aliquet sed, blandit vel arcu. Aliquam id ligdiva justo. Donec et magna id risus hendrerit mattis vitae sed leo. Donec molestie condimentum venenatis. In imperdiet, diam vel vehicdiva fringilla, dolor massa condimentum dolor, ac consequat dui augue sit amet ndivla. Vestibdivum ante ipsum primis in faucibus orci luctus et divtrices posuere cubilia Curae; Ndivla facilisi. Vestibdivum ante ipsum primis in faucibus orci luctus et divtrices posuere cubilia Curae; Ndivlam quis porttitor risus. Vestibdivum felis elit, accumsan non divtrices vel, posuere at mi. Integer mollis turpis vitae magna aliquet tincidunt. Donec nec diam eu odio venenatis faucibus. Donec convallis placerat mauris vitae vdivputate. </div>
      </div>
      <div id="tab2" class="hide">
        <div class="readmore">Sed interdum sem id sem ultrices eget tempus sem rhoncus. In ullamcorper elit at tellus cursus vestibulum mattis lacus vulputate. Etiam elit mi, sagittis ut feugiat vitae, suscipit eu nisl. Praesent bibendum tortor quis felis iaculis ac ullamcorper felis vehicula. Nam vitae sem ante, eu consequat nunc. Maecenas et mattis tellus. Vestibulum lacinia mauris eu nulla rutrum interdum. Fusce imperdiet leo ut tortor dapibus id mattis magna elementum. Sed vulputate tristique dapibus. Vivamus semper ullamcorper libero, ac bibendum leo vestibulum auctor. Aliquam tellus enim, bibendum at pretium vitae, porta at mauris. Aliquam erat volutpat. Morbi rutrum elementum felis, vel ullamcorper massa semper ullamcorper. Mauris ut velit lectus. </div>
      </div>
      <div id="tab3" class="hide">
        <div class="readmore">Phasellus porttitor mattis quam, eget sodales sapien cursus et. Etiam elementum volutpat nisi, sit amet hendrerit elit lobortis scelerisque. Donec tincidunt massa nec leo facilisis a sodales risus viverra. Etiam consectetur porttitor adipiscing. Nam id turpis massa. Suspendisse tincidunt, nunc non ultrices consequat, diam erat scelerisque massa, quis porta diam leo in quam. Nam varius, nunc ut luctus viverra, augue leo dapibus risus, et condimentum urna mi vel metus. Quisque pellentesque eleifend eros. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nullam ultricies vulputate neque eu consequat. Suspendisse vitae felis erat, ultrices sagittis risus. Sed vel nulla tortor. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus urna mauris, volutpat et pharetra id, faucibus eu metus. Vivamus luctus felis in lacus varius non semper turpis ullamcorper. Fusce eleifend mi ut nisl viverra venenatis. </div>
      </div>
      <div id="tab4" class="hide">
        <div class="readmore">Morbi erat magna, ultricies ac semper ac, ornare et nunc. Etiam et lorem ut eros eleifend dictum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Cras sit amet sodales dolor. Etiam ut nisl at erat vulputate ultrices. Pellentesque dictum dapibus lectus in laoreet. Vestibulum in velit a lacus varius congue a ut felis. Aliquam consectetur, felis ac porta ultrices, sem ipsum tristique metus, quis feugiat massa neque eget odio. Donec sit amet nunc magna. Vestibulum pulvinar pretium dui ut gravida. Suspendisse potenti. In pharetra rhoncus ipsum vel rhoncus. Nulla ut lacus enim. Ut sit amet enim at neque elementum sollicitudin nec a mi. Praesent ultricies, metus malesuada imperdiet rutrum, sapien est pretium urna, et convallis orci orci vitae erat. Vivamus at ligula lacus, nec consequat nibh. </div>
      </div>
    </div>
  </div>
</div> 
```

这是我的 jQuery 脚本，我尝试在同一个 div 中同时使用两个 pluings

```
$(document).ready(function() {
    $(function() {
        $("#tab").organicTabs({
            "speed": 250
        });
    });

    $(".readmore").each(function() {
        if ($(this).text().length > 200) {
            $(function() {
                $('div.readmore').expander({
                    slicePoint: 200,
                    expandSpeed: 1000,
                    collapseSpeed: 1000,
                    expandText: 'Read More',
                    userCollapseText: 'Hide Text'
                });
            });
        }
    });
}); 
```

使用整个东西，我只为第一个选项卡获得完美的输出，有时也是如此。

这是一个工作小提琴示例[http://jsfiddle.net/RWnBQ/](http://jsfiddle.net/RWnBQ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:21:43.207

您在这里不需要`doc ready`处理程序：http: [//jsfiddle.net/RWnBQ/1/](http://jsfiddle.net/RWnBQ/1/)

```
$(".readmore").each(function () {
    if ($(this).text().length > 200) {
      //--- doc ready removed from here
            $('div.readmore').expander({
                slicePoint: 200,
                expandSpeed: 1000,
                collapseSpeed: 1000,
                expandText: 'Read More',
                userCollapseText: 'Hide Text'
            });
      //--- doc ready removed from here
    }
}); 
```

# iphone - git Repository：以前的文件版本可以在 Xcode 之外访问吗

> ID：14659744
> 
> 赞同：0
> 
> 时间：2013-02-02T07:36:51.263
> 
> 标签：iphone, xcode, macos, git, git-revert

通过为我的 iPhone 应用程序设置 git 存储库，有没有办法访问 XCode 之外文件的最后提交版本？我可以在硬盘驱动器的某个地方找到以前的版本，或者以某种方式将文件拼凑在一起吗？该文件的当前版本现在已损坏（如果有兴趣，请参阅下面的故事以了解这是如何发生的），我非常想检索自上次能够在 git 之外备份文件以来所做的更改。我无法访问 XCode 中的任何内容或在 Mac 上运行通过 Max OS X 安装程序可用的任何内容之外的任何内容，因此如果可能的话，我想访问该文件的先前版本。

```
Story that pisses me off begins here: 
```

在最近 6 小时的飞行中，我在飞机上带着我的 MAC，在此期间对 git 进行了大约 2 次更改。MAC 上一切正常，直到我们不得不在飞行结束时关闭所有电子设备。当时，我告诉 MAC 关机，但它反而冻结了。为了避免发生航空公司事故，我在等待一分钟后按住电源按钮强制关闭计算机。

那天晚上晚些时候，当我打开电脑时，它不再启动，而是冻结在 Apple 标志和旋转齿轮上。我使用我的安装磁盘绕过登录并访问了磁盘工具，它继续修复我的驱动器失败。硬盘驱动器仍然挂载，所以我可以进入我的文件。我访问了我的应用程序所需的绝对必要的文件，当我在我的 Windows 机器上打开它时，它包含了垃圾。当然，大多数其他文件都很好：-/

```
Story that pisses me off ends here. 
```

所以，我仍在尝试修复我愚蠢的 MAC，但在继续并可能需要擦除驱动器之前，我正在尝试获取所有我能获取的文件，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:40:39.120

要清除当前更改并查看最新提交的版本，

```
git checkout HEAD . 
```

要清除当前更改并查看以前提交的版本，

```
git checkout HEAD^ . 
```

# vba - Word 2010 - 在文档的特定部分强制格式化

> ID：14659745
> 
> 赞同：0
> 
> 时间：2013-02-02T07:37:07.690
> 
> 标签：vba, ms-word, formatting

我正在使用 Microsoft Word 2010。我有一个文档作为我正在处理的项目的多个用户的模板。当用户键入时，我想强制格式化文档的两个部分：

1.  输入电子邮件地址 - 我希望该地址不会自动变成超链接。我希望它不会仅在文档的这一部分上变成超链接。其余部分我希望启用超链接。

2.  输入前面不带 www 的 URL（即 google.com），且首字母不自动大写。我不想关闭整个文档中句子的首字母大写。就在文档的这一部分。

这是可以做到的吗？我试着弄乱菲尔兹，但没有任何运气。我熟悉 VBA，所以如果有办法用代码做到这一点，我也愿意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T16:51:46.347

您需要的这两个功能都使用自动更正/自动套用格式在 Word 中实现。它们不受样式机制的控制，因此无法选择性地激活。

邮件地址格式可以通过样式控制，您可以防止切换到超链接样式可见。您还可以考虑一个宏，它可以根据需要在通过文档的后处理过程中选择性地更改文本的样式 - 可能在用户下次打开文档进行审查时。

# c# - 使用线程调用代码多时间？

> ID：14659748
> 
> 赞同：0
> 
> 时间：2013-02-02T07:37:39.313
> 
> 标签：c#, winforms, multithreading

请看以下代码：

```
foreach(string url in urls)
{
  //Method that will process url ProcessUrl(url)
  //Add eached proccessed url to a treelist
} 
```

ProcessUrl 方法有 HttpWebRequest 和 HttpWebResponse 所以有时它需要轻推，如果有很多链接，它会花费一些时间来挂起我的程序。

我实际上不能提出一个解决方案，因为我可能基于一些错误所以我想要的是让这段代码运行，同时我可以在我的程序中 100% 运行而不会出现任何崩溃或挂起，并且每个新处理后的链接将被插入到树列表中，没有任何延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:41:02.317

如果您想在后台执行长时间运行的操作，并在操作结果可用时将其传递回 UI，同时 UI 保持响应，那么在这里使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.100%29.aspx)很简单。

```
 void BeginExpensiveOperation()
    {
        var worker = new BackgroundWorker();
        worker.WorkerReportsProgress = true;
        worker.DoWork += ExpensiveWork;
        worker.ProgressChanged += WorkerOnProgressChanged;

        List<string> urls = new List<string> { "http://google.com" };
        worker.RunWorkerAsync(urls);
    }

    // runs in a worker thread
    void ExpensiveWork(object sender, DoWorkEventArgs e)
    {
        var worker = (BackgroundWorker)sender;
        var urls = (List<string>) e.Argument;
        foreach (var url in urls)
        {
            //TODO: do your work here synchronously
            var result = new WebClient().DownloadString(url);

            //TODO: pass the result in the userState argumetn of ReportProgress
            worker.ReportProgress(0, result); // will raise worker.ProgressChanged on the UI thread
        }
    }

    private void WorkerOnProgressChanged(object sender, ProgressChangedEventArgs progressChangedEventArgs)
    {
        //this executes on the UI thread
        var value = progressChangedEventArgs.UserState;
        //TODO: use result of computation to add it to the UI
        panel.Children.Add(new TextBlock {Text = value.ToString()});
    } 
```

在占位符中填写您的问题特定代码`//TODO:`并调用`BeginExpensiveOperation()`以异步启动操作。

# html - 最小宽度和最大宽度

> ID：14659749
> 
> 赞同：1
> 
> 时间：2013-02-02T07:37:53.120
> 
> 标签：html, css

> **可能重复：**
> [表格属性的最小宽度和最大高度](https://stackoverflow.com/questions/6426779/min-width-and-max-height-for-table-atrributes)

`<tables>`和`<td>`不理解的属性还是`min-width`按照`max-width`%的规范。如何效仿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:55:04.423

您可以使用 css3 flexbox 并添加 css min-width 和 max-width。

[https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)

# jquery - jQuery 实时颜色切换器

> ID：14659750
> 
> 赞同：0
> 
> 时间：2013-02-02T07:37:57.547
> 
> 标签：jquery, html, color-picker

> *我尝试制作 jquery 实时颜色切换器，但我需要知道是否可以添加一些插件来更改背景颜色，如* **标题** *或* **正文**

现在我使用 jQuery MiniColors 2.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:00:11.583

您可以使用简单的 javascript 来获取元素并使用更改背景颜色

```
document.getElementById('Id name here').style.background = color; 
```

或者您可以使用 jQuery 并使用：

```
$('bodyIdOrClassName').css('backgroundColor', '#FF0000'); 
```

但当然是你的颜色。

编辑：使用 style.background 比使用 .bgColor 更好。

使用您的 JsFiddle：将其添加到更改功能：

```
 change: function(hex, opacity) {

                    // ADD THIS LINE
                    $('body').css('backgroundColor', hex);
                } 
```

这是一个活生生的例子：http: [//jsfiddle.net/KNWVv/](http://jsfiddle.net/KNWVv/)

# c++ - 放置新的和未初始化的 POD 成员

> ID：14659752
> 
> 赞同：15
> 
> 时间：2013-02-02T07:38:27.213
> 
> 标签：c++, initialization, placement-new

C++ 标准是否保证未初始化的 POD 成员在放置 new 后保留其先前的值？

或者更准确地说，根据 C++11 是否总是满足以下断言？

```
#include <cstdlib>
#include <cassert>

struct Foo {
    int alpha; // NOTE: Uninitialized
    int beta = 0;
};

int main()
{
    void* p = std::malloc(sizeof (Foo));
    int i = some_random_integer();
    static_cast<Foo*>(p)->alpha = i;
    new (p) Foo;
    assert(static_cast<Foo*>(p)->alpha == i);
} 
```

C++03的答案是否相同？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-02T08:05:48.270

> C++ 标准是否保证未初始化的 POD 成员在放置 new 后保留其先前的值？
> 
> 根据 C++11，是否总是满足以下断言？

**不。**

未初始化的数据成员有一个*不确定*的值，这与说底层内存不存在完全不同。

> `[C++11: 5.3.4/15]:`创建类型对象的new*表达式*`T`按如下方式初始化该对象：
> 
> *   **如果省略*new-initializer*，则*默认初始化***对象(8.5)；如果不执行初始化，则对象具有不确定的值。
> *   否则，根据 8.5 的初始化规则解释*new-initializer以进行直接初始化。*
> 
> `[C++11: 8.5/6]:`默认初始化类型的对象`T`意味着：
> 
> *   **如果`T`是**（可能是*cv 限定的*）**类类型**（第 9 条），**则调用****的默认构造函数`T`**`T`（如果没有可访问的默认构造函数，则初始化格式错误）；
> *   如果`T`是数组类型，则每个元素都是默认初始化的；
> *   否则，不执行初始化。
> 
> `[C++11: 12.1/6]:`一个默认且未定义为已删除的默认构造函数在被*odr 使用*(3.2) 创建其类类型 (1.8) 的对象时或在其第一次声明后显式默认时被隐式定义。**隐式定义的默认构造函数执行类的一组初始化，这些初始化将由用户编写的该类的默认构造函数执行，没有*ctor-initializer* (12.6.2) 和空的*复合语句*。**
> 
> `[C++11: 12.6.2/8]:`在非委托构造函数中，**如果给定的非静态数据成员**或基类**不是由*mem-initializer-id***指定的（包括由于构造函数没有*ctor-initializer*而没有*mem-initializer-list*的情况）并且实体不是抽象类（10.4）的虚拟基类，则
> 
>  **   *如果实体是具有大括号或相等初始化器*的非静态数据成员，则实体按照 8.5 中的规定进行初始化；
> *   否则，如果实体是变体成员（9.5），则不执行初始化；
> *   **否则，实体被默认初始化**（8.5）。*

 *^(（**注意**，第一个选项`12.6.2/8`是如何`beta`处理您的会员）)

> `[C++11: 8.5/6]:`默认初始化类型的对象`T`意味着：
> 
> *   如果`T`是（可能是*cv 限定的*）类类型（第 9 条），则调用 的默认构造函数（如果没有可访问的默认构造函数`T`，则初始化格式错误）；`T`
> *   如果`T`是数组类型，则每个元素都是默认初始化的；
> *   **否则，不执行初始化。**
> 
> `[C++11: 8.5/11]:`如果没有为对象指定初始化器，则该对象是默认初始化的；**如果不执行初始化，则具有自动或动态存储持续时间的对象具有不确定的值。**

编译器可以选择在分配期间将底层内存清零（或以其他方式更改）。例如，众所周知，调试模式下的 Visual Studio 会将可识别的值`0xDEADBEEF`写入内存以帮助调试；在这种情况下，您可能会看到`0xCDCDCDCD`它们用来表示“干净的内存”（[参考](https://stackoverflow.com/a/370362/560648)）。

*在这种情况下会*吗？我不知道。我不认为我们*可以*知道。

我们*所*知道的是 C++ 并没有禁止它，我相信这让我们得出了这个答案的结论。:)

* * *

> C++03的答案是否相同？

**是**的，尽管逻辑略有不同：

> `[C++03: 5.3.4/15]:`创建类型对象的new*表达式*`T`按如下方式初始化该对象：
> 
> *   **如果省略了*new-initializer***：
>     *   **如果`T`是**（可能是*cv-qualified*）**非 POD 类类型**（或其数组），则该对象是默认初始化的（8.5）。如果`T`是 const 限定类型，则基础类类型应具有用户声明的默认构造函数。
>     *   **否则，创建的对象具有不确定的值。**如果`T`是一个 const 限定类型，或者是一个（可能是*cv 限定的*）POD 类类型（或其数组），包含（直接或间接）一个 const 限定类型的成员，则程序是非良构的；
> *   如果*new-initializer*的形式为`()`，则该项为值初始化（8.5）；
> *   如果*new-initializer*是形式`(expression-list)`并且`T`是类类型，则调用适当的构造函数，将`expression-list`其用作参数 (8.5)；
> *   如果*new-initializer*具有以下形式`(expression-list)`，并且`T`是算术、枚举、指针或指向成员的指针类型并且`expression-list`只包含一个表达式，则将对象初始化为表达式 (8.5) 的（可能转换的）值；
> *   否则*new-expression*格式不正确。

* * *

现在，这一切都是我对初始化规则的*严格*解释。

实际上，我认为您看到与放置`operator new`语法定义的潜在冲突可能是正确的：

> `[C++11: 18.6.1/3]:` **备注：**故意不执行其他动作。

下面的示例解释了放置`new`“对于在已知地址构造对象很有用”。

但是，它实际上并没有谈论在已知地址构造对象*而不混淆已经存在的值*的常见用途，但是“不执行其他操作”这一短语确实表明意图是您的“不确定值”成为以前记忆中的任何东西。

或者，它可以简单地禁止*操作员*本身采取任何行动，让分配器自由。在我*看来*，标准试图提出的重要一点是没有分配新的内存。

无论如何，访问此数据会调用未定义的行为：

> `[C++11: 4.1/1]:`非函数、非数组类型的 glvalue (3.10)`T`可以转换为纯右值。如果`T`是不完整类型，则需要进行此转换的程序格式错误。如果泛左值所引用的对象不是类型对象，`T`也不是派生自 的类型的对象`T`，或者**如果该对象未初始化，则需要此转换的程序具有未定义的行为**。如果`T`是非类类型，则纯右值的类型是 的 cv 非限定版本`T`。否则，纯右值的类型是`T`。

所以*这并不重要*：**无论如何你都不能顺从地观察原始值**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:58:43.733

C++11 12.6.2/8 “初始化基数和成员” 说：

> 在非委托构造函数中，如果给定的非静态数据成员或基类不是由 mem-initializer-id 指定的（包括由于构造函数没有 ctor-initializer 而没有 mem-initializer-list 的情况）并且实体不是抽象类（10.4）的虚拟基类，则
> 
> *   如果实体是具有大括号或等号初始化器的非静态数据成员，则实体按照 8.5 中的规定进行初始化；
> *   否则，如果实体是变体成员（9.5），则不执行初始化；
> *   **否则，实体被默认初始化**（8.5）。

an 上的默认初始化`int`什么都不做（8.5/6“初始化程序”）：

> 默认初始化 T 类型的对象意味着：
> 
> *   如果 T 是（可能是 cv 限定的）类类型（第 9 条），则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化是错误的）；
> *   如果 T 是数组类型，则每个元素都是默认初始化的；
> *   **否则，不执行初始化**。

所以该成员`alpha`应该独自一人。*

# android - 在 Eclipse 中无法检测到 Sony Xperia Miro

> ID：14659753
> 
> 赞同：0
> 
> 时间：2013-02-02T07:38:36.173
> 
> 标签：android, device-driver, device

我无法在 Sony Xperia Miro 上测试 Android 应用程序。它很容易在 HTC 设备上进行测试，但无法找到 xperia miro 的解决方案。我正在使用 Android 模拟器测试应用程序，一切正常，但未检测到 xperia 设备，该设备检测到所有其他功能，如访问 sd 卡、内部存储器、同步等，但找不到我的设备来调试应用程序。请帮帮我。

**提前致谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:53:37.330

连接您的设备并尝试重新启动您的服务器，如下所示：

```
adb kill-server
adb start-server 
```

# javascript - 在MVC 4中以zip文件下载pdf文件

> ID：14659754
> 
> 赞同：1
> 
> 时间：2013-02-02T07:38:42.687
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-4, download

我正在研究 MVC 4 项目。我想在一个 zip 文件夹中下载多个 pdf 文件。这个 pdf 文件是在模型弹出窗口中动态生成的，并通过复选框选择 pdf 文件，然后我单击按钮下载 pdf 文件。如何在 zip 文件中单击按钮下载 pdf 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:49:33.567

使用[SharpZipLib](http://www.icsharpcode.net/opensource/sharpziplib/)库压缩服务器中的文件。然后发送给客户。

[这](https://github.com/icsharpcode/SharpZipLib/wiki/Updating)可以帮助您如何将文件添加到 zip。

# c# - 如何在c#中从数据库中获取新输入记录的最大值

> ID：14659757
> 
> 赞同：1
> 
> 时间：2013-02-02T07:38:58.893
> 
> 标签：c#, winforms

我正在尝试使用以下代码插入新记录后立即从表中获取最大值。

```
 objDataAccess.CmdText("Insert into Patientdetails(Patient_Name,Patient_Age,Patient_Sex,Patient_RfdDr,LabId,Sample_Rcvd,Sample_Dlvd,AmtToPay,AmtPaid,AmtPending)Values('" + Name + "','" + Age + "'," + sex + ",'" + doctor + "'," + LabId + "," + smprcvd + ",'" + smpdlvrd + "'," + AmtoPay + "," + AmtPaid + ","+AmtPndg+")");

 dtpid = objDataAccess.CmdSelect("Select Max(Patient_Id) from Patientdetails"); 
```

如果我放置断点并检查，我将获得以前的记录最大值，然后它会从我插入的表中获取准确的（新输入的记录）值。

我怎样才能得到最后插入的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:49:30.847

你能试试这个吗？不知道你的意思是什么`maximum value`，但假设你想获得最后插入的记录，其中 Patient_Id 将是最大的数字......

```
Select Patient_Id 
from Patientdetails 
ORDER BY Patient_ID desc Limit 1; 
```

# php - 星号起源不起作用

> ID：14659758
> 
> 赞同：0
> 
> 时间：2013-02-02T07:39:03.090
> 
> 标签：php, asterisk, vtiger, asteriskami

我正在尝试使 vtiger 与星号 1.6（freepbx 服务器）一起工作。我已经设法连接到星号管理器接口 (AMI) 并对其进行写入。但由于某些奇怪的原因，origin 不起作用。我在用 -

```
Action: Originate
Channel: SIP/2000
Exten: 1000
Context: from-internal
Priority: 1
Callerid: 2000
Async: yes 
```

我在拨打直接电话后尝试阅读来自 AMI 的响应，并且它在频道之后总是有一个随机数。例如 -

```
Event: Dial
Privilege: call,all
SubEvent: Begin
Channel: SIP/1000-0000000c
Destination: SIP/2000-0000000d
CallerIDNum: 1000
CallerIDName: 1000
UniqueID: 1359790601.12
DestUniqueID: 1359790601.13
Dialstring: 2000 
```

这可能是一个问题还是我在这里遗漏了什么？任何指针都是最有帮助的。很乐意提供任何细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T15:43:35.237

添加随机数，因为可以多于一个通道到同一个分机。

Cordinly 对您提供的信息进行调用。无法确定使用此信息为什么它对您“不起作用”，抱歉。

利用 `asterisk -rvvv`

检查星号上发生的情况。读一些像“Aterisk the future of telephony”这样的书也会很高兴（或者聘请能够确定你做错了什么的顾问）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:07:38.183

我设法解决了这个问题，所以调试过程如下 -

1.  使用星号 -rvvv 启动星号 CLI
2.  使用 CLI 发起命令

    > 通道发起 SIP/1000 分机 2000@from-internal

3.  第 2 步显示分机忙时出错（具体为错误 486）。
4.  谷歌搜索错误，发现扩展 1000 正在被硬电话使用，这可能会导致问题
5.  在 manager.conf 中将经理扩展名更改为 2000 并尝试使用

    > 通道发起 SIP/2000 分机 1000@from-internal

6.  第 5 步有效，但来自 PHP 的调用仍然失败。添加了调试以发现 AMI 返回的权限被拒绝

7.  发现从 1.6 开始，您需要在 manager.conf 读/写选项中发起

现在它工作得很好。希望这对某人有所帮助，尽管我认为这个案例可能是一个非常个性化的问题。

# c# - 从列表集合中删除项目不删除

> ID：14659760
> 
> 赞同：5
> 
> 时间：2013-02-02T07:39:27.230
> 
> 标签：c#, asp.net, list, collections

我正在做一个收藏。我需要从集合中删除一项并使用过滤/删除的集合。

这是我的代码

```
public class Emp{
  public int Id{get;set;}
  public string Name{get;set;}
}

List<Emp> empList=new List<Emp>();
Emp emp1=new Emp{Id=1, Name="Murali";}
Emp emp2=new Emp{Id=2, Name="Jon";}
empList.Add(emp1);
empList.Add(emp2);

//Now i want to remove emp2 from collection and bind it to grid.
var item=empList.Find(l => l.Id== 2);
empList.Remove(item); 
```

> **问题是即使在删除该项目后，我的收藏仍然显示计数 2。**
> 可能是什么问题？

**编辑：**

原始代码

```
 var Subset = otherEmpList.FindAll(r => r.Name=="Murali");

   if (Subset != null && Subset.Count > 0)
   {
    foreach (Empl remidateItem in Subset )
    {
       Emp removeItem = orginalEmpList.Find(l => l.Id== 
                                          remidateItem.Id);
                    if (removeItem != null)
                    {
                        orginalEmpList.Remove(remidateItem); // issue here

                    }
      }
    } 
```

> 它工作正常。在实际代码中，我正在删除 remediateItem。remediateItem 是同一类型，但属于不同的集合。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T07:51:29.283

您正在传递`Remove`不在列表中的对象，但您尝试*删除的对象**是列表中其他*对象的副本，这就是它们没有被删除的原因，请使用[List.RemoveAll](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)方法传递谓词。

```
lst.RemoveAll(l => l.Id== 2); 
```

如果您想删除其他一些集合中的许多 id，例如 id 数组

```
int []ids = new int[3] {1,3,7};
lst.RemoveAll(l => ids.Contains(l.Id)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:46:16.620

```
int removeIndex = list.FindIndex(l => e.Id== 2);
if( removeIndex != -1 )
{
    list.RemoveAt(removeIndex);
} 
```

试试这可能对你有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T09:03:41.970

您粘贴的原始代码可以完美运行。它相应地删除项目。

```
List<Emp> empList = new List<Emp>();
Emp emp1 = new Emp { Id = 1, Name = "Murali" };
Emp emp2 = new Emp { Id = 2, Name = "Jon" };
empList.Add(emp1);
empList.Add(emp2);

//Now i want to remove emp2 from collection and bind it to grid.
var item = empList.Find(l => l.Id == 2);
empList.Remove(item); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T07:43:06.387

你写错了你的lambda。应该是这样

```
var item=empList.Find(l => l.Id== 2); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-09-29T08:13:40.713

你需要添加这个打击menthod Remove()：

`orginalEmpList.SaveChanges();`

# mysql - 删除一行时更新同一表中的其他行

> ID：14659761
> 
> 赞同：0
> 
> 时间：2013-02-02T07:39:58.777
> 
> 标签：mysql

**表**让我们称之为**测试**

```
 ----------------------------
 |  id  |  catid  |  value  |
 |  1   |    1    |   1     |
 |  2   |    1    |   2     |
 |  3   |    2    |   1     |
 |  4   |    1    |   3     |
 |  5   |    1    |   4     |
 |  6   |    1    |   5     |
 |  7   |    2    |   2     |
 ---------------------------- 
```

假设我从表中删除了第二行。现在表格将变为：

```
 ----------------------------
 |  id  |  catid  |  value  |
 |  1   |    1    |   1     |
 |  3   |    2    |   1     |
 |  4   |    1    |   3     |
 |  5   |    1    |   4     |
 |  6   |    1    |   5     |
 |  7   |    2    |   2     |
 ---------------------------- 
```

所以在 中`catid1`，没有值 2。所以值将变为 1,3,4,5,.... 到目前为止......

**目标**我需要将这些值更新为从它们以前的值中减去 1，以便保持连续性（如果满足条件，即如果比删除的值更高，则所有值都会上升）。

**代码** 删除后，我正在尝试执行更新查询。

```
UPDATE     `test` 
SET        `value` = 
      (

         SELECT t.param FROM (

                         SELECT `value`-1 AS  param
                         FROM `test`
                         WHERE          
                         `catid` = 1 AND `value` > 2

                       ) AS t

       ) 
WHERE 
      `catid` = 1
      AND   `value` > 2 
```

现在，最内部的查询将返回值 >2 的所有行，因为更新需要字符串或数字的标量值。

**所以问题是我如何在最里面的查询中返回关于更新查询目标的行的值？**

例如，如果更新查询尝试更新 id 为 4 的行，则最内层查询将**仅**`value`检索具有相同行 id 的列并将其返回给外部查询（减去 1 后）。

 **这有什么替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:58:23.907

`JOIN`带有这个子查询的表是这样的：

```
UPDATE test t1
INNER JOIN
( 
  SELECT 
    id, catid, value - 1 AS value
  FROM test
  WHERE catid = 1
    AND value > 2
) AS t2 ON t1.id = t2.id
SET t1.value = t2.value; 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/557f4/1)。

但是不需要这个子查询，你可以直接这样做：

```
UPDATE test t1
SET value = value - 1
WHERE catid = 1
  AND value > 2; 
```

~~**但是，**您可能需要修复该列`id`以匹配这些值，如下所示：~~

 ~~```
UPDATE test AS t1
INNER JOIN
(
  SELECT 
    *, 
    (@rownum := @rownum + 1) AS newID
  FROM test, (SELECT @rownum := 0) AS t
  ORDER BY Id
) AS t2 ON t1.id = t2.id
SET t1.id = t2.newId,
    t1.value = CASE 
                 WHEN t1.catid = 1 AND t1.value > 2 THEN t2.value - 1 
                 ELSE t1.value 
               END; 
```~~ 

[**更新了 SQL Fiddle 演示**](http://sqlfiddle.com/#!2/066ce/1)。**

# javascript - 超时故障后调用相同的函数

> ID：14659767
> 
> 赞同：-1
> 
> 时间：2013-02-02T07:40:31.020
> 
> 标签：javascript, jquery, asp.net

```
$(document).ready(function () {
 tabSlideOut()
}

function tabSlideOut() {
  $('.slide-out-div').tabSlideOut({
  //----
}); 
```

想要在 3 秒后调用 tabslideout hide 显示成功或错误消息，所以我在超时后调用它，

```
setTimeout(function () { tabSlideOut(); }, 3000) 
```

但它发生故障它一次又一次地重复隐藏和显示请任何人都可以指导我这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:49:45.487

不确定这是否可行，而不是 setTimeout 直接试试这个：

```
setTimeout(function(){
  tabSlideOut.call($(document));
},YOUR=TIMEOUT=IN=MILLISECONDS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:17:54.483

试试这个，如果不需要，不要将纯 js 与 jquery 合并。您还需要更正您的语法：

```
$('document').ready(function () {
    setTimeout(function () { 
       $('.slide-out-div').tabSlideOut({
           ....
       });
    }, 3000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T08:48:11.917

在您的页面上放置一个隐藏文件。
当你调用你的函数时

```
 function tabSlideOut() {
  //check for the hidden field value
  //if it is initial value of the hidden field
  // add one in the initial value of the hidden filed
  // call the function
   $('.slide-out-div').tabSlideOut({
 //----

});
  //if not initial value
  //don't call your function 
```

# php - 在 php 类中使用配置文件

> ID：14659769
> 
> 赞同：0
> 
> 时间：2013-02-02T07:40:42.323
> 
> 标签：php, file, class, config

我是 PHP OOP 的新手，但我对 OO 背后的概念有相当不错的理解。我想要一个配置文件，其中包含可在整个应用程序中使用的通用应用程序数据。很正常，但我不完全确定如何做到这一点。我不想创建一个类，然后在每个类中都需要该类、扩展它和/或需要配置文件。我的配置文件看起来像这样：

```
<?php

$configs = array(
   'pagination' => 20,
   'siteTitle' => 'Test site',
   'description' => 'This is a test description',
   'debug' => true
);

?> 
```

我能想到的唯一事情是：

```
<?php 

class user {
   public function __construct() {
       require 'config.php';
       if(configs['debug']) {
           echo 'Debugging mode';
       }
   }
}

?> 
```

我用这种方法看到的问题是，我必须在每个我想使用的类中手动包含这个配置文件，这似乎是多余的。理想情况下，我希望将文件包含在绝对根路径中，然后能够使用任何类中的任何值，但是如果您只需要类之外的文件，则该类将无法访问这些值。我也不想创建一个配置类，然后每个需要这些值的类都让它们扩展配置类。再一次，这似乎是多余的。

不确定我是否有意义，我只是想要一种简单的方法来在每个类中携带配置值并使用它们，而不必输入过多的冗余代码。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:01:49.840

在一个类（config.php）中声明一个变量，然后在另一个类中使用它是不好的做法。您应该从配置文件中返回配置数组，然后可以根据需要将其分配给变量，或将其作为参数传递。

尝试这样的事情：

配置.php：

```
<?php
return array( /* ... config values ... */ ); 
```

用户.php：

```
<?php
class User { 
    private $config;

    public function __construct(array $config) {
        $this->config = $config;
        if ($this->config['debug']) {
            // debug
        }
    }

    public function someOtherMethod() {
        if ($this->config['debug']) {
            // debug
        }
    }
} 
```

调用代码：

```
<?php
$user = new User(require 'config.php');
$user->someOtherMethod(); 
```

# iphone - 给定单词集的所有可能的单词组合

> ID：14659772
> 
> 赞同：-2
> 
> 时间：2013-02-02T07:41:38.930
> 
> 标签：iphone, ios, objective-c, string

我有一组给定的字母说 11 个字母。我想找到特定长度的所有可能的单词组合，比如 5。这些数字是动态的。结果词是否有意义对我来说并不重要。

有人可以向我提供这种代码或算法吗？或者引导我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:44:42.060

这个算法是一个[排列](http://en.wikipedia.org/wiki/Permutation)。一个相对简单的方法是使用递归来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:01:11.563

阅读这个 SO 问题：

[使用两个“字母”的不同长度的序列组合](https://stackoverflow.com/questions/11944311/sequence-combinations-of-varying-length-using-two-alphabets)

在这个问题中阅读“更新 2：”，他在那里发布了他的工作代码

祝一切顺利

# html - 从 div 中显示背景图像

> ID：14659773
> 
> 赞同：0
> 
> 时间：2013-02-02T07:41:47.590
> 
> 标签：html, css, background

[http://www.gardencrafts.c​​o.uk/index.htm](http://www.gardencrafts.co.uk/index.htm)

在上面的链接中，背景有一片叶子一直延伸到身体的中间！我想要的是将整个图像分成三个部分。页眉，内容和最后的页脚。我裁剪了标题所需的部分，但问题是叶子给背景图像的高度为 600 像素。标题高度为 150 像素，因此背景的多余部分被隐藏。

我尝试在 CSS 中显示 Overflaw，但它不起作用。如何在不更改标题 div 高度的情况下让图像显示其全部内容？

这是当前标题 DIV 的 CSS 代码。

```
 #header{
background-image: url(../images/top-bg.png);
background-repeat: no-repeat;
margin: 0 auto;
width: 1000px;
height: 200px;
overflow: visible;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:01:50.687

我认为您必须将该背景应用于标题的父容器，但为了为您提供更好的答案，我们需要查看您的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:19:13.613

这可以通过多种方式解决，以下是其中一种解决方案：

给出页面`#body`的完整原件`background-image`，包括落叶。

使用正确的`background-position`，您可以将 的上半部分`#header`与 的下半部分合并`#body`。

看看：[JSFiddle](http://jsfiddle.net/AliBassam/BmW4C/)

**HTML**

```
<div id="header">
</div>
<div id="body">
</div> 
```

**CSS**

```
#header
{
    background-image:url("https://twitter.com/images/resources/twitter-bird-white-on-blue.png");
    width:300px;
    height:150px;
    border-style:none;
    border-left-style:solid;
    border-right-style:solid;
    border-color:yellow;
}
#body
{
    background-image:url("https://twitter.com/images/resources/twitter-bird-white-on-blue.png");
    width:300px;
    height:300px;
    background-position: 0px -150px;
    border-style:none;
    border-left-style:solid;
    border-right-style:solid;
    border-color:red;
} 
```

但是，这将允许`background-image`重复自身（如果您不停止它），之后将显示另一片叶子。

# php - 如何使用自定义字段构建 php 搜索引擎

> ID：14659774
> 
> 赞同：-2
> 
> 时间：2013-02-02T07:41:58.603
> 
> 标签：php, search, github

我需要在 php 中构建一个搜索引擎，这将有助于使用具有指定字段的搜索条件从后端检索产品/项目。

任何人都可以为我提供任何帮助教程或 wordpress 或 joomla 的任何插件。

```
http://www/github.com 
```

我在github上搜索过但仍然没有成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:11:53.980

看看[Sphinx](http://sphinxsearch.com/)和[PHP Sphinx 客户端](http://php.net/manual/en/book.sphinx.php)。

# java - 如何根据数据库中存在的行数创建 jCheckBox？

> ID：14659778
> 
> 赞同：0
> 
> 时间：2013-02-02T07:42:21.317
> 
> 标签：java, database, swing

我想在 java 中创建一个带有可变数量复选框的框架，这取决于我的数据库中存在的行数。我面临的问题是：- 1.如何计算数据库中的行数？2\. 如何以及在哪里存储数据库列中的数据？3\. 如何使用数据库列中存在的数据创建复选框？

谁能帮我。？？期待解决方案。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:55:44.953

> 如何计算表中的行数？

从表名中选择计数（*）；

> 如何以及在哪里存储数据库列中的数据？

我建议您使用[JTable](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html)并查看教程[如何使用 Table](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

> 如何使用数据库列中存在的数据创建复选框？

阅读[渲染器和编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)部分，了解更多关于注册单元格渲染器的信息`JTable`。

# android - 使用 FlateDecode 在 PDF 中插入 PNG 图像

> ID：14659783
> 
> 赞同：0
> 
> 时间：2013-02-02T07:43:23.677
> 
> 标签：android, pdf, png

我可以使用 DCTDecode 成功地将 JPEG 图像插入 PDF，但是在使用 FlateDecode 插入 PNG 时，会面临诸如图像未在 PDF 中显示的问题。我从 PNG 图像中读取所有字节数据并写入 PDF 文件，就像使用 JPEG 图像一样。但是所有的 PDF 页面都是空白的。

在使用 FlateDecode 嵌入 pdf 之前，是否有任何程序对 PNG 字节数据进行编码？

是否有任何其他程序可以在不使用 FlateDecode 的情况下将 PNG 图像嵌入 PDF？请建议...

# php - PHP、MySQL性能与效率场景

> ID：14659784
> 
> 赞同：1
> 
> 时间：2013-02-02T07:43:29.643
> 
> 标签：php, mysql, performance

**简化场景：**

1.  我有一张大约有 100,000 行的表。
2.  我需要根据某些标准选择大约 300-400 行，以便在网页上显示它们。

**考虑到上述情况，您会推荐以下哪种方法？**

*方法 1*：仅使用一个数据库查询将整个表选择为一个 100,000 行的大数组。使用循环，从数组中挑选所需的 300-400 行并将其传递给前端。数据库服务器上的最小负载，因为它只是一个查询。将更多负载放在 PHP 上，因为它必须存储和搜索 100,000 个数组。

*方法 2*：使用循环，PHP 将为所需数据的每一行生成一个新查询。收集所有数据将需要 300-400 次独立查询。服务器上的负载更大。与方法 1 相比，PHP 的负载更小。

意见/想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:05:34.230

100,000 行对于 MySQL rdbms 来说是很小的数量。

您最好对数据库服务器进行微调。所以我不推荐1也不推荐2。

只是：

```
SELECT * FROM `your_table` WHERE `any_field` = 'YOUR CRITERIA' LIMIT 300; 
```

当您的数据超过 1,000,000 行时，您应该考虑强索引优化，也许您必须为复杂的选择创建一个存储过程。我向你保证，无论如何它都不是 PHP 的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:18:38.730

使用 PHP 循环遍历数据确实是个坏主意，毕竟数据库是为执行查询**而设计的。**PHP 将需要遍历*所有*记录，并且不使用索引来加快速度；这大致相当于数据库中的“表扫描”。

为了从您的数据库中获得最大的性能，重要的是要有一个好的设计并（例如）在正确的列上创建索引。

此外，如果您还没有决定要使用什么 RDBMS，根据您的使用情况，一些数据库有更高级的选项可以帮助提高性能（例如 PostgreSQL 支持地理信息）

Pease 提供一些*实际*数据（将存储什么样的数据，什么样的字段）和需要执行的查询/过滤类型的样本，以便人们能够给你一个**实际**的答案，而不是**假设**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T08:07:32.307

正如您从性能方面提出的问题，您的两种方法都会消耗一些资源。在这种情况下，我仍然会选择`approach 1`，因为它不会一次又一次地查询数据库，如果您为每一行生成查询，即 300-400 个查询。在大型项目设计中，数据库总是成为瓶颈。

老实说，这两种方法都不好。良好的数据库设计和查询选择是一种很好的做法。您试图实现的目标可以通过适当的查询来完成。

# google-maps-api-3 - 为同一地址行获取不同的纬度和经度

> ID：14659785
> 
> 赞同：0
> 
> 时间：2013-02-02T07:43:34.320
> 
> 标签：google-maps-api-3

我正在使用 Google API 获取地址的纬度和经度，

```
geocoder.geocode({ 'address': address
, bounds: map.getBounds() },
function (results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
  Lat = results[0].geometry.location.lat();
  Long = results[0].geometry.location.lng();
}); 
```

但是对于相同的地址，有时我会得到值： Latitude=33.189967 和 longitude=-96.7333 更正确，而其他时候我会得到纬度和经度数组，从中获取第一个，我得到的值是 Latitude=41.920 和经度=83.41。我目前使用的地址是“1550 South Custer Rd”。请帮我一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:30:46.567

我得到该字符串的[4 个结果](http://www.geocodezip.com/v3_example_geo2.asp?addr1=1550%20South%20Custer%20Rd&geocode=1)：

```
Found 4 results
[ 0 ]: 1550 South Custer Road, Monroe Charter Township, MI 48161, USA (41.9200564, -83.41902479999999)
[ 1 ]: 1550 South Custer Road, McKinney, TX 75070, USA (33.189967, -96.73350699999997)
[ 2 ]: 1550 South Custer Road, Spokane, WA 99223, USA (47.6389694, -117.34156009999998)
[ 3 ]: 1550 South Custer Road, Custer, MI 49405, USA (43.9296513, -86.21892639999999) 
```

我不知道您如何期望地理编码器知道哪个答案“更正确”，因为它们都包含那个确切的字符串。也许您需要包含更多信息（如城镇或州），或处理结果以确定您感兴趣的区域。

# ios - iPhone SDK 中的 PopOver 框架问题

> ID：14659786
> 
> 赞同：0
> 
> 时间：2013-02-02T07:43:37.453
> 
> 标签：ios, xcode, ipad, mkmapview, uipopovercontroller

我在地图视图中显示一个弹出框，如下所示：

![在此处输入图像描述](../Images/19fda3cf5490266f2f98e5218edd1b07.png)

但是当我旋转设备时，它显示如下：

![在此处输入图像描述](../Images/14af27dd24d8afd10e13b818799acb37.png)

**如您所见，它覆盖了注释，而不是仅显示在注释旁边。**

**我的代码如下所示：**

```
CGPoint annotationPoint = [mapView convertCoordinate:aView.annotation.coordinate toPointToView:mapView];
        float boxDY=annotationPoint.y;
        float boxDX=annotationPoint.x;
        CGRect box = CGRectMake(boxDX,boxDY,5,5);

        UILabel *displayLabel = [[UILabel alloc] initWithFrame:box];

         [popView presentPopoverFromRect:displayLabel.frame inView:mapView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

        [displayLabel release]; 
```

**帮我解决这个问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:35:09.493

You can try to override the following method (declared in **UIViewcontroller.h**) :

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration; 
```

You'll probably need to save the state of your viewController (like isPopoverPresented, which annotation etc.) and update the popover's rect accordingly.

# python - 高效的 Python IPC

> ID：14659789
> 
> 赞同：7
> 
> 时间：2013-02-02T07:43:50.377
> 
> 标签：python, ipc, communication, rpc

`batch`我正在用 Python3 制作一个应用程序，它将被分成几个`gui`部分。 `Batch`负责处理逻辑，`gui`负责显示。

我应该使用哪个[进程间通信 (IPC)框架并满足以下要求：](http://en.wikipedia.org/wiki/Inter-process_communication)

1.  GUI 可以在批处理以外的其他设备上运行（GUI 可以在同一设备、智能手机、平板电脑等、本地或网络上运行）。
2.  批处理（Python3 IPc 库）应该可以在 Linux、Mac、Windows、...
3.  IPC 应该支持用不同语言（Python、Javascript、...）编写的 GUI
4.  IPC 的性能很重要——它应该尽可能地“交互”，但不会丢失信息。
5.  多个 GUI 可以连接到同一个批次。

**附加：**如果 GUI 也保证用 Python 编写，选择是否会是其他选择？

**编辑：** 我找到了很多 IPC 库，比如这里：[Efficient Python to Python IPC](https://stackoverflow.com/questions/7839786/efficient-python-to-python-ipc) or [ActiveMQ or RabbitMQ or ZeroMQ or](https://stackoverflow.com/questions/731233/activemq-or-rabbitmq-or-zeromq-or) .

到目前为止，我发现的最好看的选项是：

*   兔子MQ
*   零MQ
*   烟火

他们是解决这个问题的合适方法吗？如果不是为什么？如果有更好的东西，请告诉我为什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T11:22:40.037

您提到的三个似乎很合适，并且会满足您的要求。我认为你应该继续做你觉得最舒服\最熟悉的事情。

从我个人的经验来看，我相信 ZeroMQ 是效率、易用性和互操作性之间的最佳组合。我很容易将 zmq 2.2 与 Python 2.7 集成在一起，所以这将是我个人的最爱。但是，正如我所说，我很确定所有 3 个框架都不会出错。

半相关：需求往往会随着时间而变化，您可能会决定稍后切换框架，因此封装对框架的依赖将是一个很好的设计模式。（例如，拥有一个与框架交互并让其 API 使用您的内部数据结构和领域语言的管道模块）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-08T20:47:20.440

为此，我使用了[Redis](http://redis.io/)引擎。*极其* **简单**、**轻巧**。

服务器端：

```
import redis
r = redis.Redis() # Init
r.subscribe(['mychannel']) # Subscribe to "channel"
for x in r.listen():
  print "I got message",x 
```

客户端做：

```
import redis
r = redis.Redis() # Init
r.publish('mychannel',mymessage) 
```

“消息”是字符串（任何大小）。如果您需要传递复杂的数据结构，我喜欢使用 json.loads 和 json.dumps 在 python dicts/arrays 和字符串之间进行转换——尽管“pickle”对于 python-to-python 通信来说可能是更好的方法JSON 意味着“另一面”可以写成任何东西。

现在 Redis 还有十亿个其他的好处——而且它们本质上都一样简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T10:49:44.517

你从框架中要求很多东西；支持网络，多平台，多语言，高性能（理想情况下应该进一步指定 - 它是什么意思，带宽？延迟？什么是“足够好”；我们说的是 kB/s、MB/s、GB/ s? 1 毫秒或 1000 毫秒往返？）另外还有很多没有提到的东西很容易发挥作用，例如您需要身份验证或加密吗？一些框架为您提供这样的功能，而另一些则依赖于您自己实现这部分难题。

可能不存在可以为您提供同时优化所有这些要求的理想解决方案的灵丹妙药。至于您问题的“附加”部分 - 是的，如果您仅将语言要求限制为 python，或者进一步区分关键要求和很好的要求，将会有更多可用的解决方案。

您可能想看看的一项技术是[Versile Python](https://versile.com/products/vpy/)（完全披露：我是开发人员之一）。它是多平台的，支持 python v2.6+/v3 和 java SE6+。关于性能，这取决于您的要求。如果您对技术有任何疑问，请在[论坛](https://versile.com/forum/)上提问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T07:48:09.243

解决方案是[dbus](http://www.freedesktop.org/wiki/Software/dbus)

它是一个成熟的解决方案，可用于许多语言（C、Python、...，只需 google 用于 dbus + 您最喜欢的语言），虽然不如共享内存快，但对于几乎所有不需要的语言（硬）实时属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-07T20:43:18.367

我将在这里采取不同的策略，并说为什么不使用 Internet 上事实上的 RPC 语言？即 HTTP REST API？

使用客户端的 Python 请求和服务器端的 Flask，您可以获得以下好处：

*   现有的 HTTP REST 工具（如 Postman）可以访问和测试您的服务器。
*   这些相同的工具可以记录您的 API。
*   如果您还使用 JSON，那么您也将获得很多适用于此的工具。
*   您将获得经过验证的安全实践和解决方案（基于会话的安全性和 SSL）。
*   对于许多不同的开发人员来说，这是一种熟悉的模式。

# jquery - 反向树扫描，可能吗？

> ID：14659790
> 
> 赞同：0
> 
> 时间：2013-02-02T07:44:03.787
> 
> 标签：jquery

我有一个如下的 HTML 结构：

```
<ul id="mainMenu">
    <li class="itm_1">
        Text...
    </li>
    <li class="itm_2">
        Text...
        <ul>
            <li class="itm_3">
                Text...
                <ul>
                    <li class="itm_4">
                        Text...
                    </li>
                    <li class="itm_5">
                        Text...
                    </li>
                </ul>
            </li>
            <li class="itm_6">
                Text...
            </li>
        </ul>
    </li>
</ul> 
```

我喜欢做的是向活动元素添加一个类，然后在同一路径中的任何其他元素中添加另一个类，如下例所示：

```
<ul id="mainMenu">
    <li class="itm_1">
        Text...
    </li>
    <li class="itm_2 ANCESTOR_ACTIVE">
        Text...
        <ul>
            <li class="itm_3 ANCESTOR_ACTIVE">
                Text...
                <ul>
                    <li class="itm_4">
                        Text...
                    </li>
                    <li class="itm_5 ACTIVE">
                        Text...
                    </li>
                </ul>
            </li>
            <li class="itm_6">
                Text...
            </li>
        </ul>
    </li>
</ul> 
```

将被视为活动的元素我可以找到它并添加活动的类，但我找不到在同一路径中活动元素上方的元素中添加祖先活动类的方法。

现在在我的脚本中，我有以下代码：

```
<?php
    $current_page = $page_id;    // Lets say is 5
?>
<script type="text/javascript">
    var cp = {
        p : <?php echo $current_page; ?>
    };

    jQuery(document).ready(
        function($)
        {
            $('.itm_' + cp.p).addClass('active');
        }
    );
</script> 
```

**注意**：嵌套数组并不总是具有相同的深度。在某些情况下，还有其他更多的嵌套列表，而在其他一些情况下，没有子列表我如何爬到顶部元素#mainMenu 并使用 jQuery 将类“ancestor_active”添加到同一路径中的每个 li 元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T07:58:35.987

用于`parents()`查找所有匹配的树

```
$('#mainMenu li').click(function(){
  $('#mainMenu li.active').removeClass('active');
   $(this).addClass('active').parents('li').addClass('active');
}); 
```

API 参考[http://api.jquery.com/parents/](http://api.jquery.com/parents/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:46:45.843

你可以使用[父](http://api.jquery.com/parent/)函数，我猜

*编辑*一个小例子

```
<script type="text/javascript">
    var cp = {
        p : 4
    };
    jQuery(document).ready(
        function($) {
            var c = $('.itm_' + cp.p)
        c.addClass('active')
        set_ancestor_active(c.parent())
        }
    );
function set_ancestor_active(c) {
   while (c.is('li') || c.is('ul')) {
    if (c.is('li'))
         c.addClass('ancestor_active')
    c = c.parent()
   }
}
</script> 
```

# ios - facebook分享后多点触控不起作用

> ID：14659791
> 
> 赞同：0
> 
> 时间：2013-02-02T07:44:04.610
> 
> 标签：ios, xcode, facebook, cocoa-touch, cocos2d-iphone

在我的项目中，我有 5 个级别。在第一级和第二级，我可以一次移动和射击。完成第二级后，我想与 Facebook 分享。facebook分享后，我不能一次移动和射击。只有一个进程在工作（射击或移动）。我想做什么来解决这个问题。

我的编码在这里：

```
{
UIViewController*v=[[UIViewController alloc]init];
[[[CCDirector sharedDirector]openGLView]addSubview:v.view];
SLComposeViewController*mySLComposerSheet;
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) 
{

    NSString *strg=[NSString stringWithFormat:@" "];

    NSString *bodyStr=[NSString stringWithFormat:@"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"!\n;

    mySLComposerSheet = [[SLComposeViewController alloc] init]; 
    mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook]; //Tell him with what social plattform to use it, e.g. facebook or twitter
    [mySLComposerSheet setInitialText:bodyStr]; //the message you want to post
    [mySLComposerSheet addImage:[UIImage imageNamed:@"my.jpg"]]; //an image you could post

    NSURL *url = [NSURL URLWithString:@"https:example.com"];
    [mySLComposerSheet addURL:url];

    [v presentViewController:mySLComposerSheet animated:YES completion:nil];
}
[mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
    NSString *output,*head;
    switch (result) {
        case SLComposeViewControllerResultCancelled:
            output = @"FREE levels NOT unlocked";
            head=@"Facebook Share Unsuccessfull";
            UIAlertView *alert1 = [[UIAlertView alloc] initWithTitle:head message:output delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert1 show];
            [self reload];
            break;
        case SLComposeViewControllerResultDone:
            output = @"Extra FREE levels successfully unlocked";
            head=@"Successfull";
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:head message:output delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
            alert.tag=22;
                  break;
        default:
            break;
    } 
     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Facebook" message:output delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
}];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T09:52:29.457

您正在展示 ViewController`mySLComposerSheet`

```
[v presentViewController:mySLComposerSheet animated:YES completion:nil]; 
```

但是您的completionHandler 中没有dismiss...语句

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

见帖子[https://stackoverflow.com/a/12651085/2787026](https://stackoverflow.com/a/12651085/2787026)

# jquery - 如何使用 jquery 在 html 页面中插入带有图标（红色、绿色和蓝色）的表格

> ID：14659794
> 
> 赞同：0
> 
> 时间：2013-02-02T07:45:19.933
> 
> 标签：jquery, html, css

我需要创建一个 html 页面，其中我有三个带有图像的表格，并且一个按钮比较，在页面加载时只会显示两个表格，当用户单击比较按钮时，第三个表格应该出现三个图标

绿色：高度匹配蓝色：可能匹配红色：不匹配

如何在我的 html 页面中包含这些图标，我可以使用 jquery 做到这一点吗？或任何其他方式？

请帮我。

这是代码，这里我在比较指纹

```
<td><table style="width: 100%;"><tr>
 <td style="width: 10%; text-align: center;  border: none;" > Right Thumb</td>
<td style="width: 10%; text-align: center;  border: none;"><span style="width: 50%;  border:     none;"><img src="img/RIGHT_THUMB.png" alt="right thumb" height="120"/></span></td>
<td><table style="width: 100%;"><tr>
 <td style="width: 10%; text-align: center;  border: none;" > Right Thumb</td>
<td style="width: 10%; text-align: center;  border: none;"><span style="width: 50%;  border: none;"><img src="img/RIGHT_THUMB.png" alt="right thumb" height="120"/></span></td>
<input type="button"  value="compare"/> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:31:58.733

使用 jquery 或 javascript。首先使图标和表格可见性为假，然后使它们出现在比较按钮的单击事件中。或者您可以使用 jquery 或 javascript 动态添加该按钮。

# jsp - 处理查询并将结果带到同一页面jsp

> ID：14659795
> 
> 赞同：0
> 
> 时间：2013-02-02T07:45:36.370
> 
> 标签：jsp, process

处理查询并将结果放在同一页面上 jsp 我创建了一个注册页面，其中包括标签和文本框，并在单击注册按钮时注册我有插入查询（插入到 sql db）必须执行并将结果带到注册页面成功或错误请告诉我逻辑和代码示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:50:45.700

服务中

如果细节不满意发送页面，错误消息如下..

```
try {
        HttpSession httpSession = req.getSession(true);
        httpSession.setAttribute("errormessage", message);
        req.getRequestDispatcher("register.jsp").forward(req, resp);
    } catch (ServletException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

像这样在jsp中进行更改

```
 <%
             String errormessage = (String) request.getSession().getAttribute("errormessage");
             if(errormessage != null)
             {
             errormessage =errormessage;
             }
             else
             {
             errormessage ="";
             }

             %>
           <div id="login_error" class="common-box">
                <span><%= errormessage %> </span>
                <% request.getSession().removeAttribute("errormessage");  
                %> 
           </div> 
```

# c# - 在datagridview上选择复选框的解决方案

> ID：14659797
> 
> 赞同：1
> 
> 时间：2013-02-02T07:45:44.350
> 
> 标签：c#

将复选框列插入datagridview时，我使用以下代码，

`DataGridViewCheckBoxColumn checkBoxColumn = new DataGridViewCheckBoxColumn(); dataGridView1.Columns.Add(checkBoxColumn);`

当我尝试选择复选框时，它不是 selectecd （未选中或未选中），有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:39:16.973

你可以用这篇[文章](http://www.c-sharpcorner.com/uploadfile/MohanKumar.R/selecting-checkboxes-inside-the-gridview-control/)

```
rotected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        //Check for the row type, which should be data row
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            //Find the check boxes and assign the values from the data source
            ((CheckBox)e.Row.FindControl("chkSelect")).Checked = Convert.ToBoolean(((DataRowView)e.Row.DataItem)[1]);
            ((CheckBox)e.Row.FindControl("chkAdd")).Checked = Convert.ToBoolean(((DataRowView)e.Row.DataItem)[2]);
            ((CheckBox)e.Row.FindControl("chkEdit")).Checked = Convert.ToBoolean(((DataRowView)e.Row.DataItem)[3]);
            ((CheckBox)e.Row.FindControl("chkAll")).Checked = Convert.ToBoolean(((DataRowView)e.Row.DataItem)[4]);

            //Find the checkboxes and assign the javascript function which should
            //be called when the user clicks the checkboxes.

            ((CheckBox)e.Row.FindControl("chkSelect")).Attributes.Add("onclick", "checkBoxClicked('" +
((CheckBox)e.Row.FindControl("chkSelect")).ClientID + "','" + ((CheckBox)e.Row.FindControl("chkAdd")).ClientID
+ "','" + ((CheckBox)e.Row.FindControl("chkEdit")).ClientID + "','" + ((CheckBox)e.Row.FindControl("chkAll")).ClientID + "'," + "'SELECT')");

            ((CheckBox)e.Row.FindControl("chkAdd")).Attributes.Add("onclick", "checkBoxClicked('" +
((CheckBox)e.Row.FindControl("chkSelect")).ClientID + "','" + ((CheckBox)e.Row.FindControl("chkAdd")).ClientID
+ "','" + ((CheckBox)e.Row.FindControl("chkEdit")).ClientID + "','" + ((CheckBox)e.Row.FindControl("chkAll")).ClientID + "'," + "'ADD')");

            ((CheckBox)e.Row.FindControl("chkEdit")).Attributes.Add("onclick", "checkBoxClicked('" +
((CheckBox)e.Row.FindControl("chkSelect")).ClientID + "','" + ((CheckBox)e.Row.FindControl("chkAdd")).ClientID
+ "','" + ((CheckBox)e.Row.FindControl("chkEdit")).ClientID + "','" + ((CheckBox)e.Row.FindControl("chkAll")).ClientID + "'," + "'EDIT')");

            ((CheckBox)e.Row.FindControl("chkAll")).Attributes.Add("onclick", "checkBoxClicked('" +
((CheckBox)e.Row.FindControl("chkSelect")).ClientID + "','" + ((CheckBox)e.Row.FindControl("chkAdd")).ClientID
+ "','" + ((CheckBox)e.Row.FindControl("chkEdit")).ClientID + "','" + ((CheckBox)e.Row.FindControl("chkAll")).ClientID + "'," + "'ALL')");

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:48:23.567

您只是在 gridview 中添加一列，但在为 gridview 分配数据源时。将 gridview 与数据源绑定以访问行以选中或取消选中复选框。

**根据评论进行**编辑。****

 **您可以使用 RowDataBound 事件在 bihnding 期间使用带有数据源数据的网格视图的行实例来启用/禁用复选框。

```
void gridview1_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
  {
       CheckBox chk = (CheckBox)e.Row.FindControl("chkBoxID");
       if(DataBinder.Eval(e.Row.DataItem, "datasourceColumnName").ToString() == "someval")
             chk.Enabled = false;
  }
} 
```**

# windows - Spy++ 中“上一个窗口”的常量是什么？

> ID：14659806
> 
> 赞同：0
> 
> 时间：2013-02-02T07:47:42.583
> 
> 标签：windows, handle, spy++

在 Spy++ 中，您可以单击列表中的窗口，然后右键单击它，选择“属性”，您将看到一个选项卡窗口，您可以在其中选择选项卡“Windows”。

在此窗口中，您可以看到“下一个窗口”、“上一个窗口”、“父窗口”等选项。

如果单击“上一个窗口”，它将显示上一个窗口，但我不确定 Spy++ 以何种方式确定“上一个窗口”实际上是什么。

我认为 Spy++ 可能会通过使用像 GW_PREVIOUS 这样的常量来查找上一个窗口，但是没有这样的常量。

在这种情况下，Spy++ 如何或做什么？还是仅使用窗口的 z 顺序？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:36:48.707

它使用常量`GW_HWNDPREV`。不确定您是如何错过它的，因为它与所有其他`GW_`值一起存在。

# iphone - 如何从我的经纬度中找出最近的用户？

> ID：14659808
> 
> 赞同：0
> 
> 时间：2013-02-02T07:47:47.263
> 
> 标签：iphone, ios, ipad

我有一个应用程序，其中我有一个位置坐标。（即纬度和经度）。然后我有一个朋友列表和他们的（纬度和经度）。

> 我需要按照离我最近的人优先的条件对我的朋友数组进行排序

.我有他们和我的经纬度。有人可以帮我实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:06:09.893

```
CLLocation *myLoc = [[CLLocation alloc] initWithLatitude:42.5000 longitude:1.5000];
NSArray *arr = [NSArray arrayWithObjects:
                [[CLLocation alloc] initWithLatitude:42.5000 longitude:1.5000],
                [[CLLocation alloc] initWithLatitude:24.0000 longitude:54.0000],
                [[CLLocation alloc] initWithLatitude:33.0000 longitude:65.0000],
                [[CLLocation alloc] initWithLatitude:17.0500 longitude:-61.8000],
                [[CLLocation alloc] initWithLatitude:18.2500 longitude:-63.1667],
                [[CLLocation alloc] initWithLatitude:41.0000 longitude:20.0000],
                [[CLLocation alloc] initWithLatitude:40.0000 longitude:45.0000],
                nil
                ];

CLLocation *nearestLoc = nil;
CLLocationDistance nearestDis = DBL_MAX;
for (CLLocation *loc in arr) {
    CLLocationDistance distance = [myLoc distanceFromLocation:loc];
    if (nearestDis > distance) {
        nearestLoc = loc;
        nearestDis = distance;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:01:43.040

嗯，这取决于您如何存储这些信息。如果你用 postgis 将它存储在 postgres 中，那么我很确定你可以按距离排序。如果没有，您可以获取距离计算算法并为所有朋友运行它，可能缓存它，然后按距离排序。

# jquery - ASP.NET/Jquery 控件设计：HTML 生成引擎的存放位置

> ID：14659810
> 
> 赞同：0
> 
> 时间：2013-02-02T07:48:15.177
> 
> 标签：jquery, asp.net, asp.net-controls, jquery-widgets

这是一个设计问题。我希望你们能帮助我解决这个问题。

我正在开发一个自动完成控件。它基本上是一个基于服务的控件，其中服务调用的职责是在用户输入几个单词时获取建议列表（下拉菜单）的 HTML。

服务器端代码在 C# 中，客户端在 JQuery/Javascript 中。

该控件已开发为使用两种模式：

1.  一个 ASP.NET 控件（在生成的响应中初始化一个 jQuery 小部件）。

2.  一个使用服务器端 HTML 生成引擎的独立 jQuery 小部件。

我在服务器上保留了建议菜单（下拉菜单）的 HTML 生成引擎。控制用户可以选择在服务器上缓存他们的数据源。如果未启用缓存，则在每个服务请求中将数据源发送到服务器以生成 HTML。

**我的问题是 - 我是否也应该在客户端（JQuery/Javascript）上编写一个 HTML 生成引擎？**

到目前为止，我发现了“编写单独的客户端 HTML 引擎”的以下优点和缺点：

**优点：**

1.  避免了对服务器的请求，为小到平均大小的建议列表生成更快的 HTML。

2.  没有服务器端依赖，jQuery 小部件模式将完全独立，因为不需要服务器端代码。

**缺点：**

1.  代码重复：C# 和 jQuery/javascript 中的同一生成引擎。

2.  增加维护：随着新特性/功能的添加，双方都必须进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:14:23.653

我会在客户端生成所有需要的动态 html。这要快得多。

服务器或 Web 服务可以返回一组结果 (JSON)。我会用它来填充和显示 javascript 中的结果视图。

asp.net 控件也会将数据呈现为 JSON 并在客户端使用 javascript 根据需要显示它。

如果您在 html 中使用数据，则不应该出现您提到的代码重复和增加维护的缺点，无论它是由控件呈现还是从服务获取。

# wordpress - Wordpress 评论，SMTP 错误页面

> ID：14659818
> 
> 赞同：0
> 
> 时间：2013-02-02T07:49:55.237
> 
> 标签：wordpress, email, smtp, comments

我最近使用自定义帖子类型在我的网站上实现了一个博客。当我激活评论时，如果我已登录，评论通过正常，但我注销并测试评论，它会将我带到一个 SMTP 错误页面，内容如下：

```
SMTP -> get_lines(): $data was ""
SMTP -> get_lines(): $str is "220 mx.google.com ESMTP u1sm13031122oee.8 - gsmtp "
SMTP -> get_lines(): $data is "220 mx.google.com ESMTP u1sm13031122oee.8 - gsmtp "
SMTP -> FROM SERVER:220 mx.google.com ESMTP u1sm13031122oee.8 - gsmtp 
```

再加上大约五十行。

尝试将电子邮件发送到非“本地”地址时似乎出现错误。

自定义帖子类型的代码如下：

```
<?php

function my_custom_post_articles() {
    $labels = array(
        'name'               => _x( 'Articles', 'post type general name' ),
        'singular_name'      => _x( 'Article', 'post type singular name' ),
        'add_new'            => _x( 'Add New', 'book' ),
        'add_new_item'       => __( 'Add New Article' ),
        'edit_item'          => __( 'Edit Article' ),
        'new_item'           => __( 'New Article' ),
        'all_items'          => __( 'All Articles' ),
        'view_item'          => __( 'View Article' ),
        'search_items'       => __( 'Search Articles' ),
        'not_found'          => __( 'No Articles found' ),
        'not_found_in_trash' => __( 'No Articles found in the Trash' ), 
        'parent_item_colon'  => '',
        'menu_name'          => 'Articles'
    );
    $args = array(
        'labels'        => $labels,
        'description'   => 'Holds our articles and article specific data',
        'public'        => true,
        'menu_position' => 5,
        'supports'      => array( 'title', 'editor', 'thumbnail', 'excerpt', 'comments' ),
        'has_archive'   => true,
    );
    register_post_type( 'articles', $args );    
    flush_rewrite_rules();
}
add_action( 'init', 'my_custom_post_articles' );

?> 
```

# android - 如何将软键盘隐藏在 View like Gmail 应用程序后面？

> ID：14659825
> 
> 赞同：3
> 
> 时间：2013-02-02T07:50:58.087
> 
> 标签：android, android-layout, android-softkeyboard, autosuggest

我已经成功实现了自动建议功能`MultiAutoCompleteTextView`，一切正常，除了**我无法在软键盘上方显示自动建议列表**。

**Android Gmail 应用程序具有相同的功能。[见下图]**

![在此处输入图像描述](../Images/af67370821f4b3d0194b39dfabe72277.png)

**问题：**

> 我想要确切的功能，想要在软键盘上显示一个建议列表，但我不知道如何实现这一点。我的建议列表总是隐藏在软键盘后面。
> 
> 如何在 Gmail 应用等软键盘上方显示自动建议列表？

我曾尝试使用不同`android:imeOptions`且不同的 xml 属性并进行了大量搜索，但没有任何帮助。

是否有任何公共 Api 或 XML 属性可用于这样做？有没有人对如何实现这一目标有任何线索或想法。

代码结构：我的片段打开一个`AlertDialog`包含`MultiAutoCompleteTextView`我正在实施自动建议的位置。

任何导致正确方向的帮助或建议，将不胜感激。

# java - 如何设置 JTable 的行大小？

> ID：14659829
> 
> 赞同：3
> 
> 时间：2013-02-02T07:51:48.097
> 
> 标签：java, swing, jtable

我将在其中创建应用程序以输入发票，我创建了使用 JTable 的表单，但最终用户要求描述可能是 2 到 3 行（表格图像）[i！[]]

所以我希望代码增加行的大小

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T08:00:27.410

*   `JTable->TableColumnModel->TableColum`（更改列的大小，只需调查编辑器和渲染）
*   `JTable-setRowHeight`（改变行高）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T17:04:56.897

> 最终用户的要求是描述可能是 2 到 3 行

我假设您正在尝试在一个`JTable`单元格的多行中显示数据。我试图在单元格内的多行中显示数据的示例。

正如@Sergii 建议使用`JTable.setRowHeight`来增加单元格的高度。单元格`data column`是用 渲染的`JTextArea`。

![带有呈现为 JTextArea 的单元格的 JTable](../Images/19139894233ce219d4207487dd640d8d.png)

```
import java.awt.Component;
import java.awt.EventQueue;
import java.util.EventObject;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextArea;
import javax.swing.event.CellEditorListener;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellEditor;

public class JTableCellTest {
    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                Object[] columnNames = {"S.No", "Data"};
                Object[][] data = {
                                        {"1", "I'm going to create application in that to enter invoice i've created form in which i have used JTable but end user requirement is that the the description may be of 2 to 3 lines.\n I'm going to create application in that to enter invoice i've created form in which i have used JTable but end user requirement is that the the description may be of 2 to 3 lines. \n I'm going to create application in that to enter invoice i've created form in which i have used JTable but end user requirement is that the the description may be of 2 to 3 lines"},
                                        {"2", "I'm going to create application in that to enter invoice i've created form in which i have used JTable but end user requirement is that the the description may be of 2 to 3 lines.\n I'm going to create application in that to enter invoice i've created form in which i have used JTable but end user requirement is that the the description may be of 2 to 3 lines. \n I'm going to create application in that to enter invoice i've created form in which i have used JTable but end user requirement is that the the description may be of 2 to 3 lines"},
                                        {"3", "I'm going to create application in that to enter invoice i've created form in which i have used JTable but end user requirement is that the the description may be of 2 to 3 lines.\n I'm going to create application in that to enter invoice i've created form in which i have used JTable but end user requirement is that the the description may be of 2 to 3 lines. \n I'm going to create application in that to enter invoice i've created form in which i have used JTable but end user requirement is that the the description may be of 2 to 3 lines"}
                                  };

                JFrame frame = new JFrame();
                JTable table = new JTable(data, columnNames);
                table.setRowHeight(70);

                table.getColumnModel().getColumn(1).setCellRenderer(new CustomCellRenderer());
                table.getColumnModel().getColumn(1).setCellEditor(new CustomEditor());

                frame.setTitle("JTable with JTextArea");
                frame.add(new JScrollPane(table));
                frame.pack();
                frame.setVisible(true);

            }
        };

        EventQueue.invokeLater(r);
    }
}

class CustomCellRenderer extends DefaultTableCellRenderer {

        private JTextArea textArea;
        private JScrollPane scrollPane;

        public CustomCellRenderer() {
            textArea = new JTextArea();
            scrollPane = new JScrollPane(textArea);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value,
                boolean isSelected, boolean hasFocus, int row, int column) {

            if(null != value)
                textArea.setText(value.toString());

            return scrollPane;
        }
}

class CustomEditor implements TableCellEditor {

    private JTextArea textArea;
    private JScrollPane scrollPane;

    public CustomEditor() {
        textArea = new JTextArea();
        scrollPane = new JScrollPane(textArea);
    }

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value,
            boolean isSelected, int row, int column) {
        if(null != value)
            textArea.setText(value.toString());

        return scrollPane;
    }

    @Override
    public void addCellEditorListener(CellEditorListener arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public void cancelCellEditing() {
        // TODO Auto-generated method stub

    }
    @Override
    public Object getCellEditorValue() {
        // TODO Auto-generated method stub
        return textArea.getText();
    }
    @Override
    public boolean isCellEditable(EventObject arg0) {
        // TODO Auto-generated method stub
        return true;
    }
    @Override
    public void removeCellEditorListener(CellEditorListener arg0) {
        // TODO Auto-generated method stub

    }
    @Override
    public boolean shouldSelectCell(EventObject arg0) {
        // TODO Auto-generated method stub
        return true;
    }
    @Override
    public boolean stopCellEditing() {
        // TODO Auto-generated method stub
        return true;
    }
} 
```

# python - 子类化 code.InteractiveInterpreter 时未调用 write()

> ID：14659830
> 
> 赞同：0
> 
> 时间：2013-02-02T07:51:50.123
> 
> 标签：python, console

当子类化 code.InteractiveInterpreter 时，我似乎无法按照[文档](http://docs.python.org/2/library/code.html)中的预期运行 write() 方法。

```
import code

class PythonInterpreter(code.InteractiveInterpreter):
    def __init__(self, localVars):
        self.runResult = ''
        print 'init called'
        code.InteractiveInterpreter.__init__(self, localVars)

    def write(self, data):
        print 'write called'
        self.runResult = data

test = 'Hello'
interpreter = PythonInterpreter({'test':test})
interpreter.runcode('print test')
print 'Result:' + interpreter.runResult 
```

预期输出：

```
init called
write called
Result: Hello 
```

实际输出：

```
init called
Hello   <- shouldn't print
Result: 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:29:02.700

传递给 runco​​de 的代码根本不使用 write 方法。您必须重定向标准输出才能使其正常工作，例如：

```
import code

class PythonInterpreter(code.InteractiveInterpreter):
    def __init__(self, localVars):
        self.runResult = ''
        print 'init called'
        code.InteractiveInterpreter.__init__(self, localVars)

    def write(self, data):
        # since sys.stdout is probably redirected,
        # we can't use print
        sys.__stdout__.write('write called\n')
        self.runResult = data

    def runcode(cd):
        # redirecting stdout to our method write before calling code cd
        sys.stdout = self
        code.InteractiveInterpreter.runcode(self,cd)
        # redirecting back to normal stdout
        sys.stdout = sys.__stdout__ 
```

# excel - 在 excel/csv 文件中将 yy-yy 格式化为 yyyy-yyyy？

> ID：14659833
> 
> 赞同：1
> 
> 时间：2013-02-02T07:52:16.973
> 
> 标签：excel, csv, ms-office, openoffice.org

嗨，我有一个 excel 文件，它的年份列具有以下格式`yy-yy`和数千行。例如，

```
year
65-67
99-02
03-05 
```

现在我希望这个专栏是这样的

```
year
1965-1997
1999-2002
2003-2005 
```

可以用excel做吗？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T08:11:32.123

有点简单，但会完成这项工作：

```
=IF(VALUE(LEFT(A2,2))<=YEAR(TODAY())-2000,20,19)&LEFT(A2,2)&"-"&IF(VALUE(RIGHT(A2,2))<=YEAR(TODAY())-2000,20,19)&RIGHT(A2,2) 
```

放入 B2（假设第一个字符串在 A2 中）并自动填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T07:55:51.910

你能用`Text`. 但是鉴于您的情况，必须将日期和月份静态连接到年份。

```
Text("01/01/67","yyyy") 
```

或者

```
TEXT("Jan 67","yyyy") 
```

![在此处输入图像描述](../Images/f3dd6d1e8735dcf6907374e6e87fb00a.png)

参考：

> **Excel 如何解释 2 位数年份**
> 
> [为确保按预期解释年份值，请将年份值键入四位数字（2001，而不是 01）。通过输入四位数的年份，Excel 不会为您解释世纪。](http://office.microsoft.com/en-sg/excel-help/about-dates-and-date-systems-HP005200674.aspx)
> 
> **对于 Microsoft Windows 2000 或更高版本：**
> 
> 如果您使用的是 Microsoft Windows 2000 或更高版本，Windows 控制面板中的区域选项控制 Excel 如何解释两位数年份。
> 
> **对于作为文本值输入的日期：**
> 
> 当您输入日期作为文本值时，Excel 会按如下方式解释年份：
> 
> *   00 到 29 ：Excel 将两位数的年份值 00 到 29 解释为 2000 到 2029 年。例如，如果键入日期 5/28/19，Excel 假定日期为 2019 年 5 月 28 日。
>     
>     
> *   30 到 99 ：Excel 将两位数的年份值 30 到 99 解释为 1930 到 1999 年。例如，如果键入日期 5/28/98，Excel 假定日期是 1998 年 5 月 28 日。

# php - [function.move-uploaded-file]：无法打开流：没有这样的文件或目录

> ID：14659835
> 
> 赞同：1
> 
> 时间：2013-02-02T07:52:16.913
> 
> 标签：php, file-upload

我的代码在 WAMP 服务器中运行良好，没有任何警告。但是当我在我的服务器上上传相同的代码时，它会向我显示这些错误。

> [function.move-uploaded-file]：无法打开流：没有这样的文件或目录

我的 php 文件包含以下行。$ran 是系统生成的随机名称。我想隐藏文件名，所以我为此保留了随机函数。

> move_uploaded_file($_FILES['file']['tmp_name'], "users/jagdish/".$ran);

我还尝试了完整路径“/home/user/public_html/”，而不是只给出“users/”。

有两个错误。我的upload.php 位于/public_html/jagdish/upload/upload.php

> 警告：move_uploaded_file（/home/noyosdzy/public_html/jagdish/upload/users/jagdish/d406235ed72be6c41dbe2c00798a6e86fc28510f1359788762）[function.move-uploaded-file]：无法打开流：/home/noyosdzy/public_html/jagd 中没有这样的文件或目录/upload/upload.php 在第 118 行
> 
> 警告：move_uploaded_file() [function.move-uploaded-file]：无法将“/tmp/php3ww2M8”移动到“/home/noyosdzy/public_html/jagdish/upload/users/jagdish/d406235ed72be6c41dbe2c00798a6e86fc285_10f1359788762”在/home/htmlyono /jagdish/upload/upload.php 在第 118 行

我也尝试了不同的组合。但不起作用。它在 WAMP 上完美运行。但不能在我的网络服务器上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:35:43.487

我有一个类似的问题，但坦率地说，我的问题是文件名中的管道字符。请检查您的文件名是否有任何特殊字符。

# php - 为什么在运行此 PHP 代码时会出现解析错误？

> ID：14659836
> 
> 赞同：-5
> 
> 时间：2013-02-02T07:52:24.010
> 
> 标签：php

我是 PHP 编程新手。运行以下 PHP 代码生成 URL 时出现此错误。我使用 PHP 5.3.5。

> ( ! ) 解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING，在第 30 行的 C:\wamp\www\test\urlgen.php 中需要 '&' 或 T_VARIABLE

```
function bg_gen_secure_uri(
    'http://demo.com/abc/secure/movie/movie-full-film_256x144-150.mp4',
    'MqG9$fso2lt7(',
    $expiry = 0,
    $allowed_countries = '',
    $disallowed_countries = '',
    $allowed_ip = '',
    $allowed_useragent = '',
    $allowed_metros = '',
    $disallowed_metros = '', $progressive_start = '', $progressive_end = '',
    $extra_params = '' )
{
      return $url;
} 
```

如果能得到答复，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:58:54.747

为什么要给两个常量作为参数？

```
'http://demo.com/abc/secure/movie/movie-full-film_256x144-150.mp4','MqG9$fso2lt7(', 
```

那部分是错误的。使用某物进行赋值，可能是这样的：

```
<?php
    function bg_gen_secure_uri($p1 = 'http://demo.com/abc/secure/movie/movie-full-film_256x144-150.mp4', $p2 = 'MqG9$fso2lt7(', $expiry = 0, $allowed_countries = '',$disallowed_countries = '', $allowed_ip = '', $allowed_useragent = '',
    $allowed_metros = '',
    $disallowed_metros = '', $progressive_start = '', $progressive_end = '',
    $extra_params = '')

    {

     return $url;
    }
?> 
```

而且没有`<php>`标签。删除那个！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T07:59:03.060

您的函数参数必须是变量，对于默认值，您必须像这样使用：

```
<?php
function bg_gen_secure_uri (
$ca='http://demo.com/abc/secure/movie/movie-full-film_256x144-150.mp4',
$b='MqG9$fso2lt7(', 
$expiry = 0, 
$allowed_countries = '',
$disallowed_countries = '', 
$allowed_ip = '', 
$allowed_useragent = '',
$allowed_metros = '',
$disallowed_metros = '', 
$progressive_start = '', 
$progressive_end = '',
$extra_params = ''
)

{

 return $url;

}
echo bg_gen_secure_uri();
?> 
```

# java - in.next() 在做什么？

> ID：14659838
> 
> 赞同：0
> 
> 时间：2013-02-02T07:52:44.863
> 
> 标签：java, io, java.util.scanner

> 我正在使用 Scanner 类来获取输入。我正在尝试使用 in.next() 将所有单词放在一行中。我知道可以使用 nextLine() 来完成，但我想了解 in.next() 和 in.hasNext() 的工作原理。

```
System.out.println("What is designation");
        String desg = in.next();      
        while(in.hasNext()){
            desg+=in.next();      
        } 
```

给出 put 作为

```
What is designation
member technical staff\n
^Z
Hello abhishek kumarNext year you will be 22Salary is 30000.0Designation is membertechnicalstaff 
```

但如果我使用

```
System.out.println("What is designation");
        String desg = in.next();      
        if(in.hasNext()){
            desg+=in.next();      
        } 
```

它给出的输出为

```
What is designation
member technical staff
Hello abhishek kumarNext year you will be 22Salary is 44254.0Designation is membertechnical 
```

> 在第一种情况下，我得到了所有单词，但它一直要求下一个输入，我必须使用 CTRL+Z 指定输入结束。但在第二种情况下，我没有得到最后一句话（员工）。请解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T07:57:02.720

第一个代码`while`循环读取输入 - 即直到找到`in.hasNext() == false`.

第二个代码使用`if`条件 - 它`in.next()`最多读取一次（在初始读取之后）。

因此，与第二个代码快照不同，第二个代码不是“等待新输入”，因为它只请求`in.next()`一次，并且直到输入用尽为止。

* * *

PS 请注意，该行`String desg = in.next();`（在第一个代码快照中）是一种不好的做法，原因有两个：

1.  空输入将失败。
2.  它是与 while 循环内容的代码重复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T07:57:53.990

它不是关于`in.next()`问题的问题是使用`if`它只执行一次并且`next()`它只**返回下一个令牌**

所以在第二种情况下：（`if`一）当您 在此部分输入**成员技术人员**`String desg = in.next();`时： 仅`member`分配给`desg` 它并在它输入`if`之后检查下一个令牌（这是**技术**）并将其与前一个字符串连接，`desg+=in.next()` 所以现在`desg`变成`membertechnical`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T07:54:26.543

如果您想了解有关 API 中的类的更多详细信息，javadoc 是最好的来源。这是[Scanner 的 javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)。

```
public String next() 
```

> 从此扫描器中查找并返回下一个完整的令牌。一个完整的标记前后是匹配分隔符模式的输入。此方法可能会在等待输入扫描时阻塞，即使先前调用 hasNext() 返回 true。

# python - 从任何地方执行 python 脚本

> ID：14659839
> 
> 赞同：1
> 
> 时间：2013-02-02T07:52:49.387
> 
> 标签：python, linux, bash

我想在路径中添加一些 python 脚本。

我可以将 bash 脚本添加到路径中的文件夹中，然后从任何地方执行它们。当我使用 python 脚本执行此操作时，我只能在同一目录中执行它们。

例如，如果我将 test 和 test2.py 放在路径中的同一文件夹中。

这项工作：

> ```
> sh test
> success hello world 
> ```

这不会：

> ```
> python test.2.py
> python: can't open file 'test2.py': [Errno 2] No such file or directory
> [Errno 2] No such file or directory 
> ```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T07:59:02.893

假设 python 源文件位于路径上的目录中，请执行以下操作：

1.  将此行添加到 python 文件的顶部：`#!/usr/bin/env python`
2.  将您的 python 文件设置为可执行：`chmod +x test.2.py`
3.  使用以下命令运行您的 python 脚本：`test.2.py`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T07:58:42.860

该`python`命令不会像搜索`$PATH`脚本一样搜索脚本`bash`。

使`test.2.py`可执行文件，并使第一行：

```
#!/usr/bin/python 
```

然后通过键入以下命令运行它：

```
test.2.py 
```

# c# - 删除 WPF 按钮的鼠标悬停效果

> ID：14659844
> 
> 赞同：0
> 
> 时间：2013-02-02T07:53:21.120
> 
> 标签：c#, wpf, xaml, wpf-controls, mouseover

我找不到这个问题的简单答案。

我`Button`在 WPF 中创建了一个并给它一个背景图像。首先我的问题是边界，但后来我能够删除它

```
Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" 
```

现在的问题是windows`MouseOver`效果是可见的。有没有简单的方法可以去除？我试图`Value`用`Image`. 它有效，但我无法`Text`在按钮上设置了。

```
<Button x:Name="gameBtnAnswer1" Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}" Cursor="Hand" Padding="-4" Margin="0,0,18,0" Height="38" Width="336" HorizontalAlignment="Left" FontSize="16" Foreground="White" Click="gameBtnAnswer1_Click" BorderThickness="0" Focusable="False">
    <Button.Background>
        <ImageBrush ImageSource="themes/blue/button_answer.png" Stretch="None" TileMode="Tile"/>
    </Button.Background>
    <Button.Content>
        Hier steht die Antwort #1
    </Button.Content>
</Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:56:48.387

我认为最好的方法是重新定义按钮 ControlTemplate。 [这里是 msdn 文档](http://msdn.microsoft.com/en-us/library/ms753328%28v=vs.85%29.aspx)。

没有触发器的示例模板：

```
<Style TargetType="Button">
  <Setter Property="SnapsToDevicePixels" Value="true"/>
  <Setter Property="OverridesDefaultStyle" Value="true"/>
  <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
  <Setter Property="MinHeight" Value="23"/>
  <Setter Property="MinWidth" Value="75"/>
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="Button">
        <Border 
          x:Name="Border"  
          CornerRadius="2" 
          BorderThickness="1"
          Background="{StaticResource NormalBrush}"
          BorderBrush="{StaticResource NormalBorderBrush}">
          <ContentPresenter 
            Margin="2"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            RecognizesAccessKey="True"/>
        </Border>
        <ControlTemplate.Triggers>

        </ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:56:45.120

首先想到的是重新设计按钮的模板。在模板中，您将看到具有很多状态的 VisualStateManager 类。其中一种状态是 MouseOver。在那个 MouseOver 声明中，你可以放任何你想要的东西，使 Button 看起来像你喜欢的样子。例如，该 VisualStateManager 中还应该有一些默认的视觉状态，因此您可以将声明从默认视觉状态复制到鼠标悬停视觉状态，它们将是相同的。

# google-drive-api - 线程“主”com.google.api.client.http.HttpResponseException 中的异常：403 Forbidden

> ID：14659845
> 
> 赞同：2
> 
> 时间：2013-02-02T07:53:22.507
> 
> 标签：google-drive-api

我已经运行了您在 google qiuck start to upload File 上给出的代码，现在当它运行时，它给了我这个错误，请帮助我。

```
Exception in thread "main" com.google.api.client.http.HttpResponseException: 403 Forbidden
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "accessNotConfigured",
    "message": "Access Not Configured"
   }
  ],
  "code": 403,
  "message": "Access Not Configured"
 }
}

    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:978)
    at com.google.api.client.googleapis.media.MediaHttpUploader.executeUploadInitiation(MediaHttpUploader.java:338)
    at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:252)
    at com.google.api.services.drive.Drive$Files$Insert.executeUnparsed(Drive.java:309)
    at com.google.api.services.drive.Drive$Files$Insert.execute(Drive.java:331) 
```

# android - 如何以编程方式打开和关闭键盘的预测文本选项

> ID：14659846
> 
> 赞同：1
> 
> 时间：2013-02-02T07:53:27.720
> 
> 标签：android

我只想在活动创建时打开预测文本选项，在活动销毁时关闭

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T07:57:48.477

我认为预测文本输入是输入对象的参数。因此，当您在开始编辑文本时调用输入对象时，可以给它一个参数 : `text|textNoSuggestions`，这样键盘就不会显示建议。

```
setInputType(text|textNoSuggestions) 
```

# oauth - 什么是 Flickr API 用于下载图片或图片的 URL

> ID：14659852
> 
> 赞同：7
> 
> 时间：2013-02-02T07:54:48.100
> 
> 标签：oauth, flickr

我想使用闪烁 API 从 Flickr 下载图片。我正在使用 OAuth 进行身份验证。

当我在网站上搜索时，我得到了一个名为[flickr.photos.getInfo](http://www.flickr.com/services/api/flickr.photos.getInfo.html)的 API 。但它只给出了图片所属页面的路径。

谁能告诉我在哪里可以获得 API 来获取图像的实际路径？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-02T08:29:54.447

哦，我得到了答案。

API 函数称为[flickr.photos.getSizes](http://www.flickr.com/services/api/flickr.photos.getSizes.html)。

非常混乱的名字。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T17:51:05.547

您可以通过在适当的 get 方法的 extras 字段中请求它们来获取 url，作为每个 getter 方法的文档的一部分列出。

对于示例搜索，请使用此表单[http://www.flickr.com/services/api/explore/flickr.photos.getRecent](http://www.flickr.com/services/api/explore/flickr.photos.getRecent)并将 extras 字段设置为：

> url_sq, url_t, url_s, url_q, url_m, url_n, url_z, url_c, url_l, url_o

PS。我会包括直接链接，但目前仅限于每个帖子一个链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T01:46:37.030

使用 flickr.photos.getSizes API。当您调用该方法时，您将获得该图片的链接（可提供不同尺寸）

使用该链接下载。

# python - Django 设置——无法导入 unipath

> ID：14659855
> 
> 赞同：0
> 
> 时间：2013-02-02T07:55:07.997
> 
> 标签：python, django, settings

我无法弄清楚我做错了什么。请你帮助我好吗？我有以下目录结构：

```
project-repository
  \-- my-project
       \--manage.py
       \--my-project
             \--__init__.py
             \--urls.py
             \--wsgi.py
             \--settings
                    \--__init__.py
                    \--local.py
                    \--base.py 
```

在`local.py`我导入`base.py`. 在`base.py`我有`from unipath import Path`. 当我尝试运行`django-admin shell --settings=my-project.settings.local`时，它向我显示一个错误：

```
Error: Could not import settings 'my-project.settings.local' (Is it on sys.path?): No module named unipath 
```

当我这样做时`pip freeze`，它告诉我：

```
Unipath==0.2.1 
```

我可以很容易地在 python 控制台中导入它。我也有`project-repository`和`my-project`在 PYTHONPATH 上。

这是`unipath.__file__`输出：

```
/home/User/.virtualenvs/django.1.4/local/lib/python2.7/site-packages/unipath/__init__.pyc 
```

这是`sys.path`输出中的一行：

```
/home/User/.virtualenvs/django.1.4/local/lib/python2.7/site-packages 
```

你能指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:00:12.923

似乎我发现了问题所在。我的想法是我做了很多乱七八糟的事情。我在全球范围内安装了 django 和其他应用程序（早在我开始开发项目之前）。然后我安装了 virtualenvwrapper 并创建了 virtualenv。在 virtualenv 中工作，我安装了所需的依赖项和 django。但是当我试图运行它时，我运行了全局安装的 django 版本。结果出现了一些不兼容。卸载全局包后，一切正常。

我是怎么想出来的？非常感谢 Jeff Knup 和他的文章[以正确的方式启动 Django 1.4 项目](http://www.jeffknupp.com/blog/2012/10/24/starting-a-django-14-project-the-right-way/)。我走过了描述的步骤，当我跑

```
(my-virtualenv)$ which django-admin.py 
```

它向我展示了以下路径：

```
/usr/local/bin/django-admin 
```

虽然它应该有：

```
$HOME/.virtualenvs/ 
```

那是有问题的迹象。

非常感谢大家试图帮助我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:42:44.407

将文件添加`__init__.py`到设置目录

# sql - 用于获取存储在单个表中的 n 级父子关系的 Postgresql 查询

> ID：14659856
> 
> 赞同：25
> 
> 时间：2013-02-02T07:55:14.480
> 
> 标签：sql, postgresql, recursion, database

我有一个表表示父子关系。关系可以深入到 n 级。

我使用以下查询创建了一个示例表：

```
CREATE SEQUENCE relations_rel_id_seq
    INCREMENT BY 1
    NO MAXVALUE
    NO MINVALUE
    CACHE 1;
CREATE TABLE relations(
    rel_id bigint DEFAULT nextval('relations_rel_id_seq'::regclass) NOT NULL PRIMARY KEY,
    rel_name text,
    rel_display text,
    rel_parent bigint
); 
```

[SQLFiddle](http://sqlfiddle.com/#!11/59319/1)

我需要查询表并分层显示父子关系。我仍然不知道如何使用 sql 查询来查询 n 级深度。

对于 sqlfiddle，例如，预期的输出层次结构：

```
rel1
    rel11
        rel111
        rel112
            rel1121
rel2
    rel21
        rel211
        rel212 
```

**注意：**值 n, in`n-level`是未知的。

**数据库设计：**

> 有没有更好的方法可以在数据库中表达这种关系以便于查询。？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-02T16:53:03.047

使用 Postgres，您可以使用递归公用表表达式：

```
with recursive rel_tree as (
   select rel_id, rel_name, rel_parent, 1 as level, array[rel_id] as path_info
   from relations 
   where rel_parent is null
   union all
   select c.rel_id, rpad(' ', p.level * 2) || c.rel_name, c.rel_parent, p.level + 1, p.path_info||c.rel_id
   from relations c
     join rel_tree p on c.rel_parent = p.rel_id
)
select rel_id, rel_name
from rel_tree
order by path_info; 
```

SQLFiddle 基于您的示例：[http ://sqlfiddle.com/#!11/59319/19](http://sqlfiddle.com/#!11/59319/19)

（我用下划线替换了缩进的空格，因为 SQLFiddle 不能正确显示空格）

# c - Qt中的字符串到C数组/结构

> ID：14659862
> 
> 赞同：0
> 
> 时间：2013-02-02T07:56:05.230
> 
> 标签：c, arrays, string, qt, struct

我有一个日志文件，其中包含记录的数据和报告。在我的 Qt 项目中，我需要解析日志文件并收集数据和报告。然后将收集到的数据分配给 C 数组和结构。由于缺乏 Qt String 类的经验，这对我来说似乎很复杂。有人可以指导我一些参考代码或文件吗？

以下是日志文件内容的示例。

```
***************************FrameCounter: 138
Data Begin
/*       0     1     2     3     4     5     6     7     8     9    10    11 */
/* 0*/   0,    0,   -1,    0,    1,   -2,    4,    0,   -1,    4,    0,   -5, 
/* 1*/   1,   -1,    6,    2,    2,    0,    1,   -3,   -2,    3,    0,   -2, 
/* 2*/   1,    1,    5,    2,    4,    2,    1,    5,   -1,   -2,   -2,   -4, 
/* 3*/   1,  -16,  -46,  -87,  -99,  -48,   -5,    6,    4,  -10,    1,    1, 
/* 4*/  21,   -2,   -1,   -3,  -27,  -12,   -3,    8,   -1,   -5,   -4,    1, 
/* 5*/  66,  213,  120,   38,   -1,   -9,  -10,   -7,  -15,  -13,   -4,    1, 
/* 6*/ 308, 1847,  921,   32,   -1,   -2,  -45,  -88, -102,  -76,   -3,    1, 
/* 7*/ 137, 1263,  674,   31,   -8,   -1,  -24,  -58,  -87,  -77,  -15,    1, 
/* 8*/   5,   39,   42,   25,  -17,    1,   -1,  -26,  -35,  -42,  -19,    0, 
/* 9*/  -7,  -10,    4,   -2,  -24,    2,   44,   53,    7,   -2,  -10,   -7, 
/*10*/ -35,  -78,  -97,  -58,  -57,    1,  672, 1250,  150,  -21,  -31,  -27, 
/*11*/ -37, -122, -127, -132,    0,    4,  972, 1659,  224,  -24,  -13,  -27, 
/*12*/  -1,  -14,  -14,  -28,  -28,   30,   80,  150,   53,   18,  -19,  -32, 
/*13*/  -1,   34,  738,  516,  -22,   13,    1,   -6,  152,  120,   -1,  -25, 
/*14*/ -15,  118, 1761, 1137,   35,    1,  -87,  -55, 1593, 1082,   -1,  -22, 
/*15*/   1,    2,  341,  229,   15,    1,  -27,   -5,  839,  685,    4,    0, 
/*16*/   4,    1,   -1,  -21,  -32,  -19,  -13,  -15,   27,    2,  -34,   -3, 
/*17*/   2,   -1,  -19,  -62,  -81,  -49,   -7,   -1,   -1,  -43,  -46,   -1, 
/*18*/   1,   13,    5,  -18,  -57,  -49,  -13,    3,   11,  -19,  -37,   -3, 
/*19*/   4,   12,   18,   -1,  -32,  -33,   -1,   11,   16,    8,    1,    3, 
/*20*/   0,    5,   18,    3,  -13,  -16,    1,   11,   14,    9,    5,    1, 
/*21*/   2,   13,   26,   12,    2,   -3,    3,    8,   15,    7,    3,    1, 
Data End

Report Begin
TouchNum = 4
Unit[0].x = 109
Unit[0].y = 148
Unit[0].Flag = 0
Unit[0].Id = 0
Unit[0].z = 255
Unit[0].Type = 152
Unit[1].x = 452
Unit[1].y = 242
Unit[1].Flag = 0
Unit[1].Id = 3
Unit[1].z = 255
Unit[1].Type = 152
Unit[2].x = 179
Unit[2].y = 313
Unit[2].Flag = 0
Unit[2].Id = 2
Unit[2].z = 255
Unit[2].Type = 152
Unit[3].x = 557
Unit[3].y = 322
Unit[3].Flag = 0
Unit[3].Id = 1
Unit[3].z = 255
Unit[3].Type = 152
Report End 
```

# sql - 在房间可用性子查询中选择房间类型

> ID：14659870
> 
> 赞同：1
> 
> 时间：2013-02-02T07:57:04.450
> 
> 标签：sql

餐桌预留

*   Reserve_id
*   roominv_id
*   切金
*   退出
*   状态（已保留、已取消、待定）

桌房存货

*   roominv_id
*   room_id
*   房间号
*   房间状态（可用，不可用）

桌房

*   room_id
*   房型

我正在做一个房间预订系统。

我已经查询了房间的可用日期：

```
SELECT r.roominv_id,r.room_id 
FROM roominventory r
WHERE r.roominv_id
NOT IN 
(SELECT b.roominv_id
FROM reserve b
WHERE NOT (b.chckout < '$chckin'
OR
b.chckin > '$chckout')) 
```

我的问题是，我将在查询中的哪里插入条件，我可以在哪里选择特定的房间类型，具体取决于房间的可用性。

我知道它就像`room.room_type LIKE '%$roomtype%'`，但我不知道我将在查询的哪一部分插入它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:13:07.477

这是使用`LEFT JOIN`和检查的另一种方法`NULL`：

```
SELECT 
  r.roominv_id, 
  r.room_id 
FROM roominventory AS r
    INNER JOIN room AS m ON m.room_id = r.room_id
    LEFT JOIN reserve res ON r.roominv_id = res.roominv_id AND
               NOT (b.chckout < '$chckin' OR b.chckin > '$chckout')
WHERE m.room_type LIKE '%$roomtype%' 
    AND res.roominv_id IS NULL 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T08:07:16.587

你可以`JOIN`这样的表`room`：

```
SELECT 
  r.roominv_id, 
  r.room_id 
FROM roominventory AS r
INNER JOIN room AS m ON m.room_id = r.room_id
WHERE m.room_type LIKE '%$roomtype%'
  AND r.roominv_id NOT IN (SELECT b.roominv_id
                           FROM reserve b
                           WHERE NOT (b.chckout < '$chckin'
                                      OR 
                                      b.chckin > '$chckout')); 
```

# python - 使用基本列表中键的索引位置对字典进行排序

> ID：14659872
> 
> 赞同：0
> 
> 时间：2013-02-02T07:57:51.083
> 
> 标签：python, list, sorting, dictionary

我有一个基本清单

```
li = ['fca', 'fc_add', 'fca_2', 'fcadd_2', 'Red_Exis', 'G_Exis', 'P_Exis', 'fam_1'] 
```

并想使用列表中项目的索引位置对以下字典进行排序

其中列表项是键。

```
dic = {'G_Exis': 'abc', 'fca': '210Y', 'Red_Exis': 107, 'fc_add': '999 Des ST.'} 
```

我需要最终排序的字典如下所示：

```
fin_dic = {'fca': '210Y', 'fc_add': '999 Des ST.', 'Red_Exis': 107, 'G_Exis': 'abc'} 
```

提前感谢一堆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:05:01.963

字典不保持秩序，使用`collections.OrderedDict`：

```
from collections import OrderedDict
od = OrderedDict()

for item in li:
    if item in dic:
        od[item] = dic[item]
print od

OrderedDict([('fca', '210Y'), ('fc_add', '999 Des ST.'), ('Red_Exis', 107),
             ('G_Exis', 'abc')]) 
```

或作为单线：

```
OrderedDict(sorted(dic.items(), key=lambda t: li.index(t[0]))) 
```

# java - 是否可以为 html 中的两个不同元素分配相同的属性（bean 属性）？

> ID：14659876
> 
> 赞同：0
> 
> 时间：2013-02-02T07:58:27.460
> 
> 标签：java, javascript, html, jsp, struts

我有一个文本框和一个下拉框。这两个元素是否可以具有相同的属性？例如，我有一个名为“NonIndianStates”的文本框和一个名为“IndianStates”的下拉框。

是否可以为这两个元素拥有一个名为“states”的 bean 属性？我试过这个，但是bean属性被分配了与元素关联的值，该值首先出现在HTML中，第二个元素的值没有被考虑在内......

# java - 如果我在同一个包中有许多活动，那么在 AndroidManifest 中需要进行哪些更改？

> ID：14659886
> 
> 赞同：-1
> 
> 时间：2013-02-02T07:59:04.637
> 
> 标签：java, android, xml, eclipse, android-alarms

我使用警报意图设置警报

**代码 ：**

```
 Intent i = new Intent(AlarmClock.ACTION_SET_ALARM); 
              i.putExtra(AlarmClock.EXTRA_MESSAGE, meet); 
              i.putExtra(AlarmClock.EXTRA_HOUR, hour); 
              i.putExtra(AlarmClock.EXTRA_MINUTES, min); 
              startActivity(i); 
```

由于我已经从我的应用程序中选择了时间、日期和消息，因此我不想在警报应用程序中进行任何更改，因为此意图已被触发。

每次设置闹钟时，我都必须按**OK按钮。**

这是屏幕截图[http://www.mediafire.com/view/jd97i9xevpid829/alam.bmp](http://www.mediafire.com/view/jd97i9xevpid829/alam.bmp) 我不想弹出这个屏幕，然后一次又一次地按下 ok 按钮。我该怎么办>？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:08:00.297

这是给你最好的答案>>[开始Android/Training上的开发](http://developer.android.com/training/index.html)

# eclipse - m2e-wtp 错误： /target/m2e-wtp/web-resources/META-INF/MANIFEST.MF（没有这样的文件或目录）

> ID：14659891
> 
> 赞同：70
> 
> 时间：2013-02-02T07:59:50.330
> 
> 标签：eclipse, m2e

我使用 m2e 1.2.0 和 m2e-wtp 0.16.0，有时我的 Eclipse 构建失败并出现错误：

```
<path>/target/m2e-wtp/web-resources/META-INF/MANIFEST.MF (No such file or directory) 
```

做 a 可以暂时解决问题`Maven->Update project...`，但过一会又会出现错误。不知道触发器到底是什么......

有关如何永久解决此问题的任何建议？

[编辑] 我发现当我直接使用 Maven 命令行在外部构建项目时触发了该问题。这将删除 m2e-wtp 生成的默认 MANIFEST.MF，并且它显然不会重新生成，直到您在 Eclipse 中进行重建。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-06-03T07:17:59.370

**Luna 之前的 Eclipse 版本**

我不确定这是否是最好的做法，但我按照 [此处](http://wiki.eclipse.org/M2E-WTP_FAQ)提到的关于摆脱自动生成的 Web 资源文件夹的说明进行操作，这似乎也解决了缺少 MANIFEST.MF 的问题：

> *   仅在您的项目上：右键单击项目> Properties > Maven > WTP：选中“启用项目特定设置”并取消选中“Maven Archiver 在构建目录下生成文件”
> *   在整个工作区：Window > Preferences > Maven > WTP：取消选中“Maven Archiver 在构建目录下生成文件”

当我们真正想要打包/构建项目时，我们实际上生成清单条目作为 maven-war-plugin 的一部分，但我不认为 m2e-wtp 使用它。无论如何，在 m2e-wtp 为在 Eclipse 中使用而创建的构建中，清单文件与我们无关。

**Eclipse Luna 及更高版本**

对于 Eclipse Luna，你必须去：

> Preferences > Maven > Java EE Integration 并取消选中“Maven Archiver 在构建目录下生成文件”。

Eclipse Luna 在项目属性和 WTP 部分没有路径

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-03-28T07:31:13.553

该解决方案对我有用右键单击项目->属性-> Maven-> Java EE集成->选中启用项目特定设置并禁用Maven归档器生成文件

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-11-12T04:49:19.247

尝试选择您的项目，并使用菜单清理它：

项目>清洁

然后刷新你的 pom.xml。这对我有用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-06T06:12:49.857

尝试 Eclipse -> 项目 -> 清理

然后右键单击您的项目->团队->共享项目-> SVN->选择您的svn并确定

一切都应该解决

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-12-19T11:38:47.877

右键单击您的项目，转到属性，然后转到项目方面，现在转到右侧的运行时选项卡并选择服务器并单击应用，错误消息将消失。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-01T13:48:53.530

在您的 pom.xml 文件中检查以下内容，

```
<build>
<finalName>Write a file name which is Your Maven Buid Name</finalName>
</build> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-03-03T18:08:00.267

1.  转到 pom.xml
2.  **Ctrl+a**然后**Ctrl+x**然后**Ctrl+s**然后**Ctrl+v**然后**Ctrl+s**
3.  右键单击项目。Maven -> 更新项目

这为我解决了。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-18T07:31:24.417

**当我们尝试使用 mvn clean** install进行 maven 构建时 manifest.mf 被破坏。如果我们不想破坏 manifest.mf 文件，只需在命令提示符下输入命令 mvn install 即可。

如果我们错过了 manifest.mf 文件，我们可以通过取消选中并检查 maven - JAVA EE 集成中的“Maven 归档器在构建目录下生成文件”选项来生成，如你所说。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-06-25T19:35:10.733

清理所有项目将解决此问题。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-02-27T04:35:52.010

> **右键单击项目>属性> maven>更新项目>选择最后三个选项>单击确定**

完毕。它对我有用

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-12-25T06:06:42.337

将 manen 替换为外部安装为我解决了这个问题。
Window -> Preferences -> [search maven in the search box] -> Installation 添加完整的外部 maven 安装并选中其复选框。应用并重新启动。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-28T09:54:33.900

清理项目并没有解决问题，在构建路径中添加了 2 个外部 jar，将它们删除并将它们移动到 pom.xml 中确实为我解决了这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-10-06T05:43:01.407

我使用 eclipse Luna 并发现启用项目特定设置无用。最后在项目.settings中找到配置文件org.eclipse.m2e.wtp.prefs，修改配置“org.eclipse.m2e.wtp.enableM2eWtp=true”。它在 Maven 构建项目后工作。希望这对遇到与我相同情况的人有所帮助。:D

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-12-16T13:44:43.230

对于 Marte Eclipse：

转到：窗口 > 首选项 > Marven > Java EE 集成

取消选中 Marven Archiver 在构建目录下生成文件。

其作品

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-06-07T04:14:05.143

为了确保资源被正确刷新，当 maven 清理目标时，您可以设置 maven build 以自动刷新项目 + 目标文件夹等。

[选中自动刷新 Maven 构建中的资源的选项](https://i.stack.imgur.com/ik8Ar.png)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-11-28T13:42:32.773

在我的情况下（Eclipse Neon），我启用了***Maven Archiver 在构建目录下生成文件***

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2013-02-02T08:08:33.260

m2e-wtp 插件可能会在 /target/m2e-wtp/web-resources/META-INF 文件夹中生成一个几乎空的 MANIFEST.MF，无论您将真正的 MANIFEST.MF 放在哪里，请查看 Virgo 的管理控制台。只需浏览捆绑包的“捆绑包”类别。您将看到哪些包正在被导入和导出 FOR REAL。

因此，您可以将 MANIFEST.MF 复制到 /$VIRGO_BASE/stage/$BUNDLE_WEBAPP/META-INF 目录，然后在 Eclipse 的服务器视图中点击“重新部署”。

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2014-07-28T13:50:09.240

就在上面一行的下方，我收到了一条附加信息，上面写着“不同步”我只运行了项目清理“我的项目”和宾果游戏，它对我有用..

# html - 当我缩小窗口时，我的网页导航开始流入更多行

> ID：14659900
> 
> 赞同：1
> 
> 时间：2013-02-02T08:01:18.253
> 
> 标签：html, css

我对这一切都很陌生，所以无论我把窗户做得有多小，我如何制作所有东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:04:50.877

使用百分比开始编码宽度和高度，例如

```
width:100% or Height="45%" 
```

这将根据窗口大小呈现大小

# java - 使用瞬态字段序列化时出现异常

> ID：14659902
> 
> 赞同：1
> 
> 时间：2013-02-02T08:01:37.133
> 
> 标签：java, serialization

我有一些用于存储应用程序状态的类。我需要在文件中/从文件中序列化和反序列化它。它没有问题。现在我向它添加了一个新的瞬态字段，当然，我不会反序列化我的旧文件。我删除了这个新的瞬态字段，以便能够打开旧文件，但我不能再这样做了！我得到以下异常：

com.qqer.fuzzy.app.ApplicationCurrentState；本地类不兼容：流classdesc serialVersionUID = 6313827182653283573，本地类serialVersionUID = 1

我该如何解决？我以为我可以删除所有新字段，一切都会好起来的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:05:41.407

将您的 serialVersionUID 静态字段的值从 1 更改为 6313827182653283573，因为这是您序列化对象时的值。

这将使反序列化对象成为可能，前提是该类仍然具有与序列化它时完全相同的非瞬态字段（这不可能是真的，因为您从那时起引入或更改了 serialVersionUID 字段并忘记了它） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:04:43.190

您将帮助 `serialver`为所有旧课程设置新版本，一切都会好起来的

# asp.net-mvc - 我的 __MigrationHistory 表没有隐藏。EF Code-First 是否已禁用？

> ID：14659909
> 
> 赞同：0
> 
> 时间：2013-02-02T08:01:54.477
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, appharbor, entity-framework-migrations

我一直在阅读并开始使用 Entity Framework Code-First。它在我的本地机器（DefaultConnection）上运行良好，但它似乎已经停止在我的生产服务器上运行（来自 AppHarbor 的 SQL Server 插件）。

我注意到的一件事是 __MigrationHistory 文件夹没有作为系统表隐藏。

![截屏](../Images/6509f138f35295e1b05b3133e5e148cf.png)

我一直在使用[AppHarbor 的博客上](http://blog.appharbor.com/2012/04/24/automatic-migrations-with-entity-framework-4-3)描述的自动迁移方法。
这是我的 DatabaseContext 类：

```
 public class DatabaseContext : DbContext {
      public DatabaseContext() : base("DefaultConnection") { }
      public DbSet<UserProfile> UserProfiles { get; set; }
      public DbSet<Challenge> Challenges { get; set; }
      public DbSet<Feedback> Feedbacks { get; set; }

      protected override void OnModelCreating(DbModelBuilder modelBuilder) {
          Database.SetInitializer(new MigrateDatabaseToLatestVersion<DatabaseContext, Configuration>());
      }
  } 
```

我想让代码优先在 appharbor 数据库上再次工作。有没有办法重新启用它，或者我应该删除所有生成的迁移类和 __MigrationHistory 并通过临时更改`OnModelCreating`构造函数以使用`DropCreateDatabaseAlways`初始化程序来重新创建数据库？重置迁移并从当前编写的代码开始它们的更好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T00:35:59.613

不久前，当我想使用现有生产系统实施迁移时，我遇到了这个问题。您可以使用以下 T-SQL 命令在 __MigrationHistory 表上设置 is_ms_shipped 标志。

```
EXEC sys.sp_MS_marksystemobject __MigrationHistory 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T09:41:21.587

Code First Migrations 只是在寻找一个名为 __MigrationHistory 的表。它不关心它是否被标记为系统表。

在您所指的指南中，他们使用的是 SQL Server CE，如果您使用的是该提供程序，Code First 将永远不会将其标记为系统表。

在您的开发机器上，您可能正在使用不同版本的 SQL Server，因此您将其视为系统表。

在某些数据库中它被标记为系统表的原因只是为了隐藏它。迁移不需要它是系统表才能工作。

[您可以在 Entity Framework 团队的 Arthur Vickers 的这篇](http://blog.oneunicorn.com/2012/02/27/code-first-migrations-making-__migrationhistory-not-a-system-table/)博文中阅读更多内容，他在其中展示了如何使 __MigrationHistory 成为 Sql Server 上的非系统表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T12:21:06.783

请参阅 Julie Lerman 的这篇文章：[http](http://thedatafarm.com/blog/data-access/using-ef-migrations-with-an-existing-database/) ://thedatafarm.com/blog/data-access/using-ef-migrations-with-an-existing-database/。这不完全是您所描述的，但可能是“获取迁移历史表到现有数据库”部分可以帮助您

# ios - 在 Windows 上从命令行自动部署 iOS

> ID：14659915
> 
> 赞同：1
> 
> 时间：2013-02-02T08:02:35.080
> 
> 标签：ios, windows, automation

我正在使用[iPhone 配置实用程序](http://support.apple.com/kb/DL1466)将 .ipa 文件从 Windows 部署到 iOS 设备。

但是，我经常重新部署，完成这些步骤几乎需要一分钟：添加应用程序，向下滚动文件类型菜单以选择 ipa，等待，按是覆盖现有应用程序，按安装。

有没有办法从命令行自动执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-16T21:34:00.020

您可以查看作为[imobiledevice](http://quamotion.mobi/iMobileDevice/Article/ideviceinstaller)一部分的 ideviceinstaller。

ideviceinstaller 的 Windows 版本可在此处获得：http: [//quamotion.mobi/iMobileDevice/Download](http://quamotion.mobi/iMobileDevice/Download)

希望能帮助到你

# python - Python 导入类 Stack

> ID：14659916
> 
> 赞同：2
> 
> 时间：2013-02-02T08:02:56.993
> 
> 标签：python

在 util.py

```
class Stack:
  "A container with a last-in-first-out (LIFO) queuing policy."
  def __init__(self):
    self.list = []

  def push(self,item):
    "Push 'item' onto the stack"
    self.list.append(item)

  def pop(self):
    "Pop the most recently pushed item from the stack"
    return self.list.pop()

  def isEmpty(self):
    "Returns true if the stack is empty"
    return len(self.list) == 0 
```

在游戏.py

```
class Directions:
  NORTH = 'North'
  SOUTH = 'South'
  EAST = 'East'
  WEST = 'West'
  STOP = 'Stop'

  LEFT =       {NORTH: WEST,
                 SOUTH: EAST,
                 EAST:  NORTH,
                 WEST:  SOUTH,
                 STOP:  STOP}

  RIGHT =      dict([(y,x) for x, y in LEFT.items()])

  REVERSE = {NORTH: SOUTH,
             SOUTH: NORTH,
             EAST: WEST,
             WEST: EAST,
             STOP: STOP} 
```

在搜索.py

```
 from game import Directions
  s = Directions.SOUTH
  w = Directions.WEST
  e = Directions.EAST
  n = Directions.NORTH

  from util import Stack
  stack = Stack
  stack.push(w) 
```

我在 stack.push(w) 中收到错误说“TypeError: unbound method push() must be called with Stack instance as first argument (got str instance)”

这到底是什么意思？我不能推w？如果是这样，我该怎么做才能将 w 推入堆栈？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T08:08:35.507

你必须`Stack`正确初始化，我猜你忘记了括号：

```
stack = Stack() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T08:15:30.393

我认为问题出在上一行 `stack = Stack` 应该替换为 `stack = Stack()`

# eclipse - 与存储库同步时 Eclipse 强制关闭

> ID：14659918
> 
> 赞同：1
> 
> 时间：2013-02-02T08:03:09.167
> 
> 标签：eclipse, svn, eclipse-plugin, tortoisesvn

我遇到了一个奇怪的问题，`eclipse.exe`当我与 SVN 存储库同步时，我的部队关闭了（它消失了！任务管理器上没有进程）。

这里是背景，

今天早上我尝试在我的本地副本（来自 SVN 存储库）上执行“更新到 HEAD”操作。在此期间，更新操作失败说（更新失败，内部错误 68）

在此之后，每当我尝试将我的本地副本与 SVN 存储库同步时，一段时间后我的 eclipse.exe 进程就会被突然终止。

Eclipse 版本 -

> 面向 Web 开发人员的 Eclipse Java EE IDE。
> 
> 版本：Indigo Service Release 1 内部版本 ID：20110916-0149

颠覆插件信息

> Subclipse（必需） 1.8.4
> Mylyn 3.x 的 Subclipse 集成 3.0.0 Subversion 客户端适配器 1.8.0
> Subversion JavaHL 本机库适配器 1.7.2
> Subversion 修订图 1.1.1

我检查了 Eclipse 安装文件夹并看到正在创建的 hs_err_pid*log 文件，该文件具有以下堆栈跟踪。

```
Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  org.apache.subversion.javahl.SVNClient.status(Ljava/lang/String;Lorg/apache/subversion/javahl/types/Depth;ZZZZLjava/util/Collection;Lorg/apache/subversion/javahl/callback/StatusCallback;)V+0
j  org.tigris.subversion.svnclientadapter.javahl.AbstractJhlClientAdapter.getStatus(Ljava/io/File;ZZZZLorg/tigris/subversion/svnclientadapter/ISVNStatusCallback;)[Lorg/tigris/subversion/svnclientadapter/ISVNStatus;+135
j  org.tigris.subversion.subclipse.core.client.StatusCommand.execute(Lorg/tigris/subversion/svnclientadapter/ISVNClientAdapter;Lorg/eclipse/core/runtime/IProgressMonitor;)V+67
j  org.tigris.subversion.subclipse.core.client.StatusAndInfoCommand.execute(Lorg/tigris/subversion/svnclientadapter/ISVNClientAdapter;Lorg/eclipse/core/runtime/IProgressMonitor;)V+3
j  org.tigris.subversion.subclipse.core.client.StatusAndInfoCommand.run(Lorg/eclipse/core/runtime/IProgressMonitor;)V+12
j  org.tigris.subversion.subclipse.core.sync.SVNWorkspaceSubscriber.findChanges(Lorg/eclipse/core/resources/IResource;ILorg/eclipse/core/runtime/IProgressMonitor;)[Lorg/eclipse/core/resources/IResource;+95
j  org.tigris.subversion.subclipse.core.sync.SVNWorkspaceSubscriber.refresh(Lorg/eclipse/core/resources/IResource;ILorg/eclipse/core/runtime/IProgressMonitor;)Lorg/eclipse/core/runtime/IStatus;+43
j  org.tigris.subversion.subclipse.core.sync.SVNWorkspaceSubscriber.refresh([Lorg/eclipse/core/resources/IResource;ILorg/eclipse/core/runtime/IProgressMonitor;)V+91
j  org.eclipse.team.internal.ui.synchronize.RefreshSubscriberParticipantJob.doRefresh(Lorg/eclipse/team/internal/ui/synchronize/RefreshParticipantJob$IChangeDescription;Lorg/eclipse/core/runtime/IProgressMonitor;)V+24
j  org.eclipse.team.internal.ui.synchronize.RefreshParticipantJob.run(Lorg/eclipse/core/runtime/IProgressMonitor;)Lorg/eclipse/core/runtime/IStatus;+183
j  org.eclipse.core.internal.jobs.Worker.run()V+31
v  ~StubRoutines::call_stub 
```

提前感谢您为此线程付出的时间和精力。

# asp.net - Asp.net Radiobutton显示问题，选择时黑色圆圈显示不同

> ID：14659923
> 
> 赞同：0
> 
> 时间：2013-02-02T08:04:24.827
> 
> 标签：asp.net, radio-button

问题是有时在 aspx 页面中，单选按钮显示不同，黑色圆圈比其他圆圈大。

请提供任何帮助。 ![在此处输入图像描述](../Images/1d61df55556ebf7c7eda70a65be10d69.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:53:21.963

实际上，问题是单选按钮的视觉外观因操作系统而异，所以我正在检查 Windows7 和 8，单选按钮看起来不同。

[http://kb.siteground.com/why_does_my_website_look_different_on_different_browsers/](http://kb.siteground.com/why_does_my_website_look_different_on_different_browsers/)

# android - 如何在 android 上使用 PhoneGap 创建文本到语音？

> ID：14659935
> 
> 赞同：3
> 
> 时间：2013-02-02T08:05:57.727
> 
> 标签：android, cordova, text-to-speech, phonegap-plugins

我是 Phonegap 的新手，但我知道如何在 android 中使用 phonegap。但我想知道

如何在 android 上使用 PhoneGap 创建（文本到语音）tts 库。？

我有一个（文本到语音）tts 库，它是本机代码。我想使用 phonegap 在 android 上使用这个 tts 库。任何人都可以建议我.....请帮助....我正在尝试很长时间....如果可以的话，请给出一些示例，以便所有人都更容易理解....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T12:38:22.027

签出这个 Github 项目

[Phonegap 的 TTS 插件](https://github.com/macdonst/TTS)

# javascript - 尝试实现 js textualizer

> ID：14659938
> 
> 赞同：-1
> 
> 时间：2013-02-02T08:06:23.217
> 
> 标签：javascript

我正在尝试使用来自[http://kiro.me/projects/textualizer.html](http://kiro.me/projects/textualizer.html)的 js textualizer但它对我不起作用，我有一个 js fiddle 我想知道是否有人能解决这个问题。

[http://jsfiddle.net/Zk2tr/2/](http://jsfiddle.net/Zk2tr/2/)

代码

html

```
<script src="https://raw.github.com/krisk/textualizer/master/textualizer.min.js"></script>
<div id="output"></div>
Not Working 
```

js

```
var list = ['first blurb', 'second blurb', 'third blurb'];  // list of blurbs

var txt = $('#output');  // The container in which to render the list

var options = {
  duration: 1000,          // Time (ms) each blurb will remain on screen
  rearrangeDuration: 1000, // Time (ms) a character takes to reach its position
  effect: 'random',        // Animation effect the characters use to appear
  centered: true           // Centers the text relative to its container
}

txt.textualizer(list, options); // textualize it!
txt.textualizer('start'); // start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:53:17.397

试试这个例子：

> [http://jsfiddle.net/Zk2tr/9/](http://jsfiddle.net/Zk2tr/9/)

为了使其正常工作，您需要添加一些初始样式。例子：

```
#output {
  font-size: 40px;
  height: 200px;
  margin-top: 50px;
  padding: 10px;
  text-align: center;
  border: 1px solid gray;
} 
```

# selenium - 如何使用 selenium 启用 Firefox 浏览器的书签栏

> ID：14659941
> 
> 赞同：2
> 
> 时间：2013-02-02T08:06:43.477
> 
> 标签：selenium, capybara

如何使用 selenium webdriver 启用 Firefox 浏览器的书签栏。我需要为黄瓜红宝石测试用例启用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:30:16.427

您可以在启用书签工具栏的情况下预先创建自定义 Firefox 配置文件，并每次都使用该配置文件实例化 WebDriver。这也会缩短启动时间，因为 WebDriver 不必每次都创建一个干净的配置文件。

[这样做](http://code.google.com/p/selenium/wiki/RubyBindings#Using_an_existing_profile)：

```
driver = Selenium::WebDriver.for(:firefox, :profile => "my-existing-profile") 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-08T19:55:57.943

我自己解决了这个问题我已经执行了 javascript，即我已经通过 selenium webdriver 运行了 javascript 代码

```
page.driver.brower.execute_execript(javascript function here) 
```

# java - 如何使用java对ip地址进行升序排序请详细举例。以下是ip地址

> ID：14659946
> 
> 赞同：-2
> 
> 时间：2013-02-02T08:07:15.837
> 
> 标签：java, collections

如何使用java对ip地址进行升序排序请详细举例。以下是ip地址

```
123.4.245.23,
104.244.253.29,     
1.198.3.93,
32.183.93.40,
104.30.244.2,
104.244.4.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:16:45.167

用 表示 IP 地址[`java.net.InetAddress`](http://download.java.net/jdk7/archive/b123/docs/api/java/net/InetAddress.html)，并编写一个实现类[`Comparator<InetAddress>`](http://download.java.net/jdk7/archive/b123/docs/api/java/util/Comparator.html)

# android - 如何在 ImageView 中显示用户的头像？

> ID：14659949
> 
> 赞同：0
> 
> 时间：2013-02-02T08:07:23.997
> 
> 标签：android, android-layout, android-imageview

我最近开始了 Android 开发。每当我在消息传递应用程序中向某人发送消息时**，显示的列表视图项目上都会显示我的头像或显示图片。**

***我怎样才能在我的应用程序中做到这一点？***我可以以某种方式以编程方式获取它，然后设置它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:59:07.610

您可以在解析数据并使用该名称时获取该相应图片的名称，您需要从存储该图片的服务器中获取它。即使用路径+图片名称。现在您将拥有该表格中的图片一个位图。现在你唯一需要做的就是将此位图分配给一个图像视图。现在它完成了。你可以在图像视图中看到该图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:35:34.350

我发现用户没有默认的“显示图片”，就我而言，没有办法通过 Android 找到用户的 Gmail 帐户信息，就像 Windows Phone 一样。

# javascript - WinJS.UI.ListView 自定义列表项内容？

> ID：14659952
> 
> 赞同：1
> 
> 时间：2013-02-02T08:07:40.967
> 
> 标签：javascript, windows-8, winjs

我正在开发基于 Javascript 的 Windows 8 Metro App。它用于`WinJS.UI.ListView`显示 1 列的项目列表。除了文档中所说的之外，我不知道太多：http: [//msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx)。

如何根据数据源自定义列表项内容？是否有可用的回调函数，以便对于每个列表项，我可以根据数据数组中相应对象的变量显示/隐藏某些 HTML 标记？

就像这个 MSDN 文档的示例部分中的安排一样，我如何`img`根据是否`picture`存在显示/隐藏标签？

最重要的是，我如何拥有可变的列表项高度？根据上面提到的显示/隐藏功能，我的每个列表项都有不同的高度（实际上所有项目只有 2 个不同的高度）。如何实现这种行为？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T21:02:04.763

中的列表布局`WinJS.UI.ListView`不支持*不同*高度的项目；它必须是一个特定的高度。如果您需要该布局，您将不得不自己创建它。根据您的数据源和项目数量，这要么是微不足道的，要么是困难的。:)

那说明：

*   列表视图*确实*支持每个项目的不同模板。该`itemTemplate`属性允许您提供一个函数。详情在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh700705.aspx)
*   基于某些属性和计算，网格布局确实支持不同大小*的*项目*。*细节[在这里，最后](http://msdn.microsoft.com/en-us/library/windows/apps/hh781224.aspx)

如果您有小数据集（<50），那么您可以自己动态创建元素，并使用 child`div`的自然流一个接一个地堆叠您的元素。这个解决方案的种子可以在我的回答中[找到](https://stackoverflow.com/questions/13337489/winjs-listview-and-template-binding/13337787#13337787)。

让我扩展示例控件，基于 VS 中的“空白”WWA 项目

将此代码添加到您的`default.js`：

```
WinJS.Namespace.define("Samples", {
    ItemsControl: WinJS.Class.define(function (element, options) {
        this.domElement = element;
        WinJS.UI.setOptions(this, options);
    }, {
        domElement: null,
        _dataSource: null,
        dataSource: {
            get: function () {
                return this._dataSource;
            },
            set: function (v) {
                this._dataSource = v;
                this._renderItems(v);
            }
        },
        pickTemplate: function (item) {
            // The tempalte is found in the WinJS.Binding.Template instances that are
            // in default.html. They have ID attributes on them. We're going to pick
            // which one we want by setting the ID we're looking for, and then getting
            // that element from the DOM and returning the winControl
            var templateId = "template1"
            if (item.isType2) {
                // Because this is "isType2", we're going to use the other template
                templateId = "template2";
            }

            return document.getElementById(templateId).winControl;
        },
        _renderItems: function (source) {
            // This function renders all the items, thus when you set the datasource, and
            // expect it to render items, you probably would like all your items to replace
            // any existing items.
            WinJS.Utilities.empty(this.domElement);
            source.forEach(function (item) {
                var newElement = document.createElement("div");
                this.domElement.appendChild(newElement);

                this.pickTemplate(item).render(item, newElement);
            }.bind(this));
        }
    }),
});

function makeContent() {
    var data = [
        { label: "First", },
        { label: "Second", },
        { label: "Third", isType2: true },
        { label: "Fourth", isType2: true },
        { label: "Fifth", },
        { label: "Sixth", isType2: true }
    ];

    var control = document.getElementById("itemsControl").winControl;

    control.dataSource = data;
} 
```

*并将内容*替换为`body`：

```
<div data-win-control="WinJS.Binding.Template"
    id="template1">
    <div class="type1"
        data-win-bind="textContent: label"></div>
</div>

<div data-win-control="WinJS.Binding.Template"
    id="template2">
    <div class="type2"
        data-win-bind="textContent: label"></div>
</div>
<button onclick="makeContent()">Make Content</button>
<div id="itemsControl"
    data-win-control="Samples.ItemsControl">

</div> 
```

最后，在 default.css 中：

```
 .type1 {
        background-color: green;
        height: 50px;
        width: 100px;
    }

    .type2 {
        background-color: red;
        height: 100px;
        width: 100px;
    } 
```

# java - 我无法理解的 ExceptionInInitializerError

> ID：14659953
> 
> 赞同：0
> 
> 时间：2013-02-02T08:07:47.380
> 
> 标签：java, exception, static, initialization

这编译得很好：

```
static final Screen screen = Screen.getInstance();
static final InputListener listener = InputListener.getInstance();

static
{

    screen.addListener(listener);
    screen.setCurrentState(new MainMenu());
    screen.setVisible(true);
}

private GameManager(){
    mobs = new ArrayList<Mobile>();
    player = new Player(100, 100);      
    mobs.add(player);   
} 
```

这不会：

```
static final Screen screen = Screen.getInstance();
static final InputListener listener = InputListener.getInstance();

private GameManager(){
    mobs = new ArrayList<Mobile>();
    player = new Player(100, 100);      
    mobs.add(player);   

    screen.addListener(listener);
    screen.setCurrentState(new MainMenu());
    screen.setVisible(true);
} 
```

抛出：线程“main”中的异常 java.lang.ExceptionInInitializerError 说：

```
Caused by: java.lang.NullPointerException
at main.pack.minerdude.GameManager.<init>(GameManager.java:42)
at main.pack.minerdude.GameManager.<clinit>(GameManager.java:10)
... 1 more 
```

第 10 行是：

```
private static final GameManager manager = new GameManager(); 
```

第 42 行指的是“退货经理”：

```
public static GameManager getInstance(){
    return manager;
} 
```

如果在创建生物并向其添加玩家之后生成静态块，为什么会有这样的行为？

## **编辑**

所以，这是我执行此代码并获得以下输出后的结论：

```
GameManager constructor
Screen constructor
Screen getInstance
static of GameManager
GameManager GetInstance 
```

1.  有些类想要一个 GameManager 对象，所以要返回它必须先创建它。

2.  GameManager 有一个声明为静态的 Screen 对象，并且具有与第一步相同的要求。

3.  Screen get 已创建，因此 GameManager 已初始化其静态对象并继续初始化以下静态对象。

4.  现在 GameManager 已完全初始化，它会将自身返回给第一个调用者。

有人会假设当 GameManager getInstnace 被调用时，在调用它的构造函数之前，它会首先初始化它的所有静态变量，但它似乎不起作用，因为构造函数在它的任何静态变量之前被调用。如果我直接创建一个新的 GameManager - 不使用 getInstance() - 然后将保留顺序：静态、变量、构造函数然后返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T08:33:04.937

您的问题是您在构造函数中使用静态对象，这取决于您的构造函数。

您的程序流程是：

```
1\. static final Screen screen = Screen.getInstance();
2\. public static GameManager getInstance(){ return manager;}
3\. private static final GameManager manager = new GameManager();
4\. private GameManager(){
    //......
    screen.addListener(listener);
    //but screen is still null !!! NullPointerException !!!
} 
```

# mysql - 这个查询可以不使用 Filesort 吗？

> ID：14659955
> 
> 赞同：2
> 
> 时间：2013-02-02T08:08:00.807
> 
> 标签：mysql

我有一个包含我订购的日期时间列的表。无论我做什么，我都会从 EXPLAIN 中不断得到“使用位置；使用文件排序”。

有没有办法让日期时间列上的 ORDER BY 不使用文件排序？

查询非常简单，如下所示：

`SELECT * FROM table1 WHERE creator_id = 1 AND user_id != 1 ORDER BY created DESC LIMIT 5`

索引位于 creator_id 和 user_id 我认为没有理由在 created 上放置索引，因为它基本上总是唯一的，因此会在所有项目上创建索引，即与表一样大。

编辑：我应该提到我也尝试过将索引放在 created 上，结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:16:26.460

如果您在 上创建复合索引`(creator_id, created)`，您的查询应该会运行得更快。

查询计划器将使用索引的第一部分：`creator_id`满足 WHERE 约束，并使用第二部分`created`进行排序。

# javascript - 从 JAVASCRIPT 列中的二维数组中检索元素

> ID：14659959
> 
> 赞同：0
> 
> 时间：2013-02-02T08:09:47.423
> 
> 标签：javascript

我创建了一个带有显示数字的二维数组的表。现在我想从中检索元素。下面的代码是逐行检索它。如何修改下面的代码以按列检索它？

```
var newArray;
var buffer ="";
newArray = totalRows.map(function(arrayNode){
        return arrayNode.map(function(node){
               buffer += node.nodeValue.trim();
               cell.innerHTML=buffer;
        });
}); 
```

# compiler-construction - Microchip XC16 中函数的绝对地址

> ID：14659962
> 
> 赞同：1
> 
> 时间：2013-02-02T08:10:35.753
> 
> 标签：compiler-construction, function-pointers, pic, microchip, xc16

器件：dsPIC33FJ128GP802

我有一些 *.s 文件如下

```
.global _D1
.section .speex, code
_D1:
.pword 0x66C821,  0x1B0090,  0xD96C36,  0x9B60B0,  0xDD4E36,  0xBF4E53
.pword 0xD1098B,  0x719BD9,  0x873989,  0x003B69,  0x279035,  0xED4244
.pword 0xE1403C,  0x54D439,  0x826550,  0xC59627,  0xDD0432,  0x88FA29 
```

我在 *.h 中声明了相同的内容

```
extern void D1(void); 
```

现在我将 D1 传递给表读取函数

```
nowPlaying.file1 = (unsigned long) D1;
function(nowPlaying.file1); 
```

我的问题是，如果 D1 的地址在 0x8000 以上，则例程不正确。我尝试了大大小小的代码模型，但结果是一样的。我认为这是由于指针的 16 位限制。有什么方法可以直接从代码中访问 D1 的绝对地址。也许像内置函数或宏之类的东西。

请注意编译器手册说：

> MPLAB XC16 C 编译器完全支持函数指针，允许间接调用函数。函数指针总是 16 位宽。

我已经发布了同样的问题

[https://electronics.stackexchange.com/questions/56858/absolute-address-of-a-function-in-microchip-xc16](https://electronics.stackexchange.com/questions/56858/absolute-address-of-a-function-in-microchip-xc16)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:59:39.507

正如我在electronics.stackexchange.com 上所写的那样，当它根本不是无符号长时，您基本上是在向编译器撒谎，将其`D1`转换为 。`unsigned long`这很可能会导致问题发生。

如果从 D1 开始的东西是可以符合 C 调用约定的代码，`D1`则应声明为`extern void D1(void)`，并且所有获取其地址的结构成员和变量和参数都应声明`void (*D1)(void)`为语法`(*var)()`。我不知道该`nowPlaying.file1`变量的用途：您也可以只调用`function(D1)`if`function()`声明正确，即如上所述。

如果它是数据，它应该是`const short D1[]`，并且您不需要汇编程序：您可以将 C 中的值提供为`const short D1[] = {...};`。编译器应按原样将 D1 放入代码段`const`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-31T11:38:32.057

dspic 闪存大小可以大于 16 位。您的零件有 128kb 代码闪存。您想如何将其填充到 16 位整数中？

# dart - Dart Deprecated Field on，现在如何添加事件处理程序？

> ID：14659963
> 
> 赞同：5
> 
> 时间：2013-02-02T08:10:41.927
> 
> 标签：dart

我有这个...

```
query("#buttonCenter").on.click.add((event){
  OnButtonCenter(event);
}); 
```

Dart 编辑器说 on 字段已被弃用，我似乎无法找到他的“新”方式。Surly 我只是度过了一个糟糕的夜晚，这应该很容易弄清楚，对吧？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T08:15:04.947

```
query("#buttonCenter").onClick.listen((event){
  OnButtonCenter(event);
}); 
```

有关更多详细信息，请参阅[新的 DOM 事件流 API 使侦听和捕获事件更容易](http://news.dartlang.org/2013/01/new-dom-event-streams-api.html)。

# php - 为什么选择选项总是在mysql表中发布最后一个值

> ID：14659964
> 
> 赞同：0
> 
> 时间：2013-02-02T08:11:07.213
> 
> 标签：php, mysql

我有一个表单选择框，它正确填充了 mysql 表中的值，但是当它发布时，发布的值是表“manutags”中的最后一项，而不是框中显示的选定项目。有人能告诉我我的逻辑有什么问题吗？

```
<p class="formlabel cf text nobox">Tag Style  <!--popuplate with tag styles-->
<?$i=1;
    while($i<11){?>         
        <select class="man_sty <?$m='man'.$i++;echo $m?>" name="style_id">
        <?
            $sql = "SELECT DISTINCT man,style_id FROM manutags WHERE man_id = '$m'";
            $result = mysql_query($sql) or die(mysql_error());
        while($row = mysql_fetch_array($result)){
        ?>
         <option value="<?=$row[1];?>"><?echo $row[1]?></option><!-- tag dropdown values-->
        <?}?>
        </select>
    <?}?> 
```

HTML

```
<p class="formlabel cf text nobox">
Tag Style
<select class="man_sty man1" name="style_id_1" style="display: none;">
<option selected="" value="Kliktag">Kliktag</option>
<option value="RD2000">RD2000</option>
<option value="Button-R">Button-R</option>
<option value="SnappTagg">SnappTagg</option>
<option value="AutoEID">AutoEID</option>
</select>
<select class="man_sty man2" name="style_id_2" style="display: none;">
<option selected="" value="rototag">rototag</option>
</select>
<select class="man_sty man3" name="style_id_3" style="display: inline;">
<option selected="" value="Qwik">Qwik</option>
<option value="Zee">Zee</option>
</select>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:39:15.503

您正在输出 10 个选择框，但您的问题是“表单选择框”。如果您只想要一个，请将选择标签移到循环之外：

```
<p class="formlabel cf text nobox">Tag Style  <!--popuplate with tag styles-->
<select class="man_sty <?$m='man'.$i++;echo $m?>" name="style_id">
<?php
$i=1;
while($i<11){
    $sql = "SELECT DISTINCT man,style_id FROM manutags WHERE man_id = '$m'";
    $result = mysql_query($sql) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
    ?>
        <option value="<?=$row[1];?>"><?echo $row[1]?></option><!-- tag dropdown values-->
    <?php
    }
}
?>
</select> 
```

如果您确实需要 10 个选择框，那么您可能希望对参数使用数组语法：

```
<p class="formlabel cf text nobox">Tag Style  <!--popuplate with tag styles-->
<?php
$i=1;
while($i<11){
    ?>
<select class="man_sty <?$m='man'.$i++;echo $m?>" name="style_id[]">
    <?php
    $sql = "SELECT DISTINCT man,style_id FROM manutags WHERE man_id = '$m'";
    $result = mysql_query($sql) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
    ?>
        <option value="<?=$row[1];?>"><?echo $row[1]?></option><!-- tag dropdown values-->
    <?php
    }
    ?>
    </select>
    <?php
}
?> 
```

然后在接收端，您将在 $_POST['style_id'] 中收到一个数组（假设您在表单中使用 method="post"）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:31:50.670

你所有的菜单都一样`name="style_id"`。因此，当您提交表单时，它们都设置了`$_POST['style_id']`. 由于只有一个具有该名称的变量，因此您只能得到最后一个。您需要给它们起不同的名称，以便您可以从中获得选择。

尝试：

```
<select class="man_sty <?$m='man'.$i++;echo $m?>" name="style_id[]"> 
```

然后`$_POST['style_id']`将是一个包含每个选择的值的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T08:32:07.893

一探究竟。似乎您忘记更改`name`每个选择。

```
<?php
for ($i = 1; $i <= 10; $i++) {
    $manId = "man" . $i;
    echo "<select class=\"man_sty {$manId}\" name=\"style_id_{$i}\">";
    $sql = "SELECT DISTINCT man, style_id FROM manutags WHERE man_id = '{$manId}'";
    $result = mysql_query($sql) or die(mysql_error());
    $selected = 'selected';
    while ($row = mysql_fetch_array($result)) {
        echo "<option value=\"{$row[1]}\" {$selected}>{$row[1]}</option>";
        $selected = '';
    }
    echo "</select>";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T08:36:05.807

使您的下拉名称动态。为 10 下拉 10 个不同的名称。然后拿起动态下拉的值。认为会给你所需的结果。

# php - linkedin api获取用户个人资料，工作详细信息而无需登录

> ID：14659967
> 
> 赞同：1
> 
> 时间：2013-02-02T08:11:38.463
> 
> 标签：php, linkedin

我想在没有用户登录的情况下访问用户个人资料工作历史、当前工作。假设用户之前已授予权限。

我有 access_token 和 access_secret，但是如何将它们合并到 url 中以生成 xml 或 json 结果？

[http://api.linkedin.com/v1/people/id=abcdefg](http://api.linkedin.com/v1/people/id=abcdefg)

我很抱歉含糊其辞，但与 facebook 相比，LinkedIn 文档很差。

脸书使用

[https://graph.facebook.com/USER_NAME?fields=work&access_token=ACCESS_TOKEN](https://graph.facebook.com/USER_NAME?fields=work&access_token=ACCESS_TOKEN)

LinkedIn有类似的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:42:44.423

我强烈建议您使用库，而不是创建对 API 的原始调用，它将简化您的生活：

有一个用于最流行的编程语言的库：[https](https://developer.linkedin.com/documents/libraries-and-tools) ://developer.linkedin.com/documents/libraries-and-tools 。

# php - 日期函数如何在php中检索信息？

> ID：14659968
> 
> 赞同：1
> 
> 时间：2013-02-02T08:11:42.520
> 
> 标签：php

我正在尝试在本地主机上的 php 中使用 date() 函数。但是每当我更改计算机的日期和时间时，日期都会更改。如果我在实时服务器上上传 php 文件，那么会发生什么？**更改**客户计算机日期会像那样工作吗？？？？请它很重要....

```
$today = date("F j, Y, g:i a");                 
$today = date("m.d.y");                         
$today = date("j, n, Y");                       
$today = date("Ymd");                           
$today = date('h-i-s, j-m-y, it is w Day');     
$today = date('\i\t \i\s \t\h\e jS \d\a\y.');   
$today = date("D M j G:i:s T Y");               
$today = date('H:m:s \m \i\s\ \m\o\n\t\h');     
$today = date("H:i:s");                         
$today = date("Y-m-d H:i:s"); 
```

我正在使用这些功能.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:17:06.073

在您的本地主机上，您的计算机是服务器。因此，更改计算机（服务器）的时间会更改显示的时间。在主机环境中，主机服务器规定了显示的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:17:28.280

date 函数显示运行 PHP 的计算机（“服务器”）上的日期。

因此，当您在机器上本地运行 PHP 时，PHP 通过 date() 函数报告您机器上的时间。

当您在另一台机器上运行它时，报告的是该机器的时间。

要自己测试它，无需“实时服务器”，请在您的机器上运行 Web 服务器，并使用局域网上的另一台不同的机器访问该站点，使用您的计算机的 IP 地址。您会看到报告的是您的计算机时间，而不是您运行 Web 浏览器的计算机时间。

# c++ - g++ std::is_function 实现：_ArgTypes 后跟 6 个句点是什么意思？

> ID：14659975
> 
> 赞同：9
> 
> 时间：2013-02-02T08:12:47.707
> 
> 标签：c++, templates, c++11, g++, variadic-templates

我正在查看我的标头（g++-4.5.2）中某些模板的实现，我发现了以下内容：

```
/// is_function
template<typename>
  struct is_function
  : public false_type { };
template<typename _Res, typename... _ArgTypes>
  struct is_function<_Res(_ArgTypes...)>
  : public true_type { };
template<typename _Res, typename... _ArgTypes>
  struct is_function<_Res(_ArgTypes......)>
  : public true_type { }; 
```

前两个声明似乎合理，但我不知道第三个是如何工作的。是什么`......`？我在标准中寻找它，找不到任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T08:15:26.723

它与以下内容相同：

```
_Res(_ArgTypes..., ...) 
```

省略号参数前的逗号是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-25T14:02:45.883

该模板处理函数中的可变长度参数。例如：

```
void foo(bool, char, int...) 
```

# android - 无法在父类的按钮单击时接收来自视图寻呼机不同布局的数据

> ID：14659976
> 
> 赞同：0
> 
> 时间：2013-02-02T08:12:57.373
> 
> 标签：android, android-viewpager

我正在使用一个视图寻呼机，它有 3 个包含不同表单的布局。我有一个按钮来保存来自不同布局的更改数据如何在按钮单击时从不同布局获取数据？请帮忙

```
 @Override
            public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
            // Inflate the layout containing a title and body text.

        if(mPageNumber==0)
        {

         //LoginActivity loginActivity=new LoginActivity();
         //System.out.println("Hello"+loginActivity.loginData);
         rootView = (ViewGroup) inflater.inflate(R.layout.layout2, container, false);
        ((TextView) rootView.findViewById(R.id.fullnameedit)).setText(name);
        ((TextView) rootView.findViewById(R.id.usernameedit)).setText(username);
        ((EditText) rootView.findViewById(R.id.emailedit)).setText(email);
        ((EditText) rootView.findViewById(R.id.passedit)).setText(address);
        ((TextView) rootView.findViewById(R.id.emailtext)).addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub
                System.out.println("assssasaas");
                if (((EditText) rootView.findViewById(R.id.passedit)).getText().toString().compareTo(s.toString()) != 0)
                {
                    // your code ...

                }
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub
                System.out.println("fsdfhahfadhsf;osd");

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                System.out.println("ighadfigadwfuiqwl");
                if (((EditText) rootView.findViewById(R.id.passedit)).getText().toString().compareTo(s.toString()) != 0)
                {
                    // your code ...
                    email=((EditText) rootView.findViewById(R.id.passedit)).getText().toString().toString();
                    System.out.println(email+"editable");
                }
            }
        });

        System.out.println(mPageNumber+" page 0");

        }
        else if(mPageNumber==1)
        {
             rootView = (ViewGroup) inflater.inflate(R.layout.layout3, container, false);
             ((EditText) rootView.findViewById(R.id.mobileph)).setText(mobileno);
             ((EditText) rootView.findViewById(R.id.home)).setText(homephone);
             ((EditText) rootView.findViewById(R.id.cit)).setText(city);
             ((EditText) rootView.findViewById(R.id.countrry)).setText(country);
             ((EditText) rootView.findViewById(R.id.postall)).setText(zipcode);
             ((EditText) rootView.findViewById(R.id.countyy)).setText(country);
             System.out.println(mobileno+" "+homephone+" "+city+" "+country+" "+county+" "+zipcode);
             System.out.println(mPageNumber+" page 1"); 
        }
        else if(mPageNumber==2)
        {
             rootView = (ViewGroup) inflater.inflate(R.layout.layout4, container, false);
             ((EditText) rootView.findViewById(R.id.birth)).setText(dob);
             ((EditText) rootView.findViewById(R.id.about)).setText(aboutme);
             System.out.println(mPageNumber+" page 2");
        }
        else if(mPageNumber==3)
        {
             rootView = (ViewGroup) inflater
                        .inflate(R.layout.layout5, container, false);
             ((EditText) rootView.findViewById(R.id.facebuk)).setText(facebook);
             ((EditText) rootView.findViewById(R.id.twitterr)).setText(twitter);
             ((EditText) rootView.findViewById(R.id.myspacee)).setText(icq);
             ((EditText) rootView.findViewById(R.id.linkedinjn)).setText(linked);
             System.out.println(mPageNumber+" page 3");
        }
        // Set the title view to show the page number.
        //((TextView) rootView.findViewById(android.R.id.button1)).setText(
              //  getString(R.string.title_template_step, mPageNumber + 1));

        return rootView;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:29:03.310

onCreateView() 仅在创建片段时调用一次。您应该将 onPageChangeListener 添加到您的 viewPager 中，并在此侦听器中创建充气对象，然后对所需的布局进行充气。

# php - 如何从不同的表中添加 2 个总数？

> ID：14659977
> 
> 赞同：1
> 
> 时间：2013-02-02T08:12:58.147
> 
> 标签：php, html-table, sum

如何从 TOTAL AMOUNT RECEIVED 中减去 TOTAL EXPENSES 并将其显示在 TOTAL REVENUES 中？

数据来自我数据库中的不同表。不幸的是，我无法上传图片以获得更清晰的视图。

```
TOTAL AMOUNT RECEIVED || 15610

TOTAL EXPENSES || 11300

TOTAL REVENUES ||  (this must be equal to TOTAL AMOUNT RECEIVED - TOTAL EXPENSES) 
```

这是我的代码：

```
<table width="383" border="1" bordercolor="#00CCFF">
<tr>
<td width="245" bgcolor="#0099FF">TOTAL AMOUNT RECIEVED</td>
<td width="128" bgcolor="#FFFFFF">
            <?php
            include("confstudents.php");
            $id = $_GET['id'];
            $query = "SELECT id, SUM(1stPayment + 2ndPayment + 3rdPayment + 4thPayment) um_payment FROM student_payments"; 
            $result = mysql_query($query) or die(mysql_error());
            // Print out result
            while($row = mysql_fetch_array($result)){
            echo "" . $row['sum_payment'];
            echo "<br/>";
            }
            ?>
</td>
</tr>
<tr>
<td bgcolor="#0099FF">TOTAL EXPENSES</td>
<td bgcolor="#FFFFFF">
            <?php
            include("confexpenses.php");
            $id = $_GET['id'];
            $query = 'SELECT SUM(piece * price) tprice FROM expenses'; 
            $result = mysql_query($query) or die(mysql_error());
            while($res = mysql_fetch_assoc($result)){
            echo " " . $res['tprice']; " ";
            }
            ?>
</td>
</tr>

<tr>
<td bgcolor="#0099FF">TOTAL REVENUES</td>
<td bgcolor="#FFFFFF">
            <?php
            include("totalrev.php");
            ?>
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:51:36.757

如果两个表之间有关系，例如id：

```
SELECT 
SUM(r.stPayment) as RECIEVED, sum(e.piece * e.price) as EXPENSES
FROM
student_payments as r,
expenses as e
WHERE r.id = e.id and r.id = '$id' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:34:44.797

我将制定独立于结构/样式的一般答案，但本质上你想存储前两个查询的返回值，然后做一些数学运算。让我们先把它简单化（KISS - Keep It Simple, Stupid），然后从样式中抽象出逻辑。

```
<?php
$query = "
SELECT
    id,
    SUM(1stPayment + 2ndPayment + 3rdPayment + 4thPayment) AS sum_payment
FROM
    student_payments"; 

$result = mysql_query($query) || die(mysql_error());

// Create a variable to store the sum of payments
$sum_payment = 0;

// Print out result
while($row = mysql_fetch_array($result))
{
    echo "" . $row['sum_payment'];
    echo "<br/>";

    $sum_payment += (int)$row['sum_payment'];
}

$query = 'SELECT SUM(piece * price) tprice FROM expenses'; 
$result = mysql_query($query) or die(mysql_error());

// Variable to store the expenses
$expenses = 0;

while($res = mysql_fetch_assoc($result))
{
    echo " " . $res['tprice']; " ";
    $expenses += $res['tprice'];
}

// Calculate the difference
$total_rev = $sum_payments - $expenses;

echo '<br/>', $total_rev, '<br/>';
?> 
```

关于你使用的注释`$_GET['id']`- 如果你打算引入一些最终会进入 SQL 查询的东西，你应该转义它：使用 mysql_ 库，使用 mysql_real_escape_string [http://php.net/manual/en/function.mysql -real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)但是，一般来说，你应该切换到使用 MySQLi 库 - [http://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php) - 因为它更安全，最终PHP 将不支持标准的 mysql 函数。

# ruby-on-rails - RubyOnRails：一个新的数据库请求（mysql）

> ID：14659990
> 
> 赞同：0
> 
> 时间：2013-02-02T08:15:10.170
> 
> 标签：ruby-on-rails, database

我的 upload_controller 中有以下功能：

```
 def analyse
    (current_user.uploads).perform_analysis        
     respond_to do |format|
       format.html { redirect_to :back }
     end 
```

这意味着 perform_analysis 将仅分析一个特定用户的上传，该用户现在在线，例如用户 A。

perform_analysis 位于上传模型中。

```
 def self.perform_analysis
    blablabal
    @upload=Upload.find_by_arraydb_file_name(x)
    @upload.update_attributes(blablabla)
  end 
```

x 是上传文件的名称。

我的问题是，通过调用这条线

```
@upload=Upload.find_by_upload_file_name(x) 
```

数据库有以下请求：

```
select upload from uploads  WHERE current_user=user A AND upload_file_name=x 
```

我希望请求只有`WHERE upload_file_name=x`没有 current_user

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T09:31:39.730

`current_user.uploads`引入`WHERE current_user=user` sql查询。

# php - 通过php将csv文件加载到mysql中

> ID：14659992
> 
> 赞同：1
> 
> 时间：2013-02-02T08:15:15.790
> 
> 标签：php, mysql

> **可能重复：**
> [使用 PHP/MySQL 导入 CSV 数据](https://stackoverflow.com/questions/11448307/importing-csv-data-using-php-mysql)

有人可以告诉我通过 PHP 表单将文件导入 MySQL 数据库的最简单方法吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T08:36:11.643

试试这个。这使用一个函数将文件的行读入字符串数组，然后遍历每一行并将列值存储到表中。显然，您需要插入您的数据库连接设置和正确的查询。

```
function loadData()
{
   $lines = readInputFromFile("myCSV.csv");
   for ($i = 0; $i < count($lines); $i++)
   (
      $columns = explode(",", $lines[$i]);
      $conn = new PDO("mysql:host=YOUR_HOST;port=YOUR_PORT;dbname=YOUR_DBNAME", "UserName", "Password");

      $query = "INSERT INTO MYTABLE VALUES ('".$columns[0]."', '".$columns[1]."', '".$columns[2]."')";      
      $stmt = $conn->prepare($query);
      $stmt->execute();
   )
}

function readInputFromFile($file)
{
   $fh = fopen($file, 'r');
   while (!feof($fh))
   {
      $ln = fgets($fh);
      $parts[] = $ln;
   }

   fclose($fh);

   return $parts;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T08:17:34.720

它可以通过使用 fgetcsv PHP 函数来完成。

[http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

之后，使用 Mysql INSERT 函数将该数据保存在数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T08:18:38.440

MySQL 有一个特性 LOAD DATA INFILE，它允许在单个 SQL 查询中直接导入 CSV 文件。

简单的例子：

```
 <?php
            $query = <<<eof
                LOAD DATA INFILE '$fileName'
                 INTO TABLE tableName
                 FIELDS TERMINATED BY '|' OPTIONALLY ENCLOSED BY '"'
                 LINES TERMINATED BY '\n'
                (field1,field2,field3,etc)
            eof;

            $db->query($query);
            ?> 
```

就这么简单。

没有循环，没有大惊小怪。而且比用 PHP 解析要快得多。

MySQL手册页在这里：[http ://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

希望对 [作者有所帮助](https://stackoverflow.com/users/1069607/sdc)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T08:20:15.190

如果您正在寻找将 csv 文件导入 mysql 的最简单方法，请执行以下操作：

例如：

```
LOAD DATA LOCAL INFILE 'import.csv' INTO TABLE from_csv FIELDS TERMINATED BY ','  LINES TERMINATED BY '\n'  (si, distro, available); 
```

更多阅读：

[http://www.techtrunch.com/linux/import-csv-file-mysql-table](http://www.techtrunch.com/linux/import-csv-file-mysql-table)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T08:20:31.487

看下面的代码

```
csv2sql("pre_employee","ch_data.csv");

function csv2sql($table_name,$csvname)
{
$fl=fopen($csvname,r);
//if(!file_exists('a.txt'))
//{
    $flw=fopen("a.txt",'w');
//}
$sql='';
$i=2;
//echo $csvname.$data=fgetcsv($fl,1000,",");die();
while(($data=fgetcsv($fl,1000,","))!=false)
{
    $sql.="insert into ".$table_name." values('".$data[0]."','".$data[2]."','".$data[3]."');".chr(13);
    $i++;
}
//echo $sql;
fwrite($flw,$sql);
fclose($flw);
fclose($fl);
 } 
```

a.txt 是保存你的 sql 的文件名。也不将此 txt 文件导入您的 mysql 数据库。

# sql - 检查字符串是否存在于另一个字段中

> ID：14659994
> 
> 赞同：2
> 
> 时间：2013-02-02T08:15:23.130
> 
> 标签：sql, sql-server, tsql

我有一个表 A 的列名为 OriginalWord 和表 B 的列名为 mySentence。

OriginalWord 的行如下：

*   星星
*   数据
*   检查

它存储任何单个单词。

mySentence 存储带有句子的行，例如：This is a star。

如果 OriginalWord 中的任何单词存在于 mySentence 中，我想列出 mySentence 中的所有行。

因此，上面示例中的 mySentence 将被列出，但如果 mySentence 的行是“This is my dad”，则不会列出。

我如何在 T-SQL 中编写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:27:21.833

由于`LIKE %%`谓词摆脱了索引使用，您可以使用它来实现您想要的。

```
SELECT DISTINCT
  T1.mySentence
FROM Table1 T1 
    INNER JOIN Table2 T2 
       ON ' '+ T1.mySentence + ' ' LIKE '% ' + T2.OriginalWord + ' %' 
```

**更新**

[SQL 小提琴演示](http://sqlfiddle.com/#!3/483ab/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:21:49.693

对于简单的场景，你可以`LIKE`像这样使用谓词：

```
SELECT 
  s.mySentence
FROM Sentences s 
INNER JOIN Words w ON s.mySentence LIKE '%' + w.OriginalWord + '%'; 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!3/5d84d/1)。

# reference - 引用标签使用 Typescript 污染模块

> ID：14659996
> 
> 赞同：0
> 
> 时间：2013-02-02T08:15:30.063
> 
> 标签：reference, module, typescript

假设我有文件`lib.ts`包含

```
/// <reference path="assets/webgl.d.ts" />
export var wrapper = 4; 
```

然后我有文件`main.ts`包含

```
import lib = module("lib");
// when I hit space here, I see all the `webgl.d.ts` declarations 
```

如何停止`webgl.d.ts`污染所有加载的模块`lib.ts`？`webgl.d.ts`应该**只**在`lib.ts`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T19:11:49.620

尽管这不是您想要发生的，但这实际上是 TypeScript 语言的工作方式。来自[TypeScript 语言规范](http://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdf)：

> 作为依赖关系包含的任何文件依次以传递方式分析其引用，直到确定所有依赖关系。

因此，TypeScript 编译器旨在为您遍历依赖关系树。

# google-app-engine - 应用引擎、JDO 和 Maven。启动时出错

> ID：14659998
> 
> 赞同：5
> 
> 时间：2013-02-02T08:16:05.800
> 
> 标签：google-app-engine, maven, jdo, datanucleus

我正在尝试使用带有 App Engine 和 Maven 配置的 JDO 创建一个简单的测试。

我的编译和数据增强步骤成功了。但在运行时（mvn:test 和 appengine:devserver）我得到：

```
1) Error in custom provider, javax.jdo.JDOFatalInternalException: 
Class "com.google.appengine.datanucleus.DatastoreManager" was not found in the CLASSPATH.
Please check your specification and your CLASSPATH. 
```

但是，我的类路径（target/demo/WEB-INF/lib）确实包含：datanucleus-appengine-2.1.1.jar

而且我的依赖项与 Google datanucleus 项目的 POM 中指定的依赖项相同：

```
 <dependency>
    <groupId>javax.jdo</groupId>
    <artifactId>jdo-api</artifactId>
    <version>3.0.1</version>
  </dependency>
  <dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-core</artifactId>
    <version>[3.1.1, 3.2)</version>
    <scope>runtime</scope>
  </dependency>
  <dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-api-jdo</artifactId>
    <version>[3.1.1, 3.2)</version>
  </dependency>
  <dependency>
    <groupId>com.google.appengine.orm</groupId>
    <artifactId>datanucleus-appengine</artifactId>
    <version>2.1.1</version>
  </dependency> 
```

感谢任何建议。

RB

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T21:26:00.317

我现在一切正常。我想我会分享一些陷阱（因为我花了几天时间来完成所有这些）：

1）。所有版本都非常重要（尤其是将 App Engine ORM 2.1.1 与 DataNucleus 3.1.1 匹配——包括插件）。

[http://www.datanucleus.org/products/accessplatform_3_2/datastores/appengine.html](http://www.datanucleus.org/products/accessplatform_3_2/datastores/appengine.html)

这就是我最终得到的结果：

```
 <dependency>
    <groupId>javax.jdo</groupId>
    <artifactId>jdo-api</artifactId>
    <version>3.0.1</version>
  </dependency>
  <dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-core</artifactId>
    <version>3.1.1</version>
    <scope>runtime</scope>
  </dependency>
  <dependency>
    <groupId>org.datanucleus</groupId>
    <artifactId>datanucleus-api-jdo</artifactId>
    <version>3.1.2</version>
  </dependency>
  <dependency>
    <groupId>com.google.appengine.orm</groupId>
    <artifactId>datanucleus-appengine</artifactId>
    <version>2.1.2</version>
  </dependency>

  ...

  <plugin>
    <groupId>org.datanucleus</groupId>
    <artifactId>maven-datanucleus-plugin</artifactId>
    <version>3.1.2</version>
    <configuration>
      <log4jConfiguration>${basedir}/log4j.properties</log4jConfiguration>
      <verbose>false</verbose>
      <fork>false</fork>
    </configuration>
    <executions>
      <execution>
        <phase>process-classes</phase>
        <goals>
          <goal>enhance</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

2）。检查 datanucleus.log 的尾部以确认您的类已增强（通过 mvn datanucleus:enhance）。我最终意识到我的测试类（在 src/test 中）被忽略了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T06:08:08.523

我在 pom.xml 中添加了**false**，它对我有用

```
<plugins>
            <plugin>
                <groupId>org.datanucleus</groupId>
                <artifactId>maven-datanucleus-plugin</artifactId>
                <version>3.1.2</version>
                <configuration>
                    **<fork>false</fork>**
                    <log4jConfiguration>${basedir}/log4j.properties</log4jConfiguration>
                    <verbose>true</verbose>
                </configuration>
                <executions>
                    <execution>
                        <phase>process-classes</phase>
                        <goals>
                            <goal>enhance</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins> 
```

# axapta - 如何使用来自多个数据源的字段创建查找？

> ID：14659999
> 
> 赞同：3
> 
> 时间：2013-02-02T08:16:20.377
> 
> 标签：axapta, x++, dynamics-ax-2012

我需要在我的表单字段中创建动态查找，它应该显示来自两个不同数据源的字段。我试图将其执行为：

```
 public void lookup()
  {

    query = new Query();
   sysTableLookup = SysTableLookup::newParameters(tableNum(smmBusRelTable), this);
  qbds = query.addDataSource(tablenum(smmBusRelTable));
 // qbds.addDataSource(tableNum(DirPartyTable));
 //qbds.relations(true);

sysTableLookup.parmQuery(query);   
sysTableLookup.addLookupField(fieldNum(smmBusRelTable, Busrelaccount));
//sysTableLookup.addLookupfield(fieldNum(DirPartyTable, Name));

 sysTableLookup.performFormLookup();
} 
```

注释行是我尝试执行以添加不同数据源的操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T14:32:46.540

据我所知，SysTableLookup 类不支持显示其他表中的字段。addLookup() 方法不采用 TableId，并假定所有字段都在查询的第一个数据源中。

您可以编写自己的 SysTableLookup 版本，支持从各种表中引用字段。一种更简单、更实用（且成本更低）的方法可能是在 SmmBusRelTable 上创建一个显示方法，以从 DirPartyTable 获取名称（如果它不存在）并将其用作查找中的字段。如果我没记错的话，支持主表上的显示方法。

根据您要完成的具体工作，可能会有更简单的方法。您可以将 display 方法添加到 SmmBusRelTable 的 AutoLookup 表字段组中，而不必重写 lookup() 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-28T19:55:02.650

在 sysTableLookup 中组合多个数据源实际上非常容易。这是我曾经能够从`EcoResProductTranslation`查找项目中过滤名称的技巧。

1) 创建一个组合所有数据源的视图，并将您希望在查找中看到的字段添加到视图中。
2) 从步骤 1 中创建的视图创建一个查询。
3) 使用这些来执行您的查找，如下所示...

```
static client void lookupItemActive(FormStringControl _ctrl)
{
    SysTableLookup sysTableLookup = SysTableLookup::newParameters(tablenum(<ViewName>),_ctrl);
    Query          query = new Query(queryStr(<QueryName>));

    sysTableLookup.addLookupfield(fieldnum(<ViewName>, ItemId));
    sysTableLookup.addLookupfield(fieldNum(<ViewName>, Name));
    sysTableLookup.addLookupfield(fieldNum(<ViewName>, ItemGroupId));
    sysTableLookup.addLookupfield(fieldnum(<ViewName>, Status));
    sysTableLookup.addLookupfield(fieldnum(<ViewName>, RevId));
    sysTableLookup.addLookupfield(fieldnum(<ViewName>, ItemType));

    sysTableLookup.parmQuery(query);
    sysTableLookup.performFormLookup();
} 
```