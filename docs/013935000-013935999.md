# StackOverflow 问答 13935000-13935999

# java - 使用 FileInputStream 的文件输入无法正常工作

> ID：13935002
> 
> 赞同：0
> 
> 时间：2012-12-18T14:23:57.673
> 
> 标签：java, file-io, newline, fileinputstream

下面的程序应该打印出`String`“Humpty Dumpty sat on a wall,\n Humpty Dumpty has a great fall”。到一个文件并输入回来。

```
package io;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.PrintStream;

public class ByteIO {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String output = "Humpty Dumpty sat on a wall,\n Humpty Dumpty had a great fall.";
        System.out.println("Output String : " + output);
        try(PrintStream out = new PrintStream("F:\\Test.txt")) {
            out.println(output);
        } catch(FileNotFoundException e) {
            e.printStackTrace();
        }

        String input = "";
        try(FileInputStream in = new FileInputStream("F:\\Test.txt")) {
            while(in.read() != -1)
                input += (char)in.read();
        } catch(FileNotFoundException e) {
            e.printStackTrace();
        } catch(IOException e) {
            e.printStackTrace();
        }
        System.out.println("Input String : " + input);
    }
} 
```

然而，`String`我得到的`FileInputStream`是“upyDmt a nawl, upyDmt a ra al?”！另外，当我打开文件“Test.txt”时，我发现输出`String`变成了“Humpty Dumpty sat on a wall, Humpty Dumpty has a great fall”。在一行中。去哪儿了`\n`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:27:41.487

你打`in.read()`了两次电话：

```
while(in.read() != -1)
    input += (char)in.read(); 
```

这每次迭代读取两个字符而不是一个字符，因此您每次都有效地丢弃一个字符。

尝试将字符存储在 while 条件中，然后将该字符添加到`input`：

**编辑：基于 JavaNewbie_M107 的评论**

```
int i;    
while((i = in.read()) != -1)
   input += (char)i; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:28:35.060

对于第二部分，Windows（以及许多应用程序，如记事本）不将 \n 识别为换行符。在 Windows 中，\r\n 标记一个新行。尝试用更严肃的编辑程序打开（写字板就足够了），你会看到它的格式正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:58:26.157

这是我的问题的正确解决方案：

```
int i = 0;
char c;
    do {
        c = (char)i;
        input += c;
        i = in.read();
    } while(i != -1); 
```

前面多余的空格通过一个`.trim()`方法去掉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:29:30.430

正如 Hunter 所说，您需要将代码更改为此

```
char c;
while((c=in.read()) != -1)
input += c; 
```

# javascript - 如何在 knockout.js 中调试脚本执行超时？

> ID：13935003
> 
> 赞同：1
> 
> 时间：2012-12-18T14:24:04.033
> 
> 标签：javascript, knockout.js, kendo-ui

我正在使用 knockout.js 数据绑定开发一个相当复杂的 kendo-ui Web 应用程序。虽然应用程序在现代系统上运行良好，但它会在较慢的系统上触发脚本执行超时（著名的“此页面上有一个长时间运行的 javascript - 你想停止它吗？”对话框）。

此警告出现在模型与 绑定后。`ko.applyBindings()`我唯一的提示是脚本停止在`ko.utils.arrayIndexOf`，因为受影响的浏览器是 IE8 我无法提取有意义的堆栈跟踪，我正在使用淘汰赛 2.2.1。

调试这些问题的最佳策略是什么？我很高兴知道哪个小部件/绑定导致超时。

# python - Python subprocess.call() 为每个 stdout 和 stderr 行添加前缀

> ID：13935012
> 
> 赞同：5
> 
> 时间：2012-12-18T14:25:07.017
> 
> 标签：python, datetime, logging, subprocess, stdout

我正在使用 python 来运行一些 shell 脚本、RScripts、python 程序等。这些程序可能会运行很长时间，并且可能会向 stdout 和 stderr 输出大量（日志记录）信息。我正在使用以下（Python 2.6）代码，它工作正常：

```
stdoutFile=open('stdout.txt', 'a')
stderrFile=open('stderr.txt', 'a')
subprocess.call(SHELL_COMMAND, shell=True, stdout=stdoutFile, stderr=stderrFile)
stdoutFile.close()
stderrFile.close() 
```

这主要是记录到文件中的信息，并且可以在很长一段时间内生成此信息。因此我想知道是否可以在每一行前面加上日期和时间？

例如，如果我当前要登录：

```
Started
Part A done
Part B done
Finished 
```

然后我希望它是：

```
[2012-12-18 10:44:23] Started
[2012-12-18 12:26:23] Part A done
[2012-12-18 14:01:56] Part B done
[2012-12-18 22:59:01] Finished 
```

注意：*修改我运行的程序不是和选项，因为这个 python 代码有点像这些程序的包装器。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:27:01.680

与其向 的`stdout`和`stderr`参数提供文件`subprocess.call()`，不如直接创建一个`Popen`对象并创建`PIPE`s，然后在此管理器脚本中读取这些管道，并在写入所需的任何日志文件之前添加任何您想要的标签。

```
def flush_streams_to_logs(proc, stdout_log, stderr_log):
    pipe_data = proc.communicate()
    for data, log in zip(pipe_data, (stdout_log, stderr_log)):
        # Add whatever extra text you want on each logged message here
        log.write(str(data) + '\n')

with open('stdout.txt', 'a') as stdout_log, open('stderr.txt', 'a') as stderr_log:
    proc = subprocess.Popen(SHELL_COMMAND, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    while proc.returncode is None:
        flush_streams_to_logs(proc, stdout_log, stderr_log)
    flush_streams_to_logs(proc, stdout_log, stderr_log) 
```

请注意，`communicate()`阻塞直到子进程退出。您可能希望直接使用子进程的流，以便拥有更多实时日志记录，但是您必须自己处理并发和缓冲区填充状态。

# jira - jira 5.2 中的仅查看仪表板

> ID：13935018
> 
> 赞同：2
> 
> 时间：2012-12-18T14:25:21.867
> 
> 标签：jira, dashboard

我们希望实现的目标是允许客户查看只读仪表板，该仪表板将仅显示该客户问题的状态。这可以是分配给特定组/与特定组关联的默认仪表板。有没有办法配置仪表板来实现这一点？提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:51:58.070

编辑权限由问题所在项目使用的权限方案控制。因此，要将显示的问题设为只读，您需要确定问题来自哪些 JIRA 项目并更改所有这些项目的权限方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T19:39:32.523

要创建只读仪表板，您必须在（基于 Flash 的）工作流编辑器中编辑工作流（项目/管理/工作流/方案：编辑）。

我建议您首先克隆默认工作流程并对克隆进行更改（而不是编辑默认工作流程）。

“全局转换”列表中将包含项目。默认情况下，“用户”组的所有成员都有权执行这些转换（例如，即使您更改了项目的权限方案以防止只读用户创建问题或评论）。

1> 删除“全局转换”列表中的所有项目

“状态”列表中会有项目。“已解决”状态是“完成”全局转换的隐含部分，因此需要将其添加到工作流中。

2> 将“已解决”项目从“状态”列表拖到工作流中。

创建过渡需要选择工作流编辑器左上角的 3 个按钮之一，这些按钮与鼠标指针按钮组合在一起。

3> 使用上述按钮选择过渡类型（直线、多边形线、贝塞尔线）。

4> 单击（并释放）过渡的起点（例如，“进行中”）。鼠标指针下方会出现一个箭头。

5> 单击（并释放）转换的目标点（例如，“完成”）。系统将提示您为转换命名（您为此名称输入的文本将出现在执行转换的经典问题视图中的按钮上），例如：“ChangeToDone”。

新的过渡现在可供所有人使用，除非您在某些条件下将其锁定：

6> 单击类似齿轮的按钮（在转换名称的右侧）并选择“查看条件”。

7> 单击“添加新条件以限制何时可以执行此转换”。

8> 选择一个条件（例如“仅受让人条件”），滚动到列表底部，然后单击“添加”按钮。

现在您应该有一个只能由满足所需条件的用户执行的工作流转换。

重复上述步骤以在您在项目中使用的所有状态之间进行条件转换。

要将新的工作流程方案用于您的项目，请单击“切换方案”按钮（项目/管理/工作流程/方案），然后单击“关联”按钮。

关联过程完成后，以不满足任何转换条件的用户身份登录。以该用户身份登录时，您应该无法执行转换。

# java - java中的一键按下多个动作

> ID：13935019
> 
> 赞同：-2
> 
> 时间：2012-12-18T14:25:23.707
> 
> 标签：java, swing, keylistener, cardlayout

我正在尝试创建一个简单的登录系统，我希望用户能够在他们按下回车按钮时继续下一部分，并且我设法让它在注册部分工作，这样当用户完成输入在他们的详细信息中，他们可以按回车键，程序进入下一部分，但我想要这样，当用户输入他们的登录详细信息时，他们可以按回车键，然后程序将执行下一部分代码。

```
 card3 = new JPanel();
    usernameFieldone = new JTextField(10);
    usernameLabel = new JLabel("Username:");
    usernameLabel.setLabelFor(usernameFieldone);
    passwordFieldone = new JPasswordField(10);
    passwordLabel = new JLabel("Password:");
    passwordLabel.setLabelFor(passwordFieldone);
    passwordFieldre = new JPasswordField(10);
    passwordLabelre = new JLabel("Confirm Password: ");
    passwordLabelre.setLabelFor(passwordFieldre);
    passwordFieldre.addKeyListener(this);
    OKButton = new JButton("OK");
    OKButton.addActionListener(this);
    backButton = new JButton("Back");
    backButton.addActionListener(this); 

public void keyReleased(KeyEvent e){
    CardLayout cl = (CardLayout)(cards.getLayout());

    if(e.getKeyCode()==KeyEvent.VK_ENTER){
        if(
        Register();
    }
}` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:39:55.407

这是一个例子：

```
(...)
//register a Key listener event
myComponent.addKeyListener(new java.awt.event.KeyAdapter() {
        public void keyPressed(java.awt.event.KeyEvent evt) {
            enter_Pressed(evt);
        }
    });

(...)

private void enter_Pressed(java.awt.event.KeyEvent evt){                                        
    //if ENTER is pressed
    if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
        //do someting
    }
} 
```

# c++ - 从 Visual Studio 2010 运行 BOOST 单元测试

> ID：13935025
> 
> 赞同：2
> 
> 时间：2012-12-18T14:25:47.343
> 
> 标签：c++, unit-testing, boost-test

我刚刚开始使用[QuantLib](http://quantlib.org/index.shtml)项目。定义了很多 BOOST 单元测试，因此问题是：是否有一种简单的方法可以从 Visual Studio 有选择地运行这些测试（并查看结果）？

到目前为止，我只在 .Net 语言中使用过单元测试，如果你使用 MsTest，你可以使用内置的测试运行器，或者其他框架的一些附加组件（我使用 Resharper 和 TestDriven.NET）。在那里你可以选择你运行的测试，你可以在附加的调试器的情况下运行它们（不幸的是，这有时很有用）。在非托管 C++ 中是否有类似的 BOOST 测试插件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-08T12:42:13.207

是的你可以！

如果您的 boost 单元测试项目定义正确，那么您可以通过单击从 VS10 调试器运行整个测试项目

```
right click on project --> Debug --> Start new instance 
```

这将在 VS 框架内运行测试，这将为您提供所有调试器的好东西。

要运行特定的测试套件/用例，只需在下编辑项目命令行参数

```
right click on project --> Properties --> General --> Debugging 
```

并根据其他答案中的链接添加参数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T14:46:02.917

您可以通过命令行运行任何测试用例或测试套件。[按名称运行测试](http://www.boost.org/doc/libs/1_52_0/libs/test/doc/html/utf/user-guide/runtime-config/run-by-name.html)

它甚至允许使用通配符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-08T22:02:00.457

[ReSharper C++](https://www.jetbrains.com/resharper-cpp/)支持 Boost 测试的发现和选择性运行/调试（使用 Boost 1.59 及更高版本）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T05:53:38.847

我正在使用 Boost 单元测试适配器。它是免费的，并且输出非常好。它还可以列出单个测试消耗的时间，您可以启动单个测试和一组测试。

你可以在这里下载：

[https://visualstudiogallery.msdn.microsoft.com/5f4ae1bd-b769-410e-8238-fb30beda987f?SRC=VSIDE](https://visualstudiogallery.msdn.microsoft.com/5f4ae1bd-b769-410e-8238-fb30beda987f?SRC=VSIDE)

# javascript - 如何清除文本字段？

> ID：13935027
> 
> 赞同：-3
> 
> 时间：2012-12-18T14:25:50.500
> 
> 标签：javascript, jquery, html, css

我想在文本字段旁边放置一个十字按钮，单击它会清除用户输入的值。换句话说，它清空了字段。请帮助..而且我也想集中精力，但大约 2 或 3 秒后..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:27:12.740

像这样：

```
$('#myButton').click( function () {
    $('#myField').val('');
}); 
```

或者没有 jQuery

```
document.getElementById('myButton').onclick = function () {
    document.getElementById('myField').value = '';
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:28:27.543

试试这个，

```
$('#button').click(function(){
  $('#inputBox').val('');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:27:13.623

你有没有尝试过任何东西？但这应该可以（误读后编辑，见下文）：

`$('#your_button').click(function() { $('#your_textbox').val(''); });`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:28:37.827

在 Javascript 中：

```
document.getElementById('textField1').value = ""; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T14:29:12.053

假设您的文本字段如下所示：

```
<input type="text" id="myText"></input> 
```

你的按钮看起来像这样：

```
<input type="button" id="myButton"></input> 
```

您只需要在 javascript 中执行此操作：

```
<script type="text/javascript">
    var myButton = document.getElementById('myButton');
    myButton.addEventListener("click", function () { 
        document.getElementById('myText').value = ''; 
    }, false);
</script> 
```

如果您使用的是 jQuery，那就更容易了：

```
<script type="text/javascript">
   $('#myButton').click(function() {
      $('#myText').val('');
   });
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T14:32:08.780

好吧，学会把你的任务分解成更小的任务，一切都会变得容易得多。例如，在这里，您有 2 个任务：

1）在输入附近放置一个“X”按钮。这是通过 CSS 和 HTML 实现的。您的 HTML 可能如下所示：

然后你应该将你的图像与你的输入对齐

2) 实际擦除。在 jQuery 中：

```
$("#x_button").click( function() {
  $("#input_id").val( "" );    
}); 
```

但这是 Web 开发的真正基础，所以你真的应该考虑阅读一些关于它的书。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T14:33:19.413

您可以使用 html5 值来完成。

```
<input type="text" placeholder="Your text here"> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-18T14:36:11.307

这是一个示例：

html:

```
<input type="text" id="txtText" value="test value" />
<input type="button" id="btnClear" value="Clear" /> 
```

javascript:

```
$(document).ready(function () {
            $("#btnClear").click(ClearText);
        });

        function ClearText() {
            $("#txtText").val("");
        } 
```

# jquery - 具有平滑效果的 jScrollPane

> ID：13935028
> 
> 赞同：2
> 
> 时间：2012-12-18T14:26:00.243
> 
> 标签：jquery, scrollbar, smooth

我使用 jScrollPane 插件和我的代码：

```
<script type="text/javascript" id="sourcecode">
  $(function()
  {
  $('#mycontent').jScrollPane();
});
</script> 
```

这是工作。但我想为我的滚动条添加平滑效果。我该怎么做？[http://manos.malihu.gr/tuts/custom-scrollbar-plugin/fluid_scrollbar_example.html](http://manos.malihu.gr/tuts/custom-scrollbar-plugin/fluid_scrollbar_example.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:53:03.620

向 .jspDrag 添加到“顶部”css 属性的过渡

```
.jspDrag{
    transition: top 0.3s ease-out;
} 
```

它仅适用于滚动条，对于内容，您可以使用 .jspPane 执行相同操作，但使用 mouseWheel 时会出现问题

所以我建议使用另一个支持平滑滚动的库：

*   漂亮的卷轴：[http ://areaaperta.com/nicescroll/demo.html](http://areaaperta.com/nicescroll/demo.html)
*   自定义内容滚动条：http: [//manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)

# c# - 绘图期间插值异常

> ID：13935032
> 
> 赞同：1
> 
> 时间：2012-12-18T14:26:14.743
> 
> 标签：c#, drawing, interpolation, antialiasing, smoothing

我有抗锯齿平滑模式和绘图的问题。假设我有一个在同一点具有最小值和最大值的信号。所以我想显示它以查看它“更厚”的位置。

所以我使用的方法是绘制垂直线并使用抗锯齿。这是问题所在，上升沿似乎是抗锯齿的，但下降沿没有。如果我在第二个信号中添加了一些噪音，则可以观察到同样的事情。

### 无噪音

### 有噪音

![有噪音][2]

谁能指出我错过了什么？或者这个问题来自其他地方？

代码（从评论中移出）：

```
Bitmap drawBitmap = new Bitmap(pictureBox1.Height, _
                               pictureBox1.Width, _
                               System.Drawing.Imaging.PixelFormat.Format32bppArgb);

Graphics drawGraph;

Point[] pts = new Point[] { new Point(0, 60), new Point(0, 59), new Point(1, 35), _
                            new Point(1, 47), new Point(2, 25), new Point(2, 35), _
                            new Point(3, 17), new Point(3, 25), new Point(4, 12), _
                            new Point(4, 27), new Point(5, 10), new Point(5, 22), _
                            new Point(6, 10), new Point(6, 11), new Point(7, 11), _
                            new Point(7, 16), new Point(8, 16), new Point(8, 24), _
                            new Point(9, 24), new Point(9, 34), new Point(10, 34), _
                            new Point(10, 46), new Point(11, 46), new Point(11, 59), _
                            new Point(12, 59), new Point(12, 72)};

using (drawGraph = Graphics.FromImage(drawBitmap)) {

    drawGraph.InterpolationMode = Drawing2D.InterpolationMode.HighQualityBicubic;
    drawGraph.SmoothingMode = Drawing2D.SmoothingMode.AntiAlias; 

for (int i = 1; i < pts.Length - 1; i += 2) {
    drawGraph.DrawLine(new Pen(Color.Black, 1), pts[i], pts[i - 1]); 
    drawGraph.DrawLine(new Pen(Color.Black, 1), pts[i], pts[i + 1]);
    }
} 

pictureBox1.Image = drawBitmap; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:00:50.443

也应用像素偏移模式：

```
drawGraph.PixelOffsetMode = Drawing2D.PixelOffsetMode.HighQuality; 
```

可以删除，`InterpolationMode`因为它与线条无关（仅在调整大小时适用于图像）。

# visual-studio-2010 - 如何在 MSVS2012 调试器中自动更新属性？

> ID：13935035
> 
> 赞同：0
> 
> 时间：2012-12-18T14:26:31.570
> 
> 标签：visual-studio-2010, visual-studio, debugging, visual-studio-2012

我正在使用 MSVS2012 并使用 C++ .NET 进行开发。调试时，我会观察某些类的*属性*变量。当属性更改时，我必须使用手表框左侧的小“2 箭头图标”手动更新手表（因为它意味着调用 get() 到对象实例）。

我的问题是：是否可以设置调试器以使其能够自动调用 get() 方法以刷新显示的值？换句话说，是否可以将属性值视为简单变量？

**注意**：也许这也适用于 MSVS2010？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:45:22.323

好吧，您不能自动刷新属性，这是有原因的.... [http://msdn.microsoft.com/en-us/library/z4ecfxd9.aspx](http://msdn.microsoft.com/en-us/library/z4ecfxd9.aspx) 调用属性

# css - Visual Studio Web Essentials 插件和 Microsoft.Web.Languages 问题

> ID：13935036
> 
> 赞同：3
> 
> 时间：2012-12-18T14:26:34.753
> 
> 标签：css, visual-studio, visual-studio-2012, less, web-essentials

我的 Visual Studio 2012 上安装了 Web Essentials 插件。Web Essentials 版本是 2.1。当我尝试在 LESS 文件上使用“对所有属性进行排序”功能时，会弹出一条警告消息：

```
---------------------------
Microsoft Visual Studio
---------------------------
Could not load file or assembly 'Microsoft.Web.Languages, Version=1.1.0.0, 
Culture=neutral, PublicKeyToken=24771839d8d21066' or one of its dependencies. 
The system cannot find the file specified. 
```

我当然不能使用该功能。我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:23:11.430

这在 2.1 后一周发布的 2.2 版本中得到了修复

# android - 如何添加扩展的 TableLayout 以确保它位于底部

> ID：13935037
> 
> 赞同：0
> 
> 时间：2012-12-18T14:26:37.780
> 
> 标签：android, xml, android-relativelayout, android-tablelayout

我在自定义布局方面遇到了一些问题（ToDoView 正在扩展 TableLayout），我不知道如何确保它在其他所有内容下（其他所有内容，我的意思是 EditText 和按钮）。

截至目前，我的应用程序崩溃：

> 12-18 07:11:13.886：E/AndroidRuntime(3228)：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.parrishb.todo/com.parrishb.todo.ToDoActivity}：android.view.InflateException：二进制XML 文件第 44 行：膨胀类 com.parrishb.todo.ToDoView 时出错

这是xml文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/rl"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".ToDoActivity" >

    <EditText
        android:id="@+id/myEditText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/addItemContentDescription"
        android:hint="@string/addItemHint" />

    <Button
        android:id="@+id/pickDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/myEditText"
        android:text="Change the Date" />

    <Button
        android:id="@+id/pickTime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@id/myEditText"
        android:layout_toRightOf="@id/pickDate"
        android:text="Change the Time" />

    <DatePicker
        android:id="@+id/datePicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TimePicker
        android:id="@+id/timePicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <com.parrishb.todo.ToDoView
        android:id="@+id/tdv"
        class="com.parrishb.todo.ToDoView"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_below="@id/datePicker"
        />

</RelativeLayout> 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:10:35.743

我意识到在我的 ToDoView 类中，我缺少构造函数：

```
public ToDoView(Context c, AtrributeSet as){
    super(c, as);
    //...
} 
```

在[https://stackoverflow.com/a/3739853/1888585找到](https://stackoverflow.com/a/3739853/1888585)

# android - 使用 lrucache 和 asynctask 不显示位图

> ID：13935040
> 
> 赞同：3
> 
> 时间：2012-12-18T14:26:45.993
> 
> 标签：android, bitmap, thumbnails

我正在尝试创建一个简单的文件管理器，但在加载缩略图（位图）时遇到问题。我想使用这些技巧来使用 AsyncTask 和 Lru 缓存：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

一切都很顺利，直到我尝试实现 lru 缓存。我的意思是，如果没有 lru 缓存位图正在加载，但滚动它并不流畅。使用 lru 缓存，滚动很流畅，但位图不想立即加载。我必须向下和向上滚动，然后再加载位图。

这就是我的意思（对不起质量不好）：

[http://www.youtube.com/watch?v=Xfkd6Esx7D0](http://www.youtube.com/watch?v=Xfkd6Esx7D0)

这是我的 ArrayAdapter：

```
public class AdapterFiles extends ArrayAdapter<String>{
private int resource;
private static final String PREFERENCES_NAME = "Preferences";
private static final String CHECKBOX_FIELD = "thumbnails";
private static final String LIST_FIELD = "colorlist";

private SharedPreferences preferences;
private boolean thumbnails;
private OnClickListener onItemMenuClickListener;
private String item;
private ViewHolder viewHolder;
public static ArrayList<Integer> selectedIds = new ArrayList<Integer>();
private String colorrow;
private final ThumbnailLoader tnloader = new ThumbnailLoader();

public AdapterFiles(Context context, int textViewResourceId, int label, List<String> objects) {
        super(context, textViewResourceId, objects);
        preferences = context.getSharedPreferences(PREFERENCES_NAME, Activity.MODE_PRIVATE);
        thumbnails = preferences.getBoolean(CHECKBOX_FIELD, false);
        resource = textViewResourceId;           
}

static class ViewHolder {
    TextView label;
    ImageView ikonka;
    TextView size;
    TextView date;
    ImageButton context_menu;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    RelativeLayout RowView;
        item = getItem(position);
        preferences.getString(LIST_FIELD, "#FF0099CC");

        if(convertView == null) {
        RowView = new RelativeLayout(getContext());
        LayoutInflater inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(resource, RowView, true);
        viewHolder = new ViewHolder();
        viewHolder.label = (TextView)RowView.findViewById(R.id.label);
        viewHolder.ikonka = new ImageView(getContext());
        viewHolder.ikonka = (ImageView)RowView.findViewById(R.id.icon);
        viewHolder.ikonka.setTag(item);
        viewHolder.size = (TextView)RowView.findViewById(R.id.size);
        viewHolder.date = (TextView)RowView.findViewById(R.id.date);
        viewHolder.context_menu = (ImageButton)RowView.findViewById(R.id.context_menu);
        viewHolder.context_menu.setFocusable(false);
        viewHolder.context_menu.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if(onItemMenuClickListener != null) onItemMenuClickListener.onClick(v);
            }
        });
        RowView.setTag(viewHolder);
        } else {
            RowView = (RelativeLayout)convertView;
            viewHolder = (ViewHolder) RowView.getTag();
        }

            colorrow = "#FF99D6EB"; 

        RowView.setBackgroundColor(selectedIds.contains(position) ? Color.parseColor(colorrow) : android.R.color.transparent);  

        File file = new File(item);
        if (file.isDirectory()){
            if(file.canRead()){
            viewHolder.ikonka.setImageResource(R.drawable.folder);
            }
            else{
            viewHolder.ikonka.setImageResource(R.drawable.foldernoway); 
            }
        }else if(item.endsWith(".doc") || item.endsWith(".docx")){
             viewHolder.ikonka.setImageResource(R.drawable.docs);}

        else if(item.endsWith(".xls") || item.endsWith(".xlsx")){
            viewHolder.ikonka.setImageResource(R.drawable.xls);}

        else if(item.endsWith(".ppt") || item.endsWith(".pptx")){
            viewHolder.ikonka.setImageResource(R.drawable.ppt);}

        else if(item.endsWith(".txt")){
            viewHolder.ikonka.setImageResource(R.drawable.txt);}

        else if(item.endsWith(".mp3") || item.endsWith(".wma") || item.endsWith(".m4a") || item.endsWith(".ogg")){
            viewHolder.ikonka.setImageResource(R.drawable.music);}

        else if(item.endsWith(".apk")){
            viewHolder.ikonka.setImageResource(R.drawable.android);}

        else if(item.endsWith(".pdf")){
            viewHolder.ikonka.setImageResource(R.drawable.adobe);}

        else if(item.endsWith(".jpg") || item.endsWith(".JPG") || item.endsWith(".png") || item.endsWith(".jpeg")){

            if(thumbnails == false){
            viewHolder.ikonka.setImageResource(R.drawable.image);   
            }else{

                tnloader.loadBitmap(item, viewHolder.ikonka);
            }
            }           
        else if(item.endsWith(".avi") || item.endsWith(".3gp") || item.endsWith(".mp4")){

                viewHolder.ikonka.setImageResource(R.drawable.video);   

        }
        else if(item.endsWith(".rar") || item.endsWith(".zip") || item.endsWith(".tar")){
            viewHolder.ikonka.setImageResource(R.drawable.zip);}

        else{
            viewHolder.ikonka.setImageResource(R.drawable.noname);
        }

        viewHolder.label.setText(file.getName());

        if (file.isDirectory()){
        viewHolder.size.setText(R.string.folder);}
        else{
            double bytes = file.length();
            double kilobytes = (bytes / 1024);
            double megabytes = (kilobytes / 1024);
            if (bytes < 6000){
        viewHolder.size.setText(bytes + " b");  
            }else{
        viewHolder.size.setText(String.format( "%.2f MB", megabytes ));}    
        }

        Date lastModDate = new Date(file.lastModified());
        SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm");  
        String formattedDateString = formatter.format(lastModDate);

        viewHolder.date.setText(formattedDateString);

        viewHolder.context_menu.setTag(new Integer(position));          

        return RowView;

    } 

    public void setOnItemMenuClickListener(
        OnClickListener onItemMenuClickListner) {
    this.onItemMenuClickListener = onItemMenuClickListner;
    }
} 
```

和缩略图加载器：

```
public class ThumbnailLoader {

Context context;
int memClass = 80;

public void loadBitmap(String filePath, ImageView imageView) {
    final String imageKey = String.valueOf(filePath);

    final Bitmap bitmap = getBitmapFromMemCache(imageKey);
    if (bitmap != null) {
        imageView.setImageBitmap(bitmap);
    } else {
        imageView.setImageResource(R.drawable.image);
        BitmapWorkerTask task = new BitmapWorkerTask(imageView);
        task.execute(filePath);
    }

}

public static boolean cancelPotentialWork(String data, ImageView imageView) {
    final BitmapWorkerTask bitmapWorkerTask = getBitmapWorkerTask(imageView);

    if (bitmapWorkerTask != null) {
        final String bitmapData = bitmapWorkerTask.getFilePath();
        if (bitmapData != data) {
            // Cancel previous task
            bitmapWorkerTask.cancel(true);
        } else {
            // The same work is already in progress
            return false;
        }
    }
    // No task associated with the ImageView, or an existing task was cancelled
    return true;
}

private static BitmapWorkerTask getBitmapWorkerTask(ImageView imageView) {
       if (imageView != null) {
           final Drawable drawable = imageView.getDrawable();
           if (drawable instanceof AsyncDrawable) {
               final AsyncDrawable asyncDrawable = (AsyncDrawable) drawable;
               return asyncDrawable.getBitmapWorkerTask();
           }
        }
        return null;
    }

public Bitmap loadImageFromSdCard(String filePath, int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(filePath, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeFile(filePath, options);
} 

public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
// Raw height and width of image
final int height = options.outHeight;
final int width = options.outWidth;
int inSampleSize = 1;

if (height > reqHeight || width > reqWidth) {
    if (width > height) {
        inSampleSize = Math.round((float)height / (float)reqHeight);
    } else {
        inSampleSize = Math.round((float)width / (float)reqWidth);
    }
}
return inSampleSize;}

class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap> {

    private String mFilePath;
    private final WeakReference<ImageView> imageViewReference;

    public BitmapWorkerTask(ImageView imageView) {
        // Use a WeakReference to ensure the ImageView can be garbage collected
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    public String getFilePath() {
        return mFilePath;
    }

    // Decode image in background.
    @Override
    protected Bitmap doInBackground(String... params) {
        mFilePath = params[0];       
        final Bitmap bitmap = loadImageFromSdCard(mFilePath, 72, 72);
        addBitmapToMemoryCache(String.valueOf(mFilePath), bitmap);
        return bitmap;
    }

    // Once complete, see if ImageView is still around and set bitmap.
    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (isCancelled()) {
            bitmap = null;
        }

        if (imageViewReference != null && bitmap != null) {
            final ImageView imageView = imageViewReference.get();
            final BitmapWorkerTask bitmapWorkerTask = getBitmapWorkerTask(imageView);
            if (this == bitmapWorkerTask && imageView != null) {
                imageView.setImageBitmap(bitmap);
            }
        }
    }
}

static class AsyncDrawable extends BitmapDrawable {
    private final WeakReference<BitmapWorkerTask> bitmapWorkerTaskReference;

    public AsyncDrawable(BitmapWorkerTask bitmapWorkerTask) {
        super();
        bitmapWorkerTaskReference = new WeakReference<BitmapWorkerTask>(bitmapWorkerTask);
    }

    public BitmapWorkerTask getBitmapWorkerTask() {
        return bitmapWorkerTaskReference.get();
    }
}

// Get memory class of this device, exceeding this amount will throw an
// OutOfMemory exception.

// Use 1/8th of the available memory for this memory cache.
final int cacheSize = 1024 * 1024 * memClass / 8;

public LruCache<String, Bitmap> mMemoryCache = new LruCache<String, Bitmap>(cacheSize) {

    @Override
    protected int sizeOf(String key, Bitmap bitmap) {
        // The cache size will be measured in bytes rather than number of items.
        return bitmap.getByteCount();
    }
};

public void addBitmapToMemoryCache(String key, Bitmap bitmap) {
    if (getBitmapFromMemCache(key) == null) {
        mMemoryCache.put(key, bitmap);
    }
}

public Bitmap getBitmapFromMemCache(String key) {
    return mMemoryCache.get(key);
}} 
```

我该如何解决？

**更新**

我找到了解决方案。也许它会帮助某人。

```
public class ThumbnailLoader{
static Context context;
int memClass = 80;

public ThumbnailLoader(Context context) {
    ThumbnailLoader.context = context;
}

public void loadBitmap(String filePath, ImageView imageView) {
    final String imageKey = String.valueOf(filePath);
    final Bitmap bitmap = getBitmapFromMemCache(imageKey);
    Bitmap preloadbitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.image);

    if (bitmap != null) {
        imageView.setImageBitmap(bitmap);
    }else if (cancelPotentialWork(filePath, imageView)) {
        BitmapWorkerTask task = new BitmapWorkerTask(imageView);
        final AsyncDrawable asyncDrawable = new AsyncDrawable(context.getResources(), preloadbitmap, task);
        imageView.setImageDrawable(asyncDrawable);
        task.execute(filePath);
    }

}

public static boolean cancelPotentialWork(String data, ImageView imageView) {
    final BitmapWorkerTask bitmapWorkerTask = getBitmapWorkerTask(imageView);

    if (bitmapWorkerTask != null) {
        final String bitmapData = bitmapWorkerTask.getFilePath();
        if (bitmapData != data) {
            // Cancel previous task
            bitmapWorkerTask.cancel(true);
        } else {
            // The same work is already in progress
            return false;
        }
    }
    // No task associated with the ImageView, or an existing task was cancelled
    return true;
}

private static BitmapWorkerTask getBitmapWorkerTask(ImageView imageView) {
       if (imageView != null) {
           final Drawable drawable = imageView.getDrawable();
           if (drawable instanceof AsyncDrawable) {
               final AsyncDrawable asyncDrawable = (AsyncDrawable) drawable;
               return asyncDrawable.getBitmapWorkerTask();
           }
        }
        return null;
    }

public Bitmap loadImageFromSdCard(String filePath, int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(filePath, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeFile(filePath, options);
} 

public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
// Raw height and width of image
final int height = options.outHeight;
final int width = options.outWidth;
int inSampleSize = 1;

if (height > reqHeight || width > reqWidth) {
    if (width > height) {
        inSampleSize = Math.round((float)height / (float)reqHeight);
    } else {
        inSampleSize = Math.round((float)width / (float)reqWidth);
    }
}
return inSampleSize;}

class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap> {

    private String mFilePath;
    private final WeakReference<ImageView> imageViewReference;

    public BitmapWorkerTask(ImageView imageView) {
        // Use a WeakReference to ensure the ImageView can be garbage collected
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    public String getFilePath() {
        return mFilePath;
    }

    // Decode image in background.
    @Override
    protected Bitmap doInBackground(String... params) {
        mFilePath = params[0];       
        final Bitmap bitmap = loadImageFromSdCard(mFilePath, 68, 68);
        addBitmapToMemoryCache(String.valueOf(mFilePath), bitmap);
        return bitmap;
    }

    // Once complete, see if ImageView is still around and set bitmap.
    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (isCancelled()) {
            bitmap = null;
        }

        if (imageViewReference != null && bitmap != null) {
            final ImageView imageView = imageViewReference.get();
            final BitmapWorkerTask bitmapWorkerTask = getBitmapWorkerTask(imageView);
            if (this == bitmapWorkerTask && imageView != null) {
                imageView.setImageBitmap(bitmap);
            }
        }
    }
}

static class AsyncDrawable extends BitmapDrawable {
    private final WeakReference<BitmapWorkerTask> bitmapWorkerTaskReference;

    public AsyncDrawable(Resources res, Bitmap bitmap, BitmapWorkerTask bitmapWorkerTask) {
        super(res, bitmap);
        bitmapWorkerTaskReference = new WeakReference<BitmapWorkerTask>(bitmapWorkerTask);
    }

    public BitmapWorkerTask getBitmapWorkerTask() {
        return bitmapWorkerTaskReference.get();
    }
}

final int cacheSize = 1024 * 1024 * memClass / 8;

public LruCache<String, Bitmap> mMemoryCache = new LruCache<String, Bitmap>(cacheSize) {

    @Override
    protected int sizeOf(String key, Bitmap bitmap) {
        // The cache size will be measured in bytes rather than number of items.
        return bitmap.getByteCount();
    }
};

public void addBitmapToMemoryCache(String key, Bitmap bitmap) {
    if (getBitmapFromMemCache(key) == null) {
        mMemoryCache.put(key, bitmap);
    }
}

public Bitmap getBitmapFromMemCache(String key) {
    return mMemoryCache.get(key);
}
} 
```

此代码应粘贴在您要查看位图的位置：

```
ThumbnailLoader tnloader = new ThumbnailLoader(getContext());
tnloader.loadBitmap(filepath, imageView); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:35:45.247

检查这个问题：

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)

PS。我遇到了几乎相同的问题，我记得图像仅在从网络加载后才出现 - 可能是因为缓存或其他原因。这个链接对我很有帮助。

**更新**

您还可以将每个图像视图的 url 存储在标签字段 (setteag\gettag) 中。教程你可以在[这里](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)找到：

# javascript - 将函数分配给javascript中的全局变量

> ID：13935045
> 
> 赞同：2
> 
> 时间：2012-12-18T14:27:06.017
> 
> 标签：javascript

我有这样的功能： -

```
function test() {
    // code here
} 
```

我想将该函数分配`test()`给一个全局变量，以便我应该能够使用`window.newName()`. 我该如何分配这个？

我试过`window.newName = test();`了，但没有用。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:28:07.870

你很接近：

```
window.newName = test; 
```

如果像您一样包含大括号，它将分配执行函数的结果，而不是函数本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:29:15.920

使用时，`window.newName = test()`您实际上是在激活函数，这样，变量将获得函数返回的值（如果有），而不是对函数的引用。

你应该这样做：

```
window.newName = test; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:29:22.957

不要调用变量，只需分配它：

```
window.newName = test; 
```

如果您不需要使用其原始名称来调用它，您也可以使用函数表达式：

```
window.newName = function() {
    // code here
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T14:33:59.680

当你这样做时`window.newName = test()`，它的真正意思是“调用`test`，并将其返回值分配给`window.newName`.

你想要的是`window.newName = test;`

# javascript - SpaceTree如何在节点单击时添加子树

> ID：13935052
> 
> 赞同：3
> 
> 时间：2012-12-18T14:27:26.793
> 
> 标签：javascript, ruby-on-rails, infovis, thejit, space-tree

我编写了以下显示错误的代码：

`Cannot read property 'children' of null`

我希望在单击节点时加载子项。

```
request:function(nodeId, level, onComplete)
            {
                alert(nodeId+'p   '+level+' p  '+onComplete);
                var i=0;
              $.ajax({
                    url: '/users/userhierarchy.json?id=' + nodeId,
                   dataType: 'json',
                   success: function(json){
                        var tree = json;
                        var subtree = $jit.json.getSubtree(tree, nodeId);

                        $jit.json.prune(subtree, level);
                        i++;
                        ans= {
                            'id': nodeId,
                            'children': subtree.children
                        };
                        onComplete.onComplete(nodeId, ans);

                    },

                });

            } 
```

# android - 如何将图像扭曲为任何四边形？

> ID：13935053
> 
> 赞同：9
> 
> 时间：2012-12-18T14:27:36.323
> 
> 标签：android, image, clip, distortion

你们有没有一个想法，如何在任何四边形中扭曲图像？我想实现一个图像，你可以在任何方向拉任何角落，扭曲图像。任何人都知道如何做到这一点？我现在在 android 中使用和编写东西有一段时间了，但似乎 android 没有这样的功能。我真的不想写一个新的数学库:)。

问候，可以

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T15:17:20.427

~~看起来你需要[Canvas.drawBitmapMesh](http://goo.gl/5Emli)。Android SDK 中有一个示例展示了如何使用它。~~

您需要`Matrix`用于在`Canvas`. [您可以使用Matrix.polyToPoly](http://goo.gl/NKL1l)方法轻松创建这样的转换，它将您的位图图像适合任何四边形。它看起来像这样：

```
matrix.setPolyToPoly(
        new float[] { 
            0, 0, 
            bitmap.getWidth(), 0
            0, bitmap.getHeight(),
            bitmap.getWidth(), bitmap.getHeight() 
        }, 0, 
        new float[] { 
            x0, y0, 
            x1, y1, 
            x2, y2,
            x3, y3
        }, 0, 
        4);

canvas.drawBitmap(bitmap, matrix, paint); 
```

其中 x0-x3, y0-y3 是您的四边形顶点坐标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-07T23:23:58.720

@donmj 。我修复了你的代码。

```
public class PerspectiveDistortView extends View implements View.OnTouchListener {

private Paint paintRect, paintCircle;
public int LEFT;
public int TOP;
public int RIGHT;
public int BOTTOM;
Point CIRCLE_TOP_LEFT;
Point CIRCLE_TOP_RIGHT;
Point CIRCLE_BOTTOM_LEFT;
Point CIRCLE_BOTTOM_RIGHT;
private int lastX, lastY;
Bitmap image;
Matrix matrix2;
boolean isTouchCirclePoints = true;

public PerspectiveDistortView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    init();
}

public PerspectiveDistortView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
    init();
}

public PerspectiveDistortView(Context context, AttributeSet attrs,
                              int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
    init();
}

private void init() {
    this.setOnTouchListener(this);
    paintRect = new Paint();
    paintRect.setColor(0xffff0000);
    paintRect.setAntiAlias(true);
    paintRect.setDither(true);
    paintRect.setStyle(Paint.Style.STROKE);
    paintRect.setStrokeJoin(Paint.Join.BEVEL);
    paintRect.setStrokeCap(Paint.Cap.BUTT);
    paintRect.setStrokeWidth(3);
    paintCircle = new Paint();
    paintCircle.setColor(0xff000000);
    paintCircle.setAntiAlias(true);
    paintCircle.setDither(true);
    paintCircle.setStyle(Paint.Style.FILL_AND_STROKE);
    paintCircle.setStrokeJoin(Paint.Join.BEVEL);
    paintCircle.setStrokeCap(Paint.Cap.BUTT);

    LEFT = 90;
    TOP = 40;
    RIGHT = 500;
    BOTTOM = 700;
    CIRCLE_TOP_LEFT = new Point(LEFT, TOP);
    CIRCLE_TOP_RIGHT = new Point(RIGHT, TOP);
    CIRCLE_BOTTOM_LEFT = new Point(LEFT, BOTTOM);
    CIRCLE_BOTTOM_RIGHT = new Point(RIGHT, BOTTOM);

    image = BitmapFactory.decodeResource(getResources(), R.drawable.penguins);

    matrix2 = new Matrix();
}

@Override
protected void onDraw(Canvas canvas) {
    // Free Transform bitmap
    int bw = image.getWidth();
    int bh = image.getHeight();

    float[] pts = {
            // source
            0, 0,
            0, bh,
            bw, bh,
            bw, 0,
            // destination
            0, 0,
            0, 0,
            0, 0,
            0, 0};
    pts[8] = CIRCLE_TOP_LEFT.x;
    pts[9] = CIRCLE_TOP_LEFT.y;
    pts[10] = CIRCLE_BOTTOM_LEFT.x;
    pts[11] = CIRCLE_BOTTOM_LEFT.y;
    pts[12] = CIRCLE_BOTTOM_RIGHT.x;
    pts[13] = CIRCLE_BOTTOM_RIGHT.y;
    pts[14] = CIRCLE_TOP_RIGHT.x;
    pts[15] = CIRCLE_TOP_RIGHT.y;

    matrix2.setPolyToPoly(pts, 0, pts, 8, 4);
    canvas.drawBitmap(image, matrix2, null);
    isTouchCirclePoints = false;

    // line left
    canvas.drawLine(CIRCLE_TOP_LEFT.x, CIRCLE_TOP_LEFT.y, CIRCLE_BOTTOM_LEFT.x, CIRCLE_BOTTOM_LEFT.y, paintRect);
    // line top
    canvas.drawLine(CIRCLE_TOP_LEFT.x, CIRCLE_TOP_LEFT.y, CIRCLE_TOP_RIGHT.x, CIRCLE_TOP_RIGHT.y, paintRect);
    // line right
    canvas.drawLine(CIRCLE_TOP_RIGHT.x, CIRCLE_TOP_RIGHT.y, CIRCLE_BOTTOM_RIGHT.x, CIRCLE_BOTTOM_RIGHT.y, paintRect);
    // line bottom
    canvas.drawLine(CIRCLE_BOTTOM_LEFT.x, CIRCLE_BOTTOM_LEFT.y, CIRCLE_BOTTOM_RIGHT.x, CIRCLE_BOTTOM_RIGHT.y, paintRect);
    // circle top left
    canvas.drawCircle(CIRCLE_TOP_LEFT.x, CIRCLE_TOP_LEFT.y, 10, paintCircle);
    // circle top right
    canvas.drawCircle(CIRCLE_TOP_RIGHT.x, CIRCLE_TOP_RIGHT.y, 10, paintCircle);
    // circle bottom left
    canvas.drawCircle(CIRCLE_BOTTOM_LEFT.x, CIRCLE_BOTTOM_LEFT.y, 10, paintCircle);
    // circle bottom right
    canvas.drawCircle(CIRCLE_BOTTOM_RIGHT.x, CIRCLE_BOTTOM_RIGHT.y, 10, paintCircle);
}

@Override
public boolean onTouch(View view, MotionEvent event) {
    lastX = (int) event.getX();
    lastY = (int) event.getY();

    if (inCircle(lastX, lastY, CIRCLE_TOP_LEFT.x, CIRCLE_TOP_LEFT.y, 40)) {
        isTouchCirclePoints = true;
        CIRCLE_TOP_LEFT.set(lastX, lastY);
    } else if (inCircle(lastX, lastY, CIRCLE_TOP_RIGHT.x, CIRCLE_TOP_RIGHT.y, 40)) {
        isTouchCirclePoints = true;
        CIRCLE_TOP_RIGHT.set(lastX, lastY);
    } else if (inCircle(lastX, lastY, CIRCLE_BOTTOM_LEFT.x, CIRCLE_BOTTOM_LEFT.y, 40)) {
        isTouchCirclePoints = true;
        CIRCLE_BOTTOM_LEFT.set(lastX, lastY);
    } else if (inCircle(lastX, lastY, CIRCLE_BOTTOM_RIGHT.x, CIRCLE_BOTTOM_RIGHT.y, 40)) {
        isTouchCirclePoints = true;
        CIRCLE_BOTTOM_RIGHT.set(lastX, lastY);
    }
    invalidate();
    return true;
}

private boolean inCircle(float x, float y, float circleCenterX, float circleCenterY, float circleRadius) {
    double dx = Math.pow(x - circleCenterX, 2);
    double dy = Math.pow(y - circleCenterY, 2);

    if ((dx + dy) < Math.pow(circleRadius, 2)) {
        return true;
    } else {
        return false;
    }
}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-30T16:26:56.663

你的代码有问题。尽管它是正确的方法，但您已经反转了 float[] 参数，如 Android 文档中所示：

```
public boolean setPolyToPoly (float[] src, int srcIndex, float[] dst, int dstIndex, int pointCount)
WHERE
src: The array of src [x,y] pairs (points)
...
dst: The array of dst [x,y] pairs (points) 
```

因此，根据您的代码，矩阵应创建为：

```
matrix.setPolyToPoly(
        new float[] {
            x0, y0,
            x1, y1,
            x2, y2,
            x3, y3},
    0,
new float[] { 
        0, 0, 
        bitmap.getWidth(), 0
        0, bitmap.getHeight(),
        bitmap.getWidth(), bitmap.getHeight() 
    }, 0, 
    4); 
```

通过这种方式，应用程序运行良好，如图所示：

[![在此处输入图像描述](../Images/6d1fb75caf19b51b333c398c5a9d0987.png)](https://i.stack.imgur.com/CfPgm.png)

另一方面，关于 user2498079 在评论中所说的低端设备计算问题，您可以在矩阵转换计算之前使用一些易于操作的技术来减小源图像大小（例如颜色深度） . 这将使低端手机更容易实现这一任务。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-22T07:09:18.793

`matrix.setPolyToPoly`并且`canvas.drawBitmap`不能解决所有的矩阵变换。在这里，我找到了一个使用`canvas.drawBitmapMesh`.

[在 Android 上的某些情况下，将图像扭曲为四边形会失败](https://stackoverflow.com/questions/36308856/distorting-an-image-to-a-quadrangle-fails-in-some-cases-on-android)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-15T10:12:45.780

我希望这有帮助。左上角、右上角除了左下角和右下角外都在工作。有人可以添加它。我不知道如何做底部部分。:)

```
public class PerspectiveDistortView extends View  implements OnTouchListener {

private Paint paintRect, paintCircle;
public int LEFT;
public int TOP;
public int RIGHT;
public int BOTTOM;
Point CIRCLE_TOP_LEFT;
Point CIRCLE_TOP_RIGHT;
Point CIRCLE_BOTTOM_LEFT;
Point CIRCLE_BOTTOM_RIGHT;
private int lastX, lastY;
Bitmap image;
Rect src, dst;
Matrix matrix2;
boolean isTouchCirclePoints = true;
float deform2 = 5f;

public PerspectiveDistortView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    init();
}

public PerspectiveDistortView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
    init();
}

public PerspectiveDistortView(Context context, AttributeSet attrs,
        int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
    init();
}

private void init(){
    this.setOnTouchListener(this);
    paintRect = new Paint();
    paintRect.setColor(0xffff0000);
    paintRect.setAntiAlias(true);
    paintRect.setDither(true);
    paintRect.setStyle(Paint.Style.STROKE);
    paintRect.setStrokeJoin(Paint.Join.BEVEL);
    paintRect.setStrokeCap(Paint.Cap.BUTT);
    paintRect.setStrokeWidth(3);
    paintCircle = new Paint();
    paintCircle.setColor(0xff000000);
    paintCircle.setAntiAlias(true);
    paintCircle.setDither(true);
    paintCircle.setStyle(Paint.Style.FILL_AND_STROKE);
    paintCircle.setStrokeJoin(Paint.Join.BEVEL);
    paintCircle.setStrokeCap(Paint.Cap.BUTT);

    LEFT = 90;
    TOP = 40;
    RIGHT = 500;
    BOTTOM = 700;
    CIRCLE_TOP_LEFT = new Point(LEFT, TOP);
    CIRCLE_TOP_RIGHT = new Point(RIGHT, TOP);
    CIRCLE_BOTTOM_LEFT = new Point(LEFT, BOTTOM);
    CIRCLE_BOTTOM_RIGHT = new Point(RIGHT, BOTTOM);

    image = BitmapFactory.decodeResource(getResources(), R.drawable.ai);

    src = new Rect();
    dst = new Rect();

    matrix2 = new Matrix();
}

@Override
protected void onDraw(Canvas canvas) {
    // draw image
    src.left = LEFT;
    src.top = TOP;
    src.right = RIGHT;
    src.bottom = BOTTOM + image.getHeight();

    dst.left = CIRCLE_TOP_LEFT.x;
    dst.top = CIRCLE_TOP_LEFT.y;
    dst.right = CIRCLE_TOP_RIGHT.x;
    dst.bottom = CIRCLE_BOTTOM_RIGHT.y;

    // Free Transform bitmap
        int bw = image.getWidth();
        int bh = image.getHeight();
        RectF src = new RectF(LEFT, TOP, bw, bh);
        RectF dst = new RectF(CIRCLE_TOP_LEFT.x + 35, CIRCLE_TOP_LEFT.y + 30, CIRCLE_TOP_RIGHT.x, CIRCLE_BOTTOM_RIGHT.y);
        matrix2.setRectToRect(src, dst, ScaleToFit.FILL);

        float[] pts = {
                       // source
                       0, 0, 
                       0, bh, 
                       bw, bh, 
                       bw, 0,
                       // destination
                       0, 0,
                       0, 0, 
                       0, 0, 
                       0, 0};
        matrix2.mapPoints(pts, 8, pts, 0, 4);
        int DX = 100;
        pts[10] -= CIRCLE_TOP_LEFT.x - LEFT; 
        pts[12] -= CIRCLE_TOP_RIGHT.x - RIGHT;
        pts[13] += 0;
        pts[14] += 0;
        pts[15] += CIRCLE_TOP_RIGHT.y - CIRCLE_TOP_LEFT.y;

        matrix2.setPolyToPoly(pts, 0, pts, 8, 4);
        canvas.drawBitmap(image, matrix2, null);
        isTouchCirclePoints = false;

    // line left
    canvas.drawLine(CIRCLE_TOP_LEFT.x, CIRCLE_TOP_LEFT.y, CIRCLE_BOTTOM_LEFT.x, CIRCLE_BOTTOM_LEFT.y, paintRect);
    // line top
    canvas.drawLine(CIRCLE_TOP_LEFT.x, CIRCLE_TOP_LEFT.y, CIRCLE_TOP_RIGHT.x, CIRCLE_TOP_RIGHT.y, paintRect);
    // line right
    canvas.drawLine(CIRCLE_TOP_RIGHT.x, CIRCLE_TOP_RIGHT.y, CIRCLE_BOTTOM_RIGHT.x, CIRCLE_BOTTOM_RIGHT.y, paintRect);
    // line bottom
    canvas.drawLine(CIRCLE_BOTTOM_LEFT.x, CIRCLE_BOTTOM_LEFT.y, CIRCLE_BOTTOM_RIGHT.x, CIRCLE_BOTTOM_RIGHT.y, paintRect);
    // circle top left
    canvas.drawCircle(CIRCLE_TOP_LEFT.x, CIRCLE_TOP_LEFT.y, 10, paintCircle);
    // circle top right
    canvas.drawCircle(CIRCLE_TOP_RIGHT.x, CIRCLE_TOP_RIGHT.y, 10, paintCircle);
    // circle bottom left
    canvas.drawCircle(CIRCLE_BOTTOM_LEFT.x, CIRCLE_BOTTOM_LEFT.y, 10, paintCircle);
    // circle bottom right
    canvas.drawCircle(CIRCLE_BOTTOM_RIGHT.x, CIRCLE_BOTTOM_RIGHT.y, 10, paintCircle);
}

@Override
public boolean onTouch(View view, MotionEvent event) {
    lastX = (int) event.getX();
    lastY = (int)event.getY();
    if (inCircle(lastX, lastY, CIRCLE_TOP_LEFT.x, CIRCLE_TOP_LEFT.y, 40))
    {
        isTouchCirclePoints = true;
        CIRCLE_TOP_LEFT.set(lastX, lastY);
    } else if (inCircle(lastX, lastY, CIRCLE_TOP_RIGHT.x, CIRCLE_TOP_RIGHT.y, 40))
    {
        isTouchCirclePoints = true;
        CIRCLE_TOP_RIGHT.set(lastX, lastY);
    } else if (inCircle(lastX, lastY, CIRCLE_BOTTOM_LEFT.x, CIRCLE_BOTTOM_LEFT.y, 40))
    {
        isTouchCirclePoints = true;
        CIRCLE_BOTTOM_LEFT.set(lastX, lastY);
    } else if (inCircle(lastX, lastY, CIRCLE_BOTTOM_RIGHT.x, CIRCLE_BOTTOM_RIGHT.y, 40))
    {
        isTouchCirclePoints = true;
        CIRCLE_BOTTOM_RIGHT.set(lastX, lastY);
    }
    invalidate();
    return true;
}

private boolean inCircle(float x, float y, float circleCenterX, float circleCenterY, float circleRadius) {
    double dx = Math.pow(x - circleCenterX, 2);
    double dy = Math.pow(y - circleCenterY, 2);

    if ((dx + dy) < Math.pow(circleRadius, 2)) {
        return true;
    } else {
        return false;
    }
} 
```

}

# database - informix 中表的模式

> ID：13935056
> 
> 赞同：2
> 
> 时间：2012-12-18T14:27:51.647
> 
> 标签：database, informix

我必须为数据库表设计模式。

它是这样的：

```
 field1 is TRUE/FALSE
     field2 is TRUE/FALSE
     field3 is TRUE/FALSE
     field4 is TRUE/FALSE
     field5 is char(50)  if field4 is TRUE 
```

有人可以为这种表建议一个最佳模式。

我正在使用 Informix 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:36:27.370

Informix 有一个稍微奇怪的 BOOLEAN 类型。您可能更喜欢使用`fieldN CHAR(1) NOT NULL CHECK(fieldN IN ('Y', 'N'))`（或`IN('T', 'F')`）。但是 BOOLEAN 在其范围内工作。

```
CREATE TABLE Anonymous
(
    ID_Column     SERIAL NOT NULL PRIMARY KEY,
    field1        BOOLEAN NOT NULL,
    field2        BOOLEAN NOT NULL,
    field3        BOOLEAN NOT NULL,
    field4        BOOLEAN NOT NULL,
    field5        CHAR(50),
    CHECK((field4 = 't' AND field5 IS NOT NULL) OR (field4 = 'f' AND field5 IS NULL))
); 
```

值`'t'`和`'f'`是 Informix BOOLEAN 的特性之一；名称 TRUE 和 FALSE 无法识别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:29:10.903

如果 field4 为 FALSE，那么 field5 应该是什么？列的数据类型不能是条件的或动态的！但是，如果您定义 VARCHAR 而不是 CHAR，则大小可以是可变的。如果 field4 为 FALSE，您可以添加一个附加列。

```
field1 BOOLEAN,
field2 BOOLEAN,
field3 BOOLEAN,
field4 BOOLEAN,
field5 CHAR(50),  {if field4 is TRUE}
field6 DATATYPE   {if field4 is FALSE} 
```

# asp.net - 我可以通过 web.config 文件为邮件服务器设置 ntlm 身份验证吗？

> ID：13935058
> 
> 赞同：0
> 
> 时间：2012-12-18T14:28:05.810
> 
> 标签：asp.net, email, authentication

是否可以通过 web.config 文件指定要使用 system.net 对 SMTP 使用 NTLM 身份验证？如果是这样，需要做什么？

有人告诉我，如果 SMTP 服务器需要，添加以下内容将导致使用 NTLM 或 Kerberos，但我们的 SMTP 服务器未进行身份验证。（我不是 SMTP 专家）。

```
<configuration>
<system.net>
    <mailSettings>
        <smtp>
            <network host="yourhost.com" userName="user@yourhost.com" password="yourpassword" port="yourport" defaultCredentials="true" />
        </smtp>
    </mailSettings>
</system.net> 
```

例如，是否应该指定认证模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:31:15.710

你可以看看这个[博客](http://blogs.msdn.com/b/knom/archive/2008/04/16/hacking-system-net-mail-smtpclient.aspx)

# css - 基于for属性的CSS目标标签？

> ID：13935064
> 
> 赞同：49
> 
> 时间：2012-12-18T14:28:22.710
> 
> 标签：css, css-selectors

> **可能重复：**
> [CSS 选择器 - 如何在 CSS 中选择“for”？](https://stackoverflow.com/questions/6535274/css-selectors-how-to-select-for-in-css)

我有以下html。我可以根据标签的 for 属性来定位标签吗（所以只定位这个标签）？

```
<label for="something">Text</label> 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-12-18T14:30:12.953

您可以通过以下方式定位属性：

```
label[for="something"] {
   /* woohoo! */
} 
```

**For**代表属性名称
，**="value"**代表其值。

# html - div 浮动内容的宽度

> ID：13935069
> 
> 赞同：0
> 
> 时间：2012-12-18T14:28:31.987
> 
> 标签：html, css, mpdf

我正在使用 MPDF 从 HTML 和 CSS 创建 PDF。

在我的 HTML 中，我有一个带有 float:left 的 div；和 text-align:right 并且没有指定宽度。当我将 html 打印到我的网络浏览器时效果很好，但是当我将它打印到 PDF 时，div 的宽度为 100%，并且 div 中的文本打印在 PDF 的右侧（因为 text-align right ）。在我的浏览器中，div 的宽度具有内容的宽度。

因此，我想在 PDF 的左侧打印 div，但文本右对齐。

我希望有一个人可以帮助我！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:35:03.143

嘿，伙计，您想以不同的样式打印 html。所以，使用这个：

只需在 print.css 中，添加 div 属性`text-align:left`

```
<link rel="stylesheet" type"text/css" href="print.css" media="print"> // media=print if present, used when document is printed :)

media="print" have those styles which have to be used while printing a document! I learn that somewhere! 
```

仅适用于 MS IE

# audio - ffmpeg 音频解码数据为零

> ID：13935072
> 
> 赞同：0
> 
> 时间：2012-12-18T14:28:38.057
> 
> 标签：audio, ffmpeg

我尝试使用以下代码使用 ffmpeg 解码音频：

```
NSMutableData *finalData = [NSMutableData data];
......
while(av_read_frame(pFormatCtx, &packet) >= 0){
    if(packet.stream_index == videoStream)
    {
        int consumed = avcodec_decode_audio4(pCodecCtx, pFrame, &got_frame_ptr, &packet);

        if(got_frame_ptr)
        {
            [finalData appendBytes:(pFrame->data)[0] length:(pFrame->linesize)[0]];

        }
    }
    av_free_packet(&packet);
}
......
[finalData writeToFile:path atomically:YES]; 
```

但是保存的文件无法播放，即使我将文件扩展名更改为wav。当我在 HexEdit（一个十六进制编辑器）中查看它时，我发现有很多零字节。例如偏移量 0x970 之前的文件内容全为零。我的代码有错误吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T03:05:06.353

实际上解码结果很好。文件中的零字节是正常的，因为解码结果是PCM数据。我尝试将数据导入Adobe Audition，可以播放。供参考。

# javascript - VBScript CreateObject() 的等效 JavaScript 函数是什么

> ID：13935076
> 
> 赞同：0
> 
> 时间：2012-12-18T14:28:49.307
> 
> 标签：javascript, vbscript

CreateObject("Scripting.Dictionary") 的 JavaScript 等效函数是什么？我必须将以下两个语句从 VBScript 转换为 JavaScript，任何人都可以帮助我找到解决方案。

```
Set oInvoicesToCreate = CreateObject("Scripting.Dictionary")
If Not oInvoicesToCreate.Exists(cInvoiceID) Then
     oInvoicesToCreate(CStr(cInvoiceID)) = ""
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:33:50.927

```
var oInvoicesToCreate = {};
if(oInvoicesToCreate[cInvoiceID] === undefined){
    oInvoicesToCreate[cInvoiceID] = "";
} 
```

您可能不想检查 hasOwnProperty 方法，因为您需要检查原型链中的任何内容是否也具有该属性，而不是覆盖它。检查 [] 将让您知道任何原型项目上的任何属性是否也具有该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-08T14:02:25.113

正如 bluetoft 在[此答案](https://stackoverflow.com/a/13935162/111794)中所说，在 Javascript 中，您可以改用普通对象。但是，您应该注意它们之间的一些差异：

* * *

首先，**Dictionary**的键可以是任何类型：

```
var dict = new ActiveXObject('Scripting.Dictionary');
dict(5) = 'Athens';
console.log(dict('5')); //prints undefined 
```

而用于 Javascript 对象键的任何值都将首先转换为字符串：

```
var obj = {};
obj[5] = 'Athens';
console.log(obj['5']); // prints 'Athens' 
```

来自[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects)：

> 请注意，方括号符号中的所有键都转换为字符串类型，因为 JavaScript 中的对象只能将字符串类型作为键类型。例如，在上面的代码中，当 key obj 添加到 myObj 时，JavaScript 会调用 obj.toString() 方法，并将这个结果字符串作为新的 key。

* * *

其次，可以使用[**CompareMode**](https://msdn.microsoft.com/en-us/library/a14xez73(v=vs.84).aspx)[属性设置](https://msdn.microsoft.com/en-us/library/a14xez73(v=vs.84).aspx)**Dictionary**以将不同大小写的键视为相同的键：[](https://msdn.microsoft.com/en-us/library/a14xez73(v=vs.84).aspx)

 **```
var dict = new ActiveXObject('Scripting.Dictionary');
dict.CompareMode = 1;
dict('a') = 'Athens';
console.log(dict('A')); // prints 'Athens' 
```

Javascript 密钥访问`[]`不支持这一点，如果您想将不同大小写的密钥视为相同，则必须在每次读取或写入之前将潜在密钥转换为小写或大写。

* * *

对于您的特定情况，这些差异都不重要，因为键是数字字符串 (1)，没有大小写 (2)。**

# python - 正则表达式：从“Evolution Recruitment (Agency) (London, UK)”获取“London, UK”

> ID：13935077
> 
> 赞同：0
> 
> 时间：2012-12-18T14:28:52.117
> 
> 标签：python, regex

**我有这个字符串：**

```
>>> s = 'Evolution Recruitment (Agency) (London, UK)' 
```

**我想得到这部分**：

`London, UK`

请记住，对于实际情况，我正在处理的第一个括号`(agency)`不一定在字符串中。

**我试过这个**：

```
>>> import re
>>> re.findall("\((.*?)\)$", s)
['Agency) (London, UK'] 
```

如果我能够让正则表达式从右到左而不是从左到右读取，那么这个解决方案应该可以工作。

那可能吗？如果没有，还有其他方法可以得到零件`London, UK`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:30:41.367

如果你替换`.*?`为`[^(]*`你应该只捕获最后一组括号的内容。

（你是对的，从右到左阅读会更有效 - 也许你最好不要使用正则表达式，而是手动检查最后一个字符是 a `)`，找到最后一个索引`(`，并使用子字符串获取两者之间的内容？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:31:33.993

```
In [8]: re.search(r".*[(](.*)[)]", s).groups()
Out[8]: ('London, UK',) 
```

它只是使用贪婪`.*`匹配来获取最后一组括号。

或者，您可以找到所有匹配的括号，然后使用最后一对：

```
In [14]: re.findall(r'\(.*?\)', s)[-1]
Out[14]: '(London, UK)' 
```

正则表达式方法非常灵活。但是，如果您知道输入的格式正确，并且您只想要最后一组括号内的文本：

```
In [11]: s[s.rfind('(')+1:s.rfind(')')]
Out[11]: 'London, UK' 
```

这会从右到左扫描字符串，因此可能相当有效（我已经分析过任何内容，所以这只是一个推测）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:32:02.960

只需跳过字符，并在跳过后有一个带括号的组：

```
>>> re.findall(r'.+(\(.+\))', s)
['(London, UK)'] 
```

您也可以将其添加到字符串 ( ) 的末尾`$`，这可能会使其更加安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T14:31:36.010

这似乎有效：

```
re.findall(r"\(([^\)]+)\)$", s) 
```

它也适用于`re.search`：

```
re.search(r"\(([^\)]+)\)$", s).group(0) 
```

用它的话来说，寻找一个`(`然后开始捕获任何不是a的东西，`)`直到你看到a `)`，然后停止捕获。仅当该行在`)`-- 之后结束时才保留它，否则，它不算作匹配。

# r - 根据条件获取行数 - 特定年份的日期字段，按文本字段分组

> ID：13935080
> 
> 赞同：-2
> 
> 时间：2012-12-18T14:29:02.427
> 
> 标签：r, statistics

我每天都会发布一份excel报告，我需要总结并提供趋势分析。此报告具有创建日期、工作项类型的工作项列表。如何获取 2011 年、2012 年创建的工作项的计数？另外，如何按工作项类型获取计数？到目前为止，我已经能够通过执行以下操作来加载 excel 数据并获取行数 -

```
library(gdata)
wi20121812 = read.xls("WorkItemReport20121812.xls")
nrow(wi20121812) 
```

样本数据

```
 > dput(head(workItemReport2))
structure(list(DocType = structure(c(6L, 7L, 6L, 6L, 8L, 6L), .Label = c("TYPE10WI", 
"TYPE11WI", "TYPE12WI", "TYPE13WI", "TYPE14WI", "TYPE1WI", "TYPE2WI", 
"TYPE3WI", "TYPE4WI", "TYPE5WI", "TYPE6WI", "TYPE7WI", "TYPE8WI", 
"TYPE9WI"), class = "factor"), CreatedDate = structure(c(7L, 
22L, 146L, 181L, 153L, 191L), .Label = c("1/10/12 15:43 AM/PM ", 
"1/10/12 16:06 AM/PM ", "1/10/12 5:28 AM/PM ", "1/10/12 5:56 AM/PM ", 
"1/11/12 19:51 AM/PM ", "1/11/12 5:26 AM/PM ", "1/12/11 21:58 AM/PM ", 
"1/12/12 11:08 AM/PM ", "1/12/12 5:41 AM/PM ", "1/12/12 9:56 AM/PM ", 
"1/13/12 14:01 AM/PM ", "1/13/12 15:08 AM/PM ", "1/13/12 15:11 AM/PM ", 
"1/13/12 8:51 AM/PM ", "1/16/12 10:27 AM/PM ", "1/16/12 10:28 AM/PM ", 
"1/16/12 16:37 AM/PM ", "1/16/12 7:52 AM/PM ", "1/18/12 15:02 AM/PM ", 
"1/18/12 16:03 AM/PM ", "1/18/12 16:13 AM/PM ", "1/19/11 19:23 AM/PM ", 
"1/20/12 10:48 AM/PM ", "1/20/12 12:23 AM/PM ", "1/20/12 8:38 AM/PM ", 
"1/23/12 5:53 AM/PM ", "1/24/12 15:18 AM/PM ", "1/24/12 8:23 AM/PM ", 
"1/24/12 8:58 AM/PM ", "1/25/12 11:38 AM/PM ", "1/25/12 5:28 AM/PM ", 
"1/26/12 13:48 AM/PM ", "1/26/12 15:53 AM/PM ", "1/26/12 15:58 AM/PM ", 
"1/26/12 16:13 AM/PM ", "1/26/12 16:18 AM/PM ", "1/26/12 7:33 AM/PM ", 
"1/27/12 7:48 AM/PM ", "1/3/12 17:48 AM/PM ", "1/3/12 18:33 AM/PM ", 
"1/3/12 9:07 AM/PM ", "1/30/12 11:22 AM/PM ", "1/30/12 22:52 AM/PM ", 
"1/30/12 23:10 AM/PM ", "1/31/12 19:54 AM/PM ", "1/31/12 20:39 AM/PM ", 
"1/31/12 5:42 AM/PM ", "1/31/12 9:42 AM/PM ", "1/4/12 14:02 AM/PM ", 
"1/4/12 9:52 AM/PM ", "1/5/12 13:42 AM/PM ", "1/5/12 17:42 AM/PM ", 
....
....
"9/6/12 9:02 AM/PM ", "9/7/12 11:48 AM/PM ", "9/7/12 12:58 AM/PM ", 
"9/7/12 13:52 AM/PM ", "9/7/12 15:07 AM/PM ", "9/7/12 15:12 AM/PM ", 
"9/7/12 15:22 AM/PM ", "9/7/12 15:47 AM/PM ", "9/7/12 15:52 AM/PM ", 
"9/7/12 8:42 AM/PM ", "9/7/12 9:32 AM/PM ", "9/8/11 23:43 AM/PM "
), class = "factor")), .Names = c("DocType", "CreatedDate"), row.names = c(NA, 
6L), class = "data.frame")
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:13:21.580

您问题的一部分仍未得到解答，“如何获得工作项类型的计数”非常简单。

```
res <- table(wi20121812[, "WorkItemType"]) 
```

这将为您提供一个简单的表格，告诉您每个 WorkItemType 发生的频率。如果您需要按比例而不是绝对计数，请在结果上运行 prop.table() ：

```
prop.table(res) 
```

或者同时做这两个：

```
res <- prop.table(table(wi20121812[, "WorkItemType"])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:08:04.653

您可以`ddply`从`plyr`包中使用：

```
res = ddply(df, "year", summarise, amount = length(year)) 
```

或使用`count`相同的包（这更容易）：

```
res = count(df, "year") 
```

其中`df`a`data.frame`包含您的数据，并且`year`是包含分类变量的列的列名，该分类变量详细说明该行是在哪一年创建的。

# css - Kendo UI 网格：拖动到分组面板的列标题上缺少关闭图标和排序箭头

> ID：13935082
> 
> 赞同：2
> 
> 时间：2012-12-18T14:29:04.297
> 
> 标签：css, grid, grouping, kendo-ui

在 Kendo UI 网站[web 演示](http://demos.kendoui.com/web/grid/index.html)区域中显示的网格示例中，当将列标题拖到组框时，列标题会得到两个小图像：排序箭头和关闭 (X)。据我所知，这个演示中唯一相关的 CSS 来自页面头部部分中引用的两个样式表和 js 库：

```
<script src="source/kendo.all.js"></script>
<link href="styles/kendo.common.css" rel="stylesheet" />
<link href="styles/kendo.default.css" rel="stylesheet" /> 
```

我在我自己页面的头部（使用几天前下载的 Kendo 控件）中引用了这些文件的缩小版本，并且在我的页面上，拖放的列标题上的这两个图像没有出现在 IE9 标准中的 IE9 中模式，在 Opera、Safari 或 Chrome 中。只有列标题文本作为按钮文本出现在那里。

这些演示中引用的下载文件和库是否可能不相同？

**让这些演示指向外部公共库会非常有帮助，这样试图复制行为的人就可以确定一切都是一样的。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T03:28:58.673

是的，来自演示代码，并且代码中提到的库中缺少图像文件..为了使其正常工作..首先使用 chrome 开发工具找出丢失的文件（按 F12 并查看控制台）..然后在下载的 Kenodui .zip 文件找到图像文件（此处为样式/默认/sprite.png）并将其放置在适当的层次结构中（这部分很重要..您可能需要为其创建新文件夹）..

# javascript - 使用 Javascript 读取 XML

> ID：13935083
> 
> 赞同：0
> 
> 时间：2012-12-18T14:29:07.120
> 
> 标签：javascript

在 Javascript 中

```
xmlhttp.open("GET","C:\ARKData.xml",false) 
```

当我运行这条线时，我得到：

> file:///C:/Users/galisetti.ramesh/AppData/Local/Microsoft/Windows/Temporary%20Internet%20Files/FrontPageTempDir/pvw2E.htm 无效参数错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:34:06.963

这里的具体问题可能是字符串中的反斜杠；改用正斜杠`/`。

也就是说，现代浏览器对本地文件系统请求非常挑剔。如果它确实有效，您的文档将必须与您正在调用的资源位于同一目录或父目录中。

# java - Java标签和中断错误

> ID：13935087
> 
> 赞同：0
> 
> 时间：2012-12-18T14:29:20.240
> 
> 标签：java

这是 Joachim 解决方案后的代码：

[http://codepad.org/AB2gu59t](http://codepad.org/AB2gu59t)

这是我现在得到的错误：

> Scripts\OHDHerblaw.java:109：错误：未定义标签：label1084 if (getInventoryCount(new int[] { this.Herb }) == 0) if (getInventoryCou nt(new int[] { this.Unfinished }) == 0 ) if (getInventoryCount(new int[] { this.Idenified }) == 0) break label417; if (getInventoryCount(new int[] { this.Vials }) != 0) if (getInventoryCount(new int[] { this.Identified }) != 0) { if (getIn ventoryCount(new int[] { this.Vials }) != 0) if (getInventoryCount(new int[] { t his.Identified }) != 0) break label1084; if (getInventoryCount(new int[] { this.Unfinished }) != 0)
> 
> Scripts\OHDHerblaw.java:110：错误：未定义标签：label1084 break label1084；}
> 
> Scripts\OHDHerblaw.java:201：错误：未定义标签：label1391 break label1391；
> 
> Scripts\OHDHerblaw.java:202：错误：未定义标签：label1706 if (getInventoryCount(new int[] { this.Vials }) != 0) if (getInventoryCo unt(new int[] { this.Identified }) != 0 ) { if (getInventoryCount(new int[] { thi s.Vials }) != 0) if (getInventoryCount(new int[] { this.Identified }) != 0) 打破 label1706; if (getInventoryCount(new int[] { this.Unfinished }) != 0)
> 
> Scripts\OHDHerblaw.java:203: 错误: 未定义标签: label1706 break label1706; }
> 
> 5 个错误

我不确定如何定义标签。

经过一番挣扎，我让它工作了。如果有人感兴趣，这是修改后的代码。

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;

public class OHDHerblaw extends Script {

   int Herb;
   int Identified = 0;
   int Unfinished;
   int Ingrediant;
   int potsMade;
   int Vials = 464;
   int[] POTARRAY = new int[]{222, 474, 477, 480, 483, 486, 489, 492, 495, 498, 566, 569, 570};
   int[] UNIDARRAY = new int[0];
   int[] IDARRAY = new int[0];
   boolean onlyId = false;
   boolean idHerbs = false;
   boolean isMixing = false;
   boolean unfinishedOnly = false;

   public OHDHerblaw(Extension var1) {
      super(var1);
   }

   public void init(String var1) {
      String[] var2 = var1.trim().replaceAll(" ", "").split(",");
      if(!var2[0].equals("")) {
         this.Herb = Integer.parseInt(var2[0]);
         if(this.Herb <= 443) {
            if(this.Herb == 165 || this.Herb >= 435 && this.Herb <= 443) {
               this.idHerbs = true;
               this.unfinishedOnly = false;
               if(this.Herb == 165) {
                  this.Identified = 444;
                  this.Unfinished = 454;
               } else if(this.Herb > 165) {
                  this.Identified = this.Herb + 10;
                  this.Unfinished = this.Herb + 20;
               }
            }
         } else if(this.Herb >= 444) {
            if(this.Herb >= 444 && this.Herb <= 453) {
               this.Herb -= 10;
               this.Identified = this.Herb + 10;
               this.Unfinished = this.Herb + 20;
               this.idHerbs = false;
               this.unfinishedOnly = false;
            } else if(this.Herb >= 454 && this.Herb <= 463) {
               this.Herb -= 20;
               this.Identified = this.Herb + 10;
               this.Unfinished = this.Herb + 20;
               this.idHerbs = false;
               this.unfinishedOnly = true;
            }
         } else {
            System.out.println("That\'s is not a valid Herb Id...");
            this.stopScript();
         }
      }

      if(!var2[1].equals("")) {
         this.Ingrediant = Integer.parseInt(var2[1]);
         if(this.Ingrediant != 270 && this.Ingrediant != 473 && this.Ingrediant != 220 && this.Ingrediant != 219 && this.Ingrediant != 471 && this.Ingrediant != 469 && this.Ingrediant != 472 && this.Ingrediant != 501) {
            System.out.println("No ingredient selected. We will not be making full potions...");
            this.Ingrediant = 0;
            this.isMixing = false;
         } else {
            this.isMixing = true;
         }
      }

      if(this.unfinishedOnly && !this.isMixing) {
         System.out.println("Not possible, please re-check script setup...");
         this.stopScript();
      }

   }

   public int main() {

      if(this.getFatigue() >= 90) {
         this.useSleepingBag();
         return this.random(800, 1000);
      } else {
         if(!this.onlyId) {
            int[] var1;
            if(this.isMixing) {
               if(this.idHerbs && this.getInventoryCount(new int[]{this.Herb}) > 0) {
                  this.useItem(this.getInventoryIndex(new int[]{this.Herb}));
                  return this.random(200, 350);
               }

               if(this.getInventoryCount(new int[]{this.Identified}) > 0 && this.getInventoryCount(new int[]{this.Vials}) > 0 && this.getInventoryCount(new int[]{this.Herb}) == 0) {
                  this.useItemWithItem(this.getInventoryIndex(new int[]{this.Identified}), this.getInventoryIndex(new int[]{this.Vials}));
                  return this.random(200, 350);
               }

               if(this.getInventoryCount(new int[]{this.Ingrediant}) > 0 && this.getInventoryCount(new int[]{this.Unfinished}) > 0) {
                  this.useItemWithItem(this.getInventoryIndex(new int[]{this.Ingrediant}), this.getInventoryIndex(new int[]{this.Unfinished}));
                  return this.random(500, 600);
               }

               if(this.getInventoryCount(new int[]{this.Herb}) == 0 && this.getInventoryCount(new int[]{this.Unfinished}) == 0 && this.getInventoryCount(new int[]{this.Identified}) == 0 || this.getInventoryCount(new int[]{this.Vials}) == 0 || this.getInventoryCount(new int[]{this.Identified}) == 0 || (this.getInventoryCount(new int[]{this.Vials}) == 0 || this.getInventoryCount(new int[]{this.Identified}) == 0) && this.getInventoryCount(new int[]{this.Unfinished}) == 0) {
                  if(this.isQuestMenu()) {
                     this.answer(0);
                     return this.random(2000, 3000);
                  }

                  if(this.isBanking()) {
                     int var2;
                     if(this.unfinishedOnly) {
                        if(this.getInventoryCount(new int[]{this.Ingrediant}) == 0 || this.getInventoryCount(new int[]{this.Unfinished}) == 0) {
                           for(var2 = 0; var2 < this.POTARRAY.length; ++var2) {
                              if(this.getInventoryCount(new int[]{this.POTARRAY[var2]}) > 0) {
                                 this.deposit(this.POTARRAY[var2], this.getInventoryCount(new int[]{this.POTARRAY[var2]}));
                                 return this.random(1250, 1500);
                              }
                           }
                        }

                        if(this.getInventoryCount(new int[]{this.Unfinished}) == 0) {
                           this.withdraw(this.Unfinished, 14);
                           return this.random(1500, 2000);
                        }

                        if(this.getInventoryCount(new int[]{this.Ingrediant}) == 0 && this.getInventoryCount(new int[]{this.Unfinished}) > 0) {
                           this.withdraw(this.Identified, this.getInventoryCount(new int[]{this.Unfinished}));
                           return this.random(1500, 2000);
                        }

                        this.closeBank();
                        return this.random(200, 300);
                     }

                     if(!this.unfinishedOnly) {
                        if(this.getInventoryCount(new int[]{this.Ingrediant}) == 0 || this.getInventoryCount(new int[]{this.Unfinished}) == 0) {
                           for(var2 = 0; var2 < this.POTARRAY.length; ++var2) {
                              if(this.getInventoryCount(new int[]{this.POTARRAY[var2]}) > 0) {
                                 this.deposit(this.POTARRAY[var2], this.getInventoryCount(new int[]{this.POTARRAY[var2]}));
                                 return this.random(1250, 1500);
                              }
                           }
                        }

                        if(this.getInventoryCount(new int[]{this.Unfinished}) > 0) {
                           this.withdraw(this.Ingrediant, this.getInventoryCount(new int[]{this.Unfinished}));
                           this.closeBank();
                           return this.random(2000, 3000);
                        }

                        if(this.getInventoryCount(new int[]{this.Vials}) == 0) {
                           this.withdraw(this.Vials, 14);
                           return this.random(1000, 1500);
                        }

                        if(this.getInventoryCount(new int[]{this.Herb}) == 0 && this.getInventoryCount(new int[]{this.Unfinished}) == 0 && this.getInventoryCount(new int[]{this.Identified}) == 0 && this.idHerbs) {
                           this.withdraw(this.Herb, 14);
                           return this.random(2000, 3000);
                        }

                        if(this.getInventoryCount(new int[]{this.Identified}) == 0) {
                           this.withdraw(this.Identified, 14);
                           return this.random(1000, 1500);
                        }

                        this.closeBank();
                        return this.random(1000, 1500);
                     }
                  }

                  var1 = this.getNpcByIdNotTalk(this.BANKERS);
                  if(var1[0] != -1 && !this.isBanking() && !this.isQuestMenu() && this.getInventoryCount(new int[]{this.Ingrediant}) == 0) {
                     this.talkToNpc(var1[0]);
                     return this.random(3250, 3500);
                  }
               }
            }

            if(!this.isMixing) {
               if(this.idHerbs && this.getInventoryCount(new int[]{this.Herb}) > 0) {
                  this.useItem(this.getInventoryIndex(new int[]{this.Herb}));
                  return this.random(200, 350);
               }

               if(this.getInventoryCount(new int[]{this.Identified}) > 0 && this.getInventoryCount(new int[]{this.Vials}) > 0 && this.getInventoryCount(new int[]{this.Herb}) == 0) {
                  this.useItemWithItem(this.getInventoryIndex(new int[]{this.Identified}), this.getInventoryIndex(new int[]{this.Vials}));
                  return this.random(200, 350);
               }

               if(this.getInventoryCount(new int[]{this.Herb}) == 0 && this.getInventoryCount(new int[]{this.Unfinished}) == 0 && this.getInventoryCount(new int[]{this.Vials}) == 0 && this.getInventoryCount(new int[]{this.Identified}) == 0 || this.getInventoryCount(new int[]{this.Vials}) == 0 || this.getInventoryCount(new int[]{this.Identified}) == 0 || (this.getInventoryCount(new int[]{this.Vials}) == 0 || this.getInventoryCount(new int[]{this.Identified}) == 0) && this.getInventoryCount(new int[]{this.Unfinished}) == 0) {
                  if(this.isQuestMenu()) {
                     this.answer(0);
                     return this.random(2000, 3000);
                  }

                  if(this.isBanking()) {
                     if(this.getInventoryCount(new int[]{this.Herb}) == 0 && this.getInventoryCount(new int[]{this.Unfinished}) == 0 && this.getInventoryCount(new int[]{this.Vials}) == 0 && this.getInventoryCount(new int[]{this.Identified}) == 0 && this.idHerbs) {
                        this.withdraw(this.Herb, 14);
                        return this.random(2000, 3000);
                     }

                     if(this.getInventoryCount(new int[]{this.Unfinished}) > 0) {
                        this.deposit(this.Unfinished, this.getInventoryCount(new int[]{this.Unfinished}));
                        return this.random(200, 300);
                     }

                     if(this.getInventoryCount(new int[]{this.Vials}) == 0) {
                        this.withdraw(this.Vials, 14);
                        return this.random(1000, 1500);
                     }

                     if(this.getInventoryCount(new int[]{this.Identified}) == 0) {
                        this.withdraw(this.Identified, 14);
                        return this.random(1000, 1500);
                     }

                     this.closeBank();
                     return this.random(1000, 1500);
                  }

                  var1 = this.getNpcByIdNotTalk(this.BANKERS);
                  if(var1[0] != -1 && !this.isBanking() && !this.isQuestMenu()) {
                     this.talkToNpc(var1[0]);
                     return this.random(3500, 3750);
                  }
               }
            }
         }

         return this.random(200, 300);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:32:03.260

标签只能[在语句之前使用（JLS §14.7）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.7)。

局部变量声明不是语句（在 JLS 中，它[是“块语句”（JLS §14.2）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.2)，它是语句的超集）。

简单地将您移到标签*之前*`int[] arrayOfInt;`的行，您应该会很好：

 *```
int[] arrayOfInt;
label417:
if (this.isMixing) {
  ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:36:17.407

一个标签后面必须跟一个**语句**。在您的代码中，它后面是一个变量声明，它不是一个语句。

在变量声明后移动标签：

```
int[] arrayOfInt;

label417:
if (this.isMixing) {
    // ... 
```

顺便说一句，我认为在 Java 代码中使用标签是一种[代码气味](http://en.wikipedia.org/wiki/Code_smell)——这表明代码的设计存在问题。标签就像[goto 语句](http://en.wikipedia.org/wiki/Goto)，这是一种臭名昭著的结构，使代码难以理解（它导致[意大利面条式代码](http://en.wikipedia.org/wiki/Spaghetti_code)）。

不要使用标签，而是使用其他控制结构，例如`for`或`while`循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:37:17.390

@Joachim 的回答已经确定了。

我只是想解释为什么...

`break <label>`语句只能分解为当前方法中具有给*定*标签的*封闭*语句。局部变量声明不能包含`break`语句。因此`label`，局部变量声明上的 a 也不能被破坏。

我怀疑您试图使用`break <label>`C/C++ 语句之类的`goto`语句。它不是那样工作的。即使那里允许使用标签，您也无法打破它。例如，这同样是错误的：

```
label: if (i == 1) {
   // so something
}
if (i == 2) {
   break label;  // compilation error
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:33:44.667

赋值标签有一点不同的语法：

```
 int i;
 label12: i = 42; // label on the assignment 
```

如果要为标签分配值，则必须先定义它。

在您的情况下，将代码更改为：

```
if (!this.onlyId)
    {
      int[] arrayOfInt;
      label417:      
      if (this.isMixing)
      {
        if (this.idHerbs) {
          if (getInventoryCount(new int[] { this.Herb }) > 0) {
            useItem(getInventoryIndex(new int[] { this.Herb }));
            return random(200, 350);
          }
        } 
```*

# jquery - 输入按钮的 jQuery Mobile vClick 问题

> ID：13935089
> 
> 赞同：3
> 
> 时间：2012-12-18T14:29:21.847
> 
> 标签：jquery, mobile, click, smartphone, touchscreen

到目前为止，我的理解是 jQuery mobile 提供了一组“v”事件，这些事件掩盖了触摸屏设备和鼠标驱动设备之间的差异——也就是说，几乎可以使用与传统事件等效的“v”事件。例如 vclick 而不是 click。

然而，我开始怀疑这是一种相当幼稚的观点。使用按钮，我已经能够绑定 vclick 事件并使用它，没有问题。但是对于输入（收音机和复选框），看起来 vclick 根本不会触发。我是对的还是有其他事情发生？我应该提到我正在使用 jQM 1.2。

我非常感谢任何帮助。

# java - hibernate.cfg.xml 和 applicationContext.xml

> ID：13935091
> 
> 赞同：1
> 
> 时间：2012-12-18T14:29:28.573
> 
> 标签：java, spring, hibernate

我有一个使用 Spring3、Hibernate4 和 JSF2 的小型应用程序。

到目前为止，在我的应用程序中我没有`hibernate.cfg.xml`文件，我使用 Spring`applicationContext.xml`来扫描实体类的类和注释。

*应用程序上下文.xml*

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">
    <context:component-scan base-package="net.test" />
    <!-- Data Source Declaration -->
    <bean id="DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">
        <property name="driverClass" value="oracle.jdbc" />
        <property name="jdbcUrl"
            value="jdbc:oracle:thin:@server:1521:TEST" />
        <property name="user" value="scott" />
        <property name="password" value="tiger" />
        <property name="maxPoolSize" value="10" />
        <property name="maxStatements" value="0" />
        <property name="minPoolSize" value="5" />
    </bean>

    <!-- Session Factory Declaration -->
    <bean id="SessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="annotatedClasses">
            <list>
                <value>net.test.model.Employees</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>            
        </property>
    </bean>
    <!-- Enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="txManager" />
    <!-- Transaction Manager is defined -->
    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>
</beans> 
```

我想做的是添加`hibernate.cfg.xml`到我的应用程序中，我知道如果我存在它不是强制性的`applicaionContext.xml`。

我想包含的原因是因为我想指定以下内容`hibernate.cfg.xml`以解决

```
org.hibernate.QueryException: ClassNotFoundException:
   org.hibernate.hql.internal.ast.HqlToken 
```

有关我收到的异常的详细信息，请参阅[此内容](https://stackoverflow.com/questions/13932138/weblogic-classnotfoundexception-org-hibernate-hql-internal-ast-hqltoken)

```
<property name="hibernate.query.factory_class" value="org.hibernate.hql.classic.ClassicQueryTranslatorFactory">
</property> 
```

由于我已经有以下内容`applicationContext.xml`，我该如何最好地使用`hibernate.cfg.xml`？任何帮助都是非常可观的。

```
<property name="annotatedClasses">
            <list>
                <value>net.test.model.Request</value>
            </list>
        </property> 
```

*更新 1*

```
Error creating bean with name 'requestDAOImpl': Injection of autowired dependencies
failed; nested exception is org.springframework.beans.factory.BeanCreationException:
 Could not autowire field: private org.hibernate.SessionFactory 
 net.test.request.dao.RequestDAOImpl.sessionFactory; nested exception is
 org.springframework.beans.factory.BeanCreationException: Error creating 
 bean with name 'SessionFactory' defined in ServletContext resource 
 [/WEB-INF/applicationContext.xml]: Invocation of init method failed; 
 nested exception is org.hibernate.HibernateException: could not 
  instantiate QueryTranslatorFactory: 
  org.hibernate.hql.classic.ClassicQueryTranslatorFactory
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:13:38.117

您是否尝试过像这样使用 Spring 的 application.xml 设置 *hibernate.query.factory_class* 属性？：

```
<bean id="SessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        ...
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.query.factory_class">org.hibernate.hql.internal.classic.ClassicQueryTranslatorFactory</prop>
            </props>            
        </property>
    </bean> 
```

在我看来，这应该可以在不明确使用 hibernate.cfg.xml 的情况下工作。

# javascript - ender.js 安装失败

> ID：13935093
> 
> 赞同：0
> 
> 时间：2012-12-18T14:29:34.453
> 
> 标签：javascript, ender

我正在尝试安装 ender.js。我已经运行了以下命令

```
 sudo npm install ender -g 
```

但安装后（没有错误），我无法访问 ender 命令行。我有最新的节点和 npm 安装（通过 brew）

有人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:58:50.290

你只需要添加`/usr/local/share/npm/bin`到你的路径。

尝试将以下行添加到您的 bash 配置文件（在`~/.profile`或`~/.bashrc`等中）：

```
PATH=$PATH:/usr/local/share/npm/bin 
```

然后使用 .将文件源到您当前的环境中`. ~/.profile`。这应该可以解决您的问题。

展望未来，我建议使用[`nvm`](https://github.com/creationix/nvm)它来管理您的节点版本和 npm 安装。

# razor - Razor 语法中的@:@ 是什么意思？

> ID：13935094
> 
> 赞同：0
> 
> 时间：2012-12-18T14:29:35.077
> 
> 标签：razor

也许是愚蠢的问题，但我没有找到它的意思。

代码示例：

```
@if (isSomething ) {
    @:@Scripts.Render("~/scripts/some-scripts")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:43:46.317

这似乎是多余的。`@:`指定文字内容，然后将`@`您带回服务器代码上下文。它应该与以下内容相同：

```
@if (isSomething ) {
  Scripts.Render("~/scripts/some-scripts")
} 
```

# javascript - 如何在所有主要浏览器中选择文本时更改网页上“文本选择”光标的外观或禁用光标更改？

> ID：13935096
> 
> 赞同：11
> 
> 时间：2012-12-18T14:29:37.823
> 
> 标签：javascript, html, css, mouse-cursor

当我将鼠标光标移到某些文本上时，我想防止鼠标光标发生变化。这可能吗？

如果没有，我想更改`text-selection`光标的外观 - 是否可以使用 css / javascript？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T14:31:15.217

尝试这个...

```
* {
  -webkit-user-select: none;
}

*:active,
*:hover {
  cursor: pointer;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T14:33:36.100

我认为您正在寻找的是 css 属性`"cursor:default;"`- 但这实际上取决于您到底在寻找什么。带有标签的示例：

```
label{
    cursor:default;
} 
```

根据您想要的光标，您可以将值从更改为`"default"`其他值。

这是一些值的列表（不是全部 - 但最常见的是那里）： [https ://developer.mozilla.org/en-US/docs/CSS/cursor](https://developer.mozilla.org/en-US/docs/CSS/cursor)

请记住，根据浏览器/操作系统，您会得到不同的结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-15T16:12:16.907

没有人愿意为每个元素显式设置光标，即使这只需要添加一个类。这是很多手工工作。

更明智的做法是：

```
* {
cursor: inherit;
}

body {
cursor: default;
} 
```

这将禁用任何元素的文本选择光标，但不会干扰更改某些元素的光标属性的任何其他 CSS 或脚本。

# php - 将检查 cookie 的 php 脚本，如果 cookie 是，则转到 url，如果没有 cookie 运行脚本

> ID：13935097
> 
> 赞同：-2
> 
> 时间：2012-12-18T14:29:40.973
> 
> 标签：php

我试图创建一个将检查 cookie 的 php 脚本。如果 cookie 存在，它会转到一个页面。如果 cookie 不存在，它将运行脚本。但是它的工作并不安静，我认为它下面的 index.php 代码就是问题所在。
网关.php

```
 <?php
 $value = "mobilecookie";
 /*setcookie(name,value,expire,path,domain,secure)*/
 setcookie("mobilecookie",$value, time()+60*60*24*30);
 ?> 
```

索引.php

```
 <?php
 if( $.cookie('mobilecookie') == null ) { 
 require_once("gateway/scripts/mobile.php");
 window.location.replace('http://domian.com/index.php');
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:31:17.380

利用

```
header("Location: http://domian.com/index.php");
exit; 
```

¹重定向用户

并且 cookie 被读取`$_COOKIE['mobilecookie']`

* * *

¹：之前不要**输出**任何东西（即使是 UTF-8 BOM）`header`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:34:36.393

如果您需要延迟，我会使用您的 PHP 创建一个 Javascript 重定向，以便在您执行重定向之前加载页面。

如果你想立即重定向，你应该使用 PHP`header()`函数。

另一个注意事项是 Cookie 是使用标头发送的，因此您不能在同一脚本实例中设置和检索其值，必须重新加载页面才能获取新值。

# cordova - 在 BlackBerry/WebWorks/PhoneGap 应用程序中检索事件日志

> ID：13935101
> 
> 赞同：0
> 
> 时间：2012-12-18T14:29:56.190
> 
> 标签：cordova, jquery-mobile, blackberry-webworks

有人知道如何检索 BlackBerry/WebWorks 应用程序的事件日志吗？

我正在实际设备（BlackBerry Curve 9300）中测试我们的 Jquery Mobile/PhoneGap 应用程序，我想使用事件日志（如果有）来查找和调试错误。

该应用程序在模拟器中运行良好，但在实际设备上崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T20:05:39.883

没有很好的方法来调试javascript ob BBOS 6.0。

一种可能的选择是使用带有“-s”标志的 webworks，它将以 Java 输出源代码，包括将项目导入 JDE 或 eJDE 所需的文件。然后，您可以从那里进行调试，并可能会看到一些额外的日志。

# c - 如果我在 C 中省略了 main 函数的返回类型怎么办？

> ID：13935104
> 
> 赞同：1
> 
> 时间：2012-12-18T14:30:06.410
> 
> 标签：c

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:37:10.573

C89/90 仍然有隐含的 int 规则，所以`main()`等价于`int main()`. 通过省略返回类型，您已将返回类型隐式定义为`int`. 有些人可能会认为这很草率，但它是严格遵守的（即，不涉及定义的实现、未定义或未指定的行为）。

对于 C99，隐式`int`规则已被删除，因此`main()`未定义。*然而*`Shall`，编译器只需要在遇到违反or子句时“发出诊断” `Shall not`——发出诊断后仍然可以自由地继续编译。究竟什么构成诊断是实现定义的。因此，gcc 在这方面符合要求的只是说明它发出的警告将被视为诊断的文档。

编辑：C89/90 标准中的“隐式`int`”实际上并不是一个地方的单一规则——它分布在几个地方。第一个是§6.5.2.1，它说：

> -- `int`, `signed`, `signed int`, 或没有类型说明符

这是列表的一部分，列表的每一行上的所有项目都被认为是等效的，所以这就是说（除非另有禁止）缺少类型说明符等同于指定 (signed) `int`。

对于函数参数，有一个单独的规范（第 6.7.1 节）：“任何未声明的参数都具有类型`int`。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:37:29.030

即使在违反约束的情况下，C 编译器唯一必须发出的就是“诊断”。然后允许它继续并产生一个可执行程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:37:34.663

> 请注意那部分：**如果 } 终止**... ，它清楚地表明如果我们省略返回类型

不，它没有。它说明了当您`return exitStatus;`从`main()`.

> 根据 ** undefined ** 和 unspecified 标准的定义，我应该说它给出了 unspecified 值，因为它返回的都是合法的 int 值，但后果是 undefined ——我们无法预测什么值会导致什么灾难性的后果。

不，这意味着你不知道你的程序的返回状态码是什么。但是，该行为不是未定义的：您的程序终止。对于什么样的结果代码，这是一个不同的问题。

> [...] 只给出警告：'main' 的返回类型不是 'int'，但不是错误？

这就是它的实现方式。在旧的 C (C89) 中 - 以及一些较新的编译器 - 如果您省略函数的返回类型，则假定它是`int`（因此即使警告看起来也有点问题）。

> 所以应该在这个标准中解释为强制性的，为什么 gcc 和 swith --std=c99 违反了这个？

可能是。请注意，除非您使用 GCC，否则 GCC 是一个不符合标准的实现`-ansi -pedantic`，因此理论上，没有这些标志编译的任何程序都有未定义的行为。但这是理论...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:55:44.833

这似乎是某种 C90 标准参考错误。我不知道您链接到的文档是否等同于实际的 ISO C90 标准。

显然，多年来，这个特定问题已从未定义变为未指定，再到明确定义。

在“用于 X3.J11 工作组”的 ANSI-C 早期草案中，您会发现以下文本：

> 2.1.2.2 托管环境
> 
> “程序终止”
> 
> 从初始调用返回到主函数等效于以主函数返回的值作为参数调用退出函数。如果主函数执行一个没有指定值的返回，返回到宿主环境的终止状态是**undefined**。

# r - 双向方差分析 - 获得手段

> ID：13935115
> 
> 赞同：1
> 
> 时间：2012-12-18T14:30:41.337
> 
> 标签：r

在 r 中，如何获得由双向 ANOVA（每个组合的均值）产生的不同组的均值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:01:21.117

有一个命令。假设您的模型是`m`.

```
model.tables(m, type = 'means') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:50:11.490

一种可能：

```
m1 <- lm(y~f1*f2,data=d)
predict(m1,newdata=with(d,expand.grid(f1=levels(f1),f2=levels(f2))) 
```

# c# - 安装时应用程序崩溃

> ID：13935117
> 
> 赞同：1
> 
> 时间：2012-12-18T14:30:54.047
> 
> 标签：c#, visual-studio-2010

我为 Visual Studio 项目创建了安装文件。这些是通过将项目输出添加到设置项目来创建的。从而包括所有 DLL 文件和项目本身。

当应用程序安装在用于开发它的机器上时，它工作正常。但是，当它安装在另一台安装了全新 Windows 的计算机上（安装了 .NET Framework 4.0）时，应用程序在启动时崩溃 - 它甚至无法启动。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:49:14.923

我首先要看的是 Windows 事件日志。您的崩溃原因很可能会写入应用程序事件日志。

您可以尝试使用[DispatcherUnhandledException](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx)捕获所有未处理的异常：

```
public partial class App : Application
{
    void App_DispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e)
    {
        // Process unhandled exception

        // Prevent default unhandled exception processing
        e.Handled = true;
    }
} 
```

有了它，您可以添加一小段代码来将异常写入日志文件或 MessageBox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:28:51.623

要了解崩溃的原因，您可以使用以下内容从 Program.cs（或 Main() 所在的位置）中捕获未处理的异常：

```
 static void Application_ThreadException(object sender, ThreadExceptionEventArgs e)
        {
            MessageBox.Show(e.Exception.Message, "Unhandled Thread Exception");
            // here you can log the exception ...
        }

        static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
        {
            MessageBox.Show((e.ExceptionObject as Exception).Message +
                "\r\n\r\nStack Trace:" +
                (e.ExceptionObject as Exception).InnerException.StackTrace, "Unhandled UI Exception");
            // here you can log the exception ...
        } 
```

这些消息会给你一些线索。您还应该检查事件日志，您可能会在那里找到一些有用的信息。

# c# - ASP MVC 4 路由错误

> ID：13935118
> 
> 赞同：1
> 
> 时间：2012-12-18T14:30:58.930
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我的 ASP MVC 4 应用程序有问题

这是我的已知错误：

> 参数字典包含方法“System.Web.Mvc.ActionResult Index(Int32, Int32, Int32)”的不可为空类型“System.Int32”的参数“页面”的空条目

这是我的`RouteConfig.cs`：

```
routes.MapRoute(
            name: "AppareilRoute",
            url: "Appareil/page/{page}/{pageSize}/{triCol}",
            defaults: new { controller = "Appareil", action = "Index", page = "{page}", pageSize = "{pageSize}", triCol = "{triCol}" }
        );

routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

我的电话：

```
@Html.RouteLink("Appareils", "AppareilRoute", new { page=0, pageSize=50, triCol=0 }) 
```

控制器总是接收空值。

我对这个错误感到非常失望，我尝试了很多东西，但没有一个有效......
有人可以在这里帮助我吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:39:35.897

您需要将整数值作为路由中的默认值：

```
routes.MapRoute(
        name: "AppareilRoute",
        url: "Appareil/page/{page}/{pageSize}/{triCol}",
        defaults: new { controller = "Appareil", action = "Index", page = 0, pageSize = 50, triCol = 0 }
    ); 
```

# mule - 使用 Mule ESB、Mule Studio 将数据插入 PostgreSQL 时无法从 XML 正确读取数据

> ID：13935124
> 
> 赞同：0
> 
> 时间：2012-12-18T14:31:17.023
> 
> 标签：mule, mule-studio

我有一个xml文件如下

```
<Families>
    <Family>
        <title>Mr</title>
        <name>Xyz</name>    
    </Family>
    <Family>
        <title>Mr</title>
        <name>Mno</name>    
    </Family>
</Families> 
```

我正在尝试读取文件并将数据存储到 PostgreSQL 数据库中。我的配置xml文件如下

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:jdbc="http://www.mulesoft.org/schema/mule/jdbc" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/jdbc http://www.mulesoft.org/schema/mule/jdbc/current/mule-jdbc.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
    <jdbc:postgresql-data-source name="PostgreSQL_Data_Source" user="superuser" password="pwd" url="jdbc:postgresql://localhost:5432/TestDB" transactionIsolation="UNSPECIFIED" doc:name="PostgreSQL Data Source"/>
    <jdbc:connector name="Database-Connector" dataSource-ref="PostgreSQL_Data_Source" validateConnections="true" queryTimeout="-1" pollingFrequency="0" doc:name="Database">
        <jdbc:query key="InsertQuery" value="INSERT INTO &quot;tblTest&quot;(title, content)VALUES (#xpath://title,#xpath://name)"/>
    </jdbc:connector>
    <flow name="testxmlFlow1" doc:name="testxmlFlow1">
        <file:inbound-endpoint path="C:\Users\nbiswas\Documents\InputFolder" responseTimeout="10000" doc:name="File"/>
        <byte-array-to-string-transformer doc:name="Byte-Array-to-String"/>
        <splitter evaluator="xpath" expression="/Families/Family" doc:name="Splitter"/>
        <jdbc:outbound-endpoint exchange-pattern="one-way" queryKey="InsertQuery" queryTimeout="-1" connector-ref="Database-Connector" doc:name="Database"/>
    </flow>
</mule> 
```

运行时，我收到以下错误（主要）

```
Exception stack is:
1\. ERROR: syntax error at or near ":"
  Position: 52(SQL Code: 0, SQL State: + 42601) (org.postgresql.util.PSQLException)
  org.postgresql.core.v3.QueryExecutorImpl:2157 (null)
2\. ERROR: syntax error at or near ":"
  Position: 52 Query: INSERT INTO "tblTest"(title, name)VALUES (#xpath://title,#xpath://name) Parameters: [](SQL Code: 0, SQL State: + 42601) (java.sql.SQLException)
  org.apache.commons.dbutils.QueryRunner:540 (null) 
```

我怀疑有什么问题

**“值（#xpath://title,#xpath://name）”**

有人可以帮我解决问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:49:12.310

这不是有效的表达式语言语法，例如`#[ ... ]`，也不是有效的 MEL XPath 表达式（请参阅[http://www.mulesoft.org/documentation/display/MULE3USER/Mule+Expression+Language#MuleExpressionLanguage-Xpath](http://www.mulesoft.org/documentation/display/MULE3USER/Mule+Expression+Language#MuleExpressionLanguage-Xpath)）。

采用：`#[xpath('//title').text]`

请注意，我添加`.text`是因为您想要所选 DOM 元素的文本内容，而不是 DOM 元素本身。

# uml - 聚合多重性 UML

> ID：13935125
> 
> 赞同：7
> 
> 时间：2012-12-18T14:31:18.077
> 
> 标签：uml, aggregation, multiplicity

我和我的同事在一点上无法达成一致。在 UML 中，进行聚合时，**菱形边**的重数是否为 1 最大值，或者可以为 0..* ？还是取决于观点？
先感谢您 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-26T15:38:12.297

首先，您需要具体说明您的意思是哪个“钻石”作为*聚合*中的空钻石和填充钻石是*组合*？

如果您的意思是空钻石，那么 Icepack 是正确的，并且您混淆了 2 个不同的东西。 *多重性*与*聚合*无关，因此“菱形”*聚合*指标可以具有您喜欢的任何*多重*性，因为它们是不相关的。

If you mean filled diamond ie *composition* then the example someone has posted won't really help you as it's saying: "There are many departments but `only 1` University (*multiplicity*)" and that "if all departments are deleted then University is also deleted (*composition*)".

I am struggling to think of a good example where *composition* end wouldn't be `1 only` and as far as I can think it would never be `0..*` as you can have a class which has to delete something which may not ever exist? I could however be `1..*` ie *many to many*, for example Exam and Exam Questions.

多重性可能是`1..*`即`1..*` 考试有`1 or more`问题并且问题可以存在于`1 or more`考试中。考试结束时填充菱形（*作文*）意味着如果所有问题都被删除，那么所有考试也将被删除

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:24:03.707

是的，它可以是 0..*。[这里](http://en.wikipedia.org/wiki/Object_composition#Aggregation)有一个很好的例子：系有几个教授，每个教授可能同时属于几个系。

# jquery - 为什么当我尝试将它们拖放到彼此时，我的所有 JQuery 拖放对象都会消失？

> ID：13935126
> 
> 赞同：1
> 
> 时间：2012-12-18T14:31:17.517
> 
> 标签：jquery, html, css, jquery-ui, web

我一直在尝试允许 x 数量的动态生成 div 框使用 JQuery 相互拖放。

问题是，每当我尝试将一个框拖入另一个框时，我生成的每个框，无论是否参与该操作，都会消失。

[这是提琴手链接](http://jsfiddle.net/Bladetrick/J5WAf/4/)。

这是代码：

```
$('#btnOpen').click(function() { OnClientDroppedHandler(); });    

function OnClientDroppedHandler() {

    $('#divWorkSpace').append('<div class="divLoc"><p> I am a box.  Try to Drag and Drop me into another box </p></div>');
    $('.divLoc').resizable();

    $('.divLoc').droppable({
        accept: '.divLoc',
        over: function () {
                $('.divLoc').appendTo($(this));
                $(this).animate({ 'border-width': '5px',
                    'border-color': '#0f0'
                }, 500);
                $('.divLoc').draggable('option', 'containment', $(this));
        }
    });

    $('.divLoc').draggable({
        containment: $('.divWorkSpace')
    });
    return false;      
}; 
```

CSS：

```
.divLoc
{
width:100px;
height:100px;
background-color: White;
border: 1px solid black;
z-index: 100;
} 
```

标记：

```
<input id="btnOpen" type="button" value="Click to Open New Dialog" /> -- Generate at least two dialogs and try to drag and drop them into each other --
<div id="divWorkSpace" style="height: 500px; width: 700px; background-color: Gray;"></div> 
```

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:04:02.693

问题是您的对话框没有唯一的 ID。您使用类，而您应该在以下行使用 id：

```
$('.divLoc').appendTo($(this)); 
```

你所做的是，你将所有的 div 附加到一个你放东西的地方。这意味着您将其附加到自身。

希望这会有所帮助。

# android - 如何使用 ActivityManager 获取附加信息

> ID：13935128
> 
> 赞同：0
> 
> 时间：2012-12-18T14:31:25.273
> 
> 标签：android, android-activity

```
List<ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1);
                ComponentName componentInfo = taskInfo.get(0).topActivity;
                componentInfo.getPackageName();

                activity = taskInfo.get(0).topActivity.getClassName();
                packagename = componentInfo.getPackageName(); 
```

我有这段代码来获取正在运行的活动和包名称。我的问题是：这个包包含另一个类（Name.java），它不是一个活动，并返回一个我也需要获取的字符串值。ActivityManager 可以做到这一点吗？

更清楚地说：家庭活动是一个带有项目列表的屏幕。通过向右或向左滑动，屏幕会改变并显示，例如，最喜欢的项目、评分项目等。这些屏幕/视图中的每一个都有一个名称（Name.java 处理它）。我想要做的是，获取当前视图的名称，而不仅仅是 Activity 的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:17:23.567

不，您无法使用 ActivityManager 获取此信息。ActivityManager 只会为您提供有关 Android 组件（Activity、Service、BroadcastReceiver、ContentProvider）及其配置的信息。您无法访问其他包中的随机 Java 类。

# c# - 在 T4 模板中引用本机 DLL

> ID：13935129
> 
> 赞同：2
> 
> 时间：2012-12-18T14:31:26.357
> 
> 标签：c#, .net, visual-studio-2010, t4

我正在构建一个 T4 模板并且我正在引用我的自定义程序集，自定义程序集引用了本机 DLL。

当我在 tt 文件中使用以下语法时：<#@ Assembly Name="c:\projects\lib\xxx.dll" #>

我收到以下错误：“错误 1 ​​无法解析程序集引用。路径 'c:\projects\lib\xxx.dll' 必须是这台计算机本地或受信任区域的一部分。如果您已下载此模板，您可能需要使用 Windows 资源管理器中模板文件的属性页面“取消阻止”它。

即使，该文件确实存在。

我只是猜测模板还需要加载 com dll 而不仅仅是包装器。

# python - 调用从 perl 返回值的 python 脚本

> ID：13935132
> 
> 赞同：2
> 
> 时间：2012-12-18T14:31:35.613
> 
> 标签：python, perl

我有一个python函数

```
import commands
output=commands.getputput("ls -l")
print output
return output 
```

我需要从我的 perl 脚本中的 python 函数获取这个返回值

```
my($command)=`$python_script_path`;
print $command; 
```

我的问题是，通过在 python 中打印输出，我可以在屏幕上得到我的结果，但我实际上在 Perl 脚本中也需要这个输出，所以我宁愿返回它。我怎样才能实现它？另请注意，我不想使用内联 python。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:38:25.100

[命令](http://docs.python.org/2/library/commands.html)模块自 2.6 起已弃用。改用[子流程](http://docs.python.org/2/library/subprocess.html)。

```
p = subprocess.Popen(['ls', '-l'], stdout=subprocess.PIPE, shell=True)
print p.communicate()[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:35:24.740

返回代码是数值。

最好的办法是打印输出并在 Perl 中捕获输出。

这可能会有所帮助：[如何从 Perl 调用 python 脚本？](https://stackoverflow.com/questions/6340479/how-to-call-a-python-script-from-perl)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:04:11.907

您还可以在文件“打开”中打开指向 Python 脚本的管道：

```
open PYTHON, "$python_script_path|";
while(<PYTHON>){
 print;
}
close PYTHON; 
```

# javascript - 如何在 WebGL 中提供 x 轴和 y 轴值？

> ID：13935134
> 
> 赞同：3
> 
> 时间：2012-12-18T14:31:42.763
> 
> 标签：javascript, 3d, charts, webgl

我正在尝试使用 WebGL 绘制 3D 表面。我的问题是它不允许我提供 x 和 y 值。它绘制 z 轴值与范围从 0 到 n 的 x 值和范围从 0 到 m 的 y 值（所有整数值）。

如何制作一个还可以为 3D 表面构造提供 x 和 y 值的表面。此外，如果在 WebGL 中无法做到这一点，那么我可以使用什么解决方案？

PS 另外，WebGL 工具提示功能不起作用。对此有何评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:14:12.687

我猜你是说你不能指定 x 和 y 相对于绘制 (z) 值的比例？

您需要对整个曲面（模型视图矩阵）应用非均匀比例，以便将 X 和 Y 轴拉伸成您想要的形状。您使用的是three.js 或类似的库，还是...？答案将定义您应该使用的特定命令。

例如，假设您有一个 100x50 的绘图，库强制 x 和 y 之间的间距为 1.0。相反，您希望 x 和 y 的大小为 300x200。您可以将矩阵缩放 (3,4,1)。

如果您想更改 Z 数据的显示范围，我建议调整其零点（即向上或向下平移以居中），然后根据需要适当缩放。

# java - 在复合组件之间共享属性文件

> ID：13935140
> 
> 赞同：2
> 
> 时间：2012-12-18T14:32:07.147
> 
> 标签：java, web-applications, jsf-2, composite-component

我知道我可以将“inputEditable”复合组件使用的消息放入以下目录结构中的 .properties 文件中：

![在此处输入图像描述](../Images/2952fd3e9257bd2c29812ae324071979.png)

但是有没有办法让 2 个或更多复合组件共享一个 .properties 文件？例如，如果有一条消息或文本值我想在它们之间通用？甚至只有其中的 2 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:55:01.440

如果您经常使用此组件，您可以将其加载到资源包中并从那里调用您的属性：

```
<resource-bundle>
    <base-name>com.example.resources.BundleName</base-name>
    <var>inputEditable</var>
</resource-bundle> 
```

并调用使用`#{inputEditable['yourVar']}`

或者，如果它不经常使用，则不需要将其作为资源包加载，然后可以使用`<f:loadBundle>`和以相同方式调用的变量在视图中加载资源包。

## 也可以看看

*   [JSF 中的国际化，何时使用消息包和资源包？](https://stackoverflow.com/questions/2668161/when-to-use-message-bundle-and-resource-bundle)
*   [如何从托管 bean 中获取消息包字符串？](https://stackoverflow.com/questions/6272945/jsf-2-how-can-i-get-a-message-bundle-string-from-inside-a-managed-bean)

# asp.net-mvc - 绕过实体框架中的外键约束

> ID：13935146
> 
> 赞同：0
> 
> 时间：2012-12-18T14:32:34.043
> 
> 标签：asp.net-mvc, entity-framework

我有一个由以下字段组成的视图模型

```
public class ProfileViewModel
{

public String description { get; set; }
public Double height { get; set; }
public Double weight { get; set; }

public List<InterestDescription> interestedBy { get; set; }
} 
```

**InterestDescription**是保存在我的数据库中的另一个实体。

我想让用户能够同时创建其个人资料并添加兴趣**描述**。

我的问题是 InterestDescription 实体与 profile 有多对一的关系，所以我不能在没有创建 profile 的情况下创建 interestdescription。

我的问题是：是否可以绕过实体框架中特定插入的外键约束，如果不能，您能否建议我其他解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:34:37.840

不，你不能。

你不应该这样做。只要您一次保存更改，就应该以正确的顺序在数据库中创建实体。

# perl - 如何默认设置 ComboBoxEntry？

> ID：13935151
> 
> 赞同：3
> 
> 时间：2012-12-18T14:33:13.360
> 
> 标签：perl, gtk, gtk2

我有一个 ComboBoxEntry：

```
my $com_entry = Gtk2::ComboBoxEntry->new($model, 0); 
```

我需要从 ComboBoxEntry 中删除用户条目（设置一个空值）。ComboBox的方法`$com_entry->set_active_iter(undef);`不起作用。有任何想法吗？感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T18:06:29.020

根据*“删除用户条目”的*含义：

1.  如果您只想将条目文本设置为空：

    ```
    $com_entry->child->set_text (""); 
    ```

2.  如果您什么都不选：

    ```
    $com_entry->set_active (-1); 
    ```

3.  如果要从弹出菜单中删除所选项目：

    ```
    my $model = $com_entry->get_model;
    my $iter = $com_entry->get_active_iter;
    defined $iter and $model->remove ( $iter ); 
    ```

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T05:32:32.113

我有点猜测，我在我的 MonoDevelop 项目中使用 GTK+，当我需要一些快速而肮脏的东西时，我会玩弄 PERL。像这样的东西呢：`$com_entry->append_text("");`？

你可能会从[这里得到一些其他的想法：](http://www.pygtk.org/docs/pygtk/class-gtkcomboboxentry.html)

# java - 如何发送电子邮件？

> ID：13935153
> 
> 赞同：1
> 
> 时间：2012-12-18T14:33:20.053
> 
> 标签：java, android, email

我正在尝试开发一个应用程序来发送来自特定电子邮件 ID 的电子邮件。它不会执行并强制关闭，为什么会这样？有什么方法可以发送电子邮件，请查看我的代码。

```
public class MainActivity extends Activity {
    Button send = null;
    EditText mailid = null
    String emailId = null;
    ConnectivityManager conMan = null;
    NetworkInfo Info = null;

     @Override
     protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        send = (Button)findViewById(R.id.button1);
        mailid = (EditText)findViewById(R.id.editText1);
        send.setOnClickListener(new OnClickListener() {
             @Override
             public void onClick(View arg0) {
                // TODO Auto-generated method stub
                conMan = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
                Info = conMan.getActiveNetworkInfo();
                emailId = mailid.getText().toString();

                if (Info == null) {
                    Toast.makeText(getApplicationContext(), "no net connection ", Toast.LENGTH_LONG).show();
                } else {
                    try {
                        GmailSender sender = new GmailSender("karuna.java@gmail.com", "heohiby");
                        sender.sendMail("This is Subject",
                            "This is Body how r u ..",
                            "karuna.java@gmail.com",
                            emailId);
                    } catch (Exception e) {
                        Log.e("SendMail", e.getMessage(), e);
                    }
                }
            }
        });
    }

} 
```

这里是 GmailSender

```
public class GmailSender extends javax.mail.Authenticator {
    private String mailhost = "smtp.gmail.com";
    private String user;
    private String password;
    private Session session;
    static {
        Security.addProvider(new com.provider.JSSEProvider());
    }

    public GmailSender(String user, String password) {
        this.user = user;
        this.password = password;

        Properties props = new Properties();
        props.setProperty("mail.transport.protocol", "smtp");
        props.setProperty("mail.host", mailhost);
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class",
            "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false");
        props.setProperty("mail.smtp.quitwait", "false");

        session = Session.getDefaultInstance(props, this);
    }

    protected PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(user, password);
    }

    public synchronized void sendMail(String subject, String body, String sender, String recipients)throws Exception {
        try {
            MimeMessage message = new MimeMessage(session);
            DataHandler handler = new DataHandler(new ByteArrayDataSource(body.getBytes(), "text/plain"));
            message.setSender(new InternetAddress(sender));
            message.setSubject(subject);
            message.setDataHandler(handler);
            if (recipients.indexOf(',') > 0)
                message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));
            else
                message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));
            Transport.send(message);
        } catch (Exception e) {}
    }

    public class ByteArrayDataSource implements DataSource {
        private byte[]data;
        private String type;

        public ByteArrayDataSource(byte[]data, String type) {
            super();
            this.data = data;
            this.type = type;
        }

        public ByteArrayDataSource(byte[]data) {
            super();
            this.data = data;
        }

        public void setType(String type) {
            this.type = type;
        }

        public String getContentType() {
            if (type == null)
                return "application/octet-stream";
            else
                return type;
        }

        public InputStream getInputStream()throws IOException {
            return new ByteArrayInputStream(data);
        }

        public String getName() {
            return "ByteArrayDataSource";
        }

        public OutputStream getOutputStream()throws IOException {
            throw new IOException("Not Supported");
        }
    }
} 
```

和提供者

```
public final class JSSEProvider extends Provider {

    public JSSEProvider() {
        super("HarmonyJSSE", 1.0, "Harmony JSSE Provider");
        AccessController.doPrivileged(new java.security.PrivilegedAction < Void > () {
            public Void run() {
                put("SSLContext.TLS",
                    "org.apache.harmony.xnet.provider.jsse.SSLContextImpl");
                put("Alg.Alias.SSLContext.TLSv1", "TLS");
                put("KeyManagerFactory.X509",
                    "org.apache.harmony.xnet.provider.jsse.KeyManagerFactoryImpl");
                put("TrustManagerFactory.X509",
                    "org.apache.harmony.xnet.provider.jsse.TrustManagerFactoryImpl");
                return null;
            }
        });
    }
} 
```

日志文件

```
12-19 11:07:43.363: E/AndroidRuntime(977):    at dalvik.system.NativeStart.main(Native Method) 
12-19 11:10:55.453: D/AndroidRuntime(1035): Shutting down VM 
12-19 11:10:55.453: W/dalvikvm(1035): threadid=1: thread exiting with uncaught exception (group=0x40015578) 
12-19 11:10:55.464: E/AndroidRuntime(1035): FATAL EXCEPTION: main 
12-19 11:10:55.464: E/AndroidRuntime(1035): java.lang.NoClassDefFoundError: com.yakshna.mail.GmailSender 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at com.yakshna.mail.MainActivity$1.onClick(MainActivity.java:42) 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at android.view.View.performClick(View.java:2538) 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at android.view.View$PerformClick.run(View.java:9152) 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at android.os.Handler.handleCallback(Handler.java:587) 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at android.os.Handler.dispatchMessage(Handler.java:92) 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at android.os.Looper.loop(Looper.java:123) 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at android.app.ActivityThread.main(ActivityThread.java:3687) 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at java.lang.reflect.Method.invokeNative(Native Method) 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at java.lang.reflect.Method.invoke(Method.java:507) 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842) 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600) 
12-19 11:10:55.464: E/AndroidRuntime(1035):     at dalvik.system.NativeStart.main(Native Method) 
12-19 11:11:02.570: I/Process(1035): Sending signal. PID: 1035 SIG: 9 
```

此处显示错误：

```
GmailSender sender = new GmailSender("karuna.java@gmail.com", "heohiby"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:43:10.497

您目前的问题是您尚未`<uses-permission>`在`Android.manifest`.

[getActiveNetworkInfo()](http://developer.android.com/reference/android/net/ConnectivityManager.html#getActiveNetworkInfo%28%29)方法[需要 ACCESS_NETWORK_STATE](http://developer.android.com/reference/android/Manifest.permission.html#ACCESS_NETWORK_STATE)权限。

你需要把它放在你的`Android.manifest`文件中

`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:45:34.653

清单中的权限是否正确？

也请务必阅读：

[http://productforums.google.com/forum/#!msg/gmail/XD0C4sw9K7U/LpNXxFNnfgc](http://productforums.google.com/forum/#!msg/gmail/XD0C4sw9K7U/LpNXxFNnfgc)

以前的权限是：

```
?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="googlecode.email.to.sms" android:versionCode="2"
android:versionName="1.0">
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".Email2SMSActivity" android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>
<uses-sdk android:minSdkVersion="5" 
    android:maxSdkVersion="8"
    android:targetSdkVersion="7" />

<uses-permission
    android:name="com.google.android.providers.gmail.permission.READ_GMAIL" />
<uses-permission
    android:name="com.google.android.gm.permission.READ_GMAIL" />
<uses-permission 
    android:name="android.permission.GET_ACCOUNTS" />
</manifest> 
```

我在 Android 中没有使用过 Gmail，但希望这会有所帮助。

# c# - c#数据读取器在绑定之前更改字段名称

> ID：13935157
> 
> 赞同：-4
> 
> 时间：2012-12-18T14:33:36.730
> 
> 标签：c#, sqldatareader, bindingsource

我有`SqlDataReader`那个充满`ExecuteDataReader`声明。我想在填充后更改 DataReader 中的某些列名。

例如，在填充数据读取器后，我有两列（A，B）我想将列更改`'A'`为`'a'`（转换为小写），以便绑定到网格

```
sqlDataReader reader;
reader.executedatareadet(); 
```

就像`reader.GetName(i)` 我想成为安倍一样

```
reader.SetName(i) 
```

但似乎我们无法更改 datareader 列名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:42:56.450

`DataReader`仅用于读取返回的数据。您读取这些值并将它们放入您自己的数据结构或变量中。

改变数据读取器结构的唯一方法是在数据源上，即格式化返回数据的 SQL 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:49:49.393

然后，您需要将数据存储在您自己的变量中。运行您的 executeReader() 并将结果放入 var dataHolder。然后用一个循环遍历dataHolder

```
 foreach(var x in dataHolder)
   {
        x.Property = x.Property.ToLower(); //Or something like this
   } 
```

然后当你完成后，你可以将dataHolder放在一个网格或其他东西中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:53:53.937

在读取和绑定之间引入一个中间模型层。从数据读取器读取数据后，将数据加载到中间模型中，然后对那里的数据进行更改，然后将模型集合绑定到数据源。

# c++ - 按值传递的参数 Vs 的内存消耗。引用

> ID：13935165
> 
> 赞同：1
> 
> 时间：2012-12-18T14:33:59.830
> 
> 标签：c++, pass-by-reference, memory-consumption

> **可能重复：**
> [按引用传递与按值传递有什么区别？](https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value)

我知道标题可以代表许多其他已回答的问题，我相信我的非常具体的问题没有在其他线程中得到回答（我已经搜索过，如果它是重复的，抱歉）。

对企业：考虑下一个签名：

A：

```
void MyFunction(long int x); 
```

乙：

```
void MyFunction(long int & x); 
```

和下一个用法：

```
void main()
{
  short int y = 0;
  MyFunction(y);
  ...
} 
```

我的问题与MyFunction的内存堆栈帧中参数的内存消耗有关。

1.  情况A，参数是传值的，是不是会消耗sizeof(short int)个字节？

2.  在情况 B 中，参数通过引用传递，假设编译器将使用指针实现它，这是否意味着它将消耗 sizeof( *pointer_type* ) 字节 - 这可能比 short int 更多？（曾经有人告诉我，在使用引用时，它可能会消耗 64 位，具体取决于平台）

请注意，该函数接收 long int 类型，因为我想知道它在这两种情况下是否有任何影响。

还有另一个小问题 - 任何人都可以发布一个编译器不会使用指针实现按引用传递参数的示例吗？

谢谢，阿萨夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:41:58.473

答案必然取决于编译器、架构、[ABI](http://en.wikipedia.org/wiki/Application_binary_interface)等。

在接下来的内容中，我假设有问题的参数实际上是在堆栈上而不是在寄存器中传递的（很大的假设！），并且没有积极的优化。

> 情况A，参数是传值的，是不是会消耗sizeof(short int)个字节？

不，它将消耗`sizeof(long int)`字节，因为它将首先扩大以匹配`MyFunction()`的签名。

> 情况B，参数是按引用传递的，假设编译器会用指针来实现，是不是意味着会消耗sizeof(pointer_type)字节

一句话，是的。你不能通过 a预期的`short&`地方`long&`，所以我假设你的意思是你在`long&`这里通过 a 。

# java - java.lang.NumberFormatException：对于输入字符串

> ID：13935167
> 
> 赞同：9
> 
> 时间：2012-12-18T14:34:05.790
> 
> 标签：java

日食告诉那个 lang 我找不到解决方案

> 线程“主”java.lang.NumberFormatException 中的异常：对于输入字符串：java.lang.NumberFormatException.forInputString(Unknown Source) at java.lang.Integer.parseInt(Unknown Source) at java.lang.Integer 的“2463025552”。 Main.main(Main.java:31) 处的 parseInt(Unknown Source)

```
String s2[]=s.split("\\,");
Records rec=new Records();
rec.setName(s1[0]);
rec.setAddres(s2[0]);

phone  = Integer.parseInt( s2[1].trim() );
System.out.println(phone); 
```

我以这种格式从文件中读取名称-地址，电话和数组列表中的广告放入电话我有问题

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-18T14:35:42.463

如果传递的字符串不是整数的有效表示，则 Integer.parseInt 会引发 NumberFormatException。在这里，您尝试传递**超出整数范围**的**2463025552**。

 **改用 long

```
long phone = Long.parseLong(s2[1].trim() ) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-18T14:37:38.390

真正的问题是电话号码不是整数。它是一个`String`. 您不应该将其存储为数字，原因与您现在遇到的问题类似。这同样适用于邮政编码、运动队的球衣号码和许多其他“假”号码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T14:38:30.023

带符号的 32 位整数最多只能读取 2^31。您必须使用更大的数据类型。long 会让你达到 2^63。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T15:27:11.590

基本的事情是，我们不需要电话号码作为加法、减法等算术计算的一部分。因此我们可以安全地将其视为字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T14:36:09.153

```
2463025552 
```

超出 int 数据类型的范围，请尝试给出较小的数字。还要检查它是否是正确的数字格式（比如没有空格等）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T14:38:42.483

`Integer.parseInt( s2[1].trim() );`这是你的问题。因此，将您的解析更改`Integer`为`Long`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T14:44:04.587

将数据类型更改为 long 或 bigint。你的字符串太长了，这就是为什么它有异常..**

# asp.net - 如何在现有的 asp.net 网站中创建或附加 WCF 服务

> ID：13935169
> 
> 赞同：6
> 
> 时间：2012-12-18T14:34:06.327
> 
> 标签：asp.net, wcf, deployment

我已经有一个使用 asp.net 表单项目类型开发的在 ORCS Web 中实时和托管的网站。现在我正计划开发一个 wcf 服务，它将存储在我现有网站的一个新文件夹中。我们将使用 wcf 服务将文件从客户端机器上传到我们的 Web 服务器。客户端可以是任何其他基于 .net 的 Web 应用程序或基于 .net 的 win 应用程序。我从不在生产环境中使用 wcf。所以我想知道我是否可以创建将存储在我网站的新文件夹中的 wcf 服务，或者我是否需要单独托管该 wcf 服务。

如果我可以将 wcf 服务存储在我现有的网站中，那么如何部署它？如果我在开发和测试之后将我的站点和 svc 的 dll 文件复制到我们的 Web 服务器中，那么从客户端创建代理就足够了。实际上，我必须如何在我的站点中创建 wcf 服务。我无法在我的网站之外单独部署 wcf 服务。所以请指导我如何部署以及我需要将哪些文件复制到我的 Web 服务器，因为我将第一次这样做。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T15:05:03.737

您可以将 wcf 服务添加到现有的 asp.net 应用程序。打开解决方案资源管理器右键单击 asp.net 应用程序项目并选择“添加”->“新建项目”，然后选择“WCF 服务”。

VS 将通过添加与此类似的内容来修改您的 web.config，wcf 服务器配置：

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

现在关于部署解决方案。进行部分部署绝不是一个好主意。请阅读我关于此主题的一篇文章[在网页中进行更改时要上传哪些文件](https://stackoverflow.com/questions/13911916/what-files-to-upload-when-making-a-change-in-a-webpage/13912681#13912681)

# c# - 如何在 Windows Store (Metro) 应用程序的 DataAnnotations 中使用“ErrorMessageResourceType”

> ID：13935170
> 
> 赞同：7
> 
> 时间：2012-12-18T14:34:13.633
> 
> 标签：c#, .net, microsoft-metro, windows-runtime, windows-store-apps

在我的 Windows Store (Metro) 应用程序中，我正在为我的对象使用 DataAnnotations。一切正常。

现在我尝试将我的字符串放入**Resource.resw**文件中。DataAnnotations 需要填写 2 个属性：`ErrorMessageResourceName`和`ErrorMessageResourceType`. 如何使用`ErrorMessageResourceType`新的资源类型？

```
public class Person : Entity
{
    private string _firstName;

    [Required( ErrorMessageResourceName = "GenericFieldRequired", ErrorMessageResourceType = typeof( ??? ))]
    public string FirstName {
        get { return _firstName; }
        set { SetPropertyChanged( ref _firstName, value, this ); }
    }
} 
```

有什么建议么？

**更新：** 我找到了一个自动生成 Resources.cs 文件的 Visual Studio 工具：

[转速发生器](http://reswcodegen.codeplex.com/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T00:13:38.007

经过大量挖掘，我想我明白你为什么会遇到问题。

在其他项目类型中，资源文件会自动转换为具有称为资源键名称的静态方法的类。

没有办法真正自动执行此操作，因此我编写了一个 T4 模板来帮助您解决此问题。

```
<#@ template debug="false" hostspecific="True" language="C#" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Xml" #>
<#@ assembly name="System.Xml" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ output extension=".cs" #>
using Windows.ApplicationModel.Resources;
<# 
  var namespaceName = System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("NamespaceHint");
#> 
namespace <#= namespaceName #>
{ 
    public class ResourceHelper
    {
        private static readonly ResourceLoader resourceLoader = new ResourceLoader("Resources");
<# using (XmlReader reader = XmlReader.Create(Host.ResolvePath("Resources.resw")))
        {
             bool found=reader.ReadToFollowing("data");
             while(found)
             {
                reader.MoveToFirstAttribute();
                string name = reader.Value;     

#>
            public static string <#= name #>
            {
                get
                {
                    return resourceLoader.GetString("<#= name #>");
                }
            }
<#
                found=reader.ReadToFollowing("data");
            }
        }#>

    } 
} 
```

如果您将模板放在与资源文件相同的文件夹中，它将输出一个名为 ResourceHelper.cs 的文件。然后可以在您的对象模型中使用它：-

```
 [Required(ErrorMessageResourceName = "validation_string", ErrorMessageResourceType = typeof(ResourceHelper))] 
```

请注意，有一些限制。首先，我不太擅长 T4 模板，因此代码可能会大大改进。现在你必须确保你给你的资源的名字会产生一个有效的方法名——不要在里面放空格！

其次，当您在资源文件中添加新的键/值时，模板不会自动生成，您必须进入模板并点击保存。

除此之外，它应该可以正常工作-希望对您有所帮助！

# javascript - IE 和其他浏览器最好的 SVG 图形 JavaScript 库是什么？

> ID：13935173
> 
> 赞同：3
> 
> 时间：2012-12-18T14:34:35.233
> 
> 标签：javascript, jquery, graphics, svg

我正在开发网络应用程序（javascript + jquery），我需要在它们之间绘制很多矩形和线条。据我了解，我正在寻找有助于创建轻量级组件的 SVG 图形库（可能有大约 300 个）。

问题是应用程序需要支持不同的浏览器：Internet Explorer、Firefox、Chrome。Internet Explorer 和其他的库是不同的。

我已经尝试过 Raphael 和 YUI，但我不确定它们是否是最好的变体。

有没有人有类似问题的经验？或者也许可以建议使用一个代码有助于在 IE 和其他浏览器中绘制的库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:39:36.850

你应该看看[bonsaijs](http://bonsaijs.org/)，一个带有直观图形 API 和 SVG 渲染器的轻量级图形库。它们支持 IE9+ 和所有其他主流浏览器。

您可以使用 Bonsai 的在线编辑器[Orbit](http://orbit.bonsaijs.org/)进行试驾。涉及零设置。

他们也有很棒的[文档](http://docs.bonsaijs.org/)和[示例](http://demos.bonsaijs.org/demos/circles/index.html)。

![例子](../Images/a7647c5b989603aaf0a9e4a68cd4f26c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:48:42.570

有一个名为“jsPlumb”的库，可以用作 jQuery 或 mooTools 插件/扩展。[您可以在http://jsplumb.org/jquery/demo.html](http://jsplumb.org/jquery/demo.html)找到演示。文档位于：http: [//jsplumb.org/doc/usage.html](http://jsplumb.org/doc/usage.html)。可能有用。该库的大小为 130KB。

# javascript - Javascript 在使用 Ajax 加载的 jQuery UI 选项卡中不起作用

> ID：13935175
> 
> 赞同：1
> 
> 时间：2012-12-18T14:34:42.243
> 
> 标签：javascript, jquery, ajax, jquery-ui, jquery-ui-tabs

在通过 ajax 加载的所有 jQuery UI 选项卡中似乎禁用了 Javascript。我正在使用 jQuery 工具提示和 .click() 警报对此进行测试。Javascript 在不通过 ajax 加载的选项卡（页面上存在的 ID）中可以正常工作。

这是我如何调用选项卡：

```
$(function() {
$('#foo-tabs').tabs(
{
heightStyle: 'content',
// Callback run when selecting a tab
beforeLoad: function(event, ui) {

// If the panel is already populated do nothing
if (ui.panel.children().size() > 0)
    return false;

//load specific ID within target page
ui.panel.load($('a', ui.tab).attr('href') + $('a', ui.tab).attr('data-target'));

// stop the default process (default ajax call should not be launched)
return false;
}
}
);
}); 
```

这是我要激活的javascript：

```
$(function() {
$( '.activate-tooltip' ).tooltip();
}); 
```

和一个测试：

```
$(function() {
$("h1").click(function() {
alert("zomg javascript works!");
});
}); 
```

关于如何让 javascript 在所有 ajax 加载的选项卡中工作的任何想法？感谢您抽出宝贵的时间来解决这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:39:21.490

问题在于，在您绑定事件时，这些元素并不存在于 DOM 中。处理这个问题的方法是将事件*委托*给 DOM 中确实存在的更高级别的 DOM 元素（如果需要，可以到 Document）。

例如使用[.on委托](http://jqueryui.com/tooltip/#custom-content)

```
$(document).on('click', 'h1', function() {
      alert("zomg javascript works!");
 }); 
```

对于工具提示插件，您可以执行以下操作

```
 $(function() {
        //initialize tooltip plugin
        //dvCont is just an existing element in the DOM, you can use #foo-tabs
        $('#dvCont').tooltip({
            items: '.activate-tooltip',
            content: function(){
                var element = $( this );
               if ( element.is( ".activate-tooltip" ) ) {
                return 'Some text';
                }
                if ( element.is( "[title]" ) ) {
                  return element.attr( "title" );
               }

             }
          });

      $('#dvCont').append($('<div class="activate-tooltip" >Test</div>')); //dynamic content

    }); 
```

这是[jsBin的链接](http://jsbin.com/obuzif/1/)

您可以在插件的[演示](http://jqueryui.com/tooltip/#custom-content)页面上看到更完整的示例。

**编辑：**

如果您可以在将插件添加到 DOM 后立即初始化插件，为什么应该使用事件委托，我认为值得指出的是，除了处理动态内容之外，使用事件委托的另一个原因是性能。也就是说，通过事件委托，您可以附加更少的事件处理程序，这反过来意味着使用的内存更少。

为了说明这里有一个[jsPerf](http://jsperf.com/jquery-event-delegation)的链接，它比较了使用事件委托与直接绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:46:08.017

当您调用诸如 之类的方法时`.click()`，它会将事件处理程序直接添加到 jQuery 对象中的所有元素（即**在运行时**匹配选择器的那些元素）。当您向页面添加新元素时，它们没有关联的事件处理程序，因为在执行该代码时它们不存在。

解决方案是事件委托；一般原则是您将事件处理程序设置在 DOM 树更高的元素上 - 一个包含您希望匹配的所有元素的元素。然后，当该类型的事件在其中的元素上触发并通过处理程序冒泡到该元素时，它会检查触发元素是否满足条件；如果是，它执行回调函数。

但是，这仅适用于事件处理程序，不适用于插件。我不知道委派插件初始化的方法，因此您可能只需要再次执行代码。值得庆幸的是，该`.load()`函数带有一个回调函数，该函数将在新标签内容通过 AJAX 加载完成时运行。

```
ui.panel.load($('a', ui.tab).attr('href') + $('a', ui.tab).attr('data-target'), function() {
    $('.activate-tooltip', ui.panel).tooltip();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:42:00.873

您可以使用`on`jquery 的功能来触发动态创建的 html 的点击事件（在您的情况下，它是创建动态 html（选项卡）的 ajax 函数）。`

> `$("h1").on("click", function(){ alert("zomg javascript works!"); });`

`

# c# - 是否有任何属性可以知道哪个表单在后台运行

> ID：13935178
> 
> 赞同：0
> 
> 时间：2012-12-18T14:35:00.750
> 
> 标签：c#, winforms

我有三个窗口窗体，我有一个按钮`form1`和一个按钮`form2`，如果`form1`已单击按钮，则显示`form2`：

```
form2 f2 = new form2();
f2.show(); 
```

`form1`仍然在背景中并且可见。上还有一个按钮`form2`。单击该按钮时，会发生`form2`在后台运行并`form3`显示的相同事件。什么时候`form3`显示我想隐藏`form1`。

我怎样才能做到这一点？是否有任何属性可以帮助我知道后面运行的是哪种形式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:38:41.337

您可以检查您的表单是否有焦点

```
bool foc = formX.Focused; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:39:03.387

您可以使用：`Application.OpenForms`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:39:14.103

您可以使用[Application.OpenForms](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms%28v=VS.80%29.aspx)集合来迭代打开的表单。
然后检查你的名字`Form1`可以`Hide`试试

```
foreach(Form f in Application.OpenForms)
{
   if(f.Name == "Form1")
   {
      f.Hide();
      break;
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T14:40:35.740

`Form2`打开时应该触发一个自定义事件`Form3`。 `Form1`应该在显示时订阅该自定义事件`Form2`，然后`Form1`可以将其隐藏在该事件处理程序中。

```
public class Form2
{
    public event Action Form3Opened;

    public void Bar
    {
        Form3 other = new Form3();
        Form3Opened();
        other.Show();
    }
}

public class Form1
{
    public void Foo()
    {
        Form2 other = new Form2();
        other.Form3Opened += () => Hide();
        other.Show();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T14:39:15.077

是的，您可以使用[Application.OpenForms属性来查找](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)*应用*程序的所有打开表单的集合。

另一种解决方案是可以像调用者表单一样传递*父表单*参数。例如：对于`Form2`父是`Form1`，对于`Form3`父id`Form2`

# php - 插入前的mysql数据库比较

> ID：13935184
> 
> 赞同：0
> 
> 时间：2012-12-18T14:35:21.403
> 
> 标签：php, mysql, database, scrape

所以我正在为 url 抓取一个站点并将这些 url 存储在一个数据库中 我正在使用 mysql 数据库在 php 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:47:17.960

给 URL 一个`UNIQUE`索引。在您的查询中：

```
INSERT IGNORE INTO table (field1,field2) VALUES ('value1','value2') 
```

当它们已经存在于数据库中时，这将跳过 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:41:43.543

您是否使用 phpmyadmin 来管理数据库？

在任何情况下，为了快速，您需要在包含 url 的列上创建一个“索引”。如果您想确保只有唯一的 url 存储在那里，请使用“unqiue index”。

# .htaccess - 使用 htaccess 重写时出现 403 错误

> ID：13935185
> 
> 赞同：-1
> 
> 时间：2012-12-18T14:35:21.030
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有一个将所有请求重定向到 /public/index.php 的 htaccess 文件。

```
AuthType Basic
AuthName "Access to /testsite"
AuthUserFile /kunden/homepages/28/d446685396/htpasswd
Require user oglover

RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . public/index.php [L] 
```

它适用于所有请求，例如 www.mywebsite.com/aboutus、www.mywebsite.com/contact、www.mywebsite.com/news 等....但是如果我访问 www.mywebsite.com/ 我会收到 403 禁止错误。一切正常，直到我搬到一个新的网络主机，我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:44:09.183

```
RewriteRule . public/index.php [L] 
```

此规则中的正则表达式`.`, 表示“字符串中的任何单个字符”，这会导致您的问题。当您请求`www.mywebsite.com/`时，正则表达式与空字符串匹配（请参阅手册中[的匹配内容？](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)）。正则表达式不匹配，因此不应用规则，因此服务器尝试提供 root 的索引，这是被禁止的。

要匹配所有内容，请将规则更改为如下所示：

```
RewriteRule .* public/index.php [L] 
```

意思是“`.*`零个或多个字符”，它确实匹配空字符串。

# c# - 从基访问属性或父类

> ID：13935188
> 
> 赞同：1
> 
> 时间：2012-12-18T14:35:25.050
> 
> 标签：c#

我正在尝试创建一个与数据库交互的应用程序。

我使用多种语言进行编程，我喜欢在基于 MVC 的应用程序中使用模型是多么容易。

所以我的问题是，试图复制这个功能，我有 2 个类如下：

基类：

```
public class BaseModel
{
    protected string TableName { get; set; }

    public BaseModel()
    {         
    }

    public void Save()
    {
        // Save data in derived class to table stored in TableName
    }
} 
```

派生类：

```
public class UserModel : BaseModel
{
    public string Field1 { get; set; }
    public string Field2 { get; set; }

    public UserModel()
    {
        base.TableName = "user";
    }
} 
```

从我的主应用程序中，我希望能够执行以下操作：

```
public class Class1
{
    public Class1()
    {
        UserModel model = new UserModel();
        model.Field1 = "Value1";
        model.Field2 = "Value2";
        model.Save();
    }
} 
```

这是我遇到问题的地方。我一生都无法弄清楚，我将如何访问 UserModel 中的属性，以便将它们保存到在 UserModel 到 BaseModel 的构造函数中指定的数据库表中。

希望这是有道理的。:)

这段代码不是我的工作代码，它是我想要实现的一个非常简单的表示，因此字段和属性（验证器等）已被简化为便于阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:42:47.983

我认为一个更“真实”的例子实际上有助于更好地理解，但我认为你应该在基类中创建一个虚拟（甚至抽象）方法来获取数据以保存在数据库中：

```
public class BaseModel {

    protected virtual string GetDataToSaveInDB() {
        // if it makes sense to have the data as a string...
    }

    public void Save() {
        string data = GetDataToSaveInDB();
        // do something with data...
    }
} 
```

然后返回派生类中的数据：

```
public class UserModel : BaseModel {
    protected override string GetDataToSaveInDB() {
        return "Field1=" + Field1 + ";Field2=" + Field2;
    }
} 
```

这只是为了说明这个概念，如果您提供更多信息，将更容易提供真实的答案。

您如何将数据保存在数据库中？表的结构如何？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:42:06.693

这通常通过在基层利用抽象函数然后用派生类中的细节覆盖它们来解决。所以会在基类中建立一个调用树，但是需要知道派生类细节的函数将在派生类中实现。

```
public class BaseModel
{
    protected string TableName { get; set; }

    public BaseModel()
    {         
    }

    public abstract void Save();
} 
```

在这种情况下，如果您在基类中显示了一个具体的数据表示，那么创建一个 DTO 对象可能会更好，您的业务类可以使用该对象。这是大多数框架（如实体）的方法。

# mysql - MYsql 中的 IF 条件没有给出正确的结果

> ID：13935191
> 
> 赞同：0
> 
> 时间：2012-12-18T14:35:40.133
> 
> 标签：mysql

这是mysql存储过程的代码：

```
BEGIN
DECLARE sms INT(100);
SET sms=(SELECT COUNT(1) FROM tbl_intofone_alert_transaction WHERE smsid='sms_id');
IF(sms<=>0) THEN
INSERT INTO tbl_intofone_alert_transaction(MSISDN,Message,Tag,SenderID,InTime,deliverystatus,
memberid,smsid,updatetime,submit_type,wu_id,DeviceID) 
VALUES(mob,msg,tag,sender,NOW(),'0',memid,sms_id,NOW(),'NULL','NULL',DevId);
END IF;
   END$$ 
```

**上面代码中的IF CONDITION**对所有情况进行插入。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:38:08.657

肯定是

```
 IF(sms<=0) THEN    //sms  less then or equal 0 
```

或者

```
 IF(sms>=0) THEN      //sms  bigger then or equal 0 
```

`<=>`这不是mysql中的比较

观测值

```
 VALUES(mob,msg,tag,sender,NOW(),'0',memid,sms_id,NOW(),'NULL','NULL',DevId); 
```

大多数这些值我不知道它们是什么，它们看起来是错误的

它们必须是您从代码中获取的变量。

`NOW()`在这段代码中，只有`NULL`哪些是正确的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:39:03.067

您确定要在此处搜索字符串文字`'sms_id'`吗？

```
SELECT COUNT(1) FROM tbl_intofone_alert_transaction WHERE smsid='sms_id' 
```

可能您打算使用`sms_id`变量的值：

```
SELECT COUNT(1) FROM tbl_intofone_alert_transaction WHERE smsid = sms_id 
```

# javascript - mainDiv.innerHTML = 外部文件

> ID：13935192
> 
> 赞同：1
> 
> 时间：2012-12-18T14:35:40.057
> 
> 标签：javascript, html

我有一个`code.js`文件，其中包含以下内容：

```
DivDialogHTML = function(){
  var mainDiv = document.createElement("div");
  mainDiv.id = "optin_settings_dialog";
  mainDiv.className = "OptinDialog";
  mainDiv.innerHTML = "<div>Text</div>";
} 
```

加载弹出窗口的代码（不知道是否都是代码，但要明白）：

```
DivDialogOverlayHTML = function(){
  var mainDiv = document.createElement("div");
  mainDiv.id = "optin_settings_overlay_dialog";
  mainDiv.className = "OptinDialog";
  return mainDiv;
}

renderOptinWindow = function(){
  var pageHead = document.getElementsByTagName("head")[0];
  var pageBody = document.getElementsByTagName("body")[0];
  if( pageHead && pageBody ){
    pageBody.appendChild( this.getDivDialogHTML() );
  }
} 
```

而不是使用`mainDiv.innerHTML = '<div>Text</div>'`Id like`mainDiv.innerHTML`打开另一个文件 ( `Dialog.html`)。
我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:56:10.993

with Ajax. But why not using jQuery?

```
$('.selector').load(url); 
```

In your case you have to insert jQuery first like this in your

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

And than take your existing function and change it like this

```
DivDialogHTML = function(){
    var $mainDiv = jQuery("div");
    $mainDiv.attr('id', "optin_settings_dialog");
    $mainDiv.addClass("OptinDialog");
    /* $mainDiv.html("<div>Text</div>"); */
    $mainDiv.load('Dialog.html');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T13:37:10.313

如果你不想使用**jQuery**，你可以使用**iframe**

**HTML**

```
<iframe id="optin_settings_dialog"></iframe> 
```

**Javascript**

```
document.getElementById("optin_settings_dialog").src="Dialog.html"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:38:04.633

你的意思是另一个窗口？如果是这样，请看看`window.open`

[窗口打开](http://www.w3schools.com/jsref/met_win_open.asp)

创建新窗口后，放置其内容并显示

# java - 如何使用 Selenium 注入 XML 文件？

> ID：13935195
> 
> 赞同：0
> 
> 时间：2012-12-18T14:35:43.723
> 
> 标签：java, xml, selenium, selenium-webdriver

我的计算机上有 XML 文件的路径，但是如何使用 selenium（网络自动化工具）注入 XML 文件？

通常如何完成（手动）是导航到 URL，然后将整个 XML 文本复制并粘贴到提供的文本框中。

任何想法如何使用自动化注入文件？没有办法将 XML 文件“拖”到文本框中，我相信我认为它的工作方式非常复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:48:14.343

我认为这实际上是您想要的-

```
File xml = new File("xmlpath");

String url = xml.getAbsolutePath();
url = url.replace('\\', '/');
url = url.replace(" ", "%20");

String actual = "file:/" + url;

selenium.open(actual); 
```

然后你应该能够使用`String theXML = selenium.getText("//rootxmlnode");` 然后做你想做的事情来获取xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:51:31.160

查看数据驱动测试的主题以帮助您入门。像[这样](http://weblogs.java.net/blog/johnsmart/archive/2009/11/28/data-driven-tests-junit-4-and-excel)的东西应该让你去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:45:44.640

Selenium 工具允许您在 Java 中创建自动生成的代码。因此，您需要在提供的文本框中放置任何文本并生成此 Java 测试代码。下一步是修改生成的测试。您必须手动编写一个最简单的代码，该代码将读取您的 XML 文件，获取其内容并粘贴到文本框中。最后一件事是将上述文本块替换（在生成的测试 Java 代码中！）读取 XML 的内容。

将文件读入字符串的最简单方法是使用 Apache`commons-io`库。例如：`FileUtils.readFileToString(File file, String encoding)`给你一个包含文件内容的字符串对象。

# jquery - jPages 的问题（jQuery 插件）

> ID：13935196
> 
> 赞同：0
> 
> 时间：2012-12-18T14:35:56.883
> 
> 标签：jquery, jquery-plugins, html-table, jpage

[我对jPages](http://luis-almeida.github.com/jPages/)有一些问题。我有一张桌子，想使用 jPages 提供的分页。当我看到给定页面上示例的逐行淡入淡出效果时，我决定在我的桌子上放同样的效果。通过这样做，我遇到了这些问题：

*   当使用border-collapsed时，背景色会消失片刻，并直接停留在单元格内容的周围，之后背景色会再次出现。

我通过使用border-separate 和使用border-spacing 0px 解决了这个问题，并将行样式附加到单元格元素而不是行元素，并通过更改行样式以使其仅在顶部而不是顶部具有边框和底部。

*   这带来了我的下一个问题：在 IE9 中，行之间的边界出现在行褪色之前。（在 Firefox 中不是这样）当行褪色时，每隔一个边框就会消失（rowstyle1 的上边框）。我通过在 rowstyle2 上使用顶部和底部边框以及在没有边框的左侧 rowstyle1 上解决了边框消失的问题。但是边框仍然出现在行的内容之前。

*   最后一个问题：因为我不再使用border-collapse:collapsed 我在IE7 中的列之间有白色边框。（不在 IE8 中）。另外在 IE7、IE8 和 Opera 中没有 fadeTo 效果。

通过使用 divs 而不是 table 标签，不存在任何问题！但我知道它在语义上是不正确的。

所以我的问题是：如何解决最后的问题？为什么使用表格标签会存在这些问题？也许有人知道我的解决方案为什么有效，因为我找不到我调查的解释。

这是当前代码：

```
<script>
    $(document).ready(function() {
        $(function(){
            $("div.holder").jPages({
                containerID : "torsch",
                perPage: 40
            });
        });
    }); 
</script> 
```

CSS：

```
<style>
    .rowstyle2 {    
        height:25px;
        border-left: 0px none;
        border-right:0px none;
        border-top: 1px solid #999;
        border-bottom: 1px solid #999;
        background: url("/images/test.png") repeat-x scroll 0% 0% transparent;
        vertical-align:middle;
    }

    .rowstyle1 {
        background-color:#FFFFFF;
        height:25px;
        border-top: 0px none;
        border-bottom: 0px none;
        border-left:0px none;
        border-right:0px none;  
        vertical-align:middle;
    }

    table {
        border-spacing: 0px;    
    }
</style> 
```

HTML：

```
<div class="holder"></div>
<table>
    <thead>
        <th>col1</th>
        <th>col2</th>
        <th>col3</th>
    </thead>
    <tbody id="torsch">
        <tr>
            <td class="rowstyle2">1</td>
            <td class="rowstyle2">45</td>
            <td class="rowstyle2">4546</td>
        </tr>
        <tr>
            <td class="rowstyle1">1</td>
            <td class="rowstyle1">45</td>
            <td class="rowstyle1">4546</td>
        </tr>
        <tr>
            <td class="rowstyle2">1</td>
            <td class="rowstyle2">45</td>
            <td class="rowstyle2">4546</td>
        </tr>
        <tr>
            <td class="rowstyle1">1</td>
            <td class="rowstyle1">45</td>
            <td class="rowstyle1">4546</td>
        </tr>
        <tr>
            <td class="rowstyle2">1</td>
            <td class="rowstyle2">45</td>
            <td class="rowstyle2">4546</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-22T08:52:41.713

检查，如果有人有同样的问题请更改 JPage.js 第 58 行

```
/* only visible items! */
// this._items = this._container.children(":visible");
this._items = this._container.children(); 
```

它对我有用。

# javascript - 获取和使用文本框文本并通过 html 选择框更改其颜色

> ID：13935205
> 
> 赞同：0
> 
> 时间：2012-12-18T14:36:18.147
> 
> 标签：javascript, html

```
function Start(){
    var headerr = document.getElementById("pageh").value;
    var hcolor = document.getElementById("hcolor").value;
    var hsize = document.getElementById("hsize").value;

    document.body.innerHTML = "";
} 
```

这是获取文本框和选择框值的 JS 代码。

```
<tr>
    <td>page header</td>
    <td>
        <input type="text" id="pageh" /></td>
</tr>
<tr>
    <td>Header color:</td>
    <td>
        <select id="hcolor">
            <option>red</option>
            <option>purple</option>
            <option>gray</option>
        </select></td>
</tr>
<tr>
    <td>Header size</td>
    <td>
        <select id="hsize">
            <option>small</option>
            <option>normal</option>
            <option>big</option>
        </select></td>
</tr>
<tr>
    <td></td>
    <td><input type="button" value="Send" onclick="Start()" /><input type="reset" value="Clear" /></td>
</tr> 
```

以及文本框和选择框的 HTML 代码。那么我可以做些什么来发布文本并操纵它的颜色和大小呢？我考虑过使用 document.write(""headerr""); 但它似乎不起作用。

ETA JSFiddle：http: [//jsfiddle.net/7LNMn/](http://jsfiddle.net/7LNMn/)

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:45:23.480

```
function Start(){
    var headerr = document.getElementById("pageh").value;
    var hcolor = document.getElementById("hcolor").value;
    var hsize = document.getElementById("hsize").value;

    var g = document.getElementById("header"); // var g will store document.getElementById("header") so, i don't have to write much whereas header can be changed by the element's id e.g. header of website!
    g.style.background = hcolor; // here g will get the element and style its bg
    g.style.fontSize = hsize; // here its fontSize
    // and I dont know what to do with pageh variable!
} 
```

# gwt - GWT SplitLayoutPanel 拖拽拆分器太跳了

> ID：13935208
> 
> 赞同：0
> 
> 时间：2012-12-18T14:36:33.157
> 
> 标签：gwt

就像[需要 GWT SplitLayoutPanel 具有最大尺寸一样，拖动非常跳跃](https://stackoverflow.com/questions/12045924/need-gwt-splitlayoutpanel-to-have-max-size-dragging-is-very-jumpy)我想知道为什么在以下示例中尝试拖动拆分器时，右侧和南部的拆分器会跳跃（在 IE9 中测试；包括 Web 和托管模式）：

```
public class SplitLayoutPanelTest implements EntryPoint {
    public void onModuleLoad() {
        final SplitLayoutPanel p = new SplitLayoutPanel(5);
        p.setSize(Window.getClientWidth()+"px", Window.getClientHeight()+"px");
        final Frame fWest = new Frame("http://bsd.org");
        fWest.setSize("400px", "200px");
        p.insertWest(fWest, 400, null);
        final Frame fEast = new Frame("http://www.linux.org");
        fEast.setSize("90px", "90px");
        p.insertEast(fEast, 100, null);
        final Frame fNorth = new Frame("http://www.w3c.org");
        fNorth.setSize("80px", "80px");
        p.insertNorth(fNorth, 100, null);
        final Frame fSouth = new Frame("http://www.sqlite.org");
        fSouth.setSize("85px", "85px");
        p.insertSouth(fSouth, 100, null);
        final Frame fCenter = new Frame("http://www.gnu.org");
        fCenter.setSize("75px", "75px");
        p.insert(fCenter, Direction.CENTER, 200, null);
        RootPanel.get().add(p);
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:17:00.793

看看这个答案

[需要 GWT SplitLayoutPanel 具有最大尺寸，拖动非常跳跃](https://stackoverflow.com/questions/12045924/need-gwt-splitlayoutpanel-to-have-max-size-dragging-is-very-jumpy/13938997#13938997)

我希望这也能解决你的问题，祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:09:24.300

因此，这是一种可能的解决方案：

```
public class SplitLayoutPanelTest implements EntryPoint {
    public void onModuleLoad() {
        final SplitLayoutPanel p = new SplitLayoutPanel(5);
        p.setSize(Window.getClientWidth()+"px", Window.getClientHeight()+"px");

        final Frame fWest = new Frame("http://bsd.org");
        final VerticalPanel pWest = new VerticalPanel();
        pWest.setSize("100%", "100%");
        pWest.add(fWest);
        p.insertWest(pWest, 400, null);
        fWest.setSize("400px", "200px");

        final Frame fEast = new Frame("http://www.linux.org");
        final VerticalPanel pEast = new VerticalPanel();
        pEast.setSize("100%", "100%");
        pEast.add(fEast);
        p.insertEast(pEast, 100, null);
        fEast.setSize("90px", "90px");

        final Frame fNorth = new Frame("http://www.w3c.org");
        final VerticalPanel pNorth = new VerticalPanel();
        pNorth.setSize("100%", "100%");
        pNorth.add(fNorth);
        p.insertNorth(pNorth, 100, null);
        fNorth.setSize("80px", "80px");

        final Frame fSouth = new Frame("http://www.sqlite.org");
        final VerticalPanel pSouth = new VerticalPanel();
        pSouth.setSize("100%", "100%");
        pSouth.add(fSouth);
        p.insertSouth(pSouth, 100, null);
        fSouth.setSize("85px", "85px");

        final Frame fCenter = new Frame("http://www.gnu.org");
        final VerticalPanel pCenter = new VerticalPanel();
        pCenter.setSize("100%", "100%");
        pCenter.add(fCenter);
        p.insert(pCenter, Direction.CENTER, 200, null);
        fCenter.setSize("75px", "75px");

        RootPanel.get().add(p);
    }
} 
```

# perl - 如何在 Perl CGI 中处理元素值？

> ID：13935214
> 
> 赞同：2
> 
> 时间：2012-12-18T14:36:55.990
> 
> 标签：perl, cgi

我想将选定的单选按钮的`id`名称和一些`div`元素数据传递给服务器并在服务器端处理这些数据。

例如，下面是我的 CGI 代码。

```
use strict;
use CGI;
print

"Content-type:text/html\r\n\r\n",
"<html>",
"<body>",
"<div style='float:left'>",
"<input type='radio' name='selections' id='red'>",
"<input type='radio' name='selections' id='blue'>",
"<input type='radio' name='selections' id='green'>",
"</div>",
"<div style='float:left'>",
"<div style='float:left' id='redtime'>red time</div>",
"<div style='float:left' id='blutime'>blue time</div>",
"<div style='float:left' id='greentime'>green time</div>",
"</div>",

"<input type='button' value='clickme'/>",
"</body>",
"</html>"; 
```

在上面的 CGI 文件中，我需要传递所选单选按钮的`id`值和任何`div`元素的数据。我如何在 CGI 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:03:58.980

这`id`旨在用于客户端如果您想在服务器端获取它，则需要使用 JavaScript 生成隐藏输入或使用 XMLHttpRequest 发出请求。

利用`value`。

然后你只需：

```
my $value = $instance_of_CGI->param('name_of_radio_group'); 
```

* * *

您还需要制作提交按钮`type="submit"`（提交表单）而不是`type="button"`（除非您将 JavaScript 绑定到它，否则它什么也不做）。

* * *

您的表单控件还需要放置在将属性设置为要处理数据的脚本的 URI 的`<form>`元素内。`action`

* * *

我还建议您将所有表单标签放在*标记*中与它们相关的输入旁边，而不仅仅是 CSS，并且`<label>`为它们使用元素，而不是`<div>`元素。

* * *

> `"Content-type:text/html\r\n\r\n",`

不要手动执行此操作。您正在使用 CGI.pm。

```
print $instance_of_CGI->header(); 
```

# iphone - 使用 NSOperationQueue 跟踪下载

> ID：13935215
> 
> 赞同：0
> 
> 时间：2012-12-18T14:36:56.503
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsoperationqueue

我有一个 5 队列`NSOperations`。队列`setMaxConcurrentOperationCount`设置为 1。每个操作基本上都是对服务器的调用以下载特定文件。

如果一个文件的下载完成以`NSOperation` *仅*在文件保存到磁盘时开始另一个文件，那么跟踪的最佳方法是什么？或者有没有办法`NSOperations`知道文件的下载进度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:50:15.680

您应该覆盖子类中`isFinished`的方法以仅在它实际完成时`NSOperation`返回。`YES`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:01:28.337

您可以简单地继承`NSOperation`并将用于下载和保存数据到文件系统的代码放入子类的`-main`方法中`NSOperation`并且在您的操作完成后，下一个操作`NSOperationQueue`将自动开始执行

```
@implementation MyOperation

- (void) main {
    if ([self isCancelled]) {
        NSLog(@"** operation cancelled **");
    } else {
        NSURL *conUrl = [NSURL URLWithString: urlString];
        NSError *error;
        NSData *conData = [NSData dataWithContentsOfURL: conUrl options: NSDataReadingMappedIfSafe error: & error];
        if (!error) {
            UIImage *image = [
                [UIImage alloc] initWithData: conData];

            NSString *cacheDir = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex: 0];
            NSString *jpgFilePath = [NSString stringWithFormat: @"%@/%@.jpg", cacheDir, textLabel];
            conData = [NSData dataWithData: UIImageJPEGRepresentation(image, 1.0f)];
            [conData writeToFile: jpgFilePath atomically: YES];
        }
    }

    NSLog(@"Operation finished");
}

@end 
```

# ios - 在 UITableView 的零索引处添加 UIView 的通用实例不显示

> ID：13935216
> 
> 赞同：0
> 
> 时间：2012-12-18T14:37:03.797
> 
> 标签：ios, uitableview, uiview

我的班级结构和同学一样

*   我有一个主视图控制器，比如说 MainVC；
*   四个不同的视图控制器，比如 vc1、vc2、vc3 和 vc4；每个vc都有自己的UITableView；
*   MainVC 将这些 VC 显示为 subView；
*   UIView 的一个子类，比如 headerVC，它返回一个标题视图，需要在 VC 中的每个表上显示为横幅；此视图包含在 MainVC 上切换 Vcs 的按钮；

现在，当我运行 MainVC 时，它会加载 VC1 的视图（它有一个 tableView），然后 VC1 在其 tableView 的第一行添加 headerView；当我按下 headerView 上的任何按钮时，MainVC 会根据选择切换 VC；Eech VC 在其 tableView 的第一行添加 headerView；

一切正常，但是当我导航到另一个选项卡项并返回时，headerView 从选定的 VC 表中消失；其余行按原样显示，但标题视图消失；当我向上/向下滚动 tableView 时，headerView（在第一行）再次出现；我不明白它为什么会这样；

我试图将 headerView 放在 tableView 的标题和部分的标题中，但它根本没有出现；通过这种方法，至少标题视图正在显示并且运行良好，但是现在当我更改选项卡并返回时，只有第一行（包含标题视图）消失了；

任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:32:28.323

从 TableView 行中删除此 headerview 并将其作为静态视图添加到 VC，如果您希望它与 tableView 一起移动，您可以通过此代码执行此操作

```
float scrollStartPositionY;
-(void) scrollViewDidScroll:(UIScrollView *)scrollView     {
    if (scrollView.contentOffset.y>=scrollStartPositionY)
        header.hidden=YES;
    else
        header.hidden=FALSE;

header.frame =CGRectMake(header.frame.origin.x,TableView.frame.origin.y TableView.contentOffset.y-    header.frame.size.height,   header.frame.size.width,header.frame.size.height) ;
}

-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView{
    scrollStartPositionY=scrollView.contentOffset.y+5;
} 
```

# http - 如何在 PowerShell 中使用 HTTP GET？

> ID：13935218
> 
> 赞同：49
> 
> 时间：2012-12-18T14:37:13.390
> 
> 标签：http, powershell, http-get

> **可能重复：**
> [获取 $webclient.downloadstring 以使用 .cer 写入 Powershell](https://stackoverflow.com/questions/9365000/get-webclient-downloadstring-to-write-to-text-file-in-powershell)
> [Powershell http 帖子中的文本文件以进行身份​​验证](https://stackoverflow.com/questions/10116489/powershell-http-post-with-cer-for-auth)

我有一个 SMS 系统，它使我能够从 HTTP [GET](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)请求发送 SMS：

```
http://smsserver/SNSManager/msgSend.jsp?uid&to=smartsms:*+001XXXXXX&msg="text of the message"&encoding=windows-1255 
```

我想从 PowerShell 输入文本的详细信息，然后浏览到这个 URL。我该怎么做？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-18T15:57:46.977

在 PowerShell v3 中，查看[Invoke-WebRequest](http://technet.microsoft.com/en-us/library/hh849901.aspx)和[Invoke-RestMethod](http://technet.microsoft.com/en-us/library/hh849971.aspx)例如：

```
$msg = Read-Host -Prompt "Enter message"
$encmsg = [System.Web.HttpUtility]::UrlEncode($msg)
Invoke-WebRequest -Uri "http://smsserver/SNSManager/msgSend.jsp?uid&to=smartsms:*+001XXXXXX&msg=$encmsg&encoding=windows-1255" 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-18T15:04:15.923

不需要下载 Wget；.NET Framework 具有内置的 Web 客户端类。

```
$wc = New-Object system.Net.WebClient;
$sms = Read-Host "Enter SMS text";
$sms = [System.Web.HttpUtility]::UrlEncode($sms);
$smsResult = $wc.downloadString("http://smsserver/SNSManager/msgSend.jsp?uid&to=smartsms:*+001XXXXXX&msg=$sms&encoding=windows-1255") 
```

# java - 如何解析肥皂响应？

> ID：13935220
> 
> 赞同：0
> 
> 时间：2012-12-18T14:37:21.527
> 
> 标签：java, soap, xml-parsing

我有 web 服务的 wsdl 文件。但由于使用 .net webservice，我的响应包括模式和复杂类型。我应该如何解析它。可以用一些wsdlToJava 工具creta java 类。我问，因为在 wsdl 中没有关于模式中包含的模式的详细信息。

wsdl 的示例部分：

```
 <s:element name="PersonDetailResponse">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="PersonDetailResult">
<s:complexType>
<s:sequence>
<s:element ref="s:schema"/>
<s:any/>
</s:sequence>
</s:complexType>
</s:element>
</s:sequence>
</s:complexType>
</s:element> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:43:55.540

使用[Apache axis](http://axis.apache.org/axis2/java/core/)，它有一个[wsdl2java](http://axis.apache.org/axis2/java/core/docs/reference.html)工具：

```
wsdl2java -uri ../samples/wsdl/Axis2SampleDocLit.wsdl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:40:21.030

您可以像 xml (SAX,StAX,DOM) 一样解析您的肥皂。

此外，如果您有方案文件，您可以在方案的帮助下解析它，如果没有 - 您必须手动解析并确定所有指向 java 类的链接。

# android - Android存储音频文件和什么格式

> ID：13935222
> 
> 赞同：0
> 
> 时间：2012-12-18T14:37:29.077
> 
> 标签：android, sqlite, audio, blob, recording

我在使用`SQLite`. 我知道人们会说一旦达到极限就不要存储在数据库性能、大文件中。我有理由存储在数据库中。

我的预期目标是从设备录制音频，然后将其存储为 a`blob`以将其放入数据库中。我的下一个意图是将其检索为 a`blob`并将其转换回录制的音频文件格式。我对使用几乎任何格式都很感兴趣。也许`3gp`是为了录音，或者`mp3`我不确定录音是如何工作的，因为我正在研究用于存储的数据库类。

下面是我正在尝试做的事情的一个例子。我拥有的图像文件可以使用 轻松更改回来，`BitmapFactory.decodeByteArray()`但我不知道该用于音频文件。请记住，我可以使用任何推荐的音频格式进行更改。

主要目标是从音频到 blob 并返回

```
for (int i = 0; i < rows; i++) {
    Note note = new Note(cursor.getInt(_id),cursor.getString(_book), 
        cursor.getString(_chapter),cursor.getInt(_page), 
        BitmapFactory.decodeByteArray(cursor.getBlob(_image),
        0,
        cursor.getBlob(_image).length),
        cursor.getBlob(_audio));
    cursor.moveToNext();
} 
```

# regex - 这些正则表达式有什么意义？

> ID：13935225
> 
> 赞同：4
> 
> 时间：2012-12-18T14:37:39.017
> 
> 标签：regex

我正在尝试解决一个正则表达式难题，并且部分正则表达式始终由以下部分组成：

`([^Xa-ehY]|[^f-zW])`

或者

`([^2]|[^D-Za]|[D-Ze-f])`

这些让我很困惑。

以第一个为例：`[^Xa-ehY]|[^f-zW])`. 这不是表示“不是 Xa-ehY 或不是 f-zW”吗？这不等于“任何角色”吗？举个`e`例子。它不会匹配第一个，但它会匹配第二个。`W`不会匹配第二个，但它会匹配第一个。

与 相同`([^2]|[^D-Za]|[D-Ze-f])`。这意味着“不是 2 OR not D-Ze-f OR D-Ze-f”，对吧？这又相当于“任何字符”。

我错过了什么吗？这只是对单个`.`正则表达式的复杂替换吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:43:55.447

我认为有些角色是重叠的。例如，在第一个小写字母 h 不会匹配任何一方。

诚然，第二个看起来只是“。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:44:11.637

因为这是一个谜题，你应该仔细看看。

`[^Xa-ehY]|[^f-zW]`不一样，因为它们在( contains )`.`处相交，所以它与`h``f-z``h``[^h]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:51:14.743

您可以在正则表达式测试器中向它们扔一堆文本，以查看是否有任何字符重叠。这很粗糙，但是您的第一个示例[`(\[^Xa-ehY\]|\[^f-zW\])`](http://regexpal.com/?flags=g&regex=%28%5B%5EXa-ehY%5D%7C%5B%5Ef-zW%5D%29&input=abcdefghijklmnopqrstuvwxyz%0AABCDEFGHIJKLMNOPQRSTUVWXYZ%0A0123456789%0A)与字母“h”重叠。第二个例子看起来应该匹配任何东西。

# java - 如何在 Spring 的 JdbcTemplate 中使用 Postresql 大对象 API

> ID：13935229
> 
> 赞同：0
> 
> 时间：2012-12-18T14:37:51.793
> 
> 标签：java, spring, postgresql, jdbc

我需要使用 postgresql API 访问大对象。这样做是这样的：

```
PGConnection pgConn=(PGConnection)c
LargeObjectManager lobj =pgConn.getLargeObjectAPI();
LargeObject obj = lobj.open(imageOid, LargeObjectManager.READ);
InputStram is=obj.getInputStream(); 
```

我需要在使用 Spring 的 JdbcTemplate 时从我的 DAO 运行此代码。如何访问我正在使用的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:02:35.190

假设 DataSource 已正确配置，

```
PGConnection pgConn = (PGConnection) jdbcTemplate.getDataSource().getConnection(); 
```

# javascript - 将事件添加到完整日历并通过 servlet 回调将它们存储在 mysql 上

> ID：13935230
> 
> 赞同：1
> 
> 时间：2012-12-18T14:37:55.647
> 
> 标签：javascript, jquery, servlets, fullcalendar

我是完整日历 jquery 插件的新手，我已将日历集成到 jsp 页面中。当页面加载时，事件从 MySQl 数据库加载，该数据库调用一个 servlet，该 servlet 生成检索元素的 JSON 数组。到目前为止一切正常。

现在我想使用 javascrip 从客户端在日历上添加事件，我不知道如何对 servlet 进行回调函数以将新事件存储在 mysql DB 中。我试图阅读文档，但我仍然对此一无所知。

有什么好的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:39:29.683

您需要将函数绑定到各种 fullcalendar 事件处理程序。例如，每当单击“一天”时，您可能会出现一个 Facebox 叠加层（或类似弹出窗口之类的更简单的东西）。

例如，在您的`fullCalendar`定义中：

```
dayClick: function(date, allDay, jsEvent, view) {

       var year = date.getFullYear();
       var month = date.getMonth();
       month++;
       var day = date.getDate();
       var hour = date.getHours();
       var minute = date.getMinutes();

       $.facebox({ajax: '/addeditevent.php?year='+year+'&month='+month+'&day='+day+'&hour='+hour+'&minute='+minute});

} 
```

在这种情况下，您将 additevent.php 为用户提供一个表单以将事件添加到您的数据库。

将事件添加到数据库后，请确保调用 refetchEvents [http://arshaw.com/fullcalendar/docs/event_data/refetchEvents/](http://arshaw.com/fullcalendar/docs/event_data/refetchEvents/)为用户更新日历。

# sencha-touch - 选择字段中的第一项始终被选中，并且永远不会更新 sencha touch 中的字段

> ID：13935231
> 
> 赞同：0
> 
> 时间：2012-12-18T14:37:57.327
> 
> 标签：sencha-touch, sencha-touch-2

我的表单上的以下选择字段有问题：

```
 {
                xtype: 'selectfield',
                label: 'Title',
                displayField: 'ItemName',
                valueField: 'Id',
                listeners: {
                    initialize: function () {
                        var titleStore = Ext.create('MyApp.store.Titles', {});
                        this.setStore(titleStore);
                    }
                }
}, 
```

在使用选择字段的表单上，每当我选择该选项时，表单都会正确更新，但列表中的第一项总是有一个复选标记。此外，在列表中选择第一个项目永远不会更新表单。我对 ST 的了解是有限的，但这肯定可以开箱即用吗？

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:08:16.990

这是一个愚蠢的错误。The data coming from the server had identical 'Id' values, so when an item in the list was selected it had the same value as the rest of the items. 然后，选择字段将仅显示与“Id”值匹配的第一个项目，该值将是列表中的第一个。

# asp.net-mvc-3 - 自动检测 (AspAutoDetectCookieSupport) 无 cookie 设置的 MVC 路由问题导致错误

> ID：13935233
> 
> 赞同：0
> 
> 时间：2012-12-18T14:38:02.370
> 
> 标签：asp.net-mvc-3, model-view-controller

我们目前正在部署一个 MVC 应用程序，该应用程序还需要支持许多由于公司政策而阻止 cookie 的客户端。我们将无 cookie 会话和身份验证设置为自动检测，因为我们发现 cookieless="UseDeviceProfile" 是完全不可靠的，因为我们必须支持多个浏览器并且 Chrome（以及 IE9）使用此设置 (UseDeviceProfile) 会出错。除了一个实例外，一切都适用于“自动检测”设置：

如果用户在[http://somehost.com](http://somehost.com)中阻止 cookie 和类型，则ASP.Net 将 ?AspAutoDetectCookieSupport=1 添加到字符串的末尾，从而为您留下[http://somehost.com?AspAutoDetectCookieSupport=1](http://somehost.com?AspAutoDetectCookieSupport=1)的 URL 。当这个字符串进入我们的 MVC 应用程序时，它会出现 404 错误。但是，如果您在初始 url 的末尾附加一个“/”，如 [http://somehost.com/](http://somehost.com/)，那么一切都会按预期工作，并且 ASP.Net 会在 url 前面加上会话字符串（例如[http:// somehost.com/(sessionstring)/](http://somehost.com/(sessionstring)/) ......

这将是一种边缘情况，因为绝大多数用户将通过我们发送给他们的 URL 访问应用程序，而该 URL 不易受此“错误”的影响。此外，绝大多数用户也将启用 cookie。但是我们仍然不希望即使是少数用户也会看到这个丑陋的错误。

有什么建议么？

# c++ - std::map 初始化后更改 key_comp

> ID：13935241
> 
> 赞同：6
> 
> 时间：2012-12-18T14:38:23.093
> 
> 标签：c++, stl, stdmap

可以在创建和初始化 std::map 后更改它的比较方法吗？或者也许只有在它被创建之后？

我想以某种方式更改包含无法更改定义的映射的类的行为。我想通过传递另一张地图来改变它的比较行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:42:58.130

也许有可能，这是未经测试的：

1.  定义你自己的自定义比较器，它内部有一个指向比较函数真正实现的指针
2.  将 this 的实例传递给地图的构造函数（您也必须使用此比较器键入地图。）
3.  稍后设置真正的实现（在使用地图之前），如果你设置它之后，你不知道对内部的影响......

已经测试过，可以做到以上几点，但是如果树中有项目，更改比较功能可能是灾难性的......

无论如何-这听起来太可疑了....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:00:29.033

不，那是不可能的。比较器是地图*类型的一部分。*这个问题与询问您是否可以更改`int`存储浮点数没有什么不同。

更重要的是，比较器提供的排序是映射内部结构的一个组成部分。如果您要更改排序，则数据结构将不再处于一致状态。唯一可行的选择是根据新顺序从旧地图的元素重建新地图，但这已经是可能的：

```
std::map<T, V, Comp1> m1 = /* ... */;
std::map<T, V, Comp2> m2(m1.begin(), m1.end()); 
```

或者，您可以制作第二个类型的地图`std::map<std::reference_wrapper<T const>, std::reference_wrapper<V>, Comp2>`并使用对原始地图的引用填充它，但根据`Comp2`. 在这种情况下，您有责任保持两个地图同步。像 Boost.Multiindex 这样的高级容器可以安全地为您执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:43:51.847

这不可能。但是您可以创建一个新映射，使用替代比较条件和两个迭代器构造函数来使用第一个中的元素实例化映射。

```
bool  C1(const K&, const K&);
bool  C2(const K&, const K&);

std::map<K, V, C1> orig;
....
std::map<K, V, C2> alternative(orig.begin(), orig.end()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T14:51:54.973

不，这是不可能的，因为它是通过模板参数**编译**到地图中的。

请参阅：[http ://www.cplusplus.com/reference/map/map/](http://www.cplusplus.com/reference/map/map/) **比较**是您正在寻找的。

你想做什么？

由于您将类作为 Key 使用，因此您可以实现 < 运算符或 compare 函数来对上下文做出反应。由于您可以将完全构造的对象作为比较函数传递给[构造](http://www.cplusplus.com/reference/map/map/map/)函数，因此应该可以传递所有内容以实现依赖于上下文的同情。问题是，你为什么要这样做？

在运行时更改 std::map 的比较是一个**坏主意**，因为它会导致未定义的行为。仅仅基于 std::map 的内容是“排序的”（可能是 RB-tree）这一事实。如果你改变排序函数，你会突然改变逻辑顺序；但地图不会神奇地重新排序。下一次调用 insert 或 find 可能不会达到您的预期。

# sql-server - Convert() 函数中的样式参数不添加逗号

> ID：13935247
> 
> 赞同：1
> 
> 时间：2012-12-18T14:38:37.983
> 
> 标签：sql-server

我正在尝试通过 convert() 函数将数字字段转换为货币数据类型，但它不添加逗号。

使用这个：

```
convert(money, smlunitprice, 1) as smltotalprice 
```

给我以下输出：

```
smltotalprice
---------------------
20980.00
8773.03
7122.81
7122.81 
```

我已使用此（http://msdn.microsoft.com/en-us/library/ms187928(v=sql.90).aspx）作为参考，但这仅在从金钱转换为金钱时才有可能吗？从数字转换为货币时，还有另一种添加逗号的方法吗？

我正在使用 SSMS 访问 SQL Server 2000 DBMS。

# css - Chrome浮动正确调整大小错误？

> ID：13935255
> 
> 赞同：4
> 
> 时间：2012-12-18T14:38:58.277
> 
> 标签：css, google-chrome, responsive-design

我在 div 中有一个输入和一个按钮。当视口很宽时，按钮向右浮动，在小屏幕上，按钮填充视口的宽度。但是，在 Chrome 中，当我将浏览器的大小调整为小于断点然后再返回时，按钮会保持在自己的行上。它可以在 IE 和 FF 上正常工作。如果我`float: left`在输入上进行设置，它也可以在 Chrome 中使用。

这是一个演示问题的小提琴：http: [//jsfiddle.net/kSRvP/](http://jsfiddle.net/kSRvP/)

来回调整输出窗格的大小以查看错误。

为什么 Chrome 会这样？我猜这是因为Chrome以某种方式优化了重绘周期并跳过了按钮内联的步骤（在删除`display: block`和设置之间`float: right`），但我不确定并且想知道它是否是一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:54:22.137

如果你交换输入和按钮的位置，你会发现“bug”已经消失了。但我不知道原因。

```
<div class=wrap>
    <div class=row>
        <input><button>Button</button>
    </div>
</div> 
```

[http://jsfiddle.net/kSRvP/21/](http://jsfiddle.net/kSRvP/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:52:03.963

增加按钮的特异性可以解决这个问题。例如，将 CSS 中的按钮样式更改为：

```
.row button {
    float: right;
} 
```

我认为 Chrome 可能会处理类似的特殊性并使用最后一个作为您的媒体查询。

# c - 指向结构的指针

> ID：13935256
> 
> 赞同：-1
> 
> 时间：2012-12-18T14:39:01.927
> 
> 标签：c, pointers

输出必须是

```
 Student Number: 93745;
 Grade Point Ave:2.9;
 Sex (M or F):'M'; 
```

但我无法获得所需的输出，请指出代码中的错误并帮助解决它，谢谢！

```
#include <stdio.h> 
struct student {
 int num;    
 double gpa;
 char sex;   
};

void printstudent(struct student *p); /* prototype */

int main() {
/* allocate storage and initialize it */
struct student joe,*kim;
kim=&joe;

kim->num = 93745;
kim->gpa = 2.9;   
kim->sex = 'M';   

printstudent(joe);

}

void printstudent(struct student *p) {
printf("Student Number: %i\n", p->num);
printf("  Grade Point Ave: %0.2f\n",p->gpa);
printf("  Sex (M or F): %c\n\n", p->sex);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:40:51.880

```
printstudent(joe); 
```

试图将`joe`（类型的值`struct student`）解释为指针。您需要通过`kim`或`&joe`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:49:16.503

假设您的程序被一个自动系统拒绝，该系统会严格检查程序的输出是否符合预期输出，您会遇到以下问题：

1.  用于性输出的单引号`M`必须由您自己添加。它们**不会**由`%c`printf 说明符生成。
2.  您打印的第二行和第三行中的空格比我在所需输出中看到的要多（尤其是在行首和冒号之后）
3.  您没有在行尾打印预期的分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:41:09.320

```
printstudent(joe); 
```

应该

```
printstudent(kim); 
```

或者

```
printstudent(&joe); 
```

因为该函数需要一个**指向**结构的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:47:22.813

我想指出，这里没有理由使用指针：

```
int main() {
  /* allocate storage and initialize it */
  struct student joe;

  joe.num = 93745;
  joe.gpa = 2.9;   
  joe.sex = 'M';   

  printstudent(joe);
  return 0;
}

void printstudent(struct student p) {
  printf("Student Number: %i\n", p.num);
  printf("  Grade Point Ave: %0.2f\n",p.gpa);
  printf("  Sex (M or F): %c\n\n", p.sex);
} 
```

会工作得很好。

# html - setTimeout 或 setInterval 或 requestAnimationFrame

> ID：13935262
> 
> 赞同：20
> 
> 时间：2012-12-18T14:39:14.370
> 
> 标签：html, canvas, settimeout, setinterval, requestanimationframe

对于 HTML5 游戏，带有适用于移动设备的画布动画。

我面临一些性能问题，这些问题使每个设备与其他设备之间的速度不同。

**requestAnimationFrame**根据设备速度加快游戏动画的速度。
**setInterval**让我震惊的是，从一个设备到另一个设备存在延迟。
**setTimeout**也会减慢画布上的绘图速度。

谁有过移动 HTML5 游戏的经验，可以指导我抛出其中三个（或其他技术，如果可用）的最佳方法，以便在画布上开发动画在不同的移动设备上保持稳定？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-18T14:49:54.513

尽可能使用`requestAnimationFrame`，因为这就是它的目的。如果没有，最好[使用 shim 作为支撑](https://gist.github.com/paulirish/1579671)，因此您无需处理具体细节。

为了使动画或游戏逻辑在使用实际方法的情况下以相同的速度执行，您应该使用基于时间的动画和基于时间的物理计算等。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-29T01:09:50.407

```
window.requestAnimFrame = function(){
    return (
        window.requestAnimationFrame       || 
        window.webkitRequestAnimationFrame || 
        window.mozRequestAnimationFrame    || 
        window.oRequestAnimationFrame      || 
        window.msRequestAnimationFrame     || 
        function(/* function */ draw1){
            window.setTimeout(draw1, 1000 / 60);
        }
    );
}();
   window.requestAnimFrame(draw);
})(); 
```

在所有情况下使用此功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-12T08:56:48.777

优化 requestAnimationFrame() 因为它的引入对 CPU 非常友好，如果当前窗口或选项卡不可见，则会导致动画停止。

[https://flaviocopes.com/requestanimationframe/](https://flaviocopes.com/requestanimationframe/)

```
 var count = 0;
    const IDS = requestAnimationFrame(repeatOften);

        function repeatOften() {
            count++;
            if(count > 4 ){
                // cancelAnimationFrame (IDS);
                 console.warn('finish');
                 return;
            }
            console.log('init' + count);
            // Do whatever
            requestAnimationFrame(repeatOften);
        } 
```

# orchardcms - Orchard 1.6 自定义主题始终显示日期

> ID：13935263
> 
> 赞同：0
> 
> 时间：2012-12-18T14:39:19.493
> 
> 标签：orchardcms

我是 Orchard CMS 的新手。我目前正在尝试让我的网站运行它。为了使我的 Orchard 网站与我公司的品牌相匹配，我创建了一个自定义主题。这个主题快结束了。但是，我注意到我网站中的每个页面都显示了一个日期，然后是我输入到 CMS 中的内容。我相信日期是内容的发布日期。

为了确定可能是什么原因，我做了以下工作：

```
<div style="padding: 5px 5px 5px 5px">
  test<br />
  @Display(Model.Content)
</div> 
```

使用这种方法，“测试”总是出现在日期之前，然后是日期，然后是我输入的内容。就好像日期是`Model.Content`. 我不想显示发布日期。如何从 Model.Content 中删除日期？或者，至少不表现出来？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:55:25.000

如果没有看到更多代码，很难推测，但我认为最好的选择是将日期显示为元数据的一部分。

如果是这种情况，您可以`Placement.info`通过在其中添加来将其关闭`<Place Parts_Common_Metadata="-" />`。

# android - android屏幕方向：仅锁定部分布局

> ID：13935267
> 
> 赞同：7
> 
> 时间：2012-12-18T14:39:24.013
> 
> 标签：android, android-layout

我正在构建一个使用相机预览的相机应用程序。为了使用全屏预览，我锁定了活动

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

现在我有以下问题：每当我呈现一个表单或我必须显示一个对话框时，它总是以横向模式显示，即使用户在纵向模式下使用他/她的设备也是如此。我尝试使用变换动画来旋转edittext视图，并且它们已正确旋转，但我仍然无法再聚焦它们，并且键盘也总是以横向显示:(

你知道有什么办法可以在这里找到路吗？

**重要提示：检测方向不是这里的问题。问题是：如何以它们仍然可用的方式旋转表单/视图/视图组和键盘。**

我知道它必须以某种方式成为可能：三星的相机应用程序（随 Galaxy S3 一起提供）能够在不旋转预览的情况下旋转视图，所以它必须是可能的！看：

[http://www.letsgomobile.org/images/reviews/0186/galaxy-s3-camera.jpg](http://www.letsgomobile.org/images/reviews/0186/galaxy-s3-camera.jpg)

[http://cdn2.mos.techradar.futurecdn.net//art/mobile_phones/Samsung/GalaxyS3/Galaxy%20Fire/Samsung_Galaxy_S3_25-580-100.JPG](http://cdn2.mos.techradar.futurecdn.net//art/mobile_phones/Samsung/GalaxyS3/Galaxy%20Fire/Samsung_Galaxy_S3_25-580-100.JPG)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T14:00:02.617

通过设置此属性

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

您仅将屏幕锁定为横向，此后即使用户以纵向模式持有设备，它也不会旋转到纵向模式。根据我对您问题的理解，您可以做一件事。

```
android:configChanges="orientation" 
```

在清单文件中，将上述属性添加到您的活动中。并且在 Activity 类中重写 onConfigurationChange 方法，您可以根据需要在其中处理方向更改，而不是将 Activity 锁定到 Landscape。

如果我以正确的方式理解您的问题，那么它可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T09:52:04.027

三星相机应用程序正在使用带有方向传感器的方向更改侦听器。如果用户从设置中阻止设备旋转，旋转仍然会发生。

您将需要创建完整的自定义小部件，因此您不能在 Dialog 中使用构建，您必须显示一个 CustomDialog ...。

基本思想是使用 OrientationEventListener 和 SensorManager。在设备旋转上，您必须更新您的 UI 并使用新方向旋转视图。这是关于使用 OrientationEventListener 的教程[如何使用 OrientationEventListener](http://android-er.blogspot.com/2010/08/orientationeventlistener-detect.html) 在大多数相机应用程序上，活动仍然在 LANDSCAPE 上被阻止。所有相机应用程序都使用此技巧来简化 SurfaceView 大小随旋转变化的处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:47:45.793

你必须通过旋转你的设备来覆盖活动的行为，你必须在你的mafinest中添加orientationChange，然后为这个事件添加监听器并手动旋转你的视图。

如果您使用此方法，所有对话框等（系统视图）都将以正确的方式出现。

检查这个：http: [//developer.android.com/reference/android/app/Activity.html#ConfigurationChanges](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)

还有这个： [当进度对话框和后台线程处于活动状态时如何处理屏幕方向变化？](https://stackoverflow.com/questions/1111980/how-to-handle-screen-orientation-change-when-progress-dialog-and-background-thre) （我认为第二个答案）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T20:48:34.297

您最好尝试将另一个活动用作对话框并在清单中设置其属性（方向和主题）并使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T07:24:08.330

在您的清单文件中，为您的相机预览活动提供以下属性以 `android:configChanges="keyboardHidden|orientation"`获取更多[信息](http://developer.android.com/guide/topics/manifest/activity-element.html)

```
<activity
        android:name=".Your_Activity_Name"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/app_name" >
        <intent-filter>
            <!-- Your filter attributes if any. -->
        </intent-filter>
    </activity> 
```

并在您的活动类中覆盖`onConfigurationChanged`并在关注屏幕方向模式（例如，横向或纵向）中执行必要的（根据您的需要），如下所示_

```
@Override
 public void onConfigurationChanged(Configuration newConfig) {
     super.onConfigurationChanged(newConfig);

     // Checks the orientation of the screen
     if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
         Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
         setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        //Your code to do the other things in landscape mode...

     } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
         Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
         setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
       //Your code to do the other things in portrait mode...

     }
 } 
```

我希望这能帮助你摆脱你的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T08:13:40.363

afaik：通过捕获方向事件并根据该方向使用新布局使屏幕膨胀来实现旋转。

1.  在景观中膨胀
2.  发生旋转
3.  为您要更改的屏幕部分充气，例如，我们使用纵向按钮的新布局而不是横向按钮来为按钮的持有者视图充气。

您必须将布局切割成在运行时添加在一起的部分。

实现此目的的另一种方法是，例如，使用表面视图进行相机预览，并使用另一种布局来保持表面并在其顶部添加[framelayout](http://developer.android.com/reference/android/widget/FrameLayout.html)

# spring - Idea 12，我如何指示某些spring文件仅用于测试

> ID：13935268
> 
> 赞同：7
> 
> 时间：2012-12-18T14:39:28.753
> 
> 标签：spring, intellij-idea

我有多个弹簧配置文件。很少有用于测试的。

在整个代码库中，Idea12 都将所有 Autowired bean 突出显示为“有不止一个 XXX 类型的 bean”。

如何配置 IDEA 以便正确识别要在测试和生产中使用的实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:59:50.413

应该会在下次更新中修复。但与此同时，只需`Project Structure` `->` `Facets` `->` `Spring`删除一些应用程序上下文配置，其中包括已定义的配置。

例如，我的项目中有 2 个模块：Core（jar）和依赖于 Core 的 Webapp（war）。当两者都包含在 IDEA 中的 Spring 方面时，IDE 会两次看到核心应用程序上下文中定义的 bean：第一次直接来自核心应用程序上下文，第二次来自包含核心上下文的 Webapp 上下文。由于 Core 模块 bean 已经在 Web 模块中可见，因此可以删除 Core 的 Spring facet 并且问题将得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T09:10:51.183

当我尝试使用两个或更多注释来注释一个类时，也会出现此问题，如下所示：

```
@Service
@Repository
public class Foo {...}

@Component
public class AnotherFoo {
    @Inject
    Foo foo; // Here is error in IDEA, in spite of Spring takes it normally.
} 
```

所以从不必要的注释中清除（`@Service`在这个例子中）可以帮助避免恼人的警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T05:52:37.750

我不认为这个问题在 12.1.4 中得到解决。不完美的解决方法是右键单击测试文件夹中的 spring 配置文件并将其标记为纯文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T08:29:31.120

I deactivated the warning through **Settings -> Inspections -> Spring Model -> Autowiring for Bean Class**. Hope this issue will be fixed soon. Im using version 12.1.4 of IntelliJ

# ios - IOS5 中使用 icloud 的核心数据

> ID：13935270
> 
> 赞同：0
> 
> 时间：2012-12-18T14:39:36.467
> 
> 标签：ios, ios5, core-data, icloud

是否可以使用 iCloud 功能为 IOS 5 部署使用核心数据构建应用程序？如果有请给我一些解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:47:18.607

[这](https://stackoverflow.com/questions/9953345/syncing-sqlite-database-with-icloud)是将核心数据与 iCloud 同步的解决方案。您可以使用本[教程](http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1)了解`iCloud`同步的工作原理。但是你需要一点点才能让它工作

# foxpro - FoxPro 9.0 弹出窗口

> ID：13935273
> 
> 赞同：0
> 
> 时间：2012-12-18T14:39:41.677
> 
> 标签：foxpro

由于某种原因，我的 FoxPro 程序决定在程序运行时返回弹出窗口。它显示了程序中使用的表。这似乎在代码中没有一致性，这是一个通用功能吗？我真的希望它停止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:45:51.580

我认为“弹出窗口”实际上是在提示您选择尚未打开的表的名称，并询问您“嘿……您要使用哪个表”。

我只能从跟随您的其他疯狂线程试图继续将列添加到预先存在的表结果集中来推测这一点。在您的过程中，您可能会将其与表名/临时表名混淆。

根据反馈修改

然后我怀疑你是因为没有将 INTO 子句放入临时表或游标的查询而得到的。如果您只是运行查询而不使用它，它只会立即显示结果。

前任：

```
select * from SomeTable where SomeCondition 
```

将导致显示“表格”结果。

然而，

```
select * from SomeTable where SomeCondition INTO TABLE SomeTempTable
or
select * from SomeTable where SomeCondition INTO CURSOR SomeTempAliasName 
```

将查询并将结果放入相应的结果临时表或游标中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-18T23:04:53.377

> 我真的希望它停止。

需要考虑的一件事是，该程序仅在找不到对其运行至关重要的东西时才会弹出一个像您描述的窗口。

而不是简单地希望弹出窗口消失，您应该首先寻找它们出现的原因。

然后，一旦这些原因得到解决，弹出窗口将不再出现。

祝你好运

# c - 通过旋转 ANSI C 平衡二叉树

> ID：13935274
> 
> 赞同：1
> 
> 时间：2012-12-18T14:39:42.607
> 
> 标签：c, binary-tree

我有一个包含来自简单列表的数据的二叉树，现在我需要平衡它，但它一直给我错误“分段错误（核心转储）”

我的余额代码是：

```
NodoAB * balance(NodoAB *A){
  int D=0,E=0;
  if(A==NULL)
    return(NULL);

  if(fabs(countNodesAB(A->fe)-countNodesAB(A->fd))<=1)
    return (A);

  if(countNodesAB(A->fe)-countNodesAB(A->fd)<=-2){
    D=countNodesAB(A->fd->fd);
    printf("D:%d\n",D);
    E=countNodesAB(A->fd->fe);
    printf("E:%d\n",E);
    if(E-D==1)
      return(rotationLeft(A));
    else{
      A=rotationRight(A);
      A->fd=rotationLeft(A->fd);
      return(A);
    }
  }
} 
```

其中一个轮换代码是：

```
 NodoAB * rotationLeft(NodoAB *A){
    NodoAB *aux,*aux2;
    if(A==NULL)
      return(NULL);

    if(A->fd==NULL)
      return(A);

    aux=A;
    A=A->fd;
    aux2=A->fe;
    A->fe=aux;
    aux->fd=aux2;
    return(A);
  } 
```

计算节点：

```
int countNodesAB(NodoAB *A){
  if(A==NULL)
    return 0;

  return(1+countNodesAB(A->fe)+countNodesAB(A->fd));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:07:58.257

以下似乎是可疑的：

```
if(countNodesAB(A->fe)-countNodesAB(A->fd)<=2){
    D=countNodes(A->fd->fd); 
```

如果`A->fe`有 2 个节点并且`A->fd`有 0 个节点，那么它会（我认为）暗示它`A->fd`是 NULL，然后导致显示的 countNodes 调用发生访问冲突（`A->fd->fd`无效）。

# c# - 使用 AutoSize=false 防止标签中的自动换行

> ID：13935275
> 
> 赞同：5
> 
> 时间：2012-12-18T14:39:47.097
> 
> 标签：c#, winforms

如何在设计器模式下的标签控件中防止自动换行，而它的自动大小设置为 false？

基本上我想在设计器模式下自由移动和调整标签的大小，但它的文本应该总是在一行中（如果需要，可以剪切）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T15:01:17.307

您想**仅**在设计器模式下还是在运行时阻止它？

正如你提到的“如果需要就剪掉！”

我建议你看看： [Label.AutoEllipse](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.autoellipsis.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:59:19.253

我能想到的唯一方法是创建一个继承 Label 并覆盖 OnPaint 方法的自定义控件。

```
public class CustomLabel : Label
{
    public CustomLabel()
    {            
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.DrawString(Text, Font, new SolidBrush(ForeColor), 0, 0);
    }
} 
```

不利的一面是，如果您想考虑 TextAlign、Padding 和 Margin，您需要在 paint 方法中自己计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-26T20:51:14.833

我还没有找到解决这个问题的好方法，所以分享我所做的。使用“String.Right”函数。您还可以根据标签宽度控制字符串的长度。下面是一个使用 VB 的示例。这不是解决您的问题的干净解决方案，而是一个简单的解决方案。

```
myLabel.Text = Strings.Right(myString, 50) 
```

或者

```
myLabel.Text = Strings.Right(myString, CInt(mylabel.Width*0.25)) 
```

# objective-c - 将数据从两个 UItextfields 传递到新的视图控制器

> ID：13935280
> 
> 赞同：0
> 
> 时间：2012-12-18T14:40:00.500
> 
> 标签：objective-c, cocoa, uitextfield, viewcontroller

我有点坚持尝试将数据从一个视图控制器上的两个 UITextfields 传递到另一个视图控制器。基本上我得到了以下项目：

**视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {

    IBOutlet UITextfield *Textfield1;
    IBOutlet UITextfield *Textfield2;
}

-(IBAction)GoNextView:(id)sender;

@end 
```

**视图控制器.m**

```
@interface ViewController ()

@end

@implementation ViewController

(IBAction)GoNextView:(id)sender {

    SecondView *second = [[SecondView alloc] initWithNibName:nil bundle:nil];

    [self presentViewController:second animated:YES completion:NULL];  
}

- (void)viewDidLoad {
     [super viewDidLoad];
} 
```

**第二视图.h**

```
#import <UIKit/UIKit.h>

@interface SecondView : UIViewController {

    IBOutlet UILabel *ShowTextfield1;
    IBOutlet UILabel *ShowTextfield2;
}

-(IBAction)GoBack:(id)sender;

@end 
```

**第二视图.m**

```
@interface SecondView ()

@end

@implementation SecondView

- (IBAction)GoBack:(id)sender {

    [self dismissViewControllerAnimated:YES completion:NULL];
} 
```

我想要的是，当`GoNextView`按下按钮时，它应该将数据传递`UITextfield`给`SecondView`. 然后转到下一页。数据现在应该显示在`SecondView`. 我已经为此苦苦挣扎了好几个小时，这让我很生气。我知道我必须使用一些`NSString`and `@property(nonatomic, retain) NSString *asdas`。但我根本无法让它工作。那么基于上面的代码我如何将数据从两个传递`UITextfield`到下一个视图的两个标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:39:35.407

不要通过函数导航到第二个视图，而是使用 Storyboard Segues。创建一个故事板应用程序。要创建 segue，您需要一个导航视图控制器。您可以通过以下步骤来做到这一点。

1.  选择第一个视图控制器并转到编辑器 -> 嵌入 -> 导航控制器。
2.  然后Ctrl+单击“GoNextView”按钮，拖放到SecondView中。
3.  您将获得三个选项：推送、模型、自定义。点击 push 然后在这两个视图之间创建一个 segue。
4.  单击该segue，然后单击右侧属性窗口中的“显示属性检查器”。现在将其命名为“连接器”或您喜欢的任何名称。

现在，在 SecondView.h 创建两个字符串，

```
@property (nonatomic, retain) NSString *str1;
@property (nonatomic, retain) NSString *str2; 
```

并在 SecondView.m 中合成它们。

让我们将您的 UITextFields 命名为 ViewController 中的“text1”和“text2”。转到 ViewController.h 并添加`#import "SecondView.h"`

在 ViewController.m 中执行以下操作，

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"connector"])
    {
        ViewController *VC = [segue destinationViewController];

        VC.str1 = text1.text;
        VC.str2 = text2.text;
    }
} 
```

现在您可以在您的 SecondView 中显示这些字符串。在 Secondview.m 中，

标签.文本 = str1;

它会被显示出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-23T12:12:10.763

使用 NSUserDefaults 或普通的合成通用接口变量。例如，

1.  **NSUserDefaults** 来自发送者的视图控制器，

    NSString *text=textField1.text; NSUserDefaults *prefs=[NSUserDefaults standardUserDefaults]; [prefs setObject:text forKey:@"text1value"];

你可以从任何视图控制器获取值，

```
NSUserDefaults *prefs=[NSUserDefaults standardUserDefaults];
NSString *received string= [prefs stringForKey:@"text1value"]; 
```

2.  普通的分配者，

我相信您必须使用 performegue 来导航视图控制器。有一个名为“prepareforsegue”的委托方法，您可以将文本字段值分配给接口变量。例如，

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"seguename"]) {
        destViewController *destViewController = segue.destinationViewController;
        destViewController.name = @"some text";
    }
} 
```

在接收者的视图控制器中，getter 变量实际上定义为，

在 .h 文件中，`@property(nonatomic, strong) NSString *name;`

在 .m 文件中，不要忘记在实现后合成变量

```
@implementation destViewController
@synthesize name; 
```

希望能帮助到你！

# javascript - 如何从数组创建哈希

> ID：13935281
> 
> 赞同：2
> 
> 时间：2012-12-18T14:40:03.033
> 
> 标签：javascript

`[1,2,3]`最简单的（单行？）方法是`{1:0, 2:0, 3:0}`什么？

**更新：**我宁愿做更多的“功能风格”（一行，`each`或`map`等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:48:48.417

数组[`reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)方法允许将第二个参数传递`initialValue`给方法。您可以将对象作为 initialValue 发送并通过迭代继续返回它，将带有键集的属性分配给数组的当前项。注意类型强制，属性键在 JavaScript 中必须是字符串。因此`toString`，在这种情况下，将对数组的项目调用方法。

```
var hash = array.reduce(function(obj,cur){
   obj[cur]=0;
   return obj;
},{}); 
```

[演示](http://jsfiddle.net/NfaR3/)

以一个班轮的形式：

`var hash = array.reduce(function (obj, cur) { obj[cur] = 0; return obj; }, {});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:45:50.630

```
var arr = [1,2,3];

var result = {};
for (var i=0, l=arr.length; i<l;i++) {
    result[arr[i]] = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:48:09.233

如果您只想将数组转换为键/值对象，并将所有值设置为 0（如您的示例中所示），那么您可以使用：

```
var hash = {};
[1,2,3].forEach(function(item) {
  hash[item] = 0;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:48:59.703

就我个人而言，我看不出编写所需内容有什么问题：

```
function objectWithKeysAndValue(keys, value)
{
    var o = {};

    for (var i = 0, n = keys.length; i != n; ++i) {
        o[keys[i]] = value;
    }

    return o;
}

console.log(objectWithKeysAndValue([1,2,3], 0); 
```

出于好奇，我根据工程师的回答运行了这个函数，它的速度是原来的两倍！

[**结果**](http://jsperf.com/array-fill-keys)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T14:56:21.793

即使这违反了大多数*最佳实践*，但这似乎很整洁，最重要的是，*单线*

```
var foo = [1,2,3];

foo = eval('({' + foo.join(':0, ') + ':0 })' );

console.log( foo ); // Object {1=0, 2=0, 3=0} 
```

# java - 存储实际的类逻辑/蓝图并再次加载

> ID：13935282
> 
> 赞同：2
> 
> 时间：2012-12-18T14:40:05.140
> 
> 标签：java, serializable, objectoutputstream, objectinputstream

如果我有这样的课程：

```
class Foo implements HasBarMethod {
  public double bar(double x) {
    return x*x;
  }
} 
```

我现在有

```
Foo foo = new Foo();
someObjectOutputStreamToSomeFile.writeObject(foo); 
```

执行。后来我决定更改 Foo 的定义，如下所示：

```
class Foo implements HasBarMethod {
  public double bar(double x) {
    return x+x;
  }
} 
```

是否可以这样做：

```
HasBarMethod foo = (HasBarMethod)someObjectInputStreamFromSameFile.readObject(); 
```

HasBarMethod 没有改变。现在我想从 foo.bar(x) 中得到 x 的平方，而不是总和。这可能吗？

当然，我应该使用不同的名称创建不同的类 Foo1、Foo2、...，作为一种好习惯。如果我正在制作一个包含不同类型博客的网站，我会这样做。但是考虑到我正在做实验性的东西（很多数字和很多解释它们的方法），如果不同的 Foo 类只会有小的适应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:48:30.647

Java 序列化保存字段。方法的说明保存在类文件中。

也许考虑保存不同的类文件和不同的类加载器，或者使用字节码库根据输入文件进行小的更改，尽管这两者可能比仅仅为不同的行为使用不同命名的类要复杂得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:56:03.960

If I got the question right, you want to implement a class whose behavior changes dynamically, depending on the situation. You can implement one of the common patterns (sorry, don't remember its name):

```
//create function objects
class Sum implements HasBarMethod{
    public double bar(double x) {
        return x+x;
    }
}

class Multiply implements HasBarMethod{
    public double bar(double x) {
        return x*x;
    }
}

//create the base class
class DynamicBehavior{
    private HasBarMethod strategy;
    //other class fields

    public DynamicBehavior(HasBarMethod strategy){
        this.strategy = strategy;
        // ...
    }

    public double bar(double x) {
        return strategy.bar(x);
    }

    //you may want to handle strategy change in a different way.
    //this here is just a simple example.
    public setStrategy(HasBarMethod strategy){
        this.strategy = strategy;
    }

    //any code implementing strategy changes or whatever
} 
```

This will allow you to change the strategies your class uses depending on its state or any other conditions you may wish to take into consideration.

An example of its usage:

```
public static void main(String args[]){
    HasBarMethod defaultStrategy = new Sum();
    DynamicBehavior dyn = new DynamicBehavior(defaultStrategy);

    if( /*condition*/ ){
        dyn.setStrategy(new Multiply());
    }

    double result = dyn.bar(5);
} 
```

You might as well want to turn your strategy function objects into static fields of the base class as this will save you some memory and time by avoiding creation of their new instances each time you decide to switch strategies.

# python - 使用多处理模块的简单玩具示例使计算机崩溃

> ID：13935283
> 
> 赞同：5
> 
> 时间：2012-12-18T14:40:05.420
> 
> 标签：python

尝试以下非常简单的示例会导致我的计算机停止运行，因此我必须重新启动。检查任务管理器会显示数百个“python.exe”任务：

```
import math
from multiprocessing import Pool

pool = Pool(processes=2)
print pool.map(math.sqrt, [1,4,9,16]) 
```

我使用的是双核 cpu (i5 2467m) 所以我认为上面的就可以了。

我尝试了设置`processes=1`，这导致了一个稍微不同的问题：任务永远不会完成，但它不会导致我的计算机死机。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T14:41:18.533

我第一次玩时遇到了同样的问题`multiprocessing`。将池生成代码包装在一个`if __name__ == '__main__'`块中。

```
import math
from multiprocessing import Pool

if __name__ == '__main__':
    pool = Pool(processes=2)
    print pool.map(math.sqrt, [1,4,9,16]) 
```

发生的情况是，当创建子进程时，您的模块正在被解压并以无限递归的方式重新运行池生成代码。使用该`if`块，生成代码将仅在模块的父实例中运行。

# sql - 无法在 SQL 中正确获取此表和约束

> ID：13935284
> 
> 赞同：3
> 
> 时间：2012-12-18T14:40:06.180
> 
> 标签：sql, constraints

我正在做这个练习，但我做错了 - 有人可以帮我吗？

> *编写第二个脚本，该脚本将使用以下信息在数据库中`2_CreateTables.sql`创建`Department`和`Employees`表：`FinalExam`*

`Department`表信息：

```
Column Name     Data Type                         Allow Nulls?
--------------------------------------------------------------
DepartmentID    Integer                           No
DepartmentName  Variable length character data    No
GroupName       Variable length character data    Yes
ModifiedDate    Small date and time               No 
```

自动编号：

使`DepartmentID`自动编号从 100 开始并以 5 递增。

**约束**：

1.  该`DepartmentID`列将被定义为一个名为 的聚集主键`PK_Department_DepartmentID`。

2.  该`ModifiedDate`列将有一个`DF_DeptModified`以系统日期和时间作为默认值调用的默认约束。

这就是我到目前为止所拥有的。

```
CREATE TABLE Deparment
    DeparmentID  int not null,
    DeparmentName varchar(100) not null,
    GroupName varchar(50) null,
    ModifiedDate datetime  not null, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:45:41.433

假设您使用的是**SQL Server** - 试试这个：

```
CREATE TABLE dbo.Department
    (DepartmentID INT IDENTITY(100, 5) NOT NULL,
     DepartmentName VARCHAR(100) NOT NULL,
     GroupName VARCHAR(50) NULL,
     ModifiedDate SMALLDATETIME NOT NULL
        CONSTRAINT DF_DeptModified DEFAULT(GETDATE()),

     CONSTRAINT PK_Department_DepartmentID
       PRIMARY KEY CLUSTERED (DepartmentID)
    )
GO 
```

所做的更改：

*   确保语句`( )`后有开始和结束括号`CREATE TABLE (name)`
*   将`IDENTITY(100, 5)`子句添加到`DepartmentID`以使其根据要求自动编号
*   将数据类型更改`ModifiedDate`为`SMALLDATETIME`文本要求中定义的（你有`DATETIME`）
*   固定`Deparment`所有`Department`
*   添加了默认约束`ModifiedDate`
*   为聚簇主键添加了表约束

# jquery - 在 jQuery 中使用 2 个下拉项

> ID：13935285
> 
> 赞同：2
> 
> 时间：2012-12-18T14:40:16.833
> 
> 标签：jquery, drop-down-menu

我的 Web 应用程序中有 2 个相同的下拉列表，其中包含相同的值。实际上，这些下拉列表用于帐号。
我想避免从这些列表中选择两个相同的项目。
例如，如果用户从第一个下拉列表中选择项目 #1，则项目 #1 必须对第二个隐藏（如果该项目不是第一个 - 索引 #0）。此外，如果用户将他选择的项目更改为#2，则第二个下拉列表中的#1 必须可见。

我写了一些东西，但效果不好：

```
$('#d1').change(function(e) {
    index = $(this).prop('selectedIndex');
    if (index != 0) $('#d2 option:eq(' + index + ')').css('display','none');
}); 
```

看[这里](http://jsfiddle.net/QTDXt/)。

我想我只需要一种在隐藏所选项目之前使所有项目可见的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:43:44.600

采用`.siblings()`

```
$('#d1').change(function(e) {
    index = $(this).prop('selectedIndex');
  $('#d2 option:eq(' + index + ')').css('display','none').siblings().css('display','block');
});

​ 
```

这是一个演示[http://jsfiddle.net/QTDXt/10/](http://jsfiddle.net/QTDXt/10/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:43:47.643

您可能无法隐藏特定选项。（我不能在 Chrome 中做到这一点。）尝试禁用该选项：

```
$('#d1').change(function(e) {
    index = this.selectedIndex;
    $('#d2 option').prop('disabled', false); // enable all options
    if (index != 0) {
        $('#d2').get(0).selectedIndex = 0; // so you don't disable the option after it's selected
        $('#d2 option:eq(' + index + ')').prop('disabled', true);
    }
});​ 
```

[http://jsfiddle.net/mblase75/QTDXt/6/](http://jsfiddle.net/mblase75/QTDXt/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:49:02.143

```
$('#d1').change(function(e) {
index = $(this).prop('selectedIndex');
if (index != 0) {
  $('#d2 option:eq(' + index + ')').css('display','none');}
  $('#d2 option:eq(' + index + ')').siblings().css('display','block');
}); 
```

[小提琴](http://jsfiddle.net/QTDXt/9/)

# css - 在 IE7 上设置图像高度

> ID：13935288
> 
> 赞同：1
> 
> 时间：2012-12-18T14:40:25.707
> 
> 标签：css, internet-explorer, internet-explorer-7, compass-sass, zurb-foundation

即使我已经在其他主要的网络浏览器（Chrome、Firefox、Safari）上成功地完成了 IE6/IE7 的布局，我也遇到了问题。

很抱歉，我无法在 JSFiddle 上复制错误，所以我在这里给出网站的[url](http://blog-test.koskosan.com.au)。在网站中，我只想设置右侧三个图像缩略图的高度（在 In-House Guru 部分下）。
我已将高度设置如下：

```
.in-house-guru .ihg-thumbnail {
  height: 112px;
} 
```

但是，它们不是具有相同的高度，而是具有不同的高度。更糟糕的是，当我尝试通过 IE 开发者工具调试代码并尝试将高度直接注入（设置）到浏览器中时，什么也没有发生。
如果我增加 CSS 中的高度，比如增加 500 像素，它们也会增加高度，但是它们的高度不同（例如 477 像素、495 像素和 120 像素）。

附加说明：
此处使用带有 Zurb-Foundation 3 的指南针。以前网格存在问题，因为它们不支持 IE7 和早期，幸运的是我已经设法使用 Schepp 的 boxsizing.htc 脚本修复了它。
我使用 IE9 和 IE7 浏览器模式进行了测试。

任何人，请帮助我。它把我的头发扯掉了。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:53:11.230

问题不在于图像，实际上是风格`li`

```
.block-grid.two-up > li {
    padding: 0 5px 11px;
    width: 50%;
} 
```

第一个图像的`padding-bottom`11px 与第二行中的第三个图像重叠，因此出现了问题。

为 li 提供 5px 的恒定填充，如下所示：

```
.block-grid.two-up > li {
        padding: 5px;
      } 
```

似乎为我解决了这个问题。

# ruby-on-rails - rake (10.0.3) 中：trace_output:Symbol (NoMethodError) 的未定义方法“id2nkame”

> ID：13935297
> 
> 赞同：-1
> 
> 时间：2012-12-18T14:40:58.870
> 
> 标签：ruby-on-rails, ruby, rake

当我运行 rake 时，返回一个错误：

```
/Users/reg/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/ostruct.rb:166:in `method_missing': 
undefined method `id2nkame' for :trace_output:Symbol (NoMethodError) 
```

我不知道这个错误，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:25:49.670

我不知道你是如何`ostruct.rb`改变的，但第 166 行`mname = mid.id2name`已经有 15 年没有改变了，所以只要改变你在错误消息中`id2nkame`得到`id2name`的文件，一切都应该很好。

# linux - 如何生成 debian 弱键？

> ID：13935300
> 
> 赞同：2
> 
> 时间：2012-12-18T14:41:05.947
> 
> 标签：linux, openssl, debian

我需要为 Linux 官方黑名单中未包含的非标准位生成 debian 弱密钥（这些仅来自：512、1024、2048、4096）。任何人都可以指导我如何实现生成 debian 弱键吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:52:19.627

当然，您可以编写一个程序来生成这些列表。但简单的方法可能是在虚拟环境中复制错误。例如，参见[Debian OpenSSL 可预测 PRNG 玩具](http://digitaloffense.net/tools/debian-openssl/)。

请注意，生成的弱密​​钥取决于架构。也就是说，不同的架构会产生不同的弱密钥。但它们当然*都是*弱键。

# mvvm-light - Windows Phone 8 的 MVVM Light 中的设计时错误

> ID：13935302
> 
> 赞同：1
> 
> 时间：2012-12-18T14:41:13.917
> 
> 标签：mvvm-light, windows-phone, windows-phone-8

我目前正在使用 MVVM Light Toolkit 迈出第一步。我想在 Blend 中打开一个示例 WP8 项目，但我收到了 Laurent 在[他的博客](http://blog.galasoft.ch/archive/2012/11/11/a-fix-for-the-design-time-error-in-mvvm-light.aspx#feedback)中提到的消息：

> “无法从程序集 'mscorlib.extensions' 加载类型 'System.ComponentModel.INotifyPropertyChanging'”</p>

我已经尝试过他的修复，但我什至无法引用他提供的新修补的 dll 文件以供下载。我收到此错误消息：

> 无法将对更高版本或不兼容程序集的引用添加到项目中。

我在 Windows 8 上使用 Visual Studio 2012 Express 和 MVVM Light Toolkit 中的这两个文件：

*   [发布版本 4.1](http://mvvmlight.codeplex.com/releases/view/96993)
*   [来自博客文章的 DLL Zip 包](http://sdrv.ms/UUyOfU)

修复对你们中的任何人有用吗？

谢谢你的帮助，马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:22:04.023

这是已知的错误，可能的解决方案在这里描述：http:
[//mvvmlight.codeplex.com/discussions/401430](http://mvvmlight.codeplex.com/discussions/401430)

你能做的和对我有用的是下载最新的 MVVM Light 源代码，删除所有对“mscorlib.extensions”的引用，重新编译它，你就可以了。

然后，在您的项目中，您还必须删除对“mscorlib.extensions”的所有引用，这样它就可以正常工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T23:00:05.677

当我安装最新版本的 mvvm (GalaSoft.MvvmLight.4.1.24.0.msi) 时，我遇到了同样的问题。

我通过删除对 GalaSoft 的引用然后使用 NuGet 重新安装 Portable MVVM 库来解决它。它们仅具有 MVVM LIght 库 (PCL) 的 NuGet 名称。这些似乎是为可移植类库编译的。

# c# - 检测 SplitContainer 的活动面板（Visual C# Express 2010，WinForms）

> ID：13935306
> 
> 赞同：0
> 
> 时间：2012-12-18T14:41:26.887
> 
> 标签：c#, winforms, focus, splitcontainer

我有一个拆分容器。在两个面板上都有一些控件填充它们。我想确定哪个 Panel 正在持有精确的控制权。我的意思是当控制获得焦点时 - 我想知道例如 Panel1 获得焦点。是否可以在不通过事件的情况下实现？

编辑：我需要它与嵌套控件一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:58:28.667

您可以使用此代码。它返回带有焦点控件的第一个面板。不适用于嵌套控件（即 a `TextBox`in a `Panel`in a `SplitterPanel`）。

```
var panels = splitContainer1.Controls.OfType<SplitterPanel>();
var focusedPanel = panels.FirstOrDefault(p => p.Controls.OfType<Control>().
                          Any(c => c.Focused)); 
```

编辑：要支持递归儿童检测，您可以使用此方法：

```
static IEnumerable<Control> GetNestedChildren(Control container)
{
    var children = container.Controls.OfType<Control>().ToArray();
    return children.Concat(children.SelectMany(GetNestedChildren));
} 
```

您以前的代码将变为：

```
var panels = splitContainer1.Controls.OfType<SplitterPanel>();
var focusedPanel = panels.
    FirstOrDefault(p => GetNestedChildren(p).
        Any(c => c.Focused)); 
```

# java - 如何用 Java 制作 AVI 电影？

> ID：13935311
> 
> 赞同：1
> 
> 时间：2012-12-18T14:41:44.463
> 
> 标签：java, media, avi

![AVI](../Images/d3e78f0716d17d468914437fab40e255.png)

我一直致力于为屏幕录像机创建原型。到目前为止，我已经创建了 GUI。还有很多东西。
主要的事情之一是从一组`BufferedImage`.
我尝试理解 Monte Media Library，但它超出了我的想象。那家伙是想自己编码吗？我不知道！：/

*   那么，从 BufferedImages 创建 AVI 的另一种方法是什么（或任何其他合适的方法，我的知识有限）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:08:06.890

我认为您不会为此找到纯 java 库。看看[gstreamer-java](http://code.google.com/p/gstreamer-java/)看看它是否符合您的需求。确保安装正确的插件。

# ajax - 浏览器在 ajax 请求上发送 Origin 标头，但不是通过简单的 HTTP Get 请求。为什么？

> ID：13935312
> 
> 赞同：1
> 
> 时间：2012-12-18T14:41:47.833
> 
> 标签：ajax, http, cookies, cross-domain, cors

我使用 SignalR 作为我的推送服务器（.NET 的东西），在这个过程的某个地方，脚本发送一个 ajax 请求，但不发送 cookie。

但是，当我在新选项卡中打开该请求时，所有 cookie 都会同时发送。

笔记：

1.  `X-Requested-With`未定义（代码为`$.ajax()`，但似乎浏览器将此请求视为跨域请求）
2.  推送服务器正在运行`domain.com:7171`
3.  应用服务器正在运行`domain.com`
4.  URL 与`GET`方法一起使用
5.  当我们从地址栏向同一个 URL 发送一个简单的请求（简单的 HTTP Get）时，cookie 被发送

为什么 cookie 在 HTTP get 请求时发送到同一个 URL，而在 ajax 请求时不发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:57:46.087

您提到这是从 domain.com 到 domain.com:7171 的跨域请求。默认情况下，跨域请求中不包含 Cookie。`.withCredentials = true;` [您需要通过在 JQuery 请求中](https://stackoverflow.com/questions/2054316/jquery-sending-credentials-with-cross-domain-posts)进行设置来明确表明您想要包含 cookie 。您的服务器还需要使用 header 进行响应`Access-Control-Allow-Credentials: true`。您可以在这里了解更多信息：http: [//www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

# android - Android - 谷歌地图集成空活动

> ID：13935321
> 
> 赞同：0
> 
> 时间：2012-12-18T14:42:22.270
> 
> 标签：android, android-activity, android-mapview, android-maps

我正在尝试将 Google Maps API v2 集成到辅助活动中（即从主要活动开始）。我获得了 API 密钥并按照本[教程](https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api)进行操作，但是当启动包含 Google 地图的活动时，它只显示空白图块。这是清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.dimacroitori.supermarket"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission      android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<uses-feature
     android:glEsVersion="0x00020000"
     android:required="true"/>

<permission
      android:name="com.examplemapsactivity.permission.MAPS_RECEIVE"
      android:protectionLevel="signature"/>
<uses-permission android:name="com.examplemapsactivity.permission.MAPS_RECEIVE"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar" >
     <uses-library android:name="com.google.android.maps" />
    <activity
        android:name="com.dimacroitori.supermarket.MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="BasketActivity"></activity>
    <activity android:name="MapsActivity"></activity>

    <meta-data
      android:name="com.google.android.maps.v2.API_KEY"
      android:value="xxxxxxxxxxxxxxxxxxxxxxxxx"/>
</application>

</manifest> 
```

MapsActivity 类：

```
import android.app.Activity;
import android.os.Bundle;

public class MapsActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_act);

    // TODO Auto-generated method stub//
}

} 
```

map_act.xml：

```
<?xml version="1.0" encoding="utf-8"?>  
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/map"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     class="com.google.android.gms.maps.MapFragment"/> 
```

这是我尝试开始活动时来自 logcat 的错误：

```
12-18 16:09:27.911: E/Google Maps Android API(14414): Google Maps application is missing. 
```

我做错了什么？

# ios - viewDidAppear 上的动画 UIImageView 和 UITableView

> ID：13935322
> 
> 赞同：1
> 
> 时间：2012-12-18T14:42:26.383
> 
> 标签：ios, uitableview, animation, uiimageview

我有一个`UIViewController`徽标居中且`UITableView`alpha 0。

在`viewDidAppear:`我有这个：

```
[UIView animateWithDuration:0.6 delay:0.0 options:UIViewAnimationCurveEaseInOut animations:^{
    [self.logo setFrame:CGRectMake(0.0f, self.view.frame.size.height - 194.0f, 320.0f, 194.0f)];
} completion:^(BOOL finished) {
    [self.table setFrame:CGRectMake(0.0f, 0.0f, 320.0f, self.view.frame.size.height - 194.0f)];

    [UIView animateWithDuration:0.4 delay:0.0 options:UIViewAnimationCurveEaseInOut animations:^{
        [self.table setAlpha:1.0];
    } completion:^(BOOL finished) {
        return;
    }];

    return;
}]; 
```

好的，动画就是我想要的。

但是当我打电话`presentModalViewController:`显示下一个视图时，`UIImageView`回到屏幕中心并`UITableView`返回之前的高度。

完成动画后如何保持相同的大小和位置甚至改变视图？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:17:07.597

我假设您在`viewDidLoad`此设置原始帧很好，除非模态清除您的系统内存。视图会尽可能地被缓存。因此，如果您的模态使用足够的内存来重置它，则会`viewDidLoad`再次调用重置您的视图。

处理此问题的一种快速简便的方法是在`dismissViewController:animated:`方法中设置您想要的值（如果您正在使用它），或者为模态设置一个委托方法。

如果您没有其中任何一个，则需要以某种方式检查这是否是第一次加载。不过，这不是一种干净的处理方式。如果您显示更多代码，我们可能会制定出更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:47:47.823

注意：您使用了错误的选项常量。而不是`UIViewAnimationCurveEaseInOut`，应该是使用`UIViewAnimationOptionCurveEaseInOut`。这可能不会影响您的问题，但这很糟糕。

此外，您不需要`return`完成块中的语句。

我会检查您的 viewWillDisappear 和 viewDidDisappear 方法中的代码。您可能正在那里（甚至在 layoutSubviews 中）进行初始布局，这正在重置视图。

# matlab - 在MATLAB中对顺时针多边形点进行排序

> ID：13935324
> 
> 赞同：12
> 
> 时间：2012-12-18T14:42:32.133
> 
> 标签：matlab, sorting, geometry, polygon

我有 2 个向量，它们是多边形 8 个顶点的 x 和 y 坐标

> x=[5 5 7 7 9 9 5 7]
> 
> y=[8 6 6 8 6 8 10 10]

我想对它们进行排序（顺时针）以获得正确的向量（正确绘制多边形）

> x=[5 7 9 9 7 7 5 5]
> 
> y=[6 6 6 8 8 10 10 8]

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-18T14:47:46.333

第 1 步：找到顶点的未加权平均值：

```
cx = mean(x);
cy = mean(y); 
```

第2步：找到角度：

```
a = atan2(y - cy, x - cx); 
```

第 3 步：找到正确的排序顺序：

```
[~, order] = sort(a); 
```

第 4 步：重新排序坐标：

```
x = x(order);
y = y(order); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-13T14:33:12.170

Ben Voigt 算法的 Python 版本（numpy）：

```
def clockwise(points):
    x = points[0,:]
    y = points[1,:]
    cx = np.mean(x)
    cy = np.mean(y)
    a = np.arctan2(y - cy, x - cx)
    order = a.ravel().argsort()
    x = x[order]
    y = y[order]
    return np.vstack([x,y]) 
```

例子：

```
In [281]: pts
Out[281]: 
array([[7, 2, 2, 7],
       [5, 1, 5, 1]])

In [282]: clockwise(pts)
Out[282]: 
array([[2, 7, 7, 2],
       [1, 1, 5, 5]]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-07T13:44:32.953

我尝试了@ben-voight 和@mclafee 的解决方案，但我认为他们的排序方式错误。

使用 atan2 时，角度以下列方式表示：

[![在此处输入图像描述](../Images/a2d0c62fd74bd861154f11b8450294e3.png)](https://i.stack.imgur.com/avl4D.gif)

[Matlab Atan2](https://de.mathworks.com/help/matlab/ref/atan2.html#buct8h0-4 "例子")

> 该角度对于逆时针角度为正（上半平面，y > 0），对于顺时针角度为负（下半平面，y < 0）。

[维基百科 Atan2](https://en.wikipedia.org/wiki/Atan2 "例子")

这意味着使用 Numpy 或 Matlab 的升序排序（）将逆时针进行。

这可以使用鞋带方程来验证

[维基百科鞋带](https://en.wikipedia.org/wiki/Shoelace_formula "例子")

[蟒蛇鞋带](https://github.com/martalmeida/okean/blob/master/okean/calc.py#L104 "例子")

因此，调整上面提到的答案以在 Matlab 中使用降序排序正确的解决方案是

```
cx = mean(x);
cy = mean(y);
a = atan2(y - cy, x - cx);
[~, order] = sort(a, 'descend');
x = x(order);
y = y(order); 
```

numpy 中的解决方案是

```
import numpy as np

def clockwise(points):
    x = points[0,:]
    y = points[1,:]
    cx = np.mean(x)
    cy = np.mean(y)
    a = np.arctan2(y - cy, x - cx)
    order = a.ravel().argsort()[::-1]
    x = x[order]
    y = y[order]
    return np.vstack([x,y])

pts = np.array([[7, 2, 2, 7],
                [5, 1, 5, 1]])

clockwise(pts)

pts = np.array([[1.0, 1.0],
                [-1.0, -1.0],
                [1.0, -1.0],
                [-1.0, 1.0]]).transpose()

clockwise(pts) 
```

输出：

```
[[7 2 2 7]
 [5 1 5 1]]

[[2 7 7 2]
 [5 5 1 1]]

[[ 1\. -1\.  1\. -1.]
 [ 1\. -1\. -1\.  1.]]

[[-1\.  1\.  1\. -1.]
 [ 1\.  1\. -1\. -1.]] 
```

请注意`[::-1]`用于反转数组/列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-05T21:15:20.433

该算法不适用于非凸多边形。相反，请考虑使用 MATLAB 的 poly2cw()

# sql - sql查询创建新列并添加数据

> ID：13935325
> 
> 赞同：0
> 
> 时间：2012-12-18T14:42:33.510
> 
> 标签：sql, sql-server-2008, tsql

![在此处输入图像描述](../Images/a3fd212e8768712b9e00122309b07173.png)

我想用经理的名字检索员工姓名。

例如：

Employee_Lastname：WARX
Employee_Firstname：CYNTHIA
MANAGER_NANE：SMITH

Warx Cythnia 有一个 Manager_ID=7369 的经理，他是 Smith John，因为 Smith 的 Employee_ID=7369

我想创建 MANGER_NAME 列并添加数据...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:45:05.247

也许您只想投影记录的值，而不是在表中添加新列，对吗？你只需要加入这个，

```
SELECT  a.*,
        b.Employee_LastName AS MANAGER_LASTNAME
FROM    EmpTable a
        LEFT JOIN EmpTable b
            ON a.Manager_ID = b.Employee_ID 
```

或者

```
SELECT  a.Employee_LastName,
        a.Employee_FirstName,
        b.Employee_LastName AS MANAGER_LASTNAME
FROM    EmpTable a
        LEFT JOIN EmpTable b
            ON a.Manager_ID = b.Employee_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:45:17.523

通常，您不会存储此类信息。但是查询的时候可以很方便的获取：

```
select
   t1.Employee_Lastname,
   t1.Employee_Firstname,
   t2.Employee_Lastname as manager_name
from [table] t1
       left join
     [table] t2
        on
           t1.manager_id = t2.employee_id 
```

# javascript - JavaScript iPad iOS 5 比例和位置

> ID：13935331
> 
> 赞同：1
> 
> 时间：2012-12-18T14:42:59.707
> 
> 标签：javascript, ios5, position, scale

我正在开发在各种 iPad 版本上运行的基于 JavaScript/HTML/CSS 的网站。我有一个奇怪的现象。

该应用程序在灯箱上显示一个居中的 div。在方向改变时，灯箱上的 div 应该再次水平居中。

我使用的代码进行定位，然后缩放到我需要显示的 div。我注意到仅在 iOS 5 上，如果我运行位置函数（它计算居中 div 的位置），然后 div 不再居中的比例函数。

另一方面，如果先缩放然后再定位，一切都很好。

我很乐意获得任何见解来帮助我解释这一点。缩放因子是预先计算的，并用于缩放方法。

提前致谢，

德罗

# c# - 这个 dllImport 标签是如何形成的？

> ID：13935332
> 
> 赞同：0
> 
> 时间：2012-12-18T14:43:06.987
> 
> 标签：c#, visual-c++, dllimport

我试过看类似的问题，但没有找到运气。我只是对如何从我创建的可视 C++ dll 形成这个 dllImport 标记感到困惑。

原型是：

```
extern "C" __declspec(dllexport) int WS_CreateComm(char *cAddress,void *Obj, void (*LogFunc)(void *, const char *, int, int, const char*, const char*, int, unsigned int)) 
```

我将如何将它导入我的 C# 类？

更新：

这是我到目前为止所得到的：

```
delegate int CFuncDelegate(IntPtr Obj, string cErrorText, int iErrorLevel, int iTPM, string cFile, string cFunc, int iUserId, UInt16 iLineNumber);

    [DllImport("WatchService2DLL.dll")]
    public static extern void WS_CreateComm(string cAddress,void* Obj,CFuncDelegate func);

public static void Function(IntPtr CFunC, IntPtr Obj, string cErrorText, int iErrorLevel, int iTPM, string cFile, string cFunc, int iUserId, UInt16 iLineNumber)
    {
        CFuncDelegate func = (CFuncDelegate)Marshal.GetDelegateForFunctionPointer(CFunC,typeof(CFuncDelegate));
        int rc = func(Obj,cErrorText,iErrorLevel,iTPM,cFile,cFunc,iUserId,iLineNumber);
    } 
```

这个实现正确吗？我现在究竟如何调用 WS_CreateComm？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:49:18.953

看看这个[问题](https://stackoverflow.com/questions/2470487/call-c-function-pointer-from-c-sharp)，因为你需要编组一个函数指针。对于 char 参数，通常使用 stringbuilder 或 string。void* 可以映射为 long，我会将其设置为 null，因为它很可能会在回调中传回给您。

# java - 从另一个类中的方法访问 ArrayList

> ID：13935345
> 
> 赞同：1
> 
> 时间：2012-12-18T14:43:49.753
> 
> 标签：java, netbeans, java-6

我正在尝试制作一个程序，该程序从文件中获取输入，然后在不同的文件中搜索输入，例如，它从文件 A 中获取单词“car”并输出单词的位置（如果包含该单词) 在文件 B 中。

目前我有3节课。一个主类，一个读取文件输入的类和一个在另一个文件中搜索输入的类。

读取输入的类具有获取文件的代码，逐行读取文件并将每个单词保存到变量中，然后将这些变量添加到 arrayList 中。

这是代码的一部分：

```
List<String> listOfWords = new ArrayList<String>();
     while((strLine = br.readLine()) != null){
          String [] tokens = strLine.split("\\s+");
          String [] words = tokens;
          for(String word : words){
              listOfWords.add(word);
              System.out.print(word);
              System.out.print(" ");      
          } 
        System.out.print("\n");  
    }
        in.close();
        return listOfWords;    
    } 
```

然后，我需要使用在外部文件中搜索单词的代码将 arrayList 放入类中。

这是搜索单词的代码的一部分：

```
public void search(List<String> listOfWords) throws FileNotFoundException, IOException{

        FileInputStream fstream = new FileInputStream(getSearchFileName());

        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;

        while((strLine = br.readLine()) != null){
            for(String list: listOfWords){
            Pattern p = Pattern.compile(list);
            Matcher m = p.matcher(strLine);

        int start = 0;
        while (m.find(start)) {
            System.out.printf("Word found: %s at index %d to %d.%n", m.group(), m.start(), m.end());
            start = m.end();
                }
            }
          }  
} 
```

该代码独立工作，但我无法从第一组代码调用arrayList（listOfWords）并在第二组代码中使用它，它们位于不同的类中。

任何有关我需要添加或调整的代码的帮助将不胜感激。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:47:47.307

这似乎是一个范围问题。如果您要在一个类或方法之间使用该列表，您可以考虑：

1.  *返回*第一种方法的列表，将其保存在字段或变量中并将其传递给第二种方法。
2.  *使列表成为类字段*并对其进行管理。这样你就可以在第二个代码块中访问它，假设两个块都在同一个类上。

实际上，该列表是在第一个代码块（循环）的范围内定义的`while`，我认为它是实际方法的摘录。一旦方法完成，列表就符合 GC 条件（换句话说，与丢弃一样好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:47:49.530

您的方法返回类型应该列出。然后您可以通过对象引用或静态变量调用该方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:49:34.933

您可以通过学习变量范围来理解您遇到的问题，将您的 listOfWords 移出 while 循环。

```
List<String> listOfWords = new ArrayList<String>();
while((strLine = br.readLine()) != null){
            String [] tokens = strLine.split("\\s+");
            String [] words = tokens;
            for(String word : words){
                listOfWords.add(word);
                System.out.print(word);
                System.out.print(" ");      
            } 
            System.out.print("\n");  
        }
in.close();
return listOfWords; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T14:51:42.873

`listOfWords`是一个局部方法变量，它的范围仅限于 while 循环。因此它不能被其他方法访问。有两种处理方法：

1.  第一个方法可以返回`listOfWords`并被调用`search()`。
2.  如果两个方法在同一个类中，`listOfWords`则可以是一个类字段，该类中的所有方法都可以访问。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T14:54:48.203

我将从您的主题中回答您的问题：您需要在类主体中定义您的数组列表（在函数主体之外）并将其设置为公共并且（如果您想在不启动类的情况下访问，只需将其设置为静态） ：

```
class A 
{

 public static List<String> listOfWords = new ArrayList<String>();
void func()
   {  
//......
while((strLine = br.readLine()) != null){
        String [] tokens = strLine.split("\\s+");
        String [] words = tokens;

        for(String word : words){
            listOfWords.add(word);
            System.out.print(word);
            System.out.print(" ");      
        } 
        System.out.print("\n");  
    }
    in.close(); 
```

} }

这里如何从你的 B 类访问：

```
 class B
{
   funcInClassB ()
 {
   myArrayList=A.listOfWords();
  }
 } 
```

# jquery - 来自 HTML 的 jQuery 链接

> ID：13935347
> 
> 赞同：-4
> 
> 时间：2012-12-18T14:43:51.967
> 
> 标签：jquery, html, function

我在 JQuery 中有以下代码来创建带有链接的页脚：

```
;(function($) { $.fn.piepagina = function(options) {
    return this.each(function() {
        var defaults = {images: [
            '<a href="http://unlimitedwonders.blogspot.com/2012/12/about.html">About</a> -',
            '<a href="http://unlimitedwonders.blogspot.com/2012/12/reportanissue.html">Report an issue</a> -',
        '<a href="http://unlimitedwonders.blogspot.com/2012/12/contribute.html">Contribute</a> -',
        '<a href="http://unlimitedwonders.blogspot.com/2012/12/contactus.html">Contact Us</a> -',
        '<a href="http://unlimitedwonders.blogspot.com/2012/12/termsofuse.html">Terms of Trade</a> - ',
        '<a href="http://unlimitedwonders.blogspot.com/2012/12/emailupdates.html">Email updates</a> ']};
        var settings = $.extend(defaults, options || {});           
    });
};})(jQuery); 
```

我从我的 HTML 中调用如下函数：

```
 <script>$(function() {$('#footer').piepagina();});</script> 
```

但我在页脚上看不到任何东西。

我做错了什么？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:48:04.297

你没有在你的代码中做任何事情......

你为什么不试试：

```
 this.append( 
    '<a href="http://unlimitedwonders.blogspot.com/2012/12/about.html">About</a> -',
    '<a href="http://unlimitedwonders.blogspot.com/2012/12/reportanissue.html">Report an issue</a> -',
    '<a href="http://unlimitedwonders.blogspot.com/2012/12/contribute.html">Contribute</a> -',
    '<a href="http://unlimitedwonders.blogspot.com/2012/12/contactus.html">Contact Us</a> -',
    '<a href="http://unlimitedwonders.blogspot.com/2012/12/termsofuse.html">Terms of Trade</a> - ',
    '<a href="http://unlimitedwonders.blogspot.com/2012/12/emailupdates.html">Email updates</a> '
  ); 
```

我*认为*这就是你想要做的......但我不能确定......

不知道为什么你需要一个插件来解决这个问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:51:03.363

假设您需要像这样修改代码：

```
(function($) {
    $.fn.piepagina = function (options) {
        return this.each(function () {
            var defaults = {
                images: [
                    '<a href="http://unlimitedwonders.blogspot.com/2012/12/about.html">About</a> -',
                    '<a href="http://unlimitedwonders.blogspot.com/2012/12/reportanissue.html">Report an issue</a> -',
                    '<a href="http://unlimitedwonders.blogspot.com/2012/12/contribute.html">Contribute</a> -',
                    '<a href="http://unlimitedwonders.blogspot.com/2012/12/contactus.html">Contact Us</a> -',
                    '<a href="http://unlimitedwonders.blogspot.com/2012/12/termsofuse.html">Terms of Trade</a> - ',
                    '<a href="http://unlimitedwonders.blogspot.com/2012/12/emailupdates.html">Email updates</a> '
                ]
            };
            var settings = $.extend(defaults, options || {});
            for(var i =0; i < settings.images.length; i++) {
                $(this).append(settings.images[i]);
            }
            $(this).data("piepagina", { settings: settings });
        });
    };
})(jQuery); 
```

`for`逐行循环`var settings = ...`会将所有可用的图像（链接）添加`settings.images`到所选元素中。

# dart - Dart 模板和 {{}} 占位符在点击

> ID：13935353
> 
> 赞同：0
> 
> 时间：2012-12-18T14:44:08.597
> 
> 标签：dart, dart-webui

我正在尝试使用 Dart 从数据中创建 HTML5 表格的各种方法。我有以下内容：

```
<table id="sitelist">
  <thead>
    <tr><th>Select a site</th>
      </tr>
    </thead>
  <tbody template iterate="x in siteCells">
    <tr on-click="displaySite('{{x[0]}}')"> <td> {{x[1]}} </td>
      </tr> 
    </tbody>
  </table> 
```

这个想法是有一个点击处理程序，它将站点 ID 作为参数。但 displaySite 的参数设置不正确 - 此函数接收文字字符串`{{x[1]}}`。
站点名称`x[1]`显示正确。

所以我的问题是：是否可以在点击处理程序的参数列表中进行 {{}} 替换工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T04:22:10.167

只需在`{{ }}`点击时从 displaySite() 调用中删除，它就会起作用。

```
<table id="sitelist">
  <thead>
    <tr><th>Select a site</th>
    </tr>
  </thead>
  <tbody template iterate="x in siteCells">
    <tr on-click="displaySite(x[0])"> <td> {{x[1]}} </td>
    </tr>
  </tbody>
</table> 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:56:01.387

在赛斯有用的回应之前，我想出了另一种方法。这在表级别使用单个单击事件，并将 data-id 属性添加到行。任何关于哪种方法更好的评论，或者如果我应该使用更标准的“Dartful”方法，将不胜感激！

```
 <template if="showSiteList == true">
    <table class="table-select" id="sitelist2" on-click="tableClicked($event)">
      <thead>
        <tr><th>Choose a site</th>
          </tr>
        </thead>
        <tbody template iterate="x in siteCells">
          <tr data-id={{x[0]}} > <td> {{x[1]}} </td>
            </tr> 
          </tbody>
      </table>  
    </template> 
```

还有 Dart 代码：

```
void tableClicked(Event e) {
 TableCellElement cell = e.target;
 TableRowElement row = cell.parent; 
 if (row.dataAttributes.containsKey('id')) {
   int id = int.parse(row.dataAttributes['id']);
   if (id != null) { // be a bit paranoid
      globSiteId = id;
   }   
 }
 showSiteList = false;
 watchers.dispatch();
} 
```

# java - 运行 .jar 文件

> ID：13935355
> 
> 赞同：-2
> 
> 时间：2012-12-18T14:44:14.060
> 
> 标签：java, binary

> **可能重复：**
> [如何运行 JAR 文件](https://stackoverflow.com/questions/1238145/how-to-run-a-jar-file)

我有一个让我疯狂一段时间的问题：1周前我下载了这个文件：“ **droidAtScreen-1.0.1.jar** ”我可以双击它，我可以“看到”我的Android设备的屏幕，问题是，周五一位同事更改了系统变量以使用 eclipse 制作一些东西，现在我的 jar 文件没有图标，我不知道如何运行它来再次捕获我的方便屏幕！

我尝试“右键单击”，使用 java TM SE 二进制文件打开，但没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:46:12.993

您是否`java -jar droidAtScreen-1.0.1.jar`从命令行尝试过？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:07:52.807

您的同事可能更改了**类路径变量**。尝试运行：

```
java -jar //fullPath to your jarfile including jar name 
```

或尝试将您的类路径重置为

```
set CLASSPATH="/fullPath to your jarfile.jar" 
```

# c++ - 如何在 C++ 的子目录中创建文件？

> ID：13935357
> 
> 赞同：2
> 
> 时间：2012-12-18T14:44:20.060
> 
> 标签：c++, ofstream

这是我的代码，如何在子目录联系人中创建文件？每次创建文件时，它都会出现在与我的程序相同的目录中。

```
int main(){
ofstream myfile("\\contacts");
myfile.open ("a");
myfile.close();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:45:53.353

在构造函数中指定完整路径：

```
ofstream myfile(".\\contacts\\a"); // or just "contacts/a"
if (myfile.is_open())
{
} 
```

发布的代码尝试创建一个名为的文件`"\\contacts"`，然后创建另一个名为`"a"`.

笔记：

*   不会`ofstream`创建中间目录：`"contacts"`必须在使用`ofstream`.
*   析构函数将关闭 ，`ofstream`因此无需显式调用`myfile.close()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:50:18.020

如果将文件路径写为“a”，则将其保存在与程序相同的目录中。如果您希望它在联系人目录中（将在程序目录中），您必须编写文件的路径。这个目录将是 /contacts/a，所以你的代码应该是：

```
 int main(){
        ofstream myfile("\\contacts\\a");
        myfile.close();
    } 
```

# iphone - Xcode 静态表生成器

> ID：13935361
> 
> 赞同：0
> 
> 时间：2012-12-18T14:44:23.510
> 
> 标签：iphone, ios, xcode

![标题](../Images/7fe805c45e0a59f5add36f94f386cfe1.png)

我有一个使用静态表的项目。但是，我发现逐个视图进入视图令人难以置信的乏味。是否有生成器或某种可以用来创建这样的故事板的工具？

对了，我已经试过动态原型表了。我要写很多`if(cell == 'Head of School')`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:51:53.800

您可以从代码创建表。使用一个 TableViewController 作为基类，init 使用不同的数据源。尝试查看[NimbusKit](http://nimbuskit.info/)表。这很容易。它允许用几行代码创建静态表。

# clojure - clojure / ring 中的 servlet 集成安全性？

> ID：13935363
> 
> 赞同：5
> 
> 时间：2012-12-18T14:44:25.523
> 
> 标签：clojure, ring

我一直在寻找一种在环形 Web 应用程序中利用现有 servlet 容器的集成安全性的好方法。看起来人们正试图用他们自己的环形中间件重新发明轮子来处理身份验证/授权。

我希望看到像环形中间件这样公开领域配置和一些安全约束的东西。就像是：

```
（定义网络应用程序
  (wrap-security-constraints [{:transport :confidential}] ; 需要 SSL
    (wrap-security-auth [{:pattern "/*"
                          ：输入“表格”
                          :ext-form-url "/登录"
                          ：领域“用户领域”}]
       应用程序处理程序）））
```

然后是一个宏来包装允许限制某些角色的处理程序

```
（defroutes 应用程序处理程序
  (GET "/admin" []
     (wrap-allowed-roles ["admin-role"]
       （控制器/do-admin）））
  ;... 等等 ...

```

在这里考虑一个 lein-ring 扩展。

外面有这样的东西吗？谷歌搜索在这里没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:34:48.900

有用于基本身份验证的[ring-basic-](https://github.com/remvee/ring-basic-authentication) authentication。在 servlet 上下文中，您始终可以回退到 servlet 引擎的身份验证和授权处理。为此，您可以使用[leiningen-war](https://github.com/alienscience/leiningen-war)创建 Web 存档并在 web.xml 中声明安全约束。

# c++ - 如何将 json 文件读入 C++ 字符串

> ID：13935364
> 
> 赞同：10
> 
> 时间：2012-12-18T14:44:23.837
> 
> 标签：c++, json, string, fstream

我的代码是这样的：

```
std::istringstream file("res/date.json");
std::ostringstream tmp;
tmp<<file.rdbuf();
std::string s = tmp.str();
std::cout<<s<<std::endl; 
```

输出是`res/date.json`，而我真正想要的是这个 json 文件的全部内容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T14:50:30.670

这

```
std::istringstream file("res/date.json"); 
```

创建一个`file`从 string 读取的流（名为 ）`"res/date.json"`。

这

```
std::ifstream file("res/date.json"); 
```

创建一个`file`从名为 的文件中读取的流（名为 ）`res/date.json`。

看到不同？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T04:02:40.140

后来我找到了一个很好的解决方案。使用`parser`在`fstream`.

```
std::ifstream ifile("res/test.json");
Json::Reader reader;
Json::Value root;
if (ifile != NULL && reader.parse(ifile, root)) {
    const Json::Value arrayDest = root["dest"];
    for (unsigned int i = 0; i < arrayDest.size(); i++) {
        if (!arrayDest[i].isMember("name"))
            continue;
        std::string out;
        out = arrayDest[i]["name"].asString();
        std::cout << out << "\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-04T14:07:33.457

将文件加载`.json`到 an`std::string`并将其写入控制台：

```
#include <iostream>
#include <string>
#include <fstream>
#include <sstream>

int main(int, char**) {

    std::ifstream myFile("res/date.json");
    std::ostringstream tmp;
    tmp << myFile.rdbuf();
    std::string s = tmp.str();
    std::cout << s << std::endl;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-06T07:26:36.890

我尝试了上面的东西，但问题是它们在 C++ 14 中对我不起作用：P 我`incomplete type is not allowed`在两个答案和 2 json11::Json 中都得到了类似 ifstream 的东西 json11::Json 没有 a`::Reader`或 a`::Value`所以答案 2 也不起作用对于使用此[https://github.com/dropbox/json11](https://github.com/dropbox/json11)的 ppl 来说，要做这样的事情：

```
ifstream ifile;
int fsize;
char * inBuf;
ifile.open(file, ifstream::in);
ifile.seekg(0, ios::end);
fsize = (int)ifile.tellg();
ifile.seekg(0, ios::beg);
inBuf = new char[fsize];
ifile.read(inBuf, fsize);
string WINDOW_NAMES = string(inBuf);
ifile.close();
delete[] inBuf;
Json my_json = Json::object { { "detectlist", WINDOW_NAMES } };
while(looping == true) {
    for (auto s : Json::array(my_json)) {
        //code here.
    };
}; 
```

注意：这是一个循环，因为我希望它循环数据。注意：这肯定会出现一些错误，但至少我像上面那样正确打开了文件。

# java - JavaFX 并发任务设置状态

> ID：13935366
> 
> 赞同：8
> 
> 时间：2012-12-18T14:44:35.943
> 
> 标签：xmlrpc, java, multithreading, concurrency, javafx-2, javafx

我正在为我的应用程序创建 UI，它与其他平台的版本共享一个核心模块。在 JavaFX 中，我试图使用[`Task`](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)s 在后台做事，但我不知道如何更新任务状态。

这就是我想要做的。该`user`变量包含一个执行[xmlrpc](/questions/tagged/xmlrpc "显示标记为“xmlrpc”的问题")请求的类的实例：

```
public Task<Integer> doLogin()
{
    return new Task<Integer>() {
        @Override
        protected Integer call()
        {
            user.login();
            if (!user.getIsAuthorized())
            {
                // set the state to FAILED
            }
            else
            {
                // set the state to SUCCEDED
            }
            user.remember();
        }
    };

} 
```

在我的 UI 线程中，我希望能够执行以下操作来更新我的图形 UI：

```
loginTask.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
            @Override
            public void handle(WorkerStateEvent t) {
                // perform an UI update here depending on the state t
            }
        }); 
```

我应该如何设置状态？[Task API](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)中没有任何功能。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-18T16:04:08.833

`Task`状态不打算用于用户逻辑。引入它们是为了控制`Task`流量。要将用户逻辑添加到`Task`您需要使用`result`概念。在您的情况下，您可能希望使用`Task<Boolean>`并且您的任务结果将是`TRUE`正确的凭据和`FALSE`不正确的：

任务创建：

```
public Task<Boolean> doLogin() {
    return new Task<Boolean>() {
        @Override
        protected Boolean call() {
            Boolean result = null;
            user.login();
            if (!user.getIsAuthorized()) {
                result = Boolean.FALSE;
            } else {
                result = Boolean.TRUE;
            }
            user.remember();
            return result;
        }
    };
} 
```

开始该任务：

```
final Task<Boolean> login = doLogin();
login.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
    @Override
    public void handle(WorkerStateEvent t) {
        // This handler will be called if Task succesfully executed login code
        // disregarding result of login operation

        // and here we act according to result of login code
        if (login.getValue()) {
            System.out.println("Successful login");
        } else {
            System.out.println("Invalid login");
        }

    }
});
login.setOnFailed(new EventHandler<WorkerStateEvent>() {
    @Override
    public void handle(WorkerStateEvent t) {
        // This handler will be called if exception occured during your task execution
        // E.g. network or db connection exceptions
        System.out.println("Connection error.");
    }
});
new Thread(login).start(); 
```

# sql-server - 在编写具有多个一对多关系的 SQL 查询时需要帮助

> ID：13935368
> 
> 赞同：1
> 
> 时间：2012-12-18T14:44:42.527
> 
> 标签：sql-server

我有 3 个具有此架构的表：

**表格1**

```
CREATE TABLE #tmpGroundPreferenceProfile
(
    [Id] [int] NOT NULL,
    [Name] [varchar](50) NULL
 )
INSERT #tmpGroundPreferenceProfile ([Id], [Name]) VALUES (1, N'Profile1') 
INSERT #tmpGroundPreferenceProfile ([Id], [Name]) VALUES (2, N'Profile2') 
INSERT #tmpGroundPreferenceProfile ([Id], [Name]) VALUES (3, N'Profile3') 
```

**表2**

```
CREATE TABLE #tmpGroundPreferenceLocations(
    [Id] [int]  NOT NULL,
    [GroundPreferenceProfileId] [int] NULL,
    [DistrictId] [int] NULL,
    [RanchId] [int] NULL,
    [FieldId] [int] NULL
)

INSERT #tmpGroundPreferenceLocations ([Id], [GroundPreferenceProfileId], [DistrictId], [RanchId], [FieldId]) VALUES (1, 1, 1, NULL, NULL)
INSERT #tmpGroundPreferenceLocations ([Id], [GroundPreferenceProfileId], [DistrictId], [RanchId], [FieldId]) VALUES (2, 1, 1, 1, NULL)
INSERT #tmpGroundPreferenceLocations ([Id], [GroundPreferenceProfileId], [DistrictId], [RanchId], [FieldId]) VALUES (3, 1, 1, 1, 1) 
```

**表3**

```
CREATE TABLE #tmpGroundPreferenceRatings(
    [Id] [int]  NOT NULL,
    [GroundPreferenceLocationId] [int] NULL,
    [Rating] [int] NULL,
    [Week] [int] NULL
)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (2, 1, 11, 1)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (3, 1, 12, 2)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (4, 1, 13, 3)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (5, 2, 21, 1)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (6, 2, 22, 2)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (7, 2, 23, 3)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (8, 3, 31, 1)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (9, 3, 32, 2)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (10, 3, 33, 3)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (11, 1, 14, 4)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (12, 1, 15, 5)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (13, 2, 24, 6)
INSERT #tmpGroundPreferenceRatings ([Id], [GroundPreferenceLocationId], [Rating], [Week]) VALUES (14, 2, 25, 7) 
```

**说明**：

针对每个配置文件可以有多个位置，并且针对每个位置可以有多个评级。

IE

1.  tmpGroundPreferenceProfile 和 tmpGroundPreferenceLocations 之间存在一对多的关系
2.  tmpGroundPreferenceLocations 和 #tmpGroundPreferenceRatings 之间存在一对多的关系

**问题**：

一周内可以有多个评级。我想按以下顺序获得评分，

首先检查 District、Ranch 和 Field - 如果针对此组合的评级存在，则获取它，如果评级不存在则获取它，然后检查 District 和 Ranch 组合，如果针对此组合存在评级，则获取它，如果评级不存在存在然后检查地区位置以获得评级。

**注意**：

第 1 周可以存在多个评级，即可以存在于 District 和 Ranch，也可以存在于 District、Ranch 和 Field 等等......

我需要每周明智地获得记录，

```
SELECT *
FROM #tmpGroundPreferenceProfile GPP
INNER JOIN #tmpGroundPreferenceLocations GPL    
ON GPL.GroundPreferenceProfileId = GPP.Id
INNER JOIN #tmpGroundPreferenceRatings GPR
ON GPR.GroundPreferenceLocationId = GPL.Id
WHERE GPP.Id = 1    
AND GPR.[Week] IN (1,3,4) 
```

非常感谢你们的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:54:06.387

正如其他人所指出的，您的问题不清楚。无论如何，我拍了一张，有时这可以帮助澄清事情。

```
SELECT *
FROM (

  SELECT ROW_NUMBER() OVER (PARTITION BY GPR.Week
                        ORDER BY GPL.DistrictId,
                          GPL.RanchID DESC,
                          GPL.FieldID DESC
                          ) AS RN,
      GPP.ID,
      GPL.DistrictId,
      GPL.RanchID,
      GPL.FieldID,
      GPR.Rating,
      GPR.Week
    FROM tmpGroundPreferenceProfile GPP
    JOIN tmpGroundPreferenceLocations GPL
    ON GPL.GroundPreferenceProfileId = GPP.Id
    JOIN tmpGroundPreferenceRatings GPR
    ON GPR.GroundPreferenceLocationId = GPL.Id
    WHERE GPP.Id = 1
 ) X
WHERE X.RN = 1
ORDER BY X.Week, X.districtid 
```

这给你的是每个地区和每周的第一次出现。如果同一地区、牧场、田地和周有多行，则顺序是任意的，因此您将得到任意行。

这是否接近您正在寻找的内容？

# iphone - 在 iOS 中通过 smtp 发送邮件？

> ID：13935374
> 
> 赞同：0
> 
> 时间：2012-12-18T14:45:12.213
> 
> 标签：iphone, ios, smtp

我一直在使用 SMTP 库[smtp](https://github.com/jetseven/skpsmtpmessage/blob/master/SMTPLibrary/SKPSMTPMessage.m)

但是这个库虽然有用，但在 arc 环境中使用时有些问题。在 arc 中使用库时，我在发送大图像时遇到了问题。

ARC中是否有其他选择？

# c# - 为什么我的 ASP.Net MVC4 WEBAPI ActionFilter 在运行时被忽略？

> ID：13935377
> 
> 赞同：6
> 
> 时间：2012-12-18T14:45:27.893
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在尝试使用**ActionFilter**属性，这样我就可以拦截**OnActionExecuting**事件并在我的 Web api 代码中进行令牌验证...下面是一些删除了我的安全性内容的代码（一个漂亮的样板代码，用于检查令牌是否在具有实体框架的数据库）：

```
public class TokenValidationFilterAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            var data = new ActionData();
            if (filterContext.HttpContext.Request.QueryString.AllKeys.Contains("token"))
            {
                using (var context = new GNCCustomers()) 
                {
                    data.GNCToken = context.Tokens.Where(t => t.GNCToken == filterContext.HttpContext.Request["token"]).SingleOrDefault();
                    if (data.GNCToken == null)
                    {
                        filterContext.Result = new HttpUnauthorizedResult("MissingOrInvalidToken") ;
                        return;
                    }
                }
                data.HttpVerb = filterContext.HttpContext.Request.HttpMethod;

                foreach (string item in filterContext.HttpContext.Request.QueryString)
                {
                    data.Params.Add(item, filterContext.HttpContext.Request.QueryString[item]);
                }
                data.Path = filterContext.RouteData.Values;

                filterContext.ActionParameters["actionData"] = data;
            }

            base.OnActionExecuting(filterContext);
        }

    } 
```

我只是将它应用于我的控制器上的一种操作方法，如下所示：

```
public class CustomerController : ApiController
    {
    [HttpPost]        
            [TokenValidationFilterAttribute]
            public HttpResponseMessage Create(ActionData actionData)
            {

                return Request.CreateResponse(HttpStatusCode.OK);
            }... 
```

所以，问题是，如果我在过滤器代码中放置一个断点，在第一行，我们甚至没有命中断点。我还添加了一些 Debug.Print() 存根来检查我的环境是否有任何问题......没什么......代码只是不运行。

所以，有人知道如何处理这个吗？？？我在这里检查解决方案变得疯狂，似乎这个 actionFilters 没有很好的记录。MSDN 中只有一页，我已经实现了，仅此而已……

谢谢！我真的很感激任何帮助。

问候...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T14:54:15.377

很可能你是从`System.Web.Mvc.ActionFilterAttribute`not from派生的`System.Web.Http.Filters.ActionFilterAttribute`。

第一个来自 ASP.NET MVC，第二个来自 ASP.NET Web API - 你想要第二个，因为你正在交付`ApiController`（所以你很可能在 ASP.NET MVC 应用程序中托管 ASP.NET Web API） .

# objective-c - 如何使用适用于 IOS 的 Linea-Pro SDK？

> ID：13935378
> 
> 赞同：17
> 
> 时间：2012-12-18T14:45:31.113
> 
> 标签：objective-c, ios, xcode4.5, linea-pro

有谁知道或有关于如何使用 linea-pro 在 xcode 中编写脚本的手册。

我已经在网上搜索并向无限外围设备寻求帮助，但没有回复。

我发现了一个“.a”和“.h”文件，它们看起来像是拥有所有授权等，但我不知道如何执行某些功能。

如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-14T11:08:16.473

**提供对 Linea 设备系列的访问。**

为了在您的程序中使用 Linea，必须执行几个步骤。这些步骤来自 2011 年，可能在 2017 年发生了变化，但出于历史目的在此处显示：

```
- Include LineaSDK.h and libdtdev.a in your project.
- Go to Frameworks and add ExternalAccessory framework
- Edit your program plist file, add new element and select 
  "Supported external accessory protocols" from the list, then add two items to it -
  ‘com.datecs.linea.pro.msr’ and ‘com.datecs.linea.pro.bar’
- Write code in MainViewController.m file to connect and retrieve barcode data. 
```

**1) 在 Classes 文件夹下的项目中包含“LineaSDK.h”和“libdtdev.a”。**

2017 更新：[从 developer.ipcmobile.com 下载最新的 DTDEVICES SDK](https://developer.ipcmobile.com/?__hstc=85308742.238f445824910b420a0ff358c139f2e7.1483709059764.1483709059764.1484143085578.2&__hssc=85308742.1.1484143085578&__hsfp=3090435354)。截至 2017 年 1 月，最新版本为 v2.01，支持 Linea Pro 7 以上的设备。

**2）在您的项目中“添加现有框架”。**

1.  在项目导航器中，选择您的项目
2.  选择你的目标。
3.  选择“构建阶段”选项卡
4.  打开“使用库链接二进制文件”扩展器
5.  点击“+”按钮
6.  选择“外部附件框架”
7.  将添加的框架拖放到“框架”组

**3) 编辑您的项目 .plist 文件**

```
<key>Supported external accessory protocols</key>
<value>
<array>
<string>com.datecs.linea.pro.msr</string>
<string>com.datecs.linea.pro.bar</string>
</array>
</value> 
```

**4) 在 MainViewController.m 文件中编写代码**

// 初始化 linea 类并连接它很重要

```
- (void)viewDidLoad
{
    // init linea class and connect it    
    linea =[Linea sharedDevice];
    [linea addDelegate:self];
    [linea connect];    

    [super viewDidLoad];
} 
```

// 成功读取barode数据后调用

```
-(void)barcodeData:(NSString *)barcode type:(int)type {    

     // You can use this data as you wish
     // Here I write barcode data into the console
     NSLog(@"Barcode Data: %@”, barcode);
} 
```

**注意：**将“LineaSDK.h”导入您的 MainViewController.h 并声明

```
Linea* linea; 
```

多变的。

**它工作得很好。**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-10T17:36:01.680

导入 .a 和 .h 文件

添加 ExternalAccessory.framework

打开 info.plist 文件作为源代码并添加以下行：

```
<key>UIBackgroundModes</key>
<array>
    <string>external-accessory</string>
</array>
<key>UISupportedExternalAccessoryProtocols</key>
<array>
    <string>com.datecs.linea.pro.msr</string>
    <string>com.datecs.linea.pro.bar</string>
    <string>com.datecs.printer.escpos</string>
    <string>com.datecs.iserial.communication</string>
    <string>com.datecs.pinpad</string>
</array> 
```

像这样添加`<DTDeviceDelegate>`到您的界面：

```
@interface ViewController : UIViewController <DTDeviceDelegate> 
```

在 ViewController 的 .h 文件中添加 DTDevices 对象

```
@interface ViewController : UIViewController <DTDeviceDelegate>
{
    DTDevices *scanner;
} 
```

在 ViewDidLoad 函数中，添加连接代码：

```
 scanner=[DTDevices sharedDevice];
[scanner addDelegate:self];
[scanner connect]; 
```

通过将此方法添加到您的代码来获取连接状态：

```
-(void)connectionState:(int)state {
    switch (state) {
    case CONN_DISCONNECTED:
               //Disconnected
               break;
    case CONN_CONNECTING:
        //Connecting
        break;
    case CONN_CONNECTED:
                 //Connected
                 break;
      }
   } 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-05T21:18:39.973

我假设您想要使用他们的 iPhone/iPod Touch 雪橇开发应用程序。最好的办法是查看他们的 SDK 中包含的示例 Xcode 项目。这将演示如何与雪橇连接，以及设置与硬件交互的不同选项，例如它应该寻找的条形码类型（如果您使用的是 2D 扫描仪），它应该发出的任何硬件声音， ETC。

他们的基本假设是您是一位经验丰富的 iOS 开发人员，并且您已准备好开始与他们的 SDK 集成。听起来你是 iOS 开发的新手，我鼓励你先体验一下，然后再做一些更高级的事情，比如与硬件外围设备交互。

在高层次上，您需要：

1.  创建一个新的 Xcode 项目并将它们的 .a 和 .h 文件放入您的项目中。
2.  导入几个必需的框架，我唯一记得的就是`ExternalAccessory.framework`.
3.  调用共享实例与硬件进行连接和交互。

# iphone - iphone以编程方式打开/关闭蓝牙

> ID：13935382
> 
> 赞同：0
> 
> 时间：2012-12-18T14:45:41.530
> 
> 标签：iphone, bluetooth

> **可能重复：**
> [有没有办法以编程方式打开/关闭 iPhone 中的蓝牙？](https://stackoverflow.com/questions/6594947/is-there-any-way-to-switch-on-off-bluetooth-in-iphone-programmatically)

有没有办法为 iPhone 切换蓝牙开/关进行编码，这对于 AppStore 来说是可以接受的？

我想在我的应用程序中打开/关闭蓝牙，但我听说 AppStore 拒绝为此目的使用私有框架的应用程序。有没有可以接受的方法来实现这一目标？如果可能的话，请给我一个指南/样本。

我可以添加为链接库的 CoreBluetooth.framework 是否适用于所有 iOS 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:53:44.490

不，没有办法。

您可以通过调用各种`GKSession`东西来创建对等网络，在代码中打开它，但那是 iOS 要求打开蓝牙作为该调用的结果。

但是你不能以一种可以接受的方式在你自己的代码中打开和关闭它

# java - MDB Maillistener @ActivationConfigProperty for SSL

> ID：13935389
> 
> 赞同：0
> 
> 时间：2012-12-18T14:46:00.800
> 
> 标签：java, email, ssl, pop3, message-driven-bean

我们有一个 MDB，它正在对来自电子邮件帐户的电子邮件进行评级，MDB 实现 MailListener 接口，我正在寻找一个通过 SSL 启用 POP3 的属性

我在xml中有这样的设置，在下面，我为端口和SSL添加了一个额外的激活配置属性......我已经用谷歌搜索了它但没有成功，有人可以帮忙吗？

我正在使用 jboss5.1, seam2

```
 <message-driven>
        <description>An MDB that accepts mail messages</description>
        <ejb-name>MailListenerMDB</ejb-name>
        <ejb-class>si.arctur.fourPmServices.scheduleJobs.emailListener.MailListenerMDB</ejb-class>
        <activation-config>
            <activation-config-property>
               <activation-config-property-name>userName</activation-config-property-name>
               <activation-config-property-value>******</activation-config-property-value>
            </activation-config-property>
            <activation-config-property>
               <activation-config-property-name>password</activation-config-property-name>
               <activation-config-property-value>********</activation-config-property-value>
            </activation-config-property>
            <activation-config-property>
               <activation-config-property-name>pollingInterval</activation-config-property-name>
               <activation-config-property-value>15000</activation-config-property-value>
            </activation-config-property>
            <activation-config-property>
               <activation-config-property-name>mailServer</activation-config-property-name>
               <activation-config-property-value>*****</activation-config-property-value>
            </activation-config-property>
            <activation-config-property>
               <activation-config-property-name>mailFolder</activation-config-property-name>
               <activation-config-property-value>INBOX</activation-config-property-value>
            </activation-config-property>
            <activation-config-property>
               <activation-config-property-name>storeProtocol</activation-config-property-name>
               <activation-config-property-value>pop3</activation-config-property-value>
            </activation-config-property>
        </activation-config>
</message-driven> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:08:31.703

我找到了您需要指定这些属性的解决方案

```
<activation-config-property>
               <activation-config-property-name>storeProtocol</activation-config-property-name>
               <activation-config-property-value>pop3s</activation-config-property-value>
            </activation-config-property>
            <activation-config-property>
               <activation-config-property-name>port</activation-config-property-name>
               <activation-config-property-value>995</activation-config-property-value>
            </activation-config-property>
            <activation-config-property>
               <activation-config-property-name>starttls</activation-config-property-name>
               <activation-config-property-value>true</activation-config-property-value>
            </activation-config-property> 
```

小心 POP3S 而不是 POP3 的协议

# shell - 在bash shell脚本中将字符串转换为字符串的小写部分

> ID：13935395
> 
> 赞同：4
> 
> 时间：2012-12-18T14:46:30.720
> 
> 标签：shell, uppercase

我有一个 file.txt 文件的每一行都是这样的：

```
ABLED   EY B AH L D
ABLER   EY B AH L ER 
```

我想要每行的第二部分：`EY B AH L D`或者`EY B AH L ER`，例如，小写，其余部分保持大写。我该怎么做？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T14:50:14.807

```
while read first second; do
    second=$(echo "$second" | tr [:upper:] [:lower:])
    printf '%s\t%s\n' "$first" "$second"
done < file.txt 
```

输出：

```
ABLED   ey b ah l d
ABLER   ey b ah l er 
```

* * *

无需调用即可在 KornShell、pdksh 或 Bash 中执行此操作的另外两种方法`tr`

在变量上设置“小写”标志（仅限 KornShell 和兼容的 shell）：

```
typeset -l second
while read first second; do
    printf '%s\t%s\n' "$first" "$second"
done < file.txt 
```

使用 Bash 的 case-modification 参数扩展修饰符（仅限 Bash！）：

```
while read first second; do
    printf '%s\t%s\n' "$first" "${second,,}"
done < file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:15:56.467

它可以通过 sed 使用以下令人难以置信的混淆脚本来完成：

```
sed -e 'h;s/ .*//;x;s/[^ ]* //;y/AZERTYUIOPQSDFGHJKLMWXCVBN/azertyuiopqsdfghjklmwxcvbn/;H;x;s/\n/ /' your_file 
```

**解释**：

脚本的第一部分 ( `h;s/ .*//;x;s/[^ ]* //`) 将 a 部分放在保持空间中第一个空格之前的行，并将该行的部分放在模式空间中的第一个空格之后：

*   `h`：复制保留空间中的实际行。
*   `s/ .*//`: 在模式空间中只保留第一个空格之前的字符。
*   `x`：切换保持和模式空间。
*   `s/[^ ]* //`: 在模式空间中只保留第一个空格之后的字符。

好的，现在我们在保持空间中有行的第 1 部分，在模式空间中有第 2 部分。我们需要将第二部分小写，所以我们使用`y/AZERTYUIOPQSDFGHJKLMWXCVBN/azertyuiopqsdfghjklmwxcvbn/`（是的，我有一个 AZERTY 键盘）。

然后，只需将文件的第一部分和第二部分一起取回：

*   `H`: 追加模式空间以保持空间。
*   `x`：交换模式空间和保持空间。
*   `s/\n/ /`：用空格替换命令`\n`的。`H`

我希望你不会对 sed 合成器感到厌恶 ;-)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:23:54.937

如果你知道你的文件在阅读和使用 bash 时不会改变：

```
paste -d " " <(cut -d " " -f 1 your_file) <(cut -d " " -f 2- your_file | tr "[:upper:]" "[:lower:]") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T19:34:52.123

如果您想要一个使用管道的解决方案（不是粘贴解决方案）并且比 sed 解决方案更容易理解，这是一个使用 awk 的解决方案：

```
awk -F "[ ]" '{str=$1;$1="";print str tolower($0)}' your_file 
```

字段分隔符不能简单地`" "`作为连续空格在这种情况下被视为单个分隔符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T11:02:30.867

即使您希望它在 Linux 平台上运行，也请在脚本的开头使用 #!/bin/ksh。这个 ksh 接受我们在 HpUx 或 Solaris 中使用的所有类型的排版变量。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-18T14:58:03.567

A Python script:

```
import sys
for l in sys.stdin.read().splitlines():
    try:
        head,rest = l.split(' ', 1)
        print head, rest.lower()
    except: print l 
```

Run it like this (assuming you save the script in a file called `filter.py`):

```
$ python filter.py < file.txt 
```

# magento - 如何设置快递费率和标准表费率以进行交付

> ID：13935399
> 
> 赞同：0
> 
> 时间：2012-12-18T14:46:55.230
> 
> 标签：magento, shipping

我正在使用 Magento 1.7，我对如何同时实现快递和标准快递选项感到困惑，因为两者都与 usps/usp 无关，请帮助我，这是我要配置的费率

```
1.UK Delivery Orders
1\.    Standard Deliveries Orders Over £50 Free
2\.    Express Deliveries Orders Over £50 Plus £6.95*
3\.    Standard Delivery Orders Under £50 £5.30
4\.    Express Deliveries Orders Under £50 Plus £6.95*
2\. EU Deliveries
1\.    Orders Over € 60 Free
2\.    Orders Under € 60 € 14.00
3\. Rest of Europe Deliveries
1\.    All Orders £8.00
4\. Rest of World
1\.    All Orders £15.00

* Order by 12pm today for delivery before 1.00pm tomorrow (Weekends and Bank Holidays excluded) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:21:16.877

我认为 Webshoppapps 模块是一个更好的选择，而且它是免费的。[http://www.magentocommerce.com/magento-connect/webshopapps-matrixrate-1-multiple-table-rates-extension-certified-bug-free.html](http://www.magentocommerce.com/magento-connect/webshopapps-matrixrate-1-multiple-table-rates-extension-certified-bug-free.html)

问题是开箱即用 Magento 没有针对一种情况提供多种运费的选项。这很容易解决。

我创建了一个 CSV 供您使用 Matrix Rates：

```
国家 地区/州城市 邮政编码 从邮政编码到订单小计 从订单小计到运费 交货类型
GBR * 0 50 5.3 标准交货
GBR * 50 99999 0 标准交货
GBR * 0 50 6.95 快递
GBR * 50 99999 6.95 快递
AUT * 0 60 14 欧洲航运
BEL * 0 60 14 欧洲航运
BGR * 0 60 14 欧洲航运
CYP * 0 60 14 欧洲航运
CZE * 0 60 14 欧洲航运
DEU * 0 60 14 欧洲航运
DNK * 0 60 14 欧洲航运
ESP * 0 60 14 欧洲航运
EST * 0 60 14 欧洲航运
FIN * 0 60 14 欧洲航运
FRA * 0 60 14 欧洲航运
GRC * 0 60 14 欧洲航运
HUN * 0 60 14 欧洲航运
IRL * 0 60 14 欧洲航运
ITA * 0 60 14 欧洲航运
LTU * 0 60 14 欧洲航运
LUX * 0 60 14 欧洲航运
LVA * 0 60 14 欧洲航运
MLT * 0 60 14 欧洲航运
NLD * 0 60 14 欧洲航运
POL * 0 60 14 欧洲航运
PRT * 0 60 14 欧洲航运
ROU * 0 60 14 欧洲航运
SVK * 0 60 14 欧洲航运
SVN * 0 60 14 欧洲航运
SWE * 0 60 14 欧洲航运
AUT * 60 99999 0 欧洲航运
BEL * 60 99999 0 欧洲航运
BGR * 60 99999 0 欧洲航运
CYP * 60 99999 0 欧洲航运
CZE * 60 99999 0 欧洲航运
DEU * 60 99999 0 欧洲航运
DNK * 60 99999 0 欧洲航运
ESP * 60 99999 0 欧洲航运
EST * 60 99999 0 欧洲航运
FIN * 60 99999 0 欧洲航运
FRA * 60 99999 0 欧洲航运
GRC * 60 99999 0 欧洲航运
HUN * 60 99999 0 欧洲航运
IRL * 60 99999 0 欧洲航运
ITA * 60 99999 0 欧洲航运
LTU * 60 99999 0 欧洲航运
LUX * 60 99999 0 欧洲航运
LVA * 60 99999 0 欧洲航运
MLT * 60 99999 0 欧洲航运
NLD * 60 99999 0 欧洲航运
POL * 60 99999 0 欧洲航运
PRT * 60 99999 0 欧洲航运
ROU * 60 99999 0 欧洲航运
SVK * 60 99999 0 欧洲航运
SVN * 60 99999 0 欧洲航运
SWE * 60 99999 0 欧洲航运
ABW * 0 99999 15 全球配送
AFG * 0 99999 15 全球配送
AGO * 0 99999 15 全球配送
AIA * 0 99999 15 全球交付
ALA * 0 99999 15 全球交付
ALB * 0 99999 15 全球配送
AND * 0 99999 15 全球交付
ANT * 0 99999 15 全球配送
ARE * 0 99999 15 全球配送
ARG * 0 99999 15 全球交付
ARM * 0 99999 15 全球交付
ASM * 0 99999 15 全球交付
ATA * 0 99999 15 全球交付
ATF * 0 99999 15 全球交付
ATG * 0 99999 15 全球交付
澳大利亚 * 0 99999 15 全球交付
AZE * 0 99999 15 全球配送
BDI * 0 99999 15 全球交付
BEN * 0 99999 15 全球配送
BFA * 0 99999 15 全球交付
BGD * 0 99999 15 全球配送
BHR * 0 99999 15 全球交付
BHS * 0 99999 15 全球交付
BIH * 0 99999 15 全球交付
BLM * 0 99999 15 全球交付
BLR * 0 99999 15 全球配送
BLZ * 0 99999 15 全球配送
BMU * 0 99999 15 全球交付
BOL * 0 99999 15 全球交付
胸罩 * 0 99999 15 全球配送
BRB * 0 99999 15 全球配送
BRN * 0 99999 15 全球交付
BTN * 0 99999 15 全球配送
BVT * 0 99999 15 全球交付
BWA * 0 99999 15 全球交付
CAF * 0 99999 15 全球配送
CAN * 0 99999 15 全球配送
CCK * 0 99999 15 全球配送
CHE * 0 99999 15 全球配送
CHL * 0 99999 15 全球配送
CHN * 0 99999 15 全球配送
CIV * 0 99999 15 全球交付
CMR * 0 99999 15 全球交付
COD * 0 99999 15 全球配送
COG * 0 99999 15 全球交付
COK * 0 99999 15 全球配送
COL * 0 99999 15 全球交付
COM * 0 99999 15 全球交付
CPV * 0 99999 15 全球交付
CRI * 0 99999 15 全球交付
CUB * 0 99999 15 全球配送
CXR * 0 99999 15 全球配送
CYM * 0 99999 15 全球配送
DJI * 0 99999 15 全球发货
DMA * 0 99999 15 全球交付
DOM * 0 99999 15 全球交付
DZA * 0 99999 15 全球配送
ECU * 0 99999 15 全球交付
EGY * 0 99999 15 全球交付
ERI * 0 99999 15 全球交付
ESH * 0 99999 15 全球交付
ETH * 0 99999 15 全球交付
FJI * 0 99999 15 全球配送
FLK * 0 99999 15 全球配送
FRO * 0 99999 15 全球配送
FSM * 0 99999 15 全球交付
GAB * 0 99999 15 全球交付
GEO * 0 99999 15 全球交付
GGY * 0 99999 15 全球配送
GHA * 0 99999 15 全球交付
GIB * 0 99999 15 全球交付
GIN * 0 99999 15 全球配送
GLP * 0 99999 15 全球交付
专线小巴 * 0 99999 15 全球配送
GNB * 0 99999 15 全球配送
GNQ * 0 99999 15 全球配送
GRD * 0 99999 15 全球配送
GRL * 0 99999 15 全球配送
GTM * 0 99999 15 全球配送
GUF * 0 99999 15 全球配送
GUM * 0 99999 15 全球配送
GUY * 0 99999 15 全球配送
HKG * 0 99999 15 全球配送
HMD * 0 99999 15 全球配送
HND * 0 99999 15 全球配送
HRV * 0 99999 15 全球交付
HTI * 0 99999 15 全球交付
IDN * 0 99999 15 全球交付
IMN * 0 99999 15 全球交付
IND * 0 99999 15 全球交付
物联网 * 0 99999 15 全球交付
IRN * 0 99999 15 全球交付
IRQ * 0 99999 15 全球交付
ISL * 0 99999 15 全球交付
ISR * 0 99999 15 全球交付
JAM * 0 99999 15 全球配送
JEY * 0 99999 15 全球配送
JOR * 0 99999 15 全球交付
JPN * 0 99999 15 全球配送
KAZ * 0 99999 15 全球配送
KEN * 0 99999 15 全球配送
KGZ * 0 99999 15 全球配送
KHM * 0 99999 15 全球配送
KIR * 0 99999 15 全球配送
KNA * 0 99999 15 全球配送
韩国 * 0 99999 15 全球交付
KWT * 0 99999 15 全球配送
LAO * 0 99999 15 全球配送
LBN * 0 99999 15 全球配送
LBR * 0 99999 15 全球配送
LBY * 0 99999 15 全球配送
LCA * 0 99999 15 全球交付
LIE * 0 99999 15 全球配送
LKA * 0 99999 15 全球配送
LSO * 0 99999 15 全球交付
MAC * 0 99999 15 全球交付
MAF * 0 99999 15 全球交付
3 月 * 0 99999 15 全球交付
MCO * 0 99999 15 全球配送
MDA * 0 99999 15 全球交付
MDG * 0 99999 15 全球交付
MDV * 0 99999 15 全球交付
墨西哥 * 0 99999 15 全球交付
MHL * 0 99999 15 全球配送
MKD * 0 99999 15 全球配送
MLI * 0 99999 15 全球交付
MMR * 0 99999 15 全球配送
MNE * 0 99999 15 全球交付
MNG * 0 99999 15 全球配送
MNP * 0 99999 15 全球交付
MOZ * 0 99999 15 全球配送
捷运 * 0 99999 15 全球送货
MSR * 0 99999 15 全球交付
MTQ * 0 99999 15 全球交付
MUS * 0 99999 15 全球配送
MWI * 0 99999 15 全球交付
MYS * 0 99999 15 全球配送
MYT * 0 99999 15 全球配送
NAM * 0 99999 15 全球配送
NCL * 0 99999 15 全球配送
NER * 0 99999 15 全球交付
NFK * 0 99999 15 全球配送
NGA * 0 99999 15 全球交付
网卡 * 0 99999 15 全球交付
NIU * 0 99999 15 全球配送
NOR * 0 99999 15 全球交付
NPL * 0 99999 15 全球交付
NRU * 0 99999 15 全球交付
NZL * 0 99999 15 全球配送
OMN * 0 99999 15 全球交付
PAK * 0 99999 15 全球配送
PAN * 0 99999 15 全球配送
PCN * 0 99999 15 全球交付
PER * 0 99999 15 全球交付
PHL * 0 99999 15 全球配送
PLW * 0 99999 15 全球交付
PNG * 0 99999 15 全球配送
PRI * 0 99999 15 全球交付
PRK * 0 99999 15 全球配送
PRY * 0 99999 15 全球交付
PSE * 0 99999 15 全球交付
PYF * 0 99999 15 全球配送
QAT * 0 99999 15 全球交付
REU * 0 99999 15 全球交付
RUS * 0 99999 15 全球交付
RWA * 0 99999 15 全球交付
SAU * 0 99999 15 全球配送
SDN * 0 99999 15 全球交付
SEN * 0 99999 15 全球配送
SGP * 0 99999 15 全球配送
SGS * 0 99999 15 全球配送
SHN * 0 99999 15 全球配送
澳博 * 0 99999 15 全球配送
SLB * 0 99999 15 全球配送
SLE * 0 99999 15 全球交付
SLV * 0 99999 15 全球配送
SMR * 0 99999 15 全球配送
SOM * 0 99999 15 全球交付
SPM * 0 99999 15 全球交付
SRB * 0 99999 15 全球交付
STP * 0 99999 15 全球交付
SUR * 0 99999 15 全球交付
SWZ * 0 99999 15 全球配送
SYC * 0 99999 15 全球配送
SYR * 0 99999 15 全球交付
TCA * 0 99999 15 全球交付
TCD * 0 99999 15 全球配送
TGO * 0 99999 15 全球配送
THA * 0 99999 15 全球交付
TJK * 0 99999 15 全球配送
TKL * 0 99999 15 全球配送
TKM * 0 99999 15 全球配送
TLS * 0 99999 15 全球交付
TON * 0 99999 15 全球交付
TTO * 0 99999 15 全球交付
TUN * 0 99999 15 全球配送
TUR * 0 99999 15 全球交付
TUV * 0 99999 15 全球交付
TWN * 0 99999 15 全球配送
TZA * 0 99999 15 全球配送
UGA * 0 99999 15 全球交付
UKR * 0 99999 15 全球配送
UMI * 0 99999 15 全球配送
URY * 0 99999 15 全球配送
美国 * 0 99999 15 全球交付
UZB * 0 99999 15 全球配送
增值税 * 0 99999 15 全球交付
VCT * 0 99999 15 全球配送
VEN * 0 99999 15 全球配送
VGB * 0 99999 15 全球交付
VIR * 0 99999 15 全球交付
VNM * 0 99999 15 全球交付
VUT * 0 99999 15 全球交付
WLF * 0 99999 15 全球配送
WSM * 0 99999 15 全球配送
YEM * 0 99999 15 全球配送
ZAF * 0 99999 15 全球配送
ZMB * 0 99999 15 全球发货
ZWE * 0 99999 15 全球配送

```

让我知道您是否需要更多帮助？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:07:48.800

对于自定义交付选项，最佳解决方案是使用 Owebia SHiping 2。 [http://www.magentocommerce.com/magento-connect/owebia-shipping-2.html](http://www.magentocommerce.com/magento-connect/owebia-shipping-2.html)

由于这个有用的模块，我的商店启用了 85 种送货方式。

问候 ：

# git - 如何将 GitFlow 集成到现有项目中？

> ID：13935401
> 
> 赞同：2
> 
> 时间：2012-12-18T14:47:01.903
> 
> 标签：git, git-flow

我需要将现有项目集成到 GitFlow 分支模型中。到目前为止，我看到的所有指南都以明确的回购为基础。是否可以在现有 Git 存储库上运行 GitFlow 并保留当前历史记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:28:46.923

绝对地。它只是一个分支模型，它不会改变过去。如果可能的话，我会确保你的源库是稳定的。如果您在发布后立即执行此操作，那就太好了，它可能会使事情变得更清晰。

但是你甚至可以让一些人使用 git flow 而其他人不使用。它破坏了分支模型的纯粹性，但不会改变 git 存储库。

# css - SASS 中的 ZEN Grid 提供了很多 CSS

> ID：13935402
> 
> 赞同：1
> 
> 时间：2012-12-18T14:47:04.043
> 
> 标签：css, grid, sass, zen

我在我的项目中使用了 SASS 的 ZEN Grid 系统。我想要一个简单的 12 列 960 网格。

我使用这段代码：

```
$legacy-support-for-ie6: false;
$legacy-support-for-ie7: false;
@import "zen";

$zen-column-count: 12;
$zen-gutter-width: 20px;

.row {
    @include zen-grid-container;
}

.col-6 {
    @include zen-clear();
    @include zen-grid-item(4, 1);
} 
```

但现在问题来了。现在`.col-6`得到很多 CSS。ZEN Grids 给`.col-6`类这个 CSS：

```
clear: left;
float: left;
width: 33.33333%;
margin-left: 0%;
margin-right: -33.33333%;
padding-left: 10px;
padding-right: 10px;
-moz-box-sizing: border-box;
-webkit-box-sizing: border-box;
-ms-box-sizing: border-box;
box-sizing: border-box;
word-wrap: break-word; 
```

如何删除清除、边距、框大小和所有 CSS。我只想要网格的简单 CSS 属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:32:50.023

来自混合： [https](https://github.com/JohnAlbin/compass-zen-grids/blob/master/stylesheets/zen/_grids.scss#L170)`clear` : //github.com/JohnAlbin/compass-zen-grids/blob/master/stylesheets/zen/_grids.scss#L170`zen-clear()`

如果您查看源代码，则`zen-grid-item`mixin 有其他参数（https://github.com/JohnAlbin/compass-zen-grids/blob/master/stylesheets/zen/_grids.scss#L71），这将允许您关闭`box-sizing`：

```
@include zen-grid-item(4, 1, $box-sizing: content-box); 
```

其他属性更难删除。如果一切都失败了，你可以用你自己的一个来覆盖 Zen 的 mixin。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:08:35.800

Zen Grid 正在使用 Compass，它正在为您创建所有这些浏览器前缀，以便所有浏览器看起来都相似。但你是对的，这会使 CSS 变得混乱。值得庆幸的是，它们具有默认的布尔变量，您可以覆盖它们，以便您将其关闭。

添加并将这些中的任何一个或全部设置为 false 以删除额外的前缀：

```
$experimental-support-for-mozilla : true !default;
$experimental-support-for-webkit : true !default;
$support-for-original-webkit-gradients : true !default;
$experimental-support-for-opera : true !default;
$experimental-support-for-microsoft : true !default;
$experimental-support-for-khtml : true !default; 
```

参考从 compass-style.org[的 Compass 样式表中删除供应商前缀](http://compass-style.org/help/tutorials/exclude_vendor_prefixes/)

# php - 多张图片上传PHP，循环？

> ID：13935405
> 
> 赞同：-1
> 
> 时间：2012-12-18T14:47:09.350
> 
> 标签：php, mysql, pdo

我试图将多张图片上传到我的服务器，如果上传一张图片，我有以下工作，只是我不确定下一步要去哪里？

我有一个提交 3 张图片的 POST 表单，以下仅上传第一张，我需要为每张图片创建一个 while 循环吗？

到目前为止，我已经写...

```
 $allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . date('U')."-".$_FILES["file"]["name"]);  // add a unique string to the uploaded filename so that it is unique.
      echo "Stored in: " . "upload/" . date('U')."-".$_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";

} 
```

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:52:01.033

如果你想使用你的脚本，你可以这样做：

```
for($i = 0; $i < 3; $i++) {
 $aFile = $_FILES['file'][$i];

 // your code ($_FILES['file']['tmp_name'] should be addressed like $aFile['tmp_name'] and so on..
} 
```

# sql - 在 select 语句中使用 > with where 子句

> ID：13935408
> 
> 赞同：0
> 
> 时间：2012-12-18T14:47:15.513
> 
> 标签：sql, select, where

我有这个查询：

```
Select * from table_name where column_name > 'a' 
```

我希望结果不应该包含以“a”开头的名称，但确实如此。此查询如何过滤结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:58:01.870

Using the collating sequence of the column `column_name`, it returns all rows that where the column_name value is greater than 'a'. This would include 'aa' and 'aaa' for instance. It would not include 'a'.

The most common collating sequence is the ASCII ordering. In this ordering, the 'a' comes after all capital letters. So this would return only values starting with 'a' plus some other character and greater through 'z' and including '{', '}', and '~'.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T09:30:56.767

试试这个以避免列的第一个字母

```
Select * from table_name where column_name not like 'a%' 
```

这是我在参数上尝试的

```
Declare @strings varchar(50)
Select @strings ='ABCDEFG'
Select @strings where @strings not like 'a%' 
```

# magento - 在前端显示 magento 1.7 中获取新的运输标签

> ID：13935411
> 
> 赞同：0
> 
> 时间：2012-12-18T14:47:22.810
> 
> 标签：magento, magento-1.7

我正在尝试添加店内取货选项，但仅适用于两个地点。我在管理后端为这两个创建了一个选项卡（我复制了免费送货方式并将其重命名为 system.xml 中的 instore 并更改了 config.xml 以添加 instore 部分），但我只能正确显示一种方法（freeshipping ）。当我启用免费送货方式和店内方式时，我得到两份免费送货。当我只启用 instore 方法时，我什么也得不到。我需要调整什么来显示两个单独的选项？

**编辑**我在文件中找到了提货运输方式，但它在管理部分没有激活，所以如果我能做到的话，启用这将是另一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:03:45.363

如果您想要自定义运输选项，我建议使用 Owebia Shipping2 扩展 [http://www.magentocommerce.com/magento-connect/owebia-shipping-2.html](http://www.magentocommerce.com/magento-connect/owebia-shipping-2.html)

如果此解决方案不符合您的需求，请提供您放入 system.xml 文件的代码部分，我们将尝试更正它；）

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:17:48.783

为了完成这项任务，我最终在一个地点使用了免费送货选项，并发现了一个未使用的店内取货页面。经过一些简单的修改后，我能够同时拥有这两种选择。

# sql - SQL 中的平均值和大小写

> ID：13935413
> 
> 赞同：0
> 
> 时间：2012-12-18T14:47:31.190
> 
> 标签：sql, sql-server, sql-server-2008, case, average

我正在尝试生成报告，但以下代码没有产生所需的结果，这给了我 2 行而不是 1 行。

ScoreTypeID 的值可以是 22、52、3 或 4。如果是 22 或 52，我需要平均值，如果不是，我需要显示 0。知道可能是什么问题吗？谢谢。

```
 CASE WHEN FAS1.ScoreTypeID = 22 THEN avg(fas1.totalscore)  
       WHEN FAS1.ScoreTypeID = 52 THEN avg(fas1.totalscore)   ELSE 0    
  END  AS   'Total Score', 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:49:18.693

我认为在您的完整查询中，您缺少该`GROUP BY`子句，例如

```
SELECT ...
FROM   ....
WHERE   ..
GROUP BY FAS1.ScoreTypeID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:02:57.777

要将其保持为您选择的格式，您可以使用：

```
CASE WHEN FAS1.ScoreTypeID IN (22,52) THEN avg(fas1.totalscore) ELSE 0
  END  AS   'Total Score', 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:54:17.777

我认为这就是你想要的：

```
 coalesce(avg(CASE WHEN FAS1.ScoreTypeID in (22, 52) THEN fas1.totalscore end), 0) AS   'Total Score' 
```

这取分数为 22 或 52 时的平均值。如果不存在任何值，则返回 NULL。合并将 NULL 变为 0。

# c++ - 如何在基于非 MFC 的应用程序中创建新窗口/对话框

> ID：13935415
> 
> 赞同：0
> 
> 时间：2012-12-18T14:47:41.160
> 
> 标签：c++, visual-c++

我正在尝试做一件微不足道的事情：

*   创建主窗口
*   将按钮添加到窗口
*   创建第二个窗口对话框
*   按下按钮后，打开第二个窗口对话框

`CDialog`我看到很多关于如何创建新对话框以及如何基于`Base class "CDialog" not found in project`. 我想这是因为我没有使用 MFC。

因此我的问题是：如何从现有窗口打开第二个窗口。这不可能那么难，对吧？

**编辑**我正在使用标准的 win32 windows 编程 api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:51:28.823

创建对话框的一种非常舒适的方法是使用免费且占用空间小的[WTL 。](http://wtl.sourceforge.net/)它允许您在仅包含标题后进行窗口编程。

# delphi - 如何确定用户帐户是否是 AD 组的（间接）成员？

> ID：13935425
> 
> 赞同：8
> 
> 时间：2012-12-18T14:48:04.803
> 
> 标签：delphi, active-directory, delphi-2007

如何确定用户帐户是否是 AD 组的成员，尤其是当用户不是该组的直接成员时

**一个例子：**

*   user1 是 group1 的成员
*   group1 是 group2 的成员
*   （虚构的）函数调用的结果`IsUserMemberOf('user1', 'group2')`应该是**TRUE**

对于 .NET，有一个解决方案：

```
static bool IsUserMemberOf(string userName, string groupName)
{
    using (var ctx = new PrincipalContext(ContextType.Domain))
    using (var groupPrincipal = GroupPrincipal.FindByIdentity(ctx, groupName))
    using (var userPrincipal = UserPrincipal.FindByIdentity(ctx, userName))
    {
        return userPrincipal.IsMemberOf(groupPrincipal);
    }
} 
```

我怎样才能用 Delphi (Delphi-2007) 做到这一点？

**解决方案：**

我接受 Remko 的回答，但是因为他的代码在 Delphi-2007 下不起作用（一些 String/WideString 问题），这是我正在运行的 D2007 版本：

```
unit Unit1;

interface

uses  // Jedi ApiLib
  SysUtils, Classes, Windows, JwaActiveDs, JwaAdsTlb, JwaNative, JwaWinNT, JwaWinBase,
  JwaNtSecApi, JwaNtStatus,  JwaWinType;    

type
  // Some Helper Types
  TSidArray = array of PSID;
  PSidArray = ^TSidArray;

  TAdsValueArray = array[0..ANYSIZE_ARRAY-1] of ADSVALUE;
  PAdsValueArray = ^TAdsValueArray;

  TLsaTranslatedNameArray = array[0..ANYSIZE_ARRAY-1] of LSA_TRANSLATED_NAME;
  PLsaTranslatedNameArray = ^TLsaTranslatedNameArray;

  function GetPolicyHandle(const Computer: WideString=''): PLSA_HANDLE;
  function GetGroupMembership(const AdsPath: WideString; var Groups: TStringList): Boolean;

implementation

function GetPolicyHandle(const Computer: WideString=''): PLSA_HANDLE;
var
  ObjectAttributes: LSA_OBJECT_ATTRIBUTES;
  lusSystemName: LSA_UNICODE_STRING;
  nts: NTSTATUS;
  dwError: DWORD;
begin
  ZeroMemory(@ObjectAttributes, SizeOf(ObjectAttributes));

  RtlInitUnicodeString(@lusSystemName, PWideChar(Computer));

  nts := LsaOpenPolicy(@lusSystemName, ObjectAttributes,  POLICY_LOOKUP_NAMES,
    Pointer(Result));

  if nts <> STATUS_SUCCESS then
  begin
    dwError := LsaNtStatusToWinError(nts);
    raise EOSError.Create(SysErrorMessage(dwError));
  end;
end;

function GetGroupMembership(const AdsPath: WideString; var Groups: TStringList): Boolean;
const
  Username: PChar = 'Administrator';
  Password: PChar = 'password';
var
  hr: HRESULT;
  nts: NTSTATUS;
  PolicyHandle: PLSA_HANDLE;
  DirObject: IDirectoryObject;
  Domains: PLSA_REFERENCED_DOMAIN_LIST;
  Names: PLsaTranslatedNameArray;
  SidArray: TSidArray;
  Attributes: array of PChar;
  AdValue: PAdsValueArray;
  AdAttrInfo: PADS_ATTR_INFO;
  dwNumAttributes: DWORD;
  i: Integer;
  s: WideString;
begin
  Result := False;

  Assert(Assigned(Groups));

  // Get Lsa Policy Handle
  PolicyHandle := GetPolicyHandle;

  try
    // Open AD object, note that I am using username, password because I am
    // connecting from a machine that's not a domain member.
    // I am also passing the ADS_SERVER_BIND flag because I am directly
    // connecting to a specific Domain Controller
    hr := ADsOpenObject(PWideChar(AdsPath), Username, Password, 
      ADS_SERVER_BIND or ADS_SECURE_AUTHENTICATION, IID_IDirectoryObject,
        Pointer(DirObject));
    if Failed(hr) then
      Exit;

    // Attribute array
    SetLength(Attributes, 1);
    s := 'tokenGroups';
    Attributes[0] := @s[1];

    hr := DirObject.GetObjectAttributes(@Attributes[0], Length(Attributes), AdAttrInfo, dwNumAttributes);
    if Failed(hr) then
      Exit;

    // Setup an Array for the PSID's
    SetLength(SidArray, AdAttrInfo^.dwNumValues);
    AdValue := PAdsValueArray(AdAttrInfo^.pADsValues);

    for i := 0 to AdAttrInfo^.dwNumValues-1 do
    begin
      // Copy Pointer to Array
      Assert(AdValue^[i].OctetString.dwLength > 0);
      SidArray[i] := PSid(AdValue^[i].OctetString.lpValue);
    end;

    nts := LsaLookupSids(PolicyHandle, Length(SidArray), @SidArray[0], Domains, PLSA_TRANSLATED_NAME(Names));
    if nts >= STATUS_SUCCESS then
    begin

      for i := 0 to AdAttrInfo^.dwNumValues - 1 do
      begin
        SetLength(s, Names[i].Name.Length div SizeOf(WideChar));
        CopyMemory(@s[1], Names[i].Name.Buffer, Names[i].Name.Length);
        Groups.Add(s);
      end;

      // even if nts returns STATUS_NONE_MAPPED or STATUS_SOME_NOT_MAPPED we
      // must Free the Mem!
      LsaFreeMemory(Names);
      LsaFreeMemory(Domains);

      Result := True;
    end;

     FreeAdsMem(AdAttrInfo);

  finally
    // Close the Lsa Policy Handle
    LsaClose(PolicyHandle);
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:17:02.533

[tokenGroups](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680275%28v=vs.85%29.aspx)属性包含用户作为直接或间接成员的所有组的 SID 数组。[LsaLookupSids](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721799%28v=vs.85%29.aspx)可用于在一次调用中将一组 SID 转换为名称。

**示例代码：**

```
uses  // Jedi ApiLib
  JwaActiveDs, JwaAdsTlb, JwaNative, JwaNtSecApi, JwaNtStatus, JwaWinType;

type
  // Some Helper Types
  TSidArray = array of PSID;
  PSidArray = ^TSidArray;

  TAdsValueArray = array[0..ANYSIZE_ARRAY-1] of ADSVALUE;
  PAdsValueArray = ^TAdsValueArray;

  TLsaTranslatedNameArray = array[0..ANYSIZE_ARRAY-1] of LSA_TRANSLATED_NAME;
  PLsaTranslatedNameArray = ^TLsaTranslatedNameArray;

function GetPolicyHandle(const Computer: String=''): PLSA_HANDLE;
var
  ObjectAttributes: LSA_OBJECT_ATTRIBUTES;
  lusSystemName: LSA_UNICODE_STRING;
  nts: NTSTATUS;
  dwError: DWORD;
begin
  ZeroMemory(@ObjectAttributes, SizeOf(ObjectAttributes));

  RtlInitUnicodeString(@lusSystemName, PChar(Computer));

  nts := LsaOpenPolicy(@lusSystemName, ObjectAttributes,  POLICY_LOOKUP_NAMES,
    Pointer(Result));

  if nts <> STATUS_SUCCESS then
  begin
    dwError := LsaNtStatusToWinError(nts);
    raise EOSError.Create(SysErrorMessage(dwError));
  end;
end;

function GetGroupMembership(const AdsPath: String;
  var Groups: TStringList): Boolean;
const
  Username: PChar = 'Administrator';
  Password: PChar = 'password';
var
  hr: HRESULT;
  nts: NTSTATUS;
  PolicyHandle: PLSA_HANDLE;
  DirObject: IDirectoryObject;
  Domains: PLSA_REFERENCED_DOMAIN_LIST;
  Names: PLsaTranslatedNameArray;
  SidArray: TSidArray;
  Attributes: array of PChar;
  AdValue: PAdsValueArray;
  AdAttrInfo: PADS_ATTR_INFO;
  dwNumAttributes: DWORD;
  i: Integer;
  s: String;
begin
  Result := False;

  Assert(Assigned(Groups));

  // Get Lsa Policy Handle
  PolicyHandle := GetPolicyHandle;

  try
    // Open AD object, note that I am using username, password because I am
    // connecting from a machine that's not a domain member.
    // I am also passing the ADS_SERVER_BIND flag because I am directly
    // connecting to a specific Domain Controller
    hr := ADsOpenObject(PChar(AdsPath), Username, Password,
      ADS_SERVER_BIND or ADS_SECURE_AUTHENTICATION, IID_IDirectoryObject,
      Pointer(DirObject));
    if Failed(hr) then
      Exit;

    // Attribute array
    SetLength(Attributes, 1);
    Attributes[0] := 'tokenGroups';

    hr := DirObject.GetObjectAttributes(@Attributes[0], Length(Attributes),
      PADS_ATTR_INFO(AdAttrInfo), dwNumAttributes);
    if Failed(hr) then
      Exit;

    // Setup an Array for the PSID's
    SetLength(SidArray, AdAttrInfo^.dwNumValues);
    AdValue := PAdsValueArray(AdAttrInfo^.pADsValues);

    for i := 0 to AdAttrInfo^.dwNumValues-1 do
    begin
      // Copy Pointer to Array
      Assert(AdValue^[i].OctetString.dwLength > 0);
      SidArray[i] := PSid(AdValue^[i].OctetString.lpValue);
    end;

    nts := LsaLookupSids(PolicyHandle, Length(SidArray), @SidArray[0], Domains,
      PLSA_TRANSLATED_NAME(Names));
    if nts >= STATUS_SUCCESS then
    begin

      for i := 0 to AdAttrInfo^.dwNumValues - 1 do
      begin
        SetLength(s, Names[i].Name.Length div SizeOf(Char));
        CopyMemory(@s[1], Names[i].Name.Buffer, Names[i].Name.Length);
        Groups.Add(s);
      end;

      // even if nts returns STATUS_NONE_MAPPED or STATUS_SOME_NOT_MAPPED we
      // must Free the Mem!
      LsaFreeMemory(Names);
      LsaFreeMemory(Domains);

      Result := True;
    end;

     FreeAdsMem(AdAttrInfo);

  finally
    // Close the Lsa Policy Handle
    LsaClose(PolicyHandle);
  end;
end; 
```

**使用示例：**

```
procedure TForm4.Button1Click(Sender: TObject);
var
  Groups: TStringList;
  bRes: Boolean;
  i: Integer;
begin
  Groups := TStringList.Create;
  Groups.Duplicates := dupIgnore;
  Groups.Sorted := True;

  try
    bRes := GetGroupMembership('LDAP://2003DC/CN=Administrator,CN=Users,DC=contoso,DC=com', Groups);

    if bRes then
    begin
      for i := 0 to Groups.Count - 1 do
      begin
        Memo1.Lines.Add(Groups[i]);
      end;
    end;

    Memo1.Lines.Add(Format('IsMemberOf Administrators: %s',
      [BoolToStr(Groups.IndexOf('Administrators') <> -1, True)]));
  finally
    Groups.Free;
  end;
end; 
```

# mysql - MySQL 触发器：IF ELSE 错误

> ID：13935426
> 
> 赞同：4
> 
> 时间：2012-12-18T14:48:05.257
> 
> 标签：mysql, sql, triggers

尝试执行第一个触发器，该触发器仅在数据是新数据时才应将一个表的值插入另一个表。下面是我的代码：

```
BEGIN
    DECLARE email VARCHAR(30);
   INSERT INTO data_audit SET data_audit_id = OLD.id;
   IF (NEW.email = OLD.email) THEN
    email = NULL;
   ELSE
    email = OLD.email;
   END IF;
   UPDATE corporate_audit SET email = email WHERE corporate_audit_id = last_insert_id();
END 
```

我收到以下错误：

**您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '= NULL; 附近使用的正确语法；其他电子邮件 = OLD.email；万一; UPDATE Corporate_audit SET ' 在第 5 行**

当我在没有任何 IF-THEN 块的情况下执行代码并存储 OLD.email 时，它只会在审计表中插入新 ID，但不会更新字段。请指导我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T14:51:39.783

你不见了`SET`

```
 IF (NEW.email = OLD.email) THEN
      SET email = NULL;
   ELSE
      SET email = OLD.email;
   END IF; 
```

# regex - 如何匹配正则表达式文字字符串'.*'

> ID：13935429
> 
> 赞同：-2
> 
> 时间：2012-12-18T14:48:15.473
> 
> 标签：regex, literals

我想知道如何匹配文字字符串' .* '？' .* ' 只是要搜索的字符串，在正则表达式中没有任何含义。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:49:15.467

您必须转义序列：

`\.\*`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:50:11.217

你将不得不逃避它

```
'\.\*' 
```

使用 C# 时，您应该考虑使用

```
Regex.Escape() 
```

在将外部输入用作正则表达式的一部分之前

# javascript - 猫鼬嵌入文档对象是猫鼬对象吗？

> ID：13935432
> 
> 赞同：3
> 
> 时间：2012-12-18T14:48:23.417
> 
> 标签：javascript, node.js, mongoose

我有以下代码片段，它们在项目中嵌入了注释

```
var CommentModel = new Schema({
  text: {type: String, required: true},
}, {strict: true})

CommentModel.options.toJSON = { transform: function(doc, ret, options){
  delete ret.__v;
  delete ret._id;
}}

Comment = mongoose.model('Comment', CommentModel);

var ItemModel = new Schema({
  name:        {type: String, required: true},
  comments:    [ Comment ]
}, {strict: true})

Item = mongoose.model('Item', ItemModel);

Item.findOne({}, function (err, item) {
  item.comments.forEach(function(o) {
    console.log(o.toJSON)
  })
}) 
```

但是，返回的结果对象数组似乎不是猫鼬对象，或者至少没有应用转换。我是否在某处遗漏了某些东西，或者猫鼬不支持此功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:00:16.400

你有几个问题：

`ItemModel`应该引用架构`CommentModel`，而不是`Comment`其架构中的模型：

```
var ItemModel = new Schema({
  name:        {type: String, required: true},
  comments:    [ CommentModel ]   // <= Here
}, {strict: true}) 
```

您需要调用`toJSON`您的`console.log`，而不是将函数作为参数传递：

```
Item.findOne({}, function (err, item) {
  item.comments.forEach(function(o) {
    console.log(o.toJSON())   // <= Here
  })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:04:35.580

您可以像这样定义模式方法：

```
CommentModel.methods.toJson = { ... }; 
```

稍后编辑：我指的是一种方法，而不是选项。您还可以在此方法中过滤某些数据，作为奖励:)

# c# - 使用 ValidationResult 验证 DateTime

> ID：13935433
> 
> 赞同：0
> 
> 时间：2012-12-18T14:48:27.137
> 
> 标签：c#, silverlight, validation, xaml

我正在尝试验证我的 DateTime 对象，尽管我似乎无法让它与 ValidationResult 一起使用。我可以为 int 和 Strings 做到这一点，但它为什么不适用于 DateTime？

```
 [Required]
    [CustomValidation(typeof(DateValidator), "CrossValidateFirstDateWithSecondDate")]
    public DateTime ActiveOn { get; set; }

    [Required]
    [CustomValidation(typeof(DateValidator), "CrossValidateSecondDateWithFirstDate")]
    public DateTime? ExpiresOn { get; set; } 
```

编辑：它没有在我的 DateValidator 中达到我的断点，所以什么也没有发生:(

**日期验证器**

```
 using System.ComponentModel.DataAnnotations;
        using System;

        namespace Fsc.Feenics.Clients.Silverlight2.Web.Models.Shared
        {
            public class DateValidator
            {
                public static ValidationResult CrossValidateFirstDateWithSecondDate(DateTime date, ValidationContext context)
                {
                    var cardAssignmentInfo = context.ObjectInstance as CardAssignmentInfo;
                    if (cardAssignmentInfo.ExpiresOn.HasValue == false) return ValidationResult.Success;
                    if (cardAssignmentInfo == null) return ValidationResult.Success;
                    return ValidateFirstLessThanLast(date, cardAssignmentInfo.ExpiresOn.Value);
                }

                public static ValidationResult CrossValidateSecondDateWithFirstDate(DateTime? date, ValidationContext context)
                {
                    var cardAssignmentInfo = context.ObjectInstance as CardAssignmentInfo;
                    if (date.HasValue == false) return ValidationResult.Success;
                    if (cardAssignmentInfo == null) return ValidationResult.Success;
                    return ValidateFirstLessThanLast(cardAssignmentInfo.ActiveOn, date.Value);
                }

                private static ValidationResult ValidateFirstLessThanLast(DateTime firstDate, DateTime? secondDate)
                {
                    return firstDate <= secondDate.Value ? ValidationResult.Success : new ValidationResult("First number in range must be less than or equal to last number in range", new string[] { "ActiveOn", "ExpiresOn" });
                }
            }
        } 
```

编辑：我的老板说我们使用“InvokeOperation”和 RIA 服务将一个大对象中的数据发送到服务器，然后发送到我们的数据库。

编辑：即使我使它不可为空，它也不会达到断点

# iphone - ios exportAsynchronouslyWithCompletionHandler NSErrorFailingURLKey

> ID：13935435
> 
> 赞同：0
> 
> 时间：2012-12-18T14:48:29.913
> 
> 标签：iphone, ios, cocoa-touch, avassetexportsession

我正在使用 AVAssetExportSession 和 AVURLAsset 也导入了与之相关的库。

我的代码是

```
NSData *data = [NSData dataWithContentsOfURL:movieUrl];
            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

            NSString  *documentsDirectory = [paths objectAtIndex:0];
           NSString *path = [NSString stringWithFormat:@"%@/%@", documentsDirectory,@"capturedvideo1.MOV"];
            NSURL *url = [NSURL URLWithString:path];
            [data writeToFile:path atomically:YES];
                       //Delete the original asset
            NSArray *paths1 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

            NSString  *documentsDirectory1 = [paths1 objectAtIndex:0];
            NSString *path1 = [NSString stringWithFormat:@"%@/%@", documentsDirectory1,@"capturedvideo11.MOV"];
            NSURL *url1 = [NSURL URLWithString:path1];

            [self convertVideoToLowQuailtyWithInputURL:url outputURL:url1 handler:Nil];

- (void)convertVideoToLowQuailtyWithInputURL:(NSURL*)inputURL
                                   outputURL:(NSURL*)outputURL
                                     handler:(void (^)(AVAssetExportSession*))handler

{

    AVURLAsset *asset = [AVURLAsset URLAssetWithURL:inputURL options:nil];
    AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:asset presetName:AVAssetExportPresetMediumQuality];
    exportSession.outputURL = outputURL;
    if ([[UIApplication sharedApplication]canOpenURL:inputURL]){
        NSLog(@"open");
    }
    exportSession.outputFileType = AVFileTypeQuickTimeMovie;
    NSLog(@"%@", exportSession.error);
    [exportSession exportAsynchronouslyWithCompletionHandler:^(void)
     {
         if(exportSession.status != AVAssetExportSessionStatusCompleted){
             NSLog(@"%@", exportSession.error);
         }

     }];
} 
```

但我得到以下错误

```
 Error Domain=NSURLErrorDomain Code=-1 "unknown error" UserInfo=0x1da3aed0 
NSErrorFailingURLStringKey=/var/mobile/Applications/6EF91ECE-9E7A-4019-9F07-6DFE028EFFEA/Documents
/capturedvideo1.MOV, NSErrorFailingURLKey=/var/mobile/Applications/6EF91ECE-
9E7A-4019-9F07-6DFE028EFFEA/Documents/capturedvideo1.MOV, NSLocalizedDescription=unknown error, 
NSUnderlyingError=0x1da3ef70 "The operation couldn’t be completed. (OSStatus error -12935.)",
 NSURL=/var/mobile/Applications/6EF91ECE-9E7A-4019-9F07-6DFE028EFFEA/Documents/capturedvideo1.MOV} 
```

我想减小视频文件的大小。视频质量很高。

# android - 如何使 android 应用程序打开活动取决于应用程序启动时的条件

> ID：13935440
> 
> 赞同：0
> 
> 时间：2012-12-18T14:48:30.857
> 
> 标签：android, database

我是 android 编程新手 我正在开发数据库应用程序 我想知道如何根据条件结果使应用程序打开活动 应用程序将检查数据库。如果数据库已创建如果是，打开登录活动如果不是，打开创建用户配置文件活动

最好的萨利姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:57:01.683

您可以创建一个没有 UI 的初始活动来检查某些条件并根据条件立即启动另一个活动。

请参阅此答案以了解如何执行此操作：

[https://stackoverflow.com/a/4856629/1369222](https://stackoverflow.com/a/4856629/1369222)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:58:22.443

```
if(databasePresent()){
    Intent intent = new Intent(MainActivity.this, LoginActivity.class);
    startActivity(intent);
}else{
    Intent intent = new Intent(MainActivity.this, CreateProfileActivity.class);
    startActivity(intent);
} 
```

# c++ - std::array 类型的成员变量

> ID：13935441
> 
> 赞同：10
> 
> 时间：2012-12-18T14:48:35.827
> 
> 标签：c++, arrays, oop

如何为类型为`std::array<T, ?>`（未定义大小）的模板类 AClass 声明和设置成员变量？实际`std::array`是在构造函数中创建的，其中数组的大小是构造函数的参数。

在伪 C++ 代码中：

```
template <typename T> class AClass {

protected:
    std::array<T, ?>* array;

public:

    AClass(int n) {
        this->array = new std::array<T, n>;
    }

} 
```

正确的代码会是什么样子？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-18T14:50:40.773

不要`std::array`为此使用，使用`std::vector`. an 的大小`std::array`必须是编译时常量。如果要在构造函数中传递它，则需要使用`std::vector`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-18T14:50:59.417

> 实际`std::array`是在构造函数中创建的，其中**数组的大小是构造函数的参数。**

a 的大小`std::array`必须在编译时知道，在你的情况下它不是。

你必须使用`std::vector`这个。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T14:53:20.027

与使用在运行时真正定义大小的地方分开`std::vector`，您还可以选择在编译时指定大小（例如，根据您的问题设置为最大可能值）并将模板参数“传播”到您的类的客户端，即

```
template <typename T, std::size_t n> 
class AClass {
   protected:
       std::array<T, n> array;
   public:
       AClass() {
           // nothing to do
       }
} 
```

然后你像这样使用它：

```
AClass<int, 5> myAClass; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T14:55:43.613

You can't have `std::array` with undefined size.
Use `std::unique_ptr<T[]>` or `std::vector` instead.

# scripting - gdb 脚本：在选定的断点处执行命令

> ID：13935443
> 
> 赞同：37
> 
> 时间：2012-12-18T14:48:43.893
> 
> 标签：scripting, gdb, breakpoints

我想在 gdb 脚本中预定义一些断点，并在这些断点处调用一些特殊命令，然后自动继续执行程序。所以，理想情况下，我想要一个如下的 gdb 脚本：

```
b someFunction
...
if breakpoint from above reached do:
  print var1
  call someOtherFunction
  continue
done 
```

另外一个不幸的事实是，我不能依赖 python 接口来使用断点，因为我目前工作的服务器上的 gdb 版本太旧了！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-18T15:56:36.577

您应该看一下该`command`命令，它使您能够在命中断点时添加 gdb 命令。请参阅 gdb 手册的[断点命令列表](http://sourceware.org/gdb/current/onlinedocs/gdb/Break-Commands.html#Break-Commands)部分。

例如：

```
break someFunction
commands
print var1
end 
```

将在遇到断点时`someFunction`自动`print var1`.

# css - 水平放置 div 元素，而不是垂直放置

> ID：13935444
> 
> 赞同：14
> 
> 时间：2012-12-18T14:48:44.227
> 
> 标签：css, layout, html, positioning

我正在设计一个导航栏；其中的标签链接是由 CSS 形状制作的。为此，我`position: absolute`在子元素上使用了很多，并且我将父容器设置为`position: relative`. 我还为它们设置了一个硬的高度和足够的宽度，但它不起作用。即使使用`overflow: ..`. 无论如何，我的标签框都垂直放置。

在这一点上我不知道。

“navBox”类 div 中的 div 具有`position: absolute`.

单击[此处 (jsfiddle)](http://jsfiddle.net/qLKg7/1/)获取 HTML 和 CSS 代码，并观察输出结果。

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T15:56:45.950

你需要你的`.navBox`班级`display: inline-block`。自然地，`div`元素设置为显示块，默认情况下为元素提供 100% 的宽度。此外，您的列表项要`float: left`因为默认情况下垂直显示列表，左浮动允许您水平显示列表

更新 jsFiddle：http: [//jsfiddle.net/qLKg7/4/](http://jsfiddle.net/qLKg7/4/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T15:58:57.367

CSS：`display: inline`或`display:inline-block`.

# sql - 将数据类型 varchar 转换为 bigint 时出错（使用 REPLACE）

> ID：13935449
> 
> 赞同：0
> 
> 时间：2012-12-18T14:48:57.900
> 
> 标签：sql, sql-server-2008, tsql

我读过很多类似标题的帖子，但没有人回答我的问题。

我有一张包含人口数据列的表格。列中的数字以逗号分隔（诚然不是最佳实践，但此时我无法控制）。我需要删除逗号才能对数据进行一些数学运算，但我收到了标题中提到的错误。下面是前几行数据，后面是应该返回数据的查询：

```
POPULATION  (No column name)
 7,859,000     7859000
   575,660      575660
   818,000      818000
 5,254,000     5254000
73,751,000    73751000
38,610,000    38610000

SELECT [population],
       CONVERT(bigint,REPLACE(cri.[population],',',''))
FROM Country_Region_Info AS cri 
```

但是，该查询返回上述错误。我可以让它工作的唯一方法是用 numeric(20,0) 替换 bigint。我不应该那样做。bigint 的最大值远没有什么可接近的。没有小数。没有前导或尾随空格。这里发生了什么？

我不明白的另一件事：如果 SELECT 中包含 TOP 5，则查询的 bigint 版本返回结果，但 TOP 6 或更多错误。在另一台计算机上，它适用于 TOP 2，但 TOP 3 或更多错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:07:35.393

要调查问题，请执行以下操作：

```
select *
from Country_Region_Info cri
where isnumeric(REPLACE(cri.[population],',','')) = 0 or cri.population like '%.%' 
```

这将找到令人反感的数值。

要忽略这些值：

```
SELECT [population],
       (case when isnumeric(REPLACE(cri.[population],',','')) = 1 and cri.population not like '%.%'
             then CONVERT(bigint,REPLACE(cri.[population],',',''))
        end)
FROM Country_Region_Info AS cri 
```

您仍然可以使用其他数字格式（“7e6”），但这些可能不在您的数据中。

# php - 在 php 中使用嵌入的 html 计算单词

> ID：13935450
> 
> 赞同：4
> 
> 时间：2012-12-18T14:48:59.133
> 
> 标签：php

我有一些相当大的段落（5000-6000 字），其中包含文本和嵌入的 html 标签。我想把这个大段落分成 1500 个单词的块（忽略其中的 html 标记），即**1500 应该只包含实际单词而不包括任何标记单词。** 使用函数`strip_tags`我可以计算单词的数量（忽略 html 标记），但我无法弄清楚如何将它分成 1500 个单词的块（仍然包括 html 标记）。例如

```
This is <b> a </b> paragraph which <a href="#"> has some </a> some text to be broken in <h1> 5 words </h1>. 
```

结果应该是

```
1 = This is <b> a </b> paragraph which
2 = <a href="#"> has some </a> some text to
3 = be broken in <h1> 5 words </h1>. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:59:15.197

Think about using explode() function wisely. Or better, but longer - regular expression that will match either a word or a tag with all text within it. You should consider elements inside html tags as unbreakable entity. For example, you can write a function, that breaks you large paragraph into following array of entities:

```
$data = array(
  array( "count" => 2, "text" => "This is "),
  array( "count" => 1, "text" => "<b> a </b>"),
  array( "count" => 2, "text" => " paragraph which"),
  ...
  etc.
); 
```

Then, you should write a loop, that will make small paragraphs from $data array.

Also, sometimes it won't be possible to make your paragraph exactly 1500 words long. It can be more or less, because you should not separate you html tags.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:34:29.333

如果您想保证有效标记，我认为您将需要解析您的 html。在这种情况下，[这个问题](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)应该提供一个非常有用的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:54:03.493

使用[XML DOM Parser](http://php.net/manual/de/refs.xml.php)或[HTML DOM Parser](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)。

*   遍历所有节点
*   计算每个节点的单词
*   如果`words`超过`N`
    *   创建父类型的新节点
    *   将其作为兄弟姐妹插入父母之后
    *   将当前和所有后续兄弟姐妹移动到它。
*   移动到下一个元素

# python - 有效地在多个字符串分隔符上拆分python字符串

> ID：13935454
> 
> 赞同：3
> 
> 时间：2012-12-18T14:49:00.990
> 
> 标签：python, string, split, delimiter

假设我有一个字符串，例如 `"Let's split this string into many small ones"` ，我想将其拆分为`this`,`into`和`ones`

这样输出看起来像这样：

```
["Let's split", "this string", "into many small", "ones"] 
```

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T15:03:07.333

展望未来。

```
>>> re.split(r'\s(?=(?:this|into|ones)\b)', "Let's split this string into many small ones")
["Let's split", 'this string', 'into many small', 'ones'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T14:52:48.403

通过使用`re.split()`：

```
>>> re.split(r'(this|into|ones)', "Let's split this string into many small ones")
["Let's split ", 'this', ' string ', 'into', ' many small ', 'ones', ''] 
```

通过将要拆分的单词放在捕获组中，输出包括我们拆分的单词。

如果您需要删除空格，`map(str.strip, result)`请在`re.split()`输出中使用：

```
>>> map(str.strip, re.split(r'(this|into|ones)', "Let's split this string into many small ones"))
["Let's split", 'this', 'string', 'into', 'many small', 'ones', ''] 
```

`filter(None, result)`如果需要，您可以使用删除任何空字符串：

```
>>> filter(None, map(str.strip, re.split(r'(this|into|ones)', "Let's split this string into many small ones")))
["Let's split", 'this', 'string', 'into', 'many small', 'ones'] 
```

要拆分单词但将它们附加到以下组，您需要使用前瞻断言：

```
>>> re.split(r'\s(?=(?:this|into|ones)\b)', "Let's split this string into many small ones")
["Let's split", 'this string', 'into many small', 'ones'] 
```

现在我们实际上是在空格上拆分，但*只*在空格后面跟着一个完整的单词，一个在`this`,`into`和的集合中`ones`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:01:23.500

这是一种相当懒惰的方法：

```
import re

def resplit(regex,s):
    current = None
    for x in regex.finditer(s):
        start = x.start()
        yield s[current:start]
        current = start
    yield s[start:]

s = "Let's split this string into many small ones"
regex = re.compile('(this|into|ones)')
print list( resplit(regex,s) ) 
```

我不确定这是否是最有效的，但它很干净。

基本上，我们只是遍历匹配一次取 1 件。这些片段由`s`正则表达式开始匹配的字符串 ( ) 中的索引确定。我们只是将字符串切到那个点，然后将该索引保存为下一个切片的起点。

* * *

至于表现，ignacio 显然赢得了这一轮：

```
9.1412050724  -- Me
3.09771895409  -- ignacio 
```

代码：

```
import re

def resplit(regex,s):
    current = None
    for x in regex.finditer(s):
        start = x.start()
        yield s[current:start]
        current = start
    yield s[start:]

def me(regex,s):
    return list(resplit(regex,s))

def ignacio(regex,s):
    return regex.split("Let's split this string into many small ones")

s = "Let's split this string into many small ones"
regex = re.compile('(this|into|ones)')
regex2 = re.compile(r'\s(?=(?:this|into|ones)\b)')

import timeit
print timeit.timeit("me(regex,s)","from __main__ import me,regex,s")
print timeit.timeit("ignacio(regex2,s)","from __main__ import ignacio,regex2,s") 
```

# database - 无损、依赖保留的 BCNF

> ID：13935458
> 
> 赞同：0
> 
> 时间：2012-12-18T14:49:13.877
> 
> 标签：database, dependencies, lossless

给出以下关系：

R1 = {A, B, C}

R2 = {C, D}

R3 = {D, E}

任务是找到一组函数依赖项来满足 BCNF（无损和保持依赖关系）。我认为这是不可能的。

在没有依赖保留的情况下，我得到了这个：

A -> B, C

C -> A, D

D -> A, E

这是否正确，是否有可能找到一个 dep. 新闻 放？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:53:04.403

我不确定我是否完全理解这个问题。但是在 BCNF 中“制造”关系的最简单方法是使用一个且只有一个单属性键。这些功能依赖

*   A->BC
*   C->D
*   D->E

导致这些关系。

*   R [a] { **A** BC}
*   R [b] { **C** D}
*   R [c] { **D** E}

R [a]在 5NF 中。另外两个在6NF。

# regex - sed 中正则表达式的小问题

> ID：13935466
> 
> 赞同：2
> 
> 时间：2012-12-18T14:49:24.117
> 
> 标签：regex, bash, sed

我有这个字符串：

```
 data="week 50; data; data; data; data" 
```

我想通过使用 sed 从其中删除星期部分，以便我得到：数据；数据; 数据; 数据我想出了这个但显然不起作用，知道为什么吗？错误的规则在哪里？

代码：

```
echo ${data} | sed '/%week.*%;/s/%week.*%;//' 
```

雪儿

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:52:39.417

这应该足够了：

```
echo ${data} | sed 's/week[^;]*;//' 
```

输出：

```
data; data; data; data 
```

这匹配`week`plus up to 并包括下一个分号 ( `[^;]*;`) 并将其删除。

如果您还想删除多余的空间，请执行以下操作：

```
 echo ${data} | sed 's/week[^;]*; *//' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:16:20.263

您真的要删除包含以“周”开头的文本的分号分隔字段，还是真的只想删除第一个字段？考虑：

```
$ echo "week 50; data; data; data; data" | cut -d\; -f2-
 data; data; data; data

$ echo "week 50; data; data; data; data" | sed 's/[^;]*;//'
 data; data; data; data 
```

# java - 我正在将图片文件从 pc 发送到 android 手机两者都通过套接字连接到同一个 WLAN

> ID：13935467
> 
> 赞同：1
> 
> 时间：2012-12-18T14:49:25.763
> 
> 标签：java, android, sockets, network-programming

我正在尝试将图片从 pc 发送到 android 手机我在发送图片时遇到问题。我在此处发布发送图片的 java 应用程序的代码。

```
 public void send(OutputStream os) throws Exception{
  // sendfile
  File myFile = new File ("E:\\a.png");
  System.out.println("the file is read");
  byte [] mybytearray  = new byte [(int)myFile.length()+1];
  FileInputStream fis = new FileInputStream(myFile);
  BufferedInputStream bis = new BufferedInputStream(fis);
  bis.read(mybytearray,0,mybytearray.length);
  System.out.println("Sending...");
  os.write(mybytearray,0,mybytearray.length);
  os.flush();
  } 
```

上面的代码只是在端口上写文件。

这是实际接收该文件的android代码。循环开始并且不退出。连接到端口是正确的，我可以发送和接收字符串

```
 public Bitmap receiveFile(InputStream is) throws Exception{
     String baseDir =     Environment.getExternalStorageDirectory().getAbsolutePath();
        String fileName = "myFile.png";
        String imageInSD = baseDir + File.separator + fileName;
      int filesize=6022386;
      int bytesRead;
      int current = 0;
      byte [] mybytearray  = new byte [filesize];

        FileOutputStream fos = new FileOutputStream(imageInSD);
        BufferedOutputStream bos = new BufferedOutputStream(fos);
        bytesRead = is.read(mybytearray,0,mybytearray.length);
        current = bytesRead;

        do {
           bytesRead =
              is.read(mybytearray, current, (mybytearray.length-current));
           if(bytesRead >= 0) current += bytesRead;

        } while(bytesRead != -1);

        bos.write(mybytearray, 0 , current);  
        bos.flush();
        bos.close();
        return null;
  } 
```

请建议任何其他分享图片的方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:02:09.247

这一行是问题：

```
 if(bytesRead >= 0) current += bytesRead; 
```

当您`0`从 TCP 套接字接收字节时，这意味着另一端已关闭连接，因此没有更多内容可读取。那时退出你的循环。

# google-apps-script - 一天服务调用次数过多：gmail read

> ID：13935468
> 
> 赞同：1
> 
> 时间：2012-12-18T14:49:25.843
> 
> 标签：google-apps-script

我遇到了 gmail 的各种速率限制，我不确定我能做些什么来解决它们。我想要完成的是在 gmail 中搜索任何带有某些“过期”标签的消息（以分钟为单位的不同时间）。我的意图是让邮件规则将这些标签应用于在一定时间后变得无关紧要的邮件。我希望这些邮件保留在我的收件箱中，直到它们过期，然后自动存档。我基于我在[http://googleappsdeveloper.blogspot.com/2011/07/gmail-snooze-with-apps-script.html看到的一篇文章的一般技术](http://googleappsdeveloper.blogspot.com/2011/07/gmail-snooze-with-apps-script.html)

我在每五分钟运行一次“过期”功能的触发器上有这个。

因此，它每五分钟调用 10 次 GmailApp.getUserLabelByName 和 1 次 getThreads()。然后根据它找到多少匹配线程，对于每个线程：

1 x getFirstMessageSubject 1 x getLastMessageDate 1 x addLabel 1 x moveToArchive 1 x removeLabel

每个线程 5 次调用。

所以，我想，我每天要打 10 个电话/5 分钟，或者 2880 个电话，只是为了寻找消息。然后，假设我在一天中发现 1,000 条消息，另外还有 5,000 个电话。加起来就是 7,880 个电话，这在我认为的配额限制之下，但我有点不清楚。根据配额限制下的[https://docs.google.com/a/macros/latinschool.org/dashboard](https://docs.google.com/a/macros/latinschool.org/dashboard)，对于像我这样的 Google Apps for Edu 帐户，我应该能够读取 10,000 个 GMail 和每天 10,000 个 GMail 写操作。我认为我所有的电话都属于这两者之一。

我可以减少我正在使用的标签/次数的数量，而不是获取主题（我正在使用它进行调试），但除此之外，我不确定如何使这个脚本更有效率。而且我完全不清楚我是如何达到配额的（见上面的数学）。

这是我的代码：

```
/**
 * Expire mail after set time by archiving based on labels
 * based on http://googleappsdeveloper.blogspot.com/2011/07/gmail-snooze-with-apps-script.html
 * For more information on interacting with GMail labels, see
 * https://developers.google.com/apps-script/class_gmaillabel
 */

var expiretimes = [5,15,30,60,120,180,240,480,720];  // times in minutes to expire messages

function getLabelName(i) {
  return "expire/expire " + i;
}

function setup() {
  // Create the labels we’ll need for expiring
  GmailApp.createLabel("expire");
  for (var expt = 0; expt < expiretimes.length; expt++) {
    GmailApp.createLabel(getLabelName(expt));
  }
    GmailApp.createLabel("expired");
}

function expiremsgs(expiremin) {
  // get current date
  var nowdate = new Date();
  Logger.log(nowdate);

  // get the label for given name
  var label = GmailApp.getUserLabelByName(getLabelName(expiremin));
  var expiredlabel = GmailApp.getUserLabelByName("expired");
  var threads = label.getThreads();
  Utilities.sleep(1000);
  for (var i = 0; i < threads.length; i++) {
    Logger.log("i: " + i);
    Logger.log(threads[i].getFirstMessageSubject());
    var lastmsgdate = threads[i].getLastMessageDate();
    Logger.log(lastmsgdate);
    var minold = (nowdate-lastmsgdate)/60000; // convert from ms to minutes
    Logger.log(minold);
    if (minold > expiremin) {
      threads[i].addLabel(expiredlabel);
      threads[i].moveToArchive();
      threads[i].removeLabel(label);
      Logger.log("Archived");
    }
  Utilities.sleep(1500);
  }
};

function expire() {
  for (var expt = 0; expt < expiretimes.length; expt++) {
    expiremsgs(expt);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:53:02.497

我仔细看了看你在做什么，看起来你的数学是正确的。但是，我知道在使用电子表格时使用批处理操作是最佳实践。所以，我看了一些参考资料，发现了一些关键功能：

```
GmailApp.moveThreadsToArchive(GmailThreads[]);
label.removeFromThreads(GmailThreads[]);
label.addToThreads(GmailThreads[]); 
```

我假设这些函数将减少您使用 API 进行的读/写调用的数量。（如果我错了，请谷歌 OP 纠正我。）

尽管如此，当我在玩你的代码时，我发现这些函数一次只能处理 100 个线程，所以如果超过了，那么操作必须批处理。我还检查了调用 GmailApp 服务的速度和可扩展性，发现大多数调用的延迟与所涉及的项目数量大致无关。至少在我的测试中，批量归档 6 个线程大约需要（在一两秒内）与 100 个相同的时间。在出Gmail之前，我也尽力在脚本中做尽可能多的事情。最后，我修改了您与超时交互的方式。我一生都无法弄清楚你是如何获得数组中的值的，所以我修改了它以及标签。他们现在将阅读“过期/在 15 分钟内”等。

另一种方法可能是运行一次搜索，一次性查找所有标签，然后检查标签。但是，当您检查每个线程的属性时，这可能仍会向 Gmail 调用过多的调用。

有了所有这些，这是我对您的代码的迭代：

```
var expiretimes = [5,15,30,60,120,180,240,480,720];

function getLabelName(i) {
  return "expire/in " + expiretimes[i]  + " min";
}

function setup() {
  GmailApp.createLabel("expired");
  GmailApp.createLabel("expire");
  for (var expt = 0; expt < expiretimes.length; expt++) {
    GmailApp.createLabel(getLabelName(expt));
  }
}

function expire() {
  var allExpThreads = [];
  for (var expt = 0; expt < expiretimes.length; expt++) allExpThreads = allExpThreads.concat(expiremsgs(expt));
  if(allExpThreads.length > 100) batchExpire(allExpThreads);
  else GmailApp.moveThreadsToArchive(allExpThreads).getUserLabelByName("expired").addToThreads(allExpThreads);
}

function expiremsgs(expiremin) {
  var label = GmailApp.getUserLabelByName(getLabelName(expiremin));   
  var threads = label.getThreads();
  if(threads.length > 0){   
    var threadsToExpire = threads.filter(msgExpired, {date: new Date(), min: expiretimes[expiremin]});
    if(threadsToExpire.length > 100) batchRemoveLabel(threadsToExpire,label);
    else if(threadsToExpire.length > 0) label.removeFromThreads(threadsToExpire);
    return threadsToExpire;
  }
  return [];
}

function msgExpired(thread) {
  return this.date - thread.getLastMessageDate() / 6000 > this.min;
}

function batchRemoveLabel(threads,label) {
  var start = 0, end = 100;
  do {
    label.removeFromThreads(threads.slice(start,end));
    start = end;
    end = end > threads.length - 100 ? threads.length : end + 100;
  } while (start < threads.length);
}

function batchExpire(threads) {
  var start = 0, end = 100;
  var expLabel = GmailApp.getUserLabelByName("expired");
  do {
    GmailApp.moveThreadsToArchive(threads.slice(start,end));
    expLabel.addToThreads(threads.slice(start,end));
    start = end;
    end = end > threads.length - 100 ? threads.length : end + 100;
  } while (start < threads.length);
} 
```

# jquery - 页面加载时触发 jQuery 的 .on() 事件

> ID：13935470
> 
> 赞同：1
> 
> 时间：2012-12-18T14:49:31.297
> 
> 标签：jquery

我需要 jQuery 的 .on() 事件在页面加载后触发。我有一些基于前一个屏幕上的用户选择动态生成的复选框。我有代码可以做我想做的事，但我已经将它绑定到“body”点击事件以允许我测试它是否有效。

我所拥有的是以下内容，并且需要在页面加载而不是正文单击时立即触发。

```
$('body').on('click', function (e) {
    $("input:checkbox").each(function () {
        if ($(this).attr("disabled") == "disabled") {
            $(this).parent().addClass('disabled');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:52:56.250

```
jQuery(document).ready(function($) {
    $("input:checkbox").each(function () {
        if ($(this).attr("disabled") == "disabled") {
            $(this).parent().addClass('disabled');
        }
    });
}); 
```

document.ready 处理程序使函数在页面加载完成时激活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:51:51.727

为您提供两种可能性：

1）只需将包含代码的脚本标记放在页面的最后，就在结束`</body>`标记之前，然后将其从事件处理程序中删除：

```
<script>
$("input:checkbox").each(function () {
    if ($(this).attr("disabled") == "disabled") {
        $(this).parent().addClass('disabled');
    }
});
</script>
</body> 
```

*届时，HTML 代码上*方定义的所有复选框都将可用，参考：

*   [YUI 网站加速最佳实践](http://developer.yahoo.com/performance/rules.html)
*   [Google 在 DOM 元素准备就绪时开启](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)

* * *

2) 或者，如果您有理由将 script 标签放在别处，您可以使用[jQuery 的`ready`event](http://api.jquery.com/ready)，它在页面准备好之后但之前`onload`（通常）触发：

```
jQuery(function($) {
    $("input:checkbox").each(function () {
        if ($(this).attr("disabled") == "disabled") {
            $(this).parent().addClass('disabled');
        }
    });
}); 
```

# spring-security - 我在哪里可以找到 ACEGI 安全文档和示例？

> ID：13935473
> 
> 赞同：0
> 
> 时间：2012-12-18T14:49:36.780
> 
> 标签：spring-security

我有一个使用现已消失的 acegi 框架的旧项目，需要对其进行一些工作。我在互联网上找不到任何有用的信息。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:54:19.617

您可以查看这篇 java 世界文章 [http://www.javaworld.com/javaworld/jw-10-2007/jw-10-acegi2.html](http://www.javaworld.com/javaworld/jw-10-2007/jw-10-acegi2.html)。您也可以从 java world 进行搜索，并在那里为 acegi 提供一些好的结果。

# jquery - 在 jQuery 中悬停和切换

> ID：13935475
> 
> 赞同：0
> 
> 时间：2012-12-18T14:49:47.127
> 
> 标签：jquery, jquery-hover

我有两个 div：蓝色上的红色。*我希望当用户悬停红色时这个 fadeOut 和悬停在背景上时（当他走出蓝色时）红色的 fadeIn*。（更令我惊讶的是，红色的淡入不是当我悬停背景而是当我鼠标离开它时？我不明白）

这里的例子生活：http://jsfiddle.net/DpD8S/

HTML：

```
<div id="background">
    <div id="red"></div>
    <div id="blue"></div>
</div>​ 
```

CSS：

```
#red{
    position:absolute;
    top: 20px;
    left: 20px;
    width: 60px;
    height: 30px;
    background-color:red;
    cursor: pointer;
    z-index: 1; 
    }

#blue{
    position:absolute;
    top: 20px;
    left: 20px;
    width: 60px;
    height: 30px;
    background-color:blue;
    cursor: pointer; 
    }

#background{
    position: relative;
    margin: 0 auto;
    width:300px;
    height: 300px;
    border: 1px solid;
    border-color:#CCC;
    text-align: center;
    cursor: pointer;  } 
```

查询：

```
$(function(){      
    $("#red").hover(function() {
        $("#red").fadeOut();
    });

    $("#background").hover(function() {
        $("#red").fadeIn("normal");
    });   
})​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:00:32.027

您的问题可能是[**hover**](http://api.jquery.com/hover/)的定义。

```
hover( handlerIn(eventObject) , handlerOut(eventObject)  )
hover( handlerInOut(eventObject)  ) 
```

这意味着当您只传递一个函数时，它会为[mouseenter](http://api.jquery.com/mouseenter/)和[mouseleave](http://api.jquery.com/mouseleave/)调用。您应该使用这些事件或将两个函数传递给`hover`

这也几乎是“倒退”。输入时隐藏某些内容始终是个问题。所以这就是我现在重命名你的 div 的原因。进的时候要显露，走的`#active`时候要`#inactive`藏起来。`#active``#active`

这是一个小提琴[http://jsfiddle.net/MwQaf/1/](http://jsfiddle.net/MwQaf/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:18:38.570

制作一个透明的稳定区域，以捕捉您的事件。

```
<div id="background">
    <div id="blue"></div>
    <div id="red"></div>
    <div id="transparent"></div>
</div>​ 
```

CSS：

```
#red{
    position:absolute;
    top: 20px;
    left: 20px;
    width: 60px;
    height: 30px;
    background-color:red;
    cursor: pointer;
    z-index: 1; 
    }

#blue{
    position:absolute;
    top: 20px;
    left: 20px;
    width: 60px;
    height: 30px;
    background-color:blue;
    cursor: pointer; 
    }

#transparent {
    position:absolute;
    top: 20px;
    left: 20px;
    width: 60px;
    height: 30px;
    background-color:none;
    cursor: pointer; 
    z-index: 2; 
    }

#background{
    position: relative;
    margin: 0 auto;
    width:300px;
    height: 300px;
    border: 1px solid;
    border-color:#CCC;
    text-align: center;
    cursor: pointer; 
}
​ 
```

然后使用悬停（函数（），函数（））。不要忘记在那里停止执行事件函数：

```
$(function(){      
    $("#transparent").hover(function() {
        $("#red").stop().fadeOut();
    }, function() {
       $("#red").fadeIn("normal");
    });

})​ 
```

[http://jsfiddle.net/DpD8S/14/](http://jsfiddle.net/DpD8S/14/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:01:42.893

也许你更愿意改变 `$("#background").hover(...)` ： `$("#blue").mouseleave(...)`

[http://jsfiddle.net/DpD8S/18/](http://jsfiddle.net/DpD8S/18/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T15:18:06.250

正在包裹另外`#background` `div`两个。每当事件发生时，您的`$('#background').hover()`函数就会被调用，甚至是它的子事件。`hover``#background`

我相信你可以[通过这样做来实现你想要的](http://jsfiddle.net/remibreton/DpD8S/15/)：

```
$("#red").mouseenter(function() {
    $(this).fadeOut();
});

$("#red, #blue").mouseleave(function() {
    $("#red").fadeIn("normal");
}); 
```

然而，这会产生一个奇怪的行为，因为两个“淡入淡出”动画在排队。如果用户快速进出悬停，则`div`似乎没有响应并以奇怪的方式进行动画处理。

如果安装插件是一个选项，你可以[试试这个插件来动画颜色](https://github.com/jquery/jquery-color/blob/master/jquery.color.js)。这将允许您甚至将元素的数量减少到仅其`div`本身。您还可以减少 CSS 并使用更简洁的 JavaScript。[看看小提琴](http://jsfiddle.net/DpD8S/20/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T15:07:20.180

悬停功能通常是这样定义的 -

```
$('#red').hover(function() {
    $(this).fadeOut();
}, function() {
    $(this).fadeIn();
}); 
```

第一个函数是 .hover() 的 mouseenter 部分。第二个功能是悬停的鼠标离开部分。在您的情况下，背景 div 似乎与问题无关。

# c# - ASP.NET MVC 静态存储库？

> ID：13935479
> 
> 赞同：12
> 
> 时间：2012-12-18T14:50:00.720
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

我有几个几乎永远不会改变的实体（即国家、地区等的列表），这让我开始思考……除了正常的存储库之外，静态存储库对这些实体是否有意义？我还要说，因为这些实体仍将与其他实体交互，并且我仍然希望它们在单个工作单元下，以便它们共享相同的上下文。

但是，我确信有更好的方法来解决它。我是 ASP.NET 和 .NET 框架的新手，但是有没有办法定义将在程序的整个生命周期中使用的应用程序范围的数据？这是最好的方法吗？

还是只定义一个包含这些实体集合的静态类更好，我可以在需要时从那里获取它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T15:15:28.737

您可以使用各种存储（状态管理）技术。请按照以下选项了解更多信息。

*   [输出缓存](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)
*   [应用缓存](https://stackoverflow.com/questions/385986/caching-in-asp-net-mvc)
*   [数据库缓存](http://stevescodingblog.co.uk/net4-caching-with-mvc/)

从它的声音来看，您尝试存储的两个实体不会占用大量内存，因此最好选择应用程序缓存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T14:56:18.017

为什么不直接使用缓存机制？我在这种情况下成功地使用了 memchache。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T15:35:41.433

我认为 Nexus23 的答案涵盖了您的大部分选择。但我发现对于这样的一些数据（美国各州、城市），有时最好根本不维护列表，因为它只是供您将来处理的事情。可用性方面以及拥有 190 多个国家/地区的列表（联合国和美国承认不同的列表）对于用户滚动浏览并不理想。

除非您计划根据世界地缘政治变化进行更新，否则该应用程序的用户很可能会比您更了解什么是正确的。

如果您需要此列表用于地址验证或地理定位等功能，最好推迟到为此而设计的服务，而不是尝试在内部重新滚动（Google Maps API 等）。

# java - android中的SimpleDateFormat错误

> ID：13935480
> 
> 赞同：2
> 
> 时间：2012-12-18T14:50:05.587
> 
> 标签：java, android, date

我正在使用`toLocaleString()`方法来获取此输出“2012 年 12 月 16 日 23:00:28”，然后当我想取回日期时，我得到`Unparseable date error`.

```
String s = "16 déc. 2012 23:00:28";
SimpleDateFormat  format = new SimpleDateFormat("dd MMM. yyyy HH:mm:ss");
Date d = format.parse(s); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T15:05:24.883

这里有两件事：

*   你应该提供语言环境（我相信你的情况是法语？）
*   该点是月份短表示的一部分，因此您缺少“M”

尝试这个：

```
SimpleDateFormat  format = new SimpleDateFormat("dd MMMM yyyy HH:mm:ss", Locale.FRENCH); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:09:46.210

这应该适用于您的情况

```
new SimpleDateFormat("dd MMM yyyy HH:mm:ss").parse(s); 
```

您的默认语言环境是法语，只需删除“。”

# java - 如何处理来自谷歌地图服务器的重音字符（如 République 一词中的 é）作为 Android 中的响应

> ID：13935481
> 
> 赞同：1
> 
> 时间：2012-12-18T14:50:05.207
> 
> 标签：java, android, utf-8

我想显示来自 Google Map Server 的响应。我得到的响应是在将纬度和经度发送到谷歌地图服务器后得到的位置的名称，响应就像这样“av de la République”，但是当我在应用程序中显示这个之后解析响应，它显示为“av de la RÃ(c)publique”....

下面的代码片段可能有助于理解我的问题..

```
public static String getAddress(double lat, double lon){
        StringBuilder stringBuilder = new StringBuilder();
         String add ="";

       try {

        HttpPost httppost = new HttpPost("http://maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lon+"&sensor=false");
        HttpClient client = new DefaultHttpClient();
        org.apache.http.HttpResponse response;
        stringBuilder = new StringBuilder();

            response = client.execute(httppost);
            HttpEntity entity = response.getEntity();
            InputStream stream = entity.getContent();
            int b;
            while ((b = stream.read()) != -1) {
                stringBuilder.append((char) b);
            }
        } catch (ClientProtocolException e) {
        } catch (IOException e) {
        }

        JSONObject jsonObject = new JSONObject();
        try {
            jsonObject = new JSONObject(stringBuilder.toString());
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

       try {
          add = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
               .getString("formatted_address");
       } catch (Exception e) {
           e.printStackTrace();
       }
       return add;
    } 
```

这是我的代码实现

```
public static String getAddress(double lat, double lon){
        StringBuilder stringBuilder = new StringBuilder();
         String add ="";
        try {

        HttpPost httppost = new HttpPost("http://maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lon+"&sensor=false");
        HttpClient client = new DefaultHttpClient();
        org.apache.http.HttpResponse response;
        stringBuilder = new StringBuilder();

            response = client.execute(httppost);
            HttpEntity entity = response.getEntity();

            char[] buffer = new char[2048];
            Reader reader = new InputStreamReader(entity.getContent(), "UTF-8");
            while (true) {
                int n = reader.read(buffer);
                if (n < 0) {
                    break;
                }
                stringBuilder.append(buffer, 0, n);
            }
        } catch (ClientProtocolException e) {
        } catch (IOException e) {
        }

        JSONObject jsonObject = new JSONObject();
        try {
            Log.i("===================", stringBuilder.toString());
            jsonObject = new JSONObject(stringBuilder.toString());
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

       try {

          add = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
               .getString("formatted_address");

       } catch (Exception e) {
           e.printStackTrace();

       }

       return add;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:55:26.120

您正在将文本读取为字节，而不是文本。这相当于读取 ISO-8859-1 中的响应，而实际上它是 UTF-8。

尝试这个：

```
char[] buffer = new char[2048];
Reader reader = new InputStreamReader(entity.getContent(), "UTF-8");
StringBuilder stringBuilder = new StringBuilder();

while (true) {
    int n = reader.read(buffer);
    if (n < 0) {
        break;
    }
    stringBuilder.append(buffer, 0, n);
} 
```

在这里，它被集成到您的代码中：

```
public static String getAddress(double lat, double lon){
    StringBuilder stringBuilder = new StringBuilder();
    String add ="";

    try {

        HttpPost httppost = new HttpPost("http://maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lon+"&sensor=false");
        HttpClient client = new DefaultHttpClient();
        org.apache.http.HttpResponse response;
        stringBuilder = new StringBuilder();
        response = client.execute(httppost);
        HttpEntity entity = response.getEntity();

        char[] buffer = new char[2048];
        Reader reader = new InputStreamReader(entity.getContent(), "UTF-8");
        while (true) {
            int n = reader.read(buffer);
            if (n < 0) {
                break;
            }
            stringBuilder.append(buffer, 0, n);
        }

    } catch (ClientProtocolException e) {

    } catch (IOException e) {

    }

    JSONObject jsonObject = new JSONObject();
    try {
        jsonObject = new JSONObject(stringBuilder.toString());
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        add = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
        .getString("formatted_address");
    } catch (Exception e) {
        e.printStackTrace();
    }
    return add;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-24T14:47:57.357

这就是答案。[https://stackoverflow.com/a/5730210](https://stackoverflow.com/a/5730210)

字节 ptext[] = myString.getBytes("ISO-8859-1"); 字符串值 = 新字符串（ptext，“UTF-8”）；

如果您正在从文件中读取，您还需要使用 UTF-8 编码对 inputStreamReader 进行编码。

final BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(input, "UTF-8"));

# knockout.js - Kendo-Knockout：使用带有 kendo 数据源的淘汰视图模型

> ID：13935484
> 
> 赞同：4
> 
> 时间：2012-12-18T14:50:11.507
> 
> 标签：knockout.js, kendo-ui

我正在用 Kendo、Knockout 和 kendo-knockoutjs 库做一些实验。我想将淘汰视图模型与剑道数据源一起使用，并将其绑定到剑道网格小部件。

在剑道：

html:

```
<div id="main">
    <div id="reportGrid" data-bind="source: gridDataSource"></div>
</div> 
```

javascript:

```
var billingReportViewModel = kendo.observable({
    gridDataSource: new kendo.data.DataSource({data:[{name:"Apple", color:"green"},{name:"Banana", color:"yellow"}]})
});

$("#reportGrid").kendoGrid();

kendo.bind($("#main"), billingReportViewModel); 
```

[http://jsfiddle.net/zeQMT/71/](http://jsfiddle.net/zeQMT/71/)

我想要完成的事情：

html 与上面的示例相同。

javascript:

```
var billingReportViewModel = ko.observable({
    gridDataSource: new kendo.data.DataSource({data:[{name:"Apple", color:"green"},{name:"Banana", color:"yellow"}]})
});

$("#reportGrid").kendoGrid();

ko.applyBindings(billingReportViewModel); 
```

[http://jsfiddle.net/zeQMT/72/](http://jsfiddle.net/zeQMT/72/)

显然，这不起作用，因为 knockoutjs 没有`source`绑定。是否可以创建名为的自定义绑定`source`，以便当前示例可以工作？任何有关工作代码的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:00:44.293

我很久以前开始了一个分支来处理直接传入 kendo.data.DataSource 引用，但从未完成修复：[https ://github.com/rniemeyer/knockout-kendo/issues/6](https://github.com/rniemeyer/knockout-kendo/issues/6)

如果有兴趣，那么我可以尝试解决这个问题。

否则，您可以在绑定中定义数据源（或传入一个对象）。像：

```
var billingReportViewModel = ko.observable({
    gridDataSource: {data:[{name:"Apple", color:"green"},{name:"Banana", color:"yellow"}]}
}); 
```

然后，像这样绑定：

```
<div id="reportGrid" data-bind="kendoGrid: { data: undefined, dataSource: gridDataSource }"></div> 
```

示例：http: [//jsfiddle.net/rniemeyer/6SEzp/](http://jsfiddle.net/rniemeyer/6SEzp/)

# c++ - qsort 用于对对象数组进行排序

> ID：13935487
> 
> 赞同：3
> 
> 时间：2012-12-18T14:50:12.557
> 
> 标签：c++, quicksort

我正在尝试使用 qsort() 对对象指针数组（PointP = Point*）进行排序，附加的是比较函数和排序，问题是什么都没有发生，也没有发生排序。

```
int compareByAngleP(const void* elem1,const void* elem2) {
    PointP point1 = (PointP) elem1;
    PointP point2 = (PointP) elem2;
    if (abs(point1->getAngle() - point2->getAngle())>0.001)
    {
        return point1->getAngle() - point2->getAngle();
    }
    return  point1->getY() - point2->getY();
}

void sortArrayP(PointP* array, int size) {
    qsort(array,size, sizeof(PointP), compareByAngleP);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:53:34.973

我的*建议*是忘掉`std::qsort`，喜欢平淡的老`std::sort`。不像`std::qsort`它是类型安全的，并且在大多数实现中要快得多。

```
std::sort(array, array+size, compareByAngleP); 
```

并摆脱`void*`比较功能中的实际类型。

此外，如果您使用的是 C++11 并且该数组只是本地的：

```
std::sort(std::begin(array), std::end(array), compareByAngleP); 
```

或者甚至更好地使用一个`std::vector`或其他最合适的容器。

```
std::vector<Point> array { ... };
std::sort(array.begin(), array.end(), compareByAngleP); 
```

## 笔记

您可能需要修改比较函数，以便在第一个参数小于第二个参数时返回真。（或简单地`operator <`为 Point 实现）。

## 参考

[http://en.cppreference.com/w/cpp/algorithm/sort](http://en.cppreference.com/w/cpp/algorithm/sort)

[http://en.cppreference.com/w/cpp/container/vector](http://en.cppreference.com/w/cpp/container/vector)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:04:04.833

`qsort`您在使用和比较功能时存在几个问题。

1.  `qsort`将使用`memcpy`（或类似的）重新排序数组的元素。如果您的`Point`类型具有复制构造函数（或具有复制构造函数的成员），那么使用`qsort`它就是自找麻烦（它会导致未定义的行为）。

2.  您的`compareByAngleP`函数不适合排序，因为它检查的关系不是传递的。例如，如果您有三个点`A`,`B`和`C`, 都具有相同的`Y`坐标并分别具有角度`10.000`,`10.001`和`10.002`, 那么`compareByAngeP`将指示`A == B`和`B == C`, 但是`A != C`, 这可能会对排序功能造成严重破坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:01:48.477

我认为如果您从比较函数返回 bool 而不是 int，那么会发生不同的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:59:17.187

Following qsort reference (http://en.cppreference.com/w/cpp/algorithm/qsort) 3rd parameter of qsort should be 'size of each element in the array in bytes' so instead

```
qsort(array,size, sizeof(PointP), compareByAngleP); 
```

try

```
qsort(array,size, sizeof(PointP*), compareByAngleP); 
```

Also you are implicity casting float to int (while returning value from comparing function). But:

```
(int)0.2 == 0 
```

# c# - MVC4 模型绑定到字典（重大更改？）

> ID：13935492
> 
> 赞同：0
> 
> 时间：2012-12-18T14:50:20.643
> 
> 标签：c#, asp.net-mvc-4, model-binding

我在页面上有以下输入：

```
@using(Html.BeginForm()) 
{
    @Html.TextBox(String.Format("someData[{0}].Key", 0))
    @Html.TextBox(String.Format("someData[{0}].Key", 1))

    @Html.TextBox(String.Format("someData[{0}].Value", 0))
    @Html.TextBox(String.Format("someData[{0}].Value", 1))

    <input type="submit" value="Go" />
} 
```

我的印象是发布这些数据应该通过 MVC 中的默认模型绑定器绑定到 IDictionary。但是，我希望字典的键是数字：

```
public ActionResult MyAction(IDictionary<long?, string> someData)
{
    //...
} 
```

我使用 Javascript 在客户端验证这些字段，但是如果我关闭 JS 并提交表单而不在框中输入任何内容，我会得到一个`InvalidCastException`说法，即模型绑定器无法绑定到 someData 集合。

我敢肯定，在以前版本的 MVC 中（我们最近升级了），并且因为 Dictionary 键是可以为空`(long?)`的，如果为“.Key”输入（即非数字）输入了无效数据，字典只是省略了输入集合。

当然，在这种情况下，您可以在不启用 JS 的情况下提交一个空表单吗？当我提交表单时，我的操作甚至没有被命中（断点），所以我自己无法捕捉到错误并添加到 ModelState...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:56:14.320

这对我来说很好用：

```
[HttpGet]
public ActionResult Index()
{
    return View();
}

[HttpPost]
public ActionResult Index(IDictionary<long?, string> someData)
{
    if (ModelState.IsValid)
    {
        // do some stuff here...
    }
    return View();
} 
```

但是，使用空值发布会产生无效的强制转换，这是已在此处确定的已知问题：http: [//aspnetwebstack.codeplex.com/workitem/373](http://aspnetwebstack.codeplex.com/workitem/373)

# magento - 在 Magento 中通过自定义属性定位客户

> ID：13935493
> 
> 赞同：4
> 
> 时间：2012-12-18T14:50:23.197
> 
> 标签：magento

我有一个名为 rms_id 的自定义属性。它是与我们在另一个数据库中的客户相关联的唯一帐号。我需要一种通过此 ID 查找客户的方法，而无需手动访问数据库。

截至目前，我可以通过电子邮件地址加载客户，如下所示：

```
$customer->loadByEmail($data['email']); 
```

这很好，但是电子邮件并不总是可用。RMS id 是。有没有办法通过自定义属性加载用户？

理论上，以下方法会起作用：

```
$customer->loadByRmsId($data['account_id']); 
```

但是它出错了。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T15:19:35.143

核心中有一个很好的例子；见[`Mage_Catalog_Model_Abstract::loadByAttribute()`[链接]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/Model/Abstract.php#L224)。它涉及使用数据模型来检索集合、将属性加入其中并按该属性进行过滤。如果属性不是静态的，即不是实体表的一部分，这是必要的。

```
$result = Mage::getModel('customer/customer')
              ->getCollection()
              ->addAttributeToSelect('rms_‌​id')
              ->addAttributeToFilter('rms_id',{Val})->load();

if (is_object($result)) {
    /* Logic */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:25:44.880

但在实践中，你必须想出自己的方法，`loadByEmail()`类似于`app/code/core/Mage/Customer/Model/Resource/Customer.php`

或从收藏中获取电子邮件

```
Mage::getModel('customer/customer')->getCollection()->addFieldToFilter('rms_id', 'youremailhere')->load(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:20:30.640

```
$customer->load($data['account_id'], 'rms_id'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-19T14:14:04.643

你也可以这样做：

`$customer = Mage::getModel('customer/customer') ->getCollection() ->addAttributeToSelect('*') ->addAttributeToFilter('rms_id', $data['account_id']) ->getFirstItem();` 将返回`Mage_Customer_Model_Customer`对象。

# ruby - Ruby 代码优化：从数组中选择

> ID：13935495
> 
> 赞同：2
> 
> 时间：2012-12-18T14:50:23.857
> 
> 标签：ruby, arrays, algorithm

假设我们对 SomeClass 进行了分类。

```
class SomeClass < SomeClassThatAssignAttributesOnInitialization
  attr_accessor :group
  attr_accessor :name
end 
```

及其实例数组

```
arr = [SomeClass.new(group:0, name:'one'),
       SomeClass.new(group:0, name:'two'),
       SomeClass.new(group:1, name:'three'),
       SomeClass.new(group:1, name:'four')] 
```

我需要将每个组的第一个元素放入数组中。

现在它可以通过下一个方式工作

```
current_group = nil
first_elements = arr.map do |instance|
  if current_group != instance.group
    current_group = instance.group
    instance.name
  end
end 
```

这很好用，但我认为有某种“Ruby”方法可以做到这一点。

有谁能够帮助我？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:56:19.340

Ruby`group_by`在对象上有一个方便的方法`Enumerable`，它返回一个`Hash`：

```
arr.group_by(&:group)
# => {0=>[#<SomeClass group=0, name="one">, #<SomeClass group=0, name="two">], 1=>[#<SomeClass group=1, name="three">, #<SomeClass group=1, name="four">]} 
```

因此，只需将一些方法链接到最后：

```
arr.group_by(&:group).values.map {|vs| vs[0].name}
# => ["one", "three"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:56:50.370

```
arr.group_by(&:group).values.map(&:first) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:52:59.480

为什么不只是：

```
first_elements = arr.map(&:name) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T15:01:20.350

```
SomeClass = Struct.new(:group, :name)

arr = [
  SomeClass.new(0, 'one'),
  SomeClass.new(0, 'two'),
  SomeClass.new(1, 'three'),
  SomeClass.new(1, 'four')
]

arr.group_by(&:group).values.map(&:first)
# => [
#   #<struct SomeClass group=0, name="one">,
#   #<struct SomeClass group=1, name="three">
# ] 
```

或仅获取名称：

```
arr.group_by(&:group).values.map(&:first).map(&:name) 
```

# javascript - Jquery 或 JS 从两个 JSON 调用中获得差异

> ID：13935496
> 
> 赞同：0
> 
> 时间：2012-12-18T14:50:25.017
> 
> 标签：javascript, jquery, json

我的目标是比较两个不同的 JSON 服务并在单独的 div 中显示差异。服务 A 显示用户注册的列表。服务 B 显示所有可用列表。我希望能够在一个 div 中显示用户列表，并在另一个中显示主要列表中的剩余列表。

两组信息都来自内部 JSON 服务。我的第一种方法是从每个列表中获取列表 ID（它们是相同的）并将它们存储在数组中并比较数组。服务 A（ob1）：

```
1,2,3,4 
```

服务 B(ob2):

```
-1,1,2,3,4 
```

这是比较，从另一个[SO](https://stackoverflow.com/questions/10927722/jquery-compare-2-arrays-return-difference)帖子开始

```
$.grep(ob1, function (el) {
        if ($.inArray(el, ob2) == -1) diff.push([el, IDl]);
    }); 
```

结果：如果用户有 1 个列表 ID，则只有一个带有来自 JSON 调用中最后一项的 ID 的结果，而不是带有关联名称的 4 个结果。关联名称是被推入最后一个数组的“ID1”。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:58:19.527

您希望两个数组的不相交用作第二个数组。

```
var ob2 = $.grep(ob2, function(elem) { return $.inArray(elem, ob1) == -1; }); 
```

然后就可以显示 和 的内容`ob1`了`ob2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:58:52.030

循环遍历更大的数组而不是较小的数组：

```
$.grep(ob2, function (el) {
    if ($.inArray(el, ob1) == -1) diff.push([el, IDl]);
}); 
```

# mysql - 从转储文件恢复数据库时如何记录 sql 错误

> ID：13935498
> 
> 赞同：4
> 
> 时间：2012-12-18T14:50:27.100
> 
> 标签：mysql, logging, error-handling, restore

对这里的任何重复表示歉意，但我发誓我已经研究过（并在此过程中学到了很多东西）。

环境是 MySQL 5.5，在 Windows 7 上使用 MISAM 表引擎。

工作是恢复从 MySQL 4.0 转储的数据库。我从命令行执行此操作（我尝试使用 Oracle 的 MySQL Workbench 导入实用程序，但如果遇到错误会失败）。恢复完成，但我知道有错误被抛出。我想捕捉那些，这样我就可以确保恢复完成而没有错误。

General_log 似乎没有捕获任何东西（是的 - 它已打开）。另一个日志文件 (local_host_name.log) 似乎根本没有捕获 sql 语句级别的错误。

从命令行恢复时是否有捕获错误的方法？有没有办法使用将错误写入日志文件的 throw/catch 语句来编辑转储文件本身？

提前致谢——我是一名 MS SQL 人员，对 MySQL 不熟悉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T20:28:01.427

@Rob 在您的提示符（cmd？）中尝试以下操作：

```
mysql -u your_user your_database <c:\path\to\your_script.sql >stdout_output.txt 2>stderr_output.txt 
```

没有尖括号，符号'<'和'>'是命令行shell的重定向信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T17:18:07.287

我使用 bash 脚本来恢复 MySQL TB 数据库并将输出记录到如下所示的文件中，

```
/bin/bash /home/installation/scripts/finqa_restore.sh 2>&1 | tee /home/installation/scripts/output-stat.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T18:32:57.080

这对我有用：

```
 pv import_test.sql | mysql -urootuser -pyourpassword the_db_name >st_out_log.txt 2>error_log.txt 
```

我遇到的一个问题是它似乎只捕获一个错误。错误后脚本可能停止执行。

# javascript - 搜索多个属性

> ID：13935505
> 
> 赞同：4
> 
> 时间：2012-12-18T14:50:50.727
> 
> 标签：javascript, jquery, search, attr

我有一个搜索功能，可以很高兴地通过列表 div 搜索一个数据属性，下面是正在工作的代码。

```
$(".classToSearch").each(function(){
    if ($(this).attr('data-attribute1').search(new RegExp(filter, "i")) < 0) {
        $(this).animate({opacity:0.1},100);
    } else {
        $(this).animate({opacity:0.5},100);
    }
}); 
```

我希望搜索功能能够搜索多个数据属性。我尝试了一系列不同的格式，但我无法让它工作。下面是我认为它应该看起来的样子。

```
$(this).attr('data-attribute1','data-attribute2','data-attribute3') 
```

或者

```
$(this).attr('data-attribute1'||'data-attribute2'||'data-attribute3') 
```

但我想我需要某种 for 循环。任何帮助，将不胜感激。

**- - - - - 编辑 - - - - - - -**

**我** 的解决方案 这允许搜索框搜索所有数据属性。

```
$(".classToSearch").each(function(){
        if ($(this).attr('data-attribute1').search(new RegExp(filter, "i")) < 0 &&
            $(this).attr('data-attribute2').search(new RegExp(filter, "i")) < 0 &&
            $(this).attr('data-attribute3').search(new RegExp(filter, "i")) < 0 &&         
            ) {
            $(this).animate({opacity:0.1},100);
        } else {
            $(this).animate({opacity:0.5},100);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:00:05.640

You could use `.data()` to access those attributes a little easier and then collect them into an array from which you perform the regular expression test on each of them:

```
var $this = $(this),
attribs = [$this.data('attribute1'), $this.data('attribute2'), $this.data('attribute3')],
re = new RegExp(filter, "i");

if (attribs.some(function() {
    return this.match(re);
})) {
    // some attributes matched the filter
} else {
    // no attributes matched the filter
} 
```

See also: [`Array.some()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:53:10.297

你有没有看过这个...

[http://api.jquery.com/multiple-attribute-selector/](http://api.jquery.com/multiple-attribute-selector/)

似乎是你的追求。

但也许更像...

```
if ($(this).has([attr1],[attr2])){
   //do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:28:21.890

如果您不提前知道属性名称，或者您不想知道它们，只需在其中搜索值的任意一组属性，那么就像这样

```
 $(".classToSearch").each(function() {
        var _in = $(this).text();
        $.each($(this).data(), function(k, v) {
            if (v == find) {
                // ...
            }
        });
    }); 
```

在 JSFiddle：http: [//jsfiddle.net/yJLzQ/1/](http://jsfiddle.net/yJLzQ/1/)

# objective-c - DDMathParser：解析包含 if 语句的公式

> ID：13935508
> 
> 赞同：0
> 
> 时间：2012-12-18T14:51:02.803
> 
> 标签：objective-c, ios, parsing, nspredicate

我已经开始`DDMathParser`在我当前的项目中实现，我使用这个框架来计算公式的结果，并结合字典中给出的变量（*变量替换*）。

是否可以`if`在公式中使用类似语句，例如 " `if ($a > 0) { $b / $c } else {$b * 1000}`？

我假设`if`可以以与新函数类似的方式创建语句（如[DDMathParser Wiki](https://github.com/davedelong/DDMathParser/wiki/Adding-New-Functions)中所述）。如果是这样的话，如果有人能告诉我如何做到这一点，我会很高兴。

关于如何使用`if`语句的任何想法或提示`DDMathParser`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:12:43.883

`DDMathParser`作者在这里...

这实际上是不可能的，但不是你想的那样。 `DDMathParser`可以解析`if`就好了。这是它会遇到问题的花括号。你也许可以这样做：

```
if ($a > 0) ($b / $c) else ($b * 1000) 
```

这将被解析为：

```
if($a > 0) * ($b / $c) * else($b *1000) 
```

这是`NSLogged`：

```
multiply(multiply(if(l_gt($a,0)),divide($b,$c)),else(multiply($b,1000))) 
```

所以，你可以做到，但尝试自己处理范围是一件非常痛苦的事情。我认为将字符串预解析为各个部分可能会更容易：

```
if ($a > 0) => if(l_get($a, 0))
($b / $c) => divide($b, $c)
($b * 1000) => multiply($b, 1000) 
```

然后自己处理。

# c# - 如何使用 Microsoft.Interop Excel 从 MS Excel 访问 OLE 对象

> ID：13935510
> 
> 赞同：1
> 
> 时间：2012-12-18T14:51:09.417
> 
> 标签：c#, excel, interop, openxml-sdk, epplus

我正在尝试访问作为 OLE 对象的报告（嵌入到 Excel 工作表中）。

我正在尝试使用 Microsoft.Interop.Excel API 从 C# 控制台应用程序执行此操作。

我能够成功地遍历工作表中存在的 OLE 对象。**但是，当我尝试访问 OLEObject 实例的*Object*属性时，我遇到了 COM 异常。**

有没有人在成功之前尝试过这样做。请帮助我提供示例代码。

我为 POC 尝试的代码如下

```
static void Main(string[] args)
    {
        string fileName = string.Empty // some excel file path
        Application _excelApp = new Application();
        _excelApp.AutomationSecurity = MsoAutomationSecurity.msoAutomationSecurityForceDisable;

        Workbook workBook = _excelApp.Workbooks.Open(fileName,
     Type.Missing, Type.Missing, Type.Missing, Type.Missing,
     Type.Missing, Type.Missing, Type.Missing, Type.Missing,
     Type.Missing, Type.Missing, Type.Missing, Type.Missing,
     Type.Missing, Type.Missing);

        for (int i = 1; i <= workBook.Sheets.Count; i++)
        {
            var sheet = workBook.Sheets[i] as Worksheet;

            try
            { 
                OLEObject obj = sheet.OLEObjects("BReport") as OLEObject;
                Console.WriteLine(obj.Name);
                Console.WriteLine(obj.Object.ToString());                    
            }
            catch
            {                  
                continue;
            }
        } 
```

提前致谢..

# php - 动态水印 php 脚本给出“图像无法显示，因为它包含错误”

> ID：13935517
> 
> 赞同：0
> 
> 时间：2012-12-18T14:51:30.603
> 
> 标签：php, dynamic, watermark

我尝试在本地主机中使用[http://www.htmlguard.com/articles/dynamic-image-watermarks-with-php/](http://www.htmlguard.com/articles/dynamic-image-watermarks-with-php/)脚本。当我运行它时，它会给出“图像无法显示，因为它包含错误”消息。我没有更改脚本中的任何内容。我正在使用 wamp 运行 php 脚本。

你知道为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:57:06.283

add the gd extentions in wampmanger - You should be able to add it from the php menu called something like php_gd

# xml - 我可以在 XML Schema 元素名称中使用正则表达式吗？

> ID：13935527
> 
> 赞同：2
> 
> 时间：2012-12-18T14:52:10.510
> 
> 标签：xml, xsd

我正在尝试为我通过的一段代码生成的 XML 创建一个 XML 模式。我将描述我的问题的简化版本。假设这段代码生成的 XML 文件描述了一个文本文档；它看起来像这样：

```
<document>
  <r1>A line of text</r1>
  <r2 style="bold">Another line which is bold</r2>
  <r3>Yet another line</r3>
</document> 
```

等等。我知道，这不是最好的设计——如果行号是属性会更好，但这就是我必须使用的。它代表了问题所在的行号。有没有办法编写一个模式，让我为**元素名称**指定一个正则表达式（或类似的） ？我希望 XSD 文件看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
        targetNamespace="http://www.example.org/SimpleSchema" 
        xmlns:tns="http://www.example.org/SimpleSchema" 
        elementFormDefault="qualified">
    <xs:element name="document">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="rX" minOccurs="1" maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:simpleContent>
                            <xs:extension base="xs:string">
                                <xs:attribute name="style" type="xs:string" />
                            </xs:extension>
                        </xs:simpleContent>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
 </xs:schema> 
```

*...其中第 9 行的“rX”是表示“以**r**开头并以 X 结尾的名称，它是一个整数*”所需的任何表达式。

我宁愿避免自己修复生成代码，所以我想看看是否可以先编写一个合适的 XML Schema。提前感谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T16:15:44.360

XSD requires that element names be specified literally; the kind of declaration I think you have in mind is not supported.

As you have described it (*a name starting with r and ending with X, which is an integer*), the declaration you would like to write would produce an infinite number of element components in the schema; the only grammatical formalism I know that supports this kind of thing is the two-level grammar developed by Aard van Wijngaarden for Algol 68.

So in the short run, your best options appear to be either to change the generating code, or to invent your own notation for your desired declaration and generate a legal XSD schema document from it.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T08:35:34.660

在 XSD 1.1 中，您可以使用 xs:any 来允许具有任何名称的元素，然后使用断言将名称限制为与正则表达式匹配的名称：

```
 <xs:complexType>
        <xs:sequence>
            <xs:any minOccurs="1" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:assertion test="every $x in * 
                            satisfies matches(local-name($x), '[Rr][0-9]+')"/>
    </xs:complexType> 
```

XSD 1.1 目前在 Xerces (beta) 和 Saxon (9.4) 中实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:06:44.410

我对 XSD 文件的 RegEx 功能并不十分熟悉，但表达式本身相当简单。

这将捕获“rX”行号。

```
<([Rr][0-9]{1,})> 
```

如果您不能使用捕获组，您可以简单地使用它。

```
[Rr][0-9]{1,} 
```

# knockout.js - knockout sortable and updating observableArray doesn't work

> ID：13935531
> 
> 赞同：0
> 
> 时间：2012-12-18T14:52:25.417
> 
> 标签：knockout.js

Actually I have 2 problems in my code, here is the link to my **[jsFiddle Not Working Demo](http://jsfiddle.net/pkysylevych/Q4UrP/)**.
**Problem 1:** I can't drag and drop any item from one list to another.
**Problem 2:** After drag and drop will work, how can I change my specific item from array?

Here is my observable array:

```
self.customExportFileArray = ko.observableArray([
      {
        "IncludeInExportConversionTypesSelectList" :
          [
            {
              "ConversionGroupID" : "1",
              "Title" : "Quote Start - Auto"
            },
            {
              "ConversionGroupID" : "2",
              "Title" : "Quote Finish - Auto"
            },
            {
              "ConversionGroupID" : "3",
              "Title" : "Sales Data"
            }
          ],
        "ChooseFromConversionTypesSelectList" : [],
        "FileName" : "Template1"
      },
      {
        "IncludeInExportConversionTypesSelectList":
          [
            {
              "ConversionGroupID" : "1",
              "Title" : "Quote Start - Auto"
            },
            {
              "ConversionGroupID" : "2",
              "Title" : "Sales Data"
            }
          ],
        "ChooseFromConversionTypesSelectList":
          [
            {
              "Title" : "Quote Finish - Auto"
            }
          ],
        "FileName" : "Template2"
      }
    ]); 
```

So, for example, I chose 'Template1' from my dropdown, `selectedTemplate` property will takes second item from array and after I move items from left to the right sides and vise versa `IncludeInExportConversionTypesSelectList` (right side of list) and `ChooseFromConversionTypesSelectList` (left side of list) arrays should be updated, and clicking on `Grab all data from specific template` button it should return me updated specific array (according to pre-selected dropdown control).

Does anyone know what am I doing wrong? Because I had working code before adding dropdown.

*Any help would be highly appreciated*.
*Thanks in advance*.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:38:59.633

The sortable plugin expects the arrays that you are dragging items between to be observableArrays. In your case, only your overall array is observable.

You would want to make sure that the individual arrays are observable. Here is a sample: [http://jsfiddle.net/rniemeyer/bSuJx/](http://jsfiddle.net/rniemeyer/bSuJx/)

```
 self.customExportFileArray = ko.observableArray([
      {
        "IncludeInExportConversionTypesSelectList" : ko.observableArray(
          [
            {
              "ConversionGroupID" : "1",
              "Title" : "Quote Start - Auto"
            },
            {
              "ConversionGroupID" : "2",
              "Title" : "Quote Finish - Auto"
            },
            {
              "ConversionGroupID" : "3",
              "Title" : "Sales Data"
            }
          ]),
        "ChooseFromConversionTypesSelectList" : ko.observableArray([]),
        "FileName" : "Template1"
      },
      {
        "IncludeInExportConversionTypesSelectList": ko.observableArray(
          [
            {
              "ConversionGroupID" : "1",
              "Title" : "Quote Start - Auto"
            },
            {
              "ConversionGroupID" : "2",
              "Title" : "Sales Data"
            }
          ]),
        "ChooseFromConversionTypesSelectList": ko.observableArray(
          [
            {
              "Title" : "Quote Finish - Auto"
            }
          ]),
        "FileName" : "Template2"
      }
    ]); 
```

If this represents data coming from the server, then you would likely need to process it to make observableArrays before applying bindings.

# javascript - 径向图表上的拉斐尔夏娃动画

> ID：13935534
> 
> 赞同：2
> 
> 时间：2012-12-18T14:52:43.263
> 
> 标签：javascript, raphael

有人可以看看这个，看看为什么计数不适用于第一个图表。

```
$(document).ready(function() {

    display_chart(54,'overall');
    display_chart(55,'test');

});

function display_chart(amount,div){

    var paper = Raphael(document.getElementById(div), 500, 500);
    paper.customAttributes.arc = function(xloc, yloc, value, total, R) {
        var alpha = 360 / total * value,
            a = (90 - alpha) * Math.PI / 180,
            x = xloc + R * Math.cos(a),
            y = yloc - R * Math.sin(a),
            path;
        if (total == value) {
            path = [
                ["M", xloc, yloc - R],
                ["A", R, R, 0, 1, 1, xloc - 0.01, yloc - R]
                ];
        } else {
            path = [
                ["M", xloc, yloc - R],
                ["A", R, R, 0, +(alpha > 180), 1, x, y]
                ];
        }
        return {
            path: path
        };
    };

    var backCircle = paper.circle(150, 100, 70).attr({
        "stroke": "#d0e8cf",
        "stroke-width": 25
    });

    var theArc = paper.path().attr({
        "stroke": "#66cc66",
        "stroke-width": 25,
        arc: [50, 100, 0, 100, 70]
    });

    //event fired on each animation frame
    eve.on("raphael.anim.frame.*", onAnimate);

    //text in the middle
    theText = paper.text(150, 100, "0%").attr({
        "font-size": 36,
        "font-face" : "Droid Sans",
        "fill": "#666666",
        "font-weight": "bold"
    });

    //the animated arc
    theArc.rotate(180, 100, 100).animate({
        arc: [50, 100, amount, 100, 70]
    }, 1900, function() {
        //when the animation is done unbind
        eve.unbind("raphael.anim.frame.*", onAnimate);
    });

    function onAnimate() {
        var howMuch = theArc.attr("arc");
        theText.attr("text", Math.floor(howMuch[2]) + "%");
    }

} 
```

[http://jsfiddle.net/pVcSb/](http://jsfiddle.net/pVcSb/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:30:52.420

你需要用'var'关键字声明你的var“theText”

```
var theText = ... 
```

使用“use strict”来避免这种错误

[http://jsfiddle.net/pVcSb/1/](http://jsfiddle.net/pVcSb/1/)

# html - 将带有 CSS 的 HTML 导出为 PDF 脚本

> ID：13935535
> 
> 赞同：1
> 
> 时间：2012-12-18T14:52:44.083
> 
> 标签：html, css, pdf-generation

有没有办法将 HTML + CSS 代码转换为 pdf，这样看起来不像打印网页？

到目前为止，我一直在使用`page-break-before`浏览器等将我的页面导出为 pdf。但是我得到了可怕的利润，而且它太特定于浏览器了。我正在寻找与 Latex 或 Powerpoint 演示文稿导出相同的外观和感觉：居中、适当的边距、自定义页面大小。

知道将格式正确的 html 页面导出为 pdf 的脚本吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:06:52.917

有一个名为**wkhtmltopdf**的工具，可以通过简单的命令行调用将 HTML 和 CSS 转换为 PDF。该工具可以手动使用，也可以放在某种脚本中，通过单击按钮或您拥有的东西运行。我在 PHP 中这样使用它：

```
$cmd = "/path/to/wkhtmltopdf /path/to/sourceHTML.html /path/to/outputPDF.pdf";
$output = shell_exec($cmd); 
```

它非常易于使用且功能强大，可用于创建报告。你可以在这里下载：

[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:00:20.093

您可以尝试 LibreOffice，但结果可能会有所不同。

# asp.net - 我可以在我的 webforms 项目中使用 Kendo.MVC UI 控件吗？

> ID：13935536
> 
> 赞同：3
> 
> 时间：2012-12-18T14:52:46.027
> 
> 标签：asp.net, asp.net-mvc-3, telerik, kendo-ui

我们购买了所有 Kendo 框架，但我有一个基于 Web 表单的小项目，我喜欢只使用几个 Kendo UI 控件、列表视图和网格。

我可以获取源代码并编译它们或以任何方式使用它们吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T15:53:05.197

您不能在 webforms 项目中使用 Kendo UI MVC 包装器。但是，您可以使用仅限 JavaScript 的版本。只需将所需的 JavaScript 和 CSS 文件包含到您的页面中。检查[入门帮助主题](http://docs.kendoui.com/getting-started/downloading-kendo)。

# spring - 如何访问 JAR 文件中的属性？

> ID：13935540
> 
> 赞同：3
> 
> 时间：2012-12-18T14:52:51.227
> 
> 标签：spring, properties, jar, classpath, applicationcontext

我正在使用 Spring 3.1.1.RELEASE。我无法访问 JAR 文件中包含的属性文件。我有一个具有这种结构的 JAR……</p>

```
/encryption.properties
/META-INF/spring/applicationContext-user.xml 
```

在“applicationContext-user.xml”文件中我有

```
<!-- Define hashing properties -->
<bean id="localPropertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location">
        <value>classpath:encryption.properties</value>
    </property>
</bean>
...
<beans:bean id="jasyptStringDigester" class="org.jasypt.digest.StandardStringDigester">
    <beans:property name="algorithm">
        <beans:value>${digest.algorithm}</beans:value>
    </beans:property>
    <beans:property name="provider">
        <beans:ref bean="bcProvider" />
    </beans:property>
    <beans:property name="saltGenerator">
        <beans:ref bean="saltGenerator" />
    </beans:property>
    <beans:property name="saltSizeBytes" value="${salt.bytes.length}" />
</beans:bean> 
```

我将上述 JAR 包含在我的 WAR 文件中（在其 WEB-INF/lib 目录中），当我部署我的 WAR 时，出现错误

```
08:39:41,796 INFO  [org.springframework.beans.factory.support.DefaultListableBeanFactory] (MSC service thread 1-4) Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@129a92f: defining beans [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping#0,org.springframework.format.support.FormattingConversionServiceFactoryBean#0,org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0,org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter#0,org.springframework.web.servlet.handler.MappedInterceptor#0,org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver#0,org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver#0,org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver#0,org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping,org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter,org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter,accountDao,accessCodeDaoImpl,SBTrainerDaoImpl,trainingLinkDAOImpl,trainingSessionDAOImpl,opportunityDao,orderDao,orderLineItemDAO,myclientOrganizationDaoImpl,POForOpportunityDAO,quoteLineItemDaoImpl,SBPersonDaoImpl,trainingAssignmentDao,trainingLocationDaoImpl,accessCodeServiceImpl,opportunitiesService,orderService,trainingSessionService,standardsDaoImpl,standardsServiceImpl,stateDaoImpl,organizationTypeDaoImpl,countryDaoImpl,addressDaoImpl,organizationDao,addressServiceImpl,organizationTypeServiceImpl,organizationService,stateServiceImpl,countryServiceImpl,contractDaoImpl,productDaoImpl,contractServiceImpl,productServiceImpl,coreDaoImpl,roleDaoImpl,userDaoImpl,userServiceImpl,roleServiceImpl,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,localPropertyConfigurer,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,bcProvider,jasyptStringDigester,saltGenerator,passwordEncoder,applicationProperties,dataSource,entityManagerFactory,sharedEntityManager,transactionManager,myclientClient,updateOrdersJob,updateOrdersCronTrigger,updatePDJob,updatePDCronTrigger,org.springframework.scheduling.quartz.SchedulerFactoryBean#0,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
08:39:41,802 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-4) Context initialization failed: org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'jasyptStringDigester' defined in class path resource [META-INF/spring/applicationContext-user.xml]: Could not resolve placeholder 'digest.algorithm'
at org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:209) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:220) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:84) [spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:681) [spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:656) [spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446) [spring-context-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111) [spring-web-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.10.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [classes.jar:1.6.0_37]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [classes.jar:1.6.0_37]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_37] 
```

所以我的问题是，我应该如何在 JAR 的应用程序上下文文件中正确引用我的属性文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:55:16.923

我通过在 propertyConfigurer bean 中设置“ignoreUnresolvablePlaceholders”属性解决了这个问题。

```
<!-- Define hashing properties -->
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:encryption.properties</value>
        </list>
    </property> 
    <property name="ignoreUnresolvablePlaceholders" value="true"/>
</bean> 
```

I rock! I mean, Google and other people asking this question before rock.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T01:35:34.817

我认为您的位置应该是：

```
classpath*:encryption.properties 
```

由于该文件位于 JAR 文件的类路径中，而不是 WAR 文件中。将 * 放入告诉配置器在所有类路径中搜索文件。

# php - 使用计时器显示和隐藏多个 div

> ID：13935546
> 
> 赞同：0
> 
> 时间：2012-12-18T14:53:05.787
> 
> 标签：php, javascript, jquery, ajax, timer

我正在尝试制作一个消息框，它将显示活动消息，一次来自 MySQL 表。我不知道会有多少 div，因为它可以是我的数据库中任意数量的活动消息。现在我已经通过 ajax 计时器和 php 脚本打印出我需要的 div，该计时器每 20 秒不断查询数据库以检查新消息。我的 php 脚本打印出这样的 div：

```
include 'status.php';

$strings = Status::messages();
$i = 1;
foreach($strings as $string){
  print '<div id="'.$i.'">'.$string.'</div>';
  $i++;
} 
```

这会打印一个 id 从 1 到 x 的完整 div。现在我需要一个可以一次显示其中一个 div 的 JavaScript 函数。要获得 div 的总数，我这样做：

```
var top_level_div = document.getElementById('messagecontainer');
var count = top_level_div.getElementsByTagName('div').length; 
```

我不知道如何从这里走。

编辑：

这是我加载消息的ajax计时器：

```
ajaxTimer8 = new Ajax.PeriodicalUpdater('messagecontainer', 'includes/messagereloader.php', {
     method: 'get', frequency: 20, decay: 1,
     onSuccess : function() {
     pollCounter = 11;
     }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:37:22.807

好的，我试图模拟 div 已经存在：

```
<div id="messagecontainer">
    <div>1</div>
    <div>2</div>
    <div>3</div>
</div>​ 
```

messagecontainer 中的 div 默认是隐藏的（不显示）：

```
// in your css
#messagecontainer > div {
  display: none;
}​ 
```

现在在我们的脚本中，我们创建一个每 15 秒运行一次的间隔，将前一个 div 设置为不显示，将当前 div 设置为显示块：

```
var top_level_div = document.getElementById('messagecontainer')
  , divs = top_level_div.getElementsByTagName('div')
  , counter = 0
  , interval = window.setInterval(function() {

      // hide the previous div if it exists (counter > 0)
      if(divs[counter - 1]) {
          divs[counter - 1].style.display = "none";
      }

      // set the current div visible
      divs[counter].style.display = "block";
      counter += 1;

      // have we finished all divs? then clear the interval
      if(counter === divs.length) {
         window.clearInterval(interval);
      }
    }, 15000); // run that every 15 seconds​ 
```

在这里查看一个工作示例：http: [//jsfiddle.net/ZY4Vb/2/](http://jsfiddle.net/ZY4Vb/2/)

# phpmyadmin - 像 LDAP 的 PHPMyAdmin 之类的东西？

> ID：13935547
> 
> 赞同：1
> 
> 时间：2012-12-18T14:53:06.033
> 
> 标签：phpmyadmin, ldap, openldap

有谁知道 LDAP 的 PHPMyAdmin 之类的东西？我一直在寻找但没有找到任何免费的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:55:34.300

是的，有[http://phpldapadmin.sourceforge.net/wiki/index.php/Main_Page](http://phpldapadmin.sourceforge.net/wiki/index.php/Main_Page) -> PhpLdapAdmin

# ios - 如何在 NSDate 字段的 CoreData 中输入 null 或 nil 值

> ID：13935549
> 
> 赞同：1
> 
> 时间：2012-12-18T14:53:08.920
> 
> 标签：ios, core-data, nsdate

我正在制作一个聊天应用程序，在我的聊天列表中，我希望最近的活动（聊天请求或消息）应该放在首位。因此，当我收到任何活动时，我会节省系统时间，但请记住是否有任何请求，但如果它没有时间然后我输入系统时间，否则每次我点击服务时，我得到的响应都会不断更新以前的记录，并且它总是在最前面。但是，当我从列表中删除记录时，我想为时间（NSDate）输入 null 或 nil，因为当下次请求到来时，我输入新时间。如何为 NSDate 输入 nil 值。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-30T11:27:18.510

我找到了解决这个问题的方法。我刚刚在 CoreData 的 NSDate 字段中输入了空字符串，它将其解释为空值。

# c++ - 如何将 CPoint 对象转换为字符串？

> ID：13935551
> 
> 赞同：1
> 
> 时间：2012-12-18T14:53:12.070
> 
> 标签：c++, mfc, type-conversion

我有一个`std::array`要在 mfc 应用程序中输出的 CPoint 对象：

```
std::array<CPoint,11> v = pDoc->m_ElementList.back();

    for(int j=0;   j < v.size();  j++ )
        aDC.TextOutW(x+=3,y+=3, _T(v[n++])); 
```

现在`_T(v[n++])`显然不起作用，因为它是 CPoint 对象，而不是字符串。如何以这种方式输出 CPoint 对象？或者我怎样才能将它们转换成字符串以这样的方式使用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:55:51.400

```
CString s;
CPoint p;

s.Format("x=%d / y=%d",p.x,p.y); 
```

对于 std::string 使用`sprintf`或者`std::stringstream`.

```
stringstream ss;
ss << "x=" << p.x << "/" << "y=" << "p.y"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:56:11.683

我不知道可以做什么`CPoint`或可以做什么，但我认为您必须编写如下内容：

```
std::wstring to_wstring(const CPoint& point)
{
  #ifdef HAS_CPP11
  using std::to_wstring;
  return to_wstring(point.x) + L"; " + to_wstring(point.y);
  #else
  std::wstringstream s;
  s << point.x << L"; " << point.y;
  return s.str();
  #endif
}

std::string to_string(const CPoint& point)
{
  /*..*/
} 
```

# android - ICS 上的 HLS 支持

> ID：13935556
> 
> 赞同：1
> 
> 时间：2012-12-18T14:53:24.577
> 
> 标签：android, http-live-streaming, stagefright

我们在某些硬件上安装了 ICS 操作系统，我们需要在其中播放安全的 m3u8（使用密钥文件，就像 IOS 处理方式一样）。

我们需要以多种方式控制播放，例如快进、快退、动态操作流以及在其间显示广告等。

我们认为如果我们能够使用android播放器播放.ts文件，这一切都可以解决，这样我们可以一次访问许多m3u8并编写我们自己的（可以充当代理）并将ts流提供给播放器。这里我们甚至可以操纵许多 m3u8 ts 流并即时组合。

需要了解是否可能？Stagefright 框架在内部如何处理？有人了解 Stagefright 框架吗？

我们只希望它在我们的硬件上播放，我们不需要其他操作系统支持。让我知道任何相同的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:10:28.400

我建议忽略 Android 类中的 HLS 支持，并尝试使用 C 中的底层视频框架的方法。

看看 XBMC 项目如何加载视频解码器库：[https](https://github.com/xbmc/xbmc/tree/master/xbmc/cores/) ://github.com/xbmc/xbmc/tree/master/xbmc/cores/ amlplayer 和 omxplayer 包含不同芯片组的实现。我不知道您使用的是什么芯片组，但它可能是其中之一。还有支持 tegra 的 xbmc 分支。

# vba - 插入行或列时如何更新 VBA 程序

> ID：13935561
> 
> 赞同：0
> 
> 时间：2012-12-18T14:53:43.097
> 
> 标签：vba

您好我已经准备了一个在 Excel 中使用 VBA 的程序，以便从包含各个部分属性的表中获取选定部分的属性。

正确的是，每当我在目标表中添加新的行或列甚至单元格时，我的完整 VBA 程序就会变得毫无价值。有人可以建议我在插入或删除行、列或单元格时如何自动更新程序。

例如，在电子表格本身中，我们在其中一个单元格中编写公式，如果您在其上方插入新行，则公式会自动更新为公式中包含的单元格的新地址。

希望我清楚表达我的怀疑。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:44:44.873

听起来您希望程序中的单元格引用保持不变，即使单元格移动。

为此，您将需要使用*[命名范围](http://www.myonlinetraininghub.com/excel-2007-named-ranges-explained)*。

然后，您必须将程序从使用更改`Range("A1")`为`Range("NamedArea")`

电子表格更改时将更新命名范围，因此引用将保持正确

# mysql - SQL 查询不受注入，但

> ID：13935570
> 
> 赞同：2
> 
> 时间：2012-12-18T14:54:27.893
> 
> 标签：mysql, sql, sql-injection

有时我会在我的网络服务器日志中得到这个：

> [09-Dec-2012 15:35:45 Europe/Berlin] PHP 警告：mysql_query() [function.mysql-query]：/bar/ 中用户 'root'@'localhost' 的访问被拒绝（使用密码：否）第 4 行的 foo.php

第 4 行是：

```
$sql=mysql_query("select * from mytablefoo ORDER BY id DESC LIMIT 9"); 
```

看起来有人试图使用默认的 root 用户名登录。有什么办法可以防止这种情况发生，即使它没有害处？他是如何通过那行代码进行连接的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:57:41.773

`mysql_query()`如果尚未建立连接，该函数会尝试使用默认用户名和密码（在 php.ini 中配置）连接到 mysql 服务器。那是因为它应该运行一个查询，如果`mysql_connect()`还没有被调用，它就不能。

这里唯一错误的是 PHP 代码。顺便说一句，在不止一个级别上。这些天应该使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO 。](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:10:16.673

这个错误意味着这个文件在这种情况下试图在没有正确权限的情况下访问您的数据库，使用所有默认值而没有任何密码）。

我猜您的数据库凭据存储在另一个文件中。你可以像这样引用这个文件：

```
include( $_SERVER['DOCUMENT_ROOT'] . '/filepath/db.php'); 
```

我知道该`$_SERVER`数组部分由访问您网站的用户填充。这意味着其中一些变量可以为空或以其他方式被篡改。例如，当通过 a 激活页面时`CRON Job`，此特定变量将为空。

IIRC，也可以通过访问网站的 IP 地址而不是域名来操纵这个数组（即：`http://192.168.0.1/bar/foo.php`而不是`http://example.com/bar/foo.php`）。

您可以通过使用`__FILE__`变量而不是`$_SERVER['DOCUMENT_ROOT'];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:41:58.210

这就是我认为正在发生的事情。

您有一页（例如：）`index.php`，其中包含第二页（例如：）`/bar.foo.php`。在 上`index.php`，您建立主要连接：

```
<?php
//  index.php
//  ...
$db = mysql_connect($db, $username, $password);
//  ... 
```

在第二页上，您执行一些功能：

```
<?php
//  /bar/foo.php
//  ...
mysql_query("select * from mytablefoo ORDER BY id DESC LIMIT 9"); // TODO: use mysqli or PDO here
//  ... 
```

但是，如果您直接访问第二个文件，则没有数据库连接，因此它尝试使用默认凭据进行连接，失败并引发错误。

如果您想防止这种情况发生，那么您需要保护您的网站。我的猜测是永远不应该允许人们进入您的`/bar`文件夹。您可以通过将文件添加到此文件夹来阻止人们进入此文件`.htaccess`夹。

`.htaccess`文件让您可以控制用户如何与您网站上的文件进行交互。只需创建一个新的文本文件，并将其另存为`.htaccess`（此文件在 . 之前没有任何内容`.`）。

将此文件放入您的`/bar`文件夹中，并将以下文本放入文件中：

```
deny from all 
```

现在，如果有人尝试直接访问此文件夹，他们将看到一条 403 错误消息。PHP 文件仍然可以被其他页面包含。

您可以在此处了解更多信息`.htaccess`：

[http://perishablepress.com/stupid-htaccess-tricks/](http://perishablepress.com/stupid-htaccess-tricks/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:01:17.450

mysql_query 是没有连接回退到 php.ini 中的默认值来连接（执行 phpinfo(); 来查看这些）

默认设置无法连接到 root 并给出该错误。

同意 Gung Foo 使用 mysqli 或 PDO

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T15:02:45.643

`using password: NO` 表示您没有密码。尝试进入管理员并设置密码，然后它将是`: YES`。或为`root`

正如其他人所说，使用 PDO 或 mysqli

# c# - 如何在导出为 pdf 时区分 2 个网格

> ID：13935572
> 
> 赞同：-2
> 
> 时间：2012-12-18T14:54:29.510
> 
> 标签：c#, datagridview, itextsharp

我有 2 个网格需要导出为 pdf...

现在我可以出口了.. 但是

我可以区分 2 个网格......这意味着 2 个网格正在添加到一个表中......

我需要两个网格之间的空间，以便我可以区分......

我怎样才能在 2 个网格之间保持空白……这是我的代码

gridview1: gvrpaList gridview1: rptisslst

```
 protected void btnExportPDF_Click(object sender, EventArgs e)

  {

  Response.ContentType = "application/pdf";

Response.AddHeader("content-disposition",

"attachment;filename=GridViewExport.pdf");

Response.Cache.SetCacheability(HttpCacheability.NoCache);

StringWriter sw = new StringWriter();

HtmlTextWriter hw = new HtmlTextWriter(sw);

gvrpaList.AllowPaging = false;

//gvrpaList.DataBind();

gvrpaList.RenderControl(hw);

gvrpaList.HeaderRow.Style.Add("width", "15%");

gvrpaList.HeaderRow.Style.Add("font-size", "15px");

gvrpaList.Style.Add("text-decoration", "none"); 

gvrpaList.Style.Add("font-family", "Arial, Helvetica, sans-serif;");

gvrpaList.Style.Add("font-size", "8px");

rptisslst.AllowPaging = false;

rptisslst.RenderControl(hw);

rptisslst.HeaderRow.Style.Add("width", "15%");

rptisslst.HeaderRow.Style.Add("font-size", "15px");

rptisslst.Style.Add("text-decoration", "none");

rptisslst.Style.Add("font-family", "Arial, Helvetica, sans-serif;");
rptisslst.Style.Add("font-size", "8px");

StringReader sr = new StringReader(sw.ToString());

Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 10f, 0f);

HTMLWorker htmlparser = new HTMLWorker(pdfDoc);

PdfWriter.GetInstance(pdfDoc, Response.OutputStream);

 byte[] byteArr = Encoding.ASCII.GetBytes(sw.ToString());
 MemoryStream stream = new MemoryStream(byteArr);

 StreamReader stre = new StreamReader(stream);

  pdfDoc.Open();

  htmlparser.Parse(stre);

  pdfDoc.Close();

  Response.Write(pdfDoc);

  Response.End();
   }
   public override void VerifyRenderingInServerForm(Control control)
  {
  // verifies the control is rendered here
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:02:35.673

您可以尝试添加换行符：

```
gvrpaList.RenderControl(hw);
hw.Write("<br />");
rptisslst.RenderControl(hw); 
```

# java - 在这种情况下，如何使用 java-util-scanner 处理换行符？

> ID：13935576
> 
> 赞同：0
> 
> 时间：2012-12-18T14:54:47.157
> 
> 标签：java, input, java.util.scanner

我有一个简单的家庭作业，我正在制作一个简单的 UI（不是 GUI），并且我正在使用扫描仪进行输入。

我想读取 3 个字符串（姓名、地址、社会保险号）

但是，如果用户没有插入任何内容，只需按 Enter，我的代码就会中断。而不是我需要的 3 个字符串，我得到了更多的字符串并且它们错过了匹配。

```
Scanner input = new Scanner(System.in);
if (input.hasNext()) {
    name = input.nextLine(); 
} 
Scanner input = new Scanner(System.in);
if (input.hasNext()) {
    address = input.nextLine(); 
} 
Scanner input = new Scanner(System.in);
if (input.hasNext()) {
    ssnumb = input.nextLine(); 
} 
```

因此，如果用户按下回车键，创建一个换行符，输入就会溢出。我怎样才能避免这种情况或消除空行？

**例子：**

*进入*

缺口

火星

*一些数字*

**我会：**

`Name:`

`Address:`缺口

`Social Security Number:`火星

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:58:15.300

像这样的东西：

```
Scanner input = new Scanner(System.in);
while(!input.next().isEmpty()) { // only when you enter literal string 
//do your scanner stuff here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:04:46.463

尝试

```
Scanner input = new Scanner(System.in);
String name = "";
while(name.trim().isEmpty()) {
    name = input.next();
} 
```

# java - 字符串组合/排列

> ID：13935583
> 
> 赞同：-1
> 
> 时间：2012-12-18T14:55:14.880
> 
> 标签：java, string, algorithm, combinations

我正在尝试编写一个程序，当给定两个字符串时，它会“处理”一个字母以形成同义词。这是一个显示它的示例的网站：

[http://www.braingle.com/brainteasers/46611/letter-juggle.html](http://www.braingle.com/brainteasers/46611/letter-juggle.html)

我的任务是“编写一个程序——给定一个包含同义词对的文件和一个包含字典中单词序列的第二个文件——将尽可能多地从字典中生成可用于设置拼图的单词对每个同义词对。”

这些是文件 - [dictionary.txt](https://docs.google.com/a/tcd.ie/file/d/0ByMP-XLaZiP4N1BCQmdHSGFpZGM/edit)和[synonyms.txt](https://docs.google.com/a/tcd.ie/file/d/0ByMP-XLaZiP4VTc4bWxFZG1ZWUk/edit)。

当我想出一个单词时，我会查字典看它是否有效。因此，使用“boast”和“hip”这两个词，当我将它们组合起来时，我可以得到“boat”和“ship”（它们是同义词）。

现在，我拿了两个字符串（钉子和别针）并将它们分成一个字符数组，但我不知道如何调整它们来检查它们是否是有效的单词。

我希望能够将“nail”中的字母“n”添加到“pin”以给我“pinn”，然后我想检查“pinn”的每个组合并检查它是否是一个有效的单词 - 如果是，然后我检查“ail”是否可以是一个单词，如果不是，那么我继续“nail”中的下一个字母 pinn -> pinn, pnin, pnni, pnin......

```
public class LetterJuggle {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here
    try{
        // Open the file that is the first 
        // command line parameter
        FileInputStream fstream = new FileInputStream("Dictionary.txt"); //Dictionary.txt //Synonyms.txt
        // Get the object of DataInputStream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;
        int size =0;
        while ((strLine = br.readLine()) != null){
            size++;
        }

        String [] dictionary = new String [size];

        fstream = new FileInputStream("Dictionary.txt");
        in = new DataInputStream(fstream);
        br = new BufferedReader(new InputStreamReader(in));
        size = 0;
        //Read File Line By Line
        while ((strLine = br.readLine()) != null){
            // Print the content on the console
            dictionary[size] = strLine;
            size++; 
        }

        fstream = new FileInputStream("Synonyms.txt");
        in = new DataInputStream(fstream);
        br = new BufferedReader(new InputStreamReader(in));

        while ((strLine = br.readLine()) != null){
            //System.out.println(strLine);
            String [] words = strLine.split("\\s+");
            for(int i =0; i < words.length; i++){
                //System.out.println(words[i]);
            }
            char[] ch_array_1 = words[0].toCharArray();
            char[] ch_array_2 = words[1].toCharArray();

            for(int i =0; i < ch_array_1.length; i++){
                System.out.print(ch_array_1[i] + " ");
            }
            System.out.println();
            for(int i =0; i < ch_array_2.length; i++){
                System.out.print(ch_array_2[i] + " ");
            }
            System.out.println();
        }
        //Close the input stream
        in.close();
    }catch(Exception e){//Catch exception if any
        System.err.println("Error: " + e.getMessage());
    }    

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:05:20.717

它不一定有效，但它是一个想法。使用一些 (2) 循环并从第一个单词中取一个字母并将其添加到所有位置（从索引 0 到最后一个字母索引之后），并检查两者是否都是有效单词（删除字母的单词和新形成的单词）。（一些伪代码）

```
for (Letter l : word1)
{
    Word word1temp = extract_Letter_l_from_word(l,word1);
    check if word1temp and word2 are synonyms
    //else
    for (all letter indexes i of word2)
    {
         form word with letter L at position i and word2 form a synonim of word2
         // also maybe do this in the mirror for word2 and word1
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:17:34.630

试试这个，数组的排列：[排列的数组](http://cs.fit.edu/~ryan/java/programs/combinations/Permute-java.html "排列")

在这里发布代码，以便即使链接已过时，您可以参考这里。我认为这对你有帮助

```
导入 java.util.Iterator；

导入 java.util.NoSuchElementException；

导入 java.lang.reflect.Array；                            

公共类 Permute 实现迭代器 {                 

私有最终 int 大小；

   私有最终对象 [] 元素；// 原始 0 的副本
   私有最终对象 ar；// 输出数组，
   私有最终 int [] 排列；// 数字 1..si 的烫发

私人布尔下一个=真；                            

// int[], double[] 数组不起作用 :-( 

   public Permute (Object [] e) { 

      size = e.length;

      元素=新对象[大小]；//不适合
      System.arraycopy（e，0，元素，0，大小）；

      ar = Array.newInstance (e.getClass().getComponentType
      System.arraycopy(e, 0, ar, 0, size); 

      排列 = 新的 int [大小+1]；

      对于 (int i=0; 我
         排列[i]=i; 

      } 

   }                                                       

私人无效formNextPermutation（）{

      对于 (int i=0; 我
         // i+1 因为 perm[0] 总是 = 0

         // perm[]-1 因为数字 1..size 是
         Array.set(ar, i, elements[permutation[i+1]-1]); 

      } 

   }                                                       

public boolean hasNext() {

      返回下一个；

   }                                                       

public void remove() 抛出 UnsupportedOperationExceptio
      抛出新的 UnsupportedOperationException(); 

   }                                                       

private void swap (final int i, final int j) { 

      final int x = permutation[i]; 

      排列[i] = 排列[j]；

      排列[j] = x; 

   }                                                       

// 不抛出 NoSuchElement; 它环绕！

   公共对象 next() 抛出 NoSuchElementException {    

```
 formNextPermutation ();  // copy original elements   

  int i = size-1;                                      
  while (permutation[i]>permutation[i+1]) i--;         

  if (i==0) {                                          
     next = false;                                     
     for (int j=0; j<size+1; j++) {                    
        permutation [j]=j;                             
     }                                                 
     return ar;                                        
  }                                                    

  int j = size;                                        

  while (permutation[i]>permutation[j]) j--;           
  swap (i,j);                                          
  int r = size;                                        
  int s = i+1;                                         
  while (r>s) { swap(r,s); r--; s++; }                 

  return ar; 
```

}                                                       

```
 public String toString () {                             
  final int n = Array.getLength(ar);                   
  final StringBuffer sb = new StringBuffer ("[");      
  for (int j=0; j<n; j++) {                            
     sb.append (Array.get(ar,j).toString());           
     if (j<n-1) sb.append (",");                       
  }                                                    
  sb.append("]");                                      
  return new String (sb); 
```

}                                                       

公共静态无效主要（字符串[]参数）{

      for (Iterator i = new Permute(args); i.hasNext(); ) {
         final String [] a = (String []) i.next(); 

         System.out.println (i); 

      } 

   } 

}                                                          

```

# android - 如何在我的外部插槽 SDCARD 中创建新文件（它不在内部存储中）-“/mnt/sdcard2/”

> ID：13935584
> 
> 赞同：0
> 
> 时间：2012-12-18T14:55:16.470
> 
> 标签：android, directory, storage, sd-card

我的问题是我需要使用外部插槽 sdcard 中的文件，请不要建议我使用`Environment.getExternalStorageDirectory()`- 它是用于内部存储的，我想在外部存储中创建文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:59:27.473

关于什么

```
File myFile = new File("/mnt/sdcard2/myFile"); 
```

**编辑：** 忘了提到你必须创建文件：

```
boolean fileCreated = myFile.createNewFile();
//at this point fileCreated must be true and the file must exists on your sdcard2 
```

**编辑 ：**

从 File.createNewFile() javadoc：

```
/**
 * ...
 * @return true if the file has been created, false if it
 *         already exists.
 * @throws IOException if it's not possible to create the file.
 */ 
```

所以要么创建文件，要么它已经存在，要么你得到一个 IOException... 或者你的代码没有调用 createNewFile() ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:39:18.830

我不认为这是可能的。当我在自己的应用程序上工作时，如果有内部可写内存，我也会遇到同样的问题。搜索了几天试图找出如何获得实际的外部 SD 卡但没有运气。

我认为这是因为android使用存储的方式，内部sd卡称为SDCARD，外部sd卡链接到SDCARD0（或者类似的东西我不记得了）。当您运行 getExternalStorage 时，它​​只会查找 SDCARD 并转到内部存储。

# android - 使用 PhoneGap 创建支持广告的 Web 应用程序

> ID：13935586
> 
> 赞同：1
> 
> 时间：2012-12-18T14:55:22.510
> 
> 标签：android, ios, web-applications, cordova, ads

我即将完成一个使用 jQuery mobile 的 Web 应用程序，并且想知道是否有人可以帮助我了解他们如何使用 PhoneGap 创建（可选）广告支持的 Web 应用程序。据我所知，您必须将广告放在本机应用程序级别，因为显然如果它们在网络应用程序中，您将无法拥有无广告版本。

我的主要问题是，你有什么方法可以阻止人们仅仅浏览到 PhoneGap webviews 指向的 URL？如果流量不是来自 PhoneGap 应用程序（而不是通过本机浏览器浏览的移动设备），是否有某种检测机制允许我重定向流量？我宁愿只允许通过这些“本机”PhoneGap 应用程序进行访问。

到目前为止，我已经找到了这三个链接（[1](https://stackoverflow.com/questions/10347539/detect-between-a-mobile-browser-or-a-phonegap-application)、[2](https://stackoverflow.com/questions/8068052/phonegap-detect-if-running-on-desktop-browser)、[3](http://bennolan.com/2011/08/22/phonegap-detection.html)），但对 SO 社区如何解决这个问题感到好奇。任何帮助是极大的赞赏。

# maven - maven 与 assembly:assembly 一起工作，但在 assembly:single 中失败

> ID：13935587
> 
> 赞同：1
> 
> 时间：2012-12-18T14:55:30.637
> 
> 标签：maven, maven-assembly-plugin

我有一个使用 mvn assembly:assembly 命令成功打包的 maven 项目，但是我看到这个目标已被[弃用](http://maven.apache.org/plugins/maven-assembly-plugin/assembly-mojo.html)，所以我尝试按照建议使用 mvn assembly:singe，但现在我收到以下错误：

**[警告] jarfile 缺少 POM...**

**[警告] [弃用] 在根项目程序集中检测到 moduleSet/binaries 部分。**

“jarfile”是我本地存储库中存在的 jar。知道为什么它是为 assembly:assembly 目标找到的，但不是为 assembly:single 找到的吗？

# javascript - 在 Require.js 中使用多个版本的 jQuery

> ID：13935588
> 
> 赞同：3
> 
> 时间：2012-12-18T14:55:32.713
> 
> 标签：javascript, jquery, requirejs

我有一种情况，我必须在同一页面上运行两个版本的 jQuery（基本上，有一个运行 1.4.2 的网站，我有一个运行需要 1.8.2 的脚本的书签，我知道这不是一个好主意但我现在坚持下去）。

现有版本是 1.4.2 合一，需要的较新版本是 1.8.2。

我正在使用 require.js 并[**在这里看到了这个问题**](https://stackoverflow.com/questions/4858431/use-requirejs-and-jquery-without-clobbering-global-jquery)的帖子，但不太明白最好的方法是什么：

就我而言，我有一个模块 main.js：

```
(function () {
var root = this;

require.config({
    baseUrl: "http://localhost:9185/scripts/app/"      
});

define3rdPartyModules();
loadPluginsAndBoot();

function define3rdPartyModules() {
    define('jquery', [], function () { return root.jQuery.noConflict(true); });              
    define('ko', [], function () { return root.ko; });       
}

function loadPluginsAndBoot() {      
    requirejs([], boot);
}

function boot() {        
    require(['bootStrapper'], function (bs) { bs.run(); });
}
})(); 
```

然后是一些与此类似的其他模块：

```
define('bootStrapper', ['jquery', 'presenter', 'repository', 'dataPrimer'],
function ($, presenter, repository, dataPrimer) {
    //some stuff here 
```

我是 requirejs 的新手，并且在使用 1.4.2 版本加载 main.js 之前加载它，如下所示：

```
 $.getScript("http://localhost:9185/bundles/jsextlibs?v=GOyDBs-sBDxGR5AV4_K-m-   OK9DoE0LGrun5FMPyCO9M1", function () {     
    $.getScript("http://localhost:9185/Scripts/lib/require.js", function () {        
        $.getScript("http://localhost:9185/bundles/jsapplibs?v=9TJUN0_624zWYZKwRjap4691P170My5FUUmi8_fzagM1");
        $.getScript("http://localhost:9185/Scripts/main.js");
    });
}); 
```

有人可以告诉我如何修改我的代码，以便我的所有模块都能够使用 1.8.2 版本，而不会干扰已经在 1.4.2 上运行的代码。

谢谢

戴维

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-28T13:05:42.023

```
var reqOne = require.config({
context: "version1",
baseUrl: 'scripts/',
paths: {
    jquery: 'lib/jquery.min',
}
});

var reqTwo = require.config({
    context: "version2",
    baseUrl: 'scripts/',
    paths: {
        jquery: 'lib/jquery.modern',
    }
});

reqOne(["helper/util"], function(require,util) {
        //This function is called when scripts/helper/util.js is loaded.
            //If util.js calls define(), then this function is not fired until
                //util's dependencies have loaded, and the util argument will hold
                    //the module value for "helper/util".
//                    intheutil(); //This was done
                    console.log('util loaded');
});

reqOne(['require','jquery'],function(require,$){
    console.log( $().jquery );
});

reqOne(['require','jquery'],function(require,jq){
    console.log( jq().jquery );
});

reqOne(['require','jquery'],function(require,$){
    console.log( $().jquery);
});

reqTwo(['require','jquery'],function(require,$){
    console.log( $().jquery );
});

console.log('If no errors mean success!'); 
```

以上是我在 main.js 中使用的。有关完整的实现细节，请参阅我在 github 中的实现。[github.com](https://github.com/ajeebkp23/jquery-2-versions-with-require.js)。

这里 jquery.min 是 jquery 版本 1.x 和 jquery.modern 是 jquery 版本 2.x

我用过console.log。因此，请检查启用浏览器控制台的示例。以上答案基于 Require.js 的文档。所以我认为这一定是你的情况的解决方案。

这是我的参考。 [需要.js](http://requirejs.org/docs/api.html#multiversion)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-26T09:24:33.950

我有一个几乎相同的问题，我设法使用与 Ajeeb KP 类似的方法解决了该问题，但有一些关键区别。（Ajeeb 的过程实际上对我不起作用，并且在使用 jQuery CDN 时始终失败）。

本质上，我创建了 2 个 require.config 实例，每个实例在属性中定义了不同版本的 jQuery（使用我将每个特定实例合并到的公共 require.config 对象保持 DRY）。当调用任一 require.config 实例时（即 RequireJS API 所说的“传递给 require”），回调函数中的代码运行一个接收 jQuery.noConflict(true) 作为 $ 参数的 IIFE。任何在 IIFE 中运行的代码——包括需要的模块——运行最初传递给 require 的 require.config 实例中定义的 jQuery 版本。

这是代码：

```
/*
 * For merging each separate require.config object with a "common RequireJS config
 * properties" object. Meant to avoid e.g. baseUrl, common libs etc. between the 2 
 * (lodash cannot be used for this, as it's not yet loaded until all this completes)
 */ 
var mergeObjs = function mergeObjs(objIn1, objIn2) {
    var conglomerateObj = {};
    Object.keys(objIn1).forEach(function(item) {
        conglomerateObj[item] = objIn1[item];
    });

    return (function mergeIn(o1, o2) {
        Object.keys(o2).forEach(function(key) {
            if (typeof o1[key] === 'undefined') {
                o1[key] = o2[key];
            } else if (typeof o1[key] === 'object' && typeof o2[key] === 'object') {
                o1[key] = mergeIn(o1[key], o2[key]);
            }
        });
        return o1;
    }(conglomerateObj, objIn2));
};

// 'Common' RequireJS config properties object. Both config objects use these values.
var reqCommon = {
    baseUrl: '../scripts',
    paths: {
        lodash: '../public/lodash/lodash',
        bootstrap: '../public/bootstrap/js/bootstrap.min'
    }
};

// RequireJS config properties object 1\. Configures section run with it to use an
// older version of jQuery (1.11.3) loaded using a CDN, for use with Bootstrap.
var req1 = require.config(mergeObjs({
    context: 'version1',
    paths: { jquery: 'https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min' }
}, reqCommon));

// RequireJS config properties object 2\. Configures section run with it to use a 
// newer version of jQuery. Used for almost everything except Bootstrap.
var req2 = require.config(mergeObjs({
    context: 'version2',
    paths: { jquery: '../public/jquery' } //new, local version of jQuery
}, reqCommon));

//
// 1st require'd block; runs with req1 RequireJS properties object used & thus 
// jQuery 1.11.3\. Mainly for running Bootstrap.
//
req1(['lodash', 'jquery'], function(main, ta, _) {

    // This IIFE is intended to load the older jQuery version in regardless of the presence of jQuery v2.1.4
    (function($) {
        console.log('1st block 1st section jQuery version: ' + $.fn.jquery); 
          //--> shows 1.11.3 as version
        window.jQuery = this.jQuery = $; // needed - Bootstrap uses jQuery on the window object.

        //Load Bootstrap after jQuery 1.11.3 confirmed loaded
        req1(['bootstrap'], function(bootstrap) {
            console.log("1st block 2nd section: bootstrap loaded!");
            console.log("1st block 2nd section: jQuery version: " + $.fn.jquery); 
          //--> still shows 1.11.3, even though block 2 has usually run by now
        });

    }(jQuery.noConflict(true)));
});

//
// 2nd require'd block; runs with req2 RequireJS properties object used & thus 
// jQuery 2.1.4\. For almost everything except Bootstrap.
//
req2(['main', 'testaddedjsfile', 'lodash', 'jquery'], function(main, ta, _) {
    //this IIFE keeps the newer jQuery version separated from the old version.
    (function($) {
        console.log('2nd block jQuery version: ' + $.fn.jquery);
          //--> shows 2.1.4 as version
    }(jQuery.noConflict(true)));
    // the bind helps ensure calls to $ don't inadvertently call window.$. which will be occupy.
}); 
```

底部第 1 和第 2 个必需块中的 IIFE 对完成这项工作至关重要。

在添加合并对象（函数mergeObjs）和我自己文件中的默认对象的功能之前，我的需求配置对象（req1 和req2）变得重复且混乱。

下面包含 Bootstrap 来证明这个概念：我使用的特定 Bootstrap 模板需要 jQuery 的旧版本才能出现在窗口对象上......而我在应用程序中的其余代码使用 2.1.4。

上述设置允许 Bootstrap 和我自己的代码毫无问题地运行，每个块始终使用适当版本的 jQuery，但有一个警告：第二个块无法显式调用 window.$（无论如何都是个坏主意）。

我为篇幅道歉 - 这是一个令人惊讶的棘手问题。

# java - 如何按单个故事过滤缺陷结果

> ID：13935589
> 
> 赞同：1
> 
> 时间：2012-12-18T14:55:32.507
> 
> 标签：java, rally, defects

此查询从单个项目返回缺陷：

```
QueryRequest defects = new QueryRequest("defect");
defects.setProject("https://rally1.rallydev.com/slm/webservice/1.37/project/5022032422.js"); 
```

我想将结果缩小到一个故事。基本上返回与单个故事相关的缺陷。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:12:59.500

在此处查看 WSAPI 文档：[https ://rally1.rallydev.com/slm/doc/webservice/](https://rally1.rallydev.com/slm/doc/webservice/)

您可以看到 Defect 有一个名为 Requirement 的字段，表示其附加的故事。您可以在查询中使用该字段，将所需故事的 ref 指定为值：

```
defects.setQueryFilter(new QueryFilter("Requirement", "=", "/hierarchicalrequirement/12345")); 
```

# unix - awk multiple conditional command

> ID：13935591
> 
> 赞同：1
> 
> 时间：2012-12-18T14:55:34.053
> 
> 标签：unix, awk

I am trying to select some strings with awk but i am not getting exactly what i want

the data i have is in a column like this

```
name1    condition1
name2    condition2/condition1
name3    CONDITION3
name4    condition1/condition4
name5    CND1
name6    condition6
name7    cnd1
name8    condition3/cnd1
name9    CND1/condition2 
```

I am trying to pick condition1 and cnd1 regardless its position and case of the letters.

I want the output to be like (condition1 and cnd1 in combination with anything)

```
name2    condition2/condition1
name4    condition1/condition4
name8    condition3/cnd1
name9    CND1/condition2 
```

and another output to look like (condition1 and cnd1 ALONE)

```
name1    condition1
name5    CND1
name7    cnd1 
```

I am using this command

```
awk 'BEGIN{IGNORECASE=1} $2 ~ /^cnd1$/ || /^condition1$/'  directory/file.tab 
```

this command is eliminating all the combinations.

How do I form the right command for this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:00:19.010

您需要在表达式`$2 ~`的第二部分重复。`||`

```
awk 'BEGIN{IGNORECASE=1} $2 ~ /^cnd1$/ || $2 ~ /^condition1$/' 
```

或使用正则表达式`|`运算符：

```
awk 'BEGIN{IGNORECASE=1} $2 ~ /^(cnd|condition)1$/' 
```

对于第一种情况，condition1 和 cnd1 结合任何东西，试试这个：

```
awk 'BEGIN{IGNORECASE=1} $2 ~ /(cnd|condition)1/ && $2 ~ "/"' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:26:59.717

如果您正在写入文件，则可以一次性完成：

```
awk '
    BEGIN {IGNORECASE=1} 
    $2 ~ /\<(cnd|condition)1\>/ {
        if ($2 ~ /\//)
            print > combined_cnd1
        else
            print > only_cnd1
    }
' 
```

注意单词边界的使用，`\<`并`\>`防止“ACND1”和“condition11”等内容的错误匹配

# jquery - jQuery 唯一名称选择器

> ID：13935592
> 
> 赞同：3
> 
> 时间：2012-12-18T14:55:39.980
> 
> 标签：jquery

我有多组复选框和收音机。
每个组都有一个唯一的名称属性，但我不知道这些名称。

我正在寻找一个选择器来获取每个组，然后遍历它们以确保至少检查一个项目。

显然，我可以做一个 each 并比较名称，创建一个唯一的数组，然后循环遍历该数组，但我宁愿一个一个地完成所有操作，以便更加熟练。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:03:34.513

您可以遍历元素并将每个组的计数作为属性存储在对象中。例子：

```
var names = {};
$(':checkbox').each(function(){
    var name = $(this).attr('name');
    names[name] = (names[name] || 0) + ($(this).is(':checked') ? 1 : 0);
});
$.each(names, function(i, e){
    if (e == 0) {
        alert('No checkbox in group ' + i + ' is checked.');
    }
}); 
```

演示：http: [//jsfiddle.net/d4mTs/](http://jsfiddle.net/d4mTs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T10:58:51.053

一个类似的解决方案（来自 Guffa），使用 jQuery 的 :checked 选择器。

```
var names = {};
$(':checkbox').each(function(){
    var name = $(this).attr('name');
    if (names[name] == null)
    {
        var c = $("input[name='" + name + "']:checked").length;
        names[name] = c;
        if (c == 0)
            alert('Not checked: ' + name);
    }
}); 
```

[http://jsfiddle.net/h8ayM/](http://jsfiddle.net/h8ayM/)

# c++ - 通过 Codesynthesis 迭代抛出特定的 xml 属性

> ID：13935601
> 
> 赞同：1
> 
> 时间：2012-12-18T14:56:10.680
> 
> 标签：c++, xml, codesynthesis

我有一个 xsd 文件，我想在属于它的 xml 上迭代抛出一个特殊属性（[这是我的 xsd](https://raw.github.com/percolator/percolator/master/src/xml/percolator_out.xsd)）。通过代码合成创建我的类后，如下所示：

```
xsdcxx cxx-tree --root-element percolator_output --generate-polymorphic --namespace-map http://per-colator.com/percolator_out/14=xsd pout.xsd 
```

我写了我的主要内容：

```
int main (int argc, char* argv[])
{
  try
  {
   auto_ptr<percolator_output> h (percolator_output_ (argv[1]));
   //-----percolator_output::peptides_optional& pep (h->peptides ());
   for (peptides::peptide_const_iterator i (h->peptides ().begin ()); i != h->peptides ().end (); ++i)
   {
     cerr << *i << endl;
    }
  }
  catch (const xml_schema::exception& e)
  {
   cerr << e << endl;
   return 1;
  }
} 
```

我想在我的 xml 文件中迭代 throw 属性“peptides”，但它的输出`h->peptides ()`是`percolator_output::peptides_optional`并且它不是可迭代的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:17:28.947

可选元素的存在首先需要使用函数来确认`present()`。如果元素存在，则该函数`get()`可用于返回对该元素的引用。我尽可能少地修改了您的代码以使其编译。

```
#include <iostream>
#include <pout.hxx>

using namespace std;
using namespace xsd;

int main (int argc, char* argv[])
{
  try
  {
    auto_ptr<percolator_output> h (percolator_output_ (argv[1]));
    if (h->peptides().present())
    {
      for (peptides::peptide_const_iterator i (h->peptides ().get().peptide().begin ()); i != h->peptides ().get().peptide().end (); ++i)
      {
        cerr << *i << endl;
      }
    }
  }
  catch (const xml_schema::exception& e)
  {
   cerr << e << endl;
   return 1;
  }
} 
```

而且，命令行参数`--generate-ostream`缺少`xsdcxx`.

```
$ xsdcxx cxx-tree --root-element percolator_output --generate-polymorphic --generate-ostream --namespace-map http://per-colator.com/percolator_out/14=xsd pout.xsd
$ g++ -I. main.cc pout.cxx -lxerces-c
$ cat /etc/issue
Ubuntu 12.10 \n \l 
```

# facebook - facebook graph api create wall post with uploaded picture

> ID：13935607
> 
> 赞同：3
> 
> 时间：2012-12-18T14:56:35.037
> 
> 标签：facebook, facebook-graph-api

I'm following these steps to create a wall post with a picture using the FB Graph API:

1.  Upload the picture into a specified folder (working OK) -> this returns an **id** and a **post_id**
2.  Send a POST to *[https://graph.facebook.com/me/feed](https://graph.facebook.com/me/feed)* with the following parameters:

> access_token - my current access_token
> 
> message - a simple message like "hello"
> 
> object_id -the **post_id** obtained in step 1, after photo upload

The post message appears on the wall, but there is no photo:

[http://img545.imageshack.us/img545/1369/screenshot6ev.png](http://img545.imageshack.us/img545/1369/screenshot6ev.png)

What am I doing wrong?

I mention that i don't want to attach a link to the photo. I want the image to appear without any hiperlink, like the ones that are manually uploaded when creating a new post.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-20T15:48:45.607

它应该`object_attachment`代替`object_id`.

在此处查看文档：[https ://developers.facebook.com/docs/graph-api/reference/user/feed/](https://developers.facebook.com/docs/graph-api/reference/user/feed/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T05:37:40.410

我一直在为同样的事情苦苦挣扎 - API 似乎完全遗漏了大多数人所做的事情。

我发现的唯一解决方法是首先创建一个唯一的序列号相册，然后将照片发布到该相册：

```
FB.api('ALBUM_ID/photos', 'post', params, function(response) { ... }); 
```

其中 params 包含帖子消息和照片/图片的 url。但是，为一张照片创建一个相册，真是太麻烦了！但是，这样您就不会得到随后发布的图片组合在一起。

[How to do simple Facebook status post with text and picture](https://stackoverflow.com/questions/19270741/how-to-do-simple-facebook-status-post-with-text-and-picture)中有更完整的代码片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T11:12:24.080

您应该使用不带**no_story**参数的**/me/photos 。**您可以将消息添加到消息参数中，它将出现在用户的故事板上。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-21T14:55:54.240

照片上传后使用您的 photo_id 获取照片信息。照片信息包括一组指向其缩略图的链接。用户通过“/me/feed”图形 API 在墙上发布的缩略图链接之一。请参阅链接以获取更多详细信息：[https ://stackoverflow.com/a/23199781/989896](https://stackoverflow.com/a/23199781/989896)**

# jquery - simple jQuery script not running

> ID：13935608
> 
> 赞同：3
> 
> 时间：2012-12-18T14:56:49.170
> 
> 标签：jquery

I just have copied a simple script from W3School and cannot get it running: Here it is:

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://Web Testing/js/jquery-1.8.0.min.js">
</script>
<script>
$(document).ready(function(){
  $("p").click(function(){
    $(this).hide();
  });
});
</script>
</head>
<body>
<p>If you click on me, I will disappear.</p>
<p>Click me away!</p>
<p>Click me too!</p>
</body>
</html> 
```

It works on their Tryit Editor with the following line but does not work even with this line on my Mac under BBEdit

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T14:58:02.730

you ned to include jquery the link you included is not working

try

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

also useing the [google hosted](https://developers.google.com/speed/libraries/devguide) libraries is a good option because many other website using it so in most case it will get in browser cache

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:03:14.540

```
<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript">
   <!--left blank-->
</script>

<script type="text/javascript">

  $(document).ready(function(){

       /*Your code*/

     });

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T14:59:08.830

```
<script type="text/javascript" src="http://Web Testing/js/jquery-1.8.0.min.js"></script> 
```

The link to the jquery library is invalid, replace that code with this:

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T05:01:42.840

您需要在使用前包含 jquery。或者，如果您在脚本之后包含 jquery，而不是使用 ready 或 load 事件

tp 包括 jquery 你可以选择谷歌托管库或 jquery

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

或者

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script> 
```

# facebook - Facebook 应用程序不会调整大小

> ID：13935610
> 
> 赞同：2
> 
> 时间：2012-12-18T14:57:00.527
> 
> 标签：facebook, facebook-apps

我的问题是我的 facebook 应用程序页面没有调整高度。我知道有很多类似问题的人提出了很多问题。但我尝试设置 FB.Canvas.setSize()、FB.Canvas.setAutoGrow() 和一个“应该”每 2 秒调整一次画布页面大小的函数，但没有任何效果。

**编辑**

我现在用***应该可以***工作的最小代码（据我了解）尝试了它，但它没有。

这是代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Test</title>
        <style type="text/css">body { overflow: hidden; }</style>
    </head>
    <body>
        <div id="fb-root"></div>
        <script type="text/javascript" src="https://connect.facebook.net/en_US/all.js"></script> 
        <script type="text/javascript">
            window.fbAsyncInit = function() {
                FB.init({
                    appId: "xxxxxxxxxxxx",
                    cookie: true
                });
            };
            window.onload = function() {
                FB.Canvas.setAutoGrow(100);
            }
        </script>
        <div style="height: 1000px; width: 20px; background-color: #006;"></div>
        <div>End</div>
    </body>
</html> 
```

这是应用程序设置的屏幕截图：

![在此处输入图像描述](../Images/bcd95d49420efea909fd5d82ff7dff1a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:43:08.557

您不应该同时需要调整大小功能。只需`FB.Canvas.setAutoGrow()`在您通话后的某个时间拨打电话即可`FB.init()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:59:45.783

如果您的站点不需要多次调整大小，则应仅使用 FB.Canvas.SetSize()，以节省 CPU 功耗；)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:57:14.590

我遇到了 AutoGrow 完全按照它在罐子上所说的问题。它扩大页面（提示：它不会缩小它）。我们最终得到的是：

```
FB.init({
    appId : 'appid',
    status : true,
    cookie : true
});
FB.Canvas.setSize({height:600});
setTimeout("FB.Canvas.setAutoGrow()",500); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T19:04:56.003

我可以解决这个问题，这是我想象的变化：

*   删除加载 facebook 库的脚本标签。
*   添加 JS 代码以加载 facebook 库。
*   将此代码移动到起始正文标记的正下方。

我不知道是否所有这些步骤都是必要的。

这是有效的代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Test</title>
        <style type="text/css">body { overflow: hidden; }</style>
    </head>
    <body>
        <div id="fb-root"></div>
        <script>
            window.fbAsyncInit = function() {
                FB.init({
                    appId: "xxxxxxx",
                    status : true,
                    cookie: true
                });
                FB.Canvas.setAutoGrow();
            };

            (function(d, debug){
                var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                if (d.getElementById(id)) {return;}
                js = d.createElement('script'); js.id = id; js.async = true;
                js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
                ref.parentNode.insertBefore(js, ref);
            }(document, /*debug*/ true));
        </script>
        <!-- page content -->
    </body>
</html> 
```

# intuit-partner-platform - ItemAdd - SalesAndPurchaseMod aggregate when item is not reimbursable

> ID：13935615
> 
> 赞同：0
> 
> 时间：2012-12-18T14:57:09.107
> 
> 标签：intuit-partner-platform

I am getting the following error when adding items through IPP:

```
There was an error when modifying a ItemNonInventory.  Cannot use SalesAndPurchaseMod aggregate when the item is not reimbursable. 
```

The error has been slowing adding up in SyncActivity:

```
"NgObjectType" => "Item",
"OperationType" => "ItemAdd",
"SyncMessageCode" => "3170",
"SyncMessage" => "There was an error when modifying a ItemNonInventory.  Cannot use SalesAndPurchaseMod aggregate when the item is not reimbursable. " 
```

An explanation of the error would be perfect. Interested in what is causing it. Is there a way to avoid this or to not cause this error?

EDIT: Looking through my requests, I'm not really seeing the entity IDs and I can't seem to pull up the requests so I'm wonder if these were requests while QB was acting off the other day or a mistake on my part. Instead the question should be:

**What is the meaning of the above error and what might cause it? I'm unsure of where the SalesAndPurchaseMod comes into play as I'm not the one writing the QBXML to QBD.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:29:45.480

同步信息时尝试 SalesOrPurchaseMod。在 QuickBooks 的项目和服务选项卡中，该项目有一个复选框，表示它用于特定工作。必须检查以使用 SalesAndPurchaseMod。

# .net - How to set up an Entity Framework data model to use one entity model for multiple views?

> ID：13935616
> 
> 赞同：3
> 
> 时间：2012-12-18T14:57:08.387
> 
> 标签：.net, entity-framework

I have got multiple views with exactly same records structure but different filtering logic. I'd like to be able to query any of them with Entity Framework and it would seem much more natural if they would be returning values of same type instead of using a different type (with exactly same members) for every view. How to achieve this?

I use visual model designer with database-first approach.

UPDATE:

For example: we can have `Vehicles` table,

```
create view [GreenVehicles] as select * from [Vehicles] where [Color]='Green'; 
```

and

```
create view [GreenVans] as select * from [GreenVehicles] where [Type]='Van'; 
```

The task is to make it so that we would be able to query `GreenVans` as a collection of `GreenVehicles`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:56:38.680

**[更新/ 3]**

我完全删除了我原来的例子，因为它与澄清无关。您正在寻找的是返回 IQueryable 对象并在对其执行之前向其添加过滤器。这（在我的理解中）将导致所有工作仍然在服务器端完成，可以在这里找到一个很好的讨论：

[http://codethinked.com/keep-your-iqueryable-in-check](http://codethinked.com/keep-your-iqueryable-in-check)

欢迎指正！

# excel - Codehelp VBA 宏

> ID：13935618
> 
> 赞同：0
> 
> 时间：2012-12-18T14:57:14.773
> 
> 标签：excel, vba

如何修改此代码以使用多个列？例子：

```
Sub demo()
  Dim RaFound As Range
  Set RaFound = Rows(1).Find("cost", , , xlPart, , xlNext)
  If Not RaFound Is Nothing Then
    RaFound.EntireColumn.NumberFormat = "#,##0.00 _€"
  End If
End Sub 
```

我还想格式化“价格”和“数量”等列。这段代码应该如何修改？

非常感谢谁能帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:13:44.053

见下文。单词可以从工作表中获取`Range("A1:C5")`或硬编码在数组中：

```
Dim RaFound As Range
Dim words() As Variant
Dim word As Variant

words = Array("cost", "price", "quantity")

For Each word In words

    Set RaFound = Rows(1).Find(word, , , xlPart, , xlNext)

    If Not RaFound Is Nothing Then
        RaFound.EntireColumn.NumberFormat = "#,##0.00 _€"
    End If

Next word 
```

# c++ - 多线程应用程序中的结构析构函数中的c ++ SIGABRT

> ID：13935620
> 
> 赞同：1
> 
> 时间：2012-12-18T14:57:19.187
> 
> 标签：c++, linux, multithreading, posix, sigabrt

我需要帮助解决今天的多线程之谜。

我有一个具有调解器的应用程序，例如：

```
class Mediator{
    ConfigMgr * mgr;
    ....
    Config getConfig(){
    return mgr->getConfig();
    };
}; 
```

ConfigMgr 已正确初始化，没有任何问题。除其他外，它包括一个 Config 蓝图，这是一个具有一些布尔值和 std::strings 的结构：

```
struct Config{
    std::string param1;
    std::string param2;
    ....
}

class ConfigMgr {
    Config blueprint;

    Config getConfig(){
        Lock l(mtx); //wrapper on POSIX mutex and lock, works as expected
        refreshConfig(); // some stuff that might alter Config blueprint
        return config;
    }

} 
```

最后，我有多个工作线程，有时可能需要调用 `mediator->getConfig().param1;`

问题是我的应用程序时不时会因 SIGABRT 崩溃。据我所知，它在 Config 的析构函数中双重删除字符串时崩溃： `Config::~Config()` 该结构没有我编写的方法。

我无法追踪根本原因。我的 Config 结构总是通过副本而不是引用传递。我认为自从调用 ConfigMgr::getConfig() 以来，每个线程都应该拥有自己的 Config 副本。这种结构应该是线程安全的，但显然存在某种竞争条件。你们有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:13:38.543

我被这个打击了。要记住的重要事项是：

1.  std::string 在复制时共享其 char* 缓冲区。
2.  std::string 不是为多线程设计的。

因此，您在不同的线程中遇到多个 std::strings 试图删除同一个缓冲区，他们认为由于引用计数变量没有正确更新而应该删除。

您可能必须更明确地了解您想要的字符串副本，并为 Config 对象定义一个复制构造函数。

# unix - 如何从 Kohana 3.2 升级到 3.3（实现 PSR-0）？

> ID：13935621
> 
> 赞同：2
> 
> 时间：2012-12-18T14:57:36.003
> 
> 标签：unix, kohana, command-line-interface, kohana-3.2, kohana-3.3

关于 PSR-0 的实现以及必须从命令行执行哪些命令，我​​需要采取哪些步骤从 Kohana 3.2 升级到 3.3？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T16:43:32.747

**Unix命令行：**

这些是我在 Kohana 应用程序中实现 PSR-0 所采取的步骤。

我删除了以下系统/目录：

```
rm -rf system 
```

在您当前的 bootstrap.php 中，唯一的更改是使类以大写开头，因此最好保留旧的 bo​​otstrap 并在文件顶部更改以下行：

```
// Load the core Kohana class
require SYSPATH.'classes/Kohana/Core'.EXT;

if (is_file(APPPATH.'classes/Kohana'.EXT))
{
  // Application extends the core
  require APPPATH.'classes/Kohana'.EXT;
}
else
{
  // Load empty core extension
  require SYSPATH.'classes/Kohana'.EXT;
} 
```

从新的 kohana 发布目录中删除 bootstrap.php。现在将 3.3 的所有文件复制粘贴到您的旧应用程序：

```
cp -R path/to/new/kohana/* . 
```

现在将所有控制器和模型移动到大写的目录并删除旧目录：

```
mv application/classes/controller/* application/classes/Controller
mv application/classes/model/* application/classes/Model
rm -rf application/classes/controller application/classes/model 
```

供应商目录在 kohana 目录的根目录中有一个固定位置。将您的供应商目录从应用程序/供应商（如果有的话）移动到供应商/

```
mv application/vendor . 
```

编辑数据库配置文件（例如application/config/database.php），所有“类型”属性都应该大写：

```
 return array
  (
    'default' => array
    (
      'type'       => 'MySQL', 
```

当您使用 AUTH orm 驱动程序并覆盖了 application/config/auth.php 中的配置时，将驱动程序名称大写：

```
return array(
  'driver'       => 'ORM', 
```

现在到了棘手的部分，这些类的所有类名和文件名都应该大写。转到类目录。

```
cd application/classes 
```

并复制粘贴此命令：

```
 for SRC in `find . -depth`
  do DST=`dirname "${SRC}"`/`basename "${SRC}" | sed -e 's/^./\U&/'`;
      if [ "${SRC}" != "${DST}" ]
      then
        [ ! -e "${DST}" ] && mv -T "${SRC}" "${DST}" || echo "${SRC} was not renamed"
      fi
  done 
```

（来源：http: [//forum.kohanaframework.org/discussion/comment/73089#Comment_73089](http://forum.kohanaframework.org/discussion/comment/73089#Comment_73089)）

此命令递归检查所有目录并将文件名大写。转到应用程序目录。

```
cd ../ 
```

现在在模型和控制器（和助手）中，将所有类名大写。所以 Controller_template_parent 必须变成 Controller_Template_Parent。我有一些非常低效的命令（所以请贡献）。

```
find ./ -name \*.php -exec sed  -i "s/helper_\([a-zA-Z]\+\)/Helper_\u\1/gI" {} \;
find ./ -name \*.php -exec sed  -i "s/helper_\([a-zA-Z]\+\)_\([a-zA-Z]\+\)/Helper_\u\1_\u\2/gI" {} \;
find ./ -name \*.php -exec sed  -i "s/helper_\([a-zA-Z]\+\)_\([a-zA-Z]\+\)_\([a-zA-Z]\+\)/Helper_\u\1_\u\2_\u\3/gI" {} \; 
```

开头的 ./ 用于所有以 .php 结尾的文件（递归目录）。我在 sed 命令后面添加了一个“I”，以使搜索不区分大小写。（源命令：[https](https://askubuntu.com/questions/84007/find-and-replace-text-within-multiple-files) ://askubuntu.com/questions/84007/find-and-replace-text-within-multiple-files ）

第一个命令将用 Helper_Some_thing_here 替换 helper_some_thing_here。第二个命令会将 helper_some_thing_here 转换为 Helper_Some_Thing_here 等。因此，如果您的类名中包含超过 3 个下划线，则可以构建自己的命令。

以 Model_ 和 Controller_ 开头的类也需要这样做

```
find ./ -name \*.php -exec sed  -i "s/model_\([a-zA-Z]\+\)/Model_\u\1/gI" {} \;
find ./ -name \*.php -exec sed  -i "s/model_\([a-zA-Z]\+\)_\([a-zA-Z]\+\)/Model_\u\1_\u\2/gI" {} \;
find ./ -name \*.php -exec sed  -i "s/model_\([a-zA-Z]\+\)_\([a-zA-Z]\+\)_\([a-zA-Z]\+\)/Model_\u\1_\u\2_\u\3/gI" {} \;

find ./ -name \*.php -exec sed  -i "s/controller_\([a-zA-Z]\+\)/Controller_\u\1/gI" {} \;
find ./ -name \*.php -exec sed  -i "s/controller_\([a-zA-Z]\+\)_\([a-zA-Z]\+\)/Controller_\u\1_\u\2/gI" {} \;
find ./ -name \*.php -exec sed  -i "s/controller_\([a-zA-Z]\+\)_\([a-zA-Z]\+\)_\([a-zA-Z]\+\)/Controller_\u\1_\u\2_\u\3/gI" {} \; 
```

现在，一些仅使用 1 个大写字母的类名现在以全大写形式编写（Html、Url、Http、UTF8）。在整个应用程序中替换它们。

在 application/ 目录中执行此命令：

```
find ./ -name \*.php -exec sed -i "s/Url::/URL::/gI" {} \;
find ./ -name \*.php -exec sed -i "s/Html::/HTML::/gI" {} \;
find ./ -name \*.php -exec sed -i "s/Http::/HTTP::/gI" {} \;
find ./ -name \*.php -exec sed -i "s/Utf8::/UTF8::/gI" {} \; 
```

当您使用 ORM 驱动程序时，您的所有 Orm::factory('some_class') 都应该大写并大写为 ORM::factory('Some_Class')。我使用相同的命令将所有 ORM 类大写并将工厂中的类名大写。

```
find ./ -name \*.php -exec sed -i  "s/orm::factory(\(\"\|'\)\([a-zA-Z_]\+\)\(\"\|'\)\(,[^,]*\)*)/ORM::factory('\u\2'\4)/gI" {} \;
find ./ -name \*.php -exec sed -i  "s/orm::factory(\(\"\|'\)\([a-zA-Z]\+\)_\([a-zA-Z]\+\)\(\"\|'\)\(,[^,]*\)*)/ORM::factory('\u\2_\u\3'\5)/gI" {} \;
find ./ -name \*.php -exec sed -i  "s/orm::factory(\(\"\|'\)\([a-zA-Z]\+\)_\([a-zA-Z]\+\)_\([a-zA-Z]\+\)\(\"\|'\)\(,[^,]*\)*)/ORM::factory('\u\2_\u\3_\u\4'\6)/gI" {} \; 
```

现在我的模块从 3.3 开始不再兼容，并不是所有的模块都升级了。当您想自己升级它们时，您可能必须分别检查它们转到每个模块的类目录，将其文件和类名大写。您可以使用以前的命令。

对我来说，这是升级应用程序时的清单，就像我说的，请随时做出贡献，以便升级更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T18:28:31.187

基于 Daan 的回答和更多我写了一个 php 脚本来将 Kohana v3.2 升级到 v3.3

它在 github 上可用： [https ://github.com/Choufourax/upgrade-kohana-3_2-to-3_3](https://github.com/Choufourax/upgrade-kohana-3_2-to-3_3)

或以下：

```
#!/usr/bin/php -q
<?php
/*

A PHP SCRIPT TO UPGRADE FROM KOHANA 3.2.X TO KOHANA 3.3.X
------------------------------------------------------

Based on the works of :  
=> Daan (http://stackoverflow.com/users/987864/daan)
http://stackoverflow.com/questions/13935621/how-to-upgrade-from-kohana-3-2-to-3-3-implementing-psr-0  
=> Alex Cartwright <alexc223@gmail.com>
https://github.com/AlexC/kohana-upgrade-script

This script is designed to do bulk changes to your codebase that can
easily be automated, changes that would otherwise have the potential
to take a very long time for a large project. It does not provide a
fully automated migration, and it is highly recommended that you read
the official Kohana 3.3 upgrade guide before running this script.
http://kohanaframework.org/3.3/guide/kohana/upgrading

------------------------------------------------------

Be smart, be safe :
BACKUP YOUR WEBSITE BEFORE RUNNING THIS SCRIPT
------------------------------------------------------

This script handles :
- Changes in Bootstrap / database config file / auth config file
- PSR-0 support (file/class naming conventions)
    - Change the file names 
    - Change the name of class in all files  (including calls, extends...)
- Case sensitive ORM, HTTP, URL, UTF8, HTML classes
- New syntax for Browser cache checking
- New syntax for Redirects (HTTP 300, 301, 302, 303, 307)
- Apply the changes listed above in Modules too
- Moving the vendor folder

This script does not handle :
- HTTP Exceptions
- Custom Error Pages (HTTP 500, 404, 403, 401 etc)
- Query Builder Identifier Escaping
- Route Filters

Things to do :
- improve regex to prevent replacement mistakes between class and functions

HOW TO USE
------------------------------------------------------

This script is to use on your local version of your website
Do not use on your production server (as you will experiment permission issues as your server is not supose to let you modify PHP files dynamically for security reasons)
Once your local site is updated and you test everything, upload files via FTP to your production server. 

1/ Backup your site

2/ Download kohana 3.3

3/ Manulay replace the following folders from Kohana 3.3 to the website to upgrade :
- system
- modules/auth
- modules/cache
- modules/codebench
- modules/database
- modules/image
- modules/minion
- modules/orm
- modules/unittest
- modules/userguide

4/ Edit the settings at the begining of the script 

5/ Run this file
   - if you use a Mac : the best way will be to open the php file with BBedit and chose in the '#!' menu "Run in Terminal"  
   - you can also open a Terminal, go to the script folder and type ./upgrade-kohana.php  
   - you can also just run the script from your local webserver http://localhost/website/upgrade-kohana.php but it's not recommended as you may have some permissions problem to modify the PHP files  

------------------------------------------------------

AUTHOR
------------------------------------------------------

@author Erwan Dupeux-Maire  
www.upyupy.fr  
www.bwat.fr  

*/

/*
---------------
SETTINGS
---------------
*/
// START OF SETTINGS
// Path to kohana v3.2 website to update 
$path = '/Library/WebServer/Documents/work/bwat/bwat/';

// List of folders to process (at least $path.'application' )
// You sould not use this script to upgrade third party modules that already have a v3.3 version.
$dirs = array (
    $path.'application',
    $path.'modules/a1',
    $path.'modules/a2',
    $path.'modules/acl',
    $path.'modules/admin',
    $path.'modules/adminfiles',
    $path.'modules/adminnl',
    /*
    $path.'modules/auth',
    $path.'modules/cache',
    $path.'modules/codebench',
    $path.'modules/database',
    $path.'modules/image',
    $path.'modules/minion',
    $path.'modules/orm',
    $path.'modules/unittest',
    $path.'modules/userguide'
    */
);

// Search and replace class name in "views" folders to update the case ?
// true => yes | false => no
$checkInViews = true;

// If there is some files you don't want to process, add them to this array
$skip = array('_notes','.DS_Store','lib-mail-phpmailer','lib-rtf');

// Special class rewrinting 
// sometimes, captialize is not enought
// Use this array to set special changes()
$specials = array (
    'upyupy' =>'UpyUpy',
    'gd' => 'GD',
    'orm' => 'ORM',
    'db' => 'DB',
    'mysql' => 'MySQL',
    'pdo' => 'PDO',
    'html' => 'HTML',
    'url' => 'URL',
    'http' => 'HTTP',
    'utf8' => 'UTF8',
    'validurl' => 'ValidURL',
    'validcolor' => 'ValidColor',
    'userfuncarray' => 'UserFuncArray',
    'urlsite' => 'URLSite',
    'stripnullbytes' => 'StripNullBytes',
    'mddoincludeviews' => 'MDDoIncludeViews',
    'mddoimageurl' => 'MDDoImageURL',
    'mddobaseurl' => 'MDDoBaseURL',
    'ltrimdigits' => 'LtrimDigits',
    'gruberurl' => 'GruberURL',
    'explodelimit' => 'ExplodeLimit',
    'datespan' => 'DateSpan',
    'autolinkemails' => 'AutoLinkEmails',
    'arrcallback' => 'ArrCallback'
);

// END OF SETTINGS

// Function to remove folders and files 
// @author : http://stackoverflow.com/users/1226894/baba
// http://stackoverflow.com/questions/9835492/move-all-files-and-folders-in-a-folder-to-another
function rrmdir($dir) {
    if (is_dir($dir)) {
        $files = scandir($dir);
        foreach ($files as $file)
            if ($file != "." && $file != "..") rrmdir("$dir/$file");
        rmdir($dir);
    }
    else if (file_exists($dir)) unlink($dir);
}
// Function to Copy folders and files       
// @author : http://stackoverflow.com/users/1226894/baba
function rcopy($src, $dst) {
    if (file_exists ( $dst ))
        rrmdir ( $dst );
    if (is_dir ( $src )) {
        mkdir ( $dst );
        $files = scandir ( $src );
        foreach ( $files as $file )
            if ($file != "." && $file != "..")
                rcopy ( "$src/$file", "$dst/$file" );
    } else if (file_exists ( $src ))
        copy ( $src, $dst );
}

// Function to search and replace in a file (not case sensitive)
// @author : Erwan Dupeux-Maire
function replaceInFile($file, $search, $replace)
{
    if (!is_file($file))
    {
        echo $file.' does not exist (replaceInFile)'."<br />\n";
        return false;
    }
    $str = str_ireplace($search, $replace, file_get_contents($file));
    return file_put_contents($file, $str);
}
// Function to search and replace in a file with regex
// @author : Erwan Dupeux-Maire
function pregReplaceInFile($file, $search, $replace)
{
    if (!is_file($file))
    {
        echo $file.' does not exist (pregReplaceInFile)'."<br />\n";
        return false;
    }
    $str = preg_replace($search, $replace, file_get_contents($file));
    return file_put_contents($file, $str);
}

function rewritteFolderFiles($dir, $shortdir)
{
    global $path, $skip, $specials;
    //echo $dir."<br />\n";

    if (!is_dir($dir))
    {
        echo $dir.' does not exist (rewritteFolderFiles)'."<br />\n";
        return array();
    }

    // let's start the fun
    $ffs = scandir($dir);
    $arr = array();
    foreach($ffs as $ff){
        if($ff != '.' && $ff != '..' && !in_array($ff, $skip))
        {
            //echo $dir.'/'.$ff."<br />\n";
            // Write classname
            $filename = str_replace(
                '.php', 
                '', 
                trim($shortdir.'/'.$ff, '/')
            );

            $arrPath = explode('/', $filename);
            foreach($arrPath as $k => $v)
            {
                if (isset($specials[strtolower($v)]))
                {
                    // in case u have some custom rewriting to do
                    $arrPath[$k] = $specials[strtolower($v)];
                }
                else
                {
                    // just capitalize
                    $arrPath[$k] = ucfirst($v);
                }
            }
            $classname = join('_',$arrPath);
            //echo $classname."<br />\n";

            if (is_file($dir.'/'.$ff) && strpos($ff, '.php')!==false)
            {
                // this array will be use to find/replace all occurences of a class name
                // Explanation and limits of this regex : see #NOTE1 at the end of this file.
                $arr['/(\(|\s|\t)('.$classname.')(\s)*(\(|\:\:|extends)/i'] = '$1'.$classname.'$3$4';

                $key = str_replace('.php', '', $ff);
                if (isset($specials[strtolower($key)]))
                {
                    // in case u have some custom rewriting to do
                    $nn = $specials[strtolower($key)].'.php';
                }
                else
                {
                    // just capitalize
                    $nn = ucfirst($ff);
                }
                // rename file
                rename($dir.'/'.$ff, $dir.'/'.$nn);
            }
            if(is_dir($dir.'/'.$ff)) 
            {
                if (isset($specials[strtolower($ff)]))
                {
                    // in case u have some custom rewriting to do
                    $nn = $specials[strtolower($ff)];
                }
                else
                {
                    // just capitalize
                    $nn = ucfirst($ff);
                }            
                // rename folder
                rename($dir.'/'.$ff, $dir.'/'.$nn);

                // merge without matching keys
                $arr = array_merge($arr, rewritteFolderFiles($dir.'/'.$ff, trim($shortdir.'/'.$ff, '/')));
            }
        }
    }
    return $arr;
}

function replaceClassNameInFolder($dir, $arrSearch, $arrReplace)
{
    global $skip;
    //echo $dir."<br />\n";

    if (!is_dir($dir))
    {
        echo $dir.' does not exist (replaceClassNameInFolder)'."<br />\n";
        return array();
    }

    $ffs = scandir($dir);
    $arr = array();
    foreach($ffs as $ff){
        if($ff != '.' && $ff != '..' && !in_array($ff, $skip))
        {
            if (is_file($dir.'/'.$ff) && strpos($ff, '.php')!==false)
            {
                $arr[] = $ff;
                pregReplaceInFile(
                    $dir.'/'.$ff,
                    $arrSearch,
                    $arrReplace
                );
            }
            if(is_dir($dir.'/'.$ff)) 
            {
                $arr[$ff] = replaceClassNameInFolder($dir.'/'.$ff, $arrSearch, $arrReplace);
            }
        }
    }
    return $arr;
}

$listOfRegexReplace = array();
foreach ($dirs as $dir)
{
    echo 'Processing '.$dir."......<br />\n";
    if ($dir == $path.'application')
    {
        // #1 manage bootstrap  
        // replace classes/kohana and classes/kohana/core
        // by classes/Kohana and classes/Kohana/Core
        replaceInFile(
            $dir.'/bootstrap.php', 
            array(
                'classes/kohana/core',
                'classes/kohana'
            ), 
            array(
                'classes/Kohana/Core',
                'classes/Kohana'
            )
        );

        // #2 move vendors
        if (file_exists($dir.'/vendor'))
        {
            rcopy($dir.'/vendor', $dir.'/../vendor' );
        }

        // #2bis add ignore_on_delete value in cache config if exists
        // (I experiment errors if ignore_on_delete is not an array in Kohana 3.3.0)
        if (file_exists($dir.'/config/cache.php'))
        {
            pregReplaceInFile(
                $dir.'/config/cache.php', 
                array(
                    '/((\'driver\')(\s)*(\=>)(\s)*(\'file\'))/i',
                ), 
                array(
                    '$1,
             \'ignore_on_delete\'   => array(
                    \'.gitignore\',
                    \'.git\',
                    \'.svn\'
             )'
                )
            );
        }
    }

    // #3 Edit the database config file, all "type" properties should be capitalised
    // should be only in application/config/database.php but may also be in modules/mymodule/config/database.php
    if (file_exists($dir.'/config/database.php'))
    {
        replaceInFile(
            $dir.'/config/database.php', 
            array(
                '\'mysql\'',
                '"mysql"',
                '"pdo"',
                '"pdo"'
            ), 
            array(
                '\'MySQL\'',
                '"MySQL"',
                '\'PDO\'',
                '"PDO"'
            )
        );      
    }

    // #4 Edit the auth config file if Auth module is used, driver name should be capitalised
    // should be only in application/config/auth.php but may also be in modules/mymodule/config/auth.php
    if (file_exists($dir.'/config/auth.php'))
    {
        replaceInFile(
            $dir.'/config/auth.php', 
            array(
                '\'orm\'',
                '"orm"',
                '\'file\'',
                '"file"'
            ), 
            array(
                '\'ORM\'',
                '"ORM"',
                '\'File\'',
                '"File"'
            )
        );      
    }

    // #5 in /classes and its subdirectories
    // rename all php files to match the case sensitive standard PSR-0
    $dir .= '/classes';
    if (!is_dir($dir))
    {
        echo $dir.' does not exist'."<br />\n";
        continue;
    }
    // Recursive function to update file and folder files and get back the list of class name to change
    $listOfRegexReplace = array_merge(
        $listOfRegexReplace,
        rewritteFolderFiles($dir, $shortdir='')
    );

}

// #10 some class names that were used with only 1 capital, are now written in full capitals (Html, Url, Http, UTF8). 
// Add them to the list of class to rewrite
$listOfRegexReplace['/(Html)(\:\:)/i'] = 'HTML$2';
$listOfRegexReplace['/(Url)(\:\:)/i'] = 'URL$2';
$listOfRegexReplace['/(Http)(\:\:)/i'] = 'HTTP$2';
$listOfRegexReplace['/(Utf8)(\:\:)/i'] = 'UTF8$2';

// #11 Replace orm::factory by ORM:factory etc....
$listOfRegexReplace['/(Orm)(\:\:)/i'] = 'ORM$2';

// #12 Update Redirects (HTTP 300, 301, 302, 303, 307)
// ->request->redirect becomes ->redirect
// Request::current()->redirect becomes HTTP::redirect
// Request::initial()->redirect becomes HTTP::redirect
$listOfRegexReplace['/(\->request)(\s)*(\->redirect)(\s)*/i'] = '->redirect';
$listOfRegexReplace['/(Request\:\:current\(\))(\s)*(\->redirect)/i'] = 'HTTP::redirect';
$listOfRegexReplace['/(Request\:\:initial\(\))(\s)*(\->redirect)/i'] = 'HTTP::redirect';

// #13 Browser cache checking (ETags)
// $this->response->check_cache becomes $this->check_cache
$listOfRegexReplace['/(\->response)(\s)*(\->check_cache)(\s)*/i'] = '->check_cache';

// If we want to harmonize the "OR" case
// $listOfRegexReplace['/ or die/i'] = ' OR die';

echo '---DISPLAY ALL REPLACEMENT REGEX ---'."<br />\n";
print_r($listOfRegexReplace);
echo '------'."<br />\n";

// #14 change all class names in php filesName in /classes
echo '---PROCESSING CLASSES---'."<br />\n";
echo '> Processing change class names '.$dir."<br />\n";
foreach ($dirs as $dir)
{
    $dir .= '/classes';
    echo 'Processing '.$dir."......<br />\n";
    echo 'This step can be long.'."<br />\n";
    replaceClassNameInFolder(
        $dir,
        array_keys($listOfRegexReplace),// arrSearch
        $listOfRegexReplace // arrSearch
    );
}

if ($checkInViews)
{

    // #15 change all class names in views files
    echo '---PROCESSING VIEWS---'."<br />\n";
    foreach ($dirs as $dir)
    {
        $dir .= '/views';
        echo 'Processing '.$dir."......<br />\n";
        echo 'This step can be long.'."<br />\n";
        replaceClassNameInFolder(
            $dir,
            array_keys($listOfRegexReplace),// arrSearch
            $listOfRegexReplace // arrSearch
        );
    }
}

/*
// #NOTE1 
// Explaination of the regex /(\(|\s|\t)(a1)(\s)*(\(|\:\:|extends)/i
// Find classname in a file : 
// - check something that start with space, tab or "("
// - followed by the name of the class (here "a1")
// - followed by one, several or no space
// - followed by "(" or ':' or "extends")
// - not cas sensitive
//
// The limit for now : can not distinct class declaration vs function declaration
// In ne following example, function a1()... should not be replace..
// 
$example = ' class a1 extends a1 () {
    function a1() {

    } 
    $title=\'a1\';
    $comment = "You shoudl take the highway a1! a1 is the fastest.";
    a1::doIt();
    $b = new a1();
    $c = Helper_Example(a1::action());
// with no indent ?
a1();
    // aaaa1bbbb
    // a1bbbb
    // aaa1
}';
$example = preg_replace(
    array('/(\(|\s|\t)(a1)(\s)*(\(|\:\:|extends)/i'), 
    array('$1A1$3$4'),
    $example
);
echo '<pre>'.($example).'</pre>';
// -----------------
// Result will be :
// -----------------
// class A1 extends A1 () {
//  function A1() {
//  
//  } 
//  $title='a1';
//  $comment = "You shoudl take the highway a1! a1 is the fastest.";
//  A1::doIt();
//  $b = new A1();
//  $c = Helper_Example(A1::action());
// // with no indent ?
// A1();
//  // aaaa1bbbb
//  // a1bbbb
//  // aaa1
// }
*/
exit();
?> 
```

# google-apps-script - 使用 Ui 服务中的 submitButton 在 Google 电子表格中写入数据

> ID：13935624
> 
> 赞同：0
> 
> 时间：2012-12-18T14:57:53.573
> 
> 标签：google-apps-script, google-sheets

我试图在 GAS 中编写一个脚本来从我使用 Ui 服务创建的表单中写入数据，但它不起作用。

表格显示ok，但是在电子表格中保存数据的功能不起作用：

```
function SalvaRegistro(e) {
var app=UiApp.getActiveApplication();
var DataValue=e.parameter.Data;
var TicketIDValue=e.value.TicketID;
var TicketTypeValue=e.value.TicketType;
var DemandedByValue=e.value.DemandedBy;
var AnalystValue=e.value.Analyst;
var StatusValue=e.value.Status;
var DescriptionValue=e.value.Description;
var TicketIDValue=e.value.TicketID;

sheet=SpreadsheetApp.getActiveSheet();
var lastRow = sheet.getLastRow();
sheet.getRange(lastRow, getColIndexByName("Data")).setValue(DataValue);
sheet.getRange(lastRow, getColIndexByName("Ticket ID")).setValue(TicketIDValue);
sheet.getRange(lastRow, getColIndexByName("Ticket Type")).setValue(TicketTypeValue);
sheet.getRange(lastRow, getColIndexByName("Demandado por")).setValue(DemandedByValue);
sheet.getRange(lastRow, getColIndexByName("Analista")).setValue(AnalystValue);
sheet.getRange(lastRow, getColIndexByName("Status")).setValue(StatusValue);
sheet.getRange(lastRow, getColIndexByName("Descrição")).setValue(DescriptionValue);
return app.close()
                  } 
```

如何让表单在电子表格中写入数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:35:02.723

如果您在 GUI 中使用 FormPanel 和 Submit 按钮，您可以简单地使用一个名为 doPost(e) 的预定义函数，其中 e var 将包含所有 FormPanel 值。对于每个输入字段，还要在 GUI Builder 中设置 Name 参数，以便您可以按名称引用它们。这是代码：

```
function doPost(e) {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var txt1 = e.parameter.TextBox1Name;
  var txt2 = e.parameter.TextBox2Name;
  ss.getActiveSheet().appendRow([txt1,txt2]);
} 
```

对于我从您的代码中可以看到的内容，您只需要附加一行，而不是查看最后一行，您可以像我一样简单地使用 appendRow 函数。

# php - Ajax-Jquery-Checkbox-PHP

> ID：13935625
> 
> 赞同：-1
> 
> 时间：2012-12-18T14:57:55.987
> 
> 标签：php, jquery, ajax

我对如何进行以下程序有点困惑

```
<input id="" type="checkbox" name="" onClick="" />
    <td>
    <h4>PDF Document</h4>
    <p>
    Already have your own menu or flyer? Include it in your App
    </p>
    </td>
    <td class="cost">$99.99 per document
    </td> 
```

现在我想要的是“PDF 文档”这个词，它的成本为 99.99 美元，当复选框被选中时显示在不同的 dv 面板上，不刷新只是发布到不同的 div

请给我相关的例子。如何开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:13:10.607

这应该有帮助

```
<input id="" type="checkbox" name="" onClick="tdToDiv()" />
    <td>
    <h4>PDF Document</h4>
    <p>
    Already have your own menu or flyer? Include it in your App
    </p>
    </td>
    <td class="cost" id="tdId">$99.99 per document
    </td>
<div id="result"></div> 
```

js：

```
function tdToDiv() {
document.getElelmentById('result').innerHTML=document.getElementById('tdId').innerHTML;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:17:25.940

将 id 添加到`td`有 cost 并添加 id 到`checkbox`，然后您可以获得所需的结果，如下所示：

考虑您的 HTML 部分是：

```
<input id="1" type="checkbox" name="" />
   <table>
    <tr>
       <td>   
           <h4>PDF Document</h4>
           <p>Already have your own menu or flyer? Include it in your App</p>
        </td>
       <td class="cost" id="tdId">$99.99 per document</td>
    </tr>
</table>
<div id="result">
asdasdasd
</div>​ 
```

完成这项工作所需的脚本应该是：

```
$('#1').click(function(){
if (($(this).attr('checked')) == 'checked')
    $('#result').text("PDF Document" + $('#tdId').text());
else
    $('#result').text(""); 
```

}); ​</p>

[http://jsfiddle.net/n57Te/6/](http://jsfiddle.net/n57Te/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:26:09.217

如果你使用 jquery，试试这个：

```
$(function(){
    $('input[type=checkbox]').bind('click', function(){
        if($(this).attr('checked') == 'checked'){
            $('#results').html($('h4').text() + ': ' + $('.cost').text());
        }else{
            $('#results').html('');
        }
    });
}); 
```

我建议为您的元素使用 ID 属性。

# html-validation - 谁能告诉如何将其作为有效的 HTML 来执行？

> ID：13935630
> 
> 赞同：-1
> 
> 时间：2012-12-18T14:58:03.727
> 
> 标签：html-validation

我绞尽脑汁试图找出有效的方法来做到这一点，这是我重复的代码示例：

```
<ul id="accordion">
                        <li><div>20th August</div>
                            <ul>
                                <table class="releases-table">
                                    <tr>
                                        <th>Game Title</th>
                                        <th>Achievements</th>
                                        <th>Points</th>
                                    </tr>
                                    <tr>
                                        <td >Fastball 3 for iPad</td>
                                        <td>12</td>
                                        <td>330</td>
                                    </tr>
                                     <tr>
                                        <td >Caterpillar Kate</td>
                                        <td>17</td>
                                        <td>400</td>
                                    </tr>
                                </table>
                            </ul>
                        </li>
</ul> 
```

在外部 ul 里面我有 li 和 table 很多次，现在我通过阅读知道我不能将 ul 放在 li 或另一个 ul 中，我尝试了不同的变化，但我来这里是为了寻求解决方案不仅会让我的页面看起来和现在一样，而且使用 html 5 有效代码。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:02:48.010

我假设您的 Javascript 手风琴小部件需要此处的结构输出才能工作。

可以通过 Javascript 参数指定手风琴容器的 id/html。如果不是像 jquery ui ( [http://jqueryui.com/accordion/](http://jqueryui.com/accordion/) ) 这样的库，如果您坚持需要有效的 HTML，可能会更有用。

或者，只需将其保留原样，因为大多数浏览器在解析该 HTML 并按预期显示它时不会有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:12:04.243

我认为使它在技术上有效的唯一缺少的是围绕您的 TABLE 的 LI 标签。

# chef-infra - 如何使用 Chef 运行安全更新？

> ID：13935639
> 
> 赞同：14
> 
> 时间：2012-12-18T14:58:40.593
> 
> 标签：chef-infra

当我登录到服务器（Ubuntu 12.04）时，我收到以下消息：

```
12 packages can be updated.
10 updates are security updates. 
```

“手动”解决它当然很容易（apt-get update && apt-get upgrade），但由于服务器（部分）配备了 Chef，我想知道是否有一种以编程方式将其包含在内的好方法食谱？

“ [apt”食谱](https://github.com/opscode-cookbooks/apt)似乎没有提供相关的东西:(

干杯。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T17:52:47.387

自动化包更新/升级通常是一个坏主意，因为如果没有首先正确测试，这显然会破坏应用程序。

解决此问题的一种方法是使用说明书锁定或将存储库保存在指定版本，然后在将其推向生产之前在开发中对其进行彻底测试。

在 Amazon Linux 上，您可以检索 yum 存储库当前状态的唯一 url。因此，您可以在 dev 上运行更新/升级，找出唯一的 url 并将其推送到 prod。这将阻止 Chef 更新到任何比您测试过的新包。

我对 Ubuntu 和 apt-get 不太熟悉，但看起来你可以用 Pinning 或 Hold 做我所说的：[https ://help.ubuntu.com/community/PinningHowto](https://help.ubuntu.com/community/PinningHowto)

所以总而言之，你想升级/更新开发机器，你测试它，找出 repo 状态是什么，并将所有包冻结到这些版本。然后你将 prod 的 repo 冻结到这些状态。然后你只需让食谱运行'apt-get -y upgrade'，就像 Draco 提到的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:04:27.857

我只有`execute 'apt-get -y upgrade'`自己的食谱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-18T03:59:01.923

一方面，我同意“自动化软件包更新/升级通常是一个坏主意，因为如果没有首先正确测试，这显然会破坏应用程序。” 我相信这是学术上的答案。

然而，我的经验是，自动加载*安全更新*很少会导致问题，这应该与丢失或延迟关键安全修复的可能性进行权衡。（我们从未允许自动重启，我想这就是我们划清界限的地方。）是否进行自动安全更新的决定应该基于您的实际情况。没有一个万能的答案。

如果您想运行自动更新，有几本可用的食谱（至少适用于 Ubuntu），但不幸的是，似乎没有一本是特别最新的，这有点讽刺。这是一个示例： [unattended_upgrades](https://supermarket.chef.io/cookbooks/unattended_upgrades)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-09T14:57:06.583

有一个自动补丁食谱可用于此：[https](https://github.com/bflad/chef-auto-patch/) ://github.com/bflad/chef-auto-patch/ 。

还有一篇关于如何将 Chef 集成到您的补丁过程中的 Chef 帖子： [https ://www.chef.io/solutions/patch-management/](https://www.chef.io/solutions/patch-management/)

它的要点是：

*   识别漏洞。
*   测试更新。
*   推出补丁。
*   监测意外的副作用。

# ios - Changing the delegate to whichever screen is viewed

> ID：13935640
> 
> 赞同：0
> 
> 时间：2012-12-18T14:58:42.723
> 
> 标签：ios, uiviewcontroller, delegates, notifications

I've read in other posts that having multiple delegates in iOS is not the right way of doing things (and perhaps not even possible?), and instead you should be using things such as NSNotifications to alert other (multiple) View Controllers of events.

Is it better practice to keep an object's delegate the same throughout the runtime of the app, or is it useful to change the delegate to whichever VC is modal at any given time.

Here's an example: I have some simulator class that's running in the background and generating random numbers that will be used by several different view controllers in the application. Since only one VC can be viewable at a time, I could just make the active VC the delegate of the simulator, and switch the delegate every time the UI changes.

...or I can use Notifications like I am doing now, and have the VC register for notifications upon loading.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:16:13.763

实际上，委托是代表其他对象执行某些工作的对象。您似乎遇到的情况是各种对象都是数据提供者的客户。您所描述的后台任务负责完成视图控制器只是帮助完成的事情是没有意义的。

为了使实现适合结构，我建议将背景对象分配为视图控制器的“数据提供者”属性或保留通知...取决于您喜欢的耦合程度以及您启动的类数据传输。

# excel - Excel - IF 函数

> ID：13935651
> 
> 赞同：2
> 
> 时间：2012-12-18T14:59:16.063
> 
> 标签：excel, excel-formula

我必须在 Excel 中做作业，但我对一项与`IF`功能有关的任务有疑问。

我有“891206/2356”形式的数字系列。如果第三个数字是 0 或 1，则结果为 man。如果有 5 个或 6 个，则结果是女人。

你对如何解决它有什么建议吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T15:03:24.397

首先，感谢您对这是家庭作业的诚实！

接下来，由于是家庭作业，我不会给出确切的答案，但我会研究`mid`函数并将其放在`if`语句中。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:12:33.083

`MID( your_cell , 3, 1)`会给你字符串中的第三个字符。

然后，您可以链接 IF 函数来进行测试：

```
IF( MID(...)="1", "man", IF( MID(...)="2", "man", IF(  ..etc.. )   ) 
```

# spring - IntelliJ 中的“重新部署”和“重新启动服务器”有什么区别？

> ID：13935653
> 
> 赞同：18
> 
> 时间：2012-12-18T14:59:23.887
> 
> 标签：spring, intellij-idea, tomcat6, redeploy

我正在使用 IntelliJ 和 Tomcat 6 来运行 Spring Java EE 应用程序。我没有部署编译好的战争，而是选择使用爆炸战争部署，因此我可以选择热交换一些类和 JSP。

但是，除了“更新类”和“更新类和资源”之外，IntelliJ 还允许用户在更新操作上“重新部署”和“重新启动服务器”。这两种选择有什么区别？

如果我在我的类中更改了我的方法签名，或者如果我在我的 Springconfig.xml 中进行了更改，我是否需要重新启动服务器，或者重新部署是否足够？我注意到我无法简单地热交换与它们关联的函数签名或注释已被修改的类。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T15:01:59.903

重新启动服务器完全按照它说的做，并重新启动 tomcat 服务器。您的战争将在服务器启动时重建和部署。如果您在热交换类时遇到问题，这很有用。

Redeploy 将重新部署整个 .war（无需重新启动服务器），而不是尝试热交换更改的类和其他资源。

另请参阅：http: [//www.jetbrains.com/idea/webhelp/updating-a-running-java-ee-application.html](http://www.jetbrains.com/idea/webhelp/updating-a-running-java-ee-application.html)

在回答您的第二个问题时，重新部署就足够了。也就是说，它可能会导致内存泄漏，并且通常只比完全重启稍微快一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T15:01:44.620

更新资源。所有更改的资源（即除类之外的所有应用程序组件）都将被更新。

更新课程和资源。所有更改的资源都将更新；更改的类将被重新编译。在调试模式下，更新的类将被热交换。在运行模式下，IntelliJ IDEA 只会更新输出文件夹中更改的类。这些类是否会真正在运行的应用程序中重新加载，取决于正在使用的运行时的功能。

重新部署。应用程序将被更新和重新部署。

重启服务器。服务器将重新启动。应用程序的更新版本将在服务器启动时部署。对于打包的工件，可用的选项是：

热交换类。更改的类将在运行时重新编译和重新加载。请注意，此选项仅在调试模式下有效。重新部署。整个应用程序将被重建和重新部署。重启服务器。服务器将重新启动。应用程序将在服务器启动时重建和部署。

来自： http: [//www.jetbrains.com/idea/webhelp/run-debug-configuration-tomcat.html](http://www.jetbrains.com/idea/webhelp/run-debug-configuration-tomcat.html)

# git - 外部 Git 存储库位置会自动链接到项目文件夹吗？

> ID：13935659
> 
> 赞同：-1
> 
> 时间：2012-12-18T14:59:49.423
> 
> 标签：git

我在我的项目中使用 git 并且我执行了这些命令。

```
git init
git remote add myproject1 http://url 
```

现在我能够通过这些简单的命令获得最新的更新和提交，而无需添加参数：

```
git push
git pull 
```

现在我开始在另一个项目上工作，并在我的另一个文件夹中使用了相同的 2 个命令，只有很小的更改`git add myproject2 http://url2`

当我使用 GIT 浏览我的第一个项目或第二个项目时，GIT 会默认知道从哪里到`pull`哪里或从哪里到哪里，`push`还是我必须始终定义项目名称？（项目 1 或项目 2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:21:02.267

`.git`Git 将存储库的所有元数据存储在工作副本内名为 的目录中。`cd`所以是的，当您进入不同的工作副本（项目）并执行`git push`or时，git 会知道要使用哪个远程存储库`git pull`。

# c# - 如何同时使用 SqlConnection 和 DataContext？

> ID：13935665
> 
> 赞同：3
> 
> 时间：2012-12-18T15:00:17.417
> 
> 标签：c#, .net, sql-server

我有一个稍微过度设计的代码，需要`DataContext`与`SqlConnection`. [这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb292288.aspx)说

> 如果您提供打开的连接，DataContext 将不会关闭它。因此，除非您有充分的理由这样做，否则不要使用打开的连接实例化 DataContext。

在我的代码中，我将有效地拥有这个：

```
using( var connection = new SqlConnection( connectionString ) ) {
    connection.Open();
    // some action
    using( var context = new DataContext( connection ) ) {
       //some action with the context object
    }
    //more action with the connection
} 
```

`using`对我来说它看起来很好 - 当外部崩溃时连接将关闭。然而，我不应该这样做。

上面的代码片段是否正确地同时使用了这两个类？我应该期待任何问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:37:54.450

您的意图应该是保持连接活着，并将连接传递给所有方法，在开始时打开它并在结束时关闭它，以提高性能，这很好，但看起来很麻烦。并且“连接”将被传递，甚至被业务逻辑层引用。

也许你应该找到更好的方法。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-02T13:06:53.230

假设您有这个生成的 DataContext 类：

```
public partial class MyDataContext: System.Data.Linq.DataContext
{
 ...
} 
```

要与 SqlConnection 一起使用，请执行以下操作：

```
 using (var cnn = new SqlConnection("my connection string"))
 {
     cnn.Open();

     var dc= new MyDataContext(cnn);
     // enjoy
     ...
     cnn.Close();
 } 
```

# jquery - 使用jQuery在每个函数中的div内生成图像

> ID：13935668
> 
> 赞同：0
> 
> 时间：2012-12-18T15:00:20.787
> 
> 标签：jquery, appendto

```
$.each(data.items, function(i, pic) {
    $('<img/>').attr('src', pic.image).appendTo($("#wrap .images"));
}); 
```

我怎样才能在具有`<img/>`“img-wrap”类的 div 中使用它？

为澄清而编辑：我实际上希望将 EACH 本身放在一个带有 img-wrap 类的独立 div 中，我有一个 json 请求，每次都会让我获得相当多的随机图像，我希望将它们放在一个 div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:05:00.180

我会做这样的事情，如果 div 标签和 img 标签存在，检索它们而不是创建它们：

```
var div = document.createElement('div');
div.setAttribute("class", "img-wrap");

var img = document.createElement('img');
img.setAttribute("src", pic.image);

div.appendChild(img);

yourHolder.appendChild(div); 
```

//亨里克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:33:05.047

如果有人想做我需要做的事情，那么这就是有效的：

```
$.each(data.items, function(i, pic) {
    $('<img/>').attr('src', pic.image).appendTo($("<div/>").attr('class', 'img-wrap').appendTo($("#wrap .images")));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:04:32.747

这应该很简单，如下所示：

```
$.each(data.items, function(i, pic) {
   $('.img-wrap').append('<img src="'+pic.image+'"/>');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:05:01.903

```
$(".img-wrap").wrapInner('<div />') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T15:07:08.447

尝试创建 html，然后将其添加到 div 中的现有 html 中：

```
> var innerHtml = "<img src = " + pic.image + "/>";
> $(".img-wrap").html($(".img-wrap").html() + innerHtml); 
```

# java - Struts2 异步加载页面

> ID：13935673
> 
> 赞同：0
> 
> 时间：2012-12-18T15:00:38.183
> 
> 标签：java, jquery, ajax, asynchronous, struts2

我看到了[这个](https://tutsplus.com/lesson/loading-pages-asynchronously/)关于通过 ajax 异步加载页面的视频。一切看起来都很简单，但如果我想加载某个页面怎么办。但是在该页面加载之前，它会执行或转到某个 Action 类（假设填充图像）我将如何实现呢？我已经用谷歌搜索了它，但它没有呈现结果

请注意，我不希望加载整个页面，只加载某个 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:41:06.400

Struts 2 不关心您的请求是同步的还是异步的。这完全是客户端的事情。您可以轻松地将页面请求指向与指向 Ajax 请求相同的 Struts 2 操作，尽管返回的数据可能对您的客户端应用程序没有意义。

大多数时候，您的 ajax 请求只需要 HTML 片段、JSON 或 XML 数据。但它可以接收整个 HTML 页面并使用一些逻辑来解析它以找到它实际需要的内容。真正的区别在于，对 Ajax 请求的响应由 Javascript 逻辑处理，而页面请求在浏览器尝试从响应中呈现页面时由浏览器本身处理。

# mysql - MySQL 仅从单个表中删除记录

> ID：13935674
> 
> 赞同：1
> 
> 时间：2012-12-18T15:00:45.937
> 
> 标签：mysql, sql, database

我有两个相互关联的表，我只想从一个表中删除记录。表结构如下

```
Table : Users
userunique, active, unSubscribed

Table : userBilling
userunique, billCreatedDate,billstatus 
```

我想删除那些不再活跃的用户账单，条件如下。

```
billcreateddate < 2011-12-30 
billstatus=2 //pending

active='0'
unSubscribed<'2011-12-30' 
```

我已经写了一个查询，但这不是我所期望的。我只想从 userBilling 表而不是用户表中删除记录

```
select * from userBilling ubill, Users user
WHERE ubilll.userUnique=user.userUnique 
AND ubill.billCreatedDate<'2011-12-30'
AND ubill.billstatus = '2'  
AND ((user.active = '0') AND (user.unsubscribed>'2011-01-01') 
AND user.unSubscribed<'2011-12-30')) 
```

但我猜上面的查询包括两个表的结果。请建议！

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:05:51.843

```
DELETE  a
FROM    userBilling a
        INNER JOIN users b
            ON a.auserUnique = b.userUnique
WHERE   billcreateddate < 2011-12-30 OR
        billstatus = 2 OR
        active = 0 OR
        unSubscribed < '2011-12-30' 
```

*如果您希望所有条件都为**真***，请更改`OR`为`AND`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:06:14.667

这应该有效。您应该始终使您的联接明确。这样你就不会感到惊讶了。

```
DELETE ubill
FROM userBilling ubill
  JOIN Users u
  ON (ubill.userUnique=u.userUnique)
WHERE ubill.billCreatedDate<'2011-12-30'
  AND ubill.billstatus = '2'  
  AND ((u.active = '0') AND (u.unsubscribed>'2011-01-01') 
  AND u.unSubscribed<'2011-12-30')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:09:00.417

尝试这样做

```
 DELETE ubill
      FROM userBilling ubill
     INNER JOIN Users
     ON  ubill.userUnique=user.userUnique
      WHERE  
        ubill.billCreatedDate<'2011-12-30'
        AND ubill.billstatus = '2'  
        AND user.active = '0' 
        AND user.unsubscribed>'2011-01-01' 
        AND user.unSubscribed<'2011-12-30' 
```

# php - 我是否做得足以确保安全的登录会话？

> ID：13935675
> 
> 赞同：1
> 
> 时间：2012-12-18T15:01:00.923
> 
> 标签：php

我是新来的会议，只是刚刚读过它们。我创建了一个简单的登录表单，并希望得到一些关于我是否做得对的建议。

我的数据库中有一个表，只有一个条目（只有一个用户可以登录），并且在提交表单时进行以下检查：

```
function loginWithDetails($username,$password) {
    global $dbh;

    $stm = $dbh->prepare("SELECT * FROM `login` WHERE id = '1'");
    $stm->execute();
    $row = $stm->fetch(PDO::FETCH_ASSOC);

    $hasher = new PasswordHash(8, false);
    $check = $hasher->CheckPassword($password, $row['password']);

    if (!$check)
        return 0;
    else {
        $_SESSION['userid'] = $row['username'];
        return 1;
    }
} 
```

此函数放置在我的`functions.php`文件中，该文件包含在`index.php`（`session_start()`调用的位置）中，并使用[Phpass](http://www.openwall.com/phpass/)进行散列。此后，我检查`$_SESSION['userid']`以确认用户已登录。一切正常，但我想确保该方法足以检查登录。

# java - TortoiseSVN 和 Subclipse 图标不随 SVN 更新？

> ID：13935682
> 
> 赞同：1
> 
> 时间：2012-12-18T14:44:08.143
> 
> 标签：java, eclipse, svn, tortoisesvn, subclipse

我在网络共享上有一个存储库，在两台不同的机器上都有工作目录。在对我的本地工作目录进行更改并提交后，其他开发人员机器上的图标不会更改。

如果开发人员转到 Team > Synchronize with Repository，它会在 Eclipse 的 Synchronize 视图中显示更改，但是如果项目旁边的图标与存储库不同步，我希望项目旁边的图标会发生变化。

Windows 资源管理器中的 TortoiseSVN 也是如此。如果我们右键单击并检查存储库是否有修改，它会显示它们，但是目录上的覆盖图标仍然是绿色复选框。

我是否只是误解了我期望发生的事情，或者如果项目不再与存储库同步，是否有办法让这些图标发生变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T15:11:39.600

图标不应更改。工作副本不相互连接。图标显示该工作副本的状态。Subversion 客户端很大程度上与服务器断开连接。仅在从存储库读取或写入时才需要连接。如果客户端不断地与服务器对话，性能会很糟糕。

使用命令行， svn status -u 是查看服务器上何时有不在工作副本中的更改的命令。在 Subclipse 中，这是同步操作，TortoiseSVN 有检查修改操作，然后有一个按钮来检查存储库。

# c# - 以编程方式检查 Windows 应用商店应用更新

> ID：13935684
> 
> 赞同：8
> 
> 时间：2012-12-18T15:01:23.377
> 
> 标签：c#, windows, xaml, windows-store-apps

我实际上是在尝试寻找一种方法来检查 Windows 商店应用程序是否有可用的更新。有没有办法用 API 做到这一点？谢谢 ！伊萨姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-04T14:25:13.693

Windows 商店没有专门用于检查更新的 API。有一个相当容易的工作。

```
 var package = Windows.ApplicationModel.Package.Current;
        PackageVersion t = package.Id.Version; 
```

这将为您提供用户正在运行的软件包版本。您可以使用它来检查您的一台服务器的当前版本。如果您还没有一个设置供您的应用使用，您不必做任何花哨的服务，您可以在您的网络服务器上使用一个简单的文本文件。说“myappversion.txt”。通过网络请求下载。

类似的东西。

```
 WebRequest req = WebRequest.Create(new Uri(@"http://myurl.com/MyAppversion.txt"));

        var result = await req.GetResponseAsync(); 
```

我知道这并不理想。还要考虑到 Windows 8.1 应该以静默方式更新应用程序，因此甚至可能不需要更新，尽管该更新是否会在应用程序启动之前进行。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-18T18:45:52.593

这篇文章中概述了对 Windows 应用商店数据的无证访问：

> [http://jasonthomascarter.blogspot.com/2013/08/the-friendly-developers-guide-to.html](http://jasonthomascarter.blogspot.com/2013/08/the-friendly-developers-guide-to.html)

我把它的文字贴在这里，以防网站消失。:)

今天，我收到了一位开发人员对我的一个 Windows 应用商店应用程序轮盘赌的支持电子邮件的询问。这非常令人耳目一新，而且我非常愿意与其他开发人员分享信息。我更兴奋的是看到他们将创造什么，而不是担心竞争的潜力。所以在这里和大家分享一下。无论如何，这位开发人员想知道如何获取此应用程序信息，我将解释我如何访问该信息以及您也可以如何访问。

首先是一点自我宣传，除了 App Roulette，我在其他一些应用程序中使用了这些信息。Developer Dashboard 一站式商店，可查看所有国家/地区对所有应用程序的评论，只需轻按一下即可翻译每条评论，Windows Store Developers Windows 商店中所有开发人员（超过 10000 名）及其应用程序的目录，最活跃Reviewers 最多产的应用程序评论者及其评论的目录，在我自己的投资组合应用程序软件开发人员中列出了我在 Windows 应用商店中发布的所有其他应用程序，请尝试其中的一些。

开始了！首先，我们将从 Windows Store 网站的 Robots.txt 文件开始。

> [http://apps.microsoft.com/robots.txt](http://apps.microsoft.com/robots.txt)

网站使用 robots.txt 来指导网络爬虫如何表现、他们希望他们看到什么以及他们不希望他们看到什么。

> [http://www.robotstxt.org/](http://www.robotstxt.org/)

Web 机器人（也称为 Web Wanderers、Crawlers 或 Spiders）是自动遍历 Web 的程序。谷歌等搜索引擎使用它们来索引网络内容，垃圾邮件发送者使用它们来扫描电子邮件地址，它们还有许多其他用途。

在这种情况下，我们感兴趣的是 Sitemaps.xml 索引文件。`http://apps.microsoft.com/windows/sitemap_index.xml`

> [http://www.sitemaps.org/](http://www.sitemaps.org/)

站点地图是网站管理员通知搜索引擎有关其网站上可供抓取的页面的一种简便方法。在最简单的形式中，站点地图是一个 XML 文件，其中列出了站点的 URL 以及有关每个 URL 的附加元数据（上次更新时间、更改频率以及相对于站点中其他 URL 的重要性） ) 以便搜索引擎可以更智能地抓取网站。

站点地图索引文件列出了每个单独的站点地图 XML 文件。在撰写本文时，apps.microsoft.com 网站有 141 个单独的站点地图 XML 文件。

在各个文件中包含数千个指向 Windows 应用商店应用网页的 URL。例如 PlayTo Receiver 应用程序的 URL：`http://apps.microsoft.com/windows/en-us/app/playto-receiver/72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e`

这些应用程序的网页确实包含一些我们可以从 HTML 中抓取的信息，但我们可以做得更好......我们在这里获得的关键信息是应用程序 ID 以及这些应用程序 ID 发布到的地理区域店铺。例如：`72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e`等等`en-us`……

现在到了好东西，我们可以使用我们新发现的 App Id 和地理信息调用一些 Web 服务。

> [https://services.apps.microsoft.com/browse/6.2.9200-1/615/en-US_en-US/c/US/cp/10005001/Apps/72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e](https://services.apps.microsoft.com/browse/6.2.9200-1/615/en-US_en-US/c/US/cp/10005001/Apps/72a6ba17-2d4e-4a1c-bcfb-cdc5d4b32d0e)

通过此 Web 服务可以获得大量信息，但元素名称并没有清楚地说明这些信息。这是我对其中许多（不是全部）的解释，以帮助您入门。

```
sSubCategoryName = rawXML.getElementsByTagName('Sc')[0].getElementsByTagName('N')[0].childNodes[0].nodeValue;
sSubCategoryId = rawXML.getElementsByTagName('Sc')[0].getElementsByTagName('I')[0].childNodes[0].nodeValue;
sHasTrial = rawXML.getElementsByTagName('Try')[0].childNodes[0].nodeValue;
sDescription = rawXML.getElementsByTagName('D')[0].childNodes[0].nodeValue;
sDeveloper = rawXML.getElementsByTagName('Dev')[0].childNodes[0].nodeValue;
sWebsite = rawXML.getElementsByTagName('Ws')[0].childNodes[0].nodeValue;
sSupport = rawXML.getElementsByTagName('Sws')[0].childNodes[0].nodeValue;
sPrivacy = rawXML.getElementsByTagName('Pu')[0].childNodes[0].nodeValue;
sCategoryName = rawXML.getElementsByTagName('C')[0].getElementsByTagName('N')[0].childNodes[0].nodeValue;
sCategoryId = rawXML.getElementsByTagName('C')[0].getElementsByTagName('I')[0].childNodes[0].nodeValue;
sPrice = rawXML.getElementsByTagName('P')[0].childNodes[0].nodeValue;
sForegroundColor = rawXML.getElementsByTagName('Fg')[0].childNodes[0].nodeValue;
sBackgroundColor = rawXML.getElementsByTagName('Bg')[0].childNodes[0].nodeValue;
sAppIcon = rawXML.getElementsByTagName('Ico')[0].childNodes[0].nodeValue;
sAppName = rawXML.getElementsByTagName('T')[0].childNodes[0].nodeValue;
sPackageFamilyName = rawXML.getElementsByTagName('Pfn')[0].childNodes[0].nodeValue;
sResourceId = rawXML.getElementsByTagName('R')[0].childNodes[0].nodeValue;
sId = rawXML.getElementsByTagName('I')[0].childNodes[0].nodeValue;
sCapabilities = sCapabilities + arrCapabilities[k].childNodes[0].nodeValue+",";
sUpdate = rawXML.getElementsByTagName('Ud')[0].childNodes[0].nodeValue;
sFeatures1 = rawXML.getElementsByTagName('Dbp')[0].childNodes[0].nodeValue;
sFeatures2 = rawXML.getElementsByTagName('Dbp')[1].childNodes[0].nodeValue;
sFeatures3 = rawXML.getElementsByTagName('Dbp')[2].childNodes[0].nodeValue;
sFeatures4 = rawXML.getElementsByTagName('Dbp')[3].childNodes[0].nodeValue;
sFeatures5 = rawXML.getElementsByTagName('Dbp')[4].childNodes[0].nodeValue;
sFeatures6 = rawXML.getElementsByTagName('Dbp')[5].childNodes[0].nodeValue;
sFeatures7 = rawXML.getElementsByTagName('Dbp')[6].childNodes[0].nodeValue;
sFeatures8 = rawXML.getElementsByTagName('Dbp')[7].childNodes[0].nodeValue;
sFeatures9 = rawXML.getElementsByTagName('Dbp')[8].childNodes[0].nodeValue;
sScreenshot1 = rawXML.getElementsByTagName('Ss')[0].getElementsByTagName('U')[0].childNodes[0].nodeValue
sScreenshot2 = rawXML.getElementsByTagName('Ss')[1].getElementsByTagName('U')[0].childNodes[0].nodeValue
sScreenshot3 = rawXML.getElementsByTagName('Ss')[2].getElementsByTagName('U')[0].childNodes[0].nodeValue
sScreenshot4 = rawXML.getElementsByTagName('Ss')[3].getElementsByTagName('U')[0].childNodes[0].nodeValue
sScreenshot5 = rawXML.getElementsByTagName('Ss')[4].getElementsByTagName('U')[0].childNodes[0].nodeValue
sScreenshot6 = rawXML.getElementsByTagName('Ss')[5].getElementsByTagName('U')[0].childNodes[0].nodeValue
sScreenshot7 = rawXML.getElementsByTagName('Ss')[6].getElementsByTagName('U')[0].childNodes[0].nodeValue
sScreenshot8 = rawXML.getElementsByTagName('Ss')[7].getElementsByTagName('U')[0].childNodes[0].nodeValue
sScreenshot9 = rawXML.getElementsByTagName('Ss')[8].getElementsByTagName('U')[0].childNodes[0].nodeValue
sCaption1 = rawXML.getElementsByTagName('Ss')[0].getElementsByTagName('Cap')[0].childNodes[0].nodeValue
sCaption2 = rawXML.getElementsByTagName('Ss')[1].getElementsByTagName('Cap')[0].childNodes[0].nodeValue
sCaption3 = rawXML.getElementsByTagName('Ss')[2].getElementsByTagName('Cap')[0].childNodes[0].nodeValue
sCaption4 = rawXML.getElementsByTagName('Ss')[3].getElementsByTagName('Cap')[0].childNodes[0].nodeValue
sCaption5 = rawXML.getElementsByTagName('Ss')[4].getElementsByTagName('Cap')[0].childNodes[0].nodeValue
sCaption6 = rawXML.getElementsByTagName('Ss')[5].getElementsByTagName('Cap')[0].childNodes[0].nodeValue
sCaption7 = rawXML.getElementsByTagName('Ss')[6].getElementsByTagName('Cap')[0].childNodes[0].nodeValue
sCaption8 = rawXML.getElementsByTagName('Ss')[7].getElementsByTagName('Cap')[0].childNodes[0].nodeValue 
```

Windows 应用商店不仅仅是应用程序，还有评论，而且还有很多。目前，Windows 应用商店中有超过 210,000 条应用评论。这些评论来自世界各地，所以你需要一些国家代码，你方便的花花公子 App Id 并注意最后的 pn/1，你会发现这个服务每页只返回 10 条评论，只是增加将此值设置为 pn/2、pn/3 等。直到您的评论用完。

```
var arrCounntryCodes = ["AE", "AR", "AT", "AU", "BE", "BG", "BH", "CA", "CH", "CL", "CN", "CO", "CR", "CY", "CZ", "DE", "DK", "DZ", "EE", "EG", "ES", "FI", "FR", "GB", "GR", "HK", "HR", "HU", "ID", "IE", "IL", "IN", "IQ", "IT", "JO", "JP", "KW", "KZ", "LB", "LK", "LT", "LU", "LV", "LY", "MA", "MT", "MX", "MY", "NL", "NO", "NZ", "OM", "PE", "PH", "PK", "PL", "QA", "RO", "RS", "RU", "SA", "SE", "SG", "SI", "SK", "TH", "TN", "TR", "TT", "UA", "US", "UY", "VE", "VN"]; 
```

> [https://services.apps.microsoft.com/4R/6.2.9200-1/1/en-US/m/US/Apps/f514d64b-8705-43b7-a400-c4f4f3dedfc0/Reviews/all/s/date/ 1/pn/1](https://services.apps.microsoft.com/4R/6.2.9200-1/1/en-US/m/US/Apps/f514d64b-8705-43b7-a400-c4f4f3dedfc0/Reviews/all/s/date/1/pn/1)

这个对元素名称的描述性更强，所以我认为不需要进一步解释。您可以看到全名、显示名称、用户选择用来代表自己的图像。

接下来我们可以做一些搜索......`https://services.apps.microsoft.com/search/6.2.9200-1/615/en-US_en-US/m/US/c/US/il/en-US/cp/10005001/query/cid/0/pf/1/pc/0/pt/x64/af/0/lf/0/s/0/2/pn/0?phrase=Software Developer`

在这里它再次变得有点神秘，但现在你应该已经习惯了。您可以从 I 元素获取 App ID 并将其从那里带回浏览服务`<I>f514d64b-8705-43b7-a400-c4f4f3dedfc0</I>`

至此，您已经掌握了从 Windows 应用商店中提取大量信息的基础知识，然后您就可以随心所欲了。如果您发现这很有用和/或利用这些信息制作了一些应用程序，请分享一些额外的信息，否则请在评论中告诉我。

# ios - 乐器 - #living + arc

> ID：13935690
> 
> 赞同：1
> 
> 时间：2012-12-18T15:01:41.210
> 
> 标签：ios, ios6, automatic-ref-counting, instruments, allocation

我的应用程序有 2 个视图控制器。第一个只有一个按钮来调用第二个充满动画的视图控制器。在运行带有分配的工具时，它从 #living 插槽中的 12000 开始。关闭第二个视图控制器后，#living 计数再也不会返回到 12000。它保持 18000。在第三遍中，它上升到 24000。我使用的是 iOS 6 和 arc。arc 不应该负责释放内存吗？每次我关闭第二个视图控制器时，关于这些额外的 6000 的任何线索，据说，它里面的所有东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:25:21.723

ARC 为您处理*保留*和*释放*。它不会阻止、检测或解决循环——也就是说，任何对象 A 保留 B，而 B 也保留 A（或其任何变体，具有更长的对象链）。您可以使用 Instruments 来查找循环，而不是您或我猜测它的来源 - 例如，参见[早期](https://stackoverflow.com/questions/8852451/how-to-activate-cycles-reporting-in-instruments-under-arc)的 Stackoverflow 帖子。Interwebs 上也有很多关于保留周期的阅读材料（例如[Mike Ash 的博客](http://www.mikeash.com/pyblog/friday-qa-2010-04-30-dealing-with-retain-cycles.html)）。

# asp.net - 我的网站有时会随机返回 404。我该如何阻止这个？

> ID：13935692
> 
> 赞同：2
> 
> 时间：2012-12-18T15:01:43.127
> 
> 标签：asp.net

我有一个我建立的工作申请网站，它在一年左右的时间里运行良好。最近，这是一个正在发生的新事情，该网站返回404。现在默认主页仍然存在。而且sql的东西也很稳定。

我注意到它也可以依赖于浏览器。所以有时它会返回 404 到谷歌浏览器，而不是 Firefox 或 IE。或某种组合。

这会发生，页面返回 404，通常在一天中随机出现，并持续几分钟，然后它会正常继续。

该网页是一个 aspx.net 网页，其中包含一些运行最新版本的 .net 的 vb.net 内容。该网站运行 IIS。

我相当肯定我的代码中没有任何内容，或者我的 sql 调用会提示这种行为。我们没有运行与该网站相关的计划任务，所以我很困惑。什么会导致这种经常出现 404 错误的行为？

[编辑]

快速简介：

- 404 是一个普通的 404，没有附加下标

- 它发生在整个办公室的随机人身上

- 随机发生

- 它只影响某些浏览器，但所有浏览器都会在某些时候受到影响

-它似乎没有在外部发生

- 我没有尝试过可以重现此错误的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:41:55.890

我们已经重新启动了保存应用程序系统的服务器。到目前为止，它似乎已经解决了这个问题。如果它再次发生并且我们以不同的方式解决它，我一定会回来更新这个答案。

# scala - Scala迭代写入文件

> ID：13935696
> 
> 赞同：4
> 
> 时间：2012-12-18T15:01:54.073
> 
> 标签：scala, playframework-2.1, iterate

我有一个方法`save`可以`Iteratee` `it`将一些数据保存到`it`. 在该方法内部，数据可用作生成字节数组块的[枚举器。](http://www.playframework.org/documentation/2.0.4/Enumerators)

```
def save[E](consumer: Iteratee[Array[Byte], E]): Future[E] = {
  val producer: Enumerator[Array[Byte]] = // ...
  Iteratee.flatten(producer(consumer)).run
} 
```

**需要：**调用`save`以使其将数据写入`FileOutputStream`.

我尝试了以下方法，但不确定这是否可行：

```
def writeToStream(s: OutputStream) =
  Iteratee.foreach((e: Array[Byte]) => s.write(e)).
    mapDone(r => { s.close(); r })
save(writeToStream(new FileOutputStream(myFile))) 
```

**问题：**这是它应该做的方式吗？我担心这不会总是关闭流（例外情况）。

我正在使用[Play Framework](http://www.playframework.org) 2.1 中的 Play Framework Iteratee 库（它使用 Scala 期货）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-11T23:30:22.873

Iteratee 的 scaladocs 说，处理资源是“生产者”而不是 iteratee 的责任：

> Iteratee 不做任何资源管理（如关闭流）；将东西推入 Iteratee 的生产者有这个责任。

之后，您可能会成功使用 Enumerator 中的“onDoneEnumerating”方法清理资源。

[Scaladoc迭代](http://www.playframework.com/documentation/2.2.x/api/scala/index.html#play.api.libs.iteratee.Iteratee)

# gwt - 调用 GWT RPC 服务

> ID：13935699
> 
> 赞同：0
> 
> 时间：2012-12-18T15:02:00.843
> 
> 标签：gwt, rpc

我一直在浏览 [https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC上的谷歌教程（我觉得非常好）](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC)

我在本地服务器上启动并运行了该服务，我的 JavaScript 客户端可以正常调用它。到目前为止还可以。现在，我想做的是在远程服务器上部署服务 JoeSoapHost:8080
我现在如何告诉我的客户将其请求发送到哪里？我看不到在我的 RPC 调用中创建的任何服务器/URL。它只是靠魔法起作用，但现在我想钻到引擎盖下开始打破它。

[编辑} 这是我的客户端用来知道要调用服务器上的什么服务的接口。我知道我的 Web.xml 网络描述符必须有一个与之匹配的 url。它有这个，因为我的服务器调用正常。问题是，如果我现在决定将我的服务器部署到其他地方，我该如何告诉我的客户使用什么服务器/域名？

```
@RemoteServiceRelativePath("stockPrices")
public interface StockPriceService extends RemoteService 
{
    StockPrice[] getPrices(String[] symbols);
} 
```

我首先要实现的是让一个简单的 GWT 客户端调用 RPC 服务。我有这个工作，但只有当服务器是本地主机时。下一步，我将我的应用程序部署到 Google App Engine。我现在必须更改什么，因为当我将应用程序部署到 [http://stockwatcherjf.appspot.com/StockWatcher.html时，我的 JavaScript 中的 RPC 服务没有被调用](http://stockwatcherjf.appspot.com/StockWatcher.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:37:54.167

1) Brian Slesinsky 关于 RPC 的优秀文档 - [https://docs.google.com/document/d/1eG0YocsYYbNAtivkLtcaiEE5IOF5u4LUol8-LL0TIKU/edit#heading=h.amx1ddpv5q4m](https://docs.google.com/document/d/1eG0YocsYYbNAtivkLtcaiEE5IOF5u4LUol8-LL0TIKU/edit#heading=h.amx1ddpv5q4m)

2) @RemoteServiceRelativePath("stockPrices") 允许 GWT 代码确定相对于您的主机/服务器/域，即 http//mydomain.com/gwtapp/stockPrices

3) 您可以搜索 2009 年至 2012 年的 GOOGle IO 会话，以获取有关 GWT RPC 使用的更深入内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:40:35.967

`@RemoteServiceRelativePath`给出 servlet 相对于 的路径`GWT.getModuleBaseURL()`（或多或少是`*.nocache.js`脚本的 URL）；它不“只是靠魔法工作”。

如果您将服务部署在与客户端代码不同的服务器上，那么您可能会遇到[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)。[CORS](http://www.w3.org/TR/cors)在这里可以提供帮助，但您将失去与 IE 的兼容性（包括 IE9）。你最好坚持为同一来源的所有东西提供服务。

# jquery - 如何向 jQuery 添加函数？

> ID：13935702
> 
> 赞同：-3
> 
> 时间：2012-12-18T15:02:09.787
> 
> 标签：jquery, function, add

> **可能重复：**
> [如何向 jQuery 添加函数？](https://stackoverflow.com/questions/1768150/how-to-add-a-function-to-jquery)

我想向 jQuery 添加一个名为 parse_int 的函数，它将简单地返回基数为 10 的 parseInt。该函数应该是 $.parse_int 并且像 $.trim 一样工作（没有对象）。它将接收一个字符串并返回一个整数。如何将这样的功能添加到 jQuery？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:29:05.143

好的，我找到了解决方案。我添加了一个名为 jquery_plugins.js 的 JavaScript 文件，以下是该文件的内容：

```
// Add functions to the jQuery object.
(function( $ ) {
    // Return parseInt with radix 10 if not specified.
    $.parse_int= function(fp_string, fp_radix) {
        var radix= ((typeof(fp_radix) !== "undefined") ? fp_radix : 10);
        return parseInt(fp_string, radix);
    };
})( jQuery ); 
```

它可以工作，并且调用是带或不带基数的 $.parse_int 。如果未指定基数，则默认值为 10。

乌里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:04:18.993

```
$.parse_int(val){
    return parseInt(val, 10);
} 
```

# algorithm - MATLAB中开始日期和结束日期之间的值总和

> ID：13935703
> 
> 赞同：3
> 
> 时间：2012-12-18T15:02:15.813
> 
> 标签：algorithm, matlab

如果在 MATLAB 中，我有一组代表连续时间段的开始日期**和**结束日期，我将如何采用单独的每日时间序列并在每个开始/结束对上累积来自所述时间序列的任何值？

这是可以做的`accumarray()`吗？我不清楚构建按开始/结束对对时间序列的每个元素进行分组的向量是否有效。

```
Inputs

Start Date    End Date

01/01/12      01/31/12
02/01/12      02/28/12
...

Date          Value

01/01/12      23
01/02/12      87
01/03/12      5
01/04/12      12
...
02/01/12      4

Output

Start Date    End Date    Value

01/01/12      01/31/12    127
02/01/12      02/28/12    4
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:22:40.777

对于连续的时间段，以下方法可能有效。请注意，包含日期的字符串是单元字符串，对于连续数据，只有开始日期/结束日期矩阵的第一列是必需的。

此外，请注意，为了清楚起见，我将您的时间序列数据分为两个变量。

```
dateBins = {...
    '01/01/12';
    '02/01/12';
    '03/01/12';
    '04/01/12'};

dates = {
    '01/01/12'
    '01/02/12'
    '01/03/12'
    '01/04/12'
    '02/01/12'    };

values = [
    23
    87
    5
    12
    4]; 
```

有了这些变量，下面的代码

```
[thrash, idx] = histc(datenum(dates), datenum(dateBins))

accumVal = accumarray(idx, values);

result = zeros(length(dateBins), 1); 
result(1:length(accumVal),1) = accumVal; 
```

将导致：

```
result =

   127
     4
     0
     0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:51:57.270

假设您已经有两个向量，其开始日期和结束日期的格式可以用来比较，并且您只想计算每个类别中出现的次数，那么它非常简单：

```
% Your data
Dates = 25*rand(10,1);
StartDate = [1 10 20];
EndDate = [9 19 29];

% The Calculation
Result = zeros(size(StartDate)); %Initialization
for d = 1:length(startdate)
    idx = dates >= StartDate & dates <= EndDate;
    Result(d) = sum(idx);
end 
```

请注意，这将要求您以可比较的格式存储日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:57:08.367

我会遍历每一对开始/结束日期。然后挑选索引开始/停止对并将它们相加。如果使用`datestr`s，则可以使以下内容不那么脆弱，同时在表示跨年的时间等方面具有更大的灵活性。

```
start_date = {'01/01/12'};
end_date={'01/31/12'};
datevec={'01/01/12','01/02/12','01/03/12','01/31/12'};
values=[23,87,5,12];

for i=1:numel(start_date)

    is = find(ismember(datevec,start_date{i})==1);
    ie = find(ismember(datevec,end_date{i})==1);

    sum(values(is:ie))

end 
```

# c# - 从另一个类更改私有字符串

> ID：13935704
> 
> 赞同：0
> 
> 时间：2012-12-18T15:02:15.623
> 
> 标签：c#, forms, inheritance, properties, private

我想知道为什么当我从继承自 Event 的 Leisure 类访问属性时，我的 Events 类中的私有变量“name”不会改变。我需要 Leisure 使用属性来更改它，然后在我的表单类中，它应该能够从事件中读取“名称”的值。见下文：

```
public partial class Form1 : Form //Main form class
{
    private string eventType; //used for event type selection
    private string formEventName; //used to store selected event name

     private void itemSend_Click(object sender, EventArgs e)
    {
        //encapsulation
        Events myEv = new Events();
        string name=itemInput.Text; 
        myEv.myEvent(eventType, name);
        formEventName = myEv.myName;
        txtOutput.Text = "Event name is " + formEventName + "\r\n";            
    }

class Events:Form1
{
    private string name; //private variable for event name      
     public string myName //used to change property value depending on what eveny type/ event name
    {
        get { return name; }
        set { name = value; }   
    }
    public void myEvent(string eventType, string eventName) //variable recieved from main form class
    {
        if (eventType == "Leisure")
        {

           Leisure myLes = new Leisure(); 
           myLes.eventNames(eventName);  

        }
        else
        {
            //test for other event types
        }  
    }

    class Leisure:Events
 {
    public void eventNames(string eventName) 
    {

        //when adding new items add one with a capital and one without
        myEventNames.Add("music");
        myEventNames.Add("Music");
        if (myEventNames.Contains(eventName))
        {
            myName = eventName;
        }
        else
        {
            MessageBox.Show("item not found, please try again"); //error message
        }
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:09:27.330

`myName`您正在使用的属性更改`name`myLes 实例的私有字段，而不是在 ItemSend_Click 中创建的 myEv 实例的名称私有字段。

在面向对象语言中，当您创建类的实例时，该实例具有该类中声明的每个非静态私有/公共变量的副本。所以当你写

```
 Leisure myLes = new Leisure(); 
```

您正在创建 Leisure 类的实例，但此实例虽然从 Events 继承，但具有一组不同的内部变量，而不是当前 Event 实例 (myEv) 的相同变量。

查看您的代码，我建议创建一个名为

```
public class EventFactory
{
    public Event CreateEvent(string eventType, string eventName)
    {
        switch(enventType)
        {
            case "Leisure":
                 Leisure myLes = new Leisure(); 
                 myLes.eventNames(eventName);  
                 return myLes;
            // case Add other specialized events here:
            // break;
            default:
                 return null;
        }
    }
} 
```

更改您的 Events 类，删除 Form1 的继承（据我所知不需要）和方法 myEvent

现在你的 ItemSend_Click 可以这样写

```
private void itemSend_Click(object sender, EventArgs e)
{
    Events myEv = new EventFactory().CreateEvent(eventType, itemInput.Text);
    formEventName = myEv.myName;
    txtOutput.Text = "Event name is " + formEventName + "\r\n";            
} 
```

这是因为`Leisure`派生自`Events`并且您可以将每个 Leisure 实例视为一个 Event 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:10:09.710

`Events`继承自似乎是错误的`Form1`。

当您说 时`new Events()`，您将获得一个与现有表单无关的新对象，并且您对其所做的任何更改都不会影响现有表单。当您说 时，这种情况再次发生`new Leisure()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:09:49.917

您只需更改字段`myName`中的`myLes (Leisure)`变量`myEv`，这就是 myEv.myName 仍然为空的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:43:27.153

因此，您遇到的问题只是代码中主要基本问题的一个小症状，只会随着您的继续而继续显现。

我已经将你所拥有的东西改写成更符合传统上你正在尝试做的事情的东西。这并不完美，我尽量让事情保持相当简单，以免一次给你太多东西。

```
public partial class Form1 : Form //Main form class
{
    private TextBox itemInput;
    private TextBox txtOutput;
    private string eventType; //used for event type selection
    private string formEventName; //used to store selected event name

    private void itemSend_Click(object sender, EventArgs e)
    {
        string name = itemInput.Text;
        try
        {
            Event myEvent = Event.Create(eventType, name);
            txtOutput.Text = "Event name is " + myEvent.Name + "\r\n";
        }
        catch (ArgumentException ex)//if the event name isn't valid
        {
            MessageBox.Show(ex.Message);
        }
    }
}

public abstract class Event
{
    public string Name { get; private set; }
    public Event(string eventName)
    {
        Name = eventName;
    }
    public static Event Create(string eventType, string eventName)
    {
        if (eventType == "Leisure")
        {

            Leisure myLes = new Leisure(eventName);
            return myLes;

        }
        //  else if { ... } test for other event types
        else
        {
            return null;
        }
    }
}

public class Leisure : Event
{
    private static List<string> myEventNames =
        new List<string>() { "music", "Music" };
    public Leisure(string eventName)
        : base(eventName)
    {
        if (!myEventNames.Contains(eventName))
        {
            throw new ArgumentException("Not a valid Leisure event name");
        }
    }
} 
```

那么，让我们回顾一下其中的一些变化。首先，`Event`不继承自`Form1`. 它不应该这样做。事件在概念上根本不是一种形式，更不用说那种特定类型的形式了。An`Event`不应该以任何方式了解任何形式，而不仅仅是继承。它只是`Form1`将使用的其他一些类，但它可以很容易地被任何其他类型的类、表单或其他类型使用。

除了`Event`不继承之外`Form`，我还把它抽象化了。它没有任何抽象方法，只是你不应该只创建一个 plain `Event`，你应该只实际创建某种特定类型的事件。作为一个通用基类，最简单的方法是防止意外创建并通过将`abstract`.

我也做了`Event`不可变的。而不是允许随时更改名称，创建一个事件而不给它一个名称，然后再更改它，我已经将它配置为你需要在创建事件之前提供名称和类型，然后就没有办法了一旦它被创建就改变它。在`Name`构造函数中设置，我添加了一个静态`Create`方法，逻辑可以在其中选择正确的子类型`Event`并实际创建它。这是“工厂模式”的简单版本。请注意，通常我不会将类型作为字符串传递。我会把它做成一个类似的东西`Enum`，这样更容易分辨出有效的选项是什么。

现在进入`Leisure`. 从逻辑上讲，`Leisure`真的是一个`Event`并且应该从它继承。您的问题源于您创建了 的实例`Event`，以及 的实例`Leisure`，并假设它们共享相同的变量。他们没有，但既然你永远无法拥有`Event`.

创建a 时`Leisure`，它使用基类构造函数来设置`Name`，因为它无权设置属性本身。

从我所看到`myEventNames`的只是一个有效名称的列表，它似乎在不同类型的`Leisure`实例之间没有变化，所以它是有意义的`static`，这意味着它在所有实例之间共享并且只创建一次。

我还将`MessageBox`调用移出`Leisure`类型的构造函数。相反，我抛出了一个异常。这里的主要思想是您不应该将您的 UI 代码与您的业务代码混合在一起。 `Event`并且`Leisure`都是业务对象，不应该知道任何关于 UI 存在的信息（如果有的话）。您应该能够从控制台应用程序、ASP 应用程序等中使用它们。最重要的是，因为我们要说的是这是一个无效的名称并且该类型不应该存在，所以最终结果是在构造函数中抛出 Excpetion 是该对象永远不会变为“有效”。我们不允许创建不应该存在的对象，而不是允许他们继续使用该对象。

该异常被 中的`try/catch`块捕获，它根据创建事件的失败 `Form1`显示适当的。`MessageBox`

# jquery - jasmine sinon 同步ajax调用导致死循环

> ID：13935708
> 
> 赞同：4
> 
> 时间：2012-12-18T15:02:39.470
> 
> 标签：jquery, ajax, jasmine, synchronous, sinon

我正在使用 jasmine 进行单元测试，并使用 sinon 来模拟 ajax 调用。但是，这会导致我的测试用例被重复调用的无限循环。ajax 调用是同步进行的。如果我将 ajax 调用更改为异步，则不会发生无限循环。任何帮助或指示将不胜感激！

这是带有ajax调用的函数：

```
define([
    // Utils
    'util/logging',
    // Project Dependencies
    'views/core/baseView',
    'i18n!i18n_DNA/nls/basePage',
    'i18n!i18n_DNA/nls/consentSettingsView',
    'duster!templates/widgets/testSettings/consentSettings.dust.html'
], function (Log, BaseView, i18n_basePage, i18n_consentSettingsView, template) {
    'use strict';

    // ConsentSettingsView
    // -----------------------------------------------------------------------------------------
    return BaseView.extend({

        events: {
            'click #deleteTestButton': 'deleteTestModal'
        },

        className: 'connectDelete',

        // initialize()
        // ---------------------------------------------------------------------------------------
        initialize: function () {

            this.hasConsented = this.options.hasConsented;
            this.testId = this.options.testId;
            this.appRouter = this.options.appRouter;

            // Call `super()`.
            BaseView.prototype.initialize.call(this);
        },

        // render()
        // ---------------------------------------------------------------------------------------
        render: function () {

            var self = this;

            var context = {
                i18n_basePage: i18n_basePage,
                i18n_consentSettingsView: i18n_consentSettingsView,
                hasConsented: this.hasConsented,
                testId: this.testId
            };

            dust.render('templates/widgets/testSettings/consentSettings.dust.html', context, function (err, out) {
                if (err) {
                    console.error(err);
                } else {
                    self.$el.html(out);
                }
            });

            return self;
        },

        // deleteTestModal()
        // ---------------------------------------------------------------------------------------
        deleteTestModal: function () {
            AcomModal.open('deleteTestModal');
            $('#pDelId').click($.proxy( this.deleteTest, this));
        },

        // deleteTest()
        // ---------------------------------------------------------------------------------------
        deleteTest: function () {

            var self = this;

            $.ajax({
                url: 'testSettings/' + encodeURIComponent(this.testId),
                dataType: 'json',
                data: {
                    password: $('#pUserPwd').val(),
                    testId: self.testId
                },
                async: false,
                type: 'DELETE',
                success: function (data, textStatus, jqXHR) {
                    Log.info("Successfully deleted test #", self.testId, data, textStatus, jqXHR);
                },
                error: function (jqXHR, textStatus, errorThrow) {
                    Log.error(jqXHR, textStatus, errorThrow);

                    switch (jqXHR.status) {
                        case 401:
                            self.appRouter.navigate("#login", {trigger: true});
                            break;
                        case 404:
                            self.appRouter.navigate("#404", {trigger: true});
                            break;
                        default:
                            self.appRouter.navigate("#serviceUnavailable", {trigger: true});
                    }
                },
                complete: function (jqXHR, textStatus) {
                    $('#pDelId').unbind('click');
                    window.location = window.location.origin + window.location.pathname + window.location.search;
                }
            });
        }
    });
}); 
```

这是我的测试用例：

```
define([
    'backbone',
    'views/widgets/testSettings/consentSettingsView'
], function (Backbone, ConsentSettingsView) {

    // deleteTestModal()
    // ---------------------------------------------------------------------------------------
    describe('ConsentSettingsView.deleteTest()', function () {

        var server;
        var appRouter;
        var consentSettingsView;

        // Setup
        // -----------------------------------------------------------------------------------------
        beforeEach(function(){

            appRouter = {
                navigate: function () {
                    console.log('navigate called', arguments);
                }
            };

            consentSettingsView = new ConsentSettingsView({
                hasConsented: false,
                testId: 1,
                appRouter: appRouter
            });

            server = sinon.fakeServer.create();

            server.respondWith(/testSettings\/(\d+)/, function(xhr, id) {
                switch (id) {
                    case '1':
                        xhr.respond(200, {'Content-Type': 'application/json'}, JSON.stringify({id: id, success: true}));
                        break;
                    case '2':
                        xhr.respond(401, {'Content-Type': 'application/json'}, JSON.stringify({id: id, success: false}));
                        break;
                    case '3':
                        xhr.respond(404, {'Content-Type': 'application/json'}, JSON.stringify({id: id, success: false}));
                        break;
                    default:
                        xhr.respond(500, {'Content-Type': 'application/json'}, JSON.stringify({id: id, success: false}));
                        break;
                }
            });
        });

        afterEach(function(){

            server.restore();
        });

        it('makes a successful ajax call', function () {

            consentSettingsView.testId = 1;
            consentSettingsView.deleteTest();
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:51:08.450

如果你想要一个异步测试，你需要使用 Jasmine 正确的方式进行异步测试，它们与同步不同，如果你现在将代码更改为异步，它不会返回任何内容，那么你会期待奇怪的行为。

看看： http: [//pivotal.github.com/jasmine/#section-Asynchronous_Support](http://pivotal.github.com/jasmine/#section-Asynchronous_Support)

现在你的测试应该是这样的：

```
 it('makes a successful ajax call', function () {
        runs(function() {
            consentSettingsView.testId = 1;
            consentSettingsView.deleteTest();
        });

        var timeoutIn = 1000; // A second
        waitFor(function() {
            // Return something that flags your test is ok or not after the timeout time
        }, 'No server response', timeoutIn);

        runs(function() {
            // Expected result to check from your test
        });
    }); 
```

我个人认为执行此异步测试的更好方法是更改​​您的方法`deleteTest`以能够将回调作为参数传递，例如`promisses`模式：

```
deleteTest: function (success, fail) .... 
```

然后您可以键入 check 并在所需的上下文中运行，如下所示：

```
if (typeof success === 'function') { success.call(this); } 
```

失败也一样，但在 jQuery 选项的 ajax 失败回调函数中。

现在您可以在测试中添加如下内容：

```
 it('makes a successful ajax call', function () {
        var result = false;
        runs(function() {
            consentSettingsView.testId = 1;
            consentSettingsView.deleteTest(function () { 
                result = true;
            }, function () { 
                result = false; 
            });
        });

        var timeoutIn = 1000; // A second
        waitFor(function() {
            return result;
        }, 'No server response', timeoutIn);

        runs(function() {
            // Expected result to check from your test
            expect(result).toBe(true);
        });
    }); 
```

在谷歌上发帖，我找到了这篇[文章](http://lostechies.com/derickbailey/2012/08/18/jasmine-async-making-asynchronous-testing-with-jasmine-suck-less/)。

他解释得非常像我对你所做的，希望对你有帮助。

# c# - 用 C# 覆盖的全局变量

> ID：13935712
> 
> 赞同：0
> 
> 时间：2012-12-18T15:02:46.663
> 
> 标签：c#

我设置了一堆静态变量

```
public class globalvars
{
      /// <summary>
      /// Is user logged in
      /// </summary>
      public static string strUserName
      {
          get;
          set;
      }
} 
```

然后在我的整个项目中使用它们

```
public class logintowebsite : CustomerMappings
{

  public static void QuickLoginCheck()
   {
       try
       {
           LoginDetails user = ActiveSubsite.Instance.SubsiteSettings.CurrentUser;
           globalvars.strUserName = "Bert";

       }
       catch
       {
           globalvars.strUserName = "Ernie";
       }

} 
```

麻烦的是，当两个用户同时使用该页面时，第一个用户的详细信息会被第二个用户覆盖，因为它们被替换为 .

为什么会发生这种情况的任何想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:04:27.353

> 当两个用户同时使用该页面时，第一个用户的详细信息会被第二个用户覆盖，因为它们被替换为 . 为什么会发生这种情况的任何想法。

是的，因为它们是`static`.

当您不想在所有请求之间共享静态变量时，不要在 ASP.NET（我假设）中使用它们，因为每个请求都是不同的线程。

你可以[`Session`](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:06:12.033

这是[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)的情况，您必须使用会话变量/cookies/其他缓存模式以使其对每个用户都是唯一的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:04:20.307

`strUserName`是静态的。意味着只有一个`strUserName`适合所有人 `globalvars`

通过声明一些东西`static`，你可以调用类似的东西`SomeClass.SomeStaticVarName`- 不必创建实例`SomeClass`即可到达`SomeStaticVarName`

当我在学校时，我对静态的概念感到困惑，如果你想要一个更好的例子，请告诉我。

# java - 在 Maven 测试阶段禁用 Log4J 日志

> ID：13935715
> 
> 赞同：21
> 
> 时间：2012-12-18T15:02:50.887
> 
> 标签：java, maven, logging, build, log4j

在 IDE 中进行开发时，跟踪和调试日志可能会有所帮助，但在构建过程中，我发现这些行非常令人不安，并且混淆了 maven 或其他构建工具打印的报告。

让 log4j 尊重像`-Dlog4j.rootLogger=OFF`¹这样的系统属性以与 maven 或不需要更改项目文件的东西一起使用会很好。我知道我可以指定`-Dlog4j.configuration=alternateconfig.props` ²但我在这里询问是否有人找到了一种更智能的方法来在构建过程中以最少的人工干预来禁用日志记录。即一些java类检测maven作为禁用log4j的调用者，或其他智能解决方案。

有什么提示吗？

笔记：

[1]：已经试过了，还是不行。

[2]：这很好，但它似乎不适用于 maven（也许肯定会跳过它）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-18T16:33:27.543

正如`@artbristol`（对问题的评论）所解释的，这可以在surefire中进行配置。在 pom.xml 中可以这样实现：

```
 <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <forkMode>always</forkMode>
                <systemPropertyVariables>
                    <log4j.configuration>file:${basedir}/etc/log4j-silent.properties</log4j.configuration>
                </systemPropertyVariables>
            </configuration>
        </plugin> 
```

然后，让文件`${basedir}/etc/log4j-silent.properties`具有以下设置就可以了：

```
log4j.rootLogger=OFF 
```

log4j 在 maven 中的测试运行期间被完全禁用，并且在 IDE 中一切正常。

更好的解决方案是没有额外的配置文件；但到目前为止找不到它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-18T15:21:03.513

指定一个没有附加程序的测试 log4j 配置文件。

例如，如果您有一个 log4j.properties `src/main/resources`，则将其复制到`src/test/resouces`并删除附加程序或将日志级别设置为致命。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-17T17:52:26.757

根据之前的答案，我使用：

```
<plugin>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.5</version>
    <configuration>
        <forkMode>always</forkMode>
        <argLine>-Dlog4j.configuration=</argLine>
    </configuration>
</plugin> 
```

Maven 输出显示有关 log4j 未初始化的警告，但除此之外它似乎可以工作。

# mysql - SQL，COUNT 在我的 mysql 查询中不起作用

> ID：13935716
> 
> 赞同：3
> 
> 时间：2012-12-18T15:02:50.603
> 
> 标签：mysql, sql, count

我正在使用 mysql 5.1。

这是我的数据库架构

```
office
+--------------+----------------+
| office_id    | office_name    |
+--------------+----------------+

employee
+--------------+-----------------------+------------+
| employee_id  | employee_hierarchy_id | office_id  |
+--------------+-----------------------+------------+

employee_hierarchy
+-----------------------+-------------------------------+
| employee_hierarchy_id | employee_hierarchy_description|
+-----------------------+-------------------------------+ 
```

我想计算`number of employees` `group by employee_hierarchy_id`每个`office_id`

这是我列出 factory_id 和 employee_hierarchy_id 的请求：

```
SELECT office_id, employee_hierarchy_id
FROM office, employee_hierarchy
ORDER BY office_id ASC 
```

如果我尝试添加计数，它只显示一行：

```
SELECT office_id, employee_hierarchy_id, COUNT(*)
FROM office, employee_hierarchy
ORDER BY office_id ASC 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T15:04:51.757

添加`WHERE`条件和`GROUP BY`从句

```
SELECT office_id, employee_hierarchy_id, COUNT(*)
FROM office, employee_hierarchy
WHERE office.factory_id = employee_hierarchy.factory_id
GROUP BY office_id, employee_hierarchy_id
ORDER BY office_id ASC 
```

或*推荐的*语法

```
SELECT office_id, employee_hierarchy_id, COUNT(*)
FROM office INNER JOIN employee_hierarchy
        ON office.factory_id = employee_hierarchy.factory_id
GROUP BY office_id, employee_hierarchy_id
ORDER BY office_id ASC 
```

**更新 1**

如果您想在没有员工的情况下仍显示办公室记录，请使用`LEFT JOIN`，否则`INNER JOIN`

```
SELECT  a.office_name , c.employee_hierarchy_description,
        COUNT(b.office_ID) totalCount
FROM    office a
        LEFT JOIN employee b
            ON a.office_ID = b.office_ID
        LEFT JOIN employee_hierarchy c
            ON b.employee_hierarchy_id = c.employee_hierarchy_id
GROUP BY a.office_name , c.employee_hierarchy_description
ORDER BY totalCount DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:39:22.970

我找到了另一种方法，试试这个子查询

```
SELECT SUM(number_of_employees) as 'number of employee per factory',factory_id
FROM (
SELECT COUNT(*) as 'number_of_employees',employee.factory_id
FROM factory,employee
WHERE factory.factory_id = employee.factory_id
GROUP BY employee.employee_hierarchy_id
) AS tmptbl 
GROUP BY tmptbl.factory_id 
```

希望这可以帮助！

# freebase - Freebase 使用过滤器获取主题列表

> ID：13935717
> 
> 赞同：1
> 
> 时间：2012-12-18T15:02:50.740
> 
> 标签：freebase

是否可以通过应用一些过滤器来获取 Freebase 的主题？

Freebase 现在包含大约 2800 万个主题。

我想获取所有主题名称，例如记录名称（约 700 万个主题）。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:11:46.330

当然。您可以通过 API 轻松完成此操作，但对于您想要的主题数量，您最好使用数据转储。

获取这个 1.4 GB 的文件：http: [//download.freebase.com/datadumps/latest/freebase-simple-topic-dump.tsv.bz2](http://download.freebase.com/datadumps/latest/freebase-simple-topic-dump.tsv.bz2)

并使用命令

```
bzegrep -v $'/music/recording[\t,]' freebase-simple-topic-dump.tsv.bz2 | cut -f 2 > names.txt 
```

几分钟后，您将拥有 2100 万个名字。

# macos - 自山狮升级以来 PHPUnit 安装中断

> ID：13935722
> 
> 赞同：0
> 
> 时间：2012-12-18T15:03:07.403
> 
> 标签：macos, configuration, phpunit, runtime-error

几个月前，我将我的 Mac 从 Lion 升级到了 Mountain Lion。

我以前让 PHPUnit 与我的 Zend Framework 1.11 一起使用没有问题，但并没有使用太多。

我现在在 Quick Start 网站上运行 Zend Frameworpk 2，但我根本无法让 PHPUnit 工作。

我在 Stackoverflow 上搜索了许多与此相关的问题，并尝试重新安装和更改 php.ini 的路径，但没有成功。

我还检查了我的 PEAR 安装工作正常，但是当我尝试“phpunit --version”时错误是一样的

```
PHP Warning:  require(/usr/lib/php/PHPUnit/Autoload.php): failed to open stream: No such file or directory in /usr/bin/phpunit on line 43

Warning: require(/usr/lib/php/PHPUnit/Autoload.php): failed to open stream: No such file or directory in /usr/bin/phpunit on line 43
PHP Fatal error:  require(): Failed opening required '/usr/lib/php/PHPUnit/Autoload.php' (include_path='.:/Users/johnadmin/pear/share/pear/PEAR:/Users/johnadmin/pear/share/pear:/usr/bin/phpunit:/Users/johnadmin/pear/share/pear/PHPUnit:/usr/bin/phpunit:/Users/johnadmin/pear/bin/pear') in /usr/bin/phpunit on line 43

Fatal error: require(): Failed opening required '/usr/lib/php/PHPUnit/Autoload.php' (include_path='.:/Users/johnadmin/pear/share/pear/PEAR:/Users/johnadmin/pear/share/pear:/usr/bin/phpunit:/Users/johnadmin/pear/share/pear/PHPUnit:/usr/bin/phpunit:/Users/johnadmin/pear/bin/pear') in /usr/bin/phpunit on line 43 
```

尝试重新安装 phpunit 导致我被告知 phpunit 已经安装并且它的版本是最新的。

```
$ sudo pear install phpunit/PHPUnit
phpunit/PHPUnit is already installed and is the same as the released version 3.7.10
install failed 
```

尝试卸载失败，因为 phpunit 依赖于其他项目/应用程序。

无论如何我可以解决这个问题或完全删除它并重新安装吗？

我的 php.ini 中的 include_path 是：

```
include_path=".:/Users/johnadmin/pear/share/pear/PEAR:/Users/johnadmin/pear/share/pear:/usr/bin/phpunit:/Users/johnadmin/pear/share/pear/PHPUnit:/usr/bin/phpunit:/Users/johnadmin/pear/bin/pear" 
```

相关的附加信息：

```
> which phpunit
/usr/bin/phpunit

> which pear
/Users/johnadmin/pear/bin/pear

> which php
/usr/bin/php 
```

Autoload.php 位于

```
/Users/johnadmin/pear/share/pear/PHPUnit 
```

此外，文件夹 '/usr/lib/php/' 存在，但 PHPUnit 目录不在该目录下，它在**/Users/johnadmin/pear/share/pear/PHPUnit下**

bash_profile 内容/路径

```
PATH=$PATH:/usr/local/Cellar/imagick/3.0.1:/usr/local/sbin:/Users/johnadmin/pear/share/pear:$

##
# Your previous /Users/johnadmin/.bash_profile file was backed up as /Users/johnadmin/.bash_$
##

# MacPorts Installer addition on 2012-04-17_at_08:37:29: adding an appropriate PATH variable$
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
# Finished adapting your PATH environment variable for use with MacPorts.

##
# Your previous /Users/johnadmin/.bash_profile file was backed up as /Users/johnadmin/.bash_$
##

# MacPorts Installer addition on 2012-10-09_at_16:09:32: adding an appropriate PATH variable$
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
# Finished adapting your PATH environment variable for use with MacPorts.

##
# Your previous /Users/johnadmin/.bash_profile file was backed up as /Users/johnadmin/.bash_$
##

# MacPorts Installer addition on 2012-12-06_at_13:40:25: adding an appropriate PATH variable$
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
# Finished adapting your PATH environment variable for use with MacPorts. 
```

我不知所措，因为我不知道还有什么可以坦率地检查，任何帮助都会有很大帮助。塔约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:46:15.900

经过数小时尝试各种解决方案后，我发现创建指向 PHPUnit 文件夹的 simlink 是可行的。

我使用的命令是

```
sudo ln -s /Users/johnadmin/pear/share/pear/PHPUnit /usr/lib/php/PHPUnit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:43:32.200

说真的，这对我帮助很大：

1.  安装作曲家（[http://getcomposer.org](http://getcomposer.com)）
2.  `composer require phpunit/phpunit 3.7.*`
3.  `composer update`

**将 PHPUnit 源代码和二进制文件**提取到您的项目的三个简单步骤。

# android - “IBitmapDescriptorFactory 未初始化”错误

> ID：13935725
> 
> 赞同：64
> 
> 时间：2012-12-18T15:03:19.360
> 
> 标签：android, google-maps-android-api-2

我正在尝试在 Google Maps Android API v2 中获取带有自定义图标的标记。我刚刚更改了 Google 提供的示例之一。我在方法中添加`.icon(BitmapDescriptorFactory.fromResource(R.drawable.arrow))`到 RawMapViewDemoActivity`setUpMap().`

```
private void setUpMapIfNeeded() {
    if (mMap == null) {
        mMap = ((MapView) findViewById(R.id.map)).getMap();
        if (mMap != null) {
            setUpMap();
        }
    }
}

private void setUpMap() {
    mMap.addMarker(new MarkerOptions()
        .position(new LatLng(0, 0))
        .title("Marker")
        .icon(BitmapDescriptorFactory.fromResource(R.drawable.arrow)));
} 
```

但我总是收到“IBitmapDescriptorFactory 未初始化”。

```
12-18 15:40:54.356: E/AndroidRuntime(12591): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mapdemo/com.example.mapdemo.RawMapViewDemoActivity}: java.lang.NullPointerException: IBitmapDescriptorFactory is not initialized
12-18 15:40:54.356: E/AndroidRuntime(12591):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at android.os.Looper.loop(Looper.java:137)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at android.app.ActivityThread.main(ActivityThread.java:4745)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at java.lang.reflect.Method.invokeNative(Native Method)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at java.lang.reflect.Method.invoke(Method.java:511)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at dalvik.system.NativeStart.main(Native Method)
12-18 15:40:54.356: E/AndroidRuntime(12591): Caused by: java.lang.NullPointerException: IBitmapDescriptorFactory is not initialized
12-18 15:40:54.356: E/AndroidRuntime(12591):    at com.google.android.gms.internal.at.a(Unknown Source)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at com.google.android.gms.maps.model.BitmapDescriptorFactory.d(Unknown Source)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at com.google.android.gms.maps.model.BitmapDescriptorFactory.fromResource(Unknown Source)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at com.example.mapdemo.RawMapViewDemoActivity.setUpMap(RawMapViewDemoActivity.java:67)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at com.example.mapdemo.RawMapViewDemoActivity.setUpMapIfNeeded(RawMapViewDemoActivity.java:58)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at com.example.mapdemo.RawMapViewDemoActivity.onCreate(RawMapViewDemoActivity.java:43)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at android.app.Activity.performCreate(Activity.java:5008)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-18 15:40:54.356: E/AndroidRuntime(12591):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-18 15:40:54.356: E/AndroidRuntime(12591):    ... 11 more 
```

在[BitmapDescriptorFactory](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/BitmapDescriptorFactory)它说：

> 在使用此类中的任何方法之前，您必须执行以下操作之一以确保已初始化此类：
> 
> *   等待 GoogleMap 从您添加到应用程序的 MapFragment 或 MapView 中可用。您可以通过调用 getMap() 方法并检查返回的对象是否不为空来验证 GoogleMap 是否可用。
>     
>     
> *   调用 MapsInitializer.initialize(Context)。只要没有抛出 com.google.android.gms.common.GooglePlayServicesNotAvailableException GooglePlayServicesNotAvailableException，这个类就会被正确初始化。

我做了第一个，但仍然收到此错误。有什么建议么？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-12-20T08:39:11.670

打电话`MapsInitializer.initialize(getApplicationContext())`给`onCreate()`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-07-26T12:46:36.807

调用以下`onCreate()`

```
try {
        MapsInitializer.initialize(getApplicationContext());
    } catch (GooglePlayServicesNotAvailableException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-09-16T09:35:44.520

移动要调用的代码`onMapReady()`，由 GoogleMaps API 提供的回调。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-11T08:23:33.100

这发生在我身上，最后在我的情况下，我发现没有安装谷歌播放服务。所以安装它们并且应用程序没有崩溃。所以可能有人可以在 catch 块中放入 try 和一个对话框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-07T13:33:57.813

请参阅[带有矢量资产图标的 android 中谷歌地图中的自定义标记](https://stackoverflow.com/questions/42365658/custom-marker-in-google-maps-in-android-with-vector-asset-icon)。

就我而言，我在谷歌地图上有标记。但是在 API 19 模拟器上存在`Google Play Services`. 所以这个错误是误导，`Google Play Services`试图创建`BitmapDescriptor`，但不能。

您应该在 中创建标记`onMapReady()`，并将任何其他代码移到那里，使用`Google Maps`.

如果您在 Android 4 上显示 Google 地图时遇到问题，也许您应该将库从 16.1.0 降级到 16.0.0，请参阅[https://stackoverflow.com/a/54772374/2914140](https://stackoverflow.com/a/54772374/2914140)。但如果你这样做，你会在 Androif 9 上崩溃，请参阅[Google Maps 在 Android Pie 上崩溃](https://stackoverflow.com/questions/52139199/google-maps-crashing-on-android-pie/52139307)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-13T15:49:59.737

好的，这是一个对我有用的解决方案，我偶然发现了它！只需将您的 Gradle 升级到 com.android.tools.build:gradle:3.6.2

```
 dependencies {
    classpath 'com.android.tools.build:gradle:3.6.2'

    // NOTE: Do not place your application dependencies here; they belong
    // in the individual module build.gradle files
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-04-02T11:12:51.497

```
 GoogleApiAvailability googleApiAvailability=GoogleApiAvailability.getInstance();

  int status=googleApiAvailability.isGooglePlayServicesAvailable(getActivity());

  if (status != ConnectionResult.SUCCESS) {
        int requestCode = 10;
        Dialog dialog = googleApiAvailability.getErrorDialog(getActivity(),status,requestCode);
        dialog.show();
    }else {} 
```

# mongodb - Mongoose 限制/偏移和计数查询

> ID：13935733
> 
> 赞同：98
> 
> 时间：2012-12-18T15:03:45.780
> 
> 标签：mongodb, mongoose

查询性能有点奇怪......我需要运行一个查询，它可以计算文档总数，并且还可以返回一个可以限制和偏移的结果集。

所以，我总共有 57 个文档，用户想要 10 个文档抵消 20。

我可以想到 2 种方法，首先是查询所有 57 个文档（作为数组返回），然后使用 array.slice 返回他们想要的文档。第二个选项是运行 2 个查询，第一个使用 mongo 的本机 'count' 方法，然后使用 mongo 的本机 $limit 和 $skip 聚合器运行第二个查询。

你认为哪个会更好扩展？在一个查询中完成所有操作，还是运行两个单独的查询？

编辑：

```
// 1 query
var limit = 10;
var offset = 20;

Animals.find({}, function (err, animals) {
    if (err) {
        return next(err);
    }

    res.send({count: animals.length, animals: animals.slice(offset, limit + offset)});
});

// 2 queries
Animals.find({}, {limit:10, skip:20} function (err, animals) {            
    if (err) {
        return next(err);
    }

    Animals.count({}, function (err, count) {
        if (err) {
            return next(err);
        }

        res.send({count: count, animals: animals});
    });
}); 
```

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-03-13T14:02:20.493

我建议您使用 2 个查询：

1.  `db.collection.count()`将返回项目总数。这个值存储在 Mongo 的某个地方，并且没有计算出来。

2.  `db.collection.find().skip(20).limit(10)`在这里我假设你可以使用某个字段的排序，所以不要忘记在这个字段上添加一个索引。这个查询也会很快。

我认为您不应该查询所有项目，而是执行跳过和获取，因为稍后当您拥有大数据时，您将在数据传输和处理方面遇到问题。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2019-02-15T06:17:39.270

`aggregate()`您可以在单个查询中使用，而不是使用 2 个单独的查询：

可以更快地获取聚合**“$facet” 、*****总计数***和***带有跳过和限制的数据***

```
 db.collection.aggregate([

      //{$sort: {...}}

      //{$match:{...}}

      {$facet:{

        "stage1" : [ {"$group": {_id:null, count:{$sum:1}}} ],

        "stage2" : [ { "$skip": 0}, {"$limit": 2} ]

      }},

     {$unwind: "$stage1"},

      //output projection
     {$project:{
        count: "$stage1.count",
        data: "$stage2"
     }}

 ]); 
```

**输出如下：-**

```
[{
     count: 50,
     data: [
        {...},
        {...}
      ]
 }] 
```

另外，看看[https://docs.mongodb.com/manual/reference/operator/aggregation/facet/](https://docs.mongodb.com/manual/reference/operator/aggregation/facet/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-10-15T16:50:13.470

```
db.collection_name.aggregate([
    { '$match'    : { } },
    { '$sort'     : { '_id' : -1 } },
    { '$facet'    : {
        metadata: [ { $count: "total" } ],
        data: [ { $skip: 1 }, { $limit: 10 },{ '$project' : {"_id":0} } ] // add projection here wish you re-shape the docs
    } }
] ) 
```

而不是使用两个查询来查找总数并跳过匹配的记录。
$facet 是最好的优化方式。

1.  匹配记录

2.  查找 total_count

3.  跳过记录

4.  并且还可以在查询中根据我们的需要重塑数据。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-17T00:31:44.173

在不得不自己解决这个问题之后，我想以 user854301 的回答为基础。

Mongoose ^4.13.8 我能够使用一个名为的函数`toConstructor()`，它允许我在应用过滤器时避免多次构建查询。我知道此功能在旧版本中也可用，但您必须查看 Mongoose 文档以确认这一点。

以下使用 Bluebird 承诺：

```
let schema = Query.find({ name: 'bloggs', age: { $gt: 30 } });

// save the query as a 'template'
let query = schema.toConstructor();

return Promise.join(
    schema.count().exec(),
    query().limit(limit).skip(skip).exec(),

    function (total, data) {
        return { data: data, total: total }
    }
); 
```

现在计数查询将返回它匹配的总记录，返回的数据将是总记录的子集。

请注意构造查询的 query( **)周围的 ()。**

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-11-14T16:53:14.740

有一个库可以为您完成所有这些工作，请查看[mongoose-paginate-v2](https://github.com/aravindnc/mongoose-paginate-v2)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-24T09:30:29.487

您不必使用两个查询或一个带有聚合等的复杂查询。

您可以使用一个查询

例子：

```
const getNames = async (queryParams) => {

  const cursor = db.collection.find(queryParams).skip(20).limit(10);
  return {
    count: await cursor.count(),
    data: await cursor.toArray()
  }

} 
```

mongo返回一个游标，该游标包含了count等预定义函数，无论skip和limit如何，都会返回查询结果的全数

因此，在 count 属性中，您将获得集合的完整长度，在数据中，您将仅获得偏移量为 20 且限制为 10 个文档的块

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-11T10:19:34.630

感谢 Igor Igeto Mitkovski，最好的解决方案是使用本地连接

文件在这里：[https://docs.mongodb.com/manual/reference/method/cursor.count/#mongodb-method-cursor.count](https://docs.mongodb.com/manual/reference/method/cursor.count/#mongodb-method-cursor.count) 和猫鼬不支持它（[https://github.com/Automattic/mongoose/问题/3283](https://github.com/Automattic/mongoose/issues/3283)）

我们必须使用本机连接。

```
const query = StudentModel.collection.find(
    {
       age: 13
    }, 
    {
       projection:{ _id:0 }
    }
    ).sort({ time: -1 })
const count = await query.count()
const records = await query.skip(20)
          .limit(10).toArray() 
```

# android - Android：停止在列表视图中重复图像，性能问题

> ID：13935737
> 
> 赞同：1
> 
> 时间：2012-12-18T15:03:52.380
> 
> 标签：android, android-adapter

我有一个 arrayaadapter，我在其中检索带有图像的电话联系人号码并将其显示在列表中。

```
@Override 
    public View getView(int position, View convertView, ViewGroup parent) { 

    View view = convertView; 

    if (view == null) { 
    LayoutInflater inflater = (LayoutInflater) (getContext() 
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE)); 
    view = inflater.inflate(renderer, null); 
    } 

    TextView text = (TextView) view.findViewById(R.id.name); 
    TextView textContNo = (TextView) view.findViewById(R.id.contactno); 
    TextView textEmailId = (TextView) view.findViewById(R.id.emailId); 
    Profile contact = listCont.get(position); 
    text.setText(contact.getName());    

    QuickContactBadge photo = (QuickContactBadge ) view.findViewById(R.id.quickContactBadge1);  
    photo.setTag(contact.getMobileNo()); 
    new LoadImage(photo).execute(contact.getMobileNo()); 
```

并使用 asyncTask 在 backgroundthread 中加载图像

```
 class LoadImage extends AsyncTask<String, Void, Bitmap>{ 

        private QuickContactBadge qcb; 

        public LoadImage(QuickContactBadge qcb) { 
        this.qcb= qcb; 
        } 
        @Override 
        protected Bitmap doInBackground( final String... params) { 
        activity.runOnUiThread(new Runnable() { 
        public void run() { 
        new QuickContactHelper(activity, qcb, (String) params[0]).addThumbnail(); 
        } 
        }); 
        return null; 
        } 
        @Override 
        protected void onPostExecute(Bitmap result) { 

        } 
        } 
```

我面临两个问题，图像重复并且滚动不流畅我试图在 getview 方法中实现视图，但不确定如何使用它，或者是否有任何其他方法可以阻止图像重复。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:11:08.700

我认为库 android-query 是在文档中为您制作的以帮助您：[http ://code.google.com/p/android-query/wiki/ImageLoading](http://code.google.com/p/android-query/wiki/ImageLoading)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:18:04.380

为了有效地加载图像，[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)是一个很好的库，可以有效地在后台加载图像（延迟加载）。

有时会发生什么情况，当您第一次膨胀任何视图并滚动视图时，列表有一些重复旧视图的限制。最好的解决方案是您必须使用 ViewHolder 来保存您的所有视图，例如

```
class ViewHolder
{
     View rowView;
     TextView textview = null;

     public ViewHolder(View view)
     {
          rowView = view;
     }

     public TextView getTextView()
     {
          if(textview ==null)
                textview = rowView.findViewById(R.id.text1);
          return textview;
     }
} 
```

你可以在你的适配器中使用它，比如，

```
if(convertview ==null)
{
    convertview = inflater.inflate(renderer, null);
    ViewHolder holder = new ViewHolder(convertview);
    convertview.setTag(holder);
} 

ViewHolder tempHolder = (ViewHolder) convertview.getTag();

TextView textView = tempHolder.getTextView(); 
```

如果你做这件事，你的参考`textview`和其他观点都会被保留`ViewHolder`。

# printing - 及时打印源代码演变

> ID：13935753
> 
> 赞同：0
> 
> 时间：2012-12-18T15:04:50.647
> 
> 标签：printing

这段时间我的程序变得非常大，我可以使用 A0 绘图仪。

我想以 meld (http://meldmerge.org/) 样式或类似方式并排打印代码的连续版本（即增强版本之间的差异）。

你知道我可以使用哪个工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:07:07.270

*Gource* [https://code.google.com/p/gource/](https://code.google.com/p/gource/)上的一些有趣的东西，但我没有将我的程序保存在存储库下，所以这不适合我

# jquery - 如何使用bootstrap和jquery在指定位置显示新页面

> ID：13935757
> 
> 赞同：1
> 
> 时间：2012-12-18T15:04:51.880
> 
> 标签：jquery, html, twitter-bootstrap

![在此处输入图像描述](../Images/b68ad3eb704b62fb949d0d8501a3270f.png)看看这张图片，我需要完全一样的

```
 <div class="container-fluid">
        <div class="row-fluid">
            <div class="span2 well">
                <ul class="nav nav-list">
                    <li class="nav-header"><i class="icon-home"></i> Home</li>
                    <li><a href="#">D</a></li>
                    <li><a href="#"> Ged</a></li>
                    <li class="nav-header">System</li>
                    <li><a href="#">System staus</a></li>
                    <li><a href="#"> Gsetup</a></li>
                    <li><a href="#"> ASetting</a></li>
                    <li><a href="#"> Drives</a></li>
                    <li><a href="#">Power Setting</a></li>
                    <li class="active"><a href="firmware.html" id="firm">Firmware Update</a></li>
                    <li><a href="#">Administration</a></li>
                  </ul>
             </div>
            <div id="content_inner_nosidebar">
           </div>
        </div>
  </div> 
```

所有这些列表项都将出现在左侧，当我单击此列表时，相关页面应显示在右侧。我正在使用 bootstarp 类。我喜欢使用流体网格系统。但是如何在单击此列表时加载此列表右侧的新页面。？

我在这个主 div 中创建了一个 div "content_inner_nosidebar"。当我单击任何左侧列表时，它应该在“content_inner_nosidebar”中显示所有数据。

```
<script src="js/libs/jquery-1.7.2.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/plugins.js"></script>
<script src="js/script.js"></script>
<script type="text/javascript">
$(function(){
    $("#firm").click(function(){
        $("#content_inner_nosidebar").append("/path/firmware.html")
    })
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:10:51.397

您可以使用 jquery 的[load](http://api.jquery.com/jQuery.get/)方法来执行此操作。

```
<script type="text/javascript">
$(function(){
    $("#firm").click(function(){
        $("#content_inner_nosidebar").load("/path/firmware.html")
    })
});
</script> 
```

# json - 来自 .ajax 的 Web 服务调用，maxJsonLength 错误

> ID：13935758
> 
> 赞同：1
> 
> 时间：2012-12-18T15:04:53.300
> 
> 标签：json, jquery, asmx, javascriptserializer, jquery-pagination

我正在使用 .asmx Web 服务，并且 Web 服务方法可以通过使用 JavaScriptSerializer 类序列化为 json 字符串（3506 记录），并且我没有从 VisualStudio 收到任何错误。

另一方面，我的 phonegap 应用程序使用此服务，我可以使用它。但是我的最后一个方法包含 3506 条记录，当我从 javascript 调用这个方法时，我得到了

> “使用 json javascriptserializer 进行序列化或反序列化时出错”

错误。

我应该在 Web 服务上使用分页还是 smth？如果是的话，谁能告诉我该怎么做？就像我说的我可以从浏览器中使用这种方法。当我调用 javascript 时，我会收到此错误。

```
$.ajax({
        type: "POST",
        url:  "WEB_SERVICE_URL",
        data: "{ dummyParameter:dummy }",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        beforeSend: function() {
            app.showLoading();         
        },
        success: function(msg) {
            clCard = JSON.parse(msg.d);
            alert(clCard.length);
        },
        complete: function() {
            app.hideLoading();
        },
        error: function(msg) {
            app.hideLoading();
            alert('Error');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:04:34.703

请看看[这个](https://stackoverflow.com/q/1151987/1276002 "一个如此的答案")。我想对你有帮助。

# android - Android 加速度计的困难

> ID：13935759
> 
> 赞同：1
> 
> 时间：2012-12-18T15:04:54.580
> 
> 标签：android, andengine, accelerometer, sensors

我是Android游戏开发的初学者，我正在开发一个小游戏。我在使用运动传感器时遇到了一些困难：加速度计。

这个游戏是横向模式。我希望如果我的手机向右倾斜，我的角色也会向右倾斜。（左边也是一样）当我停止倾斜游戏中的角色应该停止移动。

但我不太了解加速度计的操作，

这是我的代码：

```
 @Override
public void onSensorChanged(SensorEvent event) {
     synchronized (this) {
        long penchement = (long) (event.values[1]- 0.5);
          if(penchement>0){
              if(penchement>lastUpdate)
                  lastUpdate=penchement;
              if(penchement>0.2){
                  booldroite=true; // boolean for going right
                  boolgauche=false; // boolean for going left
              }
              if(lastUpdate-penchement<0.2)
                  booldroite=false;
          }
          else{
              if(penchement<lastUpdate)
                  lastUpdate=penchement;
              if(penchement<-0.2){
                  boolgauche=true;
                  booldroite=false;
              }
              if(lastUpdate+penchement>-0.2)
                  boolgauche=false;
          }

} 
```

所以我的代码有效（有点），但我角色的动作一点也不流畅。有时我的手机倾斜但我的角色不动...

如果您能帮助我，请提前非常感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:25:41.637

传感器读数本质上是嘈杂的，这就是角色闪烁运动的原因。

您将需要在读数后实施某种低通滤波器。[SensorEvent](http://developer.android.com/reference/android/hardware/SensorEvent.html#values)中有一个基本的低通滤波器示例。

```
 public void onSensorChanged(SensorEvent event) {

      // alpha is calculated as t / (t + dT)
      // with t, the low-pass filter's time-constant
      // and dT, the event delivery rate

      final float alpha = 0.8;

      gravity[0] = alpha * gravity[0] + (1 - alpha) * event.values[0];
      gravity[1] = alpha * gravity[1] + (1 - alpha) * event.values[1];
      gravity[2] = alpha * gravity[2] + (1 - alpha) * event.values[2];

      linear_acceleration[0] = event.values[0] - gravity[0];
      linear_acceleration[1] = event.values[1] - gravity[1];
      linear_acceleration[2] = event.values[2] - gravity[2];
 } 
```

您可能想使用其中的值`gravity[]`来找出手机的“倾斜度”。此外，玩弄 的值`final float alpha`： 接近 1.0 的值将提高平滑度，而接近 0.0 的较小值将获得更嘈杂的读数，但响应更快。

好机会！

# css - 如何自动将浏览器前缀添加到 CSS3 属性？

> ID：13935761
> 
> 赞同：3
> 
> 时间：2012-12-18T15:04:57.130
> 
> 标签：css, prefix

您可能知道，因为 CSS3 与所有浏览器不兼容，所以当我们使用 CSS3 时，我们应该在 CSS3 属性中添加前缀（如 -moz、-webkit、-o 和 ...）

手动编写这些前缀很困难。那么，是否有任何插件、程序或其他东西可以检测我的 CSS 文件中的 CSS3 属性并将必要的供应商前缀附加到这些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:53:15.390

根据您的用例，可以想到几个选项：

*   SASS 与[波旁威士忌](http://bourbon.io/)
*   [带指南针](http://compass-style.org/reference/compass/css3/)的 SASS
*   少用[LESS 元素](http://lesselements.com/)

*   [Emmet CSS3 缩写](http://docs.emmet.io/css-abbreviations/vendor-prefixes/)（在您的文本编辑器中）

*   [PrefixFree](http://leaverou.github.com/prefixfree/)（客户端js）

我个人的偏好是使用 Compass，但如果您不希望使用 CSS 预处理器的开销，Emmet 缩写会很好用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T13:50:34.200

这里有更多

Sublimetext 插件[https://github.com/sindresorhus/sublime-autoprefixer?source=c](https://github.com/sindresorhus/sublime-autoprefixer?source=c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T16:07:30.943

一个不错的供应商前缀 mixin 用于在 SASS中为使用 SASS 的用户执行[此操作](http://www.stefanwienert.net/blog/2012/05/18/easy-css-vendor-prefix-mixin-for-sass/)

# google-maps - 从 Google Places API 获取 POI 列表

> ID：13935763
> 
> 赞同：8
> 
> 时间：2012-12-18T15:04:59.653
> 
> 标签：google-maps, google-play-services, google-places-api

任何人都可以指导如何从特定城市获取 POI 列表，例如艾哈迈达巴德。

得到查询[https://maps.googleapis.com/maps/api/place/nearbysearch/xml?location=23.006000,72.601100&types=point_of_interest&radius=50000&sensor=false&key=YouAPIKey](https://maps.googleapis.com/maps/api/place/nearbysearch/xml?location=23.006000,72.601100&types=point_of_interest&radius=50000&sensor=false&key=YouAPIKey)

“point_of_interest”已经提到他们提供但不确定如何

[https://developers.google.com/places/documentation/supported_types](https://developers.google.com/places/documentation/supported_types)

帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-09T09:02:01.717

您需要将任何一种受支持的类型传递给针对类型的查询。

将结果限制为与至少一种指定类型匹配的地点。类型应该用管道符号 (type1|type2|etc) 分隔。请参阅支持的类型列表。

[https://developers.google.com/places/documentation/supported_types](https://developers.google.com/places/documentation/supported_types)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-02T05:02:05.520

```
https://maps.googleapis.com/maps/api/place/textsearch/json?query=places+in+'city'&key='APIKEY' 
```

替换为您的城市和 API KEY。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-14T06:55:17.800

我遇到了同样的问题，我已经尝试了有关如何使用地点 api 作为类型查找兴趣点的所有答案：现在允许 point_of interest

以下为我工作查询 todo+in+city 或 country

[https://maps.googleapis.com/maps/api/place/textsearch/json?query=todo+in+India&key=yourkey](https://maps.googleapis.com/maps/api/place/textsearch/json?query=todo+in+India&key=yourkey)

# matlab - 如何在 MATLAB 中创建带有渐变标记颜色的散点图？

> ID：13935768
> 
> 赞同：5
> 
> 时间：2012-12-18T15:05:08.417
> 
> 标签：matlab, colors, point, scatter

我想在 MATLAB 中绘制一个简单的散点图，标记颜色从光谱的一端到另一端变化（例如红色、橙色、黄色......蓝色、紫色）。

我的数据随着时间的推移将河流中的水量与水质进行了比较（3 个简单的列：时间、数量、质量）。我想绘制数量与质量的 x、y 散点图，但颜色会随着时间的推移而变化，这样就可以看到质量随时间的变化。

我将需要生成许多这种类型的图表，所以如果我能找到一段适用于任何长度数据集的代码，那将非常有用。

非常感谢您帮助 Matlab 新手！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T15:07:39.187

您可以使用的颜色参数`scatter`

如果您的数据已经及时排序而不是简单地使用：

```
% let n be the number of points you have
cmp = jet(n); % create the color maps changed as in jet color map
scatter(x, y, 10, cmp, 'filled'); 
```

否则，您需要先对数据进行排序：

```
[time, idx] = sort(time);
x = x(idx);
y = y(idx);
cmp = jet(n); % create the color maps changed as in jet color map
scatter(x, y, 10, cmp, 'filled'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:53:42.133

通过附加变量为散点图着色的最简单方法是简单地将其作为“颜色”参数传递。假设您有`x`, `y`, and `time`（其中时间是一个数字向量。如果时间包含日期字符串`datenum`，请先调用它）。然后你可以写

```
scatter(x,y,[],time,'filled') 
```

然后，颜色条轴将显示特定颜色对应的时间点。重要的是，即使测量之间的时间不均匀，这也会正确推进颜色。

/aside：默认颜色图是`jet`，这对于可视化平滑过渡非常不利，我建议您从 File Exchange下载[感知改进的颜色图。](http://www.mathworks.com/matlabcentral/fileexchange/28982-perceptually-improved-colormaps/content/pmkmp.m)要使用它来设置颜色图，您可以调用

```
cmap = pmkmp(length(time));
colormap(cmap); 
```

# ruby-on-rails-3 - 回形针 + S3 大拉链

> ID：13935772
> 
> 赞同：1
> 
> 时间：2012-12-18T15:05:18.773
> 
> 标签：ruby-on-rails-3, amazon-s3, zip, paperclip

如果您让 Paperclip + AWS S3 在您的 rails 3 应用程序中工作，并且您想要压缩与模型相关的附件，如何继续？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:05:18.773

注意：stackoverflow 上的一些问题[已经过时](https://stackoverflow.com/questions/2338758/zip-up-all-paperclip-attachments-stored-on-s3)，一些回形针方法已经消失。

假设我们有一个用户，它`:has_many => user_attachments`

```
GC.disable
@user = User.find(params[:user_id])
zip_filename = "User attachments - #{@user.id}.zip" # the file name
tmp_filename = "#{Rails.root}/tmp/#{zip_filename}" # the path
Zip::ZipFile.open(tmp_filename, Zip::ZipFile::CREATE) do |zip|
  @user.user_attachments.each { |e| 
    attachment = Paperclip.io_adapters.for(e.attachment) #has_attached_file :attachment (,...)
    zip.add("#{e.attachment.original_filename}", attachment.path)
  }
end
send_data(File.open(tmp_filename, "rb+").read, :type => 'application/zip', :disposition => 'attachment', :filename => zip_filename)
File.delete tmp_filename
GC.enable
GC.start 
```

诀窍是禁用 GC 以避免`Errno::ENOENT`异常。GC 会在压缩之前从 S3 中删除下载的附件。

资料来源：
[主文件中的 to_file 损坏？](https://github.com/thoughtbot/paperclip/issues/833)
[io_adapters.for(object.attachment).path 随机失败](https://github.com/thoughtbot/paperclip/issues/986)

# php - Zend 阻止发送数据库中存在的电子邮件

> ID：13935778
> 
> 赞同：2
> 
> 时间：2012-12-18T15:05:30.657
> 
> 标签：php, validation, zend-framework, email, email-validation

我有一个使用zend框架一次发送多封电子邮件的表单，用冒号分隔它们。

有没有办法阻止发送数据库中已经存在的电子邮件并发送那些不存在的电子邮件？

这里有一些：

html -----

```
<form method="post" action="<?php echo $this->url(array(), 'inviteByEmail'); ?>">
            <table><tr>
                <td>Email Addresses:* <span class="right small_font" style="margin-right:25px;">* Each email address must be separated by a comma ( , )</span></td>
                <td></td>
            </tr><tr>
                <td><input class="input_long" type="text" name="emails" /></td>
            </tr><tr>
                <td><br/>Personalize your message:</td>
            </tr><tr>
                <td><textarea cols="49" rows="7" name="personal_message"  id="share-text" style="margin-bottom:8px;" placeholder="Download Ad-Aware and help me get PRO version" ></textarea></td>
            </tr><tr>
                <td rowspan="3" valign="top">
                    <input type="submit" class="btn_submit_step3" id="btn_friends" value="share_friends" /><br/>
                </td>
            </tr></table>
        </form> 
```

控制器动作-----

```
public function inviteByEmailAction()
{
    $emails = $this->getRequest()->getParam('emails');
    $personal_message = $this->getRequest()->getParam('personal_message');

    $emails = explode(",", $emails);

    foreach ($emails as $email)
    {
        $email = trim($email);
        $validator = new Zend_Validate_EmailAddress();
        if ($validator->isValid($email)) 
        {
            if ($this->_helper->model('EmailInvites')->noRowByFields(array('email' => $email, 'referred_by_user_id' => $this->_helper->user()->id)))
            {
                $email_invite = $this->_helper->model('EmailInvites')->createRow();  
                $email_invite->email = $email;
                $email_invite->personal_message = $personal_message;
                $email_invite->referred_by_user_id = $this->_helper->user()->id;
                $email_invite->save();

                $this->_helper->user()->sendInviteEmail($email, $personal_message);
            }
        }
    }
    $this->getHelper('redirector')->gotoRoute(array(), 'invite');

} 
```

并且模型具有发送电子邮件的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:37:13.980

您应该在尝试发送电子邮件之前对其进行过滤。调查[`array_diff`](http://php.net/manual/en/function.array-diff.php)。

这是完成工作的psedo函数：

```
/**
 * 
 * @param array $userEnteredEmails array with all user entered emails
 * @return array
 */
protected function _getEmailsThatAreNotInDb(array $userEnteredEmails)
{
    $db = null; //  your database object
    /* @var $db Zend_Db_Adapter_Abstract */

    // get all emails from DB that are in user provided list
    $query = $db->select()
            ->from('emails_table', array('email_address'))
            ->where('email_address IN (?)', $userEnteredEmails);

    $emailsInDb = $db->fetchCol($query);

    // get emails from user provided list that are not in database loaded list
    $emailNonInDb = array_diff($userEnteredEmails, $emailsInDb);

    return $emailNonInDb;
} 
```

# html - 表格td宽度比指定多2px

> ID：13935780
> 
> 赞同：1
> 
> 时间：2012-12-18T15:05:36.140
> 
> 标签：html, css, less

我有一个带有以下 CSS 的表：

```
width: 100%;
border-spacing: 0px;
table-layout: fixed; 
```

然后，我使用以下类指定了 3 列：

```
@UsedColumnWidth: 26px;
@DeleteColumnWidth: 18px;

.UsedCountColumn {
    width: @UsedColumnWidth;
}
.DeleteColumn {
    width: @DeleteColumnWidth;
}
.CapabilityColumn {
    /*width: @ContainerWidth - @UsedColumnWidth - @DeleteColumnWidth;*/
    /*width: 100px;*/
} 
```

在查看 chrome 开发人员工具时，我注意到我的宽度比我指定`UsedCountColumn`的`DeleteColumn`多 2 个像素，我无法弄清楚为什么会发生这种情况。我认为也许边界间距搞砸了，但我将它设置为 0。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:19:08.433

这就是为什么它添加填充而不显示它。我认为您正在使用 LESS :)

如果我们谈论的是“浏览器默认 css”，那么肯定会有一些填充和边距。

人们制作 reset.css 文档的原因是因为浏览器具有不同的“默认 css 值”。

例如。一些浏览器有更灰色/黄色的背景，而其他浏览器则完全是白色的。

为了确保更好的布局并使其在其他浏览器中看起来相同，您需要进行 css 重置。

例子。

```
* {
   margin: 0;
   padding: 0;
   /* ect styles */
} 
```

和ofc..

总视觉宽度 = 填充 + 宽度 + 边框

总填充宽度 = 填充 + 边距 + 宽度 + 边框

高度 ofc 也是如此 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:20:29.913

我猜这是因为你有一个 1px 的边框，总共为元素添加了 2px。如果是这种情况，您仍然可以保留边框，但应该添加[`box-sizing`](http://reference.sitepoint.com/css/moz-box-sizing)或使用[`outline`](http://reference.sitepoint.com/css/outline)。

# phpfox - 如何验证phpfox中的自定义字段

> ID：13935781
> 
> 赞同：0
> 
> 时间：2012-12-18T15:05:35.897
> 
> 标签：phpfox

*   我在注册表单中创建了几个自定义字段。

*   我想验证那些字段。

*   任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T18:09:09.580

您可以从管理员那里验证自定义字段，您可以在其中创建自定义字段，并选择将它们设置为必需或不需要。

# r - 如何使用 R fft / 小波函数绘制 XTS 频率图？

> ID：13935782
> 
> 赞同：3
> 
> 时间：2012-12-18T15:05:41.457
> 
> 标签：r, plot, fft, xts

我想用 fft 或小波相关函数转换以下时间序列数据并使用 R 绘制它。你能告诉我吗

1.  如何绘制fft或小波图？
2.  如何提取特定频率并将其与时域图一起绘制？

这是数据：

```
> class(zc)
[1] "xts" "zoo"

> str(zc)
An ‘xts’ object from (10/15/12 09:00:00) to (10/15/12 15:15:00) containing:
  Data: num [1:366, 1] 252 253 253 253 253 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr "Close"
  Indexed by objects of class: [chron,dates,times] TZ: 
  xts Attributes:  
List of 2
 $ tclass: chr [1:3] "chron" "dates" "times"
 $ tzone : chr ""

> head(zc)
                     Close
(10/15/12 09:00:00) 252.40
(10/15/12 09:01:00) 253.10
(10/15/12 09:02:00) 253.15
(10/15/12 09:03:00) 253.30
(10/15/12 09:04:00) 253.25
(10/15/12 09:05:00) 253.45 
```

提前致谢，SK公园

# iphone - 在 xcode 中删除 sqlite3 触发器

> ID：13935783
> 
> 赞同：0
> 
> 时间：2012-12-18T15:05:44.950
> 
> 标签：iphone, database, xcode, sqlite, triggers

我想在我的数据库中删除 som 触发器，我使用了： const char *dropTrigger1 = "drop trigger delete_msg"; sqlite3_exec(database, dropTrigger1, NULL, NULL, NULL) 但它返回 26 很多帮助？感谢：D

# java - 不满意的链接错误 BluetoothStackBlueSoleil

> ID：13935784
> 
> 赞同：0
> 
> 时间：2012-12-18T15:05:47.970
> 
> 标签：java, bluetooth

我正在尝试将蓝牙用于 Java 应用程序，我使用的是 Windows 7 64 位。我正在关注这个例子

```
http://luugiathuy.com/2011/02/android-java-bluetooth/ 
```

原来我对那个网站上提出的 bluecove.jar 有问题，所以我找到了这个线程

```
http://code.google.com/p/bluecove/issues/detail?id=109 
```

告诉我得到这个.jar：

```
http://snapshot.bluecove.org/distribution/download/2.1.1-SNAPSHOT/2.1.1-SNAPSHOT.62/ 
```

那好吧！但是现在，我面临一个新错误（耶...）：

```
Exception in thread "Thread-2" java.lang.UnsatisfiedLinkError:     com.intel.bluetooth.BluetoothStackBlueSoleil.getLibraryVersion()I
at com.intel.bluetooth.BluetoothStackBlueSoleil.getLibraryVersion(Native Method)
at com.intel.bluetooth.BlueCoveImpl.setBluetoothStack(BlueCoveImpl.java:964)
at com.intel.bluetooth.BlueCoveImpl.detectStack(BlueCoveImpl.java:502)
at com.intel.bluetooth.BlueCoveImpl.access$500(BlueCoveImpl.java:69)
at com.intel.bluetooth.BlueCoveImpl$1.run(BlueCoveImpl.java:1044)
at java.security.AccessController.doPrivileged(Native Method)
at com.intel.bluetooth.BlueCoveImpl.detectStackPrivileged(BlueCoveImpl.java:1042)
at com.intel.bluetooth.BlueCoveImpl.getBluetoothStack(BlueCoveImpl.java:1035)
at javax.bluetooth.LocalDevice.getLocalDeviceInstance(LocalDevice.java:75)
at javax.bluetooth.LocalDevice.getLocalDevice(LocalDevice.java:95)
at BTThread.waitForConnection(BTThread.java:35)
at BTThread.run(BTThread.java:23)
at java.lang.Thread.run(Unknown Source) 
```

所以..有人知道为什么吗？BluetoothStackBlueSoleil 似乎在我下载的 .jar 中，所以我没有收到 unstatisfied 链接错误...

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:35:07.007

我通过从计算机中删除 Bluesoleil 并安装不同的蓝牙驱动程序解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:40:54.730

我认为问题在于您需要构建本机方法。您必须使用 Android NDK 从 JNI 文件夹编译本机代码。ndk 构建等

以防万一您再次看到问题。

# javascript - 测验 - 计算单选按钮值

> ID：13935786
> 
> 赞同：2
> 
> 时间：2012-12-18T15:06:01.517
> 
> 标签：javascript, html, count, radio-button

我正在尝试为西班牙语课程创建测验。我对 JavaScript 几乎没有经验，但对 html 和 CSS 相当精通。我有一个问题，然后是三个带有答案的单选按钮。有两个错误答案和一个正确答案。我总共有 45 个问题。

```
<form name="quiz" method="post" name="buttons" id="form" onsubmit="return totalVal()">

<li><div class="question">¿Quién detestan la nueva casa?</div></li>
<input id="answer" type="radio" name="group1" value="wrong"> Josh<br>
<input id="answer" type="radio" name="group1" value="wrong"> Amanda<br>
<input id="answer" type="radio" name="group1" value="correct"> Josh y Amanda<hr>

<li><div class="question">¿Quién es señor Dawes?</div></li>
<input id="answer" type="radio" name="group2" value="wrong">Un familia amigo<br>
<input id="answer" type="radio" name="group2" value="wrong">Un gato<br>
<input id="answer" type="radio" name="group2" value="correct">Un amable joven de la agencia de bienes raíces<hr>

<li><div class="question">¿Quién qué sus buscan?</div></li>
<input id="answer" type="radio" name="group3" value="wrong">Josh<br>
<input id="answer" type="radio" name="group3" value="wrong"> Petey<br>
<input id="answer" type="radio" name="group3" value="correct" >Josh y Petey<hr>

<button class="submit" onclick="showTotalvalue();" type="submit">Submit</button></div> 
```

我想使用一些基本的 Javascript 来计算所有“正确”的单选按钮值并输出到用户单击提交后显示的新页面或警报框。

我在研究中发现了这一点。在我的谷歌搜索中，我无法找到计算“正确”值的代码片段。上面的链接是我得到的最接近的。我附上了我根据另一篇帖子的建议更改的 JavaScript 以适应我的情况。

```
totalVal = 0;

// calculate the total number of corrects clicked

for (y = 0; y = incorrectOfQuestion; y++) {
    var questionNo = document.getElementsByName("questions" + y);
    for (i = 0; i < questionNo.length; i++) {
        if (document.myform.questions[i].checked == true) {
            totalVal = totalVal + parseInt(document.myform.questions[i].value, 45);
        }
    }
} 
```

非常感谢任何帮助，因为我正处于时间紧迫的状态！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:19:49.443

您可以遍历每个单选组，然后遍历每个单选按钮以检查是否选中了正确的单选按钮。

```
var amountCorrect = 0;
for(var i = 1; i <= 45; i++) {
  var radios = document.getElementsByName("group" + i);
  for(var j = 0; j < radios.length; j++) {
    var radio = radios[j];
    if(radio.value === "correct" && radio.checked) {
      amountCorrect++;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:37:40.473

这应该是让它与警报框一起工作所需的代码：

```
 function handleClick()
          {         
        var amountCorrect = 0;          
        for(var i = 1; i <= 45; i++) {
          var radios = document.getElementsByName('group'+i);
          for(var j = 0; j < radios.length; j++) {
            var radio = radios[j];
            if(radio.value == "correct" && radio.checked) {
              amountCorrect++;
            }
          }
         }                   
            alert("Correct Responses: " + amountCorrect);
          }
```

```
 <form name="quiz" method="post" name="buttons" id="quiz" onsubmit="return false">

        <li><div class="question">¿Quién detestan la nueva casa?</div></li>
        <input id="answer" type="radio" name="group1" value="wrong"> Josh<br>
        <input id="answer" type="radio" name="group1" value="wrong"> Amanda<br>
        <input id="answer" type="radio" name="group1" value="correct"> Josh y Amanda<hr>

        <li><div class="question">¿Quién es señor Dawes?</div></li>
        <input id="answer" type="radio" name="group2" value="wrong">Un familia amigo<br>
        <input id="answer" type="radio" name="group2" value="wrong">Un gato<br>
        <input id="answer" type="radio" name="group2" value="correct">Un amable joven de la agencia de bienes raíces<hr>

        <li><div class="question">¿Quién qué sus buscan?</div></li>
        <input id="answer" type="radio" name="group3" value="wrong">Josh<br>
        <input id="answer" type="radio" name="group3" value="wrong"> Petey<br>
        <input id="answer" type="radio" name="group3" value="correct" >Josh y Petey<hr>

        <button class="submit" onclick="return handleClick();" type="submit">Submit</button>

        </form>
```

@pimvdb 在检查不允许类型转换并因此失败的“正确”字符串时使用了 === 运算符。他还使用了 getElementsByClassName 但元素没有应用类，所以这是不正确的。

工作版本可以在下面的小提琴中找到。如您所见，表单的 onsubmit 已设置为“return false”以阻止表单发布。

[http://jsfiddle.net/g45nG/1/](http://jsfiddle.net/g45nG/1/)

# javascript - 按 T ab 键时如何在 HTML 元素上旋转？

> ID：13935787
> 
> 赞同：2
> 
> 时间：2012-12-18T15:06:02.203
> 
> 标签：javascript, html

***不使用 JQuery***
按下 Tab 键时如何旋转 HTML 元素？
例如
在这种形式

```
<form>
    Field 1: <input type="text" id="field1" tabindex=1 /><br />
    Field 2: <input type="text" id="field2" tabindex=2 /><br />
    Field 3: <input type="text" id="field3" tabindex=3 /><br />
    Field 4: <input type="text" id="field3" tabindex=4 /><br />     
</form> 
```

当用户连续按 Tab 键时
，焦点项目将为
field1 -> field2 -> field3 -> field4 -> field1 -> field2 -> field3 -> field4 -> field1 -> ...
以此类推

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:29:14.093

*在field4 之后*试试这个：

```
<script type="text/javascript">
var myInput = document.getElementById("field4");
if(myInput.addEventListener ) {
    myInput.addEventListener('keydown',this.keyHandler,false);
} else if(myInput.attachEvent ) {
    myInput.attachEvent('onkeydown',this.keyHandler); /* damn IE hack */
}

function keyHandler(e) {
    var TABKEY = 9;
    if(e.keyCode == TABKEY) {
        if(e.preventDefault) {
            e.preventDefault();
        }
        document.getElementById('field1').focus();
        return false;
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-06T11:54:40.000

首先，我要感谢社区。这是我多年从你们那里获得答案后的第一个贡献。

昨天我正在寻找一些如何做到这一点的例子。最后，我**根据箭头导航编写了自己的代码，**因为正如 JaredMcAteer 指出的那样，由于可访问性原因，制表符不应该在列表内旋转，而是沿着活动元素的总索引跳跃。在这里你可以找到代码。希望它可以帮助某人。

```
$('[role="menu"] li:first-child a').focus();
$('[role="menu"] a').keydown(function(e){
		var myIndex = $(this).parent().index();
		var mySibling = $(this).parents('[role="menu"]').children();
		var first = mySibling[0];
		var last = mySibling.get(-1);
		if (e.which === 38 || e.keyCode === 38){
			e.preventDefault();
			var prev = mySibling[myIndex - 1];
			if(prev){
				$(prev).children('a').focus();
			}else {
				$(last).children('a').focus();
			}
		}
		if (e.which === 40 || e.keyCode === 40){
			e.preventDefault();
			var next = mySibling[myIndex + 1];
			if(next){
				$(next).children('a').focus();
			}else {
				$(first).children('a').focus();
			}
		}
	});
```

```
.menu ul {
	margin: 0;
	padding: 0.313rem;
	background: #ccc;
	opacity: 1;
}
.menu li {
  display: block;
}
.menu li a {
	display: block;
	position: relative;
	width: 100%;
	padding: 0.313rem;
	text-decoration: none;
}
.menu ul li:nth-last-child(n+2) {
	border-bottom: solid 1px #fff;	
}
.menu ul a:hover, .menu ul a:focus {
	background: #fff;
  border: 0;
  outline: 0;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<nav>
		<ul class="menu" role="menubar">
			<li role="menuitem"><a href="#target22" title="" class="settingsIcon">nav Item</a>
				<ul id="target22"  role="menu">
					<li role="menuitem" class="active"><a href="#menu1" title="">First Menu Item of the menu collection</a></li>
					<li role="menuitem"><a href="#menu2" title="">Menu Item</a></li>
					<li role="menuitem"><a href="#menu3" title="">Menu Item</a></li>
				</ul>
			</li>
		</ul>
	</nav>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:09:35.787

Tab 应该在所有现代浏览器中的表单元素中旋转。`autofocus`您可以使用 html5属性强制光标自动聚焦在列表中的第一项上。这是一个[例子](http://codepen.io/joe/pen/LDfGd)

**HTML**

```
<form>
    Field 1: <input type="text" id="field1" tabindex=1  autofocus="autofocus" /><br />
    Field 2: <input type="text" id="field2" tabindex=2 /><br />
    Field 3: <input type="text" id="field3" tabindex=3 /><br />
    Field 4: <input type="text" id="field3" tabindex=4 /><br />     
</form> 
```

@JaredMcAteer 绝对正确，因为使用自动对焦会降低用户的体验，尤其是那些有可访问性问题的用户。请考虑到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T07:36:42.090

我找到了另一种方法来做到这一点。给表单上的最后一个 div 或其他任何内容一个 tabindex，然后当它获得焦点时，只需将焦点移动到表单上的第一个元素。我没有在我的字段上设置明确的 tabindex，所以使用 tabindex=0 有效。

```
var $last = $(".ok-cancel");
$last.attr("tabindex", "0");
$last.on("focus", function(){ ... move focus to first field ... })); 
```

这样做的好处是您不需要知道除了第一个输入之外的表单上还有什么（如果需要，您可以自动发现）。

PS：我知道问题说没有jQuery，但这就是我的代码所在。

# netty - netty 接收大缓冲区

> ID：13935788
> 
> 赞同：0
> 
> 时间：2012-12-18T15:06:09.270
> 
> 标签：netty

当我收到一个 65535 字节的缓冲区时，我遇到了一些麻烦。我的缓冲区由标题和正文组成。我从标题中得到了正文长度。我从netty网站得到了这个例子。

我尝试更改接收网络的大小而没有结果。

```
_bootstrap.setOption("writeBufferHighWaterMark", 10 * 64 * 1024);
_bootstrap.setOption("sendBufferSize", 1048576); 
_bootstrap.setOption("receiveBufferSize", 1048576);
_bootstrap.setOption("tcpNoDelay", true); 
```

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:25:56.337

通常，操作系统会限制套接字缓冲区的大小，因此您可能需要调整设置以获取那么大的缓冲区。

查看本[教程](http://seeallhearall.blogspot.com/2012/06/netty-tutorial-part-15-on-channel.html)并搜索短语**“网络内核调整”**。

此外，[本](http://fasterdata.es.net/host-tuning/)指南还概述了如何在不同操作系统上调整这些限制。

# xcode - XCode 和权限

> ID：13935792
> 
> 赞同：0
> 
> 时间：2012-12-18T15:06:19.887
> 
> 标签：xcode, shell

我是我的 macbook pro 的管理员，但是我遇到了一种情况，例如在 XCode 中，当尝试运行构建后脚本时，它抱怨我没有必要的权限。如果我尝试将 XCode 作为 sudo 运行，那么它会更改当前执行用户的路径，从而使脚本的某些位不可用。

注意：我没有尝试执行任何奇怪的脚本，一个简单的 mkdir 和 cp 都失败了。

我的问题是两个： - 为什么我有这个权限问题，毕竟我是管理员。- 我该如何解决？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:18:36.213

检查路径的权限`mkdir`- 如果当前用户不可写，`mkdir`则将失败。

当您弄乱了目录的权限，或者试图将文件移动到需要管理权限的系统目录之一时，通常会发生这种情况。默认情况下，您没有这些目录的管理权限。

默认情况下，您不以“管理员权限”运行，您以普通用户身份运行，可以通过`sudo`GUI 提升提示（要求管理员用户名/密码的对话框）提升为管理员。

如果您想以管理员权限运行脚本，那么您可以执行以下操作：

```
osascript -e 'do shell script "/path/to/script args" with administrator privileges' 
```

这将触发海拔提示。

# php - 如何使用电子邮件获取用户凭据

> ID：13935795
> 
> 赞同：1
> 
> 时间：2012-12-18T15:06:30.280
> 
> 标签：php, email

有没有办法通过输入他/她的电子邮件地址来获取用户的名字、姓氏、年龄、性别等？我想用 php 来做。任何建议都被接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:08:15.870

有一个可用的 API，即[FullContact](http://fullcontact.com)。您可以免费注册并使用免费的 API。也有关于如何使用它的演示，就像 Facebook Graph API。

# regex - 正则表达式匹配一系列值

> ID：13935799
> 
> 赞同：2
> 
> 时间：2012-12-18T15:06:45.567
> 
> 标签：regex

在一些简单的正则表达式解决方案之后：我有一个正则表达式，它目前执行以下操作：

```
if(Regex.IsMatch(ffmpegOutputToParse, "x1080|x720"))
{
    return true;
}

 ffmpegOutputToParse = "Duration: 00:00:28.52, start: 8.000000, bitrate: 7361 kb/s
    Stream #0.0: Audio: wmav2, 44100 Hz, stereo, s16, 192 kb/s
    Stream #0.1: Video: vc1, yuv420p, 1280x720, 5942 kb/s, 29.97 tb(r)
At least one output file must be specified" 
```

这段代码工作正常。我希望这段代码现在不仅要完全匹配“x720”或“x1080”值，而且如果范围在 720-1080 之间，也返回 true。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:17:08.047

您不必使用正则表达式来完成所有事情。可以用正则表达式做一些事情，而用非正则表达式代码做一些事情是可以的。

在你的情况下，这样做（这是在 Perl 中，但你可以明白）：

```
if ( $ffmpegOutputToParse =~ /x(\d{3,4})/ ) { # Match an x followed by 3 or 4 digits
    $rate = $1; # $1 is the first capture group;
    $is_ok = ($rate >= 720 && $rate <= 1080);  # Is the rate between acceptable values?
    .... 
```

正则表达式用于匹配模式，而不是比较数值。你*可以*做类似的事情

```
x(7[2-9][0-9]|[89][0-9][0-9]|10[0-7][0-9]|1080) 
```

但这对读者来说*远*没有那么清楚这是做什么的。此外，如果您决定将可接受的费率从 720-1080 更改为 512-1400，该怎么办？您要么在我的版本中更改一行，要么在@TimPietzcker 的版本中重写整个正则表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T15:08:55.403

在这种情况下，您需要拼出所有这些值的文本表示：

```
@"x(7[2-9][0-9]|[89][0-9][0-9]|10[0-7][0-9]|1080)\b" 
```

**解释：**

```
x               # Match x
(               # Match either...
 7[2-9][0-9]    # 720-799
|               # or
 [89][0-9][0-9] # 800-999
|               # or
 10[0-7][0-9]   # 1000-1079
|               # or
 1080           # 1080
)               # End of alternation
\b              # Make sure the number ends here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:13:50.603

我离正则表达式大师还差得很远，但这应该可以工作，尽管有人可能会带来更优化的东西..

```
x(72\d)|(7[3-9]\d)|([89]\d\d)|(10[0-7]\d)|(1080) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:36:50.433

像 (\d+)x(\d+) 这样的正则表达式可能会让您捕获视频分辨率。您可以将字符串转换为整数，然后进行比较。正则表达式并不是真正适合数字比较的工具，即使它可以工作。

# jquery - 无法使用 JQuery UI 更新每个选定的产品

> ID：13935804
> 
> 赞同：3
> 
> 时间：2012-12-18T15:07:11.957
> 
> 标签：jquery, jquery-ui

**背景**

在我当前的项目中，我使用 JQuery UI 实现了产品和购物篮。这是我第一次尝试实现 JQuery UI，但 JQuery API 已经足够了。该商店将使用 .Net 使用 c# 驱动。我在开发中遇到了这块砖，我搜索了网络的每个角落并翻阅了 JQuery API 的每一页。我只是无法弄清楚代码中的逻辑有什么问题。

**我的问题**

一些产品有额外的选项，需要在发送到购物篮之前进行选择。很公平，所以我实现了一个对话框表单来从用户那里获取必要的信息（JQuery Dialod Modal）并更新每个产品中的表格。在我使用用户输入更新相关产品之前，程序上的所有内容都有效。每次更新产品时，只有第一个产品会获得详细信息。我希望我已经为你们清楚地解释了我的问题......我还在下面包含了一个基本的小提琴来模拟同样的问题。一世

如果您单击信息图标并单击添加句柄首选项并填写信息，然后再次检查第一个产品，您将明白我的意思。一切都只打印到第一个产品中。必须有一种方法可以写入每个产品。

产品是用 HTML 无序列表构建的。所以一个示例产品看起来像这样；

**HTML**

```
 <li class="ui-widget-content ui-corner-tr" id="100400">
    <h5 class="ui-widget-header">Option 1</h5>

            <font class="repairDetails" alt="Repair Details" style="">DETAIL
            <font style="color:Red; text-decoration:blink; font-size:1em; bottom:10;">Please view product details for <u>handle preferences</u> before sellecting this option.</font>
            </font><br />
            <label class="price">£00.00</label>

            <a class="ui-icon ui-icon-info dialog_but" title="View Product Detail" href="#" style="">View Product Detail</a>
              <div class="dialog_content" title="" style="">

                    <table  style="border:none !important;">
                    <thead>
                    </thead>
                    <tr>
                    <td style="border:none !important; width:15px; height:13px !important;"><span class="ui-icon ui-icon-circle-plus"></span></td>
                    <td style="text-align:left;">
                    DETAIL
                    </td>
                    </tr>

                    <tr>
                    <td style="border:none !important; width:15px; height:13px !important;"><span class="ui-icon ui-icon-circle-plus"></span></td>
                    <td style="text-align:left;">
                    DETAIL
                    </td>
                    </tr>

                    <tr>
                    <td style="border:none !important; width:15px; height:13px !important;"><span class="ui-icon ui-icon-circle-plus"></span></td>
                    <td style="text-align:left;">
                    DETAIL
                    </td>
                    </tr>

                    <tr>
                    <td style="border:none !important; width:15px; height:13px !important;"><span class="ui-icon ui-icon-circle-plus"></span></td>
                    <td style="text-align:left;">
                     DETAIL
                    </td>
                    </tr>

                    <table id="hDetails" class="ui-widget ui-widget-content">
                    <button id="handle-pre" class="handle-pre">Add Handle Preferance</button>

                    <thead> 
                        <tr class="ui-widget-header ">
                        Handle Preferences
                            <th>Handle Shape (Pro, Oval, Round)</th><br />
                            <th>Size - SSH/SH/LH/H etc.</th>
                            <th>Specify handle type if sellected <br />Value package re-handle</th>
                        </tr>
                    </thead>
                    <tbody id="addHere" class="addHere">

                    </tbody>
                    </table>

                    </table>

                </div>
            <a href="" title="Add to chart" class="ui-icon ui-icon-cart chart_but">Add to chart</a>

    <div style="display:none;">

    </div>

</li> 
```

**查询**

```
 //Modal window to ask and submit additional user details
        $(function () {
            var hShape = $("#hShape"),
                hSize = $("#hSize"),
                hType = $("#hType"),

        allFields = $([]).add(hShape).add(hSize).add(hType),
        tips = $(".validateTips");

            function updateTips(t) {
                tips
            .text(t)
            .addClass("ui-state-highlight");
                setTimeout(function () {
                    tips.removeClass("ui-state-highlight", 1500);
                }, 500);
            }

            function checkLength(o, n, min) {

                //check handle shape. Make sure the user only inputs relevent options
                if (n == "Handle Shape") {
                    if (o.val() != "Pro" && o.val() != "Oval" && o.val() != "Round") {
                        o.addClass("ui-state-error");
                        updateTips(n + " can only have values of 'Pro', 'Oval' and 'Round'  " + ".");
                        return false;
                    }
                }
                //check lenght 
                if (o.val().length < min) {
                    o.addClass("ui-state-error");
                    updateTips(n + " cannot be blank" + ".");
                    return false;
                } else {
                    return true;
                }
            }

            $("#dialog-form").dialog({
                autoOpen: false,
                height: 400,
                width: 400,
                modal: true,
                show: 'fade',
                hide: 'fade',
                buttons: {
                    "Add Details": function () {
                        var bValid = true;
                        allFields.removeClass("ui-state-error");

                        bValid = bValid && checkLength(hShape, "Handle Shape", 3);
                        bValid = bValid && checkLength(hSize, "Handle Size", 1);
                        bValid = bValid && checkLength(hType, "Handle Type", 3);

                        if (bValid) {
                           $('#addHere').each(function () {
                            $(this).append("<tr>" +
                                "<td>" + hShape.val() + "</td>" +
                                "<td>" + hSize.val() + "</td>" +
                                "<td>" + hType.val() + "</td>" +
                                "</tr>")
                       });
                            $(this).dialog("close");
                        }
                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                },
                close: function () {
                    allFields.val("").removeClass("ui-state-error");
                }
            });

             $("#handle-pre").live("click", function () {

                $("#dialog-form").dialog("open");
            });
        }); 
```

特别是在我试图更新相关表的代码中；

```
if (bValid) {
   $('#addHere').each(function () {
      $(this).append("<tr>" +
        "<td>" + hShape.val() + "</td>" +
        "<td>" + hSize.val() + "</td>" +
        "<td>" + hType.val() + "</td>" +
        "</tr>")
    });
 }; 
```

如果我的解释不充分，请看一下小提琴。[这里是小提琴...](http://jsfiddle.net/Yygup/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:32:19.347

您正在按 ID 选择元素，jQuery 的 id 选择器只会找到与给定 id 匹配的第一个元素。在您的情况下，您可以指定要查找元素的上下文

```
// find the main dialog element
var $el = $(this).closest('.ui-dialog');

if (bValid) {
     // set the context to the visible div in the background - which is a previous sibling to current dialog
    $('#addHere', $el.prevAll('.ui-dialog:visible')).append("<tr>" + "<td>" + hShape.val() + "</td>" + "<td>" + hSize.val() + "</td>" + "<td>" + hType.val() + "</td>" + "</tr>")
} 
```

[http://jsfiddle.net/4R9B6/](http://jsfiddle.net/4R9B6/)

using`$('#addHere', $el.prevAll('.ui-dialog:visible'))`设置查找 addHere 元素的上下文。在检查 dom 之后，是之前可见的 ui-dialog

's也`ID`应该是唯一的 - 因此使用类可能会更好，尽管它与使用类所需的解决方案相同。

# django - 将 Django Web 应用程序转换为桌面应用程序

> ID：13935807
> 
> 赞同：2
> 
> 时间：2012-12-18T15:07:22.667
> 
> 标签：django

我对 Django 非常满意，我想知道是否有某种方法可以将 Django Web 应用程序转换为桌面应用程序（可能不是 100%），以便我可以将其分发给用户，而不是学习 GUI 框架.

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:32:37.113

也许不完全是您正在寻找的东西，但如果您真的，真的不想学习 GUI 框架，我会考虑将您的 Django Web 应用程序与可分发包中的小型 Web 服务器打包，使用 Django应用程序配置为在 Web 服务器上的 localhost 上运行。然后，我将包含一个脚本，该脚本启动一个指向 Django 应用程序起始页的浏览器作为“可执行文件”。

如果没有正确配置，从安全的角度来看，这可能被认为是弱的。

# configuration - Log4j2的配置路径

> ID：13935808
> 
> 赞同：5
> 
> 时间：2012-12-18T15:07:26.660
> 
> 标签：configuration, log4j2

我正在尝试在我的项目中采用 Log4j2。因为我的 Java 应用程序被打包在一个 JAR 文件中。我不想将“log4j2.xml”配置打包在 JAR 文件中。我正在尝试从“ [http://logging.apache.org/log4j/2.x/manual/configuration.html](http://logging.apache.org/log4j/2.x/manual/configuration.html) ”了解配置文件的工作原理

但似乎没有关于更改 Log4j2 的配置文件路径的明确说明。

在谷歌搜索这个主题后，我发现类似“在可执行 JAR 中[引用 log4j 配置文件”在可执行 JAR 中引用 log4j 配置文件，但是根据“](https://stackoverflow.com/questions/6446722/referencing-log4j-config-file-within-executable-jar) [http://logging.apache.org/log4j/2](http://logging.apache.org/log4j/2.x/manual/migration.html)，这个解决方案不再可用[.x/manual/migration.html](http://logging.apache.org/log4j/2.x/manual/migration.html) ”（如果我理解正确的话）。

所以我想知道是否有人对这个问题有任何想法。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T10:51:49.393

您可以设置系统属性来指定配置路径。设置

```
"-Dlog4j.configurationFile="D:\learning\blog\20130115\config\LogConfig.xml" 
```

在 VM 参数中。代替

```
"D:\learning\blog\20130115\config\LogConfig.xml" 
```

到您的配置路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-22T15:25:43.570

1.  将**log4j2.xml**文件放在项目的资源目录中，以便 log4j 自动找到类路径下的文件。

**从自定义位置加载 log4j2.xml 文件-**

1.  您可以使用**系统属性/VM 参数**- Dlog4j.configurationFile=file:/path/to/file/log4j2.xml 这适用于任何 Web 应用程序。

2.  对于某些遗留应用程序，您可以创建一个类，用于从机器上的自定义位置加载**log4j2.xml/log4j2.properties ，例如 -** **D:/property/log4j2.xml** 使用这些方法中的任何一种，在应用程序启动期间，log4j2.xml src/resources 文件夹中的文件将被自定义位置 log4j.xml 文件覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-24T22:45:44.943

尝试使用 -Dlogging.config=Path_to_your_file

# ios - 通过 iOS 共享的 UIActivityViewController 更改

> ID：13935816
> 
> 赞同：4
> 
> 时间：2012-12-18T15:07:55.973
> 
> 标签：ios, uikit, share, uiactivityviewcontroller

通过使用 iOS 6 UIActivityView 控制器，我的应用程序具有简单的共享功能。

在 Facebook 或 Twitter 上分享时，会出现“通过 iOS 分享”

代码是：

```
NSString *textToShare = @"Test string to share";

UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:[NSArray arrayWithObject:textToShare] applicationActivities:nil];

[self presentViewController:activityViewController animated:YES completion:nil]; 
```

有什么方法可以将“通过 iOS 共享”更改为我的应用名称或其他任何内容？

![分享](../Images/aee7b71bc01a9a1fc95a5b3cf6460303.png)

谢谢，比尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T09:48:20.283

> **iOS 6 共享表**
> 
> iOS 6 共享表是 Apple 的 Facebook 集成功能。
> 
> **缺点**
> 
> 分享表中的帖子默认归属于 iOS；**联系 Facebook 为您的应用正确配置归因**

[iOS 上的共享和分发](https://developers.facebook.com/docs/howtos/share-dialogs-ios-sdk/)

# ssh - Git存储库亚马逊ec2

> ID：13935818
> 
> 赞同：0
> 
> 时间：2012-12-18T15:08:01.713
> 
> 标签：ssh, amazon-web-services, ubuntu-12.04, putty

您好，我正在使用带有 Ubuntu 服务器的 AWS EC2 实例来学习这个教程：http: [//codecrunchero.blogspot.com/2012/06/setting-up-remote-git-repository-on.html](http://codecrunchero.blogspot.com/2012/06/setting-up-remote-git-repository-on.html)

我被困在第一步：

```
ssh -i mykey.pem ec2-user@amazonpublicdns.com 
```

收到此错误：

> 警告：无法访问身份文件 mykey.pem：没有这样的文件或目录无法确定主机“amazonpublicdns.com”的真实性。

我在窗户上使用腻子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:47:23.043

您需要输入自己的凭据。喜欢

```
ssh -i ** MY .PEM LOCATION ** ec2-user@**MY IP** 
```

一个更有用的例子：

```
ssh -i C:\my.pem ec2-user@mywebsite.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T08:33:52.887

这是 ssh 命令行，但您使用的是 Putty。您需要使用 Putty GUI 输入实例的 IP 地址。

现在棘手的部分是 Putty 不理解 pem 格式，而是使用 ppk 格式:(

有一个名为 puttygen 的简单实用程序可以将 pem 文件转换为 ppk。

转换后 - 在 Putty ->ssh>auth 中使用此 ppk 文件并连接到您的实例。

# oracle - 使用用户定义类型数组调用 Oracle 存储过程

> ID：13935819
> 
> 赞同：2
> 
> 时间：2012-12-18T15:08:02.600
> 
> 标签：oracle, stored-procedures, types

我需要在 oracle 中调用存储过程。其中一个参数是用户定义的类型，如下所示：

```
CREATE OR REPLACE TYPE MY_PK AS OBJECT
(
  SOURCE_ID INTEGER,
  ACCT_SYSTEM VARCHAR2(255)
)
/

CREATE OR REPLACE TYPE MY_PK_ARR AS TABLE OF MY_PK
/

PROCEDURE get_data(pk_in IN my_pk_arr, my_coursor OUT t_cursor)
IS 
 ...
END 
```

我试图这样称呼它：

```
var    pk          my_pk_arr 
var    my_cursor   t_cursor
execute  myschema.mypackage.get_data (pk ,  :my_cursor); 
```

我不知道如何创建数组。这是可能的还是我需要创建某种表格来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:11:38.400

如果您通过脚本调用它，请像这样调用它。sqlplus 不支持用户定义的数组等。

```
declare
  v_pk   my_pk_arr;
  v_cur  t_cursor;
begin

  v_pk := MY_PK_ARR(MY_PK(1, 'a'), MY_PK(2, 'b')); -- or build in a loop etc.
  get_data(v_pk, v_cur);

end;
/ 
```

# ios - 无需调整内容视图大小的动画导航栏

> ID：13935824
> 
> 赞同：2
> 
> 时间：2012-12-18T15:08:11.510
> 
> 标签：ios, uinavigationbar, autoresize

我目前正在开发我的第一个 iOS 应用程序，并且很长一段时间以来一直在摆弄以下问题：
我正在使用带有导航和工具栏的导航控制器，它们最初都是隐藏的。通过点击屏幕，您可以切换栏。现在我需要只用阴影线勾勒出条形图，否则在背景中是白色的（就像我的根视图的背景一样），黑色字体。我通过设置来实现

```
self.navigationController.toolbar.tintColor = [UIColor whiteColor];
self.navigationController.navigationBar.tintColor = [UIColor whiteColor]; 
```

并稍微调整 appdelegate 中字体的外观：

```
 [[UINavigationBar appearance] setTitleTextAttributes:
 [NSDictionary dictionaryWithObjectsAndKeys:
  [UIColor colorWithRed:0 green:0 blue:0 alpha:1.0],UITextAttributeTextColor,
  [UIColor colorWithRed:255 green:255 blue:255 alpha:0],UITextAttributeTextShadowColor,
  [NSValue valueWithUIOffset:UIOffsetMake(0, -1)],UITextAttributeTextShadowOffset,
  [UIFont fontWithName:@"Helvetica" size:0.0],UITextAttributeFont,
  nil]] 
```

到目前为止一切正常。但是问题来了：
我希望导航和工具栏在切换时都具有动画效果（这种平滑的滑入/滑出）**而不**调整根视图的大小。就像现在设置的那样，这适用于工具栏，但导航栏一直拒绝这样做。
我尝试将导航栏设置为半透明：
- 未调整根视图的大小，但导航栏也没有动画，它只是弹出
未将其设置为半透明： - 导航栏正在滑入，但根视图被推下
我还尝试将导航栏的 autoresizingMask 设置为 UIViewAutoresizingNone 并尝试在界面构建器中设置我的视图的弹簧和支柱，但没有任何帮助。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:37:36.527

您可以尝试使用`setCenter:`和`setFrame:`方法`UINavigationBar`来执行您的“幻灯片”。

# c++ - C++ 文件处理 - 类对象

> ID：13935827
> 
> 赞同：0
> 
> 时间：2012-12-18T15:08:13.827
> 
> 标签：c++

以下代码读取 3 个 obj 并将它们写入文件。但是我无法使用下面的代码正确检索对象。数据重复且无序

请帮助

旧代码：

```
#include<fstream.h>
#include<conio.h>

class mail
{
  public:
    char un[25];             // user name
    char pd[25];             // passsword

    void reg(int);

} obj[5];

void mail::reg(int k)
{
  int i;
  i=k;

  clrscr();
  cout<<"Enter user name ( enter unique name )\n";
  cin>>un;

  cout<<"Enter password\n";
  cin>>pd;

  ofstream filout;
  filout.open("email",ios::app||ios::binary);
  if(!filout)
  {
    cout<<"cannot open file\n";
  }
  else
  {
    cout<<"\n "<<i;
    filout.write((char *)&obj[i],sizeof(mail));
    filout.close();
  }

  cout<<"You are now registered. \n";
  getch();

}        // end of sign up or register func

void main()
{

  int t;
  clrscr();
  obj[0].reg(0);
  obj[1].reg(1);
  obj[2].reg(2);

  mail obj2;

  ifstream filein;
  filein.open("email",ios::in||ios::binary);
  if(!filein)
  {
    cout<<"Unable to open file to read\n";
  }
  else
  {
    while(!filein.eof())
    {

      filein.read((char *)&obj2,sizeof(obj2));

      cout<<"username "<<obj2.un<<" passwword "<<obj2.pd<<"\n";
    }
    filein.close();
  }
  getch();

} 
```

另外请告诉我如何将代码放入stackoverflow。复制粘贴后手动放4个空格很累

更改后的新代码：

```
#include<fstream.h>
#include<conio.h>

struct mail
{
    char un[25];             // user name
    char pd[25];             // passsword
    void reg(int);
} obj[5];

void mail::reg(int k)
{
    int i=k;
    clrscr();
    cout<<"Enter user name ( enter unique name )\n";
    cin>>un;
    cout<<"Enter password\n";
    cin>>pd;

    ofstream filout;
    filout.open("email",ios::app|ios::binary);
    if(!filout) {
        cout<<"cannot open file\n";
    } else {
        cout<<"\n "<<i;
        filout.write((char *)&obj[i],sizeof(mail));
        filout.close();
    }

    cout<<"You are now registered. \n";
    getch();

}   // end of sign up or register func

int main()
{
    int t;
    clrscr();
    obj[0].reg(0);
    obj[1].reg(1);
    obj[2].reg(2);

    mail obj2;

    ifstream filein;
    filein.open("email",ios::in|ios::binary);
    if(!filein) {
        cout<<"Unable to open file to read\n";
    } else {
        while(filein) {
            filein.read((char *)&obj2,sizeof(obj2));

            cout<<"username "<<obj2.un<<" passwword "<<obj2.pd<<"\n";
        }
        filein.close();
    }
    getch();
} 
```

我仍然面临问题。我写了 3 个对象。但是我得到了 4 条输出记录。最后一个是重复的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:14:21.917

You have an improper file loop, an EOF() loop is bad practice and often can lead to undefined behavior, a proper loop would be as follows:

```
filein.read((char *)&obj2,sizeof(obj2));
while(filein)
{
    cout<<"username "<<obj2.un<<" passwword "<<obj2.pd<<"\n";
    filein.read((char *)&obj2,sizeof(obj2));
} 
```

the structure of this loop allows the file to check the file for EOF before reading again, while the eof loop will read the eof in THEN check, leading to some junk at the end.

*   your fileIn variable uses improper flags, you use '`||`' the logical OR operator instead of the '`|`' logical bitwise operator. This could be a possible reason for your error.
*   you have some issues with your program, `void main()` make most people here cringe, main ALWAYS returns `int`

# r - 在R中来回虚拟变量

> ID：13935831
> 
> 赞同：5
> 
> 时间：2012-12-18T15:08:23.597
> 
> 标签：r, vectorization, dummy-data

所以，两年来我一直在断断续续地使用 R，并试图了解矢量化的整个概念。由于我经常处理来自调查的多个响应集中的虚拟变量，我认为学习这个案例会很有趣。

这个想法是从**多个响应**到**虚拟变量**（和返回），例如：“在这 8 种不同的巧克力中，您最喜欢哪一种（最多选择 3 种）？”

有时我们将其编码为虚拟变量（**1**表示*人喜欢“Cote d'Or”*，**0**表示*人不喜欢它*），每个选项有 1 个变量，有时是分类变量（**1**表示*人喜欢“Cote d'Or” "* , **2**代表*喜欢 "Lindt" 的人*，依此类推），3 个变量代表 3 个选项。

所以，基本上我可以得到一个矩阵，这些行就像

```
1,0,0,1,0,0,1,0 
```

或带有线条的矩阵

```
1,4,7 
```

如前所述，这个想法是从一个到另一个。到目前为止，我得到了每个案例的循环解决方案和从虚拟到分类的矢量化解决方案。我将不胜感激对此事的任何进一步见解以及分类到虚拟步骤的矢量化解决方案。

## 虚拟到非虚拟

```
vecOrig<-matrix(0,nrow=18,ncol=8)  # From this one
vecDest<-matrix(0,nrow=18,ncol=3)  # To this one

# Populating the original matrix.
# I'm pretty sure this could have been added to the definition of the matrix, 
# but I kept getting repeated numbers.
# How would you vectorize this?
for (i in 1:length(vecOrig[,1])){               
vecOrig[i,]<-sample(vec)
}

# Now, how would you vectorize this following step... 
for(i in 1:length(vecOrig[,1])){            
  vecDest[i,]<-grep(1,vecOrig[i,])
}

# Vectorized solution, I had to transpose it for some reason.
vecDest2<-t(apply(vecOrig,1,function(x) grep(1,x))) 
```

## 不假对假

```
matOrig<-matrix(0,nrow=18,ncol=3)  # From this one
matDest<-matrix(0,nrow=18,ncol=8)  # To this one.

# We populate the origin matrix. Same thing as the other case. 
for (i in 1:length(matOrig[,1])){         
  matOrig[i,]<-sample(1:8,3,FALSE)
}

# this works, but how to make it vectorized?
for(i in 1:length(matOrig[,1])){          
  for(j in matOrig[i,]){
    matDest[i,j]<-1
  }
}

# Not a clue of how to vectorize this one. 
# The 'model.matrix' solution doesn't look neat. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:32:48.680

矢量化解决方案：

**虚拟到非虚拟**

```
vecDest <- t(apply(vecOrig == 1, 1, which)) 
```

**Not dummy to dummy**（回到原来的）

```
nCol <- 8

vecOrig <- t(apply(vecDest, 1, replace, x = rep(0, nCol), values = 1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:37:40.637

这可能会为第一部分提供一些内部信息：

```
#Create example data
set.seed(42)
vecOrig<-matrix(rbinom(20,1,0.2),nrow=5,ncol=4)

     [,1] [,2] [,3] [,4]
[1,]    1    0    0    1
[2,]    1    0    0    1
[3,]    0    0    1    0
[4,]    1    0    0    0
[5,]    0    0    0    0 
```

请注意，这并不假定每行中的个数相等（例如，您写了“最多选择 3 个”）。

```
#use algebra to create position numbers
vecDest <- t(t(vecOrig)*1:ncol(vecOrig))

     [,1] [,2] [,3] [,4]
[1,]    1    0    0    4
[2,]    1    0    0    4
[3,]    0    0    3    0
[4,]    1    0    0    0
[5,]    0    0    0    0 
```

现在，我们删除零。因此，我们必须将对象变成一个列表。

```
vecDest <- split(t(vecDest), rep(1:nrow(vecDest), each = ncol(vecDest)))
lapply(vecDest,function(x) x[x>0])

$`1`
[1] 1 4

$`2`
[1] 1 4

$`3`
[1] 3

$`4`
[1] 1

$`5`
numeric(0) 
```

# ruby-on-rails - RubyMine 对非英语 Cucumber 场景的支持

> ID：13935832
> 
> 赞同：1
> 
> 时间：2012-12-18T15:08:25.953
> 
> 标签：ruby-on-rails, cucumber, rubymine

我有我用德语写的黄瓜场景。RubyMine 似乎无法识别德语关键字。

有人知道如何为非英语场景添加 RubyMine 支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:35:45.063

我找到了 RubyMine 4.5.4 [http://devnet.jetbrains.net/message/5468120?tstart=0](http://devnet.jetbrains.net/message/5468120?tstart=0) 的解决方案，它将项目锁定到以前版本的小黄瓜：

```
gem 'gherkin', '2.11.1' 
```

对于 RubyMine Enoki (124.67)，它开箱即用，无需任何更改。

# c# - SQLite 错误：没有这样的表

> ID：13935833
> 
> 赞同：2
> 
> 时间：2012-12-18T15:08:28.637
> 
> 标签：c#, sqlite

我使用 System.Data.SQLite 来处理我的数据库。这是我创建表的方式：

```
CREATE TABLE spare_samples (
    sampleId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    sampleNr INTEGER UNSIGNED UNIQUE NOT NULL,
    sampleName VARCHAR(255) UNIQUE NOT NULL COLLATE NOCASE,
    spareState VARCHAR(255) NULL,
    sides VARCHAR(255) NULL,
    notes TEXT,
    dispatch VARCHAR(32) NULL,
    ebayId VARCHAR(255) NULL
);

CREATE TABLE spare_sample_photo_examples (
    exampleId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    exampleType VARCHAR(32) NOT NULL,
    exampleImage VARCHAR(128) UNIQUE NOT NULL COLLATE NOCASE,
    exampleTitle VARCHAR(128) NULL,
    exampleDescr TEXT,
    exampleOrder INTEGER NOT NULL DEFAULT 0,
    sampleId INTEGER NOT NULL,
    FOREIGN KEY (sampleId)
        REFERENCES spare_samples(sampleId)
        ON UPDATE CASCADE ON DELETE CASCADE
); 
```

要添加新行，我正在使用这个：

```
SQLiteConnection conn = new SQLiteConnection(LoadForm.connString);
SQLiteCommand command = conn.CreateCommand();
command.CommandText = "Insert Into spare_sample_photo_examples (exampleType, exampleImage, exampleTitle, exampleDescr, exampleOrder, sampleId) values('"
                + spareSamplePhotoExampleToUpdate.exampleType + "', '"
                + spareSamplePhotoExampleToUpdate.exampleImage + "', '"
                + spareSamplePhotoExampleToUpdate.exampleTitle + "', '"
                + spareSamplePhotoExampleToUpdate.exampleDescr + "', "
                + spareSamplePhotoExampleToUpdate.exampleOrder + ", "
                + spareSamplePhotoExampleToUpdate.sampleId + "); Select last_insert_rowid();";
Clipboard.SetText(command.CommandText);
try
{
    conn.Open();
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message, "Connection Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    return;
}

try
{
    spareSamplePhotoExampleToUpdate.exampleId = Convert.ToInt16(command.ExecuteScalar());
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    return;
}
finally
{
    if (conn.State.ToString() != "Closed")
    {
        conn.Close();
    }
} 
```

而spareSamplePhotoExampleToUpdate 是对象的实例：

```
public class SpareSamplePhotoExample
{
    public int exampleId { get; set; }
    public string exampleType { get; set; }
    public string exampleImage { get; set; }
    public string exampleTitle { get; set; }
    public string exampleDescr { get; set; }
    public int exampleOrder { get; set; }
    public int sampleId { get; set; }
} 
```

我实际上不知道这段代码有什么问题，我和其他任何事情，但是当我从应用程序生成代码并在 FF SQLite 管理器中运行它时，它已成功执行。此外，我还阅读了另一个类似的问题，但它们都涉及 android 和 ios。

```
Insert Into spare_sample_photo_examples (exampleType, exampleImage, exampleTitle, exampleDescr, exampleOrder, sampleId) values('image', 'images\c438ldpuojpywln1.jpg', '', '', '0', '32'); Select last_insert_rowid(); 
```

非常感谢您的帮助。

**评论：**

此代码在开始时检查数据库：

```
SQLiteCommand command = conn.CreateCommand();
command.CommandText = "SELECT count( name ) FROM sqlite_master WHERE (type = 'table' AND name = 'cars')"
                + " OR (type = 'table' AND name = 'makes')"
                + " OR (type = 'table' AND name = 'models')"
                + " OR (type = 'table' AND name = 'spares')"
                + " OR (type = 'table' AND name = 'spare_brands')"
                + " OR (type = 'table' AND name = 'spare_samples')"
                + " OR (type = 'table' AND name = 'export_templates')"
                + " OR (type = 'table' AND name = 'users')"
                + " OR (type = 'table' AND name = 'user_meta')"
                + " OR (type = 'table' AND name = 'spare_sample_photo_examples')";
            if (Convert.ToInt16(command.ExecuteScalar().ToString()) != 10)
            {
                //something like exit with some stuff
            } 
```

**并针对我的问题进行最终更新。**如您所见，我在数据库中有另一个表，所以在我开始添加照片示例之前，所有功能都可以正常工作。出现错误后，我什么也做不了，这涉及到数据库操作。所有操作都返回相同的错误，但对于它们的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:58:17.320

我有答案了！我有连接选项表单，我可以在其中选择要连接的数据库类型。其中一个参数是路径。我以另一种方式保存了它：

```
fDialog.FileName.Replace(Path.GetDirectoryName(Application.ExecutablePath) + "\\", ""); 
```

因此，当数据库文件位于 app 文件夹中时，路径看起来更干净。表格中有文件对话框，我可以在其中创建照片示例。下一个你已经知道的故事。应用程序开始在我打开图片的文件夹中搜索数据库文件。小心相对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:10:16.207

您的 LoadForm.ConnString 是否使用正确的帐户？如果您在 sqlite manager 中以一种方式登录并在一个模式中创建表，但您的应用程序使用不同的帐户/模式登录，则应用程序将无法在当前模式中找到该表。

# php - php Mysql查询给我错误的输出

> ID：13935835
> 
> 赞同：0
> 
> 时间：2012-12-18T15:08:33.553
> 
> 标签：php, mysql

Mysql 查询有问题。我写了这段代码

```
enter code here
$result = mysql_query("SELECT * FROM description");
        while ($row = mysql_fetch_array($result)){
              $data[] = $row;
                   foreach ($data as $row){
                       echo $row['name'];
           }
     }

enter code here 
```

我的输出是：

```
First description
First description
Second description
First description
Second description
Third description 
```

我在 db 中有 3 个描述（第一、第二、第三），我不知道他为什么给我这样的东西。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T15:10:43.297

您需要将其移至`while`循环之后：

```
 foreach ($data as $row) {
           echo $row['name'];
       } 
```

首先，您将所有行都放入`$data`变量中，然后才开始将它们回显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:10:57.163

[`mysql_fetch_array()`](http://php.net/mysql_fetch_array)返回一个对偶数组：整数和字符串键控。如果你做了：

```
 while ($row = mysql_fetch_array($result)){
       var_dump($row);
    } 
```

你会看到两个键。尝试使用`mysql_fetch_assoc()`，它只返回字符串键控版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:11:29.737

您的 foreach 循环在您的 while 循环内。把它移到外面试试。

```
 $result = mysql_query("SELECT * FROM description");
    while ($row = mysql_fetch_array($result)){
          $data[] = $row;
   }
   foreach ($data as $row){
       echo $row['name'];
   } 
```

# hibernate - 没有 JDBC 类型的方言映射：-1：NullPointerException

> ID：13935838
> 
> 赞同：1
> 
> 时间：2012-12-18T15:08:38.797
> 
> 标签：hibernate, stored-procedures, nullpointerexception, hibernate-mapping, dialect

使用以下代码时出现空指针异常。

```
 List<Object> = getSession().createSQLQuery(sqlQueryString)
                 .setResultTransformer(Transformers.aliasToBean(Target.class)).list(); 
```

我看过这个问题供参考：[https](https://stackoverflow.com/questions/5386648/non-managed-entity-in-hibernate) ://stackoverflow.com/questions/5386648/non-managed-entity-in-hibernate ，但这对我没有用，因为查询结果没有任何空值。所以我找不到我的代码有什么问题。谁能解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:45:14.427

.addScalar("fieldName", requiredDatatype) 方法将解决这个问题。下面的代码将为您解释。

```
List<Object> = getSession().createSQLQuery(sqlQueryString)
             .addScalar("field_1", Hibernate.INTEGER).addScalar("field_2", Hibernate.INTEGER) .........addScalar("field_n", Hibernate.INTEGER)
             .setResultTransformer(Transformers.aliasToBean(Target.class)).list(); 
```

# c# - SFTP 连接 DNS 问题 - System.Net.Sockets.SocketException：请求的名称有效，但未找到请求类型的数据

> ID：13935839
> 
> 赞同：7
> 
> 时间：2012-12-18T15:08:39.040
> 
> 标签：c#, dns, sftp, sharpssh, reverse-dns

我正在尝试通过 SharpSSH 连接到 ftp，如下所示：

```
Sftp Connection = new Sftp(ftpAddress, FTPLogin, FTPPasword);
Connection.Connect(); 
```

这导致JSchException：

```
System.Net.Sockets.SocketException: The requested name is valid, but no data of the requested type was found
at System.Net.Dns.InternalGetHostByName(String hostName, Boolean includeIPv6)
at System.Net.Dns.GetHostByName(String hostName)
at Tamir.SharpSsh.java.net.Socket..ctor(String host, Int32 port)
at Tamir.SharpSsh.jsch.Util.createSocket(String host, Int32 port, Int32 timeout) 
```

经过一番搜索，我尝试了以下代码：

```
IPHostEntry ip = Dns.GetHostEntry(ftpAddress); 
```

我得到了 SocketException: {No such host is known}

现在一些背景知识 - 我可以通过主机名和 IP 地址（外部和内部）将 Filezilla 连接到 ftpAdress。当我 >ping **ftp.mydomain.com**
我得到 >10.5.165.15
但是在 >ping -a 10.5.165.15
我得到 > **ftpnew.mydomain.com**

如果我是对的，我会因为 DNS <> revDNS 问题而被拒绝。

我的问题是 - 我该怎么做才能真正让我的 sftp 连接正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:53:15.967

通过检查所有可能性找到了解决方案，这就是我设法建立连接的方式：首先我的 ftpAddress 设置为外部/内部 IP。

```
IPHostEntry ip = Dns.GetHostByName(ftpAddress);
Sftp Connection = new Sftp(ip.ToString(),FTPLogin,FTPPassword);
Connection.Connect() 
```

看来我的错误与 DNS<>revDNS 无关，而是由于我试图调用的主机地址中有额外的“\”符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-24T15:04:55.590

仅输入主机的 IP 地址。例如

错误：“sftp //10.11.12.13”这将导致错误正确：“10.11.12.13”这没关系

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-10T06:41:54.180

我现在面临同样的问题，我找到了解决方案。使用以下类型 ftpAddress(URL): `sftp.abcdefg.com`带有 22 端口号。休息将是一样的。不要在 URL 的末尾或开头使用任何类型的正斜杠“/”和反斜杠“\”。我在这个 URL 上遇到了同样的问题 =`sftp.abcdefg.com/`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-29T21:36:28.733

当我稍微重新安排名称和地址时，我的工作。去掉主机名开头的 sftp://。和，在参数中加回 22 端口。

```
 using X = Renci.SshNet;

     ConnectionInfo = new X.ConnectionInfo(_host, 22, _usr, 
        new X.AuthenticationMethod[] {
        new X.PasswordAuthenticationMethod (_usr, _pwd)
     }); //_host = yourfavoritesite.whatever.com -- take out sftp://

     SftpClient = new X.SftpClient(ConnectionInfo);
     SftpClient.Connect(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-17T11:16:21.107

此错误的另一个来源是服务器名称的开头是否有空格，例如：

```
 <add key="SftpHost" value=" sftp.whatever.com" /> 
```

# powershell - 从包管理控制台构建项目

> ID：13935847
> 
> 赞同：2
> 
> 时间：2012-12-18T15:09:18.850
> 
> 标签：powershell, visual-studio-2012, nuget

我正在尝试创建一个 PowerShell 脚本，该脚本使用包管理控制台，除其他外，它将从活动解决方案构建一个项目。

我可以让项目参考起诉

```
$proj = Get-Project MyServiceProject 
```

但我找不到任何关于如何使用它来构建该项目的参考。

有没有人有类似的经历？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:51:29.923

看看这个[MSDN 主题](http://msdn.microsoft.com/en-us/library/envdte.solutionbuild.buildproject.aspx)。

```
$dte.Solution.SolutionBuild.BuildProject("<config>", "ProjectName", $true) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:14:34.973

我最终使用了这个脚本：

```
$proj = Get-Project MyServiceProject
$dte.Solution.SolutionBuild.BuildProject("Debug", $proj.FullName, $true) 
```

因为[BuildProject](http://msdn.microsoft.com/en-us/library/envdte.solutionbuild.buildproject.aspx)中的第二个参数请求的是项目文件的完整文件路径。

# javascript - 发布表单时如何将 datetimepicker 设置为本地时间

> ID：13935853
> 
> 赞同：2
> 
> 时间：2012-12-18T15:09:36.683
> 
> 标签：javascript, jquery, html, date, datetimepicker

当我发布带有日期时间值的编辑表单时，我遇到了问题。我有一个使用 getTimeZonOffset 设置本地日期时间的脚本。当我第一次希望数据库中的 utc 时间以本地时间显示时，它可以工作。问题是当我想用 datetimepicker 编辑表单时。新值存储在数据库中，每次用户点击提交按钮时，它都会再次添加本地时间。

我该怎么做才能避免这种情况？

```
 $(function () {
    // Determine timezone offset in milliseconds
 var d = new Date();
 var offsetms = d.getTimezoneOffset() * 60 * 1000;

    $('.UTCTime input').each(function () {
        try
        {     
            var text = $(this).val();
            var n = new Date(text);
            n = new Date(n.valueOf() - offsetms);

            var curr_date = n.getDate();
            var curr_month = n.getMonth() + 1; //Months are zero based
            var curr_year = n.getFullYear();
            var curr_hour = n.getHours();
            var curr_minutes = n.getMinutes();

            $(this).val(curr_year + "/" + curr_month + "/" + curr_date + " " + curr_hour + ":" + curr_minutes);

        }
        catch (ex) {
            console.warn("Error converting time", ex);
        }
    });
});

 $(function () {
$(".datetimepicker input").datetimepicker({
    dateFormat: "yy/mm/dd",
    showTime: true,
});
});

 <div class="span3 value UTCTime datetimepicker"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:57:44.357

看起来您的脚本将覆盖您编辑时已保存的任何值

您需要在设置日期时间值时添加某种检查，以免覆盖它

```
if( !$(this).val() ) {
      $(this).val(curr_year + "/" + curr_month + "/" + curr_date + " " + curr_hour + ":" + curr_minutes);
} 
```

如果您有其他一些默认值，您可能必须更改 if 条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:21:00.540

在您的数据库中为用户 ID 和时区创建唯一索引，这意味着不能为可以更新的同一用户再次输入当前时区。

如果您有 mysql db，则在重复键更新时使用 insert into table ....

希望这会给你正确的想法。

# c# - 如何在 WPF windows 应用程序中的按钮和页面之间建立链接？

> ID：13935860
> 
> 赞同：-1
> 
> 时间：2012-12-18T15:09:58.013
> 
> 标签：c#, wpf, wpf-controls

*   我看过那篇文章 [http://msdn.microsoft.com/en-us/library/vstudio/ms750478%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms750478%28v=vs.100%29.aspx) 但我无法找到一种实用的方法来做我想做的事。
*   我希望我有一个简单直接的方法来做我想做的事 ![在此处输入图像描述](../Images/253dacb5e8ac85a8b4879610a813d1ca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:13:51.950

`Click`为要链接到页面的每个按钮创建一个事件处理程序。在处理程序中，编写以下代码：

```
NavigationService.Navigate(new Uri("YourPageHere.xaml", UriKind.Relative)); 
```

不过，我真的认为您应该尝试一一按照该页面上的步骤进行操作。

# javascript - Django：如何获取 pdf 文件的部分并跳转到它们？

> ID：13935864
> 
> 赞同：1
> 
> 时间：2012-12-18T15:10:13.453
> 
> 标签：javascript, jquery, python, html, django

我在 django 中开发了一个简单的站点。在这个站点中，用户必须上传一个 pdf 文件，然后他可以在侧面看到它的部分树。挑战是： A. 我如何阅读文件部分？它可以在 django、python、javascript 或其他想法中。B. 当用户点击它时，我如何跳转到特定部分？

我显示带有 html 对象标记的文件。

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:58:46.190

我不确定我是否正确理解您，但如果您在 PDF 文件中谈论命名目的地，您应该：

*   使用“getNamedDestinations”方法使用 pyPdf 库获取 PDF 文件的命名目标
*   使用 nameddest 参数打开 PDF 文件，例如“http://example.org/doc.pdf#nameddest=something”

# android - 在上下文菜单中单击时获取联系人 ID

> ID：13935866
> 
> 赞同：0
> 
> 时间：2012-12-18T15:10:20.217
> 
> 标签：android, contextmenu, android-contacts, contactscontract

我有一些客户的列表视图。在这个 listView 中，我单击一个客户端并出现一个 contextMenu。

我怎样才能得到这个客户在contactscontract中的联系人的ID？？？？？？

```
 public boolean onContextItemSelected(MenuItem item){
    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();

         ----> info.position (I get the position of the item click in the list) ok

         Get id of contact in contactsContract application
         ---->   info.id???
         ---->   cursorAdapter.getItemId(info.position)) 
```

我认为这两个选项都不起作用......

任何人都可以帮助我澄清这个问题

# ios - 将 #s 数组存储到 NSUserDefaults，将选中标记添加到与数组中的 # 匹配的每个单元格行

> ID：13935867
> 
> 赞同：0
> 
> 时间：2012-12-18T15:10:21.770
> 
> 标签：ios, xcode, uitableview, nsarray, nsuserdefaults

在我之前在这里获得帮助的应用程序中，我解析了一个位于在线的 XML，第一天只显示 XML 中的一个项目，并在应用程序打开后每天添加一个项目。我希望能够为每个单元格的详细信息视图添加“标记为已读”操作。这样，用户可以阅读它，将其标记为已读，并且在后续加载时，每个加载的项目旁边都会出现一个复选标记。

由于应用程序每次都会下载 XML，因此我认为这是最好的方法。我正在考虑将数组存储到 NSUserDefault 键中。该数组将根据他们选择的行添加一个数字。如果他们选择了第 1 行并对其进行标记，则数组会将 #1 添加到其中。如果他们随后选择第 3 行并对其进行标记，则数组中将包含 1 和 3。

这是可行的吗，然后在 cellForRowAtIndexPath 中，是否为数组中包含的每一行添加一个复选标记？

我脑子里有这个想法，如果这行得通，只需要一点指导来实现它。谢谢

**更新**
这是我到目前为止所拥有的。在 applicationDidFinishLaunchingWithOptions 中，我检查 NSUserDefault 键“checkedrows”是否存在。如果没有，我用一个空数组的对象创建它。

```
if (![defaults objectForKey:@"checkedrows"]) {
        [defaults setObject:@[] forKey:@"checkedrows"];
    } 
```

我遇到的两个主要问题是如何在 cellForRowAtIndexPath 中获取数组中的数字，如果有任何行匹配它们，请为其添加复选标记。示例：tableview 中有 5 行，数组返回 0、2、4。所以，我希望 TableView 为第一个第三个和第五个单元格添加复选标记。

另一个主要问题是如何在不删除任何旧数字的情况下将数字添加到数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:22:10.260

绝对地！

您可以使用该`setObject:forKey:`方法将`NSArray`对象写入`NSUserDefaults`，并`objectForKey:`检索该数组。

现在，只需倾听

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

在您的 中`UITableViewDelegate`，检索 中已经存在的数组`NSUserDefaults`，将刚刚点击的索引（从`indexPath`对象中获取此信息）添加到数组中，然后简单地将数组写回`NSUserDefaults`!

要为选定的单元格添加复选标记，请在`tableView:didSelectRowAtIndexPath:`上面的委托方法中使用以下命令：

```
[tableView cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryCheckmark; 
```

# c# - 从 HTML 中查找特定内容

> ID：13935868
> 
> 赞同：0
> 
> 时间：2012-12-18T15:10:23.187
> 
> 标签：c#, .net, html-parsing

我有一个看起来像这样的字符串：

```
<br /><br />\n\n<p><font size=\"4\" face=\"Courier New\"> TSX Symbol Changes -December    
17th - December 21st</font><br> 
```

我需要做的是退出 TSX 符号更改 - 12 月 17 日 - 12 月 21 日。我已经阅读过 Regex.IsMatch 适用于这种情况的各种其他帖子，但我遇到的问题是 12 月 17 日至 21 日每周都会更改（即，当我下周运行我的代码时，名称将更改为 TSX Symbol Changes - December 24 日至 12 月 28 日）。那么，无论如何我可以只查找 TSX 符号更改，一旦找到，也可以检索它之后的日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:18:12.870

你可以试试下面的代码。

```
 var str1 = "<br /><br />\n\n<p><font size=\"4\" face=\"Courier New\"> TSX Symbol Changes -December 17th - December 21st</font><br>";
    var str2 = str1.Substring(str1.IndexOf("TSX Symbol Changes")).Replace("</font><br>",""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:23:46.953

[`Html Agility Pack`](http://htmlagilitypack.codeplex.com/)如果需要解析 html，请使用。

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);  // this is your string

string wordToFind = "TSX Symbol Changes -";
var fontTSX = doc.DocumentNode.Elements("font")
    .FirstOrDefault(f => f.InnerText.Contains(wordToFind));
if (fontTSX != null)
{
    string innerText = fontTSX.InnerText.Trim();
    innerText = innerText.Substring(innerText.IndexOf(wordToFind) + wordToFind.Length);
    String[] words = innerText.Split();
    String monthName = words.First();
    var monthInfo = CultureInfo.InvariantCulture.DateTimeFormat.MonthNames
        .Select((mn, i) => new{ MonthName = mn, Value = i+1 })
        .FirstOrDefault(x => x.MonthName.Equals(monthName, StringComparison.OrdinalIgnoreCase));
    if (monthInfo != null)
    {
        int month = monthInfo.Value;
        int day = int.MinValue;
        // now extract your range
        IEnumerable<int> days = words
            .Where(w => w.Length >= 2 && int.TryParse(w.Substring(0, 2), out day))
            .Select(w => day)
            .Take(2);
        if(days.Count() == 2)
        {
            DateTime startDate = new DateTime(DateTime.Now.Year, month, days.ElementAt(0));
            DateTime endDate = new DateTime(DateTime.Now.Year, month, days.ElementAt(1));
        }
    } 
```

# java - Java 传递 int 值/数据

> ID：13935870
> 
> 赞同：0
> 
> 时间：2012-12-18T15:10:30.747
> 
> 标签：java, integer

谁能看到我的代码有什么问题？我`0`从计算返回中得到。

在第二类上创建了一个小计算并将结果数据传递给主类，然后打印。

**主班**

```
package javaapplication3;

public class JavaApplication3 {

    public static void main(String[] args) {

        cal bla = new cal();

        bla.getRatio();
        String dCount = String.valueOf(bla.getRatio());

        System.out.print(dCount);

    }
} 
```

**二等**

```
package javaapplication3;

public class cal {

    public int total = 11;
    public int count = 2508;
    public int calRatio;

    public void caln () {

        calRatio = count / total;

        System.out.print(calRatio);

    }

    public int getRatio () {
        return (calRatio);
    }

} 
```

PS：通过将 bla.getRatio 更改为 bla.caln(); 工作。我想我把其他项目搞混了。感谢您的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:11:42.027

您正在进行整数除法，它将结果截断为整数。

您需要将任一操作数转换为`double`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T15:13:50.043

```
bla.getRatio();
String dCount = String.valueOf(bla.getRatio()); 
```

您永远不会调用 caln() 方法，因此 calRatio 永远为 0。

也许你的意思是：

```
bla.caln();
String dCount = String.valueOf(bla.getRatio()); 
```

另外，您尝试除以整数。试试这个：

```
public class cal {

    public int total = 11;
    public int count = 2508;
    public double calRatio;

    public void caln () {

        calRatio = count / total;

        System.out.print(calRatio);

    }

    public double getRatio () {
        return calRatio;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:14:00.330

你从来没有调用过“setter”函数caln()，所以`calRatio`从来没有设置过。所以它返回 0 为`calRatio`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T15:16:43.750

代替

```
public void caln () {

    calRatio = count / total;

    System.out.print(calRatio);

} 
```

这样

```
public cal () {

    calRatio = count / total;

    System.out.print(calRatio);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T15:13:32.903

> 我从计算返回中得到 0。

正如你应该的那样。`11 / 2508`进行整数除法，即`0`

如果你想要一个非零我建议改变

```
 public double getAverage () {
        return (double) total / count;
    } 
```

通常，您将总数除以计数以获得平均值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T15:15:45.433

试试这个：

```
public static void main(String[] args) {

        cal bla = new cal();
        bla.caln();
        String dCount = String.valueOf(bla.getRatio());

        System.out.print(dCount);

    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-18T15:13:55.813

它将始终返回 0，因为您正在返回一个`int`类型。除法的结果将始终是某个浮点值，因此您需要将其存储并返回。

```
public class cal {
    public int total = 11;
    public int count = 2508;
    public double calRatio;
    public void caln() {
        calRatio = (double)count / (double)total;
        System.out.print(calRatio);
    }
} 
```

# asp.net - ASP.NET MySQL.NET 连接字符串

> ID：13935872
> 
> 赞同：0
> 
> 时间：2012-12-18T15:10:37.523
> 
> 标签：asp.net, mysql

我有一个 ASP.NET 页面，它使用 MySQL.NET 库来访问服务器上的 MySQL DB。我的问题是关于将连接字符串存储在 web.config 中。MySQL.NET 连接字符串如下所示：

“服务器=本地主机；用户=用户；数据库=数据库；密码=密码”

我不得不假设将 web.config 中的 pw 设置为纯文本并不是一件好事。我有什么选择来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:11:36.320

您可以在 web.config 中加密连接字符串。

更多信息：[保护连接字符串](http://msdn.microsoft.com/en-us/library/89211k9b%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:12:40.337

您可以使用“受保护的配置”加密 Web.config。有关该过程的完整概述，请参见 MSDN 上的此处：

[http://msdn.microsoft.com/en-us/library/dtkwfdky(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dtkwfdky(v=vs.100).aspx)

# regex - 命令行 FINDSTR 调用中特定 RegEx 的语法

> ID：13935877
> 
> 赞同：0
> 
> 时间：2012-12-18T15:10:44.750
> 
> 标签：regex, batch-file, findstr

我正在编写一个批处理脚本，它在开始另一个进程之前接受各种参数。在下面的示例中，我正在检查第一个参数为 1，第二个参数的形式为“0-9 的任意数字，后跟字母 k、m 或 g”（我指定进程应以 10g = 10 Gb 内存开始的内存量）。

如果我只想要一个数字就足够了：

```
IF [%1] EQU [1] ECHO %2|findstr /r "[^0-9]" > nul
IF [%1] EQU [1] IF errorlevel 1 echo starting test number %1 with %2 of memory 
```

我认为添加字母 k、m 或 g 的明显 segway 导致我这样做（我尝试过使用和不使用“*”）：

```
IF [%1] EQU [1] ECHO %2|findstr /r "[^0-9]*[kmg]" > nul
IF [%1] EQU [1] IF errorlevel 1 echo starting test number %1 with %2 of memory 
```

但是，我无法将任何字符串与此 FINDSTR 模式匹配。基本上我正在寻找一个匹配 [0-9][0-9]*[kmg] 的 FINDSTR。我相当肯定我很接近，但在制定正确的语法时遇到了麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:49:56.277

即使您发布的第一个代码也不起作用。`[^0-9]`寻找任何非数字。我想你想要`^[0-9]`，这意味着任何以数字开头的字符串。您的逻辑也是错误的： FINDSTR 如果找到则将 errorlevel 设置为 0，如果未找到则设置为 1。我更喜欢使用条件`&&`和`||`运算符来测试结果而不是 IF。

我建议您尝试以下内容。我已经投入了`/I`开关以使其不区分大小写。`/X`如果带后缀的数字之前或之后有多余的字符，我会添加开关以防止字符串匹配。

```
@echo off
if "%~1" equ "1" echo(%~2|findstr /rix "[0-9][0-9]*[kgm]" >nul && (
  echo starting test number %~1 with %~2 of memory
) 
```

不幸的是，FINDSTR 不支持`?`元字符。因此，如果后缀是可选的（如果要支持字节、千字节、兆字节和千兆字节），则解决方案会稍微复杂一些。您需要搜索 2 个字符串中的任何一个，一个带后缀，一个不带后缀。FINDSTR 在空格处将搜索字符串分成多个搜索字符串。

```
@echo off
if "%~1" equ "1" echo(%~2|findstr /rix "[0-9][0-9]*[kgm] [0-9][0-9]*" >nul && (
  echo starting test number %~1 with %~2 of memory
) 
```

# c++ - 如何从 C++ 中读取 Windows 注册表中的凭据缓存

> ID：13935884
> 
> 赞同：1
> 
> 时间：2012-12-18T15:11:08.907
> 
> 标签：c++, c, windows, registry, regedit

Windows 凭据缓存在称为本地缓存的本地系统中。这将允许用户在无法联系域控制器时登录系统。

这些缓存的凭据作为哈希值存储在本地系统注册表中，值是 HKEY_LOCAL_MACHINE\SECURITY\CACHE\NL$1 到 NL$10。这只能由系统帐户访问，否则我们必须授予管理员权限才能执行操作。

现在我正在尝试从我的 c++ 代码中访问这些缓存。但我未能获得价值。请给出从 C++ 代码读取和写入这些缓存的解决方案。

我正在使用的代码：

```
DWORD GetLocalMachineProfileBuffer(BYTE* pBuffer, DWORD nMaxLength )
{
LPCWSTR szSubKey = L"SECURITY\\CACHE";
LPCWSTR szValueName = L"NL$1";

    DWORD   rc; 
    DWORD   dwType; 
    HKEY    hOpenedKey;

    if( ERROR_SUCCESS == RegOpenKeyEx (HKEY_LOCAL_MACHINE,szSubKey,0,KEY_READ,&hOpenedKey) )
    {
        rc = RegQueryValueEx(hOpenedKey,szValueName,0,&dwType,(LPBYTE)pBuffer,&nMaxLength ); 
        if( rc != ERROR_SUCCESS ) 
        { 
            return (DWORD)-1;
        } 
        else 
        { 
            _ASSERT( dwType == REG_BINARY ); 
        } 

        RegCloseKey( hOpenedKey );
        return nMaxLength; 
    }
    else
    {
        return (DWORD)-1;
    }   
}

int _tmain(int argc, _TCHAR* argv[])
{
    static BYTE Buffer[200];
    DWORD nLength = GetLocalMachineProfileBuffer( Buffer, sizeof( Buffer ) );

    for(int i=0;i<200;i++) {
            printf("%0X ",Buffer[i]);
    }
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:58:23.517

为了读取注册表的这个区域，您必须运行`NT AUTHORITY\SYSTEM`，或者称为`LocalSystem`- 相当于 unix 的 windows `root`。我猜您正在拒绝访问，但您正在丢弃错误消息。

所以这：

```
 if( rc != ERROR_SUCCESS ) 
    { 
        return (DWORD)-1;
    } 
```

应该是这样的：

```
 if( rc != ERROR_SUCCESS ) 
    { 
        return rc;
    } 
```

然后您可以使用或类似方法检查退出代码`echo %ERRORLEVEL%`，并找出您实际遇到的错误。

让进程按原样运行的最佳方法`SYSTEM`是使用 Task Scheduler API 创建作业。

*   [在上下文中启动远程进程](https://stackoverflow.com/questions/6178437/start-remote-process-within-the-context/8818377#8818377)

您可以通过指定本地计算机名称在本地计算机上执行此操作。

# css - Facebook iframe 网络应用程序 div 滚动到底部

> ID：13935885
> 
> 赞同：0
> 
> 时间：2012-12-18T15:11:22.420
> 
> 标签：css, facebook, html, scroll, overflow

我有一个 facebook iframe 网络应用程序，它打开一个带有 onclick 的 jquery 对话框。jquery 对话框具有以下 css。当对话框打开时，div 总是滚动到底部。有没有办法让 div 从顶部而不是底部开始？似乎 facebook 不允许您使用一些 jquery 和 javascript 函数来执行此操作。

```
#dialog {
    max-width: 525px;
    max-height: 525px;
    overflow: auto;
    font-family: Times New Roman;
    font-size: 14px;
    line-height: 18px;
    margin-left: 15px;
    margin-right: 15px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:17:50.070

```
 #dialog {
        position:absolute;
        top:20%;
        left:20%:
        z-index:999;
        max-width: 525px;
        max-height: 525px;
        overflow: auto;
        font-family: Times New Roman;
        font-size: 14px;
        line-height: 18px;
        margin-left: 15px;
        margin-right: 15px;
    } 
```

如果您想将对话框留在您使用过的位置：绝对；

# crystal-reports - Crystal 2008 Chart legend Font Issue - exported pdf file

> ID：13935897
> 
> 赞同：0
> 
> 时间：2012-12-18T15:11:45.130
> 
> 标签：crystal-reports, crystal-reports-2008

I have an rpt file designed using crystal 8.5\. I opened this file in crystal 2008 and saved it. after exporting the report to pdf, the letters in the chart legend appear too close to each other. I tried different font sizes no luck.

How to increase the letter spacing in chart legend in crystal 2008 or how to make the text appear good in the chart legend

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:12:27.113

您无法更改字母间距。我真正拥有的唯一运气是修改图例的位置/大小。我通常发现将它放在图表底部、增加字体大小并在图例文本之前添加一个空格是提高 pdf 可读性的最佳设置。

# wordpress - How to display content checking only top level category?

> ID：13935902
> 
> 赞同：0
> 
> 时间：2012-12-18T15:12:05.477
> 
> 标签：wordpress

I need to display content only in Top Level Category using custom taxonomy

E.g:

```
if (is_top_level_category)
##Any content
else
##Nothing 
```

Thank's ypu...

# c - (x++, y) + (y++, x) 是未定义还是未指定，如果未指定，它可以计算什么？

> ID：13935904
> 
> 赞同：1
> 
> 时间：2012-12-18T15:12:11.660
> 
> 标签：c, c99, language-lawyer, c11, unspecified-behavior

[逗号序列运算符](http://en.wikipedia.org/wiki/Comma_operator)在表达式中引入[序列点。](http://en.wikipedia.org/wiki/Sequence_point)我想知道这是否意味着下面的程序避免了未定义的行为。

```
int x, y;

int main()
{
  return (x++, y) + (y++, x);
} 
```

如果它确实避免了未定义的行为，它仍然可以是未指定的，也就是说，返回几个可能的值之一。我认为在 C99 中，它只能计算`1`，但实际上，各种版本的 GCC 将该程序编译为返回的可执行文件`2`。Clang 生成一个返回的可执行文件`1`，显然符合我的直觉。

最后，这在 C11 中是否发生了变化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:59:00.003

取表达式：

```
(x++, y) + (y++, x) 
```

从左到右评估：

```
x++  // yield 0, schedule increment of x
,    // sequence point: x definitely incremented now
y    // yield 0
y++  // yield 0, schedule increment of y
// explode because you just read from y and wrote to y
// with no intervening sequence point 
```

标准中没有任何内容禁止这样做，所以整个事情都有未定义的行为。

对比这个伪代码：

```
f() { return x++, y; }
g() { return y++, x; }
f() + g() 
```

根据 C99 (5.1.2.3/2)，对`f`和`g`本身的调用都算作副作用，并且函数调用运算符在进入函数之前包含一个序列点。这意味着函数执行不能交错。

在“并行评估事物”模型下：

```
f()  // arbitrarily start with f: sequence point; enter f
g()  // at the same time, start calling g: sequence point 
```

由于执行`f`计数本身就是副作用，因此序列点会`g()`暂停执行，直到`f`返回。因此，没有未定义的行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T16:13:05.250

该标准的整个第 6.5 章都提到了基于操作员的评估顺序。我能找到的评估顺序的最佳总结是标准的（非规范性）附录 J：

> C11 附录 J
> 
> J.1 未指明的行为
> 
> *   评估子表达式的顺序和发生副作用的顺序，函数调用 ()、&&、||、?: 和逗号运算符 (6.5) 中指定的除外

在您的示例中，您无法知道是否首先评估子表达式`(x++, y)`or `(y++, x)`，因为未指定 + 运算符的操作数的评估顺序。

至于未定义的行为，逗号运算符什么也没解决。如果`(x++, y)`首先评估，则`y`可能会`y++`在另一个子表达式之前立即评估。由于 y 被访问两次，中间没有序列点，因此除了确定要存储的值之外，行为是未定义的。[更多信息在这里。](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)

所以你的程序都有未定义和未指定的行为。

（此外，它具有实现定义的行为，因为 int main() 而不是 int main (void) 不是托管应用程序中明确定义的 main 版本之一。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:26:46.740

我的理解是，以下任何评估命令都是合法的：

*   `x++, y++, y, x`
*   `x++, y, y++, x`
*   `x++, y++, x, y`
*   `y++, x, x++, y`
*   ...

但不是：

*   `y, x++, x, y++`
*   ...

在我的理解中，唯一需要的顺序是`(x++)`must come before `(y)`，并且`(y++)`must come before `(x)`。

因此，我认为这仍然是未定义的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T16:54:45.573

该标准明确声明了哪些运算符引入了序列点，`+`而不是其中。因此，您的表达式可以很好地被评估为被禁止的子表达式被评估为“接近”彼此，它们之间没有序列点。

在实用的基础上，这种禁止是有原因的，即这种操作的操作数的评估可以并行调度，例如，如果处理器具有用于所讨论的子表达式的操作的多个流水线。你可以很容易地说服自己，在这样的评估模式下，任何事情都有可能发生，结果是不可预测的。

在您的玩具示例中，冲突是可预测的，但如果您在子表达式中使用一些指针间接，则不一定是这种情况。那么您将不知道其中一个子表达式是否可能会为另一个子表达式设置别名。因此，如果 C 想要允许这种类型的优化，基本上没有什么可以做的。

# php - Zend Framework 2 中奇怪的类自动加载扰乱了整洁类的发现

> ID：13935905
> 
> 赞同：1
> 
> 时间：2012-12-18T15:12:16.610
> 
> 标签：php, zend-framework2, htmltidy

我正在使用 Zend Framework 2 做一些工作，这里我需要清理用户的输入，这是在*Html*中。我之前在普通 php 中使用过 php tidy extension [[see this]](http://php.net/manual/en/class.tidy.php)，没有使用命名空间和自动加载，而且代码运行良好。

而这一次，我在 zf2 中写了一个视图助手，就像：

```
<?php
namespace Blog\View\Helper;
use Zend\View\Helper\AbstractHelper;

class TidyHtml extends AbstractHelper
{
    public function __invoke($userHtml){
    $config = array(
               'indent'         => true,
               'output-xhtml'   => true,
               'wrap'           => 200);

    $userHtml = '<div id="wrapper">'.$userHtml.'</div>';
    $tidy = new tidy();
    $tidy->parseString($userHtml,$config,'utf8');

    $tidy->cleanRepair();
    $dom = new DOMDocument();
    $dom->loadHTML($tidy);

    $node = $dom->getElementsById("wrapper");
    $newdoc = new DOMDocument();
    $cloned = $node->item(0)->cloneNode(TRUE);
    $newdoc->appendChild($newdoc->importNode($cloned,TRUE));
    return $newdoc->saveHTML();
    }
} 
```

我想在第 14 行创建一个 tidy 实例，但出现错误：

```
PHP Fatal error:  Class 'Blog\\View\\Helper\\tidy' not found in /var/www/zf2-tutorial
/module/Blog/src/Blog/View/Helper/TidyHtml.php on line 14 
```

显然 php 将 tidy 视为一些用户定义的类并且找不到它的声明。也许zf2中的自动加载功能对其有一些影响。而且我确定 tidy2.0 扩展程序已正确安装在我的机器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:19:11.600

这里的问题是由于您`Blog\View\Helper`在代码中声明的名称空间中，并且由于您在没有完全限定名称的情况下调用该类`tidy`，因此 PHP 假设您实际上想要`Blog\View\Helper\tidy`.

简单地做`$tidy = new \tidy();`，你应该没问题，注意前面的斜杠。

您可能还想阅读更多关于 PHP 命名空间的信息：http: [//php.net/manual/en/language.namespaces.php](http://php.net/manual/en/language.namespaces.php)

此外，您可能需要对根命名空间中的所有其他类使用完全限定的类名，通常来自当前命名空间以外的命名空间，或者发出正确的`use`声明，如下所述：[http://php。网络/手册/en/language.namespaces.importing.php](http://php.net/manual/en/language.namespaces.importing.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:20:11.157

建议您阅读有关[命名空间的信息](http://de3.php.net/namespace)

您在命名空间内`Blog\View\Helper`。这意味着，当您创建 a 时，`new tidy();`它正在寻找`Blog\View\Helper\tidy`. 如果一个类在你需要调用的全局命名空间中`new \tidy()`，与 . 相同`DOMDocument`。

如果一个类在不同的命名空间中，你需要像这样使用它：

```
use Some\Name\Space\Tidy;
new Tidy(); 
```

或者这样做

```
new \Some\Name\Space\Tidy(); 
```

# c# - WAMS 桌子可以装饰吗？

> ID：13935908
> 
> 赞同：0
> 
> 时间：2012-12-18T15:12:22.623
> 
> 标签：c#, azure-sql-database, azure-mobile-services

使用本地嵌入的 SQLite 表类，可以使用 PrimaryKey、AutoInc、MaxLength(NN) 和 Indexed 等属性装饰列。看起来更大的金属化 WAMS（nee SQL-Azure）表，就像它们一样，基本上是 MS SQL Server 表，也将提供这种能力。

但我从 WAMS 门户中看到的唯一可能是在所选列上“设置索引”。

*现在*是否可以使用其他属性（我不知道）来装饰列，或者这是未来计划的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:28:40.337

迟到总比不到好。我不确定它是否是即将推出的功能，但是，使用 SQL Azure（或 SQL 数据库）中的数据库，您当然可以操作基础表。我会谨慎这样做以确保您不会进行重大更改，但您当然可以向列添加索引和约束。

此外，我所做的是利用存储过程和函数，然后从 WAMS 脚本调用它们。

# solr - CloudSolrServer, graceful shutdown

> ID：13935909
> 
> 赞同：3
> 
> 时间：2012-12-18T15:12:24.540
> 
> 标签：solr, solrj

I was reading this PDF: [http://2010.lucene-eurocon.org/slides/Solr-In-The-Cloud_Mark-Miller.pdf](http://2010.lucene-eurocon.org/slides/Solr-In-The-Cloud_Mark-Miller.pdf), and there is a section that talks about `CloudSolrServer`. In particular, this statement is made:

> It keeps a list of both live and dead servers. When a request to a server fails, that server is added to the ‘dead’ list, and another ‘live’ server is queried instead. The ‘dead’ server list is occasionally pinged, and if a server comes back, it is moved back into the ‘live’ list.

This works fine when a SOLR instance or the machine crashes, but for normal maintenance it would be undesirable because requests in progress would be lost. Typically with a normal load balancer, there's a way to shut off traffic to a box, and then normal shutdown can proceed at some interval after that.

Since it appears that CloudSolrServer is intended to replace a traditional load balancer in front of a SOLR cluster, I was wondering about graceful shutdown. What is the recommended way to shutdown a SOLR instance while not losing requests, (while using CloudSolrServer)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T18:43:00.023

如果你想优雅地关闭一个实例，你需要先从 ZooKeeper 中移除相应的节点，然后关闭该实例。您可以使用“DELETEREPLICA”命令从 ZK 中删除节点：

> /admin/collections?action=DELETEREPLICA&collection=collection&shard=shard&replica=replica

[在 Solr Collections API 文档中查看更多信息](https://cwiki.apache.org/confluence/display/solr/Collections+API#CollectionsAPI-api9)

一旦从 ZooKeeper 中删除临时节点，CloudSolrServer 将停止向它发送请求。

# python - sort 2d calibration pattern points with numpy

> ID：13935913
> 
> 赞同：9
> 
> 时间：2012-12-18T15:12:26.500
> 
> 标签：python, sorting, numpy, matplotlib, delaunay

I have a n:2 Matrix with points(x,y) found from dots in a rectangular calibration pattern. I like to sort these points row by row. I have sorted these points with lexsort but the distortion from the camera is too big so that y-coordinates will be overlap.

```
imageloading...
blobs=imageprocessing....
coordinates=np.array([blob.centroid() for blob in blobs])
nd=np.lexsort((coordinates[:,0],coordinates[:,1]))
coordinates=coordinates[ind] 
```

![enter image description here](../Images/42a92b450077164a12d2cd587994715c.png)

Is there a way to sort this with help of a delaunay pattern going a long the rows?

```
import matplotlib.tri as tri 
x=coordinates[:,0] y=coordinates[:,1]
triang = tri.Triangulation(x, y) 
```

![enter image description here](../Images/e915e1dc27c0a507011541d6c3a4cfd3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:51:24.010

使用三角测量确实很有趣，并且可以用于您的应用程序：

```
import numpy as np
import matplotlib.tri as tri
import matplotlib.pyplot as plt
import random

# create fake data
x,y = np.meshgrid(np.arange(10), np.arange(10))
x = x.flatten()
y = y.flatten()
coordinates = np.column_stack([x,y])+0.04 * np.random.rand(len(x), 2)
np.random.shuffle(coordinates)
x=coordinates[:,0]
y=coordinates[:,1]

# perform triangulation
triang=tri.Triangulation(x,y)
f = plt.figure(0)
ax = plt.axes()
tri.triplot(ax,triang)

# find horizontal edges
f = plt.figure(1)
e_start = coordinates[triang.edges[:,0]]
e_end = coordinates[triang.edges[:,1]]
e_diff = e_end - e_start
e_x = e_diff[:,0]
e_y = e_diff[:,1]

e_len = np.sqrt(e_x**2+e_y**2)
alpha = 180*np.arcsin(e_y/e_len)/np.pi

hist, bins, patches = plt.hist(alpha, bins=20)

# in the histogram, we find that the 'horizontal' lines
# have an alpha < 10.

ind_horizontal = (-10<alpha) & (alpha < 10)
edges_horizontal = triang.edges[ind_horizontal]
plt.show() 
```

结果，您在 edges_horizo​​ntal 中获得水平边缘，这是一个 2d 数组`[[p_{0},p_{1}], ..., [p_{n}, p_{n+1}]]`，其中 p_i 是`coordinates`数组的索引。

# regex - Validate Regex Input, preferably using Regex

> ID：13935921
> 
> 赞同：0
> 
> 时间：2012-12-18T15:12:39.597
> 
> 标签：regex

I'm looking to have the (admin) user enter some pattern matching string, to give different users of my website access to different database rows, depending on if the text in a particular field of the row matches the pattern matching string against that user.

I decided on Regex because it is trivial to integrate into the MySQL statements directly.

I don't really know where to start with validating that a string is a valid regular expression, with a regular expression.

I did some searching for similar questions, couldn't see one. Google produced the [comical answer](http://www.quickmeme.com/meme/35dsu6/), sadly not so helpful.

Do people do this in the wild, or avoid it?

Is it able to be done with a simple regex, or will the set of all valid regex need to be limited to a usable subset?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:37:33.507

在 JavaScript 中：

```
input = "hello**";

try{
        RegExp(input);
        // sumbit the regex
}catch(err){
        // regex is not valid
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:22:46.420

验证正则表达式是一项极其复杂的任务。正则表达式将无法做到这一点。

一种简单的方法是捕获尝试运行 SQL 语句时发生的任何错误，然后将适当的错误报告给用户。

我假设“管理员”是这里的受信任用户。让不受信任的用户能够输入正则表达式是非常危险的，因为使用构造为需要很长时间才能执行的正则表达式很容易攻击您的系统。那是在您开始担心[Bobby Tables](http://xkcd.com/327/)问题之前。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T08:39:18.803

您无法使用正则表达式验证字符串是否包含有效的正则表达式。但你也许可以妥协。

如果您只需要知道字符串中仅使用了正则表达式中有效的字符，则可以使用正则表达式：

```
^[\d\w \-\}\{\)\(\+\*\?\|\.\$\^\[\]\\]*$ 
```

这可能就足够了，具体取决于应用程序。

# objective-c - 检查在 mkmapview 上点击了哪个地图视图注释

> ID：13935922
> 
> 赞同：0
> 
> 时间：2012-12-18T15:12:42.300
> 
> 标签：objective-c, ios, mkmapview

我无法知道在 MKMapView 上点击了哪个注释。

让我解释一下我的问题，有一个简单的视图控制器在其上加载了地图视图。

我的注释类“MapViewAnnotation.h”如下

```
@interface MapViewAnnotation : NSObject <MKAnnotation>
{
    NSString *title;
    CLLocationCoordinate2D coordinate;
    NSString *sID;
    NSString *zipCode;
}
@property (nonatomic, copy) NSString *title;
@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, retain) NSString *sID;
@property (nonatomic, retain) NSString *zipCode;

- (id)initWithTitle:(NSString *)titleOfPin andStoreId:(NSString *)storeIdForDetails andCoordinate:(CLLocationCoordinate2D)coordinateOfPin andZipCode:(NSString *)zip; 
```

这是我的“MapViewAnnotation.m”文件。

```
#import "MapViewAnnotation.h"
#import <MapKit/MapKit.h>

@implementation MapViewAnnotation

@synthesize title, coordinate,storeId,zipCode;

- (id)initWithTitle:(NSString *)titleOfPin andStoreId:(NSString *)storeIdForDetails andCoordinate:(CLLocationCoordinate2D)coordinateOfPin andZipCode:(NSString *)zip
{
    [super init];
    title = titleOfPin;
    coordinate = coordinateOfPin;
    sID = storeIdForDetails;
    zipCode = zip;
    return self;
}

-(void)dealloc
{
    [title release];
    [super dealloc];
}
@end 
```

这是我的 viewcontroller.m 文件

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    //I want to access the sID property of that annotation here. PLEASE HELP ME HOW CAN I DO THAT

    if (!storeDetailControllerObject) {
        storeDetailControllerObject = [[StoreDetailController alloc]init];
    }
    //    storeDetailControllerObject.storeId = [view.annotation storeId];
    [self.navigationController pushViewController:storeDetailControllerObject animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:41:43.050

从[MKMapViewDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html)：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view; 
```

如果您在此方法中处理事件，您可能知道选择了哪个注释。
您必须设置 MKMapView 的委托并声明您的类实现了 MKMapViewDelegate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:15:38.577

这应该有效：

```
MapViewAnnotation *mapViewAnnotation = (MapViewAnnotation*)view.annotation;
if( [mapViewAnnotation isKindOfClass:[MapViewAnnotation class]] ){
    storeDetailControllerObject.storeId = mapViewAnnotation.storeId;
} 
```

# python - How does Python's multiprocessing module preform in comparison to Hadoop?

> ID：13935929
> 
> 赞同：1
> 
> 时间：2012-12-18T15:13:04.553
> 
> 标签：python, hadoop, parallel-processing, multiprocessing

Essentially, in your experience if faced with a 'big(ish) data' problem how far can you get using Python's multiprocessing module when compared to something like Hadoop?

I ask because aside from proficiency in Python/SQL I am 'programming novice'. Hence Hadoop is pretty impenetrable to me at the moment, so hope to be able to get quite far using the multiprocessing module for many large data problems that come my way, at least until I can get my head around Hadoop.

EDIT for clarity: If I have a 4 core computer are there any advantages to using Hadoop on 4 nodes as opposed to the multiprocessing module?

Thanks.

# java - Java JTable Column headers not showing

> ID：13935934
> 
> 赞同：5
> 
> 时间：2012-12-18T15:13:18.447
> 
> 标签：java, swing, jtable, jscrollpane, jtableheader

My code (Logic-wise) is all good, the only problem is that the column headers do not show up in the 2 tables (table and tableS, one for teacher and one for student details). How do I make them show?

```
 import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.*;

public class Display
{
    ArrayList<Student> stud1 = new ArrayList<Student>();
    ArrayList<SubjectTeacher> sTeach1 = new ArrayList<SubjectTeacher>();

    //For Display Teachers
    private  JTable table;
    private  JFrame f;
    private int i;

    //For DisplayStudents
    private JTable tableS;
    private JFrame fS;
    private int iS;

    //Displays Teachers
    public void displayTeachers()
    {

            f = new JFrame("Teachers");

            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.setSize(500,400);
            f.setVisible(true);

        String[] columnNames =  {"Name", "Surname", "ID", "Pay", "Subject"};

        sTeach1 = Stores.getTeach();
        i = sTeach1.size();

        Object[][] data = new Object[i+1][5];

            for (int j = 0; j<sTeach1.size(); j++)
            {
                {
                    SubjectTeacher myTeach = sTeach1.get(j);
                     data[j][0] = myTeach.getName();
                     data[j][1] = myTeach.getSurname();
                     data[j][2] = myTeach.getID();
                     data[j][3] = myTeach.getPay();
                     data[j][4] = myTeach.getSubjectID();
                };
            }

    JTable table = new JTable (data, columnNames);
    f.add(table);

    }

    //Displays Students
    public void displayStudents()
    {

        System.out.println(stud1.size());

            fS = new JFrame("Students");

            fS.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            fS.setSize(700,600);
            fS.setVisible(true);

        String[] colNames =  {"Name", "Surname", "ID", "Computer", "Physics", "Maths", "Tests", "Passes", "Fails"};

        stud1 = Stores.getStud();
        iS = stud1.size();

        Object[][] info = new Object[iS+1][9];

        for (int j = 0; j<stud1.size(); j++)
            {
                {

                    Student myStud = stud1.get(j);

                 info[j][0] = myStud.getName();
                 info[j][1] = myStud.getSurname();
                 info[j][2] = myStud.getID();
                 info[j][3] = myStud.getSubject(1);
                 info[j][4] = myStud.getSubject(2);
                 info[j][5] = myStud.getSubject(3);
                 info[j][6] = myStud.getTestsTaken();
                 info[j][7] = myStud.getPasses();
                 info[j][8] = myStud.getFails();
                };
            }

    JTable tableS = new JTable (info, colNames);
    fS.add(tableS);

    }

} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-18T16:05:50.813

这是问题所在。

```
JTable table = new JTable (data, columnNames);
f.add(table); 
```

不要直接添加表。用于`JScrollPane`显示表格标题。

```
f.add(new JScrollPane(table)) 
```

为什么需要把桌子放在里面`JScrollPane`？

来自[@Dan](https://stackoverflow.com/a/12671160/230513)帖子：

> 当您将组件放在 a 的构造函数中时`JScrollPane`，您会提到哪个是要应用滚动的视图。
> 
> 另一方面，使用 add 方法，您只需将组件添加到容器中，就像将其添加到`JPanel`. 这样，您无需指定要添加滚动条的组件。

**编辑：** 来自[javadoc](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#show)（由trashgod在评论部分引用）

> 以下是创建用作表格容器的滚动窗格的典型代码：

```
JScrollPane scrollPane = new JScrollPane(table);
table.setFillsViewportHeight(true); 
```

> 此片段中的两行执行以下操作： JScrollPane 构造函数使用引用表对象的参数调用。这将创建一个滚动窗格作为表格的容器；该表会自动添加到容器中。调用 JTable.setFillsViewportHeight 来设置 fillsViewportHeight 属性。当此属性为 true 时，表格使用容器的整个高度，即使表格没有足够的行来使用整个垂直空间。这使得将表格用作拖放目标变得更加容易。滚动窗格会自动将表头放置在视口的顶部。滚动表格数据时，列名在查看区域的顶部仍然可见。
> 
> 如果您使用的是没有滚动窗格的表格，那么您必须获取表格标题组件并自己放置。例如：

```
container.setLayout(new BorderLayout());
container.add(table.getTableHeader(), BorderLayout.PAGE_START);
container.add(table, BorderLayout.CENTER); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T15:22:37.310

如果我没记错的话，你应该`JScrollPane`在它周围放一个容器（例如 a ）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-02T14:06:43.060

我的问题是我将`JFrame`布局设置为`null` `(f.setLayout(null))`. 所以当我删除它并添加

```
f.add(new JScrollPane(table)). 
```

有效。

# c# - 程序崩溃后取回变量

> ID：13935940
> 
> 赞同：2
> 
> 时间：2012-12-18T15:13:45.460
> 
> 标签：c#, asp.net

我正在尝试找到一种方法来取回我以前的变量值，以便我可以在我手动重新启动它时崩溃之前将我的应用程序恢复到以前的运行状态。我目前正在使用保存在项目文件夹中的“配置”文件。有一个更好的方法吗？

我想要保存的代码的一些小部分。

```
if (EventID == WIA.EventID.wiaEventItemCreated)
        {
            if (d != null)
            {
                foreach (Property p in d.Properties)
                {
                    if (p.Name.Equals("Pictures Taken"))
                        Console.WriteLine("Taken");
                }

                wiaImageFile = (WIA.ImageFile)(d.Items[d.Items.Count].Transfer(FormatID.wiaFormatJPEG));
                wiaImageFile.SaveFile(Properties.Settings.Default.FolderNameRaw + "\\" + imageCount + ".jpg");
                imageCount++;//I want to save this count so that I can continue the sequence even after the application crashes
                Pluck.Default.PhotoExistsInDirectory = true;
                FacebookControls fbc = new FacebookControls();
                if(Properties.Settings.Default.UseFB == true)
                    fbc.UploadPhotos();

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:20:20.900

一般来说，配置文件是一个很好的答案。您的其他选项通常是注册表或数据库，但我认为配置文件是更安全的选择。

持久化这些信息的问题是它可能会再次导致错误，如果是这样，您将希望能够轻松地丢弃它。一个文件（当然存储在用户设置空间中）也许是这样做的方法。如果需要，您可以指示用户删除该文件。用户访问注册表或数据库是一个更复杂的修复。

此外，您应该将状态包装在适当的对象中，并构建初始化逻辑以初始化状态对象并具有不加载配置文件的机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:24:40.557

我使用配置文件。我还有一个全局异常处理程序，它可以捕获任何异常并提供在应用程序关闭之前保存任何文件（包括用户正在处理的文件）的机会。

我也同意 C Ross 的观点，即您可以保留导致应用程序失败的数据。另一个不会让您立即恢复的选项是使用计时器或后台进程定期保留设置。我将它与几个备份一起使用，有点像 Windows 中的系统还原功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:28:26.830

您可以处理 UnhandledException、Application_ThreadException 和 Application.ApplicationExit 事件，并尝试在那里保存您的数据：

[http://www.switchonthecode.com/tutorials/csharp-tutorial-dealing-with-unhandled-exceptions](http://www.switchonthecode.com/tutorials/csharp-tutorial-dealing-with-unhandled-exceptions)

作为**@C。罗斯**说，用户配置文件是一个不错的选择。

当然，首先您必须在运行时将应用程序的状态保存在某个对象中。

# asp.net - LinqDataSource_Selecting does not work

> ID：13935945
> 
> 赞同：0
> 
> 时间：2012-12-18T15:14:09.703
> 
> 标签：asp.net, linq

I have used a gridview and linqdatasourse , the gridview will be fill by a linq-stored procedure after clicking a search button.

I did it like below but my grid view is empty.

It seems LinqDataSource2_Selecting does not work.

Please help what is the problem?

```
public void LinqDataSource2_Selecting(object sender, LinqDataSourceSelectEventArgs e)
{
_DataContext = new EDMSDataContext();

 var subjectFilter = e.WhereParameters["Subject"];

var query = _DataContext.spQuickSearchDoc(subjectFilter);

e.Result = query;
}

protected void btnSearch_Click(object sender, EventArgs e)
{
    _DataContext = new EDMSDataContext();
    this.LinqDataSource2.WhereParameters["Subject"].DefaultValue =    this.txtSearchKeywords.Text;

    GridViewDocuments.Visible = false;
    GridViewDocuments_Search.Visible = true;
    this.GridViewDocuments_Search.DataBind();

} 
```

Stored procedure:

```
 ALTER PROCEDURE [dbo].[spQuickSearchDoc]
 @Searchtext varchar(50)=null

AS

select DocId,DocumentNo,Title,Unit
from tblDocuments
where DocumentNo like '%'+@SearchText + '%'
or Title like '%'+@SearchText + '%'
or Unit like '%'+@SearchText + '%' 
```

Gridview:

```
 <asp:GridView ID="GridViewDocuments_Search" runat="server" AutoGenerateColumns=False Visible="False" onrowcommand="GridViewDocuments_Search_RowCommand"  
  DataKeyNames="DocID" PageSize="100"  >
    <Columns>
    <asp:TemplateField HeaderText = "Details">
           <ItemTemplate>
      <asp:Button ID ="btn_Show" Text="Details" runat= "server" CommandName= "Details"  CommandArgument='<%#
        Container.DataItemIndex%>' />
        </ItemTemplate>
            </asp:TemplateField>

       <asp:BoundField DataField="DocumentNo" HeaderText="DocumentNo" SortExpression="DocumentNo" />
        <asp:BoundField DataField="title" HeaderText="Title" SortExpression="title" />

        <asp:BoundField DataField="Docid" HeaderText="Docid" Visible="false" />
        <asp:CommandField ShowEditButton="True" />
        <asp:CommandField ShowDeleteButton="True" />
    </Columns>
</asp:GridView>

<asp:LinqDataSource ID="LinqDataSource2" runat="server" 
          ContextTypeName="EDMSDataContext" OnSelecting="LinqDataSource2_Selecting">
          <WhereParameters>
    <asp:ControlParameter Name="Subject"
                          ControlID="txtSearchKeywords"
                          PropertyName="Text"
                          Type="String" />
</WhereParameters>
      </asp:LinqDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:28:49.067

您需要将 DataSourceID 添加到 GridView，如下所示：

```
<asp:GridView ID="GridViewDocuments_Search" runat="server" 
   . .  DataSourceID="LinqDataSource2"> 
```

由于未设置，因此 GridView 被绑定为 NULL。

# android - AsyncTask randomly stops

> ID：13935948
> 
> 赞同：1
> 
> 时间：2012-12-18T15:14:12.497
> 
> 标签：android, android-asynctask

I have a pull based app that has to pull from the Server every 15 seconds. For that I used a normal AsyncTask, my code basically looks like this:

```
protected Void doInBackground(Context... arg0) {
   while (true && this.pull_on ) {
     pull_data();
     TimeUnit.SECONDS.sleep(15)
}; 
```

Now I have the massive Problem that, the app just stops pulling out of the blue. `No exeptions`, the Status of the AsyncTask is 'running' the 'pull_on' variable is set to 'true' but it just stops pulling.

I can `not reproduce` this, it just happens sometimes, I can work perfectly for a long time and then it just stops.

Does anybody have an idea how this can happen?

Should I refactor and implement this with a timer?

Also what benefit would using a Service have over what I do know? Battery-power is not an issue.

Thanks for your help.

P.S. I should add that sometimes I start Activitys form the AsyncTask. Like this 'ApplicationManager.getCurrentActivity().startActivity( myIntent )' but I does not seam to be a Problem.

P.P.S.

Timer seams to be to limited for what I want to use, I do want to do something every 15 seconds but in some special case I want to stop the the pinging and then restart it again. The amount of hacking for that seams to be more work then just doing it with a AsyncTask.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:31:02.737

这是一个糟糕的设计。您不希望每 15 秒在后台进行一次无限循环。当应用程序被推到后台时，这会耗尽电池电量，这是主要问题之一。

一种正确的方法是设置警报并对此做出反应。计时器也不是一个坏选择。

我建议您考虑将其转移到服务中，这就是它的样子

> Service是一个应用程序组件，可以在后台执行长时间运行的操作，并且不提供用户界面

它讨论了长时间运行的操作，但将经常性操作移至服务也很有意义。

有关服务的官方文档在这里：http: [//developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

# css - Show multiple columns for data table

> ID：13935949
> 
> 赞同：0
> 
> 时间：2012-12-18T15:14:15.227
> 
> 标签：css, jsp, jsf, xhtml

I use a DataTable to show multiple objects that are stored in an arraylist

```
<h:dataTable value="#{commandCenter.onlineEmployees}" var="emp">

                    <h:column >
                        <div class="employee">
                            <div id="image">
                                <h:outputText value="img"></h:outputText>
                            </div>
                            <h:outputText value="#{emp.name}, #{emp.age}" />
                            <div id="name">
                                <h:outputText value="" />
                            </div>
                        </div>
                    </h:column> 
```

Actually this only shows all values in one column and multiple rows. I want to show them in multiple columns . I couldn't find a tag like `<h:row>`, so how can I do this?

# c# - 在 .NET 中创建 Visual Studio 编辑器控件的实例

> ID：13935951
> 
> 赞同：0
> 
> 时间：2012-12-18T15:14:19.670
> 
> 标签：c#, .net, visual-studio-2010, textbox, editor

您知道是否可以在 Visual Studio 隔离外壳之外的 .NET 中使用 Visual Studio 编辑器，例如在 Windows 窗体应用程序中？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:16:42.660

尝试 Visual Studio SDK 中的 Visual Studio 隔离 Shell。

[http://msdn.microsoft.com/en-us/library/bb685691.aspx](http://msdn.microsoft.com/en-us/library/bb685691.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:17:42.947

简短的回答是，不。您将不得不使用您制作或从第三方获得的自定义控件。这是一个关于该主题的良好讨论的链接： [Free/open source code editor UI control for .Net](https://stackoverflow.com/questions/2968057/free-open-source-code-editor-ui-control-for-net)

# javascript - 使用 touchstart 还是 mousedown？

> ID：13935955
> 
> 赞同：1
> 
> 时间：2012-12-18T15:14:40.087
> 
> 标签：javascript

我编写了 mousedown / mouseup 事件侦听器，它可以在我的 android 手机上工作，所以如果我只需要一个简单的触摸，我是否不需要为所有手机编写 touchstart 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:27:17.440

如果您的逻辑有效，为什么要更改它/添加更多事件处理程序？

我建议您阅读[本文档](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)以确定是否应该使用这些特定的处理程序。虽然它是 iOS 文档，但它可以让您很好地了解如何处理移动事件。

**更多主题**：

如果您只需要一个简单的触摸事件，在我看来，“点击”事件监听器就足够了。如果你想做任何滚动/鼠标（触摸？）特定的东西，再次：阅读[该文档](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)。

# php - 修改函数而不直接编辑它

> ID：13935956
> 
> 赞同：0
> 
> 时间：2012-12-18T15:14:54.853
> 
> 标签：php

我正在寻找修改 Wordpress 插件中的一个函数，我在其中切换到多站点安装中的主站点以加载图像。该插件会定期维护，因此我不想修改代码以便能够轻松更新它。

无论如何要“挂钩”到函数中，以便我可以这样修改它？我在下面展示了我想要实现的目标，我必须手动添加`switch_to_blog(1)`和`restore_current_blog()`.

```
function get_value($post_id, $field)
{
    $value = parent::get_value($post_id, $field);

    switch_to_blog(1);

    $attachments = get_posts(array(
        'post_type' => 'attachment',
        'post_status' => null,
        'post__in' => $value,
    ));

    $ordered_attachments = array();
    foreach( $attachments as $attachment)
    {
        $ordered_attachments[ $attachment->ID ] = array(
            'id' => $attachment->ID,
            'alt' => get_post_meta($attachment->ID, 
                        '_wp_attachment_image_alt', true),
            'title' => $attachment->post_title,
        );
    }

    restore_current_blog();

    return $ordered_attachments;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:22:02.813

不，如果开发人员编写了“do_action”行代码，您只能“挂钩”到函数中。如果不是这种情况，您可以创建该函数的副本并调用您的副本而不是原始的，但是如果在插件内部调用该函数，您可以什么都不做，只能修改插件（如您所说，这不是一个好主意）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:30:58.393

请原作者拆分功能：

```
function get_ordered_attachments_by_field($post_id, $field)
{
    $value = parent::get_value($post_id, $field);

    return get_ordered_attachments($value);
}

function get_ordered_attachments($value)
{
    $attachments = get_posts(array(
        'post_type' => 'attachment',
        'post_status' => null,
        'post__in' => $value,
    ));

    $ordered_attachments = array();
    foreach ($attachments as $attachment)
    {
        $ordered_attachments[ $attachment->ID ] = array(
            'id' => $attachment->ID,
            'alt' => get_post_meta($attachment->ID, 
                        '_wp_attachment_image_alt', true),
            'title' => $attachment->post_title,
        );
    }

    return $ordered_attachments;
} 
```

然后，您可以更轻松地与您需要的功能进行交互，例如

```
 $value = $object->get_value($post_id, $field)
    switch_to_blog(1);
    $attachments = $object->get_ordered_attachments($value);
    restore_current_blog(); 
```

And the job is done. The benefit for the project is that they have reduced (at least a little bit) the lines of code in the attachment function and made it more concrete what the function does by it's name. No idea what that object is, if it's a plugin this looks anyway like a place to store functions in, so create more and more functions, but smaller ones.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:26:17.420

您可以通过将替换函数放在存储在`wp-contents/mu-plugins`

您应该检查以确保原始函数位于`if()`检查它是否已存在的块内。如果不是，那么这种方法将不起作用。

# c# - Visibility of Form Components when Enabled is false C#

> ID：13935957
> 
> 赞同：0
> 
> 时间：2012-12-18T15:15:00.963
> 
> 标签：c#, winforms, visible

I have a form with labels and other components, picture boxes, panels, etc.. When I am doing `Form.enabled = false;` (because I have another form on top of it) the labels are not showing even though the visibility of the components is set to true; Any ideas?

I didn't include code because I'm not sure what to include!

Thanks for any help!

**Edit**: After what Joel Etherton said, I tried using this event:

```
private void label1_VisibleChanged(object sender, EventArgs e)
{
      label1.Visible = true;
} 
```

This is giving me a `StackOverflowException`.. maybe this is infinitely trying to override the parent control visibility.. What can I do please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:16:34.857

检查元素的父对象（并在树上跟踪它）。通常这是由将父级设置为`Visible = false;`. 特定控件的可见性设置仍将注册为`true`，但当页面实际呈现时，它将停止在可见性为 false 的任何父级别生成控件。

*编辑：*
首先你应该找到问题的根本原因。这与其说是代码问题，不如说是期望问题。控件应该是可见的，但是您已经创建了一个不可能的条件。我认为最好通过尝试找出导致父控件具有错误可见性的条件来为您服务。您很可能会发现强制父级可见性存在逻辑问题，或者您的“可见”控件被放置在错误的根容器中的设计问题。但是，如果您只是想暴力破解父母的可见性，您可以使用递归方法：

```
private static void SetAllParentVisibility(bool visible, Control ctrl)
{
    ctrl.Visible = visible;
    if (ctrl.Parent != null)
        SetAllParentVisibility(visible, ctrl.Parent);
} 
```

另外，将上述方法视为伪代码。我尚未对其进行测试，并且`Control`可能需要更改类型才能适应不同的父类型。

# c++ - 对纹素中心进行采样不会给出正确的结果，OpenGL，C++

> ID：13935961
> 
> 赞同：10
> 
> 时间：2012-12-18T15:15:07.220
> 
> 标签：c++, opengl, graphics, textures

不久前，我在显示纹理时遇到了问题，因为我使用纹素的边缘作为纹理坐标而不是纹素的中心。这与线性混合相结合，给出了颜色的平滑结果，而不是纹理给出的纯色。

感谢这里给我的建议，当我开始使用纹素的中心作为坐标时，我认为我的问题已经解决了，但它只在一种情况下有效，我不知道为什么只在那种情况下有效。

我再展示一些图片。

这是我正在使用的纹理（32x32 像素），边框为 2 像素：

![在此处输入图像描述](../Images/1bbd37b4ccc74b67446ebd44f88e4034.png)

我正在绘制的整个对象由 9 个四边形组成，但它们只使用一个纹理（我展示的那个）。其中之一将作为我的问题的解释：

![在此处输入图像描述](../Images/5a1aa1e47762c185a555588e4c258e0e.png)

我认为很明显，该四边形的颜色没有根据纹理正确设置。

它看起来像是混合的问题，但是为了设置纹理坐标，我使用了纹素的中心，如下所示：

```
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(0.0 + texelCentersOffset, maxTexCoordBorderY + texelCentersOffset);
    glVertex2i(pos.x, pos.y + height - m_borderWidth);

    // Top left
    glTexCoord2f(0.0 + texelCentersOffset, (GLfloat)1.0 - maxTexCoordBorderY - texelCentersOffset);
    glVertex2i(pos.x, pos.y + m_borderWidth);

    // Top right
    glTexCoord2f(maxTexCoordBorderX - texelCentersOffset, (GLfloat)1.0 - maxTexCoordBorderY - texelCentersOffset);  
    glVertex2i(pos.x + m_borderWidth, pos.y + m_borderWidth);

    // Bottom right
    glTexCoord2f(maxTexCoordBorderX - texelCentersOffset, maxTexCoordBorderY + texelCentersOffset);
    glVertex2i(pos.x + m_borderWidth, pos.y + height - m_borderWidth);
glEnd(); 
```

为了澄清：

`m_borderWidth`= 2

`maxTexCoordBorderX`= `maxTexCoordBorderY`= 2/32 = 0.0625

`texelCentersOffset`= 1/64 = 0.015625

谁能告诉我我写的东西有什么问题？

编辑1：

这是我的纹理的设置：

```
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                 GL_LINEAR_MIPMAP_NEAREST );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S,
                    GL_REPEAT );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T,
                    GL_REPEAT );
gluBuild2DMipmaps( GL_TEXTURE_2D, 4, m_width, m_height,
                   GL_RGBA, GL_UNSIGNED_BYTE, pixmap ); 
```

当我从 GL_LINEAR 更改为 GL_NEAREST 时，它可以正常工作，所以这显然是混合的问题，但仍然无法弄清楚为什么它是错误的。

编辑2：

当我将四边形的高度增加到与纹理的高度相同或更大时，它可以正常工作而不会更改任何纹理坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T18:55:23.397

在我看来，当您将四边形大小设置为小于纹理大小时。它必须使用 mipmap 对纹理进行采样。

Mipmap 是通过平均 4 个纹素块制成的。因此，当您对 mipmap 进行采样时，您会从多个纹素中获取信息。因此，通过让您的四边形小于纹理，它必须对 mipmap 进行采样，并且您正在获得纹理出血。关闭 mipmapping，我猜它会消失。

# java - SMPP Payload with additional info?

> ID：13935963
> 
> 赞同：0
> 
> 时间：2012-12-18T15:15:12.373
> 
> 标签：java, smpp, payload, jsmpp

Is it possible to send some extra data with smpp payload/pdu using custom paramters or any other way. Language API could be any java, jsmpp or any other. Kindly share an example if its possible.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:45:47.853

在 SMPP 规范中，您有以下段落：“5.3.2 SMPP 可选参数标签定义”，您可以在其中找到可以添加到 PDU 的所有可选参数。

下面是将 sar_* 选项设置为 submit_sm 以指示它是长 submit_sm 的一部分的示例（使用此 python 库：[https](https://github.com/mozes/smpp.pdu) ://github.com/mozes/smpp.pdu ）：

```
pdu = SubmitSM()
pdu.params['sar_total_segments'] = 3
pdu.params['sar_segment_seqnum'] = 1
pdu.params['sar_msg_ref_num'] = 56 
```

无论如何，如果您需要设置“供应商特定”选项而不使用标准可选参数，则需要在客户端和服务器端的库中实现它，您可能不会发现它已准备好并在任何标准库中实现。

您可能还想定义一个消息结构来发送您的数据（这取决于您需要做什么......），例如，交付回执是通过具有特定消息格式的标准 Deliver_sm pdu 发送的，这里有一个方法来检查如果deliver_sm 内容表示送达回执或普通消息：

```
def isDeliveryReceipt(self, DeliverSM):
    """Check whether DeliverSM is a DLR or not, will return None if not
    or a dict with the DLR elements"""
    ret = None

    # Example of DLR content
    # id:IIIIIIIIII sub:SSS dlvrd:DDD submit date:YYMMDDhhmm done
    # date:YYMMDDhhmm stat:DDDDDDD err:E text: . . . . . . . . .
    pattern = r"^id:(?P<id>\d{10}) sub:(?P<sub>\d{3}) dlvrd:(?P<dlvrd>\d{3}) submit date:(?P<sdate>\d{10}) done date:(?P<ddate>\d{10}) stat:(?P<stat>\w{7}) err:(?P<err>\w{3}) text:(?P<text>.*)"
    m = re.search(pattern, DeliverSM.params['short_message'], flags=re.IGNORECASE)
    if m is not None:
        ret = m.groupdict()

    return ret 
```

# cocos2d-iphone - 如何等到 CCCallBlock 完成？

> ID：13935964
> 
> 赞同：0
> 
> 时间：2012-12-18T15:15:22.960
> 
> 标签：cocos2d-iphone

我在 CCCallBlock 中触发了几个动画。里面的每个动画都有一个持续时间，但它们的数量是在运行时定义的。在游戏中有状态机，我需要等到最后一个动画完成，但我不能使用这个：

```
 if([self numberOfRunningActions] > 0) 
```

因为该动作是一个持续时间为 0 的 CCCallBlock。

如何设置 CCCallBlock 操作的持续时间？可以在运行时完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:49:23.357

由于很多原因，这可能是错误的，但我想出了这个：

```
[CCCallBlock actionWithBlock:^{
         float duration = [self.cardsMatrix peepCards];
         [self runAction:[CCDelayTime actionWithDuration:duration]];
}]; 
```

这里的 self 是带有控制游戏的状态机的 CCLayer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:35:22.360

`CCCallBlock`运行 a`block`这是一个`C`函数（有点）。您不能为函数设置持续时间。

您可以将另一个添加`CCCallBlock`到您的动画中，将它们放入 a 中`CCSequence`，当它`CCCallBlock`运行时，您就知道动画已完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:01:57.270

```
[self runAction:[CCSequence actions:[CCCallBlock actionWithBlock:^{
    NSLog(@"my block");
}], [my next function], nil]]; 
```

# jquery - jQuery returns not a number only when I use subtract

> ID：13935967
> 
> 赞同：5
> 
> 时间：2012-12-18T15:15:31.337
> 
> 标签：jquery, math, equation

I am having an issue with jQuery that I can't seem to figure out.

If I do `console.log($(window).width()/2)` I get a numerical value.

If I do `$('.modal_box').outerWidth()` I get a numerical value.

However if I try to do `console.log($(window).width()/2 - $('.modal_box').outerWidth())` I get NaN. If I do the same equation but replace the `-` with `+` it works.

The window width is always wider than the `.modal_box`.

Why could this be? It is very frustrating.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:23:48.940

试试看

```
console.log(parseFloat($(window).width()/2) - parseFloat($('.modal_box').outerWidth())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:04:05.120

在处理数学和它返回的值时，我通常更喜欢将值显式解析为整数，以便我只得到我想要的值。我也想让代码尽可能地可读，就像这样：

```
var w = parseInt($(window).width()/2);
var mb = parseInt($('.modal_box').outerWidth());

console.log(w - mb); 
```

这样，这`console.log()`两个值也更容易理解，为什么操作没有返回数字。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:39:07.540

我已经按照您的方式进行了尝试，并且效果很好，即使是负值（当减去更大的数字时）。这是[小提琴](http://jsfiddle.net/Dh6RG/)，这里是代码：

```
$(document).ready(function(){

    alert($('#someDiv').outerWidth());
    alert($(window).width());
    alert($('#someDiv').outerWidth() - $(window).width());
}); 
```

我相信错误存在于语法中的某个地方，或者如果没有提供元素宽度的 css 属性，则可能（很远）。

以下是附加信息：

为了将它定位在屏幕的中心，'.modal_box' 应该有 'position: absolute'，是 body 元素的直接同级元素并且左设置为 ($(window).width()/2) - ($('.modal_box').outerWidth()/2)。

# jquery - 重定向到多个域的 jQuery cookie

> ID：13935975
> 
> 赞同：0
> 
> 时间：2012-12-18T15:16:01.853
> 
> 标签：jquery, jquery-cookie

这是我正在尝试做的事情：

*   subdomain.domain1.com/splashpage.html 上的启动页
*   用户单击按钮并被重定向到 subdomain.domain1.com/landingpage.html 或 subdomain.domain2.com/landingpage.html
*   在 subdomain.domain1.com/splashpage.html 上设置的 Cookie 会记住他们的选择并在下次自动重定向它们

我已经使用 jQuery cookies 插件和一个非常有用的大纲成功创建了 cookie：[记住首选语言](https://stackoverflow.com/questions/11383839/remember-preferable-language)

我用来设置 cookie 的代码：

```
<script type="text/javascript">
$(function () {
    var url = 'domain1.com';
    var east = 'subdomain.domain1.com/landingpage.html';
    var west = 'subdomain.domain2.com/landingpage.html';

    if ($.cookie('nameofmycookie') != null) {
        if (window.location.href != url + '/' + $.cookie('nameofmycookie')) {
            window.location.href = url + '/' + $.cookie('nameofmycookie');
        }
    }

    $('#set-eastern').click(function () {
        $.cookie('nameofmycookie', east, { expires: 999 });
        alert('East was set as your choice');
    });

    $('#set-western').click(function () {
        $.cookie('nameofmycookie', west, { expires: 999 });
        alert('West was set as your choice');
    });

});
</script> 
```

几个问题：

*   我`east`和`west`变量 URL 似乎与`url`变量相关，它们重定向到 domain1.com/subdomain.domain1.com/landingpage.html
*   在我的 /landingpage.html 上都有一个我无法编辑的基本 href，所以：`<base href="http://subdomain.domain1.com/landingpage.html" />`和`<base href="http://subdomain.domain2.com/landingpage.html" />`

有谁知道我需要对代码进行哪些调整才能正确地将用户重定向到正确的 URL/域？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:47:11.763

很难猜出你想要什么，也许这就是你要找的？

```
$(function () {
    var east = 'http://subdomain.domain1.com/landingpage.html';
    var west = 'http://subdomain.domain2.com/landingpage.html';
    var host = location.hostname;
    var cook = $.cookie('nameofmycookie');

    if (cook) {
        if (cook.indexOf(host)==-1) { // we are not on the site the cookie says
            window.location = cook;
        }
    }

    $('#set-eastern').click(function () {
        $.cookie('nameofmycookie', east, { expires: 999 });
        alert('East was set as your choice');
    });

    $('#set-western').click(function () {
        $.cookie('nameofmycookie', west, { expires: 999 });
        alert('West was set as your choice');
    });

}); 
```

# jquery - 如何在多页html文档中传递查询字符串

> ID：13935980
> 
> 赞同：-5
> 
> 时间：2012-12-18T15:16:20.953
> 
> 标签：jquery

我有 2 页的 html 文档，并且正在使用 html5、jquery 和 jquery mobile。我需要将一个值从一个页面传递到另一个页面。我正在使用像 test.html#page-b 这样的 url。如何通过此 url 传递查询字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:19:11.290

您可以执行以下操作：

```
 $(window).load(function() {
      window.location.href =  window.location.href?qs=XXX
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:26:05.293

您需要在 URL 中的哈希*之前有查询字符串。*

```
test.html?query=string#hash 
```

# django - Django admin 中的图像使用错误的 URL 生成

> ID：13935982
> 
> 赞同：2
> 
> 时间：2012-12-18T15:16:32.420
> 
> 标签：django, django-admin

我正在尝试 Django 并遇到以下问题：

我有一个模型类`Property`，它具有各种属性，其中有一个图像。`image`属性定义为：

```
image = models.FileField(
    upload_to = 'properties',
    default = 'properties/house.jpeg') 
```

该目录`properties`是一个子目录，`images`其定义`settings.py`如下：

```
MEDIA_ROOT = '/Users/.../Development/pms/images/'
MEDIA_URL = 'http://localhost:8000/images/' 
```

源自关于这个主题的类似帖子，我在我的`Property`模型中添加了以下内容：

```
def admin_image(self):
    return '<img src="images/%s" width="100"/>' % self.image
admin_image.allow_tags = True 
```

然后我将`admin_image()`作为属性添加到列表显示中：

```
list_display = ('admin_image', ...) 
```

当我在管理应用程序中检查图像的 URL 时，我得到以下信息：

```
http://127.0.0.1:8000/admin/properties/property/images/properties/house.jpeg/ 
```

这会生成 404，因为 URL 生成不正确。首先路径不正确，其次在 URL 的末尾有一个尾随 /。

我显然错过了一些东西......我做错了什么？

编辑：

感谢@okm 提供的各种指示。我做了以下事情：

在我的 urls.py 中添加了以下内容：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from django.conf import settings

... original url patterns ...

urlpatterns += staticfiles_urlpatterns()

if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^images/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
        }),
   ) 
```

然后在 settings.py 中设置 MEDIA_ROOT：

```
absolute/filesystem/path/to/images 
```

在 settings.py 中设置 MEDIA_URL：

```
/images/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:55:53.593

根据[doc](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.FileField.upload_to) & [here](https://docs.djangoproject.com/en/1.4/topics/files/#using-files-in-models)，尝试`self.image.url`代替`'...' % self.image`

# php - 插入后显示查询结果

> ID：13935989
> 
> 赞同：0
> 
> 时间：2012-12-18T15:16:44.043
> 
> 标签：php, codeigniter

请帮助我在将查询插入数据库后如何将数据显示到视图页面。

查看页面（member_view.php）：

```
<form action="<?php member_controller/insert_info; ?>" method="post">
<input type="text" name="fname">  
<input type="text" name="lname">
<input type="submit" name="submit">
</form>  

<?php 
if($res){
    foreach($res as $data){
    echo $data['fname'];  
    echo $data['lname'];
    }
}
?> 
```

控制器页面（member_controller.php）：

```
<?php  
class Member_Controller extends CI_Controller {

public function insert_info(){  

$data = array('fname' => $this->input->post('fname'),  
'lname' => $this->input->post('lname'),           
);  

$this->load->model('member_model');  
$this->member_model->member_posting($data);  
$data['username'] = $session_data['username'];
$retrieved_info['res'] = $this->member_model->member_posting($data);
$this->load->view('member_view',$data, $retrieved_info)
}

} 
```

模型页面（member_model）：

```
<?php
class Member_Model extends CI_Model{  

public function member_posting($data=array()){

extract($data);

$query = "INSERT INTO member_table (fname, lname)values ('$fname', '$lname')";
$result = $this->db->conn_id->prepare($query);
$result->execute();

if($result){
$query = "SELECT * FROM member_table WHERE fname = '$fname' AND lname='$lname'";
$result = $this->db->conn_id->prepare($query);
$result->execute();   
return $res = $result->fetchAll(PDO::FETCH_ASSOC);
}

}

} 
```

这将是模式：

视图（提交表单）---->控制器（获取变量并发送到模型）--->
模型（插入数据库并执行选择查询）--->控制器（从模型中获取选择查询结果）--- >查看（显示结果）

请帮助我，我刚接触codeigniter，希望我能向你们学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:48:56.470

这是您需要遵循的方式......

查看文件：member_view.php

```
<form action="<?php echo ROOT_FOLDER ?>/member_controller/insert_info" method="post">
  <input type="text" name="fname">  
  <input type="text" name="lname">
  <input type="submit" name="submit">
</form> 
```

控制器文件：member_controller.php

```
<?php  
     class Member_Controller extends CI_Controller {

        public function insert_info()

         {  

           $data = array(
                      'fname' => $this->input->post('fname'),  
                      'lname' => $this->input->post('lname'),           
                   );  

          $this->load->model('member_model');  
          $this->member_model1->member_posting($data);
          $retrieved_info = array();
          $retrieved_info['res'] = $this->member_model2->member_posting($data);
          $this->load->view('member_view',$data, $retrieved_info)
       }

   } 
```

模型文件：member_model1.php

```
 class Member_Model extends CI_Model{  

        public function member_posting_inserting($data){

          $this->insert_helper('member_table',$data); 

         }

        public function member_posting_retrieving($data){

           $query = "SELECT * FROM member_table WHERE fname = '$data['fname']' AND lname='$data['lname']'";
           $res=$this->db->query($query);

            if($res->num_rows()>0){
             return $res->result("array");
             }
           return array();
         }  
       } 
```

插入辅助函数......

```
 public function insert_helper($table_name, $data_array){
    $this->db->insert($table_name,$data_array);
    return $this->db->insert_id();      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:36:29.893

这个

```
$this->load->view('member_view',$data, $retrieved_info) 
```

在你的情况下不会成功。在此处阅读有关视图：http: [//ellislab.com/codeigniter/user-guide/general/views.html](http://ellislab.com/codeigniter/user-guide/general/views.html)

第二个参数是数据数组。第三个参数可以是 TRUE 或 FALSE，决定视图是渲染还是返回为字符串。

这应该可以解决问题：

```
$this->load->view('member_view', $retrieved_info); 
```

编辑：

刚刚注意到您的 member_posting() 没有返回任何内容。它应该返回 $res;

# c - 将pid写入fifo - C

> ID：13935991
> 
> 赞同：0
> 
> 时间：2012-12-18T15:16:51.007
> 
> 标签：c, unix, pipe, pid, fifo

我有两个 C 文件，server.c 和 client.c。服务器必须创建一个 fifo 文件并不断读取它，等待输入。客户端获取它的 PID 并将 PID 写入 fifo。这是我首先启动的服务器文件：

```
int main(){
  int fd;
  int fd1;
    int bytes_read;
    char * buffer = malloc(5);
    int nbytes = sizeof(buffer);

    if((fd = mkfifo("serverfifo",0666)) == -1) printf("create fifo error");
    else printf("create fifo ok");

    if ((fd1 = open("serverfifo",O_RDWR)) == -1) printf("open fifo error");
    else{
        printf("open fifo ok"); 
        while(1){
            bytes_read = read(fd,buffer,nbytes);
            printf("%d",bytes_read);
            }
        }

return(0);
} 
```

我的客户文件：

```
int main(){

    int fd;
    int pid = 0;
    char *fifo;
    int bytes;

    if ((pid = getpid()) == 0)  printf("pid error");
    char pid_s[sizeof(pid)];
    sprintf(pid_s,"%d",pid); 

   if ((fd = open ("serverfifo",O_RDWR)) == -1)printf("open fifo error");
   else {
    printf("open fifo ok");

        bytes = write(fd,pid_s, sizeof(pid_s));
        printf("bytes = %d",bytes);

   }

    close(fd);
return(0);
} 
```

我遇到的两个主要问题是：当我将 pid 写入文件时，它返回我写入的字节数，所以看起来没问题，但是当我检查 fifo 文件的属性时，它显示为 0 字节。第二个问题是读取不起作用。如果我在它显示之前执行 printf ，但在它没有显示之后并且读取没有返回任何它只是冻结。我意识到网站上有很多类似的帖子，但我找不到任何有用的东西。我正在使用带有 CodeBlocks 的 Ubuntu 和 GCC 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:30:09.410

这里有很多问题

```
char pid_s[sizeof(pid)];
sprintf(pid_s,"%d",pid); 
```

`sizeof(pid)`返回 pid 值的大小，而不是它的字符串表示形式，即它是`sizeof(int)`4 或 8，具体取决于您的体系结构。然后您继续打印它。如果这行得通，它只能靠运气（你在 64 位机器上）。正确的做法是，如果您选择这样做，则分配一个适当大的缓冲区，并使用 snprintf 确保您不会溢出。PID 适合 5 位数字，因此可以执行以下操作：

```
char pid_s[8];
snprintf(pid_s, sizeof(pid_s), "%d", pid); 
```

当然，您可以一起跳过这一步，而是发送 pid 的原始字节

```
write(fd, (void*)&pid, sizeof(pid)) 
```

现在在服务器中你犯了类似的错误：

```
char * buffer = malloc(5);
int nbytes = sizeof(buffer); 
```

`sizeof(buffer)`再次返回 4 或 8，但您分配了 5 个字节，如果您想在堆上分配（使用 malloc），正确的方法是：

```
char* buffer = malloc(8);
int nbytes = 8; 
```

或者，您可以在堆栈上分配：

```
char buffer[8];
int nbytes = sizeof(buffer); 
```

sizeof 有点神奇，因为如果你传入一个数组，在这种情况下它会返回数组的大小 (8*1)。

当你阅读时，你读了 5 个字节，这可能是不够的（因为你写了 8 个字节，因为之前的 bug），所以它不会完成。你应该这样读

```
int pid;
read(fd, (void*)&pid, sizeof(pid)); 
```

此外，如果您要实际读取和写入字符串，您将执行以下操作：

```
// client
char pid_s[8];
snprintf(pid_s, sizeof(pid_s), "%d", pid);
write(fd, pid_s, sizeof(pid_s));

// server
char pid_s[8];
read(fd, pid_s, sizeof(pid_s)); 
```

另请注意，读取返回的内容可能少于写入的内容，您需要再次调用它以继续阅读...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:28:07.723

好吧，这段代码有很多错误......首先 sizeof 不是那样工作的。为什么要序列化 ​​pid ？

这是错误的：

```
char pid_s[sizeof(pid)]; 
```

123456 是一个整数，它不适合这个大小为 4 的数组，只能打印 3 个字符...

而且因为您正在尝试序列化 pid，所以您不知道要读取的预期大小，除非您采取最坏的情况并为 '\0' 写入 10 + 1...

# windows-phone-7 - 在 Windows Phone 上调试 javascript

> ID：13935992
> 
> 赞同：1
> 
> 时间：2012-12-18T15:16:53.407
> 
> 标签：windows-phone-7, cordova, visual-studio-debugging

我正在将在 iPhone 和 Android 上运行 gerat 的 PhoneGap 应用程序转换为 Windows Phone。我已经使用 Visual Studio 2010 设置了一个开发环境，但是在调试时遇到了很大的问题，甚至从应用程序中得到了错误。

我可以插入日志消息，其中一些消息会出现，但如果出现 Javascript 错误，它对我没有帮助..你们中的任何人都可以帮助我吗..

提前感谢金

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:05:43.210

好的，经过一些研究，我在这里和那里找到了一些片段，可以将 console.log 和 onerror 消息添加到项目中。请看这里：[https ://stackoverflow.com/a/13943345/809934](https://stackoverflow.com/a/13943345/809934)

我希望它可以帮助你问候金

# c++ - c ++函数中的新实例

> ID：13935998
> 
> 赞同：1
> 
> 时间：2012-12-18T15:17:10.447
> 
> 标签：c++, class, pointers, instance

我有这个问题：

```
void myFunc()
{
  MyClass * myInstance = NULL;

  newInstance(myInstance);
}

void newInstance(MyClass * instance)
{
  instance = new MyClass(...);
} 
```

代码似乎工作正常，但是当我从 newInstance 函数退出时，我的 myInstance 为空，而不是 newInstance 内部的值......问题出在哪里？t

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T15:18:15.307

指针被复制到`newInstance`，然后您更改该副本的值。如果要修改函数内部的指针，需要通过引用传递：

```
void newInstance(MyClass*& instance)
{
  instance = new MyClass(...);
} 
```

或者，您可以通过 a`MyClass**`和 do `*instance = new Class(...);`。

无论哪种方式，最好实际返回指针而不是将其作为可修改的参数传递。

```
void myFunc()
{
  MyClass * myInstance = newInstance();
  delete myInstance;
}

MyClass* newInstance()
{
  return new MyClass(...);
} 
```

当然，你必须记住`delete`对象。为避免这种情况，您可以使用智能指针使其更安全：

```
void myFunc()
{
  auto myInstance = newInstance();
}

std::unique_ptr<MyClass> newInstance()
{
  return std::unique_ptr<MyClass>(new MyClass(...));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:19:52.987

您需要将引用传递给指针，或从函数返回指针：

```
void newInstance(MyClass*& instance)
{
  instance = new MyClass(...);
}

MyClass* newInstance()
{
  return new MyClass(...);
} 
```

但是您不想处理指向动态分配内存的原始指针。您真正需要的是在这里使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)，尤其是[std::unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)。

# c# - 强制 BindingSource 更新数据/模型

> ID：13935999
> 
> 赞同：3
> 
> 时间：2012-12-18T15:17:17.313
> 
> 标签：c#, user-interface, devexpress

我似乎无法弄清楚这一点，也找不到任何答案。

我有一个绑定到模型中的属性的组合框。我将在我的代码中复制并粘贴关键行：

```
 this.m_typeCombobox.DataBindings.Add(new System.Windows.Forms.Binding("EditValue", this.m_bindingSource, "Type", true, System.Windows.Forms.DataSourceUpdateMode.OnPropertyChanged)); 
```

我的模型：

```
public class TypeConfig : INotifyPropertyChanged
{     
            public event PropertyChangedEventHandler PropertyChanged;
           private EnumType<eLType> m_type;
    public EnumType<eLType> Type
    {
        get { return m_type; }
        set
        {
            if (m_type!= value)
            {
                m_type= value;
                var handler = PropertyChanged;
                if (handler != null)
                    handler(this, new PropertyChangedEventArgs("Type"));
            }
        }
    } 
```

我需要在组合框 EditValueChanged 事件上更新模型，但看起来模型稍后会更新。EditValueChanged 是更改时最近调用的事件。

我试过这个：

```
void m_TypeCombobox_EditValueChanged(object sender, EventArgs e)
    {
           m_bindingSource.EndEdit(); //this doesn't work 
          //need to have the new value here
    } 
```

这是 MSDN 所说的：

调用 EndEdit 方法时，所有挂起的更改都将应用于基础数据源。除非数据源包含的对象实现 IEditableObject 接口，否则此方法无效。如果对象未实现 IEditableObject 接口，则对数据的更改会在每次更改后立即复制到基础数据源。

因此，根据我的理解，模型应该在更改组合框值时立即更新。

我正在使用与普通 WinForms 组合框几乎相同的 DevExpress 组合框。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:22:12.880

尝试绑定到“Value”属性，而不是“EditValue”我希望它可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:27:25.847

要让 BindingSource.EndEdit 执行任何操作，您需要为 BindingSource 中包含的项目实现 System.ComponentModel.IEditableObject。

当您在绑定源上调用“EndEdit”时，它随后会在其列表中实现 IEditableObject 的项目上调用相应的 IEditableObject.EndEdit() 方法。

话虽如此，我遇到了一些问题，例如，当用户关闭表单时，没有为所有已调用 BeginEdit 的项目调用 EndEdit。